# StackOverflow 问答 15569000-15569999

# c# - 如何相互更新2个数据库？

> ID：15569004
> 
> 赞同：-1
> 
> 时间：2013-03-22T11:16:24.343
> 
> 标签：c#, sqlite

我有一个使用 c#.net 构建的小型会计程序，我使用 sqlite 数据库，因为它是无服务器数据库。现在这个程序安装在我父亲的商店（PC），他有一台笔记本电脑，他随身携带回家，他也想将它安装在笔记本电脑上，因为有时他想在家做一些工作。所以我想做一些事情来更新这两个数据库是一样的。我不想复制粘贴数据库文件，因为我不想丢失任何数据。我想检查 2 个数据库的更改并在有任何更改时更新它们。

我的问题是我该怎么做？

注意：两台计算机将连接到本地网络。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:19:13.633

似乎您需要 ADO.Net 同步服务，请参阅[此处](http://msdn.microsoft.com/en-us/sync/bb887608)

# mysql - Wordpress 数据库错误 - #1071 - 指定的键太长；最大密钥长度为 1000 字节

> ID：15569007
> 
> 赞同：1
> 
> 时间：2013-03-22T11:16:33.090
> 
> 标签：mysql, wordpress, utf-8, longtext, mysql-error-1071

我有一个 WordPress 博客，但它的内容中有一些奇怪的字符，例如 �。我在我的 phpmyadmin 中发现，在我的`wp_posts`表中，该列`post_content`正在使用`latin1_swedish_ci`排序规则。我正在尝试将其更改为，`utf8_unicode_ci`但它给了我这个错误：

> #1071 - 指定的密钥太长；最大密钥长度为 1000 字节

SQL查询：

```
ALTER TABLE `wp_posts3` CHANGE `post_content` `post_content` LONGTEXT
CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL 
```

我该如何解决？我向我的主人（hostgator）寻求帮助，但他们说从他们的角度来看这不是问题。

我的最终目标是摆脱帖子中的奇怪字符。此外，我的 wp-posts 表有 33K+ 行，因为它是一个包含大约 10K 帖子的巨大博客。

# javascript - 在我的网站上分享 Facebook

> ID：15569010
> 
> 赞同：0
> 
> 时间：2013-03-22T11:16:40.443
> 
> 标签：javascript, html

我正在使用 javascript 代码在我的网站上引入一个 facebook 分享按钮。当我单击此按钮时，会像往常一样出现一个弹出窗口，但选择的缩略图是 facebook 徽标缩略图。我想展示我的标志而不是 facebook 标志。任何人都可以帮忙吗？

这是我的脚本。

```
<script>function fbs_click() {
u=location.href;
t=document.title;
window.open('http://www.facebook.com/sharer.php?u='+encodeURIComponent(u)+'&t='+encodeURIComponent(t),'sharer','toolbar=0,status=0,width=626,height=436');
return false;
}
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T11:26:31.757

您需要将 og:image 元标记添加到您的页面。

```
<meta property="og:image" content="http://yoursite.com/thumb.jpg"/> 
```

[有关Facebook 元标签](https://developers.facebook.com/docs/opengraphprotocol/)的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T11:39:02.863

正如 Clement 所描述的，您应该`og:image`为您的页面设置一个元标记，以便所有元数据爬虫都可以检索图像。

但是，如果使用[FB JS SDK](http://developers.facebook.com/docs/reference/javascript/FB.ui/)`FB.ui`中的方法，则可以直接指定元数据：

```
FB.ui({
    method: 'feed',
    link: 'http://www.yoururl.com/',
    picture: 'http://www.yoururl.com/img/yourimg.png',
    name: 'Your Site',
    caption: '',
    description: ''
}); 
```

这种分享方法比直接打开一个新窗口到旧的 Facebook sharer.php 要灵活得多。

您可能不想使用此方法的唯一原因是避免从 FB 加载额外的 JS 文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T11:31:33.693

是的，[标志代码，](http://developers.facebook.com/)您可以使用此链接作为参考，这肯定会有所帮助。

# android - Android UDP客户端无法在非root手机上接收数据

> ID：15569012
> 
> 赞同：2
> 
> 时间：2013-03-22T11:16:46.160
> 
> 标签：android, networking, android-ndk, udp

我已经在 android 的本机部分（即在 C 中）实现了一个 UDP 客户端。为了从服务器（PC）接收数据，我的设备和 PC 都通过 wifi 连接。

当客户端安装在有根设备上时，它能够完美地接收来自服务器的数据。然而，在非根设备上，虽然它没有显示任何错误，但它无法发送/接收数据表单/到服务器。

下面是我的服务器代码：

```
#include<sys/types.h>
#include<sys/socket.h>
#include<netinet/in.h>
#include<sys/stat.h>
#include<unistd.h>
#include<stdlib.h>
#include<stdio.h>
#include<fcntl.h>
int main()
{
    int cont,create_socket,new_socket,addrlen,fd;
    int bufsize = 3000;

    int nameLen=0;
    int client_address_size=0;
    char *buffer = malloc(bufsize);
    char fname[256];
    struct sockaddr_in address,client;

    if ((create_socket = socket(AF_INET,SOCK_DGRAM,0)) > 0)
    printf("The socket was created\n");

    address.sin_family = AF_INET;
    address.sin_addr.s_addr = INADDR_ANY;

    address.sin_port = htons(15000);

    if (bind(create_socket,(struct sockaddr *)&address,sizeof(address))== 0)
        printf("Binding Socket\n");

    nameLen=sizeof(address);

    if (getsockname(create_socket,(struct sockaddr *)&address,&nameLen)<0)
    {
        printf("\n\ngetsockname() error\n");
        exit(3);
    }

    printf("Port assigned is %d\n", ntohs(address.sin_port));

    client_address_size=sizeof(client);

    if(recvfrom(create_socket,fname, 255,0,(struct sockaddr *) &client,&client_address_size)<0)
    {
        printf("\n\nrecvfrom() failed\n");
        exit(4);
    }

    printf("A request for filename %s Received..\n", fname);

    if ((fd=open(fname, O_RDONLY))<0)
    {
        perror("File Open Failed");
        exit(0);
    }

    while((cont=read(fd, buffer, bufsize))>0) 
    {
        sleep(1);
        sendto(create_socket,buffer,cont,0,(struct sockaddr *) &client,client_address_size);
        printf("\n\nPacket sent\n");
    }

    sendto(create_socket,"*",1,0,(struct sockaddr *) &client,client_address_size);

    printf("Request Completed\n");
    return close(create_socket);
} 
```

android NDK 上的客户端代码：

```
JNIEXPORT void JNICALL Java_com_examplemyPlayer_startClient
  (JNIEnv *env, jclass jobj, jint portNo, jstring argv1)
{
    __android_log_print(ANDROID_LOG_DEBUG,"MYAPP","start client has entered....",NULL);
    //int portno=portNo;
    const char *servIP = (*env)->GetStringUTFChars(env, argv1, 0);

    __android_log_print(ANDROID_LOG_DEBUG,"MYAPP","Server IP address:%s",servIP);
    __android_log_print(ANDROID_LOG_DEBUG,"MYAPP","Server Port No.:%d",portno);

    qBuff=(unsigned char *)malloc(sizeof(char)*Q_SIZE);//qBuff is a global pointer

    int create_socket,cont;
    int bytesWritten=0;
    int bufsize = 3000;
    int server_address_size=0;
    char *buffer = malloc(bufsize);

    char reqFname[8]="Bub.bin";

    struct sockaddr_in address,server;
    int serv_addr_size = sizeof(address);

    if ((create_socket = socket(AF_INET,SOCK_DGRAM,0)) < 0)
        __android_log_print(ANDROID_LOG_DEBUG,"MYAPP","The Socket was NOT created",NULL);

    __android_log_print(ANDROID_LOG_DEBUG,"MYAPP","The Socket was successfully created",NULL);

    address.sin_family = AF_INET;
    address.sin_port = htons(15000);
    address.sin_addr.s_addr=inet_addr(servIP);

    if((sendto(create_socket, reqFname, sizeof(reqFname), 0,(struct sockaddr *) &address,sizeof(address)))==-1)
        __android_log_print(ANDROID_LOG_DEBUG,"MYAPP","Error sending filename to server",NULL);

    __android_log_print(ANDROID_LOG_DEBUG,"MYAPP","Request Accepted... \n\nReceiving File...",NULL);

    server_address_size=sizeof(server);

    __android_log_print(ANDROID_LOG_DEBUG,"MYAPP","Contents of the file are:",NULL);

    while((cont=recvfrom(create_socket, buffer, bufsize, 0,(struct sockaddr *) &address,&serv_addr_size))>0)
    {
            if(buffer[cont-1]=='*')
               break;

            memcpy(qBuff+r,buffer,cont);//copying received data to a circular queue
            r=(r+3000)%Q_SIZE;
            __android_log_print(ANDROID_LOG_DEBUG,"MYAPP","Bytes received:%d",cont);
            //write(1, buffer, cont);
    }

    __android_log_print(ANDROID_LOG_DEBUG,"MYAPP","EOF",NULL);
    free(qBuff);
    close(create_socket);

} 
```

上面的代码适用于有根设备，但不适用于无根设备。由于我正在创建的应用程序应该能够在有根设备和无根设备上运行，因此我还需要使代码在无根设备上运行。

**只有在使用/sbin/services iptable stop**禁用 Linux 防火墙后，服务器才能连接到 root 设备。那么是否有用于阻止通信端口的无根设备的防火墙。在上面的代码中，我正在尝试端口号 15000。但是我也尝试过其他端口，但没有锻炼。

因此，我恳请读者提供有用的答案或参考链接。提前致谢。

# assembly - 将 64 位整数加载到双精度 SSE2 寄存器的最佳方法？

> ID：15569015
> 
> 赞同：14
> 
> 时间：2013-03-22T11:16:56.747
> 
> 标签：assembly, double, sse, sse2, int64

`xmm`在 32 位模式下在 SSE2 寄存器中加载 64 位整数值的最佳/最快方法是什么？

在 64 位模式下，`cvtsi2sd`可以使用，但在 32 位模式下，它只支持 32 位整数。

到目前为止，我还没有发现太多：

*   使用`fild`,`fstp`堆叠然后`movsd`注册`xmm`
*   加载高 32 位部分，乘以 2^32，加上低 32 位

第一个解决方案很慢，第二个解决方案可能会引入精度损失（**编辑：**无论如何它很慢，因为必须将低 32 位转换为无符号......）

有更好的方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-24T13:08:20.193

您的第二个选项*可以*工作，尽管它有点笨拙。我假设您的 64 位数字最初位于 edx:eax 中。

```
cvtsi2sd xmm0, edx              // high part * 2**-32
mulsd    xmm0, [2**32 from mem] // high part
movsd    xmm2, [2**52 from mem]
movd     xmm1, eax
orpd     xmm1, xmm2             // (double)(2*52 + low part as unsigned)
subsd    xmm1, xmm2             // (double)(low part as unsigned)
addsd    xmm0, xmm1             // (double)(high part + low part as unsigned) 
```

除了可能的最后一个之外，所有的操作都是精确的，所以这是正确的四舍五入。应该注意的是，`-0.0`当输入是`0`并且`mxcsr`设置为负无穷大时，会产生这种转换。如果它被用于旨在提供 IEEE-754 一致性的编译器的运行时库中，则需要解决此问题，但对于大多数用途而言，这不是问题。

# python - 运行时错误退出，错误状态为 1

> ID：15569016
> 
> 赞同：3
> 
> 时间：2013-03-22T11:16:57.343
> 
> 标签：python

问题是[这样](https://www.spotify.com/nl/jobs/tech/zipfsong/)的：我试图解决它，我想我也这样做了，但是当我邮寄它进行评估时，它说

```
We have tested your solution, and while doing so we unfortunately
discovered the following error:
Run Time Error

Exited with error status 1 
```

这是我的代码：

```
import re
import sys
def fun():
    for ind in ratio:
        max_num = ratio_list[0]
        if ratio[ind] == max_num:
            print ind

    ratio_list.remove(ratio_list[0])

hits = []
song = []   
n,m = raw_input().split(' ',1)

for i in range(0,int(n)):
    h,n = raw_input().split(" ",1)

    is_number = isinstance( int(h), int )   
    is_string = len(n)<=30 and bool(re.match('[a-z_0-9]+$', n))
    if not(is_number and is_string):
        sys.exit("Error");
    hits.append(int(h))
    song.append(n)
ratio = {}
ratio_list = []
f_of_i = hits[0]
counter = 1
index = 0

for hit in hits:
    ratio_list.append(hit*counter)
    ratio[song[index]] = hit*counter
    index = index +1
    counter = counter +1

ratio_list.sort()
ratio_list.reverse()

for j in range(0,int(m)):
    fun() 
```

我究竟做错了什么 ？我很好奇为什么解决方案是不可接受的杀死我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T11:28:39.783

我怀疑你在打

```
 sys.exit("Error"); 
```

如[文档](http://docs.python.org/2/library/sys.html#sys.exit)中所述：

> 一些系统有为特定退出代码分配特定含义的约定，但这些通常不发达；Unix 程序通常使用 2 表示命令行语法错误，使用 1 表示所有其他类型的错误。如果传递了另一种类型的对象，则 None 等效于传递零，并且**任何其他对象都将打印到 stderr 并导致退出代码 1。**

可能值得稍微放松一下输入验证？现在它非常严格，它会拒绝出现在规范中的输入（比如播放计数和歌曲标题之间是否有两个空格）。

另一种可能性是您的代码引发了异常。在我的机器上，这也会导致退出代码为 1。

最后，虽然不是错误，但我认为您重用被调用变量的方式`n`是有问题的风格。

# c# - 从泛型接口继承

> ID：15569018
> 
> 赞同：9
> 
> 时间：2013-03-22T11:17:11.053
> 
> 标签：c#, generics, inheritance, interface

我不知道如何解决通用接口的问题。

通用接口代表对象的工厂：

```
interface IFactory<T>
{
    // get created object
    T Get();    
} 
```

接口代表计算机工厂（计算机类）指定通用工厂：

```
interface IComputerFactory<T> : IFactory<T> where T : Computer
{
    // get created computer
    new Computer Get();
} 
```

通用接口代表对象的特殊工厂，可克隆（实现接口 System.ICloneable）：

```
interface ISpecialFactory<T> where T : ICloneable, IFactory<T>
{
    // get created object
    T Get();
} 
```

Class 代表计算机（Computer 类）和可克隆对象的工厂：

```
class MyFactory<T> : IComputerFactory<Computer>, ISpecialFactory<T>
{

} 
```

我在 MyFactory 类中收到编译器错误消息：

```
The type 'T' cannot be used as type parameter 'T' in the generic type or method 'exer.ISpecialFactory<T>'. There is no boxing conversion or type parameter conversion from 'T' to 'exer.IFactory<T>'.   

The type 'T' cannot be used as type parameter 'T' in the generic type or method 'exer.ISpecialFactory<T>'. There is no boxing conversion or type parameter conversion from 'T' to 'System.ICloneable'. 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-22T11:19:42.240

不确定这是否是一个错字，但应该这样：

```
interface ISpecialFactory<T>
        where T : ICloneable, IFactory<T> 
```

真的是

```
interface ISpecialFactory<T> : IFactory<T>
        where T : ICloneable 
```

真的，我认为这可能是你想要做的：

```
public class Computer : ICloneable
{ 
    public object Clone(){ return new Computer(); }
}

public interface IFactory<T>
{
    T Get();    
}

public interface IComputerFactory : IFactory<Computer>
{
    Computer Get();
}

public interface ISpecialFactory<T>: IFactory<T>
    where T : ICloneable
{
    T Get();
}

public class MyFactory : IComputerFactory, ISpecialFactory<Computer>
{
    public Computer Get()
    {
        return new Computer();
    }
} 
```

现场示例：[http ://rextester.com/ENLPO67010](http://rextester.com/ENLPO67010)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T11:22:20.483

我猜你的定义`ISpecialFactory<T>`是不正确的。将其更改为：

```
interface ISpecialFactory<T> : IFactory<T>
    where T : ICloneable
{
    // get created object
    T Get();
} 
```

您可能不希望`T`实现该类型`IFactory<T>`！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T11:20:40.450

试试这个代码块：

```
class MyFactory<T> : IComputerFactory<Computer>, ISpecialFactory<T>
    where T: ICloneable, IFactory<T>
    {

    } 
```

# c++ - 为子类使用基本默认构造函数（带参数）

> ID：15569020
> 
> 赞同：0
> 
> 时间：2013-03-22T11:17:16.213
> 
> 标签：c++, inheritance

我有一个 A 类，它必须有一个类传递给它；从AI有B类和C类两个；B 和 C 是否可以使用 A 中的构造函数，与默认构造函数相对应。

```
 A
    / \
   B   C 

A::A(randomNumber &rnd)
{
    ....
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T11:18:34.610

是的。采用

```
class B {
public:
   B() : A(someRndNum) {}
}; 
```

和 C 一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:19:00.657

是的，有可能：

```
class B
{
public:
    B(randomNumber& rnd) : A(rnd) { }
    // ...
}; 
```

如果你想`A`在 ' 的默认构造函数中调用 ' 的构造`B`函数，你将不得不传递一个全局对象：因为`A`' 的构造接受左值引用，所以创建一个临时的不是一个选项。

```
B() : A(global_random_number); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T11:20:48.840

您可以使用以下语法：

```
B::B() : A(aRandomNum)
{
    ....
} 
```

# css - 样式化子 html 元素

> ID：15569024
> 
> 赞同：2
> 
> 时间：2013-03-22T11:17:39.767
> 
> 标签：css, css-selectors, parent-child

我需要在 dom 中设置一些子元素的样式，但前提是它们不是特定元素的子元素。作为一个例子，我需要在这个范围内加粗文本

```
<span class="a">
 <span class="b">
  <span class="c">
    bold this test
  </span>
 </span>
</span> 
```

但不是在这个

```
<span class="a">
 <a class="SomeOtherclass">
  <span class="b">
   <span class="c">
    not bold
   </span>
  </span>
 </a>
</span> 
```

我无法控制输出，因此无法更改类名或结构

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T11:19:32.733

您想使用直接后代选择器`>`。只有`a > b`当`b`它是. *_*`a`

[jsFiddle](http://jsfiddle.net/Tyriar/LfhXT/)

```
.a > .b > .c {
    font-weight:bold;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:36:58.507

最好的方法是

```
span.a>a.SomeOtherclass>span.b>span.c{
  font-weight: bold
} 
```

这将仅适用于特定父级的特定类。不是在其他情况下。

如果你想反转它，那么它会是这样的

```
span.a>span.b>span.c{
  font-weight: bold
} 
```

如果您在此 DOM 层次结构之间添加任何内容（任何标签），则不会应用它。

这会做.. :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T11:20:16.540

丹尼尔是对的

如果你需要第二个**选项**

**你可以这样做**

```
.c{
font-weight:bold;
}

.SomeOtherclass .c{
font-weight:normal;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T11:20:19.450

对于特殊情况，您可以有一个压倒一切的规则，例如：

```
.c {
    font-weight: bold;
}

.SomeOtherClass .c {
    font-weight: normal;
} 
```

我假设在正常情况下，您并不总是有 a、b、c 嵌套 - 这就是为什么您要求应用此规则，除非在特定情况下。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T11:21:02.420

您可以使用**Child-of 选择器**...

例如，

```
.a { /*Your Style*/ }
.a > .b { /*Your Style*/ }
.a > .b > .c { /*Your Style*/ } 
```

# matlab - 在 matlab 中添加路径 libsvm 库后的问题

> ID：15569025
> 
> 赞同：6
> 
> 时间：2013-03-22T11:17:46.893
> 
> 标签：matlab, classification, libsvm

我想知道 libsvm 是如何工作的。我在此链接 [1] 中尝试了此代码：[10 fold cross-validation in one-against-all SVM (using LibSVM)](https://stackoverflow.com/questions/14024740/10-fold-cross-validation-in-one-against-all-svm-using-libsvm/14083978#14083978)。它正在工作（我没有在matlab中添加路径libsvm库）但是在我添加libsvm库之后。它不工作。我不知道如何解决它。有一个错误：

```
Error using svmtrain (line 233)
Y must be a vector or a character array.

Error in libsvmtrain_ova (line 11)
        models{k} = svmtrain(double(y==labels(k)), X, strcat(opts,' -b 1 -q'));

Error in libsvmcrossval_ova (line 10)
        mdl = libsvmtrain_ova(y(trainIdx), X(trainIdx,:), opts);

Error in main (line 9)
acc = libsvmcrossval_ova(labels, data, opts, nfold); 
```

有没有人帮我解决它？谢谢你

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T17:54:32.580

我按照你提到的帖子，我得到了没有错误的结果。对我来说，“fisheriris”数据集的交叉验证准确率为 96.6667%。对你来说，我认为错误是正如第一条评论所说的那样，错误来自“svmtrain”。下面，我将展示我是如何运行代码的。

[1) 从http://www.csie.ntu.edu.tw/~cjlin/libsvm/](http://www.csie.ntu.edu.tw/~cjlin/libsvm/)下载 libsvm并解压。

2) 将文件名`svmtrain.c`和`svmpredict.c`in`\libsvm-3.16\matlab\`更改为`libsvmtrain.c`and `libsvmpredict.c`。然后`make.m`在同一个文件夹中，将第 16 行和第 17 行更改为

```
mex CFLAGS="\$CFLAGS -std=c99" -largeArrayDims libsvmtrain.c ../svm.cpp svm_model_matlab.c
mex CFLAGS="\$CFLAGS -std=c99" -largeArrayDims libsvmpredict.c ../svm.cpp svm_model_matlab.c 
```

3) 运行 make.m 您刚刚更改为 mex *.c 文件。

[4)在一对一 SVM（使用 LibSVM）中接受 10 折交叉验证](https://stackoverflow.com/questions/14024740/10-fold-cross-validation-in-one-against-all-svm-using-libsvm/14083978#14083978)后的接受答案后，您为每个函数创建四个 .m 文件，, ,`crossvalidation.m`并`libsvmcrossval_ova.m`运行该应答器提供的主函数，其中如下：`libsvmpredict_ova.m``libsvmtrain_ova.m`

```
clear;clc;
%# laod dataset
S = load('fisheriris');
data = zscore(S.meas);
labels = grp2idx(S.species);

%# cross-validate using one-vs-all approach
opts = '-s 0 -t 2 -c 1 -g 0.25';    %# libsvm training options
nfold = 10;
acc = libsvmcrossval_ova(labels, data, opts, nfold);
fprintf('Cross Validation Accuracy = %.4f%%\n', 100*mean(acc));

%# compute final model over the entire dataset
mdl = libsvmtrain_ova(labels, data, opts);

acc = libsvmtrain(labels, data, sprintf('%s -v %d -q',opts,nfold));
model = libsvmtrain(labels, data, strcat(opts,' -q')); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-06T18:27:42.030

有一个非常简单的方法。在 matlab 的 Set Path Button 中将 libsvm 文件夹设置为优先路径。

# java - 将 JIRA 5.1 升级到 JIRA 6

> ID：15569029
> 
> 赞同：-1
> 
> 时间：2013-03-22T11:17:52.257
> 
> 标签：java, mysql, tomcat, tomcat7, jira

我正在尝试在我的测试服务器中将我的 jira 版本从 5.1 升级到 6。windows(64)平台。所以我下载了文件夹名称为“atlassian-jira-6.0-m08-standalone”的jira 6版本。然后我在命令提示符 bin> start-jira.bat /fg 中对 jira 进行分层，它会引发以下错误。请帮我修复错误。![在此处输入图像描述](../Images/9da7484819892df6e6a41e522c620620.png)

错误：java.lang.AbstractMethodError：org.apache.catalina.connector.CoyoteAdapter.getDomain()Ljava/lang/String；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:01:28.460

您需要在 Tomcat 7 上运行。您在不存在 CoyoteAdapter.getDomain() 方法的早期版本（可能是 6 版？）上运行。

我建议升级到 7.0.37（或者当您阅读本文时，最新的 7.0.x 是什么）。

# java - 从 Tomcat WebApp 访问 WebService 时出现 CertPathValidatorException

> ID：15569032
> 
> 赞同：0
> 
> 时间：2013-03-22T11:18:05.153
> 
> 标签：java, tomcat, ssl, certificate, httpclient

首先：我知道，有很多“CertPathValidatorException”线程，我已经检查过了：）

我有以下问题，我只是找不到解决方案。我真的很感激一些帮助。

我们有一个运行 java web 应用程序的 tomcat6。ssl配置似乎没问题。用 fe sslshopper 检查显示没有问题。您可以毫无问题地通过浏览器和 https 进行连接。所以，进去的方式看起来不错。

从 Web 应用程序的一个类中，我们使用 apache HTTPClient（简单 SOAP POST）调用 https Web 服务。当我们这样做时，会抛出异常：

```
 Caused by: javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path validation failed: java.security.cert.CertPathValidatorException: CA key usage check failed: keyCertSign bit is not set
        at sun.security.ssl.Alerts.getSSLException(Alerts.java:192)
        at sun.security.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1697)
        at sun.security.ssl.Handshaker.fatalSE(Handshaker.java:258)
        at sun.security.ssl.Handshaker.fatalSE(Handshaker.java:252)
        at sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1165)
        at sun.security.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:154)
        at sun.security.ssl.Handshaker.processLoop(Handshaker.java:610)
        at sun.security.ssl.Handshaker.process_record(Handshaker.java:546)
        at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:945)
        at sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1190)
        at sun.security.ssl.SSLSocketImpl.writeRecord(SSLSocketImpl.java:657)
        at sun.security.ssl.AppOutputStream.write(AppOutputStream.java:108)
        at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:82)
        at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:140)
        at java.io.FilterOutputStream.flush(FilterOutputStream.java:140)
        at org.apache.commons.httpclient.methods.EntityEnclosingMethod.writeRequestBody(EntityEnclosingMethod.java:502)
        at org.apache.commons.httpclient.HttpMethodBase.writeRequest(HttpMethodBase.java:1973)
        at org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:993)
        at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:397)
        at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:170)
        at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:396)
        at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:324)
        at net.umbrella.services.webclient.myclimate.MyClimateWebservice.callWebService(MyClimateWebservice.java:151)
        ... 67 more
Caused by: sun.security.validator.ValidatorException: PKIX path validation failed: java.security.cert.CertPathValidatorException: CA key usage check failed: keyCertSign bit is not set
        at sun.security.validator.PKIXValidator.doValidate(PKIXValidator.java:266)
        at sun.security.validator.PKIXValidator.doValidate(PKIXValidator.java:249)
        at sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:162)
        at sun.security.validator.Validator.validate(Validator.java:235)
        at sun.security.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:147)
        at sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:230)
        at sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:270)
        at sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1144)
        ... 85 more
Caused by: java.security.cert.CertPathValidatorException: CA key usage check failed: keyCertSign bit is not set
        at sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:153) 
```

奇怪的是：如果我们在系统上运行我们的单元测试——其中也包含有问题的 HTTPClient 调用——一切都很好。对我来说，这看起来像是 tomcat 配置的问题。如果我使用 sslshopper 检查 Web 服务的提供商，他的证书看起来也不错。

我真的不是该主题的专家，大部分配置都是由我们的主机完成的，也找不到问题（问题在几周前突然出现）。

一个普遍的问题：哪个密钥库用于来自 Web 应用程序的 HTTPClient 调用？系统密钥库或必须由 tomcat 提供的特定密钥库？无论如何，tomcat ssl 配置是否连接到来自 web 应用程序的 https 请求？

谢谢！

此致，

罗伯特

**已解决：我们终于解决了这个问题。该系统的基本 jvm 是 SUN JDK，但对于 tomcat，OpenJDK 被定义为 JVM。切换回 SUN JDK 解决了我们所有的问题。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:58:58.753

回答这个问题的Tomcat方面：

如果您从 Web 应用程序建立 HTTPS 连接，则 Tomcat 零参与该过程。您需要使用 HttpClient 提供的任何 API 来配置 HttpClient。

关于您看到的错误消息，您的信任库似乎不太正确。您可能缺少中级证书吗？

# ios - 从标签栏导航时如何隐藏 rightBarButtonItem？

> ID：15569034
> 
> 赞同：0
> 
> 时间：2013-03-22T11:18:08.903
> 
> 标签：ios

当我想从标签栏而不是导航控制器导航时，如何隐藏导航控制器的 rightBarButtonItem。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-27T18:47:45.630

隐藏右键：

```
 self.navigationItem.rightBarButtonItem = nil; 
```

并展示它：

如果您通过将其分配给 self.editButtonItem 在视图控制器中设置正确的按钮，则只需再次分配它以显示它：

```
self.navigationItem.rightBarButtonItem = self.editButtonItem; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:21:20.630

只需在要隐藏右栏按钮的类的 viewDidLoad 或 viewWillAppear 中写下这一行

```
self.navigationItem.rightBarButtonItem = nil; 
```

# c++ - Boost.Asio HTTP 服务器会话关闭

> ID：15569035
> 
> 赞同：1
> 
> 时间：2013-03-22T11:18:11.910
> 
> 标签：c++, boost-asio

我有一个基于[Boost.Asio Example HTTP Server 2 的 http 服务器（使用 io_service-per-CPU 设计）](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/examples.html)

每个请求都会被解析，检查它是否是 POST 请求，路径是否正确，是否存在 Content-Length 标头，如果这些条件之一不正确，我会生成一个错误请求响应。

由于一切正常，我发送了一个 OK 响应。

这就是它开始的方式。

```
int main(int argc, char* argv[])
{
  try
  {
    http::server s("127.0.0.1", "88", 1024);
    s.run();
  }
  catch (std::exception& e)
  {
    std::cerr << "Exception: " << e.what() << "\n";
  }
  return 0;
} 
```

现在我制作了一个快速的 C# 应用程序，它启动 16 个线程，每个线程在一段时间内连续发送（true）-循环 POST 请求到该服务器。

一会儿它运行平稳快速。然后在某个时间点服务器没有响应（无法连接到远程服务器）。

造成这种情况的原因可能是来自服务器的会话没有正确关闭。

这是 Bad-Request/OK 响应的代码：

```
void session::handle_request()
{
  //Generate OK Response
  reply_ = reply::stock_reply(reply::ok);
  //Send OK Response
  boost::asio::async_write(client_socket_, reply_.to_buffers(), 
    boost::bind(&session::handle_client_write, shared_from_this(),
      boost::asio::placeholders::error,
      boost::asio::placeholders::bytes_transferred));
}

void session::send_bad_request()
{
  //Generate Bad Request Response
  reply_ = reply::stock_reply(reply::bad_request);
  //Send Bad Request Response
  boost::asio::async_write(client_socket_, reply_.to_buffers(), 
    boost::bind(&session::handle_client_write, shared_from_this(),
      boost::asio::placeholders::error,
      boost::asio::placeholders::bytes_transferred));
} 
```

以及两者都触发的handle_client_write：

```
void session::handle_client_write(const boost::system::error_code& err, size_t len)
{
  if (!err) {
    //Dummy Error Code Var
    boost::system::error_code ignored_ec;
    //Shutdown socket
    client_socket_.shutdown(boost::asio::ip::tcp::socket::shutdown_both, ignored_ec);
    client_socket_.close();
    //std::cout << "Closed" << ignored_ec.message() << "\n";
  }
  else {
    std::cout << "Error: " << err.message() << "\n";
  }
} 
```

就像我说的那样，在某些时候它会变得没有响应，不久之后它就会再次响应。

# python - 我的 Mac 上是否安装了多个 Python 副本？

> ID：15569038
> 
> 赞同：0
> 
> 时间：2013-03-22T11:18:15.123
> 
> 标签：python, easy-install

`"echo $PATH"`当我在我的 Mac 上输入终端时，我得到了这个：

```
mattdevlins-MacBook-Pro:~ mattdevlin$ echo $PATH
/Library/Frameworks/Python.framework/Versions/2.7/bin:/Library/Frameworks/Python.framework/Versions/2.7/bin:/Library/Frameworks/Python.framework/Versions/3.3/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/X11/bin:/usr/X11/bin
mattdevlins-MacBook-Pro:~ mattdevlin$ 
```

这是否意味着我有多个 Python 副本正在运行？

我正在尝试让 Scrapy 运行。想不通。easy_install 不工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:11:43.303

您还可以将`VERSIONER_PYTHON_VERSION`环境变量设置为指向您想要在 OsX 中使用的任何类型的 python。如果您只是`python`在命令行中运行，这将调用正确的解释器。

```
export VERSIONER_PYTHON_VERSION=2.7 # bash shell
setenv VERSIONER_PYTHON_VERSION 2.7 # csh or tcsh shells 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T11:20:57.763

> 这是否意味着我有多个 Python 副本正在运行？

您几乎可以肯定安装了多个版本*，*但不一定*正在运行*。

例如，我的计算机上安装了 Python 2.5、2.6、2.7 和 3.3。他们相处得相当愉快。

`python2.7`您可以通过键入等启动特定版本`python3.3`。

# java - 将附加参数从 JSF 传递到 EJB

> ID：15569046
> 
> 赞同：2
> 
> 时间：2013-03-22T11:18:44.607
> 
> 标签：java, security, jsf, jakarta-ee, ejb

在我的 Java EE 6 应用程序（Weblogic 12c、EJB 3.1、JSF 2）中，我需要知道在 EJB 中谁调用了该方法。

但是从 context.getCallerPrincipal().getName() 获得的调用者登录是不够的，因为登录在我的应用程序中不是唯一的。我需要从 JSF 层（用户组织 ID）传递附加参数，但我不想更改每个方法的签名。

在用户登录应用程序（或通常在 JSF 层）时，是否有任何方法可以设置自定义参数，稍后对 EJB 可见？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:30:00.010

有几个选项。

1.  使用 JASPIC 将用户/调用者主体名称设置为不同于用于登录的用户的名称。

例如，如果用户使用“joe”登录，那么对于大多数内置模块，“joe”将是从 context.getCallerPrincipal().getName() 返回的内容。

使用 JASPIC，您可以将其设为任何字符串，例如“joe.theboss::131::9634”。

1.  使用 CDI 来记住请求范围内的某些内容。EJB bean 可以使用请求范围的 CDI bean 注入（注意使用 CDI @RequestScoped 而不是 JSF 版本）。

# java - Trouble populating JComboBox using getters/setters

> ID：15569050
> 
> 赞同：0
> 
> 时间：2013-03-22T11:18:57.250
> 
> 标签：java, swing, model-view-controller, jcombobox

I'm having trouble generating a drop down list using an array string that I populate in the Controller class. The list displays in the GUI but contains no values. Am i using the getter/setter method incorrectly? I've been unable to find an example despite looking at the Oracle documention for JComboBoxes. The api made reference to the setModel method that I presume I'am using incorrectly. Can anyone provide a simple example?

```
package example;

import javax.swing.*;

public class MyApp extends JFrame {
    JTabbedPane tabbedPane = new JTabbedPane();
    View view = new View();
    ColourView colourView = new ColourView();
    Controller controller = new Controller(colourView);

public MyApp() {
    tabbedPane.add("First Tab", colourView);
    getContentPane().add(tabbedPane);
}
package example;

import javax.swing.*;

public class ColourView extends View {

private JLabel colourLabel;
private JComboBox comboBox;

public ColourView() {
    colourLabel = new JLabel();
    colourLabel.setText("Colours");
    colourLabel.setBounds(20, 30, 70, 20);
    mainContentLayeredPane.add(colourLabel, JLayeredPane.DEFAULT_LAYER);

    comboBox = new JComboBox();
    comboBox.setSize(100, 20);
    mainContentLayeredPane.add(comboBox, JLayeredPane.DEFAULT_LAYER);
}

public void setComboBox(String[] list) {
    comboBox.setModel(new DefaultComboBoxModel());
    for (Object item : list) {
        comboBox.addItem(item);
    }
}
}

public static void main(String[] args){
    SwingUtilities.invokeLater(new Runnable(){
        @Override
        public void run() {
            MyApp app = new MyApp();
            app.setVisible(true);
            app.setSize(600, 600);
            app.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        }  
    });
}
}
package example;

import java.util.ListIterator;

public class Controller {

private ColourView colourView;
ListIterator<String> litr;
String listData[] = {"Item 1", "Item 2", "Item 3", "Item 4"};

Controller(ColourView colourView) {
    this.colourView = colourView;;
}

public void getListData() {
     colourView.setComboBox(listData);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T11:27:31.097

You have to add the elements to the `ComboboxModel` like this:

```
// define model
DefaultComboBoxModel model;
...

public void setComboBox(String[] list) {
    model = new DefaultComboBoxModel(list);
    comboBox.setModel(model);
} 
```

**Note**: If you want to modify the Elements, you have to modify it in the model again, not in the ComboBox itself.

# magento - Magento Zend Mail 使用 Google SMTP

> ID：15569052
> 
> 赞同：0
> 
> 时间：2013-03-22T11:19:01.017
> 
> 标签：magento, smtp, zend-mail

我在 Magento 中发送邮件时遇到问题：只是在客户注册、订单确认 ecc 的情况下不会发送电子邮件。我检查了异常日志，这是我发现的：

```
 exception 'Zend_Mail_Protocol_Exception' with message '5.7.1 Username and Password not accepted. Learn more at
     5.7.1 http://support.google.com/mail/bin/answer.py?answer=14257 q42sm2096509eem.14 - gsmtp
    ' in /srv/www/htdocs/lib/Zend/Mail/Protocol/Abstract.php:431
    Stack trace:
    #0 /srv/www/htdocs/lib/Zend/Mail/Protocol/Smtp/Auth/Login.php(95): Zend_Mail_Protocol_Abstract->_expect(235)
    #1 /srv/www/htdocs/lib/Zend/Mail/Protocol/Smtp.php(217): Zend_Mail_Protocol_Smtp_Auth_Login->auth()
    #2 /srv/www/htdocs/lib/Zend/Mail/Transport/Smtp.php(200): Zend_Mail_Protocol_Smtp->helo('localhost')
    #3 /srv/www/htdocs/lib/Zend/Mail/Transport/Abstract.php(348): Zend_Mail_Transport_Smtp->_sendMail()
    #4 /srv/www/htdocs/lib/Zend/Mail.php(1194): Zend_Mail_Transport_Abstract->send(Object(Zend_Mail))
    #5 /srv/www/htdocs/app/code/core/Mage/Core/Model/Email/Template.php(465): Zend_Mail->send(Object(Zend_Mail_Transport_Smtp))
    #6 /srv/www/htdocs/app/code/core/Mage/Core/Model/Email/Template.php(517): Mage_Core_Model_Email_Template->send(Array, Array, Array)
    #7 /srv/www/htdocs/app/code/core/Mage/Core/Model/Email/Template/Mailer.php(79): Mage_Core_Model_Email_Template->sendTransactional('customer_create...', 'general', Array, Array, Array, '1')
    #8 /srv/www/htdocs/app/code/core/Mage/Customer/Model/Customer.php(650): Mage_Core_Model_Email_Template_Mailer->send()
    #9 /srv/www/htdocs/app/code/core/Mage/Customer/Model/Customer.php(577): Mage_Customer_Model_Customer->_sendEmailTemplate('customer/create...', 'customer/create...', Array, '1')
    #10 /srv/www/htdocs/app/code/core/Mage/Customer/controllers/AccountController.php(344): Mage_Customer_Model_Customer->sendNewAccountEmail('confirmation', 'http://test.col...', '1')
    #11 /srv/www/htdocs/app/code/core/Mage/Core/Controller/Varien/Action.php(419): Mage_Customer_AccountController->createPostAction()
    #12 /srv/www/htdocs/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('createpost')
    #13 /srv/www/htdocs/app/code/core/Mage/Core/Controller/Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
    #14 /srv/www/htdocs/app/code/core/Mage/Core/Model/App.php(354): Mage_Cor_Controller_Varien_Front->dispatch()
    #15 /srv/www/htdocs/app/Mage.php(683): Mage_Core_Model_App->run(Array)
    #16 /srv/www/htdocs/index.php(87): Mage::run('', 'store')
    #17 {main} 
```

无论如何，我不知道 Zend 邮件协议，据我所知，这是尝试在 Google 服务器上使用 SMTP 身份验证；事实上，我没有在 Magento 中安装任何使用 SMTP 的扩展，所以我从未设置任何用户名或密码；除了我在 Magento 邮件发送设置中使用 localhost 之外，任何人都知道发生了什么并且可以建议我解决方法吗？谢谢！

# php - 在 wordpress 网站上获取最近的 Facebook 评论

> ID：15569057
> 
> 赞同：0
> 
> 时间：2013-03-22T11:19:09.090
> 
> 标签：php, facebook, wordpress, comments

[https://graph.facebook.com/comments/?ids=](https://graph.facebook.com/comments/?ids=) {YOUR_URL}

我想使用 facebook 评论小部件并使用上面的链接来显示在我的网站上发表的评论。

有没有办法将其转换为查询，并使用最新的帖子网址显示 Facebook 评论。还有头像和那里的评论？

如果你建议使用插件，那里没有任何工作，Facebook for wordpress 小部件执行此操作有错误。

如果你会问为什么不搜索论坛。我在这里和wordpress的答案都只是在facebook页面上获取评论而不是facebook。？

我希望有人已经这样做了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:21:33.873

也许这样的东西是你可能正在寻找的。

```
https://graph.facebook.com/[post_id]/comments?access_token=XXX 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-14T16:32:00.797

也许，这可以满足您的需求。您可以使用此小部件在您选择的小部件区域显示您网站上最近的 Facebook 评论。[https://www.heator.com/facebook-comments-moderation](https://www.heateor.com/facebook-comments-moderation)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-25T14:48:31.437

试试这个并通过帖子 ID 更改 {object-id}

[https://graph.facebook.com/](https://graph.facebook.com/) {object-id}/comments?summary=1&filter=toplevel?access_token=XXX

# wpf - Style.Trigger 与 Grid.Trigger

> ID：15569058
> 
> 赞同：0
> 
> 时间：2013-03-22T11:19:11.333
> 
> 标签：wpf, xaml, styles

在我的代码中，我定义了两个触发器，一个标签和一个画布。我的问题描述：

当光标直接穿过标签时，Style.Trigger 被激活并且背景颜色改变（变为橙色）。当光标穿过画布区域时，Grid.Trigger 被激活并更改背景颜色（变为紫色）。到目前为止，一切都很好。光标现在是否在标签区域上运行（在 Grid.Trigger 处于活动状态之后），背景根本没有改变。在我看来，Grid.Trigger 一旦激活就会获得优先权。

```
<Window x:Class="Sample01.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <Grid.Resources>
        <!-- Defined Style starts here -->
        <Style x:Key="{x:Type Label}" TargetType="{x:Type Label}" >
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Trigger.Setters>
                    </Trigger.Setters>
                    <Trigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <ColorAnimation To="DarkOrange" Duration="0:0:0.5"
                                                Storyboard.TargetProperty="Background.Color"
                                                />
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.EnterActions>
                    <Trigger.ExitActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <ColorAnimation To="White" Duration="0:0:1"
                                                Storyboard.TargetProperty="Background.Color" />
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.ExitActions>
                </Trigger>
            </Style.Triggers>
        </Style>
        <!-- End defined Style-->
    </Grid.Resources>
    <!-- Define Trigger -->
    <Grid.Triggers>
        <EventTrigger RoutedEvent="MouseEnter"
                      SourceName="canvas">
            <BeginStoryboard>
                <Storyboard>
                    <ColorAnimation To="BlueViolet" Duration="0:0:1"
                                    Storyboard.TargetProperty="Background.Color"
                                    Storyboard.TargetName="label" />
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
        <EventTrigger RoutedEvent="MouseLeave"
                      SourceName="canvas">
            <BeginStoryboard>
                <Storyboard>
                    <ColorAnimation To="White" Duration="0:0:1"
                                    Storyboard.TargetProperty="Background.Color"
                                    Storyboard.TargetName="label" />
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
    </Grid.Triggers>
    <Label x:Name="label" VerticalAlignment="Top" Height="100" BorderBrush="Black" BorderThickness="2" Content="LABEL"/>
    <Canvas x:Name="canvas" Height="100" VerticalAlignment="Bottom"
            IsHitTestVisible="True" 
            Background="AntiqueWhite"
            />
</Grid> 
```

有人可以解释这种行为吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T13:44:03.093

您遇到了依赖属性值源的优先顺序。这种情况的一个常见情况是，当您直接在元素上设置本地值时，样式中设置的值会被覆盖。在这种情况下，您将动画应用到属性，它优先于样式中设置的任何内容（甚至是本地值）。

要让样式再次接管，您需要使动画不再应用于标签。您可以通过显式删除初始动画来做到这一点，它将重置回原始状态，就像属性触发器一样：

```
<EventTrigger RoutedEvent="FrameworkElement.MouseEnter"
            SourceName="canvas">
    <BeginStoryboard x:Name="GridMouseover">
        <Storyboard>
            <ColorAnimation To="BlueViolet" Duration="0:0:1"
                        Storyboard.TargetProperty="Background.Color"
                        Storyboard.TargetName="label" />
        </Storyboard>
    </BeginStoryboard>
</EventTrigger>
<EventTrigger RoutedEvent="FrameworkElement.MouseLeave"
            SourceName="canvas">
    <RemoveStoryboard BeginStoryboardName="GridMouseover"/>
</EventTrigger> 
```

这样做的缺点是你失去了回到白色的平滑动画。在许多情况下，VisualStateManager 是此类事情的更好选择，因为它会自动为您处理。

您可以做的另一件事是通过更改 FillBehavior 告诉 Storyboard 在完成后停止应用自身：

```
<EventTrigger RoutedEvent="FrameworkElement.MouseEnter"
            SourceName="canvas">
    <BeginStoryboard>
        <Storyboard>
            <ColorAnimation To="BlueViolet" Duration="0:0:1"
                        Storyboard.TargetProperty="Background.Color"
                        Storyboard.TargetName="label" />
        </Storyboard>
    </BeginStoryboard>
</EventTrigger>
<EventTrigger RoutedEvent="FrameworkElement.MouseLeave"
            SourceName="canvas">
    <BeginStoryboard>
        <Storyboard FillBehavior="Stop">
            <ColorAnimation To="White" Duration="0:0:1"
                        Storyboard.TargetProperty="Background.Color"
                        Storyboard.TargetName="label" />
        </Storyboard>
    </BeginStoryboard>
</EventTrigger> 
```

# c# - C# 3 参数复选框 DataView.RowFilter 过滤多列

> ID：15569062
> 
> 赞同：-1
> 
> 时间：2013-03-22T11:19:20.767
> 
> 标签：c#, sql, datagridview, rowfilter

我有一个小问题，我不知道如何实现更多参数过滤器。我有 3 个复选框，名称、类别和日期（开始，结束）

这是我的代码，单独检查 1 是否可以正常工作

```
if (checkBox1.Checked == true)
            {
                views.RowFilter = "[Produkta nosaukums] like '%" + textBox3.Text.ToString() + "%'";
            }
            if (checkBox2.Checked == true)
            {
                views.RowFilter = "[Kateg.] like '%" + comboBox4.Text.ToString() + "%'";
            }
            if (checkBox3.Checked == true)
            {
                views.RowFilter = "[Derīguma termiņš] >= #" + dateTimePicker3.Value.ToString("yyyy/MM/dd") + "# and [Derīguma termiņš] <= #" + dateTimePicker4.Value.ToString("yyyy/MM/dd") + "#";
            } 
```

问题是当我想要更多参数搜索时，比如名称和类别。我在这里尝试的是我的代码，但仅适用于忽略的类别名称：/

```
if (checkBox1.Checked == false & checkBox2.Checked == false & checkBox3.Checked == false)
            {
                dataGridView1.Columns.Remove(editButton);
                dataGridView1.Columns.Remove(deleteButton);
                LOADALL();
            }

            if (checkBox1.Checked == true & checkBox2.Checked == true)
            {
                MessageBox.Show(comboBox4.Text.ToString());
                MessageBox.Show(textBox3.Text.ToString());
                views.RowFilter = "[Kateg.] like '%" + comboBox4.Text.ToString() + "%' and [Produkta nosaukums] like '%" + textBox3.Text.ToString() + "%'";
            } 
```

我想要的是，过滤器也添加另一个复选框。

1.  检查1，检查2，检查3
2.  真的 真的 真的 没有意识到
3.  真假真没意识到
4.  假 真 真 没意识到
5.  真真假不工作尝试
6.  真假假工作
7.  假真假工作
8.  假假真工作
9.  虚假虚假虚假工作

问题我不知道如何结合 :) 试过但没用：/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T11:44:42.937

我建议将 stringBuilder 与您的复选框检查结合使用。例如：

```
StringBuilder filter = new StringBuilder();

if(a.checked)
   filter.Append("filter here");

if(b.checked)
    filter.Append("filter here");

views.RowFilter= filter.toString(); 
```

# c# - 使用 URL 和 ID 中的 slug 在 MVC 中查询 DB

> ID：15569063
> 
> 赞同：1
> 
> 时间：2013-03-22T11:19:26.907
> 
> 标签：c#, asp.net-mvc, url-routing, slug

我正在尝试在 MVC Web 应用程序中使用 slug，但似乎可以找到实现它们的最佳方法。

我找到了关于如何创建 URL 友好的 slug [stackoverflow slug post的建议](https://stackoverflow.com/questions/25259/how-does-stackoverflow-generate-its-seo-friendly-urls/25486#25486)

我仍然希望能够使用 ID 查询 Db，但不希望它出现在与大多数 stackoverflow URL 类似的 URL 中，例如

```
http://website/home/list/outdoor-products 
```

如何在 URL 中显示 slug，同时仍然传递和使用用于查询的 ID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T11:51:35.890

它并不真正取决于您使用的技术/框架，主要是您必须拥有明确的 url 才能明确选择页面内容。
如果您确实有页面的唯一标题/标签，那么您可以将它们用作内容选择的标识。否则，您需要将某种 id（它可以是 int 或 guid，等等）放入您的 url。没有任何东西可以将您的 int id 隐藏在 slug 后面。
谈到 stakoverflow 的 url，您会在友好标题之前找到 id。另一个选项可以将实际 id 放在友好标题的末尾 (friendly-title-1559063)。

# android - “ImageView”的 Onclick 不会在 android 中产生任何动作

> ID：15569067
> 
> 赞同：0
> 
> 时间：2013-03-22T11:19:36.153
> 
> 标签：android, layout, widget, onclick, imageview

我的活动中有 2 个布局，如果从第一个布局单击 ImageView“显示”，则应显示第二个布局，但这里没有发生，已经给出了编码更正但无法解决这个问题这是我的代码

```
public class About extends Activity {
 LinearLayout line1, line2;
 ImageView show;
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_about);
   line1=(LinearLayout) findViewById(R.id.ll1);
         line2=(LinearLayout)findViewById(R.id.ll2);

         show=(ImageView)findViewById(R.id.ss);

       show.setOnClickListener(new View.OnClickListener() {

       public void onClick(View v) {
           show.setVisibility(View.VISIBLE);
         // TODO Auto-generated method stub
       line1.setVisibility(View.VISIBLE);
       if (line2.getVisibility() == View.INVISIBLE || line2.getVisibility() == View.GONE) {
           line2.setVisibility(View.VISIBLE); } 
       else { 
           line2.setVisibility(View.INVISIBLE); 
       } 
         }
     }); 
```

Xml 布局

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
      xmlns:tools="http://schemas.android.com/tools"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
       android:background="@color/black" >

<LinearLayout
    android:id="@+id/ll1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@color/black" 
   android:layout_alignParentTop="true"
    android:layout_alignParentRight="true">

      <ImageView
    android:id="@+id/ss"
    android:layout_width="50dp"
    android:layout_height="50dp"

    android:src="@drawable/menu"
    android:clickable="true" />
</LinearLayout>

<LinearLayout
    android:id="@+id/ll2"
    android:layout_width="199dp"
    android:layout_height="wrap_content"
    android:background="@color/black" 
    android:layout_toRightOf="@+id/ll1"
    android:visibility="gone"
    >

  <ImageView
    android:id="@+id/about"
    android:layout_width="50dp"
    android:layout_height="50dp"
    android:layout_above="@+id/textView1"
    android:layout_toLeftOf="@+id/jobs"
    android:src="@drawable/about" />

    <ImageView
    android:id="@+id/jobs"
    android:layout_width="50dp"
    android:layout_height="50dp"

    android:src="@drawable/jobs" />

<ImageView
    android:id="@+id/log"
    android:layout_width="50dp"
    android:layout_height="50dp"

    android:src="@drawable/log" />

<ImageView
    android:id="@+id/home"
    android:layout_width="50dp"
    android:layout_height="50dp"

    android:src="@drawable/home" />

</LinearLayout>
 </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:53:31.217

您错误地定义了您的 id，`ImageView`这就是您无法获得 .onClick 事件的原因`ImageView`。

将您的 id 更改`ImageView`为`R.id.show`如下`R.id.ss`所示：

改变这个

```
 show=(ImageView)findViewById(R.id.ss); 
```

至

```
 show=(ImageView)findViewById(R.id.show); 
```

**编辑：**

尝试在 onClick 侦听器中显示和隐藏您的布局，如下所示。

> ```
>  if (line2.getVisibility() == View.INVISIBLE || line2.getVisibility() == View.GONE) {
>        line2.setVisibility(View.VISIBLE); 
>        line1.setVisibility(View.INVISIBLE);
>     } 
>    else { 
>        line2.setVisibility(View.INVISIBLE); 
>        line1.setVisibility(View.VISIBLE);
>    } 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:22:29.577

对于 xml 中的图像视图“ss”，设置属性 android:clickable="true"。

或者更好的`ImageButton`是，`ImageView`在您的 xml 中使用

编辑 -

改变这个

`show=(ImageView)findViewById(R.id.ss);`

至

`show=(ImageView)findViewById(R.id.show);`

# c++ - 如何提供一个 std::vector 来匹配这个参数？

> ID：15569070
> 
> 赞同：1
> 
> 时间：2013-03-22T11:19:39.963
> 
> 标签：c++, arrays, vector, stl, parameters

如何将给定`std::vector<float>`的参数传递给函数以匹配参数类型`float (*parameter)[3]`？

该函数用 3d 点的坐标填充参数，这就是参数类型为 3 元素长数组的数组的原因。该功能由[库](http://code.google.com/p/lib3ds/)提供，我无法更改。

我已经初始化了向量以覆盖足够的元素。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T11:30:09.870

```
void f(float (*parameter)[3])
{
}

int main()
{
    vector<float> v(3);
    f(reinterpret_cast<float(*)[3]>(&v[0]));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T11:56:07.773

因为无法确定 an`std::allocator<T>`涉及某个配置 a `float[3]`，所以不可能在给定 a 的情况下指向这样的数组`std::vector<T>`。这不是找到正确的演员表或正确的演员表值的问题。

问题是，像您描述的函数之类的东西只能传递一个指向实际的指针`float[3]`或空指针。

您可以做的唯一严格符合的事情是将数据复制到真正的变量中或从真正的`float[3]`变量中复制出来，并将指向它的指针传递给您的函数。

# ruby-on-rails - self.attribute_name 和 only attribute_name 之间的区别

> ID：15569074
> 
> 赞同：-1
> 
> 时间：2013-03-22T11:19:53.403
> 
> 标签：ruby-on-rails, ruby

假设有一个具有电子邮件属性的模型用户。我已经查看了一些我们可以单独使用 self.email 和 email 的教程。那么两者有什么区别呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T11:21:57.550

如果您在 User 模型中的实例方法中，那么任何一个都可以工作，但`email`它本身就是一个隐式范围定义 - 这意味着应用程序将查找一个局部`email`变量，然后是一个电子邮件方法/属性。`self.email`显式跳过对局部变量的搜索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T11:27:42.350

当您在 User 类时，您可以通过不同的方式访问电子邮件。

*   `self.email`当您在用户范围内时
*   `a_user.email`当您指定用户时
*   `email`当您在 User 类中时。这对 User 类中的每个方法都有效。
*   `@email``email`,函数返回的变量
*   `attributes[:email]`ActiveRecord 属性。

所有这些方法都是由 ActiveRecord 模型自动生成的，您可以查看文档了解更多详细信息。

# dynamics-crm-2011 - 在动态 crm 2011 中设置可见选项卡或部分

> ID：15569077
> 
> 赞同：2
> 
> 时间：2013-03-22T11:20:09.590
> 
> 标签：dynamics-crm-2011, dynamics-crm, crm, microsoft-dynamics

我有点困惑如何使用该功能。我想使用此逻辑隐藏/显示选项卡和部分。

```
function setVisibleTabSection(tabname, sectionname, show) {
   var tab = Xrm.Page.ui.tabs.get(tabname);
   if (tab != null) {
      if (sectionname == null)
         tab.setVisible(show);
      else {
         var section = tab.sections.get(sectionname);
         if (section != null) {
             section.setVisible(show);
             if (show)
                tab.setVisible(show);
         }
      }
    }
 } 
```

我不知道如何正确调用该函数。

我创建了这个函数，也是一个选项卡（“tab_8”），部分名称是（“tab_8_section_1”），我在其中放置了文本字段（“new_conf_report”）。

之后，我将此函数（在编写代码的同一位置）称为 setVisibleTabSection("tab_8", "tab_8_section_1", false); 此外，我将此函数称为“onLoad”事件

但是我得到了下一个错误：

```
 " var tab = Xrm.Page.ui.tabs.get(tabname); "'Xrm.Page.ui.tabs' - IS null or it isn't object  

  "tab.setVisible(show); " Object doesn't support this method 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T14:39:37.627

你可以调试你的代码。只需将调试器一词放入 JS 代码中即可。当您启动表单时，在选项卡脚本中按 F12 按“开始脚本”，您可以逐步了解代码是如何工作的。

如果您要传递字符串，则必须像这样调用它们：

```
setVisibleTabSection("tab", "Sectname", false); 
```

# sql-server - Sql 查询到在 Linq 中的左连接到实体

> ID：15569082
> 
> 赞同：0
> 
> 时间：2013-03-22T11:20:20.810
> 
> 标签：sql-server, c#-4.0, entity-framework-4, linq-to-entities

我有以下`SQL`查询

```
Select LC.*,LP.[LandingPageName] from [LandingPageCompanies] LC
 Left join [LandingPageContent] LP on LP.SubCategoryID=LC.SubCategoryID
 where  LC.[CategoryID]=17 
```

我需要将其转换为`LINQ to entity`.

我已经尝试了以下查询，但它的工作原理是`Inner join`

```
 var data = (from t1 in dbSavingContainer.LandingPageCompanies
                        join t2 in dbSavingContainer.LandingPageContents on t1.SubCategoryID equals t2.SubCategoryID
                        where t1.CategoryID == CategoryID
                        select new
                        {
                            CategoryID = t1.CategoryID,
                            CompanyID = t1.CompanyID,
                            CompanyLink = t1.CompanyLink,
                            CompanyLogo = t1.CompanyLogo,
                            CompanyName = t1.CompanyName,
                            SubCategoryID = t1.SubCategoryID,
                            LandingPageName = t2.LandingPageName
                        }).ToList(); 
```

我缺乏的地方。?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:37:17.507

谢谢..我刚刚使用以下查询解决了它；）

```
 var data = (from t1 in dbSavingContainer.LandingPageCompanies
             join t2 in dbSavingContainer.LandingPageContents on t1.SubCategoryID equals t2.SubCategoryID
             into x from y in x.DefaultIfEmpty()
                   where t1.CategoryID == CategoryID
                     select new
                      {
                        CategoryID = t1.CategoryID,
                        CompanyID = t1.CompanyID,
                        CompanyLink = t1.CompanyLink,
                        CompanyLogo = t1.CompanyLogo,
                        CompanyName = t1.CompanyName,
                        SubCategoryID = t1.SubCategoryID,
                        LandingPageName = y.LandingPageName
                    }).ToList(); 
```

# javascript - 在设定的时间从每个敌人身上射出 3 发子弹

> ID：15569085
> 
> 赞同：1
> 
> 时间：2013-03-22T11:20:36.060
> 
> 标签：javascript, html, canvas, html5-canvas, kineticjs

我正在尝试在我的画布上使用 kineticJS 创建一个简单的游戏（只是一些练习）并设法让我的玩家射击子弹。产生的敌人也是如此。每次最后一颗子弹离开舞台时，他们都会射出一颗子弹。

但是：我希望所有敌人（可变数量）以 2 秒的间隔发射 3 发子弹。但我完全被卡住了，不知道如何完成它。

任何人都可以看看我的小提琴，看看发生了什么？ [http://jsfiddle.net/eRQ3P/6/](http://jsfiddle.net/eRQ3P/6/)

注意：第 573 行是循环的函数（并且每 30FPS 绘制一次子弹等）

这是我创建新子弹对象的代码：（小提琴中的第 406 行）

```
function Enemybullet(destinationX, destinationY, enemySprite) {

    this.id = 'bullet';
    this.x = enemySprite.getX()+(enemySprite.getWidth()/2);
    this.y = enemySprite.getY()+(enemySprite.getHeight()/2);

    var targetX = destinationX - this.x,
        targetY = destinationY - this.y,
        distance = Math.sqrt(targetX * targetX + targetY * targetY);

    this.velX = (targetX / distance) * 5;
    this.velY = (targetY / distance) * 5;

    this.finished = false;

    this.sprite = new Kinetic.Circle({
        x: this.x,
        y: this.y, 
        radius: 3,
        fill: 'black',
        name: 'enemyProjectile'
    });

    this.draw = function(index) {

        var mayDelete = false;

        this.x += this.velX;
        this.y += this.velY;

        this.sprite.setAbsolutePosition(this.x, this.y);
        //console.log(this.sprite.getX());

/*
        if(enemyCollision(this) == true) {
            mayDelete = true;
        }*/

        if (bulletLeftField(this.sprite) == true) {
            mayDelete = true;
        }

        if (mayDelete == true) {
            this.sprite.remove();
            enemies[index].bullets.splice(0, 1);
            createEnemyBullet(enemies[index]);
        }

        ammoLayer.draw();
    }
} 
```

以及提供新项目符号的功能：（小提琴中的第 247 行）

```
function createEnemyBullet(enemy) {
    var blt = new Enemybullet(player.sprite.getX(), player.sprite.getY(), enemy.sprite);
    ammoLayer.add(blt.sprite);
    enemy.bullets.push(blt);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:02:58.847

可能这个问题中最难的部分是确定何时绘制每颗子弹以使每 2 秒间隔发射三颗子弹。为了使子弹均匀发射，您需要将间隔内的帧数除以该间隔内发射的子弹数。

因为您以每秒 30 帧的速度运行游戏，所以 2 秒等于 60 帧。

`60 frames / 3 bullets = 20 frames/bullet`

因此，我们将每 20 帧或每`refreshLoop()`调用 20 次为每个敌人创建一个新子弹，在里面`refreshLoop()`，您现在必须循环遍历每个敌人在其`bullets`数组中的所有子弹，因为现在可以不止一个。

数组中可以有多个子弹的事实`bullets`为从数组中删除子弹的方式引入了一个新问题。以前，您依赖于这样一个事实，即一次一个子弹意味着它将始终是数组中的第一个，因此您的代码称为`bullets.splice(0, 1);`. 然而，当玩家四处移动并且敌人在不同位置开火时，完全有可能让一颗子弹离开屏幕并比之前发射的子弹更快地被移除。这将导致正确的子弹精灵被删除，但数组中的第一个子弹将从中删除`bullets`，因此它不会再在中更新`refreshLoop()`，它只会坐在屏幕上什么都不做。

为了避免这种情况，有必要将正在绘制的子弹`draw()`所在的索引传递给敌人的子弹函数。`bullets`由于无论如何您都需要遍历数组，因此索引已经在手边`refreshLoop()`，所以只需将其传递给`draw()`. 现在，每次需要移除子弹时，您只需调用`bullets.splice(bulletIndex, 1);`

我希望你不介意；我分叉了你的[小提琴](http://jsfiddle.net/jonhopkins/sQyJH/)，用下面列出的更改来更新它。

**编辑：**一种用于连发而不是持续开火的新[小提琴。](http://jsfiddle.net/jonhopkins/sQyJH/1/)

```
// Inside your Enemybullet definition
// One simple change to draw(), pass in the index of the bullet in the array
this.draw = function(indexEnemy, indexBullet) {

    var mayDelete = false;

    ...

    if (bulletLeftField(this.sprite) == true) {
        mayDelete = true;
    }

    if (mayDelete == true) {
        this.sprite.remove();

        // Since you now have multiple bullets, you'll have to make
        // sure you're removing the correct one from the array
        enemies[indexEnemy].bullets.splice(indexBullet, 1);
    }

    ammoLayer.draw();
}

...

// Inside your refreshLoop function
// If there are enemies they should be checked
if (enemies.length > 0) {
    for (var i = 0; i < enemies.length; i++) {
        enemies[i].draw();

        // At 30 frames per second, 3 bullets in 2 seconds would be
        // one bullet for every 20 frames. So, every 20 frames,
        // create a new bullet for each enemy
        if ((enemyShootTimer % 20) == 0) {
            createEnemyBullet(enemies[i]);
        }

        // The same way you draw all of the player's bullets,
        // loop through the array of bullets for this enemy,
        // and draw each one, passing in the new parameters
        if (enemies[i].bullets.length > 0) {
            for (var j = 0; j < enemies[i].bullets.length; j++) {
                enemies[i].bullets[j].draw(i, j);
            }
        }
    }
}

// Update loop for burst-fire instead of sustained fire
var burstTime = 10; // 10 frames between bullets, 3 per second
var needToShoot = ((enemyShootTimer % burstTime) == 0);
if (enemies.length > 0) {
    for (var i = 0; i < enemies.length; i++) {
        enemies[i].draw();

        // if the enemies still have bullets to shoot this burst
        // and if 10 frames have passed since the last shot
        // ( enemyBurstCounter is declared outside refreshLoop() )
        if (enemyBurstCounter < 3 && needToShoot) {
            createEnemyBullet(enemies[i]);
        }
        if (enemies[i].bullets.length > 0) {
            for (var j = 0; j < enemies[i].bullets.length; j++) {
                enemies[i].bullets[j].draw(i, j);
            }
        }
    }
    if ((enemyShootTimer % 60) == 0) {
        enemyBurstCounter = 0; // if 2 seconds have passed, reset burst counter
    } else if (needToShoot) {
        enemyBurstCounter++; // if the enemies shot, update burst counter
    }
} 
```

# java - HashMap 并发修改异常

> ID：15569088
> 
> 赞同：2
> 
> 时间：2013-03-22T11:20:41.073
> 
> 标签：java, list, hashmap

我正在用 Java 编写这个程序，我得到一个 java.util.ConcurrentModificationException。代码摘录如下，如果需要更多代码，请告诉我。

```
for (String eachChar : charsDict.keySet()) {
    if (charsDict.get(eachChar) < 2) {
        charsDict.remove(eachChar);
    }
} 
```

`charsDict`定义为

```
Map<String, Integer> charsDict = new HashMap<String, Integer>(); 
```

请帮我 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T11:21:41.263

使用迭代器时，不允许从地图中删除元素。

克服此问题的典型解决方案：

```
List<String> toBeDeleted = new ArrayList<String>();
for (String eachChar : charsDict.keySet()) {
    if (charsDict.get(eachChar) < 2) {
        toBeDeleted.add(eachChar);
    }
}

for (String eachChar : toBeDeleted) {
    charsDict.remove(eachChar);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-22T11:32:31.510

您需要使用`remove`迭代器的方法：

```
for (Iterator<String> it = charsDict.keySet().iterator(); it.hasNext();) {
    String eachChar = it.next();
    if (charsDict.get(eachChar) < 2) {
        it.remove();
    }
} 
```

另请注意，由于您需要访问键和值，因此**使用****它会更有效`entrySet`**：

```
for (Iterator<Map.Entry<String, Integer>> it = charsDict.entrySet().iterator(); it.hasNext();) {
    Map.Entry<String, Integer> e = it.next();
    String eachChar = e.getKey();
    int value = e.getValue();
    if (value < 2) {
        it.remove();
    }
} 
```

最后似乎**key 实际上没有使用**，所以循环变为：

```
for (Iterator<Integer> it = charsDict.values().iterator(); it.hasNext();) {
    if (it.next() < 2) {
        it.remove();
    }
} 
```

另请参阅[此相关帖子](https://stackoverflow.com/questions/223918/efficient-equivalent-for-removing-elements-while-iterating-the-collection)。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-22T11:23:12.120

如果线程之间是 sahred，则使用 ConcurrentHashMap 可能是一个更好的选择……迭代器不是线程安全的，您应该创建一个新的迭代器，以便在线程之间使用相同的迭代器。

# visual-studio-2010 - MFC - 是否可以为除 CEdit 之外的任何其他控件显示气球提示？

> ID：15569092
> 
> 赞同：1
> 
> 时间：2013-03-22T11:20:53.783
> 
> 标签：visual-studio-2010, user-interface, mfc

`CEdit`有会员功能`ShowBalloonTip`，你知道是否有机会展示例如a的气球提示`CComboBox`？

![CEdit 控件的气球提示](../Images/20ff551d43044a3fcb9e2363bb8ac5a8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T12:18:08.277

您只需要实现自己的气球工具提示，或者您可以只使用 此[CodeProject 文章](http://www.codeproject.com/Articles/24155/CBalloonMsg-An-Easy-to-use-Non-modal-Balloon-Alter)`CBalloonHelp`中实现的类。

您需要使用的功能是：

```
void CBalloonMsg::ShowForCtrl( LPCTSTR lpszHdr, LPCTSTR lpszBody, HWND hCtrl, HICON hIcon /*= NULL*/ ); 
```

# c# - 无法在计算机“。”上启动服务。

> ID：15569094
> 
> 赞同：0
> 
> 时间：2013-03-22T11:21:00.800
> 
> 标签：c#, windows-services

我有启动和停止服务代码

开始：

```
ServiceController service = new ServiceController("MyService");
service.Start();
var timeout = new TimeSpan(0, 0, 5); // 5seconds
service.WaitForStatus(ServiceControllerStatus.Running, timeout);
btnTxt = "Stop Service"; 
```

停止：

```
ServiceController service = new ServiceController("MyService");
service.Stop();
var timeout = new TimeSpan(0, 0, 5); // 5seconds
service.WaitForStatus(ServiceControllerStatus.Stopped, timeout);
btnTxt = "Start Service"; 
```

当我直接在我的 Windows 窗体应用程序中使用此代码并以管理员身份运行 visula studio 时，它工作正常。但是现在我已经创建了一个类库，并从 Form 中的类库中调用了该方法。cs 文件。所以现在它给出了一个例外，“无法在计算机上启动服务 Myservice '。'。任何人都可以帮忙解决可能的问题吗？？类库中的所有其他方法都可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:45:10.707

服务将无权“与桌面交互”，Form.cs 将引用需要此权限的库，因此服务将无法启动。

目前[这里](http://geekswithblogs.net/BlackRabbitCoder/archive/2010/09/23/c-windows-services-1-of-2-creating-a-debuggable-windows.aspx)和[这里](http://geekswithblogs.net/BlackRabbitCoder/archive/2010/10/07/c-windows-services-2-of-2-self-installing-windows-service-template.aspx)有一个非常有用的解决方案，它将在调试器中将您的服务作为控制台应用程序运行，或者作为“适当的”服务运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:45:40.450

修改你的代码至少做一些日志：

你能添加一个 try catch 来获取异常吗

```
try{

// your code
}
catch (Exception ex)
{
    System.Diagnostics.Trace.WriteLine(ex.ToString());
} 
```

并在此处粘贴 ex.message

# github - 适用于 Github 企业的 IntelliJ IDEA Github 插件

> ID：15569099
> 
> 赞同：7
> 
> 时间：2013-03-22T11:21:13.747
> 
> 标签：github, intellij-idea

我们在我公司使用 github 的企业实例。该实例托管在`https://github.company.com`.

在 Github 插件中，如果我输入“github.company.com”和我的登录凭据，然后选择“测试”，插件会报告给定凭据失败。

我知道凭据是正确的。我还为主机尝试了“ [https://github.company.com](https://github.company.com) ”（尽管我在某处读过该插件假定 https ），但同样失败。

我使用 IntelliJ IDEA 12.0.4 和捆绑的 Github 插件。IDEA 正在 Linux Mint 14 工作站上运行（如果这有什么不同的话）。

任何想法（没有双关语）？

谢谢

# bash - 比较变量的更简单方法

> ID：15569100
> 
> 赞同：1
> 
> 时间：2013-03-22T11:21:15.733
> 
> 标签：bash, shell, if-statement, for-loop, comparison

我需要将文件“tmpcsv2”中的一组变量与“uniq_id”中的变量进行比较，我将详细介绍下面的文件。

tmpcsv2 -> 此文件由另一个脚本“script1”更新，每次运行“script1”都会更新（不附加）“tmpcsv2”中的新变量。没有。变量的个数可能是 1 并且可以达到 200。

```
eg:
2042344352
2470697747
2635527510
3667769962 
```

uniq-id -> 这是一组固定的变量（大约 10 万个）

```
(Business Name,Job ID,Job Size)
biz,1000036446,225210640
biz,100006309,6710840
biz,1000069211,2084019000
biz,1000118720,34194040
biz,1000150241,212322636 
```

我正在使用'for'循环+'if'来比较它们，如下所示，有没有更简单或更快（影响更小）的方法？当我运行它时，需要很长时间才能输出结果。打印命令仅用于测试，稍后将删除！

```
****Part of a bigger script****
amt=0
mjc=0
for jbid in `cat tmpcsv2` #Pick ID for match & calculation
do
    printf "Checking ID $jbid\n" >> Acsv3.tmp
    for bsid in `cat uniq_id` #Matching jobs & size calulation
    do
        ckid=`echo $bsid | cut -d "," -f2` #ckid is the ID to check
        jbsiz=`echo $bsid | cut -d "," -f3` #size of the ID
        if [ $jbid == $ckid ] 
        then
            printf "Matched at $ckid\n" #Print on Match found
            printf "Valid -> $jbid\n" >> Bcsv3.tmp
            ((mjc++)) #Increment Matched Job Count
            amt=$((amt+jbsiz)) #Add size of matched jobs
            break
        else
            printf "No Match at $cksid\n" #No matches
        fi
    done
    printf "Check for ID $jbid done\n" >> Acsv3.tmp
    printf "Matched $mjc jobs with combined size of $amt\n" >> Acsv3.tmp
done
****End of Comparision**** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:46:38.517

shell 是处理这么多数据的错误工具，但它是可行的。这里最基本的错误是[用`for`](http://mywiki.wooledge.org/DontReadLinesWithFor). 通过在每次迭代中不重新打开文件，可以显着提高性能。

```
function main {
    # Variables used elsewhere should be initialized there, not localized here.
    typeset amt=0 mjc=0 jbid ckid jbsiz

    while IFS= read -r jbid; do
        printf 'Checking ID %s\n' "$jbid" >&3
        while IFS=, read -r _ ckid jbsiz _; do
            case $jbsiz in
                *[^[:digit:]]*|'')
                    # validation is important for subsequent arithmetic.
                    return 1
                    ;;
                "$ckid") # Assuming "cksid" was a typo. Replace if not.
                    printf 'Matched at %s\n' "$ckid"
                    printf 'Valid -> %s\n' "$jbid" >&4
                    (( mjc++, amt += jbsiz ))
                    break
                    ;;
                *)
                    printf 'No match at %s\n' "$ckid"
            esac
        done <uniqid
        {
            printf 'Check for ID %s done\n' "$jbid"
            printf 'Matched %s jobs with combined size of %s\n' "$mjc" "$amt"
        } >&3
    done <tmpcsv2 3>>Acsv3.tmp 4>>Bcsv3.tmp
} 
```

最后，一个等效的 awk 脚本将大大优于这个 Bash 脚本，几乎任何其他语言也是如此。通过使用而不是读取循环，您还可以从 Bash 中获得更多性能，但是这种嵌套的读取循环逻辑使用回调`mapfile`来模拟有点草率。`mapfile`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T06:49:49.907

我想出了这个，不确定是否可以缩短，但它确实运行得更快！任何帮助都感激不尽 ！

```
************
while read -r line  #File read start
do
IFS=$","
val=$line
amt=0
mjc=0
cjc=0
for lsid in $val
do
    cksid=`echo $lsid | sed -e 's/*//g' -e 's/"//g'`
    printf "Checking for $cksid\n"
    ((cjc++)) #Count of jobs to check
    prsnt=`grep -w $cksid uniq_id`
    if [ $? -eq 0 ]
    then
        printf "Valid -> $cksid\n"
        jbsiz=`grep -w $prsnt | cut -d, -f2`
        (( mjc++, amt += jbsiz ))
        break
    else
        printf "No Data for $cksid\n"
    fi

done
done < tmpcsv2
*********** 
```

# magento - Magento getRowUrl 函数从哪里调用网格

> ID：15569102
> 
> 赞同：0
> 
> 时间：2013-03-22T11:21:21.070
> 
> 标签：magento

谁能告诉我 Magento`getRowUrl()`函数在网格视图中从哪里调用？

您可以在任何块中找到此网格..

```
app\code\community\Company\Module\Block\Adminhtml\Module\Grid.php 
```

该函数在那里定义，但不知道 Magento 从哪里调用它以返回行 url

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:07:59.007

它位于*widget/grid.phtml*模板[（链接）](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/design/adminhtml/default/default/template/widget/grid.phtml#L155)中：

```
<tbody>
<?php if (($this->getCollection()->getSize()>0) && (!$this->getIsCollapsed())): ?>
<?php foreach ($this->getCollection() as $_index=>$_item): ?>
    <tr title="<?php echo $this->getRowUrl($_item) ?>"<?php if ($_class = $this->getRowClass($_item)):?> class="<?php echo $_class; ?>"<?php endif;?> > 
```

# c# - 串行端口数据形式的停止按钮功能使其无响应

> ID：15569103
> 
> 赞同：3
> 
> 时间：2013-03-22T11:21:21.517
> 
> 标签：c#, visual-studio-2010, serial-port, arduino

在我的表单应用程序中，我正在使用串行端口读取串行数据并将它们存储在列表中以供进一步使用。我有一个停止按钮事件，但单击该按钮时表单不会终止。表单包含显示从串行端口获得的解析值的文本框（通过单击一个名为“开始”的按钮启动解析过程）。我的目标是在按下停止按钮时暂停从串行端口接收数据。到目前为止，当单击“开始”按钮时，数据读取开始，但由于某种原因，“停止”按钮不起作用。

```
private void serialPort1_DataReceived(object sender, System.IO.Ports.SerialDataReceivedEventArgs e)
    {
        serialPort1.NewLine = "-";
        RxString = serialPort1.ReadLine();
        RxString = RxString.Replace("$", "");

        this.Invoke(new EventHandler(DisplayText));

    }
    private void DisplayText(object sender, EventArgs e)
    {

        richTextBox1.AppendText(RxString);
        GlobalList.AddRange(parsed());

        displayglobal();
        graphs();
    }
    private void Start_Click(object sender, EventArgs e)
    {
        serialPort1.PortName = "COM32";
        serialPort1.BaudRate = 9600;
        serialPort1.DtrEnable = true;
        serialPort1.Open();
        if (serialPort1.IsOpen)
        {
            Start.Enabled = false;
            Stop.Enabled = true;
            richTextBox1.ReadOnly = false;

        }

    }

    private void Stop_Click(object sender, EventArgs e)
    {
        if (serialPort1.IsOpen)
        {
            serialPort1.Close();
            Start.Enabled = true;
            Stop.Enabled = false;
            richTextBox1.ReadOnly = true;

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-11T08:49:11.600

我通常做的不是突然关闭串行端口，而是在 readline 之前进行检查。比如说，你的状态是 ON 还是 OFF。并从事件接收外部更改状态。只要缓冲区中的数据可用，就会触发事件接收。1.当数据可用时，触发事件接收 2.如果状态为ON，则创建条件，执行readline，否则忽略readline。3\. 将设置状态设置为关闭在您的停止按钮和打开在您的开始按钮。4、当你认为不需要通讯时，可以关闭通讯。

希望这有帮助。

# javascript - JavaScript onClick 仅适用于 Chrome

> ID：15569104
> 
> 赞同：0
> 
> 时间：2013-03-22T11:21:22.527
> 
> 标签：javascript, jquery

以下 onClick 代码仅适用于 Chrome。在 Opera 和 Firefox 中，该按钮仅在单击时隐藏而不打开链接。

```
 <div>
    <button>
    <a  onClick="window.open('http://www.google.ro', 'sharer',
       'toolbar=0,status=0,width=500,height=325');" 
       href="javascript: void(0)"><img src=""/></a>
    </button>
</div> 
```

**JavaScript**：

```
<script type='text/javascript'>//<![CDATA[ 
$(function(){
$("button").click(function() {
    $(this).parent().hide();

})
});//]]> 
```

[JSFiddle 链接](http://jsfiddle.net/trefu/TVJWD/154/)

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T11:25:10.507

该`a`元素在一个元素中是被禁止的`button`。

来自[W3.org 上的按钮元素](http://www.w3.org/TR/html5/forms.html#the-button-element)：

> 不得有交互式内容后代。

交互内容在[此处](http://www.w3.org/TR/html5/dom.html#interactive-content-0)描述。`a`列在其中。

这个想法是按钮处理交互。这就是为什么允许浏览器不让后代接收事件的原因。

`button`在您的情况下，您只需绑定元素上的窗口打开操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T11:24:24.043

删除`<a>`并直接绑定`onClick`到`<button>`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T11:24:49.163

你不需要额外的标记..试试这个

也看看dystroy给出的优秀答案

```
<img data-href="http://www.google.ro" src="http://cdn1.iconfinder.com/data/icons/Futurosoft%20Icons%200.5.2/128x128/apps/vlc.png"/>

<script type='text/javascript'>
  $(function(){
    $("img").click(function() {
      $(this).hide();
      window.open($(this).attr('data-href'), 'sharer', 'toolbar=0,status=0,width=500,height=325');
    });
  });
 </script> 
```

[小提琴](http://jsfiddle.net/TVJWD/164/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T11:25:16.270

为什么不把 open 方法放在 click 函数中呢？

```
$("button").click(function() {
    $(this).parent().hide();
    window.open('http://www.google.ro', 'sharer', 'toolbar=0,status=0,width=500,height=325');
}) 
```

当你在那里时，摆脱它`<a>`（见dystroy的回答）：

```
<div>
    <button>
        <img src="http://cdn1.iconfinder.com/data/icons/Futurosoft%20Icons%200.5.2/128x128/apps/vlc.png"/>
    </button>
</div> 
```

[小提琴](http://jsfiddle.net/TVJWD/158/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T11:23:25.480

这不是我的想法，但试试这个：

```
<div><input type="button"><a  onClick="window.open('http://www.google.ro', 'sharer', 'toolbar=0,status=0,width=500,height=325');" href="javascript: void(0)"><img src=""/></a></input></div> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-22T11:25:10.700

这是不好`<a>`的`<button>`

```
<button>
  <a  onClick="window.open('http://www.google.ro', 'sharer', 'toolbar=0,status=0,width=500,height=325');" href="javascript: void(0)"><img src=""/></a>
</button> 
```

试试这个，而不是删除`<a>`标签并将`onclick()`事件应用于按钮：

```
<button onclick="window.open('http://www.google.ro', 'sharer', 'toolbar=0,status=0,width=500,height=325');"><img src=""/></button> 
```

### [小提琴](http://jsfiddle.net/TVJWD/161/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-22T11:25:53.757

一个标签把它搞砸了，而 chrome 足以修复它:)

试试这个：

```
<div><button onClick="window.open('http://www.google.ro', 'sharer', 'toolbar=0,status=0,width=500,height=325');" href="javascript: void(0)"><img src="http://cdn1.iconfinder.com/data/icons/Futurosoft%20Icons%200.5.2/128x128/apps/vlc.png"/></button></div> 
```

[http://jsfiddle.net/trefu/TVJWD/154/](http://jsfiddle.net/trefu/TVJWD/154/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-22T11:26:10.180

您可以处理在 JavaScript 中打开的新窗口：-

```
$("a").click(function(e) {
    e.preventDefault();
    window.open($(this).attr('href'), 'sharer', 'toolbar=0,status=0,width=500,height=325');
    $(this).parent().hide();
}); 
```

...并从标记中删除 JavaScript：-

```
<div><a href="http://www.google.ro"><img src="http://cdn1.iconfinder.com/data/icons/Futurosoft%20Icons%200.5.2/128x128/apps/vlc.png"/></a></div> 
```

将 JavaScript 与 HTML 分开是最佳实践，因为这将使您更容易进行维护和错误修复。

此外，您不应该在表单元素中使用链接。没有它应该可以正常工作：- [http://jsfiddle.net/drmonkeyninja/TVJWD/165/](http://jsfiddle.net/drmonkeyninja/TVJWD/165/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-22T11:33:19.063

用按钮而不是链接绑定`onClick`事件，如下所示..

```
<div><button onClick="window.open('http://www.google.ro', 'sharer', 'toolbar=0,status=0,width=500,height=325');" href="javascript: void(0)"><img src="http://cdn1.iconfinder.com/data/icons/Futurosoft%20Icons%200.5.2/128x128/apps/vlc.png"/></button></div> 
```

这将起作用。

# linux - 在函数中调用服务两次？

> ID：15569109
> 
> 赞同：0
> 
> 时间：2013-03-22T11:21:29.873
> 
> 标签：linux, bash, service

我为一些基本的监控和错误报告编写了一个服务，供我的用户用来检查某些服务器的功能。我遇到的问题是我有一个冗长的功能来制作报告以输出到文本文件，我希望有另一个选项可以通过电子邮件将此文本文件发送给我。当我尝试在服务的邮件部分调用该函数时，它不知道该函数是什么。

有任何想法吗？

谢谢

```
report)
function report (){

...
commands
...
}
report > text.txt
;;
mail)
report > test.txt
mail -s "Hell" user@example.com < test.txt 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:31:46.603

您只需要将`report()`函数移到`report)`案例之外（将其放在`case`关键字上方）。

# c# - .NET 中的多目标

> ID：15569112
> 
> 赞同：11
> 
> 时间：2013-03-22T11:21:36.193
> 
> 标签：c#, .net, .net-4.0, visual-studio-2012, multitargeting

浏览了各种博客后，我对“多目标”或并行执行的术语感到非常困惑。

1.  一些博客说，并行执行意味着一个进程中有两个版本的 CLR。其他一些人声称，它就像 .net 2.0 和 .net 3.0 程序集并排执行。我非常失望，我不确定谁对谁错。

2.  我还在许多博客中看到，比如 Scott Hanselman 的博客等（这让我很困惑），如果目标框架是 4.0，.NET 4.5 的任何功能都将不起作用。我可以同意。但是我不能同意或理解这样一个事实，即如果我使用 4.5 构建它并在 4.0 中部署，4.0 的一个功能在 4.5 中已修复，它将隐藏。这里我不理解“隐藏”这个词，也没有人敢解释它的真正含义。这意味着运行时错误？这意味着编译时错误？不可能是这个。这意味着不一致的行为？例外 ？如果是这样，我想知道为什么 MS 让这种类型的灵活性在 VS 中进行开发。它有什么用途吗？我明白，第一种情况是有意义的，但不理解或不同意第二种情况。

3.  我还在 Rick/Scott Hanselman 的帖子中看到，重大更改意味着，包括 CLR 在内的完整升级。然后，我应该将 3.0 视为主要升级，但不是因为它仍然使用 .NET 2.0 CLR。那为什么命名术语是 3.0.xx/3.5.xx ？就像 .NET 4.0.30319.x 中的情况一样，其中 CLR 也是新的，所以我同意这一点。我很惊讶谁是正确的。这些人或 MSDN 都违背了他们的原则（就像 MSDN 说格式为 Major.Minor.Build.Revision，而 Hanselman 或其他人说，Major 意味着 CLR 升级，而它不在 .NET 3.0 中）

参考：[http ://www.hanselman.com/blog/NETVersioningAndMultiTargetingNET45IsAnInplaceUpgradeToNET40.aspx](http://www.hanselman.com/blog/NETVersioningAndMultiTargetingNET45IsAnInplaceUpgradeToNET40.aspx)

[http://msdn.microsoft.com/en-us/library/bb822049(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/bb822049(v=vs.110).aspx)

对以上两个问题有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:13:41.323

首先，您必须了解多目标和并行执行之间的区别。

*   *Multitargettting*是您编译将在 CLR 运行时上运行的应用程序的能力，这些应用程序与您用于开发应用程序的应用程序不同（在 VS2010 的情况下为 .NET 4.0，在 VS 2012 的情况下为 .NET 4.5）。VS 中的多目标确保您的应用程序不会使用 CLR 运行时和基类库 (BCL) 中引入的任何类型或方法，这些版本比您的目标版本更新。VS 通过拥有在每个运行时中使用的 DLL 的副本来做到这一点，这些运行时可以作为目标。
*   *并行执行*意味着您可以在 PC 上安装多个版本的 CLR 运行时。从 CLR 4.0 开始不再正确。您现在可以将 CLR 4 与旧运行时（CLR 1.1 或 CLR 2.0）一起加载到同一进程中。请阅读[http://msdn.microsoft.com/en-us/magazine/ee819091.aspx](http://msdn.microsoft.com/en-us/magazine/ee819091.aspx) （“行为概述”部分）了解更多详细信息。

关于你的问题：

1.  请阅读上述 MSDN 文章中的链接。
2.  隐藏术语意味着当您在 .NET 4.5 下调试应用程序时，您会拥有带有错误修复的 BCL 版本，这些错误修复可能会在您部署到 .NET 4.0 后对您造成影响，因为该错误尚未在该版本的 BCL 上修复。您将遇到运行时错误，您可以观察到的方式取决于您遇到的错误类型。这可能是安全问题、应用程序中的逻辑错误或运行时异常。如果你想发现这些问题，你总是可以在只安装了 .NET 4.0 的干净 PC 上进行测试。
3.  您提供的两个链接不会以任何方式相互干扰。Scott 和 MSDN 在解释什么版本的 .NET 安装了哪个版本的 CLR 运行时都是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:40:32.040

这就是我的想法。

.NET 经历了多个版本和多个运行时的演变。新版本的 .NET 可能有也可能没有新的运行时。

.NET 1.0 附带运行时。.NET 1.1 是对现有系统的一系列修复和添加。这是一个增量升级。

因此，任何以 1.0 为目标的东西都将在 1.1 上无缝运行，因为您不依赖那些已修复的错误 .etc。

.NET 2.0 是具有全新运行时的新版本。现在您的 PC 可以同时安装 1.1 和 2.0.. 并且 1.1 应用程序将使用 .NET 1.1 运行时，而 2.0 目标应用程序将使用 2.0 运行时..

3.0 和 3.5 版本让事情变得有点复杂。它们可能包含一些修复（我认为），但主要是它们向库中添加了一堆类，并且仍然使用相同的 2.0 运行时。

现在，面向 3.5 的应用程序仍将使用 .NET 2.0 运行时，并且可以正常工作。他们不知道 3.5 中添加的新类（例如：LINQ），也不必知道。

.NET 4.0 又是一个全新的运行时。它可以与 2.0 和 3.5 并排安装。面向 .NET 2.0 的应用程序仍将需要并在 .NET 2.0 运行时上运行，而为 NET 4.0 编译的新应用程序将使用新的运行时。在 .NET 4.0 中，对程序集的定位和加载方式进行了一些更改，因此如果您只是将 2.0 应用程序编译为与 4.0 一起使用，它可能会遇到一些问题。但是一旦你解决了这些问题（如果有的话）它就会起作用

现在...... .NET 4.5 又是一个稍微不同的故事。这是一个新的运行时（AFAIK），但它正在取代 4.0。您不能同时运行 4.0 和 4.5。现在 4.0 目标应用程序将在 4.5 运行时上运行......应用了一些修复程序。因此，如果您的应用程序依赖于 4.0 中可用的那些错误，那么它将在 4.5 中出现问题。

这是一个快速而肮脏的答案。如果您发现任何问题/不匹配/可能的改进，请随时编辑。

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T11:50:09.110

1.  并行执行意味着在一个进程中有多个 CLR。.NET2 与 .NET3.5 不是并排的，因为 CLR 是相同的。但是，.NET2 和 .NET4 是。
2.  “在 .NET4.5 中构建并在 .NET4.0 中部署”是什么意思？
3.  您要求对由 Microsoft 营销决定的事物进行明确的技术区分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-08T16:55:07.693

> 一些博客说，并行执行意味着一个进程中有两个版本的 CLR。其他一些人声称，它就像 .net 2.0 和 .net 3.0 程序集并排执行。我非常失望，我不确定谁对谁错。

“其他一些人”只是在误导自己。.NET Framework 2.0 和 3.0 程序集不是“并排”执行的。就像许多其他人所说的那样，只有在混合运行 CLR 1.x/2.0/4.0 时，并行执行才有意义。

> MS 已经让这种类型的灵活性在 VS 中进行开发。它有什么用途吗？

如果您在原始 .NET Framework 4.0 上运行 .NET Framework 4.5 应用程序，如果 Windows/.NET 报告任何不兼容性，这将是有益的。但是，要实现这一点需要付出太多努力，因为修补广泛发布的 .NET Framework 4.0 几乎是不可能的。

在这种情况下，微软希望开发人员自己聪明。当他们观察到不兼容时（无论是运行时异常/编译时错误还是其他），他们应该检查是什么原因并解决它。

> 那为什么命名术语是 3.0.xx/3.5.xx ？

这只是历史的一部分，问为什么毫无意义。微软从这些错误中吸取了教训，.NET Core 走上了正轨。

# c++ - 从文本到 XML

> ID：15569116
> 
> 赞同：-1
> 
> 时间：2013-03-22T11:21:50.640
> 
> 标签：c++, xml, dom, sax, libxml2

我想知道是否有任何方法可以`.txt`使用`c++`and来创建 XML 文件`libxml`？

输入文件如下所示：

```
"< url   >..........< / url>
<description>His work points a way forward for saving the oceans' health -- and humanity's.</description>
<keywords>fish,health,mission blue,oceans,science</keywords>
<talkid>899</talkid>
<title>Stephen Palumbi: Following the mercury trail</title>
<transcript>
It can be a very complicated thing, the ocean.
And it can be a very complicated thing, what human health is. " 

after transcript I have a huge text
after the tag </transcript> 
```

另一个集团以相同的结构开始，我想要的是构建整个事物并将元数据重新组合在一起，因为之后我需要单独处理文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:33:02.947

`.txt`文件以或`.xml`或`.whatnot`无关的事实结尾。

添加`.*`到文件名只是一个约定。一种节省您打开每个文件以验证格式的时间的方法，或者为程序提供提示以便它知道它正在处理什么。*提示*是关键字——文件可以有任意名称，它们不强制遵循约定。

打开一个有效`xml`的格式化文件是相同的过程，无论文件名是否以结尾`.xml`。

# 编辑

您说该文件有许多`XML`块，但`XML`本身不是 -`XML`确实需要一个最外面的标签。只需在文件的开头和结尾添加`<root>`和。如果需要，`</root>`将其重命名为。`xml`

换句话说，您应该问自己的问题是如何在向`XML`解析器提供文件之前和之后提供额外的数据。像这样的东西：

```
parser.feed('<root>')
parser.feed(read('file.txt'))
parser.feed('</root>') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:31:38.777

了解什么是有效的 xml 文档很重要？简而言之，它必须满足 DTD 或模式（xml 模式、relaxng 模式、schematron 或其他约束）才能有效。

从问题的措辞来看，它很可能会问：

“如何确保文件包含格式良好的 XML 文档，并读取这些元素？XML 是在扩展名为 .text 的文件中还是在 uʍopǝpısdn 答案中提到的其他文件中都没有关系”。

答案是，如果 XML 文档可以被兼容的 XML 解析器成功解析，那么它就是格式良好的。因此，假设您的文本文件包含格式良好的 XML，那么任何兼容的 XML 解析器都可以读取它......

您可以通过阅读“文本”文件自己尝试

```
http://www.xmlsoft.org/
http://www.grinninglizard.com/tinyxml/ 
```

也值得一看

```
http://www.w3schools.com/xml/xml_whatis.asp 
```

# java - 即使更新到 2.3.12 也无法解决 Struts2 NotSerializableException

> ID：15569117
> 
> 赞同：5
> 
> 时间：2013-03-22T11:21:53.337
> 
> 标签：java, serializable, httpsession

我目前正在使用 struts2 进行工作，突然出现此错误。我的对象的某些缓存不起作用。

我使用 JBoss 5 和 struts2：struts2-core-2.3.4.1.jar xwork-core-2.3.4.1.jar

堆栈跟踪在这里： http: [//pastebin.com/QpPV01wX](http://pastebin.com/QpPV01wX)

这是一些片段：

```
java.io.NotSerializableException: com.opensymphony.xwork2.inject.ContainerImpl$ConstructorInjector
        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1164)
        at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:330)
        at com.opensymphony.xwork2.inject.util.ReferenceMap.writeObject(ReferenceMap.java:595)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:945)
        at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1469)
        at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)
        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)
        at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1518)
        at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1483)
        at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)
        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)
        at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1518)
        at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1483)
        at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)
        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)
        at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1518)
        at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1483)
        at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)
        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)
        at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1518)
        at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1483)
        at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)
        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)
        at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:330)
        at java.util.HashMap.writeObject(HashMap.java:1001)
        at sun.reflect.GeneratedMethodAccessor413.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:945)
        at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1469)
        at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)
        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)
        at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:330)
        at java.util.HashMap.writeObject(HashMap.java:1001)
        at sun.reflect.GeneratedMethodAccessor413.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:945)
        at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1469)
        at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)
        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)
        at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:330)
        at org.jboss.ha.framework.server.SimpleCachableMarshalledValue.serialize(SimpleCachableMarshalledValue.java:271)
        at 
```

我会喜欢建议，或者我做错了什么。

非常感谢您，

** 更新

我试图删除我在 struts.xml 中使用的令牌会话拦截器，问题就消失了。不过，如果我使用令牌，我不知道为什么会出错。至少在我的情况下，它是通过删除令牌会话拦截器来解决的。

我删除了 struts.xml 上的以下行

```
<interceptor-ref name="tokenSession">
  <param name="excludeMethods">list</param>
  <param name="includeMethods">save,update</param>
</interceptor-ref> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T11:28:45.120

似乎您已将未实现的对象放入缓存或会话中`java.io.Serializable`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-15T14:34:27.887

我也遇到了同样的问题，但是我发现我的 struts2-spring-plugin-2.0.14.jar 与我的 struts2-core.2.2.3.jar 不匹配，所以我用相应的替换了 struts2-spring-plugin版本和它的工作〜祝你好运〜希望这对其他人有帮助〜

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-23T16:41:15.530

struts-2.3.32 也遇到了这个问题。该类`com.opensymphony.xwork2.DefaultActionInvocation`具有对 Action 的引用。
如果您的操作扩展`com.opensymphony.xwork2.ActionSupport`，则它引用`com.opensymphony.xwork2.inject.Container`.
解决方法是删除对`ActionSupport`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-23T03:01:21.667

我通过切换到`tokenInterceptor`代替`tokenSessionInterceptor`. `tokenInterceptor`在大多数情况下都可以。

# java - 通用方法类型参数

> ID：15569121
> 
> 赞同：3
> 
> 时间：2013-03-22T11:22:00.973
> 
> 标签：java, generics

我有这个方法，它采用实现接口 Comparable 的 T 类型的 3 个参数

```
public static < T extends Comparable< T > > T maximum( T x, T y, T z ) {} 
```

我在询问以其他方式声明它，如下所示（假设它采用任何 Comparable 对象作为其参数）

```
public static <Comparable <T>> T maximum (T x, T y, T z){} 
```

另一个问题，在第一个声明中，我知道 Comparable 是一个接口，所以为什么它写成`<T extends Comparable<T>>`而不是`<T implements Comparable<T>>`??

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T11:27:54.313

`public static <Comparable <T>> T maximum (T x, T y, T z){}`未编译，因为该方法的参数 T 未声明。

> 我知道 Comparable 是一个接口，所以为什么它写为 > 而不是 >??

有界[类型参数](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.5)的语法是 with `extends`not `implements`，即使该参数是实现接口所必需的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T11:34:24.033

您的两个问题都可以回答：这是 Java 语法。在 Java 语言中，参数化方法声明如下：

```
[optional modifiers] <T> [return type] foo() {} 
```

它*声明*了一个名为的*类型参数*`T`，可以使用以下语法限制其*上限：*

```
T extends [type expression] 
```

在方法的其余部分（返回类型、形参列表、方法体）`T`是指调用方法时传递的类型。在如下声明中：

```
Comparable<T> 
```

`T`不是类型参数，但它是用于实例化参数化类型的**类型**`Comparable<E>`参数，并且属于更大的范围，例如：

```
class Foo<T> {
  public Comparable<T> foo(T arg1, T arg2) {}
} 
```

请注意，`<Comparable<T>>`根本不允许源文件中的文本（用尖括号括起来的类型）。这对编译器没有任何意义，它会拒绝编译文件。

同样，关于您的第二个问题，`extends`它只是 Java 语言中的一个关键字，具有两种不同的含义：

1.  它可以在类声明中用于继承另一个类
2.  它可用于为类型参数设置上限

Java 创建者本可以决定使用不同的关键字来区分这两种情况，但他们只是*重载*了现有的一种，因为他们觉得开发人员更容易记住它。但它们绝对是*不同的关键字*，这就是为什么在声明类型参数的上限时不使用*implements的原因。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T11:32:50.187

查看 Javadoc 的`Collections.sort`. 签名是：

```
public static <T extends Comparable<? super T>> void sort(List<T> list) 
```

如果我有的话就是这样

```
class A implements Comparable<A> {...}
class B extends A {...}
// ...
List<B> bs = ...
Collections.sort(bs); 
```

我可以对 List 进行排序，因为 B 可以通过 A 类的比较器进行比较。所以，写：

```
public static < T extends Comparable< ? super T > > T maximum( T x, T y, T z ) {} 
```

# c# - 线程池中线程的可用性？

> ID：15569124
> 
> 赞同：1
> 
> 时间：2013-03-22T11:22:10.193
> 
> 标签：c#, asp.net, multithreading, httpwebrequest, threadpool

如何从线程池中找到 60%（或 N%）的线程可用性？这背后的逻辑是什么？
父线程使用线程池线程生成多个 url 并等待所有子线程完成。

代码如下；
**父线程**

```
 public void  Save()
 {
  List<Job> Jobs = PickJobs();

  int workerThreads = 0,compThreads = 0;
  ThreadPool.GetMinThreads(workerThreads, compThreads);

  int requiredThreads = 15;
  ThreadPool.SetMaxThreads(requiredThreads, compThreads);

  WaitCallback waitCallBack = default(WaitCallback);
  ManualResetEvent mEvent = default(ManualResetEvent);

 foreach (Job _job in Jobs) 
   {
   waitCallBack = new WaitCallback(CallBackFunc);
   mEvent = new ManualResetEvent(false);
   events.Add(mEvent);
   ThreadPool.QueueUserWorkItem(waitCallBack, new UrlData(_job, mEvent, HttpContext.Current));
   }
     WaitHandle.WaitAll(events.ToArray(), 300000);//05 Minutes
 } 
```

子线程

```
private void CallBackFunc(object obj)
{
     UrlData msgObj = (UrlData)obj;
   WebRequest lWebRequest = WebRequest.Create(psUrl);
   lWebRequest.Timeout = 60000;
   WebResponse lWebResponse = lWebRequest.GetResponse;

    msgObj.FinishEvent.Set();
} 
```

用于跨线程通信的对象数据

```
public class UrlData
{
public Job job;
public ManualResetEvent FinishEvent;
public HttpContext HttpContextRef;

public UrlData(Job pJob, ManualResetEvent pEvent, HttpContext pContext)
  {
      job= pJob;
      FinishEvent = pEvent;
      HttpContextRef = pContext;
  }
} 
```

在上面的代码中，所需的线程被硬编码为：

```
int requiredThreads = 15;
ThreadPool.SetMaxThreads(requiredThreads, compThreads); 
```

这种硬编码会导致线程池饥饿吗？如果线程池中没有可用的线程会发生什么？如何查找托管服务器的线程池中可用的线程总数？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:08:48.390

经过一番研究，我最终获得了最大线程数检索功能。
它会暂时返回线程池中可用的线程数。如果发生线程饥饿，则返回零。

```
/// <returns>int (Number of threads currently available)</returns>
private int GetMaxItemsRetrievalCount()
{
int rtnVal = 1;
try {
    //Get Available idle threads currently in the thead pool.
    ThreadPool.GetAvailableThreads(workerThreads, completionThreads);

    rtnVal = workerThreads > MaxConcurrentThreads ? MaxConcurrentThreads : workerThreads;
    //Math.Min(MaxConcurrentThreads - currentWorkLength, workerThreads - ThreadBuffer);

    rtnVal = rtnVal > 0 ? rtnVal : 0;
} catch (Exception ex) {
    WriteTransactionalJobLog(new JobLogDTO {
        Mode = "Parallel",
        UniqueId = "GetMaxItemsRetrievalCount Exception",
        ThreadId = Thread.CurrentThread.ManagedThreadId.ToString(),
        StartTime = DateTime.Now.ToString(),
        ExceptionOrResult = ex.ToString()
    });
}

return rtnVal;
} 
```

# netty - Netty 4 中是否有办法在连接时传递通道“名称/ID”，我可以将其用于服务器端注册？

> ID：15569128
> 
> 赞同：2
> 
> 时间：2013-03-22T11:22:21.087
> 
> 标签：netty, state, channel

**背景**：

我希望维护一个连接通道的服务器端注册表，但我还需要这个注册表通过一个众所周知的名称/ID 进行 KEY-ed - 每个连接的通道都是唯一的。

因此，我将使用字符串 id 作为每个连接通道的键 - （即客户端和服务器都知道它，但它不会是 GUID）。

当客户端连接并调用服务器端处理程序的 channelActive 方法时，我想从 ChannelHandlerContext 中提取此 Channel **ID**并存储此 (ID, Channel) 对。

当通道断开连接时 - 无论是客户端还是某些故障，我将从地图中删除 (ID, Channel) 对。

**问题**：

有没有办法在客户端 Connect 调用中传递此应用程序数据，以便服务器端处理程序可以在其 channelActive 方法中读取它？

我只能在“连接时”执行此操作吗？我想避免将此逻辑添加到实际的消息处理中，因为这纯粹是为了通道连接/断开识别。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:38:29.810

经过一些带外讨论后，我更好地理解连接仅用于建立端点之间的物理连接。直到 Channel 上的第一次写入发生，管道中的各种处理程序才被构造/使用。

因此，我将把它构建到我们的消息处理层中——使用客户端通道的 channelActive 方法来处理进行 1 次注册调用。

# asp.net - 呈现和分组数据 ASP.NET / SQL

> ID：15569129
> 
> 赞同：0
> 
> 时间：2013-03-22T11:22:26.070
> 
> 标签：asp.net, sql, vb.net, sql-server-2008

我将尝试对此进行不同的处理，因为我的最后一次尝试并不清楚：

我运行了一个 SQL 查询并产生了以下结果：

![在此处输入图像描述](../Images/2afdbe16975ae2bd522fab899a2586ca.png)

我现在想构建一个向用户显示这些结果的 ASP.NET 页面

我正在尝试放置一个列表视图来显示用户，并在其中放置一个网格视图来显示用户拥有的项目。

到目前为止，我的代码如下所示：

```
 <asp:ListView ID="lvPersonItems" runat="server"  DataSourceID="sdsResults"  GroupItemCount="3"  EnableViewState="true" GroupPlaceholderID="groupPlaceHolder" ItemPlaceholderID="itemPlaceHolder">

 <LayoutTemplate>
 <table>
 <tr>
 <td>
 <table cellpadding="15">
 <asp:PlaceHolder ID="groupPlaceHolder" runat="server" />
 </table>
 </td>
 </tr>
 </table>
 </LayoutTemplate>

 <GroupTemplate>
    <tr>
    <asp:PlaceHolder ID="itemPlaceHolder" runat="server" />
    </tr>
 </GroupTemplate>

 <ItemTemplate >
 <td>
 <h3><%# Eval("Forename")%> <%# Eval("Surname")%></h3>

 <asp:GridView BorderStyle="None" ID="gvItems" AutoGenerateColumns="false" runat="server" DataSource='<%# Eval("Description") %>'>

 <Columns>
 <asp:BoundField DataField="Description" HeaderText="Description" />
 </Columns>

 </asp:GridView>

 <EmptyDataTemplate>
 <div style="background-color:Gray">No orders exists!</div>
 </EmptyDataTemplate>

 </td>
  </ItemTemplate>
 </asp:ListView>

  <asp:SqlDataSource ID="sdsResults" runat="server" 
          ConnectionString="<%$ ConnectionStrings:conString %>" 
          SelectCommand="sp_Test_Proc" SelectCommandType="StoredProcedure">
        </asp:SqlDataSource> 
```

但是，在运行此程序时，我收到以下错误：

```
A field or property with the name 'Description' was not found on the selected data source. 
```

任何人都可以对此有所了解吗？:)

**更新**

按照伊卡洛斯的建议，我现在有以下几点：

![在此处输入图像描述](../Images/47d21aef86208ed53daf004b36a02af7.png)

但是，它包含多个数据，我似乎无法将其压缩为 2 个用户，1 个有 2 个项目，另一个有 1 个项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:55:06.297

Your problem is here:

```
 <asp:GridView BorderStyle="None" ID="gvItems" 
  AutoGenerateColumns="false" runat="server" 
  DataSource='<%# Eval("Description") %>'> 
```

Note that you are trying to Bind the property Description as the DataSource to the GridView.

The Datasource should be instead the SQL Data Source that you have defined further down; therefore change it to:

```
 <asp:GridView BorderStyle="None" ID="gvItems" 
 AutoGenerateColumns="false" runat="server" DataSource="sdsResults"> 
```

# wpf - TabItem ContentTemplate 上的 IsMouseOver 触发器

> ID：15569131
> 
> 赞同：2
> 
> 时间：2013-03-22T11:22:27.330
> 
> 标签：wpf, triggers, styles, tabitem, ismouseover

我对 TabItem 样式有疑问，也许你们中的某个人可以帮助我。

遵循有问题的样式：

```
<Style x:Key="ChildrenTabItemStyle" TargetType="TabItem">
                <Style.Resources>
                    <SolidColorBrush x:Key="ButtonNormalBackground" Color="#FFEAE8E8"/>
                    <LinearGradientBrush x:Key="ButtonOverBackground" EndPoint="0,1" StartPoint="0,0">
                        <GradientStop Color="#FFFAFAFA" Offset="0"/>
                        <GradientStop Color="#FFE0E0E3" Offset="1"/>
                    </LinearGradientBrush>
                    <LinearGradientBrush x:Key="ButtonPressedBackground" EndPoint="0,1" StartPoint="0,0">
                        <GradientStop Color="#FFE0E0E2" Offset="0"/>
                        <GradientStop Color="#FFF8F8F8" Offset="1"/>
                    </LinearGradientBrush>
                    <SolidColorBrush x:Key="ButtonNormalBorder" Color="#FF969696"/>
                    <Style x:Key="CloseableTabItemButtonStyle" TargetType="{x:Type Button}">
                        <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
                        <Setter Property="Background" Value="{DynamicResource ButtonNormalBackground}"/>
                        <Setter Property="BorderBrush" Value="Transparent"/>
                        <Setter Property="BorderThickness" Value="2,2,2,0"/>
                        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
                        <Setter Property="HorizontalContentAlignment" Value="Center"/>
                        <Setter Property="VerticalContentAlignment" Value="Center"/>
                        <Setter Property="Padding" Value="4"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="{x:Type Button}">
                                    <Grid>
                                        <Border SnapsToDevicePixels="true" x:Name="Chrome" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="2" Opacity="0" />
                                        <ContentPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" RecognizesAccessKey="True"/>
                                    </Grid>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Opacity" TargetName="Chrome" Value="1"/>
                                            <Setter Property="Background" TargetName="Chrome" Value="{DynamicResource ButtonOverBackground}" />
                                        </Trigger>
                                        <Trigger Property="IsPressed" Value="True">
                                            <Setter Property="Opacity" TargetName="Chrome" Value="1"/>
                                            <Setter Property="Background" TargetName="Chrome" Value="{DynamicResource ButtonPressedBackground}" />
                                        </Trigger>
                                        <Trigger Property="IsEnabled" Value="false">
                                            <Setter Property="Foreground" Value="#ADADAD"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </Style.Resources>
                <Setter Property="Height" Value="40"/>
                <Setter Property="MinWidth" Value="90"/>
                <Setter Property="FontWeight" Value="Bold"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type TabItem}">
                            <Border Name="Border" Margin="1,-1,-1,-1">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <ContentPresenter Name="BorderContent"
                                                      Content="{Binding Path=Header}" 
                                                      VerticalAlignment="Center"
                                                      HorizontalAlignment="Center"/>

                                    <Button x:Name="PART_Close" 
                                            HorizontalAlignment="Right" 
                                            Margin="3,0,3,0" 
                                            VerticalAlignment="Top" 
                                            Width="16" 
                                            Height="16" 
                                            DockPanel.Dock="Right" 
                                            Style="{DynamicResource CloseableTabItemButtonStyle}" 
                                            ToolTip="Close Tab"
                                            Cursor="Hand"
                                            Command="{Binding Path=CloseCommand}"
                                            Visibility="Hidden">
                                        <Path x:Name="Path" 
                                              Stretch="Fill" 
                                              StrokeThickness="0.5" 
                                              Stroke="#FF333333" 
                                              Fill="#FF969696" 
                                              Data="F1 M 2.28484e-007,1.33331L 1.33333,0L 4.00001,2.66669L 6.66667,6.10352e-005L 8,1.33331L 5.33334,4L 8,6.66669L 6.66667,8L 4,5.33331L 1.33333,8L 1.086e-007,6.66669L 2.66667,4L 2.28484e-007,1.33331 Z " 
                                              HorizontalAlignment="Stretch" 
                                              VerticalAlignment="Stretch"/>
                                    </Button>
                                </Grid>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="Border" Property="BorderBrush"  Value="{StaticResource ButtonBorderBrush}"/>
                                    <Setter TargetName="Border" Property="BorderThickness" Value="2,2,2,0"/>
                                    <Setter TargetName="PART_Close" Property="Visibility" Value="Visible"/>
                                </Trigger>
                                <Trigger Property="IsSelected" Value="True">
                                    <Setter TargetName="Border" Property="Background" Value="{StaticResource EnvLayout}"/>
                                    <Setter Property="Foreground" Value="#FFFFFF"/>
                                    <Setter TargetName="PART_Close" Property="Visibility" Value="Visible"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style> 
```

我的问题集中在 IsMouseOver 触发器上；实际上，当未选择选项卡时，仅当光标位于 TabItem 的 Header（在 ContentTemplate 中定义）而不是边框​​的任何点时才会触发此事件。

为了更好地解释我的问题，下面是一些截图：

当 IsMouseOver = true 我的 TabItem 必须有灰色边框并且必须出现关闭按钮；正如您在下图中看到的那样，仅当我的光标正好位于标题上方时才会出现此行为：

![光标在标题上](../Images/8f3e57fff6cad2e5c9061e4a84e6ef31.png)

![靠近边界边缘的 Curson](../Images/96be633e5b08283e2f7f35658baa23be.png)

显然，当光标不在标题上时，您甚至无法选择选项卡。

我怎么解决这个问题？？

在此先感谢您的帮助，

黛博拉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T12:02:52.130

我最近也有类似的问题，

尝试改变你的

```
<ControlTemplate TargetType="{x:Type TabItem}">
  <Border Name="Border" Margin="1,-1,-1,-1"> 
```

到

```
<ControlTemplate TargetType="{x:Type TabItem}">
  <Border Name="Border" Margin="1,-1,-1,-1" Background="Transparent"> 
```

好像没有设置背景的默认值，只有渲染区域响应状态触发器

# c# - 来自 WebResponse 的 HtmlDocument.LoadHtml？

> ID：15569133
> 
> 赞同：0
> 
> 时间：2013-03-22T11:22:30.743
> 
> 标签：c#, html, .net, httpwebrequest, html-agility-pack

我尝试从发布的链接中提取图像，我做的第一个检查是查看链接是否指向这样的普通图像：

```
 HttpWebRequest request;
    WebResponse webresponse;

    request = (HttpWebRequest)HttpWebRequest.Create(url);

     webresponse = request.GetResponse();
     if (webresponse.ContentType.StartsWith("image/"))
       ... 
```

如果没有找到，我想继续使用 HTML Agility Pack，但为了能够做到这一点，我需要运行：

```
HtmlDocument doc;
reader = new StreamReader(webresponse.GetResponseStream());
doc.LoadHtml(reader.ReadToEnd()); 
```

问题是即使我确定响应中有 HTML 代码，LoadHtml 也找不到任何来源。我怀疑形成的HTML格式不正确？

这是 ReadToEnd 将生成的部分内容：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

    <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="sv" lang="sv">
    <head><title>
        X - Eclipse - 2011
    </title>

        <!--[if lt IE 7]>
        <script defer type="text/javascript" src="../javascript/pngfix.js"></script>
        <![endif]-->
        <!--<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />-->

        <meta http-equiv="Content-type" content="text/html; charset=iso-8859-1" /><link href="../../../App_Themes/X/mainStyleSheet.css" type="text/css" rel="stylesheet" /><meta name="author" content="" /><meta name="copyright" content="X.net" /><meta name="description" content="Välkommen in till ett av Sveriges största Xcommunity." /><meta name="keywords" content="X, rollspel, boardgamegeek, boardgame, X.net, X.net, community, Jimmy, Nilsson, schack, risk, puerto rico" /><script language="javascript" type="text/javascript" src="/sites/X/javascript/common.js"></script><script language="javascript" type="text/javascript" src="/sites/X/javascript/ajaxHandler.js"></script><script language="javascript" type="text/javascript" src="/javascript/jquery.js"></script><link rel="shortcut icon" href="/App_Themes/X/Images/common/browserIcon/favicon.ico" /><link rel="icon" href="/App_Themes/X/Images/common/browserIcon/animated_favicon1.gif" type="image/gif" /></head>
    <body>
        <div id="topBack">
        <div id="siteContainer">
        <form method="post" action="game.aspx?gameId=72125" id="aspnetForm" enctype="multipart/form-data">

<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDw.... 
```

如果这很重要，我可以看到该字符串包含一些换行符（\r\n）命令？

我的目标很简单，就是避免多次下载网页，否则我可以使用`WebClient.DownloadString(url);`我知道有效的格式下载它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:05:02.643

这有效：

```
request = (HttpWebRequest)HttpWebRequest.Create(url);
webresponse = (HttpWebResponse)request.GetResponse();
if (webresponse.ContentType.StartsWith("image/"))
{...}
if (webresponse.ContentType.StartsWith("text/html"))
{
     var resultStream = webresponse.GetResponseStream();
     doc.Load(resultStream);
} 
```

# java - 用android中的新数据刷新ListView

> ID：15569141
> 
> 赞同：0
> 
> 时间：2013-03-22T11:23:07.757
> 
> 标签：java, android

我正在尝试构建一个函数，当在列表视图中单击文件夹时，它将在同一活动中显示该文件夹内的文件列表。即用不同的数据刷新相同的列表视图。我在数据库中建立了一个类似结构的目录，并从中获取文件和文件夹的列表。

```
public class SkydriveFolderList extends Activity
{
    ArrayList<String> filelist1=new ArrayList<String>();
    ArrayList<String> filepath=new ArrayList<String>();
    ArrayList<String> isfolder=new ArrayList<String>();
    ArrayList<Integer> fileid=new ArrayList<Integer>();

    ListView lv;
    EditText et;
    ArrayAdapter<SearchResults> arrayAdapter;
    Button back;
    TextView path;![enter image description here][1]

    public void onCreate(Bundle SkydriveFolderList)
    {
        Intent i = getIntent();
        filelist1 = i.getStringArrayListExtra("FileList");
        filepath = i.getStringArrayListExtra("FilePath");
        isfolder = i.getStringArrayListExtra("isFolder");
        fileid = i.getIntegerArrayListExtra("FileId");

        super.onCreate(SkydriveFolderList);
        ArrayList<SearchResults> searchResults = GetSearchResults();

        setContentView(R.layout.filelist);
        lv = (ListView)findViewById(R.id.skydrive_list);
        et=(EditText)findViewById(R.id.inputSearch);
        path=(TextView)findViewById(R.id.filepath);
        back=(Button)findViewById(R.id.back);

        arrayAdapter =new ArrayAdapter<SearchResults>(this,android.R.layout.simple_list_item_1,searchResults);
        // ((ListView) arrayAdapter).setAdapter();
        lv.setAdapter(new MyCustomBaseAdapter(this, searchResults)); 
        //lv.setAdapter(arrayAdapter);

    et.addTextChangedListener(new TextWatcher()
    {

        @Override
        public void onTextChanged(CharSequence cs, int arg1, int arg2, int arg3)
        {
            // When user changed the Text
            SkydriveFolderList.this.arrayAdapter.getFilter().filter(cs);
        }

        @Override
        public void afterTextChanged(Editable arg0)
        {
            // TODO Auto-generated method stub

        }

        @Override
        public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,int arg3)
        {
            // TODO Auto-generated method stub

        }

    });

    lv.setOnItemClickListener(new OnItemClickListener()

    {
        public void onItemClick(AdapterView<?> parent, View view,int position, long id) 
        {

       Object o = parent.getItemAtPosition(position);
       SearchResults fullObject = (SearchResults)o;
      // prestationEco str=(prestationEco)o;//As you are using Default String Adapter
       Toast.makeText(getBaseContext(),fullObject.getFilename(),Toast.LENGTH_SHORT).show();
        }

        });

} 
```

[http://i.stack.imgur.com/QCIsr.png](http://i.stack.imgur.com/QCIsr.png)

请检查上面的链接以查看应用程序的快照。

现在，当单击文档文件夹时，应该使用该文件夹内的文件列表刷新列表视图。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:59:20.377

当用户单击列表视图以刷新整个列表视图时，您可以调用 `adapter.notifyDataSetChanged()`它来刷新您的视图，而不会出现任何延迟或崩溃……这对您来说将是一个更好的方法……希望这会有所帮助。

# iis - 如何在 IIS 中为自服务器证书指定“颁发给”和“颁发者”

> ID：15569142
> 
> 赞同：2
> 
> 时间：2013-03-22T11:23:09.447
> 
> 标签：iis, certificate

我正在处理一个遗留项目（由我们不再有权访问的第三方制作）。该项目带有一个需要更新的自签名（服务器）证书（即将到期）。

假设该软件名为“SoftwareName”。

我可以通过 IIS 轻松创建证书，但是当我查看旧证书时，“证书详细信息”选项卡中的“主题”、“颁发者”和“友好名称”字段都给出了“软件名称”。在 IIS 的“服务器证书”部分查看时，“名称”、“颁发给”和“颁发者”字段也都是“软件名称”。

但是当我创建一个新证书时，后面的这些字段（颁发给/由）给出了我电脑的域名。鉴于以前证书的格式，我不想要这个。

创建证书时有没有办法定义这些字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:59:14.550

好的，那我会回答这个问题:)。我找到的解决方案是使用 OpenSSL。通过命令行选项的组合和配置文件（openssl.cnf）的编辑。

我运行此命令来创建证书（作为 pem）和密钥文件：

```
req -x509 -newkey rsa:2048 -keyout key.pem -out cert.pem -days 365 
```

然后编辑 openssl.cnf 以询问“commonName”（我还提供了默认值以减少键入）：

```
commonName          = SoftwareName
commonName_default  = SoftwareName 
```

然后，因为我需要证书作为 pfx：

```
pkcs12 -export -in cert.pem -inkey key.pem -name "SoftwareName" -out certificate.pfx 
```

这种组合创建了我正在寻找的一组属性。

# php - 在没有路由的情况下执行 Yii 模块

> ID：15569146
> 
> 赞同：3
> 
> 时间：2013-03-22T11:23:15.053
> 
> 标签：php, yii, url-routing, clean-urls

我有一个名为 article 的模块。它存在于以下文件夹中：

```
- protected
      - modules
           - article
                 - controllers
                   ArticleController.php
                 - views
                       -article
             articleModule.php 
```

因为我正在制作一个CMS。我选择不使用直接链接到控制器或操作。这意味着调用 example.com/article/article/index。不会工作。由于 CMS 将 url 请求视为页面。（所以它会寻找一个名为 'index' 的页面，其中包含父级 'article' 和 'article'。这样的页面不存在。

CMS 为有效页面加载块，对于其中一个块，我想执行文章模块。我尝试使用

```
Yii::app()->runController($route). 
```

但是，为此，您需要一条路线。

是否可以运行这样的模块，以使模块的工作方式与访问 url example.com/article/article 相同？

或者，如果这是不可能的。如何设置 Url Manager 以便它可以处理页面？使用干净的 URL。这里有些例子：

```
example.com/join_us  
example.com/join_us/contact 
example.com/news/ 
example.com/countries/us/healthcare 
```

以上是用户可以创建和更改的页面。我已经为此苦苦挣扎了很长时间。通常这将是一件容易的事情。但是 Yii 很难做到。主要是因为控制器或模块链接到路由。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:37:19.393

把它放在你的主要配置中：

```
'urlManager'=>array(
    'urlFormat'=>'path',
        'showScriptName'=>false,
        'caseSensitive'=>false,
    'rules'=>array(
        'gii'=>'gii',
        '<controller:\w+>/<id:\d+>'=>'<controller>/view',
        '<controller:\w+>/<action:\w+>/<id:\d+>'=>'<controller>/<action>', 
        '<controller:\w+>/<action:\w+>'=>'<controller>/<action>',
        '<action>'=>'site/<action>',
    ),
), 
```

这在你的`.htaccess`文件中：

```
重写引擎开启

```

如果目录或文件存在，直接使用：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

```

...否则转发给`index.php`：

```
重写规则。索引.php

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T15:16:40.230

您可以将所有内容路由到文章控制器。Yii 使用的规则是从上到下的，所以首先定义一些具体的规则，最后定义一些类似于包罗万象的规则。这应该有效：

```
// Url manager rules
// Some of example non-article rules
'login' => 'userModule/user/login'
'logout' => 'userModule/user/login'
// Below regex rule catch any string and pass it to $_GET['ariticlePath'] 
// and executes action `article` of controller `article` of module `article` 
'<ariticlePath:.+>' => 'article/article/article' 
```

在文章操作中，您可以使用 pass 做任何您想做的事情`$_GET['ariticlePath']`。

**旁注**：为避免内容的双重索引，我建议使用 meta `canonical`，因此一些可能带有查询字符串的虚假 URL 或某些用户可能输入的任何内容，不会被谷歌视为重复内容。

**编辑：**正如烧酒所建议的，`articlePath`也可以绑定为动作参数：

```
...
public function actionArticle($articlePath)
... 
```

# python - 在 Python 中使用控制台中的断点进行调试

> ID：15569151
> 
> 赞同：9
> 
> 时间：2013-03-22T11:23:34.473
> 
> 标签：python, debugging, matlab, ipython

我正在尝试从 Matlab 迁移到 python。Matlab 的优点之一是，在调试时，我可以在某些代码中设置断点，然后执行一些操作以从命令行调用该代码。使用 PyCharm + IPython 我还没有找到在 Python 中执行此操作的方法。看来我必须在调试模式下运行整个脚本才能进行任何调试，而不是能够通过一个简单的命令来进行。我想我可以用我感兴趣的命令编写一个单行脚本，但似乎应该有更好的方法。这样做的 Python 方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T11:25:54.703

尝试使用[python 调试器](http://docs.python.org/2/library/pdb.html)

```
b(reak) [[filename:]lineno | function[, condition]] 
```

或者

```
pdb.set_trace(); 
```

更详细的教程可以在[这里找到](http://pymotw.com/2/pdb/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-14T09:07:00.920

我想推荐使用[Python Tools for Visual Studio](http://pytools.codeplex.com)。它是免费和开源的，虽然 Visual Studio 本身显然不是开源的，但有一个（[“PTVS Integrated”](https://pytools.codeplex.com/wikipage?title=PTVS%20Installation)）附带一个免费且功能强大的 Visual Studio 版本，允许商业使用。[此外，大多数学术机构的学生和工作人员都可以通过Dreamspark](https://www.dreamspark.com/)免费访问 Visual Studio Ultimate 。

如果您的程序在断点处停止，您可以打开“Python Debug Interactive”（从工具->python 工具），这将打开一个交互式 python shell，可以访问断点处程序命名空间中可用的所有变量，在与您在 Matlab 中执行的方式相同。

将鼠标悬停在源代码中的变量上也会显示值，调出“locals”窗口或多或少模拟了 Matlab 中的工作区查看器，您还可以“观察”特定变量。我不知道通过这个界面编辑变量是否安全，请谨慎使用！

不幸的是，PTVS 没有嵌套断点，这在 Matlab 调试器中是一个非常有用的功能。因此，如果您在断点处停止并从调试交互式窗口调用方法，则该方法中的任何断点都将不起作用。请参阅[此相关问题](https://stackoverflow.com/questions/20198589/is-it-possible-to-debug-a-method-called-from-the-interactive-window-in-ptvs)。

与 Matlab 或 ipython 相比，调试 shell 中基于箭头键的命令历史记录相当原始，而且 Intellisense 不如原生 .net 语言好，但我在过去半年或所以现在，除了出色的文档之外，我真的不觉得我从 Matlab 中缺少太多东西。

要注意的另一件事是，在调试模式下的代码执行性能要慢得多，所以我建议在没有调试模式的情况下运行代码（使用“Ctrl+F5”而不是“F5”）以获得最佳性能，或者如果您需要断点和良好的性能，则可以使用新的[混合模式调试器。](https://pytools.codeplex.com/wikipage?title=Mixed-mode%20debugging)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-06T19:18:04.177

你试过蜘蛛？？？这是一个与 Matlab 非常相似的开源 IDE。它还提供了您想要的调试器。 [https://code.google.com/p/spyderlib/](https://code.google.com/p/spyderlib/)

PS：我也在迁移到 python，但我正在避免这样的事情，因为我想从一个空的头脑开始。:) 但我读了很多从 Matlab 到 Numpy 的文本......

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-12T15:24:49.750

我已经从 matlab 和 R 转移到 python。我尝试了不同的编辑器，所以我可以给你一些建议。

1- Spyder 更接近于 matlab 但我的印象是它不是很好。当我开始使用大量数据运行长时间模拟时，它经常崩溃。如果您是 python 新手，我建议您先使用这个，然后再使用其他东西。

2-emacs python模式。效果很好。在我看来，如果你不熟悉 python，它很难配置，可能不是最好的选择。

3-pycharm。我刚开始用pycharm，感觉很好用（这让我想起了我的Rstudio）。我不认为这支持像 spyder 或 emacs 中那样的交互式控制台。您仍然可以在调试模式下获得类似的东西

4- 很多人喜欢 ipython notebook，但我认为这不是长代码的好选择。如果您想要一些易于可视化的东西，那就太好了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T11:32:41.920

既然你提到你正在使用`ipython`，你也可以检查一下`ipdb`。

您必须先通过`pip`或安装它`easy_install`。ETC：

```
pip install ipdb 
```

用法与pdb相同。ipython 控制台将弹出您放置`ipdb.set_trace()`的位置，您可以从中检查/更改本地全局变量，检查它们的文档和类型，进入传入函数的代码（使用“s”，您将转到 的定义`code123()`）等。

```
import ipdb;

code000()
ipdb.set_trace();
code123() 
```

还有一个关于如何`?`从 ipython 获取功能的提示（关于在调试器中获取函数和模块的文档）。[这个答案](https://stackoverflow.com/a/12480710/1214214)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-16T20:35:27.110

**在使用 pdb.set_trace()**的控制台**创建函数**中，然后使用要调试的函数。

 **```
>>> import pdb

>>> def f():
...     pdb.set_trace()
...     my_function()
... 
```

然后调用创建函数：

```
>>> f()
> <stdin>(3)f()
(Pdb) s
--Call--
> <stdin>(1)my_function()
(Pdb) 
```

调试愉快:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-07T16:18:45.463

要在 python3.7+ 中输入永久断点，请`breakpoint()`在源文件中插入表达式。不再[需要导入任何东西，甚至`pdb`](https://stackoverflow.com/a/20547145/2987828). 在非编译的 Matlab 中，等价于`breakpoint()`语句`keyboard`。

全局情况是，在 python 的调试提示符之后`(Pdb)`（由 显示`breakpoint()`），您在*非*`!`调试命令之前添加，而在 Matlab 的调试提示符之后，您在调试命令之前添加。*`K>``db`*

 *我也在从 Matlab 迁移到 Python。我习惯在里面调试`matlab -nodisplay`，现在在没有IDE的情况下切换到python3.10。这些非常相似。所以我会继续这个调试相关的罗塞塔石碑。

`tb`您可以使用命令或`b`从该`(Pdb)`提示符（或在您的文件中）创建其他断点`$HOME/.pdbrc`。作为他们的 Matlab 对应物`dbstop`，您可以将它们设置为另一个文件、另一行并让它们成为有条件的。

这是一个简短的罗塞塔石碑：

| Python | python的可用快捷方式 | MATLAB |
| --- | --- | --- |
| `breakpoint()` |  | `keyboard` |
| `where` | `w` | `dbstack` |
| `cont` | `c` | `dbcont` |
| `up` | `u` | `dbup` |
| `down` | `d` | `dbdown` |
| `step` | `s` | `dbstep` |
| `next` | `n` | `dbnext` |
| `print`表达 | `p`表达 | 表达 |
| `!nonlocal` 变种；变种= |  | 变量= |
| `break` | `b` | `dbstop`和`dbstatus` |
| `clear` | `cl` | `dbclear` |
| `list` | `l` | `dbtype` |
| `display` | `d` | 可变窗口 |

Matlab 没有等价物：

*   `ignore` np（第n个断点只会在第p次执行后触发提示）
*   `prettyprint`表达式（快捷方式`pp`：）
*   `jump`代码行号（快捷方式`j`：）

我仍然不知道 Python 在调试时是否有任何可用的[`save`and`load`](https://stackoverflow.com/q/2960864/2987828)、`evalin(caller,expr)`和 plots 等价物。***

# c++ - 如何使用 wstring 重命名文件？

> ID：15569155
> 
> 赞同：5
> 
> 时间：2013-03-22T11:24:03.990
> 
> 标签：c++, visual-c++

如何在 C++ 中重命名文件？

```
rename(tempFileName.c_str(), tempFileName.c_str()+"new.txt"); 
```

但`tempFileName`属于类型`std::wstring`。但是`rename()`函数只接受`const char*`参数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T11:27:38.213

在 Visual C++ 中，rename() 的宽字符版本是 _wrename()。这不是便携式的，但您可能不在乎。此外，你不能像这样添加原始字符串指针，你想要这样的东西（未经测试）：

```
std::wstring newName(tempFileName);
newName += L"new.txt";
_wrename(tempFileName.c_str(), newName.c_str()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T11:27:55.157

使用 时`Visual Studio`，您通常使用宽字符串。为了重命名文件，你可以使用`MoveFileEx`-function，你可以像这样重命名文件。

```
std::wstring newFilename = tempFileName.c_str();
newFilename += _T("new.txt");
if(!MoveFileEx(tempFileName.c_str(), newFilename.c_str(), flags )){
//error handling if call fails
} 
```

有关文档，请参见[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365240%28v=vs.85%29.aspx)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-22T11:27:27.247

由于您的目标是 Windows，请改用该[`_wrename()`](http://msdn.microsoft.com/en-us/library/zw5t957f%28v=vs.100%29.aspx)函数。

# javascript - 网址解码 - 不起作用

> ID：15569159
> 
> 赞同：0
> 
> 时间：2013-03-22T11:24:21.760
> 
> 标签：javascript, urlencode, bookmarklet, urldecode

为什么以下解码脚本不起作用？原始代码似乎运行得很好。

```
javascript:(function(s){try{s=document.selection.createRange().text}catch(_)  {s=document.getSelection()}prompt('State the question and answer below.','Q.' s '')}) 
```

原始代码：

```
javascript:%28function%28s%29%7Btry%7Bs=document.selection.createRange%28%29.text%7Dcatch%28_%29%7Bs=document.getSelection%28%29%7Dprompt%28%27State the question and answer below.%27,%27Q.%27+s+%27%27%29%7D%29%28%29 
```

首先十分感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:30:08.043

它将符号解码`+`为一个空格，试试这个：

```
javascript:(function(s){try{s=document.selection.createRange().text}catch(_)  {s=document.getSelection()}prompt('State the question and answer below.','Q.'+s+'')}) 
```

区别：改成`' s '`这个`'+s+'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:30:55.330

不要取消转义 + 符号并将 () 添加到末尾：

```
javascript:(function(s){try{s=document.selection.createRange().text}catch(_)  {s=document.getSelection()}prompt('State the question and answer below.','Q.' s '')})
should be
javascript:(function(s){try{s=document.selection.createRange().text}catch(_){s=document.getSelection()}prompt('State the question and answer below.','Q.'+s+'')})() 
```

# java - 我在我的项目中使用列表类，它不断给出下面提到的错误。

> ID：15569164
> 
> 赞同：0
> 
> 时间：2013-03-22T11:24:42.890
> 
> 标签：java, eclipse, list

我在我的项目中使用列表类，它不断给出下面提到的错误。我尝试过使用新的 Eclipse 和新的工作区，但同样的问题。在自动导入中选择了 java.util.List。在 Eclipse 中将 JRE 系统库移至顶部。

这个问题有什么解决办法吗？

HTTP 状态 500 -

* * *

类型异常报告

信息

描述 服务器遇到一个内部错误 () 阻止它完成这个请求。

例外

org.apache.jasper.JasperException：无法为 JSP 编译类：

生成的java文件中的第0行发生错误Enumeration类型不是通用的；它不能用参数参数化

生成的java文件中的第13行发生错误列表类型不是通用的；它不能用参数参数化

生成的java文件中的第18行发生错误List类型不是通用的；它不能用参数参数化

堆栈跟踪： org.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:97) org.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:330) org.apache.jasper.compiler.JDTCompiler.generateClass( JDTCompiler.java:457) org.apache.jasper.compiler.Compiler.compile(Compiler.java:374) org.apache.jasper.compiler.Compiler.compile(Compiler.java:352) org.apache.jasper.compiler。 Compiler.compile(Compiler.java:339) org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:594) org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:344) org.apache.jasper。 servlet.JspServlet.serviceJspFile(JspServlet.java:390) org.apache.jasper.servlet.JspServlet.service(JspServlet.java:333) javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

note Apache Tomcat/7.0.14 日志中提供了根本原因的完整堆栈跟踪。

* * *

Apache Tomcat/7.0.14

# c# - 为什么 GC 不收集未引用的对象？

> ID：15569165
> 
> 赞同：3
> 
> 时间：2013-03-22T11:24:45.513
> 
> 标签：c#, garbage-collection

也许是我，但我想知道这种（奇怪的）行为。

考虑下面的代码片段，它是说明效果的最小控制台程序。

```
class MyClass { }

class Program
{
    static void Main(string[] args)
    {
            var x = new MyClass();
            var y = new MyClass();

            x = null;
            GC.Collect();

            Console.ReadKey();
    }
} 
```

当程序因按键而暂停时（或也通过放置断点），内存分析器显示仍有两个“MyClass”实例被引用。

`GC.Collect()`没有帮助，也没有将程序作为“Release”运行。

`MyClass`不应该尽快收集未引用的实例，至少通过强制 GC 收集？

注意：较大的控制台应用程序涉及一堆产生数据的线程，而类似 MyClass 的实例充当消费者。这些实例是通过 引用的`WeakReference`，但这似乎不是问题。问题是我无法通过在 Main 方法中运行我的所有测试生命周期来丢弃消费者。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:29:47.660

`GC.Collect()`异步运行。[为了同步运行它，](https://stackoverflow.com/q/748777/1156119)您需要调用：

```
GC.Collect();
GC.WaitForPendingFinalizers(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T11:28:31.633

GC.Collect(); 不保证立即完成，它会启动一个后台线程并立即返回，因此在分析器检查它的那一刻，它可能不会被收集。

# qt - 不同windows版本下qt中使用-directwrite

> ID：15569167
> 
> 赞同：0
> 
> 时间：2013-03-22T11:24:46.377
> 
> 标签：qt, windows-xp, directwrite

再会！

我正在使用 Qt 4.8.4，使用 -directwrite 编译。它需要DWrite.dll，它只能在Windows Vista SP2 及更高版本下运行，并且程序不能在Windows XP 下运行。

如何解决这个问题？

我可以编译 Qt 以便它在 Windows 7 中需要 DWrite.dll 而在 Windows XP 中不需要吗？还有其他方法吗？我是否必须为不同的 Windows 版本做出不同的分配？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T12:01:52.830

如果您已使用`directwrite`库编译，则在尝试部署时将需要 Qt 库。您可以在`.pro`文件中执行特定于平台的包含和要求，但您需要进行一些手动更改才能使其正常工作。

# angularjs - 我可以将服务注入 AngularJS 中的指令吗？

> ID：15569168
> 
> 赞同：236
> 
> 时间：2013-03-22T11:24:46.887
> 
> 标签：angularjs

我正在尝试将服务注入如下指令：

```
 var app = angular.module('app',[]);
 app.factory('myData', function(){
     return {
        name : "myName"
     }
 });
 app.directive('changeIt',function($compile, myData){
    return {
            restrict: 'C',
            link: function (scope, element, attrs) {
                scope.name = myData.name;
            }
        }
 }); 
```

但这是给我一个错误`Unknown provider: myDataProvider`。有人可以查看代码并告诉我我是否做错了什么？

* * *

## 回答 #1

> 赞同：389
> 
> 时间：2013-03-22T14:59:27.710

您可以对指令进行注入，它看起来就像在其他任何地方一样。

```
app.directive('changeIt', ['myData', function(myData){
    return {
        restrict: 'C',
        link: function (scope, element, attrs) {
            scope.name = myData.name;
        }
    }
 }]); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-03-22T11:47:29.673

将指令定义从 更改`app.module`为`app.directive`。除此之外一切看起来都很好。 ~~顺便说一句，您很少需要将服务注入指令。如果您将服务（通常是数据源或模型）注入指令（它是视图的一部分），则您正在创建视图和模型之间的直接耦合。您需要通过使用控制器将它们连接在一起来将它们分开。~~

它工作正常。我不确定你在做什么是错误的。这是它工作的一部分。

[http://plnkr.co/edit/M8omDEjvPvBtrBHM84Am](http://plnkr.co/edit/M8omDEjvPvBtrBHM84Am)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-08-26T08:25:26.480

您还可以使用 $inject 服务来获取您喜欢的任何服务。如果我不提前知道服务名称但知道服务接口，我会发现这很有用。例如，将表插入 ngResource 端点或与任何 api 端点交互的通用删除记录按钮的指令。您不想为每个控制器或数据源重新实现 table 指令。

`template.html`

```
<div my-directive api-service='ServiceName'></div> 
```

`my-directive.directive.coffee`

```
angular.module 'my.module'
  .factory 'myDirective', ($injector) ->
    directive = 
      restrict: 'A'
      link: (scope, element, attributes) ->
        scope.apiService = $injector.get(attributes.apiService) 
```

现在您的“匿名”服务完全可用。如果是 ngResource 例如，您可以使用标准的 ngResource 接口来获取您的数据

例如：

```
scope.apiService.query((response) ->
  scope.data = response
, (errorResponse) ->
  console.log "ERROR fetching data for service: #{attributes.apiService}"
  console.log errorResponse.data
) 
```

我发现这种技术在制作与 API 端点交互的元素时非常有用。

# ruby-on-rails - 从 mongoid 标准中获取类名

> ID：15569170
> 
> 赞同：0
> 
> 时间：2013-03-22T11:24:48.873
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, mongoid

```
irb(main):019:0> a = Admin.first
=> #<Admin _id: 514b318da61654dd05000002, email: "email@email.com", encrypted_password: "$2a$10$b.cWtfPNgUcCubJRX2vjAO6vEsds9OTGO2tn6Lfz2cBU.mwTYsHw.">

irb(main):020:0> a.class.name
=> "Admin"

irb(main):021:0> a = Admin.all
=> #<Mongoid::Criteria
  selector: {}
  options:  {}
  class:    Admin
  embedded: false>

irb(main):022:0> a.class.name
=> "Mongoid::Criteria" 
```

如何在**“Mongoid::Criteria”类中获取****模型名称**？

 **谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T11:50:13.790

你可以这样做：

```
a.klass   #=> Admin
or
a.klass.name #=> "Admin" 
```**

# php - 我在 sendmail 功能中获得成功，但在 gmail 收件箱中没有收到邮件

> ID：15569172
> 
> 赞同：0
> 
> 时间：2013-03-22T11:24:49.430
> 
> 标签：php, email, smtp, sendmail.exe

我在我的项目中提取了 sendmail.zip 并成功运行了我的邮件功能。但是我的收件箱中没有任何邮件。我在 php.ini 文件或 sendmail.ini 文件中是否有任何错误，如果有人用详细代码解释 **我的 php.ini 代码，这将很有帮助：**

```
**[mail function]
; For Win32 only.
; http://php.net/smtp
 SMTP = localhost
; http://php.net/smtp-port
 smtp_port = 25
; For Win32 only.
; http://php.net/sendmail-from
 ;sendmail_from = me@example.com
; For Unix only.  You may supply arguments as well (default: "sendmail -t -i").
; http://php.net/sendmail-path
sendmail_path = "C:\xampp\htdocs\comment_system\sendmail\sendmail.exe-t"
; Force the addition of the specified parameters to be passed as extra parameters
; to the sendmail binary. These parameters will always replace the value of
; the 5th parameter to mail(), even in safe mode.
;mail.force_extra_parameters =
; Add X-PHP-Originating-Script: that will include uid of the script followed by the filename
mail.add_x_header = Off
; Log all mail() calls including the full path of the script, line #, to address and headers
;mail.log = "C:\xampp\apache\logs\php_mail.log"
[SQL]
; http://php.net/sql.safe-mode
sql.safe_mode = Off** 
```

* * *

**发送邮件.ini**

```
; SMTPS (SSL) support
;   auto = use SSL for port 465, otherwise try to use TLS
;   ssl  = alway use SSL
;   tls  = always use TLS
;   none = never try to use SSL

smtp_ssl=ssl

; the default domain for this server will be read from the registry
; this will be appended to email addresses when one isn't provided
; if you want to override the value in the registry, uncomment and modify

;default_domain=gmail

; log smtp errors to error.log (defaults to same directory as sendmail.exe)
; uncomment to enable logging

error_logfile=error.log

; create debug log as debug.log (defaults to same directory as sendmail.exe)
; uncomment to enable debugging

;debug_logfile=debug.log

; if your smtp server requires authentication, modify the following two lines

auth_username=example.it@gmail.com
auth_password=...............

; if your smtp server uses pop3 before smtp authentication, modify the 
; following three lines.  do not enable unless it is required.

pop3_server=
pop3_username=
pop3_password=

; force the sender to always be the following email address
; this will only affect the "MAIL FROM" command, it won't modify 
; the "From: " header of the message content

force_sender=example.it@gmail.com

; force the sender to always be the following email address
; this will only affect the "RCTP TO" command, it won't modify 
; the "To: " header of the message content

force_recipient=

; sendmail will use your hostname and your default_domain in the ehlo/helo
; smtp greeting.  you can manually set the ehlo/helo name if required

hostname= 
```

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:30:32.907

请检查您在 googlemail 中的垃圾邮件文件夹。

如果您找不到垃圾邮件文件夹，请参见此处：[https ://webmasters.stackexchange.com/questions/8393/how-to-make-gmail-spam-folder-always-visible](https://webmasters.stackexchange.com/questions/8393/how-to-make-gmail-spam-folder-always-visible)

# google-app-engine - 将 appengine 端点部署到非默认版本

> ID：15569173
> 
> 赞同：5
> 
> 时间：2013-03-22T11:24:50.197
> 
> 标签：google-app-engine, google-cloud-endpoints

根据受信任的测试人员文档，端点存在问题，导致在部署到“非默认”版本时无法创建端点。当 1.7.5 发布并且端点从受信任的测试人员升级到“实验”时，我们被告知此问题已修复，但无法包含在 1.7.5 中（出于时间原因），并将包含在下一个版本中。

好的，下一个版本已经在这里（1.7.6）但是，如果我将端点部署到非默认版本，它们不会生成。有谁知道是否需要将某些特定设置添加到 web.xml、appengine-web.xml 或其他地方？或者这只是这个功能也没有包含在 1.7.6 中。

从我的角度来看，这是必不可少的。我有一个基于 requestfactory 的 Android 应用程序。如果我替换我的默认版本，该应用程序将停止工作。我需要部署到一个单独的版本，部署一个指向此服务器版本的新 Android 应用程序版本，并且在大多数用户更新他们的 Android 应用程序后将其设置为默认值。

感谢您对此的任何提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:14:07.703

目前没有预计到达时间，但您可以在[此处](https://code.google.com/p/googleappengine/issues/detail?id=9147)关注跟踪错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-13T21:06:48.930

# jquery - 将多个无线电控制组对齐到左侧具有相同的距离

> ID：15569175
> 
> 赞同：1
> 
> 时间：2013-03-22T11:24:54.623
> 
> 标签：jquery, css, jquery-mobile

我有几个无线电控制组，它们彼此下方并动态创建。到目前为止，他们到左边的距离是由他们的传说文本的长度决定的，看起来很讨人喜欢。

```
 <div id="datum_grp" data-role="fieldcontain" data-type="horizontal"><a class="grpLegend">Datum:</a><fieldset id="datum_1_fields" data-role="controlgroup" data-type="horizontal" class="forceinline"></fieldset><fieldset id="datum_2_fields" data-role="controlgroup" data-type="horizontal" class="forceinline"></fieldset></div>
    <div id="zeit_grp" data-role="fieldcontain"><a class="grpLegend">Stunden:</a><fieldset id="zeit_1_fields" data-role="controlgroup" data-type="horizontal" class="forceinline"></fieldset><fieldset id="zeit_2_fields" data-role="controlgroup" data-type="horizontal" class="forceinline"></fieldset></div> 
```

这填充了控制组：

```
for (var iFirstDigit = 0; iFirstDigit < 3; iFirstDigit++) {
            // fill radio controlgroup for date: first digit
            $('#datum_1_fields').append('<input type="radio" name="datum_1" id="' + iFirstDigit + '" display_text="' + iFirstDigit + '"></input><label for="' + iFirstDigit + '">' + iFirstDigit + '</label>').controlgroup('refresh');
            $('#datum_grp').trigger('create');
        }
        for (var iSecondDigit = 0; iSecondDigit < 10; iSecondDigit++) {
            $('#datum_2_fields').append('<input type="radio" name="datum_2" id="' + iSecondDigit + '" display_text="' + iSecondDigit + '"></input><label for="' + iSecondDigit + '">' + iSecondDigit + '</label>').controlgroup('refresh');
            $('#datum_grp').trigger('create');
        }
for (var iFirstDigit = 0; iFirstDigit < 3; iFirstDigit++) {
            $('#zeit_1_fields').append('<input type="radio" name="zeit_1" id="' + iFirstDigit + '" display_text="' + iFirstDigit + '"></input><label for="' + iFirstDigit + '">' + iFirstDigit + '</label>').controlgroup('refresh');
            $('#zeit_grp').trigger('create');
        }
        // fill radio controlgroup for hours (second digit)
        for (var iSecondDigit = 0; iSecondDigit < 10; iSecondDigit++) {
            $('#zeit_2_fields').append('<input type="radio" name="zeit_2" id="' + iSecondDigit + '" display_text="' + iSecondDigit + '"></input><label for="' + iSecondDigit + '">' + iSecondDigit + '</label>').controlgroup('refresh');
            $('#zeit_grp').trigger('create');
        } 
```

如您所见，控件组没有相同的缩进，但与它们的图例文本的长度有关。

因此，我将“宽度”应用于“grpLegend”类，希望这会将所有控制组向右移动相同数量的像素。但这并没有发生。您将如何对齐控制组以使它们都具有相同的左侧距离？

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T11:38:28.243

使用以下 CSS 对齐标签：

```
#zeit_grp a,#datum_grp a {
    width:100px;
    display:inline-block
} 
```

示例：http: [//jsfiddle.net/H5mmu/6/](http://jsfiddle.net/H5mMu/6/)

# c++ - to_string 未在范围内声明

> ID：15569179
> 
> 赞同：22
> 
> 时间：2013-03-22T11:25:08.763
> 
> 标签：c++, ubuntu, qt-creator

我试图使该`to_string(NUMBER)`功能在我的 Ubuntu 计算机上工作数周，但它永远不会在 QT 环境或其他任何地方工作。我的代码在我的 Mac osx 上完美运行，但是当我尝试在 Ubuntu 中运行它时，它抱怨`to_string`没有在范围内声明。对此的任何解决方案将不胜感激。我尝试更新 gcc 编译器，但没有解决问题。请帮忙。

我正在使用 QT Creator 4.8.1，我正在使用 C++ 和最新版本的 Ubuntu。

```
int Bint::operator*(int temp){
    Bint b(to_string(temp));
    return ((*this)*b);
} 
```

我在 pro 文件中缺少 QMAKE_CXXFLAGS += -std=c++0x 。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-22T11:28:45.037

它对您不起作用可能有不同的原因：也许您需要使用 来限定名称`std::`，或者您可能没有 C++11 支持。

如果您有 C++11 支持，则此方法有效：

```
#include <string>

int main()
{
  std::string s = std::to_string(42);
} 
```

要使用 g++ 或 clang 启用 C++11 支持，您需要传递选项`-std=c++0x`. 您还可以`-std=c++11`在这些编译器的较新版本上使用。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-08-18T01:24:48.037

您必须使用 c++11 支持编译文件

```
g++ -std=c++0x  -o test example.cpp 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-09-29T17:14:07.533

我通过将**Application.mk**中的第一行从

```
APP_STL := gnustl_static 
```

至

```
APP_STL := c++_static 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-07-20T19:46:39.473

您需要在编译器中进行一些更改。在 Dev C++ 编译器中： 1\. 转到编译器设置/编译器选项。2.点击General选项卡 3.勾选复选框（调用编译器时添加以下命令。4.写-std=c++11 5.点击Ok

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-06-15T16:27:02.080

如上所述，此错误是由于编译器未使用 c++11 或更高标准造成的。此答案适用于**Windows 10**。

**对于代码块版本 17 中的 c++11 及更高版本的标准支持：** 

1.  单击工具栏中的**设置**。

2.  出现一个下拉菜单。选择**编译器**选项。

3.  选择**全局编译器设置**。

4.  在第二部分这个新窗口的工具栏中，选择**编译器设置**。

5.  然后在下面的工具栏中选择**编译器标志**选项。

6.  展开**常规**选项卡。检查您希望编译器遵循的**C++ 标准。**

7.  单击**确定**。

**对于那些试图在 Sublime 文本中获得 C++11 支持的人。** 

1.  下载**mingw 编译器版本 7**或更高版本。在低于此的版本中，使用的默认 c++ 标准是 c++98，而在高于 7 的版本中，使用的默认标准是 c++11。

2.  复制主 C 盘中的文件夹。它不应**位于**C 盘中的任何其他文件夹中。

3.  **将文件夹重命名为 MinGW**。此名称不区分大小写，因此它应该是 mingw 的任何变体，并且不得在名称中包含任何其他字符。

4.  然后转到**环境变量**并编辑路径变量。添加此“ **C:\mingw\bin** ”并单击“确定”。

5.  您可以在 cmd 中通过键入来检查 g++ 的版本`g++ -v`。

6.  这应该足以在 sublime 文本中启用 c++11。

如果您还想从输入文件中获取输入和输出以用于竞争性编程目的，请点击此[链接](https://www.geeksforgeeks.org/setting-up-a-c-competitive-programming-environment/)。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-06-11T17:31:44.710

```
//Try this if you can't use -std=c++11:-
int number=55;
char tempStr[32] = {0};
sprintf(tempStr, "%d", number); 
```

# c# - 什么是等效的 lambda？

> ID：15569184
> 
> 赞同：1
> 
> 时间：2013-03-22T11:25:16.620
> 
> 标签：c#, python, linq, lambda

我正在尝试使用 lambda 模拟以下 python 代码：

```
checkName = lambda list, func: func([re.search(x, name, re.I) for x in list])

if checkName(["(pdtv|hdtv|dsr|tvrip).(xvid|x264)"], all) and not checkName(["(720|1080)[pi]"], all):
  return "SDTV"
elif checkName(["720p", "hdtv", "x264"], all) or checkName(["hr.ws.pdtv.x264"], any):
  return "HDTV"
else:
  return Quality.UNKNOWN 
```

我为长格式创建了以下 C# 代码，但我确信可以使用 lambda 表达式来缩短它：

```
if (CheckName(new List<string> { "(pdtv|hdtv|dsr|tvrip).(xvid|x264)" }, fileName, true)  == true & 
    CheckName(new List<string> { "(720|1080)[pi]" }, fileName, true) == false)
{
   Quality = Global.EpisodeQuality.SdTv;
}

private bool CheckName(List<string> evals, string name, bool all)
{
  if (all == true)
  {
    foreach (string eval in evals)
    {
      Regex regex = new Regex(eval, RegexOptions.IgnoreCase);
      if (regex.Match(name).Success == false)
      {
        return false;
      }
    }

    return true;
  }
  else
  // any
  {
    foreach (string eval in evals)
    {
      Regex regex = new Regex(eval, RegexOptions.IgnoreCase);
      if (regex.Match(name).Success == true)
      {
        return true;
      }
    }
    return false;
  }
} 
```

任何帮助将不胜感激，以提高我的理解！我确信有一种更短/更简单的方法！

所以在玩了一些之后，我把它减少到：

```
 private static bool CheckName(List<string> evals,
                           string name,
                           bool all)
    {

        if (all == true)
        {
            return evals.All(n => 
            {
                return Regex.IsMatch(name, n, RegexOptions.IgnoreCase);
            });
        }
        else
        // any
        {
            return evals.Any(n =>
            {
                return Regex.IsMatch(name, n, RegexOptions.IgnoreCase);
            });
        }
    } 
```

但是必须有一个使用像 python 代码这样的 Func 的等价物？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:32:54.043

像这样的东西：

```
private bool CheckName(List<string> evals, string name, bool all)
{
    return all ? !evals.Any(x => !Regex.IsMatch(name, x, RegexOptions.IgnoreCase)) 
                : evals.Any( x => Regex.IsMatch(name, x, RegexOptions.IgnoreCase));
} 
```

功能：

```
List<string> list = new List<string>();

Func<string, bool, bool> checkName = (name, all) => all
    ? !list.Any(x => !Regex.IsMatch(name, x, RegexOptions.IgnoreCase))
    : list.Any(x => Regex.IsMatch(name, x, RegexOptions.IgnoreCase));

checkName("filename", true) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:30:11.780

```
private bool CheckName(string eval, string name)
{
    return new Regex(eval, RegexOptions.IgnoreCase).Match(name).Success;
}

private bool CheckName(List<string> evals, string name, bool all)
{
  if (all == true)
  {
    return !evals.Any(eval => !CheckName(eval, name));
  }
  else
  {
    return evals.Any(eval => CheckName(eval, name));
  }
} 
```

# jquery - 通过 jquery ajax 分配的 django 模型。'unicode' 对象没有属性 'objects'

> ID：15569186
> 
> 赞同：0
> 
> 时间：2013-03-22T11:25:22.303
> 
> 标签：jquery, ajax, django, django-models

我在使用 Django 时遇到以下错误。

***'unicode' 对象没有属性 'objects'***

我认为问题出在我的**views.py**
中，我通过jquery ajax传递了url，似乎它无法将url部分作为模型类的对象。

网址是**domain.com/one/two/three**

**views.py**中的代码

 **```
from lala.models import *

def function(request, one, two)
    foo = one.objects.raw('SELECT * FROM ...)
... 
```

**一个**被视为没有模型对象，我无法分配它。

**urls.py**中的代码

 **```
url(r'(?P<one>\bla\d{2})/(?P<two>[\w-]+)/three$', views., name='qwer'), 
```

...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:40:16.607

url 是一个字符串。第*一个*和*两个*参数是您的 url 的子字符串（如您的 urls.py 中所述）。

如果您希望您的*一个*参数获取模型名称，则必须手动检查它。

```
def function(request, one, two):
    if one == 'MyModel':
        MyModel.objects.raw('SELECT * FROM ...') 
```****

# php - 致命错误：调用未定义函数 svn_auth_set_parameter() svn PHP

> ID：15569195
> 
> 赞同：1
> 
> 时间：2013-03-22T11:25:55.907
> 
> 标签：php, windows, svn, dll

您好我正在尝试`svn`从 Windows 64 位连接。我收到了这个错误 `Call to undefined function svn_auth_set_parameter()`

我搜索了互联网并通过指导

[http://www.php.net/manual/en/svn.installation.php](http://www.php.net/manual/en/svn.installation.php)

我下载并放置`php_svn.dll`在文件夹中。我也下载并放置`C:\Windows\System32``C:\Windows\SysWOW64`

intl3_svn.dll、libdb43.dll、libapr.dll、libapriconv.dll、libaprutil.dll、libeay32.dll、msjava.dll、php5ts.dll、ssleay32.dll、vsinit.dll、msvcr71.dll、MSVCP71.DLL

文件`C:\Windows\System32`夹内的文件。但错误仍然存​​在。

我试图运行`regsvr32 php_svn.dll`，但它也给出了一个错误。

我在这里错过了什么吗，我也重新启动了几次 Windows。

请帮忙 。提前致谢 。

# android - Android WebView CSS 浮动

> ID：15569196
> 
> 赞同：4
> 
> 时间：2013-03-22T11:26:04.757
> 
> 标签：android, webview, floating

我们的团队现在真的很挣扎。我们有一个客户，他给了我们一些 HTML 文件。在这些 HTML 文件中，有一些文本和一个图像，以 50% 的宽度向右浮动。在移动设备和大多数平板电脑上它都很好用，但在三星 Galaxy 10.1 或 Galaxy 10.1n 上却不行。它在模拟器上运行良好，即使是 10 英寸设备。

我们的问题是，`WebView`将图像放在文本之上。它忽略了浮动。不幸的是，我们不能自己更改 HTML 文件，因为这些资源在 iPhone 和 web 应用程序上使用。只有安卓有这个问题。

有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-19T01:40:00.823

我们也遇到过同样的问题，包括三星 Galaxy S4+ 是唯一一款无法像其他测试手机一样对传统 CSS（如浮动、位置、顶部等）做出一致响应的 Android 手机的几个奇怪问题......

我发现始终解决这些问题的唯一方法是使用 TABLES 和 % 作为宽度来控制可调整大小的布局。

是的，我知道表格已被弃用。但是它们具有非常有用的默认属性，并且仍然没有 HTML5 等效项在设备之间保持一致作为可信赖表......

# extjs - 如何在 Ext.grid.panel 中定义视图

> ID：15569202
> 
> 赞同：3
> 
> 时间：2013-03-22T11:26:16.280
> 
> 标签：extjs, extjs4.1, extjs-mvc

我想修改网格的视图，我从基础开始（即在我定义自己的视图之前）。但是有些我什至无法将对象分配给视图属性。请问，有人知道如何创建视图吗？我试着跟随。

例子会很棒。

```
var viewConfig = {emptyText: "My msg",stripeRows: false};

this.grid = Ext.create('Ext.grid.Panel', {
            id: "t-"+this.gridName+"-grid",
            header: true,
            title: gridTitle,
            border: false,
            store: store,            
            columns: cm,
            selModel: sm,
            loadMask: true,
            //viewConfig: viewConfig, // works fine
            //view: new Ext.view.Table() ,//Ext.grid.View(),//Ext.grid.View(viewConfig ),
            provider: this.page.provider
        }); 
```

如果我取消注释“view：new Ext.view.Table()”行，那么它会引发错误并停止一切。我一直在评论，在创建网格后，我可以使用 this.grid.getView() 属性访问视图。但是如何创建自己的视图对象（我可以在其中分配自定义模板）？？？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:23:36.910

从文档：

> 这是 Ext.grid.View 和 Ext.tree.View 的基类，不能直接使用。

如果您确实想自己创建一个，则需要配置以下**必需**选项。

```
itemSelector : String
store : Ext.data.Store
tpl : String/String[] 
```

查看[文档](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.view.View)如何创建您的自定义视图。 *祝你好运！如果您需要任何帮助，请随时询问；）*

```
Ext.define('Image', {
    extend: 'Ext.data.Model',
    fields: [
        { name:'src', type:'string' },
        { name:'caption', type:'string' }
    ]
});

Ext.create('Ext.data.Store', {
    id:'imagesStore',
    model: 'Image',
    data: [
        { src:'http://www.sencha.com/img/20110215-feat-drawing.png', caption:'Drawing & Charts' },
        { src:'http://www.sencha.com/img/20110215-feat-data.png', caption:'Advanced Data' },
        { src:'http://www.sencha.com/img/20110215-feat-html5.png', caption:'Overhauled Theme' },
        { src:'http://www.sencha.com/img/20110215-feat-perf.png', caption:'Performance Tuned' }
    ]
});

var imageTpl = new Ext.XTemplate(
    '<tpl for=".">',
        '<div style="margin-bottom: 10px;" class="thumb-wrap">',
          '<img src="{src}" />',
          '<br/><span>{caption}</span>',
        '</div>',
    '</tpl>'
);

var theView = Ext.create('Ext.view.View', {
    store: Ext.data.StoreManager.lookup('imagesStore'),
    tpl: imageTpl,
    itemSelector: 'div.thumb-wrap',
    emptyText: 'No images available'
});

var grid = Ext.create('Ext.grid.Panel', {
    id: "t-"+this.gridName+"-grid",
    header: true,
    title: gridTitle,
    border: false,
    store: store,            
    columns: cm,
    selModel: sm,
    loadMask: true,
    view: theView,
    provider: this.page.provider,
    renderTo: Ext.getBody()
});
//not tested but should work 
```

# android - 在按钮单击时随机更改图像并触发相应的侦听器

> ID：15569203
> 
> 赞同：0
> 
> 时间：2013-03-22T11:26:22.723
> 
> 标签：android, random, onclick, imageview, listener

我有一个要求，我有 5 `ImageButtons`。我想在这 5 个上`ImageButtons`随机加载一些 60 - 80 个图像。我怎样才能做到这一点？

```
public void setRandomImages(int n){
    Random rand = new Random();
    int x = rand.nextInt(5)+1;

    switch (x) {
    case 1:
        bt1.setVisibility(View.VISIBLE);
        bt1.setBackgroundColor(Color.RED);
        bt1.setOnClickListener(new listener());

        bt2.setVisibility(View.VISIBLE);
        bt2.setBackgroundColor(Color.BLACK);
        bt2.setOnClickListener(new listener());

        bt3.setVisibility(View.VISIBLE);
        bt3.setBackgroundColor(Color.BLUE);
        bt3.setOnClickListener(new listener());

        bt4.setVisibility(View.VISIBLE);
        bt4.setBackgroundColor(Color.GREEN);
        bt4.setOnClickListener(new listener());

        bt5.setVisibility(View.VISIBLE);
        bt5.setBackgroundColor(Color.YELLOW);
        bt5.setOnClickListener(new listener());
        break;

    default:
        break;
    } 
```

同样`onclick`对于相应的加载图像，我想播放一些声音，因为我可以使用处理程序。

我想知道的是**如何将相应的侦听器随机引用到选定的图像。**

IE，

**如果我选择一个图像，我将播放声音，然后在其位置加载不同的图像，并重复上述所有过程。**

我知道这很混乱，但是任何了解我的要求的人都会建议/帮助我。

编辑：

RandomImagePicker.java

```
public class RandImagePicker extends Activity {

Handler handler = new Handler();
int resId1,resId2,resId3,resId4;
List<ImageSound> ImageSoundObjs = new ArrayList<ImageSound>();
ImageView iv5;
ImageView img1,img2,img3,img4;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_rand_image_picker);

    iv5 = (ImageView)findViewById(R.id.image5);

    createImageAndSoundObjects();
    showObjects();
}

private void createImageAndSoundObjects() {
    ImageSound obj;

    TypedArray imgs = getResources().obtainTypedArray(R.array.random_imgs);
    for(int i = 0 ; i <= 12 ; i++) {

        obj = new ImageSound(imgs.getResourceId(i, 1));
        ImageSoundObjs.add(obj);
    }
}

private void showObjects() {
    Random rand = new Random();
    img1 = (ImageView) findViewById(R.id.image1);
    img2 = (ImageView) findViewById(R.id.image2);
    img3 = (ImageView) findViewById(R.id.image3);
    img4 = (ImageView) findViewById(R.id.image4);

    for(int i = 0 ; i <= 12 ; i++) {
        int  n1 = rand.nextInt(12)+1;
        int  n2 = rand.nextInt(12)+1;
        int  n3 = rand.nextInt(12)+1;
        int  n4 = rand.nextInt(12)+1;

        resId1 = ImageSoundObjs.get(n1).getResourceId();
        img1.setImageResource(resId1);
        img1.setOnClickListener(new Listener());

        resId2 = ImageSoundObjs.get(n2).getResourceId();
        img2.setImageResource(resId2);
        img2.setOnClickListener(new Listener());

        resId3 = ImageSoundObjs.get(n3).getResourceId();
        img3.setImageResource(resId3);
        img3.setOnClickListener(new Listener());

        resId4 = ImageSoundObjs.get(n4).getResourceId();
        img4.setImageResource(resId4);
        img4.setOnClickListener(new Listener());
    }

}

class Listener implements OnClickListener{

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

        handler.postDelayed(new Runnable() {

            @Override
            public void run() {
                // TODO Auto-generated method stub

                img1.setVisibility(View.VISIBLE);
                img2.setVisibility(View.VISIBLE);
                img3.setVisibility(View.VISIBLE);
                img4.setVisibility(View.VISIBLE);
                showObjects();
                iv5.setVisibility(View.GONE);
            }
        }, 1000);

        img1.setVisibility(View.GONE);
        img2.setVisibility(View.GONE);
        img3.setVisibility(View.GONE);
        img4.setVisibility(View.GONE);

        if (v.getId() == R.id.image1) {
            iv5.setVisibility(View.VISIBLE);
            iv5.setImageResource(resId1);
        } else if (v.getId() == R.id.image2) {
            iv5.setVisibility(View.VISIBLE);
            iv5.setImageResource(resId2);
        } else if (v.getId() == R.id.image3) {
            iv5.setVisibility(View.VISIBLE);
            iv5.setImageResource(resId3);
        } else if (v.getId() == R.id.image4) {
            iv5.setVisibility(View.VISIBLE);
            iv5.setImageResource(resId4);
        }

    }

}
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.rand_image_picker, menu);
    return true;
} 
```

}

ImageSound.java

```
public class ImageSound {
int mResourceId;
ImageSound(int i) {
    mResourceId = i;
}

public int getResourceId() {
    return mResourceId;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:44:54.103

我创建了一个非常基本的示例，向您展示如何随机选择图像，这可以通过根据需要向对象添加属性来扩展，就像您的情况中的声音一样。

它只是一个 10 分钟的快速原型制作，请在此处查看。

[https://github.com/sathvik87/RandomImage](https://github.com/sathvik87/RandomImage)

# jquery - 如何在 jquery 中从 JSON 设置默认值

> ID：15569204
> 
> 赞同：0
> 
> 时间：2013-03-22T11:26:25.997
> 
> 标签：jquery, json

我已经检查了这个链接[Set radio button 'checked' in jquery based on ID](https://stackoverflow.com/questions/3121785/set-radio-button-checked-in-jquery-based-on-id)但是，似乎不太适合我。这是我的代码

```
 <label for="basic" class="basic">Gender:</label>
    <fieldset data-type="horizontal" data-role="controlgroup" data-mini="true">

    <input type="radio" name="gender" id="radio-mini-1" value="Male" checked="checked" />
    <label for="radio-mini-1">Male</label>

    <input type="radio" name="gender" id="radio-mini-3" value="Female"  />
    <label for="radio-mini-3">Female</label>
    </fieldset> 
```

和

```
 <label for="select-choice-min" class="select">Living Place:</label>
    <select name="select-choice-min" id="livingPlace" data-mini="true">
    <optgroup label="AAA">
       <option value="123">123</option>
       <option value="456">456</option>
    </optgroup>

    <optgroup label="BBB">
      <option value="789">789</option>
      <option value="246">246</option>
     </optgroup>

    </select> 
```

我可以简单地使用以下代码设置默认值吗？好像不行

```
 $("#livingPlace :selected").text(data[0].data.livingPlace);
        //$('#livingPlace option[value=data[0].data.livingPlace]').attr("selected",true);
        $("input[name=gender]:checked").val(data[0].data.gender); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:29:15.803

你可能想要

```
$('input[name=gender][value="' + data[0].data.gender + '"]').prop('checked', true); 
```

# google-chrome-extension - 当使用来自 php 的刷新时，xmlhttprequest 未触发就绪状态 3 的响应事件处理程序

> ID：15569209
> 
> 赞同：1
> 
> 时间：2013-03-22T11:26:36.780
> 
> 标签：google-chrome-extension, xmlhttprequest, cross-domain, readystate

我正在使用 xmlhttprequest 从 google chrom 扩展向远程服务器发送请求

我在 manifest.json 中设置了访问远程主机的权限

基本上它按预期工作正常。我所期望的是readystate 4，它在响应完成时被触发。

由于这是服务器端 8 到 10 秒的过程，因此我使用从服务器端到客户端的 echo 进行状态更新。

所以我使用 readyState==3 条件来显示服务器响应

但是当我测试 readystate 1 和 4 时触发事件处理程序而不是 2 和 3

这是我使用的代码

```
var wini = window.open('','');
var sta='';
var jax = new XMLHttpRequest();
jax.onreadystatechange = function() {
    sta = sta + jax.readyState + ', '
    wini.document.write(sta+'<br>');

}
jax.open("POST","http://sitename.com/subscript/?save=save&tstamp="+Math.random());
jax.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
//jax.setRequestHeader("Connection: close");
jax.send("somedata=" + encodeURIComponent(window.somedata)); 
```

***使用连接关闭。不同的结果。除了 readystate 1 没有其他人被解雇***

所以，readystates 1 和 4 工作正常，但不是 2 和 3。最需要的是 3。

代码运行实际发生的是：

1，在弹出窗口中打印，然后经过 8 到 9 秒，当就绪状态为 4

1,2

1,2,3

1,2,3,4

以上三行是一次性打印出来的。所以我假设只有在 readystate 4 时我才能从服务器获得所有响应，而不是在 readystate 为 3 时。

我在其他同源的 Web 应用程序中使用了 readystate 3，它工作并且仍在工作。

对于这个 xhr，我不知道我错过了什么。

如何在这里使用 readystate 3？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:24:57.420

最后我发现只有在 chrome 和 safari 中它不起作用，因为 chrome 正在使用 safari webkit 并且可能是 webkit 不想像其他人一样工作。

**添加了一个内容类型标题，它按预期工作**

另一个用户有类似的问题，我一直在尝试并找到以下解决方案。

因为我的解决方案解决了这两个问题，所以我正在链接我已经在其他问题中给出的答案，而不是在这里复制它。

这是我的答案。

[PHP Flush() 在 Chrome 中不起作用](https://stackoverflow.com/questions/6001628/php-flush-not-working-in-chrome/16058648#16058648)

# ios - ios应用用户认证

> ID：15569213
> 
> 赞同：-3
> 
> 时间：2013-03-22T11:26:54.920
> 
> 标签：ios, objective-c, xcode

我是 Xcode 和 Objective-C 的新手。我需要为我的 iOS 应用程序创建登录功能。当任何人在各自的字段中输入用户名和密码并点击登录时，应用程序应该与保存用户名和密码的 sqlite 数据库通信。如果用户名、密码对与数据库中的条目匹配，则用户应该能够进入下一页，否则应该显示正确的错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:45:36.057

[SDLoginKit](https://github.com/stevederico/SDLoginKit)可能是一个好的开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:37:49.857

1.  创建一个返回`boolean`结果的方法。
2.  创建一个查询，检查用户在数据库中输入的用户名和密码。
3.  如果用户名和密码匹配，则方法返回`true`else 返回`false`。
4.  如果`true`，登录后将用户移动到下一个屏幕，否则显示`alert`无效凭据。

    ```
    -(BOOL)validateUser
    {
        [self openDatabase];

        BOOL isValid = FALSE;

        sqlite3_stmt *compiledStatement;

        const char *sql ="select UserId from MstUser where Username = ? and Password = ?";

        if(sqlite3_prepare_v2(mainDatabase, sql , -1, &compiledStatement, NULL)==SQLITE_OK)
        {
            sqlite3_bind_text(compiledStatement, 1, [txtUsername UTF8String], -1, SQLITE_TRANSIENT);
            sqlite3_bind_text(compiledStatement, 2, [txtPasswrod UTF8String], -1, SQLITE_TRANSIENT);
            while (sqlite3_step(compiledStatement) == SQLITE_ROW )
            {
                isValid = True;
                int userId = sqlite3_column_int(compiledStatement, 0);
            }
        }
        else
        {
            NSLog(@"Error : -------'%s'", sqlite3_errmsg(mainDatabase));
        }

        sqlite3_finalize(compiledStatement);
        sqlite3_close(mainDatabase);
        compiledStatement = nil;

        return isValid;
    }

    if ([self validateUser])
    {
        //Login user
    }
    else 
    {
        //alert to show invalid user
    } 
    ```

# asp.net - 用户代理在请求中间切换？

> ID：15569214
> 
> 赞同：8
> 
> 时间：2013-03-22T11:26:55.203
> 
> 标签：asp.net, webforms, user-agent

我在这里有一个非常奇怪的问题 - IIS 6 上的 ASP.NET 3.5 Webforms 应用程序。

效果是用户连接到我们的站点，并获得一个 ASP.NET 会话，输入一些数据，突然间，他输入的所有数据（并存储在会话中）都消失了。

错误日志向我们显示，出于某种奇怪的原因，他在我们的应用程序中工作的过程中刚刚获得了一个新会话。

从 IIS 日志中，我们看到**在单个 ASP.NET 请求**中，从用户浏览器报告的用户代理切换 - 从`MSIE+7.0`....`MSIE+8.0`这怎么可能？

日志摘录：

```
07:06:38   GET /SomePage.aspx  80 - x.x.x.139   Mozilla/4.0+ (compatible;+MSIE+7.0;+Windows+NT+5.1)   401 
07:06:38   GET /SomePage.aspx  80 DOMAIN\USERNAME  x.x.x.139  Mozilla/4.0+ (compatible;+MSIE+7.0;+Windows+NT+5.1)   200

07:06:39   GET /javascript/somefile.js 80   DOMAIN\USERNAME x.x.x.139   Mozilla/4.0+ (compatible;+MSIE+8.0;+Windows+NT+5.1)  200 
(lots more requests for .css, .js, .gif, .jpg - all with MSIE+8.0 ....) 
```

似乎对`.aspx`页面的两个请求是在`MSIE+7.0`模式下完成的，而对 CSS 和 JS 文件以及 GIF 和 JPG 图形的任何后续请求都会报告回来`MSIE+8.0`...... WTF?!?!?

不确定这是否真的是 ASP.NET 会话突然丢失的根本原因 - 但用户代理本身的切换让我们摸不着头脑......有什么想法吗？

如果这种行为不是那些“丢失会话”的根本原因 - 关于可能是什么原因的任何想法/线索？到目前为止，我无法从这里、必应、谷歌或任何其他来源挖掘任何过于有用的东西......

**更新：我**[在这个论坛帖子](http://ellislab.com/forums/viewthread/121637/)中读到，用户代理在第一个`GET`（获取`.aspx`页面）和后续`GET`请求`.css`之间不同的事实`.js`可能导致会话丢失（尽管这是一个 PHP 环境）。谁能确认这是否也适用于 ASP.NET？（或表明此陈述不正确）

如果真的是这样 - 有没有办法告诉 ASP.NET**不要**仅仅因为用户代理字符串与先前的请求不匹配而开始新的会话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:19:09.023

你在这里描述的确实听起来很奇怪。

如果没有实际看到它，很难确定发生了什么，但是（不包括 UA 欺骗）我能想到的只有一件事可以在这里起作用：兼容模式。

我不知道 IE 为不同的请求类型提供不同的 UA 字符串，即使在兼容模式下也是如此，但我想这是可能的。

但无论如何，我的建议是通过将`X-UA-Compatible`元标题添加到您的页面来防止 IE 使用兼容模式。这样的事情应该这样做：

```
<meta http-equiv="x-ua-compatible" content="IE=edge"> 
```

`<head>`将其添加到HTML 代码部分的顶部附近。

这应该会强制 IE 使用它最好的页面渲染引擎。没有更多的兼容模式。因此，如果这是您神秘地更改 UA 字符串的原因，它应该可以解决这个问题。

* * *

（当然，如果用户有一个欺骗 UA 字符串的浏览器，那么所有的赌注都会被取消。但即便如此，他们想要在会话中间这样做似乎也很奇怪）

# django - 在表单验证之前在视图中设置字段值“用户”

> ID：15569224
> 
> 赞同：2
> 
> 时间：2013-03-22T11:27:52.003
> 
> 标签：django, django-forms

我正在尝试在验证之前在视图中设置字段值“用户”，如下面的示例所示。但我仍然收到验证消息 user is required ，表明它没有被设置。我做错了什么？

谢谢，

**视图.py**

```
def add_batch(request):
    # If we had a POST then get the request post values.
    if request.method == 'POST':

        form = BatchForm(data=request.POST, initial={'user': request.user})
        # Check we have valid data before saving trying to save.
        if form.is_valid():
            # Clean all data and add to var data.
            data = form.cleaned_data
            groups = data['groups'].split(",")
            for item in groups:
                batch = Batch(content=data['content'],
                              group=Group.objects.get(pk=item),
                              user=request.user
                              )
                batch.save()
            return redirect(batch.get_send_conformation_page())
        else:
            context = {'form': form}
            return render_to_response('sms/sms_standard.html', context, context_instance=RequestContext(request)) 
```

**表格.py**

```
class BatchForm(forms.ModelForm):

    class Meta:
        model = Batch

    def __init__(self, user=None, *args, **kwargs):
        super(BatchForm, self).__init__(*args,**kwargs)
        if user is not None:
            form_choices = Group.objects.for_user(user)
        else:
            form_choices = Group.objects.all()
        self.fields['groups'] = forms.ModelMultipleChoiceField(
            queryset=form_choices
        ) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T11:41:47.840

正如[文档](https://docs.djangoproject.com/en/1.5/ref/forms/api/#dynamic-initial-values)所解释的，`initial`值不用于在表单中设置数据，它们仅用于显示初始值。

如果您不想显示用户但想自动设置，最好的做法是从 ModelForm 中完全排除用户字段，并在保存时将其设置在视图中。或者，由于您出于其他原因将其作为参数传递，您也许可以将其添加到 POST 数据中：

```
def __init__(self, user=None, *args, **kwargs):
    super(BatchForm, self).__init__(*args,**kwargs)
    if user is not None:
        if self.data:
            self.data['user'] = user 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:32:41.223

```
form = BatchForm(request.user, request.POST)
# Check we have valid data before saving trying to save.
if form.is_valid():
    [.........] 
```

# makefile - Makefile 只能在发生错误时执行代码吗？

> ID：15569228
> 
> 赞同：14
> 
> 时间：2013-03-22T11:27:54.873
> 
> 标签：makefile

在我的 Makefile 中，我有一些检查网络连接的代码。这段代码需要相当长的时间来运行，我只想在另一个目标无法构建时运行它。

# 当前的 Makefile

```
all: files network
    # compile files

files:
    # get files from network resources

network:
    # check for network connectivity
    # echo and return an error if it's not available 
```

执行顺序：

```
if not network:
    # exit with error
if not files:
    # exit with error
if not all:
    # exit with error 
```

# 所需的 Makefile

在上面的例子中，我希望`network`目标是“制造”的，只有当`files`目标未能“制造”时。

执行顺序：

```
if not files:
    if not network:
        # exit with error
if not all:
    # exit with error 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-22T11:54:33.610

恐怕递归make是你的朋友。

```
.PHONY: all
all:
    ${MAKE} files || ${MAKE} network 
```

如果`make files`成功，则您的工作已完成，退出代码为成功。失败时，退出代码为`make network`.

# apache-flex - AdvancedDataGridColumn 不如 GridColumn 先进？

> ID：15569231
> 
> 赞同：0
> 
> 时间：2013-03-22T11:27:58.043
> 
> 标签：apache-flex, datagrid, advanceddatagrid

有用的东西

```
<s:GridColumn dataField="country.code" headerText="Country Code"/> 
```

没有的东西

```
<mx:AdvancedDataGridColumn dataField="country.code" headerText="Country Code" width="50" /> 
```

我们有更多的孙子属性，比如**country.code**，我们必须使用 AdvancedDataGrid。深入研究 GridColumn 的**函数 set dataField(value:String)**，只有 Normal Grid 支持点“.”。

我们不想使用 labelFunction ，因为我们有 50 多个这样的列......如果有办法扩展 Advanced Grid Column 以支持 dot ？

你能建议一个解决方案吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T12:19:36.070

AdvancedDataGrid 是一个 mx 组件，因此它比 Spark DataGrid 更早。因此，Spark DataGrid 只是带来了新功能（与旧的 mx DataGrid 相比）。

如果您想要 ADG 中的此功能，您有两种方法：

1.  前往[Apache Flex JIRA](https://issues.apache.org/jira/browse/FLEX)并注册一个“改进”问题。*也许*你会很幸运，有人会捡起这个。但我不会指望它：ADG 是由 Adob​​e 外包的（很久以前），与其他组件相比，它是一段糟糕的代码；你不会轻易找到愿意潜入那个遗留污水池的人。
2.  把事情掌握在自己手中。克隆 Apache Flex 存储库；添加所需的功能；将您的补丁提交给 Apache Flex 社区。如果您准备好解决方案，他们会很快做出回应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T15:54:38.603

实际上，我们已将此支持添加到[AdvancedDataGrid 的扩展版本中](http://www.flexicious.com/Home/DemoFlex4)。解决方案真的很简单，只需扩展 AdvancedDataGridColumn （还有一些其他的事情需要担心，比如排序，过滤器等，但想法如下：）我们添加了一堆东西来支持内置格式等，所以下面的代码只是这个特定问题的伪代码，而不是我们代码库中的实际代码。

```
public class ExtendedAdvancedDataGridColumn{

            public var enableNestedPropertySupport:Boolean=true;
            public override function itemToLabel(data:Object, withFormatting:Boolean=true):String
            {
                if(enableNestedPropertySupport){ 
                    return  UIUtils.resolveExpression(data,dataField);
                }
                else{
                    return  super.itemToLabel(data, withFormatting);
                }
            }

        } 
```

# html - 当鼠标悬停在绝对定位的 div 上时，如何滚动它？

> ID：15569234
> 
> 赞同：0
> 
> 时间：2013-03-22T11:28:17.187
> 
> 标签：html, scroll

我的网站上有两个主要的 div .left 和 .right。当我网站上的页面第一次加载时，.right 通常有滚动条，但是，我必须点击 .right 才能让 div 滚动。如何让 .right 滚动而无需在其中单击？

该CSS...

```
div.left, div.right 
{ 
    position:absolute; 
    top:0; 
    bottom:0; 
    height:100%; 
    padding:0; 
}
div.left  
{ 
    right:81%; left:0; 
    width:19%; 
    overflow:auto; 
    background:#000; 
    color:#fff; 
}
div.right 
{ 
    right:0; 
    left:19%; 
    width:81%; 
    overflow-y:auto; 
    background:#fff; 
    color:#000 
} 
```

任何和所有的帮助将不胜感激。感谢您的阅读。阿莱娜夫人

# java - Java 连接到 https URL

> ID：15569237
> 
> 赞同：2
> 
> 时间：2013-03-22T11:28:26.367
> 
> 标签：java, url, ssl, https

我用 Java 编写了一个小代码来访问 URL。该代码适用于 HTTP 连接，但适用于 HTTPS（错误粘贴在下面）

任何解决此问题的帮助将不胜感激。

代码 ：

```
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.net.URL;
import java.net.URLConnection;

public class ConnectToWCProd {

    public static void main(String[] args) throws Exception {

        String userPassword = "user1:user1";
        String encoding = new sun.misc.BASE64Encoder().encode (userPassword.getBytes());

        //URL oracle = new URL("http://<URL>/");
        URL oracle = new URL("https://<URL>");
        URLConnection yc = oracle.openConnection();

        yc.setRequestProperty("Authorization", "Basic " + encoding);

        BufferedReader in = new BufferedReader(new InputStreamReader(yc.getInputStream()));
        String inputLine;
        while ((inputLine = in.readLine()) != null) 
            System.out.println(inputLine);
        in.close();
    }

} 
```

错误 ：

线程“主”javax.net.ssl.SSLHandshakeException 中的异常：sun.security.validator.ValidatorException：PKIX 路径构建失败：sun.security.provider.certpath.SunCertPathBuilderException：无法在 com.sun 中找到请求目标的有效证书路径.net.ssl.internal.ssl.Alerts.getSSLException(Unknown Source) at com.sun.net.ssl.internal.ssl.SSLSocketImpl.fatal(Unknown Source) at com.sun.net.ssl.internal.ssl.Handshaker .fatalSE(Unknown Source) at com.sun.net.ssl.internal.ssl.Handshaker.fatalSE(Unknown Source) at com.sun.net.ssl.internal.ssl.ClientHandshaker.serverCertificate(Unknown Source) at com.sun .net.ssl.internal.ssl.ClientHandshaker.processMessage(Unknown Source) at com.sun.net.ssl.internal.ssl.Handshaker.processLoop(Unknown Source) at com.sun.net.ssl.internal.ssl。Handshaker.process_record(Unknown Source) at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(Unknown Source) at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(Unknown Source) at com. sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(Unknown Source) at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(Unknown Source) at sun.net.www.protocol.https.HttpsClient。 sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(Unknown Source) 上 sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source) 上 sun.net.www.protocol 上的 afterConnect(Unknown Source)。 https.HttpsURLConnectionImpl.getInputStream(Unknown Source) at ConnectToWCProd.main(ConnectToWCProd.java:21) 原因：sun.security.validator.ValidatorException：PKIX 路径构建失败：sun.security.provider.certpath.SunCertPathBuilderException：无法在 sun.security.validator.PKIXValidator.engineValidate(Unknown Source) 在 sun.security.validator.PKIXValidator.doBuild(Unknown Source) 上找到请求目标的有效证书路径。 security.validator.Validator.validate(Unknown Source) at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.validate(Unknown Source) at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(Unknown Source ) at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(Unknown Source) ... 13 更多原因：sun.security.provider.certpath.SunCertPathBuilderException：无法在 sun 处找到请求目标的有效认证路径.security.provider.certpath.SunCertPathBuilder.engineBuild(Unknown Source) at java。security.cert.CertPathBuilder.build(Unknown Source) ... 19 更多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:32:25.710

阅读此[链接](http://magicmonster.com/kb/prg/java/ssl/pkix_path_building_failed.html)

您必须在`jre/lib/security/cacerts`（默认路径）中包含证书

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T11:34:31.783

这可能对您有帮助：

[http://www.java-samples.com/showtutorial.php?tutorialid=210](http://www.java-samples.com/showtutorial.php?tutorialid=210)

# coded-ui-tests - 编码的 UI 测试框架

> ID：15569243
> 
> 赞同：0
> 
> 时间：2013-03-22T11:28:43.063
> 
> 标签：coded-ui-tests

我正在使用 Visual Studio 2010 Ultimate C# 进行测试自动化。在那里我使用编码的 UI 测试框架记录了一个注册模块。当我点击注册按钮时，另一个窗口打开但没有最大化，所以当我填写字段时，我需要向下滚动。录制时不录制滚动。所以只是想知道如何向下滚动以及当一个新窗口打开时如何点击最大化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T18:32:17.887

您可以使用窗口的最大化属性最大化窗口。因此，在填写字段之前，您可以最大化包含该字段的窗口。例如，如果您想在启动后最大化记事本窗口，那么您可以执行以下操作

```
this.UIMap.UIUntitledNotepadWindow.Maximized = true; 
```

在上面的代码中，UIUntitledNotepadWindow 是记事本的顶层窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-29T14:11:53.533

弹出新窗口后，使用“WinWindow”类找到窗口的控件。一旦你得到前的窗口。

```
WinWindow objWindow = new WinWindow();
objWindow.searchproperty.add(WinWindow.propertyname.FriendlyName, " Pop name");
objWindow.maximized = true; 
```

对于不可点击的控件，找到它在哪个面板中......一旦完成，一旦你获得控制，就使用面板对象搜索控件，编写下面的代码。

```
objControl.ensureclickable(); 
```

注意：面板将使用 winwindow 对象搜索，并使用面板或任何其他控件进行控制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T12:53:57.883

该方法`public void EnsureClickable()`被描述为“*滚动用户界面以确保控件可点击。* ”

请参阅[http://msdn.microsoft.com/en-us/library/dd434011.aspx](http://msdn.microsoft.com/en-us/library/dd434011.aspx)

不明白他关于“*打开另一个窗口但未最大化...当一个新窗口打开时如何单击最大化*”的问题的一部分。您尝试过什么，发生了什么，您希望发生什么？我推荐使用 Coded UI 记录和生成工具，记录窗口的打开并最大化它。然后检查生成的代码，看看它是如何工作的。

# linux - 重启后过时的 PID 文件

> ID：15569248
> 
> 赞同：3
> 
> 时间：2013-03-22T11:28:59.457
> 
> 标签：linux, pid

重启后如何处理陈旧的 pidfile？我想我不能相信文件中的数字，因为另一个进程可能已经用相同的 PID 取代了它的位置。

我可以/应该确保 pidfile 不会在重新启动后继续存在吗？当具有该 pid 的进程正在运行时，检测过时 pidfile 的正确方法是什么，该文件可能会或可能不会从先前的引导中遗留下来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T12:10:19.960

通常，pidfiles 被写入`/var/run/`or `/run/`（在许多系统上，有一个符号链接 from `/var/run`to`/run`所以它们是相同的）。有关更多信息，请参阅[文件系统层次标准](http://www.linuxbase.org/betaspecs/fhs/fhs.html#runRuntimeVariableData)。并且该`/run/`目录应该在启动时尽早清除（即因为它被挂载为`tmpfs`），所以它不会在重新启动时存活。另请参阅[Linux Standard Base 4.1](http://refspecs.linux-foundation.org/LSB_4.1.0/)规范。

因此，您不应该关心过时的 pidfile。这不应该发生，如果发生，可能是因为系统管理员把事情搞砸了。如果该 pidfile 已经存在，我会以某种错误消息退出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T11:36:14.890

`/proc/PID/cmdine`如果这是您自己的守护进程，您可以通过扫描或发送信号以使用该 PID 进行处理来检测陈旧的 PID 文件。

对于一个简单的扫描示例，`/proc`我展示了我的解决方案：

```
#define PROC_BASE "/proc"

#include <stdio.h>      // printf, fopen, ...
#include <unistd.h>     // getpid
#include <stdio.h>      // perror
#include <sys/types.h>  // opendir
#include <dirent.h>     // opendir
#include <sys/stat.h>   // stat
#include <fcntl.h>      // fcntl
#include <stdlib.h>     // exit
#include <string.h>     // memset

/**
 * read process name from /proc/PID/cmdline
 * @param pid - PID of interesting process
 * @return filename or NULL if not found
 *      don't use this function twice for different names without copying
 *      its returning by strdup, because `name` contains in static array
 */
char *readname(pid_t pid){
    static char name[256];
    char *pp = name, byte, path[256];
    FILE *file;
    int cntr = 0;
    size_t sz;
    snprintf (path, 255, PROC_BASE "/%d/cmdline", pid);
    file = fopen(path, "r");
    if(!file) return NULL; // there's no such file
    do{ // read basename
        sz = fread(&byte, 1, 1, file);
        if(sz != 1) break;
        if(byte != '/') *pp++ = byte;
        else{
            pp = name;
            cntr = 0;
        }
    }while(byte && cntr++ < 255);
    name[cntr] = 0;
    fclose(file);
    return name;
}

void iffound_default(pid_t pid){
    fprintf(stderr, "\nFound running process (pid=%d), exit.\n", pid);
    exit(0);
}

/**
 * check wether there is a same running process
 * exit if there is a running process or error
 * Checking have 3 steps:
 *      1) lock executable file
 *      2) check pidfile (if you run a copy?)
 *      3) check /proc for executables with the same name (no/wrong pidfile)
 * @param argv - argument of main() or NULL for non-locking, call this function before getopt()
 * @param pidfilename - name of pidfile or NULL if none
 * @param iffound - action to run if file found or NULL for exit(0)
 */
void check4running(char **argv, char *pidfilename, void (*iffound)(pid_t pid)){
    DIR *dir;
    FILE *pidfile, *fself;
    struct dirent *de;
    struct stat s_buf;
    pid_t pid = 0, self;
    struct flock fl;
    char *name, *myname;
    if(!iffound) iffound = iffound_default;
    if(argv){ // block self
        fself = fopen(argv[0], "r"); // open self binary to lock
        memset(&fl, 0, sizeof(struct flock));
        fl.l_type = F_WRLCK;
        if(fcntl(fileno(fself), F_GETLK, &fl) == -1){ // check locking
            perror("fcntl");
            exit(1);
        }
        if(fl.l_type != F_UNLCK){ // file is locking - exit
            printf("Found locker, PID = %d!\n", fl.l_pid);
            exit(1);
        }
        fl.l_type = F_RDLCK;
        if(fcntl(fileno(fself), F_SETLKW, &fl) == -1){
            perror("fcntl");
            exit(1);
        }
    }
    self = getpid(); // get self PID
    if(!(dir = opendir(PROC_BASE))){ // open /proc directory
        perror(PROC_BASE);
        exit(1);
    }
    if(!(name = readname(self))){ // error reading self name
        perror("Can't read self name");
        exit(1);
    }
    myname = strdup(name);
    if(pidfilename && stat(pidfilename, &s_buf) == 0){ // pidfile exists
        pidfile = fopen(pidfilename, "r");
        if(pidfile){
            fscanf(pidfile, "%d", &pid); // read PID of (possibly) running process
            fclose(pidfile);
            if((name = readname(pid)) && strncmp(name, myname, 255) == 0)
                iffound(pid);
        }
    }
    // There is no pidfile or it consists a wrong record
    while((de = readdir(dir))){ // scan /proc
        if(!(pid = (pid_t)atoi(de->d_name)) || pid == self) // pass non-PID files and self
            continue;
        if((name = readname(pid)) && strncmp(name, myname, 255) == 0)
            iffound(pid);
    }
    closedir(dir);
    if(pidfilename){
        pidfile = fopen(pidfilename, "w");
        fprintf(pidfile, "%d\n", self); // write self PID to pidfile
        fclose(pidfile);
    }
} 
```

如果您运行 function `check4running`，您将能够保证您的守护进程是单一的：第一个阻塞是锁定自我可执行文件，如果这是不可能的，它会扫描`/proc/`并检查 pidfile（如果存在）。

# postgresql - PostgreSQL：编码“UTF8”的字符在 plperl 存储过程中的“LATIN1”中没有等价物

> ID：15569249
> 
> 赞同：2
> 
> 时间：2013-03-22T11:29:04.127
> 
> 标签：postgresql, stored-procedures, utf-8, latin1, plperl

我有这个用 Pl/Perl 编写的存储过程：

```
CREATE FUNCTION strip_html_tags(text) RETURNS TEXT AS $$
    use HTML::Strip;
    my $hs = HTML::Strip->new();
    my $clean_text = $hs->parse($_[0]);
    $hs->eof;
    return $clean_text;
$$ LANGUAGE plperlu; 
```

我的数据库中有一些字段（LATIN1 编码）可能有一些无效字符，因为我得到如下信息：

```
db=# select strip_html_tags(field) from table;
ERROR:  character 0xe2809c of encoding "UTF8" has no equivalent in "LATIN1"
CONTEXT:  PL/Perl function "strip_html_tags" 
```

我尝试使用 PostgreSQL 的 convert() 和 convert_from() 来尝试更改编码，但没有任何运气。有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:39:20.427

# bash - 如何控制 shell 脚本循环：'dpkg -s pv | grep 状态'

> ID：15569252
> 
> 赞同：1
> 
> 时间：2013-03-22T11:29:21.880
> 
> 标签：bash, grep, dpkg

编码处女需要帮助 - 一旦安装包 pv ，此代码总是这样做`else`而不是`then`. 为什么？

```
# First check if pv package is installed, if not, install it first
PACKAGESTATUS=`dpkg -s pv | grep Status`;

if [[ $PACKAGESTATUS == S* ]]
   then
      echo "Package 'pv' is installed."
   else
      echo "Package 'pv' is NOT installed."
      echo "Installing package 'pv'. Please wait..."
      apt-get -y install pv
fi 
```

`raspbian/2013-02-09`注意它是备份运行 Raspbian wheezy和 pv 版本的树莓派的备份脚本的一部分，`1.2.0`作者不可用。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:48:28.443

无需捕获`dpkg | grep`管道的输出，只需检查其退出状态：

```
if dpkg -s pv | grep -q Status; then
   then
      echo "Package 'pv' is installed."
   else
      echo "Package 'pv' is NOT installed."
      echo "Installing package 'pv'. Please wait..."
      apt-get -y install pv
fi 
```

`-q`选项 to用于抑制任何匹配行的`grep`输出，因为您不需要查看它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-04T20:41:53.157

由于双“then”，chepners 的答案中有一个小的语法错误。

这个版本我运气更好

```
if `dpkg -s pv | grep -q Status;`
   then
      echo "Package 'pv' is installed."
   else
      echo "Package 'pv' is NOT installed."
      echo "Installing package 'pv'. Please wait..."
      apt-get -y install pv
fi 
```

# javascript - 从不同的框架中获取元素

> ID：15569255
> 
> 赞同：0
> 
> 时间：2013-03-22T11:29:28.540
> 
> 标签：javascript, html, getelementbyid

我拼命地试图通过它的 ID 来获取一个元素，它位于另一个框架（不是 iframe）中。请参阅以下代码以使事情变得清晰：

```
var elem = parent.frames['top'].document.getElementById('mydiv');
alert(elem); // returns null 
```

.

```
<div id="mydiv">
...
</div> 
```

如果我发出警报`parent.frames['top'].document`，我会被`[object]`退回。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:33:40.963

如果可以使用 jQuery。您可以按如下方式实现

```
$("some selector", top.frames["frame_name"].document)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:30:30.740

代码`parent.frames['top']`返回一个`Window`对象。因此，您必须将代码修改为

```
var elem = parent.frames['top'].window.document.getElementById('mydiv'); 
```

# spring-roo - 标签中的瓷砖可能吗？

> ID：15569256
> 
> 赞同：0
> 
> 时间：2013-03-22T11:29:30.617
> 
> 标签：spring-roo, tiles, tiles2, apache-tiles

我正在使用 spring roo v.1.2.3。Roo 生成的`*.tagx`-s，`*.jspx`-s 和`views.xml`-s 都很好。

但是我可以把那些`*.jspx`页面片段放在`*.tagx`-s 中吗？例如有一个标签`table.tagx`，我想在每一行之后插入一个对应的`update.jspx`. 是否可以修改标签或其他东西以使其工作，或者我应该找到另一种方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:16:21.277

您可以修改标记文件，但请记住 Roo 生成的标记文件将被重用。将 Roo 视为样板生成器，您可以在其中修改它生成的任何内容。

# android - 如何仅隐藏软键盘android

> ID：15569257
> 
> 赞同：-1
> 
> 时间：2013-03-22T11:29:39.533
> 
> 标签：android, android-softkeyboard, activitygroup, android-tabactivity

在我的应用程序中，我正在使用选项卡活动和活动组。在其中一项活动中，我编辑了文本。当用户点击编辑文本时，出现软键盘。但是当用户单击后退按钮时，软键盘会消失，并且会出现活动堆栈上的前一个活动。

早些时候在其他应用程序上，当我在屏幕上有软键盘时按下后退按钮时，只有软键盘关闭，除非我再次按下后退按钮，否则它不会回到以前的活动。我希望这也发生在我当前的应用程序中。请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:32:09.167

在您的 On create 方法中使用以下内容。它工作正常。

```
this.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T11:48:05.677

可以试试这个-**

```
InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
                                  imm.hideSoftInputFromWindow(v.getWindowToken(), 0); 
```

**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T06:53:23.587

```
 InputMethodManager imm = (InputMethodManager) 
              this.getSystemService(Context.INPUT_METHOD_SERVICE);

        if (imm.isAcceptingText()) {

            System.out.println("Software Keyboard was shown");

        } else {

             System.out.println("Software Keyboard is hidden");

             } 
```

这可以解决问题。我检查了软键盘板是否打开它停留在当前活动，否则它转到以前的活动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T11:38:08.310

**代码**

```
InputMethodManager imm = (InputMethodManager)getSystemService(
  Context.INPUT_METHOD_SERVICE);
imm.hideSoftInputFromWindow(myEditText.getWindowToken(), 0); 
```

也检查下面的链接： -

[http://developer.android.com/guide/topics/resources/runtime-changes.html#HandlingTheChange](http://developer.android.com/guide/topics/resources/runtime-changes.html#HandlingTheChange)

[http://developer.android.com/reference/android/view/inputmethod/InputMethodManager.html](http://developer.android.com/reference/android/view/inputmethod/InputMethodManager.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T11:54:12.363

I think this will help you

```
protected void hideSoftKeyboard(EditText input) {
        input.setInputType(0);
        InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
        imm.hideSoftInputFromWindow(input.getWindowToken(), 0);

    } 
```

# android - Android Facebook Open Graph 请求类型参考

> ID：15569262
> 
> 赞同：0
> 
> 时间：2013-03-22T11:29:56.667
> 
> 标签：android, facebook, facebook-opengraph

我可以通过`String array`请求参数包吗？它对我不起作用。有人建议替代方案吗？. 我必须在其中发布一个自定义引用类型值`array`。使用`putString()`时工作正常。用方法试了`action.setProperty()`还是不行

代码

```
Bundle params = new Bundle();
params.putInt("data1", 1);
params.putStringArray("key",new String[]{arrayvalue"})

Request request = new Request(Session.getActiveSession(),
                    FacebookConstants.POST_ACTION_PATH_COMPLETE, params,
                    HttpMethod.POST); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:28:34.940

不，捆绑包（或请求类）不对单个参数值进行任何 JSON 编码。

如果你想传入一个字符串数组，你需要先将它自己 JSON 编码成一个字符串值，并将它设置为 bundle 中的“key”。

# telerik - Microsoft.Expression.Encoder.AdaptiveStreaming 命名空间

> ID：15569265
> 
> 赞同：0
> 
> 时间：2013-03-22T11:30:09.920
> 
> 标签：telerik, media-player, rad-controls

我是 Telerik 产品的新手。现在我正在开发一个媒体播放器。我想添加一个名为“Microsoft.Expression.Encoder.AdaptiveStreaming”的命名空间。我从 Telerik 网站获得了开发媒体播放器的指导。（[http://demos.telerik.com/silverlight/#MediaPlayer/SmoothStreaming](http://demos.telerik.com/silverlight/#MediaPlayer/SmoothStreaming)）其中也使用了该命名空间，但我不知道在 Telerik 上哪里可以找到它。供您参考，我添加了一个屏幕截图。请帮我解决这个问题。

谢谢。![在此处输入图像描述](../Images/747c2f4b5e1c81e45b4f322c79f7d6a0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:44:12.813

我认为，需要添加一些dll或需要通过LibraryPacketManager添加库文件。查看

# android - GCM - 服务器关闭时如何再次添加所有设备？

> ID：15569266
> 
> 赞同：0
> 
> 时间：2013-03-22T11:30:11.437
> 
> 标签：android, google-cloud-messaging

我的应用程序在我的服务器上调用 Web 服务以将所有设备注册 ID 存储在数据库中。当我的 gcm-server 崩溃和/或出现故障时，我必须重新导入数据库中的所有registrationID ...

我怎样才能避免一个非常大的循环来重新填充 Datastore 类？

谢谢 ：）

# .net - XML Parse Elements 中最后一次出现的另一个元素

> ID：15569269
> 
> 赞同：0
> 
> 时间：2013-03-22T11:30:15.867
> 
> 标签：.net, xml, vb.net

我对 XML 相当陌生，并且无法使用 VB 解析下面的文件。我想要做的是，转到`<SESSION>`文件中的最后一个标签并遍历`<IMAGE>`节点并获取它们的值。

```
<?xml version="1.0" encoding="UTF-8"?>
<MIFORMS_EXPORT>
<SESSION FORM_ID="209688" CID="" ID="HAKKI-LAPTOP_634995474247656192">
    <FIELD NAME="A001DATE_M" />
    <FIELD NAME="A002" />
    <FIELD NAME="A003" />
    <FIELD NAME="A004" />
    <IMAGE NAME="P1" TYPE="PAGE" FORMAT="image/png" RESOLUTION="28.35" DEPTH="24">C:\wamp\www\Kapture.web\ClientBin\metis\images\209688-0-03222013-111042768-HAKKI-LAPTOP_634995474247656192.png</IMAGE>
    <IMAGE NAME="P2" TYPE="PAGE" FORMAT="image/png" RESOLUTION="28.35" DEPTH="24">C:\wamp\www\Kapture.web\ClientBin\metis\images\209688-1-03222013-111042783-HAKKI-LAPTOP_634995474247656192.png</IMAGE>
    <IMAGE NAME="P3" TYPE="PAGE" FORMAT="image/png" RESOLUTION="28.35" DEPTH="24">C:\wamp\www\Kapture.web\ClientBin\metis\images\209688-2-03222013-111042799-HAKKI-LAPTOP_634995474247656192.png</IMAGE>
    <IMAGE NAME="P4" TYPE="PAGE" FORMAT="image/png" RESOLUTION="28.35" DEPTH="24">C:\wamp\www\Kapture.web\ClientBin\metis\images\209688-3-03222013-111042814-HAKKI-LAPTOP_634995474247656192.png</IMAGE>
    <IMAGE NAME="P5" TYPE="PAGE" FORMAT="image/png" RESOLUTION="28.35" DEPTH="24">C:\wamp\www\Kapture.web\ClientBin\metis\images\209688-4-03222013-111042830-HAKKI-LAPTOP_634995474247656192.png</IMAGE>
    <IMAGE NAME="P6" TYPE="PAGE" FORMAT="image/png" RESOLUTION="28.35" DEPTH="24">C:\wamp\www\Kapture.web\ClientBin\metis\images\209688-5-03222013-111042846-HAKKI-LAPTOP_634995474247656192.png</IMAGE>
    <IMAGE NAME="P7" TYPE="PAGE" FORMAT="image/png" RESOLUTION="28.35" DEPTH="24">C:\wamp\www\Kapture.web\ClientBin\metis\images\209688-6-03222013-111042846-HAKKI-LAPTOP_634995474247656192.png</IMAGE>
    <IMAGE NAME="P8" TYPE="PAGE" FORMAT="image/png" RESOLUTION="28.35" DEPTH="24">C:\wamp\www\Kapture.web\ClientBin\metis\images\209688-7-03222013-111042861-HAKKI-LAPTOP_634995474247656192.png</IMAGE>
    <IMAGE NAME="P9" TYPE="PAGE" FORMAT="image/png" RESOLUTION="28.35" DEPTH="24">C:\wamp\www\Kapture.web\ClientBin\metis\images\209688-8-03222013-111042877-HAKKI-LAPTOP_634995474247656192.png</IMAGE>
    <IMAGE NAME="P10" TYPE="PAGE" FORMAT="image/png" RESOLUTION="28.35" DEPTH="24">C:\wamp\www\Kapture.web\ClientBin\metis\images\209688-9-03222013-111042892-HAKKI-LAPTOP_634995474247656192.png</IMAGE>
    <IMAGE NAME="P11" TYPE="PAGE" FORMAT="image/png" RESOLUTION="28.35" DEPTH="24">C:\wamp\www\Kapture.web\ClientBin\metis\images\209688-10-03222013-111042892-HAKKI-LAPTOP_634995474247656192.png</IMAGE>
  </SESSION>
  <SESSION FORM_ID="209688" CID="" ID="HAKKI-LAPTOP_634995479807027960">
    <FIELD NAME="A001DATE_M" />
    <FIELD NAME="A002" />
    <FIELD NAME="A003" />
    <FIELD NAME="A004" />
    <IMAGE NAME="P1" TYPE="PAGE" FORMAT="image/png" RESOLUTION="28.35" DEPTH="24">C:\wamp\www\Kapture.web\ClientBin\metis\images\209688-0-03222013-111944041-HAKKI-LAPTOP_634995479807027960.png</IMAGE>
    <IMAGE NAME="P2" TYPE="PAGE" FORMAT="image/png" RESOLUTION="28.35" DEPTH="24">C:\wamp\www\Kapture.web\ClientBin\metis\images\209688-1-03222013-111944056-HAKKI-LAPTOP_634995479807027960.png</IMAGE>
    <IMAGE NAME="P3" TYPE="PAGE" FORMAT="image/png" RESOLUTION="28.35" DEPTH="24">C:\wamp\www\Kapture.web\ClientBin\metis\images\209688-2-03222013-111944072-HAKKI-LAPTOP_634995479807027960.png</IMAGE>
    <IMAGE NAME="P4" TYPE="PAGE" FORMAT="image/png" RESOLUTION="28.35" DEPTH="24">C:\wamp\www\Kapture.web\ClientBin\metis\images\209688-3-03222013-111944088-HAKKI-LAPTOP_634995479807027960.png</IMAGE>
    <IMAGE NAME="P5" TYPE="PAGE" FORMAT="image/png" RESOLUTION="28.35" DEPTH="24">C:\wamp\www\Kapture.web\ClientBin\metis\images\209688-4-03222013-111944103-HAKKI-LAPTOP_634995479807027960.png</IMAGE>
    <IMAGE NAME="P6" TYPE="PAGE" FORMAT="image/png" RESOLUTION="28.35" DEPTH="24">C:\wamp\www\Kapture.web\ClientBin\metis\images\209688-5-03222013-111944119-HAKKI-LAPTOP_634995479807027960.png</IMAGE>
    <IMAGE NAME="P7" TYPE="PAGE" FORMAT="image/png" RESOLUTION="28.35" DEPTH="24">C:\wamp\www\Kapture.web\ClientBin\metis\images\209688-6-03222013-111944134-HAKKI-LAPTOP_634995479807027960.png</IMAGE>
    <IMAGE NAME="P8" TYPE="PAGE" FORMAT="image/png" RESOLUTION="28.35" DEPTH="24">C:\wamp\www\Kapture.web\ClientBin\metis\images\209688-7-03222013-111944134-HAKKI-LAPTOP_634995479807027960.png</IMAGE>
    <IMAGE NAME="P9" TYPE="PAGE" FORMAT="image/png" RESOLUTION="28.35" DEPTH="24">C:\wamp\www\Kapture.web\ClientBin\metis\images\209688-8-03222013-111944150-HAKKI-LAPTOP_634995479807027960.png</IMAGE>
    <IMAGE NAME="P10" TYPE="PAGE" FORMAT="image/png" RESOLUTION="28.35" DEPTH="24">C:\wamp\www\Kapture.web\ClientBin\metis\images\209688-9-03222013-111944166-HAKKI-LAPTOP_634995479807027960.png</IMAGE>
    <IMAGE NAME="P11" TYPE="PAGE" FORMAT="image/png" RESOLUTION="28.35" DEPTH="24">C:\wamp\www\Kapture.web\ClientBin\metis\images\209688-10-03222013-111944212-HAKKI-LAPTOP_634995479807027960.png</IMAGE>
  </SESSION>
</MIFORMS_EXPORT> 
```

我已经做到了这一点：

```
'TASK: Get the pen image PNG name
    'Get the total Session count in XML
    Dim penImageRaw As Int32 = doc.GetElementsByTagName("SESSION").Count            
    For startValue = 0 To penImageRaw
        i+=1
    Next

    'Grab the last session element
    Dim test As XmlNode = doc.GetElementsByTagName("SESSION").Item(i) 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:51:19.757

像这样怎么样？

```
'TASK: Get the pen image PNG name

'Get the total Session count in XML
Dim penImageRaw As Int32 = doc.GetElementsByTagName("SESSION").Count

If penImageRaw > 0 Then
  'Grab the last session element (Last one is count-1)
  Dim test As XmlNode = doc.GetElementsByTagName("SESSION").Item(penImageRaw-1)
  '
  'Now find IMAGE nodes in this SESSION node here
  '
Else
  'No session nodes found
End if 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T00:47:44.143

解决了，感谢 Zaf 为我指明了正确的方向。Google 员工，这是您的最终结果：

```
 Dim penImageRaw As Int32 = doc.GetElementsByTagName("SESSION").Count

If penImageRaw > 0 Then
  Dim test As XmlNode = doc.GetElementsByTagName("SESSION").Item(penImageRaw-1)
  Dim list As XmlNodeList = test.ChildNodes

For Each node As XmlNode In list
    If String.Equals(node.Name, "IMAGE")

    Dim wtf As String = node.FirstChild.Value

    MsgBox(wtf)
End If
    Next

Else
  MsgBox("No Session nodes found")
End If 
```

# c++ - 如何调用 DLL API

> ID：15569272
> 
> 赞同：1
> 
> 时间：2013-03-22T11:30:34.893
> 
> 标签：c++, winapi, visual-c++

我正在尝试在 VC++ 版本 8 中编写应用程序。我有一个 DLL，使用依赖walker 我得到了 DLL 可用的 API 列表。

我可以加载 DLL。但是当我尝试调用 DLL 中的一些 API 时，我会得到这个调试错误

“运行时检查失败 #0 - ESP 的值未在函数调用中正确保存。这通常是调用使用一种调用约定声明的函数和使用不同调用约定声明的函数指针的结果。”

```
typedef void ( WINAPI *RECEIVE_CALLBACK)int*, int );

typedef void (WINAPI *MYPROC)(RECEIVE_CALLBACK);

     .....
     .....

handleDll = LoadLibraryW((LPCWSTR)L"Example.dll");

ProcAdd = (MYPROC) GetProcAddress(handleDll, "_DLLAPI_Call1@8"); 

(ProcAdd) ( (RECEIVE_CALLBACK) ReceiveFunc); 
```

执行最后一行时，我收到上述错误。可能是什么原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T14:27:07.587

您的 MYPROC 函数指针声明是错误的。这个函数有两个参数，而不是一个。从名称的@8 部分可以看出，参数值需要 8 个字节的堆栈空间。用一个参数调用它，一个 4 字节的指针，总是会使堆栈不平衡。

您需要修复您的 MYPROC 声明。

# java - JSP EL 标记未正确解析？

> ID：15569274
> 
> 赞同：2
> 
> 时间：2013-03-22T11:30:41.453
> 
> 标签：java, jsp, el

在我的 Servlet 中，我这样做：

```
request.setAttribute("header", "templateheaderv1");
request.getRequestDispatcher("/master.jsp").forward(request, response); 
```

在我的 master.jsp 页面中，我这样做：

```
<jsp:include page="/template/${header}.jsp" /> 
```

我应该得到的是：

```
<jsp:include page="/template/templateheaderv1.jsp"/> 
```

但我得到的是：

```
<jsp:include page="/template/javax.servlet.jsp.el.ImplicitObjectELResolver$ImplicitObjects$7@6e4eeaaf.jsp"/> 
```

这显然会引发 FileNotFoundException。

我的 web.xml 的标题是这样的：

```
<web-app 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
    http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" version="2.5"> 
```

哪个应该足以解析 EL 变量，不是吗？

我正在使用 Jetty 8 运行这个无容器

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T11:36:05.820

[您的变量名称与隐式对象](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSPIntro7.html#wp71043)之一（HTTP 标头映射）发生冲突。将名称更改为其他名称。

# xml - XML文件区别

> ID：15569276
> 
> 赞同：0
> 
> 时间：2013-03-22T11:30:46.660
> 
> 标签：xml

我们在比较两个 xml 文件时遇到了一个严重的问题。我们需要根据键值找到两个 xml 文件之间的差异。我们需要 xml 标签和 xml 标签的值方面的差异。可能存在键值在文件中的不同位置。例如下面是两个 xml 文件示例，其中 id 是学生的键。在 StudentDetails_one.xml 文件中，id 111 首先出现，但在 StudentDetails_two.xml 中，id 222 首先出现。

**StudentDetails_one.xml**

```
<Student>
    <Id>111</Id>
    <Name>AAA</Name>
    <City>ABCD</City>
    <Dept>CS</Dept>
    <Mobile Number>11111</Mobile Number>
</Student>
<Student>
    <Id>222</Id>
    <Name>BBB</Name>
    <City>ABCD</City>
    <Dept>IT</Dept>
    <Mobile Number>22222</Mobile Number>
</Student> 
```

**StudentDetails_two.xml**

```
<Student>
  <Id>222</Id>
  <Name>CCC</Name>
  <City>ABCD</City>
  <DEPT>IT</DEPT>
  <Mobile Number>22222</Mobile Number>
</Student>
<Student>
  <Id>111</Id>
  <Name>AAA</Name>
  <City>ABCD</City>
  <Dept>CS</Dept>
  <Mobile Number>11111</Mobile Number>
</Student> 
```

在上述两个文件中可以注意到以下两个差异。

1.  学生 id 222在这两个 xml 文件中具有不同的*名称值。在第一个文件中是 BBB，在第二个文件中是 CCC。*
2.  学生 id 222与第一个文件中的*Dept和第二个文件中的**DEPT*具有 xml 标记控制差异。

是否有任何工具或技术可以找出上述两个差异？

注意：上面只是一个例子。我们有数百个标签的xml文件。所以很难找出区别，因为两个文件中的学生id位置不同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:53:05.177

这是图像

[http://postimg.org/image/arf785kg3/](http://postimg.org/image/arf785kg3/)

这是我尝试给定示例时得到的结果。是不是你正在寻找的东西。?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:35:37.690

有许多工具可用于有效的文件/文件夹比较。

这里是其中的一些，

(1) Araxis 合并

(2) Beyond Compare（我个人推荐这个）

希望能帮助到你。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-22T11:37:27.903

如果我得到了你想要的，这里有很多工具。[kdiff](http://kdiff3.sourceforge.net/)是一个不错的选择。

# android - IntentService 启动我的应用程序

> ID：15569281
> 
> 赞同：0
> 
> 时间：2013-03-22T11:31:03.257
> 
> 标签：android, android-activity, intentservice

我有一个每 5 分钟运行一次的 IntentService。我遇到的问题是当用户退出应用程序时，服务会启动应用程序。如何向服务指定不应启动应用程序？目前它没有达到预期的效果，因为用户可能会在应用程序启动时发短信。

我如何启动服务。

```
// get a Calendar object with current time
             Calendar cal = Calendar.getInstance();
             // add 5 minutes to the calendar object
             cal.add(Calendar.MINUTE, 1);
             Intent intent = new Intent(EntryActivity.this, AlarmReceiver.class);
             intent.putExtra("alarm_message", "sending outstanding transactions");
             // In reality, you would want to have a static variable for the request code instead of 192837
             PendingIntent sender = PendingIntent.getBroadcast(EntryActivity.this, 192837, intent, PendingIntent.FLAG_UPDATE_CURRENT);

             // Get the AlarmManager service
             AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
             //am.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), sender);
             //43200000 = 12 hours
             //3600000 = 1hr
             //1800000 = 30 mins
             //300000 = 5 mins

             am.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), 300000 , sender); 
```

收件人。

```
public class AlarmReceiver extends BroadcastReceiver {

 @Override
 public void onReceive(Context context, Intent intent) {
   try {

     Bundle bundle = intent.getExtras();
     String message = bundle.getString("alarm_message");
    // Toast.makeText(context, message, Toast.LENGTH_SHORT).show();
     Intent myIntent = new Intent(context, SendOutstandingTransactions.class);
     myIntent.setAction("com.carefreegroup.startatboot.MyService");
     context.startService(myIntent);

    } catch (Exception e) {
     Toast.makeText(context, "There was an error somewhere, but we still received an alarm", Toast.LENGTH_SHORT).show();
     e.printStackTrace();

    }
 }

} 
```

.

```
public class SendOutstandingTransactions extends IntentService {

    private static final String TAG = SendOutstandingTransactions.class.getSimpleName();
    NfcScannerApplication nfcscannerapplication;
    Cursor c;
    //LocationManager             mlocManager;
    //LocationListener            mlocListener;
    SharedPreferences appSharedPrefs;
    Editor  prefsEditor;
    String companyID;

    @Override
    public void onCreate() {
        super.onCreate();
        nfcscannerapplication = (NfcScannerApplication)getApplication();
        //mlocManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        appSharedPrefs = PreferenceManager.getDefaultSharedPreferences(SendOutstandingTransactions.this.getApplicationContext());
        prefsEditor = appSharedPrefs.edit();

    }

    @Override
    protected void onHandleIntent(Intent intent) {

        companyID = null;
        ContentValues messageValues = null;
        ContentValues phoneNumbers = null;
        c = nfcscannerapplication.loginValidate.queryAllFromCarer();
        String carerId = null;
        if(c != null && c.getCount() > 0){

        c.moveToLast();

         carerId = c.getString(c.getColumnIndex(LoginValidate.C_CARER_ID));
        companyID = c.getString(c.getColumnIndex(LoginValidate.C_COMP_ID));
        }

        //check to see if this service has run before
        Cursor howManyRuns = nfcscannerapplication.loginValidate.queryAllFromBackgroundServicesTable();

        if(howManyRuns.getCount() > 0){
            //service has run at least once before
            //do nothing

        }else{

            String hasRunOnce = "true";
            ContentValues cv = new ContentValues();
            cv.put(LoginValidate.C_BACKGROUNDSERVICES_HAVE_RUN_ONCE, hasRunOnce);
            nfcscannerapplication.loginValidate.insertIntoBackgroundServicesTable(cv);

        }

        Log.e(TAG, "inside onHandleIntent and about to do the service stuff");

        if(nfcscannerapplication.getSignalStrength() > 0 && isOnline() == true){

            DateTime now = new DateTime();
            now = now.minusDays(3);
            nfcscannerapplication.loginValidate.deleteTransactionsOlderThanSpecificTime(now);
            nfcscannerapplication.loginValidate.sendOutstandingTransactions();
            nfcscannerapplication.loginValidate.checkCompanyOptions();

            nfcscannerapplication.loginValidate.deleteTablePhone();
            phoneNumbers = nfcscannerapplication.loginWebservice.getCompanyPhonenumbers(companyID);

    ..................
..................
    .................. 
```

[编辑1]

```
// get a Calendar object with current time
             Calendar cal = Calendar.getInstance();
             // add 5 minutes to the calendar object
             cal.add(Calendar.MINUTE, 1);
             Intent intent = new Intent(getApplicationContext(), AlarmReceiver.class);
             intent.putExtra("alarm_message", "sending outstanding transactions");
             // In reality, you would want to have a static variable for the request code instead of 192837
             PendingIntent sender = PendingIntent.getBroadcast(getApplicationContext(), 192837, intent, PendingIntent.FLAG_UPDATE_CURRENT);

             // Get the AlarmManager service
             AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
             //am.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), sender);
             //43200000 = 12 hours
             //3600000 = 1hr
             //1800000 = 30 mins
             //300000 = 5 mins

             am.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), 150000 , sender); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:35:03.363

为了让活动出现在屏幕上，必须调用`startActivity()`. 有时弄清楚*什么*在召唤`startActivity()`，以及*为什么*，可能会有问题。但是，通常您的代码中只有几个地方可以启动任何给定的活动，因此通过断点、`Log`语句等，您通常可以找到罪魁祸首。

在没有`startActivity()`调用的情况下，广播和启动的服务将纯粹在后台，即使进程包含之前的活动实例。

# php - 使用 For 循环获取 PHP 中多个元素的值

> ID：15569285
> 
> 赞同：0
> 
> 时间：2013-03-22T11:31:19.577
> 
> 标签：php, for-loop

标题如此笼统，主要是因为我不知道什么应该是合适的标题。让我简单解释一下情况：

假设我有两个名为`LastName0`和`FirstName0`的文本框和一个名为`addMore`. 当我单击 时`addMore`，将通过 JavaScript 创建另外两个文本框。这些文本框将被命名为`LastName1`和`FirstName1`。当我再次单击该`addMore`按钮时，将分别创建并命名另外两个文本框`LastName2`按钮`FirstName2`。只要单击该`addMore`按钮，此操作就会继续。`deleteThis`此外，将在文本框旁边创建一个名为的按钮。这只是在单击时删除创建的文本框。

我还初始化了一个名为`counter`. 每次`addMore`单击按钮时，`counter`增加 1，每次`deleteThis`单击按钮时，`counter`减少 1。 的值`counter`存储在隐藏输入类型中。

当用户提交表单时，我获取 的值`counter`并创建一个 For 循环来获取表单中文本框的所有值。这是示例代码：

```
//Suppose that the user decides to add 2 more textboxes. Now we have the following:
     // LastName0   FirstName0
     // LastName1   FirstName1
// LastName2    FirstName2

$ctr = $_POST['counter']; //the counter == 3
for ($x = 0; $x < $ctr; $ctr++)
{
    $lastname = $_POST["LastName$x"];
    $firstname = $_POST["FirstName$x"];

    //This will get the values of LastName0,1,2 and FirstName0,1,2

    //code to save to database…
} 
```

在上面的代码中，如果 的值`counter`等于 3，则文本框的值`LastName0,1,2`和`FirstName0,1,2`将被保存。现在问题来了：如果用户决定删除`LastName1`and `FirstName1`，则 For 循环将无法正确迭代：

```
$ctr = $_POST['counter']; //the counter == 2
for ($x = 0; $x < $ctr; $ctr++)
{
    //Only LastName0 and FirstName0 will be saved.

    $lastname = $_POST["LastName$x"];
    $firstname = $_POST["FirstName$x"];

    //code to save to database…
} 
```

有人告诉我使用“push and pop”的概念来解决这个问题，但我不确定如何在这里应用它。因此，如果有人能告诉我如何应用它，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T11:40:41.883

1.  添加名称为数组的输入文本框，即`<input type="text" name="FirstName[]" />`
2.  在 php 中，您可以将它们作为数组获取。IE，

    ```
     foreach($_POST["FirstName"] as $k=>$val){
        echo $val; // give you first name
        echo $_POST["LastName"][$k]; // will give you last ame
     } 
    ```

在这种情况下，即使在 HTML 中删除了一组字段，也不会影响 php 代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T11:38:18.017

一种解决方案是使用 isset 函数，如下所示：

```
$ctr = $_POST['counter']; 
for ($x = 0; $x < $ctr; $ctr++)
{

isset($_POST["LastName$x"])?$lastname = $_POST["LastName$x"]:;
isset($_POST["FirstName$x"])?$firstname = $_POST["FirstName$x"]:;

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T11:38:42.333

如果可能，请尝试使用 LastName[N] 和 FirstName[N]，而不是使用 LastNameN 和 FirstNameN 名称，这样结果是一个数组，您可以使用 foreach 遍历它，这意味着您将不需要计数器和值的索引将不重要：

```
foreach ($_POST["LastName"] as $i=>$lastname) {
    if (!isset($_POST["FirstName"][$i])) {
        // This should only happen if someone messes with the client side before posting
        throw new Exception("Last name input does not have a related First name input");
    }   

    $firstname = $_POST["FirstName"][$i];
} 
```

如果没有，那么您可能必须以不同的方式使用您的 $counter

```
$current = 0;
while ($counter) { // Stop only when i found all
    if (isset($_POST["LastName$current"]) {
        $counter--;  // Found one
        $lastname =   $_POST["LastName$current"];
        $firstname = $_POST["FirstName$current"];
    }   
    $current++;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T11:42:11.463

解决此问题的更好方法是将数组用于 Firstname 和 Lastname。不要将它们称为 Lastname0 和 Firstname0，然后是 Lastname1 和 Firstname1，而是将它们都称为 Lastname[] 和 Firstname[]。为删除函数提供 Lastname0 和 Firstname0 等 ID，但将名称保留为数组。

提交表单时，请使用以下内容：

```
foreach($_POST['Lastname'] as $i => $lastname) {
    $firstname = $_POST['Firstname'][$i]

    //... code to save into the database here
} 
```

请注意，在 IE 中，如果您有一个空字段，它将不会被提交，所以如果 Lastname0 有一个值，但 Firstname0 没有，那么 $_POST['Firstname'][0] 实际上将包含 Firstname1 的值（假设它有一个值）。为了解决这个问题，您可以使用 javascript 在提交表单时检查字段是否为空，如果是，请在其中输入 EMPTY 一词。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-22T11:46:16.723

**如果不需要，不要使用计数器**
一个更简单的方法是在单击 admore 时添加数组名称。
在文本框中给一个名字，比如 first_name[]

`$_POST['first_name']`
如果你创建这样的表单，你可以通过在你的 php 代码中尝试使用 foreach`var_dump($_POST)`来查看事情是如何进行的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-22T11:39:18.723

在你的 for 循环中，也许你可以尝试......

> ```
> if ((isset($_POST["LastName$x"])) && (isset($_POST["FirstName$x"]))){
>     $lastname = $_POST["LastName$x"];
>     $firstname = $_POST["FirstName$x"];
> 
>      //code to save to database… 
> ```
> 
> }

这将在您尝试对变量执行任何操作之前检查变量是否存在。

# html - 通过 HTML5 在 HTML 电子邮件中播放视频

> ID：15569293
> 
> 赞同：0
> 
> 时间：2013-03-22T11:31:40.913
> 
> 标签：html, video-streaming, html5-video, html-email

我正在尝试通过 HTML 标签在电子邮件中播放 MP4 视频。（下面的代码）。

此代码已从受信任的来源（[http://www.emaildesignreview.com/email-design-best-practice/html5-video-in-email-1149/](http://www.emaildesignreview.com/email-design-best-practice/html5-video-in-email-1149/)）中获取和改编，但该来源声明它应该播放在 iPad/iPhone 上。

目前，我只能在 Apple Desktop mail 和 Hotmail（现在的 Outlook）上播放。

iPad/iPhone 将其识别为媒体文件，但拒绝播放。我的代码有问题吗，是否缺少某些东西？...还是世界还没有为此做好准备？

谢谢

```
<video width="328" height="242" poster="backup.png" controls="controls">
        <source src="videosource.mp4" type="video/mp4" />
        <a href="http://mywebsite.com/video"><img src="backup.png?1363867422" width="328" height="242" /></a>
</video> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:23:06.453

我已经对 HTML5 视频进行了相当多的测试，除非您只是发送给您知道将使用 iOS 设备打开的人，否则目前不值得麻烦。

我不久前写了这个，同样的事情仍然非常正确：http: [//jacques.corbytue.ch/blog/html5-video-in-email-one-step-closer/](http://jacques.corbytue.ch/blog/html5-video-in-email-one-step-closer/)

就您的代码而言，请尝试使用绝对 URL 而不是相对 URL。

# c# - AppDomain 未处理的异常

> ID：15569295
> 
> 赞同：5
> 
> 时间：2013-03-22T11:31:46.600
> 
> 标签：c#, exception-handling, appdomain

有很多主题涵盖了这个问题。但是，我有一个问题。

我将程序集加载到 new 中`AppDomain`，如下所示：

```
public void Run()
{
    //There's the problem.
    //As Panos Rontogiannis mentioned the thread is created in default AppDomain
    new Thread(RunApp).Start();
}

private void RunApp()
    try
    {
        AppDomain.CreateDomain("domain name").ExecuteAssembly("path to assembly");
    }
    catch (Exception _e)
    {
        MessageBox.Show("Unhandled Exception.\n" + _e);
    }
} 
```

在加载程序集的 Main 方法中，我将处理程序订阅到`UnhandledException`事件：

```
AppDomain.CurrentDomain.UnhandledException += handleException; 
```

处理程序本身：

```
public static void handleException(object a_s, UnhandledExceptionEventArgs a_args)
{
    var _e = (Exception)a_args.ExceptionObject;
    //Static loger class method
    Loger.WriteError(_e.GetType().ToString(), _e.Message, "default solution");
} 
```

但是，无论在加载的程序集中哪里抛出异常，处理程序都不会参与其中。`AppDomain`我只在默认（第一个`try{} catch{}`）中捕获异常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T23:37:39.903

最有可能的是，您无法在 new 中处理异常的原因`AppDomain`是它不是从在该中创建的线程中抛出的`AppDomain`。从[AppDomain.UnhandledException](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)上的文档来看，这并不是很直接。有趣的部分如下：

> 仅当线程的整个堆栈在没有找到适用的异常处理程序的情况下展开时，异常才会被处理，因此可以引发事件的第一个位置是在线程发起的应用程序域中。

现在，如果执行抛出的代码的线程是在您的 main 中创建的`AppDomain`（如控制台应用程序的主线程），那么您应该在 main 中添加一个处理程序`AppDomain`。请注意，如果抛出的异常类型未在主 AppDomain 中加载，.NET 的程序集加载器将尝试从应用程序的基本目录和探测路径加载它。如果这些与 child 不同`AppDomain`，则程序集将不会被解析并且会抛出一个（其他）异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T12:02:45.883

有多种原因可能会发生这种情况。[http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)上的事件文档详细介绍了这种复杂性如果似乎没有什么适用的，您能否发布重现代码？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T05:43:36.090

我真的不明白为什么处理程序没有被调用。

我最终在加载程序集的 Main 方法中使用了 FirstChanceException 而不是 UnhandledException。像这样：

```
AppDomain.CurrentDomain.FirstChanceException +=
    (obj, e) => Loger.WriteError(
        e.Exception.ToString(),
        e.Exception.Message,
        "default solution"
    ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T11:35:20.637

我的猜测是处理异常时未调用处理程序。即通过上面的try{}catch{}。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-05T15:02:31.417

这是一个迟到的回复，但如果你问我，这似乎工作正常（VS2012/.NET 4.5），当然需要在调用 ExecuteAssembly 之前注册异常处理程序：（我有一个通过写入导致访问冲突的子进程到一个空引用（不安全代码）只是为了强制崩溃，它会触发下面的 HandleException：

```
public static void HandleException(object a_s, UnhandledExceptionEventArgs a_args)
{
    var _e = (Exception)a_args.ExceptionObject;
    Console.WriteLine(_e.GetType().ToString(), _e.Message, "default solution");
}

public void StarProcessWithinAppDomain(string fileName)
{
    try
    {
        // New appdoamin / check exception isolation level 
        AppDomain sandBox = AppDomain.CreateDomain("sandBox");
        try
        {
            AppDomain.CurrentDomain.UnhandledException += HandleException;
            sandBox.ExecuteAssembly(fileName);
        }
        catch (Exception ex)
        {
            Console.WriteLine("An error occurred (inner) within AppDomain, executing \"{0}\":" + "\n" + ex.Message, fileName);
        }
        finally
        {
            AppDomain.Unload(sandBox); 
        }
    }
    catch (Exception ex)
    {
        Console.WriteLine("An error occurred within AppDomain, executing \"{0}\":" + "\n" + ex.Message, fileName);
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-11T14:05:08.283

1.  `FirstChanceException`火灾。
2.  执行任何`catch`块。
3.  如果没有`catch`块或`throw`在块中则`UnhandledException`触发

您的`catch`块确保`UnhandledException`不会触发。

# android - 如何在android的锁屏状态下捕获紧急按钮实现的关键事件

> ID：15569299
> 
> 赞同：1
> 
> 时间：2013-03-22T11:32:10.130
> 
> 标签：android, menu, locking, keyevent, keyguard

我想要它：开始一项紧急活动，比如长按 MENU 按钮。虽然有电话锁。由于这是紧急情况，长按 MENU 按钮，它将捕获关键事件/按下并启动开发人员定义的紧急活动。但现在的问题是，当有屏幕锁定时，按键保护将被锁定，即它无法在手机锁定状态下捕获任何按键事件/按下。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:51:21.513

即使屏幕被锁定但使用加速度计（即通过摇动）你也无法调度，你可以打开屏幕锁定并做任何事情......即使你在后台启动任何事情

# c# - DNN 链接模块文件选择器

> ID：15569300
> 
> 赞同：0
> 
> 时间：2013-03-22T11:32:10.293
> 
> 标签：c#, dotnetnuke

我在 DNN 页面上放置了一个链接模块。当我进入添加链接并选择“文件”链接到文件时，页面挂起并且永远不会前进。当我以管理员身份登录时，不会发生这种情况。

我已经在页面上完全控制了这个用户，模块也继承了这些权限。我也完全控制了 Admin > Files。

有趣的是，我认为这不是权限问题，因为它有时会起作用，而且我可以选择一个文件。调试告诉我，在 IsReadLockHeld 中始终为真，并且永远不会退出循环以返回文件夹计数。

有任何想法吗？

谢谢， 阿米特

# matlab - 如何在 Matlab 中使用多线性函数？

> ID：15569302
> 
> 赞同：3
> 
> 时间：2013-03-22T11:32:23.587
> 
> 标签：matlab, math

多线性函数是这样的，它对每个变量都是线性的。例如，x1+x2x1-x4x3 是一个多线性函数。使用它们需要适当的数据结构和算法，以实现快速分配、分解和基本算法。

**Matlab 中是否存在一些用于处理多线性函数的库？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:44:49.747

不，没有那么多。

例如， interp2 和 interpn 具有“线性”方法，正如您所描述的那样有效。但这大约是供应的极限。这种形式没有更一般的功能。

无论如何，这类函数有一些明显的局限性。例如，当应用于彩色图像处理时，它们通常是一个非常糟糕的选择，因为它们对图像中的中性色做了什么。那里强烈优选其他功能形式。

当然，对于因式分解等操作，总是有符号工具箱，但那个工具不是速度恶魔。

编辑：（其他功能形式）

我将使用双线性形式作为示例。This is the scheme that is employed by tools like Photoshop when bilinear interpolation is chosen. 在一组四个像素之间的正方形区域内，我们有形式

```
f(x,y) = f_00*(1-x)*(1-y) + f_10*x*(1-y) + f_01*(1-x)*y + f_11*x*y 
```

其中 x 和 y 在单位平方 [0,1]X[0,1] 上变化。我在这里把它写成一个函数，由正方形四个角的函数值参数化。当然，这些值在图像插值中作为这些位置的像素值给出。

如前所述，双线性插值在 x 和 y 中确实是线性的。如果您保持 x 或 y 固定，则该函数在另一个变量中是线性的。

一个有趣的问题是沿着单位正方形的对角线会发生什么？因此，当我们沿着点 (0,0) 和 (1,1) 之间的路径走时。由于 x = y 沿着这条路径，用 x 代替那个表达式中的 y，然后展开。

```
f(x,x) = f_00*(1-x)*(1-x) + f_10*x*(1-x) + f_01*(1-x)*x + f_11*x*x
       = (f_11 + f_00 - f_10 - f_01)*x^2 + (f_10 + f_01 - 2*f_00)*x + f_00 
```

所以我们最终得到一个沿主对角线的二次多项式。同样，如果我们沿着另一个对角线，它的形式也是二次的。因此，尽管这种野兽具有“线性”性质，但它在任何线性路径上都不是真正的线性。它仅沿平行于插值变量轴的路径是线性的。

在三维中，这是我们真正关心颜色空间插值行为的地方，主对角线现在将沿该路径显示三次行为，尽管函数的“线性”名称。

为什么这些对角线很重要？沿对角线会发生什么？如果我们的映射将颜色从 RGB 颜色空间转移到其他空间，那么图像中的中性色沿着路径 R=G=B 存在。这是立方体的对角线。问题是，当您使用中性渐变对图像进行插值时，您会在色彩空间转换后的结果中看到一个渐变，当渐变沿着对角线通过一个又一个立方体移动时，该渐变会从中性颜色变为某种非中性颜色。可悲的是，人眼非常能够看到与中立的差异，因此这种行为至关重要。（顺便说一句，这就是彩色喷墨打印机内部发生的事情，所以人们确实关心它。）

选择的替代方法是将单位正方形分解为一对三角形，共享边沿该主对角线。线性插值现在在三角形内部工作，并且沿着该边，插值纯粹是该共享边的端点的函数。

在三个维度上，同样的事情发生了，除了我们将单位立方体分解成六个四面体，所有这些都共享立方体的主对角线。差异确实非常重要，中性梯度与中性的偏差显着减少。事实证明，眼睛对沿其他梯度的偏差没有那么敏感，因此沿其他路径的损失几乎不会造成太大伤害。至关重要的是中性色，我们必须尽可能准确地再现颜色。

因此，如果您使用通常称为 3-d 查找表定义的映射进行色彩空间插值，这是进行插值的公认方法（由 ICC 同意，国际色彩联盟的首字母缩写词。）

# c# - 使用 2 个 ui 线程最小化后模态形式不会恢复

> ID：15569306
> 
> 赞同：0
> 
> 时间：2013-03-22T11:32:35.387
> 
> 标签：c#, multithreading, winforms

问题是我有某种显示加载动画的启动画面。我有专门的经理来显示和隐藏它。

```
class Manager
 {
   private Form CurForm;
    Thread curt;

    private Manager()
    {
        curt= new Thread(start);
        curt.ApartmentState = ApartmentState.STA;
        curt.IsBackground = true;
        curt.Start();
    }

    void start()
    {
        CurForm = new Animation();
        Application.Run(CurForm);
    }

    public static readonly Manager Active = new Manager();

    public static void Show()
    {
        if (Active.CurForm != null)
        {
            Active.CurForm.Invoke(new Action(() => { Active.CurForm.Show(); }));
        }
    }

    public static void Hide()
    {
        if (Active.CurForm != null)
        {
            Active.CurForm.Invoke(new Action(() => { Active.CurForm.Hide(); }));
        }
    }
} 
```

我打开了一些模态表单（ShowDialog）。此模式表单不显示在任务栏中。

我可以轻松地将其最小化，然后单击任务栏上的主窗体后，它会在顶部显示模态窗体。

但是当我在加载所有必要数据的同时显示这个加载动画时。

类似的东西（当然这只是一个测试它的示例，在实际应用程序中，加载所有数据和带有大量控件的表单需要很长时间）

```
 public modal()
    {
        Manager.Show();
        InitializeComponent();
        Thread.Sleep(5000);
        Manager.Hide();
    } 
```

当我像上面所说的那样尝试最小化和恢复它时，它不会恢复我的模态表单，而只会显示我的主要不可用表单。不仅如此，它在某些情况下有效，但在某些情况下无效。

有谁知道它为什么会发生或如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T19:47:45.310

这很奇怪，但是当我这样修改时，一切似乎都正常。

我只是杀死单独的ui线程。

```
public class MyApplicationContext:ApplicationContext
{
    public Form CurForm;

    ManualResetEvent ready = new ManualResetEvent(false);

    public MyApplicationContext()
    {
        CurForm=new Animation();
        CurForm.Show();
    }
}

class Manager
{
    private MyApplicationContext CurContext;

    Thread curt;

    void start()
    {
        try
        {
            CurContext = new MyApplicationContext();
            Application.Run(CurContext);
        }
        catch
        {
            CurContext.CurForm.Close(); 
        }
    }

    private void Init()
    {
        curt = new Thread(start);
        curt.SetApartmentState(ApartmentState.STA);
        curt.IsBackground = true;
        curt.Start(); 
    }

    public static Manager Active
    {
        get
        {
            if (active == null)
            {
                active = new Manager();

            }
            return active;
        }
    }

    private static Manager active;

    public static void Show()
    {
        Active.Init();           
    }

    public static void Hide()
    {
        Active.curt.Abort();                        
    } 
```

# dynamics-crm-2011 - 在站点地图中添加链接时如何设置链接文本？

> ID：15569313
> 
> 赞同：3
> 
> 时间：2013-03-22T11:32:52.857
> 
> 标签：dynamics-crm-2011, dynamics-crm, crm, dynamics-crm-online

我试图在站点地图中添加一个链接。您可以在下图中看到导入`customizations`xml 后得到的内容。

![在此处输入图像描述](../Images/71a72197660c28724c0df1df53e84874.png)

如何更改名称“Unknown3205”？？？

我添加了以下 XML 设置：

```
 <Group Id="Extensions" ResourceId="Group_Extensions">
          <SubArea Id="new_Edit_Trip" Url="$Webresource:new_/Edit_Task.htm"/>
          .....................
          ...................
        </Group> 
```

它有什么问题？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T11:39:56.383

您可以将属性指定`Title`为`SubArea`. 像这样的东西：

```
<SubArea Id="new_Edit_Trip" Title="Edit Task" Url="$Webresource:new_/Edit_Task.htm"/> 
```

# jquery - 环绕特定的 div

> ID：15569315
> 
> 赞同：2
> 
> 时间：2013-03-22T11:32:55.980
> 
> 标签：jquery

我试过了`Wrap`，`WrapALl`也试过了，`nextUntil`但这个很棘手。我有这个 html

```
<ul class="quick-list quick-glance hideOnSearch show-for-medium-up">
       <li><span class="strong">Price:</span> $198000</li>
       <li><span class="strong">Miles:</span> 349999</li>
       <li><span class="strong">Vehicle Type:</span> Minivans and Vans</li>
     </ul> 
```

我希望它看起来像

```
 <ul class="accordion show-for-small hide-for-medium-up">
      <li>
        <div class="title">TITLE</div>
        <div class="content"> 

             <ul class="quick-list quick-glance hideOnSearch show-for-medium-up">
               <li><span class="strong">Price:</span> $198000</li>
               <li><span class="strong">Miles:</span> 349999</li>
               <li><span class="strong">Vehicle Type:</span> Minivans and Vans</li>
             </ul>

        </div>
      </li>
    </ul> 
```

我试过这个

```
$('ul.quick-list').wrapAll('<ul class="accordion"><li><div class="title">TITLE</div><div class="content"></div></li></ul>'); //Single page Top accordion 
```

但它放在`quick-list`错误的地方。

我怎么能用 jQuery 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:40:03.317

wrapAll() 只支持一个内部元素，你有两个。解决方案：

```
$('ul.quick-list').wrap('<ul class="accordion"><li><div class="content"></div></li></ul>');
$('.content').before('<div class="title">TITLE</div>'); 
```

看一个例子：http: [//jsfiddle.net/powtac/HzDCD/1/](http://jsfiddle.net/powtac/HzDCD/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:50:06.003

试试这个**[演示](http://jsfiddle.net/pintu31/8gCR4/1/)**

```
$(function(){
$('ul.quick-list').wrap('<ul class="accordion show-for-small hide-for-medium-up">').wrap("<li>").wrap('<div class="content">');

$('.content').before('<div class="title">TITLE</div>');
}); 
```

# cassandra - Toad for Cloud 未列出 Cassandra 中 Cql3 创建的对象

> ID：15569319
> 
> 赞同：2
> 
> 时间：2013-03-22T11:33:10.423
> 
> 标签：cassandra, toad

我在 ubuntu 上尝试 Cassandra v1.2.3，并使用 cli 和 cqlsh 接口创建了 KeySpace 和对象。

当Toad for cloud连接到这个Casandra节点，查询和插入数据时，发现除了cli创建的对象外，没有显示cql3通过cqlsh创建的对象。

谁能告诉我如何制作 Toad for Cloud 以查看这些对象，或者它尚不受支持？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:48:13.387

似乎 toad 仅支持 thrift 而不是二进制协议`'CQL'`，但请查看[本](http://toadforcloud.com/index.jspa#video-2)教程，其中包含有关将 cassandra 与 toad 一起使用的演示。

# php - PHP - MYSQL - 关于调用数据并在文本框中显示

> ID：15569328
> 
> 赞同：0
> 
> 时间：2013-03-22T11:33:45.233
> 
> 标签：php, html, sql, database

我有一张桌子

```
EVENTCODE   EVENTNAME    VENUE   DATE   ACTION
001         Concert      Here    09/13  Reserve Now
002         Sports       Here    09/12  Reserve Now 
```

当我点击“立即预订”时，我会弹出一个表单

```
EVENTNAME: ------ (fetch)
VENUE: --------- (fetch)
DATE: ------ (fetch)
Full Name: ---- (user input)
Contact No.: ----- (user input)
Email: ----- (user input)
[SUBMIT BUTTON] 
```

现在我的问题是，您如何独立显示数据库中的某些数据？就像我在第一个条目 (EVENTCODE 001) 上单击立即预订时，第一个条目上的 EVENTNAME、VENUE、DATE 会反映在表单上吗？以及如何获取该“反射”以便我可以将其记录为另一个表，例如事务？

我真的很生气，因为我想不出一个伪代码或它的逻辑。请帮忙。谢谢！

这是我的代码：

```
<?php

    if(mysqli_num_rows($qr)==0){
        echo ("No record fetched...<br>");
    }//end no record
    else{//there is/are record(s)
    ?>
    <div class="scroll" style="height:200px; overflow:scroll;" >
    <table width="100%"  border="1" class="altrowstable" id="alternatecolor">
      <tr align="center">
      <th>Name</th>
      <th>Venue</th>
      <th>Date & Time</th>
      <th> </th>
   </tr>
<?php
    while ($record=mysqli_fetch_array($qr)){//redo to other records
?>
    <tr>
      <td><?php echo $record['name']; ?></td>
      <td><?php echo $record['venue']; ?></td>
      <td><?php echo $record['date']; ?></td>
      <td><a href="reservemain.php" target="reserve">Reserve Now!</a></td>
    </tr>
    <?php
    }//end of while
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:36:52.347

一种方法是将唯一标识符作为 GET 参数传递给`reservemain.php`，例如 EVENTCODE。然后，`reservemain.php`您可以通过给定的 EVENTCODE 识别特定记录。

一个实际的例子：

```
<td><a href="reservemain.php?event_code=<?php echo $rows['code']; ?>" target="reserve">Reserve Now!</a></td> 
```

然后可以`reservemain.php`用`$_GET['event_code']`.

# python - 使用 Python requests 模块发出 SOAP 请求

> ID：15569330
> 
> 赞同：5
> 
> 时间：2013-03-22T11:34:01.580
> 
> 标签：python, soap

我使用 python 请求模块来处理 REST 请求。

我正在尝试提出肥皂请求，但我想知道无法获得此示例。这是我的肥皂正文和标题。

```
<auth>
<apikey>xcvzxcvcxzv-a0-0035c6fbc04f</apikey>
</auth> 
```

身体

```
<reports>
<report>
<name>Test</name>
</report>
</reports> 
```

这是 wsdl 网址

```
https://ltn.net/webservices/booking/r1/index.wsdl 
```

请告诉我如何使用 python 在这里发出帖子请求。如果无法使用`requests`模块，那么其他选择是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-11-13T10:50:29.263

我最近遇到了同样的问题，不幸的是，suds 和 jurko-suds（一个维护的 suds 分支）都无法提供帮助。这主要是因为 suds 不断生成格式错误的肥皂信封（如果应该生成的肥皂有一些应该在 CDATA 中的内容，则尤其会发生这种情况）与服务器所期望的不同。即使我尝试使用 __inject 选项自己注入肥皂信封，情况也是如此。

这是我使用python请求解决它的方法

```
import requests

request = u"""<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:req="http://SOME_URL">
   <soapenv:Header>
         <user>{0}</user>
         <pass>{1}</pass>
   </soapenv:Header>
   <soapenv:Body>
      <req:RequestInfo><![CDATA[<?xml version='1.0' encoding='UTF-8'?><request xmlns='http://SOME_OTHER_URL'>
    <Call>
        <callID>{2}</callID>
        ...
    </Call>
    <Foo>
        <Bar>
            <Baz>{3}</Baz>
            ...
        </Bar>
        <Neytri>
            ...
        </Neytri>
    </Foo>
    <Title>{4}</Title>
</request>]]></req:RequestInfo>
   </soapenv:Body>
</soapenv:Envelope>""".format('Jake_Sully', 
                              'super_secret_pandora_password',
                              'TYSGW-Wwhw',
                              'something_cool',
                              'SalaryPayment',
                              'Pandora_title',
                            )

encoded_request = request.encode('utf-8')

headers = {"Host": "http://SOME_URL",
            "Content-Type": "application/soap+xml; charset=UTF-8",
            "Content-Length": str(len(encoded_request)),
            "SOAPAction": "http://SOME_OTHER_URL"}

response = requests.post(url="http://SOME_OTHER_URL",
                     headers = headers,
                     data = encoded_request,
                     verify=False)

print response.content #print response.text 
```

真正重要的是在标头中指定 Content-Type 以及 SOAPAction。根据[SOAP 1.1 规范](http://archive.oreilly.com/pub/post/unraveling_the_mystery_of_soap.html)

```
 The SOAPAction HTTP request header field can be used to indicate the intent of the SOAP HTTP request. The value is a URI identifying the intent. SOAP places no restrictions on the format or specificity of the URI or that it is resolvable. An HTTP client MUST use this header field when issuing a SOAP HTTP Request. 
```

SOAPAction 的值通常可以在您要进行的 API 调用的 wsdl 文件中找到；如果 wsdl 文件中不存在，则可以使用空字符串作为该标头的值

另见：

1.  [http://archive.oreilly.com/pub/post/unraveling_the_mystery_of_soap.html](http://archive.oreilly.com/pub/post/unraveling_the_mystery_of_soap.html)
2.  [http://www.prodigyproductionsllc.com/articles/programming/call-a-webservice-using-soap-and-python/](http://www.prodigyproductionsllc.com/articles/programming/call-a-webservice-using-soap-and-python/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-22T12:03:41.507

要使用 SOAP 服务器，您应该使用专门的库。不幸的是，没有很好的 Python SOAP 客户端模块，我用过的最好的模块是[suds](https://fedorahosted.org/suds/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-19T10:01:31.927

这在很大程度上是假设的，因为我不知道有人实际实现了它，但 suds 支持自定义实现 suds.transport.Transport。一次是 suds.transport.http.HttpTransport。因此，从技术上讲，通过实现传输子类，您可以创建使用请求的 suds 传输。

[http://jortel.fedorapeople.org/suds/doc/suds.transport.http.HttpTransport-class.html](http://jortel.fedorapeople.org/suds/doc/suds.transport.http.HttpTransport-class.html)是默认使用的，它返回 [http://jortel.fedorapeople.org/suds/doc/suds.transport .Reply-class.html](http://jortel.fedorapeople.org/suds/doc/suds.transport.Reply-class.html)如您所见，包装请求回复应该相当简单，以便 suds 理解它们。传输请求（应该与请求一起发送）记录在这里 [http://jortel.fedorapeople.org/suds/doc/suds.transport.Request-class.html](http://jortel.fedorapeople.org/suds/doc/suds.transport.Request-class.html) 如果没有人向我提出请求，我可能迟早会实现它

为什么要这么努力？因为 suds 在内部使用 urllib2 远不如 python-requests 作为 HTTP 客户端实现。

还有一个编辑：我提供了一个要点作为起点[https://gist.github.com/nanonyme/6268358](https://gist.github.com/nanonyme/6268358)。它是 MIT 代码，未经测试，但应该作为传输的起点。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-10-06T13:06:50.433

万一有人最终读到这篇文章：基于 suds 的解决方案大多停滞不前，但有一个名为 zeep 的更新的库，写在 requests 和 lxml 之上。这是一个完全独立的解决方案，而不是像其他这样的泡沫叉。我从个人经验中知道，这在某些企业环境中使用。

# .net - 从.net紧凑框架中的exe获取图标

> ID：15569331
> 
> 赞同：3
> 
> 时间：2013-03-22T11:34:12.077
> 
> 标签：.net, icons, compact-framework, exe

我正在为 Windows Embedded Compact 7 开发一些 Windows 窗体应用程序，该应用程序使用 .net compact 框架和 c# Smart Device 项目类型模拟桌面外壳。我使用`SHGetFileInfo`WinAPI 函数从 exe 文件中获取关联的图标，下面是我的代码：

```
[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Auto)]
public struct SHFILEINFO
{
    public IntPtr hIcon;
    public IntPtr iIcon;
    public uint dwAttributes; 
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 256)]
    public string szDisplayName;      
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 80)]
    public string szTypeName; 

    public SHFILEINFO(bool setDefaults)
    {
        hIcon = IntPtr.Zero;
        iIcon = IntPtr.Zero;
        dwAttributes = 0;
        szDisplayName = "";
        szTypeName = "";
    }
}
public class Win32
{
    public const uint SHGFI_ICON = 0x000000100; 
    public const uint SHGFI_LARGEICON = 0x00000000; 
    public const uint SHGFI_SMALLICON = 0x00000001; 

    [DllImport("coredll.dll")]
    public static extern IntPtr SHGetFileInfo(string pszPath,
                                              int dwFileAttributes,
                                              ref SHFILEINFO psfi,
                                              uint cbSizeFileInfo,
                                              uint uFlags);
 } 
```

然后我从这里调用这个函数：

```
private static Icon ExtractIconFromExe(string targetPath)
{
IntPtr hImgLarge; 
var shinfo = new SHFILEINFO();
hImgLarge = Win32.SHGetFileInfo(targetPath,
                                0,
                                ref shinfo,
                                (uint)Marshal.SizeOf(shinfo),
                                Win32.SHGFI_ICON);
var icon = Icon.FromHandle(shinfo.hIcon);
return icon;
} 
```

它在我的 Windows 7 Ultimate 上运行良好（当然使用 shell32.dll 而不是 coredll.dll），但是当我尝试在 Windows Embedded 或 Smart Device 模拟器上运行此代码时，我在这一行中出现了无信息异常：`Icon.FromHandle(shinfo.hIcon)`. 有人知道如何解决我的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T12:09:14.947

什么文件`targetPath`？它存在于 Windows Embedded 上吗？它是空的还是空的？我们不知道！

在那里放一些错误检查代码。

您`IntPtr hImgLarg`是专门设置的，因此您可以在继续之前验证返回值不是错误号。

此外，在编写支票时，请查看`shinfo`- 并特别查看是否`SHGetFileInfo`填充`shinfo.hIcon`。

你可能正在传递一个`NULL`to `Icon.FromHandle`。

# r - 获取年份的日期差异（浮点数）

> ID：15569333
> 
> 赞同：49
> 
> 时间：2013-03-22T11:34:19.737
> 
> 标签：r, date

我想根据参考日期和测量日期以及源半衰期（以年为单位）之间的差异来纠正源活动。说我有

```
ref_date <- as.Date('06/01/08',format='%d/%m/%y') 
```

以及 my`data.frame`中具有相同日期格式的列，例如，

```
today <- as.Date(Sys.Date(), format='%d/%m/%y') 
```

`lubridate`我可以使用包找到这些日期之间的年数

```
year(today)-year(ref_date)
[1] 5 
```

例如，有没有我可以用来获得浮点答案`today - ref_date`= 5.2y 的函数？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-03-22T11:36:13.757

是的，当然，使用`difftime()`as 数字：

```
R> as.numeric(difftime(as.Date("2003-04-05"), as.Date("2001-01-01"), 
+                      unit="weeks"))/52.25
[1] 2.2529
R> 
```

请注意，我们确实必须切换到以 52.25 为单位的周数，因为在计算年份方面存在一些歧义——2 月 29 日大约每 4 年出现一次，但不是每 100 次等。

所以你必须定义它。`difftime()`处理长达数周的所有时间单位。由于非常量“分子”的相同原因，无法完成月份。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2018-02-15T15:06:38.210

lubridate包包含一个内置函数**time_length** **，**它可以帮助执行此任务。

 **```
time_length(difftime(as.Date("2003-04-05"), as.Date("2001-01-01")), "years")
[1] 2.257534

time_length(difftime(as.Date("2017-03-01"), as.Date("2012-03-01")),"years")
[1] 5.00274 
```

可以在[此处找到](https://cran.r-project.org/web/packages/lubridate/lubridate.pdf)**lubridate**包的文档。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2018-08-24T13:42:19.130

受[Bryan F](https://stackoverflow.com/users/5203760/bryan-f)启发，`time_length()`如果使用区间对象会更好

```
time_length(interval(as.Date("2003-04-05"), as.Date("2001-01-01")), "years")
[1] -2.257534
time_length(difftime(as.Date("2017-03-01"), as.Date("2012-03-01")),"years")
[1] 5.00274
time_length(interval(as.Date("2017-03-01"), as.Date("2012-03-01")),"years")
[1] -5 
```

您可以查看是否`interval()`用于获取时差，然后将其传递给`time_length()`，`time_length()`会考虑到并非所有月份和年份的天数都相同的事实，例如闰年。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-10-30T13:39:44.030

不是您问题的确切答案，但[Dirk Eddelbuettel](https://stackoverflow.com/users/143305/dirk-eddelbuettel)在某些情况下的答案可能会产生小错误。

请考虑以下示例：

```
as.numeric(difftime(as.Date("2012-03-01"), as.Date("2017-03-01"), unit="weeks"))/52.25
[1] -4.992481 
```

这里的正确答案应该是至少 5 年。

以下函数（使用**lubridate**包）将计算两个日期之间的整年数：

```
# Function to calculate an exact full number of years between two dates
year.diff <- function(firstDate, secondDate) {
  yearsdiff <- year(secondDate) - year(firstDate)
  monthsdiff <- month(secondDate) - month(firstDate)
  daysdiff <- day(secondDate) - day(firstDate)

  if ((monthsdiff < 0) | (monthsdiff == 0 & daysdiff < 0)) {
    yearsdiff <- yearsdiff - 1
  }

  yearsdiff
} 
```

您可以修改它以计算小数部分，具体取决于您如何定义上一年（未完成）的天数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-10T12:43:50.840

您可以使用`AnnivDates()`包**BondValuation**的功能：

```
R> library('BondValuation')
R> DateIndexes <- unlist(
+   suppressWarnings(
+     AnnivDates("2001-01-01", "2003-04-05", CpY=1)$DateVectors[2]
+     )
+   )
R> names(DateIndexes) <- NULL
R> DateIndexes[length(DateIndexes)] - DateIndexes[1]
[1] 2.257534 
```

单击[此处](https://cran.r-project.org/web/packages/BondValuation/BondValuation.pdf)获取包**BondValuation**的文档。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-09T16:04:49.017

要获得*年的日期差异（浮点数）*，您可以将日期转换为年的十进制数，然后计算它们的差异。

```
#Example Dates
x <- as.Date(c("2001-01-01", "2003-04-05"))

#Convert Date to decimal year:
date2DYear <- function(x) {
  as.numeric(format(x,"%Y")) + #Get Year an add
    (as.numeric(format(x,"%j")) - 0.5) / #Day of the year divided by
    as.numeric(format(as.Date(paste0(format(x,"%Y"), "-12-31")),"%j")) #days of the year
}
diff(date2DYear(x)) #Get the difference in years
#[1] 2.257534 
```

我从一年中的某一天减去`0.5`，因为不知道您是在一天的开始还是结束，并且`%j`以`1`.

我认为两者之间的差异`2012-03-01`不必*是*`2017-03-01`5年，因为 2012 年有 366 天，2017 年有 365 天，并且在一年中的第 61 天和第 60 天。*`2012-03-01``2017-03-01`*

 *```
x <- as.Date(c("2012-03-01", "2017-03-01"))
diff(date2DYear(x))
#[1] 4.997713 
```

请注意，当您进行累积时间差时，使用`time_length`和`interval`from`lubridate`不必得出相同的结果。

```
library(lubridate)

x <- as.Date(c("2012-01-01", "2012-03-01", "2012-12-31"))
time_length(interval(x[1], x[3]), "years")
#[1] 0.9972678
time_length(interval(x[1], x[2]), "years") +
 time_length(interval(x[2], x[3]), "years")
#[1] 0.9995509 #!
diff(date2DYear(x[c(1,3)]))
#[1] 0.9972678
diff(date2DYear(x[c(1,2)])) + diff(date2DYear(x[c(2,3)]))
#[1] 0.9972678

x <- as.Date(c("2013-01-01", "2013-03-01", "2013-12-31"))
time_length(interval(x[1], x[3]), "years")
#[1] 0.9972603
time_length(interval(x[1], x[2]), "years") +
 time_length(interval(x[2], x[3]), "years")
#[1] 0.9972603
diff(date2DYear(x[c(1,3)]))
#[1] 0.9972603
diff(date2DYear(x[c(1,2)])) + diff(date2DYear(x[c(2,3)]))
#[1] 0.9972603 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-07-30T13:56:14.753

由于您已经在使用 lubridate 包，您可以使用一个简单的技巧获得浮点数：

查找一年中的秒数：

```
seconds_in_a_year <- as.integer((seconds(ymd("2010-01-01")) - seconds(ymd("2009-01-01")))) 
```

现在获取您想要的 2 个日期之间的秒数

```
seconds_between_dates <- as.integer(seconds(date1) - seconds(date2)) 
```

您对浮点数年数的最终答案将是

```
years_between_dates <- seconds_between_dates / seconds_in_a_year 
```***

# android - RSS 提要不滚动或打开浏览器？

> ID：15569334
> 
> 赞同：0
> 
> 时间：2013-03-22T11:34:21.643
> 
> 标签：android, rss

我有两个工作 RSS 提要。两者都像预期的那样更新，但是我的第一个 rss 提要是可滚动的，并且允许单击每篇文章（然后出现浏览器）。我只是想知道我是否错过了一些重要的事情或者我做错了？

```
private class MyTask extends AsyncTask<Void, Void, Void>{

                @Override
                protected Void doInBackground(Void... arg0) {
                    try {
                        URL rssUrl1 = new URL("http://rss");
                        SAXParserFactory mySAXParserFactory = SAXParserFactory.newInstance();
                        SAXParser mySAXParser = mySAXParserFactory.newSAXParser();
                        XMLReader myXMLReader = mySAXParser.getXMLReader();
                        RSSHandler myRSSHandler = new RSSHandler();
                        myXMLReader.setContentHandler(myRSSHandler);
                        InputSource myInputSource = new InputSource(rssUrl1.openStream());
                        myXMLReader.parse(myInputSource);
                        myRssFeed = myRSSHandler.getFeed(); 

                        ///URL rssUrl1 = new URL("http://rss");
                        URL rssUrl = new URL("http://www.midlandsireland.ie/news.rss");
                        SAXParserFactory mySAXParserFactory1 = SAXParserFactory.newInstance();
                        SAXParser mySAXParser1 = mySAXParserFactory1.newSAXParser();
                        XMLReader myXMLReader1 = mySAXParser1.getXMLReader();
                        RSSHandler myRSSHandler1 = new RSSHandler();
                        myXMLReader1.setContentHandler(myRSSHandler1);
                        InputSource myInputSource1 = new InputSource(rssUrl.openStream());
                        myXMLReader1.parse(myInputSource1);
                        myRssFeed1 = myRSSHandler1.getFeed(); 

                    } catch (MalformedURLException e) {
                        e.printStackTrace();    
                    } catch (ParserConfigurationException e) {
                        e.printStackTrace();    
                    } catch (SAXException e) {
                        e.printStackTrace();
                    } catch (IOException e) {
                        e.printStackTrace();    
                    }
                    return null;
                }

                @Override
                protected void onPostExecute(Void result) {
                    if (myRssFeed!=null && myRssFeed1!=null) {
                        ArrayAdapter<RSSItem> adapter =
                                new ArrayAdapter<RSSItem>(getApplicationContext(), 
                                        android.R.layout.simple_list_item_1, myRssFeed.getList());
                                            setListAdapter(adapter);

                        ArrayAdapter<RSSItem> adapter1 =
                               new ArrayAdapter<RSSItem>(getApplicationContext(),            
                                       android.R.layout.simple_list_item_1,myRssFeed1.getList());
                        ListView lv = (ListView) findViewById(R.id.list1);
                        lv.setAdapter(adapter1);
                    } 
                    else 
                    {
                     setListAdapter(new ArrayAdapter<RSSItem>(getApplicationContext(),            
                             android.R.layout.simple_list_item_1, new ArrayList<RSSItem>()));

                     ArrayAdapter<RSSItem> adapterEmpty1 = 
                               new ArrayAdapter<RSSItem>(getApplicationContext(),            
                                       android.R.layout.simple_list_item_1, new ArrayList<RSSItem>());
                        ListView lv = (ListView) findViewById(R.id.list1);
                        lv.setAdapter(adapterEmpty1);
                    } 
                    super.onPostExecute(result);
                }
            }
            @Override   
    protected void onListItemClick(ListView l, View v, int position, long id) {     
                Uri feedUri = Uri.parse(myRssFeed.getItem(position).getLink());
                Intent myIntent = new Intent(Intent.ACTION_VIEW, feedUri);
                startActivity(myIntent);
            }

        } 
```

我尝试将工作提要添加到第二个提要位置，所以我认为它与列表视图或文本视图有关？你们有什么感想？

* * *

```
 protected void onPostExecute(Void result) {
                    if (myRssFeed!=null && myRssFeed1!=null) {
                        ArrayAdapter<RSSItem> adapter =
                                new ArrayAdapter<RSSItem>(getApplicationContext(), 
                                        android.R.layout.simple_list_item_1, myRssFeed.getList());
                                            setListAdapter(adapter);

                        ArrayAdapter<RSSItem> adapter1 =
                               new ArrayAdapter<RSSItem>(getApplicationContext(),            
                                       android.R.layout.simple_list_item_1,myRssFeed1.getList());
                                            ListView lv = (ListView) findViewById(R.id.list1);
                                                lv.setAdapter(adapter1);
                                                lv.setOnItemClickListener(mListener);   

                                                ListView lv.OnItemClickListener mListener = new OnItemClickListener() {
                                                    @Override
                                                    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                                                        Uri feedUri1 = Uri.parse(myRssFeed1.getItem(position).getLink());
                                                        Intent myIntent1 = new Intent(Intent.ACTION_VIEW, feedUri1);
                                                        startActivity(myIntent1);                   
                                                    };
                                                }

                    } 
```

* * *

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/tableLayout1"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
     android:orientation="vertical"
    android:background="@color/white">

    <fragment
        android:id="@+id/map"
        android:layout_width="300dp"
        android:layout_height="413dp"
        android:layout_marginTop="5dp"
        android:layout_toRightOf="@+id/button5"
        class="com.google.android.gms.maps.MapFragment" />

    <Button
        android:id="@+id/button3"
        android:layout_width="305dp"
        android:layout_height="100dp"
        android:layout_marginLeft="34dp"
        android:layout_marginTop="10dp"
        android:onClick="ClickTourismButton"
        android:layout_below="@+id/map"
        android:text="Touism Guide" />
    <TextView
        android:id="@+id/button5"
        android:layout_width="34dp"
        android:textIsSelectable="true"
        android:layout_height="match_parent"
        android:background="@color/grey"
        />
    <TextView
        android:id="@+id/button6"
        android:layout_width="34dp"
        android:textIsSelectable="true"
        android:layout_alignParentRight="true" 
        android:layout_height="match_parent"
        android:background="@color/grey"
        />
    <Button
        android:id="@+id/button4"
        android:layout_width="305dp"
        android:layout_height="100dp"
       android:layout_marginLeft="34dp"
        android:layout_below="@+id/button3"
        android:text="Whats Nearby" />
    <Button
        android:id="@+id/button2"
        android:layout_width="305dp"
        android:layout_height="100dp"
        android:layout_marginLeft="34dp"
        android:layout_below="@+id/button4"
        android:text="Favouites" />
    <Button
        android:id="@+id/button1"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="304dp"
       android:layout_marginLeft="34dp"  
        android:layout_height="100dp"
        android:layout_below="@+id/button2"
        android:text="See Full Map" />   

    <TextView
        android:layout_width="260dp"
        android:layout_height="413dp"
        android:layout_marginLeft="10dp"
        android:layout_marginTop="5dp"
        android:textIsSelectable="true"
        android:layout_toRightOf="@+id/map"
        android:layout_toLeftOf="@+id/button6"
        android:id="@+id/feedupdate1" />

    <ListView
        android:id="@android:id/list"
        android:background="@color/red"
        android:layout_toRightOf="@+id/map"
        android:layout_width="260dp"
         android:layout_marginTop="5dp"
        android:layout_marginLeft="10dp"
        android:layout_height="413dp" />

    <TextView
        android:id="@+id/empty"
        android:textIsSelectable="true"
        android:layout_width="260dp"
        android:layout_height="413dp"
        android:layout_marginLeft="10dp"
         android:layout_marginTop="5dp"
        />
    <ListView

        android:id="@+id/list1"
        android:background="@color/blue"
        android:layout_toRightOf="@+id/button3"
        android:layout_width="260dp"
        android:layout_marginTop="430dp"
        android:layout_marginLeft="6dp"
        android:layout_height="390dp" /> 
    <TextView
        android:id="@+id/feedupdate"
        android:layout_width="260dp"
        android:layout_height="390dp"
        android:layout_marginLeft="6dp"
        android:layout_marginTop="430dp"
        android:textIsSelectable="true"
        android:layout_toRightOf="@+id/button3"
         />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:54:46.377

您似乎使用的 A`ListActivity`管理单个`ListView`小部件。在此之后`onListItemClick`，您在 中使用的回调`Activity`将仅适用于`ListView`由`ListActivity`（具有 id 的`android.R.id.list`）管理的回调。对于另一个`ListView`，您需要设置自己的`OnItemClickeListener`. 例如：

```
// a field in your ListActivity
OnItemClickListener mListener = new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
         // do the stuff for the second list feed                   
    }
} 
```

`OnItemClickListener`在您的第二个设置此`ListView`以侦听代码中某处的事件（如`onPostExecute`方法）：

```
// ...
ArrayAdapter<RSSItem> adapter1 = new ArrayAdapter<RSSItem>(getApplicationContext(), android.R.layout.simple_list_item_1,myRssFeed1.getList());
ListView lv = (ListView) findViewById(R.id.list1);
lv.setAdapter(adapter1);
lv.setOnItemClickListener(mListener);
// the rest of the code... 
```

# jquery - 带有 datepicker 的 Jquery 验证引擎不能在服务器上工作，但在本地工作

> ID：15569343
> 
> 赞同：0
> 
> 时间：2013-03-22T11:34:39.287
> 
> 标签：jquery, datepicker, jquery-ui-datepicker, uidatepicker, jquery-validation-engine

我在用户注册表单中使用**验证引擎。**输入时`Birthday`我使用**日期选择器**。验证绑定到模糊事件。这就是为什么当日历打开并且我选择年份时，会出现消息。为了解决这个问题，我使用了：

```
@class = "validate[required] text-input datepicker" 
```

根据文件。对于日期选择器，我使用：

```
$("#BirthDay").datepicker(); 
```

问题是，在本地这有效，但我将站点部署到主机，它只在第二次工作。

我`Birthday`从日历中选择，第一次总是**01/01/0001 00:00:00**值发送到服务器，但我第二次尝试，从日历更改日期然后它工作正常，发送选定的日期。我不明白这是什么原因..有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T09:57:20.417

我自己找到了解决方案。我从它工作的配置中获取了这一行：

```
<globalization culture="en-gb"/> 
```

# algorithm - 算法正确性

> ID：15569345
> 
> 赞同：0
> 
> 时间：2013-03-22T11:34:43.663
> 
> 标签：algorithm, analysis, pseudocode

我目前正在研究循环不变量，我在选择线性搜索算法的不变量时遇到了麻烦。

```
Inpput: A[1 ... n] of integers, k an integer value
Output: true if k belongs to A[1 ... n] false otherwise

LSearch(A,k)
i := 1
found := false
 WHILE i<=n AND found=false DO
   IF A[i] = k THEN
     found := true
   i:=i+1
return found 
```

我选择的断言是：

*   *如果 k 存在于 A[1] 和 A[i] 中，found 包含真或假*

在第一次迭代之前它成立，因为当时 A[1] 是单个元素，并且 found 被初始化为 false。

在循环之后 i 可以等于 i := 1 found := falseto n 和/或 found 可以为真（while 条件），因此在考虑 i<=n 的情况下断言保持不变。
你认为这可能是正确的吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-22T17:09:35.573

断言是正确的，但也是无用的。found 是一个布尔值，无论 A 的属性如何，都将包含 True 或 False。这不会帮助您证明算法的正确性。

这是一道选择题吗？其他选择是什么？

# javascript - 当我更改页面时，Facebook 登录 phonegap 丢失

> ID：15569346
> 
> 赞同：0
> 
> 时间：2013-03-22T11:34:47.703
> 
> 标签：javascript, facebook, cordova, phonegap-plugins

我正在使用PhoneGap-Facebook-plugin，它运行良好，我可以毫无问题地登录并访问令牌。但是当我更改html页面（`window.location = 'page.html';`）时，然后我调用`FB.getLoginStatus(...)`的响应是用户未连接。

我该如何解决这个问题？

`FB.init()`每次进入新的 html 页面时，我还必须再次执行此操作，否则会引发错误：`FB.getLoginStatus() called before FB.init()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-16T02:08:15.427

一种解决方法是使用本地/会话存储

```
FB.getLoginStatus(function(response) {
     if (response.status === 'connected') {
         window.sessionStorage.setItem("FBUserAuth", JSON.stringify(response.authResponse));
     // do your stuff
     }); 
```

存储用户身份验证数据并在您的后续页面中使用 ajax 访问 Facebook 图形 API。

# apache-camel - 用骆驼下载特定文件并关机

> ID：15569350
> 
> 赞同：0
> 
> 时间：2013-03-22T11:34:51.560
> 
> 标签：apache-camel, ftp-client

我可以用骆驼从 sftp 服务器下载特定文件列表然后关闭服务吗？我知道这应该是一个常见问题，但如果不等待上下文停止，我不知道该怎么做。

在某种程度上，骆驼可以保证数据的完整性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T06:17:26.667

[我想你可以使用直接路由、 pollEnrich](http://camel.apache.org/content-enricher.html#ContentEnricher-Contentenrichmentusing%7B%7BpollEnrich%7D%7D)和模板来做这样的事情

```
from("direct:grabOneFile")
   .pollEnrich("sftp://somewhere/blah/blah?fileName=foobar"); 
```

然后从某处的一些 java 代码中，只需获取一个[骆驼模板](http://camel.apache.org/producertemplate.html)并调用“direct:grabOneFile”路由。

```
String ret = template.requestBody("direct:grabOneFile","",String.class); 
```

在这种情况下，您不必担心何时关闭骆驼上下文，可能会有多个文件等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-05T15:24:11.427

[您是否在Camel FTP](http://camel.apache.org/ftp.html)页面的底部查看了这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T17:59:16.387

Camel ftp 组件只能轮询目录。您可以使用 maxMessagesPerPoll 和 fileName 的组合，例如

```
from("ftp://.../xyz?maxMessagesPerPoll=x&fileName=y"); 
```

也看看[这个](https://stackoverflow.com/questions/15489288/camel-ftp-ftp-consumer-for-known-filenames/15491502#15491502)。

[这个](http://camel.apache.org/graceful-shutdown.html)链接有关于关机的例子。

# android - 在 ViewGroup 中添加确切数量的元素

> ID：15569352
> 
> 赞同：0
> 
> 时间：2013-03-22T11:35:02.867
> 
> 标签：android, android-layout, android-linearlayout, viewgroup

这是我认为在我整个程序员的一生中我第一次提出问题。在我总是能够自己或在互联网上找到解决方案之前。但是在这里，我放弃了...

关于标题，当然 ViewGroup 是抽象的，但想法是有一个元素可以处理“列表”中的许多其他子元素。

这是问题所在。想象一下，您有您的 ViewGroup（或其他后代类），并且您希望在此空间中添加尽可能多的元素，而不需要滚动条或截断某些元素。元素将是一个在另一个之下。例如，如果这个空闲空间可以容纳 4.65 个元素，那么只会添加 4 个。因为添加 5th 会导致元素被截断，因为根本没有足够的空间来添加 5 个元素。

我尝试了一些事情，比如计算（在这种情况下）LinearLayour 中的可用空间，并添加一个“pilot”元素来测量它，然后知道我可以添加多少其他元素。但这不起作用。“pilot”元素返回的高度不正确。

我尝试了很多东西，以至于我无法在这里解释所有内容，但是如果您对如何做有一些想法，请说。我在这个问题上已经3天了，这让我发疯了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:33:07.310

最后我找到了解决方案。我在这里无法真正解释它，因为我使用的是定制的自制组件，但我能够找到问题的根源。

在创建简化类来演示问题时，我发现实际上一切正常。因此，我将简化的类与我的项目的类进行了比较，并对其进行了修改，直到它们几乎相同。

我找到了问题的根源，即使我不明白为什么会出现问题。事实上，如果在计算方法（先导元素、空间计算等）之前通过常量设置文本大小，它就可以完美地工作。如果您甚至在进行计算以知道可以添加多少元素之前通过调用访问器（setSize）来修改大小，那么它的工作方式将不同。

这真的很奇怪，因为我在进行计算之前修改了 textSize。它应该工作相同。反正。我发现了一个使用 Threads/Handlers 的技巧来解决我的问题。很难找到问题，但无法理解为什么会发生。

# javascript - 无法读取 xml 文档（无法调用 null 的方法“getElementsByTagName”）

> ID：15569354
> 
> 赞同：0
> 
> 时间：2013-03-22T11:35:06.797
> 
> 标签：javascript, xml, cordova, getelementsbytagname

我正在尝试通过 javascript 为 PhoneGap 应用程序从 xml 读取数据，我收到此错误“无法调用 null 的方法 'getElementsByTagName'”。我对较小的 xml 使用了完全相同的代码，并且它工作正常，现在我更改为更大的 xml 文件，它不再工作。这是我的代码和我的 xml。代码：

```
function cargar(nombre_lista){
if (window.XMLHttpRequest){// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
}else{// code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.open("GET","../../res/datahell.xml",false);
xmlhttp.send();
xmlDoc=xmlhttp.responseXML;
var  lista_elementos = new Array();
fichas=xmlDoc.getElementsByTagName("ficha");     //LINE WHERE THE ERROR TRIGGERS
for (var i = 0; i <fichas.length ; i++) {
    tipo=(fichas[i].getElementsByTagName("tipo")[0].childNodes[0].nodeValue);
    subcategoria=(fichas[i].getElementsByTagName("subcategoria")[0].childNodes[0].nodeValue);

    if (tipo==window.localStorage.getItem("tipo") && subcategoria==window.localStorage.getItem("subcategoria")) {
        lista_elementos.push(fichas[i].getElementsByTagName("nombre")[0].childNodes[0].nodeValue)

    };
};

load_list(nombre_lista, lista_elementos);

} 
```

XML：

```
<fichas>
<ficha>
    <tipo>comer</tipo>
    <subcategoria>restaurantes</subcategoria>
    <nombre>Restaurante Azurmendi</nombre>
    <coordenadas>
        <latitud>43.26055</latitud>
        <longitud>-2.813487</longitud>
    </coordenadas>
    <email>info@azurmendi.biz</email>
    <redessociales></redessociales>
    <telefonos>
        <telefono1>944558866</telefono1>
                    <telefono2></telefono2> 
    </telefonos>
<direccion>Legina auzoa, s/n, 48195 Larrabetzu
Corredor del Txorierri salida nº25</direccion>
    <web>www.azurmendi.biz</web>
    <horariodevisita></horariodevisita>
    <precio></precio>
<descripcion>Azurmendi gastronómico es un nuevo espacio creado y diseñado según la filosofía y los deseos de Eneko Atxa. Un restaurante con un espacio que busca la identidad y la diversidad. Un espacio vivo, vulnerable e interdependiente. Un ecosistema en el que el espacio, los humanos, los animales y los vegetales se complementan con el objetivo de según Eneko:
“ Dar placer a todo el que se adentre en él, un placer identitario que busca hacer de lo local algo universal ”.

</descripcion>
    <fotos>
        <foto1>../img/fotoX.jpg</foto1>
        <foto2>../img/fotoY.jpg</foto2>
        <foto3>../img/fotoZ.jpg</foto3>
    </fotos>
</ficha>
<ficha>
    <tipo>comer</tipo>
    <subcategoria>bodegas</subcategoria>
    <nombre>Bodega Magalarte</nombre>
    <coordenadas>
        <latitud>43.277768</latitud>
        <longitud>-2.830489</longitud>
    </coordenadas>
    <email>por confirmar</email>
    <redessociales></redessociales>
    <telefonos>
        <telefono1>617557680</telefono1>
                    <telefono2>636621455</telefono2> 
    </telefonos>
 <direccion></direccion>
    <web>www.magalartelezamatxakolina.com</web>
    <horariodevisita></horariodevisita>
 <precio>8 € (Visita guiada y cata)</precio>
    <descripcion>Descubre los secretos de la elaboración del txakoli, visitando nuestros viñedos y nuestra bodega familiar “Magalarte Lezama” fundada en el siglo XIX; posiblemente una de las pocas bodegas que se mantiene desde entonces.
Nuestro viñedo respeta el medio ambiente, cosechando bajo las normas de producción integrada, logrando un txakoli totalmente autóctono, tradicional y natural, inscrito en la Denominación de Origen de Bizkaiko Txakolina, certificado por Kalitatea y bajo las normas de calidad ISO 9001-2008.
Esta bodega situada en una zona privilegiada para el desarrollo de la vid y rodeado de naturaleza, a tan solo 10 minutos del aeropuerto y de Bilbao, os brinda la oportunidad de conocer los secretos del Valle del Txorierri.
No dejes escapar la oportunidad de degustar el aroma fresco y afrutado, el sabor y la textura diferenciados de nuestro producto.</descripcion>
    <fotos>
        <foto1>../img/Magalarte1.jpg</foto1>
        <foto2>../img/Magalarte2.jpg</foto2>
        <foto3>../img/Magalarte3.jpg</foto3>
    </fotos>
</ficha>
<ficha>
    <tipo>ver</tipo>
    <subcategoria>edificiosreligiosos</subcategoria>
    <nombre>Iglesia San Cristóbal</nombre>
    <coordenadas>
        <latitud>43.301743</latitud>
        <longitud>-2.877601</longitud>
    </coordenadas>
    <email></email>
    <redessociales></redessociales>
    <telefonos>
        <telefono1></telefono1>
                    <telefono2></telefono2> 
    </telefonos>
    <direccion></direccion>
    <web></web>
    <horariodevisita></horariodevisita>
    <precio></precio>
    <descripcion>Fundada en el siglo X y reedificada y ampliada en el año 1745\. Es un edificio de mampuesto con grandes sillares en las esquinas. De acceso dintelado, torre rectangular y pórtico sostenido por vigas. En el interior se conserva una imagen gótica de la Virgen y el niño.</descripcion>
    <fotos>
        <foto1></foto1>
        <foto2></foto2>
        <foto3></foto3>
    </fotos>
</ficha>
<ficha>
    <tipo>ver</tipo>
    <subcategoria>edificiosreligiosos</subcategoria>
    <nombre>Iglesia San Isidro</nombre>
    <coordenadas>
        <latitud>43.299619</latitud>
        <longitud>-2.886271</longitud>
    </coordenadas>
    <email></email>
    <redessociales></redessociales>
    <telefonos>
        <telefono1>944541124</telefono1>
 <telefono2></telefono2> 
    </telefonos>
<direccion>Lainomendi Kalea, 2\. 48160 Aldekona</direccion>
    <web></web>
    <horariodevisita></horariodevisita>
    <precio></precio>
    <descripcion>Edificio construido en 1958, de planta basilical y con torre lateralizada. Portada con tres arcos y acceso al edificio en medio punto.</descripcion>
    <fotos>
        <foto1></foto1>
        <foto2></foto2>
        <foto3></foto3>
    </fotos>
</ficha>
<ficha>
    <tipo>ver</tipo>
    <subcategoria>edificiosciviles</subcategoria>
    <nombre>Kultur birika</nombre>
    <coordenadas>
        <latitud>43,295699</latitud>
        <longitud>-2,883568</longitud>
    </coordenadas>
    <email>kulturbirika@kulturbirika.eu</email>
    <redessociales></redessociales>
    <telefonos>
        <telefono1>944659714</telefono1>
                    <telefono2></telefono2> 
    </telefonos>
<direccion>Anboto Plaza, 5 , 48160</direccion>
    <web>www.kulturbirika.eu</web>
    <horariodevisita></horariodevisita>
    <precio></precio>
<descripcion>Desde el Area de Cultura del Ayuntamiento de Derio queremos comunicar e informar de todas las materias y disciplinas culturales que se ofertan a la ciudadanía de Derio a lo largo de todo el año. Toda esta oferta cultural y de ocio se desarrolla en diferentes locales y escenarios, destacando: Larrabarri baserria, Gure Aretoa, Gazte y Kultur birika donde se ubica el Kzgunea, biblioteca, exposiciones, salas de música y danza, talleres y locales para las asociaciones.</descripcion>
    <fotos>
        <foto1>Kultur birika 1</foto1>
        <foto2>Kultur birika 2</foto2>
        <foto3>Kultur birika 3</foto3>
    </fotos>
</ficha>
<ficha>
    <tipo>ver</tipo>
    <subcategoria>museos</subcategoria>
    <nombre>B-TEK(Bizkaiko Teknologi Elkartegia</nombre>
    <coordenadas>
        <latitud>43,299197</latitud>
        <longitud>-2,868633</longitud>
    </coordenadas>
    <email>btek@btek.org</email>
    <redessociales></redessociales>
    <telefonos>
        <telefono1>944039500</telefono1>
                    <telefono2>946568844</telefono2> 
    </telefonos>
<direccion>Edificio 602 Parque Tecnológico, Astondo bidea, 48160 Elexalde</direccion>
    <web>www.btek.org</web>
<horariodevisita>Lunes a Jueves de 9h a 14h y de 15h a 18h
            Viernes de 9h a 14h
     Duración de la visita:Visita al Centro: 2 horas, Taller: 45 minutos
     ( Todas las visitas se deben reservar)</horariodevisita>
    <precio>3 € visita dinamizada sin taller
4 € visita dinamizada con taller</precio>
<descripcion>BTEK, el Centro de Interpretación de la Tecnología del Parque Científico y Tecnológico de Bizkaia tiene como objetivo acercar la tecnología a los jóvenes, sobre todo a los estudiantes de educación secundaria, impulsando la cultura científica-tecnológica. BTEK está ubicado en el edificio 602 del Parque, en el municipio de Derio.</descripcion>
    <fotos>
        <foto1>Btek1</foto1>
        <foto2>Btek2</foto2>
        <foto3> Btek3</foto3>
    </fotos>
</ficha> 
```

XML 要大得多，但它不允许我全部粘贴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:50:14.423

您需要先将 XML 字符串转换为 DOM 解析器对象，然后再像 DOM 树一样解析它。

```
// convert the xml string response to a DOM parser
xmlDoc = ( new DOMParser() ).parseFromString( xmlhttp.responseXML, "text/xml" ); 
```

现在，您可以使用您的解析方法。

希望有帮助。

# xamarin.ios - MvvmCross vnext - 初始化 IMvxGeoLocationWatcher 问题

> ID：15569355
> 
> 赞同：1
> 
> 时间：2013-03-22T11:35:14.523
> 
> 标签：xamarin.ios, xamarin, mvvmcross

继续进入 vnext 的旅程...

我现在可以构建整个解决方案并成功运行它。但是，当我尝试初始化 IMvxGeoLocationWatcher 时，它会崩溃。代码和输出是 -

```
private IMvxGeoLocationWatcher _geoWatcher;

public void StartGettingLocation(Action<MvxCoordinates> response)
{
    Log.Info("LocationService->StartGettingLocation");

    // crashes on this line -
    if (_geoWatcher == null) _geoWatcher = this.GetService<IMvxGeoLocationWatcher>(); 
```

输出 -

未处理的异常：0 MyApp 0x000797ae mono_handle_exception_internal_first_pass + 2190 1 MyApp 0x0007b1e2 mono_handle_exception_internal + 1602 2 MyApp 0x0007bd2f mono_handle_exception + 47 3 MyApp 0x000bce22 mono_x86_throw_exception + 306 0x07f30f8f 0x0 + 133369743 在 System.Reflection.MonoCMethod.Invoke (System.Reflection.BindingFlags,System.Reflection.Binder,object[],System.Globalization.CultureInfo) [0x00000] 在 /Developer/MonoTouch/Source/mono/mcs/类/corlib/System.Reflection/MonoMethod.cs:545 在 System.Activator.CreateInstance (System.Type,System.Reflection.BindingFlags,System.Reflection.Binder,object[],System.Globalization.CultureInfo,`2<string, string>,Cirrious.MvvmCross.Interfaces.ViewModels.IMvxViewModel&) <IL 0x00043, 0x000d8> at Cirrious.MvvmCross.Application.MvxViewModelLoader.LoadViewModel (Cirrious.MvvmCross.Views.MvxShowViewModelRequest) <IL 0x0005b, 0x000a2> at Cirrious.MvvmCross.Touch.ExtensionMethods.MvxTouchViewControllerExtensionMethods.LoadViewModel<TViewModel> (Cirrious.MvvmCross.Touch.Interfaces.IMvxTouchView`1) 在 Cirrious.MvvmCross.Touch.ExtensionMethods.MvxTouchViewControllerExtensionMethods/c__AnonStorey0 `1.<>m__0 () <IL 0x00006, 0x00034> at Cirrious.MvvmCross.ExtensionMethods.MvxViewExtensionMethods.OnViewCreate<TViewModel> (Cirrious.MvvmCross.Interfaces.Views.IMvxView`1,System.Func `1<TViewModel>) <IL 0x00012, 0x00045> at Cirrious.MvvmCross.Touch.ExtensionMethods.MvxTouchViewControllerExtensionMethods.OnViewCreate<TViewModel> (Cirrious.MvvmCross.Touch.Interfaces.IMvxTouchView`1) 在 Cirrious.MvvmCross.Touch.Views.MvxTouchViewController`1.ViewDidLoad () 在 MyApp.UI.Touch.MainMenuViewController.ViewDidLoad () [ 0x00000] 在 /Users/franklyn/Documents/Programming/MyApp/MyApp.UI.Touch/Views/MainMenuViewController.cs:34

编辑 - 异常跟踪的其余部分：

在（包装器运行时调用） object.runtime_invoke_void_ *this*_（对象，IntPtr的，IntPtr的，IntPtr的）18 MyApp的0x00008732 mono_jit_runtime_invoke + 722 19 MyApp的0x0014f39e mono_runtime_invoke + 126 20 MyApp的0x001e6296 monotouch_trampoline + 3686 21的UIKit 0x00a4b817 - [UIViewController中loadViewIfRequired] + 536 22的UIKit 0x00a4b882 - [UIViewController的视图] + 33 23的UIKit 0x00a4bb2a -[UIViewController contentScrollView] + 36 24 UIKit 0x00a62ef5 -[UINavigationController _computeAndApplyScrollContentInsetDeltaForViewController:] + 36 25 UIKit 0x00a62fdb -[UINavigationController _layoutViewController:] + 43 26的UIKit 0x00a63286 - [UINavigationController的_updateScrollViewFromViewController：toViewController：] + 254 27的UIKit 0x00a63381 - [UINavigationController的_startTransition：fromViewController：toViewController：] + 72 28的UIKit 0x00a63eab - [UINavigationController的_startDeferredTransitionIfNeeded：] + 386 29的UIKit 0x00a63fc9 - [UINavigationController的_startDeferredTransitionIfNeeded] + 41 30 UIKit 0x00a64055 -[UINavigationController] + 72 28 UIKit 0x00a63eab -[UINavigationController _startDeferredTransitionIfNeeded:] + 386 29 UIKit 0x00a63fc9 -[UINavigationController _startDeferredTransitionIfNeeded] + 41 30 UIKit 0x00a64055 -[UINavigationController] + 72 28 UIKit 0x00a63eab -[UINavigationController _startDeferredTransitionIfNeeded:] + 386 29 UIKit 0x00a63fc9 -[UINavigationController _startDeferredTransitionIfNeeded] + 41 30 UIKit 0x00a64055 -[UINavigationController**viewWillLayoutSubviews] + 33 31 UIKit 0x00b693ab -[UILayoutContainerView layoutSubviews] + 233 32 UIKit 0x009ba92d -[UIView(CALayerDelegate) layoutSublayersOfLayer:] + 279 33 libobjc.A.dylib 0x022086b0 -[NSObject performSelector:withObject:] + 70 2f Qucz[0] + 70 2f Qucz[0]的CALayer layoutSublayers] + 240 35 QuartzCore 0x0194733c _ZN2CA5Layer16layout_if_neededEPNS_11TransactionE + 468 36 QuartzCore 0x01952eaf - [CALayer的layoutIfNeeded] + 166 37的UIKit 0x00a598cd - [UIViewController的窗口：setupWithInterfaceOrientation：] + 242 38的UIKit 0x009a21a6 - [一个UIWindow _setRotatableClient：toOrientation：updateStatusBar：持续时间：力：正在旋转：] + 5346 39 UIKit 0x009a0cbf -[UIWindow _setRotatableClient:toOrientation:updateStatusBar:duration:force:] + 82 40 UIKit 0x009a0bd9 -[UIWindow _setRotatableViewOrientation:duration:force:] + 89 41 UIKit 0x0099fe34 __57-[UIWindowforce:updateToInterfaceOrientation:: ] _block_invoke_0 + 224 42的UIKit 0x0099fc6e - [一个UIWindow _updateToInterfaceOrientation：持续时间：力：] + 209 43的UIKit 0x009a0a29 - [一个UIWindow setAutorotates：forceUpdateInterfaceOrientation：] + 853 44的UIKit 0x009a3922 - [一个UIWindow setDelegate：] + 351 45的UIKit 0x00a4dfec - [UIViewController中_tryBecomeRootViewControllerInWindow ：] + 164 46 UIKit 0x0099abc4 -[UIWindow addRootViewControllerViewIfPossible] + 481 47 UIKit 0x0099adbf -[UIWindow _setHidden:forced:] + 368 48 UIKit 0x0099af55 -[UIWindow _orderFrontWithoutMakingKey] + 49 49 UIKit 0x009a3f65 atWindow makewrapperibleAndKeyVi65 -to-native) MonoTouch.ObjCRuntime.Messaging.void_objc_msgSend (intptr,intptr) 在 MonoTouch.UIKit.UIWindow.MakeKeyAndVisible () [0x00008] 在 /Developer/MonoTouch/Source/monotouch/src/UIKit/UIWindow.g.cs： 126 在 MyApp.UI.Touch.AppDelegate.FinishedLaunching (MonoTouch.UIKit.UIApplication,MonoTouch.Foundation.NSDictionary) [0x0003b] 在 /Users/franklynweber/Documents/Programming/MyApp/MyApp.UI.Touch/OtherClasses/AppDelegate.cs :46 at (wrapper runtime-invoke) 。runtime_invoke_bool__this**_object_object（对象，IntPtr的，IntPtr的，IntPtr的）54 MyApp的0x00008732 mono_jit_runtime_invoke + 722 55 MyApp的0x0014f39e mono_runtime_invoke + 126 56 MyApp的0x001e6296 monotouch_trampoline + 3686 57的UIKit 0x009677b7 - [UIApplication的_handleDelegateCallbacksWithOptions：isSuspended：restoreState：] + 266 58的UIKit 0x00967da7 - [UIApplication的_callInitializationDelegatesForURL :payload:suspended:] + 1248 59 UIKit 0x00968fab -[UIApplication _runWithURL:payload:launchOrientation:statusBarStyle:statusBarHidden:] + 805 60 UIKit 0x0097a315 -[UIApplication handleEvent:withNewEvent:] + 1022 61 UIKit 0x0097b24b -[UIApplication sendEvent:] + 85 62 UIKit 0x0096ccf8 _UIApplicationHandleEvent + 9874 63 GraphicsServices 0x02c98df9 _PurpleEventCallback + 339 64 GraphicsServices 0x02c98ad0 PurpleEventCallback + 46 65 CoreFoundation 0x01f34bf5**CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION**+ 53 66的CoreFoundation 0x01f34962 __CFRunLoopDoSource1 + 146 67的CoreFoundation 0x01f65bb6 __CFRunLoopRun + 2118 68的CoreFoundation 0x01f64f44 CFRunLoopRunSpecific + 276 69的CoreFoundation 0x01f64e1b CFRunLoopRunInMode + 123 70的UIKit 0x009687da - [UIApplication的_run] + 774 71的UIKit 0x0096a65c UIApplicationMain + 1211在（包装管理到本机) MonoTouch.UIKit.UIApplication.UIApplicationMain (int,string[],intptr,intptr) 在 MonoTouch.UIKit.UIApplication.Main (string[],string,string) [0x0004c] 在 /Developer/MonoTouch/Source/monotouch/src /UIKit/UIApplication.cs:38 在 /Users/franklynweber/Documents/Programming/MyApp/MyApp.UI.Touch/OtherClasses/Main 中的 MyApp.UI.Touch.Application.Main (string[]) [0x00000]。CS：17中（封装器运行时调用）.runtime_invoke_void_object（对象，IntPtr的，IntPtr的，IntPtr的）76 MyApp的0x00008732 mono_jit_runtime_invoke + 722 77 MyApp的0x0014f39e mono_runtime_invoke + 126 78 MyApp的0x001534c4 mono_runtime_exec_main + 420 79 MyApp的0x00157ff5 mono_runtime_run_main + 725 80 MyApp的0x000651a5 mono_jit_exec + 149 81 MyApp 0x001db7b5 主要 + 2005 82 MyApp 0x000021f5 开始 + 53IntPtr的）76 MyApp的0x00008732 mono_jit_runtime_invoke + 722 77 MyApp的0x0014f39e mono_runtime_invoke + 126 78 MyApp的0x001534c4 mono_runtime_exec_main + 420 79 MyApp的0x00157ff5 mono_runtime_run_main + 725 80 MyApp的0x000651a5 mono_jit_exec + 149 81 MyApp的0x001db7b5主+ 2005 82 MyApp的0x000021f5启动+ 53IntPtr的）76 MyApp的0x00008732 mono_jit_runtime_invoke + 722 77 MyApp的0x0014f39e mono_runtime_invoke + 126 78 MyApp的0x001534c4 mono_runtime_exec_main + 420 79 MyApp的0x00157ff5 mono_runtime_run_main + 725 80 MyApp的0x000651a5 mono_jit_exec + 149 81 MyApp的0x001db7b5主+ 2005 82 MyApp的0x000021f5启动+ 53

2013-03-25 08:12:00.009 MyApp [7906:12203] 未处理的托管异常：调用目标已引发异常。(System.Reflection.TargetInvocationException) 在 System.Reflection.MonoCMethod.Invoke (System.Object obj, BindingFlags invokeAttr, System.Reflection.Binder binder, System.Object[] 参数, System.Globalization.CultureInfo 文化) [0x0011f] in / Developer/MonoTouch/Source/mono/mcs/class/corlib/System.Reflection/MonoMethod.cs:536 在 System.Reflection.MonoCMethod.Invoke (BindingFlags invokeAttr, System.Reflection.Binder binder, System.Object[] 参数, System .Globalization.CultureInfoculture) [0x00000] in /Developer/MonoTouch/Source/mono/mcs/class/corlib/System.Reflection/MonoMethod.cs:545 at System.Activator.CreateInstance (System.Type type, BindingFlags bindingAttr, System .Reflection.Binder 活页夹，系统。`2 parameterValueLookup, IMvxViewModel& model) [0x00000] in <filename unknown>:0 at Cirrious.MvvmCross.Application.MvxViewModelLoader.LoadViewModel (Cirrious.MvvmCross.Views.MvxShowViewModelRequest request) [0x00000] in <filename unknown>:0 at Cirrious.MvvmCross.Touch.ExtensionMethods.MvxTouchViewControllerExtensionMethods.LoadViewModel[MainMenuViewModel] (IMvxTouchView`1 touchView) [0x00000] in :0 at Cirrious.MvvmCross.Touch.ExtensionMethods.MvxTouchViewControllerExtensionMethods+c__AnonStorey0 `1[MyApp.Core.ViewModels.MainMenuViewModel].<>m__0 () [0x00000] in <filename unknown>:0 at Cirrious.MvvmCross.ExtensionMethods.MvxViewExtensionMethods.OnViewCreate[MainMenuViewModel] (IMvxView`1 视图，System.Func`1 viewModelLoader) [0x00000] in <filename unknown>:0 at Cirrious.MvvmCross.Touch.ExtensionMethods.MvxTouchViewControllerExtensionMethods.OnViewCreate[MainMenuViewModel] (IMvxTouchView`1 touchView) [0x00000] in :0 at Cirrious.MvvmCross.Touch.Views.MvxTouchViewController`1[MyApp.Core.ViewModels.MainMenuViewModel].ViewDidLoad () [0x00000] in :0 at MyApp.UI.Touch.MainMenuViewController.ViewDidLoad () [0x00000] 在 /Users/franklynweber/Documents/Programming/MyApp/MyApp.UI.Touch/Views/MainMenuViewController.cs:34 处（包装器托管到本机） MonoTouch.ObjCRuntime.Messaging:void_objc_msgSend (intptr,intptr ) 在 MonoTouch.UIKit.UIWindow.MakeKeyAndVisible () [0x00008] 在 MyApp.UI.Touch.AppDelegate.FinishedLaunching (MonoTouch.UIKit. UIApplication 应用程序，MonoTouch.Foundation.NSDictionary 选项）[0x0003b] in /Users/franklynweber/Documents/Programming/MyApp/MyApp.UI.Touch/OtherClasses/AppDelegate.cs:46 at (wrapper managed-to-native) MonoTouch.UIKit .UIApplication: UIApplicationMain (int,string[],intptr,intptr) 在 MonoTouch.UIKit.UIApplication.Main (System.String[] args, System.String principalClassName, System.String delegateClassName) [0x0004c] 在 /Developer/MonoTouch/Source /monotouch/src/UIKit/UIApplication.cs:38 在 /Users/franklynweber/Documents/Programming/MyApp/MyApp.UI.Touch 中的 MyApp.UI.Touch.Application.Main (System.String[] args) [0x00000] /OtherClasses/Main.cs:17 堆栈跟踪：触摸/OtherClasses/Main.cs:17 堆栈跟踪：触摸/OtherClasses/Main.cs:17 堆栈跟踪：

本机堆栈跟踪：

```
0   MyApp                      0x0007bf6c mono_handle_native_sigsegv + 284
1   MyApp                      0x000c01ad sigabrt_signal_handler + 109
2   libsystem_c.dylib                   0x9a5da59b _sigtramp + 43
3   ???                                 0xffffffff 0x0 + 4294967295
4   libsystem_sim_c.dylib               0x0297457b abort + 140
5   MyApp                      0x001ed17b monotouch_unhandled_exception_handler + 283
6   MyApp                      0x00077dbc mono_invoke_unhandled_exception_hook + 140
7   MyApp                      0x0007bbda mono_handle_exception_internal + 4154
8   MyApp                      0x0007bd2f mono_handle_exception + 47
9   MyApp                      0x000bce22 mono_x86_throw_exception + 306
10  ???                                 0x07f30f8f 0x0 + 133369743
11  ???                                 0x0bad1a5d 0x0 + 195893853
12  ???                                 0x0bad13dd 0x0 + 195892189
13  ???                                 0x0bad1164 0x0 + 195891556
14  ???                                 0x0bad112c 0x0 + 195891500
15  ???                                 0x11b0a360 0x0 + 296788832
16  ???                                 0x11b09fca 0x0 + 296787914
17  ???                                 0x11b09de2 0x0 + 296787426
18  ???                                 0x11b09cf4 0x0 + 296787188
19  ???                                 0x11b09c65 0x0 + 296787045
20  ???                                 0x11b09b60 0x0 + 296786784
21  ???                                 0x11b09a5c 0x0 + 296786524
22  ???                                 0x11b099c4 0x0 + 296786372
23  ???                                 0x07fe2059 0x0 + 134094937
24  MyApp                      0x00008732 mono_jit_runtime_invoke + 722
25  MyApp                      0x0014f39e mono_runtime_invoke + 126
26  MyApp                      0x001e6296 monotouch_trampoline + 3686
27  UIKit                               0x00a4b817 -[UIViewController loadViewIfRequired] + 536
28  UIKit                               0x00a4b882 -[UIViewController view] + 33
29  UIKit                               0x00a4bb2a -[UIViewController contentScrollView] + 36
30  UIKit                               0x00a62ef5 -[UINavigationController _computeAndApplyScrollContentInsetDeltaForViewController:] + 36
31  UIKit                               0x00a62fdb -[UINavigationController _layoutViewController:] + 43
32  UIKit                               0x00a63286 -[UINavigationController _updateScrollViewFromViewController:toViewController:] + 254
33  UIKit                               0x00a63381 -[UINavigationController _startTransition:fromViewController:toViewController:] + 72
34  UIKit                               0x00a63eab -[UINavigationController _startDeferredTransitionIfNeeded:] + 386
35  UIKit                               0x00a63fc9 -[UINavigationController _startDeferredTransitionIfNeeded] + 41
36  UIKit                               0x00a64055 -[UINavigationController __viewWillLayoutSubviews] + 33
37  UIKit                               0x00b693ab -[UILayoutContainerView layoutSubviews] + 233
38  UIKit                               0x009ba92d -[UIView(CALayerDelegate) layoutSublayersOfLayer:] + 279
39  libobjc.A.dylib                     0x022086b0 -[NSObject performSelector:withObject:] + 70
40  QuartzCore                          0x01952fc0 -[CALayer layoutSublayers] + 240
41  QuartzCore                          0x0194733c _ZN2CA5Layer16layout_if_neededEPNS_11TransactionE + 468
42  QuartzCore                          0x01952eaf -[CALayer layoutIfNeeded] + 166
43  UIKit                               0x00a598cd -[UIViewController window:setupWithInterfaceOrientation:] + 242
44  UIKit                               0x009a21a6 -[UIWindow _setRotatableClient:toOrientation:updateStatusBar:duration:force:isRotating:] + 5346
45  UIKit                               0x009a0cbf -[UIWindow _setRotatableClient:toOrientation:updateStatusBar:duration:force:] + 82
46  UIKit                               0x009a0bd9 -[UIWindow _setRotatableViewOrientation:duration:force:] + 89
47  UIKit                               0x0099fe34 __57-[UIWindow _updateToInterfaceOrientation:duration:force:]_block_invoke_0 + 224
48  UIKit                               0x0099fc6e -[UIWindow _updateToInterfaceOrientation:duration:force:] + 209
49  UIKit                               0x009a0a29 -[UIWindow setAutorotates:forceUpdateInterfaceOrientation:] + 853
50  UIKit                               0x009a3922 -[UIWindow setDelegate:] + 351
51  UIKit                               0x00a4dfec -[UIViewController _tryBecomeRootViewControllerInWindow:] + 164
52  UIKit                               0x0099abc4 -[UIWindow addRootViewControllerViewIfPossible] + 481
53  UIKit                               0x0099adbf -[UIWindow _setHidden:forced:] + 368
54  UIKit                               0x0099af55 -[UIWindow _orderFrontWithoutMakingKey] + 49
55  UIKit                               0x009a3f67 -[UIWindow makeKeyAndVisible] + 65
56  ???                                 0x11aee564 0x0 + 296674660
57  ???                                 0x11b099a8 0x0 + 296786344
58  ???                                 0x0bad24ee 0x0 + 195896558
59  ???                                 0x0bad25df 0x0 + 195896799
60  MyApp                      0x00008732 mono_jit_runtime_invoke + 722
61  MyApp                      0x0014f39e mono_runtime_invoke + 126
62  MyApp                      0x001e6296 monotouch_trampoline + 3686
63  UIKit                               0x009677b7 -[UIApplication _handleDelegateCallbacksWithOptions:isSuspended:restoreState:] + 266
64  UIKit                               0x00967da7 -[UIApplication _callInitializationDelegatesForURL:payload:suspended:] + 1248
65  UIKit                               0x00968fab -[UIApplication _runWithURL:payload:launchOrientation:statusBarStyle:statusBarHidden:] + 805
66  UIKit                               0x0097a315 -[UIApplication handleEvent:withNewEvent:] + 1022
67  UIKit                               0x0097b24b -[UIApplication sendEvent:] + 85
68  UIKit                               0x0096ccf8 _UIApplicationHandleEvent + 9874
69  GraphicsServices                    0x02c98df9 _PurpleEventCallback + 339
70  GraphicsServices                    0x02c98ad0 PurpleEventCallback + 46
71  CoreFoundation                      0x01f34bf5 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 53
72  CoreFoundation                      0x01f34962 __CFRunLoopDoSource1 + 146
73  CoreFoundation                      0x01f65bb6 __CFRunLoopRun + 2118
74  CoreFoundation                      0x01f64f44 CFRunLoopRunSpecific + 276
75  CoreFoundation                      0x01f64e1b CFRunLoopRunInMode + 123
76  UIKit                               0x009687da -[UIApplication _run] + 774
77  UIKit                               0x0096a65c UIApplicationMain + 1211
78  ???                                 0x0bacf84c 0x0 + 195885132
79  ???                                 0x0bace218 0x0 + 195879448
80  ???                                 0x0bacdfb0 0x0 + 195878832
81  ???                                 0x0bace03f 0x0 + 195878975
82  MyApp                      0x00008732 mono_jit_runtime_invoke + 722
83  MyApp                      0x0014f39e mono_runtime_invoke + 126
84  MyApp                      0x001534c4 mono_runtime_exec_main + 420
85  MyApp                      0x00157ff5 mono_runtime_run_main + 725
86  MyApp                      0x000651a5 mono_jit_exec + 149
87  MyApp                      0x001db7b5 main + 2005
88  MyApp                      0x000021f5 start + 53 
```

==================================================== =============== 执行本机代码时收到 SIGABRT。这通常表示单声道运行时或本机库之一中的致命错误

# 由您的应用程序使用。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:02:35.080

如果没有内部异常，很难知道出了什么问题 - 抱歉。

我猜在初始化地理观察器时存在一些问题 - 要么是因为：

*   该插件未注册
*   您在拨打此电话之前拨打此电话`Cirrious.MvvmCross.Plugins.Location.PluginLoader.Instance.EnsureLoaded()`
*   或由于某些“应用程序特定原因”。

教程应用程序使用位置插件：[https ://github.com/slodge/MvvmCross/tree/vnext/Sample%20-%20Tutorial/Tutorial/Tutorial.UI.Touch](https://github.com/slodge/MvvmCross/tree/vnext/Sample%20-%20Tutorial/Tutorial/Tutorial.UI.Touch)

本教程对您有用吗？如果是这样，那么您可能需要比较两者。

如果崩溃对您来说仍然存在，那么也许： - 如果可以，发布内部异常？- 或发布一个演示问题的小型 repo - 我当然需要比我在这 2 行代码段中看到的更多的代码。

* * *

抱歉缺少文档。我现在正在努力为发布的新 v3 创建适当的文档和教程——但这都是自筹资金的！

# imacros - iMacros 数据提取和比较

> ID：15569357
> 
> 赞同：2
> 
> 时间：2013-03-22T11:35:19.560
> 
> 标签：imacros

是否可以使用 imacros 提取和比较网站的内容？我想提取数据并使用一些预定义的信息进行比较，因此只修改一些字段，而不是确保页面中的所有字段都设置为默认值。可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T19:11:38.100

是的。

您可以使用宏来提取信息并将其保存在 JavaScript 变量中。假设您从 2 个网站上抓取数据，如果两个网站都有关键字“foo bar”，您会提醒“foo bar found”。

```
var test1=website_text1.search(/foo bar/gi);
var test2=website_text2.search(/foo bar/gi);

if (( test1>=0 ) && (test2 >=0 ))
{

alert("foo bar found");

}
else
{

alert("foo bar is not on both websites");

} 
```

对于您解释的完整代码，它将需要更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T21:14:00.320

为什么不将其提取到 csv 文件中。然后使用 csv 作为数据库来比较您可能需要的任何变量，您可以通过创建一个宏来自动执行 csv 宏比较。在 google 上搜索 csv 的宏。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-22T17:50:45.573

我不确定你到底需要什么。iMacros 无法自行执行此类任务，您需要编写脚本 - 基本的 javascript 或您知道如何使用的任何其他内容（java、php 等）

无论如何，我相信**Selenium** [http://docs.seleniumhq.org/](http://docs.seleniumhq.org/)可能更接近您的需要。你应该试一试。

# html - 如何一次显示 HTML5 验证的所有错误？

> ID：15569360
> 
> 赞同：6
> 
> 时间：2013-03-22T11:35:28.443
> 
> 标签：html, html5-validation

当我们使用 HTML5 Validation 验证表单时，它只显示一个错误，尽管表单上可能有更多错误。因此，用户将只修复一个错误并再次提交表单以知道还有另一个错误。这可能会让用户感到沮丧，并且会带来非常糟糕的用户体验。我们怎样才能一次看到所有的验证错误？

[TJ VanToll](http://tjvantoll.com/2012/08/05/html5-form-validation-showing-all-error-messages/)编写了一些 JavaScript ，它获取表单的所有验证错误并显示在表单顶部。但我想以默认的 HTML5 方式在表单旁边显示所有错误。

# php - 如何调整脚本以首先选择未调用的潜在客户

> ID：15569362
> 
> 赞同：1
> 
> 时间：2013-03-22T11:35:32.350
> 
> 标签：php, mysql

我有非常基本的 PHP 知识，并且已经得到了这个系统的修改。

有一张桌子上有潜在客户，销售人员可以打电话。目前它从表的开头开始，并像在 Mysql 中一样正常工作。

我希望它先调用所有新记录，然后再遍历旧记录。

我曾尝试使用 ORDER BY lead_id DESC 但这似乎不起作用，还有 lead_callcount ASC 但同样不起作用。

我一直在研究 CASE 选项，但对自己的使用了解不足。

该代码目前

```
public static function getNextLead(){

    $lead_res = Database::get()->data->query("SELECT `lead_id` FROM `" . DATABASE_TBL_LEADS . "` WHERE (`lead_disposition` IS NULL OR `lead_disposition` = 1) AND (`lead_timeout` IS NULL OR `lead_timeout` < NOW()) AND (`lead_locked` = '0000-00-00 00:00:00' OR `lead_locked` IS NULL) AND `lead_active` = '1' LIMIT 1");
    $lead_num = $lead_res->numRows();

    if($lead_num == 1){

        $lead_get = $lead_res->fetchRow(MDB2_FETCHMODE_ASSOC);

        $lead_id = $lead_get['lead_id']; 
```

下面还有更多代码，

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:43:57.490

在不知道您正在使用的数据库表中的可用列的情况下；很难确定。我建议你：

1.  如果您还没有表 SCHEMA，请获取它
2.  查看是否有添加潜在客户日期的列
3.  如果是这样; 按该列排序

**由于我们有要查看的表模式：** ORDER BY 可以按 ASC 或 DESC 对结果集进行排序；默认值为 ASC（从最低点开始并从那里向上）。

大概 ASC 订单应该适用于您的通话计数；但如果这是一个相关值，也许你可以添加lead_timeout - 自上次通话以来的那个时间可能吗？

如果是这样的话，这样的事情可能会有所帮助：

```
ORDER BY `lead_callcount` ASC,
         `lead_timeout` ASC 
```

如果有更长的时间（而不是更短的超时时间）更好，您可以选择将 lead_timeout 更改为 DESC

我在我的本地数据库中创建了一个测试表，并尝试了您提供的查询，其中 ORDER BY 键控于lead_callcount，它似乎工作正常。

*用于检查基本语法和查询结构等内容；添加了 ORDER BY 后，您的上述查询将如下所示：*

```
SELECT lead_id, lead_callcount, lead_timeout FROM `leads` 
WHERE (`lead_disposition` IS NULL OR `lead_disposition` = 1) 
  AND (`lead_timeout` IS NULL OR `lead_timeout` < NOW()) 
  AND (`lead_locked` = '0000-00-00 00:00:00' OR `lead_locked` IS NULL) 
  AND `lead_active` = '1'
ORDER BY `lead_callcount` ASC
        #,`lead_timeout` ASC #optional sort by lead_timeout 
```

# django - Django CSRF。我可以从子域发布到主域吗？

> ID：15569364
> 
> 赞同：3
> 
> 时间：2013-03-22T11:35:38.447
> 
> 标签：django, ssl, csrf, subdomain

我看过类似的讨论，但似乎找不到我的问题的答案。

我正在开发一个应用程序，其中每个帐户都将在子域上提供自己的实例。 [http://account.myawesomeapp.com](http://account.myawesomeapp.com)。

用户将从该页面登录，登录表单将发布到 [https://myawesomeapp.com/my_login_view/](https://myawesomeapp.com/my_login_view/) 之后我将做一些用户名/帐户哈希和 db。验证会话内容并重定向到： [http](http://account.myawesomeapp.com/registration/handoff/) ://account.myawesomeapp.com/registration/handoff/ / - 然后将登录用户并删除验证会话条目。

然而。虽然我已将 CSRF_COOKIE_DOMAIN 设置为“.myawesomeapp.com”，但从子域发布到主域时出现 CSRF 错误？

我这不可能？我是否必须为我的 SSL 登录需求创建一个特殊的子域？

我希望我的问题是有道理的，并且我没有搞砸 django 术语和约定:)

更新：

我发现了这个博客条目：http: [//zachsnow.com/# !/blog/2012/django-subdomains-csrf-and-https/](http://zachsnow.com/#!/blog/2012/django-subdomains-csrf-and-https/)

这种方法行得通吗？安全吗？

更新 2：

尝试了 Zachs 的方法，但它没有用......我不断收到这个错误：

失败原因：未设置 CSRF cookie。

# asp.net - 如何在 asp.net 网站中使用 ReportingCloud？

> ID：15569365
> 
> 赞同：3
> 
> 时间：2013-03-22T11:35:45.470
> 
> 标签：asp.net, reporting-services, report

最近我开始使用 SSRS 并找到了[ReportingCloud](http://sourceforge.net/projects/reportingcloud/?source=navbar)。它说

```
ReportingCloud provides an open source quality implementation 
as an extension of the RDL specification 
```

我还没有找到任何关于如何在 sourceforge 中或通过谷歌搜索使用它的教程/文档。

谁能提供有关**如何使用 ReportingCloud 的演练/示例？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T23:58:57.430

[http://sourceforge.net/projects/reportingcloud/forums/forum/1116661/topic/4571059](http://sourceforge.net/projects/reportingcloud/forums/forum/1116661/topic/4571059)提供了一个部分示例。

该示例采用现有的 RDL 文件，对其进行解析和执行，然后将 HTML 输出放入 asp.net 文字控件中，以便在浏览器中显示。

该代码片段在此处重复：

```
XmlDocument xmlDoc = new XmlDocument();
xmlDoc.Load("C:\MyFolder\MyReport.rdl");

RDLParser rdlp = new RDLParser(xmlDoc.OuterXml);
rdlp.Parse();

MemoryStreamGen ms = new MemoryStreamGen();
ProcessReport pr = new ProcessReport(rdlp.Report, ms);
pr.Run(null, OutputPresentationType.ASPHTML);

// Dump memory stream (HTML Text) to an out-of-box ASPX Literal control
this.LiteralReportHtml.Text = ms.GetText(); 
```

为此，您需要参考`ReportingCloud.Engine`.

* * *

我不确定你更大的目标是什么，但我想提请你注意 GitHub 上另一个名为`My-FyiReporting` [https://github.com/majorsilence/My-FyiReporting的开源项目](https://github.com/majorsilence/My-FyiReporting)

就像`ReportingCloud`,`My-FyiReporting`是`FyiReporting`（已经休眠）的一个分支。

就您而言，最大的不同在于它`My-FyiReporting` **具有 ASP.NET 示例和一个 ASP.NET 用户控制** [链接](https://github.com/majorsilence/My-FyiReporting/wiki/ASP.NET-Report-Control)。这可能是获得所需内容的快速方法。

`ORIGINALPROJECT.TXT`来自的文件`ReportingCloud`说：

> ReportingCloud 是原始项目 fyiReporting 4.1 ( [http://www.fyireporting.com](http://www.fyireporting.com) ) 的一个分支。

`readme.md`来自的文件`My-FyiReporting`说：

> My-FyiReporting 是 fyiReporting 的一个分支。我不能强调这一点。这是一个叉子。主要目的是确保我有一份 fyiReporting 的副本，因为该项目似乎已经死了。

# php - codeigniter 重定向功能？在 base_url 和控制器/函数之间

> ID：15569369
> 
> 赞同：0
> 
> 时间：2013-03-22T11:35:53.820
> 
> 标签：php, codeigniter, url, redirect

我制作了一个登录脚本来访问另一个控制器，这样其他人就看不到了。

现在我的控制器中有一个重定向功能，可以重定向到另一个控制器。

现在当我重定向它工作正常，但它放了一个？在我的 base_url 和控制器之间，如下所示：

[http://kees.een-site-bouwen.nl/?/member/index](http://kees.een-site-bouwen.nl/?/member/index)

我该如何解决？

我的家庭控制器功能：

```
public function process(){
    // Load the model
    $this->load->model('login_model');
    // Validate the user can login
    $result = $this->login_model->validate();
    // Now we verify the result
    if(! $result){
        // If user did not validate, then show them login page again
        $msg = '<font color=red>Invalid username and/or password.</font><br />';
        $this->index($msg);
    }else{
        // If user did validate, 
        // Send them to members area
        redirect('/member/index');
    }        
} 
```

它与我的 .htaccess 文件有关吗？

它看起来像这样：

```
<IfModule mod_rewrite.c>
RewriteEngine On
#Removes access to the system folder by users.
#Additionally this will allow you to create a System.php controller,
#previously this would not have been possible.
#'system' can be replaced if you have renamed your system folder.
RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ index.php?/$1 [L]

#When your application folder isn't in the system folder
#This snippet prevents user access to the application folder
#Submitted by: Fabdrol
#Rename 'application' to your applications folder name.
RewriteCond %{REQUEST_URI} ^LoginTut.*
RewriteRule ^(.*)$ index.php?/$1 [L]

#Checks to see if the user is attempting to access a valid file,
#such as an image or css document, if this isn't true it sends the
#request to index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?$1 [L]
</IfModule>
<IfModule !mod_rewrite.c>
 ErrorDocument 404 index.php
</IfModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:39:15.810

使用`redirect('member/index')` insted of `redirect('/member/index')`;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:55:45.163

将您的 htaccess 更改为：

```
<IfModule mod_rewrite.c>
RewriteEngine On

RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ index.php/$1 [L]

RewriteCond %{REQUEST_URI} ^LoginTut.*
RewriteRule ^(.*)$ index.php/$1 [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule> 
```

这样 url 被解析为`index.php/controller`而不是`index.php?/controller`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T09:41:50.403

我通过禁用 query_strings 来解决它，如下所示：

从：

```
$config['enable_query_strings'] = TRUE; 
```

到：

```
$config['enable_query_strings'] = FALSE; 
```

在我的 Config.php 文件中。

# c# - 为什么除了第一个附件对象之外的所有附件对象上的 FileContent 都是零字节？

> ID：15569375
> 
> 赞同：1
> 
> 时间：2013-03-22T11:36:16.830
> 
> 标签：c#, asp.net

我有一个表格，发件人通过它发送他的电子邮件 ID 和密码并选择附件

使用文件上传，我从数据库表中获取收件人的电子邮件 ID，电子邮件可以很好地到达收件人..但是

问题是，当我附加附件时，附件的大小变为 0，除了第一个电子邮件 ID

，我从表中得到..我已经粘贴了代码..

```
foreach (string email_to in list_emails)
{
    MailMessage mail = new MailMessage();
    mail.To.Add(email_to);
    mail.Subject = "UPDATES FROM ATTENDANCE S/W";
    mail.From = new MailAddress(txtFrom.Text.ToString());
    mail.Body = txtMessage.Text;
    if (FileUpload1.HasFile)
    {
        string fileName = Path.GetFileName(FileUpload1.PostedFile.FileName);
        Attachment myAttachment =
                           new Attachment(FileUpload1.FileContent, fileName);
        mail.Attachments.Add(myAttachment);
    }
    SmtpClient smtp = new SmtpClient();
    smtp.Host = "smtp.gmail.com";
    smtp.UseDefaultCredentials = false;
    smtp.Credentials = new System.Net.NetworkCredential(txtFrom.Text.ToString(), txtPasswd.Text.ToString());
    smtp.EnableSsl = true;
    smtp.Send(mail);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T11:39:41.180

发生这种情况是因为`FileContent`是 a `Stream`，所以当你从中读取时，它的位置`Stream`留在最后。考虑这样的事情。在循环的顶部存储字节，无论如何您都不需要继续读取它们`Stream`：

```
bool hasFile = FileUpload1.HasFile;

int fileLen = FileUpload1.PostedFile.ContentLength;
Stream stream = FileUpload1.FileContent;

byte[] file = new byte[fileLen];
stream.Read(file, 0, fileLen); 
```

然后在循环中，利用变量：

```
new Attachment(new MemoryStream(file) ... 
```

并且您需要更改`if`语句以利用`bool`：

```
if (hasFile) 
```

# java - jpa 映射两个属性

> ID：15569377
> 
> 赞同：1
> 
> 时间：2013-03-22T11:36:23.497
> 
> 标签：java, jpa, one-to-many, many-to-one

我需要在每个查询中完成的`CompanyUser.companyRolCompanyUsers`具有关系的属性。`OneToMany`

**JPA company_usr 实体：**

```
@Entity
@Table(name = "company_usr")
public class CompanyUser extends BaseModel implements Serializable {

    @Id
    @ManyToOne(fetch = FetchType.EAGER)
    @JoinColumn(nullable = false)
    private Company company;
    @Id
    @ManyToOne(fetch = FetchType.EAGER)
    @JoinColumn(name = "usr_id", nullable = false)
    private User user;

    @Column(nullable = false)
    private Boolean external;

    @OneToMany(fetch = FetchType.EAGER)
    private List<CompanyRolCompanyUser> companyRolCompanyUsers;

.... 
```

**JPA companyRol_companyUsr 实体：**

```
@Entity
@Table(name = "companyRol_companyUsr")
public class CompanyRolCompanyUser extends BaseModel implements Serializable {

    @Id
    @ManyToOne(fetch = FetchType.EAGER)
    @JoinColumns({
        @JoinColumn(name="companyuser_company_id",    referencedColumnName="company_id"),
        @JoinColumn(name="companyuser_usr_id", referencedColumnName="usr_id")
        })
    private CompanyUser companyUser;

    @Id
    @ManyToOne(fetch = FetchType.EAGER)
    private CompanyRol companyRol;

.... 
```

如何正确设置`mappedBy`属性`companyRolCompanyUsers`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:41:54.320

如果我得到你想要达到的目标，我认为你需要类似的东西：

```
@OneToMany(fetch = FetchType.EAGER, mappedBy="companyUser")
private List<CompanyRolCompanyUser> companyRolCompanyUsers; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-26T17:45:01.107

同一列可以有两个属性，如下所示：

```
@JoinColumn(name = "CGRADO_CODIGO", referencedColumnName = "CGRADO_CODIGO")
    @ManyToOne
    @NotFound(action=NotFoundAction.IGNORE)
    private SipreGrado                  sipreGrado;

    @Column(name = "CGRADO_CODIGO",insertable=false,updatable=false)
    private String                      sipreGradoCodigo; 
```

请记住，如果您有时有实体 NULL，您可以使用该注释跳过它

```
@NotFound(action=NotFoundAction.IGNORE) 
```

另外，记得设置

```
insertable=false,updatable=false 
```

对于您不想包含在插入/更新查询中的那个。

# css - 可在 div 上选择的画布

> ID：15569378
> 
> 赞同：1
> 
> 时间：2013-03-22T11:36:24.887
> 
> 标签：css, html, canvas

我有一个 HTML5 画布，我在上面执行一些操作并捕获一些事件。在画布上（上方）我有 4 个 div。是否可以看到 div 和 div 的内容，但让它们不可见。例如，当我将鼠标悬停在 div 上时，我实际上是在画布上吗？

我希望你能帮帮我！

`Simple example:` [http://jsfiddle.net/ygjen/5/](http://jsfiddle.net/ygjen/5/)

在遍历 div 时也获得鼠标坐标

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T13:55:25.093

是的，您可以使用[指针事件](https://developer.mozilla.org/en-US/docs/CSS/pointer-events)

```
 pointer-events: none; 
```

除了 IE8 及更低版本之外的所有内容都支持.. 但 Canvas 在 IE8 或更低版本中不受支持，因此这一点没有实际意义。

**[现场演示](http://jsfiddle.net/ygjen/6/)**

# hibernate - 如何避免与 DbUnit 插入的 id 和 Hibernate 插入的实体发生冲突

> ID：15569381
> 
> 赞同：0
> 
> 时间：2013-03-22T11:36:30.240
> 
> 标签：hibernate, testing, dbunit

我想使用 DbUnit 来测试 JPA/Hibernate Dao，但是由于 DbUnit XML 文件包含我的实体的硬编码 id，所以在测试由 Hibernate 完成的插入时我遇到了问题。

您知道从 XML 文件插入数据时会使用在我的实体上定义的 PK 生成器的任何 DbUnit 扩展或解决方案吗？甚至用 Hibernate 本身插入数据？

其他策略？

rgds

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:47:28.137

对于测试数据中硬编码的 Id，您可以使用负 Id 或非常高的 Id，例如从`Integer.MAX_VALUE`.

您还可以使用自定义 ID 生成器。但是，这将需要在构建时替换正在测试的实体的注释。您可以[在此处找到更多详细信息](https://stackoverflow.com/questions/14401475/how-to-combine-manual-insert-and-jpa-id-generation)

# android - 获取 AlertDialog 以在调用之间保存其复选框状态

> ID：15569385
> 
> 赞同：0
> 
> 时间：2013-03-22T11:36:41.040
> 
> 标签：android, user-interface, dialog, persistence

我有一个 DialogFragment (android.support.v4.app.DialogFragment)，我用它来实例化：

```
public Dialog onCreateDialog(Bundle savedInstanceState) {
  ...
  AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
  LayoutInflater inflater = getActivity().getLayoutInflater();  
  View v = inflater.inflate(R.layout.selector, null);
  builder.setView(v);
  ...
} 
```

我没有 setRetainInstance 所以默认它是假的。

在那个对话框中，我有几个复选框，我希望在调用此对话框之间记住它们的状态。我没有在对话框上放置任何按钮，我依靠用户在对话框外部单击以关闭它。

当屏幕方向改变时，一切正常；对话框以另一个方向重新创建，并保留用户的选择。这似乎是自动发生的，因为调用了 onSaveInstanceState 方法。

当我的对话框关闭时，我想从同样的魔法中受益，并且我注意到当用户在对话框外单击时不会调用 onSaveInstanceState。

我的直觉是从 onDismiss 中强制调用 onSaveInstanceState （对话框关闭时会调用它）。但是 onSaveInstanceState 需要一个 Bundle 作为参数，我找不到可以传递给它的合理的东西。我曾尝试调用 getArguments() 但这会返回 null。

那么有没有我可以传递给 onSaveInstanceState() 的论点，它会给我带来与改变方向相同的魔力？我也愿意接受其他简单的方法来保留通话之间的对话状态。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:19:20.533

我不知道`OnSaveInstanceState`，但是您可以`Boolean`为每个复选框创建变量，并且在`OnCheckedChangeListener`每个复选框中，您可以将复选框的状态保存在这些布尔变量中。

或者

你也可以`SharedPreferences`用来存储你的复选框的状态

并且要访问您必须使用的警报对话框中的复选框

```
CheckBox cbox = (CheckBox) view.findViewById(R.id._cbox);
                           ^^^^^ 
```

希望能帮助到你...

# javascript - 检查给定字符串中打开的、未转义的引号

> ID：15569390
> 
> 赞同：1
> 
> 时间：2013-03-22T11:36:56.017
> 
> 标签：javascript, regex

我正在构建的应用程序的一部分允许您`bash`在交互式终端中评估命令。输入时，命令运行。我试图让它更灵活一点，并允许跨越多行的命令。

我已经检查了尾随反斜杠，现在我试图弄清楚如何判断是否有一个打开的字符串。我没有成功为此编写正则表达式，因为它也应该支持转义引号。

例如：

```
echo "this is a 
\"very\" cool quote" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T11:48:38.937

如果您想要一个匹配字符串 ( `subject`) 的正则表达式，仅当它不包含不平衡（非转义）引号时，请尝试以下操作：

```
/^(?:[^"\\]|\\.|"(?:\\.|[^"\\])*")*$/.test(subject) 
```

**解释：**

```
^          # Match the start of the string.
(?:        # Match either...
 [^"\\]    #  a character besides quotes or backslash
|          # or
 \\.       #  any escaped character
|          # or
 "         #  a closed string, i. e. one that starts with a quote,
 (?:       #  followed by either
  \\.      #   an escaped character
 |         #  or
  [^"\\]   #   any other character except quote or backslash
 )*        #  any number of times,
 "         #  and a closing quote.
)*         # Repeat as often as needed.
$          # Match the end of the string. 
```

# c#-4.0 - 进程无法访问 Web 服务中的文件

> ID：15569394
> 
> 赞同：0
> 
> 时间：2013-03-22T11:37:03.083
> 
> 标签：c#-4.0, iis-7.5, fileinfo, directoryinfo

以下是我在删除目录时从我的网络服务获得的异常

```
The process cannot access the file 'button.js' because it is being used by another process. 
3/22/2013 11:16:51 AM : Exception :The process cannot access the file 'button.js'   because it is being used by another process. 
```

# 内部异常：

# 堆栈跟踪 ：

在 System.IO.Directory.DeleteHelper(String fullPath, String userPath, Boolean recursive) at System.IO.Directory.Delete(String fullPath, String userPath, Boolean recursive) at System.IO.Directory.Delete(String path, Boolean recursive) ) 在 E:\websites\test.cont.com\CRMobileAPI\v5_2\apibridge.asmx.cs:line 1213 中的 CRMobileAPI.v5_2.apibridge.downloadcompleted(String userid, String deviceid, String filepathurl)

# 资源 ：

## mscorlib

这是我的代码，

```
 if (Directory.Exists(_DirPath))
                {
                    try
                    {                            
                        DirectoryInfo _DirTemp = new DirectoryInfo(_DirPath);
                        _DirTemp.Delete(true);
                    }
                    catch (Exception Ex)
                    {
                        clsExHandler.Instance.Write(Ex);
                    }
                } 
```

注意：此异常不仅适用于“button.js”，而且会随时间变化。

我该如何摆脱这个问题；我的记录器文件卡住了这个异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:45:29.000

很可能的原因是，该文件正在使用中。您必须确保 Web 服务器没有访问该文件。但是，没有标准的方法可以做到这一点。

我建议您处理此异常并在稍有延迟后重试删除该文件。Web 服务器通常会在很短的时间内访问该文件，它应该会很快释放它，因此如果您使用相同的文件重试，则很有可能成功删除它。

# java - 带有 JAXB Random ClassCastException .. 的 Netbeans 无法转换为 com.sun.xml.bind.v2.runtime.reflect.Accessor

> ID：15569395
> 
> 赞同：22
> 
> 时间：2013-03-22T11:37:04.873
> 
> 标签：java, netbeans, jaxb, netbeans-7, jaxb2

我已经从 SOAP 服务下载了 Soap 消息，并试图通过返回下载的消息来模拟 Soap 服务。以下代码显示了我如何将 Soap 消息解组为所需的响应

```
 public static DataClientType unmarshallFile(String fileName) throws Exception {
    XMLInputFactory xif = XMLInputFactory.newFactory();
    XMLStreamReader xsr = xif.createXMLStreamReader(ClientSampleSoapResponseData.class.getResourceAsStream(fileName));
    xsr.nextTag(); // Advance to Envelope tag
    xsr.nextTag(); // Advance to Header
    xsr.nextTag(); // Advance to Body tag
    xsr.nextTag(); // Advance to getClientByAccountResponse
    xsr.nextTag(); // Advance to content of getClientByAccountResponse

    JAXBContext jc = JAXBContext.newInstance(GetClientByAccountResponse.class);
    Unmarshaller unmarshaller = jc.createUnmarshaller();
    JAXBElement<GetClientByAccountResponse> je = unmarshaller.unmarshal(xsr, GetClientByAccountResponse.class);

    return je.getValue().getClientDataContract();
} 
```

但是，我不断收到这个随机发生的 ClassCastExeption。经过多次测试迭代后，它开始发生。有时干净和构建修复它，但有时它不起作用。

```
java.lang.ClassCastException: com.x.X.X.X.GetClientByAccountResponse$JaxbAccessorF_clientDataContract cannot be cast to com.sun.xml.bind.v2.runtime.reflect.Accessor
at com.sun.xml.bind.v2.runtime.reflect.opt.OptimizedAccessorFactory.instanciate(OptimizedAccessorFactory.java:188)
at com.sun.xml.bind.v2.runtime.reflect.opt.OptimizedAccessorFactory.get(OptimizedAccessorFactory.java:180)
at com.sun.xml.bind.v2.runtime.reflect.Accessor$FieldReflection.optimize(Accessor.java:256)
at com.sun.xml.bind.v2.runtime.property.SingleElementNodeProperty.<init>(SingleElementNodeProperty.java:90) 
```

我已经尝试过其他在线建议，例如恢复到旧的 jaxb 版本并在 maven 编译器配置中使用认可的文件夹，但它仍然会发生

关于可能导致它的原因和可能的解决方案的任何想法？

感谢你

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-23T03:47:36.457

用下面的代码解决

```
@BeforeClass
public static  void init(){ 
    System.setProperty( "com.sun.xml.bind.v2.bytecode.ClassTailor.noOptimize", "true");
}

@AfterClass
public static void revert(){ 
    System.getProperties().remove("com.sun.xml.bind.v2.bytecode.ClassTailor.noOptimize");
} 
```

参数也可以在 JVM 中使用

```
-Dcom.sun.xml.bind.v2.bytecode.ClassTailor.noOptimize=true 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-11-25T04:19:46.343

当我尝试将 JAXB 升级到比 JDK 附带的新版本时，我遇到了同样的错误。Java 在运行时遇到两个或更多 JAXB 实例，无法决定使用哪个版本。

就我而言，问题在于我的应用程序使用了 Web 服务，而我也没有外部化 JAX-WS。应用程序开始使用 com.sun.xml.bind.v2.runtime 类，但是当它开始使用 WSDL 文件时，内部 JAX-WS 尝试调用 com.sun.xml。***内部***.bind.v2.runtime 类。当我下载并安装 JAX-WS 时，错误消失了，我能够继续升级。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-15T12:32:54.997

我在我的一个应用程序中遇到了同样的问题。在我的例子中，该项目使用的是与 Java 1.5 兼容编译的库，而主项目与 1.6 版本兼容。当我将两者都更改为使用 1.6 时，问题就消失了。我希望这能够帮助某人，因为这个问题可能非常令人沮丧且难以追踪。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-22T14:41:11.003

在 Intellij 中，接受的解决方案对我有用，但在从命令行运行 maven 时我遇到了同样的错误。将此添加到配置中以`maven-surefire-plugin`解决那里的问题：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
            <configuration>
                <systemPropertyVariables>
                    <com.sun.xml.bind.v2.bytecode.ClassTailor.noOptimize>true</com.sun.xml.bind.v2.bytecode.ClassTailor.noOptimize>
                </systemPropertyVariables>
            </configuration>
        </plugin> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-07-19T08:34:51.457

我从 build.sbt 中删除了对单独 jaxb-impl jar 的依赖。现在可以了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-10T12:39:48.950

我有一个类似的问题，但我没有/没有依赖（-version-mismatch）问题。

就我而言，一个类缺少[@XmlAccessorType](https://docs.oracle.com/javase/8/docs/api/javax/xml/bind/annotation/XmlAccessorType.html "@XmlAccessorType")，添加此注释解决了我的问题。根据您的情况，解决方案是：

```
import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;

@XmlAccessorType(XmlAccessType.FIELD) // check, if @XmlAccessorType is missing
public class GetClientByAccountResponse {
  .. 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-10T09:20:17.417

就我而言，问题在于我的应用程序使用了 Web 服务和 Spring 数据。`org.glassfish.jaxb`我排除了包含`com.sun.xml.bind.v2.runtime.reflect.Accessor`类和其他的工件`pom.xml`：

```
<dependency>
  <groupId>org.springframework.boot</groupId>
  <artifactId>spring-boot-starter-data-jpa</artifactId>
  <exclusions>
    <exclusion>
      <groupId>org.glassfish.jaxb</groupId>
      <artifactId>jaxb-runtime</artifactId>
    </exclusion>
  </exclusions>
</dependency> 
```

这对我有用！

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2015-01-09T18:48:38.293

在运行时通过父 pom 中的依赖项管理器包含 jaxbiimpl jar 将解决此问题。此解决方案特定于 Maven 项目。

# sql - SQL查询转表

> ID：15569400
> 
> 赞同：1
> 
> 时间：2013-03-22T11:37:23.903
> 
> 标签：sql, sql-server, pivot

我有一个 sql 查询，它从几个表中选择数据并进行一些计算。它产生的结果如下所示：

```
year    month   avg region
2011    1       123 UK
2012    1       0   UK
2013    1       0   UK
2011    2       400 UK
2012    2       200 UK
2013    2       0   UK 
```

但我希望结果看起来像这样：

```
month   year1   year2   year3   region
1       123     0       0       UK
2       400     200     0       UK 
```

这是我当前的查询：

```
SELECT TOP (100) PERCENT DATEPART(YEAR, dbo.Fixtures.Date) AS YEAR,
                         DATEPART(MONTH, dbo.Fixtures.Date) AS MONTH,
                         AVG(dbo.Fixtures.PCRate) AS AveragePCRate,
                         dbo.Region.GroupName AS Region
FROM dbo.Fixtures
INNER JOIN dbo.Vessel ON dbo.Fixtures.VesselId = dbo.Vessel.ID
INNER JOIN dbo.Region ON dbo.Fixtures.RegionId = dbo.Region.ID
WHERE (YEAR(dbo.Fixtures.Date) >= YEAR(DATEADD(YEAR, - 2, GETDATE())))
  AND (dbo.Vessel.TypeId = 1)
  AND (dbo.Vessel.Total_BHP >= 15000)
  AND (dbo.Vessel.Total_BHP < 20000)
GROUP BY dbo.Region.GroupName,
         DATEPART(YEAR, dbo.Fixtures.Date),
         DATEPART(MONTH, dbo.Fixtures.Date)
ORDER BY YEAR, MONTH 
```

这可能吗？PS 只有过去 3 年的数据。

编辑：这就是我的 SQL 查询的结果。

```
year        month   avgPC   Region
2011    1   7300    Norway
2011    1   6818    United Kingdom
2011    2   8500    Norway
2011    2   6235    United Kingdom
2011    3   15400   Norway
2011    3   0       South America
2011    3   12545   United Kingdom
2011    4   22887   Norway
2011    4   17231   United Kingdom
2011    5   24033   Norway
2011    5   9730    United Kingdom
2011    6   24249   Norway
2011    6   25000   United Kingdom
2011    7   23310   Norway
2011    7   25495   United Kingdom
2011    8   35890   Norway
2011    8   23000   United Kingdom
2011    9   28055   Norway
2011    9   33510   United Kingdom
2011    10  66437   Norway
2011    10  53713   United Kingdom
2011    11  26300   Norway
2011    11  14264   United Kingdom
2011    12  10800   Norway
2011    12  14553   United Kingdom 
```

这是我在执行下面建议的 piv 查询时得到的结果：

```
m   year1   year2   year3   region
1   NULL    0   8500    Norway
2   NULL    NULL    NULL    Norway
3   NULL    NULL    NULL    Norway
4   NULL    NULL    NULL    Norway
5   NULL    NULL    NULL    Norway
6   NULL    NULL    NULL    Norway
7   NULL    NULL    NULL    Norway
8   NULL    NULL    NULL    Norway
9   NULL    NULL    NULL    Norway
10  NULL    NULL    NULL    Norway
11  NULL    NULL    NULL    Norway
12  NULL    NULL    NULL    Norway
3   NULL    NULL    NULL    South America
1   10250   6000    13000   United Kingdom
2   NULL    NULL    NULL    United Kingdom
3   NULL    NULL    NULL    United Kingdom
4   NULL    NULL    NULL    United Kingdom
5   NULL    NULL    NULL    United Kingdom
6   NULL    NULL    NULL    United Kingdom
7   NULL    NULL    NULL    United Kingdom
8   NULL    NULL    NULL    United Kingdom
9   NULL    NULL    NULL    United Kingdom
10  NULL    NULL    NULL    United Kingdom
11  NULL    NULL    NULL    United Kingdom
12  NULL    NULL    NULL    United Kingdom 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T11:43:42.613

您没有指定您正在使用什么 RDBMS，但由于您正在使用`TOP`我猜测 SQL Server。

在 SQL Server 中，您可以使用以下`PIVOT`函数转换数据：

```
SELECT month,
  [2011] as year1, 
  [2012] as year2, 
  [2013] as year3,
  region
FROM
(
  SELECT DATEPART(year, dbo.Fixtures.Date) AS Year, 
    DATEPART(Month, dbo.Fixtures.Date) AS Month, 
    dbo.Fixtures.PCRate, 
    dbo.Region.GroupName AS Region
  FROM  dbo.Fixtures 
  INNER JOIN dbo.Vessel 
    ON dbo.Fixtures.VesselId = dbo.Vessel.ID 
  INNER JOIN dbo.Region 
    ON dbo.Fixtures.RegionId = dbo.Region.ID
  WHERE (YEAR(dbo.Fixtures.Date) >= YEAR(DATEADD(year, - 2, GETDATE()))) 
    AND (dbo.Vessel.TypeId = 1) 
    AND (dbo.Vessel.Total_BHP >= 15000) 
    AND (dbo.Vessel.Total_BHP < 20000)
) src
pivot
(
  avg(PCRate)
  for year in ([2011], [2012], [2013])
) piv; 
```

如果您不想对年份值进行硬编码，则可以使用类似于以下内容的内容：

```
SELECT month,
  year1, 
  year2, 
  year3,
  region
FROM
(
  SELECT 
    DATEPART(Month, dbo.Fixtures.Date) AS Month, 
    dbo.Fixtures.PCRate, 
    dbo.Region.GroupName AS Region,
    'year'+cast(row_number() over(partition by DATEPART(year, dbo.Fixtures.Date) 
                      order by DATEPART(year, dbo.Fixtures.Date)) as varchar(4)) year
  FROM  dbo.Fixtures 
  INNER JOIN dbo.Vessel 
    ON dbo.Fixtures.VesselId = dbo.Vessel.ID 
  INNER JOIN dbo.Region 
    ON dbo.Fixtures.RegionId = dbo.Region.ID
  WHERE (YEAR(dbo.Fixtures.Date) >= YEAR(DATEADD(year, - 2, GETDATE()))) 
    AND (dbo.Vessel.TypeId = 1) 
    AND (dbo.Vessel.Total_BHP >= 15000) 
    AND (dbo.Vessel.Total_BHP < 20000)
) src
pivot
(
  avg(PCRate)
  for year in (year1, year2, year3)
) piv; 
```

编辑＃1，很难从您发布的数据中看出问题所在，但如果您无法`avg`从子查询中删除，那么您应该能够使用：

```
select month, [2011] as year1, [2012] as year2, [2013] as year3, region
from
(
  SELECT 
    DATEPART(YEAR, dbo.Fixtures.Date) AS YEAR,
    DATEPART(MONTH, dbo.Fixtures.Date) AS MONTH,
    AVG(dbo.Fixtures.PCRate) AS AveragePCRate,
    dbo.Region.GroupName AS Region
  FROM dbo.Fixtures
  INNER JOIN dbo.Vessel ON dbo.Fixtures.VesselId = dbo.Vessel.ID
  INNER JOIN dbo.Region ON dbo.Fixtures.RegionId = dbo.Region.ID
  WHERE (YEAR(dbo.Fixtures.Date) >= YEAR(DATEADD(YEAR, - 2, GETDATE())))
    AND (dbo.Vessel.TypeId = 1)
    AND (dbo.Vessel.Total_BHP >= 15000)
    AND (dbo.Vessel.Total_BHP < 20000)
  GROUP BY dbo.Region.GroupName,
           DATEPART(YEAR, dbo.Fixtures.Date),
           DATEPART(MONTH, dbo.Fixtures.Date)
) src
pivot
(
  max(AveragePCRate)
  for YEAR in ([2011], [2012], [2013])
) piv; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:13:30.130

尝试：

```
SELECT 
    Month
    ,MAX(CASE WHEN YEAR = 2011 THEN AveragePCRate ELSE Null END) AS Year1
    ,MAX(CASE WHEN YEAR = 2012 THEN AveragePCRate ELSE Null END) AS Year2
    ,MAX(CASE WHEN YEAR = 2013 THEN AveragePCRate ELSE Null END) AS Year3
    ,Region 
FROM
(
SELECT TOP (100) PERCENT DATEPART(YEAR, dbo.Fixtures.Date) AS YEAR,
                         DATEPART(MONTH, dbo.Fixtures.Date) AS MONTH,
                         AVG(dbo.Fixtures.PCRate) AS AveragePCRate,
                         dbo.Region.GroupName AS Region
FROM dbo.Fixtures
INNER JOIN dbo.Vessel ON dbo.Fixtures.VesselId = dbo.Vessel.ID
INNER JOIN dbo.Region ON dbo.Fixtures.RegionId = dbo.Region.ID
WHERE (YEAR(dbo.Fixtures.Date) >= YEAR(DATEADD(YEAR, - 2, GETDATE())))
  AND (dbo.Vessel.TypeId = 1)
  AND (dbo.Vessel.Total_BHP >= 15000)
  AND (dbo.Vessel.Total_BHP < 20000)
GROUP BY dbo.Region.GroupName,
         DATEPART(YEAR, dbo.Fixtures.Date),
         DATEPART(MONTH, dbo.Fixtures.Date)
) YourQuery
GROUP BY Month, Region 
```

您可以通过使 CASE 语句使用当前日期进行测试来使其更有趣（这样您一次只有三年时间）。

# c++ - Visual C++程序抱怨网络框架

> ID：15569406
> 
> 赞同：0
> 
> 时间：2013-03-22T11:37:41.860
> 
> 标签：c++, visual-c++, winsock

我在 Visual C++ 2010 中编写了一个简单的客户端程序，它使用 winsock 连接到客户端。当我尝试在另一台计算机上运行此程序时，它抱怨缺少 Net Framework。我想知道为什么会这样？我的代码中有什么需要网络框架？

错误信息：

> 应用程序，您必须首先安装以下版本之一的 .NET Framework v4.0...等

这是我的代码

```
#pragma once
#pragma comment(lib, "Ws2_32.lib")

#include "stdafx.h"
#include <sdkddkver.h>
#include <WinSock2.h>
#include <Windows.h>
#include <iostream>
#include <string>
#include <time.h>
#include <cstring>
#include <sstream>

#define SCK_VERSION2 0x020

using namespace std;

void main() {
long Successful;
WSAData WinSockData;
WORD DLLVersion;
DLLVersion = MAKEWORD(2,1);
Successful = WSAStartup(DLLVersion, &WinSockData);
int sd,rcv,i,myint = 1;

hostent *host = gethostbyname("localhost");
char * myhostadd = inet_ntoa (*((struct in_addr *) host->h_addr_list[0]));

string memzi2,memzi,Converter;
char Message[200],tell[200] = "haa";

SOCKADDR_IN Address;

SOCKET sock;
sock = socket(AF_INET,SOCK_STREAM,NULL);

Address.sin_addr.s_addr = inet_addr(myhostadd);
Address.sin_family = AF_INET;
Address.sin_port = htons(7177);

cout << "Connecting to server...";
Successful = connect(sock, (SOCKADDR*)&Address, sizeof(Address));
u_long iMode=1;
ioctlsocket(sock,FIONBIO,&iMode);

if (Successful == 0) {
    cout << "Connected. "<< endl;

    for (;;++i) {
            std::stringstream convert2;
            convert2 << myint;
            memzi2 = convert2.str();
            std::cout << "Client: " << memzi2 << std::endl;
            const char * c = memzi2.c_str();

        sd = send(sock, c, sizeof(tell), NULL);
        cout << "Server: ";
        rcv = recv(sock,Message,sizeof(Message),NULL);
        Converter = Message;
        cout << Converter << endl;

        std::stringstream convert1(Converter);
        convert1 >> myint;
        if (myint > 5000) {
        myint = 1;
        }
        ++myint;

    }

        closesocket(sock);

}
else cout << "Failed." << endl;         

cout << "\n\n\t";
system("pause");
exit(1);
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:39:17.580

可能是一个简单的原因，它将使用 C++ CLI，即公共语言运行时。转到项目属性并修复它，它不会再显示了。

# jquery - 将项目拖到父项之外并进入 UI 对话框

> ID：15569407
> 
> 赞同：5
> 
> 时间：2013-03-22T11:37:42.490
> 
> 标签：jquery, jquery-ui

我有一个“li class='draggable'”和一个“div class='dropable'”，它位于 ui 对话框 div 中

当我尝试拖动“li”时，我无法将其拖动到它的父元素之外，所以我这样做了：

```
$(".draggable").draggable({
                containment: $('document'),
                helper: 'clone'
            }); 
```

我设法将它拖到它的父元素之外，但是当我打开 ui 对话框时，问题从这里开始，当我尝试拖动它时，li 总是在 ui 对话框后面，我不能把它放到可放置的 div 中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T22:43:04.650

尝试将助手直接附加到正文，并可能设置 zIndex，如下所示：

```
$(".draggable").draggable({
    appendTo: 'body', // Append to the body.
    zIndex: <someNumberYouThinkIsAppropriateHere>,
    containment: $('document'),
    helper: 'clone'
}); 
```

[http://api.jqueryui.com/draggable/#option-appendTo](http://api.jqueryui.com/draggable/#option-appendTo)

[http://api.jqueryui.com/draggable/#option-zIndex](http://api.jqueryui.com/draggable/#option-zIndex)

# c# - C#：简单类的序列化

> ID：15569409
> 
> 赞同：1
> 
> 时间：2013-03-22T11:37:46.627
> 
> 标签：c#, serialization

[我在http://msdn.microsoft.com/en-us/library/4abbf6k0.aspx](http://msdn.microsoft.com/en-us/library/4abbf6k0.aspx)尝试了基本序列化的（修改和简化）MSDN 示例

```
//the class :
[Serializable]
public class MyObject {
  public byte n1 = 0;
  public byte n2 = 0;
}

//The code
MyObject obj = new MyObject();
obj.n1 = 1;
obj.n2 = 24;
IFormatter formatter = new BinaryFormatter();
Stream stream = new FileStream("MyFile.bin", FileMode.Create, FileAccess.Write, FileShare.None);
formatter.Serialize(stream, obj);
stream.Close(); 
```

所以，我希望在 MyFile.bin 中找到 2 个字节：0x01 0x18
但它不是这样的，我有这个结果：

![在此处输入图像描述](../Images/24cf75b731d6dca5233977b9757dbba8.png)

为什么会有这一切。我怎么能做我想做的事。

该测试的目的是序列化更复杂的结构，以便将它们保存到二进制文件中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:40:05.180

序列化程序还存储有关已序列化对象的类型信息。在反序列化期间使用此信息，以便实例化适当类的实例。

我想建议您看一下用于二进制序列化的[protobuf-net 。](http://code.google.com/p/protobuf-net/)它速度快，并且比`BinaryFormatter`. 它可能比发明自己的序列化机制更安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:41:50.560

.Net 对象的序列化很复杂。它还存储元数据以重新生成 .Net 类，因此不要期望它会根据类成员对齐。它是一种专有格式，只有 .Net 框架可以反序列化该类。

如果您想以这种方式进行序列化，您应该编写自定义序列化函数来覆盖默认值并序列化/反序列化您自己的类。

# ios - NSDate 返回小时/天/周

> ID：15569413
> 
> 赞同：-1
> 
> 时间：2013-03-22T11:38:07.127
> 
> 标签：ios, objective-c, cocoa, nsdate

Instagram程序中的快照，日期显示为（例如）2小时前/3天前/1周前..我有“2013-03-20 16:02:48”..我怎样才能得到字符串“2天前“？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:51:52.697

考虑使用[NSCalendar](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSCalendar_Class/Reference/NSCalendar.html)和[NSDateComponents](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateComponents_Class/Reference/Reference.html)来计算差异并与最终用户相似。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T12:13:41.477

有一个开源项目

[https://github.com/billgarrison/SORelativeDateTransformer](https://github.com/billgarrison/SORelativeDateTransformer)

从其文档中：

> 例如，当前日期时间为 2010-12-05 11:30，则
> ... 2010-12-05 11:00 转换为“30 分钟前”
> ... 2010-12-01 11:00转换为“5天前”
> ... 2010-12-25 08:00 转换为“2周内”
> 
> ```
> // Display a file's creation date relative to today's date
> NSURL *someFilePath = ...;
> NSDictionary *attribs = [[NSFileManager defaultManager] attributesOfItemAtPath:someFilePath error:NULL];
> 
> NSDate *dateModified = [attribs fileModificationDate];
> 
> // fileModificationDate is 2010-10-01 12:00:00TZ; 
> // Date now is 2010-10-30 12:00:00TZ
> 
> SORelativeDateTransformer *relativeDateTransformer = [[SORelativeDateTransformer alloc] init];
> NSString *relativeDate = [relativeDateTransformer transformedValue: dateModified];
> 
> NSLog (@"This file was modified %@.", relativeDate); // ==> "This file was modified 3 weeks ago." 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T12:14:02.987

也许某处有一个图书馆可以为您做到这一点。

但无论如何，这并不难。可以将 NSDate 分解为其组件。然后很容易比较它们并编写一些 if then else 代码来涵盖所有需要的情况。

这是我的一个项目中的一个示例，我在过去 7 天内将日期解析为适当的工作日：

```
NSString *resultDateString;

// First, reduce the two dates we want to compare to the scope of days by erasing hours, minutes and seconds

unsigned int flagA = NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit;
NSDateComponents *compsA = [[NSCalendar currentCalendar] components:flagA fromDate:myObjectsDate];
[compsA setHour:0];
[compsA setMinute:0];
[compsA setSecond:0];
NSDate *checkDate = [[NSCalendar currentCalendar] dateFromComponents:compsA];

unsigned int flagB = NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit;
NSDateComponents *partsB = [[NSCalendar currentCalendar] components:flagB fromDate:[NSDate date]];
[compsB setHour:0];
[compsB setMinute:0];
[compsB setSecond:0];
NSDate *nowDate = [[NSCalendar currentCalendar] dateFromComponents:compsB];

// Get the interval between the two dates, interval is still in seconds, but since it is calculated using days only, it will be precisely 0 if the day is the same    

NSTimeInterval interval = [searchDate timeIntervalSinceDate:nowDate];

// check if the objects date is today. If it isn't, find out which day it is and name it appropriately

if (interval == 0) {

    resultDateString = [NSString stringWithString:@"Today"];

} else {

   unsigned int flagC = NSWeekdayCalendarUnit;
   NSDateComponents *compsC = [[NSCalendar currentCalendar] components:flagC fromDate:myObjectsDate];

   switch ([compsC weekday]) {
       case 1:
           resultDateString = @"Sunday";
           break;
       case 2:
           resultDateString = @"Monday";
           break;
       case 3:
           resultDateString = @"Tuesday";
           break;
       case 4:
           resultDateString = @"Wednesday";
           break;
       case 5:
           resultDateString = @"Thursday";
           break;
       case 6:
           resultDateString = @"Friday";
           break;
       case 7:
           resultDateString = @"Saturday";
           break;

       default:
           break;
   }

} 
```

这只是一个摘录，请注意，此代码片段不会检查间隔是否长于 7 天，因为我在代码中以不同的方式涵盖了此类情况。但我认为它会给你一个如何做到这一点的基本概念。

# magento - Magento 1.7 让访问者选择隐藏缺货产品

> ID：15569416
> 
> 赞同：-1
> 
> 时间：2013-03-22T11:38:08.980
> 
> 标签：magento, navigation, layered

在配置中，我将“显示缺货产品”设置为“是”

但如果希望作为分层导航选项的一部分，希望在类别列表页面上为访问者提供隐藏“缺货”产品的选项

或过滤库存产品

有什么想法吗 ？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:05:09.900

管理客户属性（布尔值 - 是/否）（例如：show_outofstock）并设为默认值（否）并制作自定义模块以扩展此助手：

app/code/core/Mage/CatalogInventory/Helper/Data.php

> Mage_CatalogInventory_Helper_Data

并重写方法

```
public function isShowOutOfStock()
{

    $customer = Mage::helper('customer')->getCustomer();
    if($customer )
    {
        return $customer->getShowOutofstock();
    }
    //return Mage::getStoreConfigFlag(self::XML_PATH_SHOW_OUT_OF_STOCK);
} 
```

# mongodb - 如何在mongodb中查询

> ID：15569417
> 
> 赞同：0
> 
> 时间：2013-03-22T11:38:17.780
> 
> 标签：mongodb

数据：

```
[{        
                    "shop_ID" : "ABCD",
                    "plan" : 2,
                    "planType" : 2,
                    "goods_id" : "9612",
                    "category" : "1",
                    "keywords" : [
                        {
                            "keyword" : "lianyiqun",
                            "price" : 3.12,
                            "score" : 9
                        },
                        {
                            "keyword" : "nvzhuang",
                            "price" : 6.57,
                            "score" : 6
                        },
                        {
                            "keyword" : "chunzhuang",
                            "price" : 5.55,
                            "score" : 8
                        }
                    ]
                },
                {
                    "shop_ID" : "ABCD",
                    "plan" : 2,
                    "planType" : 2,
                    "goods_id" : "5078",
                    "category" : "1",
                    "keywords" : [
                        {
                            "keyword" : "lianyiqun",
                            "price" : 9.26,
                            "score" : 8
                        },
                        {
                            "keyword" : "nvzhuang",
                            "price" : 4.52,
                            "score" : 9
                        }
                    ]
                }] 
```

我使用了命令查询：

db.test.find({"keywords" : { $elemMatch: {"score":{"$gte":8}} } })

结果不对，都是文件。

并且，使用命令 db.test.find({"keywords."score":{"$gte":8}})

结果是一样的。

我想要第一个文档的查询结果如下：

```
{        
                        "shop_ID" : "ABCD",
                        "plan" : 2,
                        "planType" : 2,
                        "goods_id" : "9612",
                        "category" : "1",
                        "keywords" : [
                            {
                                "keyword" : "lianyiqun",
                                "price" : 3.12,
                                "score" : 9
                            },
                            {
                                "keyword" : "chunzhuang",
                                "price" : 5.55,
                                "score" : 8
                            }
                        ]
                    }, 
```

如何查询内部文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T16:19:50.347

有一个[$elemMatch](http://docs.mongodb.org/manual/reference/projection/elemMatch/)投影运算符，它将从每个数组中返回一个与您的条件匹配的元素：

```
db.test.find( { } , 
              { keywords: { $elemMatch: { score: { $gte: 8 } } } } 
            ) 
```

要返回子文档中分数 >= 8 的所有元素，可以使用[聚合框架](http://docs.mongodb.org/manual/reference/aggregation/)：

```
 db.test.aggregate ( [ { $unwind: "$keywords" },
                       { $match: { "keywords.score" : { $gte: 8 } } } 
                     ] ) 
```

问候

# iphone - UIActivityController 在 Facebook 上发帖

> ID：15569422
> 
> 赞同：5
> 
> 时间：2013-03-22T11:38:26.627
> 
> 标签：iphone, ios, objective-c, facebook, uiactivityviewcontroller

我已经`UIActivityController`在我的项目中添加了。看起来关于这个特定主题的帮助要少得多。我面临的问题是链接以一种奇怪的方式在 Facebook 上共享，而不是通常在 Facebook 上共享的方式。更有意义的是，照片和链接都在 iOS 照片文件夹中，没有任何更改它的选项。

以下是他们当前如何在 Facebook 上共享的示例图片：

![在此处输入图像描述](../Images/0b975799b69dbf7c33790dc1d411091a.png)

它们通常如何在 Facebook 上共享以及我想要什么：

![在此处输入图像描述](../Images/b29b91704a21e2c80d4d8bb1e2e4310e.png)

这是我用来在我的项目中添加 UIActivityController 的代码：

```
UIActivityViewController *objVC = [[UIActivityViewController alloc]initWithActivityItems:[NSArray arrayWithObjects:titleString, [NSURL URLWithString:urlString], imageTaker, nil] applicationActivities:nil];

[self presentViewController:objVC animated:YES completion:nil];
[objVC setCompletionHandler:^(NSString *activityType, BOOL completed)
 {
     NSLog(@"Activity = %@",activityType);
     NSLog(@"Completed Status = %d",completed);

     if (completed)
     {
         UIAlertView *objalert = [[UIAlertView alloc]initWithTitle:@"Alert" message:@"Posting was success" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
         [objalert show];
         objalert = nil;
     }else
     {
         UIAlertView *objalert = [[UIAlertView alloc]initWithTitle:@"Alert" message:@"Posting was not successful" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
         [objalert show];
         objalert = nil;
     }
 }]; 
```

除此之外，我还在控制台中收到一些警告，如下所示：

```
Registering unknown app identifier com.apple.mobilemail failed
Unable to find app identifier com.apple.mobilemail
Registering unknown app identifier com.apple.MobileSMS failed
Unable to find app identifier com.apple.MobileSMS 
```

**更新：**我也尝试过集成`REActivityController`，一个实现相同但具有额外功能的库，但我面临同样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-09T18:43:43.620

要共享链接，请避免传递图像。所以使用代码链接：

```
UIActivityViewController *objVC = [[UIActivityViewController alloc]initWithActivityItems:[NSArray arrayWithObjects:[NSURL URLWithString:urlString], nil] applicationActivities:nil]; 
```

或这个：

```
UIActivityViewController *objVC = [[UIActivityViewController alloc]initWithActivityItems:[NSArray arrayWithObjects:titleString, [NSURL URLWithString:urlString], nil] applicationActivities:nil]; 
```

要记住的关键是，如果您指定一张图片，那么它将被视为照片分享故事，您的标题和网址最终与照片说明相似。如果您省略图像，则将其视为链接共享，您的标题将成为消息。

如果链接具有 Open Graph 标签，最终的故事会在 Facebook 上正确呈现，并且通过正确呈现我的意思是您将看到图片、标题、描述等。如果链接中没有嵌入 Open Graph 标签，则链接很简单显示在结果故事中。

# asp.net - 在报表中显示不同的分组表

> ID：15569423
> 
> 赞同：0
> 
> 时间：2013-03-22T11:38:27.997
> 
> 标签：asp.net, reporting-services, ssrs-2008, reportviewer

我有一个带有基本表格的报告，其中列出了数据集中的每一行。

我想在顶部添加一个分组汇总表（按产品和位置）：

```
PRODUCT  LOCATION  QUANTITY
Widget1  br1       10
Widget1  br2       1
Widget2  br1       12 
```

你明白了。不确定我可以使用什么分组选项，因为我对报表查看器控件没有经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:30:50.793

这是我自己想出来的。

右键单击行 -> 行组 -> 组属性 -> 排序 -> 按产品 AZ、位置 AZ 排序。

仍在组属性对话框中。转到常规-> 将名称设置为“组”。添加组表达式：Group on Product 和 Location。

返回报表生成器，右键单击 Quantity 单元格，选择表达式，将表达式设置为`=RowNumber("Group")`。

这正是我想要的:)。

# javascript - 如何在单个 onclick 上同时获取图像名称和 src？

> ID：15569425
> 
> 赞同：1
> 
> 时间：2013-03-22T11:38:29.573
> 
> 标签：javascript

这可能吗，单击图像即可同时获取图像名称和 src 吗？

我是 javascript 和 php 的新手。

```
 <script language="javascript" type="text/javascript">
 function SetImageName(strName)
 {
 document.getElementById("ImageName").value = strName;
 }
 </script>

 <div id="Images">

 <img src="images/image1.jpg" name="image1.jpg" onclick="SetImageName(this.name)"/></a>
 <img src="images/image2.jpg" name="image2.jpg" onclick="SetImageName(this.name)"/>

 </div><input type="hidden" value="" id="ImageName" name="ImageName"/> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-22T11:40:59.160

可能吗？当然。

在您的 html 标记中：

```
onclick="SetImageName(this)" 
```

然后在你的 JS 中：

```
function SetImageName(imgElement) {
    var theName = imgElement.name;
    var theSrc = imgElement.src;
    // etc. 
```

也就是说，当您调用时，使用`SetImageName()`传递对单击元素本身的引用`this`，而不仅仅是使用 的名称`this.name`。然后在您的函数中，您可以根据需要访问其任何和所有属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T11:48:22.743

您可以使用此函数获取图像的“src”：

```
 document.getElementById("imagename").src 
```

所以你的代码是：

```
<script language="javascript" type="text/javascript">
    function SetImageProperties(control)
    {
        // Populate hidden fields with properties of the control
        document.getElementById("ImageName").value   = control.name;
        document.getElementById("ImageSource").value = control.src;
    }
 </script>

 <div id="Images">

 <img src="images/image1.jpg" name="image1.jpg" onclick="SetImageProperties(this)"/>
 <img src="images/image2.jpg" name="image2.jpg" onclick="SetImageProperties(this)"/>

 </div><input type="hidden" value="" id="ImageName"   name="ImageName"/>
 </div><input type="hidden" value="" id="ImageSource" name="ImageSource"/> 
```

通过传递

```
 this 
```

代替

```
 this.name 
```

您正在传递对整个 DOM 对象的引用。然后，您可以单独使用每个属性，如上面修改后的代码所示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T11:44:42.030

当用户单击图像时，该函数`SetImageName`将通过以下方式调用：

```
onclick="SetImageName(this)" 
```

意义：

```
<img src="images/image1.jpg" name="image1.jpg" onclick="SetImageName(this)"/> 
```

`SetImageName`函数实现你将通过and获取图片的名称和`image.name`src`image.src`

# python - numpy gcd 函数

> ID：15569429
> 
> 赞同：10
> 
> 时间：2013-03-22T11:38:56.670
> 
> 标签：python, numpy, greatest-common-divisor

在其模块结构的某处`numpy`有功能吗？`gcd`

我知道`fractions.gcd`但认为`numpy`等效的可能更快，并且可以更好地处理`numpy`数据类型。

[除了这个似乎过时的链接](http://mail.scipy.org/pipermail/numpy-discussion/2010-June/050833.html)之外，我无法在谷歌上发现任何东西，我不知道如何访问`_gcd`它建议存在的功能。

天真地尝试：

```
np.gcd
np.euclid 
```

对我没用...

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-22T12:46:34.193

你可以自己写：

```
def numpy_gcd(a, b):
    a, b = np.broadcast_arrays(a, b)
    a = a.copy()
    b = b.copy()
    pos = np.nonzero(b)[0]
    while len(pos) > 0:
        b2 = b[pos]
        a[pos], b[pos] = b2, a[pos] % b2
        pos = pos[b[pos]!=0]
    return a 
```

这是测试结果和速度的代码：

```
In [181]:
n = 2000
a = np.random.randint(100, 1000, n)
b = np.random.randint(1, 100, n)
al = a.tolist()
bl = b.tolist()
cl = zip(al, bl)
from fractions import gcd
g1 = numpy_gcd(a, b)
g2 = [gcd(x, y) for x, y in cl]
print np.all(g1 == g2)

True

In [182]:
%timeit numpy_gcd(a, b)

1000 loops, best of 3: 721 us per loop

In [183]:
%timeit [gcd(x, y) for x, y in cl]

1000 loops, best of 3: 1.64 ms per loop 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-10-25T23:31:16.003

使用 Python 3.5 的任何人的公共服务公告

```
from math import gcd
gcd(2, 4) 
```

如果你想自己写一个单行：

```
def gcd(a: int, b: int): return gcd(b, a % b) if b else a 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-22T11:50:24.820

中似乎还没有`gcd`功能`numpy`。[但是，分数模块中](http://docs.python.org/2/library/fractions.html#fractions.gcd)有一个gcd 函数。如果您需要`gcd`在`numpy`数组上执行，您可以使用它构建一个`ufunc`：

```
gcd = numpy.frompyfunc(fractions.gcd, 2, 1) 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-12-06T11:50:21.603

函数[gcd （最大公约数）](https://docs.scipy.org/doc/numpy/reference/generated/numpy.gcd.html#numpy.gcd)和[lcm （](https://docs.scipy.org/doc/numpy/reference/generated/numpy.lcm.html#numpy.lcm)最小公倍数）已添加到 numpy[版本 1.15](https://docs.scipy.org/doc/numpy-1.15.1/release.html#new-functions)。

您可以在一对标量上“按原样”使用它们

```
import numpy as np

np.gcd(-5, 10)  # yields '5' 
```

或在列表或数组上使用`.reduce`：

```
np.gcd.reduce(np.array([-5, 10, 0, 5]))  # yields '5' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-02T20:12:23.800

如果所需的结果不是按元素计算的 gcd，而是数组中所有数字的 gcd，您可以使用下面的代码。

```
import numpy as np
from math import gcd as mathgcd

def numpy_set_gcd(a):
    a = np.unique(a)
    if not a.dtype == np.int or a[0] <= 0:
        raise ValueError("Argument must be an array of positive " +
                         "integers.")

    gcd = a[0]
    for i in a[1:]:
        gcd = mathgcd(i, gcd)
        if gcd == 1:
            return 1 

    return gcd 
```

根据用例，省略排序步骤可能会更快`a = np.unique(a)`。

使用 ufuncs 的另一种（可能更优雅但更慢）实现是

```
import numpy as np
from math import gcd as mathgcd
npmathgcd = np.frompyfunc(mathgcd, 2, 1)

def numpy_set_gcd2(a):
    a = np.unique(a)
    if not a.dtype == np.int or a[0] <= 0:
        raise ValueError("Argument must be an array of positive " +
                         "integers.")
    npmathgcd.at(a[1:], np.arange(a.size-1), a[:-1])
    return a[-1] 
```

# mysql - Visual Studio 2010 中的实体框架 5 和 MySql - 模型优先问题

> ID：15569431
> 
> 赞同：1
> 
> 时间：2013-03-22T11:39:01.943
> 
> 标签：mysql, visual-studio-2010, entity-framework-5, mysql-connector, ef-model-first

我使用 MySql 数据库在 Visual Studio 2010、.NET 4.0 中开发了应用程序。

我已经安装了 Entity Framework 5.0 和 EF 5.x DbContext Generator for VB（使用 NuGet），然后是 MySql Connector 6.5.5。我使用的是 Model First 方法，所以我创建了两个表，然后我选择了“Generate database from model..”选项。设置连接提供程序和连接参数（成功测试连接到数据库）后，我单击“完成”，生成 *.sql 文件，但在我的数据库中没有创建任何内容。更糟糕的是，生成的 SQL 脚本是 SQL Server Flavor 并且它有一个标题：

```
-- --------------------------------------------------
-- Entity Designer DDL Script for SQL Server 2005, 2008, and Azure
-- --------------------------------------------------
-- Date Created: 03/22/2013 12:11:00
-- Generated from EDMX file: C:\Apps\app\DataAccessLayer\DbModel.edmx
-- --------------------------------------------------

SET QUOTED_IDENTIFIER OFF;
GO
USE [MyDatabase];
GO
IF SCHEMA_ID(N'dbo') IS NULL EXECUTE(N'CREATE SCHEMA [dbo]');
GO

(...) 
```

如何使用 Mysql 和 MySql Connector 强制执行 EF 以自动创建数据库表，并生成 MySql 脚本，没有 SQL Server 脚本？

最好的问候， WP

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:20:15.127

问题评论给我们和答案。概括：

1)将 *.edmx 模型的**DDL 生成模板属性更改为****SSDLToMySQL.tt (VS)**

2) 数据库不是自动生成的。您必须自己执行生成的脚本（在服务器资源管理器视图中的 Visual Studio 中，或使用其他工具，即 PhpMyAdmin）。

# c# - 以编程方式识别 Windows 应用商店应用程序中的文件类型关联？

> ID：15569433
> 
> 赞同：0
> 
> 时间：2013-03-22T11:39:12.070
> 
> 标签：c#, configuration, microsoft-metro, windows-store-apps, file-type

*Windows*或*.NET for Windows Store apps* API:s 中是否有任何支持允许我列出为正在执行的应用程序定义的文件类型关联？

在我的场景中，我有一个*Windows 应用商店类库*，我打算从各种*Windows 应用商店应用程序*中引用它。理想情况下，我希望能够在类库方法中读取应用程序定义的文件类型关联。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:43:26.667

迄今为止，似乎没有内置方法可以访问*Windows 应用商店应用程序的文件类型关联，但由于*[这篇](http://tonychampion.net/blog/index.php/2013/01/examining-the-windows-store-apps-appxmanifest-at-runtime/)博文，我已经能够实现一种解决方法。

显然，*Package.appxmanifest*文件被转换为一个文件*AppxManifest.xml*，该文件与部署的应用程序一起分发。其中，清单文件包含用户定义的应用程序文件类型关联，因此可以使用简单的*XML查询来获取这些定义：*

```
var document = XDocument.Load("AppxManifest.xml");
var xname = XNamespace.Get("http://schemas.microsoft.com/appx/2010/manifest");

var fileTypeElements = 
    document.Descendants(xname + "FileTypeAssociation").Descendants().Descendants();
var supportedFileExtensions = 
    fileTypeElements.Select(element => element.Value).ToArray(); 
```

这段代码当然可以进一步微调，例如*FileTypeAssociation*节点是*Application*节点的（深）后代，在同一个清单文件中可以有多个。尽管如此，上面的代码至少应该能够作为第一次尝试的方法。

# php - 防止 CSS 继承 WordPress 中包含的 PHP 脚本中的父 CSS

> ID：15569439
> 
> 赞同：1
> 
> 时间：2013-03-22T11:39:27.377
> 
> 标签：php, css, wordpress

我编写了一个小的 PHP 脚本，我通过短代码将其包含到了 WordPress 页面中。是否可以只在 PHP 脚本中使用自定义 css 文件而不从 WordPress 主题继承 CSS 元素？

如果是，比如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T11:49:39.017

通常，如果在前一个文件之后调用新样式文件，它将被覆盖，或者如果它以某种方式关键，则在它自己的标签中指定样式。

如果需要更多帮助，请为您的工作提供示例，我希望这样做。

谢谢你

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T11:55:47.420

原始样式表之后包含的任何样式都将覆盖以前的样式（只要它们符合同一级别）。

覆盖样式的更好方法是为您的新页面提供一个 ID，然后在您的新样式表中使用`#NewID .cssSelectorToOverride {\*new styles\*}`

这是一篇可以教你css选择器和优先级的好文章：[http ://www.vanseodesign.com/css/css-specificity-inheritance-cascaade/](http://www.vanseodesign.com/css/css-specificity-inheritance-cascaade/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-27T10:04:45.760

在 WordPress 主题的根目录中打开 function.php 文件。并且只需插入此函数PFB，只需更改目录，对于js，您不需要连接单独的文件，因为您可以使用footer.php并将您的js代码插入脚本标签中，它会正常工作。

```
add_action( 'wp_enqueue_scripts', 'radliv_child_enqueue_styles' ); function radliv_child_enqueue_styles() {     wp_enqueue_style( 'custom-css-style', get_template_directory_uri() . '/inc/assets/css/custom.css' ); } ; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T12:02:30.643

你必须做两件事：

1.  给你的片段一个父 div id，说“#mySnippet”
2.  在您的 css 文件的底部，为#mySnippet 元素添加一个部分。位于底部很重要，因此如果必须，它可以覆盖其他属性

自定义 CSS 文件并不总是适用于 wordpress，因为平台需要特定的文件结构，如果我没记错的话，你所有的 css 代码都必须在 style.css 中。这就是为什么您的代码片段必须位于底部的 style.css 中（最好通过注释行与其余部分很好地隔离）。

现在，您需要更改的所有元素都将简单地以#mySnippet 开头。例如，片段中的 P 标记应定位为：

```
#mySnippet p {
property:value;
} 
```

这应该照顾它..

# razor - 将 ext.net 与 razor 一起使用时遇到问题

> ID：15569440
> 
> 赞同：0
> 
> 时间：2013-03-22T11:39:30.413
> 
> 标签：razor, asp.net-mvc-4, ext.net

我是 ext.net 框架的新手。我正在尝试将 ext.net 框架与 razor 一起使用来开发使用 MVC4 的 Web 应用程序。 `Ext.net`作为一种开源技术，我下载了它并尝试运行它。我在使用这项技术时遇到了很多麻烦。我根据给定的说明配置了我的 web 配置文件，并添加了对项目的引用，例如`ext.net, transformer.net, newtonsoft.json..`

但是当我开始使用代码 `@Html.X().ResourceManager()`时，

它不允许我使用`.X() part creating the problem`.

这意味着 ext.net 框架尚未正确安装在我的系统中，但我已完成所有必要的步骤。

所以大家帮帮我。[除了在http://mvc.ext.net](http://mvc.ext.net)上，我找不到很多关于这项技术的教程

在这个问题上的任何帮助都会非常有帮助，任何愿意指导我的人都非常受欢迎

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-17T09:56:26.930

尝试安装 Microsoft ASP.NET MVC 包

（使用 Nu-get 控制台管理器），您可以使用此命令安装 Ext.NET

```
Install-Package Ext.NET.MVC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:25:04.773

我认为您的 web.config 文件有问题。这是我的 MVC 4 ext.net 集成应用程序 web.config 文件。我希望它有所帮助。

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    <section name="extnet" type="Ext.Net.GlobalConfig" requirePermission="false"/>
  </configSections>
  <extnet theme="Gray"/>
  <connectionStrings>
    <add name="DefaultConnection" providerName="System.Data.SqlClient" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=aspnet-MVC4ExtNetTemplate-20130401120654;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnet-MVC4ExtNetTemplate-20130401120654.mdf" />
  </connectionStrings>
  <appSettings>
    <add key="webpages:Version" value="2.0.0.0" />
    <add key="webpages:Enabled" value="false" />
    <add key="PreserveLoginUrl" value="true" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
  </appSettings>
  <system.web>
    <httpRuntime targetFramework="4.5" />
    <compilation debug="true" targetFramework="4.5" />
    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login" timeout="2880" />
    </authentication>
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Optimization" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
        <add namespace="Ext.Net"/>
        <add namespace="Ext.Net.MVC"/>
      </namespaces>
    </pages>
    <profile defaultProvider="DefaultProfileProvider">
      <providers>
        <add name="DefaultProfileProvider" type="System.Web.Providers.DefaultProfileProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/" />
      </providers>
    </profile>
    <membership defaultProvider="DefaultMembershipProvider">
      <providers>
        <add name="DefaultMembershipProvider" type="System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
      </providers>
    </membership>
    <roleManager defaultProvider="DefaultRoleProvider">
      <providers>
        <add name="DefaultRoleProvider" type="System.Web.Providers.DefaultRoleProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/" />
      </providers>
    </roleManager>
    <!--
            If you are deploying to a cloud environment that has multiple web server instances,
            you should change session state mode from "InProc" to "Custom". In addition,
            change the connection string named "DefaultConnection" to connect to an instance
            of SQL Server (including SQL Azure and SQL  Compact) instead of to SQL Server Express.
      -->
    <sessionState mode="InProc" customProvider="DefaultSessionProvider">
      <providers>
        <add name="DefaultSessionProvider" type="System.Web.Providers.DefaultSessionStateProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" />
      </providers>
    </sessionState>
    <httpHandlers>
      <add path="*/ext.axd" verb="*" type="Ext.Net.ResourceHandler" validate="false"/>
    </httpHandlers>
    <httpModules>
      <add name="DirectRequestModule" type="Ext.Net.DirectRequestModule, Ext.Net"/>
    </httpModules>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules>
      <add name="DirectRequestModule" preCondition="managedHandler" type="Ext.Net.DirectRequestModule, Ext.Net"/>
    </modules>
    <handlers>

      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
      <add name="DirectRequestHandler" verb="*" path="*/ext.axd" preCondition="integratedMode" type="Ext.Net.ResourceHandler"/>
    </handlers>
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
  </entityFramework>
</configuration> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T23:12:44.583

如果 /Views/ 文件夹中有 Web.config 文件，请确保将 Ext.NET 所需的节点也添加到该 Web.config 文件中。

# php - 在包含的列上过滤分页结果

> ID：15569444
> 
> 赞同：2
> 
> 时间：2013-03-22T11:39:51.053
> 
> 标签：php, cakephp, cakephp-2.0, cakephp-2.3

我的数据库成员和成员项中有两个表。我为它创建了两个模型。一个是Member，另一个是Memberitem

Member 模型与 Memberitem 有 hasMany 关系，而 Memberitem 模型与我的 Member 模型有 belongsTo 关系。

Memberitem 条目具有基于颜色的特定分类，如红色、粉红色、绿色等。现在我想使用分页选择所有具有至少一个粉红色成员项的成员。

目前我正在使用：

```
$this->paginate = array(
    'limit' => 5,
    'contain' => array(
        'Memberitem' => array(
            'conditions' => array('Memberitem.color' => 'Pink')
        )
    )
); 
```

但它显示了所有成员。

输出是这样的：

```
Array
(
[0] => Array
    (
        [Member] => Array
            (
                [id] => 1
                [first_name] => fh
                [last_name] => g
            )

        [Memberitem] => Array
            (
                [0] => Array
                    (
                        [id] => 1
                        [name] => item2
                        [color]=> Pink
                    )
            )

    )

[1] => Array
    (
        [Member] => Array
            (
                [id] => 2
                [first_name] => ad
                [last_name] => vd
            )

        [Memberitem] => Array
            (
            )

    )

[2] => Array
    (
        [Member] => Array
            (
                [id] => 3
                [first_name] => ae
                [last_name] => sdi
            )

        [Memberitem] => Array
            (
                [0] => Array
                    (
                        [id] => 3
                        [name] => item1
                        [color]=> Pink
                    )

            )

    )

) 
```

它显示了这个结果。空成员项的成员仍然存在。我只想要结果中的第 1 条和第 3 条记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-06T11:27:17.303

这是经典 :-) 不过需要一段时间才能得到它。

蛋糕手册对此非常满意。您应该阅读：[http ://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html# contains-deeper-associations](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html#containing-deeper-associations)

因此，如果您只想要具有某些 MemberItems 的成员，您应该查询 MemberItems 并包含成员模型。您实际上可以从成员模型中执行此操作：

```
$this->Member->Memberitem->find('all', array(
    'conditions' => 'Memberitem.color = "Pink"',
    'contain' => 'Member',
)); 
```

或者更适合您的应用程序：

```
$this->paginate['Memberitem'] = array(
    'contain' => array('Member'),
    'conditions' => array(
        'Memberitem.color' => 'Pink',
    ),
);
$items = $this->paginate('Memberitem'); 
```

希望有帮助！

# wpf - 从组合框选定项显示数据网格详细信息

> ID：15569445
> 
> 赞同：1
> 
> 时间：2013-03-22T11:39:53.917
> 
> 标签：wpf, xaml, wpf-controls, wpfdatagrid

我的应用程序中有一个`combobox`和一个`datagrid`。数据网格的 itemsSource 来自其 collectionViewSource，`ComboBoxItem`组合框中有三个作为警告/错误/异常，如下图所示。 ![在此处输入图像描述](../Images/6c0623bf69afdc6d8abbfe42c6f0c6ca.png)

选择相应项时如何在数据网格上显示选定项行详细信息`ComboxBoxitem`。

这是我尝试过的。组合框 - XAML

```
<ComboBox 
SelectedValuePath="{Binding ElementName=dataGrid1,Path=SelectedItem.Type,Mode=OneWay}"
Grid.Column="1" Height="32" HorizontalAlignment="Left" Name="comboBox1" >
<ComboBoxItem Content="Warning"/>
<ComboBoxItem Content="Error"/>
<ComboBoxItem Content="Exception"/>
</ComboBox> 
```

数据网格的 XAML

```
<DataGrid AutoGenerateColumns="False" 
IsSynchronizedWithCurrentItem="True" ItemsSource="{Binding}" Name="dataGrid1"> 
```

是否可以通过 XAML 跳过代码来实现这一点？如果不是其他建议，也是最受欢迎的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T21:12:10.873

这是一个可能对您有所帮助的代码示例。它显示了一个集合视图源，带有一个过滤器......

**XAML**

```
 <Window x:Class="Ejemplos_EnlaceADatos.Figura5_12"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:cmod="clr-namespace:System.ComponentModel;assembly=WindowsBase"
    xmlns:cine="clr-namespace:Ejemplos_EnlaceADatos.Cine"
    Title="Lista de Films" Height="200" Width="300"
>
  <Window.Resources>
    <CollectionViewSource x:Key="films" Source="{x:Static cine:Filmes.Films}" Filter="Filter_Film">
      <CollectionViewSource.SortDescriptions>
        <cmod:SortDescription PropertyName="Título"/>
      </CollectionViewSource.SortDescriptions>
    </CollectionViewSource>
  </Window.Resources>
  <ScrollViewer>
    <StackPanel TextBlock.FontFamily="Segoe UI" Margin="6">
      <TextBlock FontSize="16" FontWeight="Bold" Foreground="Navy">
        Films:
      </TextBlock>
      <ItemsControl ItemsSource="{Binding Source={StaticResource films}}"/>
    </StackPanel>
  </ScrollViewer>
</Window> 
```

**代码背后**

```
using System.Windows;
using System.Windows.Data;
using Ejemplos_EnlaceADatos.Cine;

namespace Ejemplos_EnlaceADatos {
  public partial class Figura5_12 : Window {

    public Figura5_12() {
      InitializeComponent();
    }
    void Filter_Film(object sender, FilterEventArgs e) {
      e.Accepted = (e.Item is Film) && (((Film)e.Item).Género == Género.Mafia);
    }
  }
} 
```

并像这样过滤：

**前**

![在此处输入图像描述](../Images/05f858d400d44f1e82e9e5819e2ab211.png)

**后**

![在此处输入图像描述](../Images/e5f2f988acd13f7dab88c2602be1e2b1.png)

这只是过滤的一个例子，但它是否带有常规项目控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:46:54.527

您可以使用 DataGrid 的过滤器，
请参阅此处了解更多详细信息：http: [//msdn.microsoft.com/en-us/library/ff407126.aspx](http://msdn.microsoft.com/en-us/library/ff407126.aspx)

# node.js - 在翡翠中，无法使样式@font-face 起作用

> ID：15569447
> 
> 赞同：1
> 
> 时间：2013-03-22T11:39:56.860
> 
> 标签：node.js, font-face, pug, stylus

从一个工作的 css 文件（由 font-squirrel 生成）：

```
@字体脸{
  字体系列：'SnowTopCaps'；
  src: url('/fonts/snowtopcaps-webfont.eot');
  src: url('/fonts/snowtopcaps-webfont.eot?#iefix') 格式('embedded-opentype'),
    url('/fonts/snowtopcaps-webfont.woff') 格式('woff'),
    url('/fonts/snowtopcaps-webfont.ttf') 格式('truetype'),
    url('/fonts/snowtopcaps-webfont.svg#snowtopcaps') 格式('svg');
  字体粗细：正常；
  字体样式：正常；
}     

```

试图在文档中的`style`部分声明：`jade`

```
...
风格
  @字体脸
    字体系列
      | 雪顶帽
    源代码
      | url('/fonts/snowtopcaps-webfont.woff') 格式('woff')
    字体粗细
      | 普通的
    字体样式
      | 普通的
    ...

```

但是没有任何`style`声明被写入生成的`html`？

有人看到这里缺少什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:47:09.693

此语法适用于 HTML，而不适用于 css。采用

```
style.
  @font-face {
    font-family: 'SnowTopCaps'; 
    src: url('/fonts/snowtopcaps-webfont.eot'); 
    src: url('/fonts/snowtopcaps-webfont.eot?#iefix') format('embedded-opentype'),
      url('/fonts/snowtopcaps-webfont.woff') format('woff'),
      url('/fonts/snowtopcaps-webfont.ttf') format('truetype'),
      url('/fonts/snowtopcaps-webfont.svg#snowtopcaps') format('svg');
    font-weight: normal;
    font-style: normal;
  } 
```

或使用 :stylus 过滤器

# iphone - iOS 上的地理围栏

> ID：15569450
> 
> 赞同：1
> 
> 时间：2013-03-22T11:40:03.430
> 
> 标签：iphone, ios, objective-c, gps, geofencing

我正在使用 GeoFencing 设置区域并在用户进入或离开该区域时执行某些任务。Bt 它对我不起作用，我正在使用 gollowing 代码

```
CLLocationCoordinate2D coord = CLLocationCoordinate2DMake(some values,some values);
    CLRegion *region = [[CLRegion alloc]initCircularRegionWithCenter:coord radius:15.0 identifier:@"SF"];
    [locationManager startMonitoringForRegion:region desiredAccuracy:kCLLocationAccuracyBest]; 
```

但是当我关闭应用程序并且应用程序正在监视并且我离开该区域或进入时，没有一个代表**didEnterRegion**和**didExitRegion被调用。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T11:45:57.833

您定义半径为 15m。那太小了。首先，尝试 50m 或更多。看看地图应用程序，如果你真的进入了那个地区。
此外，我希望您的意思是“发送到后台”，而不是关闭。
确保您已将应用程序设置为允许在后台运行？（通过 plist）

**更新：**

最后，事实证明您终止了该应用程序。那么你当然不会再得到任何位置事件了。
解决方案：不要通过双击home键然后选择白色十字来终止它，只需单击home键将其关闭，然后它就有机会在后台运行。

**Update2：** 即使应用程序被终止，ios 也会在它注册到位置监控服务时重新启动它：来自[CllLocationManager 类参考](https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html)

> 如果您启动此服务并且您的应用程序随后终止，如果有新事件到达，系统会自动将应用程序重新启动到后台......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T11:48:38.737

在头文件中添加 CLLocationManagerDelegate。确保你添加了

```
locationManager.delegate = self; 
```

尝试增加半径并检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-13T19:29:07.053

首先增加您为该特定位置提供的半径并再次检查它是否不起作用，然后按照本[教程](http://www.raywenderlich.com/95014/geofencing-ios-swift)中提供的一些简单步骤，您可以轻松地在您的应用程序中实现地理围栏。

参考：[Apple 文档](https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/LocationAwarenessPG/RegionMonitoring/RegionMonitoring.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-23T08:39:14.560

您定义半径为 15m。那太小了。首先，尝试 50m 或更多。看看地图应用程序，如果你真的进入了那个地区。此外，我希望您的意思是“发送到后台”，而不是关闭。确保您已将应用程序设置为允许在后台运行？（通过 plist）

# jquery - Jquery 哈希更改 url 滑块

> ID：15569452
> 
> 赞同：0
> 
> 时间：2013-03-22T11:40:05.423
> 
> 标签：jquery, url, hash, slider

当我单击滑块时，我使用以下代码更改了 url 哈希值，但是我现在想知道当用户自己在 url 中更改幻灯片编号时，幻灯片是否会根据输入的哈希值更改，与我已经拥有的相反，非常感谢任何帮助，谢谢。

```
var hash = $(".active").data("id");
location.hash = hash; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:48:22.307

您正在寻找的是[onhashchange](https://developer.mozilla.org/en-US/docs/DOM/window.onhashchange) -事件。

并非[所有浏览器版本都](http://caniuse.com/hashchange)支持它，但您可以使用 polyfill（有很多可用于 jQuery），或者您可以像这样进行简单的特征检测

```
if ("onhashchange" in window) {
    $(window).bind( 'hashchange', function(e) { })
} 
```

# python - Python 错误：需要多个值才能解压

> ID：15569453
> 
> 赞同：2
> 
> 时间：2013-03-22T11:40:06.937
> 
> 标签：python

好的，所以我正在学习Python。但是为了我的学习，我已经做了相当复杂的事情。我正在尝试运行一个脚本来分析 excel 文件中的数据。这是它的外观：

```
#!/usr/bin/python
import sys

#lots of functions, not relevant

resultsdir = /home/blah

filename1=sys.argv[1]
filename2=sys.argv[2]
out = open(sys.argv[3],"w")

#filename1,filename2="CNVB_reads.403476","CNVB_reads.403447"

file1=open(resultsdir+"/"+filename1+".csv")
file2=open(resultsdir+"/"+filename2+".csv")

for line in file1:
    start.p,end.p,type,nexons,start,end,cnvlength,chromosome,id,BF,rest=line.split("\t",10)
    CNVs1[chr].append([int(start),int(end),float(BF)])

for line in file2:
    start.p,end.p,type,nexons,start,end,cnvlength,chromosome,id,BF,rest=line.split("\t",10)
    CNVs2[chr].append([int(start),int(end),float(BF)]) 
```

这些是excel文件中数据列的标题，我想拆分它们，我什至不确定在使用excel文件中的数据时是否有必要。

```
#more irrelevant stuff

out.write(filename1+","+filename2+","+str(chromosome)+","+str(type)+","+str(shared)+"\n") 
```

这就是它应该写在我的输出中的内容，“共享”是我计算出来的，其余的已经在文件中了。

好的，现在我的问题，最后，当我这样调用脚本时：
python script.py CNVB_reads.403476 CNVB_reads.403447 script.csv in my shell

我收到以下错误消息：

```
start.p,end.p,type,nexons,start,end,cnvlength,chromosome,id,BF,rest=line.split("\t",10)
ValueError: need more than 1 value to unpack 
```

我不知道与数据相关的含义是什么......有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T11:42:06.173

该`line.split('\t', 10)`调用未返回 11 个元素。也许它是空的？

您可能希望使用该[`csv`模块](http://docs.python.org/2/library/csv.html)来解析这些文件。

```
import csv
import os

for filename, target in ((filename1, CNVs1), (filename2, CNVs2)):
    with open(os.path.join(resultsdir, filename + ".csv"), 'rb') as csvfile:
        reader = csv.reader(csvfile, delimiter='\t')
        for row in reader:
            start.p, end.p = row[:2]
            BF = float(row[8])
            target[chr].append([int(start), int(end), BF]) 
```

# sql - 比较具有大量数据的两组以找到相同的值

> ID：15569454
> 
> 赞同：0
> 
> 时间：2013-03-22T11:40:08.120
> 
> 标签：sql, database, algorithm, graph, set

好的，问题看起来像这样。我有一组`n`空列的数据库行`position`。我需要使用该组（来自 3 个单独的列）中的地址数据（不同的组合等 - 没关系）将它们与另一组`m`元素（也来自数据库，其中包含地址数据和所需的**位置**）进行比较。

因为这些集合非常大（大约百万条记录，并且该操作经常执行），所以我需要一些非常快速的算法来比较这两个集合并找到我需要的数据。

我试图找到一些东西，但我不知道它是否是任何众所周知的数学问题（也许在图论中？）。

**[编辑]**

这些结构太大，无法在此处描述。但我会为此做一个例子。

**设置 1。**

```
|[ID] | [CITY] | [STREET] | [POSTCODE] | [LOCATION] |
|-----|--------|----------|------------|------------|
| 1   | City1  | Street1  | 00000      | NULL       |
| 2   | City2  | Street2  | 11111      | NULL       |
| 3   | City3  | Street3  | 22222      | NULL       | 
```

**设置 2。**

```
|[ID] | [SOME_KIND_OF_ADDRESS]              | [LOCATION] |
|-----|-------------------------------------|------------|
| 1   | Street 1 in City 1, 00000 blah blah | SOME_XY1   |
| 2   | Street 2 in City 1, 00001 blah blah | SOME_XY2   |
| 3   | Street 2 in City 2, 11111 blah blah | SOME_XY3   |
| 4   | Street 1 in City 4, 33333 blah blah | SOME_XY4   | 
```

现在对于 中的每个元素`Set 1`，我想尝试在`Set 2`. 仅在这种情况下`City2, Street2`将`City1, Street1`被匹配。所以结果将如下所示：

```
|[ID] | [CITY] | [STREET] | [POSTCODE] | [LOCATION] |
|-----|--------|----------|------------|------------|
| 1   | City1  | Street1  | 00000      | SOME_XY1   |
| 2   | City2  | Street2  | 11111      | SOME_XY3   | 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:52:59.940

执行此操作的正确方法是解析集合 2 中的地址，然后在每个字段上创建索引。那么你的比较会非常快。

没有这个，你有什么选择？好吧，您基本上必须扫描第 2 组中的所有地址以进行比较。一些 SQL 引擎优化了字符串开头的比较（使用索引），因此一个比较可以使用索引。如果您有提取街道/城市/邮政编码的功能，那么某些数据库可以支持“功能”索引，其中元素是函数调用的结果。

另一种选择是全文搜索。这将允许您使用称为倒排索引的结构搜索组件。

但是，我的建议是修复地址并提取您想要比较的部分。地址整改/标准化，虽然既不便宜也不快，但通常通过大大简化诸如此类的请求在中期内收回成本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:03:00.097

我会使用以下算法：

1.  排序表 A，B
2.  在表的开头创建 2 个指针 (ptrA, ptrB)
3.  While (ptrA 未结束且 ptrB 未结束)

{

```
if (ptrA->value=ptrB->value) update column position
if (ptrA->value>ptrB->value) move prtB forward
else move ptrA forward 
```

}

# hibernate - 无法迭代列表包含 sruts 2 操作中的 Hibernate 查询结果？

> ID：15569456
> 
> 赞同：0
> 
> 时间：2013-03-22T11:40:18.370
> 
> 标签：hibernate, jpa-2.0

我无法从 HQL 迭代结果列表。我正在使用 foreach 循环。但是循环没有在我的名为 getCompanyies() 的 struts 操作方法中执行。我正在控制台中获取列表的大小，但跳过 for 循环可能是因为我没有在控制台中收到“inside for”消息。我收到 java.lang.IllegalStateException 异常

我的行动代码是：-

```
public String getCompanies(){
    try{
    session.beginTransaction();
    System.out.println("inside get companies");
    List<Company> companies= session.createQuery("select companyID,companyName from Company").list();
    System.out.println(companies.size());
    for(Company obj : companies) {
        System.out.println("inside for");
        System.out.println(obj.getCompanyID());
    }
    }catch(HibernateException e){
        e.printStackTrace();
    }
    session.close();
    return SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:48:44.733

这是因为公司`List`中的对象不是类型`Company`（您可能在分配列表时收到警告），因为您在`HQL`查询中选择了 companyID,companyName。

可以快速帮助您摆脱困境的方法就是重写您的查询：

```
List<Company> companies= session.createQuery("from Company").list(); 
```

因为您的第一个查询将返回一个包含您请求的两个属性的对象数组。（您将获得 a`List<Object[]>`并且必须从此数组中获取值），因此您的代码如下所示：

```
List<Object[]> companies= session.createQuery("select companyID,companyName from Company").list(); 
```

而且您必须在结果列表的每个数组上获取值。

# javascript - Sencha Touch TPL 和 ITEM

> ID：15569458
> 
> 赞同：1
> 
> 时间：2013-03-22T11:40:28.433
> 
> 标签：javascript, sencha-touch, sencha-touch-2

伙计们让我解释一下我的问题，我有一个从商店文件加载一些元素的列表视图，当我单击一个列表项时，我有一个控制器在新的详细信息视图中推送数据

```
'placesContainer places list':{
             itemtap: function(list,index,target,record) {
                 console.log("item "+record.get('name')+" pigiato");
                 var detailsView = Ext.create('MyApp.view.Details');
                 this.getPlacesContainer().push(detailsView);
                 detailsView.setData(record.data);

             }
         } 
```

好的。现在我想要的是在我的新细节视图中从存储文件中加载相同的信息。这是我的详细视图：

```
Ext.define('MyApp.view.Details',{
extend:'Ext.Panel',
xtype:'details',
config:{
    layout:'vbox',
    scrollable:true,
    styleHtmlContent:true,
    styleHtmlCls:'details',
    tpl:'<h1>{name}</h1>' +
        '<p><span>Lunghezza:</span> {lunghezza} <span>Difficoltà:</span> {difficulty}</p>' +
        '<h2>{prova}</h2>',
    items: [
        {
            xtype: 'panel',
            flex:1,
            store:'Places',
        },
        {
            xtype: 'carousel',
            flex:2,
            items: [
                {style: "background-color: #7BB300"},
                {style: "background-color: #555555"},
                {style: "background-color: #00ff2a"},
                {style: "background-color: #00bb1f"},
                {style: "background-color: #008616"},
                {style: "background-color: #00490c"}
            ]
        }
    ]
} 
```

如果我将 tpl 元素写在项目之外，我可以在我的详细信息视图中读取数据。当我尝试将 tpl 元素放入项目中时，所有数据都消失了..怎么了？？？我试过这种方法，但没有结果......

```
items: [
        {
            xtype: 'panel',
            flex:1,
            store:'Places',
            tpl:'<h1>{name}</h1>' +
                '<p><span>Lunghezza:</span> {lunghezza} <span>Difficoltà:</span> {difficulty}</p>' +
                '<h2>{prova}</h2>',
        },
items: [
        {
            xtype: 'panel',
            flex:1,
            store:'Places',
            itemTpl:'<h1>{name}</h1>' +
                '<p><span>Lunghezza:</span> {lunghezza} <span>Difficoltà:</span> {difficulty}</p>' +
                '<h2>{prova}</h2>',

        }, 
```

帮助会很棒！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T13:29:46.690

`itemtap`你需要对你的功能做出一些改变

```
 'placesContainer places list':{
         itemtap: function(list,index,target,record) {
             console.log("item "+record.get('name')+" pigiato");
             var detailsView = Ext.create('MyApp.view.Details');
             this.getPlacesContainer().push(detailsView);
             detailsView.setData(record.data); // will set data to detailsview 

             detailsView.getAt(0).setData(record.data); // will set data to first component in items array

             detailsView.getAt(1).setData(record.data); // will set data to second component in items array

              .... and so ....

         }
     } 
```

# php - Twig For Loop - 问题

> ID：15569463
> 
> 赞同：0
> 
> 时间：2013-03-22T11:40:43.597
> 
> 标签：php, arrays, for-loop, twig

我需要执行以下操作：

```
<li id="a"><a name="a" class="title">A</a>
   <ul>
      <li><a href="#">Adam<span>UserID</span></a></li>
   </ul>
</li> 
```

我有一个包含用户名的数组，需要像上面那样对它们进行排序。大**A** _

```
<li id="a"><a name="a" class="title">A</a> 
```

是用户名的第一个字符。因此，如果我有一个名为“TechnoMan”的用户，那么它必须是这样的：

```
<li id="t"><a name="t" class="title">T</a> 
```

当然，“**亚当**”应该替换为用户名

目前数组看起来像这样：

```
Array
(
    [T] => Array
        (
            [1] => TechnoMan
        )
    [W] => Array
        (
            [18] => Wulf
            [23] => WantYou
        )

) 
```

**T**是 Usernames 的第一个字符，[1] 是 Userid，TechnoMan 是本例中的用户名。

我怎样才能用 twig 和他们的 for 获得这些列表？

我完全一无所知。如果需要，我也可以对数组进行更改，我只是认为无法找出 twig 中用户名的第一个字符，所以我已经在 PHP 中对它们进行了排序。

感谢您的回复。

迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:11:20.617

PHP：

```
$array = array();
$array['T'] = array(1 => 'TechnoMan');
$array['W'] = array(18 => 'Wulf', 23 => 'WantYou'); 
```

树枝：

```
{% for key, users in array %}
    <li id="{{ key }}"><a name="{{ key }}" class="title">{{ key }}</a>
    <ul>
        {% for key2, user in users %}
        <li><a href="#">{{ user }}<span>{{ key2 }}</span></a></li>
        {% endfor %}
    </ul>
    </li>
{% endfor %} 
```

这输出：

```
<li id="T"><a name="T" class="title">T</a>
    <ul>
        <li><a href="#">TechnoMan<span>1</span></a></li>
    </ul>
</li>
<li id="W"><a name="W" class="title">W</a>
    <ul>
        <li><a href="#">Wulf<span>18</span></a></li>
        <li><a href="#">WantYou<span>23</span></a></li>
    </ul>
</li> 
```

# node.js - 如何在 Connect 中间件中使用异步初始化？

> ID：15569464
> 
> 赞同：7
> 
> 时间：2013-03-22T11:40:44.777
> 
> 标签：node.js, express, connect

我为 Connect 和 Express 编写了一个中间件，它的设置方法需要一些繁重的工作。由于初始化任务的性质，这些东西是异步的，所以我遇到的问题是只有在初始化运行后才能访问中间件。

目前我已经使用回调解决了它：

```
function setupMiddleware(callback) {
  doSomeAsyncInitialization(function () {
    callback(function (req, res, next) {
      // The actual middleware goes here ...
    });
  });
} 
```

这行得通，但对调用者来说并不好。而不是能够做到

```
app.use(setupMiddleware()); 
```

我要做：

```
setupMiddleware(functin (middleware) {
  app.use(middleware);
}); 
```

现在我在想是否有更好的方法，例如让中间件在后台初始化并延迟所有传入的请求，直到中间件准备好。

我怎么能解决这个问题？我应该在这里使用的任何想法或最佳实践？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:04:31.397

我现在使用`isInitialized`变量解决了它并延迟了中间件函数本身。请参见以下示例：

```
var connect = require('connect');

var setup = function () {
  var isInitialized = false;

  setTimeout(function () {
    isInitialized = true;
  }, 10000);

  function run (req, res, next) {
    res.write('Foo');
    res.end();
  }

  function delay (req, res, next) {
    if (isInitialized) {
      return run(req, res, next);
    }

    setTimeout(function () {
      delay(req, res, next);
    }, 1000);
  }

  return function (req, res, next) {
    if (req.url === '/foo') {
      delay(req, res, next);
      return;
    }
    next();
  }
};

var app = connect();
app.use(setup());
app.use(function (req, res) {
  res.write('Fertig!');
  res.end();
});

var http = require('http');

http.createServer(app).listen(5000); 
```

请注意，此代码并未以任何方式进行优化或重构，它只是证明该想法本身有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:18:35.410

为什么你不这样做，如下所示，

```
doSomeAsyncInitialization(function () {
   //After doing all long running init process just configure your express as follows.
   app.use(<middlewares>);
   app.listen(<portnumder>);

}); 
```

# jquery - jQuery - scrollTop 没有按预期工作

> ID：15569468
> 
> 赞同：0
> 
> 时间：2013-03-22T11:40:51.090
> 
> 标签：jquery, scrolltop

**代码：**

```
if(jQuery("#content h1.title").length > 0){
    jQuery('html, body').animate({
        scrollTop: jQuery("#content h1.title:first").offset().top - jQuery("#sticky").outerHeight()
    }, 2000);
} 
```

**问题：** 如果我已经在页面上然后点击刷新按钮，上面的代码可以正常工作。否则，如果我在浏览器中手动打开页面，上面的代码将滚动到 H1 下方。Div #sticky 位置固定，高度为 60px。为什么会发生这种情况以及如何解决？

我尝试将上面的代码放入 $(window).load() 中，结果是一样的。offset().top 在刷新时返回不同的值，即使它位于 $(window).load() 内。

# database-design - 方面/类型之间的关联

> ID：15569472
> 
> 赞同：1
> 
> 时间：2013-03-22T11:41:07.870
> 
> 标签：database-design, associations, alfresco, database-schema

根据我[之前的问题](https://stackoverflow.com/questions/15567171/create-an-aspect-in-alfresco-content-model)，我想指定其中的一部分，我坚信可以很好地指导解决我的问题，因为整个[问题](https://stackoverflow.com/questions/15567171/create-an-aspect-in-alfresco-content-model)的答案可能由许多部分组成。

当我在 Alfresco 内容模型的“方面”（或类型）中定义“关联”时，实际上“目标类”是什么？会不会是另一个方面？当我想将两个方面关联为常规数据库中的两个表时，如何做到这一点？如何定义第二个方面的属性？有人可以提供一个关联两个方面的例子吗？如果协会的目的不是满足我的上述要求，那么它实际上是为了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:30:17.733

当你定义一个关联时，它的目标应该是一个节点类型。所以 node1 以某种方式与 node2 相关联。该节点是一个有效节点（方面只是该节点2上的一组属性/关联）。

Aspect 不是节点类型，它只是一些属性。您可以向类型添加方面，甚至可以在类型定义中定义强制方面。但我认为你想将节点关联到节点。

现在，您想定义一个方面，它将是另一个数据库中的表？如在，不是Alfresco？我相信这里的正确用例应该是这些表获得专用类型，而不是方面。

查看您可以从[此处](http://wiki.alfresco.com/wiki/UML_Class_Diagrams#Content_Model)阅读的内容并就此提出更多问题。

同时，如果您澄清一下您到底想做什么，这将有所帮助？

# php - 回复发送到页面的消息

> ID：15569475
> 
> 赞同：0
> 
> 时间：2013-03-22T11:41:36.597
> 
> 标签：php, facebook, facebook-graph-api, facebook-opengraph

你知道如何回复发送到页面的消息吗？

您可以通过发出`HTTP POST to /CONVERSATION_ID/messages`带有以下参数的 an 来回复用户的消息。

对话`ID`看起来像`t_id.216477638451347`

我正在发送`GET`accesstoken，我替换`CONVERSATION_ID`为`Thread ID`，并且我正在发送`POST`一个名为`message`

但是它不发布，是否有扩展权限？我只有`read_page_inbox`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T12:54:59.490

对不起，我回复错账号了！！

代码是这样的：

```
<?php
include("config.php");
post("Test",$at);
$id = "550773858289457";
    $url = "https://graph.facebook.com/$id/messages?access_token=$at";
    $ch = curl_init();
    $attachment =  array('message'   => 'description here'
                    );

    curl_setopt($ch, CURLOPT_URL,$url);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $attachment);
    $result= curl_exec($ch);

    curl_close ($ch);
?> 
```

它回复：

```
{"id":"302300649895651_312334605558922"}{"error":{"message":"Unsupported post request.","type":"GraphMethodException","code":100}} 
```

谢谢！

# iphone - UIBarButtonItem 具有单独的纵向和横向图像 - 从 UINavigationController 弹出视图控制器时未调用 layoutSubviews

> ID：15569478
> 
> 赞同：3
> 
> 时间：2013-03-22T11:41:44.857
> 
> 标签：iphone, objective-c, uinavigationcontroller, uibarbuttonitem, uitoolbar

我想在 UINavigationController 的 UIToolbar 中显示完全自定义的按钮，**并支持纵向和横向**。目前，我已经实现了一个 RotatingButton（一个 UIView 子类）类，它包含一个填充整个 RotatingButton 框架的 UIButton。RotatingButton 还包含两个图像，用于纵向和横向，并且这些图像的高度不同。然后这个 RotatingButton 被包装到 UIBarButtonItem 作为自定义视图。

目前，在 RotatingButton 的 layoutSubviews 中，我正在设置整个视图的边界，并将按钮设置为当前方向的适当图像。这很好用，可以根据需要处理旋转。

```
- (void) createLayout {
    [self addButtonIfNeeded];
    UIDeviceOrientation currentOrientation = [[UIDevice currentDevice] orientation];
    if(UIInterfaceOrientationIsLandscape(currentOrientation)) {
        [self.button setImage:self.landscapeImage forState:UIControlStateNormal];
        self.button.frame = CGRectMake(0.0, 0.0, self.landscapeImage.size.width / 2, self.landscapeImage.size.height / 2);
        self.bounds = CGRectMake(0.0, 0.0, self.landscapeImage.size.width / 2, self.landscapeImage.size.height / 2);
    } else {
        [self.button setImage:self.portraitImage forState:UIControlStateNormal];
        self.button.frame = CGRectMake(0.0, 0.0, self.portraitImage.size.width / 2, self.portraitImage.size.height / 2);
        self.bounds = CGRectMake(0.0, 0.0, self.portraitImage.size.width / 2, self.portraitImage.size.height / 2);
    }
}

- (void) layoutSubviews {
    [super layoutSubviews];
    [self createLayout];
} 
```

但是，这个问题仍然存在：

1.  纵向开始视图
2.  将视图控制器推入堆栈
3.  将设备旋转到横向（当前视图做出适当反应）
4.  弹出最后一个视图控制器：前一个视图反应良好，但 RotatingButtons 的 layoutSubviews 没有被调用，**并且按钮保持大于它们应该的大小**。

因此，当前在弹出视图控制器后，之前的 UIBarButtonItems 没有调用其 layoutSubviews，并且它们仍然太大（或者太小，如果我们从横向开始并在另一个视图中旋转到纵向）。如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:04:06.747

这是一个非常棘手的问题。每当视图即将出现时，您应该尝试覆盖`viewWillAppear:`调用以强制更新布局。`[self.view setNeedsLayout]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T22:34:47.177

我没有找到完全令人满意的解决方案，但我的按钮恰好大小合适，这种解决方案对我来说效果很好：

```
UIBarButtonItem* b = [[UIBarButtonItem alloc] initWithTitle:@"" style:UIBarButtonItemStylePlain target:target action:selector];
UIImage *barButton = [portraitImage resizableImageWithCapInsets:UIEdgeInsetsMake(10, 10, 10, 10)];
UIImage *barButton_land = [landscapeImage resizableImageWithCapInsets:UIEdgeInsetsMake(10, 10, 10, 10)];
[b setBackgroundImage:barButton forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
[b setBackgroundImage:barButton_land forState:UIControlStateNormal barMetrics:UIBarMetricsLandscapePhone]; 
```

然后显然将创建的按钮添加为 rightBarButtonItem/leftBarButtonItem，或者您可能想要使用它。

这样做的问题是，如果您的按钮不够宽，按钮可能看起来完全错误（因为在此解决方案中图像的中间内容是平铺的）。

# jsf-2 - 如何禁用 addAll 和 removeALL 按钮 4.1

> ID：15569482
> 
> 赞同：2
> 
> 时间：2013-03-22T11:41:51.923
> 
> 标签：jsf-2, richfaces

我希望 removeAll 和 addAll 需要禁用。我试过了

```
'
 .rich-picklist-control-removeall 
 {
 display:none;
 }
' 
```

以上不工作

' `removeAllvisible="false"'`--- 4.1 中没有这样的属性

请建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:13:22.127

```
.rf-pick-add-all,
.rf-pick-rem-all {
   display: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-15T16:37:49.330

这对我有用

```
.ui-picklist button[icon="fa-angle-double-left"] {
  display: none !important;
}

.ui-picklist button[icon="fa-angle-double-right"] {
  display: none !important;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-11-04T18:23:13.250

'.rf-pick-add-all, .rf-pick-rem-all { 显示：无！重要；}`

# android - 如何以编程方式锁定 Android 文件夹？

> ID：15569484
> 
> 赞同：0
> 
> 时间：2013-03-22T11:41:58.693
> 
> 标签：android, locking, directory

我正在制作一个 Android 应用程序，我想阻止用户打开某个文件夹。在该文件夹中，用户可以存储图像或视频文件。如果我可以用密码保护该文件夹，那就太好了。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T11:53:36.427

这是用于加密和解密 Sdcard 文件夹中文件的两个功能。我们不能锁定文件夹，但我们可以在 Android 中使用 AES 加密文件，它可能会对您有所帮助。

```
static void encrypt() throws IOException, NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException {
    // Here you read the cleartext.
    FileInputStream fis = new FileInputStream("data/cleartext");
    // This stream write the encrypted text. This stream will be wrapped by another stream.
    FileOutputStream fos = new FileOutputStream("data/encrypted");

    // Length is 16 byte
    SecretKeySpec sks = new SecretKeySpec("MyDifficultPassw".getBytes(), "AES");
    // Create cipher
    Cipher cipher = Cipher.getInstance("AES");
    cipher.init(Cipher.ENCRYPT_MODE, sks);
    // Wrap the output stream
    CipherOutputStream cos = new CipherOutputStream(fos, cipher);
    // Write bytes
    int b;
    byte[] d = new byte[8];
    while((b = fis.read(d)) != -1) {
        cos.write(d, 0, b);
    }
    // Flush and close streams.
    cos.flush();
    cos.close();
    fis.close();
}

static void decrypt() throws IOException, NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException {
    FileInputStream fis = new FileInputStream("data/encrypted");

    FileOutputStream fos = new FileOutputStream("data/decrypted");
    SecretKeySpec sks = new SecretKeySpec("MyDifficultPassw".getBytes(), "AES");
    Cipher cipher = Cipher.getInstance("AES");
    cipher.init(Cipher.DECRYPT_MODE, sks);
    CipherInputStream cis = new CipherInputStream(fis, cipher);
    int b;
    byte[] d = new byte[8];
    while((b = cis.read(d)) != -1) {
        fos.write(d, 0, b);
    }
    fos.flush();
    fos.close();
    cis.close();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T11:45:07.660

您应该将此信息保存在内部存储中。通常其他应用程序无法访问这些文件。从质量上看：

> 您可以将文件直接保存在设备的内部存储中。默认情况下，保存到内部存储的文件对您的应用程序是私有的，其他应用程序无法访问它们（用户也不能）。当用户卸载您的应用程序时，这些文件将被删除。

查看链接：http: [//developer.android.com/guide/topics/data/data-storage.html#filesInternal](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T11:47:19.127

Insted of LOCK 我会用`.`类似文件夹名的文件夹->`.test`

用户看不到这里的文件夹是代码

```
File direct = new File(Environment.getExternalStorageDirectory() + "/.test");

   if(!direct.exists())
    {
        if(direct.mkdir()) 
          {
           //directory is created;
          }

    } 
```

上面的代码是创建名为“.test”的文件夹（在 SD 卡中），然后将您的数据（文件、视频.. 任何）保存在此文件夹中，用户无法访问它。

**如果您在内部存储中创建文件夹，那么如果用户清除您的应用程序的数据，那么该文件夹可能`EMPTY`！**

# php - 根据用户登录从 Mysql 数据库中获取特定数据

> ID：15569492
> 
> 赞同：2
> 
> 时间：2013-03-22T11:42:45.863
> 
> 标签：php, javascript, jquery, html, mysql

所以我有一个简单的工作用户登录脚本，可以携带 myusername 和 mypassword。

我正在尝试（但失败）做的是从该用户的 Mysql 数据库中调用一条特定的信息来修改他们所在的页面。

```
MYSQL DATABASE ('members'): 
id:1
username:cornellmatt
password:encrypted(md5)
email:example@email.com
active: 0/1
**permission:1** 
```

我需要提取的字段是权限，因为它包含与用户当前所在的场景相关的数字。为了做到这一点，我在您登录后到达的页面上运行 Jquery，该页面链接到 connect.php

```
<script type="text/javascript" src="jquery-1.9.1.min.js"></script> 
<script type="text/javascript">

    $.get("connect.php", function(data) {
    alert("Data Loaded: " + data);
        }); 
```

我知道我的 JavaScript 目前存在各种问题，但现在我想完成服务器端的工作，以便我可以完全专注于 JavaScript 我的 Php 的（当前）问题是它没有似乎从数据库中得到任何东西，我知道它是连接的，它只是不会回显“权限”中的值；

**连接.php：**

```
<?php
include "Session.php"; 

$dbhost = "host";
$dbuser = "username";
$dbpass = "password";
$dbname = "databasename";
    //Connect to MySQL Server
mysql_connect($dbhost, $dbuser, $dbpass);
    //Select Database
mysql_select_db($dbname) or die(mysql_error());
    // Retrieve data from Query String

//this selects everything for the current user, ready to be used in the script below

$result = mysql_query("SELECT * FROM members WHERE username = '$myusername' LIMIT 1");

//this function will take the above query and create an array
while($row = mysql_fetch_array($result))
  {

 //with the array created above, I can create variables (left) with the outputted array (right)
$permission = $row['permission'];
  } 

        echo '<u><b>Permision ID:</b></u> - - No:' . $row['permission']  ;
?> 
```

如果您想知道“Session.php”是什么，它是一个处理启动的脚本，也是我知道我仍然登录的原因。感谢在上一篇文章中帮助我的 Daryl Gill。

**会话.php**

```
 <?php
session_start();

if (!isset($_SESSION['Username']))
{
 include "Logout.php"; 
 exit;
// session is not set, so enforce logout
}
?> 
```

所以我的任务是，为什么即使我直接进入页面，connect.php 也不回显值权限？请帮忙，我目前正在为我的学生项目编写代码，并且已经转了好几天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:46:45.663

当`$_SESSION['Username']`未设置时，您已推杆`exit;`

正因为如此，它不会打印`permission`

当你`Ajax`打电话时，可能会`$_SESSION['Username']`设置并打印`permission`。

也改变

```
echo '<u><b>Permision ID:</b></u> - - No:' . $row['permission']  ; 
```

到

```
echo '<u><b>Permision ID:</b></u> - - No:' . $permission; 
```

因为在while循环之外你不能访问$row['permission']。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T11:47:50.580

`$row['permission']`这里不存在。您只需`$permission.`

`echo '<u><b>Permision ID:</b></u> - - No:' . $permission;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T11:47:20.353

确保通过执行以下操作获得任何行：

> while($row = mysql_fetch_array($result)) { var_dump($row); $permission = $row['permission']; }

# mysql - 需要 crc32 整数列并 substr 结果

> ID：15569494
> 
> 赞同：1
> 
> 时间：2013-03-22T11:42:54.610
> 
> 标签：mysql

我需要获取 column 的整数值`id`，在其上使用`crc32()`，然后`substr`是前 2 个字符。

这就是我的想法：

`SELECT SUBSTR(CRC32(id),0,2) FROM table LIMIT 10;`

问题是，以下为每一行返回一个空值，这让我相信它`substr()`没有做它的工作。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:49:46.710

```
SELECT SUBSTR(CRC32(id),1,2) FROM table LIMIT 10; 
```

享受！

# c# - 网络服务 ASP.NET C#

> ID：15569496
> 
> 赞同：0
> 
> 时间：2013-03-22T11:43:02.127
> 
> 标签：c#, asp.net, web-services

我在 WebService 中创建了一个 WebMethod，它使用存储过程来查找您要搜索的任何内容。

```
[WebMethod]
public DataSet getMyData(string search)
{
    using (SqlConnection conn = new SqlConnection(@"Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\Database1.mdf;Integrated Security=True;User Instance=True"))
    {
        conn.Open();
        SqlCommand cmd = new SqlCommand("searchingads", conn);
        SqlDataAdapter da;
        DataSet ds = new DataSet();
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Parameters.AddWithValue("@search", search);
        da = new SqlDataAdapter(cmd);
        da.Fill(ds, "MyData");

        conn.Close();

        conn.Close();
        return ds;
    } 
```

我不知道如何从 ASP.NET 应用程序调用此方法。我有一个按钮，单击该按钮时需要调用此方法并填充 GridView。

我的 ASP.NET Web 应用程序中有以下代码（单击按钮）：

```
WebService1 service = new WebService1();

GridView2.DataSource = service.getMyData(TextBox1.Text);
GridView2.DataBind();

Label1.Text = service.HelloWorld(); 
```

单击按钮时标签切换到“hello world”，但是当我进行搜索时它没有给我任何表格。

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:53:33.560

请使用这个

GridView2.DataSource = service.getMyData(TextBox1.Text);

代替

GridView2.DataSource = service.IskanjeOglasov(TextBox1.Text);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:38:22.943

如果您已经测试了搜索逻辑及其返回数据，那么尝试将数据表分配为数据源而不是数据集。

```
GridView2.DataSource = ((DataSet)service.getMyData(TextBox1.Text)).Tables[0];
GridView2.DataBind(); 
```

在这里，我删除了数据集的检查部分。这可能会奏效。

# powershell - 如何编写类似于 Out-String 的 cmdlet？

> ID：15569499
> 
> 赞同：0
> 
> 时间：2013-03-22T11:43:19.927
> 
> 标签：powershell

我想编写一个 PowerShell cmdlet 脚本，它的工作方式类似于`Out-String`，但具有无限的线宽，并且在行尾没有任何填充到特定宽度。

它应该具有类似于以下代码的输出，但最好没有最大行宽，并且保留实际在行输入中的任何尾随空格。

```
$x = ls;
[regex]::Replace(($x| Out-String -Width 1024), "\ +([\r\n])", '$1'); 
```

（如果`$x | Out-String -Width 1024`直接打印，可以看到行尾多余的空格。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T17:39:46.197

您可以轻松地创建一个“简洁”的实现，[`Out-String`](http://go.microsoft.com/fwlink/?LinkID=113368)例如：

```
filter ConvertTo-String { "$_" } 
```

这会将传递给过滤器的任何对象强制转换为字符串（使用 PowerShell 字符串扩展来调用[`ToString`](http://msdn.microsoft.com/en-us/library/system.object.tostring.aspx)非空对象，并更改`$null`为空字符串）。

对以下五个元素的示例输入运行过滤器，过滤器会将它们转换为相应的字符串值（整数变为`'1'`、双精度`'2.3'`、空值`''`、字符串`'four'`和哈希表`'System.Collections.Hashtable'`）：

```
1,2.3,$null,'four',@{five=6} | ConvertTo-String 
```

[`Get-ChildItem`](http://go.microsoft.com/fwlink/?LinkID=113308)在(alias ) 的输出上运行过滤器`ls`会产生类似的结果：

```
PS> Get-ChildItem

    Directory: C:\Windows\System32\WindowsPowerShell\v1.0

Mode                LastWriteTime     Length Name
----                -------------     ------ ----
d----       13 Jul 2009  11:56 PM            en-US
d----       13 Jul 2009  11:52 PM            Examples
d----       13 Jul 2009  11:52 PM            Modules
-a---       13 Jul 2009   8:14 PM     452608 powershell.exe
-a---       12 May 2012  10:28 AM        436 powershell.exe.config
...

PS> Get-ChildItem | ConvertTo-String
en-US
Examples
Modules
powershell.exe
powershell.exe.config
... 
```

当您将对象转换为字符串时，您会丢失对象最初包含的信息和功能：

*   将哈希表转换为字符串只会为您提供其类型名称。您无法访问[`Count`](http://msdn.microsoft.com/en-us/library/system.collections.hashtable.count.aspx)哈希表，也无法了解有关其元素的任何信息。
*   将文件系统对象转换为字符串为您提供了请求项的相对路径。您无法访问项目的[完整路径](http://msdn.microsoft.com/en-us/library/system.io.filesysteminfo.fullname.aspx)、获取[`LastWriteTime`](http://msdn.microsoft.com/en-us/library/system.io.filesysteminfo.lastwritetime.aspx)、确定[`Length`](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.length.aspx)文件项目的位置，甚至无法测试项目*是*文件还是目录（无需进行额外调用）。

事实上，唯一可以进行的安全转换是原始对象**是**字符串。这也是唯一一次会有“尾随空格”。

（换句话说，通常最好的做法是尽可能长时间地坚持使用对象，而不是试图模仿基于字符串的 shell 的限制 ;-)

# informatica-powercenter - 为 Informatica Cloud 创建基本连接器

> ID：15569502
> 
> 赞同：0
> 
> 时间：2013-03-22T11:43:30.183
> 
> 标签：informatica-powercenter, informatica

我从未在 Informatica 云上工作过。刚刚看到云的架构它是如何工作的。现在我必须创建一个连接器。任何人都可以提供任何链接。如何在 Informatica 中创建一个非常基本的连接器。我通过本教程[https ://community.informatica.com/docs/DOC-2662](https://community.informatica.com/docs/DOC-2662)但它提供了代码并概述了代码。我无法在其中运行`ant test`命令。它显示构建失败。当我运行 ant test 命令时，我无法弄清楚这里是堆栈跟踪

```
Buildfile: C:\Informatica\Informatic_FileIO_Connector\build.xml
[echoproperties] #Ant properties
[echoproperties] #Fri Mar 22 16:52:43 IST 2013
[echoproperties] ant.core.lib=C\:\\Ant\\apache-ant-1.9.0\\lib\\ant.jar
[echoproperties] ant.file=C\:\\Informatica\\Informatic_FileIO_Connector\\build
ml
[echoproperties] ant.file.Informatica_FileIO_Connector=C\:\\Informatica\\Infor
tic_FileIO_Connector\\build.xml
[echoproperties] ant.file.type=file
[echoproperties] ant.file.type.Informatica_FileIO_Connector=file
[echoproperties] ant.home=C\:\\Ant\\apache-ant-1.9.0
[echoproperties] ant.java.version=1.6
[echoproperties] ant.library.dir=C\:\\Ant\\apache-ant-1.9.0\\lib
[echoproperties] ant.project.default-target=package
[echoproperties] ant.project.name=Informatica_FileIO_Connector
[echoproperties] ant.version=Apache Ant(TM) version 1.9.0 compiled on March 5
13
[echoproperties] awt.toolkit=sun.awt.windows.WToolkit
[echoproperties] basedir=C\:\\Informatica\\Informatic_FileIO_Connector
[echoproperties] connector.deploy.directory=C\:\\Users\\utsav\\Dropbox\\Deploy
nt\\CloudEvangelists\\fileio
[echoproperties] connector.plugin.class=com.ritesh.informatica.connector.impl.
leio.FileIOConnectorDescriptor
[echoproperties] connector.shortname=fileio
[echoproperties] connector.version=1.0.2
[echoproperties] debuglevel=source,lines,vars
[echoproperties] dir.bin.src=C\:\\Informatica\\Informatic_FileIO_Connector\\bi
\src
[echoproperties] dir.dist=C\:\\Informatica\\Informatic_FileIO_Connector\\dist
[echoproperties] dir.lib=C\:\\Informatica\\Informatic_FileIO_Connector\\lib
[echoproperties] dir.src=C\:\\Informatica\\Informatic_FileIO_Connector\\src
[echoproperties] env.\=C\:=C\:\\Informatica\\Informatic_FileIO_Connector
[echoproperties] env.\=ExitCode=00000000
[echoproperties] env.ALLUSERSPROFILE=C\:\\ProgramData
[echoproperties] env.ANT_CMD_LINE_ARGS=\ test
[echoproperties] env.ANT_HOME=C\:\\Ant\\apache-ant-1.9.0
[echoproperties] env.APPDATA=C\:\\Users\\utsav\\AppData\\Roaming
[echoproperties] env.Adobe_JAVA_HOME=C\:\\Adobe\\Adobe LiveCycle ES3\\Java\\jd
.6.0_26
[echoproperties] env.COMPUTERNAME=UTSAV-PC
[echoproperties] env.ComSpec=C\:\\windows\\system32\\cmd.exe
[echoproperties] env.CommonProgramFiles=C\:\\Program Files\\Common Files
[echoproperties] env.CommonProgramFiles(x86)=C\:\\Program Files (x86)\\Common
les
[echoproperties] env.CommonProgramW6432=C\:\\Program Files\\Common Files
[echoproperties] env.ERROR_CODE=0
[echoproperties] env.FP_NO_HOST_CHECK=NO
[echoproperties] env.HOME=C\:\\Users\\utsav
[echoproperties] env.HOMEDRIVE=C\:
[echoproperties] env.HOMEPATH=\\Users\\utsav
[echoproperties] env.JAVA_HOME=C\:\\Program Files\\Java\\jdk1.6.0_43
[echoproperties] env.JAVA_HOME_32=C\:\\Adobe\\Adobe LiveCycle ES3\\Java\\32bit
jdk1.6.0_26
[echoproperties] env.LOCALAPPDATA=C\:\\Users\\utsav\\AppData\\Local
[echoproperties] env.LOGONSERVER=\\\\UTSAV-PC
[echoproperties] env.LenovoTestLogFile=preload.log
[echoproperties] env.LenovoTestPath=C\:\\prdv10\\
[echoproperties] env.MAVEN_HOME=C\:\\Maven\\apache-maven-3.0.5
[echoproperties] env.NUMBER_OF_PROCESSORS=4
[echoproperties] env.OS=Windows_NT
[echoproperties] env.PATHEXT=.COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;
SC
[echoproperties] env.PROCESSOR_ARCHITECTURE=AMD64
[echoproperties] env.PROCESSOR_IDENTIFIER=Intel64 Family 6 Model 42 Stepping 7
GenuineIntel
[echoproperties] env.PROCESSOR_LEVEL=6
[echoproperties] env.PROCESSOR_REVISION=2a07
[echoproperties] env.PROMPT=$P$G
[echoproperties] env.PSModulePath=C\:\\windows\\system32\\WindowsPowerShell\\v
0\\Modules\\
[echoproperties] env.PUBLIC=C\:\\Users\\Public
[echoproperties] env.Path=C\:\\Program Files\\Java\\jdk1.6.0_43\\bin;C\:\\Prog
m Files\\Common Files\\Microsoft Shared\\Windows Live;C\:\\Program Files (x86)
Common Files\\Microsoft Shared\\Windows Live;C\:\\windows\\system32;C\:\\windo
;C\:\\windows\\System32\\Wbem;C\:\\windows\\System32\\WindowsPowerShell\\v1.0\
C\:\\Program Files\\Lenovo\\Bluetooth Software\\;C\:\\Program Files\\Lenovo\\B
etooth Software\\syswow64;C\:\\Program Files (x86)\\Windows Live\\Shared;C\:\\
encv\\build\\common\\tbb\\intel64\\vc10\\;C\:\\opencv\\build\\x64\\vc10\\bin\\
\:\\Ant\\apache-ant-1.9.0\\bin;C\:\\Maven\\apache-maven-3.0.5\\bin;
[echoproperties] env.ProgramData=C\:\\ProgramData
[echoproperties] env.ProgramFiles=C\:\\Program Files
[echoproperties] env.ProgramFiles(x86)=C\:\\Program Files (x86)
[echoproperties] env.ProgramW6432=C\:\\Program Files
[echoproperties] env.SESSIONNAME=Console
[echoproperties] env.SystemDrive=C\:
[echoproperties] env.SystemRoot=C\:\\windows
[echoproperties] env.TEMP=C\:\\Users\\utsav\\AppData\\Local\\Temp
[echoproperties] env.TMP=C\:\\Users\\utsav\\AppData\\Local\\Temp
[echoproperties] env.USERDOMAIN=utsav-PC
[echoproperties] env.USERNAME=utsav
[echoproperties] env.USERPROFILE=C\:\\Users\\utsav
[echoproperties] env.WB_JRE_HOME=C\:\\Adobe\\workbench\\jre
[echoproperties] env._JAVACMD=C\:\\Program Files\\Java\\jdk1.6.0_43\\bin\\java
xe
[echoproperties] env._USE_CLASSPATH=no
[echoproperties] env.configsetroot=C\:\\windows\\ConfigSetRoot
[echoproperties] env.windir=C\:\\windows
[echoproperties] env.windows_tracing_flags=3
[echoproperties] env.windows_tracing_logfile=C\:\\BVTBin\\Tests\\installpackag
\csilogfile.log
[echoproperties] file.encoding=Cp1252
[echoproperties] file.encoding.pkg=sun.io
[echoproperties] file.separator=\\
[echoproperties] infa.junit=C\:\\Informatica\\Informatic_FileIO_Connector/INFA
Unit
[echoproperties] infaagent.directory=C\:\\Program Files (x86)\\Informatica Clo
 Secure Agent
[echoproperties] java.awt.graphicsenv=sun.awt.Win32GraphicsEnvironment
[echoproperties] java.awt.printerjob=sun.awt.windows.WPrinterJob
[echoproperties] java.class.path=C\:\\Ant\\apache-ant-1.9.0\\lib\\ant-launcher
ar;C\:\\Ant\\apache-ant-1.9.0\\lib\\ant-antlr.jar;C\:\\Ant\\apache-ant-1.9.0\\
b\\ant-apache-bcel.jar;C\:\\Ant\\apache-ant-1.9.0\\lib\\ant-apache-bsf.jar;C\:
Ant\\apache-ant-1.9.0\\lib\\ant-apache-log4j.jar;C\:\\Ant\\apache-ant-1.9.0\\l
\\ant-apache-oro.jar;C\:\\Ant\\apache-ant-1.9.0\\lib\\ant-apache-regexp.jar;C\
\Ant\\apache-ant-1.9.0\\lib\\ant-apache-resolver.jar;C\:\\Ant\\apache-ant-1.9.
\lib\\ant-apache-xalan2.jar;C\:\\Ant\\apache-ant-1.9.0\\lib\\ant-commons-loggi
.jar;C\:\\Ant\\apache-ant-1.9.0\\lib\\ant-commons-net.jar;C\:\\Ant\\apache-ant
.9.0\\lib\\ant-jai.jar;C\:\\Ant\\apache-ant-1.9.0\\lib\\ant-javamail.jar;C\:\\
t\\apache-ant-1.9.0\\lib\\ant-jdepend.jar;C\:\\Ant\\apache-ant-1.9.0\\lib\\ant
mf.jar;C\:\\Ant\\apache-ant-1.9.0\\lib\\ant-jsch.jar;C\:\\Ant\\apache-ant-1.9.
\lib\\ant-junit.jar;C\:\\Ant\\apache-ant-1.9.0\\lib\\ant-junit4.jar;C\:\\Ant\\
ache-ant-1.9.0\\lib\\ant-launcher.jar;C\:\\Ant\\apache-ant-1.9.0\\lib\\ant-net
xx.jar;C\:\\Ant\\apache-ant-1.9.0\\lib\\ant-swing.jar;C\:\\Ant\\apache-ant-1.9
\\lib\\ant-testutil.jar;C\:\\Ant\\apache-ant-1.9.0\\lib\\ant.jar;C\:\\Program
les\\Java\\jdk1.6.0_43\\lib\\tools.jar
[echoproperties] java.class.version=50.0
[echoproperties] java.endorsed.dirs=C\:\\Program Files\\Java\\jdk1.6.0_43\\jre
lib\\endorsed
[echoproperties] java.ext.dirs=C\:\\Program Files\\Java\\jdk1.6.0_43\\jre\\lib
ext;C\:\\windows\\Sun\\Java\\lib\\ext
[echoproperties] java.home=C\:\\Program Files\\Java\\jdk1.6.0_43\\jre
[echoproperties] java.io.tmpdir=C\:\\Users\\utsav\\AppData\\Local\\Temp\\
[echoproperties] java.library.path=C\:\\Program Files\\Java\\jdk1.6.0_43\\bin;
:\\windows\\Sun\\Java\\bin;C\:\\windows\\system32;C\:\\windows;C\:\\Program Fi
s\\Java\\jdk1.6.0_43\\bin;C\:\\Program Files\\Common Files\\Microsoft Shared\\
ndows Live;C\:\\Program Files (x86)\\Common Files\\Microsoft Shared\\Windows L
e;C\:\\windows\\system32;C\:\\windows;C\:\\windows\\System32\\Wbem;C\:\\window
\System32\\WindowsPowerShell\\v1.0\\;C\:\\Program Files\\Lenovo\\Bluetooth Sof
are\\;C\:\\Program Files\\Lenovo\\Bluetooth Software\\syswow64;C\:\\Program Fi
s (x86)\\Windows Live\\Shared;C\:\\opencv\\build\\common\\tbb\\intel64\\vc10\\
\:\\opencv\\build\\x64\\vc10\\bin\\;C\:\\Ant\\apache-ant-1.9.0\\bin;C\:\\Maven
apache-maven-3.0.5\\bin;;.
[echoproperties] java.runtime.name=Java(TM) SE Runtime Environment
[echoproperties] java.runtime.version=1.6.0_43-b01
[echoproperties] java.specification.name=Java Platform API Specification
[echoproperties] java.specification.vendor=Sun Microsystems Inc.
[echoproperties] java.specification.version=1.6
[echoproperties] java.vendor=Sun Microsystems Inc.
[echoproperties] java.vendor.url=http\://java.sun.com/
[echoproperties] java.vendor.url.bug=http\://java.sun.com/cgi-bin/bugreport.cg
[echoproperties] java.version=1.6.0_43
[echoproperties] java.vm.info=mixed mode
[echoproperties] java.vm.name=Java HotSpot(TM) 64-Bit Server VM
[echoproperties] java.vm.specification.name=Java Virtual Machine Specification
[echoproperties] java.vm.specification.vendor=Sun Microsystems Inc.
[echoproperties] java.vm.specification.version=1.0
[echoproperties] java.vm.vendor=Sun Microsystems Inc.
[echoproperties] java.vm.version=20.14-b01
[echoproperties] line.separator=\r\n
[echoproperties] os.arch=amd64
[echoproperties] os.name=Windows 7
[echoproperties] os.version=6.1
[echoproperties] path.separator=;
[echoproperties] source=1.6
[echoproperties] sun.arch.data.model=64
[echoproperties] sun.boot.class.path=C\:\\Program Files\\Java\\jdk1.6.0_43\\jr
\lib\\resources.jar;C\:\\Program Files\\Java\\jdk1.6.0_43\\jre\\lib\\rt.jar;C\
\Program Files\\Java\\jdk1.6.0_43\\jre\\lib\\sunrsasign.jar;C\:\\Program Files
Java\\jdk1.6.0_43\\jre\\lib\\jsse.jar;C\:\\Program Files\\Java\\jdk1.6.0_43\\j
\\lib\\jce.jar;C\:\\Program Files\\Java\\jdk1.6.0_43\\jre\\lib\\charsets.jar;C
\\Program Files\\Java\\jdk1.6.0_43\\jre\\lib\\modules\\jdk.boot.jar;C\:\\Progr
 Files\\Java\\jdk1.6.0_43\\jre\\classes
[echoproperties] sun.boot.library.path=C\:\\Program Files\\Java\\jdk1.6.0_43\\
e\\bin
[echoproperties] sun.cpu.endian=little
[echoproperties] sun.cpu.isalist=amd64
[echoproperties] sun.desktop=windows
[echoproperties] sun.io.unicode.encoding=UnicodeLittle
[echoproperties] sun.java.command=org.apache.tools.ant.launch.Launcher test
[echoproperties] sun.java.launcher=SUN_STANDARD
[echoproperties] sun.jnu.encoding=Cp1252
[echoproperties] sun.management.compiler=HotSpot 64-Bit Tiered Compilers
[echoproperties] sun.os.patch.level=Service Pack 1
[echoproperties] target=1.6
[echoproperties] user.country=US
[echoproperties] user.dir=C\:\\Informatica\\Informatic_FileIO_Connector
[echoproperties] user.home=C\:\\Users\\utsav
[echoproperties] user.language=en
[echoproperties] user.name=utsav
[echoproperties] user.timezone=
[echoproperties] user.variant=
[echoproperties] wsdl.location=C\:\\Informatica\\Informatic_FileIO_Connector\\
dl\\xyz.wsdl

clean:
   [delete] Deleting directory C:\Informatica\Informatic_FileIO_Connector\bin\
c
   [delete] Deleting directory C:\Informatica\Informatic_FileIO_Connector\dist
   [delete] Deleting directory C:\Informatica\Informatic_FileIO_Connector\INFA
Unit

init:
    [mkdir] Created dir: C:\Informatica\Informatic_FileIO_Connector\bin\src
    [mkdir] Created dir: C:\Informatica\Informatic_FileIO_Connector\dist
    [mkdir] Created dir: C:\Informatica\Informatic_FileIO_Connector\dist\Adapt
-jars

compile:
    [javac] C:\Informatica\Informatic_FileIO_Connector\build.xml:61: warning:
ncludeantruntime' was not set, defaulting to build.sysclasspath=last; set to f
se for repeatable builds
    [javac] Compiling 4 source files to C:\Informatica\Informatic_FileIO_Conne
or\bin\src
    [javac] C:\Informatica\Informatic_FileIO_Connector\src\com\ritesh\informat
a\connector\impl\fileio\FileIOConnectorConstants.java
    [javac] C:\Informatica\Informatic_FileIO_Connector\src\com\ritesh\informat
a\connector\impl\fileio\FileIOConnectorDescriptor.java
    [javac] C:\Informatica\Informatic_FileIO_Connector\src\com\ritesh\informat
a\connector\impl\fileio\FileIOConnectorImpl.java
    [javac] C:\Informatica\Informatic_FileIO_Connector\src\com\ritesh\informat
a\connector\impl\fileio\util\FileIOUtils.java

createAdapterJar:
     [echo] Informatica_FileIO_Connector: C:\Informatica\Informatic_FileIO_Con
ctor\build.xml
      [jar] Building jar: C:\Informatica\Informatic_FileIO_Connector\dist\Adap
r-jars\fileio-adapter-1.0.2.jar

package:
     [copy] Copying 18 files to C:\Informatica\Informatic_FileIO_Connector\dis
Adapter-jars
      [zip] Building zip: C:\Informatica\Informatic_FileIO_Connector\dist\pack
e-fileio.ver.zip

test:
   [delete] Deleting directory C:\Informatica\Informatic_FileIO_Connector\Adap
r-jars
    [mkdir] Created dir: C:\Informatica\Informatic_FileIO_Connector\INFA_JUnit
unit_results
    [mkdir] Created dir: C:\Informatica\Informatic_FileIO_Connector\INFA_JUnit
unit_reports
    [mkdir] Created dir: C:\Informatica\Informatic_FileIO_Connector\Adapter-ja

     [copy] Copying 8 files to C:\Informatica\Informatic_FileIO_Connector\Adap
r-jars
    [junit] Running com.informatica.cloud.api.adapter.test.metadata.Registrati
InfoTest
    [junit] Tests run: 9, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.
 sec
    [junit] Running com.informatica.cloud.api.adapter.test.typesystem.DataType
stTest
    [junit] Tests run: 52, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0
65 sec
    [junit] Running com.informatica.cloud.api.adapter.test.typesystem.TypeSyst
Test
    [junit] Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.
2 sec
    [junit] Running com.informatica.cloud.api.adapter.test.plugin.PluginTest
    [junit] Tests run: 7, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.
9 sec

BUILD FAILED
C:\Informatica\Informatic_FileIO_Connector\build.xml:121: Tests failed

Total time: 4 seconds 
```

我认为在 build.xml 文件中有一个代码段

```
<!-- Deploy Directory should point to the dropbox folder for deployment -->
    <property name="connector.deploy.directory" location="C:\Users\pugupta\Dropbox\Deployment\CloudEvangelists\fileio" /> 
```

但我的机器上没有这样的文件夹在此字段中放置什么。此属性描述的工作簿中是 **可选的：如果 Informatica 已与您共享部署保管箱文件夹。然后将 connector.deploy.directory 的值更改为指向您的本地保管箱文件夹以进行连接器部署（Informatica 将与您共享一个保管箱文件夹以进行连接器部署）**

但是我刚刚注册了开发人员组织，并且没有提供任何保管箱文件夹。在此字段中放置什么以便我的构建成功。请有人帮助我解决这个问题并获得创建基本连接器的入门指南？ ? 请有人帮助，以便我可以进一步进行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T03:19:02.530

您是否在 Informatica 云社区中发布了此内容？那里的反应通常更快。

# javascript - 用于保留单选按钮设置的 JavaScript cookie

> ID：15569522
> 
> 赞同：-1
> 
> 时间：2013-03-22T11:44:54.720
> 
> 标签：javascript, asp.net

我希望将单选按钮列表值保存在 JavaScript 中，直到浏览器关闭（非持久性 cookie）。我想这样做，而不是现在发生的事情：重新加载页面时，我的单选按钮列表会重置。

```
<asp:RadioButtonList ID="rblAttachmentType" runat="server" CssClass="radio" RepeatDirection="Horizontal"
        ToolTip="Select the type of file you want to upload.">
    <asp:ListItem Selected="True" Value="101">Picture</asp:ListItem>
    <asp:ListItem Value="102">Floor Plan</asp:ListItem>
    <asp:ListItem Value="300">Video</asp:ListItem>
    <asp:ListItem Value="200">Document</asp:ListItem>
</asp:RadioButtonList> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:53:54.807

如果您没有为 cookie 设置过期日期/时间，浏览器会将其视为“会话”cookie，因此它不会将其写入持久存储，并且在浏览器关闭后您将丢失它。在最基本的情况下，这足以

```
document.cookie = key + "=" + value; 
```

如果您已经使用了一些 wrap 功能，请研究如何编写没有过期日期的 cookie。

# python - 将列表元素转换为列表列表

> ID：15569529
> 
> 赞同：0
> 
> 时间：2013-03-22T11:45:12.077
> 
> 标签：python, list

简单的问题。你将如何转换这样的列表：

```
["foo","banana","apple"] 
```

进入

```
[["foo"],["banana"],["apple"]] 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T11:45:45.527

```
>>> [[el] for el in ["foo","banana","apple"]]
[['foo'], ['banana'], ['apple']] 
```

# c# - 超时？通过等待退出

> ID：15569531
> 
> 赞同：1
> 
> 时间：2013-03-22T11:45:13.857
> 
> 标签：c#, timeout, waitforexit

我如何知道时间限制是否已过期或进程是否被用户终止？

```
Process p = Process.Start(this.EmergencyApp, npLang);
p.WaitForExit(this.Timeout); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:46:56.680

`WaitForExit()` [返回一个布尔值](http://msdn.microsoft.com/en-us/library/ty0d8k56.aspx)：

> **返回值**
> 如果关联进程已退出，则为 true；否则为假。

# java - 如何在 s:url 标签中动态设置方案属性？

> ID：15569532
> 
> 赞同：3
> 
> 时间：2013-03-22T11:45:18.797
> 
> 标签：java, http, https, struts2

我正在尝试`s:url`使用该属性的标签构建一些 URL `scheme`，其值根据某些条件动态变化（例如，`http`对于某些请求和`https`其他一些请求，将构建相同的 URL）。应用程序中的所有`s:url`内容都将使用`http`或`https`针对给定请求构建。

我已经为此标准编写了逻辑并将要使用的模式（`http`或`https`）存储为我的操作中的字符串字段，但似乎我不能`scheme`在标记的属性中使用表达式`s:url`：

当我尝试使用使用此构建的 URL 呈现 HTML 锚点时：

```
<s:url scheme="%{myScheme}" id="myUrl" action="MyAction" includeParams="none">
   <s:param name="someParam" value="blah"/>
</s:url>

<s:a href="%{myUrl}">click me</s:a> 
```

我得到：

```
<a href="%{myScheme}://myhost.com/mywebapp/MyAction.action?someParam=blah">click me</a> 
```

还尝试做一件丑陋的事情，即使不使用实际的操作属性（如果有效，我会更改实际值的文字）。尝试使用脚本：

```
<s:url scheme="<%= "https" %>" id="myUrl" action="MyAction" includeParams="none">
   <s:param name="someParam" value="blah"/>
</s:url> 
```

但出现`500`错误和此日志消息：

```
org.apache.jasper.JasperException: /path/to/my/file.jsp(123,456) According to TLD or attribute directive in tag file, attribute scheme does not accept any expressions 
```

我还尝试了以下丑陋的选项，但没有奏效：

```
<s:url scheme="<s:property value="myScheme"/>" id="myUrl" action="MyAction" includeParams="none">
   <s:param name="someParam" value="blah"/>
</s:url> 
```

和：

```
<s:url scheme="<c:out value="${myScheme}"/>" id="myUrl" action="MyAction" includeParams="none">
   <s:param name="someParam" value="blah"/>
</s:url> 
```

所以我没有主意了。有人遇到同样的问题吗？问题的其余部分解释了为什么我需要这样做：

我的应用程序位于接收 HTTPS 请求的负载均衡器后面，但使用 HTTP 将它们转发到应用程序服务器，然后使用 HTTPS 将响应发送回互联网。所以应用服务器总是接收`HTTP`流量。

应用程序中的链接必须在通过负载均衡器请求时使用 https 方案生成（这样互联网上的用户将受到保护），在直接请求时使用 http（当我们开发人员需要访问我们内部网络中的特定前端时） . 我无法控制服务器配置，也无法对系统管理员产生太大影响，因此更改服务器或网络配置似乎相当成问题。

更新

似乎如果我扩展`org.apache.struts2.components.ServletUrlRenderer`Struts2 类来覆盖该`renderUrl`方法，我将能够做我想做的事。但我不知道如何告诉 Struts2 使用我的自定义实现`UrlRenderer`而不是默认的`ServletUrlRenderer`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:33:33.507

当我更新问题时，我找到了答案。

我的发现是：

*   标签中的`scheme`属性`s:url`不支持表达式，只支持文字值。
*   我需要更改 Struts2 的默认行为。

所以我做了什么：

*   删除了我的应用程序中所有 JSP 中`scheme`所有标记中的所有属性。`s:url`
*   使用自定义类实现`UrlRenderer`，几乎使用`ServletUrlRenderer`. 我更改了`renderUrl`方法检索方案默认值的行：`String scheme = ActionContext.getContext().getValueStack().findString("scheme");`. 这会将方案的默认值设置为当前操作的“方案”属性。
*   将以下属性添加到`struts.properties`. 这个属性告诉 Struts2 使用我的自定义实现：

`struts.urlRenderer = fully.qualified.name.for.my.CustomUrlRendererImplementation`

该解决方案引入了可维护性问题，因为我从 Struts 2.3.8 版本中复制粘贴了一些代码。如果有人提供更好的解决方案，我将很乐意对其进行测试:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:37:54.640

很难弄清楚这个...尝试使用 s:set 设置 myscheme 的值并使用 jsp 变量。

# c# - 为什么 TypeMock MockManager 需要 Verify() 和 Init() 而 MOQ 不需要

> ID：15569535
> 
> 赞同：0
> 
> 时间：2013-03-22T11:45:33.663
> 
> 标签：c#, moq, typemock

我经常使用最小起订量，从来不需要在我的方法中调用 a`Init()`和在我的`SetupForEachTest`方法`Verify()`中调用 a `CleanUpForEachTest`。

为什么 MOQ 不需要呢？

技术差异在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T15:06:18.430

如果您使用的是最新版本的 Typemock Isolator，则无需调用 Init 或 Verify，因为您可以在测试夹具中使用自动初始化和清理属性。

事实上，如果您对 Typemock 使用 Arrange Act Assert 语法（看起来像 Moq 语法），那么您根本不应该对 MockManager 做任何事情。

查看 Typemock 网站以获取文档和示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:54:33.830

Because Moq doesn't use **record-reply-verify** model.

[http://blogs.clariusconsulting.net/kzu/whats-wrong-with-the-recordreplyverify-model-for-mocking-frameworks/](http://blogs.clariusconsulting.net/kzu/whats-wrong-with-the-recordreplyverify-model-for-mocking-frameworks/)

# websphere - WebSphere 8 共享库白屏错误

> ID：15569538
> 
> 赞同：0
> 
> 时间：2013-03-22T11:45:41.917
> 
> 标签：websphere, shared-libraries, websphere-8

在 WebSphere 8 中，将共享库添加到已安装的 Java EE 应用程序并单击“确定”后，我总是得到一个白屏，而不是正常的 WebSphere 工作流程（WebSphere 8 应该将共享库与应用程序连接并询问如果我想保存更改，请联系我）。

服务器的 SystemErr.log：

```
[4/4/13 18:15:20:356 MSK] 00000051 SystemErr     R java.lang.NullPointerException
[4/4/13 18:15:20:357 MSK] 00000051 SystemErr     R  at com.ibm.ws.console.appmanagement.AppManagementHelper.validateAndUpdate(AppManagementHelper.java:329)
[4/4/13 18:15:20:357 MSK] 00000051 SystemErr     R  at com.ibm.ws.console.appmanagement.action.MapSharedLibForModAction.execute(MapSharedLibForModAction.java:378)
[4/4/13 18:15:20:357 MSK] 00000051 SystemErr     R  at org.apache.struts.action.RequestProcessor.processActionPerform(Unknown Source)
[4/4/13 18:15:20:357 MSK] 00000051 SystemErr     R  at org.apache.struts.action.RequestProcessor.process(Unknown Source)
[4/4/13 18:15:20:357 MSK] 00000051 SystemErr     R  at org.apache.struts.action.ActionServlet.process(Unknown Source)
[4/4/13 18:15:20:358 MSK] 00000051 SystemErr     R  at org.apache.struts.action.ActionServlet.doPost(Unknown Source)
[4/4/13 18:15:20:358 MSK] 00000051 SystemErr     R  at javax.servlet.http.HttpServlet.service(HttpServlet.java:595)
[4/4/13 18:15:20:358 MSK] 00000051 SystemErr     R  at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)
[4/4/13 18:15:20:358 MSK] 00000051 SystemErr     R  at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1224)
[4/4/13 18:15:20:358 MSK] 00000051 SystemErr     R  at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:774)
[4/4/13 18:15:20:358 MSK] 00000051 SystemErr     R  at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:456)
[4/4/13 18:15:20:358 MSK] 00000051 SystemErr     R  at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:178)
[4/4/13 18:15:20:358 MSK] 00000051 SystemErr     R  at com.ibm.ws.webcontainer.filter.WebAppFilterChain.invokeTarget(WebAppFilterChain.java:136)
[4/4/13 18:15:20:359 MSK] 00000051 SystemErr     R  at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:97)
[4/4/13 18:15:20:359 MSK] 00000051 SystemErr     R  at com.ibm.ws.console.core.servlet.WSCUrlFilter.setUpCommandAssistance(WSCUrlFilter.java:950)
[4/4/13 18:15:20:359 MSK] 00000051 SystemErr     R  at com.ibm.ws.console.core.servlet.WSCUrlFilter.continueStoringTaskState(WSCUrlFilter.java:499)
[4/4/13 18:15:20:359 MSK] 00000051 SystemErr     R  at com.ibm.ws.console.core.servlet.WSCUrlFilter.doFilter(WSCUrlFilter.java:320)
[4/4/13 18:15:20:359 MSK] 00000051 SystemErr     R  at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:195)
[4/4/13 18:15:20:359 MSK] 00000051 SystemErr     R  at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:91)
[4/4/13 18:15:20:359 MSK] 00000051 SystemErr     R  at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:928)
[4/4/13 18:15:20:359 MSK] 00000051 SystemErr     R  at com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:1025)
[4/4/13 18:15:20:360 MSK] 00000051 SystemErr     R  at com.ibm.ws.webcontainer.servlet.CacheServletWrapper.handleRequest(CacheServletWrapper.java:87)
[4/4/13 18:15:20:360 MSK] 00000051 SystemErr     R  at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:895)
[4/4/13 18:15:20:360 MSK] 00000051 SystemErr     R  at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1662)
[4/4/13 18:15:20:360 MSK] 00000051 SystemErr     R  at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:195)
[4/4/13 18:15:20:360 MSK] 00000051 SystemErr     R  at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:459)
[4/4/13 18:15:20:360 MSK] 00000051 SystemErr     R  at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewRequest(HttpInboundLink.java:526)
[4/4/13 18:15:20:360 MSK] 00000051 SystemErr     R  at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:312)
[4/4/13 18:15:20:360 MSK] 00000051 SystemErr     R  at com.ibm.ws.http.channel.inbound.impl.HttpICLReadCallback.complete(HttpICLReadCallback.java:87)
[4/4/13 18:15:20:361 MSK] 00000051 SystemErr     R  at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
[4/4/13 18:15:20:361 MSK] 00000051 SystemErr     R  at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
[4/4/13 18:15:20:361 MSK] 00000051 SystemErr     R  at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
[4/4/13 18:15:20:361 MSK] 00000051 SystemErr     R  at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)
[4/4/13 18:15:20:361 MSK] 00000051 SystemErr     R  at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204)
[4/4/13 18:15:20:361 MSK] 00000051 SystemErr     R  at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775)
[4/4/13 18:15:20:361 MSK] 00000051 SystemErr     R  at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905)
[4/4/13 18:15:20:361 MSK] 00000051 SystemErr     R  at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1814)
[4/4/13 18:15:20:364 MSK] 00000051 SystemErr     R javax.servlet.ServletException: java.lang.NullPointerException
[4/4/13 18:15:20:364 MSK] 00000051 SystemErr     R  at org.apache.struts.action.RequestProcessor.processException(Unknown Source)
[4/4/13 18:15:20:364 MSK] 00000051 SystemErr     R  at org.apache.struts.action.RequestProcessor.processActionPerform(Unknown Source)
[4/4/13 18:15:20:364 MSK] 00000051 SystemErr     R  at org.apache.struts.action.RequestProcessor.process(Unknown Source)
[4/4/13 18:15:20:365 MSK] 00000051 SystemErr     R  at org.apache.struts.action.ActionServlet.process(Unknown Source)
[4/4/13 18:15:20:365 MSK] 00000051 SystemErr     R  at org.apache.struts.action.ActionServlet.doPost(Unknown Source)
[4/4/13 18:15:20:365 MSK] 00000051 SystemErr     R  at javax.servlet.http.HttpServlet.service(HttpServlet.java:595)
[4/4/13 18:15:20:365 MSK] 00000051 SystemErr     R  at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)
[4/4/13 18:15:20:365 MSK] 00000051 SystemErr     R  at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1224)
[4/4/13 18:15:20:365 MSK] 00000051 SystemErr     R  at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:774)
[4/4/13 18:15:20:365 MSK] 00000051 SystemErr     R  at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:456)
[4/4/13 18:15:20:365 MSK] 00000051 SystemErr     R  at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:178)
[4/4/13 18:15:20:366 MSK] 00000051 SystemErr     R  at com.ibm.ws.webcontainer.filter.WebAppFilterChain.invokeTarget(WebAppFilterChain.java:136)
[4/4/13 18:15:20:366 MSK] 00000051 SystemErr     R  at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:97)
[4/4/13 18:15:20:366 MSK] 00000051 SystemErr     R  at com.ibm.ws.console.core.servlet.WSCUrlFilter.setUpCommandAssistance(WSCUrlFilter.java:950)
[4/4/13 18:15:20:366 MSK] 00000051 SystemErr     R  at com.ibm.ws.console.core.servlet.WSCUrlFilter.continueStoringTaskState(WSCUrlFilter.java:499)
[4/4/13 18:15:20:366 MSK] 00000051 SystemErr     R  at com.ibm.ws.console.core.servlet.WSCUrlFilter.doFilter(WSCUrlFilter.java:320)
[4/4/13 18:15:20:366 MSK] 00000051 SystemErr     R  at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:195)
[4/4/13 18:15:20:366 MSK] 00000051 SystemErr     R  at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:91)
[4/4/13 18:15:20:366 MSK] 00000051 SystemErr     R  at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:928)
[4/4/13 18:15:20:367 MSK] 00000051 SystemErr     R  at com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:1025)
[4/4/13 18:15:20:367 MSK] 00000051 SystemErr     R  at com.ibm.ws.webcontainer.servlet.CacheServletWrapper.handleRequest(CacheServletWrapper.java:87)
[4/4/13 18:15:20:367 MSK] 00000051 SystemErr     R  at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:895)
[4/4/13 18:15:20:367 MSK] 00000051 SystemErr     R  at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1662)
[4/4/13 18:15:20:367 MSK] 00000051 SystemErr     R  at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:195)
[4/4/13 18:15:20:367 MSK] 00000051 SystemErr     R  at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:459)
[4/4/13 18:15:20:367 MSK] 00000051 SystemErr     R  at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewRequest(HttpInboundLink.java:526)
[4/4/13 18:15:20:367 MSK] 00000051 SystemErr     R  at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:312)
[4/4/13 18:15:20:368 MSK] 00000051 SystemErr     R  at com.ibm.ws.http.channel.inbound.impl.HttpICLReadCallback.complete(HttpICLReadCallback.java:87)
[4/4/13 18:15:20:368 MSK] 00000051 SystemErr     R  at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
[4/4/13 18:15:20:368 MSK] 00000051 SystemErr     R  at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
[4/4/13 18:15:20:368 MSK] 00000051 SystemErr     R  at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
[4/4/13 18:15:20:368 MSK] 00000051 SystemErr     R  at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)
[4/4/13 18:15:20:368 MSK] 00000051 SystemErr     R  at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204)
[4/4/13 18:15:20:368 MSK] 00000051 SystemErr     R  at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775)
[4/4/13 18:15:20:368 MSK] 00000051 SystemErr     R  at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905)
[4/4/13 18:15:20:368 MSK] 00000051 SystemErr     R  at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1814)
[4/4/13 18:15:20:369 MSK] 00000051 SystemErr     R Caused by: java.lang.NullPointerException
[4/4/13 18:15:20:369 MSK] 00000051 SystemErr     R  at com.ibm.ws.console.appmanagement.AppManagementHelper.getNextStep(AppManagementHelper.java:147)
[4/4/13 18:15:20:369 MSK] 00000051 SystemErr     R  at com.ibm.ws.console.appmanagement.action.MapSharedLibForModAction.execute(MapSharedLibForModAction.java:391)
[4/4/13 18:15:20:369 MSK] 00000051 SystemErr     R  ... 35 more 
```

但：

1.  添加共享库作为安装过程的一部分（“Java EE 应用程序安装”过程的第 4 阶段）成功完成。
2.  在 WebSphere 7 中，添加共享库的两种方式都可以正常工作。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:04:45.770

好吧，我决定安装的是 8.5.x，在这个最新版本中我的问题消失了。

# javascript - 未使用 setMap 加载标记

> ID：15569541
> 
> 赞同：-1
> 
> 时间：2013-03-22T11:45:50.450
> 
> 标签：javascript, google-maps, google-maps-api-3, google-maps-markers

我正在尝试使用谷歌地图创建jsp页面。我正在像这样初始化谷歌地图..

```
 var map;
  var markersArray = [];
 function initialize()
{
    var chicago = new google.maps.LatLng(8.3641835,77.252415);
    var mapOptions = {
      zoom:9,
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      center: chicago
    };
   map=new google.maps.Map(document.getElementById("map_canvas")
  ,mapOptions); 
```

}

从一个 ajax 调用响应后，我试图在这个谷歌地图上添加标记

```
 function showOverlays() {
////alert("overlay");

  if (markersArray) {
    for (i in markersArray) {

      markersArray[i].setMap(map);
    }
  }
} 
```

**但是标记没有显示在谷歌地图**中......这是什么原因。有人可以帮忙吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:23:05.803

问题是您似乎没有向 中添加任何内容`markersArray`，至少在您提供给我们的代码中。您似乎也没有在任何地方创建标记。

但是，假设您正在添加标记并将它们推送到数组中，那么您的代码中只会出现一个简单的错误。将循环更改为：

```
for (i in markersArray) {
  i.setMap(map);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:26:41.817

实际上这是自定义标记图像的问题。当我删除自定义标记时，它可以工作

# php - 相同的网络服务器，相同的drupal，相同的数据库，单点登录？

> ID：15569542
> 
> 赞同：1
> 
> 时间：2013-03-22T11:45:51.490
> 
> 标签：php, drupal-7, cross-domain, single-sign-on, session-cookies

我有一个安装了 drupal 7 的网络服务器。许多主域都指向这个网络服务器（es domain1.com、domain2.com），每个域都看到同一个网站。

但是，如果我在访问 domain2.com 时登录到一个（domain1.com），我没有登录。我知道这是一个域 cookie 问题，但是有一种方法可以在以下情况下为域列表生成 cookie我注册/登录？

希望有人能帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-21T20:20:27.667

在这里，我的模块是为了让 SSO 系统与 Drupal 和 Domain Acces 一起工作而开发的。

[https://github.com/andreacavattoni/DomainSSO](https://github.com/andreacavattoni/DomainSSO)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T11:50:59.747

我想你可能想看看[面包店](http://drupal.org/project/bakery)

可能感兴趣：[Stack Exchange 博客：全球网络自动登录](https://blog.stackoverflow.com/2010/09/global-network-auto-login/)（使用 HTML5 的本地存储）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T12:21:17.710

这是一个非常好的问题，并以不同的方式对您的问题进行了小型研究：

# 认证：

在阅读文档并通过许多服务提供商之后，这是不可能的。Oauth 服务提供者提供消费者密钥和秘密，他们检查来自域的请求，因此如果在不同的域名上使用相同的 oAuth 消费者密钥，则不起作用。

# 设置 Cookie 多个域

简单地说，不通过任何方式访问域就无法设置cookie

**因此，我可以说不可能为多个域设置 cookie 或使用相同的消费者密钥和秘密**

# 替代方式

1.  使用 HTML5 Web Storage 来存储信息，然后从不同的域访问信息是可能的。

2.  使用 AJAX/CURL 发送为不同域设置 cookie 的请求，例如 example.com/session_cookie.php?info=xxxxx

3.  为所有域维护一个子域/页面，以便跨所有域登录。

# ruby-on-rails - 将第一个应用程序部署到 VPS，与 capistrano 斗争

> ID：15569543
> 
> 赞同：0
> 
> 时间：2013-03-22T11:45:52.110
> 
> 标签：ruby-on-rails, ruby, deployment, vps

我正在尝试使用 capsitrano 将我的第一个应用程序部署到 VPS ubuntu 12.10，并遵循 RailsCasts“部署到 VPS”视频广播。

还有一个问题，我没有添加 nginx 配置，也没有添加独角兽配置文件​​。我可以没有他们吗？（我想通过控制台配置 nginx。）

我的 deploy.rb 文件

```
require "bundler/capistrano"

set :application, "picurwebaruhaz"

set :scm, "git"
set :repository,  "git://github.com/gwuix2/picurwebaruhaz.git"
set :branch, "master"
set :user, "gwuix2"
set :deploy_to, "/home/#{user}/#{application}"

default_run_options[:pty] = true 

# set :scm, :git # You can set :scm explicitly or Capistrano will make an intelligent guess based on known version control directory names
# Or: `accurev`, `bzr`, `cvs`, `darcs`, `git`, `mercurial`, `perforce`, `subversion` or `none`

role :web, "198.211.117.84"                          # Your HTTP server, Apache/etc
role :app, "198.211.117.84"                          # This may be the same as your `Web` server
role :db,  "198.211.117.84", :primary => true # This is where Rails migrations will run
role :db,  "198.211.117.84"

# if you want to clean up old releases on each deploy uncomment this:
after "deploy:restart", "deploy:cleanup"

# if you're still using the script/reaper helper you will need
# these http://github.com/rails/irs_process_scripts

# If you are using Passenger mod_rails uncomment this:
 namespace :deploy do
   task :start do ; end
   task :stop do ; end
   task :restart, :roles => :app, :except => { :no_release => true } do
     run "#{try_sudo} touch #{File.join(current_path,'tmp','restart.txt')}"
   end
 end 
```

我收到以下错误：

```
 * executing "cd /home/gwuix2/picurwebaruhaz/releases/20130322113243 && bundle install --gemfile /home/gwuix2/picurwebaruhaz/releases/20130322113243/Gemfile --path /home/gwuix2/picurwebaruhaz/shared/bundle --deployment --quiet --without development test"
    servers: ["198.211.117.84"]
    [198.211.117.84] executing command
 ** [out :: 198.211.117.84] sh: 1: bundle: not found
    command finished in 357ms
*** [deploy:update_code] rolling back
  * executing "rm -rf /home/gwuix2/picurwebaruhaz/releases/20130322113243; true"
    servers: ["198.211.117.84"]
    [198.211.117.84] executing command
    command finished in 384ms
failed: "sh -c 'cd /home/gwuix2/picurwebaruhaz/releases/20130322113243 && bundle install --gemfile /home/gwuix2/picurwebaruhaz/releases/20130322113243/Gemfile --path /home/gwuix2/picurwebaruhaz/shared/bundle --deployment --quiet --without development test'" on 198.211.117.84 
```

编辑：

这是我的应用程序： [GITHUB 上的应用程序 https://github.com/gwuix2/picurwebaruhaz](https://github.com/gwuix2/picurwebaruhaz)

Edit_2：如果我通过 SSH 连接到服务器并运行 $ gem install bundler，它会安装，但是当我运行时：

```
 gwuix2@picurbolt:~$ sudo gem install bundler sudo: gem: command not
 found 
```

有什么建议么？

自己想不通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:07:16.087

尝试在不使用 sudo 的情况下运行 bundler 命令：

```
gwuix2@picurbolt:~$ gem install bundler sudo: gem: command not found 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:07:45.597

deploy.rb 需要：

```
require "rvm/capistrano"
require "bundler/capistrano" 
```

# c++ - 使用 CMake 静态链接到项目外部的库

> ID：15569548
> 
> 赞同：17
> 
> 时间：2013-03-22T11:46:22.537
> 
> 标签：c++, dependencies, cmake

我想使用 CMake 将我的项目链接到我的共享库。该库仅在少数项目之间共享并且相当小，所以我真的很想在链接之前构建它。每次都构建它似乎比维护一个最新的预编译版本更好，因为我要与项目一起更改它。它是独立的，因为它包含我在下一个项目中几乎肯定会需要的东西。

如何配置 CMake 来做到这一点？

我当前用于相关项目的 CMakeLists.txt 如下所示：

```
find_package( Boost REQUIRED COMPONENTS unit_test_framework)

include_directories(${BaumWelch_SOURCE_DIR}/../../grzesLib/src
                    ${BaumWelch_SOURCE_DIR}/src 
                    ${Boost_INCLUDE_DIRS})

if(CMAKE_COMPILER_IS_GNUCXX)
    add_definitions(-g -std=c++11 -Wall -Werror -Wextra -pedantic -Wuninitialized)
endif()

# Create the unit tests executable
add_executable(
 baumwelchtests stateindextest.cpp baumiterationtest.cpp baumwelchtest.cpp sampleparameters.cpp sdetest.cpp
 # Key includes for setting up Boost.Test
 testrunner.cpp
 # Just for handy reference
 exampletests.cpp
)

# Link the libraries
target_link_libraries( baumwelchtests ${Boost_LIBRARIES} baumwelchlib grzeslib) 
```

但显然编译失败：

```
/usr/bin/ld: cannot find -lgrzeslib 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-22T12:20:01.190

您提到您想构建库而不是使用预编译版本。如果库有 CMakeList，则应使用`add_subdirectory(path/to/the/library/source/directory)`. 然后它将成为您项目的子项目，您可以在 CMakeList 中正常使用其目标的名称。

请注意，虽然该命令称为 add_subdirectory ，但它可以是磁盘上的任意目录*；*它不必是主项目源目录的子目录。如果它不是子目录，您还必须为其显式指定二进制目录。例子：

```
add_subdirectory(/path/to/the/library/source/directory subproject/grzeslib) 
```

第二个参数，如果作为相对路径给出，则被解释为相对于`CMAKE_CURRENT_BINARY_DIR`.

# java - 通过 FTP 在特定位置上传文件

> ID：15569550
> 
> 赞同：0
> 
> 时间：2013-03-22T11:46:33.223
> 
> 标签：java, ftp

[FTP 客户端类未连接](https://stackoverflow.com/questions/15542670/ftp-client-class-is-not-connecting/15544823#15544823)

在此链接的基础上，我只想知道在特定目录位置上传文件，例如在 IP 中有一个交叉引用，然后在交叉引用中进一步有一个库，然后我将如何在库中上传文件，或者确切地说我将如何连接到`ip/cross reference/library` 我需要上传文件的位置。在这里我想提一下，到目前为止我已经成功连接到 IP。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T12:02:52.827

FTPHTTPClient 的构造函数似乎没有在构造函数中使用路径，它只是主机名/ip。此外，大多数 FTP 客户端使用 / 而不是 \ 作为路径分隔符。

[FTPClient](http://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html)的 JavaDoc显示有一个方法[changeWorkingDirectory(String pathname)，](http://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#changeWorkingDirectory%28java.lang.String%29)我猜这就是你想要做的。

# database - 使用 mapreduce 作业连接到 MySql 数据库时出错

> ID：15569551
> 
> 赞同：0
> 
> 时间：2013-03-22T11:46:39.440
> 
> 标签：database, hadoop

我正在尝试使用 map-reduce 作业连接到 mysql 数据库的以下代码。我面临下面发布的以下错误。我在我的代码中放置了检查点，表明在作业实际运行之前的部分作业运行正确，之后作业失败......

```
import java.io.DataInput;
import java.io.DataOutput;
import java.io.IOException;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.Iterator;
import java.util.List;
import java.util.StringTokenizer;

import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.filecache.DistributedCache;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.io.IntWritable;
import org.apache.hadoop.io.LongWritable;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.io.Writable;
import org.apache.hadoop.io.WritableComparable;
import org.apache.hadoop.mapred.FileInputFormat;
import org.apache.hadoop.mapred.FileOutputFormat;
import org.apache.hadoop.mapred.JobClient;
import org.apache.hadoop.mapred.JobConf;
import org.apache.hadoop.mapred.MapReduceBase;
import org.apache.hadoop.mapred.Mapper;
import org.apache.hadoop.mapred.OutputCollector;
import org.apache.hadoop.mapred.Reducer;
import org.apache.hadoop.mapred.Reporter;
import org.apache.hadoop.mapred.SequenceFileOutputFormat;
import org.apache.hadoop.mapred.TextOutputFormat;
import org.apache.hadoop.mapred.lib.db.DBConfiguration;
//import org.apache.hadoop.mapred.lib.db.DBInputFormat;
import org.apache.hadoop.mapred.lib.db.DBInputFormat;
import org.apache.hadoop.mapred.lib.db.DBOutputFormat;
import org.apache.hadoop.mapred.lib.db.DBWritable;

public class TweetWordCount {

    public static class TweetWordCountMapper extends MapReduceBase implements
            Mapper<LongWritable, GetTweets, Text, IntWritable> {
        private final static IntWritable intTwordsCount = new IntWritable(1);
        private Text strTwoken = new Text();

        public void map(LongWritable key, GetTweets value,
                OutputCollector<Text, IntWritable> output, Reporter reporter)
                throws IOException {
            System.out.println("checkpoint4");
            GetTweets tweets = new GetTweets();
            tweets.strTweet = value.strTweet;
            //TwitterTokenizer twokenizer = new TwitterTokenizer();
            //List<String> twokens = twokenizer.twokenize(value.strTweet.toString());

            output.collect(new Text(value.strTweet.toString()), intTwordsCount);
            System.out.println("checkpoint5");

        }

    }

    public static class TweetWordCountReducer extends MapReduceBase implements
            Reducer<Text, IntWritable, Text, IntWritable> {
        public void reduce(Text key, Iterator<IntWritable> values,
                OutputCollector<Text, IntWritable> output, Reporter reporter)
                throws IOException {
            System.out.println("checkpoint6");
            int intTwokenCount = 0;
            while (values.hasNext()) {
                intTwokenCount += values.next().get();
            }
            output.collect(key, new IntWritable(intTwokenCount));
            System.out.println("checkpoint6");
        }
    }

    public static void main(String[] args) throws Exception {

        System.out.println("checkpoint1");
          JobConf twokenJobConf = new JobConf(new Configuration(),TweetWordCount.class);
          //JobConf twokenJobConf = new JobConf(TweetWordCount.class);
          twokenJobConf.setJobName("twoken_count");

          twokenJobConf.setInputFormat(DBInputFormat.class); //Set input format here
          twokenJobConf.setOutputFormat(TextOutputFormat.class);// Sets the output format

          Object out = new Path("twokens");

          twokenJobConf.setMapperClass(TweetWordCountMapper.class);
          twokenJobConf.setCombinerClass(TweetWordCountReducer.class);
          twokenJobConf.setReducerClass(TweetWordCountReducer.class);

          twokenJobConf.setOutputKeyClass(Text.class);
          twokenJobConf.setOutputValueClass(IntWritable.class);

          DBConfiguration.configureDB(twokenJobConf, "com.mysql.jdbc.Driver",
                  "jdbc:mysql://localhost/test", "root", "root"); //Specifies the DB configuration

          String[] fields = {"Tweet"}; //Specifies the Fields to be fetched from DB
          DBInputFormat.setInput(twokenJobConf, GetTweets.class, "NewGamil",
                  null /* conditions */, "Tweet", fields); // Specifies the DB table and fields

          //SequenceFileOutputFormat.setOutputPath(twokenJobConf, (Path) out);
          FileOutputFormat.setOutputPath(twokenJobConf, (Path) out);
          System.out.println("checkpoint2");
          JobClient.runJob(twokenJobConf);
          System.out.println("checkpoint3");

    }

    public static class GetTweets implements Writable, DBWritable {
        String strTweet;

        public GetTweets() {

        }

        public void readFields(DataInput in) throws IOException {
            System.out.println("checkpoint 2a");
            this.strTweet = Text.readString(in);
        }

        public void readFields(ResultSet resultSet) throws SQLException {
            System.out.println("checkpoint 3a");
            // this.id = resultSet.getLong(1);
            this.strTweet = resultSet.getString(1);
        }

        public void write(DataOutput out) throws IOException {

        }

        public void write(PreparedStatement stmt) throws SQLException {

        }

    }

}

rv@ramanujan:~$ hadoop jar Twit.jar 
Warning: $HADOOP_HOME is deprecated.

checkpoint1
checkpoint2
13/03/22 17:16:12 WARN mapred.JobClient: Use GenericOptionsParser for parsing the arguments. Applications should implement Tool for the same.
13/03/22 17:16:12 INFO mapred.JobClient: Cleaning up the staging area hdfs://localhost:54310/home/rv/hadoopfiles/mapred/staging/rv/.staging/job_201303221600_0008
Exception in thread "main" java.lang.RuntimeException: Error in configuring object
    at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:93)
    at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:64)
    at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:117)
    at org.apache.hadoop.mapred.JobConf.getInputFormat(JobConf.java:575)
    at org.apache.hadoop.mapred.JobClient.writeOldSplits(JobClient.java:981)
    at org.apache.hadoop.mapred.JobClient.writeSplits(JobClient.java:973)
    at org.apache.hadoop.mapred.JobClient.access$600(JobClient.java:172)
    at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:889)
    at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:842)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:416)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1059)
    at org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:842)
    at org.apache.hadoop.mapred.JobClient.submitJob(JobClient.java:816)
    at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:1253)
    at TweetWordCount.main(TweetWordCount.java:107)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:156)
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:88)
    ... 20 more
Caused by: java.lang.RuntimeException: java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
    at org.apache.hadoop.mapred.lib.db.DBInputFormat.configure(DBInputFormat.java:271)
    ... 25 more
Caused by: java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:188)
    at org.apache.hadoop.mapred.lib.db.DBConfiguration.getConnection(DBConfiguration.java:123)
    at org.apache.hadoop.mapred.lib.db.DBInputFormat.configure(DBInputFormat.java:266)
    ... 25 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-05T20:09:12.397

确保在命令中使用 -libjars。如下所示： bin/hadoop jar wordcount.jar org.myorg.DBCountPageView -libjars mysql-connector-java-5.1.26-bin.jar

请参考[http://hadoop.apache.org/docs/r1.2.1/mapred_tutorial.html](http://hadoop.apache.org/docs/r1.2.1/mapred_tutorial.html)的使用部分

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T13:39:32.970

不确定您的应用程序的范围是什么（学习、开发等），但我建议使用[Sqoop](http://sqoop.apache.org/)与 MySQL 等关系数据库进行交互。

# mysql - 由于错误，数据中具有 NULL 的 MySQL XML 导出不会重新导入

> ID：15569552
> 
> 赞同：0
> 
> 时间：2013-03-22T11:46:40.253
> 
> 标签：mysql, xml, import, null, export

使用 MySQL CLI 命令从表中导出一行，例如：-

```
mysql -h mysql --user=root --password=root --database dms_home --xml -e "SELECT * FROM users WHERE account=4149;" >/var/www/scripts/output/1187515/1187515_users.sql 
```

这将输出文件：-

```
<resultset statement="SELECT * FROM accounts WHERE accnum=1187515" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <row>
    <field name="id">4149</field>
    <field name="accnum">1187515</field>
    <field name="applicationdate">0000-00-00</field>
    <field name="introducer"></field>
    <field name="jointacc">0</field>
    <field name="consultancy">0</field>
    <field name="storage">0</field>
    <field name="digitalonly">0</field>
    <field name="membership" xsi:nil="true" />
    <field name="promocode"></field>
    <field name="holdername" xsi:nil="true" />
    <field name="testaccount">0</field>
  </row>
</resultset> 
```

现在，您可以看到 XML 行“membership”和“holdername”中有 2 个空值，如果我随后转到另一个 MySQL 服务器/数据库并重新导入此文件，使用显示警告开关，我会得到这个：-

```
mysql -h mysql -u root -p dms_licence --show-warnings -e "load xml local infile '/var/www/scripts/output/1187515/1187515_account.sql' into table dms_licence.accounts";

Warning (Code 1263): Column set to default value; NULL supplied to NOT NULL column 'id' at row 1
Warning (Code 1263): Column set to default value; NULL supplied to NOT NULL column 'accnum' at row 1
Warning (Code 1263): Column set to default value; NULL supplied to NOT NULL column 'applicationdate' at row 1
Warning (Code 1263): Column set to default value; NULL supplied to NOT NULL column 'introducer' at row 1
Warning (Code 1263): Column set to default value; NULL supplied to NOT NULL column 'jointacc' at row 1
Warning (Code 1263): Column set to default value; NULL supplied to NOT NULL column 'consultancy' at row 1
Warning (Code 1263): Column set to default value; NULL supplied to NOT NULL column 'storage' at row 1
Warning (Code 1263): Column set to default value; NULL supplied to NOT NULL column 'digitalonly' at row 1
Warning (Code 1263): Column set to default value; NULL supplied to NOT NULL column 'promocode' at row 1
Warning (Code 1263): Column set to default value; NULL supplied to NOT NULL column 'testaccount' at row 1 
```

表模式是相同的，插入数据不会导致主键或唯一键出现任何问题。那么为什么它只插入一条空白记录呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:46:40.253

这似乎是 MySQL 5.5x 的错误我尚未使用 MySQL 5.6x 进行测试，但问题似乎在于重新导入 XML 中定义为空值的字段行（在 XML 中表示为 xsi:nil="true " /> ) 导致此问题。

用于读取 XML 的 MySQL CLI 导入过程似乎有问题，无法处理关闭字段节点的快捷方式。

所以这失败了： -

但这有效：-

解决此问题的一个快速解决方法是仍然通过管道输出文件，然后更改：-

```
xsi:nil="true" /> 
```

和

```
xsi:nil="true"></field> 
```

我认为这是安全的原因是由于 xsi:nil 永远不会等于 false，因为如果有一个值，那么它只会位于标签之间。

那么你如何改变这个......好吧，我现在要找出并回来更新......更多。

希望这个初始指针可以帮助其他人，因为它让我在凌晨试图找出问题所在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T12:05:45.310

这是使用 PHP 对文件进行快速搜索和替换，这是我在整个项目中使用的，请参见此处 ->[使用 PHP 在平面文件中查找和替换值](https://stackoverflow.com/questions/2944080/find-and-replace-values-in-a-flat-file-using-php)

但如果我能在 Linux (CentOS) 上的操作系统级别做到这一点会很酷，这样 PHP 就不必处理大量文件，我需要搜索：-

```
" xsi:nil=\"true\" />" 
```

并将其更改为：-

```
" xsi:nil=\"true\"></field>" 
```

祝你好运找到那个:)

# wpf - WPF MVVM DataTemplate：使用来自父 Viewmodel 的数据注入模板 ViewModel

> ID：15569554
> 
> 赞同：2
> 
> 时间：2013-03-22T11:46:41.857
> 
> 标签：wpf, mvvm, view, viewmodel, datatemplate

我的父 ViewModel 中有一个 ObservableCollection，我想在父视图中显示它。所以我定义了一个子 View 和一个子 ViewModel 处理按钮点击。如何在不丢失我已经设置的 RelayCommands 以进行按钮单击处理的情况下将 ObservableCollection 中的每个项目获取到相应的子 ViewModel 中？

在我的父 View Code-Behind 中，我唯一要做的就是将 DataContext 设置为适当的 ViewModel：

```
DataContext = new ParentViewModel(); 
```

在我的父视图 XAML 中，我定义了一个 ListBox 来显示我的子视图的 DataTemplate：

```
<ListBox
  ItemsSource="{Binding Path=Items}">
  <ListBox.ItemTemplate>
    <DataTemplate DataType="{x:Type vm:ChildViewModel}">
      <views:ChildView Width="auto" />
    </DataTemplate>
  </ListBox.ItemTemplate>
</ListBox> 
```

现在在我的 ChildView 中，我有几个 TextBlocks 显示绑定数据和按钮，它们应该在 ObservableCollection 中指定的路径中执行文件：

```
<TextBlock
  Text="{Binding Path=Title}" />
...
<Button
  Content="Start exe"
  Tag="{Binding Path=ExePath}">
  <i:Interaction.Triggers>
    <i:EventTrigger EventName="Click">
      <i:InvokeCommandAction Command="{Binding Path=OnButtonClicked}" />
    </i:EventTrigger>
  </i:Interaction.Triggers>
</Button> 
```

Child ViewModel 持有 RelayCommands 来处理 Button 点击​​事件：

```
private RelayCommand onButtonClicked;
public ICommand OnButtonClicked
{
  get
  {
    return onButtonClicked ??
      (onButtonClicked =
      new RelayCommand(ObeyOnButtonClicked, CanObeyOnButtonClicked));
  }
}
private void ObeyOnButtonClicked()
{
  ... //Path conversion
  Process.Start(pathToExe);
}
private bool CanObeyOnButtonClicked()
{
  return true;
} 
```

现在，在我的子视图的代码隐藏中，当我添加

```
DataContext = new SampleItemViewModel(); 
```

对于构造函数，按钮单击已处理，但文本框全部为空。当我删除此行时，文本框已正确填充，但未处理按钮单击。

如何让这两个功能都工作？

编辑：

父视图模型：

```
private ObservableCollection<Item> items;
public ObservableCollection<Item> Items
{
  get { return items; }
  set
  {
    items= value;
    OnPropertyChanged("Items");
  }
}

... //Filling the Collection in Constructor 
```

ChildViewModel 仅包含上面提到的按钮单击处理程序。

编辑：

我现在尝试了几件事，但我不知道如何将命令从 ChildView 绑定到我的 ChildViewModel 而不将我的 ChildView 的 DataContext 设置为我的 ChildViewModel

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:53:01.087

您可以删除事件触发器，因为 Button 具有 Command 属性。

```
<TextBlock Text="{Binding Path=Title}" />
...
<Button
  Content="Start exe"
  Tag="{Binding Path=ExePath}"
  Command="{Binding Path=OnButtonClicked}"
>
</Button> 
```

并设置 DataContext ：

```
<ListBox
  ItemsSource="{Binding Path=Items}">
  <ListBox.ItemTemplate>
    <DataTemplate DataType="{x:Type vm:ChildViewModel}">
      <views:ChildView Width="auto" DataContext="{Binding}" />
    </DataTemplate>
  </ListBox.ItemTemplate>
</ListBox> 
```

# .htaccess - 缩短 URL 时出现 .htaccess 语法错误

> ID：15569560
> 
> 赞同：0
> 
> 时间：2013-03-22T11:47:05.137
> 
> 标签：.htaccess

到目前为止，我已经阅读了一些关于此的帖子和教程，但仍然没有全面了解。

我想将我的 URL 从**?action=viewArticle&articleId=7**缩短为任何标题（保存在 MySQL 的标题表中）

我知道要做到这一点，你用**$1**替换凌乱的部分，对吗？并且您还在字符集之后使用**$**来表示您希望服务器更改的位置的开始。

我刚刚将此代码作为 .htaccess 上传到下面，然后它立即返回了整页 500 错误。我删除了文件。我写错了什么？

```
Options +FollowSymLinks

RewriteEngine On
RewriteRule ^([a-zA-Z0-9]+)/$ ?action=$1&articleId=$2 
```

我把**2 美元**放在最后，因为这似乎是合乎逻辑的进展。我想避免再次错误上传。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:38:07.353

The `$1` `$2` represent back references. Those are created by parentheses `()` Your rule has got only one opening and closing bracket, thus creating only one back reference.

You are getting an error because `$2` doesn't exist.

# form-submit - 提交后保留所有选定的值

> ID：15569567
> 
> 赞同：0
> 
> 时间：2013-03-22T11:47:29.690
> 
> 标签：form-submit, cascadingdropdown

我坚持使用我正在使用的这个脚本：

索引.php

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>

        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link href="includes/css/style.css" type="text/css" rel="stylesheet" />
        <link href="includes/css/wt-gallery.css" type="text/css" rel="stylesheet" />
        <script type="text/javascript" src="includes/js/jquery-1.7.1.min.js"></script>
        <script type="text/javascript" src="includes/js/configuratie.js"></script>
        <script type="text/javascript" src="includes/js/jquery.wt-gallery.min.js"></script>
        <script type="text/javascript">
$(document).ready(function() {
    $('#wait_1').hide();
    $('#drop_1').change(function(){
      $('#wait_1').show();
      $('#result_1').hide();
      $.get("func.php", {
        func: "drop_1",
        drop_var: $('#drop_1').val()
      }, function(response){
        $('#result_1').fadeOut();
        setTimeout("finishAjax('result_1', '"+escape(response)+"')", 400);
      });
        return false;
    });
    $('#wait_2').hide();
    $('#drop_2').change(function(){
      $('#wait_2').show();
      $('#result_2').hide();
      $.get("func.php", {
        func: "drop_2",
        drop_var: $('#drop_2').val()
      }, function(response){
        $('#result_2').fadeOut();
        setTimeout("finishAjax2('result_2', '"+escape(response)+"')", 400);
      });
        return false;
    });
    $('#wait_3').hide();
    $('#drop_3').change(function(){
      $('#wait_3').show();
      $('#result_3').hide();
      $.get("func.php", {
        func: "drop_3",
        drop_var: $('#drop_3').val()
      }, function(response){
        $('#result_3').fadeOut();
        setTimeout("finishAjax3('result_3', '"+escape(response)+"')", 400);
      });
        return false;
    });
});

function finishAjax(id, response) {
  $('#wait_1').hide();
  $('#'+id).html(unescape(response));
  $('#'+id).fadeIn();
}
function finishAjax2(id, response) {
  $('#wait_2').hide();
  $('#'+id).html(unescape(response));
  $('#'+id).fadeIn();
}
function finishAjax3(id, response) {
  $('#wait_3').hide();
  $('#'+id).html(unescape(response));
  $('#'+id).fadeIn();
}

function finishAjax_tier_three(id, response) {
  $('#wait_2').hide();
  $('#'+id).html(unescape(response));
  $('#'+id).fadeIn();
}
function finishAjax_tier_four(id, response) {
  $('#wait_3').hide();
  $('#'+id).html(unescape(response));
  $('#'+id).fadeIn();
}
function finishAjax_tier_five(id, response) {
  $('#wait_4').hide();
  $('#'+id).html(unescape(response));
  $('#'+id).fadeIn();
}
</script>
        </head>
<?php
$website = "it";
    // configuratie file en db connect
include "includes/inc/config.inc.php";
include('db.php');
include_once "class/slider.class.php";
include('func.php');
$slideralbum = new slideralbum($dbo);
$sliders = $slideralbum->getSliderItems($website);
?>
<body>
<p>
<form name="product" action="" method="post">

    <select name="drop_1" id="drop_1">

      <option value="" selected="selected" disabled="disabled">Selecteer Merk</option>

      <?php getTierOne(); ?>

    </select> 

    <span id="wait_1" style="display: none;">
    <img alt="Please Wait" src="ajax-loader.gif"/>
    </span>
    <span id="result_1" style="display: none;"></span>
    <span id="wait_2" style="display: none;">
    <img alt="Please Wait" src="ajax-loader.gif"/>
    </span>
    <span id="result_2" style="display: none;"></span> 
    <span id="wait_3" style="display: none;">
    <img alt="Please Wait" src="ajax-loader.gif"/>
    </span>
    <span id="result_3" style="display: none;"></span> 
    <span id="wait_4" style="display: none;">
    <img alt="Please Wait" src="ajax-loader.gif"/>
    </span>
    <span id="result_4" style="display: none;"></span> 
  <INPUT TYPE="button" VALUE="Refresh" onclick='location.reload()'>
</form>
</p>
<p>
<?php if(isset($_POST['submit'])){
    $drop = $_POST['drop_1'];
    $drop_2 = $_POST['drop_2'];
    $drop_3 = $_POST['drop_3'];
    $drop_4 = $_POST['drop_4'];
    $drop_5 = $_POST['drop_5'];
?>
<table border="1" bordercolor="#B5B5B5" style="background-color:#FFFFFF" width="250" cellpadding="3" cellspacing="3">
    <tr>
        <td>Merk:</td>
        <td><?php echo $drop;?></td>
    </tr>
    <tr>
        <td>Model:</td>
        <td><?php echo $drop_2;?></td>
    </tr>
    <tr>
        <td>Bouwjaar:</td>
        <td><?php echo $drop_3;?></td>
    </tr>
    <tr>
        <td>Kleur:</td>
        <td><?php echo $drop_4;?></td>
    </tr>
</table>
<?php
}
?>
<div id="banner-block">       <!-- Begin of Slideshow -->
    <div class="container">          
        <div class="wt-gallery" style="width:920px; height:375px;">
            <div class="main-screen">
                                <?php if(isset($_POST['submit'])){
    $drop = $_POST['drop_1'];
    $drop_2 = $_POST['drop_2'];
    $drop_3 = $_POST['drop_3'];
    $drop_4 = $_POST['drop_4'];
    $drop_5 = $_POST['drop_5'];
?>
                    <img src="images/<?php echo $drop_5;?>" alt="<?php echo $drop_5;?>" width="920" height="360"/>
<?php
                    }
?>
                <noscript>
                <!-- placeholder image when javascript is off -->
                <img src="../images/triworks_abstract27.jpg" alt=""/>
                </noscript>
            </div>
            <div class="cpanel">
            <div class="thumbs-back"></div>                        
                <div class="thumbnails">
                    <ul>
<?php $sliders = $slideralbum->getSliderItems($website, NULL);
foreach($sliders as $slider){
?> 
                        <li effect="none">
                    <div>
                        <a href="<?php echo $slider->slider_img; ?>" height="360" width="720" alt="<?php echo $slider->slider_img; ?>" />
                        <img src="<?php echo $slider->slider_tmb; ?>" height="70" width="125" alt="<?php echo $slider->slider_tmb; ?>" />
                        </a>
                    </div>
                    <div class="data">    
                    </div>
                        </li>
<?php
}
?>  
                    </ul>
                </div>          
            <div class="thumbs-fwd"></div>
        </div>
    </div>  
</div>
</div>
</body>
</html> 
```

函数.php

```
<?php
//**************************************
//     Page load dropdown results     //
//**************************************
function getTierOne()
{
    $result = mysql_query("SELECT DISTINCT make FROM vehicles ORDER BY make ASC") 
    or die(mysql_error());

      while($tier = mysql_fetch_array( $result )) 

        {
?>
<option value="<?php echo $tier['make'];?>"<?php echo (isset($_POST['drop_1']) && $_POST['drop_1'] == $tier['make']) ? ' selected="selected"' : '' ; ?>><?php echo $tier['make'];?></option>
<?php

        }

}

//**************************************
//     First selection results     //
//**************************************
if (isset($_GET['func'])&& $_GET['func'] == "drop_1" ) {
drop_1($_GET['drop_var']);
}

function drop_1($drop_var)
{  
    include_once('db.php');
    $result = mysql_query("SELECT DISTINCT model FROM vehicles WHERE make='$drop_var' ORDER BY model") 
    or die(mysql_error());

    echo '<select name="drop_2" id="drop_2">
          <option value=" " disabled="disabled" selected="selected">Selecteer Model</option>';

           while($drop_2 = mysql_fetch_array( $result )) 
            {
              echo '<option value="'.$drop_2['model'].'">'.$drop_2['model'].'</option>';
            }

    echo '</select>';
    echo "<script type=\"text/javascript\">
$('#wait_2').hide();
    $('#drop_2').change(function(){
      $('#wait_2').show();
      $('#result_2').hide();
      $.get(\"func.php\", {
        func: \"drop_2\",
        drop_var: $('#drop_1').val(),
        drop_var2: $('#drop_2').val()
      }, function(response){
        $('#result_2').fadeOut();
        setTimeout(\"finishAjax_tier_three('result_2', '\"+escape(response)+\"')\", 400);
      });
        return false;
    });
</script>";
}

//**************************************
//     Second selection results     //
//**************************************
if (isset($_GET['func'])&& $_GET['func'] == "drop_2" ) {
drop_2($_GET['drop_var'], $_GET['drop_var2']);
}

function drop_2($drop_var, $drop_var2)
{  
    include_once('db.php');
    $result = mysql_query("SELECT DISTINCT year FROM vehicles WHERE make='$drop_var' AND model='$drop_var2'") 
    or die(mysql_error());

    echo '<select name="drop_3" id="drop_3">
          <option value=" " disabled="disabled" selected="selected">Selecteer Jaar</option>';

           while($drop_3 = mysql_fetch_array( $result )) 
            {
              echo '<option value="'.$drop_3['year'].'">'.$drop_3['year'].'</option>';
            }

    echo '</select>';
    echo "<script type=\"text/javascript\">
$('#wait_3').hide();
    $('#drop_3').change(function(){
      $('#wait_3').show();
      $('#result_3').hide();
      $.get(\"func.php\", {
        func: \"drop_3\",
        drop_var: $('#drop_1').val(),
        drop_var2: $('#drop_2').val(),
        drop_var3: $('#drop_3').val()
      }, function(response){
        $('#result_3').fadeOut();
        setTimeout(\"finishAjax_tier_four('result_3', '\"+escape(response)+\"')\", 400);
      });
        return false;
    });
</script>";
}

//**************************************
//     Third selection results     //
//**************************************
if (isset($_GET['func'])&& $_GET['func'] == "drop_3" ) {
drop_3($_GET['drop_var'], $_GET['drop_var2'], $_GET['drop_var3']);
}

function drop_3($drop_var, $drop_var2, $drop_var3)
{  
    include_once('db.php');
        $result = mysql_query("SELECT DISTINCT color FROM vehicles WHERE make='$drop_var' AND model='$drop_var2' AND year='$drop_var3'") 
    or die(mysql_error());  

    echo '<select name="drop_4" id="drop_4">
          <option value=" " disabled="disabled" selected="selected">Selecteer Kleur</option>';

           while($drop_4 = mysql_fetch_array( $result )) 
            {
                if ($drop_4['color'] != "") {
              echo '<option value="'.$drop_4['color'].'">'.$drop_4['color'].'</option>';
                }
            }

    echo '</select>';
    echo "<script type=\"text/javascript\">
$('#wait_4').hide();
    $('#drop_4').change(function(){
      $('#wait_4').show();
      $('#result_4').hide();
      $.get(\"func.php\", {
        func: \"drop_4\",
        drop_var: $('#drop_1').val(),
        drop_var2: $('#drop_2').val(),
        drop_var3: $('#drop_3').val(),
        drop_var4: $('#drop_4').val()
      }, function(response){
        $('#result_4').fadeOut();
        setTimeout(\"finishAjax_tier_five('result_4', '\"+escape(response)+\"')\", 400);
      });
        return false;
    });
</script>";
}

//**************************************
//     Fourth selection results     //
//**************************************
if(isset($_GET['func'])&& $_GET['func'] == "drop_4" ) {
drop_4($_GET['drop_var'], $_GET['drop_var2'], $_GET['drop_var3'], $_GET['drop_var4']);
}
function drop_4($drop_var, $drop_var2, $drop_var3, $drop_var4)
{  
    include_once('db.php');
        $result = mysql_query("SELECT * FROM vehicles WHERE make='$drop_var' AND model='$drop_var2' AND year='$drop_var3' AND color='$drop_var4'") 
    or die(mysql_error());  

           while($drop_5 = mysql_fetch_array( $result )) 
                {
                if ($drop_5['img'] != "") {
              echo '<input type="checkbox" name="drop_5" id="drop_5" style="display:none;" checked value="'.$drop_5['img'].'"/>';

                }
  }
    echo '<input type="submit" name="submit" value="Submit" />';
}

?> 
```

在我选择了所有下拉项目并按提交后，它运行良好，但所有选定的值都消失了......

如果你想改变颜色，你必须再次进入整个下拉列表。提交后是否可以保留所有选定的值？

提前致谢

亲切的问候

乔普

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:10:44.303

您正在使用 GET 请求依次显示每个下拉列表，然后使用 POST 请求提交完成的表单。您应该确保在 POST 请求之后显示所有下拉列表。

在 index.php 中，我认为您可以尝试类似的方法：

```
<span id="result_1" style="display: none;">
    <?php
        if (isset($_POST['submit']) {
            drop_1($_POST['drop_1']);
        }
    ?>
</span>

...

<span id="result_2" style="display: none;">
    <?php
        if (isset($_POST['submit']) {
            drop_2($_POST['drop_1'], $_POST['drop_2']);
        }
    ?>
</span>

...

<span id="result_3" style="display: none;">
    <?php
        if (isset($_POST['submit']) {
            drop_3($_POST['drop_1'], $_POST['drop_2'], $_POST['drop_3']);
        }
    ?>
</span>

etc... 
```

无论如何，我们的想法是根据`$_POST`.

# javascript - WebSocket/Web RTC 是否适合下载许多小文件而不是大量的 GET？

> ID：15569569
> 
> 赞同：0
> 
> 时间：2013-03-22T11:47:47.387
> 
> 标签：javascript, http, websocket, webrtc

我正在制作一个 JavaScript Web 应用程序，它必须从服务器上提取数百个 JSON 片段，并且担心来自如此多的 HTTP GET 的影响。没有机会连接片段（以便拥有一个 GET），因为服务器/客户端在运行时之前并不知道需要 GET 哪些片段。

问题是：使用 WebSocket 或 Web RTC 之类的东西作为传输，客户端向套接字发送请求，服务器根据请求抓取每个文件并将其发送回套接字，这会很疯狂吗？

假设服务器在加载文件时足够快，这将比 HTTP 响应更快，对吧？

我想我失去了缓存，但我可以忍受。

# algorithm - 基数排序是否适用于具有不同位数的数字？

> ID：15569571
> 
> 赞同：3
> 
> 时间：2013-03-22T11:47:56.160
> 
> 标签：algorithm, sorting, radix-sort

我知道基数排序通过比较数字的数字来工作。我的问题是，假设我们有不同位数的不同数字。基数排序在这里工作吗？我们可以简单地假设，例如，如果我们比较两个数字，一个是 3 位数字，一个是 6 位数字，较小数字的前 3 位是 0。但是如何实现呢？我们如何让程序假设如果没有足够的数字，那么这些数字为零？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T11:57:34.547

您需要以某种方式添加或模拟那些不存在的数字或将数字分组排序，每个数字仅包含相同长度的数字。

这3个数字

```
9912
 999
 123 
```

可以转化为

```
9912
0999
0123 
```

并使用常规基数排序进行排序，或者可以将它们排序为 2 个独立的组：

```
9912 
```

和

```
 999
 123 
```

后者会给你（假设升序）

```
 123
 999 
```

前者保持不变。然后组合排序后的组（从较短的数字到较长的数字）：

```
 123
 999
9912 
```

就这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T12:10:33.480

假设您有一个整数变量中的数字，那么您可以像这样提取数字（n = 0, 1, 2, ...）：

```
digit = (number / radix ^ n) % radix 
```

# javascript - 允许输入最多 3 位小数

> ID：15569572
> 
> 赞同：0
> 
> 时间：2013-03-22T11:48:00.967
> 
> 标签：javascript, jquery

我想在文本框中只允许整数和浮点数（最多 3 位小数），如何使用 javascript 实现这一点？

**有效**值为

```
1234
12.3
12.314
1.11
0.4 
```

**无效**

```
1.23456
abcd or any other character 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T12:25:08.833

根据您还需要匹配的注释，您需要`".1"`在正则表达式的第一部分添加条件。

```
var re = /^(\d+)?(?:\.\d{1,3})?$/; 
```

[粗略的测试套件 - jSFiddle](http://jsfiddle.net/aNZAx/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:55:11.820

You can use a regular expression to do this:

```
/^\d+(?:\.\d{1,3})?$/ 
```

That's the start of the string (`^`), one or more digits (`\d+`), optionally followed by a `.` and between 1 and 3 digits (`(?:\.\d{1,3})`), then the end of the string (`$`).

To compare it to the value of an input, you'd do something like this:

```
var re = /^\d+(?:\.\d{1,3})?$/;
var testValue = document.getElementById('id-of-input').value;
if(re.test(testValue)) {
    // matches - input is valid
}
else {
    // doesn't match - input is invalid
} 
```

Take a look at [this jsFiddle demo](http://jsfiddle.net/37eh7/).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T11:58:11.967

尝试这个：

```
var reg=/^[\d]+(?:\.\d{1,3})?$/;
str=10.2305;
str1=123;
alert(reg.test(str));
alert(reg.test(str1)); 
```

检查**小提琴** [http://jsfiddle.net/8mURL/1](http://jsfiddle.net/8mURL/1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T11:49:56.900

使用正则表达式验证您的输入字段，正则 rexpression 如下

```
^[0-9]+(?:\.[0-9]{1,3})?$ 
```

# java - 从 java 存储过程中将 String[] 转换为 ORA_MINING_VARCHAR2_NT

> ID：15569575
> 
> 赞同：1
> 
> 时间：2013-03-22T11:48:08.750
> 
> 标签：java, arrays, oracle, stored-procedures, type-conversion

我可以将 String[] 从存储过程转换为“ORA_MINING_VARCHAR2_NT”作为返回值吗？VARRAY 不是一个选项（我有可变数量的元素）

我总是得到一个错误：

```
ORA-00932: inconsistent datatypes: expected a return value that is an instance of a user defined Java class convertible to an Oracle type got an object that could not be converted 
```

在这段代码中：

```
CREATE OR REPLACE AND COMPILE JAVA SOURCE NAMED Parser AS
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
import oracle.sql.ARRAY;
import oracle.sql.ArrayDescriptor;

public class Parser {

    public static oracle.sql.ARRAY parseToArray(String str, String delim) throws SQLException {
        Connection conn = DriverManager.getConnection("jdbc:default:connection");
        ArrayDescriptor descriptor = ArrayDescriptor.createDescriptor("ORA_MINING_VARCHAR2_NT", conn);
        ARRAY result = new ARRAY(descriptor, conn, str.split(delim));
        return result;
    }
}
/
CREATE OR REPLACE FUNCTION
PARSETOARRAY (str IN VARCHAR2, delim IN VARCHAR2) 
RETURN ORA_MINING_VARCHAR2_NT AS
LANGUAGE JAVA NAME 'Parser.parseToArray (java.lang.String, java.lang.String) return oracle.sql.ARRAY';
/
DECLARE
v_array ORA_MINING_VARCHAR2_NT;
BEGIN
  FOR testing IN (SELECT record FROM interfacelog) LOOP
    v_array := PARSETOARRAY(testing.record, '|'); 
    -- do smth
  END LOOP;
END; 
```

谢谢！

ps 对不起我糟糕的英语

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T14:00:54.590

我解决了。它与其他一些类一起工作正常：

```
create or replace type stringArray is table of varchar2(4000);
/
CREATE OR REPLACE AND COMPILE JAVA SOURCE NAMED Parser AS
import java.sql.Connection;
import oracle.jdbc.OracleDriver;
import oracle.jdbc.OracleConnection;
import java.sql.DriverManager;
import java.sql.SQLException;
import java.sql.Array;

public class Parser {

    public static Array parseToArray(String str, String delim) throws SQLException {
        OracleDriver ora = new oracle.jdbc.OracleDriver();
        Connection conn = ora.defaultConnection();
        OracleConnection oraConn = (OracleConnection)conn;
        Array arr = oraConn.createARRAY("STRINGARRAY", str.split(delim));
        return arr;
    }
}
/
CREATE OR REPLACE FUNCTION
PARSETOARRAY (str IN VARCHAR2, delim IN VARCHAR2) 
RETURN STRINGARRAY AS
LANGUAGE JAVA NAME 'Parser.parseToArray (java.lang.String, java.lang.String) return java.sql.Array';
/
DECLARE
v_array STRINGARRAY;
BEGIN
  FOR testing IN (SELECT record FROM interfacelog) LOOP
    v_array := PARSETOARRAY(testing.record, '|'); 
  END LOOP;
END; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T12:02:36.797

`createDescriptor`始终为作为参数传递的类型指定架构名称。

# javascript - yeoman：使用 yo webapp，然后添加主干和主干.layoutmanager

> ID：15569577
> 
> 赞同：4
> 
> 时间：2013-03-22T11:48:18.603
> 
> 标签：javascript, backbone.js, requirejs, yeoman, bower

我使用 yeoman webapp generator 插件成功安装了一个 webapp。

我想将主干和主干.layoutmanager 添加到组合中。

但是当我尝试运行时出现诸如[https://github.com/isaacs/npm/issues/3275](https://github.com/isaacs/npm/issues/3275)`npm install && bower install`之类的错误。

这是我当前的 main.js

```
require.config({
    paths: {
        jquery: '../components/jquery/jquery',
        backbone: '../../node_modules/backbone/backbone',
        underscore: "../components/underscore/underscore",
        layoutmanager: "../../node_modules/backbone.layoutmanager/backbone.layoutmanager",
        bootstrap: 'vendor/bootstrap'
    },
    shim: {
        bootstrap: {
            deps: ['jquery', 'underscore'],
            exports: 'Backbone'
        },
        layoutmanager: {
            deps: ["backbone"],
            exports: "Backbone.Layout"
        }
    },

});

require(['app', 'jquery', 'bootstrap'], function (app, $) {
    'use strict';
    // use app here
    console.log(app);
    console.log('Running jQuery %s', $().jquery);
}); 
```

我当前的 component.json

```
{
  "name": "learnbackbonelayoutmanager",
  "version": "0.0.0",
  "dependencies": {
    "sass-bootstrap": "~2.3.0",
    "requirejs": "~2.1.4",
    "modernizr": "~2.6.2",
    "jquery": "~1.9.1"
  },
  "devDependencies": {}
} 
```

我当前的 package.json

```
{
  "name": "learnbackbonelayoutmanager",
  "version": "0.0.0",
  "dependencies": {},
  "devDependencies": {
    "grunt": "~0.4.0",
    "grunt-contrib-copy": "~0.4.0",
    "grunt-contrib-concat": "~0.1.2",
    "grunt-contrib-coffee": "~0.4.0",
    "grunt-contrib-uglify": "~0.1.1",
    "grunt-contrib-compass": "~0.1.2",
    "grunt-contrib-jshint": "~0.1.1",
    "grunt-contrib-cssmin": "~0.4.1",
    "grunt-contrib-connect": "0.1.2",
    "grunt-contrib-clean": "0.4.0",
    "grunt-contrib-htmlmin": "0.1.1",
    "grunt-contrib-imagemin": "0.1.2",
    "grunt-contrib-livereload": "0.1.1",
    "grunt-bower-hooks": "~0.2.0",
    "grunt-usemin": "~0.1.9",
    "grunt-regarde": "~0.1.1",
    "grunt-requirejs": "~0.3.2",
    "grunt-mocha": "~0.2.2",
    "grunt-open": "~0.2.0",
    "matchdep": "~0.1.1"
  },
  "engines": {
    "node": ">=0.8.0"
  }
} 
```

**如何设置由定义的 webapp 默认值`yo webapp`并仍然添加 Backbone 和 Backbone.LayoutManager ？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T11:38:13.793

您似乎已经通过`npm`. 如果您想将这些用作前端组件，您应该通过以下方式安装它们`bower`：

```
bower install --save backbone layoutmanager 
```

之后，`main.js`像这样调整路径：

```
require.config({
    paths: {
        jquery: '../components/jquery/jquery',
        backbone: '../../components/backbone/backbone',
        underscore: '../components/underscore/underscore',
        layoutmanager: '../components/backbone.layoutmanager/backbone.layoutmanager',
        bootstrap: 'vendor/bootstrap'
    },
    shim: {
        bootstrap: {
            deps: ['jquery', 'underscore'],
            exports: 'Backbone'
        },
        layoutmanager: {
            deps: ['backbone'],
            exports: 'Backbone.Layout'
        }
    },

});

require(['app', 'jquery', 'bootstrap'], function (app, $) {
    'use strict';
    // use app here
    console.log(app);
    console.log('Running jQuery %s', $().jquery);
}); 
```

# ios - 使用 Storyboard 和 SASlideMenu 保存（存储）视图控制器内容

> ID：15569578
> 
> 赞同：1
> 
> 时间：2013-03-22T11:48:19.593
> 
> 标签：ios, uitableview, uistoryboard, uistoryboardsegue, saslidemenu

我正在使用[SASlideMenu](https://github.com/stefanoa/SASlideMenu)库在我的 iOS ARC 故事板应用程序中实现左滑动菜单。我添加了三个用`[self performSegueWithIdentifier:@"segueID" sender:self];`代码调用的视图控制器，滑动菜单工作正常，但每次它创建视图控制器的新实例时，我需要缓存每个控制器内容（例如，在视图控制器 1 中，我们有一个文本字段: 如果我写一个词，换VC后我必须再次找到相同的词！）。这是通用的故事板：

![在此处输入图像描述](../Images/9a7c9cf94bd2001e1dc2fe6ea6ccf894.png)

这是我的 UITableView 委托，在 SASlideMenuViewController 中：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:
                 UITableViewCellStyleSubtitle reuseIdentifier:@"Cell"];
    }

    if (indexPath.row == 0) {
        cell.textLabel.text = @"ViewController 1";
    }
    if (indexPath.row == 1) {
        cell.textLabel.text = @"ViewController 2";
    }
    if (indexPath.row == 2) {
        cell.textLabel.text = @"ViewController 3";
    }

    cell.textLabel.font = [UIFont systemFontOfSize:14];
    cell.textLabel.textColor = [UIColor blackColor];
    cell.imageView.image = [UIImage imageNamed:@"image.png"];

    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

    if(indexPath.row==0)
    {
        [self performSegueWithIdentifier:@"segueID1" sender:self]; // I NEED TO RETRIEVE SAME VIEW CONTROLLER 1 CONTENT AFTER ANOTHER VIEW CONTROLLER CALL!
    }

    if(indexPath.row==1)
    {
        //[self performSegueWithIdentifier:@"segueID2" sender:nil]; // I NEED TO RETRIEVE SAME VIEW CONTROLLER 2 CONTENT AFTER ANOTHER VIEW CONTROLLER CALL!
    }

    if(indexPath.row==2)
    {
        //[self performSegueWithIdentifier:@"segueID3" sender:nil]; // I NEED TO RETRIEVE SAME VIEW CONTROLLER 3 CONTENT AFTER ANOTHER VIEW CONTROLLER CALL!
    }

    [tableView deselectRowAtIndexPath:indexPath animated:YES];
} 
```

这是应用程序中幻灯片菜单的屏幕截图：

![在此处输入图像描述](../Images/0c331922ae9303c48e1bc88772c3401b.png)

在作者教程中，我可以阅读：“*如果您使用动态单元格原型或使用静态单元格并且**您想要缓存内容视图控制器**，请分配一个标识符，该标识符将在**segueIdForIndexPath:**链接到所需 indexPath 的方法*中返回”但我正在失去理智，我无法得到准确的观点..你能提供**准确的代码**来解决这个问题吗？还有一些东西要补充，但在哪里？我需要重现这种情况：每次我从左侧菜单中调用视图控制器时，我都必须检索它，就像我在另一个之前的 VC 调用之前离开时一样。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T13:00:11.740

为了让您的代码正常工作，您需要实现*SASlideMenuDataSource*协议的两种方法，并且您必须初始化*ViewController的**datasource*属性。此外，您必须避免直接调用*performSegueWithIdentifier*并且应该避免实现*tableView:didSelectRowAtIndexPath:*方法，否则缓存将不起作用。

 ***第一个实现的方法是*configureMenuButton:*。您需要它，因为您需要滑入内容 ViewController 中的菜单按钮。一种可能性是复制示例项目中提供的图标并将它们添加到您的项目中：

```
-(void) configureMenuButton:(UIButton *)menuButton{
    menuButton.frame = CGRectMake(0, 0, 40, 29);
    [menuButton setImage:[UIImage imageNamed:@"menuicon.png"] forState:UIControlStateNormal];
    [menuButton setBackgroundImage:[UIImage imageNamed:@"menu.png"] forState:UIControlStateNormal];
    [menuButton setBackgroundImage:[UIImage imageNamed:@"menuhighlighted.png"] forState:UIControlStateHighlighted];
    [menuButton setAdjustsImageWhenHighlighted:NO];
    [menuButton setAdjustsImageWhenDisabled:NO];
} 
```

比你需要实现*segueIdForIndexPath:*。该方法返回与菜单行的 indexPath 关联的 segueId，看你的代码应该是这样的：

```
-(NSString*) segueIdForIndexPath:(NSIndexPath *)indexPath{
    if(indexPath.row==0){
        return @"vista1";
    } else if (indexPath.row==1){
        return @"vista2";
    }else if(indexPath.row==2){
        return @"vista3";
    }
    return @"vista1";
} 
```

最后，您必须正确初始化*ViewController的**dataSource*属性：

 *```
-(id) initWithCoder:(NSCoder *)aDecoder{
    if (self = [super initWithCoder:aDecoder]) {
        self.slideMenuDataSource = self;
    }
    return self;
} 
```

我希望你会发现答案很有用。****

# git - 推送到服务器后执行自动拉取请求

> ID：15569581
> 
> 赞同：5
> 
> 时间：2013-03-22T11:48:25.483
> 
> 标签：git, hook, gitlab

我已经在 vps 服务器上安装了 gitlab，这也是我提交本地更改的远程服务器。

当我提交并推送到服务器（git@domain.com:root/project.git）时，代码将被更新。

在我的 vps 上，我有这个工作流程：

```
- var/www/
    - project (created through git clone git@domain.com:root/project.git)
        - Files within the project 
```

当我推送到服务器时，我想让服务器自动从 gitlab 中提取更改。我也尝试了更新后挂钩，但这不起作用。

我必须创建一个裸仓库吗？还是我忘记了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T12:22:18.590

project.git*是*一个裸仓库，所以如果你可以访问 gitlab 服务器，你可以去`~git/repositories/root/project.git/hooks`添加你的`post-receive`钩子来强制部署。

例如，请参阅“[通过 git/gitolite 权限错误部署网站/webapp](https://stackoverflow.com/a/15411542/6309) ”中的示例。

# c - 在 C 程序中使用 Valgrind

> ID：15569582
> 
> 赞同：1
> 
> 时间：2013-03-22T11:48:25.960
> 
> 标签：c, ubuntu, valgrind

我只是使用 valgrind 的初学者。我已将 ubuntu 作为 vmWare 的一部分打开，我刚刚制作了应该显示 valgrind 错误的 ac 程序，并在 a.out 上运行了 valgrind，但我看不到这条线输出中可见的数字：使用的命令是：

```
valgrind --leak-check=full --track-origins=yes ./a.out 
```

对于 C 程序如下所示：

```
 #include <stdlib.h>

  #define ARRAY_SIZE      (5)

  typedef char TEST_TYPE;

  void invalid_write(TEST_TYPE* array, int size)
  {
     array[size] = 5;
  }

 int main(void)
 {
    TEST_TYPE static_array[ARRAY_SIZE];
    TEST_TYPE* dynamic_array = NULL;
    TEST_TYPE* p = NULL;
    TEST_TYPE i;

    dynamic_array = (TEST_TYPE*)malloc(ARRAY_SIZE * sizeof(TEST_TYPE));
   /* ERROR 1 : Writing out of array boundaries (heap overrun) */
    invalid_write(dynamic_array, ARRAY_SIZE);
 } 
```

输出如下所示：

```
==6801== Memcheck, a memory error detector
==6801== Copyright (C) 2002-2011, and GNU GPL'd, by Julian Seward et al.
==6801== Using Valgrind-3.7.0 and LibVEX; rerun with -h for copyright info
==6801== Command: ./a.out
==6801== 
==6801== Invalid write of size 1
==6801==    at 0x80483ED: invalid_write (in /home/jci/a.out)
==6801==    by 0x804842E: main (in /home/jci/a.out)
==6801==  Address 0x419702d is 0 bytes after a block of size 5 alloc'd
==6801==    at 0x4026444: malloc (vg_replace_malloc.c:263)
==6801==    by 0x8048416: main (in /home/jci/a.out)
==6801== 
==6801== 
==6801== HEAP SUMMARY:
==6801==     in use at exit: 5 bytes in 1 blocks
==6801==   total heap usage: 1 allocs, 0 frees, 5 bytes allocated
==6801== 
==6801== 5 bytes in 1 blocks are definitely lost in loss record 1 of 1
==6801==    at 0x4026444: malloc (vg_replace_malloc.c:263)
==6801==    by 0x8048416: main (in /home/jci/a.out)
==6801== 
==6801== LEAK SUMMARY:
==6801==    definitely lost: 5 bytes in 1 blocks
==6801==    indirectly lost: 0 bytes in 0 blocks
==6801==      possibly lost: 0 bytes in 0 blocks
==6801==    still reachable: 0 bytes in 0 blocks
==6801==         suppressed: 0 bytes in 0 blocks
==6801== 
==6801== For counts of detected and suppressed errors, rerun with: -v
==6801== ERROR SUMMARY: 2 errors from 2 contexts (suppressed: 11 from 6) 
```

我应该如何获得这些错误的行号，以便我们可以准确地指出问题？目前使用的 valgrind 版本是 3.7.0。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T11:53:29.530

您需要使用调试信息构建程序，对于 gcc，您应该能够执行以下操作：

```
gcc -g -O0 -Wall sourcefile.c 
```

Valgrind 然后会显示你的源代码中的行号和函数名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:56:11.673

为此，您可以使用 addr2line 工具。

```
addr2line --exe a.out 8048416 
```

我假设您`-g`在构建对象时使用了标志：

```
gcc -c -g my_source1.c -o mysource1.o
gcc -c -g my_source2.c -o mysource2.o
gcc mysource1.o mysource2.o -o myapp 
```

或者：

```
gcc -g my_source1.c my_source2.c -o myapp 
```

# android - 移动网站的响应式缩放以具有完整的手机宽度

> ID：15569585
> 
> 赞同：3
> 
> 时间：2013-03-22T11:48:31.890
> 
> 标签：android, iphone, mobile, responsive-design, media-queries

假设身体中的所有元素都可以拉伸到 100% - 除了做这样的事情：

```
body {
     overflow-x:hidden;
     width:320px;
}

@media all and (min-width: 360px) {
    body {
        width:360px;
    }
}

@media all and (min-width: 369px) {
    body {
        width:369px;
    }
}

@media all and (min-width: 480px) {
    body {
        width:480px;
    }
}

@media all and (min-width: 533px) {
    body {
        width:533px;
    }
}

@media all and (min-width: 569px) {
    body {
        width:569px;
    }
}

@media all and (min-width: 640px) {
    body {
        width:640px;
    }
} 
```

有没有比上述更好/更少硬编码的方法？

此外，关于在移动设备中使用此功能的看法不一：

```
<meta content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport"> 
```

阅读纵向和横向之间的初始比例（错误）已在 iOS 6 for iPad 中修复，因此不再需要上述内容......

但我是否可以假设新旧 iPhone 以及 Android 和三星的其他移动设备仍然需要这个功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T07:00:07.883

发现了问题。**网站全宽不需要**所有媒体查询（尽管这是一个涵盖大多数设备的相当广泛的列表）。

正如我最初计划的那样，以下内容就足够了（overflow-x 只是保险）：

```
body {
     overflow-x:hidden;
     width:100%;
} 
```

但是我有一个第二级导航元素，位置：绝对，左：100％和宽度：100％，这会扭曲手机上的实际网站宽度（导致网站非常宽，可能与手机的分辨率一样宽） .

一旦元素的左侧位置仅由 JavaScript 设置（而不是在初始网站加载时由手机读取），问题就解决了。

经验教训是注意移动设备上的绝对位置元素，即使溢出隐藏，这些可能会扭曲手机识别的实际站点宽度。

我还必须包括手机的元视口......虽然也被广泛接受为 iPad 网站缩放的答案，但让 width=device-width 和初始比例实际上搞砸了我在 iPad 上的纵向-横向-纵向之间的网站缩放（最新的操作系统）。

没有它意味着缩放工作完美！需要在 iPhone（最新操作系统）上进行测试，以确定它的行为是否与 iPad 相似（其中方向错误是要修复的）。

```
<meta name="viewport" content=""/>
<script>
if (!navigator.userAgent.match(/iPad/i)) {
    var viewportmeta = document.querySelector('meta[name="viewport"]');
    if (viewportmeta) {
        viewportmeta.content = 'width=device-width, initial-scale=1';
    }
}
</script> 
```

# python - HTTP 1.1 期望报头握手

> ID：15569589
> 
> 赞同：2
> 
> 时间：2013-03-22T11:48:41.153
> 
> 标签：python, http

根据[http://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html#sec8.2.3](http://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html#sec8.2.3)客户端必须等待 100（继续）状态，然后才能进行 POST（在需要此标头的 HTTP 1.1 服务器上）。

我不明白 Python 怎么能做到这一点。例如：

```
conn = httplib.HTTPConnection(url)
conn.putrequest('POST', page)
conn.putheader(...)
conn.putheader('Expect', '100-continue')
conn.endheaders() 
```

现在，我看不到其他选项然后发送数据：

```
conn.send(data) 
```

在这种情况下，当我要求回复时出现错误：

```
error: [Errno 10053] An established connection was aborted by the software in your host machine 
```

我怎样才能要求状态 100，以便我可以发送数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T12:33:14.573

我认为不`httplib`支持这一点（非常好）；[请参阅此请求票](https://github.com/kennethreitz/requests/issues/713)中的讨论，特别是

> 并且可以以破坏 httplib 的方式提前关闭套接字

该评论的作者 Augie Fackler (durin42) 也提到了他自己的[`httpplus`图书馆](https://code.google.com/p/httpplus/)。

快速浏览一下[源代码](https://code.google.com/p/httpplus/source/browse/httpplus/__init__.py#210)表明*它*确实可以`Expect: 100-Continue`正确处理：

```
# handle 100-continue response
hdrs, body = self.raw_response.split(self._end_headers, 1)
http_ver, status = hdrs.split(' ', 1)
if status.startswith('100'):
    self.raw_response = body
    self.continued = True
    logger.debug('continue seen, setting body to %r', body)
    return 
```

# c# - BuildManager.CreateInstanceFromVirtualPath 返回空值

> ID：15569594
> 
> 赞同：0
> 
> 时间：2013-03-22T11:49:07.270
> 
> 标签：c#, asp.net

为什么**显示**的值为空

```
 public IHttpHandler GetHttpHandler(RequestContext requestContext)
{
    var display = BuildManager.CreateInstanceFromVirtualPath(
                    _virtualPath, typeof(Page)) as IDisplay;
    return display;
} 
```

_virtualPath 的值是字符串类型的 '~/RegisterUser.aspx'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-12T18:36:39.587

在您的页面代码隐藏继承自 IDisplay 示例：

```
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class secondpage: System.Web.UI.Page, **IDisplay**     <--------------------
{
    protected void Page_Load(object sender, EventArgs e)
    {

    } 
} 
```

# ruby-on-rails - 控制器是在常量之后加载的？

> ID：15569597
> 
> 赞同：0
> 
> 时间：2013-03-22T11:49:14.150
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我想在 UsersHelper 中保持不变：

```
CONSTANT_CONTROLLER =  [["Configuration", MerchantsController], ["System", SystemStatusController]] 
```

但由于我使用的是 AuthenticatedSystem 服务器失败：

```
undefined method `requires_role' for MerchantsController:Class 
```

我试图包括 AuthenticatedSystem 但它没有奏效。当我有方法时：

```
def controller_display_name_to_real_name
    [["Configuration", MerchantsController], ["System", SystemStatusController]]
end 
```

一切都好。我猜想在未加载控制器时会提前加载常量。这是正确的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:26:39.123

尝试如下

```
Controller.constantize 
```

您必须[恒定化](http://api.rubyonrails.org/classes/ActiveSupport/Inflector.html#method-i-constantize)您的控制器名称。

# java - 无法解析 DateFormat.FULL 中的日期

> ID：15569599
> 
> 赞同：2
> 
> 时间：2013-03-22T11:49:16.583
> 
> 标签：java, date-format

如何解析像“Sun Feb 24 09:34:20 IST 2013”​​这样的日期字符串。知道为什么解析完整日期格式会失败吗？

```
DateFormat fullDf = DateFormat.getDateInstance(DateFormat.FULL);
String str = fullDf.format("Sun Feb 24 09:34:20 IST 2013");
System.out.println(str); 
```

例外是：

```
java.lang.IllegalArgumentException: Cannot format given Object as a Date 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T11:53:52.150

```
DateFormat fullDf = DateFormat.getDateInstance(DateFormat.FULL);
String str = fullDf.format(dt); 
System.out.println(str); 
```

我认为那个问题是`format(dt.toString())`

`DateFormat`仅适用于日期值。很久以前我也遇到过类似的问题。始终检查[参考](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/DateFormat.html)。

## 更新：

正如线程的作者提到的：

**伪代码：**

```
DateFormat inFormatter = new SimpleDateFormat(<pattern>);
DateFormat outFormatter = new SimpleDateFormat(<pattern>);

String source; // parsed text from file
Date dt = inFormatter.parse(source);
String output = outFormatter.format(dt); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:59:51.773

您不能使用`DateFormat`该类格式化字符串。请改用日期对象。

代替

`String str = fullDf.format(dt.toString());`

和

`String str = fullDf.format(dt);`

它会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T11:56:02.723

请换行

```
 String str = fullDf.format(dt.toString()) 
```

至

```
 String str = fullDf.format(dt); 
```

处理对象比处理它的 toString() 更好，因为默认的 toString() 可能返回与预期完全不同的值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T11:57:23.827

DateFormat 的格式函数可以接收对象，但是这些对象必须是数字或日期。

所以只有`String str = fullDf.format(dt);`工作和`String str = fullDf.format(now - dateOffset);`工作。

# sql - oracle sqlplus中日期的比较

> ID：15569601
> 
> 赞同：-1
> 
> 时间：2013-03-22T11:49:24.180
> 
> 标签：sql, oracle, join

```
SET TERMOUT ON

DROP VIEW BP_VIEW;  
CREATE VIEW BP_VIEW AS
SELECT b.BOOKINGID, 
       g.GUESTID,   
       g.FORENAME, g.SURNAME, 
       br.FLOORNO, br.ROOMNO, 
       r.TYPE, 
       b.TOTALPRICE + (rt.RATE*(b.DEPARTDATE - b.ARRIVEDATE)) AS TOTAL_AMOUNT_DUE
FROM   GUEST g, ROOM r
INNER JOIN BOOKING b ON b.BOOKINGID = GUESTID
INNER JOIN BOOKINGROOM br ON b.BOOKINGID = br.BOOKINGID AND r.FLOORNO = br.FLOORNO AND r.ROOMNO = br.ROOMNO
INNER JOIN ROOMTYPE rt ON rt.TYPE = r.TYPE
WHERE (CURRENT_DATE BETWEEN b.ARRIVEDATE AND b.DEPARTDATE);

SELECT * FROM BP_VIEW;

COMMIT;

SET TERMOUT ON 
```

大家好，

我正在尝试执行上面的代码，它执行得很好，但它正在选择更新某些不属于 b.ARRIVEDATE 和 b.DEPARTDATE 之间的 CURRENT_DATE 类别的预订。

通过此声明，我试图查找当前而非过去预订的预订信息。

当代码执行时，结果不是我所期望的。我是否正确完成了 AND 部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:24:53.567

我建议在双方都添加一个 trunc() 以从日期中删除时间部分，除非您想比较日期和时间。此外，可以使用 BETWEEN 运算符并且更具可读性...T：

```
WHERE trunc(CURRENT_DATE) >= trunc(b.ARRIVEDATE) AND trunc(CURRENT_DATE) <= trunc(b.DEPARTDATE) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:56:19.417

Oracle 的日期数据类型包括时间。这意味着：

```
where datefield between date1 and date2 
```

通常会错过 date2 发生的记录。这个更好：

```
where datefield >= date1
and datefield < date2 
```

# ruby-on-rails-3 - 使用 deface 修改 redmine 视图

> ID：15569605
> 
> 赞同：0
> 
> 时间：2013-03-22T11:49:46.320
> 
> 标签：ruby-on-rails-3, redmine-plugins, deface

我正在尝试使用插件将“私人问题”复选框“默认选中”。

我需要将以下检查添加到 redmine 默认视图

```
:checked => @issue.new_record? || @issue.is_private, 
```

默认视图是

```
<%= f.check_box :is_private, :no_label => true %> 
```

我如何利用 deface gem 来完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-23T06:50:58.663

我设法使用污损修补视图

1 您应该在 init.rb 中添加一些用于污损的补丁

来源：[https ://github.com/jbbarth/redmine_organizations/blob/master/init.rb#L3](https://github.com/jbbarth/redmine_organizations/blob/master/init.rb#L3)

```
Rails.application.paths["app/overrides"] ||= []
Rails.application.paths["app/overrides"] << File.expand_path("../app/overrides", __FILE__) 
```

2 在 YOUR_PLUGIN/app/overrides/issues/show.rb 中使用类似这样的代码创建一个覆盖

```
Deface::Override.new(
  :virtual_path => "issues/show",
  :name => "private_issue_check_box",
  :replace => CSS_SELECTOR_FOR_CHECK_BOX,
  :text => "<%= f.check_box :is_private, :no_label => true, :checked => @issue.new_record? || @issue.is_private %>",
  :disabled => false) 
```

# android - 我不能从 jar 文件中调用活动

> ID：15569620
> 
> 赞同：1
> 
> 时间：2013-03-22T11:50:54.153
> 
> 标签：android, jar, activitynotfoundexception

我有这种情况：我有一个包含 jar 文件的主项目（一个向主项目提供一些信息的辅助项目）。[我在本教程](http://androiddevelopement.blogspot.in/2011/01/creating-jar-file-in-eclipse.html)中创建了 jar 文件，然后将 jar 文件添加到 /libs 中的主项目中，然后将其添加到 Build Path 中。

当我从 jar 文件中调用活动时，出现致命异常

这是 logCat

```
03-22 12:47:09.509: D/AndroidRuntime(13341): Shutting down VM
03-22 12:47:09.509: W/dalvikvm(13341): threadid=1: thread exiting with uncaught exception (group=0x40018578)
03-22 12:47:09.529: E/AndroidRuntime(13341): FATAL EXCEPTION: main
03-22 12:47:09.529: E/AndroidRuntime(13341): android.content.ActivityNotFoundException: Unable to find explicit activity class {com.XXX.YYY/com.XXX.YYY.Subscription}; have you declared this activity in your AndroidManifest.xml?
03-22 12:47:09.529: E/AndroidRuntime(13341):    at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1405)
03-22 12:47:09.529: E/AndroidRuntime(13341):    at android.app.Instrumentation.execStartActivity(Instrumentation.java:1379)
03-22 12:47:09.529: E/AndroidRuntime(13341):    at android.app.Activity.startActivityForResult(Activity.java:2827)
03-22 12:47:09.529: E/AndroidRuntime(13341):    at com.example.principal.Principal$1.onClick(Principal.java:40)
03-22 12:47:09.529: E/AndroidRuntime(13341):    at android.view.View.performClick(View.java:2485)
03-22 12:47:09.529: E/AndroidRuntime(13341):    at android.view.View$PerformClick.run(View.java:9080)
03-22 12:47:09.529: E/AndroidRuntime(13341):    at android.os.Handler.handleCallback(Handler.java:587)
03-22 12:47:09.529: E/AndroidRuntime(13341):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-22 12:47:09.529: E/AndroidRuntime(13341):    at android.os.Looper.loop(Looper.java:130)
03-22 12:47:09.529: E/AndroidRuntime(13341):    at android.app.ActivityThread.main(ActivityThread.java:3687)
03-22 12:47:09.529: E/AndroidRuntime(13341):    at java.lang.reflect.Method.invokeNative(Native Method)
03-22 12:47:09.529: E/AndroidRuntime(13341):    at java.lang.reflect.Method.invoke(Method.java:507)
03-22 12:47:09.529: E/AndroidRuntime(13341):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
03-22 12:47:09.529: E/AndroidRuntime(13341):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
03-22 12:47:09.529: E/AndroidRuntime(13341):    at dalvik.system.NativeStart.main(Native Method) 
```

这就是我在主项目中调用活动的方式

```
final Intent intent = new Intent();

        Button juego1Btn = (Button) findViewById(R.id.juego1Btn);

        juego1Btn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                /*Intent intent = new Intent(getBaseContext(), Subscription.class);
                startActivity(intent);*/
                intent.setAction(Intent.ACTION_MAIN);
                intent.setClassName("com.XXX.YYY", "com.XXX.YYY.Subscription");
                intent.putExtra("code", codigo);
                intent.putExtra("keyword", keyword);
                startActivityForResult(intent, 1);
            }
        }); 
```

这是清单

```
<activity
            android:name="com.XXX.YYY.Subscription"
            android:label="@string/app_name">
</activity> 
```

关于为什么我有那个例外的任何想法？

非常感谢你！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:55:19.480

首先，如果`com.XXX.YYY.Subscription`要`com.telecoming.sms_payment.Subscription`相信您的代码，则需要。

其次，不要`Intent`以那种方式创建你的，因为你`<activity>`不声称支持`ACTION_MAIN`。将您的代码替换为：

```
 Button juego1Btn = (Button) findViewById(R.id.juego1Btn);

    juego1Btn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent intent = new Intent(WhateverYourActivityClassIsWhereYouAreRightNow.this, Subscription.class);
            intent.putExtra("code", codigo);
            intent.putExtra("keyword", keyword);
            startActivityForResult(intent, 1);
        }
    }); 
```

（替换为该代码所在`WhateverYourActivityClassIsWhereYouAreRightNow`的名称）`Activity`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T14:45:28.960

问题出在我创建库的方式上，通过一步一步地遵循这个教程，它工作正常[http://es.slideshare.net/ajdgeniz/como-hacer-un-archivo-jar-en-eclipse](http://es.slideshare.net/ajdgeniz/como-hacer-un-archivo-jar-en-eclipse)

谢谢大家

# android - 我们可以保存在 LinearLAyout 中动态添加的视图吗？

> ID：15569628
> 
> 赞同：0
> 
> 时间：2013-03-22T11:51:36.017
> 
> 标签：android, android-layout

我想知道我们可以将动态添加的视图保存在任何视图组或布局中吗？？？如果是那么如何保存？我在视图组中添加了一个图像视图，并想保存整个布局。这可能吗？请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:08:27.807

我想它可能会帮助你..

```
LinearLayout linear = (LinearLayout)findViewById(R.id.layout1);
linear.addView(yourviewid) 
```

# android - 使用特殊字符查询时返回所有结果的 SQLite（类似）查询

> ID：15569632
> 
> 赞同：0
> 
> 时间：2013-03-22T11:51:54.343
> 
> 标签：android, sql, database, sqlite

我有一个关于 android SQLite 的问题：我在一个表中有一组记录。我正在使用一些特殊字符查询记录，例如 {" , [ , ], *, &, ^, %, $, #}" 。它在游标中返回正确的结果。

当我使用特殊字符 { ' } （单引号）时，它会显示所有结果，而我的数据库中没有该字符的结果。我在 SQLita 工具中执行了相同的查询，它运行良好，但在我的程序中它返回了所有结果。为什么会这样？如何解决这个问题。请帮我解决这个问题。

代码在这里：

```
if( search_tag!=null && search_tag.length() > 0 )
        {
            query_filtered.append("("+DatabaseHelper.TABLE_DOCS.COL_TITLE+" like "+"'%"+search_tag+"%')");
        } 
```

查询在这里：

```
select 
    id as _id, category_array, title, 
    building_name, content_type_array, url, type_of_level 
from 
    documents_list 
where 
    (title like '%'%') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T12:43:35.817

在 SQL 字符串中，引号必须通过加倍来转义：

```
... WHERE title LIKE '%''%' 
```

为避免此类格式问题，您应该改用参数：

```
String title = "'";
db.query(..., "title LIKE ?", new String[] { "%" + title + "%" }, ...); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:55:04.073

This query is working fine for me

```
String select = "Select time from english_details where title = '"
                + title + "'"; 
```

So you can try like this

```
String select = "Select time from english_details where title = '%"
                + title + "%'"; 
```

# c# - 局部变量错误

> ID：15569634
> 
> 赞同：4
> 
> 时间：2013-03-22T11:51:58.627
> 
> 标签：c#, variables, scope

以下函数生成错误，“使用未分配的局部变量'intLast'。我不确定我做错了什么。

```
 static string RemovePath(string strInput)
    {

        int intLast;

        for (int i = 1; i < strInput.Length; i++)
        {
            if (strInput.Substring(i, 1) == @"\")
            {
                intLast = i;
            }
        }

        string strOutput = strInput.Substring(strInput.Length - intLast);

        return strOutput;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T11:55:13.317

您正在`intLast`以下行中使用变量：

```
string strOutput = strInput.Substring(strInput.Length - intLast); 
```

但是该变量只有在某些条件下才会有值（`strInput.Length > 1`和`strInput.Substring(i, 1) == @"\"`）。因此错误。

要解决此问题，请在声明中提供默认值：

`int intLast = 0; // or any default value.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:52:53.317

用一些值初始化`intLast`，因为循环不能确保分配值，因为循环的执行是在运行时决定的。

```
 int intLast = 0; 
```

以下几行要求未分配的变量，因为控制可能不会进入循环分配值。

```
string strOutput = strInput.Substring(strInput.Length - intLast); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T11:53:03.650

由于您仅在条件内部分配`intLast`，因此从编译器的角度来看，您可以在不初始化的情况下使用它。

即使您不希望使用它，您也应该在开始时将其初始化为某个默认值。

```
int intLast = 0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T11:53:17.833

您需要为`intLast`.

试试这个：

```
static string RemovePath(string strInput)
{
    int intLast = 0;

    for (int i = 1; i < strInput.Length; i++)
    {
        if (strInput.Substring(i, 1) == @"\")
        {
            intLast = i;
        }
    }

    string strOutput = strInput.Substring(strInput.Length - intLast);

    return strOutput;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T11:53:18.917

**只需编辑**：

```
int intLast = 0; 
```

**整个代码将如下所示：**

静态字符串 RemovePath(string strInput) { int intLast = 0;

```
 for (int i = 1; i < strInput.Length; i++)
    {
        if (strInput.Substring(i, 1) == @"\")
        {
            intLast = i;
        }
    }

    string strOutput = strInput.Substring(strInput.Length - intLast);

    return strOutput;
} 
```

您只需`intLast`最初分配为零。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-22T11:53:43.233

你应该*初始化*你的`intLast`变量。

编译器不知道`intLast`无论如何都会分配变量 like 。

```
 int intLast = 0; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-22T11:56:11.883

你应该初始化你的变量，比如

```
int intLast = 0; 
```

因为如果代码未达到 if 条件，它可能会保持未分配状态。

# youtube - highslide 关闭按钮在 ie 中不起作用

> ID：15569635
> 
> 赞同：0
> 
> 时间：2013-03-22T11:52:01.767
> 
> 标签：youtube, internet-explorer-9, highslide

嗨，我有一个问题，我找不到解决方案如果您知道/使用过 highslide 脚本，您就会知道这很神奇，但与往常一样，f* *** *g IE 必须让生活变得更加困难。

启动 IE9 并转到页面[http://highslide.com/examples/youtube.html](http://highslide.com/examples/youtube.html) 然后尝试打开和关闭视频，您会看到它不会关闭（ESC 按钮可以正常工作）。你必须不止一次这样做。问题只出现在IE9

有任何想法吗？

非常感谢，对不起我的英语:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T01:01:21.467

这是 IE9 中的一个已知问题；Flash 播放器抛出一个错误，不幸的是，这个 JavaScript 错误在我们第二次尝试关闭弹出窗口时以某种方式影响了 Highslide 关闭按钮。我们的开发人员无法找到此错误影响 Highslide 关闭按钮的原因。但是，您仍然可以使用 ESC 键关闭弹出窗口。

IE 9 的解决方法是在标题中添加一条消息，告诉 IE 9 用户使用 ESC 键关闭弹出窗口。演示页面：[http](http://roadrash.no/hs-support/youtube-with-alternative-close-method-for-ie9.html)

://roadrash.no/hs-support/youtube-with-alternative-close-method-for-ie9.html 在常规的 Highslide 设置之后添加此代码：

```
<!--[if IE 9]>
<script style="text/javascript">
    hs.captionText = 'Click the ESC key to close';
</script>
<style type="text/css">
.draggable-header .highslide-header ul {
    display: none;
}
.highslide-caption {
    font-style: italic;
    font-size: 11px !important;
    text-align: center;
}
</style>
<![endif]--> 
```

# c# - 重置表单中的所有项目

> ID：15569641
> 
> 赞同：13
> 
> 时间：2013-03-22T11:52:18.993
> 
> 标签：c#, winforms, reset

我想知道，有没有一种方法可以将所有复选框、文本框、数字和其他控件重置为默认值，而无需单独为每个控件编写代码？这是我尝试过的代码，但似乎不起作用：

```
for (int i = 0; i < this.Controls.Count; i++)
{
    this.Controls[i].ResetText();
} 
```

编辑：
我已经通过手动设置控制值来修复它，抱歉所有麻烦>.<。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-22T11:55:04.640

Do as below create class and call it like this

Check : [Reset all Controls (Textbox, ComboBox, CheckBox, ListBox) in a Windows Form using C#](http://www.dotneter.com/reset-all-controls-in-a-windows-form)

```
private void button1_Click(object sender, EventArgs e)
{
   Utilities.ResetAllControls(this);
} 
```

* * *

```
public class Utilities
    {
        public static void ResetAllControls(Control form)
        {
            foreach (Control control in form.Controls)
            {
                if (control is TextBox)
                {
                    TextBox textBox = (TextBox)control;
                    textBox.Text = null;
                }

                if (control is ComboBox)
                {
                    ComboBox comboBox = (ComboBox)control;
                    if (comboBox.Items.Count > 0)
                        comboBox.SelectedIndex = 0;
                }

                if (control is CheckBox)
                {
                    CheckBox checkBox = (CheckBox)control;
                    checkBox.Checked = false;
                }

                if (control is ListBox)
                {
                    ListBox listBox = (ListBox)control;
                    listBox.ClearSelected();
                }
            }
        }      
    } 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-04-03T13:42:48.640

您可以再次创建表单并处理旧表单。

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void btnReset_Click(object sender, EventArgs e)
    {
        Form1 NewForm = new Form1();           
        NewForm.Show();
        this.Dispose(false);
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-07-15T07:24:03.787

```
foreach (Control field in container.Controls)
            {
                if (field is TextBox)
                    ((TextBox)field).Clear();
                else if (field is ComboBox)
                    ((ComboBox)field).SelectedIndex=0;
                else
                    dgView.DataSource = null;
                    ClearAllText(field);
            } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-08T05:44:07.530

附加-> 清除子控件 下面的函数也将清除嵌套（子）控件，封装在一个类中。

```
 public static void ClearControl(Control control)
        {
            if (control is TextBox)
            {
                TextBox txtbox = (TextBox)control;
                txtbox.Text = string.Empty;
            }
            else if (control is CheckBox)
            {
                CheckBox chkbox = (CheckBox)control;
                chkbox.Checked = false;
            }
            else if (control is RadioButton)
            {
                RadioButton rdbtn = (RadioButton)control;
                rdbtn.Checked = false;
            }
            else if (control is DateTimePicker)
            {
                DateTimePicker dtp = (DateTimePicker)control;
                dtp.Value = DateTime.Now;
            }
            else if (control is ComboBox)
            {
                ComboBox cmb = (ComboBox)control;
                if (cmb.DataSource != null)
                {
                    cmb.SelectedItem = string.Empty;
                    cmb.SelectedValue = 0;
                }
            }
            ClearErrors(control);
            // repeat for combobox, listbox, checkbox and any other controls you want to clear
            if (control.HasChildren)
            {
                foreach (Control child in control.Controls)
                {
                    ClearControl(child);
                }
            }

        } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-02T12:09:46.597

如果您有一些面板或组框，则重置字段应该是递归的。

```
public class Utilities
{
    public static void ResetAllControls(Control form)
    {
        foreach (Control control in form.Controls)
        {
            RecursiveResetForm(control);
        }
    }

    private void RecursiveResetForm(Control control)
    {            
        if (control.HasChildren)
        {
            foreach (Control subControl in control.Controls)
            {
                RecursiveResetForm(subControl);
            }
        }
        switch (control.GetType().Name)
        {
            case "TextBox":
                TextBox textBox = (TextBox)control;
                textBox.Text = null;
                break;

            case "ComboBox":
                ComboBox comboBox = (ComboBox)control;
                if (comboBox.Items.Count > 0)
                    comboBox.SelectedIndex = 0;
                break;

            case "CheckBox":
                CheckBox checkBox = (CheckBox)control;
                checkBox.Checked = false;
                break;

            case "ListBox":
                ListBox listBox = (ListBox)control;
                listBox.ClearSelected();
                break;

            case "NumericUpDown":
                NumericUpDown numericUpDown = (NumericUpDown)control;
                numericUpDown.Value = 0;
                break;
        }
    }        
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-22T11:55:56.937

You can reset all controls of a certain type. Something like

```
foreach(TextBox tb in this.Controls.OfType<TextBox>().ToArray())
{
   tb.Clear();
} 
```

But you can't reset all controls at once

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-22T12:10:41.193

快速回答，也许会有所帮助：

```
private void button1_Click(object sender, EventArgs e)
{            
    Form2 f2 = new Form2();
    f2.ShowDialog();
    while (f2.DialogResult == DialogResult.Retry)
    {
        f2 = new Form2();
        f2.ShowDialog();
    }
} 
```

并在 Form2（“设置”表单）中：

```
private void button1_Click(object sender, EventArgs e)
{
    DialogResult = DialogResult.OK;
    Close();
}

private void button2_Click(object sender, EventArgs e)
{
    DialogResult = DialogResult.Retry;
    Close();
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-01-10T12:27:44.690

```
 function setToggleInputsinPnl(pnlName) {
    var domCount = pnlName.length;
    for (var i = 0; i < domCount; i++) {
        if (pnlName[i].type == 'text') {
            pnlName[i].value = '';
        } else if (pnlName[i].type == 'select-one') {
               pnlName[i].value = '';
        }
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-10-24T22:42:21.657

我最近不得不为文本框和复选框执行此操作，但使用 JavaScript ...

[如何重置 ASP.net 文档中的文本框和复选框控件](http://fernandoolmos68.blogspot.com.au/2013/10/how-to-reset-textbox-and-checkbox.html)

这是代码...

```
<script src="http://code.jquery.com/jquery-1.7.1.js" type="text/javascript"></script>

<script type="text/javascript">
      function ResetForm() {
          //get the all the Input type elements in the document
          var AllInputsElements = document.getElementsByTagName('input');
          var TotalInputs = AllInputsElements.length;

          //we have to find the checkboxes and uncheck them
          //note: <asp:checkbox renders to <input type="checkbox" after compiling, which is why we use 'input' above
          for(var i=0;i< TotalInputs ; i++ )
          {
            if(AllInputsElements[i].type =='checkbox')
            {
                AllInputsElements[i].checked = false;
            }
          }

          //reset all textbox controls
          $('input[type=text], textarea').val('');

          Page_ClientValidateReset();
          return false;
      }

      //This function resets all the validation controls so that they don't "fire" up
      //during a post-back.
      function Page_ClientValidateReset() {
          if (typeof (Page_Validators) != "undefined") {
              for (var i = 0; i < Page_Validators.length; i++) {
                  var validator = Page_Validators[i];
                  validator.isvalid = true;
                  ValidatorUpdateDisplay(validator);
              }
          }
      }
</script> 
```

并用按钮或任何其他方法调用它......

```
<asp:button id="btnRESET" runat="server" onclientclick="return ResetForm();" text="RESET" width="100px"></asp:button> 
```

如果您不在您的网站上使用 ValidationControls，只需删除上面引用它的所有代码和调用`Page_ClientValidateReset();`

我相信您可以使用 DOM 将其扩展为任何其他控件。而且由于服务器没有帖子，所以速度更快，也没有“闪烁”。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-05-08T13:41:19.847

有一种非常有效的方法可以用来清除或重置 Windows 窗体 C# 控件，例如 TextBox、ComboBox、RadioButton、CheckBox、DateTimePicker 等。

```
private void btnClear_Click(object sender, EventArgs e)
{
    Utilities.ClearAllControls(this);
} 
```

* * *

```
internal class Utilities
{
    internal static void ClearAllControls(Control control)
    {
        foreach (Control c in control.Controls)
        {
            if (c is TextBox)
            {
                ((TextBox)c).Clear();
            }
            else if (c is ComboBox)
            {
                ((ComboBox)c).SelectedIndex = -1;
            }
            else if (c is RadioButton)
            {
                ((RadioButton)c).Checked = false;
            }
            else if (c is CheckBox)
            {
                ((CheckBox)c).Checked = false;
            }
            else if (c is DateTimePicker)
            {
                ((DateTimePicker)c).Value = DateTime.Now; // or null 
            }
        }
    }
} 
```

为了在 c# 中实现整体用户体验，我们可以使用一个语句来清除它们。到目前为止非常简单，上面是代码。

# android - （初学者）如何自动将网站上的图像加载到图像视图中

> ID：15569642
> 
> 赞同：0
> 
> 时间：2013-03-22T11:52:22.817
> 
> 标签：android, eclipse, gridview, imageview

我正在为朋友有趣的图片网站构建一个应用程序。我从 android 开发者网站下载了 gridview 活动，但它只加载了预设的图像 url，这对我们根本不起作用。我们需要一个可以自动从站点加载图像的图像加载器。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T12:01:07.580

使用惰性列表下载 [https://github.com/thest1/LazyList](https://github.com/thest1/LazyList)

[ListView 中图像的延迟加载](https://stackoverflow.com/questions/541966/how-do-i-do-a-lazy-load-of-images-in-listview)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T03:11:04.033

Hope [AQuery](https://code.google.com/p/android-query/#Image_Loading) library is what you are looking for easy image loading on `ImageView`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T11:58:41.360

试试这个

```
Drawable drawable = LoadImage(<Replace this with your url> + UserProfile.Photo);
UserPhotoImageView.setImageDrawable(drawable);
<replace with Your Image View>.setImageDrawable(drawable);

public Drawable LoadImage(String url)
    {
        try
        {
            InputStream is = (InputStream) new URL(url).getContent();
            Drawable d = Drawable.createFromStream(is, "src name");
            return d;
        }
        catch (Exception e)
        {
            System.out.println("Exc=" + e);
            return null;
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T02:05:40.027

而不是其他人的建议，我认为最好的方法是使用[UniversalImageLoader](https://github.com/nostra13/Android-Universal-Image-Loader)。它将允许您延迟加载，并缓存在 SD 卡和内部存储上。简而言之，它使事情变得更简单，并让您获得尽可能快的速度。试试看。

# mysql - PHP Array 不显示数据库中的所有数据

> ID：15569643
> 
> 赞同：1
> 
> 时间：2013-03-22T11:52:27.607
> 
> 标签：mysql, database, show, record

我有一个非常基本和简单的脚本，应该显示我的数据库中的记录。问题：它没有显示所有记录。即使使用最简单的 mysql ($sql="SELECT * FROM $tbl_name";)，我也尝试过，但仍然缺少一些记录（主要是未显示的列表中的第一个）。

所以这是我的代码（全部在 1 页上）：

```
<?php
$host="localhost";
$username="***";
$password="***";
$db_name="***";
$tbl_name="***";

mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");

$sql="SELECT * FROM $tbl_name WHERE rowNameOne >= 0.01 AND rowNameTwo='2013'";

if ($_GET['sort'] == 'one')
{
    $sql .= " ORDER BY one ASC";
}
elseif ($_GET['sort'] == 'two')
{
    $sql .= " ORDER BY two ASC";
}
elseif ($_GET['sort'] == 'three')
{
    $sql .= " ORDER BY three ASC";
}
elseif($_GET['sort'] == 'four')
{
    $sql .= " ORDER BY four ASC";
}
elseif($_GET['sort'] == 'five')
{
    $sql .= " ORDER BY five ASC";
}

$result=mysql_query($sql);
$rows=mysql_fetch_array($result);
?>

<body onload="parent.alertsize(document.body.scrollHeight);"> 
<br />
<table cellspacing="0" cellpadding="0" align="center">
<tr>
<td valign="top" colspan="5">
<font>Titel</font>
</td>
<tr>
<td><a href="pageName.php?sort=one">Titel one</a></td>
<td><a href="pageName.php?sort=two">Titel two</a></td>
<td><a href="pageName.php?sort=three">Titel three</a></td>
<td><a href="pageName.php?sort=four">Titel four</a></td>
<td><a href="pageName.php?sort=five">Titel five</a></td>
</tr>
<tr>
<td colspan="5" class="noBorder">

<?php
while($rows=mysql_fetch_array($result)){
?>

<a href="pageName.php?id=<? echo $rows['id']; ?>" >
<table width="100%">
<tr>
<td><? echo $rows['rowNameOne']; ?></td>
<td><? echo $rows['rowNameTwo']; ?></td>
<td><? echo $rows['rowNameThree']; ?></td>
<td><? echo $rows['rowNameFour']; ?></td>
<td><? echo $rows['rowNameFive']; ?></td>
</tr>
</table>
<input name="id" type="hidden" id="id" value="<? echo $rows['id']; ?>">
<?php
}
?>
</a>

</td>
</tr>
</table> 
```

这是一个非常基本的代码，我会说很简单，但它仍然缺少记录，没有显示数据库中的所有内容。我究竟做错了什么？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T11:56:10.800

在开始循环之前，请执行以下操作：

```
$rows=mysql_fetch_array($result); 
```

那么循环条件为：

```
while($rows=mysql_fetch_array($result)){ 
```

所以第一个结果永远不会显示。我建议删除第一个语句，因为您没有在该语句和循环之间使用它的结果。

On a related note, please consider moving to [PDO](http://php.net/pdo) or [mysqli](http://php.net/mysqli).

# wordpress - 在 wordpress 中需要用于自定义表单的验证码插件

> ID：15569644
> 
> 赞同：-1
> 
> 时间：2013-03-22T11:52:33.190
> 
> 标签：wordpress, captcha

我`Captcha plugin`需要**WordPress**。还有更多插件。但我需要打电话给我需要的验证码。不仅登录表单，评论表单。

`EX:`我创建了一个表格。我需要为该表单设置验证码。

有什么想法或选择吗？我没有问`recommendation`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:17:32.870

我不知道其他验证码插件。

但是您可以在 wordpress 中使用“重力形式”，这肯定会通过一些额外的 cookie 来满足您的需求，例如出色的表单 UI 和其他支持插件。

但是，如果您不想更改您的预定义表格，那么您可以使用以下链接作为参考。

[https://developers.google.com/recaptcha/docs/wordpress](https://developers.google.com/recaptcha/docs/wordpress)

和

[https://www.keycaptcha.com/](https://www.keycaptcha.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:25:24.993

这个可能对你有用。它最初是为 CF7 设计的，但您也可以在自定义表单上使用它。第一页描述了如何进行身份验证，它是相当简单的文本。

[http://wordpress.org/extend/plugins/really-simple-captcha/](http://wordpress.org/extend/plugins/really-simple-captcha/)

虽然，我个人使用这个[http://www.phpcaptcha.org/](http://www.phpcaptcha.org/)对我来说更容易在我的自定义表单上实现。您可以自定义图像显示，以便它可以显示您想要显示的任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-07T18:39:57.223

您可以使用多种安全验证码解决方案，但使用[真正简单的验证码插件](https://wordpress.org/plugins/really-simple-captcha/)及其 API/功能是最快的解决方案。

请参阅[如何将真正简单的验证码插件与您的插件或主题一起使用](http://www.lost-in-code.com/platforms/wordpress/wordpress-plugins/wordpress-using-really-simple-captcha/)。

Since many WordPress plugins already integrate with Really Simple Captcha plugin, chances are that you may have it installed already or that you will find it useful in the future if you do install it.

# vb.net - 使用 OleDbDataReader 从 Access 中检索大表（慢）

> ID：15569653
> 
> 赞同：0
> 
> 时间：2013-03-22T11:53:05.217
> 
> 标签：vb.net, ms-access, oledb, oledbdatareader

我目前正在迁移使用 VB6 构建的旧应用程序。该应用程序主要用于处理来自 Access 数据库的数据。我正在使用 DAO 库来完成所有工作。我现在将它迁移到 VB.net（使用 Visual Studio Express 2010）并开始使用 OleDb 库，但我面临速度方面的问题。当我尝试从网络位置打开并迭代一个大约 7 列和 2500 万行（数据类型主要是双精度数据类型）的大表时，大约需要 10 分钟。当我使用 DAO 时，我花了大约 1.5 分钟来打开表格并浏览所有记录。这是我的应用程序速度的主要差异，我没想到会这样。

这是我用来打开该表的过程：

```
Public Const ConnectionString As String = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source="
Public Const DataBasePath = "My DataBase Location"
Public BE As OleDbConnection = New OleDbConnection(ConnectionString & DataBasePath)

Public Sub OpenLargeTable
    BE.Open()
    Dim QueryExecute As OleDbCommand, DataSet as OleDbDataReader
    Try
        QueryExecute = New OleDbCommand("Select * From LargeTable Order By Field1, Field2, BE)
        DataSet = QueryExecute.ExecuteReader() : DataSet.Read()
        QueryExecute.Dispose() : QueryExecute = Nothing
    Catch
        'Error Handling
    End Try
End Sub 
```

我需要对表进行排序，并且我正在使用带有 Order By 子句的 SQL 语句。我发现没有 Order By 它非常快，只是当我订​​购数据时，与 DAO 相比，它变得非常慢。我试图在访问数据库中创建一个对记录进行排序的查询，然后在 OleDbCommand 对象中的 SQL 语句上调用查询，但这没有帮助。我的问题是，OleDbDataReader 是打开大型排序数据集的最佳方法/对象吗？

谢谢

# python - 外键的 filter_horizo ntal 等效项

> ID：15569654
> 
> 赞同：1
> 
> 时间：2013-03-22T11:53:09.523
> 
> 标签：python, django, admin

我想将 filter_horizo​​ntal 小部件用于 ForeignKey。但它不起作用，这是正常的，因为这个小部件是用于 ManyToMany 字段的。但我真的很想为我的 ForeignKey 提供一种自动完成的小部件。我测试了 raw_id_fields 并且结果非常好，因为我不喜欢它在新窗口中打开的事实。

如果您有任何想法，除了使用片段或其他类似的东西......

# c# - selectedItem 在 xaml 中不起作用

> ID：15569655
> 
> 赞同：0
> 
> 时间：2013-03-22T11:53:11.577
> 
> 标签：c#, xaml, windows-store-apps

我正在尝试通过以下代码设置所选项目，但它不起作用：

```
<StackPanel Orientation="Horizontal">
                <TextBlock Text="Sort by" Margin="10" VerticalAlignment="Center"/>
                <ComboBox Width="{StaticResource ComboWidth}" x:Name="sortcombo" ItemsSource="{Binding Path=SortOrder}" SelectionChanged="SearchCombo_SelectionChanged" SelectedItem="{Binding Path=DefaultSortIndex}">
                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Path=Sort}"/>
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>
            </StackPanel> 
```

但是，如果我使用 selectedIndex 而不是绑定到第 0 个索引，它工作正常。声明有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:08:38.887

根据您的财产名称，您`DefaultSortIndex`可能正在尝试绑定`int`for `SelectedItem`。

`SeletedItem`指您的集合中绑定到的元素`ItemsSource`，因此绑定到的属性`SelectedItem`必须是您的集合元素的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:10:08.847

如果您将 int 值绑定到所选项目，那么它将不起作用，您应该为此绑定元素。对于 int 值，您可以按照以下帖子中的说明进行设置：

[将 WPF 组合框的选定项设置为用户设置](https://stackoverflow.com/questions/4946167/set-selected-item-of-wpf-combobox-to-user-setting)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T13:00:49.070

发现了问题，实际上每次我调用 getData() 时数据源都会创建新列表。

# c# - System.MissingMethodException Int32 System.Environment。get_CurrentManagedThreadId()

> ID：15569664
> 
> 赞同：35
> 
> 时间：2013-03-22T11:53:37.490
> 
> 标签：c#, .net-4.0

什么可能导致以下异常？

```
System.MissingMethodException Int32 System.Environment.get_CurrentManagedThreadId() 
```

这个方法调用似乎是由 C# 编译器为方法生成的`IEnumerable<>`。

已安装 .NET Framework v4.0 x86，并为 v4.0 Any CPU 编译二进制文件。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-03-22T12:33:43.207

`CurrentManagedThreadId`是 .NET 4.5 属性，因此您需要 4.5 才能运行代码。请参阅[迭代器块、缺少的方法和 .NET 4.5](http://marcgravell.blogspot.de/2012/09/iterator-blocks-missing-methods-and-net.html)以分析此问题如何发生。

**简而言之：**

如果在安装了 .NET 4.5 的系统上构建应用程序（针对 .NET 4.0），它将使用 4.5 作为编译的基础，因为 .NET 4.0 框架总是被 .NET 4.5 覆盖。

如果您的应用程序随后也使用`yield return`，它将在仅安装 4.0 的系统上失败，因为此语句的实现在为 4.5 框架编译时使用了一个新属性。

要解决它，请确保您的编译器系统具有 4.0 参考程序集。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-21T02:46:47.093

**附议 floele**的回答；有关更多上下文，以下是对该问题的简要分析：

当编译器处理返回的迭代器块时`IEnumerable`，它会生成一个私有`IEnumerable`类来保存迭代逻辑。`GetEnumerator`这是4.0 编译器为其方法生成的 IL 的开头：

```
.method private final hidebysig newslot virtual 
    instance class [mscorlib]System.Collections.Generic.IEnumerator`1<string> 'System.Collections.Generic.IEnumerable<System.String>.GetEnumerator' () cil managed 
{
    .custom instance void [mscorlib]System.Diagnostics.DebuggerHiddenAttribute::.ctor() = (
        01 00 00 00
    )
    .override method instance class [mscorlib]System.Collections.Generic.IEnumerator`1<!0> class [mscorlib]System.Collections.Generic.IEnumerable`1<string>::GetEnumerator()
    // Method begins at RVA 0x57848
    // Code size 89 (0x59)
    .maxstack 6
    .locals init (
        [0] bool,
        [1] class DOT.Core.MiscHelpers/'<ReadLines>d__0',
        [2] class [mscorlib]System.Collections.Generic.IEnumerator`1<string>
    )

    IL_0000: call class [mscorlib]System.Threading.Thread [mscorlib]System.Threading.Thread::get_CurrentThread()
    IL_0005: callvirt instance int32 [mscorlib]System.Threading.Thread::get_ManagedThreadId()
    IL_000a: ldarg.0
    IL_000b: ldfld int32 DOT.Core.MiscHelpers/'<ReadLines>d__0'::'<>l__initialThreadId'
    IL_0010: bne.un IL_0027 
```

`System.Threading.Thread::get_CurrentThread()`注意对和的调用`System.Threading.Thread::get_ManagedThreadId();`。生成的方法使用它来执行优化，如果`IEnumerable`立即使用 [1]，则返回相同的对象实例（节省构造函数调用的成本）。

以下是4.5编译器生成的IL：

```
.method private final hidebysig newslot virtual 
    instance class [mscorlib]System.Collections.Generic.IEnumerator`1<string> 'System.Collections.Generic.IEnumerable<System.String>.GetEnumerator' () cil managed 
{
    .custom instance void [mscorlib]System.Diagnostics.DebuggerHiddenAttribute::.ctor() = (
        01 00 00 00
    )
    .override method instance class [mscorlib]System.Collections.Generic.IEnumerator`1<!0> class [mscorlib]System.Collections.Generic.IEnumerable`1<string>::GetEnumerator()
    // Method begins at RVA 0x4830c
    // Code size 64 (0x40)
    .maxstack 2
    .locals init (
        [0] class DOT.Core.MiscHelpers/'<ReadLines>d__0'
    )

    IL_0000: call int32 [mscorlib]System.Environment::get_CurrentManagedThreadId()
    IL_0005: ldarg.0
    IL_0006: ldfld int32 DOT.Core.MiscHelpers/'<ReadLines>d__0'::'<>l__initialThreadId'
    IL_000b: bne.un IL_002b 
```

请注意，前一个方法的两个调用现在被替换`System.Environment::get_CurrentManagedThreadId()`为 .NET 4.5 中添加的属性。

由于 4.5 升级覆盖了 4.0 C# 编译器 (csc.exe)，因此在您的机器上为 4.0 编译的代码将使用新的 IL 模板，并且不会在 vanilla 4.0 安装上运行，除非您有 .NET 4.0 参考程序集 [2] ，这将导致编译器生成旧版本的 IL。

[1] 也就是说，第一次在创建它的线程上使用它（例如在 foreach 语句中）。

[2] 实际上可以从 .NET Framework 安装程序中提取 .NET 4.0 编译器，然后修改您的项目文件以使用它编译您的代码。这可能是解决问题的另一种方法，但这是一个很长的故事，我不会在这里详细介绍

# css - 如何添加固定侧边栏

> ID：15569670
> 
> 赞同：-2
> 
> 时间：2013-03-22T11:53:58.283
> 
> 标签：css

我想添加一个固定的侧边栏，如下图所示。

![在此处输入图像描述](../Images/41416b945f1e45c5ba4dc46984d0ebfa.png)

这怎么可能？

```
Appreciate any suggestion. 
```

**[解决方案](http://jsfiddle.net/G8DCg/2/)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T11:55:05.843

used to this

> fixed position

```
.sidebar{
position:fixed;
left:0;
width:250px; // width change to according your left bar side
top:0;
bottom:0;
} 
```

**[Demo](http://jsfiddle.net/hVRXx/1/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T11:55:25.467

```
.SomeClass { position: fixed } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T13:17:44.700

这个小提琴可能会解决你的问题，右栏是灵活的，左栏是固定的

[http://jsfiddle.net/R5TZH/](http://jsfiddle.net/R5TZH/)

```
<div class="container">
         <div class="columns">
         <div class="right-col">
             Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi. Nam liber tempor cum soluta nobis eleifend option congue nihil imperdiet doming id quod mazim placerat facer possim assum. Typi non habent claritatem insitam; est usus legentis in iis qui facit eorum claritatem. Investigationes demonstraverunt lectores legere me lius quod ii legunt saepius. Claritas est etiam processus dynamicus, qui sequitur mutationem consuetudium lectorum. Mirum est notare quam littera gothica, quam nunc putamus parum claram, anteposuerit litterarum formas humanitatis per seacula quarta decima et quinta decima. Eodem modo typi, qui nunc nobis videntur parum clari, fiant sollemnes in futurum
        </div>    
     </div>  
    <div class="left-col">
                <a class="selected" href="#">05 <br><strong>Today</strong></a>
                <a href="#">06 <br><strong>TOM</strong></a>
                <a href="#">07 <br><strong>MON</strong></a>
                <a href="#">08 <br><strong>TUE</strong></a>
                <a href="#">09 <br><strong>WED</strong></a>
                <a href="#">08 <br><strong>THU</strong></a>
                <a href="#">09 <br><strong>FRI</strong></a>
    </div>  
</div> 
```

CSS：

```
.container {
    width: 100%;
}

.left-col {
    background: none repeat scroll 0 0 #434345;
    float: left;
    margin-left: -100%;
    padding: 10px;
    width: 80px;
}

.left-col a {
    background: none repeat scroll 0 0 #FFFFFF;
    border-radius: 10px 10px 10px 10px;
    color: #000000;
    float: left;
    font-size: 18px;
    height: 50px;
    margin-bottom: 10px;
    padding: 10px;
    text-align: center;
    width: 60px;
}

.columns {
    float: left;
    width: 100%;
}

.right-col {
    margin-left: 100px;
    background:red;
    height:400px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T12:00:04.943

用于固定侧栏，样式

```
position:fixed; 
```

这可以，但不是在 chrome 中，所以你可以使用它

```
position:absolute;
top:0;
left:0;
bottom:0;
width:180px;// you may change as per your requirement 
```

这适用于所有浏览器:)

编辑：使用内容 div 更新小提琴

```
http://jsfiddle.net/MarmeeK/nkprH/5/ 
```

我希望这会做，更多的答案发布你的一些工作细节，谢谢

# python - Python 2.7：如何为独立/模块代码传递选项

> ID：15569672
> 
> 赞同：1
> 
> 时间：2013-03-22T11:54:02.947
> 
> 标签：python, python-2.7, default-value, argparse

我编写了一个 python 模块 mymod.py，它也可以用作命令行中的独立程序。

在 mymod.py 中，我定义了一些函数（其中使用关键字设置默认值）和一个`if __name__=="__main__"`将模块用作独立程序的块。

我希望有可能覆盖一些默认选项，因此在主程序中我`import argparse`并使用它来解析选项。我使用字典来存储默认值，因此如果有一天我需要更改默认值，我可以很容易地只在一个地方修改它的值。

它有效，但我发现代码不是“干净”的，并认为我可能没有以正确的 Python 方式进行操作。

这是一个展示我所做的玩具示例：

```
#!/usr/bin/env python
#mymod.py

__default_options__={
  "f1_x":10,
  "f2_x":10
}

def f1(x=__default_options__["f1_x"]):
  return x**2

def f2(x=__default_options__["f2_x"]):
  return x**4

# this function is the "core" function which uses f1 and f2 
# to produce the main task of the program
def f(x=__default_options__["f1_x"],y=__default_options__["f2_x"]):
  return f1(x)+f2(y)

if __name__=="__main__":
  import argparse
  parser = argparse.ArgumentParser(description = "A toy application")
  parser.add_argument("--f1-x",help="the parameter passed to f1",
    default=__default_options__["f1_x"], type = float,dest = "x")  
   parser.add_argument("--f2-x",help="the parameter passed to f2",
     default=__default_options__["f2_x"], type = float, dest = "y")

  options= parser.parse_args()
  print f(options.x,options.y) 
```

像我这样传递默认值有点麻烦，并且可能违背 Python 和 argparse 的精神。

如何将此代码改进为更加 Pythonic 并最好地使用 argparse？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:33:38.450

您可以通过以下方式使用[`ArgumentParser.set_defaults](http://docs.python.org/2.7/library/argparse.html#argparse.ArgumentParser.set_defaults)方法

```
default_options={
    "x":10,
    "y":10
}

def f1(**kwargs):
    x=kwargs.get('x', defalut_options['x'])
    return x**2

def f2(**kwargs):
    y=kwargs.get('y', defalut_options['y'])
    return x**4

def f(**kwargs):
    x=kwargs.get('x', defalut_options['x'])
    y=kwargs.get('y', defalut_options['y'])
    return f1(x=x, y=y)

if __name__=="__main__":
    import argparse
    parser = argparse.ArgumentParser(description = "A toy application", formatter_class=argparse.ArgumentDefaultsHelpFormatter )
    parser.add_argument("--f1-x",help="the parameter passed to f1",
      type = float,dest = "x")
    parser.add_argument("--f2-x",help="the parameter passed to f2",
      type = float, dest = "y")

    parser.set_defaults(**default_options)

    options= parser.parse_args()
    print f(options.x,options.y) 
```

我花了一段时间才让它工作，因为我没有注意到你正在使用`dest`（`add_argument`我从不使用它）。如果未提供此关键字，则 argparse 将默认设置为`dest`参数的长名称（在这种情况下`f1_x`，和`f2_x`，因为它替换`-`为`_`）。切入正题：如果你想提供一个默认字典，`dest`如果提供的话，键需要匹配。此外，请注意`parser.set_defaults`仅向解析器添加参数，因此如果您的解析器中没有某些条目，它将被添加到`Namespace`.

`kwargs`-- 编辑为函数添加泛型--

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T13:00:44.253

正如@Francesco 在评论中所写，您的默认字典不会像您预期的那样工作：这些函数将保留它们在加载模块时的默认值，而不管以后对字典的更改如何。以下是如何让它们跟踪字典的当前值：

```
_default_options = {
    "f1_x":10,
    "f2_x":10
}

def f1(x=None):
    if x == None:
        x = _default_options["f1_x"]
    ... 
```

然后，您可以`_default_options`通过`ArgumentParser`或任何其他方式进行修改，`f1()`如果不带参数调用，将使用它。

这要求 that`None`永远不会是有意义的值`x`; 如果不是这种情况，请选择一个合适的不可能值。

# string - Linq 拆分/分析子字符串

> ID：15569673
> 
> 赞同：1
> 
> 时间：2013-03-22T11:54:07.323
> 
> 标签：string, linq, split, group-by

我有一个字符串列表，例如：

*   字符串1
*   字符串1.字符串2
*   字符串1.字符串2.字符串3
*   其他1
*   其他1.其他2
*   测试1
*   东西1.东西1
*   文本1.文本2.文本3
*   文件夹1.文件夹2.文件夹A
*   文件夹1.文件夹2.文件夹B
*   文件夹1.文件夹2.文件夹B.文件夹C

现在我想把它分为：

*   字符串1.字符串2.字符串3
*   其他1.其他2
*   测试1
*   东西1.东西1
*   文本1.文本2.文本3
*   文件夹1.文件夹2.文件夹A
*   文件夹1.文件夹2.文件夹B.文件夹C

如果“String1”在下一项“String1.String2”中，我将忽略第一项，如果第二项在第三项中，我将只取第三项“String1.String2.String3”，依此类推（n 项）。该字符串的结构类似于节点/路径，可以用点分隔。

正如您在文件夹示例中看到的，Folder2 有两个不同的子文件夹项目，所以我需要两个字符串。

你知道如何用 Linq 处理这个问题吗？我更喜欢 VB.Net，但 C# 也可以。

问候阿图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:20:17.133

很简单的一个。试试这个：

```
var lst = new List<string> { /*...*/ };

var sorted =
    from item in lst
    where lst.Last() == item || !lst[lst.IndexOf(item) + 1].Contains(item)
    select item; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:22:33.840

LINQ 在这里并不是真正正确的方法，因为您一次需要访问多个项目。

我会用这样的东西：

```
public static IEnumerable<string> Filter(this IEnumerable<string> source)
{
    string previous = null;
    foreach(var current in source)
    {
        if(previous != null && !current.Contains(previous))
            yield return previous;
        previous = current;
    }
    yield return previous;
} 
```

用法：

```
var result = strings.Filter(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T12:26:02.127

```
 Dim r = input.Where(Function(e, i) i = input.Count - 1 OrElse Not input(i + 1).StartsWith(e + ".")).ToList() 
```

方法内的条件`Where`检查元素是来自输入的最后一个元素还是后面没有包含当前元素的元素。

该解决方案使用了这样一个事实，即输入是`List(Of String)`，所以`Count`并且`input(i+1)`是准时可用的`O(1)`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T12:30:32.587

以下简单的行可以解决问题，我不确定性能成本通过

```
 List<string> someStuff = new List<string>();
        //Code to the strings here, code not added for brewity
        IEnumerable<string> result = someStuff.Where(s => someStuff.Count(x => x.StartsWith(s)) == 1); 
```

# ios - Remove all files from memory using NSFileManager

> ID：15569675
> 
> 赞同：0
> 
> 时间：2013-03-22T11:54:10.417
> 
> 标签：ios, objective-c

How can you remove all the files that are saved using the `NSFileManager` ? I found something like the code below, but you need to give the filePath and since I need to delete all the images that I've saved, I don't know all the image paths/names?

```
[[NSFileManager defaultManager] removeItemAtPath:filePath error:NULL]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:04:46.600

首先从该特定文件夹中获取所有项目：

```
NSString  *filePath = [NSString stringWithFormat:@"your folder path where you have saved those images"];
NSArray *files = [fileManager contentsOfDirectoryAtPath:filePath 
                                                  error:nil]; 
```

这将是刚刚遍历数组的文件数组。并使用：

```
 for(NSString *filename in files)
   {
    NSString  *filePath = [NSString stringWithFormat:@"filepath/%@",filename];
    [[NSFileManager defaultManager] removeItemAtPath:filePath error:NULL];
   } 
```

这应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:05:07.400

您必须将图像保存到任何文件夹，例如 Documents Directory、Library、Caches 或 Temp 文件夹。您需要使用以下代码获取保存图像的任何目录中的所有图像。

```
-(NSArray*)getImagesFromDirectory:(NSString*)imageDirectoryPath{

   NSFileManager *fileManager = [[NSFileManager alloc] init];
   NSArray *files = [fileManager contentsOfDirectoryAtPath:imageDirectoryPath 
                                          error:nil];
   return files;
} 
```

然后循环删除路径中的图像

```
 NSArray *images=[self getImagesFromDirectory:@"DIRECTORYPATH"];
 NSFileManager * fileManager = [[NSFileManager alloc] init];
 for(NSString *imagePath in images){
     [fileManager removeItemAtPath:imagePath];
 } 
```

# php - how to pass location from jquery to php

> ID：15569677
> 
> 赞同：0
> 
> 时间：2013-03-22T11:54:17.487
> 
> 标签：php, jquery, html, sql

This retrieves the map of the location:

```
 <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/
1.4.2/jquery.min.js"></script>
<script type="text/javascript" src="jquery.cookie.js"></script>
<script type="text/javascript">
function success(position)
{
var s = document.querySelector('#status');
if (s.className == 'success')
{
return;
}
s.innerHTML = "Found you!";
s.className = 'Success';
var mapcanvas = document.createElement('div');
mapcanvas.id = 'mapcanvas';
mapcanvas.style.height = '100%';
mapcanvas.style.width = '100%';
document.querySelector('#map').appendChild(mapcanvas);
var latlng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
var myOptions = {
zoom: 15,
center: latlng,
mapTypeControl: false,
navigationControlOptions: {style: google.maps.NavigationControlStyle.SMALL},
mapTypeId: google.maps.MapTypeId.ROADMAP
};
var map = new google.maps.Map(document.getElementById("mapcanvas"), myOptions);
var marker = new google.maps.Marker({
position: latlng,
map: map,
title:"You are here!"
});
$.cookie("MyLat", position.coords.latitude); // Storing latitude value
$.cookie("MyLon", position.coords.longitude); // Storing longitude value
}
function error(msg)
{
var s = document.querySelector('#status');
s.innerHTML = typeof msg == 'string' ? msg : "failed";
s.className = 'Fail';
}
if (navigator.geolocation)
{
navigator.geolocation.getCurrentPosition(success, error);
}
else
{
error('Not supported'); //HTML Support
}

//Jquery Code
$(document).ready(function()
{
$("#check").click(function()
{
var lat = $.cookie("MyLat");
var lon = $.cookie("MyLon");
alert('Latitued: '+lat);
alert('Longitude: '+lon);
var url="http://maps.googleapis.com/maps/api/geocode/json?latlng="+lat+","+lon+"&sensor=false";
alert('Google Map API: '+url);
//Get Json Request Here
});
});
</script>
//HTML Code
<input type='button' id='check' value='Check-out'/>
<div id="status">Loading.............</div>
<div id="map"></div> 
```

I want to get only city and street address using GPS in jQuery and pass that city location to the PHP below, assigning the city address in php variable $city = //from jquery.

And pass in $sql statement.

```
(i.e "select e.id, e.firstName, e.lastName, e.title, e.picture, count(r.id) reportCount " . 
                "from employee e left join employee r on r.managerId = e.id " .
                "group by e.id order by e.lastName, e.firstName where e.city=$city";)

    <div data-role="content"> 
    <ul data-role="listview" data-filter="true">
        <?php
        include 'config.php';
        $sql = "select e.id, e.firstName, e.lastName, e.title, e.picture, count(r.id) reportCount " . 
                "from employee e left join employee r on r.managerId = e.id " .
                "group by e.id order by e.lastName, e.firstName";
        try {
            $dbh = new PDO("mysql:host=$dbhost;dbname=$dbname", $dbuser, $dbpass);  
            $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
            $stmt = $dbh->query($sql); 
            while ($emp = $stmt->fetch(PDO::FETCH_OBJ)) {  
                echo "<li><a href='employeedetails.php?id=$emp->id'>" .
                    "<img src='pics/$emp->picture'/>" .
                    "<h4>$emp->firstName $emp->lastName</h4>" .
                    "<p>$emp->title</p>" .
                    "<span class='ui-li-count'>$emp->reportCount</span></a></li>";
            }
            $dbh = null;
        } catch(PDOException $e) {
            echo $e->getMessage(); 
        }
        ?> 
    </ul>
  </div>

</div> 
```

Help me in getting this.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:19:32.830

您需要使用 jquery [ajax](http://api.jquery.com/jQuery.ajax/)。

正如我建议看[这个](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:16:43.253

尝试将您的数据封装在 JSON 中，然后他们使用 AJAX 将其传输到您的 PHP 源。在 jquery 和 PHP 中，您有解析器来编码/解码 json 信息。

# regex - .htaccess 重写规则，用于通过不匹配 URL 中的字符串来添加尾部斜杠

> ID：15569685
> 
> 赞同：1
> 
> 时间：2013-03-22T11:54:43.800
> 
> 标签：regex, .htaccess, mod-rewrite, regex-negation, regex-lookarounds

如果在 URL 中找不到 admin，则以下 .htaccess 规则不匹配字符串 admin 并在该 URL 中添加尾部斜杠 (/)

```
RewriteRule ^((?!admin).)*((?!\/).)$ /$1/ [L,R] 
```

但它有一个错误，它是

```
 http://www.domain.com/index 
```

结果应该是：http: [//www.domain.com/index/](http://www.domain.com/index/)

但目前它正在产生： http: [//www.domain.com/inde/](http://www.domain.com/inde/)

请找到解决方案来纠正它。非常感谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:15:13.080

您的表情捕捉到了组中的最后一个字符。

这将解决问题：

```
RewriteRule ^(?!.*admin)(.*?)\/?$ /$1/ [L,R] 
```

在这里查看解释的演示：[http ://regex101.com/r/kL6pV1](http://regex101.com/r/kL6pV1)

注意：这将使任何*包含* `admin`的 URL 无效，不一定以`admin`

# apache - .htaccess allow certain ip with file exceptions for all others

> ID：15569688
> 
> 赞同：1
> 
> 时间：2013-03-22T11:54:45.480
> 
> 标签：apache, .htaccess

I know it's a bit of a beginner question but tried several combinations and none work... here's what i need to achieve using .htaccess and .htpasswd

*   I have a www.mysite.com/protected folder.

*   By default, all ip's shouldn't see this folder and any other files inside it exists (basically they should be redirected to www.mysite.com)

*   A certain IP (my external IP M.M.M.M) should be able to access that protected folder and be requested a username and password
*   All ip's should be able to see some files inside the folder without being asked for password (www.mysite.com/protected/file1 and www.mysite.com/protected/file2)

I know the latter rule opens an exception on the first but that's how i need it (a general rule denying all and then whitelisting some files)

Thanks in advance for any help, been struggling with this for a bit now :(

# android - Android HTTP 响应处理

> ID：15569689
> 
> 赞同：0
> 
> 时间：2013-03-22T11:54:57.890
> 
> 标签：android, http, request

这是我发送 HTTP 请求的代码：

```
package com.example.database;

import java.io.IOException;
import java.io.InputStream;
import java.util.ArrayList;
import java.util.List;

import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.ResponseHandler;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.entity.StringEntity;
import org.apache.http.impl.client.BasicResponseHandler;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicHeader;
import org.apache.http.message.BasicNameValuePair;
import org.apache.http.params.HttpConnectionParams;
import org.apache.http.protocol.HTTP;
import org.json.JSONObject;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.os.Looper;
import android.util.Log;
import android.widget.Toast;

public class post extends Activity{

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    postData();
}

public void postData() {
    // Create a new HttpClient and Post Header
    HttpClient httpclient = new DefaultHttpClient();

    HttpPost httppost = new HttpPost("http://192.168.83.1/test.php");

    try {
        // Add your data
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        nameValuePairs.add(new BasicNameValuePair("id", "12345"));
        nameValuePairs.add(new BasicNameValuePair("stringdata", "Hi"));
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        // Execute HTTP Post Request
        ResponseHandler<String> responseHandler=new BasicResponseHandler();

        String responseBody = httpclient.execute(httppost, responseHandler);
        Log.d("test", responseBody); 
       // Toast.makeText(getApplicationContext(), responseBody, Toast.LENGTH_LONG).show();

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
    } catch (IOException e) {
        // TODO Auto-generated catch block
    }
} 
```

文件**test.php**的内容是：

```
 <?php

echo"works";

?> 
```

Log.d("test", responseBody); 标签不会出现在 LogCat 上。但是，如果我将其向上移动几行（在 responseBody 之前）并放置一段静态文本，它确实有效

HTTPRequest 有问题吗？怎么可能解决

谢谢 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T12:05:06.213

删除 BasicResponseHandler 后尝试。它应该工作。并签入 Menifest 以获得 perticuler 许可

```
HttpResponse response = httpclient.execute(httppost);
String responseBody = EntityUtils.toString(response.getEntity()); 
```

# php - learning php unset ()

> ID：15569699
> 
> 赞同：0
> 
> 时间：2013-03-22T11:55:13.903
> 
> 标签：php

3 and learning from a book (php a begginers guide, vikram vaswani) and am following his guides and have entered his code

```
$whoami="sarah";
echo gettype ($whoami);

$whoami=99.8;
echo gettype ($whoami);

unset ($whoami);
echo gettype ($whoami); 
```

the error i am getting is this

```
Undefined variable: whoami in C:\inetpub\wwwroot\etc.. 
```

I was hoping someone could explain why? also, off topic but if anyone knows if this book is anygood or not for a complete begginer could they recommend a better one as i have had quite a few errors when entering code ?

thankyou

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T12:03:22.877

基本上，您使用**unset()**来销毁变量。

但有一些微妙之处：

> **unset()**销毁指定的变量。
> 
> **函数内部unset()**的行为可能因您尝试销毁的变量类型而异。
> 
> 如果一个全局变量在函数内部是*unset()*，则只有局部变量被销毁。*调用环境中的变量将保留与调用unset()*之前相同的值。

*资料来源：[unset() 文档](http://www.php.net/manual/en/function.unset.php)*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T12:01:01.370

好朋友，在 php 中取消设置是为了销毁您放入变量中的任何内容 unset 和 delo 为什么会发生错误，因为他销毁了变量，而当您尝试使用她下面的代码时，她已经不复存在了。

# java - 如何确定字符串表示中的基元类型？

> ID：15569701
> 
> 赞同：3
> 
> 时间：2013-03-22T11:55:20.850
> 
> 标签：java, primitive, number-formatting

我有一个原语的字符串表示，我的目标是确定它是哪个原语。
我的功能如下：

```
public Object getPrimitive(String primitiveAsString) {
.....
} 
```

因此，例如，如果输入是“223”，我想返回一个整数，但如果输入是“223.1”甚至是“223.0”（！！），则返回一个双精度数。此外，我想区分浮点数和双精度数，甚至整数和“BigInteger”。

我尝试了一个使用 NumberFormat 的解决方案，但它对我不起作用......

有没有一种优雅的方法可以做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:07:57.840

一个想法只是试图在 try-catch 中返回每种类型。

代码：（错误检查可能不太理想）

```
public static void main(String[] args)
{
    System.out.println(getPrimitive("123")); // Byte
    System.out.println(getPrimitive("1233")); // Short
    System.out.println(getPrimitive("1233587")); // Integer
    System.out.println(getPrimitive("123.2")); // Float
    System.out.println(getPrimitive("123.999999")); // Double
    System.out.println(getPrimitive("12399999999999999999999999")); // BigInteger
    System.out.println(getPrimitive("123.999999999999999999999999")); // BigDecimal
}

static public Object getPrimitive(String string)
{
  try { return Byte.valueOf(string);       } catch (Exception e) { };
  try { return Short.valueOf(string);      } catch (Exception e) { };
  try { return Integer.valueOf(string);    } catch (Exception e) { };
  try { return new BigInteger(string);     } catch (Exception e) { };
  try { if (string.matches(".{1,8}"))
          return Float.valueOf(string);    } catch (Exception e) { };
  try { if (string.matches(".{1,17}"))
          return Double.valueOf(string);   } catch (Exception e) { };
  try { return new BigDecimal(string);     } catch (Exception e) { };
  // more stuff ?
  return null;
} 
```

`.{1,8}`and背后的原因`.{1,17}`是`float`and`double`分别精确到大约 7 位和 16 位数字（根据一些随机来源）。`.`是通配符。`{x,y}`表示在 x 和 y 次之间重复。

**编辑：**

改进以区分`float`，`double`并`BigDecimal`使用基本的正则表达式等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:11:20.123

我怀疑你可以很容易地做到这一点。要检测 String 的内容是属于 integer 还是 BigInteger 将非常棘手或几乎不可能。**您当然可以通过编写正则表达式来确定它是否包含“。”**来区分 int 和 double/float 。其余字符是数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T12:15:59.680

我会做这样的事情......这应该适用于 BigInteger 和 BigDecimal ......虽然还没有测试过。

```
public Object getPrimitive(String primitiveAsString) {
    String value = primitiveAsString;

    try {
      return Byte.valueOf(value);
    } catch (NumberFormatException ex) { }

    try {
      return Short.valueOf(value);
    } catch (NumberFormatException ex) { }

    try {
      return Integer.valueOf(value);
    } catch (NumberFormatException ex) { }

    try {
      return Float.valueOf(value);
    } catch (NumberFormatException ex) { }

    try {
      return Double.valueOf(value);
    } catch (NumberFormatException ex) { }

    try {
      return Long.valueOf(value);
    } catch (NumberFormatException ex) { }

    try {
      return new BigInteger(value);
    } catch (NumberFormatException ex) { }

    try {
      return new BigDecimal(value);
    } catch (NumberFormatException ex) { }

    if(value.length() == 1) {
      return new Character(value.charAt(0));
    }

    return null;
} 
```

*编辑*：改进了解决方案以适应输入为 BigInteger/BigDecimal 的情况。此解决方案不使用任何正则表达式。

# c# - How to find all opened tags using regular expression

> ID：15569702
> 
> 赞同：-1
> 
> 时间：2013-03-22T11:55:21.500
> 
> 标签：c#, xml, regex

```
<meals>
    <breakfast>
         Eggs and Toast
    </breakfast>
    <lunch>
         Salad and soup 
```

this is my XML.I just wanted to get Opened Tag(Lunch,Meals) from this xml using regular expression. Please help me.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:01:12.733

这个答案[更重要一点](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)（它是关于 HTML，但也涉及 XML）。

如果这不吓到你，至少试着让问题更具体（这只是一种 XML？什么“饭菜”？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:05:21.267

要获取左右尖括号之间的数据（左括号后面没有正斜杠），可以使用以下表达式：

```
<([^<>/]+)> 
```

...其中第一个（也是唯一的）捕获组将包含标签的名称；“group 0”将包含整个匹配项——名称和括号。

# smtp - PHP邮件程序，gmail smtp不从实时服务器发送电子邮件

> ID：15569706
> 
> 赞同：0
> 
> 时间：2013-03-22T11:55:29.490
> 
> 标签：smtp

我有以下代码来发送电子邮件：

```
$mail->IsSMTP();
        $mail->Host = 'imap.gmail.com';
        $mail->SMTPAuth = true;
        $mail->Username = 'my gmail id';
        $mail->Password = 'mypassword';
        $mail->SetFrom('info@somedomain.com', 'Bilafon');
        $mail->Subject = $subject;
        $mail->AltBody = 'To view the message, please use an HTML compatible email viewer!';
        $mail->MsgHTML($body);
        $mail->AddAddress($email_id, $user_name);
        return $mail->Send(); 
```

它从本地主机发送电子邮件，而不是从实时服务器发送电子邮件。在实时服务器上，它显示此错误：

```
SMTP Error: Could not authenticate 
```

任何形式的帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:01:39.347

检查您的 gmail 设置。可能从那里禁用了 SMTP。

# php - html 中的多个表单，其中 enctype="multipart/form-data"

> ID：15569713
> 
> 赞同：1
> 
> 时间：2013-03-22T11:56:01.570
> 
> 标签：php, html

我正在尝试发送两种形式，一种`enctype="multipart/form-data"`用于文件上传，另一种没有。我的问题是其中只有一个在工作。提交按钮不会发送两个表单。

我试过的：

```
<?php
echo '<form method="post" action="' . $PHP_SELF . '">';

....

echo '<input type="submit" name="submit" value="Submit"><br>';
echo "</form>";

echo '<form action="' . $PHP_SELF . '" method="post" enctype="multipart/form-data"> 
      <label for="file">Filename:</label>
      <input type="file" name="file" id="file"><br>
      <input type="submit" name="submit" value="Submit"></form>';

if (isset($_FILES["file"]["name"])){
    $file_name = $_FILES['file']['name'];

    if ($_FILES["file"]["error"] > 0) {
        echo "Error: " . $_FILES["file"]["error"] . "<br>";
    } else {
        echo "Upload: " . $_FILES["file"]["name"] . "<br>";
        echo "Type: " . $_FILES["file"]["type"] . "<br>";
        echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
        echo "Stored in: " . $_FILES["file"]["tmp_name"];
        move_uploaded_file($_FILES['file']['tmp_name'], '../images/' . $file_name);
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T11:57:56.477

这就是它在 HTML 中的工作方式。您一次只能发送一份表格。唯一的解决方法是仅使用一种形式发送所有数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T12:13:11.927

***只需尝试以下内容：***

```
<?php
echo '<form method="post" action="' . $PHP_SELF . '">';

....

echo '<input type="submit" name="Submit_Button_One" value="Submit"><br>';
echo '</form>';

echo '<form action="' . $PHP_SELF . '" method="post" enctype="multipart/form-data"> 
      <label for="file">Filename:</label>
      <input type="file" name="file" id="file"><br>
      <input type="submit" name="Submit_Button_Two" value="Submit"></form>';

/*First Form Submit*/

if(isset($_POST['Submit_Button_One']))
{
$dataValue = $_POST['data'];    
}

/*Second Form Submit*/

if(isset($_POST['Submit_Button_Two']))
{
  if(isset($_FILES["file"]["name"])){

     $file_name = $_FILES['file']['name'];

     if($_FILES["file"]["error"] > 0) {
        echo "Error: " . $_FILES["file"]["error"] . "<br>";
     }  else {
        echo "Upload: " . $_FILES["file"]["name"] . "<br>";
        echo "Type: " . $_FILES["file"]["type"] . "<br>";
        echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
        echo "Stored in: " . $_FILES["file"]["tmp_name"];
        move_uploaded_file($_FILES['file']['tmp_name'], '../images/' . $file_name);
     }
   }
}

?> 
```

我认为这可以帮助您解决问题。

**注意：**为提交按钮提供不同的名称。然后可以从这两种形式中获取您希望的数据。

# magento - File location of phtml file of backend admin page

> ID：15569714
> 
> 赞同：0
> 
> 时间：2013-03-22T11:56:01.893
> 
> 标签：magento, directory

I installed an extension to add custom fields to customer registration form.I want to add some option value in dropdown menu box of input validation in backend admin page..could you plz tell me the path of the folder where can I find the phtml file which is responsible for that part ?

-Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:38:27.983

您要查找的文件位于：

```
app/design/adminhtml/default/default/template 
```

但是仅仅更改 .phtml 文件并不能完成这项工作。应该扩展客户模型本身以提供额外的字段。因此，我强烈建议您为此编写一个模块，而不是更改 Magento 核心代码。这是为了确保您将来仍然可以使用更新。

编写这样的模块需要对 Magento 有更深入的了解。有关自定义 adminhtml 的更多信息，请参见[此处](http://www.magentocommerce.com/wiki/4_-_themes_and_template_customization/admin/changing_the_adminhtml_template)。

有关扩展核心功能的信息，请查看[此处](http://alanstorm.com/category/magento)。

如果您不想自己编程，请查看 Magento Connect 上的客户属性模块。

# r - 在 rstudio 中安装 rgdal 库 - 在 libgdal 中找不到 GDALAllRegister

> ID：15569720
> 
> 赞同：6
> 
> 时间：2013-03-22T11:56:12.087
> 
> 标签：r, ubuntu, rstudio, gdal, rgdal

我正在尝试使用 Ubuntu 12.10 (quantal) 和 R 2.15.1 (Roasted Marshmallows) 在 Rstudio (0.97.332) 中安装 rgdal 库。

我在 Ubuntu 中安装了关于 gdal 的以下内容：

```
$ apt-cache search gdal
dans-gdal-scripts - GDAL contributed tools by Geographic Information Network of Alaska
gdal-bin - Geospatial Data Abstraction Library - Utility programs
libgdal-dev - Geospatial Data Abstraction Library - Development files
libgdal-doc - Documentation for the Geospatial Data Abstraction Library
libgdal-perl - Perl bindings to the Geospatial Data Abstraction Library
libgdal-ruby - Ruby bindings to the Geospatial Data Abstraction Library
libgdal-ruby1.8 - Ruby 1.8 bindings to the Geospatial Data Abstraction Library
libgdal1 - Geospatial Data Abstraction Library
libgdal1-1.9.0-grass - GRASS extension for the GDAL library
libgdal1-dev - Geospatial Data Abstraction Library - Development files
python-gdal - Python bindings to the Geospatial Data Abstraction Library
qlandkartegt - GPS mapping (GeoTiff and vector) and GPSr management 
```

我也安装了项目：

```
$ apt-cache search proj-
libproj-dev - Cartographic projection library (development files)
proj-bin - Cartographic projection library (tools)
proj-data - Cartographic projection filter and library (datum package)
proj-ps-doc - PostScript docs for cartographic projection filters and library
$ apt-cache search proj.4
libgeo-proj4-perl - PROJ.4 library for cartographic projections
python-mpltoolkits.basemap - matplotlib toolkit to plot on map projections
python-mpltoolkits.basemap-data - matplotlib toolkit to plot on map projections (data package)
python-mpltoolkits.basemap-doc - matplotlib toolkit to plot on map projections (documentation)
python-pyproj - Python interface to PROJ.4 library 
```

现在我启动 rstudio 并运行`install.packages("rgdal",dependencies=TRUE)`我得到以下信息：

```
> install.packages("rgdal",dependencies=TRUE)
Installing package(s) into ‘/usr/local/lib/R/site-library’
(as ‘lib’ is unspecified)
trying URL 'http://cran.rstudio.com/src/contrib/rgdal_0.8-5.tar.gz'
Content type 'application/x-gzip' length 1584889 bytes (1.5 Mb)
opened URL
==================================================
downloaded 1.5 Mb

* installing *source* package ‘rgdal’ ...
** package ‘rgdal’ successfully unpacked and MD5 sums checked
configure: rgdal: 0.8-4
checking for /usr/bin/svnversion... no
configure: svn revision: 449
configure: gdal-config: gdal-config
checking gdal-config usability... yes
configure: GDAL: 1.9.0
checking GDAL version >= 1.7.1... yes
checking for gcc... gcc -std=gnu99
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc -std=gnu99 accepts -g... yes
checking for gcc -std=gnu99 option to accept ISO C89... none needed
checking how to run the C preprocessor... gcc -std=gnu99 -E
checking for grep that handles long lines and -e... /bin/grep
checking for egrep... /bin/grep -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking gdal.h usability... yes
checking gdal.h presence... yes
checking for gdal.h... yes
checking gdal: linking with --libs only... no
checking gdal: linking with --libs and --dep-libs... no
./configure: line 3373: g++: command not found
./configure: line 3388: g++: command not found
configure: Install failure: compilation and/or linkage problems.
configure: error: GDALAllRegister not found in libgdal.
ERROR: configuration failed for package ‘rgdal’
* removing ‘/usr/local/lib/R/site-library/rgdal’
Warning in install.packages :
  installation of package ‘rgdal’ had non-zero exit status 
```

我不知道什么是 GDALAllRegister 以及我的下一步应该是什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T17:33:09.203

检查你是否真的安装了 c++。我怀疑你没有。

```
g++: command not found 
```

# android - 布局：当新布局出现时，启动画面背景仍然显示

> ID：15569723
> 
> 赞同：0
> 
> 时间：2013-03-22T11:56:29.933
> 
> 标签：android, layout, splash-screen

我的布局有问题。在我的活动中，我首先显示一个启动屏幕，然后根据某些条件我需要显示不同的布局。当我显示一个布局时，它看起来像透明的白色（如启动视图），而另一个则可以，因为它的背景颜色匹配用它。当我按下透明白色视图（文本视图）时，它看起来很正常。也就是说，它在按下和释放不同视图的意义上充当按钮。

我尝试提供背景颜色，但仍然存在问题。不幸的是，我只需要为该视图提供白色。

谁能帮我改变我的新布局中显示的透明白色

这是有背景问题的视图布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:background="@color/white"  
 >

<ScrollView 
 android:layout_width="fill_parent"
 android:layout_height="wrap_content"
 android:layout_marginLeft="5dp"
 android:layout_marginRight="5dp"
 >
 <RelativeLayout 
 android:layout_width="fill_parent"
 android:layout_height="wrap_content"
     >
   <TextView
     android:id="@+id/abc"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"

      />
     </RelativeLayout>   
 </ScrollView>

<RelativeLayout 
     android:id="@+id/button_layout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"

    android:paddingBottom="5dp"
    >

<Button 
    android:id="@+id/btn1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:text="@string/btn1"
    android:background="@drawable/btn1"

    />
 <Button 
    android:id="@+id/btn2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:text="@string/btn2"
    android:background="@drawable/btn2" 
   />

</RelativeLayout> 
```

在代码中

```
oncreate(){
setcontentview(splashscreen)
setview()
}

void setview(){
if(condition1){
            setContentView(R.layout.a1);

}
else{
       setContentView(R.layout.a2);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T12:00:59.550

当飞溅结束时，您为什么不转移到另一个活动？像[这样](http://www.itcuties.com/android/how-to-create-android-splash-screen/)。只是为了这样，我在这里复制该页面的代码：

```
package com.itcuties.tutorial.android;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.Window;
import android.view.WindowManager;

public class SplashActivity extends Activity {

   private static String TAG = SplashActivity.class.getName();
   private static long SLEEP_TIME = 5;    // Sleep for some time

   @Override
   protected void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);

      this.requestWindowFeature(Window.FEATURE_NO_TITLE);    // Removes title bar
      this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);    // Removes notification bar

      setContentView(R.layout.splash);

      // Start timer and launch main activity
      IntentLauncher launcher = new IntentLauncher();
      launcher.start();
   }

   private class IntentLauncher extends Thread {
      @Override
      /**
       * Sleep for some time and than start new activity.
       */
      public void run() {
         try {
            // Sleeping
            Thread.sleep(SLEEP_TIME*1000);
         } catch (Exception e) {
            Log.e(TAG, e.getMessage());
         }

         // Start main activity
         Intent intent = new Intent(SplashActivity.this, MainActivity.class);
         SplashActivity.this.startActivity(intent);
         SplashActivity.this.finish();
      }
   }
} 
```

# ruby-on-rails - Rails 文本格式

> ID：15569725
> 
> 赞同：2
> 
> 时间：2013-03-22T11:56:45.737
> 
> 标签：ruby-on-rails, ruby

我有一个允许用户输入文本的 rails 应用程序。我想知道如何使该文本格式化？

例如，当用户在文本输入字段中创建一个新段落时，我希望在渲染要显示的文本时显示这些间隙，但目前它只是一大块没有空格的文本。

有什么建议么？

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T12:00:26.803

当用户`<Enter>`在文本输入（或文本区域）中使用字符时，它将正确显示在其中。

Rails 对这个角色没有特别的特征。然后，当您渲染它时，您会创建一些 HTML，例如`<%= my_text %>`. 但是`<Enter>`字符不会在 HTML 中呈现。

您可以使用 simple_format 来做到这一点：它将所有`\n`(enter caracters) 替换为 some `<br/>`。

[http://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-simple_format](http://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-simple_format)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-22T12:21:29.653

[在此处](http://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html)使用 simple_format文档。我相信它会工作，

这里我如何在我的项目中使用它；

```
= simple_format my_text 
```

在哪里

```
my_text = "foo bar
Testing helloworold foo bar
Testing helloworld foo bar
Testing helloworld foo bar
Testing helloworld foo bar
Testing helloworld foo bar
" 
```

这将与您在文本中给出的输入一起显示，并且还将呈现所有空格。

# asp.net - 如何在 GridView 中使用 DataFormatString 修改货币格式

> ID：15569727
> 
> 赞同：2
> 
> 时间：2013-03-22T11:56:49.723
> 
> 标签：asp.net, formatting

我将如何显示该值，例如：

```
851839.850000 
```

用逗号和句点格式显示其货币等值：

```
£851,839.85 
```

通过使用`DataFormatString`？目前我有`£{0:c2}`，但显然这还不够，因为它给了我

```
£851839.850000 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T14:53:28.253

原来被绑定的原始值实际上是字符串格式。简化确保它以十进制形式传入允许格式化：

> ￡{0:C}

以按预期精确工作并格式化为正确的十进制值，并在值之前放置一个 £（英国英镑）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-11T06:51:00.843

定义文化

```
<%@ Page Language="C#" MasterPageFile="~/MasterPage.master" 
    CodeFile="Search.aspx.cs" Inherits="Search_aspx" Title="Search"  
    UICulture="hi-IN" Culture="hi-IN" %> 
```

[从此列表中](http://www.massimilianobianchi.info/max/articles/22/UI-culture-list-and-codes.aspx)查找文化代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T13:47:30.550

你可以试试 `£{0:N2}`，看看有没有用。

货币格式基于当前的`NumberFormatInfo`. `C2`应该适合您，具体取决于您当前的文化，但由于它不适合您，您可能需要查看[NumberFormatInfo](http://msdn.microsoft.com/en-us/library/system.globalization.numberformatinfo.aspx)信息。

这里有更多关于货币格式的信息： [货币（“C”）格式说明符](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx#CFormatString)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-09T18:55:20.957

在文本框中显示..尝试

```
textbox.text = Format(Value,"$#,###.00") 
```

# java - 混淆了 Maven 的工作方式（删除 pom 后仍然有效）

> ID：15569731
> 
> 赞同：0
> 
> 时间：2013-03-22T11:56:56.617
> 
> 标签：java, android, maven, guava

我创建了一个 Android 项目。并在 onCreate() 中使用了 guava 类

```
Multimap multimap; 
```

然后它显示错误，因为没有库。`guava`所以我将它转换为 Maven 项目并在 pom.xml 中添加了这样的依赖项

```
<dependencies>
<dependency>
    <groupId>com.google.guava</groupId>
    <artifactId>guava</artifactId>
    <version>14.0-rc3</version>
</dependency>
</dependencies> 
```

所以它现在可用并且错误消失了。现在我通过转到选项来禁用项目的 Maven 特性

```
right click-->maven-->disable maven nature 
```

然后我删除了 pom.xml 并从里面删除了 guava 文件夹`.m2/com/google`。我还删除了里面的我的项目名称文件夹`.m2/repository`。所以现在我猜

```
Multimap multimap; 
```

并且它的导入行应该显示错误。但它仍然可以正常工作而没有显示错误。我删除了 gen 和重建，我删除了 bin 和重建。项目仍然工作正常，但它不应该。知道为什么我的项目不工作。

# java - 不同实现的相同单元测试

> ID：15569732
> 
> 赞同：18
> 
> 时间：2013-03-22T11:57:01.703
> 
> 标签：java, mstest

假设我有两个搜索算法的实现，它们为相同的输入返回相同的结果。它们都实现了相同的接口。

如何使用单个`[TestClass]`测试两个实现，而不是创建两个最终具有相同逻辑的测试文件？

我可以告诉 MSUnit 使用不同的构造函数参数两次启动其中一个测试吗？
也许我应该（n）以某种方式注入它？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-24T21:18:33.873

使用[抽象测试类](http://c2.com/cgi/wiki?AbstractTestCases)：

```
[TestClass]
public abstract class SearchTests
{
    private ISearcher _searcherUnderTest;

    [TestSetup]
    public void Setup()
    {
        _searcherUnderTest = CreateSearcher();
    }

    protected abstract ISearcher CreateSearcher();

    [TestMethod]
    public void Test1(){/*do stuff to _searcherUnderTest*/ }

    // more tests...

    [TestClass]
    public class CoolSearcherTests : SearcherTests
    {
         protected override ISearcher CreateSearcher()
         {
             return new CoolSearcher();
         }
    }

    [TestClass]
    public class LameSearcherTests : SearcherTests
    {
         protected override ISearcher CreateSearcher()
         {
             return new LameSearcher();
         }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T12:39:57.847

您已用 标记您的问题`NUnit`，但您询问的是`MSTest`。您所问的问题可以通过 NUnit 中的参数化测试装置来实现。我对 MSTest 不够熟悉，无法在那里提出等效的方法，快速搜索表明 MSTest 可能没有此功能。

在 NUnit 中，您通过将多个`[TestFixture(...)]`属性应用于具有不同参数的夹具类来参数化测试夹具。这些参数将传递给夹具构造函数。

由于可以传递的参数类型有限制，您可能需要在指定算法时传递一个字符串，然后在构造函数中将提供搜索算法的委托或对象分配给成员字段，该字段用于测试。

例如：

```
using System;
using System.Collections.Generic;
using NUnit.Framework;

namespace MyTests
{
    public static class SearchAlgorithms
    {
        public static int DefaultSearch(int target, IList<int> data)
        {
            return data.IndexOf(target);
        }

        public static int BrokenSearch(int target, IList<int> data)
        {
            return 789;
        }
    }

    [TestFixture("forward")]
    [TestFixture("broken")]
    public class SearchTests
    {
        private Func<int, IList<int>, int> searchMethod;

        public SearchTests(string algorithmName)
        {
            if (algorithmName == "forward")
            {
                this.searchMethod = SearchAlgorithms.DefaultSearch;
                return;
            }

            if (algorithmName == "broken")
            {
                this.searchMethod = SearchAlgorithms.BrokenSearch;
            }
        }

        [Test]
        public void SearchFindsCorrectIndex()
        {
            Assert.AreEqual(
                1, this.searchMethod(2, new List<int> { 1, 2, 3 }));
        }

        [Test]
        public void SearchReturnsMinusOneWhenTargetNotPresent()
        {
            Assert.AreEqual(
                -1, this.searchMethod(4, new List<int> { 1, 2, 3 }));
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T11:59:53.023

我宁愿有两个不同`[TestMethod]`的一个，`[TestClass]`每个测试一个实现：这样一个失败的测试总是会正确地指出你哪个实现出错了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T12:02:10.413

如果您使用的是 NUnit，您可以传递在属性 [http://www.nunit.org/index.php?p=testCase&r=2.5.6中声明的变量](http://www.nunit.org/index.php?p=testCase&r=2.5.6)

如果你使用类似的东西：

```
[TestCase(1)]
[TestCase(2)]
public void Test(int algorithm)
{
//..dostuff
} 
```

如果将为 1 运行一次，为 2 运行一次，也使用相同的设置/拆卸 :)

MSTest 中没有等价物，但是您可以按照此处的说明对其进行一些伪造： [MSTest 是否具有与 NUnit 的 TestCase 的等价物？](https://stackoverflow.com/questions/1010685/does-mstest-have-an-equivalent-to-nunits-testcase)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-08T18:01:07.047

我不能说我对这种方法非常满意，但这就是我最终要做的。然后我去寻找更好的方法并发现了这个问题。这种方法符合标准，1）我正在使用 MS Test，2）我只编写了 1 次测试逻辑，3）我可以判断哪个实现失败（双击测试将带我进入正确的测试类） . 这种方法使用一个基类来包含所有实际的测试逻辑，然后为每个实现（我有 3 个）使用派生类，在基接口上设置特定实现并覆盖基测试方法。

```
[TestClass]
public abstract class SearchTestBase
{
    protected ISearcher Searcher { get; set; }

    [TestMethod]
    public virtual void Find_Results_Correct()
    {
        // Arrange (code here)
        // Act (single line here)
        var actual = Searcher.Results(input);
        // Assert
    }
}

(different file...)
[TestClass]
public class FastSearcherTest : SearcherTestBase
{
    [TestInitialize]
    public void TestInitialize()
    {
        Searcher = new FastSearcher();
    }

    [TestMethod]
    public override void Find_Results_Correct()
    {
        base.Find_Results_Correct();
    }
}

(different file...)
[TestClass]
public class ThoroughSearcherTest : SearcherTestBase
{
    [TestInitialize]
    public void TestInitialize()
    {
        Searcher = new ThoroughSearcher();
    }

    [TestMethod]
    public override void Find_Results_Correct()
    {
        base.Find_Results_Correct();
    }
} 
```

所以我不喜欢这种方法的是，每次我想添加一个测试时，我都需要去每个测试文件并覆盖新的测试方法。我喜欢的是你的 3 个要求。如果我需要更改测试，我只在一处更改逻辑。我认为这个解决方案相对于由两个测试调用一个方法的类似解决方案的优势是我不必重复代码来设置正确的实现。在此解决方案中，您只有一行调用 base.TestName()，而不是两行，一行用于设置搜索器，另一行用于调用测试。Visual Studio 还使编写速度更快……我只需键入、“覆盖”并获得一个选项列表。自动完成为我写了剩下的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-19T18:36:08.330

根据我的测试进行澄清。

*只要*抽象类和具体类在同一个程序集中，接受的答案（使用抽象类）就可以工作。

如果您希望在不同的程序集中拥有抽象类和具体类，不幸的是，KarlZ 提到的方法似乎是必要的。不知道为什么会这样。在这种情况下，TestExplorer 将不会显示 TestMethod。

此外，接受的答案使用嵌套在抽象类中的具体类。这似乎不是一个要求。

使用 MSTestV2 (1.1.17)、VS2017 进行测试。这是使用的示例类。

```
Assembly 1
    [TestClass]
    public abstract class SampleExternal
    {
        [TestMethod]
        public void SampleTest01()
        {
            Assert.IsTrue(false, this.GetType().Name);
        }
    }

Assembly 2
    [TestClass]
    public abstract class Sample
    {
        [TestMethod]
        public void SampleTest01()
        {
            Assert.IsTrue(false, this.GetType().Name);
        }

        [TestClass]
        public class SampleA : Sample
        {
        }
    }

    [TestClass]
    public class SampleB : Sample
    {
    }

    [TestClass]
    public class SampleC : SampleExternal
    {
    }

    [TestClass]
    public class SampleD : SampleExternal
    {
    } 
```

使用这些，SampleA 和 SampleB 的测试将执行（并且设计失败），但 SampleC 和 SampleD 不会。

# vba - 设置变量 VBA 错误

> ID：15569734
> 
> 赞同：1
> 
> 时间：2013-03-22T11:57:19.170
> 
> 标签：vba, excel, powerpoint, vbe

尝试执行以下子例程时出现错误

“运行时错误：9，下标超出范围”

它突出显示了第一个变量声明。起初我认为这是由于错误的数据类型，但改变和玩弄没有运气。

我也尝试了单元格和范围

```
Public vFolderPath As String
Public vCMFNewPath As String
Public vKBNewPath As String
Public vDPI As Integer

Private Sub SetGlobal()

Dim vGo As String
Dim vTemplateLocation As String
Dim vCMFFilename As String
Dim vKBFilename As String
Dim vDriver As String
Dim vPKG As String

    vDPI = Workbooks("tools.xlsm").Sheets("SETTINGS").Range("B2").Value

    vFolderPath = Workbooks("tools.xlsm").Sheets("SETTINGS").Range("B3").Value & "\" 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T12:05:28.423

代码运行良好，从名为 Tools.xslm 的文件运行。带有一个名为“设置”的选项卡，单元格 B2 中的整数和单元格 B3 中的字符串值。

这在从 Personal xlsb 中的模块或从 Tools.xlsm 中运行时有效。即使您没有声明任何变量，它也可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:00:23.987

试试下面的代码：

```
Public vFolderPath As String
Public vCMFNewPath As String
Public vKBNewPath As String
Public vDPI As Integer

Private Sub SetGlobal()

    Dim vGo As String
    Dim vTemplateLocation As String
    Dim vCMFFilename As String
    Dim vKBFilename As String
    Dim vDriver As String
    Dim vPKG As String

    Dim wkbSetting As Workbook, shtSetting As Worksheet

    On Error Resume Next
    Set wkbSetting = Workbooks("tools.xlsm")
    On Error GoTo 0

    On Error GoTo err_rout
    If Not wkbSetting Is Nothing Then

        On Error Resume Next
        Set shtSetting = wkbSetting.Sheets("SETTINGS")
        On Error GoTo 0

        On Error GoTo err_rout
        If shtSetting Is Nothing Then
            Err.Raise Number:=32, Description:="Sheets Settings not found"
        End If

        vDPI = CInt(shtSetting.Range("B2").Value)
        vFolderPath = shtSetting.Range("B3").Value & "\"

    Else
        Err.Raise Number:=31, Description:="Workbook - tools.xlsm not found"
    End If

Exit Sub
err_rout:
    MsgBox Err.Description, vbInformation

End Sub 
```

# javascript - JSON.stringify(value , replacer) Chrome 和 FF 中的不同结果

> ID：15569737
> 
> 赞同：2
> 
> 时间：2013-03-22T11:57:27.163
> 
> 标签：javascript, json, xpath

我遇到了下一个麻烦，尝试将 JSON.stringify 与“替换器”一起使用。

```
var scriptTag = document.createElement('script');
        scriptTag.type = 'text/javascript';
        scriptTag.src = 'https://wicked-good-xpath.googlecode.com/files/wgxpath.install.js';
        document.body.appendChild(scriptTag);

function censor(censor) {
  var i = 0;

  return function(key, value) {

console.log(i,typeof(censor),'=====',typeof(value), value);    
    if(i !== 0 && /*typeof(censor) === 'object' && typeof(value) == 'object' && */ censor == value) 
      return null; 
console.log(i,typeof(censor),'=====',typeof(value), value); 
    if(i >= 29) // seems to be a harded maximum of 30 serialized objects?
      return null;
console.log(i,typeof(censor),'=====',typeof(value), value); 
    ++i; // so we know we aren't using the original object anymore

    return value;  
  };
}

XPathResult = document.evaluate('**<SOME XPATH HERE>**', document, null, XPathResult.ANY_TYPE, null);
var actualNode = XPathResult.iterateNext();
                    var result = [];
                    while (actualNode) {
                        result.push(jQuery.makeArray(actualNode));
                        actualNode = XPathResult.iterateNext();
                    }
console.log(result);                
console.log("Result: ", JSON.stringify(result, censor(result))); 
```

或[粘贴箱](http://pastebin.com/6WGfgP6K)

问题是在 DevTools 和 Firebug 中的 'JSON.stringify(result, censor(result)));' 是不同的 -

*铬输出：*

```
console output of **30** objects

Result:  [[{"width":"","vAlign":"","scope":"col","rowSpan":1,"noWrap":false,"height":"","headers":"","colSpan":1,"chOff":"","ch":"","bgColor":"","axis":"","align":"","abbr":"","cellIndex":4,"spellcheck":true,"isContentEditable":false,"contentEditable":"inherit","children":{"length":0},"outerText":"PUBLICATION DATE","outerHTML":"<th scope=\"col\" class=\"sortDesc byPublicationDate\" style=\"cursor: pointer;\">PUBLICATION DATE</th>","innerText":"PUBLICATION DATE","innerHTML":"PUBLICATION DATE","accessKey":"","hidden":false,"webkitdropzone":null,"draggable":null,"tabIndex":null,"dir":null,"translate":null,"lang":null,"title":null,"id":null,"webkitShadowRoot":null,"webkitPseudo":null,"childElementCount":null,"nextElementSibling":null,"previousElementSibling":null,"lastElementChild":null,"firstElementChild":null,"dataset":null,"classList":null,"className":null,"scrollHeight":null,"scrollWidth":null,"scrollTop":null,"scrollLeft":null,"clientHeight":null,"clientWidth":null,"clientTop":null,"clientLeft":null,"offsetParent":null,"offsetHeight":null,"offsetWidth":null,"offsetTop":null,"offsetLeft":null,"style":null,"tagName":null,"parentElement":null,"textContent":null,"baseURI":null,"localName":null,"prefix":null,"namespaceURI":null,"ownerDocument":null,"attributes":null,"nextSibling":null,"previousSibling":null,"lastChild":null,"firstChild":null,"childNodes":null,"parentNode":null,"nodeType":null,"nodeValue":null,"nodeName":null,"jQuery17109208346924278885":null}]] 
```

*和FF输出：*

```
*console output of **3** objects

Result: 
[[{"jQuery171005647180282625541":13}]]* 
```

有人可以解释一下，为什么它在这些浏览器中的工作方式不同，我该如何修改它以便它在 FF 中与 GH 一样工作？顺便说一句 - “结果”本身在两种浏览器中都是相同的。

PS我用[那个问题](https://stackoverflow.com/questions/4816099/chrome-sendrequest-error-typeerror-converting-circular-structure-to-json)来创建 censor()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-15T21:48:59.407

使用`censor`通过引用而不是值传递的回调，然后简化实现：

```
var censor = "";
function censorRun(key, value)
   {
    if(censor == value) 
      return null; 
    else
      return value;  
   }

JSON.stringify(result, censor); 
```

# svn - Redmine 和颠覆

> ID：15569744
> 
> 赞同：2
> 
> 时间：2013-03-22T11:57:48.927
> 
> 标签：svn, repository, redmine, webdav

我在尝试配置 Redmine 以使用我的 Subversion 存储库时遇到问题。我已经修改了 configuration.yml 文件，以便它调用：

```
scm_subversion_command: svn 
```

并且还尝试使用 svn 的完整路径（如**Andriy Lesyuk**所建议）

```
scm_subversion_command: /usr/bin/svn 
```

我还启用了“DAV svn”，如本指南所示 -> [http://www.redmine.org/projects/redmine/wiki/Repositories_access_control_with_apache_mod_dav_svn_and_mod_perl](http://www.redmine.org/projects/redmine/wiki/Repositories_access_control_with_apache_mod_dav_svn_and_mod_perl)

这是我的 dav_svn.conf

```
 # /svn location for users
   PerlLoadModule Apache::Redmine
   <Location /svn>
     DAV svn
     SVNParentPath "/var/svn" 
     Order deny,allow
     Deny from all
     Satisfy any
     LimitXMLRequestBody 0

     SVNPathAuthz off

     PerlAccessHandler Apache::Authn::Redmine::access_handler
     PerlAuthenHandler Apache::Authn::Redmine::authen_handler
     AuthType Basic
     AuthName "Redmine SVN Repository" 

     #read-only access    
     <Limit GET PROPFIND OPTIONS REPORT>
        Require valid-user
        Allow from redmine.server.ip
        # Allow from another-ip
         Satisfy any
     </Limit>
     # write access
     <LimitExcept GET PROPFIND OPTIONS REPORT>
       Require valid-user
     </LimitExcept>

     ## for mysql
     RedmineDSN "DBI:mysql:database=redmine;host=localhost" 

     RedmineDbUser "redmine" 
     RedmineDbPass "mypassword" 
  </Location> 
```

我得到的是一个带有“！”的圆圈 在设置页面上，以及

> scm 命令不可用。请检查管理面板上的设置

在项目设置-> 存储库页面中，当我尝试添加 Subversion 存储库时。

有人可以告诉我有什么问题吗？

我使用 Ubuntu Linux 作为服务器，当我输入

```
svn 
```

或者

```
svn --version 
```

我得到了预期的输出。

我认为了解我为安装 Redmine 所做的工作可能很有用，因此，我遵循了本指南（安装最新的稳定版 2.3.0 代替那里写的那个）： [http ://www.redmine.org/项目/redmine/wiki/HowTo_Install_Redmine_212_in_Ubuntu_1210_and_Apache_Passenger](http://www.redmine.org/projects/redmine/wiki/HowTo_Install_Redmine_212_in_Ubuntu_1210_and_Apache_Passenger)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T13:02:07.777

我尝试了上面的事情，但它没有帮助。

此外，我必须为运行 Redmine 的用户设置日志文件的所有权和写入权限。就我而言，那是 www-data。

```
# fixed my issue
chown www-data:www-data /var/log/redmine_scm_stderr.log 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T01:09:18.207

我认为在评论末尾指出 Easly 的答案很重要，因为这解决了我的问题！

我引用它来把它推到顶部：

简单：为了说清楚，我什至发现了错误在哪里！除了添加 scm_command 你需要添加 scm_stderr 日志文件，一旦我添加了它，svn 就开始在 redmine 上工作

# sqlite - 在 SQLite 数据库中存储 NaN 值

> ID：15569745
> 
> 赞同：7
> 
> 时间：2013-03-22T11:57:53.123
> 
> 标签：sqlite, system.data.sqlite

我想将 NaN 值插入 SQLite 数据库。

我有带有 Id、StringColumn 和 DoubleColumn（不可为空）的 Ent 表，我尝试使用以下 SQL 语句：

```
INSERT INTO Ent (Id, StringColumn, DoubleColumn) VALUES (1, 'NaN test', ????) 
```

我不知道用什么代替'????' 存储 NaN。

我正在使用 System.Data.SQLite 访问数据库 - 也许这也很重要？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-20T11:31:03.047

我问过 SQLite 的人如何处理这个问题：[http](http://system.data.sqlite.org/index.html/tktview/e06c4caff3c433c80616ae5c6df63fc830825e59) ://system.data.sqlite.org/index.html/tktview/e06c4caff3c433c80616ae5c6df63fc830825e59 。他们添加了一个新的连接标志：“GetAllAsText”，现在可以存储 NaN 以及其他标志（Infinity、-Infinity）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-27T22:37:58.730

SQLite 是相当...松懈...关于数据类型。随意将“NaN”放入定义为“double”的列中。或“无限”。或“双”，就此而言。SQLite 不在乎。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T12:45:38.747

SQLite 没有 NaN 值的文本表示。

在 SQL 中，特殊`NULL`的在计算中的行为相似，并且可以用于相同的目的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-27T21:24:07.547

我目前采用的技巧是当 null 不够或不允许时将 -Infinity 存储在 Real 列上（因为该列上有“not null”）。

# android - 我们可以检查列表中是否存在重复图像吗？

> ID：15569746
> 
> 赞同：0
> 
> 时间：2013-03-22T11:57:53.397
> 
> 标签：android, image, list, opencv, duplicates

我是图像处理的新手。我的问题是......

> 我使用相机拍摄图像，然后使用此图像并对照列表容器检查它。如果列表容器包含看起来像此图像的图像，则执行操作，否则不执行。

例子...

1.  我有一张图片“img_one”
2.  我的列表包含“image_one,image_two,image_three”
3.  显示列表有 image_one（即看起来像这张图片）

那么如何根据列表容器中的项目检查此图像并显示哪个图像看起来像此图像？

先谢谢朋友。所有的想法都受到赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T13:57:14.507

这在很大程度上取决于您对“重复”的定义。

如果您正在寻找完全相同的副本（复制粘贴），那么游戏很简单。Safir 提出的方法，只进行了一些性能改进，就可以了。

如果您想找到几乎完全相同的副本，那么这项工作会突然变得异常困难。查看此[检查图像与 OpenCV 的相似性以](https://stackoverflow.com/questions/11541154/checking-images-for-similarity-with-opencv/11541587#11541587)获取更多信息。

现在，回到“简单”的方法，这取决于你必须比较多少张图片。因为将每个图像与包含 1000 张图像的文件夹中的所有其他图像进行比较，您可以获得 1.000.000 次图像读取和比较。（因为您不能一次将它们全部存储在 RAM 中，您将不得不加载和卸载它们一百万次）即使是强大的桌面处理器，这种方式也太多了。

一种简单的方法是对每个图像使用散列函数（如 sha2），然后只比较散列。直方图可能是图像的一个很好的临时“散列”（尽管您可能需要使用 memcmp 仔细检查）。

即使您尝试蛮力方法（将每个图像像素与另一个进行比较），更快的方法是使用 memcmp() 而不是逐个像素地访问图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T12:31:26.880

我认为opencv中不存在这样的功能。您必须自己遍历像素并一一检查。示例代码可以是这样的：

```
bool identical(cv::Mat m1, cv::Mat m2)
{
  if ( m1.cols != m2.cols || m1.rows != m2.rows || m1.channels() != m2.channels() || m1.type() != m2.type() )
    {
      return false;
    }

  for ( int i = 0; i < m1.rows; i++ )
    {
      for ( int j = 0; j < m1.cols; j++ )
        {
          if ( m1.at(i, j) != m2.at(i, j) )
            {
              return false;
            }
        }
    }
  return true;
} 
```

如果您想更快地遍历所有像素，可以查看[OpenCV: Matrix Iteration](https://stackoverflow.com/a/11980590/2194309)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-22T12:40:26.643

我认为比较两张图像有点耗时。但是您可以通过从适配器或您将图像与 ListView 绑定的位置相互比较该图像的二进制文件来检查它。

# c# - 将基类从 System.Object 更改为 Framework.Object 而无需派生

> ID：15569750
> 
> 赞同：-3
> 
> 时间：2013-03-22T11:58:03.267
> 
> 标签：c#, object

我正在为我的项目制作自己的 C# mscorlib。但是有没有办法改变基类命名空间。现在我需要：

`namespace System { public class Object { } }`

但我想要： `namespace Framework { public class Object { } }`

有没有可能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T11:59:19.143

不，你不能那样做。C# 语言规范明确指出类层次结构的根是`System.Object`.

构建替代品`mscorlib`是一项非常艰巨的任务 - 你真的*确定*要这样做吗？

# php - 外部 js 和 css 未在 codeigniter 中加载

> ID：15569752
> 
> 赞同：4
> 
> 时间：2013-03-22T11:58:15.477
> 
> 标签：php, codeigniter

要在 codeignitor 中加载外部 Javascript 文件，我正在使用

```
<script src="<?php echo base_url("application/js/contentslider.js"); ?>" type="text/javascript"></script> 
```

我可以在页面的源代码中看到

```
<script src="http://localhost/cinifb_ci/application/js/contentslider.js" type="text/javascript"></script> 
```

这意味着据我所知，对于我的 CSS 文件，该文件的加载方式非常相似，我使用过

```
<link rel="stylesheet" href="<?php echo base_url(); ?>application/css/default.css" type="text/css" /> 
```

并在页面的源代码中显示为

```
<link rel="stylesheet" href="http://localhost/cinifb_ci/application/css/default.css" type="text/css" /> 
```

这意味着它甚至可以完美加载。（单击源中显示的外部 js/css 链接`403 Forbidden`）。但是它们的效果都没有应用到页面上。它的显示没有错误。我已经在控制器中加载了 URL 帮助程序 `$this->load->helper('url');`

并放在`$autoload['helper'] = array('url');`autoload.php

你能解释一下我哪里出错了。

我了解到要加载外部 JS，我们需要安装 jquery-codeigniter 库。我已经下载了它们并将相应的文件包含在我的应用程序文件夹的相应类似文件夹中。

现在，当我尝试包含`$this->load->library('jquery');`在我的控制器中时，它的显示

```
An Error Was Encountered

Unable to load the requested class: jquery 
```

因此，我请求您帮助我理解为什么 403 Forbidden 在我可以看到它指向 JS/CSS 文件的确切位置时显示，其次如果 jquery-codeigniter 库的安装错误，请指导我。
注意：[http](http://ellislab.com/codeigniter/user-guide/libraries/javascript.html) ://ellislab.com/codeigniter/user-guide/libraries/javascript.html没有帮助我

**编辑：**
我放置的 jquery-codeigniter 库`system/libraries/javascript/`

在系统 .htaccess 文件中，我写成

```
RewriteEngine on
RewriteRule ^$ /index.php [L]
RewriteCond $1 !^(index\.php|images|css|js|video_files|robots\.txt|favicon\.ico)
RewriteRule ^(.*)$ /cinifb_ci/index.php/$1 [L] 
```

在我写的视图中

```
$this->load->helper('url');
<script src="<?php echo base_url("application/js/jquery-1.8.2.js"); ?>" type="text/javascript"></script> 
```

在控制器中

```
$this->load->helper('url');
$this->load->library('javascript');
$this->load->library('javascript/jquery');
$this->load->library('Jquery_ext'); 
```

再次，如果我查看源它指向正确的源，但如果我单击外部 js 文件链接，它仍然显示`403 Forbidden`错误
抱歉冗长的帖子:(
请提出建议..！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:14:37.107

403 隐藏错误意味着 Web 服务器正在拒绝对该特定资源的请求。

我将假设您正在使用提供的 .htaccess 文件来获取漂亮的 url。

在这一行中

```
RewriteCond $1 !^(index\.php|images|robots\.txt) 
```

让它读

```
RewriteCond $1 !^(index\.php|images|robots\.txt|application/js|application/css) 
```

实际上，以上可能是错误的，无论如何，您需要将 css 和 js 文件夹添加到`RewriteCond`例外列表中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T12:35:30.757

最好的方法是创建文件夹assets，然后你需要放css、图片、js等。

在此文件夹中保存 js/contentslider.js，最后在您的标题类型中保存：

```
<script type="text/javascript" src="<?php echo base_url();?>assets/css/js/contentslider.js"></script> 
```

别忘了，你需要在 config.php 中设置 base_url()。

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T13:09:13.647

如果您的文件在您的应用程序文件夹中，您应该将`js`文件夹包含在您的 .htaccess中，`.htaccess`然后将其复制并粘贴到应用程序文件夹之外意味着 root 然后打开它和我提到的过去代码，您只需要`sample`在第 3 行中更改名称与您的网站名称或您的主文件夹

```
 RewriteEngine on
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule .* index.php/$0 [PT,L] 
```

# 更新

# node.js - NPM模块安装错误

> ID：15569755
> 
> 赞同：8
> 
> 时间：2013-03-22T11:58:33.467
> 
> 标签：node.js, proxy, nodes

我收到错误：无法建立隧道套接字，cause=getaddrinfo ENOTFOUND 尝试在 node.js 中安装模块时。似乎有些代理错误。我检查了浏览器设置，代理被禁用。但是当我在命令提示符下检查 npm config get proxy 时，得到 192.168.98.5:8080。如何禁用此功能？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-07-03T11:14:09.110

首先，尝试执行`npm config delete proxy`. 如果你得到类似的东西`Error: ENOENT, unlink '/Users/drlazor/.npmrc'`就可以了；这意味着您没有 npm 配置文件，因此没有代理设置。

其次，验证您没有使用`npm config get proxy`. 你应该得到一个`null`或以上的错误。如果你不断得到不同的结果`null`，你还应该确保你没有设置环境变量`HTTP_PROXY`。

第三也是最后，如果这些都不起作用，请尝试从浏览器访问 URL；毕竟可能是网络问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-22T14:13:44.790

您应该查看[npm](https://npmjs.org/doc/config.html)配置页面，了解如何设置和修改配置值。代理密钥存储用于连接到 npm 存储库的代理服务器。试试这个 ：

```
npm config delete proxy 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-06-14T13:43:44.860

**注意：如果您不在代理后面（即（来自个人计算机）），则此方法有效**

首先执行这个命令

```
npm config edit 
```

npm 配置文件通过将**“;”（分号）**放在行首来打开打开文件中两行后面的注释。

`npm config set proxy [http://proxy.company.com:8080](http://proxy.company.com:8080)`
`npm config set https-proxy [http://proxy.company.com:8080](http://proxy.company.com:8080)`

你完成了。现在安装您想要的任何软件包。

```
npm install -g cordova
npm install -g npm 
```

或您需要安装的其他任何东西

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-02T08:38:10.023

由于代理值格式错误（我只是错过了代理值开头的“http://”），我处于相同的状态并收到此错误。

如果应该设置代理，格式如下（值取决于您的网络）：

> npm config 设置代理[http://proxy.mydomain:3128](http://proxy.mydomain:3128)
> 
> npm 配置设置 https-proxy [http://proxy.mydomain:3128](http://proxy.mydomain:3128)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-12-20T06:47:18.590

如果您的 NPM 配置为使用不同的 NPM 注册服务器（可能您在工作机器上并且未连接到网络/VPN），也会发生这种情况。要查看是否是这种情况：

```
npm config edit 
```

并寻找：

```
registry=http://alternateurl 
```

默认值为：

```
https://registry.npmjs.org/ 
```

您可以连接到您的 VPN/网络或更改该配置以更正。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-06-15T13:33:15.253

您需要设置所有 3 个代理

```
npm config set proxy http://proxy.name.xx:port
npm config set http-proxy http://proxy.name.xx:port
npm config set https-proxy http://proxy.name.xx:port 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-11-20T20:19:44.183

如果您没有代理，请使用以下命令：

```
npm config delete https-proxy
npm config delete proxy 
```

如果您使用代理，请使用：

```
npm config set proxy $PROXY
npm config set http-proxy $PROXY 
```

两者中的任何一个都倾向于工作

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-09-16T14:06:50.317

如果通过终端设置代理或创建**.npmrc**没有帮助，请尝试将**.typingsrc**文件放在 c:\Users\'username' 中，内容如下

```
{
  "proxy": "http://proxy.name.xx:port",
  "https-proxy": "http://proxy.name.xx:port",
  "strict-ssl": false
} 
```

# c - 我如何从 gtk 小部件访问“gseal”值？修改 GtkWidgets

> ID：15569756
> 
> 赞同：0
> 
> 时间：2013-03-22T11:58:35.063
> 
> 标签：c, gtk

GTK 使用该`GSEAL`选项来阻止某人访问 Widget-struct。太好了，因为*C*中的目标编程，您应该像在其他语言中一样使用 get-functions。

因为 的每个值都没有获取函数`GtkButton`，所以我在修改自己的`GtkWidgets`.

我想访问这些值`struct _GtkButton`

```
struct _GtkButton
{
    ....
    guint GSEAL (activate_timeout);
    guint GSEAL (in_button) : 1;
    guint GSEAL (button_down) : 1;
    ....
} 
```

我想为 , 添加一个`on-click`事件`mybutton`，在它们被调用之前取消点击事件，所以我决定重新实现：

```
static void gtk_real_button_pressed(GtkButton *button)
{
    if (button->activate_timeout)
        return;

    button->button_down = TRUE;
    gtk_button_update_state(button);
}

static void gtk_real_button_released(GtkButton *button)
{
    if (button->button_down)
    {
        button->button_down = FALSE;

        if (button->activate_timeout)
            return;

        if (button->in_button)
        {
            // do my own stuff here  and maybe don'tcall "gtk_button_clicked(...)"
            gtk_button_clicked(button);
        }    
        gtk_button_update_state(button);
    }
} 
```

正如我在顶部所说的那样，我现在需要访问`button->in_button`例如。任何人都有线索，可以帮助我吗？:)

* * *

顺便一提：

```
guint GSEAL (button_down) : 1; 
```

我不知道`: 1`在这种情况下有什么用。:O

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T14:26:38.497

您从来不应该访问`GtkButton`实例结构中的这些字段：它们是私有的，并且只能供内部使用（它们不像现代 GTK 代码那样真正私有的原因是因为`GtkButton`早在我们可以在其中添加实例私有数据之前就已经存在`GObject`- 很长的故事）。

该`GtkButton::clicked`信号标记为`RUN_FIRST`，这意味着与该类关联的默认信号处理程序在使用 附加的任何回调之前运行`g_signal_connect()`。

如果你想阻止`GtkButton::clicked`信号被发射（无论如何这不是一个好主意），你可以使用信号发射钩子，或者你可以子类`GtkButton`化并从默认处理程序中停止信号发射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:16:21.003

你不应该**像**这样访问成员变量。**曾经**。这些是私有变量。这就是引入 GSeal 的原因。您的代码可能会因 GTK+ 的更新而中断

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T12:32:16.930

我现在使用这个小功能，使用 gseal 值真的是我不应该做的。

```
typedef struct _GuiOnClickHandler   GuiOnClickHandler;
struct _GuiOnClickHandler
{
    gboolean abortClick;

};

static void gui_recipe_button_clicked(GtkWidget *widget, gpointer data)
{
    GuiOnClickHandler handler;
    handler.abortClick = FALSE;

    g_signal_emit_by_name((gpointer)widget, "on-click", &handler);

    if (handler.abortClick)
        g_signal_stop_emission_by_name((gpointer)widget, "clicked");
}

...somewhere else on init, at first place

    g_signal_connect(GTK_OBJECT (button), "clicked",
            G_CALLBACK (gui_recipe_button_clicked), NULL); 
```

# ruby - 在 Rails 中初始化 ActiveRecord 模型时如何提供参数

> ID：15569765
> 
> 赞同：1
> 
> 时间：2013-03-22T11:58:53.847
> 
> 标签：ruby, ruby-on-rails-3, activerecord

我在这里阅读了有关在处理初始化值时正确初始化 ActiveRecord 模型的不同方法的问题，并且始终与提供默认值有关。我遇到的一个很好的[答案有助于阐明不同的方式。](https://stackoverflow.com/questions/328525/what-is-the-best-way-to-set-default-values-in-activerecord)

但是，如果不赞成重写 ActiveRecord 基本初始化方法，那么当您想像在标准 Ruby 类`initialize(arg1, arg2...)`方法中那样使用值进行初始化时，向 ActiveRecord 模型提供参数的正确方法是什么。

这样你就可以

```
obj = MyObject.new(Obj1, some_num) 
```

我遇到的唯一一件事实际上是覆盖该方法，但在初始化时首先`initialize`调用。`super`然而，这是不赞成的，因为 ActiveRecord 的基类`allocate`在分配的情况下使用实例化 AR 对象，因此最终可能会回避整个初始化方法。

那么，也许还有另一个根本原因，为什么我没有发现提供初始值作为 RoR 中的标准做法？

我知道我可以在对象中使用验证来验证在不满足要求的情况下无法保存对象，例如设置所有正确的属性。但是我正在接近这个特定的对象，因此在初始化开始时不会在没有所需属性的情况下创建它（因为在初始化时我们将拥有所有这些信息，如果从数据库中检索我们将拥有所有这些值）。

有人可以帮助指导我吗？

**额外的问题** 如果有一种可接受的方式来执行上述操作，那么在使用值初始化对象时似乎需要考虑另一个领域，即从数据库中检索对象时初始化对象。不正确处理初始化值可能会覆盖从数据库中检索到的内容（或者我在将属性设置为默认值时已经阅读过）。那么如果需要妥善处理，我们该怎么做呢？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-22T12:04:46.617

您可以在初始化 ActiveRecord 对象时提供值的散列。这用于`create`控制器的操作中，以根据操作中收集的数据创建新对象`new`。

例如：

```
def create
  @book = Book.new(params[:book]) 
```

其中`params`是新对象的值的哈希值。

# actionscript-3 - 一个按钮在另一个之上

> ID：15569768
> 
> 赞同：0
> 
> 时间：2013-03-22T11:58:57.683
> 
> 标签：actionscript-3, flash-cs5, flash-cs6

我有两个按钮，一个在另一个之上，前面的按钮是可点击的。后面的按钮不可点击。我怎样才能使该按钮也可点击？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:05:33.220

向接受鼠标事件的前景对象下方的任何对象传递单击事件并不容易，因为它会拦截它们的调度。为了手动提供点击事件，您应该在舞台上监听点击，然后运行`getObjectsUnderPoint()`并过滤掉那些您需要接受点击的点击。[这](https://stackoverflow.com/questions/4924558/listen-to-click-event-on-overlapped-sprites)是一个问题，它有一个应该如何工作的例子。

# javascript - 我可以使用什么代码在我的网站上制作视频/动画/声音剪辑以在特定时间后播放？Javascript 可以特别做到这一点吗？

> ID：15569770
> 
> 赞同：1
> 
> 时间：2013-03-22T11:59:10.837
> 
> 标签：javascript, html, video, project, dreamweaver

我正在做一个大学项目，我必须在 Dreamweaver 中创建一个网站，并且必须在不同页面上包含基于时间线的事件。为此，我想要它，例如，当页面加载视频时，将在播放 5 秒后播放一个声音剪辑。

Dreamweaver 中是否有任何东西可以实现这一点？还是用 Javascript 编写代码？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-22T12:04:35.267

```
<!DOCTYPE html>
<html>
<body>

<video width="320" height="240" controls>
  <source src="movie.mp4" type="video/mp4">
  <source src="movie.ogg" type="video/ogg">
  Your browser does not support the video tag.
</video>

</body>
</html> 
```

试试这个作为例子

# http - java.lang.NoClassDefFoundError：JBoss AS 7 中的 org/apache/commons/codec/DecoderException

> ID：15569771
> 
> 赞同：1
> 
> 时间：2013-03-22T11:59:12.137
> 
> 标签：http, jboss7.x, classnotfoundexception, apache-commons-codec

我正在使用在不同服务器上运行的应用程序的 .war 文件进行部署之前测试 JBoss AS 7。

当我尝试通过应用程序登录数据库时出现此错误：

```
SEVERE [] (http--0.0.0.0-8080-4) java.lang.NoClassDefFoundError: org/apache/commons/codec/DecoderException
java.lang.ClassNotFoundException: org.apache.commons.codec.DecoderException from [Module "deployment.app.war:main" from Service Module Loader]
      at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)
      at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
      at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
      at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
      at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
      at org.apache.commons.httpclient.HttpMethodBase.<init>(HttpMethodBase.java:220) 
```

在一些论坛中，他们建议添加 commons-codec jar，但我已经在 J​​Boss 中拥有它，对吧？（在这里`jboss-as-7.1.1.Final/modules/org/apache/commons/codec/main/commons-codec-1.4.jar`：）

OSGi 没有被激活，坦率地说，我不知道它的用途是什么，但是当我尝试激活它时，它会与我的战争混淆，因为它无法部署......

我有 JDK，但如果有帮助的话，我没有 JRE。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T21:11:36.773

您的人工制品类不会自动看到模块。你有三种可能：

1.  在你的standalone.xml中定义一个全局模块 [http://javahowto.blogspot.de/2012/09/how-to-create-global-modules-in-jboss.html](http://javahowto.blogspot.de/2012/09/how-to-create-global-modules-in-jboss.html) 这个模块将被你部署的所有工件使用老板。
2.  将其放入您的战争文物中，放入 lib 文件夹。你可以用 Maven 做到这一点。
3.  在 Manifest 中定义显式依赖项。[https://docs.jboss.org/author/display/AS7/Class+Loading+in+AS7](https://docs.jboss.org/author/display/AS7/Class+Loading+in+AS7) 部分依赖：清单条目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:57:29.087

JBoss AS 7 默认不使用 OSGi 进行模块化类加载。它使用 JBoss 模块，因此这与 OSGi 无关。

如果您想使用 JBoss AS 7 提供的 commons-codec，您需要做的是为您的部署[添加一个依赖项。](https://docs.jboss.org/author/display/AS71/Class+Loading+in+AS7)

# mootools - 如何使用 mootools 将“id”添加到 li

> ID：15569775
> 
> 赞同：0
> 
> 时间：2013-03-22T11:59:24.137
> 
> 标签：mootools

在我的代码（mootools）中，我试图向 ul 添加一个新的 li，并且 li 包含一个超链接。我尝试了以下代码：

```
var newLi = new Element('li#internet_sub', { html: '<a style="BACKGROUND-POSITION: 13px -34px" class="sec_net_1" href="javascript:void(0);" id="sec_net_hsi" >Internet</a>' }); 
```

这也是：

```
 var newLi = new Element('li id="internet_sub"', { html: '<a style="BACKGROUND-POSITION: 13px -34px" class="sec_net_1" href="javascript:void(0);" id="sec_net_hsi" >Internet</a>' }); 
```

他们都在 IE 中工作，但在火狐中没有。当我像下面那样删除向 li 添加 id 时，它也在 Firefox 中工作。

```
 var newLi = new Element('li', { html: '<a style="BACKGROUND-POSITION: 13px -34px" class="sec_net_1" href="javascript:void(0);" id="sec_net_hsi" >Internet</a>' }); 
```

请告诉我如何将 id 添加到新的 li 中，它应该可以在两个浏览器中使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:06:39.040

我在最后添加了 id，就像我添加 html 一样。它起作用了。解决方案是这样的：

```
var newLi = new Element('li', { html: '<a cat="tech" style="BACKGROUND-POSITION: 13px -34px" class="sec_net_1" href="javascript:void(0);" id="sec_net_hsi">Internet</a>', id: 'internet_sub' }); 
```

# javascript - 是否可以推迟财产的价值但之前使用它？

> ID：15569776
> 
> 赞同：1
> 
> 时间：2013-03-22T11:59:27.597
> 
> 标签：javascript

是否有可能做这样的事情：

```
var oHelper = {
  ref: null,
  data: {"key":"value"}
}
var oSettingsThing = {
  data: oHelper.ref,
  //....
}

//....some lines before or in other file loaded after
$(document).ready(function() {
  oHelper.ref = doDataStuff( oHelper.data );
  var thing = Framework.crate('module.thing', oSettingsThing );
} 
```

我的目的是尽可能保持`$(document).ready(function(){`干净，如果可能的话，将两个块分隔在单独的文件中。

我认为在设置属性值的变量复制中，通过引用复制会帮助我，但我错了`Framework.crate('module.thing', oSettingsThing );`，值`oHelper.ref`仍然是`null`.

我不明白什么？

我正在使用 ExtJs，它的对象结构相当复杂：

```
var oHelper = {
  ref: null,
  data: {"key":"value"}
}
//....
var oSettingsThing = {
GENERALS:{
    //..
    items: [
        {
            items: [
                {
                    //....
                    store: oHelper.ref,
                }
//.... 
Ext.onReady(function() {

  mc_documentos.stores.STATUS.ref = new Ext.data.SimpleStore(mc_documentos.stores.STATUS.data );
  //I was hopping to at this point have oSettingsThing.GENERALS...data !== null
  var generalsFilters= Ext.create('Ext.form.Panel', oSettingsThing.GENERALS ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:04:39.773

执行`oSettingsThing.data`时将指向`null`. 它不会链接到`oHelper.ref`.

现在，如果你这样做：

```
var oHelper = {
  ref: null
};
var oSettingsThing = {
  data: oHelper, // point to oHelper instead of oHelpder.ref
};

console.log(oSettingsThing.data.ref); // null
oHelper.ref = "somedata";
console.log(oSettingsThing.data.ref); // "somedata" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:09:35.783

那是因为当你给 赋值时`oHelper.ref`，前一个值与符号分离（没有被破坏，因为`oSettingsThing.data`仍然指向它）。

考虑制作`oHelper.ref`一个对象本身：

```
var oHelper = {
    ref: { value: null }
}

var oSettingsThing = {
    data: oHelper.ref
}

// later
oHelper.ref.value = something_else;

oSettingsThing.data.value // something_else 
```

如果你不能改变结构`oSettingsThing`：

```
oSettingsThing.data = oHelper.ref = doDataStuff( oHelper.data ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T12:05:10.793

`null`是一种引用，当它被分配到时`oSettingsThing.data` `null`被分配。

你可以做

```
var thing = Framework.create('module.thing', oHelper.ref ); 
```

# ember.js - 如何处理路由中的 Ember Data 404？

> ID：15569778
> 
> 赞同：8
> 
> 时间：2013-03-22T11:59:44.247
> 
> 标签：ember.js, ember-data

在我的路线中，我有一个尝试从服务器请求模型列表的方法

```
 model: ->
    App.MyModel.find
      projectId: (@modelFor "project").id 
```

现在显然有时这可能会返回 404。

在这种情况发生的那一刻，Ember 只是停止做任何事情。没有渲染视图，没有设置控制器。

**那么如何正确处理 404（即显示错误视图）？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T02:15:48.217

坏消息：现在，当 ember-data 在 find() 上得到 404 时，它什么也没做。完全没有。该模型永远处于“加载”状态。

在我看来，这里没有不完全愚蠢的选择。作为最后的手段，我可​​能会做的是`notFound`在我的 DS.Model 上添加一个属性，而不是返回 404，而是返回 JSON 并`notFound`设置为`true`. 很痛苦，我知道...

--- 我最初提供了一个`find`在`RESTAdapter`. 然后我注意到它`find`没有通过它应该加载的记录实例。因此，不要通过将记录置于错误状态来继续处理 404。

[注意：自 2013 年 3 月以来，ember-data 发生了巨大变化，此答案中的信息可能不再有效]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T17:01:24.763

顺便说一句，“新”BasicAdapter 刚刚发布。我的问题是，这会让处理 404 错误变得更容易吗？

**方法#1**

我的第一种方法——类似于 Christopher 的建议——是添加一个包含 HTTP 状态的附加字段。

```
 status: DS.attr("number"); 
```

然后我使用了这个 AJAX 调用：

```
$.getJSON(url, data).then(null, function(xhr) {
  return {
    id: id,
    statusCode: xhr.status
  };
}).always(function(data) {
  return process(data).load();
}); 
```

这样做是将错误响应 (xhr) 转换为包含请求的 id 和状态代码的哈希。最后，将成功的结果或失败的哈希传递给存储。

这种方法可行，但不是很实用：当您显示所有模型实例的列表时，必须手动过滤掉这些“模拟”实例。

* * *

**方法#2**

另一个想法是创建一个特殊的错误模型。

```
App.Error = App.Model.extend({
  status: DS.attr("number")
}); 
```

以及相应的查询：

```
$.getJSON(url, data).then(null, function(xhr) {
  return App.store.load(App.Error, {}, {
    id: 0,
    status: xhr.status
  });
}).done(function(data) {
  return process(data).load();
}); 
```

这将加载并创建错误模型的新实例并将其放入存储中。

问题在于 Ember 并没有真正“接受”这一点。该应用程序刚刚停止路由，不再执行任何操作。所以这似乎也是一个死胡同:(

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-01T17:25:50.897

我今天也遇到了这个问题。

但是，在查看源代码后，似乎模型实际上已设置为使用 Ember.Evented，我们可以为这些情况添加自己的处理程序。

引起我注意的两个事件是 becomeError 和 didLoad。

就我而言，我能够执行以下操作：

```
// Grab a user by id.
var user_rec = App.User.find( user.id );

// Oh no! Error!
user_rec.on('becameError', function() {
  alert('I could not find you!');
});

// We should be good! Proceed!
user_rec.on('didLoad', function() {
  alert('Your email: '+this.get('email'));
}); 
```

这是 github 上的源代码：[https ://github.com/emberjs/data/blob/master/packages/ember-data/lib/system/model/model.js](https://github.com/emberjs/data/blob/master/packages/ember-data/lib/system/model/model.js)

希望如果这确实是我们应该处理的方式，那么在不久的将来，指南中会添加一些文档。

# mysql - MySQL 中的多个 UPDATE 或 DELETE + INSERT？

> ID：15569783
> 
> 赞同：0
> 
> 时间：2013-03-22T12:00:02.443
> 
> 标签：mysql, sql, performance, insert

哪些操作应该在 MySQL 中执行得更快？假设我有 999 个值要更改：

```
DELETE FROM table WHERE id IN(100, ..., 999);
INSERT INTO example VALUES (100, 'Peter'), (...), (999, 'Sam'); 
```

或者

```
UPDATE table_name SET name='Peter' 
WHERE person_id=100; ...; UPDATE table_name SET name='Sam' WHERE person_id=999; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:12:50.867

由于您只有 900 个行值要更改，因此第一个选项将执行得很快。因为您将只有两个查询要运行。但是，如果您选择第二种选择，那么您将有近 900 个查询要运行，这肯定会很慢。做同样的更好的主意是

```
TRUNCATE FROM table;
INSERT INTO example VALUES (100, 'Peter'), (...), (999, 'Sam'); 
```

因为 truncate 比 delete 工作得更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-03T22:08:05.520

在一般情况下，根据表的当前状态，这两个操作（DELETE/INSERT vs UPDATE）可能会产生显着*不同的结果...... id=999 的行是否存在？*是否存在引用此表的外键约束？表上是否定义了任何触发器？

如果规范是更新表中的行，我会发出 UPDATE 语句，而不是发出 DELETE 和 INSERT。

除了速度之外，还有其他因素需要考虑。

但最快的可能是：

```
 UPDATE example t
    SET t.name  
        = CASE t.id
            WHEN 100 THEN 'Peter'
            WHEN ...
            WHEN 999 THEN 'Sam'
            ELSE t.name
          END
   WHERE t.id IN (100,...999) 
```

# html - min-width 属性在 IE8 兼容模式下存在问题

> ID：15569785
> 
> 赞同：0
> 
> 时间：2013-03-22T12:00:05.727
> 
> 标签：html, css, internet-explorer-8, internet-explorer-7, ie8-compatibility-mode

有一个附加了类**.list的****父 DIV 。****Paretnt DIV**由**8**个具有**position:relative**属性的浮动 div 组成。

 ******Parent Div 具有**min-width属性，当我在****IE8 兼容模式下**打开页面时，它会将**min-width**属性视为**width**属性并连续显示所有 8 个 DIVS。其中应该只显示 3 个 div。

这是HTML代码

```
<div id="list-container">
<div class='list'>
            <div class='item'><h1>1</h1></div>
            <div class='item'><h1>2</h1></div>
            <div class='item'><h1>3</h1>
            </div>
            <div class="item"><h1>4</h1>
            </div>
            <div class='item'><h1>5</h1>
            </div>
            <div class='item'><h1>6</h1>
            </div>
            <div class='item'><h1>7</h1>
            </div>
            <div class="item"><h1>8</h1>
            </div>

        </div>
</div> 
```

CSS 代码

```
.list{
    background:grey;
    min-width:1400px;
    float:left;
}

.item{
    background:green;
    width:140px;
    height:80px;
    margin:5px;
    float:left;
    position:relative;
}
#list-container {
float: left;
overflow: hidden;
width: 450px; 
```

}

它在 Firefox 中完美运行。

更新：我在 IE7 中也看到了同样的问题（使用 IE8 浏览器并将浏览器模式从开发工具切换到 IE7）

**编辑：为了更清楚，我正在添加图像**

IE7和IE8兼容模式

![在此处输入图像描述](../Images/b664b493462a15ae3d09cae975cab391.png)

法郎

![在此处输入图像描述](../Images/211baf4426cce199f4e3ddb883757b8e.png)

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:28:27.657

对于 IE，您应该添加`* html .yourclass{height: 1%;}`修复。你试过了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:15:50.650

您不能为其子元素设置宽度较小的父容器。它总是在某些方面显得古怪。ie8 也不支持最小宽度。尝试删除最小宽度。

如果您向我们展示您真正想做的事情，我们可以提供更多帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T07:39:51.950

您继承了错误的类，使父母和孩子有所不同，这肯定会有所帮助:)看看小提琴

```
 link:  http://jsfiddle.net/MarmeeK/gu3Us/1/ 
```

谢谢你，******

# jquery - 创建一个 Jquery Fade 效果

> ID：15569787
> 
> 赞同：1
> 
> 时间：2013-03-22T12:00:08.257
> 
> 标签：jquery, fadein

我正在调整一个插件，我必须将其从滑动效果更改为淡入淡出。

在翻转时，它当前会将标题 div 滑入视图。我需要让它淡入视野并且我被卡住了（遗憾的是，我不是 JS 程序员，通常可以调整。但我被卡住了）

旧的 JS 代码如下，将 div 向上移动了 106pxs。

```
$(document).ready(function(){
            $('.boxgrid.caption').hover(function(){
                $(".cover", this).stop().animate({top:'15px'},{queue:false,duration:160});
            }, function() {
                $(".cover", this).stop().animate({top:'106px'},{queue:false,duration:160});
            });
        }); 
```

但我无法锻炼如何将效果更改为翻转时的淡入和翻转时的淡出。我会放我的代码，但它很差而且不起作用。我可以对 CSS 进行排序以更改不透明度等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:07:56.417

尝试这个：

```
$(document).ready(function(){
    $('.boxgrid.caption').on('mouseover',function(){
        $(".cover", this).fadeIn();
    }).on('mouseout',function() {
        $(".cover", this).fadeOut();
    });
}); 
```

阅读[http://api.jquery.com/mouseover/](http://api.jquery.com/mouseover/)`mouserover`和[http://api.jquery.com/mouseout/](http://api.jquery.com/mouseout/) _`mouseout`

也适用[于](http://api.jquery.com/fadeOut/)[http://api.jquery.com/fadeIn/](http://api.jquery.com/fadeIn/)`fadeIn`和http://api.jquery.com/fadeOut/`fadeOut`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:07:09.833

如果你想要一个简单的 mouseover mouseout 来淡入和淡出然后使用这种方式：

```
$('.boxgrid.caption').hover(function(){
    $(".cover", this).stop().animate({opacity:'1'},{queue:false,duration:160});
}, function() {
    $(".cover", this).stop().animate({opacity:'0'},{queue:false,duration:160});
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T12:04:00.460

```
$(document).ready(function(){
    $('.boxgrid.caption').hover(function(){
        $(".cover", this).stop().animate({
            opacity: 1
        })
    }, function() {
        $(".cover", this).stop().animate({
            opacity: 0.4
        });
    });
}); 
```

# android - Android：返回按钮中的 onSaveInstanceState

> ID：15569790
> 
> 赞同：4
> 
> 时间：2013-03-22T12:00:21.523
> 
> 标签：android, back, android-button, persist, savestate

我正在开发一个应用程序，我在其中覆盖了后退按钮。我创建了一个复选框。点击我正在调用的意图：

```
startActivityforResult(); 
```

并且还保持活动状态为：

```
@Override
public void onSaveInstanceState(Bundle savedInstanceState) {
  super.onSaveInstanceState(savedInstanceState);
  savedInstanceState.putBoolean("checkbox", checkbox.isChecked());
}

@Override
protected void onRestoreInstanceState(Bundle savedInstanceState) {
  super.onRestoreInstanceState(savedInstanceState);
  checkbox_state = savedInstanceState.getBoolean("checkbox");
} 
```

运行良好并且状态保持不变。表示我在编辑文本中输入值。并在复选框上单击为结果调用新活动，并在返回第一个活动时保持状态。

现在但是从第二个活动开始，如果我单击设备后退按钮，则不会保持状态。

那么我应该怎么做才能保持后退按钮的状态。我搜索但没有找到满意的解决方案。请给我建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:07:21.483

> 现在但是从第二个活动开始，如果我单击设备后退按钮，则不会保持状态。

`onSaveInstanceState()`主要用于配置更改（例如，旋转屏幕）。

> 那么我应该怎么做才能保持后退按钮的状态

最有可能的是，在您的数据模型之外，没有需要“维护”的“状态”。您的活动需要更新其数据模型：文件、数据库、首选项、`ContentProvider`一些作为内存数据模型管理器的单例，等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T12:36:45.067

当您启动新 Activity 时，当前 Activity 将被隐藏，新 Activity 将放置在堆栈顶部。现在，如果您按下新 Activity 上的后退按钮，那么第一个 Activity 应该以其当前状态出现（如果它没有被破坏，则调用 finish()）它离开的地方，即如果复选框被选中，那么它应该保持检查。除非方向改变或活动被破坏，否则您不需要保存活动状态。

你确定你没有在 onActivityResult 或 onResume() 方法中做任何影响复选框状态的事情吗？我建议先注释掉这两种方法中的所有代码，看看你的复选框是否保留了状态。您还可以确保代码本身在启动新活动之前不会取消选中该复选框吗？

# google-maps - 图片导致点击事件触发两次？

> ID：15569793
> 
> 赞同：4
> 
> 时间：2013-03-22T12:00:32.233
> 
> 标签：google-maps, image, onclicklistener

我正在创建一个带有标记和信息窗口的谷歌地图。我希望每个信息窗口都有一个缩放按钮，可以使 Google 地图放大和居中以及相应的标记。

有关示例，请参[见此 jsfiddle](http://jsfiddle.net/kqUwE/14/)。信息窗口的代码比较简单：

```
infoWindowArray[i] = new google.maps.InfoWindow({
    position: latlng,
    content: "<a href='/"+pitches[i].slug+".html'>"+pitches[i].name + " ("+ pitches[i].club+")</a><br /><img width='16' alt='Loupe' src='//upload.wikimedia.org/wikipedia/commons/thumb/4/48/Loupe.svg/32px-Loupe.svg.png'/> <a id='zoom_"+pitches[i].id+"' href='javascript:void(0)'>Zoom In</a>"
}); 
```

但是，我的脚本在 Chrome 中非常有气质，在 Firefox 中总是失败。原因是*一次*单击会以某种方式被触发*两次*。所以这个函数：

```
function setupZoomListeners(object, title, google_position, map){
    google.maps.event.addListener(object, 'domready', function() {
        google.maps.event.addDomListener(document.getElementById("zoom_"+title), 'click', function(){ 

            if (document.getElementById("zoom_"+title).innerHTML == "Zoom In"){
                map.setCenter(google_position);
                map.setZoom(14);
                document.getElementById("zoom_"+title).innerHTML = "Zoom out";
            } else {
                map.setCenter(new google.maps.LatLng(53.5, -2.2));
                map.setZoom(6);
                document.getElementById("zoom_"+title).innerHTML = "Zoom In";
            }

        });
} 
```

正在放大和缩小，因为它听到了两次点击，所以净效果是什么。*但是*，只需删除 infowindow 中的 img 标签似乎就可以解决所有问题。

img 标签的存在是否会导致脚本将单击解释为两次？我见过很多点击次数过多的案例——这通常是什么原因造成的？

谁能建议如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:00:25.487

它两次捕获您的*domready*事件（至少在我的 Firefox 19.0.2 版本中）。您可以看到，如果您像这样启动*zoomListeners*函数：

```
function setupZoomListeners(object, title, google_position, map){
    console.log('zoomListener');
    google.maps.event.addListener(object, 'domready', function() {
        console.log('domReady');
        google.maps.event.addDomListener(... 
```

我不认为*domready*是一个在这里使用的好事件。就个人而言，我只会使用一个 infoWindow 对象并在单击标记时填充不同的 HTML。

在任何情况下，domready 都不打算像您所做的那样用于 dom 的子集。我相信每次您更改标记时它都会触发。因此，当开始的行`document.getElementById("zoom_"+title).innerHTML = ...`被执行时， *domready*事件将再次触发。

# c++ - 为什么可以更改 chars 数组中的字符，而不能使用 char *？

> ID：15569795
> 
> 赞同：2
> 
> 时间：2013-03-22T12:00:44.923
> 
> 标签：c++, arrays, char

如果我声明一个字符数组 ( `char str[]`)，我可以更改其中的任何字符。但是，如果我这样声明该数组 -`char* str="abcd";`就不可能更改内部的任何字符。这是为什么？他们不应该是同一件事吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-22T12:05:53.703

当你声明一个字符数组时

```
char myarr[5] = "abcd"; 
```

这是*你的*阵列。abcd 字母被复制到您的本地数组中，您可以随意使用它。c++ 中的字符串文字（“”中的字符串）的类型为`const char[N]`. 您可以存储指向它的指针

```
const char* p = "abcd" 
```

现在，因为 p 是 const，所以您不能修改字符串文字，这很好。不幸的是，由于历史原因，存在从字符串文字到`char*`

```
char * p = "abcd" 
```

在这种情况下，不幸的是，您可以修改字符串文字，但***这样做会产生未定义的行为***。幸运的是，这种转换已被弃用。

请注意，这是字符串文字的一个独特问题，因为它是唯一的左值文字类型。所有其他文字都是右值，因此没有修改它们的概念。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T12:12:56.793

在前一种情况下，您将数组声明为，

```
 char str[SIZE]; 
```

分配的内存属于你的程序，可以修改。

在后一种情况下，

```
 char* str="abcd" ; // str is a pointer to string literal, essential makes it a const char * 
```

您正在尝试写入只读内存位置并且行为未定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T12:04:00.300

`char*`为字符串保留空间，`Read Only Memory`因此您无法更改它。而`char str[]`在堆栈上。类型变量的`char*`行为类似`const`，因此您无法更改它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T12:05:46.200

如果您创建一个`array of char`=`char[]`这将在包含您放入其中的符号的堆栈上保留空间 + `\0`。因为它在堆栈上，所以可以写入。
但是类似`char *pc = "abcd"`在程序的只读部分中创建一个字符串“abcd”。您只有一个指向只读字符串的指针，或者更确切地说`const char*`。

# java - Android，原生开发工具包：没有找到原生 Lcom/example/hellojni/Mainactivity;.sayHelloWorld ()Ljava/lang/String; 的实现

> ID：15569796
> 
> 赞同：2
> 
> 时间：2013-03-22T12:00:48.330
> 
> 标签：java, android, native

好的，所以...已经到了白手起家的尽头。

尝试学习使用本机开发工具包......当从 C 源代码返回字符串“Hello World”时，从 Hello World 开始。

开始：这是“主要活动”。

```
package com.example.hellojni;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.TextView;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        TextView textView=(TextView) findViewById(R.id.text1);

        textView.setText(sayHelloWorld());
    }

    private native String sayHelloWorld();

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    static {
        System.loadLibrary("HelloJni");
    }

} 
```

为了完整起见，这里是定义显示的 XML。我会向甜甜圈打赌，这不是问题所在，但如果我不提及它，我会在学术上疏忽大意。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <TextView
        android:id="@+id/text1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/hello_world" />

</RelativeLayout> 
```

接下来，我们当然需要javah生成的头文件。

```
/* DO NOT EDIT THIS FILE - it is machine generated */
#include <jni.h>
/* Header for class com_example_hellojni_MainActivity */

#ifndef _Included_com_example_hellojni_MainActivity
#define _Included_com_example_hellojni_MainActivity
#ifdef __cplusplus
extern "C" {
#endif
#undef com_example_hellojni_MainActivity_MODE_PRIVATE
#define com_example_hellojni_MainActivity_MODE_PRIVATE 0L
#undef com_example_hellojni_MainActivity_MODE_WORLD_READABLE
#define com_example_hellojni_MainActivity_MODE_WORLD_READABLE 1L
#undef com_example_hellojni_MainActivity_MODE_WORLD_WRITEABLE
#define com_example_hellojni_MainActivity_MODE_WORLD_WRITEABLE 2L
#undef com_example_hellojni_MainActivity_MODE_APPEND
#define com_example_hellojni_MainActivity_MODE_APPEND 32768L
#undef com_example_hellojni_MainActivity_MODE_MULTI_PROCESS
#define com_example_hellojni_MainActivity_MODE_MULTI_PROCESS 4L
#undef com_example_hellojni_MainActivity_MODE_ENABLE_WRITE_AHEAD_LOGGING
#define com_example_hellojni_MainActivity_MODE_ENABLE_WRITE_AHEAD_LOGGING 8L
#undef com_example_hellojni_MainActivity_BIND_AUTO_CREATE
#define com_example_hellojni_MainActivity_BIND_AUTO_CREATE 1L
#undef com_example_hellojni_MainActivity_BIND_DEBUG_UNBIND
#define com_example_hellojni_MainActivity_BIND_DEBUG_UNBIND 2L
#undef com_example_hellojni_MainActivity_BIND_NOT_FOREGROUND
#define com_example_hellojni_MainActivity_BIND_NOT_FOREGROUND 4L
#undef com_example_hellojni_MainActivity_BIND_ABOVE_CLIENT
#define com_example_hellojni_MainActivity_BIND_ABOVE_CLIENT 8L
#undef com_example_hellojni_MainActivity_BIND_ALLOW_OOM_MANAGEMENT
#define com_example_hellojni_MainActivity_BIND_ALLOW_OOM_MANAGEMENT 16L
#undef com_example_hellojni_MainActivity_BIND_WAIVE_PRIORITY
#define com_example_hellojni_MainActivity_BIND_WAIVE_PRIORITY 32L
#undef com_example_hellojni_MainActivity_BIND_IMPORTANT
#define com_example_hellojni_MainActivity_BIND_IMPORTANT 64L
#undef com_example_hellojni_MainActivity_BIND_ADJUST_WITH_ACTIVITY
#define com_example_hellojni_MainActivity_BIND_ADJUST_WITH_ACTIVITY 128L
#undef com_example_hellojni_MainActivity_CONTEXT_INCLUDE_CODE
#define com_example_hellojni_MainActivity_CONTEXT_INCLUDE_CODE 1L
#undef com_example_hellojni_MainActivity_CONTEXT_IGNORE_SECURITY
#define com_example_hellojni_MainActivity_CONTEXT_IGNORE_SECURITY 2L
#undef com_example_hellojni_MainActivity_CONTEXT_RESTRICTED
#define com_example_hellojni_MainActivity_CONTEXT_RESTRICTED 4L
#undef com_example_hellojni_MainActivity_RESULT_CANCELED
#define com_example_hellojni_MainActivity_RESULT_CANCELED 0L
#undef com_example_hellojni_MainActivity_RESULT_OK
#define com_example_hellojni_MainActivity_RESULT_OK -1L
#undef com_example_hellojni_MainActivity_RESULT_FIRST_USER
#define com_example_hellojni_MainActivity_RESULT_FIRST_USER 1L
#undef com_example_hellojni_MainActivity_DEFAULT_KEYS_DISABLE
#define com_example_hellojni_MainActivity_DEFAULT_KEYS_DISABLE 0L
#undef com_example_hellojni_MainActivity_DEFAULT_KEYS_DIALER
#define com_example_hellojni_MainActivity_DEFAULT_KEYS_DIALER 1L
#undef com_example_hellojni_MainActivity_DEFAULT_KEYS_SHORTCUT
#define com_example_hellojni_MainActivity_DEFAULT_KEYS_SHORTCUT 2L
#undef com_example_hellojni_MainActivity_DEFAULT_KEYS_SEARCH_LOCAL
#define com_example_hellojni_MainActivity_DEFAULT_KEYS_SEARCH_LOCAL 3L
#undef com_example_hellojni_MainActivity_DEFAULT_KEYS_SEARCH_GLOBAL
#define com_example_hellojni_MainActivity_DEFAULT_KEYS_SEARCH_GLOBAL 4L
/*
 * Class:     com_example_hellojni_MainActivity
 * Method:    sayHelloWorld
 * Signature: ()Ljava/lang/String;
 */
JNIEXPORT jstring JNICALL Java_com_example_hellojni_MainActivity_sayHelloWorld (JNIEnv *, jobject);

#ifdef __cplusplus
}
#endif
#endif 
```

下一个自然要看的是 C 源代码......

```
#include "com_example_hellojni_MainActivity.h"

jstring Java_com_example_HelloWorldActivity_sayHelloWorld(JNIEnv* pEnv, jobject thiz) {

    return (pEnv->NewStringUTF("Hello World from C!"));

    //return (*pEnv)->NewStringUTF(env,"Hello World from C!");
} 
```

评论版本，我不记得我从哪里得到的......可能是从一本书中转录出来的。无论如何，它甚至没有编译。我使用的版本对我来说更有意义。也许这就是问题所在。

接下来，这里是 android.mk：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE    := HelloJni
LOCAL_SRC_FILES := HelloJni.cpp

include $(BUILD_SHARED_LIBRARY) 
```

当然......当我把所有这些放在一起时，我得到了一个可以编译并尝试运行的 apk。我这几天一直在拔头发的笑话的妙语如下：

```
03-22 21:34:38.218: I/ActivityManager(322): Start proc com.example.hellojni for activity com.example.hellojni/.MainActivity: pid=20945 uid=10175 gids={}
03-22 21:34:38.278: D/dalvikvm(20945): Trying to load lib /data/data/com.example.hellojni/lib/libHelloJni.so 0x417260f0
03-22 21:34:38.278: D/dalvikvm(20945): Added shared lib /data/data/com.example.hellojni/lib/libHelloJni.so 0x417260f0
03-22 21:34:38.278: D/dalvikvm(20945): No JNI_OnLoad found in /data/data/com.example.hellojni/lib/libHelloJni.so 0x417260f0, skipping init
03-22 21:34:38.318: W/dalvikvm(20945): No implementation found for native Lcom/example/hellojni/MainActivity;.sayHelloWorld ()Ljava/lang/String;
03-22 21:34:38.328: E/AndroidRuntime(20945):    at com.example.hellojni.MainActivity.sayHelloWorld(Native Method)
03-22 21:34:38.328: E/AndroidRuntime(20945):    at com.example.hellojni.MainActivity.onCreate(MainActivity.java:17)
03-22 21:34:38.328: W/ActivityManager(322):   Force finishing activity com.example.hellojni/.MainActivity
03-22 21:34:38.868: W/ActivityManager(322): Activity pause timeout for ActivityRecord{4235a518 com.example.hellojni/.MainActivity}
03-22 21:34:49.008: W/ActivityManager(322): Activity destroy timeout for ActivityRecord{4235a518 com.example.hellojni/.MainActivity}
03-22 21:34:56.208: I/ActivityManager(322): Process com.example.hellojni (pid 20945) has died. 
```

请帮忙。沮丧是巨大的，理智正在消退。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T03:29:08.383

Praful Bhatnagar 的评论很到位。我修复了让我眼前一亮的错误，其他一切都顺理成章。谢谢！

（不确定我是否应该做些什么来正确地将答案归因于说它的人）

# asp.net - GridView 的 ItemTemplate 上的 OnSelectedIndexChanged 未触发

> ID：15569797
> 
> 赞同：0
> 
> 时间：2013-03-22T12:00:52.207
> 
> 标签：asp.net, itemtemplate

我有`GridView`一些`ItemTemplate`，我需要处理这个`SelectedIndexChanged`事件......我手动编写了代码，但它不起作用......检查一下：

`HTML`代码：

```
<asp:TemplateField HeaderText="PROJETO" HeaderStyle-Width="90px" ItemStyle-HorizontalAlign="Center" ItemStyle-Font-Size="12px">
      <ItemTemplate>
          <asp:DropDownList ID="Drop_Projetos" Width="115px" runat="server" OnSelectedIndexChanged="Drop_Projetos_SelectedIndexChanged" EnableViewState="false"
          AutoPostBack="true"></asp:DropDownList>
      </ItemTemplate>
</asp:TemplateField> 
```

这是我的`codebehind`，我放了一个`breakpoint`但它甚至没有被解雇......

```
protected void Drop_Projetos_SelectedIndexChanged(object sender, EventArgs e)
        {
           //SomeCode
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:02:54.177

下拉列表中缺少自动回发`AutoPostBack="true"`

```
<asp:DropDownList ID="Drop_Projetos" Width="115px" runat="server"  AutoPostBack="true"
 OnSelectedIndexChanged="Drop_Projetos_SelectedIndexChanged" EnableViewState="false">    
        </asp:DropDownList> 
```

## 编辑 1

这是一个类似的问题，可以帮助您
[如何在网格视图中添加级联下拉列表以进行编辑？](https://stackoverflow.com/questions/754823/how-can-i-add-cascading-drop-downs-inside-of-a-gridview-for-edits)
[在模板化控件中实现级联 DropDownList 绑定](https://stackoverflow.com/questions/6749944/implementing-cascading-dropdownlist-binding-in-a-templated-control)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T12:03:12.050

您必须添加到 DropDownList：

```
AutoPostBack="true" 
```

然后它将回传到服务器。

# c# - 创建一个对象只是为了订阅其他对象的事件

> ID：15569799
> 
> 赞同：1
> 
> 时间：2013-03-22T12:00:57.103
> 
> 标签：c#, oop, events, event-handling

我相信我的问题不是特定于语言的。

我有一个类，比如说`EventConsumer`，它需要监听其他对象事件，比如说`EventProducer`，（准确地说是.Net`Form`事件）并做出适当的反应，所以它的构造函数参数之一就是那个对象（`public EventConsumer(EventProducer producer, ...)`）。在构造函数中，我订阅了生产者的事件，仅此而已。我真的不需要继续参考消费者。当事件生产者也将被垃圾收集时。

那么，在代码中有这么奇怪的行看起来什么都不做，这可以吗？例如。：

```
new EventObserver(eventConsumer, config); 
```

这是正确的做法吗？这不是有点奇怪吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T07:58:22.233

您说得对，自己创建对象很奇怪——在 6 个月后查看代码时，它几乎肯定会让您（或其他开发人员）感到困惑。

`EventObserver`我会通过在你的类中添加一个静态方法来创建实例，使其更加“友好” ：

```
public static CreateObserver(EventProducer eventProducer)
{
    // Create new instance of EventObserver to handle events from producer
    //  no need to keep track of object as it will be appropriately 
    //  garbage collected.
    new EventOvserver(eventProducer);
} 
```

然后你调用的代码更整洁：

```
EventObserver.CreateObserver(eventProducer); 
```

# objective-c - NSJSONSerialization.JSONObjectWithData 浮点转换/舍入错误？

> ID：15569806
> 
> 赞同：3
> 
> 时间：2013-03-22T12:01:11.417
> 
> 标签：objective-c, ruby, json, rubymotion, rounding-error

我简单的 RubyMotion 代码：

```
data = DataParser.parse(url)
error_ptr = Pointer.new(:object)
json = NSJSONSerialization.JSONObjectWithData(data, options: 0, error: error_ptr) 
```

该 url 是一个天气 API，它提供一个 JSON 格式的浮点数，如`{ "temp_c":22.4, ... }`. 奇怪的是，浮点数**`22.4`**被转换为**`22.3999938964844`**.

如果我检查`data.to_s`温度读数`22.4`，那么我认为错误在`NSJSONSerialization.JSONObjectWithData`.

*   谁能证实这一点？
*   有一个通用的解决方案吗？

我不想强制对所有浮点数进行舍入。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T12:33:49.503

十进制数“22.4”*不能*用二进制浮点数精确表示，例如`float`或`double`。所以*“将浮点数舍入到 22.4”*是没有意义的，因为没有完全等于 22.4 的浮点数。

如果将浮点数转换为十进制字符串以进行输出，则只能指定精度。您可以使用 a`NSNumberFormatter`或 printf 格式，例如`"%.<precision>f`.

# python - 简单的二分搜索没有给出所需的输出

> ID：15569812
> 
> 赞同：0
> 
> 时间：2013-03-22T12:01:30.053
> 
> 标签：python

大家好，我刚开始使用 python 编程。我写了这个通用代码，它会一直二等分，直到找到正确的数字。但它不起作用。代码一直在块内徘徊“如果猜测

```
num=raw_input("choose a number between 0-100 ")
l=0 #lower limit
u=100 #upper limit
guess=(l+u)/2
print num
print "is it =",guess
while guess!=num:

    if guess==num:
        break

    if guess<num:
        l=guess
        guess=(l+u)/2
        print "guessed low,new guess = ",guess

    elif guess>num:
        u=guess
        guess=(u+l)/2
        print "guessed high,new guess = ",guess 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T12:07:37.990

你的条件不起作用，因为`num`是一个字符串。首先将其转换为整数，如下所示：

```
num = int(raw_input("choose a number between 0-100 ")) 
```

# sql-server - 为什么可以从 DATETIME 中减去整数而不是 DATE 类型

> ID：15569817
> 
> 赞同：7
> 
> 时间：2013-03-22T12:02:03.083
> 
> 标签：sql-server, sql-server-2012

DATETIME & INTEGER 和 DATE & INTEGER 的关系是否一致？

这执行得很好：

```
DECLARE @Yesterday DATETIME = GETDATE();
SELECT @Yesterday-1; 
```

就像这样：

```
DECLARE @Yesterday DATE = GETDATE();
SELECT @Yesterday; 
```

这个错误：

```
DECLARE @Yesterday DATE = GETDATE();
SELECT @Yesterday-1; 
```

我可以安全地从 a 中减去一个`integer`类型，`datetime`但不能从 a中减去`date`。
这种行为的原因是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T12:09:31.687

实际上，它是非常一致的。`DATETIME`是从以前版本的 sql server 继承的类型。自 2008 版以来，`DATETIME2`已引入，并删除了加/减整数的可能性。您仍然可以将其`DATETIME`作为遗产。

`DATE`，就像`DATETIME2`自 2008 年以来一直存在的一样，对于这种类型的加/减数字也被禁止。

这会给你一个错误：

```
DECLARE @Yesterday DATETIME2 = GETDATE();
SELECT @Yesterday-1; 
```

所以一切都很好:)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T12:12:53.543

所以这可能会更好：

```
declare @Yesterday DATE = DATEADD(d, -1, getdate())
select @Yesterday 
```

# java - LGPL Xuggle：不支持 ConverterFactory.createConverter

> ID：15569819
> 
> 赞同：1
> 
> 时间：2013-03-22T12:02:15.830
> 
> 标签：java, ffmpeg, xuggler, xuggle

我正在使用 Xuggle 创建一个 mpeg-ts 流。一切都很好，直到我意识到我使用的是 GPL 版本的 ffmpeg，但我不能。

所以我重新编译了整个库，并从 ffmpeg 中删除了 --enable-nonfree 和 --enable-gpl 标志。

问题是现在我的代码会向我抛出错误。

有问题的行是：

```
image = new BufferedImage(width, height, BufferedImage.TYPE_3BYTE_BGR);
IVideoPicture outFrame = ConverterFactory.createConverter(image, IPixelFormat.Type.YUV420P).toPicture(image, timeStamp); 
```

我得到的错误是

```
java.lang.UnsupportedOperationException: Converter class com.xuggle.xuggler.video.BgrConverter constructor failed with: java.lang.IllegalArgumentException: IVideoResampler not supported in this build
    at com.xuggle.xuggler.video.ConverterFactory.createConverter(ConverterFactory.java:347) 
```

问题是我们在 3.3 版本的 Xuggle 中使用了相同的代码，尽管 ffmpeg 向我们发出警告说我们没有硬件加速，但一切正常。

那么这些版本之间有什么重要的变化吗？我该如何克服呢？我在存档中搜索，但到目前为止找不到相关问题。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T20:24:29.107

问题是 Xuggle 3.x 中与 FFmpeg 捆绑的色彩空间转换器仅在 GPL 模式下有效。为什么 FFmpeg 会这样做，我不知道。但这意味着如果你不能使用 GPL 版本的 FFmpeg，那么你就不能使用 Xuggle 中的色彩空间转换器（因为我们使用的是这个）。

# java - java.lang.NumberFormatException：对于输入字符串：“名称”

> ID：15569820
> 
> 赞同：0
> 
> 时间：2013-03-22T12:02:17.737
> 
> 标签：java, spring, hibernate

当我想在我的 jsp 页面中显示列表时，我收到了这个错误

我的 foreach 循环显示列表：

```
<c:forEach  var="list" items="${consultantsList}" varStatus="iter">
<c:out value="${list.name}"></c:out>
 </c:forEach> 
```

我的控制器：

```
@Controller
@RequestMapping("/patient")
public class PatientController {

@Autowired
private PatientService patientService;

@RequestMapping(value="/registerPatient.htm")
public ModelAndView getRegisterPage()
{
    ModelAndView modelAndView=new ModelAndView();
    modelAndView.setViewName("register");
    List<Consultant> list=patientService.getAllConsultant();
    modelAndView.addObject("consultantsList",list);
    modelAndView.addObject("patient", new Patient());

    return modelAndView;
} 
```

当我完全删除 foreach 循环时，jsp 将毫无例外地显示。

例外： `org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.apache.tiles.impl.CannotRenderException: ServletException including path '/WEB-INF/jsp/i1-smhBaseLayout.jsp'. org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.ja va:656) org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549) javax.servlet.http.HttpServlet.service(HttpServlet.java:690) javax.servlet.http.HttpServlet.service(HttpServlet.java:803)` 根本原因：

```
org.apache.tiles.impl.CannotRenderException: ServletException including path '/WEB-INF/jsp/i1-smhBaseLayout.jsp'.
org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:692)
org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:644)
org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:627)
org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:321)
org.springframework.web.servlet.view.tiles2.TilesView.renderMergedOutputModel(TilesView.java:124)
org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250)
org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1047)
org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:817)
org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549)
javax.servlet.http.HttpServlet.service(HttpServlet.java:690)
javax.servlet.http.HttpServlet.service(HttpServlet.java:803) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T09:33:33.197

这里的 ${consultantsList} 是

> ${consultantsList.name}

是一个列表，但是我试图访问它，就好像它是单个用户一样。这是无效的。在 EL 中，只能使用整数索引访问列表，指示您要访问的列表项的位置，就像下面的语句给我的名称一样

> ${顾问[1]}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:04:25.260

您的`<c:out>`标签没有正确写入，因此没有被关闭。你有这个：

```
<c:out value="${list.name}"</c:out> 
```

它应该如下所示：

```
<c:out value="${list.name}"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T12:28:29.360

用 if 条件包装 for each，检查 advisorsList 对象的大小和空值检查。请粘贴即将到来的异常。

# magento - 如何在 Magento 网格中创建新的吸气剂

> ID：15569821
> 
> 赞同：3
> 
> 时间：2013-03-22T12:02:24.810
> 
> 标签：magento, getter

我的自定义模块网格中有以下代码。

```
 $this->addColumn('action',
     array(
            'header'    =>  Mage::helper('module')->__('Action'),
            'width'     => '100',
            'type'      => 'action',
            'getter'    => 'getId',     
            'actions'   => array(
                array(
                    'caption'   => Mage::helper('module')->__('Edit'),
                    'url'       => array('base'=> '*/*/edit'),
                    'field'     => 'id',                
                )
            ),
            'filter'    => false,
            'sortable'  => false,
            'index'     => 'stores',
            'is_system' => true,
    )); 
```

我想知道有没有办法在网格中制作新的吸气剂。我这样做的目的是在 url 中传递额外的参数。

通过使用它，我得到以下编辑网址

[http://domain.com/index.php/module/adminhtml_module/edit/id/5/key/a19618bbaa3ee98ed395bc2fa552de35/](http://domain.com/index.php/module/adminhtml_module/edit/id/5/key/a19618bbaa3ee98ed395bc2fa552de35/)

如果将另一个 getter 附加到 url，例如 'getter' => 'getStoreId'，

比我的网址应该是这样的：

[http://domain.com/index.php/module/adminhtml_module/edit/id/5/store/5/key/a19618bbaa3ee98ed395bc2fa552de35/](http://domain.com/index.php/module/adminhtml_module/edit/id/5/store/5/key/a19618bbaa3ee98ed395bc2fa552de35/)

任何人都可以指导我，我该怎么做。？

我尝试使用以下代码，但它不起作用。

```
 $this->addColumn('action',
     array(
            'header'    =>  Mage::helper('module')->__('Action'),
            'width'     => '100',
            'type'      => 'action',
            'getter'    => array('getId','getStoreId'),     
            'actions'   => array(
                array(
                    'caption'   => Mage::helper('module')->__('Edit'),
                    'url'       => array('base'=> '*/*/edit'),
                    'field'     => array('id',store_id),                
                )
            ),
            'filter'    => false,
            'sortable'  => false,
            'index'     => 'stores',
            'is_system' => true,
    )); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T14:06:06.537

要将商店密钥添加到 url，请尝试`actions`将

```
'actions'   => array(
    array(
        'caption' => Mage::helper('catalog')->__('Edit'),
        'url'     => array(
            'base'=>'*/*/edit',
            'params'=>array('store'=>$this->getRequest()->getParam('store'))
        ),
        'field'   => 'id'
    )
), 
```

`$this->getRequest()->getParam('store')`根据需要更新

参考 /app/code/core/Mage/Adminhtml/Block/Catalog/Product/Grid.php

```
$this->addColumn('action',
    array(
        'header'    => Mage::helper('catalog')->__('Action'),
        'width'     => '50px',
        'type'      => 'action',
        'getter'     => 'getId',
        'actions'   => array(
            array(
                'caption' => Mage::helper('catalog')->__('Edit'),
                'url'     => array(
                    'base'=>'*/*/edit',
                    'params'=>array('store'=>$this->getRequest()->getParam('store'))
                ),
                'field'   => 'id'
            )
        ),
        'filter'    => false,
        'sortable'  => false,
        'index'     => 'stores',
)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-03T11:47:20.117

如果要从网格中传递多个值，则可以使用自定义渲染器：

```
 $this->addColumn('action',
     array(
        'header'    =>  Mage::helper('module')->__('Action'),
        'width'     => '100',
        'type'      => 'text',
        'filter'    => false,
        'sortable'  => false,
        'is_system' => true,
        'renderer'  => 'Company_MyModule_Block_Adminhtml_Renderer_Actionlink',
    )); 
```

渲染器：

```
class Company_MyModule_Block_Adminhtml_Renderer_Actionlink extends Mage_Adminhtml_Block_Widget_Grid_Column_Renderer_Abstract {
  public function render(Varien_Object $row) {
    $url=$this->getUrl('*/*/edit', array('id'=>$row->getId(), 'storeId' => $row->getStoreId()));
    return sprintf("<a href='%s'>%s</a>", $url, Mage::helper('catalog')->__('Edit'));
  }
} 
```

# xml - xslt：在 for-each 上设置变量

> ID：15569824
> 
> 赞同：1
> 
> 时间：2013-03-22T12:02:39.600
> 
> 标签：xml, debugging, xslt, iteration, reusability

我正在尝试使用 XSLT 从文件制作器中以 xml 格式导出一些数据。我想在 xml 的三个位置显示相同的数据。我使用 for-each 标签显示了一次数据。一些如何在这里使用变量，但我不知道如何。

```
<xsl:for-each select="fmp:FMPXMLRESULT/fmp:RESULTSET/fmp:ROW">
  <xsl:for-each select="fmp:COL[3]/fmpATA">
    <marker>
      <name>
        <xsl:value-of select="."/>
      </name>
      <xsl:variable name="pos" select="position()" />
      <comment>
        <xsl:value-of select="../../fmp:COL[6]/fmpATA[$pos]"/>
      </comment>
      <in>
        <xsl:value-of select="../../fmp:COL[4]/fmpATA[$pos]"/>
      </in>
      <out>
      <xsl:value-of select="../../fmp:COL[5]/fmpATA[$pos]"/>
      </out>
    </marker>
  </xsl:for-each>
</xsl:for-each> 
```

但是当我想在同一个 XML 中的三个不同的地方导出上述数据时，它失败了。需要复制上述 xslt 中的任何数据，以便我可以在同一个 xslt 的其他地方使用它。我不是 XSLT 人，所以如果我不清楚，我一开始就道歉。非常感谢

输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<xmeml version="1">
<sequence id="test_clip">
<name>test_clip</name>
<duration>7704</duration>
<rate>
<ntsc>FALSE</ntsc>
<timebase>25</timebase>
</rate>
<timecode>
<rate>
<ntsc>FALSE</ntsc>
<timebase>25</timebase>
</rate>
<string/>
<frame>90000</frame>
<source>source</source>
<displayformat>NDF</displayformat>
</timecode>
<in>-1</in>
<out>-1</out>
<media>
<video>
<format>
<samplecharacteristics>
<width>1024</width>
<height>576</height>
<anamorphic>FALSE</anamorphic>
<pixelaspectratio>Square</pixelaspectratio>
<fielddominance>none</fielddominance>
<rate>
<ntsc>FALSE</ntsc>
<timebase>25</timebase>
</rate>
<colordepth>24</colordepth>
<codec>
<name>H.264</name>
<appspecificdata>
<appname>Final Cut Pro</appname>
<appmanufacturer>Apple Inc.</appmanufacturer>
<appversion>7.0</appversion>
<data>
<qtcodec>
<codecname>H.264</codecname>
<codectypename>H.264</codectypename>
<codectypecode>avc1</codectypecode>
<codecvendorcode>appl</codecvendorcode>
<spatialquality>1023</spatialquality>
<temporalquality>0</temporalquality>
<keyframerate>0</keyframerate>
<datarate>0</datarate>
</qtcodec>
</data>
</appspecificdata>
</codec>
</samplecharacteristics>
<appspecificdata>
<appname>Final Cut Pro</appname>
<appmanufacturer>Apple Inc.</appmanufacturer>
<appversion>7.0</appversion>
<data>
<fcpimageprocessing>
<useyuv>TRUE</useyuv>
<usesuperwhite>FALSE</usesuperwhite>
<rendermode>YUV8BPP</rendermode>
</fcpimageprocessing>
</data>
</appspecificdata>
</format>
<track>
<clipitem id="testclip3 ">
<name>testclip3</name>
<duration>7501</duration>
<rate>
<ntsc>FALSE</ntsc>
<timebase>25</timebase>
</rate>
<in>0</in>
<out>7501</out>
<start>203</start>
<end>7704</end>
<pixelaspectratio>Square</pixelaspectratio>
<enabled>TRUE</enabled>
<anamorphic>FALSE</anamorphic>
<alphatype>none</alphatype>
<masterclipid>testclip3 1</masterclipid>
<logginginfo>
<good>FALSE</good>
</logginginfo>
<file id="testclip3 2">
<name>testclip3.mov</name>
<pathurl>file://localhost/Users/itsupport/Desktop/testclip3.mov</pathurl>
<rate>
<timebase>25</timebase>
</rate>
<duration>7501</duration>
<media>
<video>
<duration>7501</duration>
<samplecharacteristics>
<width>1024</width>
<height>576</height>
</samplecharacteristics>
</video>
<audio>
<rate>
<timebase>48000</timebase>
</rate>
<trackcount>2</trackcount>
<samplecharacteristics>
<depth>16</depth>
</samplecharacteristics>
</audio>
</media>
</file>
<marker>
<name>Marker 1</name>
<comment>Man uses lit lighter to read postcard and sets fire to it accidentally</comment>
<in>911814</in>
<out>-1</out>
</marker>
<marker>
<name>Marker 2</name>
<comment>Painting</comment>
<in>913654</in>
<out>-1</out>
</marker>
<marker>
<name>Marker 3</name>
<comment/>
<in>914031</in>
<out>914032</out>
</marker>
<marker>
<name>Marker 4</name>
<comment>Women</comment>
<in>925375</in>
<out>-1</out>
</marker>
<marker>
<name>Marker 5</name>
<comment>Old woman</comment>
<in>932350</in>
<out>-1</out>
</marker>
<marker>
<name>Marker 6</name>
<comment>car accident</comment>
<in>933750</in>
<out>-1</out>
</marker>
<marker>
<name>Marker 7</name>
<comment/>
<in>900000</in>
<out>-1</out>
</marker>
<marker>
<name>Marker 8</name>
<comment/>
<in>943925</in>
<out>-1</out>
</marker>
<sourcetrack>
<mediatype>video</mediatype>
</sourcetrack>
<link>
<linkclipref>testclip3 </linkclipref>
<mediatype>video</mediatype>
<trackindex>1</trackindex>
<clipindex>1</clipindex>
</link>
<link>
<linkclipref>testclip3 3</linkclipref>
<mediatype>audio</mediatype>
<trackindex>1</trackindex>
<clipindex>1</clipindex>
<groupindex>1</groupindex>
</link>
<link>
<linkclipref>testclip3 4</linkclipref>
<mediatype>audio</mediatype>
<trackindex>2</trackindex>
<clipindex>1</clipindex>
<groupindex>1</groupindex>
</link>
<fielddominance>none</fielddominance>
</clipitem>
<enabled>TRUE</enabled>
<locked>FALSE</locked>
</track>
</video>
<audio/>
</media>
<ismasterclip>FALSE</ismasterclip>
<marker>
<name>Marker 1</name>
<comment>Man uses lit lighter to read postcard and sets fire to it accidentally</comment>
<in>911814</in>
<out>-1</out>
</marker>
<marker>
<name>Marker 2</name>
<comment>Painting</comment>
<in>913654</in>
<out>-1</out>
</marker>
<marker>
<name>Marker 3</name>
<comment/>
<in>914031</in>
<out>914032</out>
</marker>
<marker>
<name>Marker 4</name>
<comment>Women</comment>
<in>925375</in>
<out>-1</out>
</marker>
<marker>
<name>Marker 5</name>
<comment>Old woman</comment>
<in>932350</in>
<out>-1</out>
</marker>
<marker>
<name>Marker 6</name>
<comment>car accident</comment>
<in>933750</in>
<out>-1</out>
</marker>
<marker>
<name>Marker 7</name>
<comment/>
<in>900000</in>
<out>-1</out>
</marker>
<marker>
<name>Marker 8</name>
<comment/>
<in>943925</in>
<out>-1</out>
</marker>
<filter>
<effect>
<name>Distort</name>
<effectid>deformation</effectid>
<effectcategory>motion</effectcategory>
<effecttype>motion</effecttype>
<mediatype>video</mediatype>
<parameter>
<parameterid>aspect</parameterid>
<name>Aspect</name>
<valuemin>-10000</valuemin>
<valuemax>10000</valuemax>
<value>33.3333</value>
</parameter>
</effect>
</filter>
</sequence>
</xmeml> 
```

您会注意到 marker1,2,3...8 标记在上面的 xml 中显示了两次。这就是我希望显示 xml 的方式。现在在 XSLT 中，请注意我已经复制了两次“for-each”标签。这不起作用。XSLT：

```
<?xml version="1.0" encoding="UTF-8" ?>
<xsl:stylesheet version="1.0" 
xmlns:fmp="http://www.filemaker.com/fmpxmlresult"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform" exclude-result-prefixes="fmp">

<xsl:output method="xml" indent="yes" />

<xsl:template match="/">

<xmeml version="1">
<sequence id="test_clip">
    <name>test_clip</name>
    <duration>7704</duration>
    <rate>
        <ntsc>FALSE</ntsc>
        <timebase>25</timebase>
    </rate>
    <timecode>
        <rate>
            <ntsc>FALSE</ntsc>
            <timebase>25</timebase>
        </rate>
        <string><xsl:value-of select="fmp:COL[1]/fmp:DATA"/></string>
        <frame>90000</frame>
        <source>source</source>
        <displayformat>NDF</displayformat>
    </timecode>
    <in>-1</in>
    <out>-1</out>
    <media>
        <video><format>
                <samplecharacteristics>
                    <width>1024</width>
                    <height>576</height>
                    <anamorphic>FALSE</anamorphic>
                    <pixelaspectratio>Square</pixelaspectratio>
                    <fielddominance>none</fielddominance>
                    <rate>
                        <ntsc>FALSE</ntsc>
                        <timebase>25</timebase>
                    </rate>
                    <colordepth>24</colordepth>
                    <codec>
                        <name>H.264</name>
                        <appspecificdata>
                            <appname>Final Cut Pro</appname>
                            <appmanufacturer>Apple Inc.</appmanufacturer>
                            <appversion>7.0</appversion>
                            <data>
                                <qtcodec>
                                    <codecname>H.264</codecname>
                                    <codectypename>H.264</codectypename>
                                    <codectypecode>avc1</codectypecode>
                                    <codecvendorcode>appl</codecvendorcode>
                                    <spatialquality>1023</spatialquality>
                                    <temporalquality>0</temporalquality>
                                    <keyframerate>0</keyframerate>
                                    <datarate>0</datarate>
                                </qtcodec>
                            </data>
                        </appspecificdata>
                    </codec>
                </samplecharacteristics>
                <appspecificdata>
                    <appname>Final Cut Pro</appname>
                    <appmanufacturer>Apple Inc.</appmanufacturer>
                    <appversion>7.0</appversion>
                    <data>
                        <fcpimageprocessing>
                            <useyuv>TRUE</useyuv>
                            <usesuperwhite>FALSE</usesuperwhite>
                            <rendermode>YUV8BPP</rendermode>
                        </fcpimageprocessing>
                    </data>
                </appspecificdata>
            </format>
            <track>
                <clipitem id="testclip3 ">
                    <name>testclip3</name>
                    <duration>7501</duration>
                    <rate>
                        <ntsc>FALSE</ntsc>
                        <timebase>25</timebase>
                    </rate>
                    <in>0</in>
                    <out>7501</out>
                    <start>203</start>
                    <end>7704</end>
                    <pixelaspectratio>Square</pixelaspectratio>
                    <enabled>TRUE</enabled>
                    <anamorphic>FALSE</anamorphic>
                    <alphatype>none</alphatype>
                    <masterclipid>testclip3 1</masterclipid>
                    <logginginfo>
                        <good>FALSE</good>
                    </logginginfo>
                    <file id="testclip3 2">
                        <name>testclip3.mov</name>
                        <pathurl>file://localhost/Users/itsupport/Desktop/testclip3.mov</pathurl>
                        <rate>
                            <timebase>25</timebase>
                        </rate>
                        <duration>7501</duration>
                        <media>
                            <video>
                                <duration>7501</duration>
                                <samplecharacteristics>
                                    <width>1024</width>
                                    <height>576</height>
                                </samplecharacteristics>
                            </video>
                            <audio>
                                <rate>
                                    <timebase>48000</timebase>
                                </rate>
                                <trackcount>2</trackcount>
                                <samplecharacteristics>
                                    <depth>16</depth>
                                </samplecharacteristics>
                            </audio>
                        </media>
                    </file>

        <xsl:for-each select="fmp:FMPXMLRESULT/fmp:RESULTSET/fmp:ROW">

    <xsl:for-each select="fmp:COL[3]/fmp:DATA">
        <marker>
        <name>
            <xsl:value-of select="."/>
        </name>
            <xsl:variable name="pos" select="position()" />

            <comment>
            <xsl:value-of select="../../fmp:COL[6]/fmp:DATA[$pos]"/>
            </comment>

            <in>
            <xsl:value-of select="../../fmp:COL[4]/fmp:DATA[$pos]"/>
            </in>

            <out>
            <xsl:value-of select="../../fmp:COL[5]/fmp:DATA[$pos]"/>
            </out>

        </marker>
    </xsl:for-each>

</xsl:for-each>

                    <sourcetrack>
                        <mediatype>video</mediatype>
                    </sourcetrack>
                    <link>
                        <linkclipref>testclip3 </linkclipref>
                        <mediatype>video</mediatype>
                        <trackindex>1</trackindex>
                        <clipindex>1</clipindex>
                    </link>
                    <link>
                        <linkclipref>testclip3 3</linkclipref>
                        <mediatype>audio</mediatype>
                        <trackindex>1</trackindex>
                        <clipindex>1</clipindex>
                        <groupindex>1</groupindex>
                    </link>
                    <link>
                        <linkclipref>testclip3 4</linkclipref>
                        <mediatype>audio</mediatype>
                        <trackindex>2</trackindex>
                        <clipindex>1</clipindex>
                        <groupindex>1</groupindex>
                    </link>
                    <fielddominance>none</fielddominance>
                </clipitem>
                <enabled>TRUE</enabled>
                <locked>FALSE</locked>
            </track>

            </video>
        <audio></audio>
        </media>
            <ismasterclip>FALSE</ismasterclip>

        <xsl:for-each select="fmp:FMPXMLRESULT/fmp:RESULTSET/fmp:ROW">

    <xsl:for-each select="fmp:COL[3]/fmp:DATA">
        <marker>
        <name>
            <xsl:value-of select="."/>
        </name>
            <xsl:variable name="pos" select="position()" />

            <comment>
            <xsl:value-of select="../../fmp:COL[6]/fmp:DATA[$pos]"/>
            </comment>

            <in>
            <xsl:value-of select="../../fmp:COL[4]/fmp:DATA[$pos]"/>
            </in>

            <out>
            <xsl:value-of select="../../fmp:COL[5]/fmp:DATA[$pos]"/>
            </out>

        </marker>
    </xsl:for-each>

</xsl:for-each>

<filter>
        <effect>
        <name>Distort</name>
        <effectid>deformation</effectid>
        <effectcategory>motion</effectcategory>
        <effecttype>motion</effecttype>
        <mediatype>video</mediatype>
            <parameter>
                <parameterid>aspect</parameterid>
                <name>Aspect</name>
                <valuemin>-10000</valuemin>
                <valuemax>10000</valuemax>
                <value>33.3333</value>
            </parameter>
        </effect>
    </filter>
</sequence>
</xmeml>

</xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T14:41:27.110

如果您向我们展示示例输入和输出，那将非常有帮助。但是根据您的描述，您想要做的是在一个变量中捕获 xsl:-each 的结果：

```
<xsl:variable name="temp">
  <xsl:for-each select="...">

  </xsl:for-each>
</xsl:variable> 
```

唯一需要注意的是，在 XSLT 1.0 中，$temp 的值是一个“结果树片段”，并且对如何使用它有严重的限制。很多时候，需要使用特定于供应商的 xx:node-set() 扩展来将其转换为普通节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T17:57:42.810

正如 Michael Kay 所提到的，您可以在变量中捕获 a 的结果`for-each`，然后您可以`xsl:copy-of`在任何需要的地方使用它来输出它，如下所示：

```
<xsl:stylesheet version="1.0"
    xmlns:fmp="http://www.filemaker.com/fmpxmlresult"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" exclude-result-prefixes="fmp">

  <xsl:output method="xml" indent="yes" />

  <xsl:template match="/">

    <xsl:variable name="rowData">
      <xsl:for-each select="fmp:FMPXMLRESULT/fmp:RESULTSET/fmp:ROW">
        <xsl:for-each select="fmp:COL[3]/fmp:DATA">
          <marker>
            <name>
              <xsl:value-of select="."/>
            </name>
            <xsl:variable name="pos" select="position()" />

            <comment>
              <xsl:value-of select="../../fmp:COL[6]/fmp:DATA[$pos]"/>
            </comment>

            <in>
              <xsl:value-of select="../../fmp:COL[4]/fmp:DATA[$pos]"/>
            </in>

            <out>
              <xsl:value-of select="../../fmp:COL[5]/fmp:DATA[$pos]"/>
            </out>

          </marker>
        </xsl:for-each>
      </xsl:for-each>
    </xsl:variable>

    <xmeml version="1">
      <sequence id="test_clip">
        <name>test_clip</name>
        <duration>7704</duration>
        <rate>
          <ntsc>FALSE</ntsc>
          <timebase>25</timebase>
        </rate>
        <timecode>
          <rate>
            <ntsc>FALSE</ntsc>
            <timebase>25</timebase>
          </rate>
          <string>
            <xsl:value-of select="fmp:COL[1]/fmp:DATA"/>
          </string>
          <frame>90000</frame>
          <source>source</source>
          <displayformat>NDF</displayformat>
        </timecode>
        <in>-1</in>
        <out>-1</out>
        <media>
          ...

          <!-- Output the variable -->
          <xsl:copy-of select="rowData"/>
          <audio></audio>
        </media>
        <ismasterclip>FALSE</ismasterclip>

        <!-- Output the variable -->
        <xsl:copy-of select="$rowData"/>
        <filter>
          <effect>
            ...
          </effect>
        </filter>
      </sequence>
    </xmeml>
  </xsl:template>
</xsl:stylesheet> 
```

一种更易读的方法是将 for-each 分离到一个命名模板中，并在需要的地方调用它：

```
<xsl:stylesheet version="1.0"
    xmlns:fmp="http://www.filemaker.com/fmpxmlresult"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" exclude-result-prefixes="fmp">

  <xsl:output method="xml" indent="yes" />

  <xsl:template match="/">

    <xmeml version="1">
      <sequence id="test_clip">
        <name>test_clip</name>
        <duration>7704</duration>
        <rate>
          <ntsc>FALSE</ntsc>
          <timebase>25</timebase>
        </rate>
        <timecode>
          <rate>
            <ntsc>FALSE</ntsc>
            <timebase>25</timebase>
          </rate>
          <string>
            <xsl:value-of select="fmp:COL[1]/fmp:DATA"/>
          </string>
          <frame>90000</frame>
          <source>source</source>
          <displayformat>NDF</displayformat>
        </timecode>
        <in>-1</in>
        <out>-1</out>
        <media>
          ...

          <!-- Call the template -->
          <xsl:call-template name="RowData" />
          <audio></audio>
        </media>
        <ismasterclip>FALSE</ismasterclip>

        <!-- Call the template -->
        <xsl:call-template name="RowData" />
        <filter>
          <effect>
            ...
          </effect>
        </filter>
      </sequence>
    </xmeml>
  </xsl:template>

  <xsl:template name="RowData">
    <xsl:for-each select="fmp:FMPXMLRESULT/fmp:RESULTSET/fmp:ROW">
      <xsl:for-each select="fmp:COL[3]/fmp:DATA">
        <marker>
          <name>
            <xsl:value-of select="."/>
          </name>
          <xsl:variable name="pos" select="position()" />

          <comment>
            <xsl:value-of select="../../fmp:COL[6]/fmp:DATA[$pos]"/>
          </comment>

          <in>
            <xsl:value-of select="../../fmp:COL[4]/fmp:DATA[$pos]"/>
          </in>

          <out>
            <xsl:value-of select="../../fmp:COL[5]/fmp:DATA[$pos]"/>
          </out>

        </marker>
      </xsl:for-each>
    </xsl:for-each>
  </xsl:template>
</xsl:stylesheet> 
```

但最干净和最 XSLT 风格的方法是正确使用模式匹配模板，并完全摆脱`for-each`es：

```
<xsl:stylesheet version="1.0"
    xmlns:fmp="http://www.filemaker.com/fmpxmlresult"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" exclude-result-prefixes="fmp">

  <xsl:output method="xml" indent="yes" />

  <xsl:template match="/">

    <!-- Store a variable with all the source rows, for easy access -->
    <xsl:variable name="rows" select="fmp:FMPXMLRESULT/fmp:RESULTSET/fmp:ROW" />

    <xmeml version="1">
      <sequence id="test_clip">
        <name>test_clip</name>
        <duration>7704</duration>
        <rate>
          <ntsc>FALSE</ntsc>
          <timebase>25</timebase>
        </rate>
        <timecode>
          <rate>
            <ntsc>FALSE</ntsc>
            <timebase>25</timebase>
          </rate>
          <string>
            <xsl:value-of select="fmp:COL[1]/fmp:DATA"/>
          </string>
          <frame>90000</frame>
          <source>source</source>
          <displayformat>NDF</displayformat>
        </timecode>
        <in>-1</in>
        <out>-1</out>
        <media>
          ...

          <!-- Apply templates to the rows -->
          <xsl:apply-templates select="$rows" />
          <audio></audio>
        </media>
        <ismasterclip>FALSE</ismasterclip>

        <!-- Apply templates to the rows -->
        <xsl:apply-templates select="$rows" />
        <filter>
          <effect>
            ...
          </effect>
        </filter>
      </sequence>
    </xmeml>
  </xsl:template>

  <xsl:template match="fmp:ROW">
    <xsl:apply-templates select="fmp:COL[3]/fmp:DATA" />
  </xsl:template>

  <xsl:template match="fmp:DATA">
    <marker>
      <name>
        <xsl:value-of select="."/>
      </name>
      <xsl:variable name="pos" select="position()" />

      <comment>
        <xsl:value-of select="../../fmp:COL[6]/fmp:DATA[$pos]"/>
      </comment>

      <in>
        <xsl:value-of select="../../fmp:COL[4]/fmp:DATA[$pos]"/>
      </in>

      <out>
        <xsl:value-of select="../../fmp:COL[5]/fmp:DATA[$pos]"/>
      </out>

    </marker>
  </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T12:18:41.357

您可以拆分循环的定义和执行。

然后你的循环变成：

```
<xsl:template match="fmp:FMPXMLRESULT/fmp:RESULTSET/fmp:ROW">
  <xsl:for-each select="fmp:COL[3]/fmpATA">
    <marker>
      <name>
        <xsl:value-of select="."/>
      </name>
      <xsl:variable name="pos" select="position()" />
      <comment>
        <xsl:value-of select="../../fmp:COL[6]/fmpATA[$pos]"/>
      </comment>
      <in>
        <xsl:value-of select="../../fmp:COL[4]/fmpATA[$pos]"/>
      </in>
      <out>
        <xsl:value-of select="../../fmp:COL[5]/fmpATA[$pos]"/>
      </out>
    </marker>
  </xsl:for-each>
</xsl:template> 
```

每当你想调用那个循环时，你都会做一个

```
<xsl:apply-templates select="/fmp:FMPXMLRESULT/fmp:RESULTSET/fmp:ROW" /> 
```

# php - 循环php中的数组

> ID：15569825
> 
> 赞同：0
> 
> 时间：2013-03-22T12:02:42.410
> 
> 标签：php, arrays

我正在尝试从表中获取数据并将其存储在名为“items”的数组中，然后使用索引访问它。我收到一个错误 "Undefined offset: 0" 。代码有什么问题？

```
$i=0;

while($row = mysql_fetch_array($sqlquery))
{
    $name = $row['name'];

    $items = array();

    $items[$i] = $name;

    $i= $i +1;
}

echo $items[0];
echo $items[1]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T12:06:20.483

在循环之外定义`$items`，在循环之外定义`$i = 0`并更改为`mysql_fetch_assoc`并尝试。

```
$i = 0;
$items = array();
while($row = mysql_fetch_assoc($sqlquery)) {
    $name = $row['name'];

    $items[$i] = $name;
    $i++;
}
echo $items[0];
echo $items[1]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T12:05:24.263

您在每次迭代时重新创建数组。结果数组的初始化（`$items`在您的代码中）应该在循环之外。例如：

```
$items = array();

while($row = mysql_fetch_array($sqlquery, MYSQL_ASSOC))
{

    $name = $row['name'];

    $items[] = $name;
}
echo $items[0];

echo $items[1]; 
```

**注意：** `mysql_*`函数已弃用，请使用`mysqli_*`或`PDO`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T12:05:49.077

您每次在循环内都重新声明您的数组，这是不正确的。

```
$items = array();
while($row = mysql_fetch_assoc($sqlquery))
{
  $items[] = $name = $row['name'];
}
echo $items[0];
echo $items[1]; 
```

注意：[**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T12:04:11.030

1.  `$i = 0;`在while循环之前添加
2.  在while循环之前添加`$items = array();`，从while循环中删除它

    ```
     $i         = 0;
     $items = array();
     while($row = mysql_fetch_assoc($sqlquery)) 
    ```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T12:05:17.820

用这个

```
while($row = mysql_fetch_array($sqlquery))

{

$name = $row['name'];

$items = array();

$items[] = $name;

}
if(isset($items[0])){

echo $items[0];
}

if(isset($items[1])){
echo $items[1];
} 
```

无需使用 $i

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-22T12:05:56.420

移出`$items = array()`while 循环。它已被重新定义多次并且`$item[0]`丢失了。您只会得到结果数组中的最后一项。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-22T12:06:39.520

你不应该在循环中声明你的变量，如果你只是添加到一维数组中，你可以关闭 $i 。

```
$items = array();

while($row = mysql_fetch_assoc($sqlquery))
{
    $items[] = $row['name'];
}

print_r($items); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-22T12:07:08.147

漂亮干净的版本：

```
while($row = mysql_fetch_array($sqlquery))

{
   $items[] = $row['name'];

}

echo $items[0];
echo $items[1]; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-22T12:07:42.053

您每次都在循环中初始化数组。

这样做：

```
<?php
$items = array();
while($row = mysql_fetch_array($sqlquery)) {
    $name = $row['name'];
    $items[] = $name;
}
echo $items[0];
echo $items[1];
?> 
```

# ios - UIApplication openURL - 摆脱 %0A

> ID：15569828
> 
> 赞同：0
> 
> 时间：2013-03-22T12:02:47.360
> 
> 标签：ios, rss, uiapplication, openurl, linefeed

**问题：**

我正在将 xml 文件（RSS 提要）中的一些信息解析到我正在开发的提要阅读器中。尝试使用 Safari 打开新闻 URL 时`[[UIApplication sharedApplication] openURL:url]`不起作用。

我怀疑xml文件本身没有做好准备。实际上，我对此感到震惊，我只是想不出办法。

**细节：**

该项目适用于它测试过的所有提要，只有一个特定的提要不起作用。更具体地说，解析时会给出这种 url：`%0Ahttp://google.com%0A`

[这](http://www.ivys.it/uploads/rss_basket.xml)是我正在尝试读取的 XML 文件。

我正在使用[Ray Wenderlich](http://www.raywenderlich.com/2636/how-to-make-a-simple-rss-reader-iphone-app-tutorial)的 RSS 阅读器教程作为工作台。

这是我正在使用的代码：

```
NSURL *url = [NSURL URLWithString:[entry.articleUrl stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
if (![[UIApplication sharedApplication] openURL:url])
    NSLog(@"%@%@",@"Failed to open url:",[url description]); 
```

得到这个：`2013-03-22 12:25:57.918 myApp[426:c07] Failed to open url:%0Ahttp://google.it/index.html%0A`

请注意：我测试这个项目的每一个提要（比如 20 多个）都没有带来任何麻烦。任何帮助都会有我个人的祝福，让我过上健康繁荣的生活。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T12:08:44.140

这与 XML 解析无关，这是关于正确的 URL。

`[NSURL URLWithString:[entry.articleUrl stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];` 这是非常非常错误的。

您永远不应该转义整个 URL。您应该只转义查询参数。在`%0A`开头和结尾是由编码换行符引起的。

在这种情况下，它们应该已经被转义了，所以只需修剪空格：

```
NSString* urlString = [entry articleUrl];
NSString* trimmedUrlString = [urlString stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
NSURL *url = [NSURL URLWithString:trimmedUrlString]; 
```

# android - 检查在 android 应用程序中加载的 html 元素

> ID：15569829
> 
> 赞同：2
> 
> 时间：2013-03-22T12:02:49.520
> 
> 标签：android, android-scripting, android-jsinterface

我在我的 Android 应用程序中使用 webview 渲染一个 html 文件。我还使用一些 javascript 函数来处理内容。有什么方法可以检查 html 内容（例如浏览器中的检查元素）请帮助，在此先感谢。

# c++ - 使用 dlsym 访问类符号

> ID：15569831
> 
> 赞同：1
> 
> 时间：2013-03-22T12:02:52.623
> 
> 标签：c++, casting, dlsym

我想从我的共享库（.so）中访问一个类符号这是我需要做的正确方法吗？

```
MyClass* pMyClass= (MyClass*)dlsym(phandle, "MyClass"); 
```

如果这是正确的方法，那么我应该有我的 MyClass 标头进行转换。我想知道是否有其他方法可以在不包括标题的情况下做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:43:28.033

如您所知， dlsym 基本上返回`void *`- 一个无类型的指针。

该指针是符号的地址 - 只是一个数字。如果你有

```
class MyClass instance; 
```

在您的 .so 中，dlsym 将返回 .so 的值`&instance`。那里没有其他信息。To `dlsym`,`instance`只是一个内存区域的地址。如果你有

```
char instance[sizeof(MyClass)] 
```

你会得到完全相同的值。

所以，回答你的问题 - 不，不知道地址`dlsym`返回的符号的内容。您必须自己添加这些知识。这就是为什么你必须转换结果，`dlsym`这就是为什么你需要包含头文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T12:44:17.823

您可以使用的唯一符号`dlsym`是那些与内存中的某些东西相对应的符号：对象或函数。一个类的名称都不是。您可以获得指向类类型对象的指针，但是如果在某处没有标头，您将无法对它做任何事情（甚至命名类类型）。（您可以在执行 . 时使用类的前向定义 `dlsym`，但是由于您无法使用指向不完整类型的指针来做任何事情，因此这不会给您带来太多好处`void*`。）

# c# - 生成方法存根片段：更改签名以公开访问级别

> ID：15569836
> 
> 赞同：0
> 
> 时间：2013-03-22T12:03:08.037
> 
> 标签：c#, visual-studio-2012, refactoring, code-snippets

默认情况下，Visual Studio 的“提取方法...”命令生成具有最低可能访问级别的方法存根，通常是`private`. 它的相关代码片段仅引用“签名”，但我该如何编辑此签名？

供参考，内容`C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC#\Snippets\1033\Refactoring\MethodStub.snippet`：

```
<?xml version="1.0" encoding="utf-8"?>
<CodeSnippets  xmlns="http://schemas.microsoft.com/VisualStudio/2005/CodeSnippet">
    <CodeSnippet Format="1.0.0">
        <Header>
            <Title>Method Stub - Body</Title>
            <Description>Snippet for generating method stub with a body</Description>
            <Author>Microsoft Corporation</Author>
            <SnippetTypes>
                <SnippetType>Refactoring</SnippetType>
            </SnippetTypes>
        </Header>
        <Snippet>
            <Declarations>
                <Literal Editable="true">
                    <ID>signature</ID>
                    <Default>signature</Default>
                </Literal>
                <Literal>
                    <ID>Exception</ID>
                    <Function>SimpleTypeName(global::System.NotImplementedException)</Function>
                </Literal>
            </Declarations>
            <Code Language="csharp">
                <![CDATA[$signature$
{
    $end$throw new $Exception$();
}]]>
            </Code>
        </Snippet>
    </CodeSnippet>
</CodeSnippets> 
```

# oracle - Oracle：通过 SELECT 语句创建临时表

> ID：15569844
> 
> 赞同：13
> 
> 时间：2013-03-22T12:03:43.013
> 
> 标签：oracle

我尝试将 CREATE TABLE table_name AS SELECT .... 语句与 GLOBAL 临时表语句混合。他们不能很好地混合。

我的例子错了吗？

```
CREATE GLOBAL TEMPORARY TABLE a AS
(
   SELECT * from b
)
ON COMMIT PRESERVE ROWS; 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-22T12:07:57.710

它应该是：

```
CREATE GLOBAL TEMPORARY TABLE a
ON COMMIT PRESERVE ROWS
AS
select * from b; 
```

（如果您不想在当前会话中最初使用 b 中的所有数据填充它，也添加 where 1=0）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2022-02-14T21:57:26.167

CREATE PRIVATE TEMPORARY TABLE TMP_MYTABLE ON COMMIT PRESERVE ROWS AS SELECT * FROM MYTABLE WHERE 1 = 0;

=> ORA-00905: 缺少关键字

我使用甲骨文 12.1

# c - epoll（EPOLLET）取决于读取字节数？

> ID：15569845
> 
> 赞同：0
> 
> 时间：2013-03-22T12:03:47.910
> 
> 标签：c, epoll, epollet

我在边缘触发模式下使用 epoll。为了避免饥饿，代码一次从一个套接字读取 MAX_FREAD_LENGTH 个字节。稍后组装碎片，直到出现 EOL。我注意到当 MAX_FREAD_LENGTH 很小时，epoll 卡住了。我认为它应该适用于任何大小的读取块。它适用于 512 字节，但有时会挂起（意味着没有 EPOLLIN 事件）。如果我增加 MAX_FREAD_LENGTH 它变得更加稳定。我该如何解决这个问题？

非常感谢您考虑我的问题！

> EPOLL 初始化

```
int res;
epFd = epoll_create(EPOLL_SIZE);
event.data.fd = serverFd;
event.events = EPOLLIN|EPOLLET;
res=epoll_ctl(epFd, EPOLL_CTL_ADD, serverFd, &event);
if (res == -1){
  perror ("epoll_ctl error: ");
  return EH_ERROR;
}
events = calloc (MAX_EVENTS, sizeof event); 
```

> 注册网络事件：

```
while (TRUE){
  int nfds;
  do{
    nfds = epoll_wait(epFd, events, MAX_EVENTS, -1);
  } while (nfds < 0 && errno == EINTR);

  int i = 0;
  for (;i<nfds;i++){
    if ( (events[i].data.fd == serverFd) && (events[i].events & EPOLLIN)){
      if ((clientFd = accept(serverFd,(struct sockaddr *) &clientAddr, &clientLen)) < 0){
        char log[255];
        sprintf(log,"dispatch_net_event: Socket accept failed: %s",strerror(errno));
        logger->log(LOGG_ERROR,log);
      }
      if(newclient(clientFd)!=EH_ERROR){
        /* client created */
        setnonblocking(fd,NONBLOCKING);
        event.data.fd = clientFd;
        event.events = EPOLLIN |EPOLLET;
        if(epoll_ctl(epFd, EPOLL_CTL_ADD, fd, &event)<0){
          fprintf(stderr,"Epoll insertion error (fd=%d): ",clientFd);
          return EH_ERROR;             
        }    
        continue;
      }
      else{
        logger->log(LOGG_ERROR,"Client creation error");
        continue;
      }
    }
    else{
     dispatch_event(events[i].data.fd,NET_EVENT);
    }
  }
} 
```

> 处理一个网络事件

```
#define SMTP_MAX_LINE_LENGTH MAX_FREAD_LENGTH
ssize_t count;
char buf[SMTP_MAX_LINE_LENGTH];

memset(buf,'\0', SMTP_MAX_LINE_LENGTH);
count = read (fd, buf,MAX_FREAD_LENGTH );

if (count==-1){
  if (errno == EAGAIN)
    return KEEP_IT;
  else if (errno == EWOULDBLOCK)
    return KEEP_IT;
  else{
    char log[255];
    sprintf(log,"handle_net_event: Read error: %s",strerror(errno));
    logger->log(LOGG_ERROR,log);
  }
}
else{   /* count > 0 there are data in the buffer */
  /* assemble possible partial lines, TRUE if line is whole (end with \r\n)*/
  whole=assemble_line(count,client,&buf[0]);
}
 /* process the line */ 
```

> 编辑：

我忘了提，epoll 在一个单独的线程中运行，而不是其他部分

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T12:46:50.100

我认为您错误地使用了 EPOLLET。尝试不使用 EPOLLET（即使用电平触发模式），看看是否可行。如果是这样，这意味着您的基本问题是您没有按照边缘触发模式的要求进行操作，即继续从任何准备好的描述符中读取，直到您获得 EAGAIN。

# c++ - 无法找到或加载主类 org.apache.axis2.wsdl.WSDL2CPP

> ID：15569846
> 
> 赞同：0
> 
> 时间：2013-03-22T12:03:54.450
> 
> 标签：c++, wsdl, wso2

我是 Web 服务和 WSDL 的新手。我正在使用 WSO2 创建我的第一个 Web 服务。就此而言，我使用的是 WSO2 二进制版本提供的 Calculator.wsdl。

我执行了以下命令来生成服务框架：（ `WSDL2CPP.bat -uri Calculator.wsdl -ss -sd -d adb -u`使用 Axis 数据绑定）和 `WSDL2CPP.bat -uri Calculator.wsdl -ss -sd -d none`（没有数据绑定），

我的输出为：找不到或加载主类 org.apache.axis2.wsdl.WSDL2CPP

我在 Windows 上使用 WSO2 2.1.0 版。我也在 PATH 变量中添加了以下内容，D:\wso2-wsf-cpp-bin-2.1.0-win32\lib; D:\wso2-wsf-cpp-bin-2.1.0-win32\bin\tools\codegen\wsdl2cpp；

我知道这是一个非常基本的问题，但我被困在第一步。

您能否在这方面提出任何建议。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T07:03:03.423

您可能没有设置所需的环境变量，例如`WSFCPP_HOME`. 请确保您已完成 WSO2 WSF for C++ 安装说明[1] 中的所有步骤。

供您参考，用于 C++ 产品文档的 WSO2 WSF 位于 [2]。

[1] [http://wso2.org/project/wsf/cpp/2.0.0/docs/install_guide_windows.html](http://wso2.org/project/wsf/cpp/2.0.0/docs/install_guide_windows.html)

[2] [http://wso2.org/project/wsf/cpp/documentationhttp://wso2.org/project/wsf/cpp/documentation](http://wso2.org/project/wsf/cpp/documentationhttp://wso2.org/project/wsf/cpp/documentation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T22:01:46.717

更具体地说（除了 Gokul 的回答），您需要完成安装 Maven、下载 codegen 工具并构建它的过程。Gokul 提供的链接中对此进行了非常简要的描述。

我认为您的问题不是环境变量，而是您没有完成构建代码生成工具的过程。

# r - 在具有高数据分辨率的 r 编程中计算大圆距离

> ID：15569849
> 
> 赞同：1
> 
> 时间：2013-03-22T12:04:00.620
> 
> 标签：r, geospatial, distance

我是 R 编程的新手，但我正在计算长途客机飞行的大圆距离，我已经尝试过`rdist.earth()`使用 Fields 包、`soDistsN1()`包`sp`和其他命令。另外，我在搜索中几乎用尽了谷歌。在 Matlab 中很容易做到这一点，但我似乎无法在 R 中找到方法。

问题是当我增加数据分辨率（计算的航点数量）时，我的总距离变得混乱。我猜这是因为我如何总结航点之间的总距离。有任何想法吗？

我尝试过的一个例子：

```
data <- read.csv("FDM_test_Flight.csv")
library(fields)
fix <- cbind(data$LON, data$LAT)
fix_2 <- window(fix, deltat=500) # every 500th position I have 25,540 position readings                      
gcd <- rdist.earth(fix_2, miles=FALSE, R=6371)
sum(gcd) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T14:38:22.753

`rdist.earth`计算*所有*对之间的距离，因此通过对整个矩阵求和，您不仅仅是获得连续观察之间的距离之和。

```
library(fields)
lonlat <- matrix(-92:-80,c(1:7,6:1))
out<- rdist.earth ( ozone2$lon.lat)
sum(out[row(out)==col(out)+1])  ## add first off-diagonal 
```

但是@SimonO101 的解决方案更有效：如果你仔细观察`rdist.earth`你会发现它或多或少是在做什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T12:25:41.950

[您可以使用像这样的大圆距离](http://en.wikipedia.org/wiki/Great-circle_distance)公式自己计算它们......

```
r <- 6371 # radius of the Earth
data <- read.csv("FDM_test_Flight.csv")

# Convert to radians and make two vectors of point A and point B
x <- length(data$LON)
lon <- data$LON[1:(x-1)] * pi/180
lat <- data$LAT[1:(x-1)] * pi/180
lon2 <- data$LON[2:x] * pi/180
lat2 <- data$LAT[2:x] * pi/180

#Calculate distances
dist <- sum(acos(sin( lat ) * sin( lat2 ) + cos( lat ) * cos( lat2 ) * cos( lon2 -lon ) ) * r ) 
```

由于`r`以 Km 为单位给出，因此您的大圆距离将为 Km。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T17:01:22.883

如果您只对 gcd 矩阵中的非对角矩阵值（大小为一）求和，您应该得到您需要的东西。正如 Ben Bolker 上面所说， rdis.earth() 计算“所有配对”之间的距离。现在它是如何工作的：例如，如果您有三个位置：1、2 和 3。您需要 dist(1,2) + dist(2,3) 任何 n 个点的相同模式都将成立。因此，这些信息已经在 rdis.earth 中。只需提取您需要的内容并总结它们。这里-（对不起 for 循环）

```
sum(gcd) #but this is too large, it's summing all the pairings!

limit <- dim(gcd)[1] - 1

for(i in 1 :limit ){
  sum_off_dia[i]<- gcd_data[i,i+1]
}
sum(sum_off_dia) 
```

# c++ - g++/clang++中的参数顺序与makefile

> ID：15569850
> 
> 赞同：2
> 
> 时间：2013-03-22T12:04:00.793
> 
> 标签：c++, g++, makefile, ld, clang++

在 Ubuntu 12.04 上使用 CERN 的 ROOT 时，我偶然发现了这个非常烦人的问题，但我认为这是一个更普遍的问题。

我有一些带有外部引用的 C++ 代码，我使用以下 makefile 编译和链接这些代码。在我的带有 OS X 10.8 的 Mac 和带有 SL5 的服务器上，这可以正常工作。

```
CXX=clang++
CXXFLAGS=-Wall -O2 -g $(shell root-config --cflags --libs)

testroot: testroot.cc 
```

它评估为

```
clang++ -Wall -O2 -g -pthread -m64 -I/opt/ROOT/5.34.05/include/root -L/opt/ROOT/5.34.05/lib/root -lCore -lCint -lRIO -lNet -lHist -lGraf -lGraf3d -lGpad -lTree -lRint -lPostscript -lMatrix -lPhysics -lMathCore -lThread -pthread -lm -ldl -rdynamic    testroot.cc   -o testroot 
```

这给了我未定义的引用和 Ubuntu 服务器上的链接器错误。我已经尝试过设置库，`LDFLAGS`但它会产生相同的结果。当我手动编译它并将源文件和 -o 选项放在库之前时，它编译没有问题。

从其他线程中，我认为命令的顺序可能很重要，但我想知道为什么它在某些机器上起作用而在其他机器上却没有。即使顺序很重要，我认为`make`自己足够聪明，可以自己解决。

现在的问题是：我该如何解决这个问题？我必须使用不同版本的 make 或 ld 吗？我必须修改我的makefile吗？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T12:16:14.503

你不应该添加`-l`参数`LDFLAGS`（甚至不提`CXXFLAGS`）。链接库的正确变量是在makefile中的[隐式 make 规则](http://www.gnu.org/software/make/manual/html_node/Catalogue-of-Rules.html)`LDLIBS`的情况下。

在某些机器上，顺序无关紧要，因为对于 GNU ld，它只对静态库或`--as-needed`启用选项（在某些系统上默认启用）很重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T12:20:15.060

您不应该组合`root-config`. 它应该是：

```
CXXFLAGS = -Wall -O2 -g $(shell root-config --cflags)
LIBS     = $(shell root-config -libs -glibs) 
```

然后，您可以在适当的情况下使用这些选项。（例如，您不会`$(LIBS)`在仅编译而不是链接时使用。）

至于为什么它在不同的系统上工作？不同的系统有不同的链接器，它们的工作方式不同。或者，某些系统可能不需要额外的库——尽管它非常违反传统，但在现代系统中将所有内容放入`libc.so`.

最后：怎么能`make`解决这个问题。Make 从字面上对您执行的命令一无所知；它们只是传递给外壳的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T12:19:33.023

您遇到的问题与 ld 用于解决外部引用的算法有关。您可以尝试不同的 ld，但重新排序库列表也会有所帮助。首先放置基础库（没有依赖关系的那个），然后是依赖于已经列出的库的库，依此类推。

# jquery - jqgrid 不能通过设置 jsonReader 工作，重复项：false

> ID：15569851
> 
> 赞同：0
> 
> 时间：2013-03-22T12:04:01.213
> 
> 标签：jquery, jqgrid, jqgrid-php

jqgrid 不能通过设置 jsonReader 工作，重复项：false

首先我的 jqgrid 是按数组获取数据

```
$(listvar).jqGrid({

}
$responce = new stdClass();

    $responce -> page = $page;

    $responce -> total = $total_pages;

    $responce -> records = $count;

    $responce -> rows[$num]['id'] = $row["id"];

$responce -> rows[$num]['cell']= array("fid" => $row['fid'], "fname" => $row['fname']);

echo json_encode($responce); 
```

它工作正常；;但我想通过键值; 然后我更改代码，以便 jqgrid 可以通过键值方式获取数据；我参考

[对 jqGrid 单元格数据使用键/值对](https://stackoverflow.com/questions/2066781/using-key-value-pairs-for-jqgrid-cell-data)

和

[http://www.trirand.com/jqgridwiki/doku.php?id=wiki:retrieving_data#json_data](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:retrieving_data#json_data)

* * *

```
$(listvar).jqGrid({

enter code here`jsonReader : {

repeatitems : false,
   //others default value;

  },

} 
```

我的代码：

```
$responce = new stdClass();

    $responce -> page = $page;

    $responce -> total = $total_pages;

    $responce -> records = $count;

 $responce -> rows[$num]['id'] = $row["id"];

$responce -> rows[$num]['cell']= array("fid" => $row['fid'], "fname" => $row['fname']);

 echo json_encode($responce); 
```

：网络回复；

```
{"page":"1","total":1,"records":"1","rows":{"id":1,"cell":   [{"fid":"153","fname":"\u624b\u673a"}]}} 
```

但是jqgrid不能显示数据；问题是什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:18:18.660

您发布的 JSON 数据包含`rows`为*object*而不是*array*。这是你的问题。您应该更改您的服务器代码，以便它产生

```
{
    "page": "1",
    "total": 1,
    "records": "1",
    "rows": [
        {
            "id": 1,
            "cell": [
                {
                    "fid": "153",
                    "fname": "手机"
                }
            ]
        }
    ]
} 
```

代替

```
{
    "page": "1",
    "total": 1,
    "records": "1",
    "rows": {
        "id": 1,
        "cell": [
            {
                "fid": "153",
                "fname": "手机"
            }
        ]
    }
} 
```

（有关 的值，请参阅`{}`to的替换）`[{}, ...,{}]``rows`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:18:26.263

```
rows    an array that contains the actual data
  id    the unique id of the row
cell    an array that contains the data for a row 
```

在[http://www.trirand.com/jqgridwiki/doku.php?id=wiki:retrieving_data#json_data](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:retrieving_data#json_data)

所以如果你选择键值方式；单元格不应在内容 json 字符串中；

```
$responce -> rows[$num]['id'] = $row["id"];

$responce -> rows[$num]['cell']= array("fid" => $row['fid'], "fname" => $row['fname']);
**result:** "rows":{"id":1,"cell":   [{"fid":"153","fname":"\u624b\u673a"}]}} 
```

改为

```
$responce -> rows[$num]= array("id"=>"id","fid" => $row['fid'], "fname" => $row['fname']);

reponse json:** "rows":[{"id":null,"fid":"153","fname":"\u624b\u673a" 
```

并且 num 必须从 0 开始，因为 php 中的数组必须设置为从 0 开始，否则结果 jsonString 将是

-

```
 result:"rows":{"1":{"id":null,"fid":"153","fname":"\u624b\u673a" 
```

# java - Maven 编码风格

> ID：15569853
> 
> 赞同：0
> 
> 时间：2013-03-22T12:04:07.067
> 
> 标签：java, eclipse, maven

我在我的 pom.xml 文件中包含了 maven 检查样式报告插件，如下所示

```
<reporting>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-checkstyle-plugin</artifactId>
                <version>2.10</version>
            </plugin>
        </plugins>
    </reporting> 
```

我正在使用 eclipse 进行开发，并从[这里](http://maven.apache.org/developers/conventions/code.html)获得了 maven java 编码约定。现在，如果我格式化所有代码并运行 mvn 站点工具，它仍然会报告检查样式错误。有什么办法可以格式化我的代码以通过我的代码中的所有检查样式错误？

**编辑** 我在我的项目的根目录中放置了一个检查样式抑制.xml 文件。这包含以下内容

```
<?xml version="1.0"?>

<!DOCTYPE suppressions PUBLIC
     "-//Puppy Crawl//DTD Suppressions 1.0//EN"
     "http://www.puppycrawl.com/dtds/suppressions_1_0.dtd">

<suppressions>
  <suppress checks="JavadocStyleCheck"
             files=*.java"
             lines="0-99999999"/>

</suppressions> 
```

然后我在我的 pom.xml 文件中将其配置为

```
<reporting>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-checkstyle-plugin</artifactId>
                <version>2.10</version>
                <configuration>
                    <suppressionsLocation>
                        checkstyle-suppressions.xml
                    </suppressionsLocation>
                    <suppressionsFileExpression>
                        checkstyle.suppressions.file
                    </suppressionsFileExpression>
                </configuration>
            </plugin>
        </plugins>
    </reporting> 
```

我希望在 mvn 站点生成期间跳过 java doc checkstyle 错误。但我仍然收到这个？我究竟做错了什么 ？

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:07:33.503

使用[抑制过滤器](http://maven.apache.org/plugins/maven-checkstyle-plugin/examples/suppressions-filter.html)告诉我们

> Checkstyle 允许定义应禁止报告任何违规的文件列表及其行范围（称为[抑制过滤器](http://checkstyle.sourceforge.net/config.html#Filters)）。

### 示例：checkstyle-suppressions.xml

```
<?xml version="1.0"?>

<!DOCTYPE suppressions PUBLIC
     "-//Puppy Crawl//DTD Suppressions 1.0//EN"
     "http://www.puppycrawl.com/dtds/suppressions_1_0.dtd">

<suppressions>
  <suppress checks="JavadocStyleCheck"
             files="GeneratedObject.java"
             lines="50-9999"/>
  <suppress checks="MagicNumberCheck"
             files="LegacyDatasetConvertor.java"
             lines="221,250-295"/>
</suppressions> 
```

### 示例： pom.xml - 指定 Checkstyle 应使用的抑制过滤器。

```
<project>
  ...
  <reporting>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-checkstyle-plugin</artifactId>
        <version>2.10</version>
        <configuration>
          <configLocation>checkstyle.xml</configLocation>
          <suppressionsLocation>
            checkstyle-suppressions.xml
          </suppressionsLocation>
          <suppressionsFileExpression>
            checkstyle.suppressions.file
          </suppressionsFileExpression>
        </configuration>
      </plugin>
    </plugins>
  </reporting>
  ...
</project> 
```

**已编辑**

使用[自定义 Checkstyle 检查器配置](http://maven.apache.org/plugins/maven-checkstyle-plugin/examples/custom-checker-config.html)

> 可以定义然后通过 URL、文件或构建类路径资源引用来引用。要引用自定义 Checkstyle Checker 配置，请使用 configLocation 参数。

Checkstyle 插件附带 4 个预定义的 Checkstyle 配置定义，默认选择 Sun Microsystems 定义。

1.  config/sun_checks.xml - Sun Microsystems 定义（默认）。
2.  config/maven_checks.xml - Maven 开发定义。
3.  config/turbine_checks.xml - 涡轮机开发定义。
4.  config/avalon_checks.xml - Avalon 开发定义。

我希望这可能会有所帮助。

# ios - 使用 KVC 直接从核心 dara 加载 UIImage 的奇怪问题

> ID：15569856
> 
> 赞同：0
> 
> 时间：2013-03-22T12:04:13.317
> 
> 标签：ios, objective-c, core-data

我在一个包含核心数据的应用程序项目中，我严格使用 KVC 仅针对`NSManagedObjects`. 因此这样做的目的只是为了了解优点和缺点。我可能发现了一个缺点。但是，我无法解释为什么。

当我使用一些非常成熟的原则（已经在其他应用程序中使用过）保存用户用手指在核心数据中绘制的草图（文档的签名）并分别获取并显示或打印到 PDF 时，我遇到了这个问题稍后。

事实证明，我能够`UIImage`从视图中获取，将其存储在核心数据中，并使用 KVC 再次从核心数据中立即接收它（中间没有保存/获取），并将其显示在另一个视图中以用于测试目的。但我无法实际保存它，从持久存储中获取数据并将其重新显示在屏幕上。所以我做了很多调试，分析了 sqlite 文件等。最终我把它归结为以下奇怪的行为：

情况：图像通过以下方式成功存储到核心数据中：

```
[self.detailItem setValue:UIImagePNGRepresentation(image) forKey:kSignatureImage]; 
```

是`image`一个`UIImage`对象并且`self.detailItem`是`NSManagedOBject`. 钥匙和参考资料，一切都很好。

然后再次显示视图。以下内容与上下文是否保存在两者之间，甚至应用程序是否关闭并重新启动无关：

```
self.signatureCanvas.image = [UIImage imageWithData:[self.detailTextLabel valueForKey:kSignatureImage]]; 
```

`self.signatureCanvas`作为一个子`UIImageView`类对象。图像未显示在屏幕上。

```
NSData *data = [self.detailItem valueForKey:kSignatureImage];

NSLog(@"UIImage   a: %@", [UIImage imageWithData:[self.detailTextLabel valueForKey:kSignatureImage]]);
NSLog(@"UIImage   b: %@", [UIImage imageWithData:data]);

self.testImage.image =  [UIImage imageWithData:[self.detailTextLabel valueForKey:kSignatureImage]];

self.signatureCanvas.image = [UIImage imageWithData:data]; 
```

`self.testImage`是具有相同视图（但更小）的第二个普通 UIImageView。现在图像在 中可见，`signatureCanvas`但在 中不可见`testImage`。（反之亦然，试过了）

输出提示了正在发生的事情，但没有实际解释：

```
2013-03-22 12:43:37.746 MyApp[1595:c07] UIImage   a: (null)
2013-03-22 12:43:37.769 MyApp[1595:c07] UIImage   b: <UIImage: 0x7c973a0> 
```

到目前为止，我一直认为代码行是等价的，编译器甚至可以优化数据对象。但是为什么图像`(null)`在一种情况下而不是在另一种情况下。

所以我找到了问题的根本原因和解决方法。因此，这不再紧急。但我不明白。有什么线索吗？

环境是：SDK 6.1，xcode 4.6，ARC，sqlite 上的核心数据，iPad 到目前为止。所有这些都发生在 UITableViewCell 子类（情节提要中的原型单元）中，自然而然地发生在 UITableViewController 子类中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:55:48.557

我假设`self.detailTextLabel`在

```
self.testImage.image =  [UIImage imageWithData:[self.detailTextLabel valueForKey:kSignatureImage]]; 
```

应该是`self.detailItem`。

# c# - asp.net Button OnClick 事件未触发

> ID：15569857
> 
> 赞同：35
> 
> 时间：2013-03-22T12:04:13.873
> 
> 标签：c#, asp.net

我在 asp.net 按钮控制中遇到问题。

我在表单中定义了一个按钮，`onclick`当我单击按钮时，按钮事件没有触发。

```
<asp:Button ID="btn_QuaSave" runat="server" Text="SAVE" OnClick="btn_QuaSave_Click" /> 

protected void btn_QuaSave_Click(object sender, EventArgs e)
{

} 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2017-01-01T18:42:14.750

因为您的按钮在其中，`control`所以可能是另一个控件的验证不允许按钮提交。在我的情况下，结果是向`CausesValidation`按钮添加属性：

```
<asp:Button ID="btn_QuaSave" runat="server" Text="SAVE" OnClick="btn_QuaSave_Click" CausesValidation="False"/> 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-22T12:16:10.743

您是否从其他页面/应用程序复制了此方法？如果是则它将不起作用，因此您需要删除分配给按钮的事件和事件名称然后转到设计并转到按钮甚至属性转到onClick事件双击它旁边，它会生成事件并自动分配按钮的事件名称。这应该工作

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-12-10T07:00:04.293

如果您在 onclick 事件上使用 updatepanel，则可能会发生这种情况。

在您的页面标记中使用 'EnableEventValidation="false"'，如下所示：

```
<%@ Page Language="C#" MasterPageFile="~/ars_home.master" AutoEventWireup="true" CodeFile="Transaction_Window.aspx.cs" Inherits="Transaction_Window" EnableEventValidation="false" %> 
```

希望这可以帮助

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-08-25T10:37:45.100

我有同样的问题，我的 aspnet 按钮的点击没有触发。事实证明，页面其他部分的某些地方有一个带有 html“必需”属性的输入。

这听起来可能很奇怪，但是一旦我删除了 required 属性，按钮就会正常工作。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-12-09T21:53:37.930

就我而言，我将**required="required"**放在**CKEditor**控件中。
删除此属性解决了该问题。
**前**

```
<CKEditor:CKEditorControl ID="txtDescription" BasePath="/ckeditor/" runat="server" required="required"></CKEditor:CKEditorControl> 
```

**后**

```
<CKEditor:CKEditorControl ID="txtDescription" BasePath="/ckeditor/" runat="server"></CKEditor:CKEditorControl> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-06-21T08:13:28.763

我有一个类似的问题，没有一个答案对我有用。也许有人发现我的解决方案很有帮助。如果您不介意在单击按钮时提交，则仅附加到单击事件设置`UseSubmitBehavior="false"`可能值得尝试。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-07-11T21:58:18.227

我有同样的问题是否都更改了按钮和所有上述方法然后我做了一件简单的事情我在一个页面上使用两个表单并在表单中使用表单所以我删除了一个并且它有效:)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-22T12:07:21.580

尝试`Clean`您的解决方案，然后再试一次。

它肯定会奏效。因为代码中的每一件事似乎都很好。

通过此链接获取清洁解决方案>

[http://social.msdn.microsoft.com/Forums/en-US/vsdebug/thread/e53aab69-75b9-434a-bde3-74ca0865c165/](http://social.msdn.microsoft.com/Forums/en-US/vsdebug/thread/e53aab69-75b9-434a-bde3-74ca0865c165/)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-03-22T13:12:03.670

尝试在 Visual Studio 中进入设计模式，找到按钮并双击应该设置事件的按钮。否则，一旦在 Design more 中选择了按钮，请转到属性并尝试从那里进行设置。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-12-10T08:42:40.333

为您的验证器元素添加验证组。这允许您区分要包含在验证中的不同组。将验证组也添加到您的提交按钮

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-07-30T12:24:15.337

如果 asp 按钮在`<a href="#"> </a>`标签内，那么`Click`事件也不会引发。

希望它对某人有用。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-09-21T15:13:19.357

如果将 LinkBut​​ton 嵌套在**Repeater**中，您必须使用类似于以下内容的内容：

```
<asp:LinkButton ID="LinkButton1" runat="server" CommandName="MyUpdate">LinkButton</asp:LinkButton>

 protected void Repeater1_OnItemCommand(object source, RepeaterCommandEventArgs e)
 {
    if (e.CommandName.Equals("MyUpdate"))
    {
        // some code
    }
 } 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-05-31T09:45:46.333

在我的情况下：确保页面中除了顶部主表单之外不存在任何表单元素，这会导致事件未触发

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-02-28T22:20:59.153

如果在您单击提交按钮时它没有引发错误但仍然没有触发单击事件，请尝试添加`action="YourPage.aspx"`到您的表单中。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-06-03T05:17:47.720

即使我有两种形式，一种用于桌面视图，另一种用于移动视图，删除了一种对我有用的表单。我知道 asp.page 应该只有一种形式。

# ios - 如何在 ios 中捕获数据库异常？

> ID：15569858
> 
> 赞同：0
> 
> 时间：2013-03-22T12:04:13.873
> 
> 标签：ios, objective-c, nsexception

我在互联网上搜索了很多关于捕获 sqlite 异常的信息。但我能遇到的只是这个一般异常

```
@catch (NSException *exception) {

        } 
```

我可以使用什么类型的异常来处理 sqlite 异常？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T12:15:12.047

通常，SQLite 不会返回可恢复错误的异常。相反，它会返回一个错误代码，您必须在每次操作后检查该代码。

SQLite 的一些“包装”API 可能会返回异常，但这将是特定 API 的功能。

# c# - 将参数传递给C#中的存储过程

> ID：15569860
> 
> 赞同：12
> 
> 时间：2013-03-22T12:04:19.410
> 
> 标签：c#, stored-procedures

我有一个存储过程，它返回一个变量 @result 设置为 1 或 0（数据类型位）。我正在使用以下代码在我的 C# 中访问它。它抛出一个错误，说参数太多。

```
 protected void btnRegister_Click(object sender, EventArgs e)
    {

        SqlConnection con = new SqlConnection(System.Configuration.ConfigurationManager.AppSettings["ConnectionString"]);
        con.Open();

        SqlCommand Cmd = new SqlCommand("usp_CheckEmailMobile", con);
        Cmd.CommandType = CommandType.StoredProcedure;
        Cmd.CommandText = "Registration";
        Cmd.Parameters.AddWithValue("@Name", txtName.Text);
        Cmd.Parameters.AddWithValue("@Email", txtEmailAddress.Text);
        Cmd.Parameters.AddWithValue("@Password", txtPassword.Text);
        Cmd.Parameters.AddWithValue("@CountryCode", ddlCountryCode.Text);
        Cmd.Parameters.AddWithValue("@Mobile", txtMobileNumber.Text);
        //Cmd.Parameters.Add("@Result", DbType.Boolean);
        SqlParameter sqlParam = new SqlParameter("@Result", DbType.Boolean);
        //sqlParam.ParameterName = "@Result";
        //sqlParam.DbType = DbType.Boolean;
        sqlParam.Direction = ParameterDirection.Output;
        Cmd.Parameters.Add(sqlParam);
        Cmd.ExecuteNonQuery();
        con.Close();
        Response.Write(Cmd.Parameters["@Result"].Value); 

    } 
```

存储过程：（我认为这很好......）请更正我的 CS 代码......

```
ALTER PROCEDURE [dbo].[usp_CheckEmailMobile]
  ( @Name VARCHAR(50), 
@Email NVARCHAR(50), 
@Password NVARCHAR(50), 
@CountryCode INT, 
@Mobile VARCHAR(50), 
@Result BIT OUTPUT)
 AS 
BEGIN 

IF EXISTS (SELECT COUNT (*) FROM AUser WHERE  [Email] = @Email AND [Mobile] = @Mobile) 
 Begin 
 Set @Result=0; --Email &/or Mobile does not exist in database
End
ELSE
Begin
  --Insert the record & register the user 
INSERT INTO [AUser] ([Name], [Email], [Password], [CountryCode], [Mobile]) VALUES (@Name, @Email, @Password, @CountryCode, @Mobile)  
Set @Result=1;
 End

END 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-22T12:18:01.723

你可以试试这段代码：

```
bool result=false;
SqlCommand scCommand = new SqlCommand("usp_CheckEmailMobile", sqlCon);
scCommand.CommandType = CommandType.StoredProcedure;
scCommand.Parameters.Add("@Name", SqlDbType.VarChar, 50).Value = txtName.Text;
scCommand.Parameters.Add("@Email", SqlDbType.NVarChar, 50).Value = txtEmailAddress.Text;
scCommand.Parameters.Add("@Password ", SqlDbType.NVarChar, 50).Value = txtPassword.Text;
scCommand.Parameters.Add("@CountryCode", SqlDbType.VarChar.50).Value =ddlCountryCode.SelectedText;
scCommand.Parameters.Add("@Mobile", SqlDbType.NVarChar, 50).Value = txtMobileNumber.Text;
scCommand.Parameters.Add("@Result ", SqlDbType.Bit).Direction = ParameterDirection.Output;
try
{
    if (scCommand.Connection.State == ConnectionState.Closed)
    {
        scCommand.Connection.Open();
    }
    scCommand.ExecuteNonQuery();
    result = Convert.ToBoolean(scCommand.Parameters["@Result"].Value);

}
catch (Exception)
{

}
finally
{                
    scCommand.Connection.Close();
    Response.Write(result); 
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T12:13:39.147

为什么要设置：

```
Cmd.CommandText = "Registration"; 
```

这将替换您的存储过程名称，因此它不会调用您指定的存储过程：

```
SqlCommand Cmd = new SqlCommand("usp_CheckEmailMobile", con); 
```

使用 SQL 分析器来调试“通过网络”运行的 SQL 是否符合预期会很有用。

# regex - 解析字符串中指定长度的字符串

> ID：15569862
> 
> 赞同：0
> 
> 时间：2013-03-22T12:04:22.553
> 
> 标签：regex, backreference

示例数据：

> 029提取这个特定的字符串。不要捕捉其他任何东西。

在上面的示例中，我想在定义 n 值的 3 位输入之后立即捕获前 n 个字符。IE 的 29 个字符“提取此特定字符串”。

我可以在一个循环中做到这一点，但它很慢。我想（如果可能的话）使用某种反向引用来使用单个正则表达式语句来实现这一点。就像是：

```
(\d{3})(.{\1}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:37:31.670

使用 perl，您可以：

```
my $str = '029Extract this specific string. Do not capture anything else.';
$str =~ s/^(\d+)(.*)$/substr($2,0,$1)/e;
say $str; 
```

**输出：**

```
Extract this specific string. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:35:17.963

你确定你需要一个正则表达式吗？

来自[https://stackoverflow.com/tags/regex/info](https://stackoverflow.com/tags/regex/info)：

> 傻瓜冲进天使不敢踏足的地方
> 
> 现代正则表达式的强大功能和表现力可以诱使容易上当或鲁莽的人尝试在遇到的每一个与字符串相关的任务中使用正则表达式。一般来说，这是一个坏主意，...

这是一个**Python**三行代码：

```
foo = "029Extract this specific string. Do not capture anything else."
substr_len = int(foo[:3])
print foo[3:substr_len+3] 
```

这是一个**PHP**三行代码：

```
$foo = "029Extract this specific string. Do not capture anything else.";
$substr_len = (int) substr($foo,0,3);
echo substr($foo,3,substr_len+3); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T12:48:00.163

您不能使用单个正则表达式来做到这一点，而您可以使用正则表达式停止处理的知识来使用 substr。例如在 JavaScript 中你可以做这样的事情[http://jsfiddle.net/75Tm5/](http://jsfiddle.net/75Tm5/)

```
var input = "blahblah 011I want this, and 029Extract this specific string. Do not capture anything else.";
var regex = /(\d{3})/g;
var matches;
while ((matches = regex.exec(input)) != null) {
    alert(input.substr(regex.lastIndex, matches[0]));
} 
```

这将返回两行：

```
I want this
Extract this specific string. 
```

根据您真正想要的，您可以修改正则表达式以仅匹配从行开头开始的数字，仅匹配第一个匹配项等

# java - ajax响应为pdf，如何显示？

> ID：15569867
> 
> 赞同：0
> 
> 时间：2013-03-22T12:04:35.993
> 
> 标签：java, ajax, google-app-engine

我有一个生成 pdf 的网络服务。在我的 GAE 应用程序中，我有一个按钮，当我单击时，我使用了 ajax 的功能。

```
$('#test').click(function(){
        $.ajax({
            url: 'provaws.do',
            type: 'get',
            dataType: 'html',
                    success : function(data) {
                    }
        });
    }); 
```

这是java中调用ws的方法，使用UrlFetch：

```
 @RequestMapping(method = RequestMethod.GET, value = PROVAWS_URL)
public void prova(HttpServletRequest httpRequest, HttpServletResponse httpResponse, HttpSession httpSession) throws IOException{
    try {
        URL url = new URL("http://XXXXX/sap/bc/zcl_getpdf/vbeln/yyyyyy");
        HttpURLConnection connection = (HttpURLConnection) url.openConnection();
        connection.setRequestProperty("Authorization","Basic " + Base64.encodeBase64String(("username:password").getBytes()));
        connection.setConnectTimeout(60000);
        if (connection.getResponseCode() == HttpURLConnection.HTTP_OK) {
            // OK
            ByteArrayOutputStream bais = new ByteArrayOutputStream();
            InputStream is = null;
            try {
              is = connection.getInputStream();
              byte[] byteChunk = new byte[4096];
              int n;

              while ( (n = is.read(byteChunk)) > 0 ) {
                bais.write(byteChunk, 0, n);
              }
            }
            catch (IOException e) {

            }
            finally {
              if (is != null) { is.close(); }
            }
            httpResponse.setContentType("application/pdf");
            httpResponse.setHeader("content-disposition","attachment; filename=yyyyy.pdf");             
            httpResponse.getOutputStream().write(bais.toString().getBytes("UTF-8"));
            httpResponse.getOutputStream().flush();         
        }
....
} 
```

使用 Firebug，我看到了响应：

```
%PDF-1.3
%âãÏÓ
2 0 obj
<<
/Type /FontDescriptor
/Ascent 720
/CapHeight 660
/Descent -270
/Flags 32
/FontBBox [-177 -269 1123 866]
/FontName /Helvetica-Bold
/ItalicAngle 0
.... 
```

我需要在ajax的函数中设置什么来显示pdf？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:14:14.910

我不太了解Java，但据我了解，您的机制可能不正确。

以下是我的更正：

服务器端代码（JAVA）不是在流中发送文件，而是应该在后端生成pdf，将文件放入文件系统，然后将文件的URI返回给Ajax响应。

对于 Ajax 代码，它从服务器获取 url，然后在 DOM 中显示新的 url。然后用户可以点击此链接阅读/下载 PDF。

边注：

我进一步检查了 Ajax 有用于流式传输数据的方法，尽管 jQuery`ajax()`无法处理。但我认为对于 PDF 文件渲染，流媒体是多余的。参考：[jquery ajax，增量读取流？](https://stackoverflow.com/questions/7740646/jquery-ajax-read-the-stream-incrementally), [http://ajaxpatterns.org/HTTP_Streaming#In_A_Blink](http://ajaxpatterns.org/HTTP_Streaming#In_A_Blink) *

# css - sass --watch : 仅编译 1 个具有许多源的 css

> ID：15569871
> 
> 赞同：2
> 
> 时间：2013-03-22T12:04:50.673
> 
> 标签：css, compilation, sass, compass-sass, watch

大家好！

我的 Sass 项目如下所示：

```
Project
├── sass/
│   ├── bootstrap/
│   │   ├── ...
│   │   ├── _bootstrap.scss
│   ├── mymodule/
│   │   ├── submodules/
│   │   ├── _mymodule.scss /*with only @import from submodules/ */
|   └── main.scss /* various styles & @import bootstrap, mymodule */
└── stylesheets/
    └── main.css 
```

我正在尝试查看所有修改：

*   在整个 mymodule 文件夹中
*   在 main.scss

并且只用我所做的修改来改变**stylesheets/main.css 。**

我编写的每个命令都生成了 mymodule.css 或其他 scss 文件/文件夹。

请问***sass --watch***是什么？

非常感谢提前！

亚历克西斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T09:23:16.393

你应该完全使用[指南针](http://compass-style.org/)！ 

## 指南针是什么

Compass 是每个 SASS 编码人员必备的工具。指南针由两部分组成：

*   SASS 的元框架；
*   一个命令行工具，用于编译 Compass 项目和做其他有用的事情。

该`compass watch`命令正是您正在寻找的。每当您保存以下任何一项更改时，它都会重新编译 CSS：

*   文件夹中的每个非部分文件`sass`（在你的情况下它只是`main.scss`）；
*   由上述之一（递归）导入的每个部分。

从未导入的部分将被忽略。

Compass 将为每个非部分文件创建一个单独的 CSS 文件。至于部分，它们不会显示为单独的 CSS 文件，因为它们包含在非部分中。

## 可笑的简短安装指南

为了使以下工作，您必须拥有 Ruby 和[RubyGems](http://rubygems.org/pages/download)。可能你已经拥有它们了。

要开始使用 Compass，请执行以下操作：

1.  使用 RubyGems 安装指南针：`gem install compass`.
2.  在项目的根目录中创建一个`compass.rb`文件（在您的情况下是`Project/compass.rb`）。
3.  运行`compass watch`并开始编码。

## config.rb 文件示例

`compass.rb`这是一个可能对您 有用的最小值：

```
css_dir =   "stylesheets"
sass_dir =  "sass" 
```

# android - 录音机安卓

> ID：15569872
> 
> 赞同：1
> 
> 时间：2013-03-22T12:04:51.227
> 
> 标签：android, eclipse, audio, mediarecorder, android-mediarecorder

我正在做一个应用程序来录制声音，但是当我尝试录制声音时，模拟器停止了，因为它要求我插入 SD 卡。我必须做什么？我不能没有 SD 卡吗？

谢谢！

```
 package proiektua.proiektua;

import java.io.FileDescriptor;

import android.media.MediaPlayer;
import android.net.Uri;
import android.os.Bundle;

import android.provider.MediaStore;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;

public class MainActivity extends Activity  {

        int peticion = 1;
        Uri url1;
        private int STATE_CONFIGURE;
        private int mState = STATE_CONFIGURE;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
        }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            // Inflate the menu; this adds items to the action bar if it is present.
            getMenuInflater().inflate(R.menu.main, menu);
            return true;
        }

        public void grabar(View v) {
            Intent intent = new Intent(MediaStore.Audio.Media.RECORD_SOUND_ACTION);
            startActivityForResult(intent, peticion);}

            public void setOutputFile(FileDescriptor fd) {
                    switch (mState) {
                case STATE_RECORD:
                        throw new RuntimeException("setOutputFile cannot be called while recording!");

                    case STATE_RELEASED:
                        throw new RuntimeException("setOutputFile called on an already released recorder!");
                    default:
                        break;
                }
        }

        public void reproducir(View v) {
            MediaPlayer mediaPlayer = MediaPlayer.create(this, url1);
            mediaPlayer.start();
        }

        protected void onActivityResult(int requestCode, int resultCode, Intent data) {
            if (resultCode == RESULT_OK && requestCode == peticion) {
                url1 = data.getData();
            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:19:42.350

[您可以选择通过mksdcard](http://developer.android.com/tools/help/mksdcard.html)命令创建 SDCard并将其与 amulator 关联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:14:57.947

请看这个功能：

```
public void setOutputFile (FileDescriptor fd)

Added in API level 3
Pass in the file descriptor of the file to be written. Call this after setOutputFormat() but before prepare(). 
```

您可以决定存储文件的位置。

也看看这个例子。 [http://androidfreakers.blogspot.co.il/2011/09/using-mediarecorder.html](http://androidfreakers.blogspot.co.il/2011/09/using-mediarecorder.html)

# html - 使用网络标准的初始页面上的数量值

> ID：15569873
> 
> 赞同：0
> 
> 时间：2013-03-22T12:04:56.717
> 
> 标签：html, paypal

我有一个非常简单的输入订单页面，其中的下拉选项取决于年龄和“立即付款”按钮。我不想更改 PayPal 页面上的数量，而是想在 DropDown 下方显示一个 Quantity 文本框（默认值为 1），然后将值传递给 PayPal 页面。

这是我的html：

```
<body style="border-style:double; text-align:center;">
    <form action="https://www.paypal.com/cgi-bin/webscr" method="post" runat="server">
    <div><br />
    <input type="hidden" name="cmd" value="_s-xclick"/>
<input type="hidden" name="hosted_button_id" value="WTFZKTFE95PDG"/>
<table align="center">
<tr><td><input type="hidden" name="on0" value="Registration Fees"/><b>Registration Fees</b></td></tr><tr><td><select name="os0">
    <option value="14 Years and over">14 Years and over £20.00 GBP</option>
    <option value="under 14 Years">under 14 Years £15.00 GBP</option>
</select> </td></tr>
</table><br /><br />
<input type="hidden" name="currency_code" value="GBP"/>
<input type="image" src="https://www.paypalobjects.com/en_US/GB/i/btn/btn_buynowCC_LG.gif" name="submit" alt="PayPal — The safer, easier way to pay online."/>
<img alt="" border="0" src="https://www.paypalobjects.com/en_GB/i/scr/pixel.gif" width="1" height="1"/>
    </div>
    </form>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:24:27.660

您想要用来传递数量的变量将是“数量”。所以你可以添加一行类似于下面的代码。

```
Quantity: <input type="text" name="quantity" maxlength="5" value="1"> 
```

# java - NullPointerException 何时发生？

> ID：15569893
> 
> 赞同：-1
> 
> 时间：2013-03-22T12:05:52.063
> 
> 标签：java, nullpointerexception

```
class  CardBoard    
{  
    Short  story = 200;  
    CardBoard  go(CardBoard cb)
    {
        cb = null;  
        return cb;  
    }  

    public static void main(String[] args)   
    {  
        CardBoard  c1 = new  CardBoard();  
        CardBoard  c2 = new  CardBoard();  
        CardBoard  c3 = c1.go(c2);   
        //  expecting  null  pointer  exception      
        c1  =  null;  
        // do stuff;  
    }   
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T12:10:35.880

注释行中没有 NPE，因为`c1`and`c2`不为空。此外，在`go`方法中`cb`变量设置为`null`，但这并不影响实际对象！

```
CardBoard  c1 = new  CardBoard();  
CardBoard  c2 = new  CardBoard();  
CardBoard  c3 = c1.go(c2); 
```

这些行之后的情况是：

```
c1 != null
c2 != null
c3 == null 
```

那么为什么要获得 NPE 呢？

您必须了解参考是什么！*像在调用中那样*将对象传递给方法`go(c2)`并在将参数设置为的方法`null`中不会影响原始对象实例！

 *就像是：

```
object c1 = new object();
object c2 = c1;

c1 = null 
```

结果是

```
c1 == null
c2 != null // !!! 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T12:10:33.220

我不明白你为什么期待 NullPointerException。
基本上你只是想说：
**CardBoard c3 = null;**

如果你想要 NPE，你可以这样做：
**CardBoard c3 = null;**
**c3.go(c2);**

在这里，c3 为空，所以这会抛出一个 NPE，因为你正在尝试这样做：
null.go(...);

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T12:09:58.717

> 什么时候出现空指针异常？

每当您调用实例方法或访问引用变量（指向）的实例字段时`null`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T12:11:15.100

现在，尝试：

```
public static void main(String[] args)   
{  
    CardBoard  c1 = new  CardBoard();  
    CardBoard  c2 = new  CardBoard();  
    CardBoard  c3 = c1.go(c2);   
    //  expecting  null  pointer  exception      
    c1  =  null;  
    c3.go(c2);
} 
```

看看会发生什么…… ;) 你肯定会得到你的 NPE。

（你必须实际使用你的空指针来获取你的异常）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-22T12:22:48.473

NullPointerException 仅在您尝试访问任何方法或变量的引用指向空时才会发生，即 null。

我已更改您的代码以获取 NullPointerException ：

```
class CardBoard {
Short story = 200;

CardBoard go(CardBoard cb) {
    cb = null;
    return cb;
}

public static void main(String[] args) {
    CardBoard c1 = new CardBoard();
    CardBoard c2 = new CardBoard();
    CardBoard c3 = c1.go(c2);
    // expecting null pointer exception
    c1 = null;

    // If you try to call a method or access any member variable with null reference you will get the exception
    c3.story = 20; //NullPointerException will occur

    // do stuff;
} 
```

}

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-22T12:26:06.290

例如

```
Class Apple
{
 void applePrint()
 {
  System.out.println("Apple");
 }
}

Class Mango
{
 void mangoPrint()
 {
  System.out.println("Mango");
 }
} 
```

假设在你的代码的某个地方，你做

`Apple a;`

`Mango m;`

如果您尝试使用此变量`a`或`m`访问 Class 成员，

```
a.printApple(); or m.printMango(); 
```

它会抛出 NPE

即你定义了类对象的引用变量，但实际上并没有创建它们

`Apple a = new Apple();` `Mango m = new Mango();`

[在我刚接触 Java 时做了很多事情]

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-22T12:51:20.277

```
public static void main(String[] args)   
{  
    CardBoard  c1 = new  CardBoard();  
    CardBoard  c2 = new  CardBoard();  
    CardBoard  c3 = c1.go(c2);   // go method is returning 'null' so c3=null
    //  expecting  null  pointer  exception      
    c1  =  null;  
    c3.go(c2);  // you will get NullPointerException here.
} 
```

当您调用`go()`方法时，`c3`您将得到`NullPointerException`

当您为分配给的那些**引用变量**`NullPointerException`调用方法时，您将得到。**`null`***

# java - 使用两个属性对对象的 ArrayList 进行排序

> ID：15569898
> 
> 赞同：1
> 
> 时间：2013-03-22T12:06:07.247
> 
> 标签：java, arrays, sorting

我正在为我的项目使用 JDK 1.7。我遇到了Huddle。我有一个对象的 ArrayList，它有两个属性：价格（十进制）和产品名称（字符串）。我需要先按价格然后按产品名称对 ArrayList 进行排序。我尝试使用 Java 比较器，但我只能按一个属性排序。这是我的代码：

```
private static class PriceComparator implements Comparator<Product>{
 @Override
 public int compare(Product p1, Product p2) {
    return (p1.getPrice() > p2.getPrice() ) ? -1: (p1.getPrice() < p2.getPrice()) ?   
  1:0 ;
 } 
```

}

此代码仅排序价格，而不是名称。

请我欣赏你的帮助和榜样。

谢谢伊什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T12:56:16.447

如果您不介意使用 Apache Commons 库，Commons Lang 有一个[CompareToBuilder](http://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/builder/CompareToBuilder.html)。您可以使用它轻松比较多个字段。基元是自动处理的，但您也可以为每个字段传递一个可选的自定义比较器。

```
public class Product implements Comparable<Product> {
    private float price;
    private String name;
    ...
    @Override
    public int compareTo(Product other) {
        return new CompareToBuilder()
            .append(getPrice(), other.getPrice())
            .append(getName(), other.getName())
            .toComparison();
    }
    ...
} 
```

然后只需在列表上调用 Collections.sort()。

```
List<Product> products = new ArrayList<Product>();
products.add(new Product("Adam's Product", 10.0))
products.add(new Product("Charlie's Product", 8.0))
products.add(new Product("Bob's Product", 8.0))
Collections.sort(products) 
```

它们现在将被订购为：

1.  鲍勃的产品
2.  查理的产品
3.  亚当的产品

# c# - RavenDB：无法获得多术语方面以返回使用 SimpleAnalyzer 的字段的原始值

> ID：15569907
> 
> 赞同：0
> 
> 时间：2013-03-22T12:06:42.377
> 
> 标签：c#, ravendb, facet

我正在使用 RavenDB 2 客户端。

我希望我的用户能够按类别搜索并返回产品。对于类别名称，`High Heels`我希望用户能够搜索`heels`并获取具有类别的产品`High Heels`。

我在索引中设置我的`CategoryName`字段如下：

```
Analyzers.Add(x => x.CategoryName, "SimpleAnalyzer"); 
```

当我想展示`CategoryName`. 它不是返回`high heels`命中 1，而是返回`high`命中 1 和`heels`命中 1。

我理解它为什么这样做，并且我尝试过使用：

```
Stores.Add(x => x.CategoryName, FieldStorage.Yes); 
```

但是将它与刻面一起使用时没有成功。

**所以我的问题是**，如何让方面返回`high heels`而不是在使用`high`的`heels`字段上`SimpleAnalyzer`？

我的代码如下：

我的索引

```
public class ProductIndex : AbstractIndexCreationTask<Product,ProductIndex.ProductIndexItem>
{
    public class ProductIndexItem
    {
        public string Name { get; set; }

        public string CategoryName { get; set; }
    }

    public ProductIndex()
    {
        Map = products => from product in products
                          from category in product.Categories
                          select new
                              {
                                  product.Name,
                                  CategoryName = category.Name
                              };

        Stores.Add(x => x.CategoryName, FieldStorage.Yes);
        Analyzers.Add(x => x.CategoryName, "SimpleAnalyzer");
    }
} 
```

我的测试

```
 [Test]
    public void MultiTermCategoryTest()
    {
        var product = new Product
            {
                Name = "MyProductName",
                Categories = new List<Category>
                    {
                        new Category
                            {
                                Name = "High Heels",
                            }
                    }
            };

        _session.Store(product);
        _session.SaveChanges();

        var query = _session.Advanced.LuceneQuery<Product>("ProductIndex")
                            .WaitForNonStaleResults()
                            .Search("CategoryName", "heels");

        var products = query.ToList();
        var facets = query.SelectFields<Facet>("CategoryName").ToFacets("facets/ProdctFacets");

        // Check that product has been returned
        Assert.That(products.Count, Is.EqualTo(1), "Product count is incorrect.");

        // Check that facet has been returned
        Assert.That(facets.Results.Count, Is.EqualTo(1), "Facet Results count is incorrect");
        var facetResult = facets.Results.FirstOrDefault();

        // Check that factes are what I want
        Assert.That(facetResult.Key, Is.EqualTo("CategoryName"));

         // ** Fails here returning a count of 2** 
        Assert.That(facetResult.Value.Values.Count, Is.EqualTo(1), "Facet.Value.Values count is incorrect");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:01:08.400

感谢 Ayende Rahien 的建议。

事实证明，您无法按照我尝试的方式进行上述操作。

我必须在索引中有两个字段，一个用于索引，一个用于存储原始值。因此，我将索引更改为以下内容：

```
public class ProductIndex : AbstractIndexCreationTask<Product,ProductIndex.ProductIndexItem>
{
    public class ProductIndexItem
    {
        public string Name { get; set; }

        public string CategoryName { get; set; }

        public string CategoryNameAnalyzed { get; set; }
    }

    public ProductIndex()
    {
        Map = products => from product in products
                          from category in product.Categories
                          select new
                              {
                                  product.Name,
                                  CategoryName = category.Name,
                                  CategoryNameAnalyzed = category.Name,
                              };

        Stores.Add(x => x.CategoryName, FieldStorage.Yes);
        Analyzers.Add(x => x.CategoryNameAnalyzed, "SimpleAnalyzer");
    }
} 
```

我的查询更改为：

```
var query = _session.Advanced.LuceneQuery<Product>("ProductIndex")
                            .WaitForNonStaleResults()
                            .Search("CategoryNameAnalyzed", "heels");
var products = query.ToList();
var facets = query.ToFacets("facets/ProdctFacets"); 
```

我希望这对其他人有帮助。

# c# - 无法让 DatagridView 选择正确的行

> ID：15569909
> 
> 赞同：1
> 
> 时间：2013-03-22T12:06:52.063
> 
> 标签：c#, select, datagridview, row

我无法理解这里发生了什么：

```
void FindRecord(string pRecordID){
    dgv_cusData.ClearSelection();
    for(int i=0;i < dgv_cusData.Rows.Count;i++){
        if (dgv_cusData.Rows[i].Cells["recordid"].Value.ToString()==pRecordID){                 
            dgv_cusData.CurrentCell = dgv_cusData.Rows[i].Cells[1];
            dgv_cusData.Rows[i].Selected = true;                    
        }           
    }
} 
```

pRecordID 是 DGV 中的唯一列。我在网格中只有三个记录，并且我知道所选记录在位置 2；但是随后将触发 SelectionChanged 事件：

```
void Dgv_cusDataSelectionChanged(object sender, EventArgs e)
{           
    MessageBox.Show(dgv_cusData.CurrentCell.RowIndex.ToString()); // <---- Returns 0;
    lbl_DetailsLabel.Text = "Details For "+dgv_cusData.CurrentRow.Cells[1].Value;           
} 
```

CurrentCell.RowIndex 总是返回 0。我在尝试选择 DGV 中的当前行时是否遗漏了什么？任何帮助，将不胜感激。干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:47:04.450

我想知道选择该行是否会导致您丢失 CurrentCell。

该行是否在 datagridview 中突出显示？

您是否允许在网格上进行多行选择。如果不是，我认为您会通过以下方式获得更好的结果：

```
MessageBox.Show(dgv_cusData.SelectedRows[0].Index.ToString()); 
```

和：

```
lbl_DetailsLabel.Text = "Details For "+ dgv_cusData.Rows(dgv_cusData.SelectedRows(0).Index).Cells[1].Value; 
```

# c# - 重新加载时的实体框架 5 InvalidOperationException

> ID：15569914
> 
> 赞同：6
> 
> 时间：2013-03-22T12:07:08.723
> 
> 标签：c#, entity-framework

我尝试使用重新加载功能放弃一些更改。我得到一个`InvalidOperationException`. 我怎样才能防止这种情况？

```
DbContext.SaveChanges();
//Entity is in Unchanged state
//Make some changes to an entity
//Change state to modified
DbContext.Entry(entity).Reload(); 
```

> **InvalidOperationException**
> EntityMemberChanged 或 EntityComplexMemberChanged 被调用，而没有首先在具有相同属性名称的相同更改跟踪器上调用 EntityMemberChanging 或 EntityComplexMemberChanging。有关正确报告更改的信息，请参阅实体框架文档。

**编辑：**
我已经启用和禁用`ProxyCreationEnabled`, `LazyLoadingEnabled`.
也尝试了不同的方法。所有这些尝试都会引发相同的异常。

```
var objContext = ((IObjectContextAdapter)context).ObjectContext;
objContext.Refresh(RefreshMode.ClientWins, entry.Entity); 
```

```
entry.OriginalValues.SetValues(entry.GetDatabaseValues()); 
```

希望我得到一个解决方案。不想处理完整的 DbContext 以重新加载所有数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T10:21:21.610

引用[这个 MSDN 线程/帖子](http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/8d0f53bc-1da4-4de1-bffc-0dc23c152919?prof=required)

“值得注意的是，无论您是通过代理类使用更改跟踪还是显式调用 entitymemberchanged，该错误都会显示。每当我执行 entitymemberchange 并在创建 objectcontext/objectstatemanager 的线程之外的线程上进行更改时，我似乎都会收到错误,无论我是同步还是异步执行这两个函数,使用锁还是让线程显式休眠.在我看来这是objectstatemanager的某种“真正的错误”,而不是简单的东西解决方法。Ball 在你的球场上，MSFT。”

PS 评论太长了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T19:32:39.217

如果代码与您发布的一样，从 DbContext 加载对象，然后从同一个 DbContext 重新加载，则不应将其显式标记为已修改；对实体进行更改就足以将其标记为已修改。换句话说：

```
var o = new SimpleObject { Stuff = "One" };
db.SimpleObjects.Add(o);
db.SaveChanges();

o.Stuff = "Two"; // implicitly marks as Modified for you, since it's still Attached

// Unnecessary
//db.Entry(o).State = System.Data.EntityState.Modified;

db.Entry(o).Reload(); // Works for me 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-04T21:33:03.147

我发现在具有导航属性的代理实体上重新加载失败。

作为一种解决方法，重置当前值，然后像这样重新加载：

```
var entry = DbContext.Entry(entity);
entry.CurrentValues.SetValues(entry.OriginalValues); 
entry.Reload(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-26T12:16:39.340

我有类似的情况，具有相同的异常描述。在我的情况下，我试图从上下文中删除一个实体，并且它与仍在调用的 propertychanged 处理程序有关。

我只是在从上下文中删除实体之前删除了处理程序

```
MyEntity.PropertyChanged -= MyPropertyChangedHandler;
context.MySet.Remove(MyEntity); //it works after removing the handler 
```

希望这可以帮助某人。

# .net - 将文本框转换为动态数据中的下拉列表

> ID：15569917
> 
> 赞同：1
> 
> 时间：2013-03-22T12:07:13.997
> 
> 标签：.net, asp.net-dynamic-data

我有一个使用两个表的动态数据应用程序。对于其中一个表，我想根据另一个表中的列设置一列，使用填充了另一个表中的值的下拉列表。当前，此列在页面上生成为文本框条目。但是，动态数据不提供下拉项来为此提供 UIHint。我尝试修改枚举字段控件来执行此操作，但似乎无法使其正常工作。

我应该指定这是为了从插入页面为其中一个表添加一个新条目。我希望使用从另一个表中的列填充的值的下拉列表，根据另一个表中的列中的值来设置插入页面上的一个项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:13:46.547

您是否使用了过滤器控件？

当用户选择 QueryableFilterRepeater 为其生成的 Label 时，FilterControl 属性返回应获得焦点的控件。在我们的日期过滤器中，这可以是下拉列表或文本框。

也许查看这篇文章会对您有所帮助： [http ://www.olegsych.com/2010/07/understanding-aspnet-dynamic-data-filter-templates/](http://www.olegsych.com/2010/07/understanding-aspnet-dynamic-data-filter-templates/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:43:47.157

所以我设法自己解决了这个问题。您可以简单地修改现有字段模板之一的代码来做我想做的事情。

如前所述，我们的想法是在“插入”页面上获取一个用于数据输入的文本框，并将其转换为值的下拉列表，其中该下拉列表包含来自另一个表的数据。然后，用户将选择所需的值，并将其作为插入过程的一部分传回数据库。

首先在 FieldTemplates 文件夹中创建一个新控件。将其命名为 DropDown。您将拥有 ascx、代码隐藏文件和设计器文件。

然后，从 ascx 文件中获取 Enumeration_Edit 的代码，并将其复制到新下拉控件的 ascx 文件中。您可能需要重命名 DropDownList 控件的 ID。

使用后面的代码，从后面的 Enumeration_Edit 控件代码中复制代码并更改它们以满足下拉列表的需要。

您的 PageLoad 类应如下所示：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        OnDataBinding();
    }

    SetUpValidator(RequiredFieldValidator1);
    SetUpValidator(DynamicValidator1);
} 
```

你的 OnDataBinding 应该这样设置：

```
public void OnDataBinding()
{
    //Code for binding data from a query/stored proc to a dropdown should go here.
} 
```

保留 ExtractValues() 和 DataControl() 类，但可以去掉 EnumType() 类。

还要确保添加您可能需要的任何参考资料。比较 Enumeration_Edit 控件和您的新控件背后的代码以找出答案。

现在，要使控件在您希望它控制数据插入的列的文本框上工作。您可以简单地将 a 添加`[UIHint("DropDown")]`到表的部分类的适当列项中，但这会在显示时将控件应用于该列的所有实例。我为每个表设置了自定义页面，我只希望此控件用于特定列的插入功能。因此，我更改了该表的插入页面，使控制该列的行看起来像这样：

```
<asp:DynamicField DataField="COLUMN_NAME" UIHint="DropDown" ReadOnly="true" /> 
```

这样做，您只需将控件应用于此页面上的此列。您需要将 ReadOnly 值设置为 true，否则它仍将呈现为文本输入字段而不是下拉菜单。

从那里，您的插入页面应该在该列上有一个数据输入下拉菜单。

我只需要这一列，因此将数据绑定到我的下拉列表的代码仅设置为适用于这一列。您可以编写一个查询，根据您已将控件绑定到的列查找特定列的所有值，或者您可能只需要为需要下拉列表的每一列创建自己的字段模板为了。

# ajax - Ajax 请求成功变量范围

> ID：15569922
> 
> 赞同：-1
> 
> 时间：2013-03-22T12:07:33.543
> 
> 标签：ajax, extjs

我在一个函数中成功了一个Ext.Ajax.request。我需要这个函数返回一个带有 JSON 存储的变量。我的代码是：

```
gridplatos.getStore().each(function(r){
  var store;
  Ext.Ajax.request({
    params:{
      grado: r.get('grado'),
      menudiario: r.get('menudiario'),
      plato: r.get('plato'),
      transCode: Ext.getCmp('transCode').getValue()
    },
    url: 'src/Drivers/AlumnosPlatoArmado/',
    method: 'GET',
    success: function(response,store){
      store = Ext.create('KMA.store.AlumnosPlatoArmado',{}).load();
    }
  });
  console.log(store);
} 
```

但是，console.log(store) 返回“未定义”。任何的想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:12:45.840

这是因为 ajax 是一个异步函数调用，这意味着一旦请求发送到服务器，客户端将继续执行以下语句，而无需等待服务器响应。

在您的情况下，在该时间点执行`src/Drivers/AlumnosPlatoArmado/`服务器响应返回之前，将 ajax 请求发送到then具有 value 。成功完成 ajax 请求后，将调用注册的成功处理程序，您将在其中设置.`console.log(store);``store``undefined``store`

在异步执行环境中，对异步方法返回的值的所有操作必须仅在注册的回调方法中执行。

# c# - 重复行删除

> ID：15569925
> 
> 赞同：2
> 
> 时间：2013-03-22T12:07:40.527
> 
> 标签：c#, linq

首先，我将发布我到目前为止所做的事情：

```
from person in Persons
join customer in Customers on person.BusinessEntityID equals customer.PersonID
join salesOrderHeader in SalesOrderHeaders on customer.CustomerID equals salesOrderHeader.CustomerID
where salesOrderHeader.SubTotal > 1000
join address in Addresses on salesOrderHeader.BillToAddressID equals address.AddressID
where address.City == "Melton"
select new {
                person.FirstName,
                person.LastName,
                salesOrderHeader.SubTotal,
            address.City
       } 
```

这个查询完美地工作，唯一的问题是我在`firstname`and上取回了重复的行`lastname`。我可以通过添加`Distinct()`已经尝试过的扩展方法来解决这个问题，并且它可以工作，但我非常好奇如果它可以在没有任何扩展方法的情况下完成。

那么如何在`firstname`and上没有任何重复行的情况下取回结果表`lastname`？

**编辑**：在这种情况下，我收到这样的东西：

![在此处输入图像描述](../Images/af0d1943bab3de085cf510e7eab3f610.png)

我只想拿回一个同类型的人，他花费的总价值。对不起，第一次没有更好地解释自己，忘了提到我想拿回这个人的总价值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:40:14.340

您需要的是 GroupBy 和聚合。

```
from person in Persons
join customer in Customers on person.BusinessEntityID equals customer.PersonID
join salesOrderHeader in SalesOrderHeaders on customer.CustomerID equals salesOrderHeader.CustomerID
where salesOrderHeader.SubTotal > 1000
join address in Addresses on salesOrderHeader.BillToAddressID equals address.AddressID
where address.City == "Melton"
group salesOrderHeader by new { person.FirstName, person.LastName } into g //new
select new {
                g.Key.FirstName,
                g.Key.LastName,
                SubTotal = g.Sum(salesOrderHeader => salesOrderHeader.SubTotal),
            address.City
       } 
```

GroupBy 将多行合并为一行，这就是您想要的。

# php - php上传的文件名更改

> ID：15569928
> 
> 赞同：3
> 
> 时间：2013-03-22T12:07:43.527
> 
> 标签：php, html, upload

我需要有关使用 php 上传多个文件的帮助。当我上传具有不同字符名称的文件时，它会更改文件名，例如，如果它`"Kayıt.doc"`在上传后更改为`"KayÄ±t.doc"`. 我不想发生这种情况，我该怎么办？请帮忙.... ：）

这是html页面....

```
<!doctype html>
<html>
    <body>  
    <form action="cvupload.php" method="post" enctype="multipart/form-data" name="form1" id="form1">
        <table width="539" height="75" border="0">
            <tr>
                <td width="220"><div align="right">Step 2 : </div></td>
                <td width="309">Please upload your cv now </td>
            </tr>
            <tr>
                <td><span class="style14">Submit your cv (ms word / zip format)</span></td>
                <td><label for="file"></label>
                <input type="file" name="file[]" id="file" /></td>
            </tr>
            <tr>
                <td>&nbsp;</td>
                <td><label for="Submit"></label>
                <input type="submit" name="Submit" value="Submit" id="Submit" /></td>
            </tr>
        </table>
    </form> 
    </body>
</html> 
```

这是PHP页面...

```
<?php

$toplam = count($_FILES["file"]["name"]);
for ($i = 0; $i < $toplam; $i++)
{
    foreach ($_FILES['file']['name'] as $filename)
    {

 if (((($_FILES["file"]["type"][$i] == "application/msword")||($_FILES["file"]["type"][$i] == "application/zip")))
 && ($_FILES["file"]["size"][$i] > 0))
   {
   if ($_FILES["file"]["error"][$i] > 0)
     {

     echo "Return Code: " . $_FILES["file"]["error"][$i] . "<br />";
     }
   else
     {
     echo "Upload: " . $_FILES["file"]["name"][$i] . "<br />";
     echo "Type: " . $_FILES["file"]["type"][$i] . "<br />";
     echo "Size: " . ($_FILES["file"]["size"][$i] / 1024) . " Kb<br />";
     echo "Temp file: " . $_FILES["file"]["tmp_name"][$i] . "<br />";

     if (file_exists("upload/" . $_FILES["file"]["name"][$i]))
       {
       echo $_FILES["file"]["name"][$i] . " already exists. ";
       }
     else
       {
       move_uploaded_file($_FILES["file"]["tmp_name"][$i],
       "upload/" . $_FILES["file"]["name"][$i]);
       echo "Stored in: " . "upload/" . $_FILES["file"]["name"][$i];
       }
     }   
   }
 else
   {
   echo "Invalid file";

   }
}
 ?> 
```

当我`<input type="file" name="file" id="file" />` 只对 1 个文件使用这样的括号时，它可以，但对于多个文件，它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T14:40:21.013

谢谢大家的回复，我改了这样的代码，它工作。

```
move_uploaded_file($_FILES["file"]["tmp_name"][$i], "upload/" . iconv("UTF-8", "ISO-8859-9//TRANSLIT",$_FILES["file"]["name"][$i])); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T12:14:45.237

我想这不是你的代码的问题。我猜你的电脑不支持某些字符编码。

```
<?php
  function utf8_urldecode($str) {
    $str = preg_replace("/%u([0-9a-f]{3,4})/i","&#x\\1;",urldecode($str));
    return html_entity_decode($str,null,'UTF-8');;
  } 
```

参考这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T12:12:44.360

从我正在阅读的内容来看，您在 php 中收到的 URI 是经过编码的。尝试在有问题的字符串上使用[http://php.net/manual/en/function.urldecode.php](http://php.net/manual/en/function.urldecode.php)。

希望这可以帮助。

# visual-studio - 运行一次 MSBuild 脚本以获得解决方案

> ID：15569933
> 
> 赞同：1
> 
> 时间：2013-03-22T12:08:02.430
> 
> 标签：visual-studio, msbuild

我有一个包含 30 个项目的解决方案。所有这些项目都有相同的自定义 MSBuild 脚本，它将所有编译的文件（从 _PackageTempDir）复制到硬盘上的另一个位置。

```
<ItemGroup>
  <DeployFilesBin Include="$(_PackageTempDir)\bin\*.*" />
</ItemGroup>
<Copy SourceFiles="@(DeployFilesBin)" DestinationFiles="@(DeployFilesBin->'$(DeployDestinationBin)\%(RecursiveDir)%(Filename)%(Extension)')" SkipUnchangedFiles="True" /> 
```

当我更改文件名时，该文件不会从不需要的目标目录中删除，因为我可能会得到一个模棱两可的引用异常。我不想要一个全局 MSBuild 脚本，因为我想使用 Visual Studio 的构建快捷方式来执行 csproj 文件。

有什么办法可以删除目标目录下的所有文件，然后执行所有csproj文件？也许一个目标被触发一次以声明一个全局变量以检查该特定清理目标是否已经运行？

# ios - 画线+该线与自身的交点，并检测该画线内的CCSprites

> ID：15569943
> 
> 赞同：10
> 
> 时间：2013-03-22T12:08:28.900
> 
> 标签：ios, cocos2d-iphone, ccsprite, line-intersection, line-drawing

我正在使用以下代码画线，效果非常好，

[http://www.merowing.info/2012/04/drawing-smooth-lines-with-cocos2d-ios-inspired-by-paper/](http://www.merowing.info/2012/04/drawing-smooth-lines-with-cocos2d-ios-inspired-by-paper/)

现在我想......

1> 检测线是否与自身相交。2) 检测 CCSprite 是否在该闭合线内。

在搜索时，我遇到了 LineIntersection 的许多逻辑，但没有一个是准确的。我给了其中一个检测交叉点的方法，但是当没有线的交叉点时它也会检测到它。

1.  第一种方法

    ```
    - (BOOL) lineIntersectOccured:(CGPoint)t1 pointEnd:(CGPoint)t2
    {
        BOOL result = NO;
        int pointsCount = [arrlinePoints count];

        CGPoint cp1;
        CGPoint cp2;

        for(int i = 0, j = 1; j < pointsCount; i++,j++)
        {
            [[arrlinePoints objectAtIndex:i] getValue:&cp1];
            [[arrlinePoints objectAtIndex:j] getValue:&cp2];

            // lines connected do not need to be included.
            if((cp2.x == t1.x && cp2.y == t1.y) || (cp1.x == t2.x && cp1.y == t2.y))
            {
                continue;
            }

            CGPoint diffLA = CGPointMake(cp2.x - cp1.x,cp2.y - cp1.y);
            CGPoint diffLB = CGPointMake(t2.x - t1.x, t2.y - t1.y);

            float compA = diffLA.x*cp1.y - diffLA.y * cp1.x;
            float compB = diffLB.x*t1.y - diffLB.y*t1.x;

            BOOL compA1 = (diffLA.x*t1.y - diffLA.y*t1.x) < compA;
            BOOL compA2 = (diffLA.x*t2.y - diffLA.y*t2.x) < compA;
            BOOL compB1 = (diffLB.x*cp1.y - diffLB.y*cp1.x) < compB;
            BOOL compB2 = (diffLB.x*cp2.y - diffLB.y*cp2.x) < compB;

            if(((!compA1 && compA2) || (compA1 && !compA2)) && ((!compB1 && compB2) || (compB1 && !compB2)))
            {
                result = YES;
            }
        }
        return result;
    } 
    ```

这就是我调用此方法的方式，我已将我的点存储在来自 pangesture 识别器方法的 arrLinePoints 中

```
 if ([self lineIntersectOccured:[[arrlinePoints objectAtIndex:0] CGPointValue] pointEnd:[[arrlinePoints objectAtIndex:[arrlinePoints count] - 1] CGPointValue]] )
  {
      NSLog(@"Line Intersected");
  } 
```

即使在以下情况下，这也给了我真实的

![在此处输入图像描述](../Images/909fc7c0ee8d7fe264cd24547ada548f.png)

我还通过将视图添加到 CCDirector 的视图中尝试了使用不同方法的相同功能

[UIBezierPath 相交](https://stackoverflow.com/questions/13999249/uibezierpath-intersect)

但这带来了性能问题，我的 fps 降低到几乎 3 到 6。而且那个交叉点问题仍然存在。

相交的完美情况是

![在此处输入图像描述](../Images/5edc8ea1279f5a7a4e8a22a3323e0f58.png)

请尽快提供帮助！感谢大家的支持。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T18:55:01.203

当您自己构建路径时，不需要测试像素。而是使用用于创建路径的点。

找到一个好的线段相交算法应该不会太难。似乎这个问题的最高答案有一个很好的方法： [确定两条线段是否相交？](https://stackoverflow.com/questions/4977491/determining-if-two-line-segments-intersect)

找到命中后，使用该准确的命中点和点的历史来构建多边形。

从那里您应该能够执行“多边形中的点”测试。

一些性能提示：

1.  在寻找交点时，只检查最新的线段是否与其他线段发生碰撞（之前没有相交的所有线这次都不会相交）
2.  当您可以断定两个点都在线段的一个极端时，您可能会跳过线段，例如，如果： current.ax < current.bx && (foreign.ax < current.ax && foreign.bx < current 。斧头）

我希望这可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T15:40:30.187

虽然没有实现，但我想你可以在 touchesMoved 方法中用你画线的像素值检测画线的像素值。或者您可以参考[此处](https://stackoverflow.com/questions/8076036/intersection-between-2-lines-in-cocos2d)了解详细方法。在这里也做了同样的工作。

# android - 与 Android 意图共享图像

> ID：15569944
> 
> 赞同：4
> 
> 时间：2013-03-22T12:08:32.173
> 
> 标签：android, email, android-intent, share, drawable

我正在尝试通过这样的共享意图共享图像：

```
Intent sharingIntent = new Intent(android.content.Intent.ACTION_SEND);

    sharingIntent.setType("image/png");
sharingIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, application.getString(R.string.app_name));
    sharingIntent.putExtra(android.content.Intent.EXTRA_TEXT,application.getString(R.string.app_share_message));

    File image = new File(Uri.parse("android.resource://" + C.PROJECT_PATH + "/drawable/" + R.drawable.icon_to_share).toString());
        sharingIntent.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(image));
        shareMe(sharingIntent); 
```

共享意图正确触发，我选择了 Gmail，一切都按预期运行，直到我按下发送。我收到“无法显示附件”的通知，并且没有它就发送了电子邮件...为什么？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T12:14:13.990

首先，不能保证任何给定的其他应用程序都能够支持`android:resource//` `Uri`. 您将在外部存储上共享文件或使用`ContentProvider`.

话虽如此，替换：

```
File image = new File(Uri.parse("android.resource://" + C.PROJECT_PATH + "/drawable/" + R.drawable.icon_to_share).toString());
    sharingIntent.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(image)); 
```

和：

```
 sharingIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse("android.resource://" + C.PROJECT_PATH + "/drawable/" + R.drawable.icon_to_share); 
```

An`android:resource://`不是 a ，并且您可能会通过转换为 a然后再转换为 a`File`来搞砸您的。`Uri``File``Uri`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-05T09:44:38.070

BitmapDrawable bitmapDrawable = (BitmapDrawable)ImageView.getDrawable(); 位图位图 = bitmapDrawable.getBitmap();

```
 // Save this bitmap to a file.
        File cache = getApplicationContext().getExternalCacheDir();
        File sharefile = new File(cache, "toshare.png");
        Log.d("share file type is", sharefile.getAbsolutePath());
        try {
            FileOutputStream out = new FileOutputStream(sharefile);
            bitmap.compress(Bitmap.CompressFormat.PNG, 100, out);
            out.flush();
            out.close();
        } catch (IOException e) {
            Log.e("ERROR", String.valueOf(e.getMessage()));

        }

        // Now send it out to share
        Intent share = new Intent(android.content.Intent.ACTION_SEND);
        share.setType("image/*");
        share.putExtra(Intent.EXTRA_STREAM,
                Uri.parse("file://" + sharefile));

        startActivity(Intent.createChooser(share,
                "Share Image")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-25T21:19:05.603

就我而言，我使用了：

```
Uri imageUri = Uri.parse("android.resource://com.examle.tarea/" + R.drawable.tienda_musica);
Intent intent = new Intent();
intent.setAction(Intent.ACTION_SEND);           
intent.setType("image/jpeg");
intent.putExtra(Intent.EXTRA_STREAM, imageUri);         
startActivity(Intent.createChooser(intent, getString(R.string.action_share))); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-15T21:19:03.757

//打开共享意图选择器（将显示已安装的应用程序，我可以从中共享//图像）

私人无效shareImage（字符串imagePath，字符串quoteByPerson，字符串quoteToShare）{

```
 Intent share = new Intent(Intent.ACTION_SEND);
        share.setType("image/*");
        // String imagePath = Environment.getExternalStorageDirectory() +
        // "/myImage.png";
        File imageFileToShare = new File(imagePath);
        Uri uri = Uri.fromFile(imageFileToShare);
        share.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);
        share.putExtra(Intent.EXTRA_TEXT, "Quote of the day-:" + "\n" + quoteToShare + "\n" + quoteByPerson);

        share.putExtra(android.content.Intent.EXTRA_TITLE, "Quote of the day-:");

        if (imagePath.contains("android.resource://"))
        {
            Uri imageUri = Uri.parse(imagePath);
            share.putExtra(Intent.EXTRA_STREAM, imageUri);

        } else
        {
            share.putExtra(Intent.EXTRA_STREAM, uri);
        }
        startActivity(Intent.createChooser(share, "Share inspiration via..."));
    } 
```

# html - 在同一页面上添加 2 个具有不同坐标的谷歌地图

> ID：15569945
> 
> 赞同：1
> 
> 时间：2013-03-22T12:08:33.963
> 
> 标签：html, google-maps-api-3, maps, wordpress-theming

我一直在使用 wordpress 主题，它支持在菜单中添加坐标并直接在联系页面上显示地图。现在我有一个需要添加到联系人地图的新公司地址，但主题不支持。

鉴于我在 php 和 js 方面的经验有限，我无法找到解决问题的方法。

我的联系页面代码如下，我只需要在联系表格之前添加一个具有不同坐标的新地图。

```
<div id="content">
    <?php
    if ( have_posts() ) :
        while ( have_posts() ) : 
        the_post();
        $show_map = get_option('theme_gmap_show');
        if($show_map == 'true')
        {
        $map_lati = get_option('theme_gmap_lati');
        $map_longi = get_option('theme_gmap_longi');
        $map_zoom = get_option('theme_gmap_zoom');
    ?>                                                   
    <div class="map-container clearfix">
            <div id="map_canvas"></div>                         
            <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
            <script type="text/javascript">
            function initialize() 
            {
            var geocoder  = new google.maps.Geocoder();
            var map;
            var latlng = new google.maps.LatLng(<?php echo $map_lati; ?>, <?php echo $map_longi; ?>);
            var infowindow = new google.maps.InfoWindow();
            var myOptions = { 
                zoom: <?php echo $map_zoom; ?>,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
            geocoder.geocode( { 'location': latlng }, 
              function(results, status) {
                if (status == google.maps.GeocoderStatus.OK) 
                {
                  map.setCenter(results[0].geometry.location);
                  var marker = new google.maps.Marker({
                       map: map, 
                       position: results[0].geometry.location
                  });                                                                                                
                } 
                else 
                {
                  alert("Geocode was not successful for the following reason: " + status);
                }
             });
           }
           initialize();
           </script>        
          </div>                                                                                                                                
    <?php                                                   
    } 
    the_content(); 
            $postal_address = stripslashes(get_option('theme_postal_address'));
    if(!empty($postal_address))
    {
    ?>                                                                                                                                                                  
            <h3 class="smart-head">Adresa de contact</h3>
    <p><address>
   <?php echo $postal_address; ?>
</address></p>
<?php
}
?>
     <div class="contact-orar">
     <h3 class="smart-head">Program de Lucru</h3>
     <p><strong>Luni - Vineri:</strong> 8:00 - 17:00<br />
     <strong>Sambata:</strong> 8:00 - 14:00<br />
     <strong>Duminica:</strong> inchis</p>
     </div>
     <div class="contact-form-container"> 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:15:01.307

您必须在对查询的调用结束时添加一个随机键。这是一个使用 KML 图层的示例，但它是相同的概念。

```
$( function() {

   $(".map_canvas").each( function() {

           var theElement = $(this).attr('id');
           var lat = $(this).attr('lat');
           var lon = $(this).attr('lon');
           var kml = $(this).attr('kml');

           var mapCenter = new google.maps.LatLng(lat,lon);
           var mapOptions = {
             zoom: 14,
             center: mapCenter,
             mapTypeId: google.maps.MapTypeId.ROADMAP
           }

           var map = new google.maps.Map(document.getElementById(theElement), mapOptions);
           var geopoints = new google.maps.KmlLayer('http://blah.com/temps/kmls/' + kml + '.kml?run=' + (new Date()).getTime() ); //?nocache=0
           geopoints.setMap(map);
   });

}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:09:31.740

即使没有任何`PHP`知识，您也应该能够管理添加地图，代码使用 Google Maps API v3。您可以使用 JavaScript 轻松添加另一个地图。首先添加另一个带有 ID 的 div，`map_canvas_2`接下来您应该使用以下 Javascript 代码：

```
<script>
  var map;

  function initialize() {
    var mapOptions = {
      zoom: 6,
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      center: new google.maps.LatLng(/*latitude here*/,/*longitude here*/)
    };
    map = new google.maps.Map(document.getElementById('map_canvas_2'),
        mapOptions);
  }

  google.maps.event.addDomListener(window, 'load', initialize);
</script> 
```

这将显示以您在`map_canvas_2`div 中指定的坐标为中心的地图。您可以在此处找到更多信息：[https ://google-developers.appspot.com/maps/documentation/javascript/reference](https://google-developers.appspot.com/maps/documentation/javascript/reference)

**JsFiddle在这里：http: [//jsfiddle.net/Chycx/2/](http://jsfiddle.net/Chycx/2/)**

# json - ConvertTo-JSON 未正确输出

> ID：15569948
> 
> 赞同：1
> 
> 时间：2013-03-22T12:08:43.400
> 
> 标签：json, powershell, powershell-3.0

我正在尝试使用 Powershell 中的 ConvertTo-JSON 方法来创建 JSON 结果，但我得到的输出不是有效的 JSON。我的输出示例是：

```
{
    "label":  "$stockShortName"
}
{
    "label":  "$stockShortName"
} 
```

这就是我所期待的：

```
[
    {
        "label":  "$stockShortName"
    },
    {
        "label":  "$stockShortName"
    }
] 
```

这是我正在使用的代码：

```
#Write each message where there is a stockshortname
foreach ($row in $DataSet.Tables[0].Rows){  
    $stockShortName = $row[0].ToString().Trim()
    (New-Object PSObject |
     Add-Member -PassThru NoteProperty label '$stockShortName' ) | ConvertTo-JSON
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:17:35.467

错误结果的原因是您将*单个*对象传递给 ConvertTo-Json 而不是整个集合。如果要使用 foreach 构造：

```
$(foreach ($row in $DataSet.Tables[0].Rows){  
    $stockShortName = $row[0].ToString().Trim()
    (New-Object PSObject |
     Add-Member -PassThru NoteProperty label '$stockShortName' ) 
}) | ConvertTo-JSON 
```

注意子表达式 ( `$(code)`) 的使用 - 否则 foreach 不会写入管道。

# snmp - snmp v3 中的权威引擎 ID 和上下文引擎 ID

> ID：15569949
> 
> 赞同：2
> 
> 时间：2013-03-22T12:08:44.030
> 
> 标签：snmp, net-snmp, snmptrapd

我有一台发送**snmpinform**的客户端机器。在另一台机器上，我正在运行 snmptrapd 服务器。

我想明确提及上下文引擎 ID 和权威引擎 ID。

在发送命令时，我可以使用**-e**作为权威引擎 ID，使用**-E**作为上下文引擎 ID。

但是，问题是如何在 snmptrad.conf 中提及这些值

snmptrapd.conf 的片段是

```
createUser -e 0x000006D70000000000000000 FMS

authUser log,execute,net FMS noauth

engineID  000006D7C0A800C800000000 
```

我对 snpinform 的命令是：

```
snmpinform -v 3 -d -n "" -l noAuthNoPriv -u FMS -E 0x000006D70000000000000000 -e 80001f8804303030303036443743304138303043383030303030303030 192.168.0.200 162 1.3.6.1.4.1.1751.2.119.1.1.1.0 
```

输出是超时（错误消息来了）。对wireshark 的进一步调查显示，在报告中它提供了具有相同值的权威和上下文引擎ID。

我确实尝试了几种解决方法而没有任何用处

1.  发送 snmpinform 时未提供 -e 选项。它确实发现了权威引擎 ID 并且输出仍然相同（错误消息和超时）

2.  没有给 -E 选项。**snpinform：未知用户名**

    obv：这似乎是完全不同的行为。它能够正确解码上下文引擎 id 并能够识别用户名。但是，该报告具有不同的上下文引擎 ID。

3.  创建用户时未提供 -e 选项，发送时仅提供 -e（权威引擎 ID）。然后它完美地工作了。

    obv：权威引擎 ID 和上下文引擎 ID 相同。所以，它工作得很好。

如果我想在 conf 文件中同时提及两个引擎 ID，该怎么办？

如何将 snmptrapd.conf 文件中的权威引擎 ID 作为十六进制数字提供？它需要文本字符串。如果我有不可打印的字符怎么办。

感谢您耐心阅读:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:44:37.557

我认为（安全）引擎 ID 的 -3e 和上下文引擎 ID 的 -3E 应该可以解决 snmptrapd.conf 的问题。我在 snmplib/snmpv3.c:150 的 net-snmp 源代码中找到了这些以供参考，不确定它们是否已记录在案。

我想这就是你要的吗？如果 snmptrapd 行为不正确，您可能需要使用 net-snmp 源代码并逐步完成。

# javascript - 每 12 小时运行一次 javascript

> ID：15569951
> 
> 赞同：0
> 
> 时间：2013-03-22T12:08:47.970
> 
> 标签：javascript, popup

有什么办法可以每 12 小时运行一次 javascript 代码。我在网站中实现了一个弹出脚本。而且我不希望它每次都弹出。我只是希望它每 12 小时弹出一次。

为此，我需要将用户的 IP 地址存储在数据库中，并检查他是否在过去 12 小时内访问过该网站。

好吧，至少对于 javascript，有没有办法阻止它进行访问。就像用户关闭弹出窗口并导航到其他页面一样，弹出窗口不应再次出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:13:21.787

[https://developer.mozilla.org/en-US/docs/DOM/document.cookie](https://developer.mozilla.org/en-US/docs/DOM/document.cookie)

这将使您了解如何使用 cookie。**如果您已经在使用 jQuery**，请查看这个 cookie 插件以使事情变得更容易：

[https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

# c# - 用于在线程之间同步集合的模式

> ID：15569952
> 
> 赞同：1
> 
> 时间：2013-03-22T12:08:48.233
> 
> 标签：c#, multithreading

我正在开发一个多线程应用程序，其中多个线程正在操作项目集合（列表类型）。正在执行的操作包括添加、删除项目、遍历项目和执行计算。我目前正在使用锁定进行同步，但是对于多个共享集合和线程，它变得有点复杂。您会建议哪些模式来有效地在线程之间共享数据、避免竞争条件并使代码更易于维护？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:11:34.633

好吧，让多线程代码正确是很棘手的。

我建议查看 中的集合[`System.Collections.Concurrent`](http://msdn.microsoft.com/en-us/library/system.collections.concurrent.aspx)，只要您不执行需要具有多个集合的事务类行为的操作，它们就可以在没有锁的情况下使用。

# android - 从图像 URL 下载图像到图像视图

> ID：15569953
> 
> 赞同：2
> 
> 时间：2013-03-22T12:08:49.797
> 
> 标签：android, memory-management, bitmap

我正在尝试从 imageurl 下载图像来自该 url 的图像是高分辨率图像。当我尝试将此图像加载到 mdpi 的模拟器时，它在所有高分辨率手机中都可以正常工作，它正在抛出内存泄漏例外。

我该如何处理这种情况，我希望在每个屏幕上都有这个图像，所以我将位图声明为全局变量

有什么方法可以在下载时减小图像大小。我使用以下代码下载图像

c1 是对图像视图的引用

```
bitmap = BitmapFactory.decodeStream((InputStream)new URL(logourltop.get(0)).getContent());
cl.setImageBitmap(bitmap) ; 
```

（或者）

最好在需要时使用 urlimagehelper 项目下载图像

```
UrlImageViewHelper.setUrlDrawable(cl,logourltop.get(0)); 
```

还有一个疑问是我正在通过使用更改同一活动中的视图

```
setContentView(R.layout.filename). 
```

如果我更改 listitem 上的视图，单击为位图分配的内存将被释放或不释放。（为该视图分配的对象和位图的内存）

你能建议我一个更好的方法来避免内存泄漏吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:24:24.050

您基本上必须下载图像数据，并以流或字节数组的形式使用图像数据，您可以使用[BitmapFactory](https://developer.android.com/reference/android/graphics/BitmapFactory.html)中的便捷方法，它将为您提供一个位图，并且有了这个位图，您可以已经将其直接设置为 ImageView。

确保在单独的线程中从网络执行下载，例如使用[AsyncTask .doInBackground()](https://developer.android.com/reference/android/os/AsyncTask.html#doInBackground%28Params...%29)并在 UI 线程上的 ImageView 上设置位图，例如通过在 AsyncTask 的方法[onPostExecute()](https://developer.android.com/reference/android/os/AsyncTask.html#onPostExecute%28Result%29)上设置位图或调用[Activity.runOnUIThread( )](https://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29) .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:13:40.583

```
import java.io.BufferedInputStream;
import java.io.BufferedOutputStream;
import java.io.FileOutputStream;
import java.io.InputStream;
import java.net.URL;

import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.drawable.BitmapDrawable;
import android.graphics.drawable.Drawable;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.widget.ImageView;

public class downloadimg extends Activity {

//  
private ImageView mImageView;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    //Find the reference to the ImageView
    mImageView = (ImageView) findViewById(R.id.test_image);

    // You can set a temporary background here
    //image.setImageResource(null);

    // Start the DownloadImage task with the given url
    new DownloadImage().execute("http://demo.imgur.com/CQzlM.jpg");
}

/**
 * Simple functin to set a Drawable to the image View
 * @param drawable
 */
private void setImage(Drawable drawable)
{
    mImageView.setBackgroundDrawable(drawable);
}

public class DownloadImage extends AsyncTask<String, Integer, Drawable> {

    @Override
    protected Drawable doInBackground(String... arg0) {
        // This is done in a background thread
        return downloadImage(arg0[0]);
    }

    /**
     * Called after the image has been downloaded
     * -> this calls a function on the main thread again
     */
    protected void onPostExecute(Drawable image)
    {
        setImage(image);
    }

    /**
     * Actually download the Image from the _url
     * @param _url
     * @return
     */
    private Drawable downloadImage(String _url)
    {
        //Prepare to download image
        URL url;        
        BufferedOutputStream out;
        InputStream in;
        BufferedInputStream buf;

        //BufferedInputStream buf;
        try {
            url = new URL(_url);
            in = url.openStream();

            // Read the inputstream 
            buf = new BufferedInputStream(in);

            // Convert the BufferedInputStream to a Bitmap
            Bitmap bMap = BitmapFactory.decodeStream(buf);
            if (in != null) {
                in.close();
            }
            if (buf != null) {
                buf.close();
            }

            return new BitmapDrawable(bMap);

        } catch (Exception e) {
            Log.e("Error reading file", e.toString());
        }

        return null;
    }

}

} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-22T12:28:13.447

希望这会有所帮助...

```
public class BitmapResizer {

    public static Bitmap decodeFile(File f,int requiredSize){
    try {
        //decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(new FileInputStream(f),null,o);

        //Find the correct scale value. It should be the power of 2.
        final int REQUIRED_SIZE=requiredSize;
        int width_tmp=o.outWidth, height_tmp=o.outHeight;
        int scale=1;
        while(true){
            if(width_tmp/2<REQUIRED_SIZE || height_tmp/2<REQUIRED_SIZE)
                break;
            width_tmp/=2;
            height_tmp/=2;
            scale*=2;
        }

        //decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize=scale;
        return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
    } catch (FileNotFoundException e) {

    }
    return null;
}} 
```

# java - 由于 BlockingQueue.take()，Java VM 未关闭

> ID：15569956
> 
> 赞同：0
> 
> 时间：2013-03-22T12:09:18.360
> 
> 标签：java, concurrency, blockingqueue

我的应用程序启动了一个使用阻塞队列的守护线程。当使用 kill -3 杀死它时，应用程序不会完全停止，并且生成的堆栈显示它仍在等待`BlockingQueue.take()`。

任何有助于彻底关闭的建议将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:08:13.523

你说...

```
...When it is killed using kill -3, the app doesnt stop cleanly and the... 
```

通常，使用 Kill -3 不会终止 Java 应用程序。

Kill SIGQUIT (-3) 用于获取 Java 线程转储。

尝试使用 kill -9 或 -15

如果启用了一些特殊的信号处理钩子，这种行为可能会改变。

编辑：

此外，受控、干净的 Java 应用程序关闭源自应用程序内。
看看[如何在 Java 中优雅地处理 SIGKILL 信号](https://stackoverflow.com/questions/2541597/how-to-gracefully-handle-the-sigkill-signal-in-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:08:47.730

`BlockingQueue#take`响应中断，因此您只需要确保中断执行该`take`方法的线程并充分处理抛出`InterruptedException`的问题（即退出该方法）。

如果有问题的线程由线程池管理，您可以`shutdownNow`使用该池，这也会中断线程。

# security - 重定向后清除 Symfony2 安全令牌

> ID：15569960
> 
> 赞同：0
> 
> 时间：2013-03-22T12:09:36.893
> 
> 标签：security, symfony

我已经构建了一个登录表单，其中包含一个成功设置身份验证令牌的自定义提供程序。

在重定向拦截页面上，我可以在分析器中看到“登录身份”。然后表单重定向到我的成功页面。

出于某种原因，我的成功页面无法识别我已登录并循环回到登录页面。

```
security:
    encoders:
        EP\Common\Entity\User: sha1
        encode_as_base64: false

    role_hierarchy:
        ROLE_ADMIN:       ROLE_USER
        ROLE_SUPER_ADMIN: [ROLE_USER, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH]

    providers:
        main:
            entity: { class EP\Common\Entity\User, property: username }

    firewalls:
        dev:
            pattern:  ^/(_(profiler|wdt)|css|images|js)/
            security: false

        login_form:
            pattern: ^/cms/(login|logout)$
            security: false

        cms:
            pattern:  ^/cms/
            security: true
            provider: main
            form_login:
                check_path: /cms/login_check
                login_path: /cms/login
            logout:
                path:   /cms/logout
                target: /cms/login

    access_control:
        - { path: ^/cms/login, roles: IS_AUTHENTICATED_ANONYMOUSLY, requires_channel: http }
        - { path: /cms, roles: ROLE_USER } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:54:36.917

我发现这是为什么。

我已将这些方法添加到我的 User 类中（请注意反序列化中的 [0] - 原则是根据 ID 的第一个字符查找用户的 ID）：

```
/**
 * (PHP 5 &gt;= 5.1.0)<br/>
 * String representation of object
 * @link http://php.net/manual/en/serializable.serialize.php
 * @return string the string representation of the object or null
 */
public function serialize()
{

    return serialize($this->getId());
}

/**
 * (PHP 5 &gt;= 5.1.0)<br/>
 * Constructs the object
 * @link http://php.net/manual/en/serializable.unserialize.php
 * @param string $serialized <p>
 * The string representation of the object.
 * </p>
 * @return mixed the original value unserialized.
 */
public function unserialize($serialized)
{

    $this->_uuid = unserialize($serialized)[0];
} 
```

# java - 最好的方法是如何生成一个短名称，例如数据库中的属性值

> ID：15569961
> 
> 赞同：0
> 
> 时间：2013-03-22T12:09:37.833
> 
> 标签：java, database, stringbuilder

尽管我使用 JSF 东西、托管 bean、DB 等，但我有纯 Java 问题，但这并不重要。因此，我想在 DataTable 中的行上显示我的属性的短名称，该名称位于数据库中，例如“名称”或其他字符串字段，

例如。假设我们在数据库中有一个表 Person >> person 具有 'name' 属性，在这个表中我创建另一个字段 'shortname' >> 在这里将存储一个来自 'name' 的值的短名称例如'名称'字段是

> 约翰

现在在我的“短名称”属性中必须是短名称，例如 JOH，所以我想在这里存储前三个字母。

我可以要求一些 Java 模式，我可以在我的控制器方法中使用什么来以这种形式显示值吗？它对这种类型的 String Builder 类有用吗？我不确定这是否也适用于 DB 值 非常感谢您的帖子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:13:52.430

这样就可以用String类实现

```
yourStringVar.substring(0,3).toUpperCase() 
```

# file-upload - 在 ipad 上使用 MVC2、ios6 上传文件

> ID：15569967
> 
> 赞同：0
> 
> 时间：2013-03-22T12:10:11.787
> 
> 标签：file-upload, asp.net-mvc-4, ios6

我有一个 MVC2 Web 应用程序，其中有一个包含如下简单表单的视图：

```
<%using (Html.BeginForm("Action", "Controller", FormMethod.Post, new { enctype = "multipart/form-data", @id = "frmAddNewObservationPhoto" }))
  {%>
    <%= Html.AntiForgeryToken()%>
    <strong>1\. Enter Photo Description</strong><br />
    <%= Html.TextArea("photoDescription", Model.photoDescription, new { @style = "height: 100px", @id = "photoDescription" })%><br />
    <strong>
        2\. Browse New Photo:<br />
        <%= Html.HiddenFor(x => x.questionNo)%>
        <%= Html.HiddenFor(x => x.observationID)%>        
        <input id="file" type="file" name="file">
        <a class="resolveTask" href="javascript:AddNewObservationPhoto()"></a><br />
        Or Select Saved Photo: <br />         
    </strong> 
    <br />
<%} %> 
```

我已经在桌面浏览器（firefox、IE、Chrome）上进行了测试，并且用户选择的文件已正确发布到我的操作中。我的操作代码如下所示：

```
[HttpPost]
    [ValidateAntiForgeryToken]
    public ActionResult AddNewObservationPhoto(Guid observationID, string photoDescription, decimal questionNo)
    {
        TaskFireObservations fireObservation = FireHelper.GetObservationByID(observationID, _session);

        if (Request.Files.Count > 0)
        { 
```

为了完成，javascript如下：

```
function AddNewObservationPhoto() {
   var photoDescription = $('#photoDescription').val();
   if (photoDescription.length == 0) {
       alert('Please enter the photo description');
   }
   else {
       $('#frmAddNewObservationPhoto').submit();           
   } 
```

};

我的问题是，当我在 iPad 6.0.1 版（因此是移动 safari 浏览器）上测试它时，没有文件发布到该操作。我已经在 ipad 的 chrome 浏览器上进行了测试，它在那里运行良好。我还在在线 ipad 模拟器上进行了测试，它可以工作；即所选文件发布到操作，然后保存到相关位置。

有谁知道为什么会发生这种情况？我希望我已经足够清楚地解释了这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:00:57.697

我将此归结为移动 safari 中的一个错误，因为这种情况会间歇性地发生，即在某些情况下会发布文件，而在其他情况下它什么也不做。

# css - 用浮点数清除 DIV

> ID：15569968
> 
> 赞同：3
> 
> 时间：2013-03-22T12:10:12.320
> 
> 标签：css

我有一个 div（导航），它是“float:left;”。在这个 div 主要内容之后。第二个 div 超过第一个。

如果我添加 style="clear:both;" 在第一个差异之后，它就可以工作了。但是，我想知道这是否是正确的方法，这是我唯一的问题。

```
<div class="nav">
    <ul>
        <li><a href="">text</a></li>...
    </ul>
</div>
<div style="clear:both;"></div>
<div id="content-wrapper"></div>    

.nav{
    width: 100%;
    float: left;
    margin: 0 0 3em 0;
    padding: 0;
    list-style: none;    
}

.nav li{
    float: left; 
    margin: 0 2px;
}

.nav li a{        
    display: block;
    padding: 8px 15px;        
    text-decoration: none;
    font-weight: bold;
    color: #fff;
    border-right: 1px solid #ccc; 
    background-color: #3b3d49;
    -webkit-border-radius: 7px 7px 0px 0px;
    border-radius: 7px 7px 0px 0px;
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T12:13:03.440

是的，这很好用。但是，您不需要另一个元素来清除内容，您可以将样式添加到内容包装器中。

在您的样式表中：

```
#content-wrapper { clear: both; } 
```

* * *

`overflow`另一种方法是在浮动元素周围添加一个容器，并使用以下样式使其包含其子元素：

```
<div class="nav-container">
  <div class="nav">
    <ul>
      <li><a href="">text</a></li>...
    </ul>
  </div>
</div>
<div id="content-wrapper">
</div> 
```

然后在您的样式表中添加：

```
.nav-container { overflow: hidden; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T12:12:49.823

上面提到的主要用途`"clear:both"`

clear 属性指定元素的哪些边不允许其他浮动元素。

```
"clear:both" 
```

表示左侧或右侧都不允许浮动元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T12:12:47.353

在回答您的问题时，使用清洁浮动`clear:both;`是一种非常标准的方法，是的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T12:12:48.077

这是最好的方法，只需将 class .group 添加到您的容器中

```
.group:before,
.group:after {
    content: "";
    display: table;
} 
.group:after {
    clear: both;
}
.group {
    zoom: 1; /* For IE 6/7 (trigger hasLayout) */
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-22T12:14:40.607

是的，从 html 的创建者那里看到这个例子是正确的

[http://www.w3schools.com/cssref/pr_class_clear.asp](http://www.w3schools.com/cssref/pr_class_clear.asp)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-22T12:22:30.610

你可以用`<br clear="all" />`短手。另一种方法是您可以使用 clearfix 方法，您可以在 google 上搜索它以获得最佳效果。这是@conner 解释的方法。

# asp.net-mvc - 使用 jqgrid 在 ASP.NET MVC 中更改下拉列表时将数据发布到操作结果

> ID：15569971
> 
> 赞同：0
> 
> 时间：2013-03-22T12:10:25.163
> 
> 标签：asp.net-mvc, jqgrid

我创建了 JqGrid 来加载如下所示的一些记录。

```
 <script type="text/javascript">
        $(document).ready(function () {
            $('#jqgRequests').jqGrid({
                defaults: {
                    recordtext: "View {0} - {1} of {2}",
                    emptyrecords: "No Request Found",
                    loadtext: "Loading...",
                    pgtext: "Page {0} of {1}"
                },
                //url from wich data should be requested
                url: '@Url.Action("LoadRequest")',
                //type of data
                datatype: 'json',
                //url access method type
                mtype: 'POST',
                //columns names
                colNames: ['Is Approved','Requestor', 'Request Type', 'Request Date', 'Approved Date', 'Package','Comments','RequestID', '','',''],
                //columns model
                colModel: [

                         { name: 'IsApproved',
                               formatter: function (cellvalue, options, rowObject) {
                                   var status = rowObject[0];
                                   if (status == 1) {
                                       return '<input type="checkbox" name="approval" checked disabled="disabled">';
                                   }

                                   else if(status==2) {

                                    return '<img  src="@Url.Content("~/Content/images/reject.jpg")"></img>';

                                   }
                                   else{
                                    return '<input type="checkbox" name="approval" disabled="disabled" >';
                                   }

                               },sortable:false, align: 'center', width: 80, index: 'subColumn'
                           },
                         { name: 'Requestor', index: 'Requestor', width: 170, align: 'left' },
                         { name: 'Request Type', index: 'RequestType', width: 90, align: 'left' },
                         { name: 'RequestDate', index: 'RequestDate', formatter: 'date', formatoptions: { srcformat: 'FullDateTime', newformat: 'd/m/Y g:i:s A' }, width: 120, align: 'left' },
                         { name: 'ApprovedDate', index: 'ApprovedDate', formatter: 'date', formatoptions: { srcformat: 'FullDateTime', newformat: 'd/m/Y g:i:s A' }, width: 120, align: 'left' },
                         { name: 'Package', index: 'Package', width: 150, align: 'left' },
                         { name: 'Comments', index: 'Comments', width: 300, align: 'left' },
                         { name: 'RequestID', index: 'RequestID', width: 1, align: 'left',hidden:true },

                         { name: 'Approve',
                             formatter: function (cellvalue, options, rowObject) {
                                 var status = rowObject[0];
                                 if(status==1)
                                 {
                                 return  '@Html.ActionLink("Approve", null, null, new { @style = "color:blue;font-weight:bold;", onclick = "return WarningPopup('Already approved');", href = "#" })';

                                 }
                                 else{
                                   var x = '@Html.ActionLink("Approve", null, null, new { @style = "color:Blue;font-weight:bold;", onclick = "return ConfirmPopup('myId');", href = "#"  })';
//                                 var x = '@Html.ActionLink("Approve", "Approve", "Dashboard", new { requestId = "myId" }, new { @style = "color:Blue;font-weight:bold;", onclick = "return confirm('Are you sure to approve this request?');" })';
                                 return x.replace("myId",rowObject[7]);
                                 }
                             },sortable:false, align: 'left', width: 45
                         },
                           { name: 'Reject',
                             formatter: function (cellvalue, options, rowObject) {
                                      var status = rowObject[0];
                                 if(status==2)
                                 {
                                 return  '@Html.ActionLink("Reject", null, null, new { @style = "color:blue;font-weight:bold;", onclick = "return WarningPopup('Already rejected');", href = "#" })';

                                 }
                                 else{
                                  var x = '@Html.ActionLink("Reject", null, null, new { @style = "color:Blue;font-weight:bold;", onclick = "return Rejectpopup('myId');", href = "#"  })';
                                // var x = '@Html.ActionLink("Reject", "Reject", "Dashboard", new { requestId = "myId" }, new { @style = "color:Blue;font-weight:bold;", onclick = "return confirm('Are you sure to reject this request?');" })';
                                 return x.replace("myId",rowObject[7]);
                                 }
                             },sortable:false, align: 'left', width: 60
                         },
                          { name: 'More',
                             formatter: function (cellvalue, options, rowObject) {
//                                var x = "<a class='btnMore' onclick='GetDetail('myId');' style = 'color:blue;font-weight:bold;' href='#'>More Detail</a>"
                             var x='@Html.ActionLink("Detail", null, null, new { @style = "color:blue;font-weight:bold;", onclick = "return GetDetail('myId');", href = "#" })';

                               return x.replace("myId",rowObject[7]);

                             },sortable:false, align: 'left', width: 80
                         }
                         ],
                //pager for grid
                pager: $('#jqgpRequests'),
                //number of rows per page
                rowNum: 25,
                //initial sorting column
                sortname: 'RequestID',
                //initial sorting direction
                sortorder: 'asc',
                //we want to display total records count
                viewrecords: true,
                //grid height
                height: '100%'
            });
        });
        </script> 
```

## 行动结果

```
 [AcceptVerbs(HttpVerbs.Post)]
            public JsonResult LoadRequest(JqGridRequest request)
            {
                int totalRecords = _dashboardRepository.RequestCount;
                var response = new JqGridResponse()
                {
                    TotalPagesCount = (int)Math.Ceiling((float)totalRecords / (float)request.RecordsCount),
                    PageIndex = request.PageIndex,
                    TotalRecordsCount = totalRecords
                };
                const string subColumn = "";
                foreach (var dashboard in _dashboardRepository.LoadAllRequests(request.SortingName, request.SortingOrder.ToString(), request.PageIndex, request.RecordsCount))
                {
                    response.Records.Add(new JqGridRecord(dashboard.RequestID.ToString(), new List<object>()
                {
                    dashboard.IsApproved,
                    dashboard.Requestor,
                    dashboard.RequestType,
                    dashboard.RequestDate,
                    dashboard.ApprovedDate,
                    dashboard.Package,
                    dashboard.Comments,
                    dashboard.RequestID
                }));
                }
                return new JqGridJsonResult { Data = response };
            } 
```

这个 jqGrid 在页面加载时加载。我还添加了一个用于过滤的下拉列表。为此，我需要为 JqGridRequest 类发布一些参数。我怎么可能呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:45:12.093

假设您的下拉 id 是`ddlFilter`您可以这样编写 JavaScript 更改事件处理程序：

```
$('#ddlFilter').on('change', function(e) {
    $('#jqgRequests').setGridParam({ postData: { FilterValue: $(this).val(); } }).trigger('reloadGrid', [{ page: 1 }]);
}); 
```

在服务器端，您可以创建以下视图模型来处理发布数据：

```
public class PostDataViewModel
{
    public string FilterValue { get; set; }
} 
```

并将其作为另一个参数添加到您的操作中：

```
[AcceptVerbs(HttpVerbs.Post)]
public JsonResult LoadRequest(JqGridRequest request, PostDataViewModel postData)
{
    ...
} 
```

除非您在问题中没有描述某些特定要求或边缘情况，否则这应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:04:09.503

如果我理解您是正确的，您可以按照[旧答案](https://stackoverflow.com/a/2928819/315935)中的建议进行操作。

如果您在页面上有例如`<select id="mySelect">...</select>`，您可以使用 jqGrid 选项

```
postData: {
    myFilter: function () {
        return $("#mySelect option:selected").val();
    }
} 
```

将选择框的值与其他标准 jqGrid 参数一起发送（请参阅 参考资料`JqGridRequest`）。如果您还想在每次更改选择后重新加载网格，您可以使用`.trigger("reloadGrid")`. 您只需要设置`change`和`keyup`事件处理程序并调用`.trigger("reloadGrid")`它需要。有关更多代码示例，请参见[答案](https://stackoverflow.com/a/2928819/315935)。

# c# - 使用 C# 的 Excel 工作表

> ID：15569977
> 
> 赞同：0
> 
> 时间：2013-03-22T12:10:41.923
> 
> 标签：c#, excel, excel-interop

我正在以这种方式更新excel中的图表：

```
ChartObject Chart2 = (ChartObject)mWSheet1.ChartObjects(1);
Chart2.Activate();
Range chartRange2 = mWSheet3.UsedRange;
Chart2.Chart.SetSourceData(chartRange2, Missing.Value); 
```

当我想打印页面时，`mWSheet1`只打印图表。如何取回要打印的整张纸？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:49:44.670

要么一开始就不要激活图表，要么在打印之前激活它所在的工作表：

```
Chart2.Parent.Parent.Cells(1).Activate 
```

# c# - 在 Datagridview 的每一行中加载组合框并设置其值

> ID：15569978
> 
> 赞同：1
> 
> 时间：2013-03-22T12:10:42.193
> 
> 标签：c#, winforms, datagridview, datagridcomboboxcolumn

当用户在文本框中输入 PickingNoteNo 时，我在 datagridview 中显示数据。然后我以编程方式将两个组合框添加到 Datagridview 并设置它们各自的数据源。但数据未显示在 Comboboxes 中。你能告诉我代码中的更改吗.

```
private void LoadDeliveryNoteDetails(string PickingNoteNo)
        {          

            dtDeliveryNoteDetails = new DataTable();
            try
            {
                using (QuotationBusiness objQuotationBusiness = new QuotationBusiness())
                {
                    dtDeliveryNoteDetails = objQuotationBusiness.GetDeliveryNoteDetails(PickingNoteNo);

                }
                if (dtDeliveryNoteDetails != null)
                {
                    gvDeliveryNoteDetails.DataSource = dtDeliveryNoteDetails;
                    HideGridViewColumns();
                    LoadCustomerDetails();
                    LoadDeliveryDetails();
                    LoadFreightDetails();
                    LoadPackagingTypeDetails();
                    LoadShippingBoxDetails();

                }

            }
            catch (Exception ex)
            {

            }
        }
        private void HideGridViewColumns()
        {
            foreach (DataGridViewColumn column in gvDeliveryNoteDetails.Columns)
            {
                if (column.Name != "ItemCode" && column.Name != "Quantity" && column.Name != "Description" && column.Name != "BatchNo"
                    && column.Name != "ExpiryDate" && column.Name != "Packaging Type")
                {

                    column.Visible = false;

                }
            }

        }

        private void LoadPackagingTypeDetails()
        {
            DataGridViewComboBoxColumn cmbpackingtype = new DataGridViewComboBoxColumn();
            cmbpackingtype.Name = "cmbPackingTypes";
            cmbpackingtype.HeaderText = "Packaging Type";
            gvDeliveryNoteDetails.Columns.Add(cmbpackingtype);

            using (QuotationBusiness objQB = new QuotationBusiness())
            {
                DataTable dtPackingTypes = objQB.GetPackagingTypeDetails();
                if (dtPackingTypes != null)
                {
                    DataRow row = dtPackingTypes.NewRow();
                    row["PackageType"] = "Select";
                    row["PackageTypeID"] = 0;
                    dtPackingTypes.Rows.InsertAt(row, 0);
                    cmbpackingtype.ValueMember = "PackageTypeID";
                    cmbpackingtype.DisplayMember = "PackageType";
                    cmbpackingtype.DataSource = dtPackingTypes;
                    cmbpackingtype.DisplayIndex = 0;

                }
            }

        }
        private void LoadShippingBoxDetails()
        {
            DataGridViewComboBoxColumn cmbBox = new DataGridViewComboBoxColumn();
            cmbBox.Name = "cmbBoxNos";
            cmbBox.HeaderText = "Box No";
            gvDeliveryNoteDetails.Columns.Add(cmbBox);
            using (EmployeeMasterBusiness objEmp = new EmployeeMasterBusiness())
            {
                DataTable dtBoxNos = objEmp.GetDepartmentDetails();
                if (dtBoxNos != null)
                {
                    DataRow row = dtBoxNos.NewRow();
                    row["DeptName"] = "Select";
                    row["DeptID"] = 0;
                    dtBoxNos.Rows.InsertAt(row, 0);
                    cmbBox.DataSource = dtBoxNos;
                    cmbBox.DisplayMember = "DeptName";
                    cmbBox.ValueMember = "DeptID";

                }
            }

        } 
```

在每行设置数据源后，有 PackingID 和 ShippingID，我们需要将 Comboxes Selected 的值设置为 cmbpackingtype ComboBox 的 PackingID 和 cmbBox 的 ShippingID。稍后我们可以从组合框中选择一个新值并将数据保存到数据库。

1) 如何在组合框中填充数据。2）我如何从组合框中获取选定的值。

另外还有一个要求。如果在组合框中选择了该值，即 cmbpackingtype（Cartons、Pallets、Boxes 等数据），那么我需要根据 PackingID 加载 Combox cmbBox。

谢谢。

# joomla - 为什么我的顶部菜单在 joomla 2.5 的注册或重置页面中消失

> ID：15569981
> 
> 赞同：0
> 
> 时间：2013-03-22T12:10:52.120
> 
> 标签：joomla

我创建了一个基于来自[http://blank.vc/](http://blank.vc/)的空白 joomla 模板的自定义 joomla 模板。一切都很好，直到我点击忘记密码？，忘记您的用户名？或创建帐户链接，让我在前端注册或重置页面，但奇怪的是顶部菜单不见了。

这是截图：http: [//i63.photobucket.com/albums/h145/affan2fly/menugone.jpg](http://i63.photobucket.com/albums/h145/affan2fly/menugone.jpg)

我不知道为什么会发生这种情况。

请帮助解决这个问题。我感谢所有的帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T12:47:39.793

问题是因为`only on the pages selected`设置了模块分配选项。如果您打开一个不属于任何菜单的页面，则模块将不会显示在其上。

您可以检查要显示的菜单模块`on all pages`，或者为功能创建一个新的菜单项`forgot password`，然后将该菜单分配给菜单模块和面包屑模块​​。

我不知道你用的是哪个Joomla 版本，用什么来翻译，但如果你用Joomfish 或Falang，语言翻译应该会容易得多。

如果您不使用其中任何一个，并且您确实需要保留所有内容，那么您还可以检测模板中的当前用户语言，并基于它加载一个或另一个菜单模块。这样，您可以将模块设置为在所有页面上显示，并确保它仅针对所选语言显示。

# iphone - AVPlayer 音量控制

> ID：15569983
> 
> 赞同：7
> 
> 时间：2013-03-22T12:10:55.817
> 
> 标签：iphone, avaudioplayer, volume, avplayer

我想创建一个使 AVPlayer 的音频静音的按钮。

为什么我不能将 .volume 与 AVPlayer 一起使用，而只能与 AVAudioPlayer 一起使用？有没有其他方法可以改变音量？

例如`music.volume = 0.0;`

感谢您的回答。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-09-24T02:18:26.823

从 iOS 7 开始，只需调用：

```
myAvPlayer.volume = 0; 
```

否则，您将不得不使用烦人的`setAudioMix`解决方案。我在我的应用程序中检测到对此的支持如下：

```
if ([mPlayer respondsToSelector:@selector(setVolume:)]) {
    mPlayer.volume = 0.0;
 } else {
     NSArray *audioTracks = mPlayerItem.asset.tracks;

     // Mute all the audio tracks
     NSMutableArray *allAudioParams = [NSMutableArray array];
     for (AVAssetTrack *track in audioTracks) {
         AVMutableAudioMixInputParameters *audioInputParams =[AVMutableAudioMixInputParameters audioMixInputParameters];
         [audioInputParams setVolume:0.0 atTime:kCMTimeZero];
         [audioInputParams setTrackID:[track trackID]];
         [allAudioParams addObject:audioInputParams];
     }
     AVMutableAudioMix *audioZeroMix = [AVMutableAudioMix audioMix];
     [audioZeroMix setInputParameters:allAudioParams];

     [mPlayerItem setAudioMix:audioZeroMix]; // Mute the player item
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T12:22:10.447

我使用下面的代码来静音 AVPlayer。

```
 float volSet = 0 ;
 AVAsset *avAsset = [[avPlayer currentItem] asset] ;
NSArray *audioTracks = [avAsset tracksWithMediaType:AVMediaTypeAudio] ;

 NSMutableArray *allAudioParams = [NSMutableArray array] ;
for(AVAssetTrack *track in audioTracks){
 AVMutableAudioMixInputParameters *audioInputParams = [AVMutableAudioMixInputParameters audioMixInputParameters] ;
[audioInputParams setVolume:volSet atTime:kCMTimeZero] ;
 [audioInputParams setTrackID:[track trackID]] ;
 [allAudioParams addObject:audioInputParams];
}
 AVMutableAudioMix *audioVolMix = [AVMutableAudioMix audioMix] ;
[audioVolMix setInputParameters:allAudioParams];
 [[avPlayer currentItem] setAudioMix:audioVolMix]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T13:38:13.860

最好的方法如下

```
 AVAssetTrack* assetTrackAudio = [arrayTracks objectAtIndex:0];

    AVMutableAudioMixInputParameters* audioInputParams = [AVMutableAudioMixInputParameters audioMixInputParameters];
    [audioInputParams setVolume:currentVolume atTime:playerCursorStartPosition];
    [audioInputParams setTrackID:[assetTrackAudio trackID]];

    NSArray* audioParams = [NSArray arrayWithObject:audioInputParams];
    AVMutableAudioMix* audioMix = [AVMutableAudioMix audioMix];
    [audioMix setInputParameters:audioParams];

    AVPlayerItem* item = [player currentItem];
    [item setAudioMix:audioMix]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T05:18:09.490

看看这个链接

[用于静音的苹果文档](http://developer.apple.com/library/ios/#qa/qa1716/_index.html)

下面是代码

```
 AVURLAsset *asset = [AVURLAsset URLAssetWithURL:[self myAssetURL] options:nil];
NSArray *audioTracks = [asset tracksWithMediaType:AVMediaTypeAudio];

// Mute all the audio tracks
NSMutableArray *allAudioParams = [NSMutableArray array];
for (AVAssetTrack *track in audioTracks) {
    AVMutableAudioMixInputParameters *audioInputParams =[AVMutableAudioMixInputParameters audioMixInputParameters];
    [audioInputParams setVolume:0.0 atTime:kCMTimeZero];
    [audioInputParams setTrackID:[track trackID]];
    [allAudioParams addObject:audioInputParams];
}
AVMutableAudioMix *audioZeroMix = [AVMutableAudioMix audioMix];
[audioZeroMix setInputParameters:allAudioParams];

// Create a player item
AVPlayerItem *playerItem = [AVPlayerItem playerItemWithAsset:asset];
[playerItem setAudioMix:audioZeroMix]; // Mute the player item

// Create a new Player, and set the player to use the player item
// with the muted audio mix
AVPlayer *player = [AVPlayer playerWithPlayerItem:playerItem];

// assign player object to an instance variable
self.mPlayer = player;

// play the muted audio
[mPlayer play]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-18T03:14:42.730

从 iOS 7 开始，还有一个`muted`属性 on `AVPlayer`：

```
@property (nonatomic, getter=isMuted) BOOL muted NS_AVAILABLE(10_7, 7_0); 
```

# java - xml HttpGet 出错

> ID：15569990
> 
> 赞同：1
> 
> 时间：2013-03-22T12:11:26.787
> 
> 标签：java, android

我有一个使用通过 HttpGet 获得的 xml 的应用程序。在xml请求的url中有一个每小时变化的key，这个key是通过另一个url获取的。

示例：www.test.com/xml?hr=123456

该应用程序尝试获取 xml。如果发生错误，请在另一个 HttpGet 中获取密钥并在 xml url 中更新。

在模拟器中完美运行，但在设备上却不行。已经放了跟踪，密钥更新成功。但是 xml 请求错误仍在继续。

我试图在 HttpGet 中放置“无缓存”

```
HttpClient client = new DefaultHttpClient (httpParams);
HttpGet get = new HttpGet (url);
get.addHeader ("Cache-Control", "no-cache"); / / HTTP/1.1
get.addHeader ("Expires", "Sat, 26 Jul 1997 05:00:00 GMT"); 
```

但它没有用，有什么可以做的吗？

我的完整活动：

```
public class ShowActivity extends AdModctivity implements
  bbbAndroidConstantes, OnItemClickListener, OnCheckedChangeListener {
  private ProgressDialog dialog;
  private Retf p;
  private Handler handler = new Handler();
  private Exception ex;
  private CheckBox check;
  private ParametrosTO parTO;
  ParametrosDataBase parDB;
  String ref;
  String pId;
  String logR;
  String kId;
  String ldesc;
  TextView txtRef;

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.listaprevisoeslayout);
    Bundle bundle = getIntent().getExtras();

    parDB = new ParametrosDataBase(this);
    parTO = parDB.listParametros();

    pId = bundle.getString(VAR_P_ID);
    ref = bundle.getString(VAR_P_REF);
    logR = bundle.getString(VAR_LOGR);
    kId = bundle.getString(VAR_KID);
    ldesc = bundle.getString(VAR_LDESC);
    txtRef = (TextView) findViewById(R.id.txtRef);
    check = (CheckBox) findViewById(R.id.checkWidget);

    WidgetDataBase wDb = new WidgetDataBase(this);
    if (wDb.searchWidget(pId, kId) != null)
        check.setChecked(true);

    check.setOnCheckedChangeListener(this);

    dialog = ProgressDialog.show(ShowActivity.this, "",
            "Wait...", true);

    if (!Utilities.chkStatus(ShowActivity.this))
        return;
    downloadInfo();
    fillAdMod();
}

@Override
public void onItemClick(AdapterView parent, View v, int position, long id) {

}

private void downloadInfo() {
    new Thread() {
        @Override
        public void run() {
            boolean flag = false;
            try {
                p = Controller.getInstance().getRetf(parTO.getUrl(), pId, kId);
                if ((p.getInfoP() == null) || (p.getInfoP().size() == 0)) {
                    flag = true;
                    String newUrl = getNewUrl();
                    Utilities.updateUrl(ShowActivity.this, newUrl);
                    parTO = parDB.listParametros();
                    p = Controller.getInstance().getRetf(newUrl, pId, kId);
                }
                refreshScreen();
            } catch (Exception e) {
                if (!flag) {
                    try {
                        String newUrl = getNewUrl();
                        Utilities.updateUrl(ShowActivity.this, newUrl);
                        parTO = parDB.listParametros();
                        p = Controller.getInstance().getRetf(newUrl, pId, kId);
                        refreshScreen();
                    } catch (Exception e1) {
                        ex = e1;
                        refreshScreenException();
                    }
                }
                else
                {
                    ex = e;
                    refreshScreenException();
                }
            }
        }
    }.start();
}

/**
 * Thread to close dialog and show information
 */
private void refreshScreen() {
    handler.post(new Runnable() {
        @Override
        public void run() {
            dialog.dismiss();
            fillInfo();
        }
    });
}

/**
 * Thread to close dialog and show exception
 */
private void refreshScreenException() {
    handler.post(new Runnable() {
        @Override
        public void run() {
            dialog.dismiss();
            fillInfoExcecao();
        }
    });
}

/**
 * Fill information on screen
 */
private void fillInfo() {

    if (p == null) {
        Toast.makeText(ShowActivity.this, MSG_SEM_Retf,
                MSG_TIME_MILIS).show();
        this.finish();
    }

    if ((p.getErro() != null) && (p.getErro().trim().length() > 0)) {
        Toast.makeText(ShowActivity.this, p.getErro(),
                MSG_TIME_MILIS).show();
        this.finish();
    }

    if ((p.getPonto() == null) || (p.getPonto().size() == 0)) {
        Toast.makeText(ShowActivity.this, MSG_SEM_Retf,
                MSG_TIME_MILIS).show();
        this.finish();
    }

    SimpleDateFormat spf = new SimpleDateFormat("HH:mm:ss");
    long localTime = Long.parseLong(p.getLocalTime());
    txtRef.setText(txtRef.getText() + " "
            + spf.format(new Date(localTime)));

    RetfAdapter RetfAdapter = new RetfAdapter(this, p);
    ListView lista = (ListView) findViewById(R.id.listView1);
    lista.setAdapter(RetfAdapter);
    lista.setOnItemClickListener(this);
}

/**
 * Apresenta mensagem em caso de exceo
 */
private void fillInfoExcecao() {
    if (ex instanceof bbbException) {
        Toast.makeText(ShowActivity.this,
                ((bbbException) ex).getMessage(), MSG_TIME_MILIS).show();
        ShowActivity.this.finish();
    } else {
        Toast.makeText(ShowActivity.this,
                getString(R.string.msg_erroSistema), MSG_TIME_MILIS).show();
        ShowActivity.this.finish();
    }
}

@Override
public void onCheckedChanged(CompoundButton cb, boolean isChecked) {
    PBean PBean = new PBean(pId, logR,
            ref, kId, ldesc);

    WidgetDataBase wDb = new WidgetDataBase(this);
    if (isChecked)
        wDb.addWidget(PBean);
    else
        wDb.deleteWidget(PBean);
}

private String getNewUrl() throws Exception
{
    String newUrl = Utilities.getHttp(bbbAndroidConstantes.URL_HOST_HORARIOS);
    return newUrl;
} 
```

}

# php - 在 Num_Rows 中未选择数据库

> ID：15569993
> 
> 赞同：0
> 
> 时间：2013-03-22T12:11:42.100
> 
> 标签：php, mysql, database, rows

运行 mysqli_num_rows 查询时出现一个奇怪的错误，提示我没有连接到数据库。这是代码：

```
 <?php include("php/functions.php"); ?>
<?php
if(isset($_GET['verification']) && !empty($_GET['verification'])){  
    // Verify data  
    $hash = mysqli_real_escape_string($con, $_GET['verification']); // Set hash variable  

    $search_sql = "SELECT 'hash', active FROM members WHERE hash='".$verification."' AND active='0'";   
    $search_res = mysqli_query($con, $search_sql);
    $match = mysqli_num_rows($search_res); 
```

任何想法为什么这不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:57:45.337

我在您的代码中更改了几处，请查看。

如果您正在使用`mysqli`该类，那么您的类 instatiation 之后的任何内容都应该类似于：

```
$con = new mysqli($DB_HOST, $DB_USER, $DB_PASS, $DB_NAME);
$con->exampleClassFunction() 
```

使用对象运算符`->`。

要获取`num_rows`您的对象运算符，将在查询变量之后，如下所示：

```
$search_res = $con->mysqli_query($con, $search_sql);
$match = $search_res->mysqli_num_rows($search_res); 
```

我还在您的查询中为所有适用的列名添加了反引号：

```
SELECT `hash`, `active` FROM members WHERE `hash`='".$verification."' AND `active`='0' 
```

这是您的代码示例：

```
//include("php/functions.php");

$DB_NAME = 'DATABASE_NAME';
$DB_HOST = 'DATABASE_HOST';
$DB_USER = 'DATABASE_USER';
$DB_PASS = 'DATABASE_PASSWORD';

$con = new mysqli($DB_HOST, $DB_USER, $DB_PASS, $DB_NAME);

// Added a connection error check before continuing
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

if(isset($_GET['verification']) && !empty($_GET['verification'])){  
    $hash = $con->mysqli_real_escape_string($con, $_GET['verification']);

    // Use back ticks on query column names, 
    // use single quotes for comparative operations
    $search_sql = "SELECT `hash`, `active` FROM members WHERE `hash` = '".$verification."' AND `active` = '0'";

    $search_res = $con->mysqli_query($con, $search_sql);
    $match = $search_res->mysqli_num_rows($search_res);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:14:55.350

```
<?php 
    include("functions.php"); //includes databse connection
    $search_sql = "SELECT hash, active FROM members WHERE hash='".$verification."' AND active='0'";   
    $search_res = mysqli_query($con, $search_sql);
    $match      = mysqli_num_rows($search_res);
?> 
```

`include("functions");`还是`include("functions.php");`？？？你忘了`.php`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T12:15:46.953

您忘记添加文件扩展名。

```
<?php include("functions.php"); ?> 
```

还放`

左右`hash`作为其保留字 by `MySQL`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T12:13:12.177

`<?php include('functions.php'); ?>`

另外，请确保您的结束`?>`标签位于正确的位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T12:14:05.997

试着让它包含（“functions.php”）..我认为那是你的问题

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-22T12:19:08.790

请尝试以下代码：

```
<?php 
    include("functions.php"); //includes databse connection php file
    $search_sql = "SELECT hash, active FROM members WHERE hash='".$verification."' AND active='0'";   
    $search_res = mysqli_query($con, $search_sql);
    $match      = mysqli_num_rows($search_res);
?> 
```

include 应该有一个 .php 文件作为参数。请检查一下。

# imagemagick - webfaction 上的 imagick 安装

> ID：15569996
> 
> 赞同：0
> 
> 时间：2013-03-22T12:11:53.917
> 
> 标签：imagemagick, imagick, webfaction

我已经在我的本地服务器上安装了 ImageMagick，它工作得非常好。但是当我转到 webfaction 并尝试在服务器上安装它时，我遇到了问题。ImageMagick 已安装在服务器上，但我无法安装 php 扩展 imagick。我按照这些步骤从[http://pecl.php.net/get/imagick-3.0.1.tgz](http://pecl.php.net/get/imagick-3.0.1.tgz)下载了 tar 文件。然后我解压缩了文件及其内容并进行了配置。我也做了phpize。但是当我做时，我得到了以下错误：

> `[e@web308 imagick-3.0.1]$ make /bin/sh /home/e/temp/imagick-3.0.1/libtool --mode=compile cc -I. -I/home/e/temp/imagick-3.0.1 -DPHP_ATOM_INC -I/home/e/temp/imagick-3.0.1/include -I/home/e/temp/imagick-3.0.1/main -I/home/e/temp/imagick-3.0.1 -I/usr/local/include/php54 -I/usr/local/include/php54/main -I/usr/local/include/php54/TSRM -I/usr/local/include/php54/Zend -I/usr/local/include/php54/ext -I/usr/local/include/php54/ext/date/lib -I/usr/include/ImageMagick -DHAVE_CONFIG_H -g -O2 -c /home/e/temp/imagick-3.0.1/imagick_class.c -o imagick_class.lo mkdir .libs cc -I. -I/home/e/temp/imagick-3.0.1 -DPHP_ATOM_INC -I/home/e/temp/imagick-3.0.1/include -I/home/e/temp/imagick-3.0.1/main -I/home/e/temp/imagick-3.0.1 -I/usr/local/include/php54 -I/usr/local/include/php54/main -I/usr/local/include/php54/TSRM -I/usr/local/include/php54/Zend -I/usr/local/include/php54/ext -I/usr/local/include/php54/ext/date/lib -I/usr/include/ImageMagick -DHAVE_CONFIG_H -g -O2 -c /home/e/temp/imagick-3.0.1/imagick_class.c -fPIC -DPIC -o .libs/imagick_class.o /home/e/temp/imagick-3.0.1/imagick_class.c: In function ‘zim_imagick_setfont’: /home/e/temp/imagick-3.0.1/imagick_class.c:1442: error: ‘struct _php_core_globals’ has no member named ‘safe_mode’ /home/e/temp/imagick-3.0.1/imagick_class.c:1442: error: ‘CHECKUID_CHECK_FILE_AND_DIR’ undeclared (first use in this function) /home/e/temp/imagick-3.0.1/imagick_class.c:1442: error: (Each undeclared identifier is reported only once /home/e/temp/imagick-3.0.1/imagick_class.c:1442: error: for each function it appears in.) /home/e/temp/imagick-3.0.1/imagick_class.c:1442: error: ‘CHECKUID_NO_ERRORS’ undeclared (first use in this function) /home/e/temp/imagick-3.0.1/imagick_class.c: In function ‘zim_imagick_setimageprogressmonitor’: /home/e/temp/imagick-3.0.1/imagick_class.c:9534: error: ‘struct _php_core_globals’ has no member named ‘safe_mode’ /home/e/temp/imagick-3.0.1/imagick_class.c:9534: error: ‘CHECKUID_CHECK_FILE_AND_DIR’ undeclared (first use in this function) /home/e/temp/imagick-3.0.1/imagick_class.c:9534: error: ‘CHECKUID_NO_ERRORS’ undeclared (first use in this function) make: *** [imagick_class.lo] Error 1`

它说一些变量是未声明的。我尝试使用其他版本并得到相同的错误。

对我在这里可能做错的事情有任何帮助吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T03:32:26.510

PHP54 不适用于 3.0.1 版本，您可以使用最新版本来解决此问题：

```
wget http://pecl.php.net/get/imagick-3.1.0RC2.tgz
tar xzvf imagick-3.1.0RC2.tgz
cd imagick-3.1.0RC2
php化
。/配置
制作
cp modules/imagick.so /your-php-extensions-directory-path/

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-18T14:57:56.963

解决方案是安装模块的 beta 版本：

```
pear config-set preferred_state beta
pecl install imagick 
```