# StackOverflow 问答 15512000-15512999

# android - Android - 如何使用 Helmert Transformation 将 gps 转换为 CUSTOM MAP 上的屏幕 XY

> ID：15512000
> 
> 赞同：1
> 
> 时间：2013-03-19T22:47:03.197
> 
> 标签：android, gps, customization

我已经建立了一个活动，该活动采用用于地图的自定义图像，然后知道左上角和右下角的 gps，我在地图顶部绘制了 gps。它工作得很好，但我想提高准确性。我知道它关闭了，因为当我记录设备位置并将其插入谷歌地图时，它实际上比我在自定义地图上表示的更准确。

所以....既然我有地图的左上角和右下角 gps 并将它们映射到相应的像素坐标，我如何才能使用 Helmert 变换准确地将设备 gps 绘制成像素。

编辑：

我目前正在使用它来将设备的 gps 绘制到屏幕上。

```
public double getCurrentPixelY(Location upperLeft, Location lowerRight, Location current) {
    double hypotenuse = upperLeft.distanceTo(current);
    double bearing = upperLeft.bearingTo(current);
    double currentDistanceY = Math.cos(bearing * Math.PI / OneEightyDeg) * hypotenuse;
    //                           "percentage to mark the position"
    double totalHypotenuse = upperLeft.distanceTo(lowerRight);
    double totalDistanceY = totalHypotenuse * Math.cos(upperLeft.bearingTo(lowerRight) * Math.PI / OneEightyDeg);
    double currentPixelY = currentDistanceY / totalDistanceY * ImageSizeH;

    return currentPixelY;
}

public double getCurrentPixelX(Location upperLeft, Location lowerRight, Location current) {
    double hypotenuse = upperLeft.distanceTo(current);
    double bearing = upperLeft.bearingTo(current);
    double currentDistanceX = Math.sin(bearing * Math.PI / OneEightyDeg) * hypotenuse;
    //                           "percentage to mark the position"
    double totalHypotenuse = upperLeft.distanceTo(lowerRight);
    double totalDistanceX = totalHypotenuse * Math.sin(upperLeft.bearingTo(lowerRight) * Math.PI / OneEightyDeg);
    double currentPixelX = currentDistanceX / totalDistanceX * ImageSizeW;

    return currentPixelX;
} 
```

我知道我需要在某个地方进行调整，但是看着 helmert 转换，我不知道从哪里开始使用我现有的代码来实现它。

编辑：

在网上查看了更多内容后，我发现使用大圆公式可能会有所帮助。这是我正在实施的链接

[http://introcs.cs.princeton.edu/java/12types/GreatCircle.java.html](http://introcs.cs.princeton.edu/java/12types/GreatCircle.java.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T00:19:36.467

这是计算 helmert 系数的源代码：

[http://helmparms3d.sourceforge.net/](http://helmparms3d.sourceforge.net/)

也许有一个更简单的方法（还有一个所谓的小地图 2d helmert 变换，就像你的图片一样）

使用该代码可以获得 helmert 系数，这些系数是一个 3x3 矩阵。所以你需要能够将向量与矩阵相乘的代码。
3d 图形例程具有这样的矩阵乘法。

# hadoop - Hadoop 中的 mapred.child.javaopts 参数 - 读取序列化的 HashMap

> ID：15512002
> 
> 赞同：1
> 
> 时间：2013-03-19T22:47:28.273
> 
> 标签：hadoop, mapreduce, hdfs, distributed-caching

我有一个 1.5 GB 的文件，其中包含一个序列化的 HashMap。

我在 Mapper 类中有一个 setup() 方法，我将其读入 HashMap 变量。

看起来它可以转到 read 方法，但会立即为任务抛出 java 堆空间错误。

我阅读了许多关于我们可能需要设置 mapred.child.opts 参数的讨论，我正在主程序代码中执行此操作。

我正在使用：conf.set("mapred.child.java.opts.", "-Xmx1024M");

我什至试图增加数量。为什么它在尝试将序列化文件读入 HashMap 变量时仍然抛出相同的错误？

这是我的 setup() 方法中的代码：

```
try {
        test="hello";
        Path pt=new Path("hdfs://localhost:9000/user/watsonuser/topic_dump.tsv");
        FileSystem fs = FileSystem.get(new Configuration());
   }catch(Exception e) {System.out.println("Exception while reading the nameMap 
                          file."); e.printStackTrace();}          
        InputStream is = fs.open(pt);
        ObjectInputStream s = new ObjectInputStream(is);  
        nameMap = (HashMap<String, String>) s.readObject(); 
        s.close();
    }catch(Exception e) {
        System.out.println("Exception while reading the nameMap file."); 
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:41:08.610

由于您使用的是哈希映射的序列化版本，并且文件的最终输出大小为 1.5GB，我猜测您的 JVM 将需要的内存量至少为 1.5GB。

您应该能够使用一个小程序来测试它以加载到您的文件中（就像您已经拥有的那样），但不断增加 -Xmx 值直到您不再看到内存错误 - 这将是您的基线（您可能仍然在 hadoop 映射器中运行时需要添加更多内容，因为它对溢出排序等有缓冲区大小要求。

您是否还知道此哈希图中表示了多少箱和项目？HashMap 的实现只是一个带有链接条目项的 bin 数组，这些条目项哈希到该 bin 编号。bin 的数量也必须是 2 的幂，因此当您在地图中放置越来越多的项目时，当地图达到其阈值/负载因子 (0.75) 时，实际后备数组的内存需求会翻倍。考虑到这一点，我想您看到的问题是，当反序列化到内存时，如此大的哈希映射（1.5GB 序列化）将需要同样大的内存占用，如果不是更大的话

# asp.net-mvc - ASP MVC3 错误 - 没有“IEnumerable”类型的 ViewData 项 ' 有钥匙

> ID：15512007
> 
> 赞同：1
> 
> 时间：2013-03-19T22:48:08.240
> 
> 标签：asp.net-mvc, asp.net-mvc-3, list, viewmodel, selectlist

我对此进行了一些研究，但没有找到完全处理类似情况或 MVC3 的答案。在我使用的 ViewModel 中，我有一个单独模型的列表（`List<AgentId>`这是模型的列表`AgentId`）。

在`Create`此控制器的页面中，我需要将 5 个项目的输入部分添加到此列表中。但是，在页面加载之前，我收到此错误消息：

`There is no ViewData item of type 'IEnumerable<SelectListItem>' that has the key 'BankListAgentId[0].StateCode'.`

这是我正在使用的 ViewModel：

```
public class BankListViewModel
{
    public int ID { get; set; }
    public string ContentTypeID1 { get; set; }
    public string CreatedBy { get; set; }
    public string MANonresBizNY { get; set; }
    public string LastChangeOperator { get; set; }
    public Nullable<System.DateTime> LastChangeDate { get; set; }

    public List<BankListAgentId> BankListAgentId { get; set; }
    public List<BankListStateCode> BankListStateCode { get; set; }
} 
```

这是存在问题的视图部分：

```
<fieldset>
    <legend>Stat(s) Fixed</legend>
    <table>
    <th>State Code</th>
    <th>Agent ID</th>
    <th></th>
       <tr>
        <td>
            @Html.DropDownListFor(model => model.BankListAgentId[0].StateCode, 
            (SelectList)ViewBag.StateCode, " ")
        </td>
        <td>
            @Html.EditorFor(model => model.BankListAgentId[0].AgentId)
            @Html.ValidationMessageFor(model => model.BankListAgentId[0].AgentId)
        </td>
      </tr>
      <tr>
        <td>
            @Html.DropDownListFor(model => model.BankListAgentId[1].StateCode,
            (SelectList)ViewBag.StateCode, " ")
        </td>
        <td>
            @Html.EditorFor(model => model.BankListAgentId[1].AgentId)
            @Html.ValidationMessageFor(model => model.BankListAgentId[1].AgentId)
        </td>
        <td id="plus2" class="more" onclick="MoreCompanies('3');">+</td>
      </tr>
    </table>
</fieldset> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T03:18:07.993

我相信`@Html.DropDownListFor()`期待一个`IEnumerable<SelectListItem>`，你可以通过以下方式绑定它：

在您的视图模型中：

```
public class BankListViewModel
{
    public string StateCode { get; set; }

    [Display(Name = "State Code")]
    public IEnumerable<SelectListItem> BankListStateCode { get; set; }

    // ... other properties here
} 
```

在您的控制器中加载数据：

```
[HttpGet]
public ActionResult Create()
{
    var model = new BankListViewModel()
    {
        // load the values from a datasource of your choice, this one here is manual ...
        BankListStateCode = new List<SelectListItem>
        {
            new SelectListItem
            {
                Selected = false,
                Text ="Oh well...",
                Value="1"
            }
        }
    };

    return View("Create", model);
} 
```

然后在视图中绑定它：

```
 @Html.LabelFor(model => model.BankListStateCode)
 @Html.DropDownListFor(model => model.StateCode, Model.BankListStateCode) 
```

我希望这有帮助。如果您需要澄清，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T16:05:00.983

这个错误最终被抛出，因为`ViewBag`我使用的元素与列表项属性之一具有相同的名称。

解决方案是更改`ViewBag.StateCode`为`ViewBag.StateCodeList`.

# c - C Array 程序因分段错误而崩溃

> ID：15512010
> 
> 赞同：0
> 
> 时间：2013-03-19T22:48:14.973
> 
> 标签：c, arrays

我正在学习数组，只是写了这个小程序来看看它是如何工作的。但它因分段错误而崩溃，我理解这意味着我正在将我的变量/函数写入未分配给它的内存位置。但我不知道怎么做。任何人都可以让我知道吗？我正在从我的 main() 调用 introArray。

```
int introArray (void)
{
    int total, ctr;

    printf("enter how many students \n");
    scanf("%d", &total);

    int students[total];
    ctr = 0;

    while ( students[ctr] <= total)
    {
        printf("enter student %d DOB in mmddyy \n", ctr );
        scanf("%d", students[ctr]);
        ctr++;
    }

    return 0; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T22:50:38.827

在您的代码中，存在一个实现逻辑问题。学生总数是`total`，因此，您的`while`循环应该是

```
while(ctr < total) 
```

要读取的数据也应该`scanf("%d", &students[ctr]);`缺少*＆*符号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T22:49:57.630

`ctr`超越`total`。这样你就会越界 将循环更改为

```
while (ctr < total)
{
        printf("enter student %d DOB in mmddyy \n", ctr );
        scanf("%d", &(students[ctr]));
        ctr++;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T22:50:24.510

这条线

```
while ( students[ctr] <= total) 
```

不能防止读取循环内的数组边界。`ctr`如果您用作索引，这将阻止您阅读数组末尾

```
while ( ctr < total) 
```

您需要严格的不等式，因为数组索引是从零开始的。

此外，您`scanf`在循环中的调用`while`是错误的 - 第二个参数应该是一个指针，当前您传递一个整数。它应该是

```
scanf("%d", &students[ctr]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T22:50:36.087

我认为

```
scanf("%d", students[ctr]); 
```

应该

```
scanf("%d", &students[ctr]); 
```

# sql - 使用来自 self 的值更新 PostgreSQL 表

> ID：15512015
> 
> 赞同：4
> 
> 时间：2013-03-19T22:48:30.033
> 
> 标签：sql, postgresql, sql-update, correlated-subquery, window-functions

我正在尝试使用同一表中另一行的值更新表上的*多个列：*

```
CREATE TEMP TABLE person (
  pid INT
, name VARCHAR(40)
, dob DATE
, younger_sibling_name VARCHAR(40)
, younger_sibling_dob DATE
);

INSERT INTO person VALUES (pid, name, dob)
  (1, 'John' , '1980-01-05')
, (2, 'Jimmy', '1975-04-25')
, (3, 'Sarah', '2004-02-10')
, (4, 'Frank', '1934-12-12')
; 
```

任务是填充年龄最接近他们的人的姓名和生日，但不是年龄更大或年龄相同`younger_sibling_name`。`younger_sibling_dob`

我可以`dob`轻松设置年幼的兄弟姐妹，因为这是确定要与相关子查询一起使用的记录的值（我认为这是一个例子？）：

```
UPDATE person SET younger_sibling_dob = (
SELECT MAX(dob)
FROM person AS sibling
WHERE sibling.dob < person.dob); 
```

我只是看不到任何方法来获得`name`？
对于每个 MAX 选择，**真正的查询**将在 100-500 组中运行大约**1M 行，因此性能是一个问题。**

##### 编辑

在尝试了许多不同的方法之后，我决定采用这种方法，我认为这是一种很好的平衡，能够用中间结果验证数据，显示逻辑的意图，并充分执行：

```
WITH sibling AS (
  SELECT person.pid, sibling.dob, sibling.name,
         row_number() OVER (PARTITION BY person.pid
                            ORDER BY sibling.dob DESC) AS age_closeness
  FROM person
  JOIN person AS sibling ON sibling.dob < person.dob
)
UPDATE person
  SET younger_sibling_name = sibling.name
     ,younger_sibling_dob  = sibling.dob
FROM sibling
WHERE person.pid = sibling.pid
   AND sibling.age_closeness = 1;

SELECT * FROM person ORDER BY dob; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T01:26:21.340

### 重写2022

我希望您添加的解决方案表现不佳，因为它正在做一些不必要的工作。以下应该快得多。

问题和添加的解决方案没有定义当有多个相同的行时选择哪一行`dob`。通常你会想要一个确定性的选择。此查询从每组具有相同`dob`. 适应您的需求。

```
UPDATE person p
SET    younger_sibling_name = y.name
     , younger_sibling_dob  = y.dob
FROM  (
   SELECT dob, name, lead(dob) OVER (ORDER BY dob) AS next_dob
   FROM  (
      SELECT DISTINCT ON (dob)
             dob, name
      FROM   person p
      ORDER  BY dob, name  -- ①
      ) sub
   ) y
WHERE  p.dob = y.next_dob; 
```

*db<>fiddle [here](https://dbfiddle.uk/?rdbms=postgres_14&fiddle=a705a0e2f4d9ae369759af8d13fb24b0)* - 带有扩展的测试用例

至少从 Postgres 8.4 开始工作。

需要一个快速的**索引**，`dob`最好是一个多列索引`(dob, name)`。

子查询`sub`遍历整个表一次，并在每个`dob`.
① 我添加`name`为`ORDER BY`决胜局以选择按字母顺序排列名字的行。适应我们的需要。

在外部`SELECT`将 next later `dob`( `next_dob`) 添加到每一行，使用[`lead()`](https://www.postgresql.org/docs/current/functions-window.html)-simple now 和 distinct `dob`。然后加入，`next_dob`剩下的就很简单了。

如果*不存在年轻人*，则不会`UPDATE`发生任何事情，并且列会保留`NULL`。

关于*许多*重复项`DISTINCT ON`以及可能更快的查询技术：

 **   [在每个 GROUP BY 组中选择第一行？](https://stackoverflow.com/questions/3800551/select-first-row-in-each-group-by-group/7630564#7630564)
*   [优化 GROUP BY 查询以检索每个用户的最新行](https://stackoverflow.com/questions/25536422/optimize-group-by-query-to-retrieve-latest-row-per-user/25536748#25536748)

从同一行获取`dob`和`name`从同一行保证我们保持同步。多个相关子查询不会提供这种保证，而且无论如何都会更昂贵。

### 原始答案

仍然有效。

#### 旧查询 1

```
WITH cte AS (
   SELECT *, dense_rank() OVER (ORDER BY dob) AS drk
   FROM   person
    )
UPDATE person p
SET    younger_sibling_name = y.name
     , younger_sibling_dob  = y.dob
FROM   cte x
JOIN   (SELECT DISTINCT ON (drk) * FROM cte) y ON y.drk = x.drk - 1
WHERE  x.pid = p.pid; 
```

[老[sqlfiddle](http://sqlfiddle.com/#!17/5458a/4)]

在[CTE](http://sqlfiddle.com/#!17/5458a/3) `cte`中，使用窗口函数[`dense_rank()`](http://sqlfiddle.com/#!17/5458a/3)根据`dop`每个人获得一个没有差距的排名。

加入`cte`自身，但从`dob`第二个实例中删除重复项。从而每个人都得到一个`UPDATE`。如果超过一个人共享相同的`dop`，*同一个人*将被选为下一个所有人的弟弟`dob`。我这样做：

```
 (SELECT DISTINCT ON (rnk) * FROM cte) 
```

添加`ORDER BY rnk, ...`到此子查询以为每个`dob`.

### 旧查询 2

```
WITH cte AS (
   SELECT dob, min(name) AS name
        , row_number() OVER (ORDER BY dob) rn
   FROM   person p
   GROUP  BY dob
   )
UPDATE person p
SET    younger_sibling_name = y.name
     , younger_sibling_dob  = y.dob
FROM   cte x
JOIN   cte y ON y.rn = x.rn - 1
WHERE  x.dob = p.dob; 
```

[老[sqlfiddle](http://sqlfiddle.com/#!17/5458a/3)]

这是可行的，因为聚合函数是在窗口函数*之前应用的。*它应该非常快，因为两个操作都同意排序顺序。

消除了对`DISTINCT`查询 1 中的类似操作的需要。

结果与查询 1 完全相同。
同样，您可以添加更多列来`ORDER BY`为每个`dob`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T17:37:08.333

1) 找到 MAX() 总是可以用 NOT EXISTS (...) 的形式重写

```
UPDATE person dst
SET younger_sibling_name = src.name
        ,younger_sibling_dob = src.dob
FROM person src
WHERE src.dob < dst.dob
   OR src.dob = dst.dob AND src.pid < dst.pid
AND NOT EXISTS (
        SELECT * FROM person nx
        WHERE nx.dob < dst.dob
           OR nx.dob = dst.dob AND nx.pid < dst.pid
        AND nx.dob > src.dob
           OR nx.dob = src.dob AND nx.pid > src.pid
        ); 
```

2) 除了 rank() / row_number()，您还可以在 WINDOW 上使用 LAG() 函数：

```
UPDATE person dst
SET younger_sibling_name = src.name
        ,younger_sibling_dob = src.dob
FROM    (
        SELECT pid
        , LAG(name) OVER win AS name
        , LAG(dob) OVER win AS dob 
        FROM person
        WINDOW win AS (ORDER BY dob, pid)
        ) src
WHERE src.pid = dst.pid
        ; 
```

两个版本都需要自连接子查询（或 CTE），因为 UPDATE 不允许窗口函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T22:56:12.420

要获取出生日期和姓名，您可以执行以下操作：

```
update person
    set younger_sibling_dob = (select dob
                               from person p2
                               where s.dob < person.dob
                               order by dob desc
                               limit 1),
       younger_sibling_name = (select name
                               from person p2
                               where s.dob < person.dob
                               order by dob desc
                               limit 1) 
```

如果您有一个索引`dob`，那么查询将运行得更快。*

# node.js - 使用 MongoDB 在 Windows Azure 上对 node.js 应用程序的第一个请求产生 400 Bad Request

> ID：15512017
> 
> 赞同：5
> 
> 时间：2013-03-19T22:48:33.247
> 
> 标签：node.js, mongodb, azure, mongoose

我正在使用 Windows Azure 部署我编写的 node.js 应用程序，该应用程序向客户端公开了一个相当简单的 REST CRUD api。它托管在 Windows Azure 网站上，并通过 Windows Azure 商店与 mongoose 一起使用 MongoDB。我对服务发出的请求是 JSON，响应是 JSON（不确定这很重要，但其他人已经谈到了对 Content-Type 为 application/json 的请求的 400 个响应）

在很长一段时间内第一次访问时，应用程序会返回 400 Bad Request 而不会失败。只要我通过经常点击它来保持应用程序“温暖”（至少每分钟一次左右） - 我似乎再也不会得到这个了。

托管扩展设置无关紧要 - 我在免费层上得到与保留模式相同的东西。

还有人看到这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-25T07:15:37.450

为了保证访问 node.js 中的任何连接，您必须将所有需要连接的代码放在回调中。mongoose 暴露这种连接的方式是通过一个事件。当猫鼬连接调用事件“打开”时，您可以访问数据库连接。

IE

```
mongoose.connect('details');

mongoose.on('open', function () {
  var connection = mongoose.connection;

  // Do things with your connection here
  doThings(connection);
});

function doThings(connection) {
  app.get(...);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T22:34:39.887

如果您有一个代码片段会很有帮助，但我的猜测是您与 mongo 的连接是异步发生的，并且您的站点在连接实际打开之前正在处理请求。

我测试了这种情况，但无法重现该问题。你可以在这里看到我的代码：[https ://github.com/ntotten/azure-mongo-sample](https://github.com/ntotten/azure-mongo-sample)

基本上，我使用猫鼬进行连接，并且在加载应用程序时立即发生连接。你可以看到下面的代码。

应用程序.js：

```
/**
 * Module dependencies.
 */

var express = require('express')
  , routes = require('./routes')
  , user = require('./routes/user')
  , http = require('http')
  , path = require('path');

var TaskList = require('./routes/tasklist');
var taskList = new TaskList(process.env.CUSTOMCONNSTR_MONGOLAB_URI);

... 
```

任务列表.js：

```
var mongoose = require('mongoose')
  , task = require('../models/task.js');

module.exports = TaskList;

function TaskList(connection) {
  mongoose.connect(connection);
}

... 
```

# c# - Gridview 按钮未触发其方法

> ID：15512023
> 
> 赞同：0
> 
> 时间：2013-03-19T22:49:13.210
> 
> 标签：c#, asp.net, button, gridview

我使用一种使用一系列其他类和存储过程的方法填充了一个名为 grdOrder 的网格视图（它太丑了，甚至我都不明白，因为它是由我们的教授给出的，他让我们在全新的水平上感到困惑）

然后，我想根据值（OrderId）从数据库中删除一个项目，该值在填充后位于 GridView 的第二行中。

在 Gridview 的行编辑器中，我创建了一个按钮，当我在设计视图中双击 gridview 时，它会创建以下内容

```
protected void grdOrder_SelectedIndexChanged(object sender, EventArgs e) 
```

这就是我认为当我点击 Gridview 上的删除按钮时应该触发的内容。所以我在那个方法下面放了一个中断，当我在浏览器的表单上这样做时它不会触发。所以它基本上不起作用。

如果您想查看更多内容，请查看完整代码

[http://pastebin.com/iSvyJCPQ](http://pastebin.com/iSvyJCPQ) - Aspx 页面 [http://pastebin.com/LVRvaCnu](http://pastebin.com/LVRvaCnu) - 代码背后 (C#)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:58:20.790

使用 Gridview.RowCommand 事件

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowcommand.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowcommand.aspx)

# datatable - DataTable 合并多个模式

> ID：15512024
> 
> 赞同：0
> 
> 时间：2013-03-19T22:49:13.343
> 
> 标签：datatable, merge

我是 DataTables 的新手，需要一些帮助，特别是 Merge 方法。

我有一个 WPF 应用程序，其中我的 UI 元素绑定到 1 行 DataTable 中的各个列。有很多列。我有一个线程从 MSMQ 接收序列化的 DataTable 对象，对其进行反序列化，然后用新行替换 DataTable 中的单行，从而更新绑定控件中的值（在重置 DataContext 之后）。到目前为止，这工作正常。

现在需要轮询 2 个不同的 MSMQ 队列，每个队列都有自己的数据，然后用两者刷新我的 DataTable。所以这是我的问题：

情况：
我有包含 IDCol、Col1、Col2、Col3、Col4 列的 MainTable。
进程 1 返回一个带有 IDCol、Col1、Col2 的 NewTable。
过程 2 返回一个带有 IDCol、Col3、Col4 的 NewTable。
在所有情况下，IDCol 都是主键并且具有相同的值。
每个进程都在自己的线程中运行（实际上是 BackgroundWorker）。

我可以在每个线程中使用 DataTable.Merge(NewTable) 吗，它们会正确合并各个列，而不是删除行并添加新行的旧方法吗？

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:23:36.010

我能够自己解决这个问题。只要返回的每个数据表的主键字段与我的主记录的主键字段匹配，合并就会像宣传的那样工作。不管怎么说，还是要谢谢你...

# r - 从 3 个不同大小的输入矩阵构建所有可能的 3 列矩阵

> ID：15512028
> 
> 赞同：4
> 
> 时间：2013-03-19T22:49:24.340
> 
> 标签：r, matrix

我有三个不同的矩阵：

```
m1, which has 12 rows and 5 columns;
m2, which has 12 rows and 4 columns; and
m3, which has 12 rows and 1 column. 
```

我正在尝试从中构建一系列 3 列矩阵（p1 到 p20），这样在每个 p 矩阵中：

```
p[,1] is taken from m1,
p[,2] is taken from m2, and
p[,3] is taken from m3. 
```

我希望这个过程是详尽的，所以我创建了所有 20 个可能的 3 列矩阵，因此采样 m1、m2 和 m3（我已经尝试过的解决方案）似乎不起作用。

我尝试了六种不同的 for 循环，但它们都没有达到我想要的效果，并且我使用了一些置换函数，但无法弄清楚如何使它们在这种情况下工作。

最终，我试图为未知数量的输入矩阵执行此操作，并且由于我对 R 还是新手，我对从哪里开始没有其他想法。论坛可以提供的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T23:15:01.957

```
## Example matrices
m1 <- matrix(1:4, nrow=2)
m2 <- matrix(1:6, nrow=2)
m3 <- matrix(1:2, nrow=2)

## A function that should do what you're after
f <- function(...) {
    mm <- list(...)
    ii <- expand.grid(lapply(mm, function(X) seq_len(ncol(X))))
    lapply(seq_len(nrow(ii)), function(Z) {
        mapply(FUN=function(X, Y) X[,Y], mm, ii[Z,])
    })
}

## Try it out
f(m1)
f(m1,m2)
f(m1,m2,m3) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T23:19:26.673

看起来您的问题可以分为两部分：

1.  从 1:5、1:4 和 1 创建所有有效的索引组合

2.  计算矩阵

对于第一个问题，考虑没有公共列的合并（也称为“交叉连接”）：

```
merge(data.frame(a=1:5), data.frame(a=1:4), by=c()) 
```

使用循环构建所需大小的数据框。**编辑**：或者只是使用`expand.grid`Josh 建议的。

对于第二个问题，包中的`alply`函数`plyr`将很有用。它允许逐行处理矩阵/数据框并将结果收集在列表中（在您的情况下为矩阵列表）：

```
alply(combinations, 1, function(x) { ... }) 
```

`combinations`是由等生成的数据帧`expand.grid`。该函数将为每个索引组合调用一次，`x`将包含一行的数据框。该函数的返回值将被收集到一个列表中。

# iphone - 一些 EKEvents 与谓词不匹配

> ID：15512033
> 
> 赞同：1
> 
> 时间：2013-03-19T22:50:00.350
> 
> 标签：iphone, ios, objective-c, ekeventkit

我正在开发一个日历应用程序。

一个月来，我整天都在循环以获取这一天的事件。我必须这样做才能处理重复发生的事件和超过一天的事件。

除了一种情况外，它工作得很好：为期数天的活动的最后一天。我看到了这个事件的其他日子的事件，但没有看到最后一个事件。（我在 GMT+1 时区，这就是我有这个时间的原因）

```
SEARCH FOR THE LAST DAY OF EVENT
Start:  2013-03-25 23:00:00 +0000
End:    2013-03-26 22:59:59 +0000

EVENT
Start:  2013-03-24 21:00:06 +0000
End:    2013-03-26 21:00:06 +0000

No results! 
```

这是返回当天事件的方法：

```
+ (NSArray *)ekEventsWithStartDate:(NSDate*)startDate endDate:(NSDate*)endDate
{
    NSLog(@"ekEventsWithStartDate:%@ endDate:%@",startDate,endDate);
    NSPredicate *predicate = [_eventStore predicateForEventsWithStartDate:startDate
                                                                  endDate:endDate
                                                                calendars:nil];

    NSArray *events = [_eventStore eventsMatchingPredicate:predicate];
    NSLog(@"events (%d):%@",[events count],events);
    return events;
} 
```

以下是活动详情：

```
EKEvent <0xb0635e0> {EKEvent <0xb0635e0> 
{title =  24-26 Mars 10 PM; 
 location = ; 
 calendar = EKCalendar <0xb3c3c80> {title = Calendar; type = Local; allowsModify = YES; color = #0E61B9;}; 
 alarms = (null);  
 URL = (null); 
 lastModified = 2013-03-19 22:11:10 +0000; 
 timeZone = Europe/Paris (GMT+01:00) offset 3600}; 
 location = ; 
 startDate = 2013-03-24 21:00:06 +0000; 
 endDate = 2013-03-26 21:00:06 +0000; 
 allDay = 0; 
 floating = 0; 
 recurrence = (null); 
 attendees = (null)} 
```

以下是来自 ekEventsWithStartDate 方法的此事件 3 天的日志：

```
ekEventsWithStartDate:2013-03-23 23:00:00 +0000 endDate:2013-03-24 22:59:59 +0000
events (1):(
    "EKEvent <0x9b44c00> {EKEvent <0x9b44c00> {title =  24-26 Mars 10 PM; location = ; calendar = EKCalendar <0xb336870> {title = Calendar; type = Local; allowsModify = YES; color = #0E61B9;}; alarms = (null); URL = (null); lastModified = 2013-03-19 22:11:10 +0000; timeZone = Europe/Paris (GMT+01:00) offset 3600}; location = ; startDate = 2013-03-24 21:00:06 +0000; endDate = 2013-03-26 21:00:06 +0000; allDay = 0; floating = 0; recurrence = (null); attendees = (null)}"
)

ekEventsWithStartDate:2013-03-24 23:00:00 +0000 endDate:2013-03-25 22:59:59 +0000
events (1):(
    "EKEvent <0xb28b970> {EKEvent <0xb28b970> {title =  24-26 Mars 10 PM; location = ; calendar = EKCalendar <0xb336870> {title = Calendar; type = Local; allowsModify = YES; color = #0E61B9;}; alarms = (null); URL = (null); lastModified = 2013-03-19 22:11:10 +0000; timeZone = Europe/Paris (GMT+01:00) offset 3600}; location = ; startDate = 2013-03-24 21:00:06 +0000; endDate = 2013-03-26 21:00:06 +0000; allDay = 0; floating = 0; recurrence = (null); attendees = (null)}"
)

ekEventsWithStartDate:2013-03-25 23:00:00 +0000 endDate:2013-03-26 22:59:59 +0000
events (0):(null) 
```

为什么该方法返回空数组？

附属问题：有没有更好的方法来获取一个月中每一天的事件？我正在寻找更好的表现。

谢谢您的帮助！

**编辑 20/03/2013：** 感谢 Dhruvik，我发现我的代码非常适用于 iOS 5.X，但不适用于 iOS 6.X（未测试 4.X）。

我检查了 5.X 和 6.X 版本的事件和日期，我看到的唯一区别是事件日历时区属性：

```
iOS 5.X
timeZone = Europe/Paris (CET)

iOS 6.X
timeZone = Europe/Paris (UTC+01:00) 
```

此问题与全天活动无关。

**iOS 6.X 有同样的问题吗？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T04:20:20.433

这是我在我的应用程序中实现的 fecth Event 的代码。

在.h

```
@property (nonatomic, retain) EKEventStore *eventStore;
@property (nonatomic, retain) EKCalendar *defaultCalendar;
@property (nonatomic, retain) NSMutableArray *eventsList; 
```

米

```
//This code will fecth the events from one day Before the current date..

- (void) fetchevents
{

   eventStore = [[EKEventStore alloc] init];

   eventsList = [[NSMutableArray alloc] init];

   EKEventStore *store = [[EKEventStore alloc] init];

   [store requestAccessToEntityType:EKEntityTypeEvent completion:^(BOOL granted, NSError *error) {
       // handle access here
   }];

   // Get the appropriate calendar
   NSCalendar *calendar = [NSCalendar currentCalendar];

   // Create the start date components
   NSDateComponents *oneDayAgoComponents = [[NSDateComponents alloc] init];
   oneDayAgoComponents.day = -1; // From which date you have to fetch Events from calander, as per your need subtract the days from current date

   NSDate *oneDayAgo = [calendar dateByAddingComponents:oneDayAgoComponents
                                              toDate:[NSDate date]
                                             options:0];

   NSLog(@"%@", oneDayAgo);

   // Create the end date components
   NSDateComponents *oneYearFromNowComponents = [[NSDateComponents alloc] init];
   oneYearFromNowComponents.year = 0;
   NSDate *oneYearFromNow = [calendar dateByAddingComponents:oneYearFromNowComponents
                                                   toDate:[NSDate date]
                                                  options:0];
   NSLog(@"%@", oneYearFromNow);

   //Create the predicate from the event store's instance method
   NSPredicate *predicate = [store predicateForEventsWithStartDate:oneDayAgo endDate:oneYearFromNow                                                                                      calendars:nil];

   NSArray *events_Array = [eventStore eventsMatchingPredicate: predicate];

   for (EKEvent *eventToCheck in events_Array)
   {
       [eventsList addObject:eventToCheck.title ];
   }
} 
```

希望它有所帮助。，快乐编码..谢谢

# java - JSpinner 来源？

> ID：15512034
> 
> 赞同：0
> 
> 时间：2013-03-19T22:50:01.077
> 
> 标签：java, swing, jspinner

我有一个类，其中包含两个 JSpinner 对象，x 和 y。我有一个添加到两者的更改侦听器。有人可以告诉我如何实现我的更改侦听器，以便侦听器可以分辨出两个对象之间的区别。例如伪代码：

```
if(source equals x)
    do this
else if(source equals y)
    do that 
```

多谢你们，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T22:55:40.060

您可以简单地使用匿名类来实现每个微调器的侦听器

例如，如果你想实现对 x 的更改监听器，你可以这样做：

```
x.addChangeListener(new ChangeListener()
{
   public void stateChanged(ChangeEvent e)
   {
   }
}); 
```

和 y 一样

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T23:16:42.110

在可能的情况下，每个控件使用单个侦听器更为谨慎（正如 Ali 指出的那样，+1）。它隔离了事件/动作，使其通常更容易阅读和理解......

如果您看不到自己在使用它，那么每个`EventObject`人都有一个`getSource`方法，该方法是对引发事件的控件的引用...

```
public void stateChanged(ChangeEvent e)
{
    if (e.getSource() == xControl) {
        // xControl updated
    } else if (e.getSource() == yControl) {
        // yControl updated
    }
} 
```

# .net - Funq 和处置子容器

> ID：15512035
> 
> 赞同：4
> 
> 时间：2013-03-19T22:50:06.383
> 
> 标签：.net, garbage-collection, servicestack, funq

我们在我们的Windows服务中使用Funq来执行一些计划任务，并且对于每一轮我们都创建一个子容器而不是创建我们所有的对象，并且在最后处理子容器时，我们发现这个子容器创建的元素不是GC根容器具有子容器的集合，这些子容器在调用子容器的处置后保留在那里。此代码重现了我们的问题，并将消耗（并保留）800MB 内存。

对我们来说，这很令人惊讶，以这种方式使用 funq 是否只是错误的模式，在这种情况下我们应该如何使用它？还是只是一个错误？

谢谢

```
public class Dummy
{
    public string Content { get; set; }
    public void Generate(int size)
    {
        this.Content = new string('X', size);
    }
}

class Program
{
    static void Main(string[] args)
    {
        var container = new Container();
        container.RegisterAutoWired<Dummy>().ReusedWithin(ReuseScope.Container);
        int size = 20000;
        for (int i = 0; i < size; i++)
        {
            using (var c = container.CreateChildContainer())
            {
                var d= c.Resolve<Dummy>();
                d.Generate(size);
            }
            PrintInfo(i);
        }

        Console.ReadLine();
    }

    private static void PrintInfo(int i)
    {
        if (i%1000 == 0)
        {
            int divide = 1024*1024;
            GC.Collect();
            var p = System.Diagnostics.Process.GetCurrentProcess();
            Console.WriteLine(p.WorkingSet64/divide + "MB");
            Console.WriteLine(p.PrivateMemorySize64/divide + "MB");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T19:00:41.863

[通过查看Funq 源](http://funq.codeplex.com/SourceControl/changeset/view/643423d8435e#src/Core/Funq/Container.cs)中的 Container.cs （最后一次更新是在 2011 年），我可以看出它泄漏了子容器。

CreateChildContainer 方法创建新容器，将其与父容器连接，并将创建的引用添加到 childContainers 堆栈。

只有两个地方用到了 childContainers 堆栈：

*   childContainers.Push(child); 在 Container.CreateChildContainer() 中（第 73 行）

*   childContainers.Pop().Dispose(); 在 Container.Dispose() 中（第 88 行）

因此，如果您创建子容器，然后释放它（但不是其父容器） - 对已释放子容器的引用保留在父容器中，因为没有清理代码将从父堆栈中删除已释放引用。

可能您可以通过创建代理子容器（仅一次），然后从中派生所有真正的子容器来解决此问题。由于 Dispose 方法不会将对象转移到不可用状态 - 您可以通过为代理子代调用 Dispose 来清理所有子代，一遍又一遍：

```
 var container = new Container();
    container.RegisterAutoWired<Dummy>().ReusedWithin(ReuseScope.Container);
    int size = 20000;
    var proxy = container.CreateChildContainer()
    for (int i = 0; i < size; i++)
    {
        using (proxy)
        using (var c = proxy.CreateChildContainer())
        {
            var d= c.Resolve<Dummy>();
            d.Generate(size);
        }
        PrintInfo(i);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-15T12:50:28.350

这个问题是由于父容器有一个子容器的引用，即使子容器被释放。垃圾收集器适用于大多数情况，但我认为这是极端情况。最简单的方法是，如果容器父级不为空，我们从父级的子级集合中删除容器引用。

您可以查看[此单元测试](https://github.com/jwChung/Funz/blob/master/test/Funz.UnitTest/ContainerTest.cs#L404-L425)（您的代码片段）[及其实现](https://github.com/jwChung/Funz/blob/master/src/Funz/Container.cs#L531-L536)的方式。

# c++ - 处理安装依赖项的最佳方法？

> ID：15512046
> 
> 赞同：1
> 
> 时间：2013-03-19T22:50:40.160
> 
> 标签：c++, linux, dynamic-linking, package-managers

我有一个分发给客户的库。我正在探索将我的第 3 方依赖项保留为动态链接依赖项的想法。在这种情况下，我的客户的部署变得更加复杂，因为他们必须先安装我的依赖项才能使用我的库。我对此有点陌生，所以我有一个广泛的问题：

假设我所有的客户都在 linux 上，那么简单地将依赖项 .so 文件安装到系统库目录中的 RPM 包是最佳途径吗？从我读到的关于 RPM 的内容来看，这并不是它们的真正用途。我想我正在寻找的是一种 linux 的“安装程序”，但也许这样的东西不存在。

构建一个包含所有相关二进制文件（和许可证，如果适用）的包的最佳方法是什么，并且有关于如何安装的说明？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:13:06.070

您有多种选择：

*   静态链接（如果正在播放的许可证允许）
*   支持一系列发行版并为所有发行版提供软件包（可行性取决于您的客户是谁）。对您的客户来说是最简单的选择，对您来说是最复杂的选择。
*   提供一个安装程序，将您的应用程序安装在 Windows 风格的自包含目录结构中（例如`/opt/myapp`或`/home/someuser/myapp`）。将共享库放在那里并通过相应`LD_LIBRARY_PATH`设置的脚本启动。我已经看到 Loki 游戏、Adobe Reader、Google Earth 等使用了这个选项。

不要：

*   提供一个自定义安装程序，它将在标准目录结构中复制您的二进制文件和库。这可能会覆盖您的客户拥有的其他应用所需的特定库版本。由于发行版的包管理不知道这些文件，因此它也留下了可怕的混乱。
*   为每个人提供一个`rpm`。在非`rpm`发行版上，这将要求您的客户手动转换包以适应他们的包管理系统。

# javascript - JavaScript：将图像数组绘制到 HTML5 画布-数组位置在删除它们时重新排序

> ID：15512048
> 
> 赞同：0
> 
> 时间：2013-03-19T22:50:56.227
> 
> 标签：javascript, arrays, html5-canvas, kineticjs

我有以下 JS 函数，我用它来检测图像何时被拖到 HTML5 画布上的某个位置：

```
function isHit(mouseX, mouseY, obj){
console.log("isHit has been called from within if statement in mousemove function");
console.log("draggingImage variable value = " +draggingImage);
if(draggingImage == true){
    console.log("if dragging image == true statment is being called");
    console.log("Value of selectedImage = " + selectedImage);
    console.log("Value of selectedImageArrayLocation = " + selectedImageArrayLocation);
    if(mouseY > 250){
        console.log("Value of obj.shape.index = " +obj.shape.index);
        if((mouseX > 80) && (mouseX < 200) && (selectedImageArrayLocation >= 0) && (selectedImageArrayLocation <= numImagesAssets)){
            console.log("Correct");
            document.getElementById('tipsParagraph').innerHTML = "Correct! This is an asset because it is an item that can be bought or sold for cash.";
            selectedImage.remove();
            console.log("selectedImage has been removed: " + selectedImage);
        }else{
            console.log("Incorrect");
            document.getElementById('tipsParagraph').innerHTML = "Incorrect! This icon is an asset because it is an item that can be bought or sold for cash.";
        }
    }
}
} 
```

如果图像被拖到正确的位置，我想将其从画布中删除，并为用户提供一些反馈。如果它被拖到错误的位置，我想将图像留在画布上，并为用户提供反馈。

每当拖动图像时，我都会从我的`mousemove`函数中调用上述函数（我有一个布尔值，每当`mousedown`在图像上检测到 a 时将其设置为 true，并且在检测到 a 时将其设置为 false `mouseup`。

目前，当图像被拖到正确的位置时，它会从画布中移除，并向用户提供反馈，但数组中其余图像的位置随后会重新排序。

我想知道这是否是因为`selectedImage.remove();`我上面的函数中的行正在从数组中删除图像，而不仅仅是从画布中？

我如何从画布中删除图像，而不是从数组中删除，记住我已经使用 KineticJS 库将所有​​图像绘制到画布上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T22:57:25.520

尝试通过以下方式隐藏形状：

```
selectedImage.hide(); 
```

而不是删除它。该`hide()`方法内置于 KineticJS 中。
如果即使这样也不起作用，也许将不透明度设置为 0：

```
selectedImage.setOpacity(0); 
```

# android - XmlPullParser setInput 问题

> ID：15512049
> 
> 赞同：0
> 
> 时间：2013-03-19T22:50:59.237
> 
> 标签：android

我对 setInput() 方法有疑问。当我提供普通 StringReader 并解析 XML

```
locationsXml.setInput(new StringReader("<locations>" + "<location>" etc.[...] 
```

一切顺利，但如果我想从资源中加载文件：

```
locationsXml.setInput(new FileReader("res/xml/locations.xml")); 
```

文件未加载。

哪里有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T00:17:15.140

您已经从资源中的文件创建了一个 Inputstream（前提是资源 xml 位于“assets”文件夹中）。您可以使用以下方法控制该资源：

context.getAssets.open（文件名）；

例如 - InputStream myInput = myContext.getAssets().open(locations.xml);

现在 - 你可以使用这个 inputStream 来做任何你想做的事情。

或者

将 xml 放入 /res/raw 文件夹。看起来 openRawResource 仅打开该文件夹中的资源。您也可以尝试 getResources().getXml(com.MYCLass.R.xml.programs); 这将返回您的 XML 解析器实例。

InputStream 对象 = this.getResources() .openRawResource(R.raw.fileName);

# emacs - 在 Emacs 中运行命令行命令，并接收它们的输出

> ID：15512051
> 
> 赞同：1
> 
> 时间：2013-03-19T22:51:04.790
> 
> 标签：emacs, command-line, elisp, ascii, ascii-art

我想在emacs中循环运行一组命令行命令，当用户点击一个键时循环停止。

这是为了在 Emacs 中看到一个 ascii“视频”，当你按下一个键时它会停止。

我认为将图像到ASCII的文本位作为评论会很有趣（图像来自我的mac相机）。

我使用 imagesnap 拍摄相机图像，并使用 jp2a 将其转换为 ascii。我认为imagesnap只是mac。这是我到目前为止的代码：

```
(defun ascii-video-comment ()                                                          
    "Makes video comment, requires imagemagick, jp2a, imagesnap"                        
    (interactive)                                                                       
    (shell-command "imagesnap -q ~/Desktop/emacs-snap.jpg")                             
    (insert (shell-command-to-string "jp2a --width=48 ~/Desktop/emacs-snap.jpg"))                                                                                                                                                               
    (shell-command "rm ~/Desktop/emacs-snap.jpg")                                       
) 
```

这只是从相机拍摄，转换为 ascii，将其插入到我的文件中，然后将光标放在后面。

就像我说的那样，我希望它继续循环，呈现出缓慢的 ascii 视频的外观，直到我点击一个键来选择当前的“帧”。

这甚至可能吗？

* * *

**编辑**

这是我当前的代码，我对此很满意。循环20次，可以通过取消（Cg）选择当前图像。但是，当您第二次执行此操作时，事情似乎出错了。

```
(defun ascii-video-comment ()
 "Makes video comment, requires imagemagick, jp2a, imagesnap"
 (interactive)
 (cl-loop repeat 20 do
  (shell-command "imagesnap -q ~/Desktop/ascii-video-comment.jpg")
  (cua-set-mark)
  (insert (shell-command-to-string "jp2a --width=120 ~/Desktop/ascii-video-comment.jpg"))
  (shell-command "rm ~/Desktop/ascii-video-comment.jpg")
  (comment-region (mark) (point))
  (cua-set-mark)
  (pop-global-mark)
  (sit-for 0.1)
  (undo)
 )
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:59:52.730

在你的`EDIT`“最终代码”上：不要在 lisp 程序中使用交互式命令：你的代码变得脆弱和低效。例如，`shell-command`( `C-h f shell-command RET`) 的文档字符串明确指出：

> 在 Elisp 中，通过调用`call-process`或 `start-process`直接为您提供更好的服务，因为它提供了更多控制并且不强制使用 shell（需要引用参数）

另外，使用`delete-file`代替`(shell-command "rm ...")`.

不要在程序中使用`cua-set-mark`、`pop-global-mark`和 ，尤其是`undo`。而是绑定一个变量：

```
(let ((beg (point)))
  (call-process "jp2a" nil t t "--width=120" "~/Desktop/ascii-video-comment.jpg")
  (comment-region beg (point))
  (sit-for 0.1)
  (delete-region beg (point))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T08:05:36.500

~~AFAIR，Emacs 不提供 API 来轮询挂起的事件，所以有两种选择。~~ *UPD：忽略，应该事先阅读手册，Emacs 确实提供 API 来轮询未决事件*：

```
(defun start-printing-messages-2 ()
  (interactive)
  (while (not (input-pending-p)) 
    (loop-body-function)
    (redisplay 'force))) 
```

如果您想要命令执行之间的延迟，那么`sit-for`您可以：

```
(defun start-printing-messages-3 ()
  (interactive)
  (while (sit-for 0.05)
    (loop-body-function))) 
```

如果您希望延迟从循环体的开头而不是其结尾开始计数（如果您的循环体可能需要大量时间），您需要设置完整的计时器执行：您基本上在计时器中运行一个函数并添加一个`post-command-hook`这将杀死那个计时器：

```
(defvar loop-run-count 0)
(defvar loop-timer-object nil)

(defun loop-body-function ()
  (setq loop-run-count (1+ loop-run-count))
  (message "The function was run %s times" loop-run-count))

(defun stop-printing-messages ()
  (when loop-timer-object   
    (cancel-timer loop-timer-object)
    (remove-hook 'post-command-hook 'stop-printing-messages)))

(defun start-printing-messages ()
  (interactive)
  (setq loop-run-count 0)
  ;; post-command-hook is added via timer too, because otherwise it
  ;; might get called right after this function completes and this
  ;; would kill the timer that didn't even start yet.
  ;; get killed right after creation.
  (run-with-timer
   0.01 nil (lambda ()
          (add-hook 'post-command-hook 'stop-printing-messages)))
  (setq loop-timer-object 
    (run-with-timer nil 0.01 'loop-body-function))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T14:53:23.420

`while-no-input`您可以使用和等待输入`sit-for`。

对于您描述的用例，`sit-for`就是您所需要的。

请注意，您应该将两个 shell 调用与`&&`或制作一个 shell 脚本结合起来。

这是一个玩具命令，可以满足您的需要，但只闪烁随机数。

```
(defun flash-me ()
  "flash random number until you press a key"
  (interactive)
  (let ((beg (copy-marker (point)))
        (end (copy-marker (point) t)))
    (loop do (progn
               (delete-region beg end)
               (insert (shell-command-to-string "echo $RANDOM")))
          while (sit-for 1))
    (set-marker beg nil)
    (set-marker end nil))) 
```

# ember.js - 从 Ember.Route 中访问参数的正确方法是什么。设置控制器？

> ID：15512054
> 
> 赞同：18
> 
> 时间：2013-03-19T22:51:25.293
> 
> 标签：ember.js, ember-data, ember-router

`Ember.Route.model`可以访问`params`变量，但`Ember.Route.setupController`没有。这对我来说很麻烦，因为我的路径有多个动态段，我需要在我的模板中使用它们。

具体来说，我的路径如下所示`/project/:project_id/task/:task_id`：请注意，一项任务可以属于多个项目，而不仅仅是一个。因此，我们无法仅通过查看任务本身来判断我们正在查看的项目：我们必须使用在 URL 中找到的项目 ID。这是我目前的做法：

```
App.TaskRoute = Ember.Route.extend({

  // This works just fine:
  serialize: function(model) {
    return {
      task_id: model.get('id'),
      project_id: this.modelFor('project').get('id')
    };
  },

  model: function(params) {
    this.set('parentProjectId', params.project_id);

    return App.Task.find(params.task_id);
  },

  setupController: function(controller, model) {
    var parentProject = this.modelFor('project') ?
                        this.modelFor('project') :
                        App.Project.find(this.get('parentProjectId'));
    controller.set('parentProject', parentProject);

    controller.set('content', model);
  }
}); 
```

也许我是偏执狂，这只是感觉 hacky。如果该路由旨在访问参数，那么它已经`params`附加了一个属性。有没有更好的办法？

编辑：我对上面的代码做了一些更新。此外，我的路线如下所示：

```
App.Router.map(function() {
  this.resource('project', { path: '/project/:project_id' });
  this.resource('task', { path: 'project/:project_id/task/:task_id' });
}); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-19T22:59:32.067

您无权访问 setupController 挂钩中的这些参数。**模型钩子可以访问 params 对象，因为它只是在通过 URL 输入您的应用程序时被调用。**

你的代码看起来很不错，你真的知道，你想这样做。你对它有什么感觉？查看这段代码时，我问自己为什么不将 Route 的逻辑拆分为 ProjectRoute 和从属的 TaskRoute。那不适合你吗？

**更新：响应您的更改**

在您的案例中，嵌套资源可能是成功的关键：

```
App.Router.map(function() {
  this.resource('project', { path: '/project/:project_id' }, function(){
    this.resource('task', { path: '/task/:task_id' });
  });
}); 
```

由于 TaskRoute 是嵌套的，因此您不必将其重命名为 ProjectTaskRoute：

```
App.ProjectTaskRoute = Ember.Route.extend({
...
}); 
```

这应该使您能够`parentProjectId property`从路由中删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-05-17T15:01:08.217

从 Ember 1.8 开始，Route 类有一个[paramsFor](https://www.emberjs.com/api/ember/3.1/classes/Route/methods/paramsFor?anchor=paramsFor)函数：

```
import Route from '@ember/routing/route';

export default Route.extend({
    setupController(controller) {
        this._super(...arguments);
        const params = this.paramsFor('name.of.your.route')
    }
}); 
```

# python - python shuffle 使得位置永远不会重复

> ID：15512058
> 
> 赞同：16
> 
> 时间：2013-03-19T22:51:53.433
> 
> 标签：python, random, shuffle

我想对列表进行随机洗牌，但有一个条件：洗牌后元素永远不能处于相同的原始位置。

有没有一种方法可以在 python 中为列表执行此操作？

例子：

```
list_ex = [1,2,3] 
```

以下每个洗牌列表在洗牌后应该具有相同的抽样概率：

```
list_ex_shuffled = [2,3,1]
list_ex_shuffled = [3,1,2] 
```

但是排列 [1,2,3]、[1,3,2]、[2,1,3] 和 [3,2,1] 是不允许的，因为它们都重复元素位置之一。

注意：list_ex 中的每个元素都是唯一的 id。不允许重复相同的元素。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T23:17:55.570

在循环中随机化并不断拒绝结果，直到满足您的条件：

```
import random

def shuffle_list(some_list):
    randomized_list = some_list[:]
    while True:
        random.shuffle(randomized_list)
        for a, b in zip(some_list, randomized_list):
            if a == b:
                break
        else:
            return randomized_list 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-20T00:20:07.843

我将这种洗牌描述为“没有固定点的排列”。它们也被称为[精神错乱](http://en.wikipedia.org/wiki/Derangement)。

随机排列是紊乱的概率大约是 1/e（证明起来很有趣）。不管清单有多长，这都是真的。因此，一个明显的随机混乱算法是正常洗牌，并继续洗牌，直到你有一个混乱。预期的必要洗牌次数约为 3，而且很少需要洗牌超过 10 次。

```
(1-1/e)**11 < 1% 
```

* * *

> > 假设聚会上有 n 个人，每个人都带了一把雨伞。聚会结束时，每个人从篮子里随机拿一把雨伞。没有人自己撑伞的概率是多少？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-19T23:01:08.120

您可以生成所有可能的有效改组：

```
>>> list_ex = [1,2,3]
>>> import itertools

>>> list(itertools.ifilter(lambda p: not any(i1==i2 for i1,i2 in zip(list_ex, p)),
...                        itertools.permutations(list_ex, len(list_ex))))
[(2, 3, 1), (3, 1, 2)] 
```

对于其他一些序列：

```
>>> list_ex = [7,8,9,0]
>>> list(itertools.ifilter(lambda p: not any(i1==i2 for i1,i2 in zip(list_ex, p)),
...                        itertools.permutations(list_ex, len(list_ex))))
[(8, 7, 0, 9), (8, 9, 0, 7), (8, 0, 7, 9), (9, 7, 0, 8), (9, 0, 7, 8), (9, 0, 8, 7), (0, 7, 8, 9), (0, 9, 7, 8), (0, 9, 8, 7)] 
```

如果您只想要一个结果，您还可以通过短路迭代器来提高效率：

```
>>> list_ex = [1,2,3]
>>> i = itertools.ifilter(lambda p: not any(i1==i2 for i1,i2 in zip(list_ex, p)),
...                       itertools.permutations(list_ex, len(list_ex)))
>>> next(i)
(2, 3, 1) 
```

但是，这不会是一个*随机*的选择。您必须生成所有这些并选择一个作为实际随机结果：

```
>>> list_ex = [1,2,3]
>>> i = itertools.ifilter(lambda p: not any(i1==i2 for i1,i2 in zip(list_ex, p)),
...                       itertools.permutations(list_ex, len(list_ex)))
>>> import random
>>> random.choice(list(i))
(2, 3, 1) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T23:39:01.510

这是对此的另一种看法。您可以根据需要选择一种或另一种解决方案。这不是一个单一的衬里，而是洗牌元素的索引而不是元素本身。因此，原始列表可能具有无法比较或比较昂贵的重复值或类型值。

```
#! /usr/bin/env python
import random

def shuffled_values(data):
    list_length = len(data)
    candidate = range(list_length)
    while True:
        random.shuffle(candidate)
        if not any(i==j for i,j in zip(candidate, range(list_length))):
            yield [data[i] for i in candidate]

list_ex = [1, 2, 3]
list_gen = shuffled_values(list_ex)
for i in range(0, 10):
    print list_gen.next() 
```

这给出了：

```
[2, 3, 1]
[3, 1, 2]
[3, 1, 2]
[2, 3, 1]
[3, 1, 2]
[3, 1, 2]
[2, 3, 1]
[2, 3, 1]
[3, 1, 2]
[2, 3, 1] 
```

如果`list_ex`是`[2, 2, 2]`，此方法将`[2, 2, 2]`一遍又一遍地让步。其他解决方案将为您提供空列表。我不确定在这种情况下你想要什么。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-11-06T22:41:58.367

使用 Knuth-Durstenfeld 对列表进行洗牌。只要在洗牌过程中发现它在原来的位置，就从头开始一个新的洗牌过程，直到它回到一个合格的排列。该算法的时间复杂度是最小的常数项：

```
def _random_derangement(x: list, randint: Callable[[int, int], int]) -> None:
    '''
        Random derangement list x in place, and return None.
        An element can never be in the same original position after the shuffle. provides uniform distribution over permutations.
        The formal parameter randint requires a callable object such as rand_int(b, a) that generates a random integer within the specified closed interval.
    '''

    from collections import namedtuple

    sequence_type = namedtuple('sequence_type', ('sequence_number', 'elem'))

    x_length = len(x)
    if x_length > 1:
        for i in range(x_length):
            x[i] = sequence_type(sequence_number = i, elem = x[i])

        end_label = x_length - 1
        while True:
            for i in range(end_label, 0, -1):
                random_location = randint(i, 0)
                if x[random_location].sequence_number != i:
                    x[i], x[random_location] = x[random_location], x[i]
                else:
                    break
            else:
                if x[0].sequence_number != 0: break

        for i in range(x_length):
            x[i] = x[i].elem 
```

[complete_shuffle](https://github.com/fsssosei/complete_shuffle)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-20T00:43:17.030

这是另一种算法。随机取卡。如果你的第i张卡是第i张卡，把它放回去再试一次。唯一的问题是，如果当您到达最后一张卡时，它是您不想要的那张。与其他之一交换它。

我认为这是公平的（均匀随机）。

```
import random

def permutation_without_fixed_points(n):
    if n == 1:
        raise ArgumentError, "n must be greater than 1"

    result = []
    remaining = range(n)

    i = 0
    while remaining:
        if remaining == [n-1]:
            break

        x = i
        while x == i:
            j = random.randrange(len(remaining))
            x = remaining[j]

        remaining.pop(j)
        result.append(x)

        i += 1

    if remaining == [n-1]:
        j = random.randrange(n-1)
        result.append(result[j])
        result[j] = n

    return result 
```

# java - 难以实施策略和复合模式以在游戏中提供不同的行为

> ID：15512060
> 
> 赞同：0
> 
> 时间：2013-03-19T22:51:58.873
> 
> 标签：java, composite, strategy-pattern

我在尝试完成需要使用策略和复合模式的实践时遇到了真正的麻烦。我正在尝试创建一个车辆集合，这些车辆可以根据它们所在的表面具有不同的行为。但是，这些车辆在表面上可能有不止一种行为 - 例如，如果天气条件设置为下雪和下雨，它们可能同时进行雪地行驶和雨天行驶。

我有一个名为 AbstractVehicle 的类，它有两个具体的子类，Car 和 Boat。

然后我有一个名为 IBehaviour 的界面。实现此接口的是两个抽象类，称为 LandBehaviour 和 WaterBehaviour（它们是复合模式的顶层）。它们中的每一个都有一个子类的集合。只关注 LandBehaviour，它的子类是 SnowBehaviour、StandardBehaviour 和其他一些，包括 LandAssembly。

我的想法是我将把复合材料的上层代码放在 LandBehaviour 中。然后，每个具体的子类将具有复合的添加、删除和列出部分的空实现，其中 LandAssembly 类包含实际将各种行为组合在一起所需的代码。

这是为了产生这样的结果，例如，一辆汽车可以同时具有 StandardBehaviour 和 SnowBehaviour。

我没有发布大量代码（而且有很多），而是希望对我正在尝试实现的基本结构提供一些反馈。我现在遇到了一些错误，例如空指针异常，而不是花很长时间尝试修复它们，我想了解项目的布局是否一开始就正确。

**编辑：添加代码 - 生成空指针异常**

这是我的 AbstractVehicle 类：

```
public AbstractVehicle (IBehaviour behaviourIn) {
    behaviour = behaviourIn;
}

public void setBehaviour(IBehaviour ib) {
    behaviour = ib;
}

public IBehaviour getBehaviour() {
    return behaviour;
}

public void move() {
    behaviour.ensureCorrectBehaviour();
} 
```

汽车子类：

```
public Car () {
    super(new StandardBehaviour());
} 
```

IBehaviour 界面：

```
public interface IBehaviour {
    public void ensureCorrectBehaviour();
} 
```

LandBehaviour 抽象类：

```
public void ensureCorrectBehaviour() {
}

public ILandBehaviour () {
}

private ILandBehaviour landBehaviour;

public ILandBehaviour (ILandBehaviour landBehaviour) {
    this.landBehaviour = landBehaviour;
}

public ILandBehaviour getBehaviour() {
    return landBehaviour;
}

public abstract void addBehaviour(ILandBehaviour behaviour);
public abstract void removeBehaviour(ILandBehaviour behaviour);
public abstract ILandBehaviour[] getBehaviours(); 
```

具体行为子类 (RacingBehaviour) 的示例：

```
public RacingBehaviour(ILandBehaviour landBehaviour) {
    super(landBehaviour);
}

public RacingBehaviour() {}

@Override
public void ensureCorrectBehaviour() {
    System.out.println("Vehicle is racing.");
}

public void addBehaviour(ILandBehaviour behaviour) {}
public void removeBehaviour(ILandBehaviour behaviour) {}
public ILandBehaviour[] getBehaviours() {
    return null;
} 
```

最后是 LandAssembly 类：

```
public class LandAssembly extends ILandBehaviour {

private List<ILandBehaviour> behaviours;

public LandAssembly(ILandBehaviour landBehaviour) {
    super(landBehaviour);
    behaviours = new ArrayList<ILandBehaviour>();
}

public LandAssembly() {}

public void addBehaviour(ILandBehaviour behaviour) {
    behaviours.add(behaviour);
}

public void removeBehaviour(ILandBehaviour behaviour) {
    behaviours.remove(behaviour);
}

public ILandBehaviour[] getBehaviours() {
    return behaviours.toArray(new ILandBehaviour[behaviours.size()]);
}   
} 
```

我正在使用这个跑步者：

```
 AbstractVehicle aCar = new Car(120);
    aCar.move();

    ILandBehaviour snow = new SnowBehaviour();
    ILandBehaviour racing = new RacingBehaviour();
    ILandBehaviour as = new LandAssembly();
    as.addBehaviour(snow);
    as.addBehaviour(racing); 
```

在我实施复合材料之前，一切都很好。我能够使用客户端创建一辆新车，调用它的 move() 方法，然后改变它的行为，再次调用 move() 并查看差异。然而，我知道我现在有点将 ensureCorrectBehaviour() 方法留在复合模式的实现中，这显然是错误的。我也知道，在这样做之后， Car 构造函数的“新”部分不起作用——我必须为每个行为添加一个空构造函数。

我可以在我创建的代码中看到明显的问题，我只是不太明白如何解决它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T23:53:17.770

如果您关心设计模式，类图将非常有用。您有许多特征，并且将这些特征分组为更高级别的抽象（例如雪/土地/水/等）。但是您的车辆只接受一种行为。车辆是否需要具备多种功能？（当然，正如你提到的那样）。

您可能会考虑在您的类中使用具体定义的策略，其中每个策略的实现可能会有所不同。

```
public abstract class Bird
{
    protected BirdCallStrategy callStrat;
    protected FlyStrategy flyStrat;
}

public class Duck
{
    public Duck()
    {
        callStrat = new QuackStrategy();
        flyStrategy = new FlySouthForWinterStrategy(TimeOfYear);
    }
}

public class Chicken
{
    public Chicken()
    {
        callStrat = new CluckStrategy();
        flyStrat = new NoFlyStrategy();
    }
} 
```

如果您的策略有**不同的**抽象，这很有效。在这种情况下`Flying`，`BirdCalling`彼此无关，但允许它们在运行时因实现而异（嘎嘎声、啁啾或飞行、不飞行等）

但是，如果您想在不进行子类型化的情况下动态创建不同的实例，您可能需要研究[装饰器模式](http://en.wikipedia.org/wiki/Decorator_pattern)。**装饰器模式允许您在运行时**将“功能”的任意组合应用于实例。

因此，您最终可能会得到一个实例化的对象，例如：

```
Window decoratedWindow = new HorizontalScrollBarDecorator (
                new VerticalScrollBarDecorator(new SimpleWindow())); 
```

# wordpress - Wordpress 所见即所得编辑器中的自定义样式项目符号

> ID：15512062
> 
> 赞同：1
> 
> 时间：2013-03-19T22:51:59.247
> 
> 标签：wordpress, html-lists, wysiwyg

是否有 Wordpress WYSIWYG 编辑器插件来制作添加特定 ul li 和 ol li 样式的按钮？

例如，目前我的 ul li list-style-type 在我的 css 中设置为正方形，而我的 ul li 是数字。我的客户希望能够在 Wordpress WYSIWYG 编辑器的 Visual 端添加罗马和字母项目符号点，而不必在编辑器的 HTML 端手动编码列表样式类型（大写罗马字母、大写字母） ?

![在此处输入图像描述](../Images/c832841fda078bea3461d3d4ab6cb9d8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:15:18.343

本教程将让您在 WordPress 编辑器中添加**样式下拉列表：http:** [//alisothegeek.com/2011/05/tinymce-styles-dropdown-wordpress-visual-editor/](http://alisothegeek.com/2011/05/tinymce-styles-dropdown-wordpress-visual-editor/)（编辑：那里描述的*方法 2*）

[![将样式下拉菜单添加到 WordPress 编辑器](../Images/33ceedc650a03fe6987263f5ad2f9bd3.png)](http://alisothegeek.com/2011/05/tinymce-styles-dropdown-wordpress-visual-editor/)

作为此下拉列表的选项，您应该让您的客户在`ul`元素上添加 2 个不同的类，例如`alphabetical`和`roman`。在主题的 CSS 文件以及`editor-style.css`教程中提到的内容中，根据需要设置这 2 个类的样式（例如`.roman { list-style-type: (...) }`：）

# sql - 访问当前打开的 SQL 连接

> ID：15512063
> 
> 赞同：0
> 
> 时间：2013-03-19T22:52:01.887
> 
> 标签：sql, winforms, database-connection

我的应用程序是一个 WinForms 数据库应用程序。在启动期间使用设置中的连接字符串与数据库的连接发生在幕后。工作正常。应用程序使用 Sync Framework 2.1 将本地数据库同步到 Azure 数据库。这需要首先设置连接的两端。Azure 端很容易。我只是建立了一个新的连接。我在本地端遇到问题。我无法建立新的连接，因为已经有一个并且它是打开的。我需要使用这个开放的连接，但不知道如何访问它。有任何想法吗？

# ios - 将 UIImage 作为参数传递时访问错误 -iOS -Cocos2D

> ID：15512069
> 
> 赞同：0
> 
> 时间：2013-03-19T22:52:33.430
> 
> 标签：ios, cocos2d-iphone, uiimage, exc-bad-access

标题是我相信自我描述的，所以我将开始解释我的代码..

这是生成图像的代码..

```
- (UIImage *) convertDataToImage {
    NSData* imageData = [[NSUserDefaults standardUserDefaults] objectForKey:@"screenshot"];
    return [UIImage imageWithData:imageData];
} 
```

如果我这样调用这个方法，`[(AppDelegate*)[[UIApplication sharedApplication] delegate] sendEmailWithImage:[self convertDataToImage]];`那么一切都很好，除了它的速度..因为我有很多需要相同图像的方法..所以我只想调用`convertImageToImage`一次方法..

所以我尝试了..

。H

```
UIImage *image; 
```

.m 初始化

```
image = [self convertDataToImage]; 
```

最后

```
[(AppDelegate*)[[UIApplication sharedApplication] delegate] sendEmailWithImage:image]; 
```

似乎一切都应该按原样工作..但我遇到了一个糟糕的访问错误..

我怎样才能解决这个问题？

提前致谢..

更新：在我的初始化中，我尝试使用以下代码

```
CCTexture2D *texture = [[[CCTexture2D alloc] initWithImage:image] autorelease];

CCSprite *sp = [CCSprite spriteWithTexture:texture];
sp.position = ccp(100, 100);
[self addChild:sp]; 
```

它正在工作..但外部初始化仍然无法正常工作..我正在自动释放纹理，它是否也会释放我的图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:06:48.293

由于您没有在项目中使用 ARC，因此您应该返回`retain`的`UIImage`实例是`[self convertDataToImage]`：

```
image = [[self convertDataToImage] retain]; 
```

# configuration - 为 Vagrant 设置 DHCP 服务器 IP

> ID：15512073
> 
> 赞同：9
> 
> 时间：2013-03-19T22:53:05.290
> 
> 标签：configuration, virtualbox, vagrant, dhcp

我在 Mac OS X 10.7.5 上使用 Vagrant 1.1.2

我遇到了默认网络设置的问题。网络似乎配置为使用 DHCP 服务器提供来自 10.0.2 的 IP。？网络，网关设置为 10.0.2.2

可悲的是，在我工作的组织中，实际上在 10.0.2.2 存在一个服务器，这导致了巨大的网络通信延迟。

如何配置 Vagrant 的 VirtualBox 以使用 DHCP 服务器提供来自不同网络的 IP？[http://www.vagrantup.com/](http://www.vagrantup.com/)上的文档完全忽略了这个问题，不幸的是，这使我的 Vagrant 毫无用处。

当我从公司网络断开连接时，Vagrant 按预期工作。所以我很确定问题出在IP冲突中。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-20T08:13:49.107

这更像是一个 VirtualBox 问题，因此应该让 Vagrant 为不同的 DHCP 子网设置 VirtualBox 选项，如下所示：

```
 config.vm.provider :virtualbox do |vb|
    vb.customize ["modifyvm", :id, "--natnet1", "192.168/16"]
  end 
```

# javascript - 此处未显示警报window.addEventListener('resize',

> ID：15512074
> 
> 赞同：0
> 
> 时间：2013-03-19T22:53:13.993
> 
> 标签：javascript, jquery, html, css, javascript-events

我的窗口 .resize 功能不起作用....当我减小浏览器窗口时，我试图减小立方体大小以适应 iphone 布局....问题是它没有改变，即使我没有看到警报。 ...问题出在这行第 354 行

在下面提供我的代码

```
window.addEventListener('resize', function(){
        if (screen.width < 900) {
            alert("i am here"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T23:00:38.723

我看到你正在使用 jQuery，所以你可以尝试这种方法：

```
$(window).resize(function() {
     if($(this).width() < 900) {
         alert("i am here");
     }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T23:02:35.003

```
window.onresize = function(){
   if(window.innerWidth < 900) {
      alert('hope this help');
   }
} 
```

希望这个帮助 jquery 也是一种更好的方法

# c# - 连接字符串的数据源

> ID：15512076
> 
> 赞同：0
> 
> 时间：2013-03-19T22:53:41.187
> 
> 标签：c#, sql-server, connection-string

如果 SSMS 仅使用机器名称而不使用实例名称连接到它，我应该使用什么连接字符串？

我的意思是它使用以下字符串连接：PCName

我曾经使用 PCName/SQLExpress 进行连接。我无法在我的应用程序中设置正确的连接字符串，以便将应用程序连接到这台机器上的数据库。

如何检查我应该使用什么数据源？我已经检查了名为 SQLEXPRESS 的服务器实例的 Sql Server 配置。

所以我尝试将数据源设为： .\SQLEXPRESS PCName\SQLEXPRESS 。

我正在尝试连接到位于我的 app 文件夹中的基于服务的数据库。所以我使用以下连接字符串：

数据源=PCName;attachdbfilename=|DataDirectory|\spareparts.mdf;集成安全=true;用户实例=true;multipleactiveresultsets=true;App=EntityFramework;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:15:54.837

如果 SSMS 通过连接，`PCName`那么您的应用程序应该能够使用`Data Source=PCName`. 但是，这取决于您的应用程序是否与 SSMS 位于同一台机器上。如果在另一台机器上，它可能由于各种原因无法连接。如果您对问题所做的只是“无法连接”，我们无法推测问题可能是什么——这是什么意思？您收到错误消息吗？如果是这样，它是什么？确保：

*   SQL Browser 服务已启动
*   TCP/IP 已启用
*   添加`Network=DBMSSOCN;`到连接字符串
*   您还尝试了 IP 地址`PCName`
*   防火墙未阻止 SQL Server 端口

# css - &keyframes 动画在 Firefox 中不起作用

> ID：15512078
> 
> 赞同：3
> 
> 时间：2013-03-19T22:54:05.533
> 
> 标签：css, css-transitions

我被要求弄清楚为什么这个动画在 chrome 中有效，但在 firefox 中无效，我对 css3 过渡几乎没有经验，我更喜欢 jQuery，但我被要求深入了解它，所以......这里是 css，我希望它是什么 html 很明显，我确定 html 很好，因为它可以在 chrome 中工作，所以我确定它是语法错误或类似错误。

> 编辑 - 请参阅[http://jsfiddle.net/5Uq86/](http://jsfiddle.net/5Uq86/)

```
/* the animation */
@keyframes sub-menu-anim                                        {   to {height: 65px;}  }
@-moz-keyframes sub-menu-anim       /* Firefox */               {   to {height: 65px;}  }
@-webkit-keyframes sub-menu-anim    /* Safari and Chrome */     {   to {height: 65px;}  }
@-o-keyframes sub-menu-anim         /* Opera */                 {   to {height: 65px;}  }

/* products menu animation */
@keyframes sub-menu-anim-prod                                       {   to {height: 210px;} }
@-moz-keyframes sub-menu-anim-prod      /* Firefox */               {   to {height: 210px;} }
@-webkit-keyframes sub-menu-anim-prod   /* Safari and Chrome */     {   to {height: 210px;} }
@-o-keyframes sub-menu-anim-prod        /* Opera */                 {   to {height: 210px;} }

/* health menu animation */
@keyframes sub-menu-anim-health                                     {   to {height: 294px;} }
@-moz-keyframes sub-menu-anim-health    /* Firefox */               {   to {height: 294px;} }
@-webkit-keyframes sub-menu-anim-health /* Safari and Chrome */     {   to {height: 294px;} }
@-o-keyframes sub-menu-anim-health      /* Opera */                 {   to {height: 294px;} }

/* applying the animation to the menu */
#primaryNav li.menu-item ul.sub-menu {
    animation:sub-menu-anim 0.5s;
    -moz-animation: sub-menu-anim 0.5s; /* Firefox */
    -webkit-animation: sub-menu-anim 0.5s; /* Safari and Chrome */
    -o-animation: sub-menu-anim 0.5s; /* Opera */
}

#primaryNav li.menu-item ul.sub-menu ul.sub-menu {
    animation:none;
    -moz-animation:none; /* Firefox */
    -webkit-animation:none !important; /* Safari and Chrome */
    -o-animation:none; /* Opera */
}

#primaryNav li#menu-item-17 ul.sub-menu {
    animation:sub-menu-anim-prod 0.5s;
    -moz-animation: sub-menu-anim-prod 0.5s; /* Firefox */
    -webkit-animation: sub-menu-anim-prod 0.5s; /* Safari and Chrome */
    -o-animation: sub-menu-anim-prod 0.5s; /* Opera */
}

#primaryNav li#menu-item-229 ul.sub-menu {
    animation:sub-menu-anim-health 0.5s;
    -moz-animation: sub-menu-anim-health 0.5s; /* Firefox */
    -webkit-animation: sub-menu-anim-health 0.5s; /* Safari and Chrome */
    -o-animation: sub-menu-anim-health 0.5s; /* Opera */
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:21:18.450

问题似乎出在您调用动画的位置。我更改了您的 CSS 选择器以在悬停时执行此操作（以便每次悬停时都会发生动画）并对`-moz-animation`属性进行了调整以包含更多值，为此：

```
#primaryNav li#menu-item-17:hover > ul.sub-menu {
    animation:sub-menu-anim-prod 0.5s;
    -moz-animation: 0.5s ease 0s normal none 1 sub-menu-anim-prod;
    -webkit-animation: sub-menu-anim-prod 0.5s; /* Safari and Chrome */
    -o-animation: sub-menu-anim-prod 0.5s; /* Opera */
} 
```

This seems to work. I have checked it in Firefox and Chrome. I also update other selectors to incorporate what I have done above. Please check [this fiddle](http://jsfiddle.net/5Uq86/1/) for the rest of the changes.

# sql - SQL“不是单组组函数”查询时出错

> ID：15512084
> 
> 赞同：1
> 
> 时间：2013-03-19T22:54:44.257
> 
> 标签：sql, oracle

```
SELECT B.TITLE, TO_CHAR(SUM((B.COST*OI.QUANTITY)-OI.PAIDEACH), '$999.99')
AS "Profit"
FROM ORDERS O JOIN ORDERITEMS OI
on o.order# = oi.order#
JOIN BOOKS B ON OI.ISBN = B.ISBN
WHERE O.ORDER# = 1002; 
```

## 目标

确定在订单 1002 上购买的图书产生的总利润金额。显示书名和利润。利润的格式应显示一个美元符号和两位小数。考虑到客户可能不会支付全部零售价，并且订购的每件商品都可能涉及多份。

## 问题

因此，当尝试运行上述代码时，我收到错误*"not a single-group group function"*。我已经尝试将整个语句`order#`和标题分组，尽管当我这样做时，我得到错误*"FROM keyword not found where expected"*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:57:06.777

那么你的问题的一部分是你错过了这个`GROUP BY`条款：

```
SELECT B.TITLE, 
  TO_CHAR(SUM((B.COST*OI.QUANTITY)-OI.PAIDEACH), '$999.99') AS "Profit"
FROM ORDERS O 
JOIN ORDERITEMS OI
  on o.order# = oi.order#
JOIN BOOKS B 
  ON OI.ISBN = B.ISBN
WHERE O.ORDER# = 1002
GROUP BY B.TITLE; 
```

无论何时使用聚合函数，都需要为`GROUP BY`选择列表中但不在聚合函数中的列包含 a。所以你必须在`GROUP BY B.TITLE`你的查询中添加一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T22:56:49.953

您的 select 子句中有一个 sum() 并且没有 group by 子句。这导致您的查询崩溃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T22:57:14.463

你需要一个`group by`子句：

```
SELECT B.TITLE, TO_CHAR(SUM((B.COST*OI.QUANTITY)-OI.PAIDEACH), '$999.99')
AS "Profit"
FROM ORDERS O JOIN ORDERITEMS OI
on o.order# = oi.order#
JOIN BOOKS B ON OI.ISBN = B.ISBN
WHERE O.ORDER# = 1002
group by b.title 
```

出现您的问题是因为该`select`子句中有 a `sum()`。这表明聚合查询。如果没有`group by`，SQL 假定将返回一行。但是，您有一个`b.title`未聚合的字段 - 因此出现错误。

# three.js - 动态修改几何后，ray.intersectObjects 未正确相交

> ID：15512089
> 
> 赞同：2
> 
> 时间：2013-03-19T22:55:09.967
> 
> 标签：three.js

在我动态修改对象的几何形状之前，我的 ray.intersectObjects 与场景中的对象配合得非常好。尽管渲染器将对象显示为正在修改（移动顶点和更改面），但当在修改后的对象上尝试相交时，会产生奇怪的结果。即使在修改后的几何图形上，我也需要相交！

为了帮助调试和跟踪相交在我的场景中的工作方式，我添加了一个函数：makeMiniSphere()。这会在场景中的交叉点处创建一个新的球体对象。使用这个，您可以看到在修改立方体后，有时相交会碰到立方体，有时会直接穿过（主要是已修改的面）。这不是一个随机问题，但是您在修改后的立方体周围单击的次数越多，您就越能看到一种模式的发展。几乎就好像场景视觉效果的渲染器知道立方体被修改的方向，但是 ray.intersectObjects 认为它​​已经在不同的方向修改了！

这是测试网站的链接：[http ://www.littledrop.net/html/cadiverse/HelloWorld.html](http://www.littledrop.net/html/cadiverse/HelloWorld.html)

显示问题的方向：

1.  左键单击立方体以显示相交点。只要 Three.js 看到相交，就会创建迷你球体。如果尚未选择，所选对象的颜色将变为黄色。

2.  单击立方体的任何面。这将 A. 如果它还不是黄色，则将其变为黄色。B. 它将选择立方体的面，尽管所选面看起来与立方体的其余部分没有任何不同。

3.  按“右”箭头键将选定的面向右移动。这将动态改变立方体的几何形状。

现在尝试点击立方体——尤其是在它被修改的区域。Mini spheres 将再次显示软件认为相交发生的位置。

这是相交代码：

```
function onDocumentMouseDown (event)
{
// the following line would stop any other event handler from firing
// (such as the mouse's TrackballControls)
//event.preventDefault();   
mouse.x = ( event.clientX / window.innerWidth ) * 2 - 1;
mouse.y = - ( event.clientY / window.innerHeight ) * 2 + 1;
document.getElementById('message1').innerHTML = window.innerHeight;
var isinworkingarea = window.innerHeight-menubarh;

if (event.clientY<=isinworkingarea)
{
    var vector = new THREE.Vector3( mouse.x, mouse.y, 1 );
    projector.unprojectVector( vector, camera );
    //var ray = new THREE.ReusableRay();
    var ray = new THREE.Raycaster( camera.position, vector.sub( camera.position ).normalize() );
    // create an array containing all objects in the scene with which the ray intersects
    //  use this to select anything in the scene: 
    var intersects = ray.intersectObjects( scene.children );
    if ( intersects.length > 0 )
    {
        if (cadjectNow)
            cadjects[cadjectNow].material.color.setHex(cadjects[cadjectNow].oldColor);
        if (intersects[0].object.cadNum)                                                
            cadjectNow = intersects[0].object.cadNum;
        SELECTEDface=intersects[0].face;
        if (cadjectNow)
            cadjects[cadjectNow].material.color.setHex( selectColor );
        document.getElementById('message1').innerHTML = cadjects[cadjectNum].cadNum;

        ///// Information about selected /////
        var facestring = intersects[0].face.a  + " " + intersects[0].face.b + " " + intersects[0].face.c;
        if(intersects[0].face instanceof THREE.Face4) 
        {
            facestring=facestring + " " + intersects[0].face.d;
        }

        copyGeometry=cadjects[cadjectNow].geometry;
        //makeCopy(copyGeometry,cadjects[cadjectNow].position.x,cadjects[cadjectNow].position.y,cadjects[cadjectNow].position.z);
        makeMiniSphere(intersects[0].point.x, intersects[0].point.y, intersects[0].point.z);

        document.getElementById('message1').innerHTML = facestring;
        //document.getElementById('message2').innerHTML = cadjects[cadjectNow].geometry.vertices[SELECTEDface.a].x + " " + cadjects[cadjectNow].geometry.vertices[intersects[0].face.a].y + " " + cadjects[cadjectNow].geometry.vertices[intersects[0].face.a].z;
        document.getElementById('message2').innerHTML = intersects[0].point.x + " " + intersects[0].point.y + " " + intersects[0].point.z;

    }
}
} 
```

下面是修改代码：

```
if ( keyboard.pressed("right"))
{
    document.getElementById('message1').innerHTML = mouseMode;
    cadjects[cadjectNow].geometry.vertices[SELECTEDface.a].x+=10;
    cadjects[cadjectNow].geometry.vertices[SELECTEDface.b].x+=10;
    cadjects[cadjectNow].geometry.vertices[SELECTEDface.c].x+=10;
    if(SELECTEDface instanceof THREE.Face4) 
    {
        cadjects[cadjectNow].geometry.vertices[SELECTEDface.d].x+=10;
    }
    cadjects[cadjectNow].geometry.verticesNeedUpdate = true;
    cadjects[cadjectNow].geometry.elementsNeedUpdate = true;
    cadjects[cadjectNow].geometry.normalsNeedUpdate = true;
} 
```

感谢所有发布过去问题并给出答案的人。通过仔细阅读过去的问题，我已经能够做到这一点——所以你们已经提供了很大的帮助。在此先感谢您的帮助。（因为这是我在这里发布的第一个问题，所以任何关于如何更好地提出问题的建议也非常受欢迎。）

更新（2013 年 3 月 21 日）——我已按照建议迁移到 r57，更新后的代码如上所示。我还对其进行了调试，使其至少可以像以前一样工作。所以现在几何图形仍然在视觉上动态地改变，但是相交没有正确检测到变化。感谢@WestLangley 迄今为止的鼓舞人心的帖子。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T22:33:44.353

现在工作正常。这是我的做法（感谢 Westlangley 的指导）。

1.  将 Three.js 升级到最新版本（r57 从 r49）。
2.  迁移我当前的代码以使用 r57。
3.  删除所有以前尝试更新对象的代码。
4.  在“修改对象”部分添加了以下代码：

    cadjects[cadjectNow].geometry.verticesNeedUpdate = true; cadjects[cadjectNow].geometry.normalsNeedUpdate = true; cadjects[cadjectNow].geometry.computeFaceNormals(); cadjects[cadjectNow].geometry.computeVertexNormals(); cadjects[cadjectNow].geometry.computeBoundingSphere();

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-14T10:59:49.037

我在修改后的 BufferGeometry 时遇到了类似的问题。

我通过调用`geometry.computeBoundingSphere()`并`geometry.computeBoundingBox()`在使用顶点位置修改数组后使光线投射工作。

`verticesNeedUpdate`不需要设置。

运行 r112。

# asp.net-mvc - 使用 Automapper 将多个模型映射到 ViewModel

> ID：15512091
> 
> 赞同：0
> 
> 时间：2013-03-19T22:55:28.873
> 
> 标签：asp.net-mvc, model, viewmodel

假设我有两个模型，我的视图需要从中获取信息。我正在使用 automapper 将每个模型的部分映射到单个 ViewModel 中。这是好习惯吗？如果没有，我还有什么其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T01:05:45.793

如果可以的话，你应该多放一点代码。但是为什么你需要为此使用自动映射器呢？我认为应该直截了当。

```
public class ModelA
{
    [stuff via automapper?]
}
public class ModelB
{
    [stuff via automapper?]
}
public class HappyViewModel
{
    public ModelA ModelA { get; set; }
    public ModelB ModelB { get; set; }
} 
```

控制器

```
public ActionResult Index()
{
    var model = new HappyViewModel();
    model.ModelA = [populate me]
    model.ModelB = [populate me]
    return View(model)
} 
```

看法

```
@model HappyViewModel
Model.ModelA.[stuff]
Model.ModelB.[stuff] 
```

# ajax - Django -Ajax 请求错误：未找到

> ID：15512092
> 
> 赞同：0
> 
> 时间：2013-03-19T22:55:36.373
> 
> 标签：ajax, django, jquery, django-views

我正在尝试创建一个 ajax 函数，当调用它时将信息返回到新创建的模式，你能帮我找出问题所在吗？，每当我尝试访问有问题的 URL 时，我都会收到错误“未找到”，如下我添加了我的终端和所有相关文件的屏幕截图。

视图.py

```
@require_POST()
def form_create(request, model):
  if request.method == "POST": 
    return HttpResponse("the model requested is") 
```

网址.py

```
url(r'^forms/(?P<model>[\W-]+)/$','.views.form_create'), 
```

html模板中的Ajax调用

```
$.ajax({
     url: "/forms/"+model+"/",
     type: "POST",
     cache: false,
     success: 
         function(result){
             $("#myModalLabel").html(result);
             $("#companyModal").modal("show");  
             },
     error: 
         function(xhr){
             alert("Error: " + xhr.statusText);
             return false;
             }
     }); 
```

![在此处输入图像描述](../Images/02136e3bcae03f1e458c31c01205d3e5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:58:59.613

`\W`（大写）匹配任何***非****字母数字*字符。您可能应该使用与任何*字母数字*`\w`字符匹配的（小写）。

 *网址.py

```
url(r'^forms/(?P<model>[\w-]+)/$','.views.form_create'), 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:55:26.617

```
 $.ajax({
     url: "/forms/"+model+"/",
     type: "POST",
     cache: false,
     data: { 'csrfmiddlewaretoken': '{{csrf_token}}' }, 
     success: 
         function(result){
             $("#myModalLabel").html(result);
             $("#companyModal").modal("show");  
             },
     error: 
         function(xhr){
             alert("Error: " + xhr.statusText);
             //alert(xhr.responseText) --> to get the full details of error
             return false;
             }
     }); 
```*

# html - 4 图像并排占据浏览器窗口的整个宽度

> ID：15512093
> 
> 赞同：1
> 
> 时间：2013-03-19T22:55:37.123
> 
> 标签：html, image, side-by-side

我有 4 个图像（宽度和高度都相同）并排显示在网页的最顶部，但诀窍是需要`$(window).width()`在 jQuery 中占据整个浏览器的宽度。

我的问题是：

首先，这可能吗？

如果是这样：

1.  对于所有浏览器宽度（或大多数浏览器宽度）执行此操作的最佳方法是什么？
2.  应该是 1 张图片而不是 4 张图片吗？
3.  任何一种方式的优点/缺点是什么（1 图像与 4 图像，反之亦然）？
4.  我是否必须使用 jQuery 或其他语言来计算屏幕宽度并为每个不同尺寸的屏幕宽度加载不同尺寸的图像？或者这可以用原生的 CSS 来完成吗？
5.  建议在所有 4 张图像上使用什么宽度尺寸，或者如果我将这些图像设为 1 张图像，建议使用什么宽度？

注意：我不想将图像拉伸得更宽，因为这会导致它看起来失真，但是如果我有大图像并将它们缩小，那么它会影响页面的负载（降低性能）。如何做到这一点，这样我就不必在外观和/或性能上做出任何牺牲？如果可能的话，我也希望它在手机中看起来正确......但这不是一个重要的优先事项，但如果可能的话会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:23:53.420

图像需要设置为父元素宽度的 50%。在我的示例中，父元素是主体：

```
<img class='half-width-img' src='http://wallpapers.free-review.net/wallpapers/42/Big_wave.jpg'/>
<img class='half-width-img' src='http://wallpapers.free-review.net/wallpapers/42/Big_wave.jpg'/>
<img class='half-width-img' src='http://wallpapers.free-review.net/wallpapers/42/Big_wave.jpg'/>
<img class='half-width-img' src='http://wallpapers.free-review.net/wallpapers/42/Big_wave.jpg'/> 
```

CSS：

```
.half-width-img{
width:25%;
height:auto;
float:left;
}
html,body{
margin:0 0 0 0;
padding:0 0 0 0;
} 
```

[http://jsfiddle.net/j7L4h/2/](http://jsfiddle.net/j7L4h/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T23:16:45.010

如果您担心可扩展性，我会建议，如果可能的话，将 4 个图像变成 1 个图像。然后，您还可以指定图像的尺寸，这有助于加载时间，因为浏览器不必计算每个图像的尺寸（如果您给它宽度大小的百分比，它需要这样做）。如果这是针对某种背景，也许，以这样的方式编辑最后一个图像，当浏览器扩展到比图像尺寸更大的宽度时，它会永远重复（例如 CSS 中的背景重复）......

# php - 输入到 txt 文件，txt 文件到列表元素

> ID：15512100
> 
> 赞同：1
> 
> 时间：2013-03-19T22:55:57.453
> 
> 标签：php, file-handling

我是 PHP 新手，并且有一个关于如何`.txt`使用带有按钮的表单将信息附加到文件的问题`type="button"`，附加应该在文件中`;`分开。`.txt`有人可以帮助我完成从表单到`.txt`文件的附加吗？

（每次您填写表格并将信息附加到`.txt`文件时，都应在表格旁边创建一个列表元素，并且只包含从`.txt`文件中获取的前两个输入元素的信息）。表格如下所示：

```
<?php
    include("header.php");
?>

        <form id="info" method="post" action="">
                <p id="formrubrik">Add information here:</p><br/>
                <p>Title:</p>
                <textarea class="field" id="title" name="names" rows="1" cols="20"></textarea><br/><br/>
                <p>Grade</p>
                <select class="field" name="grade" id="star">
                    <option value="0">Choose grade...</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select><br/><br/>

                <p>Link:</p>
                <textarea class="field" id="link" name="links" rows="1" cols="20"></textarea><br/><br/>

                <p>Photo link:</p>
                <textarea class="field" id="picture" name="photo" rows="1" cols="20"></textarea><br/><br/>

                <p>Description:</p>
                <textarea class="field" id="handling" name="description" rows="3" cols="20"></textarea><br/><br/>

                <button value="0" id="add" type="submit">Save</button><br/>

            </form>

            <div id="list_elements">

                <ul id="elements">
                </ul>

            </div>

<?php
    include("footer.php");
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T23:30:49.270

你的表格有太多问题

A. 无表单操作`action="yourfile.php"`

B.`button`设置类型`button`而不是`submit`

C. 没有验证

D. 在尝试写入之前不检查数据是否已发布

太多的事情是错误的，为什么不从学习`PHP`将数据附加到文件的基本原则开始，可以使用[file_put_contents](http://php.net/manual/en/function.file-put-contents.php)简单地完成：

```
file_put_contents($myFile, $data . PHP_EOL, FILE_APPEND); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T23:37:06.487

这是一个小表单，将您发布的数据提交到文本文件中，通过分隔它们`;`，但与您的需求不同，我使用`type='submit'`而不是`..='button'`as，我一直认为按钮[不会](https://stackoverflow.com/a/290221/1640606)将数据提交到表单中，完全用 PHP。

```
<?php 

if(isset($_POST['button'])) {

    $myFile = "example.txt";
    $fh = fopen($myFile, 'a') or die("can't open file");
    $stringData = $_POST['button']. ' ; ';
    fwrite($fh, $stringData);

    fclose($fh); 

} 
```

如果要检查用户是否提交了数据，可以使用此示例。

```
<?php 

if(isset($_POST['button'])) {

    $data = $_POST['info'];

    if(!empty($date) && isset($date))
   { $myFile = "example.txt";
     $fh = fopen($myFile, 'a') or die("can't open file");

     fwrite($fh, $stringData);
     fclose($fh); 

   } else {
  echo 'the data you have entered is empty, please enter again.';
    } 
```

# html - couchDB：下载列表查询结果作为附件

> ID：15512101
> 
> 赞同：0
> 
> 时间：2013-03-19T22:56:11.870
> 
> 标签：html, jquery, couchdb, couchapp

我有一个生成 csv 文件的列表。查询很简单，如果从链接中查询，它会将响应下载为附件（前提是发送了正确的标头）。

但是，我需要发布大量动态生成的数据（键数组）。它太大了，无法附加到 url，我需要将数据作为数据发布。

我通常的ajax查询是：

```
$.ajax({
type: 'POST',
dataType: 'text',
url: '/' + treatmentDatabaseString + '/_design/webview/_list/treatmentTable/treatmentTable?include_docs=true'
data: JSON.stringify({
    'keys': keys    // DATA THAT NEEDS TO BE POSTED
}),
error: function(status) {
    alert('db error (keyed): ' + JSON.stringify(status));
},
success: function(data) {   
//  ..do stuff
}           
}); 
```

有什么方法可以更改链接以发布此数据？或任何其他方式我可以将此查询的结果作为附件下载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-23T18:08:18.623

如果传入的数据应该是 JSON，则需要在调用中设置`contentType`为。`application/json``ajax`

# uitableview - 如何在 Xcode 中存储来自 UITableView 的单元格内容？

> ID：15512104
> 
> 赞同：0
> 
> 时间：2013-03-19T22:56:19.823
> 
> 标签：uitableview

我正在寻求能够选择一个共享名称并购买我选择的这个共享。（即在投资组合中存储共享的名称）到目前为止，我使用以下代码来选择共享的名称：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *selectedCell = [tableView cellForRowAtIndexPath:indexPath];
    NSString *cellText = selectedCell.textLabel.text;
} 
```

我希望表格单元格中的内容显示在标签中，然后可以选择将其存储在我的投资组合中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T23:44:58.517

我认为最简单的方法是使用免费的 Sensible TableView 框架。该框架提供开箱即用的选择功能，并将自动保存您的选择。

# eclipse - Eclipse 快速修复“我感觉很幸运”

> ID：15512105
> 
> 赞同：0
> 
> 时间：2013-03-19T22:56:21.000
> 
> 标签：eclipse

我绝对**喜欢**Eclipse 的`Quick Fix`功能。

它非常有用，非常聪明，实现得非常好..就我而言，它可以使用“最后的细微之处”：*“我感觉很幸运”*的捷径。

如果`COMMAND/CTRL 1`给我一个快速修复菜单供我选择.. 我想要类似的东西`COMMAND/CTRL SHIFT 1`（我需要为此考虑一个适当的快捷方式）立即选择第一个（最有可能是正确的）修复并为我实施。

我是否可以使用允许自定义键盘快捷键的现有功能做到这一点？

这是受到当前对选项的猜测和排序有多*好的启发。*这对我来说太好了，以至于*大多数时候*我都想选择最佳选择。我认为任何可以通过 COMMAND/CTRL Z 撤消的*“我感觉很幸运”*都是一键完成的好选择？当然，我会排除引发“选择对话框”的更改，例如预览具有潜在不利副作用的源代码更改..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T06:20:06.833

这对于 Eclipse 内置工具是不可能的。有一些解决方法，可能适合您的需求：

*   当您点击您选择的组合时，使用某种键盘宏工具（独立于 Eclipse）来播放`Ctrl``1`,序列。`Enter`
*   一些快速修复可以在 Eclipse 的键盘首选项中分配一个键盘快捷键。所以你可以直接选择某些快速修复（但不是最重要的建议）。
*   一些快速修复也可用作保存操作（例如“组织导入”）。您应该在保存操作中激活所有这些操作，因为您可以通过保存文件来运行它们。

# java - 如何在 ArrayList 中搜索最少数量和最短持续时间？

> ID：15512109
> 
> 赞同：-2
> 
> 时间：2013-03-19T22:56:30.437
> 
> 标签：java, arrays, arraylist, foreach, max

我有3节课。我正在学习接口和接口类 TravelCost 必须具有公共抽象以及方法类型和名称，以便它在所有三个类中都是一致的。这三个类（AirTravelCost、TrainTravelCost、CarTravelCost）将实现 TravelCost。我已经完成了所有设置并经过测试可以正常工作。但是，我假设的测试页面是您通过 arrayList 输入搜索以获取最低成本和最短持续时间的地方。我不知道该怎么做，因为我以前从未在 ArrayList 中这样做过。这里是测试类中的示例代码：

```
import java.util.*;

 public class TestTravelCost
 {
   public static void main(String [] args)
   {
    /*Scanner scn = new Scanner(System.in); //scanner object

    System.out.println("Number of Miles: ");
    double numOfMiles = scn.nextDouble();

    System.out.println("Hotel cost per night: ");
    double cost = scn.nextDouble();

    System.out.println("Description: ");
    String description = scn.nextLine();*/

    TravelCost c = new CarTravelCost(400, 200, "Boston");//instantiate object for car travel
    TravelCost t = new TrainTravelCost(6, 60.0, "Boston"); //instantiate object for train travel
    TravelCost a = new AirTravelCost(224, "20110103", "0743" , "20110103", "1153", "Boston");//instantiate object for air travel

    ArrayList<TravelCost> AL = new ArrayList<TravelCost>();//array list for car travel
    AL.add(c);
    AL.add(t);
    AL.add(a);

    for(TravelCost tc : AL)
    {
        System.out.println(tc.toString());
    }
   }
} 
```

输出：到波士顿的汽车旅行需要 7.2727272727272725 小时和成本 210.0
到波士顿的火车旅行需要 6.0 小时和成本 70.0
到波士顿的航空旅行需要 1.0166666666666666 和成本 243.48888888888888 //这不是正确的计算，我不知道我在哪里'错了，但它假设与最短持续时间相同。我想我不擅长数学。

这是我用于航空旅行的计算方法

```
 public double getDuration()
{
    //---DEPARTURE---//
    int Dyear = Integer.parseInt(departureDate.substring(0,3)); //2011
    int Dmonth = Integer.parseInt(departureDate.substring(4,5));//01
    int Dday = Integer.parseInt(departureDate.substring(6,7));//03

    int Dhour = Integer.parseInt(departureTime.substring(0,1));//0743
    int Dminute = Integer.parseInt(departureTime.substring(2,3));//1153
    //---ARRIVAL---//
    int Ayear = Integer.parseInt(arrivalDate.substring(0,3)); //2011
    int Amonth = Integer.parseInt(arrivalDate.substring(4,5));//01
    int Aday = Integer.parseInt(arrivalDate.substring(6,7));//03

    int Ahour = Integer.parseInt(arrivalTime.substring(0,1));//0743
    int Aminute = Integer.parseInt(arrivalTime.substring(2,3));//1153

    GregorianCalendar date = new GregorianCalendar(Dyear, Dmonth, Dday, Dhour, Dminute);//departure date & time
    GregorianCalendar time = new GregorianCalendar(Ayear, Amonth, Aday, Ahour, Aminute);//arrival date & time

    //date = arrivalDate - departureDate;//2011-01-03 - 2011-01-03 = 0
    //time = arrivalTime - departureTime;//0734 - 1153 = 410

    double duration = (Math.abs(date.getTimeInMillis() - time.getTimeInMillis()) / 60000.0) / 60.0;
    return duration;
  `enter code here` } 
```

如何在我的代码中得到这个结果？

最低成本：到波士顿的火车旅行需要 11.0 小时，费用为 70.0最短时间
：到波士顿的航空旅行需要 4.166666666666667 小时，费用为 234.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T23:27:22.687

你没有显示`TravelCost`界面，但要实现你想要的，它至少应该有一个 getDuration 和 getCost 方法。

```
public interface TravelCost {
    ... // what you already have in the interface definition
    public double getDuration();
    public double getCost();
} 
```

有了这个，我会创建一个小的虚拟类来实现这些属性的可比性：

```
public DummyTC implements TravelCost {
    private double cost;
    private double duration;

    public DummyTC(double cost, double duration) {
        this.cost = cost;
        this.duration = duration;
    }

    public double getDuration() {
        return duration;
    }

    public double getCost() {
        return cost;
    }

    // and other methods/properties imposed by TravelCost
} 
```

这将允许您找到您要查找的内容：

```
// instantiate 2 DummyTC's with impossibly high cost &durations

TravelCost cheapest = new DummyTC(99999999999.99, 99999999999.99);
TravelCost shortest = new DummyTC(99999999999.99, 99999999999.99);

// iterate over the List

for(TravelCost tc : AL) {
    // if present tc is cheaper than cheapest, swap
    if ( tc.getCost() < cheapest.getCost() ) {
        cheapest = tc;
    }
    // if present tc is shorter than shortest, swap
    if ( tc.getDuration() < shortest.getDuration() ) {
        shortest = tc;
    }
}

// at this point cheapest and shortest will contain the cheapest and shortest 
// ways of transportation, so we print them out.

System.out.println(cheapest.toString());
System.out.println(shortest.toString()); 
```

另一件事是，您的日期处理代码非常复杂。看看[SimpleDateFormat](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)

```
Date date = null;
Date time = null;
// create a SimpleDateFormat instance for your time/date format
SimpleDateFormat format = new SimpleDateFormat("yyyyMMdd");
try {
    // parse it
    date = format.parse(departureDate);
    // done
} catch (ParseException e) {
    // departureDate could not be parsed, you should handle that case here
}

try {
    // parse it
    time = format.parse(arrivalTime);
    // done
} catch (ParseException e) {
    // arrivalTime could not be parsed, you should handle that case here
} 
```

由于 Date 还有一个[获取 epoch-millis 的例程，](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html#getTime%28%29)您可以继续使用已有的代码，尽管`long`在这种情况下 a 可能是比 double 更好的返回类型。

# java - Java生产者/消费者线程——通过等待停止线程执行

> ID：15512117
> 
> 赞同：0
> 
> 时间：2013-03-19T22:57:12.623
> 
> 标签：java, android, multithreading, producer-consumer

我的 Android 应用程序中有两个线程，它们实际上是生产者/消费者关系；生产者线程（Thread 的子类）用对象填充缓冲区，消费者线程（AsyncTask 的子类）在该缓冲区上操作。从[这里](http://docs.oracle.com/javase/tutorial/essential/concurrency/guardmeth.html)的 Java 保护锁并发教程中，我收集到我可以使用“第三方”线程来协调这个交换，但理想情况下，我希望能够通过调用等待来关闭消费者线程本身，因为它唯一真正的任务是在缓冲区被生产者填充后对其进行操作。当且仅当生产者完成完全填充缓冲区时，生产者将通过调用 notify 或 notifyAll 将其唤醒。为了促进这一点，我分别为我的消费者和生产者进行了以下配置：

消费者.java

```
public class Consumer extends AsyncTask<Object,Integer,Object>{
private String TAG = "Consumer";
private String SUBCLASS_TAG = "";
private String FUNCTION_TAG = "";
private int UUID = MasterSemaphore.getAndIncrementUuidTracker();

public synchronized void getMonitorForNotification(){
FUNCTION_TAG = "::getMonitorForNotification";
while(MasterSemaphore.getIsBufferingMap().get(UUID)){
try {
Log.i(TAG+SUBCLASS_TAG+FUNCTION_TAG, "about to wait...");
  wait();
} catch (InterruptedException e) {
  e.printStackTrace();
  }
}
FUNCTION_TAG = "::getMonitorForNotification";
Log.i(TAG+SUBCLASS_TAG+FUNCTION_TAG, "Received notification!");
}

@Override
protected Object doInBackground(Object... bgTaskResources) {
Producer hProducer = (Producer)bgTaskResources[0];
//The next call is supposed to freeze this thread's execution via an invocation
//of wait-- see the Producer::populateBuffer(...) method
hProducer.populateBuffer(5,this); 
//...handle other AsyncTask callbacks 
```

生产者.java

```
//..snip 

public synchronized int populateBuffer(int numElements, Consumer externalTaskCaller){
TAG = "Producer"
SUBCLASS_TAG = "";
FUNCTION_TAG = "::populateBuffer";

//First set the bufferingMap over the external caller's UUID to true
MasterSemaphore.getIsBufferingMap().put(externalTaskCaller.getUUID(), true);
Log.i(TAG+SUBCLASS_TAG+FUNCTION_TAG, "just set "+externalTaskCaller.getUUID()+" Key in
the bufferingMap to true");

//Next acquire the monitor of the external caller, and tell it to wait for notification
externalTaskCaller.getMonitorForNotification();
Log.i(TAG+SUBCLASS_TAG+FUNCTION_TAG, "just acquired a monitor lock on 
externalCaller"+externalTaskCaller.toString()+", hopefully");

int elementsProduced = 0;

for (int i=0;i<numElements;i++){
mvElemVector.add(new Element());
Log.i(TAG+SUBCLASS_TAG+FUNCTION_TAG, "just created element number "+i+" of 
    "+numElements);
elementsProduced++;
}

if(externalTaskCaller != null){
MasterSemaphore.getIsBufferingMap().put(externalTaskCaller.getUUID(), false);
Log.i(TAG+SUBCLASS_TAG+FUNCTION_TAG, "just set "+externalTaskCaller.getUUID()+" Key
    in the bufferingMap to false since our buffer writing is done");
externalTaskCaller.notifyAll();
Log.i(TAG+SUBCLASS_TAG+FUNCTION_TAG, "just notified the external caller 
    "+externalTaskCaller.toString());
}

return threadsProduced;

}

//..snip 
```

当我对此功能运行单元测试时看到的结果（基本上只是创建并启动生产者线程，然后创建并执行消费者任务）仅返回日志条目：

```
01-02 09:01:53.530: I/Producer::populateBuffer(21932): just set 0 Key in the
bufferingMap to true
01-02 09:01:53.530:I/Consumer::getMonitorForNotification(21932): about to wait... 
```

就是这样......所以我们要

```
externalTaskCaller.getMonitorForNotification(); 
```

但永远达不到

```
Log.i(TAG+SUBCLASS_TAG+FUNCTION_TAG, "just acquired a monitor lock on 
externalCaller"+externalTaskCaller.toString()+", hopefully"); 
```

我的等待通知实现有什么问题？是否需要像链接教程中的 Drop 对象这样的“第三方”对象来协调生产者/消费者交换？

# oracle - 将 DBD::Oracle 与 Instantclient 11.2 一起使用时出错

> ID：15512119
> 
> 赞同：1
> 
> 时间：2013-03-19T22:57:21.453
> 
> 标签：oracle, perl, cpan, instantclient

我想在 Mac OS X 10.8 上使用 perl 模块 DBD::Oracle。我通过 CPAN 安装了 DBI。下载了 Oracle 即时客户端 11.2（basic、sqlplus 和 jdk）。将其解压缩到 /usr/local/oracle。

```
$ ls /usr/local/oracle/instantclient_11_2/
BASIC_README        libnnz11.dylib      ojdbc6.jar
SQLPLUS_README      libocci.dylib.11.1  sdk
adrci           libociei.dylib      sqlplus
genezi          libocijdbc11.dylib  uidrvci
glogin.sql      libsqlplus.dylib    xstreams.jar
libclntsh.dylib     libsqlplusic.dylib
libclntsh.dylib.11.1    ojdbc5.jar 
```

然后安装 DBD::Oracle。现在，当我想使用 DBD::Oracle 时，它​​会出错。

```
install_driver(Oracle) failed: Can't load '/Library/Perl/5.12/darwin-thread-multi- 
2level/auto/DBD/Oracle/Oracle.bundle' for module DBD::Oracle: 
dlopen(/Library/Perl/5.12/darwin-thread-multi-2level/auto/DBD/Oracle/Oracle.bundle, 1): 
Library not loaded: /ade/b/2649109290/oracle/rdbms/lib/libclntsh.dylib.11.1
Referenced from: /Library/Perl/5.12/darwin-thread-multi-  
2level/auto/DBD/Oracle/Oracle.bundle
Reason: image not found at /System/Library/Perl/5.12/darwin-thread-multi-    
2level/DynaLoader.pm line 204. 
```

我有 DYLD_LIBRARY_PATH=/usr/local/oracle/instaclient_11_2 我不知道我做错了什么。

已解决：我在尝试运行 sqlplus 时遇到了同样的错误。我将我的 oracle 客户端目录添加到我的全局 PATH 变量中，它现在正在工作。

看到他们在本教程中做了同样的事情：[http ://www.janhellevik.no/?p=521](http://www.janhellevik.no/?p=521)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T06:27:16.487

看看这个：[perl DBD::Oracle Module installtion](https://stackoverflow.com/questions/11407513/perl-dbdoracle-module-installtion/)

以上信息是关于 Linux 环境的。但是你可能会得到一些关于如何`DBD::Oracle`在 MAC OSX 上进行配置的线索。

在 linux 上，您需要oracle 即时客户端的**“Basic、SQLPLUS 和 Devel”**二进制文件。这是我的 Linux 机器上的目录列表：

```
# pwd
/usr/lib/oracle/11.2/client64/lib
# ls -l
total 185232
-rw-r--r-- 1 root root       368 Sep 17  2011 glogin.sql
lrwxrwxrwx 1 root root        17 Jul  9  2012 libclntsh.so -> libclntsh.so.11.1
-rw-r--r-- 1 root root  52761218 Sep 17  2011 libclntsh.so.11.1
-rw-r--r-- 1 root root   7955322 Sep 17  2011 libnnz11.so
lrwxrwxrwx 1 root root        15 Jul  9  2012 libocci.so -> libocci.so.11.1
-rw-r--r-- 1 root root   1971762 Sep 17  2011 libocci.so.11.1
-rw-r--r-- 1 root root 118408281 Sep 17  2011 libociei.so
-rw-r--r-- 1 root root    164836 Sep 17  2011 libocijdbc11.so
-rw-r--r-- 1 root root   1503303 Sep 17  2011 libsqlplusic.so
-rw-r--r-- 1 root root   1477446 Sep 17  2011 libsqlplus.so
-rw-r--r-- 1 root root   2095661 Sep 17  2011 ojdbc5.jar
-rw-r--r-- 1 root root   2714016 Sep 17  2011 ojdbc6.jar
-rw-r--r-- 1 root root    300666 Sep 17  2011 ottclasses.zip
-rw-r--r-- 1 root root     66779 Sep 17  2011 xstreams.jar 
```

这是我安装的 oracle 即时客户端 RPM 的列表：

```
# rpm -qa | grep -i oracle
oracle-instantclient11.2-basic-11.2.0.3.0-1
oracle-instantclient11.2-devel-11.2.0.3.0-1
oracle-instantclient11.2-sqlplus-11.2.0.3.0-1 
```

希望这可以帮助。

# c# - XML 获取特定名称

> ID：15512123
> 
> 赞同：1
> 
> 时间：2013-03-19T22:57:36.830
> 
> 标签：c#, xml, linq, linq-to-xml

我有这个 XML 示例

```
<work>
 <worker name="Jason" job="admin">
 <worker name="Frank" job="employee">
 <worker name="John" job="admin">
<work> 
```

我正在尝试使用作业管理员检索工人姓名。

这是我当前代码的一部分。此代码将检索所有工作人员。

```
Worker = workerElement.Elements("work")
                      .Elements("worker")
                      .Select(c => (string)c.Attribute("name"))
                      .ToArray(); 
```

我一直在尝试以下解决方案

```
Worker = workerElement.Elements("work")
                      .Elements("worker")
                      .Select(c => (string)c.Attribute("name[@job='admin']"))
                      .ToArray(); 
```

我想检索工作“标题”等于管理员的所有名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T23:10:44.153

@Xtian 的解决方案是正确的。这是 XPath 解决方案：

```
var workers = workerElement.XPathSelectElements("//worker[@job='admin']")
                           .Select(w => (string)w.Attribute("name")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T23:06:54.377

首先你的xml有一些错误，我在下面更正了：

```
<work>
 <worker name="Jason" job="admin" />
 <worker name="Frank" job="employee" />
 <worker name="John" job="admin" />
</work> 
```

然后，如果您正在尝试使用 Linq，请尝试使用：

```
Worker = workerElement.Elements("work")
                      .Elements("worker")
                      .Where(c => (string)c.Attribute("job") == "admin")
                      .Select(c => (string)c.Attribute("name"))
                      .ToArray(); 
```

或者，如果您使用的是 XPath，您可以使用：

```
var admins = workerElement.XPathSelectElements("//worker[@job='admin']")
             .Select(w => (string)w.Attribute("name")); 
```

# windows-xp - Xcopy 复制文件的内容，但将目录排除在外

> ID：15512126
> 
> 赞同：2
> 
> 时间：2013-03-19T22:57:46.627
> 
> 标签：windows-xp, xcopy

需要 xcopy 命令的帮助，

我有一个目录结构，想复制其中的一些内容。我正在使用 xcopy 来做同样的事情，但遇到了麻烦。我的目录结构如下。

```
 I:\Foo\             
      |
      |--coo-->c1-->c2
      |--goo-->g1-->g2
      |--boo-->b1-->b2
      |--fow-->f1-->f2 
```

其中又包含子文件夹和文件。我想将 coo 及其所有子文件夹复制到另一个位置，我的 xcopy 命令也是如此，

xcopy I:\Foo\coo e:\temp /e/c/t/h/r/y /s

执行此命令会从 c1-->c2 复制文件夹和子文件夹，但缺少文件夹 coo。

-问候，曼朱

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T23:07:17.153

`xcopy I:\Foo\coo e:\temp`将 coo 的内容复制到 temp 中。如果你想将 coo 复制到 e:\temp\coo，你需要`xcopy I:\Foo\coo e:\temp\coo`（假设 temp 已经存在）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T23:08:14.833

这更多的是用户错误。xcopy 支持源、目标、一些标志和排除列表。

当你使用 时`xcopy I:\foo\coo e:\temp`，你说源内的内容(I:\foo\coo) 应该等于目标内的内容(e:\temp)。所以你需要使用类似的东西：

```
xcopy I:\foo\coo e:\temp\coo 
```

使其包含`coo`文件夹。

# asp.net-mvc - 在视图 (.cshtml) 文件中忽略 Visual Studio 项目模板通配符

> ID：15512131
> 
> 赞同：1
> 
> 时间：2013-03-19T22:58:13.480
> 
> 标签：asp.net-mvc, visual-studio, project-template

我正在为 MVC 4 入门项目创建项目模板。

在任何基于类的普通代码文件中，我可以为 Visual Studio 编写以下语法，以`$safeprojectname$`在创建新项目时使用用户最初提供的项目名称填充此通配符。

```
namespace $safeprojectname$.Models
{
    public class Class1
    {     
        public bool blah { get; set; }
    }
} 
```

但是我的问题是，对于任何视图文件 (*.cshtml)，这些模板通配符根本不会被评估。因此，通配符原始文本不会被替换，而是保留在标记中，这反过来会在运行项目时破坏预处理器逻辑。

视图文件代码的示例。

```
@model $safeprojectname$.Models.NavigationBarModel 
```

有什么解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T20:05:02.263

我最终弄清楚了这一点以及其他一些问题。

生成的 .vstemplate 文件`<ProjectItem>`为导出的模板中包含的每个资源创建一个元素。

默认情况下，视图的`ReplaceParameters`属性需要手动设置为 true，它设置为 false。

```
<Folder Name="Shared" TargetFolderName="Shared">
  <ProjectItem ReplaceParameters="true" TargetFileName="_Layout.cshtml">_Layout.cshtml</ProjectItem>
  <ProjectItem ReplaceParameters="true" TargetFileName="_LoginPartial.cshtml">_LoginPartial.cshtml</ProjectItem>
  <ProjectItem ReplaceParameters="true" TargetFileName="_NavigationBar.cshtml">_NavigationBar.cshtml</ProjectItem>
  <ProjectItem ReplaceParameters="true" TargetFileName="Error.cshtml">Error.cshtml</ProjectItem>
</Folder> 
```

# scheme - 计划媒人中的错误

> ID：15512136
> 
> 赞同：0
> 
> 时间：2013-03-19T22:58:35.413
> 
> 标签：scheme, racket

运行以下代码时，我在结果中的某些地方不断重复`#<procedure:me>`，我不知道为什么。

测试：运行`(match-make men women)`

这是代码：

;;球拍的兼容性

```
(define (write-line x)
  (display x)
  (newline))

(define (append! a b)
  (if (null? (cdr a))
      (set-cdr! a b)
      (append! (cdr a) b))) 
```

; 这将启动配对程序并接受 ; 初始提议者和提议者，重置他们的状态和；将他们送至求爱程序；提案将开始

```
(define (match-make proposers proposees)
  (send proposers 'reset)
  (send proposees 'reset)
  (courtship proposers proposers)
  (zip-together (send proposers 'name)
            (send (send proposers 'intended) 'name))) 
```

; 每个未参与的提议者提议，直到没有 ; 更多未参与的提议者

```
(define (courtship unengaged-proposers proposers)
  (if (null? unengaged-proposers) 
      (display "match-make complete")
      (begin ((car unengaged-proposers) 'propose)
             (courtship (currently-unengaged unengaged-proposers) proposers)))) 
```

; 获取当前未参与人数

```
(define (currently-unengaged list-of-people)
  (filter unengaged list-of-people)) 
```

; 检查一个人是否未参与

```
(define (unengaged person)
  (if (null? (person 'intended))
      #t
      #f)) 
```

; 将给定的消息发送给每个人；在给定的人员列表中

```
(define (send list-of-people message)
  (if (null? list-of-people) 
      '()
      (begin ((car list-of-people) message) 
         (send (cdr list-of-people) message)))) 
```

; 检查两个给定的人；是一对

```
(define (couple? person1 person2)
  (if ((eq? (person1 'intended) person2) #t)
      #t
      #f)) 
```

; 结合两个给定的列表

```
(define (zip-together list1 list2)
  (if (null? list1)
      '()
      (cons (list (car list1) (car list2))
            (zip-together (cdr list1) (cdr list2))))) 
```

; 组合每个为 true 的元素；对于给定的谓词

```
(define (filter pred lst)
  (cond ((null? lst) '())
        ((pred (car lst)) (cons (car lst) (filter pred (cdr lst))))
        (else (filter pred (cdr lst))))) 
```

; 获取两个 (list1) 和另一个的列表；任何长度的列表（list2）并返回；list1 中的两者中的哪一个先出现；在列表 2 中

```
 (define (preference list1 list2)
  (write (list list1 list2))
   (cond ((eq? (car list1) (car list2)) (car list1))
        ((eq? (cadr list1) (car list2)) (cadr list1))
        (else (preference list1 (cdr list2))))) 
```

; 创建具有某些状态的人；以及某些可以调用的消息；在那个人身上。我标记了那些；为问题 1 添加，问题 2 是；任何显示显示和换行符的地方

```
(define (make-person my-name)
  (let ((preference-list '())
       (possible-mates '())
       (current-intended '()))
    (define (i-like-more person1 person2)    ;Problem 1
      (preference (list person1 person2) preference-list)
      (cond ((eq? (car (me 'loves)) person1) #t)
            ((eq? (car (me 'loves)) person2) #f)
            (else (preference (list person1 person2) (cdr preference-list))))) 
    (define (me message)
       (cond ((eq? message 'name) my-name)
            ((eq? message 'intended) current-intended)
            ((eq? message 'loves) preference-list)
            ((eq? message 'possible) possible-mates)
            ((eq? message 'reset)
              (set! current-intended '())
              (set! possible-mates preference-list)
              'reset-done)
            ((eq? message 'load-preferences)
              (lambda (plist)
               (set! preference-list plist)
               (set! possible-mates plist)
               (set! current-intended '())
               'preferences-loaded))
            ((eq? message 'propose)
             (let ((beloved (car possible-mates)))
               (begin 
                 (set! possible-mates (cdr possible-mates))
                 (begin
                    (display (me 'name))
                    (display " proposed to ")
                    (display (beloved 'name))
                    (newline))
                 (if (eq? ((beloved 'i-love-you) me)
                          'i-love-you-too)
                      (begin 
                       (display (me 'name))
                       (display " and ") 
                       (display (beloved 'name)) 
                       (display " are engaged ")
                       (newline)
                       (set! current-intended beloved)
                       'we-are-engaged)
                     (begin 
                       (display "no one loves me") 
                       'no-one-loves-me)))))
             ((eq? message 'i-love-you)   ;Problem 1
              (lambda (proposer)
               (cond 
                  ((null? (me 'intended))
                  (begin 
                     (set! current-intended proposer)
                     (display (me 'intended))
                     (display " says i love you too")
                     (newline)
                     'i-love-you-too))
                  ((i-like-more proposer (me 'intended))
                    (begin 
                      (set! current-intended proposer)
                      (display (me 'intended))
                       (display " dumped ") 
                       (display (me 'intended))
                       (newline)
                  (((me 'intended) 'i-changed-my-mind) me)
                  'i-love-you-too))
              (else (begin 
                (display (me 'intended))
                (display " rejected ")
                (display (me 'name))
                'buzz-off-creep)))))
         ((eq? message 'i-changed-my-mind)
          (lambda (lost-love)
            (cond ((eq? current-intended lost-love)
                   (set! current-intended '())
                   'dumped!)
                  (else 
                   'there-must-be-some-misunderstanding))))
         (else 
          (display "Bad message to a person")
          (newline)
          (list my-name message))))
  me)) 
```

;; 这是一个测试文件

```
(define alan (make-person 'Alan))
(define bob (make-person 'Bob))
(define charles (make-person 'Chuck))
(define david (make-person 'Dave))
(define ernest (make-person 'Ernie))
(define franklin (make-person 'Frank))
(define agnes (make-person 'Agnes))
(define bertha (make-person 'Bertha))
(define carol (make-person 'Carol))
(define deborah (make-person 'Debbie))
(define ellen (make-person 'Ellen))
(define francine (make-person 'Fran))

 ((alan 'load-preferences) 
  (list agnes carol francine bertha deborah ellen))
((bob 'load-preferences) 
  (list carol francine bertha deborah agnes ellen))
((charles 'load-preferences) 
 (list agnes francine carol deborah bertha ellen))
((david 'load-preferences) 
  (list francine ellen deborah agnes carol bertha))
((ernest 'load-preferences) 
  (list ellen carol francine agnes deborah bertha))
((franklin 'load-preferences) 
  (list ellen carol francine bertha agnes deborah))
((agnes 'load-preferences) 
 (list charles alan bob david ernest franklin))
((bertha 'load-preferences) 
 (list charles alan bob david ernest franklin))
((carol 'load-preferences) 
 (list franklin charles bob alan ernest david))
((deborah 'load-preferences) 
  (list bob alan charles franklin david ernest))
((ellen 'load-preferences) 
 (list franklin charles bob alan ernest david))
((francine 'load-preferences) 
 (list alan bob charles david franklin ernest))

(define men (list alan bob charles david ernest franklin))
(define women (list agnes bertha carol deborah ellen francine)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T21:11:33.097

该问题将受益于有关如何使用代码的一些信息，以及对处理人员对象消息的函数的目的和用法的一些评论。

但是，问题似乎是`#<procedure:me>`在程序运行时显示而不是一些预期的字符串。

显示的是返回而不是调用的函数。有几个原因：

1.  该函数`preference`被定义`write`为其第一个参数，即人员对象列表。
2.  在处理消息的代码中，`(write (me 'intended))`用于`(write (me 'name)`或`(write ((me 'intended) 'name)`应该使用的地方。

另外： ，应将`i-like-more`哪些调用定义为`preference`

```
(define (i-like-more person1 person2)                       
   (eq? person1 (preference (list person1 person2) preference-list))) 
```

# ruby-on-rails - Ruby on Rails / PostgreSQL - 启动服务器时未加载库错误

> ID：15512137
> 
> 赞同：7
> 
> 时间：2013-03-19T22:58:41.790
> 
> 标签：ruby-on-rails, macos, postgresql, pg, libpq

嘿嘿。如果这个问题已经在另一个线程中得到回答，我提前道歉。我已经搜索了该网站，但没有找到答案。然而，最接近的相关问题是[Ruby on Rails / PostgreSQL - Library not Loaded error when started server- libq.5.dylib](https://stackoverflow.com/questions/9182645/ruby-on-rails-postgresql-library-not-loaded-error-when-starting-server-libq)，但从未解决，答案对我没有帮助。

我试图让 PostgreSQL 在我的 Mac OSX 10.6.8 上运行。我已经安装了 Ruby 1.9.3p392 和 Rails 3.2.13。

由于我有 10.6.8，而 PostGresApp 需要 10.7+，我尝试使用此处提供的手动安装程序（v9.2.3）安装 PG：[http ://www.enterprisedb.com/products-services-training/pgdownload](http://www.enterprisedb.com/products-services-training/pgdownload)

我首先将它安装到默认路径：/Library/PostgreSQL/9.2/。然后我安装了 pg gem ( `PATH=$PATH:/Library/PostgreSQL/9.2/bin` `sudo gem install pg`)。当我尝试`rails s`启动本地主机时，出现以下错误。

经过一番阅读，我猜测可能是路径错误，所以我删除了 pg gem，然后使用了 postgresql 卸载程序。然后我在 /users/stewartmccoy/Library/PostgreSQL/9.2/... 中重新安装了 pg，然后重新安装了 pg gem。但我仍然得到同样的错误。

关于如何正确安装 PostgreSQL 并让我的 rails 服务器运行的任何想法？

```
stewart-mccoys-macbook:footy_subs stewartmccoy$ rails s
/Users/stewartmccoy/.rvm/gems/ruby-1.9.3-p392/gems/pg-0.14.1/lib/pg.rb:4:in `require': dlopen(/Users/stewartmccoy/.rvm/gems/ruby-1.9.3-p392/gems/pg-0.14.1/lib/pg_ext.bundle, 9): Library not loaded: libpq.5.dylib (LoadError)
  Referenced from: /Users/stewartmccoy/.rvm/gems/ruby-1.9.3-p392/gems/pg-0.14.1/lib/pg_ext.bundle
  Reason: image not found - /Users/stewartmccoy/.rvm/gems/ruby-1.9.3-p392/gems/pg-0.14.1/lib/pg_ext.bundle
    from /Users/stewartmccoy/.rvm/gems/ruby-1.9.3-p392/gems/pg-0.14.1/lib/pg.rb:4:in `<top (required)>'
    from /Users/stewartmccoy/.rvm/gems/ruby-1.9.3-p392@global/gems/bundler-1.3.4/lib/bundler/runtime.rb:72:in `require'
    from /Users/stewartmccoy/.rvm/gems/ruby-1.9.3-p392@global/gems/bundler-1.3.4/lib/bundler/runtime.rb:72:in `block (2 levels) in require'
    from /Users/stewartmccoy/.rvm/gems/ruby-1.9.3-p392@global/gems/bundler-1.3.4/lib/bundler/runtime.rb:70:in `each'
    from /Users/stewartmccoy/.rvm/gems/ruby-1.9.3-p392@global/gems/bundler-1.3.4/lib/bundler/runtime.rb:70:in `block in require'
    from /Users/stewartmccoy/.rvm/gems/ruby-1.9.3-p392@global/gems/bundler-1.3.4/lib/bundler/runtime.rb:59:in `each'
    from /Users/stewartmccoy/.rvm/gems/ruby-1.9.3-p392@global/gems/bundler-1.3.4/lib/bundler/runtime.rb:59:in `require'
    from /Users/stewartmccoy/.rvm/gems/ruby-1.9.3-p392@global/gems/bundler-1.3.4/lib/bundler.rb:132:in `require'
    from /Users/stewartmccoy/Code/footy_subs/config/application.rb:13:in `<top (required)>'
    from /Users/stewartmccoy/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.13/lib/rails/commands.rb:53:in `require'
    from /Users/stewartmccoy/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.13/lib/rails/commands.rb:53:in `block in <top (required)>'
    from /Users/stewartmccoy/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.13/lib/rails/commands.rb:50:in `tap'
    from /Users/stewartmccoy/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.13/lib/rails/commands.rb:50:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>'
stewart-mccoys-macbook:footy_subs stewartmccoy$ gem uninstall pgSuccessfully uninstalled pg-0.14.1
stewart-mccoys-macbook:footy_subs stewartmccoy$ PATH=$PATH:/users/stewartmccoy/Library/PostgreSQL/9.2/bin sudo gem install pg
Password:
Fetching: pg-0.14.1.gem (100%)
Building native extensions.  This could take a while...
Successfully installed pg-0.14.1
1 gem installed
Installing ri documentation for pg-0.14.1...
Installing RDoc documentation for pg-0.14.1...
stewart-mccoys-macbook:footy_subs stewartmccoy$ rails s
/Users/stewartmccoy/.rvm/gems/ruby-1.9.3-p392/gems/pg-0.14.1/lib/pg.rb:4:in `require': dlopen(/Users/stewartmccoy/.rvm/gems/ruby-1.9.3-p392/gems/pg-0.14.1/lib/pg_ext.bundle, 9): Library not loaded: libpq.5.dylib (LoadError)
  Referenced from: /Users/stewartmccoy/.rvm/gems/ruby-1.9.3-p392/gems/pg-0.14.1/lib/pg_ext.bundle
  Reason: image not found - /Users/stewartmccoy/.rvm/gems/ruby-1.9.3-p392/gems/pg-0.14.1/lib/pg_ext.bundle
    from /Users/stewartmccoy/.rvm/gems/ruby-1.9.3-p392/gems/pg-0.14.1/lib/pg.rb:4:in `<top (required)>'
    from /Users/stewartmccoy/.rvm/gems/ruby-1.9.3-p392@global/gems/bundler-1.3.4/lib/bundler/runtime.rb:72:in `require'
    from /Users/stewartmccoy/.rvm/gems/ruby-1.9.3-p392@global/gems/bundler-1.3.4/lib/bundler/runtime.rb:72:in `block (2 levels) in require'
    from /Users/stewartmccoy/.rvm/gems/ruby-1.9.3-p392@global/gems/bundler-1.3.4/lib/bundler/runtime.rb:70:in `each'
    from /Users/stewartmccoy/.rvm/gems/ruby-1.9.3-p392@global/gems/bundler-1.3.4/lib/bundler/runtime.rb:70:in `block in require'
    from /Users/stewartmccoy/.rvm/gems/ruby-1.9.3-p392@global/gems/bundler-1.3.4/lib/bundler/runtime.rb:59:in `each'
    from /Users/stewartmccoy/.rvm/gems/ruby-1.9.3-p392@global/gems/bundler-1.3.4/lib/bundler/runtime.rb:59:in `require'
    from /Users/stewartmccoy/.rvm/gems/ruby-1.9.3-p392@global/gems/bundler-1.3.4/lib/bundler.rb:132:in `require'
    from /Users/stewartmccoy/Code/footy_subs/config/application.rb:13:in `<top (required)>'
    from /Users/stewartmccoy/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.13/lib/rails/commands.rb:53:in `require'
    from /Users/stewartmccoy/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.13/lib/rails/commands.rb:53:in `block in <top (required)>'
    from /Users/stewartmccoy/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.13/lib/rails/commands.rb:50:in `tap'
    from /Users/stewartmccoy/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.13/lib/rails/commands.rb:50:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T23:43:43.753

错误的关键部分是：

```
Library not loaded: libpq.5.dylib (LoadError) 
```

这表明 ruby​​ 在运行时找不到`libpq`。为了解决这个问题，您可能应该将`DYLD_LIBRARY_PATH`环境变量设置为指向`lib`您的 PostgreSQL 安装目录，无论是全局还是在用于启动 Rails 的包装脚本中。有关更多信息，请参阅[此超级用户问题。](https://superuser.com/q/282450/167160)

`Pg`gem 可以在编译和安装期间找到该库，因为可执行`pg_config`文件在 上`PATH`，它使用它来查找`libpq`. 它似乎没有存储在运行时使用的路径，因此您必须自己设置运行时动态链接器。

一个简单的包装脚本（如果您不想修改全局环境）类似于：

```
#!/bin/bash
export DYLD_LIBRARY_PATH=/path/to/pg/lib 
exec rails "$@" 
```

“$@” 基本上意味着“将所有参数传递给这个脚本，就好像它们是直接传递到这里一样”。它保留了正确的引用，本质上意味着 rails 命令无法告诉您没有直接运行它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-14T06:52:29.403

一个类似的 stackoverflow 答案建议从您的 PATH 中删除 Postgres.app，卸载 pg gem，然后再次安装 pg gem。

（我没有花时间仔细检查这是否适用于这个问题，但它解决了我遇到的一个问题，我想传播这个解决方案，因为我找不到它。）

# mysql - 排序在 MYSQL 中不起作用 if(inSortOrder='first_name',concat(A.first_name,'_A_',A.last_name),''),

> ID：15512143
> 
> 赞同：-1
> 
> 时间：2013-03-19T22:59:31.430
> 
> 标签：mysql, dynamic

我对动态 sql 非常陌生，并且继承了一个我似乎无法弄清楚的项目。

排序在这个项目中从未正常工作，我试图在保持 sql 和存储过程动态的同时弄清楚它。

下面的这一行基本上就是问题所在。如果变量 inSortOrder 是 'first_name，则 sql 应首先按 first_name 排序，然后按姓氏排序。

问题是，我需要根据传递的另一个变量按 ASC 或 DESC 排序。

我不知道*A*做了什么，也无法在互联网上找到有关它的信息。我尝试添加另一个“DESC”或“ASC”，但它总是被忽略。

无论如何，它总是会返回上升。有谁知道如何解决这个问题，并且仍然按多个字段排序？*A*是做什么的？

```
if(inSortOrder='first_name',concat(A.first_name,'_A_',A.last_name),''), 
```

**编辑：** 整个存储过程超过 100 行，但这里是有问题的查询。我知道它的其余部分有效。只是排序有问题。具体来说，试图弄清楚“ *A* ”的作用。（下划线之间的a）

假设变量 inOrder 作为“first_name”放入存储过程。基本上试图弄清楚如何根据另一个变量编辑最后一行，按 DESC 或 ASC 排序。

选择 A.first_name，

```
N.middle_name

    N.last_name
  FROM
      student S left JOIN
      names N on S.id = N.student_id
  WHERE
    N.record_status = 'FAILED' 
```

ORDER BY if(inOrder='first_name',concat(N.first_name,' *A* ',N.last_name),''),

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T20:18:30.627

我已经弄清楚了问题所在。像往常一样，当我不熟悉代码时，我只需要花更多时间查看代码。动态 sql 的新手，但我喜欢我目前所看到的。

就像这样变量是 inSortOrder = 'last_name' inSortType = 'DESC'

```
 if(inOrder='last_name' and inType<>'DESC',concat(N.last_name,'_A_',N.first_name,'_A_',N.middle_name),''),
    if(inOrder='last_name' and inType='DESC',concat(N.last_name,'_A_',N.first_name,'_A_',N.middle_name),'') DESC, 
```

# python - Python 找不到我的文本文件？

> ID：15512147
> 
> 赞同：0
> 
> 时间：2013-03-19T22:59:41.547
> 
> 标签：python, linux, windows, file, text

我完全是计算机语言的菜鸟。

在我的学校我下载了一个名为 color.txt 的文件，然后我想对这个文件进行一些编程......

```
import os.path
filename=input("Enter name of input file >")
infile=open(filename,"r") 
```

等等。它在学校工作。

现在我回到家并再次下载了文件，但这一次在学校工作的同一个 python 程序不识别 color.txt

我的老师告诉全班要试试

```
import os.path
if os.path.isfile("color.txt"):
 print("color.txt") 
```

看看它是否存在，但显然它不存在。

为了澄清这两次，我将文件下载到桌面。在我的学校，我们使用linux。在家里，我有窗户。在家里，当您打开文件时，它会用记事本打开。在学校里，它开着别的东西……我忘了。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:01:44.850

为了让您的程序找到该文件`color.txt`，您的文件需要位于执行程序的同一目录中。如果您将文件下载到桌面，并且您的程序从另一个目录执行，它将找不到该文件。

或者，当您输入文件名时，输入整个绝对路径。对于桌面上的文件，应该类似于`C:\Users\username\Desktop\color.txt`

# ios - 删除没有正则表达式的括号

> ID：15512156
> 
> 赞同：1
> 
> 时间：2013-03-19T23:00:45.433
> 
> 标签：ios, objective-c

我需要把这样的东西

```
NSString *stringWithParentheses = @"This string uses (something special)"; 
```

以编程方式进入这一点。

```
NSString *normalString = @"This string uses"; 
```

问题是我不想使用所有这些奇怪的库、正则表达式等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T23:34:55.610

如果您对正则表达式改变主意，这里有一个简短、干净的解决方案：

```
NSString *foo = @"First part (remove) (me (and ((me)))))) (and me) too))";
NSRegularExpression *expr = [NSRegularExpression regularExpressionWithPattern:@"\\(.*\\)" options:0 error:NULL];
NSString *bar = [expr stringByReplacingMatchesInString:foo options:0 range:NSMakeRange(0, foo.length) withTemplate:@""]; 
```

`(`和之间的所有内容都`)`被删除，包括任何嵌套的括号和括号内不匹配的括号。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T23:04:07.930

只需找到第一个左括号，记下它的索引，找到右括号，记下它的索引，然后删除索引之间的字符（包括索引本身）。

要查找字符，请使用：

```
[string rangeOfString:@"("]; 
```

要删除范围：

```
[string stringByReplacingCharactersInRange:...  withString:@""]; 
```

**这是一个解决方案：**

```
NSString* str = @"This string uses (something special)";
NSRange rgMin = [str rangeOfString:@"("];
NSRange rgMax = [str rangeOfString:@")"];

NSRange replaceRange = NSMakeRange(rgMin.location, rgMax.location-rgMin.location+1);

NSString* newString = str;

if (rgMin.location < rgMax.location)
{
    newString = [str stringByReplacingCharactersInRange:replaceRange withString:@""];
} 
```

它不适用于嵌套括号。或多个括号。但它适用于您的示例。这将根据您的具体情况进行细化。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-19T23:02:56.143

一种方法是找到“(”字符的第一次出现和“)”字符的最后一次出现的位置，并通过消除这些范围之间的所有字符来构建子字符串。我做了一个例子：

```
NSString* str= @"This string uses (something special)";
NSRange r1=[str rangeOfString: @"("];
NSRange r2= [str rangeOfString: @")" options: NSBackwardsSearch];
NSLog(@"%@",[str stringByReplacingCharactersInRange: NSMakeRange(r1.location, r2.location+r2.length-r1.location) withString: @""]); 
```

# process - C 叉形和管形封闭端

> ID：15512157
> 
> 赞同：1
> 
> 时间：2013-03-19T23:00:48.310
> 
> 标签：process, fork, pipe

我正在构建一个需要与几个子进程进行双向通信的应用程序。我的父母就像一个查询引擎，不断地从标准输入读取单词并将其传递给每个子进程。子进程执行它们的处理并在它们的独占管道上写回父进程。

这在理论上是应该如何工作的，但是我被困在实现细节上。第一个问题是我在分叉孩子之前创建 2 个管道吗？当我分叉时，我知道孩子将继承父母的一组文件描述符，这是否意味着将创建 4 个管道或简单的 2 个管道只是复制。如果它们在孩子中被复制，那么这是否意味着如果我要关闭孩子中的文件描述符，它也会关闭父母的？

我的理论如下，我只需要澄清并走上正轨。这是未经测试的代码，我只是为了让您了解我的想法而编写它。谢谢，任何帮助表示赞赏。

```
int main(void){
    int fd[2][2]; //2 pipes for in/out

    //make the pipes
    pipe(fd[0]); //WRITING pipe
    pipe(fd[1]); //READING pipe

    if(fork() == 0){
        //child
        //close some ends
        close(fd[0][1]); //close the WRITING pipe write end
        close(fd[1][0]); //close the READING pipe read end

        //start the worker which will read from the WRITING pipe
        //and write back to the READING pipe
        start_worker(fd[0][0], fd[1][1]);
    }else{
        //parent
        //close the reading end of the WRITING pipe
        close(fd[0][0]);
        //close the writing end of the READING pipe
        close(fd[1][1]);
        //write data to the child down the WRITING pipe
        write(fd[0][1], "hello\n", 6);

        //read from the READING pipe 
        int nbytes;
        char word[MAX];
        while ((nbytes = read(fd[1][0], word, MAXWORD)) > 0){
            printf("Data from child is: %s\n", word);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T23:05:02.433

管道本身*不会*在叉子上复制。

单个管道是单向的，并且有 2 个描述符 - 一个用于读取，一个用于写入。所以在进程A中你关闭例如写描述符，在进程B中你关闭读描述符->你有一个从B到A的管道。

关闭一个进程中的描述符不会影响另一个进程中的描述符。分叉后每个进程都有自己的描述符空间，这是父进程描述符的**副本**。[这是fork()](http://linux.die.net/man/3/fork)手册页的摘录：

> 子进程应拥有自己的父文件描述符副本。每个子文件描述符都应与父文件描述符对应的打开文件描述相同。

# ruby-on-rails - 回形针样式属性不起作用

> ID：15512160
> 
> 赞同：0
> 
> 时间：2013-03-19T23:01:25.583
> 
> 标签：ruby-on-rails, styles, imagemagick, paperclip

我可以上传照片，但是当我添加样式时不起作用。

```
has_attached_file :photo , :styles => { :thumb => "150x150>", :normal => "492x600>"} 
```

当我删除它工作的样式时。

```
has_attached_file :photo 
```

我读到可卡因是问题，所以我说：

```
gem 'paperclip'
gem 'cocaine', '0.3.2' 
```

在错误中说：

建筑照片照片 C:/Users/kosh/AppData/Local/Temp/cottage-style-copper-house-copenhagen-120130320-1680-yk1kyj.jpg 无法被“识别”命令识别。

另外，我已经读过 rmagick 不再需要它了。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:12:35.590

如[文档](https://github.com/thoughtbot/paperclip#image-processor)中所述，必须安装 ImageMagik，以便处理图像。

[您可以在此处](https://www.imagemagick.org/script/download.php#windows)为 Windows 下载它，并且您必须在 Paperclip 中配置它，提供放置生成图像的目录：

```
Paperclip.options[:command_path] = "/usr/local/bin/" 
```

在`config/environments/development.rb`.

**编辑**

由于使用`:styles`导致 ruby​​ 使用 ImageMagick，我能想到的唯一问题来源是这个插件的错误配置。如果您可以检查 ImageMagick 是否独立工作，那就太好了：[Windows 使用](https://web.archive.org/web/20201107230602/http://www.imagemagick.org/Usage/windows/)

# django - Django：在某些项目中使用我的应用程序的 FORKED 版本，而不是全部

> ID：15512161
> 
> 赞同：0
> 
> 时间：2013-03-19T23:01:36.693
> 
> 标签：django

我对如何管理我的 django 应用程序非常迷茫。在大多数项目中，我使用标准版本的应用程序，但现在我发现自己分叉项目并同时处理它们。我如何在某些项目中使用我的分叉版本而在其他项目中使用 std 版本？例如：

我所有的 django 项目都在一个名为的目录中`DJANGOPROJECTS`，其结构如下：

```
DJANGO PROJECTS
-PROJECT A
-PROJECT B
-APP A (forked version)
-APP B (forked version)

SITEPACKAGES (on default python path)
-APP A 
-APP B 
```

我想在 PROJECT A 和 PROJECT B 的 APP A 中使用 FORKED APP A（分叉版）。 PROJECT B 会照顾它自己。现在我如何让 PROJECT A 使用 FORKED APP A？

如果我将 APP A（分叉版本）放在每个项目的 virualenv 中，我将不得不在每次发生更改时更新所有项目。如果我将它保留在 virtualenv 之外，当我对分叉的应用程序进行本地更改（不执行 git push）时，所有使用它的项目都会立即获得更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:51:53.490

每当我希望它们使用共享版本时，我都会通过在我的虚拟环境中使用指向应用程序的符号链接来解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T19:25:30.627

我刚刚找到了一个更好的方法。设置符号链接有点痛苦！原来 virtualenv 有一个内置的方法来做到这一点。

**在以下位置修改要用于该环境的包的路径：**

```
yourEnv/Lib/site-packages/packagename.egg.link file. 
```

**如果您使用的是easy-install，则在以下位置修改包路径：**

```
yourEnv/Lib/site-packages/easy-install.pth 
```

**例如：**

如果您希望 PROJECT-A 使用位于您的 github 目录中的名为 APP-A 的应用程序。找到上面提到的文件并修改路径：

```
c:\users\someuser\documents\github\PROJECT-A\src\APP-A 
```

至：

```
c:\users\someuser\documents\github\APP-A 
```

现在 PROJECT-A 将使用工作存储库中的 APP-A 版本，而不是 virtualenv 中的版本。您现在可以使用 APP-A 存储库，并且更改将自动与 PROJECT-A 集成，而无需推送或拉取更改。

# php - 用不止一个词的类进行解析

> ID：15512164
> 
> 赞同：0
> 
> 时间：2013-03-19T23:01:50.733
> 
> 标签：php, html, parsing, html-parsing

我正在尝试解析此表（仅显示部分）：

```
<table width="100%" cellpadding="0" cellspacing="0" id="row-item-all-0-1" class="my-day-menu-table" style="">
    <tr class="always-show-me">
        <td colspan="3"><strong>Dinner</strong></td>
    </tr>

    <tr class="price- menu-item-type-1">
        <td width="24%" class="child-odd border-candidate station" style="vertical-align:top;" rowspan="1">
            <strong>options</strong>
        </td>
        <td class="child-odd description">
            <strong>pasta express</strong> <img class="tipbox vegetarian" src="http://www.cafebonappetit.com/images/public/menu-item-type-orange.png" alt="vegetarian" />
        </td>
        ...
    </tr>
    ...
</table> 
```

我想获得具有“child-odd border-candidate selection”类的文本“options”，但是当我使用简单的 HTML Dom 解析器时，它似乎不喜欢它，因为该类不止一个单词。我该怎么做？请注意，我尝试将类名放在引号中，但没有奏效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T23:05:04.207

类不超过一个词，它是单独的类。您应该可以通过这种方式使用 Simple HTML DOM Parser 获取该元素：

```
$el = $html->find('div[class=child-odd border-candidate selection]'); 
```

# regex - 数字范围的Vim正则表达式 - 不工作

> ID：15512166
> 
> 赞同：3
> 
> 时间：2013-03-19T23:02:03.807
> 
> 标签：regex, vim

我有以下范围的正则表达式，`288-303`但它在 GVim 中不起作用。正则表达式是`:/28[89]|29[0-9]|30[0-3]/`.

谁能指出原因。我提到了 Stack Overflow 并从[http://utilitymill.com/utility/Regex_For_Range/42](http://utilitymill.com/utility/Regex_For_Range/42)获得了正则表达式。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-19T23:06:04.413

你必须在 Vim 中转义管道：

```
:/28[89]\|29[0-9]\|30[0-3]/ 
```

**编辑：**

根据@Tim 的评论，您可以选择为模式添加前缀，`\v`而不是转义单个管道字符：

```
:/\v28[89]|29[0-9]|30[0-3]/ 
```

谢谢@蒂姆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-11T17:32:19.770

根据 Jim 的回答，我编写了一个小脚本来搜索给定范围内的整数。您使用如下命令：

```
:Range 341 752 
```

这将匹配两个数字 341 和 752 之间的每个数字序列。使用类似的搜索

```
/\%(3\%(\%(4\%([1-9]\)\)\|\%([5-9]\d\{1}\)\|\%(9\%([0-9]\)\)\)\)\|\%([4-7]\d\{2}\)\|\%(7\%(\%(0\%([0-9]\)\)\|\%([1-5]\d\{1}\)\|\%(5\%([0-2]\)\)\)\) 
```

只需将其添加到您的 vimrc

```
function! RangeMatch(min,max) 
  let l:res = RangeSearchRec(a:min,a:max)
  execute "/" . l:res 
  let @/=l:res
endfunction  

"TODO if both number don't have same number of digit 
function! RangeSearchRec(min,max) " suppose number with the same number of digit 
if len(a:max) == 1 
  return '[' . a:min . '-' . a:max . ']'
endif 
if a:min[0] < a:max[0]  
  " on cherche de a:min jusqu'à 99999 x times puis de (a:min[0]+1)*10^x à a:max[0]*10^x
  let l:zeros=repeat('0',len(a:max)-1) " string (a:min[0]+1 +) 000000

  let l:res = '\%(' . a:min[0] .  '\%(' . RangeSearchRec( a:min[1:],   repeat('9',len(a:max)-1) ) . '\)\)' " 657 à 699

  if a:min[0] +1 < a:max[0]
    let l:res.= '\|' . '\%(' 
    let l:res.= '[' . (a:min[0]+1) . '-' .  a:max[0] . ']' 
    let l:res.= '\d\{' . (len(a:max)-1) .'}' . '\)' "700 a 900
  endif 

  let l:res.= '\|' . '\%(' . a:max[0] .  '\%(' . RangeSearchRec( repeat('0',len(a:max)-1) , a:max[1:] ) . '\)\)' " 900 a 957 

  return l:res
else 
  return  '\%(' . a:min[0] . RangeSearchRec(a:min[1:],a:max[1:]) . '\)' 
endif 
endfunction 
command! -nargs=* Range  call RangeMatch(<f-args>) 
```

请注意，\%(\) 匹配括号而不是 \(\) 避免了 ERROR E872: (NFA regexp) Too many '('

脚本看起来在 341-399 或 400-699 或 700-752 之间

# twitter-bootstrap - 如何生成引导程序 3.0 文档

> ID：15512167
> 
> 赞同：4
> 
> 时间：2013-03-19T23:02:23.717
> 
> 标签：twitter-bootstrap

可能是一个愚蠢的问题，但他们搬到了 Jackyll，我不知道如何访问文档。

makefile 似乎什么也没做，然后将一些文件复制到文档中。只是像过去那样打开 html 文件不再起作用，必须进行一些模板化。

附带问题：它们是否可以在某个地方在线获得？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T17:34:04.433

`sudo apt-get install ruby ruby-dev`我相信我必须在 ubuntu 上安装很容易的 ruby

我必须运行的实际命令`jekyll --server`位于 bs 目录中，然后访问 localhost 上的文档`http://localhost:9001`

我不明白这个 jekyll 的东西，为什么甚至是服务器？它不应该只是编译吗？猜猜不是因为这是我让它工作的唯一方法，作者在 github 上显示了确切的命令。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T00:21:48.830

至于你的问题：我找到了这个链接： http: [//www.bootcss.com/p/bootstrap-v3/index.html](http://www.bootcss.com/p/bootstrap-v3/index.html)

小心并期待在 3.0 最终版之前会有很多变化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-31T09:06:15.127

在 Windows 中（经过我对 linux 不确定的完美测试）：

> Step1：下载Bootstrap3：github.com/twitter/bootstrap/archive/3.0.0-wip.zip
> Step2：下载Ruby：[点击这里](http://rubyforge.org/frs/download.php/76955/rubyinstaller-2.0.0-p195.exe)
> Step3：下载Devkit：[点击这里](https://github.com/downloads/oneclick/rubyinstaller/DevKit-tdm-32-4.5.2-20111229-1559-sfx.exe)解压到某个目录。
> Step4 : 通过 ruby​​ 终端进入 devkit 目录并执行以下命令

```
ruby dk.rb init
ruby dk.rb install
gem install jekyll --version '= 0.11.0' 
```

> 第 5 步：转到引导安装的 ./docs 目录 第
> 6 步：运行 jekyll --server第 7 步：
> 在浏览器中访问 localhost:9001/ 或 localhost:4000/ （其中一个肯定可以工作）

# jquery - 从 url 中出现一次或多次的链接中删除变量

> ID：15512176
> 
> 赞同：1
> 
> 时间：2013-03-19T23:03:25.957
> 
> 标签：jquery

我想从链接中删除一个变量及其值，`href`例如假设该链接有`quantity=1`一次或两次，那么无论它在该链接中出现多少次，我都想删除它。我的想法是使用 jquery `replace`。我做了一个代码。

```
 var url = i.text.replace('&quantity',''); 
```

我有价值的地方

```
"https://example.com?pid=1&quantity=2&quantity=3" 
```

但如果我使用`replace`我将无法删除变量的值。那么该怎么做，不仅字符串`&quantity`被删除，而且与之关联的值也被删除，如 full `&quantity=3`。还要记住，`quantity`它的值是动态的，它可以是一次与其他值的链接，也可以是两次与其他值的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:06:11.247

尝试类似：

```
var text = "https://example.com?pid=1&quantity=2&quantity=3";
var url = text.replace(/&quantity=\d+/g,''); 
```

这将替换`=`符号和你之后的任何数字，只要确保你的变量是好的......

正如你在这里看到的：http: [//jsfiddle.net/darkajax/afXMN/](http://jsfiddle.net/darkajax/afXMN/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T23:06:23.773

如果您愿意或使用会话，您可以使用 $_post 函数而不是 get 来隐藏此值

# c# - ControlTemplates 共享相同的颜色

> ID：15512181
> 
> 赞同：0
> 
> 时间：2013-03-19T23:03:54.733
> 
> 标签：c#, silverlight, xaml, arcgis

我正在尝试使用此控制模板作为资源来为多边形提供符号。用户在创建多边形时选择多边形的颜色。然而，当用户创建一个新的多边形并选择不同的颜色时，会切换到所有添加的多边形的最新颜色。

xml:

```
<!-- Polygon -->
<esri:SimpleFillSymbol x:Key="KmlPolygonStyle">
    <esri:SimpleFillSymbol.ControlTemplate>
        <ControlTemplate x:Name="CustomKmlPolygonTemplate">
            <Grid>
                <VisualStateManager.VisualStateGroups>
                    <VisualStateGroup x:Name="CommonStates">
                        <VisualState x:Name="Normal">
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetName="Element"
                                                 Storyboard.TargetProperty="StrokeThickness"
                                                 To="1" Duration="0:0:0.1"/>
                                <DoubleAnimation Storyboard.TargetName="Element"
                                                 Storyboard.TargetProperty="Fill.Opacity"
                                                 To="0.5" Duration="0:0:0.1"/>
                            </Storyboard>
                        </VisualState>
                        <VisualState x:Name="MouseOver">
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetName="Element"
                                                 Storyboard.TargetProperty="StrokeThickness"
                                                 To="2" Duration="0:0:0.1"/>
                                <DoubleAnimation Storyboard.TargetName="Element"
                                                 Storyboard.TargetProperty="Fill.Opacity"
                                                 To="0.7" Duration="0:0:0.1"/>
                            </Storyboard>
                        </VisualState>
                        <VisualState x:Name="Selected">
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetName="Element"
                                                 Storyboard.TargetProperty="StrokeThickness"
                                                 To="3" Duration="0:0:0.1"/>
                                <DoubleAnimation Storyboard.TargetName="Element"
                                                 Storyboard.TargetProperty="Fill.Opacity"
                                                 To="0.9" Duration="0:0:0.1"/>
                            </Storyboard>
                        </VisualState>
                    </VisualStateGroup>
                </VisualStateManager.VisualStateGroups>
                <Path x:Name="Element"
                            Fill="{Binding Symbol.Fill}" Stroke="{Binding Symbol.BorderBrush}"
                            StrokeStartLineCap="Round" StrokeThickness="1" 
                            StrokeLineJoin="Round" StrokeEndLineCap="Round" />
            </Grid>
        </ControlTemplate>
    </esri:SimpleFillSymbol.ControlTemplate>
</esri:SimpleFillSymbol> 
```

C#代码：

```
 var kmlSymbol = Application.Current.Resources["KmlPolygonStyle"] as SimpleFillSymbol;                                                             
 kmlSymbol.Fill = new SolidColorBrush(LayerColorPicker.SelectedColor.Color); 
 kmlSymbol.BorderBrush = new SolidColorBrush(LayerColorPicker.SelectedColor.Color);
 kmlSymbol.BorderThickness = 1;
 kmlSymbol.Fill.Opacity = 0.5;                                                                       
 kmlRenderer.Symbol = kmlSymbol; 
```

如何使添加的每个多边形使用适当的选择颜色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:35:01.207

通过将绑定更改为一次性解决了问题。

```
 ...     <Path x:Name="Element"
                            Fill="{Binding Symbol.Fill, Mode=OneTime}" Stroke="{Binding Symbol.BorderBrush, Mode=OneTime}"
                            StrokeStartLineCap="Round" StrokeThickness="1" 
                            StrokeLineJoin="Round" StrokeEndLineCap="Round"/>   ... 
```

# python - 什么是 wrapper_descriptor，为什么 Foo.__init__() 在这种情况下是其中之一？

> ID：15512183
> 
> 赞同：14
> 
> 时间：2013-03-19T23:03:59.183
> 
> 标签：python, initialization

```
import inspect

class Foo(object):
    pass

if __name__ == '__main__':
    print type(Foo.__init__)
    print inspect.getsourcelines(Foo.__init__) 
```

输出：

```
<type 'wrapper_descriptor'>
Traceback (most recent call last):
  *snip*
  File "/usr/lib/python2.7/inspect.py", line 420, in getfile
    'function, traceback, frame, or code object'.format(object))
TypeError: <slot wrapper '__init__' of 'object' objects> is not a module, class, method, function, traceback, frame, or code object 
```

谷歌搜索几乎没有提供关于 wrapper_descriptor 究竟是什么以及为什么空类有一个`__init__`不是方法而是 wrapper_descriptor 的方法的有用信息。

这里到底发生了什么？所有没有`__init__`方法的类都具有这些 wrapper_descriptor 事物之一吗？为什么`__init__`类字典中有一个？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T23:25:27.880

您遇到的是一个实现细节。这对于用 C 实现的类来说是非常典型的`object`。它不是 Python 方法，而是 C 方法，包装器是该接口的一部分。

> 为什么`__init__`类字典中有一个？

它不在类字典中，它在`object`字典中。`object`有一个`__init__`这样，当您尝试使用 调用您的类的基类的`__init__`方法`super()`时，它不会失败。

# jquery - 幻灯片在本地工作，但在线时出错

> ID：15512185
> 
> 赞同：0
> 
> 时间：2013-03-19T23:04:01.130
> 
> 标签：jquery, slideshow

我想利用这个幻灯片，因为它使用硬编码的导航，我想不出更好的方法来做[我需要它做的事情](http://net.tutsplus.com/tutorials/javascript-ajax/building-an-auto-scrolling-slideshow-that-works-with-and-without-javascript/)

让它在本地轻松工作，一切都很好。然后上传它，它根本不工作，但在萤火控制台中给出了这个错误。'TypeError: $(...).cycle 不是函数。'

一切都完全相同，但我仅从此处的实时版本中收到此[错误](http://vurtmedia.net/logix-test/index.html)。

有任何想法吗？

提前致谢。

# heroku - Heroku 上的 Yesod：无法解决依赖关系，yesod-1.1.9.2

> ID：15512186
> 
> 赞同：2
> 
> 时间：2013-03-19T23:04:01.373
> 
> 标签：heroku, yesod

我创建了一个新应用程序，`yesod init`然后按照[此处](http://brianmckenna.org/blog/haskell_buildpack_heroku)的教程将其部署到 Heroku。

部署失败：

```
-----> Updating Cabal
Config file path source is default config file.
Config file /app//.cabal/config not found.
Writing default configuration to /app//.cabal/config
Downloading the latest package list from hackage.haskell.org
Note: there is a new version of cabal-install available.
To upgrade, run: cabal install cabal-install
-----> Release the hounds! Installing application
Resolving dependencies...
cabal: Could not resolve dependencies:
trying: lol-0.0.0
trying: yesod-1.1.9.2
 !     Heroku push rejected, failed to compile Haskell app

To git@heroku.com:nameless-savannah-3054.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:nameless-savannah-3054.git'` 
```

我的 cabal 文件只是由以下人员生成的文件`yesod init`：

```
name:              lol
version:           0.0.0
cabal-version:     >= 1.8
build-type:        Simple

Flag dev
    Description:   Turn on development settings, like auto-reload templates.
    Default:       False

Flag library-only
    Description:   Build for use with "yesod devel"
    Default:       False

library
    exposed-modules: Application
                     Foundation
                     Import
                     Model
                     Settings
                     Settings.StaticFiles
                     Settings.Development
                     Handler.Home

    if flag(dev) || flag(library-only)
        cpp-options:   -DDEVELOPMENT
        ghc-options:   -Wall -O0
    else
        ghc-options:   -Wall -O2

    extensions: TemplateHaskell
                QuasiQuotes
                OverloadedStrings
                NoImplicitPrelude
                CPP
                MultiParamTypeClasses
                TypeFamilies
                GADTs
                GeneralizedNewtypeDeriving
                FlexibleContexts
                EmptyDataDecls
                NoMonomorphismRestriction

    build-depends: base                          >= 4          && < 5
                 -- , yesod-platform                >= 1.1        && < 1.2
                 , yesod                         >= 1.1.5      && < 1.2
                 , yesod-core                    >= 1.1.7      && < 1.2
                 , yesod-auth                    >= 1.1        && < 1.2
                 , yesod-static                  >= 1.1        && < 1.2
                 , yesod-default                 >= 1.1        && < 1.2
                 , yesod-form                    >= 1.1        && < 1.3
                 , clientsession                 >= 0.8        && < 0.9
                 , bytestring                    >= 0.9        && < 0.11
                 , text                          >= 0.11       && < 0.12
                 , persistent                    >= 1.1        && < 1.2
                 , persistent-sqlite             >= 1.1        && < 1.2
                 , persistent-template           >= 1.1.1      && < 1.2
                 , template-haskell
                 , hamlet                        >= 1.1        && < 1.2
                 , shakespeare-css               >= 1.0        && < 1.1
                 , shakespeare-js                >= 1.0.2      && < 1.2
                 , shakespeare-text              >= 1.0        && < 1.1
                 , hjsmin                        >= 0.1        && < 0.2
                 , monad-control                 >= 0.3        && < 0.4
                 , wai-extra                     >= 1.3        && < 1.4
                 , yaml                          >= 0.8        && < 0.9
                 , http-conduit                  >= 1.8        && < 1.10
                 , directory                     >= 1.1        && < 1.3
                 , warp                          >= 1.3        && < 1.4
                 , data-default
                 , aeson
                 , conduit                       >= 1.0
                 , monad-logger                  >= 0.3
                 , fast-logger                   >= 0.3

executable         lol
    if flag(library-only)
        Buildable: False

    main-is:           main.hs
    hs-source-dirs:    app
    build-depends:     base
                     , lol
                     , yesod-default

    ghc-options:       -threaded -O2

test-suite test
    type:              exitcode-stdio-1.0
    main-is:           main.hs
    hs-source-dirs:    tests
    ghc-options:       -Wall

    build-depends: base
                 , lol
                 , yesod-test >= 0.3 && < 0.4
                 , yesod-default
                 , yesod-core
                 , persistent
                 , persistent-sqlite
                 , resourcet
                 , monad-logger 
```

关于原因的任何想法？

编辑：我还应该提到它在 OS X 上本地构建良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T23:09:25.310

使用以下构建包，而不是教程中链接的构建包，解决了这个问题：

[https://github.com/ichistmeinname/heroku-buildpack-haskell](https://github.com/ichistmeinname/heroku-buildpack-haskell)

# java - 如何在字符串中插入换行符到 PrintStream 然后使用扫描仪重新读取文件

> ID：15512190
> 
> 赞同：10
> 
> 时间：2013-03-19T23:04:13.777
> 
> 标签：java, java.util.scanner, printstream

我有几个类旨在模拟图书目录。我有一个书籍类（isbn、title 等）、一个 BookNode 类、一个 BookCatalog（它是书籍的 LinkedList）和一个驱动程序类（gui）。我的问题是我在 BookCatalog 中有一个 toString() 方法，它应该返回所有书籍的字符串表示形式。Book 类还覆盖 toString()。我应该让书的每个字段用“标签”分隔，每本书用“新行”分隔。当我尝试使用 PrintStream 将图书目录打印到 .txt 文件时，\n 没有注册。

我试图将其更改为 System.getProperty(line.separator) 以正确显示书目。但是现在，我遇到了一个问题，即扫描程序无法正确读取文件并引发“NoSuchElementException”。如何让扫描仪 1) 忽略 line.separator 或 2) 使用 printStream \n？

图书.java

```
public String toString(){
        return isbn+"\t"+lastName+"\t"+firstName+"\t"+title+"\t"+year+"\t"+
            String.format("%.2f",price); 
```

图书目录.java

```
public String toString() {
        BookNode current = front;
        String s="";
        System.out.println(s);
        while (current!=null){
            //each book is listed on separate line
            s+=current.getData().toString()+"\n ";//System.getProperty("line.separator")
            current = current.getNext();
        }
        return s;
    } 
```

驱动程序.java

```
public void loadDirectory() throws FileNotFoundException {
        if (f.exists()){
            Scanner input = new Scanner(f);
            while (input.hasNextLine()){
                String bookLine = input.nextLine();
                processBookLine(bookLine);
            }
        }
    }

public void processBookLine(String line){
        Scanner input = new Scanner(line);
        String isbn = input.next();
        String lastName = input.next();
        String firstName = input.next();

        String title = input.next();
        while (input.hasNext() && !input.hasNextInt()){//while next token is not an integer
            title += " "+input.next();
        }
        int year = input.nextInt();
        double price = input.nextDouble();
        Book book = Book.createBook(isbn, lastName, firstName, title, year, price);
        if (book!=null){
            catalog.add(book);
        }
    } 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-19T23:29:57.033

换行符`\n`不是某些操作系统中的行分隔符（例如 Windows，它是“\r\n”） - 我的建议是你改用`\r\n`它，然后它只会看到换行符`\n`and `\r\n`，我使用它从来没有任何问题。

此外，您应该考虑使用 a`StringBuilder`而不是`String`在 while 循环中连接 at `BookCatalog.toString()`，它更有效。例如：

```
public String toString() {
        BookNode current = front;
        StringBuilder sb = new StringBuilder();
        while (current!=null){
            sb.append(current.getData().toString()+"\r\n ");
            current = current.getNext();
        }
        return sb.toString();
} 
```

# python - 正方体使用字母子集

> ID：15512193
> 
> 赞同：1
> 
> 时间：2013-03-19T23:04:26.907
> 
> 标签：python, linux, ocr, captcha, tesseract

我在 Ubuntu Linux 上使用 tesseract-ocr 包，我已经使用了一段时间，我认为为了提高 OCR 的准确性，我只需要字母表中的字母子集。我需要的字母是：

```
0123456789abcdefghijklmnopqrstuvwxyz 
```

只有这样，甚至不是大写字母，任何人都可以帮助我指示 tesseract 只匹配字母的子集吗？

谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T23:11:50.157

从[python-tesseract 项目页面](https://code.google.com/p/python-tesseract/)：

```
import tesseract
api = tesseract.TessBaseAPI()
api.Init(".","eng",tesseract.OEM_DEFAULT)
api.SetVariable("tessedit_char_whitelist", "0123456789abcdefghijklmnopqrstuvwxyz")
api.SetPageSegMode(tesseract.PSM_AUTO) 
```

所以只需在`api.SetVariable`.

来自[tesseract-ocr 项目 FAQ](https://code.google.com/p/tesseract-ocr/wiki/FAQ#How_do_I_recognize_only_digits?)

> **正方体 2.03** 使用

```
TessBaseAPI::SetVariable("tessedit_char_whitelist", "0123456789"); 
```

> 在调用 Init 函数或将其放入名为 tessdata/configs/digits 的文本文件之前：

```
tessedit_char_whitelist 0123456789 
```

> 然后你的命令行变成：

```
tesseract image.tif outputbase nobatch digits 
```

> **警告**：在新旧配置变量合并之前，您还必须拥有 nobatch 参数。
> 
> **Tesseract 3** 已经创建了一个数字配置文件，所以只需运行一个 tesseract 命令，如下所示：

```
tesseract imagename outputbase digits 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T23:15:33.953

您正在寻找的是 Tesseract 白名单。如果您使用 python 并使用它和 API，我认为这应该可以工作（在 Tesseract Google Group 上找到）。

```
api.SetVariable("tessedit_char_whitelist", "abcdefghijklmnopqrstuvwxyz0123456789 "); 
```

请注意，我不确定这适用于哪个版本的 Tesseract。

# claims-based-identity - 使用 thinktecture STS 服务器不同的访问方式

> ID：15512194
> 
> 赞同：1
> 
> 时间：2013-03-19T23:04:27.907
> 
> 标签：claims-based-identity, biometrics, thinktecture-ident-server

我目前是基于声明的模型和安全令牌服务的新手。

我已成功安装 thinktecture 身份服务器并对其进行了测试。我想做的下一步是将登录方法从普通的用户名和密码方法更改为另一种生物识别方法（实际上是指纹），

即我想知道如何使thinktecture 服务器接受生物特征数据（我必须在哪里调整）而不是用户名和密码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T05:26:08.990

没有内置的东西。你需要自己做。显而易见的起点是登录视图/控制器。

# java - 从 java.io.File 获取 java.nio.file.Path 对象

> ID：15512200
> 
> 赞同：242
> 
> 时间：2013-03-19T23:04:57.407
> 
> 标签：java, file, path, java-6

是否可以从 a 获取 Path 对象`java.io.File`？

我知道您可以使用`toFile()`方法将路径转换为文件，但我找不到相反的转换。有没有办法在 Java 6 或更低版本中做到这一点？

* * *

## 回答 #1

> 赞同：323
> 
> 时间：2013-03-19T23:08:16.743

是的，您可以[`File`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html)使用[`File.toPath()`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#toPath()). 请记住，这仅适用于 Java 7+。Java 6 及以下版本没有它。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-03-19T23:09:37.863

从[文档中](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Path.html)：

> 与默认值关联的路径`provider`通常可以与`java.io.File`类互操作。其他提供者创建的路径不太可能与`java.io.File`. **该`toPath`方法可用于从 java.io.File 对象表示的抽象路径名中获取 Path。**生成的 Path 可用于对与 `java.io.File`对象相同的文件进行操作。**此外，该方法对于从 a 的表示`toFile`构造 a 很有用。`File``String``Path`**

（强调我的）

所以，对于[`toFile`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Path.html#toFile%28%29)：

> 返回`File`表示此路径的对象。

并且[`toPath`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#toPath%28%29)：

> 返回`java.nio.file.Path`从 t​​his 抽象路径构造的对象。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-03-19T23:08:24.660

你可能想要[`File.toPath()`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#toPath%28%29).

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2016-04-07T05:20:46.477

正如许多人所建议的那样，JRE v1.7 及更高版本具有 File.toPath();

```
File yourFile = ...;
Path yourPath = yourFile.toPath(); 
```

在上面其他帖子中也提到的Oracle 的[jdk 1.7 文档中，在 toPath() 方法的描述中描述了以下等效代码，它可能适用于 JRE v1.6；](https://docs.oracle.com/javase/7/docs/api/java/io/File.html#toPath%28%29)

```
File yourFile = ...;
Path yourPath = FileSystems.getDefault().getPath(yourFile.getPath()); 
```

# c - 为什么我不能在 C 中的 switch 语句中使用数组？

> ID：15512204
> 
> 赞同：0
> 
> 时间：2013-03-19T23:05:15.700
> 
> 标签：c, switch-statement

我编写了一个程序，可以生成 1000 个 1-10 范围内的随机数。然后我想要它做的是告诉我每个数字产生了多少次。但是，出于某种原因，我运行这个程序，每个数字都得到 0。

有人知道我错过了什么吗？

```
#include <stdio.h>
#include <stdlib.h>
void print(const int array[], int limit);

#define SIZE 1000
int main(void)
{
int i;
int arr[SIZE];

for (i = 0; i < SIZE; i++)
    arr[i] = rand() % 10 + 1;

print(arr,SIZE);

return 0;
}

void print(const int array[], int limit)
{ 
int index, count1 = 0, count2 = 0, count3 = 0, count4 = 0, count5 = 0, count6 = 0,         
count7 = 0, count8 = 0, count9 = 0, count10 = 0;

for (index = 0; index < limit; index++)
{
    switch (array[index])
    {
        case '1' : count1++;
                  break;
        case '2' : count2++;
                  break;
        case '3' : count3++;
                  break;
        case '4' : count4++;
                  break;
        case '5' : count5++;
                  break;
        case '6' : count6++;
                  break;
        case '7' : count7++;
                  break;
        case '8' : count8++;
                  break;
        case '9' : count9++;
                  break;
        case '10' : count10++;
                 break;
        default : break;
    }

}
 printf("There were %d 10s, %d 9s, %d 8s, %d 7s, %d 6s, %d 5s, %d 4s, %d 3s, %d 2s, %d                         
 1s.", count10, count9, count8, count7, count6, count5, count4, count3, count2, count1);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T23:07:17.720

您不需要在 case 语句中的数字周围加上单引号。您正在通过包含单引号来创建字符文字。只要把它们取下来，你就会得到整数文字，这就是你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T23:18:48.243

您正在将数字（存储在数组中）与字符文字“1”、“2”等进行比较。此外，使用数组实现打印可能会更容易：

```
void print(const int array[], int limit)
{ 
    int index;
    int count[11] = {0};

    for (index = 0; index < limit; index++)
    {
        count[array[index]]++;
    }
    printf("There were %d 10s", count[10]);
    for (index = 10; index > 0; index--)
    {
        printf(" %d %ds%c", count[index], index, (index > 1)?',':'.');
    }
} 
```

# google-maps - 在 google maps API v2 中显示街道地址，现在在 v3 中需要它

> ID：15512205
> 
> 赞同：0
> 
> 时间：2013-03-19T23:05:23.200
> 
> 标签：google-maps, google-maps-api-3, google-maps-api-2

我正在使用下面的 google maps api v2 在地图上的**var 地址**行中显示地址，我想在 api v3 中使用它。有谁知道如何将其制作为 google maps api v3？

```
<script type="text/javascript">
    //<![CDATA[
   var geocoder;
   var map;
   var address = "425 West 53rd St,New York,NY,";
   // On page load, call this function
   function load()
   {
      // Create new map object
      map = new GMap2(document.getElementById("map"));
        map.addControl(new GSmallMapControl());
      // Create new geocoding object
      geocoder = new GClientGeocoder();
      // Retrieve location information, pass it to addToMap()
      geocoder.getLocations(address, addToMap);
   }
   // This function adds the point to the map
   function addToMap(response)
 {
   // Retrieve the object
   place = response.Placemark[0];
   // Retrieve the latitude and longitude
   point = new GLatLng(place.Point.coordinates[1],
                       place.Point.coordinates[0]);
   // Center the map on this point
   map.setCenter(point, 15);
   // Create a marker
    marker = new GMarker(point);
    // Add the marker to map
    map.addOverlay(marker);
   }    //]]>
    </script>

<script src="http://maps.google.com/maps?file=api&v=2&key=xxxxxxxx" type="text/javascript"></script><div id="map"></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T02:33:35.670

文档中的简单示例，使用您的地址而不是“输入字段”

```
 var geocoder;
  var map;
  var address = "425 West 53rd St,New York,NY,";
  function initialize() {
    geocoder = new google.maps.Geocoder();
    var latlng = new google.maps.LatLng(-34.397, 150.644);
    var mapOptions = {
      zoom: 8,
      center: latlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    map = new google.maps.Map(document.getElementById('map'), mapOptions);
    codeAddress();
  }

  function codeAddress() {
    geocoder.geocode( { 'address': address}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        map.setCenter(results[0].geometry.location);
        var marker = new google.maps.Marker({
            map: map,
            position: results[0].geometry.location
        });
      } else {
        alert('Geocode was not successful for the following reason: ' + status);
      }
    });
  } 
```

[jsfiddle](http://jsfiddle.net/GY3uu/3/)

# c++ - 使用 boost 创建指向 std::pair 的双指针（ptr 到 ptr）

> ID：15512206
> 
> 赞同：0
> 
> 时间：2013-03-19T23:05:38.713
> 
> 标签：c++, boost, double-pointer

我有以下代码，我想重写以使用智能指针：我正在努力寻找任何关于如何声明、分配内存和访问双指针的体面示例。谁能提供一个例子？我读过 shared_ptr 不是要走的路，因为它使用 delete 而不是 delete[]，是否需要使用 shared_array？

```
#include <iostream>
#include <boost/shared_array.hpp>
#include <iomanip>

int main(int argc, char**argv) {
    std::pair<int,float> **corrArray;   
    int rows=10;
    int cols=5;

    corrArray = new std::pair<int,float>*[rows];
    for(int i=0; i<rows; i++) {
        corrArray[i] = new std::pair<int,float>[cols];
    }
    for(int i=0; i<rows; i++) {
        for(int j=0; j<cols; j++) {
            corrArray[i][j].first = i+j;
            std::cout << std::setw(3) << corrArray[i][j].first << " ";
        }
        std::cout << "\n";
    }
    for(int i=0; i<rows; i++) {
        delete[] corrArray[i];  
    }
    delete[] corrArray;
    return 0;
} 
```

编辑： corrArray 必须首先声明（它将是一个类成员）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T23:56:14.520

**Boost shared_ptr 已经适用于数组：**

[http://www.boost.org/doc/libs/1_53_0/libs/smart_ptr/shared_ptr.htm](http://www.boost.org/doc/libs/1_53_0/libs/smart_ptr/shared_ptr.htm)

> 从 Boost 1.53 版开始，shared_ptr 可用于保存指向动态分配数组的指针。

```
shared_ptr<double[1024]> p1( new double(1024) );
shared_ptr<double[]> p2( new double(n) ); 
```

**Boost shared_ptr 是 C++11 的一部分（所以你也可以使用它们）：**

[智能指针和数组](https://stackoverflow.com/questions/6713484/smart-pointers-and-arrays)

```
std::unique_ptr<int[]> my_array(new int[5]); 
```

**更好的是，使用矢量，因为您根本不共享它：**

```
std::vector<std::vector<std::pair<int,float>>> corrArray; 
```

# qt - QT 中的逃生空间

> ID：15512207
> 
> 赞同：1
> 
> 时间：2013-03-19T23:05:39.510
> 
> 标签：qt, path, escaping, filepath

我想使用 QString.split(' ') 方法将输入命令拆分为命令

```
 QStringList commandList =  command.split(' '); 
```

然而，命令的末尾有一个 UNIX 路径。即它看起来像

```
 QString command = new QString("caommand -a -b /path/to\ specific/file"); 
```

路径命令由用户在运行时指定（用户转义路径中的任何空格）。出于某种原因 command.split(' '); 不会逃脱空格。

我是 QT 的新手，它如何逃脱空间？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T01:01:10.060

您可以使用`QDir::toNativeSeparators()`将其转换为 unix 样式。并按空格分割接收到的结果，尽管您必须弄清楚命令之间的空格在哪里以及文件名中可能的空格在哪里

例如：

```
QString myUnixPath = QDir::toNativeSeparators("/home/path with spaces/"); 
```

将返回 unix 样式路径，而

```
QString qtPath = QDir::fromNativeSeparators("/path/with\ spaces/"); 
```

将返回 /path 带空格 /

# java - 获取远程服务器上的内存使用情况和磁盘空间的 JMS 库？

> ID：15512208
> 
> 赞同：1
> 
> 时间：2013-03-19T23:05:39.917
> 
> 标签：java, jms, dashboard, jcaps

我正在尝试为一些 JCAPS 接口组合一个 JMS 队列仪表板，JMS 包中是否提供了任何 Java 方法可用于检索服务器的状态，例如内存使用情况和磁盘空间？

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-27T20:10:47.643

这取决于。如果您使用的是 JCAPS 5，对不起，您可能不走运，我不知道如何针对底层 STCMS 代理构建 API，并且可能很少有人可以帮助您完成上述任务。

但是，如果您使用的是基于 JMS 的 JCAPS 6（JCAPS 5 可能也是，但我不记得了），那么您很幸运——我已经构建了这样的东西。

基本上，您需要来自 JMS 代理的一些 jar：

```
root@servername /opt/foo/mq42/lib [bash]# ls
ext            images        imqbroker.jar  imqinit       imqservlet.jar  jaxm-api.jar  props
fscontext.jar  imq.jar       imqhttp.war    imqjmsra.rar  imqutil.jar     jhall.jar
help           imqadmin.jar  imqhttps.war   imqjmx.jar    imqxm.jar       jms.jar 
```

你需要：

*   imqadmin.jar
*   imq.jar
*   imquntil.jar

从这里我只能有点模糊，因为其余的是 IP 而不是开源的。基本上，查看 mq42 文件夹下的脚本，它们会为您提供有关如何使用 jar 的提示。您将使用的主要类是：`com.sun.messaging.jmq.admin.bkrutil.BrokerAdmin`

祝你好运！

# asp.net-mvc-3 - ASP.Net MVC 4 全局属性，如配置文件设置

> ID：15512210
> 
> 赞同：0
> 
> 时间：2013-03-19T23:05:53.853
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4, simplemembership, asp.net-profiles

我希望在使用 SimpleMembership 的 ASP.NET MVC 4 中有类似配置文件提供程序的东西。如果我错了，请纠正我，因为我认为他们尚未将 profileProviders 包含在 simpleMembership 中。（无论如何我都找不到它的例子）

我需要的是能够存储经常需要的用户特定信息（电子邮件、帐号等），并且可以轻松地从应用程序中的任何位置（视图、控制器等）检索它们

我怎样才能做到这一点？最佳做法是什么？我对这个平台很陌生，每天都在学习，如果以前有人问过这个问题，我很抱歉。我找不到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:05:09.123

如果您是该框架的新手，您可能应该开始阅读一些更基本的功能，然后再稍微深入了解角色提供程序等内容[。ASP.NET MVC 教程](http://www.asp.net/mvc/tutorials)是一个很好的起点。您可以通过搜索找到许多其他好的教程。

MVC4 互联网模板为您提供了一个开箱即用的 UserProfile 模型，它集成了 Simple Membership。UserProfile 类具有通用用户属性的属性，例如用户名、电子邮件、密码等。

您可以向模型添加更多属性以满足您的要求。可以在[此处](http://blog.longle.net/2012/09/25/seeding-users-and-roles-with-mvc4-simplemembershipprovider-simpleroleprovider-ef5-codefirst-and-custom-user-properties/)找到有关如何执行此操作的教程。查找作者解释添加*自定义用户属性的部分。*本教程还涉及简单成员。

# php - 无法从 Zend Framework 2 的 ZFTool 创建 Phar

> ID：15512212
> 
> 赞同：0
> 
> 时间：2013-03-19T23:06:02.590
> 
> 标签：php, zend-framework2, phar

ZFTool 的 Phar 存档可以从 GitHub[下载或](http://framework.zend.com/manual/2.1/en/modules/zendtool.introduction.html#without-installation-using-the-phar-file)[手动创建](http://framework.zend.com/manual/2.1/en/modules/zendtool.introduction.html#compile-the-phar-file)。

当我尝试自己编译 Phar 时，出现此错误：

```
user@machine:/lib/ZendFramework/ZFTool# bin/create-phar
PHP Fatal error:  Uncaught exception 'UnexpectedValueException' with message 'RecursiveDirectoryIterator::__construct(/lib/ZendFramework/ZFTool/vendor): failed to open dir: No such file or directory' in /lib/ZendFramework/ZFTool/bin/create-phar:65
Stack trace:
#0 /lib/ZendFramework/ZFTool/bin/create-phar(65): RecursiveDirectoryIterator->__construct('/lib/ZendFramew...')
#1 /lib/ZendFramework/ZFTool/bin/create-phar(26): addDir(Object(Phar), '/lib/ZendFramew...', '/lib/ZendFramew...')
#2 {main}
  thrown in /lib/ZendFramework/ZFTool/bin/create-phar on line 65 
```

它找不到文件夹`/lib/ZendFramework/ZFTool/vendor`...

难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:31:30.053

这是我用来创建 PHAR 存档的过程：

```
git clone git://github.com/zendframework/ZFTool.git
cd ZFTool
curl -s https://getcomposer.org/installer | php
php composer.phar install
./bin/create-phar 
```

您可能错过了 composer 安装，因为它找不到`vendor`目录。

# python - 高效的python聊天服务器

> ID：15512215
> 
> 赞同：1
> 
> 时间：2013-03-19T23:06:12.087
> 
> 标签：python, sockets, chat, asyncore

我现在正在写一个单播聊天服务器模型，流程如下：

*   发送者向聊天服务器发送消息，在消息中服务器还指定消息接收者ID
*   聊天服务器将根据收件人 ID 将消息路由到正确的客户端

我使用 python 标准库 asyncore 实现了聊天服务器模型。我发现一旦客户端连接到服务器，CPU 就会上升（1% 对 24%）。我相信性能受到handle_write函数循环的限制。

是否有更好（例如更高效）的框架来完成我的聊天服务器要求？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T23:12:40.470

当然，我们需要实际的代码来调试问题。但你主要要问的是：

> 是否有更好（例如更高效）的框架来完成我的聊天实现？

是的。人们普遍认为这很`asyncore`糟糕。它很难使用并且效率低下。在 Windows 上尤其糟糕，因为`select`在 Windows 上尤其糟糕。

所以，是的，使用不同的框架可能会让事情变得更好。

不幸的是，一个 SO 问题不是获得框架建议的好地方，但我可以抛出一个常见的嫌疑人列表：[twisted](http://twistedmatrix.com)、[monocle](https://github.com/saucelabs/monocle)、[gevent](http://gevent.org)、[eventlet](http://eventlet.net/)、[tulip](http://www.python.org/dev/peps/pep-3156/)。

或者，如果您不担心超过几十个客户端的可扩展性，只关心小规模的性能，每个客户端使用一个线程（甚至两个线程，一个用于读取，一个用于写入）并阻塞 I/O非常简单。

最后，如果你一直在使用 Python 3.x，那么 3.4 很有可能会有一个新的和改进的异步 I/O 模块，它比它更高效、更容易使用`asyncore`（而且几乎肯定会基于`tulip`)。所以……最好的解决办法可能是买一台时光机，再往前走几个月。（或者，如果您是将来寻找此答案的读者，请查看[IPC](http://docs.python.org/3/library/ipc.html)下的标准库并猜测哪个模块是新的和改进的异步 I/O 模块。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T02:48:06.837

我刚从网上读到，谈论不同 python 网络服务器（[链接](http://nichol.as/benchmark-of-python-web-servers)）之间的效率。

我想我会使用 gevent，因为它非常有效（似乎）。

# sql - SQL 条件 Where 语句？

> ID：15512218
> 
> 赞同：1
> 
> 时间：2013-03-19T23:06:22.733
> 
> 标签：sql, conditional, where, statements

我在一个医院集团工作，我们有多个站点服务器，分为大约 6 个区域。我正在 SCCM 中编写一个 sql 查询并想用站点解析区域，这被证明是一个挑战......我想根据我正在查询的区域做一个选择性的 where 语句，但我不确定如果可以的话。我知道下面的代码被破坏了......特别是 where 行附近的 case 语句。在这种情况下可以使用类似的东西吗？

```
DECLARE @test AS varchar(4) = 'WBR';
SELECT 
    DISTINCT MEMB.Netbios_Name0 AS [Computer Name],
    v_GS_COMPUTER_SYSTEM.Manufacturer0 AS [Computer Manufacturer], 
    v_GS_COMPUTER_SYSTEM.Model0 AS [Computer Model], 
    v_GS_INSTALLED_SOFTWARE_CATEGORIZED.ProductName0 AS [Product Name], 
    v_GS_INSTALLED_SOFTWARE_CATEGORIZED.Publisher0 AS [Publisher],
    v_GS_INSTALLED_SOFTWARE_CATEGORIZED.SoftwareID AS [SoftwareID], 
    MEMB.SiteCode AS [Site],
    CASE MEMB.SiteCode
        When 'AB1' Then 'EBR' 
        When 'AM1' Then 'SSR'
        When 'CMB' Then 'PCR'
        When 'CO1' Then 'WBR'
        When 'CP1' Then 'WBR'
        When 'CUC' Then 'PCR'
        When 'DM1' Then 'EBR'
        When 'EM1' Then 'EBR'
        When 'LS1' Then 'WBR'
        When 'MM1' Then 'CVR'
        When 'MM2' Then 'CVR'
        When 'MP1' Then 'PCR'
        When 'MP2' Then 'PCR'
        When 'NM1' Then 'SSR'
        When 'NV1' Then 'WBR'
        When 'PA1' Then 'PCR'
        When 'PAF' Then 'PCR'
        When 'PDU' Then 'PCR'
        When 'PLA' Then 'PCR'
        When 'PMF' Then 'PCR'
        When 'PMO' Then 'PCR'
        When 'PMP' Then 'PCR'
        When 'POR' Then 'PCR'
        When 'PPV' Then 'PCR'
        When 'PRS' Then 'PCR'
        When 'PSA' Then 'PCR'
        When 'SC1' Then 'CCS'
        When 'SF1' Then 'SSR'
        When 'SG1' Then 'SSR'
        When 'SH1' Then 'PCR'
        When 'SM1' Then 'SSR'
        When 'SR1' Then 'WBR'
        When 'SS1' Then 'CCS'
        When 'SZ1' Then 'PCR'
        When 'SZ2' Then 'PCR'
        When 'VN1' Then 'SCH'
        else 'Unknown'
    end 'Region',
    v_GS_COMPUTER_SYSTEM.UserName0 AS [Last User]

    FROM v_GS_INSTALLED_SOFTWARE_CATEGORIZED 
    INNER JOIN 
    ( 
        select 
            distinct v_R_System_Valid.ResourceID, 
            v_FullCollectionMembership.SiteCode,
            v_R_System_Valid.Netbios_Name0 

            from v_R_System_Valid 
            INNER JOIN v_FullCollectionMembership ON    v_FullCollectionMembership.ResourceID = v_R_System_Valid.ResourceID 

            case @test
                when 'SCAH' Then (where v_FullCollectionMembership.SiteCode='VN1')
                when 'CCS' Then (where v_FullCollectionMembership.SiteCode='SS1' OR v_FullCollectionMembership.SiteCode='SC1' )
                when 'CVR' Then (where v_FullCollectionMembership.SiteCode='MM1' OR v_FullCollectionMembership.SiteCode='MM2')
                when 'EBR' Then (where v_FullCollectionMembership.SiteCode='AB1' OR v_FullCollectionMembership.SiteCode='DM1' OR v_FullCollectionMembership.SiteCode='EM1')
                when 'PCR' Then (where v_FullCollectionMembership.SiteCode='CMB' OR v_FullCollectionMembership.SiteCode='CUC' OR v_FullCollectionMembership.SiteCode='MP1' OR v_FullCollectionMembership.SiteCode='MP2' OR v_FullCollectionMembership.SiteCode='PA1' OR v_FullCollectionMembership.SiteCode='PAF' OR v_FullCollectionMembership.SiteCode='PDU' OR v_FullCollectionMembership.SiteCode='PLA' OR v_FullCollectionMembership.SiteCode='PMF' OR v_FullCollectionMembership.SiteCode='PMO' OR v_FullCollectionMembership.SiteCode='PMP' OR v_FullCollectionMembership.SiteCode='POR' OR v_FullCollectionMembership.SiteCode='PPV' OR v_FullCollectionMembership.SiteCode='PRS' OR v_FullCollectionMembership.SiteCode='PSA' OR v_FullCollectionMembership.SiteCode='SH1' OR v_FullCollectionMembership.SiteCode='SZ1' OR v_FullCollectionMembership.SiteCode='SZ2')
                when 'SSR' Then (where v_FullCollectionMembership.SiteCode='AM1' OR v_FullCollectionMembership.SiteCode='NM1' OR v_FullCollectionMembership.SiteCode='SF1' OR v_FullCollectionMembership.SiteCode='SG1' OR v_FullCollectionMembership.SiteCode='SM1')
                when 'WBR' Then (where v_FullCollectionMembership.SiteCode='CO1' OR v_FullCollectionMembership.SiteCode='CP1' OR v_FullCollectionMembership.SiteCode='LS1' OR v_FullCollectionMembership.SiteCode='NV1' OR v_FullCollectionMembership.SiteCode='SR1')
            end
            --SCAH
            --where v_FullCollectionMembership.SiteCode='VN1'
            --CCS
            --where v_FullCollectionMembership.SiteCode='SS1' OR v_FullCollectionMembership.SiteCode='SC1' 
            --CVR
            --where v_FullCollectionMembership.SiteCode='MM1' OR v_FullCollectionMembership.SiteCode='MM2'
            --EBR
            --where v_FullCollectionMembership.SiteCode='AB1' OR v_FullCollectionMembership.SiteCode='DM1' OR v_FullCollectionMembership.SiteCode='EM1'
            --PCR
            --where v_FullCollectionMembership.SiteCode='CMB' OR v_FullCollectionMembership.SiteCode='CUC' OR v_FullCollectionMembership.SiteCode='MP1' OR v_FullCollectionMembership.SiteCode='MP2' OR v_FullCollectionMembership.SiteCode='PA1' OR v_FullCollectionMembership.SiteCode='PAF' OR v_FullCollectionMembership.SiteCode='PDU' OR v_FullCollectionMembership.SiteCode='PLA' OR v_FullCollectionMembership.SiteCode='PMF' OR v_FullCollectionMembership.SiteCode='PMO' OR v_FullCollectionMembership.SiteCode='PMP' OR v_FullCollectionMembership.SiteCode='POR' OR v_FullCollectionMembership.SiteCode='PPV' OR v_FullCollectionMembership.SiteCode='PRS' OR v_FullCollectionMembership.SiteCode='PSA' OR v_FullCollectionMembership.SiteCode='SH1' OR v_FullCollectionMembership.SiteCode='SZ1' OR v_FullCollectionMembership.SiteCode='SZ2'
            --SSR
            --where v_FullCollectionMembership.SiteCode='AM1' OR v_FullCollectionMembership.SiteCode='NM1' OR v_FullCollectionMembership.SiteCode='SF1' OR v_FullCollectionMembership.SiteCode='SG1' OR v_FullCollectionMembership.SiteCode='SM1'
            --WBR
            --where v_FullCollectionMembership.SiteCode='CO1' OR v_FullCollectionMembership.SiteCode='CP1' OR v_FullCollectionMembership.SiteCode='LS1' OR v_FullCollectionMembership.SiteCode='NV1' OR v_FullCollectionMembership.SiteCode='SR1'
    ) MEMB on MEMB.ResourceID = v_GS_INSTALLED_SOFTWARE_CATEGORIZED.ResourceID 
    INNER JOIN v_GS_COMPUTER_SYSTEM on v_GS_COMPUTER_SYSTEM.ResourceID = MEMB.ResourceID 

    where v_GS_INSTALLED_SOFTWARE_CATEGORIZED.SoftwareID = '76F63E67-3A8F-4675-9FB1-08A3E40CE9FE'
    --where v_GS_INSTALLED_SOFTWARE_CATEGORIZED.SoftwareID = @SoftwareID
    Order by MEMB.Netbios_Name0 ASC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T23:23:02.973

如果你想做一个“选择性where”子句，你也可以使用动态sql。

```
 declare @sql varchar(max)
set @sql = 'select * from table '
if( @regions = '??')
  set @sql = @sql + ' where ....'
else if( @regions = '???' )
  set @sql = @sql + ' where ...'
exec(@sql) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T23:19:33.477

你不能`where`发表声明：

```
 (case when @test = 'SCAH' and v_FullCollectionMembership.SiteCode='VN1' then 'true'
        when @test = 'CCS' and e v_FullCollectionMembership.SiteCode in ('SS1', 'SC1') 
        . . .
  end) = 'true' 
```

我建议将其移至一个`where`子句，而不是试图将其保留在该`on`子句中。如果它留在`on`子句中，您需要在它前面加上`and`（或`or`，取决于逻辑）。

# python - 在pyqt中模拟鼠标移动

> ID：15512220
> 
> 赞同：4
> 
> 时间：2013-03-19T23:06:24.933
> 
> 标签：python, qt, pyqt

我想知道如何在小部件中模拟鼠标移动。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T23:18:36.867

QCursor 允许您设置位置： [http ://pyqt.sourceforge.net/Docs/PyQt4/qcursor.html](http://pyqt.sourceforge.net/Docs/PyQt4/qcursor.html)

大多数 QWidget 方法应该允许您以一种或另一种方式找到光标。

编辑：例如

```
cursor = mywidget.getCursor() # or event.getCursor()
pos = cursor.pos()
cursor.setPos((pos[0]+1, pos[1]+1)) 
```

应该在每个方向上移动 1 个像素

# java - Java GUI 一直挂起

> ID：15512224
> 
> 赞同：0
> 
> 时间：2013-03-19T23:06:43.843
> 
> 标签：java, swing, oop, event-handling

嘿，伙计们需要你的帮助来解决我的代码中出现的这个 java 问题，我已经创建了一个 GUI，它本质上被用作赛车模拟器，我的事件为我的 GUI 工作，除了我的 startrace 事件，这是一个启动按钮比赛，iv 只完成了比赛的第一部分，但没有成功，所以我想在继续之前解决问题。很难解释我显示代码会更容易（如下所示），我不想被勺子喂食，所以请不要开始给我糟糕的选票并说我没有提供足够的细节，因为我真的不知道是什么更多我可以说我要写的。我不知道问题是什么。当我调试它（​​因为我使用 Eclipse IDE）时，不起作用的部分只会使整个窗口变黑，大约一分钟内什么都没有显示，然后它会跳过大部分代码，甚至不做其余的工作。如果您需要更多信息，请询问我，我会告诉您我只是人类，不知道您希望我推迟的每个细节。我有很多课程，但它们可能会让你们更加困惑，所以我只粘贴我遇到问题的课程。

（注：SportCar- 是一个超类，有 5 个子类（Astonmatin、Audi、Ferrari、Porsche、Lamborghini））

（注意：Track 本身是一个带有 GUI 界面的类，它是一个大类，使用 SportsCar 及其子类中的变量和方法，所有这些方法和变量都不是问题）

（注意：问题出在actionPerformed（ActionEvent startrace）中）我希望我提供了足够的细节，欢迎任何帮助。提前谢谢你。

```
 import java.awt.*;
   import java.awt.event.*;
   import javax.swing.*;
   import java.awt.GridLayout;

public class Track extends JFrame {

    private JComboBox ChooseYourCar;
    private JComboBox ChooseOppsCar; 
    private JButton StartRace;
    private JTextArea CheckYourCarAtts;
    private JTextArea CheckOppsCarAtts;
    private JTextArea Commentry; 
    private String temp;
    private String temp1;
    private String[] Cars = {"Choose Car Please ","Aston martin","Audi","Ferrari","Porsche","Lamborghini"};
    private int counter=0;
    private JTextField[] Green= new JTextField[11];
    private JTextField[] Green1= new JTextField[11];
    private JPanel Track = new JPanel();
    private SportCar first;
    private SportCar Second;

    public Track(){
        JPanel Center = new JPanel();
        JPanel West = new JPanel();
        JPanel East= new JPanel();
        JPanel North = new JPanel();
        Track.setLayout(new GridLayout(2,11,0,3));

        while (counter!=11)
        {

            Green[counter]= new JTextField("");
            Green[counter].setBackground(Color.GREEN);
            Green1[counter]= new JTextField("");
            Green1[counter].setBackground(Color.GREEN);
            counter++;  
             }

        counter= 0;
        while (counter!=11){
        Track.add(Green[counter]);
        counter++;

        }

        counter= 0;
        while (counter!=11){
            Track.add(Green1[counter]);
            counter++;

        }

        add(West, BorderLayout.WEST);
        add(Center, BorderLayout.CENTER);
        add(East, BorderLayout.EAST);
        add(North,BorderLayout.NORTH);
        add(Track,BorderLayout.SOUTH);

        ChooseYourCar = new JComboBox(Cars);
        West.add(ChooseYourCar);
        ChooseOppsCar = new JComboBox(Cars);
        West.add(ChooseOppsCar);
        StartRace = new JButton("Start Race");
        East.add(StartRace);
        CheckYourCarAtts = new JTextArea(12,30);
        CheckYourCarAtts.setBackground(Color.RED);
        Center.add(CheckYourCarAtts);
        CheckOppsCarAtts = new JTextArea(12,30);
        CheckOppsCarAtts.setBackground(Color.RED);
        Center.add(CheckOppsCarAtts);
        Commentry = new JTextArea(2,50);
        North.add(Commentry);

        event chooseyourcar = new event();
        ChooseYourCar.addActionListener(chooseyourcar);
        event1 Chooseoppscar = new event1();
        ChooseOppsCar.addActionListener(Chooseoppscar);
        event2 startrace = new event2();
        StartRace.addActionListener(startrace);

    }
    public class event implements ActionListener{
        public void actionPerformed(ActionEvent chooseyourcar){
            if(ChooseYourCar.getSelectedItem()=="Aston martin")
            {
                SportCar AstonMartin = new Astonmartin(400,1.0,1200,220);
                String str=("ASTON MARTIN\n"+"This is the Car You have currently Selected \n" +"Horsepower: " +AstonMartin.getHorsepower()+"\n"+ "Weight: "+ AstonMartin.getWeight()+ "\n"+ "Topspeed: "+ AstonMartin.getTopspeed()+ "\n"+ "The car goes from 0-60Mph(secs) in: "+ AstonMartin.acceleration()+ "\n"+ "The Fuel Consumption is: "+ AstonMartin.GetFuelConsumption());
                CheckYourCarAtts.setText(str);
            }
            if(ChooseYourCar.getSelectedItem()=="Audi")
            {
                SportCar Audi = new Audi(300,1.2,1200,200);
                String str=("AUDI\n"+"This is the Car You have currently Selected\n" +"Horsepower: " +Audi.getHorsepower()+"\n"+ "Weight: "+ Audi.getWeight()+ "\n"+ "Topspeed: "+ Audi.getTopspeed()+ "\n"+ "The car goes from 0-60Mph(secs) in: "+ Audi.acceleration()+ "\n"+ "The Fuel Consumption is: "+ Audi.GetFuelConsumption());
                CheckYourCarAtts.setText(str);
            }
            if(ChooseYourCar.getSelectedItem()=="Ferrari")
            {
                SportCar Ferrari = new Ferrari(440,0.8,900,260);
                String str=("FERRARI\n"+"This is the Car You have currently Selected\n" +"Horsepower: " +Ferrari.getHorsepower()+"\n"+ "Weight: "+ Ferrari.getWeight()+ "\n"+ "Topspeed: "+ Ferrari.getTopspeed()+ "\n"+ "The car goes from 0-60Mph(secs) in: "+ Ferrari.acceleration()+ "\n"+ "The Fuel Consumption is: "+ Ferrari.GetFuelConsumption());
                CheckYourCarAtts.setText(str);
            }
            if(ChooseYourCar.getSelectedItem()=="Porsche")
            {
                SportCar Porsche = new Porsche(380,0.9,1000,220);
                String str=("PORSCHE\n"+"This is the Car You have currently Selected\n" +"Horsepower: " +Porsche.getHorsepower()+"\n"+ "Weight: "+ Porsche.getWeight()+ "\n"+ "Topspeed: "+ Porsche.getTopspeed()+ "\n"+ "The car goes from 0-60Mph(secs) in: "+ Porsche.acceleration()+ "\n"+ "The Fuel Consumption is: "+ Porsche.GetFuelConsumption());
                CheckYourCarAtts.setText(str);
            }
            if(ChooseYourCar.getSelectedItem()=="Lamborghini")
            {
                SportCar Lamborghini = new Lamborghini(440,0.7,900,250);
                String str=("LAMBORGHINI\n"+"This is the Car You have currently Selected\n" +"Horsepower: " +Lamborghini.getHorsepower()+"\n"+ "Weight: "+ Lamborghini.getWeight()+ "\n"+ "Topspeed: "+ Lamborghini.getTopspeed()+ "\n"+ "The car goes from 0-60Mph(secs) in: "+ Lamborghini.acceleration()+ "\n"+ "The Fuel Consumption is: "+ Lamborghini.GetFuelConsumption());
                CheckYourCarAtts.setText(str);
            }

} 
```

}

```
 public class event1 implements ActionListener{
            public void actionPerformed(ActionEvent chooseoppscar){
                if(ChooseOppsCar.getSelectedItem()=="Aston martin")
                {
                    SportCar AstonMartin = new Astonmartin(400,1.0,1200,220);
                    String str=("ASTON MARTIN\n"+"This is the Car You have currently Selected\n" +"Horsepower: " +AstonMartin.getHorsepower()+"\n"+ "Weight: "+ AstonMartin.getWeight()+ "\n"+ "Topspeed: "+ AstonMartin.getTopspeed()+ "\n"+ "The car goes from 0-60Mph(secs) in: "+ AstonMartin.acceleration()+ "\n"+ "The Fuel Consumption is: "+ AstonMartin.GetFuelConsumption());
                    CheckOppsCarAtts.setText(str);
                }
                if(ChooseOppsCar.getSelectedItem()=="Audi")
                {
                    SportCar Audi = new Audi(300,1.2,1200,200);
                    String str=("AUDI\n"+"This is the Car You have currently Selected\n" +"Horsepower: " +Audi.getHorsepower()+"\n"+ "Weight: "+ Audi.getWeight()+ "\n"+ "Topspeed: "+ Audi.getTopspeed()+ "\n"+ "The car goes from 0-60Mph(secs) in: "+ Audi.acceleration()+ "\n"+ "The Fuel Consumption is: "+ Audi.GetFuelConsumption());
                    CheckOppsCarAtts.setText(str);
                }
                if(ChooseOppsCar.getSelectedItem()=="Ferrari")
                {
                    SportCar Ferrari = new Ferrari(440,0.8,900,260);
                    String str=("FERRARI\n"+"This is the Car You have currently Selected\n" +"Horsepower: " +Ferrari.getHorsepower()+"\n"+ "Weight: "+ Ferrari.getWeight()+ "\n"+ "Topspeed: "+ Ferrari.getTopspeed()+ "\n"+ "The car goes from 0-60Mph(secs) in: "+ Ferrari.acceleration()+ "\n"+ "The Fuel Consumption is: "+ Ferrari.GetFuelConsumption());
                    CheckOppsCarAtts.setText(str);
                }
                if(ChooseOppsCar.getSelectedItem()=="Porsche")
                {
                    SportCar Porsche = new Porsche(380,0.9,1000,220);
                    String str=("PORSCHE\n"+"This is the Car You have currently Selected\n" +"Horsepower: " +Porsche.getHorsepower()+"\n"+ "Weight: "+ Porsche.getWeight()+ "\n"+ "Topspeed: "+ Porsche.getTopspeed()+ "\n"+ "The car goes from 0-60Mph(secs) in: "+ Porsche.acceleration()+ "\n"+ "The Fuel Consumption is: "+ Porsche.GetFuelConsumption());
                    CheckOppsCarAtts.setText(str);
                }
                if(ChooseOppsCar.getSelectedItem()=="Lamborghini")
                {
                    SportCar Lamborghini = new Lamborghini(440,0.7,900,250);
                    String str=("LAMBORGHINI\n"+"This is the Car You have currently Selected\n" +"Horsepower: " +Lamborghini.getHorsepower()+"\n"+ "Weight: "+ Lamborghini.getWeight()+ "\n"+ "Topspeed: "+ Lamborghini.getTopspeed()+ "\n"+ "The car goes from 0-60Mph(secs) in: "+ Lamborghini.acceleration()+ "\n"+ "The Fuel Consumption is: "+ Lamborghini.GetFuelConsumption());
                    CheckOppsCarAtts.setText(str);
                }
    }
}   

        public class event2 implements ActionListener{
            public void actionPerformed(ActionEvent startrace){ 
                if(ChooseYourCar.getSelectedItem()=="Aston martin")
                {
                    SportCar AstonMartin = new Astonmartin(400,1.0,1200,220);
                    first= AstonMartin;
                }
                if(ChooseYourCar.getSelectedItem()=="Audi")
                {
                    SportCar Audi = new Audi(300,1.2,1200,200);
                     first= Audi;
                }
                if(ChooseYourCar.getSelectedItem()=="Ferrari")
                {
                    SportCar Ferrari = new Ferrari(440,0.8,900,260);
                      first= Ferrari;
                }
                if(ChooseYourCar.getSelectedItem()=="Porsche")
                {
                    SportCar Porsche = new Porsche(380,0.9,1000,220);
                     first= Porsche;
                }
                if(ChooseYourCar.getSelectedItem()=="Lamborghini")
                {
                    SportCar Lamborghini = new Lamborghini(440,0.7,900,250);
                    first= Lamborghini;
                }

                if(ChooseOppsCar.getSelectedItem()=="Aston martin")
                {
                    SportCar AstonMartin = new Astonmartin(400,1.0,1200,220);
                    Second= AstonMartin;
                }
                if(ChooseOppsCar.getSelectedItem()=="Audi")
                {
                    SportCar Audi = new Audi(300,1.2,1200,200);
                     Second= Audi;
                }
                if(ChooseOppsCar.getSelectedItem()=="Ferrari")
                {
                    SportCar Ferrari = new Ferrari(440,0.8,900,260);
                      Second= Ferrari;
                }
                if(ChooseOppsCar.getSelectedItem()=="Porsche")
                {
                    SportCar Porsche = new Porsche(380,0.9,1000,220);
                    Second= Porsche;
                }
                if(ChooseOppsCar.getSelectedItem()=="Lamborghini")
                {
                    SportCar Lamborghini = new Lamborghini(450,0.7,900,250);
                    Second= Lamborghini;
                }

                ChooseYourCar.setVisible(false);
                ChooseOppsCar.setVisible(false);

                Commentry.setText("IT IS TIME TO GET THE SIMLATION UNDER WAY, THE TWO CARS HAVE BEEN CHOOSEN AND THERE ATTRIBUTES ARE BELOW.");
                try {
                    Thread.sleep(5000);
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                Track.setLocation(1, 1);
                Track.setBackground(Color.BLACK);
                Track.setLocation(2, 1);
                Track.setBackground(Color.ORANGE);
                Commentry.setText("THE CARS ARE NOW IN PLACE IN BLACK WE HAVE "+ first.getName()+"\n"+"WHILE OUR OTHER CAR IN ORANGE, WE HAVE "+ Second.getName());
                try {
                    Thread.sleep(5000);
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                Commentry.setText("LETS RACE");
                try {
                    Thread.sleep(2000);
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                Commentry.setText("3");
                try {
                    Thread.sleep(2000);
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                Commentry.setText("2");
                try {
                    Thread.sleep(2000);
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                Commentry.setText("1");
                try {
                    Thread.sleep(2000);
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                Commentry.setText("GO");

                double firstCurrentPosition = (first.getcurrentspeed()+first.getGrip());
                double secondCurrentPosition = (Second.getcurrentspeed()+Second.getGrip());
                if(firstCurrentPosition>secondCurrentPosition){
                    Track.setLocation(1, 1);
                    Track.setBackground(Color.GREEN);
                    Track.setLocation(2, 1);
                    Track.setBackground(Color.GREEN);

                    Track.setLocation(1, 3);
                    Track.setBackground(Color.BLACK);
                    Track.setLocation(2, 2);
                    Track.setBackground(Color.ORANGE);
                   Commentry.setText("WOW "+ firstCurrentPosition+ " "+ secondCurrentPosition);
                  }

        }

        }

    public static void main(String[] args) {
        // TODO Auto-generated method stub
       Track window = new Track();
       window.setDefaultCloseOperation(EXIT_ON_CLOSE);
       window.setSize(750,530);
       window.setVisible(true);
       window.setTitle("Car Race Simulator");

       }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T08:42:26.143

我很难抓住你的问题，过了一会儿我明白标题“Java GUI 不断崩溃”实际上意味着“Java GUI 挂起”。

非常清楚的案例：您在“event2.actionPerformed()”方法中做了太多工作[因为 Thread.sleep() 调用]，所以事件调度线程 [也称为 EDT]，它调用了“actionPerfomed( )" 所有侦听器的方法，在该长时间运行的方法完成之前被阻塞。因此，在您按下 StartRace 按钮后，GUI“挂起”了很长一段时间！

简单的答案：使用[SwingWorker](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)（自 Java 6 起在 Java 运行时可用）！这里有两个很好的例子：

*   [如何在 Java 中使用 SwingWorker？](https://stackoverflow.com/questions/782265/how-do-i-use-swingworker-in-java)
*   [使用 SwingWorker 在后台完成复杂的任务](https://stackoverflow.com/questions/11255925/use-of-swingworker-to-do-complex-tasks-in-background)

我会更详细地解释对 SwingWorker 的需求，但是网上已经有很多很好的解释，例如

*   [自定义 SwingWorker 以改进 Swing GUI](http://www.javaworld.com/javaworld/jw-06-2003/jw-0606-swingworker.html)
*   [SwingWorker 上的维基百科](http://en.wikipedia.org/wiki/SwingWorker)

PS
更多信息：在工人类中移动长时间运行的代码，例如

```
 class RaceWorker extends SwingWorker<Void, Void> {
        @Override
        protected Void doInBackground() throws Exception {
            // ... long running code here ...
            return null;
        }
    } 
```

所以“actionPerformed()”方法看起来像：

```
 public void actionPerformed(ActionEvent startrace) {
        new RaceWorker().execute();
    } 
```

PPS
顺便说一句......我预测你会很艰难，不是实现，而是代码：例如，一旦你尝试从 StartWorker 访问当前名为“Track”的成员变量，编译器就会混淆它带有“Track”类名，将拒绝编译。我的（未提出的）建议：首先清理方法、变量和成员变量的命名，然后使用 SwingWorker 进行重构。这样，您将节省大量时间和麻烦。[这篇关于命名约定/Java](http://en.wikipedia.org/wiki/Naming_convention_%28programming%29#Java)的维基百科文章对常用 Java 代码约定进行了简要概述，这对于您的代码应该足够了[我个人确实使用“实例变量上的下划线”，但这是一个品味和经验的问题]。为了完整起见：“官方”[甲骨文](http://www.oracle.com/technetwork/java/codeconv-138413.html)。

# git - Git 分支与在不同工作目录中的主分支上工作

> ID：15512225
> 
> 赞同：0
> 
> 时间：2013-03-19T23:06:44.553
> 
> 标签：git

假设您有一个名为 foo_bar 的项目，并且您正在为一些新功能编写一些代码...进行提交...然后推送到原点。也许现在您与几个同事共享您的项目的链接。现在假设您想在这方面做更多工作，但您不想弄乱您当前的生产代码。为什么要创建另一个分支**而不是**创建另一个工作目录，编辑主分支直到你拥有它想要的方式，当它准备好时推送到原点，然后将它拉到生产仓库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T23:16:07.767

您直接编辑主分支的替代方法很好，这本身没有问题。当您想与另一位同事分享您的新更改时，您将获得创建新分支的好处，该同事随后也会做出贡献，然后再合并回主分支。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T23:34:17.297

通过在单个存储库和工作目录中创建多个分支，您在切换分支时无需更改开发环境的任何内容：您的工作目录可能始终是`/path/to/myproject`您在主分支或功能分支上工作。

如果这对您不重要，那么将存储库克隆到另一个目录并将其用作您的第二个分支是完全合理的。事实上，Mercurial 的文档明确提到了这种分支方法，它同样适用于 Git。

# jquery - jquery ajax回调获取空数据

> ID：15512226
> 
> 赞同：0
> 
> 时间：2013-03-19T23:06:45.697
> 
> 标签：jquery, ajax, rest, knockout.js, jsonp

我正在使用 knockout.js 结合 jQuery ajax 调用将数据绑定到返回 JSON 以获取数据的 restful 服务。我对此进行了各种尝试，但似乎无法正确理解调用的语法。当我触发回调时，数据为空。在 fiddler 中，JSON 数据通过并且数据在 jsonlint.com 上验证就好了。我在错误处理程序中获得 200 状态以及 parseerror，而 errorThrown 包含“未调用 parseAcademicSessions”。

这是我进行 ajax 调用的淘汰视图模型的代码：

```
function HomeViewModel() {
var self = this;
self.AcademicSessions = ko.observableArray([]);
self.hello = 'Hi ...';
$.ajax({
    url: 'http://localhost:51044/Rest/GetAcademicSessions',
    dataType: 'jsonp',
    type: 'GET',
    jsonp: false,
    jsonpCallback: 'parseAcademicSessions',
    crossDomain: true,
    success: function (data) {
        $('#academicSessionsDiv').css('color', 'black');
        for (var ii = 0; data && ii < data.length; ii++) {
            if (data[ii].Year < 2012 || data[ii].Year > 2013) continue;
            var beginDate = new Date(data[ii].BeginDate.match(/\d+/)[0] * 1);
            var session = new AcademicSession(beginDate.toString("ddd MMM dd, yyyy"), data[ii].CatalogCode,
                                              data[ii].CatalogDescription, data[ii].CatalogYear, data[ii].Description,
                                              data[ii].SessionCode, data[ii].Year);
            self.AcademicSessions.push(session);
        }
    },
    error: function (jqXhr, status, errorThrown) {
        $('#academicSessionsDiv').css('color', 'red');
        $('#academicSessionsDiv').html("<table class='session-table'><tr><td>Status</td><td>"
                                        + status + "</td></tr><tr><td>JQXHR.Status</td><td>"
                                        + jqXhr.status + "</td></tr><tr><td>Error Thrown</td><td>"
                                        + errorThrown + "</td></tr></table>");
    }
}); 
```

};

parseAcademicSessions 函数与成功函数中的代码相同。我在堆栈溢出时根据此处的其他答案尝试了各种调整。似乎没有一个工作。

谢谢，迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:02:06.833

[鉴于文档对jsonp](http://api.jquery.com/jQuery.ajax/)的说法，不确定为什么这有效，但是当我选择该`jsonp`选项时，以下方法有效。It doesn't when the option is there:

```
var URL = "http://www.geonames.org/postalCodeLookupJSON" +
"?postalcode=10504&country=US";
function alertResponse(data, status) {
    console.log(data); return JSON.stringify(data);
}
$.ajax({
    url: URL, crossDomain:true,
    dataType: 'jsonp',
    jsonpCallback: 'alertResponse',
 }).done(function(data){console.log(data)}); 
```

# macos - Playframework重新加载不起作用Mac OSX

> ID：15512229
> 
> 赞同：5
> 
> 时间：2013-03-19T23:06:55.350
> 
> 标签：macos, playframework, reload

由于我安装了最后一个 Mac OS 更新（Mac OS X 10.8.3），自动重新加载在 Play 2.1.0 中停止工作。当我更改文件并保存它时，文件会被编译（使用 ~run 运行时），但是当我在我的网络浏览器上点击重新加载（已经尝试使用 Chrome 和 Safari）时，Play Framework 不会重新加载页面。我已经尝试过清理，清理所有，重新启动我的 Mac，但没有解决问题。

你有什么解决办法吗？

谢谢，

菲利普

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T00:29:09.170

我对 play 2.1.0 有同样的问题，我认为这与 Jnotify 有关

# playframework-2.0 - 禁用缓存

> ID：15512230
> 
> 赞同：0
> 
> 时间：2013-03-19T23:07:11.860
> 
> 标签：playframework-2.0

我有一个在 POST 请求后查看的网站。以正常方式离开网站后，我想保护它，这样没有人可以使用后退/前进按钮导航回它。我添加了带有无缓存参数的标头 Cache-Control 和 Pragma。我还添加了一个值为 -1 的 Expires 标头，这也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T23:35:37.513

您不应该因为 POST 请求而显示任何页面，而是使用重定向到某个 GET 视图...

它不会阻止您阻止浏览器的后退操作，无论如何它会避免在意外刷新时重新发送请求。

# clojure - 游戏循环中的 Clojure Refs 状态：为什么它变得越来越慢？

> ID：15512231
> 
> 赞同：1
> 
> 时间：2013-03-19T23:07:11.870
> 
> 标签：clojure, ref

我正在尝试根据上一步更新每个步骤的地图。我有一个 ref 是数字向量的向量，为了模糊我的世界地图，我向左、向右、向上和向下旋转，然后平均我的四个新世界地图。我将此更新作为主循环中的“更改”。它最初很快，但越来越慢。我是否没有以某种我不知道的方式放开我的脑袋？似乎它在每一步都进行了所有先前的计算。这是我的代码：

我定义地图：

```
 (def gradient-map
       (ref( vec (repeat columns (vec (repeat rows 0)))))) 
```

这是我的更新功能：

```
(defn rotate-grid-up [grid]
  (map #(concat (rest %) [(last %)]) grid))
(defn rotate-grid-down [grid]
  (map #(concat [(first %)] (drop-last %)) grid))
(defn rotate-grid-right [grid]
  (concat [(first grid)] (drop-last grid)))
(defn rotate-grid-left [grid]
  (concat (rest grid) [(last grid)]))

(defn blur [grid]
  (let [g1 (rotate-grid-up grid)
        g2 (rotate-grid-down grid)
        g3 (rotate-grid-left grid)
        g4 (rotate-grid-right grid)]
   (vec (map
     (fn [r1 r2 r3 r4 r5]
       (vec (map
        #(/ (+ %1 %2 %3 %4 %5) 5)
        r1 r2 r3 r4 r5)))
     g1 g2 g3 g4 grid)))) 
```

然后在我的绘图循环中，我模糊了每个 tic

```
(dosync (alter gradient-map blur)) 
```

并且绘制循环减慢到爬行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T05:07:13.610

该代码创建了太多向量，导致内存使用和 gc 增加。

您可以尝试不创建向量，懒惰地做所有事情，或者您可以最小化它们的创建。或者，您可以改为使用矩阵库（例如 core.matrix 或 Incanter）。

另外，无关的，您需要游戏状态的参考吗？如果没有与其他此类事物的依赖关系，那么一个原子是否就足够了？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:41:30.860

在我相当新的计算机上，1000x1000 网格的模糊大约需要 2.7 秒。您的世界地图是否会随着时间的推移而增长？

# jquery - 使用 jquery .load() 函数进行无限滚动

> ID：15512236
> 
> 赞同：0
> 
> 时间：2013-03-19T23:07:30.423
> 
> 标签：jquery, scroll, load, infinite

在 Wordpress 博客页面中，我正在尝试使用 jquery .load() 函数加载内容：

```
<div id="s1"> 1 </div>
<div id="s2"> 2 </div>
<div id="s3"> 3 </div>

<script type="text/javascript">
$("#s1").load("/2013 article.item-list");
$("#s2").load("/2013/page/2/ article.item-list");
$("#s3").load("/2013/page/3/ article.item-list");
</script> 
```

直到这里，一切正常。
但是我希望`<div id="s2">`在我向下滚动时加载内容，例如延迟加载，等等每个 next `<div>`。就像在 mashable.com 上一样

我尝试使用 jscroll 和 Infinite Scroll jQuery Plugin，但我不知道如何使它工作。

请有人给我一个提示！提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:43:09.520

使用滚动事件处理程序，然后使用 scrollTop() 和 innerHeight() 来确定您是否在 div 的末尾。当您调用另一个负载时。

```
$('#s1').on('scroll', function(){

     if($(this).scrollTop()+ $(this).innerHeight() >= $(this).scrollHeight)
                  $("#s2").load("/2013/page/2/ article.item-list");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T07:54:46.150

从 krosullivan ideea，我编写了这段代码并且工作正常（演示：http: [//jsfiddle.net/w7X9N/272/](http://jsfiddle.net/w7X9N/272/)）。

但是当我在我的网站上测试它时，它不起作用。我必须设置`height:500px;`和设置`overflow:auto;`属性以`<div="lazy">`使其工作（就像在我的演示中一样）。

有任何想法吗 ？

```
<div id="lazy">
<div id="s1">1</div>
<div id="s2">2</div>
<div id="s3">3</div>
</div>

<script type="text/javascript">
jQuery(
function($) {
    $("#s1").load("/2013/ article.item-list");
    $('#lazy').bind('scroll', function()
    {
        if($(this).scrollTop() + $(this).innerHeight()>=$(this)[0].scrollHeight)
        {
            $("#s2").load("/2013/page/2/ article.item-list");
            $('#lazy').bind('scroll', function()
            {
                if($(this).scrollTop() + $(this).innerHeight()>=$(this)[0].scrollHeight)
                {
                    $("#s3").load("/2013/page/3/ article.item-list");   
                }                                 
            })
        }                                 
    })
});
</script>` 
```

# internet-explorer - 我如何强制用户升级他们的浏览器而不丢失它们？

> ID：15512237
> 
> 赞同：1
> 
> 时间：2013-03-19T23:07:30.553
> 
> 标签：internet-explorer, plugins, browser, upgrade, user-management

有几种方法可以说服或强制用户升级 IE。但是当他们这样做时，有没有办法传递一个参数，以便他们在升级完成后最终回到您的站点？

谢谢

# python - python：获取频道的所有 youtube 视频网址

> ID：15512239
> 
> 赞同：15
> 
> 时间：2013-03-19T23:07:34.997
> 
> 标签：python, youtube, youtube-api

我想获取特定频道的所有视频网址。我认为 json 与 python 或 java 将是一个不错的选择。我可以使用以下代码获取最新视频，但如何获取所有视频链接（>500）？

```
import urllib, json
author = 'Youtube_Username'
inp = urllib.urlopen(r'http://gdata.youtube.com/feeds/api/videos?max-results=1&alt=json&orderby=published&author=' + author)
resp = json.load(inp)
inp.close()
first = resp['feed']['entry'][0]
print first['title'] # video title
print first['link'][0]['href'] #url 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2017-07-02T13:02:27.767

youtube API 更改后，max k. 的答案不起作用。作为替代，下面的函数提供给定频道中的 youtube 视频列表。请注意，您需要一个[API 密钥](https://developers.google.com/youtube/v3/getting-started "API 密钥")才能使其工作。

```
import urllib
import json

def get_all_video_in_channel(channel_id):
    api_key = YOUR API KEY

    base_video_url = 'https://www.youtube.com/watch?v='
    base_search_url = 'https://www.googleapis.com/youtube/v3/search?'

    first_url = base_search_url+'key={}&channelId={}&part=snippet,id&order=date&maxResults=25'.format(api_key, channel_id)

    video_links = []
    url = first_url
    while True:
        inp = urllib.urlopen(url)
        resp = json.load(inp)

        for i in resp['items']:
            if i['id']['kind'] == "youtube#video":
                video_links.append(base_video_url + i['id']['videoId'])

        try:
            next_page_token = resp['nextPageToken']
            url = first_url + '&pageToken={}'.format(next_page_token)
        except:
            break
    return video_links 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-19T23:16:55.643

将 max-results 从 1 增加到您想要的任意数量，但要注意他们不建议在一次通话中抓取太多，并且会将您限制在 50（[https://developers.google.com/youtube/2.0/developers_guide_protocol_api_query_parameters](https://developers.google.com/youtube/2.0/developers_guide_protocol_api_query_parameters)）。

相反，您可以考虑以 25 个为一组来抓取数据，例如，通过更改 start-index 直到没有返回。

编辑：这是我将如何做的代码

```
import urllib, json
author = 'Youtube_Username'

foundAll = False
ind = 1
videos = []
while not foundAll:
    inp = urllib.urlopen(r'http://gdata.youtube.com/feeds/api/videos?start-index={0}&max-results=50&alt=json&orderby=published&author={1}'.format( ind, author ) )
    try:
        resp = json.load(inp)
        inp.close()
        returnedVideos = resp['feed']['entry']
        for video in returnedVideos:
            videos.append( video ) 

        ind += 50
        print len( videos )
        if ( len( returnedVideos ) < 50 ):
            foundAll = True
    except:
        #catch the case where the number of videos in the channel is a multiple of 50
        print "error"
        foundAll = True

for video in videos:
    print video['title'] # video title
    print video['link'][0]['href'] #url 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-06-16T04:57:20.930

根据此处和其他一些地方的代码，我编写了一个小脚本来执行此操作。我的脚本使用了 Youtube 的 API v3，并且没有达到 Google 为搜索设置的 500 个结果限制。

该代码可在 GitHub 上获得：[https ://github.com/dsebastien/youtubeChannelVideosFinder](https://github.com/dsebastien/youtubeChannelVideosFinder)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2021-06-25T09:15:59.403

简短的回答：

这是一个可以提供帮助的库。

`pip install scrapetube`

```
import scrapetube

videos = scrapetube.get_channel("UC9-y-6csu5WGm29I7JiwpnA")

for video in videos:
    print(video['videoId']) 
```

长答案：

由于缺乏任何其他解决方案，上述模块是由我创建的。这是我尝试过的：

1.  硒。它有效，但有三大缺点： 1\. 它需要安装网络浏览器和驱动程序。2\. 对 CPU 和内存有很大的要求。3.不能处理大频道。
2.  使用 youtube-dl。像这样：

```
import youtube_dl
    youtube_dl_options = {
        'skip_download': True,
        'ignoreerrors': True
    }
    with youtube_dl.YoutubeDL(youtube_dl_options) as ydl:
        videos = ydl.extract_info(f'https://www.youtube.com/channel/{channel_id}/videos') 
```

这也适用于小频道，但对于较大的频道，我会因为在这么短的时间内发出如此多的请求而被 youtube 阻止（因为 youtube-dl 会为频道中的每个视频下载更多信息）。

所以我创建了`scrapetube`一个使用 Web API 来获取所有视频的库。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-08-22T11:45:34.443

独立的做事方式。没有api，没有速率限制。

```
import requests
username = "marquesbrownlee"
url = "https://www.youtube.com/user/username/videos"
page = requests.get(url).content
data = str(page).split(' ')
item = 'href="/watch?'
vids = [line.replace('href="', 'youtube.com') for line in data if item in line] # list of all videos listed twice
print(vids[0]) # index the latest video 
```

上面的代码将仅废弃有限数量的视频 url，最多 60 个。如何抓取频道中存在的所有视频 url。你能建议一下吗？

上面的代码片段将仅显示列出两次的所有视频的列表。并非频道中的所有视频网址。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-10T21:43:11.937

使用 Selenium Chrome 驱动程序：

```
from selenium import webdriver
from webdriver_manager.chrome import ChromeDriverManager
import time

driverPath = ChromeDriverManager().install()

driver = webdriver.Chrome(driverPath)

url = 'https://www.youtube.com/howitshouldhaveended/videos'

driver.get(url)

height = driver.execute_script("return document.documentElement.scrollHeight")
previousHeight = -1

while previousHeight < height:
    previousHeight = height
    driver.execute_script(f'window.scrollTo(0,{height + 10000})')
    time.sleep(1)
    height = driver.execute_script("return document.documentElement.scrollHeight")

vidElements = driver.find_elements_by_id('thumbnail')
vid_urls = []
for v in vidElements:
    vid_urls.append(v.get_attribute('href')) 
```

这段代码我试过几次都有效；但是，您可能需要调整睡眠时间，或者添加一种方法来识别浏览器何时仍在加载额外信息。它很容易让我获得一个包含 300 多个视频的频道，但是由于在浏览器上加载新视频所需的时间变得不一致，因此它与一个拥有 7000 多个视频的频道存在问题。

# jquery-ui - JQuery UI 日期选择器结束日期比开始日期晚 1 天

> ID：15512242
> 
> 赞同：0
> 
> 时间：2013-03-19T23:07:57.020
> 
> 标签：jquery-ui, datepicker, jquery-ui-datepicker, date-range

> [所以我试图限制用户使用 jQuery UI 日期范围选择器（ http://jqueryui.com/datepicker/#date-range](http://jqueryui.com/datepicker/#date-range) ）选择退房日期与入住日期相同。我有它，他们无法在入住日期之前选择，但截至目前，入住日期和退房日期可以是相同的文件。这是jquery

```
 $(function() {
      $( "#check-in" ).datepicker({
        minDate: 0,
        dateFormat: "yy-mm-dd",
        changeMonth: true,
        numberOfMonths: 2,
        changeYear: true,
        onClose: function( selectedDate, inst ) {
            $( "#check-out" ).datepicker( "option", "minDate", selectedDate);
        }
    });

    $( "#check-out" ).datepicker({
        minDate: "+1D",
        dateFormat: "yy-mm-dd",
        changeMonth: true,
        numberOfMonths: 2,
        changeYear: true,
        onClose: function( selectedDate, inst ) {
            $( "#check-in" ).datepicker( "option", "maxDate", selectedDate +"+1D");
        }
    });

  }); 
```

这是 HTML

```
<div class="formInput">
    <label for="check-in">Check-in:</label>
    <input type="text" id="check-in" name="check-in" value="yyyy/mm/dd" size="30" class="textInput">
</div>

    <div class="formInput">
        <label for="check-out">Check-out:</label>
        <input type="text" id="check-out" name="check-out" value="yyyy/mm/dd" size="30" class="textInput">
    </div> 
```

我想要的是每次选择入住日期时，退房日期默认为入住日期后 1 天。先感谢您

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T06:17:54.427

您不能使用此代码添加日期 $( "#check-in" ).datepicker( "option", "maxDate", selectedDate +"+1D")

试试这个：

```
onClose: function( selectedDate, inst ) {
             var maxDate = new Date(Date.parse(selectedDate));
             maxDate.setDate(maxDate.getDate() - 1);            
            $( "#check-in" ).datepicker( "option", "maxDate", maxDate);
        } 
```

这是小提琴：http: [//jsfiddle.net/RxTax/1/](http://jsfiddle.net/RxTax/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-16T09:13:43.730

JQuery UI date picker end date 1 day after start date

[http://jsfiddle.net/wskhcgdq/1/](http://jsfiddle.net/wskhcgdq/1/)

You can't add days using this code

```
 $( "#check-in" ).datepicker( "option", "maxDate", selectedDate +"+1D") 
```

**Try this instead:**

```
 $(function() {
      $( "#check-in" ).datepicker({
        minDate: 0,
        dateFormat: "yy-mm-dd",
        changeMonth: true,
        numberOfMonths: 2,
        changeYear: true,
        onClose: function( selectedDate, inst ) {
             var minDate = new Date(Date.parse(selectedDate));
             minDate.setDate(maxDate.getDate() + 1);
            $( "#check-out" ).datepicker( "option", "minDate", minDate);
        }
    });

    $( "#check-out" ).datepicker({
        minDate: "+1D",
        dateFormat: "yy-mm-dd",
        changeMonth: true,
        numberOfMonths: 2,
        changeYear: true,
        onClose: function( selectedDate, inst ) {
             var maxDate = new Date(Date.parse(selectedDate));
             maxDate.setDate(maxDate.getDate() - 1);            
            $( "#check-in" ).datepicker( "option", "maxDate", maxDate);
        }
    });
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-15T21:44:50.753

更改 minDate.setDate(maxDate.getDate() + 1); 到 minDate.setDate(minDate.getDate() + 1);

事实上，这只是使用 dateFormat: "yy-mm-dd" 而不是使用其他 dateFormat 作为区域 fr 或类似的。

我已经使用备用字段为其他 dateFormats 编写了解决方法。我在 IE chrome 和 Firefox 上进行了测试，效果很好。

```
function resetFrom() {
        var altcheck-in = document.getElementById("altcheck-in");
        var check-in= document.getElementById("check-in");
        altcheck-in.value = "";
        if (altcheck-in.value == "") {
            check-in.value = "";
            $("#check-out").datepicker("destroy");
            $("#check-out").datepicker({
                minDate: "+1D",
                dateFormat: "yy-mm-dd",
                altFormat: "dd-mm-yy",
                altField: "#altcheck-out",
                changeMonth: true,
                numberOfMonths: 1,
                changeYear: true,
                showOn: "button",
                buttonImage: "/images/calendar.gif",
                buttonImageOnly: true,
                buttonText: "Select date",
                onClose: function (selectedDate) {
                    if (selectedDate != "") {
                        var maxDate = new Date(Date.parse(selectedDate));
                        maxDate.setDate(maxDate.getDate() - 1);
                        $("#check-in").datepicker("option", "maxDate", maxDate);
                    }
                }
            });
        }
    }

    function resetTo() {
        var altcheck-out = document.getElementById("altcheck-out");
        var check-out = document.getElementById("check-out");
        altTo.value = "";
        if (altcheck-out.value == "") {
            to.value = "";
            $("#check-in").datepicker("destroy");
            $("#check-in").datepicker({
                dateFormat: "yy-mm-dd",
                altFormat: "dd-mm-yy",
                altField: "#altcheck-in",
                minDate: 0,
                changeMonth: true,
                numberOfMonths: 1,
                changeYear: true,
                showOn: "button",
                buttonImage: "/images/calendar.gif",
                buttonImageOnly: true,
                buttonText: "Select date",
                onClose: function (selectedDate) {
                    if (selectedDate != "") {
                        var minDate = new Date(Date.parse(selectedDate));
                        minDate.setDate(minDate.getDate() + 1);
                        $("#check-out").datepicker("option", "minDate", minDate);
                    }
                }
            });
        }
    }

    $(function () {
        $("#check-in").datepicker({
            dateFormat: "yy-mm-dd",
            altFormat: "dd-mm-yy",
            altField: "#altcheck-in",
            minDate: 0,
            changeMonth: true,
            numberOfMonths: 1,
            changeYear: true,
            showOn: "button",
            buttonImage: "/images/calendar.gif",
            buttonImageOnly: true,
            buttonText: "Select date",
            onClose: function (selectedDate) {
                if (selectedDate != "") {
                    var minDate = new Date(Date.parse(selectedDate));
                    minDate.setDate(minDate.getDate() + 1);
                    $("#check-out").datepicker("option", "minDate", minDate);
                }
            }
        });

        $("#check-out").datepicker({
            minDate: "+1D",
            dateFormat: "yy-mm-dd",
            altFormat: "dd-mm-yy",
            altField: "#altcheck-out",
            changeMonth: true,
            numberOfMonths: 1,
            changeYear: true,
            showOn: "button",
            buttonImage: "/images/calendar.gif",
            buttonImageOnly: true,
            buttonText: "Select date",
            onClose: function (selectedDate) {
                if (selectedDate != "") {
                    var maxDate = new Date(Date.parse(selectedDate));
                    maxDate.setDate(maxDate.getDate() - 1);
                    $("#check-in").datepicker("option", "maxDate", maxDate);
                }
            }
        });
    });

<input name="altcheck-in" type="text" id="altcheck-in" onchange="resetFrom();" style="width:250px;" />
<input name="check-in" type="text" id="check-in" style="display: none" />

<input name="altcheck-out" type="text" id="altcheck-out" onchange="resetTo();" style="width:250px;" />
<input name="check-out" type="text" id="check-out" style="display: none" /> 
```

# serialization - 如何找出正在使用的存档格式？

> ID：15512243
> 
> 赞同：3
> 
> 时间：2013-03-19T23:08:00.187
> 
> 标签：serialization

我正在做一个关于一些游戏数据文件的爱好项目。我想编辑其中的一些内容并重新打包，以便游戏接受修改。

目录本身以易于打开的专有格式存档。这些文件是用 zlib 压缩的。现在我很难过，因为似乎仍然（至少）还有一层存档。这些文件似乎是序列化的，但查找最常见的明显答案并没有成功。谷歌没有帮助。我没有找到任何魔法字节（并不意味着没有，我只是没有找到）。如果它是商业的，我如何找出序列化格式是什么？如果不是，我应该如何解决这个问题？

一点背景：

*   该文件由 Windows 上的 Visual C++ 应用程序读取
*   我相信文件预序列化类似于 XML
*   我已经反编译了 .exe，试图在读取数据文件时单步执行该过程没有成功（它读取了 7Gb 的数据，我找不到我想要使用的文件类型的开头）。寻找有用的字符串也没有奏效。
*   我尝试与 Python pickle、marshal、VC++ MFC marshal 和各种归档程序格式进行比较。没运气。

序列化文件的显着特点：

文件末尾有某种目录。看起来像这样：

TOC0 4 字节偏移 4 字节长度 OBJE 8 字节偏移 8 字节长度

等等。TOC 中的其他标题是 TOPO、CHNK、CLAS、PROP、STRG、TRAN、IMPR 和 EXPR，后面都是偏移量和长度。偏移量和长度值是大端的。

该文件本身似乎是类型长度值编码的（人类可读的字符串属于 CLAS 标题）或 4 字节块中的类型不同的类型值。有 4 个字节块，例如 AA AA AA AA、AB AB AB AB 或 BB BB BB BB，它们可能用作分隔符。

有很长的数据部分除了一个字节增加 1 之外没有任何变化。看起来像排序索引。

文件数据可能包含各种数据类型。

我有机会比较两个不同版本的数据文件。更改未序列化文件中的 int 值会导致序列化文件中的更改非常小（通常在原始文件中更改一个数字会导致结果文件中更改一个十六进制值）。

该格式非常节省空间。大多数内容都是 4 字节的块，文件可压缩 10 倍。这和字符串的人类可读性让我相信文件没有以任何方式压缩或加密。它只是以某种方式序列化。

任何帮助是极大的赞赏。

# c# - 查询对象列表

> ID：15512252
> 
> 赞同：1
> 
> 时间：2013-03-19T23:08:51.490
> 
> 标签：c#, linq, microsoft-metro

我目前有一个“Day”对象列表。Day 的类定义包含两个字符串： -name -hours

我需要做的是在列表中找到具有相同时间的所有 Day(s) 并将它们格式化为一个项目。

前任。

```
Sunday 8am - 9pm
Monday 8am - 10pm
Tuesday 8am - 10pm
Wednesday 8am -10pm
Thursday 9am - 10pm
Friday 9am - 11pm
Saturday 8am - 11pm 
```

所以，星期一星期二和星期三都有相同的时间。我需要从原始列表中创建一个新列表，如下所示：

```
Sunday 8am - 9pm
Mon-Wed 8am -10 pm
...
... 
```

有没有一种简单的方法可以用 LINQ 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:42:50.743

这接近你想要的：

```
 IList<Day> days = new List<Day>();
        days.Add(new Day { Name = "Sunday", Hours = "8am - 9pm" });
        days.Add(new Day { Name = "Monday", Hours = "8am - 10pm" });
        days.Add(new Day { Name = "Tuesday", Hours = "8am - 10pm" });
        days.Add(new Day { Name = "Wednesday", Hours = "8am - 10pm" });
        days.Add(new Day { Name = "Thursday", Hours = "9am - 10pm" });
        days.Add(new Day { Name = "Friday", Hours = "9am - 11pm" });
        days.Add(new Day { Name = "Saturday", Hours = "8am - 11pm" });
        var grouped = days.GroupBy(d => d.Hours).ToList();
        StringBuilder sb = new StringBuilder();
        foreach (var group in grouped)
        {
            sb.AppendFormat("{0}: {1}\n", group.Key, group.Select(g => g.Name).Aggregate((list, nextday) => list + ", " + nextday));
        }
        var table = sb.ToString(); 
```

输出是：

上午 8 点至晚上 9 点：周日

上午 8 点至晚上 10 点：周一、周二、周三

上午 9 点至晚上 10 点：星期四

上午 9 点至晚上 11 点：周五

上午 8 点至晚上 11 点：周六

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T00:43:56.237

使用`GroupConsecutive`您将在答案末尾找到的扩展方法，您可以执行以下操作：

```
List<Day> days = new List<Day>
{
    new Day { Name = "Sunday", Hours= "8am - 9pm" },
    new Day { Name = "Monday", Hours= "8am - 10pm" },
    new Day { Name = "Tuesday", Hours= "8am - 10pm" },
    new Day { Name = "Wednesday", Hours= "8am - 10pm" },
    new Day { Name = "Thursday", Hours= "9am - 10pm" },
    new Day { Name = "Friday", Hours= "8am - 11pm" },
    new Day { Name = "Saturday", Hours= "8am - 11pm" },
};

var query = from g in days.GroupConsequtive(d => d.Hours)
            select new {
                Name = g.Count() == 1 ? g.First().Name :
                       String.Format("{0}-{1}", g.First().Name.Substring(0, 3), g.Last().Name.Substring(0, 3)),
                Hours = g.Key
            }; 
```

枚举结果：

```
foreach (var item in query)            
    Console.WriteLine("{0} {1}", item.Name, item.Hours); 
```

输出：

```
Sunday 8am - 9pm
Mon-Wed 8am - 10pm
Thursday 9am - 10pm
Fri-Sat 8am - 11pm 
```

连续分组的扩展方法：

```
public static class LazyExtensions
{
    public static IEnumerable<IGrouping<TKey, TElement>> GroupConsecutive<TKey, TElement>(
        this IEnumerable<TElement> source, Func<TElement, TKey> keySelector)
    {
        if (!source.Any())
            yield break;

        var comparer = Comparer<TKey>.Default;
        Grouping<TKey, TElement> group = null;

        foreach (var item in source)
        {
            var key = keySelector(item);

            if (group == null)
                group = new Grouping<TKey, TElement>(key);

            if (comparer.Compare(group.Key, key) != 0)
            {
                yield return group;
                group = new Grouping<TKey, TElement>(key);
            }

            group.Elements.Add(item);
        }

        yield return group;
    }

    private class Grouping<TKey, TElement> : IGrouping<TKey, TElement>
    {
        public Grouping(TKey key)
        {
            Key = key;
            Elements = new List<TElement>();
        }

        public List<TElement> Elements { get; private set; }
        public TKey Key { get; private set; }

        public IEnumerator<TElement> GetEnumerator()
        {
            return Elements.GetEnumerator();
        }

        IEnumerator IEnumerable.GetEnumerator()
        {
            return GetEnumerator();
        }
    }
} 
```

这个怎么运作？它创建分组（自定义类，实现 IGrouping 接口）并将具有相同键值的连续元素添加到该组。如果新的键值到达，则返回分组。因此，所有序列都按连续的键值分组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T23:27:33.773

```
List<Tuple<string,string>> days = new List<Tuple<string,string>>
(
    new Tuple<string,string>[]
    {
        new Tuple<string,string>( "Sunday", "8am - 9pm" ),
        new Tuple<string,string>( "Monday", "8am - 10pm" ),
        new Tuple<string,string>( "Tuesday", "8am - 10pm" ),
        new Tuple<string,string>( "Wednesday", "8am - 10pm" ),
        new Tuple<string,string>( "Thursday ", "9am - 10pm" ),
        new Tuple<string,string>( "Friday", "9am - 11pm" ),
        new Tuple<string,string>( "Saturday ", "8am - 11pm" )
    }
);

ILookup<string,string> table = days.ToLookup( k => k.Item2, v => v.Item1 );

table[ "8am - 9pm" ]; // Sunday
table[ "8am - 10pm" ]; // Monday, Tuesday, Wednesday 
```

# objective-c - Xcode Cocos2d 无法创建 AppDelegate 对象

> ID：15512255
> 
> 赞同：1
> 
> 时间：2013-03-19T23:09:13.103
> 
> 标签：objective-c, xcode, core-data, cocos2d-iphone

我正在使用 cocos2d 和 CoreData。我已导入“AppDelegate.h”，但无法从中创建对象。我想我会做的就是：

```
AppDelegate *delegate; 
```

当我这样做时，它会收到一条错误消息，指出未定义 AppDelegate。AppDelegate .h 和 .m 文件位于主文件旁边。

此外，当我尝试写入文件时，我没有收到错误，但它没有写入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T06:05:20.913

在 Cocos2d 2.0 中，AppDelegate 更名为 AppController

```
AppController *app = (AppController*)[UIApplication sharedApplication].delegate; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T00:01:00.970

XCode 创建的样板代码（我假设您正在使用 XCode）将为您创建一个名为 *managedObjectContext 的 NSManagedObjectContext。如果您需要创建将与您的核心数据模型交互的其他对象（例如视图控制器），您只需将该 managedObjectContext 对象作为参数传入（或将其链接到自定义类中的属性）并与它在您的自定义类中。值得注意的是，在您的应用程序中传递 AppDelegate 对象并不是一个好习惯。你的应用委托应该是你代码库的基础，而不是一个典型的类。有时您肯定希望（或需要）将应用程序委托作为对象传递或在 IB 中引用它，但通常您的应用程序将在您的

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification 
```

方法，您将从那里启动您的主视图控制器。

核心数据中的某些内容还需要持久存储协调器（例如检索托管对象 ID），因此您可能还需要将其传入。如果您在使用 Core Data 时需要一些帮助，这里有很多关于该主题的精彩文章和书籍。我建议尽可能多地阅读，因为 Core Data 一开始可能很难理解。起初它帮助我阅读了一堆教程，因为每个人的解释都有点不同。

这是最近编写的关于绑定、核心数据以及使用应用程序委托帮助您入门的精彩教程：[http ://www.raywenderlich.com/21752/how-to-use-cocoa-bindings-and-core-data -in-a-mac-app](http://www.raywenderlich.com/21752/how-to-use-cocoa-bindings-and-core-data-in-a-mac-app)

# html - 使自定义项目符号图像成为可点击链接的一部分

> ID：15512258
> 
> 赞同：1
> 
> 时间：2013-03-19T23:09:54.023
> 
> 标签：html, css, user-interface

我正在尝试使用自定义项目符号图像在 CSS 中编写水平导航菜单。

我可以让大多数事情正常工作，但问题是自定义项目符号图像（每个导航项都不同）不是可点击链接的一部分。

我知道我可以将 A 标签移到 LI 标签之外，但这是一种糟糕的编码习惯。

有谁知道如何使自定义项目符号图像成为可点击链接的一部分？我的直觉是确保显示：块，但随后它弄乱了水平布局。

这是我到目前为止所得到的：

CSS：

```
#navlist {
    list-style: none;
    margin: 0;
    padding: 20px 0 0px 20px;
}

#navlist ul {
    margin: 0;
    padding: 0;
}

#navlist li {
    display:inline;
    background-repeat: no-repeat;
    background-position: 0 50%;
    padding: 3px 0 3px 35px;
    margin: 0 20px 0 .4em;
}

#navlist li a {
    text-decoration:none;
}

#navlist li.contact {
    background-image: url(img/contact.png);
}

#navlist li.about {
    background-image: url(img/about.png);
} 
```

HTML：

```
<ul id="navlist">
    <li class="contact"><a href="#">Contact Us</a></li>
    <li class="about"><a href="#">About Us</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:24:42.290

要让它按照您的描述工作，请尝试使用

> 显示：内联块；

并更改左填充/边距，如下所示：

```
#navlist li {
    display: inline-block;
    background-repeat: no-repeat;
    background-position: 0 50%;
    padding: 3px 0 3px 0;
    margin: 0 20px 0 .4em;
}
#navlist li a {
    text-decoration: none;
    padding-left: 35px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T02:41:42.600

有不同的方法可以实现您想要的：

### 1\. THE LI WAY（不建议）

```
<ul id="navlist">
<li class="contact"><a href="#">Contact Us</a></li>
<li class="about"><a href="#">About Us</a></li>
</ul> 
```

在这种情况下，`li a {float:right; width:<fixedwidthforall>;}`。所以你必须给所有的锚定一个固定的宽度，让它们向右浮动，并确保背景图像`li`可见。很多麻烦，而且你将很难在`:hover`.

### 2\. 首选方式（建议）

```
<ul id="navlist">
<li><a href="#" class="contact">Contact Us</a></li>
<li><a href="#" class="about">About Us</a></li>
</ul> 
```

最常见的做法是在您的锚点上放置一些填充并将其移动 `background-image`到锚点（而不是 li 的）。这意味着也将类移动到锚点。

### 3\. 好的方式

```
<div id="navlist">
<a href="#" class="contact">Contact Us</a>
<a href="#" class="about">About Us</a>
</div> 
```

对于一个完全不需要可扩展导航的小型网站，具有以下样式的锚点的 div 就可以了。无需不必要地使事情复杂化。

```
<style>
#navlist a {
display: block;
float: left;}
</style> 
```

### 4\. 反叛之路

如果您想做一些非传统的、叛逆的事情，请选择这种标记：

```
<ul id="navlist">
<li><a href="#" class="contact">Contact Us
<img src=""></img></a></li>
<li><a href="#" class="about">About Us
<img src=""></img></a></li>
</ul> 
```

为什么不在导航链接中添加图像呢？或者为什么不将整个页面作为 a`display:none`并在悬停时显示。没有人这样做，但总要有先驱者！

### 底部通知

> “我知道我可以将 A 标签移到 LI 标签之外，但这是一种糟糕的编码习惯。”

有很多不同的方式来设置导航链接的样式。有约定和良好的编码，但这不是法律。通常，偏离标准的人是新的创新者。

如果您的导航包含两个链接，那么创建 ul、li 和 a 的麻烦是否值得，而您可以做得更快，并且与 a 具有相同的质量？

PS：类用于重复元素，id 用于唯一元素。除非您在其他元素上重新使用相同的样式，否则它们应该是 id 的......但同样，这是一个约定。你可以自由选择！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T23:18:05.773

我假设您的自定义项目符号是您应用到`#navlist li.contact`和的背景图像`#navlist li.about`。

我的建议是从您的 li 中删除填充并将填充添加到您的 a 中。这将强制用于查看项目符号的间距位于您的标签内并且“可点击”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T01:54:32.620

我不确定你是否尝试这种方式搬进`background-image`来`<a>`

```
#navlist {
    list-style: none;
    margin: 0;
    padding: 20px 0 0px 20px;
}

#navlist ul {
    margin: 0;
    padding: 0;
}

#navlist li {
    display:inline;

}

#navlist li a {
    text-decoration:none;
    background-repeat: no-repeat;
    background-position: 0 50%;
    padding: 3px 0 3px 35px;
    margin: 0 20px 0 .4em;
}

#navlist li.contact a{
    background-image: url(img/contact.png);
}

#navlist li.about a{
    background-image: url(img/about.png);
} 
```

工作[演示](http://jsfiddle.net/jhunlio/6A6ey/)
希望这有帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T23:20:31.443

只需设置 a 而不是 li 的样式并将背景图像应用到它。这也更具语义性。更改后的代码将是：

```
#navlist li {
    display:inline;
}

#navlist li a {
    text-decoration:none;
    background-repeat: no-repeat;
    background-position: 0 50%;
    padding: 3px 0 3px 35px;
    margin: 0 20px 0 .4em;
    display: inline-block; // to make the padding work
}

#navlist li.contact a {
    background-image: url(img/contact.png);
}

#navlist li.about a {
    background-image: url(img/about.png);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-19T23:18:01.257

添加

```
#navlist li {
list-style-position: inside;
} 
```

# ruby-on-rails - 无法进行迁移：Mysql2::Error: 表不存在

> ID：15512259
> 
> 赞同：2
> 
> 时间：2013-03-19T23:10:03.180
> 
> 标签：ruby-on-rails

我正在新工作站上设置现有的 rails 应用程序。当我尝试时`rake db:migrate`，在尝试创建第一个表之前，我得到了这个奇怪的错误（是的，我从 开始`rake db:create`）：

```
$ bundle exec rake db:migrate
rake aborted!
Mysql2::Error: Table 'myapp_dev.usage_roles' doesn't exist: SHOW FULL FIELDS FROM `usage_roles`
# ... followed by a long stack trace 
```

我无法猜测为什么 rake 任务试图在任何表存在之前显示任何表中的字段。我什至没有在应用程序中看到太多提及此表。这是完整的grep：

```
$ grep -r usage_roles .
Binary file ./.git/index matches
./app/models/usage/role.rb:  self.table_name = 'usage_roles'
./app/models/usage/user.rb:    where(" usage_roles.name in (?)", Usage::Role::SUPPORT_ROLES)
./coverage/index.html:          <code class="ruby">  self.table_name = 'usage_roles'</code>
./coverage/index.html:          <code class="ruby">    where(&quot; usage_roles.name in (?)&quot;, Usage::Role::SUPPORT_ROLES)</code>
./db/migrate/20130112104233_create_usage_roles.rb:    execute('CREATE VIEW usage_roles AS SELECT 
./db/migrate/20130112104233_create_usage_roles.rb:            * FROM clu_enums.usage_roles;')
./db/migrate/20130112104233_create_usage_roles.rb:    execute('DROP VIEW IF EXISTS usage_roles;') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-03T18:53:47.033

我认为您的问题与 Factorygirl 处理数据库的方式直接相关。当您设置`factory_girl_rails`时，`require:false`这似乎是解决方案。

看看这个[FactoryGirl 搞砸了 rake db:migrate 过程](https://stackoverflow.com/questions/12423273/factorygirl-screws-up-rake-dbmigrate-process)

# c# - 将二维数组写入文件的最简单方法是什么？

> ID：15512263
> 
> 赞同：1
> 
> 时间：2013-03-19T23:10:30.860
> 
> 标签：c#, arrays, file

在 C# 中将二维数组写入文件的最简单方法是什么？

到目前为止，我阅读的所有问题都是针对字符串数组的，但我需要写入数据。我正在转换一个旧的 C 项目，并且在 C 中很容易：

```
FILE *file;
unsigned char site[32][10]; 
```

然后初始化数组并打开文件进行读/写（文件始终在项目中打开）：

要写入数据：

```
if (fseek (file, offset, SEEK_SET))
  return (0);
return (fwrite (&site, sizeof (site), 1, file)); 
```

要读取数据：

```
if (fseek (file, offset, SEEK_SET))
  return (0);
return (fread (&site, sizeof (site), 1, fsite)); 
```

该文件不必一直打开，所以我尝试了：

```
byte [,] = new byte[32,10] = { some data here };
File.WriteAllBytes(fileDescr, site); 
```

但是它不适用于二维数组。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T23:21:41.207

**参考：**

```
using System.Runtime.Serialization.Formatters.Binary; 
```

**方法：**

```
public static void Serialize(object t, string path)
{
    using(Stream stream = File.Open(path, FileMode.Create))
    {
        BinaryFormatter bformatter = new BinaryFormatter();
        bformatter.Serialize(stream, t);
    }
}
//Could explicitly return 2d array, 
//or be casted from an object to be more dynamic
public static object Deserialize(string path) 
{
    using(Stream stream = File.Open(path, FileMode.Open))
    {
        BinaryFormatter bformatter = new BinaryFormatter();
        return bformatter.Deserialize(stream);
    }
} 
```

**正在使用**

```
//Saving
byte[,] TestArray = new int[1000,1000];
//...Fill array
Serialize(TestArray, "Test.osl");

//Loading
byte[,] TestArray = (byte[,])Deserialize("Test.osl"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T23:50:38.683

如果您必须保持与旧的“C”程序文件格式的向后兼容性，则使用 Windows API 写入数据可能是最简单的方法。（如果没有，您应该使用`BinaryFormatter`前面答案中提到的 a ）。

但如果你*确实*想使用 Windows API，这里有一个例子：

```
using System;
using System.ComponentModel;
using System.Diagnostics;
using System.IO;
using System.Runtime.InteropServices;

namespace Demo
{
    internal class Program
    {
        private static void Main(string[] args)
        {
            var site = new byte[32,10];

            using (var fs = new FileStream("C:\\TEST\\TEST.BIN", FileMode.Create))
            {
                FastWrite(fs, site, 0, 32*10);
            }
        }

        [DllImport("kernel32.dll", SetLastError = true)]
        [return: MarshalAs(UnmanagedType.Bool)]

        private static extern bool WriteFile
        (
            IntPtr hFile,
            IntPtr lpBuffer,
            uint nNumberOfBytesToWrite,
            out uint lpNumberOfBytesWritten,
            IntPtr lpOverlapped
        );

        public static void FastWrite<T>(FileStream fs, T[,] array, int offset, int count) where T : struct
        {
            int sizeOfT = Marshal.SizeOf(typeof (T));
            GCHandle gcHandle = GCHandle.Alloc(array, GCHandleType.Pinned);

            try
            {
                uint bytesWritten;
                uint bytesToWrite = (uint) (count*sizeOfT);

                if (!WriteFile(
                    fs.SafeFileHandle.DangerousGetHandle(),
                    new IntPtr(gcHandle.AddrOfPinnedObject().ToInt64() + (offset*sizeOfT)),
                    bytesToWrite,
                    out bytesWritten,
                    IntPtr.Zero
                )){
                    throw new IOException("Unable to write file.", new Win32Exception(Marshal.GetLastWin32Error()));
                }

                Debug.Assert(bytesWritten == bytesToWrite);
            }

            finally
            {
                gcHandle.Free();
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T23:34:59.027

使用`System.Runtime.Serialization.Formatters.Binary.BinaryFormatter`.

```
public void Serialize(String path, byte[,] myArray)
{
    BinaryFormatter formatter = new BinaryFormatter();
    using (FileStream stream = new FileStream(path, FileMode.Create, FileAccess.Write))
    {
        formatter.Serialize(stream, myArray);
    }
} 
```

要读取文件，请使用 BinaryFormatter 的`Deserialize`方法。

```
public byte[,] Deserialize(String path)
{
    BinaryFormatter formatter = new BinaryFormatter();
    using (FileStream stream = new FileStream(path, FileMode.Open, FileAccess.Read))
    {
        byte[,] myArray = (byte[,])formatter.Deserialize(stream);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T23:43:46.107

```
 // For I/O
    using System.IO;  

    // Output Stream Writer variable
    StreamWriter yourOSW;  

    // Open the file
    yourOSW = new StreamWriter(fileName); 

    // To declare array
    byte[,] yourArray = new byte[numRows, numColumns];  

    // Data value
    byte num = 0;  

    // To fill array (example)
    for(byte i = 0; i < numRows; i++)
    {
        for(byte j = 0; j < numColumns; j++)
        {
            yourArray[i,j] = num;
            num++;
        }
    }

    // To write array to file
    for(byte i = 0; i < numRows; i++)
    {
        for(byte j = 0; j < numColumns; j++)
        {
            yourOSW.WriteLine(yourArray[i,j]);
        }
    } 
```

# django - 运行 Django 时的 Apache 3rd 方库

> ID：15512266
> 
> 赞同：0
> 
> 时间：2013-03-19T23:10:58.230
> 
> 标签：django, apache2

我正在使用 Apache2 为 Django 应用程序提供服务。Django 应用程序使用带有 Numpy 的 Intel 库。但是，当 Apache 加载 Python 脚本时，它不使用 Intel 库。

`os.environ`这是Apache 运行脚本时我在脚本中的内容：

```
{'LANG': 'C', 'APACHE_LOCK_DIR': '/var/lock/apache2', 'TZ': 'America/Chicago', 'DJANGO_SETTINGS_MODULE': 'mysite.settings', 'APACHE_RUN_USER': 'my_user', 'PWD': '/', 'APACHE_PID_FILE': '/var/run/apache2.pid', 'APACHE_RUN_DIR': '/var/run/apache2', 'APACHE_LOG_DIR': '/var/log/apache2', 'APACHE_RUN_GROUP': 'my_group', 'PATH': '/usr/local/bin:/usr/bin:/bin'} 
```

因此 Apache 以 的权限运行`my_user`，但`my_user`通常在启动时加载`.bashrc`会添加所有必要的环境变量，但 Apache 不会这样做。

所以因为 LD_LIBRARY_PATH 不存在，我得到导入错误。它在以普通用户和 root 身份运行时工作。

我试图添加以下内容`/etc/apache2/envvars`

```
export LD_LIBRARY_PATH="/opt/intel/composer_xe_2013.2.146/compiler/lib/intel64:/opt/intel/mic/coi/host-linux-release/lib:/opt/intel/mic/myo/lib:/opt/intel/composer_xe_2013.2.146/mpirt/lib/intel64:/opt/intel/composer_xe_2013.2.146/ipp/../compiler/lib/intel64:/opt/intel/composer_xe_2013.2.146/ipp/lib/intel64:/opt/intel/composer_xe_2013.2.146/compiler/lib/intel64:/opt/intel/composer_xe_2013.2.146/mkl/lib/intel64:/opt/intel/composer_xe_2013.2.146/tbb/lib/intel64" 
```

但这显然行不通。

所以我的问题是：如何为 Apache 添加 3rd 方库以在运行 Django 时使用？

# java - Java RMI - 何时创建存根、启动注册表并指定代码库？

> ID：15512267
> 
> 赞同：1
> 
> 时间：2013-03-19T23:11:06.940
> 
> 标签：java, rmi

何时创建 Stub、启动 Registry 并指定 Codebase？

我创建了一个 RMI 应用程序。我的简单应用程序有效。我的构建路径中有 RemoteObjInterface.class 的包，用于客户端和服务器包。我首先启动服务器应用程序，然后启动客户端应用程序。

但是，我查看了互联网上的其他示例，我看到它们启动了注册表，创建了一个存根并指定了一个代码库。

以下是我的程序：

“ **RemoteObjInterface.class** ”是我的接口，“ **RemoteObjImplementation.class** ”是我的服务器，“ **Client.class** ”是我的客户端。

```
public interface RemoteObjInterface extends Remote {
    public String someMethod() throws RemoteException;
        } 
```

* * *

```
public class RemoteObjImplementation extends UnicastRemoteObject implements
    RemoteObjInterface {
   private static final long serialVersionUID = 1L;
   private static final int PORT = 1099;
   private static Registry registry;

public RemoteObjImplementation() throws RemoteException {
    super();
    }

@Override
public String someMethod() throws RemoteException {

    return new String("Hello");
    }

public static void main(String args[]) {

    Registry registry = LocateRegistry.createRegistry(PORT);

    registry.bind(RemoteObjInterface.class.getSimpleName(),
            new RemoteObjImplementation());

     }
} 
```

* * *

```
public class Client {
    private static final String HOST = "localhost";
    private static final int PORT = 1099;
    private static Registry registry;

public static void main(String[] args) throws Exception {

registry = LocateRegistry.getRegistry(HOST, PORT);

 RemoteObjInterface remoteApi = (RemoteObjInterface) registry.lookup(RemoteObjInterface.class.getSimpleName());

    System.out.println("Message = " +
            remoteApi.someMethod();

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:33:48.153

> 何时创建存根

创建存根是导出远程对象的副作用，如果它是扩展的，这反过来又是构造它的副作用`UnicastRemoteObject`。

> 启动注册表

当你想启动它。`bind()`例如，在您开始打电话之前`rebind()`。

> 并指定代码库？

您根本不需要使用此功能，它是可选的。如果您希望您的客户端能够动态下载类而不是提前将它们分发给客户端，`java.rmi.server.codebase`请在导出任何远程对象（包括注册表）之前在服务器 JVM 中指定系统属性，并确保它指向一个 URL注册表和客户端都可以访问。

# php - WHERE 查询无法正常运行

> ID：15512270
> 
> 赞同：-1
> 
> 时间：2013-03-19T23:11:22.543
> 
> 标签：php, mysql

我有这个查询：

```
$queryfile = "UPDATE Glasovi
             SET Fotografija='$content',
             MD5Slike='$checksum'
             WHERE Email ='$email'"; 
```

它不会更新数据库。

当我直接在`WHERE`条款中写电子邮件时，它可以工作：

```
$queryfile = "UPDATE Glasovi
              SET Fotografija='$content',
              MD5Slike='$checksum'
              WHERE Email ='user.user@mail.com'"; 
```

我试图回显该`$email`变量，它具有正确的值。第一个查询的错误在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:13:11.700

你的请求没问题，所以你应该在 php 中检查你的变量，使用`var_dump($email)`

- 编辑 -

**您的请求似乎不安全，您应该使用 PDO 语句来保护它免受 SQL 注入**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T23:38:28.257

您的查询看起来正确。我能看到的唯一问题是其他变量之一包含单引号，这可能会导致您的错误。

尝试使用 addlashes 转义变量中的任何单引号

```
$queryfile = "UPDATE Glasovi 
SET Fotografija ='".addslashes($content)."', 
MD5Slike ='".addslashes($checksum)."' 
WHERE Email ='".addslashes($email)."'"; 
```

这样做还有助于防止通过单引号进行 SQL 注入

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-19T23:15:15.107

您尚未将变量与字符串连接起来。

将您的代码更改为：

```
$queryfile="UPDATE Glasovi SET Fotografija=' . $content . ', MD5Slike=' . $checksum . ' WHERE Email =' . $email . '"; 
```

# visual-studio-lightswitch - 在 LightSwitch HTML 客户端项目中，ModelManifest.xml 文件是否应该存储在存储库中？

> ID：15512271
> 
> 赞同：0
> 
> 时间：2013-03-19T23:11:27.923
> 
> 标签：visual-studio-lightswitch, lightswitch-2012

在 LightSwitch HTML Client 项目中，Server 和 HTMLClient 目录中的 ModelManifest.xml 文件似乎在每次打开解决方案时都会发生变化。如果两个开发人员在同一个项目上工作，这会导致合并冲突。ModelManifest.xml 文件是否应该存储在源代码控制存储库中？

这些文件是做什么用的？不对其进行版本控制会产生什么后果？

我搜索了 MSDN 论坛（[1]、[2]），一位社区成员声称源代码管理不需要这些文件，但没有给出任何说明。

[1] [http://social.msdn.microsoft.com/Forums/en-US/lightswitch/thread/36f38eb0-fc64-4050-8d67-f7fb39c2ad4e](http://social.msdn.microsoft.com/Forums/en-US/lightswitch/thread/36f38eb0-fc64-4050-8d67-f7fb39c2ad4e)

[2] [http://social.msdn.microsoft.com/Forums/en-US/lightswitch/thread/594aab9f-36c7-4e75-bb9d-07a3a0b0e3ad](http://social.msdn.microsoft.com/Forums/en-US/lightswitch/thread/594aab9f-36c7-4e75-bb9d-07a3a0b0e3ad)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:30:14.503

LightSwitch的 Microsoft 员工 PiersonLee在[LightSwitch HTML 客户端预览论坛上回答：](http://social.msdn.microsoft.com/Forums/en-US/lightswitchhtml/thread/fef79c6c-8aea-4959-9a0e-f5c793f67bb8/)

“它们是在项目加载模型文件时生成的。因为它是在每次加载项目时生成的，所以不需要将这些文件添加到源代码管理中。”

# git - Vim 没有在 git patch 中高亮空格

> ID：15512272
> 
> 赞同：2
> 
> 时间：2013-03-19T23:11:31.590
> 
> 标签：git, vim, macvim

我已按照[这篇文章](https://stackoverflow.com/questions/5257553/coloring-white-space-in-git-diffs-output)中的建议为 s 中的空白着色`git diff`。但是，我不经常使用差异，所以这对我经常使用的东西很有帮助`git add -p`，或补丁模式。截至目前，当我**添加**空格错误时，git 会显示给我。也就是说，它将在一行的末尾突出显示它。（由于突出显示，我无法在此处使用代码示例复制此内容。）但是当我**删除**空格错误时，它看起来像这样：

```
-  def method_name
+  def method_name 
```

第一行末尾有空格错误，在第二行被删除。这不是很有帮助，因为线条看起来相同。那么我怎样才能让它显示删除的空白错误的突出显示呢？

**注意：我使用的是 MacVim。**

**编辑：**另一个问题是，如果我尝试`git diff -R`（反转），那么看起来我*添加*了一个空白错误而不是删除它，这很令人困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:27:18.933

你不能。我要提供的只是两个稍微有用的提示：

*   关于`git add`：如果您看到类似于您提到的情况并且您没有弄乱制表符，您可以确定您删除了行尾的空格。
*   关于`git diff -R`：好吧，请记住您正在跑步`-R`:)

# python - 我应该如何将大型（~50Gb）数据集划分为训练、测试和验证集？

> ID：15512276
> 
> 赞同：0
> 
> 时间：2013-03-19T23:12:01.980
> 
> 标签：python, numpy, dataset

我有一个大数据集。它目前采用未压缩的 numpy 数组文件的形式，使用`numpy.array.tofile()`. 每个文件大约有 100000 行，每行 363 个浮点数。有 192 个文件，总计 52 Gb。

我想将这些数据的随机五分之一分成一个测试集，并将该测试集的随机五分之一分成一个验证集。

另外，我一次只能训练 1 Gb（GPU 板载内存的限制）所以我​​需要随机化所有数据的顺序，这样我就不会通过按顺序训练数据来引入偏差集。

我的主内存大小为 8 Gb。任何人都可以推荐一种随机化和分区这个巨大数据集的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T00:43:45.473

我在 External shuffle 找到了我需要的答案[：将大量数据从内存中洗牌](https://stackoverflow.com/questions/14628072/external-shuffle-shuffling-large-amount-of-data-out-of-memory)

基本上，您会找到一个对于数字来说足够随机的哈希（在这种情况下，我使用的是[Murmur3](https://pypi.python.org/pypi/smhasher)），然后您应用外部合并排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T00:35:23.283

您可以为每一行分配一个唯一的序列号，然后从这些数字中选择一个随机样本，然后将每个相关行连续提取到一个新文件中。

# php - 已弃用的错误

> ID：15512278
> 
> 赞同：-3
> 
> 时间：2013-03-19T23:12:03.430
> 
> 标签：php, html, mysql, sql, content-management-system

嗨我收到这个错误

**已弃用：函数 ereg_replace() 在第 10 行的 /home/hj016/public_html/SSTW/index.php 中已弃用**

下面是代码

```
// Determine which page ID to use in our query below ---------------------------------------------------------------------------------------
if (!isset($_GET['pid'])) {
    $pageid = '1';
} else {
    $pageid = ereg_replace("[^0-9]", "", $_GET['pid']); // filter everything but numbers for security
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T23:14:28.763

改用 preg_replace：[http ://www.php.net/preg_replace](http://www.php.net/preg_replace)

不应再使用 ereg_* 函数。

用这个：

```
$string = preg_replace ( '|\D|', '', $string ); 
```

# java - 将 main 外部方法的结果调用到 main 方法中的变量中

> ID：15512284
> 
> 赞同：1
> 
> 时间：2013-03-19T23:12:43.697
> 
> 标签：java, methods

我的作业是为一家正在补充库存的珠宝店计算税金和附加费，我遇到了一个小问题。我正在使用一种名为 calcExtraTax 的方法三次来计算劳动率以及州和联邦税。然后，我需要获取该方法的每个实例的结果，并将值传递给我的 main 方法中的适当变量。这就是我的代码现在的样子（显然不完整）：

```
import java.text.DecimalFormat;
import java.util.Scanner;
import javax.swing.JOptionPane;

public static void main(String[] args)
{

double stateRate = 0.1;
double luxuryRate = 0.2;
double laborRate = 0.05;
double extraCharge;
int numOrdered;
double diamondCost;
double settingCost;
double baseCost;
double totalCost;
double laborCost;
double stateTax;
double luxuryTax;
double finalAmountDue;

    Scanner keyInput = new Scanner(System.in);

    System.out.println("What is the cost of the diamond?");
    diamondCost = keyInput.nextDouble();
    System.out.println("What is the cost of the setting?");
    settingCost = keyInput.nextDouble();
    System.out.println("How many rings are you ordering?");
    numOrdered = keyInput.nextInt();

    baseCost = diamondCost + settingCost;
    calcExtraCost(baseCost, laborRate);
    laborCost = extraCharge;
    calcExtraCost(baseCost, stateRate);
    stateTax = extraCharge;
    calcExtraCost(baseCost, luxuryRate);
    luxuryTax = extraCharge;
    totalCost = baseCost + laborCost + stateTax + luxuryTax;
    finalAmountDue = numOrdered*totalCost;
    JOptionPane.showMessageDialog(null, "The final amount due is = " + finalAmountDue);
}
public static void calcExtraCost(double diamond, double rate)
{
    double extraCharge = diamond*rate;
    ???????????
} 
```

我想弄清楚的是我还需要在我的辅助方法中添加什么，以便能够每次根据公式中使用的费率变量将结果传递到不同的税收成本变量中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:20:39.017

`diamond*rate`您可以通过将其签名从更改`void`为`double`并添加一条`return`语句从您的辅助方法返回值：

```
public static double calcExtraCost(double diamond, double rate)
{
    return diamond * rate;
} 
```

现在您可以将调用结果分配给 main 方法中的变量：

```
laborCost = calcExtraCost(baseCost, laborRate); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T23:19:21.907

`calcExtraCost`除了将返回类型更改为 double 并返回计算值之外，您不需要对您做任何特别的事情。例如

```
public static double calcExtraCost(double diamond, double rate)
{
    double extraCharge = diamond*rate;
    double tax = //some calculations
    return tax
} 
```

所以这个方法会返回计算出来的值。

在您的主要方法中，您需要将该值存储到您想要的适当双精度。例如，如果您想计算`luxuryTax`，那么您可以执行以下操作：

```
luxuryTax = calcExtraCost(baseCost, luxuryRate); 
```

还有一些建议，而不是让你的方法`static`，让它成为一个`non-static`方法，并创建一个定义你的方法的类的对象，并在该对象上调用该方法。

例如，如果您定义方法的类称为 Tax，那么您将创建一个 Tax 对象：

```
Tax tax = new Tax(); 
```

并调用`calcExtraCost`该对象：

```
tax.calcExtraCost(); 
```

这样您就可以删除该方法的静态部分。所以你的方法签名变成了这样：

```
public double calcExtraCost(double diamond, double rate) 
```

# mysql - 如何在 MySql 中搜索所有以数字开头的字符串？

> ID：15512286
> 
> 赞同：1
> 
> 时间：2013-03-19T23:13:00.003
> 
> 标签：mysql, search, sql-like

我想运行一个 mysql 查询来给我所有以数字开头的可用结果。

```
SELECT * FROM users WHERE username LIKE number + '%' 
```

我尝试使用

```
LIKE REGEXP '^[0-9] 
```

但这对我不起作用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T23:17:36.147

您可以使用`REGEXP`：

```
SELECT * 
FROM users 
WHERE username REGEXP '^[0-9]' 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/d1315/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T23:18:10.727

您的 RegExp 是错误的，并且您使用 REGEXP 运算符的方式是错误的。你的代码应该是

```
WHERE username REGEXP '^[0-9].*' 
```

[SQLFiddle 示例](http://sqlfiddle.com/#!2/16a8b/1)

编辑：我错了 RegEx 部分。我没有意识到你不需要 .*

# css - 在输入框聚焦时保持下拉可见

> ID：15512287
> 
> 赞同：3
> 
> 时间：2013-03-19T23:13:05.263
> 
> 标签：css, drop-down-menu, input, hover, focus

我的导航栏有用于登录和搜索的下拉“字段集”，如下所示：

```
<div class="nav-button" id="nav-box">
        <a class="inside-link">
            <span id="inside-text">Sign in</span>
        </a>
        <fieldset id="menu-box" class="menu-box">
            <form method="post" id="forms" class="forms" action="checklogin.php">
                <label for="username">Username or email</label>
                <input type="text" id="username" name="username" value="" title="username" tabindex="4">

                <label for="password">Password</label>
                <input type="password" id="password" name="password" value="" title="password" tabindex="5">

                <input type="submit" id="small-btn" value="Sign in" tabindex="6">
                <input type="checkbox" id="remember" name="remember_me" value="1" tabindex="7">
                <label for="remember">Remember me</label>
                <br />
                <a href="#"id="resend_password_link">Forgot your password?</a> 
                <a id='forgot_username_link' title="If you remember your password, try logging in with your email" href="#">Forgot your username?</a> 
            </form>
        </fieldset>
    </div> 
```

我在这里有一个小提琴：http: [//jsfiddle.net/WBrns/5/](http://jsfiddle.net/WBrns/5/)

虽然像“搜索”、“用户名”和“密码”这样的输入框是焦点，但我希望相关的下拉菜单不会消失，这样用户在打字时就不必将鼠标放在下拉菜单中。

CSS 中的第 288 行是我们的第一次尝试，这显然行不通。我的网站已经包含 jQuery，因此任何 js/jquery 解决方案都是可以接受的（因为我认为纯 css 不可能）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T23:41:49.863

根据您的`hover`风格，确保属性具有`!important`命令，然后使用下面的代码，同时记住将 id 和类替换为您需要的：

```
$("input").focus(function () { that=this;
    $(this).parent(".drop").css("display", "block");

    $(this).blur(function() {
        $(that).parent(".drop").css("display", "none"); 
    });
}) 
```

您可以在这里查看一个示例：http: [//jsfiddle.net/WBrns/12/](http://jsfiddle.net/WBrns/12/)

如果用户开始键入，即使他们将鼠标移开，下拉菜单也不会消失。但是，如果他们在下拉列表之外单击，它将被隐藏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-08T15:00:50.837

为了改进 Shaz 的答案，您可以命名模糊事件以防止多个模糊事件附加到同一输入。我还建议使用类名和 CSS 来显示和隐藏下拉菜单，以便您可以利用 CSS 过渡。

JS

```
$('input').focus(function () {
  var $this = $(this);
  var $drop = $this.parents('.drop');

  $drop.addClass('open');
  $this.bind('blur.closeDrop', function () {
    $drop.removeClass('open');
    $this.unbind('blur.closeDrop');
  });
}); 
```

CSS

```
.drop {
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.2s ease;
}
.drop.open {
  opacity: 1;
  pointer-events: auto;
} 
```

# ios - 在 iPhone 应用程序中存储变量

> ID：15512293
> 
> 赞同：0
> 
> 时间：2013-03-19T23:13:52.087
> 
> 标签：ios, plist

我只需要在我的应用程序的某处存储一个 1 变量。我知道任何应用程序都有一个 plist。我可以将变量存储到其中吗？还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T23:16:22.923

对于一些值，将其存储起来`NSUserDefaults`要容易得多。

```
int someValue = 42;
[[NSUserDefaults standardUserDefaults] setInteger:someValue forKey:@"SomeKey"];

int myValue = [[NSUserDefaults standardUserDefaults] integerForKey:@"SomeKey"]; 
```

根据值的类型使用适当的 set 和 get 方法。

请注意，如果您要存储自定义对象，则涉及更多内容。

# perl - 在 Perl 中解码 3 字节整数

> ID：15512295
> 
> 赞同：0
> 
> 时间：2013-03-19T23:13:52.437
> 
> 标签：perl, unpack

我正在读取一个二进制文件格式，它以 4 个常量校验字节开始，然后是 3 个八位字节，指示记录的数据部分的长度。我可以如下解码：

```
read($fh, $x, 7) or do {
  last if eof;
  die "Can't read: $!";
};
my ($type, $l1, $l2, $l3) = unpack("a4 C3", $x);
my $length = $l1 << 16 | $l2 << 8 | $l3; 
```

有没有更直接的方法来读取那个 3 字节的值，而不需要中间变量？我`pack`可能在规格中遗漏了什么？除了十六进制编码和其他业余爱好者之外，我没有使用`pack`太多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T23:27:30.883

您可以在字符串中插入一个空字节，以便能够使用“N”格式：

```
substr($x, 4, 0, "\0");
my ($type, $length) = unpack "a4 N", $x; 
```

编辑：或者分两步解压：

```
my ($type, $length) = unpack "a4 a3", $x;
$length = unpack "N", "\0" . $length; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T01:11:53.537

```
my $type = unpack("a4", $x);
my $len  = unpack("N", "\0".substr($x, 4)); 
```

或者

```
my ($type, $plen) = unpack("a4 a3", $x);
my $len = unpack("N", "\0$plen"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T23:24:37.470

不，`unpack`不支持 3 字节（或任意长度）整数，但您可以使用无符号 16 位 big-endian int 来节省一些工作：

```
my ($type, $l1, $l23) = unpack("a4 Cn", $x);
my $length = $l1 << 16 | $l23; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T00:35:23.130

解决方案：您获取类型的方法很好。但是，我建议您将长度单独解压缩为一个四字节整数，然后丢弃这四个字节中的第一个字节。即使它重叠并丢弃类型的最后一个字节，这也会更有效。

```
my $type = unpack("a4", $x);
my $length = unpack("x3N", $x); # skips the first 3 bytes of your original 7-byte string
$length = $length & 0xFFFFFF; # returns only the last 3 bytes of the four-byte integer 
```

# c++ - 有没有更好的方法来初始化引用成员以引用同一类中的另一个成员

> ID：15512299
> 
> 赞同：4
> 
> 时间：2013-03-19T23:14:44.233
> 
> 标签：c++, class, reference, constructor, const-cast

在任何人说任何话之前，我知道这可能不被推荐，但我仍然很好奇是否有更好的方法来做这件事，或者有理由不去做，这只是一件奇怪的事情。

我开始研究这个，因为我想直接使用类中语义命名的成员访问数组的元素，同时仍然能够迭代数组，而不必调用/创建一些 getter 或 setter 方法。

我有一个看起来像这样的类定义。

```
class Vertex{
    public:
    Vertex(float x,float y,float z,float w);
    float v[4];
    float &x,&y,&Z,&w;
}; 
```

还有一个看起来像这样的构造函数。我的问题是。有没有更好的方法来做我在构造函数中所做的事情？

```
Vertex::Vertex(float vx,float vy,float vz,float vw):
    x(*const_cast<float*>( &this->v[0] )),
    y(*const_cast<float*>( &this->v[1] )), 
    z(*const_cast<float*>( &this->v[2] )),
    w(*const_cast<float*>( &this->v[3] ))
{
    v[0]=vx;
    v[1]=vy;
    v[2]=vz;
    v[3]=vw;
} 
```

## 编辑

我是个白痴……你可以像 Jonathan Wakely 说的那样做。

```
x(v[0]) 
```

我想我在尝试之前遇到了一些其他问题。那好吧。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T23:20:32.343

```
Vertex::Vertex(float vx,float vy,float vz,float vw):
    v { vx, vy, vz, vw },
    x(v[0]),
    y(v[1]), 
    z(v[2]),
    w(v[3])
{
} 
```

我会避免在这里写参考成员。原因是引用成员阻止默认（编译器生成）复制/分配特殊成员。

```
class Vertex{
  public:
    Vertex(float x,float y,float z,float w)
        : v { x, y, z, w } { }

    float &x() { return v[0]; }
    float &y() { return v[1]; }
    float &z() { return v[2]; }
    float &w() { return v[3]; }

    float const &x() const { return v[0]; }
    float const &y() const { return v[1]; }
    float const &z() const { return v[2]; }
    float const &w() const { return v[3]; }
  private:
    float v[4];
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T23:20:18.353

你也可以这样：

```
class Vertex
{
public:
  float x;
  float y;
  float z;
  float w;

  Vertex(float x, float y, float z, float w);

  float&
  operator[](int i)
  { return *(&x + i); }

  float
  operator[](int i) const
  { return *(&x + i); }
}; 
```

`Vertex`可能，这个变体更好（与其他替代方案相比），因为它需要更少的代码，并为您提供了以数组样式进行迭代的额外能力。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T23:30:24.523

就我个人而言，我最喜欢@sehe 的回答，但我会给你一个替代方案。

```
struct Vector4 {
    float x;
    float y;
    float z;
    float w;
};

union VectorUnion {
    Vector4 vector;
    float array[4];
}; 
```

然后你可以只使用`VectorUnion`你的 Vertex 类内部或单独使用......

我担心这是一个 C 结构并且 C++ 结构略有不同（它包括 vtable 等），但我认为它应该可以工作。

同样，我认为@sehe 的回答更好。

# php - 不同的观点合二为一

> ID：15512304
> 
> 赞同：0
> 
> 时间：2013-03-19T23:15:11.687
> 
> 标签：php, views, lithium

我正在使用锂框架开发一个项目，我需要能够在“主”视图中拥有不同的视图。

例如。我必须能够在主视图中查看帖子和事件表单（添加新事件和新帖子）。

我实际上有添加新帖子和新事件的视图。我正在寻找将这些视图包含在主要视图中的方法。

知道如何解决这个问题吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:15:43.557

`$this->_render()`在视图中使用以包含元素。从控制器传递到父视图的任何变量也可以在元素中使用。的第三个参数`$this->_render()`可用于传递附加变量。

```
<?php

// renders app/views/elements/nav.html.php
echo $this->_render('element', 'nav');

?> 
```

相对路径有效，所以如果你想重用 say 中的模板`app/views/events/add.html.php`，你可以这样做：

```
<?=$this->_render('element', '../events/add'); ?> 
```

# javascript - jQuery变量选择器语法错误，无法识别的表达式

> ID：15512306
> 
> 赞同：0
> 
> 时间：2013-03-19T23:15:17.287
> 
> 标签：javascript, jquery, node.js, socket.io

我想在收到 nodejs 消息后将 html 代码添加到 DOM 中......

```
socket.on('new-message', function(message) {
    $(message).prependTo('#messages').hide().slideDown();
}); 
```

我收到此错误消息：

> 未捕获的错误：语法错误，无法识别的表达式：

```
<li class="timeline-message">
    <div class="well">
        <div class="timeline-header">
            <img src="http://www.gravatar.com/avatar/8eb1b522f60d11fa897de1dc6351b7e8?s=50&amp;d=wavatar" alt="John" class="shadow" />
            <h4>
                New message from John<br/>
            </h4>
            <small>March 20th at 12:19am</small>
        </div>
        oo
    </div>
</li> 
```

如果我将变量包含在标签中，它会很好地工作：

```
$('<div>' + message + '</div>').prependTo('#messages').hide().slideDown(); 
```

谢谢您的帮助。

# sql - 关于数据收集元素集的表格设计

> ID：15512310
> 
> 赞同：0
> 
> 时间：2013-03-19T23:15:23.140
> 
> 标签：sql, sql-server, database, relational-database

如果您需要更多信息，请告诉我，因为这是我在论坛上的第一篇文章。

该设计用于临床研究。最简单的解释方法是举例说明适用于某种形式或形式的所有研究/协议的场景。说我有：

*   研究 1、研究 2、研究 3
*   Study1 有 Protocol1、Protocol2、Protocol3
*   每个方案都有“数据收集”（一组表格、问题和样本收集，可以在研究和/或方案之间重叠）
*   所有这些数据收集都计划在门诊就诊时完成。

我可以建立研究、协议和问题之间的所有关系，类似于问卷/调查设计结构。然而，这是协议定义以及如何将协议链接回数据收集项变得棘手的地方，一些示例是：

*   Protocol1 有一个表格，需要在注册后每 3 个月至 24 个月填写一次，然后每 6 个月填写一次。
*   Protocol1 在第 6 个月、第 15 个月、第 27 个月和每年收集样本。
*   Protocol1 有另一个样本收集，需要在 4、5 和 6 岁时进行。
*   有些数据收集项目是在招生时，有些是每次访问等。

我想要的是根据研究-协议-数据收集之间的所有关系为特定患者的诊所就诊制定一个“待办事项清单”，但我不确定如何在后端为协议定义这些条件标准能够查询？还是我想做一些不切实际的事情？

**顺便说一句，我正在使用 SQL Server

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T00:15:08.230

我自己设置了类似的模式后，我建议您采用生成所有未来计划日期并将其存储在与患者链接的表中的方法，而不是尝试“即时”计算这些。我认为这将为您省去很多麻烦和困难的查询。例如，您可以像这样定义一个表：

```
CREATE TABLE PatientSchedule
(
     PatientId INT, /* foreign key into Patient table */
     ProtocolId INT, /* foreign key into Protocol table */
     StudyId INT,  /* foreign key into Study table */
     DataCollectionId INT, /* foreign key into DataCollection table */
     SampleCollectionId INT, /* Foreign key into sample table */
     ScheduleDate DATE
) 
```

（您显然需要根据您的特定关系进行调整，但希望您能明白这一点）。

然后，可以在特定患者登记特定研究/协议时为特定患者预先填充此表，将所有预定日期插入到任何可能成为未来实际最大值的日期。

对于特定的诊所，访问“待办事项列表”查询应该像这样简单：

```
SELECT * FROM PatientSchedule
WHERE PatientId = ??
AND ScheduleDate = <clinic visit date> 
```

如果将来计划日期因任何原因发生更改，更新 PatientSchedule 表应该不会太困难。

# c# - 将 Listbox SelectedItems 绑定到 WPF 中的滑块

> ID：15512314
> 
> 赞同：-1
> 
> 时间：2013-03-19T23:15:44.527
> 
> 标签：c#, wpf, data-binding, slider, converter

我对 WPF 比较陌生，但是您能否提供一个示例，说明如何将滑块值绑定到列表框中的选定项目。理想情况下，当用户移动滑块时，屏幕上的项目会随着滑块值的变化而动态变化。通过阅读，我了解到您需要使用附加属性或值转换器，因为我们绑定了不同类型的值。如果是这样，您能否提供一个最有效方法的简单示例。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T00:11:54.610

不确定这是否真的是问题，但如果您打算通过 ListBox 项目移动所选项目，您可以直接将`SelectedIndex`ListBox 绑定到 Slider `Value`：

```
<StackPanel>
    <ListBox SelectedIndex="{Binding Value, ElementName=slider}">
        <ListBoxItem>1</ListBoxItem>
        <ListBoxItem>2</ListBoxItem>
        ...
        <ListBoxItem>10</ListBoxItem>
    </ListBox>
    <Slider Name="slider" Minimum="0" Maximum="9"/>
</StackPanel> 
```

当然，您必须将 Slider 的`Maximum`值调整为实际项目数减一。

# html - 不向左或向右滚动的网页

> ID：15512317
> 
> 赞同：0
> 
> 时间：2013-03-19T23:16:04.150
> 
> 标签：html, css

以下网页不允许用户向左或向右滚动。当视口小于 960 像素时，这是一个问题，因为站点没有响应。

禁用 javascript 时网站不滚动，这让我相信这是通过 HTML 或 CSS 实现的

什么代码实现了这一点，我该如何删除它？

网站： http: [//oddschanger.com](http://oddschanger.com)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T23:18:10.550

有一个可爱的

```
overflow-x: hidden 
```

在 main.css 第 166 行

希望这有帮助

# tsql - SQL_Latin1_General_CP1_CI_AS 和 SQL_Latin1_General_CP1_CI_AI 有什么区别

> ID：15512321
> 
> 赞同：10
> 
> 时间：2013-03-19T23:16:30.503
> 
> 标签：tsql

在 Microsoft SQL Server 中运行更新查询时出现此错误

> 无法解决等于操作中“SQL_Latin1_General_CP1_CI_AS”和“SQL_Latin1_General_CP1_CI_AI”之间的排序规则冲突。

该查询仅使用 2 个表，它正在更新的表和一个它执行内部联接的临时表，我没有指定这两个表的排序规则，它们都在同一个数据库上，这意味着它们应该具有相同的排序规则，因为它应该成为数据库默认的一项权利

查看排序规则，唯一的区别是最后一个字符，我对最后一部分的理解是 CI 代表不区分大小写。如果我要在黑暗中冒险，我会认为 AI 代表 Auto Increment，但我不知道 AS 代表什么

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-19T23:26:43.280

AI 代表对口音不敏感（即确定咖啡厅 = 咖啡厅）。您可以使用 collat​​e 关键字来转换一个（或两个）值的排序规则。
有关更多信息，请参阅链接：http: [//msdn.microsoft.com/en-us/library/aa258237 (v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa258237(v=sql.80).aspx)

示例：[DBFiddle](https://dbfiddle.uk/?rdbms=sqlserver_2017&fiddle=063f740c0e2213557d0db23b80ed8fa5)

```
--setup a couple of tables, populate them with the same words, only vary whether to accents are included
create table SomeWords (Word nvarchar(32) not null)
create table OtherWords (Word nvarchar(32) not null)

insert SomeWords (Word) values ('café'), ('store'), ('fiancé'), ('ampère'), ('cafétería'), ('fête'), ('jalapeño'), ('über'), ('zloty'), ('Zürich')
insert OtherWords (Word) values ('cafe'), ('store'), ('fiance'), ('ampere'), ('cafétería'), ('fete'), ('jalapeno'), ('uber'), ('zloty'), ('Zurich')

--now run a join between the two tables, showing what comes back when we use AS vs AI.
--NB: Since this could be run on a database of any collation I've used COLLATE on both sides of the equality operator
select sw.Word MainWord
, ow1.Word MatchAS
, ow2.Word MatchAI
from SomeWords sw
left outer join OtherWords ow1 on ow1.Word collate SQL_Latin1_General_CP1_CI_AS = sw.Word collate SQL_Latin1_General_CP1_CI_AS 
left outer join OtherWords ow2 on ow2.Word collate SQL_Latin1_General_CP1_CI_AI = sw.Word collate SQL_Latin1_General_CP1_CI_AI 
```

示例的输出：

``MainWord`` ``MatchAS`` ``MatchAI``
``café`` ``cafe``
``store`` ``store`` ``store``
``fiancé`` ``fiance``
``ampère`` ``ampere``
``cafétería````cafétería````cafétería``
``fête`` ``fete``
``jalapeño`` ``jalapeno``
``über`` ``uber``
``zloty`` ``zloty`` ``zloty``
``Zürich`` ``Zurich``

# jquery - 扩展、字符串化和 isPlainObject

> ID：15512325
> 
> 赞同：0
> 
> 时间：2013-03-19T23:16:49.053
> 
> 标签：jquery

我试图找出这段代码是如何工作的：

```
 <script>
  var object1 = {
      apple: 0,
      banana: {weight: 52, price: 100},
      cherry: 97
  };
  var object2 = {
     banana: {price: 200},
     durian: 100
  };

  /* merge object2 into object1 */
  $.extend(object1, object2);

  var printObj = typeof JSON != "undefined" 
       ? JSON.stringify : function(obj) {
    var arr = [];
  $.each(obj, function(key, val) {
      var next = key + ": ";
      next += $.isPlainObject(val) ? printObj(val) : val;
      arr.push( next );
  });
  return "{ " +  arr.join(", ") + " }";
  };

  $("#log").append( printObj(object1) );
  </script> 
```

我明白什么`stringify()`和`isPlainObject()`在做什么，我一直在测试代码，我意识到`function(obj)`没有使用？这真的很令人困惑。我不明白。

# windows - Windows 上的 Adob e Air 中的标题栏图标大小错误

> ID：15512326
> 
> 赞同：2
> 
> 时间：2013-03-19T23:16:49.830
> 
> 标签：windows, actionscript-3, windows-7, air, adobe

我正面临一个非常烦人的问题。我同时提供 16x16 和 32x32 应用程序图标，但初始窗口使用按比例缩小的 32x32 图标，而不是 16x16 图标。

以下是各自的图标图像：

![](../Images/90f0af1d4f0ac58b752b8142522f8ec6.png)

![](../Images/be73f64da4f7376eeb8c7d5969767d59.png)

因此，将 16x16 图标用于应用程序图标、Windows 或任何似乎不这样认为的东西是有意义的：

![](../Images/d1f83388b51ed006eabbf9dd715a53df.png)

我该如何解决？当应用程序图标的所有其他使用都清晰明了时，除了该死的窗口图标之外，这真的很烦人并且看起来非常不专业。

此错误/错误也出现在任务栏中。

![](../Images/6d7b15db15a53794cbaa0280c1b0974b.png)

有任何想法吗？

**编辑：** application.xml

```
<?xml version="1.0" encoding="utf-8"?>
<application xmlns="http://ns.adobe.com/air/application/3.5">
  <id>com.yahrly.PixelTBSLevelEditor</id>
  <versionNumber>1.0.0</versionNumber>
  <filename>PixelTBS Level Editor</filename>
  <name>PixelTBS Level Editor</name>
  <copyright>© 2013, YahRly LLC</copyright>
  <initialWindow>
    <title>PixelTBS Level Editor</title>
    <content>PixelTBSLevelEditor.swf</content>
    <systemChrome>standard</systemChrome>
    <transparent>false</transparent>
    <visible>true</visible>
    <minimizable>true</minimizable>
    <maximizable>false</maximizable>
    <resizable>false</resizable>
  </initialWindow>
  <installFolder>YahRly</installFolder>
  <programMenuFolder>PixelTBS Level Editor</programMenuFolder>
  <supportedProfiles>desktop</supportedProfiles>
  <icon>
    <image16x16>icons/icon16.png</image16x16>
    <image32x32>icons/icon32.png</image32x32>
    <image48x48>icons/icon48.png</image48x48>
    <image128x128>icons/icon128.png</image128x128>
  </icon>
  <description>Create and customise your own maps for PixelTBS.</description>
</application> 
```

**编辑2：**我发现其他人有我的问题，但他们也没有回应>>[这里](http://forums.adobe.com/message/3926988)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T20:42:16.280

一些事情要尝试：

1.  确保正在打包正确的图标文件。有时很容易忘记以前的图标仍在使用，如果它们仍然在`bin`您的项目的文件夹（例如）中可用，而 ADT 可能仍在调用该文件夹。

2.  检查您的图标，看看它们是否确实是正确的版本。

3.  清理你的项目，重新编译然后重新打包。

4.  在描述符文件中使用所有可用的图标大小：

**应用程序.xml**

```
<icon>
    <image512x512>icons/OffAirIcon512.png</image512x512>
    <image128x128>icons/OffAirIcon128.png</image128x128>
    <image72x72>icons/OffAirIcon72.png</image72x72>
    <image57x57>icons/OffAirIcon57.png</image57x57>
    <image48x48>icons/OffAirIcon48.png</image48x48>
    <image36x36>icons/OffAirIcon36.png</image36x36>
    <image32x32>icons/OffAirIcon32.png</image32x32>
    <image29x29>icons/OffAirIcon29.png</image29x29>
    <image16x16>icons/OffAirIcon16.png</image16x16>
</icon> 
```

我怀疑问题是＃1，但如果这些都不起作用，请回复有关您如何打包应用程序的详细信息？你的 ADT 命令是什么？您在使用 FlashDevelop 吗？闪存生成器？

* * *

**[编辑]**

似乎需要以编程方式加载唯一的任务栏和系统 Trey 图标，并将[*flash.desktop.InteractiveIcon.bitmaps*](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/desktop/InteractiveIcon.html#bitmaps)数组分配给[*flash.desktop.NativeApplication.nativeApplication.icon*](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/desktop/NativeApplication.html#icon) .bitmaps，如下所示：

[**AIR 中的任务栏图标**](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118676a4af7-8000.html#WS5b3ccc516d4fbf351e63e3d118666ade46-7dcc)

我意识到虽然这不能回答您的问题，但它肯定可以工作。它确实提出了关于 16 x 16 像素大小的图标文件未按预期使用的问题（对于任务栏/系统 Trey），但也许这些`application.xml`图标专门用于在 Windows 资源管理器中查看。如果您将鼠标悬停在桌面上并在滚动鼠标时按 Ctrl，您将看到 Windows 资源管理器也能够显示 16 x 16 像素大小的图标。

# parsing - 用c ++解析这个查询语句是不可能的吗？

> ID：15512330
> 
> 赞同：1
> 
> 时间：2013-03-19T23:16:57.317
> 
> 标签：parsing

字符串值 = L"'Bob, and Tom's', 1, '2013-03-19'";

我试图在 cpp 中解析这个语句，但它仍然有错误。这是 SQL 语句。它是不同的''和“。

我想知道解析不在 SQLengine 中的查询语句是否困难或危险？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T23:28:04.447

*没有针对您正在使用的数据库引擎*的精确 SQL 语法和强大的解析技术，很难解析 SQL 语句。您尝试做的任何其他事情都会在解析能力上出现问题，因此在提供实用价值的能力上也会出现问题。

是的，如果你有足够的决心，你可以在 C++ 中做到这一点。我见过很少有这么坚定的人。你问这个问题的事实非常强烈地暗示了你在哪个阵营。

# javascript - Chrome将Origin标头添加到同源请求

> ID：15512331
> 
> 赞同：19
> 
> 时间：2013-03-19T23:16:58.413
> 
> 标签：javascript, ajax, html, google-chrome, cors

我们正在向本地运行的服务器发布 AJAX 请求，即

```
xhr.open("POST", "http://localhost:9000/context/request");
xhr.addHeader(someCustomHeaders);
xhr.send(someData); 
```

正在执行此 javascript 的页面也是从 localhost:9000 提供的，即这看起来完全像一个同源请求。

然而，由于某种原因，谷歌浏览器总是在结果请求中设置一个 Origin 标头，导致我们的服务器基于它是 CORS 请求的错误假设而阻止该请求。

这在 Firefox 中不会发生。

此外，Firefox 和 Chrome 都没有发送 OPTIONS 预检请求，这令人困惑；为什么在没有预先检查的情况下设置 Origin 标头以确保服务器允许 Origin 和 Custom 标头？

有谁知道在这种情况下发生了什么？我们是否误解了 CORS 规范？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-20T02:10:30.407

Chrome 和 Safari`Origin`在同源 POST/PUT/DELETE 请求中包含一个标头（同源 GET 请求将没有 Origin 标头）。Firefox 不包含`Origin`同源请求的标头。浏览器不期望同源请求上的 CORS 响应标头，因此对同源请求的响应将发送给用户，无论它是否具有 CORS 标头。

我建议检查`Host`标头，如果它与`Origin`标头中的域匹配，请不要将请求视为 CORS。标题看起来像这样：

```
Host: example.com
Origin: http://example.com 
```

请注意，`Origin`将有方案（http/https）、域和端口，而`Host`只有域和端口。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-05-08T13:43:21.623

根据**RFC 6454** - **The Web Origin Concept** - Origin 的存在对于任何 HTTP 请求实际上都是合法的，包括同源请求：

[https://www.rfc-editor.org/rfc/rfc6454#section-7.3](https://www.rfc-editor.org/rfc/rfc6454#section-7.3)

> “用户代理可以在任何 HTTP 请求中包含一个 Origin 标头字段。”

# magento - Magento：显示所有 level2 类别

> ID：15512334
> 
> 赞同：1
> 
> 时间：2013-03-19T23:17:04.717
> 
> 标签：magento

我有 4 个级别的类别。
示例：
`level0category --> level1category --> level2category -->lastlevel_level3cateogory`
是否可以在 lastlevel 上显示仅在 level2 中的类别？（在我加载自定义 left.phtml 的块上）
我在想一些具有自动类别检测的东西，而不必设置 cat_id=

编辑：这是我一直在寻找的，混合了来自不同来源的代码。

```
<?php
    $currentCat = Mage::registry('current_category');

    if ( $currentCat->getParentId() == Mage::app()->getStore()->getRootCategoryId() )
    {
        // current category is a toplevel category
        $loadCategory = $currentCat;
    }
    else
    {
        // current category is a sub-(or subsub-, etc...)category of a toplevel category
        // load the parent category of the current category
        $loadCategory = Mage::getModel('catalog/category')->load($currentCat->getParentId());
        // @TODO enhance for more nested category levels to display sub-categories
    }    
    $subCategories = explode(',', $loadCategory->getChildren());

    foreach ( $subCategories as $subCategoryId )
    {
        $cat = Mage::getModel('catalog/category')->load($subCategoryId);

if ($cat->getIsActive())
{
    if ($currentCat->getEntityId() == $subCategoryId)
    {
        echo '<li style="display:none;">'.$cat->getName().'</li>';
    }
    else
    {

  echo '<a href="'.$cat->getURL().'">'.$cat->getName().'</a> <br>';    }
}

    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T04:20:58.833

```
$categories = Mage::getModel('catalog/category')
                    ->getCollection()
                    ->addAttributeToSelect('*')
                    ->addIsActiveFilter()
                    ->addAttributeToFilter('level',2)
                    ->addOrderField('name'); 
```

确保这条线在那里

```
apply ->addAttributeToFilter('level',2) 
```

# vba - 在更新的电子表格中自动将文本转换为数字

> ID：15512335
> 
> 赞同：1
> 
> 时间：2013-03-19T23:17:05.990
> 
> 标签：vba, excel

我有一个由单独的应用程序填充的电子表格，其中包含数字字符串（例如，“654”、“0.005”）。Excel 无法对字符串进行计算。由于我的电子表格每隔几分钟就会更新一次（添加行），我想编写一个脚本来自动将一个范围内的单元格转换为数字。

这是我的解决方案，其中 convertRange 是一个包含要转换为数字的字符串的范围：

```
method OnChangeInSpreadsheet():
if changedCell is NOT in convertRange
   currentHeight = convertRange.height
   expand convertRange to include new rows
   convert the new rows' strings 
```

它变得复杂的原因是因为字符串到数字的转换会触发 OnChangeInSpreadsheet 函数，所以我必须小心将新行附加到 convertRange 之外。谁能想到另一种解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:33:52.537

您是否尝试过将字符串值乘以 1 以转换为数字？几天前我遇到了一个问题，数字被视为字符串并且行为不正确。解决方案是将它们乘以 1。

让我解释一下：我编写了一个模块`VBA`来对工作表中的数字进行一些计算`excel`。计算结果被放入一个数组中，然后作为另一个工作表上修改后的 excel 公式的一部分“打印”（如分配的）。我遇到的问题是小数（例如 0.1234）没有在“。”前面显示它们的“0”。在细胞中。问题是 excel 将它们视为*字符串*而不是*数字*。即使我通过 excel GUI 将它们的格式更改为数字，问题仍然存在。

*注意：在编程中，很多时候您通过将整数乘以 double/float 将其转换为 double/float*。

考虑到这一点，我将结果*打印*在乘以 1 的单元格中`(as in "=function(...) * 1")`，这很有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T22:12:45.953

我最终使用了[ASAP Utilities 功能](http://www.asap-utilities.com/asap-utilities-excel-tools-tip.php?tip=70&utilities=67&lang=en_us)，“将无法识别的数字（文本？）更改为数字”。我决定实际上不需要在每次更新时将文本转换为数字，因此我在 OnWorkbookOpen 方法中运行该函数。

仅在已更改的单元格上运行 ASAP Utilities 功能会很容易。只需关闭 Application.EnableEvents 之前，然后再打开它，正如上面评论中有人如此有用地建议的那样。

感谢大家的帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-20T10:29:43.573

我刚刚找到了一个简单的方法来根据需要自动转换字符串：

```
Application.Transpose(Application.Transpose(arrStrData)) 
```

# math - 查找变量是否有小数位/是Lua Corona SDK中的小数

> ID：15512338
> 
> 赞同：4
> 
> 时间：2013-03-19T23:17:15.300
> 
> 标签：math, sdk, lua, decimal, coronasdk

我正在创建一个数学应用程序，问题答案存储在一个名为 answer 的变量中，我需要一种方法来检查答案是否有小数点，例如，如果生成的问题是 4 除以 3，我希望能够检查答案是否包含小数。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T23:29:46.460

查看[数学](http://www.lua.org/manual/5.2/manual.html#6.6)标准库。检查数字是否为整数的一种方法是使用 floor 函数：

```
x == math.floor(x) 
```

当然，这假设 x 是一个数字而不是一个字符串。

# objective-c - NSLevelIndicator：检测点击并更新

> ID：15512339
> 
> 赞同：0
> 
> 时间：2013-03-19T23:17:17.627
> 
> 标签：objective-c, nslevelindicator

我想使用 a`NSLevelIndicator`来管理我的应用程序中的评级，但我不明白如何检测点击它并更新评级。

这是代码：该属性`rate`是在 .h 文件中创建的，它是在 IB 中正确链接的 IBOutlet。

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{

    NSLevelIndicatorCell *cell = [[NSLevelIndicatorCell alloc] initWithLevelIndicatorStyle:NSRatingLevelIndicatorStyle];

    [cell setMinValue:0.0];
    [cell setMaxValue:5.0];

    [cell setFloatValue:3.0];

    [cell setTarget:self];

    [cell setAction:@selector(click:)];

    [self.rate setCell:cell];

}

- (IBAction)click:(id)sender
{

    //How to detect change in rating here???

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T19:55:33.450

我为其他有相同“问题”的人发布了解决方案。

用户交互对我不起作用的原因是因为我需要打电话`[cell setEnabled:YES]`。可能此属性`NO`默认设置为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-16T14:05:12.787

也许这是一个错误，但 setEnabled: 不能解决任何问题，而 setEditable: 可以。

# c# - 拥有 WPF 窗口的 C# 线程的生命周期

> ID：15512340
> 
> 赞同：0
> 
> 时间：2013-03-19T23:17:20.330
> 
> 标签：c#, wpf, multithreading

我有一个创建 WPF 窗口并显示它的 UI 线程。示例代码将是：

```
Thread thread = new Thread(() => 
    {
        Window window = new Window();
        window.Show();
        Dispatcher.Run();
    });
thread.SetApartmentState(ApartmentState.STA);
thread.Start(); 
```

在此代码中，主进程将创建一个线程，并从该线程创建 WPF 窗口。线程的生命周期是否与 WPF Window 相同？如果 WPF 窗口关闭，线程会终止吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T00:22:58.477

如果你只是编译这个并尝试你会发现当窗口关闭时线程并没有终止。这是因为您启动了处理消息循环的线程，`Dispatcher.Run()`并且这将在无限循环中继续，直到您告诉它停止。这样做的原因是一个新的 WPF 应用程序开始时调用`Application.Run(MyMainWindow)`- 在这个线程中，但是，`window`属于该线程并`Dispatcher`属于该线程，但`Dispatcher`不属于`window`，因此关闭窗口对调度程序没有任何作用。

在 Winforms 中，您可以通过从线程内调用来破解第二个 UI 线程，`Application.Run(MyForm)`但据我所知，WPF 不允许这样做。您不能`Application.Current`从辅助线程内访问，也不能从线程内创建和运行新实例`Application`。如果你真的真的需要第二个消息循环——我觉得这在任何明智的设计策略中都可能不合理——你需要编写清理代码以确保线程的 Dispatcher 关闭并终止线程。

# python - 在 web2py 中独立使用 DAL

> ID：15512342
> 
> 赞同：2
> 
> 时间：2013-03-19T23:17:22.923
> 
> 标签：python, web2py

我有来自 web2py 应用程序的 sqlite 数据库。我想使用`gluon`库来处理数据。我读过[这篇文章](http://caglartoklu.blogspot.com/2011/06/standalone-usage-of-web2pys-dal-gluon.html)，但我得到了错误`DAL object has no attribute 'user`。据我了解，我需要使用表的定义（在 中`myapp/models/tables.py`）。如何将 DAL 与 web2py 之外的现有数据库一起使用（仅使用胶子库）。

这是我的代码：

```
from gluon.sql import DAL, Field
from gluon.validators import *

module_path = os.path.abspath(os.path.dirname(__file__))
print module_path
dbpath = module_path + '/../databases/'

db_name = "storage.sqlite"

db = DAL('sqlite://' + db_name, folder=dbpath)
rows = db(db.user).select() 
```

我的问题是如何导入我拥有的所有表定义`myapp/models/tables.py`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-29T00:59:32.000

您可以使用`pydal`

```
pip install pydal 
```

接着：

```
from pydal import DAL, Field
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T23:22:39.913

您的代码引用了`db.user`，但您尚未在代码中定义“用户”表。您不能从应用模型文件导入表定义，因为它不是 Python 模块。一种解决方案可能如下：

```
db = DAL('sqlite://' + db_name, folder=dbpath, auto_import=True) 
```

这将从 *.table 文件中读取表元数据并创建表定义，尽管定义将不包括某些特定于 web2py 的模型属性，例如字段验证器、标签等。如果您需要完整的 DAL 表定义字段属性，您必须将它们直接包含在您的外部代码中。有关更多详细信息，请参见[此处](http://web2py.com/books/default/chapter/29/06#Using-DAL-without-define-tables)。

另外， do `import gluon.dal`, not`gluon.sql`很久以前就被弃用了（它只是指 gluon.dal）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-04T06:35:53.767

您必须从 web2py 环境中收到的 pydal/dal 版本单独安装 pydal。（还要检查您的 web2py 副本中的 pydal 版本并将相同版本安装到 python 中）

```
pip install pydal==some_version_number 
```

注意：您必须使用数据库表所在文件夹的显式路径。

```
from pydal import DAL

db = DAL("some_db_uri", folder="/some/full_path_to/database", auto_import=True) 
```

# grails - GORM Eagerly Fetch Collection with Criteria

> ID：15512343
> 
> 赞同：0
> 
> 时间：2013-03-19T23:17:35.280
> 
> 标签：grails, join, groovy, criteria, eager-loading

我有一个简单的一对多关联：

```
class Foo {
    int id
    Date someDate

    static hasMany = [
        bars: Bar
    ]
}

class Bar {
    Foo foo
    Date someDate

    static mapping = {
        .....
        columns {
            foo([:]) {
                column name: "id"
            }
        }
    }
} 
```

一般情况下，调用 foo.bars 会返回所有的 Bars，这样就可以了。但在这种情况下，我需要使用`someDate`参数进行查询。我需要急切地获取收藏，但我不知道该怎么做。我想做这样的事情：

```
Foo.withCriteria {
    eq("id", someId)
    bars {
        eq("someDate", ?????)
    }
} 
```

不过，我不确定要为该值添加什么，因为它不提前知道，或者是否有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T18:43:01.250

在父类中过滤列表会非常混乱。如果您设法创建了一个只有s列表子集的实例`foo`，那么除了其他问题外，还会出现奇怪的行为。`foo.bars``Bar``foo.addToBars`

如果您只需要查找`Bar`属于给定的 s集`Foo`，并按其属性过滤`someDate`，则应首先查询`Bar`该类：

```
Bar.findAllByFooAndSomeDate(foo, dateVal)
Bar.findAllByFooAndSomeDateBetween(foo, startDate, endDate) 
```

或者：

```
Bar.findAll() {
    (foo.id == someId) && (someDate == dateVal)
} 
```

等等

# autohotkey - 替换 unicode 字符串

> ID：15512345
> 
> 赞同：0
> 
> 时间：2013-03-19T23:17:36.167
> 
> 标签：autohotkey

我有这个代码：

```
replace :=  {x:"y",≤:"\leq",≥:"\geq",∫:"\int",∑:"\sum"}

For what, with in replace
  f2::StringReplace, clipboard, clipboard, %what%, %with%, All 
```

它可以将 x 替换为 y。但我实际上想用它来将一大堆 unicode 数学符号替换为乳胶。这个 stringreplace 函数似乎不适用于 unicode，有什么想法可以得到我想要的吗？这是问这个问题的正确地方吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:26:45.917

当我在旧的 Microsoft 记事本（在 Windows 7 上）中创建此脚本并将其保存为 Replace.ahk 格式`Unicode`时，它运行起来就像一个魅力！

```
ClipBoard= x123y123≤123≥123∫123∑123
replace :=  {x:"y",≤:"\leq",≥:"\geq",∫:"\int",∑:"\sum"}
For what, with in replace
    StringReplace, clipboard, clipboard, %what%, %with%, All
MsgBox, %clipboard%
ExitApp 
```

![在此处输入图像描述](../Images/b1fe02217f2e8059fb5e4430cfda9e26.png)

# android - Web 服务有时可以正常工作，有时不能

> ID：15512348
> 
> 赞同：0
> 
> 时间：2013-03-19T23:17:55.223
> 
> 标签：android, web-services, android-emulator

我从我的 Android 代码中的网络服务获取数据，它在模拟器中运行良好。

然后我连接了我的 Android 平板电脑来测试代码，但没有安装驱动程序并且 Windows 无法识别该设备。

然后我再次启动模拟器继续我的开发，但这一次我的代码没有工作，并说 web 服务的 URI 查询有错误。

为什么是这样？如果有人知道，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:54:35.120

得到了答案。

干扰模拟器文件的不是断开和重新连接安卓设备的问题。不！我的无线适配器实际上不能正常工作，它会按时间间隔连接和断开连接，导致 Internet 数据包传输失败。

它加载服务，有时会拒绝。

〜帮助，当你认为这是一个帮助〜

# git - 如何在裸仓库上运行 git p4 submit？

> ID：15512357
> 
> 赞同：2
> 
> 时间：2013-03-19T23:18:45.150
> 
> 标签：git, perforce, git-p4

# TLDR

如何`git p4 submit`在裸回购上运行？那是哪个命令行选项`git p4 submit`？

# 很长的故事

我希望我公司内使用 perforce 的团队迁移到 git。我想使用 Git-P4 来实现这一点。我想将一部分 perforce 克隆到 git repo，并将其作为远程 repo，以便人们克隆它，将更改推送到远程 repo，我会定期将远程 repo 中所做的更改重新提交回 perforce . 所以我跟着这个教程

[http://answers.perforce.com/articles/KB_Article/Git-P4](http://answers.perforce.com/articles/KB_Article/Git-P4)

归结为这个命令：

```
git p4 clone //depot/path.to/folder@all folder --bare 
```

那行得通，然后在我的客户端机器上我做

```
git clone "user1@server:/home/user1/path/to/folder" 
```

这很好，它出现了，所以我对测试文件进行了编辑，然后执行

```
git add file
git commit -m 'test'
git push. 
```

这行得通，但是现在回到带有repo的文件夹中的远程repo，我这样做，

```
git p4 rebase 
```

我明白了

```
git p4 rebase
Performing incremental import into refs/remotes/p4/master git branch
Depot paths: //depot/path.to/folder/
No changes to import!
fatal: This operation must be run in a work tree
Some files in your working directory are modified and different than what is in your index. You can use git update-index <filename> to bring the index up-to-date or stash away all your changes with git stash. 
```

和

```
git p4 submit 
```

给了我这个：

```
Perforce checkout for depot path //depot/path.to/folder/ located at /home/user1/path/to/perforce.folder/
Synchronizing p4 checkout...
... - file(s) up-to-date.
fatal: Not a git repository: '.'
Command failed: ['git', 'rev-list', '--no-merges', 'remotes/p4/master..master'] 
```

所以问题是当我提交时git repo不能是一个裸repo，它必须是一个带有工作目录的普通repo，对吗？但如果是这样的话，为什么还要给我一个`--bare`选择呢？我选择这个选项的原因`--bare`是，当我把它排除在外时，我得到了一组不同的错误，这些错误是关于远程 repo 的工作副本中未提交的更改。但是如何让 git p4 提交而没有任何错误呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T00:31:34.463

我的理解[`git p4`](http://git-scm.com/docs/git-p4)非常有限，但理论上这应该可行。

要`git p4`以使您的裸 git 存储库和 perforce 存储库同步的方式使用，您需要维护至少 3 种不同类型的存储库：

*   **BareGitRepo** - 您创建的裸仓库。我建议***不要***`git p4`直接在这个 repo中使用任何命令。只需一个常规的裸 git repo 就足够了。所有使用 git 的开发人员都应该直接克隆这个存储库，并且只将更改作为远程推送到这个存储库中。
*   **GitP4Repo从****BareGitRepo**克隆的非裸仓库，但要与 perforce 同步。这是您运行所有`git p4`命令的地方。
*   **P4Workspace** - 一个 perforce 客户端工作区，您可以使用它从 git repo 提交更改到 perforce.

在**GitP4Repo 中**：

*   最初使用设置 repo`git p4 clone <PERFORCE_FILE_PATH>`
*   定期从**BareGitRepo**同步更改。（有点像`git fetch origin && git rebase origin/master master`）
*   定期`p4`使用`git p4 rebase`. （本质上确实`git p4 sync`跟着 a `git rebase p4/master`）
*   使用 . 将更改提交到 perforce `git p4 submit`。这是您需要在客户端工作区中映射**P4Workspace**的地方。
*   使用perforce 将合并的更改推送回**BareGitRepo**`git push origin master`

我能想到的问题：

*   这些步骤需要定期运行（取决于您希望 perforce 提交与您的 git 存储库同步的频率）。
*   当您运行 a 时，git commit SHA1 可能会发生变化，`git p4 rebase`因为它会调用`git rebase`将来自您的 git 存储库的提交覆盖在较新的 perforce 提交之上。我不确定是否可以使用选项`git merge`，并保留 git 提交的 SHA1 哈希。

最后回答你的问题，为什么`git p4 clone`有一个`--bare`选项，我只能想象 git-p4 的`clone`命令尝试类似于常规`git clone`命令。

`git clone`还有一个`--bare`用于创建裸存储库的选项。不，您也不能在这样的存储库上运行`git pull`or 。`git checkout``git rebase`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T09:02:01.583

您不能从裸仓库提交。裸仓库仅用于克隆和推送更改。如果要提交，则需要在另一个位置克隆裸仓库。

那你为什么想要一个裸回购呢？好吧，当您托管一个 git 项目时使用它，该项目有一个每个人都推送到的简单主存储库。通常，裸仓库位于不被任何人直接使用的服务器上。保持一个“裸”的 repo 允许 git 尽可能有效地压缩所有数据。在许多情况下，您可能会看到 10:1 的压缩比与已签出 repo 的单个修订版相比。

# heroku - 为我的 Heroku 应用获取有限的 IP 地址列表？

> ID：15512360
> 
> 赞同：27
> 
> 时间：2013-03-19T23:19:01.970
> 
> 标签：heroku

我有客户想要向我的 Heroku 应用程序发送 GET 请求。他们要求提供一个 IP 地址列表，以将其防火墙上的出口列入白名单。

我意识到这可能会每周或更频繁地更改，但是是否可以获得我的 Heroku 应用程序可以使用的有限 IP 列表？

[我在Heroku 的 Google Groups 页面](http://www.mail-archive.com/heroku@googlegroups.com/msg09210.html)上看到了以下摘录，但我找不到它在其他任何地方得到证实，或者如何查看我的应用程序使用的地址列表。

> 现在您的 CNAME 设置将在 8 个左右的 IP 地址之间循环，我们发现

如果 IP 地址列表实际上是无限的，您是否有其他建议可以经济地通过防火墙接收“GET”请求？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-20T09:46:10.313

不，Heroku 甚至不会为您提供 IP 地址范围 - 他们可以、可能并且将根据需要在 Amazon 区域之间移动测功机。

您唯一的选择是某种具有静态 IP 的代理节点，他们与之交谈，可以安全地与您的 Heroku 应用程序通信 - 或者考虑 Heroku 是否完全适合您。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-11-18T22:27:34.450

Heroku 在 amazon ec2 上运行，因此它的[官方 IP 范围](https://ip-ranges.amazonaws.com/ip-ranges.json) 应该包含 heroku 可用的所有 IP 地址。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-08-14T11:02:19.667

`Proximo`您可以通过非常昂贵的附加组件路由出站流量来实现这一目标。

# c# - 在 C# 中为 jpg 文件加水印

> ID：15512364
> 
> 赞同：1
> 
> 时间：2013-03-19T23:19:29.887
> 
> 标签：c#, watermark

我正在尝试用另一个 jpg 图像为 jpg 图像加水印。如果我将生成的图像存储为新图像，它工作正常。是否可以仅使用水印图像更新原始图像文件？我不需要将其存储为不同的文件。

这是我的代码：

```
//watermark image 

Bitmap sizedImg = (Bitmap)System.Drawing.Image.FromFile(@"C:\report branding.jpg");

//original file

System.Drawing.Bitmap template=(System.Drawing.Bitmap)System.Drawing.Image.FromFile(@"C:\CentralUtahCombined1.jpg");            

 Graphics g = Graphics.FromImage(template);
                g.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.HighQuality;
                g.DrawImage(sizedImg, new Point(template.Width - sizedImg.Width,
                             template.Height - sizedImg.Height));

            //watermarking the image but saving it as a different image file - here if I //provide the name as the original file name, it throws an error
            string myFilename = @"C:\CentralUtah.jpg";

            template.Save(myFilename);

            template.Dispose();
            sizedImg.Dispose();
            g.Flush(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T23:31:56.330

Image.FromFile 保留对原始文件的锁定。与其直接从文件创建图像，不如尝试从 FileStream 打开文件并从该流创建图像。这样您就可以控制何时释放文件的锁。

尝试这个：

```
public static Image CreateImage(string filePath)
{
    using(var fs = new FileStream(filePath, FileMode.Open, FileAccess.Read))
        return Image.FromStream(fs);
} 
```

更多信息。MSDN 提到 Image.FromFile 将保留锁定，直到图像被处置。[http://msdn.microsoft.com/en-us/library/stf701f5.aspx](http://msdn.microsoft.com/en-us/library/stf701f5.aspx)

我刚刚意识到 FromStream 方法表明流保持打开状态。如果仍有问题，请尝试将字节读入内存流。在这个例子中，内存流没有被释放。当您将其调整为您的代码时，处理流将是一个好主意。:)

```
public static Image CreateImage(string filePath)
{
        var bytes = File.ReadAllBytes(filePath);
        var ms = new MemoryStream(bytes);
        return Image.FromStream(ms);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T23:33:54.083

这可能是因为`Image.FromFile`方法正在锁定文件。
有关如何在不锁定文件的情况下加载文件的方法，请参阅此答案：[https ://stackoverflow.com/a/3389126/214222](https://stackoverflow.com/a/3389126/214222)

# android - 在某些事件发生时重复文本到语音

> ID：15512366
> 
> 赞同：2
> 
> 时间：2013-03-19T23:19:30.020
> 
> 标签：android, text-to-speech

我正在开发 android 应用程序，并且正在使用 TTS 引擎。应用程序应该在某个事件的持续时间内输出一条连续重复的消息。

我目前正在`while(true)`添加到队列中的语句中执行此操作，但后来认为这可能不是一个好主意，因为我认为 TTS.speak 方法不会阻塞，因此它会不断向 tts 引擎添加语音这可能不会被使用或可能导致内存问题或性能问题等问题。

有没有办法让程序等待文本到语音完成，一旦完成，它可以循环并再次重播消息等等。这是可能的还是我所做的事情有更好的解决方案。

下面是我到目前为止的代码

```
if (repitionOption.equals(SettingsManager.CALL_ANNOUNCE_CONTINUOUSLY))
{
    while (true)
    {
    textToSpeech.speak(ttsMessage, TextToSpeech.QUEUE_ADD, null);
    }
} 
```

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T23:22:57.040

如果您的条件为真，您可以实现**onUtteranceCompleted**并再次调用 speak。

# c++ - 这种处理带有 SSE 的数组尾部的方法是否矫枉过正？

> ID：15512370
> 
> 赞同：3
> 
> 时间：2013-03-19T23:19:48.423
> 
> 标签：c++, floating-point, sse

我在搞乱 SSE，试图编写一个函数，将单精度浮点数组的所有值相加。我希望它适用于数组的所有长度，而不仅仅是 4 的倍数，就像网络上几乎所有示例中所假设的那样。我想出了这样的事情：

```
float sse_sum(const float *x, const size_t n)
{
    const size_t
        steps = n / 4,
        rem = n % 4,
        limit = steps * 4;

    __m128 
        v, // vector of current values of x
        sum = _mm_setzero_ps(0.0f); // sum accumulator

    // perform the main part of the addition
    size_t i;
    for (i = 0; i < limit; i+=4)
    {
        v = _mm_load_ps(&x[i]);
        sum = _mm_add_ps(sum, v);
    }

    // add the last 1 - 3 odd items if necessary, based on the remainder value
    switch(rem)
    {
        case 0: 
            // nothing to do if no elements left
            break;
        case 1: 
            // put 1 remaining value into v, initialize remaining 3 to 0.0
            v = _mm_load_ss(&x[i]);
            sum = _mm_add_ps(sum, v);
            break;
        case 2: 
            // set all 4 to zero
            v = _mm_setzero_ps();
            // load remaining 2 values into lower part of v
            v = _mm_loadl_pi(v, (const __m64 *)(&x[i]));
            sum = _mm_add_ps(sum, v);
            break;
        case 3: 
            // put the last one of the remaining 3 values into v, initialize rest to 0.0
            v = _mm_load_ss(&x[i+2]);
            // copy lower part containing one 0.0 and the value into the higher part
            v = _mm_movelh_ps(v,v);
            // load remaining 2 of the 3 values into lower part, overwriting 
            // old contents                         
            v = _mm_loadl_pi(v, (const __m64*)(&x[i]));     
            sum = _mm_add_ps(sum, v);
            break;
    }

    // add up partial results
    sum = _mm_hadd_ps(sum, sum);
    sum = _mm_hadd_ps(sum, sum);
    __declspec(align(16)) float ret;
    /// and store the final value in a float variable
    _mm_store_ss(&ret, sum);
    return ret; 
} 
```

然后我开始怀疑这不是矫枉过正。我的意思是，我陷入了 SIMD 模式，只需要用 SSE 处理尾部。这很有趣，但是将尾部相加并使用常规浮点运算计算结果不是同样好（而且更简单）吗？我在 SSE 做这件事有什么收获吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T02:20:17.877

正如所承诺的，我做了一些基准测试。为此，我 _aligned_malloc'd 了一个大小为 100k 的浮点数组，用单个值*1.123f*填充它，并针对它测试了函数。我写了一个简单的求和函数，它只是将结果累加到一个循环中。接下来，我制作了一个简化的 SSE 求和函数变体，其中水平和尾部添加使用常规浮点数完成：

```
float sseSimpleSum(const float *x, const size_t n)
{
    /* ... Everything as before, but instead of hadd: */

    // do the horizontal sum on "sum", which is a __m128 by hand
    const float *sumf = (const float*)(&sum);
    float ret = sumf[0] + sumf[1] + sumf[2] + sumf[3];

    // add up the tail
    for (; i < n; ++i)
    {
        ret += x[i];
    }

    return ret; 
} 
```

我的性能没有受到任何影响，有时它甚至看起来有点快，但我发现计时器非常不可靠，所以让我们假设简化的变体等同于复杂的变体。但令人惊讶的是，从 SSE 和幼稚浮点求和函数获得的值存在相当大的差异。我怀疑这是由于四舍五入造成的误差累积，所以我写了一个基于[Kahan 算法](http://en.wikipedia.org/wiki/Kahan_summation_algorithm)的函数，它给出了正确的结果，虽然比天真的浮点加法慢得多。为了完整起见，我按照这些思路制作了一个基于 SSE Kahan 的函数：

```
float SubsetTest::sseKahanSum(const float *x, const size_t n)
{
    /* ... init as before... */

    __m128 
        sum = _mm_setzero_ps(), // sum accumulator
        c   = _mm_setzero_ps(), // correction accumulator
        y, t;

    // perform the main part of the addition
    size_t i;
    for (i = 0; i < limit; i+=4)
    {
        y = _mm_sub_ps(_mm_load_ps(&x[i]), c);
        t = _mm_add_ps(sum, y);
        c = _mm_sub_ps(_mm_sub_ps(t, sum), y);
        sum = t;
    }

    /* ... horizontal and tail sum as before... */
} 
```

以下是从 VC++2010 在 Release 模式下获得的基准测试结果，其中显示了总和的获得值、计算时间以及与正确值相关的错误量：

> Kahan: value = 112300, time = 1155, error = 0
> Float: value = 112328.78125, time = 323, error = 28.78125
> SSE: value = 112304.476563, time = 46, error = 4.4765625
> Simple SSE: value = 112304.476563, time = 45,错误 = 4.4765625
> Kahan SSE：值 = 112300，时间 = 167，错误 = 0

天真的浮点加法的错误量是巨大的！我怀疑非 Kahan SSE 函数更准确，因为它们相当于[成对求和](http://en.wikipedia.org/wiki/Pairwise_summation)，与直接方法相比，它可以提高准确性。Kahan SSE 是准确的，但只比简单的浮动加法快两倍。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T15:29:01.590

我会查看 Agner Fog 的矢量类。请参阅VectorClass.pdf**的“当数据大小不是向量大小的倍数”部分。**他列出了五种不同的方法，并讨论了每种方法的优缺点。 [http://www.agner.org/optimize/#vectorclass](http://www.agner.org/optimize/#vectorclass)

一般来说，我这样做的方式是从以下链接中获得的。 [http://fastcpp.blogspot.no/2011/04/how-to-unroll-loop-in-c.html](http://fastcpp.blogspot.no/2011/04/how-to-unroll-loop-in-c.html)

```
#define ROUND_DOWN(x, s) ((x) & ~((s)-1))
 void add(float* result, const float* a, const float* b, int N) {
 int i = 0;
 for(; i < ROUND_DOWN(N, 4); i+=4) {
    __m128 a4 = _mm_loadu_ps(a + i);
    __m128 b4 = _mm_loadu_ps(b + i);
    __m128 sum = _mm_add_ps(a4, b4);
    _mm_storeu_ps(result + i, sum);
  }
  for(; i < N; i++) {
      result[i] = a[i] + b[i];
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T00:19:15.397

在这种情况下，除非您能指出一些真正的性能提升，否则它可能是矫枉过正的。如果您正在使用，`gcc`那么这个关于[使用 gcc 4.7 进行自动矢量化的](http://locklessinc.com/articles/vectorize/)指南可能是一个不错的选择，尽管它显然是`gcc`具体的，它不像内在函数那么难看。

# python - 反转一维数组 - PYTHON

> ID：15512371
> 
> 赞同：0
> 
> 时间：2013-03-19T23:19:50.370
> 
> 标签：python, arrays, list, reverse

如何编写一个 Python 函数，给定一个数字数组 A 返回一个数组 B，其中 A 的元素以相反的顺序排列？ **不在**python中使用reverse函数，而是使用for循环？

这就是我到目前为止所拥有的，然后我在 shell 中调用函数 main()，它给了我一些错误，其中之一是未定义“B”。

```
def ReverseArray(A):
    n = len(A)
    for i in range(0, n-1):
        B[n-i-1] = A[i]
    return (B)

def main():
    A = [13, 21, 15, 38, 49]  # Test case for ReverseArray function
    B = ReverseArray(A)
    print(B) 
```

我哪里做错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T23:24:49.247

正如您所说，您的第一个问题是您尚未定义`B`.

显而易见的答案是定义`B`. 累积 a 时的起始值是`list`多少？大概是空`list`的吧？所以：

```
def ReverseArray(A):
    B = []
    n = len(A)
    for i in range(0, n-1):
        B[n-i-1] = A[i]
    return (B) 
```

* * *

您将遇到的下一个问题是`IndexError`from that `B[n-i-1] = A[i]`。那是因为您正在尝试`B`就地修改 的项目，所以它必须有`n`项目开始。换句话说，您想要的东西与`A`. 副本怎么样`A`？

```
B = list(A) 
```

或者，如果您了解列表推导，这可能会更好：

```
B = [None for _ in A] 
```

* * *

最后，您的算法实际上并不正确。例如，给定您的`A`, `n`will be `5`， so `range(0, n-1)`will be `[0, 1, 2, 3]`。这意味着你永远不会设置`B[0]`任何东西。

您可能没有意识到 Python函数返回的`range`范围*不包括*`stop`参数。只是`range(0, n)`（或者，更简单地说，`range(n)`）是你想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T23:25:55.090

您可以像这样向后迭代列表，然后将每个元素添加到列表 B。

```
def ReverseArray(A):
    B = list()
    for i in xrange(len(A)-1,-1,-1):
        B.append(A[i])
    return B 
```

# php - 将信息从一个表应用到同一数据库中的另一个表？

> ID：15512372
> 
> 赞同：1
> 
> 时间：2013-03-19T23:20:10.763
> 
> 标签：php, sql, geocoding

我有包含邮政编码及其位置信息（即经度、纬度等）的表 1，表 2 包含带有地址的属性...我需要将表 1 中邮政编码的经度和纬度连接到地址在表 2 中 >>

能够创建一个搜索，在特定邮政编码的 (x) 英里半径内提供最近的属性...

我不知道该怎么做。我需要合并这两个表吗？或者我可以进行同时从两者中提取信息的搜索吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:28:21.250

首先，您需要在这两个表之间建立关系，可以使用 Zipcode，也可以使用代理键。然后你可以加入这两个表来做搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T23:49:33.217

这是从我制作的一个网站上截取的，一个客户跳过了城镇并且从未付钱给我 - 享受：

```
<?php

$res = mysqli_query($dh,
    "SELECT `items`.`id`, `items`.`title`, `items`.`postcode`, `geodata`.`lat`,
    `geodata`.`long`, (6371.009*acos(cos(radians(" . $_SESSION['lat'] . "))*
    cos(radians(`geodata`.`lat`))*cos(radians(`geodata`.`long`)-radians(" .
    $_SESSION['long'] . "))+sin(radians(" . $_SESSION['lat'] . "))*
    sin(radians(`geodata`.`lat`)))) AS `distance`
    FROM `items`, `geodata`
    WHERE `geodata`.`postcode` = `items`.`postcode`
    ORDER BY `distance` ASC"
);

echo '<table>';

while($item = mysqli_fetch_assoc($res))
{
    echo '<tr>' .
        '<td><a href="/' . $item['id'] . '">' . $item['title'] . '</a></td>' .
        '<td>' . $item['postcode'] . ' (' . number_format($item['distance']) . 'km away)</td>' .
    '</tr>';
}

echo '</table>';

?> 
```

在本例中，`$_SESSION['lat']`并`$_SESSION['long']`包含用户的位置。

`geocode`还需要一个像这样的 MySQL 表：

```
postcode | lat         | long
200      | -35.2765521 | 149.1220236
810      | -12.3808934 | 130.8773842 
```

（这些取自澳大利亚）。

这将返回最近的列表`items`，距离以公里为单位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T23:28:56.480

您应该在邮政编码表上选择与您的坐标匹配的邮政编码，然后加入地址具有该邮政编码的地址表。

[http://dev.mysql.com/doc/refman/5.0/en/join.html](http://dev.mysql.com/doc/refman/5.0/en/join.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T23:39:08.807

如果我正确理解您的问题，问题是服务器将无法判断每个地址彼此之间的距离或距离，而其中两个地址具有相同的邮政编码。
让我重述一下。如果您有地址 A、B 和 C，并且它们都具有相同的邮政编码，则无法（除非您在地址表中也有坐标）来判断 A 与 B 或 C 的距离。

正如您被告知的那样，一种可能的解决方法是仅使用邮政编码来关联表格。然后你只需要一个像这样的简单连接查询：

```
SELECT <fields> 
FROM TABLE1 a 
join TABLE2 b 
on 
( a.zipcode=b.zipcode ) 
WHERE a.zipcode=<Your_search_here> 
```

在该示例中，您的邮政编码甚至不必在您选择的字段中。

我希望这会有所帮助=)

# mysql - 如何在cakePHP中填充用户所属的多对多表中的组数组

> ID：15512378
> 
> 赞同：0
> 
> 时间：2013-03-19T23:20:36.393
> 
> 标签：mysql, arrays, cakephp

我的 cakePHP 网站有三个表；用户、组和组用户。

users.id 通过一对多关系加入 groups_users.users_id。

groups.id 通过一对多关系加入 groups_users.groups.id。

因此，groups_users 包含所有用户及其所在组的列表。例如，用户 1 可能在组 1、2 和 3 中。groups_users 还包含一个单独的主键字段。

我希望能够返回用户登录时所属的组名（groups.groupName）的数组，然后保留该数组并使用它来检查该组名是否有权查看特定页面网站。

我是蛋糕新手，但对 php 很满意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T03:18:52.743

在这些情况下，我更喜欢可容纳的。我相信有人会告诉我是否有理由不这样做。

首先，您需要将此行添加到您的用户模型中：

```
public $actsAs = array('Containable'); 
```

确保您在此处也正确设置了您的关系。然后您可以在控制器中使用以下代码。

```
$groups = $this->User->find('first', array(
  'conditions' => array(
    'User.id' => $id
  ),
  'contain' => array(
    'Group' => array(
       'fields' => array(
         'Group.groupName'
        )
      )
   )
));
$this->set('groups', $groups); 
```

最后一行使变量在您的视图中可用。尝试在您的控制器或视图中运行 debug($groups) 以查看输出。

# asp.net-mvc - ASP.NET MVC 路由不匹配

> ID：15512380
> 
> 赞同：1
> 
> 时间：2013-03-19T23:20:50.757
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我的路线注册如下：

```
 routes.MapRoute(
        "course_list",
        "course/list",
        new { controller = "course", action = "list" }
    );

    routes.MapRoute(
        "course_view",
        "course/view/{id}",
        new { controller = "course", action = "view", id = UrlParameter.Optional }
    );

    routes.MapRoute(
        name: "Default",
        url: "{controller}/{action}/{id}",
        defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
    ); 
```

我可以浏览到 /course/view/87 并匹配正确的路线。当我访问 /course/list 页面并单击该页面上指向 /course/view/87 的链接时，我得到一个 404: /course/list not found。任何想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T00:28:26.970

按钮元素被视为提交按钮（即：如果未设置默认类型属性，则 type="submit"）。因此，浏览器发起了一个不满足路由的发布请求，因为我所有的操作都是 get(s)。

谢谢大家的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T00:01:10.293

眼下

```
http://hspot.ca/course/list 
```

火柴

```
True    course/list controller = course, action = list 
```

但提供 404。（这与您的写作不同，您说此页面有效）。

当找不到可以处理路由及其参数的控制器/动作组合时，会返回这样的 404。确保你有一个

**CourseController**有一个没有参数的**List() 方法。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T00:47:09.350

我认为你有点过于复杂了。你真的根本不需要前两条路线，单独的默认路线就可以了。另外，我认为将您的操作命名为“视图”是一个坏主意，还有其他选择吗？这只是自找麻烦。

像这样构造你的项目：

```
Controllers/Course/CourseController.List.cs - Partial with List() method
Controllers/Course/CourseController.View.cs - Partial with View(string id) method

Views/Course/List.cshtml
Views/Course/View.cshtml 
```

您应该以更少的麻烦得到您正在寻找的东西。

祝你好运！！

# c# - Umbraco 升级引发 Creative Web Starter 错误

> ID：15512384
> 
> 赞同：1
> 
> 时间：2013-03-19T23:21:29.263
> 
> 标签：c#, .net, content-management-system, umbraco, upgrade

似乎 CWS 在 umbraco v4.7.2 之后并没有真正得到支持。我现在有一个问题，我们的大多数网站（50+）都使用 CWS 数据类型来保存内容。

基本上当我从 4.7.2 升级到 4.8 时，我在调试中得到了这个。我认为这将是一个艰难的旅程到版本 6。

异常是 System.Exception，消息是无法加载程序集“Creative.Website.Starter，Version=1.0.0.0，Culture=neutral，PublicKeyToken=null”中的一种或多种类型。抛出异常：System.TypeLoadException：来自程序集'Creative.Website.Starter，Version = 1.0.0.0，Culture = Neutral，PublicKeyToken = null'的'Creative.Website.Starter.ClientDependency.Html5StandardRenderer'类型中的方法'RenderJsDependencies'不在 umbraco.BusinessLogic.Utils.TypeFinder.FindClassesMarkedWithAttribute(Type 属性) 的 umbraco.BusinessLogic.Utils.TypeFinder.FindClassesMarkedWithAttribute(Assembly 程序集，类型属性) 有一个实现.. 在 umbraco.MacroEngines.DynamicNode.TryGetMember(GetMemberBinder binder, Object& result )

我认为这意味着不再支持 CWS，而且我很不走运。

问题： - 有没有办法将 CWS 字段内容迁移到普通文本数据类型，以便我可以卸载 CWS 并升级？

*   或者有没有人能够在 umbraco v4.7.2 + 版本中使用 CWS 包？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T14:16:26.767

可怕，但只需从 bin 文件夹中删除 Creative.Website.Starter.dll 即可修复错误，但我认为您对版本 6x 中的整个 CWS 问题不走运！

# php - cakephp 未按预期验证模型

> ID：15512386
> 
> 赞同：0
> 
> 时间：2013-03-19T23:21:43.910
> 
> 标签：php, cakephp

不知道我做错了什么，重新阅读文档几次。这是我唯一一次尝试从外部控制器验证模型。即使我使用无效的电子邮件地址，它也会像验证一样处理。只有recaptcha有效；任何帮助将不胜感激：

在控制器中：

```
if(!$this->request->is('get'))
{
    App::import('Vendor','recaptchalib');
    $this->set('captchaContent' , recaptcha_get_html($this->publicKey));
    $resp = recaptcha_check_answer( $this->privateKey, 
        $_SERVER['REMOTE_ADDR'],
        $this->request->data['recaptcha_challenge_field'],
        $this->request->data['recaptcha_response_field']);          
    if (!$resp->is_valid) {
        $this->set('recaptcha_error','You did not enter the words correctly. Please try again.');
    } elseif($this->Support->validates($this->request->data)) {
        // send the message
    }
} 
```

在模型中：

```
class Support extends AppModel
{
    public $name = 'Support';
    public $useTable = false;   
    public $validate = array(
        'email' => array('rule'=>'email','message'=>'You must enter a valid email')
        );
} 
```

在视图中：

```
echo $this->Form->create('Support');
echo $this->Form->input('name');
echo $this->Form->input('email');
echo $this->Form->input('message',array('type'=>'textarea'));
echo '<div style="margin-left: 150px; margin-bottom: 10px;">'.$captchaContent.'</div>';
if($recaptcha_error) echo '<p style="color:red; margin-left: 150px;">'.$recaptcha_error.'</p>';
echo $this->Form->end('Send Message'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T23:40:33.083

发现问题，需要放

```
$this->Support->set($this->request->data); 
```

在验证调用之前，显然不访问自己模型的控制器需要明确设置。不管怎么说，还是要谢谢你 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T23:25:38.093

在你的模型中试试这个：

```
public $validate = array(
    'email' => array(
        'rule'    => array('email', true),
        'message' => 'Please supply a valid email address.'
    )
); 
```

来自[http://book.cakephp.org/2.0/en/models/data-validation.html](http://book.cakephp.org/2.0/en/models/data-validation.html)

# java - 以“动态”大小在 ByteArray / ByteBuffer 中写入 DataOutputStream？

> ID：15512390
> 
> 赞同：0
> 
> 时间：2013-03-19T23:22:30.460
> 
> 标签：java, android, bytearray, bytebuffer, dataoutputstream

我问自己是否有一个很好的解决方案可以通过 TCP 接收数据并读取 DataInputStream 中的数据并将数据存储在“动态”大小的字节数组中。我考虑了一些解决方案，例如写入缓冲区，最后将其存储在一个与我收到的数据包一样大的创建数组中。

这里有一个例子：我通过 TCP 接收的数据（逐字节）是 n*13 字节大，数据包的结尾是 13 个零字节（13 个零字节是唯一的，不能在之前的数据中）。下一个数据包是 m*13 Byte + 13 Byte of zeros，依此类推。所以我想听流并将例如 n*13 字节存储在一个不带零的字节数组中（我以前不知道一个数据集的大小）。

你能告诉我如何做到苗条吗？

提前致谢！

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T01:34:27.953

我会将数据直接读取到直接的 ByteBuffer 中。您也不需要 DataInputStream 。我会让 ByteBuffer 比需要的大，例如 1 MB 或 10 MB，并使用未使用的直接缓冲区（如未使用的本机内存）仅使用虚拟内存而不使用真实内存的事实。我会确保尽可能多地重复使用这个缓冲区，最好是在应用程序的生命周期内。

在 64 位环境中，您可以使缓冲区非常大。例如 1 GB 没有太大影响。

如果您想最大程度地减少内存消耗，我会在您收到数据时对其进行处理。这样您就不必先存储它。听起来最小大小是 13 字节，并且可以使缓冲区大小合理，例如 512 字节或 2 KB。

# php - 保留 HTML ( , ) 在 php 回显中

> ID：15512391
> 
> 赞同：0
> 
> 时间：2013-03-19T23:22:36.460
> 
> 标签：php, html, echo, kml, preserve

我怎样才能做出回声，保留 html 信息，并从查询中获得一段时间？我想用 mysql 数据生成一个 kml 文件。这是我所做的：

```
echo '<xml version=\"1.0\" encoding=\"UTF-8\"></br>';
echo '<kml xmlns=\"http://www.opengis.net/kml/2.2\" xmlns:gx=\"http://www.google.com/kml/ext/2.2\" xmlns:kml=\"http://www.opengis.net/kml/2.2\" xmlns:atom=\"http://www.w3.org/2005/Atom\"></br>';
echo '<Document></br>';

echo '<Placemark id='.$row['id'].' ></br>';
echo ' <name>'.$row['icao'].'</name></br>';
echo '  <description>'.$row['name'].'</description></br>';
echo '   <Point></br>';
echo '    <coordinates>'.$row['lat'].','.$row['lon'].'</coordinates></br>';
echo '   </Point></br>';
echo '</Placemark></br>';

echo '</Document></br>';
echo '</kml>'; 
```

结果应该是这样的：

```
<xml version="1.0" encoding="UTF-8">
<kml xmlns="http://www.opengis.net/kml/2.2" xmlns:gx="http://www.google.com/kml/ext/2.2" xmlns:kml="http://www.opengis.net/kml/2.2" xmlns:atom="http://www.w3.org/2005/Atom">
<Document>
<Placemark id='id'>
  <name>'icao'</name>
    <description>'name'</description>
      <Point>
       <coordinates>'lat','lon'</coordinates>
      </Point>
</Placemark>
</Document>
</kml> 
```

但我明白了：

```
id icao name lat lon id icao name lat lon id icao name lat lon 
```

那么，如何`(<Placemark>, <Document>, <kml>, ...)`在 php echo 中保留 kml 标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:26:20.460

您可以使用 htmlentities(); 在 php 中，像这样：

```
echo htmlentities($data); 
```

[http://php.net/manual/es/function.htmlentities.php](http://php.net/manual/es/function.htmlentities.php)

# c# - 如何将部分图像插入图片框？

> ID：15512392
> 
> 赞同：2
> 
> 时间：2013-03-19T23:22:36.787
> 
> 标签：c#, image, location, picturebox, partial

我不确定是否可以将图像的一部分插入图片框，但我想创建一个 500*500 像素大小的图像，然后通过设置将其部分用作可连接的 50*50 小块图片框内图像的位置...

通过使用图形是否有类似的可能？我不是很熟悉...（我说的是C#表单应用...）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T21:34:42.747

经过一段时间的搜索和几次个人尝试，我找到了解决方案，这不是我自己的，但遗憾的是我忘记了我从哪里得到的：

```
 private static Image cropImage(Image img, Rectangle cropArea)
   {
       Bitmap bmpImage = new Bitmap(img);
       Bitmap bmpCrop = bmpImage.Clone(cropArea,
       bmpImage.PixelFormat);
       return (Image)(bmpCrop);
   } 
```

这将创建裁剪图像，您现在可以在代码中使用它。样本：

```
 Picturebox P = new Picturebox;
   P.BackgroundImage = cropImage(ImageThatWillBeCropped, new Rectangle(0,0,50,50)); 
```

如果有人觉得这很有用并且需要对矩形进行解释，请随时询问:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-14T16:39:53.147

谢谢你的好回答。最好是 p.Image：

```
P.Image = cropImage(ImageThatBeCropped, new Rectangle(0, 0, 50,50)); 
```

以实际大小查看图像。

# python - 如何阻止 QThread 关闭？

> ID：15512393
> 
> 赞同：2
> 
> 时间：2013-03-19T23:22:39.650
> 
> 标签：python, qt, pyside

我正在为 Minecraft 编写一个启动器（请参阅此处的完整代码：http: [//pastie.org/6633420](http://pastie.org/6633420)），我知道这是一个游戏，但编程仍然很有趣。

目前，我在使用 QThread 进行线程处理时遇到问题，因为所有线程似乎都提前关闭了。我收到错误：`QThread: Destroyed while thread is still running`。除了做我之前在代码中所做的事情之外，还有什么方法可以解决这个问题

```
for i in range(1,50):
    QThread.msleep(200)
    QCoreApplication.processEvents() 
```

因为我确信这是非常糟糕的做法并且效果不佳，因为它会导致应用程序在某些时候没有响应。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T00:39:04.093

这实际上是 Qt 的 Python 绑定中的一种错误。`QThread`在函数内部实例化的 s （`MainWidget.update_software`在您的情况下是 ）在函数返回时被垃圾收集，这会导致执行提前结束并带有`QThread: Destroyed while thread is still running`消息。

要解决这个问题，有两种选择：

1.  调用`.wait()`函数内部的线程，以便线程可以在函数返回之前完成处理。然而，这将阻塞主线程，这可能不是你想要的。
2.  使所有线程实例成为实例变量或全局变量，以便线程的生命周期分别持续包含的实例或程序的持续时间。

# jquery-mobile - 没有ajax的jQuery Mobile锚链接不加载

> ID：15512395
> 
> 赞同：2
> 
> 时间：2013-03-19T23:22:41.980
> 
> 标签：jquery-mobile, hyperlink, anchor

我完全禁用了 jQuery Mobile ajax 导航，如下所示：

```
 $(document).bind("mobileinit", function () {
        $.mobile.ajaxEnabled = false;
        $.mobile.linkBindingEnabled = false;
        $.mobile.hashListeningEnabled = false;
        $.mobile.pushStateEnabled = false;
    }); 
```

这工作得很好，除了锚/散列链接不像在 JQM 之外通常那样工作。

当页面加载时，您位于页面顶部（如果加载速度足够慢，您会在锚点处看到加载，然后跳转到顶部）。无论哪种方式，您最终都会出现在页面顶部，而不是应有的锚链接。有什么好的解决方法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T17:04:18.223

此修复只是对此答案（[https://stackoverflow.com/a/14286613/1462775](https://stackoverflow.com/a/14286613/1462775)）的代码稍作修改，因此它应该适用于所有锚链接，而不仅仅是特定链接。我将此脚本放在`<head>`元素的末尾。

```
$(document).bind('pageshow',function(e) {
    var $anchor;
    $anchor = $(location.hash);
    if ($anchor) {
        // Get y pos of anchor element.
        var pos = $anchor.offset().top;

        // Don't use silentScroll() as it interferes with the automatic 
        // silentScroll(0) call done by JQM on page load. Instead, register
        // a one-shot 'silentscroll' handler that performs a plain
        // window.scrollTo() afterward.
        $(document).bind('silentscroll',function(e,data) {
            $(this).unbind(e);
            window.scrollTo(0, pos);
        });
    }
}); 
```

# ruby-on-rails - Solaris 10 中的 libv8 安装（SPARC 架构，gcc 4.6.3）

> ID：15512399
> 
> 赞同：2
> 
> 时间：2013-03-19T23:23:00.733
> 
> 标签：ruby-on-rails, node.js, solaris, therubyracer

只是想知道是否有人在 Solaris 10（SPARC 架构）中成功安装了 libv8。我正在尝试将 JS 运行时（therubyracer）安装到 Solaris 盒子中，但多次失败。我什至尝试了 therubyracer 0.8.2（不需要 libv8），或者从源代码编译 nodejs，但无济于事。看来 Solaris 不是很流行，相关文档也很稀缺。我已经在这个问题上停留了 2 天，所以任何提示将不胜感激。我的项目绝对需要这个 JS 运行时。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T11:09:59.473

坏消息，SPARC 不支持 v8。

```
 $ git clone git@github.com:v8/v8.git
    Cloning into v8...
    remote: Counting objects: 102181, done.
    remote: Compressing objects: 100% (11906/11906), done.
    remote: Total 102181 (delta 90505), reused 101540 (delta 89942)
    Receiving objects: 100% (102181/102181), 50.92 MiB | 274 KiB/s, done.
    Resolving deltas: 100% (90505/90505), done.
    $ grep -i sparc v8/src/*
    v8/src/platform-solaris.cc:#ifdef __sparc
    v8/src/platform-solaris.cc:# error "V8 does not support the SPARC CPU architecture."
    $ 
```

我也一直在这个循环中。选项：

1.  使用不需要 JS 运行时的旧版本 rails（至少 <3.2）。

2.  关闭所有预编译和缩小功能（对性能有明显影响）。

3.  迁移到非 SPARC 平台。

我已经为一个小型、低流量的应用程序完成了（2）（如果你愿意，可以发布配置）。这适用于我的用例，但如果在原生 Rails 功能之外对您的 JS 运行时支持是硬性要求，那么显然 (1) 和 (2) 都无济于事。

我计划尽快进行（3）。在这一点上，对 Solaris 的支持（尤其是对 SPARC 上的 Solaris 的支持）不太可能得到改善。

# android - Highcharts 3 支持 Android 2.x

> ID：15512401
> 
> 赞同：1
> 
> 时间：2013-03-19T23:23:02.367
> 
> 标签：android, highcharts

有没有人尝试在运行 Android 2.x（特别是 2.3）的手机上使用最新的[Highcharts 3.0 beta （2013 年 3 月）？](http://www.highcharts.com/component/content/article/2-news/53-highcharts-3-0-beta-released)当我尝试从该博客文章中呈现任何演示图表或在 WebView 中使用该库时，我什么也得不到。似乎在 Android 4.x 中运行良好。我将库更改为 HC 2.3.5，现在可以看到图表。这是因为canvas库不支持HC 3吗？来龙去脉是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:25:16.423

它看起来像一个错误，所以我在这里向我们的开发人员报告了它：[https ://github.com/highslide-software/highcharts.com/issues/1612](https://github.com/highslide-software/highcharts.com/issues/1612)

# django - 捕获模型中所有已更改的字段

> ID：15512402
> 
> 赞同：3
> 
> 时间：2013-03-19T23:23:02.650
> 
> 标签：django, django-models, django-reversion

我要做的是获取对象更改后可能更改的所有字段的记录。我知道有很多方法可以判断一个对象是否已更改以及其他一些 django 包（如[django-revisions](http://stdbrouw.github.com/django-revisions/)、[django-reversion](https://github.com/etianen/django-reversion)和[django-simple-history](https://bitbucket.org/q/django-simple-history/) ） ，但我希望能够有一份报告显示所有领域发生了变化，而不仅仅是一个。我还显示了在更改之前该字段是什么，以便我可以对对象进行完整的审核。

[我正在考虑使用django-jsonfield](https://pypi.python.org/pypi/django-jsonfield/0.9.2)添加一个 json 字段，但这样做感觉有点不对劲。好像这是一个黑客或肮脏的工作。有没有更传统或更简单的方法来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T23:44:46.067

你可以看看[django-dirtyfields](https://github.com/smn/django-dirtyfields)。更新对象时，您可以获得所有脏字段的列表并生成您需要的报告。它不会自动执行此操作，但它会为您提供已更改的字段。

# unit-testing - 单元测试 Maven Mojo - 组件和参数为空

> ID：15512404
> 
> 赞同：5
> 
> 时间：2013-03-19T23:23:03.067
> 
> 标签：unit-testing, maven, mojo

根据文档和邮件线程，我看到了 3 种将 maven 项目注入我的 mojo 的方法：

```
/**
  * Project instance
  * 
  * @parameter default-value="${project}"
  * @required
  * @readonly
  */
private MavenProject project;

@Component
private MavenProject project;

@Parameter(  expression = "${project}" )    
private MavenProject project; 
```

但无论我选择其中哪一个，当我根据我在 Maven 文档中找到的示例运行单元测试时，项目始终为空。

```
public void testMojoGoal() throws Exception {
    File testPom = new File(getBasedir(),
            "src/test/resources/unit/basic-test/sample-sh-project-config.xml");

    ShunitResourcesMojo mojo = (ShunitResourcesMojo) lookupMojo("prepare",testPom);

    assertNotNull(mojo);

    mojo.execute();     
} 
```

mojo 执行包含（并失败）

```
Validate.notNull(project); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-11T14:44:07.857

我只是在开发自己的插件并遇到了同样的问题。我找不到关于它的文档，但我查看了 maven-ant-plugin ( [https://svn.apache.org/repos/asf/maven/plugins/trunk/maven-ant-plugin](https://svn.apache.org/repos/asf/maven/plugins/trunk/maven-ant-plugin) ) 看看如何他们做到了。

我假设这是内置的测试工具行为，但是您必须在测试 pom.xml 中添加一个“项目”参数，以将值设置为 MavenProjectStub 的子类，例如在“ant-test”测试中：

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-ant-plugin</artifactId>
    <configuration>
      <project implementation="org.apache.maven.plugin.ant.stubs.AntTestMavenProjectStub"/>
      <settings implementation="org.apache.maven.plugin.ant.stubs.SettingsStub"/>
      <localRepository>${localRepository}</localRepository>
    </configuration>
  </plugin> 
```

我希望你已经有了答案，只是发布给那些关注的人。

# solr - Solr：查询 numfound > 0，使用查询，否则使用另一个查询？

> ID：15512405
> 
> 赞同：1
> 
> 时间：2013-03-19T23:23:05.957
> 
> 标签：solr

有没有办法把它放到一个 solr 查询中？执行一个查询，如果 numfound >0，则返回该查询的结果。否则执行不同的查询并返回这些结果。

通过给第一个查询赋予更高的权重，我一直在做一些与此类似的事情：q=firstQuery^5 || 第二查询

但宁愿更喜欢我的问题中详述的逻辑。无论如何要这样做？

谢谢！

# epub - 在 ePub 中指定 iBooks 的最低版本

> ID：15512409
> 
> 赞同：1
> 
> 时间：2013-03-19T23:23:36.390
> 
> 标签：epub, ibooks, ibook-author

我正在开发一个需要 iBooks 3 的全屏固定布局 epub。我注意到其他书籍在启动时会显示警报，要求用户升级早期版本的 iBooks。我找不到任何关于如何实现它的信息，以及它是 iBooks 处理的东西还是某种自定义 Javascript 代码。

从 iBook Author 导出的 epub 中包含的以下元标记看起来很有希望，但在侧载测试中不起作用。当然，我只是将这些放入没有书籍创建的 epub 的 .opf 中，因此 iBook Author 正在做的其他事情可能会使这项工作发挥作用。

```
<meta name="ibooks:requiredVersion" content="3"/>
<meta name="ibooks:currentVersion" content="3"/>
<meta property="ibooks:version">3.0</meta> 
```

我考虑编写自定义代码，但 Javascript 警报似乎在 iBooks 中不起作用。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-25T04:19:11.053

Javascript 警报在 iBooks 中*确实*有效，但我不确定您如何将它们合并到 iBooks Author 中。

您部分中的脚本元素`<HEAD>`将生成警报：

```
<script language="Javascript">
<!--
alert ("Alert Message")
//-->
</script> 
```

在最坏的情况下，您可能可以手动编辑 iBA 生成的 xhtml 文件来插入它。

# jsf-2 - 无法在 primefaces 中生成 selectonemenu 项

> ID：15512413
> 
> 赞同：0
> 
> 时间：2013-03-19T23:24:06.840
> 
> 标签：jsf-2, primefaces, prettyfaces

你好，我是stackoverflow的新手我正在使用primefaces 3.5我的问题是，是否有必要在静态块或构造函数中设置selectonemenu项目（Java util的映射）..比如：

滑块.xhtml

```
<h:outputLink value="circle">
<h:outputText value="click Circle!"/>
</h:outputLink> 
```

漂亮的配置.xml

```
<url-mapping id="circle"> 
  <pattern value="/circle" /> 
  <view-id value="xhtmls/circle.xhtml" />
  <action>#{circleAction.action}</action>
 </url-mapping> 
```

CircleAction.java

```
public class CircleAction {
private String favCoffee2;
private Map<String,Object> coffee2Value;

//setter n getter

public Map<String,Object> getFavCoffee2Value() {
return coffee2Value;
}

public String action(){
coffee2Value = new LinkedHashMap<String,Object>();
coffee2Value.put("mohsin - Cream Latte", "Cream Latte"); //label, value
coffee2Value.put("mohsin - Extreme Mocha", "Extreme Mocha");
coffee2Value.put("mogsin - Buena Vista", "Buena Vista");

return "pretty:addcircle";
}           
} 
```

圆圈.xhtml

```
<p:selectOneMenu value="#{circleAction.favCoffee2}">
<f:selectItems value="#{circleAction.favCoffee2Value}" />
</p:selectOneMenu> 
```

selectOneMenu 在这种情况下是空白的，但是当我从操作方法中删除下面的代码并将其放在静态块中时，selectOneMenu 将生成 java.util.map 中的所有项目；

```
coffee2Value = new LinkedHashMap<String,Object>();
coffee2Value.put("mohsin - Cream Latte", "Cream Latte"); //label, value
coffee2Value.put("mohsin - Extreme Mocha", "Extreme Mocha");
coffee2Value.put("mogsin - Buena Vista", "Buena Vista"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T06:02:10.040

问题是当您访问时`/circle`，PrettyFaces 将执行您的操作方法，并在您返回时`pretty:addcircle`将您重定向到新页面。因此，您的请求范围 bean（尤其是地图）的所有值都将丢失。只需`null`从该方法返回即可。在这种情况下，PrettyFaces 只会渲染`xhtmls/circle.xhtml`，这可能是您想要的。

# opencv - 使用 OpenCV 进行零件识别/分类

> ID：15512417
> 
> 赞同：7
> 
> 时间：2013-03-19T23:24:21.587
> 
> 标签：opencv, image-processing, computer-vision, emgucv

我刚刚开始探索 OpenCV 和它的 EmguCV .NET 包装器，需要了解其功能大图的人的一些总体指导，也许那些已经解决了与我需要完成的任务类似的任务的人。

我将有一系列静态照片，在每张图像中都会出现一个物体或什么都没有。这些物体是金属硬件（螺栓），将侧放，长度平行于图像的顶部/底部（即，图片是从上方拍摄的）。如果有一个对象，它将是大约 100 种不同类型的螺栓中的一种，其中一些具有非常相似但不相同的特征和尺寸。例如，它们的轮廓大部分都是矩形，但长度和宽度（直径）会有所不同，并且头部可以是六边形或圆形（在轮廓中分别被视为矩形或圆形的小段） ) 或将有用于埋头孔应用的锥形头。零件类型的插图 I'

[![插图](../Images/33b3ff659cae30c0522413c142463299.png)](https://i.stack.imgur.com/yilQy.gif)
[（来源：[donsnotes.com](http://donsnotes.com/home_garden/images/bolts-type.gif)）]

我需要对它们进行分类，以便区分所有尺寸和类型。1-3/8" 螺栓应归类为与 1-1/2" 螺栓不同，即使它们具有相同的直径和相同的头部类型。尺寸之间的最小长度差异为 1/8 英寸，而不是标准的 1/16 英寸。

如果重要的话，我可以很好地控制以下内容：

*   照明（但背光不实用）
*   背景的外观（可能对背景减法有用？）
*   从相机到物体的距离（相同的物体在图像中总是显示为相同的大小）
*   通常，螺栓的位置 - 它将水平放置在其侧面，与图像帧的顶部/底部边缘平行。我无法控制它的头部在图像中是向左还是向右。

不幸的是，我找不到任何直接解决我需要做的事情的在线论文或文章——但有很多可以说明更简单的任务，比如寻找彩色球或寻找矩形。我找不到任何关于识别和分类大量不同但相似的形状的东西。我确实有两本推荐的 OpenCV 书籍，虽然它们很棒，但它们似乎并没有解决这个问题。

我在示例图像上发现了相当干净的 Canny 边缘，但由于照明，零件内部有很多噪点。这使得寻找干净的霍夫线段有点参差不齐。

我不确定是否应该尝试使用通过测量 Canny 边缘计算的绝对尺寸来减少可能匹配的列表 - 然后使用更强大的东西，如级联分类器......？要不然是啥。

我真的只是在寻找某人对一般策略或正确方向的看法......

谁能给我一些东西让我开始尝试？我真的很茫然。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T09:42:14.510

根据我的经验，我建议你以下。你比我们大多数人都知道如何手动分类，对吧？所以想一想当你分类时你的大脑会发生什么。假设，您从顶视图看到一个圆形，那么现在您的问题变成了如何识别该形状？在这里发布这样的问题，对其他人来说会容易得多。特征提取只不过是当你看到那个物体时大脑的想法。

对于这个问题，我建议您首先保持深色背景，以便有必要对该图像进行二值化。然后，如果它是顶视图，您可以看到圆形、六边形等。然后只得到边缘。然后得到一个最小边界圆并得到它的直径。找到最小边界圆的算法和代码可以在[这里](http://www.mathworks.com/matlabcentral/fileexchange/34767-a-suite-of-minimal-bounding-objects)获得。

就形状而言，我建议您对该二进制图像进行渐变，然后仅在边缘点（您在顶视图中获得）计算该渐变的角度。该梯度的直方图将是您的特征向量。查看不同形状的条形图。如果你的大脑可以区分，那么你可以考虑使用哪个分类器。我现在不想对此发表评论，因为它取决于很多事情，例如特征的分布、它们的可分离性以及最重要的速度要求。但是现在不用担心分类器。

现在，让我们尝试解决高度问题。我假设您可以获得前视图，然后只需计算边界框（您可以从`regionprops`MATLAB 中的函数中获得）。

请注意，我只是在想象和谈论所有这些事情。您必须先按照我在第一段中所说的去做，然后看看答案的其他部分是否对您有意义。我假设您具有一定的数学背景来理解此答案中的某些术语。如果没有，请不要犹豫，问。

PS +1 提出了一个好问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T22:19:07.413

您的问题是典型的模式识别任务。在您的场景中，我将使用形状描述符，然后将其用于识别。论文[“Shape Matching and Object Recognition using Shape contexts”中描述了一种有趣的方法。](http://www.cs.berkeley.edu/~malik/papers/BMP-shape.pdf)

作者之一 Jitendra Malik 是我几个月前参加的一个有趣的[coursera计算机视觉课程的老师。](https://www.coursera.org/)

# jquery - 在 JQuery 中，“连接”一个对象是什么意思？

> ID：15512427
> 
> 赞同：0
> 
> 时间：2013-03-19T23:25:01.437
> 
> 标签：jquery

我的任务是在网页上“连接”一个输入框和一个提交按钮，以允许用户输入他们自己的消息。我是编程新手，很好奇 JQuery 中的“接线”部分是什么意思。任何建议或示例都会有所帮助。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T23:29:50.437

这意味着您需要添加所需的 javascript/jquery 以将输入与输出（消息）“连接”起来。它应该看起来像这样：

```
$(BUTTON_SELECTOR).on('click', function() {
       var input = $(INPUT_SELECTOR).val();        
       alert(input);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T23:35:55.970

它基本上意味着将诸如单击事件处理程序之类的东西附加到DOM中的元素

```
<button class="btn">Button</button>

<script>
    $('.btn').click(function(){
         console.log('clicked');
    });
</script> 
```

# java - 旧应用程序的 Java 内存泄漏

> ID：15512429
> 
> 赞同：0
> 
> 时间：2013-03-19T23:25:13.407
> 
> 标签：java, memory-leaks, out-of-memory

我正在使用的旧 Java 应用程序遇到内存不足异常，是否有任何工具可以帮助我找出应用程序的哪一部分导致内存不足异常？

大多数工具似乎都是为基于 Web 的 Java 应用程序构建的。

我的应用程序不是基于 Web 的应用程序，因此无法创建 WAR 文件和 EAR 文件，然后在它们上运行用于内存泄漏的工具。

有人知道此类应用程序的工具吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T10:28:35.333

JDK 中包含的一些基本工具：

*   jps -l ：获取 Java 进程的 PID。然后，
*   jmap -histo:live ：按类获取数量和内存使用情况，这样您就可以发现哪个更可能导致您的内存泄漏

您还可以使用嵌入在 JVM 中的分析器 HPROF。非常易于使用，无需更改代码，只需几个命令行选项。请参阅使用[说明文档](http://docs.oracle.com/javase/7/docs/technotes/samples/hprof.html)。您可以“手动”阅读 hprof 的日志或使用诸如 HPJmeter（不是 Apache JMeter）之类的工具来绘制漂亮的图表等。任何商业分析器也可以处理 HPROF 的输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T23:29:13.643

如果可以修改 JVM 启动参数，让它在 OutOfMemory 上转储一个堆文件，并使用 Eclipse 的[内存分析工具](http://www.eclipse.org/mat/)对其进行分析。HotSpot JVM 的参数是`-XX:-HeapDumpOnOutOfMemoryError`. 要指定此文件的位置，请使用`-XX:HeapDumpPath=<path_to_save>`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T10:21:33.960

您可以尝试的另一种工具是[Plumbr](http://plumbr.eu)。它旨在发现任何基于 Java 的应用程序中的内存泄漏。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-20T10:24:31.287

[yourkit](http://www.yourkit.com/)是最好的！试试看！甚至还提供了简单的教程。但是您必须购买该工具

# websocket - 如何使用多个服务器实例运行 WebSockets？

> ID：15512432
> 
> 赞同：15
> 
> 时间：2013-03-19T23:25:18.800
> 
> 标签：websocket

运行多个 HTTP 服务器实例以进行扩展很有用。

但是，这似乎不适用于 WebSockets，因为每个服务器实例都有自己的客户端连接集。

如果它们都需要共享一组公共连接，您如何在多个服务器实例上运行 WebSocket？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-24T11:46:20.223

我一直在寻找同样的东西来开发准备扩展的 websocket 应用程序，显然没有太多关于这个的文章讨论。

**案例 1推荐的方法是像**[Heroku](https://devcenter.heroku.com/articles/play-java-websockets-advanced)建议 的那样使用 Redis 缓存，使用 Service Bus 或像[SignalR 中的 Scaleout 中](http://www.asp.net/signalr/overview/signalr-20/performance-and-scaling/scaleout-in-signalr)提到的 3 种方法一样存储到 db中。但是有一个问题，必须有**一点延迟**，因为为了让第二个实例知道，调度程序或后台工作程序/服务应该连续运行以检测**缓存/队列/数据库**中的新更改。

**案例 2** 就我而言，我想要几乎**实时****的高频**。所以它应该在实例之间有一个持久连接。然而挑战在于，我们不能在无状态 Web 服务器之间做到这一点。

 **因此，我们仍然需要中间长时间运行的后台/worker 服务，并从代码中实现我们自己的 net/socket/TCP 并维护连接池，但这并不是一件容易的事。

我正在考虑**在服务器上使用 Websocket 客户端**（用于此服务），因此与客户端和实例之间通信的模式几乎相同。见：[1](https://stackoverflow.com/questions/4985629/html5-websockets-client-for-net) [2](https://stackoverflow.com/questions/5509905/websockets-between-2-servers)。剩下的一件事是将实例 IP/URL 更新到每个实例上/下的分布式缓存或数据库中。

最后一个选择是探索新的[**WebRTC**](http://www.webrtc.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-10T05:41:38.690

我还没有尝试过，但我正在考虑让连接变得粘稠可能会解决问题。您可以在负载均衡器中设置此设置。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-11-24T18:17:05.353

到目前为止，我发现的最佳解决方案是[http://pusher.com/](http://pusher.com/)。

易于设置。很棒的文档。**

# mysql - 在两个表上强制在 mysql 中使用 UNIQUE

> ID：15512440
> 
> 赞同：1
> 
> 时间：2013-03-19T23:26:19.663
> 
> 标签：mysql, sql

我有一个包含有关几个项目的信息的表：

**项目** `(id (PK), name, type)`

然后我有另一个名为“user_and_items”的表，它是多对多关系。item_id 是链接到上表的外键。

**users_and_items** `(user_id (PK FK), item_id (PK FK))`

每个物品都有特定的类型（例如胸甲、头盔、剑）。应该只允许用户拥有每种类型的一个项目。`user_id`有没有办法对不同表中的和属性强制执行某种 UNIQUE 属性，`type`这样用户就不能拥有相同类型的两个项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T23:37:40.587

将`type`列添加到`users_and_items`并`(user_id,type)`改为主（或唯一）键。

# extjs - EXTJS 图表未在 x 轴上显示所有标记名称

> ID：15512442
> 
> 赞同：1
> 
> 时间：2013-03-19T23:26:20.943
> 
> 标签：extjs, charts, extjs4, axis, labels

我正在使用 Ext JS 4.1.3 开发一个应用程序。应用程序处理数据并根据数据显示图表。

问题是：
如果图表上有超过 80-90 个条目（在 x 轴上），则省略了一些标记名称。因此，它显示的不是标记名称，而是部分空的位置。虽然还有很大的空间。

**这是一个屏幕截图：**

![在此处输入图像描述](../Images/74f4c7408c57634c4399dee3742f1c40.png)

问题是：

*   我已经把标记的字体变小了。也许有一种方法可以减少标记之间的填充？
*   如何强制 ExtJs 图表显示所有条目？我可以更改图表（或 x 轴）的设置以显示所有标记名称（无论条目数如何）？
*   这个问题还有其他解决方案吗？

谢谢！

**UPD1。** 这在某种程度上与 css 类“x-hide-visibility”和 hideMode 有关。

*   如何禁用标签的 hideMode？

**UPD2。** 我找到了以下解决方案。但这使图表变慢（不是关键，但是..）。也许有人知道其他解决方案？必须有一种方法可以提前关闭选项（'hideMode'）。

```
for (var i = 0; i< chart.axes.items[0].labelGroup.items.length; i++){
    chart.axes.items[0].labelGroup.items[i].el.removeCls(' x-hide-visibility');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:30:17.867

我遇到了同样的问题，并通过将这行 css 添加到样式表来解决隐藏标签问题。

svg text.x-hide-visibility {可见性：继承！重要；}

如果系列或轴上有一些配置选项来控制这种行为，那就太好了。希望这对你有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-10T19:04:38.197

我有同样的问题。

请添加以下行：

chrChart1.ChartAreas(0).AxisX.Interval = 1

# javascript - 尝试让示例 Node.js 应用程序正常工作

> ID：15512447
> 
> 赞同：1
> 
> 时间：2013-03-19T23:27:00.037
> 
> 标签：javascript, node.js, express

我正在尝试运行一个使用 node.js、express 和 socket.io 的基本聊天应用程序。我已经成功地让所有东西都运行到我在服务器端或客户端没有出现任何错误的地方。但是，该应用程序不起作用。
我应该能够打开两个浏览器窗口并与自己聊天。我在文本框中键入以向自己发送聊天消息，但没有收到任何消息。我很确定也没有发送任何内容。使用 FireBug，我看不到任何通过网络发送的新请求。但是，使用 Firebug 我还看到所有请求的包含文件都正确地提供给浏览器。只有三个 - index.html、socket.io.js 和 jquery.min.js。

这是我正在使用的教程的链接：http: [//philmunt.com/post/15643013618/node-js-socket-io-chat-application-tutorial](http://philmunt.com/post/15643013618/node-js-socket-io-chat-application-tutorial)

使用 server.js 文件，我对其进行了一些修改以使其正常工作。主要问题是我的浏览器没有接收到 socket.io.js，所以我添加了一个路径以允许 server.js 知道它在哪里。像这样： app.get('/sio/socket.io.js', function (req, res) {........这可能是我的问题吗？

这是服务器代码 - server.js：

```
var express = require('express'), app = express(), http = require('http'), server = http.createServer(app), io = require('socket.io').listen(server);

// listen for new web clients:
server.listen(8080);

app.get('/', function (req, res) {
res.sendfile(__dirname + '/index.html');
});         

app.get('/sio/socket.io.js', function (req, res) {
res.sendfile('/root/nodejs/node-v0.10.0/node_modules/socket.io/lib/socket.io.js');
});     

io.sockets.on('connection', function (socket) { socket.on('sendMessage', function (data) { socket.broadcast.emit('message', data); socket.emit('message', { text: '<strong>'+data.text+'</strong>' });   
 });   
 }); 
```

这是 index.html 文件：

```
<html> 
  <body>
    <script src="/sio/socket.io.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script>
      $(document).ready(function () {
        var socket = io.connect('http://localhost');
        socket.on('message', function (data) {
          $('#chat').append(data.text + '<br />');
        });

        $('#send').click(function () {
          socket.emit('sendMessage', { text: $('#text').val() });
          $('text').val('');
        });

      });
    </script>

    <div id="chat" style="width: 500px; height: 300px; border: 1px solid black">

    </div>    

    <input type="text" name="text" id="text">
    <input type="button" name="send" id="send" value="send">
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T00:04:41.377

删除 app.get(socketstuff) 部分，您不需要它，因为 js 文件可供您使用

```
<script src="/socket.io/socket.io.js"></script> 
```

并将您的套接字变量更改为：

```
var socket = io.connect(); 
```

# php - PHP regex 和 preg_replace 问题

> ID：15512448
> 
> 赞同：1
> 
> 时间：2013-03-19T23:27:00.567
> 
> 标签：php, regex

我正在查看其他人的旧代码并且在理解它时遇到了一些麻烦。

他有：

```
explode(' ', strtolower(preg_replace('/[^a-z0-9-]+/i', ' ', preg_replace('/\&#?[a-z0-9]{2,4}\;/', ' ', preg_replace('/<[^>]+>/', ' ', $texts))))); 
```

我认为第一个正则表达式排除`a-z`and `0-9`，但我不确定第二个正则表达式是做什么的。第三个匹配除了里面的任何`'< >'`东西`'>'`

结果将输出一个包含`$texts`变量中每个单词的数组，但是，我只是不知道代码是如何产生这个的。我确实了解`preg_replace`其他功能的作用，只是不知道该过程是如何工作的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T23:30:57.590

该表达式`/[^a-z0-9-]+/i`将匹配（并随后用空格替换）*除*az 和 0-9 之外的任何字符。`^`in [`^...]`表示*否定*其中包含的字符集。

*   `[^a-z0-9]`匹配任何*非*字母数字字符
*   `+`指上述一项或多项
*   `/i`使其不区分大小写匹配

表达式`/\&#?[a-z0-9]{2,4}\;/`匹配 a`&`后接可选`#`, 后接两到四个字母和数字，以 a 结尾`;`这将[匹配 HTML 实体，如](http://www.w3.org/TR/html4/sgml/entities.html) `&nbsp;`or`&#39;`

*   `&#?`匹配`&`或`&#`匹配`?`前面的`#`可选 The`&`实际上不需要转义。
*   `[a-z0-9]{2,4}`匹配两到四个字母数字字符
*   `;`是文字分号。它实际上不需要转义。

部分正如您所怀疑的那样，最后一个将替换任何标签，如`<tagname>`or`<tagname attr='value'>`或`</tagname>`用空白空间。请注意，它匹配*整个*标签，而不仅仅是`<>`.

*   `<`是文字字符
*   `[^>]+`是每个字符直到但不包括下一个`>`
*   `>`是文字字符

我真的建议将其重写为三个单独的调用`preg_replace()`而不是嵌套它们。

```
// Strips tags.  
// Would be better done with strip_tags()!!
$texts = preg_replace('/<[^>]+>/', ' ', $texts);
// Removes HTML entities
$texts = preg_replace('/&#?[a-z0-9]{2,4};/', ' ', $texts);
// Removes remainin non-alphanumerics
$texts = preg_replace('/[^a-z0-9-]+/i', ' ', $texts);
$array = explode(' ', $texts); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T23:34:10.073

这段代码看起来...

1.  去除 HTML/XML 标记（< 和 > 之间的任何内容）
2.  然后任何以 & 或 开头且长度为 2-4 个字符（字母数字）的内容
3.  然后去掉任何不是字母数字或破折号的东西

*按嵌套处理顺序*

```
/<[^>]+>/

Match the character “&lt;” literally «<»
Match any character that is NOT a “&gt;” «[^>]+»
   Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
Match the character “&gt;” literally «>»

/\&#?[a-z0-9]{2,4}\;/

Match the character “&amp;” literally «\&»
Match the character “#” literally «#?»
   Between zero and one times, as many times as possible, giving back as needed (greedy) «?»
Match a single character present in the list below «[a-z0-9]{2,4}»
   Between 2 and 4 times, as many times as possible, giving back as needed (greedy) «{2,4}»
   A character in the range between “a” and “z” «a-z»
   A character in the range between “0” and “9” «0-9»
Match the character “;” literally «\;»

/[^a-z0-9-]+/i

Options: case insensitive

Match a single character NOT present in the list below «[^a-z0-9-]+»
   Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
   A character in the range between “a” and “z” «a-z»
   A character in the range between “0” and “9” «0-9»
   The character “-” «-» 
```

# c# - SqlBulkCopy 到使用类型表的存储过程

> ID：15512449
> 
> 赞同：1
> 
> 时间：2013-03-19T23:27:02.633
> 
> 标签：c#, sql

我想使用 bulkCopy 存储过程，然后使用合并 upsert。

这是我的存储过程

```
@bulkLdapGroup  [TEMP_LDAP_GROUP] readonly

AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

merge into [SECURITY_CUBE].[dbo].[LDAP_GROUP] as Target
using @bulkLdapGroup as Source
on Target.[GROUP_NAME]=Source.[GROUP_NAME]
when matched then 
update set Target.[DESCRIPTION]=Source.[DESCRIPTION], Target.[WHEN_CREATED] = Source.[WHEN_CREATED],Target.[UPDATED_DATE]= GetDate()
when not matched then 
insert ([GROUP_NAME],[DESCRIPTION],[WHEN_CREATED],[UPDATED_DATE]) values (Source.[GROUP_NAME],Source.[DESCRIPTION],Source.[WHEN_CREATED],GetDate());

end 
```

如何使用 bulkCopy 传递表并执行此存储过程？在 c# 代码中，我想将 Datatable 作为参数传递，然后执行这个存储过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:34:49.137

使用表值参数存储过程并使用 C# 代码将您的数据表传递给存储过程。

```
 // Create a DataTable 
DataTable dt = new DataTable(...)
// Configure the SqlCommand and SqlParameter.
SqlCommand insertCommand = new SqlCommand(
    "your TVP store procedure", connection);
insertCommand.CommandType = CommandType.StoredProcedure;
SqlParameter tvpParam = insertCommand.Parameters.AddWithValue(
    "@tvp", dt);
tvpParam.SqlDbType = SqlDbType.Structured; 
```

# java - Java Swing - 创建一个带有按钮和动态游戏板的窗口

> ID：15512450
> 
> 赞同：0
> 
> 时间：2013-03-19T23:27:03.467
> 
> 标签：java, image, swing, jpanel

我是 Java Swing 的新手，正在开发一个简单的应用程序，该应用程序在窗口中显示棋盘游戏和可移动的棋子。

现在，我有一个足够好的界面：应用程序建立在`Window`派生自 的特殊类上`JFrame`，该`paint`方法被覆盖以显示棋盘和棋子`drawImage`（迭代棋子以收集位置信息）

但是，当我尝试在整个游戏窗口中添加一些按钮和文本显示区域时，出现了问题。在明确单击它们之前，它们都不会显示。通过一些研究，我发现在这种情况下覆盖油漆会搞砸；显然，你可以弄乱`paint`或使用按钮等，但不是真的/很容易两者兼而有之。

作为一种替代方法，我遇到了一个教程，该教程展示了如何将图像绘制到 JPanel 上，我想我可以在板/部件上使用它，然后在布置东西时像任何其他按钮或小部件一样对待（？）之前我沿着任何死胡同走（似乎是一个愚蠢的问题，但相信我......），我想问：这是一个好方法吗？或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T23:31:25.223

听起来您没有`super.paint(g)`从您的`paint`方法中调用。真的，您不应该在像`JFrame`.

理想情况下，您应该使用该替代方法并将其移至基于新`JComponent`的类。在这里，您需要覆盖`paintComponent`并调用`super.paintComponent(g)`. 如果您需要将子组件添加到新组件，那么肯定`JPanel`是一个很好的容器。

*   [定制绘画](http://www.oracle.com/technetwork/java/painting-140037.html)

# javascript - 禁用滚动网页 iPad

> ID：15512458
> 
> 赞同：0
> 
> 时间：2013-03-19T23:27:34.107
> 
> 标签：javascript, jquery, ipad

我见过很多涉及停止所有 touchmove 事件的解决方案。但是，这对我不起作用，因为我的应用程序涉及绘图画布。有没有办法确保用户不能滚动，同时保留其他触摸事件？——阿什利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:35:33.990

您可以`e.preventDefault()`在绘图处理程序中使用，也可以在附加到 DOM 树的更上方的处理程序中使用。这只是防止默认行为`touchmove`是滚动。

```
$('body, html').on('touchmove', function(e){
  e.preventDefault();
}); 
```

您仍然可以处理`touchmove`绘图画布上的事件。

另一种选择是`overflow:hidden`在您的 CSS 中设置 - 但这取决于您的页面大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T23:37:43.643

我认为你应该看看这个答案.. [防止 touchmove default on parent but not child](https://stackoverflow.com/questions/9486195/prevent-touchmove-default-on-parent-but-not-child)

将您的画布放入容器中并停止在父级上滚动。

```
$('body').delegate('#fix','touchmove',function(e){

    e.preventDefault();

}).delegate('.scroll','touchmove',function(e){

    e.stopPropagation();

}); 
```

# ios - requiredContentSizeIdentifiers 已弃用

> ID：15512459
> 
> 赞同：6
> 
> 时间：2013-03-19T23:27:38.183
> 
> 标签：ios, objective-c, iphone, xcode

我的代码是

```
 -(void)viewDidLoad
{
    adView = [[ADBannerView alloc] initWithFrame:CGRectZero];
    adView.frame = CGRectOffset(adView.frame, 0, -50);
    adView.requiredContentSizeIdentifiers = [NSSet setWithObject:ADBannerContentSizeIdentifierPortrait];
    adView.currentContentSizeIdentifier =ADBannerContentSizeIdentifierPortrait;
    [self.view addSubview:adView];
    adView.delegate=self;
    self.bannerIsVisible=NO;

    [super viewDidLoad];

}

//when banner is loaded successfully
- (void)bannerViewDidLoadAd:(ADBannerView *)banner
{
    if (!self.bannerIsVisible)
    {
        [UIView beginAnimations:@"animateAdBannerOn" context:NULL];
        // banner is invisible now and moved out of the screen on 50 px
        banner.frame = CGRectOffset(banner.frame, 0, 50);
        [UIView commitAnimations];
        self.bannerIsVisible = YES;
    }
}

//when any problems occured
- (void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error
{
    if (self.bannerIsVisible)
    {
        [UIView beginAnimations:@"animateAdBannerOff" context:NULL];
        // banner is visible and we move it out of the screen, due to connection issue
        banner.frame = CGRectOffset(banner.frame, 0, -50);
        [UIView commitAnimations];
        self.bannerIsVisible = NO;
    }
} 
```

编码

```
currentContentSizeIdentifier

requiredContentSizeIdentifiers

ADBannerContentSizeIdentifierPortrait 
```

已弃用，所以我用什么替换它，所以它仍然可以工作？

我需要在提交之前执行此操作，因为如果我不这样做，该应用程序将被拒绝。

请帮我

提前致谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-20T00:21:17.317

如果您删除有问题的代码行并实现下面的代码行，它将获得相同的结果，但不会被弃用。

消除：

```
adView.requiredContentSizeIdentifiers = [NSSet setWithObject:ADBannerContentSizeIdentifierPortrait];
adView.currentContentSizeIdentifier =ADBannerContentSizeIdentifierPortrait; 
```

添加：

```
[adView setAutoresizingMask:UIViewAutoresizingFlexibleWidth]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T04:04:07.507

iOS 6 带有许多新的更新。有很多自动调整大小控件已被弃用。`ADBannerContentSizeIdentifierPortrait`也已弃用。

这是可以帮助您解决此问题的链接。

[自动布局示例](http://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2/)

# memory-management - Malloc 函数背后的逻辑

> ID：15512460
> 
> 赞同：0
> 
> 时间：2013-03-19T23:27:38.407
> 
> 标签：memory-management, malloc

首先对我下面的草率图表感到抱歉。

我想了解 malloc() 背后的逻辑。这是在彭博采访中被问到的。

**Que：考虑你的操作系统中只剩下 2 个字节的内存（如下所示）。现在如果我 malloc() 它为 2 个字节。**（白色区域表示以字节为单位的空闲空间，黑色表示以字节为单位的已用空间。所以我们有 2 个字节的空闲空间和 2 个字节的已用内存空间）。
![记忆区](../Images/c2122ec114ed8984d202359101d37bed.png)

*   malloc() 有什么作用？
*   操作系统在这种情况下会做什么？
*   malloc() 是否会成功，它会返回 2 个字节吗？用解释说是或否。

PS：-我查了一下谷歌，发现它主要依赖于操作系统。但我想对此有更多的了解。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T00:17:08.323

这里有很多问题（请注意，下面的大部分内容都是特定于 Linux 的，但我想在其他平台上也会类似）：

*   的典型实现`malloc`永远不会只分配 2 个字节（由于效率和对齐问题）。例如，我认为标准 GNU 实现默认分配至少 16 个字节。

*   `malloc`在用户空间中运行，在操作系统已经提供的内存区域上运行。操作系统只有在`malloc`用尽可用的内容并需要为堆请求更大的内存区域时才会参与。

*   操作系统必须以页为单位（通常为 4kB）为进程分配内存区域，因为这是硬件内存管理单元 (MMU) 的基本单位。因此，谈论操作系统只剩下 2 个字节是没有意义的。

*   操作系统通常分配当前不映射到任何物理内存的内存区域（这称为*过度*使用）。仅当进程尝试访问内存时才会创建物理映射。

*   如果操作系统的物理内存不足，它会使用称为*页框回收*的系统从其他进程中窃取页框。

因此，简而言之，您的问题中描述的情况不太可能发生，原因有几个！

# javascript - getJSON 在返回值的函数中不起作用

> ID：15512462
> 
> 赞同：0
> 
> 时间：2013-03-19T23:27:55.680
> 
> 标签：javascript, jquery, json

我有这段代码，它工作得很好：

```
$.getJSON('/admin/get_acronyms', function(data) {
    //load JSON
    $.each(data, function(key, val) {
        if(key === 'error') {
            alert(val);
        } else {
            //Update typeahead source
            autocomplete.data('typeahead').source = val;
        }
    });
}); 
```

我想在这个函数中最小化它以便代码重用：

```
var getAndAppendJSON = function(url) {
    var result;
    $.getJSON(url, function(data) {
        $.each(data, function(key, val) {
            return val;
        });
    });
};

var arr = getAndAppendJSON('/admin/get_acronyms');
autocomplete.data('typeahead').source = arr; 
```

但是这个功能不起作用:(。

JS 控制台向我显示 var **arr 未定义**

有谁知道为什么？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T23:31:57.757

`getAndAppendJSON`实际上并没有返回任何东西。它启动一个 AJAX 调用，该调用在其调用完成*后完成。*您应该做的是在回调中使用返回的数据：

```
var getAndAppendJSON = function(url) {
    var result;
    $.getJSON(url, function(data) {
        autocomplete.data('typeahead').source = data;
    });
}; 
```

您的请求将花费一些时间来访问服务器并返回。这就是处理程序的用途，一旦数据在不确定的时间段后返回给您，就能够处理数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T23:31:39.513

因为 AJAX 是“异步的”。您有您的 AJAX 成功处理程序 return `val`，但是您要返回到哪里？

当你执行

```
var arr = getAndAppendJSON('/admin/get_acronyms'); 
```

AJAX 调用被发送到服务器，但该函数没有返回任何内容。因此`arr`是未定义的。等到 AJAX 调用从服务器返回时，JS 的其余部分早就开始了。

要完成您想要实现的目标，必须在回调函数中进行分配：

```
var getAndAppendJSON = function(url) {
    var result;
    $.getJSON(url, function(data) {
        autocomplete.data('typeahead').source = data;
    });
}; 
```

# ios - 如何在 UIView 动画的两个反转之间等待？

> ID：15512469
> 
> 赞同：0
> 
> 时间：2013-03-19T23:28:22.590
> 
> 标签：ios, uiviewanimation

我想摇动价格按钮。每次倒车后，它应该等待几秒钟。

```
 [UIView animateWithDuration:0.14f delay:0 options:(UIViewAnimationOptionAutoreverse | UIViewAnimationOptionRepeat | UIViewAnimationCurveEaseInOut) animations:^{
        self.priceButton.transform = CGAffineTransformMakeRotation(DEGREES_TO_RADIANS(3));
        self.priceButton.transform = CGAffineTransformMakeRotation(DEGREES_TO_RADIANS(-6));
        self.priceButton.transform = CGAffineTransformMakeRotation(DEGREES_TO_RADIANS(3));
    } completion:nil]; 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T00:13:31.907

您可以让每个旋转都在其自己的 animateWithDuration 块中彼此完成，或者您可以将它们中的每一个放在一个选择器中并调用：

```
[self performSelector:@selector(setRad:) withObject:[NSNumber numberWithInt:(either -6 or 3 here)] afterDelay:0.14f*(either 0 1 or 2)]; 
```

然后在选择器 setRad 中，在动画块中设置变换。

# ios - showImagePicker 和 ARC

> ID：15512471
> 
> 赞同：0
> 
> 时间：2013-03-19T23:28:25.463
> 
> 标签：ios, objective-c, automatic-ref-counting, uiimagepickercontroller

**编辑 0**

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.overlayViewController = [[BSsetupOverlayViewController alloc] initWithNibName:@"BSsetupOverlayViewController" bundle:nil] ;

    // as a delegate we will be notified when pictures are taken and when to dismiss the image picker
    self.overlayViewController.delegate = self;

    if (![UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
    {
        // camera is not on this device, don't show the camera button
        NSMutableArray *toolbarItems = [NSMutableArray arrayWithCapacity:self.myToolbar.items.count];
        [toolbarItems addObjectsFromArray:self.myToolbar.items];
        [toolbarItems removeObjectAtIndex:2];
        [self.myToolbar setItems:toolbarItems animated:NO];
    }

    [self showImagePicker:UIImagePickerControllerSourceTypeCamera];
} 
```

**编辑 0**

下面的`-showImagePicker:`代码几乎与 PhotoPicker 示例完全相同，只是第**一个**注释掉的行被它**上面**的行替换（因为不推荐使用的功能）。但是，该行的新版本正在产生警告`Warning: Attempt to present <UIImagePickerController: 0x1c53ec70> on <BSsetupViewController: 0x1d888c10> whose view is not in the window hierarchy!`

另一方面，如果我将**第一个**注释掉的行替换为它**下面**的行，我会遇到 ARC Semantic 问题`No visible @interface for 'BSsetupViewController' declares the selector 'presentModalViewController:animated:completion:'`

有任何想法吗？

```
- (void)showImagePicker:(UIImagePickerControllerSourceType)sourceType
{
    if (self.imageView.isAnimating)
        [self.imageView stopAnimating];

    if (self.capturedImages.count > 0)
        [self.capturedImages removeAllObjects];

    if ([UIImagePickerController isSourceTypeAvailable:sourceType])
    {
        [self.overlayViewController setupImagePicker:sourceType];
        [self presentViewController:self.overlayViewController.imagePickerController animated:YES completion:^(void){}];
      //[self presentModalViewController:self.overlayViewController.imagePickerController animated:YES];
      //[self presentModalViewController:self.overlayViewController.imagePickerController animated:YES completion:^(void){}];

    }
} 
```

# apache - 需要 Apache 重写规则来更改部分 url

> ID：15512476
> 
> 赞同：0
> 
> 时间：2013-03-19T23:29:03.647
> 
> 标签：apache, mod-rewrite

我有这样的网址：

www.example.com/index.php/category-5/subcategory/page **_** _

我想重写为：

www.example.com/**类别**/子类别/页面

即我想删除“index.php/”并删除“-5”，但保留其余部分。

我对 Apache 不知所措。我通常只写简单的 php 代码。

我试过这个，但没有奏效：

```
RewriteRule ^index.php/category-1/(.*)$ /category/($1) [NC] 
```

谢谢

另外，如果我们可以将其设为永久重定向，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:47:00.987

不要在替换部分使用括号：

重写规则 ^index.php/category-1/(.*)$ /category/$1 [NC,R=301]

看：

[http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriteoptions](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriteoptions)

和

[http://httpd.apache.org/docs/current/rewrite/flags.html](http://httpd.apache.org/docs/current/rewrite/flags.html)

你可以激活调试日志，我一直觉得这很有用，因为 RewriteRule 很棘手：

```
RewriteLog "/path-to-log/rewrite.log"
RewriteLogLevel 4 
```

# matlab - 使用 Matlab 避免科学记数法

> ID：15512478
> 
> 赞同：4
> 
> 时间：2013-03-19T23:29:23.417
> 
> 标签：matlab, scientific-notation

我已经尝试过：

```
format long g; 
```

但是像这样的数字用科学记数法显示：

```
ans = 8.80173259769825e-05 
```

如何在不使用类似的东西的情况下避免科学记数法`fprintf`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T05:36:38.643

您可以使用：

```
sprintf('%.10f', yourNumber) 
```

或者更复杂的选择是使用基于 Java 的格式（[请参阅更多信息](http://download.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html)，感谢 Yair Altman 展示此方法），例如：

```
char(java.text.DecimalFormat('#.00000000').format(yourNumber)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-30T13:53:04.937

转到：首选项 > 命令视图 > 数字格式 > 银行

# iphone - 如何在没有相机界面的情况下访问 iPhone 相机？

> ID：15512484
> 
> 赞同：1
> 
> 时间：2013-03-19T23:29:53.943
> 
> 标签：iphone, ios, objective-c

我需要在不显示相机界面的情况下访问 iPhone 内的相机应用程序，我所需要的只是拥有自己的相机设计。实际上我的意思是我不需要使用“UIImagePickerController”方法使用默认相机应用程序。我喜欢我的相机出现在 Instagram 应用中。请帮忙，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T23:32:47.063

您想使用 AVCaptureSession 和 AVCaptureVideoPreviewLayer，如我书中的这一部分所示：

[http://www.aeth.com/iOSBook/ch30.html#_image_capture_with_av_foundation](http://www.apeth.com/iOSBook/ch30.html#_image_capture_with_av_foundation)

您可以围绕它构建任何界面。

# opengl - 在 MSVC 2012 中设置 OpenGL

> ID：15512486
> 
> 赞同：0
> 
> 时间：2013-03-19T23:29:58.643
> 
> 标签：opengl

我正在努力在 Visual Studio 2012 上安装 OpenGL，但即使使用 GLUT，它也不起作用。

我读了另一个问题，但也没有用： [How do you install GLUT and OpenGL in Visual Studio 2012?](https://stackoverflow.com/questions/12171317/how-do-you-install-glut-and-opengl-in-visual-studio-2012)

所以基本上，我别无选择，只能问我将如何链接这些库？解释每个步骤并记住我使用的是 x64 Windows 7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T02:27:53.777

1.  复制`glut32.dll`，`glut.dll`并将它们粘贴到`C:\Windows\SysWOW64`文件夹中。
2.  复制`glut.h`文件并将其粘贴到`C:Program Files (x86)\Microsoft SDKs\Windows\v7.0A`（也许是`9.0A`，不是`7.0A`）`\Include\gl`文件夹中。如果没有`gl`文件夹，则创建一个新文件夹。
3.  复制`glut32.lib`，`glut.lib`并将它们粘贴到`C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Lib`文件夹中。

现在您可以创建可视化 c++ 控制台应用程序项目并包含 glut.h 头文件，然后您可以为 GLUT 项目编写代码。

```
#pragma comment(lib, "opengl32.lib") 
#pragma comment(lib, "glu32.lib") 
#pragma comment(lib, "glaux.lib") 
#include <gl/GL.h> 
#include <gl/GLU.h> 
#include <gl/GLAUX.H>
#include <gl/GLUT.H> 
```

# c# - 将 vb6 表单传递给 .net

> ID：15512488
> 
> 赞同：1
> 
> 时间：2013-03-19T23:30:19.860
> 
> 标签：c#, .net, vb6, interop

我正在使用互操作在 vb6 应用程序中使用 .Net 控件，并且想知道是否可以将 vb6 表单引用作为方法的参数传递。

我将 .net 控件的 init 方法签名定义如下：

```
public bool Init(int Arg1, int Arg2, bool Arg3, int Arg4, int Arg5) 
```

我想传递调用此方法的 vb6 表单的 ref 作为另一个参数。

# android - Android 录音错误

> ID：15512491
> 
> 赞同：0
> 
> 时间：2013-03-19T23:30:36.423
> 
> 标签：android, android-audiorecord

我正在尝试实现用于学习的录音，但我遇到了异常，导致应用程序崩溃，而没有明确的线索如何解决这个问题。这是我的代码

```
private static final File SDCARD_ROOT = Environment.getExternalStorageDirectory();
private static final String APP_DIR = "test_audio";
private static final String AUDIO_SAMPLE_NAME = "myShake";
...............
...............
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    appDir = new File(SDCARD_ROOT, APP_DIR);
    if (!appDir.exists()) {
        appDir.mkdir();
    }

    recordButton = (Button) findViewById(R.id.audio_button);
    textView = (TextView) findViewById(R.id.edit_text);
    recordButton.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(final View view, final MotionEvent event) {
            if (event.getAction() == MotionEvent.ACTION_DOWN) {
                record();
                return true;
            } else if (event.getAction() == MotionEvent.ACTION_UP) {

                return true;
            } else {
                return false;
            }

        }
    });

}

private void record() {
    final File audioSampleFile = new File(appDir, AUDIO_SAMPLE_NAME);
    if (audioSampleFile.exists()) {
        audioSampleFile.delete();
    }

    if (mediaRecorder == null) {
        mediaRecorder = new MediaRecorder();
    }
    mediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
    mediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
    mediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
    mediaRecorder.setOutputFile(audioSampleFile.getPath());
    mediaRecorder.start();
} 
```

以下是应用程序在电话中崩溃后我得到的异常

```
03-20 07:08:59.272: ERROR/NotificationService(243): Ignoring notification with icon==0: Notification(contentView=null vibrate=null,sound=nullnull,defaults=0x0,flags=0x62)
03-20 07:09:04.007: ERROR/MediaRecorder(7156): start called in an invalid state: 4
03-20 07:09:04.017: ERROR/AndroidRuntime(7156): FATAL EXCEPTION: main
        java.lang.IllegalStateException
        at android.media.MediaRecorder._start(Native Method)
        at android.media.MediaRecorder.start(MediaRecorder.java:712)
        at com.cs.gang.TestAudio.record(TestAudio.java:78) 
```

其中 TestAudio.java:78 是该行

```
mediaRecorder.start(); 
```

我在其他帖子中搜索过这个问题，但它们似乎并不完全相同。我有权限

```
<uses-permission android:name="android.permission.RECORD_AUDIO"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

而且我相信我已经正确地创建了文件来访问 sd-card 那么这个问题或错误的原因是什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:42:24.157

您需要先打电话`mediaRecorder.prepare()`再打电话`start()`

# regex - 正则表达式：如果两个字符串都匹配，则选择整行

> ID：15512492
> 
> 赞同：0
> 
> 时间：2013-03-19T23:30:48.317
> 
> 标签：regex, string

下面是我必须使用的文本报告的部分列表。该报告过于冗长，我想看看正则表达式（或其他一些工具）是否可以在字符串之间的`orig=`和与和`)`之间的字符串匹配时删除行`cust=``)`

我涉足了正则表达式，但我无法弄清楚。我什至不确定正则表达式是否适合这样的事情......

虽然此示例集仅在此处显示，但数据将包含句点和数字。

```
action:::include:::pageheader
    id:::(orig=pageHeader),(cust=pageHeader)
action:::clientarea:::clientarea
    id:::(orig=clientarea),(cust=clientarea)
action:::tabgroup:::maintabs
    id:::(orig=maintabs),(cust=maintabs)
    style:::(orig=form),(cust=form)
action:::tab:::results
    default:::(orig=true),(cust=true)
    id:::(orig=results),(cust=results)
    label:::(orig=List),(cust=List)
    type:::(orig=list),(cust=list)
action:::menubar:::actiontoolbar
    event:::(orig=search),(cust=search)
    id:::(orig=actiontoolbar),(cust=actiontoolbar)
    sourcemethod:::(orig=getAppSearchOptions),(cust=getAppSearchOptions) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T00:21:07.647

我不确定您使用的是什么工具。假设基于 Perl 的正则表达式语法：

```
^.*\(orig=([^)]*)\).*\(cust=\1\).*$ 
```

这假定里面的文本`(orig=...)`不包含右括号`)`。

**更新**

[使用 EditPlus 对正则表达式](http://editplus.info/wiki/Regular_expression_syntax)的基本支持，不可能完成您想要的任务。特别是，**反向引用是必要的，但使用正则表达式****搜索**时缺少该功能。

我建议您使用不同的文本编辑器来完成任务。

# ios - 将数据从 UIViewController 传递到 UIView

> ID：15512496
> 
> 赞同：-1
> 
> 时间：2013-03-19T23:31:17.163
> 
> 标签：ios, uitableview, uiview, uiviewcontroller

我在 UIViewController 中有一个表，我还有一个子视图 UIView。我试图将数据从我的 UIViewController 传递到 UIView：

主视图控制器：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UAModalPanel *mainSubModalPanel = [[[MainSubView alloc] initWithFrame:self.view.bounds] autorelease];
    [self.view addSubview:mainSubModalPanel];
    [mainSubModalPanel showFromPoint:CGPointMake(384.5, 512.5)];

} 
```

主子视图.h

```
@interface MainSubView : UAModalPanel
{
    NSString *dishName;
}
@property (strong, nonatomic) IBOutlet UILabel *mainTitle;
@property (nonatomic, retain) NSString *dishName; 
```

但是，我在将数据从我的表视图传递到子视图中的“dishName”并设置“mainTitle”=“dishName”时遇到了麻烦任何人都可以帮助我吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T23:43:40.457

将您的 init 方法调整为您传递数据的 init 方法。

```
MainSubView *mainSV = [[MainSubView alloc] initWithMyCustomData:(NSDictionary *)dictionaryObject andAnArray:(NSArray *)array andAString:(NSString *)string andANumber:(NSNumber *)aNumber; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T23:53:42.857

看起来您已将 UIView 子类化并将其称为 MainSubView。现在，将一些属性添加到您的子类并从视图控制器中设置它们。

确保在 UIViewController 的 .h 文件中包含自定义 UIView 的 .h 文件。

```
mainSubModalPanel.myProperty = myString; 
```

然后，由于您正在代码中创建自定义 UIView，因此不要忘记将其添加为 UIViewController 的子视图：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T00:29:33.703

首先，尽管您需要访问的属性是子类的一部分，但您将新分配的属性存储`MainSubView`在指针中。尝试将初始化更改为：`UAModalPanel``MainSubView``MainSubView`

```
 MainSubView *mainSubModalPanel = [[[MainSubView alloc] initWithFrame:self.view.bounds] autorelease]; 
```

现在你应该可以设置`dishName`and了`mainTitle`：[`text`](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UILabel_Class/Reference/UILabel.html#//apple_ref/occ/instp/UILabel/text "UILabel 类参考 - 文本属性")

```
 mainSubModalPanel.dishName = @"Pizza!";
    mainSubModalPanel.mainTitle.text = @"Moar Pizza!"; 
```

然后将其添加为子视图以及上面的任何其他内容*（我喜欢在传递所有权之前完全设置一个对象，因为它往往会导致更少的故障）*。

* * *

**小注：**

您的`NSString *dishName`财产可能会更好有`copy`修饰符而不是`retain`. 具有可变子类型的基础类型*（即 NSString 具有 NSMutableString 子类）*需要传递一个可以从外部更改的可变子类。通常，这不是您想要的并且会导致错误*（当然，除非您明确要求 NSMutableString）*，并且 using`copy`确保您传递的任何内容都保持这种状态：

```
@property (nonatomic, copy) NSString *dishName; 
```

此外，如果您计划使用 MainSubView 的`mainTitle.text`match `dishName`，您可能需要考虑指定一个自定义 setter 方法来自动`dishName`设置，`mainTitle.text`如下所示：

```
- (void)setDishName:(NSString *)newDishName
{
    BOOL notTheSameStringInstance = (newDishName != dishName);
    BOOL notIdenticalStringContents = ![newDishName isEqualToString:dishName];
    if (notTheSameStringInstance && notIdenticalStringContents) {
        [dishName release];
        dishName = [newDishName copy];

        mainTitle.text = dishName;
    }
} 
```

# java - 过滤具有所有相同记录的集合，除了一列不同？

> ID：15512503
> 
> 赞同：-3
> 
> 时间：2013-03-19T23:31:50.870
> 
> 标签：java

我在java中得到了集合，这个集合中有相同的记录，只有一个字段不同，所以我想像这样通过集合伪循环：

```
class Pojo {
    private String name;
    private Long id;
    private String address;
    private String bank;
} 
```

该集合包含此 Pojo，具有重复的名称、ID、地址，但银行不同，所以如果名称、ID、地址相同且银行不同，我希望最终列表只有名称、ID、地址并将银行与半连接在一起冒号分隔

原始收藏：

```
 - Id      Name     Address                Bank
 - 1       John     123 Main Ave           BankOfAmerica
 - 2      John     123 Main Ave           Chase
 - 3      John     123 Main Ave           ING Direct
 - 4      Willy    456 My Street          Chase
 - 5      Willy    456 My Street          BankOfAmerica 
```

预期成绩：

```
 Name   Address            Bank
  - John   123 Main Ave       BankOfAmerica;Chase;ING Direct
  - Willy  456 My Street      Chase;BankOfAmerica 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T04:19:17.933

`POJO`使用名称、id 和地址覆盖 equals/hash 方法。创建一个集合并不断添加元素。在添加检查 id 之前，对象已经通过调用`contains()`方法存在。如果存在，则从新集合中获取对象，通过附加现有集合中的地址来更新地址。

# java - size() 在 java 的 ArrayList 类中是如何工作的？

> ID：15512508
> 
> 赞同：3
> 
> 时间：2013-03-19T23:32:02.820
> 
> 标签：java, arraylist, performance

所以，为了获得最有效的代码，我真的很想知道`size()`Java 中的方法是如何`ArrayList`工作的......它是否计算每个元素，遍历所有位置，就像一个简单的列表？还是它只是通过注册的最后一个索引获取大小？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T23:34:17.563

[查看源代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/ArrayList.java#ArrayList.size%28%29)永远不会受到伤害：

```
public int size() {
    return size;
} 
```

它返回一个实例变量——非常快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T23:36:23.660

在最新的 Java7 中，它所做的不仅仅是读取成员字段值：

```
public int size() {
    checkForComodification();
    return this.size;
}

private void checkForComodification() {
    if (ArrayList.this.modCount != this.modCount)
        throw new ConcurrentModificationException();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T23:35:18.077

其中`ArrayList`有一个`int`用于存储当前大小的属性（例如，称为`size`）。显然，为了提高效率，计算数组列表的大小应该是一个`O(1)`操作。即使在诸如`LinkedList`（双链表）之类的数据结构中，大小也会在属性中保持更新，以避免每次需要时都必须计算它。要更清楚地看到它，请查看 OpenJDK 中的[源代码](http://hg.openjdk.java.net/jdk7/jdk7/jdk/file/00cd9dc3c2b5/src/share/classes/java/util/ArrayList.java)，您会发现：

```
 /**
  * The size of the ArrayList (the number of elements it contains).
  *
  * @serial
  */
  private int size;

 /**
  * Returns the number of elements in this list.
  *
  * @return the number of elements in this list
  */
  public int size() {
      return size;
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T23:34:37.157

根据 的源代码`ArrayList`，该`size()`方法返回一个名为 的私有变量`size`，它只是一个每次递增的计数器`add`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T23:34:37.687

它读取一个字段变量。Java 1.6 的`ArrayList.size()`：

```
/**
 * Returns the number of elements in this list.
 *
 * @return the number of elements in this list
 */
public int size() {
    return size;
} 
```

# jquery - 在 RStudio 中闪亮，希望自定义表格

> ID：15512510
> 
> 赞同：4
> 
> 时间：2013-03-19T23:32:11.447
> 
> 标签：jquery, r, shiny

在带有由 生成的表格的 RStudio 闪亮应用程序中`renderTable()`，我想添加单选按钮的前导列（当然是反应性的）并更改所选行的样式。最好的策略是什么？我想如果绝对必要我可以使用 jQuery，但没有更简单的方法吗？我尝试将 html 插入`renderTable()`表达式 args... 中的表格单元格中不起作用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-22T17:19:48.693

不确定您是否仍在寻找有关此问题的答案。可能不是，但看到它没有得到答复让我很难过。我会自己创建表格 html 并使用`renderText()`.

例如，假设您希望页面上的此数据框在顶行带有单选按钮：

```
df <- data.frame(A=1:5, B=1:5) 
```

我们首先需要`df`变成一个HTML表格。以下是制作 HTML 表格单元格和行的函数：

```
cell_html <- function(table_cell) paste0('<td>', table_cell, '</td>')

row_html <- function(table_row) {
  cells <- sapply(table_row, cell_html)
  collapse_cells <- paste0(cells, collapse='')
  paste0('<tr>', collapse_cells, '</tr>')
} 
```

并使用这些功能：

```
df_rows <- apply(df, 1, row_html) 
```

现在这里有一个愚蠢的小功能来制作单选按钮：

```
radio_html <- function(radio_name, radio_value, radio_text) {
  paste0('<input type="radio" name="', 
   radio_name, '" value="', radio_value, '">', radio_text)
} 
```

让我们制作尽可能多的单选按钮`df`：

```
radios <- sapply(seq_along(df), 
  function(x) radio_html(paste0('row', x), x, paste(x))) 
```

这将生成表单的 HTML：

```
<input type="radio" name="row1" value="1">1 
```

对于每一行。然后投入`radios`其中`row_html`以制作 HTML 表格行：

```
radio_row <- row_html(radios) 
```

现在我们只需要组合`df`单选按钮并将整个内容包装在 HTML 表格标签中。

```
table_cells <- c(radio_row, df_rows)
collapse_cells <- paste0(table_cells, collapse='')
full_table <- paste0('<table>', collapse_cells, '</table>') 
```

把这整个野兽放在一个`renderText()`函数中。我不确定您使用的是`ui.R`自定义 HTML 界面还是您自己的自定义 HTML 界面。我总是做后者，它给你更多的自由。我会在我的页面上有这个：

```
<div name="x" id="x" class="shiny-html-output"></div> 
```

将我的表渲染为`output$x`. 要设置所选行的样式，我建议使用 jQuery。一个简单的事件（高度未经测试）[**编辑：请参阅下面评论中的建议修改**]：

```
$('table input:radio').change(function() {

  var index = $('#table input:radio').index(this);

  // Add one to skip radio button row.
  $('table tr').eq(index + 1).css('background-color', 'blue');

  // Also handle reset on other rows
  // ...
  // ...

}); 
```

您也可以尝试将表格和“选定”类构建到适当的表格行服务器端，并准备好一些 CSS 来设置样式。

在没有样本数据的情况下，所有这些都未经测试，因此预计会出现一些错误。

此外，如果您乐于使用`ui.R`而不是您自己的自定义 HTML，则此方法应该仍然有效。我只是建议您使用自定义 HTML，因为您似乎正在沿着这条路线徘徊。

* * *

我正在回答您的要求...即制作单选按钮的前排。不过，我自己可能不会这样做。为什么不像往常一样制作您的表格`renderTable()`并单独添加单选按钮，即根本不属于表格的一部分？请参阅[Shiny 教程的此页面以](http://rstudio.github.com/shiny/tutorial/#dynamic-ui)获取帮助。如果您绝对必须将单选按钮与表格列对齐，这可以通过一些 CSSing 来实现。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-12T17:48:59.180

追求@MadScone 的优秀建议，我想出了以下代码，这是
一些使其对我有用的附加功能的最终解决方案： * 单选按钮位于第 1 列（不是第 1 行） * 它们属于相同的单选组 * 表格标题行格式正确 * 单选按钮选择的行接收特殊格式，无需 jQuery。

```
values = reactiveValues(PopRow=1)   ### To receive and hold the selected row number.

f.objects_table_for_OneCT = function(){
    f.changeSelectedRow()        #### See definition below.
    df = createObjectsTable()    #### Any data frame goes here; code not provided here.
    selectedRow = values$PopRow
    header_html <- function(table_cell) paste0('<th>', table_cell, '</th>')
    cell_html <- function(table_cell) paste0('<td>', table_cell, '</td>')
    radio_html <- function(radio_name, radio_value, is_checked, radio_text) {
      paste0('<input type="radio" name="', 
             radio_name, '" value=', radio_value, 
                   ifelse(is_checked, " checked ", ""),
                   '>', radio_text)
    }    
    row_html <- function(table_row_num) {
      table_row = df[table_row_num, ]
      cells <- sapply(table_row, cell_html)
      cells <- c(cell_html(radio_html(
                  "whichRow", table_row_num, table_row_num == selectedRow, "")),
               cells)
      collapse_cells <- paste0(cells, collapse='')
      selectedRowStyle = "style='color:red; font-weight:bold'"
      collapse_cells <- paste0('<tr ', 
                     ifelse(table_row_num == selectedRow, selectedRowStyle, ""),
                    '>', collapse_cells, '</tr>')
      collapse_cells 
    }
    df_rows <- sapply(1:nrow(df), row_html) 
    df_header_row <- header_html(c("CHOICE", names(df)))
    collapse_cells <- paste0(c(df_header_row, df_rows), collapse='')    
    full_table <- paste0('<table class=\"data table table-bordered table-condensed\">', 
                         collapse_cells, '</table>')
    return(full_table)
  }

  output$objects_table_for_OneCT = renderText({f.objects_table_for_OneCT()}) 
```

（关于最后一行，我习惯性地将我的`expr`arg 包装在一个函数中，所以我可以`debug`. 到目前为止它工作得很好。）

响应单选按钮的函数如下：

```
 f.changeSelectedRow = reactive({
    if(is.null(values$PopRow)) values$PopRow = 1
    if(!is.null(input$whichRow))   ### from the radio button set.
             if(input$whichRow != values$PopRow) values$PopRow = input$whichRow
  }) 
```

# php - PHP 检查通过 XSLT 中的 URL 传递的有效参数

> ID：15512511
> 
> 赞同：1
> 
> 时间：2013-03-19T23:32:11.983
> 
> 标签：php, xml, xslt, parameters, hyperlink

我有以下存储 2 个电影 ID 及其标题的 XML

```
<movies
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="test.xsd">

<movie movieID="1">
    <title>Movie 1</title>
</movie>

<movie movieID="2">
    <title>Movie 2</title>
</movie>
</movies> 
```

我的 XSL 将电影标题显示为超链接，这些超链接将用户带到 movie_details 页面，以根据通过 URL 传递的 ID 显示电影信息。

电影列表.xsl

```
<xsl:template match="/">
    <xsl:text>Movies list</xsl:text>
    <xsl:apply-templates select="/movies/movie"/>
</xsl:template>

<xsl:template match="movie">
  <xsl:element name="a">
  <xsl:attribute name="href">movie_details.php?movieID=<xsl:value-of select="@movieID"/></xsl:attribute>
  <xsl:value-of select="title"/>
  </xsl:element>
  <xsl:element name="br" />
</xsl:template> 
```

这是我的 movie_details.php 文件

```
<?php
$xml = new DOMDocument();
$xml->load('test.xml');

$xsl = new DOMDocument;
$xsl->load('movie_details.xsl');

$proc = new XSLTProcessor();
$proc->importStyleSheet($xsl);

$params = $_GET['movieID'];
$proc->setParameter('', 'movieID', $params);

echo $proc->transformToXML($xml);
?> 
```

我想在*movie_details.php*中进行以下参数验证：

1.  检查通过 URL 传递的 movieID 是否有效并且存在于 XML 文件中。如果我手动将浏览器中的 URL 更改为`myserveraddress.com/movie_details.php?movieID=3`，我会得到一个空白页面，因为`movieID=3`XML 文件中不存在并且没有任何内容可显示。

    如果movieID无效并且xml中不存在，那么我希望页面将我重定向到`index.php`

2.  检查是否通过 URL 传递了 movieID 参数。例如，如果我手动将浏览器中的 URL 更改为`myserveraddress.com/movie_details.php`，则页面应将我重定向到`index.php`，因为 URL 中没有传递任何参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:58:09.253

要检查您的 中是否存在具有特定属性值的元素`$xml` `DOMDocument`，您可以使用`DOMXPath`：

```
$movieID    = 3;
$expression = sprintf('boolean(//movie[@movieID="%d"])', $movieID);

$exists = $xpath->evaluate($expression);

if (!$exists) {
    echo "Invalid movieID!\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T22:05:49.340

我通过执行以下 IF 语句解决了这个问题：

```
if (isset($_GET["movieID"]) && !empty($_GET["movieID"]) && ($_GET["movieID"] <="2"))
{
    $xml = new DOMDocument();
    $xml->load('test.xml');

    $xsl = new DOMDocument;
    $xsl->load('movie_details.xsl');

    $proc = new XSLTProcessor();
    $proc->importStyleSheet($xsl);

    $params = $_GET['movieID'];
    $proc->setParameter('', 'movieID', $params);

    echo $proc->transformToXML($xml);
}
else
{
    header('Location: index.php');
} 
```

它可能不是最好的解决方案，但作为 PHP 初学者，我对它提供的验证非常满意。

# java - 程序掷骰子的次数（使用数组），并且必须显示一个数字的掷骰次数（除非它不起作用））

> ID：15512512
> 
> 赞同：0
> 
> 时间：2013-03-19T23:32:13.357
> 
> 标签：java, arrays, methods

我的程序的目标是掷两个六面骰子，然后将两个骰子相加（1000 次）并打印出程序中数字“4”掷了多少次。我尝试在循环内外使用 math.random 类，但没有明显区别，甚至没有使用 for 循环开始，我的目标是最终将输出调用到 main 方法以打印它。我听到的 count4++ 将适用于此类操作，除非某些错误导致我反对它。任何帮助、指导或建议将不胜感激。对于没有最好的代码编写格式、技能或一般知识，我深表歉意，请注意，这是我学习编程的第一年。我收到错误 count4++；无法解决，修复它的唯一方法是将其设置为 0，这会破坏我的程序，因为它总是打印 0。

```
import java.io.*;

public class Delt {

public static void main (String args [] ) throws IOException {

int i; 
int Sixside1;
int Sixside2;
int count4 = 0;
int [] data = new int [1000];
input (data);

System.out.println("The number of times '4' came up in the six sided dices is :" + count4);

}
public static void input (int num []) throws IOException {
BufferedReader myInput = new BufferedReader (new InputStreamReader (System.in));
String input;

System.out.println("Hello and welcome to the program");
System.out.println("In this program two six sided dices will be rolled and one eleven sided dice will be rolled (1000 times each");

System.out.println("The dices will be rolled to determine the odds of how many times the roll 4 comes up on both dies(Press any key to con't) ");
input = myInput.readLine ();

for (int i = 0; i < 1000; i++) 
{
  int Sixside1 = (int) (Math.random ()*(6-4) + 4); 
  int Sixside2 = (int) (Math.random ()*(6-4) + 4); 

  double total = Sixside1 + Sixside2;
  if ( total == 4) {
    // print amount of times 4 shows up in 1000 rolls, ?? 
    count4++;
    //return it to main method??
  }
}
} } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T23:45:27.580

您没有初始化局部变量`count4`- 这是必须完成的。在循环之前，您可以拥有：`int count4 = 0;`. 一种方法中的局部变量与另一种方法中的局部变量不同，所以我建议您将`count4`变量从`input()`方法返回到主方法，然后打印出来。

你也没有像你想象的那样计算骰子，这意味着你永远不会得到 4 的总和。`Math.random()`返回一个介于 0 和 1 之间的随机数（不包括） - 所以你的骰子将是：（int）（ 0-0.999)*2+4=(整数)(0-1.999)+4=(整数)4-5.9999= 4-5。相反，使用`(int)Math.random()*6+1`.

编辑：

```
public static void main(String[] args) throws Exception  {
    System.out.println(input());
}

public static int input () throws IOException {
    BufferedReader myInput = new BufferedReader (new InputStreamReader (System.in));
    System.out.println("Hello and welcome to the program");
    System.out.println("In this program two six sided dices will be rolled and one eleven sided dice will be rolled (1000 times each");

    System.out.println("The dices will be rolled to determine the odds of how many times the roll 4 comes up on both dies(Press any key to con't) ");
    myInput.readLine();
    int count4=0;
    for (int i = 0; i < 1000; i++) 
    {
        if ( (int)(Math.random ()*6+1)+(int)(Math.random ()*6+1) == 4) {
            count4++;
        }
    }
    return count4;
} 
```

# actionscript-3 - 在 Actionscript 3 中获取嵌套 MovieClip 的坐标

> ID：15512514
> 
> 赞同：0
> 
> 时间：2013-03-19T23:32:45.087
> 
> 标签：actionscript-3, flash, nested, coordinates, point

我需要在 Actionscript 3 中获取嵌套 MovieClip 的坐标。

这是上下文：

> 舞台 > 容器 > MovieClip1 > MovieClip2

我的目标是根据 Container 获取 MovieClip2 的坐标（x 和 y）。我试过 localToGlobal 但它似乎没有按预期工作。

**编辑：**

这是我在 MovieClip1 的课程中​​尝试过的代码：

```
var globalPoint:Point = new Point(MovieClip2.x, MovieClip2.y);
globalPoint = Container.localToGlobal(globalPoint); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T23:57:32.860

`MovieClip2`的位置相对于`MovieClip1`，因此您需要先将其转换`MovieClip1`为全局点（相对于`Stage`），然后将该全局点转换为`Container`的坐标空间：

```
var clipLocalPoint:Point = new Point(MovieClip2.x, MovieClip2.y);
var globalPoint:Point = MovieClip1.localToGlobal(clipLocalPoint);
var containerLocalPoint:Point = Container.globalToLocal(globalPoint); 
```

更简单地说，您可以通过从的坐标空间转换`Point`位于 (0, 0)的默认值来获得全局点：`MovieClip2`

```
var globalPoint:Point = MovieClip2.localToGlobal(new Point());
var containerLocalPoint:Point = Container.globalToLocal(globalPoint); 
```

# excel - excel公式或宏自动将长格式数据转换为宽格式

> ID：15512518
> 
> 赞同：1
> 
> 时间：2013-03-19T23:33:27.097
> 
> 标签：excel, excel-formula, vba

我想要具有将长格式数据更改为宽格式的功能。这意味着每个级别的因素将在 Excel 中的单独列中。

我想自动化这个过程，这样当一个因子的级别数非常高时，我每次都不需要做大量的复制和粘贴。

类似于以下内容：

![在此处输入图像描述](../Images/3df71142865362564f4cd4a83b21ea4c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T09:17:55.760

使用转置函数并使用 Ctrl + Shift + Enter（数组函数）将其应用于 EH 范围。如果大小增加，您只需选择更大的范围 E2:xx 并再次使用 Ctrl + Shift + Enter 应用公式。

自动化使用 VBA 代码，例如：

```
Range("J5:O13").Select
Selection.FormulaArray = "=TRANSPOSE(R[-3]C[-8]:R[13]C[-6])" 
```

# informix - Informix：计算临时表中的列数？

> ID：15512523
> 
> 赞同：3
> 
> 时间：2013-03-19T23:34:00.277
> 
> 标签：informix

我正在使用 IDS 11.70。

我希望能够获得临时表中列数的计数，因此在 4gl/genero 代码中，我可以有一个函数将正确数量的问号放入“放置游标”语句中。

例如，想要替换这种代码：

```
 declare put_curs1 cursor for
    insert into my_temp_table values(?,?,?,?,?,?) 
```

像这样：

```
let str = "insert into my_temp_table values (
    format_place_holder_string_for_insert( "my_temp_table" ) CLIPPED, ")"
prepare put_stment1 from str
declare put_curs1 cursor for put_stment1 
```

我们已经为我们的常规表执行了此操作，因此如果应该将表模式更改为具有更多或更少的列，那么代码不会因使用 put 游标插入错误的列数而中断。在常规表的此函数中，要获取我们使用的列数：

```
 select count(*)
    from systables, syscolumns
    where systables.tabname = table_name
    and systables.tabid = syscolumns.tabid 
```

但是在尝试为临时表执行此操作时，我看不到我加入的内容或表示临时表中有多少列的列。这是我到目前为止所拥有的：

```
select *
FROM sysmaster:systabnames n, sysmaster:systabinfo i, sysmaster:syssessions s 
WHERE sysmaster:bitval(i.ti_flags, "0x0020") = 1 
AND n.dbsname = database_name
AND i.ti_partnum = n.partnum 
AND s.sid = dbinfo("sessionid")
AND n.tabname = table_name; 
```

所以不是`select *` 我需要`select count( columns )`- 但我在哪里加入以便我可以计算列？我四处寻找，但找不到我需要的加入。

谢谢，布莱斯斯坦伯格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:53:56.383

经典的方法是准备'SELECT * FROM temptable'，描述语句，并从描述中获取列数，然后释放准备好的语句。这涉及到下降到 ESQL/C，虽然......或者很可能这样做。

未经测试的代码——带有松弛到不存在的错误检查：

```
int cols_in_temp_table(int nargs)
{
    $ char buffer[300];
    struct sqlda *u;
    char tabname[129];
    if (nargs != 1)
        ibm_lib4gl_fatalError(...);
    popstring(tabname, sizeof(tabname));
    sprintf(buffer, "SELECT * FROM %s", tabname);
    $ PREPARE p FROM :buffer;
    $ DESCRIBE p INTO u;
    retint(u.sqld);
    $ FREE p;
    free(u);
    return(1);
} 
```

调用 I4GL：

```
DEFINE n INTEGER

LET n = cols_in_temp_table("the_temp_table") 
```

该代码实际上适用于任何临时表或非临时表，因此函数名称有点用词不当。

我在数据库中找不到任何`sysmaster`可以告诉您临时表中的列的信息。这与“没有这样的表”不太一样，但它相当接近。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:46:01.127

我在 ifx 11.50 FC9 上成功测试了下面的代码。

`WARNING:`我使用了一个未记录的函数。我不知道在生产中使用它是否安全...

工作原理：我将行“转换”为 ROW 数据类型；使用名为 collectionoutput 的内部函数将此 ROW 转换为 lvarchar，然后计算逗号有多少（列分隔符）。

Pre-req ：创建/运行函数的权限；临时表必须至少有 1 行。

```
--drop function count_cols;
create function count_cols ( cols lvarchar(4000) ) returning int ;
  define i int;
  define ncols int;
  define isstring int;
  let ncols = 1;
  let isstring = 0;

  for i = 1 to length(cols)
    if substr(cols,i,1) = "'"  and isstring = 1 then
      let isstring = 0 ;
      continue for;
    end if ;
    if substr(cols,i,1) = "'"  and isstring = 0 then
      let isstring = 1 ;
      continue for;
    end if ;
    if isstring = 0 and substr(cols,i,1) = ',' then
       let ncols = ncols+1 ;
    end if ;
  end for ;
  return ncols;
end function
;

--drop table t2;
create temp table t2 ( cod int, desc char(100) default 'test', data datetime year to second default current year to second , number int);
insert into t2 (cod)values (0);
insert into t2 (cod)values (0);
insert into t2 values (1,'teste,teste,teste,teste',current, 0);

select * from t2;
select collectionoutput(multiset(select first 1 * from t2 where cod = 1)) from sysmaster:sysdual ;
select count_cols(collectionoutput(multiset(select first 1 * from t2 where cod = 1))) from sysmaster:sysdual; 
```

我的输出（dbaccess）

```
cod     0
desc    test
data    2013-03-22 11:36:37
number

cod     0
desc    test
data    2013-03-22 11:36:37
number

cod     1
desc    teste,teste,teste,teste
data    2013-03-22 11:36:37
number  0

(expression)  MULTISET{ROW(1          ,'teste,teste,teste,teste
                                                                           ','2
              013-03-22 11:36:37',0          )}

(expression)

           4 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-12T11:25:02.120

仅供参考 - 如果使用 12.10 - 可以创建临时表的真实实例并从系统表中获取列数。

1) CREATE TABLE yourtemp_chck SELECT * FROM yourtemp where 1=2; 2) 检查 sys 表的列数 3) 删除 yourtemp_chck

虽然我没有尝试从临时表创建一个真实的表，但确实适用于 v12.10 的真实表。

在任何版本中，也可以只创建真实表，以便从系统表中获取列数并在之后删除。我已经在非常古老的 4GL 中看到了这一点。除非没有其他选择，否则我不会做任何事情。

# string - 阅读输入文本/要求选择

> ID：15512524
> 
> 赞同：-1
> 
> 时间：2013-03-19T23:34:02.937
> 
> 标签：string, console

我正在尝试编写一个脚本，其中控制台询问用户他的名字，然后告诉他/她`Hello "name"`。

然后，它问`How has your day been`。如果答案是`fine`它应该打印一些东西。如果没有，它应该打印其他内容。

脚本结束。

这是一个尝试： http: [//pastebin.com/wscQrZhR](http://pastebin.com/wscQrZhR)

它出什么问题了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T23:44:11.120

首先，您将字符串与“==”进行比较。你不应该这样做。当您比较字符串时，“==”检查对象引用，而不是内容。换句话说，如果它们不是同一个对象，则语句返回 false。你想使用：

```
how.Equals("fine") 
```

您可能还想首先使用：

```
how = how.toLowerCase(); 
```

或者：

```
how.toLowerCase().Equals("fine"); 
```

老实说，我不确定哪个最好...

编辑：我想你想使用 how.equalsIgnoreCase("fine")？

但是，这不应该停止您的应用程序。它应该移动到 else 语句。你有错误吗？你能更具体地谈谈这个问题吗？

# python - 在目录中搜索包含文件夹路径的特定文件并将其复制到 python

> ID：15512526
> 
> 赞同：-3
> 
> 时间：2013-03-19T23:34:14.377
> 
> 标签：python, string, path, copy

我对python真的很陌生，我每天都学到很多东西。我想做一个自动脚本来帮助我的工作。

我有一个包含一些文件的特定文件夹，我不希望我的工具是特定于文件的，因为我想重用这个脚本，所以我希望它在文件中查找特定标题，

假设该文件在“路径”行的中间某处，并且在其下有许多路径，例如“文件路径=”某些路径”

我希望我的脚本转到我指定的目录并查找包含此标题“路径”的文件，复制其中一个路径（它们将在它的正下方），就是这样。

然后我将使用这个路径来下载文件等等，但这部分我已经完成了。当给定特定文件夹并复制我想要的字符串时，我只是不知道如何在文件中查找特定字符串。

所以假设我有一个文件夹（C:\Folder），在文件夹中我有 3 个文件（1,2,3）

我想查找包含这种模式“路径”的文件并复制路径或至少其中一个在它下指定的路径。他们会像 "file path=C:\somepath" 所以文件内容就像

废话

废话

路径

文件路径=C:\somepath

文件路径=C:\somepath2

废话

我想复制 C:\somepath 并将其用作我工作的一部分。

非常感谢所有帮助者，这对我来说非常重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:46:17.083

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-20T02:09:17.207

从您的评论来看，您的数据实际上是 XML，而您想要的是第一个节点中`path`每个（或第一个）`file`节点的属性`paths`。

就 XML 解析器而言，这实际上更容易编写，而且更健壮。

例如，这些可能都是有效`file`节点：

```
<file path="C:\Foo\Bar" />
<file path="C:\Baz\Qux"/>
    <file path="C:\Foo\Bar" />
<file path="C:\Spam\Eggs\" alt="other attribute cruft" />
<file alt="other attribute cruft" path="C:\Spam\Eggs\" />
<file path="C:\Spam\Spam\"></file> 
```

你甚至可能会看到这些，合法与否：

```
<file path='C:\Eggs\"Spam Spam Spam"\"Spammity Spam"'/> 
```

您不想尝试以纯文本形式处理所有这些可能性。但是，如果你不处理所有这些——以及更多——墨菲定律保证你最终会遇到一个文件，其中包含你不处理的任何一个。

有许多不同的 XML 解析器，甚至内置在标准库中，但我认为最简单的是[ElementTree](http://docs.python.org/2/library/xml.etree.elementtree.html)。所以：

```
import os
import os.path
import xml.etree.ElementTree as ET

filepaths = {}
for filename in os.listdir(directory):
    try:
        doc = ET.parse(os.path.join(directory, filename))
        paths = doc.find('paths')
        filepaths[filename] = [f.attrib['path'] for f in paths.findall('file')]
    except Exception as e:
        # You may want to log something, treat different exceptions differently, etc.
        pass 
```

应该很容易弄清楚如何改变它来处理所有`paths`节点而不是第一个节点，或者`file`下面的第一个节点`paths`而不是所有节点，或者第一个`file`具有`path`属性的节点等。

如果您使用的是 Python 2.x，并且文件非常大，这可能会有点慢。但是您可以通过显式使用`cElementTree`. 这样做很常见：

```
try:
    import xml.etree.cElementTree as ET
except ImportError:
    import xml.etree.ElementTree as ET 
```

如果可能的话，这将为您提供快速的“C”实现，否则将在 CPython 2.5+（包括 3.x，两者合并在一起）、PyPy 等中为您提供慢速实现。

* * *

同时，从其他评论中，您要求提供原始帖子中没有的其他内容：

> 我只需要……把反斜杠变成 /

这很容易。只需调用`s.replace('\\', '/')`每条路径`s`。

然而，这是一件很奇怪的事情。反过来很常见（它甚至内置在标准库中——<code>os.path.normpath 将在 POSIX 上单独保留斜杠，但在 Windows 上将它们转换为反斜杠），但从原生 Windows 到 POSIX 是通常是较大操作的一部分，例如构建 URL……在这种情况下，您可能希望使用更高级别的函数。

> 在文件中 - 我想要的结果是 C:\folder\folder

在这里，听起来您想去掉任何尾随反斜杠。再一次，这是一件奇怪的事情，你可能实际上想做一些比这更高级别的事情（比如`os.path.dirname`也许？），但很容易：`s.rstrip('\\')`.

当然，最后两个是相互矛盾的——如果你想要的结果是`C:\folder\folder`，并且你将反斜杠转换为正斜杠，你将不会得到你想要的结果。

但希望我已经给了你足够的东西来建造你真正想要的东西。

# javascript - Firebase Twitter 身份验证和 PhoneGap

> ID：15512529
> 
> 赞同：1
> 
> 时间：2013-03-19T23:34:24.423
> 
> 标签：javascript, android, jquery, web, firebase

所以伙计们，我正在使用 PhoneGap 技术制作一个应用程序，我发现自己遇到了一个问题：我正在使用 Firebase 从 twitter 进行身份验证，问题是当我按下“使用 Twitter 登录”按钮时它没有打开弹出窗口就像在计算机中一样，所以它什么也不做，这是我的代码

```
function Login(type)
{
    var count = 0;
    var fire = new Firebase("https://olimpo.firebaseio.com");
    fire.child('users').once('value', function(data){count = data.numChildren;});
    var auth = new FirebaseAuthClient(fire, function(error, user){
        if (error)
        {
            ShowMessage(error);
        }
        else if (user)
        {
            var usr = new Firebase("https://olimpo.firebaseio.com/users/twitter/"+user.id);
            usr.once('value', function(data){
                if (data.numChildren() > 0)
                {
                    usr.set({last_loggin: Date()});     
                }
                else
                {   
                    usr.set({name: user.displayName, username: user.username, timestamp: Date(), last_login: Date(), email: "none", password: "none"});
                }
                sessionStorage.setItem('user_id', user.id);
                sessionStorage.setItem('user_provider', type);
            });

            loadDashboard();
        }
    });
    if (self.location.href.split("#")[1] != "dashboard")
    {
        var remember = false;
        if ($("#saveSwitch").val() == "on")
        {
            remember = true;
        }
        auth.login('twitter', remember);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T07:21:10.887

Firebase 的工程师在这里。Firebase 简单登录目前不支持 PhoneGap 开箱即用的基于弹出式的身份验证方法，因为它是本地托管的性质和与弹出式窗口有关的非标准行为。但是，这是我们正在积极开展的工作，并希望在几周内得到全面支持。一旦我们在这个问题上取得进展，我会在这里跟进。谢谢！

**更新：**

Firebase 最近发布了许多更新，添加了对 Adob​​e PhoneGap / Apache Cordova 的全面支持，包括完全支持 Facebook、Twitter、GitHub 和电子邮件/密码身份验证方法的 Firebase 简单登录。

查看[https://www.firebase.com/blog/2013-04-16-firebase-adds-phonegap-cordova-support.html](https://www.firebase.com/blog/2013-04-16-firebase-adds-phonegap-cordova-support.html)上的博客文章了解更多信息！

# java - 如何从用户输入的编辑文本中获取信息并将其作为 TextView 移动到另一个活动

> ID：15512535
> 
> 赞同：0
> 
> 时间：2013-03-19T23:34:46.363
> 
> 标签：java, android

我需要获取用户在 EditText 中输入的信息，并通过将其放置在带有 TextView 的所有内容下来将其移动到另一个活动。我是新手，我相信这很简单。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T23:38:15.657

你不想做你说你想做的事，不完全是。您希望将信息从一个 Activity 传递到另一个，而不是实际视图。

在您启动新活动时：

```
String info = editText.getText().toString();
Intent intent = new Intent(this, MyNewActivity.class);
intent.putExtra("info_key", info);
startActivity(intent); 
```

然后，在您`onCreate()`的新活动中：

```
Intent intent = getIntent();
String info = intent.getStringExtra("info_key");
textView.setText(info); 
```

# haskell - 为什么要添加“Eq”类型约束而不使用“==”？

> ID：15512541
> 
> 赞同：16
> 
> 时间：2013-03-19T23:34:59.737
> 
> 标签：haskell

所以，我有一个非常简单的函数，它有两个参数：第一个是一小时（0 到 23 之间），第二个是一分钟（0 到 59 之间）。此函数返回小时加一分钟，并以漂亮的样式格式化小时。例如，`hour 11 12`返回`11 heures et 13 minutes`。抱歉，小时的法语格式。

所以，我在这个函数中使用了`show`函数，并且参数需要是一个数字，所以我有类型声明`(Num a, Show a) => a -> a -> String`。但是，当我尝试这个函数时，我得到了一个错误，GHC 告诉我添加`Eq`类型约束，但我不明白为什么`Eq`在这种情况下我需要类型约束。有代码（再次，对于函数中使用的法语文本感到抱歉，但我认为如果您不理解函数名称和文本，这并不是很重要）：

```
heure :: (Num a, Eq a, Show a) => a -> a -> String
heure 23 59 = "Minuit"
heure 12 m  = "Midi et " ++ show (m+1) ++ " minutes"
heure h 59  = show (h+1) ++ " heures"
heure h m   = show h ++ " heures et " ++ show (m+1) ++ " minutes" 
```

所以：如果我不使用`Eq`，我有一个错误，当我使用它时，我的代码是正确的。为什么？

谢谢你的解释！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-19T23:41:40.980

您需要`Eq`约束，因为您正在检查是否`h`等于`23`或`12`以及是否`m`等于`59`。您使用的是模式匹配，而不是`==`，但是仍然需要以这种方式对数字文字进行`Eq`模式匹配（与对构造函数的模式匹配不同）。

# r - 考虑基于均值和标准差的标准，找到将数据帧分为两组的最佳值的函数

> ID：15512543
> 
> 赞同：0
> 
> 时间：2013-03-19T23:35:22.883
> 
> 标签：r

我正在尝试将数据框分为两组。数据框的结构如下：

```
X=data.frame(x1=c(1,1,2,2,3,4,5,6,9,9,
    11,2,4,45,67,89,1,1,
    5,5,5,6,6,6,9,9,9,11,
    11,8,8,8,51,90,40,15,
    30,11,8,9,9,1,5,5,100,
    67,78,98,34,25,51,45)) 
```

为此，我想计算给定间隔内的最佳值。该值会将数据帧分为两组。第一组 G1 所有大于最优值的 x1 值，第二组 G2 所有小于或等于最优值的 x1 值。我正在考虑的标准是下一个：

```
mean.G1+mean.G2<=mean(Data$X) 
```

和

```
sd.G1+sd.G2<=sd(Data$X) 
```

我想在给定间隔内的迭代中提取最优值。例如间隔是从 10 到 100 然后我选择一个值`10`然后我正在寻找的函数必须使它

```
G1=data.frame(X[X$x1>10,]
G2=data.frame(X[X$x1<=10,] 
```

在此之后，我计算 G1 和 G2 的均值和标准差：

```
mean(G1$X.X.x1...10...)=48.45; sd(G1$X.X.x1...10...)=30.76306
mean(G2$X.X.x1....10...)=5.34375; sd(G2$X.X.x1....10...)=2.902828 
```

在我计算变量`x1`in 的均值和 sd 之后`X`：

```
mean(X$x1)=21.92308; sd(X$x1)=28.3921 
```

然后我继续比较和的均值和标准`x1`差。然后像and不小于或等于 mean(X$x1) 和 sd(X$x1)，函数必须用 11,12 等区间内的下一个值来证明。如果没有最佳显示任何消息。我一直在尝试，但我没有得到最佳结果。谢谢，我等着这很清楚。`mean(G1)+mean(G2)``sd(G1)+sd(G2)``mean(G1)+mean(G2)``sd(G1)+sd(G2)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T00:51:47.947

令 G 为整个群，G1 和 G2 为子群，|G| 设 G 的元素个数。

```
mean(G) = sum(G)/|G| 
        = sum(G1)/|G| + sum(G2)/|G|
        = sum(G1)/|G1| * |G1|/|G| + sum(G2)/|G2| * |G2| / |G|
        = mean(G1) * |G1|/|G| + mean(G2) * |G2| / |G|
        < mean(G1) + mean(G2) 
```

其中最后一行是因为 (1) G 的所有元素都是正数，因此均值 (G1) 和均值 (G2) 必然是正数，并且 (2) G1 中的元素比 G 少，同样也少G2 中的元素比 G 所以 |G1|/|G| < 1 和 |G2|/|G| < 1\. 因此，您的平均标准将永远不会得到满足。

# r - knitr中python块的根目录？

> ID：15512545
> 
> 赞同：4
> 
> 时间：2013-03-19T23:35:25.800
> 
> 标签：r, knitr

我希望这并不像感觉的那么简单。我有一个基本目录设置：

```
root --> Paper
     --> Code 
```

对于我正在写的一篇论文。我想从 Paper 目录中的 knitr 文档中调用 Code 目录中的 Python 脚本（类似[这样](https://github.com/yihui/knitr/issues/277)，但使用 Python 而不是 R）。所以它会是这样的：

Python 脚本 testit.py

```
## @knitr testit
import os
print os.getcwd() 
```

knitr文件test.Rnw保存在Code目录下：

```
\documentclass{article}
\begin{document}

<<setup,echo=FALSE>>=
read_chunk("testit.py")
@

<<testit,engine='python'>>=
@

\end{document} 
```

当我编译成 PDF 时，答案是正确的：

```
## /Users/blah/foo/bar/Code 
```

但是文件 test-2.Rnw 保存在 Paper 目录中：

```
\documentclass{article}
\begin{document}

<<setup,echo=FALSE>>=
opts_knit$set(root.dir="../Code/")
read_chunk("../Code/testit.py")
@

<<testit,engine='python'>>=
@

\end{document} 
```

输出：

```
## /Users/blah/foo/bar/Paper 
```

root.dir 在这里没有明显的效果，就像它对 R 块一样，我不知道还有什么可以尝试更改 Python 块的目录。这是一个问题，因为我希望python脚本对Code目录中的文件进行操作，但是它当然找不到它们。我可以在 python 脚本中对目录更改进行硬编码，但这似乎很脆弱。我什至很乐意将根目录作为脚本的参数直接传递给 python 解释器，这可能吗（但我不这么认为，因为 knitr 使用 python -c ？）。关于如何处理这个问题的任何想法？我的 google-fu 在这里让我失望了……

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T05:40:25.087

抱歉，我没有足够注意 . 以外的引擎的路径问题`R`。现在这个问题已经在 Github 上的[开发版中得到修复。](https://github.com/yihui/knitr#readme)

# javascript - 部署在我的服务器上时，Rails 时间总是落后一天

> ID：15512547
> 
> 赞同：1
> 
> 时间：2013-03-19T23:35:34.707
> 
> 标签：javascript, ruby-on-rails, ruby, ajax, date

我有一个日历，当用户点击一天时，我通过 ajax 将 javascript 时间变量传递给我的 rails 控制器。

这在本地工作正常，但是当部署在我的服务器上时，日期似乎比我单击的日期晚了一天。

当我最初使用日历加载页面时，它显示正确的日期并且我正在使用：`day = Time.now.to_date.to_s(:db)`

当用户点击日历中的某一天时，它会采用这个 js 语句：

```
start_date: Math.floor(new Date(date).getTime()/1000) 
```

这意味着：

```
1362549600 
```

并将其 ajaxilly 传递到此 rails 控制器方法中：

```
start_date = Time.at(params[:start_date].to_i).to_date.to_s(:db)
logger.info "start_date = #{start_date}"
logger.info "time = #{Time.at(params[:start_date].to_i).to_datetime.to_s(:db)}" 
```

记录器输出为：

```
start_date = 2013-03-05
time = 2013-03-05 22:00:00 
```

我在 config/application.rb 中设置了我的时区：

```
config.time_zone = 'Central Time (US & Canada)' 
```

对于如何解决这个问题，有任何的建议吗？我是否使用不正确的方式将日期从 js 传递到 rails？

**编辑**

顺便说一下，在我的 javascript 片段中，`date`最初是`Wed Feb 06 2013 00:00:00 GMT-0600 (CST)`

我刚刚检查的另一件事是我的服务器时间在 PDT 中，而我实际上坐在中央时间。

```
$ date
Tue Mar 19 16:51:52 PDT 2013 
```

我还看到，在本地运行我的应用程序时，我的记录器输出是：

```
start_date = 2013-03-06
time = 2013-03-06 00:00:00 
```

这就是昨天和今天的区别。我不确定我应该改变什么来解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T00:06:58.033

`Time.at`将使用服务器系统时间，ruby 中的所有日期和时间函数也是如此。

在数据库中存储日期（读取或写入）时，`config.time_zone`它实际上仅用于日期转换。有关更多信息，请参[见此答案](https://stackoverflow.com/a/5074193/10427)。

我认为，如果您`irb`在服务器上运行并尝试`Time.at(1362549600).utc_offset / 60 / 60`，您将不会获得 -6 小时的预期时区偏移，而是您似乎得到的 -2。

# go - Go中的死锁，两个例程拆分工作

> ID：15512549
> 
> 赞同：4
> 
> 时间：2013-03-19T23:35:37.937
> 
> 标签：go, deadlock, goroutine, channels

我在 go 中遇到了一个死锁问题。

该程序接受一个整数数组 a，并将其分成两部分。然后它将这两个部分放在两个不同的例程中并总结所有元素。在此之后，它应该在通道 res 中发送两个结果。然后应该将两个 res（现在是 ch）加在一起并打印。

我的问题：我试图通过大量移动关闭函数来解决死锁问题，但似乎没有任何帮助。显然，它只适用于一个例程 Add 运行。

```
package main

import (
    "fmt"
)

// Add adds the numbers in a and sends the result on res.
func Add(a []int, res chan<- int) {
    sum := 0
    for i := range a {
        sum = sum + a[i]
    }
    res <- sum
}

func main() {
    a := []int{1, 2, 3, 4, 5, 6, 7}

    n := len(a)
    ch := make(chan int)
    go Add(a[:n/2], ch)
    go Add(a[n/2:], ch)

    sum := 0
    for s := range ch {
        sum = sum + s
    }
    //close(ch)

    fmt.Println(sum)
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T23:51:02.610

您永远不会关闭频道，因此没有`range`退出信号。它会继续尝试接收，但没有任何东西可以发送。

您要么需要某种方式让您的`Add()`函数查看它何时结束，如果它是最后一个，以便它可以`close()`作为通道，或者您可以减少一个计数器而不是`range`在循环中使用，这样您就不需要使用`close()`.

```
func main() {
    a := []int{1, 2, 3, 4, 5, 6, 7}

    n := len(a)
    ch := make(chan int)
    go Add(a[:n/2], ch)
    go Add(a[n/2:], ch)

    sum := 0

    // counts the number of messages sent on the channel
    count := 0

    // run the loop while the count is less than the total number of routines
    for count < 2 {
        s := <-ch
        sum = sum + s
        count++  // Increment the count after a routine sends its value
    }
    fmt.Println(sum)
} 
```

***演示：*** [http ://play.golang.org/p/oHcrUStjmm](http://play.golang.org/p/oHcrUStjmm)

# java - 制作二十一点程序，无法从方法返回数组

> ID：15512550
> 
> 赞同：2
> 
> 时间：2013-03-19T23:35:50.317
> 
> 标签：java, arrays, return

代码：[https ://gist.github.com/anonymous/71d1baf86eb8354cfbfe](https://gist.github.com/anonymous/71d1baf86eb8354cfbfe)

当我运行它时，我遇到了这个问题：

```
 Exception in thread "main" java.lang.Error: Unresolved compilation problem: 
        This method must return a result of type int[]

        at NewBlackJack.genCards(NewBlackJack.java:25)
        at NewBlackJack.main(NewBlackJack.java:21) 
```

我无法弄清楚我的生活出了什么问题。我知道这与返回数组有关，并且我已经完成了研究，但我仍然需要帮助。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T23:39:58.783

只有在输入 if 语句时才返回

```
if (genWhat == 0){ 
```

当 genWhat != 0 你根本不返回任何东西。这就是它抱怨的原因。所以你需要在 if 语句之后添加一个 return 语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T23:51:43.933

根据您的代码，您似乎应该简单地删除 if 语句，因为您的代码将 0 传递给 genCards 您的方法应该这样编写：

```
public static int[] genCards(int genWhat)
    {
        Random r = new Random();
        /*if (genWhat == 0) remove this if statement
        { */
            int[] cards = {0,0,0,0,0,0}; 
            for (int i = 0; i < 4; i += 1)
            {
                cards[i] = 2 + r.nextInt(13);
                if (cards[i] > 11)
                {
                    cards[i] = 10;
                }
                if (cards[i] == 11)
                {
                    if (cards[i] < 2)
                    {
                        cards[5] += 1;
                    }
                    else
                    {
                        cards[6] += 1;
                    }
                }
            }
            System.out.println(cards);
            return cards;
        //}
    } 
```

# java - Guava 秒表类的优点是什么？

> ID：15512552
> 
> 赞同：2
> 
> 时间：2013-03-19T23:36:13.927
> 
> 标签：java, time, guava, stopwatch, nanotime

在 Google Guava 库中，有一个`Stopwatch`类，它的[文档](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/base/Stopwatch.html)说明了这一点 -

> 以纳秒为单位测量经过时间的对象。使用此类而不是直接调用来测量经过的时间很有用， `System.nanoTime()`原因如下：
> 
> 1.  出于测试或性能原因，可以替换一个备用时间源。
> 2.  正如 所记录的`nanoTime`，返回的值没有绝对意义，只能解释为相对于 nanoTime 在不同时间返回的另一个时间戳。`Stopwatch`是一种更有效的抽象，因为它只公开这些相对值，而不是绝对值。

问题 - 他们指的这个“备用时间源”是什么？JRE/JVM 是否也提供此选项？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T23:56:25.843

请参阅 Stopwatch(Ticker) 构造函数。提供您自己的 Ticker 可以让您生成一个可产生可预测结果的秒表以用于测试目的。

# java - 如何使用解析xml android

> ID：15512553
> 
> 赞同：0
> 
> 时间：2013-03-19T23:36:19.053
> 
> 标签：java, android, xml, parsing, dom

我要做的只是从 XML 文件中读取一行。除了空值，我似乎什么都得不到。我想直接从文档中读取会话 ID，而不需要创建大量代码。必须有一种超级简单的方法。

```
<loginResponse>
   <status message="Success" code="Success"/>
   <sessionid>d713868c-608b-440f-a708-5b7055e2e8d2</sessionid>
</loginResponse> 
```

```
 HttpResponse response = httpclient.execute(httppost);
            HttpEntity r_entity = response.getEntity();
            String xmlString = EntityUtils.toString(r_entity);
            DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
            DocumentBuilder db = factory.newDocumentBuilder();
            InputSource inStream = new InputSource();
            inStream.setCharacterStream(new StringReader(xmlString));
            Document doc = db.parse(inStream);

            doc.getDocumentElement().normalize();
            NodeList nodeLst = doc.getElementsByTagName("sessionid");
            Node node = nodeLst.item(0);
            String sessionID = node.getTextContent();

            mDbHelper.createAccount(userName, password, sessionID); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:43:13.830

最简单的方法是使用 Scanner 类。

```
Scanner scan = new Scanner(stream);
while (scan.hasNextLine()) {
    String line = scan.nextLine();
    if(line.startsWith("\t<sessionid>"))
    {
        System.out.println(line.substring("\t<sessionid>".length()));
    }
 } 
```

# sql - SQL Select 1 column From 2 Tables into 1个表

> ID：15512557
> 
> 赞同：-1
> 
> 时间：2013-03-19T23:36:43.133
> 
> 标签：sql

我有 2 张桌子

表 1

ID

1
2
3

表 2

```
level 
```

1
级 2
级 3 级

我需要

```
id | level 
```

1 | 1 级
2 | 2 级
3 | 3级

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T23:41:40.887

根据您提出问题的方式，第二张表不是必需的。您可以将这些值连接在一起：

```
select id, concat('level ', cast(id as varchar(255))) as level
from t 
```

在某些数据库中，您可能会使用`||`or`+`运算符而不是`concat()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T00:44:56.600

```
 select ID, [level] 
from tbl1 
cross join tbl2
where CHARINDEX(cast(id as varchar),[level],0) > 0 
```

# c# - c#.net MS Access 数据库未安装 Access

> ID：15512558
> 
> 赞同：0
> 
> 时间：2013-03-19T23:36:44.250
> 
> 标签：c#, ms-access, .net-4.0

是否可以？

我试过谷歌，但我一定是搜索错误的关键词而没有得到答案。

我有一个小型应用程序，仅由 2-3 个人使用，我想将数据存储在数据库中。我无法安装任何 SQL 服务器，因此我认为访问将是最佳选择。

将使用它的计算机也没有安装 Access。

我正在使用 VS2012 Express .net4.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:40:51.693

基本上，您需要的只是指向具有正确提供者的访问数据库的连接字符串。这可能对您有用，只需将数据库位置更改为 2-3 台计算机可以访问的共享位置：

```
var connection = new System.Data.OleDb.OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\BC207\test.accdb") 
```

# python - 在 python 中访问包含 matlab 类的 .mat 文件

> ID：15512560
> 
> 赞同：15
> 
> 时间：2013-03-19T23:37:06.513
> 
> 标签：python, matlab, class, mat-file

我有一个从 matlab 2012b 生成的 .mat 文件。它包含一个带有用户定义的 matlab 类的变量。

在 python 3.3 中使用 scipy.io.loadmat 加载文件时，我得到以下信息：

```
mat=scipy.io.loadmat('D:\test.mat')
mat
{'__header__': b'MATLAB 5.0 MAT-file, Platform: PCWIN64, Created on: Fri Feb 22 15:26:28 2013', '__function_workspace__': array([[ 0,  1, 73, ...,  0,  0,  0]], dtype=uint8), '__globals__': [], '__version__': '1.0', 'None': MatlabOpaque([ (b'futureDS', b'MCOS', b'cStream', [[3707764736], [2], [1], [1], [1], [1]])], 
      dtype=[('s0', 'O'), ('s1', 'O'), ('s2', 'O'), ('arr', 'O')])} 
```

我正在寻找访问类型为“cStream”的“futureDS”对象，但似乎无法使用 mat['None'] 访问。调用 mat['None'] 简单会导致：

```
MatlabOpaque([ (b'futureDS', b'MCOS', b'cStream', [[3707764736], [2], [1], [1], [1], [1]])], 
      dtype=[('s0', 'O'), ('s1', 'O'), ('s2', 'O'), ('arr', 'O')]) 
```

我被困在这里。我是 python 新手，并试图从 matlab 移植我的旧工作。任何帮助，将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-08-16T23:50:37.513

不幸的是，SciPy 不支持包含新样式类对象（用 定义的对象`classdef`）的 mat 文件，据我所知，任何第三方 mat 文件阅读器也不支持。返回的字典中的该`__function_workspace__`元素`mat`包含您以某种未记录且尚未逆向工程的方式所追求的信息。

最简单的解决方案是在将自定义类`struct`保存到磁盘之前，将它们转换为 Matlab 中的基本对象。这可以通过简单地调用来实现（尽管有警告）`struct(futureDS)`。它将所有公共和私有属性公开为普通字段，任何值得其盐的第三方阅读器都可以阅读。

（从技术上讲，Matlab 以 17 的 Matlab Array 类型 id 保存这些对象；[官方文档 (PDF)](http://www.mathworks.com/help/pdf_doc/matlab/matfile_format.pdf)仅列举了最多 15 个类型）。

# java - String#replace 在我的方法中不起作用

> ID：15512563
> 
> 赞同：0
> 
> 时间：2013-03-19T23:37:17.313
> 
> 标签：java, string, replace

`&amp;#8909;`当我得到一个包含一些诸如or之类的通配符的 HTML 文件`&amp;#92923;`时，我想用项目符号替换它们。所以我写了这个方法：

```
public String replaceAmps(String initial)
{
    // This list will contain all the &amps; to replace.
    ArrayList<String> amps = new ArrayList<String>();
    String res = initial;
    int index = initial.indexOf("&amp;");
    // Get all the indexes of &amp.
    while (index >= 0) 
    {
        StringBuilder stb = new StringBuilder("&amp;");
        // Create a String until the next ";", for example &amp;#1091;<- this one
        for(int i = index+5 ; initial.charAt(i) != ';' ; i++) stb.append(initial.charAt(i));
        stb.append(";");
        // Add the amp if needed in the list.
        if(!amps.contains(stb.toString())) amps.add(stb.toString());
        index = initial.indexOf("&amp;", index + 1);
    }
    // Replace the Strings from the list with a bullet.
    for(String s : amps) res.replace(s, "•");
    return res;
} 
```

我正确地获得了列表中的所有放大器，但更换不起作用。为什么？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T23:39:06.383

字符串是不可变的；该[`replace`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29)方法返回一个新`String`的作为替换的结果并且不修改`res`. 尝试

```
for(String s : amps) res = res.replace(s, "•"); 
```

# javascript - 是否有比 JSON/BSON 更精简的 Javascript 对象表示法格式？

> ID：15512566
> 
> 赞同：4
> 
> 时间：2013-03-19T23:37:34.260
> 
> 标签：javascript, json, bson

对于简单的 Javascript 对象树，是否有任何好的序列化/反序列化格式，其占用空间比 JSON 小得多？BSON不是很令人印象深刻。

JSON 中的冗余开销对于许多对象共享同一组属性的树来说尤其重要。理论上，应该可以检测对象数组中的模式，从而不重复属性名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T08:50:26.810

您可以将 JSON 转换为更多的“数据库”格式，然后将其转换回常规对象。结果有时是值得的。

```
// Typed on the fly
var dict = [
  ["FirstName", "LastName"],
  ["Ken",       "Starr"],
  ["Kermit",    "Frog"]
]; 
```

然后你可以循环字典，像这样：

```
// Again, typed on the fly
var headers = dict[0];
var result = []
var o;
for (var i = 0 + 1; i < dict.length; i++) {
  o = {}
  for (j = 0; j < headers.length; j++) {
    o[headers[j]] = dict[i][j];
  }
  result.push(o);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T15:18:14.550

Gzip 速度很快。*非常快。*而且我非常有信心，它是精益物体运输的最佳（就实用性和效率而言）解决方案。

为了说明这一点，我在我的一个临时站点上构建了一个快速示例。

[http://staging.svidgen.com/ajax/test-a.js](http://staging.svidgen.com/ajax/test-a.js)生成 5k 行简单数据并输出原始的、未受污染的 JSON。

```
$data = array();
for ($i = 0; $i < 5000; $i++) {
    $data[] = array(
        'value-a' => $i,
        'value-b' => pow($i,2),
        'value-c' => pow($i,3)
    );
}

print json_encode($data); 
```

压缩后的响应为**65KB** ，请求、构建、序列化和传输大约需要**357 毫秒。**从等式中省略客户端大小的解析，这是182KB **/s的***吞吐量*。考虑到传输的**274KB**原始数据，这是**767KB/s的***有效*吞吐量。响应如下所示：

 *******```
[{"value-a":0,"value-b":0,"value-c":0},{"value-a":1,"value-b":1,"value-c":1} /* etc. */] 
```

另一种格式[http://staging.svidgen.com/ajax/test-b.js](http://staging.svidgen.com/ajax/test-b.js)生成相同的 5k 行简单数据，但将数据重组为更高效的索引 JSON 序列化。

```
$data = array();
for ($i = 0; $i < 5000; $i++) {
    $data[] = array(
        'value-a' => $i,
        'value-b' => pow($i,2),
        'value-c' => pow($i,3)
    );
}

$out_index = array();
$out = array();

foreach ($data as $row) {
    $new_row = array();
    foreach ($row as $k => $v) {
        if (!isset($out_index[$k])) {
            $out_index[$k] = sizeof($out_index);
        }
        $new_row[$out_index[$k]] = $v;
    }
    $out[] = $new_row;
}

print json_encode(array(
    'index' => $out_index,
    'rows' => $out
)); 
```

压缩后的响应为**59.4KB**，请求、构建、序列化和传输大约需要**515 毫秒。**从等式中省略客户端大小解析，*吞吐量*为**115KB/s**。考虑到传输的**128KB**原始数据，这是**248KB/s的***有效*吞吐量。响应如下所示：

 **```
{"index":{"value-a":0,"value-b":1,"value-c":2},"rows":[[0,0,0],[1,1,1] /* etc. */ ]} 
```

因此，在我们相当简单的示例中，重组后的原始数据比原始原始数据小 50% 以上。但是，压缩后它只小了 9%。在这种情况下，成本是总请求时间增加了 44%。

如果您编写了一个二进制库来重构数据，我希望您可以显着减少 44%。但是，它仍然不太可能值得。您需要它来序列化数据，而不需要比“正常”编码结构多 9% 的时间才能看到任何收益。

避免重组或“替代序列化”命中的唯一方法是从头到尾以笨拙的索引方式在服务器端处理所有对象。而且，除非你真的迫于压力从硬件中获得每一个可忽略不计的性能，否则这真的只是一个糟糕的主意。

在这两种情况下，gzip 节省的空间远远超出了我们使用另一种 JavaScript 可兼容格式所能达到的效果。

（而且我们甚至没有考虑客户端大小的解析——这对于任何不是“正常”JSON 或 XML 的东西都*非常重要。）*

## 综上所述

只需使用内置的序列化库和 gzip。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T14:14:00.297

1.  有非常快速的压缩库。因此，并不是说紧凑格式比不太紧凑的格式加压缩更好。

    我手头没有链接，但我认为一位前 protobuf 设计师推荐了这种方法。

2.  查看[MessagePack](http://msgpack.org)。这是一种相当紧凑的二进制格式，其语义与 JSON 或 BSON 非常相似。

    短数组（最多 16 个元素）、映射（最多 16 对）和字符串（最多 32 个字节）具有单字节开销。小整数（-32 到 128）总共只占用一个字节。*********

# java - 将 PDF 从 servlet 转换为旧版本？

> ID：15512572
> 
> 赞同：1
> 
> 时间：2013-03-19T23:37:53.860
> 
> 标签：java, pdf, converter

希望有一个开源或合理的商业许可产品，可以从 Redhat 5.x Linux 环境的 JBoss AS5 上运行的 Java Servlet 使用，将 PDF 从 1.5 版本转换为 1.4 版本。

或者我可以用来修改 PDF 1.5 内容以移回 1.4 兼容格式的任何技巧。真的什么都有。

我有一个 PDF 作为对 servlet 的响应要返回。但它是 1.5 格式的，这不会在我们客户的某些 adobe5 旧版本中显示。但它确实显示在 1.4 中，所以如果可能的话，我需要一种方法来转换它。

还有其他解决方法吗？想法？我全是耳朵！

让我知道你是否可以帮助我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:41:46.363

如果问题实际上不是（仅）*文档声明的版本号，*而是自 PDF 1.5（因此，自 Adob​​e Reader 6 以来）允许的根本改变的*文档文件结构*--- 即交叉引用流（而不是交叉引用表）和对象流 --- 以下使用 iText 库的代码可能会对您有所帮助：

```
PdfReader reader = new PdfReader(SOURCE);
PdfStamper stamper = new PdfStamper(reader, new FileOutputStream(TARGET), '4');
stamper.close(); 
```

这实际上解析了原始 PDF 文件并从解析的 PDF 对象创建一个新的 PDF 文件。但是，默认情况下，iText 不**使用**交叉引用或对象流。因此，新的 PDF 文件不包含任何内容。

指示 iText在`'4'`目标文件的标题中声明版本 1.4。

根据 PDF 大小和可用资源，您可能希望使用不同的`PdfReader`构造函数，而不是一次将所有源 PDF 读取到内存中，而是仅在需要时才读取。

PS：我使用当前的 iText 5.4.x 版本。iText 可以根据 AGPL 的条件免费获得，也可以通过商业方式获得。

PPS：如果您想强制 iText 使用交叉引用和对象流，则必须`stamper.setFullCompression()`在构造后调用`stamper`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T16:53:12.020

无法修改标题 pdf 版本，因为您还可以在文档目录中找到覆盖的版本信息

引用自[pdf 文件格式规范](http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/devnet/pdf/pdfs/PDF32000_2008.pdf)

> PDF 文件第一行的标题指定 PDF 版本（参见 7.5.2，“文件标题”）。从 PDF 1.4 开始，还可以在文档目录的版本条目中指定 PDF 版本，本质上是通过覆盖文件标题中指定的版本来更新与文件关联的版本（参见 7.7.2，“文档目录”）。如以下段落所述，合格产品在打开或保存文档时的行为取决于将 PDF 文件的版本与合格产品支持的 PDF 版本进行比较。

# ruby-on-rails - 当用户单击时，我的 link_to image_tag 没有做任何事情

> ID：15512573
> 
> 赞同：0
> 
> 时间：2013-03-19T23:37:57.267
> 
> 标签：ruby-on-rails, haml

Rails 初学者在这里。

使用以下 link_to image_tag 尝试并允许人们单击我网站上的徽标，并让他们定向到特定页面。

```
.content
  - current_user.users_coupons.each do |uc|
    .logo
          = link_to image_tag(uc.coupon.drug.logo.list_item), uc.coupon, remote:true 
```

当您将鼠标悬停在我的网站上时，图像会显示正确的链接，但是当您实际单击时，什么也没有发生 - 它实际上并没有将您带到它显示的 URL。是什么赋予了？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T23:59:34.113

你确定什么都没有发生吗？如果您查看 Chrome 开发工具或 Firebug 上的“网络”选项卡，我敢打赌正在发出请求，但返回 500 错误。

将单击作为 ajax 请求添加`remote:true`到流程中，因此除非您指定 ajax:success 回调事件，否则似乎不会发生任何事情。`link_to`实际发生的是您正在对目标控制器操作执行 GET js。

# php - 提交时提交 AJAX

> ID：15512576
> 
> 赞同：0
> 
> 时间：2013-03-19T23:38:20.587
> 
> 标签：php, jquery, ajax

我的comment.php有这个：

```
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>  
<script type="text/javascript">   
$(function() {    
 $('#reset_form').click(function() {
     $('#name,#comment').val('');
 });
 $('#submit').click(function() {

var name = $('#name').val();
var comment = $('#comment').val();

$.ajax({
    url: '../forms/comment_ajax.php?id=<?php echo $_GET['id']; ?>',
    data: { form_name: name, form_comment: comment },
    success: function(data) {
        $('#new_comment').append(data);

        $(document).trigger('close.facebox');

        $('#new_comment').effect("bounce", { direction:'down', times:5 }, 300);        
        $('html,body').animate({scrollTop:0}, 2000, "easeOutQuart");
        return false;
    }
});
});
});

</script>

Name: <br />
<input type="text" id="name" class="userpass" maxlength="15"/><br /><br />

Comment: <br />
<textarea id="comment" rows="6" cols="75"></textarea><br /><br />

<input type="submit" name="submit class="button" value="Comment" />
<input type="reset" name="submit" value="Reset"/> 
```

然后这是我的 AJAX：

```
<?php
require_once('../blog/inc/config.php');

    $form_name = $_GET['form_name'];
    $form_comment = htmlspecialchars($_GET['form_comment']);
    $date = date('M jS Y | g:i a T');
    $ip = $_SERVER['REMOTE_ADDR'];

     if($form_name == '') {
        echo("<div class='alert alert-error-x'>Don't forget to enter your name, as we need to identify who's commenting on this article!</div>");

    } else if($form_comment == '') {
        echo("<div class='alert alert-error-x'>Please do not leave the comment field blank, we want to know what you're saying!</div>");

    } else {
mysql_query("INSERT INTO comment (id, articleid, name, comment, date, ip) VALUES (NULL,'{$_GET['id']}','{$form_name}','{$form_comment}','{$date}','{$ip}')");

        // output comment
        echo "
  <div class='article-body-new'>
  <div class='user'><b>$form_name</b> <span>says:</span></div> 
  <div class='comments'>
  $form_comment <br /><p></p><br />

  <p style='font-size:12px;'>Posted on <b><font size='0.8em'>$date</font></b></p>
  </div>
  </div>";
    }
?> 
```

我在 facebox js 上工作，这就是它的样子：[http ://screencloud.net/v/m9jR](http://screencloud.net/v/m9jR)

但是，一旦您尝试发布，它就不会发布内容。我一直点击“评论”，但它不会执行。

我的完整 article.php 页面在这里： http: [//pastebin.com/DCHGR1Ly](http://pastebin.com/DCHGR1Ly)

你们会碰巧知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T23:44:37.897

首先不要在success方法中返回false。它不会做任何有用的事情。

其次在点击事件上添加一个 e.preventDefault() 。该方法调用不会触发事件的默认操作。

```
$('#submit').click(function(e) {
  e.preventDefault();
  ... 
```

**编辑**

我还注意到 JavaScript 可能在 DOM 准备好之前执行。请将所有 JS 移到`</body>`. 并考虑使用类似`$(document).ready(function () {...`.

# html - Web 应用程序的 HTML5 部分和文章布局

> ID：15512577
> 
> 赞同：3
> 
> 时间：2013-03-19T23:38:23.357
> 
> 标签：html, article

我知道这是当今 Web 开发人员和设计师之间的一个常见问题，“我什么时候使用部分或文章元素？” 我已经对每个语义含义进行了相当多的研究，但我想从堆栈用户那里得到一些反馈。

目前我正在开发一个 HTML5 Web 应用程序，各种仪表板。仪表板中的每个通道都包含与该类别相关的小部件。每个小部件彼此独立。该应用程序还包含与主要内容相关的用户设置区域（侧边栏）。为了创建最语义化的标记，我想到了以下结构：

```
<body>
  <section class="channel">
    <header>
      <h1>Travel</h1>
      <nav>
        <button>Add widget</button>
        <button>Edit</button>
        <button>Share</button>
      </nav>
    </header>
    <article class="widget">
      <header>
        <h1>Expedia</h1>
        <nav>
          <button>Move up</button>
          <button>Move down</button>
          <button>Settings</button>
        </nav>
        <!-- Widget content (lists, paragraphs, etc) -->
      </header>
      <footer>
         <time>(Time and date of last widget update)</time>
      </footer>
    </article>

    <article class="widget">
      <header>
        <h1>Kayak</h1>
        <nav>
          <button>Move up</button>
          <button>Move down</button>
          <button>Settings</button>
        </nav>
        <!-- Widget content (lists, paragraphs, etc) -->
      </header>
      <footer>
         <time>(Time and date of last widget update)</time>
      </footer>
    </article>
  </section>

  <section class="channel">
    <header>
      <h1>Shopping</h1>
      <nav>
        <button>Add widget</button>
        <button>Edit</button>
        <button>Share</button>
      </nav>
    </header>
    <article class="widget">
      <header>
        <h1>Craigslist</h1>
        <nav>
          <button>Move up</button>
          <button>Move down</button>
          <button>Settings</button>
        </nav>
        <!-- Widget content (lists, paragraphs, etc) -->
      </header>
      <footer>
         <time>(Time and date of last widget update)</time>
      </footer>
    </article>

    <article class="widget">
      <header>
        <h1>eBay</h1>
        <nav>
          <button>Move up</button>
          <button>Move down</button>
          <button>Settings</button>
        </nav>
        <!-- Widget content (lists, paragraphs, etc) -->
      </header>
      <footer>
         <time>(Time and date of last widget update)</time>
      </footer>
    </article>
  </section>

  <aside id="sidebar">
    <h1>App Name</h1>
    <div>
      <!-- Clock element -->
    </div>
    <!-- Username and profile pic -->
    <ul>
      <!-- List of settings actions/buttons -->
    <ul>
    <footer>
      <p>Copyright...</p>
    </footer>
  </aside>

</body> 
```

想法？建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T08:53:47.320

An`article`本身应该是有意义的，即它的标题和内容不应该需要支持内容才能被理解。文章可以嵌套在更多文章或部分中。

A`section`可以在 an 中使用，也可以`article`嵌套在 another 中`section`，您不应该将 section 用作样式的钩子。因此，根据经验，如果您没有其中的标题元素，请使用 div 代替。即使您不需要在设计中看到标题，您仍然可以出于语义目的提供一个标题但将其隐藏。

关于这个主题，我最喜欢的两个书签是：

[HTML5 医生](http://html5doctor.com/avoiding-common-html5-mistakes/)

[布鲁斯劳森（个人博客）](http://www.brucelawson.co.uk/2010/html5-articles-and-sections-whats-the-difference/)为上述内容写作。

# perl - 为什么会出现“未初始化值”的警告？

> ID：15512585
> 
> 赞同：1
> 
> 时间：2013-03-19T23:38:56.853
> 
> 标签：perl

以下脚本用于学习 Perl 的练习 4.6.4。“反向列表”被要求在不使用的情况下打印出来`reverse`。

虽然输出是问题所要求的，但我在输入和输出之间收到警告，上面写着“ `Use of unitialized value in print at line 18, <> line 4`”。我以为我已经在`line 10`. 为什么我仍然收到警告？

```
1      #!/usr/bin/perl
2      #exercise4_6_4
3      use warnings;
4      use strict;
5
6      print "Type in your list: \n";
7      my $input =<>;
8      chomp $input;
9      my $i=0;
10     my @array;
11     while ($input ne "") {
12        $array[$i] = $input;
13        $input =<>;
14        chomp $input;
15        $i++;
16        };
17     while ($i !=0) {
18        print $array[$i],"\n";
19        $i--;
20        };
21     print "$array[$i]"; 
```

运行脚本显示以下内容：

```
Type in your list:
child
books
flight

Use of uninitialized value in print at exercise4_6_4.pl line 18, <> line 4.

flight
books
child 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T23:43:43.880

因为您`$i++`在第 15 行的最后一个递增 $i，循环结束，然后第 18 行尝试获取`$array[$i]`，但您没有在 $array[$i] 中存储任何内容。

您可以在第 16 行和第 17 行之间添加一个`$i-- if $i > 0`来解决问题。

对于它的价值，您可以使用 push 和 pop 而不必担心增加计数器

```
use strict;
use warnings;

print "Type in your list: \n";
my @input;
push @input,$_ while defined($_ = <>) && $_ ne "\n";
print pop @input while @input; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T23:43:43.300

您可能只需要将第 18 行替换为以下行：

`print $array[$i-1], "\n";`

数组有其局限性。:)

# ruby-on-rails - 资源的索引路由是 POST

> ID：15512588
> 
> 赞同：0
> 
> 时间：2013-03-19T23:39:07.680
> 
> 标签：ruby-on-rails

我的 Rails 应用程序中有一个游戏模型。在路由文件中，我为它创建了一个资源路由

```
resource :games,  defaults: {format: :json} 
```

但是，当我使用 Backbone 向 url: 'games' 发出 ajax 请求时，出现 404 错误。运行`rake routes`显示“游戏”是一个 POST 请求，并且链接到游戏控制器的创建操作，这显然不是它应该是的（请参阅下面我的问题资源的 rake 路由）。

我还在下面包含了我的游戏模型代码。

谁能解释我做错了什么？

耙路线 Game.rb

```
 games POST   /games(.:format)                 games#create {:format=>:json}
 new_games GET    /games/new(.:format)         games#new {:format=>:json}
 edit_games GET    /games/edit(.:format)       games#edit {:format=>:json}
 GET    /games(.:format)                       games#show {:format=>:json}
 PUT    /games(.:format)                       games#update {:format=>:json}
 DELETE /games(.:format)                       games#destroy {:format=>:json} 
```

相比之下，这里是 Question 模型的路线

```
questions GET    /questions(.:format)                  questions#index
          POST   /questions(.:format)                  questions#create
new_question GET    /questions/new(.:format)           questions#new
edit_question GET    /questions/:id/edit(.:format)     questions#edit
question GET    /questions/:id(.:format)               questions#show
         PUT    /questions/:id(.:format)               questions#update
         DELETE /questions/:id(.:format)               questions#destroy 
```

游戏模型

```
class Game < ActiveRecord::Base
  attr_accessible :creator_id, :name

  has_many :results 
  has_many :users, :through => :results

  has_reputation :votes, source: :user, aggregated_by: :sum #for Active_record_reputation gem

  class << self    
    def win?(chars_left, incorrect_guesses)
      chars_left == 0 and incorrect_guesses < 6
    end

    def correct_response?(correctanswer, guess)
        correctanswer == guess
    end 

    def correct_guess?(char_clicked, final_word)

      puts char_clicked
      puts final_word =~ /#{char_clicked}/i
      if final_word =~ /#{char_clicked}/i 
        true
      else
        false
      end 

    end

  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T23:46:04.913

Using`resource :games`不会给你一个`index`路线，因为它是一个单一的资源，你需要把它改成`resources :games`，[看看这里](http://guides.rubyonrails.org/routing.html#singular-resources)。

# azure - 使用 Unity IOC 解决 Windows Azure 云服务的依赖关系时，构造函数出现 NullReferenceException

> ID：15512597
> 
> 赞同：0
> 
> 时间：2013-03-19T23:40:09.430
> 
> 标签：azure, unity-container, ioc-container, azureservicebus

我有一个具有 Web 和辅助角色的 Windows Azure 云服务。这两个角色都使用组合根中的 Unity 容器来注册类型（截至本文的最新 nuget pkgs）。

所有这些代码在调试时在 Azure 模拟器中运行时运行良好，但是，当我创建包并部署云服务时，我在角色运行时立即遇到此错误（当我点击页面取决于所讨论的类型，而工作人员角色将在运行时立即点击它）。

我得到一个 NullReferenceException 如下：

```
[ResolutionFailedException: Resolution of the dependency failed, type = "MyApp.Mvc.Controllers.HomeController", name = "(none)".
Exception occurred while: Calling constructor MyApp.Azure.Messaging.ServiceBusMessagingClient(System.String serviceBusConnectionString).
Exception is: NullReferenceException - Object reference not set to an instance of an object. 
```

这是我的类型的 ctor 中的代码，它是 Azure 服务总线的包装器客户端：

```
public ServiceBusMessagingClient(string serviceBusConnectionString)
    {
        Guard.NotNullOrEmpty(() => serviceBusConnectionString, serviceBusConnectionString);

        _log = LogFactory.GetCurrentClassLogger();

        ConnectionString = serviceBusConnectionString;

        _msgFactory = MessagingFactory.CreateFromConnectionString(ConnectionString);
        _retryPolicy = new RetryPolicy<ServiceBusTransientErrorDetectionStrategy>(RetryStrategy.DefaultClientRetryCount);
        _clients = new Dictionary<string, QueueClient>();
    } 
```

这是我的引导程序的代码，在 web app_start 或工作角色的 OnStart 中调用：

```
var sbConn = CloudConfigurationManager.GetSetting(Constants.KeyServiceBusConnectionString);
container.RegisterType<IMessagingClient, ServiceBusMessagingClient>(new InjectionConstructor(sbConn)); 
```

谁能告诉我为什么我会遇到这样的异常？我在 ctor 代码中看不到任何可能产生空引用的内容。而且我不明白为什么它在模拟器中有效，但在云部署中无效。我已经验证了云设置以确保我的连接字符串在那里。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:03:09.537

好的...我在创建 System.Reflection.StackFrame 时发现了一些从 DEBUB 到 RELEASE 的模糊行为变化。

我的`LogFactory.GetCurrentClassLogger()`方法执行以下代码：

```
StackFrame frame = new StackFrame(1, false); 
```

显然，当在 RELEASE 构建中时，这将产生一个 null for 堆栈`frame.GetMethod().DeclaringType`。

因此解决方案是检查 null 并使用静态字符串作为记录器名称，如果为 null。每天学习一些东西。希望这可以帮助某人。

# php - 当浏览器不允许JavaScript时如何在提交后重定向

> ID：15512599
> 
> 赞同：0
> 
> 时间：2013-03-19T23:40:22.250
> 
> 标签：php, javascript, jquery, browser, exception-handling

当 JavaScript 被禁用时，我的表单出现问题：

*   表单从页面 index.php 提交
*   收件人收到的表格
*   挂在 include.emailSender.php

返回原始页面我缺少什么？从网页到流程表单的代码：

```
<?php include_once('includes/include.contactForm.php'); ?> 
```

include.emailSender.php 文件：

```
<?php

$contactformRecipient = 'a@b.org';

$contactformTitle = 'Contact from ...';

if($_POST) {
    $contactName = addslashes( $_POST['contactName'] );
    $contactEmail = addslashes( $_POST['contactEmail'] );
    $contactPhone = addslashes( $_POST['contactPhone'] );
    $contactMessage = addslashes( $_POST['contactMessage'] );

    $message = '';
    $message .= 'Name:  ' . $contactName . '<br />';
    $message .= 'Email:  ' . $contactEmail . '<br />';
    $message .= 'Phone:  ' . $contactPhone . '<br />';
    $message .= 'Message:  ' . $contactMessage . '<br />';

    // Email Headers
    $headers = "From: " . $contactEmail . "\r\n";
    $headers .= "Reply-To: ". $contactEmail . "\r\n";
    $headers .= "MIME-Version: 1.0\r\n";
    $headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";

    // send mail
    // mail( to, subject, message, headers, parameters)
    mail( $contactformRecipient, $contactformTitle, $message, $headers );
}

?> 
```

include.contactForm.php 文件：

```
<?php 
$randomNumber1 = rand(1, 12);
$randomNumber2 = rand(1, 12);

$contactCaptchaAnswer = $randomNumber1 + $randomNumber2;
?>
            <div id="contact-warning">
            </div><!-- // #contact-warning -->

            <div id="contact-success">
                Email successfuly sent, thank you.<br />    
            </div><!-- // #contact-warning -->

            <form name="contactForm" id="contactForm" method="post" action="includes/include.emailSender.php">
                <fieldset>

                    <label for="contactName">Your Full Name <span class="required">*</span></label>
                    <input name="contactName" type="text" id="contactName" size="60" value="" />

                    <br />
                    <label for="contactEmail">Email Address <span class="required">*</span></label>
                    <input name="contactEmail" type="text" id="contactEmail" size="60" value="" />

                    <br />
                    <label for="contactPhone">Phone <span class="required">*</span></label>
                    <input name="contactPhone" type="text" id="contactPhone" size="60" value="" />
                    <br />
                    <label for="contactMessage">Message <span class="required">*</span></label>
                    <textarea name="contactMessage" id="contactMessage" rows="6" cols="7"></textarea>

                    <br />
                    <label for="contactCaptcha"><strong><?php echo $randomNumber1; ?></strong> + <strong><?php echo $randomNumber2; ?></strong> = <span class="required">*</span></label>
                    <input name="contactCaptcha" type="text" id="contactCaptcha" size="30" value="" />

                    <input name="contactCaptchaAnswer" type="hidden" id="contactCaptchaAnswer" value="<?php echo $contactCaptchaAnswer; ?>" />

                    <br />
                    <label class="placeholder">&nbsp;</label>
                    <button class="submit">Submit</button>
                </fieldset>
            </form> 
```

jQuery 文件：

```
 var isEmail_re       = /^\s*[\w\-\+_]+(\.[\w\-\+_]+)*\@[\w\-\+_]+\.[\w\-\+_]+(\.[\w\-\+_]+)*\s*$/;

function isEmail (s) {
return String(s).search (isEmail_re) != -1;
}

$(document).ready(function(){

// Smooth scrolling to internal anchors
$('a[href*=#]:not([href=#])').click(function() {
    if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') 
        || location.hostname == this.hostname) {

        var target = $(this.hash);
        target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
           if (target.length) {
             $('html,body').animate({
                 scrollTop: target.offset().top
            }, 600);
            return false;
        }
    }
});

// ScrollSpy automatically updates nav targets based on scroll position
// http://twitter.github.com/bootstrap/javascript.html#scrollspy
$('#nav').scrollspy();

selectnav('nav');

// Handle Contact Form Submission
$('form#contactForm button.submit').click(function() {
    var contactName = $('form#contactForm input#contactName').val();
    var contactEmail = $('form#contactForm input#contactEmail').val();
    var contactPhone = $('form#contactForm input#contactPhone').val();
    var contactMessage = $('form#contactForm #contactMessage').val();
    var contactCaptcha = $('form#contactForm input#contactCaptcha').val();
    var contactCaptchaAnswer = $('form#contactForm input#contactCaptchaAnswer').val();

    var dataString = 'contactName=' + contactName + '&contactEmail=' + contactEmail +      '&contactPhone=' + contactPhone + '&contactMessage=' + contactMessage;       
    var contactError = '';

    // Check name
    if( contactName == '' ) {
        contactError += 'Please enter your name<br />';
    }

    // Check e-mail
    if ( contactEmail == '') {
        contactError += 'Please enter your e-mail<br />';
    } else if ( isEmail(contactEmail) !== true ) {
        contactError += 'Please enter a valid e-mail address<br />';
    }
    if( contactPhone == '' ) {
        contactError += 'Please enter your phone number<br />';
    }

    if( contactMessage == '' ) {
        contactError += 'Please enter your message<br />';
    }

    if ( contactCaptcha !== contactCaptchaAnswer ) {
        contactError += 'Please enter the correct validation value <br />';
    }

    if ( contactError == '' ) {
        $.ajax({
            type: "POST",
            url: "includes/include.emailSender.php",
            data: dataString,
            success: function() {
                $('#contact-success').fadeIn();
                $('form#contactForm').fadeOut();
                $('#contact-warning').hide();
            }
        });
    } else {
        $('#contact-warning').html(contactError);
        $('#contact-warning').fadeIn();
    }

    return false;

});
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T23:53:47.183

现在我没有阅读你所有的代码，而是我想给你一些关于何时使用 AJAX:ing 表单或其他东西的提示。

与其先构建表单的 JavaScript + AJAX 版本，不如从纯版本*开始*。可以在全球所有类型设备上的浏览器中运行的版本。

完成后，您*就*可以使用该表格。使用 jQuery 和 jQuery 表单插件 ( [http://www.malsup.com/jquery/form/](http://www.malsup.com/jquery/form/) ) 再简单不过了。假设您已经设置了表单：

```
<form method="post" action="some-action.php" id="my-form">
    <p><label>Some field<br><input type="text" name="foo"></label></p>
    <p><input type="hidden" name="bar" value="1"><input type="submit" value="Go"></p>
</form> 
```

并且您已经确保`some-action.php`正确处理表单提交（没有 AJAX）然后简单地：

```
$('#my-form').ajaxForm(function (data) {
    alert(data); // data returned by some-action.php
}); 
```

`some-action.php`现在，如果您想根据是否是 AJAX 调用来做不同的事情（例如，您可能希望重定向回非 AJAX 调用的上一页），您可以简单地检查`$_SERVER['HTTP_X_REQUESTED_WITH']`，我通常会这样做（您保留常量的地方） ：

```
define('XHR', (
    isset($_SERVER['HTTP_X_REQUESTED_WITH']) and 
    strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest'
)); 
```

然后稍后在`some-action.php`：

```
if (XHR) {
    die(json_encode(array('success' => true)));
}
else {
    header('Location: ' . $_SERVER['http_referer']);
} 
```

所谓的渐进增强（最纯版本优先）优于优雅降级（最高级版本优先）的好处与移动优先设计的好处相同。它们都在其他地方得到更好的解释，比如 Brad Frost 的博客：[http ://bradfrostweb.com/blog/web/mobile-first-responsive-web-design/](http://bradfrostweb.com/blog/web/mobile-first-responsive-web-design/)

# regex - perl 匹配可选的正则表达式

> ID：15512601
> 
> 赞同：0
> 
> 时间：2013-03-19T23:40:37.530
> 
> 标签：regex, perl

我正在努力在 Perl 中使用正则表达式来匹配带有可选前缀和后缀的字符串。

到目前为止，这是我的表达：

```
my $string = "prefix1_foo_suffix2";
if ($string =~ m/^(prefix1_|prefix2_)?(prefix3_|prefix4_)?foo|bar(_suffix1|_suffix2)?$/) {
  print "match"
}; 
```

所以这应该匹配像这样的字符串

```
prefix1_foo_suffix2
prefix1_prefix4_bar
bar_suffix2 
```

但不是

```
prefix1_baz_suffix2
bar_suffix42 
```

不过，据我所知，这匹配任何后缀（即：“foo”或“bar”之后的任何内容）。关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T23:55:56.483

您的正则表达式存在优先级问题。此外，对于非捕获组，您应该使用`(?:group)`.

这是你写的：

```
m/  (?: ^ (?: prefix1_ | prefix2_ )? (?: prefix3_ | prefix4_ )? foo )
  | (?: bar (?: _suffix1 | _suffix2 )? $ )
/x 
```

但你的意思是：

```
m/  \A
    (?: prefix1_ | prefix2_ )?
    (?: prefix3_ | prefix4_ )?
    (?: foo      | bar      )
    (?: _suffix1 | _suffix2 )?
    \z
/x 
```

快速测试：

```
my $regex = qr/
    \A
    (?: prefix1_ | prefix2_ )?
    (?: prefix3_ | prefix4_ )?
    (?: foo      | bar      )
    (?: _suffix1 | _suffix2 )?
    \z
/x;
say "$_:\t", ($_ =~ $regex ? "passes" : "doesn't match") for
  qw/prefix1_foo_suffix2
     prefix1_prefix4_bar
     bar_suffix2
     prefix1_baz_suffix2
     bar_suffix42
  /; 
```

输出：

```
prefix1_foo_suffix2:    passes
prefix1_prefix4_bar:    passes
bar_suffix2:            passes
prefix1_baz_suffix2:    doesn't match
bar_suffix42:           doesn't match 
```

# java - 在 selenium ghost 驱动程序中嵌入用于解析和单击网页的 javascript

> ID：15512605
> 
> 赞同：0
> 
> 时间：2013-03-19T23:40:51.633
> 
> 标签：java, javascript, selenium-webdriver, phantomjs, ghostdriver

我正在尝试使用 Ghost 驱动程序解析 Google 搜索结果页面，为此我需要解析第二个搜索结果页面。因此，使用 Java 脚本，我试图浏览搜索结果页面的源代码（html）并通过单击（使用 Ghost 驱动程序）下面的页码进行导航。然后它抛出以下异常。

```
import java.util.List;

import org.openqa.selenium.By;
import org.openqa.selenium.JavascriptExecutor;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.htmlunit.HtmlUnitDriver;

driver = new HtmlUnitDriver();

    JavascriptExecutor jse = (JavascriptExecutor)driver;
    jse.executeScript("document.querySelectorAll('#foot span div table tbody tr td a')[2].click();");

Exception in thread "main" java.lang.UnsupportedOperationException: Javascript is not enabled for this HtmlUnitDriver instance
    at org.openqa.selenium.htmlunit.HtmlUnitDriver.getPageToInjectScriptInto(HtmlUnitDriver.java:503)
    at org.openqa.selenium.htmlunit.HtmlUnitDriver.executeScript(HtmlUnitDriver.java:458)
    at ATest.main(ATest.java:46) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T00:18:53.667

那不是使用 GhostDriver；那是使用 HtmlUnit。你有两个选择。您可以为 HtmlUnit 启用 JavaScript，这将通过驱动程序的所需功能来完成，或者您可以实际使用 GhostDriver，它是 PhantomJS 项目的一部分。在您的 Java 代码中，您将创建一个`PhantomJSDriver`对象，该对象将用于导航以操作生成的页面。

# java - 实施（扩展）路径

> ID：15512607
> 
> 赞同：1
> 
> 时间：2013-03-19T23:41:01.043
> 
> 标签：java, extends, implements

我正在尝试创建一个能够在我的程序中处理文件管理的对象。

Path 接口几乎有我需要的所有方法，但我想添加一些自定义的方法。如果我在我的对象中实现 Path，我将不得不覆盖所有路径的方法。

有没有办法创建一个具有 Path 接口的所有方法和一些附加方法的对象，而不实际覆盖接口的方法？

在某种程度上，我想扩展 Path 接口，但也可以定义任何其他方法体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-21T12:57:17.860

您可以使用[装饰器模式](http://en.wikipedia.org/wiki/Decorator_pattern)。

还记得[BufferedReader](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html)吗？这与您的情况非常相似-它是任何[Reader](http://docs.oracle.com/javase/7/docs/api/java/io/Reader.html)周围的薄包装器（装饰器） ，使其缓冲并具有一些其他方法（可以读取行）。

```
public class DecoratedPath implements Path {
    private final Path path;

    public DecoratedPath(Path path) {
        this.path = path;
    }

    public DecoratedPath(String stringPath) {
        this(Paths.get(stringPath));
    }

    // add any additional constructors / factory methods you like

    @Override
    public int compareTo(Path other) {
        return path.compareTo(other);
    }

    @Override
    public int endsWith(Path other) {
        return path.endsWith(other);
    }

    // Etc. for all the methods of the Path interface.
    // They'll all delegate to the methods of the path field.
    // You can also enhance some of them, if you want to,
    // to return DecoratedPath instead of Path.

    // your additional methods
} 
```

用法：

```
DecoratedPath path = new DecoratedPath("/some/path"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-21T12:22:59.170

我可能会警告您有关路径接口的一些小问题。另外，我对实现这个接口有两个建议。

据我所知，路径接口用于为文件操作符对象中的路径创建类型引用点。可以使用 Paths Helper Class 创建 Path（注意 -s）。但是，它从未被任何类实现。因此，它是一个用于在通用类型中传递数据的接口。这意味着，coder 应该使用 Path Interface 作为类型发送信息，然后在声明为接收 Path Type Object 的其他类操作上使用 Path Typed Object。因此，在我看来，实现路径类并不是必需的。

正如我所提到的，我可以建议你两件事：虽然，这些类型的实践不是好的设计决策。JavaSE7 Doc中也提到了这个问题：[here](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Path.html#toAbsolutePath%28%29)

1) 首先，您不必为接口中的所有方法添加行为。您可以使用“未实现”的消息日志声明它们并返回空值。

2）但更好的方法是使用 Ali Alamiri 提到的抽象类。我个人不会大惊小怪地为抽象创建一个子类，而只是实现我想要的方法。如果我想为它制作更容错的应用程序，那么使用子类来携带所有未实现的方法并为所有这些方法使用警告消息日志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T23:43:36.030

您可以做的是创建一个`abstract`实现`Path`接口的类。在这个类中，您可以实现方法或不实现它们，以便另一个类可以处理它们。然后你可以扩展这个抽象类并覆盖你想要的任何方法，你不必覆盖每一个方法。

例如：

```
public abstract class AbstractPath implements Path
{
    //All methods declarations from Path interface
}

public class Base extends AbstractPath
{
   //Override any method declared in AbstractPath
} 
```

# objective-c - 从 Xcode 数据或缓存中导出已删除的项目

> ID：15512608
> 
> 赞同：0
> 
> 时间：2013-03-19T23:41:06.153
> 
> 标签：objective-c, xcode, backup

我删除了整个项目文件夹（所有 .h 和 .m 文件和图形等）。来自 Windows，我认为 MAC OS 中的文件夹会合并，但它们被替换了:-(

我没有任何快照。有没有机会检索任何数据？（对任何派生数据或某事进行逆向工程？）

到目前为止，我可以：

*   从构建文件夹中的 .app 文件中拯救我的图形和声音。
*   从“自动保存信息”文件夹（在 ~/Library 中）拯救我的故事板文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T23:51:08.667

你多久以前删除它们？如果它是最近的并且您还没有清空垃圾箱，您也许可以在那里找到它。

只需单击 Dock 上的垃圾箱图标，然后查看文件夹是否在其中。如果是这样，您可以将其拖回您的项目中，一切都应该没问题。

但是，如果它不存在，将很难恢复它，您将不得不找到一些搜索它的程序，它可能无法找到它。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T23:54:05.193

除非你正在做适当的备份（比如 Time Machine），或者使用源代码控制（subversion 或 git），或者快照（已经声明没有被使用），那么不幸的是你运气不好。

没有源文件最终出现在构建的应用程序或任何派生数据文件夹中。

正如 Jsdodgers 所说，垃圾是最后的希望。

请以此为契机进行适当的备份。一旦您设置了外部驱动器，Time Machine 的设置就变得如此简单。再也不用担心文件丢失了。

# c++ - 在超类中重载运算符，但子类声称它已经定义

> ID：15512612
> 
> 赞同：2
> 
> 时间：2013-03-19T23:41:37.787
> 
> 标签：c++, visual-c++

我正在学习 C++，我对继承和运算符重载的工作方式有点不清楚，所以我很可能在这里做一些愚蠢的事情。

我有一个基类，它定义了一些用于表示测量单位的非常基本的操作：

```
#pragma once
class UnitOfMeasure
{
public:
    UnitOfMeasure(void) : mAmount(0) {}
    UnitOfMeasure(double amount) : mAmount(amount) { }
    ~UnitOfMeasure() {}

    void SetAmount(double amount) { mAmount = amount; }

    UnitOfMeasure& operator+=(const UnitOfMeasure& rhs)
    {
        mAmount += rhs.mAmount;
        return *this;
    }

    friend bool operator==(const UnitOfMeasure&, const UnitOfMeasure&);

protected:
    double mAmount;
};

bool operator==(const UnitOfMeasure& lhs, const UnitOfMeasure &rhs)
{
    return rhs.mAmount == lhs.mAmount;
} 
```

然后子类实现特定的转换，如下所示：

```
#pragma once
#include "UnitOfMeasure.h"

class Temperature : public UnitOfMeasure
{
public:
    enum TemperatureUnit { CELSIUS, FAHRENHEIT };
    Temperature(void) { }
    Temperature(double amount, TemperatureUnit units=CELSIUS) { SetAmount(amount, units); }
    ~Temperature(void) {};
    void SetAmount(double amount, TemperatureUnit units=CELSIUS)
    {
        switch(units)
        {
            case CELSIUS: { mAmount = amount; break; }
            case FAHRENHEIT: { mAmount = (amount - 32) / 1.8; break; }
        }
    }
    double Fahrenheit() { return 32 + (mAmount * 1.8); }
    double Celsius() { return mAmount; };
}; 
```

在我的示例程序中，我将温度的实例存储在一个列表中，这就是事情开始变得奇怪的地方。当所有代码都包含在 .h 文件中时，一切都很好。我可以编译并成功运行。但是，当我将温度的代码分解为单独的 .cpp 文件时，编译器会抱怨。我收到这些消息：

```
1>  Temperature.cpp
1>Temperature.obj : error LNK2005: "bool __cdecl operator==(class UnitOfMeasure const &,class UnitOfMeasure const &)" (??8@YA_NABVUnitOfMeasure@@0@Z) already defined in BadComparison.obj
1> BadComparison.exe : fatal error LNK1169: one or more multiply defined symbols found 
```

（我正在使用 Visual Studio 2012）

编译器是否为我的温度类创建了单独的 == 运算符？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T23:43:30.823

您应该声明您的操作员，`inline`以避免其定义成为`#include`相应头文件的多个翻译单元的一部分：

```
 inline bool operator==(const UnitOfMeasure& lhs, const UnitOfMeasure &rhs)
//  ^^^^^^
    {
        return rhs.mAmount == lhs.mAmount;
    } 
```

在这种情况下，链接器最终会抱怨同一个函数在您的程序中被多次定义，这违反了[单一定义规则](http://en.wikipedia.org/wiki/One_Definition_Rule)。

# symfony - Symfony2：如何在扩展的选择字段中覆盖 radio_widget 块？

> ID：15512615
> 
> 赞同：1
> 
> 时间：2013-03-19T23:41:47.927
> 
> 标签：symfony, twig

我正在创建一个自定义表单类型，用于显示星级评分（基本上是五个单选按钮）。我为渲染创建了一个自定义块：

```
{% block star_rating_widget %}
    {% spaceless %}
        <div {{ block('widget_container_attributes') }}>
            {% for child in form %}
                    {{ form_widget(child) }}
            {% endfor %}
        </div>
    {% endspaceless %}
{% endblock %} 
```

此块使用默认的 radio_widget 块渲染五个单选按钮。

```
{% block radio_widget %}
    {% spaceless %}
        <input type="radio" {{ block('widget_attributes') }}{% if value is defined %} value="{{ value }}"{% endif %}{% if checked %} checked="checked"{% endif %} />
    {% endspaceless %}
{% endblock radio_widget %} 
```

我需要知道如何覆盖 radio_widget 块以添加一些类和属性，但仅限于在 star_rating_block 内渲染时。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-18T09:08:28.780

可能的解决方案：

```
{% block radio_widget %}
    {% if "custom_widget" in form.parent.vars.block_prefixes %}
        // custom view 
    {% else %}
        // default view from form_div_layout.html.twig 
    {% endif %} 
{% endblock radio_widget %} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T05:33:58.240

您可以通过`form_widget`第二个参数将变量传递给。您基本上会在您的自定义类型中允许一组选项，并将它们传递给 twig 函数。

```
{{ form_widget(child, {attr: {class: classNameVar}}) }} {# passing some classes through the variable classNameVar 
```

[您可以在有关 twig 模板表单函数和变量引用的文档](http://symfony.com/doc/current/reference/forms/twig_reference.html#form-widget-view-variables)中找到更多信息。

在同一文档中，您可以找到有关不同[表单变量](http://symfony.com/doc/current/reference/forms/twig_reference.html#more-about-form-variables)的信息。

# java - Spring MVC 服务器是否为请求数据创建连接？

> ID：15512616
> 
> 赞同：1
> 
> 时间：2013-03-19T23:41:49.800
> 
> 标签：java, http, spring-mvc, web, connection

我正在使用 Spring MVC 框架开发一个 Web 应用程序。现在我想知道是否为每个客户端请求关闭了连接。我的意思是，如果我的网站有 1000 个用户登录，我会打开 1000 个连接吗？如果是这样，有没有办法让客户端和服务器进行通信，而无需在收到请求后创建连接或关闭它们？对于这个问题我很抱歉，但是我开始使用这个框架并且我在安装框架时没有设置任何与它相关的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T00:18:27.923

Web 请求访问网络服务器，获取 HTML 和 CSS 文件和图片等资源，然后再次关闭连接。你不会有永久的联系。这意味着如果 1000 个用户同时加载一个站点，您将有 1000 个并发请求。如果他们在 5 分钟内在不同时间加载站点，您将不会有并发请求，或者至少一次更少。Web 请求通常在几到 300 毫秒内处理。这与打开永久数据库连接或类似的东西不同。登录也将通过 Web 请求进行处理，并在成功登录时创建会话。可以以不同的方式处理会话。您可以在此处阅读有关会话的更多信息：[http ://en.wikipedia.org/wiki/Session_%28computer_science%29](http://en.wikipedia.org/wiki/Session_%28computer_science%29). 您还应该阅读有关 Spring Security 的信息。

因此，要回答您的问题，不，当 1000 个用户登录时，您不会有 1000 个打开的连接。但是每次用户加载页面时，您都会有一个连接。

您可以通过使用例如基于 Javascript 的前端来最小化与服务器的连接，该前端负责处理客户端的大部分任务，并且仅通过 REST 与服务器通信。

我希望这有助于并回答您的问题。

亲切的问候，克里斯

# php - 你如何同时从两个数据库中选择？

> ID：15512623
> 
> 赞同：2
> 
> 时间：2013-03-19T23:42:24.670
> 
> 标签：php, mysql

假设我创建了 2 个 MySQLi 对象`$db1`和`$db2`.

连接驻留在不同的服务器（本地）上，并且数据库结构相同。我想用相同的查询查询两台服务器。

我的问题是：

1.  我可以同时查询数据库吗？
2.  有哪些有效的组合结果的方法？

一些见解或指出正确的方向将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T23:48:10.950

您可以启动两个线程（一个查询每个 DB），加入两个线程，然后处理结果。

PHP 对线程的支持可通过以下扩展获得：

[http://php.net/gearman](http://php.net/gearman)

[http://sourceforge.net/projects/phpthreadlib/](http://sourceforge.net/projects/phpthreadlib/)

[https://github.com/kulikov/php-threads-manager](https://github.com/kulikov/php-threads-manager)

[https://github.com/dlsniper/php-threads](https://github.com/dlsniper/php-threads)

[https://github.com/unusorin/php-threads](https://github.com/unusorin/php-threads)

我知道你说你想做应用级分片。我会争辩（已经做到了）应用程序级别的分片是不平凡的。初始设置很容易，但是当您需要添加新分片时会很复杂（在应用程序在线时将键范围迁移到新服务器并非易事）。至少看看 MySQL 对分片和分区的支持：http: [//xeround.com/blog/2011/11/mysql-sharding-vs-mysql-partitioning](http://xeround.com/blog/2011/11/mysql-sharding-vs-mysql-partitioning)

# python - 忽略python中地址中的序数

> ID：15512624
> 
> 赞同：3
> 
> 时间：2013-03-19T23:42:41.677
> 
> 标签：python, regex

我写了这个正则表达式来匹配像组合这样的字符串。现在我想修改这个正则表达式并且不让它匹配这些字符串：'st, nd, rd, th'。我想匹配所有其他组合的字符串，但字母部分不应该是列出的字符串之一。

```
_NUM_ALPHA_PAIR_RE = re.compile(r'[0-9/]+[A-Z,a-z]+', re.I) 
```

我想匹配：'6A' 或 '6S' 但我不想匹配 '1ST' 或 '2nd'</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T23:49:04.313

使用负前瞻`(?!st|nd|rd|th)`：

```
_NUM_ALPHA_PAIR_RE = re.compile(r'[0-9/]+(?!st|nd|rd|th)[,a-z]+', re.I) 
```

* * *

```
In [125]: import re
In [126]: _NUM_ALPHA_PAIR_RE = re.compile(r'[0-9/]+(?!st|nd|rd|th)[,a-z]+', re.I)

In [127]: _NUM_ALPHA_PAIR_RE.match('6A')
Out[127]: <_sre.SRE_Match at 0xb141c98>

In [128]: _NUM_ALPHA_PAIR_RE.match('1ST')
# None 
```

# sql - 具有 distinct 和 sum 的 SQL 查询

> ID：15512628
> 
> 赞同：19
> 
> 时间：2013-03-19T23:43:01.543
> 
> 标签：sql, sum, distinct, ansi-sql

我有下`medleys`表结合了`colors`,`fruits`和`ratings`:

```
[medleys]
medley_id   |   color   |   fruit   |   rating
==============================================
1               red         apple       25
2               blue        pear        5
3               green       apple       12
4               red         apple       10
5               purple      kiwi        5
6               purple      kiwi        50
7               blue        kiwi        3
8               blue        pear        9 
```

我正在尝试编写一个符合 ANSI 的 SQL 查询，它将组合每个唯一/不同的`color`-`fruit`对并将每对的单个`rating`值相加。因此，如果您在上面的表上运行查询，它将产生以下结果集：

```
[query]
color   |   fruit   |   sum
===========================
red         apple       35
blue        pear        14
blue        kiwi        3
green       apple       12
purple      kiwi        55 
```

因此，查询看到表中有两个`red`-`apple`对，因此它为`red`-`apple`对创建一个结果，并将它们的组成部分`ratings`(25 + 10 = 35) 相加，等等。

我确信我需要选择**不同的**颜色/水果值，但不确定如何在同一“级别/范围”聚合评级：

```
SELECT
    distinct(color, fruit), sum(rating)
FROM
    medleys 
```

顺序无所谓。`color`并且`fruit`是 VARCHAR(50)s 并且`rating`是 INT。提前致谢！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-19T23:44:11.820

```
SELECT color, fruit, sum(rating)
FROM medleys
GROUP BY color, fruit 
```

Distinct 用于选择不同的元素，仅此而已，而您想要聚合并且为此需要`GROUP BY`聚合函数 ( `SUM`)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T23:45:24.567

你根本不需要`distinct`。你需要`group by`：

```
select color, fruit, sum(rating)
from medleys
group by color, fruit 
```

我正在回答，因为我看到这个错误发生了。一般来说，你根本不需要`select distinct`SQL。您始终可以使用 a`group by`代替。 `Distinct`应该在后面`group by`作为方便的速记介绍。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T23:46:35.860

```
SELECT `color`,`fruit`,SUM(`rating`)
FROM Medleys
GROUP BY `color`,`fruit` 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!2/b238c7/1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T23:49:09.243

这应该回答你的问题：

```
 SELECT color, fruit, sum(rating) as [sum]
FROM medleys
GROUP BY color, fruit
ORDER BY color 
```

# c# - c# DLL 只编译一个类

> ID：15512630
> 
> 赞同：3
> 
> 时间：2013-03-19T23:43:09.780
> 
> 标签：c#, class, dll, compilation, building

我创建了一个 C# 类库。在其中我插入两个类。例如：

Apple.cs 橙色.cs

```
namespace FoodLibrary
{
 namespace Apples
 {
    public class Apples
    {
        public string type { get; set; }
        public string colour { get; set; }
        public string size { get; set; }
    }
 }
} 
```

为 Orange.cs 形成了几乎完全相同的一个（命名空间 Apples 和类 Apples 将变成“Orange”）。

编辑（这是请求的 Orange.cs）：

```
namespace FoodLibrary
{
    namespace Orange
    {
        class Orange
        {
          public string colour { get; set; }
          public string type { get; set; }
          public string size { get; set; }
        }
    }
} 
```

在构建/重建任何组合后，我将在调试文件夹中获得一个 .dll。引用此 DLL 后，我似乎只能访问一个命名空间/类（即 Apple）。它允许我访问我在类库中创建的第一个类。不管我做了多少类，我只在我的 DLL 中得到一个。

我在以下方面得到了相同的结果：

Visual Studios 2010 Visual Studios Express 2008 (C#)

旁注：如果我更新一个有效的类（即添加一个新属性），它将在我构建时更改 DLL。我尝试过“清除”、“重建”和“构建”。

编辑：显然我是个白痴，没有意识到橙色不是公开的。一旦我改变它，它就起作用了。不太确定为什么新项目生成的类是“公共的”，但是在添加新类时它不是，反之亦然。

谢谢大家的建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T00:17:24.423

你的班级没有像你的班级`Orange`那样声明。尝试将其声明为公开 - 然后您应该可以访问它。`public``Apples``Orange`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T00:03:34.563

在 Visual Studio 中，在解决方案资源管理器中选择 Orange.cs 文件，然后查看“属性”窗格。构建操作是否设置为编译？如果不是，则该文件不会作为源代码包含在内。

出于某种奇怪的原因，Visual Studio 有时会在我创建新文件时将构建操作更改为其他内容。检查此人的博客以获取屏幕截图和类似问题。

[http://dimarzionist.wordpress.com/2008/07/24/strange-vs-2008resharper-behaviour-buildaction-property/](http://dimarzionist.wordpress.com/2008/07/24/strange-vs-2008resharper-behaviour-buildaction-property/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T00:16:55.513

1.  使您的命名空间名称与您的类名称不同，即命名空间 = AppleS 类 = Apple
2.  将命名空间 ClassLibraryTest 更改为 FoodLibrary

# twitter-bootstrap - 为什么这个 Bootstrap 确认对话框不起作用？

> ID：15512631
> 
> 赞同：1
> 
> 时间：2013-03-19T23:43:10.670
> 
> 标签：twitter-bootstrap

我有以下代码用于使用 Bootstrap 模式进行确认对话框，它应该**在闭包中调用**：

```
this.events.register(this, function(e) {

  this.makeModal(e);

  // this is what used to work for me
  /*
  if (confirm('Are you sure?')) {
    alert(e.data);
  } else {
    // DO NOTHING
  }
  */
});

makeModal: function(e) {    

  //...

  $(btnCancel).on("click", $(modal).modal('hide'));
  $(btnConfirm).on("click", alert('confirm'));
} 
```

只有两个按钮，即 btnCancel 和 btnConfirm。问题是在调用外部函数后，内部警报也会立即触发，这使得确认对话框无用。我怎样才能解决这个问题？**出于特定原因，我不能使用 bootbox 等库。**

**或者我可以从这个模式中返回是或否吗？**如果是这样，我该怎么做？

先感谢您！

* * *

编辑：这是我返回是或否的糟糕尝试：

```
makeModal: function(e) {    

  //...
  var choice;
  $(btnCancel).on("click", choice = false);
  $(btnConfirm).on("click", choice = true);
  return choice;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T21:29:03.013

这是实现您尝试做的另一种方法的示例：

```
$('#myModal').bind('show', function() {
    var id = $(this).data('id'),
    yesBtn = $(this).find('.danger');
    $(yesBtn).data('id', id);

}).modal({ backdrop: true });

$('.delete-button').click(function(e) {
    e.preventDefault();
    var id = $(this).data('id');
    $('#myModal').data('id', id).modal('show');
});

$('.danger').click(function(){
    var id = $(this).data('id');
    $('#myModal').modal('hide');
    alert('Deleting: ' + id);
    //Do something with id
}); 
```

[点击这里查看 JsFiddle](http://jsfiddle.net/MjmVr/764/)

# c# - 如何在没有回发的情况下单击按钮在同一页面区域重定向？

> ID：15512633
> 
> 赞同：1
> 
> 时间：2013-03-19T23:43:15.610
> 
> 标签：c#, asp.net, html, .net, vb.net

单击按钮时，我希望用户被重定向到同一页面中的某个特定区域。我知道这可以通过使用锚标签来完成，但不确定如何使用 asp.button 来实现。单击按钮时，我希望用户重定向到占位符。请指导我如何做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:47:00.080

使用`<a href="#xxx">`标签，标签在页面中的某个`xxx`位置。`<a name="xxx">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T00:38:16.470

简单的方法，无需任何检查，只需使用 javascript 在链接末尾添加锚点。

```
<asp:Button ID="Button1" runat="server"       
     OnClientClick="document.location.href+='#locA';return false;" /> 
```

它将导航到的位置：`<a name="locA"></a>`

以及正确的方法，您可以使用不同的锚点进行多次点击。

```
 <script>
        function cGoTo(where)
        {
            // take care if any other anhor exist to remove it.
            var url = document.location.href
            var tempArray = url.split("#");
            var baseURL = tempArray[0];

            document.location.href = baseURL + "#" + where;
        }
    </script>    
    <asp:Button ID="Button2" runat="server" OnClientClick="cGoTo('locA');return false;" /> 
```

还有一个在线测试：http: [//jsfiddle.net/r3Sav/](http://jsfiddle.net/r3Sav/)

# java - 如何将字符串转换为大量列表，

> ID：15512636
> 
> 赞同：0
> 
> 时间：2013-03-19T23:43:32.057
> 
> 标签：java, list, netbeans, arraylist

我如何分隔要使用的字符串，提取代码

```
JTextField stockNo = new JTextField(7);
JTextField quantity = new JTextField(7);
TextArea information = new TextArea(5, 50);
JButton purchaseBtn = new JButton("Purchase");
purchaseBtn.addActionListener(this);
//set up gui ect
String key = stockNo.getText();
String quantityTxt = quantity.getText();
String info = "\n\nName: " + StockData.getName(key) + 
                    "\nPrice: £" + (StockData.getPrice(key)) + 
                    "\nNumber in stock: " + StockData.getQuantity(key) +
                    "\nNumber to buy: " + quantityTxt;
information.append(info); 
```

当用户单击purchaseBtn时，之前的信息应该保留在`.append`那里，我需要以某种方式从信息文本区域中提取信息，并用它来进行计算，有人告诉我arraylist但不知道。

例如

```
 //in text area
Name: shirt //user inputed 1 for key
Price: £5.00
Number in stock: 15
Number to buy 7 // user inputed 7 for quantity

Name: socks //user inputed 2 for key
Price: £2.50
Number in stock: 4
Number to buy 1 // user inputed 7 for quantity

Name: trouser //user inputed 3 for key
Price: £24.00
Number in stock: 19
Number to buy 4 // user inputed 7 for quantity 
```

我需要得到它来保存每一行的键和数量，这样我以后可以用它做事，并且能够说`int totalcost = //the price of all of them added together in our example £31.50`，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T23:50:19.707

您正在使用 OO 语言进行操作。您的所有信息都应该在对象中进行管理，这就是重点。

使用 a`JList`而不是`JTextArea`.

将您的购买信息放在一个包含您需要的所有信息的对象中，`Purchase`例如inStock toBuy`。`name``price,``and`

然后，您可以根据需要使用 a`ListCellRenderer`来渲染对象的各个元素`Purchase`。

这将使管理变得更加容易。

有关更多信息，请参阅[如何使用列表](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html)

# java - 将自定义方法添加到 Java 中 TreeSet 中的迭代器

> ID：15512655
> 
> 赞同：1
> 
> 时间：2013-03-19T23:44:56.917
> 
> 标签：java, methods, iterator, treeset

我有一个 Java `TreeSet`：

```
TreeSet<Integer> tsA = new TreeSet<Integer>(); 
```

我在这个 TreeSet 上声明了一个迭代器，如下所示：

```
Iterator<Integer> tsAI = tsA.iterator(); 
```

现在，`tsAI`有类似`hasNext()`and的方法`next()`。但是，我想在调用的迭代器中添加一个自定义方法以及原始方法`seek(num)`，它将迭代器放置在`num`TreeSet 中所需的位置。

所以说如果我`TreeSet`有值`(1, 2, 3, 4, 5, 7)`并且我在 2 并且我调用`seek(5)`迭代器应该跳转到 5。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T00:05:24.910

我认为您正在寻找的是[tail set](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html#tailSet%28E%29)。

`tsA.tailSet(5).iterator()`将遍历集合中大于或等于 5 的所有元素。

请注意，这不是迭代器的函数，而是集合本身的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T23:53:05.620

最接近您真正应该做的事情是编写一个静态方法，看起来类似于`<T> static void advance(Iterator<Integer>, Integer)`将另一个迭代器推进到特定位置。

您可能还可以编写一个迭代器装饰器，您可以使用它执行类似的操作`new MyIterator(treeSet.iterator())`，并且您可以使用您的`MyIterator`类提供的其他方法。

您可能*不应该*做的是尝试子类`TreeSet`化或更改您从`TreeSet`. 相反，在这些迭代器之上操作或装饰它们是要走的路。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T23:59:15.097

不确定这是否是一个好主意，但您可以从以下内容开始：

```
import java.util.Iterator;
interface MyIterator extends Iterator {
    void seek(int n);
}
class MyIteratorImpl implements MyIterator {
    @Override public void seek(int n) {
        // ...
    }
    @Override public boolean hasNext() {
        // ...
        return false;
    }
    @Override public Object next() {
        // ...
        return null;
    }
    @Override public void remove() {
        // ...
    }
} 
```

# magento - Masonry magento 重叠、CSS 或 JavaScript 问题

> ID：15512657
> 
> 赞同：0
> 
> 时间：2013-03-19T23:44:59.250
> 
> 标签：magento, jquery-masonry

我在砌体和 Magento 方面遇到了麻烦。我收到“未捕获的语法错误：输入意外结束”

我似乎无法弄清楚如何摆脱这个问题。我也得到了重叠的效果。我无法弄清楚我是否缺少 CSS，或者我的 JavaScript 是否正常工作。我没用过冲突。

我真的很感激这方面的帮助，我现在有点压力要解决这个问题。

这是网址：

[http://thecheeky.com/testhomepage](http://thecheeky.com/testhomepage)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T00:25:05.843

这种类型的错误通常与您没有正确关闭 javascript 函数有关。

在您的代码中，您具有此功能：

```
// <![CDATA[

var tpj = jQuery;
tpj.noConflict();

tpj(document).ready(function () {

    tpj(function () {

        var tpjcontainer = tpj('#container-mas');
        tpjcontainer.imagesLoaded(function () {
            tpjcontainer.masonry({
                itemSelector: '.item',
                columnWidth: 240
            });
        });

    // ]]> 
```

它缺少接近 tpj(function () 和 document.ready(function... 它应该看起来像这样：

```
// <![CDATA[

var tpj = jQuery;
tpj.noConflict();

tpj(document).ready(function () {

    tpj(function () {

        var tpjcontainer = tpj('#container-mas');
        tpjcontainer.imagesLoaded(function () {
            tpjcontainer.masonry({
                itemSelector: '.item',
                columnWidth: 240
            });
        });
 });
});

    // ]]> 
```

可能是别的东西，但这是一个开始

# ruby-on-rails - 验证两个属性的唯一性

> ID：15512658
> 
> 赞同：1
> 
> 时间：2013-03-19T23:45:12.550
> 
> 标签：ruby-on-rails, activerecord, rails-activerecord

我有一个名为“汽车”的模型

我想知道如何在模型中声明，以便两个属性相互匹配时只能存在一条记录。例如，在汽车模型中

```
:owner_id, :driver_id 
```

假设存在一条记录：

```
:id => "1", :owner_id => "22", :driver_id => "23", :state => "parked" 
```

如果我尝试创建另一条记录，该记录也具有相同`owner_id`且`driver_id`彼此匹配，则该记录将无法自行创建。我正在尝试创建一个关系模型，当它们匹配时，将为每个所有者和驱动程序创建一个记录。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T23:47:14.910

在您的`Car`模型中，您可以定义验证：

```
validates :driver_id, uniqueness: { scope: :owner_id } 
```

我相信这应该会给您预期的行为，如果您尝试使用相同的驾驶员和所有者创建另一辆车，则会出现验证错误。

# java - 如何停止运行 Floodlight 实例？

> ID：15512659
> 
> 赞同：0
> 
> 时间：2013-03-19T23:45:12.607
> 
> 标签：java, multithreading, controls, osgi, bundle

我从 mavenized 泛光灯创建了一个 OSGi 包。我使用 blueprint config.xml 来激活捆绑包。这是蓝图 config.xml：

```
<bean id="flbean"
    class="net.floodlightcontroller.core.FloodlightBean"
    init-method="init" destroy-method="destroy">
</bean> 
```

我创建了一个类 FloodlightBean，它提供了 init() 和 stop() 方法来启动和停止包：

```
public class FloodlightBean {

public void init() throws FloodlightModuleException {
    System.out.println("start floodlight");
    // Setup logger
    System.setProperty("org.restlet.engine.loggerFacadeClass",
            "org.restlet.ext.slf4j.Slf4jLoggerFacade");

    CmdLineSettings settings = new CmdLineSettings();
    /*CmdLineParser parser = new CmdLineParser(settings);
    try {
        parser.parseArgument(args);
    } catch (CmdLineException e) {
        parser.printUsage(System.out);
        System.exit(1);
    }*/

    // Load modules
    FloodlightModuleLoader fml = new FloodlightModuleLoader();
    IFloodlightModuleContext moduleContext = fml
            .loadModulesFromConfig(settings.getModuleFile());
    // Run REST server
    IRestApiService restApi = moduleContext
            .getServiceImpl(IRestApiService.class);
    restApi.run();
    // Run the main floodlight module
    IFloodlightProviderService controller = moduleContext
            .getServiceImpl(IFloodlightProviderService.class);
    // This call blocks, it has to be the last line in the main
    controller.run();
}

public void destroy() {

    System.out.println("stop floodlight");
} 
```

}

对于 init() 方法，我只是将 net.floodlightcontroller.core.Main 中的代码复制到其中。现在可以在 OSGi 容器中启动 Floodlight。但问题是，一旦 Floodlight 捆绑包启动，它就会永远运行。我不知道如何实现 destroy() 来停止泛光灯。

我只是发现泛光灯是多线程的。所以我不能简单地为 net.floodlightcontroller.core.Main 中的代码创建一个线程。我想知道我是否可以为 init() 创建一个进程，并在 destroy() 中实现杀死该进程。谁能帮我这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T07:58:13.527

如果 IFloodlightModuleLoader 或 Context 没有停止/停用/关闭方法来停止这些线程，那么你就被正式搞砸了。非正式地，您可以在调用 run 之前创建一个 ThreadGroup。如果你很幸运，你可以调用 setDaemon(true)，如果它们是唯一使用 VM 的线程，这可能有助于杀死线程。否则，您可以在 ThreadGroup 上调用 stop()。这可能会起作用，但由于不安全而被弃用。

# vb.net - VB.Net 搜索系统目录

> ID：15512663
> 
> 赞同：0
> 
> 时间：2013-03-19T23:45:34.863
> 
> 标签：vb.net, search, .net

我正在尝试向我的应用程序添加一个搜索框，它将根据输入的条件搜索共享驱动器。我目前拥有的代码是：

```
Public Sub searchProcedure()

    Dim startFolder As String = "C:\Documents and Settings\Practice Search"

    Dim dir As New System.IO.DirectoryInfo(startFolder)
    Dim fileList = dir.GetFiles("*.*", System.IO.SearchOption.AllDirectories)

    Dim searchTerm = "test string"

    Dim queryMatchingFiles = From file In fileList _
                             Let fileText = GetFileText(file.FullName) _
                             Where fileText.Contains(searchTerm) _
                             Select file.FullName

    'Where file.Extension = "." _ (removed so searches all files)

    For Each filename In queryMatchingFiles
        ListBox1.Items.Add(filename)
    Next

End Sub

Function GetFileText(ByRef Name As String) As String

    Dim fileContents = String.Empty

    If System.IO.File.Exists(Name) Then

        fileContents = System.IO.File.ReadAllText(Name)

    End If

    Return fileContents

End Function 
```

我遇到的问题是 Microsoft Office 文档。内容被读入我的 filecontents 字符串，但内容是 XML (?)。

关于如何将实际文本内容传递到我的搜索字符串中的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T23:52:17.467

当内容是使用 Regex 的 XML 或 HTML 时，您可以完全去除标签

```
Regex.Replace(text, "<.*?>", "") 
```

像这样：

```
Dim fileContents = String.Empty

If System.IO.File.Exists(Name) Then

    fileContents = System.IO.File.ReadAllText(Name)
    fileContents = Regex.Replace(fileContents, "<.*?>", "")
End If

Return fileContents 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T06:50:54.550

.docx 文件实际上是包含 XML 文件的 ZIP 文件。想到两个解决方案，都不容易：

1.  如果您安装了 MS Word，请使用 Word 对象模型以编程方式打开 docx 文件并提取文本。使用[MS Office 主互操作程序集](http://www.microsoft.com/en-au/download/details.aspx?id=3508)(PIA) 更容易，但您只能使用特定版本的 Office。我更喜欢使用 PIA 进行开发，然后在最后切换到后期绑定（即将所有内容更改为“对象”并摆脱 PIA 引用）。

2.  使用[#ZipLib](http://www.icsharpcode.net/opensource/sharpziplib/)打开 .docx 文件，然后使用 System.Xml 命名空间将 XML 拉开。

选项1我认为对你来说会更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T12:15:34.177

得出没有“开箱即用”解决方案的结论；我正在处理每种文档类型。使用 OpenXML SDK，从 Word 中提取的代码是：

```
Imports System.Xml.XmlReader
Imports System.IO
Imports DocumentFormat.OpenXml.Packaging
Imports DocumentFormat.OpenXml.Wordprocessing
Imports DocumentFormat.OpenXml.Spreadsheet
Imports DocumentFormat.OpenXml
Imports System.Linq

Public Sub WordProcessing()

    Dim strDoc As String = "C:\Documents and Settings\Practice.docx"
    Dim txt As String

    Dim stream As Stream = File.Open(strDoc, FileMode.Open)

    OpenAndAddtoWordProcessingStream(stream, txt)

    stream.Close()

    MessageBox.Show(txt)

End Sub

Public Sub OpenAndAddtoWordProcessingStream(ByVal stream As Stream, ByRef txt As String)

    Dim wordprocessingDocument As WordprocessingDocument = wordprocessingDocument.Open(stream, True)

    Dim body As Body = wordprocessingDocument.MainDocumentPart.Document.Body

    txt = body.InnerText.ToString

    wordprocessingDocument.Close()

End Sub 
```

从 Excel 中提取的代码是：

```
 Dim strDoc As String = "C:\Documents and Settings\Practice.xlsx"
    Dim txt As String

    Dim spreadsheetDocument As SpreadsheetDocument = spreadsheetDocument.Open(strDoc, False)

    Dim workbookPart As WorkbookPart = spreadsheetDocument.WorkbookPart
    Dim shareStringPart As SharedStringTablePart = workbookPart.SharedStringTablePart

    For Each Item As SharedStringItem In shareStringPart.SharedStringTable.Elements(Of SharedStringItem)()

        MessageBox.Show(Item.InnerText)

    Next 
```

接下来我将研究 .PDF、Access 和 Powerpoint。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T18:43:42.987

我添加了这个，所以这个问题将在 SSS 的指导下得到完全的回答。这是用于搜索 office docs、office docs(x)、pdf 和其他通用文件格式的文本字符串的完整代码。

```
Imports System.IO
Imports System.Xml.XmlReader
Imports DocumentFormat.OpenXml.Packaging
Imports DocumentFormat.OpenXml.Wordprocessing
Imports DocumentFormat.OpenXml.Spreadsheet
Imports DocumentFormat.OpenXml
Imports System.Linq
Imports System
Imports System.Collections.Generic
Imports A = DocumentFormat.OpenXml.Drawing
Imports DocumentFormat.OpenXml.Presentation
Imports System.Text
Imports iTextSharp.text
Imports iTextSharp.text.pdf

Module searchFiles

Public readAllText As String

Public Sub startSearch(ByVal searchText As String)

    MainForm.marketIntelligencelboxsearch.Items.Clear()

    Dim dir_info As New DirectoryInfo("\\Max1\dept\")

    ListFiles(MainForm.marketIntelligencelboxsearch, dir_info, searchText)

End Sub

Private Sub ListFiles(ByVal lst As ListView, ByVal dir_info As DirectoryInfo, ByVal target As String)
    ' Get the files in this directory.
    Dim fs_infos() As FileInfo = dir_info.GetFiles("*.*")
    For Each fs_info As FileInfo In fs_infos
        If target = "ALL" Or fs_info.ToString().IndexOf(target, StringComparison.OrdinalIgnoreCase) >= 0 Then
            MainForm.marketIntelligencelboxsearch.Items.Add(System.IO.Path.GetFileName(fs_info.FullName), MainForm.sourceFileImageIndex(fs_info.FullName))
        Else

            readAllText = File.ReadAllText(fs_info.FullName)

            If fileExtention(fs_info.FullName, target) <> 0 Then
                MainForm.marketIntelligencelboxsearch.Items.Add(System.IO.Path.GetFileName(fs_info.FullName), MainForm.sourceFileImageIndex(fs_info.FullName))
            End If
        End If
    Next fs_info
    fs_infos = Nothing

    ' Search subdirectories.
    Dim subdirs() As DirectoryInfo = dir_info.GetDirectories()
    For Each subdir As DirectoryInfo In subdirs
        ListFiles(lst, subdir, target)
    Next subdir
End Sub

Public Function fileExtention(ByVal sourcePath As String, ByVal target As String) As Integer

    Dim searchResult As Integer

    Select Case True

        Case InStr(sourcePath, ".docx") <> 0 Or InStr(sourcePath, ".docm")
            searchResult = WordProcessing(sourcePath, target)
            Return searchResult

        Case InStr(LCase(sourcePath), ".xlsx") <> 0 Or InStr(LCase(sourcePath), ".xlsm") <> 0
            searchResult = ExcelProcessing(sourcePath, target)
            Return searchResult

        Case InStr(LCase(sourcePath), ".pptx") <> 0 Or InStr(LCase(sourcePath), ".pptm") <> 0
            'will read slide text and notes
            searchResult = PowerpointProcessing(sourcePath, target)
            Return searchResult

        Case InStr(LCase(sourcePath), ".pdf") <> 0
            'will search text in pdf
            searchResult = pdfProcesssing(sourcePath, target)
            Return searchResult

        Case Else
            'looks at office docs before 2007 and all other generic  extensions, includes Access 2007 and lower
            searchResult = catchallProcessing(readAllText, target)
            Return searchResult
    End Select

End Function 
```

# 区域“搜索索引”

```
Public Function catchallProcessing(ByVal strDoc As String, ByVal target As String) As Integer

    If Not (strDoc) Is Nothing Then
        If strDoc.IndexOf(target, StringComparison.OrdinalIgnoreCase) >= 0 Then 'means it ignores the case, no indexof = searching inside
            Return 1

        Else

            Return 0

        End If
    Else

        Return 0
    End If

End Function 
```

# 结束区域

# 区域“Word 2007 处理”

```
Public Function WordProcessing(ByVal strDoc As String, ByVal target As String) As Integer  ' Word 2007 and Higher

    Dim txt As String

    Dim stream As Stream = File.Open(strDoc, FileMode.Open)

    Dim wordprocessingDocument As WordprocessingDocument = wordprocessingDocument.Open(stream, True)

    Dim body As Body = wordprocessingDocument.MainDocumentPart.Document.Body

    txt = body.InnerText.ToString
    Return catchallProcessing(txt, target) 'should return 0 or 1

    wordprocessingDocument.Close()
    stream.Close()

End Function 
```

# 结束区域

# 区域“Excel 2007 处理”

```
Public Function ExcelProcessing(ByVal strDoc As String, ByVal target As String) As Integer 'Excel 2007 and Higher

    Dim spreadsheetDocument As SpreadsheetDocument = spreadsheetDocument.Open(strDoc, False)

    Dim workbookPart As WorkbookPart = spreadsheetDocument.WorkbookPart
    Dim shareStringPart As SharedStringTablePart = workbookPart.SharedStringTablePart

    Dim paragraphText As New StringBuilder()

    For Each Item As SharedStringItem In shareStringPart.SharedStringTable.Elements(Of SharedStringItem)()

        paragraphText.Append(Item.InnerText) 'should read all strings

    Next

    Return catchallProcessing(paragraphText.ToString(), target)

End Function 
```

# 结束区域

# 区域“Powerpoint 2007 处理”

```
Public Function PowerpointProcessing(ByVal file As String, ByVal target As String) As Integer

    Dim numberOfSlides As Integer = CountSlides(file)

    Dim slideText As String = Nothing
    Dim totalText As String = Nothing

    For i As Integer = 0 To numberOfSlides - 1
        GetSlideIdandText(slideText, file, i)
        totalText = totalText & slideText
        'System.Console.WriteLine("Slide #{0} contains: {1}", i + 1, slideText)
    Next

    Return catchallProcessing(totalText, target)

End Function

Public Function CountSlides(ByVal presentationFile As String) As Integer

    Using powerpointDocument As PresentationDocument = PresentationDocument.Open(presentationFile, False)

        Return CountSlides(powerpointDocument)

    End Using

End Function

Public Function CountSlides(ByVal powerpointDocument As PresentationDocument) As Integer

    If powerpointDocument Is Nothing Then

        Throw New ArgumentNullException("presentationDocument")

    End If

    Dim slidesCount As Integer = 0

    Dim presentationPart As PresentationPart = powerpointDocument.PresentationPart

    If presentationPart IsNot Nothing Then

        slidesCount = presentationPart.SlideParts.Count()

    End If

    Return slidesCount

End Function

Public Function GetSlideIdandText(ByRef sldText As String, ByVal docName As String, ByVal index As Integer)

    Using ppt As PresentationDocument = PresentationDocument.Open(docName, False)

        Dim part As PresentationPart = ppt.PresentationPart
        Dim slideIDs As OpenXmlElementList = part.Presentation.SlideIdList.ChildElements
        Dim relID As String = TryCast(slideIDs(index), SlideId).RelationshipId

        Dim slide As SlidePart = DirectCast(part.GetPartById(relID), SlidePart)
        Dim notesSlide As NotesSlidePart = slide.NotesSlidePart
        Dim sn As NotesSlide = notesSlide.NotesSlide

        Dim textx As IEnumerable(Of A.Text) = sn.Descendants(Of A.Text)()
        Dim notesText As New StringBuilder()

        For Each text As A.Text In textx

            notesText.Append(text.Text)

        Next

        Dim paragraphText As New StringBuilder()

        Dim texts As IEnumerable(Of A.Text) = slide.Slide.Descendants(Of A.Text)()

        For Each text As A.Text In texts
            paragraphText.Append(text.Text)
        Next

        sldText = paragraphText.ToString() & notesText.ToString() 'concatenates the notes and slide text for searching

    End Using

End Function 
```

# 结束区域

# 区域“PDF 处理”

```
Public Function pdfProcesssing(ByVal strDoc As String, ByVal target As String) As Integer

    Dim oReader As New iTextSharp.text.pdf.PdfReader(strDoc)
    Dim stringOut As StringBuilder = New StringBuilder()

    If File.Exists(strDoc) Then

        For i = 1 To oReader.NumberOfPages

            Dim itsText As New iTextSharp.text.pdf.parser.SimpleTextExtractionStrategy
            stringOut.Append(iTextSharp.text.pdf.parser.PdfTextExtractor.GetTextFromPage(oReader, i, itsText))

        Next

    End If

    Return catchallProcessing(stringOut.ToString(), target)

End Function 
```

# 结束区域

```
End Module 
```

# .htaccess - 翻译被正则表达式混淆的 Htaccess 代码行，以不同方式处理字母和数字

> ID：15512664
> 
> 赞同：0
> 
> 时间：2013-03-19T23:46:03.867
> 
> 标签：.htaccess, mod-rewrite, friendly-url

我的 htaccess 文件中有这行代码。

```
RewriteRule ^url/([\w\d]{6})$ page.php?id=$1 [L] 
```

我知道它正在将 url 重写`site.com/url/wkwkwk`为`site.com/page.php?id=wkwkwk`

但是，我不明白是什么`[\w\d]{6}`意思。以 W 开头，以 D 结尾，长度为 6 个字符？是这样吗？

如果是这样，我可以添加另一行只处理这样的数值：

```
RewriteRule ^url/([0-9]+)$ differentpage.php?id=$1 [L] 
```

所以，两条线一起看起来像这样：

```
RewriteRule ^url/([\w\d]{6})$ page.php?id=$1 [L]
RewriteRule ^url/([0-9]+)$ differentpage.php?id=$1 [L] 
```

这会以不同的方式处理 url/then-some-letters 和 url/then-some-numbers 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T22:18:43.513

我将在这里用我学到的东西回答我自己的问题。

我不确定 \w 和 \d，但该`{6}`部分仅表示 6 个字符。我遇到了问题，因为我希望它最多 6 个字符。

为了解决这个问题，我`{6}`将`{0,6}`.

# ios - Apple 应用内购买验证收据返回 xml

> ID：15512666
> 
> 赞同：1
> 
> 时间：2013-03-19T23:46:11.817
> 
> 标签：ios, in-app-purchase

突然间[https://buy.itunes.apple.com/verifyReceipt](https://buy.itunes.apple.com/verifyReceipt) 现在间歇性地返回一个 xml 响应。沙盒模式不这样做。如果你愿意的话，它看起来像 api docs a plist wsdl。其他人看到这样的回复：

```
HTTP/1.1 200 Apple WebObjects
Content-Length: 5782
x-apple-jingle-correlation-key: JI6NEX6V3DMRO
pod: 51
x-apple-orig-url-path: /verifyReceipt
x-apple-request-store-front: <null>
x-apple-translated-wo-url: /verifyReceipt
x-set-apple-store-front: 143441-1,8
x-apple-application-site: ST11
edge-control: no-store, cache-maxage=0
Set-Cookie: Pod=51; version="1"; expires=Fri, 19-Apr-2013 23:38:52 GMT; path=/;            domain=.apple.com, mzf_in=510546; version="1"; path=/WebObjects; domain=.apple.com; secure, mzf_odc=ST1; version="1"; expires=Wed, 20-Mar-2013 00:08:52 GMT; path=/WebObjects; domain=.apple.com, mzf_dr=0; version="1"; expires=Thu, 01-Jan-1970 00:00:00 GMT; path=/WebObjects; domain=.apple.com
 apple-timing-app: 5 ms
 Cache-Control: private, no-cache, no-store, no-transform, must-revalidate, max-age=0
 x-apple-asset-version: 0
 Expires: Tue, 19 Mar 2013 23:38:52 GMT
 Content-Type: text/xml; charset=UTF-8
 x-apple-lokamai-no-cache: true
 x-apple-date-generated: Tue, 19 Mar 2013 23:38:52 GMT
 x-apple-application-instance: 510546
 Pragma: no-cache
 x-webobjects-loadaverage: 30
 Date: Tue, 19 Mar 2013 23:38:52 GMT

<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<Document xmlns="http://www.apple.com/itms/">

<Protocol>
    <plist version="1.0">
        <dict>
            <key>jingleDocType</key><string>initiateSecureSessionSuccess</string>
            <key>jingleAction</key><string>initiateSecureSession</string>
            <key>urlBag</key>
            <dict>
                    <key>authenticateAccount</key><string>https://buy.itunes.apple.com/verifyReceipt/MZFinance.woa/wa/authenticate</string>
<key>iPhoneActivation</key><string>https://albert.apple.com/verifyReceipt/ALActivation.woa/wa/iPhoneRegistration</string>
<key>device-activation</key><string>https://albert.apple.com/verifyReceipt/ALActivation.woa/wa/deviceActivation</string>
<key>carrierDeviceInfo</key><string>https://albert.apple.com/verifyReceipt/ALActivation.woa/wa/carrierDeviceInfo</string>
<key>authorizeMachine</key><string>https://buy.itunes.apple.com/verifyReceipt/MZFinance.woa/wa/authorizeMachine</string>
<key>buyProduct</key><string>https://buy.itunes.apple.com/verifyReceipt/MZFinance.woa/wa/buyProduct</string>
<key>buyCart</key><string>https://buy.itunes.apple.com/verifyReceipt/MZFinance.woa/wa/buyCart</string>
<key>deauthorizeMachine</key><string>https://buy.itunes.apple.com/verifyReceipt/MZFinance.woa/wa/deauthorizeMachine</string>
<key>machineAuthorizationInfo</key><string>https://buy.itunes.apple.com/verifyReceipt/MZFastFinance.woa/wa/machineAuthorizationInfo</string>
<key>modifyAccount</key><string>https://buy.itunes.apple.com/verifyReceipt/MZFinance.woa/wa/accountSummary</string>
<key>pendingSongs</key><string>https://buy.itunes.apple.com/verifyReceipt/MZFinance.woa/wa/pendingSongs</string>
<key>signup</key><string>https://buy.itunes.apple.com/verifyReceipt/MZFinance.woa/wa/signupWizard</string>
<key>songDownloadDone</key><string>https://buy.itunes.apple.com/verifyReceipt/MZFastFinance.woa/wa/songDownloadDone</string>
<key>forgottenPassword</key><string>https://buy.itunes.apple.com/verifyReceipt/MZFinance.woa/wa/iForgot</string>
<key>myInfo</key><string>https://appleid.apple.com/</string>
<key>noAOLAccounts</key><false/>
<key>logout</key><string>https://buy.itunes.apple.com/verifyReceipt/MZFinance.woa/wa/logout</string>
<key>addToCart</key><string>https://buy.itunes.apple.com/verifyReceipt/MZFinance.woa/wa/addToCart</string>
<key>removeFromCart</key><string>https://buy.itunes.apple.com/verifyReceipt/MZFinance.woa/wa/removeFromCart</string>
<key>shoppingCart</key><string>https://buy.itunes.apple.com/verifyReceipt/MZFinance.woa/wa/shoppingCart</string>
<key>bcURLs</key><array><string>http://.phobos.apple.com</string><string>http://www.atdmt.com</string></array>
<key>reportPodcast</key><string>https://buy.itunes.apple.com/verifyReceipt/MZFinance.woa/wa/reportPodcast</string>
<key>check-download-queue</key><string>https://buy.itunes.apple.com/verifyReceipt/MZFinance.woa/wa/checkDownloadQueue</string>
<key>set-auto-download</key><string>https://buy.itunes.apple.com/verifyReceipt/MZFinance.woa/wa/setAutoDownload</string>
<key>new-ipod-user</key><string>https://buy.itunes.apple.com/verifyReceipt/MZFinance.woa/wa/iPodRegistration</string>
<key>new-tv-user</key><string>https://buy.itunes.apple.com/verifyReceipt/MZFinance.woa/wa/iTVRegistration</string>
<key>md5-mismatch</key><string>https://buy.itunes.apple.com/verifyReceipt/MZFinance.woa/wa/md5Mismatch</string>
<key>report-error</key><string>https://buy.itunes.apple.com/verifyReceipt/MZFinance.woa/wa/reportErrorFromClient</string>
<key>updateAsset</key><string>https://buy.itunes.apple.com/verifyReceipt/MZFinance.woa/wa/updateAsset</string>
<key>create-token</key><string>https://buy.itunes.apple.com/verifyReceipt/MZFinance.woa/wa/createToken</string>
<key>create-session</key><string>https://buy.itunes.apple.com/verifyReceipt/MZFinance.woa/wa/createSession</string>

    <key>digital-copy</key><string>https://buy.itunes.apple.com/verifyReceipt/MZFinance.woa/wa/digitalCopyWizard</string>

<key>p2-redemption</key><string>https://buy.itunes.apple.com/verifyReceipt/MZFinance.woa/wa/p2RedeemCode</string>
<key>p2-redeem-service-terms-url</key><string>http://www.apple.com/legal/itunes/ww/</string>
<key>pendingApps</key><string>https://buy.itunes.apple.com/verifyReceipt/MZFinance.woa/wa/pendingApps</string>
<key>checkAppQueue</key><string>https://buy.itunes.apple.com/verifyReceipt/MZFinance.woa/wa/checkAppDownloadQueue</string>
<key>marketing-action</key><string>https://buy.itunes.apple.com/verifyReceipt/MZFinance.woa/wa/viewMarketingPage</string>      

  <key>mint-offers</key><string>https://buy.itunes.apple.com/verifyReceipt/MZFinance.woa/wa/presentOffers</string>
  <key>mint-account</key><string>https://buy.itunes.apple.com/verifyReceipt/MZFinance.woa/wa/accountSummary</string>
  <key>mint-account-fragment</key><string>https://buy.itunes.apple.com/verifyReceipt/MZFinance.woa/wa/accountSummaryFragment</string>

<key>uploadPublishedPlaylist</key><string>https://buy.itunes.apple.com/verifyReceipt/MZFinance.woa/wa/uploadPublishedPlayList</string>
<key>giftPlaylist</key><string>https://buy.itunes.apple.com/verifyReceipt/MZFinance.woa/wa/giftSongsWizard</string>
<key>give-playlist</key><string>https://buy.itunes.apple.com/verifyReceipt/MZFinance.woa/wa/giftSongsWizard</string>

  <key>adopt-product</key><string>https://buy.itunes.apple.com/verifyReceipt/MZFinance.woa/wa/adoptProduct</string>

            </dict>
        </dict>
    </plist>
</Protocol>

</Document> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T00:24:50.913

这是生产 verifyReceipt 服务的问题。

提交 DTS 票证，让他们知道该问题。我确定他们现在正在努力。

我的服务器记录显示在过去一小时内返回 XML 的请求数下降了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T01:02:00.830

苹果官方给出的答案

> 发生的技术问题现已解决 - 对于给您带来的不便，我们深表歉意。目前无法提供更多细节。

今天似乎工作正常，一定是一个糟糕的部署。

# input - 输入指向元组列表中的某些元素

> ID：15512667
> 
> 赞同：0
> 
> 时间：2013-03-19T23:46:12.663
> 
> 标签：input, python-3.x, tuples

我有一个元组列表如下：

```
EXCHANGE_DATA = [('AIA', 'Auckair', 1.50),
                 ('AIR', 'Airnz', 5.60),
                 ('AMP', 'Amp',3.22), 
                 ('ANZ', 'Anzbankgrp', 26.25),
                 ('ARG', 'Argosy', 12.22),
                 ('CEN', 'Contact', 11.22),
                 ('CNU', 'Chorus',3.01),
                 ('DIL', 'Diligent', 5.3),
                 ('DNZ', 'Dnz Property', 2.33),
                 ('EBO', 'Ebos', 1.1)] 
```

我想要做的是让用户在这些用逗号分隔的元组（例如 AIA、AIR、AMP）中输入一系列代码（每个元组中的第一个元素），并让程序返回输入所指的整个元组到。例如，如果输入是 AIA、AIR、AMP，程序将返回：

```
('AIA', 'Auckair', 1.50)
('AIR', 'Airnz', 5.60)
('AMP', 'Amp',3.22) 
```

我对编程比较陌生，因此将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T01:16:02.413

您应该创建一个帮助字典。这是避免嵌套循环的好方法。

```
>>> EXCHANGE_DATA = [('AIA', 'Auckair', 1.50),
...                  ('AIR', 'Airnz', 5.60),
...                  ('AMP', 'Amp',3.22), 
...                  ('ANZ', 'Anzbankgrp', 26.25),
...                  ('ARG', 'Argosy', 12.22),
...                  ('CEN', 'Contact', 11.22),
...                  ('CNU', 'Chorus',3.01),
...                  ('DIL', 'Diligent', 5.3),
...                  ('DNZ', 'Dnz Property', 2.33),
...                  ('EBO', 'Ebos', 1.1)]
>>> inp = "AIA,AIR,AMP"     # could come from input()
>>> exchange_dict = {i[0]:i for i in EXCHANGE_DATA}
>>> [exchange_dict[x] for x in inp.split(',')]
[('AIA', 'Auckair', 1.5), ('AIR', 'Airnz', 5.6), ('AMP', 'Amp', 3.22)] 
```

如果输入可以包含额外的空格，你可以像这样去掉它们

```
>>> [exchange_dict[x.strip()] for x in inp.split(',')]
[('AIA', 'Auckair', 1.5), ('AIR', 'Airnz', 5.6), ('AMP', 'Amp', 3.22)] 
```

# sql-server - Node.js 上 SQL Server 的 ORM

> ID：15512673
> 
> 赞同：23
> 
> 时间：2013-03-19T23:46:47.560
> 
> 标签：sql-server, node.js, orm

我正在为 Node.js 上的 SQL Server 寻找 ORM 映射器。长话短说，我们有一个 SQL Server 正在运行，现在我们想使用 node.js 来构建从数据库中提取数据的 Web 服务。

你知道任何在 Node.js 上支持 SQL Server 的 ORM 吗？

我知道有这种[乏味](https://github.com/pekim/tedious)的方法可以帮助连接到 SQL Server，但它没有 ORM。

谢谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2015-02-22T19:26:01.963

根据[sequelize](/questions/tagged/sequelize "显示标记为“续集”的问题")的[文档](http://sequelize.readthedocs.org/en/latest/)，[orm](/questions/tagged/orm "显示标记为“orm”的问题")对[sql-server](/questions/tagged/sql-server "显示标记为“sql-server”的问题")的支持在 2.0 版中可用（发布于2015 年[2 月 10 日](https://github.com/sequelize/sequelize/releases/tag/v2.0.0)，之前添加于2014 年[12 月 22 日](https://github.com/sequelize/sequelize/blob/master/changelog.md#200-rc4)的候选发布版）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-20T00:42:47.300

到目前为止，SQL Server 尚未在 Node.js 社区中获得大量支持。而且，由于大多数 Node.js 生态系统都是由社区驱动的，因此您的选择可能相当有限。

这并不是说没有计划增加对它的支持。只是没有多少人实现了它。示例： 的作者[`sequelize`](https://npmjs.org/package/sequelize)已声明[最终添加支持的意图](https://twitter.com/sdepold/status/264442316725551104)。

现在，如果获得以列作为键的普通 s 就足够了`Object`，微软自己的[方法](https://github.com/WindowsAzure/node-sqlserver/blob/master/test/query.js#L35-L45)[可能](https://github.com/WindowsAzure/node-sqlserver/blob/master/test/query.js#L35-L45)[`msnodesql`](https://npmjs.org/package/msnodesql)是一个不错的选择：[`query()`](https://github.com/WindowsAzure/node-sqlserver/blob/master/test/query.js#L35-L45)

```
sql.query(conn_str, "SELECT 1 as X, 'ABC', 0x0123456789abcdef ", function (err, results) {

    assert.ifError(err);

    var buffer = new Buffer('0123456789abcdef', 'hex');
    var expected = [{ 'X': 1, 'Column1': 'ABC', 'Column2': buffer}];

    assert.deepEqual(results, expected, "Results don't match");

    done();
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-10-29T09:24:47.830

我建议看看[Prisma](https://www.prisma.io/)。我们刚刚[宣布](https://www.prisma.io/blog/prisma-sql-server-support-preview-a4anl2gd8d3a)了对 SQL Server 的预览支持。

这是一个强调类型安全和开发人员体验的 ORM。与通常将表映射到类的传统 ORM 不同，Prisma 将查询映射到类型（在 TypeScript 中）并从查询中返回纯对象。

要开始使用 Prisma 和 SQL Server，请查看此[示例](https://github.com/prisma/prisma-examples/tree/latest/databases/sql-server)并[在文档中从头开始指南](https://www.prisma.io/docs/reference/tools-and-interfaces/preview-features/sql-server/sql-server-start-from-scratch-typescript)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-19T23:56:54.843

我喜欢[Node-odbc](https://github.com/w1nk/node-odbc)，我认为某种 ODBC 抽象可能是 NodeJS 最好的所有 RDBMS

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-11-10T09:32:30.807

我正在使用[Bookshelf ORM，它通过对](http://bookshelfjs.org)[Knex.js](http://knexjs.org)的依赖内置了对 MS SQL Server 的支持，尽管它没有在 Bookshelf 网站上明确列出。

在书架初始化时指定`client: 'mssql'`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-08T15:58:28.957

看看[mssql-orm](https://www.npmjs.org/package/mssql-orm)。它支持将大型对象图写入 SQL Server，但具有非常轻量级的 API：

```
var person = db.model({table: 'people'});

var bob = person({
  name: 'bob'
});

bob.save(); 
```

# flyway - Flyway“迁移”命令找不到当前架构（SQL Server）

> ID：15512675
> 
> 赞同：2
> 
> 时间：2013-03-19T23:46:50.013
> 
> 标签：flyway

我刚刚升级到 2.1.1 版，现在我看到一个奇怪的错误 - 当我针对我们的暂存和生产数据库服务器上的数据库运行 migrate 命令时，它会失败并出现 Flyway 异常，但它在我们的开发服务器上运行良好.

这是失败时的调试输出：

```
DEBUG: Adding location to classpath: C:\workspace\flyway\bin\..\jars\jtds-1.2.7.jar
DEBUG: Database: Microsoft SQL Server 10.0
DEBUG: DDL Transactions Supported: true
DEBUG: Schema: dbo
DEBUG: Schema [dbo] already exists. Skipping schema creation.
DEBUG: No upgrade to the Flyway 2.0 format necessary for metadata table [dbo].[schema_version]
DEBUG: No metadata table upgrade to the Flyway 2.0.2 format necessary
DEBUG: No metadata table upgrade to the Flyway 2.1 format necessary
ERROR: Unexpected error
com.googlecode.flyway.core.api.FlywayException: Current schema not set for connection! Check your database configuration!
        at com.googlecode.flyway.core.dbsupport.DbSupport.getCurrentSchema(DbSupport.java:79)
        at com.googlecode.flyway.core.Flyway$1.execute(Flyway.java:855)
        at com.googlecode.flyway.core.Flyway$1.execute(Flyway.java:815)
        at com.googlecode.flyway.core.Flyway.execute(Flyway.java:1177)
        at com.googlecode.flyway.core.Flyway.migrate(Flyway.java:815)
        at com.googlecode.flyway.commandline.Main.executeOperation(Main.java:118)
        at com.googlecode.flyway.commandline.Main.main(Main.java:86) 
```

在检查元数据表时，它显然是在找到模式，但由于某种原因，它不相信它是稍后设置的。

架构本身在 flyway.properties 文件中定义 -

```
flyway.schemas=dbo 
```

我找不到会导致此错误的 dev 和 staging/prod 之间的任何差异。

如果它有所作为，这是在“干净”和“初始化”之后发生的......

关于在哪里看的任何建议？

**编辑（对于未来有同样问题的人）：** Axel 关于登录在出现问题的服务器上没有默认架构是正确的。当我跑

```
SELECT SCHEMA_NAME() 
```

在我们的 DEV 服务器上，我得到了“dbo”；但是当我在我们的 ACC 和 PROD 服务器上运行它时，我只会得到“NULL”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T09:42:38.957

嗯，受影响系统上用户的默认架构似乎为空。

请提出问题，我将在下一个版本中删除此检查。

同时，如果你给你的用户一个默认的模式，你应该没问题。

# php - PHP AJAX POST数据传递然后自行删除？

> ID：15512676
> 
> 赞同：1
> 
> 时间：2013-03-19T23:46:55.153
> 
> 标签：php, javascript, jquery, ajax

因此，鉴于我最近的问题，我做了一些更深入的挖掘并遇到了这个奇怪的问题......我现在的问题是我无法将我的 _POST 传递给 PHP 变量，因为它一直以空数组的形式出现。然而，深入研究萤火虫，我注意到了这一点：

![图片](../Images/5a6faceb1c39ea8a449f13b3d57f6c19.png)

这意味着我的 POST 正在正确传递，但在渲染过程中的某个时候（？）它会自行删除或一些这样的废话。有谁能够解释这个或告诉我如何解决它？

提前致谢！

# android - Android/Java 验证大文件太慢

> ID：15512680
> 
> 赞同：1
> 
> 时间：2013-03-19T23:47:02.523
> 
> 标签：android, signature, verify

我目前在一个 Android 应用程序中有一个过程，它使用签名证书检查几个 ZIP 文件与签名文件，就像这里演示的一样（[http://docs.oracle.com/javase/tutorial/security/apisign/vstep4。 html](http://docs.oracle.com/javase/tutorial/security/apisign/vstep4.html) )

但是，由于我的文件都是 200MB - 900MB，因此需要 11-25 分钟才能完成所有文件并进行验证。我们目前正在使用“SHA1withRSA”并希望升级以使用“SHA256withRSA”。但是，这需要更长的时间，因为它是一种更增强的加密。这个应用程序的 iOS 对应版本在大约 2 分钟内完成了相同 ZIP 文件的验证，所以我想知道如何加快这个过程？更改缓冲区大小或重做 While 循环不会产生任何结果。

我想知道是否有一种方法可以仅验证 zip 的一部分，而不是遍历整个文件。

```
public boolean verify(String dataFile, String signFile) throws Exception {
    byte[] sign = readSignature(signFile);
    Signature sg = Signature.getInstance("SHA1withRSA", "BC");
    sg.initVerify(publicKey);

    FileInputStream datafis = new FileInputStream(dataFile);
    BufferedInputStream bufin = new BufferedInputStream(datafis);

    byte[] buffer = new byte[2048];

    int len;       

    while (bufin.available() !=0) {
        len = bufin.read(buffer);
        sg.update(buffer, 0, len);
    }

    bufin.close();
    return sg.verify(sign); 
```

# javascript - 使用 XMLHTTPRequest 的客户端性能问题

> ID：15512681
> 
> 赞同：0
> 
> 时间：2013-03-19T23:47:13.693
> 
> 标签：javascript, xmlhttprequest

我只是在玩一个为图像设计的简单的多重上传表单。我目前正在处理的是一个多重上传表单，它在用户提交表单之前发送 AJAX 请求。PHP 脚本只是将文件保存到服务器并调整图像大小。

发送请求时，会创建一个跨度，其中包含一个图像元素，其 id 对应于列表中的图像编号，并在源中放置一个 ajax 加载 gif。

当响应返回时，我通过它的 id 获取元素，并将源替换为保存在服务器上的图像。

到目前为止一切正常，只是速度非常慢。

完整代码在这里：[pastebin](http://pastebin.com/mJNbLH9x)

我几乎可以肯定问题正在发生，

```
 xmlHTTP.onreadystatechange = function(){
            if( xmlHTTP.readyState == 4 && xmlHTTP.status == 200){
                var jsonResponse = JSON.parse(xmlHTTP.responseText);

                var actualNumber = jsonResponse.imageNumber-1;

                console.log("Image #" + jsonResponse.imageNumber + " Took " + jsonResponse.scriptTime + " to process.");
                console.time('profileGetElementByIdforImage'+actualNumber);
                document.getElementById("preview"+actualNumber).setAttribute("src", jsonResponse.fullPath);
                console.timeEnd('profileGetElementByIdforImage'+actualNumber);
            }

        }; 
```

奇怪的是，如果我把它从本地机器上取下来并上传到我的服务器，它需要更长的时间，尽管 PHP 脚本时间要短得多。

我会得到这样的东西：

> Image #1 处理时间为 6.3307409286499 秒。
> 
> profileGetElementByIdforImage0：3ms

即使当我单击检查元素时实际 html 中的源代码发生了变化，ajax 加载 gif 仍然保留了一段时间......

我认为这可能与浏览器必须调整图像有关，所以我在 php 脚本中添加了“缩略图”功能。但是客户端花费的时间与我使用全尺寸图像时一样长。

所以现在我想知道，这与来自服务器的请求有什么关系吗？或者这是一个 DOM 问题？

任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T00:22:21.067

PHP 图像解析，尤其是调整大小需要相当长的时间，尤其是在图像很大的情况下。因此，如果 6 秒是发送 POST 请求所花费的时间，请调整大小并返回相当不错的图像。

为了让事情变得更快一点，我建议在 aSync 进程中抛出 POST 请求，一种天真的方法是：

```
window.setTimeout(function(){
  //POST Request
},1); 
```

然后，一旦图像返回，只需将其放在您想要的任何位置，这将使用户体验更好，并且不会阻止浏览器执行其他操作，因此它看起来会非常快。

# mongoid3 - 可比性问题 rails 4 beta, ruby 2.0.0, mongoid

> ID：15512683
> 
> 赞同：31
> 
> 时间：2013-03-19T23:47:33.510
> 
> 标签：mongoid3, ruby-on-rails-4, ruby-2.0

我正在使用以下版本的 rails、ruby 和 mongoid 创建一个测试应用程序。

```
rails 4 beta
ruby 2.0.0
mongoid 3.1.2 
```

我的`GemFile`长相是这样的

```
gem 'rails', '4.0.0.beta1'
ruby '2.0.0'
gem 'mongoid', '~> 3.1.2'
gem 'bson_ext' 
```

但是当我`bundle`在控制台上运行时，出现以下错误。

Bundler 找不到 gem "activemodel" 的兼容版本：

```
Fetching gem metadata from https://rubygems.org/...........
Fetching gem metadata from https://rubygems.org/..
Resolving dependencies...
Bundler could not find compatible versions for gem "activemodel":
  In Gemfile:
    mongoid (~> 3.1.2) ruby depends on
      activemodel (~> 3.2) ruby

    rails (= 4.0.0.beta1) ruby depends on
      activemodel (4.0.0.beta1) 
```

任何人都可以帮忙吗？请.....

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-03-26T09:54:55.770

使用来自 github 的 mongoid master，它支持 rails 4.0。

```
gem 'mongoid', git: 'https://github.com/mongoid/mongoid.git' 
```

# jquery - 空值的jQuery选择器

> ID：15512687
> 
> 赞同：0
> 
> 时间：2013-03-19T23:47:45.110
> 
> 标签：jquery, jquery-selectors

如何`.is()`在 jQuery 中创建一个选择器以与表示以下表达式的函数一起使用：

```
$('[name="Person[firstName]"]').val() === ''; // true
$('[name="Person[lastName]"]').val() === ''; // false 
```

使用此 HTML 上下文

```
<input name="Person[firstName]" value="" >
  <foo bar="true" />
</input>

<input name="Person[lastName]" value="ABCDEFGH" /> 
```

**:empty Selector** 选择所有没有子元素的元素（包括文本节点）。

```
 $('[name="Person[firstName]"]').is(':empty'); // false
 $('[name="Person[lastName]"]').is(':empty'); // true 
```

再试一次

```
$('[name="Person[firstName]"]').is('[value=""]'); // true
$('[name="Person[lastName]"]').is('[value=""]'); // true 
```

**注意：**这是一个用于知识目的的问题 - 并且**.is()**必须在此解决方案中使用。

**@edit** [http://jsfiddle.net/2CzWu/2/](http://jsfiddle.net/2CzWu/2/)

它必须在两个表达式上都返回 false

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T00:01:07.840

原因`:empty`不起作用是因为它正在寻找没有子节点的节点，这不是您要寻找的。

`$.is("[value='']")`仅适用于最初在 HTML 中设置的值，而不是通过脚本或 UI 更新它。那是因为当 DOM 对象是 时，属性选择器会查看`Node.getAttribute('value') === ''` [并且 XML 属性不会更新](http://jsfiddle.net/mendesjuan/5Eum7/)，但 DOM 属性`HTMLInputElement.value`会。

[所以我们真正需要的是一个自定义的伪选择器，它查看 DOM 属性的值](http://jsfiddle.net/mendesjuan/2CzWu/8/)，并且[实现起来非常简单](http://jquery-howto.blogspot.com/2009/06/custom-jquery-selectors.html)。它适用于`$.is`并与`:not()`

```
$.expr[':'].emptyVal = function(obj){
   return obj.value === '';
};

var $firstName = $('[name="Person[firstName]"]');

$firstName.val('AAAA');

$('input:emptyVal').size(); // 2
$('input:not(emptyVal)').size(); // 0
$firstName.is('input:emptyVal'); // false
$firstName.is('input:not(:emptyVal)'); // true 
```

# string - Erlang：将 TCP 发送的字符串转换成正确的形式，例如 <<"SomeString">> 到 "SomeString"？

> ID：15512689
> 
> 赞同：1
> 
> 时间：2013-03-19T23:47:59.763
> 
> 标签：string, tcp, formatting, erlang, client-server

我有一个客户端和一个服务器，我使用客户端发送一个字符串，例如`"Hello"`它在服务器端显示为`<<"Hello">>`. 有没有办法简单地转换`<<"Hello">>`回`"Hello"`? 我尝试使用，

```
String = io_lib:format("~p",[StringIn]),
            lists:flatten(String), 
```

但这使得格式`<<"Hello">>`变成了`[[60,60,"\"Hello\"",62,62]]`......

顺便说一下代码：

```
-module(ss1).
-compile(export_all).
-import(lists, [reverse/1]).

client() ->
    {ok, Socket} =  gen_tcp:connect("localhost", 2345,[binary, {packet, 4}]),
    ok = gen_tcp:send(Socket, "Hello"),
    receive
    {tcp,Socket,String} ->
        io:format("Client received = ~p~n",[String]),       
        io:format("Client result = ~p~n",[String]),
        gen_tcp:close(Socket)
    end.

server() ->
    {ok, Listen} = gen_tcp:listen(2345, [binary, {packet, 4},  {reuseaddr, true}, {active, true}]),
    {ok, Socket} = gen_tcp:accept(Listen),
    gen_tcp:close(Listen),  
    loop(Socket).

loop(Socket) ->
    receive
    {tcp,Socket,String} ->      
        io:format("Server received String = ~p~n",[String]),            
        io:format("Server replying String = ~p~n",[String]),
        gen_tcp:send(Socket, String), 
        loop(Socket);
    {tcp_closed, Socket} ->
        io:format("Server socket closed~n")
    end. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T10:53:46.513

原因是这一行：

```
{ok, Listen} = gen_tcp:listen(2345, [binary, {packet, 4},  {reuseaddr, true}, {active, true}]), 
```

具体来说，原子`binary`在选项中传递。如果你通过`list`，你会得到一个普通的字符串。请参阅. [_](http://www.erlang.org/doc/man/gen_tcp.html#listen-2)`gen_tcp:listen/2`

以下代码不起作用的原因：

```
String = io_lib:format("~p",[StringIn]),
lists:flatten(String), ... 
```

那`lists:flatten/1`实际上并没有*改变* `String`吗？它返回一个新列表，该列表是展平其参数的结果。这会奏效：

```
lists:flatten(io_lib:format("~p", [StringIn])). 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T01:05:54.553

您可以使用 erlang 模块中的函数 - binary_to_list。

```
 Eshell V5.9.1  (abort with ^G)

1> B = <<"Hello">>.
<<"Hello">>
2> erlang:binary_to_list(B).
"Hello"
3> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T11:19:34.903

如果您只想使用`io:format`or打印二进制文件`io_lib:format`，则可以使用`~s`格式说明符：

```
1> MyBinary = <<"Hello">>.
<<"Hello">>
2> io:format("MyBinary is '~s'~n", [MyBinary]).
MyBinary is 'Hello'
ok 
```

# php - 使用 htaccess 重定向动态 url，包括查询字符串

> ID：15512690
> 
> 赞同：1
> 
> 时间：2013-03-19T23:48:00.873
> 
> 标签：php, .htaccess, redirect, silex

我需要将一些网址从旧版本的网站重定向到新网址。我没有发现简单 url 的问题，但我无法让带有查询字符串的 url 工作：

```
Redirect 301 /product_detail.php?id=1 http://www.mysite.com/product/permalink 
```

它只是返回 404，未找到。

我也尝试过使用 Silex 上的路由（我正在使用的 PHP 微框架），但它也不起作用：

```
$app->get('/product_detail.php?id={id}', function($id) use ($app) {

    $prodotto = Product::getPermalink($id);

    return $app->redirect($app['url_generator']->generate('product',array('permalink'=>$prodotto)));
}); 
```

有没有办法通过一些 htaccess 规则让查询字符串被视为 url 的一部分并让它被正确重定向？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T03:47:54.657

> 重定向 301 /product_detail.php?id=1`http://www.mysite.com/product/permalink`

`Redirect`是一个不适合操作查询字符串的 mod_alias 指令：

> mod_alias 旨在处理简单的 URL 操作任务。对于操作查询字符串等更复杂的任务，请使用 mod_rewrite 提供的工具。
> 
> [从Apache mod_alias 文档](http://httpd.apache.org/docs/2.2/mod/mod_alias.html)中提取

所以，`mod_rewrite`应该使用。根目录中的一个 .htaccess 文件中的相同示例将是这样的：

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI} ^/product_detail\.php  [NC]
RewriteCond %{REQUEST_URI} !/product/permalink    [NC]
RewriteRule .*   /product/permalink       [R=301,NC,L] 
```

它重定向

`http://www.mysite.com/product_detail.php?id=1`

至：

`http://www.mysite.com/product/permalink?id=1`

查询会自动附加到替换 URL。

对于内部映射，将 [R=301,NC,L] 替换为 [NC,L]

# java - Java - 消除字符串中的特定字符和空格

> ID：15512693
> 
> 赞同：0
> 
> 时间：2013-03-19T23:48:21.497
> 
> 标签：java, swing, jtable

我正在使用 JTables，并且我已成功获取表的内容并将它们放入字符串数组中。然后我将数组的每个元素连接成一个字符串。

我需要帮助从字符串中删除特定的字符和空格，如下所示：

tableDataAsString 是：

```
[ABCD, EFGH, IJKL, null][MNOP, QRST, UVWX, null]
[YZAB, CDEF, GHIJ, null][KLMN, OPQR, STUV, null]
[WXYZ, ABCD, EFGH, null] 
```

以上是最后一个 System.out.println 打印的内容。我的代码如下：

```
 // Get table data as String
 public void getTableContent() {
     //System.out.println("x-x-x-x-x-x Get table content in string format has started x-x-x-x-x-x ");

     int nRow = getRowCount(), nCol = getColumnCount();

     Object[][] tableData = new Object[nRow][nCol];

     // For loops used to run thriugh rows and columns in order to fetch cell values
     for (int i = 0 ; i < nRow ; i++)
         for (int j = 0 ; j < nCol - 1 ; j++)
                tableData[i][j] = getValueAt(i,j);

     // Prepare string array which will contain cell values
     String tableDataAsStringArray[] = new String[tableData.length];

     // Write cell values into string array
     for (int i = 0; i < tableDataAsStringArray.length; i++ ) {
         tableDataAsStringArray[i] = java.util.Arrays.toString(tableData[i]);

         System.out.println("getTableContent() - Table data in row " + i + " of string array is: " + tableDataAsStringArray[i]);
     }

     StringBuilder builder = new StringBuilder();

     // Append all the cell values into a single string
     for(String s : tableDataAsStringArray) {
         builder.append(s);
     }

     String tableDataAsString = builder.toString();

     System.out.println("getTableContent() - tableDataAsString is: " + tableDataAsString);

     //System.out.println("x-x-x-x-x-x  Get table content in string format has ended x-x-x-x-x-x ");
 } 
```

更具体地说，我想删除 [] 并用分号 (); 替换 null。所以替换后我的理想结果是：ABCD,EFGH,IJKL;MNOP,QRST,UVWX;YZAB,CDEF,GHIJ;KLMN,OPQR,STUV;WXYZ,ABCD,EFGH

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T23:57:43.387

```
myRedactedString = myString.replaceAll("[badchars]", "x"); 
```

替换`badchars`为您要替换的实际字符。替换`x`为您想要替换它们的内容，可能是空字符串。`[`请记住根据正则表达式规则转义字符。例子：

```
myCompressedString = myString.replaceAll("[, \[\]]", ""); 
```

--- 编辑添加

```
after = before.replaceAll("null", ";").replaceAll("[\[\] ]", ""); 
```

请注意，第二个 replaceAll 中的空间需要吃掉源空间。

# actionscript-3 - 作为 HTML 5 IDE 的独立 FlashBuilder 4.6？

> ID：15512694
> 
> 赞同：0
> 
> 时间：2013-03-19T23:48:34.870
> 
> 标签：actionscript-3, flash

我知道使用 Eclipse 我可以获得插件来进行 HTML 5 开发，但我可以使用独立的 FlashBuilder 4.6 来完成它吗？

我尝试通过下载 JSDT 并出现错误。

感谢您的任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:36:37.910

我无法使用 FlashBuilder 4.6 完成它，所以我下载了最新版本的 Eclipse 并安装了 Google Webkit 来进行 HTML5 开发。

# java - Java中的框架：直接公开实现与接口是否正确？

> ID：15512695
> 
> 赞同：0
> 
> 时间：2013-03-19T23:48:38.603
> 
> 标签：java, interface

我已经看到了几个关于是否所有 Java 类都应该实现接口的答案。意见不同，如果我确定只有一个实现，我个人看不到编写接口的好处。

然而，在这种情况下，这个特定的类是框架的一部分，将被其他人使用。让用户直接使用实现是否合适，或者我应该为它创建一个接口？现在我正在通过公共/私人控制用户对方法的访问。

诸如此类的类`String`不实现接口，我们直接使用它们。另一方面，该代码已经很老了，也许从那时起事情已经发生了变化，并且没有更新它以避免破坏某些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T00:00:19.367

如果您控制实例的创建方式，那么您发布的内容无关紧要。如果您不控制实例的创建方式，那么这很重要。

客户端不能创建接口，他们只能创建实现它们的具体对象。

但是，如果实例总是通过您控制的某种机制（工厂、查找、注入等）创建，那么大多数情况下，接口、抽象类或具体类之间的区别根本不成问题。

如果期望客户扩展实例，那么这也会产生影响。您可以扩展接口，但不能以扩展普通类的方式。机制和后果有点不同。

最后，大多数时候，一个具体的类可以转换为一个接口，没有人比它更聪明，除非他们创建自己的实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T00:23:10.553

首先：对*任何事情*不要教条主义通常是个好主意。

可以这样想：当你建造房子时，你不应该决定要使用一种钉子——你不能对所有东西都使用钉子，它们是故意设计成不同尺寸的让您在需要时选择最适合您的特定需求和材料的类型。

因此，如何以及何时使用接口完全取决于类的类型、结构和预期用途。您当然不必总是为每个类使用一个接口——尤其是如果您重视 SRP 并保持您的类很小并且仅限于单一职责时。但有时您可能想要这样做，有时您甚至会找到在同一个类中实现多个接口的充分理由。

关于接口的重要一点是，您可以使用它们从特定实现中*抽象*出来，而不管您将拥有多少不同的实现。这样做有很多可能的原因，例如让其他人为您处理实例化（例如应用程序服务器；这种方法经常用于框架，顺便说一句），解耦组件以改进依赖管理，不要忘记单元测试（它是模拟对象要容易得多，当您的代码仅引用接口时）等等。这不是应该根据 API 实现的次数来决定的，而是要选择保存代码的最佳方式结构清晰，松耦合且可读。

要决定做什么，首先要更多地了解你正在建造的房子：查看[SOLID 原则](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)并尝试很好地应用这些原则 - 你会更多地了解抽象和接口，以及它们应该用于什么。他们也不会对所有事情都有答案，但是从那时起，您可以开始进行自己的观察，并可能发明自己的原则来处理他们未涵盖的内容。他们绝对是一个开始的好地方。

# git - 用.git中repo的实际内容替换git repo的工作副本？

> ID：15512700
> 
> 赞同：1
> 
> 时间：2013-03-19T23:49:01.360
> 
> 标签：git, perforce, git-p4

# TLDR

强制工作副本的内容成为 .git 子文件夹中 repo 中的实际内容的 git 命令是什么？（如果更改从另一台机器推送到具有工作副本的远程仓库）

# 很长的故事

我希望我公司内使用 perforce 的团队迁移到 git。我想使用 Git-P4 来实现这一点。我想将一部分 perforce 克隆到 git repo，并将其设为远程 repo，以便人们克隆它，将更改推送到远程 repo，我会定期将远程 repo 中所做的更改重新提交回 perforce . 所以我跟着这个教程

[http://answers.perforce.com/articles/KB_Article/Git-P4](http://answers.perforce.com/articles/KB_Article/Git-P4)

归结为这个命令：

```
git p4 clone //depot/path.to/folder@all folder 
```

那行得通，然后在我的客户端机器上我做

```
git clone "user1@server:/home/user1/path/to/folder" 
```

这很好，它出现了，所以我对测试文件进行了编辑，然后执行

```
git add test7
git commit -m 'test'
git push 
```

当我尝试将其推回远程仓库时，我在客户端收到此错误

```
git push
user1@server1's password: 
Counting objects: 5, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (2/2), done.
Writing objects: 100% (3/3), 273 bytes, done.
Total 3 (delta 1), reused 1 (delta 0)
remote: error: refusing to update checked out branch: refs/heads/master
remote: error: By default, updating the current branch in a non-bare repository
remote: error: is denied, because it will make the index and work tree inconsistent
remote: error: with what you pushed, and will require 'git reset --hard' to match
remote: error: the work tree to HEAD.
remote: error: 
remote: error: You can set 'receive.denyCurrentBranch' configuration variable to
remote: error: 'ignore' or 'warn' in the remote repository to allow pushing into
remote: error: its current branch; however, this is not recommended unless you
remote: error: arranged to update its work tree to match what you pushed in some
remote: error: other way.
remote: error: 
remote: error: To squelch this message and still keep the default behaviour, set
remote: error: 'receive.denyCurrentBranch' configuration variable to 'refuse'.
To user1@server1:/home/user1/path/to/folder
 ! [remote rejected] master -> master (branch is currently checked out)
error: failed to push some refs to 'user1@server1:/home/user1/path/to/folder' 
```

这是解释here

[在 Git 中使用 receive.denyCurrentBranch 有什么后果？](https://stackoverflow.com/questions/12265729/git-config-receive-denycurrentbranch)

所以我设置

```
git config receive.denyCurrentBranch ignore 
```

并再次尝试并 git push 工作。但是这次回到远程仓库，它可以工作，但是当我尝试执行 git status 时它会抱怨一些不同的东西

```
git status
# On branch master
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#   deleted:    test7
# 
```

它告诉我这是因为远程仓库中的工作副本与刚刚推送到远程仓库的工作副本不同。git p4 submit 和 git p4 rebase work 他们还抱怨这些未提交的更改

```
git p4 submit
Perforce checkout for depot path //depot/path.to/folder/ located at /home/user1/path/to/perforce.folder/
Synchronizing p4 checkout...
... - file(s) up-to-date.
Applying 38f67b9 cym: test 7 from linux
//depot/path.to/folder/test7#1 - opened for add
//depot/path.to/folder/test7#1 - nothing changed
Submit template unchanged. Submit anyway? [y]es, [n]o (skip this patch) y
Change 254654 created with 1 open file(s).
Submitting change 254654.
Locking 1 files ...
add //depot/path.to/folder/test7#1
Change 254654 submitted.
All commits applied!
Performing incremental import into refs/remotes/p4/master git branch
Depot paths: //depot/path.to/folder/automation/
Import destination: refs/remotes/p4/master
Importing revision 254654 (100%)
You have uncommited changes. Please commit them before rebasing or stash them away with git stash.

git p4 rebase
Performing incremental import into refs/remotes/p4/master git branch
Depot paths: //depot/path.to/folder/
No changes to import!
You have uncommited changes. Please commit them before rebasing or stash them away with git stash. 
```

随着时间的推移，这似乎会成为一个大问题。我不想将工作副本永久留在该状态的远程仓库中。

所以我必须弄清楚如何用 .git 文件夹中的实际存储库索引强制覆盖工作存储库的内容。

现在我发现了这个

[如何丢弃 Git 中未暂存的更改？](https://stackoverflow.com/questions/52704/how-do-you-discard-unstaged-changes-in-git)

哪个说这样做

```
git stash save --keep-index
git stash drop 
```

或者这样做

```
git checkout -- . 
```

这些都没有奏效。他们看起来像他们工作，但添加的文件仍然不存在，并且 git status 仍然显示由于工作副本和索引之间的差异导致的未分级更改。

```
git stash save --keep-index
Saved working directory and index state WIP on master: 38f67b9 cym: test 7 from linux
HEAD is now at 38f67b9 cym: test 7 from linux
git stash drop
Dropped refs/stash@{0} (3ce5805230e4faa3ec4dd2daa9cb65c86335e1a8)
git status
# On branch master
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#   deleted:    test7
#

git checkout -- .

git status
# On branch master
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#   deleted:    test7
# 
```

那么我如何强制工作副本代表 repo 中实际内容的内容呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T01:49:41.063

`git checkout -f`获取存储库中所有文件的最新版本。`git clean -f`在根目录中删除所有不受版本控制`git clean -f -x`的文件，还删除显式忽略的文件（在`.gitignore`文件中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T08:55:36.203

您可以使用以下命令将头部设置为任何状态：

`git reset --hard REFSPEC`

# python - Pyside ping 一个 ip 的列表

> ID：15512704
> 
> 赞同：1
> 
> 时间：2013-03-19T23:49:15.147
> 
> 标签：python, pyqt, pyside

我正在使用 PySide 在 python 中编写一个程序，并解析一个文件以获取 IP 地址并 ping 它们以查看它们是否已启动，并将其显示在 QTreeWidget 中。我遇到的问题是程序在输出数据之前 ping 所有客户端，导致程序在 ping 时“冻结”。如何在程序不冻结的情况下 ping IP 地址并打印输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:13:37.857

您可以从 a ping 您的地址`QThread`，例如：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

from PyQt4 import QtCore

class PingThread(QtCore.QThread):
    addressState = QtCore.pyqtSignal(bool, QtCore.QString)

    def __init__ (self):
       super(PingThread, self).__init__()

    def start(self, addressList):
       self.addressList = addressList

       super(PingThread, self).start()

    def run(self):
        for address in self.addressList:
            status = True
            ping   = os.popen('ping -q -c2 {0}'.format(address), 'r')
            while True:
               line = ping.readline()
               if not line:
                   break
               if line.find('100% packet loss') > 0:
                   status = False

            self.addressState.emit(status, address) 
```

您的主小部件中需要这样的东西：

```
self.pingThread = PingThread()
self.pingThread.addressState.connect(self.on_pingThread_addressState)
self.pingThread.start(myListOfAddresses) 
```

当然还有一个名为 的插槽`on_pingThread_addressState`。

# iphone - 如何在没有振动的情况下在 iOS 上播放系统声音？

> ID：15512709
> 
> 赞同：20
> 
> 时间：2013-03-19T23:50:18.273
> 
> 标签：iphone, ios, cocoa-touch

在[AudioServicesPlayAlertSound](http://developer.apple.com/library/ios/#documentation/AudioToolbox/Reference/SystemSoundServicesReference/Reference/reference.html)的文档中，它说我可以在播放声音时禁用振动：

> iPhone—播放指定的声音。如果用户已将设置应用程序配置为振铃振动，也会调用振动。但是，如果您的应用程序的音频会话配置了 AVAudioSessionCategoryPlayAndRecord或 AVAudioSessionCategoryRecord 音频会话类别，**则设备不会振动。**

但是，即使在将我的类别设置为“播放和录制”后，我的 iPhone 4S (iOS 5.1.1) 仍然感到震动。它同时响起和振动。

```
#import <AudioToolbox/AudioServices.h>
#import <AVFoundation/AVAudioSession.h>

NSError* error;
[[AVAudioSession sharedInstance]
    setCategory:AVAudioSessionCategoryPlayAndRecord
    error:&error];
if (error == nil) {
    AudioServicesPlayAlertSound(1000);
} 
```

我也试过`AudioServicesPlaySystemSound`，但结果是一样的。我想禁用振动的原因是因为我正在制作一个应用程序，用户必须将她的手机放在很远的地方，并且手机不应该因振动而翻倒。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T06:28:33.900

我用我的 iPhone 4s 对此进行了测试，它完全符合您的要求。

```
 NSError* error;
    [[AVAudioSession sharedInstance]
     setCategory:AVAudioSessionCategoryPlayAndRecord
     error:&error];
    if (error == nil) {
        SystemSoundID myAlertSound;
        NSURL *url = [NSURL URLWithString:@"/System/Library/Audio/UISounds/new-mail.caf"];
        AudioServicesCreateSystemSoundID((__bridge CFURLRef)(url), &myAlertSound);

        AudioServicesPlaySystemSound(myAlertSound);

    } 
```

用于`AudioServicesCreateSystemSoundID`创建一个`SystemSoundID`使用系统声音的文件名。然后用于`AudioServicesPlaySystemSound()`播放没有振动的声音。其他系统声音的文件名可以在下面的链接中找到。

[http://iphonedevwiki.net/index.php/AudioServices](http://iphonedevwiki.net/index.php/AudioServices)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T10:07:24.283

您是否尝试过播放自己的音效而不是 Apple 的内置音效？

如果您在您的应用程序中上传音频文件，您可以通过 AudioToolBox 框架轻松使用它，您不必再担心振动了。

```
#import <AudioToolbox/AudioServices.h>    

//Initialise your soundID (your app delegate is a good place for this)    
SystemSoundID soundToPlay;

NSString *path  = [[NSBundle mainBundle] pathForResource:@"<YourFileName>" ofType:@"aif"];
NSURL *pathURL = [NSURL fileURLWithPath : path];
AudioServicesCreateSystemSoundID((__bridge CFURLRef) pathURL, &soundToPlay);

//playback
AudioServicesPlaySystemSound(soundToPlay); 
```

# c - 为什么 -~x 等于 x+1？

> ID：15512713
> 
> 赞同：-3
> 
> 时间：2013-03-19T23:50:52.987
> 
> 标签：c, twos-complement

在[2006 年混淆 C 代码竞赛中。请解释 sykes2.c](https://stackoverflow.com/q/15393441/2172038)，

有一个声明“`-~i == i+1`因为二进制补码”。

有人可以解释为什么会这样吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T23:54:43.620

`-~x`等于`x+1`因为`~x`等于`(0xffffffff-x)`。这等于`(-1-x)`2s 补码，`-~x`所以`-(-1-x) = x+1`.

# knockout.js - 无法检测自定义绑定中的事件

> ID：15512716
> 
> 赞同：0
> 
> 时间：2013-03-19T23:51:15.863
> 
> 标签：knockout.js, ko-custom-binding

尝试创建一个自定义绑定，它将检测两个输入框之一中的值何时发生变化，当它们发生变化时，我想启用“保存”按钮。最初，“保存”按钮被禁用。我似乎无法让它检测到事件，我试图在两个输入框上都使用 isDirty 标志，所以如果其中一个检测到更改，我会显示“保存”按钮。使用事件绑定来检测用户何时进行更改会更好吗？我认为自定义绑定会更好。isDirty 标志适用于我的错误消息显示。

```
HTML:
<span>Global Percentage:</span> 
<input id="spaceGlobalPercentage" type="text" data-bind="value: globalPercent, valueUpdate: 'afterkeydown'" class="topInput" />

<span>Adjustment Factor:</span>
<input type="text" data-bind="value: adjustmentFactor, valueUpdate: 'afterkeydown'"class="topInput" />

<input type = "button" class="submitPercentCancelButton" id="submitPercentButton" value="Save" data-bind="click: save, enable: enableButton, buttonVisible: enableButton"> 
```

//自定义绑定

```
 ko.bindingHandlers.buttonVisible = {
    update: function (element, valueAccessor) {
        //var value = valueAccessor(valueAccessor());
        //var buttonUnwrapped = ko.utils.unwrapObservable(value);

        var value1Unwrapped = ko.utils.unwrapObservable(valueAccessor(my.vm.globalPercent.isDirty));
        var value2Unwrapped = ko.utils.unwrapObservable(valueAccessor(my.vm.adjustmentFactor.isDirty));

        if (value1Unwrapped || value2Unwrapped ) {               
            my.vm.enableButton(true);
        }
    }
}; 
```

// 检查是否有变化

```
 ko.subscribable.fn.trackDirtyFlag = function() {
        var original = this();

        this.isDirty = ko.computed(function() {
            return this() !== original;
        }, this);

        return this;
    }; 
```

// 视图模型

```
 my.vm = {
         globalPercent: ko.observable("").extend({ required: "Enter a Global Percent, between 1 and 100." }).trackDirtyFlag(),
        adjustmentFactor: ko.observable("").extend({ required: "Enter an Adjustment Factor, between 1 and 100." }).trackDirtyFlag(),
        enableButton: ko.observable(false), 
```

..... };

// 应用绑定

```
ko.applyBindings(my.vm); 
```

感谢您的任何建议或帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T02:05:24.833

在这种情况下，似乎自定义绑定可能太多了。我会`ko.computed`根据`isDirty`每个字段的状态使用：

```
var vm = {
    globalPercent: ko.observable("").extend({
        required: "Enter a Global Percent, between 1 and 100."
    }).trackDirtyFlag(),
    adjustmentFactor: ko.observable("").extend({
        required: "Enter an Adjustment Factor, between 1 and 100."
    }).trackDirtyFlag(),
    save: function () {
        alert('saved');
    }
};

vm.enableButton = ko.computed(function () {
    return this.globalPercent.isDirty() || this.adjustmentFactor.isDirty();
}, vm); 
```

**示例：http:** [//jsfiddle.net/82wkk/](http://jsfiddle.net/82wkk/)

# php - 如何替换从数据库生成的一行代码以根据用户选择填充页面

> ID：15512718
> 
> 赞同：-4
> 
> 时间：2013-03-19T23:51:21.790
> 
> 标签：php, jquery, html, css

我有一个网站，其中包含许多项目的目录。每个项目都是从数据库中填充的。

我希望能够根据用户单击的内容更改页面的内容。很难解释我的意思。

到目前为止，我有这个：

```
<section id="images" style="width:400px; float:left; height:auto;">

    <p><?php $load_content->load_content('1001');?></p> 
```

基本上我想使用 jquery 将“1001”更改为“1002”。我可以自己手动执行此操作，它会适当地更改内容。但是，我想将其设置为，如果用户单击包含 1001-1024 之间任何数字的项目，则会加载相应的图像。如果你明白我的意思。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:57:31.930

我什至不会详细说明您选择如何显示数据。
虽然您不能使用 jQuery 替换一行 PHP 代码，但我认为您想要的是 GET 或 POST，以便从特定的 php 文件中获取该数据并动态加载它，而无需离开或刷新页面。

所以这里是一个$.ajax的例子，相当于get。

```
`$.ajax({
url: url,
data: data,
success: success,
dataType: dataType
});` 
```

一个使用示例：

```
`$.get("yourpage.php", { id: 2002 }, function(data) {  
alert("Your new content: " + data);  
});` 
```

然后将内容插入到 div 或其他内容中，方法是将以下行放在函数旁边，例如：

`$('#your_target_div').html(data);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T23:53:55.923

不。

您必须了解 php 是服务器端，而 jquery (javascript) 是客户端。因此 PHP 在到达浏览器之前在服务器上执行，而 jquery 仅在浏览器本身中执行。因此，您无法返回并将 1001 的值更改为 1002。

因此，您唯一的选择是 AJAX 或刷新页面。

编辑：

以上是问题的答案，但实际上，您可以使用 javascript 和 jquery 轻松加载图像，您不需要 PHP。

# c# - 如何用不同的文本更新组合框的文本框

> ID：15512719
> 
> 赞同：0
> 
> 时间：2013-03-19T23:51:28.343
> 
> 标签：c#, .net, wpf, events, user-interface

我有一个可编辑的组合框。当用户选择一个项目时，我想将文本框中的文本覆盖为与所选值不同的值。例如，无论用户选择什么，我都希望在可编辑组合框的文本框中显示以下内容：“[选定表]”。这是我到目前为止所尝试的：

```
private void cmbValue1_SelectionChanged(object sender, SelectionChangedEventArgs e)
        {
            ComboBoxItem selection = (sender as ComboBox).SelectedItem as ComboBoxItem;

            //If the tag is a TableContainer, then the user has selected a sub-query.
            if (selection != null && selection.Tag != null && selection.Tag.GetType() == typeof(TableContainer))
            {
                (sender as ComboBox).Text = "[Selected Table]";
            }
        } 
```

而是显示用户的实际选择值，所以我认为一旦编译器完成我的方法实现，它就会转到其他地方并将文本更改为所选项目的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T00:45:03.263

您可以覆盖`ItemTemplate`and `ItemContainerStyle`，这样下拉列表中的 Items 将正确显示，但 ComboBox 中的 Item 将是`"[Selected Table]"`

例子：

```
 <ComboBox ItemsSource="{Binding Items}">
    <ComboBox.ItemTemplate>
        <!-- The template for the SelectedItem -->
        <DataTemplate>
            <TextBlock Text="[Selected Table]" />
        </DataTemplate>
    </ComboBox.ItemTemplate>
    <ComboBox.ItemContainerStyle>
        <!-- The style for the dropdown items -->
        <Style TargetType="{x:Type ComboBoxItem}">
            <Setter Property="Template">
                <Setter.Value>
                     <!-- Add dataTemplate here if you are binding to complex object -->
                    <ControlTemplate TargetType="{x:Type ContentControl}">
                        <TextBlock Text="{Binding}"/>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </ComboBox.ItemContainerStyle>
</ComboBox> 
```

工作副本：

xml:

```
<Window x:Class="WpfApplication9.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="132" Width="278" Name="UI">

    <StackPanel DataContext="{Binding ElementName=UI}">
        <ComboBox ItemsSource="{Binding Items}">
            <ComboBox.ItemTemplate>
                <DataTemplate>
                    <TextBlock Text="[Selected Table]" />
                </DataTemplate>
            </ComboBox.ItemTemplate>
            <ComboBox.ItemContainerStyle>
                <Style TargetType="{x:Type ComboBoxItem}">
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="{x:Type ContentControl}">
                                <TextBlock Text="{Binding}"/>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </ComboBox.ItemContainerStyle>
        </ComboBox>
    </StackPanel>
</Window> 
```

代码：

```
public partial class MainWindow : Window
{
    public MainWindow() 
    {
        InitializeComponent();
        Items.Add("Item1");
        Items.Add("Item2");
        Items.Add("Item3");
        Items.Add("Item4");
    }

    private ObservableCollection<string> _items = new ObservableCollection<string>();
    public ObservableCollection<string> Items
    {
        get { return _items; }
        set { _items = value; }
    }
} 
```

结果：

下拉：已![在此处输入图像描述](../Images/aece548c8033ea532da4b0d0d60be98d.png)选择：![在此处输入图像描述](../Images/f885c4a9b33efc6db801c11a3f1a22ab.png)

* * *

## 编辑：

也许这个？

```
<Window x:Class="WpfApplication17.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication17"
        Title="MainWindow" Height="350" Width="500" Name="UI">
    <StackPanel DataContext="{Binding ElementName=UI}">
        <ComboBox x:Name="combo" ItemsSource="{Binding Items}">
            <ComboBox.ItemTemplate>
                <DataTemplate>
                    <TextBlock>
                        <TextBlock.Style>
                            <Style TargetType="TextBlock">
                                <Setter Property="Text" Value="{Binding}" />
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding IsDropDownOpen, ElementName=combo}" Value="false">
                                        <Setter Property="Text" Value="{Binding MyText, ElementName=UI}" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </TextBlock.Style>
                    </TextBlock>
                </DataTemplate>
            </ComboBox.ItemTemplate>
        </ComboBox>
    </StackPanel> 
```

代码：

```
public partial class MainWindow : Window, INotifyPropertyChanged
{
    private string _myText;
    private ObservableCollection<string> _items = new ObservableCollection<string>();

    public MainWindow()
    {
        InitializeComponent();
        Items.Add("Item1");
        Items.Add("Item2");
        Items.Add("Item3");
        Items.Add("Item4");
        MyText = "StackOverflow";
    }

    public string MyText
    {
        get { return _myText; }
        set { _myText = value; OnPropertyChanged("MyText"); }
    }

    public ObservableCollection<string> Items
    {
        get { return _items; }
        set { _items = value; }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    public void OnPropertyChanged(string e)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(e));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T00:21:40.500

解决问题中所要求的唯一方法是删除该事件，然后再将其添加回来。如果不重写类并自己构建此功能或使用替代方法，则无法阻止事件的触发。

```
 private void cmbValue1_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        ComboBoxItem selection = (sender as ComboBox).SelectedItem as ComboBoxItem;

        //If the tag is a TableContainer, then the user has selected a sub-query.
        if (selection != null && selection.Tag != null && selection.Tag.GetType() == typeof(TableContainer))
        { 
            //This is the only way to disable an event action
            (sender as ComboBox).TextChanged -= sender_OnTextChanged; 
            (sender as ComboBox).Text = "[Selected Table]";
            (sender as ComboBox).TextChanged += sender_OnTextChanged; 

            //But as said above though, you could also do this:
            (sender as ComboBox).SelectedText = "[Selected Table]";
        }
    } 
```

# sql - 使用 NULL 值更新所有列

> ID：15512722
> 
> 赞同：0
> 
> 时间：2013-03-19T23:51:50.260
> 
> 标签：sql, database, sql-server-2012

我有一张非常简单的桌子，我们称之为三星。在此表中，我有一个名为 description 的列，其中包含 samsung_id 为 200 和 201 的两个值。对于这两个条目，我的描述值为“NULL”。我希望能够更新所有这些。我知道我可以运行以下命令：

```
UPDATE SAMSUNG
SET description = 'square'
WHERE samsung_id = 200 OR samsung_id = 201; 
```

为了达到我想要的结果，但是如果您的表有 1,000 个条目并且您不想将它们列出来怎么办。您将如何运行此命令来取出 NULL 的所有值并用正方形替换。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T23:53:46.217

```
UPDATE SAMSUNG
SET description = 'square'
WHERE description IS NULL 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T23:57:57.407

```
 UPDATE SAMSUNG
SET description = 'square'
WHERE description IS NULL or description = 'NULL' 
```

如果您在描述中保存字符串值“NULL”。

# java - 将数组转换为 ArrayList 的通用方法

> ID：15512729
> 
> 赞同：2
> 
> 时间：2013-03-19T23:52:25.167
> 
> 标签：java, generics

我有一种将数组转换为 ArrayList 的方法，如下所示：

```
 public static <T> ArrayList<T> getArrayList(T[] a){
        ArrayList<T> retList = new ArrayList<T>();
        for (T i : a){ 
            retList.add(i); 
        }
        return retList;
    } 
```

这适用于对象数组，例如：

```
 String[] arr = {"String","'nother string","etc"};
    ArrayList<String> stringList = initArrayList(arr); 
```

但不是原始数组：

```
 int[] arr2 = {1,2,3};
    ArrayList<Integer> intList = initArrayList(arr2); //Compiler is insulted by this. 
```

我想如果我想让该方法工作，我必须将数组转换为整数数组，但是有没有办法让该方法更聪明地处理它的处理方式？

Java 教程站点具有以下内容：

```
 static <T> void fromArrayToCollection(T[] a, Collection<T> c) {
        for (T o : a) {
            c.add(o); // Correct
        }
    } 
```

这会起作用，但我想要创建 ArrayList 的方法。

另外，这只是我自己的娱乐，所以Collection的类型并不重要，我在编写方法时只是使用了ArrayList。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T23:58:41.087

有现成可用的方法`java.util.Arrays.asList`和`com.google.common.primitives.Ints.asList`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T23:59:19.253

没有可以与原语一起使用的泛型方法，因为原语不能是泛型类型。最接近纯 Java 的方法是重载`getArrayList`一个`int[]`...

```
public static ArrayList<Integer> getArrayList(int[] a){
    ArrayList<Integer> retList = new ArrayList<Integer>();
    for (int i : a){ 
        retList.add(i); 
    }
    return retList;
} 
```

这将为您装箱`int`。它不是通用的，您需要为每个原始数组类型重新重载，但这是我能想到的最接近的解决方案。

# css - 使用 CSS 将文本向上移动 45 像素

> ID：15512730
> 
> 赞同：0
> 
> 时间：2013-03-19T23:52:36.367
> 
> 标签：css

我想将文本**“HOW IS IT”**移到45 像素顶部，我不确定我应该在 CSS 的 policymain 类中添加什么，这是我的 HTML 和 CSS

```
<style>
.policymain{width:975px; float:left; margin:0px 0 20px 0px; border-bottom:solid 2px #ccc; padding:12px 0 10px 0px}
</style>

<div id="wrapper">
<div class="midbox">
  <div id="content_area">
    <table width="100%" border="0" cellspacing="5" cellpadding="5" align="center">
        <tr> 
          <td>
<div class="policymain"><b><span style="font-size:30px; font-family:'Myriad Pro'; color:#174480;">HOW IS IT</span></b></div>
<br>
<br>
</div>
          </td>
        </tr>
</table>
 </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T23:57:21.403

要将其从当前位置向上移动 45px，您可以使用`position: relative; top: -45px;`或者`position: absolute; margin-top: -45px;`如果您希望它从页面顶部向上移动 45px，请使用`position: absolute; top: 45px;`

# php - 如何循环mysql_query直到结果？

> ID：15512731
> 
> 赞同：0
> 
> 时间：2013-03-19T23:52:40.947
> 
> 标签：php, mysql

我有一个嵌套产品类别表。我想从字段中获取数据`custom_inserts_ru`，如果它为空 - 转到顶部（父类别）并再次检查。

```
$mycat = 1146;
$result = mysql_query("SELECT categoryID, parent, custom_inserts_ru FROM SC_categories WHERE categoryID=$mycat");
while($row = mysql_fetch_row($result)) {
    if($row[2]==''){
        $mycat = $row[1];
    } else {
        echo "$row[1] <pre>$row[2]</pre>";
    }
} 
```

我试试这个，但不工作（

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T00:43:48.177

我会这样做

```
function get_inserts ($db, $id) {
    $base_sql = "SELECT c.categoryID, 
           c.parent, 
           IFNULL(c.custom_inserts_ru, p.custom_inserts_ru) custom_inserts_ru, 
           p.parent parent_parent
      FROM SC_categories c LEFT JOIN
           SC_categories p ON c.parent = p.categoryID
     WHERE c.categoryID=";

    $inserts = "";
    do {
        $result = mysql_query ($base_sql . $id, $db);
        if (!$result) break;
        $row = mysql_fetch_assoc($result);
        $inserts = $row['custom_inserts_ru'];
        $id = $row['parent_parent'];

    } while (strlen($inserts) == 0 && $id);

    if($result) {
        mysql_free_result ($result);
    }
    return $inserts;
 } 
```

为了减少对深度类别树的后续查询的数量，引入了自联接，该自联接`custom_inserts_ru`从当前类别或其直接父项中获取值。

使用它

```
$mycat = 1146;
$db = mysql_connect(...);
if (!$db) {
    die('Not connected : ' . mysql_error());
}
$db_selected = mysql_select_db('test', $db);
if (!$db_selected) {
    die ('Unable to select database : ' . mysql_error());
}

$inserts = get_inserts($db, $mycat);
echo "custom_inserts_ru for Id $currentID is '$inserts'";
mysql_close($db); 
```

*由于[不推荐使用](http://php.net/manual/en/intro.mysql.php)`mysql_*`扩展，您最好切换到[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)并使用[准备好的语句](http://goo.gl/vn8zQ)。*

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-19T23:58:38.437

你真的根本没有用谷歌搜索任何东西，这就像最基本的东西，无论如何：

`while ($row = mysql_fetch_row($result)) {
//In a cycle
}`

# javascript - 使用 D3 更改形状文件投影以进行可视化

> ID：15512733
> 
> 赞同：3
> 
> 时间：2013-03-19T23:52:58.483
> 
> 标签：javascript, maps, d3.js, geo, map-projections

我正在尝试制作一个涉及英国地图的可视化，以及所有约 650 个选区。我按照这个优秀的教程[http://bost.ocks.org/mike/map/](http://bost.ocks.org/mike/map/)绘制了地图，效果很好。然而，我能找到选区的唯一来源是军械调查（Natural Earth 有县，但没有选区）。问题是操作系统选区文件不包含相同类型的坐标（您可能会说，我不是 GIS 专家），它们使用横向墨卡托投影。以下是我尝试转换的数据的 .prj 文件的属性：

```
PROJCS["British_National_Grid",GEOGCS["GCS_OSGB_1936",DATUM["D_OSGB_1936",SPHEROID["Airy_1830",6377563.396,299.3249646]],PRIMEM["Greenwich",0],UNIT["Degree",0.0174532925199433]],PROJECTION["Transverse_Mercator"],PARAMETER["False_Easting",400000],PARAMETER["False_Northing",-100000],PARAMETER["Central_Meridian",-2],PARAMETER["Scale_Factor",0.999601272],PARAMETER["Latitude_Of_Origin",49],UNIT["Meter",1]] 
```

我的问题是：如何将其转换为 D3 中的投影？我已经安装了 ogr2ogr 和 TopJson，但不确定它们是否可以做到，而且我在任何地方都找不到信息，因为我没有足够的基础知识。

TIA

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-24T17:53:27.377

空间数据在给定的坐标系中指定。此坐标系用于将坐标投影到空间中的特定点，例如地图画布。地理数据实际上有数百种不同的坐标系。造成这种情况的原因之一是地球在投影方面表现不佳——它不是一个完美的球体，不同的坐标系往往在不同的地方工作得最好（“工作得最好”是指一旦你将一个点投影到地球表面）。[您可以在 wikipedia 上](https://en.wikipedia.org/wiki/Map_projection)找到更多信息。

定义坐标系和投影不一定困难或工作量很大，但需要在使用之前完成。这就是您无法直接使用数据的原因——它使用了 D3 不知道的坐标系（英国国家网格）。因此，您的选择是将其转换为[D3 确实知道的](https://github.com/mbostock/d3/wiki/Geo-Projections)，或在 D3 中实现您的坐标系。前者几乎总是更容易的方法。

该命令`ogr2ogr output.shp input.shp -t_srs "+proj=longlat +ellps=WGS84 +no_defs +towgs84=0,0,0"`将您的输入 shapefile（地理数据的文件格式）`input.shp`转换为通用横轴墨卡托 (UTM) WGS84 格式（这是`t_srs`字符串的含义，更多[内容参见 wikipedia](http://en.wikipedia.org/wiki/World_Geodetic_System)）`output.shp`，无论输入中使用的坐标系如何。

给定的目标坐标系参数`t_srs`可以是显式定义（如上面的示例）、对众所周知的坐标系的引用或包含定义的文件。[例如，可以在此处](http://spatialreference.org/ref/epsg/)找到众所周知的坐标系列表。

# javascript - 如何在Javascript / css中的嵌套ul中选择最低级别的ul

> ID：15512735
> 
> 赞同：2
> 
> 时间：2013-03-19T23:53:05.010
> 
> 标签：javascript, jquery, html, css, html-lists

我觉得这是一个简单的问题，我搜索了很多，但我找不到一个好的答案。

我有一堆嵌套的 UL，它们已附加到 div 中。我希望能够折叠我单击的 UL。问题是，当您在另一个 UL 中单击一个 UL 时，您实际上是在同时单击两者。因此，如果我单击最低层折叠并说出类似 $(this).css('height', '5px') 之类的内容，最高层的 UL 也会获得 5px 的高度。希望代码能让我的问题更清楚。

```
<ul class=t0>
  <li class='item'>Top Item 1</li>
  <li class='item'>Top Item 2</li>
  <li class='item'>Top Item 3 is a list</li>
  <ul class=t1>
    <ul class=t2>
      <li class='item'>some <span class='val'>Thing</span></li>
      <li class='item'>something <span class='val'>else</span></li>
    </ul>
    <ul class=t2>
      <li class='item'>method : <span class='val'>GET</span></li>
      <li class='item'>uri : <span class='val'>/status</span></li>
    </ul>
  </ul>
<li class='item'>Top Item 3 is a list</li>
</ul> 
```

因此，如果您单击 UL 类 t2，则仅 t2 折叠，但如果单击 t1，则两个 t2 都折叠。我知道如何更改 css 以及我在仅选择单击的 ul 时遇到的所有问题。我想我可以使用 .find 或 .closest 我只是不确定该怎么做。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T23:55:49.080

```
$('.t1, .t2').click(function(e){
  e.stopPropagation(); //prevent the event from bubbling up
  $(this).slideUp();
}); 
```

这会起作用 - 但是，您的想法/标记/执行是有缺陷的。没有`.t1`点击，因为它由两个组成`.t2`- 因此，`.t1`如果不点击 a 就不可能点击`.t2`

您的 HTML 也是无效的，因为它`<ul class='t1'>`不能有另一个`<ul>`作为它的孩子。你需要一些`<li>`在里面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T23:56:20.077

您可以使用 event.stopPropagation 来防止事件上升到更高级别。[http://api.jquery.com/event.stopPropagation/](http://api.jquery.com/event.stopPropagation/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T00:26:43.903

要回答这个问题（这似乎不是真正想要的，但其他人可能会偶然发现这个问题并正在寻找答案），要找到“最低”的 UL，您可以使用 getElementsByTagName，它以 DOM 顺序返回一个集合，并返回集合中的最后一个元素（如果有的话）：

```
function getLowestUL(el) {
  var uls = el.getElementsByTagName('ul');
  return uls.length? uls[uls.length - 1]  : null;      
} 
```

如果提供的元素是一个 UL，并且如果它是最低的 UL，那么您想要返回它，那么：

```
function getLowestUL(el) {
  var isUL = el.tagName && el.tagName.toLowerCase() == 'ul';
  var uls = (el.nodeType == 1) && el.getElementsByTagName('ul');
  return (uls && uls.length)? uls[uls.length - 1]  : isUL? el : null;      
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T00:08:02.740

您可以委托并使用`e.target`来确定单击的内容并找到它的[`$.closest()`](http://api.jquery.com/closest/)祖先`UL`：

**标记（更新）**

```
<ul class=t0>
    <li class='item'>Top Item 1</li>
    <li class='item'>Top Item 2</li>
    <li class='item'>Top Item 3 is a list
        <ul class=t2>
            <li class='item'>some <span class='val'>Thing</span></li>
            <li class='item'>something <span class='val'>else</span></li>
        </ul>
        <ul class=t2>
            <li class='item'>method : <span class='val'>GET</span></li>
            <li class='item'>uri : <span class='val'>/status</span></li>
        </ul>
    </li>
    <li class='item'>Top Item 3 is a list</li>
</ul> 
```

**jQuery**

```
$('.t0').on('click', function click(e) {
    $(e.target).closest('ul').slideUp();
}); 
```

[http://jsfiddle.net/userdude/ksVUY/](http://jsfiddle.net/userdude/ksVUY/)

**编辑**：或者[这](http://jsfiddle.net/userdude/ksVUY/2/)更像是你所追求的？问题是`<ul><ul>`，它是无效的标记，所以它取决于你对标记的特定部分所做的事情。

# .net - 如何在旧 System.Windows.Forms.MenuItem 上放置图像？

> ID：15512737
> 
> 赞同：0
> 
> 时间：2013-03-19T23:53:13.353
> 
> 标签：.net, contextmenu, menuitem, .net-1.1

在您认为这是重复之前。*这个问题与ContextMenuStrip*无关。这个问题是关于**旧的 ContextMenu** (.NET 1.1)。

* * *

我正在使用**LEGACY** [ContextMenu](http://msdn.microsoft.com/en-us/library/system.windows.forms.contextmenu.aspx)，因为我喜欢它在 Windows 7 中的外观。

有谁知道我如何在[MenuItem](http://msdn.microsoft.com/en-ca/library/system.windows.forms.menuitem%28v=vs.110%29.aspx)上放置图像（没有所有者绘图） ？或者这是一个限制？也许一些API？

不，我不想使用 ContextMenuStrip。

# ruby-on-rails - 设计之上的 Rails Bootstrap Gem

> ID：15512738
> 
> 赞同：1
> 
> 时间：2013-03-19T23:53:13.893
> 
> 标签：ruby-on-rails, ruby-on-rails-3, twitter-bootstrap

我对 Rails 还很陌生，并且已经为我生成了大部分设计登录系统。但是，我在应用我的 twitter-bootstrap gem 之前测试了我的应用程序，我现在关心的一个按钮以前正确地发送了 DEL 请求。

但是，它现在正在发送 GET 请求

HTML看起来像

```
<li>
     <a href="/users/logout" data-method="delete" rel="nofollow">Logout</a>
</li> 
```

我对 bootstrap gem 还是很陌生，所以我想知道 gem 是否在动态更改某些 HTML？或者为什么我的标签清晰`says data-method="delete"`但仍然导致 GET 请求？

我的错误：

```
No route matches [GET] "/users/logout"

Source: https://github.com/seyhunak/twitter-bootstrap-rails 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T00:07:26.360

[在开始之前，我已经从这里](https://stackoverflow.com/questions/6557311/no-route-matches-users-sign-out-devise-rails-3)复制了一些东西。首先，Devise 中没有默认路由`users/logout`。它被定义为`/users/sign_out`默认值。`routes.rb`您可以在下更改它`config`。取而代之的是，我想提供此代码以粘贴到您的视图文件中：

```
<li>
   <%= link_to "Sign out", destroy_user_session_path, :method => :delete %>
</li> 
```

# java - 生成动态类 Java

> ID：15512740
> 
> 赞同：5
> 
> 时间：2013-03-19T23:53:31.157
> 
> 标签：java, file-io, dynamic-compilation, dynamic-class

我通过将所有代码写入 java 文件，将 java 文件编译为类文件，然后使用 URLClassLoader 加载类文件，在我的 java 程序中生成一个动态类。这样做的问题是它在我的计算机上创建了很多文件。他们是一种只创建“虚拟文件”（文件对象）而不生成任何实际文件的方法吗，因为我这样做的方式需要时间并且看起来不干净且效率低下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T00:30:51.907

字节码生成和操作库允许您在内存中动态修改和生成类。[Javassist](http://www.jboss.org/javassist)可能是最容易开始的，因为它允许使用 Java 语法。

它们也往往比整个独立编译器更轻。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T00:00:51.467

如果您查看 ClassLoader 类，它有一个从实际字节序列定义类的方法。

[类加载器的 Java 文档](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html#defineClass%28java.lang.String,%20byte%5B%5D,%20int,%20int%29)

我承认我没有使用过这么低级别的类加载器，但我的理解是这是一个模板模式，其中基础 ClassLoader 类知道如何根据原始字节码在 VM 中创建一个类。子类负责确定在哪里可以找到给定类的字节码。

因此，您的解决方案可能是完全停止使用 URLClassLoader 并自己扩展 ClassLoader。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T00:13:55.483

一个（更）直接的解决方案是执行以下操作：

*   将你的类文件编译到一个公共目录中
*   创建一个`ClassLoader`扩展的自定义`ClassLoader`
*   使用它`ClassLoader`来读取 .class 文件。

这里有一些可以帮助您入门的内容 - 我将把将字节码放入对象的练习留给读者作为练习。`SimpleFileVisitor`（如果你在这方面做一些工作，这 并不是很困难。[查看 Java.NIO。](http://docs.oracle.com/javase/tutorial/essential/io/fileio.html)）

```
public class CustomClassLoader extends ClassLoader {

    @Override
    public Class findClass(String binaryClassName) {
        byte[] b = customLoadClassData(binaryClassName);
        return defineClass(binaryClassName, b, 0, b.length);
    }

    private byte[] customLoadClassData(String binaryClassName) {
        // Be sure to read in the specific .class file you want.
        // A tip is to handle this *outside* of this class.
    }

} 
```

然后你可以像这样使用它：

```
CustomClassLoader loader = new CustomClassLoader();
Class clazz = loader.findClass("com.stackoverflow.some.binary.name"); 
```

...前提是它没有抛出异常或返回 null。

# python - Python 是否可以从文件中读取非 ascii 文本？

> ID：15512741
> 
> 赞同：3
> 
> 时间：2013-03-19T23:53:34.867
> 
> 标签：python, ascii, decode

我有一个 UTF-8 格式的 .txt 文件，将其读入 Python 时遇到问题。我有大量文件，转换会很麻烦。

所以如果我通过阅读文件

```
for line in file_obj:
    ... 
```

我收到以下错误：

```
 File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/encodings/ascii.py", line 26, in decode
    return codecs.ascii_decode(input, self.errors)[0]
UnicodeDecodeError: 'ascii' codec can't decode byte 0xc2 in position 291: ordinal not in range(128) 
```

我想`x.decode("utf-8")`这是行不通的，因为错误发生在该行甚至被读入之前。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T23:55:40.863

有两种选择。

1.  打开文件时指定编码，而不是使用默认值。
2.  以二进制模式打开文件，并显式地`decode`从`bytes`到`str`。

第一个显然是更简单的一个。您没有显示如何打开文件，但假设您的代码如下所示：

```
with open(path) as file_obj:
    for line in file_obj: 
```

做这个：

```
with open(path, encoding='utf-8') as file_obj:
    for line in file_obj: 
```

而已。

正如[文档](http://docs.python.org/3/library/functions.html#open)解释的那样，如果您没有在文本模式下指定编码：

> 默认编码取决于平台（无论`locale.getpreferredencoding()`返回什么），但可以使用 Python 支持的任何编码。

在某些情况下（例如，任何 OS X 或具有适当配置的 linux），`locale.getpreferredencoding()`将始终为“UTF-8”。但它显然永远不会“自动为我可能打开的任何文件提供任何正确的东西”。所以如果你知道一个文件是 UTF-8，你应该明确地指定它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T23:57:38.047

对于 Python 2 和 3 解决方案，使用编解码器：

```
import codecs
file_obj = codecs.open('ur file', "r", "utf-8")

for line in file_obj:
    ... 
```

否则——Python 3——使用 abarnert 的[解决方案](https://stackoverflow.com/a/15512760/298607)

# jakarta-ee - 从命令行取消对 glashfish 的分级

> ID：15512755
> 
> 赞同：0
> 
> 时间：2013-03-19T23:54:55.460
> 
> 标签：jakarta-ee, glassfish, java-ee-6, java-ee-5

我试图在 Eclipse 中启动我的 glashfish，但出现错误：S`erver GlassFish Server Open Source Edition 3 (Java EE 6) at localhost failed to start.`

并建议这样做：

```
The configuration data for this domain must be upgraded to run with this
version of the software. To upgrade the data, run:
    asadmin start-domain --upgrade
Then start the domain normally.
Command start-domain failed. 
```

我的问题是如何从命令行升级它？

在我的 glasfish 文件夹中，我有 bin 文件夹，并且 bin 内包含一个名为 asadmin 的文件。当我 cd 到 bin 并运行 asadmin start-domain --upgrade 时，它​​抱怨 asadmin 命令不是命令。 . 任何人都知道如何从命令行运行 glassfish？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T08:23:18.480

它应该按照您描述的方式工作。如果你在 Linux 上，你可以试试

```
./asadmin start-domain --upgrade 
```

如果当前目录不在您的搜索路径中。

# jquery - jquery 如果元素 id 与其他元素相似，则添加类

> ID：15512756
> 
> 赞同：1
> 
> 时间：2013-03-19T23:55:01.827
> 
> 标签：jquery, find, element, addclass

过去几天我一直在绞尽脑汁，希望有人能提供帮助。基本上这就是我所拥有的......

```
<div id="ORDER/SUB/DD" class="box1">content</div>
<div id="ORDER/GIFT/CC" class="box1">content</div>
<div id="ORDER/SUB/CC" class="box1">content</div>

<div id="ORDER/GIFT/CC/1" class="box2">content</div> 
```

然而，所有的`box1`id 都是动态创建的，我想要的是向 div 添加一个新类`chosenOffer`，`box1`它的 id 在`box2`div 中。所以它看起来像下面......

```
<div id="ORDER/SUB/DD" class="box1">content</div>
<div id="ORDER/GIFT/CC" class="box1 chosenOffer">content</div>
<div id="ORDER/SUB/CC" class="box1">content</div>

<div id="ORDER/GIFT/CC/1" class="box2">content</div> 
```

div将`box2`始终具有与其中一个`box1`div 匹配的 id，除了一些额外的字符（如示例中的斜杠和数字）。非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T00:04:07.423

```
$('.box1').each(function(){
  var id = this.id;
  var $match = $('.box2[id*="'+id+'"]');

  if($match.length){
    $(this).addClass('chosenOffer');
    return false; // You can stop checking .box1's now
  }
}); 
```

演示：http: [//jsfiddle.net/2pcVa/](http://jsfiddle.net/2pcVa/)

解释：

我们正在遍历's 并查看是否可以找到包含当前框 ID 的`.each()`a 。 如果 a存在，我们将类添加到当前的and - 这意味着我们不必遍历's 的其余部分，因为我们已经找到了匹配项。`.box1``.box2`
`$match``.box1``return false;``.box1`

我们在 CSS 中使用属性选择器的强大功能（jQuery 使用相同）。意思是`*=`“包含”。
Chris Coyier 在这里写了一篇关于它们的好文章：http: [//css-tricks.com/attribute-selectors/](http://css-tricks.com/attribute-selectors/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T01:13:00.120

很像 ahren 的回复（并通过在找到第一个匹配元素后退出循环来改进），但使用老派的“indexOf”，这对我来说可以很好地匹配 ID：

```
$.each($('.box1'), function() {
  if ($('.box2').attr('id').indexOf(this.id) >= 0) {
    $(this).addClass("chosenOffer");
    return false;
  }
}) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-20T00:13:19.490

这当然是可行的，但我不确定您使用的是最简单/最强大/可扩展的方法......

我要做的是使用一个新属性并为相应的项目设置它。从长远来看，这使它更易于管理/编辑。

[http://www.w3schools.com/jsref/met_element_setattribute.asp](http://www.w3schools.com/jsref/met_element_setattribute.asp)

# java - OSGI/Equinox 捆绑资源：URI 方案不是文件

> ID：15512757
> 
> 赞同：0
> 
> 时间：2013-03-19T23:55:18.783
> 
> 标签：java, spring, osgi, uri, equinox

我有一个在 Equinox 容器中运行的插件。在插件 jar 中，包含一个 /bin 目录，其中包含我要运行的可执行文件和相关的共享库。我正在尝试获取可执行文件 (/bin) 的父路径，但出现以下异常：

```
 Exception in thread "SpringOsgiExtenderThread-88" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'testLauncher' defined in URL [bundleentry://105.fwk10703525/META-INF/spring/service.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [com.test.TestLauncher]: Constructor threw exception; nested exception is java.lang.IllegalArgumentException: URI scheme is not "file"
        at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:288)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1003)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:907)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:580)
        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
        at org.springframework.osgi.context.support.AbstractDelegatedExecutionApplicationContext.access$1600(AbstractDelegatedExecutionApplicationContext.java:69)
        at org.springframework.osgi.context.support.AbstractDelegatedExecutionApplicationContext$4.run(AbstractDelegatedExecutionApplicationContext.java:355)
        at org.springframework.osgi.util.internal.PrivilegedUtils.executeWithCustomTCCL(PrivilegedUtils.java:85)
        at org.springframework.osgi.context.support.AbstractDelegatedExecutionApplicationContext.completeRefresh(AbstractDelegatedExecutionApplicationContext.java:320)
        at org.springframework.osgi.extender.internal.dependencies.startup.DependencyWaiterApplicationContextExecutor$CompleteRefreshTask.run(DependencyWaiterApplicationContextExecutor.java:132)
        at java.lang.Thread.run(Thread.java:619)
Caused by: org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [com.test.TestLauncher]: Constructor threw exception; nested exception is java.lang.IllegalArgumentException: URI scheme is not "file"
        at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:141)
        at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:108)
        at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:280)
        ... 16 more
Caused by: java.lang.IllegalArgumentException: URI scheme is not "file"
        at java.io.File.<init>(File.java:366)
        at com.test.TestLauncher.<init>(TestLauncher.java:23)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
        at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:126)
        ... 18 more 
```

下面的代码显示了我的构造函数试图获取 Resource 变量的父路径 (/bin)。新 File(binPath.getURI()) 命令引发了异常。资源变量是使用下面的 spring 上下文定义传入的。

```
public Launcher(Resource resource) {
    try {
        binFile = resource.getURL().getFile();            
        String binPath = new File(binPath.getURI()).getParentFile().getAbsolutePath();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        System.out.println("TestLauncher Exception found");
        e.printStackTrace();
    }
} 
```

Spring上下文定义：

```
<bean id="testResource" class="org.springframework.core.io.ClassPathResource">  
    <constructor-arg value="\bin\test" />
</bean> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T00:29:37.123

我认为您需要做的就是将路径值作为文件 uri 提供，例如：

```
<bean id="testResource" class="org.springframework.core.io.ClassPathResource">  
  <constructor-arg value="file:../test" />
</bean> 
```

在这里，我只是根据我认为你的类路径来猜测你需要的路径。您可能需要尝试不同的路径值才能使其正常工作。

祝你好运！

# c# - 检测windows phone 短信？

> ID：15512759
> 
> 赞同：1
> 
> 时间：2013-03-19T23:55:34.233
> 
> 标签：c#, visual-studio-2010, windows-phone-7

我正在制作一款游戏，如果它知道手机何时收到短信以便暂停游戏，那就太好了。我可以使用他们的任何听众吗？我已经看过了，似乎没有办法做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T01:34:02.543

因此，如果用户收到一条新短信，toast 通知将显示在屏幕顶部，但不会影响您的游戏。

如果用户点击 toast 通知，那么您的游戏将进入后台。如果用户按下主页按钮或搜索按钮，则会发生相同的过程。

因此，与其专门担心短信，不如担心您的游戏将如何处理被置于后台/暂停的情况。如果你做对了，你应该涵盖所有的 toast 通知到达的场景。

# java - 将 26 个整数的数组转换为字符（字母）

> ID：15512763
> 
> 赞同：1
> 
> 时间：2013-03-19T23:55:52.867
> 
> 标签：java

我正在使用 java 扫描仪从键盘输入文本字符串，然后让我的程序创建一个输出 az 并显示在输入字符串中找到的每个字母的数量的表。（字母频率）

我的司机/主班

```
import java.util.*;

public class LetterDriver{
  public static void main(String[] args){
    Scanner s = new Scanner(System.in);
    LetterProfile profile = new LetterProfile();
    String tScan = " ";
    int numReturns = 0;
    while(numReturns < 2){
      tScan = s.nextLine();
      if (tScan.length() == 0){
        numReturns++;
      }
      else{
        profile.countChars(tScan);
        numReturns = 0;
      }
    }
    profile.printResults();

  }

} 
```

我的个人资料课程

```
public class LetterProfile {
  int score[] = new int [26];

   public void countChars (String s) {
    s = s.toLowerCase();
    char a = 'a';
    for (int i = 0; i < s.length(); i++) {
      int next = (int)s.charAt(i) - (int) a;
      if ( next<=26 && next >= 0)
        score[next]++;

    }
 }

    public int largestLength() { 
      int largest = 0;
      int largestindex = 0;
      for(int a = 0; a<26; a++) {
        if(score[a] > largest) {
        largest = score[a];
        largestindex = a;

      }
      }
      return (char)largestindex;

    }

    public void printResults() {
       largestLength();

      System.out.println(("Most Frequent") + (" :") + largestLength());
    }
} 
```

该程序编译，当我运行它时，它允许我输入我的输入，但它给我的唯一输出是最常用的数字形式的字母（因为我的数组是 0-25，其中 0 = a, 1 = b)

基本上，我在尝试做的事情是让我的代码输出一个 az 表，同时在它旁边显示字母频率。有没有一种简单的方法来完成这项工作？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T00:01:27.060

我不确定我是否理解 - 当然它所做的只是打印最常见的字母 - 这就是该`printResults`方法所做的一切。

只需循环遍历`score`数组并在相应字母旁边打印每个分数，您就应该拥有整个频率表。

将此添加到`printResults`方法中已有的代码中。结果是它将首先打印最常见的字母，然后是字母频率列表，从数字 1 开始。

```
for (int i = 0; i < score.length; i++) {
    System.out.println( (i+1) + ": " + score[i]);
} 
```

例如：

```
Most frequent: e
1: 5
2: 0
3: 2
4: 0
5: 15
... 
```

等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T00:02:44.877

尝试这个：

```
for (int i = 0; i<score.length; i++){
System.out.println(score[i]);
} 
```

此外，[请](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/for.html)阅读本文以熟悉 for 语句。

# c# - 如何在 char 数组中找到不同字符之前的空格？

> ID：15512765
> 
> 赞同：1
> 
> 时间：2013-03-19T23:55:58.620
> 
> 标签：c#, arrays, space

我已经创建了一种我在基于文本的冒险中使用的方法。它工作得很好，但问题是当我想要它时它会拆分单词 \n。我需要找到一种方法让它在数组中 char 139 之前的最后一个空格之后 \n 。这是我的代码：

```
 static void RPGWrite(string write)
    {
        char[] writearray = write.ToCharArray();
        int writearraycount = writearray.Count();
        for (int x = 0; x < writearraycount; x++)
        {                
            Console.Write(Convert.ToString(writearray[x]));
            if ((x > 1) && (x % 139 == 0))
                Console.Write("\n");
            System.Threading.Thread.Sleep(30);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T00:06:48.347

```
 static void RPGWrite(string write)
    {
        int i = 0;
        StringBuilder sb = new StringBuilder();
        while (i < write.Length)
        {
            if(i + 139 < write.Length)
            { 
                string part = write.Substring(i, i + 139);
                int lastSpace = part.LastIndexOf(' ');
                sb.Append(write.Substring(i, i + lastSpace) + System.Environment.NewLine;
                i += lastSpace;
            }
            else
            {
                sb.Append(write.Substring(i));
                break;
            }
        }
        Console.Write(sb.ToString());
    } 
```

# ios - Xcode 项目出错 - 忘记设备并任意取消构建

> ID：15512767
> 
> 赞同：1
> 
> 时间：2013-03-19T23:56:13.763
> 
> 标签：ios, xcode

我有一个突然变坏的 xcode 项目。我只能在物理设备上运行一次，然后才会忘记设备已连接并且在我选择的方案旁边仅提供“iOS 设备”。更糟糕的是，无故取消了 2/3 的构建：

![代码](../Images/57558c98276140f3695dd79d9a700f66.png)

如果我再次尝试重建或运行（在模拟器或设备上）几次，最终它会起作用。但没有明确的模式。

有什么想法可能是错的吗？我目前在 Retina MBP 上使用 Xcode 4.6.1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T00:10:50.960

您还应该尝试删除派生数据 - 转到 Xcode 的管理器，单击项目，单击您的项目，然后点击删除按钮，其中显示“派生数据”。

# regex - PowerShell 中用于使用“TRN”转换行的正则表达式

> ID：15512778
> 
> 赞同：1
> 
> 时间：2013-03-19T23:57:24.723
> 
> 标签：regex, powershell-2.0

我需要帮助找出 PowerShell 脚本的正则表达式。数据可能如下所示：

```
TRN    ABCD;
TRN ABCEDFG;
TRN    HIJ ;
TRN   KLMNO  XXXXX ;
TRN      XYZ                ; 
```

我需要在`TRN`+ 空格之间和 a`space`或“ `;`”之前选择数据。

所以我的输出应该是：

```
ABCD
ABCEDFG
KLMNO
HIJ
XYZ 
```

但是，`TRN`前面可以有一个或多个空行，我无法弄清楚这个正则表达式......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T06:50:00.657

尝试：

```
 (gc myfile.txt | select-string -Pattern '(?<=trn\s+)([^\s]+)(?=\s|;)' ).matches.value 
```

# windows - ffmpeg 没有从批处理脚本中正确使用通配符

> ID：15512782
> 
> 赞同：3
> 
> 时间：2013-03-19T23:57:38.953
> 
> 标签：windows, batch-file, ffmpeg

我想要做的实际上非常简单，如果从 cmd 窗口中执行它就可以正常工作，尽管在批处理脚本中使用时它不起作用。以下命令通常会获取所有具有 anim_xxxx.png 模式的 .png 文件（%04d 代表 ffmpeg 中的 4 个数字）。

```
ffmpeg -f image2 -i anim_%04d.png -vcodec mjpeg -q:v 0 -r 25 foo.avi 
```

现在我得到的错误是我的图像序列的通配符，我不知道问题是什么。使用像 * 这样的另一个通配符会给我同样的错误。

> [image2 @ 000000000033e8c0] 找不到路径为“anim_render.bat4d.png”且索引在 0-4 范围内的文件 anim_render.bat4d.png：没有这样的文件或目录

%04d 是否类似于批处理文件中不存在于批处理文件之外的任何变量？到目前为止，我找不到任何类似的案例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T00:15:43.953

不知道`%04`就目前而言是什么意思`FFMPEG`，尽管`anim_*.mpg`似乎是一种更普遍理解的指定方法，`all starting 'anim_'`也许它是一种特殊含义`+any 4 characters`（尽管`????`在这里似乎更常见。

然而，似乎 ffmpeg 期望`%`提供`literally`，因此批量治疗将是在前面`%`加上一个插入符号：`^%`

Erm- 加倍`%`-`^x`通常适用于批量具有特殊含义的字符；看来你需要`%`逃跑了`%`……

# java - 尝试将纬度和经度发布到数据库时Android JSON解析错误

> ID：15512785
> 
> 赞同：0
> 
> 时间：2013-03-19T23:57:52.750
> 
> 标签：java, php, android, mysql, apache

我是新来的，但希望能找到解决我的 android 应用程序遇到的问题的方法。目标是定期更新我的数据库的纬度和经度。我发布用户名和密码没有问题，所以我不知道为什么它不适用于经纬度。

我一直在寻找答案一段时间，但到目前为止一直没有成功。不幸的是，我对编码很陌生，并且在我的 logcat 中收到以下错误：

```
03-14 08:13:58.612: E/JSON(265): 
{"tag":"login","success":1,"error":0,"uid":"513fb03e6a8e36.15977675","user":
{"name":"g","email":"g","created_at":"2013-03-12 17:46:22","updated_at":null}}n

03-14 08:13:58.842: D/dalvikvm(265): GC_FOR_MALLOC freed 3295 objects / 190800 bytes in 76ms

03-14 08:13:59.822: D/GPS Enabled(265): GPS Enabled

03-14 08:14:00.272: E/JSON(265): Invalid Requestn

03-14 08:14:00.272: E/JSON Parser(265): Error parsing data org.json.JSONException: Value Invalid of type java.lang.String cannot be converted to JSONObject

03-14 08:14:00.272: I/DashboardActivity(265): Update on geolocation success 
```

我这样做可能很愚蠢，所以我希望可以快速修复该错误。我正在寻找的基本功能是定期将纬度和经度更新到我的数据库的应用程序。这是我认为相关的代码：

解析器：

```
public class JSONParser implements Serializable {

static InputStream is = null;
static JSONObject jObj = null;
static String json = "";

// constructor
public JSONParser() {

}

public JSONObject getJSONFromUrl(String url, List<NameValuePair> params) {

    // Making HTTP request
    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);
        httpPost.setEntity(new UrlEncodedFormEntity(params));

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "/n");
        }
        is.close();
        json = sb.toString();
        Log.e("JSON", json);
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;

}
} 
```

GPS追踪器：

```
public class GPSTracker extends Service implements LocationListener {

private final Context mContext;

// flag for GPS status
boolean isGPSEnabled = false;

// flag for network status
boolean isNetworkEnabled = false;

// flag for GPS status
boolean canGetLocation = false;

Location location; // location
double latitude; // latitude
double longitude; // longitude

// The minimum distance to change Updates in meters
private static final long MIN_DISTANCE_CHANGE_FOR_UPDATES = 10; // 10 meters

// The minimum time between updates in milliseconds
private static final long MIN_TIME_BW_UPDATES = 1000 * 60 * 1; // 1 minute

// Declaring a Location Manager
protected LocationManager locationManager;

public GPSTracker(Context context) {
    this.mContext = context;
    getLocation();
}

public Location getLocation() {
    try {
        locationManager = (LocationManager) mContext
                .getSystemService(LOCATION_SERVICE);

        // getting GPS status
        isGPSEnabled = locationManager
                .isProviderEnabled(LocationManager.GPS_PROVIDER);

        // getting network status
        isNetworkEnabled = locationManager
                .isProviderEnabled(LocationManager.NETWORK_PROVIDER);

        if (!isGPSEnabled && !isNetworkEnabled) {
            // no network provider is enabled
        } else {
            this.canGetLocation = true;
            // First get location from Network Provider
            if (isNetworkEnabled) {
                locationManager.requestLocationUpdates(
                        LocationManager.NETWORK_PROVIDER,
                        MIN_TIME_BW_UPDATES,
                        MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                Log.d("Network", "Network");
                if (locationManager != null) {
                    location = locationManager
                            .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
                    if (location != null) {
                        latitude = location.getLatitude();
                        longitude = location.getLongitude();
                    }
                }
            }
            // if GPS Enabled get lat/long using GPS Services
            if (isGPSEnabled) {
                if (location == null) {
                    locationManager.requestLocationUpdates(
                            LocationManager.GPS_PROVIDER,
                            MIN_TIME_BW_UPDATES,
                            MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                    Log.d("GPS Enabled", "GPS Enabled");
                    if (locationManager != null) {
                        location = locationManager
                                .getLastKnownLocation(LocationManager.GPS_PROVIDER);
                        if (location != null) {
                            latitude = location.getLatitude();
                            longitude = location.getLongitude();
                        }
                    }
                }
            }
        }

    } catch (Exception e) {
        e.printStackTrace();
    }

    return location;
}

/**
 * Stop using GPS listener
 * Calling this function will stop using GPS in your app
 * */
public void stopUsingGPS(){
    if(locationManager != null){
        locationManager.removeUpdates(GPSTracker.this);
    }
}

/**
 * Function to get latitude
 * */
public double getLatitude(){
    if(location != null){
        latitude = location.getLatitude();
    }

    // return latitude
    return latitude;
}

/**
 * Function to get longitude
 * */
public double getLongitude(){
    if(location != null){
        longitude = location.getLongitude();
    }

    // return longitude
    return longitude;
}

/**
 * Function to check GPS/wifi enabled
 * @return boolean
 * */
public boolean canGetLocation() {
    return this.canGetLocation;
}

/**
 * Function to show settings alert dialog
 * On pressing Settings button will lauch Settings Options
 * */
public void showSettingsAlert(){
    AlertDialog.Builder alertDialog = new AlertDialog.Builder(mContext);

    // Setting Dialog Title
    alertDialog.setTitle("GPS is settings");

    // Setting Dialog Message
    alertDialog.setMessage("GPS is not enabled. Do you want to go to settings menu?");

    // On pressing Settings button
    alertDialog.setPositiveButton("Settings", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog,int which) {
            Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
            mContext.startActivity(intent);
        }
    });

    // on pressing cancel button
    alertDialog.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
        dialog.cancel();
        }
    });

    // Showing Alert Message
    alertDialog.show();
}

public void onLocationChanged(Location location) {
}

public void onProviderDisabled(String provider) {
}

public void onProviderEnabled(String provider) {
}

public void onStatusChanged(String provider, int status, Bundle extras) {
}

@Override
public IBinder onBind(Intent arg0) {
    return null;
} 

} 
```

用户功能：

```
public class UserFunctions implements Serializable {

private static final long serialVersionUID = 1L;

private JSONParser jsonParser;

private static String loginURL = "URL removed";
private static String registerURL = "URL removed";
private static String LOCATION_UPDATE_URL = "URL removed";

private static String login_tag = "login";
private static String register_tag = "register";
private static String LOCATION_UPDATE_TAG = "update_location";

private String email;
private String password;

// constructor
public UserFunctions() {
  jsonParser = new JSONParser();
}

/**
* function make Login Request
* 
* @param email
* @param password
*/
public JSONObject loginUser() {
  // Building Parameters
  List<NameValuePair> params = new ArrayList<NameValuePair>();
  params.add(new BasicNameValuePair("tag", login_tag));
  params.add(new BasicNameValuePair("email", email));
  params.add(new BasicNameValuePair("password", password));
  JSONObject json = jsonParser.getJSONFromUrl(loginURL, params);
  // return json
  // Log.e("JSON", json.toString());
  return json;
}

/**
* function make update geo location
* 
* @param lon
* @param lat
* @return
*/
public JSONObject updateUserGeoLocation(String lon, String lat) {
  // Building Parameters
  List<NameValuePair> params = new ArrayList<NameValuePair>();
  params.add(new BasicNameValuePair("tag", LOCATION_UPDATE_TAG));
  params.add(new BasicNameValuePair("email", email));
  params.add(new BasicNameValuePair("password", password));
  params.add(new BasicNameValuePair("lon", lon));
  params.add(new BasicNameValuePair("lat", lat));
  JSONObject json = jsonParser.getJSONFromUrl(LOCATION_UPDATE_URL, params);
  return json;
}

/**
* function make Login Request
* 
* @param name
* @param email
* @param password
*/
public JSONObject registerUser(String name, String email, String password) {
  // Building Parameters
  List<NameValuePair> params = new ArrayList<NameValuePair>();
  params.add(new BasicNameValuePair("tag", register_tag));
  params.add(new BasicNameValuePair("name", name));
  params.add(new BasicNameValuePair("email", email));
  params.add(new BasicNameValuePair("password", password));

  // getting JSON Object
  JSONObject json = jsonParser.getJSONFromUrl(registerURL, params);
  // return json
  return json;
}

/**
* Function get Login status
*/
public boolean isUserLoggedIn(Context context) {
  DatabaseHandler db = new DatabaseHandler(context);
  int count = db.getRowCount();
  if (count > 0) {
     // user logged in
     return true;
  }
  return false;
}

/**
* Function to logout user
* Reset Database
*/
public boolean logoutUser(Context context) {
  DatabaseHandler db = new DatabaseHandler(context);
  db.resetTables();
  return true;
}

public String getEmail() {
  return email;
}

public void setEmail(String email) {
  this.email = email;
}

public String getPassword() {
  return password;
 }

public void setPassword(String password) {
  this.password = password;
}

} 
```

dbase php 文件

```
<?php

if (isset($_POST['tag']) && $_POST['tag'] != '') {
// get tag
$tag = $_POST['tag'];

// include db handler
require_once 'include/DB_Functions.php';
$db = new DB_Functions();

// response Array
$response = array("tag" => $tag, "success" => 0, "error" => 0);

// check for tag type
if ($tag == 'login') {
    // Request type is check Login
    $email = $_POST['email'];
    $password = $_POST['password'];

    // check for user
    $user = $db->getUserByEmailAndPassword($email, $password);
    if ($user != false) {
        // user found
        // echo json with success = 1
        $response["success"] = 1;
        $response["uid"] = $user["unique_id"];
        $response["user"]["name"] = $user["name"];
        $response["user"]["email"] = $user["email"];
        $response["user"]["created_at"] = $user["created_at"];
        $response["user"]["updated_at"] = $user["updated_at"];
        echo json_encode($response);
    } else {
        // user not found
        // echo json with error = 1
        $response["error"] = 1;
        $response["error_msg"] = "Incorrect email or password!";
        echo json_encode($response);
    }
  } else if ($tag == 'register') {
    // Request type is Register new user
    $name = $_POST['name'];
    $email = $_POST['email'];
    $password = $_POST['password'];

    // check if user is already existed
    if ($db->isUserExisted($email)) {
        // user is already existed - error response
        $response["error"] = 2;
        $response["error_msg"] = "User already existed";
        echo json_encode($response);
    } else {
        // store user
        $user = $db->storeUser($name, $email, $password);
        if ($user) {
            // user stored successfully
            $response["success"] = 1;
            $response["uid"] = $user["unique_id"];
            $response["user"]["name"] = $user["name"];
            $response["user"]["email"] = $user["email"];
            $response["user"]["created_at"] = $user["created_at"];
            $response["user"]["updated_at"] = $user["updated_at"];
            echo json_encode($response);
        } else {
            // user failed to store
            $response["error"] = 1;
            $response["error_msg"] = "Error occured in Registartion";
            echo json_encode($response);
        }
    }
} else {
    echo "Invalid Request";
}
} else {
echo "Access Denied";
} 
```

主要活动

```
private void processGPSTracker() {
  if (mUserFunctions == null || !mUserFunctions.isUserLoggedIn(getApplicationContext()))
     return;

  gps = new GPSTracker(DashboardActivity.this);
  if (gps.canGetLocation()) {

     double latitude = gps.getLatitude();
     double longitude = gps.getLongitude();

     JSONObject json = mUserFunctions.updateUserGeoLocation(Double.valueOf(longitude)
           .toString(), Double.valueOf(latitude).toString());

     // check for login response
     try {
        if (json.getString(KEY_SUCCESS) != null && json.getString(KEY_SUCCESS).equals("1")) {
           Log.i("DashboardActivity", "Update on geolocation success");
        } else {
           Log.e("DashboardActivity", "Update on geolocation Failed");
        }
     } catch (JSONException e) {
        e.printStackTrace();
     }

     // \n is for new line
     Toast.makeText(getApplicationContext(),
           "Your Location is - \nLat: " + latitude + "\nLong: " + longitude, Toast.LENGTH_LONG)
           .show();

  } else {
     // can't get location
     // GPS or Network is not enabled
     // Ask user to enable GPS/network in settings
     gps.showSettingsAlert();
  }
  } 
```

任何帮助将不胜感激。我希望能够继续并完成这个应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T02:11:33.947

我认为这可能是您的 while 循环中附加的新行。日志的第一行似乎在 JSON 字符串的右括号之外显示了一个“n”字符，这将在解析时引发 JSON 异常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T00:09:31.900

改变

```
JSONObject json = mUserFunctions.updateUserGeoLocation(Double.valueOf(longitude)
       .toString(), Double.valueOf(latitude).toString()); 
```

至

```
JSONObject json = mUserFunctions.updateUserGeoLocation(Double.toString(longitude),
        Double.toString(latitude)); 
```

# javascript - Javascript打字机效果暂停/停止按钮

> ID：15512787
> 
> 赞同：2
> 
> 时间：2013-03-19T23:58:00.937
> 
> 标签：javascript, jquery

我下面的这个脚本允许我在单击按钮时播放带有打字机效果的文本。但是，当再次单击按钮时，如何更改允许我暂停或停止脚本的代码。

HTML

```
 <div ID="textDestination" class="news"></div>
     <div class="play" id="playbtn"></div> 
```

JavaScript

```
 var text="I remember the big tree in Mums yard I used to climb when they were drinking. I remember sitting up there crying cause I knew I’d have to get down, and how the look on his face made me want to laugh, how small he looked from up there. I remember he would threaten to throw things at me if I didn't get down. He knew he had no power over me up there, but he also knew eventually I would have to get down. Then he would say I was in for it whether I came down or not. But up there I was untouchable, and the world outside our house held endless possibility."

  var delay=50;
  var currentChar=1;
  var destination="[none]";
  function type()
  {
      //if (document.all)
      {
    var dest=document.getElementById(destination);
    if (dest)// && dest.innerHTML)
    {
        dest.innerHTML=text.substr(0, currentChar)+"_";
        currentChar++;
        if (currentChar>text.length)
        {
            currentChar=1;
            setTimeout("type()", 5000);
        }   
        else
        {
            setTimeout("type()", delay);
        }
         }
     }
 }
 function startTyping(textParam, delayParam, destinationParam)
 {
   text=textParam;
   delay=delayParam;
   currentChar=1;
   destination=destinationParam;
   type();
 }

 $('#playbtn').click(function() {
 javascript:startTyping(text, 50, "textDestination");
 }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T00:39:47.470

一些注意事项：

*   使用一致的缩进来提高代码的可读性
*   `javascript:`执行 Javascript 代码时不需要为函数调用添加前缀
*   您应该避免将文本字符串评估为 setTimout 调用，而是使用[闭包](http://www.makemineatriple.com/2007/10/passing-parameters-to-a-function-called-with-settimeout)
*   除非出于非常具体的性能原因，否则尽量不要混合使用 jQuery 和原始 DOM 操作

[http://jsfiddle.net/hhk67/5/](http://jsfiddle.net/hhk67/5/)

```
var text = "I remember the big tree in Mums yard I used to climb when they were drinking. I remember sitting up there crying cause I knew I’d have to get down, and how the look on his face made me want to laugh, how small he looked from up there. I remember he would threaten to throw things at me if I didn't get down. He knew he had no power over me up there, but he also knew eventually I would have to get down. Then he would say I was in for it whether I came down or not. But up there I was untouchable, and the world outside our house held endless possibility.";
var delay = 50;
var currentChar = 1;
var destination = "[none]";
var typeTimer = null;
var typing = true;

function type(tick)
{
    var dest = document.getElementById(destination);

    if (!typing) return;

    if (dest)
    {
        dest.innerHTML=text.substr(0, currentChar)+"_";
        currentChar++;

        if (currentChar > text.length) 
        {
            currentChar = 1;
            tick = 5000;
        }

        typeTimer = setTimeout(function() { type(delay); }, tick);
    }
}

function startTyping(textParam, delayParam, destinationParam)
{
    if (currentChar > 1) {
        typing = true;
        return type();
    }

    text=textParam;
    delay=delayParam;
    currentChar=1;
    destination=destinationParam;
    type(delay);
}

function pauseTyping()
{
    typing = false;
}

$('#control').click(function() {
    if ( $(this).hasClass('play') ) {
        startTyping(text, 50, "textDestination");

        $(this)
            .attr('class', 'pause')
            .text('Pause');
    } else {
        pauseTyping();

         $(this)
            .attr('class', 'play')
            .text('Play');
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T01:12:29.307

让它工作，只是添加了一些变量并实现了停止和暂停功能，只是我在这里更改的代码块：

```
<input type="button" class="pause" id="pausebtn" onclick="stop()" value="Pause" />
<input type="button" class="stop" id="stopbtn" onclick="pause()" value="Stop" />

var stopped=false;
var paused=false;

function type(){
    if(stopped==true){
        return;
    } 
```

……

```
function startTyping(textParam, delayParam, destinationParam){
    text=textParam;
    delay=delayParam;
    if(paused==true){
        paused=false;
        currentChar=1;
    } 
```

……

```
function start(){
dest=document.getElementById(destination);
stopped=false
console.log("jhi");
startTyping(text, 50, "textDestination");
}
function pause(){
paused=true;
stopped=true;
}
function stop(){
stopped=true;
} 
```

玩得开心！

# c++ - 在 htmlcxx 中查找“strings.h”时出错

> ID：15512790
> 
> 赞同：1
> 
> 时间：2013-03-19T23:58:07.657
> 
> 标签：c++, html

```
#include <iostream>
#include <fstream>
#include <cstdlib>
#include <sstream>
#include <string>
#include <ParserDom.h>
using namespace std;

using namespace htmlcxx;

int main()
{

ifstream bucky;
string str="";
    bucky.open("C:\\tasks\\TEST2.txt");

if(!bucky.is_open()){
    exit(EXIT_FAILURE); 
}
char word[50];  
bucky >> word;
str.append(word);
str.append(" ");    
while(bucky.good())
{

    bucky >> word;
    str.append(word);
    str.append(" ");
     }

//cout<< word<<" "<<endl;
bucky >> word;
str.append(word);
str.append(" ");

HTML::ParserDom parser;
tree<HTML::Node> dom = parser.parseTree(str);
//Print whole DOM tree
cout << dom << endl;
 } 
```

* * *

嗨，我正在使用 htmlcxx ，我安装了它，将它的头文件和库包含到我的项目中，并编写了我的代码 简而言之，我打开了一个 html 文件，将其放入字符串，然后使用 html 解析器编写它。但我收到以下错误：

```
c:\...\htmlcxx-0.84\html\parsersax.tcc(4): fatal error C1083: Cannot open include file: 'strings.h': No such file or directory 
```

我想知道您是否可以帮我解决这个问题。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T00:28:10.980

我认为`strings.h`是一个unix头文件。基本上，字符串库有两个不同的头文件：`string.h`和`strings.h`. 这些定义略有不同的原型。应该有一种适当的方法来使用宏来包含适当的方法来测试您的编译环境。就像是

```
#ifdef _WIN32
#include <string.h> 
#else
#include <strings.h>
#endif 
```

我不知道哪个是 Windows 上的标准，这只是一个例子。如果您使用的是第三方代码，它可能无法移植。你应该看看他们的标题，看看他们是否使用了上面的代码。

编辑：尝试这个快速而丑陋的修复：创建一个包含以下内容的文件`strings.h`：

```
extern "C" {
#include <string.h>
} 
```

这可能会起作用，具体取决于他们使用的功能......

**编辑：**

[他们确实在ParserSax.tcc](http://code.google.com/p/wiibrowser/source/browse/trunk/source/html/ParserSax.tcc?r=13)中使用了这种宏：

```
#if !defined(WIN32) || defined(__MINGW32__)
#include <strings.h>
#endif 
```

所以你的mingw安装可能有问题。尝试在您的系统上手动查找此文件。

# php - MySQL 返回结果类似于字符串输入但没有句点

> ID：15512791
> 
> 赞同：0
> 
> 时间：2013-03-19T23:58:15.473
> 
> 标签：php, mysql, sql

我在名为“St. Catharines”的区域列下的数据库中有一些东西

我想从没有句点的字符串中返回包含“St. Catharines”的记录。因此，字符串将是“St Catharines”。这可以做到吗？如何？

现在我有：

```
$region = "St Catharines"; 
$query = " AND region like '" . $region . "%'"; 
```

不幸的是，它不起作用。

句点始终不在`$region`字符串中，并且可以在数据库记录中的任何位置（即不仅仅是在“St”之后）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T00:17:30.970

我不确定我是否完全跟随你，但类似的东西可能会起作用：

```
$region = "St. Catharines"; 
$query = " AND region like REPLACE($region, '.', '')" 
```

无论如何，我认为您应该使用 MySQL 内置函数（字符串操作）来实现这一点。 [http://dev.mysql.com/doc/refman/5.0/en/string-functions.html](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T00:07:53.620

你真的不应该那样做，这不好，应该事先解决。

您可以按空格拆分字符串（使用explode），并搜索例如两个部分：
如：`$arr = explode(" ",$string);`

`$query = " AND (region LIKE '".$arr[0]."%' OR '%".$arr[1]."%')";`

结果，这将找到开头带有“St”的所有内容以及结果中包含“Catharines”的所有内容。

这是该问题的最佳解决方案，是部分匹配，虽然它可能会显示比您想要的结果更多的结果，但另一个解决方案类似于此处提到的内容：[stackoverflow question about remove commas and etc](https://stackoverflow.com/a/4351377/1306385)

# excel - 我正在尝试将此 for 循环转换为函数

> ID：15512795
> 
> 赞同：0
> 
> 时间：2013-03-19T23:58:32.747
> 
> 标签：excel, vba

我的问题是我不知道在 VBA 中调用了哪些函数（在 C++ 中）或方法（在 Java 中）。

它们都存在，所以我查找了潜艇？我认为这是平行的，但他们没有从我的理解中返回任何东西。

我没有接受过任何正式的 VBA 培训，所以我在这方面有点糟糕。我想创建一个函数（或方法或子）来执行此 for 循环正在执行的操作：

```
useInput = titles.Text
useRec = rec.Text
lastRow = 1

For Each rngCell In rngData.Columns(1).Cells 'Traverse each row in Spreadsheet
If useInput = rngCell.Value And LCase(useRec) = LCase(Cells(lastRow, 2)) Then 'If what the user input into the textbox matches a value in the spreadsheet
    bothExist = True 'Set this to true, because both exist

    otherUserForm.Show 'Call another userform created

    titles = "" 'Set entries to null
    rec = ""
    Exit For 'Exit the for loop
    End If
    lastRow = lastRow + 1 'Counter
Next rngCell 
```

所以循环的重点是遍历一个电子表格并找到最后一行来输入信息，但是如果标题和rec是预先存在的，那么它就会执行显示的操作。

我的问题是，我需要创建什么才能返回“lastRow”？因为我需要那个数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T00:11:36.810

```
Function myFunctionName()
    ' do stuff
    myFunctionName = "hello world"
End Function 
```

通过将返回值分配给函数的名称，您可以将返回值分配给函数。你可以这样称呼它：

```
Sub myTest()
theReply = myFunctionName()
msgBox "the function returned " & theReply
End Sub 
```

函数返回值，subs 没有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T00:12:16.687

VBA 中的函数就是：函数。:-)`return`但是，如果您习惯于 Java 或 C/C++（它是更老式的 Pascal），那么语法很奇怪。

```
Public Function GetLastRow()
   `Logic to determine last row here
   GetLastRow = lastRow    ` Assignment to function name sets return value
End Function 
```

# python - 在 Python 中计算列表的元素

> ID：15512799
> 
> 赞同：1
> 
> 时间：2013-03-19T23:58:34.977
> 
> 标签：python, for-loop, counting

我正在尝试定义一个函数，该函数接受两个输入，一个列表和一个项目（可以是字符串、int、float），它返回项目出现在列表中的次数。这是我的代码：

```
def count(sequence,item):
    for all x in sequence:
        if x != item:
            while x in sequence:
                sequence.remove(x)
    return len(sequence) 
```

但是，这只会删除不等于序列中项目的第一个元素并将其删除。例如，count([4,8,3],3) 返回 2，因为它只从列表中删除 4。我认为 for 循环应该解决这个问题。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T23:59:08.130

就这么简单，使用[`count`](http://docs.python.org/2/tutorial/datastructures.html)方法：

```
the_list.count(the_item) 
```

从文档中：

> `list.count(x)`返回 x 在列表中出现的次数。

例如：

```
[1, 2, 3, 1, 4].count(1)
=> 2 
```

顺便说一句 - 我不明白，你为什么要*删除*一个应该简单地计算它们的函数中的元素？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T05:16:41.547

迭代列表并更改此列表的长度时很危险（您使用 remove()）

在您的情况下，当您迭代列表“序列”时，首先您将获得序列 [0]（即 4）。然后你删除它。然后，您将获得序列[1]。您假设 sequence[1] 是 8。但是，因为您之前删除了 4，所以现在 sequence[0] 是 8，而 sequence[1] 是 3。所以你得到的不是 8，而是 3。这就是为什么你不能删除8 从序列。你忽略它。

# python - 使用 ElementTree 解析任意 XML 文件

> ID：15512803
> 
> 赞同：4
> 
> 时间：2013-03-19T23:58:43.147
> 
> 标签：python, xml, elementtree

我有一个模板 XML 文件，根据给我的程序的输入，我必须生成一个新的 XML 文件。该模板具有需要根据输入数据重复的部分。但我不一定知道这些部分的结构或它们有多少层嵌套。我无法弄清楚如何以任意方式读取模板文件，他们会让我填充它然后输出它。这是模板文件的一部分：

```
<Target_Table>
  <Target_Name>SF1_T1</Target_Name>
  <Target_Mode>
    <REP>
      <Target_Location_To_Repeat>
        <XLocation>nextXREL</XLocation>
        <YLocation>nextYREL</YLocation>
      </Target_Location_To_Repeat>
   <Target_Location_To_Repeat>
        <XLocation>nextXREL</XLocation>
        <YLocation>nextYREL</YLocation>
      </Target_Location_To_Repeat>
    </REP>
  </Target_Mode>
  <Target_Repetitions>1</Target_Repetitions>
  <Meas_Window>
    <Window_Size>
      <XLocation>FOV</XLocation>
      <YLocation>FOV</YLocation>
    </Window_Size>
    <Window_Location>
      <XLocation>firstXREL</XLocation>
      <YLocation>firstYREL</YLocation>
    </Window_Location>
  </Meas_Window>
  <Box_Orientation>90</Box_Orientation>
  <First_Feature Value="Space" />
  <Meas_Params_Definition>
    <Number_Of_Lines Value="Auto" />
    <Number_Of_Pixels_Per_Line Value="Auto" />
    <Averaging_Factor Value="1" />
  </Meas_Params_Definition>
  <Number_Of_Edges>1</Number_Of_Edges>
  <Edge_Pair>
    <Edge_Pair_Couple>
      <First_Edge>1</First_Edge>
      <Second_Edge>1</Second_Edge>
    </Edge_Pair_Couple>
    <Nominal_Corrected_Value>0</Nominal_Corrected_Value>
  </Edge_Pair>
  <Categories>
    <Material_Type />
    <Meas_Type />
    <Category_Type />
    <Other_Type />
  </Categories>
  <Bias>0</Bias>
  <Template_Target_Name>SF_IMAQ_Template_Target</Template_Target_Name>
  <Template_Target_PPL>
    <Process>PC2</Process>
    <Product>PD2</Product>
    <Layer>L2</Layer>
  </Template_Target_PPL>
  <Meas_Auto_Box>
    <Error_Code>0</Error_Code>
    <Measured_CD>0</Measured_CD>
    <Constant_NM2Pix>true</Constant_NM2Pix>
  </Meas_Auto_Box>
  <Meas_Box_Pix_Size_X>PixelSize</Meas_Box_Pix_Size_X>
  <Macro_CD>0</Macro_CD>
</Target_Table> 
```

我需要多次重复整个 Target_Table 部分，并且在每个 Target_Table 中我需要多次重复 REP 部分。我想编写我的程序，以便如果模板更改（例如，添加更多级别的嵌套），我不必更改我的程序。但在我看来，我必须完全知道文件的结构才能读入并吐出。这是真的还是我在这里遗漏了什么？有没有办法编写一个程序来读取具有未知标签和未知嵌套级别的文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T01:08:44.780

使用元素树：

```
import xml.etree.ElementTree as et

filehandler = open("file.xml","r")
raw_data = et.parse(filehandler)
data_root = raw_data.getroot()
filehandler.close()

for children in data_root:
    for child in children:
        print(child.tag, child.text, children.tag, children.text) 
```

这将为您提供 XML 标记和标记内相关文本的概述。您可以添加更多循环以进一步进入树，并执行检查以查看任何子级是否包含更多级别。当 XML 标记的名称不同且不遵循已知标准时，我发现此方法很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T00:18:19.727

[使用 BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)的示例：

```
import sys 
from bs4 import BeautifulSoup

file = sys.argv[1]
handler = open(file).read()
soup = BeautifulSoup(handler)

for table in soup.find_all("target_table"):
  for loc in table.find_all("rep"):
    print loc.xlocation.string + ", " + loc.ylocation.string 
```

**输出**

```
nextXREL, nextYREL 
```

# ruby - 如何进行忽略控制字符的文本搜索？

> ID：15512804
> 
> 赞同：3
> 
> 时间：2013-03-19T23:58:43.320
> 
> 标签：ruby, regex, search, replace, special-characters

我有一个源字符串，其中可能包含任何字符，包括空格、回车符和换行符（控制字符）。控制字符可以出现在任何地方，包括单词的中间。

我有一个搜索字符串，它可能具有与源字符串相同的字符选择，但通常是源的子字符串。此搜索字符串中控制字符的顺序和数量可能与源不同。

当搜索字符串中的非控制字符匹配时，我需要从源字符串中删除该字符串，包括字符串中的任何控制字符。不应删除源字符串中其他地方的控制字符。

我的计划是`\s*`在搜索字符串中的每个字符之后添加。这很好，但是我需要转义搜索字符串中的任何正则表达式特殊字符，否则它们将被视为正则表达式命令，而不是它们真正的纯文本。

我可以`\s*`在每个字符 ( `'mytext.scan(/./).join("\\s*")'`) 之后添加，但是如何转义特殊字符而不是我插入的正则表达式代码？如果我反过来做，那么我可以转义正则表达式特殊字符，但我不能简单地`\s*`在每个字符之后添加；我需要避免转义字符。

为清楚起见，控制字符 = 空格或 \t 或 \r 或 \n 或 \f

编辑：修改了第 3 段以提高我的要求的清晰度

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T06:29:09.577

或多或少地在评论中讨论：

> 复制源字符串和搜索字符串。消除两个副本中的所有控制字符。在源字符串的副本中使用搜索字符串的副本进行搜索。如果需要（或重音删除，或...），您也可以进行大小写转换。使用很多`\s*`可能会大大减慢您的正则表达式。
> 
> 搜索字符串只需要复制和预处理一次。每个源字符串也需要复制和预处理一次。如果最坏的情况出现在最坏的情况下，当您知道有匹配项时，您可以返回原始源字符串并制作搜索字符串的新副本，以便您`\s*`在每个常规字符之间确实有类似的东西，并应用正则表达式从搜索字符串的第二个（残缺）副本到原始源字符串。因为你知道有一个匹配，所以性能应该是合理的，即使失败匹配模式太慢了。

这是所讨论的想法的 Perl 实现。

```
#!/usr/bin/env perl
use strict;
use warnings;
use Data::Dumper;

$Data::Dumper::Useqq = 1;

my $source = "'Twas (Tweedle-Dee's)\fBirthday\n\n\f\f\nand\ta\tl\tl\this friends were happy\n";
my $search = "(\fTwee\ndle\t-\tDee\r'\rs)\nBi\frth\fday";

print Data::Dumper->Dump([$source], [qw($source)]);
print Data::Dumper->Dump([$search], [qw($search)]);

my $c_source = $source;
my $c_search = $search;

$c_source =~ s/ |[[:cntrl:]]//g;    # Or s/\s//g;
$c_search =~ s/ |[[:cntrl:]]//g;    # Or s/\s//g;

print Data::Dumper->Dump([$c_source], [qw($c_source)]);
print Data::Dumper->Dump([$c_search], [qw($c_search)]);

if ($c_source =~ m/\Q$c_search\E/)
{
    # Locating the search in the original source...hard work...
    my @a_search = split //, $c_search;
    printf "Lengths: c_search %d; a_search %d\n", length($c_search), scalar(@a_search);

    @a_search = map { s/[][\\.*?+(){}]/\\$&/g; $_ } @a_search;   # Escape regex metacharacters
    #print Data::Dumper->Dump([\@a_search], [qw(@a_search)]);
    my $r_search = join "\\s*", @a_search;
    print Data::Dumper->Dump([$r_search], [qw($r_search)]);

    my $t_source = $source;
    $t_source =~ s/$r_search//g;
    print Data::Dumper->Dump([$t_source], [qw($t_source)]);
} 
```

好干净的象形文字乐趣——毫无疑问，像泥巴一样清晰。前三行检查没有任何愚蠢的错误。`Data::Dumper`模块明确打印数据；它在那里进行调试。该`Useqq`变量会调整数据的明确打印方式。

变量`$source`和`$search`是源字符串和搜索字符串。有一个匹配，尽管它们每个都有所有控制字符。请注意，混合中有一些正则表达式元字符——括号是正则表达式元字符。这些字符串被转储以供参考。

接下来的两行复制了搜索字符串和源字符串。控制字符和空格被删除，使用基于 POSIX 的正则表达式类来指定所有控制字符。这些转换后的字符串被转储以供检查。

该`if`语句将转换后的源与转换后的搜索进行比较。这些`\Q...\E`部分抑制了正则表达式元字符之间的含义。如果匹配，那么我们在大括号中输入代码块。

该`split`操作从转换后的搜索字符串创建单个字符数组。`printf`检查理智。该`map`操作将每个正则表达式元字符替换为反斜杠和元字符，而其他字符保持不变。将`join`数组中的每个字符或字符对收集`@a_search`到一个字符串`$r_search`中，并`\s*`分隔数组条目。

该变量`$t_source`是源的另一个副本。正则表达式 in`$r_search`被应用于`$t_search`并且任何匹配都被替换为空。结果被转储。该脚本的输出是：

```
$source = "'Twas (Tweedle-Dee's)\fBirthday\n\n\f\f\nand\ta\tl\tl\this friends were happy\n";
$search = "(\fTwee\ndle\t-\tDee\r'\rs)\nBi\frth\fday";
$c_source = "'Twas(Tweedle-Dee's)Birthdayandallhisfriendswerehappy";
$c_search = "(Tweedle-Dee's)Birthday";
Lengths: c_search 23; a_search 23
$r_search = "\\(\\s*T\\s*w\\s*e\\s*e\\s*d\\s*l\\s*e\\s*-\\s*D\\s*e\\s*e\\s*'\\s*s\\s*\\)\\s*B\\s*i\\s*r\\s*t\\s*h\\s*d\\s*a\\s*y";
$t_source = "'Twas \n\n\f\f\nand\ta\tl\tl\this friends were happy\n"; 
```

该字符串`$t_source`确实对应于`$source`删除 '(Tweedle-Dee's) Birthday'，这似乎符合要求。

将其转换为 Ruby 留给受虐狂^H^H^H^H^H^H^H^H^H^H^H 感兴趣的读者作为练习。

显然，您可以简单地创建`$r_search`字符串并将其用作正则表达式并将其直接应用于 (a copy of) `$source`; 它会起作用的。但我非常怀疑，如果将它应用于千字节长度的源字符串，代码运行速度会非常慢。不过，我还没有进行测量来证明这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T00:05:01.110

一种天真的方法是

1）将搜索字符串拆分为单个字符的列表（每个字符串）

2）清理每个单独的字符（仍然是字符串列表）

`\s*`3) 通过*加入列表

* 顺便说一句，Except`\s*`不起作用 -`\s*`将匹配 0 个或多个空格，这与 0 个或多个控制字符不同。请参阅[http://www.regular-expressions.info/posixbrackets.html#class](http://www.regular-expressions.info/posixbrackets.html#class)，并使用适合您的正则表达式风格的“控制字符”形式:)

`\W*`也可能有效，因为`\W`任何字符不在 a-zA-Z0-9_ 中。但我从未测试过它是否匹配控制字符或仅可打印字符。

# java - 检查字符串是否仅包含一组字母

> ID：15512807
> 
> 赞同：12
> 
> 时间：2013-03-19T23:58:57.707
> 
> 标签：java, string, char

我正在尝试检查一个单词是否仅包含一组字母，例如 I、O、S、H 和 X 假设用户输入：SSHX，输出将为是，但如果用户输入 SHEXX，则输出将为 NO

```
public static void main(String[] args) {
    Scanner sc = new Scanner(System.in);

    String word = sc.next();
    word = word.toUpperCase();

    int length = word.length();
    char letter = 0;

    for (int counter = 0; counter < length; counter++) {
        letter = word.charAt(counter);
    }
    if (letter != 'I' && letter != 'O' && letter != 'S' && letter != 'H' && letter != 'Z' && letter != 'X' && letter != 'N') {
        System.out.print("NO");
    } else {
        System.out.print("YES");
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-20T00:10:35.387

你有一个很好的方法来解决它。问题是您实际上并没有检查每个字母，因此您需要在 for 循环内进行检查，否则您只会检查最后一个字母。但是您不能打印“是”，因为您只想在所有字母都是“是”时打印它，因此您也可以使用布尔值来检查它，例如：

```
 boolean isMatch = true; 
    for (int counter = 0; counter < strLength && isMatch; counter++) {
        letter = word.charAt(counter);
        if (letter != 'I' && letter != 'O' && letter != 'S' && letter != 'H' && letter != 'Z' && letter != 'X' && letter != 'N') {
            System.out.print("NO");
            isMatch = false;
        } 
    }
    if (isMatch) {
        System.out.print("YES");
    } 
```

但是，正如其他人所指出的那样，使用正则表达式更有效（并且这个表达式有一个可以满足您想要的工作的正则表达式。星号表示括号内的零个或多个。）：

```
 if (word.matches("[HIOSX]*")) {
        System.out.print("YES");
    } else {
        System.out.print("NO");
    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-20T00:03:32.540

使用[正则表达式](https://en.wikipedia.org/wiki/Regular_expression)。

```
String regex = "[OSXHI]*";
String string = "SOMETHING";
Matcher matcher = Pattern.compile(regex).matcher(string);
if (matcher.find())
{
    String match = matcher.group(1);
    System.out.println(match);
} 
```

一些额外的资源：

*   [http://www.regular-expressions.info/](http://www.regular-expressions.info/)
*   [正则表达式语言 - 快速参考](http://msdn.microsoft.com/en-us/library/az24scfc.aspx)
*   [正则表达式 - 用户指南](http://www.zytrax.com/tech/web/regex.htm)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-20T00:07:01.173

除了使用正则表达式的明显答案之外，考虑使用 Google 的 Guava [API](https://code.google.com/p/guava-libraries/)来使这变得非常简单：

```
if(CharMatcher.anyOf("HIOSX").matchesAllOf(word)) { 

} ... 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-20T00:03:26.847

使用正则表达式：

```
if (word.matches("[HIOSX]+"))
    System.out.println("YES");
else
    System.out.println("NO"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T00:12:35.700

首先，您应该像这样初始化字母： `char letter = '0';`而不是 0 秒，您的 for 循环使用不当，请尝试以下代码：

```
 boolean isInSet;
    for (int counter = 0; counter < strLength; counter++) 
    {
        letter = word.charAt(counter);
        if (letter != 'I' && letter != 'O' && letter != 'S' && letter != 'H' && letter != 'Z' && letter != 'X' && letter != 'N') 
        {
            isInSet=false;
            counter=strlength; //end loop
        } 
        else 
        {
           isInSet=true;
        }
    }
    if(isInSet=true)
    {
       System.out.print("YES");
    }
    else
    {
       System.out.print("NO");
    } 
```

Now the loop will loop over the string and check if each character is in the set, if it isnt the loop ends and the boolean is set to false which results in the NO output

# wix - 仅在卸载时使用 Wix 自定义操作

> ID：15512814
> 
> 赞同：4
> 
> 时间：2013-03-19T23:59:26.780
> 
> 标签：wix

我无法让自定义操作仅在我使用 Wix 卸载我的服务时运行。

```
<CustomAction Id='InstallService'
              FileKey='Service.exe'
              ExeCommand='install'
              Execute='immediate'
              Return='check'
              Impersonate='yes'>NOT Installed</CustomAction>

<CustomAction Id='UninstallService'
              FileKey='Service.exe'
              ExeCommand='uninstall'
              Execute='immediate'
              Return='check'
              Impersonate='yes'>Installed AND NOT REINSTALL</CustomAction>

<InstallExecuteSequence>
  <Custom Action='UninstallService' After='StopServices'/>
  <Custom Action='InstallService' Before='StartServices'/>
</InstallExecuteSequence> 
```

这是组件...

```
 <Component Id="ProductComponent">
    <File Id="MyService.exe"
          Name="MyService.exe"
          Source="..\MyService\bin\Release\MyService.exe"
          Vital="yes"
          KeyPath="yes"
          DiskId="1"/>

    ...

    <ServiceControl Id='ServiceControl'
                    Name='MyService'
                    Start='install'
                    Stop='both'/>
  </Component> 
```

当我运行安装程序时，出现错误。查看事件日志，我发现这个......

产品：MyService -- 错误 1721。此 Windows 安装程序包有问题。无法运行完成此安装所需的程序。请联系您的支持人员或软件包供应商。操作：UninstallService，位置：C:\Program Files (x86)\MyService\MyService.exe，命令：卸载

我也试过这个...

```
<CustomAction Id='UninstallService'
              FileKey='Service.exe'
              ExeCommand='uninstall'
              Execute='immediate'
              Return='check'
              Impersonate='yes'>Installed AND NOT UPGRADINGPRODUCTCODE</CustomAction> 
```

注意：我使用自定义操作来安装/卸载服务，因为我使用了[TopShelf.NET](http://topshelf-project.com/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T03:41:26.447

您最好的选择是将自定义操作的操作与组件的操作状态联系起来。

```
<InstallExecuteSequence>
   <Custom Action="UninstallService">$ProductComponent=2</Custom>
   <Custom Action="InstallService">$ProductComponent=3</Custom>
</InstallExecuteSequence> 
```

此外，您将需要您的`CustomAction`元素是`Execute='deferred'`.

此外，`CustomAction`仅当您正在创建脚本自定义操作时，才允许元素中的文本。这似乎不是你正在做的。

添加自定义操作需要相当多的理解。不幸的是，第 3 方平台会[强迫您使用自定义操作](http://robmensching.com/blog/posts/2007/8/17/zataoca-custom-actions-are-generally-an-admission-of-failure)。

# c# - 如何使用委托来处理文本？

> ID：15512817
> 
> 赞同：0
> 
> 时间：2013-03-19T23:59:37.757
> 
> 标签：c#, delegates, parameter-passing

我目前正在将 XML 反序列化为函数 processText() 中的对象“X”。我想将一个函数作为参数传递，这样我就可以调用 processText 并将任意规则应用于对象 X。这似乎是使用委托的情况，但我不知道如何利用在线示例...

展示我尝试过的示例：

```
AiringProcessing ap = new AiringProcessing(localFiles[1]);
//  getZeroLengthAirings is the particular process I want to run during my text processing
AiringDelegate del = new AiringDelegate(ap.getZeroLengthAirings);
ap.processBatch(del); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T00:11:38.217

要将委托作为参数传递，您需要使用`Action<T>()`或`Func<T>`取决于返回值（操作返回 void）。

这是一个使用动作的例子：

```
public void TakeADelegate(Action<string> action, string str)
{
  action(str);
} 
```

与代表一起调用它：

```
this.TakeADelegate((string s) => { ... do work here ...}) 
```

# php - 简单的 html dom php 和明文中的新行

> ID：15512818
> 
> 赞同：1
> 
> 时间：2013-03-19T23:59:51.507
> 
> 标签：php, newline, simple-html-dom

当我解析站点并打印出纯文本时，我会在打印输出中得到很多无法通过 str_replace 删除的换行符。

例如，如果我解析 eBay 并查找结束时间，

```
$ebayEndTime = $this->html_simple_dom->find( 'span[class=vi-tm-left]', 0 )->plaintext; 
```

在打印输出中，它看起来像这样：

> \t\t\t\t\t（2013 年 3 月 19 日\n\t\t\t\t\t15:10:11 PDT）\n\t\t\t

尝试删除它没有效果：

```
$search = array('\n', '\t', '\r');
error_log("end time:" .  str_replace( $search, " ", $ebayEndTime)); 
```

仍然导致：

> \t\t\t\t\t（2013 年 3 月 19 日\n\t\t\t\t\t15:10:11 PDT）\n\t\t\t

我需要做什么来删除换行符/标签？我什至尝试过彻底：

```
$search = array('\n', '\t', '\r', '\\n', '\\t', '\\r', '\\\\n', '\\\t', '\\\r', '\\\\n', '\\\\t', '\\\\r'); 
```

据我所知，Java 要求转义字符被转义，但是当它打印在日志文件中时，它是否将其打印为使用 '\' 的 html 代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:25:47.277

怎么样：

```
$str = "\t\t\t\t\t(Mar 19, 2013\n\t\t\t\t\t15:10:11 PDT)\n\t\t\t";
echo trim(preg_replace('/\s+/', ' ', $str));
#=>(Mar 19, 2013 15:10:11 PDT) 
```

# java - 程序对 2d ArrayList[][] 使用未经检查或不安全的操作

> ID：15512819
> 
> 赞同：0
> 
> 时间：2013-03-19T23:59:59.297
> 
> 标签：java, arraylist, unsafe, unchecked

我在大学的任务是制作一个由游乐场组成的游戏板。每个字段都可以包含许多项目。我用这样的数组arrayList做到了：

```
List<String>[][] items = new ArrayList[x][y]; 
```

在 Eclipse 中一切正常，但是当我将它上传到 uni 的站点时，它给了我一个错误，我在其他程序中收到了该错误，其中包含其他列表。我在以前的程序中的代码是：

```
List list = new ArrayList(); 
```

我把它修好了：

```
List<String> list = new List<String>(); 
```

但现在情况不同了，因为我不允许写：

```
List<String>[][] items = new ArrayList<String>[x][y](); 
```

这是我得到的错误：

```
Note: student/GameImplementation.java uses unchecked or unsafe operations. 
Note: Recompile with -Xlint:unchecked for details 
```

PS如果您知道更优雅的完成任务的方式，请分享。我在想这样的事情：

```
Board<Fields<Items>> board = new Board(); 
```

但不知道如何使它工作。那些东西让我很困惑。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T00:02:29.273

最好的方法绝对是将包含在特定类中的单个单元格中的数据封装起来：

```
class Cell {
  List<String> data;
  OtherData data2;
}

Cell[][] items; 
```

你在里面存放什么`List<String>`？因为使用`String`对象并不总是最好的解决方案，尤其是当您有一组有限值时（您可以使用例如 an `enum`）。

# java - 使用 MySQL 数据库条目创建 Jbutton

> ID：15512824
> 
> 赞同：0
> 
> 时间：2013-03-20T00:00:21.197
> 
> 标签：java

我是一个初学者，我正在尝试找出一种方法，以便在将新条目插入 MySQL 数据库列时自动创建一个 jbutton。此按钮的文本将从数据库中的条目中提取。我已经想出了如何从表格中提取信息以用作 jbutton 文本，但是，我觉得必须有一种更简单的方法来做到这一点。关于这些问题的任何想法？我在下面包含了我的代码片段。谢谢！

```
public class JuniorSkills extends javax.swing.JFrame {

/**
 * Creates new form JuniorSkills
 */
public JuniorSkills() throws ClassNotFoundException {
initComponents();
    Connection conn = null;
    Statement statement = null;
    ResultSet rs = null;

    try {
        Class.forName("com.mysql.jdbc.Driver");
        conn=DriverManager.getConnection("jdbc:mysql://localhost:3306/simlab","root","password");
        System.out.println("Connected to database");

        statement = conn.createStatement();
        rs = statement.executeQuery("SELECT * FROM skill_table WHERE class='junior'");

        int count = 0;
        while(rs.next())
        {
            count++;
            String gotit = rs.getString(1);
            //System.out.println(gotit);
            if(count==1)
            {
                Skill1.setText(rs.getString(1));
            }
            else if(count==2)
            {
                skill2.setText(rs.getString(1));
            }
            else if(count==3)
            {
                skill3.setText(rs.getString(1));
            }
            else if(count==4)
            {
                skill4.setText(rs.getString(1));
            }
            else if(count==5)
            {
                Skill5.setText(rs.getString(1));
            }
            else if(count==6)
            {
                skill6.setText(rs.getString(1));
            }
            else if(count==7)
            {
                Skill7.setText(rs.getString(1));
            }
            else if(count==8)
            {
                Skill8.setText(rs.getString(1));
            }
            else if(count==9)
            {
                Skill9.setText(rs.getString(1));
            }
            else if(count==10)
            {
                Skill10.setText(rs.getString(1));
            }
        }
    } catch (SQLException ex) {
        Logger.getLogger(JuniorSkills.class.getName()).log(Level.SEVERE, null, ex); 
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T00:08:02.023

如果您只有固定数量的行，则可以创建一个`JButton`s数组

```
private JButton[] myFixedListOfButtons;

//...//

myFixedListOfButtons = new JButton[10];

//...//

while(rs.next())
{
    String gotit = rs.getString(1);
    if (count < myFixedListOfButtons.length) 
    {
        myFixedListOfButtons[count].setText(gotit);
    }
    count++;
} 
```

或者，如果您有可变数量的行，您应该根据需要简单地创建按钮

```
removeAll(); // remove all the old buttons...
while(rs.next())
{
    String gotit = rs.getString(1);
    JButton btn = new JButton(gotit);
    add(btn);
} 
```

# python - 如何在函数之前定义一个全局变量，然后在python的函数中引用它？

> ID：15512825
> 
> 赞同：0
> 
> 时间：2013-03-20T00:00:32.537
> 
> 标签：python, global, turing-machines

我刚刚熟悉了图灵机。我正在制作一个半精确的虚拟图灵机，但我遇到了一个看似简单的问题，我只知道有一个解决方案。我在网上进行了研究，但找不到任何能满足我的问题的东西。

如何使变量 'l' 在函数中可调用。它必须是可调用的，因为如果我在函数中定义变量的初始值，当函数循环时，它会将值重置为 0。

这是我的代码：

```
blanktape = []
for x in range(1,251):
    x = ' '
    blanktape.append(x)

global l
l = 1
non = ' '
head = blanktape[l]
symbols = [3, 'ee', 'x']

def mconfigb():
    if head == non:
        blanktape[blanktape.index(head)] = 0
        l = l + 2

def mconfigc():
    if head == non:
        blanktape[blanktape.index(head)] = 1
        l = l + 2

def turingmachine():
        while l < len(blanktape) + 1:
            mconfigb()
            mconfigc()
        return blanktape

print turingmachine() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T05:09:15.863

```
def mconfigb():
     global l 
```

其他功能也这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T00:02:52.677

```
def function(input):
    global globvar
    .... 
```

它们必须按功能声明。但是，我认为您应该将所有创建包装到图灵机类中并使用实例变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T00:03:37.413

你需要把：

```
global l 
```

*在*函数本身内（你可能想重新考虑你的变量命名约定，`l`这不是一个好名字）。

例如：

```
xyzzy = 1

def fn():
    global xyzzy
    xyzzy = xyzzy + 1 
```

# c++ - 为什么 std::array< T, 0 > 不为空？

> ID：15512827
> 
> 赞同：24
> 
> 时间：2013-03-20T00:00:44.530
> 
> 标签：c++, c++11, language-lawyer

给定 any `std::array< T, 0 >`，为什么它不是空的？我的意思是“空”，如：

```
 std::is_empty< std::array< int, 0 > >::value 
```

返回`false`和

```
 #include <iostream>
 #include <tuple>
 #include <array>

 struct Empty {};

 int main()
 {
     std::cout << sizeof(std::tuple<int>) << std::endl;
     std::cout << sizeof(std::tuple<int,Empty>) << std::endl;
     std::cout << sizeof(std::tuple<int,std::array<int,0>>) << std::endl;
 } 
```

产量

```
 4
 4
 8 
```

这意味着，对于`std::array<int,0>`，不应用空基优化 (EBO)。

这对我来说似乎特别奇怪，因为`std::tuple<>`（注意：没有模板参数）*是*空的，即`std::is_empty<std::tuple<>>::value`确实 yield `true`。

**问题：**为什么会这样，因为 size`0`已经是 的特例了`std::array`？是故意的还是标准的疏忽？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-20T00:10:10.427

该标准没有说明是否`tuple`或`array`应该为空，您所看到的是实现细节，但是没有理由将其设为`tuple<>`非空，而有充分的理由将其设为非`array<T, 0>`空，请考虑：

```
std::array<int, sizeof...(values)> = { { values... } }; 
```

当参数包为空时，您将得到：

```
std::array<int, 0> = { { } }; 
```

为了使初始化程序有效，对象需要一个成员，这不可能是`int[0]`因为您不能将零大小的数组作为成员，因此可能的实现是`int[1]`

实现不必对整个数组进行特殊处理，它可以这样做：

```
T m_data[N == 0 ? 1 : N]; 
```

并且所有其他成员的工作方式完全相同（假设`end()`定义为`begin()+N`）

# c# - 从 Gridview 单元格中获取值

> ID：15512832
> 
> 赞同：7
> 
> 时间：2013-03-20T00:01:14.120
> 
> 标签：c#, asp.net, button, gridview

我正在尝试从 GridView 获取 int 值。这是我的网格视图的屏幕截图。

![网格视图截图](../Images/f9521ad1584ab8792253751b1be049dd.png)

这是 Gridview 的 asp 代码

我创建了一个 RowCommand 方法，当我按下 GridView 上的 Remove 按钮时，它应该给我第二列的 int 值。因此，例如，如果我要按下最后一个 Remove 按钮，它会给我一个 int 值 5。

这是我的方法的代码隐藏

```
protected void grdOrder_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName == "Remove")
    {

        int bigStore = Convert.ToInt32(grdOrder.SelectedRow.Cells[2].Text);

        clsStockCollection AnId = new clsStockCollection();

        clsStock TheOrder = new clsStock();
        TheOrder.OrderId = bigStore;
        AnId.DeleteOrder(TheOrder);
        DataCall();

    }
} 
```

当我运行此代码时，我收到此错误。你调用的对象是空的。

我不明白我如何或为什么需要引用一个对象，例如：Object As New Object。为什么我需要这样做？

这是完整课程的代码隐藏：pastebin.com/yzLR7s2w

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T00:17:34.323

`SelectedRows`只返回已经被选中的行；没有选择，您将一无所获。而不是`int bigStore = Convert.ToInt32(grdOrder.SelectedRow.Cells[2].Text);`尝试：

```
int rowIndex = Convert.ToInt32(e.CommandArgument); // Get the current row
int bigStore = Convert.ToInt32(grdOrder.Rows[rowIndex].Cells[2].Text); 
```

# regex - VBA，正则表达式：子匹配 FirstIndex 和长度

> ID：15512834
> 
> 赞同：0
> 
> 时间：2013-03-20T00:01:28.127
> 
> 标签：regex, vba, vb6, string-matching

我有一个复杂的分组正则表达式，但在 RegExp 5.5 中，匹配的子匹配作为字符串返回，没有暴露于 .FirstIndex 和 .Length。捕获的字符串不是唯一的。

正则表达式：

```
([A-Z]+)\s+\[A-Z]?\s+(\d{3})\-(\d{3})\s+([A-Z]?)\-([A-Z]?) 
```

示例文本：

```
BLAHBLAH A 100-100 A-A    
BLAH 101-101   A- 
```

输出：

```
0:BLAHBLAH           0:BLAH
1:100                1:101
2:100                2:101
3:A                  3:A
4:A                  4: 
```

目前，我遍历子匹配，搜索子字符串，找到位置，用空格替换：

```
Dim ub as Long: ub = MatchCollection.Matches(0).Submatches.Count-1
Dim fi() as Long, ln() as Long: Redim fi(ub): Redim ln(ub)

For i = 0 to ub
    fi(i) = Clng(Instr(1, Text, MatchCollection.Matches(0).Submatches(i))
    ln(i) = Clng(Len(MatchCollection.Matches(0).Submatches(i))

    Mid(Text, fi(i), ln(i)) = String$(ln(i), Chr(32))
Next i 
```

这显然不适用于第一个示例字符串，因为正则表达式未捕获 A 的第一次出现。

任何想法都非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:26:18.710

好的，找到了解决方案。在循环中，我需要在匹配之前清除所有字符，所以不是：

```
Mid(Text, fi(i), ln(i)) = String$(ln(i), Chr(32)) 
```

我需要：

```
Mid(Text, 1, (fi(i)-1)+ ln(i)) = String$(fi(i)-1+ln(i), Chr(32)) 
```

# mysql - ORDER BY datetime 使查询非常慢

> ID：15512839
> 
> 赞同：4
> 
> 时间：2013-03-20T00:02:14.973
> 
> 标签：mysql, sql-order-by

我正在尝试从多个表中提取数据，当我使用 ORDER BY 日期时间字段时，它会在至少 10 秒后返回结果，但是如果我在没有 ORDER BY 的情况下执行相同的查询，那么它会在 2 秒内返回结果。

这是我当前的查询

```
SELECT
ph.call_subject AS callSubject,
ac.account_name AS accountName,
DATE_FORMAT(ph.trigger_on, "%c/%e/%Y %h:%i %p") AS triggerOn,
ind.name AS industry,
cc.call_code_name AS callCode
FROM phone_calls AS ph
INNER JOIN accounts AS ac ON ph.account_id = ac.account_id
INNER JOIN industries AS ind ON ind.industry_id = ac.industry_id
INNER JOIN call_codes AS cc ON ph.call_code_id = cc.call_code_id
WHERE ac.status = 1 AND ph.status = 1 AND ph.owner_id = 1 AND ac.do_not_call = 0
AND ph.trigger_on BETWEEN '2012-11-19 00:00:00' AND '2013-03-19 23:59:59'
ORDER BY ph.trigger_on ASC LIMIT 0,1000 
```

以下字段均为 INT(11) UNSIGNED 类型

```
ph.account_id
ac.account_id
ind.industry_id
ac.industry_id
ph.call_code_id
cc.call_code_id
ph.owner_id 
```

以下字段均为 tinyint(1) 类型

```
ac.status 
ph.status
ac.do_not_call 
```

此字段是日期时间类型

```
ph.trigger_on 
```

请注意，accounts 有 300K 条记录，phone_calls 有 500 万条记录。我该怎么做才能更快地执行此 ORDER BY？请注意，我的所有 where 子句字段、我的所有 ON 子句和 ph.trigger_on 都已编入索引。我使用的是 InnoDB 存储引擎而不是 MyIsam。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T10:12:49.223

请试试这个：

1.  在列上建立索引`(phone_calls.trigger_on, phone_calls.status, phone_calls.owner_id)`调用它`pcto`

2.  将您的 FROM 子句更改为：

```
 FROM phone_calls AS ph FORCE INDEX (pcto) 
```

这是理想。如果它不起作用，请添加评论，我将为您提供另一种保证有效的方法，并为您提供所需的性能改进。

**请注意：在查询中的“每个”列上建立索引并不重要（而且确实没有好处）。MySQL 每个表只能使用一个索引（或者更准确地说，每个表别名）。您需要构建我们告诉您的索引。**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T00:11:45.800

如果您的 LIMIT 为 5 行，那么在没有顺序的情况下，查询可以获取它找到的与其他条件匹配的前 5 行。

如果您有一个 ORDER BY 子句，它必须查看与您的其他条件匹配的所有行并选择最低的 5 个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-07T03:25:29.800

当您在 (SELECT) 上执行 SELECT 时`aka`，它真的就像在临时表上工作。下面的示例在一个主大表上有几个连接。当 ORDER BY 在整个表查询上时，此解决方案将查询时间缩短到 0.2 秒，而 20 秒。

```
 SELECT * FROM (SELECT `cse_notes`.`notes_id`, `cse_notes`.`dateandtime`, 
    `cse_case`.`case_id`, `cse_case_notes`.`attribute`
    FROM  `cse_notes` 
    INNER JOIN  `cse_case_notes` 
    ON `cse_notes`.`notes_uuid` =  `cse_case_notes`.`notes_uuid`
    INNER JOIN `cse_case` 
    ON  `cse_case_notes`.`case_uuid` = `cse_case`.`case_uuid`
    WHERE `cse_notes`.`deleted` = 'N' AND `cse_case`.`case_id` = :case_id
    AND `cse_notes`.customer_id = :customer_id) notes
    ORDER BY `dateandtime` DESC 
```

这是运行非常缓慢的错误查询。我认为这很好，我不知道必须在过滤开始之前对整个表进行排序。单独索引没有帮助。

```
 SELECT `cse_notes`.`notes_id`, `cse_notes`.`dateandtime`,
    `cse_case`.`case_id`, `cse_case_notes`.`attribute`    
    FROM  `cse_notes`     
    INNER JOIN  `cse_case_notes` ON `cse_notes`.`notes_uuid` =  `cse_case_notes`.`notes_uuid`    
    INNER JOIN `cse_case` ON  `cse_case_notes`.`case_uuid` = `cse_case`.`case_uuid`    
    WHERE `cse_notes`.`deleted` = 'N' 
    AND `cse_case`.`case_id` = :case_id    
    AND `cse_notes`.customer_id = :customer_id    
    ORDER BY `cse_notes`.dateandtime DESC LIMIT 0, 1000 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T00:43:44.300

根据我的经验，从 SQL 查询中获得性能的最快方法是将其简化为多个步骤。利用临时表并减少每一步的连接和操作数量（消耗内存，获得速度）。请原谅我下面可能出现的语法错误，因为我已经很长时间没有使用 MySQL，但是您可以按如下方式重写您的查询：

```
CREATE TEMPORARY TABLE scratch1 AS (
    SELECT
            ph.call_subject AS callSubject,
            ac.account_name AS accountName,
            DATE_FORMAT(ph.trigger_on, "%c/%e/%Y %h:%i %p") AS triggerOn,
            ac.industry_id,
            ph.call_code_id
    FROM
            phone_calls AS ph
            INNER JOIN accounts AS ac ON ph.account_id = ac.account_id
    WHERE   
            ac.status = 1 AND ph.status = 1 AND ph.owner_id = 1 AND ac.do_not_call = 0
            AND ph.trigger_on BETWEEN '2012-11-19 00:00:00' AND '2013-03-19 23:59:59' )

ALTER TABLE scratch1 ADD industry VARCHAR(255)
ALTER TABLE scratch1 ADD callCode VARCHAR(255)

UPDATE scratch1 s JOIN industries ind ON ind.industry_id = s.industry_id
SET s.industry = ind.name

UPDATE scratch1 s JOIN call_codes cc ON cc.call_code_id = s.call_code_id
SET s.callCode = cc.call_code_name

CREATE TEMPORARY TABLE scratch2 AS (
    SELECT * FROM scratch1 ORDER BY triggerOn ASC )

SELECT * FROM scratch2 LIMIT 0, 1000 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T00:51:32.487

这是为了详细说明Ersun的解决方案/评论。

如果没有`order by`，SQL 将评估查询。在这种情况下，它是一堆连接。很可能，您在连接字段上有索引。因此，查询通过从 读取记录`phone_calls`、查找数据、检查过滤条件并返回它来进行。然后它进入记录等等。总的来说，它可能会读取几千或几万条记录。

使用`order by`，SQL 必须评估查询中的*所有*记录。它必须读取*所有*电话，因为最后一个电话可能具有最小值。然后它进行排序并返回正确的记录。

您可以通过建立索引`phone_calls(status, owner_id, trigger_on)`来满足该`where`子句来加快查询速度。

# database - 重构数据库应该使用代理键吗？

> ID：15512844
> 
> 赞同：0
> 
> 时间：2013-03-20T00:02:47.883
> 
> 标签：database, refactoring, relational-database

我继承了一个要迁移到 SQL Server 的 Access 数据库。在数据库中有很多标签或分类列。例如，订单表可能具有状态属性，供应商可能具有评级属性。大多数对它们没有真正的业务逻辑，它们本身不是实体，它们都只是允许用户标记和搜索的描述符。

一方面，我认为这些描述符应该放在他们自己的表中，并使用外键引用。然后在我的应用程序代码中，我可以使用与代理 id 匹配的枚举。为什么？因为我可以轻松添加它们，轻松更改值，也许可以节省一些空间。

```
Order { OrderId int, CustomerId int, StatusId int}
Status { StatusId int, Name varchar(50)} 
```

另一方面，因为许多这些属性永远不会改变，永远不会被添加，而且我还有很多其他的事情要做，我想我应该离开它。

```
Order{OrderId int, CustomerId int, Status varchar(50)} 
```

第一个选项是否高于它应该始终完成的方式？第二个选项可以接受吗？我认为保留它的唯一缺点是表会更大一些，并且字符串比较可能不如 int 比较快。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T00:31:18.680

如果您需要对在该“状态”列中找到的值进行更多控制，您还可以将 Order.Status 中的不同值插入到另一个表中，并为其设置外键引用。按照您描述表格的方式。. .

```
Order{OrderId int, CustomerId int, Status varchar(50)}
Status {Name varchar(50)} 
```

不过，我会为该列选择比“名称”更具描述性的内容。级联更新还是删除取决于应用程序。当您在 SQL Server 上时，您可以控制允许谁使用 SQL GRANT 和 REVOKE 语句更新“状态”表。（您也可以使用 Access 做到这一点，但您似乎正在远离它。）

要从此表中获取有意义的数据，需要两个连接而不是三个。考虑一下您是否需要在该列中包含 50 个字符。（访问默认为 50。大多数人从不更改它。）

现在，要回答您的问题，上面的第一个选项并不是应该*始终*采用的方式。ID 号总是会增加所需的连接数，并且您仍然需要对自然键进行 UNIQUE 约束。将 ID 号码用于美国州代码、邮政编码等是没有任何意义的。第二个选项对我来说通常是不可接受的。我*通常会*像在这个答案的顶部那样使用外键引用另一个表。

# javascript - 搜索结果链接

> ID：15512846
> 
> 赞同：1
> 
> 时间：2013-03-20T00:02:53.967
> 
> 标签：javascript, jquery, ajax

我目前在我的网站上有一个工作板，用户可以在其中输入职位或关键字以及搜索工作的位置。

结果使用 Jquery/AJAX 显示，无需刷新页面。但是，我希望能够链接到特定搜索的结果。例如，如果我在 OH 中搜索 Web 开发职位，我希望能够将链接发送给其他人，他们将能够单击该链接并直接转到已加载这些结果的页面。

我对 PHP 有一些了解，但对 Ajax 或 Javascript/Jquery 一无所知，这就是为什么这对我来说如此困难。我希望有人可以帮助我解决这个问题。

这是当前显示结果的代码：

```
 jQuery(document).ready(function ($) {
      // search button clicked
      jQuery("input[name='indeedsearchbutton']").click(function () {
          indeedsearchbusy();
          indeedsearchcall();
      })

      // reset page if query changes
      jQuery("input[name='q']").change(function () {
          jQuery("input[name='start']").val(1);
      })

      // reset page if location changes
      jQuery("input[name='l']").change(function () {
          jQuery("input[name='start']").val(1);
      })

      if (autosearch) {
          indeedsearchbusy();
          indeedsearchcall();
      }
  })

  // pagination set start position
  function setstart(s) {
      jQuery("input[name='start']").val(s);
      indeedsearchbusy();
      indeedsearchcall();
  }

  // get json data from inputs for ajax call
  function getdata() {
      var d = {
          action: 'indeedcallback',
          q: (jQuery("input[name='q']").length != 0 ? jQuery("input[name='q']").val() : jQuery("select[name='q']").val()),
          l: jQuery("input[name='l']").val(),
          start: jQuery("input[name='start']").val()
      }
      return d;
  }

  // display json results from ajax call
  function indeeddisplayresults(resultsjson) {
      var rpage = "";
      if (resultsjson.pagination) rpage += resultsjson.pagination;

      if (resultsjson.html) rpage += resultsjson.html;

      if (resultsjson.pagination) rpage += resultsjson.pagination;

      jQuery("div#indeedsearchresults").html(rpage);
  }

  // ajax call to search indeed
  function indeedsearchcall() {
      var data = getdata();
      jQuery.post(wpajaxurl, data, function (response) {
          resultjson = eval("(" + response + ")");
          if (resultjson) {
              indeeddisplayresults(resultjson);
          }
      })
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T00:19:30.943

我只会使用 URL 和某种 hashbang (GETish) 功能。因此，每次有人进行搜索时，URL 都会更改，并且每次加载页面时，它都会查看 URL 中的搜索参数，如果存在，则运行搜索...

有一个很好的 GIST 对下面的代码进行了完整的解释：[https ://gist.github.com/miohtama/1570295](https://gist.github.com/miohtama/1570295)

```
function parseHashBangArgs(aURL) {

aURL = aURL || window.location.href;

var vars = {};
var hashes = aURL.slice(aURL.indexOf('#') + 1).split('&');

for(var i = 0; i < hashes.length; i++) {
   var hash = hashes[i].split('=');

   if(hash.length > 1) {
       vars[hash[0]] = hash[1];
   } else {
      vars[hash[0]] = null;
   }      
}

return vars; 
```

}

好的，关于如何使用它的问题：我已经做了一个工作示例（下面的代码），但你必须在你自己的代码中实现（我不能为你做任何事情）......

```
<input id="searchBar" type="text" value="enter search here" /><br />
<input id="theButton" type="button" name="" value="getHash" /><br />
Hash value is: <a id="hashValue"></a>

jQuery(document).ready(function ($) {
    $('#searchBar').change(function() {
        search(document.getElementById('searchBar').value)
    });
    $('#theButton').click(function() {
        getHash();
    });
})
function search(searchTerms){
    location.hash = "searchTerm="+searchTerms;   
}

function getHash(){
    var hashObj= new Object(); 
    hashObj=(parseHashBangArgs())
    document.getElementById('hashValue').innerHTML=hashObj.searchTerm;
}

function parseHashBangArgs(aURL) {
... code from GIST above... 
```

# html - 如何获得测试用例的完整执行时间？

> ID：15512847
> 
> 赞同：-1
> 
> 时间：2013-03-20T00:02:57.507
> 
> 标签：html, selenium, coding-style

Selenium IDE - HTML 中的测试用例从开始到结束。

做什么命令/目标有用？

请举个例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T08:22:44.063

有点大，但是可以用=P

```
[info] Executing: |storeEval | javascript{(new Date().getHours())} | hStart |
[info] script is: 2
[info] Executing: |storeEval | javascript{(new Date().getMinutes())} | mStart |
[info] script is: 8
[info] Executing: |storeEval | javascript{(new Date().getSeconds())} | sStart |
[info] script is: 0
[info] Executing: |storeEval | ${hStart}*60*60 | hStartTos |
[info] script is: 2*60*60
[info] Executing: |storeEval | ${mStart}*60 | mStartTos |
[info] script is: 8*60
[info] Executing: |storeEval | ${hStartTos}+${mStartTos}+${sStart} | sStartTotal |
[info] script is: 7200+480+0
[info] Executing: |storeEval | ${sStartTotal}/60 | sTomStartTotal |
[info] script is: 7680/60

[info] Executing: |pause | 300000 | Here your testcase |

[info] Executing: |storeEval | javascript{(new Date().getHours())} | hEnd |
[info] script is: 2
[info] Executing: |storeEval | javascript{(new Date().getMinutes())} | mEnd |
[info] script is: 13
[info] Executing: |storeEval | javascript{(new Date().getSeconds())} | sEnd |
[info] script is: 0
[info] Executing: |storeEval | ${hEnd}*60*60 | hEndTos |
[info] script is: 2*60*60
[info] Executing: |storeEval | ${mEnd}*60 | mEndTos |
[info] script is: 13*60
[info] Executing: |storeEval | ${hEndTos}+${mEndTos}+${sEnd} | sEndTotal |
[info] script is: 7200+780+0
[info] Executing: |storeEval | ${sEndTotal}/60 | sTomEndTotal |
[info] script is: 7980/60
[info] Executing: |storeEval | ${sTomEndTotal}-${sTomStartTotal} | ExeTime |
[info] script is: 133-128
[info] Executing: |echo | ${ExeTime} Minutes | |
[info] echo: 5 Minutes 
```

# asp.net-web-api - Breezejs，跨域

> ID：15512850
> 
> 赞同：2
> 
> 时间：2013-03-20T00:03:18.770
> 
> 标签：asp.net-web-api, breeze

我有一个小问题......或者可能是大问题..有关轻率js的问题..我目前的设置是我有两个项目..一个托管微风api的web-api项目..另一个托管客户端应用程序的项目那应该消耗api ..这将为我提供api和客户端运行的两个不同端口..

所以我的问题是......有没有办法让微风在跨域上工作？..还是微风只用于在自己的域内使用？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T03:22:37.663

跨域没问题。

好的，有一个问题，但这不是微风问题。您正在与困扰我们所有人的浏览器“[同源策略”作斗争。](http://en.wikipedia.org/wiki/Same_origin_policy)

你可以绕过它。唯一的问题是你想怎么做。这个问题从“你将支持哪些浏览器”开始。如果 IE10+ 和最新的 Chrome 和 FF，你应该去[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)。如果旧浏览器和 Opera ......你将不得不打[JSONP](http://en.wikipedia.org/wiki/JSONP)的战斗。

请指教。

轻推：猜猜我更喜欢哪一个？Breeze 中已经有一个 CORS 示例……它是您通过[下载获得](http://www.breezejs.com/documentation/download)[的 Todo 示例](http://www.breezejs.com/samples/todo)。它还没有记录在案，但它在那里等着你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-22T07:59:05.680

Ward 的解决方案非常正确，我只是添加了一个更直接的解决方案。

现在执行此安装包。

> Microsoft.AspNet.WebApi.Cors

然后将其添加到 web.config

```
<system.webServer>
<httpProtocol>
<customHeaders>
  <add name="Access-Control-Allow-Origin" value="*"/>
  <add name="Access-Control-Allow-Headers" value="Content-Type"/>
  <add name="Access-Control-Allow-Methods" value="POST,GET,OPTIONS"/>
</customHeaders>
</httpProtocol>
</system.webServer> 
```

将“Access-Control-Allow-Origin”更改为您的其他站点 * 存在安全风险，因为它允许所有人使用它进行开发

然后将此 altribrute 添加到您希望访问的资源中

```
[EnableCors(origins: "*", headers: "*", methods: "*")] 
```

再次在这里更改原点，也请记住网址末尾没有反斜杠。

# android - 如何管理动态下载链接的位置

> ID：15512856
> 
> 赞同：1
> 
> 时间：2013-03-20T00:03:54.463
> 
> 标签：android, c++, qt, web

我有一个小型的 Android 应用程序，我正在做这件事来取乐。该应用程序的主要部分之一是能够从某个网站下载文档。但是，下载链接会经常更改，我想有一些方法来管理应用程序下载的链接。几乎没有经验，我首先想到的是一个 XML 文件，我可以下载并解析文档的必要链接（请注意，这些文档不敏感，人们得到 XML 文件将毫无价值）。实际上，它可以是 Web 服务器上的任何人工可编辑格式。

一些额外的信息是我在我的 Android 应用程序中使用 C++ (Qt)，但我真的不认为这会限制它太多。这主要是存储动态链接位置的最佳方式。我的另一个更牵强的想法是更新地址的 TcpServer，但我觉得这有点矫枉过正。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T00:48:47.950

正如其他人在评论中指出的那样，Web 服务器上的 XML 是一个很好的解决方案。现在，当我更新 XML 文件中的链接时，下载链接将在 Android 应用程序（或其他地方）中动态更改。这没关系，因为 XML 是标准化的，安全性不是问题。

感谢您的帮助和第二意见！

# android - 在 Android 应用程序中运行终端命令来路由音频

> ID：15512858
> 
> 赞同：0
> 
> 时间：2013-03-20T00:03:59.117
> 
> 标签：android, apk, su, root, audio-route

所以我有一个 LG P920 我想修改 TI FMrX 应用程序以添加命令以通过 tinymix 路由音频这里是 shell 命令

> ```
> # tinymix 6 120
> # tinymix 66 7
> # tinymix 67 7
> # tinymix 73 2
> # tinymix 74 2 
> ```

二进制文件位于`/system/bin/tinymix`

所以我试图在java中暗示它我不确定它是否正确，但它是

```
 public static void RouteAudioOn()
    {
    String MIX = "tinymix";
    int DL1 = 6;
    int DL1Value = 120;
    int FMvol = 66;
    int Headsetvol = 67'
    int RightCh = 73;
    int LeftCh = 74;
    int SoundValue  = 7;
    int HeadsetValue = 8;
    int LineIn = 2

    Process process = Runtime.getRuntime().exec("su");
    DataOutputStream os = new DataOutputStream(process.getOutputStream());

    os.writeBytes(MIX+" "+DL1+" "+DL1Value"\n");
    os.writeBytes(MIX+" "+FMvol+" "+SoundValue"\n");
    os.writeBytes(MIX+" "+Headsetvol+" "+HeadsetValue"\n");
    os.writeBytes(MIX+" "+RightCh+" "+LineIn"\n");
    os.writeBytes(MIX+" "+LeftCh+" "+LineIn"\n");

    os.writeBytes("exit\n");
    os.flush();
    os.close();

    process.waitFor();
    }  

 public static void RouteAudioOff()
    {
    String MIX = "tinymix";
    int DL1 = 6;
    int DL1Value = 0;
    int FMvol = 66;
    int Headsetvol = 67'
    int RightCh = 73;
    int LeftCh = 74;
    int SoundValue  = 0;
    int HeadsetValue = 0;
    int LineIn = 0

    Process process = Runtime.getRuntime().exec("su");
    DataOutputStream os = new DataOutputStream(process.getOutputStream());

    os.writeBytes(MIX+" "+DL1+" "+DL1Value"\n");
    os.writeBytes(MIX+" "+FMvol+" "+SoundValue"\n");
    os.writeBytes(MIX+" "+Headsetvol+" "+HeadsetValue"\n");
    os.writeBytes(MIX+" "+RightCh+" "+LineIn"\n");
    os.writeBytes(MIX+" "+LeftCh+" "+LineIn"\n");

    os.writeBytes("exit\n");
    os.flush();
    os.close();

    process.waitFor();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:48:25.710

我是这样做的，没问题

boolean son=false 表示耳机，true 表示免提

```
public void RunAsRoot(boolean son) {
    Process p = null;
    ArrayList tmpCmd = new ArrayList();
    tmpCmd.add("chmod 777 /dev/radio0");
    tmpCmd.add("tinymix 6 120");
    tmpCmd.add("tinymix 66 4");
if(son){tmpCmd.add("tinymix 67 1");tmpCmd.add("tinymix 73 1");
tmpCmd.add("tinymix 74 0");tmpCmd.add("tinymix 68 28");tmpCmd.add("tinymix 75 2");tmpCmd.add("tinymix 76 2");}
else    {tmpCmd.add("tinymix 75 0");tmpCmd.add("tinymix 76 0");tmpCmd.add("tinymix 68 0");tmpCmd.add("tinymix 67 4");
tmpCmd.add("tinymix 73 2");
tmpCmd.add("tinymix 74 2");}

    try {
        p = Runtime.getRuntime().exec("su");
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    DataOutputStream os = new DataOutputStream(p.getOutputStream());            
    for (int i=0;i<tmpCmd.size();i++) {
       try {
        os.writeBytes(tmpCmd.get(i)+"\n");
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    }           
    try {
         os.writeBytes("exit\n");
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }  
    try {
        os.flush();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

# php - PDO 关联数组 - 返回关联

> ID：15512861
> 
> 赞同：14
> 
> 时间：2013-03-20T00:04:30.257
> 
> 标签：php, arrays, pdo, associative

我有这个代码：

```
$dbInstance = DB_Instance::getDBO();
$statement = $dbInstance->prepare("SELECT id, name FROM language ORDER BY id");
$statement->execute();      
$rows = $statement->fetchAll(); 

//Create associative array wuth id set as an index in array
$languages = array();
foreach($rows as $r) {
    $languages[$r['id']] = $r['name'];
}
return $languages; 
```

我不知道如何使用 PDO 语句来实现与数组 $languages 产生的相同结果。我尝试了一些不同的 fetch_styles。

我尝试了一些不同的风格，我可以得到：

```
[0] svenska
[1] engelska 
```

但我想喜欢：

```
[1] svenska
[2] engelska 
```

（其中 1 和 2 是数据库中 id 的值）

我想我可以创建一个函数并用它来调用它，`FETCH_FUNC`但我也不确定那会不会很棒。

以上是最好/最干净的方法吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-02-13T19:50:58.527

大家都忘记了

```
$sth->fetchAll(PDO::FETCH_KEY_PAIR); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-20T16:07:43.020

不确定是否有更好的方法。你可以试试这个？

```
$rows = $statement->fetchAll(PDO::FETCH_ASSOC);

$languages = array();

function getLangs($col, $row) {
     $languages[$col['id']] = $col['name'];
}

array_walk($rows, 'getLangs'); 
```

foreach 循环没有任何问题。我实际上会使用你所拥有的。很难比这更干净...

**更新：**

在仔细阅读您的问题之后，您真正应该问的是您是否可以格式化您的查询，以使结果以不同的格式返回。

因此，返回您的正常 SELECT 查询的方式是：

```
+----+----------+
| id |     name |
+----+----------+
|  1 |  svenska |
|  2 | engelska |
| .. |      ... |
| .. |      ... |
+----+----------+

$row = array(
    row_1 => array(
        id   => "1",
        name => "svenska"
    ),
    row_2 => array(
        id   => "2",
        name => "engelska"
    ),
    row_3 => array(
        id   => "...",
        name => "..."
    ),
    row_4 => array(
        id   => "...",
        name => "..."
    )
)

$row[$row_number][$column_name] = $value 
```

您要求的是某种方式来返回您的查询结果，如下所示：

```
// Query result is only one row, with each 'id' as column name
// And the 'name' from the same row as it's value...

+---------+----------+-----+-----+-----+
|       1 |        2 | ... | ... | ... |
+---------+----------+-----+-----+-----+
| svenska | engelska | ... | ... | ... |
+---------+----------+-----+-----+-----+

$row = array(
    row_1 => array(
          1 => "svenska",
          2 => "engelska",
        ... => "...",
        ... => "...",
        ... => "..."
    )
)

$languages = $row[row_1];
$languages[$id] = $name; 
```

老实说，我不完全确定你可以在 SQL 中[做到这一点。](https://stackoverflow.com/questions/152770/transpose-a-set-of-rows-as-columns-in-sql-server-2000)即使可以，我也建议不要这样做。对于缩放表来说，这将是可怕的。如果您的表格是静态的，那么为什么不按照我刚开始提到的方式对其进行格式化呢？为什么不把它放在包含文件的静态 PHP 数组中呢？

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-20T16:00:36.803

我想你可能正在寻找`$result = $sth->fetch(PDO::FETCH_ASSOC);`

参考： http: [//php.net/manual/en/pdostatement.fetch.php](http://php.net/manual/en/pdostatement.fetch.php)

[编辑] 哎呀迟到了:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-28T20:18:50.080

```
<?php
$dbhost = 'somehost';
$dbuser = 'someuser';
$dbpw = 'somepw';
$dbname = 'somename';
$options = [PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION,];
$dsn = "mysql:host=$dbhost;dbname=$dbname;";
$pdo = new PDO($dsn, $dbuser, $dbpw, $options);

$data = $pdo->query("SELECT * FROM language")->fetchAll(\PDO::FETCH_UNIQUE);
var_dump($data); 
```

`FETCH_UNIQUE`诀窍...

# php - 这个 mysql_result 语句的 mysqli 等效项是什么？

> ID：15512869
> 
> 赞同：0
> 
> 时间：2013-03-20T00:05:12.717
> 
> 标签：php, mysql, mysqli

这是我在 mysql 中使用的代码，现在我正在尝试将我的所有函数转换为 mysqli。我将如何格式化它以返回我需要的值？

```
return (mysql_result($query, 0) == 1) ? true : false; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T00:12:39.540

mysqli 有一个主函数“查询”如果是 CRUD SQL，它将返回 1 或 0（成功与否）如果它是 select SQL，它将返回结果

```
$sqli = new mysqli(DB_SERVER,
                            DB_USERNAME,
                            DB_PASSWORD,
                            DB_NAME);
$result = $sqli->query("INSERT INTO...");
return ($result == 1) ? true : false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T00:12:39.413

我只是使用`return ($mysqli->query($query) == 1)`，但这只是我，我相信你可以检查返回值是否为布尔值

# ruby - 使用 Ruby fileutils 在外部卷上移动文件？

> ID：15512871
> 
> 赞同：0
> 
> 时间：2013-03-20T00:05:34.683
> 
> 标签：ruby, file-io, file-handling, fileutils

我遇到了一个感觉很基本的错误，但我找不到任何关于我正在努力解决的问题的文档。这是代码：

```
require "fileutils"

def new_name(fn, dest = '/Volumes/External/Different\ Sublevel/Renamed', append = '_01')
    ext = File.extname(fn)
  File.join( dest, File.basename(fn, ext) + append + ext )
end

Dir[ '/Volumes/External/Example/Sublevels/**/*.xml' ].
select { |fn| File.file? fn }.
each   { |fn| FileUtils.cp fn, new_name(fn) } 
```

我要做的就是移动一些文件（非破坏性）并附加文件名。它在一些本地文件上效果很好，但我做了多个级别`../../../`来让它工作。指定外部驱动器有什么特别之处吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T01:49:14.223

您正在尝试使用未在撇号内解释的转义空格字符传递字符串。您必须省略转义字符

`'/Volumes/External/Different Sublevel/Renamed'`

或将其放在双引号中

`"/Volumes/External/Different\ Sublevel/Renamed"`.

用撇号创建的字符串只解释两个转义序列：反斜杠`'\\'`和撇号本身`'\''`。

[wikibooks.org 上有关 Ruby 字符串的详细信息](http://en.wikibooks.org/wiki/Ruby_Programming/Strings)

# java - Java如何关闭程序并从GUI移动到另一个程序

> ID：15512876
> 
> 赞同：1
> 
> 时间：2013-03-20T00:06:11.660
> 
> 标签：java, swing, user-interface

我制作了一个带有图像的普通窗口。我想知道如何制作一个说“单击此处开始”的按钮，按下该按钮将关闭程序并启动另一个程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T00:20:26.887

我会先看看[如何使用按钮](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html)，然后看看[如何使用 CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)

这将允许您拥有一个窗口并减少您需要的切换代码量

```
import java.awt.CardLayout;
import java.awt.EventQueue;
import java.awt.GridBagLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class SimpleDemo {

    public static void main(String[] args) {
        new SimpleDemo();
    }

    public SimpleDemo() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                final CardLayout cardLayout = new CardLayout();
                final JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(cardLayout);

                JPanel startPanel = new JPanel(new GridBagLayout());
                JButton startButton = new JButton("Start");
                startPanel.add(startButton);
                startButton.addActionListener(new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        cardLayout.show(frame.getContentPane(), "game");
                    }
                });

                JLabel game = new JLabel("Game On", JLabel.CENTER);

                frame.add(startPanel, "start");
                frame.add(game, "game");

                cardLayout.show(frame.getContentPane(), "start");

                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T00:19:36.327

要隐藏窗口但保留其背后的资源，请使用`JFrame.setVisible(false)`. 要完全摆脱它，请使用该`dispose()`方法。

要启动新窗口，请使用与启动第一个窗口类似的代码。

[在线和本网站](https://stackoverflow.com/questions/10233711/how-to-make-simple-java-buttons)上有许多资源可帮助您了解如何创建按钮，包括[Oracle 自己的网站](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html)：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T07:36:43.827

只需在第二个程序上调用 main(String[]) 即可启动它。如果不再需要当前的，请在其框架上调用 dispose()。

第二个程序的类必须在类路径中。这很容易通过编写适当的 bash/bat 启动脚本来安排，或者您可以将所有类捆绑在单个 jar 中。

# rest - 如果有人向 POST 端点发送 GET 请求，应该使用什么状态码？

> ID：15512879
> 
> 赞同：0
> 
> 时间：2013-03-20T00:06:22.677
> 
> 标签：rest, post-redirect-get

我有一个网址：

```
/item/delete/ 
```

它接受一个 POST 请求。当它收到 POST 请求时，它会删除 POST 有效负载中指示的项目，并进行[PRG 舞蹈](http://en.wikipedia.org/wiki/Post/Redirect/Get)。

收到 GET 请求怎么办？我希望它返回某种状态码——可能在 400 范围内？- 但我不确定使用哪个，或者我是否以错误的方式考虑这个问题。

希望得到一些 RESTful 建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T00:13:01.630

您应该使用：405 Method Not Allowed

[请参阅https://www.ietf.org/rfc/rfc2616](https://www.ietf.org/rfc/rfc2616)的第 10.4.6 节

# django - 在 shell 和 runserver 中使用 easy_thumbnails 时出现 Django 错误

> ID：15512880
> 
> 赞同：0
> 
> 时间：2013-03-20T00:06:37.613
> 
> 标签：django, macos, thumbnails, python-imaging-library

我正在尝试使用本地 django 开发服务器 ( ) 或 python shell在我的笔记本电脑 (OSX Lion) 上`easy_thumbnails`的项目中使用。我安装了支持 jpeg 的库，并且我在虚拟环境中工作。我正在使用以下命令在 django shell 中测试应用程序：`Django (1.5)``runserver``PIL``easy_thumbnail`

```
th = get_thumbnailer(mymodel.image)
th.get_thumbnail(options) 
```

这些命令在服务器上工作正常，缩略图创建成功。但是，在我的本地 django shell 和使用 runserver 时，相同的命令会导致以下错误：

```
File "/.../site-packages/easy_thumbnails/files.py", line 397, in get_thumbnail
  thumbnail = self.generate_thumbnail(thumbnail_options)
File "/.../site-packages/easy_thumbnails/files.py", line 293, in generate_thumbnail
  "The source file does not appear to be an image")
InvalidImageFormatError: The source file does not appear to be an image 
```

Python Imaging 库在我的计算机上运行良好。在普通（非 django）python shell 中，我可以读取、验证和写入 jpeg 图像。

我已经尝试了许多不同的方法来解决这个问题，因为我知道这可能是库路径的问题，正如这个问题中所建议的[那样](https://stackoverflow.com/questions/5075620/installing-pil-to-use-with-django-on-mac-os-x)。我不知道我可以尝试解决这个问题，任何提示将不胜感激。

# jquery - FineUploader 设置一个参数作为“常量”参数传递给第一次成功上传后的每个后续上传

> ID：15512881
> 
> 赞同：1
> 
> 时间：2013-03-20T00:06:38.203
> 
> 标签：jquery, file, callback, uploader, fine-uploader

我正在使用 Fineuploader 脚本的 jQuery 版本（版本 3.3）。

我已经创建了必要的上传脚本，一切似乎都按预期工作，但我的目标是将多个文件上传到一个文件夹，该文件夹是根据第一个文件上传时创建的数据库条目 ID 动态创建的。为此，我将文件夹/数据库条目 ID 设置为返回参数，其中包含我在脚本末尾返回的 JSON 信息，然后使用 on('complete'...) 函数，我试图将该参数设置为传递回我的 PHP 脚本，以防止我的 PHP 脚本创建新的数据库条目，从而为每个文件创建一个新文件夹。

在我的 JS 控制台中记录结果时，我发现这不起作用，因为我对 on('complete'...) 的使用似乎只在最后一个文件完成上传后设置参数。我试图查看[http://docs.fineuploader.com/api/callbacks.html](http://docs.fineuploader.com/api/callbacks.html)上详细介绍的其他回调，但没有找到一个使用我的 PHP 脚本中的 JSON 响应的回调。

有没有办法可以在第一次成功上传时设置此参数，并为特定批次文件上传中的每次后续上传保持不变？

这是我目前正在使用的 JS：

```
jQuery(document).ready(function(){

    var folderID;

    jQuery('#file_multi_upload').fineUploader({
        request: {
            endpoint: '/filehandler'
        },
        debug: true
    }).on('complete', function(event, id, name, responseJSON){
        window.folderID = responseJSON['folder_id'];
        var uploadedFilePath = responseJSON['filepath'];
        var oldVal = jQuery('#uploaded_files').val();

        if (oldVal != '') {
            jQuery('#uploaded_files').val(oldVal+" "+ uploadedFilePath);
        } else {
            jQuery('#uploaded_files').val(uploadedFilePath);
        }
    }).on('upload', function(event, id, filename){
        jQuery(this).fineUploader('setParams', { 'uploadFolderId': folderID });
    });
}); 
```

这是我的 PHP 上传脚本：

```
<?php
/*
 * Template Name: File Upload Handler
 */

global $wpdb;

$result = array(
'success' => false
);

if (!empty($_FILES) && is_array($_FILES)) :

if (!isset($_POST['uploadFolderId']) || $_POST['uploadFolderId'] !== '') :

$uploadData = array(
    'uploaded' => date('Y-m-d H:i:s')
);

$wpdb->insert('wp_fileuploads_rel', $uploadData);

$uploadDbEntryId = $wpdb->insert_id;

else :

$uploadDbEntryId = $_POST['uploadFolderId'];

endif;

$targetPath = ABSPATH.'wp-content/uploads/competition_uploads/'.$uploadDbEntryId.'/';

if (!is_dir($targetPath)) {
mkdir($targetPath);
}

foreach ($_FILES as $file) :

$filePath = $targetPath . basename( $file['name']);

if(move_uploaded_file($file['tmp_name'], $filePath)) :

    $insertData = array(
    'created' => date('Y-m-d H:i:s'),
    'filename' => $file['name'],
    'filepath' => $filePath,
    'upload_id' => $uploadDbEntryId
    );

    if ($wpdb->insert('wp_fileuploads', $insertData)) :

    $serverPath = ABSPATH;
    $siteUrl = get_site_url();

    $fileUrl = str_replace($serverPath, $siteUrl .'/', $filePath);

    $result = array(
        'success' => true,
        'filepath' => $fileUrl,
        'folder_id' => $uploadDbEntryId,
        'the_request' => $_POST
    );
    endif;
    //$wpdb->update( $table, $data, $where, $format = null, $where_format = null );

//      echo "The file ".  basename( $file['tmp_name']['name'])." has been uploaded";
endif;

endforeach;

endif;

echo json_encode($result);
?> 
```

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-20T17:53:34.493

我没有看到一个可以让您知道批次何时完成的钩子。无论如何，如果用户忘记了一个文件并上传了另一批文件怎么办？如果我理解正确，那么您将有两个文件夹。您应该给用户一个按钮来表示“我已完成上传”。然后，您可以在发生这种情况时将文件移动到目标文件夹。

# javascript - 切一串串

> ID：15512887
> 
> 赞同：1
> 
> 时间：2013-03-20T00:07:06.047
> 
> 标签：javascript, jquery, string, image, substring

我有一个通过 AJAX 从 PHP 返回的字符串。字符串值是这样的：

```
<img src="/images/error.png"/>Invalid name` 
```

有什么办法可以剪断以 开头`<`和结尾的字符串`>`？

我只需要`<img/>`来自字符串。我不想`<img/>`从 PHP 返回唯一的，因为完整的字符串在另一个页面中使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T00:11:17.220

你这是什么意思？这提醒`'<img src="/images/error.png"/>'`

[jsFiddle](http://jsfiddle.net/NUvVJ/)

```
var img = '<img src="/images/error.png"/>Invalid name';
var slice = img.slice(0, img.indexOf('>') + 1);
alert(slice); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T00:14:13.190

您可以使用[split() 方法](http://www.w3schools.com/jsref/jsref_split.asp)并添加回最后一个字符。

```
var returnedString = '<img src="/images/error.png"/>Invalid name';
var returnedImage = returnedString.split('>')[0] +'>'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T00:16:22.550

```
var str = '<img src="/images/error.png"/>Invalid name';
alert(str.substring(str.indexOf('<'), str.indexOf('>')+1)); 
```

编辑：如果此操作要重复多次，则还应考虑性能。到目前为止，对于每个纯 JS 答案，请参阅 2 个版本：前 3 个假设标签从 0（'<'）开始，最后 3 个不：http: [//jsperf.com/15512887](http://jsperf.com/15512887)

我现在为自己感到自豪，即使我的答案不是被选中的 :-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T08:31:42.550

如果您明确地仅获取字符串的初始标记，则：

```
var s = '  <img src="/images/error.png"/>Invalid name';

var tag = '<' + s.split(/\W+/g)[1] + '>'; 
```

尽管为了稳健性，您应该执行以下操作：

```
var parts = s.split(/\W+/g);
var tag = parts.length? '<' + parts[1] + '>' : ''; 
```

# javascript - 嵌套在剑道网格中时如何重新加载剑道 TabStrip 选项卡

> ID：15512890
> 
> 赞同：1
> 
> 时间：2013-03-20T00:07:18.917
> 
> 标签：javascript, asp.net-mvc, razor, kendo-ui, kendo-grid

我有以下网格，它有一个嵌套的 TabStrip，用于编辑一个人的不同方面。这些字段在选项卡之间相互关联，因此我需要它们在切换选项卡时自动重新加载，这不是默认行为。

```
@(Html.Kendo().Grid<PersonModel>()
         .Name("PersonGrid")
         .ClientDetailTemplateId("PersonTemplate")
Blah…
Blah…
Blah…
)
<script id="PersonTemplate" type="text/x-kendo-template">
         @(Html.Kendo().TabStrip()
            .Name("TabStrip_#=Id#")
            .Items(items => {
                     items.Add().Text("Contact Information").LoadContentFrom("PersonInfo", "People", new {personId = "#=Id#"}).Selected(true);
                     items.Add().Text("Incident History").LoadContentFrom("PersonIncidents", "People", new {personId = "#=Id#"});
                     items.Add().Text("Edit Qualifications").LoadContentFrom("PersonQualifications", "People", new {personId = "#=Id#"});
            })
            .Events(e => e.Activate("reloadTab"))
            .ToClientTemplate()
         )
</script> 
```

如果 TabStrip 没有嵌套在网格中，我会为 Activate 事件使用以下脚本。

```
<script type="text/javascript">
    function reloadTab(e) {
        $('#TabStrip').data('kendoTabStrip').reload(e.item);
    }
</script> 
```

我试图将 JavaScript 嵌套到 Script 模板中，但无济于事。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-01T20:28:36.443

您好，这可以通过 TabStrip 的 reload 方法轻松实现。

```
 var ps = $(tabstrip).data().kendoTabStrip;
       ps.tabGroup.on('click','li',function(e){        
       ps.reload($(this));
      }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T00:16:16.857

您偶然发现了一个非常棘手的问题。你可能非常接近。重做模板以动态生成事件所需的 JavaScript。

我正在用 >>> 标记我认为的技巧两行。

```
<script id="PersonTemplate" type="text/x-kendo-template">
    <script type="text/javascript">
        function reloadTab_#=Id#(e) {
>>>         $('\#TabStrip_#=Id#').data('kendoTabStrip').reload(e.item);
        }
>>> <\/script>
    @(Html.Kendo().TabStrip()
       .Name("TabStrip_#=Id#")
       .Items(items => {
           items.Add().Text("Contact Information").LoadContentFrom("PersonInfo", "People", new {personId = "#=Id#"}).Selected(true);
           items.Add().Text("Incident History").LoadContentFrom("PersonIncidents", "People", new {personId = "#=Id#"});
           items.Add().Text("Edit Qualifications").LoadContentFrom("PersonQualifications", "People", new {personId = "#=Id#"});
       })
       .Events(e => e.Activate("reloadTab_#=Id#"))
       .ToClientTemplate()
    )
</script> 
```

两个反斜杠字符是诀窍。第一个是为了让 Kendo 不会因为试图解析动态 jQuery 引用而发疯，第二个是让您在完成之前无法关闭模板。

快乐编码！

# c - C18：被调用的函数被跳过

> ID：15512893
> 
> 赞同：0
> 
> 时间：2013-03-20T00:07:44.730
> 
> 标签：c, c18

如果您使用 C18 编译器的专家能给我指出我做错了什么，我将不胜感激。为了熟悉，我开始了一个简单的温度计项目：- NTC 热敏电阻 --> 18F2520 --> HD44780。

在对链进行调试并生成代码以转换 AN0 输入电压（中间范围 2.5V = 10000 ohm）后，一切都很好，包括将 TºC 显示到 LCD 上所需的例程。

以上只是简单的框架，但工作得很好，每秒产生一个新的 TºC 液晶显示器。

下一步是变得更加成熟，

在 tcalc 函数开始时，我进行了超出范围的测试。如果按照我最初的决定，应用程序将测量水温。那么大于 28000 的 Rntc 将是冰，（超出上述范围）在有效值的另一端 <1900 几乎要蒸腾了。我打电话给错误信息的例程被忽略了。

这是将 Rntc 更改为温度 TºC 的 tcalc 代码

```
 /**************************************************
                Start tcalc
***************************************************/
void tcalc(unsigned char value) // does Rntc to T maths
{
     // start read AN0 for ADRESH ADRESL
  ADCON0 = 0x03;
  while(   ADCON0 == 0x03);// loop A/D 11 bits
    // notes at end  explain 11bit convert in 5 us

   Delay10TCYx(20); // +20us saftey margin
   ADRESH =0x02; //Dummy we use 512 as test value
   ADRESL =0x00;// Dummy 0x200 = d512
   Vin= ADRESH*256+ADRESL; 
   Rntc = (1024.0*Rref)/Vin -Rref;
 //  Rntc = 29000;//DUMMY test 2hi

/***********************************************
 Rntc MUST be valid (in range) test above/below
***********************************************/

if ( Rntc>28000) // Rntc too high
{
 Rntc_out; //jump to Show HIGH error message

}

dly1sec;

if (Rntc<1900) // Rntc too low
{
   Rntc_out; //jump to Show LOW error message
}

/***********************************************
Pairing Rntc value, with T equation coefficients
***********************************************/

if (Rntc>14706) //case 1
   {
    a = 19.67,b = -1136.15, c = 27335.25 ;
    goto Trange_1thru5 ;
   }
if (Rntc>8310.8) //case 2
   {
    a = 9.228,b = -840.85, c =25236.82 ;
    goto Trange_1thru5 ;
   }
if (Rntc>4910.6) //case 3
   {
    a = 4.554,b =-567.886, c = 21246.2 ;
    goto Trange_1thru5 ;
   }
if (Rntc>3019.7) //case 4
   {
    a = 2.358,b = -373.486, c = 16941.29 ;
    goto Trange_1thru5 ;
   }
if (Rntc>1924.6) //case 5
   {
    a = 1.275,b = -245.047, c = 13131.885 ;
    goto Trange_1thru5 ;
   }

Trange_1thru5:
  c= c-Rntc; 
  T = (-b - sqrt(-b*-b -4*a*c))/(2*a);
      /* Quadratic T result chosen has to be lowest */

}
/******************************************************
               END tcalc
*******************************************************/ 
```

调用的例程'Rntc_out'如下

```
/******************************************************* 
           ****** Start Rntc_outofrange ******
********************************************************/

void Rntc_out (unsigned char value) 
{
 lcdcmd(0x80);//move to top line of LCD
// RntcHL =Rntc;
if (Rntc<1900) //Rntc too low
 {
 lcddata('R');  
 lcddata('n');
 lcddata('t');
 lcddata('c');
 lcddata(' ');
 lcddata('t');
 lcddata('o');
 lcddata('o');
 lcddata(' ');
 lcddata('L');
 lcddata('o');
 lcddata('w');
 lcdcmd(0xC0);//Bottom line of LCD
 T = Rntc;
float_to_char;
 dly1sec;
 dly1sec;
 dly1sec;
 dly1sec;
 dly1sec;//  Rntc low  on screen 5 seconds 

 }

if ( Rntc>27500) // Rntc too high
 {
 lcddata('R'); 
 lcddata('n');
 lcddata('t');
 lcddata('c');
 lcddata(' ');
 lcddata('t');
 lcddata('o');
 lcddata('o');
 lcddata(' ');
 lcddata('H');
 lcddata('i');
 lcddata('g');
 lcddata('h');
 lcdcmd(0xC0);//Bottom line of LCD
 T = Rntc;
float_to_char;
 dly1sec;
 dly1sec;
 dly1sec;
 dly1sec;
 dly1sec; // Rntc high  on screen 5 seconds */

 }

}

/******************************************************* 
           ****** End Rntc_outofrange ******
********************************************************/ 
```

基本上我的问题是在测试超出范围的 Rntc 时。代码被跳过，就好像它不存在一样。

PS如果我将Rntc模块的代码作为标签：并转到代码，那么是的，超出范围的测试不会被忽略并且可以处理条件。

当然，'goto' 策略有一点问题。读数超出范围意味着几秒钟后，必须再次读取热敏电阻。意味着另一个转到 tcalc。意思是自称。C18 似乎不喜欢这个。

如果有好心人至少可以指出我的代码的错误，我会非常高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T00:11:56.330

要调用函数，您需要使用括号并将其参数传递给它，并且您可能希望在此之后返回一个：

```
Rntc_out(Rntc); // I'm guessing this is the parameter you want?
return; 
```

我在您的程序中看到许多其他函数调用缺少括号。你也需要修复这些。

# ruby - Ruby Capybara 错误 - port_prober.rb:28:in `initialize': 套接字操作遇到死网。- 绑定（2）

> ID：15512894
> 
> 赞同：1
> 
> 时间：2013-03-20T00:07:48.547
> 
> 标签：ruby, selenium, capybara, selenium-webdriver

我正在尝试在新机器上运行以下 Ruby 代码

```
require 'rubygems'
require 'capybara'
require 'capybara/dsl'
require "selenium-webdriver"

Capybara.run_server = false
Capybara.current_driver = :selenium
Capybara.app_host = 'http://www.google.com'

module MyCapybaraTest
  class Test
    include Capybara::DSL
      def test_google
         puts "starting..."
         visit('/')
         puts "done..."
      end
  end
end

t = MyCapybaraTest::Test.new
t.test_google 
```

这给了我以下错误：

```
C:/ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.31.0/lib/selenium/webdriver   /common/port_prober.rb:28:in `initialize': A socket operation encountered a dead network. - bind(2) (Errno::ENETDOWN) 
```

有谁知道我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:12:52.147

您可能已经注意到，发生此错误是因为系统检测到您的互联网已关闭。我看到你检查了你的防火墙，你是否使用了不寻常的网络接口？可以用wireshark调试吗？

# objective-c - 如何在 Objective-C 中写入文件？

> ID：15512904
> 
> 赞同：0
> 
> 时间：2013-03-20T00:08:29.600
> 
> 标签：objective-c, file-management

我有一些文本文件，其中包含我的应用程序所需的一些基本数据。我可以读取文件并获得文件路径：

```
 NSString *filePath = [[NSBundle mainBundle] pathForResource:@"Money" ofType:@"txt"]; 
```

要写入文件，我想我会使用：

```
[[HoldString dataUsingEncoding:NSUTF8StringEncoding] writeToFile:fileAtPath atomically:NO]; 
```

但这不起作用，我也尝试使用以下方法获取文件路径：

```
NSString* filePath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
NSString* fileAtPath = [filePath stringByAppendingPathComponent:@"Money.txt"]; 
```

这些都不起作用。我希望能够从不使用 CoreData 的文件中读取。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T00:11:14.353

应用程序的资源包是只读的（至少在真实设备上）。您需要将数据写入另一个位置，例如 Documents 目录。

大多数应用程序会检查文件是否存在于 Documents 目录中。如果没有，它会从资源包中复制一个文件。然后所有的读写都对副本进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T00:11:24.510

您不能写入应用程序包内的路径；你的包是只读的。所以这就是为什么第一种方法行不通的原因。

但是您的第二种方法实际上应该可以在文档目录中形成有效路径。你确定那里有东西要读吗？安装您的应用程序时，该目录将为空。如果要修改自己包含的文本文件，请先将其从捆绑路径复制到文档文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T00:31:49.633

在 iOS 上，应用程序包是只读的，所以你不能在上面写。解决此问题的一种方法是使用文档文件夹来存储您需要的文件并在其中写入数据。

在您的情况下，另一种选择是使用 NSUserDefaults。因此，应用程序第一次运行时，您可以从捆绑包上的该文件 (Money.text) 中读取（或者如果可以的话，请避免将其保存在捆绑包中）。阅读后，而不是写入它，您将整个文本保存到 NSUserDefaults，如下所示：

```
[[NSUserDefaults standardUserDefaults] setObject: holdString forKey: @"money" ];  // By convention you should name it holdString instead of HoldString. 
```

读取数据：

```
NSString* moneyStr= [[NSUserDefaults standardUserDefaults] objectForKey: @"money"]; 
```

# javascript - 解析 2 个文本之间的字符串

> ID：15512905
> 
> 赞同：1
> 
> 时间：2013-03-20T00:08:33.433
> 
> 标签：javascript

我想在一个字符串之间解析

例如 str='uu2uuuu4uuu';

虽然当我使用

警报(str.match(/(2\S+?4)+/ig));

当我只想要'uuuu'时，我会在外面得到'2uuuu4'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T00:18:36.983

如果您使用标志 'g' 它将匹配所有字符串，而不管 '()' 因为它是分组的。你需要这样的东西

```
var str='uu2uuuu4uuu';
alert(str.match(/2([^24]+)+4/i)); 
```

或消除该地区的任何数字

```
alert(str.match(/\d+([^\d]+)+\d+/i)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T01:03:18.030

你想要的东西需要向后看和向前看。例如：

```
(?<=START)(.*?)(?=END) 
```

或仅用于非空格：

```
(?<=START)(\S*?)(?=END) 
```

或者，如果您只想匹配至少一个字符：

```
(?<=START)(.+?)(?=END)
(?<=START)(\S+?)(?=END) 
```

如果你只是匆忙添加到你的代码，我很抱歉告诉你......

但是**Javascript 不支持正则表达式lookbehind**（即，`(?<=START)`在javascript 中无效）。因此，您将不得不放弃`g`标志并使用如下正则表达式获取第二个结果（索引 = 1）：

```
START(.*?)(?=END) 
```

它会是这样的：

```
var str = 'uu2uuuu4uuu';
var match = str.match(/2(.*?)(?=4)/i);
alert(match[1]); 
```

或这个：

```
var str = 'uu2uuuu4uuu';
var match = str.match(/2(\S+?)(?=4)/i);
alert(match[1]); 
```

你明白了。我还没有找到更好的方法来模拟 javascript 中的正则表达式。

# jquery - 黑色边框jquery循环IE7-8透明PNG

> ID：15512906
> 
> 赞同：0
> 
> 时间：2013-03-20T00:08:41.170
> 
> 标签：jquery, html, internet-explorer, jcycle

我正在经历 IE7-8 似乎相当普遍的情况，一次不允许多个过滤器。在这种情况下，它添加了一个黑色边框，透明度位于 png 上。我已经尝试了所有建议的修复，包括将淡入淡出过渡添加到父 div 以及循环选项 cleartype: true 和 cleartypeNoBg: true。我知道这是一个反复出现的问题，但我似乎无法找到一个有效的答案，尽管寻找。

请在此处找到工作副本：

[http://www.annulus-art.co.uk/index.html](http://www.annulus-art.co.uk/index.html)

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T00:23:43.980

经过大量搜索，这似乎有所帮助，但底部仍然有一条黑线。

```
background: transparent !important;
    -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#00FFFFFF,endColorstr=#00FFFFFF)"; /* IE8 */
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#00FFFFFF,endColorstr=#00FFFFFF);   /* IE6 & 7 */
    zoom: 1; 
```

# jquery - textarea 上的 val() 停止工作

> ID：15512908
> 
> 赞同：-1
> 
> 时间：2013-03-20T00:08:48.467
> 
> 标签：jquery, asp.net, dom, textarea

我有一个使用 textareas 的网站/平板电脑 html5 网络应用程序。

我的问题是“一些”javascript 代码/库或任何使 val() 调用 textarea 故障的东西。它总是返回您通常使用 text() 获得的值 - 从服务器端设置的文本。我在这个网络应用程序上使用了大量的 jquery，没有任何问题。

我首先确定的是 DOM 本身是正确的，没有任何问题。我将整个 DOM 保存到一个新的 html 文件并删除了所有 javascript。通过一个简单的按钮，我可以使用 val() 读取文本区域。

但是，在真实网站中执行的相同读取代码会出现故障。因此，与其他现有的 javascript 代码/库存在某种依赖关系。

服务器端架构是一个 ASP.Net 网站。因此有相当多的代码在后台运行（Scriptmanager、MS Ajax、第三方控件......）

该网站使用 jQuery 1.4.2。我尝试使用 noConflict() 为那个微小的 val() 部分重载本地 jQuery 版本 1.9.1，以排除任何没有运气的旧版本问题。

我知道我很抽象，但由于该网站依赖于一个巨大的数据库并且所有开发都在一个封闭的网络内，我可以提供一个链接。

有没有人知道对 jQuery 功能特别是 val() 的“令人不安”的影响？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:55:57.983

如果控件是文本区域，您可以尝试编写如下所示的通用方法或使用 .attr('value') 。

```
var m = this.val();  
return (m == "" ? this.attr('value') : m); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T06:54:34.353

非常感谢所有输入。在这种情况下，似乎不可能找到 val() 故障的真正原因。

My workaround now is to set the .text() on every keypress() event of the textarea. Thats the only way I can get the newly entered text of the user out of the box later on.

I'm using a secong control (hidden) to store my original default text of the box to be able to restore to this. The whole app is full on AJAX (almost like an off line app).

Thanks anyone!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T07:00:40.260

To answer my own question: I had build a complex structure of setTimeouts and timers (due to the lack of a real "close keyboard" event on tablets/phones). This led to bein unable to read my val() of the textbox.

# vb.net - 为什么这种奇怪的 VB.net 行为允许分配给函数？

> ID：15512909
> 
> 赞同：0
> 
> 时间：2013-03-20T00:08:57.913
> 
> 标签：vb.net, function, syntax

我有这段 VB.net 代码，我试图弄清楚为什么它是合法的：

```
Class Program
    Public Shared Sub Main(args As String())

        Console.WriteLine(New wtf().TestCrazyAssignment())
        Console.ReadKey()

    End Sub

    Class wtf
        Public recurse As int32 = 0
        Public Function TestCrazyAssignment() As string
            TestCrazyAssignment = "this should not be possible."

            'BadAllocation = "something" 'compiler error - did not define with Dim

            recurse = recurse + 1

            Console.WriteLine(TestCrazyAssignment)

            If recurse < 10 Then
                 TestCrazyAssignment()
            End If

            Return "umm.... ok."
        End Function
    End Class
End Class 
```

输出：

```
this should not be possible.
this should not be possible.
this should not be possible.
this should not be possible.
this should not be possible.
this should not be possible.
this should not be possible.
this should not be possible.
this should not be possible.
this should not be possible.
umm.... ok. 
```

在我的简单示例中，我想防止无限递归，但你明白了。

有没有人对此有一些见解？我最近在生产代码中遇到了这个问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T00:14:10.993

这是为函数设置返回值的传统 VB 方法。VB 提供了一个未声明的局部变量，其名称与函数名相同。我强烈建议不要这样做，而是使用显式的 return 语句。

（如果您不通过标准的“返回”退出，则未声明变量中的值将自动返回）。

# windows-8 - 升级旁加载的 Windows 8 应用程序并维护数据库

> ID：15512910
> 
> 赞同：1
> 
> 时间：2013-03-20T00:09:18.107
> 
> 标签：windows-8, windows-store-apps, winjs, indexeddb, appx

我正在开发一个供个人使用的应用程序。我正在使用 IndexedDB 进行数据存储。我不想将它提交到应用商店，因为它是供个人使用的。我已经想出了如何创建一个 appx 并将其安装到我的机器上使用 Windows Powershell。但是，当我更新应用程序并想要将新更新安装到我的计算机时，Powershell 给我一个错误，提示必须先卸载应用程序。我可以卸载并重新安装以获取更新，但随后数据库被清除。

有没有一种简单的方法可以在不清除数据库的情况下更新我的应用程序？还是我必须为我的应用程序编写备份/恢复例程？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T01:49:38.983

我怀疑这可能与您的版本号有关。您是否尝试在应用程序包上增加它？使用我的应用程序（尽管是 C#），我只需要在新包版本与现有包版本相同或旧的情况下卸载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T01:49:32.490

我不认为直接支持这种情况，因为使用 PowerShell 和开发人员许可证的应用程序旁加载旨在用于开发和测试目的。

您最好的选择可能是在您的应用程序中添加功能以在卸载之前导出数据库的内容（到文件或托管在云中的数据库），然后在重新安装更新的应用程序时导入内容。

同样，值得牢记的是，您正在一个不受支持的场景中工作，即使用开发人员许可证侧载应用程序不是为了长期使用应用程序，而是为了开发和测试。

也可能值得查看有关开发人员许可证的一些文档：

[http://msdn.microsoft.com/en-us/library/windows/apps/Hh974578.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/Hh974578.aspx)

本文档介绍了支持的侧载场景以及如何启用它们：

[http://technet.microsoft.com/en-us/library/hh852635.aspx](http://technet.microsoft.com/en-us/library/hh852635.aspx)

希望有帮助。

有关 Windows 应用商店应用开发的更多信息，请注册[App Builder](http://bit.ly/gd30tolaunch)。

# regex - 给定代表字符串的有限列表的正则表达式的语法推断？

> ID：15512918
> 
> 赞同：25
> 
> 时间：2013-03-20T00:10:13.233
> 
> 标签：regex, language-agnostic, grammar, automata, dfa

我正在分析一个包含大量人类可读字符串的大型公共数据集，这些字符串显然是由一些常规（在形式语言理论意义上）语法生成的。

逐个查看这些字符串的集合以查看模式并不难；不幸的是，这些独特的字符串中约有 24,000 个被分为 33 个类别和 1714 个子类别，因此手动执行此操作有些痛苦。

基本上，我正在寻找一种现有的算法（最好使用*现有的参考实现*）来获取任意字符串列表，并**尝试**推断出一些最小（对于最小的合理定义）跨正则表达式集，这些正则表达式可用于生成它们（即从该语法生成​​的语言的有限字符串集合中推断出常规语法）。

我考虑过重复贪婪的最长公共子串消除，但这只是到目前为止，因为它不会折叠除了完全匹配之外的任何东西，所以不会检测到，比如说，在特定位置的不同数字字符串的常见模式语法。

蛮力强制任何不属于公共子字符串消除的东西是可能的，但在计算上可能不可行。（此外，我已经考虑过了，子字符串消除可能存在“阶段排序”和/或“局部最小值”问题，因为您可能会进行贪婪的子字符串匹配，最终迫使最终语法压缩得更少/最小，即使它最初似乎是最好的减少）。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-20T09:31:25.143

是的，事实证明这确实存在；所需要的是学术上称为**DFA 学习算法**的算法，其示例包括：

*   Angluin 的 L*
*   L*（在列中添加反例）
*   卡恩斯/瓦齐拉尼
*   里维斯特 / Schapire
*   荷兰*
*   常规正负推断 (RPNI)
*   德乐特2
*   Biermann & Feldman 算法
*   Biermann & Feldman 算法（使用 SAT 求解）

上面的源码是[libalf](http://libalf.informatik.rwth-aachen.de/)，一个开源的 C++ 自动机学习算法框架；[在这本教科书](https://rads.stackoverflow.com/amzn/click/com/0521763169)中至少可以找到其中一些算法的描述。[在 MATLAB 的gittoolbox](https://code.google.com/p/gitoolbox/)中也有语法推理算法（包括 DFA 学习）的实现。

由于[这个问题之前已经提出](https://stackoverflow.com/questions/5958483/grammar-inference-library)并且过去没有得到令人满意的回答，我正在评估这些算法并将更新更多关于它们有用性的信息，除非在该领域具有更多专业知识的人首先这样做（更可取）。

[**注意：**我现在接受我自己的答案，但如果有人可以提供一个更好的答案，我会很乐意接受。]

[**进一步说明：**我决定采用使用自定义代码的路线，因为使用通用算法对于我正在使用的数据来说有点矫枉过正。我把这个答案留在这里，以防其他人需要它，如果我评估这些，我会更新。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:41:30.750

我唯一能建议的就是稍微玩一下[Nltk](http://nltk.org/)（Python 的自然语言工具包），看看它是否至少可以识别重复出现的模式。

您可能会研究的另一件事是[MALLET](http://mallet.cs.umass.edu/)（用于统计自然语言处理、文档分类、聚类、主题建模、信息提取等的基于 Java 的包）。

Perl 有一个叫做[LinkParser](http://www.foo.be/docs/tpj/issues/vol5_3/tpj0503-0010.html)的东西，但它似乎需要你提供实际语法的表示（另一方面，它带有大量不同的模型，所以它可能会被硬塞到帮助你对样本进行排序）。

[Gate](http://gate.ac.uk/family/developer.html)可能允许您从语料库中的记录子集创建示例，并可能从这些记录中对语法进行逆向工程。

最后，查看[CRAN 存储库以获取特定于文本的包](http://cran.r-project.org/web/views/NaturalLanguageProcessing.html)。

# wordpress - 恢复 Joomla 的帐户访问权限

> ID：15512934
> 
> 赞同：0
> 
> 时间：2013-03-20T00:11:24.207
> 
> 标签：wordpress, security, joomla, content-management-system, joomla2.5

我有一个非常奇怪的情况。我需要访问 Joomla (2.5) 后端，但我没有访问后端的密码，也没有数据库、虚拟主机的密码，而且我无法访问 FTP，所以我无法查看配置文件。

*这是出于 100% 的正当理由。请注意，我标记了 Wordpress：这是因为它是一个理论上的东西，它们以相同的方式工作，它可能有助于找到隐藏的答案*

一般来说，询问如何“破解”或访问 Joomla 显然是不好的。在这种情况下，一位公司老板联系了我，他需要访问以查看某个人的所作所为，但只有某人有密码（我知道，不好）并且要求这些密码可能会导致他们破坏证据。澄清一下，这不是一个法律或道德问题——这是真实的，也不是违法的，所以执法是无关紧要的，它是一个“你一直在做你的工作”的内部问题。

**与所有问题一样，我尝试了什么：**

所有明显的密码/用户名

尝试了我能想到的所有方法来访问数据库（这就是我需要的）

寻找可以在 Joomla 设置登录信息时发送的电子邮件 - 还没有运气

以及第 1 段中提到的其他一些事情

**问题**

密码是否可能存储在其他地方，例如（但不是）配置文件。没有 FTP 访问权限我能做些什么吗？以前有人遇到过这种问题吗？有没有人有我没有的脑电波？

附言。一旦我进去了，那才是最重要的，我将拥有我需要的一切，他们可以发现其他人已经在里面，例如，如果因为我做某事而向他们发送了系统电子邮件。

重申一下，因为我不希望这被误认为是：*我不是在破解，我是在恢复数据。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T10:10:15.527

要问自己的重要问题是：

*是什么让我的位置与任何网站访问者的位置不同？*

如果您无法通过任何技术手段访问该网站，您可以尝试代表公司联系虚拟主机，提供有关所有权的法律信息和/或解释问题。

*提示：域名可能是为公司/公司老板注册的，或者托管发票可能是公司开具的*

可能有一些方法可以侵入 Joomla，但任何真正的管理员都应该注意到这一点，据我所知，这是你想要避免的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T21:21:08.530

用户密码存储在 Joomla 中的唯一位置是数据库中的用户记录。如果您无法访问管理员或数据库，那么唯一的另一种方法是访问用户的电子邮件地址，以便您可以使用内置的密码重置。

如果您有权访问用户的电子邮件地址，则只需使用此 URL 重置密码：

[http://www.yourdomain.com/index.php?option=com_users&view=reset](http://www.yourdomain.com/index.php?option=com_users&view=reset)

如果您无权访问数据库、管理员或用户的电子邮件地址，那么您就不走运了。您必须在 Joomla 中找到一个实际的安全问题并利用它来控制该站点。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-20T11:52:33.040

好吧，整个概念很荒谬，但我会在某处找到一篇博文，说明永远不会出现只有一个人拥有您网站的管理信息的情况是多么重要，这就是总线因素。然后我会让老板通过电子邮件向有权访问该文章链接的人发送电子邮件并说“如果你发生任何事情，我们会遇到大麻烦，我们最好解决这个问题。发送所有相关密码的 xa 副本，然后访问密码以确保安全。”

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-20T01:45:37.780

此页面应为您提供所需的一切：

[http://docs.joomla.org/How_do_you_recover_or_reset_your_admin_password%3F](http://docs.joomla.org/How_do_you_recover_or_reset_your_admin_password%3F)

它涵盖了使用配置文件的技巧来编辑数据库。这需要对 PhpMyAdmin 有所了解，但如果您按照说明进行操作，您可能会没事的。

编辑：我刚刚重新阅读了您的帖子。您无权访问网络主机以进入数据库是否有原因？缺少重置密码（猜测一堆旧电子邮件）这是重置密码的唯一方法。

# ios - 有人可以解释 iOS 中的文件所有者吗

> ID：15512938
> 
> 赞同：5
> 
> 时间：2013-03-20T00:11:53.703
> 
> 标签：ios, iboutlet, object-graph, loadnibnamed

提前为这个问题道歉，尽管自 iOS 出现以来已经详细讨论过。但我仍然不明白，尽管我尽了最大的努力。我能画出的最接近的图像是“冻结和干燥的对象图”，这很好，但是当涉及到原始编程时，这无助于连接点。

所以，考虑到在你弄清楚什么是做什么之前，你无法真正描述任何东西，让我们看下面的例子：

1) 我有一个 Xib 文件，比如一个 UIView，带有标签和 imageView

2) 我有一个 classX，它是 UIView 的子类，它附加到 IB 身份检查器中的 Xib。IB 出口和 IB 动作在连接检查器中连接到此类。此类将 IB/IA 声明为属性。

3) 我有一个 UIViewController，由 classVC 表示。在这个类中，我使用标准实例化 1)`[[NSBundle mainBundle] loadNibNamed:@"bla" owner:??? options:nil][0];`

4) classX 和 classVC 通过自定义委托、标准东西进行通信。

问题：

a) XIB 文件的所有者是什么。老实说，我不知道。

b）我`[[NSBundle mainBundle] loadNibNamed:@"bla" owner:??? options:nil][0];`为所有者参数输入了什么，最重要的是，为什么？

当对象图解冻和浇水时，运行时不应该连接 2) 中定义的 Outlets，那么在这种情况下文件所有者的意义何在？

或者

如果 XIB 文件 Outlets 没有连接到任何东西，“文件的所有者”是否意味着“我是包含所有必需的 OUTlets 的类，以便可以在该类实例和解压缩的 XIB 之间建立连接？（这就是为什么我不明白了，因为如何建立关联？？？）

就是这样了。和以前一样傻。

编辑：我不同意其他答案同样有效的事实。我理解他们的意思，但到目前为止，我还没有理解 owner 参数在我描述的情况下应该包含什么，最重要的是，为什么。

# backbone.js - 主干视图是否持久

> ID：15512942
> 
> 赞同：1
> 
> 时间：2013-03-20T00:12:01.830
> 
> 标签：backbone.js, backbone-views

如果您在开发工具中查看 ToDo 应用程序，每次创建新的 ToDo(model) 时都会在 AppView 中创建一个新的 ToDoView。但我没有看到 ToViews 的“集合”。我问这个是因为我认为当模型被破坏时视图被破坏，但找不到参考。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T00:31:52.923

视图通常是内存中的结构（如 DOM 本身），因此只要您的 javascript 代码持有对它们的引用（从而使它们无法被浏览器的 JS 引擎进行垃圾收集），它们就会继续存在。关上窗户，他们就走了。单击指向另一个页面的链接，该页面执行整页加载，它们就消失了。

但是，视图不会自动响应正在销毁的模型。`this.listenTo(this.model, 'destroy', this.remove.bind(this))`如果您希望模型在通过主干删除时从 DOM 中消失，您必须手动连接类似或类似的东西。

此外，正如您所注意到的，当您拥有一组要渲染的模型时，通常只为每个模型创建一个新视图，渲染它，然后不保留对它的引用。当集合发生变化时，最外层的元素被清空，新的视图实例被创建和渲染，因此旧的视图实例有资格进行自动垃圾回收。因此 javascript 将处理清理那些旧视图，但这不会对相应的模型产生任何影响，也不会触发任何 AJAX 请求。

# c++ - 内存操作不正确？

> ID：15512955
> 
> 赞同：1
> 
> 时间：2013-03-20T00:12:54.897
> 
> 标签：c++, gcc

请帮助查找此功能中的错误。

```
wchar_t* clean(wchar_t out[], const wchar_t in[])
{
    int n = wcslen(in);
    wchar_t *str = new wchar_t[n];
    wcscpy(str, in);

    out[0] = L'\0';
    wchar_t *state;

    wchar_t *word = wcstok(str, L" ", &state);

    while (NULL != word) {
        if (wcslen(word) > 1) {
            wcscat(out, word);
            wcscat(out, L" ");
        }
        word = wcstok(NULL, L" ", &state);
    }

    delete state;
    delete[] str;
    return out;
} 
```

此函数从原始字符串中获取单词并将它们放入结果字符串中。除了函数忽略多个空格和单个字母中的单词。

不幸的是，程序落在了这个函数的最后几行，同样的错误（linux-3.7，gcc-4.7）：

```
*** Error in `./a.out': free(): invalid next size (fast): 0x08610338 *** 
```

请解释一下，我弄错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T00:14:54.623

1.  删除`delete state;`. `state`不是指向动态内存的指针，正如您可以从没有分配给它的任何动态分配中看出的那样。它只是一个指向现有字符串中某处的指针。

2.  `new wchar_t[n]`用;修复缓冲区溢出 它没有用于终止 NULL 的空间。

# php - 数组删除超过 X 值的重复条目

> ID：15512960
> 
> 赞同：0
> 
> 时间：2013-03-20T00:13:23.680
> 
> 标签：php, mysql, arrays

PHP 我有两个单数组，它们是从两个表中填充的，带有 ID。从一个数组中，我需要能够删除所有出现超过 X 个数字的相同值的 ID。我正在这样做：

```
volunteerRoleQuery = mysql_query("SELECT member_no, role_code, volunteer_date FROM         evntrole WHERE volunteer_date > '$today' ");
$numberEvntRole = mysql_numrows($volunteerRoleQuery);

while ($row = mysql_fetch_assoc($volunteerRoleQuery)) {
    $member_no = $row["member_no"];
    array_push($volunteersArray, $member_no);
}

fputcsv($output, array('Member number', 'Full name', 'First name', 'Surname', 'Email', 'Mobile', 'Phone'));

$teamMemQuery = mysql_query("SELECT member_number, activity_code, modify_date FROM  teammem WHERE modify_date > '$today' ");
    $numberTeamMem = mysql_numrows($teamMemQuery);

if ($numberTeamMem > 0) {
    while ($row = mysql_fetch_assoc($teamMemQuery)) {
        $member_no = $row["member_number"];
        array_push($teamMemArray, $member_no);        
    }
} 
```

//todo: 只保留超过 x 个事件的成员 ID，比如 3 // 例如 1,1,2,3,3,3,3,6,7,7,7,7 将只保留 3,7 //这确保了我们不会要求成员仅参加一些活动就自愿参加。

```
$result=array_unique($teamMemArray);

array_diff_ORG_NEW($teamMemArray,$volunteersArray, 'VALUES');

$result=array_unique($teamMemArray);
sort($result);
foreach ($result as &$value) {
        $resultNames = mysql_query("SELECT first_name, surname, mobile, phone_home, e_mail  FROM names WHERE member_no='$value'");
        $rowNames = mysql_fetch_array($resultNames);
        $firstName = $rowNames['first_name'];
        $surname = $rowNames['surname'];

            if ($surname > "") {
                fputcsv($output, array($value, $names, $firstName, $surname, $email, $mobile, $homePhone));
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T00:17:03.903

不确定我是否正确理解了您的需求，但是，您是否查看过： PHP 中的[array_count_values](http://php.net/manual/en/function.array-count-values.php)？

它为您提供另一个数组，其中包含为关键字找到的匹配数。

您可以遍历它并删除结果大于 X 的任何键？

# wordpress - 更改 Wordpress 中的帖子页面？

> ID：15512961
> 
> 赞同：0
> 
> 时间：2013-03-20T00:13:24.790
> 
> 标签：wordpress, post, navigation, selected, posts

主题标题可能有点误导，但我真的不知道该问题的标题是什么，但由于它与更改帖子页面有关，我认为它会很好。

所以我实际上想出了如何更改帖子页面并设置静态首页。现在我有一个登录页面，它是我的首页，然后是一个日记页面，这是我的帖子出现的地方。

我的问题是，当我单击帖子时，导航中的日记链接不会保持选中状态。而且我希望用户知道，当他们单击帖子时，他们仍然在日记区域中，因为导航中的日记链接保持选中状态，但我不知道如何让日记链接保持突出显示为当前链接。

当用户转到日记（显示我所有帖子的页面）时，导航中的日记链接保持选中状态。仅当用户单击不再选择该期刊的帖子时。

*所以我想我的问题是：* **如何让帖子页面链接在帖子上保持当前/选中状态？**

我的意思是，我想我知道为什么仅通过查看 url 就不会保持选中状态。当我在期刊页面上时，网址是（顺便说一句，我在本地工作，这就是我无法链接到该网站的原因）：
`http://localhost/wordpress/journal/`

当我在帖子上时，网址看起来像这样：
`http://localhost/wordpress/example-post/`

当它真的应该是这样的：
`http://localhost/wordpress/journal/example-post/`

以便所有帖子都将期刊识别为其父级，但我不知道该怎么做。

无论如何，任何帮助将不胜感激。提前致谢！

**编辑*
结果只是简单地获取 url 是`http://localhost/wordpress/journal/example-post/`行不通的。这告诉我 php 中有一些东西需要更改、添加和/或编辑。所以我开始检查导航中的期刊链接，看起来在帖子页面上它得到了一些在帖子页面上没有的类。

这是帖子页面上期刊链接的样子：
`<li id="menu-item-46" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-41 current_page_item current_page_parent menu-item-46"><a href="http://localhost/wordpress/journal/">Journal</a></li>`

这是帖子页面上期刊链接的样子：
`<li id="menu-item-46" class="menu-item menu-item-type-post_type menu-item-object-page current_page_parent menu-item-46"><a href="http://localhost/wordpress/journal/">Journal</a></li>`

我比较了两者，看起来帖子页面上的期刊链接缺少帖子页面上的期刊链接所具有的一些类。主要是`class="current-menu-item current_page_item"`哪些类需要显示为选定/当前（嗯，实际上它只需要其中一个类显示为选定/当前）。无论如何，我试图找到这些类在 php 中的添加位置，看起来它们都出现了`wp-includes/nav-menu-template.php`。该文件看起来很复杂，我不想弄乱它并破坏站点，但是如果您想查看它，运行 Wordpress 3.5.1 的任何人都应该拥有与我相同的文件。我猜这就是问题所在，我想我需要在我的主题函数中添加一些东西来解决这个问题。我只是不知道那会是什么：/

**编辑*

**帖子页面的屏幕截图**
*这是帖子页面的样子。注意 JOURNAL 是黑色的，而其他链接是灰色的。我正在尝试让 JOURNAL 在发布时保持黑色/选中/当前状态帖子页面的* ![这是帖子页面的样子。 注意 JOURNAL 是黑色的，而其他链接是灰色的。 我正在尝试让 JOURNAL 在发布帖子时保持黑色/选中/当前状态](../Images/a7e7e4902a2faa4a2539153432e70416.png)

**屏幕截图**
*这是帖子页面的样子。请注意 JOURNAL 如何不是黑色/选定/当前。相反，它像所有其他导航链接一样是灰色的。我试图弄清楚如何让 JOURNAL 在帖子和/或帖子页面上保持黑色/选定/当前。换句话说，当您在日记页面或日记条目页面时（日记页面显示所有日记条目，而日记条目页面仅显示您所在的条目）。* ![这是帖子页面的样子。 请注意 JOURNAL 如何不是黑色/选定/当前。 相反，它像所有其他导航链接一样是灰色的。 我试图弄清楚如何让 JOURNAL 在帖子和/或帖子页面上保持黑色/选定/当前。 换句话说，当您在日记页面或日记条目页面时（日记页面显示所有日记条目，而日记条目页面仅显示您所在的条目）。](../Images/be18d46f483748278f26f2a384817de6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T00:31:27.997

试试这个：转到设置->永久链接并选择自定义。添加这个：/journal/%postname%

我刚试过这个，它对我有用。希望它也对你有用！

-丽莎

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T05:45:40.897

尝试在样式表中使用 css 类

ul li.current-menu-item { 颜色：红色；}

或其他

ul li.current-menu-item a { color:red;}

它会为此工作

# c - C中的矩阵乘法结果不正确

> ID：15512963
> 
> 赞同：-2
> 
> 时间：2013-03-20T00:13:40.330
> 
> 标签：c, arrays, matrix-multiplication

我正在学习将顺序内存用于矩阵。我制作了以下程序，但结果不正确。有人可以告诉我哪里出错了。我正在粘贴我正在使用顺序内存的两个程序和一个我没有使用并且是正确的程序。我在顺序一个中得到不正确的结果。

```
#include <stdio.h>
#include <stdlib.h>
 int main() 
 {
    int i, m, n, p, q, c, d, k, sum = 0;
    int *first, *second, *multiply;
    printf("Enter the number of rows and columns of first matrix\n");
    scanf("%d%d", &m, &n);
    printf("Value entered %d%d \n",m,n);
    first = malloc(m*n*sizeof(int*));
    printf("Enter the number of rows and columns of second matrix \n");
    scanf("%d%d", &p,&q); 
    printf("value entered %d%d \n",p,q); 
    second = malloc(p*q*sizeof(int));
    multiply = malloc(m*n*sizeof(int));
    printf("Enter the elements of first matrix\n");
    for( c = 0 ; c < m ; c++ )
       for ( d = 0 ; d < n ; d++ )
         scanf("%d", &first[c*m+d]);
      if ( n != p )
     printf("Matrices with entered orders can't be multiplied with each other.\n");
     else {
      printf("Enter the elements of second matrix\n");
     for ( c = 0 ; c < p ; c++ ){
        for ( d = 0 ; d < q ; d++ )
        scanf("%d", &second[c*p+d]);
   }

 for ( c = 0 ; c < m ; c++ ) {
  for ( d = 0 ; d < q ; d++ ) {
    for ( k = 0 ; k < p ; k++ ) {
      sum = sum + first[c*m+k]*second[k*p+d];
    }
    multiply[c*m+d] = sum;
    sum = 0;
    }

  }

     printf("Product of entered matrices:-\n");
     for ( c = 0 ; c < m ; c++ ) {
       for ( d = 0 ; d < q ; d++ )
    printf("%d\t", multiply[c*m+d]);
  printf("\n");
   }

    free(second);

   free(multiply);
} 

  free(first);
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T00:17:29.953

```
sum = sum + first[c*m+k]*second[k*p+d]; 
```

一定是

```
sum = sum + first[c*n+k]*second[k*q+d]; 
```

因为 的 行的长度`first`是`n`， 的 行的长度`second`是`q`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T00:18:12.693

```
for( c = 0 ; c < m ; c++ )
   for ( d = 0 ; d < n ; d++ )
     scanf("%d", &first[c*m+d]); // error
                          ^ n    // fix 
```

多次出现同样的错误

# android - 未调用 Android onClick 方法

> ID：15512965
> 
> 赞同：0
> 
> 时间：2013-03-20T00:14:09.507
> 
> 标签：android, xml, button, onclick

我将 onclick 方法添加到我的按钮中`fragment2.xml`

```
 <Button
        android:id="@+id/getTextButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Kliknij do fragment 1"
        android:onClick="onClick" /> 
```

然后在 Fragment2.java 中定义了这个方法

```
public void onClick(View view){} 
```

但是当我点击它时，应用程序崩溃了？下面的完整 XML 和 java 文件有什么问题

```
package com.example.fragments;

import android.app.Fragment;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class Fragment2 extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstance){
        Log.d("Fragment 2", "metoda");
        return inflater.inflate(R.layout.fragment2, container, false);
    }

    public void onClick(View view){}

} 
```

* * *

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="#FFFF00" >

    <TextView 
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Fragment 2"
        android:textColor="#0000FF"
        android:textSize="25sp"/> <!-- moze byc px dp sp -->

    <Button
        android:id="@+id/getTextButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Kliknij do fragment 1"
        android:onClick="onClick" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T00:19:31.730

将在布局充气器的上下文中调用的 onClick 函数。

尝试将 onClick 函数放在 Activity 而不是 Fragment 中，它应该可以工作。

我之前也遇到过[类似的问题](https://stackoverflow.com/questions/6590988/onclick-attribute-in-xml-linking-to-method-in-activity-class)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-10T20:49:37.240

由于某些未知原因，我遇到了类似的问题，我在 XML 中声明的 onClick 在某些设备上工作，而在其他一些设备上没有工作

我分配了一个

```
OnClickListener 
```

到同一个视图，在这个监听器中我调用了

```
activity.onClick(view) 
```

手动，它工作

android中的一个愚蠢的错误！！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-03T17:15:13.230

在我的情况下，在活动中具有“onClick”功能，我只需要清理项目......之后来自 xml 的 onClick 调用工作。

# sql - 7 的排列，一次替换一个字段

> ID：15512971
> 
> 赞同：1
> 
> 时间：2013-03-20T00:14:31.427
> 
> 标签：sql, permutation

![在此处输入图像描述](../Images/219ad11683aa0538219103622a050b0f.png)

我什至不知道如何命名这个主题。

这就是我想要做的。我有我必须处理的数据集，它们可能有相同字段的几个版本。

例如，我有一个包含以下列的数据集：

```
FacilityName
FacilityAlias
TIN
TIN2
NPI
NPI2
NPI3
MailingAddress
MailingCity, State (they're given to me as 2 different fields but for my needs they're counted as 1)
MailingZIP
BillingAddress
Billing City, State
BillingZIP 
```

我的最终数据集将只有以下列

```
FacilityName
TIN
NPI
Address
CityState
ZIP 
```

但我必须确保每个可能的字段组合都有一行，所以我必须创建以下查询：

```
INSERT INTO MATCH ( FacilityName, TIN, NPI, Address, CityState, ZIP) SELECT FacilityName, TIN, NPI. BillingAddress, BillingCityState, BillingZIP FROM MATCHPREP;

INSERT INTO MATCH ( FacilityName, TIN, NPI, Address, CityState, ZIP) SELECT FacilityAlias, TIN, NPI. BillingAddress, BillingCityState, BillingZIP FROM MATCHPREP;

INSERT INTO MATCH ( FacilityName, TIN, NPI, Address, CityState, ZIP) SELECT FacilityName, TIN, NPI. MailingAddress, MailingCityState, MailingZIP FROM MATCHPREP;

INSERT INTO MATCH ( FacilityName, TIN, NPI, Address, CityState, ZIP) SELECT FacilityName, TIN2, NPI. BillingAddress, BillingCityState, BillingZIP FROM MATCHPREP;

INSERT INTO MATCH ( FacilityName, TIN, NPI, Address, CityState, ZIP) SELECT FacilityAlias, TIN2, NPI. BillingAddress, BillingCityState, BillingZIP FROM MATCHPREP;

INSERT INTO MATCH ( FacilityName, TIN, NPI, Address, CityState, ZIP) SELECT FacilityName, TIN2, NPI. MailingAddress, MailingCityState, MailingZIP FROM MATCHPREP; 
```

等等。

这是怎么做到的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T00:28:47.653

很难给出确切的答案，因为我不是 100% 确定你为什么要这样做。

但是使用 sql 返回一组多重排列的一种简单方法是创建一个返回笛卡尔积的查询。

例如 select a,b,c from (select 1 a union select 2 a union select 3 a) (select 10 b union select 20 b union select 30 b) (select 100 c union select 200 union select 300 c)

注意没有连接。子查询可以是与 matchprep 表不同的查询。在这个例子中，结果看起来像

```
1,10,100
1,10,300
1,10,300
...
...
3,30,100
3,30,200
3,30,300 
```

然后，您可以插入返回数据集。

[http://en.wikipedia.org/wiki/Cartesian_product](http://en.wikipedia.org/wiki/Cartesian_product)

编辑：

这必须是它:)

```
select  
name, tin, npi, address, state, zip
from (select distinct name from (select FacilityName as name from matchprep 
    union select FacilityAlias as name from matchprep) f cross join
(select distinct tin (select TIN as tin from matchprep 
    union select TIN2 as tin from matchprep)) t cross join
 (select distinct NPI from matchprep) n cross join
 (select distinct address,state,zip from (select BillingAddress as address, BillingCityState as state, BillingZIP as zip from matchprep 
    union select MailingAddress as address, MailingCityState as state, MailingZIP as zip from matchprep)) a 
```

根据您插入的示例，邮寄地址详细信息和帐单地址详细信息始终彼此不同。

FacilityName 和 Alias 将是一种排列。Tin 和 Tin2 将是另一个您将获得每个 NPI 的笛卡尔积。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T00:31:00.523

如果我理解正确，您需要 7 个字段的所有可能组合。为此，请使用`cross join`：

```
select  FacilityName, TIN, NPI, Address, CityState, ZIP
from (select distinct FacilityName from matchprep) f cross join
     (select distinct TIN from matchprep) t cross join
     (select distinct NPI from matchprep) n cross join
     (select distinct Address from matchprep) a cross join
     (select distinct CityState from matchprep) c cross join
     (select distinct ZIP from matchprep) z 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T00:41:30.163

我假设您在问题末尾的示例插入中涵盖了所有排列，并且您也不需要将 NPI2 和 NPI3 作为 NPI 的排列。在这种情况下，您编写的多个插入应该可以工作，但是使用 UNION 将它们组合成一个插入语句会更简单，例如

```
INSERT INTO MATCH ( FacilityName, TIN, NPI, Address, CityState, ZIP)
SELECT FacilityName, TIN, NPI. BillingAddress, BillingCityState, BillingZIP FROM MATCHPREP;
UNION
SELECT FacilityAlias, TIN, NPI. BillingAddress, BillingCityState, BillingZIP FROM MATCHPREP;
UNION 
SELECT FacilityName, TIN, NPI. MailingAddress, MailingCityState, MailingZIP FROM MATCHPREP;
etc. 
```

还是我误解了这个问题？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T17:41:54.157

仅供参考，以下是我能够使用的版本

```
 SELECT A0.*
    ,a1.*
    ,a2.*
    ,a8.*
FROM (SELECT 'FacilityName' C1 FROM DUAL
      UNION
      SELECT 'TIN' FROM DUAL
      UNION
      SELECT 'NPI' FROM DUAL
      UNION
      SELECT 'Address' FROM DUAL) a0
    ,(SELECT 'FacilityName1' C2 FROM DUAL
      UNION
      SELECT 'TIN1' FROM DUAL
      UNION
      SELECT 'NPI1' FROM DUAL
      UNION
      SELECT 'Address1' FROM DUAL) a1
    ,(SELECT 'FacilityName2' C3 FROM DUAL
      UNION
      SELECT 'TIN2' FROM DUAL
      UNION
      SELECT 'NPI2' FROM DUAL
      UNION
      SELECT 'Address2' FROM DUAL) a2
    ,(SELECT 'FacilityName3' C4 FROM DUAL
      UNION
      SELECT 'TIN3' FROM DUAL
      UNION
      SELECT 'NPI3' FROM DUAL
      UNION
      SELECT 'Address3' FROM DUAL) a8
  WHERE   (   c1 LIKE 'FacilityName%'
       OR c2 LIKE 'FacilityName%'
       OR c3 LIKE 'FacilityName%'
       OR c4 LIKE 'FacilityName%')
     AND (   c1 LIKE 'TIN%'
       OR c2 LIKE 'TIN%'
       OR c3 LIKE 'TIN%'
       OR c4 LIKE 'TIN%')
     AND (   c1 LIKE 'NPI%'
       OR c2 LIKE 'NPI%'
       OR c3 LIKE 'NPI%'
       OR c4 LIKE 'NPI%')
     AND (   c1 LIKE 'Address%'
       OR c2 LIKE 'Address%'
       OR c3 LIKE 'Address%'
       OR c4 LIKE 'Address%') 
```

# html - 不能将块级元素放在内联元素中？

> ID：15512976
> 
> 赞同：0
> 
> 时间：2013-03-20T00:15:41.723
> 
> 标签：html

我一直在尝试一切，但如果我不将块级元素放在内联元素中，当我将鼠标悬停在每个图像上时，我将不会出现每个图像下方的弹出文本或工具提示。我知道你不应该这样做，我必须通过 w3 验证器验证网站，这是验证时弹出的错误。有谁能够帮我？我知道它必须是一个我没有接受的简单修复。这是我的代码：

```
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Lab 7-3</title>

<style type="text/css"> 
<!--

#links a:hover { font: 1 em sans-serif; padding: 5px 10px; margin: 0px 0px 1px, border-right: 5px;}
#links a:hover {border-right: double 5px; background-color: #ff1828; color:white}

<span>

    .tooltip-wrap {position: relative;} 

    .tooltip-wrap .tooltip-content { display: none; position: absolute; margin-top: 220px; margin-left: 550px width: 180px; background-color: #000000; color:#ffffff; padding: 5px; margin: 10px;}

    a:hover .tooltip-content {display: block;}

</span>
-->
</style>                    

</head>

<body>

<img src="sabatinaslogo.jpg" width="735" height="190" alt="Sabatina's logo" />
<p style="font-size: large">Hover over a photo to read about the pasta dish and its nutrition information.</p>
<div id="links">
 <div class="tooltip-wrap">
 <table style="text-align: center">
    <tr>

    <td>
          <a><img class="picture" src="fettuccine.jpg" width="200" height="200" alt="Fettucine" />
             <div class="tooltip-content"> 
             <p>Ingredients include:enriched durum flours, egg, water, soy lecithin. Nutritional facts: Approximately 200 calories, 3.2% total fat, 12.5% cholesterol, 16.7% protein, 1.7% calcium and 8.3% iron</p>
             </div> </a>
    </td>

    <td> 
        <a><img class="picture" src="lasagna.jpg" width="200" height="200" alt="Lasagna" />
        <div class="tooltip-content"> <p>Ingredients include: ground beef, cheese, enriched pasta and tomato sauce. Nutritional facts: Approx. 377 calories per serving, 13% fiber, approx. 50% protein, and approx. 35% sodium</p>
            </div></a>

    </td>

    <td> <a><img class="picture" src="ravioli.jpg" width="200" height="200" alt="Ravioli" />
        <div class="tooltip-content"> <p>Ingredients include: water, durum wheat semolina, beef, wheat flour, egg, vegetable oil, salt, onion flavoring, tomatoes, sugar, cornflour, herb extracts, salt, garlic salt, spice extracts, black pepper. Nutritional facts: 2.6g of protein, 1.6g of fat, 0.8 g of fiber and 0.3g of sodium</p>
        </div> </a>

    </td>

</table>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T03:16:03.580

您应该删除并将其`<p>`更改 `<div>` 为`<span>`

# signalr - SignalR .NET 客户端断开连接

> ID：15512980
> 
> 赞同：10
> 
> 时间：2013-03-20T00:16:12.687
> 
> 标签：signalr, signalr-hub, signalr.client

我们遇到了一个有趣的问题。这是我们的设置的样子：

*   Windows Server 2012 上的 SignalR Server（一个 ASP.NET MVC 应用程序）。
*   Sencha HTML5 应用程序（SignalR 客户端）在同一台服务器（Windows Server 2012）上。
*   Windows Server 2008 R2 服务器上的 .NET Windows 服务。这也充当 SignalR 客户端。

最初我们使用的是 SignalR 0.5.3 - 当我们开始观察到 Windows 服务与 Signal R 服务器的连接断开时。这种频率从每隔几分钟到每隔几个小时不等。它在大多数情况下会重新连接，但偶尔会无法重新连接，导致 Windows 服务每隔几天就会失去一次连接。但它没有固定的模式。它与服务器重启/备份等无关。我们在windows服务中添加了日志记录以监视客户端连接上的StateChanged事件，发现在断开连接和重新连接时会触发该事件，但在不重新连接时不会触发。

然后我们遇到了这个线程：[客户端不断重新连接](https://stackoverflow.com/questions/15003655/client-constantly-reconnecting)

并决定将所有内容升级到 SignalR 1.0.1（无论如何我们都必须在某个时候这样做）。Windows 服务也升级到框架 4.5（从框架 2.0）现在引用新的 Microsoft.AspNet.SignalR.Client.dll。这也允许我们（使用新添加的连接属性）确定 Windows 服务实际上使用的是 ServerSentEvents 协议。在 Windows Server 2012 机器上安装相同的 Windows 服务使用 WebSockets 协议。这与此线程一致：[SignalR .NET Client does not support WebSockets on Windows 7](https://stackoverflow.com/questions/15386536/signalr-net-client-doesnt-support-websockets-on-windows-7)

但是，Windows Server 2008 R2 服务器上的服务行为并没有改变。它仍然会断开连接并重新连接，并且偶尔会失去连接。由于一些限制，我们无法将 windows server 2012 用于 windows 服务，并且卡在较旧的操作系统上。这并不是说使用 websockets 协议的 windows 服务可以解决我们所有的问题（我们还没有彻底测试过）。

我们尝试的第三件事是从 GitHub 获取源代码并对其进行编译并升级服务（SignalR 服务器和客户端）——这样做是为了确保我们获得带有任何潜在错误修复的最新副本。

但这并没有帮助。我们现在处于一个我们觉得我们已经用尽了我们的选择的地步。建议将不胜感激。谢谢。

======================================

**编辑：更多信息：**

好的，现在我们有了更多信息。我们在 windows 服务（SignalR 客户端）中添加了一些代码，以每 30 分钟登录一次 SignalR 服务器（用于测试连接）。

以下是客户端每 30 分钟发生的情况：

```
WriteEvent(Now(), "INFO", "PING", "Performing logon procedure with SiteCode = " & msSiteCode & ".")
trans.Invoke("login", New String() {msSiteCode, "", "SERVER", "", ""}) 
```

其中 trans 是从 Hub 继承的服务器端类的实例，而 WriteEvent 基本上是写入日志文件的跟踪。

并且客户端也有一个'isLoggedIn'方法如下：

```
Private Sub isLoggedIn(ByVal bLoggedIn As String)
        If bLoggedIn Then
            WriteEvent(Now(), "INFO", "", "SignalR Server: Authenticated")           
        Else
            WriteEvent(Now(), "ERROR", "", "SignalR Server: Authentication failed")
        End If
End Sub 
```

在服务器端，我们有登录方法：

```
Public Sub login(ByVal sAccount As String, _
                     ByVal sCompanyCode As String, _
                     ByVal sClientId As String, _
                     ByVal sPassword As String, _
                     ByVal sModuleCode As String)
       Try
            'Some code omitted that validates the user and sets bValidated.

            If bValidated Then
                'Update user in cache
                ConnectionCache.Instance.UpdateCache(userId, Context.ConnectionId, UserCredential.Connection_Status.Connected)
                Clients.Caller.isLoggedIn(True)

                Dim connectionId As String = ConnectionCache.Instance.FindConnectionId(userId)
                LogEvent("Successful login for connectionid: " & connectionId & ". Context. User: " & userId, _
                         EventLogEntryType.Information)
            Else
                Clients.Caller.isLoggedIn(False, results)
            End If
        Catch ex As Exception
            LogEvent("Login: " & ex.Message, EventLogEntryType.Error)
        End Try
End Sub 
```

如果我们查看客户端日志文件，每 30 分钟我们会收到以下日志条目：

*   使用 SiteCode = ABCD 执行登录过程。
*   SignalR 服务器：经过身份验证

所以我们知道调用的是服务端登录方法，同时调用了客户端的isLoggedIn方法。

但是，在某些时候，当调用服务器端方法时，不会调用 isLoggedIn 客户端方法。所以每 30 分钟，我们开始只得到一个条目：

*   使用 SiteCode = ABCD 执行登录过程。

另外，日志事件：

```
LogEvent("Successful login for connectionid: " & connectionId & ". Context. User: " & userId, EventLogEntryType.Information) 
```

在服务器端登录方法中被写入服务器端日志。所以**Clients.Caller.isLoggedIn(True)**被按预期调用，但我们在客户端看不到。

所以我猜我们正在查看的是客户端始终能够访问服务器并能够调用服务器端（登录）函数，但服务器无法调用客户端（isLoggedIn）函数，这开始发生在一点。

此外，这可能是 .NET 客户端所特有的，因为我很确定我们没有看到我们的 HTML5/javascript 客户端发生这种情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-29T22:49:07.980

最后，我们只是创建了一个简单的“PINGING”函数。每 15 分钟调用一次。逻辑如下：

1.  SignalR 客户端有一个计时器，它每 15 分钟调用一次服务器 PING 方法。
2.  服务器在客户端调用客户端的 PINGCLIENT 方法作为响应。
3.  在客户端的下一个 PING 计时器事件中（15 分钟后），我们检查是否收到响应。如果没有，我们会暂停所有活动并重新初始化 Hub 连接。然后重新启动 PINGING 计时器。

因此，虽然我们放弃了尝试找出原因是什么，但我们有一种解决方法来管理“服务器到客户端”连接丢失时发生的情况。请注意，这是对 signalR 中内置的重新连接逻辑的补充。

我们还维护日志，平均而言，这种情况可能每天发生一次（客户端没有从服务器收到 PING）。

# rest - REST 中 PUT 操作的幂等性要求的范围是什么？

> ID：15512991
> 
> 赞同：2
> 
> 时间：2013-03-20T00:17:11.250
> 
> 标签：rest, side-effects, idempotent

假设我有一个像这样序列化为 JSON 的对象：

```
{ "Name" : "Mike",
  "Status" : "Too cool for school",
  "Looks" : "Devilishly good"} 
```

现在，假设我有一个[http://absoluteTruth.foo/](http://absoluteTruth.foo/) {id} (PUT) URI 来编辑这个对象。如果我使用包含以下内容的消息正文调用它：

```
{"Name" : "Michael"} 
```

面对（不可能）试图改变其他两个值的请求时，幂等性的要求是什么？一方面，我可以看到上面的 PUT 请求应该产生一个这样序列化的对象：

```
{ "Name" : "Michael",
  "Status" : null,
  "Looks" : null} 
```

这样，无论其他人做什么，我的 PUT 操作总是*产生*相同的输出。不幸的是，这对最终用户提出了要求，即他们执行 GET、更改接收到的数据并发回。（Rich Hickey 可能会告诫您*完成*各个字段的更新。）另一方面，我可以看到它可能会导致：

```
{ "Name" : "Michael",
  "Status" : "Too cool for school",
  "Looks" : "Devilishly good"} 
```

因为我们可以说“状态”和“外观”的值的变化不属于 PUT 的*副作用*，当它被调用时只指定了“名称”参数。但是，从后续调用[http://absolutetruth.foo/](http://absolutetruth.foo/) {id} (PUT) 中返回的内容可能会不时发生变化，例如，如果其他人停下来对 Michael nee' Mike 的长相评分更高。

虽然我怀疑这不是一个惊天动地的问题，但我读过的各种 RFC，包括 2616，都不清楚这一点。我倾向于认为使用 {"Name" : "Michael"} 的 PUT 足够幂等，如果它不理会所有其他值，而不是压平它们。任何人都有权威来源的明确答案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T07:44:25.420

HTTP 1.1 规定：

```
The PUT method requests that the enclosed entity be stored under the supplied 
Request-URI. If the Request-URI refers to an already existing resource, the 
enclosed entity SHOULD be considered as a modified version of the one residing 
on the origin server. 
```

这意味着您发送的正文应被视为资源的整体表示。`PUT`幂等性是其结果。

如果您`PUT` `{"Name" : "Michael"}`在，`/bar`那么您的资源将不再提及其他“字段”。

如果要专门更改一个属性，则必须定义其他资源，例如`/bar/name`.

# html - CSS中颜色上的透明图像图案

> ID：15512993
> 
> 赞同：2
> 
> 时间：2013-03-20T00:17:21.617
> 
> 标签：html, css, image, design-patterns, overlay

我正在尝试在 CSS 中的颜色渐变上添加一个简单的 .png 模式。这是标记：

HTML：

```
<div class="pattern">
  <div class="widget_heading">
    <h4>Feed</h4>
  </div>
</div> 
```

CSS：

```
.pattern {
 background: url(../img/leatherpattern.png) repeat;
 }

.widget_heading { 
  display:block; border:1px solid #3F943A; height:40px; border-top-left-radius: 5px  5px;
  border-bottom-right-radius: 5% 0%;
  border-top-right-radius: 5px; background: #3c8522; /* Old browsers */
  background: -moz-linear-gradient(top,  #3c8522 0%, #599d40 100%); /* FF3.6+ */
  background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#3c8522), color-stop(100%,#599d40)); /* Chrome,Safari4+ */
  background: -webkit-linear-gradient(top,  #3c8522 0%,#599d40 100%); 
  background: -o-linear-gradient(top,  #3c8522 0%,#599d40 100%); /* Opera 11.10+ */
  background: -ms-linear-gradient(top,  #3c8522 0%,#599d40 100%); /* IE10+ */
  background: linear-gradient(to bottom,  #3c8522 0%,#599d40 100%); /* W3C */
  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#3c8522', endColorstr='#599d40',GradientType=0 ); /* IE6-9 */
  } 
```

我不知道为什么它没有出现在上面，但它正在出现。任何帮助将不胜感激，谢谢！

[http://jsfiddle.net/j4JjW/3/](http://jsfiddle.net/j4JjW/3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T00:48:44.720

您的渐变和图像都不是透明的，因此当它们占用相同的空间时，不可能同时看到它们。[正如您在此处看到](http://jsfiddle.net/j4JjW/5/)的，渐变只是覆盖了图像，反之亦然。你需要给两者之一一些透明度`(and put it on top)`。