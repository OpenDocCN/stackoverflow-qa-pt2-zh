# StackOverflow 问答 12878000-12878999

# java - java xml序列化+对外部对象的引用

> ID：12878005
> 
> 赞同：2
> 
> 时间：2012-10-13T23:37:10.193
> 
> 标签：java, serialization, jaxb, xml-serialization, xstream

> **可能重复：**
> [使用 JAXB 从两个 XML 文件交叉引用 XmlID](https://stackoverflow.com/questions/5319024/using-jaxb-to-cross-reference-xmlids-from-two-xml-files)

让我们考虑以下类（它不是真正的代码，它只是显示我的问题）：

```
class Currency {
    private String fullName;
    private String symbol;
    private String isoCode;
    ...
}

class Region {
    ...
    private List<Currency> acceptedCurrencies;
    ...
} 
```

现在我想将所有货币和地区存储在单独的 XML 文件中，而不是存储在一个大文件中，所以我想要“引用外部对象”之类的东西。

我如何想象这样的xml-s：

```
 <currency>
      <fullName>euro</fullName>
      <symbol>€&lt;/symbol>
      <isoCode>EUR</isoCode>
 </currency>

 <region>
      <currencies>
           <currency>euro</currency> <!--  Currency.name is threaten as ID -->
      </currencies>
 </region> 
```

是否有可能（除了为此实现自己的框架）？

# android - 如何在 mysql for android 中随机选择列

> ID：12878008
> 
> 赞同：2
> 
> 时间：2012-10-13T23:37:43.243
> 
> 标签：android, database, sqlite

我的数据库中有一个表名 Answers，有 5 列 _id、b1、b2、b3、b4，我要做的就是在游标中随机获取列 b1、b2、b3、b4，我能够使用下一个代码按顺序将它们放在我的光标中：

```
public Cursor getAllAnswers(int n)     
{
     String myPath = DB_PATH + DB_NAME;
     myData = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

    Cursor curs;
    curs=myData.rawQuery("SELECT b1, b2, b3, b4 FROM Answers WHERE _id='"+n+"';", null);
    curs.moveToFirst();
    myData.close();
    return curs;
}; 
```

并试图让他们随机使用

```
curs=myData.rawQuery("SELECT b1, b2, b3, b4 FROM Answers WHERE _id='"+n+"' ORDER BY RANDOM() LIMIT 1;", null); 
```

但不工作。我在这里先向您的帮助表示感谢

编辑显示完成由 Geobits 显示的随机列的正确方法（如果你也需要它）：

```
 public Cursor getAllAnswers(int n)     
{
     String myPath = DB_PATH + DB_NAME;
     myData = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);
  String query = "SELECT ";
boolean[] chosen = new boolean[]{false, false, false, false};
Random rand = new Random();
for(int i=0;i<4;i++)
{
    if(i > 0)
        query += ", ";
    int c = rand.nextInt(4); 
    while(chosen[c])
        c = rand.nextInt(4);
    chosen[c] = true;
    query += "b" + Integer.toString(c+1);
}
query += " FROM Answers WHERE _id='"+n+"';";
    Cursor curs;
    curs=myData.rawQuery(query, null);
    curs.moveToFirst();
    myData.close();
    return curs;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T23:46:44.927

它应该是

```
ORDER BY RANDOM() LIMIT 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T01:12:30.137

为了确保我理解，您希望将所有四列放在一行中，但随机化光标内的列，因此您的光标可能会结束`{b2, b4, b3, b1}`，对吗？我猜想混合多项选择答案的东西？`ORDER BY`在那里不会帮助你，因为它对行而不是列进行排序。

SQLite 将按照您查询它们的顺序呈现它们，这是`b1, b2, b3, b4`当前的。要将它们混合在一起，您必须随机化查询字符串本身。

```
String query = "SELECT ";
boolean[] chosen = new boolean{false, false, false, false};
Random rand = new Random();
for(int i=0;i<4;i++)
{
    if(i > 0)
        query += ", ";
    int c = rand.nextInt(4); 
    while(chosen[c])
        c = rand.nextInt(4);
    chosen[c] = true;
    query += "b" + Integer.toString(c+1);
}
query += " FROM Answers WHERE _id='"+n+"';" 
```

或者，您可以将它们按顺序排列并使用类似的东西随机抓取每一列。

# c# - 从 Grid.Children 中删除特定对象实例？

> ID：12878009
> 
> 赞同：0
> 
> 时间：2012-10-13T23:37:46.073
> 
> 标签：c#, wpf, grid

我有`List<T>`一些`UserControl`s。在主窗口上有一个`Grid`，一些`UserControl`s 将被添加到`Grid.Children`. 现在我希望能够从中删除特定`UserControl`的 s`Grid`例如我想做这样的事情

```
layoutRoot.Children.Remove(controlList[1]); 
```

这可能吗？我只知道`FindName()`，`FindResource()`但是所有的`UserControl`s 都没有名字，所以我不能使用这些方法:(

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T23:53:33.350

只是一个让你开始的想法，如果你知道你的用户控件的类型，你可以使用这样的方法：

```
static T FindVisualChild<T>(Visual parent) where T : Visual
{
    T child = default(T);
    int numVisuals = VisualTreeHelper.GetChildrenCount(parent);
    for (int i = 0; i < numVisuals; i++)
    {
        var visual = (Visual)VisualTreeHelper.GetChild(parent, i);

        child = visual as T;
        if (child == null)
            child = FindVisualChild<T>(visual);
        if (child != null)
            break;
    }
    return child;
} 
```

# c++ - 需要编写一个程序，输入至少 4 位数字（3453）并打印出：“三千四百 5 十和 3 个一”

> ID：12878010
> 
> 赞同：0
> 
> 时间：2012-10-13T23:37:48.103
> 
> 标签：c++

我认为我走在正确的轨道上并且拥有我需要的所有元素，但我不太确定如何使用类/令牌并且可能还有其他一些格式错误的东西。

```
 #include <string>
 #include <iostream>
 #include <vector>

 using namespace std;

 class token {
 public:
            int value;
            string unit;

            }

 int main() {

 token t;
 vector<token> v;
 string unit = ""

 cin>>x;
 while (x!=0) {
    t.value=x%10;
    if (unit==" "}
        t.unit = "ones";
    else if (unit == "ones")
        t.unit = "tens"
    else if (unit = "tens")
        t.unit = "hundreds"
    else if (unit = "hundreds")
        t.unit = "thousands"

    v.pushback(t);
    x=x/10;
 }
  v_t.push_back("zero")
  v_t.push_back("one")
  v_t.push_back("two")
  v_t.push_back("three")
  v_t.push_back("four")
  v_t.push_back("five")
  v_t.push_back("six")
  v_t.push_back("seven")
  v_t.push_back("eight")
  v_t.push_back("nine")

  cout<< "This is ";
  for(int i = v.size()-1; i>=0, i--) {
        cout<<v_t[v[i].value]<<" "<< v[i].unit << " "}

 } 
```

我在这里得到的所有东西都是从我的笔记中提取的，但排列顺序不同。当我尝试运行它时，我收到错误消息：“新类型可能未在新类型中定义”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T23:40:58.413

有很多编译错误，照顾第一个，把分号放在类的末尾：

```
class token {
 public:
            int value;
            string unit;

            }; 
```

对于第二个，在单元声明的末尾添加一个分号：

```
string unit = ""; 
```

第三个，定义“x”：

```
int x; 
```

第四，在此处将 '}' 更改为 ')'：

```
if (unit==" ") 
```

还有很多，抱歉。在所有语句的末尾添加分号以开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T05:17:33.157

在这个作业中，我不会使用 a `std::vector`，而是使用一个固定长度的数组。

用 C 语言术语*（显示思想）*：

```
struct Text_Entry
{
    unsigned int value; // Don't deal with negatives with words.
    const char * const text;
};

// Here's the table
struct Text_Entry  conversion_table[] = 
{
    {0, "zero"},
    {1, "one"},
    {2, "two"},
//...
    {10, "ten"},
    {11, "eleven"},
//...
    {20, "twenty"},
    {30, "thirty"},
    {40, "forty"},
}; 
```

编译器将在您的程序启动之前为您加载表格，从而无需`push_back`为每种情况使用。该`value`字段允许您以任何顺序排列条目。

如果允许，请选择`std::map`.

不要将表格用于每种组合。例如 21 将使用 20 的条目和 1 的条目。对于 135 也是如此。

HTH。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T00:27:52.367

是这里打错了还是你忘记了所有的分号？除了你写`unit = "tens"`的比较`unit`和`"tens"`？不应该`unit == "tens"`吗？并检查空字符串替换`if( unit = " " )`为`if( unit.empty() )`

# java - concurrent calls of singleton class methods

> ID：12878012
> 
> 赞同：8
> 
> 时间：2012-10-13T23:38:27.477
> 
> 标签：java, multithreading, concurrency, singleton, singleton-methods

I have a singleton class:

```
public class Singleton {
    private static Singleton istance = null;

    private Singleton() {}

    public synchronized static Singleton getSingleton() {
        if (istance == null)
            istance = new Singleton();
        return istance;
    }

    public void work(){
            for(int i=0; i<10000; i++){
                Log.d("-----------", ""+i);
            }
    }
} 
```

And multiple Threads are calling the work() function:

```
public class Main {

public static void main(String[] args) {

    new Thread (new Runnable(){
        public void run(){
            Singleton s = Singleton.getSingleton();
            s.work();}
    }).start();

    System.out.println("main thread");

    new Thread(new Runnable() { 
         public void run() {
             Singleton s = Singleton.getSingleton();
                s.work();
         }
    }).start();
}
} 
```

I noticed the two Threads are running concurrently, as if two work functions were instantiated at the same time.

I want the last thread to be run in place of the previous thread, rather then concurrently. Is it possible in java to make the second call override the memory space of the first call?

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-14T00:41:33.773

Your `getSingleton()` method is attempting to [lazily initializing](http://en.wikipedia.org/wiki/Lazy_initialization) the SINGLETON instance, but it has the following problems:

*   Access to the variable is not `synchronized`
*   The variable is not `volatile`
*   You are not using [double checked locking](http://en.wikipedia.org/wiki/Double-checked_locking)

so a race condition AMY cause two instances to be created.

The best and simplest was to safely lazily initialize a singleton *without* synchronization is as follows:

```
private static class Holder {
    static Singleton instance = new Singleton();
}

public static Singleton getSingleton() { // Note: "synchronized" not needed
    return Holder.instance;
} 
```

This is thread safe because the contract of the java class loader is that all classes have their static initialization complete before they may be used. Also, the class loader does not load a class until it is referenced. If two thread call `getSingleton()` simultaneously, the `Holder` class will still only get loaded once, and thus `new Singleton()` will only be executed once.

This is still lazy because the `Holder` class is *only* referenced from `getSingleton()` method, so the `Holder` class will only be loaded when the first call to `getSingleton()` is made.

Synchronization is not needed because this code relies on the class loader's internal synchronization, which is bullet proof.

This code pattern is the only way to fly with singletons. It is:

*   The fastest (no synchronization)
*   The safest (relies on industrial strength class loader safety)
*   The cleanest (least code - double checked locking is ugly and a lot of lines for what it does)

The other similar code pattern (equally safe and fast) is to use an `enum` with a single instance, but I find this to be clumsy and the intention is less clear.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-13T23:45:44.147

As @amit stated in a comment your `getSingleton()` method should be `synchronized`. The reason for this is that it is possible for multiple threads to ask for an instance at the same time and the first thread will still be initializing the object and the reference will be null when the next thread checks. This will result in two instances being created.

```
public static synchronized Singleton getSingleton() {
    if (istance == null)
        istance = new Singleton();
    return istance;
} 
```

Marking your method as `synchronized` will cause it to block and only allow one thread at a time to call it. This should solve your problem.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T23:53:11.827

Either use `synchronized` on the factory method

```
public class Singleton {
    private static Singleton istance = null;

    private final Singleton() {} // avoid overrides

    public static synchronized Singleton getSingleton() {
        if (istance == null)
            istance = new Singleton();
        return istance;
    }

    public void work() { // not static, otherwise there's no need for the singleton
        // ...
    }
} 
```

or, simply, use a private final initializer (instantiation will happen at class-load time)

```
public class Singleton {
    private static final Singleton istance = new Singleton(); // class-load initialization

    private final Singleton() {} 

    public static Singleton getSingleton() { // no need for synchronized
        return istance;
    }

    public void work() { 
        // ...
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T04:17:47.833

Resource holder given in Java Concurrency In Practice:[http://www.javaconcurrencyinpractice.com/](http://www.javaconcurrencyinpractice.com/) is the best non-blocking singleton pattern available. The singleton is lazily initialized (both SingletonHolder and Singleton class is loaded at Run-Time when the getInstance() method is called the first time) and the access-or method is non-blocking.

```
public class SingletonFactory {

private static class SingletonHolder {
    static Singleton instance = new Singleton();
}

public static Singleton getInstance() {
    return SingletonFactory.SingletonHolder.instance;
}

static class Singleton{
} 
```

}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-14T14:11:36.133

I came up with this code that is doing pretty much what I needed. The orignal question was "Is possible to do the following without using threads? But rather by directly manipulating the memory with the language?" If the answer is no, maybe you can help me improve the following:

```
public class Main {
private static Thread t;
public static void main(String[] args) {
    work();
    for (int i =0;i<100; i++);
    System.out.println("oooooooooooooooooooooooooooooooooooooooooo");
    for (int i =0;i<100; i++);
    work();
    for (int i =0;i<500; i++);
    System.out.println("oooooooooooooooooooooooooooooooooooooooooo");
}

public static void work(){
    if (t != null) t.interrupt();
    t= new Thread (new Runnable(){
            public void run(){
                // Pause for 4 seconds
                try {
                    Thread.sleep(600);
                } catch (InterruptedException e) {
                    // We've been interrupted: no more messages.
                    return;
                }
                for(int i=0; i<10000; i++){
                    System.out.println(i);
                }
            }
            });
    t.start();
}
} 
```

This code is useful to "debounce" multiple calls to a listener, firing in a burst on user inputs. It has the disadvantages it uses a sleep function. The sleep time should be high enough to prevent events in a burst to start execution of the time consuming task (only the last event should). Unfortunately there is no guarantee that this can always happen even for a large sleep time.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-01T19:26:41.967

You can use Locks around the shared resources. Use the `Reentrant` class. It prevents race conditions for multiple threads.

# java - 为什么这不返回真实？

> ID：12878015
> 
> 赞同：2
> 
> 时间：2012-10-13T23:38:55.230
> 
> 标签：java, methods, slick2d

```
public void check() {
    if (particle < 0) {
        if (point[3].equals(point[3]) == true) {
            check = true;
        }
        check = false;
    }
} 
```

不`point[3]`应该等于自己吗？让它成为现实？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T23:44:06.337

也许你的意思是说 else check = false？

```
 public void check(){
     if(particle < 0){
        if(point[3].equals(point[3]) == true){
         check = true;
        }else{
          check = false;
        }
     }
  //here it is true
  } 
```

或者简单地说：

```
 public void check(){
     if(particle < 0){
        check = point[3].equals(point[3]);
     }
     //here it is true
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T23:41:12.173

您必须`check = true;`在函数之后返回，或者使用`else`. `return false`否则它会从 if 和always中掉下来

```
if (...) {
  check = true;
}
else {
  check = false;
}

public void check(){
    if(particle < 0){
        if(point[3].equals(point[3]) == true){
            check = true;
        }else{
          check = false;
        }
    } 
```

}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T23:48:04.493

尝试这个：

```
public boolean check() {
    if (particle < 0) {
        return point[3].equals(point[3]);
    } else {
        return false;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T23:41:35.993

粒子呢？

按照惯例，点应该等于它自己，但你总是可以以其他方式实现它。

但是当然，另一个回复是正确的，这个函数总是以 check=false 结束

# java - 用 Java 设计一个智能的自定义类 csv 解析器

> ID：12878017
> 
> 赞同：2
> 
> 时间：2012-10-13T23:39:21.463
> 
> 标签：java, parsing, csv

# 问题描述

我想重构一个解析器，使其具有灵活的类似 csv 格式的格式，该格式描述了第一行中的列。根据这些信息，我希望解析器构建具有简单属性但也具有复杂属性的对象，例如`List<String>`（空格分隔），例如`Thing`s：

## 示例数据类型

```
import java.util.List;

public class Thing {
    protected int           foo;
    protected String        bar
    protected List<String>  baz;

    public Thing(int foo, String bar, List<String> baz) {
        this.foo = foo;
        this.bar = bar;
        this.baz = baz;
    }

    public String toString() {
        return "foo: " + foo + ", bar: " + bar + ", baz: " + baz;
    }
} 
```

解析器的输入将是文本文件，第一行是列行（逗号分隔），`n`下一行是数据（逗号分隔）。为了简化测试，我将使用`Iterator<String>`输入行。这个简单的测试应该说明我想要构建的内容：

## JUnit 测试

```
// prepare example string iterator
List<String> lines = new ArrayList<String>();
lines.add("bar,baz,foo");
lines.add("yay,quux quuux,17");
lines.add("hey,qaax qaaax,42");

// test parsed things
List<Thing> things = ThingBuilder.buildThings(lines.iterator());
assertNotNull(things);
assertEquals(2, things.size());
assertEquals("foo: 17, bar: yay, baz: [quux, quuux]", things.get(0).toString());
assertEquals("foo: 42, bar: hey, baz: [qaax, qaaax]", things.get(1).toString()); 
```

## 最简单的方法

1.  读取第一行并将其拆分为列名
2.  阅读所有其他行并对其执行以下操作：
    *   将行拆分为标记
    *   循环它们：
        *   对于令牌，在列名上做`i`一个大`switch`/`else if``i`
        *   转换令牌`i`
        *   将提取的值存储在某处
    *   收集一切并建立一个`Thing`
3.  完毕。

我对这种方法的问题是内部开关。在处理完第一行之后，应该清楚如何解析行。

## 我想要什么

在带有闭包的语言中，我会尝试以下操作：

1.  读取第一行并将其拆分为列名
2.  为每个列名创建一个闭包，该闭包为给定标记设置正确的值并将其添加到**解析器闭包数组中**
3.  阅读所有其他行并对其执行以下操作：
    *   将行拆分为标记
    *   循环它们：
        *   **`i`使用令牌调用解析器闭包`i`**
    *   收集一切并建立一个`Thing`
4.  完毕。

# 我试过的

我对所有三个令牌解析器都有一个简单的接口。他们应该获得一个令牌并将生成的值注入给定`ThingBuilder`的缓存中：

```
public interface TokenParser {
    public void parse(String token, ThingBuilder builder);
}

public class FooParser implements TokenParser {
    @Override public void parse(String token, ThingBuilder builder) {
        builder.setFoo(Integer.parseInt(token));
    }
}

public class BarParser implements TokenParser {
    @Override public void parse(String token, ThingBuilder builder) {
        builder.setBar(token);
    }
}

import java.util.ArrayList;
import java.util.List;
public class BazParser implements TokenParser {
    @Override public void parse(String token, ThingBuilder builder) {
        List<String> baz = new ArrayList<String>();
        for (String s : token.split(" ")) baz.add(s);
        builder.setBaz(baz);
    }
} 
```

My`ThingBuilder`的`buildThings`方法是静态的并在`ThingBuilder`内部创建一个对象，构造函数获取第一（列）行。这也是填充令牌解析器列表的地方。在此之后，隐藏`ThingBuilder`对象准备就绪，并使用以下输入行`buildThing`重复调用该方法以创建`Thing`s 列表：

```
import java.util.ArrayList;
import java.util.List;
import java.util.Iterator;

public class ThingBuilder {

    // single column parsers
    protected List<TokenParser> columnParsers;

    // thing attribute cache
    protected int           fooCache;
    protected String        barCache;
    protected List<String>  bazCache;

    // thing attribute cache setter
    public void setFoo(int          foo) { fooCache = foo; }
    public void setBar(String       bar) { barCache = bar; }
    public void setBaz(List<String> baz) { bazCache = baz; }

    // cleanup helper method
    protected void cleanup() {
        setFoo(0); setBar(null); setBaz(null);
    }

    // statically build a list of things from given lines
    public static List<Thing> buildThings(Iterator<String> lines) {

        // prepare builder with the first line
        ThingBuilder builder = new ThingBuilder(lines.next());

        // parse things
        List<Thing> things = new ArrayList<Thing>();
        while (lines.hasNext()) {
            things.add(builder.buildThing(lines.next()));
        }
        return things;
    }

    // prepares a builder to parse thing lines
    protected ThingBuilder(String columnLine) {

        // split line into columns
        String[] columns = columnLine.split(",");

        // prepare a parser for each column
        columnParsers = new ArrayList<TokenParser>();
        for (String column : columns) {
            TokenParser parser;
            if      (column.equals("foo")) parser = new FooParser();
            else if (column.equals("bar")) parser = new BarParser();
            else if (column.equals("baz")) parser = new BazParser();
            else throw new RuntimeException("unknown column: " + column);
            columnParsers.add(parser);
        }
    }

    // builds a thing from a string
    protected Thing buildThing(String line) {

        // split the line in tokens
        String[] tokens = line.split(",");

        // let the parsers do the work
        for (int i = 0; i < tokens.length; i++) {
            columnParsers.get(i).parse(tokens[i], this);
        }

        // hopefully they're done
        Thing thing = new Thing(fooCache, barCache, bazCache);
        cleanup();
        return thing;
    }
} 
```

这有效，但是：

## 我不喜欢我的解决方案的地方

*   **感觉很复杂**！
*   **公共缓存设置器的事情**。只`TokenParser`应允许 s 填充构建器缓存。
*   **如果我有多个带有`int`'s 的列怎么办？**我是否必须为每列构建一个解析器类，或者是否可以多次使用 IntegerParser 类？这里的问题是，解析器必须调用正确的缓存设置器方法。

提前感谢您的提示！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T00:38:58.057

就个人而言，我不会走这条路。有一些通用框架可以很好地完成这类事情并允许可定制的扩展点。

例如，考虑流行的[OpenCSV](http://opencsv.sourceforge.net/)项目：

[http://opencsv.sourceforge.net/#javabean-integration](http://opencsv.sourceforge.net/#javabean-integration)

或者，如果您需要注释，请考虑[使用 JFileHelpers](http://jfilehelpers.com/index_en.php)

[http://jfilehelpers.com/index_en.php](http://jfilehelpers.com/index_en.php)

或[JSefa](http://jsefa.sourceforge.net/index.html)

[http://jsefa.sourceforge.net/quick-tutorial.html#CSV](http://jsefa.sourceforge.net/quick-tutorial.html#CSV)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T00:49:55.253

我同意@btiernay 的回答，但如果你想推出自己的实现，请继续阅读......

* * *

> 公共缓存设置器的事情。应该只允许 TokenParsers 填充构建器缓存。

是的。这是您的`TokenParser`API 的结果，以及它通过调用 setter on 来“返回”值的方式`ThingBuilder`。事实上，这比你已经确定的后果更糟。也就是说：您的`TokenParser`API 和所有`TokenParser`类都特定于一个且只有一个`ThingBuilder`类。它们不可重复使用...

我认为使用这样的 API 会更好：

```
 public interface TokenParser<T> {
      public T parse(String token);
  } 
```

> 如果我有多个带有 int 的列怎么办？我是否必须为每列构建一个解析器类，或者是否可以多次使用 IntegerParser 类？这里的问题是，解析器必须调用正确的缓存设置器方法。

是的。

接下来创建一个 RowBuilder 接口：

```
 public interface RowBuilder<R>
      public R buildRow(List<String> tokens);
  } 
```

这里有一个棘手的地方 --- 创建一个看起来像这样的通用 RowBuilder 类：

```
 public class GenericRowBuilder<R> implements RowBuilder<R> {
      public GenericRowBuilder(Class<R> clazz, TokenParser<?>[] parsers) {
          // Extract the return types of the reified parse objects' `parse` 
          // methods, and use this to locate a matching `Constructor<R>` in 
          // `clazz`.  If there isn't one, throw an exception.
          this.clazz = clazz;
          this.parsers = parsers;
      }
      public R parse(List<String> tokens) {
          // Check number of tokens matches number of parsers.
          // Parse each token with corresponding parsers.
          // Use the `Constructor<R>` found above to create the instance of `R`
      }
  } 
```

现在这一切都非常复杂......并且需要对你有很好的理解才能使用Java的反射API......但最终结果是你可以为你的类实例化一个RowBuilder，如下所示：

```
 RowBuilder<MyRow> rb = new GenericRowBuilder<MyRow>(MyRow.class,
      new TokenParser<?>[]{
          new IntTokenParser(), new FloatTokenParser(), new CustomTokenParser}); 
```

你有一些东西会：

*   检查正确的类型是否用于正确的字段，
*   检查每行中的值的数量，并为每列值使用正确的解析器，以及
*   与任何行类一起工作，`R`只要它具有合适的构造函数。

# android - 使 EditText 在填充时增长

> ID：12878026
> 
> 赞同：11
> 
> 时间：2012-10-13T23:41:13.310
> 
> 标签：android, xml, android-layout, android-edittext

我知道以前有人问过关于这个问题的各种问题，但我找不到我的问题的答案。我正在开发一个 android 应用程序，我希望 EditText 字段在用户输入时扩展。我希望它首先是最小尺寸，如果用户键入的内容超过最小值允许的范围，则进行扩展。到目前为止，这是我的代码：

```
<ScrollView
    android:layout_height="fill_parent"
    android:layout_width="fill_parent"
    android:fillViewport="true" >

    <linearLayout
        android:layout_height="match_parent"
        android:layout_width="wrap_content"
        android:orientation="vertical"
        android:padding="5dp" >

        <linearLayout>
            ...content...
        </linearLayout>

        <linearLayout>
            ...content...
        </linearLayout>

        <EditText 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:inputType="textMultiLine"
        android:lines="7"
        android:gravity="top" />

    </linearLayout>
</ScrollView> 
```

EditText 字段在父线性布局内，在父 ScrollView 内。它在屏幕上看起来不错，但是当我越过编辑文本字段中的第 7 行时，我必须使用轨迹球通过文本字段返回。滚动屏幕滚动整个屏幕。谁能给我一些提示？我已经尝试对类似问题实施不同的建议，但没有人给我正确的答案。谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-06T21:49:19.800

正如@tozka 在评论中所说，在布局文件中，指定：`android:minLines=""`而不是`android:lines=""`.

在 Java 中：`editText.setMinLines(int)`而不是`editText.setLines(int)`.

在 C#（Android 的 Mono）中，`editText.SetMinLines(int)`而不是`editText.SetLines(int)`.

来自[Android 文档](http://developer.android.com/reference/android/widget/TextView.html#setMinLines%28int%29)：

> `public void setMinLines (int minlines)`
> 
> 使 TextView 至少有这么多行高。设置此值会覆盖任何其他（最小）高度设置。

# c# - 对于调用其他方法的方法，我应该使用“内部”还是“私有”而不是“公共”？

> ID：12878033
> 
> 赞同：0
> 
> 时间：2012-10-13T23:43:01.807
> 
> 标签：c#

在我的 C# 项目中，我有调用其他方法的方法，如下所示：

```
options = ReferenceUtilities.GetMenuStatuses(); 
```

在我的 ReferenceUtilities 中，我编写了代码：

```
 internal static SelectList GetMenuStatuses()
    {
        throw new NotImplementedException();
    } 
```

但是我应该使用内部还是私有？我不确定这里的区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-30T19:11:27.903

正如人们已经回答的那样，内部意味着该成员可以被同一程序集中的其他代码访问。私有意味着可以从同一类中的其他代码访问它。

但是，需要添加的重要一点：在 Properties/Assemblyinfo.cs 中，您可以添加 [assembly: InternalsVisibleTo("something")] 语句，它允许您从不同的程序集访问内部方法。

这对于单元测试目的非常有用，并且是有时使用内部而不是私有的一个很好的理由。

（关于是否进行单元测试内部存在巨大的争论，但很高兴知道这种可能性。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T23:44:20.290

`internal`意味着该成员可以被同一程序集中的其他代码访问。`private`意味着可以从同一类中的其他代码访问它。

这与方法是否调用其他方法无关。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T23:52:37.900

`internal`在程序集之间，而`private`在类之间

*   internal：其他程序集中的代码不可见，仅在此程序集中可见
*   private：对其他类不可见。仅在此类中可见
*   public：对其他类或程序集可见 [for class]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T23:46:17.933

内部意味着同一程序集中的其他类可以看到该方法。私有意味着只有定义方法的类可以看到它。如果该方法只会被定义它的类调用，请使用 private。否则，使用内部。仅当程序集外部的类需要直接调用该方法时才应使用 Public。

与往常一样，也有例外，但这是一个很好的一般规则。

更进一步，服务类（即仅用于提供服务或特性的方法）应该实现定义该服务或特性的契约的接口。其他类应该传递该接口的一个实例，以便只有接口方法可用。

# java - 子类不调用超类构造函数时的行为

> ID：12878038
> 
> 赞同：0
> 
> 时间：2012-10-13T23:44:23.523
> 
> 标签：java

根据我的教科书：

> 如果子类中任何构造函数的执行没有调用超类构造函数，Java 会自动调用超类的无参数构造函数。

这是否意味着所有超类数据字段（超类变量）都将设置为 null（因为构造函数是无参数构造函数）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T23:46:02.447

不，如果`super`没有参数的 s 构造函数初始化了一些对象——这个初始化将会完成。

```
class A { 
  public int x;
  A () { 
     x = 1;
  }
}
class B extends A { 
  B() { 
  }
} 
```

的`B`构造函数仍将`super()`作为第一行调用（即使它没有明确写入），并将`x=1`在进程中初始化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T23:46:47.370

这意味着超类的字段将设置为非参数构造函数设置的任何内容。

这可能是也可能不是`null`。如果未定义非参数超类构造函数并且子类的构造函数未设置超类字段，那么是的，它们将是`null`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T23:47:32.860

不：

```
class A {
    public int x;
    public A() {
        x = 42;
    }
}

class B extends A {} 
```

```
assert(new B().x == 42) 
```

“无参数构造函数”不必是空构造函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-14T00:07:33.120

> 如果这个人粗心并且没有指定他们，我们会得到一个错误吗？

你还没有说“他们”指的是什么，但是......

1.  如果类构造函数（显式或隐式）依赖于其超类未提供（显式或隐式）的无参数构造函数，则这是一个编译错误。

2.  如果程序员不小心遗漏了类中的构造函数，并且其引用字段（仅）默认初始化为`null`，则不会出现编译错误。（代码是有效的。编译器无法确定程序员的意图；即构造函数是否被意外或故意省略。）但是如果某些代码使用字段/字段值*假设*它是非的，那么稍后您*可能*会遇到运行时错误-空值。

**   如果程序员定义了构造函数，但构造函数初始化某个字段失败，则结果与 2 相同。没有编译错误，可能存在运行时错误。*

# javascript - 如果用户在 div 之外单击，如何隐藏 div？

> ID：12878041
> 
> 赞同：1
> 
> 时间：2012-10-13T23:44:48.060
> 
> 标签：javascript, jquery, html, hide

我有一个按钮，单击该按钮时，会更改 div 的可见性，如下所示：

```
<button type="button" id="editbutton" onclick="plus()" alt="Edit"></button>

function plus() {
var f = document.getElementById('edit');
if (f.style.visibility == 'hidden') {
   f.style.visibility = 'visible';
   }
else
    f.style.visibility = 'hidden';
} 
```

这工作正常。但现在我想添加该功能，以便如果用户单击 div 之外的任何位置，div 将返回隐藏状态。

最初我尝试了自己的方法，但没有成功，因为每当我单击按钮使 div 可见时，新代码再次将其隐藏。我查看了其他人发布的一些 jQuery 示例，但是我尝试过的没有一个可以解决这个问题。任何帮助我都会非常感激。

编辑：澄清一下，问题在于，由于用户单击按钮最初使 div 可见，所以每当我单击按钮时，div 会变得可见，但会立即再次隐藏，因为这算作单击的主体页。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T23:49:11.110

当用户在您的 div 中单击时，您可以在 click 事件处理程序中对事件调用“e.stopPropagation()” - 这将阻止事件“冒泡”DOM。

然后，如果您将事件处理程序附加到侦听点击的 BODY 元素，则可以使用该事件处理程序隐藏 DIV；知道单击 DIV 本身不会将事件冒泡到 BODY 处理程序。

这样，除非处理程序也调用 stopPropagation()，否则对另一个元素的任何单击都会被处理程序捕获。因此，如果在其他情况下您不希望 div 隐藏，您可以根据需要调用 stopPropagation() 来阻止它的发生。

例如：

```
$("#edit-button").click( function(e) {
    $("#edit").toggle();
    e.stopPropagation();
});

$('#edit').click(function(e) {
    e.stopPropagation();
});

$("body").click( function(e) {
    $("#edit").hide();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T23:49:03.033

`body`在元素上设置点击处理程序。如果您可以检查`event.target`它是否与 匹配`div`，如果匹配：什么都不做，否则：隐藏它。

```
document.body.onclick = function(event) {
    if (event.target === f) {
        // user clicked on the div, do nothing
    } else {
        f.style.visibility = "hidden";
    }
}; 
```

`div`如果您在编辑中有元素（并且不匹配），这会变得有点复杂`.target`，但我相信您可以提出解决方案:)（可以完成）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-13T23:50:44.650

你似乎知道自己在做什么，所以我会保持简短。

在 jquery 中编写一个 .click 函数。

你给你的按钮一个id（或者它所在的div）

```
$('#buttonidordiv').click(function(){
 $('#divtoshow').show() // put in a number to create a fade in seconds.
//your stuff here
} 
```

如果有人点击它之外的任何地方......我认为你应该能够使用 window. 否则你可以使用另一个 div （比​​如你的包装器）。

所以

```
$('window').click(function(){
$('#samediv').hide() //same as above
//your stuff here

} 
```

确实意识到，我很讨厌，`)};`所以您可能必须在某处添加其中一个；）

祝你好运！

# scala - 将 IntelliJ 用于 Scala 项目

> ID：12878048
> 
> 赞同：2
> 
> 时间：2012-10-13T23:46:09.137
> 
> 标签：scala, intellij-idea

我在这里遗漏了一些简单的东西。

*   斯卡拉下载
*   斯卡拉家居套装
*   IntelliJ 插件已下载

添加新模块时，选择 scala：

![在此处输入图像描述](../Images/2cfdcad75bdee53a23b59e5b75b638a7.png)

但是，当创建新类时，当尝试运行它时，我得到

![在此处输入图像描述](../Images/1261430cb014457168dbf66c3846f564.png)

作为模块属性，我看到了

![在此处输入图像描述](../Images/cf1b60e6b0ab404f9792370eebdef083.png)

请问我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T23:53:35.590

两件事情：

1.  您正在使用的文件必须是 Scala*类*。
2.  您应该在`object`某处声明（最好在课堂之外）。

    ```
    object runnableObject {
        def main(args: Array[String]) {
            println("Hello world!")
        }
    } 
    ```

然后，您可以使用此对象在 IntelliJ 中运行您的 Scala 代码。

# java - java执行器服务

> ID：12878051
> 
> 赞同：0
> 
> 时间：2012-10-13T23:46:18.337
> 
> 标签：java, executorservice, threadpoolexecutor

当我`ExecutorService` 在 JAVA 中使用以下代码创建时，有人可以解释它是如何`ExecutorService`工作的吗？

```
ExecutorService executor = Executors.newFixedThreadPool(400);

    for (int i = 0; i < 500; i++) {
        Runnable worker = new MyRunnable(10000000L + i);
        executor.execute(worker);
    } 
```

我相信会有一个工作队列，我的 for 循环会`Runnable`向这个队列添加 500 个任务。现在`ExecutorService`已经创建了一个包含 400 个线程的线程池。

那么在队列中的这 500 个任务中，队列中的 400 个线程`ExecutorService`将一次执行这 400 个任务，而剩余的 as slot 被释放？

我的理解正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T23:57:26.183

[JavaDoc newFixedThreadPool](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Executors.html#newFixedThreadPool%28int%29)

> 创建一个线程池，该线程池重用在共享无界队列上运行的固定数量的线程。在任何时候，最多 nThreads 个线程将是活动的处理任务。**如果在所有线程都处于活动状态时提交了其他任务，它们将在队列中等待，直到有线程可用。**如果任何线程在关闭之前的执行过程中由于失败而终止，如果需要执行后续任务，新的线程将取代它。池中的线程将一直存在，直到显式关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-14T07:40:29.297

如果任务多于处理线程数，则尚未被线程拾取的任务将等待。一旦线程完成一项任务，它就会再接一个等待的任务。

但是这些线程池（除了`ForkJoinPool`）在窃取工作线程任务方面效率不高。

假设一个线程积压了 10 个要执行的任务并且它正在运行第一个任务。同时，池中的其他一些线程处于空闲状态。在这种情况下，一旦为任务分配了一个线程，即使其他线程处于空闲状态，也只有该线程将执行该任务。

[ForkJoinPool](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ForkJoinPool.html)与其他类型的 ExecutorService 的不同之处主要在于采用了工作窃取：池中的所有线程都尝试查找并执行提交到池和/或由其他活动任务创建的任务（如果不存在，则最终阻塞等待工作）

Java 8 中又添加了一个新的 API。

```
public static ExecutorService newWorkStealingPool() 
```

> 创建一个工作窃取线程池，使用所有可用处理器作为其目标并行度级别。

相关 SE 问题：[ThreadPoolExecutor vs ForkJoinPool：窃取子任务](https://stackoverflow.com/questions/33448465/threadpoolexecutor-vs-forkjoinpool-stealing-subtasks)

# algorithm - 局部加权逻辑回归

> ID：12878058
> 
> 赞同：7
> 
> 时间：2012-10-13T23:47:13.207
> 
> 标签：algorithm, matrix, machine-learning, linear-algebra, regression

我一直在尝试在 Ruby 中实现局部加权逻辑回归算法。据我所知，目前还没有这个算法的库，而且可用的信息很少，所以很难。

我的主要资源是[Kan Deng 博士的论文，](http://www.cs.cmu.edu/~kdeng/thesis/logistic.pdf)他在其中描述了算法，我觉得很简单。到目前为止，我在图书馆的工作就在[这里](https://github.com/orthogonal/USCF-Stats/blob/master/lib/LocalLogisticRegression.rb)。

我在尝试计算`B`（beta）时遇到了麻烦。据我了解，`B`是一个`(1+d x 1)`表示特定点的局部权重的向量。之后，`pi`该点的（正输出概率）是基于该点的 sigmoid 函数`B`。要获得`B`，请递归使用 Newton-Raphson 算法一定次数，可能不超过 10 次。

第 66 页上的公式 4-4，Newton-Raphson 算法本身，对我来说没有意义。根据我对什么`X`和 W 的理解，`(x.transpose * w * x).inverse * x.transpose * w`应该是一个`(1+d x N)`矩阵，它与 不匹配`B`，即`(1+d x 1)`. 那么，唯一可行的方法是，如果 e 是一个`(N x 1)`向量。

但是，在第 67 页的顶部，在图片下方，邓博士只是说 e 是一个比率，这对我来说没有意义。是 e 欧拉常数吗？碰巧这个比率总是 2.718:1，还是别的什么？无论哪种方式，对我来说，解释似乎都没有暗示它是一个向量，这让我感到困惑。

的使用`pi'`也让我感到困惑。方程 4-5 是 sigmoid 函数 wrt B 的导数，给出一个常数乘以一个向量，或一个向量。不过，根据我的理解，`pi'`它应该是一个数字，乘以 w 并形成权重算法 W 的对角线。

所以，我的两个主要问题是`e`，第 67 页上的内容是什么，这是`1xN`我需要的矩阵，以及`pi'`等式 4-5 中的数字是如何结束的？

我意识到这是一个很难回答的问题，所以如果有一个好的答案，那么我会在几天后回来并给它一个 50 分的赏金。我会给邓博士发一封电子邮件，但我一直无法查明他在 1997 年之后发生了什么事。

如果有人对此算法有任何经验或知道任何其他资源，我们将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T05:45:42.450

据我所知，这只是 Logistic 回归的一个版本，其中对数似然函数中的项具有乘法权重，具体取决于它们与您尝试分类的点的距离。我将从熟悉逻辑回归的解释开始，例如[http://czep.net/stat/mlelr.pdf](http://czep.net/stat/mlelr.pdf)。您提到的“e”似乎与欧拉常数完全无关——我认为他使用 e 表示错误。

如果您可以从 Ruby 调用 Java，则可以使用[http://weka.sourceforge.net/doc.stable/weka/classifiers/functions/Logistic.html](http://weka.sourceforge.net/doc.stable/weka/classifiers/functions/Logistic.html)中描述的 Weka 中的逻辑分类器- 这表示“虽然原始逻辑回归不处理实例权重，但我们稍微修改算法以处理实例权重。” 如果没有别的，你可以下载它并查看它的源代码。如果您这样做，请注意这是一种相当复杂的方法 - 例如，他们事先检查所有点是否实际上几乎位于输入空间的某个子空间中，如果是，则向下投影几个维度。

# graph - 在无向图中找到一定长度的循环 - TSP

> ID：12878060
> 
> 赞同：0
> 
> 时间：2012-10-13T23:47:19.000
> 
> 标签：graph, graph-theory, np

我有 80 个节点，我需要从中找到一个长度为 40 的循环，同时将循环经过的距离保持在最小。有些节点不能直接连接，它们在特定区域，我只能从一个区域到另一个区域，而不是在一个区域内。

我只是在这里一般性地问，我可以使用什么样的技术来获得 40 个节点的最佳（最短）可能周期？到目前为止，我已经编写了一个基本的替换优化器和一个贪婪的 DFS。我想知道现在开始对我来说最好的方法是什么？

# c++ - C++ 随机数 srand

> ID：12878063
> 
> 赞同：1
> 
> 时间：2012-10-13T23:47:26.733
> 
> 标签：c++, random

> **可能重复：**
> [rand函数在单个函数c ++中调用时返回相同的值](https://stackoverflow.com/questions/6729214/rand-function-returns-same-values-when-called-within-a-single-function-c)

我有一个程序，每次鼠标点击都会创建一组新的随机数。如果我在没有 srand 的情况下运行程序（ time(NULL) ）；每次的数字都是一样的。如果我用 srand ( time(NULL) ) 运行程序；那么我可能会点击垃圾邮件并且数字会重复。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T20:52:02.373

您的问题是关于使用相同值播种随机数生成器。该`srand`函数用于为它初始化所谓的“种子”。种子可用于在序列中生成相同的随机数。

首先你需要初始化生成器，然后只调用`rand`不带参数的函数，它会生成随机数。例如：

```
 /* initialize random seed with actual date-time */
  std::srand(std::time(NULL));

  /* generate ten random number lower than 10 */
  int random, times = 10;
  while(times){
    random = std::rand() % 10;
    times--;
  } 
```

关于“垃圾邮件点击”：`std::time(NULL)`具有以秒为单位的精度，因此如果您在同一秒内点击，您将使用相同的值初始化随机种子。

这是[官方 c++ 参考](http://en.cppreference.com/w/cpp/numeric/random/rand)网站上的一个示例，[也是 cplusplus.com](http://www.cplusplus.com/reference/clibrary/cstdlib/rand/)上的另一个示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T00:22:49.980

`rand`函数不太擅长生成随机数，看看`boost::random`. 它很棒，可以创建随机和半随机数

# javascript - 不支持视频格式或 MIME 类型

> ID：12878068
> 
> 赞同：12
> 
> 时间：2012-10-13T23:48:15.073
> 
> 标签：javascript, jquery, css, html

这是运行视频的相关代码：

```
<video id="video" src="videos/clip.mp4" type='video/mp4' controls='controls'>
    Your brwoser doesn't seems to support video tag
</video> 
```

此代码单独工作正常，但在尝试淡入时：

```
function showVideoPlayer(){          
    console.log('video displayed');      
    $("#video").fadeIn('medium');
} 
```

它似乎不起作用，我得到了这个：

![在此处输入图像描述](../Images/8d76f27678c52c91a17cb6707ff80d29.png)

如你看到的：`Video format or MIME type is not supported.`

视频容器隐藏在 css 中：

```
#video{
    position:fixed;
    border:solid 1px #000000;
    width:654px;
    height:454px;
    background-color:#FFFFFF;
    left:23%;
    top:11%;
    display:none;
} 
```

这就是想法，视频容器被隐藏（`display:none`），当需要时，我调用该函数`showVideoPlayer`来显示视频容器。但是，这不起作用并`FireFox`在 Chrome 和 IE9 中产生了这个错误和一个空白屏幕。

我错过了什么吗？该`fadeIn`功能似乎让我误会了吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-30T04:14:13.210

Firefox 目前不支持 MPEG H.264 (mp4) 格式，因为在哲学上不同意该格式的闭源性质。

要在不使用插件的情况下在所有浏览器中播放视频，您需要以不同的格式托管每个视频的多个副本。您还需要使用`video`标签的另一种形式，如上面@TimHayes 的JSFiddle 中所示，转载如下。Mozilla 声称只需要 mp4 和 WebM 以确保完全覆盖所有主要浏览器，但您可能希望查阅[W3C 的 HTML5 视频页面](http://www.w3schools.com/html/html5_video.asp)上的视频格式和浏览器支持标题，以了解哪个浏览器支持哪些格式。

此外，值得查看[Wikipedia 上的 HTML5 视频页面，](http://en.wikipedia.org/wiki/HTML5_video#Supported_video_formats)以对主要文件格式进行基本比较。

下面是适当的`video`标签（您需要将您的视频重新编码为[WebM](http://www.webmproject.org/tools/)或[OGG](http://www.theora.org/downloads/)格式以及您现有的 mp4）：

```
<video id="video" controls='controls'>
  <source src="videos/clip.mp4" type="video/mp4"/>
  <source src="videos/clip.webm" type="video/webm"/>
  <source src="videos/clip.ogv" type="video/ogg"/>
  Your browser doesn't seem to support the video tag.
</video> 
```

**2013 年 11 月 8 日更新**

网络基础设施巨头思科已宣布[计划开源 H.264 编解码器的实现](http://blogs.cisco.com/collaboration/open-source-h-264-removes-barriers-webrtc/)，取消迄今为止被证明是 Mozilla 使用障碍的许可费用。无需深入了解它的政治（参见以下链接），[这将允许 Firefox 从“2014 年初”开始支持 H.264](https://blog.mozilla.org/blog/2013/10/30/video-interoperability-on-the-web-gets-a-boost-from-ciscos-h-264-codec/)。但是，正如该链接中所述，这仍然带有警告。H.264 编解码器仅用于视频，在 MPEG-4 容器中，它最常与闭源 AAC 音频编解码器配对。因此，可以播放 H.264 视频，但音频将取决于最终用户的机器上是否已经存在 AAC 编解码器。

总而言之，正在取得进展，但您仍然无法避免在不使用插件的情况下使用多种编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-18T14:23:35.450

**对于 Ubuntu 14.04**

刚刚删除了 Oxideqt-dodecs 包，然后安装 flash 或 ubuntu 受限的附加功能

你很高兴！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-18T04:51:24.690

修复！

我对这件事失去了理智。重置 firefox，尝试安全模式，移除插件，使用开发者工具进行调试。一切都无济于事，也没有让我进一步让我的在线视频恢复正常观看状态。然而，这完美地做到了。

在 Firefox 或任何风格的 Firefox 中（Cyber​​Fox 是我最喜欢的选择），只需浏览到[https://get.adobe.com/flashplayer/](https://get.adobe.com/flashplayer/)

首先验证网站是否检测到您正在使用 FireFox，并且已将 Flash 播放器的下载设置为 Firefox。

不要只点击下载。请保存好自己的偏头痛，并始终确保标有“可选报价：”的中间部分绝对未选中，默认情况下将选中它，因此在继续下载之前始终取消选中它。

下载完成后，关闭 Firefox。以管理员身份运行下载的安装文件。只需几秒钟左右即可完成，因此完成后，再次打开 Firefox 并尝试查看之前引发此错误的任何内容。现在应该恢复正常了。

享受！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-22T14:02:31.917

就我而言，这个错误：

> 不支持视频格式或 MIME 类型。

是由于[我的 .htaccess](https://scotthelme.co.uk/content-security-policy-an-introduction/)中的 CSP 不允许加载内容。您可以通过打开浏览器的控制台并刷新页面来检查这一点。

一旦我在`media-src`该 CSP 的一部分中添加了托管视频的域，控制台就干净了，视频也正确加载了。例子：

```
Content-Security-Policy: default-src 'none'; media-src https://myvideohost.domain; script-src 'self'; style-src 'unsafe-inline' 'self' 
```

# ios6 - 用户钥匙串的奇怪行为

> ID：12878082
> 
> 赞同：0
> 
> 时间：2012-10-13T23:50:47.150
> 
> 标签：ios6, keychain

我试图调试一个奇怪的行为，同时保存到 iOS 上的用户钥匙串。我正在使用下面的代码来检查用户是否在钥匙串上：

```
keychainItem = [[KeychainItemWrapper alloc] initWithIdentifier:KeyName accessGroup:nil];
if(keychainItem != NULL && [keychainItem objectForKey:(id)kSecValueData] != NULL && [[keychainItem objectForKey:(id)kSecValueData] length] > 0  &&
        [keychainItem objectForKey:(id)kSecAttrAccount] != NULL && [[keychainItem objectForKey:(id)kSecAttrAccount] length] > 0) {

    txtPassword.text = [keychainItem objectForKey:(id)kSecValueData];
    txtLogin.text = [keychainItem objectForKey:(id)kSecAttrAccount];

    // Call webservice to login
    [self btnPressedLogin:nil];
} 
```

我正在使用以下内容保存到钥匙串：

```
[keychainItem setObject:KeyName forKey: (id)kSecAttrService];
[keychainItem setObject:txtLogin.text forKey:(id)kSecAttrAccount];
[keychainItem setObject:txtPassword.text forKey:(id)kSecValueData]; 
```

当用户注销时，我只需执行以下操作：

```
[keychainItem resetKeychainItem]; 
```

我注意到它适用于所有情况，除了：

1.  我登录（手动输入用户名/密码）
2.  登出
3.  我登录（手动输入用户名/密码）
4.  重启模拟器
5.  它**没有**按应有的方式自动登录

我上面的代码片段有问题吗？我每次都能在模拟器上重现这个，我不知道，因为我在网上学习教程。包括以下页面：

[iOS：如何在应用程序中存储用户名/密码？](https://stackoverflow.com/questions/6972092/ios-how-to-store-username-password-within-an-app)

**[编辑]**

我正在单步执行断点，并确认在第 3 步（重新登录）之后，它实际上是保存到钥匙串中。我能够输出它保存的内容。

但是，在那之后，当我重新启动模拟器时……它显示它找不到用户名和密码！这没有任何意义...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T00:55:34.097

我发现了这个问题。这是一个内存问题。当屏幕移动时，`keychainItem`是一个正在被释放的属性。我必须重新初始化它，因为我是在`viewDidLoad`函数中创建的，注销后没有被调用。结案。

# python - Python转换非标准字符

> ID：12878083
> 
> 赞同：0
> 
> 时间：2012-10-13T23:50:58.193
> 
> 标签：python, utf-8, replace, ascii, strip

我有一个从包含一些非标准字符的网页中提取的列表。

列表示例：

```
[<td class="td-number-nowidth"> 10Â 115 </td>, <td class="td-number-nowidth"> 4Â 635 (46%) </td>, <td class="td-number-nowidth"> 5Â 276 (52%) </td>, ...] 
```

带帽子的 A 应该是逗号。有人可以建议如何转换或替换这些，以便我可以在列表中的第一个值中获得值 10115 吗？

源代码：

```
from urllib import urlopen
from bs4 import BeautifulSoup
import re, string
content = urlopen('http://www.worldoftanks.com/community/accounts/1000395103-FrankenTank').read()
soup = BeautifulSoup(content)

BattleStats = soup.find_all('td', 'td-number-nowidth')
print BattleStats 
```

谢谢，弗兰克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T23:53:37.960

`Content-Encoding`该网站是否在其标题中说明了编码？你必须得到它，并使用`.decode`方法解码列表中的那些字符串。它就像`encoded_string`.decode("encoding")。`encoding`可以是任何东西，`utf-8`成为其中之一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T23:58:34.650

您可以使用`.decode`带有`errors='ignore'`参数的方法。

```
>>> s = '[ 10Â 115 , 4Â 635 (46%) , 5Â 276 (52%) , ...]'
>>> s.decode('ascii', errors='ignore')
u'[ 10 115 , 4 635 (46%) , 5 276 (52%) , ...]' 
```

这是`help(''.decode)`：

```
decode(...)
    S.decode([encoding[,errors]]) -> object

    Decodes S using the codec registered for encoding. encoding defaults
    to the default encoding. errors may be given to set a different error
    handling scheme. Default is 'strict' meaning that encoding errors raise
    a UnicodeDecodeError. Other possible values are 'ignore' and 'replace'
    as well as any other name registered with codecs.register_error that is
    able to handle UnicodeDecodeErrors. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T23:56:38.113

你有尝试吗？

这可能会奏效。

```
a =  ['10Â 115', '4Â 635 (46%)', '5Â 276 (52%)']
for b in a:
    b.replace("\xc3\x82 ", '') 
```

输出：

```
10115
4635 (46%)
5276 (52%) 
```

根据它的恒定性（如果它始终只是一个带点的 a），可能会有更好的方法（将任何从 \ 替换为带有空白字符的空格）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T03:55:54.980

[BeautifulSoup 自动处理字符编码](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#encodings)。问题在于打印到您的控制台似乎不支持某些 Unicode 字符。在这种情况下，它是[`'NO-BREAK SPACE' (U+00A0)`](http://www.fileformat.info/info/unicode/char/A0/index.htm)：

```
>>> L = soup.find_all('td', 'td-number-nowidth')
>>> L[0]
<td class="td-number-nowidth"> 10 123 </td>
>>> L[0].get_text()
u' 10\xa0123 ' 
```

请注意，文本是 Unicode。检查是否`print u'<\u00a0>'`适用于您的情况。

`PYTHONIOENCODING`您可以在运行脚本之前通过更改环境变量来操纵使用的输出编码。因此，您可以将输出重定向到指定`utf-8`编码的文件，并使用`ascii:backslashreplace`控制台中的调试运行值，而无需更改脚本。bash 中的示例：

```
$ python -c 'print u"<\u00a0>"' # use default encoding
< >
$ PYTHONIOENCODING=ascii:backslashreplace python -c 'print u"<\u00a0>"'
<\xa0>
$ PYTHONIOENCODING=utf-8 python -c 'print u"<\u00a0>"' > output.txt 
```

要打印相应的数字，您可以在不可破坏的空间上拆分以稍后处理项目：

```
>>> [td.get_text().split(u'\u00a0')
...  for td in soup.find_all('td', 'td-number-nowidth')]
[[u' 10', u'115 '], [u' 4', '635 (46%) '], [u' 5', u'276 (52%) ']] 
```

或者你可以用逗号替换它：

```
>>> [td.get_text().replace(u'\u00a0', ', ').encode('ascii').strip()
...  for td in soup.find_all('td', 'td-number-nowidth')]
['10, 115', '4, 635 (46%)', '5, 276 (52%)'] 
```

# android - 自定义布局不适合对话框窗口

> ID：12878087
> 
> 赞同：-1
> 
> 时间：2012-10-13T23:51:22.487
> 
> 标签：android, android-layout

我设计了以下自定义布局以膨胀为 DialogFragment 然后我以编程方式添加了正负按钮

但是布局中的最后一个 TextView 并没有显示在 Dialog 窗口中，并且被负数和正数覆盖

我该如何克服这个问题？

这是我的对话框自定义布局的代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView
        android:id="@+id/txtViewResult"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="16dp"
        android:text="@string/result"
        tools:context=".ResultActivity" />

    <TextView
        android:id="@+id/txtViewResultPercent"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/txtViewResult"
        android:layout_marginRight="28dp"
        android:layout_marginTop="16dp"
        android:text="Result Value" />

    <TextView
        android:id="@+id/txtViewResultMsg"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/txtViewResultPercent"
        android:layout_below="@+id/txtViewResultPercent"
        android:layout_marginTop="8dp"
        android:text="Result Message" />

    <TextView
        android:id="@+id/txtViewAdvice"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/txtViewResultMsg"
        android:layout_below="@+id/txtViewResultMsg"
        android:layout_marginTop="16dp"
        android:text="@string/Advice" />

    <TextView
        android:id="@+id/txtViewAdviceMsg"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/txtViewAdvice"
        android:layout_below="@+id/txtViewAdvice"
        android:layout_marginTop="16dp"
        android:text="Advice Message"
        android:layout_marginBottom="16dp" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T12:52:51.067

解决这个问题的最简单方法是使用 ScrollView。这是如何

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

            <TextView
                android:id="@+id/txtViewResult"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentTop="true"
                android:layout_centerHorizontal="true"
                android:layout_marginTop="16dp"
                android:text="@string/result"
                tools:context=".ResultActivity" />

            <TextView
                android:id="@+id/txtViewResultPercent"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:layout_below="@+id/txtViewResult"
                android:layout_marginRight="28dp"
                android:layout_marginTop="16dp"
                android:text="Result Value" />

            <TextView
                android:id="@+id/txtViewResultMsg"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignRight="@+id/txtViewResultPercent"
                android:layout_below="@+id/txtViewResultPercent"
                android:layout_marginTop="8dp"
                android:text="Result Message" />

            <TextView
                android:id="@+id/txtViewAdvice"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignRight="@+id/txtViewResultMsg"
                android:layout_below="@+id/txtViewResultMsg"
                android:layout_marginTop="16dp"
                android:text="@string/Advice" />

            <TextView
                android:id="@+id/txtViewAdviceMsg"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignRight="@+id/txtViewAdvice"
                android:layout_below="@+id/txtViewAdvice"
                android:layout_marginTop="16dp"
                android:text="Advice Message"
                android:layout_marginBottom="16dp" />

    </RelativeLayout>
</ScrollView> 
```

希望这可以帮助。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T00:05:43.400

把它全部放在一个滚动视图中。

# java - 如何一般地对时间范围进行建模，以允许任何时间段或更具体的时间段的范围

> ID：12878088
> 
> 赞同：2
> 
> 时间：2012-10-13T23:51:43.257
> 
> 标签：java, time, data-modeling, baseline

想象一下，如果您想对非分数时间范围进行建模，则可以是以下任何一种：

```
"1 hour" (all/any 1 hour period)
"1 hour, starting 1pm")  (all/any 1 hour periods that start at 1pm)
"1 hour, starting 1pm, on Wednesdays" (all/any 1 hour periods that start at 1pm on wednesdays)
"1 hour, starting 1pm, on 3rd Wednesday in November"
"1 week, starting the first week in November" 
```

你明白了。另一个目标是轻松有效地计算这些范围的重叠和子集。例如，“1 小时，周三下午 1 点开始”与“1 小时，下午 1 点开始”重叠

附加信息：这是基线系统中的时间段。我想为基线段设置多个时间段粒度。就像下午 1 点任何 1 小时期间的基线或 11 月第 3 个星期三下午 1 点开始的 1 小时期间的基线。

另一个考虑因素是这些基线周期将存储在无 sql 存储中，并且以存储中存在的最小粒度有效地细化周期会很好。（是否存在特定的日-周-小时周期？不，周小时怎么样？，不？只有一天小时的时间段怎么样） - 如果这是有道理的。也许是某种树状层次结构。

编辑：存储和查询部分**可能是最重要的要求**。将存储数十亿个时间段，需要尽快查找它们（找到存在的最细粒度）。我很乐意为查找速度牺牲完整性。

编辑：多考虑一下，以及如何将它存储在数据存储中，树状结构可能有利于高效查找。我可以沿着树向下走以获得存在的最细粒度。

```
 1hr
          /
       1hr@1pm
       /
     1hr@1pm@wednesday
     /
   1hr@1pm@wednesday@November 
```

这是我想出的，但我觉得它很弱。我将继续摆弄它并在这里更新，但我很想知道是否有人有更聪明的方法来建模它。

```
public class DateRange {

    Integer fTimeSpan;
    TimeUnit fTimeUnit;
    Integer fStartHour;
    Integer fStartDay;
    Integer fStartWeek;
    Integer fStartMonth;

    boolean intersects(DateRange other) { ... }

}
enum TimeUnit {
    HOURS,
    DAYS,
    WEEKS,
    MONTHS;

} 
```

编辑：基于树的结构（如我上面的编辑）会简单得多。大粒度跨度没有未使用的字段。粒度将在树中，而不是在数据结构中......

```
public class RangeTreeNode {

    TimeUnit fTimeUnit;
    int fStartTime;
    int fSpanTime;
    List<RangeTreeNode> fChildren;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T23:58:48.747

## 抽象

我认为你所描述的可以用[Joda Time](http://joda-time.sourceforge.net/)的[Interval](http://joda-time.sourceforge.net/apidocs/org/joda/time/Interval.html)类来建模。它支持[Instant](http://joda-time.sourceforge.net/apidocs/org/joda/time/Instant.html) s、[Period](http://joda-time.sourceforge.net/apidocs/org/joda/time/Period.html) s 和[Duration](http://joda-time.sourceforge.net/apidocs/org/joda/time/Duration.html) s 的概念：

> **间隔**表示从一个毫秒瞬间到另一个瞬间的时间间隔。这两个瞬间都是日期时间连续体中完全指定的瞬间，并带有时区。
> 
> **瞬间**代表时间线上的一个精确点，但仅限于毫秒的精度。
> 
> **周期**表示以字段定义的时间段，例如 3 年 5 个月 2 天 7 小时。这与持续时间的不同之处在于它在毫秒方面是不精确的。一个周期只能通过指定它相对的瞬间（包括年表和时区）来解析为精确的毫秒数。
> 
> **持续时间**表示以毫秒为单位测量的持续时间。持续时间通常是从一个间隔中获得的。

此外，它的接口支持[AbstractInterval中定义的](http://joda-time.sourceforge.net/apidocs/org/joda/time/base/AbstractInterval.html)[重叠](http://joda-time.sourceforge.net/apidocs/org/joda/time/Interval.html#overlap%28org.joda.time.ReadableInterval%29)、[邻接](http://joda-time.sourceforge.net/apidocs/org/joda/time/Interval.html#abuts%28org.joda.time.ReadableInterval%29)、[间隙](http://joda-time.sourceforge.net/apidocs/org/joda/time/Interval.html#gap%28org.joda.time.ReadableInterval%29)等`Interval`关系方法。

您可能还想为您的方法考虑[Partial ，这在](http://joda-time.sourceforge.net/apidocs/org/joda/time/Partial.html)[此处](http://joda-time.sourceforge.net/key_partial.html)进行了一般性解释。这将对您有所帮助，因为：

> **部分**不完全指定日期时间连续体中的单个点，而是可能匹配多个点（部分 + 缺失字段 + 时区 = 即时）

## 例子

一些与您的原始问题相关的示例：

```
import static org.joda.time.DateTimeConstants.NOVEMBER;
import static org.joda.time.DateTimeConstants.WEDNESDAY;
import static org.joda.time.DateTimeFieldType.dayOfMonth;
import static org.joda.time.DateTimeFieldType.dayOfWeek;
import static org.joda.time.DateTimeFieldType.hourOfDay;
import static org.joda.time.DateTimeFieldType.monthOfYear;
import static org.joda.time.Duration.standardDays;
import static org.joda.time.Duration.standardHours;

import org.joda.time.Duration;
import org.joda.time.Partial;

public class Periods {

    public static void main(String[] args) {

        // "1 hour" (all/any 1 hour period)
        Duration d1 = standardHours(1);
        Partial p1 = new Partial();

        // "1 hour, starting 1pm" (all/any 1 hour periods that start at 1pm)
        Duration d2 = standardHours(1);
        Partial p2 = new Partial().withField(hourOfDay(), 13);

        // "1 hour, starting 1pm, on Wednesdays" (all/any 1 hour periods that start at 1pm on Eednesdays)
        Duration d3 = standardHours(1);
        Partial p4 = new Partial().withField(hourOfDay(), 13).withField(hourOfDay(), 1).withField(dayOfWeek(), WEDNESDAY);

        // "1 hour, starting 1pm, on Wednesday in November"
        Duration d4 = standardHours(1);
        Partial p3 = new Partial().withField(hourOfDay(), 13).withField(hourOfDay(), 1).withField(dayOfWeek(), WEDNESDAY).withField(monthOfYear(), NOVEMBER);

        // "1 week, starting the first week in November"
        Duration d5 = standardDays(7);
        Partial p5 = new Partial().withField(dayOfMonth(), 1).withField(monthOfYear(), NOVEMBER);
    }

} 
```

# machine-learning - 如何传播/激发循环神经网络（RNN）？

> ID：12878089
> 
> 赞同：10
> 
> 时间：2012-10-13T23:52:06.013
> 
> 标签：machine-learning, artificial-intelligence, neural-network

我正在学习人工神经网络，并实现了一个带有几个隐藏层的标准前馈网络。现在，我试图了解循环神经网络 (RNN) 在实践中的工作原理，并且在激活/传播如何通过网络流动时遇到了麻烦。

在我的前馈中，激活是神经元的简单逐层放电。在循环网络中，神经元连接回之前的层，有时还连接到自身，因此传播网络的方式必须不同。麻烦的是，我似乎无法找到传播究竟是如何发生的解释。

对于这样的网络，它是如何发生的：

```
Input1 --->Neuron A1 --------->  Neuron B1 ---------------------> Output
                ^                   ^     ^      |
                |                   |     --------
                |                   |
Input2 --->Neuron A2 --------->  Neuron B2 
```

我想象这将是一个滚动激活，随着神经元的阈值将神经元放电降低到 0 逐渐下降，就像在生物学中一样，但似乎有一种计算效率更高的方法可以通过导数来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T16:41:36.353

我想我现在掌握了传播循环网络与前馈网络的基本原理：明确的时间步长。

在前馈中，传播是逐层进行的，因此第 1 层神经元首先触发，然后是第 2 层、第 3 层等，因此传播是一个神经元激活刺激将其作为输入的神经元中的激活。

或者，我们可以将传播视为在任何给定时间点其输入处于活动状态的神经元将被触发。因此，如果我们有一个时间 t=0，第 1 层神经元处于活动状态，那么在下一个时间 t=1，下一层第 2 层将激活，因为第 2 层中的神经元将第 1 层中的神经元作为输入。

虽然思维上的差异可能看起来像语义，但对我来说，弄清楚如何实现循环网络至关重要。在前馈中，时间步长是隐含的，代码依次通过神经元层，像倒下的多米诺骨牌一样激活它们。在循环网络中，尝试下降多米诺骨牌的激活方式，每个神经元都指定它接下来激活的神经元，这对于大型复杂网络来说将是一场噩梦。相反，在给定时间 t 轮询网络中的非常神经元，以查看它是否根据其输入激活是有意义的。

当然有许多不同类型的循环神经网络，但我认为正是这个关键的显式时间步长才是循环网络传播的关键。

我想知道的微分方程部分是否会发挥作用，如 0.2、0.1、0.05 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T16:59:14.077

对于不同的时间步长 t=t0, t1, t2...tN 给出输入信号 s(t)。在循环层中，输入来自输入信号以及网络的*状态*，即*前一个*时间步的激励水平。所以你必须从输入信号和*之前*的内部状态（循环神经元的激发水平）更新内部状态。

# php - 对不同列的值求和

> ID：12878090
> 
> 赞同：0
> 
> 时间：2012-10-13T23:52:09.107
> 
> 标签：php, sum

我在使用 php.ini 将列中的值相加时遇到问题。这些值是从复选框发送的，我只想计算从单位列中选中的值。这是我的代码：

```
<?php
$id = $_POST['course'];
foreach($id as $value)
{
    //echo $value; 
    $query = " SELECT * FROM french  WHERE id= $value ";
    $result = mysql_query($query) or die('Error, query failed');
    while ($row = mysql_fetch_array($result))  {  
    $id = $row['id'];
    $course = htmlspecialchars($row['course_name']);
    $code = htmlspecialchars($row['course_code']);
    $unit = $row['unit'];
    $status = $row['status'];
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T01:22:57.537

你在这样尝试吗？获取表单复选框的表单数组并通过 ID 检查数据库？

HTML 表格

```
Check 1 <input type="checkbox" name="val[]" />
Check 2 <input type="checkbox" name="val[]" /> 
```

PHP 结果

```
$val = $_POST['val'];
$count = count($val);
foreach ($val as $val_res)
{
    $query = 'SELECT * FROM french WHERE id='.$val_res;
} 
```

# javascript - 尝试将 ruby 脚本移植到 rails 应用程序，得到未初始化的常量错误

> ID：12878094
> 
> 赞同：0
> 
> 时间：2012-10-13T23:53:21.027
> 
> 标签：javascript, ruby-on-rails, json

我对 Rails 不是很有经验，但我之前已经在几个应用程序中使用过它。这个应用程序是不同的，因为我想将一个 ruby​​ 脚本移植到一个 rails 应用程序并且我遇到了几个问题，我很确定我会以错误的方式去做，所以想问一些建议。

该脚本生成一些方程式，我希望控制器只调用一个助手（或其他东西）来使用我的脚本生成方程式列表，然后将它们作为 JSON 或我可以在视图中使用 JS 玩弄的东西传递。我尝试简单地将脚本文件复制到 helpers 文件夹，但是当我尝试通过我在控制器中创建的新路由来初始化它们时，它给出了这个错误：NameError（未初始化的常量 UsersController::EquationSettings）。我认为它可能期望我的模型包含所有这些对象。

**代码片段：**

新的控制器动作在 users_controller 中（它现在有自己的路由 - 希望它只是将 equation_list 和用户传递到我将处理所有显示的视图）：

```
def list_equations
    @user = User.find(params[:id])

    equation_settings = EquationSettings.new 10
    equation_list_generator = EquationList.new equation_settings
    @equation_list = equation_list_generator.generate

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @user, json: @equation_list }
    end
  end 
```

**文件夹结构：** app/controllers/users_controller.rb（上面提到的控制器）app/helpers/equation_helpers/（这里有EquationSettings和EquationList rb文件）

一旦这个 @equation_list 被传递给视图，我只想能够像访问任何其他 JSON 哈希一样访问它。对任何建议都持开放态度，如果我似乎完全以错误的方式去做这件事，请尝试为我指明正确的方向。感谢所有读者的时间，

——安东尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T00:18:22.823

根据您的代码片段猜测，您可能需要更改方法。一些建议/指针：

1.  看起来您正在尝试使用帮助程序*类*，但在 Rails 中，帮助程序应该是**模块**，而不是实例化，而是简单地在视图中使用它们的方法。例如，`app/helpers/stark_helper.rb`你会想要：

    ```
    module StarkHelper
      def use_honor
        # winter is coming
      end
    end 
    ```

    这将`use_honor`在您看来可用。

2.  辅助方法自动在*视图*中可用，但在控制器中不可用。要在控制器中使用辅助方法（*不推荐；这样做会违反 MVC 模式*）**，您需要**在控制器类中显式包含辅助方法，例如：

    ```
    class BaratheonController < ApplicationController
      include BaratheonHelper

      # stuff
    end 
    ```

3.  在自动加载项目文件时，例如帮助程序，**Rails*期望*文件夹结构和文件名反映其中定义的模块和类的名称**。例如，如果在`app/helpers/lannister.rb`中定义了`module LannisterHelper`; ，Rails 将不会加载您的文件。您需要将该文件名更改为`lannister_helper.rb`. ( `lannister_helper.rb`-> `LannisterHelper`)

4.  我提到的自动加载的另一个重要方面是**子文件夹应该反映子类和子模块**。因此，如果您有`app/helpers/greyjoy_helper/greyjoy_boat_names.rb`，该文件将需要具有以下定义：

    ```
    module GreyjoyHelper
      module GreyjoyBoatNames
        # stuff
      end
    end 
    ```

# python - 如何使用 wxPython 可靠地将文本附加到文本框的末尾？

> ID：12878096
> 
> 赞同：0
> 
> 时间：2012-10-13T23:53:32.780
> 
> 标签：python, user-interface, wxpython, wxwidgets

编辑2：解决了！我不知道发生了什么变化或为什么发生了变化，但现在即使是 RichTextCtrl 也可以可靠地附加。尽管如此，我还是在下面留下了旧消息。

所以我正在使用 wxPython 在 python 中编写一个 GUI。此 GUI 的主要元素之一是文本框。

我需要的功能：

1.  能够可靠地将文本附加到文本框的末尾。
2.  防止用户编辑文本框
3.  垂直滚动条
    我想要的功能：
4.  即使附加更多行，用户也可以选择文本
5.  文字颜色可以更改

考虑到这一点，我尝试使用wxPython 提供的[RichTextCtrl 。](http://wxpython.org/docs/api/wx.richtext.RichTextCtrl-class.html)但是，似乎没有办法可靠地将文本添加到文本框的末尾。AppendText 方法不可靠。如果我在以这种方式添加几行的同时单击文本框中的一个位置，则很可能会在我移动光标的任何位置插入一行或多行。

有人对如何可靠地将文本附加到 RichTextCtrl 有任何建议吗？每次我想附加一些东西时，我也许可以清除它并用新文本替换它的所有文本，但我担心这会对性能造成严重影响。如果有更适合此的不同文本控件，请提出建议。

编辑：使用常规 TextCtrl 可靠地附加。RichTextCtrl 仍然没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:38:31.013

AppendText 在带有 wxPython 2.9 的 Windows 上为我工作。如果你想阻止用户编辑，你需要使用 wx.TE_READ_ONLY 样式标志。要使垂直滚动条出现，请添加 wx.TE_MULTILINE 标志。

wxPython 演示展示了如何更改文本颜色。基本上，您以编程方式选择一个范围并为该选择设置样式/字体。可能无法在附加时选择文本。在用户完成选择或跟踪用户选择的内容后，您可能必须为追加和追加设置某种缓冲区，追加然后重新选择。

# google-chrome-extension - Chrome 扩展只打开最后分配的 url

> ID：12878100
> 
> 赞同：0
> 
> 时间：2012-10-13T23:53:37.663
> 
> 标签：google-chrome-extension

我有一个 chrome 扩展浏览器操作，我想列出一系列链接，并在当前选项卡中打开任何选定的链接。到目前为止，我所拥有的是这个，使用 jquery：

```
var url = urlForThisLink;
var li = $('<li/>');
var ahref = $('<a href="#">' + title + '</a>');
ahref.click(function(){
    chrome.tabs.getSelected(null, function (tab) {
        chrome.tabs.update(tab.id, {url: url});
    });
});
li.append(ahref); 
```

它部分有效。它确实导航当前选项卡，但只会导航到最后以这种方式创建的任何链接。我怎样才能为一系列迭代的链接做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T08:37:05.287

@jmort253 的回答实际上很好地说明了您的错误可能是什么。尽管是在`for`循环内声明的，`url`但它具有函数范围，因为它是用`var`. 因此，您的单击处理程序闭包绑定到`for`循环外部范围的变量，并且闭包的每个实例都使用相同的值，即。最后一个。

一旦 Chrome 支持该`let`关键字，您就可以使用它来代替它，`var`并且它会正常工作，因为`url`它将被限制在`for`循环体中。同时，您必须通过在函数中创建闭包来创建新范围：

```
function makeClickHandler(url) {
    return function() { ... };
} 
```

在`for`循环内部说：

```
for (var i = 0; i < urls.length; i++) {
    var url = urls[i]; 
    ...    
    ahref.click(makeClickHandler(url));
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T01:50:06.380

在您的代码示例中，您似乎只有一个链接。相反，让我们假设您有一个实际的链接集合。在这种情况下，您可以使用 for 循环来遍历它们：

```
// collection of urls
var urls = ["http://example.com", "http://domain.org"];

// loop through the collection, for each url, build a separate link.
for(var i = 0; i < urls.length; i++) {

    // this is the link for iteration i
    var url = urls[i]; 

    var li = $('<li/>');
    var ahref = $('<a href="#">' + title + '</a>');
    ahref.click( (function(pUrl) {
        return function() {
            chrome.tabs.getSelected(null, function (tab) {
                chrome.tabs.update(tab.id, {url: pUrl});
            });
        }
    })(url));
    li.append(ahref);
} 
```

在编写原始答案时，我完全忘记了范围，因此我根据 Matthew Gertner 的答案对其进行了更新以使用闭包。基本上，在 click 事件处理程序中，我现在将 url 变量传递给一个匿名 1 参数函数，该函数返回另一个函数。返回的函数使用传递给匿名函数的参数，因此其状态不受 for 循环的下一次迭代将更改 url 的值这一事实的影响。

# php - 在 Symfony 2.1 中渲染树枝模板

> ID：12878105
> 
> 赞同：0
> 
> 时间：2012-10-13T23:54:03.887
> 
> 标签：php, symfony, symfony-2.1

我正在将我的应用程序迁移到 Symfony 2.1，但我遇到了一个大错误。我有一个命令调用模板服务来呈现树枝模板。代码 +- 是：

```
 $content = $this->getContainer()->get('templating')->render('XBundle:Pdf:x.pdf.twig', array(
            'variablea' => '',
            'variableb' => ''
 )); 
```

它在 Symfony 2.0.X 中运行没有任何问题。但是在迁移到 Symfony 2.1 之后，当调用那段代码时，就会发生异常：

> 致命错误：在第 49 行的 /vendor/symfony/assetic-bundle/Symfony/Bundle/AsseticBundle/Factory/Resource/FileResource.php 中调用未定义的方法 Symfony\Bundle\FrameworkBundle\Templating\Loader\TemplateLocator::isFresh()

我在 14 天前在 github 上的 symfony/asseticbundle 跟踪器中报告过，没有人回答，这让我觉得我是这里的问题......（[https://github.com/symfony/AsseticBundle/issues/122](https://github.com/symfony/AsseticBundle/issues/122)）

我究竟做错了什么？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T10:30:25.550

您是否清除了缓存 ( `php app/console cache:clear`) 并重建了引导文件？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T10:32:36.560

这里有一些建议：

*   检查您是否使用了正确版本的 Symfony 包。将 composer.json 文件中的包版本与默认 Symfony 2.1 发行版中的版本进行比较： [https ://github.com/symfony/symfony-standard/blob/v2.1.2/composer.json](https://github.com/symfony/symfony-standard/blob/v2.1.2/composer.json)

*   确保您的 Symfony 2.1 安装没有仍在使用 Symfony 2.0 缓存文件。如果您对此不确定，请删除缓存文件夹内容。在您的项目根目录中执行`rm -rf app/cache/*`并设置适当的权限，如文档中所述： http: [//symfony.com/doc/current/book/installation.html#configuration-and-setup](http://symfony.com/doc/current/book/installation.html#configuration-and-setup)

# html - 当用户在页面上复制文本时，我可以将文本添加到未复制的 HTML 中吗？

> ID：12878108
> 
> 赞同：3
> 
> 时间：2012-10-13T23:54:51.303
> 
> 标签：html, copy-paste

我正在编写一个 Javascript 程序，可以将一些输入漂亮地打印为 HTML。作为漂亮打印的一部分，我添加了一些不属于原始输入的文本（例如注释、行号等）。但是当用户从页面复制时，它是一堆乱码，不是以原始格式有效。有没有办法防止我添加的文本被复制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T00:08:30.797

您可以从 pastebin 中“窃取”解决方案。他们有两个版本的代码：一个带有漂亮的打印，另一个在可滚动文本框中的漂亮打印文本下方，没有漂亮打印和其他编辑的代码。

# xcode - UITableView 变得无响应

> ID：12878109
> 
> 赞同：3
> 
> 时间：2012-10-13T23:54:56.533
> 
> 标签：xcode, uitableview, css-selectors, subviews

[UITableViewCell 变得无响应](https://stackoverflow.com/questions/9703773/uitableviewcell-becomes-unresponsive)这是一个非常不同的问题，但解决方案非常不同。

我的 tableView 是 UIViewController 中的子视图，最初工作正常，我可以选择表中的各个行。However, I have created my own popup when a row is selected (the popup is a UIView) that appears towards the bottom of the screen. 在弹出这个窗口时，我还创建了另一个 UIView，它覆盖了弹出窗口后面的屏幕，它使背景变暗。发生的第三件事是我创建了一个 UITapGestureRecogniser 来跟踪用户的点击，如果他们在 UIView 之外点击，则删除两个 UIView 和 TapGestureRecogniser 并调用 deselectRowAtIndex... 方法。

但是，此时我无法使用 tableView，因为我希望能够在 tableView 中选择不同的字符串并再次出现弹出窗口（弹出窗口最终将包含使用户能够移动到不同的链接视图控制器）。

我试图重新加载数据，删除 tableview 并替换它，编辑 didSelectRowAtIndex，删除 deselectRowAtIndex 方法，但是我尝试过的任何东西似乎都不起作用，我在 stackoverflow 上找不到任何东西，因为我的问题似乎很具体（虽然如果那里有什么东西，我很抱歉）。

我将添加我的代码的一些部分，但是，我不确定问题出在哪里，并且我可能没有复制正确的部分。

移除开销是来自 tapGesture 的选择器方法

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    if(_popOverView == nil)
    {
    _popOverView = [[UIView alloc]initWithFrame:CGRectMake(20, 200, 280, 150)];

    _popOverView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"wood.jpeg"]];
    }
    if(_mask == nil)
    {
       _mask    = [[UIView alloc] initWithFrame:self.view.frame];
        [_mask setBackgroundColor:[UIColor colorWithWhite:0.0 alpha:0.78]];
    }

    if (_tapDetector == nil)
    {
        _tapDetector= [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(removeOverHead:)];
    }

    [self.view addSubview:_mask];
    [self.view addSubview:_popOverView];
    [self.view addGestureRecognizer:_tapDetector];

}

-(void) removeOverHead:(UITapGestureRecognizer*) sender
{

    CGPoint locationOfTap = [_tapDetector locationInView:self.view];

    if (locationOfTap.y < (200 + 150) && locationOfTap.y > 200 && locationOfTap.x > 20 && locationOfTap.x < (20 + 280) ) {

     NSLog(@"%f,%f",[_tapDetector locationInView:self.view].x,[_tapDetector locationInView:self.view].y);

    }

    else
    {

        [_mask removeFromSuperview];
        [_popOverView removeFromSuperview];
        [_tapDetector removeTarget:self action:@selector(removeOverHead:)];

        /*this idea doesn't work :(
         [self.tableView removeFromSuperview];
        [self.view addSubview:_tableView];*/

    }
} 
```

我真的希望答案在这里并且非常简单，并提前感谢您抽出时间阅读本文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-02T21:58:07.050

解决了！很抱歉浪费您的时间。这是手势识别器的错误删除方法。我换了

```
[_tapDetector removeTarget:self action:@selector(removeOverHead:)] 
```

和

```
[self.view removeGestureRecognizer:_tapDetector] 
```

因为 UIGestureRecogniser 徘徊并阻碍了 tableView ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T00:09:26.423

`NSLog()`如果你在那个 remove 方法的块内设置一个断点`else`，你会进入它吗？

听起来您的 if 语句可能已关闭。你应该使用`CGRectContainsPoint()`. 但是，如果我理解正确，当用户点击变暗的背景视图时，您会尝试关闭所有内容。您可以将此视图设置为按钮，也可以将触摸的视图指针与指向背景视图的指针进行比较。

# couchdb - couchdb -- 通过时间查询（修订）

> ID：12878114
> 
> 赞同：0
> 
> 时间：2012-10-13T23:56:00.653
> 
> 标签：couchdb

我有一个存储文章的 couchdb 数据库。

我忘记存储我的文章的创建日期，例如：没有`created_at`，但只有一个`updated_at`

我想检索最旧的文章，我的意思是第一个**创建**的文章。

由于文章有修订，我想我可以查询我`updated_at`所有文章的每个第一次修订，从而推断出第一篇文章的创建时间？

是否可以使用 couchdb 进行这样的查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T00:20:14.863

不，CouchDB 修订版与版本控制系统中的修订版不同。该`_rev`字段是一个[MVCC](http://en.wikipedia.org/wiki/Multiversion_concurrency_control)令牌，有助于解决写入冲突并达到[最终一致性](http://guide.couchdb.org/draft/consistency.html)。事实上，CouchDB 存储了以前的文档修订，但它们不能通过视图或其他设计函数访问，它们也会在下次数据库压缩时被删除，并且它们的数量受[/db/_revs_limit](http://wiki.apache.org/couchdb/HTTP_database_API#Accessing_Database-specific_options)选项的限制。

您可以尝试恢复以前的`updated_at`字段值并将最旧的值设置为`created_at`字段。它可以简单地用[couchdb-python](http://code.google.com/p/couchdb-python)完成：

```
import couchdb
server = couchdb.Server()
db = server['my_db']
for idx in db:
    doc = db[idx]
    for olddoc in db.revisions(idx):
        # skips all revisions, we interested in last one as oldest
        pass
    doc['created_at'] = olddoc['updated_at']
    db.save(doc) 
```

# javascript - 从查询中读取行时如何避免超时（Phonegap + Javascript）

> ID：12878115
> 
> 赞同：2
> 
> 时间：2012-10-13T23:56:17.880
> 
> 标签：javascript, loops, cordova, crash, timeout

我正在尝试在字符串中插入大约 58000 行查询。但是在 8000 左右的行之后，我得到一个超时错误。

我已经尝试过使用 SetTimeout 函数，但它没有用。

检查我正在处理的代码：

```
function onQuerySuccess(tx, results) {
  console.log("Entering onQuerySuccess");
  if(results.rows) {
    console.log("Rows: " + results.rows.length);
    var len = results.rows.length;

    if(len > 0) {

    store_html(results, 0);

    console.log("Finished Reading Rows: " + len);       
    saveNotes();
    console.log("Finished Saving Notes");

} else {
  //This should never happen
  console.log("No rows.");
    }
  } else {    
        alert("No records match selection criteria.");
      }
      console.log("Leaving openView");

function store_html(results, rows_complete){
   rows_complete=store_html_input(results, rows_complete);
   console.log("Returning row:" + rows_complete);

   if (rows_complete<results.rows.length)
   {
      setTimeout(store_html(results, rows_complete), 50);
   }

}

function store_html_input(results, rows_complete){
  for(var i = rows_complete; i < rows_complete+100; i++) {
            gpsTextFile = gpsTextFile + results.rows.item(i).section + ' ' +     results.rows.item(i).timestamp + ' ' +                             results.rows.item(i).latitude + ' ' +
            results.rows.item(i).longitude + ' ' + results.rows.item(i).acx + ' ' +     results.rows.item(i).acy + ' ' +
            results.rows.item(i).acz + ' ' + results.rows.item(i).speed;
            gpsTextFile = gpsTextFile + "\n\r";
  }
  return i;
} 
```

所以.. 我得到“Javascript 执行超出超时”。

感谢您的任何帮助！

最好的祝福。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T02:03:42.570

您需要将您的更改`setTimeout()`为不立即执行该功能。从此改变：

```
setTimeout(store_html(results, rows_complete), 50); 
```

对此：

```
setTimeout(function() {store_html(results, rows_complete)}, 50); 
```

正如您之前所拥有的那样，它会立即执行`store_html(results, rows_complete)`并将返回值传递给 `setTimeout() ，这不会延迟任何事情。这是一个常见的错误（我今天回答[的第二个问题）。](https://stackoverflow.com/questions/12877722/is-it-possible-to-use-jquerys-when-without-an-ajax-call/12877736#12877736)

# dart - 真正令人困惑的错误：“屏幕”类型不是“功能结果”的“屏幕”类型的子类型

> ID：12878118
> 
> 赞同：2
> 
> 时间：2012-10-13T23:56:46.807
> 
> 标签：dart

嗨，我正在编写一个 Dart 应用程序，但出现错误：

```
type 'Screen' is not a subtype of type 'Screen' of 'function result'. 
```

我真的不知道实际的错误是什么？

我的代码如下：

```
class CanvasManager {
  Map<String, Screen> _canvases = new Map<String, Screen>();
  CanvasManager (Map<String, CanvasElement> reqCanvas, int sizeX, int sizeY, bool fullscreen) {
    reqCanvas.forEach((k,v) {
      _canvases[k] = new Screen.create(v, sizeX, sizeY, fullscreen);
    });
  }
  Screen getCanvas(String c) {
    if (_canvases.containsKey(c)) {
    return _canvases[c];
    }
    else throw "No such canvas with key ${c}";
  }
} 
```

出于某种原因，当我实例化该类时，我得到了错误。

需要注意`Screen`的是我也创建了一个类。由于我完全感到困惑，我不知道它是否也会通过为您提供该课程来帮助您。它有点长，所以我会粘贴它： http: [//pastebin.com/KvZ54yPe](http://pastebin.com/KvZ54yPe)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T00:49:17.797

修复！

Screen 已经是 dart:html 中的类名。编译器确实应该告诉您是否重用了带有某种警告的类名，但事实并非如此。

# php - 调用未定义函数 Â ()

> ID：12878121
> 
> 赞同：3
> 
> 时间：2012-10-13T23:56:55.413
> 
> 标签：php, laravel

在这个美妙的夜晚，我在使用 laravel 时偶然发现了这个我以前从未见过的奇怪错误。我只是循环遍历一些数组并尝试在视图文件中打印出一些值。

错误：

```
Unhandled Exception

Message:

Error rendering view: [controller.index]

Call to undefined function Â ()
Location:

/web/storage/views/7b064aafcdba902ea2c593167b6df491 on line 4 
```

编码：

```
@section('content')
    <?php $i = 0; $current = 0 ?>
    @foreach($data as $date => $episodes)
        @if($i == 0 || ($i % 5 == 7 && $i == $current + 1))
            <tr>
            <?php $current = $i; ?>
        @endif

        @foreach($data as $day)
            <td>
                @foreach($day as $episode)
                    {{ $episode->title }}
                @endforeach
            </td>
        @endforeach

        @if($i % 5 == 7 && $i == $current + 7)
            <tr>
            <?php $current = $i; ?>
        @endif
        <?php $i++; ?>
    @endforeach
@endsection 
```

和编译版本：

```
<?php \Laravel\Section::start('content'); ?>
    <?php $i = 0; $current = 0 ?>
    <?php foreach($data as $date => $episodes): ?>
        <?php if($i == 0 || ($i % 5 == 7 && $i == $current + 1)): ?>
            <tr>
            <?php $current = $i; ?>
        <?php endif; ?>

        <?php foreach($data as $day): ?>
            <td>
                <?php foreach($day as $episode): ?>
                    <?php echo  $episode->title ; ?>
                <?php endforeach; ?>
            </td>
        <?php endforeach; ?>

        <?php if($i % 5 == 7 && $i == $current + 7): ?>
            <tr>
            <?php $current = $i; ?>
        <?php endif; ?>
        <?php $i++; ?>
    <?php endforeach; ?>
<?php \Laravel\Section::stop(); ?> 
```

这可能是一个简单的解决方案，但我在 Google 上找不到任何好的结果。帮助我理解这个错误！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T01:06:58.053

您删除的*空格不是空格*。它实际上是一个**不间断的空格**（U+00A0）。赠品是“Â”，当编码为 UTF-8 但被误解为 Latin-1 时，它显示为 U+0080 和 U+00BF 之间字符的第一个字节。由于某种原因，PHP 编译器不认为它是空格，因此尝试将其用作普通标识符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T00:55:04.280

这显然是一个编码问题，它是如何成为一个大问题的（因为我只在 UTF-8 中工作）。

![编码问题](../Images/7b6d5fff6d633d804450e406bd67e03f.png)

删除了 OR 语句 ( || ) 之后的空格 (^)，现在它可以完美运行。

# javascript - 创建唯一变量

> ID：12878122
> 
> 赞同：6
> 
> 时间：2012-10-13T23:57:10.500
> 
> 标签：javascript, jquery, paperjs

我在 Javascript 方面的基础并不是最强的，我很好奇其他人将如何应对我为自己创造的当前挑战。

我在玩 paper.js

下面的代码创建了这个![截屏](../Images/94859d9f255bd6bea757d355c8e716ba.png)

眼睛对鼠标事件的反应方式与此处的眼睛相同（从该代码中学习）— www.arc.id.au/XEyes.html

这是我所拥有的：

```
// Eye position center
eCntrX = 100
eCntrY = 100

var topLid = new Path()
topLid.add(new Point(eCntrX - 60, eCntrY))
topLid.add(new Point(eCntrX, eCntrY - 28))
topLid.add(new Point(eCntrX + 60, eCntrY))
topLid.add(new Point(eCntrX, eCntrY + 28))

topLid.strokeWidth = '6'
topLid.strokeColor = '#000'
topLid.closed = true
topLid.smooth()

var iris = new Path.Circle(eCntrX, eCntrY, 24)
iris.fillColor = '#6CE0FF'
iris.strokeWidth = '6'
iris.strokeColor = '#000'

var pupil = new Path.Circle(eCntrX, eCntrY, 15)
pupil.fillColor = '#000'

var glint = new Path.Circle(eCntrX, eCntrY, 5)
glint.fillColor = '#fff'
glint.position = new Point(eCntrX + 6, eCntrY - 6)

var ball = new Group([iris, pupil, glint])

function onMouseMove(event) {

  // Cursor position
  var csrX = event.point.x
  var csrY = event.point.y

  // Ball position
  var ballX = ball.position.x
  var ballY = ball.position.y

  // Displacement
  var dx = csrX - ballX
  var dy = csrY - ballY

  //Radius
  var r = 5

  //Pythagerous thereom calcs. R
  var R = Math.sqrt(dx*dx+dy*dy)

  x = dx*r/R
  y = dy*r/R

  ball.position = new Point(eCntrX + x, eCntrY + y)

  // console.log('x:' + x + 'y:' + y)

} 
```

我希望用眼睛填满整个页面。我的最终目标是创建这样的东西：

![最终结果](../Images/c1d3d33717ed98ad2ff350b39355d6a2.png)

我的问题是，创建交互式多只眼睛的最佳方法是什么。

我一直在玩'for'，但 onMouseMove 函数只适用于最后创建的 Eye。

也一直在看 paperjs item.clone — paperjs.org/reference/item#clone

还是我为每只眼睛创建独特的变量的问题？

这是按要求提供的代码：

```
for(var i = 0; i < 10; i++){

  // Eye position center
  // 100, 300, 500, 600
  eCntrX = 100 * i + 100
  eCntrY = 100

  var topLid = new Path()
  topLid.add(new Point(eCntrX - 60, eCntrY))
  topLid.add(new Point(eCntrX, eCntrY - 28))
  topLid.add(new Point(eCntrX + 60, eCntrY))
  topLid.add(new Point(eCntrX, eCntrY + 28))

  topLid.strokeWidth = '6'
  topLid.strokeColor = '#000'
  topLid.closed = true
  topLid.smooth()

  var iris = new Path.Circle(eCntrX, eCntrY, 24)
  iris.fillColor = '#6CE0FF'
  iris.strokeWidth = '6'
  iris.strokeColor = '#000'

  var pupil = new Path.Circle(eCntrX, eCntrY, 15)
  pupil.fillColor = '#000'

  var glint = new Path.Circle(eCntrX, eCntrY, 5)
  glint.fillColor = '#fff'
  glint.position = new Point(eCntrX + 6, eCntrY - 6)

  var ball = new Group([iris, pupil, glint])

}

function onMouseMove(event) {

    // Cursor position
    var csrX = event.point.x
    var csrY = event.point.y

    // Ball position
    var ballX = ball.position.x
    var ballY = ball.position.y

    // Displacement
    var dx = csrX - ballX
    var dy = csrY - ballY

    //Radius
    var r = 5

    //Pythagerous thereom calcs. R
    var R = Math.sqrt(dx*dx+dy*dy)

    x = dx*r/R
    y = dy*r/R

    ball.position = new Point(eCntrX + x, eCntrY + y)

    console.log('x:' + x + 'y:' + y)

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T00:27:16.217

您需要创建一个包含所有眼睛的变量，然后在 mousemove 事件中循环遍历该变量中的元素并应用逻辑依次定位每个眼睛。

```
var eyeballs = [];
for (...) {
   .... 
   //var ball = new Group([iris, pupil, glint])
   eyeballs.push(new Group([iris, pupil, glint]));
}

function onMouseMove(event) {
    for (var i = 0, len = eyeballs.length; i < len; i++) {
        var ball = eyeballs[i];
        ...
        ball.position = new Point(eCntrX + x, eCntrY + y);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T00:36:11.367

我对 Paper.js 不熟悉，但我至少可以为您提供有关如何围绕它构建框架的想法。

基本上，你需要一个眼球工厂。一种制造眼球物体并将它们扔回你的东西。因此，您可以将它们挂在令人毛骨悚然的眼球墙上。

下面的代码示例不会完全起作用，您必须插入细节，但应该很容易理解。

```
var Eyeball = function(params){

    // Eye position center
    var eCntrX = params.x,
        eCntrY = params.y;

    var topLid = new Path()
    topLid.add(new Point(eCntrX - 60, eCntrY))
    topLid.add(new Point(eCntrX, eCntrY - 28))
    topLid.add(new Point(eCntrX + 60, eCntrY))
    topLid.add(new Point(eCntrX, eCntrY + 28))

    topLid.strokeWidth = '6'
    topLid.strokeColor = '#000'
    topLid.closed = true
    topLid.smooth()

    var iris = new Path.Circle(eCntrX, eCntrY, 24)
    iris.fillColor = '#6CE0FF'
    iris.strokeWidth = '6'
    iris.strokeColor = '#000'

    var pupil = new Path.Circle(eCntrX, eCntrY, 15)
    pupil.fillColor = '#000'

    var glint = new Path.Circle(eCntrX, eCntrY, 5)
    glint.fillColor = '#fff'
    glint.position = new Point(eCntrX + 6, eCntrY - 6)

    var ball = new Group([iris, pupil, glint]);

    //listen for the current mouse coordinates and update
    document.addEventListener('mousemove', function(event){

        // Cursor position
        var csrX = event.x,
        csrY = event.y;

        // Ball position
        var ballX = ball.position.x
        var ballY = ball.position.y

        // Displacement
        var dx = csrX - ballX
        var dy = csrY - ballY

        //Radius
        var r = 5

        //Pythagerous thereom calcs. R
        var R = Math.sqrt(dx*dx+dy*dy)

        x = dx*r/R
        y = dy*r/R

        ball.position = new Point(eCntrX + x, eCntrY + y)

    },false);

}

var eye = new Eyeball({x:100,y:100}); //if you want/need to pass in parameters for new Eyeballs like color or shape or whatever, you can define them in this object then access them in 'params' inside the Eyeball constructor. 
```

为您的眼球壁制作多个眼球：

```
for(var i=0; i<100; i++){
   var eye = new Eyeball({x: Math.floor(Math.random()*300), y: Math.floor(Math.random()*300)});
} 
```

在您的代码中，不会在任何地方调用 onMouseMove 函数。我不知道这是否是 Paper.js 调用的名称，还是您忘记包含更多代码。

如果您可以为我回答最后一部分，我会尝试用完整的答案来更新它。

**更新**

好的，让我们进行下一步，为您的眼球添加耳朵。顺便说一句，这简直太恶心了。

这个想法是每个眼球都是一个应该能够监听事件的对象。

paper.js 这样做的方式需要您在每个 mouseMove 事件上循环遍历所有眼球并更新定位。这可能会在每次更新期间锁定用户界面（想象一下成千上万的眼球！），因为 javascript 是单线程的。

我们要做的是让每个眼球对象直接监听“mousemove”事件，从中可以获取当前鼠标位置的 x 和 y 属性。我们通过在每个眼球内添加一个事件监听器来做到这一点。由于每个事件都将在其 Eyeball 实例的上下文中执行，因此“ball”变量对于每个事件都是唯一的。查看更新的示例代码，让我知道这一切是否有效。我很想看到一个有一百个眼球跟踪我的鼠标的示例页面。我认为...

# android - 如何在带有类 java 而不是 xml 的 android 中添加滚动条或滚动视图？

> ID：12878124
> 
> 赞同：0
> 
> 时间：2012-10-13T23:58:09.567
> 
> 标签：android, scrollbar, scrollview

如何在带有类 java 而不是 xml 这段代码的 android 中添加滚动条或滚动视图？

```
LayoutInflater inflater = (LayoutInflater)   getBaseContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
view = inflater.inflate(R.layout.srvr, null);
layout = (RelativeLayout) view.findViewById(R.id.relativeLayout1);
RelativeLayout.LayoutParams labelLayoutParams = new  RelativeLayout.LayoutParams(
LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

layout.setLayoutParams(labelLayoutParams);

labelLayoutParams = new RelativeLayout.LayoutParams(
        LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    labelLayoutParams.addRule(RelativeLayout.ALIGN_PARENT_LEFT);
    labelLayoutParams.addRule(RelativeLayout.ALIGN_PARENT_TOP);
    labelLayoutParams.leftMargin=120;

   final EditText tt = new EditText(this);
      tt.setTag(i);
      tt.setText(DisplayName_list[i].toString());
      tt.setMinWidth(230);
      tt.setMaxWidth(230);
      tt.setMaxLines(1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T02:05:07.903

据我了解，您想以编程方式创建 ScrollView。您可以将其创建为任何其他视图：

```
ScrollView sc = new ScrollView(this);
sc.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
sc.setFillViewport(true); 
```

然后你必须添加你的视图。确保您添加到 ScrollView 的视图是根视图。

```
sc.addView(ROOT_VIEW) 
```

在你的情况下 ROOT_VIEW 是一个布局，它是 RelativeLayout

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-29T20:07:40.247

包括这个作为父母

```
<ScrollView
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"> 
```

// 这里应该是你的 Layout 标签

```
</ScrollView> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-19T08:14:37.717

```
<ScrollView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:id="@+id/scrollView"
    android:layout_below="@+id/activity_main_webview"
    android:layout_alignParentLeft="true"
    android:layout_alignParentStart="true"
    android:layout_marginTop="40dp" /> 
```

# fortran - DGEMM 和数值常数作为参数

> ID：12878128
> 
> 赞同：1
> 
> 时间：2012-10-13T23:58:52.883
> 
> 标签：fortran, lapack, intel-fortran, intel-mkl

在使用 BLAS [DGEMM](http://www.netlib.org/blas/dgemm.f)矩阵乘法函数时，我注意到对于未初始化的结果矩阵 C，当我这样调用它时，我会在结果中得到 NaN：

```
DGEMM('N', 'N', M, N, K, 1.0, A, LDA, B, LDB, 0.0, C, LDC) 
```

但是，如果我事先声明 ALPHA 和 BETA：

```
REAL*8 ALPHA, BETA
PARAMETER (ALPHA=1.0)
PARAMETER (BETA=0.0)

DGEMM('N', 'N', M, N, K, ALPHA, A, LDA, B, LDB, BETA, C, LDC) 
```

然后乘法工作正常。有没有人知道为什么声明论点有效？

请注意，我使用的是 Intel Fortran 编译器及其 MKL 库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T01:04:57.387

`alpha`如果您将and`beta`作为*双精度*数值常量（例如， ）传递，它将起作用`1.d0`，但您传递的是单精度常量，并且 Fortran 77 无法知道 dgemm 的参数列表并将实数提升为双精度。（如果您使用 MKL 的 Fortran 95 接口，它可能适用于单精度常量，但我不确定）。

因为您只传递了 4 字节参数的指针，而库子例程正在查找 8 字节的值，所以其余的计算变得一团糟。

# numpy - 在 Ubuntu 10.04 上为 python 3.1.2 安装 numpy

> ID：12878134
> 
> 赞同：-1
> 
> 时间：2012-10-14T00:00:47.357
> 
> 标签：numpy, python-3.x, ubuntu-10.04

我到处搜索，但找不到合适的答案。我不知道如何安装 numpy，所以我可以在 Geany 和 python 3.1.2 中使用它。它仅适用于 python 2.6.5。我是 ubuntu 的新手。

编辑：我得到 ImportError: No module named numpy

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T00:12:56.220

如果`python 3.1.2`是通过`python3`软件包安装的，那么您可以尝试：

```
$ sudo apt-get install python3-numpy 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-27T03:10:15.773

尝试了上面的 apt-get 安装解决方案，但是没有用，*但是*pip 确实有效：

```
$ sudo pip3 install numpy 
```

此外，如果需要，这里是 pip 的[安装说明](http://pip.readthedocs.org/en/latest/installing.html)。

# php - Opencart 隐藏页面标题上的 Div - PHP

> ID：12878141
> 
> 赞同：1
> 
> 时间：2012-10-14T00:03:55.263
> 
> 标签：php, html, hide, opencart

我有一个我试图隐藏标题 DIV 的 opencart 类别页面。在所有类别和子猫中，（目前）只有一个我试图隐藏。

我使用的以下代码不起作用：

```
<?php if ($categories && $heading_title!="HEADING TITLE HERE") { ?>

    <?php elseif : ?>

<div id="headerhide" style="width:800px;">
      <h1><?php echo $heading_title; ?></h1>
    </div>

    <?php } ?>

<?php endif ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T01:13:16.423

```
<?php if ($categories && $heading_title!="HEADING TITLE HERE") {  } else {  ?>
<div id="headerhide" style="width:800px;">
    <h1><?=$heading_title?></h1>
</div>
<?php } ?> 
```

我在我的 OpenCart`information.tpl`页面上有这个设置：

```
<?
// If FAQs page or content show AJAX
// We check for case sensitive titles - the title is case sensitive
if($heading_title=="FAQs" || $heading_title=="Faqs") { ?>
<script type="text/javascript">
$(document).ready(function(){
    // ETC
});
</script>
<?
// Not the FAQs page so do nothing
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T01:23:29.167

```
<?php if ($categories && $heading_title!="HEADING TITLE HERE") { ?>

    <?php }
          else {  
    ?>

<div id="headerhide" style="width:800px;">
      <h1><?php echo $heading_title; ?></h1>
    </div>

    <?php } ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T12:30:13.290

我最近制作了一个商业 vQmod，对你有用。它称为[自定义模板](http://www.opencart.com/index.php?route=extension/extension/info&extension_id=8056)，允许您将其分配给任意数量的单独类别页面。它不仅适用于类别（制造商、产品和信息页面）。虽然一页可能有点矫枉过正，但如果您计划将来将其用于多页，我认为从长远来看会更好

# javascript - 输入提交仅在第二次单击后工作

> ID：12878143
> 
> 赞同：3
> 
> 时间：2012-10-14T00:04:27.073
> 
> 标签：javascript, jquery, html, internet-explorer

我创建了以下允许上传图片的表单，它有一个在 IE 上无法正常工作的提交按钮（它只在第二次点击后提交）：

```
 <fieldset id="form-fieldset" data-listurl="@Url.Action("Index", "Partners", new { Area = "Panel" })">
<legend></legend>

<div class="editor-label">
    @Html.LabelFor(model => model.Name)
</div>
<div class="editor-field">
    @Html.EditorFor(model => model.Name)
    @Html.ValidationMessageFor(model => model.Name)
</div>

<div class="editor-label">
    @Html.LabelFor(model => model.Logo)
</div>
<div class="editor-field">
    @if (ViewData["Logo"] != null && !String.IsNullOrWhiteSpace(ViewData["Logo"].ToString()) && File.Exists(Server.MapPath("~/Content/uploads/" + ViewData["Logo"])))
    {
        <img src="@Url.Content("~/Content/uploads/" + ViewData["Logo"])" style="max-height: 150px" />
    }
    <div id="file-upload">
        <span class="input-xlarge uneditable-input">@(ViewData["Logo"] == null || String.IsNullOrWhiteSpace(ViewData["Logo"].ToString()) ? "No files selected" : ViewData["Logo"].ToString()) </span><input type="button" class="btn btn-primary select-button" value="Selecionar" /><input type="button" class="btn remove-button" value="Remover" />
        <input type="file" name="image" id="image" style="visibility: hidden" />
    </div>@Html.HiddenFor(model => model.Logo)
</div>

<div class="form-actions">
    <input type="submit" class="btn btn-primary" value="Salvar" />
    <input type="button" class="btn" id="btnCancel" value="Cancelar" />
</div> 
```

上面的表单有一个打开文件对话框的按钮，而不是显示正常的输入文件控件。

我使用以下脚本打开文件对话框并将跨度标记内容设置为文件名。

```
 <script type="text/javascript">
    $(document).ready(function () {
        $('#btnCancel').click(function () {
            location.href = $('#form-fieldset').data('listurl');
        });

        $('#file-upload .select-button').click(function () {
            $('#file-upload input[type=file]').click();
        });

        $('#file-upload input[type=file]').change(function () {
            var entireValue = $("#file-upload input[type=file]").val();

            var fileNameOnly = entireValue.substring(entireValue.lastIndexOf('\\') + 1, entireValue.length);

            $("#file-upload span").html(fileNameOnly);
        });

        $('.remove-button').click(function () {
            $('#file-upload span').html('No files selected');
            $('#file-upload input[type=file]').val('');
        });
    });
</script> 
```

问题只发生在 IE 上（我只在 IE10 上测试过）。Firefox 和 Chrome 完美运行。

# ide - phpDesigner 8 字体渲染错误

> ID：12878144
> 
> 赞同：1
> 
> 时间：2012-10-14T00:04:43.433
> 
> 标签：ide, phpdesigner

phpDesigner 8 似乎有一个错误呈现文本。我将它与**Sublime Text 2**进行比较。

使用这些值：

![在此处输入图像描述](../Images/95d6cc9987f18b058ef061ab20c95f2f.png)

在这两个程序中，我得到了这些不同的结果：

![在此处输入图像描述](../Images/fec96447df42014e8ee1c4775499769f.png) ![在此处输入图像描述](../Images/bee4883c5ba3bb5029ed4de3dbcf9432.png)

似乎**phpDesigner 8**正在*扩展*字体，但我找不到任何允许我停止该行为的配置。

如何删除水平字体的多余空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-22T11:44:53.400

不确定您是否已解决此问题。您可以在 中进行更改，从下拉列表中进行`Tools > Preferences > Editor > Syntax Highlighters`选择，并为每个属性取消选中复选框。`PHP``Bold`

# python - Pygame draw 没有画出它应该画的东西

> ID：12878146
> 
> 赞同：0
> 
> 时间：2012-10-14T00:05:14.557
> 
> 标签：python, drawing, pygame

好的，所以我正在使用 pygame.draw 在名为 Entity 的类中制作一个简笔画：

```
class Entity: #Used with default arguments blited on a 600 by 600 pixel screen
    def __init__(self, pos=[300, 300]):
        self.pos = pos
        self.legR = [10, 25]
        self.legL = [-10, -25]
        self.armR = [0, 0]
        self.armL = [0, 0]
        self.body = [30, 5]
        self.head = [0, 0, 5]
        self.size = [60, 110]
        self.color = [0, 0, 0]
        self.image = pygame.surface.Surface(self.size)
        self.image.fill([255, 255, 255])
    def render(self, screen, frame):
        self.image = pygame.surface.Surface(self.size)
        self.image.fill([255, 255, 255])
        pygame.draw.line(self.image, self.color, [self.size[0]/2, self.size[1]/2],
                         [self.size[0]/2+self.legR[0], self.size[0]/2+self.legR[1]], 5)
        pygame.draw.line(self.image, self.color, [self.size[0]/2, self.size[1]/2],
                         [self.size[0]/2+self.legL[0], self.size[0]/2+self.legL[1]], 5)
        pygame.draw.line(self.image, self.color, [self.size[0]/2, self.size[1]/2],
                         [self.size[0]/2+self.body[0], self.size[0]/2+self.body[1]], self.body[1])
        pygame.draw.circle(self.image, self.color,
                           [self.size[0]/2+self.body[0]+self.head[0], self.size[1]/2+self.body[1]+self.head[1]],
                           self.head[2])
        #pygame.draw.line(self.image, self.color, [self.size/2
        screen.blit(self.image, self.pos) 
```

所以我运行它，它给了我这个奇怪的混乱图像，带有一堆随机方向的线条。在我看来，我不太了解这个功能。我可以举一个带有可配置关节的可渲染简笔画的例子吗？如果没有，有人可以请至少告诉我我的致命错误吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T06:17:07.710

我开始根据您的代码编写一个示例。现在它只画了两条腿和他的脊椎：

笔记：

1.  使用向量而不是元组可以让你做`return self.pos+offset`vs`return (self.pos[0]+offset[0], self.pos[1]+offset[1])`
2.  我使用相对于本地原点的偏移量来绘制。

代码：

```
import pygame
from pygame.locals import *

pygame.init()
# not normally all global, but simplified demo
color_bg = Color("gray20")    
color_fg = Color("gray80")
clock = pygame.time.Clock()   

screen = pygame.display.set_mode((600,400))

class Entity(): 
    def __init__(self, pos=(300, 300)):
        self.pos = pos
        self.armR = (10, 10)
        self.armL = (-10, 10)
        self.body = (0, -20)
        self.head_offset = self.offset(self.body)

    def offset(self, offset):
        # get offset to draw, relative stickman's hips
        return (self.pos[0]+offset[0], self.pos[1]+offset[1])

    def render(self):        
        b = self.pos
        #pygame.draw.line( screen, color_fg, (10,10), (20,30) )

        o = self.offset( self.armL )
        pygame.draw.line( screen, color_fg, b, o )

        o = self.offset( self.armR )
        pygame.draw.line( screen, color_fg, b, o )

        o = self.offset( self.body )
        pygame.draw.line( screen, Color("red"), b, o )

class Game():
    def __init__(self):
        self.e = Entity()

    def draw(self):                
            screen.fill( color_bg )

            self.e.render()            

            pygame.display.flip()            
            clock.tick(80)

    def loop(self):
        done=False

        while not done:
            events = pygame.event.get()

            for event in events:
                if event.type == pygame.QUIT: done = True
                # event: keydown
                elif event.type == KEYDOWN:
                    if event.key == K_ESCAPE or event.key == K_SPACE: done = True
                elif event.type == MOUSEMOTION:
                    self.mouse_loc = event.pos

            self.draw()

g = Game()
g.loop() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T06:36:13.040

我看到的主要问题是，您将实体大小的 x 值用作线上某个点的 y 值：

```
pygame.draw.line(self.image, self.color, [self.size[0]/2, self.size[1]/2],
                     [self.size[0]/2+self.legR[0], self.size[0]/2+self.legR[1]], 5) 
```

第三个参数中的第二个值应该是：

```
self.size[1]/2+self.legR[1] 
```

这会让你想要你想要的渲染，但我也会接受猴子的建议并组织一点并将重复的代码划分为函数。

# android - 如何保持 Intent 服务运行

> ID：12878150
> 
> 赞同：9
> 
> 时间：2012-10-14T00:05:45.567
> 
> 标签：android, service, commonsware

我有两个 Intentservice 示例。一个是commonsware book 中的Download example。另一个位于[http://www.vogella.com/articles/AndroidServices/article.html#servicecommunication_handler](http://www.vogella.com/articles/AndroidServices/article.html#servicecommunication_handler)。这两个示例都显示了服务正在执行一个有限的任务，并且它们显然都通过运行到 onHandleIntent 事件范围的末尾来破坏自己。

我正在编写的服务必须有事件并监听事物。一种是监听 GPS 运动的 LocationListener。另一个将 Posts 发送到 REST 服务并监听回复。我希望它一直运行到经过一段时间或直到它被启动它的活动告知退出。

如何保持运行？例如，我应该将 LocationListener 的实现放在哪里？谢谢，加里

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-14T10:35:24.070

> 如何保持运行？

你没有。`IntentService`旨在完成一项工作（或者如果命令恰好快速进入，则可能是队列中的一些工作），然后关闭。

> 我正在编写的服务必须有事件并监听事物。

那么你不应该使用`IntentService`. 根据需要使用常规的`Service`，带有您自己的后台线程。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-14T00:27:46.917

您可以通过以下两种方式之一实现此目的，

*   [报警管理器](http://developer.android.com/reference/android/app/AlarmManager.html)
*   [定时器任务](http://www.java2s.com/Code/Java/Development-Class/UsejavautilTimertoscheduleatasktoexecuteonce5secondshavepassed.htm)

AlarmManager 是 android 的内置类，可让您在特定时间周期内执行特定操作。

TimerTask 与 AlarmManager 做同样的事情，您可以一次又一次地重复代码的某些操作。

然而，AlarmManager 在执行中更轻，所以我建议你使用 AlarmManager 类。

创建一个获取 GPS 坐标并定期将它们发布到服务器的 AlarmManager。

看看这个 AlarmManager [Example](http://android-er.blogspot.in/2010/10/simple-example-of-alarm-service-using.html)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-14T00:31:51.287

要保持服务运行，您的服务需要`START_STICKY`在 service 方法中返回`onStartCommand()`。

这样，即使您退出活动，该服务也将运行。

**注意：** 如果服务不是前台服务，Android 仍会在一段时间后（30 分钟到 1 小时）终止服务。用于`startForeground(notification)`使其成为前景。

祝你好运

# ocaml - 如何在函数中使用 List.nth

> ID：12878152
> 
> 赞同：0
> 
> 时间：2012-10-14T00:06:00.273
> 
> 标签：ocaml

我是 OCaml 的新手。我正在尝试像 List.length 一样使用 List.nth，但它一直给我一个语法错误或抱怨与另一个文件中定义的接口不匹配。如果我使用 List.nth 注释掉，一切似乎都正常

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T00:14:03.050

除非您显示不起作用的代码，否则很难提供帮助。这是一个使用 List.nth 的会话：

```
$ ocaml
        OCaml version 4.00.0

# let x = [3;5;7;9];;
val x : int list = [3; 5; 7; 9]
# List.nth x 2;;
- : int = 7
# 
```

这是一个会话，它定义了一个使用`List.nth`. （这没什么特别的。）

```
# let name_of_day k =
    List.nth ["Mon";"Tue";"Wed";"Thu";"Fri";"Sat";"Sun"] k;;
val name_of_day : int -> string = <fun>
# name_of_day 3;;
- : string = "Thu"
# 
```

（作为旁注：使用`List.nth`通常是不合适的。找到列表的第 n 个元素所花费的时间与`n`查找列表的第 n 个元素成正比。刚开始使用 OCaml 的人们通常认为它就像访问一个数组——即恒定时间——但事实并非如此。 )

# java - 在 Java 中的类之间传递对象

> ID：12878154
> 
> 赞同：0
> 
> 时间：2012-10-14T00:06:11.217
> 
> 标签：java, class, object

我是 Java 新手，我正在做关于构建决策树的作业。经过2天的不断编码，我终于建树并手动验证。但是我坚持验证树，因为每次我尝试将“节点”对象传递给 Validator 类时，它都是空的。我尝试了各种以前的建议，但似乎没有任何效果。我需要有人指出我的错误以及为什么它是错误的。这是一小部分代码，将解释我想要实现的目标。请就我应该如何处理这个问题提出建议。

```
//Node Class to represent a node in the tree
public class DecisionTreeNode 
{
    String attribute;
    boolean isLeaf;
    DecisionTreeBranch[] branches; //Another class to represent branch from a node

    //Default constructor for a Node: With attributes, label and isLeaf condition
    public DecisionTreeNode(String attribute) 
    {
        this.attribute = attribute;
        this.isLeaf = true;
    }
        ............
}

//Tree class with logic to build the tree
public class BuildDecisionTree 
{
    public PrepareFile config; //Need this object to get a arraylist of values to construct the tree
    DecisionTreeNode root;
        BuildDecisionTree(PrepareFile config)
    {
        this.config = config;
    }
    //Construct Decision Tree
    public void buildDecisionTree() 
    {
        root = myDecisionTreeAlgorithm(config.getExamples(), config.getAttributes());
        System.out.println("\n !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!Decision tree was constructed!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n");
        root.printDecisionTree("");
    }

//This is the validator where is want both the "config" and the "root" objects

import java.util.List;

public class DecisionTreeValidator 
{
    PrepareFile config;
    DecisionTreeNode node;
    BuildDecisionTree bTree;    
    public DecisionTreeValidator(BuildDecisionTree bTree, PrepareFile config)
    {
        this.bTree = bTree;
        this.node = bTree.root; //I tried adding a getter function in BuildDecisionTree class and returned the root, even then this was null. Like below
            //this.node = bTree.buildDecisionTree(); //made the return type of the buildDecisionTree function as "DecisionTreeNode"
        this.config = config;
        this.examples = config.getExamples();
    }
    public boolean validateSingleExample(Example example)
    {

        boolean result = true;
        while(node.isLeaf == false) //THIS IS WHERE I GET THE NULL POINTER EXCEPTION
                ...........................
    }
}

//Main class
       public class PredictRestaurant 
        {
            public static void main(String[] args) 
            {
                PrepareFile config = new PrepareFile();
                BuildDecisionTree bTree = new BuildDecisionTree(config);
                DecisionTreeValidator validator = new DecisionTreeValidator(bTree, config);
                boolean isTrain = true;
                        config.setTreeParameters();
                        bTree.buildDecisionTree();
                }
       } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T01:15:38.793

我弄清楚了问题所在。它与节点为空无关。该节点不是空的。当我遍历树并点击叶节点时，我仍在检查分支。现在纠正它。它的工作完美。谢谢大家的建议。它帮助我学习。

我现在将删除树构建的“逻辑”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T01:01:07.530

您的问题是您没有`bTree.node`正确初始化。在您的`DecisionTreeValidator`构造函数中，直接在该行之后

```
this.bTree = bTree; 
```

添加行

```
bTree.buildDecisionTree(); 
```

您的代码中没有这一行，因此`bTree.node`默认为 null，因为它没有被初始化。这`this.node`在该行之后变为空

```
this.node = bTree.node; 
```

导致`null pointer exception`您稍后尝试引用`this.node`。通过此更改，您的代码应该可以工作。如果您有任何问题，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T00:09:09.750

您的节点为空，因为它的方法签名`buildDecisionTree()`是`Object`或者其他未指定的对象；方法签名`void`甚至不会编译。

您应该在那里更改您的方法以返回 type 的对象`DecisionTreeNode`。

# algorithm - 扫描线算法

> ID：12878156
> 
> 赞同：1
> 
> 时间：2012-10-14T00:06:22.930
> 
> 标签：algorithm, graphics, line, edge-detection, scanline

在实施扫描线算法时，我陷入了中途（或者你可以说一开始）。我遵循奇偶校验，即

```
for each scanline

edgeCnt = 0; 

for each pixel on scanline (l to r)

 if (oldpixel->newpixel crosses edge)

  edgeCnt ++;

// draw the pixel if edgeCnt odd

if (edgeCnt % 2)

  setPixel(pixel); 
```

假设我的三角形有顶点 A(10,10)、B(100, 100) 和 C(200, 30)。现在这个算法的问题是。点 A 无法计数，因为如果计数，则在同一水平线上没有检测到边缘，因此 A 之后的整条线将被着色。现在，如果我排除顶点，则顶点 C 之前的像素会被着色，但由于扫描不会检测到顶点，因此不会检测到 C，它将继续对线条着色，直到检测到下一条较高线条上的边缘。

有没有标准的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T02:55:45.320

如果顶点的方向发生变化，不要计算它。如果方向相同，数一下。如果这条线是水平的，请忽略它并检查下一个顶点。

# android - Future.get 阻塞了？

> ID：12878159
> 
> 赞同：3
> 
> 时间：2012-10-14T00:06:47.573
> 
> 标签：android, executorservice

参考以下代码。

```
for (Future<Long> future : list) {
            try {
                sum += future.get();
            } catch (InterruptedException e) {
                e.printStackTrace();
            } catch (ExecutionException e) {
                e.printStackTrace();
            }
        } 
```

现在当我打电话给 future.get 这会阻塞电话吗？因此，如果我在 Android 应用程序的主线程上执行此操作会导致 ANR 异常吗？我注意到也抛出了 Interrupted 异常，这是否意味着它们是在 get 函数中的线程上调用的睡眠？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T21:35:11.730

1.  是的，文档`Future.get()`说：

    > 如有必要，等待计算完成，然后检索其结果。

    因此，它将阻塞，直到计算结果可用，或者计算被中断（取消或导致异常）。

2.  如果您的计算需要很长时间才能完成，它*可能会导致 ANR。*

3.  同样，来自以下文档`Future.get()`：

    > @throws InterruptedException 如果当前线程在等待时被中断

    现在，由于您`Future.get()`从主线程调用，我怀疑是 Android 系统中断了您的主线程以试图使其再次响应。但这也可能是由您的应用程序的另一个线程引起的 - 很难说，因为您没有指定您的应用程序做什么，它创建什么线程，您何时使用 ExecutorService （如果是，哪个实现），等等。

4.  不，`FutureTask.get()`（我相信这是`Future`你正在使用的实现）不调用`Thread.sleep()`. 相反，将线程置于等待模式是通过*线程停放*完成的，这会导致它在发出信号之前不会被安排执行。如果在主线程中完成，这可能会导致 ANR 错误。有关`parking`机制的详细信息，请考虑阅读文档和[这个问题](https://stackoverflow.com/q/7497793/1820695)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-09T16:32:47.747

您可以通过调用 future.isDone() 来简单地检查未来是否“完成”。代码示例：

```
String result = "";

if (myFuture.isDone()) result = (String) myFuture.get(); 
```

您可能希望无限循环地检查它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-28T11:56:06.997

当心与`future.get()`. 如果`MainThread`、 that call`future.get()`和`WorkerThread`都是同步的（在同一个对象上），那么你会遇到死锁。

# ios - 如何仅在首次发布时显示视图？

> ID：12878162
> 
> 赞同：13
> 
> 时间：2012-10-14T00:07:49.917
> 
> 标签：ios, xcode

我使用带有故事板的 Xcode 4.5 构建了一个应用程序。应用程序第一次启动时，我希望初始视图控制器显示必须接受才能继续的条款和条件。之后，我希望应用程序启动并跳过第一个视图控制器并转到第二个。

我知道我必须使用 NSUserDefaults 类和一些效果： if ([[NSUserDefaults standard...] boolForKey:@"iHaveAcceptedTheTerms"])

但我以前从未使用过这个类，也不知道如何实现这段代码。有人可以分享如何做到这一点的细节吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-07-13T15:02:37.170

为了使这个问题保持最新，这里是已接受答案的**Swift**版本。

* * *

**步骤1**

在您的**App Delegate**中，添加以下函数。

```
func applicationDidFinishLaunching(application: UIApplication) {
    if !NSUserDefaults.standardUserDefaults().boolForKey("TermsAccepted") {
        NSUserDefaults.standardUserDefaults().setBool(false, forKey: "TermsAccepted")
    }
} 
```

如果这是第一次启动，这实际上会将您的 TermsAccepted Bool 设置为 false（因为默认情况下 Bools 为**false**）。

* * *

**第2步**

在您的根视图控制器（启动应用程序时加载的视图控制器）中，您必须有办法查看条款是否已被接受并采取相应措施。

添加以下功能。

```
override func viewDidAppear(animated: Bool) {
    if NSUserDefaults.standardUserDefaults().boolForKey("TermsAccepted") {
        // Terms have been accepted, proceed as normal
    } else {
        // Terms have not been accepted. Show terms (perhaps using performSegueWithIdentifier)
    }
} 
```

* * *

**第 3 步**

用户接受您的条件后，您希望将您的**TermsAccepted** Bool 更改为**true**。因此，在处理条款接受的方法主体中，添加以下行。

```
NSUserDefaults.standardUserDefaults().setBool(true, forKey: "TermsAccepted") 
```

* * *

我希望这有帮助！

洛伊克

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-14T00:15:52.020

你在你的 AppDelegate 中输入：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {  

//first-time ever defaults check and set
if([[NSUserDefaults standardUserDefaults] boolForKey:@"TermsAccepted"]!=YES)
{
    [[NSUserDefaults standardUserDefaults] setBool:NO forKey:@"TermsAccepted"];
} 
```

然后你在你的 rootViewController 中实现条款和条件以及接受它的方式。您必须检查条款是否被接受，例如：

```
if ([[NSUserDefaults standardUserDefaults] boolForKey:@"TermsAccepted"]){
    //proceed with app normally
}
else{
//show terms
} 
```

接受后，以下代码将更改默认设置：

```
 if(termsaccepted){
    [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"TermsAccepted"];
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-11-22T23:17:24.893

**斯威夫特 3 版本**

在 AppDelegate.swift 中：

```
func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: Any]?) -> Bool {
    if !UserDefaults.standard.bool(forKey: "Walkthrough") {
        UserDefaults.standard.set(false, forKey: "Walkthrough")
    }
} 
```

在根视图控制器中：

```
override func viewDidLoad() {
    super.viewDidLoad()
    if UserDefaults.standard.bool(forKey: "Walkthrough") {
        // Terms have been accepted, proceed as normal            
    } else {
        // Terms have not been accepted. Show terms (perhaps using 
    }
} 
```

当条款被接受或教程演练完成时：

```
UserDefaults.standard.set(true, forKey: "Walkthrough") 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-14T00:14:38.030

在您的第一个视图或委托中，它将如下所示：

```
NSUserDefaults * standardUserDefaults = [NSUserDefaults standardUserDefaults];

BOOL isAccepted = [standardUserDefaults boolForKey:@"iHaveAcceptedTheTerms"];

if (!isAccepted) {
    [self presentViewController:YOUR_TERMS_CONTROLLER animated:YES completion:nil];
} else {
    [self.navigationController pushViewController:YOUR_NORMAL_CONTROLLER animated:YES];
} 
```

不要忘记将用户响应保存在您的条款控制器上：

```
[standardUserDefaults setBool:YES forKey:@"iHaveAcceptedTheTerms"]; 
```

# git - 如何从 Git 中的失败合并中恢复

> ID：12878165
> 
> 赞同：1
> 
> 时间：2012-10-14T00:08:30.520
> 
> 标签：git, merge

我正在和朋友合作一个小项目，我们使用 Git 作为源代码版本控制。这是问题场景：

1.  我从版本 A 开始工作，并对版本 B 进行了一些本地提交。
2.  我的朋友也是从 A 开始，将版本 C 推送到中央仓库。
3.  我做了'git pull --rebase'并推送了版本B。所以远程仓库就像A->C->B。
4.  与此同时，我的朋友还在开发他推送的 C 版本。当他尝试推送版本 D 时，他做了一个失败的合并（我不知道他到底是怎么做到的）。结果是，提交 D 包含从 C->D 的更改，但丢弃了从 A->B 的更改。所以远程仓库目前看起来像 A->C->B->D，但版本 D 删除了 C->B 的所有更改

我想知道解决此失败合并的最简单方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T11:38:47.697

你的朋友也可能做的是 a `git push --force`，结果是`A-C-D`。

一种方法是让您再次访问`push --force`您的内容 ( `A-C-B`)，并让您的朋友：

*   `tmp`在他当前的工作之上结帐一个分支
*   `git fetch origin`
*   将他的`master`分支重置为`origin/master`
*   `D`从分支中挑选樱桃`tmp`回到主人（那里可能涉及合并）
*   `git push origin`

# ruby-on-rails - Rails 使用 Koala 和 RSpec 测试 Facebook 方法

> ID：12878167
> 
> 赞同：1
> 
> 时间：2012-10-14T00:08:42.373
> 
> 标签：ruby-on-rails, facebook-graph-api, rspec, rspec-rails, koala

我正在制作一个将 Facebook 信息与 Rails、Omniauth 和 Koala 一起使用的应用程序。使用[Ryan Bates Facebook Railscasts](http://railscasts.com/episodes/361-facebook-graph-api)，我在我的用户模型上使用这个 facebook 方法，从 Facebook 的 API 获取用户 uid、auth_token 等。

```
def facebook
  @facebook ||= Koala::Facebook::API.new(oauth_token)
end 
```

我还有另一种方法，它调用 facebook 方法从用户的朋友那里获取信息，让我们称之为，`facebook_friends`

在我的**UsersController**显示操作中，我有这个：

```
def show
  @user = User.find(params[:id])
  @friends = @user.facebook_friends
end 
```

所以我在我的展示模板中使用了这两个实例变量。

**使用 RSpec 编写测试**

这是我正在尝试进行的一项测试

```
feature 'As a logged out user' do
  background do
    @user = FactoryGirl.create(:user)
  end
  scenario 'redirects to root path' do
    visit user_path @user
    page.current_path.should == root_path
  end
end 
```

但是当我运行它时，我得到了这个错误：

```
1) As a logged out user redirects to root path
 Failure/Error: visit user_path @user
 Koala::Facebook::APIError:
   OAuthException: Invalid OAuth access token.
 # ./app/models/user.rb:45:in `friends_birthday'
 # ./app/controllers/users_controller.rb:7:in `show'
 # ./spec/requests/user_integration_spec.rb:22:in `block (2 levels) in <top (required)>' 
```

由于我不想在每次运行测试时都使用有效的访问令牌 **如何使用 RSpec 伪造用户模型上的 facebook 调用？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T18:58:32.223

VCR 就是答案，您可以查看关于它的优秀 railscast [http://railscasts.com/episodes/291-testing-with-vcr](http://railscasts.com/episodes/291-testing-with-vcr) 您可以在我的示例项目中找到一些示例：[https ://github.com/lucassus/locomotive /blob/master/spec/features/user_facebook_connect_spec.rb](https://github.com/lucassus/locomotive/blob/master/spec/features/user_facebook_connect_spec.rb)

# c# - VS 2010 设计器在 Windows7 中出现错误“找不到类型 XYZ”。在 XP 中运行良好

> ID：12878169
> 
> 赞同：19
> 
> 时间：2012-10-14T00:08:54.490
> 
> 标签：c#, .net, visual-studio-2010, windows-7

我在 VS 2010 C# .NET 中遇到了一个问题。我在 Windows XP 上有一个项目，其中包括表单、类和一些我自己的自定义组件。这些组件是内置 MS 组件的简单扩展（例如 DataGridViewEx 作为 DataGridView 的扩展）。在 XP 中一切正常。我正在尝试将此项目移植到 Windows 7 / x64 上的 VS 2010。我有在 Windows 7 上编译 OK 的解决方案，但是在设计模式下，当我打开一个包含自定义控件之一的表单时，我收到一个错误“找不到类型 XYZ.DataGridViewEx。请确保引用了包含此类型的程序集。XYZ 是我用于这些控件的命名空间，它与使用这些控件的表单的命名空间相同。所有这些都是同一个 VS 项目的一部分。

当我在同一个项目中打开一个不包含这些自定义控件之一的表单时，该表单在设计器中打开正常，并且我在工具箱的左侧看到了自定义控件。但是，如果我随后尝试将其中一个控件拖到该表单中，则会弹出一个错误消息框“无法加载工具箱项“DataGridViewEx”。它将从工具箱中删除。然后它会从工具箱中删除。

在 XP 的 VS 解决方案中，一切都运行良好。此问题仅出现在 Windows 7 / x64 中的 VS 解决方案中。

我不明白为什么它抱怨找不到组件，因为该组件是同一个项目的一部分。这是一个有效的做法，不是吗？

我搜索了网络/论坛，发现了“找不到类型”错误的案例，但这似乎是由不同的问题引起的，我还没有找到摆脱该错误的方法。

非常感谢任何帮助/提示！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-06-12T14:24:00.803

如果您的项目以 64 位为目标，您需要构建 32 位并在进行 GUI 编辑时选择 32 位解决方案。这是因为 studio 是 32 位的，所以无法加载 64 位控件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T18:00:21.747

查看您的参考文献并找到任何带有感叹号图标的参考文献。删除错误的引用并将它们添加回您的项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T00:17:13.760

我以前遇到过这种情况，请确保在您的 Form.Designer.cs 代码文件中，对自定义控件的每次调用都是作为绝对调用完成的。例如：

```
Namespace.CustomControl control; 
```

而不是

```
CustomControl control; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T21:21:42.590

您是否尝试过完全禁用 UAC（以管理员身份运行 IDE + 禁用 UAC 以防万一）。此外 - 始终使用 Fusion Log 来跟踪装配负载！请参阅[http://msdn.microsoft.com/en-us/library/e74a18c4(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/e74a18c4(v=vs.71).aspx)了解如何设置

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T19:30:39.667

您是否从头开始重建组件？

项目是否包括在内？

他们都在建吗？

它们是否都构建在同一个平台上（x86 与 x64）？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-03T09:33:50.470

1.  清洁溶液
2.  构建包含控件的项目
3.  将控件添加到工具箱/表单

看看这是否有效。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-07T21:45:28.243

将默认构建设置为 x86，这应该可以修复它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-03-08T00:16:09.687

对于任何有类似问题的人。我刚刚在 x86 PC 上的 VS 2013（VB 端）中遇到了这个问题。如上所述，我从“anyCPU”切换到“x86”，然后表单设计器就打开了。很简单，但如果没有上述帖子，可能不会尝试过。对于它的价值，我切换回“anyCPU”，但还没有复发......

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-07-18T11:59:32.380

我遇到了同样的错误，无法构建我的应用程序。

于是搜到这里，说要改解平台X64或者X32。但在我的情况下，解决方案平台仅显示任何 CPU 和配置管理器选项

但我只是更改解决方案配置。

> 调试 => 发布

然后

> 发布 => 调试

最后清理并重建解决方案。它对我有用！！:)

# sqlite - Sqlite ORDER BY 组的计数很慢

> ID：12878171
> 
> 赞同：3
> 
> 时间：2012-10-14T00:09:14.787
> 
> 标签：sqlite, group-by, sql-order-by

当我在查询中添加 ORDER BY 语句时，它变得非常慢。

这是我没有 ORDER BY 的查询：

```
SELECT ClientIpAddress, Agentstring, Count(ClientIpAddress) AS Count FROM LogEntries
WHERE SiteIisId = 3 AND DateTime >= '13-09-2012 00:00:00'
GROUP BY ClientIpAddress, Agentstring
LIMIT 5 
```

ET：1毫秒

现在使用 ORDER BY：

```
SELECT ClientIpAddress, Agentstring, Count(ClientIpAddress) AS Count FROM LogEntries
WHERE SiteIisId = 3 AND DateTime >= '13-09-2012 00:00:00'
GROUP BY ClientIpAddress, Agentstring
ORDER BY Count DESC
LIMIT 5 
```

东部时间：294 毫秒

我正在查询的表包含 1.380.855 行。

这是我正在使用的索引：

```
CREATE INDEX "LogEntries_MostActiveClients" ON "LogEntries" ("ClientIpAddress" ASC, "Agentstring" ASC, "SiteIisId" ASC, "DateTime" DESC) 
```

使用`EXPLAIN QUERY PLAN`Sqlite 告诉我它正在使用我的索引扫描表并`TEMB B-TREE`用于我的 Order By。

我该如何克服这个问题？显然我无法索引`Count`，那该怎么办？

太感谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T15:11:36.487

*当您单步执行结果集时，SQLite 会尝试即时*计算尽可能多的值。

因此，在您的第一个查询中，SQLite 永远不需要对表中的所有地址/代理值进行分组；一旦它通过某个索引读取了前五个`ClientIpAddress`/`Agentstring`组合的记录，它就可以停止。

在您的第二个查询中，这是不可能的：必须完全计算所有地址/代理组，然后才能对其进行排序并选择前五个。

要排序的临时结果中的记录已经在缓存中，并且比原始表中的数据小，所以我猜大部分时间不是用于排序，而是用于分组。

如果排序是问题，并且如果您估计五个最大计数有多大，您可以尝试添加一个`HAVING "Count" >= some_limit`子句来减少要排序的记录数。

您无法采取任何措施来避免分组。您可以尝试的只是通过通用优化获得小的改进，例如：

*   将 SQLite 的[页面缓存](http://www.sqlite.org/pragma.html#pragma_cache_size)增加到工作集的大小；和
*   创建一个[覆盖索引](http://www.sqlite.org/queryplanner.html#covidx)以避免在表本身中进行查找（您已经有了）。

另一种方法是预先计算此查询的值：与您的 有一个单独的表`Count`，并在您添加日志条目时更新它。这将使这些更新变慢，并且您必须确定时间戳使用的粒度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T03:21:34.913

[使用此处](http://www.sqlite.org/sqlite3-20121009.zip)的 SQLite 合并测试您的应用程序。

理查德·希普最近宣布：

> 我们最近对 SQLite 中的查询优化器进行了许多重大改进。特别是，最新的代码更好地识别何时可以通过仔细选择索引和扫描顺序来满足 ORDER BY 子句，而无需进行任何排序。这种优化可以显着提高具有大型结果集的查询的性能。

电子邮件线程在[这里](http://sqlite.1065341.n5.nabble.com/Please-test-the-latest-SQLite-enhancements-td64718.html)。

# python - Ruby中等效的Python3 Pass命令

> ID：12878175
> 
> 赞同：4
> 
> 时间：2012-10-14T00:09:34.183
> 
> 标签：python, ruby, unix, scripting, python-3.x

Python3 有一个什么都不做的*pass命令。*这个命令用在 if-constructs 中，因为 python 要求程序员至少有一个*else*的命令。Ruby 是否有等效于 python3 的*pass*命令？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T00:54:27.837

您的陈述本质上是错误的，因为**else**陈述在 Python 中不是强制性的。

**pass**语句的常见用途之一是在**try** / **except**构造中，此时可以忽略异常。

**当您定义 API 并希望推迟类/函数的实际实现时， pass**也很有用。

编辑：我没有提到的一种更常见的用法 - 定义用户异常；通常您只需覆盖名称即可将它们与标准异常区分开来。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T00:12:27.730

不，当你想要一些空的东西时，你在 Ruby 中什么也不写，因为它是空的。

```
def some_function()
end 
```

不需要任何像“通过”这样的占位符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-14T00:11:20.353

不，ruby 没有`pass`声明你根本不会写它。

```
def function
    if something == 10
    end
end 
```

相当于

```
def function:
    if something == 10:
       pass 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T00:11:06.657

我认为您在 ruby​​ 中不需要它…… if 不需要 else。

# mysql - Rails 跳过 ID，可能的数据库 MySQL 事务问题？

> ID：12878176
> 
> 赞同：2
> 
> 时间：2012-10-14T00:10:12.417
> 
> 标签：mysql, ruby-on-rails-3, transactions

我有两个运行 Ruby on Rails 的应用程序服务器共享同一个 MySQL 数据库服务器，使用 InnoDB 引擎。

有时在重负载下，我发现记录中的 ID 在表用户、X 和 Y 中被跳过并且不是连续的。

这是伪代码：

```
user = Create user x in table Users

user_x = Find user x

Insert a tuple into an auxiliary table X

Insert a tuple into an auxiliary table Y

Update the tuple that was inserted in table X

Insert a tuple into an auxiliary table Z 
```

表 X、Y、Z 都以某种方式相关，我不会删除任何记录。

但是，我发现有时记录 ID 在重载期间会跳过一两个。

交易对这种情况有帮助吗？

```
Start transaction

  user = Create user x

  user_x = Find user x

  Insert a tuple into an auxiliary table X

  Insert a tuple into an auxiliary table Y

  Update the tuple that was inserted in table X

  Insert a tuple into an auxiliary table Z

Commit 
```

Noobie 问题，此代码在没有负载时工作正常，但如果有负载则一次。即多个用户在完全相同的时间点击相同的资源，然后发生上述情况。交易会有帮助吗？

将所有内容包装在事务块中会有什么缺点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T00:31:55.560

我不确定 MYSQL，但在 Postgres 中，id 仅从自动递增序列中分配一次，如果事务回滚或中止，则将不使用。

你最好看看为什么跳过一些 id 是个问题。任何依赖它们顺序的东西都是可疑的。

您是否在用户与表 X、Y 和 Z 之间使用外键？或者这种关系是否依赖于并行递增的 id？

# android - 为什么我的 ImageView 元素与我的 Button 混合在一起？

> ID：12878179
> 
> 赞同：3
> 
> 时间：2012-10-14T00:10:34.033
> 
> 标签：android, xml, button, imageview, opacity

我是新手，所以请原谅我。我已经尝试过搜索文档和一般的互联网，但我无法弄清楚。这是我的 XML：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#000000" >

    <ImageView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:contentDescription="@string/desc"
        android:src="@drawable/my_image" />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:text="@string/hello_world"/>
</RelativeLayout> 
```

它看起来像这样：

![截屏](../Images/60a3f864b1e7acf6bb07682379a8ceb6.png)

我只希望按钮完全不透明，并且看不到背景图像与按钮混合。换句话说，我希望图像位于背景中，并且按钮牢固地显示在其上方。我使用了这两个元素的 alpha 设置，但无法弄清楚。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T00:45:20.357

尝试将 Button 的背景颜色更改为您想要使用的任何颜色`android:background`。例如使其红色使用`android:background = "#ff0000"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T01:37:40.333

如果您不想更改按钮的颜色，那么提供的答案是不够的。相反，将按钮放在另一个具有黑色背景的布局中。例如：

```
<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerInParent="true"
    android:background="@android:color/black" >

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/hello_world"/>

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T00:19:33.480

您正在使用[相对布局 (clicky)](http://developer.android.com/guide/topics/ui/layout/relative.html)。它是强大的小部件容器，但您需要小心。

对于您指定的按钮`layout_centerInParent=true`，布局管理器会执行此操作 - 它将您的按钮设置在容器的中心（可能是整个屏幕）

默认情况下，在相对布局中，所有子视图都绘制在布局的左上角，这就是它在那里绘制 ImageView 的原因，您还设置了`layout_width`和`layout_height`to `fill_parent`，它会这样做，填充整个容器。

如果您想定位（例如在 ImageView 下方），您需要这样说： `android:layout_below="@id/ImageView_ID"`在 Button 属性中。

# php - PDO MySQL 如何处理prepared statements 中的参数？

> ID：12878182
> 
> 赞同：3
> 
> 时间：2012-10-14T00:11:20.527
> 
> 标签：php, mysql, pdo, mysqli, prepared-statement

例如，在我准备好的声明中的命名占位符中，我可以拥有：

```
<?php
$stmt = $db->prepare("SELECT * FROM table WHERE id=:id AND name=:name");
$stmt->bindValue(':id', $id, PDO::PARAM_INT);
$stmt->bindValue(':name', $name, PDO::PARAM_STR);
$stmt->execute();
$rows = $stmt->fetchAll(PDO::FETCH_ASSOC); 
```

`->bindValue`with是否会使用 " " 或 " " PHP 函数或以其他方式`PDO::PARAM_INT`检查 the`$id`是否真的是一个整数，如果不是with set set 所期望的，它会失败并崩溃吗？`is_int``is_numeric``$id``->bindValue``PDO::PARAM_INT`

我是 PDO MySQL 的新手，我也想知道：

```
$stmt->bindValue(':name', $name, PDO::PARAM_STR); 
```

修复任何编码问题，如果考虑到`$name`，它可以自动处理修剪和条带标签吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T00:23:38.860

> 将 ->bindValue 与 PDO::PARAM_INT 检查 $id 是否真的是一个整数使用

它不会被检查。将变量绑定为 PARAM_INT 将使 PHP`(int)"123"`首先将其转换为整数。不会发生错误，非数字字符串将被简单地强制转换为零。另请参阅关于[字符串转换为数字](http://www.php.net/manual/en/language.types.string.php#language.types.string.conversion)的 PHP 手册。

> ... PDO::PARAM_STR);
> 修复在 $name 中的任何编码问题，它是否也可以自动处理修剪和条带化标签？

对于字符串类型的参数，将不会自动修剪或转换传递的值。

如果输入字符集与数据库字符集不同，则编码将由 PDO 驱动程序或接收数据库服务器进行调整。但仅此而已。

# javascript - 如何在光标处添加字符？

> ID：12878186
> 
> 赞同：0
> 
> 时间：2012-10-14T00:12:03.033
> 
> 标签：javascript, codemirror

我正在尝试向代码镜像添加一行“热键”。对于正常情况`<textarea id=code>`，我可以这样做： `insertAtCursor(code,'hello')` 使用：

```
function insertAtCursor(textArea,text) 
{
    if (textArea.setSelectionRange)
    {
        textArea.value = textArea.value.substring(0,textArea.selectionStart) + text + textArea.value.substring(textArea.selectionStart,textArea.selectionEnd) + textArea.value.substring(textArea.selectionEnd,textArea.value.length);
    } 
    else if (document.selection && document.selection.createRange) 
    {
        textArea.focus();
        var range = document.selection.createRange();

        range.text = text + range.text;
    }
} 
```

我怎么能用 CodeMirror 实例做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T21:11:11.147

```
function insertAtCursor(instance, text) {
  instance.replaceSelection(text);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-18T13:47:35.657

这是一个小示例，您要在其中插入一个额外的字符以进行自动完成。如果用户开始输入 a （您想添加额外的）并将光标设置回一个位置，以便他可以直接继续输入。

```
editor.on('keypress', function(cm,e){
  console.log("keypress: "+e.charCode);
  if(e.charCode === 40) { //check for ( and autocomplete with ) while placing cursor inside ()
      e.preventDefault(); //ignore this key
      editor.replaceSelection("()"); //replace with ()
      editor.setCursor(editor.getCursor().line,editor.getCursor().ch-1); //set cursor back one position
      return false;
   }
}); 
```

# windows-phone-7 - 使内容适合 Windows Phone 7 中的网络浏览器？

> ID：12878190
> 
> 赞同：0
> 
> 时间：2012-10-14T00:12:27.543
> 
> 标签：windows-phone-7, browser, webbrowser-control

我有一个网络浏览器。我加载了一个只有图片的网址。图片比网络浏览器大。如何调整图片大小以适应网络浏览器，以便用户不再需要放大和缩小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T09:22:08.123

尝试这个

```
string html = String.Format("<html><head></head><body><img style='width:100%' src='{0}'/></body></html>",  "http://www.userlogos.org/files/logos/pek/stackoverflow2.png");

webBrowser.NavigateToString(html); 
```

您可以使用“样式”属性为图像添加更多样式。

以下元标记可能对您也很有趣。

< meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />

# c++ - 有没有办法保存自动变量并在之后使用它？

> ID：12878191
> 
> 赞同：0
> 
> 时间：2012-10-14T00:12:42.820
> 
> 标签：c++, c++11, auto

我正在尝试保存一段代码并在之后使用它。所以我将能够将自动变量声明为全局，分配它然后调用该块：

```
// In the header
auto __myblock; // error 
```

然后：

```
__myblock=[]()
{
    <code>
};
<other code>
__myblock(); 
```

但问题是我得到一个语法错误：似乎我必须在声明它的那一刻初始化变量，所以我无法记住该块并在之后使用它。我需要将该块作为全局变量记忆或在一个类中。也在一个类中，我不允许将自动声明为实例变量。有没有办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T14:33:49.110

您的问题中有两个问题：

1.  我可以提前声明自动变量吗（在初始化之前）
2.  如何存储 lambda 函数

第一个问题的答案是“否”：自动变量的声明必须伴随着初始化。你不能有：

```
auto x;  // error
x = 42; 
```

本身，因为编译器不会在声明中知道 x 应该是什么。另一方面：

```
auto x = 42; 
```

是有效的，因为42是int，所以编译器为x分配一个整数

对于第二个问题，使用 std::function。它已尽可能优化。有一些细节需要考虑。具体来说：代码块 <code> 是否引用了 lambda 函数范围之外的变量。如果是这样，您是否希望它按值或按引用引用这些变量。所有这些变量都必须存储在某个地方（也称为捕获），这就是 std::function 所做的。如果您没有任何捕获，std::function 基本上是一个简单的函数指针，它已尽可能优化。在标题有：

```
// with no capture:
std::function<void()> _myblock;

// if you have capture (say, two integers)
std::function<void(int,int)> _myblock 
```

并且在源头上有：

```
// no capture:
_myblock = []() { <code> }

// with capture:
_myblock = [x,y]( int x, int y) { <code> } 
```

最后，正如其中一位评论者指出的那样，如果您没有捕获，最好的办法是简单地将 <code> 代码分解为一个函数，然后简单地稍后调用它。

# java - Hibernate 工具：映射和注释失败

> ID：12878199
> 
> 赞同：2
> 
> 时间：2012-10-14T00:14:37.473
> 
> 标签：java, hibernate, hibernate-mapping, hibernate-annotations, hibernate-tools

这让我发疯——我很确定 Hibernate 可以确定表之间的映射关系，从而在生成的 POJO 中反映这一点。

除非它不是。

我将 MySQL 与 STS & Hibernate Tools 4.0.0 一起使用，并且在 Person <--> Phone 和 Phone <--> PhoneType 之间有一对多和一对一的表关系，我能够使用“休眠代码生成配置”生成“域代码”和“DAO 代码”，但是这两个文件都没有表之间的任何映射。

**现在这是一个可能的问题：**

为了获得任何注释，我打开了选项*'Generate EJB3 annotations'*。现在我在这里使用普通的旧 Hibernate，而***不是***JPA。

所以我的问题是：

1.  Hibernate 工具可以为普通的旧 Hibernate 生成注释吗？
2.  它可以在 POJO（即@manytomany / @manytoone）中生成映射信息吗？

非常感谢你的帮助，

鲍勃

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T21:42:16.023

好的，我终于成功了！

问题是，就像所有具有技术性质的事物一样，既简单又深刻。

一句话：**区分大小写**

我用大写字母（即人，电话）创建了我的表，我使用 MySQL Workbench 创建了外键，它们看起来像这样：

CONSTRAINT FK_Phone_Person FOREIGN KEY (person_id) REFERENCES Person (person_id)

代替

CONSTRAINT FK_Phone_Person FOREIGN KEY (person_id) REFERENCES person (person_id)

注意大写。

在花了很多血、汗水和泪水试图让这该死的东西正常工作后，SOO 很高兴，而问题一直都是问题所在！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-30T05:45:19.483

**工作过**：

我从 STS eclipse 中的 Hibernate 工具插件创建了新的逆向工程 XML“hibernateII.reveng.xml”，它解决了这个问题。

虽然我也尝试过更改现有文件的内容，但没有成功，新旧文件的内容相同，很奇怪，但新文件解决了这个问题。

# c++ - 如何在 C++11 中处理互斥的成员函数

> ID：12878201
> 
> 赞同：1
> 
> 时间：2012-10-14T00:14:40.100
> 
> 标签：c++, c++11, thread-safety, mutex

这主要是一个设计问题，但由于我使用 C++11 编程，我更喜欢使用 C++11 的解决方案/建议。

基本上问题是我想让我的类易于维护，同时避免使用过度锁定。

问题很简单：

如果仅由在开始时锁定类互斥锁的类函数调用它，我可以避免在类函数的开头`private`锁定。维护地狱是，将来很难看到什么方法正在调用什么，并且有可能有人会将 b 公开，并使类线程不安全。`a``public``b`

那么最佳解决方案是什么：

*   评论`b`说它没有锁定`std::mutex`，因为它只被调用`a`
*   使用`recursive_mutex`并锁定每种方法：似乎很浪费
*   别的东西

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T23:28:36.587

> 有可能有人会`b`公开

您不必担心这一点。如果有人在不了解后果或如何正确使用该功能的情况下将私有实现细节变为公共成员，那么您已经有维护的噩梦了。您是否还担心他们会公开您的所有数据成员？担心这些事情似乎是在浪费时间。如果不明显该函数不是公开的，那么重命名它并添加清晰的注释。

然而 ...

经常使用的一种替代方法是要求将锁定对象传递给函数，这样在不锁定互斥锁的情况下更难调用它，无论该锁定是由另一个成员函数还是任何其他类完成：

```
class X
{
public:
    void frobnicate()
    {
        std::unique_lock<std::mutex> lock(this->mutex);
        frob_impl(lock);
    }

private:
    void frob_impl(const std::unique_lock<std::mutex>&)
    {
        // do it
    }

    std::mutex mutex;
}; 
```

如果您想对人们更改代码以做愚蠢的事情感到非常偏执，您可以添加检查正确的互斥锁是否已锁定：

```
 void frob_impl(const std::unique_lock<std::mutex>& lock)
    {
        assert( &this->mutex == lock.mutex() );
        // do it
    } 
```

但是，如果您不信任后来的维护程序员，您怎么知道他们不会删除该检查？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T09:03:36.963

最简单的方法是拥有一个执行该工作但没有互斥体成员的实现类，以及一个包含实现类和互斥体的包装类。然后包装器将互斥锁锁定在每个成员函数中，然后调用实现类。如果实现调用自身的另一个成员函数，则它知道互斥锁始终处于锁定状态。由于包装器成员函数只是简单的包装器，因此很容易验证它们始终锁定互斥锁。

```
class X{
    class Impl{
    private:
        int i,j;
        int bar(){ return i;}
        int baz(){ return j;}
    public:
        Impl():i(36),j(6){}
        int foo(){
            return bar()+baz();
        }
    };

    Impl impl;
    std::mutex m;
public:
    int foo(){
        std::lock_guard<std::mutex> guard(m);
        return impl.foo();
    }
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T23:41:53.657

这是个好问题。将公共接口与实现分开以及将功能与多线程问题分开通常是个好主意。

我一直在使用递归互斥锁，然后我的方法名称带有和不带有“_locked”后缀等。维护和扩展仍然是一个负担，每次锁定都很慢（递归互斥锁也很烂），而且我经常不得不追踪数据/调用路径来弄清楚到底发生了什么。好吧，调试死锁很容易——不受保护的访问更有趣。

这些天来，我通常实现一个类而不用担心互斥体，然后通过将它隐藏在实现为“代理”模式的墙后面来保护它免受“解锁”访问。这对我来说至少工作了几年，到目前为止没有任何抱怨。这段代码应该给你一个想法：

```
#include <cstdio>
#include <mutex>
#include <utility>

class SomeClass {
  public:
    explicit SomeClass(int v) : v(v) {}

    void foo() { printf("\t\tCALLED foo(%d)\n", v); }
    void bar() { foo(); printf("\t\tCALL bar(%d)\n", v); }

  private:
    int v;
};

template <typename T>
class Protector {
    std::mutex m_;
    T          c_;
  public:
    template <typename ...Args>
    Protector(Args && ...args)
        : m_(), c_(std::forward<Args>(args)...)
    {}

    class Interface {
        Protector *p_;

        Interface(const Interface &) = delete;
        Interface & operator = (const Interface &) = delete;

      public:
        Interface(Protector *p) : p_(p) {
            printf("\t+++++ Lock! +++++\n");
            p_->m_.lock();
        }

        Interface(Interface && rhs) : p_(rhs.p_) { rhs.p_ = nullptr; }
        T *operator->() { return p_ ? &p_->c_ : nullptr; }
        ~Interface() {
            if (p_) {
                printf("\t----- Unlock! -----\n");
                p_->m_.unlock();
            }
        }
    };

    Interface lock() { return Interface(this); }
    Interface operator ->() { return lock(); }

    Protector(const Protector &) = delete;
    Protector & operator = (const Protector &) = delete;
};

int main()
{
    Protector<SomeClass> p(12345);
    printf("--*-- Doing batch access! --*--\n");
    {
        auto c = p.lock();
        c->foo();
        c->bar();
    }
    printf("--*-- Doing silly access! --*--\n");
    p->foo();
    p->bar();
    printf("Done!\n");
} 
```

示例运行：

```
$ clang++ -std=c++11 -stdlib=libc++ -O4 -Wall -pedantic -o test ./test.cpp 
$ ./test 
--*-- Doing batch access! --*--
    +++++ Lock! +++++
        CALLED foo(12345)
        CALLED foo(12345)
        CALL bar(12345)
    ----- Unlock! -----
--*-- Doing silly access! --*--
    +++++ Lock! +++++
        CALLED foo(12345)
    ----- Unlock! -----
    +++++ Lock! +++++
        CALLED foo(12345)
        CALL bar(12345)
    ----- Unlock! -----
Done!
$ 
```

希望能帮助到你。

# java - (Java)条件语句

> ID：12878202
> 
> 赞同：0
> 
> 时间：2012-10-14T00:14:53.803
> 
> 标签：java, loops, while-loop, if-statement

首先，对不起，代码有点乱。它的格式不太好。我的任务是随机生成一个由大小写字母组成的密码，长度由用户指定。到目前为止，我的代码还没有完成，但那是因为我遇到了问题。

我的密码会显示小写和大写字母，但不够长。

例如，如果这个人想要一个长度为 14 的密码，我只会得到一个小于该长度的密码。它永远不是它应该的长度。

```
import java.util.Scanner;
import java.util.Random;

public class Password{
    public static void main(String [] args){
        Scanner in = new Scanner(System.in);
        int passwordLength = 0;
        Random randNum = new Random();
        int randNumAscii = 0;
        String generatedPassword = "";

        System.out.print("Password Length (1-14): ");
        passwordLength = in.nextInt();
        for(int count = 0; count < passwordLength; count++){ 
            randNumAscii = randNum.nextInt(123);
            if(randNumAscii >= 65 && randNumAscii <= 90 || randNumAscii >= 97 && randNumAscii <= 122)
                generatedPassword += (char)randNumAscii;
            else
                randNumAscii = randNum.nextInt(123); 
        }
        System.out.println(generatedPassword);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T00:46:32.057

这是因为您只在生成的密码中添加一个字符（如果它在您选择的范围内）。如果一个字符在您之外随机化，则`randNumAscii >= 65 && randNumAscii <= 90 || randNumAscii >= 97 && randNumAscii <= 122`永远不要将其附加到字符串中。

您可以做的是在 for 循环内有一个 while 循环，该循环一直持续到满足该条件，或者继续 for 循环但将 count 变量减一，因此可以说“使用该索引”生成一个新字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T00:47:00.620

如您所说，您的问题出在此处：

```
randNumAscii = randNum.nextInt(123);
if(randNumAscii >= 65 && randNumAscii <= 90 || randNumAscii >= 97 && randNumAscii <= 122)
    generatedPassword += (char)randNumAscii;
else
    randNumAscii = randNum.nextInt(123); 
```

让我解释一下原因：

基本上，当 时`userSelection == 2`，您的代码说：“对于给定长度的每个空格，选择一些随机字符。如果它是大写或小写，则添加它。否则，更改它。” 但是，您忘记做的是附加“更改”的随机字符。

你需要在这里做的是这样的（伪代码）：

```
randNumAscii = [random from 0 to 123]
while randNumAscii is not uppercase and not lowercase:
    randNumAscii = [random from 0 to 123]
append (char)randNumAscii to generatedPassword 
```

由于这是一项任务，因此我将实施留给您。因为我不确定您的技能水平，您可能需要[阅读`while`](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/while.html).

# objective-c - 将数据从 Safari IOS6 传输到 App 模式的 IOS6，不可能吗？

> ID：12878204
> 
> 赞同：2
> 
> 时间：2012-10-14T00:15:45.540
> 
> 标签：objective-c, html, jquery-mobile, ios6

嘿，我使用 HTML5，jquerymobile 开发了一个商业应用程序，它目前正在运行/生产中，并且由于 IOS6 分离了共享本地存储 (HTML5)，我不能再像以前那样将数据从 Safari 传输到主屏幕。

我曾经在 Safari 中设置 localStorage，然后主屏幕应用程序会选择它，这在 IOS6 中不起作用。

如何在不创建全新功能/流程的情况下使其在 IOS6 中工作？我在想我的选择是：

1.  维护查询字符串中的值，以便当用户加载应用程序时，该值在查询字符串中，然后我可以从该值将其设置为 localStorage，当应用程序第一次以 App 模式加载时。

2.  将值存储在缓存清单中（尽管它需要动态设置，作为用户身份验证令牌，特定于每个用户，所以不知道是否有可能在那里有动态数据？）。并且不知道缓存清单是否由 Safari 和 app-mode 共享？

任何帮助将不胜感激，这显然非常严重，因为我们 50% 的用户无法再使用我们的应用程序。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T22:13:22.640

所以我解决了这个问题并部署到生活中并且一切正常。这远非一个优雅的解决方案，但对于围绕此功能构建应用程序的用户而言，您无能为力。我只是在每个页面请求的查询字符串上携带变量（我想传递给 App-Mode）。然后，当用户添加到主屏幕时，会加载相同的 URL，您可以通过这种方式检索变量。

使用 jquery mobile 相当容易，只需为您以编程方式执行的所有`$.changepage`操作提供一个通用函数并将其插入，然后有一个通用函数在所有页面的 pageshow 事件上执行，并将其作为后缀添加到所有链接。

# javascript - 在 JQuery 中将 rel 属性更改为 data-rel 以使用 HTML5

> ID：12878207
> 
> 赞同：3
> 
> 时间：2012-10-14T00:16:13.910
> 
> 标签：javascript, jquery, html, attributes, rel

我正在尝试为我的 HTML5 站点实现为 XHTML 1.0 doctype 编写的 JQuery 图像库，问题是我不能在 HTML5 中使用自定义“rel”属性：

```
<!-- In <head> tag -->
<script type="text/javascript">
$(document).ready(function(){
    $("a[rel='first_gallery']").colorbox({opacity: ".75"});
    $("a[rel='second_gallery']").colorbox({opacity: ".75"});
});
</script>

<!-- In <body> tag -->
<a href="first_gallery/1.jpg" title="Image 1" rel="first_gallery"><img src="images/1_thumbnail.jpg" alt="Image 1 Thumbnail"/></a>

<a href="second_gallery/2.jpg" title="Image 2" rel="second_gallery"><img src="images/2_thumbnail.jpg" alt="Image 2 Thumbnail"/></a> 
```

我尝试使用 HTML5 自定义“data-rel”属性而不是“rel”，但我的 JQuery 有什么问题？

```
<!-- In <head> tag -->
<script type="text/javascript">
$(document).ready(function(){
    $("a[data-rel='first_gallery']").colorbox({opacity: ".75"});
    $("a[data-rel='second_gallery']").colorbox({opacity: ".75"});
});
</script>

<!-- In <body> tag -->
<a href="first_gallery/1.jpg" title="Image 1" data-rel="first_gallery"><img src="images/1_thumbnail.jpg" alt="Image 1 Thumbnail"/></a>

<a href="second_gallery/2.jpg" title="Image 2" data-rel="second_gallery"><img src="images/2_thumbnail.jpg" alt="Image 2 Thumbnail"/></a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:37:57.760

我最近遇到了同样的问题，我完全得到了你想要实现的目标，但首先我将修复你使用“rel”属性的初始代码”

请注意，“rel”属性是 jquery.colorbox 对象中的一个选项：

```
<!-- In <head> tag -->
<script type="text/javascript">
$(document).ready(function(){
    $("a").colorbox({ rel: "first_gallery", opacity: ".75"}); // this means <a rel="first_gallery" …&gt;
    $("a").colorbox({ rel: "second_gallery", opacity: ".75"}); // this means <a rel="second_gallery" …&gt;
});
</script>

<!-- In <body> tag -->
<a rel="first_gallery" href="first_gallery/1.jpg" title="Image 1"><img src="images/1_thumbnail.jpg" alt="Image 1 Thumbnail"/></a>
<a rel="second_gallery" href="second_gallery/2.jpg" title="Image 2"><img src="images/2_thumbnail.jpg" alt="Image 2 Thumbnail"/></a> 
```

如您所知，上面的示例不会验证为 HTML5，因为“rel”的值不会验证。

如果您想使用“data-rel”，您的代码应如下所示：

```
<!-- In <head> tag -->
<script type="text/javascript">
$(document).ready(function(){
    $("a").colorbox({ rel: $(this).data('rel'), opacity: ".75"});
});
</script> 
```

`rel: $(this).data('rel')`告诉 jquery.colorbox 使用“data-rel”来包装画廊。它有点有限：您不能使用自定义的“data-”属性，也不能使用“data-rel”中的值。

上面的代码将适用于您使用“data-rel”的两个画廊：

```
<!-- In <body> tag -->
<a data-rel="first_gallery" href="first_gallery/1.jpg" title="Image 1"><img src="images/1_thumbnail.jpg" alt="Image 1 Thumbnail"/></a>
<a data-rel="second_gallery" href="second_gallery/2.jpg" title="Image 2"><img src="images/2_thumbnail.jpg" alt="Image 2 Thumbnail"/></a> 
```

如果您想为不同的画廊设置不同的选项，那么缺点就来了，比如说不同的不透明度，一个实际的例子是：

```
<!-- In <head> tag -->
<script type="text/javascript">
$(document).ready(function(){
    $("a.gallery1").colorbox({ rel: $(this).data('rel'), opacity: ".75"});
    $("a.gallery2").colorbox({ rel: $(this).data('rel'), opacity: ".80"});
});
</script>

<!-- In <body> tag -->
<a class="gallery1" data-rel="first_gallery" href="first_gallery/1.jpg" title="Image 1"><img src="images/1_thumbnail.jpg" alt="Image 1 Thumbnail"/></a>
<a class="gallery2" data-rel="second_gallery" href="second_gallery/2.jpg" title="Image 2"><img src="images/2_thumbnail.jpg" alt="Image 2 Thumbnail"/></a> 
```

我希望我没有混淆你的解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T00:33:47.893

注意它的错误。

它工作得很好。

在这里测试它：http: [//jsfiddle.net/RASG/NCrmb/](http://jsfiddle.net/RASG/NCrmb/)

如果您遇到问题（您没有说正在发生的事情或应该发生的事情），则可能是其他问题。

# java - JavaFx 对 EDT 的回答？

> ID：12878208
> 
> 赞同：2
> 
> 时间：2012-10-14T00:16:24.177
> 
> 标签：java, multithreading, javafx-2, scenebuilder

我问了一个关于在 GUI 中使用线程的问题并得到以下回复：

> 你必须重新设计你的程序。
> 
> 1.  GUI 元素应仅从 GUI 线程 (EDT) 中更新，而不是从独立线程中更新。
> 2.  客户端连接应该分为 2 个弱连接部分：发送消息和接收消息。接收应该是一个单独的线程，发送可以是一个线程或一个类。
> 3.  当接收线程读取消息时，它使用 SwingUtilities.invokeLater(Runnable) 将消息发送到 EDT。示例可以在其他地方找到。
> 4.  当用户输入文本时，文本直接发送到套接字，或者排入队列，稍后由发送线程（如果有）处理。

我想知道的是 JavaFx 对 EDT 的响应是什么，有人可以举例说明如何使用它吗？

我的第一篇文章可以在这个链接找到[服务器/客户端程序在线程启动后停止工作](https://stackoverflow.com/questions/12872918/server-client-program-stops-working-after-thread-starts)

*   请注意，我是否已经在 javaFx Scene builder 中构建了我的 GUI。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T15:04:27.677

您是否在 JavaFX 中寻找相应的 SwingUtil.invokeLater。如果是，则为 Platform.runLater(java.lang.Runnable runnable)

引用 API [http://docs.oracle.com/javafx/2/api/javafx/application/Platform.html](http://docs.oracle.com/javafx/2/api/javafx/application/Platform.html)

> 在未来某个未指定的时间在 JavaFX 应用程序线程上运行指定的 Runnable。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T06:44:10.423

就个人而言，我只是重写了**Task**的 run 方法来保持核心忙碌并完成工作。非可视任务是通过扩展 Service 类来完成的。JavaFX 应用程序线程专门用于调用**Service**上的所有方法和状态。

> 服务是一种非可视组件，它封装了在一个或多个后台线程上执行某些工作所需的信息。
> 
> Task 是 FutureTask 的完全可观察的实现。Tasks 公开了额外的状态和可观察属性，这些属性对于在 JavaFX 中编写异步任务很有用，这些属性在 Worker 接口中定义。

发送消息等非 UI 计算应该通过运行任务在单独的线程中进行。当使用`Platform.runLater(java.lang.Runnable runnable)`从 JavaFX 应用程序线程（与 EDT 相同）接收消息时，您可以更改 UI（显示消息），但它会使 UI 滞后，因此最好从单独的线程中执行密集的工作。

因此，您可以定义一个任务并通过调用来触发新线程`new Thread(task).start();`。在您的 Task 匿名类中，您可以添加一个侦听器，用于在收到消息时更新 UI。一个任务可以有以下[WorkerStateEvent](http://docs.oracle.com/javafx/2/api/javafx/concurrent/WorkerStateEvent.html#field_summary)，你可以监听它们。

使用来自[http://fxexperience.com/2011/07/worker-threading-in-javafx-2-0/](http://fxexperience.com/2011/07/worker-threading-in-javafx-2-0/)的 Task并使用 stateProperty 监听器的示例代码。

```
Task task = new Task<Void>() {
    @Override public Void run() {
        static final int max = 1000000;
        for (int i=1; i<=max; i++) {
            updateProgress(i, max);
        }
        return null;
    }
};
ProgressBar bar = new ProgressBar();
bar.progressProperty().bind(task.progressProperty());
new Thread(task).start(); 
```

* * *

```
task.stateProperty().addListener(new ChangeListener<Worker.State>() {

        @Override
        public void changed(ObservableValue<? extends State> observable,
                State oldValue, Worker.State newState) {
            if(newState==Worker.State.SUCCEEDED){
                //doSomething()
            }
        }
    }); 
```

# mongodb - 如何查询带有点的属性？

> ID：12878212
> 
> 赞同：4
> 
> 时间：2012-10-14T00:17:13.857
> 
> 标签：mongodb

通常，MongoDB 不允许属性名称中包含点。例如：

```
db.books.insert({"protagonist.name": "Guy Montog"}); 
```

失败并出现错误：

```
uncaught exception: can't have . in field names [protagonist.name] 
```

但是，我遇到了属性名称确实有点的情况。这可能发生在 system.profile 集合中。这是一个例子：

```
db.setProfilingLevel(2);
db.books.insert({protagonist: "Guy Montog", antecedents: 
  [{title: "The Fireman"}, {title: "Bright Phoenix"}]});
db.books.find({"antecedents.title": "The Fireman"}) 
```

现在，如果我查看 system.profile 集合，我会看到以下记录：

```
> db.system.profile.findOne({op: "query"})
{
    "ts" : ISODate("2012-10-14T00:05:49.896Z"),
    "op" : "query",
    "ns" : "wordswing.books",
    "query" : {
        "antecedents.title" : "The Fireman"
    },
    "nscanned" : 1,
    "nreturned" : 1,
    "responseLength" : 153,
    "millis" : 0,
    "client" : "127.0.0.1",
    "user" : ""
} 
```

假设我想查询查询“antecedents.title”的for system.profile 文档？这似乎是一个问题，因为属性名称中有一个点。

我尝试了以下所有方法：

```
db.system.profile.find({'query.antecedents.title': 'The Fireman'})
db.system.profile.find({'query.antecedents\.title': 'The Fireman'})
db.system.profile.find({"query.antecedents\.title": 'The Fireman'}) 
```

这些都没有奏效。

想法？

这确实干扰了我浏览相当大的 system.profile 集合的能力。

提前致谢。

**更新**

回应评论，我使用的版本是：

```
$ mongod --version
db version v2.0.6, pdfile version 4.5
Sun Oct 14 18:43:29 git version: e1c0cbc25863f6356aa4e31375add7bb49fb05bc 
```

凯文

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T02:28:22.467

虚线查询的配置文件条目似乎确实是一个错误 .. MongoDB 中的[键名](http://www.mongodb.org/display/DOCS/Legal+Key+Names)并不意味着包含`.`（或前导`$`）。

正如您所注意到的，这会在尝试查询时导致您出现问题，因为[点表示法](http://www.mongodb.org/display/DOCS/Dot+Notation+%28Reaching+into+Objects%29)用于指示嵌入的对象。

MongoDB 2.2.0 中的一个有限解决方法似乎是使用聚合框架将查询对象匹配为嵌入式文档：

```
db.system.profile.aggregate({ $match: {'query': {"antecedents.title" : "The Fireman"}}}) 
```

我在 MongoDB 的问题跟踪器中将这个分析错误报告为[SERVER-7349](https://jira.mongodb.org/browse/SERVER-7349)。

# spring - 应用程序上下文加载两次

> ID：12878214
> 
> 赞同：2
> 
> 时间：2012-10-14T00:17:29.510
> 
> 标签：spring, tomcat

我正在使用带有 Eclipse 的 Tomcat 7 编写一个带有 Struts 3 的 Web 应用程序。当我启动 Tomcat 时，上下文似乎被加载了两次（日志文件显示 applicationContext.xml 被读取了两次）。

我在 src/main/webapp/META-INF 下有一个 Tomcat 的 context.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<Context path="/dbname" docBase="dbname" reloadable="true" debug="1">
  <Resource name="jdbc/dbname"
            username="dbusername"
            password="dbpassword"
            auth="Container"
            driverClassName="com.mysql.jdbc.Driver"
            url="jdbc:mysql://localhost:3306/dbname"
            type="javax.sql.DataSource"
            initialSize="5"
            maxActive="120"
            maxIdle="5"
            maxWait="5000"
            poolPreparedStatements="true"
            validationQuery="select 1" />
</Context> 
```

我的 server.xml 还声明（在主机和引擎下）：

```
<Context docBase="dbname" path="/dbname" source="org.eclipse.jst.jee.server:dbname"/> 
```

没有这个，Tomcat 不会启动应用程序。

在 web.xml 中，我像这样声明 contextConfigLocation：

```
<context-param>
  <param-name>contextConfigLocation</param-name>
  <param-value>classpath:spring/applicationContext.xml</param-value>
</context-param> 
```

applicationContext.xml 位于 src/main/resources/spring 下

这些是显示重新加载的日志文件中的两行：

```
2012-10-14 00:17:08,191 INFO [org.springframework.web.servlet.DispatcherServlet] - FrameworkServlet 'name': initialization completed in 438 ms
2012-10-14 00:17:10,972 INFO [org.springframework.web.context.support.XmlWebApplicationContext] - Closing WebApplicationContext for namespace 'name-servlet': startup date [Sun Oct 14 00:17:07 CEST 2012]; parent: Root WebApplicationContext 
```

问题是在第二次重新加载时，它失败了，因为 Spring 找不到任何数据源（尽管肯定定义了一个，因为 Spring 在第一次启动时找到了它）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T12:12:31.287

> 我在 src/main/webapp/META-INF 下有一个用于 Tomcat 的 context.xml 文件：[...]
> 
> 我的 server.xml 还声明（在主机和引擎下）：

因此，您已经部署了两次 webapp。你期待不同的东西吗？

从 server.xml 中删除`<Context>`：它不属于那里。然后，你的 webapp 应该只加载一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T16:53:27.763

我在我的 tomcat 服务器中部署了战争和爆炸战争，因此它正在加载两个应用程序上下文，删除其中一个解决了问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-18T06:03:33.420

为了防止这种情况，我们必须在标签中设置 autoDeploy=”false” 和 deployOnStartup=”false”：

```
<Host name="localhost" appBase="webapps" unpackWARs="true"
  autoDeploy="false" deployOnStartup="false">
    <Context path="" docBase="ExampleApp"></Context>

    <!-- Further settings for localhost -->
</Host> 
```

# jquery - jquery父母/最近不工作

> ID：12878215
> 
> 赞同：5
> 
> 时间：2012-10-14T00:17:35.267
> 
> 标签：jquery, parent, closest

我有一个将一些数据发布到控制器的链接。它工作正常并更新数据。但我想更改父 div 的 css 但它没有发生。我已经尝试了很多变化，但我一定是在做一些愚蠢的事情。

代码如下

看法：

```
@foreach (var item in Model)
{
    <div class="added-property-excerpt">
        ...
        <div class="added-property-links">
        ...
        @if (!item.IsPropertyDisabled) { 
                @Html.ActionLink("Take off the Market" , "Disable", "Property", new { id = item.PropertyId }, new { id ="disable-link" })
            }
            else {
                @Html.ActionLink("Bring on the Market" , "Enable", "Property", new { id = item.PropertyId }, new { id ="enable-link" })
            }
        </div>
    </div>
} 
```

jQuery

```
 <script>
     $(function () {
         $('a#disable-link').click(function (e) {
             $('.added-property-links').text('loading...');
             $.ajax({
                 url: this.href,
                 dataType: "text json",
                 type: "POST",
                 data: {},
                 success: function (data, textStatus) { }
             });
             $(this).closest('.added-property-excerpt').css("background", "red");
          // $(this).parent('.added-property-excerpt').css("background", "red");
             e.preventDefault();
         });
     });
 </script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T00:19:46.763

你试过了吗：

```
$(this).parents('.added-property-excerpt').css("background", "red"); 
```

`parents`带有**s**。

它的作用是从父母到父母，直到找到你想要的课程。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-14T00:49:40.523

尝试这个

```
$(function () {
    $('a#disable-link').click(function (e){
        var parentDiv=$(this).closest('.added-property-excerpt');
        $('.added-property-links').text('loading...');
        parentDiv.css("background", "red");
        $.ajax({...});
        e.preventDefault();
    });
}); 
```

查看[**工作示例**](http://jsfiddle.net/KMzEU/1/)和[**非工作示例**](http://jsfiddle.net/KMzEU/2/)的区别。

# php - 如果在 php 中的 else 语句，如何将图像调整大小添加到我的 move_uploaded_file？

> ID：12878220
> 
> 赞同：0
> 
> 时间：2012-10-14T00:18:27.147
> 
> 标签：php, image-resizing, php-gd

if else 状态如下：

```
 if ( isset( $_POST['submit'] ) ) {
      $extension = end(explode(".", $_FILES["file"]["name"]));
      if ((($_FILES["file"]["type"] == "image/gif")
                      || ($_FILES["file"]["type"] == "image/jpeg")
                      || ($_FILES["file"]["type"] == "image/png")
                      || ($_FILES["file"]["type"] == "image/pjpeg"))
                      && ($_FILES["file"]["size"] < 60000)
                      && in_array($extension, $allowedExts)){
         if ($_FILES["file"]["error"] > 0)
         {
               // Do something
         } else{
               if (file_exists(EXAMPLE_IMAGES_PATH . $_FILES["file"]["name"])) {
                     // Do something
               } else{
                  // Apply resize then -
                  move_uploaded_file($_FILES["file"]["tmp_name"],
                        EXAMPLE_IMAGES_PATH . $_FILES["file"]["name"]);
                  // Do something else
               }
         }
   }
  else{
     // Do something else
  } 
```

}

在 move_uploaded_file 我想让它的大小调整为

```
 $uploadedfile = $_FILES['file']['tmp_name'];
  $imgW = 290;   // Width of img to be uploaded
  $imgH = 290;   // Height of img to be uploaded
  imagecreatetruecolor($imgW,$imgH); 
```

我不确定如何在上传前调整图像大小。提前感谢所有提供帮助的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T02:01:49.863

我推荐使用： http: [//phpthumb.gxdlabs.com/](http://phpthumb.gxdlabs.com/)

# c++ - while(true) switch case -- 是否可以实现可变大小写匹配，例如：使用 for 循环？

> ID：12878223
> 
> 赞同：0
> 
> 时间：2012-10-14T00:18:43.953
> 
> 标签：c++, switch-statement

我只是想知道是否可以使用键盘进行可变大小写？因此，案例可以是从 a 到 z 的任何选择，并且其完全可变，例如：只有选择 a)、b) 和 c) 出现在一个条件下，而在另一个条件下出现 a)、b)、c)、d) 和 e) 可能出现. 假设它们都调用相同的函数但输入不同的参数。

```
 char choice;
int i;
while(true)
{
            // This increments from char 'a' onward to 'b', 'c', 'd', etc.
    for (i = 0; i < number; i++){
            char character = 'a';
            cout << static_cast<char>(character + i) << ") list of choices" << endl;
    }

    cin >> choice;

    switch(choice) {

                    // Same incremental principal to achieve variable cases
        for (i = 0; i < number; i++){
                char character = 'a';
                character = (static_cast<char>(character + i) );

        case character: carryOutJob(argumentDependantOnCharacter);
        }
            }
    } 
```

如果我运行与此类似的代码，我会得到看起来有点像这样的错误：

```
: error: ‘character’ cannot appear in a constant-expression
: error: jump to case label [-fpermissive]
: error:   crosses initialization of ‘char character’
: error: expected ‘;’ before ‘}’ token
 Error 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T00:33:59.557

C++ 规则说`case`表达式必须是常量，因此编译器可以在编译时为其创建代码，除此之外，如果您一次检查一个字符，为什么不使用`if`?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T02:48:50.420

此外，据我所知，在 c++ 中，您不能将 switch 语句 case 标签设为字符串。我前段时间在学校作业中尝试过这个，但遇到了很多麻烦。

# c - 如何从 linux 3.5.4 中的自定义系统调用调用系统调用

> ID：12878228
> 
> 赞同：3
> 
> 时间：2012-10-14T00:19:27.830
> 
> 标签：c, linux, filesystems, kernel, system-calls

我正在linux中实现我自己的系统调用。它在其中调用重命名系统调用。它使用用户参数（下面是代码）将代码传递给重命名。

这是基本代码：

```
int sys_mycall(const char __user * inputFile)   {

//
// Code to generate my the "fileName"
//
//

old_fs = get_fs();
set_fs(KERNEL_DS);

    ans =  sys_renameat(AT_FDCWD, fileName, AT_FDCWD, inputFile);

set_fs(old_fs);

    return ans;

} 
```

我在这里有两个疑问。

1.  我正在使用`old_fs = get_fs();`,`set_fs(KERNEL_DS);`并`set_fs(old_fs);`绕过实际调用，`sys_rename`因为出现错误。我从这个问题中得到了答案：[从内核分配用户空间内存](https://stackoverflow.com/questions/7629141/allocate-user-space-memory-from-kernel)......这是一个正确的解决方法吗？
2.  如何从系统调用调用系统调用

**编辑：**

```
int sys_myfunc(const char __user * inputFileUser)   {

    char inputFile[255];
    int l = 0;
    while(inputFileUser[l] != '\0') l++;

    if(l==0)
        return -10; 

    if(copy_from_user(inputFile,inputFileUser,l+1)< 0 ) return -20;
//
//GENERATE fileName here
//
//

    char fileName[255];
    return  sys_renameat(AT_FDCWD, inputFile, AT_FDCWD, fileName);

} 
```

以下仍然返回-1。为什么？我将数据复制到内核空间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T06:26:56.220

我想准确地展示实现footy想要的正确方法，但是我的原始答案太长了，我决定将解决方案放在单独的答案中。我会将代码分成几部分，并解释每个片段的作用。

请记住，由于我们重用内核代码，因此本文中的代码和生成的函数必须在 GPLv2 许可下获得许可。

首先，我们首先声明一个单参数系统调用。

```
SYSCALL_DEFINE1(myfunc, const char __user *, oldname)
{ 
```

在内核中，堆栈空间是一种稀缺资源。您不创建本地数组；你总是使用动态内存管理。幸运的是，有一些非常有用的功能，例如`__getname()`，所以它是很少的附加代码。重要的是要记住在完成后释放您使用的任何内存。

由于这个系统调用基本上是 的变体`rename`，我们重用了几乎所有的`fs/namei.c:sys_renameat()`代码。首先，局部变量声明。也有很多；正如我所说，内核中的堆栈是稀缺的，在任何系统调用函数中你不会看到比这更多的局部变量：

```
 struct dentry *old_dir, *new_dir;
    struct dentry *old_dentry, *new_dentry;
    struct dentry *trap;
    struct nameidata oldnd, newnd;
    char *from;
    char *to = __getname();
    int error; 
```

对 的第一个更改已经`sys_renameat()`在`char *to = __getname();`上面的行中。它动态分配`PATH_MAX+1`字节，并且必须在`__putname()`不再需要后释放。这是为文件或目录名称声明临时缓冲区的正确方法。

要构造新路径 ( `to`)，我们还需要能够直接访问旧名称 ( `from`)。由于内核-用户空间障碍，我们不能直接访问`oldname`。因此，我们创建它的内核副本：

```
 from = getname(oldname);
    if (IS_ERR(from)) {
        error = PTR_ERR(from);
        goto exit;
    } 
```

尽管许多 C 程序员都被教导说`goto`是邪恶的，但这是个例外：错误处理。我们不必记住我们需要做的所有清理工作（`__putname(to)`至少我们已经需要做），我们将清理工作放在函数的末尾，然后跳到正确的点，`exit`也就是最后一个。`error`当然，保存错误号。

在我们函数的这一点上，我们最多可以访问`from[0]`first `'\0'`，或者最多（包括）`from[PATH_MAX]`，以先到者为准。它是一个普通的内核端数据，可以按照任何 C 代码中的普通方式访问。

您还为新名称保留了内存，`to[0]`包括`to[PATH_MAX]`. 请记住确保它也使用`\0`（在`to[PATH_MAX] = '\0'`或更早的索引中）终止。

在为 构建内容之后`to`，我们需要进行路径查找。不同`renameat()`的是，我们不能使用`user_path_parent()`. 然而，我们可以看看做什么`user_path_parent()`，然后做同样的工作——当然，适应我们自己的需要。事实证明它只是调用`do_path_lookup()`错误检查。因此，这两个`user_path_parent()`调用及其错误检查可以替换为

```
 error = do_path_lookup(AT_FDCWD, from, LOOKUP_PARENT, &oldnd);
    if (error)
        goto exit0;

    error = do_path_lookup(AT_FDCWD, to, LOOKUP_PARENT, &newnd);
    if (error)
        goto exit1; 
```

请注意，这`exit0`是原始标签中找不到的新标签`renameat()`。我们需要一个新标签，因为在`exit`，我们只有`to`; 但是在`exit0`，我们同时拥有`to`和`from`。在 之后`exit0`，我们有`to`、`from`和`oldnd`，等等。

接下来，我们可以重用大部分`sys_renameat()`. 它完成了重命名的所有艰苦工作。为了节省空间，我将省略我对它的作用的漫谈，因为你可以相信，如果`rename()`有效，它也会有效。

```
 error = -EXDEV;
    if (oldnd.path.mnt != newnd.path.mnt)
        goto exit2;

    old_dir = oldnd.path.dentry;
    error = -EBUSY;
    if (oldnd.last_type != LAST_NORM)
        goto exit2;

    new_dir = newnd.path.dentry;
    if (newnd.last_type != LAST_NORM)
        goto exit2;

    error = mnt_want_write(oldnd.path.mnt);
    if (error)
        goto exit2;

    oldnd.flags &= ~LOOKUP_PARENT;
    newnd.flags &= ~LOOKUP_PARENT;
    newnd.flags |= LOOKUP_RENAME_TARGET;

    trap = lock_rename(new_dir, old_dir);

    old_dentry = lookup_hash(&oldnd);
    error = PTR_ERR(old_dentry);
    if (IS_ERR(old_dentry))
        goto exit3;
    /* source must exist */
    error = -ENOENT;
    if (!old_dentry->d_inode)
        goto exit4;
    /* unless the source is a directory trailing slashes give -ENOTDIR */
    if (!S_ISDIR(old_dentry->d_inode->i_mode)) {
        error = -ENOTDIR;
        if (oldnd.last.name[oldnd.last.len])
            goto exit4;
        if (newnd.last.name[newnd.last.len])
            goto exit4;
    }
    /* source should not be ancestor of target */
    error = -EINVAL;
    if (old_dentry == trap)
        goto exit4;
    new_dentry = lookup_hash(&newnd);
    error = PTR_ERR(new_dentry);
    if (IS_ERR(new_dentry))
        goto exit4;
    /* target should not be an ancestor of source */
    error = -ENOTEMPTY;
    if (new_dentry == trap)
        goto exit5;

    error = security_path_rename(&oldnd.path, old_dentry,
                     &newnd.path, new_dentry);
    if (error)
        goto exit5;

    error = vfs_rename(old_dir->d_inode, old_dentry,
                   new_dir->d_inode, new_dentry); 
```

至此，所有的工作都完成了，只剩下释放上面代码占用的锁、内存等。如果此时一切都成功了`error == 0`，我们将进行所有清理工作。如果我们有问题，`error`包含错误代码，并且我们已经跳转到正确的标签以进行必要的清理，直到发生错误的地方。如果`vfs_rename()`失败——它执行实际操作——，我们将全部清理。

但是，与原始代码相比，我们`from`首先获得了 ( `exit`) ，紧随`to`( `exit0`) 之后，然后是 dentry 查找。因此，我们需要将它们释放到正确的位置（接近最后，因为它们是先完成的。当然，清理以相反的顺序进行）：

```
exit5:
    dput(new_dentry);
exit4:
    dput(old_dentry);
exit3:
    unlock_rename(new_dir, old_dir);
    mnt_drop_write(oldnd.path.mnt);
exit2:
    path_put(&newnd.path);
exit1:
    path_put(&oldnd.path);
exit0:
    putname(from);
exit:
    __putname(to);
    return error;
} 
```

到这里我们就完成了。

当然，上面我们复制的部分有很多细节需要考虑`sys_renameat()`——就像我在另一个答案中所说的那样，你不应该只是复制这样的代码，而是将通用代码重构为辅助函数；这使维护变得更加容易。幸运的是，因为我们保留了所有检查`renameat()`——我们在复制任何代码之前进行了路径操作`renameat()`——我们可以确保所有必要的检查都已完成。就好像用户自己指定了操纵路径并调用了`renameat()`.

如果你在做一些检查之后再进行修改，情况会复杂得多。您必须考虑这些检查是什么，您的修改如何影响它们，并且几乎总是重新进行这些检查。

提醒任何读者，您不能只在自己的系统调用中创建文件名或任何其他字符串然后调用另一个系统调用的原因是您刚刚创建的字符串位于内核用户空间边界的内核一侧，而系统调用期望数据驻留在用户空间端。虽然在 x86 上，您可能会意外地从内核端刺穿边界，但这并不意味着您应该这样做：必须**为此**目的使用`copy_from_user()`and`copy_to_user()`及其衍生物。调用另一个系统调用不是必须做魔术的问题，而是提供的数据在哪里（内核或用户空间）。`strncpy_from_user()`

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T00:40:06.910

嗯..`linux-3.6.2/fs/namei.c`包含许多类似的情况。例如，`rename`系统调用实际上定义为

```
SYSCALL_DEFINE2(rename, const char __user *, oldname, const char __user *, newname)
{
    return sys_renameat(AT_FDCWD, oldname, AT_FDCWD, newname);
} 
```

换句话说，从另一个系统调用调用一个系统调用是没有问题的。问题是指针参数是*用户空间*指针，而您正在尝试提供*内核*指针：您`fileName`应该在用户空间中分配，但您的在内核空间中。

正确的解决方案是从两个函数（your 和`sys_renameat()`in `fs/namei.c`）中提取出公共代码，然后从两个系统调用中调用该函数。假设您没有尝试将其包含在上游——如果是，那么它是重构和重新思考的时间——您可以轻松地将内容复制`sys_renameat`到您自己的函数中；它不是那么大。熟悉诸如此类的文件系统操作所需的必要检查和锁定也是一个有用的点。

* * *

编辑以解释问题和解决方案：

在非常真实的意义上，普通进程分配的内存（*用户空间*内存）和内核分配的内存（内核*空间*）完全被内核-用户空间屏障隔开。

您的代码忽略了这个障碍，根本不应该工作。（它可能在 x86 上有点工作，因为在该体系结构上，内核用户空间屏障很容易从内核端穿透。）您还使用 256 字节的堆栈作为文件名，这是一个禁忌：内核堆栈是一个资源非常有限，应谨慎使用。

普通进程（*用户空间进程*）无法访问任何内核内存。你可以试试，不会的。这就是障碍存在的原因。（有些嵌入式系统的硬件根本不支持这种屏障，但为了讨论的目的，让我们忽略这些。记住，即使在 x86 上，屏障很容易从内核端突破，但这并不意味着它不存在。不要因为它似乎对你有用而假设，它在某种程度上是正确的。）

屏障的性质使得在大多数架构上，*内核也存在屏障*。

为了帮助内核程序员，指向用户空间屏障的指针被标记为`__user`. 这意味着您不能仅仅取消引用它们并期望它们起作用；您需要使用`copy_from_user()`和`copy_to_user()`。它不仅仅是系统调用参数：当您从内核访问用户空间数据时，您需要使用这两个函数。

所有系统调用都适用于用户空间数据。您看到的每个指针都已（或应该！）标记`__user`。每个系统调用都会完成所有必要的工作以从用户空间访问数据。

您的问题是您正在尝试向`inputFile`系统调用提供内核空间数据。它不会起作用，因为系统调用总是试图穿过屏障，但在屏障`inputFile`的同一侧！

真的没有理智的方法可以复制`inputFile`到障碍的另一边。我的意思是，当然有办法做到这一点，甚至没有那么困难，但它就是不理智的。

那么，让我们探索一下我上面描述的正确解决方案，以及哪个足球已经拒绝了一次。

首先，让我们看看`renameat`系统调用在当前 (3.6.2) Linux 内核中的实际样子（请记住，此代码是在 GPLv2 下获得许可的）。系统`rename`调用只是使用`sys_renameat(AT_FDCWD, oldname, AT_FDCWD, newname)`. 我将插入我对代码作用的解释：

```
SYSCALL_DEFINE4(renameat, int, olddfd, const char __user *, oldname,
                int, newdfd, const char __user *, newname)
{
        struct dentry *old_dir, *new_dir;
        struct dentry *old_dentry, *new_dentry;
        struct dentry *trap;
        struct nameidata oldnd, newnd;
        char *from;
        char *to;
        int error; 
```

在内核中，堆栈是一种有限的资源。您可以使用相当多的变量，但任何本地数组都会是一个严重的问题。上面的局部变量列表几乎是您在典型系统调用中看到的最大的。

对于重命名调用，该函数必须首先找到包含文件名的父目录：

```
 error = user_path_parent(olddfd, oldname, &oldnd, &from);
        if (error)
                goto exit; 
```

注意：在此之后，旧的目录和路径必须在使用后通过调用释放`path_put(&oldnd.path); putname(from);`。

```
 error = user_path_parent(newdfd, newname, &newnd, &to);
        if (error)
                goto exit1; 
```

注意：在此之后，新的目录和路径必须在使用后通过调用释放`path_put(&newnd.path); putname(to);`。

下一步是检查两者是否位于同一文件系统上：

```
 error = -EXDEV;
        if (oldnd.path.mnt != newnd.path.mnt)
                goto exit2; 
```

目录中的最后一个组件必须是普通目录：

```
 old_dir = oldnd.path.dentry;
        error = -EBUSY;
        if (oldnd.last_type != LAST_NORM)
                goto exit2;

        new_dir = newnd.path.dentry;
        if (newnd.last_type != LAST_NORM)
                goto exit2; 
```

并且包含目录的挂载必须是可写的。请注意，如果成功，这将对挂载应用锁定，并且必须始终`mnt_drop_write(oldnd.path.mnt)`在系统调用返回之前与调用配对。

```
 error = mnt_want_write(oldnd.path.mnt);
        if (error)
                goto exit2; 
```

接下来，更新 nameidata 查找标志以反映目录是已知的：

```
 oldnd.flags &= ~LOOKUP_PARENT;
        newnd.flags &= ~LOOKUP_PARENT;
        newnd.flags |= LOOKUP_RENAME_TARGET; 
```

接下来，这两个目录在重命名期间被锁定。这必须与相应的解锁调用配对，`unlock_rename(new_dir, old_dir)`。

```
 trap = lock_rename(new_dir, old_dir); 
```

接下来，查找实际存在的文件。如果成功，则必须通过调用释放 dentry `dput(old_dentry)`：

```
 old_dentry = lookup_hash(&oldnd);
        error = PTR_ERR(old_dentry);
        if (IS_ERR(old_dentry))
                goto exit3;
        /* source must exist */
        error = -ENOENT;
        if (!old_dentry->d_inode)
                goto exit4;
        /* unless the source is a directory trailing slashes give -ENOTDIR */
        if (!S_ISDIR(old_dentry->d_inode->i_mode)) {
                error = -ENOTDIR;
                if (oldnd.last.name[oldnd.last.len])
                        goto exit4;
                if (newnd.last.name[newnd.last.len])
                        goto exit4;
        }
        /* source should not be ancestor of target */
        error = -EINVAL;
        if (old_dentry == trap)
                goto exit4; 
```

还会查找新文件名的条目（毕竟它可能存在）。同样，如果成功，这个 dentry 也必须在`dput(new_dentry)`之后使用：

```
 new_dentry = lookup_hash(&newnd);
        error = PTR_ERR(new_dentry);
        if (IS_ERR(new_dentry))
                goto exit4;
        /* target should not be an ancestor of source */
        error = -ENOTEMPTY;
        if (new_dentry == trap)
                goto exit5; 
```

此时，该功能已确定一切正常。接下来，它必须通过调用来检查操作是否可以继续（关于访问模式等）`security_path_rename(struct path *old_dir, struct dentry *old_dentry, struct path *new_dir, struct dentry *new_dentry)`。（用户空间进程的身份详细信息保存在 中`current`。）

```
 error = security_path_rename(&oldnd.path, old_dentry,
                                     &newnd.path, new_dentry);
        if (error)
                goto exit5; 
```

如果对重命名没有异议，则可以使用以下方法进行实际重命名`vfs_rename(struct inode *old_dir, struct dentry *old_dentry, struct inode *new_dir, struct dentry *new_dentry)`：

```
 error = vfs_rename(old_dir->d_inode, old_dentry,
                           new_dir->d_inode, new_dentry); 
```

至此，所有的工作都完成了（如果`error`为零则成功），剩下的就是释放各种lookup

```
exit5:
        dput(new_dentry);
exit4:
        dput(old_dentry);
exit3:
        unlock_rename(new_dir, old_dir);
        mnt_drop_write(oldnd.path.mnt);
exit2:
        path_put(&newnd.path);
        putname(to);
exit1:
        path_put(&oldnd.path);
        putname(from);
exit:
        return error;
} 
```

这就是重命名操作。如您所见，没有明确`copy_from_user()`的可见。`user_path_parent()`调用它的`getname()`调用`getname_flags()`，它执行它。如果您忽略所有必要的检查，则归结为

```
char *result = __getname();  /* Reserve PATH_MAX+1 bytes of kernel memory for one file name */
in    len;

len = strncpy_from_user(result, old/newname, PATH_MAX);
if (len <= 0) {
    __putname(result);
    /* An error occurred, abort! */
}

if (len >= PATH_MAX) {
    __putname(result);
    /* path is too long, abort! */
}

/* Finally, add it to the audit context for the current process. */
audit_getname(result); 
```

并且，在不再需要它之后，

```
putname(result); 
```

所以，footy，你的问题没有简单的解决方案。没有一个函数调用可以神奇地使您的系统调用工作。您将不得不重写它，看看这些东西是如何在`fs/namei.c`. 这并不难，但是你必须小心谨慎地去做——而且最重要的是接受“只是试图让这个简单的事情以最小的改变工作”的方法不适用于此。**

# android - 如何解析第二个 XML 标记？

> ID：12878235
> 
> 赞同：0
> 
> 时间：2012-10-14T00:20:18.623
> 
> 标签：android, xml, xml-parsing

我在网上有一个类似这样的 XML 文件：

```
<example>
    <date>2012-10-13</date>
    <bob>What I already know how to get</bob>
</example>
<example>
    <date>2012-10-14</date>
    <bob>What I want as well as the above</bob>
</example> 
```

这是我用来获取“我已经知道如何获取”标签中的数据的内容：

```
/**
 * Gets be called on opening tags like: <tag> Can provide attribute(s), when
 * xml was like: <tag attribute="attributeValue">
 */
@Override
public void startElement(String namespaceURI, String localName,
        String qName, Attributes atts) throws SAXException {
    if (localName.equals("example")) {
        this.in_example = true;
    } else if (localName.equals("bob")) {
        this.in_bob = true;
    }
}

/**
 * Gets be called on closing tags like: </tag>
 */
@Override
public void endElement(String namespaceURI, String localName, String qName)
        throws SAXException {
    if (localName.equals("example")) {
        this.in_example = false;
    } else if (localName.equals("bob")) {
        this.in_bob = false;
    }
}

/**
 * Gets be called on the following structure: <tag>characters</tag>
 */
@Override
public void characters(char ch[], int start, int length) {
    if (this.in_bob) {
                    // A custom DataParser
        myDataParser.setExtractedString(new String(ch, start, length));
    }
} 
```

好的，问题来了……我怎样才能得到“我想要的以及上面的东西”，即使它包含在与“我已经知道如何得到的东西”类似的标签中？

提前致谢 ：）

NB XML 文档就像一个预测，所以其他标签的日期和内容总是在变化的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T07:59:50.667

`<example>`如果您的文件在顶层包含两个元素，那么它就不是格式良好的 XML 文档，因此当您尝试解析它时，XML 解析器总是会给您失败。

然而，它是一个格式良好的 XML 外部实体，因此您可以通过使用实体引用将其包含到格式良好的 XML 文档中来对其进行解析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T00:47:52.407

您可以将答案添加到 a `List`of `Strings`。

修改最后一个函数如下：

```
List<String> results = new ArrayList<String>();

/**
 * Gets be called on the following structure: <tag>characters</tag>
 */
@Override
public void characters(char ch[], int start, int length) {
    if (this.in_bob) {
                    // A custom DataParser
        results.add(new String(ch, start, length));
    }
} 
```

完成 xml 浏览后，只需解析收集到的`Strings`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T22:14:59.753

正如 Michael Kay 所指出的，所示文档不是有效的 XML。

由于您似乎已经能够解析并获得第一个值，因此我认为它实际上只是较大文档的一部分。

如果你想从更多元素中收集数据，你需要收集到一个类似列表的结构中，而不仅仅是一个字符串，并正确控制何时在该列表中创建新条目。

但是该`characters`方法并不像您想象的那样与解析器一起工作。解析器可以为单个标签中的内容多次调用它。您需要将数据收集到缓冲区中，并且只希望它在`endElement`被调用时完成，而不是期望一次获得所有数据。

为了仅将“bob”数据收集到字符串列表中，可以执行以下操作：

```
public class ExampleHandler extends DefaultHandler {

    private List<String> results = new ArrayList<String>();
    private StringBuilder builder = new StringBuilder();

    @Override
    public void startElement(String namespaceURI, String localName,
                             String qName, Attributes atts) throws SAXException {
        if (localName.equals("bob")) {
            builder.setLength(0);
        }
    }

    @Override
    public void endElement(String namespaceURI, String localName, String qName)
            throws SAXException {
        if (localName.equals("bob")) {
            results.add(builder.toString());
        }
    }

    @Override
    public void characters(char[] ch, int start, int length) {
        builder.append(ch, start, length);
    }

    public List<String> getResults() {
        return results;
    }
} 
```

如果您还想收集其他数据，它当然会更复杂，并且您将收集到字符串列表以外的其他数据，但这应该给出基本概念。

# c# - 我可以在声明数组的元素编号时使用 Enums 吗？

> ID：12878239
> 
> 赞同：1
> 
> 时间：2012-10-14T00:20:41.353
> 
> 标签：c#

在创建菜单期间，我在代码中使用了以下内容。变量跟踪当前的顶部和子菜单标题：

```
 var topTitle = "";
        var subTitle = ""; 
```

我可以用使用以下枚举的数组替换它们吗？

```
public enum MenuType {
    TopMenu = 0,
    SubMenu = 1
} 
```

我假设我想要一个包含两个条目的字符串数组，但是如何设置它然后使用我的枚举引用数组内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T00:34:44.100

这不适用于枚举，枚举将名称与 int 配对，它基本上是一种拥有一堆的奇特方式：

```
const int A = 0;
const int B = 1; 
```

枚举的优点是您可以将它放在方法调用中，然后将方法的使用限制为仅在枚举中定义的 const 值。它还增加了代码的可读性。

要实现您正在寻找的内容，您需要一个 Dictionary 集合。

然后，您可以添加您的密钥对

```
Dictionary<String, String> titles = new Dictionary<String, String>();
titles.Add("topMenu", "Name of my top menu");
titles.Add("subMenu", "Name of my sub menu"); 
```

然后您可以通过以下方式更改值：

```
titles["topMenu"] = "New name of my top menu";
titles["subMenu"] = "New name of my sub menu"; 
```

看看这是否会让你到达你想去的地方。key 和 value 的类型可以是任何类型，这是一个非常有用的集合系统。

哦，添加到您的使用中：

```
using System.Collections.Generic; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T00:48:04.247

枚举值只是整数。您可以像使用整数一样使用它们。

所以这样做是正确的：

```
public enum MenuType {
    TopMenu = 0,
    SubMenu = 1
}

string[] menuLabels = new string[]{"Name Top Menu", "Name Sub Menu"}:

menuLabels[MenuType.TopMenu] // A cast may be necessary here, not sure. 
```

当然，这不是使用枚举的最佳方式，但它与使用 switch 语句一样好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T02:10:44.403

我定义了一个测试类`MenuTest`，它使用[Dictionary](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)和[这个索引器](http://msdn.microsoft.com/en-us/library/dk1507sz.aspx)：

```
public class MenuTest
{
    Dictionary<MenuType, string> myarray;

    public MenuTest()
    {
        myarray = new Dictionary<MenuType, string>();
    }

    public string this[MenuType index]
    {
        get
        {
            if (myarray.ContainsKey(index))
                return myarray[index];
            else
                return null;
        }
        set
        {
            myarray[index] = value;
        }
    }
} 
```

所以你可以使用它：

```
MenuTest t = new MenuTest();
t[MenuType.TopMenu] = "topmenu";
t[MenuType.SubMenu] = "submenu";
Console.WriteLine(t[MenuType.TopMenu]);
Console.WriteLine(t[MenuType.SubMenu]); 
```

或者，您可以使用扩展方法对字符串数组进行从 enun 到 int 的转换：

```
public static string GetMenuByType(this string[] menu, MenuType type)
{
    int index = (int)type;
    if (menu.Length > index)
        return menu[index];
    else
        return null;
} 
```

并使用它：

```
 string[] menu = new string[] { "topmenu", "submenu" };
 Console.WriteLine(menu.GetMenuByType(MenuType.TopMenu)); 
```

# c - 如何为未知长度的输入字符串分配内存？

> ID：12878240
> 
> 赞同：3
> 
> 时间：2012-10-14T00:20:42.100
> 
> 标签：c, string

这是结构：

```
typedef struct _friend {
        char *firstname;
        char *lastname;
        char birthdate[9];
} friend; 
```

我对如何让用户输入一个字符串并将其作为（或）放置在`friend`结构中感到困惑。另外，如果用户在我使用时输入超过 256 个字符怎么办？这是我目前所拥有的......`firstname``lastname``fgets`

```
friend *f = (friend *)malloc(sizeof(friend));  //initialize f pointer to friend
char *str;

fgets(str,256,stdin);
f->firstname = (char*)malloc(sizeof(char)*(strlen(str)+1));
strcpy(f->firstname,str); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T01:08:05.493

对于这个问题，没有一种万能的解决方案。任何特定的工程师都可能根据各种标准对同一问题使用几种解决方案之一：

*   解决方案应该很简单吗？
*   它是否应该灵活适应各种输入长度？
*   代码是否只能在已知有足够内存可用的有限环境中运行？
*   其他人是否必须了解解决方案，例如持续维护？

对于已知的、足够的内存环境中的简单解决方案，我可能会这样做：

```
char  buf [1000];  // for English names, this should be big enough
friend f;  // not a pointer, but a full struct
if (!fgets (buf, sizeof buf, stdin))
{
      perror ("error reading from stdin");
      return;
}
f.firstname = strdup (buf);  // allocates the right size of memory and copies

...
// when finished with the structure, deallocate the dynamic strings:
free (f.firstname); 
```

请注意这几乎完全避免了操作指针？（Only`strdup()`正在做，它巧妙地封装了基本操作。）这是健壮、低故障代码的一个特点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T01:00:49.677

好吧，由于`stdin`是缓冲输入，因此您可以使用`fgetc`逐个字符读取输入，直到遇到换行符或 EOF。也许您正在寻找这样的东西：

```
#include <stdlib.h>
#include <string.h>
#include <stdio.h>

struct friend {
        char    *firstname;
        char    *lastname;
        char     birthdate[9];
};

static char *read_line(FILE *f)
{
    char    *r = NULL;
    char    *p = r;
    char    *e = p;
    int  c;

    while ((c = fgetc(f)) != EOF) {
        if (p >= e) {
            size_t   l = e > r ? (size_t)(e - r) : 32u;
            char    *x = realloc(r, l);
            if (!x) {
                free(r);
                r = NULL;
                goto out;
            }
            p = x + (p - r);
            e = x + l;
            r = x;
        }
        if (c != '\n') {
            *p++ = (char)c;
        } else {
            *p++ = '\0';
            goto out;
        }
    }
    if (ferror(f) != 0) {
        free(r);
        r = NULL;
    }
out:
    return r;
}

int main(void)
{
    struct friend f;

    memset(&f, 0, sizeof(struct friend));

    printf("Please enter your first name: ");
    fflush(stdout);
    f.firstname = read_line(stdin);
    if (!f.firstname)
        goto on_error;
    printf("Please enter your last name: ");
    fflush(stdout);
    f.lastname = read_line(stdin);
    if (!f.lastname)
        goto on_error;

    printf("You first name is: %s\n", f.firstname);
    printf("Your last name is: %s\n", f.lastname);

    free(f.firstname);
    free(f.lastname);
    return EXIT_SUCCESS;

on_error:
    perror("read_line");
    free(f.firstname);
    free(f.lastname);
    return EXIT_FAILURE;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T00:52:15.360

不。

有一个单独的缓冲区供用户输入。然后在用户将数据输入此缓冲区后，您对其进行解析并确定它是否正常（例如，它是否不是空字符串，并且它是否不包含任何数字或其他奇怪的字符），并去除多余的空格等。如果数据是可接受的，确定它的实际长度并分配正确的内存量以将其复制到。

为了让用户输入到单独的缓冲区，不要使用`fgets()`. 而是`fgetc()`在循环中使用，以便您可以在必要时增加缓冲区的大小。例如，您可以从一个 32 字节的小缓冲区开始，然后在缓冲区`realloc()`满时将缓冲区的大小加倍（带有 ）。

# c++ - 为什么我可以在函数的return语句后输入任意多的分号？

> ID：12878242
> 
> 赞同：0
> 
> 时间：2012-10-14T00:21:56.937
> 
> 标签：c++

我发现在函数返回语句中我能够做到这一点。

```
int f() {
    return 1;;;;;;;;;;;;;;;;;;;;;;;; // ...;;;
} 
```

我可以根据需要添加任意数量的分号，并且上述内容不会导致任何编译器或运行时错误。这让我来自像 C++ 这样严格的语言感到惊讶。有人可以解释为什么我能够做到这一点吗？但是，我*无法*在任何其他情况下执行此操作。

```
int x = 1;;;; // error 
```

那么有人可以告诉我为什么我能够做这样的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T00:29:08.167

引自 K&R，表达式语句有 product `expression-statement: expression;`。

> 如果缺少表达式，则构造称为空语句；它通常用于为迭代语句提供空主体以放置标签。

它是一种有效的语言结构，因此您的编译器不会抱怨。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T00:22:47.703

它们只是空洞的陈述。

```
return 1;
; //do nothing
; //do nothing
//etc 
```

我敢打赌，您所看到的差异`int x = 0;;;;;`是在全球范围内，所以 -pedantic 明白了。这就像在函数定义后多了一个分号。进入`int x = 0;;;;`一个函数，它不会抱怨。

# linux - Propel 生成 0 而不是 false

> ID：12878243
> 
> 赞同：-2
> 
> 时间：2012-10-14T00:22:06.197
> 
> 标签：linux, postgresql, propel

我的项目和推进 orm 有问题。当我使用 find() 推进时，会生成一个 0 而不是 false 的查询，并且我的 postgres 给了我一个异常。例子：

...在哪里 documento.DOCUMENTO_ELIMINADO=0...

我希望你能帮助我。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T03:50:47.583

你重建你的模型了吗？Propel ORM 的首页建议当您更改数据库时这是必要的。

在 PostgreSQL 中，比较布尔值和整数会失败：

```
regress=# SELECT 0 == 'f'::boolean;
ERROR:  operator does not exist: integer == boolean
LINE 1: SELECT 0 == 'f'::boolean;
                 ^ 
```

所以我猜你的 ORM 认为它正在与 MySQL 对话。猜测，因为您提供的信息很少。

否则：需要更多信息。查询、错误消息的准确文本、表定义等。

# sql - 根据表 B 中的某些字段从表 A 中选择

> ID：12878244
> 
> 赞同：0
> 
> 时间：2012-10-14T00:22:41.293
> 
> 标签：sql, sql-server

我有

```
TableA (TableAId int PK, Name varchar) 
TableB (OtherId, TableAId FK, TimeBegin timestamp ,TimeEnd timestamp) 
```

我想从 TableB 中的 TimeEnd = NULL 的 TableA Name(s) 中进行选择。

尝试过这样的事情：

```
SELECT     TableAId, Name
FROM       TableA
WHERE      
(
TableAId NOT IN 
                (
                 SELECT TableAId FROM TableB WHERE TimeEnd is null
                )
); 
```

它工作正常，当我有一些记录的 TimeEnd 为空而一些记录的 TimeEnd 不为空时，但当我没有设置 TimeEnd 的记录时它不起作用。

如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T00:33:05.353

试试这个

```
Select * from TableA a
Left Join TableB b ON a.TableAId = b.TableAId 
WHERE b.TimeEnd IS NULL 
```

对于非空

```
Select * from TableA a
Left Join TableB b ON a.TableAId = b.TableAId 
WHERE b.TimeEnd IS NOT NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T02:43:58.447

根据您的问题，有两种可能的答案：

```
IF OBJECT_ID('dbo.TableB') IS NOT NULL 
  DROP TABLE dbo.TableB;
IF OBJECT_ID('dbo.TableA') IS NOT NULL 
  DROP TABLE dbo.TableA;

CREATE TABLE dbo.TableA
  (
    TableAId INT PRIMARY KEY,
    Name VARCHAR(100)
  ); 
CREATE TABLE dbo.TableB
  (
    OtherId INT PRIMARY KEY,
    TableAId INT FOREIGN KEY REFERENCES TableA ( TableAId ),
    TimeBegin DATETIME,
    TimeEnd DATETIME
  );

INSERT  INTO dbo.TableA
        ( TableAId, Name )
VALUES  ( 1, 'aaa' ),
        ( 2, 'bbb' ),
        ( 3, 'ccc' ),
        ( 4, 'ddd' );

INSERT  INTO dbo.TableB
        ( OtherId, TableAId, TimeBegin, TimeEnd )
VALUES  ( 1, 1, GETDATE(), NULL ),
        ( 2, 2, GETDATE(), GETDATE() ),
        ( 3, 2, GETDATE(), NULL ),
        ( 4, 3, GETDATE(), GETDATE() );

SELECT  A.*
FROM    dbo.TableA A
WHERE   EXISTS ( SELECT 1
                 FROM   dbo.TableB B
                 WHERE  A.TableAId = B.TableAId
                        AND B.TimeEnd IS NULL );

SELECT  A.*
FROM    dbo.TableA A
WHERE   EXISTS ( SELECT 1
                 FROM   dbo.TableB B
                 WHERE  A.TableAId = B.TableAId
                        AND B.TimeEnd IS NULL )
        AND NOT EXISTS ( SELECT 1
                         FROM   dbo.TableB B
                         WHERE  A.TableAId = B.TableAId
                                AND B.TimeEnd IS NOT NULL ); 
```

第一个选择返回 TableA 中的所有记录，其中在 TableB 中存在至少一个匹配记录且 TimeEnd 为 NULL。

第二个选择返回 TableA 中所有匹配记录在 TableB fullfil TimeEnd 中为 NULL 的记录。

第二个选择可以重写为

```
SELECT  A.*
FROM    dbo.TableA A
LEFT JOIN ( SELECT  TableAId,
                    MIN(CASE WHEN TimeEnd IS NULL THEN 1
                             ELSE 0
                        END) AllAreNull
            FROM    dbo.TableB
            GROUP BY TableAId
          ) AS B
        ON A.TableAId = B.TableAId
WHERE   B.AllAreNull = 1; 
```

这有点不太容易理解，但在大多数情况下应该执行得更快。但是您应该运行自己的性能测试以确保。

如果 TableA 中的每条记录在 TableB 中最多有一条记录，则可以使用第一个 select 语句。

最后，您的代码与描述文本不匹配。如果您实际上正在寻找具有 endtime 值的记录，则需要在上述所有选择语句中将 IS NULL 与 IS NOT NULL 切换出来，反之亦然。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T00:26:58.527

我认为您可能需要先加入 2 个表，如以下示例所示：

```
SELECT     TableA.TableAId, TableA.Name
FROM       TableA
INNER JOIN TableB
ON TableA.TableAId = TableB.TableAId
WHERE      
(
TableA.TableAId NOT IN 
                (
                 SELECT TableAId FROM TableB WHERE TimeEnd is null
                )
); 
```

# c# - MVC4 在主页登录时显示模型状态错误消息

> ID：12878246
> 
> 赞同：1
> 
> 时间：2012-10-14T00:22:49.000
> 
> 标签：c#, asp.net-mvc

我的主页上有一个登录表单。它有效 - 但如果密码错误，我想显示错误消息。我的代码如下。如何返回到同一页面但在 Index 方法中检索模型状态错误？

```
[HttpPost]
        [AllowAnonymous]
        [ValidateAntiForgeryToken]
        public ActionResult HomeLogin(LoginModel model, string returnUrl)
        {
            if (ModelState.IsValid && WebSecurity.Login(model.UserName, model.Password, persistCookie: model.RememberMe))
            {
                return RedirectToLocal(returnUrl);
            }

            // If we got this far, something failed, redisplay form
            ModelState.AddModelError("", "The user name or password provided is incorrect.");
            return RedirectToAction("Index");

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T00:30:49.007

# 编辑

由于您使用的是 RedirectToAction 方法，因此我想到的选项是使用 TempData 对象。

在控制器方法中：

```
TempData["ErrorMessage"] = "The user name or password provided is incorrect."; 
```

在您的视图中，您可以检查消息是否已设置，如果已设置则显示。

```
@if(TempData["ErrorMessage"] != null)
{
    <p class="errorMessage">@TempData["ErrorMessage"]</p>
} 
```

# php - 在 PHP 循环中一起附加 MySQL 结果

> ID：12878249
> 
> 赞同：0
> 
> 时间：2012-10-14T00:23:07.320
> 
> 标签：php, mysql, while-loop

使用 PHP，对于 MySQL 查询结果集中的每一行，我需要执行另一个 MySQL 查询。到目前为止，我有

```
$result = mysql_query("SELECT id, state FROM states WHERE region='given_region'")
or die(mysql_error());

while($row = mysql_fetch_row($result))
{
    $state = $row['state'];
    $r = mysql_query("SELECT * FROM locations WHERE state REGEXP '(^|,)".$state."($|,)'");
} 
```

现在我需要将所有结果 $r 附加到一个结果集中，然后我可以使用标准的 while 循环进行迭代，但是，我非常有限的 PHP 技能让我不知所措地获取代码来做到这一点。

任何人都可以提供有关我将如何将所有结果附加到给定while循环中的一组中的任何见解吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T00:25:00.197

了解[SQL 连接](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)：

```
SELECT states.id, states.state, locations.*
FROM   states LEFT JOIN locations USING(state)
WHERE  states.region = 'given_region' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T00:30:23.837

您可以尝试使用 foreach 而不是 while。我很抱歉，但我并没有真正得到这个问题。

如果您使用 foreach，您可以根据需要生成整个表格。让我给你举个例子：

```
<?php
Foreach($result as $output) : ?>
<div id="results">
<table id="generated table">
<tr>
<td><?php echo $output->id ?></td><td> <?php echo $output->state ?></td>
</tr>
</table>
<?php endforeach ?>
 </div> 
```

请注意，如果您使用 foreaches，您可以只获取整个表，而不是使用查询来选择几列。然后通过 foreach 输出列数据（使用 $output->columnname 命令）

# mysql - MySQL加入第二个表，没有唯一的外键

> ID：12878251
> 
> 赞同：2
> 
> 时间：2012-10-14T00:23:29.643
> 
> 标签：mysql, sql, database

我有 2 个需要查询的表。我不能为链接键设置唯一值。第一个表存储每个孩子的故事或帖子。

```
CREATE TABLE IF NOT EXISTS `learning_story` (
  `story_id` int(10) NOT NULL AUTO_INCREMENT,
  `child_id` int(10) NOT NULL,
  `img_file` varchar(250) NOT NULL,
  `title` varchar(300) NOT NULL,
  `description` text NOT NULL,
  `link` varchar(300) NOT NULL,
  `storydate` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `teacher_id` int(11) NOT NULL,
  `pro_id` int(10) NOT NULL DEFAULT '0',
  `status` varchar(10) NOT NULL DEFAULT 'draft',
  PRIMARY KEY (`story_id`),
  KEY `child_id` (`child_id`),
  KEY `pro_id` (`pro_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=0 ; 
```

每个故事或帖子对孩子来说都是唯一的（child_id 外键）。现在我正在添加添加属于一组孩子的帖子的功能。这里有 4 个示例行

```
INSERT INTO `learning_story` (`story_id`, `child_id`, `img_file`, `title`, `description`, `link`, `storydate`, `teacher_id`, `pro_id`, `status`) VALUES
(1, 5, '', 'Story 1', '<p><img src="http://127.0.0.1/websites/my-books/assets/mercury_img/2dfeb1f41c48a308b7eee8526918ebb7.JPG" style="cursor: default; width: 222.28915662650604px; height: 125px; float: right; margin: 0px 0px 10px 10px; " alt=""></p><p><img src="http://127.0.0.1/websites/my-books/img/timbthumb.php?src=http://127.0.0.1/websites/my-books/assets/2/children/test_09.JPG&q=100&w=180&h=130" alt="imagetitle" style="cursor: default; ">dsd sdsdsd s ds ffdfdf </p>\r\n', '', '2012-10-08 20:42:05', 0, 2, 'draft'),
(12, 5, '', 'Teachers Final Test 33', '<p>ds sd sd sd sd  dsdsd dsd sd s </p><p><br></p><p>Tweety</p>\r\n', '', '2012-10-12 12:19:45', 31, 2, 'draft'),
(30, 6, '', 'Boys High Choir', '<p>sasassa</p>', '', '2012-10-14 09:55:08', 0, 2, 'draft'),
(32, 0, '', 'Story Not Mine ID 5', '<p>dsd sd sd s ds ds ds sd sd </p>\r\n', '', '2012-10-14 12:21:36', 0, 2, 'draft'); 
```

其中有 1 条记录的 child_id 设置为 0。这条记录属于第二张表中的 child_id。

第二张桌子

```
CREATE TABLE IF NOT EXISTS `story_groups` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `child_id` int(10) NOT NULL,
  `story_id` int(10) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=112 ;

INSERT INTO `story_groups` (`id`, `child_id`, `story_id`) VALUES
(40, 7, 30),
(41, 8, 30),
(107, 8, 32),
(108, 9, 32),
(109, 11, 32),
(110, 12, 32),
(111, 5, 32); 
```

所以我想为孩子获取所有故事/帖子。包括小组故事。

我已经尝试过 UNION 匹配和一堆 JOIN 组合，但我就是无法破解它。

这可能是一个简单的 JOIN 操作，我无法破解。

有人可以帮我编写查询以包含 story_groups 表中的行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T00:34:21.950

```
SELECT learning_story.*
FROM   learning_story LEFT JOIN story_groups USING (story_id)
WHERE  learning_story.child_id = ? OR story_groups.child_id = ? 
```

# xamarin.ios - ServiceStack 可以用于 Monotouch 和 Mono for Droid 的 HTTP 服务器推送（HTTP 流）吗

> ID：12878253
> 
> 赞同：2
> 
> 时间：2012-10-14T00:23:49.403
> 
> 标签：xamarin.ios, xamarin.android, push, servicestack, restsharp

ServiceStack 可以用于 Monotouch 和 Mono for Droid 的 HTTP 服务器推送（HTTP 流）吗

我对 HTTP 流的理解是，在响应允许将其他数据推送到客户端或浏览器之后，连接保持打开状态。

RestSharp 也可以工作。如果考虑到 Monotouch/droid，这些工作建议都不受欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T22:39:46.367

### 长轮询

ServiceStack 服务通常用于请求/响应类型的服务。最简单的 Comet 风格/（又名 HTTP 推送）解决方案是使用长轮询，我在这个[ServiceStack 组线程](https://groups.google.com/forum/#!msg/servicestack/T0lMiJk3YBg/GTZIPGx0uwQJ)中详细介绍了如何做到这一点。

### 保持工作线程打开

ServiceStack 还支持`IStreamWriter`您可以返回直接写入 HTTP 响应输出流的对象，可以在此 Web 服务示例服务中看到一个示例，该服务将[图像直接写入响应流](https://github.com/ServiceStack/ServiceStack/blob/master/tests/ServiceStack.WebHost.IntegrationTests/Services/HelloImage.cs#L75)。这里的问题是，如果您想保持打开的连接，您将阻塞 HTTP Worker 线程。长轮询会在短时间内释放连接，因此

### 使用您自己的自定义 ASP.NET IHttpAsyncHandler 绕过 ServiceStack

最后，另一种选择是绕过 ServiceStack 的 Web 服务来执行此特定任务，并在 ASP.NET`IHttpHandler`和`IHttpAsyncHandler`. 您可以通过以下方式在 ServiceStack 中注册您自己`RawHttpHandlers`的：

```
SetConfig(new EndpointHostConfig {
    RawHttpHandlers = { httpReq => 
        httpReq.PathInfo.StartsWith("/streaming")
           ? new MyStreamingHandler() 
           : null; 
    }
}); 
```

在您的处理程序中，您可以通过 Singleton 访问您的 ServiceStack 依赖项，例如：

```
var myDep = EndpointHost.AppHost.TryResolve<IMyDependency>(); 
```

# html - html5 数据属性向后兼容

> ID：12878258
> 
> 赞同：4
> 
> 时间：2012-10-14T00:25:30.630
> 
> 标签：html, backwards-compatibility

我一直在阅读 html 网页的自定义数据属性（[众多示例之一](https://stackoverflow.com/questions/209428/non-standard-attributes-on-html-tags-good-thing-bad-thing-your-thoughts)）。据我所知，这可能是最好的解决方案。

```
<div data-my_attrib="stackoverflow"></div> 
```

我的问题与向后兼容性有关。

假设 html 标准规定应忽略未知属性（我已多次阅读此评论，我自己并没有真正阅读标准：P），但是否有任何已知浏览器（包括过去的版本，包括移动版和基于 PC 的) 新的自定义属性规范可能有问题？如果有，有哪些？

此外，是否`data-something`已经为旧浏览器定义了任何已知的可能问题（`something`是任意占位符）？重点是核心浏览器功能（包括浏览器附带的标准插件），忽略 JQuery 等网站脚本/库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T00:28:54.110

未知属性会被忽略，因为它们不执行任何操作，但仍可用于`getAttribute`检索。

我相当肯定假设它`data-*`不用于其他任何东西是安全的 - 否则他们会选择一个不与其他东西冲突的不同识别关键字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T00:28:38.110

属性的向后兼容性没有已知问题`data-*`，当然对于您实际上可能遇到的任何浏览器都没有。

整个不要破坏旧浏览器的事情是 HTML5 的指导原则之一。

# ruby - 如何读取 XML 文件，对其中的一部分进行排序，然后写入？

> ID：12878259
> 
> 赞同：0
> 
> 时间：2012-10-14T00:25:38.557
> 
> 标签：ruby, nokogiri

我想制作一个快速的 Ruby 程序，它允许我读取 XML 文件并对一组特定的子项进行排序，然后将其写回磁盘上排序。例如：

我想从我制作的这个 XML 文件中进行排序：

```
<Nodes>
    <Node1>
        <Name>Fruits</Name>
        <Properties>
            <Property>
                <Name>Orange<Name>
            </Property>
            <Property>
                <Name>Vinegar<Name>
            </Property>
            <Property>
                <Name>Apple<Name>
            </Property>
        </Properties>
    </Node1>
    <Node2>
        <Name>Furniture</Name>
        <Properties>
            <Property>
                <Name>Table</Name>
            </Property>
            <Property>
                <Name>Desk</Name>
            </Property>
            <Property>
                <Name>Bed</Name>
            </Property>
        </Properties>
    </Node2>
</Nodes> 
```

我想按字母顺序对节点属性的子节点进行排序，即：

```
<Property>
    <Name>Apple<Name>
</Property>
<Property>
    <Name>Orange<Name>
</Property>
<Property>
    <Name>Vinegar<Name>
</Property> 
```

有没有办法可以用 Ruby 快速做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T01:32:02.220

正如您已经从标签的选择中知道的那样，您选择的工具将是 Nokogiri。我在解析您的 XML 时遇到了一些问题，所以我将其重写如下：

```
# sortnodes.xml
<nodes>
  <node1>
    <name>Fruits</name>
    <properties>
      <property>
        <name>Orange</name>
      </property>
      <property>
        <name>Vinegar</name>
      </property>
      <property>
        <name>Apple</name>
      </property>
    </properties>
  </node1>
  <node2>
    <name>Furniture</name>
    <properties>
      <property>
        <name>Table</name>
      </property>
      <property>
        <name>Desk</name>
      </property>
      <property>
        <name>Bed</name>
      </property>
    </properties>
  </node2>
</nodes> 
```

而对应的代码是：

```
require 'nokogiri'

f = File.open("sortnodes.xml")
doc = Nokogiri::XML(f)
f.close
doc.xpath('/nodes//properties').each do |properties| 
  sorted = properties.children.sort_by { |n| n.text }
  sorted.each { |n| properties << n } 
end 
```

# android - Mobiwire Aquila

> ID：12878261
> 
> 赞同：1
> 
> 时间：2012-10-14T00:26:03.127
> 
> 标签：android

大家好（和女孩：），

我有问题。我买了[这款手机](http://mobiwire.com/portfolio/aquila/)，说实话，这个价位的手机还不错。现在的问题是我在 linux 上进行 android 开发，如果你想在手机上测试你的应用程序，你需要为它编写 udev 规则。现在我以前写过udev规则，不是火箭科学。问题是 MobiWire 未在 google android 开发者[页面](http://developer.android.com/tools/device.html)上列出。

我试过用谷歌搜索，但没有运气，所以如果有人知道如何解决这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T23:04:27.583

好的，我解决了这个问题。它没有那么复杂。

首先找出您设备的 USB ID，使用命令：

```
lsusb 
```

这将为您提供有趣的输出，您正在寻找的行是这一行：

```
Bus 002 Device 010: ID 0bb4:0c03 High Tech Computer Corp. 
```

或者类似于这个的东西。在将设备连接到计算机之前，我执行了一个 lsusb 命令，之后又执行了一个命令，然后我只是对这些输出进行了比较，以获得我需要的线路。在这里，您将在输出中获得设备 ID。对于 MobiWire Aquila 设备 ID 与您在上面看到的 HTC 设备相同，ID="0bb4"。现在我们可以开始为这个设备编写 udev 规则了。

以超级用户身份打开此文件：“/etc/udev/rules.d/51-android.rules”，如果您想支持所有预定义 ID，请[将此文件](https://gist.github.com/3890058)复制到其中。现在您需要重新启动 udev 守护程序。如果您在 ubuntu 上，请执行以下操作：

```
sudo service udev restart 
```

或者您可以使用 udevadm 重新加载规则，如下所示：

```
udevadm control --reload-rules 
```

好的，到这里就差不多完成了。现在您需要检查这是否有效。我们将使用您通过 android-sdk 获得的 adb 工具来检查它，实际上，当您更新 android-sdk 中的平台工具时，您现在就可以得到它。[从这里](http://developer.android.com/sdk/index.html)下载 android-sdk 。下载后解压，进入文件夹。打这个命令：

```
tools/android update sdk --no-ui 
```

这将下载平台工具，其中一个工具是 adb（android 调试桥），它是用于处理连接设备的客户端-服务器程序。现在在这里以超级用户模式启动这个adb服务器非常重要，否则你会在设备上得到权限错误。为此，请输入“android-sdk/platform-tools”并点击：

```
sudo ./adb start-server 
```

这将启动 adb 服务器。现在转到您的设备，转到设置->应用程序->开发并启用USB调试模式并将您的设备与计算机连接。一旦你这样做了，在你的终端中点击这个命令：

```
./adb devices 
```

希望你应该看到这样的东西作为你的输出。

```
(1:2008)$ ./adb devices
List of devices attached 
0123456789ABCDEF    device 
```

就是这样，快乐的发展。:)

# lisp - Lisp 方案中作为未绑定变量的错误

> ID：12878262
> 
> 赞同：-4
> 
> 时间：2012-10-14T00:26:06.940
> 
> 标签：lisp, scheme

我只需输入简单的代码，例如

```
(define pi 3.14)
(* 2 pi) 
```

而且我总是收到标题之类的错误消息，这是详细信息：

```
(define p 2)
(+ 1 p)
;Unbound variable: p
;To continue, call RESTART with an option number:
; (RESTART 6) => Specify a value to use instead of p.
; (RESTART 5) => Define p to a given value.
; (RESTART 4) => Return to read-eval-print level 4.
; (RESTART 3) => Return to read-eval-print level 3.
; (RESTART 2) => Return to read-eval-print level 2.
; (RESTART 1) => Return to read-eval-print level 1.
;Start debugger? (y or n): n 
```

我正在使用 GNU 方案拦截器，当我输入

```
(define p 2)
    (+ 1 p) 
```

我使用 Cx Ce 来运行命令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T17:17:41.043

我认为您正在寻找的是：“CMz，它评估 [突出显示] 区域中的所有表达式，以及 Mo，它评估整个缓冲区。” 更多[在这里。](http://www.gnu.org/software/mit-scheme/documentation/mit-scheme-user/Edwin-Scheme-Evaluation.html#Edwin-Scheme-Evaluation)

# knockout.js - Knockout.js 待办事项列表

> ID：12878269
> 
> 赞同：2
> 
> 时间：2012-10-14T00:27:20.070
> 
> 标签：knockout.js, javascript, knockout-mapping-plugin, knockout-2.0

我正在尝试通过松散地遵循 Knockout 站点上的交互式教程来创建一个简单的 ToDo 列表。

我可以将项目添加到列表中，但无法删除它。我究竟做错了什么 ？？

```
function ToDo(stuff) {
    this.toDoItem = stuff;
}

function ToDoViewModel() {

    this.toDoItems = ko.observableArray([
        new ToDo("Watch Person of Interest"),
        new ToDo("Study for Midterm exam"),
        new ToDo("Buy groceries for Luis")
    ]);

    this.addToDoItem = function() {
        this.toDoItems.push(new ToDo($('.txt').val()));
        $('.txt').val('');
    }

    this.removeToDoItem = function(item) { 
        this.toDoItems.remove(item); 
    }
}

ko.applyBindings(new ToDoViewModel()); 
```

这是“body”标签内的标记：

```
<table>
<tr>
    <td>ToDo List</td>
</tr>
<tbody data-bind="foreach: toDoItems">
    <tr>
        <td><label data-bind="text: toDoItem"></label></td>            
        <td><a href="#" data-bind="click: $root.removeToDoItem">Remove</a></td>
    </tr>    
</tbody>
</table>

<input class="txt"/>
<button data-bind="click: addToDoItem">Add Item</button> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T00:47:46.623

范围是你的问题。您应该看到的错误是：

> 类型错误：this.toDoItems 未定义

（或类似的东西）这本质上意味着它`this`不在范围内，`ToDoViewModel`而是在点击事件范围内，因此`this`不同的对象引用也是如此（因此没有`removeToDoItem`方法）。

但是，如果您存储参考（如许多使用 的示例`var self = this`），您可以稍后参考`self.toDoItems`，列表将被定位。基本上：

```
function ToDoViewModel(){
  var self = this; // add this line

  //...

  self.removeToDoItem = function(item){
    // now keep referencing `self`
    self.toDoItems.remove(item);
  }
} 
```

您可能可以更改对`this.`to的所有引用`self.`（只要它引用 ViewModel 直接范围内的对象）。

可以在[此处](http://jsfiddle.net/bradchristie/aLV7p/)找到更新的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T01:21:25.877

在“removeToDoItem”函数中，“this”并不意味着你认为它做了什么。

解决方案是在 ToDoViewModel 中定义一个私有变量并将其分配给它。

```
function ToDoViewModel() {
var that=this; 
```

然后在 removeToDoItem 你可以参考它。

```
this.removeToDoItem = function(item) { 
    that.toDoItems.remove(item); 
} 
```

# android - Android 最近的应用缩略图

> ID：12878278
> 
> 赞同：5
> 
> 时间：2012-10-14T00:29:11.977
> 
> 标签：android, thumbnails

我的应用在 ICS 和 JB 设备上的最新应用列表中显示不正确。

缩略图被剪切、扭曲，有时我的应用程序会出现完全不同的应用程序的屏幕截图。

某些活动可能不会显示，尽管它们未标记为从最近排除。

什么可能是错的，我应该怎么做才能解决这个问题？

# css - Chrome Web 开发工具，无法进行实时 CSS 编辑，重置为默认值

> ID：12878279
> 
> 赞同：22
> 
> 时间：2012-10-14T00:29:42.910
> 
> 标签：css, google-chrome, google-chrome-devtools

出现奇怪的 Chrome Web 开发人员工具行为。当我尝试更改元素的现有 CSS 属性时，按 Enter 后，它会重置为以前的默认状态。早些时候，一切正常。已禁用所有扩展，没有任何变化。这是什么？ps Chrome 版本 22.0.1229.94m

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T09:48:32.150

[http://code.google.com/p/chromium/issues/detail?id=155795](http://code.google.com/p/chromium/issues/detail?id=155795)已在树梢修复，该修复最终将传播到 Chrome 23（当前 beta）和 Chrome 22（当前稳定） . 很抱歉，感谢您的耐心等待。

无论如何，请检查您的样式表是否有错误，因为此类问题仅在编辑损坏的样式表时才会发生。[http://jigsaw.w3.org/css-validator/](http://jigsaw.w3.org/css-validator/)是一个很好用的工具（注意“Parse error”错误。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-17T21:45:34.843

我不确定这是否是同一个问题，但我发现当 AdBlock Plus 扩展程序处于活动状态时这无法正常工作..

这可能是错误，但我无法确定。
[https://code.google.com/p/chromium/issues/detail?id=138854&can=1&q=adblock%20cr%3DPlatform-DevTools&colspec=ID%20Pri%20M%20Iteration%20ReleaseBlock%20Cr%20Status%20Owner%20Summary% 20修改](https://code.google.com/p/chromium/issues/detail?id=138854&can=1&q=adblock%20cr%3DPlatform-DevTools&colspec=ID%20Pri%20M%20Iteration%20ReleaseBlock%20Cr%20Status%20Owner%20Summary%20Modified)

我发现只需单击 ABP 图标并为有问题的站点禁用它即可恢复功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-12T10:53:14.633

@viewport 的 Chrome 错误是我的原因：[https ://code.google.com/p/chromium/issues/detail?id=278289](https://code.google.com/p/chromium/issues/detail?id=278289)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-31T17:18:54.780

一定要检查你的样式表是否有错误——它甚至可能不是任何明显的或 CSS 检查器会发现的东西。

在我的例子中，有问题的样式是一些**输入元素伪选择器**，用于设置占位符文本的样式。删除了线条，它再次完美运行！

**编辑：** 在我的情况下，错误似乎是由于将*任何非 webkit 前缀的*输入占位符伪选择器放置在媒体查询中而导致的。去搞清楚...

现在要弄清楚为什么这是一个问题......

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-13T16:21:42.287

这对我有用。

在 Chrome 开发人员工具 > 设置 > 常规选项卡下，选中以下选项：

禁用缓存（在 DevTools 打开时）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-03T19:34:40.830

我在一个网站上遇到了这个问题，我把它缩小到缺少背景资源。

我已经切换到使用 FireFox 进行实时 CSS 编辑，从未遇到过 FireBug 扩展的问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-08-04T19:42:07.503

重新启动 Chrome 并重试...您也可以尝试在新标签页中重新加载页面。

这可能是一个 Chrome 错误。当我使用 jQuery`css()`命令将样式应用于元素时，它会发生在我身上，但我想它也可能发生在许多其他场景中。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-01-10T03:28:38.153

我遇到过同样的问题。**确保文件名正确后，从工作区中删除该文件夹，然后再次添加它，**使实时编辑能够在本地文件的 chrome 上再次像往常一样工作。

# c++ - 通过引用传递指向二维数组的指针

> ID：12878281
> 
> 赞同：0
> 
> 时间：2012-10-14T00:30:18.747
> 
> 标签：c++, multidimensional-array

我只是想知道——这是在函数中通过引用传递指向二维数组的指针的正确方法吗？

```
bool test::testTheNumber(test (*arr)[9][9], int testNumber, int row, int column)
{
    if(theRow(arr, testNumber, row) && theColumn(arr, testNumber, column))
     ....
} 
```

我的“theRow”和“theColumn”答案与测试函数非常相似：

```
bool sodoku::theRow(sodoku (*arr)[9][9], int testNumber, int row)

bool sodoku::theColumn(sodoku (*arr)[9][9], int testNumber, int column) 
```

在我的 main.cpp 中，我有一个指向二维数组的指针，我这样调用我的函数：

```
test *arr[9][9];
theRow(arr,0,0);
theColumn(arr,0,0);
testTheNumber(arr,0,0,0,0); 
```

数组是通过引用传递还是必须使用 & 而不是 *？我只是有点困惑，因为我不完全确定二维数组将如何工作。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T00:38:20.383

这

```
bool test::testTheNumber(test (*arr)[9], int testNumber, int row, int column)
{
    if(theRow(arr, testNumber, row) && theColumn(arr, testNumber, column))
     ....
} 
```

或者

```
bool test::testTheNumber(test arr[][9], int testNumber, int row, int column)
{
    if(theRow(arr, testNumber, row) && theColumn(arr, testNumber, column))
     ....
} 
```

不需要数组中的第一个维度。

实际上，默认情况下，数组是通过引用传递的。你不需要一个`&`.

有关更多信息，您可能需要阅读[此问题的答案](https://stackoverflow.com/questions/4810664/how-do-i-use-arrays-in-c/4810676#4810676)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T01:42:30.763

C 数组非常混乱，C++ 继承了与 C 兼容的混乱。要了解数组的工作原理，基础知识是：

1）数组变量在表达式中表现为指向其第一个元素的指针，除了它是常量（即您不能执行“array = p;”）并且 sizeof(array) 将为您提供数组的大小（一个元素的大小乘以元素的数量），而 sizeof(pointer) 将为您提供指针的大小。

```
int array[5];
int* p = array; 
```

那么下面的表达式为真：

```
array[0] == *array
sizeof(array) == sizeof(int)*5
sizeof(p) == sizeof(void*) 
```

2) 当您将函数的参数定义为数组时，它总是作为指向第一个元素的指针传递。并且在函数中表现得如此。实际上，在这种情况下，C 会忽略传递数组的大小。更重要的是，在函数中将参数定义为数组或指向数组元素的指针被编译器认为是相同的。所以：

```
void func(int array[5]);
void func(int array[]);
void func(int *array); 
```

声明完全相同的函数，在这个函数内部，sizeof(array)==sizeof(void*)

因此，数组似乎总是通过引用传递，看起来像是指向其第一个元素的指针。

现在，多维数组实际上只是一维数组，其元素是数组。C/C++ 中令人困惑的部分是 C/C++ 通常定义类型的令人困惑的方式。所以：

```
test* array[9][9]; 
```

请记住，要读取 C/C++ 类型，您从标识符开始，并且 [] 和 () 具有优先级，因此数组是 9 个元素的数组（第一个 [9]），它是 9 个元素的数组（第二个 [9]）它们是指向“test”类型的指针。

现在对于此方法中的 arr 参数：

```
bool sodoku::theRow(test (*arr)[9][9], int testNumber, int row) 
```

arr 是指向由 9 个“测试”元素组成的 9 个数组的指针（括号改变优先级）。

这与上面前面的“array”变量非常不同，尤其是因为“array”包含指向“test”的指针，而 arr 包含“test”元素......

顺便说一句，以下声明完全相同：

```
bool sodoku::theRow(test arr[][9][9], int testNumber, int row) 
```

因为“arr”也可以解释为指向9个数组的第一个元素的指针到9个“test”......

在实践中，您可能想要做的是传递 9 个“测试”数组的数组，所以：

```
boot sudoku::theRow(test arr[][9], int testNumber, int row)
{ ... }

test array[9][9];
sudoku::theRow(array, 0, 0); 
```

该方法也可以定义为：

```
boot sudoku::theRow(test (*arr)[9], int testNumber, int row)
{ ... } 
```

互联网上有很多关于这种非常混乱的 C/C++ 数组/指针混合的信息，例如： http: [//pw1.netcom.com/~tjensen/ptr/pointers.htm](http://pw1.netcom.com/~tjensen/ptr/pointers.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T01:22:51.263

```
bool test::testTheNumber(test (*arr)[9][9], int testNumber, int row, int column) 
```

> 这是在函数中通过引用传递指向二维数组的指针的正确方法吗？

从技术上讲，这不是通过引用传递数组，而是通过值传递指向数组的指针。其他方面的语义非常相似。*要通过引用*将9x9 整数数组传递给函数，签名将是：

```
bool test::testTheNumber(test (&arr)[9][9], int testNumber, int row, int column) 
```

请注意，唯一的区别是将`*`(pointer) 更改为`&`(reference)。它的用途是：

```
int main() {
   test array[9][9];
   test t;
   t.testTheNumber(array,1,2,3);
} 
```

（这是否有意义是完全不同的事情......例如，您可能想要提供非成员函数而不是成员函数）

Geoff 的两个建议都是等效的，它们的问题是在更改接口时，数组的大小在签名中并不固定。也就是说，该函数将采用 9x9 的数组，但它也将接受 2x9,3x9...Nx9 的数组。

```
bool f(int (*arr)[9]);
int main() {
    int array[9][9];
    f(array);          // ok, but so is:
    int array2[3][9];
    f(array2);
} 
```

正如你所看到的，通过改变函数参数的类型，第一个维度现在是*自由*的，编译器会很乐意接受那里的*任何*大小，所以它是一个比原始维度更糟糕的选择。

最后，我的建议是创建一个表示 9x9 矩阵的类型并传递对该类型的引用。

# haskell - WAI 应用程序适用于 ghci，但不适用于 runhaskell

> ID：12878282
> 
> 赞同：0
> 
> 时间：2012-10-14T00:30:21.877
> 
> 标签：haskell, monad-transformers, haskell-wai

我编写了一个简单的 WAI 应用程序，它使用 ReaderT 来允许访问请求，如下所示：

```
import qualified Network.Wai as W
handle :: (Resource a) => a -> ReaderT W.Request IO W.Response 
```

`handle`执行大部分处理的函数在哪里。然后我在我的应用程序中调用它：

```
app :: W.Application
app = runReaderT (handle a) -- simplified; i don't think the value of a matters

main :: IO ()
main = run 3000 app 
```

但`runhaskell main.hs`给了我以下内容：

```
Couldn't match expected type `Control.Monad.Trans.Resource.ResourceT
                                IO'
            with actual type `IO'
Expected type: ReaderT
                 W.Request (Control.Monad.Trans.Resource.ResourceT IO) W.Response
  Actual type: ServerMonad W.Response
In the return type of a call of `handle'
In the first argument of `runReaderT', namely
  `(handle a)' 
```

这让我感到困惑有两个原因：

1.  我不知道为什么它期待那种类型
2.  调用`resp <- runReaderT (handle a) defaultRequest`在 GHCI 中有效！

为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T02:49:14.293

类型`Application`定义为：

```
type Application = Request -> ResourceT IO Response 
```

（ResourceT 的原因是您可以分配稀缺资源并在发送流式响应时使用它们。这与基于大型数据库查询发送回响应有关。但这与您的问题没有直接关系。）

你`runReaderT (reader a)`有类型`Request -> IO Response`。为了让它返回响应`ResourceT IO`，似乎有两种选择：

1.  提起它`app`：`app = lift . runReaderT (reader a)`。（`lift`在 中定义`Control.Monad.Trans.Class`。）
2.  将类型更改`hanlde`为`handle :: (Resource a) => a -> ReaderT W.Request (ResourceT IO) W.Response`。

如果您可能需要执行对资源敏感的操作，则第一种方法很有意义，而第二种方法可能更容易进行更改。

# ios - ${PRODUCT_NAME} 未定义错误

> ID：12878286
> 
> 赞同：12
> 
> 时间：2012-10-14T00:31:23.940
> 
> 标签：ios, xcode, ios6

重命名我的应用程序后，我在尝试构建我的应用程序时开始遇到问题。构建设置 PRODUCT_NAME 未定义

关于如何解决这个问题的任何想法？

这是一张图片： ![在此处输入图像描述](../Images/079123427523327fc524f326686993ca.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-07-25T17:38:29.490

这可以通过在构建设置中设置产品名称来解决。单击您遇到问题的目标，然后单击构建设置，然后搜索`product_name`并将其设置为您的应用程序的名称。

![屏幕](../Images/ad8596290885d2cbcb17cbb01103eee7.png)

# c# - 识别 xps 文件

> ID：12878287
> 
> 赞同：1
> 
> 时间：2012-10-14T00:31:42.500
> 
> 标签：c#, xps

> **可能重复：**
> [如何使用 C# 检查文件是否为有效的 XPS 文件？](https://stackoverflow.com/questions/10145247/how-can-i-check-that-a-file-is-a-valid-xps-file-with-c)

如果传递了流或没有扩展名的文件，如何识别 XPS 文件？我知道 XPS 文件是 zip 文件，因此我可以在开始时查找 ZIP 幻数，但是如何识别 XPS 文件？

从我所做的研究来看，我认为我需要提取并查看 [Content_Types].xml，但是一旦我在那里，我需要寻找的东西并不是（太）明显。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T01:06:50.487

我认为在大多数情况下，您只需检查`[Content_Types].xml`. 有人可能会向您传递一个 zip 文件，其中包含一个类似名称的文件，但不包含您希望它作为 XPS 文档的一部分包含的信息，但这种可能性有多大？文件名非常具体，对我来说，不太可能产生意外碰撞。

但如果您想更加确定，您可以检查 XML 文件是否符合预期的模式。您通常应该看到如下内容：

```
<?xml version="1.0" encoding="utf-8"?>
<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types">
    <Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml"/>
    <Default Extension="fdseq" ContentType="application/vnd.ms-package.xps-fixeddocumentsequence+xml"/>
    <Default Extension="fdoc" ContentType="application/vnd.ms-package.xps-fixeddocument+xml"/>
    <Default Extension="xml" ContentType="application/vnd.ms-printing.printticket+xml"/>
    <Default Extension="JPG" ContentType="image/jpeg"/>
    <Default Extension="fpage" ContentType="application/vnd.ms-package.xps-fixedpage+xml"/>
    <Default Extension="dict" ContentType="application/vnd.ms-package.xps-resourcedictionary+xml"/>
</Types> 
```

您还可以检查所需的`FixedDocumentSequence.fdseq`文件。

希望有帮助/相关链接：

*   [完整的 XPS 规范](http://msdn.microsoft.com/en-us/windows/hardware/gg463431.aspx)
*   [外行人用 Wictor Wilén 编写的 XPS 规范](http://www.wictorwilen.se/Post/Dissecting-XPS-part-1--The-basics.aspx)。

# python - numpy ：将多个切片组装成新数组

> ID：12878288
> 
> 赞同：4
> 
> 时间：2012-10-14T00:31:45.843
> 
> 标签：python, numpy, slice

我有一个二维数组，我需要将部分（切片）提取到一个新数组中：

```
original= numpy.ndarray( shape=(4,4) )
slices= numpy.ndarray( shape=(0,2) )
for x in range(3):
    slice= original[x:x+2,x:x+2] 
    slices=numpy.append(slices, slice,axis=0) 
```

有没有更有效的方法来做到这一点（摆脱 python 循环）？

**- - 编辑 - -**

为了澄清，我问如何将任意（但类似）形状的 2D 切片从 2D 数组的任意 2D 索引复制到另一个垂直堆叠的 - 不是特别沿着对角线或 2x2 大小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T09:13:57.040

有一个绝妙的技巧`stride_tricks`，您可以在 SO 和其他上找到具有不同通用性的滚动窗口函数（numpy 本身目前没有），这是根据您所获得的内容量身定制的版本：

```
def rolling_window(arr, window):
    """Very basic multi dimensional rolling window. window should be the shape of
    of the desired subarrays. Window is either a scalar or a tuple of same size
    as `arr.shape`.
    """
    shape = np.array(arr.shape*2)
    strides = np.array(arr.strides*2)
    window = np.asarray(window)
    shape[arr.ndim:] = window # new dimensions size
    shape[:arr.ndim] -= window - 1
    if np.any(shape < 1):
        raise ValueError('window size is too large')
    return np.lib.stride_tricks.as_strided(arr, shape=shape, strides=strides)

# Now:
view = rolling_window(arr, 2)
view[0,0] # first slice in your loop 
```

请注意，它`view`包含与原始数组相同的数据！这可能会导致意想不到的结果。但是您似乎只想要对角线，您也可以使用跨步技巧来确保不复制数据（下一个版本将创建一个带有 的视图`diagonal`，旧版本总是一个副本）：

```
diagonal = np.diagonal(view, axis1=0, axis2=1)
# unfortunatly now the first slice is diagonal[...,0], so just roll it to the start:
diagonal = np.rollaxis(diagonal, -1) 
```

现在`diagonal`是您在 for 循环中创建的数组（在较新的版本中，`.copy()`如果您不想要视图，请添加 a）。

编辑：由于`slices`数组是 2D 而不是 3D 因为您追加，所以这里缺少重塑：

```
slices = diagonal.reshape(-1,2) 
```

如果您有这么小的数组，这可能不会更快，但它的常量（期望复制`diagonal`调用中的数据）与数组大小有关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T01:12:33.223

这是您的解决方案：

```
v = np.arange(0,original.shape[0],0.5).astype(int)
result = np.c_[ original[v[1:-1],v[:-2]] , original[v[1:-1],v[2:]] ] 
```

适用于任何大小的方形输入矩阵（您称之为“原始”）。

这个想法是创建一个“辅助数组”v，它只是 [0,0,1,1,2,2,3,3,...]，然后使用观察你需要的索引总是简单的v的切片

享受！

# bash - BASH 中的多线程变量创建

> ID：12878293
> 
> 赞同：2
> 
> 时间：2012-10-14T00:31:59.327
> 
> 标签：bash, multithreading, shell, unix, scripting

如何在 BASH 脚本中多线程创建变量？例如，如果一个脚本包含以下两行，那么它们如何同时执行？

```
 export BOTSUBSTITUTIONS=$(less --buffers=-1 ./conf/substitutions.xml)
 export BOTPROPERTIES=$(less --buffers=-1 ./conf/startup.xml) 
```

下面的这个例子不起作用。

```
export BOTSUBSTITUTIONS=$(less --buffers=-1 ./conf/substitutions.xml) &
export BOTPROPERTIES=$(less --buffers=-1 ./conf/startup.xml) &
wait 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T22:30:03.547

将后台进程的输出重定向到单独的文件，等待后台进程完成，然后将结果返回给您的变量。例子：

```
less --buffers=-1 ./conf/substitutions.xml >o1& o1=$!
less --buffers=-1 ./conf/startup.xml >o2& o2=$!
wait $o1 $o2
export BOTSUBSTITUTIONS=$(cat o1) ; rm -f o1
export BOTPROPERTIES=$(cat o2); rm -f o2 
```

# ajax - 在 ajaxCrud 中搜索 addAjaxFilterBox defineRelationship 字段

> ID：12878294
> 
> 赞同：0
> 
> 时间：2012-10-14T00:32:25.157
> 
> 标签：ajax, list, select, crud

AjaxCrud 有一个问题。创建关系时，将使用输入文本字段创建搜索。

所以如果你和另一个表有关系，你就不能使用外表的描述字段。您必须使用外键的 ID 进行搜索。*失败*

好吧，我的用户甚至不知道有 ID 字段。

所以我真的需要使用外键表值来更改那些带有字段的输入文本。

我的解决方案就在下面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T00:32:25.157

我改变了 ajaxCRUD.class.php

靠近 1191 号线，介于

```
$top_html .= "</select>\n";
            } and `else{
                $custom_class = "";
                if ($this->display_field_with_class_style[$filter_field] != '') {` 
```

我已经插入了这段代码：

```
else
            if (is_numeric($found_category_index))
            {
                $category_field_name = $this->category_field_array[$found_category_index];
                $category_table_name = $this->category_table_array[$found_category_index];
                $category_table_pk   = $this->category_table_pk_array[$found_category_index];
                $order_by = '';
      if ($this->category_sort_field_array[$found_category_index] != ''){
          $order_by = " ORDER BY " . $this->category_sort_field_array[$found_category_index];
      }

      $whereclause  = '';
      if ($this->category_whereclause_array[$found_category_index] != ''){
          $whereclause = $this->category_whereclause_array[$found_category_index];
      }

                $dropdown_array = q("SELECT $category_table_pk, $category_field_name FROM $category_table_name $whereclause $order_by");

                $top_html .= "<br><select name=\"$filter_field\" onChange=\"filterTable(this, '" . $this->db_table . "', '$filter_field', '$extra_query_params');\">";
                $top_html .= "<option value=\"\">==Select==</option>\n";

                foreach ($dropdown_array as $dropdown)
                {
          $dropdown_value = $dropdown[$this->category_table_pk_array[$found_category_index]];
          $dropdown_text  = $dropdown[$this->category_field_array[$found_category_index]];
          $top_html .= "<option value=\"$dropdown_value\" >$dropdown_text</option>\n";
      }

                $top_html .= "</select>\n";

            } 
```

我已经包括了这一行`$found_category_index = array_search($filter_field, $this->db_table_fk_array);`

在此之后：`foreach ($this->ajaxFilter_fields as $filter_field){` 1156 线附近。

它通过关系数组并根据查询结果创建一个选择。

投票是否解决了您的问题。如果您有更好的解决方案，请分享。

# objective-c - PCH 文件中的 iPHONE IOS SDK 奇怪警告

> ID：12878296
> 
> 赞同：0
> 
> 时间：2012-10-14T00:32:52.403
> 
> 标签：objective-c, ios4

我不认为我会在这里泄露任何苹果的秘密，所以我会问的。我的 .pch 文件如下所示：

```
#ifndef __IPHONE_4_0
#warning "This project uses features only available in iOS SDK 4.0 and later."
#endif

#ifdef __OBJC__
    #import <Foundation/Foundation.h>
    #import <Availability.h> 
    #import <UIKit/UIKit.h>
    #import "DejaViewAppDelegate.h"
#endif 
```

因此，第 2 行会出现一条警告，上面写着“此项目使用的功能仅在 iOS SDK 4.0 及更高版本中可用。”。

当 #import Availability.h 在 ifndef 语句之后出现时，SDK 警告与 ifndef 警告相呼应。当 #import Availability.h 在 idndef 之前，它不会引发警告。

有什么理由吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T00:40:58.383

在标准项目模板中，`<Availability.h>`是第一次导入。这是有道理的，因为这`__IPHONE_4_0`是定义的地方。

顶部的宏检查是否`IPHONE_4_0`已定义，如果未定义，则发出编译器警告。由于稍后定义了宏（通过导入`<Availability.h>`，您会看到编译器警告。

# django - Django 查询以检索初始查询集以及对该查询集的后续查询

> ID：12878298
> 
> 赞同：1
> 
> 时间：2012-10-14T00:33:12.117
> 
> 标签：django, django-queryset

对于此代码：

```
people_pool = People.objects.filter(last_name__in = last_names)
for first_name in first_names:
    for person in people_pool.filter(first_name = first_name):
       # do something with each person. 
```

我对 django 查询集的理解是，在您“需要”数据之前，实际上不会执行查询，因此可以优化链式查询集。但是，如果我没记错的话，这似乎对我不利。将执行的第一个查询基本上相当于：

```
People.objects.filter(last_name__in = last_names, first_name = first_name) # for the first first_name in first_names 
```

并且需要为每个名字查询数据库。如果是这种情况，让 Django 实际检索`people_pool`并在检索到的 python 对象上运行后续过滤器的正确方法是什么，而不是单独使用数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T02:18:57.703

为了不对每个名字进行数据库查询，唯一的方法是在 Python 中进行实际过滤：

```
people_pool = People.objects.filter(last_name__in = last_names)
people = {}

for person in people_pool:
    first_name = person.first_name
    if first_name in first_names:
        if not first_name in people:
            people[first_name] = []
        people[first_name].append(person)

for first_name, people_first_name in people.items():
    for person in people_first_name:
        # do something with each person 
```

如果你愿意，你也可以在第一个循环 ( `for person in people_pool`) 中做一些事情。我只是在 a 中添加人员，`dict`但这一步不是必需的。

# javascript - 基于 Ember.js 的仪表板

> ID：12878301
> 
> 赞同：4
> 
> 时间：2012-10-14T00:33:51.440
> 
> 标签：javascript, ember.js

我正在使用 ember.js 和一个用 spring MVC 编写的 rest API 开发一个应用程序。我必须创建一个带有多个小部件的仪表板。每个小部件都作为自己的行为，并将调用不同的 API 方法。我正在考虑为每种小部件设置一个控制器子类。然后将实例化它们并将它们的视图添加到容器视图中。但是 ember 会自动为每个控制器创建一个实例，所以这是一条好路吗？ember.js 社区有什么建议吗？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T02:07:21.090

你的想法听起来不错。

当然有很多方法可以构建它。我可能会建议制作一个 DashboardView 和 DashboardController，并在其模板中，有几个[outlets](http://emberjs.com/api/classes/Ember.Handlebars.helpers.html#method_outlet)，每个小部件“slot”一个：

```
{{outlet topWidgetView}}
{{outlet leftWidgetView}}
... 
```

然后在路由器中，在仪表板路由的`connectOutlets`方法中，在您实例化仪表板后连接小部件：

```
router.get('applicationController').connectOutlet('dashboard');

router.get('dashboardController').connectOutlet({
  outletName: 'topWidgetView',
  name: 'fooWidget'
});
router.get('dashboardController').connectOutlet({
  outletName: 'leftWidgetView',
  name: 'barWidget'
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T07:17:43.040

而不是每个小部件的插槽，我宁愿有一个小部件区域（列，...）的插槽，这将是一个`ContainerView`，我将根据用户的设置动态添加小部件视图。

# ios - 云矿xcode

> ID：12878303
> 
> 赞同：0
> 
> 时间：2012-10-14T00:34:00.613
> 
> 标签：ios

我收到此错误：`::[__NSCFDictionary setObject:forKey:]: attempt to insert nil key'`

我检查了我的对象是否已正确初始化，但仍然出现此错误。使用云矿。

```
(void)addInventory:(Inventory *)inventory {

    [_inventoryList addObject:inventory];

    [inventory save:^(CMObjectUploadResponse *response) {
        NSLog(@"status: %@", [response.uploadStatuses objectForKey:inventory.objectId]);

        if (![[response.uploadStatuses objectForKey:inventory.objectId] isEqualToString:@"created"]) {
            // Alert the user
            NSString *message = @"The item could not be created.";
            if (response.error)
                message = [response.error localizedDescription];
            UIAlertView *errorAlert = [[UIAlertView alloc] initWithTitle:@"Error" message:[response.error localizedDescription] delegate:nil cancelButtonTitle:@"Okay" otherButtonTitles:nil];
            [errorAlert show];
        }

    }]; 
```

# php - 从 PHP 动态编写 nginx 配置

> ID：12878304
> 
> 赞同：0
> 
> 时间：2012-10-14T00:34:10.367
> 
> 标签：php, security, nginx, fwrite

我希望`nginx`从`PHP`. 然而，我担心安全。PHP 在用户/组下运行`php:php`，nginx 配置文件归`root:root`.

为了使 PHP 能够打开和写入 nginx 配置文件，该文件需要归用户和组所有`php:php`。

做这个的最好方式是什么？我想，我可以有一个使用另一种语言或 PHP 的辅助进程来实际读取和写入配置文件，而 PHP 只是与辅助进程对话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:49:12.533

这真的取决于什么样的 PHP 文件生成 nginx。如果这是一个小的独立脚本，那么以 root 身份运行它不会有任何问题。现在我假设它是一个需要生成和编写这个 nginx 文件的 php 网站。

如果实际创建和写入文件的部分仍然相当独立和简单，我会将其设置为独立的可执行文件（在 php 或其他东西中），从 PHP 网站获取一些命令行参数，然后`setuid`这个可执行文件（虽然它归根用户所有）。但是请注意，此可执行文件应该是安全的：[http](http://en.wikipedia.org/wiki/Setuid#Security) ://en.wikipedia.org/wiki/Setuid#Security 。

另一种方法是让 php 写入 nginx.conf （直接，通过使文件全局可写，使其组可写并给它一个 php 用户所在的组，或者通过一个单独的进程来复制文件来自一些 php 编写的文件）。不过这很可怕，因为我确信您的 nginx.conf 文件可以包含被执行的命令（例如，用于身份验证或作为 cgi），并且它们可能会以 root 身份执行（如果相同的配置文件如此命令） . 因此，通过这种方式，您基本上为 php 用户打开了以 root 身份运行任意命令的大门....

另一件可能有效的事情（我不确定是否可行）：您可能只想调整配置文件中的一两个参数。看看是否可以从其他位置（即 php 可写）读取这一个或两个参数。

# javascript - 创建简单事件的完整日历

> ID：12878309
> 
> 赞同：1
> 
> 时间：2012-10-14T00:35:32.637
> 
> 标签：javascript, jquery, asp.net, json, fullcalendar

我是使用 FullCalendar 的新手，我计划使用 JSON 来提供事件，但我不知道如何开始。我正在尝试将事件硬编码到其中，只是为了了解我应该在哪里以及如何将 JSON 传递给它。我很可能会创建一个 web 服务，它具有返回 Json 格式并提供它的功能，但与此同时。我如何对事件进行硬编码。这是我目前拥有的代码。我如何以及在哪里可以对下面的事件进行硬编码？：

```
<script type="text/javascript">
    $(document).ready(function () {

        $('#calendar').fullCalendar({
            allDaySlot: false,
            header: {

                left: 'today prev next',
                center: 'title',
                right: 'month,agendaWeek,agendaDay'
            },
            axisFormat: 'h(:mm)tt',
            timeFormat: { agenda: 'HH:mm{ - HH:mm}' },
            defaultView: 'month',
            editable: false,
            minTime: '8:30am',
            maxTime: '10:00pm',
            weekends: true,
            eventRender: function (event, element) {
            },
            eventClick: function (calEvent, jsEvent, view) {
            },
            dayClick: function (date, jsEvent, calEvent) {
            }

        })
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T03:26:35.583

请参阅：[http](http://arshaw.com/fullcalendar/docs/event_data/events_json_feed/) : //arshaw.com/fullcalendar/docs/event_data/events_json_feed/ 以获取有关使用 JSON 提要作为 jQuery FullCalendar 的数据输入的文档。

演示：http: [//jsfiddle.net/SO_AMK/dB2Ps/](http://jsfiddle.net/SO_AMK/dB2Ps/)

我实际上无法创建托管的 JSON 文件，但您应该能够为其提供原始 JSON 输出（我的演示中有一个示例）。

还有一个更复杂的使用每个可用字段，您可以根据需要插入任意数量的非标准字段：http: [//jsfiddle.net/SO_AMK/u8Ksw/](http://jsfiddle.net/SO_AMK/u8Ksw/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T02:21:05.340

在 API 中很容易找到各种源代码实现：

这是事件（JSON 提要）文档的链接。[http://arshaw.com/fullcalendar/docs/event_data/events_json_feed/](http://arshaw.com/fullcalendar/docs/event_data/events_json_feed/)

只需提供您的网址。如果您已经在 DOM 中拥有对象而不是让插件发出 ajax 请求，那么还有另一组文档

另外，如果我没记错的话，下载包还包含示例。

# javascript - 为什么 js 函数在另一个函数内部工作，但不是单独工作

> ID：12878313
> 
> 赞同：0
> 
> 时间：2012-10-14T00:36:32.543
> 
> 标签：javascript, jquery

我在下面有这两个函数，无论出于何种原因，windowedBox 函数仅在我从另一个函数调用它时才起作用。如果我直接调用windowedBox()，它不会做任何事情。如果我调用 getShareButtons()，它会调用 windowedBox() 并正常工作。如果有人知道为什么会这样，请帮助我。:(

注意:: 如果您想知道为什么它说 $j 而不是 $ its 因为我是这样设置的。

```
function getShareButtons(){
    var postPath = window.location.pathname;
    var videoTitle = 'asdf';
    var videoURL = 'asdf';

    //Output social button attributes
    $j(".facebook-share").attr('href', 'asdf');
    windowedBox(); <---THIS CALL WORKS
}

function windowedBox() { 
    $j(".facebook-share, .twitter-share").click(function(){
        window.open(this.href, videoTitle, "width=626, height=436", "status=0", "toolbar=0");
        return false;
    });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T00:45:07.227

我想这是因为您使用的是变量

```
videoTitle 
```

未在此函数中声明，但在另一个函数中声明：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T00:42:52.573

您收到错误，因为在第一个函数`href`中设置了链接属性，但是如果您只调用第二个函数，则`this.href`保持未定义或为空

像这样试试

```
$j(".facebook-share").attr('href', 'asdf');
var videoTitle = 'Title';

windowedBox();

function windowedBox() { 
    $j(".facebook-share, .twitter-share").click(function(){
        window.open(this.href, videoTitle, "width=626, height=436", "status=0", "toolbar=0");
        return false;
    });
} 
```

# c# - c# 泛型方法崩溃

> ID：12878314
> 
> 赞同：1
> 
> 时间：2012-10-14T00:36:36.593
> 
> 标签：c#, generics, methods, crash

我有一个托管在某处（webhostingworld.net）的应用程序，我有一个两难选择。我有一个工具（.net 4 anycpu 中的简单普通 exe）执行一些离线操作，它由“Parallel Plesk Panel 11.0.9”作为“计划任务”启动。一切都很顺利，直到我添加了一个通用方法。

*   基本上，它只是一个从数据库中读取 json 字符串并返回它的虚拟方法；
*   这个过程就这样结束了，没有抛出异常——我不得不把日志从一个地方放到另一个地方，我做的最后一件事是在调用这个方法和里面的第一件事之前把日志放在里面。调用这个方法之前的日志是有的，方法里面的日志是没有的；
*   方法声明如下所示：

`public T Get<T>(string id);`

*   我联系他们寻求一些反馈——也许他们在系统日志中看到了一些东西，但我怀疑他们会带来一些启示；
*   在我的电脑上工作正常（不总是这样吗？）；
*   尝试编译所有 cpu 风格：x86、x64、anyCPU 并具有相同的行为......

我没有主意了。我总是可以尝试使用通用对象（从代码大小 pov 来看，这可能是一个更好的想法 - 但这是另一个主题）......但这非常令人沮丧，因为我无法找到发生这种情况的充分理由......那么，关于发生了什么的任何想法？

谢谢！

**更新：**代码如下所示：

```
public T Get<T>(string id)
{
   Log.Debug("mary still has that little lamb");

   string jsonString = GetASimpleStringFromDatabase(id);  // id has values like "ID", "TEMPPATH", "MAIL", etc;

   DataContractJsonSerializer ser = new DataContractJsonSerializer(typeof(T));

   using (MemoryStream ms = new MemoryStream(Encoding.UTF8.GetBytes(jsonString)))
   {
      return ser.ReadObject(ms);
   }
} 
```

电话看起来像这样：

```
Log.Debug("Let's check if Mary has that little lamb");
MyClass c = deserializer.Get<MyClass>(stuff); 
```

第一个记录语句出现（“让我们检查一下”），第二个（“仍然有”）没有。.net 框架与我机器上的框架相同（至少在版本方面）。我想知道是否有一些我需要检查的标志，某事......

**更新**：很抱歉，支持人员的反应很慢。我对此没有答案。我将不使用“模板”。:-(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T07:48:48.733

用户可能只安装了“客户端”.Net 4.0 运行时，而您可能正在使用需要“完整”.Net 4.0 运行时的功能。 有关差异的更多信息，[请参阅此内容。](http://msdn.microsoft.com/en-us/library/cc656912%28v=vs.100%29.aspx#features_not_included_in_the_net_framework_client_profile)

此外，您可以尝试挂钩未处理的异常事件以记录错误。 [有关](http://msdn.microsoft.com/en-us/magazine/cc793966.aspx#id0070042)桌面应用程序的信息，请参[见此](http://msdn.microsoft.com/en-us/library/24395wz3%28v=vs.100%29.aspx)内容，有关 Web 应用程序的信息，请参见此内容。

如果一切都失败了，您可以开始排除应用程序的较低层以排除通信或其他原因。（即将数据库调用替换为对返回硬编码 JSON 字符串的模拟数据库的调用等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T08:34:44.883

有时编译器会生成未通过验证的代码。如果发生这种情况，如果您的代码没有完全信任（可能在这种情况下），您可能会遇到类似的问题。通过运行 PEVerify 验证您的代码是否可验证。

# c++ - C++ EOF 在 While 循环期间从不设置

> ID：12878320
> 
> 赞同：0
> 
> 时间：2012-10-14T00:38:10.260
> 
> 标签：c++, file-io, eof

所以基本上，我正在编写一个程序来接收一组数据并将结果输入到结构向量中。但是，我遇到的问题是文件结束标志从未在位于主函数中的 while 循环中设置

```
int main()
{
ifstream machineRecords;
machineRecords.open ("records.txt");
if (machineRecords.fail())
{
    cout << "Failed to open \'records.txt\' please make sure it is in the same directory as the executable.";
    exit(1);
}

char tempChar;
string record;
do
{
    int LINE = 0;
    for (int x = 0; x <= 11; x++)
    {
        cout << "Begin storing characters in record" << endl;
        do  //Stores one character at a time into the node string until it discovers the end of the node
        {
            tempChar = machineRecords.get();
            record += tempChar;
            cout << "||" << tempChar << endl;
            //_getch();
        } while (tempChar != '|' && tempChar != '\n');
        eraseCharFromString(record, '|');       //Removes ending tag character
        eraseCharFromString(record, '\n');  //Removes any sneaky newline characters

        cout << "Record: " << record << endl;

        switch(x)
        {
            case 0:
                machines[LINE].idNumber = atoi(record.c_str());
                break;
            case 1:
                machines[LINE].description = record;
                break;
            case 2:
                machines[LINE].purchaseDate.month = atoi(record.c_str());
                break;
            case 3:
                machines[LINE].purchaseDate.day = atoi(record.c_str());
                break;
            case 4:
                machines[LINE].purchaseDate.year = atoi(record.c_str());
                break;
            case 5:
                machines[LINE].cost = atof(record.c_str());
                break;
            case 6:
                machines[LINE].history.failRate = atof(record.c_str());
                break;
            case 7:
                machines[LINE].history.downDays = atoi(record.c_str());
                break;
            case 8:
                machines[LINE].history.lastServiced.month = atoi(record.c_str());
                break;
            case 9:
                machines[LINE].history.lastServiced.day = atoi(record.c_str());
                break;
            case 10:
                machines[LINE].history.lastServiced.year = atoi(record.c_str());
                break;
        }
        record = "";
        _getch();
    }

    tempChar = machineRecords.get();
    if (machineRecords.fail())
    {
        cout << "DONE" << endl;
        break;
    }
    else
    {
        machineRecords.putback(tempChar);
    }

    ++LINE;
    _getch();
} while (!machineRecords.eof());    //While not at the end of the file

recordFromLastDate(1999);

machineRecords.close();
_getch();
return 0;
} 
```

任何格式错误都是 SO 的问题。

但无论如何，即使我尝试在每行之后测试读取另一个字符，它也不会触发 eof 标志。我真的不知道为什么不。

不幸的是，我没有时间重写太多代码，因为有很多其他的期中项目，但我真的很想知道我是否做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T01:04:47.650

我认为你应该尝试类似的东西，

```
char ch;
ifstream ifile("filename");

ifile.get(ch);   /*Called as prime read. Use getline() or ifile>>line where line is a string depending on your requirement*/
while(ifile)
{
do your work;//
......
......
......
ifile.get(ch);
} 
```

这几乎适用于所有类型的文件。它首先从流中获取数据，然后在循环开始时检查流的状态。`while`如果失败，它将立即执行`while`循环后的语句，否则将继续执行直到`EOF`is到达流进入失败状态的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T01:08:55.263

EOF 仅在您读取超出文件末尾的字符时设置，因此明智的做法是认为 EOF 将在`machineRecords.get()`您从不测试其返回值之后设置，因此后续读取将设置流的失败位并且 EOF 将被忽略。只需使用 -1 的测试结果`machineRecords.get()`来捕获 EOF 或错误，然后再继续

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-14T01:08:29.003

你应该使用

```
} while (!machineRecords.good()); 
```

作为你的最终条件。

它涵盖了 eofbit、failbit 和 badbit，而不仅仅是 eofbit，因此如果由于之前读取失败而未达到 eof，则循环也会结束。

你可以在这里查看：[http ://www.cplusplus.com/reference/iostream/ios/good/](http://www.cplusplus.com/reference/iostream/ios/good/)

# events - Meteor：有没有办法在模板脱机时得到通知？

> ID：12878325
> 
> 赞同：1
> 
> 时间：2012-10-14T00:39:30.507
> 
> 标签：events, templates, dom, meteor

模板有一个被破坏的事件，但是当模板不再在 dom 中时调用该事件。

我想在脱掉dom之前访问模板。

我想在我可以将另一个模板放入 dom 并关闭旧模板之前关闭一个工具提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T02:04:08.073

`destroyed`是 Spark 目前公开的唯一模板拆卸事件。我认为我们实际上并不能保证它是在从 DOM 物理删除节点之前还是之后调用。

我不完全确定，但听起来你想要做的是在创建模板后手动创建一个浮动工具提示 DIV（我猜是从鼠标悬停事件处理程序甚至可能从`created`），然后手动删除它当模板离开屏幕时从 DOM 中获取。这里有一些方法可以解决这个问题：

*   与其手动创建工具提示 DIV，不如将其放在模板中，然后更改类以显示/隐藏它（可能使用基于鼠标悬停位置设置的会话变量。）

*   `tooltip`在模板对象的属性中持有指向工具提示 DIV 的指针。然后从`removed`中删除即可`this.tooltip`。

*   给工具提示一个唯一的 id 或 class 名称，并使用 jquery 或`querySelectorAll`（或 Meteor 的 not-yet-documented `DomUtils.find`）通过 id 或 class 查找元素并将其删除。

如果这还不够，我愿意添加更多功能，但我需要更好地了解您要做什么:) 请求新功能的最佳方式（除了自己编写之外：P）是提交一个 GitHub 问题，但它需要附带一个详细的示例，说明您正在尝试做什么以及为什么需要新的钩子。谢谢。

# c# - C# 中这个标记器代码的等价物是什么？

> ID：12878331
> 
> 赞同：0
> 
> 时间：2012-10-14T00:41:13.563
> 
> 标签：c#, windows-phone-7, stringtokenizer, string-split

这是android的java代码。我正在尝试将其转换为 windows c#。我尝试使用 split 但我不知道如何转到下一个元素。

```
StringTokenizer st = new StringTokenizer(source, "><");
String marker = st.nextToken();

while(st.hasMoreTokens())
{   
nameLoop:
if(marker.equals("Name:"))
{
     while(st.hasMoreTokens())
     {  
          (marker.equals("strong"))
          {
               marker = st.nextToken();
               while(!(marker.equals("/strong")))
               {
                    Name = marker;
                    marker = st.nextToken();
               }
               break nameLoop;
           }

               marker = st.nextToken();
     }
 }
 else
     marker = st.nextToken();
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T01:51:12.020

[您从 C# 中的string.Split](http://msdn.microsoft.com/en-us/library/tabh47cf.aspx)获得一个数组，因此您只需使用 foreach 循环遍历元素

```
string[] tokens = source.Split("><", StringSplitOptions.RemoveEmptyEntries);
foreach (string marker in tokens) {
    if (marker == "strong") {
    }
} 
```

或者，如果你想要一个索引，你可以使用一个 for 循环

```
string[] tokens = source.Split("><", StringSplitOptions.RemoveEmptyEntries);
for (int i = 0; i < tokens.Length; ++i) {
    string marker = tokens[i];
    if (marker == "strong") {
    }
} 
```

# wordpress - 导航不会更新以显示单个帖子的完整路径

> ID：12878335
> 
> 赞同：2
> 
> 时间：2012-10-14T00:42:05.113
> 
> 标签：wordpress, wordpress-theming, custom-post-type

我有一个带有自定义帖子类型“项目”和两个分类法“客户”和“媒体”的网站。对于导航，我使用的是自定义导航步行器（扩展`Walker_Nav_Menu`）。这一切都很好，并允许 URL 如下：

```
/mediums/print/ (showing selection of print projects)
/clients/clientA (showing selection of projects for clientA) 
```

我有客户和媒体的页面模板以及模板 taxonomy-clients.php 和 taxonomy-mediums.php。理想情况下，我希望能够让这些 URL 和导航继续通过客户端或媒体选择单个项目，例如

```
/mediums/print/project-A
/clients/clientA/project-A 
```

但是经过很长时间的搜索和搜索太多论坛后，Wordpress 似乎无法做到这一点。因此，我不得不走一条路并选择：

```
/mediums/print/project-A 
```

为了让它发挥作用，而不仅仅是在下面显示所有单个项目的帖子`/projects/project-A`

我正在向“post_type_link”添加一个过滤钩子，它修改链接以遵循`/mediums/print/project-A`自定义帖子类型的完整结构和我使用的占位符，该占位符`%mediums%`被相关分类术语替换。

同样，这一切都很好，现在允许通过客户端或媒体浏览并选择项目，然后选择完整的 URL。

我现在遇到的问题是导航没有显示 single-projects.php 模板的任何状态（导航是全局的并且在侧边栏中）。我可以看到这很可能是因为尽管我已经设法获取 URL 和工作链接以显示完整路径 WP，因此步行者没有看到自定义帖子类型项目位于 mediums/mediums-term 和所以不会创建显示此状态所需的导航项。

有谁知道我怎样才能让步行者“看到”这种关系？

我认为用户希望通过项目分类以这种方式有选择地深入到项目并在树的末尾登陆项目而不是`/projects/project-A`在导航中没有反映状态的情况下跳出来是不合理的.

# jquery - 如何将 Jquery 滑块与连接到隐藏 div 的下拉框连接起来

> ID：12878337
> 
> 赞同：-2
> 
> 时间：2012-10-14T00:43:01.777
> 
> 标签：jquery, drop-down-menu, slider

我已经将一个带有下拉框的 jquery 滑块与当滑块或下拉框中的值发生更改时将显示 div 的功能相结合。

但是，只有当我更改下拉框中的值时，div 才可见，而不是滑块中的值。

[单击此处查看 jsFiddle 演示](http://jsfiddle.net/tobbecokta/Uum8j/1/)

```
$(function() {
$('#range-start').change(function() {
    $('.colors').hide();
    $('#' + $(this).val()).show();
});
});

 function checkvalue(val) {
if (val === "others") document.getElementById('color').style.display = 'block';
else document.getElementById('color').style.display = 'none';
 }

 $(window).load(function() {
jQuery.fn.selectToUISlider = function(settings) {
    var selects = jQuery(this);

    //accessible slider options
    var options = jQuery.extend({
        labels: 3,
        //number of visible labels
        tooltip: true,
        //show tooltips, boolean
        tooltipSrc: 'text',
        //accepts 'value' as well
        labelSrc: 'value',
        //accepts 'value' as well    ,
        sliderOptions: null
    }, settings);

    //handle ID attrs - selects each need IDs for handles to find them
    var handleIds = (function() {
        var tempArr = [];
        selects.each(function() {
            tempArr.push('handle_' + jQuery(this).attr('id'));
        });
        return tempArr;
    })();

    //array of all option elements in select element (ignores optgroups)
    var selectOptions = (function() {
        var opts = [];
        selects.eq(0).find('option').each(function() {
            opts.push({
                value: jQuery(this).attr('value'),
                text: jQuery(this).text()
            });
        });
        return opts;
    })();

    //array of opt groups if present
    var groups = (function() {
        if (selects.eq(0).find('optgroup').size() > 0) {
            var groupedData = [];
            selects.eq(0).find('optgroup').each(function(i) {
                groupedData[i] = {};
                groupedData[i].label = jQuery(this).attr('label');
                groupedData[i].options = [];
                jQuery(this).find('option').each(function() {
                    groupedData[i].options.push({
                        text: jQuery(this).text(),
                        value: jQuery(this).attr('value')
                    });
                });
            });
            return groupedData;
        }
        else return null;
    })();

    //check if obj is array

    function isArray(obj) {
        return obj.constructor == Array;
    }
    //return tooltip text from option index

    function ttText(optIndex) {
        return (options.tooltipSrc == 'text') ? selectOptions[optIndex].text : selectOptions[optIndex].value;
    }

    //plugin-generated slider options (can be overridden)
    var sliderOptions = {
        step: 1,
        min: 0,
        orientation: 'horizontal',
        max: selectOptions.length - 1,
        range: selects.length > 1,
        //multiple select elements = true
        slide: function(e, ui) { //slide function
            var thisHandle = jQuery(ui.handle);
            //handle feedback 
            var textval = ttText(ui.value);
            thisHandle.attr('aria-valuetext', textval).attr('aria-valuenow', ui.value).find('.ui-slider-tooltip .ttContent').text(textval);

            //control original select menu
            var currSelect = jQuery('#' + thisHandle.attr('id').split('handle_')[1]);
            currSelect.find('option').eq(ui.value).attr('selected', 'selected');
        },
        values: (function() {
            var values = [];
            selects.each(function() {
                values.push(jQuery(this).get(0).selectedIndex);
            });
            return values;
        })()
    };

    //slider options from settings
    options.sliderOptions = (settings) ? jQuery.extend(sliderOptions, settings.sliderOptions) : sliderOptions;

    //select element change event    
    selects.bind('change keyup click', function() {
        var thisIndex = jQuery(this).get(0).selectedIndex;
        var thisHandle = jQuery('#handle_' + jQuery(this).attr('id'));
        var handleIndex = thisHandle.data('handleNum');
        thisHandle.parents('.ui-slider:eq(0)').slider("values", handleIndex, thisIndex);
    });

    //create slider component div
    var sliderComponent = jQuery('<div></div>');

    //CREATE HANDLES
    selects.each(function(i) {
        var hidett = '';

        //associate label for ARIA
        var thisLabel = jQuery('label[for=' + jQuery(this).attr('id') + ']');
        //labelled by aria doesn't seem to work on slider handle. Using title attr as backup
        var labelText = (thisLabel.size() > 0) ? 'Slider control for ' + thisLabel.text() + '' : '';
        var thisLabelId = thisLabel.attr('id') || thisLabel.attr('id', 'label_' + handleIds[i]).attr('id');

        if (options.tooltip == false) {
            hidett = ' style="display: none;"';
        }
        jQuery('<a ' + 'href="#" tabindex="0" ' + 'id="' + handleIds[i] + '" ' + 'class="ui-slider-handle" ' + 'role="slider" ' + 'aria-labelledby="' + thisLabelId + '" ' + 'aria-valuemin="' + options.sliderOptions.min + '" ' + 'aria-valuemax="' + options.sliderOptions.max + '" ' + 'aria-valuenow="' + options.sliderOptions.values[i] + '" ' + 'aria-valuetext="' + ttText(options.sliderOptions.values[i]) + '" ' + '><span class="screenReaderContext">' + labelText + '</span>' + '<span class="ui-slider-tooltip ui-widget-content ui-corner-all"' + hidett + '><span class="ttContent"></span>' + '<span class="ui-tooltip-pointer-down ui-widget-content"><span class="ui-tooltip-pointer-down-inner"></span></span>' + '</span></a>').data('handleNum', i).appendTo(sliderComponent);
    });

    //CREATE SCALE AND TICS
    //write dl if there are optgroups
    if (groups) {
        var inc = 0;
        var scale = sliderComponent.append('<dl class="ui-slider-scale ui-helper-reset" role="presentation"></dl>').find('.ui-slider-scale:eq(0)');
        jQuery(groups).each(function(h) {
            scale.append('<dt style="width: ' + (100 / groups.length).toFixed(2) + '%' + '; left:' + (h / (groups.length - 1) * 100).toFixed(2) + '%' + '"><span>' + this.label + '</span></dt>'); //class name becomes camelCased label
            var groupOpts = this.options;
            jQuery(this.options).each(function(i) {
                var style = (inc == selectOptions.length - 1 || inc == 0) ? 'style="display: none;"' : '';
                var labelText = (options.labelSrc == 'text') ? groupOpts[i].text : groupOpts[i].value;
                scale.append('<dd style="left:' + leftVal(inc) + '"><span class="ui-slider-label">' + labelText + '</span><span class="ui-slider-tic ui-widget-content"' + style + '></span></dd>');
                inc++;
            });
        });
    }
    //write ol
    else {
        var scale = sliderComponent.append('<ol class="ui-slider-scale ui-helper-reset" role="presentation"></ol>').find('.ui-slider-scale:eq(0)');
        jQuery(selectOptions).each(function(i) {
            var style = (i == selectOptions.length - 1 || i == 0) ? 'style="display: none;"' : '';
            var labelText = (options.labelSrc == 'text') ? this.text : this.value;
            scale.append('<li style="left:' + leftVal(i) + '"><span class="ui-slider-label">' + labelText + '</span><span class="ui-slider-tic ui-widget-content"' + style + '></span></li>');
        });
    }

    function leftVal(i) {
        return (i / (selectOptions.length - 1) * 100).toFixed(2) + '%';

    }

    //show and hide labels depending on labels pref
    //show the last one if there are more than 1 specified
    if (options.labels > 1) sliderComponent.find('.ui-slider-scale li:last span.ui-slider-label, .ui-slider-scale dd:last span.ui-slider-label').addClass('ui-slider-label-show');

    //set increment
    var increm = Math.max(1, Math.round(selectOptions.length / options.labels));
    //show em based on inc
    for (var j = 0; j < selectOptions.length; j += increm) {
        if ((selectOptions.length - j) > increm) { //don't show if it's too close to the end label
            sliderComponent.find('.ui-slider-scale li:eq(' + j + ') span.ui-slider-label, .ui-slider-scale dd:eq(' + j + ') span.ui-slider-label').addClass('ui-slider-label-show');
        }
    }

    //style the dt's
    sliderComponent.find('.ui-slider-scale dt').each(function(i) {
        jQuery(this).css({
            'left': ((100 / (groups.length)) * i).toFixed(2) + '%'
        });
    });

    //inject and return 
    sliderComponent.insertAfter(jQuery(this).eq(this.length - 1)).slider(options.sliderOptions).attr('role', 'application').find('.ui-slider-label').each(function() {
        jQuery(this).css('marginLeft', -jQuery(this).width() / 2);
    });

    //update tooltip arrow inner color
    sliderComponent.find('.ui-tooltip-pointer-down-inner').each(function() {
        var bWidth = jQuery('.ui-tooltip-pointer-down-inner').css('borderTopWidth');
        var bColor = jQuery(this).parents('.ui-slider-tooltip').css('backgroundColor')
        jQuery(this).css('border-top', bWidth + ' solid ' + bColor);
    });

    var values = sliderComponent.slider('values');

    if (isArray(values)) {
        jQuery(values).each(function(i) {
            sliderComponent.find('.ui-slider-tooltip .ttContent').eq(i).text(ttText(this));
        });
    }
    else {
        sliderComponent.find('.ui-slider-tooltip .ttContent').eq(0).text(ttText(values));
    }

    return this;
}

$range = $('.range');
var $rangeSelect = $range.find('select');

$rangeSelect.selectToUISlider({
    labels: 12,
    sliderOptions: {
        orientation: 'vertical'
    },
    slide: function(event, ui) {}
});

$range.find('.ui-slider').wrap('<div class="ui-slider-wrapper"></div>');

}); //]]> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T01:12:29.927

在您更改其选定选项后更新您的`slide`处理程序以触发 的`#range-start`处理程序：`change`

```
//control original select menu
var currSelect = jQuery('#' + thisHandle.attr('id').split('handle_')[1]);
currSelect.find('option').eq(ui.value).attr('selected', 'selected');
//triggers the #range-start's change handler:
currSelect.trigger('change'); 
```

[**小提琴**](http://jsfiddle.net/ult_combo/Uum8j/5/)

[`.trigger()`参考](http://api.jquery.com/trigger/)

# mysql - 如何在不重复表A中的行的情况下连接表A和表B？

> ID：12878339
> 
> 赞同：0
> 
> 时间：2012-10-14T00:43:37.580
> 
> 标签：mysql, join

我正在尝试连接两个表：表 A 和表 B。表 A 的每一行都有唯一的 ID，并且在表 B 中具有相应的 ID，但在表 B 中，ID 可以出现多次。

每当我尝试内部连接时，我都会因为表 B 而得到重复的行，所以我想知道如何在没有这些重复的情况下加入。

基本上，对于表 A 的每一行，我只想要表 B 中的一条记录，但它没有发生。

编辑：

`SELECT p.post_title, tt.cntaccess FROM wp_posts as p INNER JOIN wp_top_ten as tt ON p.ID = tt.postnumber WHERE p.post_date > '2000-01-02 00:00:00' AND tt.cntaccess > '10'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T01:12:01.697

这会将 a 与具有最新日期的相应 b 连接起来，如果有多个 b 匹配该条件，则 b 具有最高 id。b.id 和 a.id 被假定为唯一的（或主键）。

```
SELECT a.id
     , b.id
     , b.date
  FROM a
  JOIN b
    ON a.id = b.a_id
  LEFT JOIN b AS b2
    ON b.a_id = b2.a_id
   AND (b.date, b.id) < (b2.date, b2.id)
 WHERE b2.id IS NULL
; 
```

这是我尝试将您的表格与您的逻辑一起使用。请注意，我指的是 tt.pk。此 pk 表示预期行为的唯一键或主键。您没有提供足够的详细信息来了解此信息。我还没有测试过下面的 SQL。上面的测试SQL已经测试过了。

```
SELECT p.post_title
     , tt.cntaccess
     , p.ID
     , tt.pk 
  FROM wp_posts AS p
  JOIN wp_top_ten AS tt
    ON p.id = tt.postnumber 
   AND tt.cntaccess > '10'
  LEFT JOIN wp_top_ten as tt2
    ON tt.postnumber = tt2.postnumber 
   AND tt2.cntaccess > '10'
   AND (tt.date, tt.pk) < (tt2.date, tt2.pk) 
 WHERE tt2.postnumber IS NULL 
   AND p.post_date > '2000-01-02 00:00:00'
; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T00:47:01.860

您需要使用该`SELECT`语句从哪个表中指定您需要哪些字段......因此，不要`SELECT * FROM...`使用`SELECT tablea.id, tablea.etc... FROM...`并忽略那些您不需要的字段（在您的情况下是表 B 中的 ID）。

# java - java.rmi.ConnectIOException

> ID：12878341
> 
> 赞同：1
> 
> 时间：2012-10-14T00:43:50.367
> 
> 标签：java, rmi

我目前正在阅读 Head First Java 书籍并阅读了 RMI 章节。我完全按照书中的内容复制了所有内容，但我仍然对这个 RMI 东西有问题。

这是错误的堆栈跟踪。

```
java.rmi.ConnectIOException: Exception creating connection to: 192.168.0.110; nested exception is: 
    java.net.NoRouteToHostException: No route to host
    at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:632)
    at sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java:216)
    at sun.rmi.transport.tcp.TCPChannel.newConnection(TCPChannel.java:202)
    at sun.rmi.server.UnicastRef.newCall(UnicastRef.java:340)
    at sun.rmi.registry.RegistryImpl_Stub.rebind(Unknown Source)
    at java.rmi.Naming.rebind(Naming.java:177)
    at MyRemoteImpl.main(MyRemoteImpl.java:15)
Caused by: java.net.NoRouteToHostException: No route to host
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
    at java.net.Socket.connect(Socket.java:579)
    at java.net.Socket.connect(Socket.java:528)
    at java.net.Socket.<init>(Socket.java:425)
    at java.net.Socket.<init>(Socket.java:208)
    at sun.rmi.transport.proxy.RMIDirectSocketFactory.createSocket(RMIDirectSocketFactory.java:40)
    at sun.rmi.transport.proxy.RMIMasterSocketFactory.createSocket(RMIMasterSocketFactory.java:146)
    at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:613)
    ... 6 more 
```

我真的不知道这是什么意思，所以在这里。

如果您需要其他任何东西，请询问并得到答复。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T00:47:12.517

这不是`RMI`问题。它表示尝试将套接字连接到远程地址和端口时发生错误。通常，由于中间防火墙或中间路由器已关闭，无法访问远程主机。

[在此处](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/NoRouteToHostException.html)查看 javadocs

发生这种情况是因为您逐字复制了示例。您必须替换`192.168.0.110`为真实的工作主机地址。

跟踪中的这一行：

```
at java.rmi.Naming.rebind(Naming.java:177) 
```

表明该`Naming.rebind()`方法无法使用该 IP 地址。请检查服务器代码并将正确的 IP 地址放在那里。如果它不在代码本身中，请在配置文件中查找。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-14T09:39:10.527

大部分时间是防火墙的原因，可以尝试关闭防火墙来确认原因

```
service iptables stop 
```

# ruby - 将键值对推入散列

> ID：12878343
> 
> 赞同：1
> 
> 时间：2012-10-14T00:43:58.167
> 
> 标签：ruby

当我遍历传递给我的控制器的一些参数时，我试图将键和值推送到哈希中。下面的代码片段创建了一个哈希数组，但我想要具有多个键值对的哈希。我该怎么做呢？

```
 @diff_attr = []
 params[place_type].each_pair do |k, v|
   @diff_attr << {k.to_sym=>v}
 end 
```

我应该将我的 @diff_attr 更改为 hash: `@diff_attr = { }`，但在此之后，我不确定如何在我的迭代块中传递键和值。

目前，如果我`puts @diff_attr`，我会得到类似的东西：

`{:name => "blah blah"}, {:age => "24"}`

但我想要更多类似的东西：

`{:name=>"blah blah", :age=>"24"}`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T00:49:49.667

```
 @diff_attr = {}
 params[place_type].each_pair do |k, v|
   @diff_attr[k.to_sym] = v
 end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T00:56:46.573

```
@diff_attr = params[place_type].each_with_object({}) do |k,v,hash|
  hash[k.to_sym] = v
end 
```

# c++ - C++11 中的易失性

> ID：12878344
> 
> 赞同：29
> 
> 时间：2012-10-14T00:44:46.310
> 
> 标签：c++, c++11, volatile

在 C++11 标准中，机器模型从单线程机器变为多线程机器。

这是否意味着`static int x; void func() { x = 0; while (x == 0) {} }`在 C++11 中将不再发生优化输出读取的典型示例？

编辑：对于那些不知道这个例子的人（我很惊讶），请阅读：[https ://en.wikipedia.org/wiki/Volatile_variable](https://en.wikipedia.org/wiki/Volatile_variable)

EDIT2：好的，我真的希望每个知道什么`volatile`的人都看过这个例子。

如果您使用示例中的代码，循环中读取的变量将被优化，使循环无限。

解决方案当然是使用`volatile`which 将强制编译器在每次访问时读取变量。

我的问题是这是否是 C++11 中已弃用的问题，因为机器模型是多线程的，因此编译器应考虑对变量的并发访问存在于系统中。

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-10-14T01:17:30.123

它是否被优化完全取决于编译器以及他们选择优化的内容。C++98/03 内存模型无法识别在`x`它的设置和值的检索之间可能发生变化的可能性。

C++11 内存模型*确实*认识到`x`可以更改。然而，*它并不在乎*。对变量的非原子访问（即：不使用`std::atomic`s 或适当的互斥体）会产生未定义的行为。因此，对于 C++11 编译器来说，假设`x`写入和读取之间永远不会发生变化是完全可以的，因为未定义的行为可能意味着“函数永远不会看到`x`变化”。

现在，让我们看看 C++11 对`volatile int x;`. 如果你把它放在那里，并且你有一些其他的线程混乱`x`，*你仍然有未定义的行为*。易失性不影响*线程*行为。C++11 的内存模型没有将读取或写入从/到`x`原子定义，也不需要正确排序非原子读取/写入所需的内存屏障。`volatile`与它无关。

哦，你的代码*可能*有效。但是 C++11 并不能*保证*。

告诉编译器的是`volatile`它无法优化从该变量读取的内存。但是，CPU 内核具有不同的缓存，并且大多数内存写入不会*立即*发送到主内存。它们被存储在该核心的本地缓存中，并且可能被写入......*最终*。

CPU 有办法将高速缓存线强制输出到内存中，并在不同内核之间同步内存访问。这些内存屏障允许两个线程有​​效地通信。仅仅从一个内核中读取另一个内核中写入的内存是不够的。写入内存的核心需要发出一个屏障，并且正在读取它的核心需要在读取它之前完成该屏障才能真正获取数据。

`volatile`不保证*这一切*。Volatile 与“硬件、映射内存和其他东西”一起工作，因为写入该内存的硬件确保缓存问题得到解决。如果 CPU 内核在每次写入后都会发出内存屏障，那么您基本上可以告别任何性能希望。因此，C++11 有特定的语言来说明何时需要构造来发出障碍。

`volatile`是关于内存*访问*（何时读取）；线程是关于内存*完整性*（实际存储在那里的内容）。

C++11 内存模型具体说明了哪些操作会导致一个线程中的写入在另一个线程中变得可见。这是关于*内存完整性*的，这不是`volatile`处理的事情。并且内存完整性通常需要两个线程来做某事。

例如，如果线程 A 锁定一个互斥体，执行写入，然后解锁它，则 C++11 内存模型只要求线程 B 稍后锁定它时，该写入对线程 B 可见。在它真正获得那个*特定*的锁之前，它是不确定的。这些东西在标准的第 1.10 节中有详细的说明。

让我们看一下[您引用的代码](https://gist.github.com/3886984)，就标准而言。第 1.10 节，p8 谈到了某些库调用使线程与另一个线程“同步”的能力。大多数其他段落解释了同步（和其他事情）如何在线程之间建立操作顺序。当然，您的代码*不会调用任何 this*。没有同步点，没有依赖排序，什么都没有。

如果没有这种保护，没有某种形式的同步或排序，1.10 p21 就会出现：

> 如果程序的执行在不同的线程中包含两个相互冲突的操作，则该程序的执行包含*数据竞争*，其中至少一个不是原子的，并且两者都不会在另一个之前发生。任何此类数据竞争都会导致未定义的行为。

您的程序包含两个相互冲突的操作（读取`x`和写入`x`）。两者都不是原子的，也不是通过同步命令在另一个之前发生。

因此，您已经实现了未定义的行为。

*因此，C++11 内存模型保证*多线程行为的唯一情况是使用正确的互斥锁或`std::atomic<int> x`使用正确的原子加载/存储调用。

哦，你也不需要变得`x`易变。每当您调用（非内联）函数时，该函数或其调用的东西都可以修改全局变量。所以它*不能*优化循环`x`中的读取。`while`并且每个 C++11 同步机制都需要调用一个函数。这恰好调用了内存屏障。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-08-15T18:30:39.387

Intel developer zone mentions, ["Volatile: Almost Useless for Multi-Threaded Programming"](https://software.intel.com/en-us/blogs/2007/11/30/volatile-almost-useless-for-multi-threaded-programming)

The volatile keyword is used in this signal handler example from [cppreference.com](https://en.cppreference.com/w/cpp/utility/program/signal)

```
#include <csignal>
#include <iostream>

namespace
{
  volatile std::sig_atomic_t gSignalStatus;
}

void signal_handler(int signal)
{
  gSignalStatus = signal;
}

int main()
{
  // Install a signal handler
  std::signal(SIGINT, signal_handler);

  std::cout << "SignalValue: " << gSignalStatus << '\n';
  std::cout << "Sending signal " << SIGINT << '\n';
  std::raise(SIGINT);
  std::cout << "SignalValue: " << gSignalStatus << '\n';
} 
```

# html - 如何修复文本框中的值？

> ID：12878353
> 
> 赞同：3
> 
> 时间：2012-10-14T00:46:12.387
> 
> 标签：html, textbox

我有一个文本框来保存用户 facebook 的 url。

```
<tr>
    <td>
        Facebook:
    </td>
    <td>
        <input style="width:300px" type="text" name="facebook" value="http://www.facebook.com/$facebook">
    </td>
</tr>
```

如何使值“ [http://www.facebook.com/](http://www.facebook.com/) ”固定且不可编辑？

更新：

该`$facebook`部分需要可编辑！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T00:54:30.443

我认为您要求“ [http://www.facebook.com/](http://www.facebook.com/) ”不可编辑，但能够编辑网址的其余部分？

类似下面的代码片段将是最简单的方法。对下面 CSS 中的样式进行一些调整会使其更美观。

```
table {
    width: 500px;   
}
.fakey {
    border: solid 1px; 
    color: #ccc; 
    font-family: sans-serif;
    font-size: .9em;    
}

.fakey input {
    border: none;   
    outline: none;
    font-family: sans-serif;
    font-size: .9em; 
    width: 200px;    
}
```

```
<table>
    <tr>
        <td>Facebook:</td>
        <td>
            <div class="fakey">http://www.facebook.com/<input  type="text" name="facebook" value="$facebook" /></div>
        </td>
    </tr>        
</table>
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T01:21:48.020

您可以不惜一切代价使用 javascript 强制保持输入前缀。

```
 $('input.facebookUrl').keyup(function(){
        if (
            ($(this).val().length > 0) && ($(this).val().substr(0,24) != 'http://www.facebook.com/')
            || ($(this).val() == '')
            ){
            $(this).val('http://www.facebook.com/');    
        }
    });
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<tr>
    <td>
        Facebook:
    </td>
    <td>
        <input style="width:300px" type="text" class="facebookUrl" name="facebook" value="http://www.facebook.com/$facebook">
    </td>
</tr>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T00:50:14.883

有两种方法可以做到这一点。一种是将属性`disabled="disabled"`添加到它，或者添加`readonly`到它。

两者的工作方式不同。你需要的可能是`disabled="disabled"`属性。

# 编辑

[小提琴](http://jsfiddle.net/FaxE4/23/)更新。您应该包括以下 jQuery 代码：

```
$(document).ready(function() {
    $("#inpt").val('http://www.facebook.com/$facebook');
    $("#inpt").on('change', function() {
        var tval = $(this).val();
        $(this).val('http://www.facebook.com/' + tval.substring(24));
    });
}); 
```

您也可以使用键盘事件，我自己是 jQuery 的初学者，因此是这段基本代码。:) 另外，将`input`标签更新为：

```
<input id="inpt" style="width:300px" type="text" name="facebook" value="Any VALUE YOU WANT"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T00:50:58.710

像这样试试

```
<tr>
    <td>
        Facebook:
    </td>
    <td>
        <input style="width:300px" disabled="disabled" type="text" name="facebook" value="http://www.facebook.com/$facebook" />
    </td>
</tr> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-14T02:58:29.530

我不知道这是否是你要找的，但这是我能做的最好的。

```
 $("#input").keypress(function(ev){
      var value = "www.facebook.com/";
      var tval = this.value;
      var c = ev.charCode || ev.keyCode;
      this.selectionStart = this.selectionEnd = this.value.length;
      if (tval.length == value.length && c == 8){
           ev.preventDefault();
      }
      this.value = value + tval.substring(value.length);
 }); 
```

这是 JSFiddle：

[http://jsfiddle.net/FaxE4/104/](http://jsfiddle.net/FaxE4/104/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-19T23:04:31.727

一种非常简单的方法是使用“输入”HTML 标记中的[`readonly`属性](https://www.w3schools.com/tags/att_input_readonly.asp)。

[`disabled`](https://www.w3schools.com/tags/att_input_disabled.asp)是另一个可以使用的属性。

参考资料： [https ://www.w3schools.com/tags/tag_input.asp](https://www.w3schools.com/tags/tag_input.asp)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-21T03:22:44.050

你可以试试这个。

```
<tr>
    <td>
        Facebook:
    </td>
    <td>
        <input style="width:300px" type="text" name="facebook" value="http://www.facebook.com/$facebook" readonly>
    </td>
</tr> 
```

# css - 如何增加宽度：使用纯 CSS 将 DIV 的宽度自动增加 X 像素

> ID：12878354
> 
> 赞同：6
> 
> 时间：2012-10-14T00:46:18.600
> 
> 标签：css, html, width, transitions

我有一个**DIV**（设置为*float:left*），其*宽度*设置为*auto*因为我希望它与它的内容一样宽。

在*悬停*时，我想将DIV**的***宽度*增加20 像素。

 **在*:hover* CSS 类中设置固定*宽度*时，容器将在悬停时获得该*宽度*，但是

 **1.  CSS3-Transitions 不会应用/工作（在 Firefox 15.0.1 中测试）
2.  如果我的**DIV**的内容大于该固定*宽度*，则最终*宽度*将不正确。

如何 - 在不使用 javascript 的情况下 - 我可以保持**DIV**的内容调整到其内容，并让它在悬停时增加一定数量的像素的宽度？

[在这里查看我的 JSFiddle。](http://jsfiddle.net/jKU9F/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2021-08-12T19:18:31.517

对我来说，最简单的方法是将内容增加超过 100% 的百分比。例如：

```
width: 110%; 
```

但是如果你想按照要求增加`n`像素大小，你可以使用

```
width: calc(100% + 50px); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T00:56:23.340

我看到了你的小提琴，虽然我不确定这是你需要的确切效果，试试这个：

```
.myDiv:hover {
    padding-right: 20px; 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T00:58:07.550

将默认填充设置为 0 并将悬停填充设置为每侧 10 像素，如下所示。

工作演示：http: [//jsfiddle.net/jfriend00/YWvTu/](http://jsfiddle.net/jfriend00/YWvTu/)

```
.myDiv {
    float: left;
    width: auto;
    padding: 0;
    background-color: #eeeeee;
    border: 1px solid #aaaaaa;
    -moz-transition: all 0.25s ease-out;
    -webkit-transition: all 0.25s ease-out;
    -i-transition: all 0.25s ease-out;
    transition: all 0.25s ease-out;
}
.myDiv.alternative {
    width: 100px;
}
.myDiv:hover {
    padding: 0 10px;
} 
```****

# azure - 无法在 Azure 中对两个前端 linux VM 进行负载平衡

> ID：12878359
> 
> 赞同：1
> 
> 时间：2012-10-14T00:46:37.393
> 
> 标签：azure, azure-virtual-machine, azure-load-balancer

我有一个 2 层应用程序启动并运行，它通常运行良好，可以在 6 天内从无到有部署（欢呼！）——但现在我想添加第二个 Linux 前端 VM 以实现负载平衡和容错。

这是我所做的：

1.  我停止了现有的前端虚拟机并捕获了图像。

2.  然后我再次创建它，因此有一个基于此图像的“azul-frontend.cloudapp.net”。

3.  然后我尝试从名为“azul-frontend2”的图像创建第二个克隆，但是当我在门户的创建 UI 中进入“VM 模式”刀片时，当我选择“连接到现有虚拟机”时，机器选择下拉列表和“区域/关联组/虚拟网络”下拉列表为空白且不可选择。

我不知道我做错了什么 - 有什么想法吗？

谢谢！

# python - 在函数内迭代

> ID：12878360
> 
> 赞同：3
> 
> 时间：2012-10-14T00:46:49.473
> 
> 标签：python, function, iteration

我一整天都在努力，但无济于事，我花了大约 4 个小时来研究一个可能的答案，因为我喜欢自己发现事情，但我似乎无法更进一步。

我正在编写一个接受字符串的函数，并且使用这个字符串我必须将每个字符转换为一个符号，不包括空格和破折号。

我也尝试为它创建一个银行系统，但它似乎只迭代第一个元素，这与返回有关吗？

```
def get_view(puzzle): 
  for elements in puzzle:
      new_ string = elements.replace(elements, "$")
      return new_string 
```

编辑：我试过：

隐藏 = "^" new_string = ""

```
def get_view(puzzle):
    for elements in puzzle:
    new_string = puzzle.replace(elements, HIDDEN)
    return new_string 
```

现在回来了

> > > get_view("abc") 'ab^'

啧啧啧。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T00:48:44.630

它确实与[`return`](http://docs.python.org/reference/simple_stmts.html#grammar-token-return_stmt). 当`return`遇到语句时，函数进程终止；因此，`for`您的函数的 -loop 将始终在其第一次迭代时结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T00:51:37.980

首先，您必须定义要将每个字母转换为的内容。举个例子

`conversion_symbols = {'a':'$','b':'#'}`# 其余部分自己填写。

```
# then you have to loop over the string, give gives one character at a time, covert it and
# and add to your result string and then return the result string.

def get_view(puzzle):
  new_string = ""
  for element in puzzle:
      new_string += conversion_symbols[element]
  return new_string 
```

这是你试图达到的方法吗？

# python - 如何锁定终端运行 perl、obj c、c++、python 和 ruby 等脚本的源代码？

> ID：12878370
> 
> 赞同：-4
> 
> 时间：2012-10-14T00:48:26.330
> 
> 标签：python, linux, perl, terminal

我想出售我用 perl、obj c、c++、python、ruby、bash、php 等制作的脚本

它们都在终端中运行。(Linux)

我怎样才能锁定源代码，这样我的脚本就可以在没有人访问源代码的情况下分发..？

换句话说，如果代码被下载到他们的 Linux 机器上，但他们无法访问实际的源代码，你如何锁定在终端中运行的程序的源代码，以便人们可以使用该程序？

示例：example.pl 是保存在 Linux 计算机上的文件，可以通过终端激活。但是如果用户点击实际的 example.pl 文件，他们可以看到实际的代码。是否可以锁定此文档，但仍允许用户在终端中运行程序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-14T00:55:43.877

不，这不对。如果计算机可以读取它，则用户可以读取它。你能做的最好的就是*混淆*——你可以为你的特定语言查找它，但也没有完美的混淆。只需取出所有空格，将所有标识符更改为单个字母，然后在上面放上许可证。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-14T01:33:51.780

简短的回答：不要打扰。这在技术层面上实际上是不可能的。相反，让律师起草一份好的软件许可证，以防止客户重新分发您的代码，并让他们签署作为您销售合同的一部分。

然后当你的客户在大学的侄子意识到你的应用程序是一个 Perl 脚本时，他会哭泣，写一个替代品，并在 Github 上免费发布。

悲伤，但真实。今天，我绝不会尝试围绕销售易于克隆的软件来建立业务。例如，想想 iTunes App Store 上有多少几乎相同的应用程序，并且（可能）这些开发人员都没有看到他们竞争对手的代码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-14T01:17:34.370

可以在不分发源代码的情况下分发您的程序。但这并没有取得任何成果。用户可以重新生成等效的源代码，允许他复制部分代码、使用部分代码或找出代码的确切用途。我确信其中一个或所有是您的实际目标。

# delphi - 如何测试网络设备的有效 RTSP 流？

> ID：12878373
> 
> 赞同：8
> 
> 时间：2012-10-14T00:48:50.757
> 
> 标签：delphi, winapi, winsock, rtsp, tcp-ip

我正在开发一个使用 VLC 媒体播放器插件通过 RTSP 流式传输视频/音频的项目。我想提供一个选项来扫描网络以查找 RTSP 摄像机。我确信这将包括查询所有网络设备的列表，以及测试端口 554。所有这些我都可以处理。但是，一旦我走到这一步，如何通过端口 554 测试设备以确保它是有效的 RTSP 摄像机？

我假设应该有一些东西`Winsock`能够做到这一点，但是我应该如何测试套接字连接并确保它是我可以连接的有效 RTSP 流？无论使用哪种方法，我都不必尝试通过 RTSP 连接到每个使用任何类型的身份验证，我正在寻找一种较低级别的方法来确定端口 554 是否实际上提供了 RTSP 流。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T22:28:18.600

没有可靠的方法来扫描网络以查找可用的 RTSP 流。考虑到以下几点，您仍然可以进行出色的搜索：

1.  为了获得最佳结果（而不是速度），您需要对可用地址进行强力搜索，即检查适配器地址和掩码，生成地址并在多个线程（或异步套接字）中一个接一个地尝试
2.  您将需要端口 554 和/或由用户以交互方式提供；真实设备（数百种型号）可能使用不同的端口，即使使用默认设置
3.  您可以通过使用 UPnP、ZeroConf 在网络中搜索真实地址，将更有可能的候选人放在 IP 地址列表的顶部
4.  考虑到特定的供应商/型号，您还可以实现特定于供应商的搜索，这通常涉及发送广播 UDP 消息和侦听响应
5.  `OPTIONS`RTSP 命令应该足以进行测试，您可以使用[交互式 RTSP 工具](http://alax.info/blog/343)查看它是如何工作的。无论如何，都没有任何保证，因为设备可能要求您进行身份验证。

无论如何，你最有机会`OPTIONS`收到任何有意义的东西。`DESCRIBE`可能已经要求您登录，您甚至可能需要对`OPTIONS`. 您仍然有 RTSP 响应，假设那里存在某些东西。

```
Connection to 192.168.0.59:554 using TCP

OPTIONS * RTSP/1.0
CSeq: 1

RTSP/1.0 401 Unauthorized
CSeq: 1
Date: Tue, Oct 16 2012 22:22:53 GMT
WWW-Authenticate: Basic realm="RTSP/RTP stream" 
```

要发出成功的`DESCRIBE`命令并接收有意义的结果，您需要知道设备上的资源 URI，这并不总是显而易见的。更好的供应商（显然是少数）灵活地支持传入请求，其他供应商假设客户端知道设备特定。例如，

```
Connection to 192.168.0.59:554 using TCP

OPTIONS * RTSP/1.0
CSeq: 1

RTSP/1.0 200 OK
CSeq: 1
Date: Tue, Oct 16 2012 22:26:54 GMT
Public: OPTIONS, DESCRIBE, SETUP, TEARDOWN, PLAY, PAUSE

DESCRIBE rtsp://192.168.0.59/ch0_unicast_secondstream RTSP/1.0
CSeq: 2
Accept: application/sdp

RTSP/1.0 200 OK
CSeq: 2
Date: Tue, Oct 16 2012 22:27:22 GMT
Content-Base: rtsp://192.168.0.59/ch0_unicast_secondstream/
Content-Type: application/sdp
Content-Length: 506

v=0
o=- 1350426392586736 1 IN IP4 192.168.0.59
s=Session of second stream
i=Second Codec Stream
t=0 0
a=tool:LIVE555 Streaming Media v2007.08.03
a=type:broadcast
a=control:*
a=range:npt=0-
a=x-qt-text-nam:Session of second stream
a=x-qt-text-inf:Second Codec Stream
m=video 0 RTP/AVP 26
c=IN IP4 0.0.0.0
a=control:track1
m=audio 0 RTP/AVP 97
c=IN IP4 0.0.0.0
a=rtpmap:97 PCMU/16000
a=control:track2
m=metadata 0 RTP/AVP 98
c=IN IP4 0.0.0.0
a=rtpmap:98 METADATA/64000
a=control:track3

DESCRIBE rtsp://192.168.0.59 RTSP/1.0
CSeq: 3
Accept: application/sdp

RTSP/1.0 404 Stream Not Found
CSeq: 3
Date: Tue, Oct 16 2012 22:27:29 GMT 
```

请注意，在不了解魔法的情况下，`ch0_unicast_secondstream`您不会从设备中获得任何有意义的东西。

# java - Hadoop：原语数组作为键值对中的值

> ID：12878375
> 
> 赞同：4
> 
> 时间：2012-10-14T00:49:03.553
> 
> 标签：java, arrays, hadoop, key-value, writable

我在之前的线程[Hadoop 中提出了一个非常相似的问题：如何将一个双精度数组作为键值对中的值？](https://stackoverflow.com/questions/9342243/hadoop-how-can-i-have-an-array-of-doubles-as-a-value-in-a-key-value-pair).

我的问题是我想将双数组作为值从映射传递到减少阶段。我得到的答案是序列化，转换为文本，将其传递给减速器并反序列化。这是一个很好的解决方案，但它就像对它进行两次序列化和反序列化。

ArrayWritable 只接受实现 Writable 的类型，例如 FloatWritable。所以另一种解决方案是将我的双精度数组转换为 DoubleWritables 数组。但这也需要一些时间，而且 Writables 是一种非常昂贵的资源。没有像 ArrayWritable array=new ArrayWritable(Double.class) 这样的非常简单的解决方案吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-14T01:47:20.127

只需实现您自己的[Writable](http://hadoop.apache.org/docs/r1.0.1/api/org/apache/hadoop/io/Writable.html)接口即可。

例如，

```
public class DoubleArrayWritable implements Writable {
    private double[] data;

    public DoubleArrayWritable() {

    }

    public DoubleArrayWritable(double[] data) {
        this.data = data;
    }

    public double[] getData() {
        return data;
    }

    public void setData(double[] data) {
        this.data = data;
    }

    public void write(DataOutput out) throws IOException {
        int length = 0;
        if(data != null) {
            length = data.length;
        }

        out.writeInt(length);

        for(int i = 0; i < length; i++) {
            out.writeDouble(data[i]);
        }
    }

    public void readFields(DataInput in) throws IOException {
        int length = in.readInt();

        data = new double[length];

        for(int i = 0; i < length; i++) {
            data[i] = in.readDouble();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T00:55:06.627

您可以指定`double[]`a 的值类型`Map`：

```
Map<String, double[]> map = new HashMap<String, double[]>(); // compiles 
```

`Serializable`如果元素类型是， Java 数组是自动的`Serializable`，而原语是 all `Serializable`。

# vb.net - 在 VB.NET 中查看报表

> ID：12878390
> 
> 赞同：0
> 
> 时间：2012-10-14T00:52:47.690
> 
> 标签：vb.net

我准备在 vb 中制作一个使用 MSACCESS 数据库并且必须查看一些报告的软件。这包括从数据库中的不同表中获取大量信息并按顺序排列它们。

我想使用表格和文本来格式化报告。有没有办法像在 HTML 中一样使用表格。

我的意思是有没有一种方法可以让我们在 VB.NET 中使用 HTML 表（或类似的东西）？

***PS：我不是专业的 VB 程序员。所以，我不知道这件事***

**我想查看的格式：**

姓名：***_* __ *_* __ *_* __ *_* __ *_* __**

标签：***_* __ *_* __ *_* __ *_* __ *_* _**

[表开始]

[表格数据]

[表尾]

其他信息：

*该表是具有合并行和列的标准表。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T01:17:26.523

您可以使用 Microsoft Report (RDLC) 制作数据库的自定义报告。

1.  从项目菜单添加报表和数据集
2.  随心所欲设计rdlc
3.  将 Tablix 添加到您的 rdlc 并将数据集设置为数据源
4.  将报表查看器添加到您的表单并设置设计的本地报表
5.  将您的自定义数据传递到数据集并刷新您的报告

通过这个，您可以以 excel 和 pdf 格式打印和导出。Rdlc 有一些内置的 html 结构，我不认为你可以编辑它。

或者

您可以自己使用打印文档并直接提供 HTML 代码作为字符串内容。它会自己渲染它们。

我更喜欢使用 RDLC，简单且最好。：） 一切顺利...

编辑：名称和标签可以传递给报告，因为 'reportParameters' RDLC 可以满足您的需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T01:15:11.167

您可以使用 RDLC 或 Crystal Report

*   [演练：在本地处理模式下将数据库数据源与 ReportViewer Windows 窗体控件结合使用](http://msdn.microsoft.com/en-us/library/ms251724%28v=vs.80%29.aspx)
*   [在本地处理模式下将数据库数据源与 ReportViewer Web 窗体控件一起使用](http://msdn.microsoft.com/en-us/library/ms252123%28v=vs.80%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T01:00:59.903

您可以使用 vb 数据网格控件，点击以下链接

[http://www.vbtutor.net/lesson26.html](http://www.vbtutor.net/lesson26.html)

**编辑**

以上是针对 vb 而不是针对 vb.net，如果您正在寻找 vb.net，请尝试使用 datagrid 组件或生成 HTML 并使用 Windows 应用程序内的浏览器控件加载它们

# html - 为什么这个锚标签不起作用？

> ID：12878398
> 
> 赞同：0
> 
> 时间：2012-10-14T00:54:51.393
> 
> 标签：html, css, debugging, anchor

这有点奇怪，我觉得这可能是一些我无法弄清楚的微妙 css 规则。如果您查看博客帖子所在的链接页面，则每个帖子的缩略图都在 a 标签内，然后在 div 内，但是当您将它们悬停时，没有链接注册以便能够单击图像。

[http://www.brainbuzzmedia.com/themes/simplybusiness/?page_id=72](http://www.brainbuzzmedia.com/themes/simplybusiness/?page_id=72)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T00:59:21.340

我想到了。浮动 div 在非浮动 div 之外。

# java - 使用品牌形象

> ID：12878404
> 
> 赞同：0
> 
> 时间：2012-10-14T00:55:24.340
> 
> 标签：java, gwt, twitter-bootstrap

我正在尝试使用我的 GWT Bootstrap 应用程序添加图像。我用小部件替换了小部件，但是`ResponsiveNavBar`与使用 Brand 小部件相比，使用 GWT Image 小部件时高度会调整大小。

```
 <ui:with field='res' type='com.mycomp.mygwt.client.Resources'/>

    <b:ResponsiveNavbar position="TOP" scrollspy="false"> <!--  inverse="true" -->
        <!-- <b:Brand href="#">MyApp</b:Brand> -->
        <g:Image resource='{res.logo}'/>
    </b:ResponsiveNavbar> 
```

*   有没有办法使用 ui:with 资源将图像分配给品牌？
*   另外，为什么在 GWT-Bootstrap 展示中设置了该`ResponsiveNavBar`字段`inverse="true"`，但是当我在我的应用程序中使用它时出现此错误：

    ```
    [ERROR] [MyGWT] - Class ResponsiveNavbar has no appropriate setInverse() method Element <b:ResponsiveNavbar inverse='true' position='TOP' scrollspy='false'> (:11) 
    ```

我正在使用 GWT-Bootstrap 版本：`2.0.4.0-SNAPSHOT`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:44:37.597

您的问题的答案：

> - 有没有办法使用 ui:with 资源将图像分配给品牌？

我想不是。我相信您可以执行以下操作：

```
<b:Brand href="#"><g:Image resource='{res.logo}'/></b:Brand> 
```

如果它不起作用，只需创建一个带有 css 类“品牌”的链接，并将您的图像放入其中。

> Also, why in the GWT-Bootstrap showcase, the ResponsiveNavBar field inverse="true" is set, but when I use it in my application I get this error:

GWT-Bootstrap 2.0.4.0 is based on bootstrap 2.0.4, so, it doesn't have this property. Try GWT-Bootstrap 2.1.*.

Hope it helps.

# perl - 私人 perlbrew 和 CPAN 不工作。仍然。再次

> ID：12878409
> 
> 赞同：0
> 
> 时间：2012-10-14T00:56:50.190
> 
> 标签：perl, cpan, perlbrew

我以为我有它的工作。

我有一个完全私有的 Perl 5.16 版本（私有我的意思是我的主目录的本地），以及一个用于 CPAN 模块的私有位置。我按照[http://blog.fox.geek.nz/2010/09/installing-multiple-perls-with.html](http://blog.fox.geek.nz/2010/09/installing-multiple-perls-with.html)上的说明进行操作（针对其略微过时的情况进行调整），声称完全回避了对本地::lib。我使用上面提到的instrux安装的cpanm，安装了Cache::Memcached::Fast.pm，并成功运行了一个使用该模块的Perl程序。

今天它不工作了。

```
Can't locate Cache/Memcached/Fast.pm in @INC (@INC contains:     
/Users/chap/perl5/perlbrew/perls/perl-5.16.1/lib/site_perl/5.16.1/darwin-2level
/Users/chap/perl5/perlbrew/perls/perl-5.16.1/lib/site_perl/5.16.
/Users/chap/perl5/perlbrew/perls/perl-5.16.1/lib/5.16.1/darwin-2level
/Users/chap/perl5/perlbrew/perls/perl-5.16.1/lib/5.16.1 .) at ./memget line 11. 
```

一些故障排除：

```
/Users/chap$ perlbrew use
Currently using perl-5.16.1 
```

...甜的。

```
/Users/chap$ which perl
/Users/chap/perl5/perlbrew/perls/perl-5.16.1/bin/perl 
```

...惊人的。

```
/Users/chap$ perlbrew switch perl-5.16.1
/Users/chap$ cpanm --interactive -v App::cpanoutdated
cpanm (App::cpanminus) 1.5014 on perl 5.012004 built for darwin-thread-multi-2level
Work directory is /Users/chap/.cpanm/work/1350175791.76873
You have make /usr/bin/make
You have LWP 6.03
You have /usr/bin/tar: bsdtar 2.8.3 - libarchive 2.8.3
You have /usr/bin/unzip
Searching App::cpanoutdated on cpanmetadb ...
!
! Can't write to /Library/Perl/5.12 and /usr/local/bin: Installing modules to /Users/chap/perl5
! To turn off this warning, you have to do one of the following:
!   - run me as a root or with --sudo option (to install to /Library/Perl/5.12 and /usr/local/bin)
!   - Configure local::lib your existing local::lib in this shell to set PERL_MM_OPT etc.
!   - Install local::lib by running the following commands
!
!         cpanm --local-lib=~/perl5 local::lib && eval $(perl -I ~/perl5/lib/perl5/ -Mlocal::lib)
!
Checking if you have ExtUtils::MakeMaker 6.31 ... Yes (6.62)
Checking if you have ExtUtils::Install 1.46 ... Yes (1.55)
App::cpanoutdated is up to date. (0.23) 
```

哦哦。为什么系统Perl？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T06:48:12.763

如果您跳过或搞砸了第 6 步（为每个 perl 设置“cpanm”），那么您可能正在运行一个以前随系统 perl 安装的 cpanm，因此它想写入系统目录。

最近版本的 perlbrew 有一个“install-cpanm”命令，可以将 cpanm 安装在任何 perl 之外的特殊位置。这样，您不必为您酿造的每个 perl 安装 cpanm。这可能是您需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T06:27:34.467

我建议您检查 cpanm 可执行文件的源代码。

您的`cpanm`命令有可能包含 shebang of `#!/usr/bin/perl`。在这种情况下，`perlbrew switch`还是`perlbrew use`不能更改 perl 的版本来调用 cpanm 命令。（当然，除非你一直`perl /usr/bin/cpanm`都在运行它。

If you do the installation by `curl -o cpanm http://cpanmin.us` or `perlbrew install-cpanm` it should contain a shebang that says `/usr/bin/env perl`, which can be switched dynamically.

# visual-studio-2010 - 在 Productivity Power Tools 中将 Cntl+Click 更改为 Cntl+Shift+Click

> ID：12878411
> 
> 赞同：1
> 
> 时间：2012-10-14T00:57:08.167
> 
> 标签：visual-studio-2010, productivity-power-tools

有没有办法更改 Productivity Power Tools 中的 Cntl+Click Goto 定义以使用不同的组合键。启用它几乎不可能复制和过去。我继续定义。

# php - Twitter API 缓存？

> ID：12878412
> 
> 赞同：0
> 
> 时间：2012-10-14T00:57:59.867
> 
> 标签：php, json, api, caching, twitter

我有一些 PHP 代码可以从其 API 中检索 Twitter JSON 数据。我正在抓取一些东西，比如用户图片、屏幕名称、不。追随者和没有。的推文。

以后可能会为其他配置文件提供更多数据！

这是PHP代码：

```
<?php
            $data = json_decode(file_get_contents('https://api.twitter.com/1/users/show.json?callback=?&screen_name=guardian'), true);
            $data[0]['profile_image_url'];
            ?>

<?php
            $data = json_decode(file_get_contents('https://api.twitter.com/1/users/show.json?callback=?&screen_name=guardian'), true);
            echo $data[0]['screen_name'];
            ?>

<?php
            $data = json_decode(file_get_contents('https://api.twitter.com/1/users/show.json?callback=?&screen_name=guardian'), true);
            echo $data[0]['followers_count'];
            ?>

<?php
            $data = json_decode(file_get_contents('https://api.twitter.com/1/users/show.json?callback=?&screen_name=guardian'), true);
            echo $data[0]['statuses_count'];
            ?> 
```

一切都很好，*然后就没有了。*我假设这是由于速率限制/我没有缓存的事实。

我对这一切都很陌生，所以我将如何为它设置缓存并让它每隔几个小时左右请求一次最新数据/基本上确保它不会填满&什么都不显示>。<

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T01:15:37.313

这可能是因为速率限制。

Twitter 对未经身份验证的调用（对未使用 OAuth 进行身份验证的 API 进行的调用）实施速率限制。

> “未经身份验证的呼叫每小时允许 150 个请求。未经身份验证的呼叫是根据发出请求的服务器或设备的面向公众的 IP 来衡量的。”

如果您使用的是共享主机，则您更有可能受到速率限制，因为在主机上使用相同 IP 的其他人也可能会查询 Twitter API（因此，计入该 IP 的每小时限制）。

[您可以在Twitter 的速率限制限制网站](https://dev.twitter.com/docs/rate-limiting)以及[速率限制常见问题解答网站](https://dev.twitter.com/docs/rate-limiting-faq)上阅读有关这些限制的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T18:25:39.073

不是`$data[0]['profile_image_url']`

就放`$data['profile_image_url']`

# html - 我是 HTML 初学者，我需要帮助编写静态文本

> ID：12878414
> 
> 赞同：2
> 
> 时间：2012-10-14T00:58:17.193
> 
> 标签：html, css

我正在使用 Apache 运行服务器，我有一个问题：你知道在某些网站上，当你滚动时，有些东西会留在原地吗？

这方面的一个例子是在 Facebook 上，它显示“新事件”，当你滚动时它会随着你向下滚动。我想知道如何做到这一点。我在服务器计算机上安装了 WAMP，所以如果它需要 PHP，我可以这样做。我真的不知道该用什么作为搜索词。

编辑：这叫什么，所以我可以用谷歌搜索它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T01:05:25.893

你应该按照你的想法来谷歌搜索，只是更短。

我会用谷歌搜索“带屏幕的 div 滚动”或其他内容。它应该能让你到达那里。

无论如何，您为此使用 CSS。你制作一个 div （我猜你知道它是什么）并给它一个“固定”位置。（注意；您应该将它们放在侧面或其他东西上。底部和顶部提供更多代码）

所以你的html会像

```
<div id="scrolldiv">
 your text here 
</div> 
```

您的 CSS 将如下所示：

```
#scrolldiv{
height: 200px;
width: 200px;
position:fixed;
} 
```

如果你还不知道如何使用 CSS，你可以这样做（虽然不推荐）

```
<div style="width:200px; height:200px; position:fixed;"> text here </div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T01:01:55.133

只需添加`position: fixed;`到 CSS。这告诉它相对于浏览器窗口定位，而不是相对于页面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T01:08:08.707

给你的元素一个类，例如

```
<div class='navbar'>
<!-- your menu html goes here -->
</div> 
```

在你的页面头部放置样式标签

```
<style>
.navbar {
position: fixed;
right: 0;
left: 0;
}
</style> 
```

还请查看[http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)这是对这类事情的一个很好的开始。它还具有您在示例中讨论的固定菜单。

我使用谷歌浏览器，检查元素功能非常适合查找元素的 css。有些人还使用 Firebug 和 firefox 来实现类似的功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T00:54:42.567

在玩了很长时间之后，我最终找到了一些适合我的代码。我在网站的开头添加了一些换行符，然后将这段 CSS 代码添加到头部：

```
.navbar {
z-index = 1000;             /*or some large number*/
position: fixed;            /*this makes it scroll down with you*/
width: 100%;                /*the border takes up all the width available*/
height: 40px;               /*and takes up 40 pixels vertically*/
} 
```

感谢所有帮助我的人！

# ruby - 从字符串创建 ruby 函数

> ID：12878418
> 
> 赞同：1
> 
> 时间：2012-10-14T00:59:41.533
> 
> 标签：ruby

我有一个红宝石函数的主体作为一个字符串

```
s = "x + 1" 
```

我想做类似的事情

```
fn = make_function(:x, s)
y = fn(10) # returns 11 
```

实现这样的目标的最佳方法是什么？

请注意，我宁愿不只是继续评估每个函数调用的字符串

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T01:05:13.587

这将评估字符串一次以定义函数。

```
eval ['def fn(x)', s, 'end'].join("\n") 
```

这是你想要的东西`make_function`

```
def make_function(klass, name, args, body)
  args = [ args ].flatten.map(&:to_s).join(', ')
  klass.class_eval ["def #{name} (#{args})", body, 'end'].join("\n")
end

irb> make_function(Object,:foo,[:x],'x*2')
=> nil
irb> foo(10)
=> 20
irb> foo(1.3)
=> 2.6 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T01:07:38.240

`eval`一个`Proc`！

```
def make_function(arguments, body)
    eval "Proc.new { |#{arguments}
              #{body}
          }"
end

f = make_function :x, 'x + 1'

puts f.call 10 # 11
puts f.call 21 # 22 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T20:20:50.033

你真的不想这样做。但是它仍然可以按您的意愿工作。

```
module Kernel
  def make_function(*args, string)
    method_name = args.shift
    parameters = args

    args_string = parameters.map{|p| p.to_s}.join(",")

    instance_eval <<-RUBY 
      def #{method_name}(#{args_string})
        #{string}
      end 
    RUBY
  end
end

s = "x + 1"

make_function(:fn,:x,s)
puts fn(1) #=> 2

s2 = "x + y"
make_function(:foo,:x, :y,s2)
puts foo(1,5) #=> 2 
```

# java - 如何知道 DatagramSocket 何时处于接收状态

> ID：12878421
> 
> 赞同：2
> 
> 时间：2012-10-14T01:00:03.483
> 
> 标签：java, multithreading, udp

我正在使用 DatagramSocket 运行 UDP Java 实现，其中接收在一个线程上运行，发送操作在单独的线程上运行。当我的程序启动时，我需要调用服务器并接收回信息。问题是，由于线程，即使我先启动接收线程，有时发送会先出去，当服务器回复时，套接字还没有在另一个线程中调用接收（）。由于该线程在 receive() 行上阻塞，因此我无法使用标志来验证 receive() 是否已被调用。有什么方法可以检查套接字当前是否在接收（）上阻塞，以便我可以等待发送，直到我验证该条件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T10:51:40.290

就在 recvfrom() 循环之前从 rx 线程启动 tx 线程，并在 tx 线程的开始处放置一个 sleep(2000)，然后它也开始围绕其输入队列循环，或者它通常做的任何事情来发送东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:03:34.313

你不需要两个插座。

1.  创建一个`DatagramSocket.`它立即处于“接收状态”。

2.  启动一个接收线程，通过`DatagramSocket.`

3.  启动一个发送线程，通过`DatagramSocket.`

(2) 和 (3) 的顺序不再重要。

# variables - Netty：FrameDecoder 问题？

> ID：12878422
> 
> 赞同：0
> 
> 时间：2012-10-14T01:00:47.490
> 
> 标签：variables, netty

每个人。

我正在尝试为 Netty 开发 POC，现在我在 FrameDecoder 上花了 3 个小时。不能让它工作:( 客户端将发送一个具有这种格式的二进制消息：

`[Header1] [MessageLength] [Header2] [ActualMessage]`

（例如`H0005HWorld`）

消息长度为十进制格式。如果消息的标题是`H0255H`那么消息长度是 255.. 我不能使用，`LengthFieldBasedFrameDecoder`因为它期望长度字段是十六进制的。我也尝试过使用`framedecoder`，但我遇到了问题，因为我无法使用该函数`channelBuffer.readInt()`来获取长度，因为长度字段是十进制格式。

请帮我解决这个问题:(

编辑：

尝试了基本的 FrameDecoder 并发送了以下消息：`0005Hello` 控制台中长度的值是`808464436`..长度应该是`5`而不是`808464436`对吗？如果我误解了什么，请赐教。:(

```
if (channelBuffer.readableBytes() < 4) {
            return null;
         }

channelBuffer.markReaderIndex();

int length = channelBuffer.readInt();
System.out.println(length);

if (channelBuffer.readableBytes() < length) {
 channelBuffer.resetReaderIndex();
 return null;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:36:23.987

Netty 没有提供读取十进制数的方法。你可以很容易地自己做。这是一个快速（非 Netty）示例，将数据读入字符串，然后使用 Integer.parseInt 获取值。

```
byte[] buf = {0,2,5,5};
String s = "";
for(int i=0; i < buf.length; i++) {
    s += buf[i];
}
System.out.println(Integer.parseInt(s)); 
```

# c++ - 继承：将 derived& 作为 arg 赋予期望 base& 的函数

> ID：12878426
> 
> 赞同：4
> 
> 时间：2012-10-14T01:01:00.973
> 
> 标签：c++, inheritance

考虑这个示例代码：

```
#include <iostream>

class base {
    public:
    base() {
        std::cout << "base constructed" << std::endl;
    }
    base(const base & source) {
        std::cout << "base copy-constructed" << std::endl;
    }
};

class derived : public base {
    public:
    derived() {
        std::cout << "derived constructed" << std::endl;
    }
    derived(const derived &) = delete;
    derived(const base & source) : base(source) {
        std::cout << "derived copy-constructed from base" << std::endl;
    }
};

int main() {
    derived a;
    base b(a);
    derived c(a);

    return 0;
} 
```

为什么调用 to`base::base(const base &)`可以，但调用 to`derived::derived(const base &)`不行？两者都期望一个基本引用，并且都给出了一个派生引用。我的理解是派生的'是'基础。

为什么编译器在提供对派生类型对象的引用时`derived::derived(const derived &)`使用没有问题时坚持使用？`base::base(const base &)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T01:10:11.060

```
derived a; 
derived c(a); 
```

您有明确`deleted`的复制构造函数。这意味着上面的第二行将无法编译。与`base`案例的不同之处在于，在基本案例中，没有`base`声明的构造函数接受 a `derived&`，因此应用了转换。

但是在`derived`有这样一个函数的情况**下**，它被声明和删除。重载解析将找到两者`derived(derived const &)`，并且`derived(base const &)`两者都被声明，并将选择第一个作为最佳匹配。然后它会发现它被删除并抱怨。

如果要将其他构造函数与`derived`对象一起使用，则必须显式强制转换：

```
derived c( static_cast<base&>(a) ); 
```

在这种情况下，最好的重载成为`derived( base const& )`并且代码将编译。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T01:32:42.180

显然“删除”其中一项默认内容并没有实际删除它的效果。曾经引以为豪的默认复制构造函数留下了一些可怕的可怕遗迹，它们会弹出并用阴森森的声音告诉你“*我是 deeeeaaaaaad！* ”。

这对我来说并不是一个完全令人惊讶的事实，尽管在你问这个问题之前我并没有具体意识到这一点。我不能引用标准的相关部分（我确信相关部分没有提到食尸鬼，尽管它应该）。而且我也相当肯定，一旦你关注一些关于一些可怕案例的令人难以置信的复杂故事，如果不是这样，这种情况就会以一种可怕的方式运作，这是有某种原因的。

而且，对您来说不幸的是，如果周围有比转换为基类更好的匹配项，那么它将被使用。例如，在这段代码中：

```
#include <iostream>

class A {
};

class B {
 public:
   void foo(const A &) { ::std::cerr << "B::foo(const A &) called!\n"; }
   void foo(const B &) { ::std::cerr << "B::foo(const B &) called!\n"; }
};

int main()
{
    B b;
    A &ar = b;
    b.foo(b);
    b.foo(ar);
}; 
```

将导致此输出：

```
B::foo(const B &) called!
B::foo(const A &) called! 
```

这正是您所期望的。编译器不会将这种情况视为模棱两可。而且，如果您将`void foo(const B &)`其设置为*私有*或*受保护*成员，那么编译器仍然会优先匹配它，并告诉您您尝试访问具有访问说明符的内容，该说明符说您不能。

*将某些内容设置为“删除”就像简单地使用比private*更受限制的特殊访问说明符声明它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T01:09:58.050

我要继续说这是因为签名`derived c(a);`与您删除的函数的签名完全匹配。如果可能，C++ 将尽量避免强制转换/提升/转换，并且会更喜欢最接近的匹配。转换`a`为正确的类型 ( `base`) 应该修复它，以便它停止匹配已删除函数的签名并开始匹配其他构造函数的签名。

# javascript - 如何用 jQuery 解析这个 JSON？

> ID：12878435
> 
> 赞同：-1
> 
> 时间：2012-10-14T01:02:46.713
> 
> 标签：javascript, jquery, ajax, json

所以我在xml中有这个结构，我能够成功地解析它。现在我所做的是我使用 www.xmltojson.org 将此 xml 转换为 JSON，但我无法解析它。我在本地主机 Web 服务器上本地设置这些文件：

```
<script>
        $(function() {
            $.ajax({
                url:'feed.json',
                dataType:'json',
                type:'GET',
                success:function(json) {
/// what to do here
}.
error: {
 alert("Parse Failed");
}
});
});
</script> 
```

我正在尝试学习 JSON，所以我不确定我在哪里做错了，或者即使那是正确的方法。

谢谢米奇。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T01:20:44.033

无需解析任何内容，因为您已经指定`dataType:'json'`; 如果 url 存在并返回一个有效的 json 字符串，jQuery 会为你解析它，所以成功回调会得到一个实际的对象：

```
$(function() {
    $.ajax({
        url:'feed.json',
        dataType:'json',
        type:'GET',
        success: function(data) {
            console.log(data.propertyone);
            console.log(data.propertytwo);
        },
        error: function() {
            console.log("Parse Failed");
        }
    });
}); 
```

（此外，您的原始代码中有几个语法错误，已在上面修复）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T01:04:53.350

你最好的选择是[**jQuery.parseJSON**](http://api.jquery.com/jQuery.parseJSON/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T01:13:37.397

看一个例子：

`var obj = jQuery.parseJSON('{"name":"John"}');`

`alert( obj.name === "John" );`

另一个例子：

`$.each(json, function(i,e){` `alert(e.data); // data is the key for value` `}`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-14T01:19:10.973

您不需要 3rd 方工具。

jquery 可以通过设置自动为您转换它`dataType:'xml json'`

> [...] 诸如“jsonp xml”之类的速记字符串将首先尝试从 jsonp 转换为 xml，如果失败，则从 jsonp 转换为文本，然后从文本转换为 xml。

文档：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-14T01:19:12.843

如果设置`dataType`为，`json`则 json 响应将由 jQuery 在内部解析，传递给成功函数的参数将是解析后的 json 生成的对象。

# c# - 如果单元格的内容大于其宽度，如何在 DataGrid 中显示省略号？

> ID：12878436
> 
> 赞同：6
> 
> 时间：2012-10-14T01:03:18.740
> 
> 标签：c#, wpf, datagrid

是否可以显示`...`a 中某个单元格的内容`DataGrid`是否大于指定的`ColumnWidth`？就像是：

```
-------------------------------
|   Name   |    Last Name     |
-------------------------------
| LongNa.. |                  |
------------------------------- 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-14T07:18:55.007

`TextTrimming`就是你要找的。使用`DataGridTemplateColumn`并将 a`TextBlock`插入`CellTemplate`其中支持`TextTrimming`。样本 -

```
<DataGrid ItemsSource="{Binding ItemsSourceForYourGrid}">
   <DataGrid.Columns>
      <DataGridTemplateColumn Width="20">
         <DataGridTemplateColumn.CellTemplate>
            <DataTemplate>
              <TextBlock Text="{Binding Name}" TextTrimming="CharacterEllipsis"/>
            </DataTemplate>
         </DataGridTemplateColumn.CellTemplate>
      </DataGridTemplateColumn>
    </DataGrid.Columns>
</DataGrid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T01:50:21.790

是的你可以。

试试这个代码，我认为它会工作：

```
public static string StringEllipsis(DataGrid grid, string text, float columnWidth)
{
    // you can customize this variables, for your preferences
    string yourEllipsis = "..."; 
    string yourFontFamily = "Arial";
    float yourFontSize = 9F;
    float yourTolerance = 1F;

    Graphics graphics = grid.CreateGraphics();
    if (graphics.MeasureString(text, new Font(yourFontFamily, yourFontSize)).Width <= (columnWidth + yourTolerance))
        return text;

    while (graphics.MeasureString(text + yourEllipsis, new Font(yourFontFamily, yourFontSize)).Width > (columnWidth + yourTolerance))
        text = text.Substring(0, text.Length - 1);

    return text + yourEllipsis;
} 
```

# java - 当我实例化一个自定义 List 类时，内部数组的行为不符合预期

> ID：12878437
> 
> 赞同：0
> 
> 时间：2012-10-14T01:04:09.053
> 
> 标签：java, arrays, list, class, instantiation

这是 List 类和测试的链接：[List and Test classes](https://gist.github.com/3886805 "列出并测试")

这是我打印出数组时的结果：

68 93 80 111 103 100 106 0 78 87 78 141 72 等...

该数组的大小应仅为 10 并用零填充。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T01:11:46.150

**编辑：请参阅下面的评论。**

当您复制数组时，您正在复制该数组的值（这是对原始数组的引用）。

您需要执行数组的深层复制，否则这一行：

```
int[] temp = Arrays.copyOf(array, array.length*2) 
```

不会给你一个保存原始值的新数组，它只是将旧数组的参考值放到新数组中。

基本上，如果您需要执行内容的副本并保持原始未修改，您应该遍历原始数组的内容并创建一个新数组。

# c++ - 从多维数组中返回一个数组

> ID：12878440
> 
> 赞同：1
> 
> 时间：2012-10-14T01:04:52.733
> 
> 标签：c++, xcode, portability

我正在学习cpp。我今天在mac的命令行上通过g ++编译的正常模式编写了一个程序。我也一直在仔细检查我在 XCode 中的工作，发现一行代码导致代码无法在 IDE 中编译

该行是：

```
string result[2] = subject[rand() % nsubject]; 
```

其中 subject 是一个多维字符串数组，其中它的每个成员都是两个字符串的数组，nsubject 是一个保存数组长度的 int。Xcode 说：**数组初始化器必须是初始化器列表**，但如前所述，g++ 编译时没有任何抱怨。所以，作为语言的新手，我认为这个陈述可能是糟糕的形式。一定有某种方法可以让 XCode 接受，是吗？

这是一个可以证明问题的片段，从上下文中删除没有多大意义，但以下在我的终端上编译得很好，但无法在 xcode 中构建：

```
#include <iostream>
#include <cstdlib>
#include <ctime>
#include <string>
using namespace std;

int main(){
    string subject[][2] = {
        {"a", "b"},
        {"c", "d"},
        {"e", "f"},
        {"g", "h"},
        {"i", "j"}
    };

    int nsubject = sizeof subject / sizeof subject[0];
    srand(static_cast<unsigned>(time(0)));
    string result[2] = subject[rand() % nsubject];
    cout << result[0] << endl; //should return 'a','c','e','g' or 'i'
    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T01:56:12.820

看起来您正试图将一个子数组分配`subject`给一个新数组。Xcode 可能不喜欢这样，因为您通常不会将整个数组分配给其他数组。g++ 处理得很好，因为它意识到这两个变量都是 type `string*`。如果您明确告诉 Xcode 您正在分配一个指向指针变量的指针，那么您应该没问题。以下应该在任何地方编译。

```
string* result = subject[rand() % nsubject]; 
```

请注意，其中`result`不包含子数组内容的副本`subject`，它只是对数组的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T01:58:28.247

哦好的。所以问题是你试图在这一行声明另一个由两个字符串组成的数组并为其分配另一个数组：

```
string result[2] = subject[rand() % nsubject]; 
```

这对于普通数组来说并不合法。它应该是一个有或没有指定大小的指针。例如：

```
string *result = subject[rand() % nsubject]; 
```

... 或者：

```
string (&result)[2] = subject[rand() % nsubject]; 
```

不知道为什么 gcc 编译它。希望能帮助到你！

# asp.net-mvc - 如何在 ASP.NET MVC4 中使用具有唯一标识符 URL 的 OpenID 提供程序

> ID：12878441
> 
> 赞同：11
> 
> 时间：2012-10-14T01:04:55.423
> 
> 标签：asp.net-mvc, asp.net-mvc-4, openid, dotnetopenauth, asp.net-4.5

在 ASP.NET MVC4 中实现的新`SimpleMembershipProvider`功能允许对两个流行的 OpenID 提供程序（Google 和 Yahoo）和三个 OAuth 提供程序（Microsoft、Facebook、Twitter）提供简单的内置支持。

实现的提供者[`DotNetOpenAuth.AspNet.Clients`](https://github.com/DotNetOpenAuth/DotNetOpenAuth/tree/master/src/DotNetOpenAuth.AspNet/Clients)都`SimpleMembershipProvider`使用静态 URL 来提供他们的身份服务——也就是说，所有用户都使用同一个众所周知的 URL 来访问提供者。用户的 OpenID 标识符与用于访问身份服务的 URL 是分开的。

例如，Google 的 OpenID 服务 URL 是`https://www.google.com/accounts/o8/id`面向所有用户的。

这适用`SimpleMembershipProvider`于 MVC4，其中身份提供者的 URL 需要在 MVC 应用程序启动时已知、不变并注册。

问题是，其他 OpenID 提供者通常使用用户唯一的 OpenID 标识符作为 URL 来访问身份服务。

例如，AOL 和 WordPress 分别使用`https://openid.aol.com/{username}`和`https://{username}.wordpress.com`。

如果您将 替换为`SimpleMembershipProvider`您自己的实现`ExtendedMembershipProvider`，那么您可以滚动您自己的提供程序实现，但它不适用于开箱即用的 MVC4`Account`控制器。

`SimpleMembershipProvider`当提供者在 URL 中使用带有用户名的唯一标识符时，如何使用 实现新的 OpenID 依赖方？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-14T01:04:55.423

我开发了以下适合我的解决方案，我正在分享它以防它对其他人有所帮助，但我真的很想看看是否有更直接的方法或“最佳实践”我错过了。

基本上，您需要实现一个`OpenIdClient`用 a 初始化的 a `ProviderIdentifier`，它的 URL 包含关键字`__username__`。

在运行时，将提供者名称和用户名传递给`Account`控制器​​，其中提供者客户端通过名称选择，并在`__username__`向提供者发送身份验证请求之前将用户名替换为关键字。

* * *

## OpenID 客户端

Microsoft 贡献的 DotNetOpenAuth OpenID 提供程序类继承了基类[`DotNetOpenAuth.AspNet.Clients.OpenIdClient`](https://github.com/DotNetOpenAuth/DotNetOpenAuth/blob/master/src/DotNetOpenAuth.AspNet/Clients/OpenID/OpenIDClient.cs)，它实现了`IAuthenticationClient`OpenID 提供程序类所需的接口。从[Google 提供者的源代码](https://github.com/DotNetOpenAuth/DotNetOpenAuth/blob/master/src/DotNetOpenAuth.AspNet/Clients/OpenID/GoogleOpenIdClient.cs)开始，因为它有一个直接的实现，对其进行自定义以创建一个`GenericOpenIdClient`与使用自定义 URL 的提供者一起工作的类。

要在运行时创建自定义 URL，我们将接受 OpenID 用户名作为 URI 片段，并将`__username__`URL 中的所有实例替换为用户提交的用户名。Providers 需要在应用程序启动时注册 URL，所以我们不能只在用户名已知的情况下在运行时注册一个 provider URL。

我们将使用 OpenID Selector 将表单提交给`Account`控制器的`ExternalLogin`操作，`provider`表单值设置为提供者名称和用户名，格式为`provider;{username}`。OpenId Selector 具有内置逻辑，可以`{username}`用来自呈现给用户的文本框的输入替换所有实例。在服务器端，我们将提供者名称与用户名分开，根据名称从应用程序启动时注册的提供者中查找提供者，并将`GenericOpenIdClient.UserName`属性设置为用户提交的用户名。

当创建身份验证请求以发送到 OpenID 提供者时，我们将检查该`GenericOpenIdClient.UserName`属性，如果设置，我们将在发送请求之前使用用户名重新创建提供者 URL。为此，我们需要`RequestAuthentication()`使用我们的自定义 URL 覆盖创建身份验证请求的方法。`__username__`使用而不是`{username}`这里，因为`{`and`}`不是主机名的有效字符，因此当我们需要将它们注册为通用提供程序标识符时，创建包含它们的 URL 会变得有问题。

**/GenericOpenIdClient.cs**

```
namespace DotNetOpenAuth.AspNet.Clients
{
    using System;
    using System.Collections.Generic;
    using System.Web;
    using System.Xml.Linq;
    using DotNetOpenAuth.OpenId;
    using DotNetOpenAuth.OpenId.Extensions.AttributeExchange;
    using DotNetOpenAuth.OpenId.RelyingParty;

    public class GenericOpenIdClient : OpenIdClient
    {
        #region Constants and Fields

        /// <summary>
        /// The openid relying party.
        /// </summary>
        /// <remarks>
        /// Pass null as applicationStore to specify dumb mode. Create a protected field to use internally; we can't access the private base class field.
        /// </remarks>
        protected static readonly OpenIdRelyingParty RelyingParty = new OpenIdRelyingParty(applicationStore: null);

        /// <summary>
        /// The provider identifier.
        /// </summary>
        /// <remarks>
        /// Create a protected field to use internally; we can't access the private base class field.
        /// </remarks>
        protected readonly Identifier providerIdentifier;

        #endregion

        #region Constructors and Destructors

        public GenericOpenIdClient(string providerName, Identifier providerIdentifier)
            : base(providerName, providerIdentifier) 
        {
            this.providerIdentifier = providerIdentifier; // initialize our internal field as well
        }

        #endregion

        #region Public Properties

        public String UserName { get; set; }

        #endregion

        #region Protected Properties

        /// <summary>
        /// The provider Identifier with the "__username__" keyword replaced with the value of the UserName property.
        /// </summary>
        protected Identifier ProviderIdentifier
        {
            get
            {
                var customIdentifier = String.IsNullOrWhiteSpace(this.UserName) ?
                    this.providerIdentifier :
                    Identifier.Parse(HttpUtility.UrlDecode(this.providerIdentifier).Replace("__username__", this.UserName));
                return customIdentifier;
            }
        }

        #endregion

        #region Methods

        /// <summary>
        /// Gets the extra data obtained from the response message when authentication is successful.
        /// </summary>
        /// <param name="response">
        /// The response message. 
        /// </param>
        /// <returns>A dictionary of profile data; or null if no data is available.</returns>
        protected override Dictionary<string, string> GetExtraData(IAuthenticationResponse response)
        {
            FetchResponse fetchResponse = response.GetExtension<FetchResponse>();
            if (fetchResponse != null)
            {
                var extraData = new Dictionary<string, string>();
                extraData.AddItemIfNotEmpty("email", fetchResponse.GetAttributeValue(WellKnownAttributes.Contact.Email));
                extraData.AddItemIfNotEmpty("country", fetchResponse.GetAttributeValue(WellKnownAttributes.Contact.HomeAddress.Country));
                extraData.AddItemIfNotEmpty("firstName", fetchResponse.GetAttributeValue(WellKnownAttributes.Name.First));
                extraData.AddItemIfNotEmpty("lastName", fetchResponse.GetAttributeValue(WellKnownAttributes.Name.Last));

                return extraData;
            }

            return null;
        }

        public override void RequestAuthentication(HttpContextBase context, Uri returnUrl)
        {
            var realm = new Realm(returnUrl.GetComponents(UriComponents.SchemeAndServer, UriFormat.Unescaped));
            IAuthenticationRequest request = RelyingParty.CreateRequest(ProviderIdentifier, realm, returnUrl);

            // give subclasses a chance to modify request message, e.g. add extension attributes, etc.
            this.OnBeforeSendingAuthenticationRequest(request);

            request.RedirectToProvider();
        }

        /// <summary>
        /// Called just before the authentication request is sent to service provider.
        /// </summary>
        /// <param name="request">
        /// The request. 
        /// </param>
        protected override void OnBeforeSendingAuthenticationRequest(IAuthenticationRequest request)
        {
            // Attribute Exchange extensions
            var fetchRequest = new FetchRequest();
            fetchRequest.Attributes.AddRequired(WellKnownAttributes.Contact.Email);
            fetchRequest.Attributes.AddOptional(WellKnownAttributes.Contact.HomeAddress.Country);
            fetchRequest.Attributes.AddRequired(WellKnownAttributes.Name.First);
            fetchRequest.Attributes.AddRequired(WellKnownAttributes.Name.Last);

            request.AddExtension(fetchRequest);
        }

        #endregion
    }

    /// <summary>
    /// The dictionary extensions.
    /// </summary>
    internal static class DictionaryExtensions
    {
        /// <summary>
        /// Adds the value from an XDocument with the specified element name if it's not empty.
        /// </summary>
        /// <param name="dictionary">
        /// The dictionary. 
        /// </param>
        /// <param name="document">
        /// The document. 
        /// </param>
        /// <param name="elementName">
        /// Name of the element. 
        /// </param>
        public static void AddDataIfNotEmpty(
            this Dictionary<string, string> dictionary, XDocument document, string elementName)
        {
            var element = document.Root.Element(elementName);
            if (element != null)
            {
                dictionary.AddItemIfNotEmpty(elementName, element.Value);
            }
        }

        /// <summary>
        /// Adds a key/value pair to the specified dictionary if the value is not null or empty.
        /// </summary>
        /// <param name="dictionary">
        /// The dictionary. 
        /// </param>
        /// <param name="key">
        /// The key. 
        /// </param>
        /// <param name="value">
        /// The value. 
        /// </param>
        public static void AddItemIfNotEmpty(this IDictionary<string, string> dictionary, string key, string value)
        {
            if (key == null)
            {
                throw new ArgumentNullException("key");
            }

            if (!string.IsNullOrEmpty(value))
            {
                dictionary[key] = value;
            }
        }
    }
} 
```

要注册 Microsoft 提供的新 DotNetOpenAuth 类中内置的提供程序，请取消注释现有的 Microsoft、Facebook、Twitter 和 Google 提供程序，并添加一个调用以注册内置的 Yahoo 提供程序。我们即将实现的 OpenID 提供者不需要密钥，但如果您想使用它们，则需要从 OAuth 提供者（Microsoft、Facebook 和 Twitter）获取密钥。您可以根据自己的喜好添加 OpenID 选择器包中可用的其他提供程序。

**/App_Start/AuthConfig.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using DotNetOpenAuth.AspNet.Clients;
using DotNetOpenAuth.OpenId.RelyingParty;
using Microsoft.Web.WebPages.OAuth;
using Mvc4ApplicationOpenAuth.Models;

namespace Mvc4ApplicationOpenAuth
{
    public static class AuthConfig
    {
        public static void RegisterAuth()
        {
            // To let users of this site log in using their accounts from other sites such as Microsoft, Facebook, and Twitter,
            // you must update this site. For more information visit http://go.microsoft.com/fwlink/?LinkID=252166

            //OAuthWebSecurity.RegisterMicrosoftClient(
            //    clientId: "",
            //    clientSecret: "");

            //OAuthWebSecurity.RegisterTwitterClient(
            //    consumerKey: "",
            //    consumerSecret: "");

            //OAuthWebSecurity.RegisterFacebookClient(
            //    appId: "",
            //    appSecret: "");

            OAuthWebSecurity.RegisterGoogleClient();
            OAuthWebSecurity.RegisterYahooClient();
            OAuthWebSecurity.RegisterClient(new GenericOpenIdClient("Aol", "https://openid.aol.com/__username__"), "Aol", new Dictionary());
            OAuthWebSecurity.RegisterClient(new GenericOpenIdClient("LiveJournal", "https://__username__.livejournal.com/"), "LiveJournal", new Dictionary());
            OAuthWebSecurity.RegisterClient(new GenericOpenIdClient("WordPress", "https://__username__.wordpress.com/"), "WordPress", new Dictionary());
            OAuthWebSecurity.RegisterClient(new GenericOpenIdClient("Blogger", "https://__username__.blogspot.com/"), "Blogger", new Dictionary());
            OAuthWebSecurity.RegisterClient(new GenericOpenIdClient("VeriSign", "https://__username__.pip.verisignlabs.com/"), "VeriSign", new Dictionary());
            OAuthWebSecurity.RegisterClient(new GenericOpenIdClient("ClaimID", "https://claimid.com/__username__"), "ClaimID", new Dictionary());
            OAuthWebSecurity.RegisterClient(new GenericOpenIdClient("ClickPass", "https://clickpass.com/public/__username__"), "ClickPass", new Dictionary());
            OAuthWebSecurity.RegisterClient(new GenericOpenIdClient("Google Profile", "https://www.google.com/profiles/__username__"), "Google Profile", new Dictionary());
            OAuthWebSecurity.RegisterClient(new GenericOpenIdClient("MyOpenID", "https://__username__.myopenid.com/"), "MyOpenID", new Dictionary());
        }
    }
} 
```

最后，我们需要通过 OpenID Selector 解析提交给`Account`控制器`ExternalLogin`操作的提供者表单值，以检查“;” 指示用户名的分隔符存在。如果是这样，那么我们解析出提供者名称和用户名。

**/控制器/AccountController.cs**

```
[HttpPost]
[AllowAnonymous]
[ValidateAntiForgeryToken]
public ActionResult ExternalLogin(string provider, string returnUrl)
{
    if (provider.Contains(';'))
    {
        string[] providerParts = provider.Split(';');
        if (providerParts.Length == 2)
        {
            AuthenticationClientData clientData;
            if (OAuthWebSecurity.TryGetOAuthClientData(providerParts[0], out clientData))
            {
                var genericClient = clientData.AuthenticationClient as GenericOpenIdClient;
                if (genericClient != null)
                {
                    provider = providerParts[0];
                    genericClient.UserName = providerParts[1];
                }
            }
        }
    }

    return new ExternalLoginResult(provider, Url.Action("ExternalLoginCallback", new { ReturnUrl = returnUrl }));
} 
```

* * *

## 用户界面

使用开源 OpenID 选择器可以更轻松地实现 UI。[下载 OpenID Selector](http://code.google.com/p/openid-selector/downloads/list)并对其进行自定义以与`OAuthWebSecurity`类一起使用。

1.  `openid`在您的 Web 应用程序中创建一个新文件夹：`/Content/openid`
2.  将下载的`css`、`images`、`images.large`和`images.small`文件夹 复制`openid-selector`到该`/Content/openid`文件夹​​，然后将文件包含在您的项目中。
3.  从 openid-selector 下载的`js`文件夹中，复制`openid-jquery.js`并复制`openid-en.js`到您的 Web 应用程序的`/Scripts`文件夹中，然后将文件包含在您的项目中。
4.  打开`openid-en.js`文件并对其进行自定义，以便提供程序 URL 是您将添加到`AuthConfig.cs`文件中的提供程序名称。对于具有自定义 URL 的提供商，请使用以下格式`Provider;{username}`：

**/Scripts/openid-en.js**

```
var providers_large = {
    google : {
        name : 'Google',
        url : 'Google'
    },
    facebook : {
        name : 'Facebook',
        url : 'Facebook',
    },
    twitter: {
        name: 'Twitter',
        url: 'Twitter'
    },
    microsoft : {
        name : 'Microsoft',
        url : 'Microsoft'
    },
    yahoo : {
        name : 'Yahoo',
        url : 'Yahoo'
    },
    aol : {
        name : 'Aol',
        label : 'Enter your Aol screenname.',
        url : 'Aol;{username}'
    }
};

var providers_small = {
    livejournal: {
        name : 'LiveJournal',
        label : 'Enter your Livejournal username.',
        url: 'LiveJournal;{username}'
    },
    wordpress : {
        name : 'WordPress',
        label : 'Enter your WordPress.com username.',
        url: 'WordPress;{username}'
    },
    blogger : {
        name : 'Blogger',
        label : 'Your Blogger account',
        url: 'Blogger;{username}'
    },
    verisign : {
        name : 'VeriSign',
        label : 'Your VeriSign username',
        url: 'VeriSign;{username}'
    },
    claimid : {
        name : 'ClaimID',
        label : 'Your ClaimID username',
        url: 'ClaimID;{username}'
    },
    clickpass : {
        name : 'ClickPass',
        label : 'Enter your ClickPass username',
        url: 'ClickPass;{username}'
    },
    google_profile : {
        name : 'Google Profile',
        label : 'Enter your Google Profile username',
        url: 'Google Profile;{username}'
    },
    myopenid: {
        name: 'MyOpenID',
        label: 'Enter your MyOpenID username.',
        url: 'MyOpenID;{username}'
    }
};

openid.locale = 'en';
openid.sprite = 'en'; // reused in german& japan localization
openid.demo_text = 'In client demo mode. Normally would have submitted OpenID:';
openid.signin_text = 'Log in';
openid.image_title = 'Log in with {provider}';
openid.no_sprite = true;
openid.img_path = '/Content/openid/images/'; 
```

OpenID Selector 不附带 Microsoft 或 Twitter 的图像，因此请下载您最喜欢的[Microsoft](http://i.microsoft.com/global/ImageStore/PublishingImages/logos/ms-mark/microsoft_logo_90x16.png)和[Twitter](https://twitter.com/logo)（白底蓝）徽标，将它们转换为 100x60 像素的 GIF，然后将它们放入`/Content/openid/images.large`文件夹中。`README.txt`如果您想使用单个精灵图像而不是单独的图像，请阅读 OpenID 选择器文件中的说明。如果您使用精灵，请设置`openid.no_sprite = false;`。`openid-en.js`

将 JS 和 CSS 文件注册为新包。在方法中打开`/App_Start/BundleConfig.cs`并添加以下脚本和样式包`RegisterBundles()`。

**/App_Start/BundleConfig.cs**

```
bundles.Add(new ScriptBundle("~/bundles/openid").Include(
    "~/Scripts/openid-jquery.js",
    "~/Scripts/openid-en.js"));

bundles.Add(new StyleBundle("~/Content/css/openid").Include("~/Content/openid/css/openid-shadow.css")); 
```

我更喜欢 OpenID 选择器的“影子”样式，所以我选择只使用`openid-shadow.css`CSS 文件并自定义以下类以在 MVC4 登录模板中工作。

**/Content/css/openid/openid-shadow.css**

```
/*#openid_form {
    width: 590px;
}*/

#openid_highlight {
    padding: 0px;
    background-color: #FFFCC9;
    float: left;
    border-radius: 5px; 
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
}

.openid_large_btn {
    width: 100px;
    height: 60px;
/* fix for IE 6 only: http://en.wikipedia.org/wiki/CSS_filter#Underscore_hack */
    _width: 104px;
    _height: 64px;

    border: 2px solid #DDD;
    border-right: 2px solid #ccc;
    border-bottom: 2px solid #ccc;
    margin: 3px;
    padding: 3px;
    float: left;
    border-radius: 5px; 
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    box-shadow: 2px 2px 4px #ddd;
    -moz-box-shadow: 2px 2px 4px #ddd;
    -webkit-box-shadow: 2px 2px 4px #ddd;
}

.openid_large_btn:hover {
    margin: 4px 3px 3px 6px;
    padding: 2px 3px 3px 0px;
    border: 2px solid #999;
    box-shadow: none;
    -moz-box-shadow: none;
    -webkit-box-shadow: none;
} 
```

要创建将 CSS 脚本添加到页面标签的通用位置，请在标签底部`<head>`添加一个部分。`head``<head>`

**/Views/Shared/_Layout.cshtml**

```
<head>
    <meta charset="utf-8" />
    <title>@ViewBag.Title - My ASP.NET MVC Application</title>
    <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <meta name="viewport" content="width=device-width" />
    @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr")
    @RenderSection("head", false)
</head> 
```

然后，在`/Views/Account/Login.cshtml`文件中，`Login`通过将我们之前注册的 OpenID 包添加到页面底部的相应部分来自定义视图。

**/Views/Account/Login.cshtml**

```
<section class="social" id="socialLoginForm">
    @Html.Action("ExternalLoginsList", new { ReturnUrl = ViewBag.ReturnUrl })
</section>

@section Head {        
    @Styles.Render("~/Content/css/openid")
}

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    @Scripts.Render("~/bundles/openid")
    <script type="text/javascript">
        $(function () {
            openid.init('provider');
        });
    </script>
} 
```

UI 的最后一个元素涉及将默认`ExternalLogin`表单替换为 OpenID 选择器表单。

**/Views/Account/_ExternalLoginsListPartial.cshtml**

```
using (Html.BeginForm("ExternalLogin", "Account", new { ReturnUrl = ViewBag.ReturnUrl }, FormMethod.Post, new { id = "openid_form" }))
{
    @Html.AntiForgeryToken()
    <input type="hidden" name="action" value="verify" />

    <h2>Use another service to log in.</h2>
    <br />
    <fieldset id="socialLoginList">
        <legend></legend>

        <div id="openid_choice">
            <div id="openid_btns"></div>
        </div>
        <div id="openid_input_area">
            <input id="provider" name="provider" type="text" value="" />
            <input id="openid_submit" type="submit" value="Log in"/>
        </div>
        <noscript>
            <p>OpenID is service that allows you to log-on to many different websites using a single indentity. Find out <a href="http://openid.net/what/">more about OpenID</a> and <a href="http://openid.net/get/">how to get an OpenID enabled account</a>.</p>
        </noscript>
    </fieldset>
} 
```

# iphone - 使用情节提要在 xcode 4.5 中创建多级导航控制器

> ID：12878445
> 
> 赞同：2
> 
> 时间：2012-10-14T01:05:15.143
> 
> 标签：iphone, xcode, storyboard

我想要一个这样的菜单：A->B->C

A=> 是一个表格视图控制器（顶级菜单）

B=> 也是一个表视图控制器

C=> UIView 控制器显示一些细节。

![我现在拥有的故事板](../Images/6458bcdf167a03dcea0e13dd3afb6849.png)

我能够在“电影类型”显示的情节提要中做到A。但是如何添加下一个表视图控制器？我不能只是拖放另一个“表视图控制器”并将其链接到前一个表视图控制器，对吗？我可以通过推送下一个表视图控制器来通过代码来实现。但我也想通过 Storyboard 来学习它。我正在使用 Xcode 4.5。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T04:17:54.470

要在情节提要中执行此操作，请拖出您的 B 视图控制器并使用 push segue 将 A 连接到 B。使用 Attributes Inspector 为 push segue 提供一个标识符，例如`pushB`.

在您的 A 视图控制器代码中，使用`[self performSegueWithIdentifier:@"pushB" sender:self]`.

同样在您的 A 视图控制器中，实现基于 A 表中选定行`prepareForSegue:sender:`配置新 B 视图控制器（可访问为）的方法。`segue.destinationViewController`

然后，您可以执行相同的操作将 B 连接到 C。

# java - 如何从Java链表中的节点获取对象？

> ID：12878447
> 
> 赞同：2
> 
> 时间：2012-10-14T01:05:16.700
> 
> 标签：java, object, linked-list

基本上，我想做这样的事情：

```
patientReference = ((Patient) TreatmentRoomQueue).peekFront(); 
```

但我的 IDE 声称这些类型是不可转换的。( `required: Patient; found: TreatmentRoomQueue<Patient>`)。您可以看到我正在尝试将 Node 转换为 Patient 对象，并且我正在尝试调用我的 peekFront 方法，该方法应该返回列表中的第一个节点。然而很明显这是非法的。我的语法可能是错误的，或者我只是以错误的方式处理这个问题。

我这样做的动机是我有一个运行（虚构的）急诊室的程序。我需要从我的 TreatmentRoomQueue 中找人，让他们出院，然后，如果有人在我的 WaitingRoomQueue 中，将他们转移到 Treatment Room。我没有使用内置在 LinkedList 类中的 Java，我使用的是我自己的链表（我以前使用过并且知道它可以工作）。

我只能说搞砸了，使用数组而不是链表，但由于链表对我来说有点难以理解，我认为从链表实现中可以学到更多东西。

任何指针、代码片段、建议或任何将不胜感激的东西！谢谢阅读。

我以这种方式在我的 Main 类中声明 TreatmentRoomQueue：

```
TreatmentRoomQueue<Patient> TreatmentRoomQueue = new TreatmentRoomQueue(); 
```

这是 TreatmentRoomQueue 的代码：

```
public class TreatmentRoomQueue <ClassType> 
{
    private Node frontQueueNodeRef = null;
    private Node backQueueNodeRef = null;
    private int counter = 0;

    private class Node 
    {
      private ClassType classTypeObjectRef;
      private Node nextNodeRef;
      Node(ClassType newClassTypeObjectRef)
      {
          classTypeObjectRef = newClassTypeObjectRef;
      }
    }

    private Node peekFront()
    {
        return frontQueueNodeRef;
    }

    public void enqueue(ClassType enqueueObjectRef) 
    {            
     Node queueNodeRef = new Node(enqueueObjectRef);
     if (frontQueueNodeRef == null)
     {
         frontQueueNodeRef = backQueueNodeRef = queueNodeRef;
     }
     else {
         backQueueNodeRef.nextNodeRef = queueNodeRef;
         backQueueNodeRef = queueNodeRef;
         counter++;
     }

    }

    public ClassType dequeue() 
    {
    if ( frontQueueNodeRef == null )
    {
        return null;
    } else {
    ClassType firstClassTypeObjectRef = frontQueueNodeRef.classTypeObjectRef;
    frontQueueNodeRef = frontQueueNodeRef.nextNodeRef;
    counter--;
    return firstClassTypeObjectRef;
    }
    }

    public boolean isFull()
    {
        return false;
    }

    public boolean isEmpty()
    {
        return frontQueueNodeRef == null;
    }     
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T01:07:20.017

首先，您正在投射列表，而不是从中获得的元素。您需要做的就是将括号移到正确的位置：

```
patientReference = (Patient) (TreatmentRoomQueue.peekFront()); 
```

您放置括号的方式是，Java 首先尝试强制`TreatmentRoomQueue`转换`Patient`，然后尝试调用对象`peekFront()`上的方法`Patient`。

接下来，您需要创建一个公共方法来查看队列的前面元素：替换您的

```
private Node peekFront() 
```

方法与

```
public ClassType peekFront()
{
    return frontQueueNodeRef.classTypeObjectRef;
} 
```

既然`classTypeObjectRef`是`private`，你就应该让它`public`对`peekFront`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T01:44:05.133

> 任何指针、代码片段、建议或任何将不胜感激的东西！

既然你问了，这是我的建议/无论如何：

在所有合理的 Java 编码标准中，一个名为的变量`TreatmentRoomQueue`是 CODING STANDARD VIOLATION。您已经为变量使用了类标识符模式。变量标识符应该有这种形式`treatmentRoomQueue`（除非它是一个`static` `final`常数......在这种情况下它应该是`TREATMENT_ROOM_QUEUE`）。

通常这是一件小事，但在这种情况下，您使问题更加复杂：

```
 TreatmentRoomQueue<Patient> TreatmentRoomQueue = new TreatmentRoomQueue(); 
```

现在你有一个相同的变量名和一个类型名......但是命名不同的东西！！！JLS 指定应如何解释标识符（即编译器应将其读取为变量名还是类名）......但普通的人类 Java 程序员通常不理解这些规则，并且容易阅读他们走错路了。

实际上，这*可能*是您看到的*一些令人困惑的编译错误的原因！*

（请不要以为我是说普通程序员*应该*理解 JLS 的标识符消歧规则。我的意思是您应该遵循公认的编码标准，以便普通人类程序员能够阅读您的代码而不会陷入语义咒语！）

# iphone - -[UICollectionViewData numberOfItemsBeforeSection:] 中的断言失败

> ID：12878451
> 
> 赞同：14
> 
> 时间：2012-10-14T01:06:47.703
> 
> 标签：iphone, ios, ios6, iphone-developer-program, uicollectionview

使用 IOS 6 和新的 UICollectionView 我在 UIViewController 上有 2 个 UICollectionViews 并使用 Storyboard 当我在 UICollectionView 周围单击时出现以下错误我不确定为什么会发生这种情况，谷歌为此错误返回 0 结果...

> 2012-10-13 20:30:06.421 MyApp [768:907] -[UICollectionViewData numberOfItemsBeforeSection:] 中的断言失败，/SourceCache/UIKit/UIKit-2372/UICollectionViewData.m:415
> 2012-10-13 20:30:06.427 MyApp [768:907] 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“当集合视图中只有 1 个部分时，请求第 2147483647 部分之前的项目数”

我根本没有使用 Sections 并将其设置为仅 1 个部分：

```
- (NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView
{
    return 1;
} 
```

当我单击 UICollectionView 区域时，它会发生（似乎是随机的）我有一段代码可以从 UICollectionView 中删除元素：

```
[tilesArray removeObjectAtIndex:indexPath.row];
[self.tilesCollectionView reloadData];        
[resultsArray addObject:str];
[self.resultsCollectionView reloadData]; 
```

这是数组如何连接到 UICollectionViews

```
-(NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section {

    if(collectionView.tag == 2)
        return [resultsArray count];
    else
        return [tilesArray count];
}
-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {

    if(collectionView.tag == 2)
    {
        static NSString *cellIdentifier = @"ResultCell";
        ResultCell *cell = (ResultCell *)[collectionView dequeueReusableCellWithReuseIdentifier:cellIdentifier forIndexPath:indexPath];

        cell.mainImage.image = [UIImage imageNamed:currentArtContainer.tileMainImage];

        NSString *cellData = [resultsArray objectAtIndex:indexPath.row];
        [cell.titleLabel setText:cellData];

        return cell;
    }
    else
    {
        static NSString *cellIdentifier = @"TileCell";
        TileCell *cell = (TileCell *)[collectionView dequeueReusableCellWithReuseIdentifier:cellIdentifier forIndexPath:indexPath];

        cell.topImage.image = [UIImage imageNamed:currentArtContainer.tileTopImage];

        cell.mainImage.image = [UIImage imageNamed:currentArtContainer.tileMainImage];

        NSString *cellData = [tilesArray objectAtIndex:indexPath.row];
        [cell.titleLabel setText:cellData];

        return cell;
    }
} 
```

请帮我解决这个问题。甚至不确定如何捕获异常，因为它来自 UICollectionView 内部代码。还忘了提到我正在为 UICollectionView 使用自定义布局，但我不知道它是否与这个问题有关。

再次感谢你们的帮助！

编辑：在调用所有布局方法后，我得到了异常......这是我的自定义布局......我仍然不确定如何修复它，因为我所有的 try catch 块都没有捕获错误。 ..

```
- (void)prepareLayout
{
    NSLog(@"In prepareLayout.");

    [super prepareLayout];
    _cellCount = [[self collectionView] numberOfItemsInSection:0];
}

- (CGSize)collectionViewContentSize
{
    NSLog(@"In collectionViewContentSize.");
    @try {

       CGSize csize = [self collectionView].frame.size;
        NSLog(@"In here.");
        return csize;
    }
    @catch(NSException *exception)
    {
        NSLog(@"collectionViewContentSize %@: %@",[exception name],[exception reason]);
    }

}

- (UICollectionViewLayoutAttributes *)layoutAttributesForItemAtIndexPath:(NSIndexPath *)indexPath
{
    @try {

    NSLog(@"In layoutAttributesForItemAtIndexPath. item %d", indexPath.row);

    UICollectionViewLayoutAttributes* attributes = [UICollectionViewLayoutAttributes layoutAttributesForCellWithIndexPath:indexPath];

    attributes.size = CGSizeMake(ITEM_SIZE, ITEM_SIZE);

    NSLog(@"firstRun %d", self.firstRun);
    //NSLog(@"panStatus %@", self.panStatus);

    if (self.firstRun == 0) {
        CGFloat x = 0, y = 0;
        CGFloat boundx = self.collectionView.frame.size.width * 0.70;   // Use the whole canvas
        CGFloat boundy = self.collectionView.frame.size.height * 0.70; // Use the whole canvas
        while (x < 50 || x > boundx) x = arc4random() % (int)boundx + indexPath.item;
        while (y < 50 || y > boundy) y = arc4random() % (int)boundy + indexPath.item;

        NSMutableDictionary *dictionary = [NSMutableDictionary dictionary];
        if (self.positions)
            dictionary = [self.positions mutableCopy];
        [dictionary setObject:[NSValue valueWithCGPoint:CGPointMake(x, y)] forKey:@(indexPath.item)];
        if (!self.positions)
            self.positions = [[NSDictionary alloc] init];
        self.positions = dictionary;

        attributes.center = CGPointMake(x, y);
    } else if (self.firstRun > 0) {
        CGPoint point = [[self.positions objectForKey:@(indexPath.item)] CGPointValue];
        attributes.center = CGPointMake(point.x, point.y);
    }

    NSLog(@"END layoutAttributesForItemAtIndexPath. item %d", indexPath.row);
        return attributes;

    }
    @catch(NSException *exception)
    {
        NSLog(@"layoutAttributesForItemAtIndexPath %@: %@",[exception name],[exception reason]);
    }
}

-(NSArray *)layoutAttributesForElementsInRect:(CGRect)rect
{
    @try {

    NSLog(@"layoutAttributesForElementsInRect ...");

    NSMutableArray* attributes = [NSMutableArray array];
    for (NSInteger i=0 ; i < self.cellCount; i++) {
        NSIndexPath* indexPath = [NSIndexPath indexPathForItem:i inSection:1];
        [attributes addObject:[self layoutAttributesForItemAtIndexPath:indexPath]];
    }
    NSLog(@"END layoutAttributesForElementsInRect ...");
        return attributes;

    }
    @catch(NSException *exception)
    {
        NSLog(@"layoutAttributesForElementsInRect %@: %@",[exception name],[exception reason]);
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-03T18:39:01.530

我在从手势识别器运行 reloadData 时发生了这种情况，在手势识别器上设置*delaysTouchesBegan*有帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-14T07:10:13.747

这里的关键是您的错误中的这个数字：

> 2147483647

这是 的数值`NSNotFound`。在代码中的某处，您正在`indexOfObject:`对数组执行类似操作，并将其结果作为节或项索引传递到您的集合视图或布局方法之一，这会导致错误。您问题中发布的代码中没有发生这种情况，但希望您现在能够找到它。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-06-06T14:33:29.007

这对我有用：

```
dispatch_async(dispatch_get_main_queue(), ^{
    [self.collectionView reloadData];
}); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-09T18:44:41.797

我自己也遇到了这个断言。它触发是因为我在触摸（滑动）事件上重新加载收集数据。

最初的触摸（开始）触发了一条`didHighlightItemAtIndexPath:`消息，然后收集数据发生了变化（通过滑动），然后`didUnhighlightItemAtIndexPath:`在触摸（提升）时未能触发消息。

由于我不需要突出显示，因此解决方案是在我的控制器中实现此方法：

```
- (BOOL)collectionView:(UICollectionView *)collectionView shouldHighlightItemAtIndexPath:(NSIndexPath *)indexPath
{
    return NO;
} 
```

我希望这可以帮助其他任何遇到这个问题的人。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-09T09:58:31.460

永远不要在手势识别器执行的方法上重新加载 UICollectionView 的数据。遵循这个规则完全解决了这个问题。Daltsy 建议在 UICollectionView 中停用 highligting 也可以防止错误，但也会停用所有“didSelectItemAtIndexPath”委托消息。要小心，因为你可能会得到一个几乎没用的 UICollectionView - 就像我几分钟前所做的那样。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-02T09:35:01.887

我没有禁用突出显示，而是发现在调用 reloadData 之前确保没有突出显示任何单元格可以防止“请求部分之前的项目数”错误。这是

`UICollectionViewController.CollectionView.deselectItemAtIndexPath` 方法或`DeselectItem`在 Xamarin 中。

我在模型数据中保存当前选中项的句柄，清除集合视图的突出显示，为这些项计算新的 NSIndexPaths，然后调用 reloadData。通过使用句柄通过其可能的新 NSIndexPath 属性找到它，再次选择先前选择的项目。

`selectItemAtIndexPath:animated:scrollPosition:`或`SelectItem`在 Xamarin 中。

# php - SimpleXML 到 CSV，编写 CSV 标头？

> ID：12878455
> 
> 赞同：1
> 
> 时间：2012-10-14T01:07:19.753
> 
> 标签：php, xml, csv, simplexml, fopen

我有一个简单的小脚本，它可以抓取 XML 并将其转换为 CSV。但是它不写标题。有人知道如何写标题吗？

```
$file='example.xml';
if (file_exists($file)) {
    $xml = simplexml_load_file($file);
    $f = fopen('newfile.csv', 'w');
    foreach ($xml->Information as $information) {
        fputcsv($f, get_object_vars($information),',','"');
    }
    fclose($f);
} 
```

这会将子元素的所有内容放在`<Information>`Excel 的漂亮列中。但它不会将元素名称写为 CSV 标题。

有什么想法可以编辑脚本以包含标题吗？

谢谢

麦克风

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T01:48:18.143

您可以使用[SimpleXMLElement::getName()](http://www.php.net/manual/en/simplexmlelement.getname.php)函数从第一组数据中获取元素名称，并使用它来编写 CSV 标头。

```
$file='example.xml';
if (file_exists($file)) {
    $xml = simplexml_load_file($file);
    $f = fopen('newfile.csv', 'w');

    // array to hold the field names
    $headers = array(); 
    // loop through the first set of fields to get names
    foreach ($xml->Information->children() as $field) { 
        // put the field name into array
        $headers[] = $field->getName(); 
    }
    // print headers to CSV
    fputcsv($f, $headers, ',', '"');

    foreach ($xml->Information as $information) {
        fputcsv($f, get_object_vars($information), ',', '"');
    }
    fclose($f);
} 
```

# ruby - rvm install ruby -1.9.3-p286：运行“make -j 9”时出错（OSX：Mountain Lion）

> ID：12878458
> 
> 赞同：5
> 
> 时间：2012-10-14T01:07:42.703
> 
> 标签：ruby, makefile, rvm

运行`rvm install ruby-1.9.3-p286`给了我这个错误：

```
Error running 'make -j 9', please read /Users/epeterson/.rvm/log/ruby-1.9.3-p286/make.log
There has been an error while running make. Halting the installation. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T01:07:42.703

这花了我一辈子的时间去追捕。正在尝试不同版本的`make`,`gcc`等。

事实证明，`rvm_make_flags`环境变量的格式已从字符串更改为数组，并且没有很好地传达或记录。这可能适用于所有 rvm_* 环境变量，不确定。

检查你的`~/.rvmrc`和`project/path/.rvmrc`。

```
# before
export rvm_make_flags="-j 9"

# after
export rvm_make_flags=(-j 9) 
```

进行此更改后，所有内容都编译得很干净。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T04:11:56.693

我对此也很陌生。我不确定上面的方向，但我有一个相关的问题。

我发现我只需要重新启动终端。

然后我用`$ type rvm | head -1`它吐出来了`rvm is a function`。根据此处找到的精彩文章，这就是您想要得到的：

[http://www.moncefbelyamani.com/how-to-install-xcode-homebrew-git-rvm-ruby-on-mac/](http://www.moncefbelyamani.com/how-to-install-xcode-homebrew-git-rvm-ruby-on-mac/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T05:21:40.723

运行`rvm requirements`，它将显示 RVM 中所有必要的组件以正常工作，

在我的盒子上，它显示（部分）

```
# For ruby:
brew install autoconf automake apple-gcc42 libtool pkg-config openssl readline libyaml    sqlite libxml2 libxslt libksba 
```

所以我只运行命令，然后发出

```
rvm install 1.9.3 
```

# php - codeigniter：为什么找不到请求的页面？

> ID：12878463
> 
> 赞同：0
> 
> 时间：2012-10-14T01:08:32.377
> 
> 标签：php, codeigniter, controller, http-status-code-404

我有这样的链接

```
<td><a href="<?php echo base_url(); ?>index.php/c_materialjasa/gkategorimaterial">Lihat Tabel</a></td> 
```

这是我的控制器

```
 class C_kategorimaterial extends CI_Controller{
public function __construct() {
    parent::__construct();
    $this->load->model('m_materialjasa');
    $this->load->model('m_admin');
}
function gkategorimaterial()
{
    //$data['title'] = 'Ambil Kode Kategori Material Jasa';
    //$this->load->view('head',$data);
    //$this->load->view('g/gkategorimaterial');

    echo 'getkategorimaterial';

}} 
```

和屏幕显示错误`404 not found`？我已经创建了`gkategorimaterial`它位于views/g/gkategorimaterial 上的视图

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T01:10:58.420

控制器名称必须在函数名称之前：

```
<a href="<?php echo base_url(); ?>index.php/
           c_kategorimaterial/gkategorimaterial">Lihat Tabel</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T01:18:30.223

解决 ！我将控制器 A 复制粘贴到 -> 控制器 B，然后我忘记将其类更改为控制器 B 扩展了某种类似的东西

谢谢你

# fancybox - 无法通过 Fancybox 加载外部 HTML 文件...

> ID：12878467
> 
> 赞同：2
> 
> 时间：2012-10-14T01:09:34.713
> 
> 标签：fancybox

我按照此处的建议[在 fancybox 中打开 html 页面](https://stackoverflow.com/questions/9020084/open-html-page-within-fancybox)，并阅读了 fancybox.net 中的示例，并设法完成了一半。

到目前为止取得的成功： * 将光标指向图标会显示完整、正确的 URL * 用于测试，外部 HTML 页面显示“Hi”并且没有其他内容 * 单击图标会打开花式框

什么不工作： * fancybox 的内容显示“无法加载请求的内容。请稍后再试。”

我究竟做错了什么？

这是代码：

HTML：

```
< div id="container" style="bottom: 0px; left: 2px; position: fixed; width:40px; z-index: 999999;">
    <br>
    < a id="single_1" href="helpme.html">
        <img src="catalog/view/theme/default/image/helpme.png"/>
    </a>
    <br>
< /div> 
```

JS：

```
$(document).ready(function() {
    $('.fancybox').fancybox();
    $('#single_1').fancybox({
        helpers: {
            title : {
                type : 'float'
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T00:37:39.777

用 5 分钟搞定，用彩盒。

# c++ - 为什么会出现浮点异常错误？

> ID：12878473
> 
> 赞同：2
> 
> 时间：2012-10-14T01:11:44.130
> 
> 标签：c++, arrays, floating-point-exceptions

我是新手程序员，所以请与我打交道。我正在编写一个程序来分析数据。当我执行程序时，我收到一个“浮点异常”，我不知道为什么。这是错误源自的代码部分。据我所知，该`if`声明似乎是问题所在，但我不明白为什么。非常感谢您提供的任何帮助！

```
double tArray[600][49];

void main() {
  double finalArray[600][0]
  double n = 0;
  int h = 0;
  try {
    for (int i = 0; i < 600; j++) {
      for (int j = 1; j < 16; j++) {
        h++;
        n = tArray[i][j * 3 - 1] - tArray[i][j * 3 - 2];
        double t = -30;
        if (n < t) {
          finalArray[i][0] = tArray[h][3 * j] - tArray[h + t][3 * j];
          h++;
        }
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T01:18:05.050

尝试将 finalArray 声明为：

```
double finalArray[600][1]; 
```

看来原始声明没有为元素分配任何空间。

如果不尝试只分配一个像这样的一维数组：

```
double finalArray[600]; 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T01:19:09.050

声明`double finalArray[600][0]`意味着数组是 600 个元素乘 0 个元素。我认为您希望第二维为 1。请记住，您需要声明行数和列数，但索引从 0 开始。

# c# - 来自 ajax 控件的多线程 http post

> ID：12878496
> 
> 赞同：2
> 
> 时间：2012-10-14T01:15:59.720
> 
> 标签：c#, javascript, ajax, multithreading, proxy

我目前正在编写一个尝试发送多线程 HTTP POST 包的程序。每个线程都有其唯一的代理服务器。最初我使用 .net HTTPWebRequest 函数来完成这项任务。

但是，我发现浏览器提交的数据实际上来自一个javascript文件中的ajax控件，HTTPWebRequest肯定无法分析。我试过使用 Selenium，但它太重了。

（更新：让我简单解释一下为什么HTTPWebRequest会很难分析数据，因为发布的数据实际上是一个加密密钥，由两种算法加密：CryptoJS.HmacSHA256和OpenPGP（PGencode.js）。如果我要提交数据包通过 HTTPWebRequest 我必须在 C# 中重新实现这两种算法来模仿行为并获得确切的加密密钥，这有点麻烦。）

是否有任何替代方法可以支持多线程 HTTP 消息发布以及 ajax 和 js 支持？

# c - 如何在不初始化变量的情况下读取整个内存堆栈？

> ID：12878497
> 
> 赞同：0
> 
> 时间：2012-10-14T01:16:24.340
> 
> 标签：c, windows, memory-management

每个进程获得 4 GB 的虚拟地址空间，在 4 GB 之外，用户空间获得 2 GB。在这 2 GB 中，我想读取操作系统分配给进程的整个内存堆栈。

`char chrArray[2000000];`假设我在堆栈上声明了一个大小为 2000,000 ( ) 的本地数组。我想问几个问题。

1）使用`gcc`and `cygwin`，我可以在不初始化的情况下读取它的内容，但它的内容大部分是空的（我曾经`%c`将数组打印到文件中）或者这个数组末尾的一些垃圾数据。我在垃圾数据中提取了一个字符串，并在内存转储中查找它（使用`DumpIt`工具获取），但内存转储中不存在此字符串。

我的问题是这些垃圾数据是从哪里来的？它是否位于硬盘中？

2）我想用`fork()`在每个子进程中声明char数组，但我猜，它复制父进程的整个地址空间并使用`Copy-on-Write`技术，所以它似乎没有用。我对这种解释是否正确？

3）我想要的是声明一个大数组，并且每次映射到一些新的物理内存地址。这是否可以实现，如果可以，如何实现？

通过重复这个过程，我想扫描整个内存。

我多次尝试`bash`脚本来运行这个程序，但它总是从相同的虚拟基地址开始。

我试图运行一个`for`声明（比如说）10个字符数组的循环，但是通过打印它们的基地址，我看到所有数组的地址都相同。

我正在使用`Windows 7`和`C`编程，我认为我缺乏一些必需的操作系统知识。

谢谢。

PS如果有人好奇我为什么要这样做，我正在这方面进行研究。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T01:47:06.317

为了避免安全问题，当分配物理页面时，大多数内核确保物理页面不包含数据（例如用零填充）。否则，一个进程可以用敏感信息（例如密码）填充页面然后释放它，而另一个进程可以分配该页面并访问敏感数据。

因此，您在阵列中看到的垃圾就是您自己的垃圾。

当一个进程刚开始时，很多事情通常在`main()`获得控制之前发生。这些事情可能包括动态链接和设置系统库、执行构造函数（用于 C++）等。这意味着在代码运行之前，事情会被放入堆栈（然后从堆栈中删除）。这是你看到的垃圾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T01:50:51.230

> 假设我声明了一个大小为 2000,000 ( `char chrArray[2000000];`)的本地数组

这是危险的。如果你用完了堆栈，你的程序就会崩溃。

> 该数组末尾的一些垃圾数据。

堆栈向下增长，因此数组的末端（较高的部分）对应于堆栈的较旧部分。当你的程序启动时，数据被清零，当你的程序运行时，它会将数据写入堆栈。因此，“垃圾数据”只是剩余的局部变量和您调用的函数的其他堆栈帧。（大多数操作系统使用专门的写时复制技术将您的进程内存归零——我说“专门”是因为当您知道整个块为零时，复制一块内存很容易。）

> 它是否位于硬盘中？

硬盘中的数据只会故意显示在您的内存空间中。当您的进程重用另一个进程的内存时，首先将内存清零。

> 我想过使用 fork() 在每个子进程中声明 char 数组，但我猜它会复制父进程的整个地址空间并使用 Copy-on-Write 技术，所以它似乎没有用。我对这种解释是否正确？

`fork()`这被标记为 Windows，除非您使用 Cygwin ，否则它没有。我不知道 Cygwin 的实现。我不确定你想要完成什么，或者你期望什么，但这正是`fork()`应该如何表现的。该`fork()`调用复制了整个过程，包括内存。

> 我想要的是声明一个大数组，并且每次它都映射到一些新的物理内存地址。这是否可以实现，如果可以，如何实现？

用户空间程序不能使用物理内存地址，只能使用虚拟内存地址。不，这是不可能的。

更糟糕的是，假设您`char arr[10000]`在虚拟地址 1000 分配了一个数组，并假设虚拟地址 1000 对应于物理地址 6000。

*   的地址`&arr[0]`是虚拟地址 1000 和物理地址 6000... 除非您的进程被换出，此时它根本**没有**物理地址。所以物理地址并不总是存在。

*   当您的进程被换回时，`&arr[0]`仍然是虚拟地址 1000，但它可能是物理地址 6000 或 8000 或 999000 ......谁知道呢？

*   的地址`&arr[1000]`始终是虚拟地址 2000，但它可能是物理地址 10000 或 85000 或完全不同的地址……谁知道呢？

**进一步阅读：**您可能希望阅读有关操作系统的“虚拟内存”子系统的信息。

# emacs - 如何在组织模式 HTML 导出中禁用自动标题包含？

> ID：12878502
> 
> 赞同：9
> 
> 时间：2012-10-14T01:17:41.820
> 
> 标签：emacs, org-mode

我有一个 org-mode 项目，其中包含许多我想导出为 HTML 的小 org 文件。我没有设置`#+TITLE`很多文件，因为它们没有正确的标题。我在导出时发现部分第一句被导出为文档的标题。

例如，像这样的组织文档：

```
This is a short file.

Mary had a little lamb, etc. 
```

将导出为具有以下 HTML：

```
*snip*
<div id="content">
<h1 class="title">This is a short file.</h1>

<p>Mary had a little lamb, etc.</p>
*snip* 
```

我希望将上述文件中的两个句子都标记为段落。如何禁用标题的自动占卜？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-15T05:29:44.427

为避免第一行成为标题，您可以设置一个空标题：

```
#+Title:

This is a short file.

Mary had a little lamb, etc. 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-14T05:03:16.317

如果您查看代码，`org-export-region-as-html`您将看到以下片段

```
(title (or (and subtree-p (org-export-get-title-from-subtree))
           (plist-get opt-plist :title)
           (and (not
                 (plist-get opt-plist :skip-before-1st-heading))
                (org-export-grab-title-from-buffer))
           (and buffer-file-name
                (file-name-sans-extension
                 (file-name-nondirectory buffer-file-name)))
           "UNTITLED")) 
```

`org-export-grab-title-from-buffer`如果没有定义标题，则调用一个函数。*您可以通过建议*禁用此功能

```
(defadvice org-export-grab-title-from-buffer (around org-export-grab-title-from-buffer-disable activate)) 
```

# c++ - 对命名空间和函数参数的好奇心

> ID：12878506
> 
> 赞同：0
> 
> 时间：2012-10-14T01:18:41.837
> 
> 标签：c++, class, namespaces

**一个.h：**

```
namespace one {
    class X : public IZ {
        public:
            void function(); // virtual function (=0) in IZ
    }
} 
```

**二.h**

```
namespace one {
    class Y {
        public:
            void functionY(class X& x); // or one::X& x
    }
} 
```

我有几个由多个文件分布的类，它们都共享相同的命名空间。据我了解，如果我对所有类都有相同的命名空间，它们都可以相互访问，而无需放置 NAMESPACE::class_x，因为它们都属于同一个命名空间。

我想了解的是为什么在上述特殊情况下需要使用关键字`class`or `namespace::`before `X& x`。

它是否与作为虚函数的`X`继承有关，然后“覆盖”在中？`IZ``X`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T01:28:13.707

在这种情况下，X 类型在编译时被解析。链接器需要了解 X 是什么，它是一个类还是在一个命名空间中。

1.  如果将其范围限定在同一个命名空间中，`namespace::x`那么如果该类未在命名空间中定义，则会出现编译错误。
2.  如果您将其定义为一个类，并且该定义所属的命名空间中存在同一个类，则该定义将被解析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T02:41:27.540

命名空间与否，您需要*声明*一个稍后要引用的类。

您可以`#include "one.h"`在文件 two.h 中使整个定义`one::X`已知，或者您可以只添加一个声明`X`而不定义它：

```
// two.h

namespace one
{
    class X;

    class Y
    {
        void f(X const & x);
        // ...
    };
} 
```

在任何一种情况下，您*都不*需要重新声明命名空间，因为您已经在其中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T22:15:36.503

结束问题：问题是由循环引用引起的。

# mysql - mysql select default order with limit select * from mytable limit m, n;

> ID：12878507
> 
> 赞同：0
> 
> 时间：2012-10-14T01:18:47.187
> 
> 标签：mysql

在mysql中，如果你这样做

```
select * from mytable limit m, n;

```

假设表没有改变（没有添加删除，但有一些更新），你会总是得到相同的行吗？例如，如果你这样做

```
select * from mytable limit 10000, 10000

```

从不同的客户/线程，你会一直得到相同的结果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T01:37:18.343

[如第 20.2 节 <直接选择语句：多行> 中所述， SQL-92 规范](http://www.contrib.andrew.cmu.edu/~shadow/sql/sql1992.txt)的“一般规则”小节：

> ```
> 4) 如果 <order by 子句> 没有指定，那么
>    Q 的行是依赖于实现的。
> 
> ```

我可以在 MySQL 手册中找到的关于这一点的最佳实现特定文档位于[Sorting Rows](http://dev.mysql.com/doc/en/sorting-rows.html)下：

> 您可能已经注意到，在前面的示例中，结果行没有按特定顺序显示。当行以某种有意义的方式排序时，通常更容易检查查询输出。要对结果进行排序，请使用`ORDER BY`子句。

可以说，如果没有明确的相反文档，除非`ORDER BY`给出适当的明确子句，否则不能依赖 MySQL 以相同的顺序一致地返回记录（尽管根据我的经验，它始终是一致的）。

# php - AJAX 错误 - 我该如何解决这个问题？

> ID：12878512
> 
> 赞同：0
> 
> 时间：2012-10-14T01:19:31.647
> 
> 标签：php, javascript, mysql, ajax

到目前为止，我有一些代码至少已经检查了 30 次，它已经困扰了我好几个月（真的）。我已经修复了我看到的尽可能多的错误，但它根本不起作用。我希望任何读者都能发现我的错误......

好的，所以代码只是一个关于鼠标悬停效果的 ajax 请求，它将数据发布到另一个页面，在该页面中接收数据。请看一下：

这是ajax请求：

```
$(document).ready(function () {
    $("#secretcoin").mouseover(function () {
        $.ajax({
            type: "POST",
            url: "achievements.php",
            data: {
                Home_Coin_Locator: "Yes"
            },
            error: errorAlert
        });
    });
}); 
```

这就是请求 - 现在这里是接收页面，results.php

```
$achieve4 = $_POST['Home_Coin_Locator'];
if ($achieve4 == 'Yes') {
    $awardSTRsql = "UPDATE Awards_Inv SET Home_Coin_Locator='Yes' WHERE Username = '$username'";
    mysql_query($awardSTRsql, $connection) or die(mysql_error());
    $updatestatsSTRsql = "UPDATE User_Info SET Coins = Coins + 120, Skill_Points = Skill_Points + 10, Awards = Awards + 1 WHERE Username = '$username'";
    mysql_query($updatestatsSTRsql, $connection) or die(mysql_error());
} else {} 
```

我已将我的代码减少到少量，并大力检查它，但它仍然无法正常工作......

顺便说一句，$connection 只是我与数据库的连接，我可以保证它是准确的。$username 是在我没有提供的代码中定义的会话用户名，但我也知道该变量是准确的......

请帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T13:13:05.060

javascript似乎更容易测试php文件是正确的，你应该这样做：

```
> $achieve4 = $_GET['Home_Coin_Locator']; if ($achieve4 == 'Yes') {
>     $awardSTRsql = "UPDATE Awards_Inv SET Home_Coin_Locator='Yes' WHERE Username = '$username'";
>     mysql_query($awardSTRsql, $connection) or die(mysql_error());
>     $updatestatsSTRsql = "UPDATE User_Info SET Coins = Coins + 120, Skill_Points = Skill_Points + 10, Awards = Awards + 1 WHERE Username =
> '$username'";
>     mysql_query($updatestatsSTRsql, $connection) or die(mysql_error()); } else {} 
```

然后去 /achievements.php?Home_Coin_Locator=Yes 看看有没有错误。

确保您的 php 错误报告已打开，因此如果有任何错误，它们将被显示。

# mysql - 将mysql数据从一个表导入到另一个表

> ID：12878513
> 
> 赞同：3
> 
> 时间：2012-10-14T01:19:34.363
> 
> 标签：mysql, phpmyadmin

这对某人来说很简单，但对我来说看起来很复杂。我有 2 个表，一个叫做 jos_users，另一个叫做 jvdb_users。表完全相同，都包含用户信息，例如用户电子邮件，密码，姓名等。只有表一有很多用户，表二是空的，我需要将表一的所有字段和数据传输到表二。我如何在 linux 服务器上使用 phpmyadmin 和 mysql 来做到这一点。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-14T01:22:49.127

如果它们都具有相同的列，则可以使用此命令

```
INSERT INTO `tabletwo` (SELECT * FROM tableone) 
```

你可以在 phpmyadmin 的 SQL 部分写这个

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T01:25:23.323

尝试这个 ：

```
INSERT INTO table1 VALUES (SELECT * FROM table2); 
```

# c# - for/foreach 循环中的 NullReferenceExceptions

> ID：12878517
> 
> 赞同：0
> 
> 时间：2012-10-14T01:20:19.550
> 
> 标签：c#, xna

我正在开发一个小游戏，我在从 .txt 文件中读取关卡地图，将其转换为 2D 字符数组，然后将任何非空白字符转换为一种类型的对象时遇到问题或其他。我认为转换为二维数组很好，但看起来在转换为对象时遍历数组的两个 for 循环之一中存在空引用异常。这是代码：

```
public void buildLevel()
{
    List<Tangible> objects = new List<Tangible>(0);
    for (int i = 0; i < map.GetLength(1); i++)
    {
        for (int j = 0; j < map.GetLength(0); j++)
        {
            if (map[j, i] == 'O')
            {
                objects.Add(new Ball((50 * j), (50 * i)));
            }
            if (map[j, i] == 'X')
            {
                objects.Add(new Block((50 * j), (50 * i), 50, 50));
            }
        }
    } 
    allObjects = objects;
} 
```

知道这里可能会发生什么吗？对此，我真的非常感激。

编辑：这是将文件读入二维数组的代码：

```
public void setMap(String mapFile)
    {
        try
        {
            List<String> lines = new List<String>();
            using (StreamReader sr = new StreamReader("maps\\testLevel.txt"))
            {
                String currentLine;
                while ((currentLine = sr.ReadLine()) != null)
                {
                    lines.Add(currentLine);
                }
            }
            map = new char[lines[0].Length, lines.Count];
            for (int i = 0; i < lines.Count; i++)
            {
                for (int j = 0; j < lines[0].Length; j++)
                {
                    map[j, i] = lines[i][j];
                }
            }
        }
        catch (DirectoryNotFoundException e)
        {
            Console.Error.WriteLine(e);
        }
    } 
```

# jquery-ui - Jquery UI 可排序的 Safari 故障

> ID：12878523
> 
> 赞同：1
> 
> 时间：2012-10-14T01:22:23.433
> 
> 标签：jquery-ui, safari

我有一个使用 jQuery ui 的可排序元素。它适用于除 Safari 5.1 以外的所有浏览器

在 Safari 中，有时某些正在排序的行会超出表格。特别是中间行。上下拖动它们，它们会显示在表格的左侧。

它仅在我设置轴时发生：y。

这是我的代码示例[http://jsfiddle.net/7zJnv/7/](http://jsfiddle.net/7zJnv/7/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T02:38:56.887

我会跳过轴选项并使用包含选项。

```
$("#planItem-listBody").sortable({
        containment: "parent"
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/7zJnv/8/)**

# asp.net-mvc - 构建 ViewModel 的适当粒度是多少？

> ID：12878527
> 
> 赞同：2
> 
> 时间：2012-10-14T01:22:49.710
> 
> 标签：asp.net-mvc, viewmodel

我正在开发一个新项目，并且在看到以前项目的一些困难后，这些困难没有提供足够的视图与模型分离（特别是使用 MVC - 模型和视图开始有点相互渗透），我想使用 MVVM。

我了解基本概念，并且很高兴开始使用它。然而，有一点让我有点难以理解——ViewModel 中应该包含哪些数据？

例如，如果我正在创建一个包含两条数据的 ViewModel，以便可以在一个表单中对其进行编辑，我是否可以像这样捕获它：

```
public PersonAddressViewModel {
    public Person Person { get; set; }
    public Address Address { get; set; }
} 
```

或像这样：

```
public PersonAddressViewModel {
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string StreetName { get; set; }
    // ...etc
} 
```

对我来说，第一个感觉更适合我们正在尝试做的事情。如果我们正在做更细粒度的形式（也许我们只捕获 FirstName、LastName 和 StreetAddress），那么下降到那个级别可能更有意义。但是，我觉得第一个是正确的，因为我们正在捕获表单中的 ALL Person 数据和 ALL Address 数据。像这样把事情分开似乎没有意义（还有很多额外的工作）。

欣赏任何见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T03:36:58.530

如果您使用 Person 对象的所有字段，那么使用复杂的视图模型并没有错。但是，如果您只在这里或那里使用一个字段，那么最好只使用您正在使用的那些值来构建您的视图模型。

你可以用任何你喜欢的方式来做你的视图模型，但是拥有它们的全部意义在于视图模型应该被定制为它所代表的视图。

如果您使用 AutoMapper 之类的东西映射到业务或领域模型，那么使用第一种方法也会容易得多，因为对象应该具有相似的定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:37:47.547

如果您的 Model 类具有一些敏感属性（即 User 类中的 IsAdmin），则直接使用 Model 类或将它们包装在 ViewModel 类中（如第一个示例中）可能是一个潜在的安全问题。

假设您的控制器操作采用 PersonAddressViewModel 输入参数：

```
public ViewResult someAction(PersonAddressViewModel personAddress)
{
  //save it
} 
```

恶意用户基本上可以在您的 PersonAddressViewModel 复合对象中设置任何属性，即使您的 UI 不提供此类功能。这是通过 MVC 的默认绑定机制实现的。为避免这种情况，请不要包装敏感模型类或使用[Bind 属性](http://msdn.microsoft.com/en-us/library/system.web.mvc.bindattribute%28v=vs.108%29.aspx)

更多信息请参见：[Pro ASP.NET MVC 3 Framework 第 3 版，作者：Steven Sanderson、Adam Freeman](http://www.apress.com/9781430234043)（第 17 章）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T07:56:50.773

您没有使用 MVVM。您正在定义 ViewModels，类仅用于查看目的，以避免破坏模型类。在这种情况下，您可以定义您想要的属性以获得最佳利润。在示例中，我将选择第二种解决方案，但这取决于您。

我正在与许多开发人员提供商一起开展一个大项目。在这种情况下，客户让我们定义我们希望保留模型（他们所称的业务实体）以供他们关注的 ViewModel。因为我们是不同的群体，所以没有人担心另一个 ViewModel，所以你甚至可以为一个视图使用一个类，不管另一个视图与第一个视图是否有一点不同。这是 ViewModels 而不是纯模型使用的优势之一。

为了数据绑定，我更喜欢通过 JSON 对象在客户端定义 ViewModel。有了这个，你就可以真正通过knockoutjs、angularjs、backbonejs等来使用MVVM了……

如果你想使用 MVVM 检查 knockoutjs。使用起来非常简单和愉快

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-14T03:13:09.467

如果您使用该视图模型来呈现表单，我会投票支持第二种方法，因为您正在组合表单所需的所有视图数据。

# mysql - 自动递增字段直到满足特定条件mysql

> ID：12878528
> 
> 赞同：0
> 
> 时间：2012-10-14T01:22:50.710
> 
> 标签：mysql

我有下表

```
SNo Value Item 
```

其中 Sno 是也存在于另一个表中的列。现在，我需要的是一个自增字段，如果 sno 的值是一个常数，它将继续增加，然后回到 0 并在 sno 的值发生变化时再次开始增加。有没有办法做到这一点？

假设我有四列：

```
SNO |Value |Item | AUtoIncrementingField
1    344      a            0 
1    345      b            1 
1    346      c            2 
2    568      d            0 
```

因此，当我说插入此表时，SNO 的值从原来的值发生变化，自动递增字段的值应该回到 0。有没有内置的方法可以做到这一点，或者在 mysql 上编写一些代码为达到这个。如果不是，我还需要什么其他选项来唯一标识属于某个 sno 值的每个值/项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T02:03:34.583

虽然这对 InnoDB 没有帮助，但值得指出的是 MyISAM 本身就支持此功能。如[使用`AUTO_INCREMENT`](http://dev.mysql.com/doc/en/example-auto-increment.html)中所述：

> ### MyISAM 笔记
> 
> 对于`MyISAM`表，您可以`AUTO_INCREMENT`在多列索引中的辅助列上指定。在这种情况下，`AUTO_INCREMENT`列的生成值计算为。当您要将数据放入有序组时，这很有用。[`MAX(*auto_increment_column*) + 1 WHERE prefix=*given-prefix*`](http://dev.mysql.com/doc/en/group-by-functions.html#function_max)
> 
> ```
> 创建表动物（
>     grp ENUM('fish','mammal','bird') NOT NULL,
>     id MEDIUMINT NOT NULL AUTO_INCREMENT,
>     名称 CHAR(30) 非空，
>     主键 (grp,id)
> ) 引擎=MyISAM;
> 
> 插入动物 (grp,name) 值
>     ('哺乳动物','狗'),('哺乳动物','猫'),
>     ('鸟','企鹅'),('鱼','松懈'),('哺乳动物','鲸鱼'),
>     ('鸟','鸵鸟');
> 
> SELECT * FROM 动物 ORDER BY grp,id;
> 
> ```
> 
> 返回：
> 
> ```
> +--------+----+---------+
> | grp | 编号 | 姓名 |
> +--------+----+---------+
> | 鱼| 高分辨率照片| CLIPARTO 1 | 松懈|
> | 哺乳动物| 高分辨率照片| CLIPARTO 1 | 狗 |
> | 哺乳动物| 高分辨率照片| CLIPARTO 2 | 猫 |
> | 哺乳动物| 高分辨率照片| CLIPARTO 3 | 鲸鱼|
> | 鸟| 高分辨率照片| CLIPARTO 1 | 企鹅 |
> | 鸟| 高分辨率照片| CLIPARTO 2 | 鸵鸟|
> +--------+----+---------+
> 
> ```
> 
> 在这种情况下（当`AUTO_INCREMENT`列是多列索引的一部分时），`AUTO_INCREMENT`如果您删除任何组中具有最大值的行，则会重用`AUTO_INCREMENT`值。即使对于通常不重用值的`MyISAM`表也会发生这种情况。`AUTO_INCREMENT`

# css - 当鼠标移到“a”元素上时，我想将属性设置为“span”元素

> ID：12878532
> 
> 赞同：1
> 
> 时间：2012-10-14T01:23:02.657
> 
> 标签：css

当鼠标移到“a”元素上时，我想将属性设置为“span”元素

这是我的代码：

```
<body>
<div id="wrapper">
    <div id="leftmenu">
        <li><a id="menu1" href="#"><span class="iconic menu11"></span></a></li>
        <li><a id="menu2" href="#"><span class="iconic menu22"></span></a></li>
        <li><a id="menu3" href="#"><span class="iconic menu33"></span></a></li>
        <li><a id="menu4" href="#"><span class="iconic menu44"></span></a></li>
    </div>
 </div>
</body>

#leftmenu li  a span{
    text-align:center;
    font-size:45px;
    line-height:45px;
    color: transparent;
    background-color: #CF9D9B;
    -webkit-background-clip: text;
    background-clip: text;
    text-shadow: rgba(255,255,255,0.5) 0 1px 2px;
} 
```

这不起作用：

```
#leftmenu li a:hover span {
    color: transparent;
    background-color: #0000;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T01:27:14.830

您的悬停背景颜色定义中有四个 0；将其更改为 3（速记）或 6（全十六进制颜色代码）。

如果我将某些东西放在一个跨度中查看，那么这对我有用 - 例如[http://jsfiddle.net/sync/QKn9v/](http://jsfiddle.net/sync/QKn9v/)

# c++ - Eclipse C 在构建配置中排除头文件

> ID：12878534
> 
> 赞同：0
> 
> 时间：2012-10-14T01:23:15.523
> 
> 标签：c++, eclipse, header-files, eclipse-cdt

在 Eclipse 中，使用 CDT。

有没有一种快速的方法来拥有两个相同的构建配置，但在一个配置中只使用 src/foo.h 而在另一个配置中只使用 src/bar/foo.h ？

src/ 目录有很多其他头文件，我乐观地希望当只有一个文件实际上不同时，不必将它们一一添加。

我也不想移动任何一个文件或修改它们，因为它们不是我自己编写的库或目录结构。（如果我真的必须，那么我想我必须把它整理出来）

我想某种“排除”列表是理想的。那存在吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T05:24:39.977

定义一个宏，它告诉您正在构建哪个构建配置，然后使用它来决定要包含哪个文件。

右键单击您的项目，选择属性。然后在弹出的对话框中选择 C/C++ Build，然后选择 Settings。您应该最终看到一个让您定义预处理器定义（宏）的视图。

然后在您的头文件中执行以下操作：

```
#ifndef MY_MACRO

// contents of header file only available when MY_MACRO is NOT defined    

#endif 
```

或者你可以（并且应该可能）在包含点做，所以这是一个源文件：

```
#ifdef MY_MACRO
#  include "bar.h"
#else
#  include "foo/bar.h"
#endif 
```

如果您包含来自多个源文件的头文件并且不想复制上述行，您可以添加另一个头文件，只需复制粘贴上面的行，然后在任何地方包含该头文件即可为您完成包含。

# c++ - C/C++ 中的套接字编程 - gcc char * 警告

> ID：12878537
> 
> 赞同：1
> 
> 时间：2012-10-14T01:23:54.720
> 
> 标签：c++, c

> **可能重复：**
> [不推荐从字符串常量到 char * 错误的转换](https://stackoverflow.com/questions/7415326/deprecated-conversion-from-string-constant-to-char-error)

我正在用 C/C++ 编写一个程序，它试图通过 UDP 套接字进行通信。

我正在处理的代码有一个变量 ，`char *servIP`它是通过主函数的输入参数设置的。但是，我希望输入参数是可选的，所以我有代码：

```
if(argc > 1)
    servIP = argv[1];           /* First arg: server IP address (dotted quad) */
else
    servIP = "127.0.0.1"; 
```

`servIP`后来被转换成更网络可用的形式。

当我编译它时，我收到一条警告说**“警告：不推荐使用从字符串常量到 char* 的转换”**。

我认为这不是输入该 IP 地址的正确方法；什么是更好的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T01:26:32.593

声明`servIP`为 a`const char *`而不是`char *`or，如果这不可能，`strdup("127.0.0.1")`（在第二种情况下，请`free`稍后记住）

修改字符串文字的效果是未定义的，这就是为什么 c++ 将类型“n const char 的数组”分配给字符串文字的原因。编译器警告您从 const 数据类型转换为非 const 数据类型。

您可以`std::string`改用，然后当您需要指向底层字符的 C 样式指针时，可以使用[std::string::c_str()](http://www.cplusplus.com/reference/string/string/c_str/)。

# ruby - 在 ruby 中调用非静态函数

> ID：12878541
> 
> 赞同：1
> 
> 时间：2012-10-14T01:26:04.283
> 
> 标签：ruby

我很困惑如何在同一个类中定义的另一个函数中调用一个类中定义的函数。这是我所做的：

```
class Test
  def TestFunc(obj)
    puts obj
  end

  def Test.StatFun(obj)
    puts obj
    TestFunc(obj)
  end   
end

Test.StatFun([[5,2], [4,3]]) 
```

当我在 中运行它时`cmd.exe`，我收到以下错误：

> ruby LawtonTest.rb 5 2 4 3 LawtonTest.rb:10:in `StatFun': undefined method`TestFunc' for Test:Class (NoMet hodError) from LawtonTest.rb:14:in `'

我想不通。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T01:34:03.827

您必须在对象上调用它。我认为您需要很好地参考 Ruby 中的 oop，请查看[http://zetcode.com/lang/rubytutorial/oop/](http://zetcode.com/lang/rubytutorial/oop/)。但无论如何，事情是，方法（这是你用 声明的`def`）必须在一个对象上调用，而不是像一个全局函数。所以如果你想使用`TestFunc`，试试这个：

```
def Test.StatFun(obj)
  puts obj
  Test.new.TestFunc(obj)
end 
```

该`Test.new`部分用于创建一个对象，您可以在该对象上使用该`TestFunc`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T01:29:32.690

我在任何地方都看不到 TestFunc 的定义。你定义了吗？

此外，一般的 Ruby 约定是为方法使用小写名称（例如`test_func`）

* * *

*编辑*应该在回答之前真正阅读问题......

这里的问题是TestFunc 只为Test 类的*实例*定义，而当您调用Test.StatFun 时，执行代码的对象是实际的Test*类。*这意味着它不知道 TestFunc 是什么。解决这个问题的一种方法是创建一个新实例（因为这是类知道如何做的一件事）：

```
def Test.StatFun(obj)
  puts obj
  new.TestFunc(obj)
end 
```

# bash - inotifywait 脚本监视 Dropbox 文件夹.... cp: 无法统计

> ID：12878546
> 
> 赞同：4
> 
> 时间：2012-10-14T01:27:19.423
> 
> 标签：bash, dropbox, inotify

我的第一个问题+我们开始......

这是一个简单的脚本，我以前可以使用它，但现在它已经死了。

当文件进入保管箱文件夹时，它会出现在服务器上。这个简单的脚本有 inotifywait 监视追加和做我需要对传入文件完成的事情，在这种情况下，一个简单的移动到另一个文件夹。

```
 inotifywait -r -m -e attrib /path/to/watched/directory/

    while read dir ev file;

        do 

        cp $file ../123

        done 
```

我收到这个错误

```
 cp: cannot stat `121013_0005.jpg': No such file or directory 
```

我错过了一些简单的东西，请教我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T01:33:34.917

*   你需要`pipe`在第一行
*   你应该引用所有变量

所以最后：

```
inotifywait -r -m -e attrib /path/to/watched/directory |
    while read dir ev file; do
      cp "$file" ../123
    done 
```

# ios - 如何在 Xcode 中显示占位符窗口？

> ID：12878547
> 
> 赞同：2
> 
> 时间：2012-10-14T01:27:36.547
> 
> 标签：ios

我是一个 iOS 菜鸟，在尝试从 O'Reilly 的 headfirst iphone development 2e 编写教程时遇到了困难。本教程希望我将选择器拖到占位符菜单中，如下图所示——但我似乎无法让这个菜单在 xcode 中可见。

我该怎么做才能显示占位符菜单？

![在此处输入图像描述](../Images/f3693068f22f17ef79b8e9d89ee2423c.png)

如果我需要按照该问题的答案中的建议单击“披露按钮”，我在界面的哪里可以找到它？在导航器中？公用事业？

![在此处输入图像描述](../Images/53930cd7d768a8b5d118e1bcc38208f7.png)

这是我在 xcode 中的屏幕：

![在此处输入图像描述](../Images/59d650c0b28b0852e72865a2847f1ce5.png)

这家伙似乎遇到了类似的问题[How to add the Placeholder Window in Xcode](https://stackoverflow.com/questions/9766791/how-to-add-the-placeholder-window-in-xcode) (unanswered)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T07:16:11.547

您的问题是您已经使用情节提要创建了项目。故事板没有文件所有者占位符。由于您自称是菜鸟，因此您应该开始一个新项目，并确保在完成新项目向导时**关闭**“使用情节提要”复选框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T01:43:46.897

右键单击或控制单击选择器，该窗口应弹出。然后从打开的圆圈拖动（不是控制拖动）到文件的所有者。

# jquery - 尝试使用 jQuery 获得 CSS3 过渡的后备

> ID：12878548
> 
> 赞同：-2
> 
> 时间：2012-10-14T01:27:41.430
> 
> 标签：jquery, css, animation, transition, fading

> **可能重复：**
> [带有纯 jQuery 动画的特殊颜色过渡效果 // 没有 ui 或其他库](https://stackoverflow.com/questions/12349958/special-color-transition-effect-with-pure-jquery-animation-no-ui-or-other-lib)

我认为这段代码*应该*是它，但它不起作用。我可以说它正在改变颜色，但它没有*褪色*（如 CSS3 过渡）。请帮忙。我的代码：

```
$(document).ready(function(){
    $("#nav-wrap ul li a").mouseover(function(){
        $(this).css("color","#444");
    });

    $("#nav-wrap ul li a").mouseout(function(){
        $(this).css("color","#999");
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T01:35:31.363

```
$(document).ready(function(){
    $("#nav-wrap ul li a").hover(function(){
            $(this).stop().animate({color:'#444'}, 300);
        }, function () {
            $(this).stop().animate({color:'#999'}, 100);
        }
    )}
}); 
```

此代码需要 jQuery UI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T01:34:38.503

你需要的是`animate()`元素，而不是简单地改变css中的颜色值。[这](http://api.jquery.com/animate/)是有关如何执行此操作的参考。

# boolean - 布尔代数

> ID：12878550
> 
> 赞同：2
> 
> 时间：2012-10-14T01:28:12.407
> 
> 标签：boolean, logic, algebra

任何人都可以帮助我一些布尔代数。Wolfram alpha 似乎不太喜欢这个。问题很大，所以我只展示了其中的一小部分。

`( ( A' or B or C )' or ( A or D )' or D')'`

谢谢你。

这是整个问题。 ![问题图片](../Images/1586289e927fed64e69b3df21f2e0403.png)

蓝色是我发布的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T01:38:48.090

你的书面方程的 DNF 形式是 (A'D)+(BD)+(CD)

[Wolfram|Alpha](http://www.wolframalpha.com/input/?i=not+%28+not+%28+not+A+or+B+or+C+%29+or+not+%28+A+or+D+%29+or+not+D%29)上的更多形式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-25T13:24:48.060

如果`'`您的示例代码中的 代表消极，那么在 C# 或 Java 中，您将拥有：

```
boolean A,B,C,D; 
```

接着：

```
if(!(!A || B || C) || !(A || D) || !D)
{
   //Do something
} 
```

# c++ - 覆盖基类返回类型

> ID：12878558
> 
> 赞同：1
> 
> 时间：2012-10-14T01:29:27.690
> 
> 标签：c++, sdl

我有一个 Button 类，如下所示：

```
class Button {    
    protected:
        SDL_Rect box;

    public:
        Button(string id, int x, int y, int w, int h);
        ~Button();
        virtual void handleEvent(SDL_Event event);
}; 
```

我有一种特殊的按钮，MyButton：

```
class MyButton : public Button {    
    public:
        MyButton(string id, int x, int y, int w, int h);
        ~MyButton();
        void handleEvent(SDL_Event event);          
}; 
```

问题是，我需要`MyButton::handleEvent()`返回的方法`int`而不是`void`. 最优雅的方法是什么？

编辑：我需要这个的原因是因为我需要知道什么时候`MyButton`被按下以便在其他类中做一些其他事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T01:41:53.673

毕竟继承的概念`MyButton`是`Button`. 这意味着您已经`handleEvent`定义了一个方法`MyButton`，我们不必使用具有相同名称和两种不同返回类型的方法。

这意味着如果您想要一个返回整数的方法，您可以`overload`在您的`handleEvent`方法中`MyButton`使用整数引用参数，并且您可以在引用中设置它的值。

```
class MyButton : public Button {    
    public:
        MyButton(string id, int x, int y, int w, int h);
        ~MyButton();
        void handleEvent(SDL_Event event, int& out_param);          
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T01:49:20.107

你可以做一些事情，但它很丑：

我的按钮.h

```
class MyButton : public Button {
    protected:
        SDL_Rect box;

    public:
        MyButton(string id, int x, int y, int w, int h);
        ~MyButton();
        void handleEvent(SDL_Event event);
        int handleEvent_int(SDL_Event event);
}; 
```

我的按钮.cpp

```
#include "mybutton.h"
void MyButton::handleEvent(SDL_Event event) {
    this->handleEvent_int(event);
}

int MyButton::handleEvent_int(SDL_Event event) {
    //Override it here but with return.
} 
```

主文件

```
int main() {
    Button* button=new MyButton();
    button->handleEvent(...);
    MyButton* myButton=(MyButton*)button;
    int result=myButton->handleEvent_int(...);
} 
```

您创建一个返回 int 的全新函数，用不同的名称调用它。用 this 覆盖虚函数而不返回它的值。

# clojure - 在生产中获取 Clojurescript repl/connect 以不编译？

> ID：12878561
> 
> 赞同：9
> 
> 时间：2012-10-14T01:30:06.937
> 
> 标签：clojure, clojurescript

在我的 clojurescript 代码中，我有以下内容：

```
(defn onload [] (repl/connect "http://localhost:9000/repl"))

(set! (.-onload js/window) onload) 
```

Clojurescript repl 在开发中非常有用，但在生产过程中我很犹豫是否将其留在代码中。在开发期间（简单编译）存在上述代码但在生产期间不存在（高级编译）的最干净的方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-01T17:57:39.900

现代[cljs](https://github.com/magomimmo/modern-cljs)教程实际上在这里准确描述了如何解决这个[问题](https://github.com/magomimmo/modern-cljs/blob/master/doc/first-edition/tutorial-07.md#getting-in-trouble)。

希望有帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T17:46:19.607

不幸的是，目前在 ClojureScript 中没有任何定义明确的方法来进行条件编译。

您可以添加配置变量来控制是否以多种方式启动 REPL，但一种快速简便的方法是获取当前页面的主机名，并且仅`repl/connnect`在它是“localhost”或您的任何其他域时调用重新用于开发工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T16:13:57.647

我认为 lein2 配置文件和 cljsbuild src-paths munging 的组合可以解决问题。例如，创建一个简单地加载您的 repl 的命名空间，并使用配置文件运行排除它以进行最终编译（可能需要在另一个 src-path 目录中创建一个虚拟命名空间）。

# scala - scala specs2错误：匿名不等于scala.collection.immutable

> ID：12878563
> 
> 赞同：2
> 
> 时间：2012-10-14T01:31:05.247
> 
> 标签：scala, testing, specs2

我正在运行以下测试

```
Idea.findById(1).get.tags must equalTo(List[String]("internet, tecnología")) 
```

我收到以下错误

```
[info] Idea.tags should
[error] x should retrieve a list of tag names for the idea
[error]    'internet, tecnología': anon is not equal to 'internet, tecnología': scala.collection.immutable.:: (IdeaTagSpec.scala:42) 
```

这是我正在尝试测试的方法

```
lazy val tags: List[String] = {
  Tag.findByIdea(this).map(_.name).toList
} 
```

我可以用这个丑陋的黑客解决它

```
( Idea.findById(1).get.tags.toString 
    must equalTo(List[String]("internet, tecnología").toString)
) 
```

但我确信有更好的方法来做到这一点......

- 编辑 -

对不起，这是我的一个愚蠢的错误（应该是 List("internet", "tecnologia") 代替）

无论如何，错误消息非常具有误导性，这就是我将这个问题留在这里的原因......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:25:52.697

这种情况将在下一个 specs2 版本中得到改善。如果您尝试 specs2-1.12.3-SNAPSHOT，您将获得：

```
List("1, 2, 3") must_== List("1", "2", "3")

'List('1, 2, 3'): scala.collection.immutable.$colon$colon[java.lang.String]' 
  is not equal to 
'List('1', '2', '3'): scala.collection.immutable.$colon$colon[java.lang.String]' 
```

每个元素周围的引号差异应该会有所帮助，如果元素的类型不同，您将得到：

```
List(1, 2, 3) must_== List("1", "2", "3")

'List('1', '2', '3'): scala.collection.immutable.$colon$colon[java.lang.Integer]' 
  is not equal to 
'List('1', '2', '3'): scala.collection.immutable.$colon$colon[java.lang.String]' 
```

最后，对于“正常”情况：

```
List(1, 2, 3) must_== List(3, 2, 1)

List(1, 2, 3) is not equal to List(3, 2, 1) 
```

# github - travis-ci 仅在 github repo 中为 master 分支触发构建

> ID：12878568
> 
> 赞同：23
> 
> 时间：2012-10-14T01:33:30.843
> 
> 标签：github, travis-ci

我在 github git repo [https://github.com/larrycai/LASO](https://github.com/larrycai/LASO)中有两个分支（`master`和）`gh-pages`

根据文档[http://about.travis-ci.org/docs/user/build-configuration/](http://about.travis-ci.org/docs/user/build-configuration/)，如果该`.travis.yml`文件存在于分支中，将在所有分支上触发

`master`虽然目前它仅在分支中触发，请参阅[https://travis-ci.org/#!/larrycai/LASO/branch_summary](https://travis-ci.org/#!/larrycai/LASO/branch_summary)

`.travis.yml`即使我想为所有分支构建，我是否必须设置白名单或黑名单。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-06-15T02:32:08.203

根据[这个合并的拉取请求](https://github.com/travis-ci/travis-core/pull/137)和[这个文档条目](http://docs.travis-ci.com/user/customizing-the-build/#Building-Specific-Branches)`gh-pages`，您现在可以通过将分支添加到白名单来在分支上运行测试：

```
branches:
  only:
    - gh-pages 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T02:34:36.027

gh-pages 被忽略是因为大多数人希望 travis 忽略它们。

# javascript - 为什么 3,758,096,384 << 1 给出 768

> ID：12878572
> 
> 赞同：1
> 
> 时间：2012-10-14T01:33:56.197
> 
> 标签：javascript, bit-manipulation, bit-shift

在阅读[Absolute Beginner's Guide to Bit Shifting 的精彩答案后？](https://stackoverflow.com/questions/141525/absolute-beginners-guide-to-bit-shifting) 我测试了索赔（原文如此）：

```
3,758,096,384 << 1 
```

从 Chrome 控制台：

```
3,758,096,384 << 1

> 768

3,758,096,384 << 2

> 1536

3758096384 << 1

> -1073741824 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-14T01:36:48.850

它返回 768 因为您错误地使用了逗号运算符。`3,758,096,384 << 1`实际上是`384 << 1`因为逗号运算符将返回最后一个操作数。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-14T01:35:28.413

这就是工作中的逗号运算符。它实际上是`384 << 1`。（逗号运算符先计算其左侧，然后计算其右侧，然后返回右侧。）

# actionscript-3 - 消失一个按钮 Actionscript 3

> ID：12878576
> 
> 赞同：2
> 
> 时间：2012-10-14T01:34:18.723
> 
> 标签：actionscript-3, button

嗨，我在 Actionscript 3.0 中工作，我创建了一个按钮，可以跳转到时间轴中的不同帧，这是我的代码：

```
var newnextb = new nextb();

newnextb.x = 185;
newnextb.y = 260; 
stage.addChild(newnextb);

newnextb.addEventListener(MouseEvent.CLICK,gClick);

function gClick(event:MouseEvent):void{
    gotoAndPlay("getMap");

} 
```

它可以工作，但是如何在单击按钮后使其消失？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T01:35:51.427

添加假设是一个显示对象`newnextb.visible = false;`的事件处理程序。`nextb()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T03:03:36.450

上线后

```
gotoAndPlay("getMap"); 
```

添加行

```
event.target.visible = false; 
```

# c++ - C++ ODBC 检查连接是否成功

> ID：12878578
> 
> 赞同：2
> 
> 时间：2012-10-14T01:34:39.260
> 
> 标签：c++, sql-server, database, odbc, database-connection

我正在使用 C++ ODBC 连接到本地 SQL Server。

一旦我尝试连接到服务器；有没有办法验证连接确实成功？

这是我的代码示例，它委托连接句柄并建立连接：

```
//Allocate the pre-connection handles
  this->sReturn = SQL_SUCCESS;
  this->sReturn = SQLAllocHandle(SQL_HANDLE_ENV, SQL_NULL_HANDLE, &this->eHandle);
  this->sReturn = SQLSetEnvAttr(this->eHandle, SQL_ATTR_ODBC_VERSION, reinterpret_cast<void*>(SQL_OV_ODBC3_80), 4);
  SQLAllocHandle(SQL_HANDLE_DBC, this->eHandle, &this->cHandle);

//Connect to the database
  this->sReturn = SQLConnect(this->cHandle, reinterpret_cast<SQLWCHAR*>(serverName), SQL_NTS, NULL, 0, NULL, 0); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T01:42:29.337

根据 MSDN，SQLConnect() 的返回值为：

**SQL_SUCCESS、SQL_SUCCESS_WITH_INFO**、SQL_ERROR、SQL_INVALID_HANDLE 或 SQL_STILL_EXECUTING。

所以我假设 SQL_SUCCESS 或 SQL_SUCCESS_WITH_INFO 表明连接确实成功。

如果通过“验证”，您的意思不仅仅是查看返回代码，我想如果由于某种原因连接不再有效，使用该连接的任何后续调用都会失败。

这是来自同一个 MSDN 站点的代码示例 - 请注意，他们使用信息检查成功或成功：

```
 // Connect to data source
    retcode = SQLConnect(hdbc, (SQLCHAR*) "NorthWind", SQL_NTS, (SQLCHAR*) NULL, 0, NULL, 0);

    // Allocate statement handle
    if (retcode == SQL_SUCCESS || retcode == SQL_SUCCESS_WITH_INFO) {
        retcode = SQLAllocHandle(SQL_HANDLE_STMT, hdbc, &hstmt); 

       // Process data
       if (retcode == SQL_SUCCESS || retcode == SQL_SUCCESS_WITH_INFO) {
          SQLFreeHandle(SQL_HANDLE_STMT, hstmt);
       }

       SQLDisconnect(hdbc);
    } 
```

# c++ - 如何对一个非常大的数求根？

> ID：12878583
> 
> 赞同：1
> 
> 时间：2012-10-14T01:35:31.877
> 
> 标签：c++

```
given x=4 and y=1296;
we need to solve for z in z^x=y; 
we can calculate z=6 in various ways; 
```

问题是如果 y 是一个大于 10^100 的非常大的数字，我如何找到 z？我显然不能将该数字存储为 int，那么我将如何计算 z？

C++ 实现会很好，如果没有，任何解决方案都可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T01:43:30.873

也许你可以用对数做一些坏事

也许你可以找到一个库来处理大整数

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T01:54:48.777

您可以尝试使用[牛顿法](http://en.wikipedia.org/wiki/Newton%27s_method)。在这种情况下，您需要使用[任意精度算术](http://en.wikipedia.org/wiki/Arbitrary-precision_arithmetic)。

即您需要为任意精度数编写类。它将是尾数的组合，尾数由数字数组和指数表示，指数由整数表示。您应该实现类似于铅笔和纸方法的数字基本操作。然后你应该意识到 wiki 中描述的牛顿算法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-14T01:59:00.977

这取决于所需的精度。由于 1e100 不能完全用双精度表示，所以你有问题。

如果您愿意接受它不会产生精确的解决方案，则此方法有效。但是，我只是说 1e100 无论如何都不能完全表示为双精度数。因此，在 MATLAB 中，

```
exp(log(1e100)/4)
ans =
                     1e+25 
```

好的，所以看起来 1e25 是答案，但真的是这样吗？事实上，我们真正得到的数字是：10000000000000026675773440。

一个问题是原始数字无论如何都没有准确表示。所以 1e100，当以 IEEE 格式存储时，更准确地存储为如下所示：

```
1.00000000000000001590289110975991804683608085639452813897813e100 
```

为了准确地解决这个问题，您最好使用大整数形式，但大十进制形式也可以做得相当好。

因此，在 MATLAB 中，使用我的大十进制 (HPF) 形式，我们看到 1e100 精确地表示为 100 位精度。

```
x = hpf('1e100',100)
x =
1.e100 
```

并且，对于 100 位精度，根是正确的。

```
exp(log(x)/4)
ans =
10000000000000000000000000 
```

但实际上，要小心，因为任何浮点形式都不能准确地表示实数。更精确地说，我们看到计算出的数字实际上略有误差：

9999999999999999999999999.99999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999800

一个大整数形式将产生一个精确的结果，如果存在的话。因此，使用大整数形式，我们看到了预期的结果：

```
vpi(10)^100
ans =
    10000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000                                       

nthroot(vpi(10)^100,4)
ans =
    10000000000000000000000000 
```

关键是，要进行所需的计算，您需要使用可以进行计算的工具。有许多这样的大十进制或大整数工具。例如，Java 有我偶尔使用的[BigDecimal 和 BigInteger](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/package-summary.html)形式（尽管我已经编写了自己的工具，因此在 MATLAB、[HPF](http://www.mathworks.com/matlabcentral/fileexchange/36534-hpf-a-big-decimal-class)和[VPI](http://www.mathworks.com/matlabcentral/fileexchange/22725-variable-precision-integer-arithmetic)中。）

# php - 如何查看页面加载时运行了多少 MySQL 查询

> ID：12878589
> 
> 赞同：3
> 
> 时间：2012-10-14T01:37:39.880
> 
> 标签：php, mysql, mysqli

我正在测试我正在制作的 CMS 的性能，我想知道是否可以查看在页面加载时运行了哪些查询。例如，假设我运行“test.php”。当我转到它时，mySQL 运行的查询列表显示在页面底部 - 这可能吗？我以前见过网站这样做。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T01:40:23.427

该功能`SHOW FULL PROCESSLIST`将显示所有进程的实时和过去历史。

[`SHOW FULL PROCESSLIST`](http://dev.mysql.com/doc/en/show-processlist.html)

如果您使用的是您有权安装软件包的服务器，您可以**`mysqltop`**实时安装和测试文件和 MySQL 资源使用情况和查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T01:48:06.820

好吧，如果您的所有查询都通过一个函数，那么它应该很容易，但如果每个查询都只使用标准调用，那么它就不会了。这也让您可以轻松切换到不同的数据库类型或类似的东西。

例如，在我修改为库程序的 CMS 上，我有一个 DB Query 功能：

```
function db_query($qstring, $conn) {
$dbh = mysql_db_query($dbname,$qstring, $conn);
// this is where I would add some incrementing code, but it has to be global.
// or just do something like 
if($_GET["debug"]=="debuginSQLcount"){    
    echo $qstring
}
return $dbh;
} 
```

然后使用它，我只是做类似的事情

```
$sql = "SELECT stuff";
}
$result = db_query($sql, $link);
if (!$result || db_numrows($result) < 1) { 
```

如果你这样做，那么只需在函数中添加一行，它会增加一个 $GLOBALS 变量或类似的东西。阅读更多[PHP global 或 $GLOBALS](https://stackoverflow.com/questions/3573847/php-global-or-globals)

# vb.net - 基于条件的 Tablix 文本框 RDLC 报告中的特定单元格颜色 - Vb.net - RDLC

> ID：12878591
> 
> 赞同：2
> 
> 时间：2012-10-14T01:38:35.337
> 
> 标签：vb.net, report, rdlc, dynamic-rdlc-generation

我制作了一个 RDLC 报告，它从我提供的数据集生成它的 tablix。我需要单元格的内容（Tablix 中的每个文本框）根据其内容更改其背景颜色。

例如：

```
Name | Val  
Joe  | 80  
Lee  | 60  
Fred | 30  
Bill | 57 
```

我的条件是小于 60 应将其背景色更改为红色。（因此，30 和 57 的背景色将变为红色）。

注意：由于它是从数据集加载的，因此您不能直接设置它。如果我们将条件作为参数传递给 rdlc 并自行工作，有什么办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T01:42:42.300

在背景属性中使用表达式。您可以使用: 获取您已读取的某些字段的当前值`Fields.Name_Of_Field.Value`，它将自动移动到每一行的正确值。

如果您有单个测试，您可以使用它

```
=IIF(Fields.Val.Value < 60, "Red", "Blue") 
```

如果您有多个测试，您可以使用它

```
=SWITCH(
 Fields.Val.Value < 60, "Red",
 Fields.Val.Value < 80 && Fields.Val.Value >= 60, "Blue",
         .
         . add other tests here
         .
 "Black") ' default is black in case all the tests fail 
```

One of the great things about RDL is the number places you can use expressions. [Try this for a starter](http://sql-bi-dev.blogspot.co.nz/2010/09/ssrs-expressions.html)

# ruby - 将 UDP 数据包发送到 NTP 以获取数据包（在 ruby 中）

> ID：12878593
> 
> 赞同：2
> 
> 时间：2012-10-14T01:38:54.753
> 
> 标签：ruby, udp, ntp

我需要做的：向 pool.ntp.org 发送一个数据包（我假设我会自动收到一个数据包）。

以下内容对我不起作用。我不知道自己在做什么，所以现在如果我能到达地址并取回数据包，我会很满意。下面的代码只是挂起。任何和所有的帮助将不胜感激。

```
require 'socket'
sock = UDPSocket.new
sock.connect("pool.ntp.org", 123)
sock.recvfrom(10) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T02:07:39.453

[UDPSocket 上](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/socket/rdoc/UDPSocket.html#method-i-connect)的文档指出：

```
connect(host, port) 
Connects udpsocket to host:port.

This makes possible to send without destination address. 
```

这意味着您可以使用`send(mesg, flags)`的形式，仅此`send`而已。您需要向 NTP 服务器发送请求消息以获得回复

您可以在此处查看 NTPv4 协议规范：[RFC 5905](http://www.ietf.org/rfc/rfc5905.txt)

# python - 用于从 .a 文件列表的串联 nm 输出中查找 .a 文件名的脚本语言

> ID：12878594
> 
> 赞同：0
> 
> 时间：2012-10-14T01:39:28.957
> 
> 标签：python, ruby, perl, bash, scripting

我有一个包含应用程序中所有 .a 文件的 nm 输出的文件。现在，我如何找出包含指定函数的 .a 。

我擅长 Bash 脚本，并且在 Perl 方面相当胜任，并且可以做一些 Python 和 Ruby。

关于我可以用来执行此操作的脚本语言的任何建议？

问题更新：我有一个使用以下命令创建的文件：

```
$ find . -name '*'.a > afile_list.log
$ while read line; do echo "$line"; nm $line; done < ./afile_list.log > a_list.log 
```

现在我在代码库中有一个函数 fun1() 。我如何找出哪个 .a 中有这个功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T02:48:40.247

该`nm`命令有一个选项可以在其输出中打印该信息，从而使跟踪变得微不足道。该选项`nm -A`包括 Linux、Mac OS X 和 Solaris 上的库名和成员对象文件名（HP-UX 和 AIX 未勾选），符合[POSIX`nm`](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/nm.html)，这说明了统一性。在某些平台上还有其他选项可以执行类似任务；`nm -R`例如，在 Solaris 上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T01:50:18.517

bash 可以做到这一点。使用`while read`循环逐行读取文件，每次遇到一个存档名称时都会删除存档名称，并在找到感兴趣的功能时输出最后存储的存档名称。

# php - 使用类作为函数

> ID：12878597
> 
> 赞同：-2
> 
> 时间：2012-10-14T01:40:48.800
> 
> 标签：php, class

> **可能重复：**
> [静态构造函数的最佳实践](https://stackoverflow.com/questions/5368199/best-practices-for-static-constructors)

我想创建一个类似于 jQuery 设置方式的对象，这意味着有一个主要功能和实用功能。我正在考虑做这样的事情：

```
class main {
    function __construct() {
        echo 'this is the main usage of the object';
    }
    static function helper() {
        echo 'this is a helper function';
    }
} 
```

所以使用助手非常简单：`main::helper();`但为了使用主函数本身，我需要`new`每次都使用关键字：`new main()`。有什么方法可以让我可以在不使用`new`关键字的情况下调用主函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T01:47:00.017

使用助手调用，例如 nameofhelper：

> main::helper('nameofhelper');

函数类：

```
abstract class main {
    function __construct() {
        echo 'this is the main usage of the object';
    }

    public static function helper($name_of_helper)
    {
        $helper = new 'Helper_'.$name_of_helper;
    }
} 
```

助手类：

```
class Helper_nameofhelper
{
    function invoke()
    {
        return 'invokedhelper';
    }
} 
```

# xcode - Webview 加载到触摸

> ID：12878598
> 
> 赞同：0
> 
> 时间：2012-10-14T01:41:16.853
> 
> 标签：xcode, uiwebview

你好，我是 Xcode 开发的新手，我尝试制作一个简单的应用程序我的应用程序：我的移动应用程序有 5 个选项卡，所有选项卡都有 Webview，问题是加载应用程序，一切工作都很慢。我在更改选项卡加载 Web 视图时看到了一些应用程序。任何人都可以帮助我。

对不起我的英语我使用谷歌翻译。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:50:41.443

@user1744203 我现在可以得到你。您可以在 MainViewController 中调用所有 Tab 操作，然后将加载所有操作，从而减少加载时间。仍然有问题，然后您可以使用 jQuery 快速遍历 HTML 文档...

也许[单击此链接可以帮助您修复 jQuery](http://www.altinkonline.nl/tutorials/xcode/uiwebview/load-jquery-in-uiwebview/)

希望这可以帮助！！！！

# android - Android - 一个视图组中的两个地图视图

> ID：12878599
> 
> 赞同：-1
> 
> 时间：2012-10-14T01:41:24.453
> 
> 标签：android, eclipse, google-maps, android-mapview, android-maps

我需要实现 2 个 MapView，一个显示在屏幕的整个宽度和高度上，另一个显示在此地图的顶部，但会更小。我需要两个 MapView 同时显示不同的地图。我知道目前不支持此功能，但我知道可以解决问题，只是不确定如何在同一视图中获取两张地图并同时显示任何人有任何想法或示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T01:57:59.033

您可以使用 Framelayout 将视图排列在另一个之上。

Framelayout 可用于重叠视图

```
 <FrameLayout
    android:layout_width="wrap_content"
    android:layout_weight="1.0"
    android:layout_height="wrap_content">

    <EditText
        android:layout_width="fill_parent"
        android:hint="Search..."
        android:layout_margin="3dip"
         android:id="@+id/txtsearch"
        android:background="@drawable/searchback"            
        android:layout_height="wrap_content"
        />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical|right"    
        android:id="@+id/btntitlesearch"                 
        android:background="@drawable/searchbutton"/>

</FrameLayout> 
```

这将使按钮与 EditText 重叠

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T02:12:36.007

使用空的 RelativeLayout 作为容器。这样，您可以将两个布局放在一起。[http://developer.android.com/guide/topics/ui/layout/relative.html](http://developer.android.com/guide/topics/ui/layout/relative.html)

只做一个fill_parent

随心所欲地制作第二个（如 android:layout_alignParentRight="true"）

给你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T22:42:53.187

在你走远之前，我想引用谷歌关于`MapView`在同一个中运行多个 's所说的话`Activity`：

> “每个进程只支持一个 MapActivity。同时运行的多个 MapActivity 可能会以意想不到的方式干扰。”

它看起来`Activity`只支持一个`MapView`，因此您可能希望找到不同的设计路径。

# java - 阅读 Java 中的 Web 服务

> ID：12878603
> 
> 赞同：0
> 
> 时间：2012-10-14T01:42:03.840
> 
> 标签：java, android, web-services, response

我想从以下 Web 服务中获取描述、供应商和价格。[链接] [http://sagt.vizushop.com/DefaultSimple.aspx?command=item_price&id=11](http://sagt.vizushop.com/DefaultSimple.aspx?command=item_price&id=11)

回复如下

```
<item_details>
<description>
Jakl (Kumbuk) Center Table Timber : Mahogany/Rubber
</description>
<price>12600</price>
<vendor>BLUE</vendor>
</item_details> 
```

我尝试使用以下示例，但它不起作用 - 为变量提供空值。

```
 String vendor="";
                String price="";
                String description="";
                try {

                    URL url = new URL("http://sagt.vizushop.com/DefaultSimple.aspx?command=item_price&id=11");
                    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
                    DocumentBuilder db = dbf.newDocumentBuilder();
                    Document doc = db.parse(new InputSource(url.openStream()));
                    doc.getDocumentElement().normalize();

                    NodeList nodeList = doc.getElementsByTagName("description");
                    //description=nodeList.item(0).getNodeValue();
                    Node node = nodeList.item(0);

                    description = node.getNodeValue();

                    Log.v(TAG, description);
               } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T02:41:26.003

如果有人需要，这就是答案。

```
 URL url = new URL("http://sagt.vizushop.com/DefaultSimple.aspx?command=item_price&id=11");
                    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
                    DocumentBuilder db = dbf.newDocumentBuilder();
                    Document doc = db.parse(new InputSource(url.openStream()));
                    doc.getDocumentElement().normalize();

                    NodeList nodeList = doc.getElementsByTagName("item_details");

                    Node node=nodeList.item(0);

                    Element fstElmnt = (Element) node;
                    NodeList idList = fstElmnt.getElementsByTagName("price");
                    Element idElement = (Element) idList.item(0);
                    idList = idElement.getChildNodes();
                    price=((Node) idList.item(0)).getNodeValue();

                    Element secondElmnt = (Element) node;
                    NodeList vdList = secondElmnt.getElementsByTagName("vendor");
                    Element vdElmnt = (Element) vdList.item(0);
                    vdList = vdElmnt.getChildNodes();
                    vendor=((Node) vdList.item(0)).getNodeValue();

                    Element lastElemnt = (Element) node;
                    NodeList desList = lastElemnt.getElementsByTagName("description ");
                    Element desElmnt = (Element) desList.item(0);
                    desList = desElmnt.getChildNodes();
                    description=((Node) desList.item(0)).getNodeValue(); 
```

# ios - 如何在 applicationWillResignActive 中关闭 OpenGL 任务？

> ID：12878604
> 
> 赞同：2
> 
> 时间：2012-10-14T01:42:08.517
> 
> 标签：ios, opengl-es, crash

我几乎完成了我的第一个应用程序。在设备上进行测试时，当我按下主页按钮时出现崩溃，并显示错误消息

libGPUSupportMercury.dylib`gpus_ReturnNotPermittedKillClient：

基于这些帖子： [https ://stackoverflow.com/search?q=](https://stackoverflow.com/search?q=how+to+shut+down+OpenGL) [how+to+shut+down+OpenGL OpenGL ES crash on move background, iOS 5.1](https://stackoverflow.com/questions/10620287/opengl-es-crash-on-move-background-ios-5-1)

我很确定问题在于我的应用程序是软件的扩展，它使用了一些涉及 OpenGL 的示例代码（我对此知之甚少），并且 OpenGL 任务在 resignActive 时没有正确关闭。

我在我的 AppDelegate 中尝试了以下操作，但没有成功：

```
- (void)applicationWillResignActive:(UIApplication *)application {
    glFinish();
} 
```

我的应用程序在退出时不需要保存任何设置......它只需要结束。任何人都可以提出解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T11:25:36.397

我现在正在开发一款 Sprite Kit 游戏，我遇到了类似的问题。

检查屏幕上是否有告诉 FPS 的节点，因为这可能会渲染并导致崩溃。它对我有用。

在 applicationWillResignActive 方法中，我和你们一样调用我的 pause 方法。

*编辑 - 并检查音频播放

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-14T03:05:32.563

要在用户按下主页按钮时完成程序？在 Xcode 上，选择 Target 并选择 Info 选项卡。自定义 iOS 目标属性，添加一个名为

应用程序不在后台运行

并设置值

是的

尝试一下！

ps 没必要写 glFinish()。

# visual-studio-2010 - 使用带有 PostBuildEvent 的 Visual Studio 安装项目创建 MSI 包

> ID：12878608
> 
> 赞同：0
> 
> 时间：2012-10-14T01:43:07.457
> 
> 标签：visual-studio-2010

我正在使用 Visual Studio 创建一个 MSI 包，并在 SQL Express 设置中添加，一切正常，除了我想在应用程序安装完成后自动打开 SQL Express。

我做了一些调查，在 Visual Studio 的属性窗口中看到了一个名为`PostBuildEvent`. 我可以在此处添加自定义宏来启动 SQL Express 安装程序吗？如果是这样，我将如何去做？如果没有，是否有人对我如何使这项工作有任何建议？

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T02:03:08.923

MSI 文件构建完成后，构建后事件会立即在您的计算机上运行。它将在 Visual Studio 完成构建 MSI 后立即运行代码。当最终用户安装应用程序时，它不会运行。

要让安装程序在最终用户安装应用程序后运行代码，请使用[自定义操作](http://msdn.microsoft.com/en-us/library/d9k65z2d%28v=vs.100%29.aspx)。

# java - 巧妙的方法将整数从 100 限制到 60 的时间值？（例如每分钟 60 秒）

> ID：12878609
> 
> 赞同：1
> 
> 时间：2012-10-14T01:43:17.713
> 
> 标签：java

我需要以整数形式存储时间值，格式为`HHMMSS`. 此时间值每秒递增（基本上是自定义时钟）。但是，由于整数自然是从 10 开始的，所以我必须实现一个大而繁琐的逻辑，提取每个数字并检查每分钟 60 秒、每小时 60 分钟和每天 24 小时。我想知道是否有一些聪明的方法可以在没有大量 if/else if 块的情况下做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T01:51:39.160

您可以使用[模数运算符](http://en.wikipedia.org/wiki/Modulo_operation)来挑选单个秒计数器的每个组件：

```
int totalSeconds;
...
int seconds = totalSeconds % 60;
int minutes = (totalSeconds / 60) % 60;
int hours = (totalSeconds / 3600); 
```

然后你可以只增加一个秒计数器并提取每个组件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T01:48:34.117

我的建议是实现一个 CustomClock 类，它可能看起来像：

```
public class CustomClock {
    private int hour;
    private int minute;
    private int second;

    public CustomClock(int hour, int minute, int second) {
        this.hour = hour;
        // ...
    }

    public void increment() {
        second = second + 1)%60;
        if (second == 0) minute = (minute + 1)%60;
        if (minute == 0) hour = (hour + 1)%24;
    }
} 
```

因此利用 mod 运算符 (%) 来计算任意基数。

# java - 使用相关表中的 FK 列值更新表

> ID：12878610
> 
> 赞同：0
> 
> 时间：2012-10-14T01:43:27.603
> 
> 标签：java, hibernate, sql-update, database-relations

使用休眠实体。DB中有实体`Address`和`Room`适当的表。
`Address`可以有多个`Room`s。

两个表都有`address_Id`并且`customerEmailAddress`
这些列`FK`在`Room`表中，即对`Address`表的引用。

DB中已经有`Address`记录。
需要将几个房间添加到`this`地址。

`Address`如何使用和之间的注释组织 Hibernate 关系`Room`，以便使用来自 Address:和`Room`的适当属性更新表
`address_Id``customerEmailAddress`

Java 部分如下所示：

```
 Room room = new Room();
    Address addr  = someService.getAddressFromSession();
    room.add(addr);
    entityManager.persist(room);
    Room room2 = new Room();
    room2.add(addr);
    entityManager.persist(room2); 
```

DB 结果（房间表）应如下所示：
**id** || **地址ID** || **客户**
电子邮件地址 1 || 3 || mail3@a.com
2 || 3 || mail3@a.com

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T04:39:45.580

您还没有提到两个表的主键。假设两个表都有自己的主键，我认为您可以使用组件模型在对象`Address`和对象之间完成标准映射，如下所示：`Room`

1.  地图`address_id`和`customerEmailAddress`作为一个**组件**。请参阅此处的组件映射文档 - [**Hibernate Component Mapping**](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/components.html#components-compositeid)。

2.  `rooms`使用上面定义的组件添加`Address`和`One-To-Many`关系并设置`cascade`为`All`.

3.  使用上面定义的组件添加`address`。`Room``Many-To-One`

4.  如下定义一种`addRoom`方法`Address`（概念上）：

    ```
     public void addRoom(Room room){
           if(this.rooms == null){
               this.rooms = new ArrayList<Room>();
           }
           room.setAddress(this);
           this.rooms.add(room);
      } 
    ```

5.  现在你可以简单地工作了`Address`。要保存`room`，添加`room`到`address`并保存地址。

希望这可以帮助！

# javascript - 使用双与号“&&”进行赋值

> ID：12878612
> 
> 赞同：52
> 
> 时间：2012-10-14T01:43:39.923
> 
> 标签：javascript

我刚刚看到有人使用这段代码：

```
ctx = canvas.getContext && canvas.getContext('2d'); 
```

双＆符号在这种情况下如何工作？它不只是将“true”分配给 ctx 变量吗？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-10-14T01:52:28.560

这是在调用函数之前确保函数存在的常用方法。

它是这样工作的（来自[developer.mozilla.com](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Logical_Operators)）：

> `expr1 && expr2`返回`expr1`是否可以转换为`false`; 否则，返回`expr2`。因此，当与布尔值一起使用时，如果两个操作数都是;则`&&`返回。否则，返回。`true``true``false`

换句话说，除非必须，否则 Javascript 不会将操作数强制为布尔值。

`4 && 5`返回 5，不正确。

在您的情况下，如果第一个表达式是`undefined`（可转换为 false），那么`ctx`将为 false，并且第二个表达式不会被评估。如果第一个表达式是一个函数（不能转换为`false`），那么 Javascript 会计算第二个表达式，并将它的值赋给`ctx`变量。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-10-14T01:46:59.243

如果实际上是一个函数，它将分配`canvas.getContext('2d')`to的返回值。`ctx``canvas.getContext`

左边的部分只是为了避免错误。它确保在尝试调用之前`canvas`具有属性。这样，如果函数不存在，代码将不会调用。如果它没有先检查并在函数不存在时调用，则会将错误记录到控制台并停止执行。`getContext``getContext()``canvas.getContext()`

# python - Python：无法识别 Pip 命令

> ID：12878615
> 
> 赞同：20
> 
> 时间：2012-10-14T01:44:12.340
> 
> 标签：python, python-2.7, pip

这是我截取的截图。

![在此处输入图像描述](../Images/d47d778e39c33f416770b648fd44f6d7.png)

当我尝试`pip`在命令提示符下使用时，我收到以下错误消息： `pip`不被识别为内部或外部命令、可运行程序或批处理文件。

我已经检查了这个线程：[如何在 Windows 上安装 pip？](https://stackoverflow.com/questions/4750806/how-to-install-pip-on-windows)

我所能找到的只是我必须添加`"C:\PythonX\Scripts"`到我的类路径中，其中`X`代表 python 版本。

正如您在我的屏幕截图中看到的那样，我已经有了这条路径。我已经尝试重新启动计算机，但没有奏效，oO 屏幕截图还显示了我的`C:\Python27\Scripts`文件夹。

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-14T12:42:48.840

在最后一个路径条目之前，前一个分号之后有一个空格，这会导致问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-10-28T15:17:24.740

去`C:\Python27\Scripts`

现在选择网址栏并将整个内容替换为`cmd`

这样你就可以直接到达命令提示符中 pip 可用的目录

现在输入 `pip install Django==1.8.5` 它将下载并安装 Djanog

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-05-16T00:03:52.223

我所做的是例如在命令提示符或 Windows 中的 cmd 中：

```
py -m pip install pygame 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-02-21T10:19:35.000

我有同样的问题，但*在*“脚本”文件夹中输入你的命令修复了它！

换句话说：

1.  打开命令提示符（右键单击 Windows 开始菜单并单击“命令提示符（管理员）”
2.  使用“cd”命令将目录更改为安装 python 的位置，但转到您的脚本文件夹（对我来说，这是`cd C:\Program Files\PythonXX\Scripts`XX 是 Python 的版本号的位置）
3.  进入“脚本”文件夹后，键入`pip install cython`并按 Enter

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-22T08:18:08.900

1）以管理员身份打开cmd

2）输入：cd c:\python27\scripts（转到python并右键单击文件夹。比复制到路径）

3) 按回车

4）点安装

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-24T15:43:14.563

1.  检查您是否正确安装了python。

2.  下一个安装 pip 使用

a)[将 get-pip.py](https://bootstrap.pypa.io/get-pip.py)下载到您计算机上的文件夹中。

b) 打开命令提示符并导航到包含 get-pip.py 的文件夹。

c) 运行以下命令：

```
python get-pip.py 
```

现在已经安装了 Pip！

3.  复制环境变量中可执行文件的路径。它是安装 python 的脚本文件夹路径。像 C:Programs\Python\Python35-32\Scripts 或 C:\Users(username)\AppData\Local\Programs**\Python\Python35-32\Scripts**

4.  重新启动命令提示符并完成

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-04-11T07:55:47.803

1) 浏览这里 - `C:\Python27\Scripts`
2) 打开 cmd 窗口/终端 (shift+'右键单击')
3) 输入`pip install django`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-08-10T09:08:31.373

当我添加时，它开始为我工作；在 .PY 之后的 PATHEXT 中

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-04-29T15:04:42.160

转到您的 Python 脚本路径，复制路径，转到 CMD 并键入 cd “粘贴您复制的路径”。

键入 pip --version

您将看到系统正在运行的 pip 版本。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-04-04T04:17:40.190

1.  将“你的 python 路径”\Scripts 添加到 PATH 变量中。请参阅[如何设置路径变量](https://helpdeskgeek.com/windows-10/add-windows-path-environment-variable/)

2.  不要忘记重新启动命令提示符。

现在 pip 将在任何路径上工作。

# java - 在不使用主键的情况下检查 uniq 约束

> ID：12878619
> 
> 赞同：1
> 
> 时间：2012-10-14T01:45:45.667
> 
> 标签：java, hibernate

我只在注释中使用休眠。我的桌子看起来像这样：

```
@Entity
@Table(name = "NetworkType",
    uniqueConstraints = {@UniqueConstraint(columnNames = {"network_id", "type"})})

public class NetworkType implements Serializable {

    @Id
    private long id;

    @Column(name = "network_id", nullable = false)
    private long networkId;

    @Column(name = "type", nullable = false)
    private String type;
    ... 
```

目前，当我两次编写相同的 NetworkType 时，由于 UniqueConstraint （这是预期的）而引发异常。

我的想法是在检查之前先阅读该项目。问题是，我的主键是 Id，因为其他表引用了这个表，所以我需要它。

**为“network_id”和“type”查询项目以验证组合不存在的最佳方法是什么？**

我知道我可以手动使用 Query 来做到这一点，但是有没有更多的 Hibernate-y 方式来做到这一点？

**一般来说，在不使用 PK 的情况下“获取”对象的正确方法是什么？**标准或查询是最好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T04:07:40.363

`@UniqueConstraint`主要**由数据库模式生成工具**用于创建数据库模式。`@UniqueConstraint`如果使用，它们将生成具有定义的唯一约束中提到的列的表。

`@UniqueConstraint`在数据操作期间没有任何影响/使用。

如果您希望在`network_id`and`type`列上实现唯一的约束行为并且您的架构已经创建，**请更新您的数据库架构以添加`unique constraint`on`network_id`和`type`列。**如下：

```
 ALTER TABLE NetworkType
   ADD CONSTRAINT uc_network_id_type UNIQUE (network_id, type) 
```

希望这可以帮助！

# sql - 具有自定义日期范围的 SQL 查询

> ID：12878622
> 
> 赞同：3
> 
> 时间：2012-10-14T01:46:43.493
> 
> 标签：sql

我有一个自定义 SQL 查询，它从“上个月”返回信息我现在需要将日期范围从上个月更改为....上个月的 19 日到本月的 20 日。

这就是显示“上个月”的工作内容任何人都可以帮助如何修改它以显示所需的日期范围。

```
SELECT  TOP 10000 CONVERT(DateTime,
LTRIM(MONTH(DateTime)) + '/01/' + LTRIM(YEAR(DateTime)),
101) AS SummaryMonth,
Nodes.Caption AS NodeName,
Interfaces.Caption AS Interface_Caption,
SUM(InterfaceTraffic.In_TotalBytes) AS SUM_of_Total_Bytes_Received,
SUM(InterfaceTraffic.Out_TotalBytes) AS SUM_of_Total_Bytes_Transmitted,
SUM((NullIf(In_TotalBytes,-2)+NullIf(Out_TotalBytes,-2))) AS SUM_of_TotalBytesRecvXmit,
Interfaces.Gig_Limit AS Gig_Limit,
SUM((NullIf(In_TotalBytes,-2)+NullIf(Out_TotalBytes,-2))) - (Interfaces.Gig_Limit *    1073741824)  AS Diff

FROM 
(Nodes INNER JOIN Interfaces ON (Nodes.NodeID = Interfaces.NodeID))  INNER JOIN        InterfaceTraffic ON (Interfaces.InterfaceID = InterfaceTraffic.InterfaceID AND InterfaceTraffic.NodeID = Nodes.NodeID)

WHERE 
( DateTime >= dateadd(mm,datediff(mm,0,getdate())-1,0) AND DateTime
<dateadd(mm,datediff(mm,0,getdate()),0) )
 AND  
(
  (Interfaces.Caption LIKE '%SM%') OR 
  (Interfaces.Caption LIKE '%County Snow%')
)

GROUP BY CONVERT(DateTime, LTRIM(MONTH(DateTime)) + '/01/' + LTRIM(YEAR(DateTime)),   101), 
Nodes.Caption, Interfaces.Caption, Interfaces.Gig_Limit

Having SUM((NullIf(In_TotalBytes,-2)+NullIf(Out_TotalBytes,-2))) - (Interfaces.Gig_Limit * 1073741824) > 0

ORDER BY SummaryMonth ASC, 6 DESC 
```

谢谢戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T01:52:18.783

```
WHERE (DateTime >= 18+dateadd(mm,datediff(mm,0,getdate())-1,0)
  AND  DateTime <  19+dateadd(mm,datediff(mm,0,getdate()),0)) 
```

我从字面上理解，即`19th of LAST to 20th of CURRENT`，尽管从倒数第 20 到第 19 可能更有意义。不过，调整数字很容易。

# python - 在潜在高负载下的 Web 应用程序中，python 中的类变量和方法的用例是什么？

> ID：12878631
> 
> 赞同：0
> 
> 时间：2012-10-14T01:48:26.490
> 
> 标签：python

我读到不建议在 Web 应用程序中创建静态方法/变量，因为所有线程都必须使用相同的方法/变量。在这个领域里，他们有什么用例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T01:51:22.107

当然。应该被视为常量的值。没有必要用这些值初始化每个实例，因为它们永远不会改变。

# scala - 为什么添加括号会改变这个 Scala 表达式的结果？

> ID：12878634
> 
> 赞同：8
> 
> 时间：2012-10-14T01:49:45.707
> 
> 标签：scala

我正在将一些 C 代码移植到 Scala，它广泛使用了浮点运算。我基于 C 版本的复制/粘贴在 Scala 中编写了以下代码：

```
val complimentaryTerms = 2640.96e-6 * sin (f5)
          +  63.52e-6 * sin (2.0 * f5)
          +  11.75e-6 * sin (2.0 * f3 - 2.0 * f4 + 3.0 * f5)
          +  11.21e-6 * sin (2.0 * f3 - 2.0 * f4 +       f5)
          -  4.55e-6 * sin (2.0 * f3 - 2.0 * f4 + 2.0 * f5)
          +  2.02e-6 * sin (2.0 * f3            + 3.0 * f5)
          +  1.98e-6 * sin (2.0 * f3            +       f5)
          -  1.72e-6 * sin (3.0 * f5)
          -  0.87e-6 * t * sin (f5) 
```

此计算的结果与 C 版本产生的结果略有不同。但是，如果我将表达式括在括号中，如下所示：

```
val complimentaryTerms = (2640.96e-6 * sin (f5)
          +  63.52e-6 * sin (2.0 * f5)
          +  11.75e-6 * sin (2.0 * f3 - 2.0 * f4 + 3.0 * f5)
          +  11.21e-6 * sin (2.0 * f3 - 2.0 * f4 +       f5)
          -  4.55e-6 * sin (2.0 * f3 - 2.0 * f4 + 2.0 * f5)
          +  2.02e-6 * sin (2.0 * f3            + 3.0 * f5)
          +  1.98e-6 * sin (2.0 * f3            +       f5)
          -  1.72e-6 * sin (3.0 * f5)
          -  0.87e-6 * t * sin (f5)) 
```

结果值与 C 版本完全匹配。当有括号与没有括号时，操作顺序似乎必须不同，但我不明白为什么会有任何区别。知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-14T02:22:11.267

这是因为分号推断。示例（`//;`- 推断分号）：

```
val x = 1 //;
        + 1 //;
println(x) // 1 
```

并带括号：

```
val x = (1
        + 1) //;
println(x) // 2 
```

或带尾“+”：

```
val x = 1 +
        1 //;
println(x) // 2 
```

> **分号推断规则**
> 除非以下条件之一为真，否则行尾被视为分号：
> 
> 1.  有问题的行以一个作为语句结尾不合法的单词结尾，例如句点或中缀运算符。
>     
>     
> 2.  下一行以不能启动语句的单词开头。
>     
>     
> 3.  该行在括号 (...) 或括号 [...] 内结束，因为它们无论如何都不能包含多个语句。

# wordpress - 如何从 github 克隆 WordPress 主题

> ID：12878646
> 
> 赞同：0
> 
> 时间：2012-10-14T01:51:44.447
> 
> 标签：wordpress, git, github, wordpress-theming

我一直在开发网站上开发一个 wordpress 主题，并且一直在将其推送到 github。它现在已准备好部署到我的实时站点，但我不知道该怎么做。

到目前为止，我尝试过的（没有用）是`/wp-content/themes/my-theme/`在我的实时站点上创建一个空目录，然后我`cd`进入了它。然后我使用`git clone git@github.com:path/to/my-theme.git`but 在 my-theme/ 目录中创建另一个目录，其中包含所有主题文件。为了澄清，现在创建：

`/wp-content/themes/my-theme/my-theme/[all theme files here]`

但我只想将 github 存储库中的文件直接放入我创建的原始空 my-theme 目录中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T01:53:25.563

try `git clone <repo> .`- 您可以将目录指定为最后一个参数。

# gradient - 底部渐变边框

> ID：12878649
> 
> 赞同：4
> 
> 时间：2012-10-14T01:52:45.780
> 
> 标签：gradient, css

根据[CSS Tricks](http://css-tricks.com/examples/GradientBorder/)，以下 CSS 语法将导致左边框渐变。

```
.left-to-right {
border-width:3px 0 3px 3px;
-webkit-border-image: 
    -webkit-gradient(linear, 100% 0, 0 0, from(black), to(rgba(0, 0, 0, 0))) 1 100%;
-webkit-border-image: 
    -webkit-linear-gradient(right, black, rgba(0, 0, 0, 0)) 1 100%;
-o-border-image:
         -o-linear-gradient(right, black, rgba(0, 0, 0, 0)) 1 100%;
-moz-border-image:
       -moz-linear-gradient(right, black, rgba(0, 0, 0, 0)) 1 100%;   
} 
```

我正在尝试获取元素底部的边框渐变。

我试着改变这个

```
 border-width:3px 0 3px 3px; 
```

对此

```
border-width:0 0 3px 0; 
```

这个

```
border-width:0 3px 3px 3px; 
```

而且它不起作用，任何人都可以帮助我让底部边框正常工作吗？

*您可能需要一个 WebKit 浏览器来执行此操作。*

这将是一个可供使用的小提琴；[http://jsfiddle.net/HsTcf/](http://jsfiddle.net/HsTcf/)

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-14T05:38:21.070

```
border-width: 0 0 3px 0; 
```

是正确的。

但是，需要进行以下更改：

```
... -gradient(right, ... 
```

需要改为

```
... -gradient(top, ... 
```

和`1 100%;`到`100% 1;`。

演示：[jsfiddle.net/HsTcf/3](http://jsfiddle.net/HsTcf/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-26T22:04:39.380

这是另一种适用于底部边框的方法。这是来自站点示例的完整类声明。

```
#header_bg {
    position: fixed;
    top: 0px;
    width: 100%;
    height: 121px;
    top: 0px;
    background-color: #fff;
    box-shadow: 0 0 7px rgba(0, 0, 0, 0.1) !important;
    z-index: 10;
}
```

```
<div id="header_bg"></div>
```

我在上面假设您正在尝试制作一个固定的标题。最重要的部分当然是 box-shadow 属性。这也适用于大多数现代浏览器。

# haskell - 一些数据的 Haskell 数据序列化实现一个通用类型类

> ID：12878651
> 
> 赞同：0
> 
> 时间：2012-10-14T01:53:04.657
> 
> 标签：haskell, serialization, typeclass

让我们从以下开始

```
data A = A String deriving Show
data B = B String deriving Show

class X a where
    spooge :: a -> Q

[ Some implementations of X for A and B ] 
```

现在假设我们有 show 和 read 的自定义实现，分别命名为 show' 和 read'，它们利用 Show 作为序列化机制。我希望 show' 和 read' 有类型

```
show' :: X a => a -> String
read' :: X a => String -> a 
```

所以我可以做类似的事情

```
f :: String -> [Q]
f d = map (\x -> spooge $ read' x) d 
```

数据可能在哪里

```
[show' (A "foo"), show' (B "bar")] 
```

总之，我想序列化共享一个公共类型类的各种类型的东西，这样我就可以在反序列化的东西上自动调用它们的单独实现。

现在，我意识到您可以编写一些模板 haskell 来生成包装器类型，例如

```
data XWrap = AWrap A | BWrap B deriving (Show) 
```

并序列化包装的类型，这将保证类型信息将与它一起存储，并且我们至少能够让自己恢复 XWrap ......但是有没有更好的方法使用 haskell ninja-ery？

编辑

好的，我需要更具体的应用程序。这是一个 API。用户将按照他们认为合适的方式定义他们的 As、Bs 和 fs。我不希望他们破解其余代码来更新他们的 XWraps、开关或任何东西。我最愿意妥协的是以某种格式列出所有 A、B 等的列表。为什么？

这是应用程序。A 是“从 FTP 服务器下载文件”。B 是“从 flac 转换为 mp3”。A 包含用户名、密码、端口等信息。B 包含文件路径信息。可能有很多 As 和 B。数百个。尽可能多的人愿意编译到程序中。二只是一个例子。A 和 B 是 Xs，Xs 应称为“票”。Q 是 IO()。Spooge 是 runTicket。我想将票据读入它们的相关数据类型，然后编写通用代码，该代码将在从磁盘上的内容中读取的内容上运行票证。在某些时候，我必须将类型信息塞入序列化数据中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T01:59:08.883

如果您真正想要的是异构列表，请使用存在类型。如果要序列化，请使用 Cereal + ByteString。如果您想要动态类型（我认为您的实际目标是），请使用 Data.Dynamic。如果这些都不是您想要的，或者您希望我展开，请按井号键。

根据您的编辑，我看不出有任何理由无法使用 thunk 列表。以什么方式`IO ()`不能代表“从 FTP 服务器下载文件”和“从 flac 转换为 MP3”的操作？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-14T03:10:34.757

我首先想向我们所有快乐的听众强调这`XWrap` *是*一个非常好的方法，而且很多时候你可以自己编写一个比使用 Template Haskell 更快地编写它。

你说你可以取回“至少一个`XWrap`”，好像这意味着你不能恢复类型`A`和`B`从`XWrap`或者你不能在它们上使用你的类型类。不对！你甚至可以定义

```
separateAB :: [XWrap] -> ([A],[B]) 
```

如果您不想将它们混合在一起，则应该将它们单独序列化！

这比 haskell ninja-ery 更好；也许您不需要处理任意实例，也许只是您制作的那些。

* * *

你*真的*需要你原来的类型吗？如果您想使用存在类型，因为您只想`spooge`反序列化数据，为什么不序列化`Q`自身，或者有一些您序列化的中间数据类型`PoisedToSpooge`，它可以反序列化为您提供真正*良好的*欺骗所需的所有数据。为什么不让它成为一个实例`X`呢？

您可以向您的`X`类添加一个转换为`PoisedToSpooge`.

你可以称之为有趣的东西`toPoisedToSpooge`，它很好地从舌头上跳下来，你不觉得吗？:)

无论如何，这将消除您的类型系统复杂性，同时解决烦人的模棱两可的类型

```
f d = map (\x -> spooge $ read' x) d  -- oops, the type of read' x depends on the String 
```

您可以替换`read'`为

```
stringToPoisedToSpoogeToDeserialise :: String -> PoisedToSpooge -- use to deserialise 
```

并定义

```
f d = map (\x -> spooge $ stringToPoisedToSpoogeToDeserialise x) -- no ambiguous type 
```

我们当然可以更简洁地写成

```
f = map (spooge.stringToPoisedToSpoogeToDeserialise) 
```

尽管我认识到这里建议使您的代码更简洁的讽刺意味。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T22:10:19.177

我假设你想用反序列化的门票做更多的事情而不是运行它们，因为如果不是你也可以要求用户提供一堆`String -> IO()` 或类似的东西，根本不需要任何聪明的东西。

如果是这样，万岁！我不经常觉得*推荐*这样的高级语言功能是合适的。

```
class Ticketable a where
    show' :: a -> String
    read' :: String -> Maybe a
    runTicket :: a -> IO ()
    -- other useful things to do with tickets 
```

这一切都取决于`read'`. `read' :: Ticket a => String -> a`不是很有用，因为它对无效数据唯一能做的就是崩溃。如果我们将类型更改`read' :: Ticket a => String -> Maybe a`为此*可以*允许我们从磁盘读取并尝试所有可能性或完全失败。（或者，您可以使用解析器：`parse :: Ticket a => String -> Maybe (a,String)`。）

让我们使用 GADT 来为我们提供 ExistentialQuantification 而不使用语法和更好的错误消息：

```
{-# LANGUAGE GADTs #-}

data Ticket where
   MkTicket :: Ticketable a => a -> Ticket

showT :: Ticket -> String
showT (MkTicket a) = show' a

runT :: Ticket -> IO()
runT (MkTicket a) = runTicket a 
```

注意 MkTicket 构造器是如何`Ticketable a`免费提供上下文的！GADT 很棒。

制作 Ticket 和 Ticketable 的实例会很好，但这不起作用，因为其中`a`隐藏了一个模棱两可的类型。让我们使用读取 Ticketable 类型的函数并让它们读取门票。

```
ticketize :: Ticketable a => (String -> Maybe a) -> (String -> Maybe Ticket)
ticketize = ((.).fmap) MkTicket  -- a little pointfree fun 
```

您可以使用一些不寻常的标记字符串，例如 `"\n-+-+-+-+-+-Ticket-+-+-+-Border-+-+-+-+-+-+-+-\n"`分隔您的序列化数据，或者更好地使用单独的文件。对于这个例子，我将只使用“\n”作为分隔符。

```
readTickets :: [String -> Maybe Ticket] -> String -> [Maybe Ticket]
readTickets readers xs = map (foldr orelse (const Nothing) readers) (lines xs) 

orelse :: (a -> Maybe b) -> (a -> Maybe b) -> (a -> Maybe b)
(f `orelse` g) x = case f x of
     Nothing -> g x
     just_y  -> just_y 
```

现在让我们摆脱`Just`s 并忽略`Nothing`s：

```
runAll :: [String -> Maybe Ticket] -> String -> IO ()
runAll ps xs = mapM_ runT . catMaybes $ readTickets ps xs 
```

让我们制作一张简单的票，它只打印某个目录的内容

```
newtype Dir = Dir {unDir :: FilePath} deriving Show
readDir xs = let (front,back) = splitAt 4 xs in
        if front == "dir:" then Just $ Dir back else Nothing

instance Ticketable Dir where
    show' (Dir p) = "dir:"++show p
    read' = readDir
    runTicket (Dir p) = doesDirectoryExist p >>= flip when 
         (getDirectoryContents >=> mapM_ putStrLn $ p) 
```

还有一张更微不足道的票

```
data HelloWorld = HelloWorld deriving Show
readHW "HelloWorld" = Just HelloWorld
readHW _ = Nothing
instance Ticketable HelloWorld where
    show' HelloWorld = "HelloWorld"
    read' = readHW
    runTicket HelloWorld = putStrLn "Hello World!" 
```

然后把它们放在一起：

```
myreaders = [ticketize readDir,ticketize readHW]

main = runAll myreaders $ unlines ["HelloWorld",".","HelloWorld","..",",HelloWorld"] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T03:32:08.817

只需使用`Either`. 您的用户甚至不必自己包装它。你有你的反序列化器`Either`为你包装它。我不确切知道您的序列化协议是什么，但我假设您有某种方法来检测哪种请求，以下示例假设第一个字节区分两个请求：

```
deserializeRequest :: IO (Either A B)
deserializeRequest = do
    byte <- get1stByte
    case byte of
        0 -> do
            ...
            return $ Left $ A <A's fields>
        1 -> do
            ...
            return $ Right $ B <B's fields> 
```

然后你甚至不需要 type-class `spooge`。只需使其成为以下功能`Either A B`：

```
spooge :: Either A B -> Q 
```

# iphone - 向 MKMapView 添加未知数量的注释

> ID：12878652
> 
> 赞同：0
> 
> 时间：2012-10-14T01:53:24.363
> 
> 标签：iphone, ios, mkmapview, mkannotation, abaddressbook

所以我正在使用地图为每个在联系人中有地址的人添加积分，我很难弄清楚如何为未知数量的联系人设置它。现在我设置它的方式，它只是为列表中的最后一个联系人添加一个图钉。这是一些代码：地址是从地址属性设置的字符串。

```
if(addressProperty != nil)
       {
           [location geocodeAddressString:address completionHandler:^(NSArray *placemarks, NSError *error) {
            NSMutableArray *array = [[NSMutableArray alloc]init];

            for(int a = 0; a < [placemarks count]; a++)
            {

               self.placeMarkData = [placemarks objectAtIndex:a];
                [point setCoordinate: self.placeMarkData.location.coordinate];

                [array addObject:point];
                pin.animatesDrop = YES;
                point.title = address;

                [map addAnnotations:array];
            }
                      }];
    } 
```

因此，当我运行应用程序时，我可以看到在每个位置都设置了 pin 并移动到下一个位置，直到它在列表中的最后一个位置结束。如何为每个添加一个点？我确信这是一个简单的解决方案，但它现在正在躲避我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T09:25:19.643

所有这些都必须有一个循环才能通过所有联系人。是`location`CLGeocoder 吗？您不应该在同一个地理编码器上设置两个 geocodeAddressString 函数，您需要为您所做的每个地理编码初始化一个新函数（除非您确定之前的异步地理编码已经完成）。

其他四个问题：

*   `point`变量每次都是相同的。当您更改坐标时，该点会出现在地图上的不同位置，但它是同一个位置，因此您在任何时候都不会在地图上看到更多。
*   因为它是异步运行的，所以您应该在块外写入和读取变量。现在两个地理编码可以同时得到响应，一个设置 self.placeMarkData 就像另一个正在从中读取 location.coordinate 一样。
*   是`pin`用来做什么的？
*   `array`在填满地图之前，不要费心添加地图。如果您希望尽快将这些点显示在屏幕上，则将它们单独添加到地图中。添加整个数组，然后在数组中添加另一个东西并再次添加整个数组是一种浪费。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T03:34:45.687

似乎是您代码中的一个简单错误。您可以尝试将`[map addAnnotations:array];`行移到 for 循环之外吗？

# c++ - 浮动总和不准确

> ID：12878655
> 
> 赞同：-1
> 
> 时间：2012-10-14T01:53:57.177
> 
> 标签：c++, floating-point

考虑以下 C++ 程序：

```
#include <iostream>
using std::cout;
using std::endl;

int main () {
   float x = 0.0001;
   float y = 0;
   for (int i=0; i < 10000; i++) {
      y += x;
   }
   cout << y << endl;
   return 0;
} 
```

编译并运行该程序，然后回答以下问题： 该程序的实际行为与其预期行为有何不同？

***为什么没有看到预期的行为？***

在确保程序语义保持不变的同时，您将对该程序进行哪些更改以确保预期和实际行为匹配？

以上是我的任务。我知道我应该自己做作业，但我被困住了。

*   对于 a) 部分，我只是说这两个数字不同。

*   对于 c) 部分，我将浮点数设为双倍。（我认为语义保持不变）

*   对于 b) 部分，我知道这被称为灾难性取消，但教授可能希望看到更多，我不知道还能说什么。有人能帮我吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T11:02:17.437

我想这个程序声称的“预期行为”是将 .0001 添加到初始化为零的总和 10,000 次，所有算术都是数学运算，产生 1。实际行为是将十进制数字“.0001”转换为双精度（可能是 IEEE-754 64 位二进制浮点数），然后将该值转换为浮点数（可能是 IEEE-754 32 位二进制浮点数），然后将该浮点数相加 10,000 次，使用每次浮点运算。因此，在将数字转换为双精度数、将双精度数转换为浮点数以及每次加法时，实际行为都存在潜在的舍入误差。

在这种情况下避免错误的一种方法是使用整数算术。我们可以设置为 1，而不是设置`float x`为 .0001 `int x`。类似地，`y`它将是一个 int，并且我们将使用所有整数运算，直到我们完成循环。获得最终总和后，我们会将其转换为浮点数。然后我们必须调整我们使用的允许我们使用整数算术的比例。由于我们添加的是 1 而不是 .0001，因此我们必须将最终结果除以`10000.f`进行调整。（这种技术不会在所有情况下都完全避免错误，还有其他技术可以减少其他情况下的错误。）

没有灾难性的取消，因为没有取消。当两个数相加或相减以产生较小的结果时，就会发生取消（因此，当将两个符号相反的数字相加时，例如将 +8 和 -6 相加得到 +2，或者将两个相同符号的数字相减时，例如相减-6 从 +8 到 +2)。当结果远小于原来的两个数字时，就会发生灾难性的取消。*在这种情况下，我们正在使用的值变得更小，但原始数字中的任何错误通常保持相同的大小，因此相对而言*，错误要大得多*到我们正在使用的价值。例如，假设我们应该从 8.01 中减去 8 并得到 0.01，但是由于一个小错误，我们用 7.99 代替了 8。从 8.01 中减去 7.99 得到 0.02。这个结果 0.02 是期望结果 0.01 的两倍，因此*相对误差*很大。*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T04:31:23.180

该程序的实际行为与其预期行为有何不同？-该程序的实际行为是将 0.0001 的 IEEE 表示加 10000 次；IEEE 表示 0.0001 != 实际 0.0001

为什么没有看到预期的行为？- 我们假设 0.0001 准确地表示为 0.0001，但实际上并非如此，因为 IEEE 浮点数不能准确地表示 0.0001，因为必须用 base2 而不是 base10 表示所有浮点数。

在确保程序语义保持不变的同时，您将对该程序进行哪些更改以确保预期和实际行为匹配？- 在这种情况下，将 float 更改为 double 将起作用，因为 double 为您提供比 float 更高的小数精度。- 替代解决方案是保持浮动，而不是求和，而是分配 y = 10000*x（这会产生更少的错误，并且在您希望避免舍入和近似错误时更好）*

# vb.net - 在 vb.net 中被按下的键？

> ID：12878656
> 
> 赞同：1
> 
> 时间：2012-10-14T01:54:05.017
> 
> 标签：vb.net, game-physics, keydown

我正在为课堂编写游戏，玩家所做的是使用“wasd”从追逐的鲨鱼中游走。我的运动代码是

```
Private Sub Form1_KeyDown(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyEventArgs) Handles Me.KeyDown
    Select Case e.KeyCode

        Case Keys.W
            If picSwimmer.Location.Y > -5 Then
                Loc = New Point(picSwimmer.Location.X, picSwimmer.Location.Y - 15)
                picSwimmer.Location = Loc
            End If
        Case Keys.S
            End If
            If picSwimmer.Location.Y < Me.Height Then
                Loc = New Point(picSwimmer.Location.X, picSwimmer.Location.Y + 15)
                picSwimmer.Location = Loc
            End If 
```

（我对 a&d 也有相同的设置）。我的问题是，当您按住其中一个“wasd”键时，图像会稍微移动然后停止，然后在大约一秒钟后开始流畅地移动。我认为这是由于 VB 需要花费大量时间来识别一个键被按下，而不是被单击一次。我将如何做到这一点，以便 VB 将注册键从一开始就被按住，或者缩短识别它被按住的事实所需的时间？或者任何可以使按键一按下就使运动平稳的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T08:25:56.377

您需要的是`GetAsyncKeyState`一个不断运行的计时器或线程，它查询所有键并触发您需要的功能（一个“步骤”，您必须与计时器的间隔对齐，只要按住键）。这也是您可以同时处理更多密钥的唯一方法（我知道）。
而且它独立于焦点（所以也许你应该检查正确的元素是否有焦点）。

基本：

```
Public Declare Function GetAsyncKeyState Lib "user32.dll" (ByVal vKey As Int32) As UShort
Private Sub Timer1_Tick(sender As System.Object, e As System.EventArgs) Handles Timer1.Tick
    If GetAsyncKeyState(Convert.ToInt32(Keys.D)) Then Label1.Text = "RIGHT" Else Label1.Text = "-"
    If GetAsyncKeyState(Convert.ToInt32(Keys.W)) Then Label2.Text = "UP" Else Label2.Text = "-"
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-10T01:37:21.097

在按住另一个键的同时按下第二个键的情况下使用`GetAsyncKeyState`会好得多。

**例如：**

假设一个玩家是：

*   按住*向上键移动他的坦克*
*   *并按空格键*射击

 *如果您使用了该`Keydown`事件，一旦玩家按下*空格键*，坦克将停止移动。

要再次开始移动，他必须在每次射击后释放箭头并重新按下*向上键。*

```
Public Declare Function GetAsyncKeyState Lib "user32.dll" (ByVal vKey As Int32) As UShort
Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick

If GetAsyncKeyState(Convert.ToInt32(Keys.Up)) Then
    ''put here codes for moving the tank
End If

If GetAsyncKeyState(Convert.ToInt32(Keys.Space)) Then
    ''PUT HERE CODES FOR TANK FIRE
End If

End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T02:08:13.983

它不是 Visual Basic 设置，它是 Windows 设置，`Keybaord Properties`您需要缩短`Repeat Delay Time`它会影响计算机上的所有应用程序。

![在此处输入图像描述](../Images/a49255c9a9363ccf16b4f94210288512.png)*

# java - 当我什么都不输入或按取消时无法跳出循环

> ID：12878657
> 
> 赞同：-1
> 
> 时间：2012-10-14T01:54:11.763
> 
> 标签：java

当我在输入中不输入任何内容或按取消时，我似乎无法跳出循环。有出路吗？

```
 While (last == '?'){
        input = (int)(Math.random()*2); 
        if (number == 1){
            answer = "Nice";
        }
        if (number == 2){
            answer = "Okay";
        }
        System.out.println("The answer: " + answer);
        input = JOptionPane.showInputDialog(null, "Ask a question. (Remember the?)");
        if (input != null && input.length() > 0){
            last = input.charAt(input.length() - 1);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T01:58:08.710

`last`必须在循环之外初始化，但是当您不输入任何内容或取消最后一个 if 语句评估为 false 时，因此`last`不会设置为新值，因此它将继续使用继续循环的前一个值。

在评估最后一个 if 语句之前，您应该重置`last`为 null 或空字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T02:00:03.323

问题是你的'break-the-loop'条件（`if input != null && input.length() > 0`）只`last`在它被评估为时分配一个新值`true`，但不输入任何内容会导致它评估为假，这意味着值`last`不变。

将以下内容添加到最后一个 if 块可能会修复它：

```
else {
    break;
} 
```

此外，键入不以问号结尾的内容应该会打破循环。

# python - 找到了url dispatch中favicon.ico的金字塔路由，但同时遍历没有找到

> ID：12878661
> 
> 赞同：2
> 
> 时间：2012-10-14T01:55:39.323
> 
> 标签：python, pyramid

我正在使用/favicon.ico 和 /robots.txt URL[的食谱说明并看到一些奇怪的东西。](http://docs.pylonsproject.org/projects/pyramid_cookbook/en/latest/static_assets/files.html#serving-a-single-file-from-the-root)我正在添加路线`add_route`：

```
def main(global_config, **settings):
    """ This function returns a Pyramid WSGI application.
    """
    # ....
    config = Configurator(settings=settings)
    config.add_static_view('public', 'public', cache_max_age=3600)
    config.add_route('favicon.ico', '/favicon.ico')
    config.add_route('robots.txt', '/robots.txt')
    config.add_route('home','/{id}')  #don't worry about this one
    config.scan()
    return config.make_wsgi_app() 
```

并像这样定义视图：

```
@view_config(name='favicon.ico')
def favicon_view(context, request):
    return _fi_response

@view_config(name='robots.txt')
def robotstxt_view(context, request):
    return _robots_response 
```

根据上述链接中的说明在何处创建`_fi_response`和创建。`_robots_response`可悲的是，当我转到我的一个页面时，没有 favicon 并且转到`localhost:6544/favicon.ico`，它会导致 404。奇怪的是，当我打开所有调试时，我看到了这个：

```
2012-10-13 21:38:50,437 DEBUG [trosted][Dummy-5] route matched for url http://localhost:6544/favicon.ico; route_name: 'favicon.ico', path_info: u'/favicon.ico', pattern: '/favicon.ico', matchdict: {}, predicates: ''
2012-10-13 21:38:50,438 DEBUG [trosted][Dummy-5] debug_notfound of url http://localhost:6544/favicon.ico; path_info: u'/favicon.ico', context: <pyramid.traversal.DefaultRootFactory instance at 0x102b6a7a0>, view_name: u'', subpath: (), traversed: (), root: <pyramid.traversal.DefaultRootFactory instance at 0x102b6a7a0>, vroot: <pyramid.traversal.DefaultRootFactory instance at 0x102b6a7a0>, vroot_path: () 
```

这让我认为网站图标是由一个进程而不是另一个进程找到的。想知道是否有人对我做错了什么有任何想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T05:32:07.683

所以问题是您添加了一个名为“favicon.ico”的路由，并且您没有将视图附加到该路由。因此，日志输出表明路由匹配。您`view_config`在遍历中使用了实际上匹配“名称”概念的“名称”参数。解决此问题的方法是使用“route_name”选项来`view_config`.

```
@view_config(route_name='favicon.ico')
def favicon_view(request):
    return _fi_response 
```

如果您的站点中没有包含`/{id}`所有其他 1 级深度 url 的包罗万象的路由，您可以删除 favicon 路由并让遍历使用“名称”参数处理它。

# mongodb - MongoDB 术语中的“属性”和“字段”到底有什么区别？

> ID：12878662
> 
> 赞同：1
> 
> 时间：2012-10-14T01:55:40.183
> 
> 标签：mongodb, attributes, field, terminology

我已经看到术语“属性”和“字段”可以互换使用，我想知道正确的用法是什么。到目前为止，似乎“字段”是存储在数据库对象中的内容，而“属性”是客户端代码（例如`find()`调用）中使用的键值对。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T04:35:52.793

MongoDB 文档包含键值对，其中每对可以互换地称为“字段”、“属性”或（不太常见但并非不准确）“属性”。

使用“字段”或“属性”可能是最好的。

# javascript - 请求相同功能的克隆行

> ID：12878663
> 
> 赞同：0
> 
> 时间：2012-10-14T01:55:52.083
> 
> 标签：javascript, jquery

> **可能重复：**
> [通过克隆的列表行调用相同的函数](https://stackoverflow.com/questions/12877232/call-same-function-by-a-cloned-list-row)

我正在尝试进行简单的计算。

我有以下运行：

[http://jsfiddle.net/vSyK6/41/](http://jsfiddle.net/vSyK6/41/)

基本上，它现在的工作方式是这样的：当您在下拉列表中选择一个选项时，它将根据所选选项显示内容。然后，当您再次选择相同的选项时，它会添加，基本上是克隆同一行。Now, when the second option is selected "Option2" it will display an empty textbox. 当您输入一个数字时，它将或应该调用我们进行基本计算的函数。该函数已在脚本中。

但是，当我们有两个空文本框时，它应该调用相同的计算函数，但分别计算并将其放在不同的 div 中。我们显示金额的 div# 称为“金额”

基本上，它应该像这样工作：

```
First Empty textbox -> 100 -> 100 * 22.38 = display result in div#1
Second Empty textbox -> 230 -> 230 * 22.38 = display in div#2 
```

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T02:44:32.013

克隆元素时，也会克隆 id。为克隆的元素创建一个新 ID 是最佳实践，这也有助于实现您想要的。name 属性也是如此。

[通过对您的代码http://jsfiddle.net/dNQVQ/3/](http://jsfiddle.net/dNQVQ/3/)进行一些修改，我能够得到您想要的东西。首先让我说，这可能不是理想的方式，但它是一个开始。就像我之前说的，关键是为克隆的元素设置唯一的 id。我在此示例中所做的是将索引用作列表元素 id 的一部分，该列表元素 id 使用“数量”div 中的匹配索引进行克隆。这样，当更新输入时，检索索引，然后用于更新适当的 div。此外，我将执行计算和更新的函数移动到 settimeout 调用中的匿名函数。这使得在函数调用中使用对更新输入的引用变得容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T02:52:24.737

在这里加入聚会很晚`:)`这是一个弗农：http: [//jsfiddle.net/KVPwm/](http://jsfiddle.net/KVPwm/)

另外，如果它的任务很简单，请放置一个任务`homework`标签！

SO社区周围的人都是很棒的人，所以说实话，伙计们会帮助人的！

*   使用`.on`代替`live`- 推荐。即如果热衷于阅读此内容，请升级您的 JQ 源代码 - [jQuery live 方法有什么问题？](https://stackoverflow.com/questions/11115864/whats-wrong-with-the-jquery-live-method/11115926#11115926)
*   你有 2 个`document.ready`功能，我**也**为你链接了一些东西。
*   也可以考虑使用`isNan`检查。
*   休息一下，您可以阅读代码并尝试一下以使其更简洁。
*   我添加了 2 `divs`并使用该`id`数字相应地填充内容。

这应该适合原因`:)`

**代码**

```
$("document").ready(function() {
    /////////////////////////////////CALUCATIONS/////////////////////////////////
    //setup before functions
    var typingTimer; //timer identifier
    var doneTypingInterval = 0; //time in ms, 5 second for example
    $('input[name=Input2], input[name=Input1]').live('keyup', function() {
        var str = $(this).prop("id");
        var pattern = /[0-9]+/g;
        var matches = str.match(pattern);

        amount = parseFloat($(this).val()) * 22.38;
        typingTimer = setTimeout(doneTyping(matches), doneTypingInterval);
    });

    $('#Input2').keydown(function() {
        clearTimeout(typingTimer);
    });

    function doneTyping(matches) {
        $('#amount'+matches).text(amount.toFixed(2) + " lbs");
    }
    $("#List-Option1,#List-Option2").hide();

    $('#category').change(function() {
        var str = $('#category').val();
        if (str == 'Option1') {
            var option1 = $("#List-Option1:first").clone().show();
            $('#box li:last').after(option1);
        }

        if (str == 'Option2') {
            var option2 = $("#List-Option2:first").clone().show();
            $('#box li:last').after(option2);

        }

    });
});​ 
```

# ruby-on-rails - Rails：will_paginate + 简单的搜索引擎错误：未定义的方法`total_pages'

> ID：12878667
> 
> 赞同：0
> 
> 时间：2012-10-14T01:56:23.393
> 
> 标签：ruby-on-rails

在我的用户索引页面上，我试图在顶部有一个搜索引擎，以便您可以通过电子邮件搜索用户，而不是扫描整个列表。但是，我收到错误：

`undefined method 'total_pages'`

当我搜索任何术语时。

任何人都可以帮忙吗？谢谢！

用户/index.html.erb

```
<h1>All users</h1>

<%= form_tag users_path, :method => "get" do %>
    <%= label_tag(:search, "Search for user by email:") %>
    <%= text_field_tag :search, params[:search] %>
    <%= submit_tag "Search", :name => nil %>
<% end %>

<%= will_paginate @users %>
<br>

<% @users.each do |user| %>
<div>
<%= link_to (image_tag user.profilepic? ? user.profilepic : "questionmark.png", :size => "50x50"), user_path(user) %>
<%= link_to user.name, user_path(user) %> (<%= user.email %>)
<% unless current_user.friends.include?(user) || current_user == user %>
<span class="floatright"><%= link_to "Add friend", user_friends_path(:user_id => current_user.id, :friend_id => user.id), :method => :post %></span>
<% end %>
<% if current_user.friends.include?(user) %>
<span class="floatright"><%= link_to "Remove friend", user_friends_path(:user_id => current_user.id, :friend_id => user.id), :method => :delete, :confirm => "Are you sure you want to remove #{user.name} from your friends?" %></span>
<% end %>
</div>
<% end %> 
```

用户控制器

```
def index
  if params[:search]
    @users = User.search(params[:search])
  else
    @users = User.order("email").page(params[:page]).per_page(10)
  end
end 
```

用户模型

```
 def self.search(search)
    find(:all, :conditions => ['email LIKE ?', "%#{search}%"])
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T02:38:23.720

您没有在`@users = User.search(params[:search])`. 尝试添加`.page(params[:page]).per_page(10)`，看看是否有效。

**更新：**

抱歉，我忘了`.find`返回一个数组而不是一个关系。将您的搜索方法更改为：

```
def self.search(search)
  where('email LIKE ?', "%#{search}%")
end 
```

# google-maps - 地点 API 是否无法检索特定地点？

> ID：12878669
> 
> 赞同：1
> 
> 时间：2012-10-14T01:56:53.520
> 
> 标签：google-maps, google-places-api

我正在构建一个我想与 Places API 集成的应用程序。它建立在我将要添加的受限制的地点列表之上，并允许用户“碰撞”以及查看/添加评论和照片等。我正在寻找一种方法来添加这些地点，然后在没有看到任何内容的情况下检索它们在我的受限列表之外。文档表明 ID 或引用不稳定，我也无法添加唯一的地点类型。这是否意味着我的设计根本不可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T05:16:32.353

正如[Google Places Video 演示](http://youtu.be/JCgTAWXwjOk?t=19m23s)中提到的，您可以添加和检索自定义地点，`"types": ["other"]`因为此类型不用于我们数据中的任何地点。

# open-source - 开源许可 新的 BSD 步骤

> ID：12878672
> 
> 赞同：0
> 
> 时间：2012-10-14T01:57:36.957
> 
> 标签：open-source, licensing

我创建了一些 Java 类，既不是“产品”也不是可以下载和运行的“程序”，更像是一个库，不确定哪个是正确的名称。

而且我想知道使其开源的步骤。

我想在新 BSD 许可证下分发它。

[http://opensource.org/licenses/bsd-license.php](http://opensource.org/licenses/bsd-license.php)

我应该把许可证放在我想要分发的每个 Java 类文件中吗？
还是应该将其放入名为 LICENSE.txt 的文本文件中？如果没有，我该怎么办？

关于模板的问题：
版权 (c) < YEAR>, < OWNER> <-- (那里，我应该包括 '<','>') 吗？
版权所有。

还有什么我需要做的吗？

授权完成后，当其他人将其用于商业目的时，它将作为产品发布，他们将如何保留版权声明？它只会在他们的代码中吗？或者他们应该以某种方式说明哪些部分或文件在新 BSD 许可证下？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T02:18:12.520

1.  任何一种方法都很好。

2.  你不应该包括小于和大于符号。

3.  它在许可证中说：“以二进制形式重新分发必须在分发时提供的文档和/或其他材料中复制上述版权声明、此条件列表和以下免责声明。”

# c - 使用 Make 编译 C

> ID：12878673
> 
> 赞同：2
> 
> 时间：2012-10-14T01:57:42.077
> 
> 标签：c

我正在尝试学习 make 以使我在学习 C 时更容易编译。

我正在尝试做：

```
gcc -Wall -g    3.c -o 3 -lm 
```

使用

```
CC = gcc
CFLAGS = -Wall -g

clean:
        rm -f 3 
```

但我不知道如何以及在何处将 -lm 放入生成文件中。我已经在网上寻找教程，但他们没有专门解决“-lm”选项，或者如果他们这样做了，没有什么解释，并且在我的情况下不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T02:02:31.777

您需要一个“目标”来执行 gcc 命令。像：

```
CC = gcc
CFLAGS = -Wall -g

all:
    gcc -Wall -g 3.c -o 3 -lm

clean:
    rm -f 3 
```

然后你可以用你的宏替换“all”命令的一部分；例如，CFLAGS 可能会有“-lm”。

如果你运行“make -n”可能会有所帮助，它会告诉你如果运行它会做什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T02:03:40.263

`LIBS`通常，您会在变量中看到库特定的标志，例如：

```
CC = gcc
CFLAGS = -Wall -g -I/some/include/directory
LIBS = -lm -L/some/library/directory

all:
    $(CC) $(CFLAGS) $(LIBS) 3.c -o 3 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-14T02:06:18.507

您要查找的变量称为`LDLFAGS`. 来自[GNU Make 手册的 §10.3](http://www.gnu.org/software/make/manual/make.html#Implicit-Variables)：

> LDFLAGS
> 
> 当编译器应该调用链接器'ld'时提供给编译器的额外标志。

因此，只需执行以下操作：

```
LDFLAGS += -lm 
```

希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T02:08:06.990

一个非常好的教程： [Make Tutorial: How-To Write A Makefile](https://sites.google.com/site/michaelsafyan/software-engineering/how-to-write-a-makefile)

这是我写的一个很好的通用makefile：

[http://pastebin.com/PCk0gNtE](http://pastebin.com/PCk0gNtE)

您最感兴趣的部分是本节：

```
# C Preprocessor Flags
CPPFLAGS +=
# compiler flags
CFLAGS += -ansi -Wall -Wextra -pedantic-errors
# libraries to link to ( m == math )
program_LIBRARIES := m
# LDFLAGS is the variable to hold linker flags
LDFLAGS += $(foreach library,$(program_LIBRARIES),-l$(library)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-14T02:25:06.857

GNU make 定义了很多默认规则。对于 C 编译和链接，这些规则是：

no 由 nc 自动生成，配方形式为“$(CC) $(CPPFLAGS) $(CFLAGS) -c”。

n 是通过 C 编译器运行链接器（通常称为 ld）从 no 自动生成的。使用的精确配方是'$(CC) $(LDFLAGS) no $(LOADLIBES) $(LDLIBS)'。

因此，将“-lm”选项添加到链接器的方法是定义：

```
LDLIBS = -lm 
```

然后，当您使用 Makefile 运行 make 时，将运行以下命令：

```
gcc -Wall -g -c 3.c
gcc 3.o -o 3 -lm 
```

（请注意，make 将分两步编译您的 C 程序，首先创建目标文件 3.o，然后将目标文件链接到可执行文件 3）

（有关 GNU make 手册，请参阅[http://www.gnu.org/software/make/manual/ ）](http://www.gnu.org/software/make/manual/)

# python - 更好的平台将软件转换为 FPGA 的 VHDL/Verilog

> ID：12878676
> 
> 赞同：5
> 
> 时间：2012-10-14T01:58:18.157
> 
> 标签：python, scala, vhdl, fpga, myhdl

我正在考虑在 FPGA 上进行开发，但用 Python 或 Scala 编写代码并将其转换为 VHDL 或 Verilog 会更容易。

我想让许多传感器连接到一个设备上，当数据进来时，计算会很快完成，所以它可以显示在视频墙上，所以 FPGA 将有几十个传感器和几个视频控制器作为输入墙。

这是一个用 Scala 编写的代码库。对于这个，我很好奇代码是否是用 Java 和 Scala 编写的，这会影响它生成的内容。

[http://simplifide.com/drupal6/](http://simplifide.com/drupal6/)

这是一个 python 到 VHDL 的转换器。

[http://www.myhdl.org/doku.php](http://www.myhdl.org/doku.php)

有了这两个，我对这些限制感到好奇。

我更喜欢简化，因为我在 Scala 方面比 Python 更强大，但似乎 myhdl 可能是一个更强大的平台，只是从一些基本的环顾来看。

**更新：**

FPGA的原因是它可以很好的一次完成多个任务，所以当数据进来的时候，根据用户的需要，根据实验，很容易把FPGA上的代码改成能够适应需求。

所以举个例子，如果你在一栋写字楼的每一层有8 x 3个不同的天气传感器，那么就有温度、风速、气压传感器（每个传感器8个，每层一个），并添加传感器来测试变形墙壁，然后一个实时界面同时读取这些内容并不断更新视觉显示可能会有所帮助。

这是一个虚构的例子，但它可以解释为什么 FPGA 会有用，否则我需要许多不同的 DSP，然后将它们输入计算机来进行视觉显示，而 FPGA 可以做的更快，因为它是硬件，具有较低的电力需求。

有两个开源库可以帮助简化开发，但我不确定哪个是用于将程序转换为 VHDL/Verilog 的更好平台。

这只是一个例子。如果我想在 FPGA 上进行量子电路仿真，正如本文所建议的那样（[http://www.cc.gatech.edu/computing/nano/documents/Radecka%20-%20FPGA%20Emulation%20of%20Quantum%20Circuits .pdf](http://www.cc.gatech.edu/computing/nano/documents/Radecka%20-%20FPGA%20Emulation%20of%20Quantum%20Circuits.pdf)），那么将其作为程序执行会比手动构建大型电路更容易。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-30T12:20:32.743

是的，有一个 python 样式的 HDL 可用并且它是免费的。[高密度脂蛋白](http://www.myhdl.org/doku.php)

这将生成 VHDL 或 verilog 。它还可以模拟代码并输出 .VDI，您可以在[gtkwave中查看](http://gtkwave.sourceforge.net/)

或者，如果您想编辑 VHDL 代码，您可以使用 GHDL。谷歌它你会得到很多资源。有可用的操作系统[Fedora Electronics Lab](https://fedoraproject.org/wiki/Electronic_Lab?rd=ElectronicLab_Spin)它拥有开发现代电子产品的所有工具。

所有这些都是开源的。使用这些工具进行构建和模拟。要刷入 FPGA，您需要 xilinx 或 Altera 工具链来生成比特流并刷入它们。祝一切顺利 ！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T16:23:24.440

如果您负担得起，我认为没有什么比 National Instruments 的 LabView FPGA 插件更能让您的生活更轻松的了。LabView 的可视化环境非常适合 FPGA 编程，它为您处理了许多烦人的细节（除非您必须担心它们作为算法的一部分，例如通过构建管道来达到您的时钟速度目标）。此外，您可能会发现 NI 的实时（非 FPGA）或 DSP 或 DAQ 或其他解决方案足以满足您的需求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T17:41:23.817

> 这是一个虚构的例子，但它可以解释为什么 FPGA 会有用，否则我需要许多不同的 DSP，然后将它们输入计算机来进行视觉显示，而 FPGA 可以做的更快，因为它是硬件，具有较低的电力需求。

这完全取决于您需要执行的算法的*确切性质。*

> 有两个开源库可以帮助简化开发，但我不确定哪个是用于将程序转换为 VHDL/Verilog 的更好平台。
> 
> 这只是一个例子。如果我想在 FPGA 上进行量子电路仿真，正如本文所建议的那样 (http://www.cc.gatech.edu/computing/nano/documents/Radecka%20-%20FPGA%20Emulation%20of%20Quantum%20Circuits .pdf），那么将其作为程序执行会比手动构建大型电路更容易。

看起来您正在寻找一个高级综合工具，而这两个工具都不是。对于为算法生成 RTL，代码生成器肯定会有所帮助，但您仍然需要使用 HDL 来处理其他事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-29T18:25:33.513

我认为您正在寻找 Modaë Technologies 在[这里](http://www.modae-tech.com)提供的一些工具。您可以从算法/行为级别的 Ruby 或 Python 代码开始。他们的工具能够自动推断数据类型并将代码转换为 RTL 级别的 HDL（当前为 VHDL）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-07T10:09:35.343

一两年前，我使用 MyHDL 和 LabVIEW。我在 MyHDL 中编写了 HDL，将其导出为 VHDL，并将它们作为外部 IP 导入 LabVIEW。

## 实验室视图

它非常适合 FPGA 开发，因为它是图形表示，您可以跟踪每个顺序分支消耗的时钟。以图形方式对算法进行流水线化和切片非常重要，以确保一起处理正确的值。然而，当涉及到生成常量、初始化器列表或生成递归结构时，从视觉到实际硬件的映射这种方法是......次优的。

## 我的HDL

它基本上是 python，但语法看起来很像 Verilog，带有专门用作 @always 等语句的装饰器。您可以在 HDL 代码中自由使用任何 python 有效的代码。出于测试目的，它可能适用于在寄存器传输级别 (RTL) 上实际实现之前用 python 编写测试函数。生成递归结构时，您有通常的 for 语句。您的算法需要查找表 (LUT) 吗？一行列表理解：完成。有关功能的完整列表，请参阅网站。

## 概括

LabVIEW 非常适合开始，因为您可以专注于实际实施。一旦你掌握了并行思考和 RTL 并研究实现更复杂的算法，你可能会发现 MyHDL 在

*   在不受专有平台约束的情况下管理您的 IP
*   使用完整的 python 功能测试你的代码
*   共享、版本控制等

# python - 如何设置在整个程序中有效的不断重新分配的随机变量？

> ID：12878682
> 
> 赞同：0
> 
> 时间：2012-10-14T01:59:21.990
> 
> 标签：python, random, variable-assignment

我想创建一个名为 Random 的变量，每次调用它时它都会不断变化。

我想要这段代码：

```
Random = randint(0, 10)
print Random
print Random
print Random 
```

不要给我类似的东西：

```
6
6
6 
```

而是类似的东西：

```
3
6
1 
```

无需在每次使用之前重新分配 Random 。我还在几个不同的函数中使用了 Random 。那么如何允许它在代码中的任何地方使用，而不必每次都将其重新分配为随机变量呢？

抱歉，如果这是一个愚蠢的问题，但我对此很陌生，我不知道自己在做什么。请保持解释简单。

编辑：这里有更多代码：

```
def something1(Random, useless, whatever)

etc...

def something2(Random, useless, whatever)

etc...

...

main():

   for index in range(800):

     Random = randint(1, 10)

     something1(Random, useless, whatever)

Random = randing(1, 10)

something2(Random, useless, whatever) 
```

这会持续一段时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T02:07:00.780

如果您所说的确实是您想要的（即每次使用时都会给出随机值的变量），那么您并不真正想要变量。`Random`只需用替换每个实例`randint(0, 10)`。或者，您可以制作自己的功能：

```
def rand10():
    return randint(0, 10) 
```

然后在`rand10()`每次使用`Random`变量时调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T02:14:47.877

Random 只是一个整数类型，包含由 randint() 生成的值。因为它是一个整数类型，所以它不能在每次调用时改变它的值而不被重新分配。

你可以做的是定义一个类，这样当它被告知打印时，它返回一个不同的值：

```
from random import randint

class Random:
   def __str__(self):
      return str(randint(1,10))

random = Random()
print(random)   # prints a value
print(random)   # could print a different value
print(random)   # could print a different value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T02:20:15.970

在*真正糟糕的想法领域*，你几乎可以做任何你想做的事情，但是......由于我们在这里提出了一个非常糟糕的想法，我不会真正写出代码，但我会告诉你如何去做吧，如果你愿意，你可以想办法……

1.  创建一个新模块，让我们调用它`Util`
2.  在 中写一个类`Util`，我们将调用该类`Crazy`
3.  在 class`Util.Crazy`中，创建一个名为的[属性](https://stackoverflow.com/questions/6193556/how-do-python-properties-work)`Random`，其 getter 返回一个随机值（具有您禁止的任何边界）
4.  在模块级别创建一个`Util.Crazy`被调用的实例`C`
5.  现在你可以在`C.Random`任何时候拼写出你想要一个新的值

我没有考虑*太多*，但我没有看到任何明显的方法来摆脱`C.Random`它并调用它`Random`（如果你分配`Random`给`Crazy().Random`，它只是坚持价值，而不是绑定）。我敢肯定你可以用 做一些真正可怕的事情`globals()`，或者你可以使用原始描述符协议来做你想做的事。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-12T13:57:55.230

你好，这可能会迟到，但你可以尝试将随机分配给 none，然后使用 while 函数给程序一个循环，然后你可以将它分配给你想要的随机数范围。我举个例子；

```
import random
Random = None
while Random != 0:
     Random = random.randint(0,10)
     print(Random) 
```

这意味着只要它们不为零，值就会不断生成，如果生成零，则程序会跳出循环

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-18T07:08:21.823

```
import numpy as np
x = "np.random.randn()"
for i in range(3):
   print(eval(x)) 
```

eval() 评估传递给它的 str 变量中写入的内容。每次调用 eval(x) 时，都会得到一个新的随机变量。

有点作弊，我同意，但让代码更简洁一些，因为 eval(x) 看起来肯定比调用某个表达式更好（特别是如果你的 rv 分布是由一个复杂的表达式定义的，并且你经常在代码中使用它） .

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2021-01-16T13:19:16.593

```
import random
def numbergeneration():
    number = (random.randrange(0,101))
    print(number)
    return number 
```

我相信这就是你所需要的。

# php - 使用 - PHP 从“图像”目录中一张一张地获取图像

> ID：12878684
> 
> 赞同：0
> 
> 时间：2012-10-14T01:59:44.713
> 
> 标签：php

好的，我只有一个名为“图像/图片”的位置有一个包含所有网站图像（当然只有新闻类别图像）的文件夹。该文件夹由 PHP 控制。在向我的网站提交新闻后，GD（在调整大小和填充之后）将图像存储到该位置。这很完美。即便如此，在 PHP 控制从 CP 中删除新闻之后，PHP 会自动删除那些从 MySql 条目中给出的不必要的文件、图像。这很完美。

但是，随着时间的推移.. 由于 DB/foder 备份、更改或一些实验的草率，许多图像留在了文件夹中。更重要的是，最近我把那个文件夹弄得一团糟，所以现在我在那个文件夹中有很多（不必要的）图像可以删除。

无论如何，我有一个想法如何做到这一点。

1.  PHP首先从该目录中读取所有图像，

2.  并将每个文件逐个取出，作为 while 循环的字符串（准备好由 MySql 控制是否删除）。

有什么建议可以通过使用 PHP 来实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T02:04:03.960

用[`glob()`](http://php.net/glob)这个怎么样？

```
$images = glob('/path/to/folder/*.{jpg,gif,png}', GLOB_BRACE);
foreach ($images as $image) {
    // $image not contains the filename of an image in that folder
} 
```

# r - R中的ggplot2聚类

> ID：12878688
> 
> 赞同：2
> 
> 时间：2012-10-14T02:00:19.990
> 
> 标签：r, ggplot2

![](../Images/0fdc645b981496f9d78e1207c6ba2a29.png)

有人能指出我正确的方向来制作这样一个带有 ggplot2 的情节吗？甚至只是函数类型。

我一直在 ggplot2 中四处寻找，找不到这样的东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-14T02:34:21.820

我假设该图的基本特征是：a.）x 轴是分类的，b.）点的 x 位置略有不同，c.）一些汇总统计（我使用中位数） . 如果这就是你要找的，

```
require(ggplot2)
require(plyr)

#define the data
lev <- gl(2, 10, 20, labels=c("I", "II"))
y <- runif(20)
df <- data.frame(lev, y)

#calculate the medians - I'm guessing that's what the horiz lines are?
meds <- ddply(df, .(lev), summarise, med = median(y))

ggplot(df, aes(x=lev, y=y, colour=lev)) + 
  geom_point(position="jitter") +
  theme_bw() +
  scale_colour_manual(values=c("red", "darkblue")) +
  geom_errorbar(data=meds, aes(x=lev, y=med, ymin=med, ymax=med)) 
```

如果这很重要，您可以使用`annotate()`添加数字和小括号。 ![在此处输入图像描述](../Images/24429c597941162ed76c9813d73dce18.png)

# php - 尝试通过时间戳访问关联数组项

> ID：12878690
> 
> 赞同：0
> 
> 时间：2012-10-14T02:00:50.147
> 
> 标签：php, mysql, arrays

所以我有一个 MySQL 对象，它有用于时间戳、类别和值的列（键）。

时间戳是一个 UNIX 时间戳。类别是一个情感词。值是一个数值。

这是我的代码：

```
foreach ($twitromney['timestamp']) {

echo $twitromney['timestamp']['value'];

} 
```

现在，这应该显示每个时间戳的值，对吧？这是其中一个数组的外观（对象有数百个）：

```
Array ( [category] => composed [value] => 330 [timestamp] => 1344384476.94 ) 
```

我要做的是获取每个时间戳的每个类别的值。除了 value 是可变的，timestamp 和 category 都应该重复。即应该有多个1344384476.94，以及几个组合的类别值。

一旦我得到它（我认为我不需要帮助），我将添加特定日期的特定类别的值（通过转换时间戳）并输出它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T02:19:03.570

尝试这个：

```
foreach ($twitromney as $flip) {

    echo "$flip['category'], $flip['timestamp'], $flip['value'] <br />";

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T02:19:55.397

我真的不明白你的问题，但你在你的 中提供了错误的论点`foreach`，你可以试试这个

```
foreach ($twitromney as $item) {
    echo $item['timestamp'].'<br />';
} 
```

呼应每一个`timestamp`而不是

```
foreach ($twitromney['timestamp']){ 
    echo $twitromney['timestamp']['value'];
} 
```

如果你看到[**这个例子**](http://codepad.viper-7.com/XGyqrY)，那么你就会明白。

# java - Gson：日期上的 JsonSyntaxException

> ID：12878693
> 
> 赞同：14
> 
> 时间：2012-10-14T02:01:45.217
> 
> 标签：java, date, gson

我正在尝试使用 Gson 反序列化 json 数组，但目前正在收到 JsonSyntaxException。json 字符串是由 .NET MVC3 Web 服务使用 JsonResult 创建的（意思是，我不是手动创建 json，它是由我知道可以在其他几个平台上工作的库创建的）。

这是json：

```
[{"PostID":1,"StudentID":39,"StudentName":"Joe Blow",
"Text":"Test message.","CreateDate":"\/Date(1350178408267)\/",
"ModDate":"\/Date(1350178408267)\/","CommentCount":0}] 
```

这是代码：

```
public class Post {
   public int PostID;
   public int StudentID;
   public String StudentName;
   public String Text;
   public Date CreateDate;
   public Date ModDate;

   public Post() { }
}

Type listOfPosts = new TypeToken<ArrayList<Post>>(){}.getType();
ArrayList<Post> posts = new Gson().fromJson(json, listOfPosts); 
```

异常表示日期格式无效：

```
com.google.gson.JsonSyntaxException: /Date(1350178408267)/ 
```

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-14T02:20:23.040

[我在这里](https://stackoverflow.com/questions/5671373/unparseable-date-1302828677828-trying-to-deserialize-with-gson-a-millisecond?rq=1)找到了答案，但奇怪的是没有更简单的方法。我使用的其他几个 json 库本身支持 .NET json 格式。当 Gson 没有处理它时，我感到很惊讶。肯定有更好的办法。如果有人知道，请在此处发布。尽管如此，这是我的解决方案：

我创建了一个自定义 JsonDeserializer 并将其注册为 Date 类型。通过这样做，Gson 将使用我的反序列化器作为 Date 类型而不是它的默认值。如果您想以自定义方式对其进行序列化/反序列化，则可以对任何其他类型执行相同的操作。

```
public class JsonDateDeserializer implements JsonDeserializer<Date> {
   public Date deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context) throws JsonParseException {
      String s = json.getAsJsonPrimitive().getAsString();
      long l = Long.parseLong(s.substring(6, s.length() - 2));
      Date d = new Date(l);
      return d; 
   } 
} 
```

然后，当我创建我的 Gson 对象时：

```
Gson gson = new GsonBuilder().registerTypeAdapter(Date.class, new JsonDateDeserializer()).create(); 
```

现在我的 gson 对象将能够解析 .NET 日期格式（自 1970 年以来的毫秒）。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-02-28T13:02:40.840

另一种解决方案是使用[ISO 8601](http://en.wikipedia.org/wiki/ISO_8601)格式。这必须在 Gson 端配置为：

```
Gson gson = new GsonBuilder().setDateFormat("yyyy-MM-dd'T'HH:mm:ssZ").create(); 
```

以及在服务器端，例如`Global.asax.cs`文件中的 ASP.NET MVC，如下所示：

```
JsonSerializerSettings serializerSettings = new JsonSerializerSettings();
serializerSettings.Converters.Add(new IsoDateTimeConverter());
GlobalConfiguration.Configuration.Formatters.JsonFormatter.SerializerSettings = serializerSettings; 
```

上面代码的优点是它同时处理序列化和反序列化，因此允许日期/时间的双向传输。

注意：`IsoDateTimeConverter`类是[JSON.NET 库](http://james.newtonking.com/json)的一部分。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-04T01:39:26.643

序列化和反序列化方法a。将此注册为 GSON 的适配器

```
JsonSerializer<Date> ser = new JsonSerializer<Date>() {
@Override
public JsonElement serialize(Date src, Type typeOfSrc, JsonSerializationContext 
         context) {
return src == null ? null : new JsonPrimitive(src.getTime());
}
};

JsonDeserializer<Date> deser = new JsonDeserializer<Date>() {
 @Override
 public Date deserialize(JsonElement json, Type typeOfT,
   JsonDeserializationContext context) throws JsonParseException {
return json == null ? null : new Date(json.getAsLong());
 }
 };

Gson gson = new GsonBuilder()
.registerTypeAdapter(Date.class, ser)
.registerTypeAdapter(Date.class, deser).create(); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-04-24T11:47:39.533

通过使用 SqlDateTypeAdapter，此解决方案适用于我：

```
SqlDateTypeAdapter sqlAdapter = new SqlDateTypeAdapter();
Gson gson = new GsonBuilder()
   .registerTypeAdapter(java.sql.Date.class, sqlAdapter)
   .setDateFormat("yyyy-MM-dd")
   .create(); 
```

参考：[https ://stackoverflow.com/a/30398307/7308789](https://stackoverflow.com/a/30398307/7308789)

# python - wx MenuBar 的菜单元素是否有位置？

> ID：12878695
> 
> 赞同：0
> 
> 时间：2012-10-14T02:02:03.523
> 
> 标签：python, wxpython

是否可以控制 a 中元素的位置`wx.MenuBar()`？我在文档中找不到它，但它似乎应该是一个选项。默认情况下，菜单元素，如`file`、`view`、`edit`等位于最左侧，然后每个附加元素都向右延伸。我有一个非常简单的 gui，因此只有一个称为帮助的菜单元素。我想定位它`RIGHT`，而不是默认的`LEFT`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T16:20:01.753

确实，您有方法将菜单放置到您想要的位置：

*   附加（菜单，标题）

将菜单添加到 MenuBar 的末尾（即放在最右边的元素）。title 是新菜单的标题。如果成功返回 True，否则 - False。

*   插入（位置、菜单、标题）

在 pos 位置插入菜单（之后 GetMenu(pos)==menu 将为 True）。之后所有在位的菜单都将向右移动。pos=0 是第一个（左）位置。如果 pos=GetMenuCount()，结果将类似于使用 Append()。title 是新菜单的标题。如果成功返回 True，否则 - False。

*   删除（位置）

从位置 pos 删除菜单，之后位置的所有菜单都向左移动。返回已删除的菜单。

*   替换（位置，菜单，标题）

替换位置 pos 的菜单，不影响 MenuBar 中的其他菜单。返回位于该位置的菜单。

对不起我的英语不好）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T14:15:55.367

wx.MenuBar 中菜单元素的顺序基于它们附加到菜单栏的顺序。在下面的代码中，“Utils”将出现在“File”的左侧（最后两行是关键）。

```
menubar = wx.MenuBar()
file1 = wx.Menu()
file1.Append(81, 'Edit Accounts', '')
file1.AppendSeparator()
file1.Append(88, 'Set Link Duration for selected items', '')        
file1.AppendSeparator()
file1.Append(82, '&Quit', 'Goodbye!')

util1 = wx.Menu()
util1.Append(85, 'View Log File', 'View Log File')
util1.Append(86, 'Clear Old Log files', 'Clear old log files')
util1.Append(87, 'Open APPDATA folder', 'Open APPDATA folder')
util1.AppendSeparator()

util1.Append(83, 'Update Sizes for Selected Folders',
                'Update sizes for the selected folders in sqlite DB')
util1.Append(84, 'Zap sqlite DB',
                'Clean out sqlite DB (needs to be done occasionally)')

menubar.Append(util1, '&Utils')
menubar.Append(file1, '&File') 
```

祝你好运，迈克

# c - 每个 cpu 架构的真正 ELF TLS ABI 要求是什么？

> ID：12878698
> 
> 赞同：9
> 
> 时间：2012-10-14T02:03:04.040
> 
> 标签：c, linux, elf, abi, thread-local-storage

[Ulrich Drepper](http://www.akkadia.org/drepper/tls.pdf)关于线程本地存储的论文概述了几种不同 cpu 架构的 TLS ABI，但我发现它不足以作为实现 TLS 的基础，原因有两个：

1.  它省略了一些重要的拱门，如 ARM、MIPS 等（同时包括一堆完全不相关的拱门，如安腾）
2.  更重要的是，它将很多实现细节与 ABI 混合在一起，因此很难区分互操作性需要哪些属性，哪些只是他实现的方面。

例如，i386 的唯一实际 ABI 要求是：

*   `%gs:0`指向一个指向自身的指针。
*   主可执行文件的 TLS 段（如果有）必须位于距此地址的固定（通过链接器，为负）偏移处。
*   初始加载的库的所有其他 TLS 段必须有一个运行时常量（即每个线程相同，但在不同的程序运行中不一定相同）相对于该地址的偏移量（并且动态链接器必须能够用这些偏移量）。
*   `___tls_get_addr`并且`__tls_get_addr`函数必须以正确的语义存在，以查找任意 TLS 段。

特别是，DTV 的存在或布局**不是**ABI 的一部分，除主程序之外的 TLS 段的排序/布局也不是。

似乎任何使用“TLS 变体 II”的拱门都大致具有上述 ABI 要求。但是我根本不太了解“TLS 变体 I”的要求，而且从阅读资料（在 uClibc 和 glibc 中）看来，甚至可能有几个“变体 I”的变体。

有没有更好的文档我应该查看，或者熟悉 TLS 工作原理的人可以向我解释 ABI 要求吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T01:03:50.377

到目前为止，我能收集到的最好的是：

对于 TLS 变体`__tls_get_addr`或其他特定于架构的函数，必须存在并具有查找任何 TLS 对象的正确语义，并且任何两个 TLS 段之间的相对偏移量必须是运行时常量（每个线程的偏移量相同）。

对于 TLS 变体 II（i386 等），“线程指针寄存器”（它实际上可能不是寄存器，但可能是某种机制，例如`%gs:0`，甚至是内核空间的陷阱；为简单起见，尽管我们称之为寄存器）*只是指向超过*主可执行文件的 TLS 段的结尾，其中“刚刚超过结尾”包括四舍五入到 TLS 段对齐的下一个倍数。

对于 TLS 变体 I，“线程指针寄存器”指向主可执行文件的 TLS 段*开头的某个固定偏移量。*此偏移量因拱门而异。（在一些丑陋的 RISC 拱门上选择了它来最大化通过有符号 16 位偏移量可访问的 TLS 数量，这让我觉得非常无用，因为编译器无法知道重定位的偏移量是否适合 16 位，因此必须总是使用 load-upper/add 指令生成更慢、更大的 32 位偏移代码）。

据我所知，TCB、DTV 等都不是 ABI 的一部分，因为应用程序不允许访问这些结构，除了主可执行文件的部分之外，任何 TLS 段的位置也不允许ABI。在变体 I 和 II 中，将线程的实现内部信息存储在距“线程指针寄存器”的固定偏移量处是有意义的，无论哪种方式都可以安全地避免重叠 TLS 段。

# ruby-on-rails - Rails：生成的 URL 有双反斜杠

> ID：12878703
> 
> 赞同：2
> 
> 时间：2012-10-14T02:03:51.467
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在我的 Rails 项目中，在我`index`看来，我有一个链接

```
<%= link_to 'Show all posts', show_all_path %> 
```

在`routes.rb`中，我有一条路线：

```
match "show_all" => "Posts#show_all" 
```

当我单击该链接时，它来自

```
http://<domain name>/my_rails_project 
```

至

```
http://<domain name>/my_rails_project//show_all 
```

它工作正常，但我想知道为什么前面有两个反斜杠`show_all`而不是一个。我可以让它只出现一个反斜杠吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T02:35:09.213

我认为您的路线需要更多信息：

```
`match "/:project_name/show_all" => "posts#show_all", :as => "show_all" 
```

在您看来：

```
link_to 'Show all posts', show_all_path(@project.name) 
```

这假设您`@project`正在查看的页面中有一个变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T04:12:22.130

尝试使用获取

```
 get "show_all", :to => 'posts#show_all', as: 'show_all' 
```

# python - 替换字符串中的字符（Python）

> ID：12878708
> 
> 赞同：1
> 
> 时间：2012-10-14T02:05:03.157
> 
> 标签：python

> **可能重复：**
> [如何用 Python 中的另一个字符串替换函数中的字符串？](https://stackoverflow.com/questions/12876158/how-to-replace-a-string-in-a-function-with-another-string-in-python)

我想输入任何类型的字符的任何字符串，如果字符是字母，我想用“^”替换它并打印出来。

例如，如果我的输入是`replace('text-here')`，我应该得到输出为`"^^^^-^^^^"`。

我尝试使用以下语句，但它只打印我输入的任何内容。请帮忙！

```
def replace(string):

    for x in range(len(string)):
        string.replace(string[x],"^")
    print(string) 
```

我是python新手，不知道复杂的东西。请给我通俗易懂的答案。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T02:07:09.723

```
>>> text = 'text-here'
>>> ''.join('^' if c.isalpha() else c for c in text)
'^^^^-^^^^' 
```

我认为这很容易理解，但以防万一这里的代码更简单地显示了它的作用：

```
>>> def replace(text):
        new_text = ''
        for c in text:
            if c.isalpha():
                new_text += '^'
            else:
                new_text += c
        return new_text

>>> replace(text)
'^^^^-^^^^' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T02:15:32.807

您可以使用[Python 的正则表达式库](http://docs.python.org/library/re.html)。

像这样，

```
import re

re.sub('\w', '^', 'text-here')

# Outputs: "^^^^-^^^^" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T02:23:18.153

那是因为字符串是不可变的。string.replace(string[x],"^") 返回一个新对象。

```
Modify 
string.replace(string[x],"^")
to 
string = string.replace(string[x],"^") 
```

它会按预期工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T02:14:53.453

既然您的问题是关于“**但它只是打印我输入的任何内容**”，我想告诉您该方法`str.replace`将返回一个新字符串而不是替换该字符串。

```
>>> a = "foo"
>>> a.replace("foo","bar")
'bar'
>>> a
'foo' 
```

所以你需要做`string = string.replace(...)`

# java - 使用 Eclipse 插件将修改后的 AST 保存在新文件中

> ID：12878710
> 
> 赞同：1
> 
> 时间：2012-10-14T02:06:03.417
> 
> 标签：java, eclipse, eclipse-plugin, abstract-syntax-tree, eclipse-jdt

我有一个 Eclipse 插件代码来操作项目/工作区中的类（smcho.Hello）。我可以创建一个 CompilationUnit 并对其进行一些修改，但我需要将结果保存在不同的文件中以检查两个版本之间的差异。

这是我如何获得 CompilationUnit 的代码。

```
IWorkspaceRoot root = ResourcesPlugin.getWorkspace().getRoot();
IProject project = root.getProject("Hello");
project.open(null);
IJavaProject javaProject = JavaCore.create(project);
IType lwType = javaProject.findType("smcho.Hello");
org.eclipse.jdt.core.ICompilationUnit lwCompilationUnit = lwType.getCompilationUnit();
final ASTParser parser = ASTParser.newParser(AST.JLS3); 
parser.setKind(ASTParser.K_COMPILATION_UNIT);
parser.setSource(lwCompilationUnit);
parser.setResolveBindings(true); // we need bindings later on
CompilationUnit unit = (CompilationUnit) parser.createAST(null /* IProgressMonitor */); 
// modify the unit AST node 
```

如何将此修改后的单元保存到新文件中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T06:44:07.610

您可以使用 an`ASTRewriter`来执行此操作。

```
// get the ast rewriter
final ASTRewrite rewriter = ASTRewrite.create(ast);
// get the current document source
final Document document = new Document(unit.getSource());
// compute the edits you have made to the compilation unit
final TextEdit edits = rewriter.rewriteAST();
// apply the edits to the document
edits.apply(document);
// get the new source
String newSource = document.get();
// now write this source to some other file. 
```

检查下面的链接。这提供了有关如何将 AST 更改写入文件的见解。

[http://www.eclipse.org/articles/article.php?file=Article-JavaCodeManipulation_AST/index.html](http://www.eclipse.org/articles/article.php?file=Article-JavaCodeManipulation_AST/index.html)

**更新：** 这就是我写入文件的方式：

```
File file = new File(destFile);
FileUtils.writeStringToFile(File file, String newSource) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T16:59:45.197

这是我可以用来将重写的 ast 保存到另一个文件中的代码。我想知道是否有更简单的方法。

```
Document document = new Document(lwCompilationUnit.getSource());
rewrite.rewriteAST().apply(document);
String source = document.get();
String destFile = "...";
Helper.toFile(source, destFile);

public static void toFile(String source, String outputPath)
{
   try{
          // Create file 
          FileWriter fstream = new FileWriter(outputPath);
          BufferedWriter out = new BufferedWriter(fstream);
          out.write(source);
          //Close the output stream
          out.close();
    }catch (Exception e){//Catch exception if any
          System.err.println("Error: " + e.getMessage());
    }
} 
```

# backbone.js - 骨干木偶咖啡脚本绑定范围

> ID：12878712
> 
> 赞同：1
> 
> 时间：2012-10-14T02:06:19.100
> 
> 标签：backbone.js, coffeescript, marionette, backbone-views

这是我拥有的一个简单的主干视图类：

```
class Student.Views.SharedChat extends Backbone.Marionette.ItemView
  template: 'student/shared/chat/chat'

  onRender: ->
    Student.CurrentUserChannel.bind('student:chat_threads:created', @setUpThread)

  setUpThread: (data) ->
    channel = Student.Pusher.subscribe("presence-thread-1")
    channel.bind('student:chat_messages:created', @newMessage) 

  newMessage: (data) ->
   do something with data...

end 
```

我的问题是，我如何调用@newMessage，从上面的代码看起来，绑定到@newMessage 的通道在该范围内无法识别它，我如何从该绑定访问newMessage 函数？

感谢您的回复，这有点把我逼到墙边。

* * *

虽然我之前尝试过胖箭，但我想我并没有完全理解它。niko 的回复让我思考并阅读了更多内容。问题是@setUpThread 本身作为一个已经绑定的函数被调用，所以胖箭头需要@setUpThread 来维护@ 而不是@newMessage。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T03:04:28.470

我会这样做：

```
channel.bind('student:chat_messages:created', (data)=>@newMessage(data)) 
```

# python - 带有有效密钥的 KeyError

> ID：12878715
> 
> 赞同：0
> 
> 时间：2012-10-14T02:06:24.573
> 
> 标签：python, dictionary

```
 def askme(answers):
            question = raw_input("Do you want to see my name, age or favorite fruit?\n")
            if not question in answers:
                    print "I have no answer for that, ask something else"
                    askme(answers)
            answer_to_question = answers[question]
            return answer_to_question

    answers = {"name":"John", "age":18, "fruit":"apple"}

    while True:
            answer_to_question = askme(answers)
            print "Answer is %s" % answer_to_question 
```

我希望它如何运行：如果输入不在字典中，则要求新输入 如果输入在字典中，则使用输入作为键

出了什么问题：在我传入一个不在键中的值后，它要求我提供新的输入。如果我传入一个键中的值，我会得到一个 KeyError。

为什么会发生这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T02:16:48.967

问题是因为你在递归。当提出一个无效问题时，程序会正确通知并递归，但在找到答案后，它会从中断的地方重新开始。

我认为最好的解决方法是更改​​函数的顶部以避免递归：

```
question = raw_input("Do you want to see my name, age or favorite fruit?\n")
while not question in answers:
    print "I have no answer for that, ask something else"
    question = raw_input("Please type 'name', 'age' or 'fruit'.\n") 
```

另一种解决方法是保留递归格式，但如果提出的问题无效，则阻止程序从中断的地方恢复。在这种情况下，您只需要将递归调用替换为：

```
return askme(answers) 
```

# python - 如何将第三方模块“包含”到我的 python 脚本中以使其可移植？

> ID：12878716
> 
> 赞同：6
> 
> 时间：2012-10-14T02:06:51.047
> 
> 标签：python

我开发了一个小脚本，可以在线搜索壁纸数据库并下载壁纸，我想将此脚本提供给另一个不太擅长计算机的人，我有点从 python 开始，所以我不知道如何在我的程序中包含第三方模块的“导入”，使其可以 100% 移植，有什么可以帮助我做到这一点的吗？还是我必须输入并分析我的第三方模块并复制和粘贴我使用的功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T02:22:35.927

### 更糟糕的事情

您可以做的一件简单的事情就是将其他模块与您的代码捆绑在一起。这并不**意味着**您应该将其他模块中的函数复制/粘贴到您的代码中——您绝对**不**应该这样做，因为您不知道会丢失哪些依赖项。您的目录结构可能如下所示：

```
/myproject
    mycode.py
    thirdpartymodule1.py
    thirdpartymodule2.py
    thirdpartymodule3/
        <contents> 
```

### 更好的事情要做

真正做到这一点的最佳方法是在 Python 包中包含一个依赖项列表（通常称为`requirements.txt`），Python 的包安装程序`pip`可以使用它来自动下载。由于这可能有点太复杂，你可以给你的朋友这些说明，假设 Mac 或 Linux：

1.  运行`$ curl http://python-distribute.org/distribute_setup.py | python`。这为您提供了安装包管理器所需的工具。
2.  运行`$ curl https://raw.github.com/pypa/pip/master/contrib/get-pip.py | python`。这将安装包管理器。
3.  给您的朋友一份您在代码中使用的第三方 Python 模块的名称列表。出于本示例的目的，我们会说您使用了`requests`、`twisted`和`boto`。
4.  你的朋友应该从命令行运行`$ pip install <list of package names>`。在我们的示例中，它看起来像`$ pip install requests twisted boto`.
5.  运行 Python 代码！然后像这样的行`import boto`应该可以工作，因为您的朋友将在他们的计算机上安装软件包。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T05:58:31.657

更简单的方法：

1.  从干净的[虚拟环境](http://pypi.python.org/pypi/virtualenv)开始。
2.  安装开发代码所需的包。
3.  完成后，为您的项目创建一个[需求列表。](http://www.pip-installer.org/en/latest/requirements.html#freezing-requirements)
4.  将此文件（从第 3 步开始）发送给您的朋友。

您的朋友只是`pip install -r thefile.txt`为了满足您的应用程序的所有要求。

这是一个例子：

```
D:\>virtualenv --no-site-packages myproject
The --no-site-packages flag is deprecated; it is now the default behavior.
New python executable in myproject\Scripts\python.exe
Installing setuptools................done.
Installing pip...................done.

D:\>myproject\Scripts\activate.bat
(myproject) D:\>pip install requests
Downloading/unpacking requests
  Downloading requests-0.14.1.tar.gz (523Kb): 523Kb downloaded
  Running setup.py egg_info for package requests

    warning: no files found matching 'tests\*.'
Installing collected packages: requests
  Running setup.py install for requests

    warning: no files found matching 'tests\*.'
Successfully installed requests
Cleaning up...

(myproject) D:\>pip freeze > requirements.txt
(myproject) D:\>type requirements.txt
requests==0.14.1 
```

# c# - FileHelpers：FieldNotInFile 属性从 ReadFileAsDT DataTable 结果中完全省略字段

> ID：12878717
> 
> 赞同：0
> 
> 时间：2012-10-14T02:06:52.777
> 
> 标签：c#, datatable, filehelpers

`FieldNotInFile`在我的映射文件中使用该属性时，我遇到了看似意外的行为。请参阅下面我配置的简略示例。

标题记录的映射是单独定义的，以保持 MasterDetail 引擎的选项打开：

```
public class HeaderMapping
{
    public string ID;
    public DateTime RptDateFrom;
    public DateTime RptDateTo;
    public DateTime GenerationDate;
....
} 
```

我想将从标题中检索到的值组合到最终记录结果中，以便使用`FieldNotInFile`稍后添加的属性来指定它们。

```
public class RecordMapping
{
    // Values not in source
    [FieldNotInFile()]
    public string ID;
    [FieldNotInFile()]
    public DateTime RptDateFrom;
    [FieldNotInFile()]
    public DateTime RptDateTo;
    [FieldNotInFile()]
    public DateTime GenerationDate;

    // Start values from source
    public string RowPrefix;
    public string Field1;
    public string Field2;
    public string Field3;
....
} 
```

在引擎执行中，我定义了两个实例。第一个捕获单个标头记录并解析其值。该`AfterReadRecord`事件用于在第一行之后停止引擎。

```
static void Main(string[] args)
{
    // Extract the header
    FileHelperEngine<HeaderMapping> headerEngine = new FileHelperEngine<HeaderMapping>();
    headerEngine.AfterReadRecord +=
        new FileHelpers.Events.AfterReadHandler<HeaderMapping>(AfterHeaderRead);

    HeaderMapping[] headerRecord = headerEngine.ReadFile(source.FullName);

    // Capture Values
    companyId = headerRecord[0].ID;
    rptDateFrom = headerRecord[0].RptDateFrom;
    rptDateTo = headerRecord[0].RptDateTo;
    generationDate = headerRecord[0].GenerationDate;
.... 
```

接下来创建记录引擎。该`BeforeReadRecord`事件用于将先前捕获的值插入到`RecordMapping`with`FieldNotInFile`属性中表示的占位符中。

```
....
    // Extract the Records
    FileHelperEngine<RecordMapping> recordEngine = new FileHelperEngine<RecordMapping>();
    recordEngine.BeforeReadRecord +=
        new FileHelpers.Events.BeforeReadHandler<RecordMapping>(BeforeThisRecord);

    DataTable outputTable = recordEngine.ReadFileAsDT(source.FullName);
}
....
private static void BeforeThisRecord(EngineBase engine, BeforeReadEventArgs<RecordMapping> e)
{
    e.Record.ID = companyId;
    e.Record.RptDateFrom = rptDateFrom;
    e.Record.RptDateTo = rptDateTo;
    e.Record.GenerationDate = generationDate;
} 
```

outputTable 结果与预期不符。标记为的字段`FieldNotInFile`从 DataTable 结果中完全省略。调试过程时，该`BeforeThisRecord`方法正确执行并分配适当的值，但这不会反映在输出中。DataTable 列输出为 RowPrefix、Field1、Field2 等，而不是 ID、RptDateFrom、RptDateTo、GenerationDate、RowPrefix 等。

奇怪的是，当我使用替代方法时..

```
List <RecordMapping> recordList = recordEngine.ReadFileAsList(source.FullName); 
```

列表项包含`RecordMapping`具有所有正确值的对象。似乎`FieldNotInFile`属性的 DataTable 转换是罪魁祸首。我做错了吗？这是一个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:32:29.477

您是正确的，`ReadFileAsDT()`不`FieldNotInFile`包括`DataTable`. 这可能是一个错误，但老实说，我不确定`FieldNotInFile`应该如何使用 - 它不在[此处](http://filehelpers.sourceforge.net/)的文档中。

我认为你最好使用[Master Detail 引擎](http://filehelpers.sourceforge.net/example_masterdetail.html)或者只是做

```
 RecordMapping[] recordMappings = recordEngine.ReadFile(source.FullName); 
```

然后，如果您真的需要 a `DataTable`，请自己使用以下内容填充它：

```
DataTable outputTable = new DataTable(); // New data table.
outputTable.Columns.Add("ID", typeof(int)); // Add all columns.
outputTable.Columns.Add("RptDateFrom", typeof(DateTime));
outputTable.Columns.Add("RptDateTo", typeof(DateTime));
outputTable.Columns.Add("GenerationDate", typeof(DateTime));
outputTable.Columns.Add("RowPrefix", typeof(String));
outputTable.Columns.Add("Field1", typeof(String));
outputTable.Columns.Add("Field2", typeof(String));
outputTable.Columns.Add("Field3", typeof(String));

foreach (RecordMapping recordMapping in recordMappings)
{
  outputTable.Rows.Add(
    companyId, 
    rptDateFrom, 
    rptDateTo, 
    generationDate, 
    recordMapping.RowPrefix, 
    recordMapping.Field1, 
    recordMapping.Field2, 
    recordMapping.Field3)
} 
```

# c++ - C/C++ 中的套接字编程 - 接收由 typedef 结构定义的消息

> ID：12878719
> 
> 赞同：1
> 
> 时间：2012-10-14T02:07:01.177
> 
> 标签：c++, c, sockets, struct

关于我的套接字程序的一个问题：我有一个......内部类......我猜（对不起，来自 Java 到 C/C++）这是：

```
typedef struct {
    enum {Request, Reply} messageType;
    unsigned int RPCId;
    unsigned int procedure;
    int arg1;
    int arg2;
} RPCMessage; 
```

我希望收到一个 RPCMessage 作为对通过 UDP 套接字发送的请求的响应。目前，我收到带有代码的消息：

```
/* Recv a response */
fromSize = sizeof(fromAddr);
if ((respSize = recvfrom(sock, buffer, maxSize, 0, (struct sockaddr *)&fromAddr,
        &fromSize)) != messageSize)
    DieWithError("recvfrom() failed"); 
```

我应该注意这里的缓冲区是一个字符数组。我想要的是将收到的消息转换回 RPCMessage ......所以我尝试了：

```
RPCMessage receivedMessage = (RPCMessage)buffer; 
```

这不会让编译器高兴...将 char 数组中的这些字节重新排列到 RPCMessage 及其字段中的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T02:14:02.420

你有几个选择。选项 #1 是复制缓冲区的内容：

```
RPCMessage receivedMessage;
memcpy(&receivedMessage, buffer, sizeof(receivedMessage)); 
```

选项 #2 是将指向 char 缓冲区的指针重新解释为指向 RPCMessage 类型的指针：

```
RPCMessage *receivedMessage = (RPCMessage *)buffer; 
```

选项 #3 是手动将缓冲区解析为 class 的字段`RPCMessage`。

对于选项 #1 和 #2，您必须了解结构/字段填充、架构的对齐要求等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T02:11:57.023

首先，您正在处理原始字节，因此请使用无符号字符数组，而不是意外的符号扩展。

其次，您需要一个指针类型来引用该缓冲区：

```
RPCMessage* receivedMessage = (RPCMessage*)buffer; 
```

最后确保发送方和接收方使用相同的字节打包。同样，在执行上述操作之前，请确保您收到了 RPCMessage 的所有数据。

注意：您通常最好从缓冲区中分解字节并在 RPCMessage 结构中制造接收到的数据，除非您确信双方都同意打包、字节序等。

# mongodb - Mongodb：$group的_id中的嵌套字段

> ID：12878722
> 
> 赞同：4
> 
> 时间：2012-10-14T02:07:11.800
> 
> 标签：mongodb

假设我们在集合中有这样的文档

```
{
    _id: {
        element_id: '12345',
        name: 'foobar'
    },
    value: {
        count: 1
    }
} 
```

我正在使用聚合框架来做一个`$group`，就像这样

```
db.collection.aggregate([
    { $group: { _id: '$_id.element_id', total: { $sum: '$value.count' } } }
]) 
```

并得到了结果

```
{ "result" : [ { "_id" : null, "total" : 1 } ], "ok" : 1 } 
```

*请注意，`_id`结果中的字段为空。*从实验来看，似乎 $group 不允许对其`_id`（例如`$_id.element_id`）进行嵌套字段声明。

为什么是这样？是否有解决方法？

谢谢你。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-14T02:28:34.033

我找到了使用`$project`.

```
db.collection.aggregate([
    { $project: { element_id: '$_id.element_id', count: '$value.count' } },
    { $group: { _id: '$element_id', total: { $sum: '$count' } } }
]) 
```

> $project 通过重命名、添加或删除字段来重塑文档流。

[http://docs.mongodb.org/manual/reference/aggregation/#_S_project](http://docs.mongodb.org/manual/reference/aggregation/#_S_project)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T23:40:49.893

原来这是问题[SERVER-7491](https://jira.mongodb.org/browse/SERVER-7491)。它似乎已在 2.2.2 中修复（大约 3 天前发布）。

上面提到的解决方法在 2.2.1 中对我来说效果很好。请注意，当使用 $project 解决方法（2.2.2 之前）时，不建议将 _id 从具有 _id:0 的 $project 中排除，因为它的行为似乎很奇怪，我最终得到了一些正常工作和一些在该部分在同一聚合中的最终结果中缺少 _id 字段。

# javascript - 切换类和禁用按钮

> ID：12878726
> 
> 赞同：-2
> 
> 时间：2012-10-14T02:09:10.657
> 
> 标签：javascript

是否可以在调用 onClick 时和启动 location.href 之前将类切换到加载图形并禁用按钮？有延迟，我希望避免双击。有人可以给我看这个样本吗？

```
<button type="button" class="MoreTides" onclick="location.href='http://www.domain.com/tides/parser_iphone.php?stats=$xml->stationid'">View Graph - Change Dates</button> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T02:23:57.227

这样的事情可能是一个开始：

```
<script>
  function loadPage(input) {
    input.disabled = true;
    input.className = "loadingButton"; // define how this should look in CSS
    location.href='http://www.domain.com/tides/parser_iphone.php?stats=$xml->stationid';
  }
</script>

<button type="button" class="MoreTides" onclick="loadPage(this)">View Graph - Change Dates</button> 
```

# scheme - 如何确定变量是否是 Scheme 中的字母？

> ID：12878727
> 
> 赞同：0
> 
> 时间：2012-10-14T02:09:27.983
> 
> 标签：scheme, racket

对于实际使用方案的人来说，简单的问题，简单的答案。如何确定变量是否是字母表中的字母？

我认为它是这样的（字母？x），其中 x 是一些不确定的类型。谁能告诉我可以使用什么布尔函数？

编辑：

我怎么能做出这样的东西：（somFunction-isALetter？a）返回：#t

其中 a 不是变量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T02:49:48.867

在 Racket 中，该[`char-alphabetic?`](http://docs.racket-lang.org/reference/characters.html?q=letter?#%28def._%28%28quote._~23~25kernel%29._char-alphabetic~3f%29%29)函数只接受字符作为参数，但很容易定义一个函数，它为所有非字符返回 false 而不是失败：

```
(define (letter? x) (and (char? x) (char-alphabetic? x))) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-14T02:50:52.557

使用此`char-alphabetic?`过程。从[文档](http://docs.racket-lang.org/reference/characters.html?q=letter?#%28def._%28%28quote._~23~25kernel%29._char-alphabetic~3f%29%29)中：

> `char-alphabetic?`如果 char 具有 Unicode“Alphabetic”属性，则返回 #t。

像这样使用它：

```
(char-alphabetic? #\a)
> #t 
```

如果字符在变量中：

```
(define x #\a)
(char-alphabetic? x)
#t 
```

请注意，`char-alphabetic?`仅适用于*characters*。

**更新：**

重新阅读这个问题，我相信我误解了它。如果您有兴趣了解*变量*的名称是否只是一个字母，这将起作用：

```
(define (is-variable-a-letter? x)
  (let ((var (string->list (symbol->string x))))
    (and (= (length var) 1)
         (char-alphabetic? (car var)))))

(is-variable-a-letter? 'x)
> #t 
```

另一方面，如果您对变量的实际*内容*感兴趣，请应用此答案的第一部分。

# shell - 优化 BASH 代码以删除 XML 文件的第一行和最后一行

> ID：12878728
> 
> 赞同：1
> 
> 时间：2012-10-14T02:09:40.973
> 
> 标签：shell, sed

如何优化 BASH 脚本中的这一行，以便更快地删除充满 XML 文件的目录的第一行和最后一行？

```
 sed -s -i -e 1d ./files/to/edit/*.xml && sed -s -i -e '$d' ./files/to/edit/*.xml 
```

不必使用 sed 命令。任何 BASH 代码都可以使用；python3也不错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T02:12:48.970

试试看：

```
sed -i '1d;$d' ./files/to/edit/*.xml 
```

它更快，请参阅：

```
time find /usr/share/doc/x* | xargs -I% sed '1d' % && sed '$d' %
real 0m0.611s
user 0m0.033s
sys 0m0.120s

time find /usr/share/doc/x* | xargs -I% sed -e '1d' -e '$d' %
real 0m0.613s
user 0m0.027s
sys 0m0.140s

time find /usr/share/doc/x* | xargs -I% sed '1d;$d' %
real 0m0.565s
user 0m0.023s
sys 0m0.140s 
```

# c# - 多次按 Tab 后不再调用线程挂钩过程。为什么？

> ID：12878729
> 
> 赞同：4
> 
> 时间：2012-10-14T02:09:46.350
> 
> 标签：c#, .net, winapi, hook, systemevent

我安装了一个线程特定的 windows 挂钩来监视发送到 WndProc 的消息。起初它起作用了。但是，在我按下 Tab 大约 19 次以围绕表单移动焦点后，不再调用我的钩子回调。无论我是快速还是缓慢地按下 Tab，都会发生这种情况。谁能解释到底发生了什么？

下面是我写的代码。我在 Windows 7 64 位上对其进行了测试。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Windows.Forms;
using System.Runtime.InteropServices;

namespace HookTest
{
    static class Program
    {
        private const int WH_CALLWNDPROC = 4;

        private delegate IntPtr HookProc(int nCode, IntPtr wParam, IntPtr lParam);

        private class MainForm : Form
        {
            private Button button1;
            private TextBox textBox1;

            public MainForm()
            {
                this.button1 = new System.Windows.Forms.Button();
                this.textBox1 = new System.Windows.Forms.TextBox();
                this.SuspendLayout();
                // 
                // button1
                // 
                this.button1.Location = new System.Drawing.Point(12, 38);
                this.button1.Name = "button1";
                this.button1.Size = new System.Drawing.Size(75, 23);
                this.button1.TabIndex = 0;
                this.button1.Text = "Button 1";
                this.button1.UseVisualStyleBackColor = true;
                // 
                // textBox1
                // 
                this.textBox1.Location = new System.Drawing.Point(12, 12);
                this.textBox1.Name = "textBox1";
                this.textBox1.Size = new System.Drawing.Size(100, 20);
                this.textBox1.TabIndex = 1;
                // 
                // MainForm
                // 
                this.Controls.Add(this.textBox1);
                this.Controls.Add(this.button1);
                this.Name = "MainForm";
                this.Text = "Main Form";
                this.ResumeLayout(false);
                this.PerformLayout();
            }
        }

        private static IntPtr hWndProcHook = IntPtr.Zero;
        private static int messageCount = 0;

        [DllImport("Kernel32.dll", CharSet = CharSet.Auto)]
        public static extern IntPtr GetModuleHandle(string lpModuleName);

        [DllImport("Kernel32.dll", CharSet = CharSet.Auto)]
        public static extern uint GetCurrentThreadId();

        [DllImport("User32.dll", CharSet = CharSet.Auto)]
        private static extern IntPtr SetWindowsHookEx(int idHook,
            HookProc lpfn, IntPtr hMod, uint dwThreadId);

        [DllImport("User32.dll", CharSet = CharSet.Auto)]
        [return: MarshalAs(UnmanagedType.Bool)]
        private static extern bool UnhookWindowsHookEx(IntPtr hhk);

        [DllImport("User32.dll", CharSet = CharSet.Auto)]
        private static extern IntPtr CallNextHookEx(IntPtr hhk, int nCode,
            IntPtr wParam, IntPtr lParam);

        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            InstallHook();
            Application.Run(new MainForm());
            UninstallHook();
        }

        private static void InstallHook()
        {
            if (Program.hWndProcHook == IntPtr.Zero)
            {
                Console.WriteLine("Hooking...");

                Program.hWndProcHook = SetWindowsHookEx(
                    WH_CALLWNDPROC,
                    WndProcHookCallback,
                    GetModuleHandle(null),
                    GetCurrentThreadId());

                if(Program.hWndProcHook != IntPtr.Zero)
                    Console.WriteLine("Hooked successfully.");
                else
                    Console.WriteLine("Failed to hook.");
            }
        }

        private static void UninstallHook()
        {
            if (Program.hWndProcHook != IntPtr.Zero)
            {
                Console.WriteLine("Unhooking...");

                if (UnhookWindowsHookEx(Program.hWndProcHook))
                    Console.WriteLine("Unhooked successfully.");
                else
                    Console.WriteLine("Failed to unhook.");

                Program.hWndProcHook = IntPtr.Zero;
            }
        }

        private static IntPtr WndProcHookCallback(int nCode, IntPtr wParam, IntPtr lParam)
        {
            Console.WriteLine("WndProcHookCallback {0}", Program.messageCount++);

            return CallNextHookEx(Program.hWndProcHook, nCode, wParam, lParam);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-28T03:40:48.973

在测试您的程序时，我收到以下错误

> **检测到 CallbackOnCollectedDelegate**
> 消息：对类型为“Sandbox Form！Sandbox_Form.Program+HookProc::Invoke”的垃圾收集委托进行了回调。这可能会导致应用程序崩溃、损坏和数据丢失。将委托传递给非托管代码时，托管应用程序必须使它们保持活动状态，直到保证它们永远不会被调用。

我相信问题是隐式创建的要传递给`SetWindowsHookEx`回调的委托正在收集垃圾。通过为委托显式创建一个变量并将其保持在范围内，我认为这将使您的问题消失，当我修改`InstallHook`为以下内容时，我无法再重新创建错误。

```
private static HookProc hookProcDelegate;

private static void InstallHook()
{
    if (Program.hWndProcHook == IntPtr.Zero)
    {
        Console.WriteLine("Hooking...");

        hookProcDelegate = new HookProc(WndProcHookCallback);

        Program.hWndProcHook = SetWindowsHookEx(
            WH_CALLWNDPROC,
            hookProcDelegate,
            GetModuleHandle(null),
            GetCurrentThreadId());

        if (Program.hWndProcHook != IntPtr.Zero)
            Console.WriteLine("Hooked successfully.");
        else
            Console.WriteLine("Failed to hook.");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T03:38:20.337

[什么会导致 Windows 取消挂钩低级别（全局）键盘挂钩？](https://stackoverflow.com/questions/2655278/what-can-cause-windows-to-unhook-a-low-level-global-keyboard-hook)涵盖了这一点。如果挂钩过程超时，就会发生这种情况。超时值在`HKEY_CURRENT_USER\Control Panel\Desktop`带有值的键处指定`LowLevelHooksTimeout`（尽管我的系统上不存在此值）。

来自[MSDN](http://msdn.microsoft.com/en-us/library/ms644985.aspx)（本页底部的社区内容中也有一些很好的信息）：

> 如果钩子过程超时，系统将消息传递给下一个钩子。但是，在 Windows 7 及更高版本上，该挂钩会在不被调用的情况下被静默删除。

从[全局钩子在窗户上迷路](http://blogs.msdn.com/b/alejacma/archive/2010/10/14/global-hooks-getting-lost-on-windows-7.aspx)

> 在 Windows 7 上，我们必须确保钩子的回调函数可以在低于 LowLevelHooksTimeout 的时间内返回，即 300 毫秒。并且我们允许应用程序在处理钩子回调消息时超时 10 次。如果第 11 次超时，Windows 将从挂钩链中取消挂钩应用程序。这是一个设计特性，它是在 Win7 RTM 中添加的。

该页面还建议改用[原始输入](http://msdn.microsoft.com/en-us/library/ms645536(VS.85).aspx)。

**编辑：**这里是关于在 C# 中使用原始输入的[代码项目教程](http://www.codeproject.com/Articles/17123/Using-Raw-Input-from-C-to-handle-multiple-keyboard)。

# cocos2d-iphone - 更改精灵使用的 png

> ID：12878730
> 
> 赞同：4
> 
> 时间：2012-10-14T02:09:47.057
> 
> 标签：cocos2d-iphone, cocos2d-x

在 cocos2d-x 中，如何更改精灵使用的 png？

以下作品，但它似乎有点冗长，我想知道是否有替代方法可以阻止我打电话`new`？

```
// create sprite with original png
m_pSpr = CCSprite::create( "1.png" );
m_pSpr->setPosition( ccp( 100, 100 ) );
this->addChild( m_pSpr );

// now change the png that is used by the sprite

// new image from png file
CCImage* img = new CCImage();
img->initWithImageFile( "2.png", CCImage::kFmtPng );

// new texture from image
CCTexture2D* tex = new CCTexture2D();
tex->initWithImage( img );

// finally change texture of sprite
m_pSpr->setTexture( tex ); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T20:41:31.803

将您的 sprite 打包到 spritesheet 中，然后使用 CCSprite 的 setDisplayFrame()。

```
// make sure the spritesheet is cached
auto cacher = CCSpriteFrameCache::sharedSpriteFrameCache();
cacher->addSpriteFramesWithFile("Spritesheet.plist");

// create the sprite
m_pSpr = CCSprite::create( "1.png" );

// set it's display frame to 2.png      
CCSpriteFrame* frame = cacher->spriteFrameByName("2.png");
if( frame)
    m_pSpr->setDisplayFrame(frame); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T09:10:44.823

你不应该对单个精灵使用 setTexture 方法。如果您将精灵打包到图集（单个纹理，例如，2048x2048 像素，其中包含许多不同的帧，这样可以减少内存占用），此方法将为您的精灵设置整个巨大的纹理。改用 setDisplayFrame

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T12:49:18.670

你可以，但是 Morion 说的是正确的，尽量避免使用下面的代码，因为它很昂贵。尝试使用 TexturePacker 并处理 Sprite 帧是一个好主意。

```
yourSprite->setTexture(CCTextureCache::sharedTextureCache()->addImage("2.png")); 
```

# android - 激活我的应用程序，或者您可以在 android 接到来电时说出服务

> ID：12878736
> 
> 赞同：0
> 
> 时间：2012-10-14T02:12:08.457
> 
> 标签：android

我想构建一个 android 应用程序来读取来电者姓名或号码（如果它没有存储在电话簿中）。但我不知道该怎么做。我是android编程的新手。我想我需要启动一个服务，比如在后台运行并监听来电并启动我的应用程序。有人可以帮忙提供示例代码吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T02:18:43.393

这最终是一个与您类似的问题；[来电广播接收器](https://stackoverflow.com/questions/8224049/incoming-call-broadcast-receiver) ......再次在这里; [在Android中检索来电的电话号码](https://stackoverflow.com/questions/1853220/retrieve-incoming-calls-phone-number-in-android?rq=1)

请在此处阅读有关广播接收器的信息[http://developer.android.com/reference/android/content/BroadcastReceiver.html](http://developer.android.com/reference/android/content/BroadcastReceiver.html) ......也在这里熟悉电话管理器；[http://developer.android.com/reference/android/telephony/TelephonyManager.html](http://developer.android.com/reference/android/telephony/TelephonyManager.html)

我认为那时一切都会变得更有意义！

# c++ - 3维数组c ++中的访问冲突（使用malloc）

> ID：12878738
> 
> 赞同：0
> 
> 时间：2012-10-14T02:12:12.703
> 
> 标签：c++, c, dynamic, malloc

我正在尝试制作一个我知道列数为 2 的 3-d 整数数组。我正在使用 malloc 顺序初始化数组。请提出什么问题？

```
int **output_vertex[2];
for(int j=0;j<4;j++)
    output_vertex[j]= (int **)malloc(sizeof(int **));
output_vertex[1][0]==(int*)malloc(2*sizeof(int));
output_vertex[1][0][0] =11;
//also tried  *output_vertex[1][0] =11; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T16:39:00.760

您拥有的数组声明不是您想要的。您有一个指向 int 指针的两元素指针数组。[这个页面](http://www.unixwiz.net/techtips/reading-cdecl.html)是阅读这些声明的好指南。

就个人而言，我更喜欢使用 typedef 并从头开始构建这样的复杂类型：

```
typedef int[2] element_type; // this is the 2-element array of ints
typedef element_type* inner_type; // this is the array of unknown size
typedef inner_type[5] outer_type; // this is the actual type we want to use

outer_type output_vertex; // we now have an array of 5 inner_type variables on the stack
// The output_vertex is *uninitialized* so we have to initialize each of its elements
for (int i=0; i < 5; ++i) {
    output_vertex[i] = new inner_type[SOME_SIZE];
}
// do stuff with output_vertex now that it's initialized
// then, to prevent memory leaks, delete the memory you allocated
for (int i=0; i < 5; ++i) {
    delete[] output_vertex[i];
} 
```

可能有一些方法可以简化，但这应该是一个开始。

如果您希望它`inner_type`是可附加的，我*强烈*建议您使用`std::vector`而不是原始数组。原始数组需要做很多簿记工作，所以我不会举一个例子；但是，这或多或少是您将要做的事情`std::vector`：

```
typedef std::pair<int,int> element_type; // this is the 2-element array of ints as a pair
typedef std::vector<element_type> inner_type; // dynamic vector this time

inner_type output_vertex[5]; // we now have an array of 5 inner_type variables on the stack
// do stuff with output_vertex 
```

`std::vector`与动态分配的数组一样快，但您不必自己做任何簿记。您还具有不需要管理尽可能多的堆分配对象的好处。

请注意，原始数组与容器（例如 ）不兼容`std::vector`，所以我`std::pair`在这里改用。

如果您能够使用 C++11（或 boost），并且需要一个包含两个以上项目的固定大小数组，可以放入标准容器中，请使用`std::array`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T02:20:56.487

我在理解您的错误是什么（或您指的是哪个错误）时遇到了一些麻烦。首先我不知道你为什么要静态创建一个数组然后使用malloc。其次，我不明白你为什么要四次迭代你的 for 循环（0、1、2、3）。你的分配不应该是这样的：

```
int **output_vertex;
output_vertex = (int **)malloc(2*(sizeof(int **))); 
```

# php - $_FILE 遇到空

> ID：12878742
> 
> 赞同：0
> 
> 时间：2012-10-14T02:13:39.347
> 
> 标签：php, forms, file-upload, web

我正在尝试做一些看起来很简单的事情。我想使用 PHP 将文件上传到我的服务器上的目录中。

这是我正在使用的表格：

```
<form action="getFile.php" method="post"><br>
    Filename: <input type="file" name="uploadFile" id="uploadFile">
    <input type="submit" value="Upload File">
</form> 
```

然后，在我选择一个文件并提交后，我在 getFile.php 中执行此操作：

```
<?php
     var_dump($_FILES);
     var_dump($_POST);
?> 
```

作为输出，我得到了这个：

```
array(0) { } array(1) { ["uploadFile"]=> string(11) "Divider.png" } 
```

所以 $_FILES 数组总是空的，但是 $_POST 正确地引入了我的文件名。我环顾四周，发现写权限可能是个问题。我确认可执行文件设置为：

![在此处输入图像描述](../Images/8be6f9a4a942767f40e38b967797662d.png)

仍然没有运气。我正在做的事情似乎并不过分复杂，但我无法让 $_FILES 数组给我任何东西。它只是从表格中自动填写，对吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T02:14:37.820

```
<form action="getFile.php" method="post" enctype="multipart/form-data"><br>
    Filename: <input type="file" name="uploadFile" id="uploadFile">
    <input type="submit" value="Upload File">
</form> 
```

您需要添加`enctype="multipart/form-data"`

# php - 仅在 Windows 服务器上的 PHP 错误

> ID：12878744
> 
> 赞同：0
> 
> 时间：2012-10-14T02:14:08.080
> 
> 标签：php, parsing, syntax-error, wamp, lamp

我不知道从哪里开始修复这个。我有一个带有 Ubuntu 和 Windows 的双启动服务器。在 Ubuntu 中，一切正常，但在 Windows（使用 WAMP）中，我的一些站点上出现神秘的 PHP 错误，而其他站点（使用 PHP）运行正常。

[Ubuntu 截图 http://newplayproject.org/wp-content/uploads/2012/10/screenshot-windows.jpg](http://newplayproject.org/wp-content/uploads/2012/10/screenshot-windows.jpg)

因为它在 Ubuntu 中运行良好，我猜我的代码实际上没有错误，但我在 Windows 上缺少一些 PHP 模块。有任何想法吗？

作为对其中一条评论的回应，这里是“loop-blog.php”的内容：

```
<?php
global $options;
foreach ($options as $value) {
if (get_settings( $value['id'] ) === FALSE) { $$value['id'] = $value['std']; } else { $$value['id'] = get_settings( $value['id'] ); }
}
?>
<?php get_header(); ?>
<? if ($xs_enable_static_feature == "false") { ?>
    <? } else { ?>
    <img src="<?php header_image(); ?>" alt="Static Image" class="static-image" width="880" height="280" title="Static Image" />
<? } ?>
    <? if ($xs_disable_slider== "true") { ?>
    <? } else { ?>
        <?php get_template_part( 'nivoslider' ) ?> 
<? } ?>
    <div id="main">
<h1>Latest Posts</h1>
    <?php if (have_posts()) : ?>
    <?php while (have_posts()) : the_post(); $thumbnail = wp_get_attachment_image_src(get_post_thumbnail_id(), 'large'); ?>
            <div class="post">
                <div class="postcontent">
            <?
            // Checks To See If, Thumbnails Are Disabled
            if ($xs_disable_thumbnails_archieve == "true") { ?>
            <?
            //If Not Disabled, Show Thumbnails
            } else { ?>
            <div class="postimg">
                    <a href="<?php the_permalink(); ?>" title="<?php the_title(); ?>"><img src="<?php bloginfo('template_directory'); ?>/functions/timthumb.php?src=<?php 
                    if (  (function_exists('has_post_thumbnail')) && (has_post_thumbnail())  ) {
                        echo $thumbnail[0]; 
                    } else {
                        $postimage = get_post_meta($post->ID, 'post-image', true);
                        if ($postimage) {
                            echo $postimage;
                        } else {
                            echo catch_that_image();
                        }
                    }
                    ?>&amp;h=<?php echo $xs_thumbnail_height ?>&amp;w=<?php echo $xs_thumbnail_width ?>&amp;s=1" width="<?php echo $xs_thumbnail_width ?>" height="<?php echo $xs_thumbnail_height ?>" alt="<?php the_title(); ?>" /></a>
            </div><!-- /postimg -->  
            <? } ?>
            <h2 class="entry-title"><a href="<?php the_permalink(); ?>" title="<?php the_title(); ?>"><?php the_title(); ?></a></h2>
        <?php the_excerpt(); ?>
        </div><!-- End Post Content -->
                </div><!-- End Post -->
<?php endwhile; ?>
<?php endif; ?>
        <?php
            //Check For the Page Navi Plugin
            if (function_exists('wp_pagenavi')) {
                wp_pagenavi();
            //Show Default Navigation if Page Navi Is Not Installed
            } else { ?>
                <div class="paginate">
                    <div class="paginate-left"><?php previous_posts_link('Newer Posts') ?></div>
                    <div class="paginate-right"><?php next_posts_link('Older Posts') ?></div>
                </div><!-- /paginate -->
            <? } ?>
</div><!-- End Main -->     
<?php get_sidebar(); ?> 
<?php get_footer(); ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T02:31:44.740

我的猜测是您没有`short_open_tag`在 Windows 上启用，因此缺少一些 PHP 块。

检查 if 的输出`phpinfo()`是否`short_open_tag`打开。如果不是，请在您的*php.ini*文件中启用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T02:35:33.803

看这个部分：

```
<?php
    //Check For the Page Navi Plugin
    if (function_exists('wp_pagenavi')) {
        wp_pagenavi();
    //Show Default Navigation if Page Navi Is Not Installed
    } else { ?>
        <div class="paginate">
            <div class="paginate-left"><?php previous_posts_link('Newer Posts') ?></div>
            <div class="paginate-right"><?php next_posts_link('Older Posts') ?></div>
        </div><!-- /paginate -->
    <? } ?> 
```

看起来您可能没有平衡`<?php`和`?>`PHP 标签。

不确定，但肯定要检查一下。

如果可能的话，绝对避免使用（过时的、与 XML 不兼容的）`<? ... ?>`“短标签”形式。绝对是*不是*你想要使用的东西。

恕我直言...

# c# - 如何从文本文件中检索文本并使用 C# 将其保存为字符串？

> ID：12878746
> 
> 赞同：0
> 
> 时间：2012-10-14T02:14:36.053
> 
> 标签：c#, text-files, external, notepad

> **可能重复：**
> [Linq 到文本文件](https://stackoverflow.com/questions/2720074/linq-to-text-files)

我在 C:\Documents and Settings\User\Desktop\ 中有一个名为 file.txt 的 .txt 文件。如何从此文件中检索文本并使用 C# 将其存储到字符串中，而无需使用 Process.GetProcessesByName("notepad"); ?

另外，我如何在同一个记事本文件上写一个字符串并保存更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T03:42:28.507

要将其作为文件中的一个字符串读取，请使用：

```
string text = File.ReadAllText(@"C:\Documents and Settings\User\Desktop\file.txt"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T02:44:39.140

```
using (StreamReader sr = new StreamReader("TestFile.txt"))
        {
            String line = sr.ReadToEnd();
         } 
```

一个简单的谷歌搜索给你上面的答案......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T02:20:50.340

您可以使用`StreamReader`and`StreamWriter`或`File.ReadAllLines`and `File.WriteAllLines`。

# visual-studio-2010 - 从 C 可执行文件中获取返回值，从 Visual Studio 2010 表单中调用

> ID：12878749
> 
> 赞同：1
> 
> 时间：2012-10-14T02:15:15.310
> 
> 标签：visual-studio-2010

我正在尝试从 VB 2010 中创建的表单执行使用 gcc 编译的 C exe。C 可执行文件具有 int main 函数 int main(argv[],argc)

我已经能够使用以下方法将参数传递给函数：

```
 myProcess.StartInfo.UseShellExecute = False
    myProcess.StartInfo.RedirectStandardOutput = True
    myProcess.StartInfo.WorkingDirectory = Directory.GetCurrentDirectory
    myProcess.StartInfo.FileName = "trial4.exe"
    myProcess.StartInfo.CreateNoWindow = True

    If SelectedFileNames_Path > "" Then

        filename_strings = Chr(34) + SelectedFileNames_Path + Chr(34)

        If LocalTimeSelectBtn.Checked = True Then
            SelectedTime = LocalTime
        ElseIf GMTTimeSelectBtn.Checked = True Then
            SelectedTime = GMTTime
        End If

        myProcess.StartInfo.Arguments = SelectedTime + " " + filename_strings + " "

        AddHandler myProcess.OutputDataReceived, AddressOf NetOutputDataHandler

        SelectedFolder.Items.Clear()
        myProcess.Start()
        myProcess.BeginOutputReadLine()
        myProcess.Close()

    Else
        MsgBox(" Please select a directory before generating the CSV files ")
    End If 
```

当 Trial4.exe 使用参数执行时，有一个返回类型 (int) 表明程序是否成功运行。

我找不到任何方法可以从这个 VB 形式的 C 可执行文件中获取返回值。我正在使用 Visual Studio 2010。

任何帮助是极大的赞赏。

谢谢，

# objective-c - 百分比转义字符的问题，XCode 中的 HTTP API 请求

> ID：12878751
> 
> 赞同：2
> 
> 时间：2012-10-14T02:15:45.550
> 
> 标签：objective-c, ios, macos

我一直在开发一个 Mac 应用程序，我正在尝试从 github API 发出一个 Get HTTP 请求，但这个请求是一个条件请求，它看起来像这样：

```
https://api.github.com/repos/soviettoly/sandbox/events -H "If-Modified-Since: Sat, 13 Oct 2012 23:35:10 GMT" 
```

当我根据该请求执行 curl -i 时，我得到了我想要的一切。但是，我一直在 XCode 中尝试这样做，我从 github 得到了 404。

这就是我提出请求的方式：

```
NSMutableString * theURL = [[NSMutableString alloc]initWithString:@"https://api.github.com/repos/soviettoly/sandbox/events -H \"If-Modified-Since: Sat, 13 Oct 2012 23:35:10 GMT\""];

NSLog(@"the normal %@",theURL);
NSString * escaped = [theURL stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSLog(@"the escpaed %@", escaped);
NSURL * test = [NSURL URLWithString: escaped];
NSLog(@"actual URL %@",test);
NSURLRequest * request = [NSURLRequest requestWithURL:test];
[[NSURLConnection alloc]initWithRequest:request delegate:self]; 
```

NSLog 命令的打印结果给了我这个：

```
the normal https://api.github.com/repos/soviettoly/sandbox/events -H "If-Modified-Since: Sat, 13 Oct 2012 23:35:10 GMT"
the escpaed https://api.github.com/repos/soviettoly/sandbox/events%20-H%20%22If-Modified-Since:%20Sat,%2013%20Oct%202012%2023:35:10%20GMT%22
actual URL https://api.github.com/repos/soviettoly/sandbox/events%20-H%20%22If-Modified-Since:%20Sat,%2013%20Oct%202012%2023:35:10%20GMT%22 
```

我不知道为什么 curl 命令给了我正确的结果，而在 XCode 中发出请求却没有。我尝试过不使用转义字符，但 XCode 不喜欢 URL，因为它包含非法字符。我不确定如何在 XCode 中进行这种调用。我一直在为 GitHub 进行其他 API 调用没问题，我只是遇到了这个问题。如果有人能支持那就太好了。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T02:39:11.813

据推测，`curl`您使用的命令是

```
curl https://api.github.com/repos/soviettoly/sandbox/events -H "If-Modified-Since: Sat, 13 Oct 2012 23:35:10 GMT" 
```

那不是请求页面'https://api.github.com/repos/soviettoly/sandbox/events -H“If-Modified-Since: Sat, 13 Oct 2012 23:35:10 GMT”'，它是在请求页面' [https://api.github.com/repos/soviettoly/sandbox/events](https://api.github.com/repos/soviettoly/sandbox/events) '，并发送一个额外的 HTTP 标头 ( `-H`)，其中包含“If-Modified-Since: Sat, 13 Oct 2012 23:35:10 GMT ”。

您的 Objective-c 代码*正在*请求页面“https://api.github.com/repos/soviettoly/sandbox/events -H“If-Modified-Since: Sat, 13 Oct 2012 23:35:10 GMT”'。您需要使用 an`NSMutableURLRequest`并将其设置为将`If-Modified-Since: Sat, 13 Oct 2012 23:35:10 GMT`请求头包含在`https://api.github.com/repos/soviettoly/sandbox/events`.

例如

```
NSURL *url = [NSURL URLWithString:@"http://api.github.com/repos/soviettoly/sandbox/events"];
NSMutableURLRequest *request = [NSMutableURLRequest requestForURL:url];
[request setValue:@"Sat, 13 Oct 2012 23:35:10 GMT" forHTTPHeaderField:@"If-Modified-Since"];
NSURLConnection *connection = [NSURLConnection connectionWithRequest:request delegate:self];
[connection start]; 
```

# android - Android - 如何取消选择 ActionBar 中的所有选项卡

> ID：12878752
> 
> 赞同：2
> 
> 时间：2012-10-14T02:15:46.947
> 
> 标签：android, android-actionbar, actionbarsherlock

我在我的应用程序中使用带有选项卡的 ActionBar 以及老式菜单。当您进入与菜单项关联的片段时，我想保持 ActionBar 可见，但取消选择所有选项卡。

我试过：

```
_actionBar.selectTab(null); 
```

但这会引发异常。

PS 我实际上是在使用 ActionBarSherlock 来实现兼容性，如果这有所作为的话。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T11:45:18.787

然后抓住它:)

我刚刚对此进行了测试，它有效，选项卡下的蓝色下划线消失了，这正是我想要做的。

```
 try {
          ActionBar actionbar = (ActionBar) getActionBar();
          actionbar.selectTab(null);
       } catch (Exception e) {} 
```

程序流程继续进行......这是一种解决方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T11:02:41.087

> 如何取消选择 ActionBar 中的所有选项卡

你没有。始终选择选项卡。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-14T11:16:27.840

您无法取消选择选项卡，您认为会发生什么？应始终选择选项卡之一。

想想你的用户。他们不会期望这种行为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-03T17:27:50.123

我知道我现在正在做死灵术……但我找到了一个可行的解决方案。因此，以防万一其他人试图这样做，给你。

您只需创建一个虚拟选项卡，而不会将其添加到操作栏。选择虚拟选项卡，操作栏中的选项卡都未选中。如果您调试`onTabSelected`.`ActionBar.TabListener`

注意：这假设您`ActionBar.TabListener`在`Activity`.

```
String tabTitles[] = {"A", "B"};
ActionBar actionBar = getActionBar();
actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

for (String tabName : tabTitles) {
    actionBar.addTab(actionBar.newTab().setText(tabName).setTabListener(this), false);  
}

ActionBar.Tab dummyTab = actionBar.newTab().setText("Dummy").setTabListener(this);

try{
    actionBar.selectTab(dummnyTab);
}catch(Exception e){} 
```

非常适合我。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-01-30T00:31:04.583

保存选定和未选定文本颜色的默认颜色状态列表的副本

```
val tabStateTextColors = tabLayout.tabTextColors 
```

将选项卡选定指示器设置为透明

```
tabLayout.setSelectedTabIndicatorColor(getColor(android.R.color.transparent)) 
```

为未选中状态设置文本颜色

```
tabLayout.setTabTextColors(getColor(R.color.gray),getColor(R.color.gray)) 
```

当您想恢复正常时重置颜色

```
tabLayout.setTabTextColors(tabStateTextColors)
tabLayout.setSelectedTabIndicatorColor(getColor(R.color.black) 
```

所以这个的一般要点是设置相应的颜色，这样看起来标签没有被选中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-09T22:45:18.007

**我对TabLayout**有类似的问题。作为一种解决方法，我首先将选定的选项卡指示器颜色设置为透明：

```
int colorTransparent = getColor(R.color.transparent);
tabLayout.setSelectedTabIndicatorColor(colorTransparent); 
```

并隐藏了 ViewPager/content - 所以它基本上看起来像没有选择任何内容，没有当前页面可见。

然后，当用户按下按钮时，我将选定的选项卡指示器颜色改回`R.color.accent`并淡入 ViewPager/content。

# php - 无法从 www 访问 PHP cookie。子域

> ID：12878753
> 
> 赞同：1
> 
> 时间：2012-10-14T02:15:54.007
> 
> 标签：php, cookies

此 cookie 对 domain.com 不可用，`www.domain.com`但对 domain.com 可用。奇怪的是，Firefox 在`www.domain.com`（使用视图信息但我的服务器无法识别 cookie）中看到 cookie。我已经进行了大量的搜索，我找到的唯一解决方案是将域设置为，`.domain.com`但是我的 cookie 无法读取`domain.com`。这是我的代码：

```
//this results in no access through domain.com
setcookie('username', $username, time()+3600*24, '/', '.domain.com');

//this results in domain.com access but not www.domain.com
setcookie('username', $username, time()+3600*24, '/'); 
```

使 cookie 可用于 domain.com 和所有子域的关键是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T02:21:08.733

试试看：

`setcookie('username', $username, time()+3600*24, '/', 'domain.com');`

# image - 如何使用 FFT 对具有根据局部方向和密度调整的不同 Gabor 滤波器的图像进行卷积？

> ID：12878754
> 
> 赞同：14
> 
> 时间：2012-10-14T02:16:08.110
> 
> 标签：image, filter, fft, fingerprint, wavelet

我目前正在开发一个库来使用**SFinGe**方法（由 Maltoni、Maio 和 Cappelli 编写）链接生成合成指纹：[http ://biolab.csr.unibo.it/research.asp?organize=Activities&select=&selObj=12&pathSubj= 111%7C%7C12&](http://biolab.csr.unibo.it/research.asp?organize=Activities&select=&selObj=12&pathSubj=111%7C%7C12&)

其中一个步骤要求我对图像应用不同的 gabor 滤波器，图像中的每个像素都有一个相关的方向和频率，因此卷积不是在整个图像上使用一个内核完成的，但滤波器必须在此过程中根据情况进行更改在像素的这些属性上，图像上的每个像素都以不同的方式改变。

如果您以这种方式应用过滤器，并对图像进行多次卷积（您还必须在每次卷积后对图像进行二值化），您将获得：

![在此处输入图像描述](../Images/5603e0fe84b7764d996fd307416b8b00.png)

一个主指纹，生成这张图像大约需要 20 秒（这太慢了，这就是我想用 FFT 做的原因），因为我必须执行 5 次卷积才能完成它（你从几个随机黑点）。

我的滤镜是 30x30，图像是 275x400。共有 36000 个过滤器，每个度数和密度一个（密度从 0 到 100）。我计划将过滤器的数量从 36000 减少到 9000，因为我可以用这些覆盖所有角度。此外，所有过滤器都经过预先计算并存储在过滤器库中。

这是 gabor 卷积实现的 C# 源代码：

**这两种方法执行卷积：**

```
 /// <summary>
    /// Convolve the image with the different filters depending on the orientation and density of the pixel.
    /// </summary>
    /// <param name="image">The image to be filtered.</param>
    /// <param name="directionalMap">The directional map.</param>
    /// <param name="densityMap">The density map.</param>
    /// <returns></returns>
    public double[,] Filter(double[,] image, double[,] directionalMap, double[,] densityMap)
    {
        int       midX                          = FILTER_SIZE / 2;
        int       midY                          = FILTER_SIZE / 2;
        double[,] filteredImage                 = new double[image.GetLength(0), image.GetLength(1)];
        double[,] filteredImageWithValuesScaled = new double[image.GetLength(0), image.GetLength(1)];
        double[,] finalImage                    = new double[image.GetLength(0), image.GetLength(1)];

        for (int i = 0; i < image.GetLength(0); i++)
            for (int j = 0; j < image.GetLength(1); j++)
            {

                double pixelValue = GetPixelConvolutionValue(image, this.filterBank[(int)Math.Floor((directionalMap[i, j] * 180 / Math.PI))][Math.Round(densityMap[i, j], 2)], i - midX, j - midY);

                filteredImage[i, j] = pixelValue;
            }

        filteredImageWithValuesScaled = this.RescaleValues(filteredImage, 0.0, 255.0);

        return filteredImageWithValuesScaled;
    } 
```

```
 /// <summary>
    /// Gets the pixel convolution value.
    /// </summary>
    /// <param name="image">The image.</param>
    /// <param name="filter">The filter.</param>
    /// <param name="sourceX">The source X.</param>
    /// <param name="sourceY">The source Y.</param>
    /// <returns></returns>
    private double GetPixelConvolutionValue(double[,] image, double[,] filter, int sourceX, int sourceY)
    {
        double result      = 0.0;
        int    totalPixels = 0;

        for (int i = 0; i < filter.GetLength(0); i++)
        {
            if(i + sourceX < 0 || i + sourceX >= image.GetLength(0))
                continue;

            for (int j = 0; j < filter.GetLength(1); j++)
            {
                if(j + sourceY < 0 || j + sourceY >= image.GetLength(1))
                    continue;

                double deltaResult = image[sourceX + i,sourceY + j] * filter[i, j];
                result += deltaResult;

                ++totalPixels;
            }
        }

        double filteredValue = result / totalPixels;
        return filteredValue;
    } 
```

**这两种方法为滤波器组生成不同的 gabor 滤波器：**

```
 /// <summary>
    /// Creates the gabor filter.
    /// </summary>
    /// <param name="size">The size.</param>
    /// <param name="angle">The angle.</param>
    /// <param name="wavelength">The wavelength.</param>
    /// <param name="sigma">The sigma.</param>
    /// <returns></returns>
    public double[,] CreateGaborFilter(int size, double angle, double wavelength, double sigma)
    {
        double[,] filter    = new double[size, size];
        double    frequency = 7 + (100 - (wavelength * 100)) * 0.03;

        int windowSize = FILTER_SIZE/2;

        for (int y = 0; y < size; ++y)
        {
            for (int x = 0; x < size; ++x)
            {
                int dy = -windowSize + y;
                int dx = -windowSize + x;

                filter[x, y] = GaborFilterValue(dy, dx, frequency, angle, 0, sigma, 0.80);
            }
        }

        return filter;
    } 
```

```
 /// <summary>
    /// Gabor filter values generation.
    /// </summary>
    /// <param name="x">The x.</param>
    /// <param name="y">The y.</param>
    /// <param name="lambda">The wavelength.</param>
    /// <param name="theta">The orientation.</param>
    /// <param name="phi">The phaseoffset.</param>
    /// <param name="sigma">The gaussvar.</param>
    /// <param name="gamma">The aspectratio.</param>
    /// <returns></returns>
    double GaborFilterValue(int x, int y, double lambda, double theta, double phi, double sigma, double gamma)
    {
        double xx = x * Math.Cos(theta) + y * Math.Sin(theta);
        double yy = -x * Math.Sin(theta) + y * Math.Cos(theta);

        double envelopeVal = Math.Exp(-((xx * xx + gamma * gamma * yy * yy) / (2.0f * sigma * sigma)));

        double carrierVal = Math.Cos(2.0f * (float)Math.PI * xx / lambda + phi);

        double g = envelopeVal * carrierVal;

        return g;
    } 
```

我的目标是将这段时间减少到 1 秒以下（有几个程序在这段时间内做同样的事情）。因此，由于直接卷积方法对我不起作用，我决定实现快速傅里叶变换卷积，但问题是 FFT 一次将相同的内核应用于整个图像，我需要更改每个像素的内核，因为每个像素都必须根据其属性（密度和方向）进行更改。在这篇文章[中如何将 Gabor 小波应用于图像？](https://stackoverflow.com/questions/9003147/how-to-apply-gabor-wavelets-to-an-image) **reve-etrange**解释了如何对图像应用不同的 gabor 过滤器，但问题是他这样做的方式是将不同的过滤器应用到整个图像，然后对响应求和，而我需要的是来自不同像素的响应到不同的过滤器。

当我将一个过滤器与图像卷积（使用 FFT）时，会发生这种情况：

![在此处输入图像描述](../Images/c1b20dcbb800609347d624ccfa53d77b.png)

这是使用的过滤器：

![在此处输入图像描述](../Images/7b63d8158f0d2b648332c8ca8eb0ab79.png)

这是它与之卷积的图像：

![在此处输入图像描述](../Images/a4591db83c19f4a2f71aa4b253e93899.png)

**这是 FFT 实现的 C# 算法：**

```
 /// <summary>
    /// Convolve the image using FFT.
    /// </summary>
    /// <param name="image">The image to be filtered.</param>
    /// <param name="directionalMap">The directional map.</param>
    /// <param name="densityMap">The density map.</param>
    /// <param name="FFT">if set to <c>true</c> [FFT].</param>
    /// <returns></returns>
    public double[,] Filter(double[,] image, double[,] directionalMap, double[,] densityMap, bool FFT)
    {
        double[,] filter        = null;
        double[,] paddedFilter  = null;
        double[,] paddedImage   = null;
        double[,] croppedImage  = null;
        double[,] filteredImage = new double[image.GetLength(0), image.GetLength(1)];
        double[,] filteredImageWithValuesScaled = new double[image.GetLength(0), image.GetLength(1)];
        double[,] finalImage = new double[image.GetLength(0), image.GetLength(1)];

        filter = this.filterBank[70][0];
        paddedFilter = PadImage(filter, 512, 512, 0, 0); // Pad the filter to have a potency of 2 dimensions.
        paddedImage = PadImage(image, 512, 512, 0, 0);   // Pad the image to have a potency of 2 dimensions.

        FFT fftOne = new FFT(paddedImage);
        FFT fftTwo = new FFT(paddedFilter);

        fftOne.ForwardFFT();
        fftTwo.ForwardFFT();

        FFT result = fftOne * fftTwo;

        result.InverseFFT();

        filteredImage = result.GreyImage;

        filteredImageWithValuesScaled = this.RescaleValues(filteredImage, 0.0, 255.0);

        croppedImage = CropImage(filteredImageWithValuesScaled, image.GetLength(0), image.GetLength(1));

        return croppedImage;
    } 
```

所以我要问的是，你如何通过 FFT 获得不同像素对不同内核的响应？如果这是不可能的，有没有办法改进我的直接卷积，使其至少快 20 倍？

是否可以使用所有过滤器制作一个内核，以便我可以将它们应用于整个图像？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-14T21:42:58.470

我找到了一种方法，用不同的 gabor 滤波器对图像进行卷积，并使用 FFT 根据像素的局部特征收集像素的响应。

这称为上下文过滤，通常当您过滤图像时，您只将单个内核应用于整个事物，但在上下文过滤中，过滤器的特征会根据局部上下文而变化，在这种情况下，像素的密度和方向。

在直接卷积中，该过程非常简单，您只需在卷积的每一步更改内核，但在 FFT 卷积中，由于内核应用于频域中的图像，因此您无法在此过程中更改滤波器属性。所以你这样做的方法是分别用每个过滤器对图像进行卷积，这将给出 N 个过滤图像，其中 N 是你的过滤器库中的过滤器数量，然后你必须构建你的最终图像，从中获取信息基于您正在重新创建的像素的上下文的不同过滤图像。

因此，对于每个像素，您查看他的方向和密度属性，然后从过滤图像中获取该像素位置的值，该过滤图像是通过将原始图像与具有相同属性的过滤器进行卷积而生成的。这是该过程的示例：

**这是方向图的图形表示。**

![在此处输入图像描述](../Images/09f8886008edbe877111d5dbb7b6cbb4.png)

我对所有像素使用相同的密度以减少生成的过滤器数量。

**这是源图像：**

![在此处输入图像描述](../Images/d8b9bbd63ecb6e1d367060c25975be8b.png)

**这是使用的三个过滤器的示例（0 度、45 度、90 度）：**

![在此处输入图像描述](../Images/71e80c8e3f568408c7c476534ec1e79a.png)![在此处输入图像描述](../Images/9c412b89f15479a37eb09dc4ab9c5783.png)![在此处输入图像描述](../Images/b33154bc32cb540a575d37e8caed05a6.png)

**以下是源图像与不同过滤器在不同程度上进行卷积的三个示例：**

![在此处输入图像描述](../Images/a48a518c5a2e90db9e5a5d3b97a6c528.png)

![在此处输入图像描述](../Images/e545c7d36a524359e95e5c28bcd0a639.png)

![在此处输入图像描述](../Images/e0fe6f1a472c7c1f5e6c30918d6e1bb6.png)

最后这是生成的图像，该图像是根据像素的方向和密度从不同的过滤图像中获取像素值创建的。

![在此处输入图像描述](../Images/301ddce8bfc66d2d63c16658b38b0c28.png)

这个过程比直接卷积慢**很多**=（，因为你必须先将原始图像与所有过滤器进行卷积。最终图像需要大约一分钟才能生成。到目前为止，我似乎坚持使用直接卷积=/。

谢谢阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-04T13:02:29.673

你试过CUDA吗？使用卷积和 FFT（在本例中为 cufft）会更快！尝试看看是否有并行化的可能性，实际上我正在努力，我可以说改进是巨大的。目前我要实现 Gabor 过滤

# c# - 限制两个值之间的相机间距

> ID：12878761
> 
> 赞同：0
> 
> 时间：2012-10-14T02:18:24.550
> 
> 标签：c#, xna, camera, pitch

我无法在指定范围内调整我的相机。目前，我的相机可以不受任何限制地围绕模型进行俯仰。我试图将 Y 轴限制在 6 到 36 之间，但如果我继续俯仰，Z 轴将继续向前移动相机。

我正在使用控制器摇杆来控制运动。最终，我想要做的是：“如果相机与目标（模型）的角度超过我的极限角度，无论是否有更多的俯仰（人连续举起拇指杆或下）被应用。”

**注意：这是第三人称相机**

```
 public void cameraPitch(float pitch)
    {  
        cameraDirection = ModelLoad.CameraPos - ModelLoad.camTarget;
        axisPitch = Vector3.Cross(Vector3.Up, cameraDirection);

        // pitch constrained to model's orientation
        axisPitch.Normalize();

        ModelLoad.CameraPos = Vector3.Transform(cameraDirection,
            Matrix.CreateFromAxisAngle(axisPitch, pitch)) + ModelLoad.camTarget;

        if (ModelLoad.camPos.Y > 36.0f)
        {
            ModelLoad.camPos.Y = 36.0f;
        }

        if (ModelLoad.camPos.Y < 6.0f)
        {
            ModelLoad.camPos.Y = 6.0f;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:17:29.437

它与相机在空间中的 X 或 Y 位置没有任何关系。要解决这个问题，您需要将相机的俯仰总量存储在`ModelLoad`您的这个对象中，或者它可以真正持续存在的任何其他地方。然后在将矩阵变换应用于相机的位置向量之前检查这个值，实际上，在做任何这些事情之前检查它......是的，所以如果当前的音高量等于 36，只需退出该方法而不做任何事情，如果不是，请旋转相机并且不要忘记将这个新数量添加到总数中。

我不太记得了，但我认为你传递到的角度`Matrix.CreateFromAxisAngle`必须是弧度，对吧？所以不要检查 36，检查 36 转换为弧度。（假装不知道哈哈）

# html - 具有固定长度但在下面更多的网站

> ID：12878763
> 
> 赞同：0
> 
> 时间：2012-10-14T02:18:48.250
> 
> 标签：html, dreamweaver

> **可能重复：**
> [使 <DIV> 占据所有可见高度屏幕，并在其下方显示内容](https://stackoverflow.com/questions/12848389/make-a-div-occupy-all-visible-height-screen-with-content-below-it)

这可能有一个奇怪的标题，因为我不知道如何称呼它，但是我想创建一个类似于 503.com 的网站，您可以在其中看到主页，但如果您向下滚动，则会出现导航按钮。无论您打开网站时的屏幕分辨率如何，它都会一直隐藏，直到您向下滚动。这叫什么，我该如何复制它，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T11:43:22.287

您是否尝试过为您的导航制作一个 div 并为您的主要内容制作一个 div。本网站没有固定的导航栏。如果您想要固定导航栏，您可能需要考虑在 CSS 中使用固定位置。此外，您可能需要身体标签（也是 css）的最小宽度。这可以避免您的导航元素堆积在一个小窗口上。

# ruby-on-rails - Rails 3.0 中的 CSS

> ID：12878765
> 
> 赞同：2
> 
> 时间：2012-10-14T02:19:01.920
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在使用 Rails 3.0。如何将我放入`/public/stylesheets`View 文件的 CSS 包含在 中`/app/views/posts`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T07:48:21.700

[资产管道](http://guides.rubyonrails.org/asset_pipeline.html)是在 Rails 3.1 中引入的。

在以前的版本（包括 Rails 3.0.0）中，您可以使用`stylesheet_link_tag`.

```
<%= stylesheet_link_tag "main" %> 
```

在视图文件中包含上述代码包含`public/stylesheets/main.css`文件。

更多详细信息，请访问[http://guides.rubyonrails.org/v3.0.0/layouts_and_rendering.html#linking-to-css-files-with-stylesheet_link_tag](http://guides.rubyonrails.org/v3.0.0/layouts_and_rendering.html#linking-to-css-files-with-stylesheet_link_tag)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T03:59:30.123

你应该把它放进去`/public/assets/`（这是惯例），然后你可以这样做：

```
<%= stylesheet_link_tag "example" %> 
```

或者你可以把它放在里面`public/assets/stylesheets/`然后做：

```
<%= stylesheet_link_tag "stylesheets/example" %> 
```

# xml - 如何将 XML 数据库导入 HBASE

> ID：12878767
> 
> 赞同：3
> 
> 时间：2012-10-14T02:19:33.540
> 
> 标签：xml, database, import, hbase

我开始学习 HBASE，我有一个任务，但我不知道从哪里开始。我有一个 XML 数据库，我应该将它导入 HBASE。

示例文件：[https ://www.dropbox.com/s/e47itzrqg36kuci/pub-venues.xml](https://www.dropbox.com/s/e47itzrqg36kuci/pub-venues.xml)

我知道如何创建表格并将 csv 文件导入其中。但问题是，csv 文件有行，每个字段的数量是恒定的，我的意思是即使没有值，逗号之间的字段仍然存在。请帮助我并告诉我在哪里可以找到有关它的一些信息。谢谢你。

# android - Phonegap Android 点击并按住

> ID：12878769
> 
> 赞同：0
> 
> 时间：2012-10-14T02:19:56.747
> 
> 标签：android, cordova, touch-event, touchstart

[我使用的是在这里](https://stackoverflow.com/questions/4710111/determining-long-tap-long-press-tap-hold-on-android-with-jquery)找到的代码版本

```
var startTime, endTime;
                document.getElementById(queryid).addEventListener('touchstart',function() {
                    startTime = new Date().getTime(); 
                },false);

                document.getElementById(queryid).addEventListener('touchend',function(event) {
endTime = new Date().getTime();
if((endTime-startTime) > 1000)
    alert('tap hold event'); 
                },false); 
```

它在某些操作之前执行点击并按住的“技巧”，但我的问题是只有当我停止触摸屏幕时才会触发操作，而我希望在点击至少 1 秒后触发操作，无论我是否停止触摸屏幕与否..

这个似乎更接近我想要的，但它似乎并不完整..（据我了解.. gbStillTouching 总是错误的？我看不到任何地方被切换.. gnstarttime ==nid？不是 nid=gnstarttime ?

```
var gnStartTime = 0;
var gbMove = false;
var gbStillTouching = false;

  function checkTapHold(nID) {
if ((!gbMove) && (gbStillTouching) && (gnStartTime == nID)) {
  gnStartTime = 0;
 gbMove = false; 
 alert('tap hold event');    
 }
 }

window.addEventListener('touchstart',function(event) {
  gnStartTime = Number(new Date());
  setTimeout('checkTapHold(' + gnStartTime + ');clearTimeout();',2000);
},false);

window.addEventListener('touchmove',function(event) {
  gbMove = true;
},false);

window.addEventListener('touchend',function(event) {
 gbStillTouching = false;
  },false); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T01:40:43.173

在朋友的一些有用帮助之后，这是问题的解决方案..

```
 var gnStartTime = 0;
                var gbStillTouching = false;
                function checkTapHold(nID) {
                    if ((gbStillTouching) && (gnStartTime == nID)) {
                        gnStartTime = 0;
                        lastClickedId = queryid; 
                        }
                    }
                document.getElementById(queryid).addEventListener('touchstart',function(event) {
                    gnStartTime = Number(new Date());
                    gbStillTouching = true;
                    setTimeout(function() {checkTapHold(gnStartTime);clearTimeout();},1000);
                    },false);
                document.getElementById(queryid).addEventListener('touchend',function(event) {
                    gbStillTouching = false;
                    },false); 
```

这工作得很好..点击至少 1 秒后，我可以采取所需的行动.. :)

# java - 根据元素内容打印出数组元素（Java）

> ID：12878770
> 
> 赞同：1
> 
> 时间：2012-10-14T02:19:58.443
> 
> 标签：java

我有一个这样的字符串数组：

```
array[0] = "1 4"
array[1] = "2 0"
array[2] = "2 1"
array[3] = "4 2" 
```

并希望在数组元素的第一部分有重复时处理数组并在同一行上打印出数组元素的第二部分，如下所示：

```
4
0 1
2 
```

我一直在努力解决这个问题，但我越来越困惑......

处理基于连续行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T02:40:28.380

对我来说，这看起来像是一个直截了当的 Java 编码问题：

```
String lastKey = null;
for (String str : array) {
   String[] parts = str.split(" ");
   if (parts[0].equals(lastKey)) {
       System.out.print(" ");
   } else if (lastKey != null) {
       System.out.println();
   }
   System.out.print(parts[1]);
   lastKey = parts[0];
}
System.out.println(); 
```

这假设您的输入文件在第一个字段上排序...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T02:51:13.087

查看评论，您似乎可以使用[MultiMaps](http://commons.apache.org/collections/api-3.1/org/apache/commons/collections/MultiMap.html)并简化设计

```
MultiMap mhm = new MultiHashMap();
for ( string line: array) {
   String []pair = line.split(" ");
   mhm.put(pair[0],pair[1]);
}

for (Collection coll = (Collection) mhm.values() ) {
  //print all values from collection?
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T02:24:17.600

我会检查数组列表的索引 n 和 n+1 。标记两个字符串并比较第一个元素。如果第一个元素相同，则可以在一行中从两个字符串中打印第二个元素。

我假设您不是专门寻找 2 作为第一个数字，并且您只想检查列表的连续元素。是这样吗？

# css - 如何使用 cssjanus

> ID：12878771
> 
> 赞同：1
> 
> 时间：2012-10-14T02:20:01.200
> 
> 标签：css

谷歌代码中有一个网站[CSSJanus](http://web.archive.org/web/20130601051135/http://cssjanus.commoner.com/)用于将方向从**ltr**翻转到**rtl**。

在页面底部，他们说：

```
 You could also embed this webapp directly in your markup with your publicly accessible CSS files like so:

    <style>
      @import "/do?file=www.yoursite.com/yourcss.css";
    </style> 
```

有人可以解释我如何以这种方式使用它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T02:26:58.650

当然，在您的 HTML 中包含以下内容：

```
<style>
  @import "http://cssjanus.commoner.com/do/?file=www.yoursite.com/yourcss.css";
</style> 
```

我只是把它放在你在页面上包含的任何其他 CSS 文件下面。

确保提供 CSS 文件的绝对路径（如示例中）而不是相对路径（如`css/style.css`）。

# ruby - 红宝石中的回文检查

> ID：12878775
> 
> 赞同：1
> 
> 时间：2012-10-14T02:20:32.260
> 
> 标签：ruby

为什么此代码为此输入提供错误的输出？

```
def palindrome?(str)
   str.delete('^a-zA-Z')
   str.downcase 
   str == str.reverse
end

INPUT = "A man, a plan, a canal -- Panama"

OUTPUT = Failure/Error: palindrome?("A man, a plan, a canal -- Panama").should be_true, "Incorrect results for input: \"A man, a plan, a canal -- Panama\""
      Incorrect results for input: "A man, a plan, a canal -- Panama"
    # spec.rb:7:in `block (2 levels) in <top (required)>'
    # ./lib/rspec_runner.rb:36:in `block in run_rspec'
    # ./lib/rspec_runner.rb:32:in `run_rspec'
    # ./lib/rspec_runner.rb:23:in `run'
    # lib/graders/weighted_rspec_grader.rb:6:in `grade!'
    # ./grade:31:in `<main>' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T02:25:09.580

String 的 delete 和 downcase 方法不会修改 String 本身，它们返回一个更改的副本。如果要修改接收器，请使用 bang 变体：

```
str.delete!('[^a-zA-Z]')
str.downcase! 
```

* * *

再三考虑，不要这样做，因为会发生这样的可怕事情：

```
string = "hello123"
palindrome?(string)
string    #=> "OLLEH" 
```

相反，制作参数的副本并修改它：

```
def palindrome?(arg)
  str = arg.dup
  str.delete!('[^a-zA-Z]')
  str.downcase!
  str == str.reverse
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T00:48:14.857

如何找到字符串的回文总数

```
class String 
  def palindrome?
    self == self.strip.reverse
  end
  def sub_str_arr
    (0..self.length).inject([]){|ai,i|
      (1..self.length - i).inject(ai){|aj,j|
        aj << self[i,j]
      }
    }
  end
  def num_palindromes
    return -1 if self.length > 100000000
    self.sub_str_arr.reject!{|item| item if item.length < 2 || !item.palindrome?}.size
  end
end

puts "dabadbadbadbdbadbadbdabdbadbadbadbadbadadadbdbdbdbadbdabadbadbdbadbabdabdbbdabdabdbadba".num_palindromes 
```

# c# - 如何在我的 C# - NUNIT 项目中使用对象 ConnectionStringSettings 和 ConfigurationManager？

> ID：12878776
> 
> 赞同：1
> 
> 时间：2012-10-14T02:20:32.773
> 
> 标签：c#, nunit, connection-string

我正在尝试应用此问题中提出的解决方案：[Using the connectionstring in an nunit test](https://stackoverflow.com/questions/3164251/using-the-connectionstring-in-an-nunit-test)但我似乎无法在新的 Framework 4.5 中找到`ConnectionStringSettings`and对象。`ConfigurationManager`

我添加了命名空间：`System.Configuration`. [根据微软文档](http://msdn.microsoft.com/en-us/library/system.configuration.connectionstringsettings.aspx)应该在哪里。但是 Visual Studio 仍然找不到它。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T03:25:56.343

添加对`System.Configuration`您的项目的引用..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-25T07:56:23.367

在项目中添加对 System.configuration 的引用并在文件中使用该 dll

# ios - 用 CGContextAddLineToPoint 和 CGContextSetLineWidth 画一条很细的线

> ID：12878781
> 
> 赞同：15
> 
> 时间：2012-10-14T02:21:15.427
> 
> 标签：ios, ios5, core-graphics, ios6, drawrect

我想在 UIView 的 drawRect 方法中绘制一条非常细的细线宽度。我看到的 CGContextSetLineWidth 值为 0.5 的线与用于绘制边框 CALayer 的 1.0 宽度值不匹配。

您可以看到两者之间的区别 - 红线（宽度 = 1）比紫/蓝线（宽度 = 0.5）细得多。

![用CALayer绘制的边框](../Images/790fa2800772be35b3c7161031db0f20.png)

这是我绘制伪 1.0 宽度水平线的方式：

```
CGContextRef ctx = UIGraphicsGetCurrentContext();
CGContextSetStrokeColorWithColor(ctx, [UIColor blueColor].CGColor);
CGContextSetLineWidth(ctx, 0.5); // I expected a very thin line

CGContextMoveToPoint(ctx, 0, y);
CGContextAddLineToPoint(ctx, self.bounds.size.width, y);

CGContextStrokePath(ctx); 
```

这是同一视图的边框，这次使用 1.0 边框宽度：

```
UIView *myView = (UIView *)self;
CALayer *layer = myView.layer;
layer.borderColor = [UIColor redColor].CGColor;
layer.borderWidth = 1.0; 
```

我需要做些什么来绘制我自己的与 CALayer 版本宽度相同的自定义线？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-14T03:08:35.617

描边路径时，描边跨越路径。换句话说，路径位于笔画的中心。

如果路径沿着两个像素之间的边缘延伸，则笔划将（部分）覆盖该边缘两侧的像素。线宽为 0.5 时，水平笔划将延伸 0.25 点进入路径上方的像素，并延伸 0.25 点进入路径下方的像素。

您需要移动路径，使其不会沿着像素边缘运行：

```
CGFloat lineWidth = 0.5f;
CGContextSetLineWidth(ctx, lineWidth);

// Move the path down by half of the line width so it doesn't straddle pixels.
CGContextMoveToPoint(ctx, 0, y + lineWidth * 0.5f);
CGContextAddLineToPoint(ctx, self.bounds.size.width, y + lineWidth * 0.5f); 
```

但由于您只是绘制一条水平线，因此使用起来更简单`CGContextFillRect`：

```
CGContextSetFillColorWithColor(ctx, [UIColor blueColor].CGColor);
CGContextFillRect(ctx, CGRectMake(0, y, self.bounds.size.width, 0.5f)); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-06-19T20:10:26.123

当未在积分上绘制时，您需要关闭抗锯齿以获得细线。

```
CGContextSetShouldAntialias(ctx, NO) 
```

# javascript - 在地图上将 lat/lng 坐标组合在一起

> ID：12878784
> 
> 赞同：4
> 
> 时间：2012-10-14T02:21:58.210
> 
> 标签：javascript, titanium, coordinates

我正在尝试比较地图的纬度/经度坐标数组，以查看是否有任何“集群”或组合在一起。我想删除那些靠得太近的，所以如果地图上有 4-5 个堆叠在一起，它只会显示 1，直到你再放大一点，然后它会重新计算所有这些.

我尝试将数组与自身进行比较，但似乎并没有给出一致的结果。有没有人尝试过这样的事情？

JSON 示例：

```
[
{
    Latitude = "44.033843";
    Longitude = "-79.48865499999999";
},
{
    Latitude = "44.033843";
    Longitude = "-79.48865499999999";
}] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T17:05:06.173

迭代节点并为缩放级别仅显示那些彼此之间超出设定距离的节点。hasrsine 公式很容易实现：这里的 JS 示例。

[http://www.movable-type.co.uk/scripts/latlong.html](http://www.movable-type.co.uk/scripts/latlong.html)

对于效率方面，您可能不想在每次迭代时根据临时列表计算整个列表，以便作为第一级整理简单的舍入工作（每个度数彼此相距约 60 英里）......从舍入开始放大到最接近的 5 度，然后是 1，然后是 10 度、100 度等。对这些列表进行排序并首先提取唯一的数组值 - 然后计算与结果列表的距离。

当然还有很多其他算法可以做到这一点——但在某些时候你必须计算距离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T17:10:17.883

编辑：这假设您很乐意稍微捏造一些东西，而不是担心地球上各点之间的实际距离，而是查看它们的纬度/经度坐标的“曼哈顿”距离。这取决于您需要有多精确，以及您是否在地球两极附近有点。但对于大多数实际目的来说，这个假设应该没问题。

假设您想要的精度是小数点后一位。然后我将遍历数组，构建一个 has，其中键是舍入坐标，值是纬度/经度对的数组，它们舍入到相应的键。

```
hash = Hash.new
latLongArray.each { |point|
  key = [point.lat.round(1), point.long.round(1)]
  hash[key] = Array(hash[key]) + [point.lat, point.long]
} 
```

这样你就可以将它们聚集在一起，实际上你可以在键本身给出的坐标上放置标记。

# ruby-on-rails - 访问父对象属性的“rails 方式”是什么？

> ID：12878792
> 
> 赞同：8
> 
> 时间：2012-10-14T02:23:44.617
> 
> 标签：ruby-on-rails, ruby, activerecord, model

假设我有一个模型`Doctor`和一个模型`Patient`。一个`Patient belongs_to a Doctor`。

A`Doctor`有一个属性`office`。

我想，给定一个`Patient p`，能够说`p.office`和访问`office`的`p`医生。

我总是可以写一个方法

```
class Patient
    belongs_to :doctor
    def office
        self.doctor.office
    end 
```

但是有没有更自动的方式来将所有的`Doctor`属性方法暴露给`Patient`? 也许使用`method_missing`某种包罗万象的方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-14T02:44:34.357

您可以使用**[委托](http://apidock.com/rails/Module/delegate)**。

```
class Patient
    belongs_to :doctor
    delegate :office, :to => :doctor
end 
```

您可以在一个委托方法中有多个属性。

```
class Patient
    belongs_to :doctor
    delegate :office, :address, :to => :doctor
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T02:43:33.807

我相信您正在谈论使用 Patient 作为 Doctor 的委托人。

```
class Patient < ActiveRecord::Base
  belong_to :doctor

  delegate :office, :some_other_attribute, :to => :doctor
end 
```

我认为这将是 method_missing 这样做的方式：

```
def method_missing(method, *args)
  return doctor.send(method,*args) if doctor.respond_to?(method)
  super
end 
```

# ruby-on-rails - 忽略 .gitignore

> ID：12878794
> 
> 赞同：0
> 
> 时间：2012-10-14T02:23:57.687
> 
> 标签：ruby-on-rails, ruby-on-rails-3, git, gitignore

我的兄弟和我正在合作开发来自两台不同计算机的应用程序——一台 mac 和一台 pc。我这辈子都无法让 Postgres 在他的电脑上工作，经过一大堆小时后，我决定让他的电脑运行 sqlite3 进行开发（这很容易），并且基本上已经完成了所有的生产事情发生在我的 Mac 上，同时仍然允许他从他的电脑上进行功能更改。并将它们合并到 github。

问题是，这涉及到有两个不同的 database.yml 文件、两个不同的 db/schema.rb 文件（我认为）和不同的 gemfile，一个带有 sqlite，另一个带有 pg。

我的想法只是在他的计算机上完成所有这些并将这些文件添加到 gitignore 文件中。但是，如果不忽略这一点，那么当我拉回我的 mac 时，我不会将他不正确的配置合并到我的机器上吗？

无论如何，这就是我考虑将 .gitignore 添加到 .gitignore 的原因。这行得通吗？它会创造宇宙弯曲的悖论吗？有没有更好的方法来做到这一点，我不知道？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T09:12:16.793

这两种模式真的不同吗？他们通常不是。

如果不是，那么只需忽略**config/database.yml**并创建**contig/database_sqlite_example.yml**和**contig/database_ppostgresql_example.yml**。这样，当有人克隆 repo 时，他可以通过简单地将示例文件复制到**database.yml**来使用 SQLite 或 PostgreSQL （这将被忽略）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T15:55:06.337

不，不要忽略 .gitignore

我一直很喜欢为此创建本地分支机构的想法。我实际上让当地的分支机构有点疯狂......但这是一个不同的问题。

*   如果您想拥有一个私人的小型工作泡泡，那么请仅将***您的***分支机构保留在本地。您可以控制合并到 master 中的内容（*或任何您的开发分支*），并且您可以将本地分支中的所有内容提交到 git 以查看历史记录。

*   如果你想分享你正在做的事情，那么只需分享你的分支。但是通过这种方式，您可以在共享本地分支的同时保持环境设置隔离，以便协作可见。

有很多关于 Git 分支和共享的好文档，所以我会把它留给你，而不是用肯定会被破坏的链接来混淆帖子。

我不确定我们中的任何人“真的想”直接在大师中工作，尤其是在像你这样的协作工作中。

# c# - 关闭通知 MonoTouch

> ID：12878797
> 
> 赞同：2
> 
> 时间：2012-10-14T02:24:45.870
> 
> 标签：c#, ipad, xamarin.ios, apple-push-notifications

我在 MonoTouch 中创建了一个 iPhone 应用程序。该应用程序是一个测试，应试者在测试期间不应被打断。您如何确保在我的应用程序运行时关闭通知，以便考生不会被打断？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T07:27:19.267

抱歉，这是不可能的。MonoTouch 没有提供比 Cocoa 更多的操作系统访问权限，这在 Cocoa 中是不可能的。有关更多详细信息，请参阅[此答案](https://stackoverflow.com/a/10026471/1370166)。

# sqlalchemy - 将 sqlalchemy 表设置为自动加载而不是编码模式是否有任何性能损失？

> ID：12878799
> 
> 赞同：2
> 
> 时间：2012-10-14T02:25:03.293
> 
> 标签：sqlalchemy

有什么理由我不应该简单地将每个表设置为自动加载？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T08:16:06.020

当然在配置阶段有，因为需要从数据库加载所需的模式。但这是完全可以接受的，因为这仅在启动期间完成一次。

# symfony - 语义错误 - 教义 2.0

> ID：12878802
> 
> 赞同：0
> 
> 时间：2012-10-14T02:25:11.403
> 
> 标签：symfony, doctrine-orm

这些是我的表：

```
 Table Gift:
        -id 
        -price
        ... 
```

```
 Table Couple:
         -id
         -name 
        ... 
```

```
 table registry:  //provide a many-many relation between gifts and couples 
         -id 
         -coupleId 
         -giftId 
```

```
 table purchase:
         -amount
         -registryId 
```

我已经编写了一个 sql 查询来获取特定情侣的所有礼物信息

```
 $qb = $this->createQueryBuilder('g') //gift
    ->from('\BBB\GiftBundle\Entity\Registry', 'reg')
    ->select('g.id , g.price')
    ->where('reg.gift = g.id')
    ->andWhere('reg.couple = :coupleID')
    ->orderBy('reg.id','DESC')
    ->setParameter('coupleID', $coupleID); 
```

或者

```
 SELECT g.id , g.price,
    FROM gift g, registry reg       
    WHERE reg.gift_id = g.id AND reg.couple_id = 1 
```

我还想获得已购买的礼物（如果有）
EX 的总金额。SUM(purchase.amount) as totalContribute

我试过了：

```
 $qb = $this->createQueryBuilder('g')
    ->from('\BBB\GiftBundle\Entity\Purchase', 'p')
    ->from('\BBB\GiftBundle\Entity\Registry', 'reg')
    ->select('g.id ,  g.price')
    ->addSelect('SUM(p.amount) as totalContribute')
    ->leftJoin('p','pp', 'ON','reg.id = pp.registry')
    ->where('reg.gift = g.id')
    ->andWhere('reg.couple = :coupleID')
    ->orderBy('reg.id','DESC')
    ->setParameter('coupleID', $coupleID); 
```

但它给了我以下错误：

```
 [Semantical Error] line 0, col 145 near 'pp ON reg.id': Error: Identification Variable p used in join path expression but was not defined before. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T07:42:33.877

首先，您应该在连接后的 SQL 语句中定义连接条件，而不是在 WHERE 子句中。原因是它真的没有效率。所以查询应该是这样的：

```
 SELECT g.id , g.price,
 FROM gift g JOIN registry reg ON reg.gift_id = g.id
 WHERE reg.couple_id = 1 
```

但是关于您的 Doctrine 查询，您会收到错误，因为您以错误的方式定义连接。您的查询应该更像：

```
 $qb = $this->createQueryBuilder('g') // You don't have put "from" beacuse I assume you put this into GiftRepository and then Doctrine knows that should be \BBB\GiftBundle\Entity\Gift
    ->select('g.id ,  g.price')
    ->addSelect('SUM(p.amount) as totalContribute')
    ->join('g.purchase','p')          // pay attention for this line: you specify relation basing on entity property - I assume that is "$purchase" for this example        
    ->leftJoin('p.registry', 'reg')   // here you join with \BBB\GiftBundle\Entity\Purchase
    ->where('reg.couple = :coupleID')
    ->orderBy('reg.id','DESC')
    ->setParameter('coupleID', $coupleID); 
```

请将此视为伪代码 - 我没有检查它是否有效，但它应该更像这样。

还有一件事 - 如果您的存储库方法返回 X 实体的对象，您应该将此方法放入 XRepository。

# java - 从 HTTP Post 接收 XML

> ID：12878805
> 
> 赞同：2
> 
> 时间：2012-10-14T02:26:08.890
> 
> 标签：java, xml, apache, restful-url

所以我有以下代码：

```
 public void SendToApplication(HttpServletRequest request) throws IOException, TransformerException {

        BufferedReader br = new BufferedReader(new FileReader(new File("CreatePoll.xml")));
        String line;
        StringBuilder sb = new StringBuilder();

        while((line=br.readLine())!= null) sb.append(line.trim());

        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost postRequest = new HttpPost("http://localhost:8080/cs9322.simple.rest.doodle/rest/polls/comment");
        StringEntity input = new StringEntity(sb.toString());
        input.setContentType("text/xml");
        postRequest.setEntity(input);
        HttpResponse response = httpClient.execute(postRequest);
        HttpEntity entity = response.getEntity();

    } 
```

它读取一个 XML 文件 (CreatePoll.xml)，

```
<Comment xmlns:xs="http://localhost:8080/cs9322.simple.rest.doodle/CommentSchema">
  <Poll_ID>2</Poll_ID>
  <Name>Bob</Name>
  <Text>testing junk</Text>
  <Timestamp>2012-10-14T12:37:04</Timestamp>
</Comment> 
```

并将其发布到 Web 服务，我现在遇到的问题是在发送之后尝试从 Web 服务接收 XML 响应。我打算接收的 XML 是：

```
<comment>
    <address>
    </address>
</comment> 
```

有人可以在这里帮助我吗，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T03:10:03.007

如果您使用[Apache Commons IO](http://commons.apache.org/io/index.html)，那么您可以使用`IOUtils`该类从`HttpEntity`. 使用 twitter Rest API 的示例：

```
DefaultHttpClient httpClient = new DefaultHttpClient();
HttpPost postRequest = new HttpPost("http://search.twitter.com/search.atom?q=elkstein&count=5");
HttpResponse response = httpClient.execute(postRequest);

HttpEntity entity = response.getEntity();
String body = IOUtils.toString(entity.getContent(), "UTF-8"); 
```

# django - 在django中返回直接下载链接

> ID：12878806
> 
> 赞同：0
> 
> 时间：2012-10-14T02:26:16.520
> 
> 标签：django, httpresponse

我有一个带有按钮的表单来下载 ZIP 文件。我的 django 应用返回外部文件的直接下载 URL，但是在返回文件时出现了一些问题：

```
directDownloadLink = site.getDirectDownloadLink(link) 
```

我尝试使用以下方法返回文件：

```
return HttpResponse(directDownloadLink) 
```

它返回一个包含直接链接的空白网页；

```
return HttpResponse(directDownloadLink) 
```

它将我重定向到存储文件的基本页面；

```
mimetypes.init()
return HttpResponseRedirect(directDownloadLink,
                            mimetype='.zip') 
```

这让我下载了一个 100 字节的文件。我要下载的文件是 35kb。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T19:17:51.227

你为什么不这样做

```
<a href="{{ file.url }}">download file</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:18:16.237

我刚刚找到了答案。我的问题是我试图返回的 url 有一个 302 重定向响应。我检索了最终的 url 链接`urllib`，并将其作为简单的超链接返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-13T20:17:05.450

从[文档中](https://docs.djangoproject.com/en/1.8/ref/request-response/#fileresponse-objects)：

```
response = FileResponse(open('myfile.png', 'rb')) 
```

# winapi - Windows 中简单的 .wav 或 .mp3 播放 - 它去哪儿了？

> ID：12878812
> 
> 赞同：5
> 
> 时间：2012-10-14T02:27:32.343
> 
> 标签：winapi, audio, mp3

是否有旧的 Windows sndPlaySound() 函数的“现代”替代品，这是在您专注于其他事务时在后台播放 .wav 文件的一种非常方便的方法？我现在发现自己需要在后台播放一个 .mp3 文件，并且想知道如何以系统本身支持的相对简单的方式完成同样的事情。也许有一个 COM 组件来完成基本的 .mp3 播放？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T09:12:57.350

多年来，已经出现了一些与音频和媒体相关的 API，并且有几种方法可以实现这一目标。

在没有第三方库、最佳操作系统版本覆盖、功能集和简单性方面最好的是 DirectShow API。15 岁，仍然击败竞争对手，在当前和一些以前版本的 Visual Studio 可以针对的所有 Windows 版本中都支持，除了 WinRT。

下面的代码片段播放 MP3 和 WMA 文件。然而，由于它`C++`都是 COM，因此可以很好地跨语言移植。

```
#include "stdafx.h"
#include <dshow.h>
#include <dshowasf.h>
#include <atlcom.h>

#pragma comment(lib, "strmiids.lib")

#define V(x) ATLVERIFY(SUCCEEDED(x))

int _tmain(int argc, _TCHAR* argv[])
{
    static LPCTSTR g_pszPath = _T("F:\\Music\\Cher - Walking In Memphis.mp3");
    V(CoInitialize(NULL));
    {
        CComPtr<IGraphBuilder> pGraphBuilder;
        V(pGraphBuilder.CoCreateInstance(CLSID_FilterGraph));
        CComPtr<IBaseFilter> pBaseFilter;
        V(pBaseFilter.CoCreateInstance(CLSID_WMAsfReader));
        CComQIPtr<IFileSourceFilter> pFileSourceFilter = pBaseFilter;
        ATLASSERT(pFileSourceFilter);
        V(pFileSourceFilter->Load(CT2COLE(g_pszPath), NULL));
        V(pGraphBuilder->AddFilter(pBaseFilter, NULL));
        CComPtr<IEnumPins> pEnumPins;
        V(pBaseFilter->EnumPins(&pEnumPins));
        CComPtr<IPin> pPin;
        ATLVERIFY(pEnumPins->Next(1, &pPin, NULL) == S_OK);
        V(pGraphBuilder->Render(pPin));
        CComQIPtr<IMediaControl> pMediaControl = pGraphBuilder;
        CComQIPtr<IMediaEvent> pMediaEvent = pGraphBuilder;
        ATLASSERT(pMediaControl && pMediaEvent);
        V(pMediaControl->Run());
        LONG nEventCode = 0;
        V(pMediaEvent->WaitForCompletion(INFINITE, &nEventCode));
    }
    CoUninitialize();
    return 0;
} 
```

如果您正在播放自己的文件，您肯定不会包含大的 ID3 标记部分，[代码可能会短两倍](http://www.alax.info/trac/public/browser/trunk/Utilities/Miscellaneous/PlayMp3File/PlayMp3File.cpp#L21)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T09:01:35.440

像这样的许多问题的一个简单答案是简单地调用带有 system("play.exe soundfile.mp3") 或等效的命令行程序。只需将命令行视为另一个 API，一个功能广泛且标准、可移植、灵活、易于调试和易于修改的 API。它可能没有调用库函数那么有效，但这通常并不重要，特别是如果被调用的程序已经在磁盘缓存中。顺便说一句，避免软件复杂性只是因为它是“现代的”；这通常是建筑宇航员和糟糕的编程实践的证据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T08:40:52.330

当您说“现代”时，您是指 Windows 8 WinRT API 吗？或者您的意思是“比为 Windows 3.1 发明的 API 稍新的 API”？

可以在[这里找到音频和视频 api 的调查](http://msdn.microsoft.com/en-us/library/windows/desktop/ee663260%28v=vs.85%29.aspx)

对于经典的 Windows 桌面应用程序，有[PlaySound](http://msdn.microsoft.com/en-us/library/windows/desktop/dd743680%28v=vs.85%29.aspx)，它可以播放任何 WAV 文件。

对于 MP3，我的团队发明了一种使用 DirectSound 和[Windows Media Format SDK](http://msdn.microsoft.com/en-us/library/windows/desktop/dd757738%28v=vs.85%29.aspx)的解决方案。后者可以解码任何 WMA 和 MP3 文件。我们将音频流直接馈入 DSound 缓冲区。这不适合胆小的人。

您可能会使用更高级别的替代方案，即[Windows Media Player API](http://msdn.microsoft.com/en-us/library/windows/desktop/dd758070%28v=vs.85%29.aspx)。

[DirectShow](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375454%28v=vs.85%29.aspx)是一个非常传统的替代方案，但很容易启动和工作。 [Media Foundation](http://msdn.microsoft.com/en-us/library/windows/desktop/ms694197%28v=vs.85%29.asp)是 DirectShow 的替代品。

# php - 检查文件夹中的文件，如果不包含pdf，它将跳过下一个过程

> ID：12878815
> 
> 赞同：0
> 
> 时间：2012-10-14T02:28:30.383
> 
> 标签：php

我想检查文件夹，如果它包含 PDF，它将转到其他过程，如果不包含 PDF，它将跳过该过程。这是代码：

```
<?php
set_time_limit(0);
$savePath  = 'D:/AppServ/www/aca/';

$dir      = opendir($savePath);
$check    = glob($savePath.'*.pdf');
if($check === ''){ exit();} // if not found pdf don't do process below this

// many other process below 
?> 
```

但进程仍然运行，如何打破它？谢谢你 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T02:30:09.207

`glob`当没有匹配项时返回一个空数组，但您正在测试它是否等于一个空字符串。检查数组是否为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T02:31:03.883

```
<?php
    set_time_limit(0);
    $savePath  = 'D:/AppServ/www/aca/';

    $dir      = opendir($savePath);
    $check    = glob($savePath.'*.pdf');
    if(empty($check)){ exit();} // if not found pdf don't do process below this

    // many other process below 
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T02:32:18.183

```
if(!count($check))
    exit; 
```

您正在`$check`与一个始终返回 false 的字符串进行比较。

# python - 检查 HTTP POST 的大小而不保存到磁盘

> ID：12878819
> 
> 赞同：1
> 
> 时间：2012-10-14T02:30:14.587
> 
> 标签：python, pyramid

有没有办法检查 Pyramid 中传入 POST 的大小，而无需将文件保存到磁盘并使用`os`模块？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T05:35:25.423

您应该能够检查`request.content_length`. WSGI 不支持流式传输请求正文，因此必须指定内容长度。如果您曾经访问过`request.body`，`request.params`或者`request.POST`它会读取内容并将其保存到磁盘。

然而，处理这个问题的最好方法是尽可能靠近客户。这意味着如果您在任何类型的代理后面运行，请让该代理拒绝太大的请求。一旦它到达 Python，其他东西可能已经将请求存储到磁盘。

# google-maps - 自定义 Google 地图中的 KML 坐标已关闭？

> ID：12878823
> 
> 赞同：1
> 
> 时间：2012-10-14T02:30:49.713
> 
> 标签：google-maps, kml

**编辑：原来这都是因为 javascript 中的坐标转换函数写错了。该程序的作者显然已经修复了它。**

我正在尝试使用 KML 文件在自定义 Google Maps 地图上显示地标。该地图是由一个名为 Unmined 的 Minecraft 地图程序生成的。

我的问题在于地标的定位。它们被放置在地图上似乎与地图本身的像素或纬度/经度坐标无关的位置。

这是显示我的问题的图像。

[![在此处输入图像描述](../Images/a7926c32662a1e6e6a5681fa1fb61b20.png)](https://i.stack.imgur.com/DjWrj.png)

我加载了一个定义了五个地标的 KML。一个在中间（0,0），一个在左上角（-170,80），一个在右上角（170,80），一个在左下角（-170,-80） )，右下角有一个 (170,-80)。这组标记似乎是水平复制的，但根据我的经验，这是谷歌地图的标准。据我所知，KML 文件中有效坐标的范围是经度 -180 到 180 度和纬度 -90 到 90 度，这意味着任何有效的地标都必须落在该矩形内的某个位置。除了那个矩形几乎没有与地图相交。

如果您需要访问我正在使用的代码，一切都可以在[http://tonyfox.ws/dt/kantomap/](http://tonyfox.ws/dt/kantomap/)的源代码中找到（URL 可能永远不存在）

那么我只是在做一些灾难性的错误还是什么？

在相关说明中，当地图不是实际的地球地图（如这张 Minecraft 世界地图）时，Google 地图如何决定将地图放置在坐标系中的哪个位置？我的地图似乎在经度 14.5 到 19.5 之间，纬度在 25.5 到 28 之间。为什么会有这么奇怪的数字？

# curl - cygwin curl 或 wget 查找 404

> ID：12878829
> 
> 赞同：0
> 
> 时间：2012-10-14T02:32:54.910
> 
> 标签：curl, cygwin, wget

我正在寻找一个包含一堆引用 URL 的文本文档，以查看其中是否有任何 404'ing。如果有 404，我想获取试图放入文本文档的 URL。谁能帮我做到这一点？

我只寻找 404 的 URL，我不希望 wget --spider 等提供的所有其他输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T20:06:11.090

剧本

```
#!/bin/sh
while read
do
  echo "$REPLY"
  if wget --spider -q "$REPLY"
  then
    echo "200 OK"
  else
    echo "404 Not Found"
    echo "$REPLY" >> p404s.txt
  fi
  echo
done < test-urls.txt 
```

脚本输出

```
http://stackoverflow.com
200 OK

http://stackoverflow.com/1
404 Not Found

http://superuser.com
200 OK 
```

# html - 将 h5_job 用于 css

> ID：12878831
> 
> 赞同：1
> 
> 时间：2012-10-14T02:33:47.987
> 
> 标签：html, css

我想问我是否可以将h5_job for css？

```
h5_job{font-size:18px;margin:18px 0;color:#f00a81;font-weight:normal}
<h5_job>Call Me :</h5_job>+62 8175 278 69 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T02:41:45.150

是的，没有。`<h5_job>`不是有效的 HTML。但是，您可以创建自定义 CSS 类并将其应用于元素：

```
<style>
    .h5_job { 
        font-size:18px;
        margin:18px 0;
        color:#f00a81;
        font-weight:normal
    }
</style>

<h5 class="h5_job">Call Me :</h5>+62 8175 278 69 
```

**附加信息**

请参阅[MDN 上的自定义 CSS 类](https://developer.mozilla.org/en-US/docs/Project_talk%3aCustom_CSS_Classes)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T02:40:37.087

`h5_job`不是有效的 html 标记。

但是对于设置的边距，您必须放置`display:block;`

# regex - 为什么这个正则表达式不贪心？

> ID：12878832
> 
> 赞同：9
> 
> 时间：2012-10-14T02:33:51.930
> 
> 标签：regex, perl

在这个正则表达式中

```
$line = 'this is a regular expression';
$line =~  s/^(\w+)\b(.*)\b(\w+)$/$3 $2 $1/;

print $line; 
```

为什么 2 美元等于`" is a regular "`? 我的思考过程是 (.*) 应该是贪婪的并且匹配所有字符直到行尾，因此 $3 将是空的。

不过，这并没有发生。正则表达式匹配器以某种方式在最后一个单词边界之前停止，并用最后一个单词边界之后的内容填充 $3，并将字符串的其余部分发送到 $2。

有什么解释吗？谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-14T02:36:34.537

`$3`使用此正则表达式时不能为空，因为对应的捕获组是`(\w+)`，它必须至少匹配一个单词字符，否则整个匹配将失败。

所以会发生`(.*)`匹配“ `is a regular expression`”，`\b`匹配字符串的结尾，并且`(\w+)`匹配失败。正则表达式引擎然后回溯到`(.*)`匹配 " `is a regular "`（注意匹配包括空格），`\b`匹配之前的单词边界`e`，并`(\w+)`匹配 " `expression`"。

如果您更改`(\w+)`为`(\w*)`then 您将得到您预期的结果，其中`(.*)`会消耗整个字符串。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-14T02:38:05.360

贪婪并不意味着它可以完全匹配所有东西。这只是意味着它可以尽可能多地使用**并且仍然让正则表达式成功**。

这意味着，由于您使用`+`in 组 3 它不能为空，并且仍然成功作为`+`1**或更多**。

如果您希望 3 为空，只需更改`(\w+)`为`(\w?)`. 现在，由于`?`表示 0 或 1，它可以是空的，因此贪婪者`.*`会拿走一切。注意：这似乎只在 Perl 中有效，因为 perl 是如何处理行的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T03:20:49.000

为了使正则表达式匹配整个字符串，`^(\w+)\b`要求整个第一个单词是`\1`. 同样，`\b(\w+)$`要求整个最后一个单词是`\3`。因此，再贪婪`(.*)`也只能捕获'is a regular'，否则模式将不匹配。在匹配字符串的某个时刻，`.*`可能确实占用了整个“是一个正则表达式”，但后来它发现它必须回溯并让匹配项`\w+`也得到它的匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T04:38:08.657

`.*`您编写正则表达式的方式无论是贪婪还是非贪婪都无关紧要。它仍然会匹配。

原因是您使用`\b`了 between`.*`和`\w+`。

```
use strict;
use warnings;

my $string = 'this is a regular expression';

sub test{
  my($match,$desc) = @_;
  print '# ', $desc, "\n" if $desc;
  print "test( qr'$match' );\n";
  if( my @elem = $string =~ $match ){
    print ' 'x4,'[\'', join("']['",@elem), "']\n\n"
  }else{
    print ' 'x4,"FAIL\n\n";
  }
}

test( qr'^ (\w+) \b (.*)  \b (\w+) $'x, 'original' );
test( qr'^ (\w+) \b (.*+) \b (\w+) $'x, 'extra-greedy' );
test( qr'^ (\w+) \b (.*?) \b (\w+) $'x, 'non-greedy' );
test( qr'^ (\w+) \b (.*)  \b (\w*) $'x, '\w* instead of \w+' );
test( qr'^ (\w+) \b (.*)     (\w+) $'x, 'no \b');
test( qr'^ (\w+) \b (.*?)    (\w+) $'x, 'no \b, non-greedy .*?' ); 
```

```
# original
test( qr'(?^x:^ (\w+) \b (.*)  \b (\w+) $)' );
    ['this'][' is a regular ']['expression']

# extra-greedy
test( qr'(?^x:^ (\w+) \b (.*+) \b (\w+) $)' );
    FAIL

# non-greedy
test( qr'(?^x:^ (\w+) \b (.*?) \b (\w+) $)' );
    ['this'][' is a regular ']['expression']

# \w* instead of \w+
test( qr'(?^x:^ (\w+) \b (.*)  \b (\w*) $)' );
    ['this'][' is a regular expression']['']

# no \b
test( qr'(?^x:^ (\w+) \b (.*)     (\w+) $)' );
    ['this'][' is a regular expressio']['n']

# no \b, non-greedy .*?
test( qr'(?^x:^ (\w+) \b (.*?)    (\w+) $)' );
    ['this'][' is a regular ']['expression'] 
```

# python - 使用集合的 Python 唯一列表

> ID：12878833
> 
> 赞同：4
> 
> 时间：2012-10-14T02:33:56.330
> 
> 标签：python, list, set

> **可能重复：**
> [如何在 Python 列表中删除重复项，同时保持顺序？](https://stackoverflow.com/questions/480214/how-do-you-remove-duplicates-from-a-list-in-python-whilst-preserving-order)

我要做的是编写一个方法，该方法将列表作为参数并使用集合返回列表的副本，其中每个元素只出现一次，以及让新列表中的元素按它们的顺序出现第一次出现在原始列表中。我必须为此使用一个集合，但是，我无法做到这样才能使输出的顺序正确，同时获得快速的结果。如果我放这样的东西：

```
def unique(a):

return list(set(a)) 
```

并传递了一个包含数百万个元素的列表，它会很快给我一个结果，但它不会被排序。所以我现在拥有的是：

```
def unique(a):
b = set(a)
c = {}
d = []
for i in b:
    c[a.index(i)] = i
for i in c:
    d.append(c[i])
return d 
```

这给了我想要的结果，但速度不够快。如果我传递一个包含一百万个元素的列表，我可能要等半个小时，而上面的一个班轮只需要不到一秒钟。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-14T02:35:31.503

```
>>> from collections import OrderedDict
>>> items = [1, 2, 3, 'a', 2, 4, 'a']
>>> OrderedDict.fromkeys(items).keys()
[1, 2, 3, 'a', 4] 
```

# php - 为 php 脚本集成 Cakephp 用户名和密码

> ID：12878841
> 
> 赞同：0
> 
> 时间：2012-10-14T02:35:56.593
> 
> 标签：php, cakephp, hash, passwords, sha1

我目前正在开发一个 PHP 项目，我需要从 CakePHP 驱动的网站集成用户信息。

CakePHP 使用以下方法进行密码加密：

```
Security::hash($user['User']['password'],null,true); 
```

我知道，CakePHP 默认使用 SHA1 加密方式。

我曾尝试使用 PHP 使用 SHA1 加密密码，但我知道这与 cakePHP 加密不匹配。

```
 <?php
    $str = 'apple';

    if (sha1($str) === 'd0be2dc421be4fcd0172e5afceea3970e2f3d940') {
        echo "login info found?";
    }
else{

echo "No info found";

}
    ?> 
```

如果有人有解决方案。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T02:53:18.560

因为您的第三个参数为真，CakePHP 将使用存储在您的配置中的值对哈希进行加盐： `$string = Configure::read('Security.salt') . $string;`
参见[http://api.cakephp.org/view_source/security#line-91](http://api.cakephp.org/view_source/security#line-91)

# algorithm - 寻找非支配对的算法

> ID：12878849
> 
> 赞同：7
> 
> 时间：2012-10-14T02:40:09.547
> 
> 标签：algorithm, array-algorithms

给定的是成对的整数`(a1,b1),...,(an,bn)`。如果和，对`i`由对“支配” 。什么是快速确定不受任何其他对支配的对列表的算法？`j``ai < aj``bi < bj`

我们可以检查所有对，并且对于每一对，通过再次遍历所有对来检查它是否被任何其他对支配。这个算法是有序的`n^2`。是否有顺序算法`n`或`n log n`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-14T02:51:26.487

我们可以及时找到非支配对`O(n log n)`。

按降序对对进行排序，`a_i`然后对这些对进行迭代。此外，跟踪`b`迄今为止看到的最大值，`b_max`. 在每一步，如果下一个`(a_i,b_i)` 对的`b`值大于`b_max`，则将其附加到答案列表并更新`b_max`。最终的答案列表将是非支配对。

正确性：当且仅当某对具有较大的`a` 值和较大的 时，一对是支配的`b`。当我们考虑一对时，我们将其`b`值精确地`b`与具有较大`a`' 的对中的最大值进行比较，因此当且仅当它不被支配时，我们才将一对添加到列表中。

运行时：按值对对进行排序需要`O(n log n)`时间。迭代需要`O(n)`时间，因此整体运行时间为`O(n log n)`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T19:49:10.817

如果我理解正确的话，一个非支配对是这样一个，即 a 或 b 分别大于或等于 a 和 b 的最大值。

因此，您只需要为 a 和 b 找到这样的最大值（a for 循环 O(n)），然后执行另一个循环以找到满足上述条件的任何一对。总之，O(n) 时间复杂度。

Java 中的一个小例子，返回一个 ArrayList 的“非支配”对的索引：

```
 ArrayList<Integer>findUndominatedPairIndexes(int[][]arrayOfPairs)
    {
        ArrayList<Integer>result=new ArrayList<Integer>();
        int maxX=Integer.MIN_VALUE;
        int maxY=Integer.MIN_VALUE;
        int i=arrayOfPairs.length;
        /**
         * get the max value
         */
        for(;--i>=0;)
        {
            int x=arrayOfPairs[i][0];
            int y=arrayOfPairs[i][1];
            if (x>maxX)
            {
                maxX=x;
            }
            if (y>maxY)
            {
                maxY=y;
            }
        }
        for(i=arrayOfPairs.length;--i>=0;)
        {
            int[] pair=arrayOfPairs[i];
            if (pair[0]>=maxX||pair[1]>=maxY)
            {
                result.add(new Integer(i));
            }

        }
        return result;
    } 
```

# c++ - C++11 中的 Volatile - 后续

> ID：12878851
> 
> 赞同：1
> 
> 时间：2012-10-14T02:40:14.387
> 
> 标签：c++, c++11, volatile

这是一个后续行动[这是C++11](https://stackoverflow.com/questions/12878344/volatile-in-c11)

在问题中，有人告诉我以下代码在 C++11 中表现出未定义的行为，这让我非常困惑。关于 C++11 中 volatile 的行为，我是否可以阅读任何材料（也许是标准的部分）？

或者有人可以解释问题出在哪里吗？

```
#include <iostream>
#include <chrono>
#include <thread>
using namespace std;

volatile int notify;

void watcher()
{
    this_thread::sleep_for(chrono::seconds(2));
    notify = 1;
    cout << "Notification sent." << endl;
}

int main()
{
    thread(watcher).detach();

    notify = 0;
    while (!notify)
    {
        cout << "Waiting." << endl;
        this_thread::sleep_for(chrono::seconds(1));
    }

    cout << "Notification received." << endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-14T02:43:27.087

该标准描述了内存模型，特别是“数据竞争”的概念（第 1.10 节）。很明显，您的代码对变量存在数据竞争`notify`，因此存在未定义的行为。

要解决此问题，要么保护对`notify`锁的访问，要么将其设置为原子变量，例如`std::atomic<int>`.

# java - 如何将字符串放入Java中字节数组的位置？

> ID：12878853
> 
> 赞同：0
> 
> 时间：2012-10-14T02:40:33.057
> 
> 标签：java, arrays, string, byte

我几乎已经碰壁了，可以就如何为我的一门课程进行项目提出一些建议。这是我要开始工作的代码：

```
for(i = 0; i < sendData.length; i++){
        String hex = Integer.toHexString(C[i]);
    }

    System.out.println("Encrypted Message: ");
    for(i = 0; i < sendData.length; i++){
        System.out.print(sendData[i]);
    } 
```

作为背景知识，这是用于 RC4 加密的代码。我试图将 hex 的值放在 sendData[] 中的一个位置，这是一个固定字节数组。因为 hex 是一个字符串，所以我还没有真正找到一种方法将该值放在 sendData 数组中的某个位置。我知道我不能使用 getBytes() 函数，因为它完全摆脱了十六进制值。如果有人对如何获取字符串值并将其放入固定字节数组中的位置有任何想法，我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T03:03:27.713

您需要了解 Integer`4 bytes`不是单个字节，因此您需要数组`4 bytes`而不是使用单个字节存储在循环中。您可以将 Integer 转换为 byte[] ，如下所示。

```
public static byte[] toByteArray(int value)    
{  
    ByteBuffer bb = ByteBuffer.allocate(4);  
    return bb.putInt(value).array();  
}  

public long toInteger(byte[] bytes) {
    ByteBuffer buffer = ByteBuffer.allocate(4);
    buffer.put(bytes);
    return buffer.getInt();
} 
```

# java - Java 堆栈排序符号平衡

> ID：12878856
> 
> 赞同：0
> 
> 时间：2012-10-14T02:40:47.173
> 
> 标签：java, sorting, stack

我正在编写的程序必须读取加载的文本文档并检查所有 (、[ 和 { 是否平衡，以及忽略 "" 和 // 之后的任何内容。到目前为止，我检查是否前三个符号都是平衡的，但是我无法检查第一次出现的行号。我知道我必须写下如果下一个符号是“或//，我会忽略该行或直到我点击了下一个“，但我不确定正确的语法。任何帮助将不胜感激。这是我到目前为止的内容：

```
 import java.awt.*;
import java.awt.event.*;

import javax.swing.*;

import java.util.*;
import java.io.*;

import javax.swing.filechooser.*;
import javax.swing.text.BadLocationException;

public class Sorting extends JFrame implements ActionListener{

    private Stack<Character> symbolStack;

    JTextArea opentextArea;
    JTextArea placetextArea;
    JMenuItem open;
    final JFileChooser fc = new JFileChooser();

    public static void main(String [] args)
    {
        Sorting gui = new Sorting();

    }

    public Sorting()
     {

        JFrame frame = new JFrame();
        setLayout(new GridLayout(1,2));
        setTitle("Stack Sort");

        JMenuBar menuBar = new JMenuBar();
        JMenu menuItems = new JMenu("File");
        open = new JMenuItem("Open");
        open.addActionListener(this);
        JMenuItem reset = new JMenuItem("Reset");

        reset.addActionListener(
                new ActionListener(){
                    public void actionPerformed(ActionEvent e)
                    {
                        opentextArea.setText("");
                        placetextArea.setText("");
                    }   
                }
            );

        menuItems.add(open);
        menuItems.add(reset);

        menuBar.add(menuItems);
        setJMenuBar(menuBar);
        opentextArea = new JTextArea();
        placetextArea = new JTextArea();
        add(opentextArea);
        add(placetextArea);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
   pack();
   setVisible(true);

     }

    public void actionPerformed(ActionEvent event)
    {

        int returnVal = fc.showOpenDialog(this);

        if (returnVal == JFileChooser.APPROVE_OPTION) 
        {

            File file = fc.getSelectedFile();
            FileInputStream is = null;
            try
            {
                is = new FileInputStream(file);
            }
            catch (FileNotFoundException e)
            {
                System.out.println("Exception: " + e.toString());
            }

            byte [] nextChar = new byte[2];

            try
            {

                int value = is.read(nextChar);
                int num = 1;
                opentextArea.append(num + ":" );

                while (value != -1)
                {
                    String newString = new String(nextChar);
                    if (nextChar[0] == '\n' || nextChar[0] == '\r')
                    {
                        num++;
                        opentextArea.append(newString + num + ":" );

                    }
                    else 
                        opentextArea.append(newString);

                    value = is.read(nextChar);

                }

            }
            catch (IOException e)
            {
                System.out.println("Exception: " + e.toString());
            }

            Stack<Character> stack = new Stack<Character>();
            String s = opentextArea.getText();
            int index = 0;
            int numline = 1;
            while(index < s.length()) {
                char ch = s.charAt(index);
                if (ch == '\n' || ch == '\r')
                    {
                        numline++;
                        index++;
                    }
                else
                if(ch == '{' || ch == '[' || ch == '(')
                    {
                        stack.push(ch);
                        index++;
                    } 
                else {
                    if(stack.empty()) 
                    {
                        index++;
                        //placetextArea.append("No balance characters found.");
                        continue;
                    }

                    char ch1 = stack.pop();

                    if(ch1 == '{' && ch == '}' || ch1 == '[' && ch == ']' || ch1 == '(' && ch == ')') 
                    {
                        placetextArea.append(ch1 + " at line " +numline + " matches up with " + ch + " at line " + numline + "\n");
                    } 
                    else
                        if(ch1 == '{' && ch != '}' || ch1 == '[' && ch != ']' || ch1 == '(' && ch != ')')
                        {
                            placetextArea.append("error unmatched " + ch1 + "at line " +numline);
                            break;
                        } 
                    }

                }

    }
}
} 
```

这是我编辑的代码：

```
 Stack<Character> stack = new Stack<Character>();
        String s = opentextArea.getText();
        int index = 0;
        int numline = 1;
        while(index < s.length()) {
            char ch = s.charAt(index);
            if (ch == '\n' || ch == '\r')
                {
                    numline++;
                    index++;
                }
            else
            if(ch == '{' || ch == '[' || ch == '(')
                {
                    stack.push(ch);
                    index++;
                } 
            else {
                if(stack.empty()) 
                {
                    index++;
                    //placetextArea.append("No balance characters found.");
                    continue;
                }
                // pop an item from stack
                if(ch == '}' || ch == ']' || ch == ')')
                {
                char ch1 = stack.pop();
                // check if it's a matching pair
                if(ch1 == '{' && ch == '}' || ch1 == '[' && ch == ']' || ch1 == '(' && ch == ')') 
                {
                    placetextArea.append(ch1 + " at line " +numline + " matches up with " + ch + " at line " + numline + "\n");
                } 
                else
                    if(ch1 == '{' && ch != '}' || ch1 == '[' && ch != ']' || ch1 == '(' && ch != ')')
                    {
                        placetextArea.append("error unmatched " + ch1 + "at line " +numline);
                        break;

                    } 
                }

            }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T02:57:32.820

仅当遇到或之一时才需要从堆栈`)`中弹出。然后，您检查结束语是否与开头匹配。您还需要定义不匹配时的行为：将开口推回或放下。在 EOF，您应该检查堆栈是否为空。否则你有一些不平衡的东西。`}``]`

# c# - 如何将 DownloadString(url) 允许的时间限制为 500 毫秒？

> ID：12878857
> 
> 赞同：18
> 
> 时间：2012-10-14T02:40:55.980
> 
> 标签：c#, time, limit, downloadstring

我正在编写一个程序，当 textBox1 更改时：

```
URL = "http://example.com/something/";
URL += System.Web.HttpUtility.UrlEncode(textBox1.Text);
s = new System.Net.WebClient().DownloadString(URL); 
```

我想将 DownloadString(URL) 允许的时间限制为 500 毫秒。如果超过，取消它。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-14T03:44:46.880

没有这样的属性，但您可以轻松扩展`WebClient`：

```
public class TimedWebClient: WebClient
{
    // Timeout in milliseconds, default = 600,000 msec
    public int Timeout { get; set; }

    public TimedWebClient()
    {
        this.Timeout = 600000; 
    }

    protected override WebRequest GetWebRequest(Uri address)
    {
        var objWebRequest= base.GetWebRequest(address);
        objWebRequest.Timeout = this.Timeout;
        return objWebRequest;
    }
}

// use
string s = new TimedWebClient {Timeout = 500}.DownloadString(URL); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-14T03:02:11.867

一种方法是在 WebClient 类上使用 DownloadStringAsync 方法，然后在 500 毫秒后异步调用 CancelAsync 方法。有关如何执行此操作的一些指示，请参见[此处的备注部分。](http://msdn.microsoft.com/en-us/library/system.net.webclient.cancelasync%28v=vs.80%29.aspx)

或者，您可以改用具有 Timeout 属性的 WebRequest 类。[请参阅此处](http://msdn.microsoft.com/en-us/library/system.net.webrequest.getresponse.aspx#Y555)的代码示例。

# php - 将自定义回调添加到 Codeigniter 表单验证

> ID：12878863
> 
> 赞同：6
> 
> 时间：2012-10-14T02:42:13.897
> 
> 标签：php, codeigniter, validation

我想将我的注册限制在使用@mywork.com 的电子邮件中，我在 My_Form_validation 中进行了以下操作。

```
public function email_check($email)
    {
        $findme='mywork.com';
        $pos = strpos($email,$findme);
        if ($pos===FALSE)
        {
            $this->CI->form_validation->set_message('email_check', "The %s field does not have our email.");
            return FALSE;
        }
        else
        {
            return TRUE;
        }
    } 
```

我使用它如下。我对用户名和密码使用 CI 规则，它可以工作，对于电子邮件，它接受任何电子邮件地址。任何我感谢任何帮助。

```
function register_form($container)
    {
....
....

/ Set Rules
$config = array(
...//for username
// for email            
    array(
  'field'=>'email',
  'label'=>$this->CI->lang->line('userlib_email'),
  'rules'=>"trim|required|max_length[254]|valid_email|callback_email_check|callback_spare_email"
   ),
...// for password
 );

$this->CI->form_validation->set_rules($config); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-14T03:46:36.443

直接在控制器中创建回调的问题在于，现在可以通过调用在 url 中访问它，`http://localhost/yourapp/yourcontroller/yourcallback`这是不可取的。有一种更模块化的方法可以将您的验证规则放入配置文件中。我建议：

## 你的控制器：

```
<?php
class Your_Controller extends CI_Controller{
    function submit_signup(){
        $this->load->library('form_validation');
        if(!$this->form_validation->run('submit_signup')){
            //error
        }
        else{
            $p = $this->input->post();
            //insert $p into database....
        }
    }
} 
```

## `application/config/form_validation.php`：

```
<?php
$config = array
(   
    //this array key matches what you passed into run()
    'submit_signup' => array
    (
        array(
            'field' => 'email',
            'label' => 'Email',
            'rules' => 'required|max_length[255]|valid_email|belongstowork'
        )
        /*
        ,
        array(
            ...
        )
        */

    )
    //you would add more run() routines here, for separate form submissions.
); 
```

## `application/libraries/MY_Form_validation.php`：

```
<?php
class MY_Form_validation extends CI_Form_validation{    
     function __construct($config = array()){
          parent::__construct($config);
     }
     function belongstowork($email){
         $endsWith = "@mywork.com";
         //see: http://stackoverflow.com/a/619725/568884
         return substr_compare($endsWith, $email, -strlen($email), strlen($email)) === 0;
     }
} 
```

## `application/language/english/form_validation_lang.php`：

添加：`$lang['belongstowork'] = "Sorry, the email must belong to work.";`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T03:22:35.380

您是否需要在 Codeigniter 回调函数中进行类似的验证？

```
$this->form_validation->set_rules('email', 'email', 'trim|required|max_length[254]|valid_email|xss_clean|callback_spare_email[' . $this->input->post('email') . ']');

if ($this->form_validation->run() == FALSE)
{
    // failed
    echo 'FAIL';
}
else
{ 
    // success
    echo 'GOOD';
}

function spare_email($str)
{

    // if first_item and second_item are equal
    if(stristr($str, '@mywork.com') !== FALSE)
    {
    // success
    return $str;
    }
    else
    {
    // set error message
    $this->form_validation->set_message('spare_email', 'No match');

    // return fail
    return FALSE;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-02T20:58:28.150

对乔丹答案的更正，您需要编辑的语言文件应位于

**系统/语言/英文/form_validation_lang.php**

不是应用程序/.../form_validation_lang.php。如果在应用程序路径下创建同名的新文件，它将覆盖系统路径中的原始文件。因此，您将失去所有原始过滤器的使用。

# c# - 在 C# 中使用免费的泛型类型参数模拟委托

> ID：12878864
> 
> 赞同：9
> 
> 时间：2012-10-14T02:42:17.623
> 
> 标签：c#, generics, delegates, function-pointers, strong-typing

***这是一个关于语言设计、模式和语义的难题。请不要仅仅因为您没有看到实用价值而投反对票。***

首先，让我们考虑一下函数及其参数。然后我们将看看函数及其参数/参数和泛型类/函数及其类型参数/类型参数之间的类比。

**函数**是具有一些未指定值的代码块，称为“*参数*”。您提供*参数*并接收结果。

**泛型类**是具有一些未指定的“*类型参数*”的类。您提供*类型参数*，然后您可以使用该类 - 调用构造函数或调用静态方法。

**非泛型类中的泛型函数是具有一些未指定的“**类型***参数*”和一些未指定的“*值参数*”的函数。您提供*类型参数*和*值参数*来接收结果。**

 ****委托**是指向特定函数的指针。创建委托时，您不指定函数*参数*，而是稍后提供它们。

*问题是 .Net 对于具有未指定泛型类型参数*的泛型函数没有等效的 Delegates 。以后不能为*类型参数提供**类型值*。我们可以想象委托不仅具有自由*值参数*，而且还具有自由*类型参数*。

 ***```
static class SomeClass {
    //generic function
    public static T GetValue<T>() {
        return default(T);
    }
}

//creating delegate to generic function or method group
Func{TFree}<TFree> valueFactory = SomeClass.GetValue;

//creating delegate to anonymous generic function
Func{TFree}<int, List<TFree>> listFactory = {TFree}(int capacity) => new List<TFree>(capacity); 
```

下面是我想用 C# 编写的程序的 [伪] 代码。我想知道如何在正确的 C# 程序中实现类似的行为。

**我们如何在 C# 中使用免费的泛型类型参数来模拟委托？**

**我们如何通过非泛型代码将引用/链接传递给具有未知泛型参数的泛型函数？**

```
public static class Factory { //Everything compiles fine here
    public delegate ICollection<T> FactoryDelegate<T>(IEnumerable<T> values);

    public static ICollection<T> CreateList<T>(IEnumerable<T> values) {
        return new List<T>(values);
    }

    public static ICollection<T> CreateSet<T>(IEnumerable<T> values) {
        return new HashSet<T>(values);
    }
}

public class Worker { //non-generic class
    Func{TFree}<FactoryDelegate<TFree>> _factory; //TFree is a "free" generic type paramenter

    public Worker(Func{TFree}<FactoryDelegate<TFree>> factory) {
        _factory = factory;
    }

    public ICollection<T> DoWork<T>(IEnumerable<T> values) { //generic method
        return _factory{T}(values); //supplying T as the argument for type parameter TFree
    }
}

public static class Program {
    public static void Main() {
        string[] values1 = new string[] { "a", "b", "c" };
        int[] values2 = new int[] { 1, 2, 2, 2 };

        Worker listWorker = new Worker(Factory.CreateList); //passing reference to generic function
        Worker setWorker = new Worker(Factory.CreateSet); //passing reference to generic function

        ICollection<string> result1 = listWorker.DoWork(values1);
        ICollection<int> result2 = listWorker.DoWork(values2); //.Count == 4
        ICollection<int> result3 = setWorker.DoWork(values2); //.Count == 2
    }
} 
```

看看我们如何在不指定*类型参数*的情况下将泛型函数（Factory.CreateList 和 Factory.CreateSet）的引用传递给 Worker 类构造函数？稍后在使用具体类型数组调用通用 DoWork 函数时提供*类型参数。*DoWork 使用*类型参数*来选择正确的函数，将*值参数*传递给它并返回接收到的值。

**最终解决方案：** [在 C# 中使用免费的泛型类型参数模拟委托](https://stackoverflow.com/questions/12878864/emulating-delegates-with-free-generic-type-parameters-in-c-sharp/12926979#12926979)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-14T03:40:48.290

我认为您在语言中模拟这一点的方式是不使用委托，而是使用接口。非泛型接口可以包含泛型方法，因此您可以获得具有开放类型参数的委托的大部分行为。

这是您的示例重新加工成一个有效的 C# 程序（请注意，它仍然需要您定义的 Factory 类）：

```
public interface IWorker
{
    ICollection<T> DoWork<T>(IEnumerable<T> values);
}

public class ListCreationWorker : IWorker
{
    public ICollection<T> DoWork<T>(IEnumerable<T> values)
    {
        return Factory.CreateList<T>(values);
    }
}

public class SetCreationWorker : IWorker
{
    public ICollection<T> DoWork<T>(IEnumerable<T> values)
    {
        return Factory.CreateSet<T>(values);  
    }
}

public static class Program {
    public static void Main(string[] args) {
        string[] values1 = new string[] { "a", "b", "c" };
        int[] values2 = new int[] { 1, 2, 2, 2 };

        IWorker listWorker = new ListCreationWorker();
        IWorker setWorker = new SetCreationWorker();

        ICollection<string> result1 = listWorker.DoWork(values1);
        ICollection<int> result2 = listWorker.DoWork(values2); //.Count == 4
        ICollection<int> result3 = setWorker.DoWork(values2); //.Count == 2
    }
}

public static class Factory
{
    public static ICollection<T> CreateSet<T>(IEnumerable<T> values)
    {
        return new HashSet<T>(values);
    }

    public static ICollection<T> CreateList<T>(IEnumerable<T> values)
    {
        return new List<T>(values);
    }
} 
```

您仍然可以获得将调用哪个方法的决定与所述方法的执行分开的重要特征。

但是，您不能做的一件事`IWorker`是以通用方式将任何状态存储在实现中。我不确定这有什么用，因为`DoWork`每次都可以使用不同的类型参数调用该方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T04:09:38.790

解决方案是接口。正如@mike-z 所写，接口支持泛型方法。因此，我们可以使用泛型方法创建非泛型接口 IFactory，该方法封装了对某个类中泛型方法的引用。要使用此类接口绑定 [Factory] ​​类的泛型方法，我们通常需要创建实现 IFactory 接口的小类。它们的行为就像 lambdas 使用的闭包一样。

我看不出这与我要求的通用方法委托之间有很大的语义差异。该解决方案非常类似于编译器为 lambdas [仅调用其他方法] 所做的（使用调用的方法创建闭包）。

我们失去了什么？主要是语法糖。

*   匿名函数/lambdas。我们无法创建通用 lambda。能够创建匿名类（如在 Java 中）将解决问题。但这并不是什么大问题，因为 lambda 只是 .Net 中的语法糖。

*   能够从方法组隐式创建委托/链接（C# 术语）。如果它是通用的，我们不能以任何方式使用方法组。这也不会影响语义。

*   定义通用委托的能力受到阻碍。我们不能`IFactory<U, V>`用 method 制作通用接口`V<T> Create<T>(U<T> arg)`。这也不是问题。

这是解决方案的代码。问题中的`Factory`课程保持不变。

```
public interface IFactory {
    ICollection<T> Create<T>(IEnumerable<T> values);
}

public class Worker { //not generic
    IFactory _factory;

    public Worker(IFactory factory) {
        _factory = factory;
    }

    public ICollection<T> DoWork<T>(IEnumerable<T> values) { //generic method
        return _factory.Create<T>(values);
    }
}

public static class Program {
    class ListFactory : IFactory {
        public ICollection<T> Create<T>(IEnumerable<T> values) {
            return Factory.CreateList(values);
        }
    }

    class SetFactory : IFactory {
        public ICollection<T> Create<T>(IEnumerable<T> values) {
            return Factory.CreateSet(values);
        }
    }

    public static void Main() {
        string[] values1 = new string[] { "a", "b", "c" };
        int[] values2 = new int[] { 1, 2, 2, 2 };

        Worker listWorker = new Worker(new ListFactory());
        Worker setWorker = new Worker(new SetFactory());

        ICollection<string> result1 = listWorker.DoWork(values1);
        ICollection<int> result2 = listWorker.DoWork(values2); //.Count == 4
        ICollection<int> result3 = setWorker.DoWork(values2); //.Count == 2
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-14T02:53:58.050

这在.Net 的类型系统下实际上没有意义。

你所描述的是一个*类型构造函数*——一个“函数”，它接受一个或多个类型并返回一个具体的（*参数化*或*封闭*的）类型。

问题是类型构造函数本身不是类型。您不能拥有开放类型的对象或变量；类型构造函数只能用于生成具体类型。

换句话说，没有办法在.Net 的类型系统中表示对开放函数的引用。

* * *

你能做的最好的就是使用反射；a`MethodInfo`可以描述一个开放的泛型方法。
您可以通过编写一个泛型方法来获得对 open 的编译时类型安全引用，该`MethodInfo`方法采用带有假泛型参数的表达式树：

```
public MethodInfo GetMethod<TPlaceholder>(Expression<Action> method) {
    //Find the MethodInfo and remove all TPlaceholder parameters
}

GetMethod<string>(() => SomeMethod<string>(...)); 
```

如果您想引用对该参数有约束的开放泛型方法，则该`TPlaceholder`参数是必需的；您可以选择满足约束的占位符类型。*****

# ruby-on-rails - Rails - 未找到定义的“has_many”关系的列

> ID：12878866
> 
> 赞同：0
> 
> 时间：2012-10-14T02:42:24.170
> 
> 标签：ruby-on-rails, database

我定义了一个`Post`可以链接或链接到多个帖子的类。为此，我添加了一个`PostLink`指定`post_to`and的类`post_from`。

我当然生成了这个`PostLink`类，并添加了`rails g model post_link from_post:integer to_post:integer``rake db:migrate`

```
belongs_to :from_post, :class_name => 'Post' 
belongs_to :to_post, :class_name => 'Post' 
```

到班级。

`has_many :post_links`我的`Post`班上也有。

我跑了`rails console`，打印出来了，这是意料之中的。但是，在我保存使用后`Post.new.post_links``nil``Post`

```
p = Post.new
p.save 
```

然后运行`p.post_links`，它会打印出以下错误消息：

```
SQLite3::SQLException: no such column: post_links.post_id: SELECT "post_links".* 
FROM "post_links"  WHERE "post_links"."post_id" = 1 
```

那么有人知道为什么保存到数据库后`post_link`无法访问吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T03:37:24.240

中的`has_many :post_links`关联会`Post`引发错误，因为它假定 post_links 中的外键是`post_id`默认的。由于您使用`from_post_id`and `to_post_id`，因此您必须找到一种方法来对“发件人”帖子和“发件人”帖子的 post_links 进行分组，以获得帖子的总 post_links 集。

一种方法可能是定义两个关联，`Post`以及将集合添加在一起的附加方法：

```
class Post < ActiveRecord::Base

  has_many :from_post_links, :class_name => 'PostLink', :foreign_key => :from_post_id
  has_many :to_post_links, :class_name => 'PostLink', :foreign_key => :to_post_id'

  def post_links
    from_post_links + to_post_links
  end

end 
```

作为另一种选择，您可以为关联提供特殊的 sql，以便在单个查询中对集合进行分组：

```
class Post < ActiveRecord::Base

  has_many :post_links, :finder_sql => Proc.new {
    %Q{
      SELECT *
      FROM post_links pl
      WHERE pl.to_post_id = #{id} 
      OR pl.from_post_id = #{id}
    }
  } 
```

# html - 如何使用 QTP 10 自动化 Eclipse

> ID：12878867
> 
> 赞同：1
> 
> 时间：2012-10-14T02:42:32.140
> 
> 标签：html, sap, qtp, selenium-webdriver

这是我第一次考虑这种情况。我在 Selenium webdriver 中的脚本很少，在 QTP 中的脚本很少。

使用 Webdriver，我通过 eclipse Juno 自动化了基于 Web 的 HTML5 应用程序，并使用 QTP，我自动化了 SAP 采购请求下订单。

现在两者都成为我的依赖模块，从 SAP 数据流向 Web 基础应用程序。

我计划通过 QTP 自动化 eclipse，以便它执行 selenium 脚本。

有人可以为我提供如何处理情况并给我一些继续进行的策略。

在此先感谢 Raj R

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:18:23.340

由于 Eclipse UI 是用 Java 编写的，您应该能够使用 QTP 的 Java 插件自动化 Eclipse。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T10:54:12.483

如果可能的话，我不会在 Eclipse 上记录来自 QTP 的操作。您知道 Eclipse 有一[组丰富的运行时选项](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/misc/runtime-options.html)吗？看看您是否可以创建一个 eclipse .ini 文件来启动所需的 Selenium 测试。当它按需要工作时，您可以使用`SystemUtil.Run`QTP 中的语句启动此文件。

# java - 子类型多态性和数组

> ID：12878879
> 
> 赞同：13
> 
> 时间：2012-10-14T02:44:44.653
> 
> 标签：java, arrays, polymorphism

```
Computer[] labComputers = new Computer[10]; 
```

和

```
public class Computer {
...
     void toString(){
     // print computer specs
     }
}
public class Notebook extends Computer{
...
     void toString(){
     // print computer specs + laptop color
     }
} 
```

每个下标变量`labComputers[i]`都可以引用一个`Computer`对象或一个`Notebook`对象，因为`Notebook`它是`Computer`. 对于方法调用`labComputers[i].toString()`，多态性确保调用正确的`toString`方法。

我想知道如果我们这样做

```
Notebook[] labComputers = new Notebook[10]; 
```

`Computer`如果我引用对象和`Notebook`对象，我会得到什么类型或错误

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-14T02:48:11.770

由于问题特别询问`kind of error`我将用以下场景解释它们

如果你在下面做

```
Notebook[] labComputers = new Notebook[10]; 
```

现在您只能在数组中设置 Notebook 对象。

```
labComputers[0]  = new Notebook(); // Fine
labComputers[1]  = new Computer(); // Compilation error 
```

现在如果你这样做

```
Computer[] notebooks = new Notebook[10];
notebooks[0] = new Notebook();
notebooks[1] = new Computer(); // <--- ArrayStoreException 
```

因为数组本质上是`covarant`,`reified`即。如果`Sub`是 的子类型`Super`，则数组类型`Sub[]`是 的子类型`Super[]`，并且数组在运行时强制执行其元素类型，这将导致 ArrayStoreException

您可以阅读有关[多态性](http://docs.oracle.com/javase/tutorial/java/IandI/polymorphism.html)的 Oracle 文档以了解更多它的工作原理。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-14T02:58:35.940

我认为您必须了解多态性是如何工作的。

**多态性是一种允许多个数据类型通过公共接口以相同方式运行的功能。**

例如，

```
 Computer  // Base class
       |    |
 Notebook   Desktop    // Both inherits of Computer 
```

多态性将允许您管理一组计算机，无论它们是笔记本电脑还是台式机。

```
Computer[] computerArray = new Computer[2];

computerArray[0] = new Notebook();
computerArray[1] = new Desktop(); 
```

这样做的好处是您不必知道您正在使用哪种计算机子类型。他们将表现得像计算机。

现在有很大的不同，在您的计算机课程中，您可以拥有：

```
public Class Computer 
{
    abstract void MoveMouse();
} 
```

这将使您有机会在 Notebook 和 Desktop 中以不同的方式重新定义此方法。MoveMouse() 现在对 computeArray 可用，因为我们在 Computer 中定义了它。

如果你这样做：

```
computerArray[0].MoveMouse(); // which contains a Notebook

computerArray[1].MoveMouse(); // which contains a Desktop 
```

`Notebook`这将调用在or中实现的函数`Desktop`。

这些功能实现的一个例子：

```
public Class Notebook extends Computer
{
    void MoveMouse();
    {
         MousePad.Move();
    }
}

public Class Desktop extends Computer
{
    void MoveMouse();
    {
         USBMouse.Move();
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-14T02:52:14.163

> 每个下标变量`labComputers[i]`可以引用一个`Computer`对象或一个`Notebook`对象。

这在技术上是正确的，但您必须记住，every`Notebook`都是`Computer`对象，但**并非**every`Computer`都是`Notebook`.

因此，如果你有

```
Notebook[] labComputers = new Notebook[10]; 
```

您将*无法*在数组中放置`Computer`实例，因为并非每个`Computer`都是`Notebook`- 并且您的数组只能保存`Notebook`s。

# c++ - 在 Windows 中分配内存

> ID：12878880
> 
> 赞同：1
> 
> 时间：2012-10-14T02:44:55.227
> 
> 标签：c++, c, windows, memory

> **可能重复：**
> [malloc() 与 HeapAlloc()](https://stackoverflow.com/questions/8224347/malloc-vs-heapalloc)

我知道我们可以在 C 中使用`malloc`/`free`来分配/释放堆内存，并在 C++ 中使用`new`/`delete`来做类似的事情。

至于 Windows，我偶尔看到有人使用`HeapAlloc`etc API 来分配内存，与 C/C++ 对应的有哪些不同？

什么是在堆上分配`wchar_t`缓冲区的最佳方法，该缓冲区将用作某些 Windows API 的输入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T02:47:06.533

malloc/new 都是使用 HeapAlloc 实现的，所以实际差别很小。当然存在实现差异；malloc 将在失败时返回 null，new 将抛出等。

# android - 投掷不工作

> ID：12878883
> 
> 赞同：0
> 
> 时间：2012-10-14T02:46:33.113
> 
> 标签：android

我试图在投掷动作上显示不同的图像。为此，我使用了 SimpleOnGestureListener。但是一扔是行不通的。大家能帮我找出原因吗。这是代码

```
public class MainActivity extends Activity{
ImageView m_imageView;
GestureDetector m_gdt;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Log.v("INFO", "Inside oncreate");

    m_gdt = new GestureDetector(this, new GestureListener());

    m_imageView = (ImageView)findViewById(R.id.imageView1);

    m_imageView.setOnTouchListener(new OnTouchListener() {
        @Override 
        public boolean onTouch(final View view, final MotionEvent event) {
            Log.v("INFO", "Inside onTouch");

            return m_gdt.onTouchEvent(event);
        }
    });

}
} 

public class GestureListener extends SimpleOnGestureListener{

private final int SWIPE_MIN_DISTANCE = 120;
private final int SWIPE_THRESHOLD_VELOCITY = 200;

@Override 
public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
    Log.v("INFO", "Fling detected");
    if(e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
        // Right to left, your code here
        Log.v("INFO", "Image moving forward");
        return true;
    } else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) >  SWIPE_THRESHOLD_VELOCITY) {
        // Left to right, your code here
        Log.v("INFO", "Image moving backward");
        return true;
    }
    return false;
}
} 
```

显示日志消息“Inside onTouch”。但是 onFling 方法永远不会被调用。我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T02:54:58.450

使用这个问题的第三个答案（来自 Thomas Fankhauser），它会起作用： [Fling gesture detection on grid layout](https://stackoverflow.com/questions/937313/android-basic-gesture-detection)

# ruby - Twitter api 速率限制的解决方法

> ID：12878888
> 
> 赞同：4
> 
> 时间：2012-10-14T02:48:16.620
> 
> 标签：ruby, twitter

我收集了一堆用户并将它们放入变量“用户”中。我正在循环浏览它们并尝试使用我的新 Twitter 帐户关注它们。但是，大约 15 点后，我因超出速率限制而被 Twitter 阻止。我想再次运行它，但没有我已经关注的用户。在他们被关注后，如何从“用户”数组中删除“我”，或者以某种方式从我尚未关注的用户中返回一个新数组？我知道诸如 pop 和 unshift 等方法，但我不确定 'i' 来自 'users' 数组中的哪个位置。我是一个永远的新手，所以请包括尽可能多的细节

不，用户实际上是一个“光标”而不是一个数组，因此，它没有长度方法

```
>> users.each do |i|
?> myuseraccount.twitter.follow(i)
>> end 
```

Twitter::Error::TooManyRequests：超出速率限制

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-14T02:57:42.867

一个简单的黑客可以利用调用[`sleep(n)`](http://ruby-doc.org/core-1.9.3/Kernel.html#method-i-sleep)：

```
>> users.each do |i|
?>   myuseraccount.twitter.follow(i)
?>   sleep(3)
>> end 
```

增加睡眠计数，直到`twitter-api`停止抛出错误。

这个问题的适当解决方案是通过`rate-limiting`.

方法调用速率限制的一个可能的 ruby​​ 解决方案是[`glutton_ratelimit`](https://github.com/stungeye/glutton_ratelimit).

编辑 - 而且，正如[凯尔](https://stackoverflow.com/users/640577/kyle)所指出的，[这个问题有一个记录在案的解决方案](http://sferik.github.io/twitter/)。

以下是该解决方案的增强版本：

```
def rate_limited_follow (account, user)
  num_attempts = 0
  begin
    num_attempts += 1
    account.twitter.follow(user)
  rescue Twitter::Error::TooManyRequests => error
    if num_attempts % 3 == 0
      sleep(15*60) # minutes * 60 seconds
      retry
    else
      retry
    end
  end
end

>> users.each do |i|
?>   rate_limited_follow(myuseraccount, i)
>> end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T02:55:29.777

有许多解决方案，但在您的情况下最简单的可能是`shift`：

```
while users.length > 0 do
  myuseraccount.twitter.follow(users.first)
  users.shift
end 
```

这将在处理每个用户时从数组中删除它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-03T01:54:43.837

这是我所做的

```
 def self.careful(&block)

    begin
        client = get_current_client()
        yield client

    rescue Twitter::Error::TooManyRequests => error

        current_user= User.find_by_token(client.instance_variable_get("@oauth_token"))
        current_user.update_attribute(:rate_limit_at, Time.now)
        change_current_client()
        retry

    end
end 
```

此块使用当前客户端执行 api 调用。如果达到速率限制，它会使用 change_current_client() 方法将客户端更改为另一个客户端，然后使用新客户端重试调用。如果你愿意，你可以在那里添加一个 sleep() 。

这可以像这样使用

```
careful{|client| client.search("#something")} 
```

# java - JPanel 只显示一小部分图形

> ID：12878890
> 
> 赞同：1
> 
> 时间：2012-10-14T02:48:41.483
> 
> 标签：java, swing, resize, grid, paintcomponent

这是我在stackoverflow上的第一篇文章，所以我希望我这样做是正确的。

无论如何，我正在尝试在 JFrame 内创建一个 JPanel 并在该面板内绘制一个 Grid 。因此，我重写了 paintComponents() 方法来做到这一点。我试图设置该面板的首选尺寸和最小尺寸，但无论我做什么，它只显示该面板的 12x12 部分。

这是我的网格课：

```
package gui;

import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.util.Map;

import javax.swing.BorderFactory;
import javax.swing.JPanel;

import collections.MapUtils;
import executor.Robot;

public class Grid extends JPanel {
    private static final long serialVersionUID = 1L;
    private int rs = GUI.ROBOT_SIZE;

    private final int width;
    private final int height;
    private final Map<Coord, Color> colors;

    private int rx;
    private int ry;

    public Grid(int width, int height) {
        this.width = width;
        this.height = height;

        colors = MapUtils.hashMap();
        for(int i = 0; i < width; i++)
                for(int j = 0; j < height; j++)
                colors.put(new Coord(i, j), Color.WHITE);

        rx = width/2;
        ry = height/2;
        setPreferredSize(new Dimension(width * rs, height * rs));
        setBorder(BorderFactory.createLineBorder(Color.CYAN));
    }

    public int getWidth() {
        return width;
    }

    public int getHeight() {
    return height;
}

public void update(Robot robot) {
    this.rx = width/2 + robot.getX();
    this.ry = height/2 + robot.getY();

    repaint();
}

@Override
public void paintComponent(Graphics g) {
    super.paintComponent(g);
    for(Map.Entry<Coord, Color> es : colors.entrySet()) {
        g.setColor(Color.RED);
//          g.setColor(es.getValue());
        Coord c = es.getKey();
        g.fillRect(c.getX()*rs, c.getY()*rs, rs, rs);
    }

    g.setColor(Color.BLACK);
    for(int i = 0; i <= width; i++)
        g.drawLine(i*rs, 0, i*rs, height*rs);
    for(int i = 0; i <= height; i++)
        g.drawLine(0, i*rs, width*rs, i*rs);

    g.setColor(Color.DARK_GRAY);
    g.drawOval(rx*rs, ry*rs, rs, rs);
    g.setColor(Color.LIGHT_GRAY);
    g.fillOval(rx*rs, ry*rs, rs, rs);
}
} 
```

这就是它的样子（注意左上角的 12x12 红色方块，应该是网格）：http: [//imageshack.us/a/img818/3545/49409190.png](http://imageshack.us/a/img818/3545/49409190.png)

面板本身已正确调整大小，但图形未填充它。我不知道，也许我忽略了一些简单的事情，但现在我不知道该怎么做。我怎样才能让它绘制整个网格？

编辑：啊，现在我觉得自己很愚蠢。我的错误是将覆盖 JComponent 方法的 getter 命名为“getWidth”和“getHeight”。重命名它们后，它工作得很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:13:06.663

我发现出了什么问题。我将宽度和高度的 getter 分别称为“getWidth()”和“getHeight()”，它们覆盖了从 JPanel 继承的方法。将它们重命名为不同的名称后，它起作用了:) 但是感谢您的所有回复！

# c++ - 将文件重定向到标准输入时getline导致无限循环

> ID：12878894
> 
> 赞同：2
> 
> 时间：2012-10-14T02:49:18.717
> 
> 标签：c++, infinite-loop, getline

以下代码只是将标准输入回显到标准输出。如果我像这样运行程序`./a.out`，我可以输入任何内容并且程序运行良好。但是，如果我像这样运行它，`./a.out < input.txt`我会得到一个无限循环，无论`input.txt`.

```
#include <iostream>

using namespace std;

int main() {
  string input;
  while (true) {
    cout << "Type your input: ";
    getline(cin, input);
    cout << input << endl;
  }
  return 0;
} 
```

我究竟做错了什么？

编辑：为了澄清，我希望在输入文件的输入完成后，getline 等待来自标准输入的更多输入。相反，它会在什么都没有时继续读取。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T02:51:16.633

您的循环没有终止条件，无论是中断还是在`while`零件内部。相反，你可能想要这个：

```
while (getline(cin, input)) 
```

这将在输入失败时结束，很可能是由于已达到 EOF。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T02:51:46.370

您的循环没有终止条件：`while (true)`在任何情况下都是无限循环 - 也就是说，没有中断/退出/等。在循环体中。

我猜当你使用你的程序来回显时，`stdin`你按 Ctrl-C 来结束它。使用 运行您的程序`./a.out`，然后键入 Ctrl-D (EOF)：您还将获得一个无限循环。

查看[文档](http://www.cplusplus.com/reference/string/getline/)：`getline`使用返回值结束循环：

```
while (getline(cin, input)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T02:59:18.967

你做错的是你*忽略*了输入操作的结果，在这种情况下`getline`。

*您绝不能忽略输入操作的结果。*这样做总是一个编程错误。您无法知道或假设外部数据的状态，因此您必须始终检查输入操作是否成功。如果没有，那么访问声称的输入变量以进行读取通常是错误的，因此您确实需要每次都检查并*在*访问结果之前进行检查。

在本例中，`std::getline`返回对流对象的引用，您可以将流评估为布尔值。它评估`true`好像且仅当提取成功时；否则，您*不得*使用结果（并且可能停止阅读）。

总而言之，代码应该是这样的：

```
for (std::string line; std::getline(std::cin, line); )
{
    // use "line"
} 
```

# visual-studio-2010 - 如何删除 Visual Studio 选择器中的重复条目？

> ID：12878895
> 
> 赞同：2
> 
> 时间：2012-10-14T02:49:29.437
> 
> 标签：visual-studio-2010

我正在使用 Visual C++ Express 2010。奇怪的是，当我使用“Microsoft Visual Studio 版本选择器”（例如资源管理器中的 dblclick）启动 *.sln 文件时，每个已安装的产品都有 2 行。

含义重复（2010 和 10 相同）

*   视觉 C++ 2010
*   视觉 C++ 10

如何删除其中之一？

![VS 选择器中的重复条目](../Images/4c86bf0821f13ae1e03be864f229c95d.png)

“关于”对话框的屏幕截图。

![Visual C++ 速成版](../Images/de7ac572888392319674f5ad8dea648a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T15:19:59.400

这些值可能在注册表中。您应该能够在 Sysinternal 的 Process Monitor 的帮助下找出设置的位置。

Visual Studio 启动器称为 VSLauncher.exe。如果您过滤由该可执行文件执行的注册表操作，则应该不难找到。

![在此处输入图像描述](../Images/b6feb489003cc018dda575cfeaaf0dfa.png).

我制作了一个带有过滤器和 procmon 事件的[github repo供您参考。](https://github.com/zippy1981/VSLauncheer-Procmon)希望这可以帮助。

# php - jqplot - 使用 php 数组中的值

> ID：12878898
> 
> 赞同：2
> 
> 时间：2012-10-14T02:50:01.573
> 
> 标签：php, javascript, ajax, arrays, jqplot

如何在 jqplot 图表中使用 php 值（由 ajax 发送）？

下面粘贴的代码不会创建图表。当我手动键入一组值时，图表将绘制图表。我已将图表发送到 ID 为“chart1”的 div。

--- PHP ---

```
 $array = array(
    array("Books", 12),
    array("Movies", 9)
       );
 $json = json_encode($array);
 var_dump($json); 
```

---- JAVASCRIPT ----

```
$(document).ready(function(){
  var charts;
  $.ajax({     
  type: "POST",  
  async: false, 
  dataType: "json", 
  url: "submitform.php",    
  data: 'action=chart',  
  success: function(data){       
  charts = data;
       }    
        });   

   var plot1 = jQuery.jqplot ('chart1', [charts],
     { 
  seriesDefaults: {
      shadow: false,
    renderer: jQuery.jqplot.PieRenderer, 
    rendererOptions: {
      highlightMouseOver: false,
      showDataLabels: true
    }
  }, 
  seriesColors: [ "#CCF", "#FCC", "#6CF", "#6C6", "#FF9"],
      legend: { show:true, location: 'e' }
     }
  );
 }); 
```

如果我提醒（图表）我得到这个：

```
[["Books",12],["Movies",9]] 
```

所以我认为我的格式很好。

哇，对不起，如果那很长。（抱歉格式不好）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T02:52:30.113

试试看

```
$(document).ready(function(){
    $(".success").fadeIn("fast");
    var charts = null;
    $.ajax({     
        type: "POST",  
        async: false,  
        url: "submitform.php",    
        data: 'action=chart',  
        dataType: "json", 
        success: function(data){     
            charts = data;
            $(".success").html(charts + "charts "); 
        }    
    });   

    var chartData = [["Books",12], ["Movies",9]];
    alert(charts);
    var plot1 = jQuery.jqplot ('chart1', [charts], { 
        seriesDefaults: {
            shadow: false,
            renderer: jQuery.jqplot.PieRenderer, 
            rendererOptions: {
                highlightMouseOver: false,
                showDataLabels: true
            }
        }, 
        seriesColors: [ "#CCF", "#FCC", "#6CF", "#6C6", "#FF9"],
        legend: { show:true, location: 'e' }
    });
}); 
```

# python - 默认参数值和关键字参数之间的区别？

> ID：12878902
> 
> 赞同：6
> 
> 时间：2012-10-14T02:51:01.597
> 
> 标签：python

Python 是否将默认参数值视为关键字参数？我无法理解区别

我无法理解这个线程：[普通参数与关键字参数](https://stackoverflow.com/questions/1419046/python-normal-arguments-vs-keyword-arguments)

附带说明一下，大多数教程和视频系列似乎都面向*Python 2.**。我应该学习*Python 3*而不是*Python 2*，还是以后可以轻松过渡？我只是出于好奇而学习这个。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T07:11:57.727

这两个概念（大部分）是不同的。

在函数定义方面，您已经命名了具有名称的参数，并且您有可变参数扩展，一个用于位置参数（给出一个元组），一个用于键盘参数（给出一个字典）。

例子：

```
def f(a, b=5, *c, **d): return a, b, c, d 
```

此函数有两个命名参数（`a`和`b`），可以使用位置或关键字。`c`并`d`接受所有其他人。

您可以使用位置参数以及关键字参数调用此函数。

```
f(1)
f(a=1) 
```

两者都返回

```
1, 5, (), {} 
```

因为位置和关键字参数被分配给命名参数。

你也可以这样做

```
f(a=5, foo=12) or f(5, foo=12) # -> 5, 5, (), {'foo': 12}
f(1, 2, 3) # -> 1, 2, (3,), {} 
```

在最后一个示例中，位置参数 1 和 2 被赋予命名参数`a`和`b`; 超出的 3 被放入元组`c`中。

你不能做

```
f(b=90) # no value for a
f(12, a=90) # two values for a 
```

如果还有不清楚的地方，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-20T09:32:16.260

据我所知，人们倾向于互换使用这两个术语

我看到这个问题已经很老了，但无论如何都会加上我的两分钱。

***术语 Default-Arguments（又名“Default-Parameters”）是您在定义***函数时通常使用的术语；在 def 语句的标题中：

定义函数时，您可以*在脑海*中查看它，如下所示：

```
def function1(positional_parameter, default_parameter="default-output"):
    pass 
```

但是，当您尝试***调用***函数时，通常会使用术语“关键字参数”。

调用该函数时，您可以*在脑海*中查看 如下：

```
function1(positional_argument, keyword_argument="change-output") 
```

*   希望这是有道理的*

# python - 如何使用 python 解析 xml 提要？

> ID：12878903
> 
> 赞同：5
> 
> 时间：2012-10-14T02:51:01.960
> 
> 标签：python, xml, parsing

我正在尝试解析这个 xml (http://www.reddit.com/r/videos/top/.rss) 并且在这样做时遇到了麻烦。我正在尝试将 youtube 链接保存在每个项目中，但由于“频道”子节点而遇到麻烦。我如何达到这个级别，然后我可以遍历这些项目？

```
#reddit parse
reddit_file = urllib2.urlopen('http://www.reddit.com/r/videos/top/.rss')
#convert to string:
reddit_data = reddit_file.read()
#close file because we dont need it anymore:
reddit_file.close()

#entire feed
reddit_root = etree.fromstring(reddit_data)
channel = reddit_root.findall('{http://purl.org/dc/elements/1.1/}channel')
print channel

reddit_feed=[]
for entry in channel:   
    #get description, url, and thumbnail
    desc = #not sure how to get this

    reddit_feed.append([desc]) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T03:41:57.463

你可以试试`findall('channel/item')`

```
import urllib2
from xml.etree import ElementTree as etree
#reddit parse
reddit_file = urllib2.urlopen('http://www.reddit.com/r/videos/top/.rss')
#convert to string:
reddit_data = reddit_file.read()
print reddit_data
#close file because we dont need it anymore:
reddit_file.close()

#entire feed
reddit_root = etree.fromstring(reddit_data)
item = reddit_root.findall('channel/item')
print item

reddit_feed=[]
for entry in item:   
    #get description, url, and thumbnail
    desc = entry.findtext('description')  
    reddit_feed.append([desc]) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-14T03:41:38.023

`Xpath`我用表达式为你写了这个（测试成功）：

```
from lxml import etree
import urllib2

headers = { 'User-Agent' : 'Mozilla/5.0' }
req = urllib2.Request('http://www.reddit.com/r/videos/top/.rss', None, headers)
reddit_file = urllib2.urlopen(req).read()

reddit = etree.fromstring(reddit_file)

for item in reddit.xpath('/rss/channel/item'):
    print "title =", item.xpath("./title/text()")[0]
    print "description =", item.xpath("./description/text()")[0]
    print "thumbnail =", item.xpath("./*[local-name()='thumbnail']/@url")[0]
    print "link =", item.xpath("./link/text()")[0]
    print "-" * 100 
```

# php - 检索数据库记录以在 PHP 代码中使用

> ID：12878908
> 
> 赞同：3
> 
> 时间：2012-10-14T02:51:27.243
> 
> 标签：php, mysql, sql, wampserver

我正在为工作室预订制作代码，客户可以在其中预订一天中的几个小时......例如，客户输入日期：2011 年 10 月 17 日时间：上午 10:30:00 超时：11:30：上午 00 点

在这种情况下，其他客户不得在同一日期输入上午 10:30 至上午 11:30 之间的时间/超时。

在制作数据库之前，我尝试过以下代码：

```
<?php 
$resttimefrom='10:00:00 am';
$resttimeto='11:00:00 am';
$reserve='11:01:00 pm';
$datedat='2012-10-14';

$st_time    =   strtotime($resttimefrom);
$end_time   =   strtotime($resttimeto);
$reserve   =   strtotime($reserve);
$datedat   =   strtotime($datedat);

print $st_time; echo "<br>";
print $end_time; echo "<br>";
print $reserve; echo "<br>";

if ($reserve => $st_time and $reserve =< $end_time)
{
echo "sorry, not available";
}
else
{
echo "ok!";
}

?> 
```

它已经可以限制时间，但还不能限制日期。

它只是一个示例，因此如果我将其传输到数据库中，我会知道该怎么做。

我的问题是这样的：

我有一个名为 reserve 的表，有 3 列... timein、timeout、dateres 已输入三条记录，

2011年10月15日 10:30-11:30 2011年10月15日 1:00-2:30 2011年10月15日 5:30-8:30

如何检索这些记录以在上面的代码中使用它？而不是这些：

```
$resttimefrom='10:00:00 am';
    $resttimeto='11:00:00 am';
    $reserve='11:01:00 pm';
    $datedat='2012-10-14'; 
```

如何将上午 10:00:00 更改为数据库中的所有记录？

我对php和mysql的了解非常有限...... :(请有人帮助我。请拜托

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T05:37:21.157

我建议您重新考虑处理预订期限的方式。而不是`date_reserved`简单地 have`time_in`和`time_out`as `datetime`s。我也会使用 24 小时格式而不是 12 小时（上午和下午）。所以你会有：

```
$timeInStr  = '2012-10-14 10:00:00';
$timeOutStr = '2012-10-14 11:00:00'; 
```

为了完整起见，这里有一些将数据插入表中的代码：

```
$pdo = new PDO(
        "mysql:dbname=stack_overflow;host=127.0.0.1",
        $username,
        $password);

// prepare the insert statement
$statement = $pdo->prepare("
        INSERT INTO `reserve`(`time_in`, `time_out`)
        VALUES (:time_in, :time_out)");

// bind param values
$statement->bindParam(':time_in', $timeInStr, PDO::PARAM_STR);
$statement->bindParam(':time_out', $timeOutStr, PDO::PARAM_STR);

$statement->execute(); 
```

为了确定预订请求是否会与先前设置的预订冲突，请查询数据库中的预订请求（相当于您的`$reserve`变量）是否在任何预订的`time_in`&之间。`time_out`

在这种情况下，我会计算有多少先前的预订与请求的预订时间重叠。

```
$statement = $pdo->prepare("
    SELECT COUNT(`id`)
    FROM `reserve`
    WHERE :reserve_request_time BETWEEN `time_in`
    AND `time_out`");

$statement->bindParam(
        ':reserve_request_time',
        '2012-10-14 10:30:00',
        PDO::PARAM_STR);

$statement->execute();
$result = $statement->fetch();

// if an overlapping reservation was found "sorry, not available"
if (0 < (int) $result['COUNT(`id`)']) {
    echo "sorry, not available";
}
else {
    echo "ok!";
} 
```

# ios - 如何弹出消息通知用户？

> ID：12878909
> 
> 赞同：0
> 
> 时间：2012-10-14T02:51:34.167
> 
> 标签：ios, ios5, crash, ios6

我正在从服务器读取数据，但是有一段时间（例如晚上 10 点到早上 6 点之间）没有数据。如果用户在该特定时间段内选择，则应用程序崩溃！有没有办法告诉用户没有数据，请选择其他时间段，防止崩溃！

对不起，如果我的问题很简单，但我无法想出“关键词”来搜索。

任何帮助或想法将不胜感激！提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T03:03:41.663

检查数据是否为零后，您可以显示带有 UIAlertView 的弹出窗口：

> ```
> UIAlertView *alert = [[UIAlertView alloc] 
>                          initWithTitle:@"No New Data" 
>                          message:@"There is no new data to display. Please try again later." 
>                          delegate:nil
>                          cancelButtonTitle:@"OK" otherButtonTitles:nil];
> [alert show]; 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T03:03:49.210

您需要通过查看崩溃的堆栈跟踪来找出您的应用程序崩溃的原因。如果您无法理解，请编辑您的帖子并粘贴到堆栈跟踪中。

您可以使用 . 弹出一个带有消息的小窗口[`UIAlertView`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAlertView_Class/UIAlertView/UIAlertView.html)。您可以通过在网上搜索“UIAlertView 示例”轻松找到大量示例。

# database - 范式之间的差异

> ID：12878915
> 
> 赞同：0
> 
> 时间：2012-10-14T02:52:47.500
> 
> 标签：database, relational-database

我正在学习范式并想知道，一个表格可以同时具有多个范式，例如第一和第二个吗？

从[这里开始](http://www.andrewrollins.com/2009/08/11/database-normalization-first-second-and-third-normal-forms/)，第一个范式的定义是“没有重复的元素或元素组”，第二个是“对连接键没有部分依赖”，所以看起来这是可能的。还有什么在理论上被认为是“最好的”？例如，使用第一范式还是 Boyce-Codd 范式更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T03:03:35.467

是的，例如，如果表格是第 3 范式，它会自动采用所有较低的形式。如果表格不符合第三范式，则意味着它处于第二范式。对于大多数表格来说，拥有第三范式就足够了。

# css - Ruby on Rails 中的用户个人 CSS 样式表

> ID：12878918
> 
> 赞同：1
> 
> 时间：2012-10-14T02:53:45.860
> 
> 标签：css, ruby-on-rails, ruby-on-rails-3, forms, styles

我环顾四周，但找不到关于我需要做些什么才能使以下内容成为可能的线索：

这个问题假设我所有模型控制器都正常工作，并且命名的 CSS 属性是在默认样式表中定义的。

我希望用户能够在登录时选择一些 CSS 属性来个性化他们自己的主题。基本属性是“body”和“page-wrapper”颜色。（前景）

我希望他们能够在用户的编辑页面中选择这些属性（从表单中？）。（已经创建）

关于如何使这项工作或在正确方向上取得良好领导的任何想法？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T03:06:25.927

我认为最好的方法是通过 javascript，在头部生成一个带有所需样式的样式标签。Jquery 提供了一种简单的方法来做到这一点，您可以将样式存储在模型的列中。

像这样的东西：

```
class User
  attr_accesible :styles 
```

查看.erb

```
<script>
  // Assume the @styles attr has something like "body { background-color: #567;}"
  $('head').append($('<style>').html('<%= @user.styles %>'))
</script> 
```

@styles 将是您模型中的另一列，因此您应该通过迁移添加它

```
rails g migration addstylestousers styles:string 
```

在你的 form.erb

```
<%= f.label :styles %>
<%= f.text_field :styles %> 
```

我认为只要您给他足够的提示，例如“`body { background-color: red }`在此字段中添加使您的背景变红！”，用户将 css 样式放在这里就足够简单了。

关于序列化，请考虑[this](http://api.rubyonrails.org/classes/ActiveRecord/Base.html#label-Saving+arrays%2C+hashes%2C+and+other+non-mappable+objects+in+text+columns)。

如果要嵌套样式，则脚本将是

```
//Lets say that the user stored on @bgcolor and @fgcolor only css color codes, like '#222' or 'blue'
var bgc = '<%= @user.style.bgcolor %>'
var fgc = '<%= @user.style.fgcolor %>'
var style = 'body { background-color: ' + bgc + '; foreground-color: ' + fgc + ' }'
$('head').append($('<style>').html(style)) 
```

请记住，关系应该`User has_one :style`在这种情况下。但是，嵌套它会让自己陷入更多问题，我认为这根本不值得。

# pdf - 将内部超链接添加到 pdf

> ID：12878922
> 
> 赞同：3
> 
> 时间：2012-10-14T02:54:32.980
> 
> 标签：pdf, hyperlink, ghostscript

我有一个要添加内部超链接的 PDF 文档。具体来说，第 1 页包含我想要使其可点击的目录。我的想法是在第 1 页的预定位置创建矩形框，它应该链接到第 2、3、...

我发现这篇文章谈到了使用我上面描述的方法添加内部超链接。 [http://bugs.ghostscript.com/show_bug.cgi?id=691531](http://bugs.ghostscript.com/show_bug.cgi?id=691531)

但是，当我尝试在我的文件中使用这种技术时，脚本只是添加带有矩形和超链接的页面。我需要它来覆盖我第一页现有内容的超链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T07:02:53.673

您可以使用运算符使用 Ghostscript 执行此`pdfmark`操作。

有关 pdfmark 主题的一些介绍，另请参阅 Thomas Merz 的[**PDFmark Primer**](http://www.pdflib.com/fileadmin/pdflib/pdf/pdfmark_primer.pdf)。

有关实现类似事情的示例，请参阅此答案：[**Merge PDF's with PDFTK with Bookmarks?**](https://stackoverflow.com/a/3108884/359307)

或者，您可以...

1.  ...用于[**`qpdf`**](http://qpdf.sf.net/)将所有（压缩的）内部 PDF 流扩展为 ASCII，
2.  ...编辑 PDF 源代码（使用从*PDFmark Primer*获得的专有技术），
3.  ...`qpdf`再次用于重新压缩 PDF 流。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T16:15:58.153

这是我使用的：

来自 MATLAB 的 Ghostscript 函数调用：

```
-o output.pdf -sDEVICE=pdfwrite -dPDFSETTINGS=/prepress original.pdf script.ps 
```

保存在 script.ps 中的 Postscript 代码：

```
[ /Rect [10 10 50 50]
/Page 2
/SrcPg 1
/Subtype /Link
/ANN pdfmark 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-17T14:44:39.353

目前（截至 2020 年）有一款适用于 Windows 的免费软件允许添加超链接。 [**PDF X-Change Editor**](https://www.tracker-software.com/product/pdf-xchange-editor)有免费的演示版，允许在页面（任意矩形）上手动绘制超链接并设置目标位置（页面）。它是免费提供的，但它不是“免费的”软件。

# windows - 下次操作时，Windows 作业调度程序仍在执行

> ID：12878930
> 
> 赞同：1
> 
> 时间：2012-10-14T02:55:39.623
> 
> 标签：windows, scheduled-tasks

我有一个 Server 2008 计划作业，它执行以下操作：

*   测试是否在该节点上运行主动/被动 mscs 服务。
*   如果是这样，则映射一个共享文件夹。
*   将一堆文件从共享文件夹移动到集群驱动器。
*   取消映射共享文件夹。

该作业每 5 分钟运行一次。这些文件是由另一个系统生成的，虽然不是完全时间关键，但对流程的处理远远超过这对于企业来说是不可接受的。

到目前为止，一切都很好。
我所看到的是，虽然脚本工作正常，但作业历史表明它第二次尝试运行作业时，*'作业的先前副本仍在运行'*。

有没有人有任何想法：
为什么会这样？
以及如何调试它？

如果这是 Unix/Linux，这不会是一个问题，但这对我来说完全是个谜。

# java - 我应该如何存储按键和窗口的标题？我应该使用单独的列表还是....？

> ID：12878933
> 
> 赞同：0
> 
> 时间：2012-10-14T02:55:51.977
> 
> 标签：java

`JNI` `C`代码发送一个`java`方法，*按下键*和按下/键入键*的窗口的名称/标题。*

当我想知道在什么时间按下了哪个键*（我还存储了时间）*以及在哪个窗口中时，我必须存储窗口的名称和键入的键以供以后使用。例如，让窗口的标题是`User grassPro - Stack Overflow`，我`difference hashtable hashmap`在搜索栏中输入了类似的内容。

稍后我想检索这些，即用*窗口标题**键入的键*。我能够获得这两个细节，但我不明白如何存储它们。我应该将它们存储在单独的列表中，使用树还是什么？

 *我想存储使用窗口名称键入的每个键。我不喜欢这种方法，但有更好的方法吗？如果有想法请分享。

*注意：最后我必须将数据写入日志文件*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T06:15:38.413

我不熟悉 JNI C，但听起来你应该用你想要保存的 3 个变量创建一个类，然后列出这个类。*

# perl - Perl：单词的频率和单词的前十名列表

> ID：12878941
> 
> 赞同：3
> 
> 时间：2012-10-14T02:59:23.490
> 
> 标签：perl

我正在努力制作一个 perl 脚本，请注意我对此很陌生..

这是我试图实现的目标：制作一个脚本，该脚本需要一个 .txt 文件并计算文件中的每个单词。并且当它被计数时，如果文件中的前 10 个单词显示每个单词我计数了多少次，那么这些单词会列出一个列表。

好吧，这就是我到目前为止所得到的，我能够让脚本计算单词以及它们出现的次数。现在我需要进入前十名，我真的不知道在哪里以及如何去做。这是一个家庭作业，所以我不希望/期望你为我解决它，只是给我一些关于从哪里开始的指示。

感谢您的帮助（提前）

* * *

10 月 15 日更新

好吧，一切都很好，但是..

就像现在一样，它只是在一行中打印所有内容。我需要它这样打印：

4 word
3 next word
2 next word

嗯，你明白了。。

* * *

我想我明白了……我想：P

...................................................

```
#! /usr/bin/perl

use utf8;

print ("Vilken fil?\n");
my $filen = @ARGV ? shift(@ARGV) : <STDIN>;
chomp $filen;

my %freq;

open my $DATA, $filen or die "Hittade inte den filen!";

while(<$DATA>) {

    s/[;:()".,!?]/ /gio;    
    foreach $word(split(' ', lc $_)) {  
    $freq{$word}++;                  
     }
}

@listing = (sort { $freq{$b} <=> $freq{$a} } keys %freq)[0..9];
foreach my $word (@listing )
    { print $freq{$word}." $word\n"; }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T03:11:10.633

查看 Perl 排序功能的文档：

[http://perldoc.perl.org/functions/sort.html](http://perldoc.perl.org/functions/sort.html)

它有一个表单，可以让您指定一个代码块来定义元素的顺序。您可以使用它来按频率而不是按单词的字母顺序对列表进行排序。

文档包括此示例：

```
# this sorts the %age hash by value instead of key
# using an in-line function
@eldest = sort { $age{$b} <=> $age{$a} } keys %age; 
```

您应该能够使这种模式适应您自己的问题。

获得前十名列表的最有效方法可能是随时跟踪前十名：每次计算计数时，检查它是否属于前十名，如果是，则将其插入正确的位置，可能会敲掉列表中的底部项目。这样，无论字典有多大，您一次只需要跟踪十个单词的顺序。不过，我不知道您是否需要这种额外的效率。

顺便说一句，我在几次工作面试中都看到过这种问题，所以掌握一下是一件好事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T08:20:34.043

基于 Nate 的回答，您可以使用切片提取前 10 个元素：

> @eldest = (排序 { $age{$b} <=> $age{$a} } 键 %age)[0..9];

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-14T03:09:54.333

哈，当我读完你的问题描述时，我知道这是某种家庭作业！:)

对于下一步，您必须扫描 %count 哈希并确定哪些单词出现次数最多。

最幼稚的方法是扫描列表 10 次；每次，找到计数最高的一个并将其存储在前十名列表中，然后将其从 %count 中删除（或将其设置为 0 也可以）。

如果你想更有野心，你可以实现一个排序函数，对 %count 条目进行排序，然后 10 个最高的将放在一起。

我的 Perl 生锈了，但 Perl 库甚至可能为您提供一些功能。一般来说，绝对值得您花时间浏览一下库参考以熟悉可用的内容。

# api - FASM - 添加启动 HKCU

> ID：12878942
> 
> 赞同：0
> 
> 时间：2012-10-14T02:59:34.087
> 
> 标签：api, registry, startup, fasm, advapi32

我正在尝试通过在“SOFTWARE\Microsoft\Windows\CurrentVersion\Run”中添加一个条目来使我的 FASM 应用程序将自身添加到系统启动中

我正在使用以下 API：

RegOpenKeyExA

RegSetValueExA

RegCloseKey

在 advapi32.dll

运行我的代码时，永远不会创建该条目。这是我的代码：

```
format PE GUI 4.0
include "Win32A.Inc"
entry start

section ".idata" import data readable writable

        library  kernel32,      "kernel32.dll",\
                 advapi32,      "advapi32.dll"

        import   kernel32,\
                 lstrlen,       "lstrlenA",\
                 ExitProcess,   "ExitProcess"

        import   advapi32,\
                 RegOpenKeyExA, "RegOpenKeyExA",\
                 RegSetValueEx, "RegSetValueExA",\
                 RegCloseKey,   "RegCloseKey"

section ".data" data readable writeable

sKey            db "SOFTWARE\Microsoft\Windows\CurrentVersion\Run",0
lpData          db "C:\File.txt",0
lpValueName     db "Text File"
phkresult       dd ?

section ".code" code readable executable

start:

        invoke  RegOpenKeyExA, HKEY_CURRENT_USER, sKey, 0, KEY_SET_VALUE, phkresult
        invoke  lstrlen, lpData
        invoke  RegSetValueEx, phkresult, lpValueName, 0, REG_SZ, lpData, eax
        invoke  RegCloseKey, phkresult

exit:

        invoke  ExitProcess, 0 
```

我不明白为什么我的条目没有被添加到注册表中。对此问题的任何帮助将不胜感激。

* * *

尝试使用 OllyDbg 并提出以下建议：

![在此处输入图像描述](../Images/0d021a1d6ef4e29ea318bd1bc5662e3e.png)

不知道为什么我会收到拒绝访问错误。RegOpenKeyExA 返回 ERROR_SUCCESS

* * *

原来它正在将自己添加到启动中，但在 RegEdit 中不可见，仅在 MSConfig..weird..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T03:25:52.577

当你调用`RegSetValueEx`你传递`phkresult`的地址，而不是它的值

所以，试试这样的事情：

```
 invoke  RegOpenKeyExA, HKEY_CURRENT_USER, sKey, 0, KEY_SET_VALUE, phkresult
    invoke  lstrlen, lpData
    invoke  RegSetValueEx, [phkresult], lpValueName, 0, REG_SZ, lpData, eax
    invoke  RegCloseKey, [phkresult] 
```

# c++ - C/C++ 从 char 缓冲区读取以填充结构

> ID：12878946
> 
> 赞同：0
> 
> 时间：2012-10-14T02:59:49.063
> 
> 标签：c++, c, sockets, struct, scanf

我有一条通过 UDP 套接字发送的消息。消息的类型为 RPCMessage

```
typedef struct
{
    enum {Request, Reply} messageType;
    unsigned int RPCId;
    unsigned int procedure;
    int arg1;
    int arg2;
} RPCMessage; 
```

当我发送准备发送消息时，我构造消息如下：

```
RPCMessage toSend = {RPCMessage::Reply, htonl(rpcId), htonl(procedureId), htonl(int1), htonl(int2); 
```

当我收到消息时，它被接收到我调用缓冲区的 char[] 中。有人建议，与其将整个缓冲区转换为 RPCMessage，不如让我从缓冲区中逐个读取每个参数，然后可以将第一个参数作为正确的枚举类型并使用 ntohl on互相争论。最好的方法是这样的：

```
RPCMessage::messageType type;
unsigned int id, procedure;
int int1, int2;
sscanf(buffer, %d%d%d%d%d, type, id, procedure, int1, int2);
RPCMessage received = {type, ntohl(id), ntohl(procedure), ntohl(int1), ntohl(int2)); 
```

还是有另一种/更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T03:02:48.197

最好的方法是使用健壮的序列化框架，如 boost 序列化。

[http://www.boost.org/doc/libs/1_51_0/libs/serialization/doc/index.html](http://www.boost.org/doc/libs/1_51_0/libs/serialization/doc/index.html)

这取决于您的消息可以变得多复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T03:08:55.880

我建议转换为结构。主要原因 - 性能。

您几乎总是可以在结构布局和缓冲区中的数据之间实现二进制兼容性。有控制填充和对齐等的编译指示。在 C++ 中有特殊的对齐规范。

我不想说`just cast and problems will disappear`。您仍然需要处理字节顺序，字符 repr 可以不同等。

**当您想要对结构有不同**的表示或当您的数据结构很复杂（如结构树）时，应该使用序列化。

# java - Java XMLStreamReader.getText() 阻塞 XML 编码字符？

> ID：12878948
> 
> 赞同：0
> 
> 时间：2012-10-14T03:00:17.077
> 
> 标签：java, xml, parsing, iso-8859-1, xmlstreamreader

我正在尝试使用 Java 的 XMLStreamReader 解析一个巨大的（> 1GB）xml 文件。我使用 getText() 方法来拉取节点的内容。我拥有的 xml 文件被编码为 ISO-8859-1，并且某些字符具有特殊编码，例如在文件`&`中编码。`&amp;`

因此，如果文件包含，例如：

```
<person>Jack</person>
<person>Jill</person>
<persons>Jack &amp; Jill</persons> 
```

我尝试使用 getText() 获取每个节点的内容，第三个节点只返回`Jack`. 任何时候`&xxx;`遇到一个字符，它后面的字符（在同一个节点中）都不会被解析或返回。

哪里有问题？xml 文件编码是否正确？我是否正确使用了 Java 解析器？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T03:14:06.057

我怀疑问题在于解析器已将第三个人元素的内容拆分为多个处理事件。（这种行为`next()`已[记录在案](http://docs.oracle.com/javaee/5/api/javax/xml/stream/XMLStreamReader.html#next%28%29)。）调用`getText()`只是为您提供当前事件的文本。

尝试[`getElementText()`](http://docs.oracle.com/javaee/5/api/javax/xml/stream/XMLStreamReader.html#getElementText%28%29)改用。

# jquery - 无法让 jQuery ajax 工作

> ID：12878949
> 
> 赞同：0
> 
> 时间：2012-10-14T03:01:04.727
> 
> 标签：jquery, ajax, json

我是 jQuery 新手，它真的很酷，但我无法获得基本的 ajax 工作，控制台中没有错误，所以我不知道哪里出错了：

```
getJSON function version:

   $(document).ready(function(){
        $.getJSON('http://pollview:8888/js/example.json', function(data){
            for(var element in data){
                console.log(data[element]);
            }
        });

    }); 
```

然后是基本的ajax版本：

```
$(document).ready(function(){

    $.ajax({
        url: 'http://pollview:8888/js/example.json'
    }).done(function(data){
        alert('successful');
    });
}); 
```

* * *

我这里放了chrome网络控制台，好像已经加载了example.json文件，但是没有触发事件，不知道为什么

![在此处输入图像描述](../Images/626e85cf546c4f6420b5d635ae0826c1.png)

我被我卡住了，你知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T03:33:35.057

试试这个**工作演示** [http://jsfiddle.net/wyBqk/](http://jsfiddle.net/wyBqk/) **或** [http://jsfiddle.net/UGQYT/](http://jsfiddle.net/UGQYT/)（返回数据）

[http://docs.jquery.com/Ajax/jQuery.getJSON](http://docs.jquery.com/Ajax/jQuery.getJSON)

*   请检查您的`json`网址。

如果您输入的`error:`数据有错误，也会告诉您。`:)`

休息一下，这应该可以帮助您解决问题`:)`

**代码**

```
$("document").ready(function() {
    var jqxhr = $.getJSON("http://api.flickr.com/services/feeds/photos_public.gne?tags=cat&tagmode=any&format=json&jsoncallback=?", function() {
        alert("success");
    }).success(function() {
        alert("second success");
    }).error(function() {
        alert("error");
    }).complete(function() {
        alert("complete");
    });

});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T03:12:31.460

你试过设置`dataType:'json'`吗？

* * *

无论如何，你的代码对我来说很好。

在这里测试它：http: [//jsfiddle.net/RASG/WuT6y/](http://jsfiddle.net/RASG/WuT6y/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T08:49:26.433

我是多么愚蠢，我犯了两个错误：

1.  `$('document')`代替`$(document)`
2.  Json文件无效，使用codeigniter的输出方法后我制作了有效文件，在我看来，只有空格被消除了。

在我的情况下没有跨域问题

# ios - iOS 6：如何从嵌入在导航控制器中的 tableview 内部转到另一个 VC？

> ID：12878954
> 
> 赞同：0
> 
> 时间：2012-10-14T03:02:57.323
> 
> 标签：ios, segue, viewcontroller

我有一个带有“照片”按钮的初始“父菜单”视图控制器（更多按钮来像“事件”）。

从照片按钮，我有一个简单的 ctrl-drag segue 到一个导航控制器，它有一个表格视图，因为它是第一个视图（专辑）、集合视图（拇指），然后是图像视图（全尺寸）。

我遇到的问题是：我希望能够从导航控制器之后的第一个表视图回到最初的简单“父菜单”视图控制器。

我试过：

*   将一个按钮拖入表格视图的顶部菜单栏区域（它被认为是 UINavigationItem）并将一个 segue 拖回菜单......没有用。
*   设置从 tableview 菜单区域中的按钮到其父视图的出口并调用 [self performSegueWithIdentifier: @"BackToMenu" sender: self]; 从那里，没有工作。
*   将一个按钮作为最后一项拖到表格视图中，然后按 ctrl+将它作为一个 segue 拖到菜单：没有用。
*   尝试从导航控制器返回菜单并手动调用它，但是连接到“菜单”按钮的出口功能我拖到桌面视图顶部后永远不会被击中。

我错过了什么？

我计划从故事板的菜单页面中通过多个按钮输出一些导航控制器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T03:22:49.807

您可以将“Bar Button Item”拖到导航控制器之后的第一个表格视图的左侧。从那里，将控件从栏按钮项拖回初始视图控制器，然后选择“模态”segue。正如@jrturton 在下面的评论中所说，虽然这回答了您的问题，但这并未优化，因为它将创建一个新实例。

如果您想以编程方式执行此操作（这将返回到现有实例），请在表视图控制器上为 Bar Button Item 创建一个 IBAction。例如在 iOS 6 中：

```
-(IBAction)returnToParentMenu:(id)sender {
  [self dismissViewControllerAnimated:YES completion:nil];
} 
```

或在 iOS 5 中：

```
-(IBAction)returnToParentMenu:(id)sender {
  [self dismissModalViewControllerAnimated:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T07:22:12.390

你不需要一个segue。您可以在表格视图中创建一个按钮并将其链接到表格视图中的一个操作，该操作会关闭当前呈现的视图控制器（我假设您首先呈现导航控制器堆栈的 segue 是“模态”类型):

```
[self.navigationController dismissViewControllerAnimated:YES completion:nil]; 
```

或者，您可以查看“Unwind Segues”，但我自己还没有使用过这些，所以不想在此处包含详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T19:07:51.520

我最终做的是首先制作导航控制器，然后我的菜单页面首先在每个相应的路径下都有按钮。

在上面： ctrl+drag 没有从导航栏按钮工作，一直完全炸毁。

我没有意识到我可以先从导航控制器转到常规视图控制器。认为它需要先进入表格视图，因为当您拖出导航时，它会与表格配对。

如果我在这个奇怪的论坛中有 10 多个“点”，我会发布故事板的屏幕截图。

谢谢大家

# iphone - 自我课堂方法

> ID：12878964
> 
> 赞同：2
> 
> 时间：2012-10-14T03:04:27.547
> 
> 标签：iphone, objective-c, cocoa-touch

我正在一个维护良好的 GitHub 存储库中阅读一些 Objective-C 代码。[https://github.com/soffes/sskeychain/blob/master/SSKeychain.m](https://github.com/soffes/sskeychain/blob/master/SSKeychain.m)

我遇到了一些奇怪的线条（至少在我看来很奇怪）。

```
+ (NSArray *)allAccounts {
    return [self accountsForService:nil error:nil];
} 
```

我被告知**self**在实例方法中指的是实例本身。那么**self**在类方法中是什么意思呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T03:05:56.030

在类方法内部，`self`指的是代表对应的对象`Class`：

```
+ (NSArray *)allAccounts {
    NSLog("%@", [self description]); // Will print the name of the class
    return [self accountsForService:nil error:nil];
} 
```

这与您在调用实例方法时获得的对象相同`[self class]`。

如果您想以`class`多态方式调用方法，这很有用。例如，您可以调用`[[self alloc] init]`来创建执行调用的类的新实例。

# objective-c - 遇到崩溃报告问题 - EXC_BAD_ACCESS

> ID：12878966
> 
> 赞同：4
> 
> 时间：2012-10-14T03:05:16.817
> 
> 标签：objective-c, macos, cocoa, crash-reports

好的，所以我收到了我的一个应用程序的崩溃报告，但我发誓我 100% 感到困惑。

这就是它的“核心”部分的样子：

```
Crashed Thread:  0  Dispatch queue: com.apple.main-thread

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x0000000000000000

VM Regions Near 0:
--> 
    __TEXT                 0000000100000000-0000000100015000 [   84K] r-x/rwx SM=COW  /Applications/MY_APP/Contents/MacOS/MY_APP

Application Specific Information:
objc[337]: garbage collection is ON

Thread 0 Crashed:: Dispatch queue: com.apple.main-thread
0   libsystem_c.dylib               0x00007fff90128650 strlen + 16
1   MY_BUNDLE_ID                    0x0000000100008f12 0x100000000 + 36626
2   MY_BUNDLE_ID                    0x000000010000b435 0x100000000 + 46133
3   MY_BUNDLE_ID                    0x0000000100003c90 0x100000000 + 15504
4   com.apple.CoreFoundation        0x00007fff9065147a _CFXNotificationPost + 2554
5   com.apple.Foundation            0x00007fff8e5fe846 -[NSNotificationCenter postNotificationName:object:userInfo:] + 64
6   com.apple.AppKit                0x00007fff9a7894a7 -[NSTableView textDidChange:] + 377
7   com.apple.CoreFoundation        0x00007fff9065147a _CFXNotificationPost + 2554
8   com.apple.Foundation            0x00007fff8e5fe846 -[NSNotificationCenter postNotificationName:object:userInfo:] + 64
9   com.apple.AppKit                0x00007fff9a15c260 -[NSTextView(NSSharing) didChangeText] + 339
10  com.apple.AppKit                0x00007fff9a7f8381 _NSDoUserReplaceForCharRange + 390
11  com.apple.AppKit                0x00007fff9a7f85b1 _NSDoUserDeleteForCharRange + 38
12  com.apple.AppKit                0x00007fff9a7e1e72 -[NSTextView(NSKeyBindingCommands) deleteBackward:] + 440
13  com.apple.AppKit                0x00007fff9a18a1cc -[NSResponder doCommandBySelector:] + 75
14  com.apple.AppKit                0x00007fff9a18a02e -[NSTextView doCommandBySelector:] + 197
15  com.apple.AppKit                0x00007fff9a20cf4e -[NSKeyBindingManager(NSKeyBindingManager_MultiClients) interpretEventAsCommand:forClient:] + 2200
16  com.apple.AppKit                0x00007fff9a20c3bb -[NSTextInputContext handleEvent:] + 939
17  com.apple.AppKit                0x00007fff9a20bf87 -[NSView interpretKeyEvents:] + 183
18  com.apple.AppKit                0x00007fff9a158f67 -[NSTextView keyDown:] + 723
19  com.apple.AppKit                0x00007fff9a374120 -[NSWindow sendEvent:] + 9687
20  com.apple.AppKit                0x00007fff9a36f744 -[NSApplication sendEvent:] + 5761
21  com.apple.AppKit                0x00007fff9a2852fa -[NSApplication run] + 636
22  com.apple.AppKit                0x00007fff9a229cb6 NSApplicationMain + 869
23  MY_BUNDLE_ID                        0x0000000100002014 0x100000000 + 8212 
```

你知道可能出了什么问题吗？或者你能给我指出正确的方向吗？

* * *

**作为旁白 ：**

谁能指导我如何使例如`0x00007fff90128650`更...有意义并使其（在将来的某些崩溃报告中）也显示函数的名称？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-14T11:51:38.867

你的崩溃日志给了你很多信息：首先你崩溃是因为你试图访问你的程序中的地址 0 并且内核不开心。

```
Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x0000000000000000 
```

看，你得到了一个分段，它从 0x00 地址开始，所以就像你直接访问一个 0 / nil 指针一样。像这样

```
char* adress = 0;
printf("get %p", adress); // will output 0x0
printf("get %p", adress[0]); // will make a EXC_BAD_ACCESS 
```

你应该真正关注这一点。

在崩溃堆栈中，有三件有趣的事情：

```
6   com.apple.AppKit                0x00007fff9a7894a7 -[NSTableView textDidChange:] + 377
 5   com.apple.Foundation            0x00007fff8e5fe846 -[NSNotificationCenter postNotificationName:object:userInfo:] + 64
    0   libsystem_c.dylib               0x00007fff90128650 strlen + 16 
```

[textDidChange] 是导致崩溃的最后一个调用之一，顺便说一下，当 [textDidChange] 被触发时，您正在发送通知。最后一行实际上导致崩溃：strlen + 16 是因为有人认为它可以从有效的指针地址中获取字符长度，但实际上并非如此。

据我说，您应该检查您发送到通知中的内容。

```
_NSDoUserReplaceForCharRange
  _NSDoUserDeleteForCharRange 
```

当您深入查看堆栈崩溃时，它确实似乎是在您将单元格插入/删除到您的 tableViewController 时出现的。您应该检查是否有人推送了无效数据，或者没有按应有的方式使用编辑单元格。

所以这里是简历： 1 有人编辑了一个tableViewCell，他没有插入或者代码没有插入它应该是什么。2 您发送的通知中包含无效数据。3 当 strlen(invalid_dataStructure) 被触发时，它会使你的应用程序崩溃

顺便说一句，我只是“猜测”，因为我实际上并不知道您的代码实现。但我希望它可以为您的调试会话提供很多线索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-10T02:55:51.147

我收到了一个非常相似的崩溃报告，试图打开大量图形应用程序（pymol 和 coot）（见下文）

我发现如果我断开我的 Mac 与外接显示器的连接，程序就会再次运行。我使用的是**USB-HDMI 连接器**——显然这是个坏主意。我刚刚购买了一个 microUSB-HDMI 连接器，我希望这会更好。如果我只使用我的 mac book 自己的显示器，程序就会运行。

```
Time Awake Since Boot: 19000 seconds
Time Since Wake:       110 seconds

Crashed Thread:        0  Dispatch queue: com.apple.main-thread

Exception Type:        EXC_BAD_ACCESS (SIGSEGV)
Exception Codes:       KERN_INVALID_ADDRESS at 0x0000000000000000

VM Regions Near 0:
--> 
    __TEXT                 0000000100000000-0000000100cff000 [ 13.0M] r-x/rwx SM=COW  /Applications/MacPyMOL.app/Contents/MacOS/MacPyMOL

Thread 0 Crashed:: Dispatch queue: com.apple.main-thread
0   com.apple.opengl                0x00007fff8333857c CGLDescribeRenderer + 79
1   com.schrodinger.macpymol        0x000000010083c5b4 CheckOpenGLCaps + 484
2   com.schrodinger.macpymol        0x000000010084cd8c -[PyMOLOpenGLView awakeFromNib] + 1420
3   com.apple.CoreFoundation        0x00007fff8a10785f -[NSSet makeObjectsPerformSelector:] + 223
4   com.apple.AppKit                0x00007fff88b935cd -[NSIBObjectData nibInstantiateWithOwner:options:topLevelObjects:] + 1216
5   com.apple.AppKit                0x00007fff886a3605 loadNib + 384
6   com.apple.AppKit                0x00007fff88c14749 +[NSBundle(NSNibLoading) _loadNibFile:nameTable:options:withZone:ownerBundle:] + 727
7   com.apple.AppKit                0x00007fff88c14ca8 +[NSBundle(NSNibLoadingInternal) _loadNibFile:externalNameTable:options:withZone:] + 150
8   com.apple.AppKit                0x00007fff886a2bc0 +[NSBundle(NSNibLoading) loadNibNamed:owner:] + 631
9   com.schrodinger.macpymol        0x000000010084d77b main + 1499
10  com.schrodinger.macpymol        0x0000000100007494 start + 52 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T03:57:00.447

通常问题是您需要一个“保留”属性。

您需要为调试模式启用 Zombies。在 xCode 4 中单击“编辑方案”->“诊断”->“启用僵尸对象”

它将在控制台中向您显示崩溃时您尝试访问的“已删除”对象。

这应该会有所帮助。

你会看到这样的东西：

```
2010-01-25 14:35:24.840 MyApplication[1393:20b] *** -[CFString retain]: message sent to deallocated instance 0x42a5060 
```

您还可以启用“Malloc 日志记录”并在崩溃后在调试控制台中输入这样的命令：

```
shell malloc_history 1393 0x42a5060 
```

在那里你可以找到所有分配/释放堆栈。只需查看 release 和 alloc 命令。

# algorithm - 图上的谜题

> ID：12878967
> 
> 赞同：1
> 
> 时间：2012-10-14T03:05:20.717
> 
> 标签：algorithm, math, graph, matrix, network-flow

给定一个无向图 G=(V,E)，每个节点 i 都与“Ci”个对象相关联。在每一步，对于每个节点 i，Ci 对象在 i 的邻居之间平均分配。经过K步，输出对象最多的前5个节点的对象个数。

这是一步中发生的一个示例： ![在此处输入图像描述](../Images/0ad1c1f4b780e780d3c0246a78f0f802.png)
A 的对象被 B 和 C 平均分配。B
的对象被 A 和 C 平均分配。C
的对象被 A 和 B 平均分配。

一些约束：|V|<10^5, |E|<2*10^5, K<10^7, Ci<1000

我目前的想法是：用一个矩阵来表示每一步的转换。这个问题转化为矩阵幂的计算。但是考虑到|V|，这个解决方案太慢了。可以是 10^5。

> 有没有更快的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T04:59:38.883

单步的矩阵方程为`M x = x'`，其中`x`是当前节点内容的向量，`x'`是一步后的内容。即，`x' = M x`。之后步骤的内容是`x" = M x' = M(M x)`。下面是 M 的示例，其中图的邻接矩阵显示在左侧。标题列`#nbr`是节点 a, b ... e 的邻居数。矩阵`M`是由邻接矩阵通过将每个 1 替换为等于同一列中的个数的分数而形成的。

```
 a b c d e  #nbr          matrix M
a 0 0 1 1 0   2       0   0  1/3 1/4  0
b 0 0 0 1 0   1       0   0   0  1/4  0
c 1 0 0 1 1   3      1/2  0   0  1/4 1/2
d 1 1 1 0 1   4      1/2  1  1/3  0  1/2
e 0 0 1 1 0   2       0   0  1/3 1/4  0 
```

要从初始内容开始执行 K 步`x`，只需计算`(M^K) x`. 使用需要矩阵乘法的[求幂方法](http://en.wikipedia.org/wiki/Exponentiation#Efficient_computation_of_integer_powers)，表示以 2 为底的对数。由于矩阵乘法通常具有 O(n^3) 复杂度，因此如果直接实现，此方法为 O(lg K * n^3)，或 O(lg K * n^2.376) 如果使用 Coppersmith/Winograd 算法。复杂度可以降低到 O(n^2.376)——也就是说，我们可以通过将 M[对角化](http://en.wikipedia.org/wiki/Diagonalizable_matrix)为 (P^-1)AP 的形式来放弃乘数，其中, 和是 O(n lg K) 运算，给出O(n^2.376) 总体。对角化的成本通常为 O(n^3)，但[使用 Coppersmith/Winograd 算法](https://mathoverflow.net/questions/62904/complexity-of-eigenvalue-decomposition)的成本为 O(n^2.376) 。`lg K``lg``lg K``M^K = (P^-1)(A^K)P``A^K`

# sql - 在 SQL 中使用 EXCEPT 和 INTERSECT 时出错

> ID：12878973
> 
> 赞同：0
> 
> 时间：2012-10-14T03:06:37.297
> 
> 标签：sql, database

假设我有三个表表 A、表 B 和表 C。

表 A 包含带有条目 1、2、2、3、4、4 的 col t1。
表 B 有 col t2 条目 1,3,4,4。
表 C 有 col t3 条目 1,2,4,4。

给出的查询是

```
SELECT * FROM  A EXCEPT (SELECT * FROM  B INTERSECT SELECT * FROM C ). 
```

我在试卷上看到了这个问题。有人提到，预期的答案是 2，但从这个查询中获得的答案是 1,2,4。我无法理解这背后的原理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T03:35:19.140

好吧，在我看来，预期的答案和您获得的答案都是错误的。它可能是您正在使用的 RDBMS，但分析您的查询结果应该是`2,3`. 首先你应该做`INTERSECT`表之间的`B`和`C`，相交的值是`1`和`4`。获取该结果，您应该从表中获取`A`除`1`and之外的所有值`4`，这给我们留下了`2`and `3`（因为`EXCEPT`and`INTERSECT`只返回不同的值）。[这是一个 sqlfiddle](http://sqlfiddle.com/#!3/49431/1)供您尝试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T03:38:23.160

因为有括号，和之间的INTERSECT先做`B`，`C`得到(1,4)。您甚至可以验证这只是采取后一部分并单独运行：

```
SELECT * FROM  B INTERSECT SELECT * FROM C 
```

下一步是选择`A`除 (1,4) 的先前结果中存在的所有内容之外的所有内容，留下 (2,3)。

答案应该是 2 和 3，而不是 1,2 和 4。

顺便说一句，应该提到的是，即使您在查询中根本没有括号，结果应该仍然是相同的，因为 INTERSECT 运算符的优先级高于 EXCEPT/UNION 运算符。这是[SQL Server](http://msdn.microsoft.com/en-us/library/ms188055.aspx)文档，但它与适用于实现这些运算符的任何 DBMS 的标准一致。

# python - 过滤器列表，只有唯一值 - 使用 python

> ID：12878974
> 
> 赞同：2
> 
> 时间：2012-10-14T03:06:37.373
> 
> 标签：python, filter

我想知道如何获取一个列表，例如 a = [1, 5, 2, 5, 1]，并让它过滤掉唯一值，以便它只返回一个仅在列表中出现一次的数字。所以它会给我 a=[2] 结果。

我能够弄清楚如何过滤掉重复项，现在我将如何摆脱重复项？

不需要直接的答案，欢迎提供一点提示或提示:)

我能够在stackoverflow上找到这个。它做了我想要的，但我不明白代码，有人可以帮我分解吗？

```
d = {}
for i in l: d[i] = d.has_key(i)

[k for k in d.keys() if not d[k]] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T03:09:07.790

```
>>> a = [1, 5, 2, 5, 1]
>>> from collections import Counter
>>> [k for k, c in Counter(a).iteritems() if c == 1]
[2] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T04:55:34.993

听听您的代码的作用：

```
d = {}
for i in list:
    # if the item is already in the dictionary then map it to True,
    # otherwise map it to False 
    # the first time a given item is seen it will be assigned False,
    # the next time True
    d[i] = d.has_key(i)

# pull out all the keys in the dictionary that are equal to False
# these are items in the original list that were only seen once in the loop
[k for k in d.keys() if not d[k]] 
```

# ssh - Kerberized ssh - 密钥交换很慢

> ID：12878976
> 
> 赞同：1
> 
> 时间：2012-10-14T03:07:37.340
> 
> 标签：ssh, kerberos

经过几天的锤击，我有一个工作的 CentOS 6.3 系统绑定到一个运行 Windows 2008R2 的 AD 域。我的方法是使用 Kerberos 身份验证的基于 sssd 的 pam。通过 LDAP 在域控制器上访问目录信息。LDAP 绑定也使用了kerberized。

在我的客户端（Mac OS 10.8）上，我可以通过 ssh 进入 CentOS 系统，所有部分似乎都点击了正确。Mac 获得一张票，然后进行 GSSAPI 密钥交换，然后进行 gssapi-keyex 身份验证。所以设置工作正常，但我遇到了登录缓慢的问题——从开始到结束大约需要 10 秒。我的经验是，kerberized ssh 应该是即时的，所以有些事情仍然不正确。

我已经使用 tcpdump 监控了 CentOS 和 DC 之间的通信，看起来 CentOS 会立即从它从 DC 请求的任何内容中获得响应。它挂断的部分实际上是在它完全尝试联系 DC 之前。看起来 GSSAPI 密钥交换很慢。因此，如果我在调试模式下查看 ssh 连接，它挂起的两点是

```
debug1: SSH2_MSG_KEXINIT sent 
```

和

```
debug1: Doing group exchange 
```

一旦进入身份验证方法：gssapi-keyex，它就会飞过。有没有人知道什么会导致密钥交换运行缓慢？我的客户可能有什么不对劲的地方？在 Mac 上，我的 ~/.ssh/config 文件设置如下：

```
GSSAPIAuthentication yes
GSSAPIKeyExchange yes
GSSAPIDelegateCredentials yes
GSSAPITrustDNS yes
GSSAPIClientIdentity username@MYDOMAIN.COM 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T20:15:18.227

我想通了，Kerberos 进行了许多 DNS 调用，如果你想获得实际的登录速度，你必须在 CentOS 上安装一个缓存 DNS 服务器。因此，只需安装和设置 BIND，您就可以开始使用了。

# php - 在同一页面的表格单元格内回显 PHP 消息

> ID：12878979
> 
> 赞同：1
> 
> 时间：2012-10-14T03:07:43.840
> 
> 标签：php

嗨，我在下面放了一个示例代码来解释我的担忧。除了在页面上的所需位置显示“回声”消息外，代码工作正常。执行代码时，回显消息仅出现在页面上，但我需要该消息出现在“cell4”表格单元格中。

我尝试将代码修改为 {echo "Name is blank!"; return false;} 在第 30 行，但似乎它不是正确的方法，因为结果没有变化。有人可以告诉我有没有解决方法？感谢您的关注。

代码如下：

```
 <html>
<head><title>Test</title></head>

<body>
<form method="POST" action="<?= $_SERVER['PHP_SELF'] ?>">
<table border="1">
<thead>
<tr>
    <td colspan="4">User detail</td>
</tr>
</thead>

<tr>
    <td id="cell1">Name:</td>
    <td id="cell2"><input type="text" name="Uname"></td>
    <td id="cell3"><input type="submit" name="SendNow" value="Save"></td>
    <td id="cell4"></td>
</tr>
</table>
</form>
</body>
</html>

<?php 
if(isset($_POST['SendNow']))
{
$nm = $_POST['Uname'];

    if($nm == "")
        {echo "Name is blank!"; return false;}
    else
        {echo "Well done!"; return false;}
}       

?>

Sorry the edited code has not appeared correct in the above text. This is how I have tried modifying : {echo "<td id='cell4'>Name is blank!</td>"; return false;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T03:10:00.217

PHP 代码被插入到执行代码的文档位置。这意味着您需要像这样进行处理：

```
<?php

if (isset yada yada)
    $cell_value = ...
}
?>

<body>
<table>
<tr>
    <td><?php echo $cell_value ?></td>
</tr>
</table>
</body> 
```

PHP 不会“返回”并更改已经输出的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T03:10:40.077

```
<?php 
if(isset($_POST['SendNow']))
{
$nm = $_POST['Uname'];
    $message = '';
    if($nm == "")
        {$message = "Name is blank!";}
    else
        {$message = "Well done!";}
}       

?>
<html>
<head><title>Test</title></head>

<body>
<form method="POST" action="<?= $_SERVER['PHP_SELF'] ?>">
<table border="1">
<thead>
<tr>
    <td colspan="4">User detail</td>
</tr>
</thead>

<tr>
    <td id="cell1">Name:</td>
    <td id="cell2"><input type="text" name="Uname"></td>
    <td id="cell3"><input type="submit" name="SendNow" value="Save"></td>
    <td id="cell4"><?php if (!empty($message)) echo $message; ?></td>
</tr>
</table>
</form>
</body>
</html> 
```

# c++ - Qt 程序的速度性能：Windows 与 Linux

> ID：12878980
> 
> 赞同：16
> 
> 时间：2012-10-14T03:07:54.130
> 
> 标签：c++, windows, linux, performance, qt

我已经在[这里](http://qt-project.org/forums/viewthread/21092/)发布了这个问题，但由于它可能不是特定于 Qt 的，我想我也可以在这里试试我的机会。我希望这样做不是不合适的（告诉我是否合适）。

我开发了一个小型科学程序来执行一些数学计算。我试图优化它，使其尽可能快。现在我几乎完成了为 Windows、Mac 和 Linux 用户部署它。但是我还不能在许多不同的计算机上测试它。

这让我感到困扰：为了部署 Windows，我使用了一台同时安装了 Windows 7 和 Ubuntu 12.04 的笔记本电脑（双启动）。我比较了在这两个系统上运行的应用程序的速度，我震惊地发现**它在 Windows 上至少慢了一倍！**如果有一点点差异，我不会感到惊讶，但是如何解释这样的差异呢？

这里有几个精度：

*   我让程序做的计算只是一些残酷而愚蠢的数学计算，基本上，它在一个称为十亿次的循环中计算乘积和余弦。另一方面，计算是多线程的：我启动了类似 6 个 QThreads 的东西。
*   笔记本电脑有两个核心@1.73Ghz。起初我认为 Windows 可能没有使用其中一个内核，但后来我查看了处理器活动，根据小图形，两个内核都在 100% 运行。
*   然后我认为适用于 Windows 的 C++ 编译器没有使用适用于 Linux 的 C++ 编译器自动执行的优化选项（例如 -O1 -O2）（在发布版本中），但显然确实如此。

我很困扰该应用程序在 Windows 上的速度太慢（2 到 4 倍），这真的很奇怪。另一方面，我还没有在其他装有 Windows 的计算机上尝试过。不过，您知道为什么会有差异吗？

**附加信息：**一些数据……</p>

尽管 Windows 似乎使用了两个内核，但我认为这可能与线程管理有关，原因如下：

示例计算 n°1（这个启动 2 个 QThreads）：

*   PC1-windows：7.33s
*   PC1-linux：3.72s
*   PC2-linux：1.36s

示例计算 n°2（这个启动 3 个 QThreads）：

*   PC1-windows：6.84s
*   PC1-linux：3.24s
*   PC2-linux：1.06s

示例计算 n°3（这个启动 6 个 QThreads）：

*   PC1-windows：8.35s
*   PC1-linux：2.62s
*   PC2-linux：0.47s

在哪里：

*   PC1-windows = 我的 2 核笔记本电脑 (@1.73Ghz)，装有 Windows 7
*   PC1-linux = 我的 2 核笔记本电脑 (@1.73Ghz) 和 Ubuntu 12.04
*   PC2-linux = 我的 8 核笔记本电脑 (@2.20Ghz) 和 Ubuntu 12.04

（当然，PC2 的速度更快并不令人震惊。令我难以置信的是 PC1-windows 和 PC1-linux 之间的差异）。

注意：我还尝试在 Mac OS 下的最近的 PC（4 或 8 核 @~3Ghz，不记得确切）上运行该程序，速度与 PC2-linux 相当（或略快）。

编辑：我将在这里回答我在评论中被问到的几个问题。

*   我刚刚在 Windows 上安装了 Qt SDK，所以我想我拥有所有东西的最新版本（包括 MinGW？）。编译器是 MinGW。Qt 版本是 4.8.1。

*   我没有使用优化标志，因为我注意到当我以发布模式（使用 Qt Creator）构建时会自动使用它们。在我看来，如果我写类似 QMAKE_CXXFLAGS += -O1 的东西，这只对调试构建有影响。

*   线程的生命周期等：这很简单。当用户单击“计算”按钮时，会同时启动 2 到 6 个线程（取决于他正在计算的内容），当计算结束时它们将被终止。没什么太花哨的。每个线程都只是进行残酷的计算（实际上除了一个，它每 30 毫秒进行一次（不那么）小“计算，基本上检查错误是否足够小）。

**编辑：最新发展和部分答案**

以下是一些新的发展，可以为所有这些提供答案：

*   我想确定速度差异是否真的与线程有关。所以我修改了程序，使计算只使用 1 个线程，这样我们就可以比较“纯 C++ 代码”的性能。事实证明，现在 Windows 只比 Linux 慢一点（大约 15%）。所以我猜想**差异的一小部分（但并非不重要）是系统固有的，但最大的部分是由于线程管理**。

*   正如评论中所建议的那样（Luca Carlon，谢谢），我尝试使用 Microsoft Visual Studio (MSVC) 的编译器而不是 MinGW 来构建应用程序。令人惊讶的是，计算（包含所有线程和所有内容）现在“仅”比 Linux 慢 20% 到 50%！我想我会继续前进并对此感到满意。我注意到奇怪的是，“纯 C++”计算（只有一个线程）现在甚至更慢（比使用 MinGW），这必须解释整体差异。据我所知，**MinGW 比 MSVC 稍微好一点，只是它处理线程的方式像个白痴**。

所以，我想要么我可以做一些事情来让 MinGW（理想情况下我宁愿使用它而不是 MSVC）更好地处理线程，或者它不能。我会很惊讶，它怎么可能不为人所知和记录在案？尽管我想我应该小心不要太快得出结论，但我只在一台计算机上比较了东西（目前）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T09:59:20.247

另一种选择可能是：在 linux 上，qt 刚刚加载，这可能会发生，即如果您使用 KDE，而在 Windows 中必须加载库，这样会减慢计算时间。要检查有多少库加载浪费了您的应用程序，您可以使用纯 C++ 代码编写一个虚拟测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T12:11:11.240

我听说过一种情况，如果你做错了，Windows 写入文件的速度会非常慢。（这与 Qt 无关。）

这种情况下的问题是，开发人员使用了 SQLite 数据库，编写了大约 10000 个数据集，并且`COMMIT`在每次插入后都执行了 SQL。这导致 Windows 每次都将整个 DB 文件写入磁盘，而 Linux 只会更新 RAM 中文件系统 inode 的缓冲版本。在这种情况下，速度差异甚至更糟：Linux 上为 1 秒，而 Windows 上为 1 分钟。（在他将 SQLite 更改为最后只提交一次之后，在 Windows 上也是 1 秒。）

因此，如果您要将计算结果写入磁盘，您可能需要检查您是否正在调用`fsync()`或`fflush()`过于频繁。如果您的编写代码来自库，您可以使用`strace`它（仅限 Linux，但应该给您一个基本的想法）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T21:45:45.717

您可能会因互斥体在 Windows 和 Linux 上的运行方式而遇到性能差异。

每次在锁定时发生资源争用时，Windows 上的纯互斥代码可以等待 15 毫秒。在 Windows 上执行更好的同步机制是[关键部分](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682530%28v=vs.85%29.aspx)。在大多数情况下，它不会遇到常规互斥锁所经历的锁定惩罚。

我发现在 Linux 上，常规互斥锁的性能与 Windows 上的关键部分相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T22:45:53.697

可能是内存分配器，尝试使用Google 的[jemalloc](http://www.canonware.com/jemalloc/)或[tcmalloc](http://code.google.com/p/gperftools/?redir=1)。Glibc 的 ptmalloc3 明显优于 MSVC 的 crt 中旧的硬壳分配器。Microsoft 的类似选项是[并发 CRT](http://msdn.microsoft.com/en-us/library/ee207192.aspx)，但您不能简单地将其作为替代品放入。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T11:31:33.717

我注意到我的电脑上的行为完全相同。我正在运行 Windows 7（64 位）、Ubuntu（64 位）和 OSX（Lion 64 位），我的程序比较了 2 个 XML 文件（每个文件超过 60Mb）。它也使用多线程（2个线程）：

```
-Windows : 40sec

-Linux : 14sec (!!!)

-OSX : 22sec. 
```

我使用个人线程类（而不是 Qt 类），它在 linux/OSX 上使用“pthread”，在 Windows 上使用“threads”。我使用 Qt/mingw 编译器，因为我需要来自 Qt 的 XML 类。

我发现（目前）没有办法让 3 个操作系统具有类似的性能......但我希望我会！

我认为另一个原因可能是内存：我的程序使用了大约 500Mb 的 RAM。所以我认为 Unix 管理得最好，因为在单线程中，Windows 正好慢 1.89 倍，我不认为 Linux 可以慢 2 倍以上！

# mysql - 我无法在下表中显示第 3、第 4 和第 9 行

> ID：12878981
> 
> 赞同：-1
> 
> 时间：2012-10-14T03:08:15.907
> 
> 标签：mysql, sql

我无法编写查询以显示下表中的第 3、第 4 和第 9 行，因为它不包含任何整数列...请帮助查找相同的查询

```
_______________________________

| **name**  | **surname** | **address**   |
-------------------------------
| John  | Sailo   | Washington|
-------------------------------
| Peter | Mary    | New York  |
-------------------------------
| Sun   | Zombia  | Sri Lanka |
------------------------------- 
| Tom   | Tam     | India     |
------------------------------- 
| Addy   | Kakar  | Nepal     |
------------------------------- 
| Pun   | Zzom    | Australia |
------------------------------- 
| Tikki | Hob     | USA       |
------------------------------- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T03:20:29.827

如果这里没有 ID 或其他列可以帮助您对无法完成任务的数据进行排序，

但是，如果您不在乎，可以使用 LIMIT 来获得目标

```
SELECT * from names LIMIT 0,1;
#3rd and 4th
SELECT * from names LIMIT 2,2;
#9th
SELECT * from names LIMIT 8,1;
# all
SELECT * FROM names; 
```

[http://sqlfiddle.com/#!2/6b872/5](http://sqlfiddle.com/#!2/6b872/5)

# ruby-on-rails-3 - RSpec - 我需要保留非请求规范吗？

> ID：12878985
> 
> 赞同：0
> 
> 时间：2012-10-14T03:09:39.853
> 
> 标签：ruby-on-rails-3, rspec, rspec-rails

我已经为我的应用程序生成了一些控制器和模型，现在我想添加测试（我知道这有点倒退，但至少我在我的项目中开始得相当早）。无论如何，每次我生成控制器/模型时，我都没有包含 --no-test-framework，所以现在我有一堆与控制器、助手、模型和视图相关的规范。我需要这些吗？如果没有，是否可以删除它们？我从一些教程（Hartl，Bates）中注意到他们正在使用请求规范，这些都是我需要的吗？

谢谢！

# javascript - adsense 代码不显示广告

> ID：12878990
> 
> 赞同：0
> 
> 时间：2012-10-14T03:10:23.790
> 
> 标签：javascript, wordpress, adsense

我有一个名为 www.onlinegreatway.com 的 wordpress 网站。在我的网站中，adsense 代码不起作用。我没有违反 google adsense 的任何政策。广告没有显示在主页以及单个帖子页面中。但是，如果我输入了一个错误的 url，例如 www.onlinegreatway.com/abcdef，然后主页会再次打开标题为“找不到页面”（我认为这是因为我没有创建任何 404.php），此时，广告正在展示。问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T03:42:58.677

> www.onlinegreatway.com/abcdef，然后再次打开主页，标题为“找不到页面”（我认为这是因为我没有创建任何 404.php）

这是因为 url 格式 www.onlinegreatway.com/abcdef 由 wordpress 创建的 .htaccess 文件处理。

# android - 如何在 ScrollView 中获取视图的偏移量？

> ID：12878997
> 
> 赞同：10
> 
> 时间：2012-10-14T03:11:33.113
> 
> 标签：android, scrollview, offset

有一个`ScrollView`和其中有很多孩子的意见。有什么方法可以让每个孩子的偏移量到 ScrollView 的顶部？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-14T06:10:20.957

嗯，不确定这是否是最快、最好的方法，但是如果您获得视图在屏幕上的位置，并且您知道 ScrollView 的顶部，则可以计算视图相对于 ScrollView 的偏移量。要获取视图在屏幕中的位置：

```
int[] location = {0,0};
view.getLocationOnScreen(location); 
```

`location[1]`有 Y 值。当视图位于视口“上方”时，您将获得负值。

# database - 查询表的多个组合和默认值

> ID：12878998
> 
> 赞同：0
> 
> 时间：2012-10-14T03:12:04.077
> 
> 标签：database, oracle, lookup

我有一张像

```
City    POSTAGE   PRICE**                   

HOUSTON   DEFAULT    20
DEFAULT   AIR        14
DEFAULT   GROUND     30
DEFAULT   DEFAULT    40 
```

现在我想用“CHICAGO,GROUND”之类的组合查询这张桌子上的价格，它应该检查是否存在完美的组合，否则我应该用 DEFAULT 替换并搜索值..

例如，HOUSTON,AIR 应该返回 14 HOUSTON,GROUND 应该返回 20
HOUSTON,FEDEX 应该返回 20 CHICAGO,FEDEX 应该返回 40

有没有办法实现这一点而不是编写多个查询..

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T03:40:26.450

这使用 SQL*Plus 语法来传递参数，您可能需要更改它以适应：

```
 select price
 from your_table
 where ( city = '&p_city' or city = 'DEFAULT') 
 and ( postage = '&p_postage' or postage = 'DEFAULT') 
 order by case when city = '&p_city' then 1 else 2 end 
          , case when postage = '&p_postage'  then 1 else 2 end 
```

这将返回多行，但大概您只需要一个 PRICE。ORDER BY 子句将 CITY 上的匹配优先于 POSTAGE 上的匹配。然后，您可以选择第一行。