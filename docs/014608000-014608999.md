# StackOverflow 问答 14608000-14608999

# jsf - PrimeFaces，如何避免 p:selectOneMenu 选定值中 p:column 的串联

> ID：14608003
> 
> 赞同：-1
> 
> 时间：2013-01-30T15:46:35.930
> 
> 标签：jsf, primefaces, selectonemenu

我想将 p:selectOneMenu 与带有 p:columns 的自定义内容一起使用（如[http://www.primefaces.org/showcase-labs/ui/selectOneMenu.jsf](http://www.primefaces.org/showcase-labs/ui/selectOneMenu.jsf)所示），我想在下拉字段的信息少于可能值的下拉列表中显示的信息。

例如，下面的代码在选择后应该只显示*bnkCod*（例如'1'）。
相反，它显示了*bnkCod*和*bnkNam*的串联（例如，'1 Bank 1'）。

*bnkCod*和*bnkNam*都是字符串，转换器工作正常。

任何人都可以帮我解决问题吗？

**JSF：**

```
 <p:selectOneMenu value="#{bean.bank}" converter="bankCodeConverter" var="p">  
              <f:selectItem itemLabel="Select One" itemValue="" />  
              <f:selectItems value="#{bean.banks}" 
                             var="bank" itemLabel="#{bank.bnkCod}" itemValue="#{bank}"/>                
              <p:column>  
                  #{p.bnkCod}
              </p:column>                
              <p:column>  
                  #{p.bnkNam}  
              </p:column>  
 </p:selectOneMenu> 
```

**豆：**

```
List<Bank> banks = new ArrayList<Bank>();
banks.add(new Bank("1","Bank 1"));
banks.add(new Bank("2","Bank 2")); 
```

**转换器：**

```
@FacesConverter(forClass=Bank.class,value="bankCodeConverter")
public class MeansOfPaymentConverter implements Converter {

    @Override
    public Object getAsObject(FacesContext context, UIComponent component, String value) {
        //... retrieve bean
        return bean.getBanksMap().get(value);
    }

    @Override
    public String getAsString(FacesContext context, UIComponent component, Object value) {
        if(value instanceof Bank) 
            return ((Bank) value).getBnkCod();
        else
            return null;
    }
} 
```

我正在使用 PrimeFaces 3.4，问题出现在 Safari 6.0 和 Firfefox 18.0.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-08T14:35:13.580

我发现解决这个问题的方法是覆盖 selectOneMenu 小部件 js 代码。

1) 打开 primefaces jar 文件并在 META-INF/resources/primefaces 下查找 primefaces.js 2) 将 PrimeFaces.widget.SelectOneMenu 的代码复制到新的 js 文件中并从您的主应用程序页面调用它（可能是模板） 3)使用以下代码覆盖方法 setLabel：

```
setLabel : function(a) {
  var theLabel = a;
  var labelArray = a.split('\n');
  for ( var idx = 0; idx < labelArray.length; idx++) {
    if (labelArray[idx] != '') {
      theLabel = labelArray[idx];
      break;
    }
  }
  if (this.cfg.editable) {
    this.label.val(theLabel);
  } else {
    if (theLabel == "") {
      this.label.html("&nbsp;");
    } else {
      this.label.text(theLabel);
    }
  }
} 
```

使用列时，标签的格式为 \ncol1\ncol2\ncolN。所以我的解决方法是在将标签拆分为 \n 后获取第一个非空字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:04:58.057

你可以尝试这样的列：

```
<p:column rendered="#{p.bnkCod == bean.bank.bnkCod}">
  #{p.bnkCod}
</p:column>
<p:column rendered="#{p.bnkCod == bean.bank.bnkCod}">
  #{p.bnkNam}
</p:column>
<p:column colspan="2" rendered="#{p.bnkCod != bean.bank.bnkCod}">
  #{p.bnkCod}
</p:column> 
```

还要更新你的列表，通过在里面添加这个`selectOneMenu`：

```
<p:ajax update="@this" process="@this"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-24T08:08:24.393

我找不到问题的任何解决方案。因此，我决定同时显示“p.bnkCod”和“p.bnkNam”这两个值，这是可以接受的。

# vba - 仅当 B 列中的 ID 重复时，如何计算 C 列中“是”的数量

> ID：14608006
> 
> 赞同：3
> 
> 时间：2013-01-30T15:46:43.840
> 
> 标签：vba, excel, excel-formula, excel-2010

我需要帮助在 C 列中计算“是”，但如果 B 列中的 ID 重复，则只计算一次

输出样本。对于以下示例，计数应为 6。

这是保管箱文件链接。 [Dropbox 文件链接](http://db.tt/iwXgGiYs)

![在此处输入图像描述](../Images/f4875278ef314f9b7cf8aca49ea41841.png)

我已经可以通过 if 和 else 条件使用公式来做到这一点，但我希望有人可以使用单行公式想出更好的方法。

**单元格 F2 中的**当前解决方案**** 

 **```
=IF(B2<>B1,IF(C2="Yes","1",""),IF(B2=B1,IF(F1="1","",IF(B2=#REF!,"","")))) 
```

在单元格 F3 及以下

```
=IF(B3<>B2,IF(C3="Yes","1",""),IF(B3=B2,IF(F2="1","",IF(B3=B1,"","")))) 
```

然后我只数所有的并得到总数 1。

```
=countif(F2:F159,"1") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T16:03:36.723

您可以在链接中使用与我之前的答案类似的方法，即在您的保管箱示例中使用单元格引用

`=SUM(IF(FREQUENCY(IF(I2:I14="Yes",H2:H14),H2:H14),1))`

确认`CTRL+SHIFT+ENTER`

H2:H14 必须是数字数据

通常，假设 Range 4 是数字，您可以将此公式用于最多 3 个条件

`=SUM(IF(FREQUENCY(IF((Range1="x")*(Range2="y")*(Range3="z"),Range4),Range4),1))`

可以根据需要添加或删除条件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T15:55:20.483

将其放入 D2 并向下拖动：

```
=IF(COUNTIFS(B$2:B2,B2,C$2:C2,"Yes")=1,1,"don't count") 
```**

# c# - 如何为 ICollection Childs 提供已删除/原始项目的“列表”

> ID：14608011
> 
> 赞同：0
> 
> 时间：2013-01-30T15:47:06.897
> 
> 标签：c#, list, datatable, observablecollection, icollection

嗨，我想做类似的事情`SomeCollection.GetChanges(ItemState.Deleted)`，结果应该是所有被删除的项目

你可以用`DataTable`. 但是如何在`List<T>`or中实现这一点`ObservableCollection<T>`？

这个问题已经有解决方案了吗？如果不是，创建这样一个集合是否明智？

任何意见是极大的赞赏

## 编辑：

到目前为止，这是我的代码，**我现在已经测试并修复了它，但我仍然认为可能有更好的解决方案**

```
using System;
using System.Linq;
using System.Collections.ObjectModel;
using System.Collections.Generic;
using System.Collections.Specialized;
using System.Collections;
using System.ComponentModel;

namespace Framework
{
    public enum CollStat
    {
        Unchanged,
        Added,
        Replacer,
        Replaced,
        Deleted,
        Modified
    }

    public class NotifyObservableCollection<T> : ObservableCollection<T> where T : Notifyer
    {
        #region private
        private class _ElementKeeper<T>
        {
            public T Element;
            public CollStat Modification;

            public _ElementKeeper(T element, CollStat Modifi)
            {
                Element = element;
                Modification = Modifi;
            }
        }

        private int _ChangesIdx = 0;
        private bool _Reject = false;

        private Dictionary<int, _ElementKeeper<T>> DicOfChanges = new Dictionary<int, _ElementKeeper<T>>();
        #endregion //private

        #region cTor (3)
        public NotifyObservableCollection() : base() { }
        public NotifyObservableCollection(List<T> list)
            : base(list)
        {
            Subscribe(list);
        }
        public NotifyObservableCollection(IEnumerable<T> collection)
            : base(collection)
        {
            Subscribe(collection.ToList());
        }
        #endregion

        #region ObservableCollection override(2)
        protected override void OnCollectionChanged(NotifyCollectionChangedEventArgs e)
        {
            if (!_Reject)
                if (e.Action == NotifyCollectionChangedAction.Add)
                {
                    foreach (T item in e.NewItems)
                    {
                        DicOfChanges.Add(_ChangesIdx, new _ElementKeeper<T>(item, CollStat.Added));
                        _ChangesIdx++;
                    }
                }

                else if (e.Action == NotifyCollectionChangedAction.Replace)
                {
                    foreach (T item in e.OldItems)
                    {
                        DicOfChanges.Add(_ChangesIdx, new _ElementKeeper<T>(item, CollStat.Replaced));
                        _ChangesIdx++;
                    }

                    foreach (T item in e.NewItems)
                    {
                        DicOfChanges.Add(_ChangesIdx, new _ElementKeeper<T>(item, CollStat.Replacer));
                        _ChangesIdx++;
                    }

                }

                else if (e.Action == NotifyCollectionChangedAction.Remove)
                {
                    foreach (T item in e.OldItems)
                    {
                        DicOfChanges.Add(_ChangesIdx, new _ElementKeeper<T>(item, CollStat.Deleted));
                        _ChangesIdx++;
                    }
                }

            Unsubscribe(e.OldItems);
            Subscribe(e.NewItems);
            base.OnCollectionChanged(e);
        }

        protected override void ClearItems()
        {
            foreach (T element in this)
                element.PropertyChanged -= ContainedElementChanged;

            base.ClearItems();
        }

        #region ItemNotification
        private void Subscribe(ICollection iList)
        {
            if (iList != null)
                foreach (T element in iList)
                    element.PropertyChanged += ContainedElementChanged;
        }

        private void Unsubscribe(ICollection iList)
        {
            if (iList != null)
                foreach (T element in iList)
                    element.PropertyChanged -= ContainedElementChanged;
        }

        private void ContainedElementChanged(object sender, PropertyChangedEventArgs e)
        {
            var item = sender as T;

            if (DicOfChanges.Count < 1)
            {
                DicOfChanges.Add(_ChangesIdx, new _ElementKeeper<T>(item, CollStat.Modified));
                _ChangesIdx++;
            }
            else if (!DicOfChanges.Any(x => (x.Value.Element == item && x.Value.Modification == CollStat.Modified)))
            {
                DicOfChanges.Add(_ChangesIdx, new _ElementKeeper<T>(item, CollStat.Modified));
                _ChangesIdx++;
            }          

            OnPropertyChanged(e);
        }
        #endregion //ItemNotification
        #endregion  //ObservableCollection override(2)

        /// <summary>
        /// Accepts all Changes they are made to this Object
        /// </summary>
        public void AcceptChanges()
        {
            DicOfChanges.Clear();
            _ChangesIdx = 0;
        }

        /// <summary>
        /// Undoes
        /// </summary>
        public void RejectChanges()
        {
            _Reject = true;

            for (int i = _ChangesIdx; i >= 0; i--)
            {
                if (DicOfChanges[i].Modification == CollStat.Added)
                    this.Items.Remove(DicOfChanges[i].Element);

                else if (DicOfChanges[i].Modification == CollStat.Deleted)
                    this.Items.Add(DicOfChanges[i].Element);

                else if (DicOfChanges[i].Modification == CollStat.Replacer)
                {
                    var idx = this.Items.IndexOf(DicOfChanges[i - 1].Element);
                    this.Items[idx] = DicOfChanges[i].Element;
                }
            }

            _Reject = false;

            AcceptChanges();
        }

        /// <summary>
        /// Returns a ObservableCollection with Elements they match the CollStat type
        /// </summary>
        /// <param name="stat">CollStat of the elements</param>
        /// <returns>ObservableCollection with the requested Elements</returns>
        public ObservableCollection<T> GetChanges(CollStat stat)
        {
            ObservableCollection<T> CollOfChanges = new ObservableCollection<T>();

            switch (stat)
            {
                case CollStat.Added:
                    //Alle hinzugefügten Elemente auswählen
                    CollOfChanges = CollOfStat(CollStat.Added);

                    //Alle gelöschten Elemente auswählen
                    var Deleted = DicOfChanges.Where(x => (x.Value).Modification == CollStat.Deleted);

                    //Entfernen dieser Elemente sollten sie in CollOfChanges vorhanden sein
                    foreach (KeyValuePair<int, _ElementKeeper<T>> pair in Deleted)
                        if (CollOfChanges.Contains(pair.Value.Element))
                            CollOfChanges.Remove(pair.Value.Element);
                    break;

                case CollStat.Deleted:
                    CollOfChanges = CollOfStat(CollStat.Deleted);
                    break;

                case CollStat.Modified:
                    CollOfChanges = CollOfStat(CollStat.Modified);
                    break;

                case CollStat.Replacer:
                    CollOfChanges = CollOfStat(CollStat.Replacer);
                    break;

                case CollStat.Replaced:
                    CollOfChanges = CollOfStat(CollStat.Replaced);
                    break;

                case CollStat.Unchanged:
                    CollOfChanges = new ObservableCollection<T>(this);

                    var Added = DicOfChanges.Where(x => (x.Value).Modification == CollStat.Added);
                    foreach (KeyValuePair<int, _ElementKeeper<T>> pair in Added)
                        CollOfChanges.Remove(pair.Value.Element);
                    Added = null;

                    Deleted = DicOfChanges.Where(x => (x.Value).Modification == CollStat.Deleted);
                    foreach (KeyValuePair<int, _ElementKeeper<T>> pair in Deleted)
                        CollOfChanges.Remove(pair.Value.Element);
                    Deleted = null;

                    var Modified = DicOfChanges.Where(x => (x.Value).Modification == CollStat.Replacer);
                    foreach (KeyValuePair<int, _ElementKeeper<T>> pair in Modified)
                        CollOfChanges.Remove(pair.Value.Element);
                    Modified = null;
                    break;

                default:
                    break;
            }

            return CollOfChanges;
        }

        /// <summary>
        /// Creats a ObservableCollection that contains all Elements from the overhanded CollStat Type
        /// </summary>
        /// <param name="stat">CollStat Type</param>
        /// <returns>ObservableCollection</returns>
        private ObservableCollection<T> CollOfStat(CollStat stat)
        {
            var Coll =new ObservableCollection<T>();
            var Modified = DicOfChanges.Where(x => (x.Value).Modification == stat);

            //Hinzufügen dieser Elemente
            foreach (KeyValuePair<int, _ElementKeeper<T>> pair in Modified)
                Coll.Add(pair.Value.Element);

            return Coll;
        }
    }
} 
```

**我仍然认为 Linq 太多了**。任何改善性能的建议将不胜感激

## 编辑2：

**我在[这里](http://dataobjectmodel.codeplex.com/)找到了一个解决方案，它包含了我想要的更多但仍然比我更好的解决方案：D**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:58:09.450

您只需要订阅 ObservableCollection 的[CollectionChanged](http://msdn.microsoft.com/en-us/library/ms653375%28v=vs.100%29.aspx)事件，然后检查[NotifyCollectionChangedEventArgs的](http://msdn.microsoft.com/en-us/library/system.collections.specialized.notifycollectionchangedeventargs.aspx)[Action](http://msdn.microsoft.com/en-us/library/system.collections.specialized.notifycollectionchangedeventargs.action.aspx)属性的值

# servicestack - 有没有人有一个使用 ServiceStack.net 和 asp.net 网站的例子，而不是 web 应用程序

> ID：14608012
> 
> 赞同：1
> 
> 时间：2013-01-30T15:47:13.787
> 
> 标签：servicestack

我访问了一个现有的 asp.net 网站（不属于我），他们要求添加一些 Web 服务。每个 ServiceStack.net 示例都用于 Web 应用程序而不是网站。

有人做过吗？我用谷歌搜索了很多，没有找到任何东西。

我知道 web.config 部分完全不同，但我正在寻找一些有用的东西。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T22:54:23.720

Global.asax 文件：

```
<%@ Application Language="C#" %>
<%@ Import Namespace="ServiceStack.ServiceHost" %>
<%@ Import Namespace="ServiceStack.ServiceInterface" %>

<script runat="server">

[Route("/hello")]
[Route("/hello/{Name}")]
public class Hello
{
   public string Name { get; set; }
}
public class HelloResponse
{
    public string Result { get; set; }
}
public class HelloService : Service
{
    public object Any(Hello request)
    {
        return new HelloResponse { Result = "Hello, " + request.Name };
    }
}
public class HelloAppHost : ServiceStack.WebHost.Endpoints.AppHostBase
{
    //Tell Service Stack the name of your application and where to find your web services
    public HelloAppHost() : base("Russ", typeof(HelloService).Assembly) { }

    public override void Configure(Funq.Container container)
    {
        //register any dependencies your services use, e.g:
        //container.Register<ICacheClient>(new MemoryCacheClient());
    }
} 
void Application_Start(object sender, EventArgs e) 
{
    new HelloAppHost().Init();

}

void Application_End(object sender, EventArgs e) 
{
    //  Code that runs on application shutdown

}

void Application_Error(object sender, EventArgs e) 
{ 
    // Code that runs when an unhandled error occurs

}

void Session_Start(object sender, EventArgs e) 
{
    // Code that runs when a new session is started

}

void Session_End(object sender, EventArgs e) 
{
    // Code that runs when a session ends. 
    // Note: The Session_End event is raised only when the sessionstate mode
    // is set to InProc in the Web.config file. If session mode is set to StateServer 
    // or SQLServer, the event is not raised.

}

</script> 
```

至于 web.config 文件，我发现它与 web 应用程序示例相同。只需找到标签的相应部分，然后输入它们所属的两行：

```
<system.web>
   <httpHandlers>
       <add path="*" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*"/>
   </httpHandlers>
</system.web>

<system.webServer>
    <handlers>
        <add path="*" name="ServiceStack.Factory"   type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*" preCondition="integratedMode" resourceType="Unspecified" allowPathInfo="true" /> 
    </handlers>
</system.webServer> 
```

对于参考，我添加了 nuget 包并进行了 cmd 行调用：install-package ServiceStack。但是你的 bin 应该有这些文件：

![服务堆栈 bin 文件](../Images/ba004c12118cca69e55b751808c777a8.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T14:39:24.653

我刚刚尝试了一个新的 ASP.NET 网站，它确实有效。元数据页面显示不正确，但所有端点都正常工作。我想只要稍加修改，您就可以使元数据页面正常工作。

我通过 nuget 安装了 ServiceStack，并且由于网站没有项目文件，因此引用的显示方式会有所不同。所有 dll 将直接加载到 bin 文件夹中。

然后添加所需的最低 DTO、服务和 AppHost 代码，它就会工作。

# perl - 有没有办法在使用严格时从 Perl 中的字符串/变量创建变量？

> ID：14608013
> 
> 赞同：1
> 
> 时间：2013-01-30T15:47:13.700
> 
> 标签：perl, variables

我有一些这样的陈述：

```
my $name = $criteria->{'name'} if $criteria->{'name'};
my $age  = $criteria->{'age'}  if $criteria->{'age'};
my $dob  = $criteria->{'dob'}  if $criteria->{'dob'};
.
.
.
# there are around 8 of these 
```

我想做类似的事情：

```
foreach (qw/name age dob .../) {
    ${$_} = $criteria->{$_} if $criteria->{$_};
} 
```

我确定我以前做过这个，但是当我尝试使用它时，`use strict`它抛出了一个错误。

有没有办法做到这一点？还是有更好的方法来做我想做的事？我只是真的很懒惰，但如果有办法做到这一点，那会很有趣。

如果可以的话，在内存方面运行会更有效吗？我正在尝试提高脚本的速度。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T15:50:37.123

更好的方法是使用你已经拥有的散列，而不是使用当前包命名空间作为散列。不，您不会在尝试做的事情上节省内存或时间。事实上，你正在使用更多的两者。

# python - 如何检查特定整数是否在列表中

> ID：14608015
> 
> 赞同：31
> 
> 时间：2013-01-30T15:47:20.077
> 
> 标签：python, list, if-statement, python-2.7, int

如果某个整数在列表中，我想知道如何创建一个执行子句的 if 语句。

我看到的所有其他答案都要求特定条件，如素数、重复项等，我无法从其他人那里收集到我的问题的解决方案。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-01-30T15:49:49.593

您可以简单地使用`in`关键字。像这样 ：

```
if number_you_are_looking_for in list:
    # your code here 
```

例如 ：

```
myList = [1,2,3,4,5]

if 3 in myList:
    print("3 is present") 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-30T15:48:49.607

你在找这个吗？：

```
if n in my_list:
    ---do something--- 
```

`n`你查的号码在哪里。例如：

```
my_list = [1,2,3,4,5,6,7,8,9,0]
if 1 in my_list:
    print 'True' 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2020-11-29T15:10:49.780

如果您想查看特定数字，则使用`in`关键字，但如果您有

`list2 = ['a','b','c','d','e','f',1,2,3,4,5,6,7,8,9,0]`

那你能做什么。你只需这样做：

```
list2 = ['a','b','c','d','e','f',1,2,3,4,5,6,7,8,9,0]
for i in list2:
if isinstance(x , int):
    print(x) 
```

这只会打印给定列表中存在的整数。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2019-11-13T19:57:30.557

由于这种情况，我认为上述答案是错误的：

```
my_list = [22166, 234, 12316]
if 16 in my_list: 
     print( 'Test 1 True' )
 else: 
      print( 'Test 1 False' ) 

my_list = [22166]
if 16 in my_list: 
    print( 'Test 2 True' )
else: 
    print( 'Test 2 False'  ) 
```

将产生： 测试 1 错误 测试 2 正确

更好的方法：

```
if ininstance(my_list, list) and 16 in my_list: 
    print( 'Test 3 True' )
elif not ininstance(my_list, list) and 16 == my_list: 
    print( 'Test 3 True' )
else: 
    print( 'Test 3 False' ) 
```

# service - 每个用户的终端服务器内存使用情况

> ID：14608018
> 
> 赞同：1
> 
> 时间：2013-01-30T15:47:24.977
> 
> 标签：service, terminal

我需要对我的终端服务器运行查询，以查找每个用户每个会话的内存使用情况。我想编写一个简单的批处理文件，我可以每小时运行一次，将每个用户的内存使用情况打印到文本文件中。是否有类似于 QUSER 的命令显示内存使用情况？我一直在寻找一种方法来做到这一点，但到目前为止还没有想出任何办法。我正在寻找可以返回类似于以下信息的内容：

用户名 00.00mb

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:11:36.877

WMI 的课程中​​提供了一些基本统计信息[`Win32_Process`](http://msdn.microsoft.com/en-us/library/aa394372%28v=VS.85%29.aspx)（包括会话 ID），这应该可以帮助您入门。

要对此进行扩展，请在此处使用 PowerShell：

1.  用于`Win32_Process`获取进程详细信息，包括 WorkingSetSize 和 SessionId。

2.  对于每个会话中的一个进程（不管是哪个）来获取用户帐户，您需要遵循 WMI 中的关联（有点像 RDBMS 中的关系，但是 WQL——用于查询 WMI 的类似 SQL 的语言）没有'不要加入）。

所以像：

```
$processes = Get-WmiObject -class Win32_Proces

# For example pick the first process in session 1
$sessionProcess = $processes | Where-Object { $_.SessionId -ne 0 } | Select-Object -first 1

# Get the session for the process, and then the user account for that session:
$logon = get-wmiobject -Query "associators of{$($sessionProcess.__RELPATH)} where resultclass=Win32_LogonSession"
$user =  get-wmiobject -Query "associators of{$($logon.__RELPATH)} where resultclass=Win32_UserAccount" 
```

并将`$user`持有一个[`Win32_UserAccount`](http://msdn.microsoft.com/en-us/library/aa394507%28v=vs.85%29.aspx)实例。

注意。我建议过滤掉会话 0 以避免包含 Windows 的所有内置部分。

# salesforce - LMA 和私人上市问题

> ID：14608022
> 
> 赞同：0
> 
> 时间：2013-01-30T15:47:44.587
> 
> 标签：salesforce

我可以在不通过安全审查流程的情况下为我的应用获得 LMA 吗？

我提交了一个请求 LMA 的案例，salesforce rep。回复说为了获得 LMA，我的应用程序需要通过安全审查，但根据 ISVforce 指南，我的私人上市应用程序似乎可以拥有 LMA。我很困惑，请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T19:35:33.630

要获得 LMA 应用程序，您至少需要表明您的应用程序通过安全审查的意图，并且您通常要与 Salesforce.com 就您的应用程序签署条款清单，即使您不打算列出您的应用程序公开。如果您只提供免费应用程序（您没有提及您的应用程序是免费还是付费），我不确定政策是什么，但如果它是免费的，那么通过安全审查您不会有任何损失，因为免费应用程序可以获得免费的安全审查。

无论如何，付费应用程序的安全审查只需 300 美元，这通常不是一个巨大的障碍，而且对于 LMA 提供的好处来说可能是值得的。另外，您的应用程序将因此更加安全。

# r - 在 R 调试器中显示上下文？

> ID：14608031
> 
> 赞同：7
> 
> 时间：2013-01-30T15:48:10.110
> 
> 标签：r, debugging

如果我已经通过 using 进入 R 调试器`options(error=recover)`，我如何才能了解我的方位并查看它在哪里丢弃了我的代码？例如：

```
options(error=recover)
solve(matrix(0, nrow=5, ncol=5))

# Error in solve.default(matrix(0, nrow = 5, ncol = 5)) : 
#   Lapack routine dgesv: system is exactly singular: U[1,1] = 0
# 
# Enter a frame number, or 0 to exit   
# 
# 1: solve(matrix(0, nrow = 5, ncol = 5))
# 2: solve.default(matrix(0, nrow = 5, ncol = 5))
# 
# Selection: 1
# Called from: top level 
Browse[1]> 
```

在这一点上，如果我点击`n`or `return`，我会再次死去并得到`recover`提示，而看不到任何代码行。如果我进行堆栈跟踪（类型`where`），我可以看到调用链，但看不到我实际所在的代码（在堆栈的任何级别）。 *[实际上在这种`solve`情况下我确实看到了一些代码，但这只是因为一个匿名函数是堆栈的一部分，所以它别无选择，只能打印其定义而不是其名称。]*

有小费吗？

[编辑] 我（除其他外）对我需要弄清楚某人的包代码中发生了什么的用例感兴趣。我不控制源，所以我不能添加 a `browser()`，而且我不能轻松访问源文件，所以只是一个行号不会有太大帮助。我主要只是想看看实际的代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T15:55:04.920

如果您还设置`options(show.error.locations=TRUE)`了 ，R 将打印带有错误的源代码行号，例如

```
Error in eval(expr, envir, enclos) (from test.R#4) : 
```

`test.R`将是您的脚本的名称，#4 表示错误发生在第四行。

如果您只是`browser`用来插入断点，您可以使用 提供一些识别文本`browser(text='end of plotting function')`，然后在浏览会话时检索此文本`browserText()`以验证您的位置。

### 编辑

如果您想查找使用已安装函数时遇到错误的位置，标准方法是调用`debug`该函数，运行您的代码，然后单步执行，直到遇到错误。有关`?debug`更多详细信息，请参阅。

但是，如果您是不耐烦的类型，则可以使用以下技巧来获取已安装函数主体的行号，当`show.error.locations`设置为`TRUE`.

```
s<-paste(c(capture.output(dump('solve.default', file='')), 
          'solve(matrix(0, nrow=5, ncol=5))'), 
         collapse='\n')
source(textConnection(s)) 
```

这`s`是一个字符串，由`solve.default`（在您提供的示例中在您的矩阵上调用的方法）的定义和引发错误的调用组成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T17:19:31.913

如果你喜欢 Emacs，我知道 ess-tracebug 包通过将光标移动到源代码缓冲区中的当前行来提供此功能。ess-tracebug 包含在最新版本的 ESS 模式中。

（如果 OP 不喜欢 Emacs，请不要投票赞成我的答案：请等待更好的答案。）

# c# - Kendo UI MVC 网格选择更新单独控制

> ID：14608033
> 
> 赞同：2
> 
> 时间：2013-01-30T15:48:13.197
> 
> 标签：c#, javascript, asp.net-mvc, kendo-ui, kendo-grid

请原谅我的愚蠢问题，因为我对 MVC 和 Kendo UI 都是新手，并且仍在尝试找出可能的方法。

我有一个页面布局，页面上半部分有一个网格，底部有一个选项卡式面板。当用户选择网格上的一条记录时，我希望能够调用控制器进行数据库调用并使用详细信息填充选项卡式面板。

现在我能够获取所选行的 ID ...但我想知道如何从 JavaScript 调用控制器并只更新选项卡式面板。我已经阅读了一些关于 $.ajax 的信息，是否可以调用控制器并让它传回填充了我需要的详细信息的部分视图（选项卡式面板）？

我已经尝试在网格内的自定义详细信息模板中加载面板，但决策者*耸了耸肩*，放弃了这个想法。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T01:14:53.770

这当然是可能的。不过，您需要更加熟悉 jQuery。看起来您已经掌握了 Kendo Grid 事件，所以我不会在这里讨论这个问题。这是诀窍（之一）......

在这种情况下，Kendo Grid 被用作一个花哨的多选，每次选择一个新的州（即 TX，NY）时，都会在调用此函数的网格中触发一个事件。这比你要求的要多，所以我会解释。它正在这样做：

1.  添加网格中的多选项目列表并将此列表分配给隐藏的表单字段。
2.  使用 Ajax 发布在表单中使用此信息和其他信息更新数据库（传递整个表单）。2b。注意'async: false'，这让数据库在下一次 Ajax 调用之前更新。
3.  另一个使用所有表单字段再次查询数据库的 Ajax 帖子。

两个 Ajax 调用都访问 MVC 控制器方法，这些方法与数据库通信并返回部分视图以一次更新页面的两个单独部分。这些可以是任何东西，在这种情况下，它们都是额外的剑道网格，但选项卡式面板同样简单。

```
function updateParts() {
    var grid = $('#States').data('kendoGrid');
    var rows = grid.select();
    $('#StatesQuery').val('');
    rows.each(
        function () {
            var record = grid.dataItem($(this));
            $('#StatesQuery').val($('#StatesQuery').val() + record.StateCode + ",");
        }
    );
    $.ajax({
        url: '@Url.Action("UpdateSomething", "Controller")',
        type: 'post',
        data: $('form#ajaxSearchForm').serialize(),
        async: false,
        success: function (result) {
            $('#SomethingElseDiv').html(result);
        }
    });
    $.ajax({
        url: '@Url.Action("QuerySomething", "Controller")',
        type: 'post',
        data: $('form#ajaxSearchForm').serialize(),
        success: function (result) {
            $('#SearchResultsDiv').html(result);
        }
    });
} 
```

控制器方法

```
[HttpPost]
public ActionResult QuerySomthing(FormCollection formCollection)
{
    var query = new Status(); // Complext Data Model for Search
    query.States = formCollection["StatesQuery"].Split(',');
    ... etc
    var model = new SearchViewModel(); // ViewModel for Partial
    model.StatusSummaries = _submissionsDataProvider.DoQuery(query);
    return View("SearchResults", model);
} 
```

我希望你和我一样喜欢 Kendo 和 MVC！

# amazon-ec2 - Nagios 不会运行 mutt 和 ec2 命令等外部命令

> ID：14608038
> 
> 赞同：0
> 
> 时间：2013-01-30T15:48:31.840
> 
> 标签：amazon-ec2, nagios, mutt

我在 Amazon EC2 实例上作为他们的自定义 Linux 启动并运行 Nagios，它很好地监控了多个进程（在本地和远程主机上）。它正在运行我的海关脚本，没有任何问题。

话虽如此，它不会运行 mutt 也不会运行 ec2 命令行工具（例如 ec2-describe-instances），即使当我尝试以 Nagios 用户身份运行这些命令和我的脚本时，它们也可以正常工作。

我通过 Google 找到的唯一帮助是在 nagios.cfg 中我需要设置： check_external_commands=1 和 check_command_interval=-1 （-1 使其尽可能经常检查）

这两个变量都是在我的 nagios.cfg 中设置的，但外部似乎仍然没有执行。我试图将他们的输出重定向到一个文件，并且所有正在打印的内容都是空行。感谢所有建议，并再次提前感谢您。

更新：尝试将这些命令添加到 /root，没有变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T06:58:13.710

从技术上讲，您所描述的并不是 Nagios 所指的外部命令。外部命令完全在 Nagios 之外运行，并将其“输出”放入外部命令文件 (command_file=/usr/local/nagios/var/rw/nagios.cmd)。IOW，这些是 Nagios “不”运行的命令。

为了让 Nagios 运行命令，它必须在命令文件中。这些非外部命令的完整路径是否正确输入到您的 commands.cfg 文件中？nagios 日志和调试文件中的内容是什么？

# reporting-services - 使用运算符“like”的 SQL Server Reporting Services 过滤器

> ID：14608039
> 
> 赞同：2
> 
> 时间：2013-01-30T15:48:39.117
> 
> 标签：reporting-services, filter, sql-like

我添加了过滤器，它使用带运算符的参数（显示列中包含输入文本的所有行）。我是这样做的：

```
=" * " + Parameters!Roles.Value + " * " . 
```

但是，如果我在参数中不输入任何内容（或保留它`NULL`），它将不会显示该列为空的行。该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T01:36:03.360

我会更改您的过滤器表达式以解析为布尔结果（真或假）。然后将过滤器数据类型更改为布尔值，将运算符更改为 =，将值更改为 True。现在您可以添加到您的表达式以迎合空值 - 使用 IsNothing 函数。

# iphone - 打开某种文件格式

> ID：14608041
> 
> 赞同：0
> 
> 时间：2013-01-30T15:48:43.913
> 
> 标签：iphone, ios, objective-c, xcode

我有一个使用 QuickLook.framework 打开多种类型文件的应用程序，但我无法打开 .dwg 文件（autoCAD），我需要从我的应用程序内部打开它，有没有办法使用 IOS 或使用另一个框架？

你们是怎么解决这个问题的？

在此先感谢并为我的英语不好感到抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T17:14:02.680

Quicklook 仅支持最常见的文件。您可以搜索将显示它们的第三方框架，或者询问 Autocad 是否有允许您的应用程序打开和显示其文件的库。否则，为了打开一个文件，您需要一个已注册的应用程序将打开该文件，然后您可以使用正确的 URL 调用启动该文件。

# jquery - 来自 Cordova 应用程序的 AJAX 请求返回 'status=0'

> ID：14608042
> 
> 赞同：2
> 
> 时间：2013-01-30T15:48:47.453
> 
> 标签：jquery, ios, ajax, post, cordova

我有个问题。我正在为 ios 开发一个 cordova 应用程序，并尝试使用 jQuery 发出 AJAX 请求。外部服务器在 cordova.plist 中被列入白名单（实际上我只是为了确定将 * 列入白名单）。我确信该函数是正确的，因为我可以在 chrome 中手动调用它，并且它返回正确的数据。

但是，它在应用程序中运行时会返回以下标头数据：
`{"readyState":0,"responseText":"","status":0,"statusText":"error"}`

`crossDomain`更改为时`false`返回以下标头数据： `{"readyState":4,"responseText":"","status":404,"statusText":"error"}`

```
$.ajax({  
   type: "POST",  
   url: url,  
   data: request,  
   crossDomain:true,  
   success:  
       function(data, textStatus, jqXHR){  
           console.log('succes :S');  
           console.log(data);  
           console.log(textStatus);  
           console.log(jqXHR);  
       },  
    error:   
       function(data, textStatus, jqXHR){  
           console.log('fail :(');  
           console.log(data);  
           console.log(textStatus);  
           console.log(jqXHR);  
       }  
}); 
```

我希望有人能告诉我出了什么问题，因为我尝试了我能想到的一切。

编辑：谢谢你们，但我想出了问题所在。该项目曾经进行过加密，并且在本机类中仍然存在一些代码残余。所以它加密或解密了一些 URL。这个话题现在可以关闭了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-20T17:58:59.200

不久前我回答了这个问题，并提供了修复 Mootools 和 jQuery 的方法（以及 vanilla javascript 方法）

这里： [PhoneGap ajax 调用每次都失败](https://stackoverflow.com/questions/17964383/phonegap-ajax-call-fails-everytime/19498463#19498463)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-29T06:10:48.223

如果您正在使用，请使用 IP 或虚拟 DNS 而不是 localhost。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-30T15:53:45.903

您是否尝试过指定 dataType 'JSONP' 如下所示

```
dataType: 'jsonp' 
```

是js跨域调用的解决方案

看到这个帖子

[使用 jQuery 进行跨域 ajax JSONP 请求](https://stackoverflow.com/questions/11736431/make-cross-domain-ajax-jsonp-request-with-jquery/11736771#11736771)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-03-31T10:44:37.223

从您的 HTML 文件中删除以下元标记：

https://ssl.gstatic.com；style-src 'self' 'unsafe-inline'; 媒体源 *">

希望这有效！

# php - 根据时间DESC加入两个表

> ID：14608047
> 
> 赞同：0
> 
> 时间：2013-01-30T15:48:53.247
> 
> 标签：php, mysql

我有两个具有不同列名和日期时间的表。

我想根据时间降序显示两个表中的数据。

表1 index,music_added,time

表2 index,photo_added,time

现在，我将它们显示在两个单独的查询中，例如“select * from table1 ORDER BY time DESC”和“select * from table2 ORDER BY time DESC”。

但我希望结果集是按时间 DESC 排序的表 1 和表 2 的混合。那么我应该如何使用 JOIN 或任何其他查询来根据时间合并行呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T15:51:07.797

使用[`UNION`](http://dev.mysql.com/doc/en/union.html)：

```
 SELECT index,music_added,time,'music' AS type
UNION ALL
  SELECT index,photo_added,time,'photo' AS type
ORDER BY time DESC 
```

# sql - 防止重复记录，创建新记录前查询

> ID：14608052
> 
> 赞同：2
> 
> 时间：2013-01-30T15:49:02.010
> 
> 标签：sql, database, ms-access, duplicate-removal

**设置：**我正在创建一个 ms 访问数据库来记录我和其他人将要完成的实验结果。我创建了一个表单和一个子表单；主表单包含有关设备设置的字段，子表单包含该设备设置的实验。链接主节点和链接子节点是 SettingID。

**问题：**尽管主 [settings] 表单中的字段仅限于组合框选择，但仍有许多设置组合。因此，当用户在表单中输入信息时，他们可能没有意识到已经存在具有相同设置的记录，并且由于 SettingID 是自动编号，因此它看起来是唯一的记录，而实际上并非如此。

**问题：**我想对 BeforeInsert 事件运行查询，以在创建此记录之前检查是否存在具有相同设置的记录。如果记录不存在，则照常进行；如果确实存在，则提醒用户并将他们带到该记录。我不知道如何做到这一点。到目前为止我所做的尝试不值得一提，但我会继续尝试找出一些东西，直到有人回答这篇文章。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T22:22:13.420

我相信你会想要两件事，这取决于你想要界面的用户友好程度。

# 唯一索引

在设置表中的列上添加一个多列唯一索引，在这些列中，您不希望在另一行中重复这些值的组合。可以在原始帖子的评论中阅读 KFleschner 提供的链接中的操作方法，或查看此问题的第二个答案，其中有一个屏幕截图与步骤：[我们可以在 MS 访问数据库上创建多列唯一索引吗？](https://stackoverflow.com/questions/2127698/can-we-create-multicolumn-unique-indexes-on-ms-access-databases). 这将不允许“设置”表中的重复项。

例如，如果您的设置和实验是针对计算机设备的，并且您有一个包含以下列的设置表：

设置ID、RAM_GB、CPU_GHz

然后您的主键将是 (SettingID) 并且您的多列唯一索引将打开 (RAM_GB, CPU_GHz)，因为您只想要一个具有相同 RAM 容量和 CPU 速度的记录。

在数据库语言中，您的主键 SettingID 将被称为[代理键](http://en.wikipedia.org/wiki/Surrogate_key)。而新的多列唯一索引将是所谓的[自然键](http://en.wikipedia.org/wiki/Natural_key)。两者都可用于标识唯一行，但主键（代理键）用于任何[外键](http://en.wikipedia.org/wiki/Foreign_key)关系，例如 Experiments 表中的 SettingID。

这本身将防止重复问题，因为它将在数据库级别强制执行。但是，它不会自动使您的表单跳转到具有匹配自然键的记录。相反，Access 会向用户发出一条消息，提示您输入了违反索引的记录。但仅此而已。用户将不得不取消新记录并自己去寻找匹配的记录。

# 更新事件前

Before Insert 事件在新记录输入的第一个字符时触发。有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/office/ff835397.aspx](http://msdn.microsoft.com/en-us/library/office/ff835397.aspx)。这还为时过早，您需要更新前事件。并将代码添加到事件中，如下所示：

```
Private Sub Form_BeforeUpdate(Cancel As Integer)
    Set rst = Me.RecordsetClone
    rst.FindFirst "[SettingID] <> " & Me.SettingID & " AND [RAM_GB] = " & Me.RAM_GB & " AND [CPU_GHz] = " & Me.CPU_GHz
    If Not rst.NoMatch Then
        Cancel = True
        If MsgBox("Setting already exist; goto existing record?", vbYesNo) = vbYes Then
            Me.Undo
            DoCmd.SearchForRecord , , acFirst, "[SettingID] = " & rst("SettingID")
        End If
    End If
    rst.Close
End Sub 
```

这段代码假设了一些事情：

1.  `[RAM_GB]`并且`[CPU_GHz]`是您的多列唯一索引的列。
2.  `[SettingID]`是主键中的列。

根据您的需要调整列名等，然后您还可以提示并自动导航到现有记录。

# php - 将图像 URL 重写到其他域不起作用（给出 404）

> ID：14608055
> 
> 赞同：-1
> 
> 时间：2013-01-30T15:49:07.597
> 
> 标签：php, apache, mod-rewrite

以下重写规则有问题。我认为我这样做是正确的，因为我从一本书中复制而不是它应该重定向到另一个域。

我得到以下网址：

`http://www.domaina.com/some-Text-is-here-B40178.jpg`

图片位于网址：

`http://www.domainb.com/imgs/B40178.jpg`

应该如何编写下面的重写规则才能使其工作？

`RewriteRule ^.*-B([0-9]+)\../$ http://www.domainb.com/imgs/B$1 [L]`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:55:33.103

您的规则缺少扩展名，因此不匹配。看起来你最后还有一个额外的 / 。如果它总是 jpg 你可以添加它。或者只是在最后匹配任何东西。

此外，您还需要捕获该扩展名。

匹配“jpg”

```
RewriteRule ^.*-B([0-9]+\.jpg)$ http://www.domainb.com/imgs/B$1 [R,L] 
```

匹配任何东西

```
RewriteRule ^.*-B([0-9]+\..+)$ http://www.domainb.com/imgs/B$1 [R,L] 
```

我的首选方法，匹配某些图像类型：

```
RewriteRule ^.*-B([0-9]+)\.(jpg|gif|png)$ http://www.domainb.com/imgs/B$1.$2 [R,L] 
```

**编辑**错过了您正在重定向到另一个域。您还需要 R 标志。我已经添加了它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T15:52:33.067

您需要将规则标记为重定向，如下所示：

```
RewriteRule ^.*-B([0-9]+)\../$ http://www.domainb.com/imgs/B$1 [R,L] 
```

编辑：您还需要附加文件扩展名。我会偷懒并假设它们都是JPG：

```
RewriteRule ^.*-B([0-9]+).jpg$ http://www.domainb.com/imgs/B$1.jpg [R,L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T15:26:22.963

最后我找到了一个不使用重定向的更好的解决方案：

```
 RewriteCond  %{REQUEST_URI}  !^$
 RewriteCond  %{REQUEST_URI}  !^/
 RewriteRule  .*              -    [R=400,L]
 RewriteRule ^.*-B([0-9]+)\.(jpg|jpeg|png|gif|JPG|GIF|PNG|JPEG)$ http://www.domain.com/imgs/B$1.$2 [P,L]` 
```

因此，在 URL 中，图像看起来不会来自其他域。P 代表代理（[http://httpd.apache.org/docs/2.4/rewrite/proxy.html](http://httpd.apache.org/docs/2.4/rewrite/proxy.html)）

# excel - 在不同的工作表 excel 中添加新的犯罪数字集

> ID：14608064
> 
> 赞同：0
> 
> 时间：2013-01-30T15:49:35.410
> 
> 标签：excel, vba

当您单击新按钮时，需要帮助创建一个 excel 宏

所以在 sheet2 列 c 行 2 中将是 CI300 并且它会在下面添加 CI301 并在 sheet1 列 d 行 3 中返回该数字

在过去的两天里，我一直在尝试寻找类似的例子，发现了一些但只有一个接近但它有错误并且不一样

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:00:43.900

这应该工作...

```
Sub Btn_NextNum_Click()
Dim KeyStart As Range, LastNum, NewNum

    Set KeyStart = Sheets("Sheet2").[C2]   ' bad bad hard coding, but you asked for it
    If KeyStart(2, 1) = "" Then
        LastNum = KeyStart
    Else
        LastNum = KeyStart(KeyStart.End(xlDown).Row - 1, 1)
    End If

    NewNum = "CI" & Val(Mid(LastNum, 3)) + 1

    If KeyStart(2, 1) = "" Then
        KeyStart(2, 1) = NewNum
    Else
        KeyStart(KeyStart.End(xlDown).Row, 1) = NewNum
    End If

    Sheets("Sheet1").[D3] = NewNum         ' bad bad hard coding, but you asked for it

End Sub 
```

注意我讨厌单元格地址的硬编码......恕我直言，最好使用范围名称作为键列和输出单元格的开头或将输出定向到，`Selection`以便按钮将 NextNum 放置在光标所在的位置。

# cassandra - 如何使用 CQL 在行中插入新列

> ID：14608068
> 
> 赞同：1
> 
> 时间：2013-01-30T15:49:52.413
> 
> 标签：cassandra, fluentcassandra

我想知道如何使用 CQL 将新列插入一行...

可能吗？如果没有，我如何使用 Fluent Cassandra 轻松做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T18:05:12.110

CQL 希望您预先定义您的模式。如果您需要动态模式，则必须使用基于 Thrift 的客户端之一。Fluent Cassandra 支持这一点；[在这里检查](http://coderjournal.com/2010/06/your-first-fluent-cassandra-application/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T17:35:37.937

使用 FluentCassandra：

```
dbcontext.ExecuteNonQuery("update TargetColumnFamily set 'ColumnName'='ColumnValue' 
   where keyname='RowKeyValue'") 
```

在我的测试中，我发现如果它不存在，它将创建该行。不知道如何针对非文本进行调整。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T10:56:37.810

使用 FluentCassandra，您可以很容易地向现有行添加新列：

```
var cFamily = db.GetColumnFamily("TestCF");
cFamily.InsertColumn(rowKey, columnName, columnValue); 
```

或者，您可以这样做：

```
var cFamily = db.GetColumnFamily("TestCF");
var record = cFamily.CreateRecord(existingRowKey) //record already exists
record[newColumnName] = newColumnValue; 
```

# matlab - 多个单元格引用

> ID：14608071
> 
> 赞同：0
> 
> 时间：2013-01-30T15:49:58.640
> 
> 标签：matlab, cell-array

我有一个单元格数组，比如说 C。每个单元格都包含一个矩阵。

例如，假设 C 是

```
C{1}=[1 2;3 4;5 6]
C{2}=[7 8;9 10;11 12] 
```

如何创建一个新的单元格数组 D，其`i-th`元素是由`i-th`C 中所有矩阵的转置行组成的矩阵？

那么 D 必须是

```
D{1}=[1 7;2 8]
D{2}=[3 9;4 10]
D{3}=[5 11;6 12] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:53:47.303

一个稍微不那么笨拙的解决方案：

```
C{1}=[1 2;3 4;5 6]
C{2}=[7 8;9 10;11 12]

tmp = cat(3,C{:});
tmp = permute(tmp, [3 2 1]) %# now every slice is of the right form
szTmp = size(tmp);
D = mat2cell(tmp,szTmp(1),szTmp(2),ones(szTmp(3),1))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:23:07.580

鉴于它`C`始终是您指定的大小，您可以尝试以下相当笨拙的解决方案：

```
C{1}=[1 2;3 4;5 6]
C{2}=[7 8;9 10;11 12]

tmp = reshape( [C{:}]', 2,2,3);

D = arrayfun(@(x) squeeze(tmp(:,:,x)), 1:3, 'UniformOutput',  false); 
```

这导致

```
>> D{:}

ans =

     1     7
     2     8

ans =

     3     9
     4    10

ans =

     5    11
     6    12 
```

对于任意大小的矩阵，您可以使用

```
n = length(C);
[q,p] = size(C{1});

tmp = reshape( [C{:}]', p, n, q);

D = arrayfun(@(x) squeeze(tmp(:,:,x)), 1:n, 'UniformOutput',  false); 
```

# c - 如何记录使用 VS 2010 执行的部分代码的行号

> ID：14608072
> 
> 赞同：2
> 
> 时间：2013-01-30T15:50:00.447
> 
> 标签：c, visual-studio-2010, logging, numbers, line

我有巨大的代码有一个错误，我对代码一无所知。我唯一知道的是，当给定特定输入字段 +ve 值时，它会生成正确的输出，而给定 -ve 值则会生成无效输出。从对输出的分析得出的结论是，问题可能是由于变量（垃圾值）的不正确初始化造成的。我相信解决问题的最快方法是分析两次执行（成功和失败）的不常见代码中存在的变量。**我现在需要的是一种按正确顺序记录已执行代码的文件名和行号的方法**。我将能够比较两个日志文件并确定可能存在错误的代码部分。**代码在 C**和VS2010**中**是可用的工具。

谢谢和问候 - 穆斯塔法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T16:00:45.907

虽然行和文件都很好：

`__LINE__`- 行号

`__FILE__`- 当前文件

当前执行的函数也**很有帮助**：

`__FUNCTION__`- 当前函数的名称

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T15:55:36.183

有一些[预定义的宏](http://msdn.microsoft.com/en-us/library/b0084kay%28v=vs.71%29.aspx)可以帮助您，例如`__FILE__`或`__LINE__`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T19:00:41.463

使用 Visual Studio 的跟踪点功能。[http://msdn.microsoft.com/en-us/library/232dxah7(v=VS.90).aspx](http://msdn.microsoft.com/en-us/library/232dxah7(v=VS.90).aspx)

# batch-file - 批处理找不到特定文件，但打印的文件路径是否正确？

> ID：14608073
> 
> 赞同：1
> 
> 时间：2013-01-30T15:50:04.130
> 
> 标签：batch-file, cmd

我编写了一个非常基本的批处理脚本（最初可以使用），只需将文件从子目录复制到根目录（根目录是运行命令的位置），如果需要，备份原始文件。下面是我的替换脚本。从中复制的文件`%CD%\folder\`具有相同的文件名`%FILE%`

```
set /p backup=Do you want to backup your current file? (Yes or No): 
set file=filename.cmd

if %BACKUP% == Yes (
    if exist "%FILE%-backup" (
        del "%FILE%-backup"
    )
    rename "%FILE%" "%FILE%-backup"
) else (
    del "%FILE%"
)

xcopy "%CD%\folder\%FILE%" "%CD%" 
```

这个想法是`filename.cmd-backup`如果用户选择备份文件，文件将被重命名。

但是，在 if 语句的末尾，当我通过 CMD 运行它时出现错误（我已将其对齐以便​​更易于阅读，这是我的确切 CMD 输出）：

```
if Yes == Yes ( 
    if exist "filename.cmd-backup" ( 
        del "filename.cmd-backup"
    )
    rename "filename.cmd" "filename.cmd-backup"
) else (
    del "C:\path\to\file\filename.cmd"
)
The system can not find the file specified. 
```

我错过了什么愚蠢的东西吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:08:37.383

语法上一切都很好。我想重命名的文件被隐藏了，我没有意识到。

所以有两个选项，要么使文件取消隐藏，要么更改为以下内容：

```
set /p backup=Do you want to backup your current file? (Yes or No): 
set file=filename.cmd

if %BACKUP% == Yes (
    if exist "%FILE%-backup" (
        del "%FILE%-backup"
    )
    attrib -H "%FILE%"
    rename "%FILE%" "%FILE%-backup"
) else (
    attrib -H "%FILE%"
    del "%FILE%"
)

xcopy "%CD%\folder\%FILE%" "%CD%" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:08:33.863

我认为问题是当脚本下降到`xcopy`时，文件名`%file%`不再存在。

如果您进行备份，则将其重命名为`filename.cmd-backup`，否则将其删除。

无论哪种方式，该文件`filename.cmd`不再存在。

# javascript - 如何转到 Chrome 开发者工具中的特定文件？

> ID：14608075
> 
> 赞同：126
> 
> 时间：2013-01-30T15:50:08.950
> 
> 标签：javascript, debugging, google-chrome, google-chrome-devtools, frontend

我正在使用繁重的前端方法开发一个 Web 应用程序。通过使用 Dojo 和 AMD 方式，我目前拥有可以轻松加载一百多个不同 javascript 文件的测试屏幕。

当我想针对任何特定问题进行调试或验证是否看到特定文件的旧版本时，我发现很难在 Chrome 开发者工具的 Sources 选项卡中找到我的文件。

是否有任何快捷方式或操作可以让我输入文件名并将我带到该文件的来源？

* * *

## 回答 #1

> 赞同：171
> 
> 时间：2013-01-30T15:52:49.490

在源选项卡中使用`CTRL`+ `O`(`⌘</kbd>+`O` for Mac) to search scripts, stylesheets and snippets by filename.`

（查看文件时使用`CTRL`++过滤/导航到 JavaScript 函数/CSS 规则`SHIFT`）`O`

[ [Chrome Devtools 备忘单](http://anti-code.com/devtools-cheatsheet/)]

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2017-02-03T12:53:12.493

`CTRL`+`P`在 Windows 中显示搜索输入。

[![在此处输入图像描述](../Images/b1c88738eaf8e1b6bd731233f22068e0.png)](https://i.stack.imgur.com/8NICn.png)

`⌘</kbd> + `P` — in Mac.`

[![在此处输入图像描述](../Images/0e8aa7d95b02cc2917bac4b5e2476f14.png)](https://i.stack.imgur.com/73FA2.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-02-28T15:19:12.203

在 Windows 中：

使用`CTRL`++`SHIFT`搜索`F` 文件中的内容。

使用`CTRL`++`SHIFT`搜索`O` 文件名。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-20T07:33:53.540

Mac：Command + O Windows：Ctrl + O

# visual-studio-2010 - 从代码外部选择一个带有 webdriver 和 Visual Studio 的浏览器，以便使用相同代码启动所有浏览器的夜间构建

> ID：14608078
> 
> 赞同：1
> 
> 时间：2013-01-30T15:50:27.007
> 
> 标签：visual-studio-2010, browser, build, tfs, webdriver

我正在尝试使用 WebDriver 和 TFS 实现测试套件。

该测试套件包含 100 个测试，需要每晚在不同的浏览器（Chrome、FF 和 IE9）中启动。这意味着相同的 100 个测试将首先在 IE 中运行，然后在 FF 中，然后在 Chrome 中。

这些测试将通过 TFS 构建启动，由时间触发。

通常，我会在 中定义浏览器驱动程序`[TestInitialize]`，但如果我在那里定义其中一个浏览器，我只能使用该浏览器启动 100 个测试。

我正在考虑使用同一项目的三个不同版本。这三个构建将与相同的代码相关联。所以我必须在代码之外定义一个变量，然后将该信息传递给代码，并在代码中进行切换并选择浏览器。

我一直在尝试在 testSettings.local 中定义该变量，但没有成功。我一直在尝试使用 testSettings.Local 的 SetupScript 引入该变量，但也没有成功。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T04:56:11.350

我认为对于您的问题，您可以使用`Selenium Grid and TestNG`. 它用于在具有相同浏览器的同一台机器、具有不同浏览器的同一台机器上分发和并行测试，反之亦然。您不需要重复构建三次，您可以在 TestNG XML 文件中配置浏览器详细信息作为使用`Data Provider`概念。

有关[如何使用网格的更多信息](http://blog.varunin.com/2011/10/selenium-grid-with-webdriver.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T19:16:36.220

我不能说用 C# 做事，但是 Java 足够相似，从下面的例子中你应该能够了解如何去做你需要做的事情。

我有一个如下所示的浏览器类：

```
public class Browser 
{
 public WebDriver getDriver(String driverName)
{
    WebDriver driver = null;
    if(driverName == "firefox")
    {
        driver = new FirefoxDriver();
    }
    else if(driverName == "chrome")
    {
        File chromeFile = new File ("C:/webdrivers/chromedriver.exe");
        System.setProperty("webdriver.chrome.driver", chromeFile.getAbsolutePath());
        driver = new ChromeDriver();
    }
    else if(driverName == "ie")
    {
        File ieFile = new File("C:/webdrivers/IEDriverServer.exe");
        System.setProperty("webdriver.ie.driver", ieFile.getAbsolutePath());
        driver = new InternetExplorerDriver();
    }
    else if(driverName == "iOS")
    {
        try 
        {
            driver = new RemoteWebDriver(new   URL("http://localhost:3001/wd/hub"), DesiredCapabilities.ipad());
        } catch (MalformedURLException e) 
        {

            e.printStackTrace();
        }
    }

    return driver;

}
} 
```

然后我有一个调用浏览器类的方法。然后我的测试方法确定我将使用哪个浏览器，所以它看起来像这样：

```
public class EditMedications_Cancel 
{
Browser browser = new Browser();
Random rand = new Random();
HighlightElement highlight = new HighlightElement();
WebDriver driver;

private void cancelButton(String driverName)
{
    int min = 1; //minimum random row
    int max = 5; //maximum random row
    driver = browser.getDriver(driverName); //get the Browser
    int rowNum = (rand.nextInt(max - min + 1) + min); //Random row
    JavascriptExecutor js = (JavascriptExecutor)driver;

    //Open Browser, navigate to Patient Facing
    driver.manage().window().maximize();
    driver.get("http://someIP.com");
    driver.manage().timeouts().implicitlyWait(5, TimeUnit.SECONDS);

    //Get a random row from the table and click it
    WebElement randomRow = driver.findElement(By.xpath("/html/body/div/section/div[3]/div/table/tbody/tr["+rowNum+"]/td"));
    randomRow.click();

    //Get Settings button and Click it
    int rowNum2 = (rowNum + 1);
    WebElement medicationName1 = driver.findElement(By.xpath("/html/body/div/section/div[3]/div/table/tbody/tr["+rowNum2+"]/td/div/article/section/ul/li/h1"));
    WebElement dosage1 = driver.findElement(By.xpath("/html/body/div/section/div[3]/div/table/tbody/tr["+rowNum2+"]/td/div/article/section/ul/li[2]/h3"));
    WebElement howMuch1= driver.findElement(By.xpath("/html/body/div/section/div[3]/div/table/tbody/tr["+rowNum2+"]/td/div/article/section/ul/li[3]/h3")); 
    WebElement reason1 = driver.findElement(By.xpath("/html/body/div/section/div[3]/div/table/tbody/tr["+rowNum2+"]/td/div/article/section/ul/li[4]/p"));
    WebElement settingsBtn = driver.findElement(By.xpath("/html/body/div/section/div[3]/div/table/tbody/tr["+rowNum2+"]/td/div/article/aside/div/button"));
    String medicationNameBefore = medicationName1.getText();
    String dosageBefore = dosage1.getText();
    String howMuchBefore = howMuch1.getText();
    String reasonBefore = reason1.getText();

    settingsBtn.click();

    //Click Edit Button
    WebElement editBtn = driver.findElement(By.xpath("/html/body/div/section/div[3]/div/table/tbody/tr["+rowNum2+"]/td/div/article/aside/div/ul/li/a"));
    editBtn.click();

    //Make Changes and click Cancel
    WebElement medicationName2 = driver.findElement(By.xpath("/html/body/div/section/div[3]/div/table/tbody/tr["+rowNum2+"]/td/div/article/section/form/fieldset/h1"));
    Select dosage2 = new Select (driver.findElement(By.xpath("/html/body/div/section/div[3]/div/table/tbody/tr["+rowNum2+"]/td/div/article/section/form/fieldset/label/select")));
    WebElement howMuch2 = driver.findElement(By.xpath("/html/body/div/section/div[3]/div/table/tbody/tr["+rowNum2+"]/td/div/article/section/form/fieldset/label[2]/input"));
    WebElement reason2 = driver.findElement(By.xpath("/html/body/div/section/div[3]/div/table/tbody/tr["+rowNum2+"]/td/div/article/section/form/fieldset/label[4]/input"));
    medicationName2.sendKeys("TEST TEST TEST");
    dosage2.selectByIndex(2);
    howMuch2.sendKeys("TEST TEST TEST");
    reason2.sendKeys("TEST TEST TEST");
    WebElement  cancelBtn = driver.findElement(By.xpath("/html/body/div/section/div[3]/div/table/tbody/tr["+rowNum2+"]/td/div/article/section/form/fieldset/div/button[2]"));
    cancelBtn.click();

    WebElement medicationName3 = driver.findElement(By.xpath("/html/body/div/section/div[3]/div/table/tbody/tr["+rowNum2+"]/td/div/article/section/ul/li/h1"));
    WebElement dosage3 = driver.findElement(By.xpath("/html/body/div/section/div[3]/div/table/tbody/tr["+rowNum2+"]/td/div/article/section/ul/li[2]/h3"));
    WebElement howMuch3= driver.findElement(By.xpath("/html/body/div/section/div[3]/div/table/tbody/tr["+rowNum2+"]/td/div/article/section/ul/li[3]/h3")); 
    WebElement reason3 = driver.findElement(By.xpath("/html/body/div/section/div[3]/div/table/tbody/tr["+rowNum2+"]/td/div/article/section/ul/li[4]/p"));
    String medicationNameAfter = medicationName3.getText();
    String dosageAfter = dosage3.getText();
    String howMuchAfter = howMuch3.getText();
    String reasonAfter = reason3.getText();
    Assert.assertEquals(medicationNameBefore, medicationNameAfter);
    Assert.assertEquals(dosageBefore, dosageAfter);
    Assert.assertEquals(howMuchBefore, howMuchAfter);
    Assert.assertEquals(reasonBefore, reasonAfter);
}

@Test(groups = {"functionalTests.FF"})
public void test_cancelButton_FF()
{
    cancelButton("firefox");
}
@Test(groups = {"functionalTests.iOS"})
public void test_cancelButton_iOS()
{
    cancelButton("iOS");
}
@AfterMethod(alwaysRun = true)
public void tearDown()
{
    driver.quit();
}
} 
```

我的启动测试的 XML 文件如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<suite name="Suite" parallel="false">
<test name="Test">
  <groups>
  <run>
  <include name="functionalTests.FF"/>
  <exclude name="functionalTests.iOS"/>
  </run>
</groups>
  <classes>
  <class name="ui_Tests.AddPrescription" />
  <class name="ui_Tests.ClickAddMedication"/>
  <class name="ui_Tests.EditMedications_ValidateItems"/>
  <class name="ui_Tests.EditMedications_MedicationNameReadOnly"/>
  <class name="ui_Tests.EditMedications_EditStrengthForm"/>
  <class name="ui_Tests.EditMedications_HowMuch"/>
  <class name="ui_Tests.EditMedications_HowOften"/>
  <class name="ui_Tests.EditMedications_Reason"/>
  <class name="ui_Tests.EditMedications_Cancel"/>
  <class name="ui_Tests.ExpandCollapseView"/>
  </classes>
  </test> <!-- Test -->
  </suite> <!-- Suite --> 
```

因此，通过包含/排除，我可以告诉它在哪些浏览器上运行测试。

# neo4j - GC 限制超出，数据很少

> ID：14608080
> 
> 赞同：0
> 
> 时间：2013-01-30T15:50:30.960
> 
> 标签：neo4j

我有一个包含 20000 个节点的图。以下代码引发异常。

```
 double Di=0;
    Iterator<Relationship> rel;
    int cnt=0;
    for (int i = 0; i < geni.size(); i++) 
        { 
          Di=0;
          cnt=0;
          rel = geni.get(i).getRelationships(RelTypes.SIM).iterator();    
          while (rel.hasNext())
              {Di+=(Double)rel.next().getProperty("SIM");   
              cnt++;
              }
          System.out.println(i+" "+cnt);
                      } 
```

此代码打印：

```
0 11749
1 11974
2 11949
.
.
74 10126
75 10102
Exception in thread "main" java.lang.OutOfMemoryError: GC overhead limit exceeded 
```

如果我使用：

```
Runtime r = Runtime.getRuntime(); 
long freeMem = r.freeMemory();
System.out.println("free memory: " + freeMem); 
```

我可以看到很多可用内存。

我有Di的一种，cnt的一种，rel的一种。我不明白为什么我有这个例外。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:27:57.977

尝试每几千次操作提交您的事务，即：

交易 tx = db.beginTx(); 尝试 { for ( int i = 0; 我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T17:13:39.137

我减少了我的图表（5k 个节点，2,5m 个边）。每个节点都有相同数量的边。使用此代码：

```
 Iterator<Relationship> rel;
    int i=0;
    for ( Node n : Neo4Jstore.geneIndex.query( "gene", "**" ) )
        { System.out.println(++i);
          rel = n.getRelationships(RelTypes.SIM).iterator();             
          while (rel.hasNext())
              rel.next();   
        } 
```

执行在 37 秒内结束，很高但还可以

如果我用这个更改代码：

```
 Iterator<Relationship> rel;
    int i=0;
    for ( Node n : Neo4Jstore.geneIndex.query( "gene", "**" ) )
        { System.out.println(++i);
          rel = n.getRelationships(RelTypes.SIM).iterator();             
          while (rel.hasNext())
              rel.next().getProperty("SIM");    
        } 
```

执行在4分钟内结束！我可以在控制台中看到迭代“i”比“i-1”花费更多的时间。为什么？这是正常的？

# postgresql - 设置 pg_trgm 的默认限制

> ID：14608081
> 
> 赞同：9
> 
> 时间：2013-01-30T15:50:33.270
> 
> 标签：postgresql, full-text-search

这似乎是一个非常基本的问题，但是如何更改 pg_trgm 扩展的默认限制？目前是 0.3。我已经做好了：

```
select set_limit(0.5)
select show_limit() => 0.5 
```

关闭连接，重新连接：

```
select show_limit() => 0.3 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2019-04-08T15:41:32.973

由于 Postgres 9.6`pg_trgm`使用了大统一配置 (GUC) 系统，因此可以在集群级别添加默认值，或`pg_trgm.similarity_threshold = 0.5`在`postgresql.conf`数据库级别 ( `alter database myDB set pg_trgm.similarity_threshold = 0.5`) 或 GUC 允许的所有其他级别（每个用户，每个功能ETC）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T16:04:11.637

这可能不是一个解决方案，而是对潜在解决方案的贡献......

（我假设您希望所有到数据库的连接都使用 pg_trgm 参数，而不仅仅是交互式连接？）

似乎默认的 0.3 限制在函数中被硬编码：

trgm_op.c：

```
 PG_MODULE_MAGIC;

float4          trgm_limit = 0.3f; 
```

我不确定它是否可以通过任何配置文件进行控制，因此一种选择可能是更改源文件中的默认值，然后重新构建扩展。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-18T01:15:33.573

在查找如何在 Ruby on Rails 环境中执行此操作时偶然发现了这一点。最后猴子修补了我的适配器：

```
require 'active_record/connection_adapters/postgresql_adapter'

class ActiveRecord::ConnectionAdapters::PostgreSQLAdapter
private
  alias_method :default_configure_connection, :configure_connection

  # Monkey patch configure_connection because set_limit() must be called on a per-connection basis.
  def configure_connection
    default_configure_connection
    begin
        execute("SELECT set_limit(0.1);")
    rescue ActiveRecord::StatementInvalid
        Rails.logger.warn("pg_trgm extension not enabled yet")
    end
  end
end 
```

在看到其他人有这个问题后走这条路，例如[https://github.com/textacular/textacular/issues/39](https://github.com/textacular/textacular/issues/39)

# c# - 带有 TPH 鉴别器列的表上的简单成员资格

> ID：14608084
> 
> 赞同：1
> 
> 时间：2013-01-30T15:50:46.513
> 
> 标签：c#, asp.net-mvc, inheritance, asp.net-mvc-4, simplemembership

我有一个带有 Person 对象的类库，它还继承了其他两种类型。我最初使用它来扩展一个人的 aspnetdb 属性，但后来遇到了 SimpleMembership 安全性，并且一直试图让它工作。

```
{
    public abstract class Person
    {
        [Key]
        public int Id { get; set; }
        /// <summary>
        /// eg. AB123
        /// </summary>
        public string Uid { get; set; }
        public bool? IsRepresrentative { get; set; }
        [Display(Name = "First Name")]
        public string FirstName { get; set; }
        [Display(Name = "Preferred First Name")]
        public string FirstNamePreferred { get; set; }
        [Display(Name = "Last Name")]
        public string LastName { get; set; }
        [Display(Name = "Full Name")]
        public string FullName { get; set; }
        public string Email { get; set; }
        public string EmailAdditional { get; set; }
        public string Telephone { get; set; }
        [Display(Name = "Job Title")]
        public string JobTitle { get; set; }
        public string PersonalPage { get; set; }
        public string ServiceArea { get; set; }

        //Profile items
        public int? PrefNewsItemsToShow { get; set; }

        public override string ToString()
        {
            return FullName ??
                   string.Format("{0} {1}", string.IsNullOrEmpty(FirstNamePreferred) ? FirstName : FirstNamePreferred, LastName);
        }
    }

    public class ProviderUser : Person
    {
        public ICollection<Provider> Providers { get; set; }
    }

    public class SchoolUser : Person
    {
        public ICollection<School> Schools { get; set; }
    }

} 
```

我在 InitializeSimpleMembershipAttribute.cs 中有以下设置

```
WebSecurity.InitializeDatabaseConnection("MyCommonContext", "People", "Id", "Uid", autoCreateTables: true); 
```

*如果*我没有将它放在带有鉴别器的桌子上，这似乎可行。但我认为上面的想法是这样的，这样您就可以使用还包含其他数据的表。

有两种看待我的问题的方式。1\. 当它尝试从 AccountController 创建用户时，我得到以下设置：

```
Cannot insert the value NULL into column 'Discriminator', table 'dbo.People'; column does not allow nulls. INSERT fails. 
```

我该如何解决？

1.  *或者*另一种看待它的方式，我怎样才能以不同/更好的方式做我想做的事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-13T18:45:39.290

这是很久以前的事了，但我刚刚遇到了这个问题，我有一个解决方案，即使我讨厌它。为什么它不起作用是迟钝的。

您仍然可以使用 WebSecurity.CreateUserAndAccount(model.UserName, model.Password) 但您自己添加鉴别器。

WebSecurity.CreateUserAndAccount(model.UserName, model.Password, new { Discrimator = "Person" });

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-31T16:31:10.710

j_walker_dev 所说的效果很好，但是，我不确定它有多正确。

除此之外，如果您使用它；然后，您可以使用“is”关键字检索这些类型。

例如

```
var people = (from p in context.UserProfiles where p is Person select p).ToList(); 
```

EF 根据鉴别器名称知道哪些用户属于 Person 类型。

可爱的东西。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-21T13:10:35.260

我遇到了同样的问题，我这样解决：

> 请使用 WebSecurity.CreateAccount 代替 WebSecurity.CreateUserAndAccount(model.UserName, model.Password);

像这样：

**就我而言，人不是抽象的。**

```
Person p = new Person();
p.UserName = model.UserName;
((PeronRepository)repository).Add(p);
((PerssonRepository)repository).Save(p);
WebSecurity.CreateAccount(model.UserName, model.Password); 
```

谢谢 Fawzy 马拉什

# debugging - netbeans同时调试两个项目

> ID：14608087
> 
> 赞同：4
> 
> 时间：2013-01-30T15:50:56.507
> 
> 标签：debugging, netbeans-7

我正在尝试在 Netbeans 中同时调试两个项目，但遇到了一些问题。一个项目调用另一个。首先，我从调试模式开始。在第二个中，我放置了一些断点。该过程在断点处停止，但是当单击按钮进入下一步时，这将进入下一个断点（如果有）或在最后执行代码..

问题是：在这种情况下，netbeans 下一步该怎么做？

我在 Windows 7 上使用 netbeans 7.2 并使用 jdk1.6.0_24 调试 Java 代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-01-14T02:53:20.913

您可以同时开始调试尽可能多的项目。然后查看 Window/Debugging/Sessions，它将打开一个包含所有正在运行的会话的视图，您还可以更改该视图中的当前会话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-25T06:08:42.947

Netbeans 8 应该支持这个开箱即用并为每个应用程序生成一个新的 jpda.address 端口。

如果没有，您有几个选项可以执行此操作：

1\. 运行多个 NetBeans 实例（确保两者的 'userdir' 不同）。

2\. 为其中一个应用程序指定一个不同`jpda.address=<port>`的。您可以在`Project Properties`> `Actions`> `Debug`>中添加它`Set Properties`。

# xcode - 自定义表格查看某个位置的单元格

> ID：14608089
> 
> 赞同：1
> 
> 时间：2013-01-30T15:50:59.403
> 
> 标签：xcode, ios5, uitableview

我正在构建一个自定义分组表视图，当部分为 0 时，需要在 indexPath.row=0 处显示一个自定义表视图单元。我能够显示它，但是一旦我进入 tableView 的底部，所有单元格都会发生变化

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{

    NSArray *listData =[self.tableContents objectForKey:[self.sortedKeys objectAtIndex:[indexPath section]]];

    static NSString *simpleTableIdentifier = @"Cell";
    if (indexPath.row==0 && indexPath.section==0)
    {
        RightLabelCell *cell = (RightLabelCell *)[tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];
        if (cell == nil)
        {
             NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"RightLabelSetting" owner:self options:nil];
             cell = [nib objectAtIndex:0];
        }

        cell.leftLabel.text = [listData objectAtIndex:indexPath.row];
        cell.rightLabel.text=@"RightLabel";

        return cell;
    }
    else
    {
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];

        if (cell == nil)
        {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:simpleTableIdentifier];

        }
        [cell setAccessoryType:UITableViewCellAccessoryDisclosureIndicator];
        cell.textLabel.text = [listData objectAtIndex:indexPath.row];

        return cell;
    }
} 
```

并且还崩溃`cell.leftLabel.text = [listData objectAtIndex:indexPath.row];`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-27T06:37:51.350

转到`Interface builder`并选择自定义单元格和其他单元格，并为它们提供不同的标识符单元格名称

```
 static NSString *simpleTableCellIdentifier = @"Cell"; 
```

和

```
static NSString *customTableCellIdentifier = @"CustomCell"; 
```

并适当地（有条件地）选择这些

# javascript - 将 div 保持在页面底部，直到滚动到某个位置

> ID：14608097
> 
> 赞同：1
> 
> 时间：2013-01-30T15:51:25.133
> 
> 标签：javascript, jquery, html, css

我有以下设置：

*   一个大的 html 页面（所以有滚动条）
*   在它的底部附近有一个 div ......让我们称之为 positionDiv：`<div id="positionDiv">Lalala</div>`
*   另一个名为的 div 可以说... floatingDiv：`<div id="floatingDiv">Lalala</div>`

我需要做的是保持`floatingDiv`在页面底部（很容易使用位置：固定）直到它（滚动后）位于顶部`positionDiv`（这里固定位置失败，因为 div 将永远停留在底部） .

知道怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-06-27T14:10:52.310

接受的答案是一个很好的基础，但是在滚动过去的 div 之后，然后再返回，它不会被切换回固定的 div，因为`positionOffset`和`floatingOffset`是相等的，并且不会改变。

我已经[更新了 JSFiddle](http://jsfiddle.net/mFfM6/24/)来解决这个问题。我还删除了其中一个 div，因此您无需复制内容。

```
$(function fixedUntilPoint() {

    var container = $('#container');
    var offsetContainer = container.offset().top;

    function adjustDivPosition() {

        var offsetFloat = $(document).scrollTop() + $(window).height() - container.outerHeight();

        if(offsetContainer <= offsetFloat){

            container.css({
                bottom:   'auto',
                position: 'absolute',
                top:      offsetContainer
            });

        } else {

            container.css({
                bottom:   0,
                position: 'fixed',
                top:      'auto'
            });

        }

    }

    $(window).on('scroll resize', adjustDivPosition)
        adjustDivPosition();

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T15:59:21.337

jQuery 公开了一个可以在这里提供帮助的[偏移方法。](http://api.jquery.com/offset/)

编辑：改进的代码，[工作示例](http://jsfiddle.net/barney/mFfM6/4/)。

```
$(function fixedUntilPoint(){
  var positionDiv = $('#positionDiv');
  var floatingDiv = $('#floatingDiv');

  function testScrollPosition(){ 
    var positionOffset = positionDiv.offset().top;
    var floatingOffset = floatingDiv.offset().top;

    if(positionOffset <= floatingOffset){
      floatingDiv.css({
        bottom:   'auto',
        position: 'absolute',
        top:      positionDiv.offset().top
      })
    }
    else {
      floatingDiv.css({
        bottom:   0,
        position: 'fixed',
        top:      'auto'
      })
    }
  }

  $(window).on('scroll resize', testScrollPosition)

  testScrollPosition();
}) 
```

# mysql - DATE_FORMAT() sql 返回 0 行

> ID：14608098
> 
> 赞同：0
> 
> 时间：2013-01-30T15:51:26.387
> 
> 标签：mysql, date, select

我有一个包含以下字段的表：

```
themeID = int(11)  
partnerID = int(11)  
name = varchar(255)  
BeginDate = date (Y-m-d)  
EndDate = date (Y-m-d)  
active = tinyint(1) 
```

我想选择 BeginDate before`01-30`和 EndDate after的主题`01-30`。我只想搜索月份和日期，而**不是**年份。

我使用以下查询，但我什么也没得到（0 行）：

```
SELECT
  DATE_FORMAT(BeginDate, '%m-%d'),
  DATE_FORMAT(EndDate, '%m-%d')
FROM theme
WHERE DATE_FORMAT(BeginDate, '%m-%d') <= '01-30'
    AND DATE_FORMAT(EndDate, '%m-%d') > '01-30'
ORDER BY BeginDate 
```

我做错什么了？

PS。有记录从现在开始（01-30）到现在结束（01-30）

**编辑** 表数据

```
Default ...... 2000-01-01 ... 2000-01-01  
Oud en Nieuw . 2000-12-26 ... 2000-01-04  
Pasen ........ 2000-03-28 ... 2000-04-04  
Dierendag..... 2000-10-04 ... 2000-10-04  
Sinterklaas .. 2000-11-20 ... 2000-12-05  
Kerstmis ..... 2000-12-23 ... 2000-12-26  
Winter ....... 2000-12-21 ... 2000-03-20 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:54:40.083

像这样的东西？

```
... WHERE (MONTH(BeginDate) <= 1 AND DAY(BeginDate) < 30)
        AND (MONTH(EndDate) >= 1 AND DAY(EndDate) > 30) 
```

## [查看演示](http://sqlfiddle.com/#!2/e5958/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T16:20:49.387

虽然这可能会被优化，但这会将所有日期转换为同一年（2000 年）并进行相应的比较：

```
SELECT * 
FROM (
   SELECT themeID, name,
      DATE_FORMAT(BeginDate, '%m-%d'), 
      DATE_FORMAT(EndDate, '%m-%d'),
      DATE(BeginDate + INTERVAL (2000 - Extract(YEAR from BeginDate)) YEAR) NewBeginDate,
      DATE(EndDate + INTERVAL (2000 - Extract(YEAR from EndDate)) YEAR) NewEndDate
FROM theme
) a
WHERE NewBeginDate <= DATE(Now() + INTERVAL (2000 - Extract(YEAR from Now())) YEAR)
  AND NewEndDate > DATE(Now() + INTERVAL (2000 - Extract(YEAR from Now())) YEAR) 
```

这是[SQL Fiddle](http://sqlfiddle.com/#!2/e5958/58)。

话虽如此，您的查询似乎对我来说还不错。在上面的 Fiddle 中尝试您自己的查询。

祝你好运。

# netty - Netty FrameDecoder 实例状态

> ID：14608099
> 
> 赞同：0
> 
> 时间：2013-01-30T15:51:27.013
> 
> 标签：netty

在我的 Netty 代码中，我正在编写一个 FrameDecoder 来处理 LDAP PDU。我有代码可以让我确定 PDU 是否完整（状态为`PDU_DECODED`）或是否需要更多数据（`VALUE_STATE_PENDING`）。另外，我还可以检测到更多错误情况。

在大多数情况下，我认为一次读取将获得整个 PDU。但是对于那些我需要再次读取以获取更多数据的时候，我想知道最好的编码方式。

现在在我的`decode()`我正在标记阅读器索引，`buf.markReaderInded()`读取可用字节，检查读取的字节以查看它是否是有效的 PDU。如果是，我返回读取的字节。如果不是，那么我重置阅读器索引，`buf.resetReaderIndex()`然后返回 null。下次我回来时，`decode()`我将获得原始数据加上下一次读取的数据。我可以再次运行检查。

但我想存储第一次读取的原始数据，并在下一次读取时获取 PDU 的其余部分（或下一部分）。然后我会将该数据添加到我已经存储在我的帧解码器实例中的数据中，并检查它是否是有效的 PDU。这次我不会对阅读器索引进行重置`buf.resetReaderIndex()`，而只是返回了一个空值。

顺便说一句，我已经在使用`setAttachment()`/`getAttachment()`将信息存储在`ChannelHandlerContext`. 所以我不能用那个。我在建立连接时设置它。

当我再次回到 decode() 时，我不确定自己处于什么状态。它是同一个实例还是我`FrameDecoder`班级的新实例？我可以在可用之前定义和设置变量吗？我不确定 Netty 在这里做了什么。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:09:49.190

听起来你需要 Netty [ReplayingDecoder](http://static.netty.io/3.6/api/org/jboss/netty/handler/codec/replay/ReplayingDecoder.html)。您基本上将解码步骤或检查点定义为**enum**中的成员。您在第一次调用对象时开始读取，一旦您过度读取缓冲区，netty 会自动“等待”更多传入数据并在收到一些数据时重播。一旦你到达一个已知的检查点，你就将解码器转换到下一个状态。当 netty 调用解码器时，它会传递最后一个已知状态，所以你总是知道你在哪里。它非常适合处理复杂的对象，和/或解码中有条件分支的地方。[这里](http://biasedbit.com/netty-tutorial-replaying-decoder/)有一个很好的教程。

# c# - 如何从另一个表单调用下拉列表的值

> ID：14608101
> 
> 赞同：0
> 
> 时间：2013-01-30T15:51:28.497
> 
> 标签：c#, .net, winforms, forms

```
 this.roomChoice.Title = " Select a classroom: ";
        this.roomChoice.Subtitle = "";
        if (frmRoomMaint.cbxRoomsChoice = null)
        {
            SetRoomOptions();
        }
        else
        {
            //cbxRooms is the dropdownlist on frmWizard
            cbxRooms = frmRoomMaint.cbxRoomsChoice;
            cbxRooms.Enabled=false;
        } 
```

这是错误消息：

```
Error An object reference is required for the non-static field, method, or property 
```

我正在创建一个可以从菜单中调用的向导，或者在从下拉列表中选择房间后右键单击某个表单。如果从表单打开向导，我希望向导中的下拉列表已经选择了相同的房间并被禁用。如果从菜单中选择，用户可以自由选择下拉列表中的任何房间。

如果需要任何澄清，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:05:45.050

需要更多信息来回答这个问题。

您的代码示例中的哪一行导致错误？

错误发生在运行时还是设计时？

如果`frmRoomMaint`是您的*其他形式*的名称，那么错误是说您必须在使用它之前创建它的实例。

```
frmRoomMaint form = new frmRoomMaint();

this.roomChoice.Title = " Select a classroom: ";
this.roomChoice.Subtitle = "";
if (form.cbxRoomsChoice = null)
{
   SetRoomOptions();
}
else
{
   //cbxRooms is the dropdownlist on frmWizard
   cbxRooms = form.cbxRoomsChoice;
   cbxRooms.Enabled=false;
} 
```

我猜还有其他错误，但这可能是您的第一个错误 - 没有更多信息！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:57:31.893

我建议您将共享数据存储在一个类中，而不是读取不同形式的`static`值，这样这些值在您的所有应用程序中都是可见的。

```
public static class SharedData
{
    public static string SelectedRoom
    {
        set;
        get;
    }

    // other data

} 
```

# php - 如何使用 ajax 编写 php 注册页面？

> ID：14608110
> 
> 赞同：-1
> 
> 时间：2013-01-30T15:52:00.160
> 
> 标签：php, ajax, smarty

我有这个 ajax 函数：

```
function getpage(page,div){
var url = page+"&sid="+Math.random();
    var xhr; 
    try {  xhr = new ActiveXObject('Msxml2.XMLHTTP');   
    }
    catch (e) 
    {
        try {   xhr = new ActiveXObject('Microsoft.XMLHTTP');    
        }
        catch (e2) 
        {
          try {  xhr = new XMLHttpRequest();     
          }
          catch (e3) {  
          xhr = false;   
          }
        }
     }

    xhr.onreadystatechange  = function()
    { 
         if(xhr.readyState  == 4){
              if(xhr.status  == 200)
                document.getElementById(div).style.display= "block";
                document.getElementById(div).innerHTML = xhr.responseText; 
         }else{
                document.getElementById(div).innerHTML = '<img src="./pic/load.gif" />';
         }
    }; 

   xhr.open( "GET", url,  true); 
   xhr.send(null); 
} 
```

我有 singup 表格（使用 smarty 模板设计）：

```
<div><input style="width:300px" class="inp" type="text" onkeyup="getpage('./ajax.php?action=regnewuser&usern={$uname}','register')" name="User_name"  placeholder="username" required /></div><div class="hr" id="register"></div> 
```

我有这个 ajax.php 代码：

```
if($act == 'regnewuser'){
            $usern   = protect($_GET['usern']);

        $sql = $db->query("SELECT USER_NAME FROM ".$pre."USERS");
            while($row = $db->record()){
            $dbuname = strtolower($row['USER_NAME']);
            $uname2  = strtolower($usern);
            }
        if(empty($usern)){
            echo '<div class="rd">please fill the box !!</div>';
        }elseif(strlen($usern) < 4){
            echo '<div class="rd">too short !!</div>';
        }elseif(strlen($usern) > 50){
            echo '<div class="rd">too tall !!</div>';
        }elseif($dbuname == $uname2){
            echo '<div class="rd">not available !!</div>';
        }
    } 
```

但结果总是“请填写”；
我认为模板形式的问题！
我应该做什么但进入模板以获得正确的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:59:00.043

您的代码`{$uname}`打算做什么？`onkeyup`

对我来说看起来像 PHP 代码。

您需要使用 JavaScript 将用户名附加到 URL。如果要在代码元素上设置`id`属性以生成 URL，则为：`input``id`

```
var url = "/ajax.php?action=regnewuser&usern=" + document.getElementById("username").value(); 
```

我建议在单独的函数中执行此操作并将生成的 URL 传递给您的`getpage`函数。

也就是说，我不确定`onkeyup`将您的代码附加到的正确事件。您真的想在每次在文本框中按下一个键时创建一个用户记录吗？

例如，如果用户键入“测试”，您是否希望创建 4 条记录？('t','te','tes','test')

我建议在用户完成填充文本框并且满意后添加一个按钮供用户单击（将您的代码附加到`onclick`按钮的事件中）。

# php - OOP PHP 和实例化类

> ID：14608111
> 
> 赞同：0
> 
> 时间：2013-01-30T15:52:11.793
> 
> 标签：php

我对 PHP 的 OOP 方法相对较新，但只是想澄清一下：

```
if(isset($_POST['insertProduct']) && !empty($_POST['productName'])){
    $newProduct = new product();
    $newProduct->productName = $_POST['productName'];
    $newProduct->servingSize = $_POST['servingSize'];
    $productID = $newProduct->insertProduct();   
} 
```

因此，当将表单发布到页面以将新产品输入数据库时​​，将执行上述代码。

```
$selectProduct = new product();
if($selectProduct->getProducts()){
    foreach($selectProduct->getProducts() as $product){ 
        echo '<option value="' .
            $product['productID'] . '">' . 
            $product['productName'] . '</option>';
    }
} 
```

上面的部分在同一页面上，显然现在存在产品类的两个实例（假设已发布表单以添加新产品）。这是否显示了 OO 方法的好处？就像使用两个实例来访问不同的方法一样？或者这是做我想做的事情的坏方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T14:47:23.147

我认为`getProducts`至少应该是一个静态方法，因为它与产品的实例无关。产品类应仅表示产品的单个数据，因此应将通用非实例方法设置为静态或移动到另一个类。

我建议您创建一个 Factory 类来`product`为您创建实例：

```
$array = FactoryProducts::getProducts(); 
```

但是您肯定需要将该方法移到`product`类之外。其余的，一切似乎都很好。

# android - 共享偏好被消灭了，你什么时候使用它？

> ID：14608117
> 
> 赞同：1
> 
> 时间：2013-01-30T15:52:26.543
> 
> 标签：android

由于以下原因，我总是尽量避免在我的应用程序中使用共享首选项进行存储：

*   它在设备重启时被清除
*   当缓存数据被清除时它会被清除
*   它在强制退出时被清除（通过任务管理器）

这让我总是求助于内部存储 (I/O)。但是，我看到 SO 中的许多人使用共享偏好或相互推荐共享偏好。我错过了这里的重点吗？特别是，您什么时候使用 Shared PReferences？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:58:39.263

这对于设置/首选项等简单的事情很有意义，并检查是否显示介绍。我将它与同步到服务器结合使用。允许用户在不进入文件系统的情况下清除与您的应用程序关联的数据也很好。

此外，当设备重新启动或强制关闭时，不应擦除 SharedPreferences。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T16:15:45.530

`SharedPreference`像数据库一样工作，但规模很小：[SharedPreference](http://developer.android.com/guide/topics/data/data-storage.html#pref)

# c++ - 从向量中获取（下一个）最大对象

> ID：14608122
> 
> 赞同：0
> 
> 时间：2013-01-30T15:52:48.823
> 
> 标签：c++, performance, sorting, vector, max

好的，这是我的问题：

*   我有一个类（让我们称之为`MyClass`），有几个变量（其中一个是`score`）
*   我也有一个`MyClass`对象向量（例如`vector<MyClass> MyObjects;`）

现在，鉴于我尝试对数组进行排序（使用`sort(MyObjects.begin(),MyObjects.end(),MyClassCompare());`）并注意到性能显着下降（并且最终可能根本不需要向量的某些元素），我正在尝试：

*   选择（当前）最大元素（具有最大值的元素`score`）
*   从向量中删除它
*   选择下一个最大元素
*   等等...

有没有办法在 C++ 中使用内置函数/库来实现这一点？有任何想法吗？

* * *

**提示：**速度和性能*至关重要*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:27:45.787

如果您需要访问集合的最大值元素，您将不得不在 (a) 插入时预先或 (b) 在搜索时产生一些性能损失。您已经注意到（b）很昂贵，可能是由于您选择的方法，并且正在询问如何才能更快地做到这一点。

开箱即用[`priority_queue`](https://stackoverflow.com/questions/2974470/efficiency-of-the-stl-priority-queue)，它可能提供您正在寻找的东西。我想性能会比您当前的代码更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:11:42.617

如果您正在“收集”您稍后将按某种顺序（最大、最小等）选择事物的数据，您将有几个选择：

1.  边走边分类。
2.  收集完所有数据后进行排序。
3.  搜索数据时性能不佳。
4.  创建两组数据，其中一组已排序，并对未排序的数据项具有某种索引。

在您的情况下，您正在谈论从集合中删除一些数据。是否需要您实际删除数据，或者您只需跟踪“不再需要”的内容？如果是后者，也许上面的选项四是一个不错的选择 - 您只需将其从排序表中删除即可。因为这比项目列表本身要小得多[大概“MyClass”大于两个整数]。

# iphone - 类未显示在自定义类下的 InterfaceBuilder 中，无法将我的类附加到 IB 中的 UITableViewController 对象

> ID：14608125
> 
> 赞同：1
> 
> 时间：2013-01-30T15:52:51.990
> 
> 标签：iphone, uitableview, interface-builder

**我做了什么：**

*   创建了一个新的`class`名为`TableVC`( `Superclass` `UITableViewController`)
*   在`IB`我放了`Table View Controller`一个`canvas`。
*   在`IB`我选择`Table View Controller`并去了`Identity Inspector`
*   看不到我的`class` `TableVC`底下`Custom Class`。
*   多次清理项目...

**我已验证的内容：**

*   `TableVC` `superclass`是`UITableViewController`
*   `File Inspector`显示`TableVC.m`被选中的`Target Membership`
*   在`Build Phases`我看到`TableVC.m`下面列出的`Compile Sources`。

现在是你的一部分。知道为什么我`class`的没有显示吗？

# php - 通过 php 从 html 源代码中删除空格

> ID：14608127
> 
> 赞同：-4
> 
> 时间：2013-01-30T15:52:56.823
> 
> 标签：php, replace

```
<ul class="c2">
    <li><a href="hire-project-manager/">Hire Project Manager </a></li>
    <li><a href="hire-ios-developer/"> Hire iPhone Developer </a></li>
    <li><a href="hire-ios-developer/">  Hire iPad Developer </a></li>
    <li><a href="hire-android-developer/">Hire Android Developer </a></li>
    </li>
    <li><a href="hire-3d-artist/">Hire 3D Artist</a></li>
</ul>
</div>
<h1>Get In Touch With Us</h1>
<div class="copyright-footer">Copyright &copy; All rights reserved  </div> 
```

我有以下这些html，我想删除额外的空格并需要类似的结果：

```
<ul class="c2">
    <li><a href="hire-project-manager/">Hire Project Manager</a></li>
    <li><a href="hire-ios-developer/">Hire iPhone Developer</a></li>
    <li><a href="hire-ios-developer/">Hire iPad Developer</a></li>
    <li><a href="hire-android-developer/">Hire Android Developer</a></li>
    </li>
    <li><a href="hire-3d-artist/">Hire 3D Artist</a></li>
</ul>
</div>
<h1>Get In Touch With Us</h1>
<div class="copyright-footer">Copyright &copy; All rights reserved</div> 
```

谁能帮助我在 PHP 和 preg、str_replace 等的帮助下解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:03:29.460

删除`[\n\t\r\ ]`标签开始后文本开头的空格：

```
$html=preg_replace('/>\s+/','>',$html); 
```

删除`[\n\t\r\ ]`标签前文本末尾的空格：

```
$html=preg_replace('/\s+</','<',$html); 
```

# java - 检查文本是否具有正确编码并显示良好的最佳方法

> ID：14608128
> 
> 赞同：0
> 
> 时间：2013-01-30T15:52:57.260
> 
> 标签：java, testing, encoding, webdriver

我正在寻找编写 JUnit 测试的方法，该测试将检查页面或片段的文本是否正确显示（具有正确的编码）。如何确定该字符串显示良好，而不是看起来像“????? ?? ?????” 或“������@������”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:01:44.170

这很棘手，也许从原始字符串中获取 byte[] 数组，将其放入具有测试/所需编码的新字符串中，然后从这个新字符串中获取每个字符并查找它是否是有效/可打印的字符？我从来没有试过这个，所以我不保证它有效......但我认为你可以尝试一下:)

# ios - 浮动结果不准确

> ID：14608133
> 
> 赞同：0
> 
> 时间：2013-01-30T15:53:19.870
> 
> 标签：ios, objective-c, floating-point

> **可能重复：**
> [Objective-C 中的浮点数问题](https://stackoverflow.com/questions/1193554/trouble-with-floats-in-objective-c)

这听起来像是一个基本问题，但我正在尝试 2 天来解决这个问题。我搜索了一个解决方案，我发现的唯一解释是 float 仅使用 4 字节的内存。（这很有帮助......）我有以下循环：

```
double x = 0.0;
        for(int i = 0; i< 100; i++)
        {
            x = x + 0.01;
            NSLog(@"%f",x);
        } 
```

它打印：

```
0.010000
0.020000
0.030000
.
.
1.000000 
```

但是当我将双精度更改为浮动时：

```
0.010000
0.020000
0.030000
.
.
0.820000
0.830000
0.839999
0.849999
.
.
0.999999 
```

如您所见，计算机无法将 0.840000 计算为浮点数 -_- 问题是我必须使用浮点数，因为我使用的 UIProgressView 可以采用 0.0 到 1.0 之间的浮点数。

如果我不能使用双，我该怎么办？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T16:03:01.013

使用`x = (i + 1) * 0.01;`而不是`x = x + 0.01;`. 它仍然不准确，因为`float`根本无法准确表示`0.84`，但至少错误不会累积。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T16:26:04.680

如果您编写以下代码会怎样：

```
int x = 0;
for(int i = 0; i< 100; i++)
{
    x = x + 3.5;
    NSLog(@"%d",x);
} 
```

你不会对它没有打印出来感到惊讶，，，，对`3.5`吧？你会说“int 不准确”吗？当然不是。`7.0``10.5`

在您的示例中发生了完全相同的事情。就像`3.5`不可表示为整数，`0.01`不可表示为双精度。你得到的实际价值是：

```
0.01000000000000000020816681711721685132943093776702880859375 
```

现在，您不仅会累积从舍入到加倍的初始*表示*误差`0.1`，而且还会得到*舍入*误差，因为并非所有中间和都是可表示的。`int`示例中没有出现第二个错误源。计算的实际中间总和是：

```
0.01000000000000000020816681711721685132943093776702880859375
0.0200000000000000004163336342344337026588618755340576171875
0.0299999999999999988897769753748434595763683319091796875
0.040000000000000000832667268468867405317723751068115234375
0.05000000000000000277555756156289135105907917022705078125
0.060000000000000004718447854656915296800434589385986328125
...
0.990000000000000657252030578092671930789947509765625
1.0000000000000006661338147750939242541790008544921875 
```

当您通过格式说明符将这些四舍五入到小数点后六位时`%f`，您将获得第三个四舍五入来源，但错误都足够小，以至于您“预期”的结果会被打印出来。

现在让我们看看当你使用`float`代替时会发生什么`double`；由于 C 算术操作数提升规则，所有加法都在 中进行`double`，但结果`float`在每次加法后四舍五入 - 又一次四舍五入。中间值的顺序如下：

```
0.00999999977648258209228515625
0.0199999995529651641845703125
0.02999999932944774627685546875
0.039999999105930328369140625
0.0500000007450580596923828125
0.060000002384185791015625
...
0.809999525547027587890625
0.819999516010284423828125
0.829999506473541259765625 
```

到目前为止，错误足够小，当四舍五入到六位十进制数字时，它们仍然会产生“预期”值。但是，计算的下一个值是

```
0.839999496936798095703125 
```

因为这只是*小于*四舍五入到六位十进制数字的确切中间情况：

```
0.8399995 
```

它向下取整，打印的数字是：

```
0.8399999 
```

* * *

现在，你能做些什么呢？错误最终变得大到足以在使用六位十进制数字打印时出现的原因是您在每次连续添加时都会*累积错误。*如果你能避免这种累积，误差将保持足够小，不会造成这种麻烦。有几种简单的方法可以避免这种累积错误；也许最简单的是：

```
for (int i=0; i<100; i++) {
    float x = (i+1)/100.f;
    NSLog(@"%d",x);
} 
```

This works because both `i + 1` and `100.f` are exactly represented in `float`. There is thus only a single rounding, which occurs in the division, so the `float` result is as close to your desired number as possible; there is no way you can come any closer.

# java - Apache poi 单元格格式 (°) 度数符号

> ID：14608134
> 
> 赞同：0
> 
> 时间：2013-01-30T15:53:24.013
> 
> 标签：java, excel, apache-poi

我正在使用 apache poi-3.9 创建包含一些测量数据的 Excel (xls) 工作表，这些数据应该以单元格内的单位显示。单位是 mbar、mm/sec 和 (°) 度。对于 mbar 和 mm/sec 来说，一切正常，但度数格式会丢失。Microsoft Excel 抱怨以下错误消息：“文件错误。某些数字格式可能已丢失。” 这是我的代码：

最终 HSSFWorkbook hssfWorkbook = new HSSFWorkbook();

最终 HSSFCellStyle cellStyleMbar = hssfWorkbook.createCellStyle(); 最终 HSSFCellStyle cellStyleDegree = hssfWorkbook.createCellStyle();

cellStyleMbar.setDataFormat(dataFormat.getFormat("0 \"mbar\"")); cellStyleDegree.setDataFormat(dataFormat.getFormat("0.0 \"°C"));

谢谢你的想法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:55:45.973

问题可能是您没有关闭格式模板中的引用文本。

代替

`dataFormat.getFormat("0.0 \"°C")`

和

`dataFormat.getFormat("0.0 \"°C\"")`

# django - Django StreamHandler 日志在 mod_wsgi 设置中不起作用

> ID：14608137
> 
> 赞同：0
> 
> 时间：2013-01-30T15:53:46.557
> 
> 标签：django, logging, mod-wsgi

我正在尝试让所有日志消息转到标准的 apache 错误日志，但我无法让它工作。如果我写入文件很好，但是 apache 日志完全不起作用。有什么建议吗？这是我的相关配置：

**settings.py（片段）**

```
LOGGING = {
    'version': 1,
    'disable_existing_loggers': True,
    'filters': {
        'require_debug_false': {
           '()': 'django.utils.log.RequireDebugFalse'
        }
    },
   'formatters': {
        'standard': {
            'format': '%(asctime)s [%(levelname)s] %(name)s: %(message)s',
        }
    },
    'handlers': {
        'development': {
            'level': 'DEBUG',
            'class': 'logging.StreamHandler',
            'formatter': 'standard',
        },
        'mail_admins': {
            'level': 'ERROR',
            'filters': ['require_debug_false'],
            'class': 'django.utils.log.AdminEmailHandler'
        },
    },
    'loggers': {
        '':{
            'handlers': ['development'],
            'level': 'DEBUG',
            'propagate': True
        },
        'django.db.backends': {
            'handlers': ['development'],
            'level': 'DEBUG',
            'propagate': False,
        },
        'django.request': {
            'handlers': ['mail_admins'],
            'level': 'ERROR',
            'propagate': True,
        }
    }
} 
```

* * *

**虚拟主机配置**

```
<VirtualHost *:80>
    SetEnv DJANGO_DEBUG True

    ServerName virtualimpact.userhome.test-env.net

    LogLevel debug
    ErrorLog   "/home/developer/logs/developer-machine_error.log"
    CustomLog "/home/developer/logs/developer-machine_com_access.log" combined

    Alias /static/ /home/developer/htdocs/path/to/htdocs/static/

    <Directory /home/developer/htdocs/path/to/htdocs/static>
      Order deny,allow
      Allow from all
    </Directory>

    WSGIScriptAlias / /home/developer/htdocs/path/to/mod_wsgi/django.wsgi
</VirtualHost> 
```

* * *

**django.wsgi**

```
import os, sys, site

workspace = os.path.abspath('%s/..' % os.path.dirname(__file__))
activate_this = os.path.abspath('%s/virtpy/bin/activate_this.py' % workspace)
execfile(activate_this, dict(__file__=activate_this))

sys.path.append(workspace)
sys.path.append('%s/htdocs' % workspace)

os.environ['DJANGO_SETTINGS_MODULE'] = 'htdocs.settings'
os.environ['PYTHON_EGG_CACHE'] = '%s/mod_wsgi/egg-cache' % workspace

import django.core.handlers.wsgi
_application = django.core.handlers.wsgi.WSGIHandler()

def application(environ, start_response):
    os.environ['DJANGO_DEBUG'] = environ.get('DJANGO_DEBUG', 'False')
    return _application(environ, start_response) 
```

* * *

**views.py（片段）**

```
import logging
logger = logging.getLogger('')
...

class AbstractsListView(BaseListView):
    def get_context_data(self, **kwargs):
        # none of the below calls write to the error log
        logger.debug('debug it')
        logger.info('info it')
        import sys
        sys.stderr.write('asdfasdf')
        ... 
```

如果您需要更多信息，请告诉我，这件事一直困扰着我一段时间，我对此束手无策。

提前致谢。

编辑：另外，我正在使用 Python 2.6.6 和 Django==1.4.3

## 编辑：它正在记录，但是到错误的文件！

所以我不知道为什么我以前没有检查过，但事实证明我写到 stdout（或 stderr）的任何内容都会进入 /var/log/httpd/ 中的日志，而不是我专门配置的日志对于这个虚拟主机。我想知道这是否比 Django 更像是一个 mod_wsgi 问题，但我不能确定。我的 mod_wsgi 和 vhost.conf 文件是否正确？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:40:35.650

好的，这似乎源于我在嵌入式模式下运行 mod_wsgi 而不是作为守护进程的事实。我一切换它，我的日志就开始出现在正确的位置。我们会看看它的表现如何，但到目前为止还不错。

# ios - PopOver 和 UIStoryboardPopoverSegue 类奇怪的行为

> ID：14608138
> 
> 赞同：0
> 
> 时间：2013-01-30T15:53:45.980
> 
> 标签：ios, segue

基于 uitableviewcell 选择，我执行 segue。我在下面粘贴了我的准备 segue 代码。就目前而言，代码似乎运行良好。但是，当我移动线路时

```
currentSelectionPopOver = [(UIStoryboardPopoverSegue *)segue popoverController]; 
```

直接在 [destList setDelegate:self] 之后；声明，我设置我的 destList 属性的 if 语句似乎在加载视图时没有使用。想法？只是对行为感到好奇。

```
 - (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

    if([segue.identifier isEqualToString:@"showSelectionList"]) {

        //the destination view controller displays the data
        SelectionListController *destList = segue.destinationViewController;
        [destList setDelegate:self];

        //Set the type of selection list to show.
        if(tagThatRequestedSelectionList == TAG_OFFSET + STATE) {
            DLog()
            [destList setRequestType:STATES_LIST];
        }//end if.

        if(tagThatRequestedSelectionList == TAG_OFFSET + CITY) {
            DLog();
            [destList setRequestType:CITY_LIST];
        }//end if.

        //Setup a pointer to the popover controller so it can be dismissed.
        currentSelectionPopOver = [(UIStoryboardPopoverSegue *)segue popoverController];    
     }
     }//end prepare. 
```

# c# - 在 SignalR 中，是否可以模拟重新连接以进行测试？

> ID：14608139
> 
> 赞同：7
> 
> 时间：2013-01-30T15:53:48.710
> 
> 标签：c#, asp.net, signalr

我了解如果连接因任何原因失败，SignalR 会不断尝试重新连接。测试我的服务器和客户端对此响应的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2020-04-13T22:18:05.107

为了让客户端尝试重新连接，您需要使用[withAutomaticReconnect方法配置](https://docs.microsoft.com/en-us/javascript/api/@microsoft/signalr/hubconnectionbuilder?view=signalr-js-latest#withautomaticreconnect--)[HubConnectionBuilder](https://docs.microsoft.com/en-us/javascript/api/@microsoft/signalr/hubconnectionbuilder?view=signalr-js-latest)。JavaScript 代码如下所示：

```
const connection = new signalR.HubConnectionBuilder()
  .withUrl(`${apiUrl}/subscribe/change`)
  .withAutomaticReconnect()
  .build(); 
```

一旦设置好，客户端将在连接丢失时尝试重新连接。

在内部，当 SignalR 断开连接时，它会调用该`stopInternal`函数。

如果您想进行一些手动测试以确保您的处理程序被解雇并且他们会按照您的期望进行操作。您可以将连接保存在 a 中`const`并自己触发事件。

我做了什么：

1.  像上面的代码一样创建连接，
2.  缓存`window`对象中的连接。

```
 window.signalR = connection; 
```

3.  打开浏览器控制台，单击左侧的三个点并导航到`Network conditions`.

[![在此处输入图像描述](../Images/c00ef69a91fedf4d4a5a666e607cc5ba.png)](https://i.stack.imgur.com/uoRUW.png)

4.  更新`Network throttling`为离线。

[![在此处输入图像描述](../Images/571e7cfa4d7ef25dc31ac907f69b02d4.png)](https://i.stack.imgur.com/tflxR.png)

5.  最后跑了：

```
signalR.connection.stopInternal(); 
```

我的`onreconnecting`处理程序开始射击。它默认运行 4 次。它看起来像这样：

```
connection.onreconnecting(error => {
  console.log('Reconnecting interval', error);
}); 
```

注意：此策略仅用于开发和一些手动测试。我不建议将该`window`对象用于单元测试或集成测试。

通过将连接缓存在单元测试要使用的一些内部变量上，可以实现类似的策略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:19:12.950

要在服务器上测试断开连接：浏览到另一个页面。

要在客户端上测试断开连接：重置服务器（IISreset？）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-19T12:29:30.690

我在这里找到了解决方案：[https ://stackoverflow.com/a/59916046/2929675](https://stackoverflow.com/a/59916046/2929675)

在打开 WebSocket 连接之前，您必须执行此脚本来猴子修补浏览器的 WebSocket 函数：

```
const sockets = [];
const nativeWebSocket = window.WebSocket;
window.WebSocket = function(...args){
  const socket = new nativeWebSocket(...args);
  sockets.push(socket);
  return socket;
}; 
```

现在您可以通过 sockets 数组访问所有 WebSocket 连接。当你想触发重新连接时，你可以调用

```
sockets[0].close(); 
```

使用要关闭的连接的索引。

当 SignalR 自动重新连接启用时，它会自动尝试打开一个新连接，并触发`Reconnecting`and`Reconnected`事件。

这有点hacky，但这是我迄今为止找到的最好的解决方案。

看起来铬问题也有一些进展，以在开发工具中支持这一点：[https ://bugs.chromium.org/p/chromium/issues/detail?id=423246](https://bugs.chromium.org/p/chromium/issues/detail?id=423246)

# java - 使用自定义参数注入变量而不创建 2 个 guice 辅助接口？

> ID：14608142
> 
> 赞同：4
> 
> 时间：2013-01-30T15:53:55.593
> 
> 标签：java, dependency-injection, guice

我正在使用 guice 在我的构造函数中动态注入类。例如：

```
@Inject
public PublisherFrame(EventBus eventBus, MyPublisherService publishService) 
```

在我的 guice 模块中：

```
bind(EventBus.class).in(Singleton.class);
bind(MyPublisherService.class).in(Singleton.class); 
```

工作没有问题。

当我创建一个具有在 java 代码中构造的参数的对象时，问题就开始了：

```
public LoginController(EventBus eventBus, MyPublisherService publisherService, LoginDialog dlg) 
```

这里 LoginDialog 是 java 代码创建的 java 类。为了解决这个问题，我使用@assist 并且：

```
install(new FactoryModuleBuilder().implement(ILoginController.class, LoginController.class).build(GuiceLoginControllerFactory.class)); 
```

工作也很好。但现在我必须创建 2 个额外的 java 文件：

*   LoginController 的新接口：ILoginController，它除了 help guice 什么都不做。
*   guice 的另一个接口：GuiceLoginControllerFactory

有没有更简单的方法来注入在构造函数中具有自定义参数的变量？（不创建 2 个额外的“guice”帮助文件）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T22:09:18.303

您实际上并不需要类本身的附加接口（见下文）。此外，我通常将我的工厂创建为它创建的类的嵌套接口：

```
public class LoginController {
  public interface Factory {
    LoginController create(LoginDialog dlg);
  }

  @Inject public LoginController(
      EventBus eventBus,
      MyPublisherService publisherService,
      @Assisted LoginDialog dlg) { /* ... */ }
}

// in your module
install(new FactoryModuleBuilder().build(LoginController.Factory.class)); 
```

除非您希望 Factory 的工厂方法的返回类型是接口而不是具体类，否则您不需要调用`FactoryModuleBuilder.implement`- 如果没有您的帮助，Guice 将不知道要构造哪种具体类型。在下面的示例中，您不能要求 FactoryModuleBuilder`LoginService.Factory`为您简单地实现，因为它不知道要实例化哪个具体的 LoginService 实现器：

```
interface LoginService {
  interface Factory {
    LoginService create(NetConnection connection);
  }
  boolean login(String username, String password);
}

class SimpleLoginService implements LoginService {
  @Inject SimpleLoginService(@Assisted NetConnection connection) { /* ... */ }
}

class SecuredLoginService implements LoginService {
  @Inject SecuredLoginService(
      EncryptionService encryptionService,
      @Assisted NetConnection connection) { /* ... */ }
}

// in your module: implements LoginService.Factory
install(new FactoryModuleBuilder()
    .implement(LoginService.class, SimpleLoginService.class)
    .build(LoginService.Factory.class));
// this one implements @Secured LoginService.Factory
install(new FactoryModuleBuilder()
    .implement(LoginService.class, SecuredLoginService.class)
    .build(Key.get(LoginService.Factory.class, Secured.class)); 
```

除此之外，*condit*创建 setter 方法的想法还不错，尽管这确实意味着您正在以部分初始化的状态构建您的类。

# c++ - C++理解另一个程序员B树的遍历

> ID：14608143
> 
> 赞同：0
> 
> 时间：2013-01-30T15:53:56.210
> 
> 标签：c++, database, data-structures

我有一个已经存在于数据库中的 B 树。现在，由其他一些程序员编写的以下代码尝试遍历 B-Tree。但是，我无法理解函数的用途是什么：readInner1(page,slot) 和 readInnerPage(page,slot)。有人可以通过使用这两个函数来帮助我理解代码的作用吗？

```
static inline unsigned readUint32Aligned(const unsigned char* data) { return toHost(*reinterpret_cast<const uint32_t*>(data)); }

/// The page remains accessible during the lifetime of the BufferReference object.
class BufferReference
{
   public:
   /// The size of a page
   static const unsigned pageSize = 16384;
   /// A page buffer
   struct PageBuffer { char data[pageSize]; };

   private:
   /// The buffer frame
   const BufferFrame* frame;

   /// No copying of references
   BufferReference(const BufferReference&);
   void operator=(const BufferReference&);

   public:
   /// Constructor
   BufferReference();
   /// Constructor from a request
   BufferReference(const BufferRequest& request);
   /// Destructor
   /// Access the page
   const void* getPage() const;
   /// Get the page number
   unsigned getPageNo() const;
};

Info1(unsigned root,unsigned value1)
{
   // Traverse the B-Tree
#define readInner1(page,slot) readUint32Aligned(page+24+8*(slot))
#define readInnerPage(page,slot) readUint32Aligned(page+24+8*(slot)+4)
   BufferReference ref;
   ref=readShared(root);
   while (true) {
      const unsigned char* page=static_cast<const unsigned char*>(ref.getPage());
      // Inner node?
      if (readUint32Aligned(page+8)==0xFFFFFFFF) {
         // Perform a binary search. The test is more complex as we only have the upper bound for ranges
         unsigned left=0,right=readUint32Aligned(page+16);
         cout<<"\n right="<<right<<"\n";
         while (left!=right) {
            unsigned middle=(left+right)/2;
            printf("\n MIDDLE=%d",middle);
            unsigned middle1=readInner1(page,middle);
            cout<<"\n middle1="<<middle1<<"\t value1="<<value1<<"\n";
            if (value1>middle1) {
               left=middle+1;
               cout<<"\n left="<<left<<"\n";
            } else if ((!middle)||(value1>readInner1(page,middle-1))) {
               ref=readShared(readInnerPage(page,middle));
               break;
            } else {
               right=middle;
               cout<<"\n right="<<right<<"\n";
            }
         }
         // Unsuccessful search?
         if (left==right) {
            ref.reset();
            return false;
         }
      } else {
         // A leaf node
         break;
      }
   }
#undef readInnerPage
#undef readInner1
} 
```

如果有人可以解释代码也会很棒吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:06:10.383

该代码通常执行二进制搜索。

因此`left`和`right`是搜索的界限，每次迭代都会减半，直到它们保持相同的值。

数据似乎以 16K 字节的页面排列，并且这些页面中可能有一些标题信息，这些信息可能已排序，因此它正在检查这些值，然后重新调整搜索。

如果允许您修改代码，我建议您将宏替换为内联函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:06:39.727

宏`readInner1`和`readInnerPage`都定义为对函数的调用`readUint32Aligned`。这两个宏之间的唯一区别是`readInnerPage`返回的值比`readInner1`给定相同页面和槽参数返回的值多四个字节。

Function`readUint32Aligned`本质上只是对 function 的调用`toHost`，您提供的代码示例中没有定义它。但是，我的猜测是`toHost`将无符号 32 位整数从[网络字节顺序转换为主机顺序](http://www.tutorialspoint.com/unix_sockets/network_byte_orders.htm)。

# vhdl - VHDL等待多个信号

> ID：14608155
> 
> 赞同：2
> 
> 时间：2013-01-30T15:54:41.067
> 
> 标签：vhdl, hdl, modelsim

```
signal a:bit:='1'; signal b:bit:='0'; signal c:bit:='0';
begin
  process
  variable d:bit:='0';
    begin
    if (a='1')or(b='0') then a <= inertial not d after 1ns;
  else a<=inertial not c after 1.5ns;
    end if;
    d := a and b;
  b <= inertial (b)nand(a or d) after 1ns;          
  wait on a,b,c;end process;
  c <= a and b after 1ns;
end Behavioral; 
```

如果 a 和 b 同时改变它们的值会发生什么，例如 2ns。

进程会触发2次吗？

如果是这样，应该为 a，b 使用哪些值，如果我们要通过 a 事件的进程，b 信号是在那个时候改变了，还是当进程再次为 b 运行时它会改变？

还有声明 c <= a and b after 1ns; 在过程之外，它如何与之后一起工作？如果没有之后，它只是一个 AND 单元，没有延迟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T13:39:17.363

```
wait on a,b,c; 
```

等待一个信号在增量周期内进行交易。

如果碰巧两个或全部“激活”，对模拟器没有任何影响，它仍然会退出等待。它不会在剩余信号上“保存”当前增量周期中的事务并将它们转发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T16:30:39.607

我希望你理解这个过程不会正确合成！

至于触发一次或两次的进程，这将取决于 a 或 b 上的事件是否发生在同一个增量周期中。在流程中添加报告语句并找出答案。

因为进程通过延迟语句驱动 A 和 B，所以我希望这两个分配在相同的增量周期中起作用；时间步长的第一个增量，所以我希望它被触发一次。

现在，如果您引入了一个新信号“e”并将其从进程中驱动而不是“b”，并`b <= e;`在进程外部添加了信号分配，那么您已经在“b”中引入了一个增量周期延迟，然后进程应该被唤醒两次。

该语句`c <= a and b after 1ns;`本质上是一个对 a 和 b 敏感的单独过程，因此它应该以相同的方式工作。

您可能会发现[此答案](https://stackoverflow.com/questions/13954193/is-process-in-vhdl-reentrant/13956532#13956532)有助于理解增量循环模型。

# html - 删除后的换行符

> ID：14608156
> 
> 赞同：6
> 
> 时间：2013-01-30T15:54:42.583
> 
> 标签：html

我的表格由 2 列表格格式化。在左栏中，我使用 a `<label>`，在右栏中使用 a `<input type="text">`。某些输入框是必需的。所以要求是对于所有强制输入，标签旁边应该有一个红色星号。然而，标签的设计使其始终后跟换行符，因此星号自动位于下方。确保不会发生这种情况的最佳方法是什么，并且星号位于标签旁边的正确位置？我认为该`<div float="left>`选项不适用于表格。这是所要求的代码；

```
<tr>
                <td class="leftCell"><span style="white-space: nowrap;"><label for="Subcontractor_CompanyName">Company</label><span style="display: inline;" class="errorHighlight">*</span></span></td>
                <td class="rightCell"><input style="width: 300px;" id="Subcontractor_CompanyName" name="Subcontractor.CompanyName" value="096 club" type="text" data-val-required="Must enter the Company Name" data-val="true">
                    <span class="field-validation-valid" data-valmsg-replace="false" data-valmsg-for="Subcontractor.CompanyName">*</span></td>
            </tr> 
```

我尝试使用`<span style="white-space: nowrap;">`失败。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-30T15:56:49.340

或者，如果他们给出了`<label>`as 块，您可以这样做：

```
label {display: inline;} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T16:02:35.740

如果您能够更改标记，则可以将星号放在标签内。

就像是：

```
<label>Name:<sup>*</sup></label>
<input type="text" name="name" /> 
```

和 CSS：

```
label sup { color: red; } 
```

结果如下：http: [//jsfiddle.net/ByGVE/](http://jsfiddle.net/ByGVE/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T15:57:48.810

给定默认浏览器默认 CSS 和足够宽度以容纳其旁边的输入，标签不会触发新行。

您可能`display: block`在标签上设置了一些 CSS。而是将其设置在输入上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-23T20:39:32.717

使用 style="white-space: pre-wrap;"

# seo - 如何在 robots.txt 中禁止服务 api 和多语言 url

> ID：14608160
> 
> 赞同：2
> 
> 时间：2013-01-30T15:54:51.623
> 
> 标签：seo, robots.txt

我需要禁止下一个 URL：

1.  service api `/_s/user`, `/_s/place`, ... 一切以`/_s/`
2.  保存表格：`/{language}/save`. 例如`/{en}/save`，, `/{ru}/save`...

注意：大多数 URL 的开头都有语言参数：`/en/event`, ... 我不想阻止它们。

`robots.txt`应该是这样的：（但格式不允许这样做）

```
Disallow: /_s/*
Disallow: /:lang/save 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T18:26:04.250

In`robots.txt`匹配是从左边开始的，所以它匹配任何以 . 开头的东西`/pattern`。

通配符 like`/*pattern`匹配任何必须后跟给定 的开头`pattern`。因此`*`，右边永远不需要（例如`/foo*`，它等同于`/foo`）。

所以在你的情况下你可以使用

> `Disallow: /_s/`

*   禁止任何以`/_s/`例如开头的东西`/_s/foo`

> `Disallow: /*save`

*   禁止所有模式，例如`/en/save`但**也** `/foosave`或`/en/save/other`

您可以使用`$`来表示“必须以”*结尾*

> `Disallow: /*save$`

*   禁止所有模式，例如`/en/save`or`/fr/save`但**不是** `/en/save/other`

您可以在 Robots.txt 中找到有关 robots.txt 的更多信息[：您应该知道的 4 件事](http://www.searchenginejournal.com/robotstxt-4-things-you-should-know/7292/)文章

我希望这会有所帮助。

# java - Jersey / Grizzly 的基本 HTTP 身份验证

> ID：14608162
> 
> 赞同：10
> 
> 时间：2013-01-30T15:54:56.107
> 
> 标签：java, jersey, jax-rs, http-authentication, grizzly

我使用 JAX-RS、Jersey 和 Grizzly 编写了一个简单的 REST 服务器。这就是我启动服务器的方式：

```
URI baseUri = UriBuilder.fromUri("http://localhost/api")
                        .port(8081)
                        .build();

ResourceConfig rc = new PackagesResourceConfig("se.aioobe.resources");
HttpServer httpServer = GrizzlyServerFactory.createHttpServer(baseUri, rc); 
```

现在我需要使用基本 HTTP 身份验证来保护资源，但我不知道该怎么做。

如果让其工作更简单，我可以从 Grizzly 切换到例如 Jetty，但我真的很重视 Grizzly 提供的简单配置/启动。

我已经阅读了很多教程。他们都提到了 web.xml，但在我目前的配置中我没有。（我需要为 HTTP 身份验证添加一个吗？）我发现了[以下](https://stackoverflow.com/questions/11325334/basic-authentication-at-grizzly-server) [问题](https://stackoverflow.com/questions/11342981/basic-authentication-for-grizzly-server)，它们都没有任何帮助:-(

（此时不需要 SSL。此时的身份验证只是为了防止公众偷看我们的测试版。）

**TL;DR**：如何向 Jersey / Grizzly webapp 添加基本的 HTTP 身份验证？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-31T08:44:18.517

[根据这篇博](http://simplapi.wordpress.com/2013/01/24/jersey-jax-rs-implements-a-http-basic-auth-decoder/)文，我设法在几个小时后让它工作。

我的解决方案包括：

*   Maven工件：
    *   球衣服务器（v 1.17）
    *   jersey-grizzly2 (v 1.17)
*   硬编码的用户名/密码（如果你愿意，用数据库查找替换）
*   没有 web.xml（以编程方式配置的服务器）
*   不涉及 SSL

我创建了这个`ContainerRequestFilter`：

```
public class AuthFilter implements ContainerRequestFilter {

    // Exception thrown if user is unauthorized.
    private final static WebApplicationException unauthorized =
       new WebApplicationException(
           Response.status(Status.UNAUTHORIZED)
                   .header(HttpHeaders.WWW_AUTHENTICATE, "Basic realm=\"realm\"")
                   .entity("Page requires login.").build());

    @Override
    public ContainerRequest filter(ContainerRequest containerRequest) 
            throws WebApplicationException {

        // Automatically allow certain requests.
        String method = containerRequest.getMethod();
        String path = containerRequest.getPath(true);
        if (method.equals("GET") && path.equals("application.wadl"))
            return containerRequest;

        // Get the authentication passed in HTTP headers parameters
        String auth = containerRequest.getHeaderValue("authorization");
        if (auth == null)
            throw unauthorized;

        auth = auth.replaceFirst("[Bb]asic ", "");
        String userColonPass = Base64.base64Decode(auth);

        if (!userColonPass.equals("admin:toHah1ooMeor6Oht"))
            throw unauthorized;

        return containerRequest;
    }
} 
```

然后我更改了启动代码以包含过滤器：

```
URI baseUri = UriBuilder.fromUri("http://localhost/api")
                        .port(8081)
                        .build();

ResourceConfig rc = new PackagesResourceConfig("se.aioobe.resources");

// Add AuthFilter ////////////
rc.getProperties().put("com.sun.jersey.spi.container.ContainerRequestFilters",
                       "<YOUR PACKAGE FOR AuthFilter>.AuthFilter");
//////////////////////////////

HttpServer httpServer = GrizzlyServerFactory.createHttpServer(baseUri, rc); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T07:16:32.693

您可能需要检查与 Jersey 一起分发的 HTTPS Client Server Grizzly[示例](http://search.maven.org/remotecontent?filepath=com/sun/jersey/samples/https-clientserver-grizzly/1.17/https-clientserver-grizzly-1.17-project.zip)，该示例正是这样做的。这是该示例中关于在 Grizzly 服务器上配置安全过滤器的要点。

```
 WebappContext context = new WebappContext("context");
    ServletRegistration registration = 
            context.addServlet("ServletContainer", ServletContainer.class);
    registration.setInitParameter("com.sun.jersey.config.property.packages",
            "com.sun.jersey.samples.https_grizzly.resource;com.sun.jersey.samples.https_grizzly.auth");

    // add security filter (which handles http basic authentication)
    registration.setInitParameter(ResourceConfig.PROPERTY_CONTAINER_REQUEST_FILTERS,
            "com.sun.jersey.samples.https_grizzly.auth.SecurityFilter;com.sun.jersey.api.container.filter.LoggingFilter");
    registration.setInitParameter(ResourceConfig.PROPERTY_CONTAINER_RESPONSE_FILTERS,
            LoggingFilter.class.getName());

    try {

        webServer = GrizzlyServerFactory.createHttpServer(
                getBaseURI()
        );

        // start Grizzly embedded server //
        System.out.println("Jersey app started. Try out " + BASE_URI + "\nHit CTRL + C to stop it...");
        context.deploy(webServer);
        webServer.start();

    } catch (Exception ex) {
        System.out.println(ex.getMessage());
    } 
```

您正在注册一个 SecurityFilter 来处理您的 HTTP 基本身份验证。在服务器上启用日志过滤器应在请求中显示基本身份验证标头。这是一个例子：

```
Jan 30, 2013 8:59:00 PM com.sun.jersey.api.container.filter.LoggingFilter filter
INFO: 1 * Server in-bound request
1 > GET http://localhost:8080/context/
1 > host: localhost:8080
1 > connection: keep-alive
1 > cache-control: max-age=0
1 > authorization: Basic dXNlcjpwYXNzd29yZA==
1 > accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
1 > user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.57 Safari/537.17
1 > accept-encoding: gzip,deflate,sdch
1 > accept-language: en-US,en;q=0.8
1 > accept-charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
1 > 

Service: GET / User: user
Jan 30, 2013 8:59:00 PM com.sun.jersey.api.container.filter.LoggingFilter$Adapter finish
INFO: 1 * Server out-bound response
1 < 200
1 < Content-Type: text/html
1 < 
JERSEY HTTPS EXAMPLE 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T19:18:15.323

@aioobe 请注意，尽管这会起作用，但在使用标头时需要更好的错误检查。例如：

```
 auth = auth.replaceFirst("[Bb]asic ", ""); 
```

这假定身份验证标头是基本的，而它可能不是。您应该检查授权标头是否以“基本”开头，如果不是未经授权则抛出。确保其余信息实际上是 base64 编码的同样的事情。

# javascript - Javascript - 用 1 个选择列表填充 2 个文本框

> ID：14608163
> 
> 赞同：0
> 
> 时间：2013-01-30T15:54:59.443
> 
> 标签：javascript

在下拉框中选择某些内容时，我需要填充 2 个不同的文本框。

从[小提琴](http://bit.ly/VrpYK3)，我可以做到这一点。

对不起，让我再澄清一点。这个下拉列表实际上是这个人的 LONG NAME。当他的名字被选中时，我正在尝试填充“昵称”和“联系电话”文本框。

看看这个[演示](http://bit.ly/14rT3sI)，我现在有 2 个文本框。在我的数据库中，我记录了每个人的全名、昵称和联系电话。如何创建选择列表取决于我，但我只想选择他的全名，以便在 2 个单独的框中显示昵称和联系电话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:35:55.350

```
<textarea id="mytext"></textarea>
<textarea id="mytext2"></textarea>
<select id="dropdown">
<option value="">None</option>
<option value="contactnumber1">text1</option>
<option value="contactnumber2">text2</option>
<option value="contactnumber3">text3</option>
<option value="contactnumber4">text4</option>
</select>

var mytextbox = document.getElementById('mytext');
var mytextbox2 = document.getElementById('mytext2');
var mydropdown = document.getElementById('dropdown');

mydropdown.onchange = function () {
mytextbox.value = mydropdown.options[this.selectedIndex].text;
mytextbox2.value = mydropdown.options[this.selectedIndex].value;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T16:01:23.093

抱歉，您的示例只有一个 texarea ...

但是，如果我没有误解您的问题，您可以简单地这样做：

```
var mytextbox = document.getElementById('mytext');
var mytextbox2 = document.getElementById('mytext2');

var mydropdown = document.getElementById('dropdown');

mydropdown.onchange = function(){

   mytextbox.value = mytextbox.value  + this.value;
   mytextbox2.value = mytextbox2.value  + this.value;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T16:01:13.613

你的意思是，你想在每次一些身体从下拉列表中选择项目时附加选择？我在你的小提琴中没有看到两个文本框，这就是我问的原因......

如果您想选择唯一值，那么..

```
var mytextbox = document.getElementById('mytext');
var mydropdown = document.getElementById('dropdown');
var strValue =  new String();
mydropdown.onchange = function(){
if(strValue.indexOf(this.value)<=0){
   if(strValue!="")
{
    strValue += "," + this.value;
}
else
{
    strValue = this.value
}
}
mytextbox.value = strValue;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T16:01:35.090

因此，您希望一个标签填充两个值。话虽如此，如果您只是将数据属性放在选项标签中呢？data-contactNumber 数据-longName

```
<select>  
<option value="x" data-contactNumber = "yyyy" data-longName="zzzz">  
.....
</select> 
```

然后您可以将所选选项文本框分配给各个数据属性？

# java - 使用 Java IMAP 获取带附件的 Gmail 电子邮件

> ID：14608164
> 
> 赞同：1
> 
> 时间：2013-01-30T15:54:59.210
> 
> 标签：java, gmail, imap, email-attachments

我正在尝试使用 Java 从 Gmail 获取电子邮件。我使用 java-gmail-imap 库。当我尝试获取 message.getContent() 时，它总是给 Inputstream。它没有为我提供足够的信息来解析该部分。我的代码看起来像这样。请让我知道我错过了什么？

```
IMAPStore imapStore = OAuth2Authenticator.connectToImap(
            "imap.gmail.com", 993, email, token, false);

    Folder folder = imapStore.getFolder("Inbox");
    if (folder.isOpen()) {
        if ((folder.getMode() & Folder.READ_WRITE) != 0) {
            folder.close(false);
            folder.open(Folder.READ_ONLY);
        }
    } else {
        try {
            folder.open(Folder.READ_ONLY);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    Message[] messages = null;
    SearchTerm newerThan = new ReceivedDateTerm(ComparisonTerm.GT, lastDate);
    messages = folder.search(newerThan);

    FetchProfile fp = new FetchProfile();
    fp.add("X-GM-MSGID");
    fp.add(UIDFolder.FetchProfileItem.UID);
    fp.add(IMAPFolder.FetchProfileItem.X_GM_MSGID);
    //fp.add(FetchProfile.Item.ENVELOPE);
    //fp.add(FetchProfileItem.FLAGS);
    //fp.add(FetchProfileItem.CONTENT_INFO);
    // fp.add("X-mailer");
    folder.fetch(messages, fp); 

    for (Message message : messages) {

        if (message != null) {
            Object o = message.getContent();
            if (o instanceof String) {
                logger.info("Message content is string");
            } else if (o instanceof Multipart) {
                logger.info("Message content is multipart");
            } else if (o instanceof Message) {
                logger.info("Nested Message");
            } else if (o instanceof InputStream) {
                logger.info("Message content is inputstream");
            }
        }
    } 
```

**编辑：** 通过添加 mailcap 解决了问题

CommandMap.setDefaultCommandMap(new com.google.code.javax.activation.MailcapCommandMap(this.getClass().getClassLoader().getResourceAsStream("mailcap")));

# sql - 检查外部数据库是否在线

> ID：14608167
> 
> 赞同：0
> 
> 时间：2013-01-30T15:55:03.553
> 
> 标签：sql, sql-server, sql-server-2008-r2, windows-server-2008

我知道这句话告诉我“MyDatabase”数据库在线：

```
select databasepropertyex('MyDatabase', 'Status') 
```

如果我需要从另一台服务器检查数据库怎么办？假设我已经有一个链接服务器，调用应该是这样的：

```
select databasepropertyex('[192.168.111.33].MyOtherDatabase', 'Status') 
```

但它不起作用，有人知道如何检查吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:25:17.247

通常，您只需尝试连接到数据库，并在连接失败时捕获错误。但根据您的网络设置和安全性，*可能*无法直接连接到数据库服务器。具体如何执行取决于您使用的语言和提供商。

[一些连接字符串的在线示例>](http://www.connectionstrings.com/sql-server-2008)

要查看 SQL Server 2008 数据库是否可以接受连接，请查看 Collat​​ion 属性。我知道这听起来有多奇怪，但这是[有记录的方式](http://msdn.microsoft.com/en-us/library/ms186823.aspx)。

> 当数据库正在打开且尚未恢复时，可能会返回 ONLINE 状态。要确定数据库何时可以接受连接，请查询 DATABASEPROPERTYEX 的 Collat​​ion 属性。

例如，许多数据库服务器设置为拒绝来自除*一个*之外的所有 IP 地址的连接。这在基于 Web 的设置中尤其常见；这是一项基本的安全措施。在那种情况下，像这样（紧接在下面）连接会起作用。应用服务器或 Web 服务器上的代码尝试连接到数据库服务器，如果失败则返回错误。

```
Your server      -->  Application server   -->  Database server
or workstation        or web server 
```

但是这样的连接不会，因为数据库服务器被配置为只接受来自应用程序服务器或 Web 服务器的连接。

```
Your server      ---------------------------->  Database server
or workstation        
                      Application server
                      or web server 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:31:11.913

可能必须作为直通查询运行，例如

```
OPENQUERY ( [192.168.111.33] ,'select databasepropertyex(MuOtherDatabase, ''Status'')' ) 
```

（假设您已经设置的链接服务器称为 [192.168.111.33]，如上所述 - 使用 IP 似乎是一个可疑的命名约定？）

# ant - 使用 Ant 检查文件是否存在于特定目录中

> ID：14608169
> 
> 赞同：0
> 
> 时间：2013-01-30T15:55:02.917
> 
> 标签：ant

我有文件`abc.txt`，我需要检查该文件是否存在于假设 `c:\test\abc.txt`位置

如果为真，那么我需要打印一些消息，否则我需要执行一些操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:03:51.467

最好是使用 ant`<available ../>`填充属性，然后使用*ant-contrib* `<if>`任务或创建单独的目标，这些目标根据属性值运行。

检查此答案以获取详细信息：[Ant task to run an Ant target only if a file exists?](https://stackoverflow.com/questions/520546/ant-task-to-run-an-ant-target-only-if-a-file-exists)

# java - Java中的重载/泛型

> ID：14608170
> 
> 赞同：10
> 
> 时间：2013-01-30T15:55:03.843
> 
> 标签：java, generics

我想在列表中运行某些测试。列表可以包含完全不同的类。

我有一种方法来检查列表的一致性 - 不为空，不为空，不超过 x 个元素。这对所有列表都是通用的。然后我想测试每个对象，使用重载。

这个想法是这样的：

```
public static <T> void check(List<T> list) {

    //do general checks

    for (T element : list) {
        check(element);
    }
} 
```

进而

```
public static void check(SomeType element) {...}

public static void check(SomeOtherType element) {...} 
```

但我还必须添加这样的方法：

```
public static void check(T element) {...} 
```

这是在运行时调用的——不是我使用特定类的其他方法。虽然课程完全一样。我显然缺少一些泛型的理解。

现在，如果我根本不使用一般方法并尝试以这种方式解决它：

```
 public static void check(List<SomeType> list) {...}

    public static void check(List<SomeOtherType> list) {...} 
```

编译器错误 - “方法检查（列表）与另一个方法具有相同的擦除检查（列表）......”

那么有什么优雅的解决方案吗？我可以只使用不同的方法名称，但想知道没有它怎么可能。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T16:00:05.747

这与您缺少的泛型无关。Java 没有[双重分派](http://en.wikipedia.org/wiki/Double_dispatch)。调用`check`必须在编译时解决，并且`check(T)`是唯一的匹配项，因为编译器无法判断`T`是在给定场景中`SomeType`还是`SomeOtherType`在给定场景中。它需要选择一种方法来调用，该方法适用于所有可能`T`的 s。

这有时可以使用[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)来解决。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T16:00:59.640

您可以使用`instanceof`调度：

```
public static <T> void check(List<T> list) {
  for (T element : list) {
    check(element);
  }
}

public static void check(T t) {
  if (t instanceof SomeType) {
    SomeType someType = (SomeType) t;
    // code for SomeType ...
  } else if (t instanceof OtherType) {
    OtherType otherType = (OtherType) t;
    // code for OtherType ...
  } else {
    // we got a type that we don't have a method for
  }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-30T16:02:46.540

问题应该由调用者解决。当它使用 T 的具体类型实例化您的类时，它还应该传递具有`Checker<T>`相同具体类型的实例：

```
public class SomeClass<T> {
    private List<T> list;
    private Checker<T> checker;

    public SomeClass(Checker<T> checker) {
        this.checker = checker;
    }

    public void check() {
        checker.check(list);
    }
}

public interface Checker<T> {
    public void check(List<T> list);
}

...

SomeClass<Foo> someClass = new SomeClass<Foo>(new Checker<Foo>() {
    @Override 
    public void check(List<Foo> list) {
        // do whatever you want here
    }
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-30T16:01:12.847

使用泛型，类型参数实际上在编译期间被擦除，并且列表对象不知道它包含的对象的静态类型。既然不知道，就不能用重载来调用不同参数的方法，因为Java不支持[多分派](http://en.wikipedia.org/wiki/Multiple_dispatch#Java)。

那么你有三个选择：

*   使您的对象使用执行`Checked`检查逻辑的检查方法实现接口。缺点是检查逻辑现在分散在几个地方，如果你有你无法控制的类的对象，这是不切实际的。
*   用于根据对象的动态类型`instanceof`显式调用方法。`check`不利的一面是，您最终可能会遇到一个难以维护的大 if/else 块。
*   实现[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)。缺点是您也必须更改对象类，但`check`逻辑保留在一个地方。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-30T18:27:06.993

由于变量的类型丢失了，`check(List<T> list)`您有两个选择：

**1.通过检查运行时类型做不同的事情**

```
check(T element) {
  if (element.getClass().equals(SomeType.class)) {
    check((SomeType) element);
  } elseif (element.getClass().equals(SomeOtherType.class)) {
    check((SomeOtherType) element);
  } 
```

这可以变得更复杂一些，例如通过将每个检查包装在 a 中`Callable`并使用`Map<Class, Callable>`

这类似于访问者模式。

**2.在要检查的元素上调用虚方法本身**

如果可以将检查逻辑推送到要检查的对象本身（这不一定是坏事），那么您不需要检查类型：

```
interface Checkable { void check(); }
class SomeType implements Checkable { .... }
class SomeOtherType implements Checkable { .... } 
```

然后：

```
public static <T extends Checkable> void check(List<T> list) {
    for (T element : list) {
        element.check();
    }
} 
```

**这是*仅有*的两个选项，任何实现都必须是其中之一的变体**

# null - 如何在 RavenDB 中用 NULL 覆盖字段的旧值？

> ID：14608175
> 
> 赞同：0
> 
> 时间：2013-01-30T15:55:21.933
> 
> 标签：null, ravendb

我有一个存储在 RavenDB 中的文档，该文档具有一个属性，该属性以一些非空值保存，例如 2。我想将该值更新为 NULL 并保存它。当我这样做时，它会保留以前的值 2 而不是将其更改为 NULL。如何让 RavenDB 存储 NULL 而不是旧值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T21:07:11.570

这应该有效。如果您去 Studio 并更改 JSON 本身，但仍然发生这种情况，这可能是一个错误，您应该报告它。

# scala - scala中的上下文边界和模式匹配

> ID：14608176
> 
> 赞同：3
> 
> 时间：2013-01-30T15:55:24.490
> 
> 标签：scala

我正在scala中试验上下文边界，但我没有找到一种方法来对这两个函数中的任何一个进行类型检查：

```
abstract class Expr
case class Val[T: Numeric](v: T) extends Expr
case object Other extends Expr

val e1 = Val(1)
val e2 = Val(2)

def addExp1(e1: Expr, e2: Expr): Expr = (e1, e2) match {
  case (Val(v1), Val(v2)) => Val(v1+v2)
  case _ => Other
}

def addExp2[T: Numeric](e1: Expr, e2: Expr): Expr = (e1, e2) match {
  case (Val(v1: T), Val(v2: T)) => Val(v1+v2)
  case _ => Other
} 
```

在 addExp1 的情况下，我可以理解编译器在函数定义点没有信息知道 Val 的参数是 Numeric，因此有一个 + 方法。它只是匹配 Any 作为 v1 的类型。

在 addExp2 的情况下，如何强制在模式中绑定？类型被“擦除”...T 注释被擦除消除...

我梦想拥有的是一个单点来设置界限，理想情况下是 Val 类的定义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T17:33:33.767

避免丢失 Val 的参数化类型的一种方法是让 Expr 也采用类型参数。

```
abstract class Expr[T]
case class Val[T: Numeric](v: T) extends Expr[T]
case object Other extends Expr[Nothing]

val e1 = Val(1)
val e2 = Val(2)

def addExp2[T: Numeric](e1: Expr[T], e2: Expr[T]): Expr[_ <: T] = (e1, e2) match {
  case (Val(v1), Val(v2)) => Val(implicitly[Numeric[T]].plus(v1, v2))
  case _ => Other
}

addExp2[Int](e1, e2) 
```

这编译没有警告。

现在我们需要的是一种`Nothing`为 Expr 的类型参数指定默认类型的方法:)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T17:42:56.897

问题在于，当您进行模式匹配时， 的两个实例`Val`可以具有不同的类型参数，例如`Val[T1]`和`Val[T2]`。

您可以按照@rjsvaljean 的建议修复它，并添加`import Numeric.Implicits._`以使用漂亮的运算符表示法。

# sql - 使用 GROUP BY 的 SQL Server 查询

> ID：14608184
> 
> 赞同：1
> 
> 时间：2013-01-30T15:55:44.943
> 
> 标签：sql, sql-server

我在编写查询时遇到问题，该查询将选择所有技能，加入员工和能力记录，但每个员工只返回一项技能，即他们的最新技能。使用此示例数据集

```
Skills
======
id   employee_id   competency_id   created
1    1             1               Jan 1
2    2             2               Jan 1
3    1             2               Jan 3

Employees
===========
id   first_name   last_name
1    Mike         Jones
2    Steve        Smith

Competencies
============
id   title
1    Problem Solving
2    Compassion 
```

我想检索以下数据

```
Skill.id   Skill.employee_id   Skill.competency_id   Skill.created   Employee.id   Employee.first_name   Employee.last_name   Competency.id   Competency.title
2          2                   2                     Jan 1           2             Steve                 Smith                2               Compassion
3          1                   2                     Jan 3           1             Mike                  Jones                2               Compassion 
```

我能够选择使用创建的employee_id和max

```
SELECT MAX(created) as created, employee_id  FROM skills GROUP BY employee_id 
```

但是，当我开始在选择语句中添加更多字段或添加连接时，我得到“列 'xyz' 在选择列表中无效，因为它不包含在聚合函数或 GROUP BY 子句中。” 错误。

任何帮助表示赞赏，我不必使用 GROUP BY，这正是我所熟悉的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T16:02:04.963

您收到的错误是因为 SQL Server 要求`SELECT`列表中的任何项目都包含在`GROUP BY`如果正在使用聚合函数中。

这样做的问题是您可能在某些列中具有唯一值，这可能会影响结果。因此，您将需要重写查询以使用以下之一：

您可以使用子查询来获得此结果。这将获取`max(created)`子查询，然后您使用该结果来获取正确的员工记录：

```
select s.id SkillId,
  s.employee_id,
  s.competency_id,
  s.created,
  e.id employee,
  e.first_name,
  e.last_name,
  c.id competency,
  c.title
from Employees e
left join Skills s
  on e.id = s.employee_id
inner join
(
  SELECT MAX(created) as created, employee_id  
  FROM skills 
  GROUP BY employee_id
) s1
  on s.employee_id = s1.employee_id
  and s.created = s1.created
left join Competencies c
  on s.competency_id  = c.id 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/e2259/12)

或者另一种方法是使用`row_number()`：

```
select *
from
(
  select s.id SkillId,
    s.employee_id,
    s.competency_id,
    s.created,
    e.id employee,
    e.first_name,
    e.last_name,
    c.id competency,
    c.title,
    row_number() over(partition by s.employee_id 
                      order by s.created desc) rn
  from Employees e
  left join Skills s
    on e.id = s.employee_id
  left join Competencies c
    on s.competency_id  = c.id
) src
where rn = 1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/e2259/13)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T16:00:24.390

对于您添加到语句中的每个非聚合列，`SELECT`您需要更新您的`GROUP BY`以包含它。

本文[可能](http://www.sqlteam.com/article/how-to-use-group-by-in-sql-server)会帮助您了解原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T16:11:13.103

如果您使用的是 SQL Server，则可以使用 OUTER APPLY

```
SELECT *
FROM employees E
OUTER APPLY (
    SELECT TOP 1 *
    FROM skills
    WHERE employee_id = E.id
    ORDER BY created DESC
) S
INNER JOIN competencies C
    ON C.id = S.competency_id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T16:05:06.500

```
;WITH
MAX_SKILL_created AS
(
    SELECT
        MAX(skills.created) as created,
        skills.employee_id
    FROM
        skills
    GROUP BY
        skills.employee_id
),
MAX_SKILL_id AS
(
    SELECT
        MAX(skills.id) as id,
        skills.employee_id
    FROM
        skills
        INNER JOIN MAX_SKILL_created
            ON MAX_SKILL_created.employee_id = skills.employee_id
            AND MAX_SKILL_created.created = skills.created
    GROUP BY
        skills.employee_id
)
SELECT
    * -- type all your columns here
FROM
    employees
    INNER JOIN MAX_SKILL_id
        ON MAX_SKILL_id.employee_id = employees.employee_id
    INNER JOIN skills
        ON skills.id = MAX_SKILL_id.id
    INNER JOIN competencies
        ON competencies.id = skills.competency_id 
```

# ios - 相机预览未在横向中填充 iPad 屏幕

> ID：14608186
> 
> 赞同：0
> 
> 时间：2013-01-30T15:55:49.157
> 
> 标签：ios, ipad, ios6

我的应用程序仅适用于 iPad，并且仅支持横向视图。

我有一个`UIImagePickerController`加载相机。我使用以下代码进行了设置：

```
m_Pickercontroller=[[UIImagePickerController alloc] init ];
m_Pickercontroller.sourceType = UIImagePickerControllerSourceTypeCamera;
m_Pickercontroller.cameraCaptureMode = UIImagePickerControllerCameraCaptureModePhoto;
m_Pickercontroller.cameraDevice = UIImagePickerControllerCameraDeviceRear;
m_Pickercontroller.showsCameraControls = YES;
m_Pickercontroller.navigationBarHidden = YES;
m_Pickercontroller.toolbarHidden = YES;
m_Pickercontroller.wantsFullScreenLayout = YES;
m_Pickercontroller.allowsEditing=NO; 
```

它与`[self presentViewController:m_Pickercontroller animated:YES completion:nil];`我也尝试过模态并得到相同的结果。

这仅在第一次打开视图时发生。如果您重新打开相机或重新拍摄照片，它就会消失。

我还尝试`m_Pickercontroller`在加载之前和之后设置框架大小。

这是它的样子，黑色区域是空的，白色区域是相机预览。忽略白线覆盖，这是应用程序的一部分。 ![第一个相机打开时出现丑陋的黑条](../Images/33909a612ac6200d9a11dddaefdb0f1e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:39:06.967

好的，所以这没有任何意义，但造成这种情况的是动画：是的

我`[self presentViewController:m_Pickercontroller animated:YES completion:nil]` 改为`[self presentViewController:m_Pickercontroller animated:NO completion:nil]`

这个问题已经解决了。显然，iOS 在动画视图后不会调整相机预览的大小。

# ruby-on-rails - 使用数组创建链接

> ID：14608195
> 
> 赞同：2
> 
> 时间：2013-01-30T15:56:22.330
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我需要使用 href 格式化链接，例如 items/?category_id[]=1&category_id[]=2&category_id[]=3 这是用于方面搜索。

```
link_to "Super Categories", params.merge(category_id: [1,2,3]) 
```

但我无法达到预期的结果。方括号被编码为在 GET 请求中创建一个数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T16:10:24.073

如果您有以下看法

```
link_to "Super Categories", params.merge(category_id: [1,2,3]) 
```

查询字符串的`category_id`部分看起来像

```
?category_id%5B%5D=1&category_id%5B%5D=2&category_id%5B%5D=3 
```

这些编码括号没有问题；一旦 Rails 收到`GET`请求，`params[:category_id]`将再次成为`["1","2","3"]`. 您可以轻松地将其转换回整数值

```
params[:category_id].map(&:to_i) # [1,2,3] 
```

# java - 使用 java api 在 Elasticsearch 中创建索引和添加映射会导致缺少分析器错误

> ID：14608196
> 
> 赞同：2
> 
> 时间：2013-01-30T15:56:23.360
> 
> 标签：java, scala, elasticsearch

代码在 Scala 中。它与 Java 代码极为相似。

我们的地图索引器用于创建索引的代码：[https ://gist.github.com/a16e5946b67c​​6d12b2b8](https://gist.github.com/a16e5946b67c6d12b2b8)

上述代码用于创建索引和映射的实用程序：[https ://gist.github.com/4f88033204cd761abec0](https://gist.github.com/4f88033204cd761abec0)

java给出的错误：[https ://gist.github.com/d6c835233e2b606a7074](https://gist.github.com/d6c835233e2b606a7074)

[http://elasticsearch.domain/maps/_settings](http://elasticsearch.domain/maps/_settings)运行代码报错后的响应： [https ://gist.github.com/06ca7112ce1b01de3944](https://gist.github.com/06ca7112ce1b01de3944)

JSON 文件： [https ://gist.github.com/bbab15d699137f04ad87](https://gist.github.com/bbab15d699137f04ad87) [https://gist.github.com/73222e300be9fffd6380](https://gist.github.com/73222e300be9fffd6380)

附件是我正在加载的 json 文件。我已经确认它正在加载正确的 json 文件并将其作为字符串正确输出到 .loadFromSource 和 .setSource 中。

任何想法为什么即使它们在_settings中也找不到分析器？如果我通过 curl 运行这些 json 文件，它们可以正常工作并正确设置映射。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T18:01:54.270

我用来创建索引的代码（在这里找到：[Define custom ElasticSearch Analyzer using Java API](https://stackoverflow.com/questions/6275727/define-custom-elasticsearch-analyzer-using-java-api)）正在索引中创建设置，例如：

"index.settings.analysis.filter.my_snow.type: "stemmer","

它在设置路径中有设置。

我将索引代码更改为以下内容以解决此问题：

```
def createIndex(client: Client, indexName: String, indexFile: String) {
  //Create index
    client.admin().indices().prepareCreate(indexName)
    .setSource(Utils.loadFileAsString(indexFile))
    .execute()
    .actionGet()
} 
```

# asp.net-mvc-4 - 将 ASP.NET MVC 4 应用程序部署到私有暂存/预览

> ID：14608201
> 
> 赞同：1
> 
> 时间：2013-01-30T15:56:41.300
> 
> 标签：asp.net-mvc-4, web-deployment, staging, microsoft-web-deploy

我正在构建一个开始成形的 MVC4 应用程序，我想将它私下部署以用于暂存和预览目的。我希望只有少数人能够访问完整的应用程序。大多数应用程序是公共的，但也有一个需要用户登录的私人区域。

我正在寻找将这个应用程序私下部署到暂存/预览的最不干扰的方式。通过非侵入性，我的意思是我不想切换超过几行代码，最好只是 web.config 中的一个标志，以正常部署它而不是私下部署它。

我还希望此授权与站点现有的授权功能重叠。换句话说，当这个人访问我给他们的预览 URL 时，他们会被带到一个登陆页面，他们必须使用我也给他们的用户名/密码登录。一旦他们登录，如果应用程序处于生产状态，他们应该被带到实际的登录页面。但是，它们不应该登录到应用程序本身（这就是我所说的重叠）。这样，他们可以正常使用应用程序（注册，然后再次登录以访问应用程序的私人区域。）

我想在我的 web.config 中有一些类似的东西：

```
<StagingAccess deployPrivately ="true">
    <StagingUsers>
        <StagingUser>
            <UserName>JoeShmoe</UserName>
            <Password>Staging123</Password>
        </StagingUser>
    </StagingUsers>    
</StagingAccess> 
```

这样我就可以简单地切换`deployPrivately`，为选定的用户添加一个`StagingUser`节点，然后使用 Web Deploy 部署到我的主机。

有些步骤会很完美，因为我以前从未真正部署过 MVC 应用程序，更不用说像这样了。但我真的需要开始能够向人们展示应用程序，而无需暴露我的任何代码，也不需要远程桌面到我的机器，这使得应用程序看起来很滞后。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:44:52.297

如何组合`Authorization Rules`：[http://weblogs.asp.net/gurusakar/archive/2008/09/29/setting-authorization-rules-for-a-particular-page-or-folder-in-web-config。 aspx](http://weblogs.asp.net/gurusarkar/archive/2008/09/29/setting-authorization-rules-for-a-particular-page-or-folder-in-web-config.aspx) 和`Web.Config Transformations`? [http://msdn.microsoft.com/en-us/library/dd465326.aspx](http://msdn.microsoft.com/en-us/library/dd465326.aspx)

然后，您将使用 VS 发布应用程序并选择特定配置 - 我相信这可以帮助您实现目标。

# actionscript-3 - Flex DataGrid - 如何将单元格的显示值传递给 sortCompareFunction？

> ID：14608204
> 
> 赞同：1
> 
> 时间：2013-01-30T15:56:48.790
> 
> 标签：actionscript-3, apache-flex, flex4, flex3

我有一个 dataGrid，我在其中的列上使用 labelFunction。这会将 dataField 更改为不同的值。

我在同一列上有一个 sortCompareFunction。但是， sortCompareFunction 只使用底层数据项值。

我知道我可以在进行比较之前从 sortCompareFunction 中调用 labelFunction 来更改值，但我想要做的是：将显示的值从列传递给 sortCompareFunction。这可能吗。

下面的一些示例代码来表示问题（如果您复制并粘贴到新的 Flex 3 应用程序，则可以使用）

在图像中，值“AAAA”后面的数据是“The Wall”，所以它在排序时出现在中心，我想访问“AAAA”值： ![在此处输入图像描述](../Images/c3009cd12b229dacda95e5fc9e3e5829.png)

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="vertical"
                initialize="init()">
    <mx:Script>
        <![CDATA[
            import mx.collections.ArrayCollection;
            import mx.controls.dataGridClasses.DataGridColumn;
            import mx.utils.ObjectUtil;

            [Bindable]
            private var albums:ArrayCollection;

            private function init():void
            {
                var album:Object;
                albums = new ArrayCollection();

                album = new Object();
                album.name = "Who's Next";
                album.artist = "The Who";
                album.date = "Jul 31 1971";
                albums.addItem(album);

                album = new Object();
                album.name = "Exile on Main St.";
                album.artist = "The Rolling Stones";
                album.date = "May 12 1972";
                albums.addItem(album);

                album = new Object();
                album.name = "The Wall";
                album.artist = "Pink Floyd";
                album.date = "Dec 8 1979";
                albums.addItem(album);
            }

            private function nameLabelFunction(inData:Object, inColumn:DataGridColumn):String
            {
                if(inData.name == "The Wall")
                {
                    return "AAAA"
                }
                else
                    return inData.name;
            }

            private function nameSortCompare(obj1:Object, obj2:Object):int
            {
                return ObjectUtil.stringCompare(obj1["name"], obj2["name"], true);
            }

        ]]>
    </mx:Script>
    <mx:DataGrid width="400" height="600" dataProvider="{albums}">
        <mx:columns>
            <mx:DataGridColumn dataField="name" headerText="Name" width="125" 
                               labelFunction="nameLabelFunction"
                               sortCompareFunction="nameSortCompare"/>

            <mx:DataGridColumn dataField="artist" headerText="Artist" width="125" />

            <mx:DataGridColumn dataField="date" headerText="Date" width="100" />
        </mx:columns>
    </mx:DataGrid>
</mx:Application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:49:31.620

我们可以使用一个小技巧吗？

```
 private function nameLabelFunction(inData:Object, inColumn:DataGridColumn):String
        {
            if(inData.name == "The Wall")
            {
                inData.realLabel = 'AAAA';

                return "AAAA"
            }
            else
            {
                inData.realLabel = inData.name;

                return inData.name;
            }
        }

        private function nameSortCompare(obj1:Object, obj2:Object):int
        {
            return ObjectUtil.stringCompare(obj1["realLabel"], obj2["realLabel"], true);
        } 
```

![在此处输入图像描述](../Images/34ac8eb8115465f8b55a83aa774b8910.png)

**//编辑**

另一种使用 labelFunction 本身的方法

您可以使用函数来评估正在比较的值

假设 f 是类 Function 的对象，那么

```
f.call(dg.columns[0], obj1, dg.columns[0]) 
```

为您提供数据网格字段的实际标签。

```
//this function should not be changed
        private function nameLabelFunction(inData:Object, inColumn:DataGridColumn):String
        {
            if(inData.name == "The Wall")
                return "AAAA"
            else
                return inData.name;
        }

//the actual comparison looks now like this:
        private function nameSortCompare(obj1:Object, obj2:Object):int
        {
            var f:Function = (dg.columns[0] as DataGridColumn).labelFunction;

            return ObjectUtil.stringCompare(f.call(dg.columns[0], obj1, dg.columns[0]), f.call(dg.columns[0], obj2, dg.columns[0]), true);
        } 
```

# magento - 以编程方式创建发票时，发票日期为 GMT/UTC

> ID：14608206
> 
> 赞同：0
> 
> 时间：2013-01-30T15:57:01.170
> 
> 标签：magento, invoices

我们有一个每 4 小时生成一次发货的流程。只有运送的物品才应开具发票，因此发票创建是此过程的一部分。

此过程在加载 Magento 环境的外部 PHP 脚本中运行，然后处理挂单。

创建发票时，创建时间会关闭 4 小时，因此看起来它没有使用存储时间。我已经查看了 Magento 代码并搜索了网络，但是，我没有看到任何迹象表明您应该在创建发票时设置正确的存储时间。

在脚本顶部的时区到商店的时区 -

```
date_default_timezone_set('America/Boston'); 
```

基于订单商店 ID 的 magento 环境 -

```
//Start environment emulation of the specified store
$storeId = $order->getStoreId();
$initialEnvironmentInfo = $appEmulation->startEnvironmentEmulation($storeId); 
```

稍后，为订购该货物，创建发票 -

```
// create an invoice for the invoiceable items
$invoice = Mage::getModel('sales/service_order', $order)->prepareInvoice($toInvoice);

if (!$invoice->getTotalQty()) {
    Mage::throwException(Mage::helper('core')->__('Invoice generation failed - no items to invoice.'));
}

$invoice->setRequestedCaptureCase(Mage_Sales_Model_Order_Invoice::CAPTURE_ONLINE);
$invoice->register();

$transactionSave = Mage::getModel('core/resource_transaction')
    ->addObject($invoice)
    ->addObject($invoice->getOrder());
$transactionSave->save();

$invoiceID = $invoice->getIncrementId(); 
```

有什么建议应该做不同的事情吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T00:04:33.237

据我所知，Magento 中的所有日期都存储为 GMT。

检查此文件以获取在 Magento app/code/core/Mage/Core/Model/Date.php 中处理日期时对您有帮助的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-13T10:27:32.693

我从上面阅读了 inchoo 文章并得出结论：当您想要显示日期和时间时，只需使用 formatDate() 和 formatTime() 方法，不要担心其他任何事情。

# c# - IIS 机器密钥配置

> ID：14608208
> 
> 赞同：1
> 
> 时间：2013-01-30T15:57:07.920
> 
> 标签：c#, asp.net, .net, iis

我有一个最近部署到我们的 Web 服务器的 .Net Framework 4.5 Web 窗体应用程序。在我的本地开发环境中一切正常。从服务器运行时，在 IIS (7.5) 下，我在任何回发时收到以下错误：

> 视图状态 MAC 验证失败。如果此应用程序由 Web Farm 或集群托管，请确保配置指定相同的 validationKey 和验证算法。AutoGenerate 不能在集群中使用。

这是一个非常简单的应用程序，它基于 .net framework 4.5 的默认 Web 表单模板构建。没有网络农场。该站点旨在在 Intranet 上运行，因此安全性不是一个大问题。

两个问题：1）我找到了几个解决方案，但最有可能的是手动将机器密钥添加到我的 web.config 文件中（从 web 生成站点收到密钥）。这似乎不能解决问题。4.5框架有什么问题吗？

2）通过 IIS 客户端添加机器密钥给我以下错误：“无法写入配置文件”。我已授予网站文件夹的完全权限，并确保所有文件都不是只读的。这个问题的原因可能是什么？

非常感谢您的反馈！很多时间都被浪费了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:02:16.840

原来是网站文件夹中的权限问题。该文件夹位于 SAN 上。本地文件夹有效。

# rabbitmq - RabbitMQ 工作队列配置问题

> ID：14608211
> 
> 赞同：0
> 
> 时间：2013-01-30T15:57:14.077
> 
> 标签：rabbitmq, message-queue, amqp

我有两个关于 RabbitMQ 工作队列的问题：

1.  正如我从 RabbitMQ 教程中了解的那样，似乎如果我有一个基本的队列消费者客户端（只是一个基本的“Hello，World！”消费者），然后我为同一个队列添加了第二个消费者客户端，那么 RabbitMQ 将自动调度这两个队列之间的消息以循环方式进行。这是真的吗（不添加任何额外的配置）？

2.  我的消费者客户端被配置为一次只接收一条消息，使用`(GetResponse response = channel.basicGet("my_queue", false)`. 由于我一次只收到一条消息，是否仍然需要设置 prefetchCount ( `channel.basicQos(1)`) 以进行公平调度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T23:18:08.847

回答您的问题：

1.  是的
2.  不

但是，您的两个问题 1 和 2 不兼容。如果您使用的是消费者，它旨在将消息推送给它，而您不使用`Basic.Get`. 当您使用消费者时，您需要使用`Basic.QoS`来指定消费者一次只能“拥有”一条未确认的消息。RabbitMQ 不会推送超出 QoS 限制的额外消息。

您的替代方法是使用 从队列中“拉” `Basic.Get`，您将控制自己的命运，只要您一次运行多少条消息。

这有意义吗？

# c# - 使用 LINQ 查询 MS SQL 中的加密列

> ID：14608213
> 
> 赞同：1
> 
> 时间：2013-01-30T15:57:21.167
> 
> 标签：c#, sql, sql-server, linq, encryption

我需要加密我的 MS SQL 数据库中的一些列（名称、ssn ...），并且我一直在研究列加密，如一些站点所述​​，例如： [加密 SQL Server 中的列级数据](http://sqlsafety.blogspot.com/2010/10/encrypting-column-level-data-in-sql.html) 和 [SQL Server 加密简介和对称密钥加密教程](http://dotnetslackers.com/articles/sql/IntroductionToSQLServerEncryptionAndSymmetricKeyEncryptionTutorial.aspx)。

我已经能够在插入时使用触发器来加密列，并且可以使用以下方法在 SQL Studio 中解密该列：

```
OPEN SYMMETRIC KEY TestTableKey
DECRYPTION BY PASSWORD = 'Pa$$w0rd'
CONVERT(VARCHAR(50),DECRYPTBYKEY(EncryptSecondCol)) AS DecryptSecondCol
FROM TestTable 
```

但是如何从我的应用程序访问数据？我仍然希望能够搜索名称。我唯一能想到的是使用存储过程并将解密密码作为参数发送到 LINQ 语句中，这样存储过程就可以解密数据然后执行查询。

我在正确的轨道上吗？

我是新手，所以我欢迎其他有用的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:28:39.777

是的，我见过用于解密加密文本的存储过程。我还看到了加密文本的存储过程，我更喜欢触发器，因为我不喜欢触发器 - 请参阅[这些答案](https://stackoverflow.com/questions/460316/are-database-triggers-evil)。

但是，我更喜欢将加密逻辑放在我的应用程序层中——例如，使用[Enterprise Library Encryption Code](https://www.nuget.org/packages/EnterpriseLibrary.Security.Cryptography)。使用 Enterprise Library 控制台可以在配置文件中轻松加密密码短语和 salt。

在数据库中进行这项工作是否有特定的原因？如果您必须这样做，您可以使用 EL 来保护您的密码并将其传递到您编写的存储过程中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-22T17:59:44.817

如果您使用的是 MS SQL Server Enterprise 或 Developer 版本，则可以使用 TDE： [TDE](http://msdn.microsoft.com/en-us/library/cc278098.aspx)

# ios - 在 MKMapView 中渲染 mapLines 我的地图被冻结

> ID：14608218
> 
> 赞同：0
> 
> 时间：2013-01-30T15:57:47.980
> 
> 标签：ios, google-maps, mkmapview, mkannotation, mkannotationview

大家好我希望你能帮助我：

```
- (IBAction) addPoints: (id) sender
{
NSArray *latitudePoints;
NSArray *longitudePoints;
BOOL flag = NO;
@try
{
switch (lugar)
{
    case 0:
        break;

    case 1:
        latitudePoints = @[@27.781361, @27.777894, @27.766683, @27.757066, @27.745613, @27.737327, @27.728247, @27.720827, @27.720866, @27.719083, @27.722266, @27.721097, @27.739263, @27.758177, @27.780688];
        longitudePoints = @[@-15.714188, @-15.720175, @-15.726072, @-15.740874, @-15.746066, @-15.759544, @-15.763944, @-15.774408, @-15.764822, @-15.752658, @-15.735975, @-15.715497, @-15.718150, @-15.712244, @-15.713213];
        flag = YES;
        break;

    case 2:
        latitudePoints = @[@28.249792, @28.254583, @28.259865, @28.264000, @28.265621, @28.267694, @28.270308, @28.272192, @28.273966, @28.275698, @28.277723, @28.279901];
        longitudePoints = @[@-16.841880, @-16.842477, @-16.842657, @-16.844832, @-16.848396, @-16.851215, @-16.852329, @-16.856142, @-16.859281, @-16.860882, @-16.862011, @-16.863116];
        flag = YES;
        break;

    default:
        [NSException raise:@"Unknown place" format:@"Unknown place"];
        break;
}
// NSLog(@"Lugar %d Flag %d",lugar,flag);
if (flag && [longitudePoints count] == [latitudePoints count])
{
    anotacionesMapa *point; // anotacionesMapa is a custom MKAnnotation class, just have title, subtitle and coord atribute
    CLLocationCoordinate2D placePoint;
    NSMutableArray *pointList = [[NSMutableArray alloc] initWithCapacity:[longitudePoints count]];
    for (int c = 0; c < [longitudePoints count]; c++)
    {
        placePoint.latitude = [[latitudePoints objectAtIndex:c] doubleValue];
        placePoint.longitude = [[longitudePoints objectAtIndex:c] doubleValue];
        if (c % 2 == 0)
            point = [[anotacionesMapa alloc] initWithTitle:[NSString stringWithFormat:@"[Picture here] Nothing"]
                                                  subtitle:@""
                                             andCoordinate: placePoint];
        else
            point = [[anotacionesMapa alloc] initWithTitle:[NSString stringWithFormat:@"Something"]
                                                  subtitle:@"[Pic here] test"
                                             andCoordinate: placePoint];
        [self.mapView addAnnotation:point];
        CLLocation *linePoint = [[CLLocation alloc] initWithLatitude:placePoint.latitude longitude:placePoint.longitude];
        [pointList addObject: linePoint];
    }
    ruta = [[CSMapRouteLayerView alloc] initWithRoute:pointList
                                              mapView:self.mapView];
}
}
@catch (NSException *exception)
{
UIAlertView *alert;
alert = [[UIAlertView alloc] initWithTitle:@"Error..."
                                   message:[NSString stringWithFormat:@"%@", exception]
                                  delegate:self
                         cancelButtonTitle:@"Aceptar"
                         otherButtonTitles:nil];
[alert show];
}
} 
```

我有这个代码，然后我需要在存储纬度和经度的PuntosLT和PuntosLG的坐标之间打印线，但是当它应该打印线时（实际上，这些线以蓝色打印，我想以红色打印) MKMapView 被冻结，无法移动，无法缩放，我认为它会出现错误并绘制不在坐标中的其他线条，最后我的注释中的自定义图像再次是红色引脚，如默认和标题、副标题等信息不起作用。

谢谢。

编辑：方法/构造函数

```
-(id) initWithRoute:(NSArray*)routePoints mapView:(MKMapView*)mapView
{
self = [super initWithFrame:CGRectMake(0, 0, mapView.frame.size.width, mapView.frame.size.height)];
[self setBackgroundColor:[UIColor clearColor]];

[self setMapView:mapView];
[self setPoints:routePoints];

// determine the extents of the trip points that were passed in, and zoom in to that area. 
CLLocationDegrees maxLat = -90;
CLLocationDegrees maxLon = -180;
CLLocationDegrees minLat = 90;
CLLocationDegrees minLon = 180;

for(int idx = 0; idx < self.points.count; idx++)
{
    CLLocation* currentLocation = [self.points objectAtIndex:idx];
    if(currentLocation.coordinate.latitude > maxLat)
        maxLat = currentLocation.coordinate.latitude;
    if(currentLocation.coordinate.latitude < minLat)
        minLat = currentLocation.coordinate.latitude;
    if(currentLocation.coordinate.longitude > maxLon)
        maxLon = currentLocation.coordinate.longitude;
    if(currentLocation.coordinate.longitude < minLon)
        minLon = currentLocation.coordinate.longitude;
}

MKCoordinateRegion region;
region.center.latitude     = (maxLat + minLat) / 2;
region.center.longitude    = (maxLon + minLon) / 2;
region.span.latitudeDelta  = maxLat - minLat;
region.span.longitudeDelta = maxLon - minLon;

[self.mapView setRegion:region];
[self.mapView setDelegate:self];
[self.mapView addSubview:self];

return self;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:58:50.983

我修复了使用苹果 mapkit 中的一些新变量，我删除了 CSMapRouteLayerView 库。我补充说：

```
MKPolyline *routeLine;
MKPolylineView *routeLineView; 
```

在我的问题方法中添加行的这段代码：

```
- (IBAction) addPuntos: (id) sender
{
NSArray *puntosLt;
NSArray *puntosLg;
BOOL flag = NO;
@try
{
    switch (lugar)
    {
        case 0:
            break;

        case 1:
            puntosLt = @[@27.781361, @27.777894, @27.766683, @27.757066, @27.745613, @27.737327, @27.728247, @27.720827, @27.720866, @27.719083, @27.722266, @27.721097, @27.739263, @27.758177, @27.780688];
            puntosLg = @[@-15.714188, @-15.720175, @-15.726072, @-15.740874, @-15.746066, @-15.759544, @-15.763944, @-15.774408, @-15.764822, @-15.752658, @-15.735975, @-15.715497, @-15.718150, @-15.712244, @-15.713213];
            flag = YES;
            break;

        case 2:
            puntosLt = @[@28.249792, @28.254583, @28.259865, @28.264000, @28.265621, @28.267694, @28.270308, @28.272192, @28.273966, @28.275698, @28.277723, @28.279901];
            puntosLg = @[@-16.841880, @-16.842477, @-16.842657, @-16.844832, @-16.848396, @-16.851215, @-16.852329, @-16.856142, @-16.859281, @-16.860882, @-16.862011, @-16.863116];
            flag = YES;
            break;

        default:
            [NSException raise:@"Lugar desconocido" format:@"Lugar desconocido"];
            break;
    }
    // NSLog(@"Lugar %d Flag %d",lugar,flag);
    if (flag && [puntosLg count] == [puntosLt count])
    {
        anotacionesMapa *punto;
        CLLocationCoordinate2D lugarPunto;
        CLLocationCoordinate2D puntitos[[puntosLg count]];
        for (int c = 0; c < [puntosLg count]; c++)
        {
            lugarPunto.latitude = [[puntosLt objectAtIndex:c] doubleValue];
            lugarPunto.longitude = [[puntosLg objectAtIndex:c] doubleValue];
            punto = [[anotacionesMapa alloc] initWithTitle:[NSString stringWithFormat:@"[Foto barco] Sin avistamientos"]
                                                  subtitle:@""
                                             andCoordinate: lugarPunto];
            [self.mapView addAnnotation:punto];
            puntitos[c] = CLLocationCoordinate2DMake(lugarPunto.latitude, lugarPunto.longitude);
        }
        self.routeLine = [MKPolyline polylineWithCoordinates:puntitos count:[puntosLg count]];
        [self.mapView setVisibleMapRect: [self.routeLine boundingMapRect]];
        [self.mapView addOverlay: self.routeLine];
    }
}
@catch (NSException *exception)
{
    UIAlertView *alert;
    alert = [[UIAlertView alloc] initWithTitle:@"Error..."
                                       message:[NSString stringWithFormat:@"%@", exception]
                                      delegate:self
                             cancelButtonTitle:@"Aceptar"
                             otherButtonTitles:nil];
    [alert show];
}
} 
```

PD：我不会使用@try/@catch，这是我使用 MKMapView 的示例应用程序，所以我会将它们保留在这个迷你项目中，其余的我将遵循[http://developer.apple.com/library/ios/ #Documentation/Cocoa/Conceptual/ErrorHandlingCocoa/ErrorHandling/ErrorHandling.html](http://developer.apple.com/library/ios/#Documentation/Cocoa/Conceptual/ErrorHandlingCocoa/ErrorHandling/ErrorHandling.html)

谢谢。

# java - 我该怎么做？我不能使用 jUnit 等

> ID：14608220
> 
> 赞同：0
> 
> 时间：2013-01-30T15:57:51.897
> 
> 标签：java, mysql, spring, maven, junit

我正在使用具有数据库的 MySQL 进行 Spring Webflow 编程。

我有一些 Maven 在使用测试数据库而不是开发数据库的构建上运行的 jUnit 测试用例。我们有一个 diff 数据库，用于在 dev 中运行项目，然后是构建。

在运行我的项目之前，我需要在 dev 中设置一些测试数据。我在 maven 中使用 jUnit 作为包/测试的一部分，但问题是测试使用的是 diff xml 和数据库。你认为我可以如何让项目在运行之前删除 dev 中的一些删除。有谁知道任何用于 maven 的 MySQL 插件之前会运行一个脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T18:46:36.733

我想您是在询问如何在运行 Junit 测试之前设置数据库。如果是这样，我建议您查看[DBUnit](http://www.dbunit.org/)和（如另一个答案中所建议的）内存数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:49:54.993

我不完全确定您在问什么，但我认为您希望在运行测试时在数据库中提供某些数据，并且这些数据在不同的环境中是不同的。

鉴于您已经在使用 maven，我建议您为每个环境设置构建配置文件，这将允许您指定不同的数据库连接，实际上，如果您实现了诸如休眠之类的 ORM，您甚至可以删除数据库模式和数据在您的测试/开发环境中每次运行时重新创建。

此外，在您希望数据特定于您的测试运行并且数据不需要在测试范围之外持续存在的环境中，实现一个内存数据库，例如 HSQL，它可以根据需要使用数据作为种子，并且最后擦除，这将使您的开发环境更适合大量开发人员，并消除对物理数据库资源的需求。

# java - Maven Cargo Tomcat7 the server.xml is being over written

> ID：14608221
> 
> 赞同：0
> 
> 时间：2013-01-30T15:57:53.753
> 
> 标签：java, jakarta-ee, tomcat7, maven-3, maven-cargo

I'm trying to get our integration testing running with maven. It's deploying the catalina-base to the correct directory and running with catelina-home set as the local install of Tomcat7.

However the copy/configfile commands don't work for the server.xml. The tomcat-users.xml is being correctly copied but not the server.xml. Any idea why this would be happening? See the pom.xml below:

```
<plugin>
            <groupId>org.codehaus.cargo</groupId>
            <artifactId>cargo-maven2-plugin</artifactId>
            <configuration> 
                    <deployables>
                        <deployable>
                            <groupId>${project.groupId}</groupId>
                            <artifactId>${project.artifactId}</artifactId>
                            <type>war</type>
                        </deployable>
                    </deployables>      

                <container>
                    <containerId>tomcat7x</containerId>
                     <home>${catalina-home}</home>
                     <type>installed</type>

                </container>

                  <configuration>
                  <home>${project.build.directory}/catalina-base</home>
                  <type>standalone</type>

                        <files>
                            <copy>
                                <configfile>true</configfile>
                                <file>server.xml</file>
                                <tofile>conf/server.xml</tofile>
                                <overwrite>true</overwrite>
                            </copy>
                            <copy>
                                <configfile>true</configfile>
                                <file>tomcat-users.xml</file>
                                <tofile>conf/tomcat-users.xml</tofile>
                                <overwrite>true</overwrite>
                            </copy>
                        </files>

                  </configuration>
                </configuration>
            <executions>
                <execution>
                    <id>tomcat-run</id>
                    <phase>pre-integration-test</phase>
                    <goals>
                        <goal>start</goal>
                    </goals>
                </execution>
                <execution>
                    <id>tomcat-shutdown</id>
                    <phase>post-integration-test</phase>
                    <goals>
                        <goal>stop</goal>
                    </goals>
                </execution>
                </executions>
        </plugin> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-15T18:38:51.400

I've run into a simular issue. I've used `<configfiles>` instead of `<files>`, that did the trick.

See: [http://cargo.codehaus.org/Configuration+files+option](http://cargo.codehaus.org/Configuration+files+option)

# scala - Scala 方法定义命名参数与未命名参数

> ID：14608230
> 
> 赞同：2
> 
> 时间：2013-01-30T15:58:34.220
> 
> 标签：scala, methods, signature

我是 Scala 的新手，有时我会在方法签名上苦苦挣扎。让我们来看看这段代码，我对命名参数特别感兴趣，以便对它们进行进一步的操作。

```
def divide(xs: List[Int]): List[Int] = {
      val mid = xs.length/2
      (xs take mid, xs drop mid)
} 
```

在这里，我定义了名为“xs”的输入列表，我在很多网页上都看到过这个约定。但是在大学里，我们有另一种方法签名定义方法（我错过了名称，抱歉），其中我们没有命名输入参数，但会发生模式匹配：

```
 def mylength: List[Any] => Int = {
     case Nil   => 0
     case x::xs => mylength(xs)+1
   } 
```

在这种情况下，识别输入参数非常简单，因为只有一个参数。如何在上面显示的编码样式中使用与下面代码中相同的样式以及 2 个或更多输入参数？

```
 def myConcat(xs: List[Any], ys: List[Any]) = {
              xs ++ ys
   } 
```

对不起我的英语不好。我在谷歌上没有找到任何东西，因为我不知道要搜索什么术语......

编辑：我必须坚持一个界面。我举了另一个例子，你可以帮助我。myAppend1 和 myAppend2 的行为方式相同，将一个新元素放在列表的前面。

```
 def myAppend1(xs: List[Any], y: Any): List[Any] = {
        y :: xs
   } 
```

我的问题现在是我在 myAppend2 中输入的命名...

```
 def myAppend2: List[Any] => Any => List[Any] = {
           /* how can i do this here, when no names y/xs are given?*/
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T16:07:47.713

要使用具有 2 个或更多参数的相同样式，只需将参数视为两个元组：

```
 def myConcat: (List[Any], List[Any]) => List[Any] = { 
   case (Nil, Nil) => List()
   case (xs,ys) => ... 
 } 
```

让我们举个`myAppend`例子：

```
 def myAppend2: (List[Any], Any) => List[Any] = {
    case (xs, y) => y :: xs 
 } 
```

这具有（或多或少）与以下相同的签名：

```
def myAppend1(xs: List[Any], y: Any): List[Any] = {
    y :: xs
} 
```

用法：

```
scala> myAppend1(List(1,2,3), 4)
res3: List[Any] = List(4, 1, 2, 3)

scala> myAppend2(List(1,2,3), 4)
res4: List[Any] = List(4, 1, 2, 3) 
```

如果您有一个需要函数参数的高阶函数`(List[Any], Any) = List[Any]`，那么两者都可以工作并且（对于大多数实际目的）是等效的。

请注意，通过将其定义为

```
def myAppend3: List[Any] => Any => List[Any] = {
   xs => y => y::xs
} 
```

您将创建一个 curried 函数，它在 scala 中具有不同的签名（与您想要的不同）：

```
 myAppend3(List(1,2,3), 4) // won't compile
 myAppend3(List(1,2,3))(4) // need to do this 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T17:38:10.857

```
def myAppend2: List[Any] => Any => List[Any] = { xs => y => 
    y :: xs
} 
```

具有完整形式的函数文字语法：

```
def myAppend2: List[Any] => Any => List[Any] = {
    (xs: List[Any]) => {
        (y: Any) => {
            y :: xs
        }
    }
} 
```

# r - 在 r 中按组和在某些条件下的累积总和

> ID：14608231
> 
> 赞同：0
> 
> 时间：2013-01-30T15:58:34.373
> 
> 标签：r

在具有相同`m1`and的组中`n1`，我需要计算`x1` if`x1`的累积和不为 0 和`y1`if`y1`的累积和不为 0。任何帮助将不胜感激。

```
 d <- data.frame () 
    for ( m1 in 2: 3) { 
         for (n1 in 2: 3){ 
              for (x1 in 0: m1) { 
                   for (y1 in 0: n1) {                                                                                                         

                  d<-rbind(d, c(m1, n1, x1,y1)) 
    }}}} 
```

所以对于`m1=2`, `n1=2`, 的累计和`x1`应为 9, 的和`y1`为 9, 对于 `m1=2`, `n1=3`, 的累计和`x1`应为 12, 的和`y1`为 18.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:21:19.163

这是你想要的？（使用`data.table`）。而且我认为您想对所有元素求和，而不是累积求和并返回所有元素。

```
# after running your code, I had to rename it
names(d) <- c("m1", "n1", "x1", "y1")
require(data.table)
dt <- data.table(d)
setkey(dt, m1, n1)
out <- dt[, list(s.x1=sum(x1), x.y1=sum(y1)),by="m1,n1"]
> out
#    m1 n1 s.x1 x.y1
# 1:  2  2    9    9
# 2:  2  3   12   18
# 3:  3  2   18   12
# 4:  3  3   24   24 
```

# session - 使用会话范围的 bean 将会话到期与 Spring 中的“强制”注销区分开来

> ID：14608234
> 
> 赞同：0
> 
> 时间：2013-01-30T15:58:42.693
> 
> 标签：session, spring-mvc

我正在尝试处理会话过期只是为了记录 porpouse。

我已经阅读了有关[DestructionAwareBeanPostProcessor](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/beans/factory/config/DestructionAwareBeanPostProcessor.html)的信息，但它似乎没有被调用。所以我试图为bean实现一个destroy方法，这就是所谓的。

这种方法的问题是我无法区分 bean 何时因会话到期或“强制”注销而被销毁。

我试图实现一个 HttpSessionListener 但我无法访问会话 bean..

有什么帮助或建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T05:48:54.657

嗨@Enrichman，您可以执行以下操作：

```
public class HttpSessionRenew implements HttpSessionListener {
   SimpleDateFormat f = new SimpleDateFormat("dd/MM/yyyy HH:mm:ss");

   public HttpSessionRenew() {
        super();
   }

   public void sessionCreated(HttpSessionEvent event) {
        HttpSession session = event.getSession();
        System.out.println("TIME: " + session.getMaxInactiveInterval());
        System.out.println("ID Session "+session.getId()+" create "+session.getCreationTime());
   }

   public void sessionDestroyed(HttpSessionEvent event) {
        HttpSession session = event.getSession();

        // print out the session id
        if(session != null) {
           System.out.println( "Session Id: " + session.getId() );
           synchronized(session) {
              // invalidating a session destroys it
              session.invalidate();
              System.out.println("DESTROYD SESSION");
           }
        }
        System.out.println("ID Session "+session.getId()+" destroyd "+ f.format(new Date()));
   }
 } 
```

web.xml

```
 <listener>
     <listener-class>your.fully.qualified.name.HttpSessionRenew</listener-class>
 </listener>

 <!-- CONFIGURATION TIME -->
 <session-config>
     <session-timeout>30</session-timeout>
 </session-config> 
```

**我希望能帮助你:)**

# java - JavaCv比较2个直方图

> ID：14608238
> 
> 赞同：4
> 
> 时间：2013-01-30T15:58:51.290
> 
> 标签：java, opencv, computer-vision, javacv, javacpp

我正在尝试比较灰度图像中的两个直方图。我正在使用 CV_COMP_CHISQR（0.0 完美匹配 - 1.0 完全不匹配）。我将两个直方图都归一化为 1。但是当我比较直方图时，我得到的结果超过 40.0，这是没有意义的。我不知道是否可能我错过了一些步骤或者可能有什么问题。这是代码的快照。

```
public class Histogram {     
    public static void main(String[] args) throws Exception {

    String baseFilename = ".../imgs/lp.jpg";
    String contrastFilename = ".../imgs/lpUrb.jpg";c/surf_javacv/box_in_scene.png";

    IplImage baseImage = cvLoadImage(baseFilename);
    CvHistogram hist=getHueHistogram(baseImage);

    IplImage contrastImage = cvLoadImage(contrastFilename);
   CvHistogram hist1=getHueHistogram(contrastImage);

   double matchValue=cvCompareHist(hist, hist1, CV_COMP_CHISQR );
   System.out.println(matchValue);
  }

private static CvHistogram getHueHistogram(IplImage image){
if(image==null || image.nChannels()<1) new Exception("Error!");

IplImage greyImage= cvCreateImage(image.cvSize(), image.depth(), 1);    
cvCvtColor(image, greyImage, CV_RGB2GRAY);   

//bins and value-range
int numberOfBins=256;
float minRange= 0f;
float maxRange= 255f;
// Allocate histogram object
int dims = 1;
int[]sizes = new int[]{numberOfBins};
int histType = CV_HIST_ARRAY;
float[] minMax = new  float[]{minRange, maxRange};
float[][] ranges = new float[][]{minMax};
int uniform = 1;
CvHistogram hist = cvCreateHist(dims, sizes, histType, ranges, uniform);
// Compute histogram
int accumulate = 0;
IplImage mask = null;
IplImage[] aux = new IplImage[]{greyImage};

cvCalcHist(aux,hist, accumulate, null);
cvNormalizeHist(hist, 1);

cvGetMinMaxHistValue(hist, minMax, minMax, sizes, sizes);
System.out.println("Min="+minMax[0]); //Less than 0.01
System.out.println("Max="+minMax[1]); //255
return hist;
}
}//CLass end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:58:00.690

来自“Learnig OpenCV”一书：

“对于卡方来说，低分表示比高分更好的匹配。完美匹配为 0，完全不匹配是无界的（取决于直方图的大小）。”

如果您需要将结果放在 [0,1] 段中，请使用 method = CV_COMP_INTERSECT，其中高分表示匹配良好，低分表示匹配差。如果两个直方图都归一化为 1，则完全匹配为 1，完全不匹配为 0。

# python - python iterating through multiple lists and returning a random.choice

> ID：14608239
> 
> 赞同：0
> 
> 时间：2013-01-30T15:58:52.947
> 
> 标签：python, python-3.x

```
import random
def iterate_thru_list():
   i = 0  
   L1 = [1,2,3,4,5,6,7,8,9]
   L2=['a','b','c','d','e','f','g','h','i']
   L3= ['A','B','C','D','E','F','G','H','I']
   random.shuffle(L1)
   random.shuffle(L2)
   random.shuffle(L3)

   print ("List:")
   while i <= 5:
      for x, y, z in [(x,y,z) for x in L1 for y in L2 for z in L3]:
         print(x,y,z)
   i = i + 1 
```

I want to iterate through separate lists returning a randomly chosen digit or letter from each and return a 'set' in this case of three unique letters or numbers. Caution the while loop does not work - this loops until it has returned all combinations, which I do not understand either. Can I use random.choice(L1 or L2 or L3) to return x,y and z? Is there another simpler way to return a random selection from multiple lists? THank you for your help

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T16:06:46.357

Something like?

```
L1 = [1,2,3,4,5,6,7,8,9]
L2 = ['a','b','c','d','e','f','g','h','i']
L3 = ['A','B','C','D','E','F','G','H','I']

from random import choice

for i in range(5):
    print list(map(choice, (L1, L2, L3)))

[4, 'h', 'A']
[7, 'b', 'G']
[3, 'c', 'C']
[6, 'f', 'H']
[5, 'b', 'A'] 
```

# android - 为android交叉编译librtmp

> ID：14608240
> 
> 赞同：6
> 
> 时间：2013-01-30T15:58:55.623
> 
> 标签：android, ffmpeg

有没有人为Android平台成功交叉编译librtmp？我知道 rtmpdump android 下载包含 librtmp.so，但我认为我也需要 librtmp.a（我正在尝试交叉编译具有 librtmp 支持的 ffmpeg）。

有人对此有任何运气吗？它让我发疯......

塔

担

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:01:39.500

看看这里[http://stream-recorder.com/forum/rtmpdump-build-android-t13466.html](http://stream-recorder.com/forum/rtmpdump-build-android-t13466.html) 我已经在我的github上放了一个howto [https://github.com/S74ck3r/rtmpdump/blob/主/自述文件-howto-build.txt](https://github.com/S74ck3r/rtmpdump/blob/master/readme-howto-build.txt)

希望对理查德有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-04T19:35:24.650

[我* 刚刚使用Guardian Project 的 OpenSSL repo](https://github.com/guardianproject/openssl-android)成功构建了适用于 Android 的 librtmp 。我[在这里](https://github.com/OnlyInAmerica/FFmpeg-Android)记录了我的步骤以及保留的构建脚本。

简而言之，按照 GuardianProject 的指示构建 OpenSSL，然后运行以下脚本`rtmpdump/librtmp`：

```
#build_librtmp_for_android.sh
NDK=/path/to/android-ndk-r9c
SYSROOT=$NDK/platforms/android-19/arch-arm/
TOOLCHAIN=$NDK/toolchains/arm-linux-androideabi-4.8/prebuilt/darwin-x86_64
OPENSSL_DIR=/path/to/openssl-android/
# Note: Change the above variables for your system. Also ensure you've built openssl-android
function build_one
{
    set -e
    make clean
    ln -s ${SYSROOT}usr/lib/crtbegin_so.o
    ln -s ${SYSROOT}usr/lib/crtend_so.o
    export XLDFLAGS="$ADDI_LDFLAGS -L${OPENSSL_DIR}libs/armeabi -L${SYSROOT}usr/lib "
    export CROSS_COMPILE=$TOOLCHAIN/bin/arm-linux-androideabi-
    export XCFLAGS="${ADDI_CFLAGS} -I${OPENSSL_DIR}include -isysroot ${SYSROOT}"
    export INC="-I${SYSROOT}"
    make prefix=\"${PREFIX}\" OPT= install
}
CPU=arm
PREFIX=$(pwd)/android/$CPU 
ADDI_CFLAGS="-marm"
build_one 
```

*在我的好朋友[Chris](https://stackoverflow.com/users/805882/chris-ballinger)的大力帮助下。

# mysql - 带有条件语句的 MySQL 查询？

> ID：14608245
> 
> 赞同：1
> 
> 时间：2013-01-30T15:59:05.407
> 
> 标签：mysql

我有一个连接两个表的 MySQL 查询。这是当前的查询结果：

```
id | login | privacy-weight | requires
--------------------------------------------
0  | user  | 1              | NULL
0  | user2 | 1              | NULL
0  | user3 | 1              | privacy-weight 
```

查询本身并不重要，因为我只想像`WHERE`现在一样向查询添加条件。

我只需要获取（用我自己的话）的值：

```
IF (`requires` = 'privacy-weight'), then `privacy-weight` must equal = 0; 
```

这意味着，我需要这个条件：

```
WHERE `privacy-weight` = 0 
```

但只有当这是真的：

```
requires = 'privacy-weight' 
```

这可以做到吗？

**编辑**

显然这太难理解了，因此，一个示例输出：

```
privacy-weight | requires
-------------------------
0              | NULL
1              | NULL
0              | privacy-weight
1              | NULL 
```

这些将被忽略（不获取）：

```
privacy-weight | requires
-------------------------
1              | privacy-weight 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T16:05:24.023

你可以使用这个简单的测试：

```
WHERE (requires = 'privacy-weight' AND privacy-weight = 0) OR requires <> 'privacy-weight' OR requires IS NULL 
```

第一部分`(requires = 'privacy-weight' AND privacy-weight = 0)`防止输出：

```
privacy-weight | requires
-------------------------
1              | privacy-weight 
```

但保留：

```
privacy-weight | requires
-------------------------
0              | privacy-weight 
```

而第二部分`OR requires <> 'privacy-weight' OR requires IS NULL`将保留以下内容：

```
privacy-weight | requires
-------------------------
0              | NULL
1              | NULL
1              | NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T16:02:27.847

我认为这应该有效：

```
SELECT id, login, ( IF(requires='privacy-weight',0,privacy-weight) ) AS privacy-weight, requires
FROM [mytable]
WHERE [mywhereclause] 
```

有关 IF 函数如何在 MySQL 中工作的更多信息，请参阅[http://dev.mysql.com/doc/refman/5.5/en/if.html上的文档](http://dev.mysql.com/doc/refman/5.5/en/if.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T16:03:37.940

```
WHERE CASE WHEN requires = 'privacy-weight' THEN 0 ELSE privacy-weight END = 0 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T16:17:25.620

简单地：

```
WHERE NOT (requires='privacy-weight' AND privacy-weight<>0) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T16:04:55.643

正如@philwinkle 发布的那样，mysql 中有一个`IF()`函数，但它会更改列的值，但不会影响行。您想将此添加到您的 WHERE 语句中。

```
SELECT id, login, `privacy-weight`, requires FROM yourtable 
  WHERE `privacy-weight`=0 AND requires='privacy-weight' 
```

**编辑**我已将其改回以按书面方式回答 OP 的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-30T16:07:04.300

您可以在 where 子句中执行 if 条件

```
SELECT *
FROM mytable
WHERE IF(requires = 'privacy-weight',privacy-weight = 0,1); 
```

但是你可以实现它，如果你也提到你只需要

```
SELECT *
FROM mytable
WHERE requires = 'privacy-weight'
    AND privacy - weight = 0; 
```

# jquery - JQuery Accordion - 在按钮上方展开

> ID：14608249
> 
> 赞同：0
> 
> 时间：2013-01-30T15:59:14.687
> 
> 标签：jquery, dialog, accordion, expand

过去我问过当用户想要打开和关闭手风琴时如何打开和关闭手风琴。这是解决问题的示例：

[http://jsfiddle.net/JoshuaWaheed/JhndX/](http://jsfiddle.net/JoshuaWaheed/JhndX/)

```
<!DOCTYPE html>

<html>
<!--* Created using jsbin.com by roXon 29/10/2012
* Source can be edited via http://jsbin.com/uleloy/2/edit
* -->
<head>
<meta charset="utf-8" />
<title>JS Bin</title>
<style id="jsbin-css">
        *{margin:0;padding:0;}
    .accordion h3{ background:#eee; padding:10px; }
    .accordion div{ background:#999;   }
</style>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
</head>

<body>
<div class="accordion">
    <h3>Title 1</h3>
    <div>Content 1...</div>
    <h3>Title 2</h3>
    <div>Content 2...</div>  
    <h3>Title 3</h3>
    <div>Content 3...</div>  
    <h3>Title 4</h3>
    <div>Content 4...</div>  
</div>

<script>
    var $accordionIO = $('.accordion h3');
    $accordionIO.next('div').hide();

    $accordionIO.click(function(){
        $(this).next('div').slideToggle();
    });
</script> 
```

我现在想知道，是否有可能在按钮上方向上扩展的部分，而不是在按钮下方打开并垂直向下扩展的正常部分？

# llvm - 如何找到类型的大小？

> ID：14608250
> 
> 赞同：26
> 
> 时间：2013-01-30T15:59:16.883
> 
> 标签：llvm

我手里拿着一个`Type*`。我如何找出它的大小（这种类型的大小对象将在内存中占用）以位/字节为单位？我看到各种允许我获得“原始”或“标量”大小的方法，但这对聚合类型没有帮助......

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-30T15:59:16.883

大小取决于目标（出于多种原因，对齐是其中之一）。

在 LLVM 3.2 及更高版本中，您需要使用[DataLayout](http://llvm.org/docs/doxygen/html/classllvm_1_1DataLayout.html)，尤其是它的`getTypeAllocSize`方法。这将返回以字节为单位的大小，还有一个名为`getTypeAllocSizeInBits`. `DataLayout`可以通过从当前模块创建实例来获取实例：`DataLayout* TD = new DataLayout(M)`.

对于 LLVM 至 3.1 版（包括），使用`TargetData`而不是`DataLayout`. 但是，它公开了相同的`getTypeAllocSize`方法。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2015-06-14T14:18:57.270

如果您*只*需要大小，因为您将其插入到 IR 中（例如，因此您可以将其发送到调用`malloc()`），您可以使用该`getelementptr`指令来完成脏工作（带有一点铸造），如此[处所述](http://nondot.org/sabre/LLVMNotes/SizeOf-OffsetOf-VariableSizedStructs.txt)（使用更新现代 LLVM）：

> 尽管 LLVM 不包含特殊用途`sizeof`/`offsetof`指令，但该 `getelementptr`指令可用于评估这些值。基本思想是使用`getelementptr`from`null`指针来计算所需的值。因为`getelementptr`将值作为指针生成，所以在使用前将结果转换为整数。
> 
> 例如，要获取某种类型的大小`%T`，我们将使用如下内容：
> 
> ```
> %Size = getelementptr %T* null, i32 1
> %SizeI = ptrtoint %T* %Size to i32 
> ```
> 
> 这段代码有效地假装有一个`T`元素数组，从`null`指针开始。这将获得指向`T`数组中第二个元素（元素#1）的指针并将其视为整数。这会计算一个`T`元素的大小。

这样做的好处是它在您不关心值是什么的情况下很有用；您只需要将正确的值从 IR 传递给某物。`sizeof()`到目前为止，这是我在 IR 生成中需要类似操作的最常见情况。

* * *

该页面还继续描述如何进行`offsetof()`等效操作：

> 为了获得结构中某些字段的偏移量，使用了类似的技巧。例如，要获取`{ i8, i32* }` （取决于指针的目标对齐要求）的第二个元素（元素#1）的地址，应该使用如下内容：
> 
> ```
> %Offset = getelementptr {i8,i32*}* null, i32 0, i32 1
> %OffsetI = ptrtoint i32** %Offset to i32 
> ```
> 
> 这与技巧的工作方式相同`sizeof`：我们假装在指针上有一个类型的实例`null`并获取我们感兴趣的字段的地址。这个地址是该字段的偏移量。
> 
> 请注意，在这两种情况下，表达式将在代码生成时被评估为常量，因此使用此技术没有运行时开销。

IR 优化器还将这些值转换为常量。

# asp.net - 正则表达式允许等号两边的字母数字字符？

> ID：14608255
> 
> 赞同：-3
> 
> 时间：2013-01-30T15:59:28.250
> 
> 标签：asp.net, regex, validation

我需要一个正则表达式来验证在 asp.net 文本框中输入的文本是否具有以下格式

```
A-za-z123456789  /s = /s  A-za-z123456789 
```

正则表达式解释：

*   一个或多个字母数字字符
*   后跟任意数量的空格
*   等号
*   后跟任意数量的空格
*   一个或多个字母数字字符

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T16:03:24.950

```
[a-zA-Z0-9]*\s*\=\s*[a-zA-Z0-9]* 
```

如果您想要一个或多个而不是“任何”（包括零），请将 * 替换为 +

考虑到您对每边需要一个或多个字母数字字符的评论的回答：

```
[a-zA-Z0-9]+\s*\=\s*[a-zA-Z0-9]+ 
```

仅当“=”的每一侧至少有一个字母数字字符时，此版本才会匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T16:13:01.890

如果零有效

```
"^[a-zA-Z\\d]+\\s*=\\s*[a-zA-Z\\d]+$" 
```

如果零无效

```
"^[a-zA-Z1-9]+\\s*=\\s*[a-zA-Z1-9]+$" 
```

# javascript - 在 ng-view 之外更新 HTML 元素

> ID：14608258
> 
> 赞同：12
> 
> 时间：2013-01-30T15:59:40.863
> 
> 标签：javascript, angularjs

我在页面上有以下 HTML：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" ng-app="myCart">
<head>
    <title>AngularJS Shopping Cart</title>
    <link href="css/jsonstore.css" rel="stylesheet" />
</head>
<body>
    <div id="container">
        <div id="header">
            <h1>The JSON Store</h1>
            <div class="cart-info">
                My Cart (<span class="cart-items">{{item.basketCount}}</span> items)
            </div>
        </div>
        <div id="main" ng-view>
        </div>
    </div>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.4/angular.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.4/angular-resource.js"></script>
    <script src="js/routing.js"></script>
    <script src="js/dataresource.js"></script>
    <script src="js/basketinfo.js"></script>
    <script src="js/index.js"></script>
    <script src="js/detail.js"></script>
</body>
</html> 
```

div“main”被我的路由替换为 HTML 模板，但是我想用购物篮计数更新标题部分。

我已经尝试了模型绑定它，如 HTML 和下面所示：

```
function DetailController($scope, item, basketDetail) {
    $scope.item = item;
    $scope.item.basketCount = basketDetail.getCount();

    //more code
} 
```

我也尝试过注入服务并从 HTML 中调用它。两种方式都不做任何事情。

有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-31T05:30:30.747

您的`header`div 确实是一个视图，就像您为使用 ng-view 定义的其他视图一样。有一天，您可能希望在该标题视图中显示的不仅仅是一个 basketCount 模型。但是，您甚至将一个模型数据投影到该标题部分这一事实使该部分成为一个视图。所以，我建议给它自己的 $scope 来投影该模型，因此它有自己的控制器。

那么剩下的就是将 basketCount 模型放在哪里？而且我们必须考虑到多个视图可能允许用户做一些需要影响该模型的事情。Angular 对“许多需要访问”的正常回答是依赖注入。因此，我会将 basketCount 模型放入服务中。需要访问它的视图/控制器可以注入它。有一天，您的应用程序可能具有不需要访问这些模型的其他视图，因此这些视图不会注入服务。

潜在地，整个篮子可以在此服务中建模：

```
app.factory('basketService', function() {
   return {
     items: [],
     itemCount: 0,
     ...
   }
});

function HeaderCtrl($scope, basketService) {
   $scope.basket = basketService;
   ...
}

function DetailCtrl($scope, basketService) {
   $scope.basket = basketService;
   ...
}

<div id="header" ng-controller="HeaderCtrl">
   <h1>The JSON Store</h1>
   <div class="cart-info">
        My Cart (<span class="cart-items">{{basket.itemCount}}</span> items)
   </div> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T16:06:19.117

你需要注入 $rootScope，然后更新它：

```
function DetailController($scope, $rootScope, basketDetail) {
    $rootScope.item = $rootScope.item || {};
    $rootScope.item.basketCount = basketDetail.getCount();

    //more code
} 
```

有很多方法可以做到这一点，但这是我的第一个建议，因为它可能是最简单的。

* * *

**编辑：根据您的要求，其他方法可以做到这一点......**

您可以使用 $parent 推送到您的父范围。好处是它非常快速和干净......缺点是它有点草率，因为你的一个控制器在某种程度上假设它的父级是什么（但这仍然不可怕，真的）：

```
 {{item.basketCount}}
   <div ng-controller="InnerCtrl">
   </div>

function InnerCtrl($scope, basketDetail) {
   $scope.$parent.item = $scope.$parent.item || {};
   $scope.$parent.item.basketCount = basketDetail.getCount();
} 
```

然后是上面提到的方法@asgoth，您可以在其中使用嵌套控制器和父范围上的方法来更新父范围。有效，但就像我在“其他方法”部分中的其他解决方案一样，它依赖于对控制器容器的假设，它还依赖于您创建一个额外的控制器。

最后，您可以创建一个服务。现在服务通常不以这种方式使用，但您可以以这种方式使用一种.. 您可以在哪里获取您的 basketDetail 服务，并使用它来来回传递值。像这样：

```
app.factory('basketDetail', function() {
   return {
      items: { basketCount: 0 },
      getCount: function() {
          //return something here
          return 123;
      }
   }
});

function FooCtrl($scope, basketDetail) {
   $scope.items = basketDetail.items;
   $scope.items.basketCount = basketDetail.getCount();
}

function BarCtrl($scope, basketDetail) {
   $scope.items = basketDetail.items;
}

<div ng-controller="FooCtrl">
  {{items.basketCount}}
</div>
<div ng-controller="BarCtrl">
  {{items.basketCount}}
</div> 
```

之所以可行，是因为两个控制器中的 $scope 都保留了对同一对象的引用，该对象由您的 basketDetail 服务维护。但同样，这并不是真正推荐的方式。

所有这一切都表明：**$rootScope，IMO 很可能是您正在寻找的东西。**

*   它不需要创建额外的控制器。
*   它不需要创建任何额外的函数引用。
*   不会导致创建任何额外的父/子范围嵌套和后续监视。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T18:06:45.303

没有真正的需要`$rootScope`。创建一个父控制器（例如`RootController`），其范围内有一个函数。子作用域将自动继承它：

```
<div id="container" ng-controller="RootController">
...

function RootController($scope) {
   $scope.item = {};

   $scope.setBasketCount = function (detail) {
      $scope.item.basketCount = detail.getCount();
   }
} 
```

在您的详细控制器中，您只需使用以下`setBasketCount()`功能：

```
function DetailController($scope, item, basketDetail) {
    $scope.item = item;
    $scope.setBasketCount(basketDetail);

    //more code
} 
```

# css - CSS改变列表样式的颜色

> ID：14608260
> 
> 赞同：0
> 
> 时间：2013-01-30T15:59:43.410
> 
> 标签：css, list

你好，这可能是一个简单的修复。所以我每个人都有几个`<ul>`15+ `<li>`..

我的一些html。

```
<ul>
  <li><span>Government Gazette, No. 32320 of 12 June 2009\. Forestry Sector Charter. s.l.:s.n.</span></li>
  <li><span>Government Gazette, No. 34267 of 10 May 2011\. Charted Accountancy Sector Charter. s.l.:s.n.</li>
  <li><span>Government Gazette, No. 35400 of 1 June 2012\. Property Sector Charter. s.l.:s.n.</li>
  <li><span>Government Gazette, No. 35423 of 06 June 2012\. Information Technology and Telecommunication Sector Charter. s.l.:s.n.</span></li>
  <li><span>Government Gazette, No. 35754 of 5 October 2012\. Revised Broad-Based Black Economic Empowerment Codes of Good Practice and B-BBEE Technical Assitance Guideline. s.l.:s.n.</span></li>
  <li><span>Government Gazette, No. 35907 of 23 November 2012\. Broad-Based Black Economic Empowerment Amendment Bill. s.l.:s.n.</li>
  <li><span>Government Gazette, No. 35914 of 26 November 2012\. Financial Services Sector Charter. s.l.:s.n.</span></li>
  <li><span>Government Gazette, No. 53 of 2003\. Broad-Based Black Economic Empowerment Act. s.l.:s.n.</span></li>      
</ul> 
```

我不得不缩短它。

我的CSS：

```
 #bee_wwwh_box ul{
list-style-type:upper-roman;
margin-bottom: 10px;
margin-top: 15px;
margin-left: 30px;
margin-right: 450px;
 }
 #wwwh_box li{
font-size: 18px;
    color: #16a6b6;
letter-spacing: 1px;
margin-bottom: 10px;
margin-top: 15px;
margin-left: 30px;
margin-right: 30px;
 }
 #wwwh_box li span {
color: #41413e;
 } 
```

如您所见，我已将所有文本都包含在内`<span>`，然后尝试仅更改罗马符号的颜色，以便人们可以清楚地看到有项目列表的位置。只有它改变了整个列表文本？？我不能对它做出正面或反面？

难道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T16:07:20.710

它有效，您缺少一些结束`<span>`标签

HTML：

```
<div id="wwwh_box">
    <ul>
        <li><span>Government Gazette, No. 32320 of 12 June 2009\. Forestry Sector Charter. s.l.:s.n.</span></li>
        <li><span>Government Gazette, No. 34267 of 10 May 2011\. Charted Accountancy Sector Charter. s.l.:s.n.</span></li>
        <li><span>Government Gazette, No. 35400 of 1 June 2012\. Property Sector Charter. s.l.:s.n.</span></li>
        <li><span>Government Gazette, No. 35423 of 06 June 2012\. Information Technology and Telecommunication Sector Charter. s.l.:s.n.</span></li>
        <li><span>Government Gazette, No. 35754 of 5 October 2012\. Revised Broad-Based Black Economic Empowerment Codes of Good Practice and B-BBEE Technical Assitance Guideline. s.l.:s.n.</span></li>
        <li><span>Government Gazette, No. 35907 of 23 November 2012\. Broad-Based Black Economic Empowerment Amendment Bill. s.l.:s.n.</span></li>
        <li><span>Government Gazette, No. 35914 of 26 November 2012\. Financial Services Sector Charter. s.l.:s.n.</span></li>
        <li><span>Government Gazette, No. 53 of 2003\. Broad-Based Black Economic Empowerment Act. s.l.:s.n.</span></li>
    </ul>
</div> 
```

CSS：

```
#bee_wwwh_box ul {

    margin-bottom: 10px;
    margin-top: 15px;
    margin-left: 30px;
    margin-right: 450px;
}
#wwwh_box li {
    list-style-type:upper-roman;
    font-size: 18px;
    color: #16a6b6;
    letter-spacing: 1px;
    margin-bottom: 10px;
    margin-top: 15px;
    margin-left: 30px;
    margin-right: 30px;
}
#wwwh_box li span {
    color: #41413e;
} 
```

[http://jsfiddle.net/xaKsU/](http://jsfiddle.net/xaKsU/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T16:03:45.513

`</span>`您对某些元素没有关闭。您打开了它们，但没有关闭它们。可能是个问题...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T16:07:41.383

首先，您的`<span>`标签没有关闭。

如果这不能解决您的问题，您可以尝试其他一些方法。一种选择是使用图像代替列表项目符号（参见['list-item-image'](http://www.w3.org/TR/CSS21/generate.html#propdef-list-style-image)）：

```
li { list-style-image: url(images/yourimage.jpg); } 
```

另一种可能性是使用`li:before`选择器，尽管这不适用于旧版本的 IE。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <style type="text/css">
    li {
      list-style: none;
    }

    li:before {
      /* For a round bullet */
      content:'\2022';
      /* For a square bullet */
      /*content:'\25A0';*/
      display: block;
      position: relative;
      max-width: 0px;
      max-height: 0px;
      left: -10px;
      top: -0px;
      color: green;
      font-size: 20px;
    }
  </style>
</head>

<body>
  <ul>
    <li>foo</li>
    <li>bar</li>
  </ul>
</body>
</html> 
```

有关这两种方法的更多信息，请参阅[此问题。](https://stackoverflow.com/questions/1470214/change-bullets-color-in-a-list-without-span)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T16:05:18.670

我认为是因为您的某些 SPAN 标签尚未关闭？你有他们的开始标签，但有些没有结束标签。

# seo - 如何使用 schema.org 标记不同的产品尺寸？

> ID：14608262
> 
> 赞同：2
> 
> 时间：2013-01-30T15:59:48.677
> 
> 标签：seo, schema.org, microformats

产品页面为每种产品提供两种尺寸。例如 1 升可口可乐和 0.5 升可口可乐。上面是产品名称“可口可乐”，下面是“可口可乐”描述。是否可以将两种尺寸都插入到 schema.org 标记中，还是我必须选择一种产品尺寸而忽略其他尺寸/价格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:50:54.837

我假设您指的是[事物 > 产品](http://schema.org/Product)

产品定义为：

> 任何可供出售的东西——例如，一双鞋、一张音乐会门票或一辆车。

在电子商务世界*中，任何可供出售*的东西都称为 SKU（库存单位），而产品**通常**是 SKU的*容器*（我通常说，因为不同的平台可以有不同的术语或数据结构）。

因此，从您的描述中，我看到您的系统有一个**产品**是“*一瓶可口可乐*”，它有两个**SKU**：

*   **1升瓶可口可乐**
*   **0.5升瓶可口可乐**

我会使用[`schema.org`Product](http://schema.org/Product)的 SKU 信息。

某些`schema.org`属性来自父产品（在您的情况下*是一瓶可口可乐*），例如`url`（假设您有两个 SKU：同一页面上的*1*升和*0.5*`description`升）或（假设您有来自产品的通用描述）。但其他一些属性，如`weight`（或`size`/ `price`）将特定于每个瓶子。还有一个`sku`属性通常是指您的 SKU 编号。

*[附带说明一下，在构建Google Product Feed](http://support.google.com/merchants/bin/answer.py?hl=en&answer=188494#GB)时，您会遇到类似的挑战，并且类似的方法也可以正常工作。*

我希望这会有所帮助。

# excel - 为 VBA 类模块创建 DLL 还是更好的替代方案？

> ID：14608266
> 
> 赞同：5
> 
> 时间：2013-01-30T16:00:14.450
> 
> 标签：excel, ms-access, vba

这是我的问题：我编写了一个由常用方法和函数组成的 VBA 类模块。我不断完善模块并对其进行更改。

问题是我在几乎所有的 VBA 项目中都包含了这个模块，而且我真的不想在每次进行更改时都将新模块导入到每个项目中。

我的问题：创建一个我的所有项目都将链接到的 DLL 有意义吗？还是有更有意义的替代解决方案？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T19:15:12.237

如果您要创建一个我认为非常有意义的 DLL，您可能希望使用构建在 .NET 框架上的语言来执行此操作，例如 VB.NET 或 C#。这提供了通过构建 32 位和 64 位版本来解决 32 位和 64 位问题的能力。

值得注意的是，在 Windows 64 位和 Office 32 位上运行的 32 位 DLL 可以正常工作。当用户运行 Office 64 位时，您需要担心。

关于部署，您可以花一些额外的时间来创建安装程序（例如使用 NSIS），以使部署更加简单。此安装程序将用于在目标机器上注册 DLL。您还可以让安装程序同时安装 32 位和 64 位版本的 DLL，以保证 DLL 兼容，而不管用户配置如何。我喜欢注册两个位版本的想法，以避免用户拥有 Windows 64 位/Office 32 位环境并决定将其 Office 版本升级到 64 位的情况。如果您已经安装了 64 位版本，则对 DLL 的引用将正确解析。

# yaml-cpp - 为新的 yaml-cpp API 定义自定义输入类型

> ID：14608273
> 
> 赞同：1
> 
> 时间：2013-01-30T16:00:32.087
> 
> 标签：yaml-cpp

我正在尝试使用新型 YamlCpp API 定义一些自定义输入类型。我有两个问题。首先让我说，我们目前使用的是 0.3 style-api，一切都很好。新 API 的代码外观提高了大约 10 倍，因此我们希望使用它。

1.  为什么我当前的方法会使编译器失效？
2.  yaml-cpp 是否足够智能以处理嵌套模板。例如，如果我的解析器知道如何 enc/dec std::vectors，然后我为 MyAwesomeType 单独定义一个自定义处理程序——我可以要求它 enc/dec a`std::vector<MyAwesomeType>`并且它会弄清楚吗？

我的代码首先复制并粘贴网站上的示例（[此处](https://code.google.com/p/yaml-cpp/wiki/Tutorial)），然后对其进行修改。我当前的实现尝试处理`std::vector<std::pair<qint16,qint16>>`- 这不会编译的转换。（仅供参考 - qint16 只是 __int16 的跨平台 typedef）

```
#include "yaml-cpp\yaml.h"
#include <vector>
#include "qglobal.h"

namespace YAML {
   // a std::pair of qint16's
   template<>
   struct convert<std::pair<qint16,qint16>> {
      static Node encode( std::pair<qint16,qint16> const& rhs) {
         Node node;
         std::vector<qint16> newVec;
         newVec.push_back(rhs.first);
         newVec.push_back(rhs.second);
         node = newVec;
         return node;
      }
      static bool decode(Node const& node, std::pair<qint16,qint16> & rhs) {
         if(!node.IsSequence() || node.size() != 2) {
            return false;
         }

         rhs.first = node[0].as<qint16>();
         rhs.second = node[1].as<qint16>();
         return true;
      }
   };

   // a vector of std::pair of qint16's
   template<>
   struct convert<std::vector<std::pair<qint16,qint16>>> {
      static Node encode( std::vector<std::pair<qint16,qint16>> const& rhs) {
         Node node;
         for(auto pairIt=rhs.begin();pairIt!=rhs.end();++pairIt)
         {
             node.push_back( *pairIt );
         }
         return node;
      }
      static bool decode(Node const& node, std::vector<std::pair<qint16,qint16>> & rhs) {
         if( !node.IsSequence() ) {
            return false;
         }

         for(int k=0;k<node.size();++k)
         {
             rhs.push_back( node[k].as<std::pair<qint16,qint16>>() );
         }
         return true;
      }
   };
} 
```

最后，我想再用这个来调用

```
std::map<std::string, std::vector<std::pair<qint16, qint16>>> m_vectorOfPairs;
if( doc["myPairs"] )
{
    // key exists!
    for( YAML::const_iterator it=doc["myPairs"].begin();it!=doc["myPairs"].end();++it)
    {
        m_vectorOfPairs[it->first.as<std::string>()] = it->second.as<std::vector<std::pair<qint16,qint16>>>();
    }
} 
```

...基于看起来像这样的输入 yaml...

```
myPairs:
  pairOne: [[4, 25], [48, 336]]
  pairTwo: [[4, 25], [57, 336]]
  pairThree: [[4, 25], [48, 336]] 
```

这里的编译器错误输出大约是 300 行，所以我不会在这里发布。平台：Visual Studio 2010 SP1 x64

谢谢你的帮助。

**编辑：** 这是我得到的许多错误中的第一个，即用新样式解析 Node 键似乎并不开心......我添加这个是因为导致这可能与其他错误有关。
代码

```
YAML::Node doc = YAML::LoadFile(buildFilenamePath(m_spectCameraShortName, relativePath).toStdString());
    if( doc["numPixels"] )
.... 
```

原因

```
1>ANONPATH\thirdparty\yaml-cpp\include\yaml-cpp/node/detail/impl.h(146): error C2734: 'lhs' : const object must be initialized if not extern
1>          ANONPATH\thirdparty\yaml-cpp\include\yaml-cpp/node/detail/impl.h(96) : see reference to function template instantiation 'bool YAML::detail::node_data::equals<const char[10]>(YAML::detail::node &,T (&),YAML::detail::shared_memory_holder)' being compiled
1>          with
1>          [
1>              T=const char [10]
1>          ]
1>          ANONPATH\thirdparty\yaml-cpp\include\yaml-cpp/node/detail/node_ref.h(52) : see reference to function template instantiation 'YAML::detail::node &YAML::detail::node_data::get<const char[10]>(Key (&),YAML::detail::shared_memory_holder)' being compiled
1>          with
1>          [
1>              Key=const char [10]
1>          ]
1>          ANONPATH\thirdparty\yaml-cpp\include\yaml-cpp/node/detail/node.h(103) : see reference to function template instantiation 'YAML::detail::node &YAML::detail::node_ref::get<const char[10]>(Key (&),YAML::detail::shared_memory_holder)' being compiled
1>          with
1>          [
1>              Key=const char [10]
1>          ]
1>          ANONPATH\thirdparty\yaml-cpp\include\yaml-cpp/node/impl.h(333) : see reference to function template instantiation 'YAML::detail::node &YAML::detail::node::get<const char[10]>(Key (&),YAML::detail::shared_memory_holder)' being compiled
1>          with
1>          [
1>              Key=const char [10]
1>          ]
1>          MYCODEFILE.cpp(75) : see reference to function template instantiation 'YAML::Node YAML::Node::operator []<const char[10]>(Key (&))' being compiled
1>          with
1>          [
1>              Key=const char [10]
1>          ] 
```

请注意，上面错误中提到的第 75 行是

```
if( doc["numPixels"] ) 
```

我使用默认分支的 Rev 573 从最新源代码重新编译的行，所有这些示例都来自该代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:40:05.360

是的，yaml-cpp 应该能够处理嵌套模板（因此您不需要为`std::vector<std::pair<qint16, qint16>>`- 定义转换，这表明 yaml-cpp 应该为`std::pair<T, U>`一般定义转换（[http://code.google. com/p/yaml-cpp/issues/detail?id=188](http://code.google.com/p/yaml-cpp/issues/detail?id=188)））。

而且我不确定为什么编译器不接受您的代码（它看起来正确，并且在 Linux 上对我来说编译得很好）。

测试是否编译？显然，0.5.0 在 Visual Studio 上不能开箱即用（请参阅[http://code.google.com/p/yaml-cpp/issues/detail?id=182](http://code.google.com/p/yaml-cpp/issues/detail?id=182)），我还没有有机会测试或合并修复。

# java - Java：突围游戏，在我滑动时移动玩家？

> ID：14608277
> 
> 赞同：0
> 
> 时间：2013-01-30T16:00:38.897
> 
> 标签：java, android, onfling, breakout

我正在制作一个简单的 Breakout 游戏，到目前为止，我已经创建了球和球员。我让球移动到你触摸的位置，但我宁愿让它朝着我滑动的方向移动。如，玩家随着我的手指移动。这是我在 MainActivity 中的代码：

```
package com.example.breakout;

import android.os.Bundle;
import android.app.Activity;
import android.view.GestureDetector;
import android.view.GestureDetector.OnGestureListener;
import android.view.Menu;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;

public class MainActivity extends Activity implements OnTouchListener, OnGestureListener{

    BreakoutView bv;
    GestureDetector gs;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        bv = new BreakoutView(this);
        setContentView(bv);
        bv.setOnTouchListener(this);

        gs = new GestureDetector(MainActivity.this, this);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);

        return true;
    }

    @Override
    public boolean onTouch(View arg0, MotionEvent arg1) {
        /*if(arg1.getY()<600){
            bv.p1.x = arg1.getX();
            bv.p1.y = 600;
        }*/
        return false;
    }

    @Override
    public boolean onTouchEvent(MotionEvent me){
        return gs.onTouchEvent(me);
    }

    @Override
    public boolean onDown(MotionEvent arg0) {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
            float velocityY) {
        /*if(e2.getX()>e1.getX()){
            //Move right
            bv.p1.x = e2.getX();

        }*/

        return false;
    }

    @Override
    public void onLongPress(MotionEvent arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public boolean onScroll(MotionEvent arg0, MotionEvent arg1, float arg2,
            float arg3) {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public void onShowPress(MotionEvent arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public boolean onSingleTapUp(MotionEvent arg0) {
        // TODO Auto-generated method stub
        return false;
    }

} 
```

所以，我尝试过的两种方法是 onTouch 和 onFling 。onTouch 将我的玩家“传送”到我触摸的地方，这不是我想要的。onFling 仅在我完成滑动时移动我的播放器，所以这也不起作用。我的问题是，我怎样才能让它在我滑动手指时移动？我使用 onDown 吗？任何帮助表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:10:01.717

假设您设置了某种游戏循环，其中 UI 会定期更新：

```
/**
 * Onclick event for Touch Screen
 */
@Override
public boolean onTouchEvent(MotionEvent input) {
    if (input.getAction() == MotionEvent.ACTION_MOVE) {
        float currX = input.getX();
        float currY = input.getY();

        if (!swiping) {
            swiping = true;
            swipeStartY = currY;
            swipeStartX = currX;
        }

        if (swiping) {          
            double newDirection = Math.atan2((currY-ball.getY()),currX-ball.getX());
            ball.setDirection(newDirection);
        }

    } else if (input.getAction() == MotionEvent.ACTION_UP) {
        if (swiping) {
            swiping = false;
        }
    }
} 
```

这样，球的方向会在游戏线程的每个滴答声中更新并移向您的手指（触摸事件 X/Y 位置）。我不确定您是如何设置绘图/物理/等的。所以我不能在这里提供有意义的函数调用。如果您需要对其进行修改，使其在您抬起手指后沿直线滑动，则存储初始 X/Y 点（在本例中为 swipeStartX/swipeStartY）并仅在停止滑动*后设置新方向。*

编辑：

我应该提一下，包含此代码的类定义如下：

```
public class GameView extends SurfaceView implements SurfaceHolder.Callback {
  ....
} 
```

# magento - 在magento客户网格中大量更新客户数据

> ID：14608281
> 
> 赞同：0
> 
> 时间：2013-01-30T16:00:51.533
> 
> 标签：magento, grid

我需要使用 magento 批量更新客户街道地址。为此，我在客户网格控制器中编写了 bultupdate 函数。这是查询，但它不起作用。如何更改此查询以使用 customerid 更新街道地址

```
 public function massUpdateAction()
{

    $customerIds = $this->getRequest()->getParam('customer');
    $street_type = $this->getRequest()->getParam('street');

    if (!is_array($customerIds)) {
        $this->_getSession()->addError($this->__('Please select customer(s).'));
    } else {
        if (!empty($customerIds)) {

            try {
                foreach ($customerIds as $customerId) {

                   Mage::getSingleton('customer/address')
            ->updateAttributes($customerIds, array('billing_street_full' => $street_type), $storeId);
                }
                $this->_getSession()->addSuccess(
                    $this->__('Total of %d record(s) have been Updated.', count($customerIds))
                );
            } catch (Exception $e) {
                $this->_getSession()->addError($e->getMessage());
            }
        }
    }
    $this->_redirect('*/*/index');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:30:38.510

尝试这个：

```
 try {
            foreach ($customerIds as $customerId) {

                $addresses  = Mage::getModel('customer/customer')->load($customerId)->getAddressesCollection();
                foreach ($addresses as $address) {
                    $address->setData('billing_street_full', $street_type)->save();
                }
            }
             $this->_getSession()->addSuccess(
                 $this->__('Total of %d record(s) have been Updated.', count($customerIds))
             ); 

            } catch (Exception $e) {
                $this->_getSession()->addError($e->getMessage());
            } 
```

# java - 如何用来自 Web 服务的列表填充 Tapestry5 调色板？

> ID：14608284
> 
> 赞同：0
> 
> 时间：2013-01-30T16:01:02.113
> 
> 标签：java, web-applications, tapestry, palette

我正在尝试用调用 Web 服务的结果填充 Tapestry 5 中的 Palette 组件，这是一个段列表。Segment 是一个普通的类，具有一些属性，如标题...我想将标题显示为可用的、已选择的调色板列表中的一个项目。到目前为止，我发现的是使用枚举作为类的示例，但这不是我的情况，是吗？有人可以帮我解决这个问题吗？我基本上不知道如何将这些标题从 Segment 映射到 Palette 的模型中。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T16:23:09.320

实现[`SelectModel`](http://tapestry.apache.org/current/apidocs/org/apache/tapestry5/SelectModel.html)并将其传递给`model`参数。正如参数文档所说

> 模型用于定义渲染时使用的值和标签。

# javascript - 在 d3.js 中从 Rails 访问 JSON 信息

> ID：14608287
> 
> 赞同：1
> 
> 时间：2013-01-30T16:01:09.330
> 
> 标签：javascript, ruby-on-rails, json, d3.js

我正在尝试将 d3.js 合并到我的项目中，并且无法弄清楚如何访问 JSON 对象，该对象是从我的 Ruby on Rails 后端提供的。

这是我的控制器代码：

```
class CoursesController < ApplicationController
respond_to :html, :json

def course
  @course = Course.find(params[:id])
  respond_with @course do |format|
    format.html
    format.json {render json: @course}
  end
end 
```

我一直在尝试在控制台和我的视图中弄清楚如何访问这些信息。（顺便说一句，如果我废弃了 respond_with 块并只保留了呈现 JSON 块，我可以看到 JSON 对象实际上是一个响应对象）。

这是我一直在尝试的（在视图中）：

```
<%= javascript_tag do %>
  var data  = d3.json('<%= @course %>');
  console.log(data);
<% end %> 
```

这会返回一个对象，但该对象是未定义的，所以当我调用时：

```
dataset[0].course.course_name; 
```

我收到以下错误：

```
TypeError: Cannot read property 'course' of undefined 
```

我还在控制台中尝试过类似以下的操作：

```
var url = '/courses/1';
var dataset = d3.json(url);
dataset[0].course.course_name; 
```

但得到同样的错误。

我对js比较陌生，所以我可能会犯一个菜鸟错误，但是，不管它是什么，我都看不到！

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T16:22:57.213

问题是带有一个参数的 d3.json 函数 ( [https://github.com/mbostock/d3/wiki/Requests#wiki-d3_json](https://github.com/mbostock/d3/wiki/Requests#wiki-d3_json) ) 返回请求。然后，您将不得不发出该请求。

“典型”用途是有第二个参数，带有回调函数。这是一个异步回调，因此您不能将返回值分配给 var。

这是我的建议：

```
var url = '/courses/1';
d3.json( url, function( error, data ) {
    console.log( data );
    // do all actions required now that the data is retrieved
} ); 
```

# jquery - 将内联图像附加到 H1

> ID：14608291
> 
> 赞同：0
> 
> 时间：2013-01-30T16:01:19.073
> 
> 标签：jquery, arrays, match

我有一个 id 为“home”的部分。我有一些 JS 可以在页面加载时更改“主页”部分的背景图像。

我总共有 5 张背景图片，还有 5 张徽标图片。每个徽标都与特定的背景图像配对。如何更改我的代码以确保使用正确的背景图像加载正确的徽标？徽标必须内联显示，因此实际上是在 HTML 文档中。我尝试将徽标附加到一个名为“red-cherry”的容器中，但我的所有代码都中断了。

我尝试这样做，但我知道我没有尝试检查已加载的背景图像。

**JS**

```
// Create an array of images
var images = ['a-pat.jpg', 'b.jpg', 'c-pat.jpg', 'd-pat.jpg', 'f-pat.jpg'];
var logos = ['cr-pink.png', 'cr-cherry.png', 'cr-green.png', 'cr-blue.png', 'cr-red.png'];

// Display one random one each time the page loads
$('#home').css({'background-image': 'url(../img/wallpaper/' + images[Math.floor(Math.random() * images.length)] + ')'});

$("h1.cherry-red").append({'<img src="../img/logos/' + logos[Math.floor(Math.random() * logos.length)] + '"/>')}); 
```

**HTML**

```
<section id="home">
    <h1 class="cherry-red"><span>Cherry Red</span></h1>
</section> 
```

**为了清楚起见**

*我需要检查正在将哪些背景图像加载到#home，然后将正确的徽标加载到 H1。我需要以某种方式说是否将 a-pat.png 作为背景图像加载仅加载徽标 cr-pink.png*

**进一步说明**

我可以在我已经拥有的代码之后添加一堆 if 语句吗？例如：如果 images = 'a-pat.png' 然后将 cr-pink.png 附加到 H1 否则如果 images = b.jpg 然后将 cr-cherry.png 附加到 H1 等等......这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:06:46.857

对两者使用相同的随机索引。

```
var images = ['a-pat.jpg', 'b.jpg', 'c-pat.jpg', 'd-pat.jpg', 'f-pat.jpg'];
var logos = ['cr-pink.png', 'cr-cherry.png', 'cr-green.png', 'cr-blue.png', 'cr-red.png'];

var rnd = Math.floor(Math.random() * images.length);

$('#home').css({'background-image': 'url(../img/wallpaper/' + images[rnd] + ')'});
$("h1.cherry-red").append('<img src="../img/logos/' + logos[rnd] + '"/>'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:07:11.830

您只需要生成一次随机数：

```
// Display one random one each time the page loads
var imageNumber = Math.floor(Math.random() * images.length);
$('#home').css({'background-image': 'url(../img/wallpaper/' + images[imageNumber] + ')'});
$("h1.cherry-red").append({'<img src="../img/logos/' + logos[imageNumber] + '"/>')}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T16:16:10.160

我曾经遇到过类似的问题，但我的处理方式不同。

我用 div 和图像制作了一个页面

pageimages.html

```
<div id="image1"><image src="myimage1.gif"></div>
<div id="image2"><image src="myimage2.gif"></div>
<div id="image3"><image src="myimage3.gif"></div> 
```

然后我对图像使用 jquery 加载，以便将源页面缓存在服务器上。这比等待每个图像加载或担心预加载或任何事情要快得多。

```
$('#home').load('pageimages.html #image1'); 
```

或者

```
$('#home').load('pageimages.html #image2'); 
```

# javascript - 使用全键盘支持创建我自己的 AJAX 自动提示

> ID：14608292
> 
> 赞同：0
> 
> 时间：2013-01-30T16:01:21.893
> 
> 标签：javascript, ajax, autosuggest

有没有人有创建自己的**具有全键盘支持**的 AJAX 自动建议文本框的经验？

我已经通过插入 SQL DB 并显示结果成功地创建了自动建议方面，但与搜索结果交互的唯一方法是使用鼠标。我希望能够使用键盘向上/向下滚动并使用回车键选择项目并重定向到相关页面。

我看过无数文章和帮助论坛页面，详细介绍了如何使用向上/向下箭头滚动浏览 HTML 元素，但没有解释如何将回车键合并到选择项目和重定向到相关页面。

我知道我可以使用的所有自动建议插件，但是我已经创建了自己的插件，我希望能够为结果添加额外的内容，而不是固定在其他人的工作中。

如果有人能帮我指出正确的方向，我将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:22:04.470

这个答案*肯定*属于“指向正确方向”的类别，因为我不知道您是否已经有代码以及它是什么样的（如果存在的话）。

你说你已经创建了一个带有建议的下拉菜单，所以我将省略 CSS 和 JS 来设置样式和定位。
假设下拉列表包含以下标记：

```
<div id="suggestiondropdown">
    <span class="suggestion" data-page="[URL of page]">Suggestion 1</span>
    <span class="suggestion" data-page="[URL of page]">Suggestion 2</span>
    <span class="suggestion" data-page="[URL of page]">Suggestion 3</span>
    <span class="suggestion" data-page="[URL of page]">Suggestion 4</span>
    <span class="suggestion" data-page="[URL of page]">Suggestion 5</span>
</div> 
```

使用此 JS，您应该能够使用箭头键在建议之间移动：

```
var suggestions = document.querySelectorAll(".suggestion"); // Now suggestions is an array with the spans
var index = 0;
document.onkeypress = function(e) {
    // Style the selected as normal here:
    suggestions[index].style.backgroundColor = "#FFFFFF";
    if (e.keyCode == 38) { // UP!
        if (index <= 0) index = suggestions.length;
        index--;
    }
    else if (e.keyCode == 40) { // DOWN!
        if (index >= suggestions.length -1) index = -1;
        index++;
    }
    else if (e.keyCode == 13) { // ENTER!
         var page = suggestions[index].dataset.page;
         window.location.href = page; // Or with relative URLs, first prepend the base URL.
    }
    // Style the selected one as selected here.
    // I don't know how you want it, so I'll just give the selected one a blue background.
    suggestions[index].style.backgroundColor = "#0000FF"; // Never mind the ugly shade

} 
```

**未经测试**

# php - Sphinx 属性 MIN() 和 MAX() 值

> ID：14608294
> 
> 赞同：1
> 
> 时间：2013-01-30T16:01:23.077
> 
> 标签：php, sphinx

我有兴趣从 sphinx 搜索中检索属性的 MIN 和 MAX 值（使用 PHP 客户端）。是否有一个简单的程序来实现这一点，或者 SphinxQL 真的是唯一的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:17:31.403

是的，这很简单，您需要在查询 sphinx 配置文件时添加包含计数值的属性。您不需要将 MAX MIN 函数放在查询中。类似于以下内容。

```
Sql_query = SELECT table.A, table.B as ‘values’
FROM table
GROUP BY table

sql_attr_uint   = values 
```

在客户端应用程序表单 PHP 上，您必须对 MAX 和 MIN 值应用排序。

```
$sphinx'['sortMode'] = array(SPH_SORT_EXTENDED => 'values DESC’);
$sphinx'['sortMode'] = array(SPH_SORT_EXTENDED => 'values ACS’); 
```

我希望这将解决您的情况。

# c# - c# winform combobox不同显示

> ID：14608295
> 
> 赞同：1
> 
> 时间：2013-01-30T16:01:24.863
> 
> 标签：c#, winforms, combobox

我正在使用`Visual Studio 2010`并且`.NET 3.5`我`combobox`在不同的项目中看到不同的显示。`combobox`我以同样的方式从工具箱中删除并将其更改`dropdownstyle`为`DropDownList`. 但根据项目的不同，它`combobox`可能看起来像是缩进的（类似于 中的外观`DropDown`），该字段以蓝色突出显示。但在另一个项目中，它`combobox`具有更多的 3D 感觉。我很想提供截图，但我没有足够的声誉来发布图片。:-( 我猜这可能是由于某些项目设置造成的？因为我`combobox`在两个项目中创建的方式完全相同 - 我添加了一个新的并在表单上`Form`删除了一个并将其更改为`combobox``dropdownstyle``DropDownList`; 但是，当项目运行时，它们在对话框中的外观会有所不同。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:45:34.907

解决我自己的问题。不知何故 Application.EnableVisualStyles(); 已在 program.cs 中删除。一旦我添加了 Application.EnableVisualStyles(); 在调用主窗体之前，组合框看起来像我想要的那样

# jquery - jQuery 垂直动画在 Firefox 中不起作用（Chrome 很好）

> ID：14608297
> 
> 赞同：1
> 
> 时间：2013-01-30T16:01:28.107
> 
> 标签：jquery, html, css, firefox, animation

Mozilla Firefox 没有为我目前正在开发的网站上的垂直动画制作动画。

直播： [http ://daft-tech.net/](http://daft-tech.net/)

**解释：**

当您开始在网站的某处输入时，搜索功能将显示在固定标题中，让您搜索您想要的内容。它使用 jQuery 进行动画处理，但在 Firefox 中，输入和搜索结果不会垂直消失。他们只是跳到左边。其他一切都很好。在 Chrome 中，它们会平滑地淡出屏幕。

是我的错还是 jQuery 造成的？我的样式表是否与 jQuery 中的某些内容同时存在？

更新：我检查了所有我检查的动画在 Firefox 中工作，除了垂直滑动 ($("#search").animate({ left:"+=50px" }, 100, null);)

代码：

```
var searchState = false;

function searchHide() {
    if (searchState) {
        $("#search").hide(500);
        searchState = false;
    }
}

function searchShow() {
    if (!searchState) {
        $("#searchResults").hide(300);
        $("#search").show(100);
        $("#searchInput").focus();
        searchState = true;
    }
} 
```

HTML：

```
<div id="search">
    <input name="searchInput" id="searchInput" onkeyup="searchKeyPress(event);" style="border: 1px ridge white; background-color: black; color: white;" />
    <div id="searchResults"></div>
</div> 
```

CSS：

```
#search {
    max-width: 1050px;
    margin: 3px auto;  
    background-color: black;
}
#search input {
    margin-bottom: 25px;
}
#searchResults {
    color: white;
}
#searchResults p {
    padding: 3px;
}
#searchResults a {
    color: white;
}
#searchResults span {
    margin-right: 15px;
    padding:0px 4px;
    background-color: white;
    border-radius: 3px;
    color: black;
} 
```

# php - Magento 中的购物车总计不含运费

> ID：14608301
> 
> 赞同：2
> 
> 时间：2013-01-30T16:01:32.087
> 
> 标签：php, function, magento

这是我的代码：

```
public function TOTALCODE () 
{ 
if ($parentBlock = $this->getParentBlock()) 
{ 
$amount = __(number_format(Mage::getSingleton(’checkout/session’)->getQuote()->getGrandTotal(), 2, ‘,’, ‘.’)); 
$text = __(’€ %s (incl. 21% btw)’, $amount); 
$parentBlock->addLink($text, ‘checkout/cart’, $text, true, array(), 50,null,’class="top-link-cart"’); 
} 
```

如何在不包括运费的情况下显示总计？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-16T10:31:13.927

在 Magento 1.8 中，sales_flat_quote - 表中似乎没有可用的运费。

我必须通过以下方式检索总数：

```
$totals = Mage::getSingleton('checkout/cart')->getQuote()->getTotals() 
```

并检查：

```
$totalKeys = array('subtotal', 'shipping', 'tax', 'discount', 'grand_total');

foreach ($totalKeys as $totalKey) {
    if (isset($totals[$totalKey])) echo $totals[$totalKey]->getData('value');
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T19:54:22.557

嗯，做个计算。

`$subtotal = Mage::getSingleton('checkout/session')->getQuote()->getGrandTotal() - Mage::getSingleton('checkout/session')->getQuote()->getShippingAmount()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-18T13:57:00.313

您可以使用以下计算：

```
$grandTotal = Mage::getSingleton('checkout/cart')->getQuote()->getGrandTotal();
$shipping = Mage::getSingleton('checkout/cart')->getQuote()->getTotals()['shipping']->getValue();

$grandTotalWithoutShipping = $grandTotal - $shipping; 
```

# c++ - 无法删除 Visual Studio 中的链接器错误

> ID：14608302
> 
> 赞同：2
> 
> 时间：2013-01-30T16:01:32.467
> 
> 标签：c++, c, visual-studio, opencv, linker

我正在尝试在 Visual Studio 2012 中使用 OpenCv。我遵循了[这个](https://stackoverflow.com/questions/7011238/opencv-2-3-c-visual-studio-2010)问题提供的每一步以及可以在互联网上找到的每一步。我什至尝试使用不同版本的 opencv，但错误并没有消失。

错误是：

`error LNK1104: cannot open file 'opencv_calib3d230d.obj'`

所有必需的库都包含在 Visual Studio 的链接器配置中。环境变量“路径”也已更新，但错误仍然存​​在。

我能做些什么来解决这个问题？我已经搜索了`calib3d230d.obj`每个位置，但它不在提取的文件夹中。

`superpack.exe`我从[这里](http://sourceforge.net/projects/opencvlibrary/files/opencv-win/2.3/)下载了 OpenCv

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T03:08:09.143

我以前遇到过同样的问题。最后我发现我忘记在vc++链接器的库文件后面输入“.lib”了。

希望这可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T19:24:32.513

首先，您应该链接到 .lib 文件，opencv 通常不包含任何 .obj 文件。在链接器依赖项中更改它。其次，你肯定有库的调试版本吗？如果没有，那么您需要指定名称末尾不带 d 的静态库（opencv_calib3d230d.lib -> opencv_calib3d230.lib）。

# entity-framework - 最大相关记录数

> ID：14608307
> 
> 赞同：2
> 
> 时间：2013-01-30T16:01:39.563
> 
> 标签：entity-framework

有没有办法指定实体允许的最大相关记录数？例如，对于每个 Order 实体，我想指定一个约束，即它最多有五个 orderItems。

我是否必须使用 sql 或者 fluent api 或 ef 属性中有什么可以帮助的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T19:13:49.467

我认为“每个订单最多五个 orderItems”是业务要求。此类要求不应由基础架构（映射）或 sql 实现（尽管我不确定您的意思是什么，我将其视为数据库逻辑）。导致验证的属性可能没问题，但我认为它没有任何属性。

您应该以与所有其他业务规则类似的方式实现验证和反馈。在映射（如果可能的话）或数据库约束中实现的规则将需要第二个验证机制，可能会捕获异常，这很难看。

除此之外，这条规则有一天可能会改变，甚至可能是暂时的（圣诞节？）。那么你不希望这个规则的实现分散在不同的应用层上。

我将`AddItem`在服务类或存储库或 Order 类本身中的某些方法中实现该规则，并使最大值可配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T17:20:06.633

我会像这里所做的那样处理这个：

[.NET 中 Queue<T> 的限制大小？](https://stackoverflow.com/questions/1292/limit-size-of-queuet-in-net)

另外：[如何在 C# 中覆盖 List<T> 的 Add 方法？](https://stackoverflow.com/questions/580202/how-to-i-override-listts-add-method-in-c)

通过使用扩展类型覆盖处理您的返回实体列表来处理此问题，该扩展类型实现您的业务逻辑要求。如果您想在将来更改它，这也将使从设置文件中控制属性变得容易。

我不知道在 EF/Fluent 或 SQL 中没有办法做到这一点，这似乎与直觉相悖，因为这是相关的业务逻辑，与您如何持久化数据无关。（*并不是说没有我不知道的方法）

像这样的东西应该工作：

```
public class LimitedList<T> : List<T> {
  private int limit = -1;

  public int Limit {
    get { return limit; }
    set { limit = value; }
  }

  private List<T> list= new List<T>();
  public LimitedList(int Limit) {
     this.Limit=Limit;
  }

  public void Add(T entry) {
     if (this.Limit != list.Count) {
       list.Add(entry);
     } else {
         //error
     }
  }
} 
```

# c# - 如果 Observable 的订阅者需要触发 OnNext() 怎么办？

> ID：14608308
> 
> 赞同：2
> 
> 时间：2013-01-30T16:01:43.873
> 
> 标签：c#, system.reactive

我有一个跟踪状态的 Observable，有点像状态机。

我有一个 Observable 的订阅者，它检测事物何时处于特定状态，它需要将事物推入新状态，有效地调用 Observable 上的 OnNext()！

这违反了一次只有一个 OnNext() 正在运行的 Rx 原则！有什么好的解决方法吗？就像安排 OnNext() 在当前完成传播之后直接发生一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T00:20:09.480

在控制系统理论中，这种类型的系统是具有反馈的控制回路。它抵制传统分析，因为系统的输入取决于输出——这可能是一个连续函数。

可以对 Observables（本质上是离散的值流）做同样的事情，即以声明方式表达控制系统。但是，C# 语义使实现不是很优雅。（F# 可以选择递归绑定）。

首先，我们需要定义一个闭包来编写反馈循环。

```
 public delegate IObservable<T> Feedback<T>(IObservable<T> feedback, out IObservable<T> output);
    public static IObservable<T> FeedbackSystem<T>(Feedback<T> closure)
    {
        IObservable<T> source = Observable.Empty<T>(), output;
        source = closure(Observable.Defer(() => source), out output);
        return output;
    } 
```

使用上述内容，这里是一个速度调节器的示例实现，它加速到 100，并保持低于它的速度，即使在速度中引入了随机误差。

```
 var system =
    FeedbackSystem((IObservable<double> acceleration, out IObservable<double> velocity) =>
    {
        //Time axis: moves forward every 0.1s
        double t = 0.1; var timeaxis = Observable.Interval(TimeSpan.FromSeconds(t));

        velocity = acceleration.Sample(timeaxis)                //move in time
                               .Scan((u, a) => u + a * t)   //u' = u + at
                               .Select(u => u + new Random().Next(10))  //some variations in speed
                               .Publish().RefCount();                   //avoid recalculation

        //negative feedback
        var feedback = velocity.Select(u => 0.5 * (100 - u));

        return feedback.Select(a => Math.Min(a, 15.0))  //new limited acceleration
                       .StartWith(0);                   //initial value          
    });

    system.Subscribe(Console.WriteLine); 
```

通过以相同的方式使输入依赖于输出，状态机的情况是可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:32:09.340

顺便说一句，我会说您可能“想做其他事情” - 也就是说，在可观察对象中有另一个注入点，比如包含类等。有一个方法`PushState(...)`

无论如何，你*可以*保留“我会告诉你下一步是什么”的语义，方法是`IObservable`用 a支持`Subject<T>`或者在创建过程中指定你的注入路线`Observable.Create`

（虽然`Subject<T>`被很多人看不起，因为它“不纯”）

# internet-explorer - 强制 IE 显示 csv 文件而不是打开下载对话框

> ID：14608310
> 
> 赞同：2
> 
> 时间：2013-01-30T16:01:45.027
> 
> 标签：internet-explorer

当我输入这个 URL

[http://www.google.com/trends/trendsReport?hl=en-US&geo=US&export=1&q=stack%20overflow](http://www.google.com/trends/trendsReport?hl=en-US&geo=US&export=1&q=stack%20overflow)

在 Internet Explorer 中，会下载 .csv 文件。有没有办法强制 IE 显示文件的文本而不是打开下载对话框？（我不能为此使用其他网络浏览器。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:44:07.130

检查 .csv 类型是否与 Internet Explorer 关联。我怀疑它目前与其他一些程序有关。步骤可能会因您使用的操作系统而异，但请尝试以下操作：

*   通过文件资源管理器查看/选项/文件类型
*   查找 CSV 文件类型单击打开
*   然后编辑按钮更改默认值

我希望这会有所帮助！

另请参阅[这篇文章](http://www.winxptutor.com/iedocs.htm)，其中引用了

> “在同一窗口中浏览选项”

所以你可能也需要检查这个选项。

# seo - 用于计算标题数量（H1、H2、H3 ...）的 SEO/Web 爬网工具

> ID：14608312
> 
> 赞同：3
> 
> 时间：2013-01-30T16:01:48.137
> 
> 标签：seo, web-scraping, web-crawler, html-heading

有谁知道可以抓取我的网站并计算我网站内每个页面上的标题数量的工具或脚本？我想知道我的网站中有多少页面有超过 4 个标题 (h1)。我有 Screaming Frog，但它只计算前两个 H1 元素。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:12:00.450

这是一项非常具体的任务，我只建议您自己编写。您需要的最简单的东西是一个[XPATH 选择器来为您提供 h1/h2/h3 标签](https://stackoverflow.com/questions/7992726/how-to-get-h1-h2-h3-using-a-single-xpath-expression)。

**计算标题：**

1.  选择任何一种你最喜欢的编程语言。
2.  为您网站上的页面发出 Web 请求（[Ruby](https://stackoverflow.com/questions/4217223/how-to-get-the-html-source-of-a-webpage-in-ruby)、Perl、[PHP](http://php.net/manual/en/domdocument.loadhtml.php)）。
3.  解析 HTML。
4.  调用 XPATH 标题选择器并计算它返回的元素数。

**抓取您的网站：**

对所有页面执行第 2 步到第 4 步（您可能必须拥有要抓取的页面队列）。如果你想爬取**所有**页面，那么它会稍微复杂一点：

1.  爬取你的主页。
2.  [选择所有锚标记](https://stackoverflow.com/questions/2691744/xpath-query-to-select-all-href-attributes-of-a-tag-which-class-attribute-eq)。
3.  从每个 URL 中提取 URL，`href`并丢弃任何不指向您网站的 URL。
4.  执行 URL-seen 测试：如果您以前看过它，则丢弃，否则排队等待抓取。

**URL-Seen 测试：**

URL-seen 测试非常简单：只需将您目前看到的所有 URL 添加到哈希映射中。如果您遇到哈希映射中的 URL，则可以忽略它。如果它不在哈希图中，则将其添加到爬网队列中。哈希映射的键应该是 URL，值应该是某种允许您保留标题统计信息的结构：

```
Key = URL
Value = struct{ h1Count, h2Count, h3Count...} 
```

应该是这样的。我知道这看起来很多，但它不应该超过几百行代码！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T16:19:32.473

我的[Xidel](http://videlibri.sourceforge.net/xidel.html)可以做到这一点，例如：

```
 xidel http://stackoverflow.com/questions/14608312/seo-web-crawling-tool-to-count-number-of-headings-h1-h2-h3 -e 'concat($url, ": ", count(//h1))' -f '//a[matches(@href, "http://[^/]*stackoverflow.com/")]' 
```

-e 参数中的 xpath 表达式告诉它计算哪些页面上的 h1-tags 和 -f 选项

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T17:26:22.987

我在 Code Canyon 中找到了一个工具：Scrap(e) 网站分析器：[http](http://codecanyon.net/item/scrap-website-analyzer/3789481) ://codecanyon.net/item/scrap-website-analyzer/3789481 。

正如您将从我的一些评论中看到的那样，进行了少量配置，但到目前为止运行良好。

感谢 BeniBela，我也会查看您的解决方案并进行报告。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-21T00:17:16.920

您可能会使用[xPather chrome 扩展](https://chrome.google.com/webstore/detail/xpather/gabekepgockchhemajjahpchlnkadiac/related?hl=en)或类似扩展，以及 xPath 查询：

```
count(//*[self::h1 or self::h2 or self::h3]) 
```

谢谢：

*   [用于计算标题数量（H1、H2、H3 ...）的 SEO/Web 爬网工具](https://stackoverflow.com/questions/14608312/seo-web-crawling-tool-to-count-number-of-headings-h1-h2-h3?noredirect=1&lq=1#)
*   [https://devhints.io/xpath](https://devhints.io/xpath)

# gis - Smalltalk 中的开源地理信息系统？

> ID：14608315
> 
> 赞同：5
> 
> 时间：2013-01-30T16:02:00.063
> 
> 标签：gis, smalltalk

Smalltalk 中有**任何**可用的开源[GIS](http://en.wikipedia.org/wiki/Geographical_Information_System)框架吗？到目前为止，我发现了这些过时的选项：

*   [GeoSynchrony](http://web.archive.org/web/19990208003342/http://appliedreasoning.com/)：商业且不可用。
*   [SpatialWorks](http://www.thefreelibrary.com/Object/FX+Launches+Spatial+Works+Family+of+Embeddable+Geographic+and...-a017262751)：商业。

做地理编码、制图、分析或建模等 GIS 绝对没有别的。

# unix - 将 SAS 数据集作为文本文件导出到 UNIX....带分隔符“~|~”

> ID：14608322
> 
> 赞同：2
> 
> 时间：2013-01-30T16:02:32.180
> 
> 标签：unix, sas

我正在尝试将 SAS 数据集作为文本文件导出到 UNIX 文件夹，分隔符为“~|~”。

```
Here is the code I'm using....
PROC EXPORT DATA=Exp_TXT
         OUTFILE="/fbrms01/dev/projects/tadis003/Export_txt_OF_New.txt"
         DBMS=DLM REPLACE;
     DELIMITER="~|~";
     PUTNAMES=YES;
RUN; 
```

这是我在 UNIX 上得到的输出.....在数据中缺少分隔符的一部分，但在变量名中得到了整个分隔符....

```
Num~|~Name~|~Age
1~A~10
2~B~11
3~C~12 
```

知道为什么我只在数据中获得分隔符的一部分？？？？

谢谢，山姆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:04:46.540

文件语句的 SAS 手册页上引用了该问题 [http://support.sas.com/documentation/cdl/en/lestmtsref/63323/HTML/default/viewer.htm#n15o12lpyoe4gfn1y1vcp6xs6966.htm](http://support.sas.com/documentation/cdl/en/lestmtsref/63323/HTML/default/viewer.htm#n15o12lpyoe4gfn1y1vcp6xs6966.htm)

```
Restriction:Even though a character string or character variable is accepted, only the first character of the string or variable is used as the output delimiter. The FILE DLM= processing differs from INFILE DELIMITER= processing. 
```

然而，有一个新的声明，DLMSTR（无论如何，在某些版本中）。不幸的是，您不能在 PROC EXPORT 中使用 DLMSTR，但如果您不能轻松地写出变量，您可以从 PROC EXPORT 生成日志并将其粘贴到您的程序中，并将 DELIMITER 修改为 DLMSTR。您甚至可以动态地这样做 - 使用 PROC PRINTTO 生成带有日志的文件，然后读入该文件，解析行号和非代码，将 DELIMITER 更改为 DLMSTR，并 %include 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T18:59:55.407

既然您使用的是 unix，为什么不使用 unix 工具来解决这个问题呢？

您可以使用 X 语句从 sas 程序调用 unix 命令：http: [//support.sas.com/documentation/cdl/en/hostunx/61879/HTML/default/viewer.htm#xcomm.htm](http://support.sas.com/documentation/cdl/en/hostunx/61879/HTML/default/viewer.htm#xcomm.htm)

导出后，使用 sed 修复文件

```
PROC EXPORT DATA=Exp_TXT
         OUTFILE="/fbrms01/dev/projects/tadis003/Export_txt_OF_New.txt"
         DBMS=DLM REPLACE;
     DELIMITER="~";
     PUTNAMES=YES;
RUN;

X sed 's/~/~|~/g' /fbrms01/dev/projects/tadis003/Export_txt_OF_New.txt > /fbrms01/dev/projects/tadis003/Export_txt_OF_New_v2.txt ; 
```

可能需要根据您的 unix 进行调整，但这适用于 AIX。某些版本的 sed 可以使用 -i 标志在适当位置进行编辑，因此您不必输入两次文件名。

与大宏相比，它是一个更简单、更容易的单行解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T17:16:51.397

我的猜测是`PROC EXPORT`不支持使用多个字符分隔符。通常，列分隔符只是一个字符。因此，您可能需要编写自己的代码来执行此操作。

`PROC EXPORT`对于分隔文件生成普通的旧 SAS 代码，然后执行。您应该会在 SAS 日志中看到代码，您可以从中获取并根据需要进行更改。

请参阅我对[其他问题](https://stackoverflow.com/q/14516251/1275871)的回答，以获得可能对您有所帮助的 SAS 宏。您不能完全按照所写的方式使用它，但它应该可以帮助您创建满足您需求的版本。

# asp.net-mvc - EF CodeFirst 一对一

> ID：14608325
> 
> 赞同：0
> 
> 时间：2013-01-30T16:02:33.893
> 
> 标签：asp.net-mvc, entity-framework-4, ef-code-first, entity-relationship

我找到了数千个 codefirst 关系的例子，但我不能做我的样本！

很多这样的错误：

“BL.Objects.User”类型的属性“LanguageID”上的 ForeignKeyAttribute 无效。在依赖类型“BL.Objects.User”上找不到导航属性“语言”。Name 值应该是有效的导航属性名称。

和相同相同...

我真的很想加载与用户的语言关联。(en, ru, es)

```
public abstract class BaseUser : FinanceBase<int>, IUser
{      
    [ForeignKey("Language")]
    public int LanguageID { get; set; }

    [ForeignKey("LanguageID")]
    public virtual Language Language { get; private set; }        

}

public class User : BaseUser
{
    public override void GenerateID()
    {
        ...
    }
}

public abstract class BaseLanguage : FinanceBase<int>, ILanguage
{
    #region Implementation of ILanguage

    public string Code { get; set; }
    public string Fullname { get; set; }
    public string ImagePath { get; set; }

    #endregion
}

public class Language : BaseLanguage
{
    public override void GenerateID()
    {

    }
}

public class FinanceDatabaseContext : DbContext
{
    public FinanceDatabaseContext()
    {
        Database.SetInitializer(new FinanceContextInitializer());    
    }

    public DbSet<User> Users { get; set; }
    public DbSet<Language> Languages { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<User>().Map(m =>
            {
                m.MapInheritedProperties();
                m.ToTable("Users");
            }).HasKey(x => x.ID).HasRequired(x => x.Language).WithMany().HasForeignKey(x => x.LanguageID);

        modelBuilder.Entity<Language>().Map(m =>
        {
            m.MapInheritedProperties();
            m.ToTable("Languages");
        }).HasKey(x => x.ID);

        base.OnModelCreating(modelBuilder);
    } 
}

public class FinanceContextInitializer : DropCreateDatabaseIfModelChanges<FinanceDatabaseContext>
{
    protected override void Seed(FinanceDatabaseContext context)
    {
        context.Database.ExecuteSqlCommand("ALTER TABLE Users ADD CONSTRAINT uc_Language UNIQUE(LanguageID)");
    }
} 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:22:42.647

您不需要使用外键`LanguageID`

```
 public int LanguageID { get; set; }
    [ForeignKey("LanguageID ")]
    public virtual Language Language { get; private set; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T20:36:04.940

解决了。我的导航属性语言有**私人**二传手

```
[ForeignKey("LanguageID")]
public virtual Language Language { get; private set; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T04:04:25.910

将虚拟导航字段添加到您的用户表中，如果它不存在的话。即你在 POCO 类用户中有 LanguageId 和 Language。另一种选择是语言类中的导航字段返回给用户，即公共虚拟列表用户

但是让我们坚持拥有**虚拟导航属性和外键 ID 字段的用户。**

```
 ... the rest of User.....
    public int LanguageId
// nav relationship
    public virtual Language Language { set; get; }

// Now the FK declaration as you described should work in fluent API...
// Has required NAVIGATION property, its 1 to many and the I have a field for this FK value called X

modelBuilder.Entity<User>().Map(m =>
        {
            m.MapInheritedProperties();
            m.ToTable("Users");
        }).HasKey(x => x.ID).HasRequired(x => x.Language).WithMany().HasForeignKey(x => x.LanguageID); 
```

# android - 如何在 Android 中打开文件浏览器？

> ID：14608327
> 
> 赞同：14
> 
> 时间：2013-01-30T16:02:37.473
> 
> 标签：android, file-browser

我正在 Android 4.0.3 设备上开发。如何为我的应用打开文件浏览器？是否有内置于 Android SDK 的？我必须自己写吗？

我不希望我的应用程序依赖于安装单独应用程序进行文件浏览的用户。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-30T16:43:25.010

要从文件浏览器获取文件，请使用以下命令：

```
 Intent fileintent = new Intent(Intent.ACTION_GET_CONTENT);
        fileintent.setType("gagt/sdf");
        try {
            startActivityForResult(fileintent, PICKFILE_RESULT_CODE);
        } catch (ActivityNotFoundException e) {
            Log.e("tag", "No activity can handle picking a file. Showing alternatives.");
        } 
```

我不太确定 gagt/sdf 的用途......它似乎在我的应用程序中适用于任何文件。

然后添加这个方法：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Fix no activity available
        if (data == null)
            return;
        switch (requestCode) {
        case PICKFILE_RESULT_CODE:
            if (resultCode == RESULT_OK) {
                String FilePath = data.getData().getPath();
                //FilePath is your file as a string
            }
        } 
```

如果用户没有由他们的 OEM 安装或预安装的文件管理器应用程序，您将不得不实现自己的。你不妨给他们一个选择。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-03-17T05:08:31.960

我希望这个可以帮助您选择文件：

```
public void performFileSearch() {

    // ACTION_OPEN_DOCUMENT is the intent to choose a file via the system's file
    // browser.
    Intent intent = new Intent(Intent.ACTION_OPEN_DOCUMENT);

    // Filter to only show results that can be "opened", such as a
    // file (as opposed to a list of contacts or timezones)
    intent.addCategory(Intent.CATEGORY_OPENABLE);

    // Filter to show only images, using the image MIME data type.
    // If one wanted to search for ogg vorbis files, the type would be "audio/ogg".
    // To search for all documents available via installed storage providers,
    // it would be "*/*".
    intent.setType("image/*");

    startActivityForResult(intent, READ_REQUEST_CODE);
} 
```

代码来自此文档：
[https](https://developer.android.com/guide/topics/providers/document-provider.html)
://developer.android.com/guide/topics/providers/document-provider.html 请参阅它以获取更多信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-17T08:24:38.710

如果有人仍然需要它来更新版本，它会通过 Google 为 SDK >= 4.4 开发的存储访问框架进行更新。查看此 Google 网站了解更多详情：

[https://developer.android.com/guide/topics/providers/document-provider.html](https://developer.android.com/guide/topics/providers/document-provider.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T16:05:43.223

没有跨**所有设备**安装的单一文件管理应用程序。您可能希望您的应用也能在运行 Android 3.x 或更低版本的设备上运行。您最好的选择是编写自己的文件管理器。这并不像听起来那么努力，网上已经有很多关于这方面的代码。

# c# - 避免 MSSQL 中数据的并发访问

> ID：14608328
> 
> 赞同：0
> 
> 时间：2013-01-30T16:02:40.017
> 
> 标签：c#, sql-server, concurrency, queue

我们正在开发一个曾经作为单实例应用程序工作的 C# 应用程序。现在我们需要将其更改为多用户应用程序，这意味着 GUI 前端将在多个工作站上运行，同时访问单个 MS SQL Server 2008 R2 数据存储。

此应用程序管理的部分工作是基于队列的，这意味着有一个工作项池（工作项列表位于单个 SQL 表中），每个用户都可以从中“获取”下一个可用的工作项。我想要完成的是：

*   一旦工作项被用户“获取”，在第一个用户完成工作之前，其他用户不应以任何方式（包括阅读）访问它，
*   处理超时（用户在使用工作项时回家过周末）和冻结的客户端（在使用工作项时在工作站上按下重置按钮）。

我知道这是一个相当普遍的问题（更像是一项研究），所以我不期待详细的解决方案，而是有用的链接、最佳实践和/或一些关于该主题的文献。任何帮助都非常感谢，因为我完全不知道从哪里开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T16:08:22.240

我已经看到使用事务资源锁定表或列来完成此操作。例如，您将记录分配给某人（通过设置用户 ID 或其他机制），同时设置时间戳记录，说明该资源何时被锁定。在访问数据时，无论是查询数据还是尝试更新数据，您首先检查此锁定表/列以确保它可用。如果没有，您不接受更改。

这也支持超时。如果时间戳太旧，则释放锁。如果时间戳太旧，您可以自动假定释放，或者您可以编写一个计划的服务来检查过期的锁并解锁它们。我更喜欢第二种方式，因为检查锁是否存在（行的布尔逻辑或字段值是否存在[即不为空]）的成本更低。但我已经看到它是双向的。

# ios - 根据方向变化在 iPad 应用程序中旋转视图

> ID：14608331
> 
> 赞同：0
> 
> 时间：2013-01-30T16:02:42.750
> 
> 标签：ios, xcode, uiview, uiviewcontroller

我有一个 iPad 应用程序，其中加载了许多 UIViews 和图像。它在一个方向上工作正常，但现在我需要让它适用于所有方向。我正在订阅 UIDeviceOrientationDidChangeNotification。现在，一旦我知道设备朝向哪个方向，我就必须重置 UI。我现在正在做的是手动遍历每个 UIView 并更改其原点，然后该视图中的任何内容我也重新配置其原点。有没有更简单的方法来旋转视图？例子 ：

```
 - (void)orientationChanged:(NSNotification *)notification
         {
             UIDeviceOrientation oriantation;
             newOrientation=[[UIDevice currentDevice] orientation];
             switch (newOrientation) {
                   case UIDeviceOrientationLandscapeRight:
                            CGRect landscaperight = self.view.frame;
                            landscaperight.origin.x -= 768;
                            self.view.frame = landscaperight;
               break; 
         } 
```

这里的问题是我有很多观点要处理，所以任何更简单的处理这项任务的方法都会受到赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:06:44.033

使自动旋转工作的一个基本部分是设置[`autoresizingMask`](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instp/UIView/autoresizingMask)您的视图。

您可以在 IB 中直观地执行此操作，也可以像这样以编程方式执行此操作：

```
self.view.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight; 
```

上面的代码将使您的窗口适合其父视图，同时保持左、右、上、下边距不变。根据您在应用程序中使用的视图王，您可能需要使用其他调整大小标志来使您的边距灵活（即，当方向改变时移动以适应整个界面）。

这种方法适用于所有 iOS 版本。

我发现与之相关的一项有用的技术`autoresizingMask`是使用容器视图，其唯一目的是将一组子视图放在一起。例如，一组控件应该显示在与上边距固定距离的同一行上：您将控件放在容器视图内；然后让它们在容器视图中“自由移动”（通过设置灵活的上/下/左/右边距；同时让容器视图“粘”到您想要的位置。

除了这些一般性提示之外，如果不知道您要做什么以及您发现了什么问题，就无法说出更具体的内容。

如果你只支持 iOS6，你可以使用[Auto Layout](http://www.raywenderlich.com/20897/beginning-auto-layout-part-2-of-2)。

# jquery - 有没有一种简单的方法可以为视差添加“缓动”？

> ID：14608333
> 
> 赞同：1
> 
> 时间：2013-01-30T16:02:54.483
> 
> 标签：jquery, drag, parallax, easing

我创建了一个相当强大的视差。它使用“时间线”概念来显示给定帧/场景中的项目。单击触发器（日期或文本）会将用户“压缩”到该给定场景。用户还可以在视差框中单击并拖动。

所有这些都按预期工作。

但是，要求在其中添加“轻弹”或“缓动”。也就是说，当用户拖动并停止而不是仅仅在用户停止拖动的地方停止时，它需要轻轻地过冲。他们越用力滚动越多，越柔和越少。

我以伪代码方式的想法是这样的：

```
on scroll{
 startMove = getTime;
 clearTimeout(moving)
 moving =  setTimeout(){
    endTime = getTime;
    moveTime = endTime - startMove;
    speed = [decide amount to overshoot based on moveTime];
    layer1.animate({'left':layer1.position().left - (speed/layerScrollSpeed)});
 },50);
} 
```

我做了类似上面的事情，但它很跳跃，而且图层的移动也超出了他们的需要。

鉴于项目的敏感性，我无法共享代码和链接。但是，任何想法、链接、建议或“嘿，试试这个”都会有所帮助。谢谢！

# scala - 在 Play 中获取当前循环的索引！2 斯卡拉模板

> ID：14608334
> 
> 赞同：23
> 
> 时间：2013-01-30T16:02:59.340
> 
> 标签：scala, playframework-2.0

在玩！1，可以在循环中获取当前索引，使用以下代码：

```
#{list items:myItems, as: 'item'}
    <li>Item ${item_index} is ${item}</li>
#{/list} 
```

Play2 中是否有类似的东西来做类似的事情？

```
@for(item <- myItems) {
    <li>Item ??? is @item</li>
} 
```

`_isLast`和的问题相同`_isFirst`。

ps：[这个问题](https://stackoverflow.com/questions/12251504/play2-template-incrementing)非常相似，但解决方案暗示修改代码以返回 a`Tuple (item, index)`而不仅仅是`item`.

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-01-30T21:12:16.003

是的，幸运的`zipWithIndex`是*内置*功能有更优雅的使用方式：

```
@for((item, index) <- myItems.zipWithIndex) {
    <li>Item @index is @item</li>
} 
```

索引是从 0 开始的，所以如果你想从 1 而不是 0 开始，只需将 1 添加到当前显示的索引：

```
<li>Item @{index+1} is @item</li> 
```

**PS：**回答你的另一个问题 - 不，没有隐含的`indexes`, `_isFirst`,`_isLast`属性，无论如何你可以在循环内编写简单的 Scala 条件，基于压缩索引（`Int`）和`size`列表（`Int`以及）的值。

```
@for((item, index) <- myItems.zipWithIndex) {
    <div style="margin-bottom:20px;">
        Item @{index+1} is @item <br>
             @if(index == 0) { First element }
             @if(index == myItems.size-1) { Last element }
             @if(index % 2 == 0) { ODD } else { EVEN }
    </div>
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-30T16:09:07.007

链接问题中的答案基本上是您想要做的。 `zipWithIndex`将您的列表（即 a `Seq[T]`）转换为 a `Seq[(T, Int)]`：

```
@list.zipWithIndex.foreach{case (item, index) =>
  <li>Item @index is @item</li>
} 
```

# sml - let-in 表达式中的错误代码

> ID：14608337
> 
> 赞同：0
> 
> 时间：2013-01-30T16:03:02.247
> 
> 标签：sml

我有这个 SML 代码。我不知道为什么我不能编译这个：

```
fun score = 
    let
       val sum = 3; (* error at this line : SYNTAX ERROR : inserting LPAREN *)
       if sum div 2 > 0
       then sum = 0
       else sum = 1
       (*some other code*)
    in
       sum (* I want to return sum after some steps of calculation *)
    end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T16:27:00.227

您的代码存在更多问题，而不是 jacobm 指出的。
您还缺少一个函数参数。SML 中的函数始终采用一个参数。例如

```
fun score () = 
    let val sum = 3
        val sum = if sum div 2 > 0
                  then sum = 0
                  else sum = 1
    in
       sum
    end 
```

但是，这仍然没有多大意义。因为表达式`sum = 0`和`sum = 1`计算结果为布尔值。

let 表达式用于进行一些仅在`in ... end`零件内部可见的局部声明。因此，您不想用 sum 进行的计算可能应该在`in ... end`部件内部完成，除非您不想将其表示为函数的一种方式。

一个这样的例子是

```
fun score () = 
    let val sum = 3
    in
      if sum div 2 > 0
      then ...
      else ...
    end 
```

如果我们看一下 let 表达式的语法，它可能更有意义

```
let
  <declaration>
in
  <expr> ; ... ; <expr>
end 
```

由于 if-then-else 是一个表达式，它不能单独出现在“声明部分”中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T16:17:07.417

这种语法是不合法的——在两者之间`let`，`in`你被允许拥有的只是一系列`val name = expr`片段。不过，您可以这样做：

```
fun score = 
    let val sum = 3
        val sum = if sum div 2 > 0
                  then sum = 0
                  else sum = 1
    in
       sum
    end 
```

我认为这`sum`两个变量名都使用有点奇怪，但它是合法的。

# android - 如何在 Eclipse ADT 中编辑 HTML/CSS/Javascript

> ID：14608338
> 
> 赞同：14
> 
> 时间：2013-01-30T16:03:02.690
> 
> 标签：android, html, eclipse, cordova, web

我安装了 ADT 包（eclipse + android sdk + adt 插件）现在我想用 phonegap 构建 android 应用程序，问题是 ADT eclipse 显然不包含任何 html/css/JS 编辑器。我试图安装 WPA 插件，但它不起作用，它告诉我它需要 JSF（到底是什么！？）。

我在网上找不到任何东西是正常的吗？我是世界上唯一使用 phonegap 的人吗？我应该使用另一个 IDE 或者我可以安装哪个插件来在 eclipse 中进行 Web 编辑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:09:48.003

文件 -> 新建 -> 其他 -> 键入 html 或 javascript 或 css

# extjs - Extjs，动态过滤网格

> ID：14608339
> 
> 赞同：1
> 
> 时间：2013-01-30T16:03:02.673
> 
> 标签：extjs, grid, extjs4, filtering, extjs4.1

我正在使用 extjs4 进行开发。
如图所示，我有两个网格，当我单击`Grid Panel 1`该 contanis的行时`Number 1`，我希望`Grid Panel 2`仅显示包含`Number 1`.

![在此处输入图像描述](../Images/8d933dbae69e962fde9b4d0f703c1181.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T07:02:12.700

这非常简单。订阅第一个网格的选择事件，并在该处理程序中过滤第二个网格的存储。就是这样。

```
grid1.on('select', function(grid,record) { 
   grid2.store.clearFilter(true); // see http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-method-clearFilter
   grid2.store.filter('Number', record.get('Number');
},this); 
```

# actionscript-3 - Flex mx:Legend 在其容器外绘制

> ID：14608341
> 
> 赞同：0
> 
> 时间：2013-01-30T16:03:20.967
> 
> 标签：actionscript-3, apache-flex, flex3

我有一个带有图例的图表

```
<s:VGroup  width="100%" height="100%">

        <mx:LineChart width="100%" height="100%" id="lineChart" showDataTips="true" dataTipFunction="columnChartDataTipFunction">
            <mx:verticalAxis>
                <mx:LinearAxis id="v1" title="Position" labelFunction="labelFuncY"/>
            </mx:verticalAxis>
            <mx:horizontalAxis>
                <mx:CategoryAxis
                    categoryField="kh_formatted_date" />
            </mx:horizontalAxis>
            <mx:verticalAxisRenderers>                
                <mx:AxisRenderer id="vax" axis="{v1}" placement="top"/>
            </mx:verticalAxisRenderers>
        </mx:LineChart>

        <s:BorderContainer width="100%" borderColor="#ff0000" borderWeight="4">

        <mx:Legend verticalGap="0" dataProvider="{lineChart}" clipContent="true" maxWidth="100"/>
        </s:BorderContainer>
    </s:VGroup> 
```

我有这个结果，但我期待滚动条，maxWidth 似乎也被忽略了。 ![在此处输入图像描述](../Images/3c8fd9ff1b25abd09113c82394983d88.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:40:22.030

改用这个结构

```
 <s:BorderContainer width="100" borderColor="#ff0000" borderWeight="4">

        <s:Scroller left="0" right="0" top="0" bottom="0">
            <s:Group left="0" right="0" top="0" bottom="0">
                <mx:Legend verticalGap="0" dataProvider="{myChart}" clipContent="true"/>
            </s:Group>
        </s:Scroller>

    </s:BorderContainer> 
```

要控制图例的宽度，您可以使用 BorderContainer 的 width 属性

![在此处输入图像描述](../Images/bf7ff05468cd1ae95a4582acc6b22e26.png)

# java - GRAILS - 使用客户端证书的 Web 服务客户端

> ID：14608348
> 
> 赞同：5
> 
> 时间：2013-01-30T16:03:27.113
> 
> 标签：java, web-services, grails, ssl

我正在尝试编写 Web 服务测试，它需要使用客户端证书连接到 Web 服务。我已经设置了一个接受客户端证书的服务器，并且在使用 .NET 客户端应用程序时它可以正常工作。客户端证书与 spring 安全插件一起用作身份验证机制，因此我需要一种方法来编写一个客户端，该客户端可以在执行请求时使用我的自定义证书。

现在我正在尝试编写一个集成测试来测试此服务，但是在执行请求时我找不到任何附加客户端证书的方法。我为 groovy 尝试了 wsclient，为 groovy 尝试了 ws-lite，甚至为 java 尝试了 cxf。仍然没有运气。

有什么方法可以将我自己的自定义客户端证书附加到 Web 服务客户端请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:35:29.260

可以使用HttpBuilder，具体看这里：[http ://groovy.codehaus.org/modules/http-builder/apidocs/groovyx/net/http/AuthConfig.html](http://groovy.codehaus.org/modules/http-builder/apidocs/groovyx/net/http/AuthConfig.html)

# haskell - IO(Int) 列表的最大值

> ID：14608349
> 
> 赞同：1
> 
> 时间：2013-01-30T16:03:27.097
> 
> 标签：haskell

我有以下示例代码

```
let x = [return 1::IO(Int), return 2::IO(Int)] 
```

所以 x 是 IO(Int)s 的列表。如果列表中的事物是 Ords，maximum 是一个返回列表最大值的函数。如何“映射”最大值以在此 IO(Int) 列表上运行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T16:12:00.537

首先[`sequence`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v%3asequence)将数组放入`IO [Int]`，然后[`maximum`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v%3amaximum)使用[`liftM`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Control-Monad.html#v%3aliftM)：

```
liftM maximum (sequence yourList) :: IO Int 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-30T16:14:00.460

这里的关键点是您无法比较`IO`操​​作，只能比较这些操作产生的值。要执行比较，您必须执行这些操作以获取结果列表。幸运的是，有一个函数可以做到这一点：`sequence :: (Monad m) => [m a] -> m [a]`. 这需要一个动作列表并执行它们以产生一个给出结果列表的动作。

要计算最大值，您可以执行类似的操作

```
x = [return 1::IO(Int), return 2::IO(Int)]
...
biggest = maximum `fmap` sequence x :: IO [Int] 
```

# android - 使用 Robotium 的不同测试中，活动不会重新启动

> ID：14608353
> 
> 赞同：2
> 
> 时间：2013-01-30T16:03:37.003
> 
> 标签：android, robotium

我正在使用 Robotium 测试我的应用程序的登录，但遇到了一些问题。我有两种不同的用户类型，所以我做了 3 次测试。每种类型一个，另一个登录失败。如果我单独执行它们，它们都会成功，但是如果我运行所有测试用例，它会运行一个，执行 tearDown(solo.finishOpenedActivities) 并且它不会重新启动活动以执行其他测试。因此，在第二个测试中，当我要求 EditText 时，它说不可用。

这是我的代码：

```
public class TestLogin extends ActivityInstrumentationTestCase2<MainActivity> {

private Solo solo;

public TestLogin() {
    super("com.truekke4.test", MainActivity.class);
}

@Override
protected void setUp() throws Exception {
    solo = new Solo(getInstrumentation(), getActivity());
    super.setUp();
}

@Override
public void tearDown() throws Exception {
    getActivity().logout();
    solo.finishOpenedActivities();
    super.tearDown();
}

public void testUsuarioDesconocido() {
    solo.clearEditText(0);
    solo.enterText(0, "usuario desconocido");
    solo.assertCurrentActivity("Error", MainActivity.class);
    solo.clickOnButton("OK");
    solo.clickOnButton("OK");
    solo.assertCurrentActivity("Error", MainActivity.class);
}

public void testUsuario() {
    solo.clearEditText(0);
    solo.enterText(0, "usuario");
    solo.clickOnButton("OK");
    solo.assertCurrentActivity("Error", InicioUsuarioActivity.class);
}

public void testEmpresa() {
    solo.clearEditText(0);
    solo.enterText(0, "empresa");
    solo.clickOnButton("OK");
    solo.assertCurrentActivity("Error", InicioPymeActivity.class);
} 
```

}

我必须手动重新启动活动？Create and Intent 和 startActivity(intent)？

我不必完成已打开的活动？或者我必须完成活动，但在 setUp() 中重新启动它们/它。如何重新启动或创建活动以使 Robotium 可识别？

帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T15:07:18.173

我相信您的问题是由于您覆盖`setUp()`ActivityInstrumentationTestCase2 中的方法而不是使用 Robotium 方法而引起的。在您的测试类中，Robotium 会查找带有签名的方法`public void setUp()`来配置其测试，这可能会让人感到困惑，因为它与可以被覆盖的方法具有相同的名称。我不确定何时或多久调用一次受保护的 setUp，但我知道公共设置是初始化独奏的最佳场所，因为 Robotium 保证在每次单独测试之前都会调用它。尝试改变：

```
@Override
protected void setUp() throws Exception 
```

至：

```
public void setUp() throws Exception 
```

使用相同的方法主体（但没有 @Override 注释），看看是否允许您运行所有测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T07:54:55.247

你有代码的地方：

```
@Override
protected void setUp() throws Exception {
    solo = new Solo(getInstrumentation(), getActivity());
    super.setUp();
} 
```

做了：

```
@Override
protected void setUp() throws Exception {
    super.setUp();
    solo = new Solo(getInstrumentation(), getActivity());
} 
```

如果由于某种原因这不起作用，您的类在拆解中没有被正确清理，您可以调用 setActivity(null) 以使 getActicity() 再次启动活动，或者自己手动调用 launchActivity。

# ftp - 在生产 IIS 7.5 网站上启用 WebDav 是否安全可靠？

> ID：14608356
> 
> 赞同：0
> 
> 时间：2013-01-30T16:03:45.910
> 
> 标签：ftp, iis-7.5, webdav, publishing

我们正在寻找一种方法来安全地将新网站更新发布到托管在 IIS 7.5 上的生产网站。我们考虑过 FTP、VPN，现在考虑 WebDav，因为它似乎是最容易打开、配置和使用的。

然而，我们担心的一个问题是，它可以在没有任何奇怪的副作用的情况下使用，例如它写入 web 目录的奇怪文件，类似于 FrontPage 服务器扩展。而我们最大的担忧是打开安全漏洞。

有没有人在这方面有任何经验或建议？

此外，还有其他人使用与我列出的工具（FTP、TPN、WebDav）不同的工具解决了这个问题吗？

非常感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:56:42.383

Microsoft 的[Web Deploy](http://www.iis.net/downloads/microsoft/web-deploy)正是为此目的而存在的。您*可以*使用 WebDAV 进行部署，但它会增加不必要的复杂性。

# sql-server - SQL Server 6.5：关于空白和空字符串的奇怪行为

> ID：14608360
> 
> 赞同：2
> 
> 时间：2013-01-30T16:03:58.920
> 
> 标签：sql-server

SQL Server 6.5 似乎不区分零长度字符串和包含单个空格的字符串。

在所有版本的 SQL Server 中，在[比较中都会](http://support.microsoft.com/kb/316626)[忽略尾随空格，`=`](http://support.microsoft.com/kb/316626)但这个问题是不同的。

此 SELECT 返回 1：

```
SELECT DATALENGTH('') 
```

我有一个表，其中包含此更新似乎没有效果的`varchar(20)`列：`FAX`

```
UPDATE CLIENT
SET FAX = ''  -- The existing field consists only of a single space
WHERE ClientNo = 124 
```

即使在运行此更新后，该字段仍包含空格。

修剪仅包含空格的字段会导致 NULL 值，这对我们的目的来说是不可取的。

是否可以用空字符串替换空白值？我该怎么办？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-30T16:19:41.040

SET ANSI_NULLS ON 有什么不同吗？

# iphone - iPhone 5 Retina：水平滚动的自定义电子邮件模板（显示错误）

> ID：14608361
> 
> 赞同：0
> 
> 时间：2013-01-30T16:03:59.653
> 
> 标签：iphone, css, html-email, iphone-5

我正在手工编写几个电子邮件模板。它们在 iPhone 4/4S 和台式机上看起来很棒，但由于某种原因，iPhone 5 Retina 上会出现水平滚动。我想避免任何水平滚动。

我查看了许多其他行业领先的公司电子邮件模板的源代码，发现它们没有遇到同样的问题，但实际上并没有采用任何统一的方法。有些使用媒体查询，有些不使用。

我的模板的宽度在 550px - 600px 之间。当谈到视网膜和像素密度时，有什么我不知道的吗？这与表格有什么关系？

**更新：http:** [//jsfiddle.net/AndrewHenderson/DvXa2/](http://jsfiddle.net/AndrewHenderson/DvXa2/)

```
<!doctype html>

<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>

<title>Test Template</title>

<style type="text/css">
@media only screen and (-webkit-min-device-pixel-ratio: 2) and (max-device-width: 480px) {
  table {
    width: 480px !important;
  }
}
</style>
</head>

<body>

<table width="600" style="font-family:Helvetica, Arial, sans-serif;background-color:#ffffff;color:#111;border-spacing:0;border-collapse:collapse;">
<tr>
  <td>
    <table width="600" style="border-spacing:0;border-collapse:collapse;">
      <tr>
        <td style="background-color:#eeeeee;"></td>
      </tr>
    </table>
    <table width="600" style="border-spacing:0;border-collapse:collapse;">
      <tr>
        <td style="background-color:#eeeeee;"></td>
        <td width="254" style="background-color:#EFEFE4;color:#9A3313;font-size:30px;vertical-align:middle;text-align:right;padding-top:9px;">
          <a href="http://placehold.it/165x31" style="border:0;"><img src="http://placehold.it/165x31" alt="Xxxxx" style="width:160px;min-height:31px;font-size:14pt;color:#9A3313;"></a>
        </td>
        <td width="334" style="background-color:#EFEFE4;color:#9A3313;font-size:28px;vertical-align:middle;padding:5px 0 0 10px;">
          Shopping Request
        </td>
        <td style="background-color:#eeeeee;"></td>
      </tr>
    </table>
    <table width="600" style="border-spacing:0;border-collapse:collapse;">
      <tr>
        <td style="background-color:#eeeeee;"></td>
      </tr>
    </table>
    <table width="600" style="border-spacing:0;border-collapse:collapse;">
      <tr>
        <td style="background-color:#eeeeee;"></td>
        <td width="144" style="vertical-align:top;padding:20px 0 0 15px;">
          <a href="${facebookProfileLink}">
          <img src="http://placehold.it/125" alt="" width="125"></a>
        </td>
        <td width="425" style="padding:20px 0 5px;line-height:22px;">
          <strong>I\'m looking for:</strong> ${product.name} <br>
          <strong>More about me:</strong>

          <ul style="list-style:disc;margin:5px 0 0;padding:15px;line-height:24px;">
            <li><strong>My Profile: </strong><a href="${facebookProfileLink}" style="color:#9A3313">facebook.com/${user.screenName}</a></li>
            <li><strong>Location:</strong> ${distance} miles from your store</li>
            <li><strong>Price Range:</strong> ${priceLevel}</li>
          </ul>

        </td>
        <td width="14"></td>
        <td style="background-color:#eeeeee;"></td>
      </tr>
    </table>
    <table width="600" style="border-spacing:0;border-collapse:collapse;">
      <tr>
        <td style="background-color:#eeeeee;"></td>
        <td width="159"></td>
        <td width="425" style="background:#eeeeee;"></td>
        <td width="14"></td>
        <td style="background-color:#eeeeee;"></td>
      </tr>
    </table>
    <table width="600" style="border-spacing:0;border-collapse:collapse;">
      <tr>
        <td style="background-color:#eeeeee;"></td>
        <td width="159"></td>
        <td width="425" style="padding:8px 0 30px;">
          To make a suggestion to ${user.firstName}, reply to this email with a picture and a short message. iPhone users, respond via the free&nbsp;<a href="#" style="color:#9A3313">Xxxxx app</a>.
        </td>
        <td width="14"></td>
        <td style="background-color:#eeeeee;"></td>
      </tr>
    </table>
    <table width="600" style="border-spacing:0;border-collapse:collapse;">
      <tr>
        <td style="background-color:#eeeeee;"></td>
      </tr>
    </table>
    <table width="600">
      <tr>
        <td style="font-size:85%;color:#555;width:580px;padding:5px 10px 0;">Sent via&nbsp;<a href="#" style="color:#9A3313">Xxxxx</a>, an exclusive service connecting shoppers with the best local stores.<br>
        To stop receiving these requests,&nbsp;<a href="#" style="color:#9A3313">click here</a>. 980 Xxxxx Street #X, San Francisco XXXXX</td>
      </tr>
    </table>
  </td>
</tr>
</table>

</body>
</html> 
```

如果需要，我可以用更多细节更新问题。谢谢！

# html - 将 facebook object.html 文件上传到博客并出现错误

> ID：14608364
> 
> 赞同：0
> 
> 时间：2013-01-30T16:04:07.073
> 
> 标签：html, facebook, facebook-graph-api, object

用于使用 Object Debugger 进行调试的 URL：http: [//www.something2gain.blogspot.in/p/blog-page_29.html](http://www.something2gain.blogspot.in/p/blog-page_29.html)

这是我的对象 .html 文件中的代码：

```
<head>  
  <meta property="og:type"   content="firstandroidapp_k:valentine_" /> 
  <meta property="og:url"    content="http://something2gain.blogspot.in/p/blog-page_29.html" /> 
  <meta property="og:title"  content="Sample Valentine " /> 
  <meta property="og:image"  content="https://fbstatic-a.akamaihd.net/images/devsite/attachment_blank.png" /> 

 </head> 
```

它显示错误：

```
Meta Tags In Body:  You have tags ouside of your . This is either because your was malformed and they fell lower in the parse tree, or you accidentally put your Open Graph tags in the wrong place. Either way you need to fix it before the tags are usable. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:10:30.623

看起来您正在将一个完整的 HTML 文档嵌入到另一个文档中，包括第二个`html`,`head`和`body`元素，这当然完全是胡说八道。

修复您的 HTML 代码，然后重试。[http://validator.w3.org/check?uri=http://something2gain.blogspot.in/p/blog-page_29.html](http://validator.w3.org/check?uri=http://something2gain.blogspot.in/p/blog-page_29.html)

# calendar - CalendarWidget 在 Plone 4.2.4 + PloneFormGen 上损坏

> ID：14608365
> 
> 赞同：3
> 
> 时间：2013-01-30T16:04:09.757
> 
> 标签：calendar, plone, upgrade, ploneformgen

我正在将站点从 4.0.9 迁移到 4.2.4。我有 PloneFormGen 表单，它有一个日期字段，在视图中呈现该字段时它会中断。在这种情况下，在与之关联的 CalendarWidget 上。

违规代码已在此处添加[https://github.com/plone/Products.CMFPlone/commit/5044d9159be33464ca8f79193af97d2822e833f9](https://github.com/plone/Products.CMFPlone/commit/5044d9159be33464ca8f79193af97d2822e833f9)

这条线`minute_step minute_step | python: 5;`没有以某种方式正确评估，我得到了

```
 Module Products.PageTemplates.ZRPythonExpr, line 48, in __call__
   - __traceback_info__: date_components_support_view.result(inputvalue, 0, starting_year, ending_year, future_years, minute_step)
  Module PythonExpr, line 1, in <expression>
  Module plone.app.form.widgets.datecomponents, line 195, in result
TypeError: unsupported operand type(s) for +: 'int' and 'NoneType' 
```

而`NoneType`价值来自`minute_step`。

更改该行以`minute_step python: minute_step or 5;`使其再次工作。

我是唯一一个在做这个实验的人吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:33:24.413

你并不是唯一的一个。这是固定在 Products.Archetypes 的主人提供一个默认值：[https ://github.com/plone/Products.Archetypes/blob/master/CHANGES.txt](https://github.com/plone/Products.Archetypes/blob/master/CHANGES.txt)

请求发布或从 repo 的克隆运行。

# stata - Stata - 移动有限产品

> ID：14608369
> 
> 赞同：0
> 
> 时间：2013-01-30T16:04:15.817
> 
> 标签：stata

我正在寻找一个产品，该产品在给定实例之前为整个数据集获取值 15 个观察值。

我的数据集有日期（按时间顺序），但有差距。这是一个例子：

```
 date    wage_thousands    moving_15_day_product
1/1/2000        3                      .
1/3/2000        2                      .
1/7/2000        3                      .
1/10/2000       6                      .
1/12/2000       6                      .
1/14/2000       2                      .
1/15/2000       1                      .
1/16/2000       1                      .
1/19/2000       2                      .
1/21/2000       1                      .
1/22/2000       2                      .
1/24/2000       3                      .
1/26/2000       1                      .
1/28/2000       1                      .
1/29/2000       2                      .
2/1/2000        1                    31,104
2/10/2000       5                    51,850
2/12/2000       9                   233,280 
```

我希望自动创建moving_15_day_product，因为我的数据集很大。我尝试了一些变体`inrange`但它不起作用，也许我使用不正确。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:33:05.243

如果您专注于对数的移动总和，则移动产品更容易考虑，您需要取幂才能获得移动产品。

过去 15 天的总和就是到现在的累计总和与到 15 天前的累计总和之间的差值。

只要您`tsset`使用数据并应用时间序列运算符，差距就不是特别成问题。

所以，草图是

```
 tsset date 
 gen sumlog = sum(log(wage)) 
 gen prod15 = exp(sumlog - L15.sumlog) 
```

但是，我没有对此进行测试。此外，统计而非编程评论是，与仅使用对数刻度相比，使用移动产品似乎很尴尬，但您选择的度量可能取决于您所在领域的惯例。

# java - 在 JavaSE 和 Web 应用程序之间共享应用程序上下文

> ID：14608373
> 
> 赞同：2
> 
> 时间：2013-01-30T16:04:28.820
> 
> 标签：java, spring

我有一个运行嵌入式 Jetty Web 服务器的 Java SE 应用程序，该服务器托管一个 RESTful Web 服务。我想在 Java SE 部分和在 Jetty 中运行的 Web 应用程序中使用 Spring。一些bean，例如dao 和实体管理器，需要在两个部分之间共享。当我启动应用程序时，我得到了 bean 和实体管理器的重复版本。

```
WARN EntityManagerFactoryRegistry.addEntityManagerFactory:80 - HHH000436: Entity manager factory name (persistenceUnit) is already registered.  If entity manager will be clustered or passivated, specify a unique value for property 'hibernate.ejb.entitymanager_factory_name' 
```

在 Java SE 部分，我做的第一件事是创建应用程序上下文。

```
ApplicationContext context = new ClassPathXmlApplicationContext("classpath:server-context.xml","classpath:application-context.xml"); 
```

在 web 应用程序中，Spring 是在 web.xml 中配置的：

```
<servlet>
    <servlet-name>Jersey REST Service</servlet-name>
    <servlet-class>com.sun.jersey.spi.spring.container.servlet.SpringServlet</servlet-class>
    <init-param>
        <param-name>com.sun.jersey.spi.container.ResourceFilters</param-name>
        <param-value>example.restful.server.filter.SecurityFilterFactory</param-value>
    </init-param>
    <init-param>
        <param-name>com.sun.jersey.config.property.resourceConfigClass</param-name>
        <param-value>com.sun.jersey.api.core.PackagesResourceConfig</param-value>
    </init-param>
    <init-param>
        <param-name>com.sun.jersey.config.property.packages</param-name>
        <param-value>example.restful.rest</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath:application-context.xml</param-value>
</context-param>
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 
```

如何让 Web 应用程序使用已经创建的应用程序上下文而不是复制所有 bean？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T16:47:17.087

我认为您可以创建自己的`ContextLoaderListener`并覆盖`createWebApplicationContext`以返回 JavaSE 应用程序的 ApplicationContext（假设您有某种 ApplicationContextHolder 来保持对它的静态访问）。

这似乎很容易，但是您需要返回 a`WebApplicationContext`而不是 a`ClassPathXmlApplicationContext`来执行此操作，我认为您可以执行以下操作：

```
public class MyContextLoaderListener extends ContextLoaderListener{
    protected WebApplicationContext createWebApplicationContext(ServletContext sc,
                                                        ApplicationContext parent){
        ApplicationContext javaSEAppContext = AppContextHolder.getAppContext();
        GenericWebApplicationContext context = new GenericWebApplicationContext(servletContext);
        context.setParent(javaSEAppContext);
        return context;
    }
} 
```

当然还有适应你的 web.xml

```
 <!-- <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath:application-context.xml</param-value>
    </context-param> -->
    <listener>
        <listener-class>com.company.MyContextLoaderListener</listener-class>
    </listener> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:22:19.070

另一种方法是将您的 bean 注册为 JNDI，然后查找 JNDI 以获取 bean 的句柄。不幸的是，据我所知，有一个 MBeanExporter 来注册 Mbean，但没有任何东西可以将 bean 绑定到服务器的 JNDI 树。

然而，开发客户 JNDI 导出器并不是很困难，因为 spring 具有 JNDI - ***JndiTemplate***的钩子。因此，您需要做的就是创建一个实现 DisposableBean 并具有 jndiName 和 jndiBean 等属性的类，并使用以下内容绑定bean 到 jndi 名称。

```
JndiTemplate.bind() 
```

spring xml 应该是这样的

```
<bean id="testBean" class="com.test.testBean"/>

<bean class="com.framework.JndiExporter">
   <property name="jndiBean" ref="testBean" />
   <property name="jndiName" value="com.test.testBean"/>
</bean> 
```

注册后，您可以使用通常的方式来查找此 jndiName 的 jndiTree。

希望这有助于找到更清洁的方法！

# c# - antlr 使用 c# 解析

> ID：14608377
> 
> 赞同：0
> 
> 时间：2013-01-30T16:04:38.417
> 
> 标签：c#, .net, antlr, antlr3

我想编写一个简单的 CSS 解析器，它将从 css 文件中提取标识符。我有一个[语法](http://www.antlr3.org/grammar/1240941192304/css21.g)，我把它编译成 .cs 文件，现在我需要编写 Main 函数。现在我有这样的事情：

```
var lex = new css21Lexer(new ANTLRStringStream("}"));
var tokens = new CommonTokenStream(lex);

var parser = new css21Parser(tokens);
parser.styleSheet(); 
```

但是当我运行程序时，什么也没有发生。由于输入不正确，我预计会出现某种异常。我还尝试将代码添加到某些作品中，但该代码未执行。我如何实际使用生成的解析器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T22:17:26.263

ANTLR 的一大优点是您可以调试生成的解析器代码并在解析时跟随它。所以启动你的调试器。

ANTLR 将跳过无法正确解析的标记并将其报告为错误。它的报告方式取决于`reportError()`功能，它可能对您的目标语言没有任何作用。在那里也设置一个断点以查看发生了什么。

# asp.net - ASP.NET 从 iFrame 中刷新父页面

> ID：14608380
> 
> 赞同：1
> 
> 时间：2013-01-30T16:04:47.057
> 
> 标签：asp.net, vb.net, iframe

在 ASP.NET 中工作。我有一个主页，里面有一个 iFrame。主页列出付款人姓名，iFrame 列出所选付款人的详细信息。在 iFrame 页面上，我有一个链接按钮，用于启动模式对话窗口并允许用户将现有付款人复制到新付款人。当我关闭模式对话框窗口时，我想刷新主页以包含新添加的付款人。

我读到这个：[asp.net Refresh base page from iframe](https://stackoverflow.com/questions/6368948/asp-net-refresh-base-page-from-iframe) ，但它对我不起作用。

我的 iFrame aspx 页面具有以下内容：

```
function RefreshParent() {
window.parent.location.href = window.parent.location.href;
} 
```

iFrame 代码隐藏页面在 Page_Load 中有以下内容：

```
ClientScript.RegisterStartupScript(Me.GetType, "RefreshParent", "<script type=text/javascript>RefreshParent();</script>", True) 
```

当我关闭模式对话框窗口时，父页面不会刷新，但这会出现在屏幕左下角的 iFrame 页面下：

//]]>

RegisterStartupScript 仅在某些条件下发生，但我已经在调试中逐步完成并确认满足这些条件，并且该行代码正在执行。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:18:29.583

弄清楚了。我不得不将代码隐藏页面更改为：

```
ClientScript.RegisterStartupScript(Me.GetType, "RefreshParent", "<script type=text/javascript>RefreshParent();</script>", False) 
```

现在屏幕正确刷新并且 //]]> 没有出现。

# com - 什么控制 COM 调用的超时？

> ID：14608383
> 
> 赞同：4
> 
> 时间：2013-01-30T16:04:55.657
> 
> 标签：com

我们的软件可以通过 COM 与 Excel 进行通信。一个例子是 Excel 调用了一个 COM 函数，它使我们的软件响应结果。但是，如果我们的软件需要超过 3 分钟的时间来计算这些结果，那么 COM 引用会由于某种原因而被删除。

这只是 COM 的本质（如果在特定时间后没有收到对呼叫的响应，则超时）还是我们做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T10:02:45.020

COM 没有通话超时。如果您开始一个呼叫并且服务器在处理它时进入一个无限循环，则呼叫将永远持续，除非客户端和 COM 服务器之间存在通信问题。

但是有[网络连接问题的超时](http://support.microsoft.com/kb/255198)。根据您描述的症状，它看起来像是一些沟通问题。

# jquery - 选择动态选择的选项：使用 JSP + Jquery

> ID：14608388
> 
> 赞同：0
> 
> 时间：2013-01-30T16:05:08.873
> 
> 标签：jquery, jsp

我有一个包含 4 个链接的页面，每个链接如下所示。

```
 <a href="contact.jsp?subject=one">Link1</a>
 <a href="contact.jsp?subject=two">Link2</a>
 <a href="contact.jsp?subject=three">Link3</a>
 <a href="contact.jsp?subject=Four">Link4</a> 
```

contact.jsp 只是一个表单，它有一个文本框和一个带有 4 个选项的表单。每当用户点击上面的链接时，它应该进入联系表单，其中实际的主题选项根据 HREF 链接中传递的查询参数（主题）选择。

可以在Jquery中做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:10:46.570

`selected`选定的选项由HTML`<option>`元素中是否存在属性来标识。

只需让 JSP 相应地生成所需的 HTML。

```
<select name="subject">
    <option value="one" ${param.subject == 'one' ? 'selected' : ''}>one</option>
    <option value="two" ${param.subject == 'two' ? 'selected' : ''}>two</option>
    <option value="three" ${param.subject == 'three' ? 'selected' : ''}>three</option>
    <option value="four" ${param.subject == 'four' ? 'selected' : ''}>four</option>
</select> 
```

不需要奇怪的 JS/jQuery 变通方法。无论如何，它们都是为了渐进增强。换句话说，你的 webapp 应该以这样的方式设计/开发，即使在禁用 JS 的情况下它也能保留核心功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:11:09.947

只要您在 URL 中列出了主题，您就可以通过以下方式获取它：

```
$(document).ready(function(){
    function getURLParameter(name) {
        return decodeURI(
            (RegExp(name + '=' + '(.+?)(&|$)').exec(location.search)||[,null])[1]
        );
    }
    $('#mySelect').val(getURLParameter('subject'));
}); 
```

然后只需确保选择框选项的值对应于“一、二、三”和“四”的可能性。

为了回应您在下面的评论，如果您想检查该值并可能显示文件上传输入，代码可能如下所示：

```
$(document).ready(function(){
    function getURLParameter(name) {
        return decodeURI(
            (RegExp(name + '=' + '(.+?)(&|$)').exec(location.search)||[,null])[1]
        );
    }
    $('#mySelect').val(getURLParameter('subject'));
    if($('#mySelect').val() == 'three'){
        $('#myFileUpload').show();
    }
}); 
```

# android - 找不到 R 类

> ID：14608391
> 
> 赞同：4
> 
> 时间：2013-01-30T16:05:15.100
> 
> 标签：android

当我打开eclipse时，`R class`我的项目中的消失了。为什么？
我有 eclipse juno 和最新版本的 android SDK。

`R class`不会重新生成，因为代码中有错误...我
该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T16:07:03.083

尝试***项目***->***清洁***

如果失败，**修复错误**并再次**构建**项目，
将`R class`重新生成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T16:06:49.523

您是否尝试过**重建**整个项目？您可以使用菜单项*Project -> Clean*来做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T19:20:46.950

在 XML 资源中查找错误；这些将阻止 R 的构建，以及代码中的错误。

Eclipse 中的“错误”选项卡是您的朋友。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-30T12:32:35.240

清理您的项目并重建它

**构建/清理项目**

**构建/重建项目**

在安卓工作室

谢谢你

# c - 使用 OpenGL 进行像素完美的 2D 渲染

> ID：14608395
> 
> 赞同：4
> 
> 时间：2013-01-30T16:05:32.037
> 
> 标签：c, opengl

是否可以设置一个 OpenGL 场景以实现像素完美的渲染和像素块传输？我注意到通过以下方式设置场景：

```
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
glOrtho(0.0, width, height, 0.0, 0.0, 1.0); 
```

然后使用以下方法绘制一个像素：

```
glBegin(GL_POINTS);
glVertex2i(0, 0);
glEnd(); 
```

*并非*始终将其绘制在每个硬件配置的左上角像素上（有时它位于左侧一个像素，或左上角下方一个像素）。我意识到这可能是由于图形驱动程序对 OpenGL 的不同实现，但是有没有办法让它左上角的像素是（0,0），右下角是（width-1，height-1 ) 始终如一？这似乎很奇怪，这不是标准化的东西......

我见过一些使用 (0.375, 0.375) 或 (0.5, 0.5) 的翻译的“黑客”，但这似乎也解决了某些配置而不是其他配置。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T21:33:11.570

**编辑**：当当，这是翻译。更新。

您还必须考虑*像素也有大小*。这就是“翻译黑客”的目的。如果最左边的像素应该有一个*中心*坐标`0.0`，那么它的左边界就在`-0.5`- ，这就是剪裁平面应该在的位置。类似地，如果最右边的像素应该有一个*中心*坐标`width - 1`，那么它的右边界在`(width - 1) + 0.5`- 并且那是该剪切平面应该在的位置。

所以试试：

```
glOrtho(-0.5, (width - 1) + 0.5, (height - 1) + 0.5, -0.5, 0.0, 1.0); 
```

所以这就是翻译的来源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T16:56:19.300

在第一次检查时，它似乎应该可以工作，并且如果实现偏移了一个像素，我怀疑它们可能不符合规范。然而，这也可能是由于视图被颠倒了，并且一些不准确性逐渐出现并导致舍入问题。我不相信是这样，但如果我想做像素完美的渲染，我不会从引入不必要的变换开始。

无论如何，我很可能会完全避免使用固定功能管道，只需确保使用我自己的变换计算顶点着色器中的正确坐标。所以这是我的第一个建议——现代可编程管道让您可以更好地控制正在发生的事情。

如果做不到这一点，至少尝试以正确的方式渲染事物，看看这是否会使您所针对的各种平台更加一致。

或者，我认为这有点骇人听闻，但有时这些东西是必要的 - 你可以检查它，并使用变换相应地偏移你的坐标（即绘制一个像素并将其读回以查看它是否以正确的方式结束地方，如果没有，它去了哪里）。当然，您可能只是在加剧问题。

我不会在这里过多地摆弄子像素偏移，您更有可能只是介绍更多像素不再按您想要的 1:1 映射的情况。

# javascript - 计算具有相同精度的两个数字的平均值

> ID：14608401
> 
> 赞同：0
> 
> 时间：2013-01-30T16:05:50.960
> 
> 标签：javascript, average

我需要计算 JavaScript 中两个实数之间的中点（平均值）。数字的范围可以变化很大，通常在 10000 和 0.0001 之间。

天真的方法

```
(parseFloat(first) + parseFloat(second)) / 2 
```

给了我不需要的精度错误，即

```
(1.1 + 0.1) / 2 = 0.6000000000000001 
```

如何确保结果没有多余的小数位？我想，由于只有两个输入，因此结果最多需要比输入多一个小数位。所以，我需要：

```
 1000 and 3000 to return 2000 (without decimal spaces)
 1234.5678 and 2468.2468 to return 1851.4073
 0.001 and 0.0001 to return 0.00055
 10000 and 0.0001 to return 5000.00005
 0.1 and 1.1 to return 0.6 
```

* * *

澄清一下：我知道所有关于精度错误以及为什么会发生这种情况。我需要的是一个简单的解决方法，但我一直无法在 SO 上找到以前的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T16:12:33.833

您将要使用该功能`toFixed()`。这是您的代码的样子`((1.1 + 0.1) / 2).toFixed(4);`。4 是小数位数。

这是一个示例

```
var num1 = "123.456";
var num2 = "456.1235";
if (num1.split('.')[1].length > num2.split('.')[1].length)
  var x = ((parseFloat(num1) + parseFloat(num2)) / 2).toFixed(num1.split('.')[1].length+1);
else
  var x = ((parseFloat(num1) + parseFloat(num2)) / 2).toFixed(num2.split('.')[1].length+1); 
```

记住输入是字符串，这就是为什么`num1`和`num2`是字符串。

**更新：**这是您想要的结果的正确 if 语句。

```
var num1 = "123.456";
var num2 = "456.1235";
if (num1.split('.').length == 1) {
  if (num2.split('.').length == 1)
    var x = ((parseFloat(num1) + parseFloat(num2)) / 2).toFixed(0);
  else
    var x = ((parseFloat(num1) + parseFloat(num2)) / 2).toFixed(num2.split('.')[1].length);
} else if (num2.split('.').length == 1)
  var x = ((parseFloat(num1) + parseFloat(num2)) / 2).toFixed(num2.split('.')[1].length);
else if (num1.split('.')[1].length == num2.split('.')[1].length)
  var x = ((parseFloat(num1) + parseFloat(num2)) / 2).toFixed(num2.split('.')[1].length);
else if (num1.split('.')[1].length > num2.split('.')[1].length)
  var x = ((parseFloat(num1) + parseFloat(num2)) / 2).toFixed(num1.split('.')[1].length+1);
else if (num1.split('.')[1].length < num2.split('.')[1].length)
  var x = ((parseFloat(num1) + parseFloat(num2)) / 2).toFixed(num2.split('.')[1].length+1); 
```

**编辑**我不得不改变它检查没有小数空格的数字的顺序。这是我为帮助测试而创建的 jsFiddle：[链接](http://jsfiddle.net/GrahamWalters/g68c8/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T16:19:48.593

Javascript 中的数字具有[`toFixed(n)`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toFixed)删除除 n 个小数位以外的所有数字的方法。但是，当您不知道您的数字是非常大还是非常小时，这并不是很有帮助。但是你可以做的是首先对数的 Math.floor() 以数字的 10 为底得到点前面的小数位数，将数字除以 10^places，执行`toFixed(n)`其中 n 是最大数位数，然后再乘以 10^places。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T16:13:55.480

javascript 中的数字都是[IEEE754](http://en.wikipedia.org/wiki/IEEE_floating_point)定义的双精度浮点数。这意味着没有以 10 为底定义的点位置，并且您总是会发现精度似乎不是您想要的那些情况。

解决方案是

*   不要使用 js 数字来进行计算。该解决方案很重且通常无用。
*   当您需要显示它们时（并且仅在那时）将您的数字格式化为字符串。您可以使用[to Fixed 或 toPrecision](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number)。

有用的阅读：[每个计算机科学家都应该知道的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T17:31:29.840

您可以使用正在使用的数字的“精度”来判断返回值的适当精度。

此示例将任意数量的数字平均到其参数的最大精度。

```
Math.average= function(){
    var a= arguments, L= a.length, i= 0,
    total= 0, next, prec= [];
    if(L== 1) return +a[0];
    while(i<L){
        next= Number(a[i++]);
        total+= next;
        if(next!== Math.floor(next)){
            prec.push(String(next).split('.')[1].length);
        }
    }
    prec= Math.max.apply(Math, prec)+1;
    return +((total/L).toFixed(prec));
    // returns number after precision adjusted
} 
```

/*

```
tests:
var n1= ;
Math.average(1.1, .01);
0.555

var n1= 1.0111, n2= .01;
Math.average(1.0111,  .01);
0.51055

var n1= 1.1, n2= .01, n3= 1, n4= 1.025;
Math.average(n1, n2, n3, n4)
0.7838 
```

*/

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T16:26:00.357

您可以使用[Number.toPrecision(digits)](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toPrecision)来做到这一点。

# eclipse - 在Eclipse中，打开资源后如何保持编辑器焦点？

> ID：14608402
> 
> 赞同：1
> 
> 时间：2013-01-30T16:05:53.693
> 
> 标签：eclipse, ubuntu

**与[此](https://stackoverflow.com/questions/9763252/how-to-make-eclipse-open-resource-in-the-current-editor-window)问题类似。**

作为一名 Java 开发人员，我经常在类之间切换。使用打开资源快捷键 (Ctrl + Shift + R) 绝对可以节省时间，而且我经常使用它。最近，我从 Windows XP/Eclipse Indigo 切换到 Ubuntu 12.04/Eclipse Juno。我的设置包括双显示器，其中一个打开 Eclipse 编辑器，另一个打开几个面板（即控制台和包资源管理器）。但是，我注意到，当我使用此设置打开资源时，在资源打开后，焦点会移动到我“打破”并移到一边的面板之一。即使焦点以前在编辑器窗口中，它也会这样做。由于我之前一直在 Windows 上使用 Indigo，没有问题，我认为这可能是 Juno 问题，所以我在 Ubuntu 上使用 Indigo 尝试了同样的事情（使用普通的香草设置），但问题仍然存在。这让我相信这是一个 Eclipse + Ubuntu（或 GTK）问题。在 Ubuntu 中，当对话框被解除时，是什么决定了谁获得焦点？

我知道重新聚焦到编辑器有一些捷径，但不幸的是，这是一个主要的干扰。有没有其他人遇到过类似的情况，如果有，你是如何克服的？

# android - 如何在运行时膨胀自定义布局，同时避免视图层次结构中的冗余布局 - Android

> ID：14608404
> 
> 赞同：0
> 
> 时间：2013-01-30T16:06:01.353
> 
> 标签：android, android-relativelayout, android-custom-view, layout-inflater

一般来说，我想知道我应该如何在运行时扩展 XML 中定义的自定义布局，而在我的视图层次结构中没有多余的布局。

现在，特别是：

我有一个在 xml 中声明的自定义布局，`my_relative_layout.xml`它的根元素是一个 RelativeLayout。我还定义了一个扩展 RelativeLayout 的类，称为`MyRelativeLayout.java`.

`my_relative_layout.xml`我怎样才能`MyRelativeLayout.java`以一种在层次结构中没有多余的 RelativeLayout 的方式膨胀。

我尝试使用`<merge>` - 它导致所有根元素属性都`my_relative_layout.xml`没有影响，所以我的布局内容搞砸了。

我还尝试将我的自定义布局类声明为 中的根元素`my_relative_layout.xml`，但出现膨胀异常（我尝试将根元素设置为 null 或 this，同时将 xml 膨胀到`MyRelativeLayout.java`- 将 true 或 false 附加到根）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T19:40:55.860

我最终使用了`<merge>`标签。请注意，您必须`RelativeLayout`在运行时设置所有布局参数。

# angularjs - $compile 函数第一次找到后找不到小部件

> ID：14608409
> 
> 赞同：1
> 
> 时间：2013-01-30T16:06:21.380
> 
> 标签：angularjs

我有一个搜索页面，用户在其中输入查询，然后使用`$http`服务更新结果。

我`$compile`用来显示不同类型的小部件。发生的情况是当我第一次访问页面/重新加载页面时一切正常，但是当我使用以下内容设置位置时

```
$location.path("/search/" + $scope.q); 
```

进而触发控制器和整个搜索过程，该`$compile`功能无法找到小部件。

这可能是什么原因？

编辑：我发现了为什么 $compile 第一次工作但之后没有工作的问题。我后来发现的另一件事是视图正在更新，即在文本框中输入内容后一切都开始正常工作。问题与 $templateCache 有关。基本上缓存回调不会发生，直到用户进行一些用户交互，例如在输入框中键入或从具有关联模型绑定的输入中删除字符。

通过编辑角度源删除缓存使用后，它工作正常。在角度上提出了一个问题

[https://github.com/angular/angular.js/issues/1927](https://github.com/angular/angular.js/issues/1927)

# xml - 如何将命名空间添加到肥皂请求？

> ID：14608410
> 
> 赞同：0
> 
> 时间：2013-01-30T16:06:21.677
> 
> 标签：xml, wcf, serialization, xml-serialization, operationcontract

如何将命名空间添加到 SearchSchemes ？以下是soap请求，
当前输出如下。

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="CompareYourTravelInsurance.Services">
   <soapenv:Header/>
   <soapenv:Body>
      <com:SearchSchemes>
       </com:SearchSchemes>
   </soapenv:Body>
</soapenv:Envelope> 
```

我想要如下的输出

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" >
       <soapenv:Header/>
       <soapenv:Body>
          <com:SearchSchemes xmlns="CompareYourTravelInsurance.Services">
           </com:SearchSchemes>
       </soapenv:Body>
    </soapenv:Envelope> 
```

以下是我的 WCF 接口，我在 sSeerviceContract 中添加了命名空间，但我无法将命名空间添加到 OperationContract。

```
[ServiceContract(Namespace = "CompareYourTravelInsurance.Services")]
public interface IMSMWcf
{
    [OperationContract(
        Action = "CompareYourTravelInsurance.Services/SearchSchemes",
        Name = "SearchSchemes",
        ReplyAction = "CompareYourTravelInsurance.Services/SearchSchemes",
        Namespace="dddd"
    ), XmlSerializerFormat]
    List<QuoteResult> SearchSchemes();

    [OperationContract(
    Action = "CompareYourTravelInsurance.Services/SaveTravellerInformation",
    Name = "SaveTravellerInformation"

    ), XmlSerializerFormat]
    void SaveTravellerInformation();

    [OperationContract(
    Action = "CompareYourTravelInsurance.Services/SendData",
    Name = "SendData",
    ReplyAction = "CompareYourTravelInsurance.Services/SendData"
    )]
    MsmData SendData(string QuoteDetailsRef);
} 
```

# unix - 如何使用 sed 或 awk 修改文本

> ID：14608412
> 
> 赞同：1
> 
> 时间：2013-01-30T16:06:29.947
> 
> 标签：unix, sed, awk

我想转换这个文件

```
hg19_ct_UserTrack_3545_12805 range=chr1:117217481-117217677 5'pad=0 3'pad=0 strand=+ repeatMasking=none
TCCTCATGAGTTTACATTCTTTATTAGTTTCTCTGTTTATGGTCATCTTC
CCCTGGGTATGTAAGCTGTCTGTGGGCTGGAATCTGGTCTGTCTTGTTCT
CTGGTGTTGGTCCAATGCCTAGAATAATGCCTAGCACATAGGATGTGATC
AACAAATATTTGTTGAATGAATACGTTCTAGTTGGAAAGACAATAAA .... etc 
```

到

```
range=chr1:117217481-117217677 5'pad=0 3'pad=0 strand=+ repeatMasking=none
TCCTCATGAGTTTACATTCTTTATTAGTTTCTCTGTTTATGGTCATCTTC
CCCTGGGTATGTAAGCTGTCTGTGGGCTGGAATCTGGTCTGTCTTGTTCT
CTGGTGTTGGTCCAATGCCTAGAATAATGCCTAGCACATAGGATGTGATC
AACAAATATTTGTTGAATGAATACGTTCTAGTTGGAAAGACAATAAA .... etc 
```

我一直在尝试 awk 和 sed 没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:12:01.290

你需要`hg19_ct_UserTrack_3545_12805`从第一行删除？

然后尝试：

```
awk 'NR==1{sub(/^[^ ]* /,"")}1' file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:12:49.817

因为这是一个简单的替换，我会使用`sed`：

```
$ sed '1s/\w\+ //' file
range=chr1:117217481-117217677 5'pad=0 3'pad=0 strand=+ repeatMasking=none
TCCTCATGAGTTTACATTCTTTATTAGTTTCTCTGTTTATGGTCATCTTC
CCCTGGGTATGTAAGCTGTCTGTGGGCTGGAATCTGGTCTGTCTTGTTCT
CTGGTGTTGGTCCAATGCCTAGAATAATGCCTAGCACATAGGATGTGATC
AACAAATATTTGTTGAATGAATACGTTCTAGTTGGAAAGACAATAAA 
```

解释：

```
1   # First line only
s/  # Subsitution 
\w+ # Match one or more word character follow by a space
/   # Replace with
/   # Nothing 
```

默认情况下`sed`打印到，`stdout`但您可以使用以下`-i`选项直接将更改保存到文件：`sed -i '1s/\w\+ //' file`.

# mysql - 将二进制 SHA1 哈希存储到 mySQL BINARY(20) 列中

> ID：14608413
> 
> 赞同：4
> 
> 时间：2013-01-30T16:06:30.273
> 
> 标签：mysql, insert, binary

我想将 SHA1 哈希存储到 BINARY(20) 列中。我尝试了准备，`INSERT INTO foo SET ( hash=? )`然后执行绑定到包含 20 字节二进制值的变量的语句，但出现运行时语法错误“... hash='\0\0#*$^!...'”。（我很困惑为什么执行一个准备好的语句会代表这样的值。） [这篇文章](https://stackoverflow.com/questions/614476/storing-sha1-hash-values-in-mysql)并没有表明将 SHA1 存储到 BINARY(20) 列有什么问题，但没有说明它是如何使用 SQL 完成的。

**更新**：“为什么是二进制而不是十六进制？” 将有大约 10 亿行，因此 20 个额外的字节很重要，而且我被告知数字查找的速度是字符串查找的两倍（并且 BINARY 字段将被视为数字）

**更新 2**：错误消息不是抱怨二进制值的表示，而是抱怨 SET 列表周围的括号。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T16:21:52.060

在插入之前使用[UNHEX](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_unhex)函数对其进行翻译：

```
 INSERT INTO foo SET hash=UNHEX('0beec7b5ea3f0fdbc95d0dd47f3c5bc275da8a33'); 
```

您将解决空间需求，但是您可能会在将哈希从二进制转换为十六进制再转换回二进制时获得一些性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T16:31:43.067

我想说你不需要做任何特别的事情：

```
mysql> CREATE TABLE binary_test (
    ->     id INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
    ->     hash BINARY(20) NOT NULL,
    ->     PRIMARY KEY (id)
    -> );
Query OK, 0 rows affected (0.05 sec)

mysql> DELIMITER //
mysql> CREATE PROCEDURE binary_insert(IN hash BINARY(20))
    -> BEGIN
    ->     INSERT INTO binary_test (hash) VALUES (hash);
    -> END
    -> //
Query OK, 0 rows affected (0.00 sec)

mysql> DELIMITER ;
mysql> CALL binary_insert( UNHEX(SHA1('password')) );
Query OK, 1 row affected (0.04 sec)

mysql> SELECT * FROM binary_test;
+----+----------------------+
| id | hash                 |
+----+----------------------+
|  1 | [¬aõ╔╣??♠é%♂l°3←~µÅÏ |
+----+----------------------+
1 row in set (0.00 sec) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-07T12:42:17.220

如果您从字符串拼凑最终的 SQL，则在 SHA1 十六进制字符串前面加上`0x`. 在这里，我假设您计算或获得 SHA1 字符串，例如在变量中`strSha1`

```
strSQL = "INSERT INTO TableName SET BinaryHash=0x";
strSQL .= strSha1;
DbConn.Query(strSQL); 
```

或者，如果您使用参数化或准备好的 SQL，请参阅下面的伪代码。

```
preparedStmt = DbConn.Prepare("INSERT INTO TableName SET BinaryHash = UNHEX( ? )");
DbConn.Query(preparedStmt, strSha1); 
```

显然，`SHA1()`在后一种情况下，您可以使用 MySQL 中的函数，如果您有明确的字符串，而不是它的 SHA1。

# grails - 为什么这是一个无效的 hql 查询？

> ID：14608414
> 
> 赞同：0
> 
> 时间：2013-01-30T16:06:39.493
> 
> 标签：grails, hql

我在 grails 应用程序中遇到了这个 hql 的问题：

这是查询

```
def books = Book.findAll("from book where author_id in (${listOfId?.join(',')}) and (owner_id is null or owner_id = ${ownerId}) and status = 'available'") 
```

这是错误：

```
org.codehaus.groovy.grails.orm.hibernate.exceptions.GrailsQueryException: Invalid query [from coupon where campaign_id in (7) and (owner_id is null or owner_id = 1112) and status = 'available'] 
```

知道为什么这是一个无效的查询吗？我正在寻找一个 hql 验证器，其中包含有关无效部分的更多信息。暂时没有成功

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:13:46.410

看起来您的 HQL 查询使用表名和列名，而不是使用实体、字段和关联。您还没有显示您的实体，但如果他们遵守通常的约定，HQL 查询应该看起来像

```
from Coupon c 
left join c.owner owner
where c.campaign.id in (7) 
and (owner.id is null or owner.id = 1112) 
and status = 'available' 
```

您还应该使用参数化查询而不是字符串连接。这会降低您的代码效率，并受到 SQL 注入攻击或只是逃避问题：

```
from Coupon c 
left join c.owner owner
where c.campaign.id in :campaignIdList 
and (owner.id is null or owner.id = :ownerId) 
and status = :status 
```

# r - 组的箱线图？

> ID：14608422
> 
> 赞同：17
> 
> 时间：2013-01-30T16:06:47.080
> 
> 标签：r, boxplot

我有一个数据集（测试），如下所示：

```
Type    Met1    Met2    Met3    Met4
TypeA   65  43  97  77
TypeA   46  25  76  77
TypeA   44  23  55  46
TypeA   46  44  55  77
TypeA   33  22  55  54
TypeB   66  8   66  47
TypeB   55  76  66  65
TypeB   55  77  88  46
TypeB   36  67  55  44
TypeB   67  55  76  65 
```

我已经检查了很多关于箱线图的链接，但是对于我想要的箱线图类型，我仍然没有成功。我希望为所有大都会（Met1、Met2、Met3、Met4）制作一个箱线图，其中我的 X 轴具有 A 型（黄色、橙色）。本质上，我想要以下内容（取自[此处](http://sphaerula.com/legacy/R/boxplotTwoWay.html)）：

[![在此处输入图像描述](../Images/b3981725a60a2c9a408bc7aeb353b9ef.png)](https://i.stack.imgur.com/Dovu8.png)

我正在尝试类似的东西，

```
boxplot(formula = len ~ Type , data = test, subset == "TypeA")
boxplot(formula = len ~ Type , data = test, subset == "TypeA", add=TRUE)
Legend(legend = c( "typeA", "typeB" ), fill = c( "yellow", "orange" ) ) 
```

但我无法用它来解决它。谁能帮助我知道如何以正确的方式在我的测试数据上制作这样的箱线图？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-30T16:14:11.287

一个解决方案`ggplot2`。

首先，使用以下命令将您的数据框`test`转换为长格式`melt`：

```
library(reshape2)
test.m <- melt(test) 
```

绘制数据：

```
library(ggplot2)
ggplot(test.m, aes(x = variable, y = value, fill = Type)) +
  geom_boxplot() +
  scale_fill_manual(values = c("yellow", "orange")) 
```

![在此处输入图像描述](../Images/ef1187809cf2cd6b8d0ff1625bcddc84.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-30T16:21:37.590

正如其他人所说，首先你需要融化你的数据。

```
df <- read.table(text="Type    Met1    Met2    Met3    Met4
TypeA   65  43  97  77
TypeA   46  25  76  77
TypeA   44  23  55  46
TypeA   46  44  55  77
TypeA   33  22  55  54
TypeB   66  8   66  47
TypeB   55  76  66  65
TypeB   55  77  88  46
TypeB   36  67  55  44
TypeB   67  55  76  65",header=TRUE)

library(reshape2)
df2 <- melt(df)

boxplot(
  formula = value ~ variable,
  data    = df2,
  boxwex  = 0.25,
  at      = 1:4 - 0.2,
  subset  = Type == "TypeA",
  col     = "yellow",
  main    = "blah",
  xlab    = "x",
  ylab    = "y",
  ylim    = c( 0, ceiling( max( df2$value ) ) + 1 ),
  yaxs    = "i" )

boxplot(
  formula = value ~ variable,
  data    = df2,
  boxwex  = 0.25,
  at      = 1:4 + 0.2,
  subset  = Type == "TypeB",
  col     = "orange",
  add     = TRUE ) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-30T16:20:48.693

像这样，

```
test <- structure(list(Type = structure(c(1L, 1L, 1L, 1L, 1L, 2L, 2L, 
    2L, 2L, 2L), .Label = c("TypeA", "TypeB"), class = "factor"), 
    Met1 = c(65L, 46L, 44L, 46L, 33L, 66L, 55L, 55L, 36L, 67L
    ), Met2 = c(43L, 25L, 23L, 44L, 22L, 8L, 76L, 77L, 67L, 55L
    ), Met3 = c(97L, 76L, 55L, 55L, 55L, 66L, 66L, 88L, 55L, 
    76L), Met4 = c(77L, 77L, 46L, 77L, 54L, 47L, 65L, 46L, 44L, 
    65L)), .Names = c("Type", "Met1", "Met2", "Met3", "Met4"), 
    class = "data.frame", row.names = c(NA, -10L))

# install.packages("ggplot2", dependencies = TRUE)
require(ggplot2)
require(reshape2)
df <- melt(test)
p <- ggplot(df, aes(factor(variable), value)) + geom_boxplot(aes(fill = Type))
p 
```

![在此处输入图像描述](../Images/daff0b4573c8213f0995f766ac9ca735.png)

您可以查看[geom_boxplot 手册页](http://docs.ggplot2.org/0.9.2.1/geom_boxplot.html)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-07-08T17:48:24.510

您可以使用该`reshape`函数创建一个长列，其中包含来自 Met1、..、Met4 列的所有数据。它还创建一列 ( `temp$time`) 来识别数据来自哪一列，您可以使用它来对箱形图 ( `temp$Type*temp$time`) 进行分层。

```
df <- read.table(text=
"Type Met1 Met2 Met3 Met4
TypeA   65  43  97  77
TypeA   46  25  76  77
TypeA   44  23  55  46
TypeA   46  44  55  77
TypeA   33  22  55  54
TypeB   66  8   66  47
TypeB   55  76  66  65
TypeB   55  77  88  46
TypeB   36  67  55  44
TypeB   67  55  76  65",header=TRUE)

temp <- reshape(df, direction='long', varying = 2:5, sep='')

boxplot(temp$Met ~ temp$Type*temp$time, col=c("yellow", "orange")) 
```

# dropbox - 使用 Mac 命令行的 Dropbox 同步

> ID：14608425
> 
> 赞同：1
> 
> 时间：2013-01-30T16:06:50.397
> 
> 标签：dropbox

有没有办法使用命令行同步保管箱。我有两个 Dropbox 帐户，我安装了第二个 Dropbox 文件夹，但我的 mac 不允许我同时安装它们。所以我希望我可以使用我的命令行来同步它和其他一些简单的命令。我正在使用 mac

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T16:16:36.700

Dropbox 有[Command Line Interface](http://www.dropboxwiki.com/tips-and-tricks/using-the-official-dropbox-command-line-interface-cli)，但恐怕你不能那样使用它。你需要更复杂的东西，基于[Dropbox Core API](https://www.dropbox.com/developers/start)的东西。

# c# - Ctrl+B 的 GetAsynchKeyState？如何？

> ID：14608427
> 
> 赞同：0
> 
> 时间：2013-01-30T16:06:51.770
> 
> 标签：c#, c++

我在用

```
public static bool IsKeyPushedDown(Keys vKey)
{
   return 0 != (GetAsyncKeyState((int)vKey) & 0x8000);
} 
```

但我不知道如何组合 2 个键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:22:32.767

可能是什么`if (IsKeyPushedDown('B') && IskeyPushedDown(VK_CONTROL))`？

正如其他人在评论中所说，使用事件 WM_KEYDOWN 或 WM_CHAR 来检查“有人按下了一个键”确实是“我想在有人按下一个键时调用一个函数”的“正确”解决方案。但是，您特别问“我正在使用..一些代码..我不知道如何组合 2 个键”，以上绝对是正确的答案。

# logic - 逻辑编程范式的主要结构

> ID：14608433
> 
> 赞同：0
> 
> 时间：2013-01-30T16:07:13.407
> 
> 标签：logic, paradigms

我们说：

1.  在程序范式中，主要结构是“程序”；
2.  在 OOP 范式中，主要构造是“对象”；
3.  在功能范式中，主要结构是“功能”；

但是逻辑范式是什么？公理？谓词？

我很困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T02:17:49.813

[号角条款](http://en.wikipedia.org/wiki/Horn_clause)

来自维基百科

> Horn 子句也是逻辑编程的基础，通常以蕴涵的形式编写明确的子句：
> 
> 实际上，目标子句与确定子句的解析产生新的目标子句是SLD解析推理规则的基础，用于实现逻辑编程和编程语言Prolog。

编辑

由于 OP 试图将谓词（一阶谓词逻辑）与角子句相关联

请参阅：一阶谓词逻辑到喇叭子句逻辑的翻译：在Anthony A. Aaby的[逻辑编程中](http://www.emu.edu.tr/aelci/Courses/D-318/D-318-Files/plbook/logic.htm)

我试图在此处重现说明以避免链接失效，但我无法弄清楚如何将列表放在引用的部分中。

# wordpress - 缺少 Wordpress 插件

> ID：14608435
> 
> 赞同：-1
> 
> 时间：2013-01-30T16:07:14.907
> 
> 标签：wordpress, plugins

如果您访问此[http://themeforest.net/item/smartstart-wp-responsive-html5-theme/full_screen_preview/2067920](http://themeforest.net/item/smartstart-wp-responsive-html5-theme/full_screen_preview/2067920)链接，他们会转到“博客”并查看第二个帖子。

如果您移动到左箭头或右箭头，您可以看到像两张图片。

我想先知道，如果这只能在那个主题中完成，或者可能有其他插件可以做到这一点？我在 WP Plugin 菜单上搜索了插件，但没有找到我要找的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:13:41.210

该主题使用库（例如 jQuery）、插件（例如[jCarousel](http://sorgalla.com/jcarousel/)）和自定义脚本的组合来实现轮播滑块效果。

您可以查看[custom.js](http://demo.samuli.me/wp/smartstart/wp-content/themes/smartstart/js/custom.js?ver=3.4.1)的源代码并了解如何实现类似的效果，尽管自定义脚本似乎没有使用任何类型的开源许可发布。

# internet-explorer - IE9 去除部分 url

> ID：14608438
> 
> 赞同：1
> 
> 时间：2013-01-30T16:07:21.003
> 
> 标签：internet-explorer, stripping

Internet Explorer 9 正在剥离 url 的（大部分）部分 - 在地址栏中输入 - 为什么要这样做？

完整的url是（域名已经伪装）： [http ://sec.internalhostname.com/mailings/survey/response/post1.php?u=1036&fm=371&c=885830&ml=7646837&ah=sf&sfid=00QE000000K0THJMA3&sftp=Lead&w=field&qn=XX_Current_NSF_Provider__c&f =Checks+are+保证&ft=2&fsft=picklistvalue](http://sec.internalhostname.com/mailings/survey/response/post1.php?u=1036&fm=371&c=885830&ml=7646837&ah=sf&sfid=00QE000000K0THJMA3&sftp=Lead&w=field&qn=XX_Current_NSF_Provider__c&fn=Checks+are+guaranteed&ft=2&fsft=picklistvalue)

输入后，IE 将其更改为： [http ://sec.internalhostname.com/mailings/survey/response/](http://sec.internalhostname.com/mailings/survey/response/)

其余的似乎都消失了！IE。post1.php?u=1036&fm=371&c=885830&ml=7646837&ah=sf&sfid=00QE000000K0THJMA3&sftp=Lead&w=字段&qn=XX_Current_NSF_Provider__c&fn=Checks+are+保证&ft=2&fsft=picklistvalue

不用说，它找不到页面并显示“未找到”错误。

有谁之前经历过这个吗？这是非常令人费解的。

科林·G

# cocoa - 通过在 Mac 应用程序中编码添加 nsimageview

> ID：14608443
> 
> 赞同：1
> 
> 时间：2013-01-30T16:07:31.337
> 
> 标签：cocoa, nsimageview

我已经在 iPhone 上工作了一段时间，最近我一直在尝试使用 Mac 应用程序。但这让我很难过。我想通过编码在我的窗口上添加图像。我已经完成了以下代码，但它不起作用：

```
NSImageView *imView = [[NSImageView alloc] initWithFrame:NSMakeRect(250, 50, 180, 160)];
NSImage *myImage = [[NSImage alloc] initByReferencingFile:@"top.png"];
[imView setImage:myImage];
[window setContentView:imView]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T07:39:30.007

好的，我发现了我的错误。我将它添加到窗口而不是我应该将它添加到内容视图。我将我的代码更改为以下代码并且它有效：

```
[self.window.contentView addSubview:imView]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:17:36.210

您需要指定图像文件的路径。假设它在你的主包中，你会尝试使用：

```
NSImage *myImage = [NSImage initByReferencingFile:[[NSBundle mainBundle] pathForImageResource:@"top.png"]]; 
```

# java - 在 JVM 上解析 Rails 时区 to_s

> ID：14608447
> 
> 赞同：0
> 
> 时间：2013-01-30T16:07:45.860
> 
> 标签：java, ruby-on-rails, shopify

我正在为 Shopify 编写基于 JVM 的客户端，并且需要从 API 获取时区信息。返回的数据格式如下：

```
"(GMT-05:00) Eastern Time (US & Canada)" 
```

这实际上并没有描述时区。时区的标准格式通常为：

```
"America/New_York" 
```

并在[此处](http://en.wikipedia.org/wiki/Tz_database)描述。我正在使用[Joda-time](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/TimeZone.html)来管理 JVM 端的时区，并且需要解析该字符串。我现在能做的最好的是将[文档](http://api.rubyonrails.org/classes/ActiveSupport/TimeZone.html)中的列表复制到我的代码中，从字符串中去除偏移量并进行查找。我的问题是该列表看起来相当不完整，并且可能会发生变化。

我拒绝使用 GMT-05:00 部分，因为它没有考虑 DST，因此没有描述时区，所以一年中的 6 个月都是错误的，这是不可接受的。

或者，Shopify API 刚刚提供时区会很有用，但我已经搜索了[文档](http://api.shopify.com/shop.html)并且看不到它在哪里。如果有人能看到它而我只是愚蠢，那就太好了。

PS我不是红宝石程序员，所以我完全有可能遗漏了一些非常明显的东西。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T20:31:33.383

我之前也遇到过同样的问题，但我能够将 Java 兼容时区标识符的副本与 Ruby/Rails 标识符一起保留。您可能需要建立一个转换表来将“东部时间（美国和加拿大）”转换为“美国/纽约”。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-30T20:33:58.237

我有一个类似的产品。在 Android 端，我使用`TimeZone.getDefault().getId()`. 它通常已经在您要求的 TZ 数据库表单中。在 ruby​​ 方面，我发现[时区 gem](https://rubygems.org/gems/timezone)对于调度非常宝贵，尽管我不得不稍微修改 gem 以满足我的性能需求。

# jquery - 选择列表选项未使用 Jquery 设置

> ID：14608454
> 
> 赞同：0
> 
> 时间：2013-01-30T16:08:00.753
> 
> 标签：jquery, asp.net-mvc, razor

选择列表：

```
<select id="Outcome#1" class="result" name="Outcome#@1">
                            <option value="x">Select</option>
                            <option value="4">Good</option>
                            <option value="3">Adequate</option>
                            <option value="0">Not Applicable</option>
                        </select> 
```

jQuery

```
$("#Outcome#1").val("4"); 
```

上面的选择列表是从数据库调用动态创建的，并且 javascript 也正在动态创建，如果数据库中存在 val，则填充 val。

但是，在上面的示例中，未将下拉菜单设置为将 Option 4(Good) 设置为 Selected。

我的印象是上面的 JQuery 应该很高兴地做到这一点。

也尝试过：（但失败了）

```
$("#Outcome1[value='4']").attr("selected", "selected"); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T16:10:17.903

`#`属性中的是`id`元字符，因此需要作为 jQuery 选择器的一部分进行转义：

```
$('#Outcome\\#1').val("4"); 
```

[这在选择器](http://api.jquery.com/category/selectors/)API 页面的顶部进行了解释。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T16:10:52.077

您的选择器实际上是在寻找一个同时具有and`id`属性的元素- 这是不可能的。您需要在选择器本身中转义它，试试这个：`Outcome``1``#`

```
$("#Outcome\\#1").val("4"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T16:11:40.577

您需要转义哈希符号

```
$("#Outcome\\#1").val("4"); 
```

# javascript - phonegap android camera：设置“correctOrientation”选项时崩溃

> ID：14608455
> 
> 赞同：4
> 
> 时间：2013-01-30T16:08:04.127
> 
> 标签：javascript, android, cordova

我知道有人问过类似的问题，但我遇到了一个严重的问题。

任何使用电话间隙的人都知道，这绝对不是应用程序解决方案的全部！

但这里的任何方式都是我的代码：

```
navigator.camera.getPicture(onPhotoDataSuccess, onFail, { quality: 50,
destinationType: destinationType.FILE_URI, 
correctOrientation: true }); 
```

问题是当我添加正确的方向时，我的应用程序有某种内存泄漏，因为它关闭并出现错误。当我取出正确的方向参数时，它很好，除了方向错误的事实！有没有人可以解决我的图片方向正确？

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
 http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing,
   software distributed under the License is distributed on an
   "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
   KIND, either express or implied.  See the License for the
   specific language governing permissions and limitations
   under the License. 
```

-->

```
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />
<uses-permission android:name="android.permission.RECORD_VIDEO"/>
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
<uses-permission android:name="android.permission.READ_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_CONTACTS" />   
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />   
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.BROADCAST_STICKY" />

<application android:icon="@drawable/icon" android:label="@string/app_name"
    android:hardwareAccelerated="true"
    android:debuggable="true">
    <activity android:name="mysecond" android:label="@string/app_name"
            android:theme="@android:style/Theme.Black.NoTitleBar"
            android:configChanges="orientation|keyboardHidden|keyboard|screenSize|locale">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="17"/> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T01:32:59.620

谢谢各位，我想通了。如果您的 img 大小不是 HUGE 并且会导致内存溢出，则必须设置“目标大小”。我将目标宽度设置为 720，质量设置为 50，一切都很好，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T19:49:48.230

你在使用 Phonegap 的 Hydration - 我不是 100% 确定，但这似乎让我的相机应用程序崩溃了几次。删除似乎有帮助。我还尝试添加`targetWidth: 400`并重新打开 Hydration，这似乎也有效。

# ios - json解析成字典ios

> ID：14608456
> 
> 赞同：0
> 
> 时间：2013-01-30T16:08:07.900
> 
> 标签：ios, objective-c, json, nsdictionary

我在 PHP 中有以下脚本：

```
<?php $sender = $_POST['sender'];
      $rcpt = $_POST['rcpt'];
      $message = $_POST['message'];

      $someArray = array("Bannana", "Apple", "SomeCheese");
      print_r($someArray);

      echo json_encode($someArray);

?> 
```

以及以下按钮操作：

```
NSString *myRequestString = @"sender=my%20sender&rcpt=my%20rcpt&message=hello";
NSData *myRequestData = [ NSData dataWithBytes: [ myRequestString UTF8String ] length: [ myRequestString length ] ];
NSMutableURLRequest *request = [ [ NSMutableURLRequest alloc ] initWithURL: [ NSURL URLWithString: @"http://development.com/ios/responseScript.php" ] ];

/**********Set Request properties*************/
[ request setHTTPMethod: @"POST" ];
[ request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"content-type"];
[ request setHTTPBody: myRequestData ];

NSURLResponse *response;
NSError *err;

NSDictionary *returnedDictionary = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&err];
NSUInteger content = [NSString stringWithUTF8String:[returnedDictionary count]];
//NSLog(@"responseData: %@", content);
self.responseLabel.text = [NSString stringWithFormat:@"Count:    %u", content]; 
```

我想要实现的是，被回显的 json 应该以响应的形式返回并打印到屏幕上。充其量我得到的回报是空的，我确信它不是。我有一个工作示例，但使用数组而不是字典，结果附在下面：

```
NSString *myRequestString = @"sender=my%20sender&rcpt=my%20rcpt&message=hello";
NSData *myRequestData = [ NSData dataWithBytes: [ myRequestString UTF8String ] length: [ myRequestString length ] ];
NSMutableURLRequest *request = [ [ NSMutableURLRequest alloc ] initWithURL: [ NSURL URLWithString: @"http://development.com/ios/responseScript.php" ] ];
[ request setHTTPMethod: @"POST" ];
[ request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"content-type"];
[ request setHTTPBody: myRequestData ];
NSURLResponse *response;
NSError *err;
NSData *returnData = [ NSURLConnection sendSynchronousRequest: request returningResponse:&response error:&err];
NSString *content = [NSString stringWithUTF8String:[returnData bytes]];
//NSLog(@"responseData: %@", content);
self.responseLabel.text = [NSString stringWithFormat:@"Data:    %@", content]; 
```

结果：

> 2013-01-30 19:07:07.919 testResponse[15921:c07] responseData: Array ([0] => Bannana [1] => Apple [2] => SomeCheese) ["Bannana","Apple","SomeCheese "]

请帮忙？十分感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:15:30.400

这条线有问题：

```
NSDictionary *returnedDictionary = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&err]; 
```

`sendSynchronousRequest:returningResponse:error:`返回 NSData，而不是 NSDictionary。

阅读[文档](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html)，确保你知道你正在处理什么类型，祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:19:33.293

```
NSDictionary *returnedDictionary = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&err]; 
```

你在这里得到一个`NSData`对象，而不是一个`NSDictionary`对象。

```
NSUInteger content = [NSString stringWithUTF8String:[returnedDictionary count]]; 
```

您在此处获取（不存在的）字典中的项目数，而不是其内容。

鉴于您正在更新此代码中的用户界面元素，我假设它正在主线程上运行。您不应该在主线程上发出同步请求，这只会让您的应用程序在等待网络时挂起。在后台线程上发出同步请求或在主线程上发出异步请求。

从那里，查看您正在使用的类的文档，并注意 Xcode 肯定会给您的警告。

# magento - Magento：查看/订购一个商店/网站需要登录

> ID：14608457
> 
> 赞同：0
> 
> 时间：2013-01-30T16:08:07.713
> 
> 标签：magento, login, magento-1.7, magento-1.4

鉴于具有多个现有网站和商店的 magento 安装，是否可以创建一个要求用户登录才能订购产品的新网站/商店？可选的访问者也不应该能够看到产品。我更喜欢开箱即用的模块或扩展，并且在管理员中有设置要求登录。这可能是一个付费模块。

我从 Mageparts 中找到了以下扩展名。

[http://www.magentocommerce.com/magento-connect/require-login.html](http://www.magentocommerce.com/magento-connect/require-login.html)

这仅在我们必须批准新用户帐户时才有用。我发现了 magparts 的另一个扩展：

[http://www.magentocommerce.com/magento-connect/approve-customer-account.html](http://www.magentocommerce.com/magento-connect/approve-customer-account.html)

问题：

*   有没有人使用这些扩展并且它们是否像他们应该的那样工作？
*   这些扩展有哪些替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T04:05:23.877

**Vinai Kopp**有一个不错的免费扩展登录[目录](http://www.magentocommerce.com/magento-connect/login-only-catalog.html)。您可以根据您的要求轻松修改它

# r - 如何将“补丁”应用于 data.frame？

> ID：14608464
> 
> 赞同：3
> 
> 时间：2013-01-30T16:08:32.813
> 
> 标签：r, merge, dataframe

由于缺少更好的词，我如何将“补丁”应用于 R data.frame？假设我有一个包含公司和出口列的主数据库，以及在本示例中为 1 或 0 的所有权份额变量，但可以是任何百分比。

```
// master
     firm outlet shares.pre
1    five      1          0
2     one      1          1
3     red      1          0
4  yellow      1          0
5    five      2          0
6     one      2          0
// many more 
```

我想让公司“一个”将出口“1”卖给公司“红色”，我在另一个data.frame中进行了哪些交易

```
// delta
  firm outlet shares.delta
1  one      1         -1
2  red      1          1 
```

R 中将此“补丁”或事务应用于我的主数据库的最有效方法是什么？最终结果应如下所示：

```
// preferably master, NOT a copy
     firm outlet shares.post
1    five      1          0
2     one      1          0  <--- was 1
3     red      1          1  <--- was 0
4  yellow      1          0
5    five      2          0
6     one      2          0
// many more 
```

我并不特别关心保留后缀`pre`，`post`或`delta`。如果它们都被命名`shares`也很好，我只想“添加”这些数据框。

**更新**：我目前的方法是这样的

```
update <- (master$firm %in% delta$firm) & (master$outlet %in% delta$outlet)
master[update,]$shares <- master[update,]$shares + delta$shares 
```

是的，我知道它会进行矢量扫描以创建布尔`update`矢量，并且子集也不是很有效。但我最不喜欢的是我必须写出匹配的列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T16:52:57.030

另一种使用方式`data.table`。假设您已将数据都加载到`df1`和`df2` `data.frame`s 中，

```
require(data.table)
dt1 <- data.table(df1)
dt2 <- data.table(df2)
setkey(dt1, firm, outlet)
setkey(dt2, firm, outlet)
dt1 <- dt2[dt1]
dt1[is.na(dt1)] <- 0
dt1[, shares.post := shares.delta + shares.pre]

#      firm outlet shares.delta shares.pre shares.post
# 1:   five      1            0          0           0
# 2:   five      2            0          0           0
# 3:    one      1           -1          1           0
# 4:    one      2            0          0           0
# 5:    red      1            1          0           1
# 6: yellow      1            0          0           0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T16:42:24.807

[如果您提供了可重现的示例](https://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example)，我会给出更准确的答案，但这是一种方法：

*   调用你的第一个 data.frame`dat`和你的第二个`chg`

然后你可以合并两者：

```
dat <- merge(dat,chg) 
```

只需减去：

```
dat$shares <- with(dat, shares.pre + shares.delta ) 
```

# android - 可能没用的线性布局（我不这么认为）

> ID：14608465
> 
> 赞同：0
> 
> 时间：2013-01-30T16:08:33.657
> 
> 标签：android, android-layout, android-widget, android-linearlayout

我正在做一个 Android 布局，编译器说“这个 LinearLayout 布局或其 LinearLayout 父级可能没用”。我希望一些编辑文本和按钮像表单一样处于垂直布局，但它们都具有屏幕宽度的 70%。所以我做了：

```
<LinearLayout
  android:layout_width="match_parent"
  android:layout_height="wrap_content"
  android:orientation="horizontal"
  android:weightSum="1.0" >

    <LinearLayout
        android:layout_width="0dip"
        android:layout_height="match_parent"
        android:layout_weight="0.7"
        android:orientation="vertical" >

          ... my elements...

    </LinearLayout>
</LinearLayout> 
```

它有效，但为什么编译器坚持这个警告？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T16:11:25.123

这是一个 lint 警告，并不完美。我有一个与你类似的案例，它会警告一个无用的容器，但它确实不是没用的。很多时候 lint 会有所帮助，有时您只需轻拍它的头并忽略它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-16T10:55:43.213

只是为了完成上一个答案：Lint 将使用**tools:ignore="UselessParent"**忽略此问题 （您需要添加**xmlns:tools="http://schemas.android.com/tools"**作为命名空间）

```
<LinearLayout
  android:layout_width="match_parent"
  android:layout_height="wrap_content"
  android:orientation="horizontal"
  android:weightSum="1.0" >

    <LinearLayout
        android:layout_width="0dip"
        android:layout_height="match_parent"
        android:layout_weight="0.7"
        android:orientation="vertical"
        tools:ignore="UselessParent>
    </LinearLayout>
</LinearLayout> 
```

# box-api - 将文件上传到企业 Box.com 帐户，而不暴露个人凭据

> ID：14608469
> 
> 赞同：1
> 
> 时间：2013-01-30T16:08:44.640
> 
> 标签：box-api

我想编写一个自动脚本，它将生成一个文件并将其上传到我公司的 Box 帐户。如何在我的脚本或运行脚本的系统中不存储我的个人用户详细信息（登录名/密码）的情况下执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:48:16.040

Box 具有允许您通过电子邮件附件将文件上传到文件夹的功能。您只需选择要启用电子邮件上传的文件夹，然后为其设置权限和选项。很整洁！

![选择要启用电子邮件上传的文件夹](../Images/c6034d1fe8fb4c2f48d7eebea747dc39.png)

![配置上传权限。](../Images/ccbdb77199e796ee4d716fd620e4e760.png)

# mysql - 如何获取不加倍的记录？

> ID：14608472
> 
> 赞同：0
> 
> 时间：2013-01-30T16:08:59.697
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3

我有三个模型，例如`Community`,`Tagging`和`Tag`

*   社区`belongs_to :tag`

*   标记`has_one :community`<= taggable_id 将是社区的 id

*   标记`belongs_to :tag`

*   Tag `has_many :taggings`# Tag 有 'name' 属性

这是我的代码

```
@communities = Community.joins(taggings: :tag).where(tags: { name: params[:tag] }).page(params[:page]).order("cached_votes_up DESC") 
```

但是，在结果页面中，如果社区的标签中同时包含“APPLE”和“apple”，则会显示 2 条相同的社区记录。

即使社区在小写和大写中都有相同的标签，如何让它在结果中只显示 1 条记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:26:32.500

我回答了类似的问题。你是同一个人吗？？无论如何，这将起作用：

```
@communities = Community.joins(taggings: :tag).where(['binary(tags.name) = ?', params[:tag]]).page(params[:page]).order("cached_votes_up DESC") 
```

# jboss - JBoss域动态端口偏移配置

> ID：14608474
> 
> 赞同：1
> 
> 时间：2013-01-30T16:09:03.537
> 
> 标签：jboss, jboss7.x

我似乎无法通过域管理设置上的属性文件配置端口偏移量，以启动服务器组中的多个服务器实例。

我有以下配置`host.xml`：

```
<servers>
    <server name="instance-one" group="main-server-group" auto-start="true">
       <socket-bindings port-offset="${jboss.instance1.offset}"/>
    </server>
    <server name="instance-two" group="main-server-group" auto-start="true">
        <!-- server-two avoids port conflicts by incrementing the ports in
             the default socket-group declared in the server-group -->
        <socket-bindings port-offset="${jboss.instance2.offset}"/>
    </server>
</servers> 
```

属性通过属性文件 ( `custom-domain.properties`) 配置：

```
jboss.domain.base.dir=custom-domain
jboss.instance1.offset=10300
jboss.instance2.offset=20300 
```

我尝试使用启动域

> ./domain.sh -P=custom-domain.properties

问题是`jboss.instance1.offset`and`jboss.instance2.offset`并没有被应用到`host.xml`. 如果我在其中有硬编码值，`host.xml`它似乎会在硬编码端口偏移上启动实例 1 和实例 2。

自定义属性配置在域设置中不起作用吗？

谢谢你的帮助。

# python - 导入模块时的奇怪行为

> ID：14608476
> 
> 赞同：4
> 
> 时间：2013-01-30T16:09:06.967
> 
> 标签：python, python-import

我有一个叫做“包”的 Python 包。在里面我有空的`__init__.py`和两个模块。一个被调用`m1.py`并且只包含一行：

```
x = 3 
```

另一个被调用`m2.py`并包含这一行：

```
x = 5 
```

现在我尝试使用这些模块。首先我做这样的事情：

```
from package.m1 import x
print package.m1.x 
```

当然它不起作用 - 我收到这样的错误：

```
NameError: name 'package' is not defined 
```

我明白为什么它不起作用。但后来我做了这样的事情：

```
from package.m1 import x
import package.m2
print package.m1.x 
```

现在它确实起作用了。为什么？如何？我没有导入 package.m1！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T16:57:52.760

我对此只有一种解释：

1.  `from package.m1 import x`加载模块`package`和`package.m1`. `m1`已添加到`package`模块`package`中，但未添加到您的全局变量中。
2.  `import package.m2`现在将该`package`模块添加到您的全局变量中。由于`m1`它已经是`package`它的一部分，现在可以通过`package.m1`.

进一步测试：

```
>>> from package import m1
>>> package.m1
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'package' is not defined
>>> import package.m2
>>> package.m1
<module 'package.m1' from 'package/m1.py'>
>>> from package import m3
>>> package.m3
<module 'package.m3' from 'package/m3.py'> 
```

测试继续：

```
>>> import package.m1
>>> del package
>>> import package
>>> package.m1
<module 'package.m1' from 'package/m1.py'> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:23:22.237

语法导入整个`from x import y`模块，然后引用当前命名空间中的指定对象。可以翻译为：

```
import x
y = x.y 
```

所以，你实际上是在导入 package.m1

# android - 在 Android 的自定义列表视图中使用单选按钮

> ID：14608479
> 
> 赞同：2
> 
> 时间：2013-01-30T16:09:22.113
> 
> 标签：android, android-listview, radio-button

我有一个使用 getView 完成的自定义列表视图。它必须是每行右侧的 4 个文本视图和一个单选按钮。我在这里看到了很多关于此的示例，但无法理解。这是我的 getView 函数。在这种情况下，我可以看到行，但是当我选择另一个单选按钮时，单选按钮仍然被选中。我应该在函数中添加什么才能使单选按钮正常工作并获取所选单选按钮的 ID？谢谢

```
private static class CitizenAdapter extends BaseAdapter {
         private LayoutInflater mInflater;
         public CitizenAdapter(Context context) {
                   mInflater = LayoutInflater.from(context);
                    }
         public int getCount() {
                    return sicilArr.size();
                    }
         public Object getItem(int position) {
                        return position;
                    }
         public long getItemId(int position) {
                        return position;
                    }       
         public View getView(final int position, View convertView, ViewGroup parent) {
                final ViewHolder holder;
                    if (convertView == null) {
                        convertView = mInflater.inflate(R.layout.table_row_citizen, null);
                        holder = new ViewHolder();
                        holder.text1 = (TextView) convertView.findViewById(R.id.TextView01);
                        holder.text2 = (TextView) convertView.findViewById(R.id.TextView02);
                        holder.text3 = (TextView) convertView.findViewById(R.id.TextView03);
                        holder.text4 = (TextView) convertView.findViewById(R.id.TextView04);
                        holder.radioCitizen = (RadioGroup) convertView.findViewById(R.id.radioGroupCitizen);
                        holder.radioButCitizen  = (RadioButton) convertView.findViewById(R.id.radioButtonCitizen);

                        holder.radioCitizen.setOnCheckedChangeListener(new OnCheckedChangeListener() {                              
                            @Override
                            public void onCheckedChanged(RadioGroup group, int checkedId) {

                            }
                        });
                        convertView.setTag(holder);
                    } else {
                        holder = (ViewHolder) convertView.getTag();
                    }       
                   holder.text1.setText(array1.get(position));
                   holder.text2.setText(array2.get(position));
                   holder.text3.setText(array3.get(position));  
                   holder.text4.setText(array4.get(position));

            return convertView;
           }        
             static class ViewHolder {      
                  TextView text1;
                  TextView text2;
                  TextView text3;
                  TextView text4;

                  RadioGroup radioCitizen;
                  RadioButton radioButCitizen;
                }       
            } 
```

这也是我的 xml 行文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_height="wrap_content"
android:gravity="left|center"
android:layout_width="wrap_content"
android:paddingBottom="10px"
android:paddingTop="10px"
android:paddingLeft="3px">    
 <TextView
    android:id="@+id/TextView01"
    android:layout_width="50dp"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:textSize="15dip"
    android:textStyle="bold"
    android:textColor="#d08021">
 </TextView>
<TextView
    android:id="@+id/TextView02"
    android:layout_width="120dp"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:textSize="15dip"
    android:textStyle="bold"
    android:textColor="#81A2BC">
 </TextView>
 <TextView
    android:id="@+id/TextView03"
    android:layout_width="120dp"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:textSize="15dip"
    android:textStyle="bold"
    android:textColor="#81A2BC">
 </TextView>    
 <TextView
    android:id="@+id/TextView04"
    android:layout_width="120dp"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:textSize="15dip"
    android:textStyle="bold"
    android:textColor="#81A2BC">
 </TextView> 
 <RadioGroup 
    android:id="@+id/radioGroupCitizen"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">
    <RadioButton
                        android:id="@+id/radioButtonCitizen"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content" />
 </RadioGroup> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T16:15:19.083

一种方法是手动取消选中所有其他单选按钮。您可以创建变量来保持当前选定项目的位置。并在`getView`您选中/取消选中当前单选按钮，具体取决于当前位置是否等于选定的一个。当使用按下单选按钮时，您可以更改所选项目的位置并调用`notifyDatasetChanged`。
还要检查这个问题：[Android ListView with RadioButton in singleChoice mode and a custom row layout](https://stackoverflow.com/questions/4250599/android-listview-with-radiobutton-in-singlechoice-mode-and-a-custom-row-layout)

1) 添加`private int selected = -1`到`CitizenAdapter`.
2）为每个单选按钮添加点击监听器：

```
holder.radioCitizen.setOnClickLisener(new View.OnClickListener() 
    {                              
        @Override
        public void onCheckedChanged(View view) {
            selected = (Integer) view.getTag();
            notifyDataSetChanged();
        }
    }); 
```

3）将每个单选按钮的标签设置为当前位置并设置检查状态：

```
// After you set text to 4 textviews
holder.radioButCitizen.setTag(position);
holder.radioButCitizen.setChecked(position == selected); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T14:41:15.343

```
 int selected = 0;

@Override
public View getView(final int position, View convertView, ViewGroup parent) 
{
    // TODO Auto-generated method stub

    ViewHolder holder;
    final RadioButton motif;

    if (null == convertView) 
    {
        convertView = View
                .inflate(parent.getContext(), R.layout.motif_item, null);
        holder = new ViewHolder(convertView);
        convertView.setTag(holder);
    }

    holder = (ViewHolder) convertView.getTag();
    motif = (RadioButton) holder.getmotif();

    motif.setTag(position);

    motif.setText(motifList.get(position));

    if(position == 0)
    {
        motif.setChecked(true);
    }
    else
        motif.setChecked(false);

    motif.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            selected = position;
            notifyDataSetChanged();
        }
    });

    if(position == selected)
        motif.setChecked(true);
    else
        motif.setChecked(false);

    return convertView;
}

private class ViewHolder {

    private View mRow;
    private RadioButton motif = null;

    public ViewHolder(View row) {
        mRow = row;
    }

    public RadioButton getmotif() {
        if (motif == null) {
            motif = (RadioButton) mRow.findViewById(R.id.itemMotif);
        }
        return motif;
    }
} 
```

# java - 如何忽略自签名证书并抑制对等未通过身份验证的错误

> ID：14608481
> 
> 赞同：1
> 
> 时间：2013-01-30T16:09:31.487
> 
> 标签：java, apache-httpclient-4.x, self-signed

我正在尝试将 Https Post 请求发送到使用自签名证书的服务器，并且我收到一个带有错误的异常：`peer not authenticated`.

我用谷歌搜索，发现问题的原因是服务器使用的是自签名证书。我怎样才能抑制这个错误？

我正在使用以下函数发送发布请求：

```
public String sendPost(final String request, final String postData) throws ClientProtocolException, IOException  {
    String result = null;
    CloseableHttpClient httpclient = HttpClients.createDefault();
    HttpPost httpPost = new HttpPost(request);
    ByteArrayEntity postDataEntity = new ByteArrayEntity(postData.getBytes());
    httpPost.setEntity(postDataEntity);
    CloseableHttpResponse response = httpclient.execute(httpPost);
    try {
        HttpEntity entity = response.getEntity();
        result = EntityUtils.toString(entity);
        EntityUtils.consume(entity);
    } finally {
        response.close();
    }
    return result;

} 
```

我错过了什么来抑制这个错误？我不想尝试捕捉这个异常。我想正确配置它，以便接受自签名证书。我正在使用 Httpclient 4.1。

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T18:38:27.990

您会在网络上找到这个问题的许多答案（包括 ufk 的答案），但它们根本不安全，因为它们完全忽略了自签名服务器证书。

这消除了 SSL 连接的大部分好处，并使您面临中间人攻击。

您可能想要做的是信任特定的自签名服务器证书，而不是盲目地接受**任何**服务器证书。

关键是在创建 SSL 上下文时将服务器证书链的副本放入信任库。

执行此操作的代码有点太长，无法在此处发布，但碰巧的是，我目前正在撰写一篇关于在 Android 上执行此操作的博客文章。博客文章尚未发布，但示例代码可在[GitHub](http://goo.gl/bUUIJ)上找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:52:49.140

```
public String sendPost(final String request, final String postData) throws ClientProtocolException, IOException, NoSuchAlgorithmException, KeyManagementException  {
    String result = null;
    SSLContext sslContext = SSLContext.getInstance("SSL");

    // set up a TrustManager that trusts everything
    sslContext.init(null, new TrustManager[] { new X509TrustManager() {
                public X509Certificate[] getAcceptedIssuers() {
                        System.out.println("getAcceptedIssuers =============");
                        return null;
                }

                public void checkClientTrusted(X509Certificate[] certs,
                                String authType) {
                        System.out.println("checkClientTrusted =============");
                }

                public void checkServerTrusted(X509Certificate[] certs,
                                String authType) {
                        System.out.println("checkServerTrusted =============");
                }
    } }, new SecureRandom());

    CloseableHttpClient httpclient = HttpClients.custom().setSSLSocketFactory(new SSLSocketFactory(sslContext)).build();
    HttpPost httpPost = new HttpPost(request);
    ByteArrayEntity postDataEntity = new ByteArrayEntity(postData.getBytes());
    httpPost.setEntity(postDataEntity);
    CloseableHttpResponse response = httpclient.execute(httpPost);
    try {
        HttpEntity entity = response.getEntity();
        result = EntityUtils.toString(entity);
        EntityUtils.consume(entity);
    } finally {
        response.close();
    }
    return result;

} 
```

# sql - 双重条件下的 SQL 连接

> ID：14608482
> 
> 赞同：0
> 
> 时间：2013-01-30T16:09:32.597
> 
> 标签：sql, join

假设我们有 2 个表，`A`并且`B`具有相同的结构，如下所示： `Currency`、`Spot`、`Exposure`、`Fixing`。

我们想要连接这两个表，以便查询，例如，并拥有主要的货币列表（货币 in和货币 in`Fixing = '2013-01-03'`之间并不总是对应）。`A``B`

*   1个条件：`A.Fixing = B.Fixing`
*   2 条件：（`A.Currency = B.Currency`也返回不匹配的货币值）

这是一个示例：我们在表`A`中请求了当天的美元货币，但我们在表 B 上没有它。我们想要的那一天是一个连接表，其中一行包含美元，后跟表中的 Exposure 值`A`和后跟零（因为 ARS 不在表 B 中，因此它没有美元敞口）

我们如何编写查询？

下表和结果：

表`A`：

```
Currency  Spot     Exposure      Fixing
--------  -------  ------------  ----------
AUD       1.3023   -504,561.00   30/01/2013
CHF       1.2378   268,243.00    30/01/2013
GBP       0.8597   2,204.00      30/01/2013
JPY       123.635  -552.00       30/01/2013
USD       1.3572   5,242.00      30/01/2013
AUD       1.300    -574,561.00   29/01/2013
CHF       1.235    545,152.00    29/01/2013
GBP       0.858    1,155,212.00  29/01/2013
JPY       123.388  -45,115.00    29/01/2013
USD       1.354    22,468.00     29/01/2013 
```

表`B`：

```
Currency  Spot     Exposure       Fixing
--------  -------  -------------  ----------
AUD       1.3023   256,442.00     30/01/2013
CHF       1.2378   -4,456,421.00  30/01/2013
GBP       0.8597   15,246.00      30/01/2013
JPY       123.635  1,243,146.00   30/01/2013
AUD       1.300    41,246.00      29/01/2013
CHF       1.235    243.00         29/01/2013
GBP       0.858    54,564.00      29/01/2013
JPY       123.388  140.00         29/01/2013 
```

结果：

```
Currency  A.Exposure   B.Exposure     Fixing
--------  -----------  -------------  ----------
AUD       -504,561.00  256,442.00     30/01/2013
CHF       268,243.00   -4,456,421.00  30/01/2013
GBP       2,204.00     15,246.00      30/01/2013
JPY       -552.00      1,243,146.00   30/01/2013
USD       5,242.00     -              30/01/2013 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:38:10.187

已编辑：左外连接允许您获取表 a 中的所有内容和表 b 中的匹配值，并且在表 b 中没有数据的情况下具有 NULL。使用 ISNULL() 函数通过检查 NULL 值来为您提供更清晰的结果，如果找到，则将其替换为您选择的不同值。

```
select
  a.Currency
, a.Spot
, a.Exposure as a_Exposure
, ISNULL(b.Exposure, 0) as b_Exposure
, a.Fixing
from a
left outer join b 
   on b.Currency = a.Currency
   and b.Fixing = a.Fixing
where a.Fixing = '2013-01-30'; 
```

我已更改查询以反映 Clockwork-Muse 的建议。您将需要添加任何您希望为其返回数据的列。

# grid - 如何在 matplotlib 图中的特定位置添加网格线？

> ID：14608483
> 
> 赞同：54
> 
> 时间：2013-01-30T16:09:33.550
> 
> 标签：grid, matplotlib

如何在 matplotlib 图中 y 轴上的特定位置添加网格？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-01-30T18:16:22.313

是的。这很简单。使用对象的`set_[x|y]ticks`方法`axes`并正常切换网格：

```
import matplotlib.pyplot as plt
fig, ax = plt.subplots()
ax.set_yticks([0.2, 0.6, 0.8], minor=False)
ax.set_yticks([0.3, 0.55, 0.7], minor=True)
ax.yaxis.grid(True, which='major')
ax.yaxis.grid(True, which='minor')
plt.show() 
```

![自定义刻度位置](../Images/1ffe36150af423c2825b0674848142d7.png)

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2013-01-31T04:16:08.510

如果您只想输入一两行，您可以使用

```
ax.axhline(y, linestyle='--', color='k') # horizontal lines
ax.axvline(x, linestyle='--', color='k') # vertical lines 
```

将线条样式和颜色（或所有其他线条/艺术家属性）设置为您想要的

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-02-14T14:44:56.997

为了改进@tacaswell 的答案，这里有一个示例，它使用了 的概念`axhline`并对其进行了调整，使其看起来类似于线网格。`ax.xaxis.grid(True)`在此示例中，它仅在 x 轴上使用了起始默认网格，但也可以通过 simpy add在代码中添加网格也在 y 轴（或仅在此轴上） 。

第一个简单地开始在所需位置画一条线：

```
import matplotlib.pyplot as plt

fig, ax = plt.subplots()
ax.xaxis.grid(True)
ynew = 0.3
ax.axhline(ynew)

plt.show() 
```

得到以下结果

[![网格1](../Images/271800d066e7c0a0202a9a5cb78d9ed6.png)](https://i.stack.imgur.com/iRYUR.png)

这与线网格不太相似。
通过更改颜色和线宽，如下所示：

```
import matplotlib.pyplot as plt

fig, ax = plt.subplots()
ax.xaxis.grid(True)
ynew = 0.3
ax.axhline(ynew, color='gray', linewidth=0.5)

plt.show() 
```

我们得到这个，现在实际上等于一个线网格。

[![网格2](../Images/8749c67a77e240592bf1cf90bf199b11.png)](https://i.stack.imgur.com/sOqW2.png)

如果那么我们还想在 y 轴上添加一个刻度和相关标签，在新行所在的位置：

```
import matplotlib.pyplot as plt
import numpy as np

fig, ax = plt.subplots()
ax.xaxis.grid(True)
ynew = 0.3
ax.axhline(ynew, color='gray', linewidth=0.5)

yt = ax.get_yticks()
yt=np.append(yt,ynew)

ax.set_yticks(yt)
ax.set_yticklabels(yt)

plt.show() 
```

这导致：

[![网格3](../Images/14000304ad4221f5515f1d2cad4a984f.png)](https://i.stack.imgur.com/mKZgt.png)

不好了！出现了一些近似值，0.6 处的标签并不完全代表数字 0.6。别担心，我们可以简单地通过将标签数组四舍五入来解决这个问题，如下所示：

```
import matplotlib.pyplot as plt
import numpy as np

fig, ax = plt.subplots()
ax.xaxis.grid(True)
ynew = 0.3
ax.axhline(ynew, color='gray', linewidth=0.5)

yt = ax.get_yticks()
yt=np.append(yt,ynew)

ax.set_yticks(yt)
ax.set_yticklabels(np.round(yt,1))

plt.show() 
```

和 TA-DAAA :)

[![网格4](../Images/a9c35bbdfdbb6fd8ba54e7668521b701.png)](https://i.stack.imgur.com/iWjBB.png)

# excel - 检测整个工作表中的任何（整个）行选择并取消保护？

> ID：14608486
> 
> 赞同：1
> 
> 时间：2013-01-30T16:09:38.730
> 
> 标签：excel, vba

寻找以下代码：

工作表当前已锁定（启用锁定单元格选择）。

VBA 检测是否选择了任何整行（例如 21、22）并自动取消保护工作表。

然后：

如果这些确切的行被删除.. 表会自动再次保护。

如果用户取消选择这些行.. 表再次保护。

（这是为了执行特定的行删除而设计的）

非常粗略：

```
Private Sub Worksheet_SelectionChange(ByVal Target As Range)
    IF Rows("1:1").Select AND/OR Rows("2:2").Select AND/OR Rows("3:3").Select then
        ActiveSheet.Unprotect
    End If

    ActiveCell.Row.Delete
    ActiveSheet.Protect

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:21:59.777

记得先`Application.enableEvents = True`设置

**编辑**更改代码作为 OP 在讨论中的新规范

限制：整行（必须解锁每个单元格才能选择整行）

```
' remember the event's name is `Worksheet_SelectionChange`
' NOT Worksheet1_SelectionChange
Private Sub Worksheet_SelectionChange(ByVal Target As Range)
    ActiveSheet.Unprotect
    ' the rows to be selected
    Dim row1 As Range
    Dim row2 As Range
    Dim row3 As Range
    Dim mergedRange As Range
    Set row1 = Me.Rows("1:1")
    Set row2 = Me.Rows("3:3")
    Set row3 = Me.Rows("5:5")
    Dim found As Boolean
    Dim Match As Boolean
    Set mergedRange = Application.Union(row1, row2)
    Set mergedRange = Application.Union(mergedRange, row3)
    Match = False

    ' check if it selects only 1 row
    If Target.Areas.Count <> 1 Then
        ActiveSheet.Protect
        Exit Sub
    End If

    ' check if it's select the first 500 rows
    If Target.Areas.Item(1).Row > 0 And Target.Areas.Item(1).Row <= 500 Then
        'check if it's selecting the WHOLE row
        If Me.Rows(Target.Areas.Item(1).Row & ":" & Target.Areas.Item(1).Row).Areas.Item(1).Count = Target.Areas.Item(1).Count Then
            ' check if the "B" Column of this row's backgound color is blue
            If Me.Cells(Target.Areas.Item(1).Row, 2).Interior.Color = RGB(197, 217, 241) Then
                Match = True
            End If
        End If
    End If

    If Match Then

        'MsgBox "ActiveSheet.Unprotect"
        ActiveSheet.Unprotect
    Else
        Debug.Print "notMatch"
        'ActiveCell.Row.Delete
       ActiveSheet.Protect
    End If

End Sub 
```

# python - 定期擦除 Google App Engine 数据存储区

> ID：14608488
> 
> 赞同：1
> 
> 时间：2013-01-30T16:09:56.760
> 
> 标签：python, google-app-engine, google-cloud-datastore

我在我的一个 GAE 应用程序中看到一些非常奇怪的行为，其中定期（每隔几天左右），整个数据存储似乎被擦除并重新启动。我一直在寻找可能的原因，但到目前为止空手而归。

数据存储区中只有 1 个实体，具有 2 个属性。我正在通过读取 CSV 文件并插入数据来加载数据存储。这是该代码的样子：

```
filename = "data.csv"
rows = []
with open(filename, 'rb') as csvfile:
    lines = csv.reader(csvfile, delimiter=',', quotechar='"')
    for line in lines:
        prop1Value = line[0]
        prop2Value = line[1]
        aRow = SomeEntity(prop1=prop1Value, prop2=prop2Value)
        rows.append(aRow)

chunkSize = 50
numProgressChunks = int(len(rows) / chunkSize) + 1

for puttableRows in chunks(rows, chunkSize):
    db.put(puttableRows) 
```

这是数据写入数据存储的唯一时间。它可以工作，在我导入 CSV 后，我可以进行查询和获取数据。然后几天后我发现数据不见了。不仅所有行都消失了，而且 GAE 数据存储查看器中不再存在实体（种类），而当我自己删除所有行时，种类仍然出现。

这可能是巧合，但上次数据被擦除时，我注意到 GAE 实例大约在同一时间（几分钟内）启动。

这是一个 HRD 应用程序，带有 python2.7，使用 django。在它被重置的时候没有部署。我查看了日志，在重置时找不到任何奇怪的事情发生。

我错过了什么？

# c# - SelectedIndexChanged 事件多次触发

> ID：14608491
> 
> 赞同：2
> 
> 时间：2013-01-30T16:10:03.970
> 
> 标签：c#, datagridview

当用户更改我的网格中 DataGridViewComboBoxColumn 的值时，我需要执行一个操作。假设我必须显示一条消息。

问题是 messagebox.show("hello") 代码执行了数百万次。

这是我的代码。

```
grilla.EditingControlShowing+=new DataGridViewEditingControlShowingEventHandler(grilla_EditingControlShowing);

void  grilla_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
        {
            if (e.Control is ComboBox) //i have only one combobox column.
            {
                ComboBox cb = (ComboBox)e.Control;
                // first remove event handler to keep from attaching multiple:
                cb.SelectedIndexChanged -= new EventHandler(cb_SelectedIndexChanged);

                // now attach the event handler
                cb.SelectedIndexChanged += new EventHandler(cb_SelectedIndexChanged);
            }

        }

        void cb_SelectedIndexChanged(object sender, EventArgs e)
        {
            MessageBox.Show("hello");
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:16:50.093

最后，你找到了一个完全符合我要求的代码：

```
grid.CurrentCellDirtyStateChanged += (s, e) => 
            {
                if (grid.IsCurrentCellDirty)
                {
                    grid.CommitEdit(DataGridViewDataErrorContexts.Commit);

                    MessageBox.Show("hello");
                }
            }; 
```

更改组合框单元格的值后，该消息仅显示一次。

# css - 带有固定元素的水平 CSS 过渡？

> ID：14608498
> 
> 赞同：2
> 
> 时间：2013-01-30T16:10:28.303
> 
> 标签：css, transition, fixed

我正在开发一个多设备网页，我想对一个 div（.carrousel）进行 CSS 转换，其中包含 3 个其他 div（.bloc1 到 3），使用左浮动水平放置首先，只显示 div 2 和 3（ negatif 留在 .carrousel 上，溢出隐藏在容器上下面的结构。问题是固定元素在 Chrome、IE8、Android 4.03 和 3.02 中没有正确定位，但在 Firefox 15.0、IE9 和 IE7 下！一切运行良好...欢迎任何有关更改 HTML 结构的建议，因为过渡效果保持不变...但我不想通过设备使用一些 hack 或特定 CSS

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" />
    <style type="text/css">

        * { margin:0; padding:0; }
        a img { border:none; }
        body { font-family:Tahoma; font-size:12px; }
        p { margin:10px 0; }

        .global { width:940px; overflow:hidden; position:relative; margin:20px auto; border:#F00 solid 1px; }

        .carrousel { width:1660px; overflow:hidden; position:relative; top:0;
            -webkit-transition: left .2s ease-in-out;
            -moz-transition: left .2s ease-in-out;
            -ms-transition: left .2s ease-in-out;
            -o-transition: left .2s ease-in-out;
            transition: left .2s ease-in-out; }

        .bloc { float:left; padding:5px; margin:5px; text-aligh:center; }               

        .bloc1 { width:700px; height:400px; background-color:#F00; }

        .bloc2 { width:200px; height:300px; background-color:#999; }
        .nav { position:fixed; z-index:2; background-color:#F90; width:200px; }
        .nav a { display:block; margin:10px 0; }

        .bloc3 { width:700px; min-height:300px; position:relative; background-color:#FF0; }
        .header { width:700px; height:50px; position:fixed; z-index:2; background-color:#6FF; }
        .list { height:3000px; padding-top:50px; position:relative; z-index:1; background-color:#9C3; }

        .carrousel.showblocs23 { left:-720px; }

        .carrousel.showblocs12 { left:0; }
        .carrousel.showblocs12 .header { position:relative; }           

    </style>

    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>

    <title>blocr</title>

</head>

<body>

    <div class="global">

        <div class="carrousel showblocs23">  

            <div class="bloc bloc1">
            bloc 1              
            </div>

            <div class="bloc bloc2">
            bloc 2
                <div class="nav">
                fixed nav<br />
                    <a href="#" onclick="$('.carrousel').removeClass('showblocs23').addClass('showblocs12'); return false;">
                    Show blocs {1, 2}
                    </a>                                
                    <a href="#" onclick="$('.carrousel').removeClass('showblocs12').addClass('showblocs23'); return false;">
                    Show blocs {2, 3}
                    </a>
                </div>                
            </div>

            <div class="bloc bloc3">

            bloc 3

                <div class="header">
                    bloc 3 header fixed
                </div>

                <div class="list">
                    bloc 3 long list
                </div>

            </div>

        </div><!-- /carrousel --> 

    </div><!-- /global -->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T18:22:54.357

这里有两个主要问题，除非我误解了你的意图。

1.  看来你已经混合`absolute`和`fixed`定位了。该`position: fixed`属性使元素相对于**浏览器窗口**定位，而不是其父 div。您正在寻找`position: absolute`和`.header`类`.list`。

2.  您`z-index`在不需要的地方使用。您可以`z-index`从所有类中删除该属性。这揭示了另一个问题，你的`.list`班级需要有`margin-top: 50px`而不是`padding-top: 50px`. 填充填充元素边框内的区域，而边距在元素边框外创建不可见的边距。有关[margin](http://www.w3schools.com/css/css_margin.asp)和[padding](http://www.w3schools.com/css/css_padding.asp)的更多信息，请查看 w3 学校以获取更多信息。

这是工作代码的 JSFiddle：http: [//jsfiddle.net/sjAcV/](http://jsfiddle.net/sjAcV/)

这是您原始代码的 JSFiddle：http: [//jsfiddle.net/VVZrg/](http://jsfiddle.net/VVZrg/)

# android - 如何在android中我自己上传的地图上画线

> ID：14608503
> 
> 赞同：2
> 
> 时间：2013-01-30T16:10:30.050
> 
> 标签：android, maps, android-canvas, draw, android-maps

> **可能重复：**
> [如何在 Android 上的 ImageView 上画线？](https://stackoverflow.com/questions/8831642/how-to-draw-lines-over-imageview-on-android)

我试图找出如何在上传的 ImageView 上画线（这将是地图的路径）。我想要做的是在我的应用程序上上传一张地图，然后画线来表示通过这张地图的路径。我刚刚发现如何使用 Google Maps 的 API 来做到这一点。我想上传我自己的地图。有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:19:26.130

我认为这可能是[如何在 Android 上的 ImageView 上绘制线条的副本？](https://stackoverflow.com/questions/8831642/how-to-draw-lines-over-imageview-on-android)

但如果不是这样，如果我理解正确，您想在 ImageView 上动态绘制线条以显示我认为可以使用[drawLine](http://developer.android.com/reference/android/graphics/Canvas.html#drawLine%28float,%20float,%20float,%20float,%20android.graphics.Paint%29)方法完成的路径。

您可能需要覆盖 ImageView 的 onDraw 方法并保留路径的点列表。

# visual-studio - Silverlight OOB 应用程序和 Web 服务在同一个解决方案中

> ID：14608504
> 
> 赞同：0
> 
> 时间：2013-01-30T16:10:32.367
> 
> 标签：visual-studio, silverlight-4.0, silverlight-5.0

我正在使用 vs2012 并创建了一个 Silverlight 5 浏览器应用程序，该应用程序与 MVC 4 webapi Web 服务进行通信以获取其数据。

如果我将 Web 服务设置为启动项目并让应用程序在浏览器中运行并嵌入在 MVC Web 服务的视图中，那么我可以使用同一解决方案中的两个项目成功启动并使用 Web 服务测试 Silverlight 应用程序地点。如果我将 silverlight 应用程序设置为启动应用程序，以便我可以像用户那样在浏览器中运行它，那么 MVC 站点将不会启动，并且 Web 服务也无法连接。

无论如何，两个项目都在同一个 Visual Studio 实例中运行，但是 Silverlight 应用程序用完了浏览器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:21:52.180

尝试这个：

在解决方案资源管理器中右键单击解决方案并选择属性。然后在 Common Properties/Startup Project 中选择 Multiple startup project 选项并将两者都设置为“Start”。关闭并再次开始调试。

# c# - c# Async Socket.BeginSendFile 只异步发送两个文件

> ID：14608508
> 
> 赞同：1
> 
> 时间：2013-01-30T16:10:43.783
> 
> 标签：c#, .net, sockets, asyncsocket

我对为什么我的**Socket.BeginSendFile 一次**只异步发送两个文件感到困惑。我已经在不同的计算机上进行了测试，结果相同。

***Socket.BeginSend****似乎按预期一次发送所有三个。*

我测试了将三个客户端连接到服务器。效果很好，所有三个都按预期异步连接。每个客户端（图片中的 Test100.exe、Test200.exe、Test300.exe）将根据连接的客户端从服务器请求名为 100、200 或 300 的文件夹中的文件。

问题是**Socket.BeginSendFile**一次最多只能将两个文件发送到流中。一旦之前调用的 2 个**Socket.BeginSendFile 之一**完成。见下文; ![在此处输入图像描述](../Images/5d7027a34a07d9bf8a7e4f0217465562.png)

**前两个发送的客户端之一完成发送后，第三个开始接收。**

![在此处输入图像描述](../Images/c91e95e21719d263ed5a148221ebe4f3.png)

在代码中放置一些断点，我可以看出所有三个 Socket.BeginSendFile(...) 都被称为异步。

```
 private static void Send(Socket handler, String data)
    {
        string dateFolder =  data.Replace("<EOF>", "");

        string longFileName = "C:\\"+dateFolder+"\\poopoo.txt";
        string shortFileName = "poopoo.txt";

        // ==== for beginSend
        //byte[] fileData = File.ReadAllBytes(longFileName);
        // ==== for beginSend

        byte[] fileNameByte = Encoding.ASCII.GetBytes(shortFileName);
        byte[] fileInfo = Encoding.ASCII.GetBytes("C:\\Users\\Trim\\Desktop");
        byte[] fileInfoLen = BitConverter.GetBytes(fileInfo.Length); // we know these are ints (4bytes)

        byte[] clientData = new byte[4 + fileNameByte.Length + fileInfoLen.Length + fileInfo.Length];// + fileData.Length + eofByte.Length
        // ==== for beginSend
        //byte[] clientData = new byte[4 + fileNameByte.Length + fileInfoLen.Length + fileInfo.Length + fileData.Length];
        // ==== for beginSend

        byte[] fileNameLen = BitConverter.GetBytes(fileNameByte.Length); // we know these are int (4bytes);

        fileNameLen.CopyTo(clientData, 0);
        fileNameByte.CopyTo(clientData, 4); // room for error file name 4bytes?
        fileInfoLen.CopyTo(clientData, 4 + fileNameByte.Length);
        fileInfo.CopyTo(clientData, 4 + fileNameByte.Length + fileInfoLen.Length);

        // ==== for beginSend
        //fileData.CopyTo(clientData, 4 + fileNameByte.Length + fileInfoLen.Length + fileInfo.Length);
        // ==== for beginSend
        // *** Break point shows all three being called async
        handler.BeginSendFile(longFileName, clientData, null, 0, new AsyncCallback(AsynchronousFileSendCallback), handler);

       // handler.BeginSend(clientData, 0, clientData.Length, 0, new AsyncCallback(SendCallback), handler);

    } 
```

第三个 Socket.BeginSendFile(...) 实际上直到前两个 AsynchronousFileSendCallback 方法之一才开始发送文件

```
 private static void AsynchronousFileSendCallback(IAsyncResult ar)
    {
        // Retrieve the socket from the state object.
        Socket client = (Socket)ar.AsyncState;

        // Complete sending the data to the remote device.
        client.EndSendFile(ar); // **Third** client doesn't actually start receiving his data until EndSendFile is called atleast once.

        Console.WriteLine("Send file to client.");
       // sendDone.Set();
        client.Shutdown(SocketShutdown.Both);
        client.Close();
    } 
```

正如我之前所说，如果我使用**Socket.BeginSend**，问题就会消失。虽然我需要能够使用**Socket.BeginSendFile**因为它将文件分块在一个单独的线程上，特别是`byte[] fileData = File.ReadAllBytes(longFileName);`与我的**Socket.BeginSend**结构一起使用的这行代码对于大文件来说是不可接受的:(

非常感谢大家的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T21:01:09.367

BeginSendFile 很可能使用 Windows API 函数 TransmitFile 来完成其工作。*此 API 在客户端*版本的 Windows上仅限于 2 个并发传输。

> Windows 的工作站和客户端版本通过将系统上允许的并发 TransmitFile 操作数限制为最多两个来优化 TransmitFile 功能，以实现最小的内存和资源利用率。在 Windows Vista、Windows XP、Windows 2000 Professional 和 Windows NT Workstation 3.51 及更高版本上，只能同时处理两个未完成的 TransmitFile 请求；第三个请求将等到前面的请求之一完成。

# java - java dom 转义字符

> ID：14608513
> 
> 赞同：1
> 
> 时间：2013-01-30T16:10:52.260
> 
> 标签：java, xml, dom

当我使用 DOM 创建 XML 文件时，我遇到了转义字符的问题。在结果文件中，我需要转义字符：`&`, `<`, `>`, `"`, `'`. 生成 XML 文件后，DOM 会自动转义字符`&`、、、。但字符并没有转义。如果我在生成 XML 之前手动更改这些字符， DOM 会转义符号。结果是这样的：.`<``>``"``'``&quot;``&apos;``&``&amp;apos;`

我该如何解决？也许我可以设置为 DOM 来转义符号`"`，`'`或者可以手动转义所有字符并禁用 DOM 的自动转义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T11:21:02.520

我用变通方法解决了这个问题。创建后我重新打开文件并更改我需要的所有符号。也许这不是很好的解决方案，但它工作正常。

# mysql - 如何克隆 mysql 数据库的内容？

> ID：14608520
> 
> 赞同：-1
> 
> 时间：2013-01-30T16:11:16.090
> 
> 标签：mysql, sql, database, clone

我希望能够将我的 mysql 数据库中的所有表克隆到另一个数据库中。但这里的问题是我不希望克隆的内容是静态的。我希望它与原始数据库同步更新。在Mysql中可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:19:48.570

你需要设置一个[mysql slave](http://dev.mysql.com/doc/refman/5.1/en/replication.html)。

# regex - 匹配除列出的单词之外的所有单词

> ID：14608521
> 
> 赞同：3
> 
> 时间：2013-01-30T16:11:15.913
> 
> 标签：regex, perl, word, match

我的问题是，如果字符串包含除了我列出的单词之外的任何单词，我需要匹配。

例如，我可能有这个批准的列表：

```
User1
User2 
```

以下是两个应该匹配和不应该匹配的示例。

应该匹配（因为 User3 未被批准）：

```
User1
User2
User3 
```

不应该匹配（因为列出的每个字符串都在批准的列表中）：

```
User1 
```

我已经尝试过环视断言，但它们实际上并没有在尝试匹配时消耗这些字母，所以使用类似 的字符串`"User1\r\nUser2"`，我会得到类似`"ser1\r\n"`. 我想知道除了我认为允许的词之外是否还有其他词。

我不能使用编程语言来做到这一点；我只被允许将正则表达式交给程序。语言将是 Perl。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T16:19:52.227

做`/\b((?!(User1\b|User2\b)).+?)\b/`你想要的吗？

`\b`表示分词，即单词和非单词字符之间的间隙（零宽度）。

`?!`表示否定的前瞻断言（也是零宽度）。

`.+?`被用来捕获任何与排除的单词不匹配的东西。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T16:27:58.453

```
\b(?!(User1|User2))\w+\b 
```

这应该匹配“|”中未列出的任何单词 分隔列表

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T18:45:14.210

```
/\b(?!User[12]\b)\w+/ 
```

`a-zA-Z0-9_`将匹配除`User1`and之外的任何单词（包含 的字符串） `User2`。

# c# - XmlDataSource 绑定无法正确显示结果

> ID：14608522
> 
> 赞同：0
> 
> 时间：2013-01-30T16:11:17.037
> 
> 标签：c#, wpf, wpf-controls

我已经`ComboBox`和Xml数据源绑定了，我想在`ComboBox`. 但现在它在`ComboBox`.

我怎样才能做到这一点？

```
<RecordSet>
    <Rows>
        <Row>Day</Row>
        <Row>Month</Row>
        <Row>Year</Row>
    </Rows>
</RecordSet>

 <ComboBox Grid.Row="1" Grid.Column="1" Name="MyDependCombo" ItemsSource="{Binding}">
        <ComboBox.DataContext>
            <XmlDataProvider Source="/Data/MyContentYearData.xml" XPath="/RecordSet/Rows"/>
        </ComboBox.DataContext>
</ComboBox> 
```

答案将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:21:52.207

`XPath="/RecordSet/Rows/Row"`

...（28,29,30）

# c# - 从 C# 代码运行单个 TestFixtures

> ID：14608523
> 
> 赞同：5
> 
> 时间：2013-01-30T16:11:21.113
> 
> 标签：c#, nunit

我知道如何从 C# 代码运行完整的 NUnit 程序集

```
TestPackage testPackage = new TestPackage(assemblyName);
RemoteTestRunner remoteTestRunner = new RemoteTestRunner();
remoteTestRunner.Load(testPackage);
TestResult testResult = remoteTestRunner.Run(new NullListener(), TestFilter.Empty, false, LoggingThreshold.Error); 
```

但是我怎样才能运行单个 TestFixtures 甚至单个测试呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:12:39.673

感谢@Tony Hopkinson，我找到了解决方案。我只需要创建一个继承`TestFilter`并覆盖其中的`Match`函数的类。

```
public class SingleTestFilter : TestFilter
{
    private string testName;

    public SingleTestFilter(string TestName)
    {
        testName = TestName;
    }

    public override bool Match(ITest test)
    {
        return test.TestName.Name.Equals(testName);
    }
} 
```

然后`remoteTestRunner.Run`用它作为参数调用。

```
remoteTestRunner.Run(new NullListener(), new SingleTestFilter("MyTest"), false, LoggingThreshold.Error); 
```

# jquery - 按键重定向问题

> ID：14608527
> 
> 赞同：0
> 
> 时间：2013-01-30T16:11:33.283
> 
> 标签：jquery, keypress

我有这个代码用于在按下一个键时重定向：

```
$('body').bind('keyup', function(event) {
    if (event.keyCode == 66) { 
        window.location = "page.php"; 
    }
}); 
```

我有这个，但重复了大约 10 个不同的键。

`CTRL`我的问题是，如果用户使用鼠标示例突出显示文本，如果他使用+`C`或`CTRL`+进行复制或粘贴，我如何使其不适用`P`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:35:17.433

[显然](https://stackoverflow.com/a/1828802/1225328)，JS中没有`isKeyDown()`函数。也就是说，这应该适合您的需求：

```
function noMetakeyPressed(metakeysPressed) {
    for (var k in metakeysPressed) {
        if (metakeysPressed[k]) {
            return false;
        }
    }
    return true;
}

var metakeysPressed = {17: false, 18: false};

$('body')
.bind('keydown', function(event) {
    switch(event.keyCode) {
    case 17: // Ctrl
    case 18: // Alt
        metakeysPressed[event.keyCode] = true;
        break;
    case 66: // B
        if (noMetakeyPressed(metakeysPressed)) {
            alert("B pressed");
        }
        break;
    }
})
.bind('keyup', function(event) {
    if(event.keyCode === 17 || event.keyCode == 18) {
        metakeysPressed[event.keyCode] = false;
    }
}); 
```

[演示](http://jsfiddle.net/krw7X/)

您也可以使用单个`isMetakeyPressed`布尔变量，但也许您需要知道*当前*按下的元键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:15:08.010

检查选定的文本和键：

```
$('body').on('keyup', function(event) {
   var t = '';
   if(window.getSelection){
       t = window.getSelection();
   }else if(document.getSelection){
       t = document.getSelection();
   }else if(document.selection){
       t = document.selection.createRange().text;
   }
   if ((!t.length) && event.which==66) window.location = 'page.php';
}); 
```

# android - 如何获得所有记录的总和/总数？ANDROID Sqlite

> ID：14608532
> 
> 赞同：0
> 
> 时间：2013-01-30T16:11:42.883
> 
> 标签：android, sqlite

我想得到所有记录的总数。我将从我的用餐服务中获取记录。我想把所有的值加起来。例如，请检查：

餐食
第 1 排 - 8
第 2 排 - 2
第 3 排 - 3
总计：13

这就是我所拥有的：

```
public String getTotal() {
        String[] column =
                new String[]{ KEY_SERVING, "sum(meal_serving)" };
        Cursor c = 
                ourDatabase.query( DATABASE_TABLE, column, null, null, null, null, null );

    String result = "";
    int iSERVING = c.getColumnIndex( KEY_SERVING );

    for ( c.moveToFirst(); ! c.isAfterLast(); c.moveToNext() ){
        result = result + c.getString( iSERVING );
    }
    return result;
} 
```

但只显示最后一条记录。怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T16:16:13.733

你需要做

```
String[]{ "sum(meal_serving) as " + KEY_SERVING }; 
```

而不是您当前的列字符串数组。这将生成总和并将其命名，以便您可以检索它。

如果 KEY_SERVING 也是您的其他列之一，您可能需要组成一个唯一的名称。

# mysql - 使用 Ruby MySQL Query fetch_row 来计算行数返回之前的值。是否有必须清除的缓存或内存？

> ID：14608533
> 
> 赞同：1
> 
> 时间：2013-01-30T16:11:42.960
> 
> 标签：mysql, ruby

```
DB = Mysql.real_connect("localhost", "admin", "pass", "main")
number = 12345 #This number exists in table
#Create Date Entry
booking_exists = DB.query("SELECT count(*) FROM booking WHERE number='#{number}';").fetch_row

number = 12345 #This number does not exist in table
booking_exists = DB.query("SELECT count(*) FROM booking WHERE number='#{number}';").fetch_row
if booking_exists[0][0][0] > 0
  puts "Skipping Existing Booking #{number}"
end 
```

所以它计算存在的变量数量。第一个返回 1。第二个应该返回 0，但它也返回 1，除非我再次运行查询。我似乎找不到寻找这个的原因。我应该做某种刷新查询吗？

谢谢

# c# - DataGrid 更改单个单元格的背景

> ID：14608537
> 
> 赞同：1
> 
> 时间：2013-01-30T16:11:45.980
> 
> 标签：c#, wpf, datagrid, background, converter

我正在尝试在“DataGrid”中设置单个单元格的背景颜色，但每次将颜色设置为 DataGridCell 时，都会覆盖整行的背景。我的代码：

```
 <Setter Property="CellStyle">
                    <Setter.Value>
                        <Style TargetType="{x:Type DataGridCell}">
                            <Setter Property="Background" Value="{Binding id, Converter={StaticResource TheConverter}}" />
                        </Style>
                    </Setter.Value>
                </Setter>

public class CellHighlighterConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (value.ToString() == "1") return new SolidColorBrush(Colors.Red);

        return null;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

所以问题是……ID为“1”的整行都是红色的！不只是 id 单元格。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:47:25.733

您可以尝试以下解决方法：

1.  用网格包裹单元格内容。
2.  将网格设置为水平和垂直拉伸。
3.  现在更改网格的背景颜色，而不是单元格的背景颜色。

我自己没有测试过，但我认为它值得一试。

# php - bind_param() 和 execute() 错误 (mysqli)

> ID：14608540
> 
> 赞同：0
> 
> 时间：2013-01-30T16:11:56.593
> 
> 标签：php, mysqli

我在下面有一个代码示例，我正在尝试使用 call_user_func_array();

```
 function make_values_referenced (&$arr) { 
            $refs = array(); 
            foreach ($arr as $key => $value) {
              $refs[$key] = &$arr[$key];
            }
            return $refs;
          }

        $selectedstudentanswerqry = "
        SELECT q.SessionId, QuestionNo, QuestionContent, o.OptionType, q.NoofAnswers, 
        GROUP_CONCAT( DISTINCT Answer ORDER BY Answer SEPARATOR ',' ) AS Answer, r.ReplyType
        FROM Question q ON (sa.QuestionId = q.QuestionId)
        INNER JOIN Answer an ON q.QuestionId = an.QuestionId
        LEFT JOIN Reply r ON q.ReplyId = r.ReplyId
        LEFT JOIN Option_Table o ON q.OptionId = o.OptionId
        ";

        // Initially empty
        $where = array('q.SessionId = ?');
        $parameters = array($_POST["session"]);
        $parameterTypes = 'i';

        // Check whether a specific student was selected
        if($_POST["student"] !== 'All') {
            $where[] = 'sa.StudentId = ?';
            $parameters[] = $_POST["student"];
            $parameterTypes .= 'i';
        }

        // Check whether a specific question was selected
        // NB: This is not an else if!
        if($_POST["question"] !== 'All') {
            $where[] = 'q.QuestionId = ?';
            $parameters[] = $_POST["question"];
            $parameterTypes .= 'i';
        }

        // If we added to $where in any of the conditionals, we need a WHERE clause in
        // our query
        if(!empty($where)) {
            $selectedstudentanswerqry .= ' WHERE ' . implode(' AND ', $where);
            global $mysqli;
            $selectedstudentanswerstmt=$mysqli->prepare($selectedstudentanswerqry);

                    // Make the referenced array
            $referencedArray = make_values_referenced(array_merge(
             (array($parameterTypes, $parameters))));

            // You only need to call bind_param once
            call_user_func_array(array($selectedstudentanswerstmt, 'bind_param'),make_values_referenced($referencedArray)); //LINE 331

    }

    $selectedstudentanswerqry .= "
      GROUP BY sa.StudentId, q.QuestionId
      ORDER BY StudentAlias, q.SessionId, QuestionNo
    ";

    // get result and assign variables (prefix with db)
    $selectedstudentanswerstmt->execute();  //LINE 341
    $selectedstudentanswerstmt->bind_result($detailsSessionId,$detailsQuestionNo, 
$detailsQuestonContent,$detailsOptionType,$detailsNoofAnswers,$detailsAnswer,$detailsReplyType); //LINE 344 

$selectedstudentanswerstmt->store_result();
$selectedstudentanswernum = $selectedstudentanswerstmt->num_rows(); 
$selectedstudentanswerstmt->close(); 
```

现在我尝试在这里使用手册来指导我：[http ://ca.php.net/manual/en/mysqli-stmt.bind-param.php#96770](http://ca.php.net/manual/en/mysqli-stmt.bind-param.php#96770)

我遇到的问题是我收到了很多错误，我的问题是我需要帮助纠正上面的代码才能解决这个问题。

```
Warning: mysqli_stmt::bind_param(): Number of elements in type definition string doesn't match number of bind variables in app/...  on line 331 

Warning: mysqli_stmt::execute(): (HY000/2031): No data supplied for parameters in prepared statement in /app/... on line 341 

Warning: mysqli_stmt::bind_result(): (HY000/2031): No data supplied for parameters in prepared statement in app/...  on line 344

 Warning: mysqli_stmt::store_result(): (HY000/2014): Commands out of sync; you can't run this command now in app/... on line 348 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T01:04:06.863

这是一种通用的方法，可能有点不好的做法，但这可以完成工作，了解哪个条件并添加绑定参数和参数类型，具体取决于选择的选项：

```
if (count($where) == 1) {
  $selectedstudentanswerstmt->bind_param($parameterTypes, $parameters[0]);
}
else if (count($where) == 2) {
  $selectedstudentanswerstmt->bind_param($parameterTypes, $parameters[0], $parameters[1]);
}
else if (count($where) == 3) {
   $selectedstudentanswerstmt->bind_param($parameterTypes, $parameters[0], $parameters[1], $parameters[2]);
} 
```

# android - Android - XML 布局 - Horizo ntalScrollView

> ID：14608544
> 
> 赞同：1
> 
> 时间：2013-01-30T16:12:08.810
> 
> 标签：android, android-layout

你好朋友我刚刚开始通过观看 Travis 的视频来学习 android。

他制作了一个应用程序，其中包含一个图像滑块。我遵循了每一步，一切正常。他用过

下面是我的 XML 代码。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

<ImageView
    android:id="@+id/IVDisplay"
    android:layout_width="wrap_content"
    android:layout_height="200dp"
    android:layout_gravity="center"
    android:src="@drawable/a"
     />

<Button
    android:id="@+id/setBG"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:text="@string/set_as_wallpaper" />

<HorizontalScrollView
    android:layout_width="200dp"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:fillViewport="true"
    android:scrollbars="horizontal|vertical" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <ImageView
            android:id="@+id/viewImage1"
            android:layout_width="125dp"
            android:layout_height="125dp"
            android:padding="15dp"
            android:src="@drawable/a" />

        <ImageView
            android:id="@+id/viewImage2"
            android:layout_width="125dp"
            android:layout_height="125dp"
            android:padding="15dp"
            android:src="@drawable/c" />

        <ImageView
            android:id="@+id/viewImage3"
            android:layout_width="125dp"
            android:layout_height="125dp"
            android:padding="15dp"
            android:src="@drawable/d" />

        <ImageView
            android:id="@+id/viewImage4"
            android:layout_width="125dp"
            android:layout_height="125dp"
            android:padding="15dp"
            android:src="@drawable/e" />

    </LinearLayout>
</HorizontalScrollView>
</LinearLayout> 
```

图像显示正确......但一次只能显示 1 个半图像......而还有许多其他图像......所以我使用 Horizo​​ntalScrollView 显示滑块来滑动图像。

这是我提到的视频[http://www.youtube.com/watch?v=wp5sORsPopw](http://www.youtube.com/watch?v=wp5sORsPopw)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:30:45.390

您已经设置了水平滚动视图宽度`android:layout_width="200dp"`所以要解决您的问题，请将其替换为`android:layout_width="wrap_content"`.

像这样 ： -

```
<HorizontalScrollView
    android:layout_width="wrap_content"  <<SET it to wrap_content like
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:fillViewport="true"
    android:scrollbars="horizontal|vertical" > 
```

**在水平滚动视图中显示滚动条。**

将其写入定义水平滚动视图的布局文件中。

```
android:fadeScrollbars="false" which is equivalent to ScrollView.setScrollbarFadingEnabled(false); 
```

正如你所说，我认为这没有任何问题。它工作正常。我已经签入模拟器。图像水平滑动很好！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:21:36.700

我通常不明白你的问题是什么，但据我所知，你必须使用`Clean`你的项目，转到`Project`（在菜单栏中）->`Clean...`而不是选择你的项目并清理，它必须有帮助。

编辑：这是问题所在

```
 android:layout_width="200dp"
    android:layout_height="wrap_content" 
```

您必须将此代码更改为此代码

```
 android:layout_width="wrap_content"
    android:layout_height="200dp" 
```

另外 wrap_content 意味着视图想要足够大以包含其内容，所以它一定是问题所在

问候

# javascript - 从本地存储中删除

> ID：14608548
> 
> 赞同：1
> 
> 时间：2013-01-30T16:12:17.563
> 
> 标签：javascript, jquery, html, local-storage

我正在尝试为我的小桌子使用本地存储，我只想保存一些东西这里是我当前的代码：

```
 $("#dodaj").click(function()
    {

        var str = "<tr onclick='Oznaci(this)'><td>"+stevilka+"</td><td>"+naslov+"</td><td>"+vrsta+"</td><td>"+nujnost+"</td><td>"+datum+"</td></tr>";
        $("#tabela").append(str);

        localStorage.podatki = localStorage.podatki + str;
    });

    $("#odstrani").click(function()
    {
        {
            $(".rdeca").remove();   
            localStorage.removeItem(".rdeca");      
        }
    });

function Oznaci(vrstica)
{
    $(vrstica).css({"background-color":"#FF0000"});
    $(vrstica).attr("class","rdeca");
} 
```

我成功添加到 localStorage，但是当我调用`localStorage.removeItem(".rdeca");`它时不会删除它。我可能删除了错误的东西（.rdeca）。因为我可能应该从中删除像 str 一样组合的字符串，但我不知道我该如何做到这一点。感谢您的帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T16:16:06.243

您的代码中显示的唯一分配`localStorage`是：

```
localStorage.podatki = localStorage.podatki + str; 
```

您存储的项目的名称是，`podatki`因此您需要使用该名称将其删除：

```
localStorage.removeItem("podatki") 
```

如果您的目标是**删除存储在该名称下的部分值，那么您需要手动执行该操作**。也就是说，您需要读取该属性，根据需要对其进行修改，然后再写回它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T16:19:38.317

localstorage 中的项目没有 jQuery 方法来更新它。

您需要手动将内容从本地存储中拉出，删除节点并重新插入。

# ruby-on-rails - 带导轨的空白注释条目

> ID：14608549
> 
> 赞同：0
> 
> 时间：2013-01-30T16:12:31.457
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我正在尝试添加向“待办事项”类型应用程序中的项目添加评论的功能，但遇到了问题。

我之前创建了一个带有评论的项目，从未遇到过这个问题，但基本上 rails 在项目页面上绘制了一个空评论。

我尝试了一些 if 语句没有任何运气，有人看到我的问题吗？

```
<% @project.comments.each do |comment| %>
    <div class="commentBlock"><strong><%= comment.posted_by %>  says:</strong>
    <%=raw comment.comment %>
    <small><i class="icon-remove"></i> <%= link_to 'Delete', [comment.project, comment],:confirm => 'Are you sure?',:method => :delete %></small></div>
<% end %>

<h3>Leave a comment</h3>

<%= form_for([@project, @project.comments.build]) do |f| %>
  <div class="field">
    <%= f.hidden_field :posted_by, :value => current_user.username %>
  </div>
  <div class="field">
    <%= f.label :comment %><br />
    <%= f.text_area :comment, :class => "tinymce" %><%= tinymce %>
  </div>
  <p><%= f.submit :class => 'btn' %></p>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:29:04.363

**答案是我的项目控制器中的错误，引用@comment 如下：**

```
@comment = @project.comments.build(params[:comment]) by accident!! 
```

**变成：**

```
@comment = @project.comments 
```

一切正常：P感谢您的帮助，糟糕的“一天结束”错误就在那里：P

# c# - 如何对我的网站进行单元测试？

> ID：14608555
> 
> 赞同：0
> 
> 时间：2013-01-30T16:12:50.817
> 
> 标签：c#, unit-testing, web, visual-studio-2012

不好意思问这么简单的问题。我是新手。我正在建立我的网站。我尝试为它创建一个 UnitTest 项目，但我不能不为它创建一个引用。即使我为我的类方法创建了命名空间，Visual Studio 也不允许我使用该方法并查看命名空间。UnitTesting 网站与 UnitTesting 普通程序完全不同吗？网上有什么参考资料吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T18:04:28.287

您可能需要考虑在 Visual Studio 2012 中使用新的 Fakes 支持。简而言之，您可以绕过对网站 API 的调用，并让调用路由到您提供的委托。这允许您以模块化的方式隔离测试您的代码。

[您可以在http://msdn.microsoft.com/en-us/library/hh549175.aspx](http://msdn.microsoft.com/en-us/library/hh549175.aspx)找到更多详细信息

问候，

帕特里克·曾

Visual Studio ALM 团队。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T16:19:29.083

使用[这篇](http://kakimotonline.com/2011/02/13/tdd-in-asp-net-mvc-applications-with-moq-framework/)文章。如果你是 mvc 用户，请使用[这个](https://stackoverflow.com/questions/8818207/how-should-one-unit-test-a-net-mvc-controller)问题。还有这个 stie

您可能听说过一句古老的格言：“更好、更快、更便宜，选择任意两个。” 如果你想要一些又好又快的东西，它就不会便宜，如果你想要一些又快又便宜的东西，它就不会很好。更便宜、更快、更好意味着我们需要更快地编写更多代码，对吧？像那么简单就好了。学习打字更快可能会满足其中两个要求，但它不会使您开发的软件变得更好。那么我们如何让软件变得更好呢？“更好”是什么意思？

“更好”意味着生产出具有较少缺陷的灵活、可维护的软件；更好的软件是关于长期可维护性的。为了实现这一点，一个关键的设计决策是确保组件松散耦合。松耦合软件有很多好处。一个突出的是它提高了我们测试解决方案的能力。如果我们编写的软件可以很容易地分解成小部分，那么测试就会变得更容易。这么说听起来很简单，但今天使用的软件数量难以测试或维护表明它并不像我们想的那么简单。软件需要耦合才能做任何有用的事情，但开发人员需要工具和技术来减少耦合，以便解决方案更容易测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T16:20:15.267

我假设您的网站代码在一个项目中，而您的单元测试代码在同一解决方案的另一个项目中？为了让一个项目中的代码访问另一个项目的代码，您必须添加对另一个项目的引用：

1.  右键单击单元测试项目，然后单击“添加引用...”
2.  打开“项目”选项卡，选择网站项目并单击“确定”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T16:17:11.157

您不应该对您的网站进行单元测试。您应该对业务层代码进行单元测试。测试您的网站可能是 UI 测试，您可以使用 Selenium 之类的工具。我建议阅读单元测试和单元测试框架（MSTest、NUnit 等）。你应该对你的应用程序进行分层，这样你就可以在绝对隔离的情况下测试你的类、对象、数据访问等。

例子：

一个`Manage Users`页面可以向管理员显示所有用户的列表，这些用户按过滤条件进行过滤。

页面应该只处理 UI 方面的问题，例如，它应该只关心*显示*数据。它应该向另一个对象发送请求以获取用户列表。也许像 a`UserRepository`这样的东西有一个名为的方法`GetUsers`，它接受一个过滤条件。

这就是单元测试的用武之地。您将测试（也许通过模拟）当给定数据库中*非常具体*的用户列表和特定过滤条件时，该`GetUsers`方法返回您期望的用户列表。

# html - 仅生成 HTML5 的插件代码

> ID：14608556
> 
> 赞同：1
> 
> 时间：2013-01-30T16:12:53.380
> 
> 标签：html, iframe, facebook-likebox

我正在尝试向我的网站添加一个 Like Box（我之前做过几个）并且我使用 iFrame 代码。当我填写信息并单击“获取代码”时，它会显示正常的代码选项... HTML5 等。但是，当我单击其他代码选项时，什么也没有发生。它只是停留在 HTML5 上。我尝试了几种不同的浏览器，重置我的设置并再次尝试。还在做同样的事情......有什么帮助吗？

# c# - 设置依赖属性值时出错

> ID：14608557
> 
> 赞同：1
> 
> 时间：2013-01-30T16:12:58.593
> 
> 标签：c#, .net, wpf, xaml

我有一个“RoomType”类，我正在创建一个可以将 RoomType 作为属性并显示名称的用户控件。我正在尝试将用户控件与属性绑定，如下所示：

```
public static readonly DependencyProperty TypeProperty =
        DependencyProperty.Register("Type", typeof(RoomType), typeof(RoomTypeBox));

    public RoomType Type
    {
        get
        {
            return (RoomType)GetValue(TypeProperty);
        }

        set
        {
            SetValue(TypeProperty, value);
        }
    } 
```

问题是，当我将值（一个 RoomType 对象）设置为属性时，它会抛出“StackOverFlow 异常”，我已经逐步调试并且不存在无限循环。

这是 UserControl 的 XAML

```
<UserControl x:Class="NH_Motel.Components.RoomTypeBox"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" Width="310.667" Height="28">
<Grid Name="Base" Height="28">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="180*" />
        <ColumnDefinition Width="0*" />
    </Grid.ColumnDefinitions>
    <Button Content="..." HorizontalAlignment="Right" x:Name="btnSelect" Width="47" d:LayoutOverrides="HorizontalAlignment, VerticalAlignment" Height="28" Style="{DynamicResource ButtonStyle3}" Click="btnSelect_Click" />
    <TextBox x:Name="txbText" Height="28" Margin="0,0,51,0" TextWrapping="Wrap" VerticalAlignment="Top" Template="{DynamicResource TextBoxControlTemplate1}" d:LayoutOverrides="HorizontalAlignment" Text="{Binding Type.Text}"/>
</Grid> 
```

文本框模板

```
<ControlTemplate x:Key="TextBoxControlTemplate1" TargetType="{x:Type TextBox}">
    <ControlTemplate.Resources>
        <Storyboard x:Key="OnLoaded1">
            <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Panel.Background).(SolidColorBrush.Color)" Storyboard.TargetName="PART_ContentHost">
                <EasingColorKeyFrame KeyTime="0" Value="#FF6A7FCE"/>
            </ColorAnimationUsingKeyFrames>
        </Storyboard>
        <Storyboard x:Key="OnGotFocus1"/>
    </ControlTemplate.Resources>
    <Border BorderBrush="#FF494949" BorderThickness="1" CornerRadius="2">
        <ScrollViewer x:Name="PART_ContentHost" Background="#FFC1C5D4" FontFamily="Arial" BorderThickness="0"/>
    </Border>
    <ControlTemplate.Triggers>
        <EventTrigger RoutedEvent="FocusManager.GotFocus">
            <RemoveStoryboard BeginStoryboardName="OnLoaded1_BeginStoryboard"/>
            <BeginStoryboard x:Name="OnLoaded1_BeginStoryboard" Storyboard="{StaticResource OnLoaded1}"/>
        </EventTrigger>
    </ControlTemplate.Triggers>
</ControlTemplate> 
```

# javascript - 将html放入变量时保持美化的缩进结构？

> ID：14608565
> 
> 赞同：1
> 
> 时间：2013-01-30T16:13:26.467
> 
> 标签：javascript, templates, handlebars.js, var, mustache

从编码开始，JS，今天我在 HTML 中多次注入了一个 HTML 模板，这要归功于 JS。但是，我对缩小 html 缩进并将所有十几个行（div、h1、span、table、tr、td、tt）折叠成单个 var 行的系统需求感到困惑。缩小的 html 既难以准备好，也经常需要在测试阶段进行美化。

另外：**有没有办法将美化缩进的 html 保留在变量中？**

一些具有有效版本的语法：

```
var exampleTpl = "
      <div data-demo-html="true">
        <div data-role="collapsible-set" data-inset="true" data-theme="b" data-content-theme="d">
          <div data-role="collapsible" data-collapsed="false">
            <h4>Heading</h4>
            <ul data-role="listview" data-filter="false" data-inset="true">
              <li><a href="#">List item 1</a></li>
              <li><a href="#">List item 2</a></li>
              <li><a href="#">List item 3</a></li>
            </ul>
          </div>
" 
```

最好提前感谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T10:27:36.890

出于模板的目的，您应该查看[Handlebars.js 主页](http://handlebarsjs.com#getting-started)上的示例：

### 声明你的模板

```
<script id="entry-template" type="text/x-handlebars-template">
  <div class="entry">
    <h1>{{title}}</h1>
    <div class="body">
      {{body}}
    </div>
  </div>
</script> 
```

### 在 JavaScript 中编译模板

```
var source   = $("#entry-template").html();
var template = Handlebars.compile(source); 
```

### 膨胀 HTML

```
var context = {title: "My New Post", body: "This is my first post!"}
var html    = template(context); 
```

这将导致您的模板实例（值注入您的模板）：

```
<div class="entry">
  <h1>My New Post</h1>
  <div class="body">
    This is my first post!
  </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:17:17.370

你可以这样做：

```
var exampleTpl =
      '<div data-demo-html="true">' + 
        '<div data-role="collapsible-set" data-inset="true" data-theme="b" data-content-theme="d">' +
          '<div data-role="collapsible" data-collapsed="false">' +
            '<h4>Heading</h4>' +
            '<ul data-role="listview" data-filter="false" data-inset="true">' +
              '<li><a href="#">List item 1</a></li>' +
              '<li><a href="#">List item 2</a></li>' +
              '<li><a href="#">List item 3</a></li>' +
            '</ul>' +
          '</div>' +
        '</div>' +
      '</div>'; 
```

如果你真的想...

但是，如果您在 mustache JS 中表示模板（只查看那里的标签），我个人将模板添加到脚本元素中，然后按照一些模板库（例如 handlebarsjs.com）的建议使用 innerHTML 访问它们）。

例如：

```
 <script type="text/html" id="myTemplate">
     <div data-demo-html="true">
        <div data-role="collapsible-set" data-inset="true" data-theme="b" data-content-theme="d">
          <div data-role="collapsible" data-collapsed="false">
            <h4>Heading</h4>
            <ul data-role="listview" data-filter="false" data-inset="true">
              <li><a href="#">List item 1</a></li>
              <li><a href="#">List item 2</a></li>
              <li><a href="#">List item 3</a></li>
            </ul>
          </div>
        </div>
      </div>
    </script> 
```

# java - 使用 Ant 构建多个 jars

> ID：14608566
> 
> 赞同：5
> 
> 时间：2013-01-30T16:13:30.070
> 
> 标签：java, eclipse, ant

我有多个 Java eclipse 项目。他们每个人都有用于构建 jar 的“jardesc”文件。很好 - 双击 -> 完成并制作 jar 文件。但是当我必须导出几个罐子时，这很痛苦——我必须多次重复这个过程。请告诉我，我可以使用 Ant 脚本一次运行多个“jardesc”文件（并根据每个 jardesc 文件获取几个 jars）吗？怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T16:47:58.070

您可以使用 jar 目标为您制作罐子：

```
 <jar destfile='destination.jar' basedir='source\dir\' /> 
```

所以你的 build.xml 看起来有点像这样：

```
 <project default="makejars">
        <target name="makejars">
            <jar destfile="app1.jar" basedir="app1\src\" />
            <jar destfile="app2.jar" basedir="app2\src\" />
            <jar destfile="app3.jar" basedir="app3\src\" /> 
        </target>
    </project> 
```

然后只需在与 build.xml 相同的目录中运行 ant，就可以制作 jars。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T16:19:00.607

看一下`subant`ant中的任务。您可以创建将调用其他文件的 ant 文件。

```
 <subant target="create_jar1">
        <fileset dir="." includes="jar2.xml"/>
    </subant>
    <subant target="create_jar2">
        <fileset dir="." includes="jar1.xml"/>
    </subant> 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-30T16:20:57.013

您可以使用一些循环来创建 ant 参数，但是**无法循环创建多个 jar**（即使使用 ant-commons 扩展名），复制和粘贴是唯一可行的解​​决方案**，除非您想编写一个 ant 插件**（它不t 真的要花 2 个小时阅读文档 + 编写简单的插件）

# javascript - 清理草率代码 html/css/javascript

> ID：14608570
> 
> 赞同：0
> 
> 时间：2013-01-30T16:13:43.177
> 
> 标签：javascript, html, css

我正在尝试整理我的 html、css 和 javascript。我知道这很草率，但我想不出一种更干净的方式来写东西。我可以看到帽子必须有更整洁的方式。

[http://jsfiddle.net/craigzilla/hk8SR/](http://jsfiddle.net/craigzilla/hk8SR/)

有什么建议么？

```
#btn1 {
height: 88px;
width: 110px;
float: left;
position: absolute;
}
#btn2 {
height: 88px;
width: 110px;
float: left;
position: absolute;
left: 110px;
}
#btn3 {
height: 88px;
width: 110px;
float: left;
position: absolute;
left: 220px;
}
.rollover1 {
background-image: url(http://www.placehold.it/110x88);
height: 88px;
width: 110px;
opacity: 0;
float: left;
}
.rollover2 {
background-image: url(http://www.placehold.it/110x88);
height: 88px;
width: 110px;
opacity: 0;
float: left;
}
.rollover3 {
background-image: url(http://www.placehold.it/110x88);
height: 88px;
width: 110px;
opacity: 0;
float: left;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T16:22:03.360

首先，您可以为多个选择器分配相同的规则。像这样的东西：

```
.rollover1, .rollover2, .rollover3 {
    background-image: url(http://www.placehold.it/110x88);
    height: 88px;
    width: 110px;
    opacity: 0;
    float: left;
} 
```

不过，比这更好的是，您可以消除对 .rollover1、2 和 3 的需求，只需创建一个适用于所有内容的 .rollover 类。

如果每次翻转都需要不同的图像，那么这将起作用：

```
.rollover1, .rollover2, .rollover3 {
    height: 88px;
    width: 110px;
    opacity: 0;
    float: left;
}
.rollover1{
    background-image: url(http://www.placehold.it/110x88);
}
.rollover2{
    background-image: url(http://www.placehold.it/110x88?2);
 } 
```

您可以对您的 ID 执行相同的操作。

如果你认真地想要清理你的样式，请查看“[面向对象的 CSS](http://coding.smashingmagazine.com/2011/12/12/an-introduction-to-object-oriented-css-oocss/) ”（注意：我认为“OOCSS”这个名称非常具有误导性，但它仍然是一个很好的做法）。面向对象的 CSS，基本上改变了编写 CSS 的方法。而不是说“这个 CSS 用于我的蓝色按钮，并且有 5px 的边距”并输出如下代码：

```
#myBlueButton{
    background-color:#00f;
    margin:5px;
}

<button id="myBlueButton"> 
```

你这样写 CSS：

```
.blue{
    background-color:#00f;
}
.margin5px{
    margin:5px;
} 
```

然后您的按钮将如下所示：

```
<button class="blue margin5px"> 
```

这鼓励[了关注点](http://viget.com/extend/client-side-separation-of-concerns-are-we-doing-it-wrong)和[语义类](http://css-tricks.com/semantic-class-names/)的分离，同时减少了对 ID 的需求并减少了对[过度具体的 CSS 选择器](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)的需求。它还允许您轻松地重复使用您的 CSS 样式，而不必[重复自己](http://www.vanseodesign.com/css/dry-principles/)。

不过，甚至比 OOCSS 更好的是，查看诸如[SASS](http://sass-lang.com/)和[LESS](http://lesscss.org/)之类的东西，它们允许您编写将为您生成 CSS 的规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T16:16:50.533

Rollover1 Rollover2 和 Rollover3 都是具有完全相同样式的类，这意味着您只需要一个翻转类。您可以乘坐其中两个，因为它们是相同的。

例子：

```
 .rollover {  // Everytime you need this styling call this class
 background-image: url(http://www.placehold.it/110x88);
 height: 88px;
 width: 110px;
 opacity: 0;
 float: left; 
```

}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T16:19:40.247

我认为对所有内容都使用类，然后分别放置元素会占用最少的代码。

```
<style>
.btn {
height: 88px;
width: 110px;
float: left;
position: absolute;
}
.rollover {
background-image: url(http://www.placehold.it/110x88);
height: 88px;
width: 110px;
opacity: 0;
float: left;
</style> 
```

您只需要声明一个类，然后就可以将其应用于任意数量的元素；而 ids 只能用于一个特定的元素......所以如果你想将类似的属性应用于许多东西，请使用一个类，然后将 ids 用于特定的东西。

因此，在您的 html 中，您可以在按钮`class="btn"`和每个按钮中使用来设置它们的相似属性，然后您可以在样式标签中添加不同的数字来唯一地定位它们`style="left:###px;"`。然后`class="rollover"`在你的翻车上使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T16:22:00.523

像这样的东西（最好让所有人都在“课堂”中）：

```
.btn1, .btn2, .btn3, .rollover1, .rollover2, .rollover3 {
width:100px;
height: 88px;
float: left;
}

.btn1, .btn2, .btn3 {position: absolute;}

.rollover1, .rollover2, .rollover3 {opacity: 0;}

.btn2{left: 110px]
.btn3{left: 210px} 
```

您还可以将 .rollover 和 .btn 放在精灵 CSS 中，**使其成为一条规则（一个类调用）**，然后使用`background-position`：[CSS Sprites](http://www.w3schools.com/css/css_image_sprites.asp)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T16:23:33.967

指向问题：**清理草率代码html/css/javascript**

与这篇文章相关：[https ://stackoverflow.com/questions/1086584/online-service-to-cleanup-html-formatting](https://stackoverflow.com/questions/1086584/online-service-to-cleanup-html-formatting)

*   清理你的 .css：[https ://csscompressor.net/](https://csscompressor.net/)
*   清理你的 .js ：http: [//jsbeautifier.org/](http://jsbeautifier.org/)
*   清理你的 html：http: [//infohound.net/tidy/](http://infohound.net/tidy/)

*   有关整理工具的其他选项：[https ://www.google.com/search?num=100&q=html+tidy+online&oq=html+tidy](https://www.google.com/search?num=100&q=html+tidy+online&oq=html+tidy)

继续

# ruby-on-rails - 如何存根整个班级

> ID：14608574
> 
> 赞同：1
> 
> 时间：2013-01-30T16:13:57.463
> 
> 标签：ruby-on-rails, rspec

我正在开始重构我的测试以在不加载 Rails 的情况下运行的过程。我的大多数测试仍然是加载 rails 的标准 rspec 测试。我的问题是，在下面的测试文件中，我覆盖了一个在许多其他测试文件中使用的类。因此，即使这些测试通过，其他测试也会失败。[在这里](https://stackoverflow.com/questions/14588115/testing-without-loading-rails-faked-class-need-so-be-unfaked-after-tests-run)得到很多建议后，我希望对那个 Project 类进行存根。（我宁愿在这个文件中存根项目类，而不是在需要它的所有其他测试文件中重新加载项目类。）

这就是我现在所拥有的。

```
require 'active_model'
require 'active_model/validations'
require 'active_record/callbacks'
require 'active_support/core_ext/string' #used for '.blank?' method

class Project
  attr_accessor :general_media
  def initialize(attributes = {})
    @general_media = attributes[:general_media]
  end
  include ActiveModel::Validations    
  include ActiveRecord::Callbacks
end

require_relative '../../../app/models/project/media.rb'

describe 'Project::Media' do
  #then all the tests 
```

我试图创建一个 FakeProject 类并通过使用 FakeProject 对 Project 进行存根来继承 Project::Media，但它没有用。这就是我所拥有的。

```
require 'active_model'
require 'active_model/validations'
require 'active_record/callbacks'
require 'active_support/core_ext/string' #used for '.blank?' method

class FakeProject
  attr_accessor :general_media
  def initialize(attributes = {})
    @general_media = attributes[:general_media]
  end
  include ActiveModel::Validations    
  include ActiveRecord::Callbacks
end
class Project; end
require_relative '../../../app/models/project/media.rb'

describe 'Project::Media' do
  before(:all) { stub_constant!("Project", FakeProject) } 
```

首先，我仍在覆盖项目类，其次，stubbig 不起作用。我仍然收到有关验证不起作用的错误。

```
undefined method `validate' for Project::Media:Class (NoMethodError) 
```

有什么建议么？我的目标是仅为此 media_spec.rb 测试文件中的测试存根 Project 类，而不是覆盖 Project 类对所有测试的行为方式。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-30T16:24:04.357

您可以使用 rspec 语法创建 Fake 类。就像是：

```
let(:fake_class) { Class.new }
stub_const("Project", fake_class) 
```

如果你想为那个 Project 类存根任何方法，你可以这样做：

```
dummy_class = Project # the same name that you used above
# stub any method and return anything that you want to return
dummy_class.stub_chain(:any_method).and_return(anything) 
```

# sql-server-2008 - 如何使用 SQL Server 中另一个表计算的列创建表？

> ID：14608577
> 
> 赞同：0
> 
> 时间：2013-01-30T16:14:02.970
> 
> 标签：sql-server-2008, tsql

如何使用 SQL Server 中另一个表计算的列创建表？

例如：

**表A**：

```
 Name   SerialNoStart  SerialNoEnd
    A        1              3
    B        2              4
    C        1              1 
```

我想创建一个序列号介于`SerialNoEnd`和之间的新表`SerialNoStart`

新表如下：

`TableB`：

```
 Name    SerialNo
   A          1
   A          2
   A          3
   B          2
   B          3
   B          4
   C          1 
```

怎么做？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T16:22:56.700

您可以使用递归 CTE 拆分数据，类似于：

```
;with data(name, SerialNoStart, SerialNoEnd) as
(
    select name, SerialNoStart, SerialNoEnd
    from TableA
    union all
    select name, SerialNoStart +1, SerialNoEnd
    from data
    where SerialNoStart +1 <= SerialNoEnd
)
select name, SerialNoStart as SerialNo
from data
order by name 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/3fd18/1)

# java - 构建机器：错误：包 net.rim.device.api.ui 不存在

> ID：14608578
> 
> 赞同：1
> 
> 时间：2013-01-30T16:14:05.920
> 
> 标签：java, blackberry, ant, blackberry-eclipse-plugin

我试图让我们的构建机器在签入时始终如一地构建我们的 Blackberry 项目（使用 Eclipse 插件而不是 JDE 构建）。我们正在使用 Jenkins 调用该项目，有时它可以工作，但只有在我在远端机器上的 Eclipse 中启动了该项目之后，然后重新启动会导致错误再次出现。

我得到的第一个错误是（以下错误都是相同的）：

```
 [javac] c:\<path_to_project>\src\path\to\package\class.java:6: error: package net.rim.device.api.ui does not exist 
```

以及对 net.rim.* 对象的所有其他引用。显然这是因为它没有链接到目标 net_rim_api.jar 文件，但我不知道到底出了什么问题。我尝试查看 build.xml 文件，但我得到更多错误，并且其他线程中此错误的其他版本结果不是一回事。

我已经尝试安装和使用 BB-Ant（大致遵循[本教程](http://supportforums.blackberry.com/t5/Java-Development/How-to-use-bb-ant-tools-with-Eclipse-without-the-Eclipse-plugin/td-p/123689)），但它没有为我提供解决方案 - 我准备承认我在实施中可能犯了一个错误，但我尽可能地遵循它与我目前的项目。

我将不胜感激您能给我的任何帮助。

**编辑**

因此，我现在更改了要使用的项目，`<rapc>`而不是`<javac>`似乎为您链接到 .jar 的项目，但仍然令人沮丧的是，您不能简单地使用自动生成的 build.xml。这是 Eclipse 的一个已知问题（并且由于互联网上缺乏可用的信息，已被接受）吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T21:39:37.070

大约一年前，我走上了 BB Ant 构建脚本之路，在这个站点上得到了很多帮助，并试图在这个站点上记录我的进度。希望我放置的链接会对您和其他人有所帮助。

我将其标记为“社区 wiki”，因为它没有直接回答问题，但我认为它很有用。

* * *

## 基本算法

我在此页面上的回答显示了工作构建脚本的算法（[BlackBerry：create COD from JAR source file in Ant script](https://stackoverflow.com/questions/10632262/blackberry-create-cod-from-jar-source-file-in-ant-script)）。也许这比您要寻找的要复杂，但它确实显示了我发现的 javac 和 rapc 之间的关系。

总而言之，我想将我的 SDK 包含到最终构建中，步骤如下：

1.  javac SDK 创建 CLASS 文件

2.  预验证 CLASS 文件

3.  jar SDK

4.  将 SDK JAR 文件复制到项目中

5.  javac 项目 - 使用 SDK JAR 作为类路径

6.  预验证项目 CLASS 文件（同样，在类路径中使用 SDK JAR）

7.  jar 项目 - 将 SDK JAR 添加为 zipfileset

8.  jarjar 此项目 JAR 以根据需要重构包名称

9.  最后，在这个 JAR 上运行 rapc - 它不会发现重复的 COD 文件并且应该可以正常运行。

请阅读该页面上的其他答案，因为它们提供了我在最终结果中使用的很好的建议。

* * *

## 额外信息 & 在最终输出中包含一个 JAR

我推荐这个页面只是为了我在其中包含的额外链接 - 确切的问题是无关的（[BlackBerry - Ant script to include JAR in project without external dependencies](https://stackoverflow.com/questions/10582450/blackberry-ant-script-to-include-jar-in-project-without-external-dependancies)）。

同样，价值在于其他人提供的答案。

* * *

## 杂项

以下是我遇到的其他 BB 构建脚本问题的几个链接 - 您或其他人可能会发现它们很有用：

*   [BlackBerry - 用于更复杂应用的 Ant 构建脚本](https://stackoverflow.com/questions/8942230/blackberry-ant-build-script-for-more-complex-apps)

*   [黑莓——构建过程的最后一步](https://stackoverflow.com/questions/7062213/blackberry-final-step-of-build-process)

最后，在将您自己的代码编译到库中以导入不同的项目时，这说明了文档中的一个错误：

*   [BlackBerry - 在自己的项目中使用自己的 JAR 文件](https://stackoverflow.com/questions/9976940/blackberry-use-own-jar-file-in-own-project)

# extjs - 图表不会用 extjs 3.4 绘制

> ID：14608580
> 
> 赞同：1
> 
> 时间：2013-01-30T16:14:16.213
> 
> 标签：extjs, charts, extjs4, extjs3

一个简单的问题，非常简单的代码，我只是复制/粘贴代码示例，当然是在我的本地项目上，但没有绘制图表......我真的不明白发生了什么，我怀疑我的 swf 的 url本地文件夹，同样的问题，请帮忙！

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Charts v1.0</title>
    <link rel="stylesheet" type="text/css" href="css/ext-all.css" rel="stylesheet" />
    <script type="text/javascript" src="js/ext-base-debug.js"></script>
    <script type="text/javascript" src="js/ext-all-debug.js"></script>
    <style>

    </style>
</head>
<script type="text/javascript">

    Ext.onReady(function(){

         // extra extra simple
        Ext.chart.Chart.CHART_URL = 'images/charts.swf';

         var store = new Ext.data.JsonStore({
            fields:['name', 'visits', 'views'],
        data: [
            {name:'Jul 07', visits: 245000, views: 3000000},
            {name:'Aug 07', visits: 240000, views: 3500000},
            {name:'Sep 07', visits: 355000, views: 4000000},
            {name:'Oct 07', visits: 375000, views: 4200000},
            {name:'Nov 07', visits: 490000, views: 4500000},
            {name:'Dec 07', visits: 495000, views: 5800000},
            {name:'Jan 08', visits: 520000, views: 6000000},
            {name:'Feb 08', visits: 620000, views: 7500000}
        ]
        });

// extra extra simple
new Ext.Panel({
    title: 'ExtJS.com Visits Trend, 2007/2008 (No styling)',
    renderTo: 'container',
    width:500,
    height:300,
    layout:'fit',
    items: {
        xtype: 'linechart',
        store: store,
        xField: 'name',
        yField: 'visits',
        listeners: {
            itemclick: function(o){
                var rec = store.getAt(o.index);
                Ext.example.msg('Item Selected', 'You chose {0}.', rec.get('name'));
            }
        }
    }
});
});

</script>
<body style="padding: 50px;"><div id='container'></div></body>
 </html> 
```

没有网络问题，所有需要的资源都正确加载了..也尝试了没有url的def，在这种情况下，extjs在yahooui cdn上获取swf，同样的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T05:27:22.440

如果没有网络服务器，您将无法在本地运行它，这就是它失败的原因。设置一个本地网络服务器，它应该可以工作。

# asp.net - MVC3 asp.net Html.AntiForgeryToken() 问题，而用户有多个具有相同表单的选项卡

> ID：14608581
> 
> 赞同：4
> 
> 时间：2013-01-30T16:14:18.233
> 
> 标签：asp.net, asp.net-mvc-3, antiforgerytoken

我正在尝试将其添加`Html.AntiForgeryToken()`到 MVC3 站点的登录表单中。该表格位于网站的每个页面上。我注意到，如果用户在网站上打开多个选项卡，然后返回旧选项卡并提交登录表单，则其他选项卡上的令牌将变为无效，即使使用 salt 也是如此。有没有办法解决这个问题？

这只是一个例子，网站上还有其他表单，用户似乎要打开多个选项卡。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-07-03T07:32:05.490

我们的电子商务网站也有同样的问题。在我的情况下，用户可以在不登录的情况下将东西放入他的购物篮。但是在没有登录的情况下打开多个标签后，用户决定登录并在登录一个标签后尝试添加所有产品，这就是错误所在。

所以我决定在提交表单之前在这个页面上放一个获取新的 AntiForgeryToken。

我创建了一个新的局部视图，其中只有 Html.AntiForgeryToekn，并在提交表单之前通过 AJAX 调用它。并将表单上的 __RequestVarificationToekn 值替换为新值。

我希望这可以为您解决问题。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-01-08T06:55:34.313

您是否使用 FormsAuthentication 登录？如果是，则登录时将在多个选项卡之间共享相同的令牌实例，因此所有具有现有 cookie 的用户都会遇到麻烦。要解决此问题，请关注此帖子以获得更多帮助

[MVC-防伪令牌](https://stackoverflow.com/questions/14421962/asp-net-mvc3-antiforgerytoken)

# android - 如何从Android中的位置获取特定半径内的照片？

> ID：14608582
> 
> 赞同：0
> 
> 时间：2013-01-30T16:14:23.767
> 
> 标签：android, google-maps, google-places-api

我有一个位置坐标。我在这个位置周围有一个半径（例如 5 公里）。如何获取谷歌地图照片（图片、照片描述/评论、坐标）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T16:25:10.197

你应该使用 google maps api（注意有一个新的 google maps v2 for android 你可以[在这里下载](https://developers.google.com/maps/documentation/android/)

至于获取具体的坐标数据，你应该考虑google places api。您可以使用[这个](http://blog.brianbuikema.com/2010/08/android-development-part-1-using-googles-places-api-to-develop-compelling-location-based-mobile-applications/)非常详细的教程，以及我认为最适合您需求的教程，将两者结合起来：[链接](http://www.androidhive.info/2012/08/android-working-with-google-places-and-maps-tutorial/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T16:24:52.843

您需要使用[Google Places API](https://developers.google.com/places/documentation/)。有对照片、评论等的查询。请注意，这是一个独立于谷歌地图的 API。

# login - Firebase 密码重置

> ID：14608584
> 
> 赞同：16
> 
> 时间：2013-01-30T16:14:41.893
> 
> 标签：login, passwords, reset, firebase

我正在尝试创建密码重置机制并且被卡住了。任何关于如何使用 Firebase 基本电子邮件/密码身份验证的建议

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-01-27T23:15:00.537

[Firebase 工程师 - 2014-01-27 更新]

Firebase 简单登录现在支持电子邮件/密码身份验证的密码重置。

每个 Simple Login 客户端库都提供了一种新方法，用于为指定的电子邮件地址生成密码重置电子邮件 -`sendPasswordResetEmail()`在 Web 和 Android 以及`sendPasswordResetForEmail()`iOS 上。

此电子邮件将包含一个临时令牌，用户可以使用该令牌登录其帐户并更新其凭据。此令牌将在 24 小时后或用户更改密码时过期，以先到者为准。

另请注意，Firebase 简单登录可启用电子邮件模板以及发送地址（包括来自您的域的付费帐户的白标电子邮件）的完整配置。

要访问此功能，您需要将客户端库更新到`v1.2.0`或更高版本。要获取最新版本，请查看[https://firebase.google.com/docs/](https://firebase.google.com/docs/)。

此外，请查看[https://firebase.google.com/docs/auth/web/password-auth](https://firebase.google.com/docs/auth/web/password-auth)以获取最新的 Firebase 简单登录 - 网络客户端文档。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-20T06:03:42.587

这是 Firebase 做得不太好的事情。您会注意到它要求用户记住他们的旧密码。通常，如果您想重设密码，那是因为您忘记了密码。希望改进他们为帐户管理提供的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T14:41:53.353

[https://www.firebase.com/docs/security/simple-login-email-password.html](https://www.firebase.com/docs/security/simple-login-email-password.html)

```
authClient.changePassword(email, oldPassword, newPassword, function(error, success) {
  if (!error) {
    console.log('Password change successfully');
  }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-16T15:23:42.923

这是试图找出我的问题时出现的第一个谷歌结果。对于任何使用 yeoman angularfire 生成器但想添加发送电子邮件功能的人来说，这应该可以工作。将以下内容添加到 simpleLogin.js 中的简单登录工厂：

```
 resetPassword: function(emailIn){
       return auth.$resetPassword({
          email: emailIn
        }, function(error) {
          if (error) {
            switch (error.code) {
              case "INVALID_USER":
                console.log("The specified user account does not exist.");
                break;
              default:
                console.log("Error resetting password:", error);
            }
          } else {
            console.log("Password reset email sent successfully!");
          }
      });
    }, 
```

并从您的 login.js 文件中调用它

```
 $scope.resetPassword = function(email){

  simpleLogin.resetPassword(email)
}; 
```

# javascript - 您更愿意在 JavaScript 中使用哪个：init() 或 main()？

> ID：14608586
> 
> 赞同：2
> 
> 时间：2013-01-30T16:14:48.057
> 
> 标签：javascript, preferences, main, init

我知道 init() 和 main() 在 JavaScript 中并不特殊，但我已经看到无数程序员在网络上使用它们。看到这一点，我想我应该在我的 JavaScript 库中添加一个函数来检查 init() 或 main() 函数，然后在主体加载后执行它们。我的问题是你宁愿输入init还是main。我认为这可能是一个愚蠢的问题，因为我很可能只是运行它来检查两者，但有一个标准会很好（如果你知道我的意思......）。提前致谢！

# c++ - Qt/C++项目中如何使用WinRing0获取CPU温度

> ID：14608597
> 
> 赞同：0
> 
> 时间：2013-01-30T16:15:20.007
> 
> 标签：c++, windows

我正在尝试使用 WinRing0 来获取 Qt/C++ 项目中的 CPU 温度，但我没有找到任何解释如何执行此操作的示例代码。有人可以向我提供示例代码吗？我下载了包含 C++ 示例代码的 WinRing0，但我没有找到如何获取 CPU 温度。

# windows-phone - 在 Windows Phone（7 或 8）中打开相机应用程序

> ID：14608602
> 
> 赞同：1
> 
> 时间：2013-01-30T16:15:37.710
> 
> 标签：windows-phone

有没有办法从我自己的应用程序以编程方式启动相机应用程序？我知道您可以使用其中一项任务来启动它，允许用户拍摄单张照片，但我希望用户能够拍摄多张照片。然后，用户只需点击后退按钮即可返回应用程序。然后我可以在拍摄日期/时间之前跟踪哪些是新的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:47:25.167

Jeffrey，您可以使用**CameraCaptureTask**类来启动相机应用程序。[更多信息在这里](http://msdn.microsoft.com/library/windowsphone/develop/microsoft.phone.tasks.cameracapturetask)

通过这个课程，您可以利用相机，拍摄多张照片或其他东西。您需要操作**Completed**事件。

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-06T16:13:28.967

[这里](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202956%28v=vs.105%29.aspx)有一篇很棒的文章，可以指导您将相机添加到您的应用程序的整个过程。它甚至允许您拍摄多张图像，重命名它们并将它们保存到手机的相机胶卷中。

然后，您可以使用 DateTime 类将照片的日期和时间添加到照片名称（以及您的应用程序的名称），从而使您可以更好地跟踪拍摄的图像。

# python - 引用列表中的项目

> ID：14608603
> 
> 赞同：0
> 
> 时间：2013-01-30T16:15:40.210
> 
> 标签：python, python-3.x

我有以下python代码：

```
import regex
original = " the  quick ' brown 1 fox! jumps-over the 'lazy' doG? !  "
s = [i for i in original.split(" ")] 
```

我想编写一个名为的函数`get_sentence`，它接受一个元素`s`并将句子作为元素所属的字符串返回。例如：

```
"brown" ->  "the  quick ' brown 1 fox!" 
```

如果第一个“the”被传递给函数，那么：

```
"the" -> the  quick ' brown 1 fox!" 
```

如果第二个：

```
"the" -> "jumps-over the 'lazy' doG?" 
```

你会将什么作为参数传递给这样的函数？在 C++ 中，我可能会传入一个 std::vector::const_iterator。在 CI 中会传入一个 int（数组索引），甚至可能是一个指针。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T16:41:12.043

```
>>> from itertools import product, chain
>>> #Assuming your original sentence is
>>> origional = " the  quick ' brown 1 fox! jumps-over the 'lazy' doG? !  "
>>> #Sentence terminators are
>>> sent_term = "[?!.;]"
>>> #I will use regex to split it into sentences
>>> re.split(sent_term, origional.strip())
["the  quick ' brown 1 fox", " jumps-over the 'lazy' doG", ' ', '']
>>> #And then split it as words
>>> #I could have used str.split, but that would include punctuations
>>> #Which you may not be interested
>>> #For each of the words, I create a mapping with the sentence using product
>>> word_map = ((product(re.split("\W",e),[e])) 
                 for e in re.split(sent_term, origional.strip()))
>>> #Chain it as a single list
>>> word_map = chain(*((product(re.split("\W",e),[e])) 
                        for e in re.split(sent_term, origional.strip())))
>>> from collections import defaultdict
>>> #Create a default dict
>>> words = defaultdict(list)
>>> #And populated all non trivial words
>>> for k, v in word_map:
    if k.strip():
        words[k]+=[v]

>>> words
defaultdict(<type 'list'>, {'brown': ["the  quick ' brown 1 fox"], 'lazy': [" jumps-over the 'lazy' doG"], 'jumps': [" jumps-over the 'lazy' doG"], 'fox': ["the  quick ' brown 1 fox"], 'doG': [" jumps-over the 'lazy' doG"], '1': ["the  quick ' brown 1 fox"], 'quick': ["the  quick ' brown 1 fox"], 'the': ["the  quick ' brown 1 fox", " jumps-over the 'lazy' doG"], 'over': [" jumps-over the 'lazy' doG"]})
>>> #Now to get the first word
>>> words['the'][0]
"the  quick ' brown 1 fox"
>>> #Now to get the second sentence
>>> words['the'][1]
" jumps-over the 'lazy' doG" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:19:16.520

我不完全确定我理解你想要做什么，但你可能只会传递一个整数索引。您不能传递对的引用，`the`因为两者完全相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T16:22:44.607

“Pythonic”的方式是构建一个字典，其中键是单词，值是句子，或者是一个包含键所属句子的列表。

```
lookup = {}
sentences = split_to_sentences(large_text)
for idx_sentence, sentence in enumerate(sentences):
    for word in split_to_words(sentence):
        if word in sentence:
            s = lookup.setdefault(word, set())
            s.add(idx_sentence) 
```

现在`lookup`你有了一本字典，其中每个单词都分配了它出现的句子索引。顺便说一句，你可以用一些非常好的列表理解来重写它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T16:51:22.467

您可以通过对句子列表的字典索引来执行此操作：

```
import re
original = " the  quick ' brown 1 fox! jumps-over the 'lazy' doG? !  "

index={}

for sentence in re.findall(r'(\b.*?[.!?])',original):
    for word in re.findall(r'\w+',sentence):
        index.setdefault(word,[]).append(sentence)

print index 
```

印刷：

```
{'brown': ["the  quick ' brown 1 fox!"], 'lazy': ["jumps-over the 'lazy' doG?"], 'jumps': ["jumps-over the 'lazy' doG?"], 'fox': ["the  quick ' brown 1 fox!"], 'doG': ["jumps-over the 'lazy' doG?"], '1': ["the  quick ' brown 1 fox!"], 'quick': ["the  quick ' brown 1 fox!"], 'the': ["the  quick ' brown 1 fox!", "jumps-over the 'lazy' doG?"], 'over': ["jumps-over the 'lazy' doG?"]} 
```

第一个“the”由 表示，`index['the'][0]`第二个由`index['the'][1]`

# asp.net - 在 ASP.NET 中显示 SQL Server 图像数据类型

> ID：14608604
> 
> 赞同：0
> 
> 时间：2013-01-30T16:15:41.553
> 
> 标签：asp.net, sql-server-2008

如何在 ASP.NET 中显示图像数据类型（来自 SQL Server）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:42:34.353

我知道这并不能直接回答您的问题，但我一直发现最好将文件的位置（路径）放在服务器上的数据库字段中（字符串数据类型，即“varchar”、“text”等...)，并使用它通过元素在网页上显示图像。

将图像存储在数据库中可能非常麻烦，这就是我不这样做的原因。

希望这可以帮助。

# javascript - 如何检查输入是否是收音机 - javascript

> ID：14608607
> 
> 赞同：2
> 
> 时间：2013-01-30T16:15:46.840
> 
> 标签：javascript

如何检查字段是否为单选按钮？

我试过`if(document.FORMNAME.FIELDNAME.type =='radio')`但 document.FORMNAME.FIELDNAME.type 返回未定义。

页面上的html是 `<input name="FIELDNAME" type="radio" value="1" > <input name="FIELDNAME" type="radio" value="0" >`

除非我把整个方法都弄错了。我的目标是获取输入字段的值，但有时该字段是单选按钮，有时是隐藏字段或文本字段。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T16:24:02.643

您的示例不起作用，因为`document.FORMNAME.FIELDNAME`实际上是一个包含 2 个元素的数组（因为您在表单上有 2 个输入具有该名称）。写作`if(document.FORMNAME.FIELDNAME[0].type =='radio')`会奏效。

编辑：请注意，如果您不知道 document.FORMNAME.FIELDNAME 是否是收音机（即您可能有一个 text/textarea/other），最好先测试 document.FORMNAME.FIELDNAME 是否是一个数组，然后如果它的第一个元素的类型是“收音机”。就像是`if((document.FORMNAME.FIELDNAME.length && document.FORMNAME.FIELDNAME[0].type =='radio') || document.FORMNAME.FIELDNAME.type =='radio')`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-01-11T14:51:50.047

如果您没有表格，则可以选择按属性。

```
var elements = document.getElementsByName('nameOfMyRadiobuttons');

elements.forEach(function (item, index) {

  if (item.getAttribute("type") == 'radio') {
      var message = "Found radiobutton with value " + item.value;

      if(item.checked) {
         message += " and it is checked!"
      }

      alert(message);
   }

}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T16:18:35.027

您的代码应该可以工作，但您可以尝试以下操作：

```
document.getElementById('idofinput').type == 'radio' 
```

编辑：由于 mihaimm 上面提到的原因，您的代码不起作用

# c# - 回发折叠字段

> ID：14608608
> 
> 赞同：0
> 
> 时间：2013-01-30T16:15:50.337
> 
> 标签：c#, asp.net

我有一个登录按钮，他有以下代码。

```
protected void prv_Click(object sender, EventArgs e)
{

    if (Page.IsPostBack)
    {
        if (!HttpContext.Current.Request.IsSecureConnection)
        {
            string postbackUrl = HttpContext.Current.Request.Url.AbsoluteUri.Replace("http", "https");
            Response.Redirect(postbackUrl);

        }
    }

    login_box.Visible = true;
} 
```

问题是，如果用户使用 http 浏览并单击触发 prv_Click 的登录链接，则该站点会将您重定向到正确的 https，但标准 div 设置为可见 false 并在服务器上运行的 login_box 永远不会设置为真。用户必须再次单击登录链接，然后将其展开。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:19:55.270

不要在按钮单击时设置可见性，在页面加载时设置它。像这样的东西应该工作：

```
login_box.Visible = HttpContext.Current.Request.IsSecureConnection; 
```

请注意，它不应位于`IsPostBack`. 这将始终确保它仅在您有安全连接时才可见。如果出于任何其他原因需要隐藏它，那么您需要相应地修改表达式。

# macros - 用于创建记录的 Clojure 宏

> ID：14608609
> 
> 赞同：0
> 
> 时间：2013-01-30T16:15:58.100
> 
> 标签：macros, clojure, record

我写了一个宏来创建记录

```
(defmacro def-entity [name & value]
 `(do
    (defrecord ~name (vector  ~@value))
    )) 
```

我创建了一个实体

```
(def-entity p a b) 
```

但是当我尝试创建一个具体实例（def something (p. "a" "b")）时，我收到这条消息 java.lang.IllegalArgumentException: No matching ctor found for class user.p (repl-1:40)。所以我必须提供3个参数，像这样（def某人（p。“a”“b”“x”））它把这样的值

```
 (-> someone :a)
 "b"
 (-> neko :p)
 nil 
```

我似乎不明白发生了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T16:51:29.750

由于`defrecord`它本身是一个宏，并且期望记录的字段作为向量字面量传入，因此您最好避免传递引用向量的符号，并真正构建一个向量字面量作为宏工作的一部分：

```
(defmacro defentity [name & values]
  `(defrecord ~name ~(vec values))) 
```

结果是：

```
user=> (macroexpand-1 '(defentity p a b))
(clojure.core/defrecord p [a b])
user=> (defentity Test foo bar)
user.Test
user=> (def s (Test. "foo" "bar"))
#'user/s
user=> s
#user.Test{:foo "foo", :bar "bar"} 
```

相反，您的版本会产生以下结果，它不使用向量文字作为输入`defrecord`：

```
user=> (macroexpand-1 '(def-entity p a b))
(do (clojure.core/defrecord p (clojure.core/vector a b))) 
```

事实上，我什至不能在 Clojure 1.4 中使用你的版本：

```
user=> (def-entity w x y)
CompilerException java.lang.RuntimeException: Can't use qualified name as parameter: clojure.core/vector, compiling:(NO_SOURCE_PATH:1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T16:19:32.727

使用`[~@value]`代替`(vector ~@value)`：

```
(defmacro def-entity [name & value]
 `(do
    (defrecord ~name [~@value])
    )) 
```

实际上，您的变体对我根本不起作用。`(def-entity p a b)`抛出异常。但我可以建议`(def-entity p a b)`扩展`(defrecord p (vector a b))`并定义一个宏，并将它的第二个参数作为字段列表。第二个参数是`(vector a b)`- 它是一个包含 3 个元素的列表。因此它创建了具有 3 个字段的记录：vector、a 和 b。检查`(:vector someone)`返回的内容。

# jquery - $.address.value("/abc/") 抛出错误

> ID：14608611
> 
> 赞同：0
> 
> 时间：2013-01-30T16:16:08.900
> 
> 标签：jquery, jquery-plugins

我有一个包含许多链接的页面，我正在`$.address.value("/abc/")`点击使用。当我第一次单击时它工作正常，但是当我第二次单击相同的链接或另一个链接时，它会引发错误：

> JavaScript 运行时错误：无法获取未定义或空引用的属性“值”

我正在使用以下代码：

```
$(function () {
    $.address.internalChange(function (event) {
        if (event.value == "" || event.value == "/") {
            $("#maincontainer").html('');
        }
        else {
            var page = event.value.split('/');
            if (page[1] == "page1") {
                $.ajax({
                    type: "GET",
                    url: "page1.aspx",
                    success: function (data) {
                        $("#maincontainer").html(data);
                    }
                });
            }
            else if (page[1] == "page2") {
            }
            else {
            }
        }
    });
})

function gotopage(pageid){
    if (pageid == 1) {
        alert(pageid);
        $.address.value("/page1/");
    }

    if (pageid == 2) {
        alert(pageid);
        $.address.value("/page2/");
    }
}

$("ul#navigation  li ul li").click(function (e) {
    gotopage($(this).attr("rel"));
    e.preventDefault();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:12:31.883

找到简单的解决方案如下：

```
 $(document).ready(function () {

        $.address.strict(false);

        $.address.change(function (event) {
            if (event.value != "") {
                $("#content").load(event.value + '.aspx');
            }

            else { alert('load home page'); }
        });
    }); 
```

//---------------------------

```
<a href="Default2.aspx" rel="address:/default2">Default2</a> 
<a href="Default3.aspx" rel="address:/default3">Default3</a> 
```

# file - 为什么 Powershell 的 Move-Item 会删除目标目录？

> ID：14608614
> 
> 赞同：0
> 
> 时间：2013-01-30T16:16:13.060
> 
> 标签：file, powershell, directory

我需要替换文件名中的方括号，并且我已成功创建（并在控制台上验证） a `-replace`. 现在我正在尝试到`Move-Item`一个新目录，因为[Powershell 2.0 中的这个错误](https://connect.microsoft.com/PowerShell/feedback/details/277707/rename-item-fails-when-renaming-a-file-and-the-filename-contains-brackets)阻止我进行简单的文件重命名。

这是我的脚本：

```
$txtPath = "c:\users\xxxxxx\desktop\cgc\tx"     #source files
$txtPath2 = "c:\users\xxxxxx\desktop\cgc\tx2"   #renamed files
Get-ChildItem $txtPath | foreach { 
    Move-Item -literalpath C:\users\xxxxxx\desktop\test001 ($_.Name -replace '\{|}','_') 
} 
```

发生了什么事：我正在使用该`$txtPath2`变量，但一直收到“无法绑定到空目录”错误，因此我明确地对路径进行了编码，以查看变量的解析方式是否有些奇怪。现在，我收到此错误：

```
Move-Item : Cannot move item because the item at 'C:\users\xxxxxx\desktop\test001' does not exist.
At C:\users\xxxxxx\desktop\cgc\rni.ps1:5 char:10
+ Move-Item <<<<  -literalpath C:\users\xxxxxx\desktop\test001 ($_.Name -replace '\{|}','_')
    + CategoryInfo          : InvalidOperation: (:) [Move-Item], PSInvalidOperationException
    + FullyQualifiedErrorId : InvalidOperation,Microsoft.PowerShell.Commands.MoveItemCommand 
```

奇怪的是：我创建了新目录。我运行脚本，当脚本失败时，看着它从我的桌面消失。怎么回事？我已退出并重新启动控制台应用程序以刷新所有变量。我已经尝试了不同风格的变量和常量`Move-Item`。除非`Move-Item`我缺少一个参数，否则我真的不知道发生了什么。有没有其他人看到任何会导致我的文件被删除的东西？

编辑：编辑后

```
Get-ChildItem $txtPath | % { [system.io.file]::Move($_.fullname, ($i.FullName -replace '\[|\]', '') ) } 
```

我收到一个新错误：

```
Exception calling "Move" with "2" argument(s): "Empty file name is not legal.
Parameter name: destFileName"
At C:\users\x46332\desktop\cgc\rni.ps1:6 char:52
+ Get-ChildItem $txtPath | % { [system.io.file]::Move <<<< ($_.fullname, ($i.FullName -replace '\[|\]', '') ) }
    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException
    + FullyQualifiedErrorId : DotNetMethodException 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T16:45:53.450

您将修改后的版本设置`$_.Name`为目标（第二个参数）。“名称”只是一个项目的文件名，所以我猜您的`test001`文件/文件夹已移动到您运行脚本的位置并重命名为`$_.Name`（它使用名称作为相对路径）。因此，如果您从`c:\windows\system32`（PS 以管理员身份运行时的默认文件夹）运行此脚本，则将其移动到那里。

下一次在您的`foreach`-loop 中，`test001`已经移动并返回错误。`-LiteralPath`是源位置，而不是目的地。

尝试：

```
Get-ChildItem $txtPath | % { [system.io.file]::Move($_.fullname, ($_.FullName -replace '\[|\]', '') ) } 
```

# java - 另一个应用程序中的 Java SWT - 如何制作 Shell 模式

> ID：14608622
> 
> 赞同：0
> 
> 时间：2013-01-30T16:16:49.260
> 
> 标签：java, swt

我正在使用商业 CAD/CAM 系统（NX，正式为 Unigraphics）。这有一个我可以开发的 API（使用 Java）。它允许我创建一个 JAR 并从普通的 NX UI 内部执行它。现在我想使用 SWT 创建一个对话框供用户交互。我可以创建一个 Shell 并将其传递给默认的 Display，然后窗口就会完美弹出。我到目前为止的代码如下：

```
import org.eclipse.swt.SWT;
import org.eclipse.swt.events.SelectionEvent;
import org.eclipse.swt.events.SelectionListener;
import org.eclipse.swt.layout.RowLayout;
import org.eclipse.swt.widgets.Button;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;

...
...

Display display = new Display();
Shell shell = new Shell(display);
shell.setLayout(new RowLayout());

final Label label = new Label(shell, SWT.NONE);
label.setText("Hello, World!");

Button button = new Button(shell, SWT.PUSH);
button.setText("Create lines");
button.addSelectionListener(new SelectionListener() {
    @Override
    public void widgetDefaultSelected(SelectionEvent arg0) {
        createLines();
    }

    @Override
    public void widgetSelected(SelectionEvent event) {
        createLines();
    }
});

shell.pack();
label.pack();
button.pack();
shell.open();
while (!shell.isDisposed())
    if (!display.readAndDispatch())
        display.sleep();
display.dispose();
label.dispose();
button.dispose(); 
```

出现的 SWT 窗口似乎不是 NX 窗口的父窗口，因此如果用户在 NX 窗口中单击，SWT 窗口就会消失在其后面。

我*认为*我需要做的是获取 NX 窗口的显示（或者可能是外壳？）并将其传递给我的外壳，但我似乎无法找到如何做到这一点。我一直在谷歌上搜索直到头疼，但是所有的“re-parenting”、“set shell”、“make modal”搜索都在谈论现有父 SWT Shell 中的子 Shell。如果这可能的话，有人有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-15T23:56:13.643

当你创建你的窗口时，有一个 Shell 样式可以让你的窗口总是在顶部：

外壳 sShell = new Shell(Display.getCurent(),SWT.ON_TOP);

# jquery - 如何从列表中选择一个元素并添加到前面？

> ID：14608629
> 
> 赞同：0
> 
> 时间：2013-01-30T16:17:13.953
> 
> 标签：jquery

我希望将鼠标悬停在一个列表项上并 preperndTo 目标 DIV。

但它们都将其添加到目标 DIV 中。

```
 $('ul li a').each(function () {
        $(this).mouseover(function () {
            $('ul li ul').prependTo('#destination');
        });
}); 
```

你如何一次指定一个项目？

[http://jsfiddle.net/zidski/zpdAy/1/](http://jsfiddle.net/zidski/zpdAy/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:21:20.117

我更新了你的小提琴。[在此处查看更新的小提琴](http://jsfiddle.net/zpdAy/3/)。

基本上，我只是改变了`each`这一行：

```
$('ul li a').each(function () { 
```

改为使用`one`：

```
$('ul li a').one(function () { 
```

不确定这是否是你所追求的行为......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:21:45.097

这应该可以解决您的问题。没有必要`each()`顺便使用：

```
$('ul li a').mouseover(function () {
    $(this).nextSibling().prependTo('#destination');
}); 
```

[请参阅 jsFiddle](http://jsfiddle.net/zpdAy/6/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T16:22:03.863

[工作小提琴](http://jsfiddle.net/zpdAy/7/)

```
$("ul li a").mouseover(function () {
    $(this).next().prependTo('#destination'); // or sibling('ul')
}); 
```

# java - 主报告未填写，但子报告已填写

> ID：14608634
> 
> 赞同：1
> 
> 时间：2013-01-30T16:17:30.460
> 
> 标签：java, jasper-reports

在 java 中生成 jasper 报告时我遇到了一些问题。该设置在 iReport IDE 中完美运行。我创建报告的方式如下：

```
private void createReport(String dataSourceXml) throws JRException{

        String outFilename = dataSourceXml.replace(".xml", ".pdf");
        String main = res.getString("main_jrxml.dir");
        String sub1 = res.getString("sub1_jrxml.dir");
        String sub2 = res.getString("sub2_jrxml.dir");
        String sub3 = res.getString("sub3_jrxml.dir");

        JasperReport sub3Report = JasperCompileManager.compileReport(sub3);
        JasperReport sub2Report = JasperCompileManager.compileReport(sub2);
        JasperReport sub1Report = JasperCompileManager.compileReport(sub1);
        JasperReport mainReport = JasperCompileManager.compileReport(main);

        JRXmlDataSource xmlDatasource = new JRXmlDataSource(new File(dataSourceXml));

        Map<String, Object> params = new HashMap<String, Object>();

        params.put("sub1", sub1);
        params.put("sub2", sub2);
        params.put("sub3", sub3);

        JasperPrint jasperPrint = JasperFillManager.fillReport(mainReport, params, xmlDatasource);
        JasperExportManager.exportReportToPdfFile(jasperPrint, outFilename);
    } 
```

报告已创建，所有子报告都已填写，但主报告未填写。

任何人都可以建议可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:22:37.393

我无法弄清楚为什么主报告中的字段没有被填写。我通过简单地添加另一个子报表来解决它，这对我来说很好。

可惜 Jasper 的文档太可怕了。

# c# - 在 C# 中将内部类型转换为通用名称/值对

> ID：14608635
> 
> 赞同：0
> 
> 时间：2013-01-30T16:17:31.313
> 
> 标签：c#, generics

我需要将内部类型转换为通用名称/值对列表。这样我们就可以以通用/标准的方式发送大量信息，而不必担心添加新字段时会更改架构等。我的问题是如何填充通用结构。

例如一组内部字段：

```
[Serializable]
public class Location
{
    public string sAddress { get; set; }
    public string sCity { get; set; }
    public int iZipCode { get; set; }
} 
```

需要转化为：

```
<AttributeList>
  <Attribute>
    <Name>sAddress</Name>
    <Value>123 ABC Street</Value>
    <DataType>string</DataType>
  </Attribute>
</AttributeList> 
```

重复 sCity 和 iZipCode。

只是我不确定执行此操作的最佳方法，因为某些字段（例如 iZipCode）可能未实例化。

我能想到的唯一方法是让代码在内部数据结构中查找每个特定字段，确保它不为空，然后从包含实际内部字段名称的枚举对象（或其他东西）映射 Attribute.Name （如 sAddress），然后是值，然后设置类型，因为我知道我正在寻找的字段是什么类型。

如果只有 3 个字段就可以了，但是会远不止这些，而且这似乎是一个不好的方法，好像添加了一个新字段我需要更新代码 - 更不用说很多代码基本上做同样的事情。

理想情况下，我想要一些可以通用地循环遍历内部结构中的所有内容的东西，例如位置，并自动检查字段是否存在，如果没有每个字段的特定代码，则提取字段名称、值和类型。

我不知道这是否可能，任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:26:07.350

你可以通过反射来做到这一点。这是一个例子：

```
PropertyInfo[] properties
properties = typeof(Location).GetProperties(BindingFlags.Public);
StringBuilder sb = new StringBuilder()
foreach (PropertyInfo p in properties)
{
    sb.Append(p.Name)
    sb.Append(p.PropertyType)
    sb.Append(p.GetValue(null,null))
} 
```

显然更改格式以使其适合您。

您需要使用 System.Reflection 命名空间。

编辑：我刚刚看到您的编辑，并且您希望输出为 XML。[XML 序列化](http://msdn.microsoft.com/en-us/library/182eeyhh%28v=vs.71%29.aspx)可能也值得一看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T16:36:35.537

这会将您的示例吐出到 XML 中。如果要支持索引属性，则需要做一些额外的工作：

```
Location loc = new Location { sAddress = "123 ABC Street",
                              sCity = "Fake City",
                              iZipCode = 12345 };

XDocument doc = new XDocument();
XElement attrList = new XElement("AttributeList");
doc.Add(attrList);

foreach (PropertyInfo propInfo in loc.GetType().GetProperties())
{
    XElement attrRoot = new XElement("Attribute", new XElement("Name") { Value = propInfo.Name });
    object propValue = propInfo.GetValue(loc, null);
    attrRoot.Add(new XElement("Value") { Value = propValue == null ? "null" : propValue.ToString() });
    attrRoot.Add(new XElement("DataType") { Value = propInfo.PropertyType.ToString() });
    attrList.Add(attrRoot);
} 
```

# sql - 使用VBA access 2010在sql中搜索必填字段

> ID：14608636
> 
> 赞同：0
> 
> 时间：2013-01-30T16:17:35.247
> 
> 标签：sql, vba

我有一个带有“大于”、“小于”和“等于”值的组合框，我在“1200”之类的文本框中输入了一些值，然后我希望从组合框中选择“大于”然后我应该从数据库中得到的结果将大于 1200。

我尝试使用 LIKE "%" 进行搜索，但失败了。

请告诉我如何使用 SQL 搜索用 vba 编写的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:33:29.563

看来您想在动态 SQL 查询中设置相等性，对吧？

然后，为此，请记住以下几点：
a) 在组合框中，条件必须与包含该等式的字符串变量中的等式一起设置。这意味着，当 cboSomeCondition 更改时，它还必须设置一个 strVarEquality 与您想要的相等性。如果有人在 cboSomeCondition 中选择“大于”，则必须将变量 strVarEquality 设置为“>”。其余条件相同——“小于”->“<”和“等于”->“=”

b) 在设置 SQL 字符串的变量中（我不确定您使用的是什么类型的连接，但我假设这里是一个设置了 ConnectionString 的 ADO），并考虑将 txtValueTobeEvaluated 作为具有要比较的值的字段针对数据库中的值，您只需这样写：

*(someAdoDBConnection).(someSQL)="SELECT field_a,field_b,field_c FROM table_x WHERE field_a " & strVarEquality & " " & txtValuetoBeEvaluated*

我希望这有帮助。

# tomcat - Tomcat 中的 ESAPI 属性文件

> ID：14608638
> 
> 赞同：0
> 
> 时间：2013-01-30T16:17:37.897
> 
> 标签：tomcat, esapi

我在 Tomcat 战争应用程序中使用 ESAPI 加密。我想从战争之外的目录加载 ESAPI.properties 文件，以便为每个环境提供不同的密钥和盐。我也希望每场战争都有一个不同的 ESAPI.properties 文件，这样每个应用程序都将进行个性化配置。根据 org.owasp.esapi.reference.DefaultSecurityConfiguration 的文档，实现这一目标的方法很少。

1) SecurityConfiguration.setResourceDirectory("C:\temp\resources")。

2) System.getProperty("org.owasp.esapi.resources")

3) System.getProperty("user.home") + "/.esapi" 目录里面

4) 类路径上的第一个“.esapi”或“esapi”目录。

前 3 个选项将强制每个 tomcat 配置一个配置。这意味着属性文件位置在所有部署的战争中都被强制执行。（第一个选项使用 ClassLoader.getSystemResource - 要求路径是类路径的一部分）

有没有办法使用Tomcat配置来完成它？

我还找到了一种覆盖 ESAPI 默认安全配置的方法，我可以在其中扩展 DefaultSecurityConfiguration 并覆盖 getResourceFile，但是 ESAPI javadoc 说这种方法应该“从不”使用——我不确定这是什么原因。

```
 package org.owasp.esapi;
 public final class ESAPI{   
 /**
 * Overrides the current security configuration with a new implementation. This is meant
 * to be used as a temporary means to alter the behavior of the ESAPI and should *NEVER*
 * be used in a production environment as it will affect the behavior and configuration of
 * the ESAPI *GLOBALLY*.
 *
 * To clear an overridden Configuration, simple call this method with null for the config
 * parameter.
 *
 * @param config
 * @return
 */
public static void override( SecurityConfiguration config ) {
    overrideConfig = config;
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-30T19:33:26.247

如果你想要一个特定实例的 tomcat 配置，首先想到的是使用 tomcat 的`setenv.sh`脚本进行设置。就像是

```
export JAVA_OPTS='$JAVA_OPTS -Dorg.owasp.esapi.resources="/path/resources"' 
```

# ios - 如何处理（MyApp正在保存的文档）文件？

> ID：14608639
> 
> 赞同：6
> 
> 时间：2013-01-30T16:17:46.383
> 
> 标签：ios, document, icloud, save, icloud-api

我的应用程序使用 iCloud。我的应用程序将其所有数据存储在 1 个文档中，并且永远不应超过 1 个文档。但是，有时我的 NSMetadataQuery 会返回 2 个文档：

0: Documents/(A Document being saved bt MyApp)/MyDoc.ext
1: Documents/MyDoc.ext

这主要发生在用户在 iOS 设备重启后不久打开应用程序时。

在检查这 2 个文档时，文档 0 是具有最新更新的文档，所以这就是我们想要的。

这个“正在保存的文档”最终出现并成为最新文档的原因是什么，我该如何正确处理，因此 Documents/MyDoc.ext 将是具有最新内容的文档。

谢谢，-r

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-10T11:54:11.637

我认为 Stuart 的评论提供了您将得到的大部分答案。仅文档被称为“（保存的文档）”而不是“（保存的文档）这一事实就强烈表明他是对的。
我想现在由您来弄清楚为什么保存文档会崩溃或永远不会完成或被终止或其他任何情况。如果您的应用程序在进入后台时保存文档的时间过长、崩溃或其他原因，则可能是超时 - 我认为您没有为任何人提供足够的信息来给您非常准确的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-10T16:26:37.123

Documents中名为“A Document Being Saved by AppName”的文件夹是一个临时文件夹，用于存储二进制大对象（BLOB）。

通常，如果您的应用程序保存成功，则应清空该文件夹。但是，如果它在保存过程中崩溃，该文件夹将存储一些数据以供您处理。基本上，我总是在启动时删除目录。因此，如果 BLOB 没有移动到隐藏的 BLOB 目录中，它将不在数据库中。

希望有帮助。

# mongodb - MongoDB $query 运算符忽略索引？

> ID：14608642
> 
> 赞同：7
> 
> 时间：2013-01-30T16:17:58.570
> 
> 标签：mongodb

我创建了一个测试 MongoDB 集合“sampleCollection”，其文档如下所示：

```
 "_id" : ObjectId("510929e041cb2179b41ace1c"),
 "stringField" : "Random string0",
 "longField" : NumberLong(886) 
```

并在字段“stringField”上有索引。当我执行

```
db.sampleCollection.find({"stringField":"Random string0"}).explain() 
```

一切都好：

```
 "cursor" : "BtreeCursor stringField_1",
 "isMultiKey" : false,
 "n" : 2,
 "nscannedObjects" : 2,
 "nscanned" : 2,
 "nscannedObjectsAllPlans" : 2,
 "nscannedAllPlans" : 2,
 "scanAndOrder" : false,
 "indexOnly" : false,
 "nYields" : 0,
 "nChunkSkips" : 0,
 "millis" : 0,
 "indexBounds" : {
         "stringField" : [
                 [
                         "Random string0",
                         "Random string0"
                 ]
         ]
 } 
```

但

```
db.sampleCollection.find({$query:{"stringField":"Random string0"}}).explain() 
```

得到我

```
"cursor" : "BasicCursor",
"isMultiKey" : false,
"n" : 0,
"nscannedObjects" : 4,
"nscanned" : 4,
"nscannedObjectsAllPlans" : 4,
"nscannedAllPlans" : 4,
"scanAndOrder" : false,
"indexOnly" : false,
"nYields" : 0,
"nChunkSkips" : 0,
"millis" : 0,
"indexBounds" : {

} 
```

这看起来不是问题，但我在生产中使用**org.springframework.data.mongodb**框架，并且使用查询构造是编写存储库的唯一方法。因此我有一个完全忽略索引数据的数据库。

这是正确的吗？还是我误解了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T20:49:42.483

这很有趣，我无法决定说这是不是一个错误，这取决于你：

有两种可用的语法：[http ://docs.mongodb.org/manual/reference/operator/query/](http://docs.mongodb.org/manual/reference/operator/query/)

当您使用：

```
db.collection.find( { age : 25 } ) 
```

也会

```
db.collection.find( { age : 25 } ).explain()
db.collection.find( { age : 25 } ).hint(someindex) 
```

工作正常。

当您使用您的解决方案（其他语法）时：

```
db.collection.find( { $query: { age : 25 } } ) 
```

的输出

```
db.sampleCollection.find({$query:{"stringField":"Random string0"}}).explain() 
```

将显示为不使用索引的查询

如果您还使用 .hint 作为索引，它将省略结果。:) （那是我不太明白）

幸运的是，这些操作还有另一种语法：您可以使用：

```
db.sampleCollection.find({$query:{"stringField":"Random string0"}, $explain:1}) 
```

它将具有正确的输出并向我显示索引的使用情况。$hint 也有类似的语法。

您可以在此处查看文档：http: [//docs.mongodb.org/manual/reference/meta-query-operators/](http://docs.mongodb.org/manual/reference/meta-query-operators/)

我发现这真的很有趣，所以我打开了分析器：

我制作了一个测试集合（queryTst），其中包含大约 250k 文档，每个文档只有 _id 和结构中的年龄字段以及年龄索引。

对于此查询：

```
db.queryTst.find({$query:{"age":16},$explain:1}) 
```

我有：

```
{
    "cursor" : "BtreeCursor age_1",
    "isMultiKey" : false,
    "n" : 2,
    "nscannedObjects" : 2,
    "nscanned" : 2,
    "nscannedObjectsAllPlans" : 2,
    "nscannedAllPlans" : 2,
    "scanAndOrder" : false,
    "indexOnly" : false,
    "nYields" : 0,
    "nChunkSkips" : 0,
    "millis" : 0,
    "indexBounds" : {
        "age" : [
            [
                16,
                16
            ]
        ]
    },
    "allPlans" : [
        {
            "cursor" : "BtreeCursor age_1",
            "n" : 2,
            "nscannedObjects" : 2,
            "nscanned" : 2,
            "indexBounds" : {
                "age" : [
                    [
                        16,
                        16
                    ]
                ]
            }
        }
    ],
    "oldPlan" : {
        "cursor" : "BtreeCursor age_1",
        "indexBounds" : {
            "age" : [
                [
                    16,
                    16
                ]
            ]
        }
    },
    "server" : ""
} 
```

为了这：

```
 db.queryTst.find({$query:{"age":16},$explain:1}).explain() 
```

我有：

```
"cursor" : "BasicCursor",
    "isMultiKey" : false,
    "n" : 0,
    "nscannedObjects" : 250011,
    "nscanned" : 250011,
    "nscannedObjectsAllPlans" : 250011,
    "nscannedAllPlans" : 250011,
    "scanAndOrder" : false,
    "indexOnly" : false,
    "nYields" : 0,
    "nChunkSkips" : 0,
    "millis" : 103,
    "indexBounds" : {

    }, 
```

在探查器日志中：对于第一个

```
{
    "ts" : ISODate("2013-01-30T20:35:40.526Z"),
    "op" : "query",
    "ns" : "test.queryTst",
    "query" : {
        "$query" : {
            "age" : 16
        },
        "$explain" : 1
    },
    "ntoreturn" : 0,
    "ntoskip" : 0,
    "nscanned" : 2,
    "keyUpdates" : 0,
    "numYield" : 0,
    "lockStats" : {
        "timeLockedMicros" : {
            "r" : NumberLong(368),
            "w" : NumberLong(0)
        },
        "timeAcquiringMicros" : {
            "r" : NumberLong(8),
            "w" : NumberLong(5)
        }
    },
    "nreturned" : 1,
    "responseLength" : 567,
    "millis" : 0,
    "client" : "127.0.0.1",
    "user" : ""
} 
```

第二个：

```
{
    "ts" : ISODate("2013-01-30T20:35:47.715Z"),
    "op" : "query",
    "ns" : "test.queryTst",
    "query" : {
        "query" : {
            "$query" : {
                "age" : 16
            },
            "$explain" : 1
        },
        "$explain" : true
    },
    "ntoreturn" : 0,
    "ntoskip" : 0,
    "nscanned" : 250011,
    "keyUpdates" : 0,
    "numYield" : 0,
    "lockStats" : {
        "timeLockedMicros" : {
            "r" : NumberLong(104092),
            "w" : NumberLong(0)
        },
        "timeAcquiringMicros" : {
            "r" : NumberLong(13),
            "w" : NumberLong(5)
        }
    },
    "nreturned" : 1,
    "responseLength" : 373,
    "millis" : 104,
    "client" : "127.0.0.1",
    "user" : ""
} 
```

这对我来说意味着解释（）导致混合语法中的表扫描。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-02T00:20:21.643

这不是错误，我碰巧遇到了与您相同的问题，并且正准备将其报告为 mongodb 中的问题，但阅读文档它指定您不应将游标方法（如 explain() ）与这种查询格式，您应该使用 $explain，如本页提供的示例中所示：

[http://docs.mongodb.org/manual/reference/operator/query/](http://docs.mongodb.org/manual/reference/operator/query/)

# url-rewriting - URL 改写问题

> ID：14608649
> 
> 赞同：1
> 
> 时间：2013-01-30T16:18:26.257
> 
> 标签：url-rewriting, cpanel

我将第一次重写可能网页的URL。在此之前，我想知道是否可以在不请求我的网站管理员的情况下重写 URL，或者我必须向我的网站管理员寻求任何有关此方面的帮助。其实我不想要求。

我有 cpanel v 11 访问权限。我可以从 cpanel 进行 url 重写吗？cpanel 中的哪个应用程序可以帮助我重写 URL？

# php - 无法配置 Apache 来解析 PHP 文件

> ID：14608654
> 
> 赞同：-1
> 
> 时间：2013-01-30T16:18:38.877
> 
> 标签：php, apache, lampp

我已经在linux中安装了xampp。然后我更新了 php.ini 文件，比如删除了 ; 在一些图书馆之前。

如果我键入 localhost/test.php 则该 php 文件正在下载而不是执行。

[https://stackoverflow.com/questions/12893714/installed-xampp-on-linux-but-it-now-just-downloads-php-files-instead-of-displa](https://stackoverflow.com/questions/12893714/installed-xampp-on-linux-but-it-now-just-downloads-php-files-instead-of-displa)

与上述网址相关的问题是相同的。我已经尝试了上述问题的解决方案。但没有得到解决。

任何机构都可以帮助我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:42:08.813

首先确保你已经安装了 libapache2-mod-php5，如果你使用的是 ubuntu，打开一个终端并转到 /etc/apache2/mod-available 并找到 php5.conf 和 php5.load 如果你没有这个模块你不能加载php文件。您可以查看此页面[https://help.ubuntu.com/12.10/serverguide/php5.html](https://help.ubuntu.com/12.10/serverguide/php5.html)

# ruby-on-rails-3 - 用 Mongoid 打乱数组的顺序

> ID：14608657
> 
> 赞同：1
> 
> 时间：2013-01-30T16:18:51.723
> 
> 标签：ruby-on-rails-3, mongodb, mongoid

我正在使用 Mongoid 的 recursively_embeds_many 创建嵌套数据树（Rails 3.2.8、Mongo 2.2、Mongoid 3.0.14 和 Ryan Bates 的 nested_form gem 0.3.1）。到目前为止一切都顺利进行，但我遇到了一个障碍，我似乎无法摆脱它，特别是如何重新排序生成的数组成员。我有一些 JS 可以帮助我在前端操作表单，但我无法弄清楚在后端表示的新订单。这是我的主要模型：

```
class Navigator
  include Mongoid::Document
  include Mongoid::Timestamps

  embeds_many :menu_items
  accepts_nested_attributes_for :menu_items, :allow_destroy => true, :autosave => true

  field :name
  field :type
  field :position
  field :behavior
end 
```

这是 MenuItems 模型：

```
class MenuItem
  include Mongoid::Document
  include Mongoid::Timestamps
  recursively_embeds_many

  accepts_nested_attributes_for :child_menu_items, :allow_destroy => true, :autosave => true

  field :name
  field :url
end 
```

观察服务器，我可以看到当前发生的情况是，在更新期间，通过该`$push_all`方法添加新项目，并通过匹配嵌套数组方法的 $ 位置运算符更新其他项目（这看起来是[Mongoid](https://github.com/mongoid/mongoid/issues/2545)对[JIRA SERVER的实现-851 解决方法](http://jira.mongodb.org/browse/SERVER-831)）。因此，每个 menu_item 的位置始终根据其输入位置而固定。我知道我可以添加任意数量的排序属性和策略，但这在 Mongo 中似乎没有必要，因为可以让数组的顺序代表用户强加给它的顺序。

我知道 Mongo 有上述限制，但每次更新数组时覆盖它似乎也是合理的，换句话说，使用 Mongo 的`$set`运算符替换该数组的现有内容。但是，我不知道如何用 Mongoid 做到这一点。我希望它可以像切换我的控制器一样简单

```
@tree.update_attributes(params[:tree]) 
```

至

```
@tree.set(params[:tree]) 
```

这会导致查询格式正确，但完全转义。然后我想也许我可以`$unset`先输入该字段，然后删除表单中隐藏的 id 字段，但这也失败了。

在我看来，这是 Mongo 的规范用例，但 Mongoid 也阻止我以 Mongo-y 方式更新文档。我也知道 Mongoid 能够使用`$set`运算符，因为它习惯于覆盖`updated_at`由于使用时间戳而添加的属性。如果我可以将 Mongoid 配置为简单地使用`$set`操作符进行更新，而不是使用 $ 位置操作符解决方法，我会被设置。我是在考虑错误的方式还是遗漏了什么？我的下一步是尝试直接逃到 Mongo 驱动程序中。

谢谢，卡尔

**更新：**

```
@tree.update_attribute(:tree, params[:tree]) 
```

创建正确的轻便摩托车输出，但数据没有得到更新。即使我更改了与修改数组无关的内容。

**更新：**

虽然我无法找到 Mongoid 解决方案，但我能够找到一个 jQuery 解决方案：在使用 jQuery UI 排序之后，我已经在使用它来重命名数组键，所以我添加了一些东西以备不时之需。我制作了所有项目的副本，将现有项目设置为删除，然后添加副本，就好像它们是新的一样。提交表单后，首先删除所有旧的，然后按照页面上的顺序将所有副本添加为新的。这不是一个理想的解决方案，但它运行良好，而且我对所有技术的精神感觉良好 - 表单仍在一次处理中，我不需要在任何模型上添加外部排序属性。如果关闭了 JS 它将无法工作，但拖放排序也不会。

# android - Android WifiLock 不工作？

> ID：14608658
> 
> 赞同：0
> 
> 时间：2013-01-30T16:18:59.927
> 
> 标签：android, wakelock

我需要每隔 x 分钟通过 WiFi 和 HTTP 从本地网络上的服务器提取数据。服务在后台运行，我使用 AlarmManager 来触发查询。Wifi 睡眠策略在设备上设置为“从不”。

问题是，当屏幕关闭时设备进入睡眠状态并且wifi锁似乎没有正确重新连接wifi，因此查询失败。

知道这里有什么问题吗？

执行

```
 {...}

    wakeLockUtil.lock();

    //wait for wifi to connect (no idea if this is useful)
    Thread.sleep(3000);

    doQuery();

    wakeLockUtil.unlock();

   {...} 
```

唤醒锁

```
public WakeLockUtil(Context context) {

    wifiLock = ((WifiManager) context.getSystemService(Context.WIFI_SERVICE)).createWifiLock(WifiManager.WIFI_MODE_FULL,
            "PeriodUpdateWifiLock");
    wakeLock = ((PowerManager) context.getSystemService(Context.POWER_SERVICE)).newWakeLock(PowerManager.PARTIAL_WAKE_LOCK,
            "PeriodUpdateWakeLock");

}

public void lock() {
    System.out.println("WakeLockUtil.lock()");
    try {
        wakeLock.acquire();
        wifiLock.acquire();
    } catch (Exception e) {
        Log.e(this.getClass().getSimpleName(), "Error getting Lock: " + e.getMessage());
    }

}

public void unlock() {
    System.out.println("WakeLockUtil.unlock()");
    if (wakeLock.isHeld())
        wakeLock.release();
    if (wifiLock.isHeld())
        wifiLock.release();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T09:34:18.597

我在某些设备上看到了一些问题，其中 PARTIAL_WAKE_LOCK 和 WifiLock:WIFI_MODE_FULL_HIGH_PERF 的组合在屏幕关闭时无法完全工作。很烦人。到目前为止，对我来说唯一的解决方案是使用[SCREEN_DIM_WAKE_LOCK](http://developer.android.com/reference/android/os/PowerManager.html#SCREEN_DIM_WAKE_LOCK)。

# java - 如何解析数据/字节数组？

> ID：14608660
> 
> 赞同：0
> 
> 时间：2013-01-30T16:19:06.960
> 
> 标签：java, android, parsing

我正在使用终端仿真器库来创建终端，然后使用它将通过串行输入的数据发送到串行设备。并不是说我有这样的工作，我想在屏幕上创建一些其他图形界面，也许只是一个文本框，它在终端中显示用户结果的简要版本以及终端中的完整版本。他们只需看一眼就可以更快地查看结果。我想知道如何最好地解析它。当我发送一个命令时，一个字节数组被发回给我，其中包含这样的数据作为一组结果的示例：

```
Interface           IP-Address       Status                Protocol        
vlan1               192.168.1.1      up                    up  
Fa0/1i              unassigned       administratively down down
Fa0/1o              unassigned       down                  down
Fa1/0               unassigned       down                  down
Fa1/1               unassigned       down                  down
Fa1/2               unassigned       down                  down
Fa1/3               unassigned       down                  down
Fa1/4               unassigned       down                  down
Fa1/5               unassigned       down                  down
Fa1/6               unassigned       down                  down
Fa1/7               unassigned       down                  down
Fa1/8               unassigned       up                    up  
Fa1/9               unassigned       down                  down
Fa1/10              unassigned       up                    up  
Fa1/11              unassigned       down                  down
Gi0                 unassigned       up                    up  
switch# 
```

我将如何解析这个？我想要类似“接口 vlan1 的 IP 为 192.1.1.168”或“接口 Fa1/8 的 IP 地址未分配”之类的内容。为用户显示，只列出最相关的数据。我会说类似的话：

```
 if (dataReceived.charAt(i) == 'v'
    && dataReceived.charAt(i + 1) == 'l'
    && dataReceived.charAt(i + 2) == 'a'
    && dataReceived.charAt(i + 3) == 'n')
    && dataReceived.charAt(i + 4) == '1')
    && etc //check i is in bounds, check is the next non-whitespace character a number or a u somehow and so on 
        {
         //do things here
         //print out "The interface vlan1 is up with an IP of 192.1.1.168"
        } 
```

这种方式看起来很乏味，检查每个字节，查看下一个字节是什么等等。然而，这是最好的/正确的方法吗？

**编辑：**这是我目前拥有的一个样本，我在哪里接收数据，以及我在哪里测试某些数据：

```
public void onDataReceived(int id, byte[] data) {

            dataReceived = new String(data);

        try {
            dataReceivedByte = dataReceived.getBytes("ASCII");
        } catch (UnsupportedEncodingException e) {
            Log.d(TAG, "exception");
            e.printStackTrace();
        }
        statusBool = true;
        Log.d(TAG, "in data received " + dataReceived);
        ((MyBAIsWrapper) bis).renew(data);

        runOnUiThread(new Runnable(){

            @Override
            public void run() {

            }});
        viewHandler.post(updateView);
    }

Handler viewHandler = new Handler();
    Runnable updateView = new Runnable() {
        @Override

        public void run() {

            mEmulatorView.invalidate();

            if (statusBool == true) {
                for (int i = 1; i < dataReceived.length() - 1; i++) {

                    if (dataReceived.charAt(i) == '>') {

                        Log.d(TAG, "found >");
                        deviceStatus = 0;
                    }
                    if (dataReceived.charAt(i) == '#'
                            && dataReceived.charAt(i - 1) != ')') {

                        Log.d(TAG, "found #");
                        deviceStatus = 1;
                    }
                    if ((i + 1) <= (dataReceived.length())
                            && dataReceived.charAt(i) == ')'
                            && dataReceived.charAt(i + 1) == '#') {

                        Log.d(TAG, "found config )#");
                        deviceStatus = 2;
                    }

                }
                statusBool = false;
                viewHandler.postDelayed(updateView, 1000);

            }
        }
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:23:48.287

当您使用[`charAt()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#charAt%28int%29)时，我想那`dataReceived`是一个`String`. 如果没有，将数据转换为字符串可能会很方便，因为您可以使用方便的`String`方法。您可以使用构造函数将字节数组转换为字符串[`String(byte[])`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#String%28byte%5b%5d%29)。

因此，您还可以使用该[`contains()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#contains%28java.lang.CharSequence%29)方法检查字符串是否包含特定的子字符串：

```
if(dataReceived.contains("vlan1")) {
  // do things here
} 
```

或者，如果您对可以使用的子字符串的位置感兴趣[`indexOf()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#indexOf%28java.lang.String%29)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T16:38:26.457

这将很容易正确解析，但它在一个地方从结构良好的表格降级为自由文本。下面的代码使用补丁替换；这不是很干净的解决方案。如果像 \t 这样的分隔符只存在于列之间，而不存在于列中的单词之间，那么使用它会好得多。解析固定宽度的部分是可能的，但也是一团糟。

假设输入是一个字符串 x：

```
class Record {
  String mItf, mIp, mStatus, mProt;
}

ArrayList<Record> records = new ArrayList<Record>();

StringTokenizer st = new StringTokenizer(x,"\r\n"); 
  // Line by line but do not split at spaces.

st.nextToken(); // Discard the header line.

while (st.hasMoreTokens()) {
   String line = st.nextToken();

   // Group in a single word problematic two word cases (may be multiple):
   line = line.replace("administratively down","administratively_down");

   StringTokenizer sr = new StringTokenizer(line);
   if (sr.countTokens() >= 4) {
     Record r = new Record();
     r.mItf = sr.nextToken();
     r.mIp = sr.nexttoken();
     r.mStatus = sr.nextToken();
     r.mProt = sr.nextToken();
     records.add(r);
   }
} 
```

之后，你可以做你喜欢的概括。

# google-api - 用于过滤列的 Google 电子表格功能

> ID：14608662
> 
> 赞同：3
> 
> 时间：2013-01-30T16:19:14.247
> 
> 标签：google-api, google-sheets, google-spreadsheet-api

我有一个谷歌电子表格。在 Sheet2 中我有一些数据，在 Sheet3 中我想过滤 Sheet2 中的数据。具体来说，我希望在 Sheet3 中只收集 Sheet2 中包含特定变量的那些列。

见上图，这是Sheet2

![表格1](../Images/22b1c75e22677c359cc0d961fdb60af3.png)

我希望在 Sheet3 中仅包含第 6 行中包含关键字“Gaetano”的列。因此，结果表将仅包含 Sheet2 的 B 列和 C 列。

我阅读了很多关于 FILTER 功能的内容，但我仍然无法解决我的问题。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T05:56:37.867

是的，使用过滤器：

像这样： [https ://docs.google.com/spreadsheet/ccc?key=0AkGlO9jJLGO8dFMxN0lDLXR0U0NiQk1JX3ZWOW9jQkE&usp=sharing](https://docs.google.com/spreadsheet/ccc?key=0AkGlO9jJLGO8dFMxN0lDLXR0U0NiQk1JX3ZWOW9jQkE&usp=sharing)

A16：=过滤器（A1：E7，A12：E12）

第 12 行中的 true 和 false 值导致它隐藏列。

# sql - Oracle insert() 函数类似于 mysql 的

> ID：14608664
> 
> 赞同：1
> 
> 时间：2013-01-30T16:19:18.967
> 
> 标签：sql, oracle11g

oracle 是否有类似 mysql 的 Insert() 的等效函数来处理字符串？

**编辑：**
*这是编码的答案，以便于理解*

```
create or replace function fn_insert(ori_string in varchar2, in_pos in number, 
p_length in number, new_string in varchar2) 
    return varchar2
    is 
     resul varchar2(250) default '';
    begin
    if in_pos < 0 then
      resul := ori_string;
    else
      resul := substr(ori_string, 1, in_pos-1)||new_string||substr(ori_string, in_pos+p_length, length(ori_string) - ((in_pos+p_length)-1));
    end if;
    return resul;

    END fn_insert;
    / 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T16:24:29.227

您可以手动完成。所以，`insert(ori_string, in_pos, length, new_string)`可以写成：

```
 substr(ori_string, 1, in_pos)||new_string||substr(orig_string, in_pos+length, length(orig_string) - (in_pos+length)) 
```

在其他数据库中，也调用了这个函数`stuff()`

# java - 无法通过使用休眠的存储过程获取多个表实体

> ID：14608667
> 
> 赞同：10
> 
> 时间：2013-01-30T16:19:28.187
> 
> 标签：java, mysql, hibernate, stored-procedures

这是我的存储过程

```
Create PROCEDURE  [dbo].getUserAndEnum

AS

BEGIN

select * from user_master where id =1

select * from enum_master where id = 1

End 
```

用休眠我写

```
Session session = HibernateFactory.getSessionFactory().openSession();

Transaction tr = session.beginTransaction();

SQLQuery qr=session.createSQLQuery("getUserAndEnum");

List list = qr.list(); 
```

在列表中我只得到用户对象..我的 enum_master 行与 id 1 怎么样

id 为 1 的 PS enum_master 行在 DB 中

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T12:05:46.303

休眠文档中的“使用存储过程的规则/限制”指出

*“该过程必须返回一个结果集。请注意，由于这些服务器可以返回多个结果集和更新计数，因此 Hibernate 将迭代结果并将作为结果集的第一个结果作为其返回值。其他所有内容都将被丢弃。”* （参考：[http](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querysql.html#sp_query) ://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querysql.html#sp_query ）

如前所述，您的案例中的第二个结果集被忽略。

您需要使用 jdbc 来获取两个结果集。您可以为此创建单独的类，或者，hibernate 通过其会话的“doWork”和“doReturningWork”方法为您提供执行传统 jdbc 操作的方法......

一个简单的例子可能是：

```
List<Object> res = session.doReturningWork(new ReturningWork<List<Object> /*objectType returned*/>() {
            @Override
            /* or object type you need to return to process*/
            public List<Object> execute(Connection conn) throws SQLException 
            {
                CallableStatement cstmt = conn.prepareCall("CALL YOUR_PROCEDURE");
                //Result list that would return ALL rows of ALL result sets
                List<Object> result = new ArrayList<Object>();
                try
                {
                    cstmt.execute();                        

                    ResultSet rs = cstmt.getResultSet(); // First resultset
                    while (rs.next()) {//Read items/rows of first resultset
                        // .
                        // Process rows of first resultset

                        result.add(obj); // add items of resultset 1 to the returning list object
                    }

                    cstmt.getMoreResults(); // Moves to this Statement object's next result, returns true if it is a ResultSet object

                    rs = cstmt.getResultSet(); // Second resultset
                    while (rs.next()) {
                        // .
                        // Process rows of second resultset

                        result.add(obj); // add items of resultset 2 to the returning list object
                    }
                    rs.close();                           
                }
                finally
                {cstmt.close();}

                return result; // this should contain All rows or objects you need for further processing
            }
        }); 
```

# php - 使用php备份特定数据库表并压缩

> ID：14608673
> 
> 赞同：0
> 
> 时间：2013-01-30T16:19:33.803
> 
> 标签：php, mysql

使用 php 是否可以使用 php 创建特定 mysql 数据库表的备份。

此外，我也希望它被压缩。

我想要它，因此可以使用标准 mysql 导入命令直接加载文件，即

```
mysql -uuser -ppass mydb < mybackupfile.sql 
```

我正在研究的当前解决方案涉及迭代每一行并添加到文件中 - 但这似乎不正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:24:29.987

您可以使用 php 执行 mysqldump 命令。像这样...

exec("mysqldump -uuser -ppass --compact mydb mytable > filename.sql");

然后运行另一个命令以随意压缩它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:22:54.107

这项工作的最佳工具是`mysqldump`并`gzip`结合：

```
mysqldump ...options... | gzip -9 > backup.sql.gz 
```

请注意，您需要在恢复之前反转此过程：

```
gunzip -dc backup.sql.gz | mysql ...options... 
```

PHP 本身可能能够启动此过程，但它本身并不是一个非常好的工具。你可以试试[phpMyAdmin](http://www.phpmyadmin.net/home_page/index.php)看看是否适合你。

# java - 我可以运行 MySQL 脚本来使用 maven 将测试数据安装到数据库中吗

> ID：14608677
> 
> 赞同：0
> 
> 时间：2013-01-30T16:19:41.303
> 
> 标签：java, mysql, maven

我可以运行 MySQL 脚本来使用 maven 将测试数据安装到数据库中吗？

由于我的项目正在构建和测试，我想在 mySQL 数据库上运行一个脚本来安装一些数据进行测试，然后在测试后从它中获取..

有人可以让我知道这是否可以完成

# twitter-bootstrap - 我可以在没有 jquery 的情况下使用 twitter bootstrap 吗？

> ID：14608681
> 
> 赞同：104
> 
> 时间：2013-01-30T16:19:48.800
> 
> 标签：twitter-bootstrap

我在一个不使用 JQuery 的项目中工作。

twitter bootstrap 依赖于它吗？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2013-01-30T16:23:58.163

Twitter 引导程序本身不依赖于 jQuery。

如果只使用其中的 CSS 部分，则不需要 jQuery。

如果您使用 Javascript 插件，则需要 jQuery，因为它们是**jQuery 插件**。

**v3**： http: [//getbootstrap.com/javascript/](http://getbootstrap.com/javascript/)

**v4**：[https ://getbootstrap.com/docs/4.0/getting-started/javascript/](https://getbootstrap.com/docs/4.0/getting-started/javascript/)

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2013-05-08T10:56:06.873

简短的回答是肯定的，但正如布鲁诺所说，jQuery 插件不起作用。为了解决这个问题，我做了一个小的替换脚本，这样下拉菜单、警报框和可折叠导航栏将在没有 jQuery 的情况下工作：http: [//daniemon.com/blog/bootstrap-without-jquery/](http://daniemon.com/blog/bootstrap-without-jquery/)

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2015-04-02T11:41:28.760

是的，您可以通过[Native Javascript for Bootstrap](http://thednp.github.io/bootstrap.native/)。享受

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2020-01-23T12:49:46.790

Bootstrap 5 将没有 jQuery 依赖。参考：[关注公关](https://github.com/twbs/bootstrap/pull/23586)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-09-10T18:28:56.567

您不需要使用 jQuery。Boostrap 使用原生 JavaScript 比使用 jQuery 性能更好。

尝试其中之一：

1.  [引导原生](https://github.com/thednp/bootstrap.native)
2.  [引导原生 JavaScript](https://thednp.github.io/bootstrap.native/)
3.  [Vue.js](https://medium.com/js-dojo/drop-jquery-from-your-bootstrap-project-and-replace-it-with-vue-js-82230bfca98a)

# java - java - 如果没有覆盖hashCode会发生什么？

> ID：14608683
> 
> 赞同：5
> 
> 时间：2013-01-30T16:19:51.813
> 
> 标签：java, hashcode

> **可能重复：**
> [什么是对象哈希码](https://stackoverflow.com/questions/2237720/what-is-an-objects-hashcode)

假设我创建了一个名为的对象，`Employee`它具有实例变量的 id、firstName、lastName 和 email 以及相应的 setter/getter 方法。如果将对象存储在集合对象中时不覆盖对象，如何`hashCode()`计算？`hashCode()``Employee`

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-30T16:22:40.930

如果你不覆盖 hashcode() ，那么 Object 类中的默认实现将被集合使用。此实现为不同的对象提供不同的值，即使根据 equals() 方法它们相等。

一些集合，如 HashSet、HashMap 或 HashTable 使用哈希码来存储和检索数据。如果您没有以一致的方式实现 hashcode() 和 equals()，那么它们将无法正常运行。

### 编辑：

根据[Javadoc](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#hashCode%28%29)：Object.hashcode()“通常通过将对象的内部地址转换为整数来实现，但 Java(TM) 编程语言不需要这种实现技术”。因此，我建议不要依赖特定的实现。有关实现的真正作用，请参阅对类似问题的回答[。](https://stackoverflow.com/a/10107092/39622)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-30T16:21:14.880

从文档中：

> 在合理可行的情况下，由 Object 类定义的 hashCode 方法确实为不同的对象返回不同的整数。（这通常通过将对象的内部地址转换为整数来实现，但 JavaTM 编程语言不需要这种实现技术。）

所以基本上当你存储在 Map/Set/somethingThatRequiresHashCode 中时，JVM 将使用该实例的内部内存地址来计算 hashCode，保证（就像散列函数保证任何东西一样——它们不保证）每个不同的实例都会有一个唯一的哈希码。

这一点尤其重要，因为 Object 契约涉及 equals 和 hashCode，因为：

> Object 类的 equals 方法实现了对象上最有区别的可能等价关系；也就是说，对于任何非空引用值 x 和 y，当且仅当 x 和 y 引用同一个对象（x == y 的值为 true）时，此方法才返回 true。

如果不覆盖equals，它将比较两个引用的内部地址，这与hashCode背后的逻辑相匹配。

如果您的问题与以下内容更相关：JVM 是否会查看实例中的值以确定相等/计算哈希码，如果您这样做，答案是否定的：

```
MyObject a = new MyObject("a", 123,"something");
MyObject b = new MyObject("a", 123,"something"); 
```

`a`并且`b`会有不同的哈希码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T16:24:47.070

来自有效的 Java 第 2 版

> 第 9 条：当你覆盖 equals 时，总是覆盖 hashCode
> 
> 错误的常见来源是未能覆盖 hashCode 方法。您必须在每个覆盖 equals 的类中覆盖 hashCode。不这样做将导致违反 Object.hashCode 的一般约定，这将阻止您的类与所有基于哈希的集合（包括 HashMap、HashSet 和 Hashtable）一起正常运行。

我建议你读那一章。有很多例子，你可以学习，如果你不这样做会发生什么。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T16:41:52.733

这取决于集合，即使元素的 hashCode 未被覆盖，大多数集合也应该工作，除了 `HashSet`依赖元素 hashCode 才能正常工作的集合。请注意，集合的 hashCode 通常依赖于元素的 hashCode：

> 返回此集合的哈希码值。虽然 Collection 接口没有对 Object.hashCode 方法的通用约定添加任何规定，但程序员应注意，任何重写 Object.equals 方法的类也必须重写 Object.hashCode 方法以满足 Object 的通用约定.hashCode 方法。特别是， c1.equals(c2) 意味着 c1.hashCode()==c2.hashCode()

请参阅：[http ://docs.oracle.com/javase/6/docs/api/java/util/Collection.html#hashCode%28%29](http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html#hashCode%28%29)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T16:28:27.433

```
**type of field**             **hash code formula**

boolean                       fieldHash = f ? 0 : 1

any integer type except long  fieldHash = (int) f

long                          fieldHash = (int) (f ^ (f >>> 32))

float                         fieldHash = Float.floatToIntBits( f )

double                        int v=Double.doubleToLongBits(f)

fieldHash                     (int) (v ^ (v >>> 32))

any Object reference          fieldHash = f.hashCode() 
```

如果您编写自定义类型，您有责任创建一个`hashCode`能够最好地代表当前实例状态的良好实现。

[http://content.hccfl.edu/polllock/AJava/HashCode.htm](http://content.hccfl.edu/pollock/AJava/HashCode.htm)

# ios - 了解 iOS 中的 NSXMLParser

> ID：14608687
> 
> 赞同：6
> 
> 时间：2013-01-30T16:20:03.967
> 
> 标签：ios, nsxmlparser, mkannotationview, mapkit

我了解了当前的 NSXMLParser。我阅读了许多教程，但没有人能准确地告诉我它是如何工作的。有关于 StackOverflow 的教程吗？我的问题是我的应用程序中的这个 KML 读取结构并使用 MKMapView 显示

我的 Parser 类看起来像：

```
#import <Foundation/Foundation.h>

@interface Parser : NSXMLParser

@property (nonatomic, strong) NSString *rowElementName; // this is the element name that identifies a new row of data in the XML
@property (nonatomic, strong) NSArray *attributeNames;  // this is the array of attributes we might want to retrieve for that element name
@property (nonatomic, strong) NSArray *elementNames;    // this is the list of sub element names for which we're retrieving values

@property (nonatomic, strong) NSMutableArray *items;    // after parsing, this is the array of parsed items

@end 
```

和

```
#import "Parser.h"

@interface Parser () <NSXMLParserDelegate>

@property (nonatomic, strong) NSMutableDictionary *item;     // while parsing, this is the item currently being parsed
@property (nonatomic, strong) NSMutableString *elementValue; // this is the element within that item being parsed

@end

@implementation Parser

- (id)initWithContentsOfURL:(NSURL *)url
{
    self = [super initWithContentsOfURL:url];

    if (self)
    {
        self.delegate = self;
    }

    return self;
}

- (id)initWithData:(NSData *)data
{
    self = [super initWithData:data];

    if (self)
    {
        self.delegate = self;
    }

    return self;
}

- (id)initWithStream:(NSInputStream *)stream
{
    self = [super initWithStream:stream];

    if (self)
    {
        self.delegate = self;
    }

    return self;
}

#pragma mark - NSXMLParserDelegate methods

- (void)parserDidStartDocument:(NSXMLParser *)parser
{
    self.items = [[NSMutableArray alloc] init];

    if (!self.rowElementName)
        NSLog(@"%s Warning: Failed to specify row identifier element name", __FUNCTION__);
}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName attributes:(NSDictionary *)attributeDict
{
    if ([elementName isEqualToString:self.rowElementName])
    {
        self.item  = [[NSMutableDictionary alloc] init];

        for (NSString *attributeName in self.attributeNames)
        {
            id attributeValue = [attributeDict valueForKey:attributeName];
            if (attributeValue)
                [self.item setObject:attributeValue forKey:attributeName];
        }
    }
    else if ([self.elementNames containsObject:elementName])
    {
        self.elementValue = [[NSMutableString alloc] init];
    }
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    if (self.elementValue)
    {
        [self.elementValue appendString:string];
    }
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    if ([elementName isEqualToString:self.rowElementName])
    {
        [self.items addObject:self.item];
        self.item = nil;
    }
    else if ([self.elementNames containsObject:elementName])
    {
        [self.item setValue:self.elementValue forKey:elementName];
        self.elementValue = nil;
    }
}

@end 
```

由[rob创建](https://stackoverflow.com/users/1271826/rob)

我的 XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://earth.google.com/kml/2.1">
<Document>
    <name>Filename.kml</name>
    <Style id="style1">
        <IconStyle>
            <Icon>
                <href>http://imageshack.us/a/img825/9079/pinvi.png</href>
            </Icon>
        </IconStyle>
    </Style>
    <Placemark>
        <name><![CDATA[Blankenese]]></name>
        <Snippet><![CDATA[Blankeneser Bahnhofstr. 9 22587 Hamburg +49-(0)40-866 06 50 +49-(0)40-86 60 65 60]]></Snippet>
        <description><![CDATA[<img src="http://www.engelvoelkers.com/shops/de-blankenese-res.jpg"><br/>Blankeneser Bahnhofstr. 9<br/>22587 Hamburg<br/>Telefon: +49-(0)40-866 06 50<br/>Fax: +49-(0)40-86 60 65 60<br/><a href="http://www.engelvoelkers.com/elbe">Website</a><br/>E-Mail: Blankenese@engelvoelkers.com]]></description>
        <styleUrl>#style1</styleUrl>
        <Point>
            <coordinates>9.811470,53.559441</coordinates>
        </Point>
    </Placemark>
</Document>
</kml> 
```

我的目标是获取`<description>`标签中的所有信息并像谷歌地图一样显示它![在此处输入图像描述](../Images/819a80ea828a7574c6c9159369bd5806.png)

不完全是类似的。

但首先我需要知道如何使用解析器

最好的问候 CTS

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-31T05:53:37.910

这个问题有两个根本不同的组成部分，解析和注释地图。我将在这里关注地图注释，因为我想我在这里讨论了解析问题：[尝试在 MKMapView 中加载创建的地图](https://stackoverflow.com/questions/14562669/try-to-load-a-created-map-in-mkmapview/14564399#14564399)。不过，在这个答案的最后，我会引用一些苹果的解析文档，如果你只是想把你的手臂放在身边的话`NSXMLParser`。

### 注释地图

iPhone 上地图应用程序的常见模式是不在地图视图本身上显示内容丰富的弹出框，而是由于 iPhone 的有限空间，仅显示标准标注，但将 设置`rightCalloutAccessoryView`为披露指示器，如果您点击它，它将转到下一个视图的详细信息。因此，通过使用`UIMapViewDelegate`方法，你可以有一个`mapView:viewForAnnotation:`说：

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation
{
    MKAnnotationView *annotationView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"loc"];
    annotationView.canShowCallout = YES;
    annotationView.rightCalloutAccessoryView = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];

    return annotationView;
} 
```

这将产生以下用户界面：

![右侧标注附件](../Images/2fbb3ef86aa4dd531382530b171f71ca.png)

然后你可以有一个`mapView:annotationView:calloutAccessoryControlTapped:`这样的：

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control
{
    [self performSegueWithIdentifier:@"DetailsIphone" sender:view];
} 
```

您可以使用它转到您的详细信息屏幕。（我只是对带有 web 视图的视图控制器进行模态搜索`prepareForSegue`，`viewDidLoad`在设计比这个快速而肮脏的 Web 视图更漂亮的东西……我只是在演示我们可以从 KML 文件中获取地标的 HTML）：

![iPhone 详细信息屏幕](../Images/4e425bd7092949b9ca5fc06b8be65eed.png)

因此，虽然 iPhone 确实不应该在地图本身上使用弹出框，但在 iPad 上，您可以使用它们。您可以`rightCalloutAccessoryView`以类似的方式创建（尽管可能使用“信息”按钮而不是详细信息披露）：

![iPad 右侧标注配件](../Images/0074937d8623ec19cad97a490a7e71a3.png)

但是在这里，您`mapView:annotationView:calloutAccessoryControlTapped:`实际上可以生成弹出框，而不是进行模态转换：

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control
{
    //CGRect frame = view.frame;
    [mapView deselectAnnotation:view.annotation animated:YES];

    DetailsViewController *controller = [self.storyboard instantiateViewControllerWithIdentifier:@"DetailsPopover"];
    controller.annotation = view.annotation;
    self.popover = [[UIPopoverController alloc] initWithContentViewController:controller];
    self.popover.delegate = self;
    [self.popover presentPopoverFromRect:view.frame
                                  inView:view.superview
                permittedArrowDirections:UIPopoverArrowDirectionAny
                                animated:YES];
} 
```

产生：

![iPad弹出框](../Images/e381c669b49782d7964a6c5fdcd10457.png)

顺便说一句，这大致近似于 iPad 地图应用程序的操作方式（当您单击图钉时，它会向您显示带有“信息”按钮的标注），如果您随后单击信息按钮，则会显示弹出框有细节。

或者，您可以单击图钉将您带到弹出窗口，绕过干预标注。不过，为此，您首先必须禁用注释视图本身的标注：

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation
{
    MKAnnotationView *annotationView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"loc"];
    annotationView.canShowCallout = NO;

    return annotationView;
} 
```

但是你必须回应`mapView:didSelectAnnotationView:`：

```
- (void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view
{
    [mapView deselectAnnotation:view.annotation animated:YES];

    DetailsViewController *controller = [self.storyboard instantiateViewControllerWithIdentifier:@"DetailsPopover"];
    controller.annotation = view.annotation;
    self.popover = [[UIPopoverController alloc] initWithContentViewController:controller];
    self.popover.delegate = self;
    [self.popover presentPopoverFromRect:view.frame
                                  inView:view.superview
                permittedArrowDirections:UIPopoverArrowDirectionAny
                                animated:YES];
} 
```

理论上，你可以在 iPhone 上做这样的事情，但由于你不能使用`UIPopoverController`，你必须使用一些第三方弹出框（或自己编写）。我听说有些人声称苹果拒绝 iPhone 应用程序使用弹出视图，但我既不能证实这一点，也不能说这是否是一个硬性规定。我只知道 Apple 和 Google iPhone 地图应用程序不会在 iPhone 地图应用程序上使用大的弹出视图（Apple 转向另一个视图，谷歌让它出现在屏幕底部）。如果您考虑一下，如果图钉正好在中心，并且您试图生成一个指向该图钉的大弹出框，它可能会变得狭窄。

无论如何，这些是使用`rightCalloutAccessoryView`设置和/或直接禁用`canShowCallout`和显示弹出框的选项。

* * *

### 解析参考：

*   Apple[事件驱动 XML 编程指南](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/XMLParsing/XMLParsing.html)
*   [NSXMLParser 类参考](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html)

### 地图视图标注参考：

*   [自定义 MKAnnotation 标注气泡](https://stackoverflow.com/questions/4094325/customizing-the-mkannotation-callout-bubble)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T16:27:43.660

解析器是这样工作的，打开根标签，然后搜索子标签。当没有更多嵌套标签时，将读取数据，在这里您可以选择如何保存数据。还有许多其他可用的解析器。通过 gDataXMLParser。我已经使用它并且工作得很好，如果有嵌套标签，请确保递归调用解析器。如果您正在寻找特定标签，请使用字符串查找子字符串，即；从`<b>`到`</b>`类似的内容并读取其中的文本。

# php - else if 和 elseif 的区别

> ID：14608689
> 
> 赞同：3
> 
> 时间：2013-01-30T16:20:07.457
> 
> 标签：php, conditional

> **可能重复：**
> [elseif 与 else if 之间的潜在差异](https://stackoverflow.com/questions/4661508/underlying-difference-between-elseif-vs-else-if)

`else if`PHP条件和`elseif`...有什么区别？

`<?php`

`....`

`else if($count == 4) {}`

和

`elseif($count == 4) {}`

是否有任何特殊情况可以使用或不使用？谢谢！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T16:22:51.477

使用花括号，没有区别。使用冒号定义条件时，“else if”将因解析错误而失败。

[有关详细信息，请参见此处](http://php.net/manual/en/control-structures.elseif.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:24:46.063

从逻辑上讲，它们完全相同。

解析器可能会对它们进行不同的解释，这可能会导致非常细微的性能差异。

# gwt - 使用多个 CheckBox 过滤 GWT CellList 的好方法是什么？

> ID：14608690
> 
> 赞同：1
> 
> 时间：2013-01-30T16:20:08.663
> 
> 标签：gwt, filter, celllist

在 Google Web Toolkit (GWT) 中工作 我正在使用 CellList 来呈现关税列表的详细信息（使用 CompositeCell 在我自己的自定义单元格旁边显示 CheckBoxCell）。

我想按关税长度（12、18、24、36 个月等）过滤列表。我想在列表顶部为每个关税长度呈现一个复选框，并在用户取消选中并重新选中一个框时根据需要更新 dataProvider。

我事先不知道关税长度的集合，它们将在页面呈现时从结果集中提取。可能只有两个（需要两个复选框），但可能有 10 个（需要 10 个复选框） - 我只想根据需要为每个复选框呈现一个复选框。

所以不知何故，我需要将一个 int 值与每个复选框相关联，然后将该 int 传递给一个函数，该函数通过删除所有匹配的关税来更新列表。我只是不确定如何为复选框添加处理程序以及如何获取该特定框的值。

这就是我的想法：

```
 // panel to hold boxes
    private Panel contractLengthPanel = new HorizontalPanel();      
    textPanel2.add(contractLengthPanel);

    // create a set of the terms, by looping the result set
    Set<String> contractTerms = new HashSet<String>();
    for(ElecTariff tariff : tariffs)
    {
        contractTerms.add(Integer.toString(tariff.getContractLength()));
    }

    // loop that set, creating a CheckBox for each value
    for(String term : contractTerms)
    {
        CheckBox box = new CheckBox(term + " Months");

        // set all boxes with the same name, and a unique id
        box.getElement().setAttribute("name", "termBoxes");
        box.getElement().setAttribute("id", "termBox" + term);

        contractLengthPanel.add(box);
    } 
```

现在我不确定我在这里是否正确，但现在我将每个框作为同一组的一部分（它们具有相同的名称）我想用它来添加一个处理程序，当一个box 被选中或未选中，将 box id（包含关税长度）传递给该函数。

我希望这不是写得太混乱。帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T16:36:51.900

在 HTML 中确实没有像“一组复选框”这样的东西，在 GWT 中也没有。虽然有*一种*“单选按钮组”，但它只是让它们的选中状态互斥，它不会改变你从代码中使用它们的方式。

您必须听取每个复选框的更改。

您可以做的是为所有复选框使用相同的事件处理程序；就像是：

```
ValueChangeHandler<Boolean> handler = new ValueChangeHandler<Boolean>() {
   @Override
   public void onValueChange(ValueChangeEvent<Boolean> event) {
      CheckBox box = (CheckBox) event.getSource();
      String id = box.getFormValue();
      boolean checked = box.getValue();
      …
   }
}; 
```

（注意：我使用`getFormValue()`而不是`getElement().getId()`；我相信这是一个更好的选择：它专门用于将值与复选框相关联）

# security - 管理加密连接字符串 (IIS) 的部署

> ID：14608692
> 
> 赞同：1
> 
> 时间：2013-01-30T16:20:14.930
> 
> 标签：security, iis, encryption, iis-7, connection-string

我在我的电脑上跑过

```
aspnet_regiis -pe "connectionStrings" -app "/MyApp" -site "MySite" 
```

它在 web config 中创建了一个加密的 <connectionStrings> xml 元素

现在，每次我将我的应用程序部署到新环境时，
web.config 都会被“web 转换”为新的 web.config，然后进行部署。
我了解每台机器的加密都是唯一的。我试图复制加密的值，但它没有用。

1.  我是否需要在每次部署时以及在每台机器上运行“aspnet_regiis -pe...”命令？
    有更好的做法吗？
2.  我的机器在加密中使用的计算机中的唯一密钥是什么/在哪里？
    我需要保护它以防潜在的攻击吗？
    谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:31:04.143

1) 是的，我建议将未加密的 web.config 文件部署到新服务器，然后在“部署过程”中运行您的加密命令。

2）操作系统和框架应该已经为您保护了默认加密密钥。您可以在以下链接中了解有关所有这些内部结构的更多信息：

[http://msdn.microsoft.com/en-us/library/dtkwfdky%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/dtkwfdky%28v=vs.100%29.aspx)

*“本演练使用在 Machine.config 文件中指定并命名为“RsaProtectedConfigurationProvider”的默认 RsaProtectedConfigurationProvider 提供程序。默认 RsaProtectedConfigurationProvider 提供程序使用的 RSA 密钥容器名为“NetFrameworkConfigurationKey”。*

请记住，用于加密/解密 web.config 文件的密钥不是机器密钥（它是单独的）。但是，如果您要部署到网络场，您还需要确保机器密钥是一致的，否则您会看到出现奇怪的错误。

# c# - C# MVC 文件上传

> ID：14608695
> 
> 赞同：1
> 
> 时间：2013-01-30T16:20:21.603
> 
> 标签：c#, asp.net-mvc

在 MVC c# 中。ASP.NET。

我的要求是让用户能够从那里选择一个目录，只要目录中的文件以“Anqu”开头并且是.pdf文件，我需要将所有这些文件上传到服务器。

由于没有简单的方法来做一个文件夹选择器，我想我要做的是让用户从一个文件夹中选择一个文件，然后从那里，我可以检索目录路径，然后我可以检索所有适合的文件要求。

这是我发现的最佳方法（如果您有不同的感觉，请发表评论）。

一旦用户选择了一个文件并点击了提交，它就会进入以下操作结果：

```
 [HttpPost]
     public ActionResult FileUpload(HttpPostedFileBase file) 

     string dirName = new DirectoryInfo(file.FileName).Name; 
```

获取目录信息。我发现不可能得到它。

这就是我的看法：

```
 @using (Html.BeginForm("FileUpload", "Plt", FormMethod.Post, new { enctype = "multipart/form-data" }))

    {          

       <input type="file" name="file" />
       <input type="submit" value="OK" />
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:38:38.183

您不能操作或访问客户端文件系统，因为您可以想象，如果允许，这将是非常危险的。

想象一下去一个网站，然后你所有的私人文件都被上传到服务器上，而你没有特别选择将它们上传到那个服务器！！

这就是为什么您只能上传用户选择上传到您的服务器的文件，您能做的最好的事情是允许多个文件异步上传，使用[javascript/jquery](http://blueimp.github.com/jQuery-File-Upload/)或使用[Teleerix mvc 控件](http://www.telerik.com/products/aspnet-mvc/upload.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T16:33:56.983

你不能在 js 中做到这一点。浏览器中的 Javascript 无法访问本地文件系统。您操作的文件是来自请求的流。您无法从服务器访问客户端文件系统。这不是http的工作方式。

您应该检查提供漂亮用户界面并允许多个文件上传的上传器。

*   我喜欢这个：[http](http://www.plupload.com/) ://www.plupload.com/因为它有多个上传引擎，包括 SilverLight。
    *   这在 UI 定制上更容易：[http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T16:37:46.107

听起来您正试图让用户将文件从他们的计算机上传到服务器（通常是这种情况）。你会遇到的第一个问题是

```
string dirName = new DirectoryInfo(file.FileName).Name; 
```

正在服务器上执行。您可以使用像[uploadify](http://www.uploadify.com/)这样的多文件上传器，并将通配符选择设置为 Anqu*.pdf，以便仅显示与您的描述匹配的文件。

[Uploadify 与 ASP.Net MVC 问题](https://stackoverflow.com/questions/1002680/how-do-i-get-jquerys-uploadify-plugin-to-work-with-asp-net-mvc)

# google-app-engine - 在 Jinja2 中测试表单实例的存在

> ID：14608696
> 
> 赞同：0
> 
> 时间：2013-01-30T16:20:29.980
> 
> 标签：google-app-engine, jinja2, wtforms

我正在将 WTforms 与 Jinja2 一起使用，并希望根据我是否正在创建编辑现有表单对象的新实例来更改我的模板页面标题。

这是我在模板中写的：

```
{% block title %}{% if form.obj %}Edit{% else %}New{% endif %} Post{% endblock %} 
```

我期望看到的：

如果表格已填写，我希望在页面标题中看到“编辑帖子”。

如果表单为空，我希望在页面标题中看到“新帖子”。

我得到的是：在这两种情况下都是“新帖子”。

这是传递表单值的我的 PostHandler。

```
def with_post(fun):
    def decorate(self, post_id=None):
        post = None
        if post_id:
            post = models.BlogPost.get_by_id(int(post_id))
            if not post:
                self.error(404)
                return
        fun(self, post)
    return decorate

class PostHandler(BaseHandler):
    def render_form(self, form):
        self.render_to_response("edit.html", {'form': form})

    @with_post
    def get(self, post):
        self.render_form(MyForm(obj=post))

    @with_post
    def post(self, post):
        form = MyForm(formdata=self.request.POST, obj=post)
        if post and form.validate():
            form.populate_obj(post)
            post.put()
            post.publish()
            self.render_to_response("published.html", {'post': post})
        elif self.request.POST and form.validate():
            post = models.BlogPost()
            post.title = form.title.data
            post.body = form.body.data
            post.tags = form.tags.data
            post.publish()
            self.render_to_response("published.html", {'post': post})
        else:
            self.render_to_response('edit.html', {'form':form}) 
```

简而言之，我要做的就是测试表格是否填写，并相应地更改我的页面标题“新帖子”或“编辑帖子”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:18:31.350

虽然 Form 接受 obj 参数，但它实际上并不存储它，它只是使用该 obj 来填充 formdata 未提供的任何空白。因此，当您询问 Jinja2 时`{% if form.obj %}`，它总是会为 False，因为从来没有 obj 属性（除非您有一个恰好被称为 obj 的字段）。

如果您正在编辑帖子，您将有一个 id 可以使用，因此您知道要在数据库中更新哪个帖子，那么您当前将其存储在哪里？假设您将其存储为隐藏字段，您可以这样做：

```
{% if form.id.data == None %}Must be a New form {% endif %} 
```

如果您想检查整个表单是否为空，您可以访问`form.data`字典，并确保所有条目都是`None`，尽管您需要小心，因为我知道 FileField 返回 a`u'None'`而不是 real `None`，所以您会有仔细检查您关心的字段。

# ios - 订阅的 iOS 应用程序总是被拒绝

> ID：14608701
> 
> 赞同：4
> 
> 时间：2013-01-30T16:20:45.207
> 
> 标签：ios, in-app-purchase, subscription

我们在将 Newstand App 发布到 App Store 时遇到问题。它总是被拒绝，因为来自订阅 In-App-Purchase 的收据的验证似乎在实时（非沙盒）环境中失败。问题是，我们针对沙盒环境测试了所有内容，并且一切正常。对于发布版本，我们确保使用我们的验证 Web 服务来验证 Apple 实时服务，而不是沙箱验证服务。所以一切都应该工作，但在审查过程中它总是失败。

有没有人有类似问题的经验？苹果确实针对实时环境进行了测试，对吧？因为我们必须提交应用程序的实时版本，所以针对沙盒进行验证是没有意义的。

我们将 IAP 项目与 App 一起提交，但这应该不是问题，因为 Apple 测试人员似乎可以购买订阅，只是验证不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T16:53:09.273

好的，我在 Apple 文档中找到了一些东西：

[https://developer.apple.com/library/ios/#technotes/tn2259/_index.html](https://developer.apple.com/library/ios/#technotes/tn2259/_index.html) （在常见问题 16 下。）

“我如何验证我的收据 (iOS)？始终先使用生产 URL 验证您的收据；如果您收到 21007 状态代码，则继续使用沙盒 URL 进行验证。遵循这种方法可确保您不必在 URL 之间切换，同时您的应用程序正在沙盒中进行测试或审查，或者在 App Store 中上线。”

我们误读了上面的行“一旦您的应用程序在 App Store 中上线，请使用生产 URL [http://buy.itunes.apple.com/verifyReceipt](http://buy.itunes.apple.com/verifyReceipt)。”，认为 Apple 会在审核过程中使用真正的服务器验证，但他们也使用沙盒环境。

很难找到这条小线，在我看来，他们应该让这一事实更加突出！

所以希望这能解决这个问题。

不过感谢您的评论！

# ios - 在 UIIMage 上用透明替换绿色

> ID：14608703
> 
> 赞同：0
> 
> 时间：2013-01-30T16:20:48.053
> 
> 标签：ios, cocoa-touch, uiimage, core-graphics

我在我的 UIImage 上画了绿线： CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext() , 0 , 1 , 0 , 1);

它运作良好

但是在我想用透明替换我的绿色笔触之后

我使用这个功能：

```
 - (UIImage*) replaceColor:(UIColor*)color inImage:(UIImage*)image withTolerance:(float)tolerance {
CGImageRef imageRef = [image CGImage];

NSUInteger width = CGImageGetWidth(imageRef);
NSUInteger height = CGImageGetHeight(imageRef);
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

NSUInteger bytesPerPixel = 4;
NSUInteger bytesPerRow = bytesPerPixel * width;
NSUInteger bitsPerComponent = 8;
NSUInteger bitmapByteCount = bytesPerRow * height;

unsigned char *rawData = (unsigned char*) calloc(bitmapByteCount, sizeof(unsigned char));

CGContextRef context = CGBitmapContextCreate(rawData, width, height,
                                             bitsPerComponent, bytesPerRow, colorSpace,
                                             kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);
CGColorSpaceRelease(colorSpace);

CGContextDrawImage(context, CGRectMake(0, 0, width, height), imageRef);

CGColorRef cgColor = [color CGColor];
const CGFloat *components = CGColorGetComponents(cgColor);
float r = components[0];
float g = components[1];
float b = components[2];
//float a = components[3]; // not needed

r = r * 255.0;
g = g * 255.0;
b = b * 255.0;

const float redRange[2] = {
    MAX(r - (tolerance / 2.0), 0.0),
    MIN(r + (tolerance / 2.0), 255.0)
};

const float greenRange[2] = {
    MAX(g - (tolerance / 2.0), 0.0),
    MIN(g + (tolerance / 2.0), 255.0)
};

const float blueRange[2] = {
    MAX(b - (tolerance / 2.0), 0.0),
    MIN(b + (tolerance / 2.0), 255.0)
};

int byteIndex = 0;

while (byteIndex < bitmapByteCount) {
    unsigned char red   = rawData[byteIndex];
    unsigned char green = rawData[byteIndex + 1];
    unsigned char blue  = rawData[byteIndex + 2];

    if (((red >= redRange[0]) && (red <= redRange[1])) &&
        ((green >= greenRange[0]) && (green <= greenRange[1])) &&
        ((blue >= blueRange[0]) && (blue <= blueRange[1]))) {
        // make the pixel transparent
        //
        rawData[byteIndex] = 0;
        rawData[byteIndex + 1] = 0;
        rawData[byteIndex + 2] = 0;
        rawData[byteIndex + 3] = 0;
    }

    byteIndex += 4;
}

UIImage *result = [UIImage imageWithCGImage:CGBitmapContextCreateImage(context)];

CGContextRelease(context);
free(rawData);

return result;
    } 
```

我在[如何使 UIImage 上的一种颜色透明？](https://stackoverflow.com/questions/633722/how-to-make-one-color-transparent-on-a-uiimage)

我不知道为什么，但位于笔画边界的所有绿色像素仍在 UIImage 中

任何想法 ？

这是结果图（描边的路径在中间，可以看到周围有一些绿色像素）

![在此处输入图像描述](../Images/17bbb36f0f40e076bb039f28f54e7059.png)

提前致谢

# php - .htacces - 如何使用

> ID：14608704
> 
> 赞同：-5
> 
> 时间：2013-01-30T16:20:47.790
> 
> 标签：php, .htaccess

我一直在互联网上寻找如何使用 .htacces 文件。但我就是无法理解它。我正在尝试重写 url，以便我可以轻松地用 php 将其分解并在 OOP 中创建站点。另外，在本地主机和在线编程时是否需要更改它？

提前致谢

编辑1：

我会使用“参数”来获取 url 并将其分解为不同的部分以构建页面。例如，第一个参数是语言，第二个参数是页面，然后是操作（删除项目，添加项目，...）

目前我正在使用本地主机。网址是 localhost/testsite/index.php

我现在拥有的代码如下：

```
RewriteEngine on

RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f

RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.*)$ index.php?params=$1 [L,QSA] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:38:57.513

基本上，如果你要重写，也很简单

`www.site.com/news.php?id=123`到 `www.site.com/this_is_news_title`

您应该创建一个名为的文件`.htaccess`并将其放在您的 htdocs 文件夹中，并在其中写入以下内容

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On

RewriteBase /

RewriteRule ^news/([0-9]+)/.*$ /news.php?id=$1 [QSA,L,NC] 
```

试一试并玩弄它。

# symfony - 如何覆盖 fosuser 捆绑包上的 Mailer 类？

> ID：14608707
> 
> 赞同：1
> 
> 时间：2013-01-30T16:20:55.330
> 
> 标签：symfony, fosuserbundle

我对 FosUser Bundle 的重置电子邮件有疑问，因为它是 txt 格式的，我想发送一封带有 html 表单的电子邮件，但该模板是一个 txt 模板，在类中也不要使用“text/html”选项。

所以我的问题是如何覆盖 FosUser Bundle（不是控制器）的内部类（Mailer）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:34:28.993

我在 fosuser 文档中找到了答案

[https://github.com/FriendsOfSymfony/FOSUserBundle/blob/1.2.0/Resources/doc/emails.md](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/1.2.0/Resources/doc/emails.md)

“发送 HTML 邮件”

# python - 在python函数中返回变量时遇到问题

> ID：14608710
> 
> 赞同：-3
> 
> 时间：2013-01-30T16:21:02.700
> 
> 标签：python, function, return

我只是想修改一个字符串并返回修改后的字符串，但是，在打印变量时我得到“无”返回。

```
def AddToListTwo(self,IndexPosition):
    filename = RemoveLeadingNums(self, str(self.listbox1.get(IndexPosition))) #get the filename, remove the leading numbers if there are any
    print filename #this prints None
    List2Contents = self.listbox2.get(0, END)
    if(filename not in List2Contents): #make sure the file isn't already in list 2
        self.listbox2.insert(0, filename)

def RemoveLeadingNums(self, words):
    if(isinstance(words,str)):
        match = re.search(r'^[0-9]*[.]',words)
        if match: #if there is a match, remove it, send it through to make sure there aren't repeating numbers
            RemoveLeadingNums(self, re.sub(r'^[0-9]*[.]',"",str(words)).lstrip())
        else:
            print words #this prints the value correctly
            return words
    if(isinstance(words,list)):
        print "list" 
```

**编辑 - 多人评论说如果匹配，我不会返回值。如果有的话我不想退货。它可能会重复（例如：1.2\. itema）。所以，我想基本上使用递归来删除它，然后返回值**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:23:25.387

`RemoveLeadingNums`返回的条件有多种`None`。例如，如果`if match:`分支被采用。也许应该是：

```
if match: 
    return RemoveLeadingNums(... 
```

`None`如果您有任何不是传入字符串的数据类型，您也会返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T16:23:44.777

在匹配的情况下，您不会返回任何内容。它应该是：

```
return RemoveLeadingNums( ... ) 
```

# ios - 无法从 C-Array 读取整数

> ID：14608713
> 
> 赞同：0
> 
> 时间：2013-01-30T16:21:10.540
> 
> 标签：ios, objective-c, xcode, integer, arrays

我创建了一个名为“leveldesign”的 NSObject-Class。在那里我创建了一个整数 C 数组。现在我正在尝试读取“ViewController.m”类中的数字。但是如果我 NSLog() 得到整数，我会得到 1245 或 2104 之类的数字......但在我的 C-Array 中只有 0,1 和 2.. 感谢您的帮助！

代码“leveldesign.h”

```
extern int level[1][5];

@interface leveldesign : NSObject

@end 
```

代码“leveldesign.m”

```
#import "leveldesign.h"

int level[1][5] = {

    {0,1,2,0,2}

};

@implementation leveldesign

@end 
```

代码“ViewController.m”

```
#import "leveldesign.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
  [super viewDidLoad];

  NSLog(@"%i", level[1][1]);
  NSLog(@"%i", level[1][3]);

}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T16:27:04.663

数组索引从 0 开始。

改变这个：

```
NSLog(@"%i", level[1][1]);
NSLog(@"%i", level[1][3]); 
```

对此：

```
NSLog(@"%i", level[0][0]);
NSLog(@"%i", level[0][2]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T16:47:52.540

也许您可以尝试`NSLog(@"%d", level[1][3]);`使用“ **d** ”格式说明符而不是“ **i** ”？

# java - 更新上次修改日期的最佳解决方案 -

> ID：14608715
> 
> 赞同：1
> 
> 时间：2013-01-30T16:21:16.087
> 
> 标签：java, spring-mvc, scheduled-tasks, timertask

我有一个 Spring 控制器，用于向父项添加不同类型的元素，当我更新或添加新项时，我需要更新其父项的最后修改日期。我的问题是我们多次调用此更新最后修改日期服务，我想避免这种情况。有没有更好或更优雅的方法来解决这个问题，然后是 timers(Timer, TimerTask) 或 ScheduledFuture, ScheduledThreadPoolExecutor？

```
Timer updateLastModifiedDateTimer = timers.get(parentkey);
    if (updateLastModifiedDateTimer != null) {
        updateLastModifiedDateTimer.cancel();
    }
    TimerTask updateLastModifiedDateTask = new TimerTask() {
        public void run() {
            getPresentationDAO().updateLastModifiedDate(owner, parentkey, System.currentTimeMillis());
        }
    };
    updateLastModifiedDateTimer = new Timer(true);
    updateLastModifiedDateTimer.schedule(updateLastModifiedDateTask, updateDelay);
    timers.put(parentkey, updateLastModifiedDateTimer); 
```

我用 ScheduledFuture 和 ScheduledThreadPoolExecutor 实现了类似的东西。

# jquery - 显示带有父显示的 div：无

> ID：14608716
> 
> 赞同：6
> 
> 时间：2013-01-30T16:21:18.980
> 
> 标签：jquery, html, css

> **可能重复：**
> [当父元素为 display:none 时显示 HTML 子元素](https://stackoverflow.com/questions/12956937/display-html-child-element-when-parent-element-is-displaynone)

我在另一个 div 中有一个 div。我已将外部 div 设置为`display:none`这将使内部 div 也隐藏。如何显示内部 div 并让外部设置为不显示？

CSS：

```
.hidden {
    width:100px;
    height:100px;
    background-color:red;
    display:none;
}

.display {
    width:50px;
    height:50px;
    background-color: yellow;
    display:block;
} 
```

HTML：

```
<div class="hidden">
    <div class="display"></div>
</div> 
```

示例：http: [//jsfiddle.net/gcyhz/1/](http://jsfiddle.net/gcyhz/1/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T16:26:05.713

实现这一点的最简单替代方法是避免使用`display: none`和使用`transparent`颜色：

```
.hidden {
    width:100px;
    height:100px;
    color: transparent;
    background-color: transparent;
}

.display {
    width:50px;
    height:50px;
    color: #000;
    background-color: yellow;
    display:block;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/gcyhz/2/)。

还有使用`visibility`而不是的选项`display: none`：

```
.hidden {
    width:100px;
    height:100px;
    visibility: hidden;
}

.display {
    width:50px;
    height:50px;
    color: #000;
    background-color: yellow;
    visibility: visible;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/gcyhz/3/)。

但是，这确实会导致`visibility: hidden`元素占用其在 DOM 中分配的空间，但显然是空的（因此它仍然具有物理尺寸，只是在页面上不可见），尽管子元素可以通过以下方式覆盖该属性声明`visibility: visible`。

老实说，后一个建议实际上与第一个建议完全相同，它只是避免了某些浏览器可能遇到的问题`transparent`（`color`我不记得哪个浏览器有这个问题，但我似乎记得它是一个较旧的IE，但我无法参考任何文件来证实该回忆）。

不幸的是，`display: none`父元素的声明不能被子元素覆盖，顺便说一句，也不能`opacity`。

如前所述，最简单的解决方案是简单地将元素移出其父元素，并避免继承问题，而不是试图弥补它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T16:22:31.550

不幸的是，这是不可能的。您必须设计一个替代解决方案。（也许当您需要显示时将内部 div 从隐藏的 div 中移出？）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T16:25:02.203

当您将父元素（元素 A）设置为`display:none;`它时，它将（在一个非常简单的解释中）从页面中删除该元素，以便其他元素的行为就像元素 A 不在页面上一样。与`visibility:hidden;`. 将其设置为`display:none;`必须隐藏该元素及其子元素。

据我所知，没有办法解决。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T17:09:36.120

jquery`.unwrap()`似乎可以解决问题：

```
$(".display").unwrap(); 
```

（虽然我有很多数据，在我的情况下最好在服务器端做这个）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T16:25:00.953

设置`display: none`一个元素使它看起来好像它不存在于 DOM 中（它不占用视觉空间）。不可能使另一个元素内部的元素`display: none`实际出现。

# f# - 公开 F# 测试用例方法以使用 Nunit 进行单元测试

> ID：14608719
> 
> 赞同：6
> 
> 时间：2013-01-30T16:21:35.957
> 
> 标签：f#, nunit

我正在使用 F# 编写我的测试方法，但 Nunit 抱怨这些方法是非公开的。

```
 namespace Test

open NUnit.Framework

type public Test() = 

    [<Test>]
    let testIt () =

        Assert.AreEqual(10,10) 
```

我需要改变什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-30T16:26:37.747

由于`let`绑定对父类型是私有的，因此您必须`member`改用：

```
namespace Test

open NUnit.Framework

[<TestFixture>]
type public Test() = 

    [<Test>]
    member x.testIt() =
        Assert.AreEqual(10, 10) 
```

如果您不需要复杂的设置，`let`最好直接使用模块级绑定：

```
module Test

open NUnit.Framework

[<Test>]
let testIt() = Assert.AreEqual(10, 10) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-31T07:54:21.417

您可以将 F# 测试用例放在一个[模块](http://msdn.microsoft.com/en-us/library/dd233221.aspx)中，以使它们对 NUnit 公开和可见：

```
module Tests

open NUnit.Framework

let [<Test>] ``10 should equal 10`` () = Assert.AreEqual(10,10) 
```

# c++ - 循环中的“断言”

> ID：14608722
> 
> 赞同：5
> 
> 时间：2013-01-30T16:21:39.963
> 
> 标签：c++, loops, optimization, assert

```
for(unsigned int i = 0; i < x.size(); i++)
    assert(x[i] > 0); 
```

不调试时（`NDEBUG`标志），结果是一个空`for`循环。有没有一种干净的方法来处理这个（不执行空`for`循环）；最好没有预处理器指令，因为它首先会破坏的目的`assert`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T16:27:59.437

```
inline bool all_positive(std::vector<int> const &x)
{
    for (size_t i = 0; i < x.size(); i++)
        if (x[i] <= 0)
            return false;
    return true;
} 
```

然后

```
assert(all_positive(x)); 
```

（尽管这可能会在`NDEBUG`定义时为您提供“未使用的功能”警告）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-30T16:26:12.297

一个好的优化器应该能够在`NDEBUG`定义时消除整个循环（我刚刚测试了我的，它确实做到了）。

`#ifndef NDEBUG`或者，您可以用/包围整个循环`#endif`。你说这“首先会破坏目的`assert`”，但我并没有真正遵循推理。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-30T16:28:14.097

`assert``NDEBUG`如果已定义，语句将变为无操作。要为整个循环做类似的事情，你可以做

```
#ifndef NDEBUG
for(unsigned int i = 0; i < x.size(); i++)
    assert(x[i] > 0);
#endif 
```

# c# - 如何针对多个目标平台构建库

> ID：14608725
> 
> 赞同：0
> 
> 时间：2013-01-30T16:21:48.800
> 
> 标签：c#, silverlight, nunit, build-target

我问这个问题是因为 Silverlight 和 NUnit，如果你尝试过，就会知道它们不能很好地配合使用。基本原因是 SL 代码是针对 SL 框架编译的，而 NUnit 是针对标准 .NET 框架编译的。

无论如何，我有一堆不特定于 SL 但确实驻留在客户端的类。我正在考虑把它们搬进他们自己的图书馆。是否可以配置 Visual Studio 和/或解决方案来将此库编译为 SL 库和 .NET 库？

我的 SL 客户端应用程序将引用库的 SL 版本，NUnit 将引用 .NET 版本。

我怀疑充其量，这将不得不通过makefile以某种方式进行安排，并且NUnit测试项目无法直接引用该项目，而是创建了.dll。

和其他类似的问题。

只是想知道人们对这个想法的看法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:50:49.867

就像您计划做的那样，您可以创建 SL Class libaray 和 .Net Class 库，并将代码放在一个项目中，并在另一个项目中进行文件链接。这样您就不需要保留文件的两份副本。因此，您可以指向 NUnit 测试的 .net 类库。只是一个想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T21:20:35.547

听起来像[Portable Class Libraries](http://msdn.microsoft.com/en-us/library/gg597391%28v=vs.100%29.aspx) VS 2012 的工作已经内置支持，并且有一个 2010 的附加组件。

# php - php 从日期开始的周间隔（“W”）

> ID：14608747
> 
> 赞同：-4
> 
> 时间：2013-01-30T16:22:53.347
> 
> 标签：php, date, intervals

嗨，我有一周的数据库编号，`date ("W")`我想以`28 Jan -> 3 Feb`这种格式显示周间隔，我不知道这是否可能。你能帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T16:36:31.517

试试这个

```
$year = 2013;
$week_no = 6;

$week_start = new DateTime();
$week_start->setISODate($year,$week_no);
$week_end = clone $week_start;
$week_end = $week_end->add(new DateInterval("P1W"));

echo $week_start->format('d-M-Y') . " - ".$week_end->format('d-M-Y'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:35:24.150

将您的时间间隔转换为时间戳。

如果它不是一周的第一天，则使用 strtotime “最后一个星期日”（或星期一）获取该周的第一天作为第一个日期。

这次对第二个日期做同样的事情，用“下周六”（或周日）获得一周的最后一天；

获取两个日期 W 并在几周之间进行 mysql 比较。

# .net - .NET 程序平均一直使用 50% 的 CPU 是否正常？

> ID：14608751
> 
> 赞同：2
> 
> 时间：2013-01-30T16:22:58.217
> 
> 标签：.net, cpu-usage, delphi-prism, oxygene

我只是在测试驱动我的程序，并正在查看它的进程的内存使用情况和其他。然后，我注意到我的 .NET 程序占用了大约 50% 的 CPU，几乎总是每隔一段时间就会跳到 98% 的 CPU。如果你运行它足够长的时间，程序缺乏更好的“废话”。

这是正常的吗？

更新：

```
method RemoteLink.ListenForClientConnections;
var theClient : HandleClient;
begin
    // Loop and wait for client connection.
    while true do
    begin   
        //blocks until a client has connected to the server  
        ServerClientSock := ServerSock.AcceptTcpClient; <<== Blocking 
        theClient := new HandleClient;
        theClient.startClient(ServerClientsock);

        Invoke(new UpdateClients(UpdateTheList),theClient);
    end;
end; 
```

实际上，有问题的while循环线程不是上面的，而是下面的。

更新：

```
method TSerialIndicator.BigLoop;
begin
  while true do
  begin
    if TurnOnTx then
    begin
        Thread.Sleep(50);
        TxLight.BackColor := Color.Black; 
        TurnOnTx:=false;
    end;

    if TurnOnRx then
    begin
        Thread.Sleep(50);
        RxLight.BackColor := Color.Black;
        TurnOnRx:=false;
    end;
  end;
end; 
```

一旦我的程序加载并运行，这个线程就会启动。正如您所看到的，如果我的程序没有传达我的 winform 上的指标不会得到更新，因此这个循环只是循环没有任何延迟。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T04:46:12.987

任何时候你有一个`while(true)`风格循环，无论语言或平台如何，如果你没有正确构建循环内容，就会有将单个核心固定在 100% 或接近 100% 的风险。在这种情况下，我怀疑你有一台双核机器，这样一个核心就可以尽可能快地工作。这导致您的问题中有 50% 的数字。此外，我怀疑循环中的阻塞函数无法按预期工作，因此您的代码中没有任何内容可以让 cpu 中断。

您可以通过将 Thread.Sleep() 调用放入循环中来缓解此问题，但您可能知道，这可能会对您的套接字服务产生不良的副作用，以至于它实际上并没有一直在监听连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T04:43:41.430

这不正常。注释掉循环，看看你是否有同样的问题。如果这样做，请尝试将 Thread.Sleep(milliseconds) 放入其中以暂停而不消耗 CPU 周期。如果这不是问题，请检查应用程序中的其他循环。

# c - 如何将逗号分隔的数字从文件读入C中的多维数组

> ID：14608754
> 
> 赞同：0
> 
> 时间：2013-01-30T16:23:00.723
> 
> 标签：c, fread, fseek

我想编写一个函数，在文件中用逗号分隔的数字创建整数数组，如下所示：

```
         1, 54520.00000, 86397.00000, 0
         2, 54440.00000, 87200.00000, 0
         3, 51280.00000, 97600.00000, 0
         4, 50000.00000, 100000.00000, 0
         5, 48880.00000, 100000.00000, 0
```

第一列是每一行的编号，所以我需要的数据实际上是接下来的三列。
我的问题是：

1.  由于我不知道数组的维度，所以我必须先读取最后一行的第一个数字。怎么做？我尝试使用 fseek 将我的文件指针指向文件末尾，然后找到前面的'\n'，但我不知道如何处理逗号。
2.  获得行数后，如何将所需的数据读入 N_row*3 数组？如何处理逗号和'\n'？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:37:26.980

您可以使用`fscanf()`

在循环中使用以下内容`fscanf()`，直到到达文件末尾：

```
int i,j
double x,y;
while (fscanf(fp, " %d , %f , %f , %d", &i, &x, &y, &j) != EOF) {....} 
```

# r - 在 R 中，什么时候正式声明一个 data.frame 是明智的？

> ID：14608766
> 
> 赞同：1
> 
> 时间：2013-01-30T16:23:36.667
> 
> 标签：r

在其他 R 代码中，通常会在循环开始之前看到 data.frame 声明。假设我有 2000 行的数据框 data1。在一个循环中，我通过 web 服务循环 data1 来创建一个新的 data.frame data2。（请不要推荐不使用循环）。在 data2$result 和 data2$pubcount 中，我需要为 2000 个 data1 项目中的每一个存储不同的值。

我必须在循环之前声明吗

```
data2=data.frame() 
```

我是否必须告诉 R 我稍后将使用多少行和哪些列？我知道可以在不声明的情况下添加列。行呢。这样做有没有优势：

```
data2<-data.frame(id=data1$id) 
```

我只想做我绝对必须声明和做的事情。为什么空声明在循环中给出错误一次？

稍后编辑：速度和内存不是问题。10s 与 30s 没有区别，我有一个不到 100MB 的数据和大型 PC (8GB)。矩阵不是一个选项，因为数据是数字和文本（混合），所以我必须使用非矩阵。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T16:37:49.663

像这样的东西：

```
df <- data.frame(a=numeric(n),b=character(n))

for (i in 1:n) {

#<do stuff>
df[i,1] <- ...
df[i,2] <- ...

} 
```

您应该避免在循环中操作 data.frames，因为 data.frames 的子集化是一个缓慢的操作：

```
a <- numeric(n)   
b <- character(n) 

for (i in 1:n) {

#<do stuff>
a[i] <- ...
b[i] <- ...

}
df <- data.frame(a,b) 
```

当然，通常有比`for`循环更好的方法。但强烈建议避免增长对象（我不会教你如何做到这一点）。如此处所示预分配。

为什么要预先分配？因为在循环中增长对象很慢，这也是人们认为 R 中的循环很慢的主要原因之一。

# html - 如何在 Windows 8 Webview 控件中使用 CSS？

> ID：14608767
> 
> 赞同：1
> 
> 时间：2013-01-30T16:23:37.117
> 
> 标签：html, c#-4.0, windows-8, windows-runtime, winrt-xaml

我有一个关于窗口的 8 个应用程序 Webview Control 的问题，是否有使用 css 来管理 webview 的外观，我在这里使用它来查看提供的 html 数据的返回内容，但是你可以看到它从所有CSS，那么无论如何我可以管理 Webview 的 CSS 吗？

更新：这是代码

```
void ItemListView_SelectionChanged(object sender, SelectionChangedEventArgs e)
        {

            //  this code to populate the web view
            //  with the content of the selected blog post.
            // I'm passing the selected item from the previous items' page
            // and then pouplate the web view with the selected item Contents of the feed 

            if (this.UsingLogicalPageNavigation()) this.InvalidateVisualState();

            Selector list = sender as Selector;
            FeedItem selectedItem = list.SelectedItem as FeedItem;
            if (selectedItem != null)
            {
                this.contentView.NavigateToString(selectedItem.Contents);
            }
            else
            {
                this.contentView.NavigateToString("");
            }  

        } 
```

![在此处输入图像描述](../Images/b5cf91d52c8e5632c5da6501f470b3f8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:30:42.257

如果您使用 NavigateToString() 导航 - 您可以将您的 css 放在您导航到的 html 字符串中。否则 - 它应该可以正常工作，我们需要更多关于你实际在做什么的细节。

# filter - 如何使用域列表过滤 OpenERP 中的数据

> ID：14608775
> 
> 赞同：12
> 
> 时间：2013-01-30T16:24:07.977
> 
> 标签：filter, expression, openerp

我想使用域过滤器表达式过滤 OPenERP 中的记录

在记录中，我有一个用户列表字段，所以我想获取用户登录列表的记录

```
[(user.id , 'in' , 'user_ids')] 
```

**这不起作用**

它返回此错误：

```
File "/usr/lib/pymodules/python2.7/openerp/osv/orm.py", line 2356, in search
    return self._search(cr, user, args, offset=offset, limit=limit, order=order, context=context, count=count)
  File "/usr/lib/pymodules/python2.7/openerp/osv/orm.py", line 4846, in _search
    self._apply_ir_rules(cr, user, query, 'read', context=context)
  File "/usr/lib/pymodules/python2.7/openerp/osv/orm.py", line 4728, in _apply_ir_rules
    rule_where_clause, rule_where_clause_params, rule_tables = rule_obj.domain_get(cr, uid, self._name, mode, context=context)
  File "/usr/lib/pymodules/python2.7/openerp/addons/base/ir/ir_rule.py", line 156, in domain_get
    query = self.pool.get(model_name)._where_calc(cr, SUPERUSER_ID, dom, active_test=False)
  File "/usr/lib/pymodules/python2.7/openerp/osv/orm.py", line 4676, in _where_calc
    e = expression.expression(cr, user, domain, self, context)
  File "/usr/lib/pymodules/python2.7/openerp/osv/expression.py", line 632, in __init__
    self.parse(cr, uid, context=context)
  File "/usr/lib/pymodules/python2.7/openerp/osv/expression.py", line 759, in parse
    field_path = left.split('.', 1)
AttributeError: 'int' object has no attribute 'split' 
```

请帮我。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-31T04:39:01.827

您的域语法错误。

它应该是`[('user_ids', '=' , user.id)]`

1.  搜索域中的每个元组需要有 3 个元素，格式为：`('field_name', 'operator', value)`，其中：

2.  **field_name**必须是对象模型的字段的有效名称，可能遵循使用点表示法的多对一关系，例如“street”或“partner_id.country”是有效值。

3.  **运算符**必须是具有此列表中有效比较运算符的字符串： `=, !=, >, >=, <, <=, like, ilike, in, not in, child_of, parent_left, parent_right` 大多数运算符的语义是显而易见的。操作员将根据该模型的语义（即默认情况下`child_of`遵循由 命名的关系字段）查找是给定记录的子或孙子的记录 。`self._parent_name``parent_id`

4.  **value必须是与****field_name**的值进行比较的有效值，具体取决于其类型。

域条件可以使用 3 个逻辑运算符组合，而不是可以在元组之间添加：' **&** '（逻辑与，默认），' **|** '（逻辑或），' **！**'（逻辑非）。这些是**前缀**运算符以及 ' **&** ' 和 ' **|** ' 运算符是 2，而 ' **!** ' 只是 1。第一次组合它们时要非常小心。

这是一个从比利时和德国搜索名为*ABC*且语言不是英语的合作伙伴的示例::

```
[('name','=','ABC'),'!',('language.code','=','en_US'),'|',('country_id.code','=','be'),('country_id.code','=','de')] 
```

**'&'**被省略，因为它是默认值，当然我们可以使用**'!='**作为语言，但这个域真正代表的是::

```
(name is 'ABC' AND (language is NOT english) AND (country is Belgium OR Germany)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-21T02:46:43.817

在一个简单的情况下这是正确的，但是如果你想通过它的功能字段过滤当前对象，你会很惊讶这个字段的函数中的代码不会执行；而是将执行该字段的 fnct_search 部分，这将允许您执行各种操作。

**过滤器表达式的**左侧部分在***当前对象*的上下文中进行评估，**右侧部分**在*内部上下文*的上下文中进行评估（读取当前用户）。**

 ****左侧部分在右侧****之后**进行评估，因此您可以将功能字段添加到用户模型，在那里进行一些计算，然后在对象一侧接收这些计算并考虑它们。

有关详细信息，请参阅此答案：[https ://stackoverflow.com/a/21336100/674557](https://stackoverflow.com/a/21336100/674557)**

# sql - 如何根据 SQL 中另一个字段的值将字段更改为负数

> ID：14608777
> 
> 赞同：2
> 
> 时间：2013-01-30T16:24:10.490
> 
> 标签：sql

使用下面的语句，我想如果是负数`[Invoice_Type_Code] = 'c'`，如果不是，那么它是正数。

```
SELECT [Invoice_Amount]
FROM [Forefront].[dbo].[VN_GL_DISTRIBUTION_HEADER_MC]
WHERE [Vendor_Code] ='  UnitedEL' and
[Date_List1]  > '2011-12-31' and
[Date_List1] < '2012-02-01' and
[Company_Code] = 'tmg' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T16:26:19.110

根据您的 RDBMS，使用`CASE`可以工作——大多数 RDBMS 应该支持它：

```
SELECT CASE WHEN  Invoice_Type_Code = 'C' THEN -1 ELSE 1 END * Invoice_Amount
FROM [Forefront].[dbo].[VN_GL_DISTRIBUTION_HEADER_MC]
where [Vendor_Code] ='  UnitedEL' and
[Date_List1]  > '2011-12-31' and [Date_List1] < '2012-02-01' and
[Company_Code] = 'tmg' 
```

这假设所有 Invoice_Amounts 都是正数。如果它们不是正数并且您仍然需要负值，请使用该`ABS`函数并稍微更改您的 case 语句。

这是[小提琴](http://sqlfiddle.com/#!2/9c5f4/1)。

祝你好运。

# ios - 应用程序是否可以查询为应用程序设置的通知样式？

> ID：14608782
> 
> 赞同：3
> 
> 时间：2013-01-30T16:24:21.393
> 
> 标签：ios

安装应用程序后，其通知样式默认设置为横幅。应用程序是否可以确定样式是否仍然是横幅或用户是否已将其设置为警报？

# iphone - 通过 NSJSONSerialization 下载 JSON 数据

> ID：14608783
> 
> 赞同：0
> 
> 时间：2013-01-30T16:24:21.693
> 
> 标签：iphone, json, sqlite, fmdb, nsjsonserialization

我有一个来自 PHP 的 JSON 字符串`json_encode()`。这是它在[JSONViewer.stack.hu](http://jsonviewer.stack.hu/#http://j4hm.t15.org/ios/jsonnews.php)中的样子，也是它在[浏览器](http://j4hm.t15.org/ios/jsonnews.php)中的样子。

是否可以使用 NSJSONSerialization 直接下载 JSON 数据？如果是这样，我将使用[FMDB](https://github.com/ccgus/fmdb)将下载的 JSON 数据保存到 SQLite 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:39:12.750

```
id jsonObjectFromUrlString(NSString *urlString)
{
    NSURL *url = [NSURL URLWithString:urlString];
    NSError *error = nil;
    id jsonObject = nil;
    NSData *data = [NSData dataWithContentsOfURL:url options:NSDataReadingUncached error:&error];
    if(error)
        NSLog(@"%@", error);
    else
        jsonObject = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableContainers error:&error];
    if(error)
        NSLog(@"%@", error);
    return jsonObject;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T16:56:20.937

JSON 序列化方法。请参考这个。 [JSON序列化](https://stackoverflow.com/a/10347317/696145)

对于数据库，您是否查看过 coredata。请看看这些。

[将核心数据添加到现有的 xcode 项目。](http://www.theappcodeblog.com/2011/08/08/add-core-data-to-an-existing-project-in-xcode-4/)

[使用 coreData 的简单介绍](http://remapps.net/2012/02/07/adding-core-data-to-a-project/)

# asp.net-mvc - 每个模块的工作单元

> ID：14608788
> 
> 赞同：1
> 
> 时间：2013-01-30T16:24:31.160
> 
> 标签：asp.net-mvc, entity-framework, repository-pattern

我目前正在构建一个 ASP.net MVC 应用程序，该应用程序已分解为多个模块（以及一个通用类库）。

我已经为我的第一个模块实现了一个工作单元模式。这个工作单元类包含许多不同的存储库。

但是，我想知道为每个模块设置一个单独的工作单元类是否是个好主意？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:31:16.077

请看[这个](http://www.mindscapehq.com/blog/index.php/2008/05/12/using-the-unit-of-work-per-request-pattern-in-aspnet-mvc/)和[这个](https://stackoverflow.com/questions/8921246/asp-net-mvc-3-best-practice-design) 工作单元实际上只是一种跟踪已加载到内存中的一组实体的方式。加载后，我们可以以正常方式处理实体：更改状态、添加新实体和删除其他实体。当我们准备好保存更改时，我们要求工作单元提交，它负责将未决更改“刷新”到底层数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:34:19.433

> 为每个模块设置一个单独的工作单元类是个好主意吗？

我的第一个想法是：一个模块的工作单元与另一个模块的工作单元有何不同？如果他们这样做了，他们可能不应该这样做，因为域应该不知道持久性，而数据层应该不知道业务逻辑。

以实体框架本身附带的 UoW 为例：上下文。[当您创建上下文、执行操作、调用`SaveChanges()`和处理它时，它就像 UoW 一样]。您可以为整个应用程序使用一个上下文类。您不会在上下文类中编写任何业务逻辑。因此，除非每个模块都使用数据库中真正不同的部分（这几乎不是真的），否则没有理由为每个模块设置一个上下文类。您自己创建的 UoW 也是如此。

这有点超出了您的问题范围，但是您可以问自己是否需要自己的 UoW 和存储库类，因为 EF 提供了两者的基本实现（上下文和`DbSets`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T08:13:06.853

好吧，EF 为您提供了自己实现的 UnitOfWork 和 Repository 模式。通常它们并不完全是您想要的，向原生 EF 存储库添加一些方法似乎很好，但在大多数情况下，这不值得麻烦。

如果您的项目很简单，那么基于 EF 实现您自己的存储库并不是一个好主意。它增加了很多工作，但没有那么多价值。

基于 EF 实现 UnitOfWork 是完全不同的故事。我能看到这样做的唯一原因是“对解决方案的不同部分有不同的 UoW”。避免它，否则，真的。

我们尝试添加这两种方法，而忽略我们项目中的预建方法。这是完全合理的，因为我们正在设计模块化解决方案，我们甚至不知道最终会有多少个模块。我们希望在系统已经运行且负载很重时向系统添加新模块。我可以说开发这样的应用程序花了很多时间。当您意识到您需要从某个模块访问更多实体时，会导致几个地方发生变化——这是低效设计的第一个证据。

所以，KISS 和 YAGNI 反对它。如果您被“我应该将这些东西添加到我的项目中”的问题所困扰 - 只是不要。你需要一个充分的理由来自己实现这些部分，而不仅仅是一些“好的设计”偏见，因为它增加了很多复杂性。即使你认为有一天你会需要它——等到那一天。如果您尝试估计哪种错误计算会造成更大的灾难性后果，我很确定在您的项目中添加新内容然后删除已经存在的内容要容易得多。

# windows - 在 Windows Power shell 脚本中编写 tsv 文件的优化方法是什么？

> ID：14608790
> 
> 赞同：1
> 
> 时间：2013-01-30T16:24:39.723
> 
> 标签：windows, powershell, powershell-3.0

我只是一个新手，ai写了一个小脚本来生成一个tsv txt文件。

## 代码是

```
$("x")+ "`t" +("y") + "`t"+ $("z")| Add-Content C:\temp\DCO.txt
$i=0
$ts= Get-Date
while($i -le 1000000)
{
$x="N/A"
$y="N/A"
$z="N/A"
($x) + "`t"+ ($y)+ "`t"+ ($z)| Add-Content C:\temp\DCO.txt
$i++
}
$tf= Get-Date 
```

* * *

这花了很多时间。如果有一些其他优化的方法来编写大小约为 50mb 或可能更大的 tsv 文件。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T16:38:01.060

我会使用 Export-CSV 来做到这一点。将您的值收集到对象并导出。前任：

```
#Create objects(think lines in a tsv) with properties and values
$o1 = New-Object psobject -Property @{
    Property1 = "Val1o1"
    Property2 = "Val2o1"
    Property3 = "Val3o1"
}

$o2 = New-Object psobject -Property @{
    Property1 = "Val1o2"
    Property2 = "Val2o2"
    Property3 = "Val3o2"
}

#Collect to array
$o = $o1, $o2

#Save to TSV
$o | Export-Csv "c:\test.tsv" -Delimiter `t -NoTypeInformation

#Add content
$o3 = New-Object psobject -Property @{
    Property1 = "Val1o3"
    Property2 = "Val2o3"
    Property3 = "Val3o3"
}

#Append to TSV-file
$o3 | Export-Csv "c:\test.tsv" -Delimiter `t -NoTypeInformation -Append

#To read file back to PowerShell objects
$a = Import-Csv "C:\test.tsv" -Delimiter `t 
```

测试.tsv

```
"Property1" "Property2" "Property3"
"Val1o1"    "Val2o1"    "Val3o1"
"Val1o2"    "Val2o2"    "Val3o2"
"Val1o3"    "Val2o3"    "Val3o3" 
```

# c# - 在 Umbraco 中显示最新条目

> ID：14608791
> 
> 赞同：1
> 
> 时间：2013-01-30T16:24:40.417
> 
> 标签：c#, xslt, umbraco

我是 Xslt 和 Umbraco 的新手。

我正在尝试从我的 umbraco 数据库中获取最新的条目，例如 4 个条目并将它们显示在主页上。在内容选项卡中输入的图像，标题，日期和正文，在一个页面中，应该相互关联。

使用 Xslt，我如何首先将图像、标题、日期和正文相互关联。其次，按日期显示最新的降序条目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T00:20:55.880

您创建一个文档类型（这包含节点的元数据，如图像、标题、正文、日期）；然后创建一个模板，其中包含穿插内容占位符（umbraco:item 或 umbraco:macro 位）的标记。

添加一个包含您的 xslt 的宏以显示最后四个项目；并将该宏放入模板中。

然后基于此文档类型/模板创建一些内容节点（在许多情况下，文档类型与模板的比例为 1:1）。

然后，您可以在这些内容节点中指定您在文档类型中设置的那些字段的内容。

我不再做任何 xslt - 我只在宏中使用 razor - 但你的宏看起来像：

```
 <xsl:for-each select="$currentPage/descendant-or-self::node [@nodeTypeAlias='itemType']">
    <xsl:sort select="data[@alias='createdDate']" order="descending" />
    <xsl:if test="position() &lt;= 4">
      <xsl:value-of select="@title" />
    </xsl:if>
  </xsl:for-each> 
```

# ios - iOS/Objective-C：如何混合委托和块？

> ID：14608796
> 
> 赞同：2
> 
> 时间：2013-01-30T16:24:50.913
> 
> 标签：ios, objective-c, delegates, objective-c-blocks

我有两节课。`Delegator`使用委托发送其结果。`Blocker`在静态方法中使用块。

在不改变的情况`Delegator`下，我怎样才能**优雅而轻松地**实现`methodWithBlock`，以便调用块时产生的结果`methodWithDelegate`？

**委托人：**

```
@class Delegator;

@protocol Delegate <NSObject>
- (void)delegator:(Delegator *)sender producedResult:(int)result;
@end

@interface Delegator : NSObject
@property (weak, nonatomic) id <Delegate> delegate;
- (void)methodWithDelegate;
@end

@implementation Delegator
- (void)methodWithDelegate
{
    // Some asynchronous computation resulting in
    [self.delegate delegator:self producedResult:42];
}
@end 
```

**拦截器：**

```
@interface Blocker : NSObject
+ (void)methodWithBlock:(void(^)(int result))block;
@end

@implementation Blocker
+ (void)methodWithBlock:(void(^)(int result))block
{
    // How to call Delegator's methodWithDelegate and return
    // the result using block ?
    ...
}
@end 
```

**探索的解决方案：**

*   包装`Delegator`成一个新的类或类别并创建一个返回块的方法，如[this answer](https://stackoverflow.com/questions/4824038/how-to-simplify-callback-logic-with-a-block#4840931)中所建议的那样。这些解决方案有效，但过于复杂和耗时。

*   `Blocker`符合协议`Delegate`并将块保存在属性中，在方法中实例化它，`methodWithBlock`并在调用委托方法时调用块。这不起作用，因为没有指向这个新实例的强指针并且它被破坏了。

*   在之前的解决方案中，为避免因缺少强指针而丢失实例，保留当前实例的静态数组`Blocker`并在委托回调方法中删除它们。同样，此解决方案有效，但过于复杂。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:31:49.913

使用可观察属性来传达结果，而不是委托和块属性。它更干净（也更容易），因为工作对象不必担心谁可能在看它。并且观察对象不必担心符合任何特殊协议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:50:58.987

优雅而简单的解决方案是只为您添加一个基于块的方法`Delegator`（例如通过一个类别）。我知道你说过你不能这样做，但是我们必须承认，任何其他基于块的解决方案，你正在创建新类以产生你想要的效果，但都没有通过优雅测试。

话虽如此，如果您迫切需要基于块的方法并且无法扩展`Delegator`，那么我会倾向于选项 2，除了创建这些类方法，将它们创建为实例方法，并`Blocker`实例化`Delegator`和定义包装器方法，以便类已经使用`Delegator`现在可以使用`Blocker`，但使用`completion`块而不是委托回调。而之前实例化的类`Delegator`现在可以实例化`Blocker`了。

# c# - 制作一个未知大小的数组 C#

> ID：14608797
> 
> 赞同：8
> 
> 时间：2013-01-30T16:24:51.890
> 
> 标签：c#, arrays

> **可能重复：**
> [C# 中未知长度的数组](https://stackoverflow.com/questions/599369/array-of-an-unknown-length-in-c-sharp)

我想创建一个程序，用户可以在其中输入项目，这些项目将存储在一个数组中。当用户对项目的数量感到满意时，如果他得到了每个项目，程序将询问他。

问题是我似乎无法创建一个大小未知的数组。我尝试使用这样的东西：`String[] list = new string[]{};`但是当程序运行到那里时，它会给出一个 IndexOutOfRangeException。

有没有办法我可以做到这一点？

这是完整的代码：

```
bool groceryListCheck = true;
        String[] list = new string[]{};
        String item = null;
        String yon = null;
        int itemscount = 0;
        int count = 0;

        while (groceryListCheck)
        {
            Console.WriteLine("What item do you wanna go shop for?");
            item = Console.ReadLine();
            list[count] = item;
            count++;
            Console.WriteLine("Done?");
            yon = Console.ReadLine();
            if (yon == "y")
            {
                groceryListCheck = false;
                itemscount = list.Count();
            }
            else
            {
                groceryListCheck = true;
            }
        }

        for (int x = 0; x < itemscount; x++)
        {
            Console.WriteLine("Did you got the " + list[x] + "?");
            Console.ReadKey();
        } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-30T16:26:24.647

使用 a[`List`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)而不是`array`.

```
List<string> myList = new List<string>();
myList.Add("my list item"); 
```

收集完所有项目后，您可以使用`foreach`循环遍历集合中的所有项目。

```
foreach(string listItem in myList)
{
    Console.WriteLine(listItem);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-30T16:27:02.787

A`List<string>`会更容易和更灵活。

`List` [这里](http://www.dotnetperls.com/list)有很多使用 a 的示例，向您展示了从中提取数据的各种方法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-30T16:28:08.810

您可以使用 a`List<string>`然后，如果您需要一个数组作为结果，您可以调用该`.ToArray()`方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T16:35:01.947

我发现将变量列表变成列表是有效的。例如：

```
 bool groceryListCheck = true;
        List<string> list = new List<string>();
        String item = null;
        String yon = null;
        int itemscount = 0;

        while (groceryListCheck)
        {
            Console.WriteLine("What item do you wanna go shop for?");
            item = Console.ReadLine();
            list.Add(item);
            Console.WriteLine("Done?");
            yon = Console.ReadLine();
            if (yon == "y")
            {
                groceryListCheck = false;
                itemscount = list.Count();
            }
            else
            {
                groceryListCheck = true;
            }
        }

        for (int x = 0; x < itemscount; x++)
        {
            Console.WriteLine("Did you got the " + list[x] + "?");
            Console.ReadKey();
        } 
```

那是完整的代码，它对我有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T16:28:15.110

为此，我会说您应该使用**Hashtable**。您可以根据需要添加到它，并且在创建它时不需要指定大小。有点像一个非常简单的数据库。

见： http: [//www.dotnetperls.com/hashtable](http://www.dotnetperls.com/hashtable)

# vba - VBA：从文档读取时如何将单词 ASCII A1 转换为网络报价

> ID：14608800
> 
> 赞同：0
> 
> 时间：2013-01-30T16:24:55.323
> 
> 标签：vba, ms-word

例如

在文档中是：

```
I am from "Moon" 
```

通过 VBA 阅读，“将是 ASCII A1，我使用 Replace change Chr(161) to web-displayed quote，但似乎没用。

VBA代码：

```
Value = .Rows(i).Cells(2).Range.Text
Value = Replace(Value, Chr(161), "&quot;") 
```

有谁知道怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:01:12.033

`Chr(161)`是¡，不是引号。如果要匹配 Windows-1262 大引号，则需要`Chr(147)`and `Chr(148)`。

# django - Django：连接到 API（Oauth）

> ID：14608806
> 
> 赞同：0
> 
> 时间：2013-01-30T16:25:09.900
> 
> 标签：django, git, oauth

我希望我的 Django 应用程序连接到一个名为 Buffer 的应用程序。我以前使用 python-twitter 库（[http://code.google.com/p/python-twitter/](http://code.google.com/p/python-twitter/)）直接连接到 Twitter，但我想同时发布到更多平台，因此 Buffer 似乎适合我的需要。

但是，我不知道如何实现这一目标。我用谷歌搜索了一下，发现我需要创建一个 oAuth 客户端（或者有人称之为消费者？），但这基本上就是我所在的位置。

因此，我的问题如下：我从哪里开始使用 oAuth 连接到 Buffer？

有没有一个库可以为我工作，比如 python-twitter 库？还是我需要从头开始？如果是这种情况，则需要一些指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:06:10.513

我最近不得不与 API 交互，并且使用[oauth2](https://github.com/simplegeo/python-oauth2)没有问题。pydanny 的[帖子](http://pydanny.com/the-sorry-state-of-python-oauth-providers.html)为您提供了一个概述，以及为什么您的决定可能比预期更难的一些背景知识。

# iphone - 如何编写返回值的单元测试用例

> ID：14608809
> 
> 赞同：0
> 
> 时间：2013-01-30T16:25:14.720
> 
> 标签：iphone

我有一个声明字典标签的类

这是在 FirstClass 类中声明的

```
-(NSDictionary *)getTags{

return tags;
} 
```

在单元测试中

我创建了 ocUnit 测试的 FirstClassTest 类

包括#import“FirstClass.h”

```
-(void)setUP{

    [super setUp];
// Allocations the class

_firstClass = [[FirstClass alloc]init];

}

-(void)tearDown{
_firstClass =nil;
    [super tearDown];

}
-(void)testDictationGetValue{
// Need to write Unit test for that class
[_firstClass getTags];

} 
```

这是我第一次写单元测试！谁能指导我编写正确的单元测试用例

@All 提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:50:32.837

首先，看起来您正在编写一个普通的吸气剂。这在现代 Objective-C 中没有多大意义：如果您只想返回指向实例变量的指针，请使用合成的 getter（并删除`get`前缀）。

第二，你想在这里测试什么？如果您只是想测试 getter 是否确实返回了一些字典，那么该测试基本上是无用的。也许标签是根据其他值计算的？然后设置这些值并检查标签字典的计算是否正确。永远不要仅仅为了他们自己而写测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T06:12:27.803

它应该是！！！

```
 -(void)testDictationGetValue
    {

        _firstClass = nil;
        _firstClass = [[FirstClass alloc] init];

        NSDictionary *t_dictionary = [_firstClass getTags];

        if (t_dictionary == nil) {
            STAssertNil(nil, @"TestFailed return value is nil");

        }

        else {
            STAssertNotNil(t_dictionary, @"Retrun value");

        }
     } 
```

# jquery - jQuery Mobile $.mobile.changePage() 在天堂的麻烦（不改变页面）

> ID：14608811
> 
> 赞同：0
> 
> 时间：2013-01-30T16:25:20.483
> 
> 标签：jquery, jquery-mobile, event-handling

我有一个简单的登录表单。2 个 php 文件`mobile.login.php`和`mobile.home.php`. 您登录，如果设置了 cookie，您现在可以访问主页。登录系统正常工作，但页面不会变为`mobile.home.php`，它只是再次显示登录表单。表单是 Ajax，代码如下：

```
<script type="text/javascript">
$('#login').live('pageinit', function() {
    $('form').live('submit', function(e){
        e.stopPropagation();
        e.preventDefault();

        $.post($(this).attr('action'), $(this).serialize(), function(data){
            if(data.success) {
                //$.mobile.changePage($('#home'), { transition: 'slideup'});
                $.mobile.changePage('mobile.home.php', 'slide', false, true);
                e.preventDefault();
            } else {
            alert('Login failed.');
            return false;
            }
       }, 'json');
    });
});
</script> 
```

我已经尝试了很多东西。如您所见，我有 2 个选项可以更改代码中的页面，其中一个已被注释掉。被注释掉的那个，什么也没有发生。活动代码再次将 url 更改为登录表单`mobile.home.php`。`slides up`两者`mobile.login.php`都有`mobile.home.php`页面 divs `id's`。

我似乎无法弄清楚这一点，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:47:55.683

这应该是你的问题：

```
$.mobile.changePage('mobile.home.php', 'slide', false, true);
e.preventDefault(); 
```

Dont use **e.preventDefault();** here, it will prevent a successful transition.

Here's a simple example: [http://jsfiddle.net/WWfEq/](http://jsfiddle.net/WWfEq/)

Comment/Uncomment **e.preventDefault();** to see a difference.

# git - 如何使用 Intellij IDEA 进行交互式 rebase？

> ID：14608812
> 
> 赞同：14
> 
> 时间：2013-01-30T16:25:23.333
> 
> 标签：git, intellij-idea

我想做一个分支的交互式变基，例如：

```
git rebase -i HEAD~4 
```

在 IntelliJ IDEA 中找不到这样做的方法。如果这可能的话，请提出建议。谢谢你。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-07-17T10:37:51.140

IntelliJ 12.1 中的 rebase 对话框使用最通用版本的 rebase 命令：

```
git rebase [-i] [--onto newbase] [upstream] [branch] 
```

其中 IntelliJ 的“Onto”字段对应于`--onto newbase`，IntelliJ 的“From”字段对应于“upstream”，IntelliJ 的“Branch”字段对应于“branch”。

在上面的 git rebase 命令中，所有参数都是可选的，而在 IntelliJ 中则不是。这意味着您必须使用 git rebase 命令并使用上面显示的一般形式来表达它。

请注意，您对 rebase 命令的参数所做的实际操作是定义将在新目标位置重放的提交范围。一般来说，范围是`upstream..branch`。如果你不熟悉提交范围，你应该阅读它们。

让我们看一下您的示例并假设您在分支“分支”上：

```
git rebase -i HEAD~4 
```

让我们首先弄清楚哪个是范围。由于您只有一个参数，`HEAD~4`因此这对应于上游，即范围是`HEAD~4..branch`或换句话说`HEAD~4..HEAD`在分支“分支”上。现在的问题是哪个是您的 --onto 目标。如果你避免`--onto`，那么 git 会假设你的上游也是你的`--onto`.

这产生：

```
git rebase -i --onto HEAD~4 HEAD~4 branch 
```

现在您可以使用填写 IntelliJ 的变基对话框

*   上：`HEAD~4`
*   从：`HEAD~4`
*   分支：`branch`

IntelliJ 实际上迫使您首先思考并确定您的范围和目标，这看起来更复杂，但这会阻止您在不了解结果的情况下进行 rebase。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-08-20T07:01:42.727

`git rebase -i` 如果您对命令不太熟悉，可以使用 Intellij IDEA 中给定的 UI 功能。

在版本控制工具窗口下打开版本控制选项卡（`View -> Tool windows -> Version Control` 或使用）转到日志选项卡。`Alt+9`选择要在其中开始 rebase 的提交右键单击提交并选择选项`interactively rebase from here`

从显示的对话框中选择您要执行的操作并执行 rebase :) [![在此处输入图像描述](../Images/b977ed5276a97ab82d12f04c4d40acc8.png)](https://i.stack.imgur.com/HwZyb.png)

# java - 将代码更新到 4.1

> ID：14608813
> 
> 赞同：1
> 
> 时间：2013-01-30T16:25:24.560
> 
> 标签：java, android, httpurlconnection

此代码在 2.2 模拟器 (API 8) 中运行良好，但在 4.1 模拟器 (API 16) 中无法运行。任何想法？

感谢您的所有回答和兴趣

```
 `try 
    {   
        String url = "http://10.0.2.2:8080/cofradeapps/static/hermandades.xml";
        urlHermandades = new URL(url);
        HttpURLConnection urlConnection = (HttpURLConnection) urlHermandades.openConnection();  
        InputStream in = urlConnection.getInputStream();
        return in;
    } 
    catch (IOException e) 
    {
        throw new RuntimeException(e);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:34:10.857

您无法在较新版本的 Android 上的 UI 线程上进行联网，您需要使用另一个线程，很可能是 ASyncTask。

```
private class YourClass extends AsyncTask<URL> {
     protected String doInBackground(URL... urls) {

         //Do your stuff here

     }

     protected void onProgressUpdate(Integer... progress) {
         setProgressPercent(progress[0]);
     } 

     protected void onPostExecute(Long result) {
         //When you're finished update the UI thread with your results
     }
} 
```

# mysql - Mysql 表自动填充字段

> ID：14608815
> 
> 赞同：0
> 
> 时间：2013-01-30T16:25:29.217
> 
> 标签：mysql, autofill

我有一个与 mysql 后端数据库耦合的访问前端。谁能告诉我是否有可能生成一个自动填充列的mysql表（即）一旦在A列中添加了一个条目，B列将使用默认文本值自动填充？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:30:45.500

MySQL 确实支持列的默认值。但是，如果不使用触发器，它将无法有条件地执行此操作（即基于其他列中的值的某个值）。要更改列上的默认值，您可以运行如下查询：

```
ALTER TABLE table_name
ALTER COLUMN column_name
SET DEFAULT 'default value' 
```

# ruby - 在 Windows 上从“我的文档”打开文件

> ID：14608816
> 
> 赞同：1
> 
> 时间：2013-01-30T16:25:35.053
> 
> 标签：ruby, sketchup

我正在为草图编写插件。我找不到从`My Documents`Windows 目录附加文本文件的简单方法。我遇到的问题是：

*   使用当前用户名打开
*   Windows 版本之间的差异。

我需要代码在`My Documents`32 位机器上的 Windows 7 上以附加模式打开文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T16:55:50.767

您可以在 Ruby 中使用反引号 ` 对系统运行命令行。然后它将返回调用的结果。

[这是Ruby-Doc.org](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-60)上的官方描述

> 返回在子 shell 中运行 cmd 的标准输出。内置语法 %x{...} 使用此方法。设置 $? 到进程状态。

```
`echo` #=> 'ECHO is on.' if ran on Windows 
```

在 Windows 中，您可以使用一些[特殊变量](http://ss64.com/nt/syntax-variables.html)来收集用户名等信息：

```
echo %username% 
```

因此，您可以使用这两个来收集用户的“我的文档”文件夹的位置（前提是它们在 Windows 上）。

```
# Tested on Windows XP and 7
my_documents = File.join(`echo %userprofile%`.chomp, "My Documents") 
```

**注意：** Ruby 中还有一个方法可以进行系统调用，即[`system`](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-system). 但是，这会返回一个布尔值，在您的情况下不起作用。

另请注意，此解决方案**仅**适用于 Windows。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T16:47:28.713

```
file = File.open(ENV['userprofile'] + "\\My Documents\\file.txt", "a")
file.puts "text to append"
file.close 
```

* * *

**编辑：**
[用户文档的默认位置](http://en.wikipedia.org/wiki/Special_Folders#File_system_directories)是：

**在 Windows 98 和 Windows Me**
`C:\My Documents`
**上 在 Windows 2000 和 Windows XP**
`%USERPROFILE%\My Documents`
**上 在 Windows Vista 和更高版本上**
`%USERPROFILE%\Documents`

> ****Windows XP**或**更早版本的****非英语**版本将使用适合该语言的目录名称。**

 **您可以在 Windows 注册表中找到非英语系统上[的正确路径：](https://stackoverflow.com/a/3492996/1136008)

```
require 'win32/registry'
reg_path = 'Software\Microsoft\Windows\CurrentVersion\Explorer\Shell Folders'
reg = Win32::Registry::HKEY_CURRENT_USER.open( reg_path )
right_path = reg['Personal']    # => C:\Documents and Settings\addo\Dokumenty 
```**

# c# - 在 Spy++ 中，控件的名称是什么值？

> ID：14608818
> 
> 赞同：1
> 
> 时间：2013-01-30T16:25:49.307
> 
> 标签：c#, .net-4.5, ui-automation, spy++

我正在使用 System.Windows.Automation 从组框中的标签中获取一些 UI 控件文本值。我正在尝试使用 spy++ 来获取我正在寻找的控件名称。

![在此处输入图像描述](../Images/f870f2dbd8292ca0b30b78beb36da507.png)

```
AutomationElement Root = AutomationElement.RootElement;
AutomationElement MainForm = Root.FindFirst(TreeScope.Descendants,new PropertyCondition(AutomationElement.AutomationIdProperty,"control name im looking for")); 
```

什么值代表我要搜索的内容？例如，我会将其更改为... ...AutomationIdProperty,"Window 00031BB0"));

我不确定 spy++ 提供的所有信息实际上代表什么。

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T17:31:17.467

您正在寻找[UI Automation Inspector](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318521%28v=vs.85%29.aspx)，它是 Windows SDK 的一部分，它显示了完整的 UI 自动化树。

# java - Vaadin 中的本地选择语言环境

> ID：14608819
> 
> 赞同：1
> 
> 时间：2013-01-30T16:25:50.850
> 
> 标签：java, vaadin

我正在使用**Vaadin**。我想使用 Native Select 在语言环境之间切换。

```
@Override
public void valueChange(ValueChangeEvent event) {
    UI.getCurrent().setLocale(loc);
} 
```

我想使用`event.getProperty()`，但“loc”必须是 Locale 类型。如何获取本地选择的值并将其转换为区域设置类型？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T19:28:39.343

我猜你是这样填充`NativeSelect`的：

```
 nativeSelect.addItem(Locale.ENGLISH);
  nativeSelect.addItem(Locale.GERMAN); 
  ...
  // you can also use setItemCaption(objectId, caption) method to give humanized  
  // caption to each item in NativeSelect. 
```

之后，您可以`Property.ValueChangeListener`向`NativeSelect`组件添加一个：

```
 nativeSelect.addListener(new Property.ValueChangeListener() {

        @Override   
        public void valueChange(ValueChangeEvent event) {
            Locale loc = (Locale) event.getProperty().getValue();
            UI.getCurrent().setLocale(loc);
        }

  }); 
```

# c# - 如何等到将值添加到 ConcurrentDictionary 或发生超时？

> ID：14608820
> 
> 赞同：5
> 
> 时间：2013-01-30T16:25:55.417
> 
> 标签：c#, multithreading, data-structures

我有一个任务应该等到一个值被添加到 ConcurrentDictionary。如果添加了值，它应该停止等待并继续其工作。如果发生超时（例如 5 秒），它也应该停止等待。

该值应该由另一个线程/任务添加到 ConcurrentDictionary，但是，由于代码的性质，我不希望线程相互通信。

我应该如何实现这个（在 C# 中）？

顺便说一句，我在大多数情况下使用的是任务，而不是线程，因此我不确定当前线程上的 Thread.Sleep 或其他方法是否是一个好的决定，因为它可能会休眠使用相同线程的其他任务并导致随机问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T17:12:31.173

我认为“等待”将元素添加到集合中通常是一件坏事。通常，这样做意味着线程被阻塞了一段时间。如果它甚至可能，那么你必须处理超时。如果无法检测到超时，那么您必须处理中止线程以中止等待（您永远不想陷入线程被无限期阻塞的情况），例如取消。

`ConcurrentDictionary`本身是线程安全的；但这并不能使*所有*使用`ConcurrentDictionary`线程安全的代码。`ConcurrentDictionary`使用对象 时仍需要考虑应用程序特定的线程安全要求。`ConcurrentDictionary`不可能实现那些类型的东西。将值添加到字典时的操作也非常相似——在添加新值时等待或通知外部代码的开销会导致所有使用的`ConcurrentDictionary`速度变慢，即使是那些不需要等待或不使用的使用不需要通知——所以这样的事情没有实现。应用程序添加一个值*并*需要通知该值*已被通知的事实*added 可能非常少见（从字典的角度来看，为什么它会告诉您*您**刚刚*添加了一个值......）。因此，这种特定于应用程序的事情通常在应用程序级别完成。即使用并发字典的事实是巧合，您的应用程序通知其他线程另一个线程已经完成了他们需要知道的事情。`ManualResetEventSlim.Reset`这可能意味着通过调用/来包装添加到字典实例中，并且可以通过覆盖`Set`来等待。`ManualResetEventSlim.Wait`或者，它可能只是编写一个事件，只要将值添加到字典中就会引发该事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T16:31:58.927

我不相信`ConcurrentDictionary`为这样的事情提供任何钩子。

你可能*会*包装或派生`ConcurrentDictionary`来提供这个，但我会担心这样做。

低技术的替代方法是简单地轮询-循环，检查然后休眠，直到找到正确的值或超时。从效率的角度来看，它远非很好，但如果它不会给您带来任何其他问题，它可能是最简单的方法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-30T16:37:38.213

这就是睡眠轮询的工作方式。又快又脏。:)

```
System.Collections.Concurrent.ConcurrentDictionary<string,string> dic = new System.Collections.Concurrent.ConcurrentDictionary<string,string>();

int timeoutCount = 0;
bool hasTimedOut = false;
while (!dic.ContainsKey("KeyYouAreLookingFor"))
{
    //5 minutes has expired
    if (timeoutCount >= 10)
    {
        hasTimedOut = true;
        break;
    }

    //30 second sleep or whatever you want your poll time to be
    System.Threading.Thread.Sleep(30000);
    timeoutCount++;
}

if (hasTimedOut)
{
    //TODO: timeout code
}
else
{
    //TODO: Key has been added
} 
```

# ftp - 使用 FTE 将文件从 Windows 传输到 HP NonStop

> ID：14608821
> 
> 赞同：1
> 
> 时间：2013-01-30T16:25:58.607
> 
> 标签：ftp, websphere-mq-fte

我必须使用 FTE v7.5 将文件从 Windows 系统移动到 HP NonStop [Tadem] 服务器，反之亦然。由于 Tandem 支持的最新 MQ 版本是 MQv5.3，它没有 FTE，我无法安装 FTE 客户端版本并在其中配置代理。是否有任何支持 pac 可以使这成为可能。？？有什么建议么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T16:34:45.320

不是这个时候。一种解决方案是在 HP 服务器有权访问的共享驱动器上交付/检索文件。另一种方法是使用 FTE 协议桥代理以将 HP FTP 服务器用作端点来传递/检索文件。

回应评论，这是使用 FTE 协议桥将文件发送到托管 FTP 服务器的 HP-Non-Stop 服务器的一种方式。请注意，两个 FTE 代理都与 Windows 上的同一个 QMgr 通信。 ![在此处输入图像描述](../Images/c88af866271f2dcbc2f6771806567677.png)

# html - 无法删除页脚中的填充

> ID：14608835
> 
> 赞同：7
> 
> 时间：2013-01-30T16:26:28.987
> 
> 标签：html, css

我的页脚似乎有某种类型的虚构（页脚 div 顶部的不需要的填充...如果您需要我的意思的示例，请访问我的网站）填充它。如果您查看我的示例[链接](http://www.nerissagrigsby.com/wp-content/themes/twentytwelve/Sample.html)，您将看到我所指的内容。

```
<div id="footer">

<div id="Social">

<img src="img/Follow.png" width="339" height="21" alt="Follow on Social" style="position: relative; display:block;" />

<ul>
<li class="Twitter"><a href="#" target="_blank">Twitter</a></li>
<li class="Facebook"><a href="#" target="_blank">Facebook</a></li>
<li class="Youtube"><a href="#" target="_blank">Youtube</a></li>
<li class="Linkdin"><a href="#" target="_blank">Linkdin</a></li>
</ul> 

</div> <!-- Social -->

<div style="clear:both"></div>
</div> <!-- footer -->

My CSS:

#footer {
background-image:url(img/FooterBG.png);
height: 92px;
position: relative;
z-index: 10;    
padding: 0 35px;
left: 0px;
top: 82px;
}

#Social {
float: left;
width: 339px;
}

/* Social Links */

.Twitter a {
background-image: url(http://www.nerissagrigsby.com/wp-content/themes/twentytwelve/img/Twitter.png);
overflow: hidden;
text-indent: -999px;
display: block;
width: 42px;
height: 27px;
}

.Twitter a:hover {
background-position-y: 27px;

}

.Facebook a {
background-image: url(http://www.nerissagrigsby.com/wp-content/themes/twentytwelve/img/Facebook.png);
overflow: hidden;
text-indent: -999px;
display: block;
width: 18px;
height: 31px;
 }

 .Facebook a:hover {
background-position-y: 31px;
 }

 .Youtube a {
background-image: url(http://www.nerissagrigsby.com/wp-content/themes/twentytwelve/img/YouTube.png);
overflow: hidden;
text-indent: -999px;
display: block;
width: 29px;
height: 30px;
 }

 .Youtube a:hover {
background-position-y: 30px;
 }

 .Linkdin a {
background-image: url(http://www.nerissagrigsby.com/wp- content/themes/twentytwelve/img/LinkedIn.png);
overflow: hidden;
text-indent: -999px;
display: block;
width: 28px;
height: 29px;
}

.Linkdin a:hover {
background-position-y: 29px;    
}

#Social ul li {
display: inline-block;
margin-right: 24px; 
}

#Social ul {
margin: 12px 0 0 0;
padding: 0;
} 
```

如何删除此填充？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T23:39:04.303

摆脱顶部：82px；

```
 #footer {
 background-image:url(img/FooterBG.png);
 height: 92px;
 position: relative;
 z-index: 10;    
 padding: 0 35px;
 left: 0px;
 /* top: 82px; */
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:46:02.870

@Herbert Peters 我不明白为什么会有那个*假想的边界*。但是，如果你删除

```
 <div style="clear:both"></div> 
```

那么它**就不存在了**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T16:54:13.300

只需将边距/填充设置为 0 或负值（尝试 -1，然后增加直到消失）以获取所需方向

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T04:36:43.943

您可以尝试使用[css 重置](http://meyerweb.com/eric/tools/css/reset/)

您也可以尝试使用：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge"> 
```

以防万一它是一个 Internet Explorer 问题。

# iphone - 在 Xcode 中关闭模态视图并更改选项卡

> ID：14608836
> 
> 赞同：0
> 
> 时间：2013-01-30T16:26:34.960
> 
> 标签：iphone, ios, xcode

我正在寻找一种方法来关闭模式视图并切换到选项卡栏上的特定选项卡。

我觉得我需要结合......

```
self.tabBarController.selectedIndex = 3; 
```

和

```
self.dismissModalViewControllerAnimated:YES; 
```

两者都单独工作，但结合起来就不行了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:30:20.337

在为已关闭的控制器调用 viewDidDisappear 或 viewWillDisappear 时设置选项卡栏的选定索引如何？这样，它们不会被召集在一起，而是会一个接一个地发生

# google-apps-script - 谷歌脚本数组拆分

> ID：14608837
> 
> 赞同：0
> 
> 时间：2013-01-30T16:26:35.567
> 
> 标签：google-apps-script, google-sheets

我有一个快速的人可以提供帮助。我从雅虎下载了一些数据。我想将数据拆分为 N x 7 数组。（这是正确的术语吗？）。我希望它看起来像这样：

[[2013-01-29,64.25,65.03,64.00,64.24,4883100,64.24],[2013-01-28,64.51,64.87,63.27,64.59,7591300,64.59],...]

但现在，如您所见，它不是那种格式。JavaScript 新手。请帮忙。

```
function function() {
var ticker='YUM';
var startMonth=0; var startDate=1; var startYear=2013;
var endMonth=0; var endDate=25; var endYear=2013;
var fetchString="http://ichart.finance.yahoo.com/table.csv?s="+ticker+"&a="+startMonth+"&b="+startDate+"&c="+startYear+"&d="+endMonth+"e="+endDate+"&f="+endYear+"&g=d";
var response = UrlFetchApp.fetch(fetchString);
a=response.getContentText();
var allData = a.slice(a.indexOf("2013"));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:46:05.867

假设您不想要列标题，这是一个单行更改：

```
var allData = a.match(/(.*?)\n/g)       // convert each line to a row
               .splice(1)               // remove headers row
               .map(function(row){ 
                  return row.replace(/\n/,'').split(','); 
               });                      // convert row string to array 
```

# c# - 跨多个方法使用 SQLConnection（'using' 关键字是或否）

> ID：14608840
> 
> 赞同：3
> 
> 时间：2013-01-30T16:26:48.667
> 
> 标签：c#, .net, using, sqlconnection

我想在类中重复使用相同的 SQLConnection accros 不同的方法。我现在正在做的（仅测试）是在构造函数中创建和打开一个连接：

```
SQLConnection Connection;

Constructor(string connection_string)
{
    this.Connection = new SqlConnection(connection_string);
    this.Connection.Open();
} 
```

然后我在方法中使用“this.Connection”，最后在不再需要对象时使用 this.Connection.Close() 和 Dispose()。据我所知，在这样的每个方法中使用“使用”会更干净（构造函数只会设置连接字符串）：

```
using (SqlConnection connection = new SqlConnection(connection_string)) {
 connection.Open(); ...
} 
```

由于连接池，实际上只使用了一个连接，尽管上面的“使用”行被放置在多个方法中（例如，当它们被一个接一个地调用时），对吗？但是，这不会创建许多只需要一个的 SQLConnection 实例吗？例如：

```
MyClass obj(some_string);
obj.Method1(); // calls 'using SqlConnection connection = new SqlConnection'
obj.Method2(); // calls 'using SqlConnection connection = new SqlConnection'
obj.Method3(); // calls 'using SqlConnection connection = new SqlConnection' 
```

那么共享 SQLConnection 的正确、最佳方式是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T16:31:28.540

你对你所有的陈述都是正确的。但是，您遗漏了重要的一点：**在 .NET 中创建大量类型的实例不一定是坏事**！

*   您**不应**在构造函数中创建单个连接实例
*   您**应该**在需要时在本地创建连接
*   创建一次性对象时使用范例是**最佳实践**`using`
*   您**应该**养成对`try...finall`块中的一次性对象调用 Dispose 的习惯（如果不使用`using`） - 以防您的特定场景不能很好地使用`usings`; 例如使用异步方法）
*   最后，您**不应该**让 SQL 连接保持打开的时间超过您需要的时间。同样，只需利用 SQL Server 的 ADO.NET 提供程序中的连接池

现在，创建大量 Connection 类型的实例不是问题的原因是因为在 .NET CLR 中创建对象是经过优化的（快速内存分配和对象实例化）并且相对无痛（无需担心释放内存，这要归功于垃圾收集）.. 在使用 ADO.NET 提供程序的情况下，您还可以享受连接池的好处，因此您不必担心管理此类型的实例数量。

很明显，在其他情况下（例如重/大对象）创建大量对象可能会对内存压力和性能产生影响。所以总是尽可能地评估情况..

# c# - C# ListView DragDrop - 多种拖放方法

> ID：14608842
> 
> 赞同：1
> 
> 时间：2013-01-30T16:26:53.917
> 
> 标签：c#, drag-and-drop

我有两个 ListView。一个选项可以拖入另一个选项。这是“字段”ListView。另一个是“builder” ListView。我遇到的问题是我不能将 ListViewItem 插入到用户拖动它的位置，并且如果他们将其拖动到空白处，也不能将其添加到底部。我可以在这个时候做一个或另一个。我需要一个解决方案。

```
private void builder_DragEnter(object sender, DragEventArgs e)
{
    e.Effect = DragDropEffects.Move;
}

private void fields_DragEnter(object sender, DragEventArgs e)
{
    e.Effect = DragDropEffects.Move;
}

private void fields_ItemDrag(object sender, ItemDragEventArgs e)
{
    fromBuilder = false;
    fields.DoDragDrop(e.Item, DragDropEffects.Move);
}

private void builder_ItemDrag(object sender, ItemDragEventArgs e)
{
    fromBuilder = true;
    builder.DoDragDrop(e.Item, DragDropEffects.Move);
}

private void builderAndFields_DragDrop(object sender, DragEventArgs e)
{
    ListViewItem i = new ListViewItem();
    i = e.Data.GetData(typeof(ListViewItem)) as ListViewItem;

    // Since this function works for both the builder and the fields,
    // we have to check to see where we are dropping, the sender
    // is the ListView we are dropping onto
    if (sender.Equals(builder))
    {
        ListViewItem c = new ListViewItem();
        c = (ListViewItem)i.Clone();
        Point cp = builder.PointToClient(new Point(e.X, e.Y));
        Console.WriteLine("cp: " + cp);
        ListViewItem dragToItem = builder.GetItemAt(cp.X, cp.Y);
        Console.WriteLine("dragToItem: " + dragToItem);
        int dropIndex = dragToItem.Index;
        // Now, we have to check to see if we are reordering or adding
        // So, we check the flag to see if the dragDrop was initiated 
        // on the builder or on the fields ListView
        if (fromBuilder)
        {
            builder.Items.Insert(dropIndex, c);
            builder.Items.Remove(i);
        }
        else
        {
            // ## Problem - Attempted solution ##
            if (String.IsNullOrWhiteSpace(dragToItem.ToString()))
                builder.Items.Add(c);
            else
            {
                Console.WriteLine(dropIndex);
                builder.Items.Insert(dropIndex, c);
            }
        }
    }
    // If the sender is the fields listView, the user is trying to remove
    // the item from the builder.
    else
    {
        builder.Items.Remove(i);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:50:03.260

谢谢你的评论汉斯。这很有帮助！这是我遇到的两个问题的解决方案。另一个是能够重新排序 ListView 并将项目拖到列表的底部。

```
// Generic DragEnter
private void ddEnter_DragEnter(object sender, DragEventArgs e)
{
    e.Effect = DragDropEffects.Move;
}

// ItemDrag Events
private void fields_ItemDrag(object sender, ItemDragEventArgs e)
{
    fromBuilder = false;
    fields.DoDragDrop(e.Item, DragDropEffects.Move);
}

private void builder_ItemDrag(object sender, ItemDragEventArgs e)
{
    fromBuilder = true;
    packetBuilder.DoDragDrop(e.Item, DragDropEffects.Move);
}

// DragDrop Events
private void builderAndFields_DragDrop(object sender, DragEventArgs e)
{
    ListViewItem i = new ListViewItem();
    i = e.Data.GetData(typeof(ListViewItem)) as ListViewItem;

    // Since this function works for both the builder and the fields,
    // we have to check to see where we are dropping, the sender
    // is the ListView we are dropping onto
    Console.WriteLine(sender.Equals(packetBuilder));
    if (sender.Equals(packetBuilder))
    {
        ListViewItem c = new ListViewItem();
        c = (ListViewItem)i.Clone();
        Point cp = packetBuilder.PointToClient(new Point(e.X, e.Y));
        // Now, we have to check to see if we are reordering or adding
        // So, we check the flag to see if the dragDrop was initiated 
        // on the builder or on the fields ListView
        Console.WriteLine(fromBuilder);
        if (fromBuilder)
        {
            if (packetBuilder.HitTest(cp).Location.ToString() == "None")
            {
                packetBuilder.Items.Add(c);
                packetBuilder.Items.Remove(i);
            }
            else
            {
                ListViewItem dragToItem = packetBuilder.GetItemAt(cp.X, cp.Y);
                int dropIndex = dragToItem.Index;
                packetBuilder.Items.Insert(dropIndex, c);
                packetBuilder.Items.Remove(i);
            }

        }
        else
        {
            if (packetBuilder.HitTest(cp).Location.ToString() == "None")
                packetBuilder.Items.Add(c);
            else
            {

                ListViewItem dragToItem = packetBuilder.GetItemAt(cp.X, cp.Y);
                int dropIndex = dragToItem.Index;
                packetBuilder.Items.Insert(dropIndex, c);
            }
        }
    }
    // If the sender is the fields listView, the user is trying to remove
    // the item from the builder.
    else
    {
        packetBuilder.Items.Remove(i);
    }
} 
```

# r - R Plyr 包中变量（即“变量”）前点的目的是什么？

> ID：14608844
> 
> 赞同：17
> 
> 时间：2013-01-30T16:26:57.107
> 
> 标签：r, plyr

R Plyr 包中变量（即“变量”）前点的目的是什么？

例如，来自 R 帮助文件：

```
ddply(.data, .variables, .fun = NULL, ...,
    .progress = "none", .drop = TRUE, .parallel = FALSE) 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-30T17:33:02.677

可能有两件事让你感到困惑。

一个是`.`“plyr”包中的函数。该`.`函数允许您将变量用作链接，而不是引用变量包含的值。例如，在某些函数中，我们希望引用对象`x`而不是存储在`x`. 在 'base' 包中，没有简单、简洁的方法来做到这一点，所以我们使用 'plyr' 包来表示`.(x)`. 'plyr' 函数本身很像这样使用它：

```
ddply(data, .(row_1), summarize, total=sum(row_1)) 
```

如果我们不使用该`.`函数，'ddply' 会抱怨，因为 'row_1' 包含许多值，而我们真的只想引用该对象。

另一个 ”。” 这里的实际操作是人们将它用作函数参数名称中的字符的方式。我不确定起源是什么，但很多人似乎只是为了突出显示哪些变量是函数参数以及哪些变量只是函数内部代码的一部分。这 ”。” 只是另一个字符，在这种情况下。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-30T16:39:07.050

来自[http://www.jstatsoft.org/v40/i01](http://www.jstatsoft.org/v40/i01)

请注意，所有参数都以 . 这可以防止名称与处理函数的参数发生冲突，并有助于直观地描述控制重复的参数和控制各个步骤的参数。为此目的，基本 R 中的某些函数使用所有大写的参数名称，但我认为这种方法更易于键入和阅读。

# node.js - Node.js TypeError：对象不是函数

> ID：14608845
> 
> 赞同：3
> 
> 时间：2013-01-30T16:26:58.937
> 
> 标签：node.js, mongodb

我正在尝试运行[Mike Wilson 的](http://shop.oreilly.com/product/0636920026587.do)图书示例应用程序，但收到以下错误：

```
pcassiano@...:~/socialnet$ sudo node app.js

/home/pcassiano/socialnet/app.js:60
  require('./routes/' + routeName)(app, models);
                                  ^
TypeError: object is not a function
    at /home/pcassiano/socialnet/app.js:60:35
    at Array.forEach (native)
    at Object.<anonymous> (/home/pcassiano/socialnet/app.js:57:26)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.runMain (module.js:492:10)
    at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

我正在运行[本书 repo](https://github.com/Swiftam/book-node-mongodb-backbone)中的最新代码。

我应该怎么做才能正确运行这个示例应用程序？

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-02T17:28:03.043

您可能`.js`在`routes`目录中有不导出函数的文件。

`app.js`正在调用目录`require`中的所有文件，`routes`然后将它们作为函数调用。因此，如果这些文件中的任何一个不遵循下面的一般模式，您将收到您所看到的错误：

```
module.exports = function(app, models) {
  // Add this file's routes using app.get, etc. calls.
  ...
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T23:05:22.650

错误报告的值`require('./routes/' + routeName)`不是函数。所以你只有一个真正可能的问题根源。

如果`'./routes/'+routeName`不存在，节点应该抛出一个错误（至少在 v0.8.16 中），所以不是这样。所以最明显的一个是正在加载的模块没有导出函数（如错误所示）。

您应该`console.log('routeName: ', routeName)`在 app.js 第 60 行的 require 语句之前运行，然后再次尝试运行它。然后，在找到 的值后`routeName`，查看它试图打开的文件。赔率要么`module.exports`是导出对象（或数组、字符串等），要么根本没有设置。

如果您在路由文件夹中添加路由，请注意遵循与作者相同的导出样式，即`module.exports = function(app, models) {...}`

# php - 为什么Servicemanager注入可调用而不是服务

> ID：14608850
> 
> 赞同：4
> 
> 时间：2013-01-30T16:27:05.257
> 
> 标签：php, zend-framework2

我目前正在使用 ZF2 serviceManager，我试图弄清楚为什么 serviceManager 不会在实现 ServiceLocatorAwareInterface 的类中注入 sm。

我的主要问题是我做得对还是“服务”键不是用于实现 ServiceLocatorAwareInterface 的服务，而是用于不需要注入的服务？

在 Module.php 中

```
public function getServiceConfig() {
    return array(
        'invokables' => array(
            'myService1' => 'MyModule\Service\Service'
        ),
        'services' => array(
            'myService2' => new MyModule\Service\Service(),
        ),
    );
} 
```

在 MyModule\Service\Service.php

```
namespace MyModule\Service;

use Zend\ServiceManager\ServiceManagerAwareInterface;
use Zend\ServiceManager\ServiceManager;

class Service implements ServiceManagerAwareInterface
{
    /**
     * @var ServiceManager
     */
    protected $serviceManager = NULL;

    /**
     * Retrieve service manager instance
     *
     * @return ServiceManager
     */
    public function getServiceManager()
    {
        return $this->serviceManager;
    }

    /**
     * Set service manager instance
     *
     * @param ServiceManager $serviceManager
     */
    public function setServiceManager(ServiceManager $serviceManager)
    {
        $this->serviceManager = $serviceManager;
    }
} 
```

当我在控制器中调用服务时

```
<?php

namespace MyModule\Controller;

use Zend\Mvc\Controller\AbstractActionController;

class IndexController extends AbstractActionController
{

    public function IndexAction() {

        $service1   = $this->getServiceLocator()->get('myService1');
        $sm1        = $service1->getServiceManager(); 
        //$sm1 becomes a object of Zend\ServiceManager\ServiceManager
        //In other words i now can access the SM from within my service.

        $service2   = $this->getServiceLocator()->get('myService2');
        $sm2        = $service2->getServiceManager(); 
        //$sm2 becomes NULL
        //The service isn't aware of the SM and can't access it.

    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T16:56:52.247

如果您想使用 ServiceManagerAwareInterface 并将 Service Manager 自动注入到您的服务中，您应该继续使用“invokables”部分。

查看**/Zend/ServiceManager/ServiceManager.php**，“服务”意味着注册为已在 ServiceManager 中实例化的对象。当服务定位器在检索期间在其本地服务缓存中查找时，它假定“服务”已经完全设置并且不注入 sm 或运行任何初始化程序。

“invokables”、“factories”、“abstract_factories”是动态创建的，并在“initializers”在新创建的服务实例上运行时注入 sm（参见函数 create($name)）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-25T21:59:19.290

忘记 getServiceConfig() 并改用您的模块配置。它更快且可缓存：

**模块.config.php**：

```
'service_manager' => array(
    'invokables' => array(
        'MyModule\Service\Service' => 'MyModule\Service\Service',
    ),
) 
```

**MyModule\Service\Service.php**：

```
<?php
namespace MyModule\Service;

use \Zend\ServiceManager\ServiceLocatorInterface;

class Service
{
    public function __invoke(ServiceLocatorInterface $sm)
    {
        // go bananas here :)
    }

    public functiom greet()
    {
        return 'Hello World';
    }
} 
```

**zend2 内的任何地方**：

```
<?php
    $service=$serviceManager->get('MyModule\Service\Service');
    echo $service->greet(); 
```

# algorithm - 如何使用固定的行/列总和对数组进行洗牌？

> ID：14608853
> 
> 赞同：3
> 
> 时间：2013-01-30T16:27:17.090
> 
> 标签：algorithm, math, random, shuffle

我需要将随机论文分配给班级的学生，但我有以下限制：

1.  每个学生应分配两篇论文。
2.  每篇论文应分配给（*大约*）相同数量的学生。

有没有一种*优雅*的方法来生成具有此属性的矩阵？即它是洗牌的，但行和列的总和是恒定的？举例说明：

```
Student A   1  0  0  1  1  0 |  3
Student B   1  0  1  0  0  1 |  3
Student C   0  1  1  0  1  0 |  3
Student D   0  1  0  1  0  1 |  3
            ---------------- 
            2  2  2  2  2  2 
```

我想首先用正确的行/列总和构建一个“初始矩阵”，然后随机排列首先是行，然后是列，**但是如何生成这个初始矩阵**？这里的问题是我将在（例如）以下替代方案之间进行选择，并且有两个学生分配了相同的论文（在左侧设置中）这一事实不会通过行/列改组而改变：

```
INITIAL (MA):            OR (MB):
A   1  1  1  0  0  0  ||  1  1  1  0  0  0  
B   1  1  1  0  0  0  ||  0  1  1  1  0  0
C   0  0  0  1  1  1  ||  0  0  0  1  1  1
D   0  0  0  1  1  1  ||  1  0  0  0  1  1 
```

我知道我可以想出一些快速/肮脏的东西，并在必要时进行调整，但这似乎是一个有趣的练习。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:39:10.820

您可以按如下方式生成初始矩阵（伪 Python 语法）：

```
column_sum = [0] * n_students

for i in range(n_students):
    if column_sum[i] < max_allowed:
        for j in range(i + 1, n_students):
            if column_sum[j] < max_allowed:
                generate_row_with_ones_at(i, j)
                column_sum[i] += 1
                column_sum[j] += 1

                if n_rows == n_wanted:
                    return 
```

*这是对所有n*选择 2 个不同行的直接迭代，但尽可能早地强制执行对列总和的约束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T20:09:06.150

如果要进行排列，该怎么办：

*   随机选择一个学生，比如学生 1

*   对于这个学生，选择他有的随机试卷，比如试卷 A

*   随机选择另一个学生

*   对于这个学生，随机选择一张他有的论文，比如论文 B（不同于 A）

*   把试卷 B 给学生 1，把试卷 A 给学生 2。

这样，您既可以保留不同论文的数量，也可以保留每个学生的论文数量。事实上，两个学生都给了一篇论文，并收到了一篇回馈。此外，不会创建或删除任何纸张。

就表格而言，这意味着找到两对索引 (i1,i2) 和 (j1,j2) 使得 A(i1,j1) = 1, A(i2,j2)=1, A(i1,j2)= 0 和 A(i2,j1)=0 并将 0 更改为 1，将 1 更改为 0 => 行和列的总和不会改变。

备注1：如果您不想通过排列进行，您可以简单地将所有纸张放入一个向量（放入2次纸张A，2次纸张B，......）。然后，随机打乱向量并将 k 首先归因于第一个学生，接下来的 k 个归因于学生 2，......但是，您可以以一个学生有多次相同的论文结束。在这种情况下，从姓氏文件开始进行一些排列。

# java - GridLayout 不尊重我想要的每列的行数

> ID：14608854
> 
> 赞同：4
> 
> 时间：2013-01-30T16:27:24.693
> 
> 标签：java, swing, awt, layout-manager, grid-layout

我有以下，

```
GridLayout layout = new GridLayout(4, 0); 
```

如果我有`5`项目，这将创建`2`列，其中第一个包含`3`行，第二个包含`2`行。这不是我想要的，也不是我所期望的。我希望第一列包含`4`行，第二列包含`1`行。

为什么这个布局管理器不尊重我每列想要的行数？或者更好的是，我如何让这个布局管理器尊重这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T16:58:50.897

结果似乎是预期的：“仅当行数设置为零时，指定列数才会影响布局。”

您可以使用 获得所需的效果`JList`，如下[所示](https://stackoverflow.com/a/7620726/230513)。

```
private static final int N = 5;
...
list.setLayoutOrientation(JList.VERTICAL_WRAP);
list.setVisibleRowCount(N - 1); 
```

![图片](../Images/cfc9d9121cb732b076b9be5edaf891a9.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T16:53:11.640

免责声明：这不是作为具体答案提供的，而是为了证明[SSCCE](http://sscce.org)的有用性......

[`GridLayout`](http://docs.oracle.com/javase/7/docs/api/java/awt/GridLayout.html)构造函数是`GridLayout(int rows,int cols)`（我提到它的原因就像@AndrewThompson 在他的回答中所说的那样，您可能已经混淆了 rows/cols 的参数`LayoutManager`）。因此`4,0`将给我们 4 行和可变数量的列。

当我添加 4 个标签时，我得到 4 行和 1 列（如预期的那样）：

![在此处输入图像描述](../Images/753e1049e3224690ae54c669c25a8be3.png)

当您添加 5 个标签时，我得到 3 行和 2 个列，每个列有 2 个项目，但最后一个有 1 个：

![在此处输入图像描述](../Images/19415274f0e3ef298ba2f3ca3e503393.png)

IMO 预计这`GridLayout`必须遵守列/行数 >0（任何小于 0 并且 LayoutManager 计算数量），因此如果我们添加的组件数超过允许的行数，它会创建一个新的列 >0 但也 >1 作为 0 和 1执行相同的操作。因此，当我们用 5 个组件填充 4x0 的 Grid 时，它现在创建 2 个列，我们期望每行（每个列）上都有 2 个组件，而最后一行（不一定是最后一行，取决于组件的数量，即8 会将其填充到最后一行，因为现在它的 4x2 但添加 9 个组件会导致`GridLayout`4x3 - 在进入新行之前填充该行的所有列）

请发布一个重新解决问题的[SSCCE](http://sscce.org)，否则我们只是在猜测这是我所做的示例，它显示的行为与您所说/得到的不同：

```
import java.awt.GridLayout;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.SwingUtilities;

public class Test {

    public Test() {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        GridLayout layout = new GridLayout(4, 0);
        frame.setLayout(layout);

        for (int i = 0; i < 5; i++) {
            frame.add(new JLabel(String.valueOf(i + 1)));
        }

        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        //Create Swing components on EDT
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Test();
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T16:58:05.363

您指定的 GridLayout 的列数为 0。这意味着列数由布局决定。在这种情况下，它会尝试根据项目数计算所需的列数。

如果您添加了 4 个组件，您将得到 4 行，每行一个组件。如果添加 5 个组件，则需要两列，并且它们会依次填充组件，这意味着只会消耗 3 行。

因此，根据您的组件数量，您可能会看到是否使用了所有指定的行。例如尝试使用 7 个组件。

# python - 如何使列表项免于迭代？

> ID：14608855
> 
> 赞同：0
> 
> 时间：2013-01-30T16:27:24.273
> 
> 标签：python, list, python-2.7, iteration

我有两个相等长度的整数列表。我想使用以下行将第一个列表的每个元素添加到第二个列表的相应元素中：

```
complete_list = [first_list[i] + second_list[i] for i in range(len(first_list))] 
```

但是，first_list 的某些元素是特殊数字，我想将它们从上述操作中排除，同时添加其他元素来制作 complete_list。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:07:58.320

我倾向于将您的原始示例写为：

```
a = [1, 2, 3]
b = [4, 5, 6]

from operator import add
c = map(add, a, b)
# [5, 7, 9] 
```

然后，如果您只希望根据 on 的条件“不添加”元素`a`，则构建一个生成器，通过`b`引用相应的元素`a`并使其成为`0`无操作。

```
special = {2}
b2 = (j if a[i] not in special else 0 for i, j in enumerate(b))
map(add, a, b2)
# [5, 2, 9] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:31:09.337

您可以`if`在 listcomp 的末尾添加一个：

```
>>> first_list = [1,2,3,10]
>>> second_list = [10,20,30,50]
>>> special = {2, 3}
>>> [first_list[i]+second_list[i] for i in range(len(first_list)) if first_list[i] not in special]
[11, 60] 
```

虽然我可能会`zip`在这里使用：

```
>>> [a+b for a,b in zip(first_list, second_list) if a not in special]
[11, 60] 
```

如果你想`a`通过未调整的，你可以移动`if`并使用`X if Y else Z`三元语法：

```
>>> [a+b if a not in special else a for a,b in zip(first_list, second_list)]
[11, 2, 3, 60] 
```

# c# - Linq-To-Twitter 错误身份验证

> ID：14608860
> 
> 赞同：1
> 
> 时间：2013-01-30T16:27:45.347
> 
> 标签：c#, windows-8, microsoft-metro, windows-store-apps, linq-to-twitter

所以我一直在使用 Linq-To-Twitter 将 Twitter 集成添加到我的 Windows 8 应用商店应用程序中，Moreso 用于玩弄它，但我遇到了一个问题。我当前的身份验证代码块是

```
 var auth = new WinRtAuthorizer
        {
            Credentials = new LocalDataCredentials
            {
                ConsumerKey = "",
                ConsumerSecret = ""
            },
            UseCompression = true,
            Callback = new Uri("http://linqtotwitter.codeplex.com/")
        };

        if (auth == null || !auth.IsAuthorized)
        {
            await auth.AuthorizeAsync();
        } 
```

效果很好，除非我进入身份验证屏幕并单击左上角的后退按钮以退出身份验证而不提供详细信息。此时我得到一个 TwitterQueryException: Bad Authentication data 在：

```
 var timelineResponse =
                 (from tweet in twitterCtx.Status
                  where tweet.Type == StatusType.Home
                  select tweet)
                 .ToList(); 
```

显然，由于身份验证信息错误，如果身份验证失败/退出，我正试图找到一种方法来停止继续执行其余代码。

我试过简单的布尔检查没有效果。几个小时以来，我一直在融化我的大脑，所以任何帮助都将不胜感激。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:12:10.410

您可以查询 Account.VerifyCredentials 以确保用户在执行任何其他操作之前已登录。这是一个例子：

```
 const int BadAuthenticationData = 215;

        var twitterCtx = new TwitterContext(auth);

        try
        {
            var account =
                (from acct in twitterCtx.Account
                 where acct.Type == AccountType.VerifyCredentials
                 select acct)
                .SingleOrDefault();

            await new MessageDialog(
                "Screen Name: " + account.User.Identifier.ScreenName, 
                "Verification Passed")
                .ShowAsync();
        }
        catch (TwitterQueryException tqEx)
        {
            if (tqEx.ErrorCode == BadAuthenticationData)
            {
                new MessageDialog(
                    "User not authenticated", 
                    "Error During Verification.")
                    .ShowAsync();
                return;
            }

            throw;
        } 
```

您的错误处理策略将与此不同，这只是一个示例，但它向您展示了如何知道错误发生并让您有机会在恢复正常操作之前对问题做出反应。

TwitterQueryException 将在 ErrorCode 属性中包含 Twitter 错误代码。它还将 Message 设置为 Twitter 返回的错误消息。InnerException 提供了带有原始堆栈跟踪的底层异常，这通常是由于 Twitter 返回的 HTTP 错误代码而引发的 WebException。

# android - 如何在首选项的摘要字段中填写更多文本？

> ID：14608863
> 
> 赞同：0
> 
> 时间：2013-01-30T16:27:49.913
> 
> 标签：android, text, android-preferences

如何在首选项的摘要字段中填写更多文本？有没有办法扩大汇总字段的大小？

![在此处输入图像描述](../Images/ea95ac3dc6b7afc627a3021c335a94ca.png)

PS：已经有相当小的字体大小，所以我不想让它变得超小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:18:56.267

最后我这样做了：
1\. 为我的偏好创建布局 xml
2\. 粘贴 [PATH TO ANDROID SDK]/platforms/android-[VERSION]/data/res/preference.xml 的内容
3\. 删除的行`android:maxLines="4"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:36:04.927

您必须显示您的 XML 布局，以便我知道您是如何设置字段高度的。有很多方法可以做到这一点。

您应该增加 layout_height 属性，将外部布局更改为 ScrollView，减少 layout_weight 属性，将 layout_height 设置为“wrap_content”等...

# javascript - 如何将 SVG 'c' 曲线转换为三次贝塞尔曲线列表？

> ID：14608866
> 
> 赞同：4
> 
> 时间：2013-01-30T16:27:57.983
> 
> 标签：javascript, svg, bezier

我有如下路径：

`d="m 0,0 38.913,455.481 c 7.122,83.37 6.816,164.779 13.005,236.077 18.924,218.078 232.099,308.663 268.399,493.918 16.874,86.119 -37.253,229.874 -42.144,323.022 -7.527,143.381 69.579,142.669 104.526,244.648"`

我不太明白它是如何表示的。

我猜它被转换为多个简单三次贝塞尔曲线的列表，但是如何？每次我应该把什么作为控制点、起点、终点？

这里的坐标到底是亲戚？相对于什么？

我对 SVG 图形完全陌生，而且（在我看来）w3 参考并没有提供足够的关于这些点的细节。

如果它可以帮助我的目标，就是在画布上用javascript逐点表示这条曲线。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T16:40:44.307

你似乎有[三次贝塞尔曲线](http://www.w3.org/TR/SVG/paths.html#PathDataCubicBezierCommands)，而不是二次曲线。规范文本解释了控制点是什么以及它们相对于什么（通常是上一个移动/直线/曲线的终点）

# php - 一个困惑的新手试图解决 php 框架和致命错误

> ID：14608868
> 
> 赞同：-6
> 
> 时间：2013-01-30T16:27:58.120
> 
> 标签：php

[http://site.youresolastyear.com/login.html](http://site.youresolastyear.com/login.html) 要么是一个写得不好的网站，要么是我的电脑出现故障，因为每当我选择 -login 或 -view 之类的功能时，我得到的页面都会通知我

致命错误：在第 212 行的 /srv/www/www2.youresolastyear.com/application/framework/Session.php 中的非对象上调用成员函数 getID()

这是什么？我无法访问 php 文件或框架，什么是非对象？我该怎么做才能访问该站点？这是网站故障还是我的电脑故障？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T16:29:26.593

这是 Web 服务器中的服务器端代码中的错误。

它与您的计算机无关。

# cocoa - 如何将 Cocoa-Applescript 应用程序注册为 URL 处理程序？（相当于 Applescript Studio 中的“在开放位置”）

> ID：14608871
> 
> 赞同：3
> 
> 时间：2013-01-30T16:28:04.783
> 
> 标签：cocoa, applescript, applescript-objc

应该相对简单，但我似乎找不到任何东西 - 我正在尝试将 URL 处理程序添加到 Cocoa-Applescript 应用程序，如下所述：http: [//www.macosxautomation.com/applescript/linktrigger /index.html](http://www.macosxautomation.com/applescript/linktrigger/index.html)

除了该示例似乎不适用于 Xcode/Cocoa-Applescript 应用程序。

在我的 AppDelegate.applescript 中，在 applicationDidFinishLaunching_ 之后，我得到了：

```
 on open location this_URL
   tell me to log "this_URL: " & this_URL
 end open location 
```

我已经在 info.plist 中添加了所有 CFBundleURLTypes/CFBundleURLschemes 的东西。

后者似乎正在工作，因为当我单击 myAppScheme:// 链接时我的应用程序会激活。

但是日志语句不会触发。

我也尝试过类似的东西，`on handleGetURLEvent_(this_URL)`但我现在只是在猜测:)

非常感谢任何帮助..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-24T17:48:04.373

解决了！（下面的“幻数”是由于 ASObjc 东西中的一个错误）。

```
 on applicationDidFinishLaunching_(aNotification)
  -- Insert code here to initialize your application before any files are opened
      -- Register the URL Handler stuff
      tell current application's NSAppleEventManager's sharedAppleEventManager() to setEventHandler_andSelector_forEventClass_andEventID_(me, "handleGetURLEvent:", current application's kInternetEventClass, current application's kAEGetURL)

  -- all your other application startup stuff..

  end applicationDidFinishLaunching_

  -- handler that runs when the URL is clicked
  on handleGetURLEvent_(ev)
      set urlString to (ev's paramDescriptorForKeyword_(7.57935405E+8)) as string
      tell me to log "urlString: " & urlString

      -- do stuff with 'Set AppleScript's text item delimiters to "foo="', and then "&" etc, to parse your parameters out of the URL String

  end handleGetURLEvent_ 
```

而且您的 info.plist 需要采用以下形式：

```
 <key>CFBundleIdentifier</key>
  <string>com.myappname</string>
...
  <key>CFBundleURLTypes</key>
<array>
  <dict>
  <key>CFBundleURLName</key>
  <string>My App Name Helper</string>
  <key>CFBundleURLSchemes</key>
  <array>
  <string>myappscheme</string>
  </array>
  </dict>
</array> 
```

这允许您的应用从以下形式的 URL 获取输入：

myappscheme://com.myappname/?foo=stuff&bar=otherstuff

整个 URL 被传入并最终出现在您的 'urlString' 变量中，因此您可以随意解析它。这意味着您甚至不必像我上面那样遵循标准的 URL 约定，但您可能会发现这样做很方便，因此您可能会支持在您的应用程序中解析 Facebook 或 Google 地图 URL将 http:// 更改为 myappscheme://

享受/希望有帮助.. :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:53:50.033

我不使用 ApplescriptObjC，但是在普通的可可应用程序中，请参阅[这篇文章](https://stackoverflow.com/questions/49510/how-do-you-set-your-cocoa-application-as-the-default-web-browser)，它解释了如何做到这一点。我假设你需要这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T17:22:09.917

我可能会遇到类似的事情。我有一个 Applescript URL 处理程序，它启动但不处理传递的 URL（正如您所描述的）。

我发现当另一个程序发送链接时，一切正常。
当我尝试通过终端“open”命令手动发送链接时，“on run”处理程序触发而不是“on open location”——不幸的是，这意味着我无法获取传递的 URL。

# windows-7 - 获取在 Vagrant VM 上运行的 LAMP 堆栈（在 Windows 7 主机下），完整说明？

> ID：14608875
> 
> 赞同：26
> 
> 时间：2013-01-30T16:28:11.197
> 
> 标签：windows-7, virtual-machine, lamp, vagrant, knife

我有一个 Vagrant VM 标准问题 lucid32.box 正在运行。在此设置 LAMP 的完整说明是什么？

我看过刀（厨师的一部分）并尝试：

```
vagrant@lucid32:~$ knife cookbook site install apache2 
```

但得到了

```
WARNING: No knife configuration file found 
```

如何设置刀配置文件，我应该在其中包含什么？

我一直在网上搜索很多答案，但部分解决方案无法解释其起点/先决条件，这让我不知所措。

**更新**

我的目标是自己回答这个问题，因为其他人似乎都不想回答。这是我目前的理解 - 我的目标是稍后用红色解决我的未知数/问题。

![Vagrant Windows 主机，Linux VM v001 - 尝试设置后的初始问题](../Images/e21d933f28de189ed089643f7c4abef0.png)

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-02-25T13:17:59.240

好的，我决定作为原始问题海报为自己完全回答这个问题。（感谢之前做出贡献的所有人。）

**使用 Vagrant 和 Oracle VirtualBox 在 Windows 64 位主机上端到端设置 LAMP VM**

我最初问这个问题是因为虽然网上有很多说明和指南，但他们似乎没有做的是：

*   明确定义起点和先决条件
*   为像我这样的企业环境中的人提供说明，这些企业环境有一台功能强大的 Windows 机器来托管 VM。相反，他们假设一台基于 Linux 的主机。
*   清楚设置文件的位置： 在主机上？在来宾操作系统上？（这尤其难以确定主机和来宾操作系统是基于 Linux 还是基于 Unix - 显示的命令行片段显然没有提供线索，因为它们看起来都一样。）
*   说明使用了哪个版本的 Vagrant。有两 (2) 个主要版本： API 版本 1，它是（但不包括）v1.1.0 之前的所有版本。另一个是 API 版本 2 - 从 v1.1.0 开始发布。所以版本控制约定类似于Java。这个 API 版本很重要，例如，v1 API 脚本根本无法在 Vagrant 软件的 API v2 上运行，除非在脚本的开头放置一个子句来说明要使用哪个版本。

    我个人认为 Vagrant 版本控制约定可能更简单。**注意：本指南适用于 Vagrant 1**。有人告诉我，版本 1 拥有广泛的安装基础，而 Vagrant 2 仍处于 2013 年中期的草案阶段。因此，我喜欢称版本 1 - V1 LTS - 长期支持 - 就像 Ubuntu 一样，以表明这将持续存在很久了。

这是一张图片，用于阐明哪个 API 在哪个版本的 Vagrant 软件上：

![Vagrant API 版本 v1、v2 说明及下载](../Images/273102e22d98693ccc284d643cffc8ae.png)

对于我在这里使用 Vagrant 的示例设置，我建议使用 pre-V1.1.0（即来自 vagrantup.com 下载的 Vagrant API 1）*但是*您应该能够使用 Vagrant 软件的 Vagrant 2 API 版本，如上所述但是您需要在脚本的开头添加一个“指令”，以告诉 Vagrant 它们适用于 Vagrant 1，否则脚本将失败并显示错误消息。**TODO：**我将尝试获取该指令并将其放在这里以提供帮助。

（Mitchell Hashimoto，Vagrant 的创造者 - 请注意以上内容，以了解您的 O'Reilly 书籍的任何未来版本：Vagrant：Up and Running：[http](http://shop.oreilly.com/product/0636920026358.do) ://shop.oreilly.com/product/0636920026358.do ）

***此*答案中的这些说明应该做什么：**

在您的 Windows 7 64 位机器（或 Mac 或 Linux 机器，但主要在 Windows 上进行了测试，但在 Mac 上应该可以正常工作，而且这个解决方案是独立于平台的）。我已经测试了 PHP OK（通过标准的 phpinfo.php 文件并看到 MySQL 正在运行，但还没有测试过）。

**设置在 Vagrant VM 上运行的 LAMP 堆栈的其他方法**

注意：对于那些想要一个带有 Drupal 开源内容管理框架的 LAMP 堆栈的人（像我一样）来说，一个非常开箱即用的替代解决方案在这里：[http](http://drupal.org/project/vagrant) ://drupal.org/project/vagrant 你应该能够按照下面我的先决条件，然后从上面的 URL 下载 .zip 并按照那里的说明运行`vagrant up`从命令行启动 VM 并等待它构建和启动（其中一些是第一次一次性的，因为一旦您设置了映像，后续启动应该会更快）。您可以“免费”获得许多其他开发人员的东西（即为您节省安装它们的精力）——比如 git、drush（我认为）和性能分析工具。然后到 [服务器地址]/install.php 安装 Drupal。这似乎运行良好，没有问题——我已经尝试过了，但没有进行广泛的测试。如果收到错误消息，您可能需要禁用 xhprof 的安装 - 有关详细信息，请参阅[http://drupal.org/node/1940668](http://drupal.org/node/1940668)。

另一种选择是使用此配置工具：[https](https://puphpet.com/) ://puphpet.com/ - 这是一种用于配置 Vagrant 设置的可视化点击方法。这适用于 Vagrant 2（我认为，更新是的，至少在 Vagrant 1.2.2 上是这样）。**更新：**事实上，我已经成功地完成了这项工作，并基于在本地运行 Drupal 的设置 - 请参阅我的指南：[https ://drupal.org/node/2055947](https://drupal.org/node/2055947)

**更新**

以下是我发现在 Mac 和 Windows 上运行良好的其他一些开箱即用的 Vagrant 设置：

*   [https://github.com/mikebell/drupaldev-apache](https://github.com/mikebell/drupaldev-apache)
*   [https://github.com/mikebell/drupaldev-nginx](https://github.com/mikebell/drupaldev-nginx)

如果您希望 VM 中本地的 Solr 搜索引擎作为 LAMP 堆栈的一部分，您可能需要查看：

*   [https://github.com/computerminds/parrot](https://github.com/computerminds/parrot)

尽管这些替代方案很棒，但我的说明仍然很有价值，可以帮助您了解此类设置的工作原理，或者如果您想要更简单、更基本的 LAMP 堆栈。

**您需要了解如何做的小额外内容（将尝试在此处包含它们）**

设置后登录机器 - 这是通过标准的基于 SSH 的登录完成的。您将需要免费工具 putty.exe 和 puttygen.exe。目前我还没有在这里提供如何使用 SSH 登录，但将来会尝试这样做。您将在此答案的末尾找到参考资料。

请注意，登录将使用 user `vagrant`。

（按照下面的设置说明进行操作后）要使用 root 用户，您需要“解锁”该帐户才能重置密码：

解锁root账户：

```
vagrant@lucid32:~$ sudo passwd -u root
passwd: password expiry information changed. 
```

然后修改root密码：

```
vagrant@lucid32:~$ sudo passwd root
Enter new UNIX password:
Retype new UNIX password:
passwd: password updated successfully 
```

（密码不会在您键入时显示。）

通过使用它登录到 root 来测试新密码：

```
vagrant@lucid32:~$ su root
Password:
root@lucid32:/home/vagrant# 
```

信用：[https](https://scottlinux.com/2011/07/22/reset-or-change-user-password-in-linux/) ://scottlinux.com/2011/07/22/reset-or-change-user-password-in-linux/ （文章：“在 Linux 中重置或更改用户密码” - 这帮助我解决了如何做。）

**有什么错误吗？**

试一试 - 如果您有问题，请在答案中添加评论，我会尝试解决。另请参阅最后的故障排除。

**未来的任务**

目前使用木偶。使用 Chef 而不是 Puppet，只是为了拓宽工作方式。这两个都是竞争者，但有不同的方法，所以我相信：对于 Puppet，我被告知你说你想要什么，Puppet 可能会做出一些武断的决定来让你到达那里。而对于 Chef，我相信您可以定义精确的步骤顺序。再次 - 在这里评论并在必要时纠正我，

**这些说明的先决条件：**

*   Windows 7 64 位
*   安装的 VirtualBox
*   安装流浪汉
*   不需要单独安装 Ruby 和 Puppet，因为它们似乎随 Vagrant 一起提供。老实说，我*确实*安装了这些来解决一些问题，但发现这些问题是其他问题。所以我卸载了 Ruby 和 Puppet 并重新运行（`vagrant up`等），它仍然可以工作，所以我假设这些额外的、单独的 Ruby 和 Puppet 安装不是必需的。

*   **建议使用的 Vagrant 和 VirtualBox 版本组合：VirtualBox 版本 4.2.12 和之前的 Vagrant 1.2**（如前所述）。某些其他组合可以工作，但我没有测试过这些，所以我坚持使用这种组合，除非我能看到使用更高版本的明显好处。一个最明显的好处是配置速度。我在这里陈述的组合适用于 puphpet.com 路由来设置一个虚拟机，至少这是相当复杂的，因此我假设应该在我这里记录的简单设置上工作。

（信用：这些说明基于： http: [//ox86.tumblr.com/post/23734821654/painless-development-environments-with-virtualbox](http://ox86.tumblr.com/post/23734821654/painless-development-environments-with-virtualbox) ...但*不是*精确的副本，因为它们对我不起作用。）

**说明**

（确保您具备上述先决条件。）

主机设置工作在您的 Windows 用户文件夹中的主机上完成，例如对我来说这是`C:\Users\rdavis`

```
mkdir lamp-project
cd lamp-project
mkdir configs
cd ..
cd lamp-project
mkdir manifests 
```

（来自：[http](http://docs.vagrantup.com/v1/docs/getting-started/index.html) ://docs.vagrantup.com/v1/docs/getting-started/index.html ）

下载发行版安装映像，在本例中为 Ubuntu Lucid (10.04)。此映像实际上等效于您传统上用于在计算机上安装操作系统的安装磁盘（CD 或 DVD）。

```
C:\Users\rdavis\lamp-project>vagrant box add lucid32 http://files.vagrantup.com/lucid32.box 
```

（顺便说一句，vagrantup.com 上还有其他几个流行的发行版，但如果你想从发行版 .ISO 生成 .box 文件，那么有一个名为 VeeWee 的工具可以做到这一点：[https ://github.com/ jedi4ever/veewee](https://github.com/jedi4ever/veewee) )

初始化它：

```
C:\Users\rdavis\lamp-project>vagrant init lucid32 
```

（注意，我只是`vagrant init`在编写这些指令时使用，因为我已经初始化了 lucid32，但是第一次，你必须执行上述命令。）

```
C:\Users\rdavis\lamp-project>vagrant init
A `Vagrantfile` has been placed in this directory. You are now
ready to `vagrant up` your first virtual environment! Please read
the comments in the Vagrantfile as well as documentation on
`vagrantup.com` for more information on using Vagrant.

C:\Users\rdavis\lamp-project> 
```

编辑`C:\Users\rdavis\lamp-project\Vagrantfile` - 在之后直接插入以下内容`Vagrant::Config.run do |config|`

```
config.vm.box = "lucid32"
config.vm.provision :puppet do |puppet|
    puppet.manifests_path = File.expand_path("../manifests", __FILE__)
end
config.vm.forward_port 80, 8080
config.vm.share_folder "configs", "/configs", File.expand_path("../configs", __FILE__) 
```

所以你的 Vagrantfile 应该是这样的：

```
# -*- mode: ruby -*-
# vi: set ft=ruby :

Vagrant::Config.run do |config|

config.vm.box = "lucid32"
config.vm.provision :puppet do |puppet|
    puppet.manifests_path = File.expand_path("../manifests", __FILE__)
end
config.vm.forward_port 80, 8080
config.vm.share_folder "configs", "/configs", File.expand_path("../configs", __FILE__)

 # All Vagrant configuration is done here. The most common configuration
 # options are documented and commented below. For a complete reference,
 # please see the online documentation at vagrantup.com.

 # Every Vagrant virtual environment requires a box to build off of.
 # config.vm.box = "lucid32" 
 # (this is already done above, but if you have a box called 'base' which is an Ubuntu lucid32 then you can use: config.vm.box = "base". This info may be helpful if you get error: "The box 'base' could not be found.")

 # The url from where the 'config.vm.box' box will be fetched if it
 # doesn't already exist on the user's system.
 # config.vm.box_url = "http://example.com/path/to/above.box"

 # Boot with a GUI so you can see the screen. (Default is headless)
 # config.vm.boot_mode = :gui

 # Assign this VM to a host-only network IP, allowing you to access it
 # via the IP. Host-only networks can talk to the host machine as well as
 # any other machines on the same network, but cannot be accessed (through this
 # network interface) by any external networks.
 # config.vm.network :hostonly, "192.168.33.10"

 # Assign this VM to a bridged network, allowing you to connect directly to a
 # network using the host's network device. This makes the VM appear as another
 # physical device on your network.
 # config.vm.network :bridged

 # Forward a port from the guest to the host, which allows for outside
 # computers to access the VM, whereas host only networking does not.
 # config.vm.forward_port 80, 8080

 # Share an additional folder to the guest VM. The first argument is
 # an identifier, the second is the path on the guest to mount the
 # folder, and the third is the path on the host to the actual folder.
 # config.vm.share_folder "v-data", "/vagrant_data", "../data"

 # Enable provisioning with Puppet stand alone.  Puppet manifests
 # are contained in a directory path relative to this Vagrantfile.
 # You will need to create the manifests directory and a manifest in
 # the file base.pp in the manifests_path directory.
 #
 # An example Puppet manifest to provision the message of the day:
 #
 # # group { "puppet":
 # #   ensure => "present",
 # # }
 # #
 # # File { owner => 0, group => 0, mode => 0644 }
 # #
 # # file { '/etc/motd':
 # #   content => "Welcome to your Vagrant-built virtual machine!
 # #               Managed by Puppet.\n"
 # # }
 #
 # config.vm.provision :puppet do |puppet|
 #   puppet.manifests_path = "manifests"
 #   puppet.manifest_file  = "base.pp"
 # end

 # Enable provisioning with chef solo, specifying a cookbooks path, roles
 # path, and data_bags path (all relative to this Vagrantfile), and adding
 # some recipes and/or roles.
 #
 # config.vm.provision :chef_solo do |chef|
 #   chef.cookbooks_path = "../my-recipes/cookbooks"
 #   chef.roles_path = "../my-recipes/roles"
 #   chef.data_bags_path = "../my-recipes/data_bags"
 #   chef.add_recipe "mysql"
 #   chef.add_role "web"
 #
 #   # You may also specify custom JSON attributes:
 #   chef.json = { :mysql_password => "foo" }
 # end

 # Enable provisioning with chef server, specifying the chef server URL,
 # and the path to the validation key (relative to this Vagrantfile).
 #
 # The Opscode Platform uses HTTPS. Substitute your organization for
 # ORGNAME in the URL and validation key.
 #
 # If you have your own Chef Server, use the appropriate URL, which may be
 # HTTP instead of HTTPS depending on your configuration. Also change the
 # validation key to validation.pem.
 #
 # config.vm.provision :chef_client do |chef|
 #   chef.chef_server_url = "https://api.opscode.com/organizations/ORGNAME"
 #   chef.validation_key_path = "ORGNAME-validator.pem"
 # end
 #
 # If you're using the Opscode platform, your validator client is
 # ORGNAME-validator, replacing ORGNAME with your organization name.
 #
 # IF you have your own Chef Server, the default validation client name is
 # chef-validator, unless you changed the configuration.
 #
 #   chef.validation_client_name = "ORGNAME-validator"
end 
```

然后，在 C:\Users\rdavis\lamp-project\manifests 创建文件 default.pp 并将其放入：

```
$config_path = "/configs"
$vagrant_base_path = "/vagrant"
Exec { path => "/bin:/usr/bin:/usr/local/bin" }
group { "puppet": ensure => present }
exec { "apt-get update": command => "apt-get update" }
class apache {

    exec { "enable-mod_rewrite":
        require => Package["apache2"],
        before => Service["apache2"],
        command => "/usr/sbin/a2enmod rewrite"
    }
    package { "apache2":
        ensure => present
    }

    service { "apache2":
        ensure => running,
        require => Package["apache2"]
    }
}
class php {
    package { "libapache2-mod-php5": ensure => present }
    package { "php5": ensure => present }
    package { "php5-cli": ensure => present }
    package { "php5-dev": ensure => present }
    package { "php5-mysql": ensure => present }
    package { "php-pear": ensure => present }
    exec { "pear upgrade":
        command => "/usr/bin/pear upgrade",
require => Package["php-pear"],
    }
}
class mysql {
  package { "mysql-server":
    require => Exec["apt-get update"],
    ensure => present,
  }
  service { "mysql":
    enable => true,
    ensure => running,
    require => Package["mysql-server"],
  }
  exec { "Set MySQL server root password":
        require => Package["mysql-server"],
        unless => "/usr/bin/mysqladmin -uroot -proot status",
        command => "/usr/bin/mysqladmin -uroot password root",
  }
}
include apache
include php
include mysql 
```

（*有用的说明*（可选），我的上述版本`Vagrantfile`和`default.pp`（以及其他 Vagrant 辅助文件和文件夹结构）可从我的 GitHub 存储库 VagrantVMSetups 获得，位于：[https](https://github.com/therobyouknow/VagrantVMSetups) ://github.com/therobyouknow/VagrantVMSetups - 查看`justlamp`文件夹 - 这个与`lamp-project`此答案中使用的内容相同。）

然后运行 ​​Vagrant：

```
C:\Users\rdavis\lamp-project>vagrant up 
```

请注意，这可能需要一段时间（5-15 分钟） - 但请耐心等待。它现在应该成功运行 LAMP VM。这样您就完成了当前工作任务中的 VM。如果您随后保留 VM 以供以后使用，但使用`vagrant halt`（而不是`vagrant destroy`删除 VM 映像）将其关闭，那么我预计此延迟将是一次性的初始设置时间。`vagrant up`我认为VM 的后续启动（使用）应该会更快。

**故障排除：**

**故障排除问题 1：**使用错误/非法引号 - 运行后在主机上看到错误消息`vagrant up`

*背景：*这发生在我身上，因为我粘贴了指令来自网页的代码片段。代码片段有开闭引号 - Vagrant 使用的解释器/解析器（或者实际上我认为的大多数脚本解释器和编译器）不会将其解释为正确的引号。

**症状：** 输出如下：

```
There is a syntax error in the following Vagrantfile. The syntax error
message is reproduced below for convenience:

C:/Users/rdavis/lamp-project/Vagrantfile:6: invalid multibyte char (US-ASCII)
C:/Users/rdavis/lamp-project/Vagrantfile:6: syntax error, unexpected $end 
```

或这个：

```
Could not parse for environment production: Could not match ?/configs? at /tmp/vagrant-puppet/manifests/default.pp:1 on node lucid32.hsd1.ca.comcast.net.

The following SSH command responded with a non-zero exit status.
Vagrant assumes that this means the command failed! 
```

或这个：

```
There was an error executing the following command with VBoxManage:

["list", "hostonlyifs"] 
```

*补救措施：*使用正确的双引号“。不要使用开闭引号。

**故障排除问题2：**运行后主机上出现以下错误消息`vagrant up`

```
←[1;35merr: /Stage[main]/Apache/File[/etc/apache2/sites-enabled/000-default]: Could not evaluate: Could not retrieve information from environment production source(s) file:/configs/000-default at /tmp
/vagrant-puppet/manifests/default.pp:11←[0m 
```

*补救措施：*你不应该看到这个 - 使用的原始脚本包含对包含`000-default`. 我刚刚删除了所有引用它的行和结构。

**故障排除问题3：** PHP文件被视为下载（文件下载发生在浏览器中），而不是被执行和显示。

PHP 需要在来宾 VM 机器上启用。

补救措施：您可能需要也可能不需要这样做。

此技巧有效：（启用 PHP 并停止将文件视为下载）： [https ://serverfault.com/questions/243435/getting-php-to-work-with-apache-to-run-php-files -通过浏览器](https://serverfault.com/questions/243435/getting-php-to-work-with-apache-to-run-php-files-through-browser)

```
vagrant@lucid32:/etc/php5/cli$ a2enmod php5
Module php5 already enabled
vagrant@lucid32:/etc/php5/cli$ sudo apache2ctl restart 
```

另一个提示：

PHP 需要启用，建议在： http: [//galleryproject.org/node/55011](http://galleryproject.org/node/55011)

是：编辑`php.ini` 这些是共享扩展名（.so 文件）。您需要在 php.ini 中启用它们，然后重新启动 PHP。

我自己，毕竟我不需要编辑 php.ini。顺便说一句，这是在：`/etc/php5/cli/php.ini`对于这个 lucid32 VM。

**故障排除问题 4：**解决有关版本不匹配的 VirtualBox 添加警告消息

```
[default] The guest additions on this VM do not match the install version of
VirtualBox! This may cause things such as forwarded ports, shared
folders, and more to not work properly. If any of those things fail on
this machine, please update the guest additions and repackage the
box.

Guest Additions Version: 4.2.0
VirtualBox Version: 4.2.4 
```

看起来不是问题（它不会阻止 VM 成功运行），但是如果您想解决它：

[http://automation.binarysage.net/?p=1198](http://automation.binarysage.net/?p=1198) [https://unix.stackexchange.com/questions/58216/automate-installation-of-virtualbox-guest-additio](https://unix.stackexchange.com/questions/58216/automate-installation-of-virtualbox-guest-additio) ns-via-command-line

[https://serverfault.com/questions/243435/getting-php-to-work-with-apache-to-run-php-files-through-browser](https://serverfault.com/questions/243435/getting-php-to-work-with-apache-to-run-php-files-through-browser)

（对于类似 Linux 的用户： http: [//www.pauloamgomes.net/blog/installing-vagrant](http://www.pauloamgomes.net/blog/installing-vagrant)）

**排查问题5：** `The box 'base' could not be found."`运行后出现错误信息`vagrant up`。

*补救？*检查包含语句`config.vm.box =`等的行`Vagrantfile`（请参见`Vagrantfile`上面的示例），以确保它指的是系统上实际存在的 Vagrant 框（操作系统安装映像） - 发出命令`vagrant box list`以查看您拥有哪些框。

如果您已按照我的说明进行操作，那么您应该拥有该`lucid32`框。确保`config.vm.box =`您的`Vagrantfile`. `config.vm.box = "base"`忏悔：其实我`Vagrantfile`上面几行的时候，有一个多余的，`config.vm.box = "lucid32"`已经写好了。我现在已经纠正了这一点。

**常问问题**

*   问：什么是流浪盒？A：可以认为相当于一个操作系统安装盘，因为它是基础，是虚拟机的起点——它是操作系统。这是一个二进制文件。

*   问：什么是 Vagrant 包？答：VM 的快照加上 Vagrant 从 VagrantFile 执行的配置提供了一种独立的方式来将设置分发给其他人。

**参考：**

一般流浪者资源：

[Vagrant 命令究竟做了什么？](https://stackoverflow.com/questions/11424690/what-exactly-do-the-vagrant-commands-do) - 很好的描述

[http://community.opscode.com/questions/81](http://community.opscode.com/questions/81) [http://deanstrezovski.com/setting-up-a-cagrant-lamp-stack/](http://deanstrezovski.com/setting-up-a-cagrant-lamp-stack/) [http://www.jasongrimes.org/2012/06/managing-lamp -environments-with-chef-vagrant-and-ec2-1-of-3/](http://www.jasongrimes.org/2012/06/managing-lamp-environments-with-chef-vagrant-and-ec2-1-of-3/) [如何将 Vagrant 项目目录与现有的 VirtualBox VM 关联？](https://stackoverflow.com/questions/9434313/how-do-i-associate-a-vagrant-project-directory-with-an-existing-virtualbox-vm) [http://docs.vagrantup.com/v1/docs/getting-started/index.html](http://docs.vagrantup.com/v1/docs/getting-started/index.html)

**更多关于流浪盒子：**

[http://docs.vagrantup.com/v1/docs/boxes.html](http://docs.vagrantup.com/v1/docs/boxes.html) [Vagrant 在哪里保存对 VM 的更改？](https://stackoverflow.com/questions/8225820/where-is-vagrant-saving-changes-to-the-vm)

基于 SSH 密钥的登录（从外部登录到 VM 框 - 即从主机或另一台机器）：

[http://www.howtoforge.com/ssh_key_based_logins_putty_p2](http://www.howtoforge.com/ssh_key_based_logins_putty_p2) [http://docs.vagrantup.com/v1/docs/getting-started/ssh.html](http://docs.vagrantup.com/v1/docs/getting-started/ssh.html)

[http://en.wikipedia.org/wiki/Ssh-agent](http://en.wikipedia.org/wiki/Ssh-agent)

对于基于 Windows SSH 的 VM 登录：

PuTTY：免费的 telnet/ssh 客户端 www.chiark.greenend.org.uk/~sgtatham/putty/

腻子：

www.chiark.greenend.org.uk/~sgtatham/putty/download.html

**此答案的版本历史/更新**

1.  路标和标题清理
2.  添加了运行`vagrant up`，可能需要一段时间
3.  添加了如何在VM中设置root密码
4.  添加缺少的步骤来下载和初始化 lucid32 框（相当于安装盘）
5.  添加了指向我的[https://github.com/therobyouknow/VagrantVMSetups](https://github.com/therobyouknow/VagrantVMSetups) GitHub 存储库的链接，其中包含此答案的 Vagrant 配置设置 - 为方便起见。
6.  当实际上上面几行时，已经完成了更改`Vagrantfile`以删除无关紧要的内容。如果您遇到错误，这将有所帮助还添加了一个新的故障排除项目，说明相同。`config.vm.box = "base"``config.vm.box = "lucid32"``The box 'base' could not be found."`
7.  为那些想要基于 Drupal 的 LAMP VM 的人添加了替代的开箱即用解决方案：[http](http://drupal.org/project/vagrant) ://drupal.org/project/vagrant请参阅上面的更多注释。
8.  2013-07-10：对编写本指南的原因进行了轻微的语法调整。更新了 O'Reilly 的 Vagrant 书现已出版。添加到[https://puphpet.com/](https://puphpet.com/)的链接- 在线 Vagrant 配置器脚本生成器（非常好！）。添加了 VeeWee 工具的链接，该工具用于从任何 .ISO Linux 发行版（标准安装光盘）生成 Vagrant .box 文件
9.  2013 年 10 月 14 日更新了“他们似乎没有做什么”项目符号，其中包含关于 Vagrant 版本的要点 - 本指南使用 Vagrant 1（以及为什么）。声明 Vagrant 2 与 puphpet.com 一起使用还链接到我使用 puphpet.com 为 Drupal 设置 Vagrant VM 的文档。
10.  2013-10-21 更新为使用 VirtualBox 版本和 Vagrant 的状态组合：VirtualBox 版本 4.2.12 和 Vagrant 1.2.2。某些其他组合可以工作，但我没有测试过这些组合，所以除非我能看到使用更高版本的明显好处，否则我会坚持使用这种组合。一个最明显的好处是配置速度。将标题放在 Vagrant VM 部分的其他方法上。更新说这个和其他解决方案是独立于平台的，应该可以在 PC、Mac 或 Linux 上运行。
11.  2013 年 10 月 23 日更新了本指南使用的 Vagrant 版本（即 v1.2 之前的版本（即 Vagrant 2 之前的版本））和另一种方法 puphpet.com（v1.2.2 - 相比之下是 Vagrant 2 版本。 )
12.  2013-12-03 更正了 Vagrant API 版本控制以及哪个 API 版本在哪个 Vagrant 软件版本中的注释。添加了一些更替代、更全面的 Vagrant 设置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T17:50:16.837

在您的虚拟机中，您需要运行：

```
$knife configure 
```

接受所有默认值。

运行此程序后，您的 ~/.chef/knife.rb 中将有一个配置文件。

至于您的图表： vagrant 文件夹包含该项目的 Vagrantfile 。实际的 .ovf 和 .vmdk 文件以及另一个 Vagranfile 存在于 /%USERPROFILE%/.vagrant.d/

Vagranfile 是 Vagrant 的配置文件，存在于多个位置，具有一定的优先顺序。项目文件夹中的 Vagrantfile 优先：[Vagrantfile 文档](http://docs.vagrantup.com/v1/docs/vagrantfile.html, "Vagrantfile 加载顺序文档")。

一切都可以来自本地主机，包括设置一个具有多个虚拟机的更复杂的 Vagrant 项目。

编辑：明确“刀配置”cmd 应该在 VM 中运行并删除虚假的 Windows 路径引用。

# java - 如何使用类似于示波器的 achartengine 绘制实时图形

> ID：14608879
> 
> 赞同：4
> 
> 时间：2013-01-30T16:28:14.817
> 
> 标签：java, android, eclipse, achartengine

我正在使用 achartengine。我必须阅读一个 txt 文件并绘制图表。我得到了图表。但是，我想要做的是当图形到达布局视图的末尾时，它应该从开始视图绘制，类似于示波器视图。我希望我的图表与此链接中的图表完全相似

```
 http://www.youtube.com/watch?v=N6BuRqeUhqc. 
```

到目前为止我所做的是：

```
 private class ChartTask extends AsyncTask<Void, String, Void>{
         String[] values = new String[2];int i1=0;

        // Generates dummy data in a non-ui thread
        @Override
        protected Void doInBackground(Void... params) {
            int i = 0;

            try{

                do{

                    values[0] = Integer.toString(i);
                    values[1] = Integer.toString(amplitude[i]);

                    if(i<=600){
                        multiRenderer.setXAxisMax(600);

                    }
                    else if(i>600){

                        double minX = amplitudeSeries.getMaxX();
                        multiRenderer.setXAxisMin(minX);                     

                    } 
                    publishProgress(values);
                    Thread.sleep(1);

                    i++; 

                }while(i<=amplitude.length);}

            catch (Exception e1){
            }
            return null;

            } 
```

有人可以帮我弄这个吗。感谢任何人的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T16:38:34.623

[使用AChartEngine](http://www.achartengine.org/)绘制动态图表应该很容易。只需更新数据集的内容并调用`chartView.repaint()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T07:55:26.410

这是一个动画任务。使用[Bitmap](http://developer.android.com/reference/android/graphics/Bitmap.html)保存图表并使用[计时器](https://stackoverflow.com/questions/4597690/android-timer-how)定期将每次调用的一对 X、Y 绘制到位图中。之后，调用 invalidate() 在设备屏幕上重新绘制位图。

您需要的最后一件事是微不足道的 mod 操作。以下是此定期调用代码的可能代码片段：

```
// Get position in bitmap from the iteration index 
int ig = mIteration % bitmap.getWidth(); 

// Erase the vertical line in bitmap
for (int y = 0, y < bitmap.getHeight(); i++) 
  bitmap.setPixel(ig, y, Color.WHITE); 

// Plot the point
bitmap.setPixel(ig, data[mIteration], Color.BLACK); 

// Advance mIteration field value.
mIteration = (mIteration + 1) % data.length; 

// Force to repaint component containing the bitmap.
invalidate(); 
```

这将关心您返回光标并在到达数据末尾后重复动画。

# asp.net-mvc-3 - mvc3 搜索页面条件

> ID：14608881
> 
> 赞同：1
> 
> 时间：2013-01-30T16:28:23.867
> 
> 标签：asp.net-mvc-3, if-statement

我有一个搜索页面，有 4 个选项城市、州、年份、学校

单击提交后，您将该信息放在文本框中，它会查询数据库以查找匹配的记录。这行得通，但我想知道是否有更有效的做事方式，例如您可以按城市、州或学校和年份进行搜索，但每次我都必须这样做......

```
 if(string school == null && int year == null)
{
 // then search for city,state
}
if(string city == null && string state== null)
{
// then search for school, year
}
 else
{
  //  search for city,state,school,year
} 
```

如您所见，这只有**4 个字段**，搜索每个字段变得乏味，特别是因为我计划在未来添加更多字段。有没有一种方法可以检查**1 if 语句中的所有内容，例如，如果用户离开城市，则将其设为空以忽略它。**

这是我的城市状态搜索示例

```
 public ActionResult search(string city, string state,string school,int year,int? page)
    {

        ViewBag.city = city;
        ViewBag.state = state;
        ViewBag.year = year;
        ViewBag.school = school;
        int pageSize = 10;
        int pageNumber = (page ?? 1);

        if (school == null && year ==null)
        {
  // I would like to put all my variables here and ignore blanks one like

            var article = (from x in db.relistings.OrderByDescending(x => x.relistingID)
                           where x.city == city && x.state == state select x);
            return View(article.ToPagedList(pageNumber, pageSize));
        } 
```

}

# javascript - 如何缩放此布局？

> ID：14608884
> 
> 赞同：14
> 
> 时间：2013-01-30T16:28:27.500
> 
> 标签：javascript, html, css, position, scale

现在已经在这个布局上工作了一段时间，每走一步我都会遇到某种障碍（这里的 v1：[https ://stackoverflow.com/questions/14572569/how-can-i-contain-pos-abs -div-within-specific-area](https://stackoverflow.com/questions/14572569/how-can-i-contain-pos-abs-div-within-specific-area) )

我现在要做的是让 .spread 的大小适应浏览器窗口的宽度和高度，因此它永远不会超过用户当前在浏览器中可以看到的大小（.spread 目前具有固定的宽度/高度，用于演示目的）。理想的情况是能够即时调整大小并立即适应（即没有媒体查询）。

它在我上面链接到的 v1 版本中可以正常工作，但是由于 .spread 缺少实际的宽度/高度，所以我遇到了淡入淡出效果的问题。

这是新的演示：http:
[//jsbin.com/uciguf/1](http://jsbin.com/uciguf/1)

更新：只要按照描述的方式工作，就可以更改标记。

```
<div class="scrollblock" id="scroll_spread-1">
    <div class="action"><!-- --></div>
    <!--  -->       
</div>
<div class="scrollblock" id="scroll_spread-2">
    <div class="action"><!-- --></div>
    <!--  -->       
</div>

<div class="contentblock" id="spread-1">
    <div class="inner windowwidth windowheight">
        <div class="content">
            <span></span>
            <div class="spread">
                <div class="fade"><!-- --></div>
                <div class="left centerimage">
                    <img src="http://s7.postimage.org/8qnf5rmyz/image.jpg">
                </div>
                <div class="right centerimage">
                    <a href="#scroll_spread-2"><img src="http://s7.postimage.org/kjl89zjez/image.jpg"></a>
                </div>
            </div>  
        </div>  
    </div>  
</div>

<div class="contentblock" id="spread-2">
    <div class="inner windowwidth windowheight">
        <div class="content">
            <span></span>           
            <div class="spread">
                <div class="fade"><!-- --></div>
                <div class="left centerimage">
                    <a href="#scroll_spread-1"><img src="http://s7.postimage.org/5l2tfk4cr/image.jpg"></a>
                </div>
                <div class="right centerimage">
                    <a href="#scroll_spread-3"><img src="http://s7.postimage.org/fjns21dsb/image.jpg"></a>
                </div>
            </div>
        </div>  
    </div>  
</div> 
```

```
html {
    height: 100%;
}

body {
    background: #eee;
    line-height: 1.2em;
    font-size: 29px;
    text-align: center;
    height: 100%;
    color: #fff;
}

.scrollblock {
    position: relative;
    margin: 0;
    width: 100%;
    min-height: 100%;

    overflow: hidden;
}

.contentblock {
    margin: 0;
    width: 0;
    min-height: 100%;

    overflow: hidden;

    position: fixed;
    top: 0;
    right: 0;
}

.contentblock .inner {
    z-index: 2;

    position: absolute;
    right: 0;
    top: 0;

    background: #eee;
}

.fade {
    width: 100%;
    height: 100%;

    position: absolute;
    right: 0;
    top: 0;

    background-color: #000;
    opacity: 0;

    z-index: 3;
}

.content {
    height: 100%;   
}

.content span {
   height: 100%;
   vertical-align: middle;
   display: inline-block;
}

.content .spread {
    vertical-align: middle;
    display: inline-block;
}

#spread-1 {
    color: #000;
    z-index: 105;
}

#spread-2 {
    z-index: 110;
}

.spread {

    max-height: 800px;
    max-width: 1130px;
    position: relative;
}

.spread .left {
    position: relative;
    width: 50%;
    float: left;
    text-align: right;
    height: 100%;
}
.spread .right {
    position: relative;
    width: 50%;
    float: left;
    text-align: left;
    height: 100%;
}

div.centerimage {
    overflow: hidden;
}
div.centerimage img {
    max-width: 100%;
    max-height: 100%;
}

div.centerimage span {
    height: 100%;
    vertical-align: middle;
    display: inline-block;
}
div.centerimage img {
    vertical-align: middle;
    display: inline-block; 
} 
```

PS标题真的很糟糕，不知道我在找什么，但是如果你能想到更好的东西，请换成更有用的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T14:22:32.533

## 完整解决方案的四分之三

这还不是一个完整的解决方案，因为*它无法容纳超窄宽度的窗口大小*（就像您的旧版本一样）。但是，这是朝着您所寻求的方向迈出的良好一步。

[这是示例。](http://jsbin.com/uciguf/9)

已更改的关键内容：

**添加**

```
.spread { height: 93%; } /* You had originally wanted a height difference */ 
```

**已移除**

*   `overflow: hidden`从`div.centerimage`.
*   `width: 50%`从`.left`和`.right`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T18:14:39.273

也许你可以固定你的 .spread 除数

```
.spread {
  bottom: 11px;
  left: 11px;
  right: 11px;
  top: 11px;
  position: absolute;
  /* ... */
} 
```

这样，它将被调整为与视口区域相同的大小。

这里有一个[jsFiddle](http://jsfiddle.net/D5XCt/1/)来演示。

继续

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T00:12:42.393

我知道您可能正在寻找一个单独的 CSS/HTML 解决方案，但实际上您可能最好使用一些 Javascript。仅使用 CSS 和 HTML 是无法做到干净和精确的。但是，如果您在页面加载和窗口调整大小时运行一点点 JavaScript，那么您的 div 可以具有实际的高度/宽度值并且可以干净地缩放。诀窍是让外部 div 获得由 JavaScript 设置的宽度/高度，然后它的所有子级都使用 % 尺寸，以便它们适当地增长。

这是使用一些 JQuery 的基础知识：

```
<script type="text/javascript">
//Function to get the current window dimensions.
function get_window_dims() {
    var dims = [];
        if (parseInt(navigator.appVersion)>3) {
            if (navigator.appName=="Netscape") {
                dims[0] = window.innerWidth;
                dims[1] = window.innerHeight;
            }
            if (navigator.appName.indexOf("Microsoft")!=-1) {
                dims[0] = document.body.offsetWidth;
                dims[1] = document.body.offsetHeight;
            }
        }
    return dims;
}
function ResizeDivs {
    var dims = get_widnow_dims();
    var div_width = Math.floor(dims[0] * 0.93); // calculating the div width to be 93% of the window width
    $('div.spread').css('width',div_width+'px');
}
$(function() {
    ResizeDivs();
    $(window).resize(function(){
         ResizeDivs();
    });
});
</script> 
```

您可以轻松地清理此代码以使其更简洁，但我想我会以这种方式将其放在这里以便您查看所有部分。如果您想花更多时间，您甚至可以添加更多 JQuery 以在窗口调整大小时为 div 设置动画。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T23:11:36.593

您是否考虑过使用响应式框架来解决您的问题？您可以将宽度和高度设置为百分比，并具有最小宽度、最小高度。

# less - 灰度不适用于 LESS

> ID：14608886
> 
> 赞同：2
> 
> 时间：2013-01-30T16:28:35.843
> 
> 标签：less, grayscale

我想使用灰度函数，但 LESS 一直抛出这个错误，我没有看到灰度的 mixin 或如何使用它。有什么帮助吗？

```
Error   148 Expected color in function 'grayscale'

 img {
     -webkit-filter: blur(2px) grayscale(1);
    -moz-filter: blur(2px) grayscale(1);
    -o-filter: blur(2px) grayscale(1);
    -ms-filter: blur(2px) grayscale(1);
    filter: blur(2px) grayscale(1);
 } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T17:48:59.843

试试下面的。LESS 可能无法识别`grayscale(1)`为自身的有效函数，也没有将 is 视为属性值，因此当您需要使用字符串插值来使 LESS 编译良好时。

```
 img {
    @filterString: ~"blur(2px) grayscale(1)";

     -webkit-filter: @filterString;
    -moz-filter: @filterString;
    -o-filter: @filterString;
    -ms-filter: @filterString;
    filter: @filterString;
 } 
```

# r - d_ply 和 dist() 一起

> ID：14608888
> 
> 赞同：1
> 
> 时间：2013-01-30T16:28:39.540
> 
> 标签：r, distance, plyr, correlation

我编写的 R 代码有问题。特别是它看起来像这样：

```
n<- nrow(aa)
for (i in 1:n)
{
A<- aa[i,]
d_ply(A, 1, function(row){  
cu<- dist(A)
    write.table(cu, file = paste(row$header, "txt", sep     = "."), sep = "\t")
}, .progress='text', .print = TRUE)
} 
```

我想从 aa 矩阵的每一行中获取一个文件（文件名应该是行的标题），包含该行的距离矩阵，但似乎很难。如果我尝试代码，我会收到此错误：

```
cannot coerce class '"dist"' into a data.frame 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T17:20:02.760

首先，假设`aa`是一个数据框，然后`A`只是一行。如果您已经在使用 ，则不需要使用 for 循环，该循环`d_ply`旨在将某些内容应用于数据框的每一行。

第二个问题是`dist`返回一个`dist`对象，在写入之前必须将其转换为矩阵。以下代码将执行此操作：

第三，`row`在使用`dist`.

这导致以下代码：

```
d_ply(aa, 1, function(row){  
    cu<- dist(as.numeric(row[-1]))
    write.table(as.matrix(cu), file = paste(row$header, "txt", sep = "."), sep = "\t")
}, .progress='text', .print = TRUE) 
```

# asp.net-mvc - MVC4 中 MVC 区域的正确用法是什么来创建以下解决方案结构？

> ID：14608893
> 
> 赞同：4
> 
> 时间：2013-01-30T16:29:17.530
> 
> 标签：asp.net-mvc, architecture, asp.net-mvc-4, visual-studio-2012

我想为我的 MVC4 应用程序设置以下解决方案结构，并使用[此处](http://msdn.microsoft.com/en-us/library/ee671793%28v=vs.100%29.aspx)定义的区域模型正确路由视图和控制器：

```
Solution

Project.Web
--Areas
----Admin
------Views
--------AdminBlahView1
--------AdminBlahView2
----Supervisor
------Views
--------SupBlahView1
--------SupBlahView2
----Evaluator
------Views
--------EvalBlahView1
--------EvalBlahView2

Project.Controllers
--Areas
----Admin
------AdminBlahView1Controller
------AdminBlahView2Controller
----Supervisor
-------SupBlahView1Controller
-------SupBlahView2Controller
----Evaluator
------EvalBlahView1Controller
------EvalBlahView2Controller 
```

“区域”实现是否为此目的而设计，我应该在哪里以及如何放置“ViewLocationFormats”的扩展，以使我的视图和控制器正常运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:29:34.323

你试过这个吗？唯一的区别是您的控制器位于 Controllers 子文件夹中，就像您的视图位于 Views 子文件夹中一样。

```
Solution

Project.Web
--Areas
----Admin
------Views
--------AdminBlahView1
--------AdminBlahView2
----Supervisor
------Views
--------SupBlahView1
--------SupBlahView2
----Evaluator
------Views
--------EvalBlahView1
--------EvalBlahView2

Project.Controllers
--Areas
----Admin
------Controllers
--------AdminBlahView1Controller
--------AdminBlahView2Controller
----Supervisor
------Controllers
--------SupBlahView1Controller
--------SupBlahView2Controller
----Evaluator
------Controllers
--------EvalBlahView1Controller
--------EvalBlahView2Controller 
```

# mysql - 尽管结果集很小，ORBER BY 子句仍使查询变慢

> ID：14608897
> 
> 赞同：3
> 
> 时间：2013-01-30T16:29:29.670
> 
> 标签：mysql, sql, performance, query-optimization

我有以下表格（删除了不相关的内容）：

```
create table Payment (
    id int not null auto_increment,
    status int not null,
    primary key(id)
);
create table Booking (
    id int not null auto_increment,
    paymentId int not null,
    nrOfPassengers int not null,
    primary key(id),
    key paymentFK (paymentId),
    constraint paymentFK foreign key (paymentId) references Payment(id)
); 
```

`Booking`包含 ~456k 行和`Payment`~331k 行。以下查询耗时 0.06 秒并返回 97 行：

```
select * from Booking b
join Payment p on b.paymentId = p.id
where p.status = 3 
```

如果我添加一个`order by`子句，则查询需要 4.4 秒，几乎慢了 100 倍：

```
select * from Booking b
join Payment p on b.paymentId = p.id
where p.status = 3
order by b.nrOfPassengers 
```

解释第一个查询：

```
id, select_type, table, type, possible_keys, key,       key_len, ref,  rows,   Extra
1,  SIMPLE,      p,     ALL,  PRIMARY,       NULL,      NULL,    NULL, 331299, Using where
1,  SIMPLE,      b,     ref,  paymentFK,     paymentFK, 9,       p.id, 1,      Using where 
```

第二个：

```
id, select_type, table, type, possible_keys, key,       key_len, ref,  rows,   Extra
1,  SIMPLE,      p,     ALL,  PRIMARY,       NULL,      NULL,    NULL, 331299, Using where; Using temporary; Using filesort
1,  SIMPLE,      b,     ref,  paymentFK,     paymentFK, 9,       p.id, 1,      Using where 
```

我使用 MySQL 5.1.34。

查询中使用的`where`子句从`Payment`. `where`我的印象是 MySQL 在使用（高度选择性）子句过滤结果集之前对结果集进行排序。我是对的吗？如果是这样，它为什么要这样做？我已经尝试分析这两个表，但查询计划没有变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:13:19.267

我有一个怀疑，问题是在你删除的不相关的东西中，有一个`TEXT`or`BLOB`列使 MySQL 去磁盘上存储临时表的中间结果。

无论如何，我们从执行计划中看到：对于`Payment`表中的每一行，从磁盘中获取它，检查条件，如果每个匹配行都为真，则`Booking`放入临时表中。使用所有数据对整个表进行排序`nrOfPassengers`并输出。如果有`Text`或`Blob`字段，则中间表存储在磁盘上并排序，因为 MySQL 无法预测表的大小。

您可以做的（像往常一样）是最小化磁盘操作。正如@ajreal 建议的那样，在`status`列上添加一个索引。如果它如此有选择性，您将不需要任何其他索引，但如果您将其扩展`paymentFK`到`(paymentId, nrOfPassengers)`它会更好。现在重写查询如下：

```
SELECT p.*, b.*
FROM (
  select p.id as paymentId, b.id as bookingId
  from Booking b
  join Payment p on b.paymentId = p.id
  where p.status = 3
  order by b.nrOfPassengers
) as ids
JOIN Payment p ON ids.paymentId = p.id
JOIN Booking b ON ids.bookingId = b.id; 
```

数据将按子查询顺序输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T16:37:19.790

首先，确保您的表上有适当的索引。假设您这样做并且它仍然比预期的要慢，您可以将结果放入子查询中而不对其进行排序，然后添加 ORDER BY 子句：

```
SELECT * 
FROM (
   select * from Booking b
   join Payment p on b.paymentId = p.id
   where p.status = 3
)
ORDER BY nrOfPassengers 
```

我不确定这有多少（或是否）有帮助，因为当我查看执行计划时它会添加一行，但它可能会更快。

祝你好运。

# gnuplot - 如何在 Gnuplot 4.2 中用整数标记 (x,y) 数据点

> ID：14608900
> 
> 赞同：4
> 
> 时间：2013-01-30T16:29:56.263
> 
> 标签：gnuplot

我有一个文本文件，其中有 2 列数字对应于 (x,y) 坐标。

```
4 1
4 5
1 1
1 5
2.5 3 
```

如何告诉 gnuplot 绘制这些点并用相应的行 # 标记每个点？（请记住，我将把它应用到一个有 100 个点的大得多的文件中，所以我正在寻找一种自动执行此操作的方法，而不是必须创建与行号相对应的第三列数据）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-30T17:00:47.267

您可以`with labels`在绘图命令中使用该标志。默认情况下，这会将标签而不是点放置在该点所在的位置。 `with label`接受`offset`标志（以及您可以传递给的任何标志`set label`），因此您可以在该点旁边放置标签。这是一个示例脚本：

```
#!/usr/bin/env gnuplot

reset

set terminal pngcairo
set output 'test.png'

set xr [0:5]
set yr [0:6]

plot 'data.dat' pt 7, \
     'data.dat' using 1:2:($0+1) with labels offset 1 notitle 
```

产生这个输出：

![在此处输入图像描述](../Images/f50412f4cc3629f2bffdd3e84cc6bc92.png)

# java - Android - 扩展 onGroupClick (ExpandableListView)

> ID：14608903
> 
> 赞同：0
> 
> 时间：2013-01-30T16:30:07.777
> 
> 标签：java, android, expandablelistview

如何扩展小部件的`onGroupClick`方法`ExpandableListView`。我当前使用的代码覆盖了原始方法的功能 - 我该如何扩展它？

代码：

```
//expandableList.setOnGroupClickListener(parentClickListener);

...

/*
private OnGroupClickListener parentClickListener = new OnGroupClickListener() {

    @Override
    public boolean onGroupClick(ExpandableListView parent, View v, int groupPosition, long id) 
    {
        ....
        return true;
    }

};
*/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-25T17:09:41.117

通过扩展功能，我假设您希望除了扩展组之外，您还应该能够做一些额外的事情。试试下面的代码：

```
@Override
public boolean onGroupClick(ExpandableListView parent, View v, int groupPosition, long id) {
    parent.expandGroup(groupPosition);
    Toast.makeText(mContext, "Hey there!", Toast.LENGTH_SHORT).show();
    return true;
} 
```

expandGroup 函数为您扩展组。但是，您现在必须自己管理组的崩溃事件。使用 parent.isGroupExpanded(groupPosition) 方法。

# c++ - 可以得到一个对象的静态类型吗？

> ID：14608906
> 
> 赞同：0
> 
> 时间：2013-01-30T16:30:14.127
> 
> 标签：c++, templates, type-conversion, std

我觉得这应该是显而易见的，但我想我今天很狡猾。

如何让编译器给我一个事物的静态类型？

前任：

```
auto it = m_security_look_aside.find(strPath);
if (it == m_security_look_aside.end())
    it = m_security_look_aside.insert(it, TYPE_OF(m_security_look_aside)::value_type(strPath, InternalIsLicensed(strPath))); 
```

`m_security_look_aside`是一个`std::unordered_map<std::string, bool>`。 `std::unordered_map<std::string, bool>`有一个`value_type`typedef。

我可以用它`std::unordered_map<std::string, bool>::value_type(key,value)`来构造一个属于这个无序映射的对。但是我怎样才能从实例转到它的静态类型呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:33:05.887

使用`decltype(m_security_look_aside)::value_type`- ie`decltype(m_security_look_aside)`可用于表示实例变量的类型。

但你在这里并不需要它。相反，你可以做

```
it = m_security_look_aside.emplace_hint(it, strPath, InternalIsLicensed(strPath)); 
```

这`value_type`使用参数（在初始“提示”迭代器之后）作为`value_type`.

# python - Python 3：更改现有函数参数的默认值？

> ID：14608908
> 
> 赞同：14
> 
> 时间：2013-01-30T16:30:19.943
> 
> 标签：python, parameters, python-3.x, arguments, default

我正在创建一个程序，它最终将有 500 次`print`函数调用，还有其他一些调用。这些函数中的每一个每次都将采用完全相同的参数，如下所示：

```
print(a, end='-', sep='.')
print(b, end='-', sep='.')
print(c, end='-', sep='.')
print(..., end='-', sep='.') 
```

有没有办法改变`print`函数参数的默认值？这样我就不必`end='-', sep='.'`每次都打字了？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-30T16:32:54.193

你可以定义一个特殊版本的`print()`using[`functools.partial()`](http://docs.python.org/3/library/functools.html#functools.partial)来给它默认参数：

```
from functools import partial

myprint = partial(print, end='-', sep='.') 
```

然后`myprint()`将在您的代码中使用这些默认值：

```
myprint(a)
myprint(b)
myprint(c) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T16:34:34.400

您还可以使用 lambda 函数：

```
my_print = lambda x: print(x, end='-', sep='-')
my_print(a)
my_print(b)
my_print(c) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-07-08T17:12:00.150

还有一种方法允许多个参数并与 lambda 一起使用：

```
my_print = lambda *args: print(*args, end="-", sep=".") 
```

# php - WebScraping之间的延迟

> ID：14608909
> 
> 赞同：-3
> 
> 时间：2013-01-30T16:30:21.240
> 
> 标签：php, dom, scrape

我正在使用网页抓取来使用简单的 PHP DOM 解析器类从某个网站获取数据我面临的问题很少。

1.  有两个网站返回错误 HTTP 403 禁止
2.  其次，根据下面的代码，我在 8 个 URL 之后从 9 个 URLS 中抓取 9 个产品，我收到错误，我对 url 进行洗牌并检查单个但它不是 url，它的执行时间或 Web 请求可能被允许，因为我得到 Appache windows 错误。我尝试使用 sleep(10) 来延迟它；它没有任何帮助将不胜感激

    ```
     $url = $this->urls['abc'].'Product/1/1_oz_Gold_American_Eagle___Random_Year.aspx';
            $regex = 'span[id=ctl10_ctl00_tc1_TabPnlProdDesc_lblbuyprice]';
              $data=$this->getCoinVal($url,$regex);     

                       $this->update_scrap(GAE_1,APMEX,strip_tags($this->r_dollar($data)),$url); 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-11-02T06:02:37.167

在括号 () 中使用它来延迟时间

```
 import time

  time.sleep(sec) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T07:15:29.700

那么错误是由于apache服务器中的内存泄漏造成的

所以使用这两行将使它工作。

```
 $dom->clear();  
              unset($dom); 
```

其中 $dom 是解析器类的对象

# android - Android/Facebook：在我的 Facebook 墙上发布 SD 卡中的图像

> ID：14608911
> 
> 赞同：0
> 
> 时间：2013-01-30T16:30:29.167
> 
> 标签：android, facebook, sd-card

根据我进行的几次搜索，这是我为了发送我刚刚保存在 SD 卡上的图像而写的

```
 public void postToWall() throws FileNotFoundException, MalformedURLException, IOException {
    loginToFacebook();
    if (facebook.isSessionValid()) {
        // Ok le login est bien enregistre
        Bundle bundle = new Bundle();
        bundle.putString("message","test");
        File file = (File) this.getIntent().getExtras().get("PICTURE_TAKEN");
        FileInputStream fis = new FileInputStream(file);
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        int data2 = 0;
            while ((data2 = fis.read()) != -1)
                baos.write(data2);
            fis.close();
            byte[] bytes = baos.toByteArray();
            baos.close();
            bundle.putByteArray("Picture", bytes);
        mAsyncRunner.request("me/feed", bundle, "POST", new FacebookPostListener(), null);
    }
} 
```

我成功发布了短信“消息”，但没有发布图片！（额外的“PICTURE_TAKEN”是与拍摄照片相关的文件）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T18:13:35.677

如果您正在开始一个新项目，您应该使用[Android 版 Facebook SDK 3.0 版](https://developers.facebook.com/android/)，其中发布照片非常容易：请参阅[Request.newUploadPhotoRequest](https://developers.facebook.com/docs/reference/android/3.0/Request#newUploadPhotoRequest%28Session,%20File,%20Callback%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:26:11.470

好的，所以我已经解决了我的问题，只需在 mAsyncRunner.request("me/feed", bundle, "POST", new FacebookPostListener(), null); 中将“me/feed”替换为“photos”。

# ruby-on-rails - 如何在 Rails 中使用相同的表单部分进行注册和编辑

> ID：14608912
> 
> 赞同：0
> 
> 时间：2013-01-30T16:30:30.593
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个关于 PHP 的网站，我想将其转换为 Rails。我使用 md5 存储密码，使用 _form partial 进行注册和编辑用户数据。我要求登录名和密码字段，这非常适合注册，但是当用户尝试编辑他的数据时，再次需要填写登录名和密码字段（密码字段具有密码类型并留空以进行编辑）。我如何使用这些表格并解决在编辑模式下输入密码的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:06:24.830

在您的模型中，仅在已填写密码字段时才添加验证，换句话说，在更新时，这些字段可以为空白。如果它们是空白的，那么它们将不会被验证或更改。

```
validates :password, 
          :confirmation => true, 
          :length => {:within => 8..20}, 
          :allow_blank => true, 
          :on => :update 
```

您可能还想在表单上添加注释，只有在您更改密码或电子邮件地址时才需要密码字段。

您可以检查`object.new_record?`（正如 Yoshiji 先生提到的）以确定它是新记录（还没有 id）还是现有记录以更改您的表单提示。

# java - Freemarker，是否可以默认设置计算机编号格式？

> ID：14608913
> 
> 赞同：6
> 
> 时间：2013-01-30T16:30:33.970
> 
> 标签：java, freemarker

关于[FreeMarker](http://freemarker.sourceforge.net/)，是否可以指示它默认将所有数字视为“计算机”数字？

我试图申请

```
cfg.setSetting(Configurable.NUMBER_FORMAT_KEY, "computer"); 
```

或者

```
cfg.setNumberFormat("computer"); 
```

配置对象，但结果不是预期的。相信这是文档的方法，有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T22:09:07.687

您指定的数字格式必须是`java.text.DecimalFormat`支持的。您现在可以做的最接近的事情是将语言环境切换到`en_US`（并更好地确保它不使用摸索；请参阅[http://freemarker.org/docs/app_faq.html#faq_number_grouping](http://freemarker.org/docs/app_faq.html#faq_number_grouping)）。或者，当然，你可以`?c`全部写 -s，但我想这就是你想要避免的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-09T16:44:28.947

尝试：

```
cfg.setNumberFormat("#"); 
```

它对我有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-12T09:29:30.233

根据[文档](http://freemarker.org/docs/pgui_config_settings.html)`Configuration`，可以在 Freemarker对象上设置它。

典型的功能弹簧上下文初始化：

```
<bean id="freemarkerConfig" class="org.springframework.web.servlet.view.freemarker.FreeMarkerConfigurer">
    <property name="templateLoaderPaths">
        <list>
            <value>classpath:META-INF/templates</value>
        </list>
    </property>
    <property name="freemarkerSettings">
        <props>
            <prop key="number_format">computer</prop>
        </props>
    </property>
    <property name="defaultEncoding" value="UTF-8" />
</bean>

<bean id="viewResolver" class="org.springframework.web.servlet.view.freemarker.FreeMarkerViewResolver">
    <property name="prefix" value="" />
    <property name="suffix" value=".ftl" />
    <property name="cache" value="true" />
    <property name="contentType" value="text/html;charset=UTF-8" />
    <property name="requestContextAttribute" value="request" />
</bean> 
```

请注意，number_format（或新版本 freemarker 的 numberFormat）设置为`FreeMarkerConfigurer`.

对于您的问题...我的猜测是您将其设置为错误的配置对象或范围。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-13T14:51:07.770

它在最新版本中工作，我可以在我的 Spring Boot 应用程序中执行此操作

`freeMarkerConfigurer.getConfiguration().setNumberFormat("computer");`

# sql - 从 C# (EF) 调用带有 XML 参数的 SQL Server 存储过程需要更长的时间

> ID：14608916
> 
> 赞同：0
> 
> 时间：2013-01-30T16:30:41.987
> 
> 标签：sql, sql-server, xml, stored-procedures

我们有一个存储过程，它接受一个`XML`非常大的参数。

```
CREATE PROCEDURE [dbo].[GetAllocationsOver100]
      @PartID int,   
      @Details xml
AS
BEGIN
      SET NOCOUNT ON;

      DECLARE @MemoryRecords TABLE (
            PartID int, AppId int, LocGuid uniqueidentifier, [Date] datetime, Level int
      )     

      INSERT INTO @MemoryRecords (PartID, AppId, LocGuid, [Date], Level)
            SELECT 
                  PartID = T.Item.value('@PartID[1]', 'int'),
                  AppId  = T.Item.value('@AppId[1]', 'int'),
                  LocGuid  = T.Item.value('@LocGuid[1]', 'uniqueidentifier'),
                  [Date] = T.Item.value('@Date[1]', 'datetime'),
                  Level  = T.Item.value('@Level[1]', 'int')
            FROM 
                  @Details.nodes('/parts/part') AS T(Item);

      WITH 
            Unitedpart as
            (
                  SELECT * FROM @MemoryRecords
                  UNION ALL
                  SELECT * FROM dbo.udf_GetAllPartsExcludingOne(@PartID)
            ),

            Aggregatedpart as
            (
                  SELECT 
                        AppId, LocGuid, [Date], SUM(Level) AS Aggregated
                  FROM 
                        Unitedpart
                  GROUP BY 
                        AppId, LocGuid, [Date] 
            )

      SELECT 
            DISTINCT(S.PartID)
      FROM 
            Aggregatedpart AGS
            JOIN dbo.udf_GetAllPartsExcludingOne(@PartID) S
                  ON AGS.AppId = S.AppId
      WHERE 
            AGS.Aggregated > 100
END 
```

存储过程通过实体框架从 C# 库中调用。

第一次执行时（在创建之后），它会在合理的时间（以秒为单位）内完成。任何后续执行（从 C# 应用程序或通过 Management Studio）都需要几分钟时间。

如果我们重置存储过程（通过执行`ALTER PROCEDURE`命令），然后使用 Management Studio 中的相同参数值调用它，它会一遍又一遍地快速完成。但是一旦从 C# 调用，后续的执行就会再次变慢。

有人见过这样的吗？

# java - 无法将 JScrollPane 添加到 GroupLayout 中的 JTextArea

> ID：14608919
> 
> 赞同：0
> 
> 时间：2013-01-30T16:30:43.927
> 
> 标签：java, swing, jscrollpane, layout-manager, grouplayout

这是我尝试过的代码，但滚动窗格未显示并且正在使用组布局。

```
import java.awt.BorderLayout;

public class JScrollPanel extends JFrame {

private JPanel contentPane;

/**
 * Launch the application.
 */
public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                JScrollPanel frame = new JScrollPanel();
                frame.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
}

/**
 * Create the frame.
 */
public JScrollPanel() {
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setBounds(100, 100, 450, 300);
    contentPane = new JPanel();
    contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
    setContentPane(contentPane);

    **final JTextArea textArea = new JTextArea();

    JScrollPane scrollpanedreapta = new JScrollPane(textArea, 
        JScrollPane.VERTICAL_SCROLLBAR_ALWAYS, 
           JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
    textArea.setLineWrap(true);
    textArea.setWrapStyleWord(true);
    contentPane.add(scrollpanedreapta, null);**

    GroupLayout gl_contentPane = new GroupLayout(contentPane);
    gl_contentPane.setHorizontalGroup(
        gl_contentPane.createParallelGroup(Alignment.LEADING)
            .addGroup(gl_contentPane.createSequentialGroup()
                .addGap(31)
                .addComponent(textArea, GroupLayout.PREFERRED_SIZE, 339, GroupLayout.PREFERRED_SIZE)
                .addContainerGap(54, Short.MAX_VALUE))
    );
    gl_contentPane.setVerticalGroup(
        gl_contentPane.createParallelGroup(Alignment.LEADING)
            .addGroup(gl_contentPane.createSequentialGroup()
                .addGap(31)
                .addComponent(textArea, GroupLayout.PREFERRED_SIZE, 172, GroupLayout.PREFERRED_SIZE)
                .addContainerGap(49, Short.MAX_VALUE))
    );
    contentPane.setLayout(gl_contentPane);
}
} 
```

当我启动代码时，它工作正常，当我溢出文本区域时，两个滚动窗格都没有显示。任何帮助家伙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T16:37:18.070

您应该将 添加`JScrollPane`到您的布局组而不是`JTextArea`，即替换

```
.addComponent(textArea, ...) 
```

和

```
.addComponent(scrollpanedreapta, ...) 
```

两次。

# python - 如何让 python 模块异步运行并接收来自其他模块的调用？

> ID：14608925
> 
> 赞同：3
> 
> 时间：2013-01-30T16:30:59.197
> 
> 标签：python, django, asynchronous, process

所以我目前正在为一个 Django 项目添加一个推荐引擎，并且需要为我的一个视图函数做一些繁重的处理（在一个外部模块中）。这显着减慢了页面加载时间，因为我必须加载一些数据，对其进行转换，根据请求发送的参数执行我的计算，然后将建议返回给视图。每次加载视图时都必须这样做。

我想知道是否有某种方法可以让推荐模块加载并转换内存中的数据，然后等待从视图发送参数，对这些参数运行计算，然后将其发送回视图。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T16:34:21.857

[Celery](http://celeryproject.org/)是一个非常擅长这类事情的任务队列。

它将允许您执行以下操作：

1.  用户请求查看
2.  view 启动一个异步任务来完成繁重的工作，然后立即返回给用户
3.  您可以从 javascript 轮询以查看您的任务是否已完成并在完成时加载结果

可能不是您正在寻找的流程，但 celery 绝对值得一试 Celery 也有一个很棒的[django 包](http://pypi.python.org/pypi/django-celery/)，非常易于使用

*重读您的问题*，我认为也可以围绕您的推荐引擎创建本地网络服务。启动时它可以将所有数据加载到内存中，然后你可以从你的 django 应用程序向它发出请求吗？

# java - Restlet，带参数的 get 示例

> ID：14608932
> 
> 赞同：2
> 
> 时间：2013-01-30T16:31:25.453
> 
> 标签：java, parameter-passing, restlet, restful-url

刚开始在 java 中使用 restlet，并高兴地惊讶它是多么容易。然而，这是看跌期权。然后我开始使用 get 但无法弄清楚如何使用 get 传递信息。

使用 put 很容易：

```
@Put
public Boolean store(Contact contact); 
```

但是，当我尝试使用 get 来执行此操作时，它不起作用。通过阅读，我认为我不必向它传递任何参数，只需要有这个：

```
@Get
public Contact retrieve(); 
```

然后将参数传递给 url 之类的？但我找不到有关如何执行此操作的任何信息。与 put 我可以使用：

```
resource.store(user1); 
```

请问有什么帮助吗？

我很确定这是我只需要查看示例然后就可以轻松完成的事情。如何从另一端的 url 中获取信息的示例也将非常有帮助。

谢谢

我现在在我的客户端：

```
String username = "tom";
ClientResource cr2 = new ClientResource("http://.../ContactManager/contacts/" + username);
ContactResource resource2 = cr2.wrap(ContactResource.class);
resource2.logIn(); 
```

在服务器端我有：

```
@Get
public Contact logIn(){
    System.out.println("name is " + resource.getAttributes().get("contactId"));     
    return null;
} 
```

但我不确定资源是什么？它在我的程序中不存在，并且不确定它需要是什么类型或在哪里声明它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:46:11.020

REST 的一个好方法是在 URI 中指定此联系人 ID。类似的东西：/contacts/mycontactid。

在应用程序类中附加资源时，您可以将此段定义为属性（在您的情况下为联系人 ID）。

```
public class ContactsApplication extends Application {
    public Restlet createInboundRoot() {
        Router router = new Router(getContext());
        router.attach("/contacts/", ContactsServerResource.class);
        router.attach("/contacts/{contactId}", ContactServerResource.class);
        return router;
    }
} 
```

然后你可以得到理查德在他的回答中提供的代码。

希望它可以帮助你。蒂埃里

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-10T21:11:44.740

我知道这个问题是很久以前提出的，但我认为您正在寻找的答案是：

申请代码

```
public class ContactsApplication extends Application {
    public Restlet createInboundRoot() {
        Router router = new Router(getContext());
        router.attach("/user/", ContactsServerResource.class);
        router.attach("/user/{user}", ContactServerResource.class);
        return router;
    }
} 
```

资源代码

```
@Get
public void login() 
String userName = (String)this.getRequestAttributes().get("user"); 
```

允许您从 URL中`(String)this.getRequestAttributes().get("user");`提取详细信息。

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T22:24:28.457

您正在寻找的似乎是：

```
public final Representation get() {
  String contactId = request.getAttributes().get("contactId"));
  // Find the Contact object with that id
  JacksonRepresentation<Contact> result = 
    new JacksonRepresentation<Contact>(contact);
  return result;
} 
```

另请参阅：[如何从 android 向 RESTlet webservice 传递参数？](https://stackoverflow.com/questions/7330841/how-to-pass-parameters-to-restlet-webservice-from-android)对于类似的方法。

# bing-maps - 在 bing 地图中查找相邻图块

> ID：14608934
> 
> 赞同：0
> 
> 时间：2013-01-30T16:31:31.347
> 
> 标签：bing-maps

我正在使用他们的 API 从 bing 抓取地图：http: [//msdn.microsoft.com/en-us/library/ff701724.aspx](http://msdn.microsoft.com/en-us/library/ff701724.aspx)

他们可以返回的最大图块是 900x834。我至少需要两倍。是否有一种简单的方法可以确定任何给定缩放级别的相邻图块以及给定分辨率的长/纬度。

换句话说，给定一个长、纬度、缩放级别和分辨率，在相同缩放级别和分辨率下，周围 8 个图块的长纬度是多少。或者有没有更好的方法来获取大地图？

这是我的 GET 请求： [http](http://dev.virtualearth.net/REST/v1/Imagery/Map/Aerial/#) : //dev.virtualearth.net/REST/v1/Imagery/Map/Aerial/# {lat},#{long}/#{rand(19)}?mapSize=900,834&format=png&key=我的钥匙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:30:34.630

如果不违反使用条款中设置的规则，就不可能做到这一点，尤其是关于图像检索（或合成）的自动化。请参阅：http: [//www.microsoft.com/maps/product/terms.html](http://www.microsoft.com/maps/product/terms.html)

如果您想通过可能的专用协议继续执行此操作（如果可能），我建议使用 mapArea 参数而不是使用中心的纬度，请参阅：http: [//msdn.microsoft.com/en-我们/图书馆/ff701724.aspx](http://msdn.microsoft.com/en-us/library/ff701724.aspx)

查看 mapArea 图像检索的示例：

```
http://dev.virtualearth.net/REST/V1/Imagery/Map/road?mapArea=37.317227,-122.318439,37.939081,-122.194565&ms=500,600&pp=37.869505,-122.2705;35;BK&pp=37.428175,-122.169680;;ST&ml=TrafficFlow&key=BingMapsKey 
```

如果您想以受支持的方式访问切片 url，您可以使用相同的图像服务来检索包含切片 url 的元数据。瓷砖基于四键模型，因此您将能够在当前视图附近加载瓷砖。

# postgresql - postgresql 函数的语法错误。不可能的语法

> ID：14608936
> 
> 赞同：0
> 
> 时间：2013-01-30T16:31:39.597
> 
> 标签：postgresql

我试图纠正这个功能，但这是不可能的！我声明一个整数“var_id”，并在id_val中插入第一个查询的值，如果为null，则将标签名称插入表中，var_id = last insert id，否则执行最后一个插入...

```
CREATE OR REPLACE FUNCTION public."InsertVideoTag"
(
  IN  in_idvideo  integer,
  IN  in_tagname  VARCHAR(25)      
)
RETURNS bigint AS
$$

DECLARE var_id bigint DEFAULT NULL;

SELECT var_id := IDTag FROM Tag WHERE TagName = in_tagname;

IF var_id IS NULL
THEN

INSERT INTO tag (   TagName )
VALUES( in_tagname );

var_id := SELECT CURRVAL(pg_get_serial_sequence('public.tag','idtag'));

END IF;

INSERT INTO video_has_tag 
(                 
  IDVideo,      
  IDTag             
)
VALUES 
(
  in_idvideo,                
  var_id             
);

SELECT CURRVAL(pg_get_serial_sequence('public.video','idvideo'));
$$
LANGUAGE 'plpgsql'
VOLATILE
CALLED ON NULL INPUT
SECURITY INVOKER; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:59:23.323

该功能可以转换为纯功能`SQL`，这将使其性能更好。我还注意到，`video_has_tag`如果使用相同的参数多次调用，当前的功能将在表中创建重复的条目。我已将函数更改为幂等。

我假设的第一个表结构：

```
CREATE TABLE tag (
  idTag   serial,
  tagName text);
CREATE TABLE video_has_tag (
  idVideo integer,
  idTag   integer); 
```

然后是函数本身：

```
CREATE OR REPLACE FUNCTION insVideoTag(in_idvideo integer, in_tagname text)
RETURNS integer STRICT AS $insVideoTag$

WITH
new_tag AS (
    INSERT INTO tag (tagName)
    SELECT $2
     WHERE NOT EXISTS (SELECT 1 FROM tag WHERE tagName = $2)
    RETURNING idTag, tagName
), tag_data AS (
    SELECT * FROM new_tag
    UNION
    SELECT idTag, tagName FROM tag
     WHERE tagName = $2
), new_target AS (
    INSERT INTO video_has_tag(idVideo, idTag)
    SELECT $1, td.idTag
      FROM tag_data td
     WHERE NOT EXISTS (SELECT 1 FROM video_has_tag
                        WHERE idVideo=$1 AND idTag=td.idTag)
    RETURNING idVideo, idTag
)
SELECT idVideo FROM (
    SELECT * FROM new_target
    UNION
    SELECT * FROM video_has_tag
     WHERE idVideo=$1 AND idTag=(SELECT idTag FROM tag_data)
) s;

$insVideoTag$ LANGUAGE sql; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T17:15:26.610

*   不需要 if 语句，一个 where 子句就足够了：
*   选择当前值不适合作为返回值（或输入到其他表 FK）：它可能在第一次插入后被碰撞。

* * *

```
DROP SCHEMA tmp CASCADE;
CREATE SCHEMA tmp ;
SET search_path=tmp;

CREATE TABLE tag
        ( idtag SERIAL NOT NULL PRIMARY KEY
        , tagname varchar
        );
CREATE TABLE video_has_tag
        ( idvideo INTEGER NOT NULL
        , idtag INTEGER NOT NULL REFERENCES tag (idtag)
        );

CREATE OR REPLACE FUNCTION tmp.insertvideotag
            ( in_idvideo  integer , in_tagname  VARCHAR  )
RETURNS bigint AS
$$

DECLARE var_id bigint DEFAULT NULL;

BEGIN

INSERT INTO tag (tagname )
SELECT in_tagname
WHERE NOT EXISTS (
        SELECT * FROM tag
        WHERE tagname = in_tagname
        );

INSERT INTO video_has_tag (idvideo,idtag)
SELECT in_idvideo, tg.idtag
FROM tag tg
WHERE tg.tagname = in_tagname
RETURNING idtag          
INTO var_id
        ;

RETURN var_id;
END;
$$
LANGUAGE 'plpgsql'
VOLATILE
CALLED ON NULL INPUT
SECURITY INVOKER;
SELECT insertvideotag(11, 'Eleven');
SELECT insertvideotag(12, 'Eleven');
SELECT insertvideotag(13, 'Thirteen');

SELECT tv.idvideo
        ,tv.idtag, tg.tagname
FROM video_has_tag tv
JOIN tag tg ON tg.idtag = tv.idtag
        ; 
```

结果：

```
NOTICE:  CREATE TABLE will create implicit sequence "tag_idtag_seq" for serial column "tag.idtag"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "tag_pkey" for table "tag"
CREATE TABLE
CREATE TABLE
CREATE FUNCTION
 insertvideotag 
----------------
              1
(1 row)

 insertvideotag 
----------------
              2
(1 row)

 idvideo | idtag | tagname  
---------+-------+----------
      11 |     1 | Eleven
      12 |     1 | Eleven
      13 |     2 | Thirteen
(2 rows) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T16:48:09.533

```
CREATE OR REPLACE FUNCTION public."InsertVideoTag"
(
  IN  in_idvideo  integer,
  IN  in_tagname  VARCHAR(25)      
)
RETURNS bigint AS
$$
DECLARE var_id bigint DEFAULT NULL;
begin
var_id := (select IDTag FROM Tag WHERE TagName = in_tagname);
IF var_id IS NULL
THEN
    INSERT INTO tag (   TagName )
    VALUES( in_tagname );
    var_id := (SELECT CURRVAL(pg_get_serial_sequence('public.tag','idtag')));
END IF;
INSERT INTO video_has_tag 
(                 
  IDVideo,      
  IDTag             
)
VALUES 
(
  in_idvideo,                
  var_id             
);
return (SELECT CURRVAL(pg_get_serial_sequence('public.video','idvideo')));
end;
$$
LANGUAGE 'plpgsql'
VOLATILE
CALLED ON NULL INPUT
SECURITY INVOKER; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T16:55:28.333

我发现使用 postgres 处理小写列和表名等要容易得多，因此我对您现有的代码进行了一些更改：

```
CREATE OR REPLACE FUNCTION public."insertvideotag"
(
  IN  in_idvideo  integer,
  IN  in_tagname  VARCHAR(25)      
)
RETURNS bigint AS
$$

DECLARE var_id bigint DEFAULT NULL;

BEGIN
--SELECT var_id := IDTag FROM Tag WHERE TagName = in_tagname;
SELECT idtag into var_id FROM tag WHERE tagname = in_tagname;

IF var_id IS NULL
THEN

INSERT INTO tag (   TagName )
VALUES( in_tagname );

--var_id := SELECT CURRVAL(pg_get_serial_sequence('public.tag','idtag'));
SELECT CURRVAL(pg_get_serial_sequence('public.tag','idtag')) into var_id;

END IF;

INSERT INTO video_has_tag 
(                 
  idvideo,      
  idtag             
)
VALUES 
(
  in_idvideo,                
  var_id             
);

SELECT CURRVAL(pg_get_serial_sequence('public.video','idvideo'));
END
$$
LANGUAGE 'plpgsql'
VOLATILE
CALLED ON NULL INPUT
SECURITY INVOKER; 
```

剩下的潜在问题是序列名称，也许你想返回什么值。

# symfony - 如何使用 FOSRESTBundle 为某些操作生成自定义路由？

> ID：14608939
> 
> 赞同：4
> 
> 时间：2013-01-30T16:31:43.763
> 
> 标签：symfony, symfony-2.1, fosrestbundle

我实际上使用 FOSRESTBundle 为我的 api Rest 使用自动路由生成，我[也](https://github.com/nelmio/NelmioApiDocBundle)使用[NelmioApiDocBundle](https://github.com/FriendsOfSymfony/FOSRestBundle)来生成 api 文档。

要为我在 routing.yml 中的 api 生成路由

```
users:
    type:     rest
    resource: Project\RESTBundle\Controller\UsersController 
```

但是对于某些操作，我想设置我的自定义路由...如果我尝试为某个操作添加另一个路由规则，它只会忽略它并生成自动路由。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T08:12:59.203

您必须在您设置的配置之后立即声明具有相同名称的路由。例如，以下工作。

```
users:
    type:     rest
    resource: Project\RESTBundle\Controller\UsersController

get_users:
    pattern:  /api/users/customUri.{_format}
    defaults: { _controller: ProjectRESTBundle:Users:indexAction, _format: json } 
```

# vb.net - 生成带有字母的数字前缀序列

> ID：14608941
> 
> 赞同：2
> 
> 时间：2013-01-30T16:31:48.490
> 
> 标签：vb.net, numbers, sequence, generated

我想生成一个数字序列作为“A0000”（即..一个字母后跟4个数字而不是随机生成的数字）。

我已经阅读了这篇用 Sql Server 完成的[文章](http://www.codeproject.com/Articles/491733/Auto-generated-sequence-number-in-SQL-Server)，我如何在 VB.Net 中实现它。

下面是 SQL Server 的代码：

```
create function CustomerNumber (@id int) 
returns char(5) 
as 
begin 
return 'C' + right('0000' + convert(varchar(10), @id), 4) 
end 
```

欢迎任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T16:38:46.060

VB.NET 中的相同功能：

```
Function CustomerNumber(id As Integer) As String
    return "C" & id.ToString("0000")
End Function 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T16:46:32.203

这应该做同样的事情：

```
"C" & id.ToString("d4") 
```

[**演示**](http://ideone.com/vO4j9C)

# sql - SQL 选择与其他表中的键关联的值

> ID：14608944
> 
> 赞同：1
> 
> 时间：2013-01-30T16:31:52.330
> 
> 标签：sql, select, mapping, selection

我有一个映射表`tableA`

```
key   value
----------- 
1     "John"
2     "George"
3     "Kate"
4     "loves"
5     "hates" 
```

另一个`tableB`包含基于键的行`tableA`

```
col1   col2   col3
------------------
1      5      2
2      4      3
3      4      1 
```

我想编写一个选择查询，它将返回行`table B`但替换为它们的适当值。

例如输出必须是：

```
John   | hates | George
George | loves | Kate
Kate   | loves | John 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T16:38:19.327

```
SELECT A1.value, A2.value, A3.value 
FROM tableB 
JOIN tableA as A1 ON tableB.col1 = A1.key 
JOIN tableA as A2 ON tableB.col2 = A2.key 
JOIN tableA as A3 ON tableB.col3 = A3.key; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T17:01:05.880

您可能应该将最后 2 项“loves”和“hates”放入单独的表中，因为它们代表的数据类型与其他 3 项不同。

以下是表格：

用户：

```
id  name
----------
 1  John
 2  Edward
 3  Kate 
```

情怀：

```
id  type
----------
 1  love
 2  hate 
```

感受_用户：

```
id  user1_id  feeling_id  user2_id
-----------------------------------
 1      1         2          2
 2      2         1          3
 3      3         1          1 
```

这是查询：

```
select `Ua`.`name`, `F`.`type`, `Ub`.`name` from `feelings_users` as `X`
left join `users` as `Ua` on `X`.`user1_id` = `Ua`.`id`
left join `feelings` as `F` on `X`.`feeling_id` = `F`.`id`
left join `users` as `Ub` on `X`.`user2_id` = `Ub`.`id` 
```

它会输出：

```
name    type  name
--------------------
John    hate  Edward
Edward  love  Kate
Kate    love  John 
```

# c++ - 如何在 Visual Studio 中添加 C++ 项目引用？

> ID：14608945
> 
> 赞同：17
> 
> 时间：2013-01-30T16:31:53.373
> 
> 标签：c++, visual-studio, project

在 C# 中，添加将构建依赖项的项目引用非常简单，将生成的程序集放在原始的 Debug/ 目录中并针对该程序集正确编译。

所以目前，我在一个解决方案中有一个带有 Main() 的项目和一个静态库项目。但是，当我编译 Main() 项目并查看 bin/Debug/ 目录时，我没有找到我认为需要存在的 Static.lib 文件或 .obj 文件，或者其他什么.. . 我收到链接器错误。

我想也许我必须配置项目以找到由静态库项目生成的 .obj 和 .lib 文件（编译得很好，并且实际上生成了这些文件。）

我遗漏了一些东西，而且我不太精通使用 C++ 的 Visual Studio。

如何在 Main 项目中添加引用以使用静态库项目生成的库？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T16:49:21.153

您必须了解的第一件事是，静态库与 .NET 程序集完全不同。它们链接到 .exe 中，并且不作为单独的实体分发。

您的链接器错误很可能是您未链接到库的结果。

有几种方法可以定义必须链接的库。**一个是链接器 -> 输入 -> 附加依赖项**下的项目设置，另一个是通过的廉价路线`#pragma comment(lib, "path to library")`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T16:48:47.247

您可以通过进入项目属性->链接器->输入->附加依赖项来添加所需的.lib文件的名称

然后你必须在 VC++ Directories->Library Directory 中提供你的库所在的文件夹。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-23T05:12:05.983

这是一个非常全面的答案：[visual c++: #include files from other projects in the same solution](https://stackoverflow.com/questions/601268/visual-c-include-files-from-other-projects-in-the-same-solution/601285#601285)

它描述了链接器的设置以及引用另一个 C++ 项目时的其他要点。（尤其是来自 C# 但不太精通 C++ 时）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-13T19:31:00.723

如果您在同一个解决方案中构建多个项目，请使用项目引用自动将您的库和可执行文件链接在一起：

[https://docs.microsoft.com/en-us/visualstudio/msbuild/common-msbuild-project-items?view=vs-2019#projectreference](https://docs.microsoft.com/en-us/visualstudio/msbuild/common-msbuild-project-items?view=vs-2019#projectreference)

这在这里解释得很好：

[https://milania.de/blog/Project_references_in_Visual_Studio_and_C%2B%2B](https://milania.de/blog/Project_references_in_Visual_Studio_and_C%2B%2B)

这种方法的优点是构建顺序是正确的。正如其他答案中所建议的那样，使用附加依赖项将无法维持正确的构建顺序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-02T11:21:56.483

在 .NET 中，设计目标之一是使这个过程变得更加容易和自动化。任务在那里完成。

在原生 C++ 世界中，该过程更加手动。这大致是我将不同模块连接在一起的过程。

*   在解决方案中包含所有相关模块。
*   将每个项目的输出目录设置为同一目录。右键单击每个项目，选择属性，通常将输出目录设置为：`$(SolutionDir)\Bin\$(Configuration)\$(PlatformTarget)`. 为了减少头痛，为所有配置和平台设置此项。然后所有文件将被放置在类似 `\your-solution\bin\Debug\x64`.
*   设置项目依赖项 - 右键单击​​将链接到另一个项目的每个项目 -> 选择构建依赖项并选择引用的项目。
*   通过右键单击调用项目并选择属性来设置链接过程。转到链接器-> 输入并添加： `$(SolutionDir)\Bin\$(Configuration)\$(PlatformTarget)\MyLibrary.lib`
*   对于要链接到的实际函数，我将函数声明设置为类似（函数声明有很多变体，有点超出了这里的范围）：

#define DllExport __declspec(dllexport)

extern "C" void DllExport WINAPI`Testing();

*   在调用函数的实际 cpp 文件中，我添加如下内容：

    #include "..\MyLibrary\mylibrary.h"

*   然后在实际的调用函数中。只需添加被调用函数：

    测试（）；

# php - WSO2 WSF/PHP 服务器与可视化 foxpro 客户端

> ID：14608946
> 
> 赞同：0
> 
> 时间：2013-01-30T16:31:55.250
> 
> 标签：php, web-services, wso2, foxpro, wsh

我正在使用 WSO2 WSF/PHP (wamp)，并且正在尝试使用来自 foxpro 客户端的示例 Web 服务 (echo_service.php)。我试过这段代码没有成功：

```
TEXT TO requestPayloadString NOSHOW
<?xml version='1.0' encoding='utf-8'?>
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope">
   <soapenv:Header/>
   <soapenv:Body>
     <ns1:echoString xmlns:ns1="http://wso2.org/wsfphp/samples">
         <text>Hello World!</text>
     </ns1:echoString>
    </soapenv:Body>
</soapenv:Envelope>
ENDTEXT

LOCAL httpRequest
httpRequest = CREATEOBJECT("WinHttp.WinHttpRequest.5.1")

httpRequest.Open("GET", "http://192.168.56.101/samples/echo_service.php", .F.)
httpRequest.SetRequestHeader("Content-Type", "text/xml; charset=utf-8")
httpRequest.SetRequestHeader("SOAPAction", "http://wso2.org/wsfphp/samples/echoString")
httpRequest.Send(requestPayloadString)

? httpRequest.ResponseText 
? TRANSFORM( httpRequest.Status )
? TRANSFORM( httpRequest.StatusText ) 
```

`status = 200`上面返回带有和的服务描述（部署的服务 samples_echo_service.php 可用操作 echoString）`statustext = OK`。

随着`POST`我得到

```
Transport identified SOAP version does not match with SOAP message version
status=500 statustext=Internal Server Error 
```

下一个代码返回一个`OLE error`( `Error 1429`)：

```
SoapMapper:Restoring data into SoapMapper returnVal failed HRESULT=0x80070057:
The parameter is incorrect.
   - Client:Unspecified client error. HRESULT=0x80070057: The parameter is incorrect.

lcWSDL = "http://192.168.56.101/samples/echo_service.php?wsdl"
loSoap = Createobject("mssoap.soapclient30")
loSoap.MSSoapInit(lcWSDL)
loSoap.echoString("hello") 
```

php 中的客户端示例工作正常。该代码适用于其他网络服务（尝试[http://webservicex.net/periodictable.asmx](http://webservicex.net/periodictable.asmx)）

需要任何帮助来解决这个问题。

此外，如果使用 WSO2 WSF/PHP 的 Web 服务过于复杂，是否有任何 PHP 替代方案可以与 Visual Foxpro 一起使用？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:04:10.717

在分析和比较了 foxpro 和工作 php 客户端发送的标头之后，唯一的区别是：

```
httpRequest.SetRequestHeader("Content-Type", "application/soap+xml;charset=UTF-8") 
```

更换内容类型解决了问题，但我仍然无法使用soapclient ...

# xml - 将动态内容添加到 XML 文档

> ID：14608950
> 
> 赞同：-1
> 
> 时间：2013-01-30T16:32:06.150
> 
> 标签：xml, vb.net, visual-studio-2010, linq-to-xml, xelement

你能帮我处理这段代码吗？谢谢你。

在今天这个词下的代码中，有一个警告：**此处不能使用嵌入式表达式**

```
Dim doc = _
New XElement("Books", _
New XElement("Book", _
New XAttribute("ISBN", "0000000000001"), _
New XAttribute("RecordDate", <%= Today %>), _
New XElement("Price", 11.95), _
New XElement("Name", "Book Title 1"), _
New XElement("Stock", _
New XAttribute("InStock", 12), _
New XAttribute("OnOrder", 24)))) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:52:12.770

看起来您正在尝试像在 asp.net 中一样进行编码，请尝试如下更改用法：

`New XAttribute("RecordDate", DateTime.Today)`

如果要使用嵌入式表达式，则不需要使用 Linq-to-xml 构造 using`new XAtrribute`等，但可以直接构造 xml，如本[例所示](http://msdn.microsoft.com/en-us/library/bb384964%28v=VS.90%29.aspx)

# c - C 代码似乎错位了使用 fscanf 读取的值

> ID：14608951
> 
> 赞同：-1
> 
> 时间：2013-01-30T16:32:13.423
> 
> 标签：c, variables, variable-assignment, scanf

我写了一个 C 程序，它的行为方式我不理解。我发布这篇文章是希望我能更多地了解 C。代码似乎正在使用 fscanf 将变量名写入其他变量，而根本没有要求它......

```
#include <stdio.h>
#include <stdlib.h>

int main() {
float BCL[6];
float varsRA[23],varsLA[23],varsBB[23],varsPV[23];  
FILE *inputfil;
int i;

inputfil = fopen ("file.txt", "rt");        
for(i=0;i<24;i++) {
    fscanf(inputfil,"%f %f %f %f\n", &(varsRA[i]), &(varsLA[i]), &(varsBB[i]), &(varsPV[i]));
}

i=23;
printf("vars%d:%f %f %f %f\n",i,varsRA[i], varsLA[i], varsBB[i], varsPV[i]);

i=0;
while(!feof(inputfil)) {
    fscanf(inputfil,"%f ",&(BCL[i]));
    i++;
}

i=23;
printf("vars%d:%f %f %f %f\n",i,varsRA[i], varsLA[i], varsBB[i], varsPV[i]);

fclose(inputfil);
return 0;
} 
```

结果是：

```
vars23:-66.336823 -68.164223 -57.850136 -60.762585
vars23:-66.336823 -68.164223 -57.850136 177.000000 
```

为什么当我读取文件的其余部分时，varsPV 的最后一个值变为 177，这是 BCL 的第一个值？！

非常感谢你的帮助，玛塔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T16:34:02.937

该程序具有未定义的行为，因为它正在访问超出数组的范围：

```
for(i=0;i<24;i++) {
    fscanf(inputfil,"%f %f %f %f\n", &(varsRA[i]), &(varsLA[i]), &(varsBB[i]), &(varsPV[i]));
} 
```

数组索引从`0`到`N - 1`，其中`N`是数组中元素的数量。数组定义有 23 个元素，这意味着有效索引是 from`0`到`22`。将循环终止条件更改为`i < 23`或使用编译时间常数来定义数组大小和终止条件以避免重复该信息。

程序中还有其他越界访问，这个循环需要保护以防止越界：

```
i=0;
while(!feof(inputfil)) {              /* i < 6 required */
    fscanf(inputfil,"%f ",&(BCL[i]));
    i++;
} 
```

始终检查 的返回值`fscanf()`以确保实际进行了分配。`fscanf()`返回分配的数量：

```
for (i = 0; i < 6 && 1 == fscanf(input, "%f", &BCL[i]); i++); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T16:35:05.920

您的数组定义不够大。该数组`varsRA[23]`仅包含 23 个元素，编号`0`为`22`. 您正在阅读编号为 的24*个*元素。将您的数组定义更改为以下内容，您应该一切顺利。`0``23`

```
float varsRA[24],varsLA[24],varsBB[24],varsPV[24]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T16:35:02.383

C 中的数组索引是从零开始的。

```
float varsRA[23],varsLA[23],varsBB[23],varsPV[23] 
```

这些数组有 22 作为它们的*最后一个有效索引*，即 23 个元素。这就是为什么

```
for(i=0;i<24;i++) 
```

向它们中的每一个写入一个额外的元素。您得到的是未定义的行为（因此没有任何合理的期望），但是您特定的未定义行为是覆盖另一个数组的一部分（可能还有一些随机内存位置）。

# java - ORA-00913: 值过多

> ID：14608953
> 
> 赞同：2
> 
> 时间：2013-01-30T16:32:19.087
> 
> 标签：java, oracle, jdbc, oracle11g, ora-00913

获得`ORA-00913:`太多的价值。不知道如何解决这个问题请任何人都可以帮助我吗？

```
con2 = DriverManager.getConnection("Jdbc:Oracle:thin:@localhost:1521:XE", "system",
                "oracle123");
        File image=new File("E:/Users/ganesh/Desktop/line.jpg");
        String sql="insert into blobtab values(?,?)";  
        pstmt=con2.prepareStatement(sql);
        pstmt.setString(1,"akshita");
        fis=new FileInputStream(image);
        pstmt.setBinaryStream(2,(InputStream)fis,(int)(image.length()));
        int s = pstmt.executeUpdate();
        if (s > 0) {
            System.out.println("Image Uploaded successfully !");
        } else {
            System.out.println("unsucessfull to upload image.");
        }
        con2.close();
        pstmt.close(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T17:19:04.187

这表明您的 blobtab 表中没有两列（或者如果表上有触发器，请检查在相同问题中递归触发的 DML）。

```
insert into blobtab values(?,?) 
```

例如：

```
SQL> create table foo(id number);

Table created.

SQL> insert into foo values (1, 2);
insert into foo values (1, 2)
           *
ERROR at line 1:
ORA-00913: too many values 
```

检查你的桌子。此外，您应该始终在插入时放置明确的列名（以防有人稍后添加默认或可为空的列。即总是这样做：

```
insert into blobtab (col1, col2) values(?,?) 
```

`col1` `col2`您的真实列名在哪里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-04T05:40:51.693

**列数将小于传递的参数/参数**

例如： insert into insert **into foo(name , age) values (?,?,?)**然后preparedStatment object insert

由于有**2 列并且值有 3 个参数** ，因此 ORA-00913：值太多

# internet-explorer - Internet Explorer 扩展：带有图标的上下文菜单项

> ID：14608957
> 
> 赞同：1
> 
> 时间：2013-01-30T16:32:42.317
> 
> 标签：internet-explorer, bho

我正在为带有 BHO 的 Internet Explorer 开发一个扩展。

我的问题是：如何向扩展程序的上下文菜单项添加图标？

我在哪里可以阅读有关此主题的信息？

# iis - 更改 IIS 7 中的功能委托 - 命令行

> ID：14608963
> 
> 赞同：0
> 
> 时间：2013-01-30T16:33:20.247
> 
> 标签：iis

嗨，有什么方法可以更改功能委派，以便通过命令行在 IIS 7 中读取/写入所有委派？

甚至是命令行改一个。我在网上搜索过，但到目前为止我找不到任何东西。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-29T10:15:27.883

```
<CustomAction Id="QtExecHandlers_Cmd" Property="QtExecHandlers" Value="&quot;[SystemFolder]inetsrv\appcmd&quot; unlock config /section:handlers" Execute="immediate"/>

<CustomAction Id="QtExecHandlers" BinaryKey="WixCA" DllEntry="CAQuietExec" Execute="deferred" Return="check" Impersonate="no"/> 
```

# javascript - 总和值单选按钮 javascript

> ID：14608969
> 
> 赞同：0
> 
> 时间：2013-01-30T16:33:47.473
> 
> 标签：javascript, html

有谁知道如何总结价值的总和。我想将总数乘以 1072。我试了一下。但这并没有很好地解决..

所以我想要一个javascript代码，其中将计算标记的4个值的总数。

```
 <html>   
    <head>
        <h2>Inboedelwaardemeter</h2>
        <script type="text/javascript">
            function sumCheckedRadioButtons() {
                  var sum = 0;
                  $('input[type=radio]:checked').each(function(i, el) {
                    sum += Number($(el).val());
                  });
                  return sum;
                }
                $('#show_sum').on('click', function() {
                    alert(sumCheckedRadioButtons());
                });
        </script>
    </head> 
    <body>
        <br>
        <b> Leeftijd hoofdkostwinner:</b>
        <form name="mijnForm1">
        <br>
            <input type="radio" id="getal1" name="leeftijd"
                value="22" checked> 35 jaar en jonger
              <br>    
            <input type="radio" id="getal2" name="leeftijd"
                value="29"> 36 t/m 50 jaar
              <br>
            <input type="radio" id="getal3" name="leeftijd"
                value="38"> 51 jaar en ouder
              <br>
            <br>
        <b> Samenstelling huishouden:</b>
        <br>
        <form name="mijnForm2">
            <input type="radio" id="getal4" name="huishouden"
                value="22" checked> Alleenstaande
              <br>    
            <input type="radio" id="getal5" name="huishouden"
                value="29"> Echtpaar / Samenwonende
              <br>
              <br>  
        <b> Netto maandinkomen hoofdkostwinner</b>
        <br>
        <form name="mijnForm3">
            <input type="radio" id="getal6" name="hoofdkostwinner"
                value="22" checked> Tot en met €1000,-
              <br>    
            <input type="radio" id="getal7" name="hoofdkostwinner"
                value="29"> €1001,- tot en met €2000,-
              <br>
            <input type="radio" id="getal8" name="hoofdkostwinner"
                value="38"> €2001,- tot en met €3000,-
             <br>
            <input type="radio" id="getal9" name="hoofdkostwinner"
                value="38"> €3001,- of hoger
            <br>
            <br>
            <b> Oppervlakte woning</b>
            <br>
        <form name="mijnForm4">
            <input type="radio" id="getal10" name="Oppervlakte"
                value="22" checked> tot en met90m²
              <br>    
            <input type="radio" id="getal1" name="Oppervlakte"
                value="29"> 91m² tot en met 140m²
              <br>
            <input type="radio" id="getal12" name="Oppervlakte"
                value="38"> 141m² tot en met 190m²
             <br>
            <input type="radio" id="getal13" name="Oppervlakte"
                value="38"> 191m² of meer
            <br>
        </form>
        <input type="button" id="show_sum" value="Show Sum" />
    </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T16:44:31.663

使用 jQuery，您可以简单地选择所有选中的单选按钮并将它们的数值添加到总和中：

```
function sumCheckedRadioButtons() {
  var sum = 0;
  $('input[type=radio]:checked').each(function(i, el) {
    sum += Number($(el).val());
  });
  return sum;
} 
```

这是一个[有效的 jsFiddle](http://jsfiddle.net/VnKjE/)（按“结果”窗格底部的“显示总和”按钮）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T16:41:29.160

以下是一个香草js解决方案：

```
function checkTotal() {
   var a =  document.querySelectorAll('input:checked'); 
   var total = 0;
   for(var x=0; x < a.length;x++){
      total += a[x].value * 1;
   }
   alert(total);
} 
```

注意：queryselector 仅在（相对）现代浏览器中可用[http://caniuse.com/queryselector](http://caniuse.com/queryselector)

这里的例子：http: [//jsfiddle.net/2eU4E/1/](http://jsfiddle.net/2eU4E/1/)

# c# - JavaScript 文件的本地路径在加载到 WebBrowser 控制本地 HTML 页面时不起作用

> ID：14608971
> 
> 赞同：0
> 
> 时间：2013-01-30T16:33:50.873
> 
> 标签：c#, javascript, wpf, xaml, browser

所以我加载本地 HTML 文件没有任何问题，但 JavaScript 根本不起作用。

此 html 和 JS 具有正在加载到 WebBrowser 控件的 index.html。

```
<video width="640" height="360" style=" margin: 0 !important; padding: 0 !important;  overflow:hidden;"    id="player1" src="http://archive.bogi.ru/files/S2J4NW1xUVVqb2NKLWZINnE4bFFKb3VxY25TU1FsZWo5aTZpVlltWUk5R3lxSk5vCmllYWJiLVZ3LUZ0cTZ1UjRCYV9nUy1fbVMzMjQyblRhVHYxa2lB" type="video/mp4" > </video>

<script>
    MediaElement('player1', {
        success: function (me) {
            me.play();
        }
    }); </script> 
```

任何线索如何解决？

![在此处输入图像描述](../Images/74c3a026d60bba1ab4b9c9d7815e7000.png)

**PS**我已启用此选项： **Internet 选项 > 高级 > 安全 > 允许活动内容在我的电脑上的文件中运行。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:09:41.473

我已经遇到了这个问题（当你链接到 jquery 文件时）

而不是链接到 src 到您的 jquery 文件在此标记之间复制 jquery 文件内容：

```
<script type="text/css">
//Copy First jquery content here
</script>
<script type="text/css">
//Copy secound jquery content here
</script>
.
.
. 
```

# python - python telnetlib 预期错误：TypeError：不能在类似字节的对象上使用字符串模式

> ID：14608973
> 
> 赞同：4
> 
> 时间：2013-01-30T16:33:54.353
> 
> 标签：python, python-3.x, telnetlib

我试图将 2 个预编译的正则表达式传递给 python 的 telnetlib expect 方法，但我得到： TypeError: can't use a string pattern on a bytes-like object。示例代码如下：

```
import re,sys,telnetlib

tn=telnetlib.Telnet('localhost',23,10)

re_list=[re.compile("login:",re.I),re.compile("username:",re.I)]
print("re_list:",re_list)
# Expect gets errors here
index,obj,data=tn.expect(re_list,10) 
```

示例输出如下：

```
python tn_exp_bug.py
re_list: [<_sre.SRE_Pattern object at 0x00A49E90>, <_sre.SRE_Pattern object at 0x00A6CB60>]
Traceback (most recent call last):
File "tn_exp_bug.py", line 8, in <module>
index,obj,data=tn.expect(re_list,10)
File "c:\python33\lib\telnetlib.py", line 652, in expect
return self._expect_with_select(list, timeout)
File "c:\python33\lib\telnetlib.py", line 735, in _expect_with_select
m = list[i].search(self.cookedq)
TypeError: can't use a string pattern on a bytes-like object</pre> 
```

其他细节：我在 Windows XP，Python 版本 3.3.0 上运行。我检查了 bugs.python.org 并且只有 1 个用于 telnet 的开放错误，这似乎根本不相关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T17:24:07.163

您尝试在字节对象上使用字符串模式，而您应该使用字节模式：

```
re.compile(b"login:",re.I),re.compile(b"username:",re.I) 
```

# highcharts - Highstocks 四舍五入值，超过两个小时的查看范围不准确

> ID：14608976
> 
> 赞同：1
> 
> 时间：2013-01-30T16:33:58.847
> 
> 标签：highcharts, highstock

我正在使用 highcharts 为基本温度或类似性质的事物执行传感器绘图。问题是我将当前默认视图设置为 3 天，但在该视图中它会扭曲 y 轴数据值。

例如，如果大部分数据是 1.5，但值也为 10，则在三天视图中，y 轴仅显示最大为 3 或 4 的范围。它显示实际折线图中的峰值，但是当您将鼠标悬停在值是 3 或 4 而不是 10 的点上。但是，如果我将视图缩小到 2 小时，则数据将正确显示，然后该值返回 10，y 轴容纳 10 值。

此外，我似乎在不断四舍五入的数据方面遇到问题，因为值应该是稳定的 1.5，它一直被四舍五入到 1。

任何帮助将不胜感激，我将整天坐在电脑前回答有人可能对此问题提出的任何问题。

```
$.getJSON('mkjson.php?device=<?echo $device_name;?>&sensor=<?echo $sensor_name;?>&pin=<?echo $pin;?>&user=<?echo $_SESSION['user'];?>', function(data) {
    // Create the chart
    window.chart = new Highcharts.StockChart({
        chart : {
            renderTo : 'container',
            zoomType: 'x'
        },

        rangeSelector : {
            selected : 1
        },

        title : {

            text : 'Device:<?echo $device_name;?>'
        },
        subtitle : {
            text : 'Sensor:<?echo $sensor_name;?>'

        },

        xAxis : {
            minRange: 600 * 1000 // one hour
        },

        yAxis : {
            title : {
                text : '<?echo $unit;?>'
            }

        },
        rangeSelector : {
            buttons : [{
                type : 'minute',
                count : 10,
                text : '10m'
            }, {
                type : 'hour',
                count : 1,
                text : '1H'
            }, {
                type : 'day',
                count : 1,
                text : '1D'
            },
            {
                type : 'day',
                count : 3,
                text : '3D'
            }],
            selected : 3,
            inputEnabled : false
        },          

        series : [{
            name : 'Voltage',
            data : data,
            tooltip: {
                valueDecimals: 2
            }
        }]
    });
}); 
```

这是数据如何倾斜的示例。右侧的高点是 10 和 13，但它们仅显示为 3。 ![例子](../Images/e5e971c151ca03d7559726c12c7748bf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:39:34.427

看一下，[`dataGrouping`](http://api.highcharts.com/highstock#plotOptions.line.dataGrouping)因为它可以让您确定如何分组或完全关闭它。它默认启用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:56:37.400

您是否尝试过使用 numberFormat() [http://api.highcharts.com/highstock#highcharts.numberFormat()](http://api.highcharts.com/highstock#highcharts.numberFormat())

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T18:18:42.160

我被自动舍入烧死了；该图表对其点的内部表示进行了某种值舍入。

我只有一个解决方法 - 我通过将数据点存储在一个单独的数组中并在工具提示函数中引用它来解决它。

需要注意的是，如果您使用的是列数据并且没有关闭数据分组，图表也会对您的 X 值进行四舍五入。

# php - 如何从 MySQL 获取最后一条错误消息？

> ID：14608982
> 
> 赞同：0
> 
> 时间：2013-01-30T16:34:17.797
> 
> 标签：php, mysql

我正在使用`debug_backtrace()`和一些基本样式来记录我的网站错误。

```
if (@mysql_error($this->conn))
   $error = 'mysql_error() response: ' . @mysql_error($this->conn);
else
   $error = 'non mysql error\r\n'; 
```

有时它不起作用。我的日志文件充满了*“非 mysql 错误”*，但错误总是出现在具有数据库连接的函数中。就像，`getAllNews()`函数失败，但它记录为非mysql错误。

如何正确记录我的网站和 mysql 的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T18:00:07.440

我认为您需要在“可出错”的 mysql 函数之后立即记录错误。和 AFAIK，所有可出错的函数都返回`FALSE`错误，所以你可以检查如下；

```
<?php
public function errorLog($error) {
    // concat error with mysql error
    $error .= $this->conn
        ? mysql_error($this->conn)
        : mysql_error();
    // log error
    error_log($error);
    // keep last error
    $this->_lastError = $error;
}

...

// remember suppressing error throws (with "@" sign)
$this->conn =@ mysql_connect(...);
if (false === $this->conn) {
    $this->errorLog("Connection failed: ");
}
//or
$query =@ mysql_query(...);
if (false === $query) {
    $this->errorLog("Query failed: ");
}
?> 
```

# silverlight - 连接 Telerik Silverlight RadPane 关闭

> ID：14608989
> 
> 赞同：0
> 
> 时间：2013-01-30T16:34:32.040
> 
> 标签：silverlight, telerik

我正在动态地将 radpanes 添加到停靠主机。但是我想在窗格关闭时捕获。但我似乎无法找到如何。

这是我用来动态添加 radpanes 的代码。我可以添加什么来连接窗格的关闭？

```
public RadDocumentPane AddDocumentPane(string title, UserControl control, string paneGroup, DockPosition position)
         {
             RadPaneGroup group = FindName(paneGroup) as RadPaneGroup;
             RadDocumentPane r = null;

            if (group != null)
             {
                 r = new RadDocumentPane();                
                r.Title = title;
                 r.Content = control;                
                group.AddItem(r, position);
             }

            return r;
         } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:18:26.660

您在为您的 DockingHost 使用 RadDocking 吗？如果是这样，要监听的事件都在主机本身上。

Close 事件处理程序看起来像这样：

```
void RadDocking_Close(object sender,  Telerik.Windows.Controls.Docking.StateChangeEventArgs e)
{
    foreach (var pane in e.Panes)
    {
        //do something with the pane
    }
} 
```

# vbscript - VBscript 拉取用户默认打印机

> ID：14608990
> 
> 赞同：0
> 
> 时间：2013-01-30T16:34:33.337
> 
> 标签：vbscript, registry

我有一个 vbscript 的情况，它让我心烦意乱。我正在编写一个为用户提取默认打印机名称的 vbscript。我需要这个的原因是我稍后要删除所有打印机，然后使用不同的驱动程序将它们放回原处（该代码正在运行），并且我想将用户的默认打印机放回原来的打印机。

现在下面是我的代码，我遇到的问题是，如果我对 NetID 进行硬编码，一切正常，但如果我如下动态执行，则会出现错误。并非所有机器都具有相同的 netID，所以这就是我需要动态执行它的原因。我只是不明白为什么我的代码会出错。错误消息是“注册表项中的根无效”。

```
Set WshShell = WScript.CreateObject("WScript.Shell")
WScript.echo WshShell.RegRead("HKEY_CURRENT_USER\Printers\Defaults\NetID")
Key = WshShell.RegRead("HKEY_CURRENT_USER\Printers\Defaults\NetID") 
Test = "HKEY_CURRENT_USER\Printers\Defaults\" & Key & "\"
WScript.echo WshShell.RegRead(Test) 
```

例子：

```
Set WshShell = WScript.CreateObject("WScript.Shell")
WScript.echo WshShell.RegRead("HKEY_CURRENT_USER\Printers\Defaults\NetID")
Key = WshShell.RegRead("HKEY_CURRENT_USER\Printers\Defaults\NetID") ' Returns 12345
Test = "HKEY_CURRENT_USER\Printers\Defaults\" & Key & "\"
WScript.echo WshShell.RegRead(Test) ' Error message

Set WshShell = WScript.CreateObject("WScript.Shell")
WScript.echo WshShell.RegRead("HKEY_CURRENT_USER\Printers\Defaults\NetID")
Key = WshShell.RegRead("HKEY_CURRENT_USER\Printers\Defaults\NetID") ' Returns 12345
Test = "HKEY_CURRENT_USER\Printers\Defaults\12345\"
WScript.echo WshShell.RegRead(Test) 'Returns Default printer value of Lexmark T642 
```

这是我想不通的。键在那里，并有一个名为 (Default) 的值设置为默认打印机的名称。我可以对脚本进行硬编码以获得我需要的东西，但并非每台机器都具有相同的 NetID。我不知道为什么它是硬编码但不是动态的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T01:42:55.103

当您尝试读取的密钥不存在时，会出现该错误消息。例如，在我的机器上运行这段代码

```
Set WshShell = WScript.CreateObject("WScript.Shell")
Key = WshShell.RegRead("HKCU\Printers\DeviceOld")
WScript.Echo Key   ' -> "Foxit PDF Printer"

Test = "HKCU\Printers\" & Key & "\"

' ADD this line for debuging
WScript.Echo Test  ' -> "HKCU\Printers\Foxit PDF Printer\"

' but that key not exist, so...
Key = WshShell.RegRead(Test)  ' -> ...of couse error 
```

# c# - 如何从键盘读取字符直到收到句号，并计算空格数

> ID：14608993
> 
> 赞同：3
> 
> 时间：2013-01-30T16:34:42.197
> 
> 标签：c#, console, character

我对 C#、OOP 和 stackoverflow 很陌生。这是我的第一个场景（几个问题）

我希望用户输入字符，直到收到句点 (.)，然后计算并报告空格的数量。

我能做到这一点吗？（不确定您是否总是按回车键发送）

我可以在不使用字符串的情况下做到这一点吗？（我还没有涉及字符串，这是一个自学练习，因此我相信解决方案应该非常简单，但我得到了不寻常的结果）。

我尝试了以下操作，但程序在我看到结果之前就关闭了，即使我`Console.Read();`在最后添加了一个，这通常可以工作......

```
class CountSpaces
    {
        static void Main(string[] args)
        {
            Console.WriteLine("Enter characters,finish with a period (\".\"");
            char ch;
            int spaces=0;
            do
            {
                ch = (char)Console.Read();                
                if (ch == ' ')
                {                 
                    spaces++;
                }
            } while (ch != '.');

            Console.WriteLine("Number of spaces counted = {0}",spaces);
            Console.Read();
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T16:37:32.740

使用`Console.ReadKey()`而不是`Console.Read()`.

*   `Console.ReadKey()`如果在您调用之后按下了一个键，则返回`Console.ReadKey()`。
*   `Console.Read()`像在流中一样读取字符（在您的情况下根本没有用）。

要获得`char`接收者`ReadKey`，请使用：`ch = Console.ReadKey().KeyChar;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:41:47.413

使用[Console.ReadKey()](http://msdn.microsoft.com/en-us/library/system.console.readkey.aspx)获取[ConsoleKeyInfo](http://msdn.microsoft.com/en-us/library/system.consolekeyinfo.aspx)。然后验证按下的[Key](http://msdn.microsoft.com/en-us/library/system.consolekeyinfo.key.aspx)。您不需要使用字符：

```
int spaces = 0;
ConsoleKey key;
do
{
    key = Console.ReadKey().Key;
    if (key == ConsoleKey.Spacebar)
        spaces++;
}
while (key != ConsoleKey.OemPeriod);

Console.WriteLine("Number of spaces counted = {0}",spaces); 
```

请记住，小键盘上的句点键具有 value `ConsoleKey.Decimal`。因此，如果您需要处理两个句点键，则应编写以下条件：

```
while (key != ConsoleKey.OemPeriod && key != ConsoleKey.Decimal); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T16:42:07.900

如果您只想查看结果，则只需使用 ReadKey 代替：

```
class CountSpaces
{
    static void Main(string[] args)
    {
        Console.WriteLine("Enter characters,finish with a period (\".\"");
        char ch;
        int spaces = 0;
        do
        {
            ch = (char)Console.Read();
            if (ch == ' ')
            {
                spaces++;
            }
        } while (ch != '.');

        Console.WriteLine("Number of spaces counted = {0}", spaces);
        Console.ReadKey();
    }
} 
```

但是，我认为如果您将其更新为以下内容，该程序会变得更加有趣：

```
class Program
{
    static void Main(string[] args)
    {
        while (true)
        {
            Console.WriteLine("Enter characters,finish with a period (\".\"");
            char ch;
            int spaces = 0;
            do
            {
                ch = (char)Console.Read();
                if (ch == ' ')
                {
                    spaces++;
                }
            } while (ch != '.');

            Console.WriteLine("Number of spaces counted = {0}", spaces);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T16:42:14.157

我的示例使用`Console.ReadKey`而不是`Console.Read`：

```
class Program
{
    static void Main(string[] args)
    {
        int spaces = 0;
        char key;
        while ((key = Console.ReadKey().KeyChar) != '.') {
            if (key == ' ')
                spaces++;
        }
        Console.WriteLine();
        Console.WriteLine("Number of spaces: {0}", spaces);
        Console.ReadKey();
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T16:38:35.963

你想要[`ReadKey`](http://msdn.microsoft.com/en-us/library/system.console.readkey.aspx)而不是`Read`. 后者只是读取流中存在的下一个字符，如果不存在则返回 -1，因为它不会等待（你可能没有那么快地输入！）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-30T16:48:46.723

如果我们创建一个从控制台创建一系列键的辅助方法：

```
public static IEnumerable<char> ReadKeys()
{
    while (true)
    {
        yield return Console.ReadKey().KeyChar;
    }
} 
```

它允许我们编写一个查询来准确描述您想要的内容：

```
var spaces = ReadKeys()
    .TakeWhile(c => c != '.')
    .Count(c => c == ' '); 
```

取字符直到你得到一个句号，然后计算空格的数量。

# javascript - 带有 setInterval 的 jQuery 插件范围

> ID：14608994
> 
> 赞同：3
> 
> 时间：2013-01-30T16:34:42.440
> 
> 标签：javascript, jquery, jquery-plugins, timer

我正在用 jQuery 编写自定义倒数计时器，并且正在尝试将其编写为插件。我根据[http://jqueryboilerplate.com/](http://jqueryboilerplate.com/)和[https://github.com/zenorocha/jquery-plugin-patterns/](https://github.com/zenorocha/jquery-plugin-patterns/)的代码编写了插件，但我遇到了范围问题。

这是我的倒计时代码：

```
;(function ( $, window, document, undefined ) {
var pluginName = "countdown",
    defaults = {
        year: "",
        month: "",
        day: "",
        labels: true,
        includeMS: true
    },
    times = {
        ms: 0,
        sec: 0,
        min: 0,
        hr: 0,
        day: 0
    };

function Countdown( element, options ) {
    this.element = element;

    this.options = $.extend( {}, defaults, options );

    this._defaults = defaults;
    this._name = pluginName;

    this._times = times; // I wonder if this will cause multiple timers to fail.

    this.init();
}

Countdown.prototype = {

    init: function() {
        $container = $(document.createElement('div')).addClass('rd_countdown_container').append(
            $('<span class="days countdown_time"></span> <span class="day_label countdown_label">Days</span> <span class="hours countdown_time"></span> <span class="hour_label countdown_label">Hours</span><span class="minutes countdown_time"></span> <span class="minute_label countdown_label">Minutes</span><span class="seconds countdown_time"></span> <span class="second_label countdown_label">Seconds</span><span class="ms countdown_time"></span> <span class="ms_label countdown_label">ms</span>')
            );
        if(this.options.labels === false) { $container.children('.countdown_label').hide(); }
        if(this.options.includeMS === false) { $container.children('.ms, .ms_label').hide(); }
        $(this.element).html($container);
        this.options.endDate = new Date(this.options.year, this.options.month - 1, this.options.day);
        this.intervalTimer = setInterval(this._updateCountdown, 88);
    },

    _updateCountdown: function(e) {
        var x = 0;
        var ms = this.options.endDate - new Date();
        x = this._times.ms / 1000;
        var sec = Math.floor(x % 60);
        x = x / 60;
        var min = Math.floor(x % 60);
        x = x / 60;
        var hr = Math.floor(x % 24);
        var day = Math.floor(x / 24);

        $('.rd_countdown_container .days').text(day);
        $('.rd_countdown_container .hours').text(hr);
        $('.rd_countdown_container .minutes').text(min);
        $('.rd_countdown_container .seconds').text(sec);
        $('.rd_countdown_container .ms').text(this._pad(ms % 1000, 3));
    },

    _pad: function(num, size) {
      var s = "000000000" + num;
      return s.substr(s.length-size);
    },

    stop: function() {
        console.log("Testing stop");
        clearInterval(this.intervalTimer);
    }
};

$.fn[pluginName] = function ( options ) {
    var args = arguments;
    if (options === undefined || typeof options === 'object') {
        return this.each(function () {
            if (!$.data(this, 'plugin_' + pluginName)) {
                $.data(this, 'plugin_' + pluginName, new Countdown( this, options ));
            }
        });
    } else if (typeof options === 'string' && options[0] !== '_' && options !== 'init') {
        return this.each(function () {
            var instance = $.data(this, 'plugin_' + pluginName);
            if (instance instanceof Plugin && typeof instance[options] === 'function') {
                instance[options].apply( instance, Array.prototype.slice.call( args, 1 ) );
            }
        });
    }
};
})( jQuery, window, document ); 
```

如果我正确理解了样板，所有插件设置都存储在页面上 DOM 中实例化的对象中。

我遇到的问题是调用的函数`setInterval`无法访问插件对象的其余部分，因此它实际上无法`endDate`计算时间差。另外，当我打电话时`$('.countdown').countdown('stop')`，它不会清除该`setInterval`功能。

那么，jQuery 插件中是否存在我遗漏的模式或者只是忽略了一些非常基本的东西？此外，任何有关提高性能的建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T18:00:46.297

当 setInterval 调用时`_updateCountdown`，范围是`window`，而不是倒计时插件的实例。为了`_updateCountdown`能够访问插件的其余部分，您需要像这样代理调用：

```
setInterval($.proxy(this._updateCountdown, this), 88); 
```

# java - 使用java计算最小二乘

> ID：14608998
> 
> 赞同：5
> 
> 时间：2013-01-30T16:34:56.557
> 
> 标签：java, least-squares

我正在尝试找到一个 java 代码来计算 Ax=b 方程中的最小二乘解 (x)。假设

```
A = [1 0 0;1 0 0];
b = [1; 2];

x = A\b 
```

返回

```
x =

    1.5000
         0
         0 
```

我找到了最小二乘类，

```
public LeastSquares(double[] a, double[] b, int degree) 
```

但是在输入中，A 和 B 都是一维数组，但是，在上面的示例中，A 是矩阵，B 是数组。

在类非负最小二乘

```
public NonNegativeLeastSquares(int M, int N, double a[][],double b[]) 
```

A 是一个矩阵，B 是一个数组，但是该类的描述说它找到了方程 Ax = b 的线性系统的近似解，使得 ||Ax - b||2 最小化，并且使得 x >= 0。这意味着 x 必须始终为正。

我需要一个与 NonNegativeLeastSquares 类似的类，但是没有 x>=0 约束。有人可以帮我吗？
多谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T17:07:52.240

请参阅[Apache Commons Math 库](http://commons.apache.org/math/)，特别是[`SimpleRegression`类](http://commons.apache.org/proper/commons-math/apidocs/org/apache/commons/math4/stat/regression/SimpleRegression.html)。

# javascript - 有没有一种简单的方法来重置 TimelineMax JavaScript 对象？

> ID：14608999
> 
> 赞同：6
> 
> 时间：2013-01-30T16:35:00.870
> 
> 标签：javascript, gsap

我在重新初始化 TimelineMax 序列时遇到问题。调整窗口大小时，我需要将所有补间恢复为默认样式并根据新的窗口大小重新初始化它们。有没有一种简单的方法可以有效地破坏时间线并重新开始，而无需手动重置所有 CSS 属性？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-31T06:50:45.420

根据您要实现的目标，我可以建议两种方法。

第一个与您所描述的完全一样：

```
myTimeline.pause(0, true); //Go back to the start (true is to suppress events)
myTimeline.remove(); 
```

这使一切都回到了时间线开始时的状态。您也可以通过调用来删除任何初始化属性`.invalidate()`。

第二种方法，我添加是因为它可能值得考虑......
而不是完全重新启动补间/时间线，为什么不`.invalidate()`（项目留在原地，只是时间线本身被清除）并使用补间方法`.to()`而不是`.from()`，因为当一切都从以前的位置移动到新的位置而不是完全重新启动时，您将获得更好的用户体验。

此外，大多数用户不会调整窗口大小。所以想想如果它成为一个主要的时间消费者是否值得。

API/文档：[http ://api.greensock.com/js/](http://api.greensock.com/js/)