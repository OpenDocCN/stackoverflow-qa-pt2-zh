# StackOverflow 问答 15843000-15843999

# ruby-on-rails - Rails Gem：为给定的命名空间运行所有生成器

> ID：15843000
> 
> 赞同：3
> 
> 时间：2013-04-05T20:32:09.117
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, gem

我正在开发一个包含多个子模块的 gem 核心，每个子模块都是自己的 gem。作为开发人员，您将能够安装核心和任何其他 gem。如何创建一个 rake 任务或生成器，以在主 gem 命名空间下使用生成器为所有已安装的 gem 运行生成器。

例如，如果我的 gem 被称为**admin**：

```
module Admin
  module Generators
    class InstallGenerator < Rails::Generators::Base
    end
  end
end 
```

我还有另一个用于其中一个子宝石的生成器：

```
module Admin
  module Generators
    class PostsGenerator < Rails::Generators::Base
    end
  end
end 
```

还有一个：

```
module Admin
  module Generators
    class TagslGenerator < Rails::Generators::Base
    end
  end
end 
```

最多可以安装 10 个 gem。而不是 rail g admin:... 安装每个，我想创建一个运行所有任务的 rake 任务或生成器。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:16:59.120

首先查看以下问题和答案。

[查找模块中可用的类](https://stackoverflow.com/questions/833125/find-classes-available-in-a-module)

所以你所要做的就是访问

```
Admin::Generators.constants.each do |c| 
   c = Admin::Generators.const_get(c)
   if c < Rails::Generators::Base
     c.new.run(your_args)
   end
end 
```

唯一的问题是我从未调用过这样的生成器，所以它可能比 c.new.run 多一点，但我认为应该这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T21:46:59.090

在 Admin 模块下保留一个“AllGenerator”类。生成器必须执行以下操作：

1.  对于命名空间下作为生成器类的每个类，
2.  从类名中获取命名空间。
3.  使用命名空间调用[`invoke`方法](http://api.rubyonrails.org/classes/Rails/Generators.html#method-c-invoke)。

像这样的东西：

```
module Admin
  module Generators
    class AllGenerator < Rails::Generators::Base
      def generator
        Rails::Generators.lookup!
        Admin::Generators.constants.each do |const|
          generator_class = Admin::Generators.const_get(const)
          next if self.class == generator_class
          if generator_class < Rails::Generators::Base
            namespace = generator_klass_to_namespace(generator_class)
            invoke(namespace)
          end
        end
      end
      private
        def generator_klass_to_namespace(klass)
          namespace = Thor::Util.namespace_from_thor_class(klass)
          return namespace.sub(/_generator$/, '').sub(/:generators:/, ':')
        end
    end

  end
end 
```

[这是带有完整测试代码的要点的链接](https://gist.github.com/emilsoman/09dad782ef775a064458)

这样，running`rails g admin:all`将直接在`Admin::Generators`.

# javascript - 在数组中查找相同的对象，而不是删除它们

> ID：15843001
> 
> 赞同：1
> 
> 时间：2013-04-05T20:32:10.363
> 
> 标签：javascript, underscore.js

我试图在一个数组中找到相同的对象，以便在 UI 中标记它们。我似乎无法使用 undescore 来做到这一点。

我正在这样做：

```
var a = [ {'id': 1, 'name': 'jake' }, {'id':4, 'name': 'jenny'},  {'id': 9, 'name': 'nick'}, {'id': 1, 'name': 'jake' } ];
var eaches = _.each(a, function (obj) {
  _.find(a, function () {
    return _.isEqual(a, obj);
  });
}); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T22:08:56.493

似乎你需要这样的东西：

```
var a = [{
    'id': 1,
    'name': 'jake'
}, {
    'id': 4,
    'name': 'jenny'
}, {
    'id': 9,
    'name': 'nick'
}, {
    'id': 1,
    'name': 'jake'
}];

var eq = [];

_.each(a, function (x, i) {
    var e = _.find(a, function (y, j) {
        return i !== j && _.isEqual(x, y);
    });
    if (e) {
        eq.push(x);
    }
});

console.log(eq); 
```

[http://jsfiddle.net/f0t0n/WBbs5/](http://jsfiddle.net/f0t0n/WBbs5/)

* * *

**更新：**
自定义“ `_.uniq`”基于`_.isEqual`而不是`===`严格比较：

```
var uniqEq = _.reject(eq, function(x, i) {
    return _.find(eq, function(y, j) {
        return i < j && _.isEqual(x, y);
    });
}); 
```

[http://jsfiddle.net/f0t0n/hzBBA/](http://jsfiddle.net/f0t0n/hzBBA/)

# javascript - 在具有可变高度的父 div 中制作具有自动边距的 div

> ID：15843002
> 
> 赞同：0
> 
> 时间：2013-04-05T20:32:12.623
> 
> 标签：javascript, html, css

我有这个代码

```
<div style="position: relative;">
    /***main***/

    <div style="top:0">
        /*****Content1****/
    </div>

    <div>
        /*****Content2****/
    </div>

    <div>
        /*****Content2****/
    </div>

    <div style="bottom:0">
        /*****Content4****/
    </div>

</div> 
```

我希望 content1 始终位于顶部，而 content4 始终位于底部，还希望 content2 和 content3 调整顶部和底部边距以使其看起来均匀，我无法做到这一点，因为父 div 的高度是可变的，而所有其他 div 都是固定的高度。

我认为这将帮助您了解我想要什么 [http://www.spoiledagent.com/ads/Help.jpg](http://www.spoiledagent.com/ads/Help.jpg)

请帮忙，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:40:52.827

你可以试试这个：

[http://jsfiddle.net/Q4XaQ/](http://jsfiddle.net/Q4XaQ/)

```
<div id="main">
    <div id="content1">/*****Content1****/</div>
    <div id="content2">/*****Content2****/</div>
    <div id="content3">/*****Content3****/</div>
    <div id="bottom">/*****Content4****/</div>
</div>

#main{
    margin: 0 auto;
    width: 960px;
    background: red;
}

#content1{
    height: 80px;
    background: gray;
}

#content2{
    width:480px;
    height: 300px;
    float: left;
    background: yellow;
}

#content3{
    width:480px;
    height: 300px;
    float: right;
    background: brown;
}

#bottom{
    height: 50px;
    clear:both;
    background: blue;;
} 
```

# c# - 将数据行添加到 datagridview 仅添加到第一列

> ID：15843009
> 
> 赞同：0
> 
> 时间：2013-04-05T20:32:32.450
> 
> 标签：c#, datagridview, datatable

我正在尝试从数据库中提取一组数据并将其推入 datagridview。问题是，当我这样做时，我得到“system.data.datarow”，它只将它添加到第一列（我有 5 个）。这是我的代码。

```
SqlCommand sqlCom = new SqlCommand("some SQL query string", "SQL database connection info");
SqlDataAdapter adapter = new SqlDataAdapter(sqlComm);
DataTable table = new Datatable();

if (methodType = "SELECT")
{
    sqlConn.Open();
    adapter.fill(table);
    foreach (DataRow row in table.Rows)
    {
        dgvCrsLookupResults.Rows.Add(row[0]);
        dgvCrsLookupResults.Rows.Add(row[1]);
        dgvCrsLookupResults.Rows.Add(row[2]);
        dgvCrsLookupResults.Rows.Add(row[3]);
        dgvCrsLookupResults.Rows.Add(row[4]);
    }
} 
```

显然，这只填充了第一列，但我无法弄清楚如何将它添加到每一列。当我使用

```
dgvCrsLookupResults.Columns.Add(row[0]); 
```

它只是说它有无效的论点。我知道我已经很接近了，但我对这一切都很陌生，所以我完全不知道如何进行最后一次跳跃。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:54:16.683

而不是循环`foreach(DataRow row in table.Rows)`使用：

```
dgvCrsLookupResults.DataSource = table; 
```

记住设置：

```
dgvCrsLookupResults.AutoGenerateColumns = True; 
```

或者在设计器中为您的 DataGridView 创建一个列。

在列集合`DataPropertyName`= ColumnName 中`DataTable`

在这种情况下->`dgvCrsLookupResults.AutoGenerateColumns = False;`

# java - 将 RAM 添加到 Tomcat

> ID：15843019
> 
> 赞同：1
> 
> 时间：2013-04-05T20:33:05.523
> 
> 标签：java, tomcat

我应该使用哪个环境变量向 Tomcat 添加更多 RAM？

`JAVA_OPTS="-Xmx1024m -Xms256m"`

或者

`CATALINA_OPTS="-Xmx1024m -Xms256m"`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:45:47.673

Either will work. However, from [skill-guru](http://www.skill-guru.com/blog/2010/09/23/how-to-increase-heap-size-in-tomcat-6/)...

> Note that CATALINA_OPTS is a better place than JAVA_OPTS. The former is only used when actually starting the Tomcat instance. JAVA_OPTS is also used to start JVMs that only interact with Tomcat (for example the JVM instance that is used to send the shutdown-message to a running Tomcat instance).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T20:37:11.920

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-11T19:52:59.500

When you'll use CATALINA_OPTS then it's clear that this option is related to Tomcat server. Also when you'll use JAVA_OPTS then any other application could use this settings, and that isn't something that you probably intentionally want to achieve.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T20:34:26.040

JAVA_OPTS。您正在为 java 命令提供选项，而不是 catalina 选项（它是一个 shell 脚本）。

# ruby-on-rails - Ajax 请求失败 Rails

> ID：15843021
> 
> 赞同：0
> 
> 时间：2013-04-05T20:33:25.583
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, jquery

我对为什么我的 Ajax 调用失败感到有些困惑，它正在工作并且想不出任何会影响它的更改。当我拨打电话时，我在我的 jquery.js 文件中指向这个的 firebugs 控制台中收到一个错误

```
// Do send the request
// This may raise an exception which is actually
// handled in jQuery.ajax (so no try/catch here)
xhr.send( ( s.hasContent && s.data ) || null ); 
```

首先这是什么意思？

我的设置是这样的

index.js.erb

```
<% if params[:type] == 'Tynewydd' %>
 $('#newsResults').html('<%= escape_javascript(render partial: 'tynewyddposts') %>');
<% end %> 
```

index.html.erb

```
 <div id="newsResults">
   <div class="hero-unit">
     <h2> Welcome to your admin area</h2>
       <p> xxxxxxxx.</p>
         <p>xxxxxxxxx</p>
   </div>
  </div> 
```

ajax请求链接

```
<li><%= link_to 'Tynewydd', posts_path(:type => 'Tynewydd'), :remote => true %></li> 
```

谁能看到这里出了什么问题或提供一些调试建议？

任何帮助表示赞赏

编辑

控制器

```
def index
@posts = Post.all
@tynewyddpost = Post.tynewydd_posts
@woodsidepost = Post.woodside_posts
@elmspost = Post.elms_posts
@sandpiperpost = Post.sandpiper_posts
@outreachpost = Post.outreach_posts
@companypost = Post.company_posts
@staffpost = Post.staff_posts

respond_to do |format| 
 format.html 
 format.js 

end 
```

好的，所以我不再收到错误，我在调用的部分中有一个 nil 类的未定义方法错误，所以现在在控制台中我可以看到响应，但是应该呈现的部分没有显示在我的页面上

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T21:09:01.847

好的，以防万一其他人遇到类似的问题，将 $ 更改为 jQuery 已经解决了问题，所以这个

```
<% if params[:type] == 'Tynewydd' %>
 $('#newsResults').html('<%= escape_javascript(render partial: 'tynewyddposts') %>');
<% end %> 
```

改成了这个

```
<% if params[:type] == 'Tynewydd' %>
  jQuery('#newsResults').html('<%= escape_javascript(render partial: 'tynewyddposts') %>');
<% end %> 
```

# ios - how to present a login, with UISplitViewController?

> ID：15843030
> 
> 赞同：1
> 
> 时间：2013-04-05T20:33:41.913
> 
> 标签：ios, ipad, uisplitviewcontroller

I'm trying to build a universal iOS app. So, in Xcode I started with a Master-Detail template.

In the iPhone version of this, my first view is a list of items, and I have a "Logout" button in my Navigation Bar. When the user launches for the first time, a view-controller is presented, modally, on top of my normal "master" view. It just asks for a user/pass, lets the user log in. If the user hits the "Logout" button, some cleanup occurs, and then they are presented with the Login screen again.

On the iPad side of things, I'd like to have a UISplitViewController - as that interface matches well with what I'm trying to do. I'd like to do this in a similar fashion -- present the user with Login the first time they launch. Then later on, if they decide to leave the app, they can hit Logout, and be presented with Login options again.

I'd prefer to cover the entire screen with one view (just user/pass/login button), but am having trouble figuring that out, especially if the "master" view is visible.

So, the question is this: what is the preferred way to show a login screen, with a UISplitViewController in the mix, so that the user can't do anything else but login?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:41:45.190

这听起来确实像是个人选择/设计决定。

您可以将“主”视图设置为登录屏幕，而将“详细信息”设置为启动屏幕或显示“请登录”的可爱小猫照片

您还可以将单个 UIView 作为“初始”视图页面并将该 segue 放入 splitview

我认为你对它的“如何”很开放，所以也许我不太理解你的问题。

# javascript - Why is this Javascript syntax illegal?

> ID：15843033
> 
> 赞同：2
> 
> 时间：2013-04-05T20:33:47.073
> 
> 标签：javascript, google-chrome, safari, syntax-error

Both Chrome and Safari report this is illegal. They report "unexpected token 'this'" pointing at the 'this.b'. Here is the minimum code needed to show the problem:

```
function x(){ this.a = function() {} this.b = function() {}  } 
```

It only happens if the two declarations are on the same line. Any ideas? Looks legal to me.
It's annoying because this is what comes out of a Javascript minifier.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:36:02.520

Javascript 将自动在新行上插入分号。这里缺少的是用于分隔语句结尾的原始分号。

在你的右大括号之后插入分号，就像正确的 JS 一样，它会正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:36:04.647

函数内部的第一条语句没有分号结束`x`。

分号插入仅适用于新行。

```
// Valid but nasty
this.a = function() {}
this.b = function() {}

// Valid
this.a = function() {};
this.b = function() {};

// Valid
this.a = function() {}; this.b = function() {}; 
```

# python - manage.py dbshel l 不适用于 PyCharm 2.7.1

> ID：15843035
> 
> 赞同：0
> 
> 时间：2013-04-05T20:33:54.343
> 
> 标签：python, django, pycharm

每当我尝试`manage.py dbshell`在 PyCharm 2.7.1 上运行时，它都会继续运行，但从不提供任何东西。

谁能解释为什么会这样？我正在使用`sqlite3`，并且我添加`sqlite3`了`PATH`变量，所以应该没有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-28T12:05:46.637

经过一番研究，我发现这是一个[错误](http://youtrack.jetbrains.com/issue/PY-6882)。

# facebook - Uncaught OAuthException: (#200) User is not in an allowed country for this app's music functionality, nor a tester or developer of the app

> ID：15843038
> 
> 赞同：0
> 
> 时间：2013-04-05T20:34:12.200
> 
> 标签：facebook, login, facebook-php-sdk, facebook-apps

When I log in with my facebook account in my website, sucess! But when log in with facebook account of my friend, give this error: Uncaught OAuthException: (#200) User is not in an allowed country for this app's music functionality, nor a tester or developer of the app. It's not just him. The other people also. In the settings of the app I put as "people without location can use" and "people from any location can use", but continues giving the error.

# c - 如何使用内联汇编从堆栈中获取信息以在 c 中编程？

> ID：15843044
> 
> 赞同：1
> 
> 时间：2013-04-05T20:34:40.283
> 
> 标签：c, stack, inline, interrupt, volatile

我有一个任务要做，我正在寻求一些帮助。（在简单的 C 语言上）

我需要做什么？我需要检查主 c 程序上的每个命令（使用中断号 1）并仅在下一个命令与之前通过其他过程发送到堆栈的过程相同时打印一条消息。

我想做的事？我想使用内联汇编从堆栈中获取信息，并将其放在一个变量上，该变量可以在返回到 c 后在 c 程序本身上进行比较。（易挥发的）

这是程序：

```
#include <stdio.h>
#include <dos.h>
#include <conio.h>
#include <stdlib.h>

typedef void (*FUN_PTR)(void);
void interrupt (*Int1Save) (void); //pointer to interrupt num 1//

volatile FUN_PTR our_func;
char *str2;

void interrupt my_inter (void) //New interrupt//
{volatile FUN_PTR next_command;
asm {   PUSH BP
    MOV BP,SP
    PUSH AX
    PUSH BX
    PUSH ES
    MOV ES,[BP+4]           
    MOV BX,[BP+2] 
    MOV AX,ES:[BX]
    MOV word ptr next_command,AX  
    POP ES
    POP BX
    POP AX
    pop BP}
if (our_func==next_command) printf("procedure %s has been called\n",str2);}

void animate(int *iptr,char str[],void (*funptr)(), char fstr[])
{
str2=fstr;
our_func=funptr;

Int1Save = getvect(1); // save old interrupt//
setvect(1,my_inter); 
    asm {   pushf //TF is ON//
    pop ax
    or ax,100000000B
    push ax
    popf}}

void unanimate()
{asm {  pushf //TF is OFF//
        pop ax
        and ax,1111111011111111B
        push ax
        popf}
setvect (1,Int1Save); //restore old interrupt//}

void main(void)
{int i;
 int f1 = 1;
 int f2 = 1;
 int fibo = 1;

 animate(&fibo, "fibo", sleep, "sleep");
 for(i=0; i < 8; i++)
 {
  sleep(2);
  f1 = f2;
  f2 = fibo;
  fibo = f1 + f2;} // for//
 unanimate();} // main// 
```

我的问题......当然，问题在于内联程序集的“我的中间”。但无法弄清楚。我究竟做错了什么？（请看上面的代码） 我想将特定过程（睡眠）的指针地址保存在 volatile our_func 中。然后从堆栈中获取信息（每个下一个命令的地址）到 volatile next_command，然后最终返回到 c 并每次进行比较。如果两个变量上的值（地址）相同，则打印特定消息。希望我清楚..

10倍，

尼尔B

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-18T07:30:09.003

^([Answered as a comment by the OP](https://stackoverflow.com/questions/15843044/how-do-i-get-info-from-the-stack-using-inline-assembly-to-program-in-c/24279524#comment22554662_15843044))

I got the answer I wanted:

```
asm {   MOV SI,[BP+18]  //Taking the address of each command//
        MOV DI,[BP+20]
        MOV word ptr next_command+2,DI
        MOV word ptr next_command,SI}
if ((*our_func)==(*next_command))   //Making the next_command compare//
    printf("procedure %s has been called\n",str2); 
```

# java - 自动将多个集合合并为一个

> ID：15843045
> 
> 赞同：0
> 
> 时间：2013-04-05T20:34:43.167
> 
> 标签：java, generics, collections, subclass, guava

我有一些番石榴之`Functions`类的`Function<String,Set<String>>`。使用那些`FluentIterable.transform()`会导致 a `FluentIterable<Set<String>>`，但是我需要 a `FluentIterable<String>`。所以我现在的想法是子类化`FluentIterable<E>`并添加一个新方法`transform2()`，在返回之前简单地将所有内容合并到一个集合中。

原来的变换方法是这样的：

```
public final <T> FluentIterable<T> transform(Function<? super E, T> function) {
  return from(Iterables.transform(iterable, function));
} 
```

我为我的子类和`transform2()`方法想到了这样的东西：

```
public abstract class FluentIterable2<E> extends FluentIterable<E> 
{       
    public final <T> FluentIterable<T> transform2(Function<? super E, Collection<T>> function) {
        // (PROBLEM 1) Eclipse complains: The field FluentIterable<E>.iterable is not visible  
        Iterable<Collection<T>> iterables = Iterables.transform(iterable, function);

        // (PROBLEM 2) Collection<T> merged = new Collection<T>(); // I need a container / collection - which one?
        for(Collection<T> iterable : iterables)
        {
            // merged.addAll(iterable);
        }

        // return from(merged);
    }
} 
```

目前我的新子类有两个问题，上面标有`PROBLEM 1`和`PROBLEM 2`

*   问题 1：原始 FluentIterable 类中的可迭代字段是私有的 - 我该怎么办？我可以在我的子类中创建一个具有相同名称的新私有字段，这样可以吗？我的子类中调用 super.someMethod() 并使用该字段的方法呢？然后他们会使用超类的字段，它可能具有不同的值吗？

*   问题2：我需要一些通用的集合，我可以组合几个集合的内容，但是集合是一个接口，所以我不能实例化它。那么，我可以在那里使用哪个类？

如果解决方案仅适用于集合，那将是可以接受的，但我更喜欢适用于集合和列表的解决方案。

感谢您对此的任何提示！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T21:08:47.960

`FluentIterable.transformAndConcat(stringToSetFunction)`不适用于您的用例？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T20:45:34.670

为什么子类 FluentIterable 只是为了做到这一点？你只需要一个简单的循环：

```
Set<String> union = Sets.newHashSet();
for (Set<String> set : fluentIterableOfSets) {
    union.addAll(set);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-05T21:14:59.623

使用`FluentIterable.transformAndConcat(f)`，其中`f`是一个将元素映射到元素类型上的某种可迭代的函数。

在你的情况下，假设你`Function<String, Set<String>>`的名字叫做 TOKENIZE，你`Iterable<String>`的名字叫做 LINES。

然后要获得`Set<String>`LINES 中所有不同的标记，请执行以下操作：

```
Iterable<String> LINES = ...;
Function<String, Set<String>> TOKENIZE = ...;
Set<String> TOKENS = FluentIterable.from(LINES)
    .transformAndConcat(TOKENIZE)
    .toSet(); 
```

但请仔细考虑 JB Nizet 的回答。尝试两种方式，看看哪种效果更好。

# visual-studio-2010 - 查找VS2012项目有多少行代码

> ID：15843046
> 
> 赞同：2
> 
> 时间：2013-04-05T20:34:43.743
> 
> 标签：visual-studio-2010, visual-studio-2012

如何找到我的项目/子项目中有多少行代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T20:37:24.253

在菜单栏中，转到分析->计算项目/解决方案的代码指标。这也为您提供了其他信息，例如类的复杂性、可维护性、继承深度和类耦合的数量。

# javascript - YUI3 选择器/查询

> ID：15843049
> 
> 赞同：0
> 
> 时间：2013-04-05T20:34:49.483
> 
> 标签：javascript, html, selector, yui

表中有一个复选框列表，我为每个复选框的值属性分配了一个唯一键。YUI3 中的选择器应该是什么，这样如果我知道它的值，我就可以获得一个复选框对象。

以下是结构示例：

```
<table id="mytable">
<tr>
  <td><input type="checkbox" value="1" /></td><td>Apple store</td>
<td><input type="checkbox" value="2" /></td><td>Play store</td>
</tr>
</table> 
```

需要以下格式的代码： Y.one("#mytable input[type=checkbox,value=1]");

这必须返回 Apple Store 的复选框对象，但它不起作用.. 任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:38:30.470

对于要匹配的每个属性，您都需要一个属性选择器。您不能在单个属性选择器中组合名称/值对。

```
[type=checkbox][value=1] 
```

# javascript - chrome中的HTML5拖放错误

> ID：15843053
> 
> 赞同：0
> 
> 时间：2013-04-05T20:35:10.217
> 
> 标签：javascript, google-chrome

我正在尝试在我的网站中实现拖放功能，但经过几个小时的尝试后，我得出结论认为 chrome 中存在错误，例如尝试这个[**示例**](http://www.html5rocks.com/en/tutorials/file/dndfiles/#toc-selecting-files-dnd)并亲自查看。

似乎该`dataTransfer`属性不存在，因此我收到未定义的错误。

这是我的代码：

```
$(document).on("dragover", "#dropFile", function(e){
    e.dataTransfer.setData('text/x-example', 'Foobar'); //error
    return false; 
});

$(document).on("drop", "#dropFile", function(e){
    e.preventDefault();

    console.log(e.dataTransfer); //error
}); 
```

PS这在Firefox中确实有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:44:23.020

我最近一直在涉足拖放，我的主要浏览器是 chrome，到目前为止一切都很好。我用来连接事件的方法和你的有点不同

```
 $(".droppable").bind("dragover", function (e)
  {
    // do stuff here
  });
  $(".droppable").bind("drop", function (e)
  {
    // do stuff here
  }) 
```

# vba - VBA 宏并将日期格式更改为 mmm-yy

> ID：15843054
> 
> 赞同：1
> 
> 时间：2013-04-05T20:35:15.970
> 
> 标签：vba, excel

我在使用 Excel 宏 (VBA) 时遇到问题，该宏旨在从 Excel 电子表格中获取日期，减去一个月并将其重新格式化为 MMM-YY。基本上我想采取 3/31/2013 并将其转换为 2 月 13 日

这是我的代码：

```
Dim ReportDate As Date
ReportDate = Worksheets("Current").Cells(2, 16) 'ex. 03-31-2013
prevMonth = Format((Month(ReportDate) - 1) & "/" & Day(ReportDate) & "/" & Year(ReportDate), "mmm") & "-" & Format(ReportDate, "yy")
Debug.Print prevMonth 
```

我得到的结果是 2/31/2013-13

所以我尝试更改 prevMonth 变量：

```
prevMonth = Format((Month(ReportDate) - 1) & "/" & Day(ReportDate) & "/" & Year(ReportDate), "mmm-yy") 
```

但又得到了 2/31/2013

我试图将 prevMonth 声明为 Integer 或 Date 但出现类型不匹配错误。我只能将它声明为字符串，但它仍然对程序没有帮助。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T20:41:59.147

试试这个

```
Sub Demo()
    Dim ReportDate As Date
    Dim prevMonth As Date

    ReportDate = Worksheets("Current").Cells(2, 16) 'ex. 03-31-2013
    prevMonth = DateAdd("m", -1, ReportDate)
    Debug.Print Format(prevMonth, "mmm-yy")
End Sub 
```

# jquery - Formly：如何以 JSON 格式接收数据？

> ID：15843055
> 
> 赞同：0
> 
> 时间：2013-04-05T20:35:19.400
> 
> 标签：jquery, json, forms, serializearray

链接：[http ://thrivingkings.com/read/Formly-The-form-glamorizer-for-jQuery](http://thrivingkings.com/read/Formly-The-form-glamorizer-for-jQuery)

我正在使用 Formly 制作联系表格，我想知道您实际上是如何将消息发送到您的服务器/电子邮件地址的。

他们的例子是：

```
<script>
$(document).ready(function() { 

$('#ContactInfo').formly({'theme':'Dark'}, function(e) { 

    $('.callback').html(e); 
});
});
</script> 
```

他们说：

> 这一次，我们设置了一个回调函数，它将为我们提供 URL 格式的数据。这不是传输用户数据的最安全方法，不应与安全信息一起使用。此外，您可以轻松地将回调方法更改为 .serializeArray() 以接收 JSON 格式的数据。

你如何接收 JSON 格式的数据？我通过使用 .serializeArray() 了解他们在说什么，但我不知道如何发送该数据。我在这方面没有太多经验。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:43:38.793

您可以通过使用 jQuery POST 将数据发送到您的服务器，如下所示：

```
var postData = $("#ContactInfo").serializeArray();
$.post('ajax/test.html', postData, function(returnData) {
    console.log(returnData);
}, "json"); 
```

来自[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

将路径放置到您的服务器端点，该端点处理发布的数据以替换*ajax/test.html*。

我确实假设**#ContactInfo**是您的表单元素。

我确实使用**$.serializeArray()**来创建表单内容的可发送 JSON，您可以在此处看到[http://api.jquery.com/serializeArray/](http://api.jquery.com/serializeArray/)

# c# - 通过我的服务器将文件从远程服务器复制到客户端浏览器，而无需将整个文件写入磁盘或内存

> ID：15843059
> 
> 赞同：5
> 
> 时间：2013-04-05T20:35:24.037
> 
> 标签：c#, stream, filestream, getresponsestream, responsestream

这就是场景。

远程文件服务器上有一个文件（比如我有一个托管在 DropBox 上的文件）

我想在我的 Web 应用程序（c# asp.net 4.0）上提供该文件作为下载

我想隐藏原始文件的 100% 位置（我希望它看起来来自我的服务器）。

我不想将此文件写入内存或服务器上的磁盘。

我曾假设我想使用流来传输复制。例子

```
Stream inputStream = response.GetResponseStream();
inputStream.CopyTo(Response.OutputStream, 4096);

inputStream.Flush();

Response.Flush();
Response.End(); 
```

但是，这会将整个流复制到内存中，然后再将其写入客户端浏览器。任何想法都会很棒。

我需要我的服务器基本上只是充当代理并屏蔽原始文件位置

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T15:02:47.797

以下代码是我最终得到的（缓冲区大小将在生产中发生变化）这会从 url 获取文件，并开始通过我的服务器将其逐块流式传输到客户端。我花了一点时间才弄清楚的部分是在写入每个块后刷新响应。

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(digitalAsset.FullFilePath);
            HttpWebResponse response = (HttpWebResponse)request.GetResponse();
            if (response.StatusCode == HttpStatusCode.OK)
            {
                Response.ClearHeaders();
                Response.ClearContent();
                Response.Clear();
                Response.ContentType = "application/octet-stream";
                Response.AddHeader("Content-Disposition", "attachment;filename=" +     digitalAsset.FileName);

                Stream inputStream = response.GetResponseStream();

                byte[] buffer = new byte[512];
                int read;
                while ((read = inputStream.Read(buffer, 0, buffer.Length)) > 0)
                {
                    Response.OutputStream.Write(buffer, 0, read);
                    Response.Flush();
                }
                Response.End();
            } 
```

这可以通过我的服务器流式传输任何大小的文件，而无需等待我的服务器将其存储到内存或磁盘中。真正的优势是它使用的内存非常少，因为只存储了缓冲的块。对于客户端，下载立即开始。（这对大多数人来说可能很明显，但对于这个新手来说非常酷）所以我们同时从一个位置下载文件并使用服务器作为一种代理将其上传到另一个位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T20:42:30.877

虽然我看不出为什么`CopyTo`会在内存中读取整个流（因为任何地方都没有中间流），但您可以手动编写相同的 Copy 以确保它以您想要的方式运行。

考虑使用异步版本的读/写，以及是否可以使用C# 4.0 中的`async`/`awit`来使代码可读。

旧方式：[异步流处理](http://msdn.microsoft.com/en-us/magazine/cc337900.aspx)，新方式[异步文件 I/O](http://msdn.microsoft.com/en-us/library/kztecsys.aspx)

# css - 如何在容器元素之外渲染三角形？

> ID：15843065
> 
> 赞同：0
> 
> 时间：2013-04-05T20:36:00.757
> 
> 标签：css, html, geometry

我正在尝试使用 CSS 构建菜单。当`li`元素具有活动类时，我希望在容器旁边出现一个三角形（特定大小）。请参阅以下[http://jsfiddle.net/hcabnettek/MeczJ/](http://jsfiddle.net/hcabnettek/MeczJ/ "js小提琴")

当我增加 left 属性时，箭头会移到容器的末端，但会滑到它后面。我尝试了 z-index 和其他各种东西，但我似乎无法弄清楚。

任何帮助将不胜感激。谢谢大家！

```
<nav>
    <ul class="nav main-nav">
        <li  class="active">
            <a href="/home">
                <i class="icon-home"></i>
                <h6>Home</h6>
                <div class="items"></div>
            </a>
        </li>
    </ul>
</nav> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:47:08.117

`li`设置为`overflow: visible`. 这应该可以解决问题。如果不是，还要检查`ul`具有设置宽度的 是否也设置为`overflow: visible`。

# javascript - Facebook 发送对话框：发生错误。请稍后再试

> ID：15843073
> 
> 赞同：0
> 
> 时间：2013-04-05T20:36:35.437
> 
> 标签：javascript, facebook

我正在尝试使用 FB Send Dialog API。它适用于大多数用户，除了一个特定的用户。

```
 FB.init({appId: fbappid, xfbml: true, cookie: true});
 FB.getLoginStatus(function(response) {
          if (response.status === 'connected') { 
     FB.ui({
      method: 'send',
  to: 'username',
  display: 'iframe',
      name: 'I just suggested a time and place',
      link: linkval,
  picture: 'http://'+domain+'/img/cupicon.png',
  access_token: response.authResponse.accessToken     // **This should work and tested** also!!!
      })

          };
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:47:17.727

原因是我收到以下错误： Object {error_code: 100, error_msg: "Viewer+cannot+message+specified+recipients."}

这是基于给定用户设置的权限问题。

# ruby - 多个 schedule.rb 文件与无论何时 gem

> ID：15843075
> 
> 赞同：2
> 
> 时间：2013-04-05T20:36:45.570
> 
> 标签：ruby, ruby-on-rails-3, crontab, whenever

使用rails中的when gem来设置cron作业时是否可以有多个schedule.rb文件？我希望有一个常规的 schedule.rb 文件和一个将部署到不同服务器的 reports_schedule.rb 文件，它有自己的特定报告环境。

无论何时使用 schedule.rb 文件如何？这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-05T13:58:05.903

如果有点难看，它看起来是可能的。[每当执行实例 eval 时，查看 job_list.rb:25 上](https://github.com/javan/whenever/blob/master/lib/whenever/job_list.rb#L25)的源代码。因此，您可以执行以下操作。

日程安排.rb

```
#Load reporting schedules
instance_eval(File.read('reporting_schedule.rb'), 'reporting_schedule.rb')

# All your regular jobs
# ... 
```

报告时间表.rb

```
#Need some way to know if you are on the reporting server
if `hostname` =~ /reporting_server/
  # All your reporting jobs
  # ...
end 
```

为我工作时使用命令进行一些快速测试。虽然没有尝试在部署中使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-20T14:34:18.467

不确定这是否是在提出问题后添加的，但您现在似乎能够进行基于角色的调度：请参阅[https://github.com/javan/whenever上的 README](https://github.com/javan/whenever)

# ios - FMDB 未构建 iOS 6.1

> ID：15843076
> 
> 赞同：1
> 
> 时间：2013-04-05T20:36:53.827
> 
> 标签：ios, xcode, cocoa-touch, sqlite, fmdb

我正在为 iOS 安装 fmdb SQLite 包装器。我克隆了 git repo，并将`/src`and`/extra`目录复制到我的项目中。我在 Xcode 的构建阶段添加了目标依赖项和 .a 静态库。构建时，我得到：

```
ARC Semantics:
my_app_path/src/fmdb.m:160:24: No known instance method for selector 'isEqualTo:' 
```

我正在为 iOS 6.1 构建。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T22:16:27.967

快速的答案是`fmdb.m`从您的项目中删除；这是对 fmdb 的一系列测试，正常使用不需要。

更好的答案是将 fmdb 作为依赖项添加到您的 xcodeproj 中，并链接到它将构建的静态库。

# python - 使用 scipy.optimize.leastsq 时遇到问题

> ID：15843078
> 
> 赞同：0
> 
> 时间：2013-04-05T20:37:04.357
> 
> 标签：python, eclipse-plugin, scipy, pydev

其他一切正常，但是当我使用lealesq 函数时，pydev 编辑器出现错误，提示 Undefined variable from import: leastsq 这是怎么回事？

代码是麻省理工学院的python成本模型timing.py，网址为：http: [//ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-006-introduction-to-algorithms-fall-2011 /readings/python-cost-model/timing.py](http://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-006-introduction-to-algorithms-fall-2011/readings/python-cost-model/timing.py) 和 minimumsq 部分在函数中：

```
def fit2(A,b):
""" Relative error minimizer """
def f(x):
    assert len(x) == len(A[0])
    resids = []
    for i in range(len(A)):
        sum = 0.0
        for j in range(len(A[0])):
            sum += A[i][j]*x[j]
        relative_error = (sum-b[i])/b[i]
        resids.append(relative_error)
    return resids
ans = scipy.optimize.leastsq(f,[0.0]*len(A[0]))
# print "ans:",ans
if len(A[0])==1:
    x = [ans[0]]
else:
    x = ans[0]
resids = sum([r*r for r in f(x)])
return (x,resids,0,0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T11:10:01.237

在我看来，你给 LSQ 函数两个关键字参数，而它需要三个。您为它提供了函数、初始值，但没有提供要进行 LSQ 的实际值？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-07T15:40:58.367

不是硬编码残差的计算，而是尝试将残差包装为一个函数，这是数据值和要最小化的函数之间的差异：

例如，仅将高斯函数拟合到某些数据集：

```
M = np.array(data) # your data as a Nx2 Matrix of (x, y) data points

initials = [3,2,1] # just some initial guess values

def gaussian(x, p):
    return p[0]*np.exp((-(x-p[1])**2.0)/p[2]**2.0) # definition of the function

def residuals(p, y, x):
    return y - gaussian(x, p) # definition of the residual

cnsts = leastsq(residuals, initials, args=(M[:,1], M[:,0]))[0] # outputs optimized initials 
```

# javascript - 鼠标滚轮中的增量没有结果

> ID：15843081
> 
> 赞同：0
> 
> 时间：2013-04-05T20:37:13.670
> 
> 标签：javascript, jquery, javascript-events

我想在 jquery 中创建函数鼠标滚轮，当我想检查增量时，结果总是“未定义”，请帮助我，谢谢这是我的代码

```
$(document).ready(function(){
$('#container').bind('mousewheel', function(event,delta){
     alert(delta)

});
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:40:42.873

你用什么浏览器测试？绑定鼠标滚轮事件的方法不止一种，并且取决于浏览器将确定在哪里找到增量。在 Firefox 中`event.detail`，它的值和它的值可以`1, 2, -1, -2, etc`在您正在查看的非 Firefox 浏览器中，`wheelDelta`这似乎是您编码的内容。

[这里](http://www.javascriptkit.com/javatutors/onmousewheel.shtml)有一个关于鼠标滚轮事件的好资源，这是我在编写 jQuery 鼠标滚轮插件时使用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:57:03.177

无需编写自己的插件。使用这个[脚本](https://raw.github.com/brandonaaron/jquery-mousewheel/master/jquery.mousewheel.js)，你应该很高兴！

```
<script type="text/javascript" src="https://raw.github.com/brandonaaron/jquery-mousewheel/master/jquery.mousewheel.js"></script> 
```

演示：http: [//jsfiddle.net/dirtyd77/WmwfY/](http://jsfiddle.net/dirtyd77/WmwfY/)

旁注：只是一个建议，您可能想要使用[`console.log()`](https://stackoverflow.com/questions/4743730/what-is-console-log-and-how-do-i-use-it)而不是`alert()`将来。

# symfony - Symfony 2 - 产品中的 getEnvorinment()

> ID：15843089
> 
> 赞同：1
> 
> 时间：2013-04-05T20:37:37.037
> 
> 标签：symfony, environment-variables

我正在尝试测试下面的代码会在我的各种环境（本地、开发、qa、int）中转储什么。通过在域之后添加`/app_dev.php/`和`/app_qa.php/`，我能够确定 Symfony 输出“dev”和“qa”。当我尝试`/app_prod.php/`模拟我的 INT 环境时，我收到一条服务器错误消息。

我想确认在 prod 环境中使用下面的代码会转储“prod”。

```
var_dump( $this->container->get('kernel')->getEnvironment() ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T22:40:02.093

`$this->container->get('kernel')->getEnvironment()`将在加载框架时返回 AppKernel 的第一个参数的值。

```
$kernel = new AppKernel('prod', false); 
```

getEnvironment() 返回产品

```
$kernel = new AppKernel('qa', false); 
```

getEnvironment() 返回 qa

# .htaccess - .htaccess RedirectMatch 可以从 url 中删除部分吗？

> ID：15843091
> 
> 赞同：0
> 
> 时间：2013-04-05T20:37:51.927
> 
> 标签：.htaccess, mod-rewrite

我想重定向这个网址：

```
domain.asd/category/node123/attachment/file123 
```

对此：

```
domain.asd/category/node123 
```

通过`attachment/fn1aa`从最后删除。

只有 the`node123`和 the`file123`是动态的。

下面的代码有效，但它有效、安全且资源友好？

```
RedirectMatch permanent category(.*)attachment /category/$1 
```

欢迎任何建议。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:03:30.327

尝试：

```
RedirectMatch permanent ^/category/([^/]+)/attachment /category/$1 
```

它更严格，不会重复正斜杠 ( `/`)。您的正则表达式还将匹配如下内容：

```
domain.asd/foo/something/category/a/b/c/d/e/f/some-attachment 
```

通过重定向到：

```
/category//a/b/c/d/e/f/some- 
```

这可能不是您想要做的。它安全且资源友好，因为它使用的是 htaccess 文件（与将其放在 vhost 配置中相比，它对性能的影响很小）。

# bash - 以数字方式重命名文件，多个文件夹

> ID：15843098
> 
> 赞同：1
> 
> 时间：2013-04-05T20:38:17.113
> 
> 标签：bash, shell, unix

我能够在多个文件夹中以数字方式重命名文件。但是，这不是我要寻找的结果。我的文件结构如下所示：

```
Pictures-
    Vacation-
        img.001.jpg                                                    
        img.002.jpg                                                   
        img.003.jpg                                                    
    Holidays-
        img.004.jpg
        img.005.jpg                                                    
        img.006.jpg                                                   
    Fun-
        img.007.jpg 
```

我想要实现的是：

```
Pictures-                                                                   
    Vacation-
        img.001.jpg
        img.002.jpg
        img.003.jpg
    Holidays-
        img.001.jpg
        img.002.jpg
        img.003.jpg
    Fun-
        img.001.jpg 
```

到目前为止，我想出了以下几点：

```
a=1
for i in $vm/Holiday/*; do
    new=$(printf "%03d.jpg" ${a})
    mv ${i} $vm/Holiday/${new}
    let a=a+1
done 
```

我怎样才能达到我想要的结果，而不必在我的图片文件夹中的每个目录上单独运行它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:25:54.150

试试这个

```
ls > folders        #cat top folders into folders
while read folder   
   do
   cd $folder          #go to vacation folder for   example
   i=0
   ls *.jpg > files
   while read line
       do
       mv $line img.$i.jpg   #rename files according to your need
       i=$(($i+1))
       done < "files"
   rm files
   cd ..
   done < "folders"
rm folders 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T08:31:36.687

获取您的版本并使其也遍历文件夹。

```
#!/bin/bash

for dir in ~/code/stack/Pictures/*; do
        [ -d "${dir}" ] || continue
        i=1
        for img in "${dir}"/*.jpg; do
                [ -e "${img}" ] || break
                new="$(printf "%03d.jpg" "${i}")"
                echo mv "${img}" "$(dirname "${img}")/${new}"
                ((i++))
        done
done 
```

更改您的图片文件夹的位置，并首先使用回声进行试运行。这就是你想要的……？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T20:59:35.203

```
#!/bin/bash

function renameImages {
    local i=1;
    for oldFile in * ; do
        if [ -d "$oldFile" ] ; then
            pushd "$oldFile" >/dev/null
            renameImages
            popd >/dev/null
        elif [ "${oldFile##*.}" == "jpg" ] ; then
            newFile=$(printf img.%03d.jpg $i)
            echo "$PWD/$oldFile -> $PWD/$newFile"
            i=$((i+1))
        fi
    done
}

renameImages 
```

这实际上不会重命名任何文件，而是会按原样在屏幕上打印。

如果您对它的作用感到满意，请更改

```
echo "$PWD/$oldFile -> $PWD/$newFile" 
```

到

```
mv "$PWD/$oldFile" "$PWD/$newFile" 
```

**注意：**此答案的第一次编辑将重命名所有文件，无论是否为 .jpg。此版本仅重命名 .jpgs。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T05:03:42.173

```
#!/bin/bash

a=1
for i in $vm/Vacation/*; do
new=$(printf "%04d.jpg" ${a}) 
mv ${i} $vm/Vacation/${new}
let a=a+1
done

b=1
for i in $vm/Holiday/*; do
new=$(printf "%04d.jpg" ${b}) 
mv ${i} $vm/Holiday/${new}
let b=b+1
done

c=1
for i in $vm/Fun/*; do
new=$(printf "%04d.jpg" ${c}) 
mv ${i} $vm/Fun/${new}
let c=c+1
done 
```

这是漫长而乏味的，并不理想，但它确实有效。多年来，当我遇到它们时要对它们进行分类和添加图片时，可以接受一个更短的解决方案。

# tags - jekyll - 列出 page.tags

> ID：15843107
> 
> 赞同：8
> 
> 时间：2013-04-05T20:38:56.123
> 
> 标签：tags, jekyll

我是 jekyll 的新手，正在构建我的网站。

我有一个“帖子”布局，我希望所有与帖子相关的标签都出现在左栏中。我遇到的问题是使用 {{ page.tags }} 返回的标签列表不是逗号分隔的，而且看起来很乱。[有关示例](http://johnstantongeddes.org/ecological%20genetics/2013/03/28/thursday.html)，请参见此处。

布局页面的html代码为：

```
<div class="span3">
    </br>
    <img src="{{ page.root }}assets/img/glyphicons_045_calendar.png" /> {{ page.date | > date: "%d %B %Y" }}    
    </br> 
    <img src="{{ page.root }}assets/img/glyphicons_066_tags.png" /> {{ page.tags }}
 </div>

<div class="span9">
    <h1> {{ page.title }} </h1>
    {{ content }}
</div> 
```

关于如何（a）让标签列表以逗号分隔和（b）环绕以使其保持在左列中的任何建议？谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-06T09:13:50.110

您可以尝试将它们放在`<p>`标签内，以便它们可以环绕。

要让它们以逗号分隔，您可以遵循 jekyll 文档并使用：

```
{{ page.tags | array_to_sentence_string }} => foo, bar, and baz 
```

正如[Jekyll wiki](https://github.com/mojombo/jekyll/wiki/Liquid-Extensions)中所说。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-07T02:51:32.270

要更精确地控制您可以对标签执行的操作，请使用`for`运算符：

```
<ul>
{% for tag in page.tags %}
    <li> {{tag}} </li>
{% endfor %}
</ul> 
```

这个例子是从某个地方逐字记录的。还有更多的[控制结构](https://github.com/Shopify/liquid/wiki/Liquid-for-Designers)可供选择。

# javascript - jQuery .append() 不呈现 html 实体

> ID：15843109
> 
> 赞同：8
> 
> 时间：2013-04-05T20:39:01.880
> 
> 标签：javascript, jquery, html, html-entities

我有一个带有 html 的变量，如下所示：

```
var html = '<div>Hello, you&#39;re awesome!</div>'; 
```

`$("body").append(html)`由于某种原因，我想将它附加到一个元素，它没有解码 HTML 实体。我试过`$("body").append($(html));`了，但没有用。我的文字卡在元素内，我无法单独将它们放在一起。

有没有办法将带有基于文本的实体的 html 附加到另一个元素中，并让 html 实体呈现在页面上？

我已经阅读了一堆关于 stackoverflow 的文章 reguarding html 实体，似乎它们都没有在这样的变量中包含 html 和文本。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-05T20:41:54.530

试试这个：

```
var html = $('<div>Hello, you&#39;re awesome!</div>');
$("body").append(html) 
```

[**演示在这里**](http://jsfiddle.net/zrCum/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T20:52:27.897

当 jQuery 代码尝试附加内容时，您的页面可能没有完成加载。尝试：

```
$(document).ready(function (){
  var html = '<div>Hello, you&#39;re awesome!</div>';
  $('body').append(html)
}); 
```

我建议仅使用单引号，除非您需要使用转义字符。

# ruby - 将 SitePrism 与 Rspec 和 Capybara 功能规范一起使用

> ID：15843110
> 
> 赞同：3
> 
> 时间：2013-04-05T20:39:02.203
> 
> 标签：ruby, rspec, capybara, site-prism

我最近通过 ruby​​weekly 电子邮件发现了 SitePrism。看起来很神奇。我可以看到它的未来。

我看到的例子主要是黄瓜步骤。我试图弄清楚如何将 SitePrism 与 rspec 一起使用。

假设主页为@home_page，login_page 为@login_page 我可以理解

```
@home_page.load # => visit @home.expanded_url 
```

但是，我不确定的部分是，如果我认为单击例如“登录”链接，Capybara 中的浏览器会进入登录页面 - 然后我如何访问登录页面的实例，而不加载它.

```
 @home_page = HomePage.new
    @home_page.load
    @home.login_link.click
    # Here I know the login page should be loaded, so I can perhaps do 

    @login_page = LoginPage.new
    @login_page.should be_displayed
    @login_page.email_field.set("some@email.com")
    @login_page.password_field.set("password")
    @login_page.submit_button.click

etc... 
```

这似乎可行。因此，当您知道您应该在特定页面上时，您创建该页面的一个实例，并以某种方式创建水豚“页面”上下文，如 page.find("a[href='/sessions/new'] ") 转移到最后一个 SitePrism 对象？

我只是觉得我在这里错过了一些东西。我会到处玩，看看我能想出什么——只是想我可能会遗漏一些东西。我正在查看源代码，但如果有人知道这一点......请随时分享:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T22:42:47.017

您所假设的结果正是 SitePrism 的工作原理 :) 尽管您可能想查看自述文件的结尾部分，该部分解释了如何使您不必在整个测试代码中实例化页面对象。这是一个例子：

```
# our pages

class Home < SitePrism::Page
  #...
end

class SearchResults < SitePrism::Page
  #...
end

# here's the app class that represents our entire site:

class App
  def home
    Home.new
  end

  def results_page
    SearchResults.new
  end
end

# and here's how to use it:

#first line of the test...
@app = App.new
@app.home.load
@app.home.search_field.set "sausages"
@app.home.search_button.click
@app.results_page.should be_displayed 
```

# java - 从 AssetManager Android 获取 FileChannel

> ID：15843112
> 
> 赞同：1
> 
> 时间：2013-04-05T20:39:04.367
> 
> 标签：java, android, filechannel, android-assetmanager

我想`FileChannel`从`AssetManager`Android中获得一个，有什么办法吗？我想将一些原始的自定义二进制文件映射到一些缓冲区。（如果您有比使用 更好的解决方案`AssetManager`，请随时提及。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T02:06:04.317

弄清楚了：

`FileChannel fc = manager.openFd(file).createInputStream().getChannel();`

不确定它是否有效。我会确认是否有。

编辑：

这仅在文件未压缩时才有效。您必须使用正确的文件扩展名或在 aapt 上添加 -0 标志。寻找如何在日食上做到这一点......

# database - Polyglot persistece 与关系图数据库是一个好主意吗？

> ID：15843114
> 
> 赞同：3
> 
> 时间：2013-04-05T20:39:08.270
> 
> 标签：database, relational-database, neo4j, graph-theory

我想知道是否值得使用图形数据库专门处理关系。

我假装使用关系数据库来存储“用户”、“页面”、“评论”、“帖子”等实体。

但是在典型的基于社交图的工作负载的大多数情况下，我必须进行深度遍历，关系不好处理并且涉及缓慢的连接。

示例：**评论**-(made_in)->**帖子**-(made_in)->**页面**等...

我正在考虑做这样的事情：

**例子：**

用户编号：1

查询：**获取user_id 1的所有关注者**

*   为 ID 为 1 的节点用户查询 Neo4j 以获取名为“follows”的所有输出边
*   使用 id 列表在 Users 表上查询它们：

    SELECT * FROM users WHERE user_id IN (ids)

这慢吗？

我看过这个问题[一起使用 MySQL 和 Neo4j 是个好主意吗？](https://stackoverflow.com/questions/2541891/is-it-a-good-idea-to-use-mysql-and-neo4j-together)，但仍然无法理解为什么正确的答案说这不是一个好主意。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T21:07:59.350

对于像您这样需要深度遍历的应用程序，使用 Neo4j 是一种很好的技术选择。它是一个不错的选择的原因有两个：一个是 Cypher 语言使此类查询非常容易。第二个是深度遍历发生得非常快，因为数据库中数据的结构方式。

为了获得这两个好处，您需要在图中同时拥有关系和人（作为节点）。然后你就可以进行朋友的朋友查询，如下所示：

开始 john=node:node_auto_index(name = 'John') MATCH john-[:friend]->()-[:friend]->fof 返回 john, fof

和朋友的朋友的朋友查询如下：

START john=node:node_auto_index(name = 'John') MATCH john-[:friend]->()-[:friend]->()->[:friend]->fofof 返回 john, fofof

...等等。（帖子和评论的想法相同，只需替换名称。）

将 Neo4j 与 MySQL 一起使用很好，但我不会以这种特殊方式这样做，因为代码会复杂得多，而且你会在 Neo4j 和 MySQL 之间浪费太多时间。

祝你好运！

菲利普

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T03:03:17.587

正如其他答案所示，最好使用 Neo4j 作为您的单一数据存储。但是，在某些情况下，如果您的产品背后已经有另一个数据库，则可能没有太多选择。我想补充一点，如果是这种情况，运行 neo4j 作为您的辅助数据库确实可以工作（我工作的产品在这种模式下运行）。您确实必须更加努力地弄清楚您期望从 neo4j 中获得什么功能，需要什么样的数据，如何保持数据同步以及遭受不总是实时结果的后果。我们的大多数用例都可以处理近乎实时的结果，所以我们很好。您的产品可能并非如此。尽管如此，对我来说，在这种模式下使用 neo4j 仍然比没有它运行更可取。因此，我们能够制作出很多非常棒的作品。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T20:58:34.187

一般来说，您拥有的数据库/系统/层越多，整体设置和操作就越复杂。

想想所有这些任务，如同步、导出/导入、备份/存档等，如果您的数据库规模增长，这些任务将变得非常昂贵。

只有当拥有专用和专用数据库的好处超过必须处理多个数据存储的缺点时，人们才会使用多语言持久性。Fe 如果您有大量数据项（活动或事务日志 fe），每个都与一个用户相关，则可能会出现这种情况。如果您只对数据项之间的连接感兴趣，那么将所有信息存储在图形数据库中可能是没有意义的。所以你最好只存储图中的关系（节点只有一个指向另一个数据库的指针），以及 K/V 存储等中的每个项目的数据。

对于您的示例用例，我只会选择一个数据库，即 Neo4j，因为它是一个图表。

# google-chrome-extension - Chrome 扩展弹出窗口 - 从 background.js 函数设置 DIV 文本

> ID：15843115
> 
> 赞同：0
> 
> 时间：2013-04-05T20:39:17.033
> 
> 标签：google-chrome-extension

感谢您的阅读。

我被困在我的 background.js 和 popup.html 之间传递信息！

在此示例中，我尝试从 popup.html 调用 background.js 中的 testRequest。我查看了数十个如何执行此操作的示例并编写了尽可能多的解决方案，但我没有成功......这是我尝试过的解决方案之一：

弹出.html：

```
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title></title>
</head>
<body>
    <script type="text/javascript"  src="background.js">                
            $(document).ready(function () {
                document.getElementById("test").textContent = chrome.extension.getBackgroundPage.testRequest();
            });
    </script>
    <div id="test"></div>
</body>
</html> 
```

背景.js

```
var testRequest = function(){
return 'yay!';
} 
```

非常感谢您的帮助！

〜布赖恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T21:11:39.250

您可以使用简单的消息传递来执行此操作。例如：

**弹出窗口.html**

```
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title></title>
    <script src="jquery.min.js"></script>
    <script src="popup.js"></script>
  </head>
  <body>
    <div id="test"></div>
  </body>
</html> 
```

**popup.js**

```
$(function() {
  chrome.runtime.sendMessage({method:"testRequest"},function(reply){
    $('#test').text(reply);
  });
}); 
```

**背景.js**

```
chrome.runtime.onMessage.addListener(function(message,sender,sendRepsonse){
  if(message.method == "testRequest")
    sendResponse(testRequest());
});
function testRequest(){
  return "yay!";
} 
```

内联代码是不允许的，`popup.html`所以我们将它全部移动到一个外部文件，你已经在使用 jQuery，所以不要害怕使用它，如果你正在使用它，不要忘记包含它。

# javascript - Document.getElementById 问题（访问宽度属性）

> ID：15843117
> 
> 赞同：0
> 
> 时间：2013-04-05T20:39:38.400
> 
> 标签：javascript, css, width

我尝试在 JavaScript 的所有部分添加`.style`、`.style.width`和`.style.width.value`，但到目前为止无济于事。

本质上，我想要两件事。

1.  要通过单击“动画”按钮获取值的警报`50px`，运行该`anim8`函数。换句话说，我想要`width`.`div`

2.  在第二组代码 ( `anim82`) 中，我希望能够`width`通过单击按钮来设置/更改它。我想`10px`在单击按钮时添加。首先，我需要访问该变量，即`width`, ，然后才能更改任何内容。

HTML

```
 <div id="mainTxt">Dag!</div>
 <form NAME="myForm" ACTION="" METHOD="GET">
 <input type="button" name="button" value="Animate" onClick="anim8(this.form)">
 <input type="button" name="button" value="Animate2" onClick="anim82(this.form)"> 
```

CSS

```
#mainTxt{width:60px;} 
```

Javascript

```
var divAlert;
var divSize;

function anim8(form)
{
    divAlert=document.getElementById("mainTxt");
    alert(divAlert);
}

function anim82(form)
{
    divSize=document.getElementById("mainTxt");
    divSize.style.width=parseInt(divSize.style.width)+10+'px';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:47:18.047

试试这个

```
function anim82(form)
{
    divSize=document.getElementById("mainTxt");
    var width=divSize.offsetWidth + 100;
    divSize.setAttribute("style","width:"+ width +"px")    
} 
```

[JS 小提琴示例](http://jsfiddle.net/PnvJt/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T21:18:21.860

您的第一步应该是查看是否有错误。如果您收到错误，请尝试此代码

```
var div1 = document.getElementById("mainTxt");
var align = div1.getAttribute("width"); 
```

[来源](https://developer.mozilla.org/en-US/docs/DOM/element.getAttribute)

# html - 仅在 FireFox 中文档顶部附近出现无法解释的空间

> ID：15843118
> 
> 赞同：2
> 
> 时间：2013-04-05T20:39:41.883
> 
> 标签：html, css, firefox, web

我遇到了一个问题，即应用于 div 的边距似乎也仅应用于*FireFox*中的文档正文。

互联网上的一些谷歌搜索似乎提到了崩溃的边距，虽然可能是这种情况，但我认为我并不完全理解发生了什么。

我创建了一个示例[http://jsfiddle.net/davidwkennedy/3BQrw/](http://jsfiddle.net/davidwkennedy/3BQrw/)（在 FF 中查看，然后在任何其他浏览器中进行比较）。

```
 <body>
  <form id="form1" action="nothing">
     <div>
        <div>
           <p style="float:left; border:solid 1px red">Why is this text not anchored at the top of the page?</p>
           <div style="clear:both;"> </div>
        </div>
     </div>
     <div style="margin-top:100px;">
        <p>hello world</p>
     </div>
  </form> 
```

有人可以帮我理解发生了什么吗？

谢谢

（编辑：我问这个已经有一段时间了，但我想用 FireFox 版本更新。我不记得我最初写这篇文章时使用的是什么，但这个问题在 26.0 中仍然存在）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T20:47:54.430

它与折叠边距有关。添加`overflow:auto`到您的表单中，您会看到问题消失。

**[jsFiddle 示例](http://jsfiddle.net/j08691/3BQrw/2/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T21:14:47.850

这真的很奇怪。说明当您从 p 中移除浮动时，它会按预期工作。

出于某种原因，当 Firefox 计算主体上的边距折叠时，它会将边距添加到主体而不是子元素。我猜这是一个小故障，尽管我没有仔细检查规范。

肯定是一个小故障的部分是 Firefox 没有完全计算`clear:both`应用于子 div 的值，因为如果这样做，hello world 边距崩溃将不会应用于 body。`clear:none`当子 p设置为 时，外部包含的 div 将自动设置为`float`，这很奇怪，但在意料之中。但是，当第二个子 div 设置为 时`clear:both`，显然有些事情会变得很糟糕。我怀疑你会为这部分找到一个合乎逻辑的答案，因为它几乎可以肯定是 Firefox 渲染中的一个错误。

长话短说，您可能在 Firefox 的渲染中发现了两个错误，而不是一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T21:20:02.673

`*{margin:0; padding:0;}` 一切都可以为每个人提供风格或只为您的形式提供“`form {margin:0; padding:0;}`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T21:54:44.763

您可能需要 CSS 重置。我使用这个，由 Eric Meyer 编码。这是最好的一击。尝试在您开始构建的每个站点上使用它。这是 CSS 代码（始终将其放在主 CSS 的顶部或作为主 CSS 内的 @import）。这在你的小提琴中对我有用！运气！

```
a, abbr, acronym, address ,applet, article, aside, audio, b, blockquote, big, body, center, canvas, caption, cite, code, command, datalist, dd, del, details, dfn, dl, div, dt, em, embed, fieldset, figcaption, figure, font, footer, form, h1, h2, h3, h4, h5, h6, header, hgroup, html, i, iframe, img, ins, kbd, keygen, label, legend, li, meter, nav, object, ol, output, p, pre, progress, q, s, samp, section, small, span, source, strike, strong, sub, sup, table, tbody, tfoot, thead, th, tr, tdvideo, tt, u, ul, var {
    background: transparent;
    border: 0 none;
    font-size: 100%;
    margin: 0;
    padding: 0;
    border: 0;
    outline: 0;
    vertical-align: top;
}

ul {list-style: none; }
blockquote, q {quotes: none; }

table, table td {
    padding: 0;
    border: none;
    border-collapse: collapse;
}

img {vertical-align: top; }

embed {vertical-align: top; }

article, aside, audio, canvas, command, datalist, details, embed, figcaption, figure, footer, header, hgroup, keygen, meter, nav, output, progress, section, source, video {display: block; }

mark, rp, rt, ruby, summary, time{display: inline; } 
```

# css - 媒体查询不适用于更大的视口大小

> ID：15843119
> 
> 赞同：0
> 
> 时间：2013-04-05T20:39:42.540
> 
> 标签：css, responsive-design, media-queries

我的侧边栏顶部有一组社交媒体图标：[outtacontext](http://outtacontext.com/wp2)。但是我无法将它们定位在不同视口大小的正确位置。实际上，它适用于所有较小的视口，但对于较大的屏幕，定位是关闭的。

这是我用于此定位的主要 css：

```
#top #sidebar_bg .social_bookmarks {
position: absolute;
right: 69px;
z-index: 152;
margin-top: 102px;
}

@media only screen and (max-width: 989px) and (min-width: 768px){

#top #sidebar_bg .social_bookmarks {
right: 33px;
margin-top: 65px;
}
} 
```

出于某种原因，对于较大的屏幕，图标似乎会在侧边栏中居中。但是我进行调整的任何媒体查询都只是开始增加问题。

谁能指出我正确的方向？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T21:11:48.597

首先，我是阿根廷人，所以请原谅我的英语！

这是我的帮助...

**HTML 标记是：**

```
<div id="sidebar_bg">

    <ul class="social_bookmarks">

        <li class='twitter'>
            <a href='http://twitter.com/outtacontext'>Follow us on Twitter</a>
        </li>
        <li class='facebook'>
            <a href='http://facebook.com/chamomileteaparty'>Join our Facebook Group</a>
        </li>
        <li class='gplus'>
            <a href='https://plus.google.com/106461359737856957875/posts'>Join me on Google Plus</a>
        </li>
        <li class='linkedin'>
            <a href='http://linkedin.com/jeffgates'>Add me on Linkedin</a>
        </li>
        <li class="rss">
            <a href="http://www.outtacontext.com/wp2/feed/">RSS</a>
        </li>
        <li class="flickr">
            <a href="http://flickr.com/outtacontext">Flickr</a>
        </li>

    </ul>

</div> 
```

**CSS 样式：**

```
#top #sidebar_bg {
    text-align: center; /* This will center EXACTLY on the middle the icons (acording to the #sidebar_bg width on every screen resolution */
}

#top #sidebar_bg .social_bookmarks {
    display: inline-block;
    z-index: 152;
    margin-top: 102px;
}

@media only screen and (max-width: 989px) and (min-width: 768px){
    #top #sidebar_bg .social_bookmarks {
        margin-top: 65px;
    }
} 
```

**ALTERNATIVE CSS** - 如果你想把它放在右边或左边，并使用媒体查询来确定从一侧的分隔宽度，你可以使用这个：

```
#top #sidebar_bg {
    text-align: *****; /* right or left */
}

#top #sidebar_bg .social_bookmarks {
    margin-*****: 40px; /* right or left */
    display: inline-block;
    z-index: 152;
    margin-top: 102px;
}

@media only screen and (max-width: 989px) and (min-width: 768px){
    #top #sidebar_bg .social_bookmarks {
        margin-*****: 25px; /* right or left */
        margin-top: 65px;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T15:27:36.727

我解决了这个问题。我曾尝试对我认为最大的视口大小进行媒体查询。事实证明，我用错误的宽度写了它（只是“几乎”错了，但你知道 -g 是什么意思）。定位的媒体查询应设置为 1140 像素的最小宽度。我已将其设置为 1122 像素。很近。哈哈

# php - 请求就绪状态总是返回0？

> ID：15843121
> 
> 赞同：0
> 
> 时间：2013-04-05T20:39:45.317
> 
> 标签：php, javascript, html, ajax, json

我是 JavaScript 新手，正在尝试使用一些 Ajax 将 HTML 动态加载到`<div>`元素中。我有一个 PHP 页面，它会吐出一个 JSON，其中包含插入`<div>`. 我一直在测试，无法接听电话。我开始在我的就绪状态上发出警报，我得到 0，然后什么也没有。根据我的理解，`sendData()`每次readystate更改时都应该调用该函数，但它似乎只执行一次，或者readystate永远不会改变，所以它只被调用一次......？

这是我的 PHP

```
<?php
    $array['html'] = '<p>hello, menu here</p>';
    header('Content-type: application/json');
    echo json_encode($array);
?> 
```

这是我的 HTML

```
<!DOCTYPE html>
<html>
<head>
<title>Veolia Water - Solutions and Technologies Dashboard</title>  
<meta http-equiv="content-type" content="text/html;charset=UTF-8" />    
<meta name="description" content="Veolia Water - Dashboard"/>
<meta http-equiv="imagetoolbar" content="no" />
<meta author="Nathan Sizemore"/>
<link rel="stylesheet" href="./css/stylo.css" media="screen"/>
</head>
<body>
    <div id="menu">
    </div>
    <div id="content">
    </div>
</body>
<script src="./js/dashboard.js"></script>
</html> 
```

这是我的 JavaScript

```
var request;
window.onload = function() 
{
     load_menu();
}

//Load menu function
function load_menu()
{   
    request = getHTTPObject();
    alert(request.readyState);
    request.onreadystatechange = sendData();
    request.open("GET", "./php/menu.php", true);
    request.send(null);
}

function getHTTPObject()
{
    var xhr = false;
    if (window.XMLHttpRequest)
    {
        xhr = new XMLHttpRequest();
    } 
    else if (window.ActiveXObject) 
    {
        try
        {
            xhr = new ActiveXObject("Msxml2.XMLHTTP");
        }
        catch(e)
        {
            try
            {
                xhr = new ActiveXObject("Microsoft.XMLHTTP");
            }
            catch(e)
            {
                xhr = false;
            }
        }
    }
    return xhr;
}

function sendData()
{
    alert(request.readyState);
    // if request object received response
    if (request.readyState == 4)
    {
        var json = JSON.parse(request.responseText);
        document.getElementById('menu').innerHTML = json.html;
        alert(json.html);
    }
} 
```

提前感谢您的帮助！

弥敦道

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:42:56.477

用这个：

```
request.onreadystatechange = sendData; 
```

请注意，`()`从`sendData()`

您之前所做的是立即执行`sendData`并将其结果返回到`onreadystatechange`. 由于实际上没有任何内容被`return`编辑，因此值为`undefined`。它实际上并没有设置任何东西，因此在更改`onreadystatechange`时实际上没有执行任何东西。`state`该`onreadystatechange`属性需要对函数的引用......这正是它的本质`sendData`。

在您的代码中，由于`sendData`执行了一次（意外），因此报告的状态为 0（XHR 的初始状态）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T20:43:02.640

更改此行

```
request.onreadystatechange = sendData(); 
```

对此

```
request.onreadystatechange = sendData; 
```

第一个代码调用`sendData`并将结果分配为处理程序。
第二个分配功能本身。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T20:43:41.117

```
request.onreadystatechange = sendData(); 
```

应该

```
request.onreadystatechange = sendData; 
```

您`sendData`立即调用并使用该函数的*结果*作为侦听器，而不是使用函数本身。

# varnish - 清漆饼干问题

> ID：15843122
> 
> 赞同：0
> 
> 时间：2013-04-05T20:39:46.807
> 
> 标签：varnish

首先，对不起我糟糕的英语，这不是我的自然语言。

我尝试为管理用户配置带有 cookie 的清漆到后端，但我在登录和其他检查时遇到了一些问题。

我对 recv、fetch 和 hash 的配置：

```
backend default {
  .host = "127.0.0.1";
  .port = "8080";
}

sub vcl_recv {

   remove req.http.X-Forwarded-For;
   set req.http.X-Forwarded-For = client.ip;

   if (req.request == "POST"){
        return (pass);
   }

   # Grace mode
   if (! req.backend.healthy) {
          set req.grace = 30m;
   } else {
      set req.grace = 15s;
   }

   if(req.url ~ "^localhost$"){
    set req.http.host = "www.micasa.com";
   } 

   # Acces to system URL's is protected
   if ((req.url ~ "^/server_status") || (req.url ~ "^/discover/varnish_server")) {
        error 403 "Go away, please";
   }

  # Delete all cookies except from user

  if ( !(req.url ~ "^/logout") && 
       !(req.url ~ "^/profile") && 
       !(req.url ~ "^/playlists") && 
       !(req.url ~ "^/users") && 
       !(req.url ~ "^/signup") && 
       !(req.url ~ "^/comments") && 
       !(req.url ~ "^/login") && 
       !(req.url ~ "^/remind"))
        {
                unset req.http.cookie;
        }

sub vcl_fetch {

  # Grace mode
  # https://www.varnish-cache.org/docs/trunk/tutorial/handling_misbehaving_servers.html#grace-mode
  set beresp.grace = 30m;

  # Saint mode
  # https://www.varnish-cache.org/docs/trunk/tutorial/handling_misbehaving_servers.html#saint-mode
  if (beresp.status == 500) {
    set beresp.saintmode = 10s;
    return (restart);
  }
  if ( !(req.url ~ "^/login") && (req.request == "GET")){
        unset beresp.http.set-cookie; # To avoid caching of cookies
  }

  # Process ESIs if X-RUN-ESI is set. This will be stripped before being sent down to client.
  if ( beresp.http.X-RUN-ESI ) {
    set beresp.do_esi = true;
    remove beresp.http.X-RUN-ESI;
  }

  # cache 404s and 301s for 5 minute
  if (beresp.status == 404 || beresp.status == 301 || beresp.status == 500) {
     set beresp.ttl = 15m;
     return (deliver);
  }

  # cache images and static assets during 15m
  if ( req.url ~ "\.(png|gif|jpg|css|js|ico)" ) {
     set beresp.ttl = 15m;
     return (deliver);
  }

  # If X-VARNISH-TTL is set, use this header's value as the TTL for the varnish cache.
  # Expires, cache-control, etc. will be passed directly through to the client
  # Cribbed from http://www.lovelysystems.com/configuring-varnish-to-use-custom-http-headers/
  if (beresp.http.X-VARNISH-TTL) {
    C{
      char *ttl;
      /* first char in third param is length of header plus colon in octal */
      ttl = VRT_GetHdr(sp, HDR_BERESP, "\016X-VARNISH-TTL:");
      VRT_l_beresp_ttl(sp, atoi(ttl));
    }C
    remove beresp.http.X-VARNISH-TTL;
    return (deliver);
  }
sub vcl_deliver {
    unset resp.http.x-url; # Optional
    if ( req.url ~ "\.(png|gif|jpg|css|js|ico|woff)" ) {
      set resp.http.expires = "3600";
    }

    #mikel
    #remove resp.http.X-Powered-By;
    remove resp.http.Server;
    #remove resp.http.X-Varnish;
    #remove resp.http.Via;
    #remove resp.http.Age;

}

sub vcl_hash {
   if (req.http.Cookie ~ "_micasa_session") {
     hash_data(req.url);
     hash_data(req.http.Cookie);
         return (hash);
   }
} 
```

当我尝试使用用户登录时没关系，但是如果我在那之后刷新同一页面，我会丢失 cookie 并立即注销，也许问题出在 sub vcl_recv 中？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T13:43:13.923

您取消设置除已定义页面之外的所有 cookie。您的站点登录几乎肯定保存在 cookie（会话 cookie？）中。最简单的方法是通过检查是否设置了一些标识登录用户的 cookie 来禁用登录用户的缓存。好的方法是使用 ESI，以便缓存所有用户相同的部分。

# python - 将多个 CSV 文件读入 Python Pandas 数据框

> ID：15843123
> 
> 赞同：10
> 
> 时间：2013-04-05T20:40:03.243
> 
> 标签：python, pandas

该问题背后的一般用例是将多个 CSV 日志文件从目标目录读取到单个 Python Pandas DataFrame 中，以进行快速周转统计分析和图表。利用 Pandas 与 MySQL 的想法是全天定期进行此数据导入或附加 + 统计分析。

下面的脚本尝试将所有 CSV（相同文件布局）文件读入单个 Pandas 数据框，并添加与每个文件读取关联的年份列。

## 脚本的问题是它现在只读取目录中的最后一个文件，而不是期望的结果是目标目录中的*所有*文件。

```
# Assemble all of the data files into a single DataFrame & add a year field
# 2010 is the last available year
years = range(1880, 2011)

for year in years:
    path ='C:\\Documents and Settings\\Foo\\My Documents\\pydata-book\\pydata-book-master`\\ch02\\names\\yob%d.txt' % year
    frame = pd.read_csv(path, names=columns)

    frame['year'] = year
    pieces.append(frame)

# Concatenates everything into a single Dataframe
names = pd.concat(pieces, ignore_index=True)

# Expected row total should be 1690784
names
<class 'pandas.core.frame.DataFrame'>
Int64Index: 33838 entries, 0 to 33837
Data columns:
name      33838  non-null values
sex       33838  non-null values
births    33838  non-null values
year      33838  non-null values
dtypes: int64(2), object(2)

# Start aggregating the data at the year & gender level using groupby or pivot
total_births = names.pivot_table('births', rows='year', cols='sex', aggfunc=sum)
# Prints pivot table
total_births.tail()

Out[35]:
sex     F   M
year        
2010    1759010     1898382 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-05T21:30:46.083

`append`DataFrame 实例上的方法与列表实例上的方法的功能不同`append`。 `Dataframe.append()`不会就地发生，而是返回一个新对象。

```
years = range(1880, 2011)

names = pd.DataFrame()
for year in years:
    path ='C:\\Documents and Settings\\Foo\\My Documents\\pydata-book\\pydata-book-master`\\ch02\\names\\yob%d.txt' % year
    frame = pd.read_csv(path, names=columns)

    frame['year'] = year
    names = names.append(frame, ignore_index=True) 
```

或者您可以使用`concat`：

```
years = range(1880, 2011)

names = pd.DataFrame()
for year in years:
    path ='C:\\Documents and Settings\\Foo\\My Documents\\pydata-book\\pydata-book-master`\\ch02\\names\\yob%d.txt' % year
    frame = pd.read_csv(path, names=columns)

    frame['year'] = year
    names = pd.concat(names, frame, ignore_index=True) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-05T01:08:47.003

我无法获得上述任何一个答案。第一个答案很接近，但是之后第二行和第三行之间的行距`for`不正确。我在 Canopy 中使用了以下代码片段。另外，对于那些感兴趣的人......这个问题来自[“Python for Data Analysis”](https://rads.stackoverflow.com/amzn/click/com/1449319793)中的一个例子。（到目前为止，一本令人愉快的书，否则）

```
import pandas as pd

years = range(1880,2011)
columns = ['name','sex','births']
names = pd.DataFrame()

for year in years:
    path = 'C:/PythonData/pydata-book-master/pydata-book-master/ch02/names/yob%d.txt' % year
    frame = pd.read_csv(path, names=columns)
    frame['year'] = year
    names = names.append(frame,ignore_index=True) 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2014-02-09T20:16:46.483

删除以下之间的行间距：

```
 frame = pd.read_csv(path, names=columns) 
```

&

```
 frame['year'] = year 
```

所以它读

```
 for year in years:
        path ='C:\\Documents and Settings\\Foo\\My Documents\\pydata-book\\pydata-book-master`\\ch02\\names\\yob%d.txt' % year
        frame = pd.read_csv(path, names=columns)
        frame['year'] = year
        names = pd.append(names, frame, ignore_index=True) 
```

# c - 如何使用目标文件中的函数

> ID：15843124
> 
> 赞同：0
> 
> 时间：2013-04-05T20:40:03.213
> 
> 标签：c, compiler-construction

我很确定这个问题是重复的，但找不到答案。

我写了一个函数（在“function.h”和“function.c”文件中），并将其编译为“function.o”文件。我想在我的主要源代码中使用“function.c”中定义的函数，但不包括“function.h”。是否可以仅使用“function.o”编译 main.c？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T21:02:50.900

头文件（通常）只是一个声明列表，它们以文本方式（按`#include`）插入到源文件中。

因此，如果`function.h`包含

```
void foo(int x); 
```

并且你`#include "function.h"`在你的主源文件中，它完全等同于`void foo(int x);`在你的源文件中写入。

头文件对于代码组织很有用，因为手动将这些声明复制到每个使用它们的源文件中会非常低效（并且容易出错）。但是，如果您出于任何原因想要避免使用头文件，则将这些声明直接复制到源文件中与`#include`'ing 文件具有相同的效果。

# php - PHP PDO 错误 1064

> ID：15843126
> 
> 赞同：-1
> 
> 时间：2013-04-05T20:40:08.460
> 
> 标签：php, mysql, pdo

我有一个小问题，当我在我的论坛上提交数据时，我收到了这个错误：

```
SQLSTATE[42000]：语法错误或访问冲突：1064 您的 SQL 语法有错误；查看与您的 MySQL 服务器版本相对应的手册，了解在“解释、国家、IP、主机名”附近使用的正确语法
```

我的代码是这样的：

```
        $STH = $DBH->prepare("INSERT INTO `Applications` (`Username`, `Email`, `Age`, `Reason`, `Explain`, `Country`, `IP`, `Hostname`) 值 ( $username, $email, $age, $reason, $explain, $country, $ip, $hostname)");
        $STH->执行（）；
```

我似乎找不到问题所在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:50:51.677

您没有正确使用 PDO，从而产生大量 SQL 注入问题。放入 SQL 的值需要正确转义。

[占位符方法](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)要求这样做：

```
$STH = $DBH->prepare("INSERT INTO `Applications` (`Username`, `Email`, `Age`, `Reason`, `Explain`, `Country`, `IP`, `Hostname`) VALUES (:username, :email, :age, :reason, :explain, :country, :ip, :hostname)");
$STH->bindParam(':username', $username);
$STH->bindParam(':email', $email);
... (remaining columns) ..
$STH->bindParam(':hostname', $hostname);
$STH->execute(); 
```

这是确保您的 SQL[正确转义](http://bobby-tables.com/php)的最佳方法。

# weblogic - 如何让 Atomikos JMS 与 Weblogic 一起使用

> ID：15843129
> 
> 赞同：2
> 
> 时间：2013-04-05T20:40:12.637
> 
> 标签：weblogic, atomikos

我将 Atomikos 用于事务，将 Weblogic 用于 JMS。我的客户端收到 JMSClientExceptions 声明只能从服务器调用 getXAResource。[http://docs.oracle.com/cd/E17904_01/web.1111/e13731/jtatximp.htm#i1060046](http://docs.oracle.com/cd/E17904_01/web.1111/e13731/jtatximp.htm#i1060046)描述了如何让 Weblogic 与第三方事务管理器一起工作。它声明“您必须将 WebLogic Server 插入的事务管理器注册为外部事务管理器的下属”。我无法弄清楚如何做到这一点。任何帮助将不胜感激。

# css - CSS - 无法溢出：在右侧或底部溢出时隐藏以工作

> ID：15843130
> 
> 赞同：0
> 
> 时间：2013-04-05T20:40:13.277
> 
> 标签：css, scroll, overflow, hidden

我创建了一个包含面板和内容的模板。根据模板的类别（顶部、左侧、右侧或底部），面板将具有不同的位置。使用过渡和类执行展开和折叠动画。

编辑：这是一个小提琴：http: [//jsfiddle.net/ckkVx/2/](http://jsfiddle.net/ckkVx/2/) /EDIT

这是HTML代码：

```
<!DOCTYPE html>
<html>
    <head>
        <link href="../Css/reset.dev.css" type="text/css" rel="stylesheet">
        <link href="../Css/V_PanelTemplate.dev.css" type="text/css" rel="stylesheet">
        <script src="../Js/jquery-1.9.1.min.js" type="text/javascript">
        <script src="../Js/V_PanelTemplate.dev.js" type="text/javascript">
    </head>
    <body class="PanelTemplate Bottom">
        <div class="Panel AutoHide Collapsed">PANEL</div>
        <div class="Content Expanded">CONTENT</div>
    </body>
</html> 
```

这是CSS代码：

```
#CHARSET "UTF-8";

.PanelTemplate {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    overflow: hidden;
    }
.PanelTemplate > .Panel,
.PanelTemplate > .Content {
    position: absolute;
    -webkit-transition: ease-in-out 400ms;
       -moz-transition: ease-in-out 400ms;
        -ms-transition: ease-in-out 400ms;
         -o-transition: ease-in-out 400ms;
            transition: ease-in-out 400ms;
    }
.PanelTemplate.Top > .Panel,
.PanelTemplate.Bottom > .Panel {
    height: 100px;
    left: 0;
    right: 0;
    }
.PanelTemplate.Left > .Panel,
.PanelTemplate.Right > .Panel {
    width: 200px;
    top: 0;
    bottom: 0;
    }
.PanelTemplate.Top > .Content,
.PanelTemplate.Bottom > .Content {
    left: 0;
    right: 0;
    }
.PanelTemplate.Left > .Content,
.PanelTemplate.Right > .Content {
    top: 0;
    bottom: 0;
    }
.PanelTemplate.Top > .Panel {
    top: -90px;
    }
.PanelTemplate.Left > .Panel {
    left: -190px;
    }
.PanelTemplate.Right > .Panel {
    right: -190px;
    }
.PanelTemplate.Bottom > .Panel {
    bottom: -90px;
    }
.PanelTemplate.Top > .Panel.Expanded {
    top: 0;
    }
.PanelTemplate.Left > .Panel.Expanded {
    left: 0;
    }
.PanelTemplate.Right > .Panel.Expanded {
    right: 0;
    }
.PanelTemplate.Bottom > .Panel.Expanded {
    bottom: 0;
    }
.PanelTemplate.Top > .Content {
    top: 100px;
    bottom: 0;
    }
.PanelTemplate.Left > .Content {
    left: 200px;
    right: 0;
    }
.PanelTemplate.Right > .Content {
    right: 200px;
    left: 0;
    }
.PanelTemplate.Bottom > .Content {
    bottom: 100px;
    top: 0;
    }
.PanelTemplate.Top > .Content.Expanded {
    top: 10px;
    }
.PanelTemplate.Left > .Content.Expanded {
    left: 10px;
    }
.PanelTemplate.Right > .Content.Expanded {
    right: 10px;
    }
.PanelTemplate.Bottom > .Content.Expanded {
    bottom: 10px;
    }
/* Test CSS */
.PanelTemplate > .Panel {
    background: #777;
    color: #FFF;
    }
.PanelTemplate > .Content {
    background: #333;
    color: #FFF;
    } 
```

并且，如果需要，JavaScript 代码：

```
(function($) {

    $(document).ready(function() {

        var CLOSE_DELAY = 1000;

        var $panel = $('.PanelTemplate > .Panel.AutoHide').first();
            $content = $('.PanelTemplate > .Content').first();

        $panel.mouseenter(function() {
            $panel
              .addClass('Expanded')
              .removeClass('Collapsed')
              .data('isMouseOver', true);
            $content
              .removeClass('Expanded')
              .addClass('Collapsed');
        }).mouseleave(function() {
            $panel.data('isMouseOver', false);
            // Waiting a short time in case the mouse accidently leaves
            var timeout = setTimeout(function() {
                // If it's no longer over after time out, closing
                if( ! $panel.data('isMouseOver')) {
                    $panel
                      .removeClass('Expanded')
                      .addClass('Collapsed');
                    $content
                      .addClass('Expanded')
                      .removeClass('Collapsed');
                }
                clearTimeout(timeout);
            }, CLOSE_DELAY);
        });
    });
})(jQuery); 
```

当我在模板上使用 Top 或 Left 类时，一切都按预期工作，但是当我使用 Right 或 Bottom 时，面板在移出正文时会扩展窗口并导致出现滚动条。

我阅读了另一个与`overflow:hidden`可能是由于相对定位的元素有关的问题，但我没有任何问题。我也尝试定位 html 标签并添加`overflow:hidden`到它，但它也没有帮助。

我能做些什么来防止这种情况发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:54:29.873

这应该可以解决您的问题-

```
body {
    max-width:100%;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-06T18:39:25.160

问题出在 CSS 中。*Vector*的回答`max-width: 100%;`很好，但如果这不起作用，请使用`!Important`覆盖功能。例如：

```
.PanelTemplate {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    overflow: hidden; !Important
 } 
```

这将有助于覆盖其他溢出规则！

# php - 使用 php 输出多数组值

> ID：15843132
> 
> 赞同：0
> 
> 时间：2013-04-05T20:40:17.433
> 
> 标签：php, arrays, foreach, output, sub-array

我正在尝试使用 PHP 从多数组中输出值，但我不知道如何从每个条目中检索特定值。

大批 -

```
Array
(
    [images] => Array
        (
            [0] => Array
                (
                    [image] => sample1.jpg
                )

                [1] => Array
                    (
                        [image] => sample2.jpg
                    )

            )

    ) 
```

代码 -

```
if ($query) {
    foreach ( $query as $outer_array ) {
        foreach ( $outer_array as $inner_array ) {
            $html .= '<img src="' . $inner_array[image] . '" alt="" />';
        }
    }
} 
```

电流输出 -

```
<img src="" alt="" />
<img src="" alt="" /> 
```

~~这给了我空白的奇怪结果。尝试了十几种不同的方法，我想我对多阵列的工作方式还不够精通。~~

编辑：采用另一种方法。感谢所有的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:42:56.083

首先在图像周围加上引号：

```
$inner_array['image'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T20:47:54.140

如果您的结构与示例中的一样，则可以通过直接循环 $query['images'] 来保存其中一个循环：

```
if (!empty($query['images'])) {
    foreach((array) $query['images'] as $image) {
        $html .= '<img src="' . $image['image'] . '" alt="" />';
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T21:22:39.010

如果 $query 代表最外面的数组，那么你只需要改变

```
foreach ( $query as $outer_array ) 
```

到

```
foreach ( $query['images'] as $outer_array ) 
```

所以它应该看起来像：

```
 if (isset($query['images']) && is_array($query['images'])) {

    foreach ( $query['images'] as $inner_array ) {            

            $html .= '<img src="' . $inner_array['image'] . '" alt="" />';

    }
} 
```

# javascript - KineticJS 实际文本高度

> ID：15843133
> 
> 赞同：0
> 
> 时间：2013-04-05T20:40:18.777
> 
> 标签：javascript, kineticjs

我在获取文本对象的实际文本高度时遇到问题。

```
var btnText = new Kinetic.Text({
        x: xTracker,
        y: headerY,
        fill: '#a2b1c3',
        text: buttonText,
        width: buttonWidth,
        fontSize: 40,
        fontFamily: 'impact',
        align: 'center'
    }); 
```

以下所有方法都返回相同的数字 40，这不是文本的实际高度。

```
btnText.getHeight();
btnText.getTextHeight();
btnText._getTextSize().height; 
```

出于调试目的，我添加了以下 Rect 来显示文本区域

```
var tmp = new Kinetic.Rect({            
            x: btnText.getPosition().x,
            y: btnText.getPosition().y,
            fill: 'rgba(0,0,0,0.3)',
            width: btnText.getWidth(),
            height: btnText.getHeight()
        }); 
```

结果如下：

![在此处输入图像描述](https://i.stack.imgur.com/Odcjc.gif)

您可以看到灰色框（即文本区域）大于实际文本。我需要该区域内的实际文本大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T05:02:58.447

你可以使用：

```
var metrics = context.measureText(label); 
```

# c# - 从文本框读取并传递到另一个页面

> ID：15843135
> 
> 赞同：0
> 
> 时间：2013-04-05T20:40:29.763
> 
> 标签：c#, visual-studio-2010, windows-phone-7, textbox

我想从 TextBox 中读取文本，然后将其发送到另一个页面。但在另一页上，我不断收到空字符串。为什么这不起作用？

我在第 1 页上有这个：

```
public string _beseda()
{
    return textBox1.Text;          
} 
```

在第 2 页上，我应该检索此字符串：

```
private void button1_Click(object sender, RoutedEventArgs e)
{
    Page2 neki = new Page2();
    MessageBox.Show(neki._beseda());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:44:25.920

有很多问题。你说你有那个`_beseda()`功能`Page1`，但你`Page2()`在`button1_click()`. 此外，如果我假设您的意思是`Page1`in `button1_click()`，那么您正在创建新的`Page1`，然后您向它询问文本框的文本......所以它当然是空的。你没有在里面放任何东西。

即使你打算放在`Page2`那里，问题仍然是一样的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T22:00:20.303

在 windows phone 的页面之间传递数据有两种策略。

1.  使用 App.cs
2.  在导航期间将数据作为参数值传递

**1.使用App.cs**

打开 App.xaml 后面的 App.cs 代码写：

```
 // To store Textbox the value   
 public string storeValue; 
```

在第 1 页

```
 protected override void OnNavigatedFrom(System.Windows.Navigation.NavigationEventArgs e)
    {
        base.OnNavigatedFrom(e);
        App app = Application.Current  as App;
        app.storeValue = textBox1.Text;            
    } 
```

在第 2 页

```
 private void button1_Click(object sender, RoutedEventArgs e) {

    App app = Application.Current  as App;
    MessageBox.Show(app.storeValue);
} 
```

**2\. 导航时将值作为参数传递**

在将嵌入文本框值导航到页面 URL 之前

```
 string newUrl = "/Page2.xaml?text="+textBox1.Text;
    NavigationService.Navigate(new Uri(newUrl, UriKind.Relative)); 
```

在第 2 页

```
 //Temporarily hold the value got from the navigation 
    string textBoxValue = "";
    protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
    {
        base.OnNavigatedTo(e);
        //Retrieve the value passed during page navigation
         NavigationContext.QueryString.TryGetValue("text", out textBoxValue)               
    }

     private void button1_Click(object sender, RoutedEventArgs e) {

       MessageBox.Show(textBoxValue);
     } 
```

这里有一些有用的链接..

*   [如何将一个 xaml 页面中的图像值传递给 windows phone 7 中的另一个 xaml 页面？](https://stackoverflow.com/questions/3213354/how-to-pass-the-image-value-in-one-xaml-page-to-another-xaml-page-in-windows-phon)
*   [如何在 Windows Phone 上执行页面导航](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff626521%28v=vs.105%29.aspx)

# python - 从 C API 中的字符串表示创建对象

> ID：15843136
> 
> 赞同：4
> 
> 时间：2013-04-05T20:40:32.213
> 
> 标签：python, c, python-3.x

我正在开发一个嵌入 Python 解释器的系统，我需要`PyObject*`从 C API 构造一个给定的字符串。

我有一个`const char*`表示字典，格式`eval()`正确，可以在 Python 中正常工作，即：`"{'bar': 42, 'baz': 50}"`.

目前，这是作为`PyObject*`使用`Py_Unicode_`api （表示字符串）传递给 Python 的，所以在我的 python 解释器中，我可以成功编写：

```
foo = eval(myObject.value)
print(foo['bar']) # prints 42 
```

我想将其更改为`const char*`在 C 端自动“评估”，并返回一个`PyObject*`表示已完成的字典。如何在 C API 中将此字符串转换为字典？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T20:56:18.847

有两种基本方法可以做到这一点。

第一个是简单地调用`eval`你在 Python 中所做的相同方式。唯一的窍门是你需要一个`builtins`模块句柄，因为你不能在 C API 中免费获得它。有很多方法可以做到这一点，但一种非常简单的方法是直接导入它：

```
/* or PyEval_GetBuiltins() if you know you're at the interpreter's top level */
PyObject *builtins = PyImport_ImportModule("builtins");
PyObject *eval = PyObject_GetAttrString(builtins, "eval");
PyObject *args = Py_BuildValue("(s)", expression_as_c_string);
PyObject *result = PyObject_Call(eval, args); 
```

（这是未经测试的代码，它至少会泄漏引用，并且如果你想在 C 端处理异常，它不会检查 NULL 返回……但它应该足以理解这个想法。）

关于这一点的一件好事是您可以`ast.literal_eval`以完全相同的方式使用`eval`（这意味着您可以获得一些免费验证）；只需更改`"builtins"`为`"ast"`和。但真正的胜利在于，您所做的正是Python 中所做的事情，而您已经知道这正是您想要的。`"eval"``"literal_eval"``eval`

另一种方法是使用编译 API。在真正的高层次上，你可以用它构建一个 Python`"foo = eval(%s)"`语句[`PyRun_SimpleString`](http://docs.python.org/3/c-api/veryhigh.html#PyRun_SimpleString)。在此之下，[`Py_CompileString`](http://docs.python.org/3/c-api/veryhigh.html#Py_CompileString)用于解析和编译表达式（您也可以在单独的步骤中解析和编译，但这在这里没有用），然后[`PyEval_EvalCode`](http://docs.python.org/3/c-api/veryhigh.html#PyEval_EvalCode)在适当的全局变量和局部变量中对其进行评估。（如果您自己不跟踪全局变量，请使用[解释器反射 API](http://docs.python.org/3/c-api/reflection.html) `PyEval_GetLocals`和`PyEval_GetGlobals`.）请注意，我给出了每个函数的超级简化版本；通常你想使用其中一个兄弟函数。但是您可以在文档中轻松找到它们。

# sql - 选择 [组合框值] & “文本”

> ID：15843139
> 
> 赞同：1
> 
> 时间：2013-04-05T20:40:46.810
> 
> 标签：sql, ms-access, select, vba

我正在尝试根据用户在 ComboBox 中选择的值在 Access VBA 中构建 SELECT 语句。

例子 ：

`"SELECT [8_SV_RT] FROM DATA WHERE condition = value`

我需要`8`依赖表单中的 ComboBox 值。(8,10,12 ....)

ComboBox 的名称是`DN`，我创建了字符串`COL = "_SV_RT"`

到目前为止，我有：

`"SELECT [DN] & '" & COL & "' FROM DATA WHERE condition = value`

它将值返回`8_SV_RT`给 ComboBox，我想在 SELECT 语句之后使用它，但不是作为结果。我一定错过了一些语法或什么？有人可以请教吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:44:39.240

如果我理解你的问题是正确的：

```
Dim SQL As String

SQL = "SELECT [" & Me.MyComboBox & "_SV_RT] FROM DATA WHERE condition = value" 
```

* * *

**编辑：**
要使用问题中的确切对象名称*（在 Siddharth 编辑它之前，我过度阅读组合框已命名`DN`）*并考虑 Siddharth 的*（现已删除）*评论：

```
Dim SQL As String
Dim COL As String

COL = "_SV_RT"
SQL = "SELECT [" & DN & COL & "] FROM DATA WHERE condition = value" 
```

# php - 从php中的多维数组中删除最后一个元素

> ID：15843142
> 
> 赞同：0
> 
> 时间：2013-04-05T20:40:51.967
> 
> 标签：php, multidimensional-array

我有一个迭代 5 次并将文本框中的值显示到数组中的文本框。

```
<form method="post" action="test.php">   
 <?php for($i = 0; $i < 5; $i++) { 
     echo "<input type='text' name='text1[]'/>";    
  } ?>
<input type="submit" name="confirm" value="confirm" />
</form>

<?php
  $text1 = $_POST['text1'];
  $count= count($text1);
  if(isset($_POST['confirm'])) { 
    for($p = 0; $p < $count; $p++) {
       echo print_r($p[$i]);
    }
  }
?> 
```

我想从数据中删除最后一个值（即重复数字 1）并只显示名称。上面的输出如下： -

```
John1
Jack1
Peter1
Jane1
Jill1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:44:16.230

```
echo print_r($p[$i]); 
```

`print_r`打印内容`$p[$i]`并返回`1`传递给`echo`（并在所需输出旁边打印）。你不需要`print_r`这里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:46:50.670

`print_r`发送`$p[$i]`到输出缓冲区，然后它返回一个布尔结果，这将是`true`（或`1`当回显时）。

因此，解决方案就是不使用`print_r`.

当您不确定某事时，请务必[阅读文档。](http://php.net/print_r)几乎所有你想知道的关于 PHP 的东西都可以在这里找到。

# c++ - 文件系统和语言环境

> ID：15843144
> 
> 赞同：2
> 
> 时间：2013-04-05T20:40:55.297
> 
> 标签：c++, android-ndk, locale

我正在尝试构建使用带有 NDK (for android) 的 boost 文件系统的代码。

除了文件系统，一切都很好：

```
libs/filesystem/src/path.cpp:911: error: undefined reference to 'std::locale::locale(char const*)'
libs/filesystem/src/path.cpp:911: error: undefined reference to 'std::locale::locale(char const*)'
libs/filesystem/src/path.cpp:911: error: undefined reference to 'std::locale::locale(char const*)'
libs/filesystem/src/path.cpp:911: error: undefined reference to 'std::locale::locale(char const*)' 
```

911 行代码：

```
static std::locale posix_lazy_initialization(path::imbue(std::locale(""))); 
```

任何想法如何解决这一问题？

* * *

当我将 STL 版本从：更改为时`gnustl_static`，`gnustl_shared`问题就消失了。会是什么呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T23:38:15.343

在第 906/907 行，他们有 MACRO

```
#if defined(BOOST_POSIX_API) && \
    !(defined(macintosh) || defined(__APPLE__) || defined(__APPLE_CC__)) 
```

我将其更改为包含 ANDROID 的例外

```
#if defined(BOOST_POSIX_API) && \
    !(defined(macintosh) || defined(__APPLE__) || defined(__APPLE_CC__) || defined(ANDROID)) 
```

到目前为止一切顺利，虽然我的代码不依赖于语言环境......

我已经将这个问题交叉发布到 Android Developers Google Group，所以也许他们会对为什么动态链接有效而不是静态链接有明确的答案。我会发布任何我得到的消息...

# kqueue - 使用 kqueue 响应多个事件类型

> ID：15843147
> 
> 赞同：6
> 
> 时间：2013-04-05T20:41:05.517
> 
> 标签：kqueue

当使用`kqueue`与该事件类型相关的 ID 注册事件时；例如，文件描述符用于标识要监视的文件

```
int kq;
struct kevent ke;

kq = kqueue();
fd = open(argv[1], O_RDONLY);
EV_SET(&ke, fd, EVFILT_VNODE, EV_ADD, NOTE_DELETE | NOTE_RENAME, 0, NULL);
kevent(kq, &ke, 1, NULL, 0, NULL);

while (1) {
    kevent(kq, NULL, 0, &ke, 1, NULL);
    /* respond to file system event */
} 
```

`ident`现在，如果我还需要响应其他事件类型这样的信号，我们需要一个新的kqueue 实例，以避免与`kevent()`.

```
kq_sig = kqueue();
struct kevent ke_sig;

/* set the handler and ignore SIGINT */
signal(SIGINT, SIG_IGN);
EV_SET(&ke_sig, SIGINT, EVFILT_SIGNAL, EV_ADD, 0, 0, NULL);
kevent(kq_sig, &ke_sig, 1, NULL, 0, NULL);
while (1) {
    kevent(kq_sig, NULL, 0, &ke_sig, 1, NULL);
    /* respond signals */
} 
```

观察一种以上的事件类型似乎需要多个线程来作用于共享状态（例如，接收信号可能会关闭文件描述符）。

是否有更通用的机制来使用 kqueue 从一个线程向另一个线程发送消息？在某些情况下，我可以设想启用和禁用过滤器作为边缘触发另一个 kevent 的一种方式。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-28T11:09:01.083

kevent 结构实际上提供了有关发生的事件的信息：

```
struct kevent {
         uintptr_t       ident;          /* identifier for this event */
         int16_t         filter;         /* filter for event */
         uint16_t        flags;          /* general flags */
         uint32_t        fflags;         /* filter-specific flags */
         intptr_t        data;           /* filter-specific data */
         void            *udata;         /* opaque user data identifier */
 }; 
```

您必须对以下内容感兴趣：

*   `ident`在您的情况下返回`fd`or `SIGINT`;
*   `filter`那（仍然是你的情况）返回`EVFILT_VNODE`或`EVFILT_SIGNAL`；
*   `fflag`中的那个`EVFILT_VNODE`会告诉你文件描述符事件是`NOTE_DELETE`还是`NOTE_RENAME`.

您可以将两个 kevent 结构注册到单个队列，然后使用这些结构成员来确定事件是否与文件描述符或信号相关。

这是一个完整的示例，演示了如何执行此操作：

```
#include <stdlib.h>
#include <stdio.h>
#include <fcntl.h>
#include <string.h>
#include <sys/types.h>
#include <sys/event.h>
#include <sys/time.h>

int
main(int argc, char** argv)
{
    /* A single kqueue */
    int kq = kqueue();
    /* Two kevent structs */
    struct kevent *ke = malloc(sizeof(struct kevent) * 2);

    /* Initialise one struct for the file descriptor, and one for SIGINT */
    int fd = open(argv[1], O_RDONLY);
    EV_SET(ke, fd, EVFILT_VNODE, EV_ADD | EV_CLEAR, NOTE_DELETE | NOTE_RENAME, 0, NULL);
    signal(SIGINT, SIG_IGN);
    EV_SET(ke + 1, SIGINT, EVFILT_SIGNAL, EV_ADD, 0, 0, NULL);

    /* Register for the events */
    if(kevent(kq, ke, 2, NULL, 0, NULL) < 0)
        perror("kevent");

    while(1) {
        memset(ke, 0x00, sizeof(struct kevent));
        if(kevent(kq, NULL, 0, ke, 1, NULL) < 0)
            perror("kevent");

        switch(ke->filter)
        {
            /* File descriptor event: let's examine what happened to the file */
            case EVFILT_VNODE:
                printf("Events %d on file descriptor %d\n", ke->fflags, (int) ke->ident);

                if(ke->fflags & NOTE_DELETE)
                    printf("The unlink() system call was called on the file referenced by the descriptor.\n");
                if(ke->fflags & NOTE_WRITE)
                    printf("A write occurred on the file referenced by the descriptor.\n");
                if(ke->fflags & NOTE_EXTEND)
                    printf("The file referenced by the descriptor was extended.\n");
                if(ke->fflags & NOTE_ATTRIB)
                    printf("The file referenced by the descriptor had its attributes changed.\n");
                if(ke->fflags & NOTE_LINK)
                    printf("The link count on the file changed.\n");
                if(ke->fflags & NOTE_RENAME)
                    printf("The file referenced by the descriptor was renamed.\n");
                if(ke->fflags & NOTE_REVOKE)
                    printf("Access to the file was revoked via revoke(2) or the underlying fileystem was unmounted.");
                break;

            /* Signal event */
            case EVFILT_SIGNAL:
                printf("Received %s\n", strsignal(ke->ident));
                exit(42);
                break;

            /* This should never happen */
            default:
                printf("Unknown filter\n");
        }
    }
} 
```

请注意，这里我们使用单线程，这样效率更高，并且不需要在用户空间中进一步同步。

# c# - 从c#检查sql中是否存在登录名

> ID：15843148
> 
> 赞同：0
> 
> 时间：2013-04-05T20:41:06.890
> 
> 标签：c#, sql

在一个类中，我正在创建登录到 sql 的工作正常。我想添加一些错误检查来首先检查登录是否已经存在于 SQL 中。如果确实如此，则不要尝试添加登录名，而是映射到表等。

在 sql 中，我使用以下命令检查登录：

```
select name from sys.server_principals where name = 'viewer2' 
```

我厌倦了在我的课堂上使用它如下

```
protected static bool CheckForExistingUser(DbContext context, string userName)
        {
            string checkForUser =
                @" SET NOCOUNT ON
                    DECLARE @userName AS nvarchar(max) = {0}
                    EXEC('
                    SELECT name FROM sys.server_principals where name = ['+ @userName +']
                    ')";
            return Convert.ToBoolean(context.Database.ExecuteSqlCommand(checkForUser, userName));
        } 
```

但是，当我调用此方法时，我得到一个异常，即该列（传入的任何用户名）无效

```
$exception  {"Invalid column name 'viewer2'."}  System.Exception {System.Data.SqlClient.SqlException} 
```

关于导致这种情况的任何想法，是否有更好的方法来检查代码中的 sql db 中是否存在登录？

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T20:45:14.953

你应该使用`'`而不是`[]`围绕你的价值。否则，SQL Server 将其视为列名。

```
string checkForUser =
    @" SET NOCOUNT ON
        DECLARE @userName AS nvarchar(max) = {0}
        EXEC('
        SELECT name FROM sys.server_principals where name = ''' + @userName +'''
        ')"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T21:32:37.673

试一试：

```
protected static bool CheckForExistingUser(DbContext context, string userName)
        {
            return Convert.ToBoolean(context.Database.ExecuteSqlCommand("SELECT name FROM sys.server_principals where name = {0}", userName));
        } 
```

count 将返回 0 或 1，具体取决于用户名是否存在满足 bool 转换...还删除了代码中的所有修剪。如果它不起作用，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T21:34:38.380

正如@MarcinJuraszek 所回答的那样，您的字符串参数周围不能有'['。如果作为参数发送，它们必须有单引号或自动引用。

由于看起来您正在使用实体框架，我认为您可以通过执行更简单的查询来使其更具可读性。在 .NET Framework 4.0 及更高版本中，您可以执行以下操作：

```
string checkForUser = "SELECT count(1) FROM sys.server_principals where name = {0}";
return context.ExecuteStoreQuery<int>(checkForUser, userName).First() > 0; 
```

# java - 会话范围和 jsf 重定向

> ID：15843152
> 
> 赞同：2
> 
> 时间：2013-04-05T20:41:17.560
> 
> 标签：java, jsf, paypal, seam, cdi

在重定向到外部 url 期间是否可以保持对话？我开始使用 CDI 对话 bean 进行贝宝交易，接下来当我登录并进行付款时，面孔重定向到贝宝页面，下一个贝宝返回我的页面，我希望使用我的支持 bean 的相同实例来记住我发送到的详细信息贝宝。

当贝宝重定向回我的页面时，他会附加到 url 交易令牌和付款人 ID，但我没有关于用户购买的产品数量的任何信息。所以我想记住重定向之前的数量。现在，在贝宝返回我的网站后，我调用方法 doExpressCheckout 并且我想传递数量和其他交易详细信息，因为我可以设置与交易前完全不同的详细信息，并且当客户在贝宝页面上接受购买某些产品时可能会出现奇怪的情况10 美元，但我在贝宝再次重定向到我的页面后设置了 100 美元，客户将不知道他支付了多少。我不知道为什么会这样。

我使用 SOAP api。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T22:15:23.367

是的，您可以从外部重定向恢复对话。只需`cid=nnn`在您传递给 PayPal 的返回 URL 中包含 。例如：

```
returnUrl = "http://myip/myapp/return.seam?cid=" + Conversation.instance().getId();
details.setReturnURL(returnUrl);
... 
```

由于会话超时的 2 分钟默认值相当有限，您最终会希望在调用 PayPal 之前增加会话超时：

```
Conversation.instance().setTimeout(900000); // 15 minutes 
```

但是，这样做不一定是一个好主意，因为它可能会长时间保留数据，并且您还需要保留会话 cookie 才能使该方案正常工作（因此，如果需要，您还必须增加会话超时）。

更好的策略是永久保存交易数据（数据库或磁盘），将随机生成的 ID 与数据相关联，并在从 PayPal 返回时检索它。这样您就不需要将对话保存在内存中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T21:52:35.053

> 当贝宝重定向回我的页面时，他会附加到 url 交易令牌和付款人 ID，但我没有关于用户购买的产品数量的任何信息。

您可以将预对话 id 附加到您传递给 Paypal 作为返回 url 的 url。这样，对话 id 将与上述参数一起传回，并且`seam`将知道使用所有数据恢复预付款对话。

# windows - 32 位软件构建通常是 64 位优化的吗？

> ID：15843159
> 
> 赞同：-2
> 
> 时间：2013-04-05T20:41:47.423
> 
> 标签：windows, 64-bit, 32bit-64bit

编辑：刚刚发现（感谢 Ben Voigt 迅速指出）这个提议甚至是不可能的。对于后代来说，这是一个基本问题，而不是我之前对 AMD 扩展的误解：

我一直想知道 32 位构建（尤其是 Windows）软件是否常见检测 64 位处理器的存在并利用 64 位操作数和更大的寄存器文件（如果存在）。这是假设 32 位进程实际上可以使用 64 位指令，其方式与 i386 上的 16 位进程在物理上存在这样的 CPU 时可以使用 32 位指令的方式大致相同，通过编码覆盖前缀。但是，正如下面的答案所指出的那样，这是不可能的。

为什么要使用 64 位指令而不使用 32 位寻址？

好吧，假设您知道您正在处理的数据集足够小以适合该地址空间。例如，您使用了 64 位版本的程序，而对于您使用它的目的，性能监控会告诉您该进程正在使用 2GB 或更少。（实际上，根据[this](http://msdn.microsoft.com/en-ca/library/windows/desktop/aa366778%28v=vs.85%29.aspx#memory_limits)，设置了 IMAGE_FILE_LARGE_ADDRESS_AWARE 标志的 32 位进程将在 64 位 Windows 中获得 4GB 用户空间。）

有些人会认为这无关紧要，但实际上，它可能。在 64 位版本中，如果我没记错的话，*程序存储的每个指针都会消耗两倍的物理 RAM！* 如果程序使用大量指针（例如，由于链表或哈希表），这可能会累加并降低缓存效率等。

不幸的是，正如下面 Ben Voigt 的回答所指出的，在 Windows 中根本不可能，而在 Linux 中已经完成了专门用于此目的的模式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T20:47:08.593

> 事实上，严格来说，一个程序是 32 位还是 64 位图像只决定了它的寻址模式，而不是它使用的 CPU 特性，包括数据字大小（除非 API/库调用期望给定大小。）

不，这是不正确的。在 Windows 中，32 位与 64 位是两种受支持的英特尔架构和指令集的同义词。（是的，还支持其他架构——Alpha、Itanium、ARM——但这些总是明确说明的。）

像您描述的二进制文件将是“x86_64 架构，微型内存模型”（通常简称`x32`为），其中微型内存模型意味着指针小于系统字长，并且数据和代码共享相同的地址空间。 [人们已经制作了这样的 Linux 系统](http://en.wikipedia.org/wiki/X32_ABI)。

它与“32 位”x86 代码完全不兼容。x86 指令甚至没有额外寄存器的编码。CPU 的模式位必须设置不同以支持 x86_64 指令。它与 16 位内存模型时代存在的“基于寻址”和相对指针的概念非常相似。

x32 代码使用 x86_64 指令，并使用处理 32 位数据的指令来访问和执行指针计算。这是通过将虚拟地址限制在范围 (-2GB:+2GB) 的虚拟内存逻辑实现的，因此与将 32 位变量加载到 64 位寄存器相关联的正常符号扩展会创建有效的 64 位指针。

当 CPU 处于“长模式”以支持指令访问额外寄存器时，它无法正确解码 x86 指令。例如，0100 0000 在 x86 中是 ADD 指令，但在 x86_64 中是 MOV。

总之，在分配器的帮助下，64 位代码可以使用 32 位指针。不能将附加寄存器的使用混合到 32 位代码中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T20:54:09.727

为了使用 x64 功能，您需要在 64 位模式下运行。您不能在 32 位进程中使用 64 位寄存器。32 位进程仅限于 32 位 x86 操作码。您不能使用 32 位进程中的任何 x64 功能。

# jsf - primefaces 折线图不可见

> ID：15843160
> 
> 赞同：0
> 
> 时间：2013-04-05T20:41:48.700
> 
> 标签：jsf, jsf-2, primefaces

这是我的 .xhtml

```
<div id="detailed_div_graph" align="center">
            <p:lineChart id="linear" value="#{ChartBean.linearModel}" legendPosition="e" 
                title="Medical Data" minY="0" maxY="10" style="height:300px"/>
        </div> 
```

这是我的`ChartBean`代码：

```
public class ChartBean implements Serializable {

private CartesianChartModel linearModel;

public ChartBean() {  
    createLinearModel();  
}

public CartesianChartModel getLinearModel() {  
    return linearModel;  
} 

private void createLinearModel() {  
    linearModel = new CartesianChartModel();  

    LineChartSeries series1 = new LineChartSeries();  
    series1.setLabel("BP");  

    series1.set(1, 2);  
    series1.set(2, 1);  
    series1.set(3, 3);  
    series1.set(4, 6);  
    series1.set(5, 8);  

    linearModel.addSeries(series1);  
}  

} 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T21:25:45.590

在这里，您假设将调用此构造函数。

```
public ChartBean() {  
    createLinearModel();  
} 
```

Jsf 有阶段，你应该考虑它们。

如果您希望在 bean 首次初始化后首先调用 createLinearModel() 方法，则应使用 @PostConstruct 注释对其进行注释

```
@PostConstruct 
private void createLinearModel(){
    ...
} 
```

# java - 地图不保存放入其中的值

> ID：15843162
> 
> 赞同：0
> 
> 时间：2013-04-05T20:41:54.127
> 
> 标签：java, image, map, treemap, storing-data

我正在创建一个游戏并将我的图像存储在`Map`其中也有一个`TreeMap`里面。我正在尝试使用我的`getImage`方法来检查地图并查看是否存储了图像的特定密钥。如果是，则提前加载图像，如果不从资源包中加载图像并将密钥存储到 Map 中，以便下次`getImage`调用该方法时，它将提前加载该图像，因为密钥已经在 Map 中。

问题是 Map 在放入后不会保存密钥。我专门调用了同一个图像，以便我应该收到一个控制台输出，`Image Loaded.`说明它何时将图像键引用到 Map。这是我设置的测试的控制台输出的类，以显示它没有保存。

```
 package game;

    import java.awt.Image;
    import java.io.IOException;
    import java.io.InputStream;
    import java.util.Map;
    import java.util.Scanner;
    import java.util.TreeMap;
    import javax.imageio.ImageIO;

    public class ImageLoader {

        public Image loadedImage;
        private Map<String, Image> images;

        public ImageLoader(){
            TreeMap<String, Image> map  = new TreeMap<String, Image>();
            images = map;

        }

        public Image getImage(String s){
            System.out.println(images);
            try
            {

                if(images.containsKey(s)){
                    System.out.println("Loaded image.");
                    return images.get(s);
                }
                else
                {
                    System.out.println("Not loaded.");
                    ClassLoader myLoader = this.getClass().getClassLoader();
                    InputStream imageStream = myLoader.getResourceAsStream(s);
                    loadedImage = ImageIO.read(imageStream);
                    images.put(s, loadedImage);
                    System.out.println(images);
                    return images.get(s);
                }
            }
            catch (IOException e)
            {
                System.out.println ("Could not load: " + e);
            }
            return null;
        }

    } 
```

这是运行时的控制台输出：

```
 {}
    Not loaded.
    {resources/Asteroid.jpg=BufferedImage@1632847: type = 5 ColorModel: #pixelBits = 24         numComponents = 3 color space = java.awt.color.ICC_ColorSpace@e95a56 transparency = 1 has alpha = false isAlphaPre = false ByteInterleavedRaster: width = 600 height = 600 #numDataElements 3 dataOff[0] = 2}
    {}
    Not loaded.
    {resources/Asteroid.jpg=BufferedImage@1fc6e42: type = 5 ColorModel: #pixelBits = 24         numComponents = 3 color space = java.awt.color.ICC_ColorSpace@e95a56 transparency = 1 has alpha = false isAlphaPre = false ByteInterleavedRaster: width = 600 height = 600 #numDataElements 3 dataOff[0] = 2}
    {}
    Not loaded.
    {resources/Asteroid.jpg=BufferedImage@8ee016: type = 5 ColorModel: #pixelBits = 24         numComponents = 3 color space = java.awt.color.ICC_ColorSpace@e95a56 transparency = 1 has alpha = false isAlphaPre = false ByteInterleavedRaster: width = 600 height = 600 #numDataElements 3 dataOff[0] = 2}
    {}
    Not loaded.
    {resources/Alien-Ship.png=BufferedImage@1fe1feb: type = 6 ColorModel: #pixelBits = 32         numComponents = 4 color space = java.awt.color.ICC_ColorSpace@e95a56 transparency = 3 has alpha = true isAlphaPre = false ByteInterleavedRaster: width = 45 height = 45 #numDataElements 4 dataOff[0] = 3} 
```

有没有办法让它保存值并正确引用地图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T21:12:22.780

我怀疑你`ImageLoader`每次都会得到一个新的。

# java - Java 类测试错误

> ID：15843168
> 
> 赞同：0
> 
> 时间：2013-04-05T20:42:04.397
> 
> 标签：java, class

我写了一个类，现在我正在尝试对其进行测试，但在我的类测试中出现错误，上面写着“CylinderTest.java:9: getHeight() in Cylinder cannot be applied to (double)”

这是我的课程的代码：

```
public class Cylinder
private double Radius;
private double Height;
public final static double Pi = 3.14159;
// constructor
public Cylinder()
{
    Radius = 0.0;{

    Height = 0.0;
}
// getRaduis method
public double getRadius()
{       
    return Radius;
}
// getHeight method
public double getHeight()
{

    return Height;
}
// setRadius method 
public void setRadius(double r)
{
    Radius = r;
}
// setHeight method
public void setHeight(double h)
{
    Height = h;
}
// getSurfaceArea
public double getBaseArea(double BaseArea)
{
    BaseArea = Radius * Radius * Pi;
    return BaseArea;
}
// getVolume
public double getVolume(double BaseArea, double Volume)
{
    Volume = BaseArea * Height;
    return Volume;
}
// Print
//System.out.println("The volume of the cylinder is " +Volume); 
```

}

这是classTest的代码：

```
public class CylinderTest {
    public static void main(String[] args)
    {
        Cylinder cylinderA = new Cylinder();
        cylinderA.getRadius(3.5);
        cylinderA.getHeight(4.5);
        System.out.println(cylinderA.getVolume());
    }
} 
```

我编写的原始圆柱体类编译良好当我尝试编译 classTest 时遇到问题。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:45:07.273

当您看起来应该调用您的 setter 方法时，您正在调用您的 getter 方法：

```
cylinderA.setHeight(4.5); 
//        ^ 
```

如果你真的打算调用你的 getter 方法，那么这样调用它：

```
double height = cylinderA.getHeight(); 
```

因为`getHeight`没有任何参数。

# java - 循环用户输入直到条件满足

> ID：15843169
> 
> 赞同：4
> 
> 时间：2013-04-05T20:42:06.613
> 
> 标签：java

我需要让用户输入一个数字作为范围的开始，然后输入另一个数字作为范围的结束。起始数字必须为 0 或更大，结束数字不能大于 1000。两个数字都必须能被 10 整除。我找到了满足这些条件的方法，但是如果不满足这些条件，我的程序只会告诉用户他们的输入不正确。我是否可以对其进行编码，以便在用户输入后它会检查以确保满足条件，如果它们没有回送并再次输入。这是我到目前为止的代码。

```
 Scanner keyboard = new Scanner(System.in);
    int startr;
    int endr;
    System.out.println("Enter the Starting Number of the Range: ");
    startr=keyboard.nextInt();
    if(startr%10==0&&startr>=0){
        System.out.println("Enter the Ending Number of the Range: ");
        endr=keyboard.nextInt();
        if(endr%10==0&&endr<=1000){

        }else{
            System.out.println("Numbers is not divisible by 10");
        }
    }else{
        System.out.println("Numbers is not divisible by 10");
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T20:45:53.973

轻松使用do-while：

```
Scanner keyboard = new Scanner(System.in);
int startr, endr;
boolean good = false;
do
{
  System.out.println("Enter the Starting Number of the Range: ");
  startr = keyboard.nextInt();
  if(startr % 10 == 0 && startr >= 0)
    good = true;
  else
    System.out.println("Numbers is not divisible by 10");
}
while (!good);

good = false;
do
{
    System.out.println("Enter the Ending Number of the Range: ");
    endr = keyboard.nextInt();
    if(endr % 10 == 0 && endr <= 1000)
      good = true;
    else
      System.out.println("Numbers is not divisible by 10");
}
while (!good);

// do stuff 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T20:48:06.553

您需要使用一段时间，例如：

```
while conditionsMet is false
    // gather input and verify
    if user input valid then
        conditionsMet = true;
end loop 
```

应该这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-29T00:05:56.833

通用程序是：

1.  在无限循环中读取输入。
2.  [`break;`](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/branch.html)满足条件时使用语句退出循环。

例子：

```
Scanner keyboard = new Scanner(System.in);
int startr, endr;

for (;;) {
    System.out.println("Enter the starting number of the range: ");
    startr = keyboard.nextInt();
    if (startr >= 0 && startr % 10 == 0) break;
    System.out.println("Number must be >= 0 and divisible by 10.");
}

for (;;) {
    System.out.println("Enter the ending number of the range: ");
    endr = keyboard.nextInt();
    if (endr <= 1000 && endr % 10 == 0) break;
    System.out.println("Number must be <= 1000 and divisible by 10.");
} 
```

如果在无效输入后您只想显示错误消息而不重复初始提示消息，请将初始提示消息移动到循环上方/外部。

如果您不需要单独的错误消息，您可以重新安排代码以使用 do-while 循环来检查条件，这会更短一些：

```
Scanner keyboard = new Scanner(System.in);
int startr, endr;

do {
    System.out.println("Enter the starting number of the range.");
    System.out.println("Number must be >= 0 and divisible by 10: ");
    startr = keyboard.nextInt();
} while (!(startr >= 0 && startr % 10 == 0));

do {
    System.out.println("Enter the ending number of the range.");
    System.out.println("Number must be <= 1000 and divisible by 10: ");
    endr = keyboard.nextInt();
} while (!(endr <= 1000 && endr % 10 == 0)); 
```

# c++ - 没有动态分配的哈希表/映射实现

> ID：15843177
> 
> 赞同：12
> 
> 时间：2013-04-05T20:42:35.553
> 
> 标签：c++, c, embedded, hashmap, hashtable

有谁知道**不**动态分配内存的 C/C++ 哈希表/映射实现？我正在开发一个没有标准库和堆的嵌入式系统（除非我想编写/移植一个）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T20:59:30.560

您正在寻找的术语是“开放寻址”或“封闭散列”。请参阅[http://en.wikibooks.org/wiki/Data_Structures/Hash_Tables#Open_addressing](http://en.wikibooks.org/wiki/Data_Structures/Hash_Tables#Open_addressing) 和[http://en.wikipedia.org/wiki/Open_addressing](http://en.wikipedia.org/wiki/Open_addressing)

不过不知道具体的实现。对不起。

# wpf - 将自定义/现有 FrameworkElements 添加到 ItemsControl

> ID：15843178
> 
> 赞同：0
> 
> 时间：2013-04-05T20:42:41.177
> 
> 标签：wpf, datatemplate, itemscontrol, frameworkelement

当我将覆盖`FrameworkElement`的或现有的 UI 控件添加到 时`ItemsControl`，我收到以下绑定错误。

`System.Windows.Data Error: 25 : ItemTemplate and ItemTemplateSelector are not valid for item.; Type='Button' System.Windows.Data Error: 25 : ItemTemplate and ItemTemplateSelector are not valid for item.; Type='FrameworkElement'`

我应该如何处理混合`UIElement`/非`UIElement`类型`ItemsControl`？

```
namespace WpfApplication27
{
    class Data
    {
        public string Type { get; set; }
    };

    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            m_itemsControl.Items.Add(new Data() { Type = "A" });
            m_itemsControl.Items.Add(new Data() { Type = "B" });
            m_itemsControl.Items.Add(new Data() { Type = "A" });
            m_itemsControl.Items.Add(new Button());
            m_itemsControl.Items.Add(new FrameworkElement());
        }
    }

    public class CustomDataTemplateSelector : DataTemplateSelector
    {
        public override DataTemplate SelectTemplate(object _item, DependencyObject _container)
        {
            var container = _container as FrameworkElement;
            var data = _item as Data;

            if (data.Type == "A")
            {
                return container.FindResource("ADataTemplate") as DataTemplate;
            }
            else if (data.Type == "B")
            {
                return container.FindResource("BDataTemplate") as DataTemplate;
            }

            return null;
        }
    }
}

<Window x:Class="WpfApplication27.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:WpfApplication27">

<Window.Resources>
    <DataTemplate x:Key="ADataTemplate">
        <Ellipse Width="5" Height="5" Fill="Red"/>
    </DataTemplate>

    <DataTemplate x:Key="BDataTemplate">
        <Rectangle Width="5" Height="5" Fill="Blue"/>
    </DataTemplate>

</Window.Resources>

    <ItemsControl Name="m_itemsControl">
        <ItemsControl.ItemTemplateSelector>
            <local:CustomDataTemplateSelector/>
        </ItemsControl.ItemTemplateSelector>

        <ItemsControl.Template>
            <ControlTemplate>
                <Canvas IsItemsHost="True"/>
            </ControlTemplate>
        </ItemsControl.Template>
    </ItemsControl>
</Window> 
```

# kendo-ui - Kendo Grid - 在 Firefox 中触发保存事件中的警报会导致页面重新加载

> ID：15843179
> 
> 赞同：0
> 
> 时间：2013-04-05T20:42:41.770
> 
> 标签：kendo-ui, kendo-grid

我想知道是否有人看过这个。我有一个剑道网格，在保存事件中，我想做一些验证。基本上要确保新值与旧值的差异小于或等于余额。

因此，如果它大于余额，我会触发警报并防止默认值。但是，显示警报会导致页面在 FireFox 中重新加载。

这是我的网格：

```
$("#gridOpenInvoices").kendoGrid({
        autoBind: false,
        dataSource: openInvoicesData,
        scrollable: true,
        sortable: false,
        navigatable: true,
        toolbar: [{name:"save",
                   text:strings.ApplyUpdates},
                  {name: "SplitPayment",
                   text: strings.SplitPayment},
                  {name: "PaidOut",
                   text: strings.PaidOut},
                  {name: "CreateCredit",
                   text: strings.CreditBalance},
                  {name: "UndoAllocation",
                   text: strings.UndoAllocation}],
        columns: [
            {
                field: "CustomerName",
                title: strings.AccountName,
                hidden: true
            },
            {
              field: "OpenTransactionId",
              title: strings.OpenTransaction,
              width:90
            },
            {
              field: "InvoiceNumber"  ,
              title: strings.InvoiceNumber,
              width:65
            },
            {
                field: "GrossSales",
                title: strings.OriginalAmount,
                width: 75,
                format: "{0:c}",
                decimals: 2,
                min: 1,
                value: 0

            },
            {
                field: "Balance",
                title: strings.TransBalance,
                width: 75,
                format: "{0:c}",
                decimals: 2,
                min: 1,
                value: 0

            },
            {
                field: "Date",
                title: strings.Date,
                width:75,
                format: "{0:MM/dd/yy}"

            },
            {
                field: "Age",
                title: strings.Age,
                width:55

            },
            {
                field: "CheckNumber",
                title: strings.CheckNumber,
                width:85
            },
            {
                title: strings.ApplyPayment,
                width:75,
                template: "<input class='k-chk-applied chkbox' type='checkbox' data-bind='source: IsApplied' name='IsApplied' #= IsApplied ? 'checked' : ''#/>",
                attributes:{"class":"tdIsApplied"}
            },
            {
                field:"AppliedAmount",
                title: strings.AppliedAmount,
                format: "{0:c}",
                width: 95,
                attributes: {"class" : "tdAppliedAmount"}
            }],
save: function(e) {
    var model = e.model;
    if (e.values.AppliedAmount != null) {
        var remainingBalance = context.getRemainingBalance();
        var difference = e.values.AppliedAmount - model.AppliedAmount;
        if (remainingBalance >= difference) {
            var balanceCopy = model.BalanceCopy;
            model.Balance = model.GrossSales - e.values.AppliedAmount;
            model.BalanceCopy = model.GrossSales - e.values.AppliedAmount;

            if (model.Balance == 0 && model.IsUncollected) {
                model.IsUncollected = false;
                context.UpdateBalance(balanceCopy, 0, true);
            }
            context.UpdateBalance(model.AppliedAmount, e.values.AppliedAmount, true);
            this.refresh();
            context.showButtons();
        } 
        else {
            alert("The applied amount exceeds the remaining balance");
            e.preventDefault();
        }
    }
}, editable:"incell"}); 
```

这似乎仅在您编辑应用金额并按 Enter 提交时才会发生。知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:21:09.193

解决方案相当简单：不要使用警报。

在 kendoUI Widgets 的某些事件中，我确实遇到了同样的问题。如果您需要向用户显示某些内容，请使用 kendoWindow 并将其 modal 属性设置为 true。

警报只能用于调试目的，例如 console.log。

# excel - 报告连接到值的行和列名称 (Microsoft Access)

> ID：15843181
> 
> 赞同：2
> 
> 时间：2013-04-05T20:42:46.647
> 
> 标签：excel, ms-access

由于我不怎么使用数据库，所以我对此一无所知。我希望通过在其他网站上帮助人们使用 InDesign 和 Photoshop 来支付它就足够了！

我可以使用 Access 或 Excel 进行以下操作。

我的数据看起来像：

```
年 会长 副会长
1980 年里根老布什
1984 年里根老布什
1988 年老布什奎尔
1992 年克林顿·戈尔
1996 年克林顿·戈尔
2000 年小布什切尼
2004 小布什切尼
2008年奥巴马拜登
2012年奥巴马拜登

```

我想要一份看起来像这样的报告：

```
拜登：副总统 2008、2012
小布什：2000 年、2004 年总统
老布什：1988 年总统；副 1980, 1984
切尼：副 2000, 2004
克林顿：1992年总统，1996年
戈尔：副1992、1996
奥巴马：2008 年、2012 年总统
奎尔：副 1988
里根：1980 年、1984 年总统

```

我无法弄清楚如何识别可能出现在表格上任何位置的通用名称，以及如何获取报告的行和列标签。

这是真实数据的简化版本，与政客无关。实际上有十个相关的列标签，而不仅仅是两个。“老布什” 给出了一个人担任两个不同职位的例子。

目前没有任何情况下相同的名称出现在同一行的两个不同列中，但我不希望排除这种可能性，除非允许这样做要复杂得多。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T21:29:46.887

我们需要做的第一件事是通过 UNION 查询将数据从“少行多列”转换为“少列多行”。（我将您的测试数据保存在一个名为 [N_column_table] 的表中。）

```
SELECT [year], "President" AS office, [President] AS person
FROM [N_column_table]
UNION ALL
SELECT [year], "Vice" AS office, [Vice] AS person
FROM [N_column_table] 
```

如果将该查询保存为“3_column_data”，那么您可以像在其他查询、报告等中使用表一样使用它。（`UNION ALL`当您为真实数据构建查询时，您将不得不添加大约 8 个构造。）

所以现在我们的数据看起来像这样

```
year    office      person
1980    President   Reagan
1984    President   Reagan
1988    President   Bush Sr.
1992    President   Clinton
1996    President   Clinton
2000    President   Bush Jr.
2004    President   Bush Jr.
2008    President   Obama
2012    President   Obama
1980    Vice        Bush Sr.
1984    Vice        Bush Sr.
1988    Vice        Quayle
1992    Vice        Gore
1996    Vice        Gore
2000    Vice        Cheney
2004    Vice        Cheney
2008    Vice        Biden
2012    Vice        Biden 
```

现在，至于将办公室和年份“粘合在一起”，我们需要为此使用一点 VBA 函数。在 Access 中创建一个模块，并粘贴以下代码

```
Public Function ListTerms(person As String) As String
Dim cdb As DAO.Database
Dim rstOffice As DAO.Recordset, rstYear As DAO.Recordset
Dim result As String, yearString As String

Const YearSeparator = ", "
Const OfficeSeparator = "; "

Set cdb = CurrentDb
result = ""

Set rstOffice = cdb.OpenRecordset( _
        "SELECT DISTINCT office " & _
        "FROM 3_column_data " & _
        "WHERE person=""" & Replace(person, """", """""", 1, -1, vbBinaryCompare) & """ " & _
        "ORDER BY 1")
Do While Not rstOffice.EOF
    yearString = ""
    Set rstYear = cdb.OpenRecordset( _
            "SELECT DISTINCT [year] " & _
            "FROM 3_column_data " & _
            "WHERE person=""" & Replace(person, """", """""", 1, -1, vbBinaryCompare) & """ " & _
                "AND office=""" & Replace(rstOffice!Office, """", """""", 1, -1, vbBinaryCompare) & """ " & _
            "ORDER BY 1")
    Do While Not rstYear.EOF
        If Len(yearString) > 0 Then
            yearString = yearString & YearSeparator
        End If
        yearString = yearString & rstYear!Year
        rstYear.MoveNext
    Loop
    rstYear.Close
    Set rstYear = Nothing
    If Len(result) > 0 Then
        result = result & OfficeSeparator
    End If
    result = result & rstOffice!Office & " " & yearString
    rstOffice.MoveNext
Loop
rstOffice.Close
Set rstOffice = Nothing
Set cdb = Nothing
ListTerms = result
End Function 
```

现在我们可以在查询中使用该函数来列出每个人及其在办公室的任期

```
SELECT personlist.[person], ListTerms(personlist.[Person]) as terms
FROM (SELECT DISTINCT person FROM 3_column_data) personlist 
```

返回

```
person      terms
Biden       Vice 2008, 2012
Bush Jr.    President 2000, 2004
Bush Sr.    President 1988; Vice 1980, 1984
Cheney      Vice 2000, 2004
Clinton     President 1992, 1996
Gore        Vice 1992, 1996
Obama       President 2008, 2012
Quayle      Vice 1988
Reagan      President 1980, 1984 
```

# lua - 在 lua 中指定函数参数名称

> ID：15843186
> 
> 赞同：2
> 
> 时间：2013-04-05T20:42:59.270
> 
> 标签：lua

我从字符串（使用 C api）加载函数的主体，但默认情况下，传递给函数的所有参数都使用`...`. 指定参数列表的最佳方法是什么？在解析字符串之前，我只能想到在字符串前面加上如下一行（假设参数应该是 self，x，y）：

```
local self, x, y = ... 
```

但是，我不确定它是否是最好的方法，或者它是否有任何意外的副作用。

更新：在其中一个函数中，我需要一个表单的参数列表`self, type, ...`。以下是行不通的，对吧？

```
local self, type, ... = ... 
```

我应该改用这个吗？

```
text = "return function(self, type, ...)" + text + " end";
luaL_loadbufferx(L, text, text.length(), filename, "t");
lua_call(L, 0, 1); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T21:00:21.683

预先添加该行是创建命名参数的好方法。如果您使用本地声明，则不会有任何副作用（其余代码中的副作用除外）。

# android - 如何更改 Android XML 中的列宽？

> ID：15843190
> 
> 赞同：0
> 
> 时间：2013-04-05T20:43:07.227
> 
> 标签：android, xml, android-ui

我已经对此进行了搜索，但找不到适合我的答案。我目前在我的第 5 个选项卡上有 2 列。我想让第一列的宽度为 40%，第二列的宽度为 60%。

我尝试使用 android:layout_weight 并将第 1 列中的 1 个对象设置为 0.4，将第 1 列中的另一个对象设置为 0.6，但无济于事。有任何想法吗？

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <TabHost
        android:id="@+id/tabhost"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical" >

            <TabWidget
                android:id="@android:id/tabs"
                android:layout_width="match_parent"
                android:layout_height="wrap_content" >
            </TabWidget>

            <FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_width="match_parent"
                android:layout_height="match_parent" >

                <LinearLayout
                    android:id="@+id/tab1"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" >

                    <Button android:text="Start"
                            android:id="@+id/btn_StartWatch"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"/>

                    <Button android:text="Stop"
                            android:id="@+id/btn_StopWatch"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"/>

                    <TextView android:text="TextView"
                              android:id="@+id/tv_ShowResults"
                              android:layout_width="wrap_content"
                              android:layout_height="wrap_content"/>
                </LinearLayout>

                <LinearLayout
                    android:id="@+id/tab2"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" >

                    <TextView android:text="TextView2"
                              android:id="@+id/textView2"
                              android:layout_width="wrap_content"
                              android:layout_height="wrap_content"/>
                </LinearLayout>

                <LinearLayout
                    android:id="@+id/tab3"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" >

                    <TextView android:text="TextView3"
                              android:id="@+id/textView3"
                              android:layout_width="wrap_content"
                              android:layout_height="wrap_content"/>
                </LinearLayout>

                <LinearLayout
                    android:id="@+id/tab4"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" >
                </LinearLayout>

                <LinearLayout
                    android:id="@+id/tab5"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" >

                    <TableLayout android:id="@+id/details"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:stretchColumns="1"
                        android:paddingTop="4dp">
                        <TableRow>
                            <TextView android:text="Name:" />
                            <EditText
                                android:id="@+id/txtResName"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:ems="10"
                                android:inputType="textPersonName" >
                                <requestFocus />
                            </EditText>
                        </TableRow>

                        <TableRow>
                            <TextView android:text="Type:" />
                            <RadioGroup android:id="@+id/types">
                                <RadioButton android:id="@+id/chcType1"
                                    android:text="Type 1"/>
                                <RadioButton android:id="@+id/chcType2"
                                    android:text="Type 2"/>
                            </RadioGroup>

                            <TextView android:text="Date:" />
                            <EditText
                                android:id="@+id/txtResDate"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:ems="10"
                                android:inputType="date" />
                        </TableRow>

                        <TableRow>
                            <TextView android:text="Time:" />
                            <EditText
                                android:id="@+id/txtResTime"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:ems="10"
                                android:inputType="time" />

                            <TextView android:text="Test" />
                            <EditText
                                android:id="@+id/txtResNumber"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:ems="10"
                                android:inputType="number" />
                        </TableRow>

                        <TableRow>
                            <TextView android:text="Test 2" />
                            <EditText
                                android:id="@+id/txtResTest2"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:ems="10"
                                android:inputType="phone" />

                            <TextView android:text="Notes:" />
                            <EditText
                                android:id="@+id/txtResNotes"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:lines="2"
                                android:maxLines="2"
                                android:ems="10"
                                android:maxWidth="200sp"
                                android:inputType="textMultiLine" />
                        </TableRow>
                    </TableLayout>
                </LinearLayout>
            </FrameLayout>
        </LinearLayout>
    </TabHost>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:53:39.127

您需要将 layout_width 属性指定为“0px”。然后您的 layout_weight 属性将决定实际宽度。

# python-3.x - 如何在用作函数参数的列表中添加值？

> ID：15843191
> 
> 赞同：0
> 
> 时间：2013-04-05T20:43:15.363
> 
> 标签：python-3.x

我正在尝试理解这些说明。

1.  在你的主程序文件中设置一个名为“summer”的新函数，它将一个列表作为参数并返回一个我们将在接下来的步骤中确定的值。

2.  在“summer”函数中，设置一个使用名为“n”的计数器变量的循环，该变量将采用值 0、2、4、6、8、10、12。

3.  每次通过循环，您都将从“mymath”模块中调用您的“powerval”函数，并从传递给“summer”的数据列表中作为参数项“n”和“n+1”传递。将所有这些值相加并将最终结果返回给调用者。

到目前为止，我有：

```
def summer(list):
    for n in range(0,13,2):
        value=powerval(n,n+1) 
```

在那之后我迷路了。我如何执行第 3 步？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T20:45:31.547

你把它们加起来：

```
from mymath import powerval

def summer(somelist):
    sum = 0
    for n in range(0, 13, 2):
        sum += powerval(somelist[n], somelist[n + 1])
    return sum 
```

所以返回值`powerval()`被添加到到目前为止的总和中，总和从 0 开始。您确实需要传入`somelist[n]`and`somelist[n + 1]`值，而不是索引本身。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T20:45:32.297

你需要把它们加起来：

```
from mymath import powerval

def summer(lst):
    total = 0

    for n in range(0, 13, 2):
        total += powerval(lst[n], lst[n + 1])

    return total 
```

我不确定你在哪里使用`lst`（我重命名`list`为`lst`，作为`list`内置函数），所以我猜你正在尝试从该列表中获取`n`th 和`n + 1`th 元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T20:53:22.927

您可以使用该`sum`方法以非常时尚的方式完成此操作:)

```
def summer(myList):
    return sum(powerval(myList[n], myList[n+1]) for n in range(0, 13, 2)) 
```

这也是最快的方法。

PS：将列表命名为“列表”不是一个好主意，因为这是python中的保留名称。这就是为什么我在上面的示例中将其重命名为 myList 的原因。

# linux - Rsync 到 Amazon Ec2 实例

> ID：15843195
> 
> 赞同：68
> 
> 时间：2013-04-05T20:43:29.117
> 
> 标签：linux, ssh, amazon-ec2, rsync

我有一个 EC2 实例正在运行，并且能够通过 SSH 连接到它。

但是，当我尝试 rsync 时，它给了我错误 Permission denied (publickey)。

我正在使用的命令是：

```
rsync -avL --progress -e ssh -i ~/mykeypair.pem ~/Sites/my_site/* root@ec2-XX-XXX-XXX-XXX.us-west-2.compute.amazonaws.com:/var/www/html/ 
```

我也试过

```
rsync -avz ~/Sites/mysite/* -e "ssh -i ~/.ssh/id_rsa.pub" root@ec2-XX-XXX-XXX-XXX.us-west-2.compute.amazonaws.com:/var/www/html/ 
```

谢谢，

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2013-04-24T22:57:09.300

我刚刚收到同样的错误。我一直能够通过以下方式进行 ssh：

```
ssh -i ~/path/mykeypair.pem \
ubuntu@ec2-XX-XXX-XXX-XXX.us-west-2.compute.amazonaws.com 
```

但是当使用较长的**rsync**构造时，它似乎会导致错误。我最终将 ssh 语句括在引号中并使用密钥的完整路径。在您的示例中：

```
rsync -avL --progress -e "ssh -i /path/to/mykeypair.pem" \
       ~/Sites/my_site/* \ 
       root@ec2-XX-XXX-XXX-XXX.us-west-2.compute.amazonaws.com:/var/www/html/ 
```

这似乎奏效了。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-02-08T20:17:04.503

以下是我使用的并且有效。源是 ec2，目标是家用机器。

```
 sudo rsync  -azvv -e "ssh -i /home/ubuntu/key-to-ec2.pem" ec2-user@xx.xxx.xxx.xx:/home/ec2-user/source/ /home/ubuntu/target/ 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-07-12T15:01:37.950

在经历了一点痛苦之后，我相信这会有所帮助：

我正在使用以下命令，它可以正常工作：

```
rsync -av --progress -e ssh /folder1/folder2/* root@xxx.xxx.xxx.xxx:/folder1/folder2 
```

**首先考虑：**

使用 --rsync-path

我更喜欢在 shell 脚本中：

```
#!/bin/bash

RSYNC = /usr/bin/rsync

$RSYNC [options] [source] [destination] 
```

**第二个考虑：**

通过以下命令创建公钥，用于相关服务器之间的通信。她将与亚马逊提供的不同。

```
ssh-keygen -t rsa 
```

不要忘记在 /etc/ssh/sshd_config（UBUNTU 和 CENTOS）中启用目标服务器的权限。

[将文件从一个 EC2 实例同步到另一个](https://stackoverflow.com/questions/6963740/sync-files-from-one-ec2-instance-to-another)

[http://ask-leo.com/how_can_i_automate_an_sftp_transfer_between_two_servers.html](http://ask-leo.com/how_can_i_automate_an_sftp_transfer_between_two_servers.html)

使用 -v 选项获得详细信息并更好地识别错误。

**第三考虑**

如果两台服务器都在 EC2 上，请通过安全组进行限制

在安全组 Server Destination 中：

入站：源/TCP 端口 22/源服务器的 IP 安全（或组名）

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2018-02-12T09:14:51.843

将文件从本地机器复制到服务器

```
rsync -avz -e "ssh -i /path/to/key.pem" /path/to/file.txt  <username>@<ip/domain>:/path/to/directory/ 
```

将文件从服务器复制到本地机器

```
rsync -avz -e "ssh -i /path/to/key.pem" <username>@<ip/domain>:/path/to/directory/file.txt  /path/to/directory/ 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-11-13T07:33:52.330

这对我有用：

```
nohup rsync -zravu --partial --progress  -e "ssh -i xxxx.pem" ubuntu@xx.xx.xx.xx:/mnt/data   /mnt2/ & 
```

# android - 如何将 AChartEngine 图表转换为位图

> ID：15843198
> 
> 赞同：0
> 
> 时间：2013-04-05T20:43:30.210
> 
> 标签：android, bitmap, achartengine

我想将使用 AChartEngine lib 制作的折线图转换为位图。我该怎么做？我在网上没有找到任何可以提供帮助的东西。toBitmap() 方法是否合适？如果是，那么如何使用它？

**更新**：我使用了这种方法：

```
 public static Bitmap loadBitmapFromView(View v) {  
v.setDrawingCacheEnabled(true);
v.layout( 0,0,800,600);
v.setDrawingCacheQuality(View.DRAWING_CACHE_QUALITY_HIGH);
v.buildDrawingCache();
v.getDrawingCache();
 Bitmap bmp = Bitmap.createBitmap(800,600, Bitmap.Config.ARGB_8888);
v.setDrawingCacheEnabled(false);
return bmp; } 
```

并将结果保存在 png 文件中，但我得到的只是一个空文件！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-07T15:21:32.743

有点晚了，但这是我从 GraphicalView 创建 JPG（通过位图）所做的：

```
Bitmap bmp = Bitmap.createBitmap( 600, 1000, Bitmap.Config.ARGB_8888 );
Canvas canvas = new Canvas(bmp);
graphicalView.draw( canvas );

FileOutputStream out = new FileOutputStream( filename );
bmp.compress( Bitmap.CompressFormat.JPEG, 97, out );
out.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:57:21.603

toBitmap() 似乎总是返回空值。

尝试这个：

```
 //Get the graphical view 
            GraphicalView v = ChartFactory.getLineChartView(context, 
                            buildDataset(titles, x, values), renderer); 

           //Enable the cache 
            v.setDrawingCacheEnabled(true); 

            //Set the layout manually to 800*600 
            v.layout(0, 0, 800, 600); 

            //Set the quality to high 
            v.setDrawingCacheQuality(View.DRAWING_CACHE_QUALITY_HIGH); 

            //Build the cache, get the bitmap and close the cache 
            v.buildDrawingCache(true); 
            Bitmap b = Bitmap.createBitmap(v.getDrawingCache()); 
            v.setDrawingCacheEnabled(false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-23T02:27:04.330

SVG 对于图表更有效。我破解了 AChartEngine 以输出 SVG，用于我们使用的特定类型的图表。hack 很容易扩展到其他图表。如果有人对此感兴趣，请回复此答案，我会将我所做的事情放在 Gist 中。

# node.js - 全局安装的 npm-packages 不起作用

> ID：15843199
> 
> 赞同：17
> 
> 时间：2013-04-05T20:43:30.883
> 
> 标签：node.js, ubuntu, coffeescript, npm

本地 npm-packages 按预期工作，但我似乎不可能让全局安装的包运行。它甚至不会抛出任何错误，它只是没有做任何事情（快递、咖啡等）

在我想使用咖啡脚本之前，这并没有让我很困扰。

我已经检查过的东西（我在 Xubuntu 12.04 上）：

*   npm 列出它

*   它安装在 /usr/local/bin

*   （更新 | 卸载 | 重新安装） npm 通过（ npm | apt-get ）

*   卸载 nodejs 并对 /opt/bin/node 进行了新的 git-rebuild

    => 同样的事情..

有人知道解决方案吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-06T09:49:00.240

是`NODE_PATH`在您的环境中设置的变量

```
//show if set
echo $NODE_PATH

//set NODE_PATH
NODE_PATH="/usr/local/lib/node_modules" 
```

应该包含安装模块的目录的`NODE_PATH`位置。它可以有多个目录（冒号分隔）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-06T10:45:40.727

原来它试图从命令`node`而不是`nodejs`命令开始。所以`/usr/local/lib/node_modules/coffee-script/bin/coffee`我改成现在工作正常 `#!/usr/bin/env node`。`#!/usr/bin/env nodejs`

# java - 如何在 Java 控制台（无 UI）中显示下载文件的百分比进度？

> ID：15843202
> 
> 赞同：2
> 
> 时间：2013-04-05T20:43:34.177
> 
> 标签：java, download, console, progress

我的java代码部分如下。

```
while (status == DOWNLOADING) {
    /* Size buffer according to how much of the
       file is left to download. */
            byte buffer[];
            if (size - downloaded > MAX_BUFFER_SIZE) {
                buffer = new byte[MAX_BUFFER_SIZE];
            } else {
                buffer = new byte[size - downloaded];
            }

            // Read from server into buffer.
            int read = stream.read(buffer);
            if (read == -1){
                System.out.println("File was downloaded");
                break;
            }

            // Write buffer to file.
            file.write(buffer, 0, read);
            downloaded += read;

        }

  /* Change status to complete if this point was
     reached because downloading has finished. */
        if (status == DOWNLOADING) {
            status = COMPLETE;

        } 
```

我想通过更新控制台中的进度行以百分比形式显示下载文件的进度。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T03:44:38.950

这是一个简单的“进度条”概念。

基本上，`\b`在打印出新的进度条之前，它使用该字符来退格先前打印到控制台的字符...

```
public class TextProgress {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        System.out.println("");
        printProgress(0);
        try {
            for (int index = 0; index < 101; index++) {
                printProgress(index);
                Thread.sleep(125);
            }
        } catch (InterruptedException ex) {
            Logger.getLogger(TextProgress.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    public static void printProgress(int index) {

        int dotCount = (int) (index / 10f);
        StringBuilder sb = new StringBuilder("[");
        for (int count = 0; count < dotCount; count++) {
            sb.append(".");
        }
        for (int count = dotCount; count < 10; count++) {
            sb.append(" ");
        }
        sb.append("]");
        for (int count = 0; count < sb.length(); count++) {
            System.out.print("\b");
        }
        System.out.print(sb.toString());

    }
} 
```

它不适用于大多数 IDE，因为 Java 的文本组件不支持该`\b`字符，您必须从终端/控制台运行

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T21:05:32.557

如果您对输出感到满意，例如

> 下载文件 ... 10% ... 20% ... 38% ...

一直附加到该行，您可以`print`代替`println`. 如果你想做一些有限的事情，比如只更新几个字符，你可以打印退格字符来擦除然后重新打印百分比，例如：

```
System.out.print("index at: X");
int lastSize = 1;
for (int i = 0; i < 100; i++) {
  for (int j = 0; j < lastSize; j++) {
    System.out.print("\b");
  }
  String is = String.toString(i);
  System.out.print(is);
  lastSize = is.length();
} 
```

请注意代码如何跟踪打印了多少个字符，因此它知道要打印多少个退格来擦除附加的文本。

比这更复杂的东西，你需要某种控制台或终端控制 SDK。ncurses 是 Unix 标准，看起来有一个 Java 端口：

> [http://sourceforge.net/projects/javacurses/](http://sourceforge.net/projects/javacurses/)

我从来没有使用过这个，所以我不能保证它。如果它不正确，一个快速的谷歌显示了许多替代方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-18T20:48:19.383

```
public class ConsoleProgressCursor {

    private static String CURSOR_STRING = "0%.......10%.......20%.......30%.......40%.......50%.......60%.......70%.......80%.......90%.....100%";

    private double max = 0.;
    private double cursor = 1.;
    private double lastCursor = 0.;

    public static void main(String[] args) throws InterruptedException {
        final int max = 100;
        ConsoleProgressCursor progress = new ConsoleProgressCursor("Progress : ", max);
        for (int i = 0; i < max; i++) {
            Thread.sleep(10L);
            progress.nextProgress();
        }
        progress.endProgress();
    }

    public ConsoleProgressCursor(String title, double maxCounts) {
        max = maxCounts;
        System.out.print(title);
    }

    public void nextProgress() {
        cursor += 100\. / max;
        printCursor();
    }

    public void nextProgress(double progress) {
        cursor += progress * 100\. / max;
        printCursor();
    }

    public void endProgress() {
        System.out.println(CURSOR_STRING.substring((int) lastCursor, 101));
    }

    private void printCursor() {
        final int intCursor = (int) Math.floor(cursor);
        System.out.print(CURSOR_STRING.substring((int) lastCursor, intCursor));
        lastCursor = cursor;
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-05T23:26:18.347

首先，您无法在纯控制台上模拟真实的进度条。

@Jeffrey Blattman 提供了一个简单输出到控制台的解决方案以及提供高级控制台工作的库

如果您对在控制台中构建 UI 更感兴趣，您可以尝试 Lanterna ( [http://code.google.com/p/lanterna/](http://code.google.com/p/lanterna/) ) - 这是非常好的东西，特别是如果您希望为老派部门开发软件，例如图书馆或政府会计师

# c++ - OpenCV：一种为灰度图像着色的简单方法

> ID：15843206
> 
> 赞同：6
> 
> 时间：2013-04-05T20:43:39.440
> 
> 标签：c++, opencv

什么是“着色”灰度图像的直接方法。通过着色，我的意思是将灰度强度值移植到新图像中的三个 R、G、B 通道之一。

例如，当图片被着色为“蓝色”时`8UC1`，强度为 的灰度像素`I = 50`应该成为强度的`8UC3`彩色像素。`BGR = (50, 0, 0)`

例如，在 Matlab 中，我所要求的可以简单地用两行代码创建：

```
color_im = zeros([size(gray_im) 3], class(gray_im));
color_im(:, :, 3) = gray_im; 
```

但令人惊讶的是，我在 OpenCV 中找不到任何类似的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T21:42:17.850

好吧，同样的事情需要在 C++ 和 OpenCV 中做更多的工作：

```
// Load a single-channel grayscale image
cv::Mat gray = cv::imread("filename.ext", CV_LOAD_IMAGE_GRAYSCALE);

// Create an empty matrix of the same size (for the two empty channels)
cv::Mat empty = cv::Mat::zeros(gray.size(), CV_8UC1);

// Create a vector containing the channels of the new colored image
std::vector<cv::Mat> channels;

channels.push_back(gray);   // 1st channel
channels.push_back(empty);  // 2nd channel
channels.push_back(empty);  // 3rd channel

// Construct a new 3-channel image of the same size and depth
cv::Mat color;
cv::merge(channels, color); 
```

或作为一个函数（压缩）：

```
cv::Mat colorize(cv::Mat gray, unsigned int channel = 0)
{
    CV_Assert(gray.channels() == 1 && channel <= 2);

    cv::Mat empty = cv::Mat::zeros(gray.size(), gray.depth());
    std::vector<cv::Mat> channels(3, empty);
    channels.at(channel) = gray;

    cv::Mat color;
    cv::merge(channels, color);
    return color;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-07T20:17:39.123

有[特殊的功能可以做到这一点](http://docs.opencv.org/modules/contrib/doc/facerec/colormaps.html)-从*contrib*模块中的*v2.4.5 开始*，OpenCV 中的 applyColorMap 。有不同的颜色图可用：

 *![彩色地图](https://i.stack.imgur.com/0ZkOa.png)*

# .net - 使用 AssertionFlowClient 和服务帐户访问 Gmail 的 IMAP

> ID：15843211
> 
> 赞同：1
> 
> 时间：2013-04-05T20:44:02.723
> 
> 标签：.net, oauth-2.0, gmail-imap, google-api-dotnet-client

是否可以使用 AssertionFlowClient 和服务帐户通过 IMAP 访问我域中任何用户的邮箱。与 2-legged OAuth 1.0 相同。

这是我的代码：

```
X509Certificate2 certificate =  new X509Certificate2(...)
AuthorizationServerDescription server = new AuthorizationServerDescription {...};
List<string> scope = new List<string> { 
    "https://mail.google.com/", 
    "https://www.googleapis.com/auth/userinfo#email" };

AssertionFlowClient provider = new AssertionFlowClient(server, certificate)
{
  ServiceAccountId = SERVICE_ACCOUNT_EMAIL,
  Scope = string.Join(" ",scope.ToArray()),
};

IAuthorizationState grantedAccess = AssertionFlowClient.GetState(provider);
accessToken = grantedAccess.AccessToken;

using (Imap client = new Imap())
{
    client.ConnectSSL("imap.gmail.com");
    client.LoginOAUTH2("user@mydomain.com", accessToken);
    ...
} 
```

我能够从 accounts.google.com 服务器检索有效的 accessToken（尽管 AssertionFlowClient/DotNetOpenAuth 有一个错误，目前我使用调试器和监视窗口来检索它）。

**我确定 accessToken 是正确**的，因为我可以使用它查询 www.googleapis.com/userinfo/email API 端点 - 它返回与 SERVICE_ACCOUNT_EMAIL 相同的值。

但是，Gmail 的 IMAP 服务器返回以下**错误**：

```
{"status":"400","schemes":"Bearer","scope":"https://mail.google.com/"} 
```

此服务帐户的“管理 API 客户端访问” 在 cpanel 上配置为“电子邮件（读/写/发送） [https://mail.google.com/ ”。](https://mail.google.com/)

AssertionFlowClient/DotNetOpenAuth 错误表明没有人尝试过这个。

有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T13:42:43.260

所以谷歌似乎忘记在他们的文档中包含这个小细节：

```
AssertionFlowClient provider = new AssertionFlowClient(server, certificate)
    {
        ServiceAccountId = SERVICE_ACCOUNT_EMAIL,
        Scope = "https://mail.google.com/",
        ServiceAccountUser = "user@mydomain.com",  // <- important
    }; 
```

似乎请求访问多个范围（空格分隔）也失败了。

# wpf - WPF 网格中心和拉伸文本框

> ID：15843214
> 
> 赞同：1
> 
> 时间：2013-04-05T20:44:22.433
> 
> 标签：wpf, grid, center, stretch

我有一个 WPF 网格，其中行和列 0 作为标签。我希望第一列是 20 的静态值，但我希望其余列伸展到它们的可用空间，直到它们达到最大宽度，并且我希望网格即使在行达到最大宽度后仍保持居中。如果我使用 Grid Horizo​​ntalAlignment="Center" 每列宽度等于该行内容的宽度，这对于一个充满空文本框的列来说看起来不是很好。如果我使用 Grid Horizo​​ntalAlignment="Stretch" 它完全符合我的要求，但在列达到最大宽度后 Grid 没有居中，它是左对齐的。有没有办法使网格居中并拉伸列？附件是我的网格的 xaml 的一部分。

谢谢。

```
<Expander Margin="10,10,10,10" Header="Expander">
    <Grid Margin="10,10,10,10" HorizontalAlignment="Center">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="20" />
            <ColumnDefinition Width="*" MaxWidth="200"/>
            <ColumnDefinition Width="*" MaxWidth="200" />
            <ColumnDefinition Width="*" MaxWidth="200" />
         </Grid.ColumnDefinitions>
         <Grid.RowDefinitions>
             <RowDefinition />
             <RowDefinition />
         </Grid.RowDefinitions>
         <Label Content="Ax" HorizontalContentAlignment="Center" Grid.Column="1" Grid.Row="0"/>
         <Label Content="0" HorizontalContentAlignment="Center" VerticalAlignment="Center" Grid.Column="0" Grid.Row="1" />
         <TextBox Name="AxK00" Margin="1,1,1,1" HorizontalContentAlignment="Center" Grid.Column="1" Grid.Row="1" />
         <TextBox Name="AyK00" Margin="1,1,1,1" HorizontalContentAlignment="Center" Grid.Column="2" Grid.Row="1" />
         <TextBox Name="AzK00" Margin="1,1,1,1" HorizontalContentAlignment="Center" Grid.Column="3" Grid.Row="1" />
    </Grid>
</Expander> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T22:34:35.490

当您的列已达到它们的 MaxWidth 时，Grid 有一个 Horizo​​ntalAlignment=Stretch，这意味着除非您给它一个 Width，否则 Grid 将扩展以填充空间。尝试将 Grid 的 MaxWidth 设置为 620（MaxWidths 的总和）或类似的值。您的 Grid 将拉伸以填充您的最大尺寸，但仍然足够小，以使 Horizo​​ntalAlignment =Center 可以观察到。

# .net - 获取一天中的秒数

> ID：15843219
> 
> 赞同：1
> 
> 时间：2013-04-05T20:44:41.403
> 
> 标签：.net, datetime

我有一个始终保持午夜时间的日期时间列表，以及当天网站被认为“启动”的秒数。

我需要计算出“正常运行时间”的百分比，所以我需要确切知道那天有多少秒。我想知道.NET 中是否有任何类似于 DateTime.DaysInMonth(year, month) 但一天中的秒数的东西。

我的 Google-fu 似乎让我失望了，我能找到的只是[.NET 在一天中的秒数不变？](https://stackoverflow.com/q/2136428/784908)- 但这没有考虑夏令时。

我认为这很简单

```
var secondsInDay = (startDay.AddDays(1) - startDay).TotalSeconds; 
```

但我想知道这是否正确（简单但并非详尽的测试表明它是正确的）？
有没有更有效的方法来计算一天中的秒数？

**请注意 - 这需要考虑夏令时**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:58:41.247

我认为您需要使用`DateTimeOffset`and `TimeZoneInfo`。本文可以帮助您，特别是*使用 DateTimeOffset 值的比较和算术运算部分的*[第二](http://msdn.microsoft.com/en-us/library/bb546099.aspx)个代码片段。

 *您可以在该代码中看到他们在夏令时向 DateTimeOffset 实例添加小时数，并且结果考虑了时间变化。

**编辑：**下面的代码取自上面提到的文章（代码没有做你想要的，但表明`DateTimeOffset`使用的`TimeZoneInfo`是考虑夏令时：

```
 public static void Main()
   {
      DateTime generalTime = new DateTime(2008, 3, 9, 1, 30, 0);
      const string tzName = "Central Standard Time";
      TimeSpan twoAndAHalfHours = new TimeSpan(2, 30, 0);

      // Instantiate DateTimeOffset value to have correct CST offset 
      try
      {
         DateTimeOffset centralTime1 = new DateTimeOffset(generalTime, 
                    TimeZoneInfo.FindSystemTimeZoneById(tzName).GetUtcOffset(generalTime));

         // Add two and a half hours      
         DateTimeOffset centralTime2 = centralTime1.Add(twoAndAHalfHours);
         // Display result
         Console.WriteLine("{0} + {1} hours = {2}", centralTime1, 
                                                    twoAndAHalfHours.ToString(), 
                                                    centralTime2);  
      }
      catch (TimeZoneNotFoundException)
      {
         Console.WriteLine("Unable to retrieve Central Standard Time zone information.");
      }
   }

    // The example displays the following output to the console: 
    //    3/9/2008 1:30:00 AM -06:00 + 02:30:00 hours = 3/9/2008 4:00:00 AM -06:00 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:56:53.840

这个怎么样：

`TimeSpan.FromDays(1).TotalSeconds`

当然，除非您试图计算一天中偶尔添加和删除的秒数，以使地球进动与时钟保持一致

对于日光跟踪，您可以检查您的一天是否是返回的两个日期之一

`TimeZone.CurrentTimeZone.GetDaylightChanges(2013)`

并添加/删除 Delta

或者您可以通过始终根据过去 24 小时而不是 1 天计算正常运行时间来跳过这些恶作剧

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T22:26:49.203

这是一个可以满足您要求的功能：

```
public int SecondsInDay(DateTime dateTime, string timeZoneId)
{
    var dt1 = dateTime.Date;
    var dt2 = dt1.AddDays(1);
    var zone = TimeZoneInfo.FindSystemTimeZoneById(timeZoneId);

    var dto1 = new DateTimeOffset(dt1, zone.GetUtcOffset(dt1));
    var dto2 = new DateTimeOffset(dt2, zone.GetUtcOffset(dt2));
    var seconds = (dto2 - dto1).TotalSeconds;

    return (int) seconds;
} 
```

举个例子：

```
int s = SecondsInDay(new DateTime(2013, 1, 1), "Central Standard Time");
// 86400

int s = SecondsInDay(new DateTime(2013, 3, 10), "Central Standard Time");
// 82800

int s = SecondsInDay(new DateTime(2013, 11, 3), "Central Standard Time");
// 90000 
```*

# c# - 我可以从 T4 .tt 模板中的另一个文件执行代码以生成代码吗？

> ID：15843221
> 
> 赞同：10
> 
> 时间：2013-04-05T20:44:46.120
> 
> 标签：c#, code-generation, t4

我正在使用几个 T4 模板来生成几个 T4 文件，并且它们中的大多数共享很多相同的代码，所以我自然想用它制作一个函数并将它放在一个与所有 T4 文件不同的文件中可以访问。

但是我似乎无法找到一种方法，或者谷歌寻找一种方法来实际使用存储在另一个文件中的代码。

这可能吗？如果是这样，是否有一个简单的例子来说明如何做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T19:35:49.227

从您的问题来看，听起来您只是在解决方案的普通模板文件中使用 T4。在这种情况下，您可以只使用该`<#@ include #>`指令来拉入您的共享代码。它是一种原始文本包含机制，类似于 C/C++ 的`#include`，因此您可以移动尽可能多或尽可能少地共享到其他文件中。

[请参阅此处](http://msdn.microsoft.com/en-us/library/gg586949.aspx "T4 包含指令")的文档。

值得注意的是，目前，include 指令在 ASP.Net 视图脚手架模板中不起作用。

如果您想与常规 C# 项目共享代码，这是可能的，但您需要将共享代码构建到您可以引用的程序集中。不可能只使用`<#@ include #>`指令直接拉入`.cs`文件，因为指令不会嵌套在控件或类功能块中。

[您可以使用此处](http://msdn.microsoft.com/en-us/library/gg586946.aspx "T4 Assembly Directive")`<#@ assembly #>`记录的指令引用包含共享代码的帮助程序集。

# c++ - 无法使用外部类对象访问内部类成员

> ID：15843222
> 
> 赞同：0
> 
> 时间：2013-04-05T20:44:59.803
> 
> 标签：c++

```
#include <iostream>

class Outer
{
    int o;
public:
    void setOuter(int o)
    {
        this->o=o;
    }
    class Inner
    {
    public:
        int i;
        int retOuter(Outer *obj)
        {
            return obj->o;
        }
    };
};

int main(int argc, char **argv) {
    Outer::Inner obj;
    obj.i=20;
    std::cout<<"Inner i = "<<obj.i<<std::endl;

    Outer *obj1=new Outer;
    obj1->setOuter(40);
    std::cout<<"Outer o = "<<obj.retOuter(obj1)<<std::endl;

    obj1->Inner::i =50; //Access the inner class members by Outer class object!
} 
```

除了最后一行之外，上面代码中的所有内容都很好。为什么我无法使用外部类对象访问内部类成员？外部类对象应该具有的所有公共成员访问权限以及`class Outer`当我创建内部类对象时的行为如何，因为它包含在外部类中！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T20:46:10.557

`Inner`只是在不同范围内定义的类。跟说没区别

```
class Inner
{
public:
    int i;
    int retOuter(Outer *obj)
    {
        return obj->o;
    }
}; 
```

接着

```
Inner::i =50 
```

这显然是不可能的，因为`i`is not `static`。

声明内部类不会自动为外部类声明该类型的成员，您可以使用该语法访问该成员。

现在，类似：

```
class Outer
{
    int o;
public:
    void setOuter(int o)
    {
        this->o=o;
    }
    class Inner
    {
    public:
        int i;
        int retOuter(Outer *obj)
        {
            return obj->o;
        }
    } innerMember;
    //    ^^^
    // declare a member
};

int main(int argc, char **argv) {
    Outer *obj1=new Outer;
    obj1->innerMember.i =50; //Access the inner class members by Outer class object!
} 
```

会工作。

# ios - 我可以发布仅限 iOS 5 的应用程序吗？

> ID：15843225
> 
> 赞同：0
> 
> 时间：2013-04-05T20:45:14.437
> 
> 标签：ios, app-store

我想知道是否有一种方法可以部署仅 iOS 5 版本的应用程序，并且没有更高版本的 iOS 能够运行此应用程序。我知道 Base SDK 版本和部署目标选项来配置应用程序在哪些系统上运行，但有没有办法指定应用程序只能在 iOS 5 上运行？

原因：我有一个更新版本的应用程序，它具有更多功能，使用更多内存，因此在 iPad 1 上崩溃。旧版本的应用程序功能较少并且运行良好。我只想将旧版本部署到 iOS 5，而对于 iOS 6 及更高版本，我想部署新版本。

有没有办法在不发布两个单独的应用程序的情况下做到这一点，从而使用户不知道要下载哪个应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T20:58:37.403

> 我想知道是否有一种方法可以部署仅 iOS 5 版本的应用程序并且没有更高版本的 iOS 能够运行此应用程序

不，这是不可能的。即使您的应用具有 5.0 的 Base SDK，也无法阻止 iOS 6 用户安装和运行该应用。

> 有没有办法在不发布两个单独的应用程序的情况下做到这一点，从而使用户不知道要下载哪个应用程序？

正如“马特”所说，是的。您创建一个应用程序。您将部署目标设置为 5.0，将基础 SDK 设置为“最新”。诀窍是您需要进行大量运行时检查，以便 iOS 5 的用户只能获得“较旧、较低内存”的功能。iOS 6 的用户应该获得所有更新的功能。

您的应用描述（以及“新增功能”说明）应明确说明 iOS 5 和 iOS 6 用户将获得不同的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T20:57:57.933

您可以对您的应用程序进行编程以实现 iOS5 兼容性并将其发送给 Apple。当您上传您的应用程序时，它会询问一些信息，其中之一是兼容性。如果你说它只兼容 iOS5，他们可能会接受，但我不能 100% 确定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T21:03:56.897

您不能将应用程序限制为较新的 iOS 版本。

正如您在问题中所述，**您的问题不是 iOS 版本，而是 iPad 1**。

`+[UIDevice model]`您可以在运行时使用和检测 iPad 1 `-[NSProcessInfo processorCount]`。iPad 1 只有一个 CPU 内核，所有其他 iPad 型号都有 2 个或更多内核。

然后只需禁用或更改此设备上的某些功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T20:50:14.633

> 我只想将旧版本部署到 iOS 5，而对于 iOS 6 及更高版本，我想部署新版本。有没有办法在不发布两个单独的应用程序的情况下做到这一点......？

是的，您必须编写*条件代码*，如果设备运行 iOS 5 会发生某些事情，如果设备运行 iOS 6 会发生其他事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T21:10:34.097

> 有没有办法在不发布两个单独的应用程序的情况下做到这一点，从而使用户不知道要下载哪个应用程序？

您应该构建一个应用程序，根据设备是否支持有条件地启用功能。在 iOS5 上运行时，应隐藏在 iOS5 上不起作用的 iOS6 功能。当硬件不存在时，应该隐藏依赖于某些硬件的功能。不过，请尝试测试您需要的特定功能——不要根据操作系统的版本假设某个功能是否存在。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-07T03:22:51.200

您只能在 Apple 测试后批准的 App Store 中发布应用程序。据报道，他们通常会在最新版本的 iOS 上测试应用程序，如果您的应用程序崩溃或无法在当前操作系统（今天的 6.1.3）上运行，Apple 可能会拒绝该应用程序。

所以不行。

# xml - 将 HL7 段转换为 XML

> ID：15843230
> 
> 赞同：3
> 
> 时间：2013-04-05T20:45:26.383
> 
> 标签：xml, xslt, xslt-2.0, hl7, xpath-2.0

我有一个我们能够使用 HAPI 库生成的 XML，并使用 XSL 来更改 XML 的格式。我正在使用以下模板。当前模板查看 OBX.5 段中的数字值，然后解释 OBX6（测量单位）。但是，当 OBX6 来自其中一个客户的样式时，我也试图将其解释为在其间插入插入符号的副本`^`（例如：`%^%`或`mL^mL`）。我当前的模板忽略了这一点，但我希望能够在`^`.

```
<xsl:template match="hl7:OBX.6[matches(./../hl7:OBX.5, '^\d+(\.\d+)?$') and index-of($percentList, .) or index-of($mgdlList, .) or index-of($mlList, .) or index-of($mmList, .) or index-of($mgList, .))]">
    <result><xsl:value-of select="./../hl7:OBX.5" /></result>
        <xsl:when test="index-of($percentList, .)">
            <units>%</units>
        </xsl:when>
...
        <xsl:when test="index-of($mlList, .)">
            <units>ml</units>
        </xsl:when>

        <xsl:otherwise>
            <units><xsl:value-of select="./hl7:CE.1" /></units>
        </xsl:otherwise>
...

</xsl:template> 
```

结果应该产生

```
 <result>38.0</result>
            <units>%</units> 
```

从

```
 <OBX.5>38.0</OBX.5>
                <OBX.6>
                    <CE.1>%^%</CE.1>
                </OBX.6> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T01:48:33.297

**使用**：

```
tokenize(hl7:CE.1, '\^')[1] 
```

**这是一个简单的基于 XSLT 2.0 的验证：**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xs="http://www.w3.org/2001/XMLSchema">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="OBX.6">
  <xsl:sequence select="tokenize(CE.1, '\^')[1]"/>
 </xsl:template>

 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时**（从提供的 XML 片段派生并且格式正确）：

```
<t>
    <OBX.5>38.0</OBX.5>
    <OBX.6>
        <CE.1>%^%</CE.1>
    </OBX.6>
</t> 
```

**产生了想要的正确结果：**

```
% 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T16:40:05.633

我还发现可以调整 HAPI 以通过行终止符、`|`段终止符和`^`字段终止符在段内定界。这帮助很大

对应的 xsl 如下所示：

```
<xsl:template match="hl7:OBX.6[matches(./../hl7:OBX.5, '^\d+(\.\d+)?$') ]">

    <xsl:if test="hl7:CE.1[  index-of($percentList, .) or index-of($mgdlList, .) or index-of($mlList, .) or index-of($mmList, .) or index-of($mgList, .))]">
        <result><xsl:value-of select="./../hl7:OBX.5" /></result>

        <xsl:choose>
            <xsl:when test="index-of($percentList, hl7:CE.1)">
                <units>%</units>
            </xsl:when>
...

            <xsl:when test="index-of($mlList, hl7:CE.1)">
                <units>mL</units>
            </xsl:when>
...

            <xsl:otherwise>
                <units><xsl:value-of select="hl7:CE.1" /></units>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:if>
</xsl:template> 
```

# php - PHP：使用关联的计数器数组，在第一次递增之前将每个值显式初始化为 0 是否更惯用？

> ID：15843231
> 
> 赞同：2
> 
> 时间：2013-04-05T20:45:26.603
> 
> 标签：php, arrays, counter

我正在编写一些代码来构建计数器的关联数组。当它第一次遇到新项目时，它会创建一个新密钥并将其初始化为零。IE：

```
if (!array_key_exists($item, $counters)) {
    $counters[$item] = 0;
}
$counters[$item]++; 
```

然而，PHP 实际上隐含地完成了第一部分。如果我只是...

```
 $counters[$item]++; 
```

...然后 $counters[$item] 将评估为 NULL 并在递增之前转换为 0。显然第二种方式更简单，更简洁，但感觉有点低俗，因为 $counters[$item] 可能还不存在并不明显。在 PHP 中是首选的一种方式还是另一种方式？

相比之下，在 Python 中，惯用的方法是在您想要将自己初始化为 0 的键时使用 collections.Counter，当您想要自己初始化它们时使用常规字典。在 PHP 中，您只有第一个选项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T21:04:58.077

增加一个未初始化的键会产生一个 PHP 通知，这是一个坏主意。您应该始终先初始化。

但是，使用的`array_key_exists`不是很地道。我知道来自 Python 可能看起来很自然，但是如果您知道它`$counter`没有有意义的值，那么使用它来测试数组成员资格会`NULL`更惯用。`isset()`（它也快得多，我无法辨别！）

这就是我在 PHP 中编写计数器的方式：

```
$counters = array();
foreach ($thingtobecounted as $item) {
    if (isset($counters[$item])) {
        $counters[$item]++;
    } else {
        $counters[$item] = 1;
    }
} 
```

不幸的是，与 Python 不同，PHP 不提供任何方法来执行此操作而无需执行两个键查找。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T20:49:08.987

第一个是首选。第二个选项将在您的日志中生成一条通知，说明 $counters[$item] 未定义。它仍然有效，但如果您更改 display_errors = On; 和error_reporting = E_ALL。在您的 php.ini 文件中，您将在浏览器中看到这些通知。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T20:54:10.067

第一种方法通常是你如何做，如果只是为了更简单的维护。请记住，您可能不是维护代码的人。您不希望错误日志中充斥着正确操作的代码。更糟糕的是，您可能需要将方法转移到可能不会发生隐式初始化的其他语言（或早期版本的 PHP）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-05T20:58:07.637

如果您真的不需要检查每个数组索引 - 或者知道大多数索引将是未定义的 - 为什么不抑制以下错误：？

（这样可以节省一些初始化 [无用] 索引的性能）

```
if (@!array_key_exists($item, $counters)) { 
```

# c# - 如何阻止打开多个表单？

> ID：15843236
> 
> 赞同：-1
> 
> 时间：2013-04-05T20:45:42.277
> 
> 标签：c#, foreach, listbox, break, selectedindex

这里发生的情况是，当我单击 myListBox 中的学生以打开他们的详细信息时，将显示一个显示其详细信息的窗口窗体，并且将显示一个显示 myListBox 中第一个教师详细信息的窗口窗体。

如果我单击 myListBox 中的教师，则会为他们打开一个窗口，这就是我想要的。对于学生，我怎样才能让它像这样工作？我是否有可能做类似的事情：

```
 if(myListBox.SelectedIndex == Student)
 {
    //code to open details form here
 } 
```

这就是我为人们打开详细信息表单的方式。如果我没有使用 myListBox.SelectedIndex == index 的 if 语句。然后将打开每个人的详细信息表。

```
private void openInfoButton_Click(object sender, EventArgs e)
{
            int index = 0;
            foreach (Student student in studentsList)
            {
                if (myListBox.SelectedIndex == index)
                {
                    PersonDetails studentDetails = new PersonDetails(student);
                    studentDetails.Show();
                    break;
                }
                index++;
            }

            foreach (Teacher teacher in teacherList)
            {
                if (myListBox.SelectedIndex == index)
                {
                    PersonDetails teacherDetails = new PersonDetails(teacher);
                    teacherDetails.Show();
                    break;
                }
                index++;
            }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:50:51.160

如果您查看`sender`对象，它会告诉您单击了哪个按钮。从那里你应该知道是否显示学生或教师表格

# highcharts - Highcharts 气泡图数据标签重叠

> ID：15843238
> 
> 赞同：4
> 
> 时间：2013-04-05T20:45:45.673
> 
> 标签：highcharts

如图所示（这不是与小提琴相同的代码，但显示了问题），使用 Highcharts 新的气泡图，似乎 dataLabels 喜欢坐在彼此之上。有一个简单的解决方法吗？我很乐意根据每个标签手动更改 z-index，但这似乎不适用于气泡图。这是一些无法按预期工作的示例代码（在[小提琴](http://jsfiddle.net/ZLmU8/2/)中尝试）：

```
series: [{
    data: [{
        x: 99,
        y: 36,
        z: 50
    }, {
        x: 99,
        y: 74,
        z: 55,
        dataLabels: {
            zIndex:15,
            enabled: true,
        }
    }, {
        x: 99,
        y: 76,
        z: 55,
        dataLabels: {
            zIndex: 1,
            enabled: true
           }
     }
    ]
}], 
```

![在此处输入图像描述](https://i.stack.imgur.com/NhdNI.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:56:18.293

您可以设置`useHTML: true`标志，然后`z-index: x`为 dataLabels 设置属性，请参阅：http: [//jsfiddle.net/ZLmU8/4/](http://jsfiddle.net/ZLmU8/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-13T18:23:21.733

显然，Highcharts 点对象上有一个 labelrank 属性，可用于指示哪些点标签位于顶部。当您像这样创建数据时可以使用它：

```
data: [{
    x: 1, y: 1, labelrank: 1, name: 'A'
    },{
    x: 1, y: 1, labelrank: 2, name: 'B' 
  }] 
```

或者可以通过执行以下操作在单个点上更新它以将该点的 dataLabel 放在前面：`chart.series[0].points[0].update({labelrank: 3});`

我有一个类似的问题，并在刚刚回答的 SO 上创建了[这个问题。](https://stackoverflow.com/questions/36579518/highcharts-bubble-chart-how-to-move-an-individual-points-data-label-datalabe/36599536#36599536)

**编辑**

他们还添加了有关`series.data.labelrank`其文档的信息： http: [//api.highcharts.com/highcharts#series.data.labelrank](http://api.highcharts.com/highcharts#series%3Cbubble%3E.data.labelrank)

# meteor - 填充相同值时，Meteor.js 表单上的隐藏输入变为空白

> ID：15843239
> 
> 赞同：0
> 
> 时间：2013-04-05T20:45:46.733
> 
> 标签：meteor

我在一个名为“todo_form”的模板中有这个：

```
<input type="hidden" id="priority" value="{{todo.priority}}"> 
```

然后，我在表单上设置了一个“渲染”回调，以从隐藏的输入中读取值，并使用它设置一个 jQuery UI 滑块。通过单击列表中的待办事项（通过注册的会话变量“active_todo”）填充表单。

因此，如果我单击优先级为 10 的待办事项，然后单击具有相同优先级的任何其他待办事项`$('#priority').val()`将返回空白...只要我单击具有不同优先级的待办事项，它就可以正常工作。我通过使用控制台验证了这一点 - 该字段设置为空白！

我的解决方案是检查注册的“active_todo”并从中提取优先级，但我还必须更新隐藏的输入：`$("#priority").val(active_todo.priority)`.

有人有什么想法吗？这是原始（非工作）呈现的回调：

```
Template.todo_form.rendered = ->
    priority = $( "#priority" ).val();
    $( "#priority-slider" ).slider(
        range: "min"
        value: priority
        min: 1
        max: 10
        orientation: 'vertical'
        slide: ( event, ui ) ->
            $( "#priority" ).val( ui.value)
    ) 
```

这是我“修复”它的方法：

```
Template.todo_form.rendered = ->
    active_todo = Session.get('active_todo');
    $("#priority-slider" ).slider(
        range: "min"
        value: active_todo.priority
        min: 1
        max: 10
        orientation: 'vertical'
        slide: ( event, ui ) ->
            $("#priority").val( ui.value)
    )
    $("#priority").val(active_todo.priority) # SHOULDN'T HAVE TO DO THIS!!! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:20:18.430

有点难以理解您要完成的工作，但我相信您只是想要一个滑块，其值显示所选 ToDo 项目的优先级，然后您希望可以使用滑块更改此值.

如果是这样，那么隐藏的输入真的是没有必要的。您真正需要的只是使“当前待办事项”成为反应式数据源。你已经有了你的“active_todo”会话变量。这是我在 JavaScript 中的建议（这完全是即时的且未经测试）：

```
var prioComp;

Template.todo_form.rendered = function() {
  $("#priority-slider").slider({
    range: 'min',
    value: 1,
    min: 1,
    max: 10
    start: function() { 
      prioComp.stop();
    },
    stop: function(event, ui) {  
      Session.get('active_todo').priority = ui.value;
      trackPriority();
    }
  });
  trackPriority();
};

function trackPriority () {
  prioComp = Deps.autorun(function() {
    $("#priority-slider").slider('value', Session.get('active_todo').priority);
  });    
} 
```

就像我说的，未经测试，所以这里可能有一两个错误，但至少看看代码并尝试理解我正在尝试什么。

# r - 运行 R 函数时如何为每个绘图暂停

> ID：15843243
> 
> 赞同：2
> 
> 时间：2013-04-05T20:45:55.737
> 
> 标签：r

首先，你需要`effects`和`lme4`包来运行下面的脚本

```
library(effects)
library(lme4) 
```

我有以下脚本

```
 devAskNewPage(ask=TRUE)

 fm8 <- lmer(Reaction ~ 1 + Days + (1 + Days|Subject), sleepstudy,
          REML = 0, verbose = TRUE)
 plot(effect("Day",fm8))
 qqmath(ranef(fm8)) 
```

如果我手动运行脚本，R 会`Click or ENTER for next page`在每个图表之后询问。但是当我运行以下功能时，

```
somefunc<-function () 
{
 devAskNewPage(ask=TRUE)
 fm8 <- lmer(Reaction ~ 1 + Days + (1 + Days|Subject), sleepstudy,
          REML = 0, verbose = TRUE)
 plot(effect("Day",fm8))
 qqmath(ranef(fm8))

} 
```

R 只要求`Click or ENTER for next page`最后一个情节。我怎样才能让它询问函数中的每个情节？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T21:20:57.160

如果将它们绘制在一起是可以接受的，你可以试试这个：

```
library(gridExtra)
somefunc<-function () 
{
 fm8 <- lmer(Reaction ~ 1 + Days + (1 + Days|Subject), sleepstudy,
          REML = 0, verbose = TRUE)
 p1 <- plot(effect("Day",fm8))
 p2 <- qqmath(ranef(fm8))$Subject
 class(p1) <- 'trellis'
 grid.arrange(p1,p2,nrow = 2)
} 
```

**效果**包与结果图的类混淆，混淆了，`grid.arrange`所以我不得不把它改回来。我觉得`grid.arrange`应该更聪明一点。

我只能推测出了什么问题`devAskNewPage`。`effect`绘图代码非常精细。它很可能以覆盖该设置的方式操纵图形设备。

**编辑**

我有点惊讶，但 Ben Bolker 的评论是正确的（即这是[R FAQ 7.22](http://cran.r-project.org/doc/FAQ/R-FAQ.html#Why-do-lattice_002ftrellis-graphics-not-work_003f)的版本/示例，“为什么格子/格子图形不起作用？”，因为`effects`包在内部调用`lattice::xyplot`）。这可以按照OP的要求工作：

```
somefunc<-function () 
{
 devAskNewPage(ask=TRUE)
 fm8 <- lmer(Reaction ~ 1 + Days + (1 + Days|Subject), sleepstudy,
          REML = 0, verbose = TRUE)
 p1 <- plot(effect("Day",fm8))
 p2 <- qqmath(ranef(fm8))$Subject
 print(p1)
 print(p2)
} 
```

# ms-access - FtpFindFirstFile 中的数据类型不匹配

> ID：15843246
> 
> 赞同：1
> 
> 时间：2013-04-05T20:46:08.027
> 
> 标签：ms-access, vba, ms-access-2007, wininet

我正在使用以下函数枚举一个 ftp 目录：

```
Public Sub EnumFiles(hConnect As Long)
Const cstrProcedure = "EnumFiles"
Dim pData As WIN32_FIND_DATA, hFind As Long, lRet As Long
Dim strSubCode As String
Dim sql As String
On Error GoTo HandleError

sql = "INSERT INTO tblIncomingFiles (AvailableFile) Values ('" & pData.cFileName & "')"
'get sub code to search with
strSubCode = GetSubscriberCode
'create a buffer
pData.cFileName = String(MAX_PATH, 0)
'find the first file
hFind = FtpFindFirstFile(hConnect, "*" & strSubCode & "*", pData, 0, 0)
'if there's no file, then exit sub
If hFind = 0 Then Exit Sub
'show the filename
Debug.Print Left(pData.cFileName, InStr(1, pData.cFileName, String(1, 0), vbBinaryCompare) - 1)
CurrentDb.Execute sql
Do
    'create a buffer
    pData.cFileName = String(MAX_PATH, 0)
    'find the next file
    'lRet = FtpFindNextFile(hFind, pData.cFileName)
    'if there's no next file, exit do
    If lRet = 0 Then Exit Do
    'show the filename
    'Me.Print Left(pData.cFileName, InStr(1, pData.cFileName, String(1, 0), vbBinaryCompare) - 1)
    CurrentDb.Execute sql
Loop
'close the search handle

HandleExit:

    Exit Sub

HandleError:
    ErrorHandle Err, Erl(), cstrModule & "." & cstrProcedure
    Resume HandleExit
End Sub 
```

我在这一行中不断收到数据类型不匹配（错误 13）：

```
hFind = FtpFindFirstFile(hConnect, "*" & strSubCode & "*", pData, 0, 0) 
```

它突出显示了 pData。我已经在函数的顶部将 pData 声明为 WIN32_FIND_DATA，并且 WIN32_FIND_DATA 在此模块中被声明为一个类型。

```
Public Declare Function FtpFindFirstFile Lib "wininet.dll" Alias "FtpFindFirstFileA" _
(ByVal hFtpSession As Long, ByVal sSearchFile As String, ByVal lpFindFileData As Long,   _
ByVal lFlags As Long, ByVal dwContext As Long) As Long

Private Type WIN32_FIND_DATA
dwFileAttributes As Long
ftCreationTime As FILETIME
ftLastAccessTime As FILETIME
ftLastWriteTime As FILETIME
nFileSizeHigh As Long
nFileSizeLow As Long
dwReserved0 As Long
dwReserved1 As Long
cFileName As String * MAX_PATH
cAlternate As String * 14
End Type 
```

知道为什么我可能会收到该错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:18:03.293

我在[这里](http://www.ex-designz.net/apidetail.asp?api_id=416)找到了一个工作示例，我的`FtpFindFirstFile`声明与您的略有不同。我的是

```
Private Declare Function FtpFindFirstFile Lib "wininet.dll" Alias "FtpFindFirstFileA" _
(ByVal hFtpSession As Long, ByVal lpszSearchFile As String, lpFindFileData As WIN32_FIND_DATA, _
ByVal dwFlags As Long, ByVal dwContent As Long) As Long 
```

# javascript - Chrome的IndexedDB错误“内部错误检查密钥存在”是什么意思？

> ID：15843255
> 
> 赞同：1
> 
> 时间：2013-04-05T20:46:57.490
> 
> 标签：javascript, google-chrome, indexeddb

我在看似任意的时间在一个相对较大的项目中间歇性地收到此错误消息（这让我怀疑某处存在竞争条件......），所以我很遗憾没有一个最小的例子来说明这个问题，因为我不明白根本原因。基本上，有时我会收到`event.target.webkitErrorMessage`“内部错误检查密钥存在”的错误信号。但我真的不明白这个错误消息是什么意思。

[谷歌搜索这个短语](https://www.google.com/search?q=%22Internal+error+checking+key+existence%22)只返回 7 个结果（尽管一旦谷歌和其他人发现这个问题会更多）。这些结果要么是 Chromium 源代码，要么是关于向 Chromium 添加更详细的错误消息的错误报告。由于我对 Chromium 的 IndexedDB 后端实现并不十分熟悉，我很难理解的一件事是这个错误消息在前端 JavaScript 代码中的含义。例如，什么样的 JavaScript 错误会导致该错误消息？

有问题的代码似乎在 Firefox，FWIW 中运行良好。

**下面的编辑**

我也很少将 null 作为游标返回，以响应对`openCursor`我知道是真正键的键的请求。这也是不一致的——它发生在不同的键上，而且很少发生。而且它也只在 Chrome 中。很奇怪。

而且我不确定它是否相关，但这一切都发生在一个大型事务`update`中，两个对象存储中有许多 s （这些是导致 null`openCursor`问题的那些）和`add`另一个对象存储中的许多 s （这似乎是源“内部错误检查密钥存在”错误）。我将尝试做一个最小的例子并进一步调查，但不管结果如何，我仍然想知道我原来的问题的答案，这就是“内部错误检查密钥存在”的具体含义。

**另一个编辑**

在玩了一些之后，我遇到了另一个奇怪的瞬态错误消息，“内部错误：执行 put/add 的后备存储错误”。我也很好奇这对我的 JavaScript 意味着什么。

此外，我确认所有这些问题都是 Chrome 26 的新问题（并且仍然存在于 Chrome 27 中）。降级到 Chrome 25 使所有这些问题都消失了......所以也许这一切都只是 Chrome 中的一些错误......

**再编辑一次**

所有这些问题似乎只发生在 Linux 中（我使用的是 Ubuntu 12.10）。在带有 Chrome 26 的 Windows XP VM 中，我无法重现任何这些错误。我[提交了一份错误报告](http://code.google.com/p/chromium/issues/detail?id=227313)，因为越来越清楚这一切都是由于一些错误造成的，但我不确定我是否已经将问题缩小到足以帮助找到解决方案的程度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T03:08:18.980

正如我在对问题的编辑中提到的，我提交[了一个错误报告](http://code.google.com/p/chromium/issues/detail?id=227313)。它似乎已在 Chrome 28 中得到解决。因此，任何在旧版 Chrome 中遇到此问题的人，只需升级到不稳定版本或等待几个月让 Chrome 28 稳定。如果有人在 Chrome 28 或更高版本中遇到此类错误，则很可能是一个错误。

# android - 支持多屏安卓

> ID：15843262
> 
> 赞同：0
> 
> 时间：2013-04-05T20:47:17.727
> 
> 标签：android, multiscreen

我知道已经有很多关于这个话题的问题，但我真的需要帮助。

首先，是的，我阅读并重新阅读了官方链接[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

我的问题如下。我正在创建一个游戏，只有横向视图。我只是在屏幕上显示一个小角色。

让我告诉你我从文档中了解的内容：

*   系统会自动尝试在以下文件夹中为您的屏幕找到最佳图像：drawable/mdpi；hdpi等
*   如果系统没有找到最佳图像，它将采用最接近的图像并重新调整其大小，从而产生伪影。因此，最好为所有 dp 提供图像

那么，当我在 drawable/mdpi 中只为我的游戏提供一个图像时，为什么它不会自动按照当前设备的屏幕比例重新调整它的大小？我在我的平板电脑和 S2 上尝试过，但结果不同。我希望图像在每个屏幕上都完全成比例。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T23:47:50.657

如果您只想为一种密度提供图形资源并让操作系统根据设备的密度调整大小，请将资源放在 drawable 文件夹中。Drawable 将是您的默认文件夹，而不是 drawable-mdpi。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T21:01:01.477

您需要在 hdpi、mdpi、ldpi、xhdpi 文件夹中添加不同的图像大小，它会根据设备密度重新调整大小。如果您希望它对于不同的屏幕尺寸（例如平板电脑）有所不同，您还可以在文件夹 drawable-xlarge、drawable-large、drawable-normal、drawable-small 中添加图像。

```
xlarge screens are at least 960dp x 720dp
large screens are at least 640dp x 480dp
normal screens are at least 470dp x 320dp
small screens are at least 426dp x 320dp 
```

您可以在您提供的文章中阅读有关比例和此文件夹的信息： [支持多个屏幕](http://developer.android.com/guide/practices/screens_support.html)。

您也可以使用 9-patch 图像，但您的图像边缘将根据屏幕尺寸进行切割。这是一篇关于它的文章： [9-patch image 的简单指南](http://radleymarx.com/blog/simple-guide-to-9-patch/)。还有一个很好的网站可以生成 9-patch 图像 - [Android Asset Studio](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/nine-patches.html)。

# php - Laravel 4 异常：NotFoundHttpException

> ID：15843265
> 
> 赞同：13
> 
> 时间：2013-04-05T20:47:23.580
> 
> 标签：php, symfony, laravel, laravel-4

我的 Laravel 4 应用程序的日志有时会显示`NotFoundHttpException`：

```
exception 'Symfony\Component\HttpKernel\Exception\NotFoundHttpException' in /var/www/laravel4/bootstrap/compiled.php:7420
Stack trace:
#0 /var/www/laravel4/bootstrap/compiled.php(7137): Illuminate\Routing\Router->handleRoutingException(Object(Symfony\Component\Routing\Exception\ResourceNotFoundException))
#1 /var/www/laravel4/bootstrap/compiled.php(7113): Illuminate\Routing\Router->findRoute(Object(Illuminate\Http\Request))
#2 /var/www/laravel4/bootstrap/compiled.php(958): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#3 /var/www/laravel4/bootstrap/compiled.php(946): Illuminate\Foundation\Application->dispatch(Object(Illuminate\Http\Request))
#4 /var/www/laravel4/public/index.php(49): Illuminate\Foundation\Application->run()
#5 {main} 
```

是什么原因造成的？堆栈跟踪没有显示我的代码中的任何内容。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-01-10T12:30:34.653

A`NotFoundHttpException`基本上只是您的应用程序中的 404。不幸的是，异常消息甚至没有告诉您触发异常的请求的 URL，这使得当您在日志中看到这些错误时很难理解它们。

要为您提供更多调试信息，请设置您自己的 404 处理程序。这是一个简单的处理程序，它将记录 URL（因此您知道触发错误的请求是什么）和用户代理（帮助您确定是谁或什么发出了请求）并返回一个视图和 404 代码：

```
App::missing(function($e) {
    $url = Request::fullUrl();
    $userAgent = Request::header('user-agent');
    Log::warning("404 for URL: $url requested by user agent: $userAgent");
    return Response::view('errors.not-found', array(), 404);
}); 
```

把它放进去`app/start/global.php`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-29T10:13:03.850

我遇到了这个问题，因为我已经大写了父目录的名称并且没有在 URL 中大写它。这就是我得到错误的原因。

我正在使用这个 url **localhost/laravel/todo2/public/foo** ，事实上，如果我输入的只是： **localhost/Laravel/todo2/public/** ，但如果我在 public/ 之后输入任何内容，它会给出那个错误。

如果我将它与 Laravel 大写的 **localhost/Laravel/todo2/public/foo 一起使用**

public/ 之后的路线会起作用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-15T08:48:56.593

我的项目在**C:\xampp\htdocs\ColorTex**

我输入了这个错误

`http://localhost/myproject/public/image`

代替

`http://localhost/MyProject/public/image`

我在 Windows 中，所以我认为它会忽略大写，但是......

小心点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-14T22:34:57.870

在不知道您的代码的情况下，很难确定是什么原因造成的。查看错误的堆栈跟踪，很明显路由器正在调度它，我猜它与后台作业本身无关，而是它调用的 API。

[在您的特定情况下，异常是在ResourceNotFoundException](https://symfony2-document.readthedocs.org/en/latest/components/routing.html)之后引发的，当没有为此类 URL 模式定义路由时会发生这种情况。

**可能出现的问题：**

如果后台作业执行您自己的 API`file_get_contents`或`curl`在您自己的 API 上，它可能正在调用一个不存在的路由，然后抛出该异常。

如果您无法控制正在下载的后台作业的 URL，它可能会尝试获取类似 的 URL或类似`127.0.0.1`的`localhost`任何内容。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-09T11:35:26.013

您可以从日志文件中过滤 404 (NotFoundHttpException) 错误。
**文件位置：app/start/global.php**

```
App::error(function(Exception $exception, $errorCode)
{
    $requestUrl = Request::fullUrl(); 
    $userAgent = Request::header('user-agent');

    if($errorCode != 404){
        Log::error('Exception', array(
            'errorCode' => $errorCode,
            'requestUrl' => $requestUrl,
            'userAgent' => $userAgent,
            'context' => $exception,
        ));     
    }

    return Response::view('error-page-path.error-404', array(), 404);
    // Here "error-404" is a blade view file in "error-page-path" directory
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-27T23:55:59.760

我收到此错误是因为我在表单中使用了 method="post" 而不是 method="POST"。

可能对某人有用。

# autohotkey - Autohotkey - #IfWinActivate 块 - 发送另一个密钥

> ID：15843270
> 
> 赞同：0
> 
> 时间：2013-04-05T20:47:44.307
> 
> 标签：autohotkey

在 Foxit Reader 中，我希望 Autohotkey 通过双击响应 Numpad5，然后调用 NumpadAdd。单独来看，两者都正常工作。但是第一个不会调用第二个。怎么了？谢谢！

```
SetTitleMatchMode 2 ; allow partial titles
#IfWinActive, Foxit
  Numpad5::
    Click 2
    Send {NumpadAdd} ; THIS DOESN'T REACT
  Return

  NumpadAdd::
    Send ^b ; create a bookmark
    ... do other stuff ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T09:44:05.223

怎么样...

```
SetTitleMatchMode 2 ; allow partial titles
#IfWinActive, Foxit
  Numpad5::
    Click 2
    GoSub, MyNumAdd
  Return

  MyNumAdd:
  NumpadAdd::
    Send ^b ; create a bookmark
    ... do other stuff ...

#IfWinActive 
```

# node.js - 尝试登录时将 req.user 设置为数据库中的第一个用户 // Express，Node.js

> ID：15843271
> 
> 赞同：0
> 
> 时间：2013-04-05T20:47:44.707
> 
> 标签：node.js, mongodb, express, mongoose, passport.js

我正在使用带有 Express 框架的 Node.js 开发应用程序，使用 Passport 进行用户身份验证，使用 MongoDB 进行存储。我无法弄清楚为什么无论哪个用户尝试登录，服务器都认为登录用户是数据库中的第一个用户，即第一个注册的用户。

当服务器接收到 /login 的 post 请求时，它会运行 passport.authenticate 来验证用户的凭据。从注销到控制台，很明显传递了正确的用户凭据，甚至会话 ID 也是正确的，但是无论在哪里设置 req.user，它都被设置为错误的用户。

这是控制台中发生的事情的日志，可以为您提供一些想法：

```
get /user
--req.user is { salt: '$2a$10$NgPcBpvUqGq32IoWvsChd.',
  hash: '$2a$10$NgPcBpvUqGq32IoWvsChd.SYva2e/aaPsfUcdN65aRm/D1oYJB3Ty',
  username: 'daniel',
  email: 'dan@dan.com',
  _id: 515decd49fc3204ca1000001,
  __v: 0,
  songs: [] }
--req.session is { cookie:
   { path: '/',
     _expires: null,
     originalMaxAge: null,
     httpOnly: true },
  passport: { user: '515decdc9fc3204ca1000002' },
  flash: {} } 
```

如您所见，用户 id 在 req.sessions 中是正确的，但在 req.user 中是不正确的。

完整代码可在此处获得： [https ://github.com/patrickmestabrook/song-swap](https://github.com/patrickmestabrook/song-swap)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T21:01:33.093

我猜这与序列化/反序列化过程有关。您是否尝试过在 serializeUser 方法中使用 _id.toString() ？

您是否确认在 **models.js**中返回了正确的用户？

```
schemas.User.static('authenticate', function( username, password, done) {
  console.log('schemas.User.static.authenticate');
  console.log('-username is ' + username);
  console.log('-password is ' + password);

  this.findOne({ username: username }, function( err, user ) {
    console.log('this.findOne inside authenticate, callback');
    console.log('user.username is ' + user.username);

    if ( err   ) return done( err );
    if ( !user ) return done( null, false );
    user.verifyPassword( password, function( err, passwordCorrect) {

      if ( err ) return done( err );
      if ( !passwordCorrect ) { return done( null, false ); }
      // return done( null, user );
      done ( null, user );
    })
  })
}) 
```

还要检查是否将正确的用户名和密码传递给 authenticate 方法

```
passport.use(new LocalStrategy(function( username, password, done ) {  
  console.log('username: ' + username)
  console.log('password: ' + password)
  models.User.authenticate( username, password, function( err, user) {
    // right now, this reports the WRONG USER DAMMIT
    console.log('models.User.authenticate callback');
    console.log('--username is ' + user.username);
    // return done( err, user );
    done( err, user);
  });

})); 
```

# focus - CSS 突出显示焦点

> ID：15843287
> 
> 赞同：2
> 
> 时间：2013-04-05T20:48:22.527
> 
> 标签：focus, css

我在输入字段上使用边框半径，当我选择该字段时，它会突出显示边框，就好像没有边框半径一样，即突出显示具有锐边的假想矩形，而不是真正的圆角。关于如何突出显示圆角矩形的任何提示？边界半径运行良好，但焦点不在圆角上。

```
<input class="filter" type="text" name = "Test1" value="Test1"> <!--HTML-->
.filter{border-radius:9px;} /*CSS*/ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T21:26:02.577

这是因为`outline`不尊重（无论出于何种原因）`border-radius`，为了模仿这一点，它最容易使用`box-shadow`：

```
.filter {
    padding: 0.4em;
    outline: none;
    border-radius: 9px;
}
.filter:focus {
    box-shadow: 0 0 0 2px #f90; /* or whatever colour you'd prefer */
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/5psLX/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-18T17:28:01.687

```
input[type=text], textarea {
 -webkit-transition: all 0.30s ease-in-out;
 -moz-transition: all 0.30s ease-in-out;
 -ms-transition: all 0.30s ease-in-out;
 -o-transition: all 0.30s ease-in-out;
 outline: none;
 padding: 3px 0px 3px 3px;
 margin: 5px 1px 3px 0px;
 border: 1px solid #DDDDDD;
}

input[type=text]:focus, textarea:focus {
  box-shadow: 0 0 5px rgba(81, 203, 238, 1);
  padding: 3px 0px 3px 3px;
  margin: 5px 1px 3px 0px;
  border: 1px solid rgba(81, 203, 238, 1);
} 
```

这就像一个魅力。你会得到很好的专注效果

# ios - Kobold2D anyTouchEndedThisFrame 没有被调用 - 我无法弄清楚原因？

> ID：15843290
> 
> 赞同：0
> 
> 时间：2013-04-05T20:48:41.017
> 
> 标签：ios, cocos2d-iphone, kobold2d

```
- (void)update:(ccTime)delta
{
    CCDirector* director = [CCDirector sharedDirector];

    if (director.currentPlatformIsIOS)
    {
        KKInput* input = [KKInput sharedInput];

        if ([KKInput sharedInput].anyTouchBeganThisFrame) {NSLog(@"anyTouchBeganThisFrame");}
        if ([KKInput sharedInput].anyTouchEndedThisFrame) {NSLog(@"anyTouchEndedThisFrame");}

        if ([input isAnyTouchOnNode:self.ballRed touchPhase:KKTouchPhaseBegan]){NSLog(@"isAnyTouchOnNode");}
     }
} 
```

anyTouchEndedThisFrame 没有被调用，即使是 isAnyTouchOnNode 也没有触发 TouchBegan 事件。如果我将其更改为 KKTouchPhaseStationary/KKTouchPhaseAny，则事件将完美地发生。

我最近从 COCOS2d 2.0 转移到了 Kobold2d。任何帮助都会很棒..!!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:05:34.223

实施 cctouchesBegan/moved 并结束，它工作。忽略 KKInput

# javascript - 在 D3.js 中向动画饼图添加新段

> ID：15843291
> 
> 赞同：2
> 
> 时间：2013-04-05T20:48:42.210
> 
> 标签：javascript, d3.js, visualization, pie-chart

我无法将段添加到 D3.js 饼图中。我知道我需要使用`.enter()`和`.append()`暂存新数据——但是当我将弧分组（标签需要）时，我不确定如何应用它。

这是我的更新功能：

```
var updateChart = function(dataset) {
  arcs.data(donut(dataset));
  arcs.transition()
    .duration(duration)
    .attrTween("d", arcTween);
  sliceLabel.data(donut(dataset));
  sliceLabel.transition()
    .duration(duration)
    .attr("transform", function(d) { return "translate(" + (arc.centroid(d)) + ")"; })
    .style("fill-opacity", function(d) {
      if (d.value === 0) { return 1e-6; }
      else { return 1; }
    });
}; 
```

我如何设置初始图表：

```
var arc = d3.svg.arc()
  .innerRadius(radius * .4)
  .outerRadius(radius);
var svg = d3.select("body")
  .append("svg")
  .append("svg")
  .attr("width", width)
  .attr("height", height);

var arc_grp = svg.append("g")
  .attr("class", "arcGrp")
  .attr("transform", "translate(" + (width / 2) + "," + (height / 2) + ")");
var label_group = svg.append("g")
  .attr("class", "lblGroup")
  .attr("transform", "translate(" + (width / 2) + "," + (height / 2) + ")");

var arcs = arc_grp.selectAll("path")
  .data(donut(data));
arcs.enter()
  .append("path")
  .attr("stroke", "white")
  .attr("stroke-width", 0.8)
  .attr("fill", function(d, i) { return color(i); })
  .attr("d", arc)
  .each(function(d) { return this.current = d; });

var sliceLabel = label_group.selectAll("text")
  .data(donut(data));
sliceLabel.enter()
  .append("text")
  .attr("class", "arcLabel")
  .attr("transform", function(d) { return "translate(" + (arc.centroid(d)) + ")"; })
  .attr("text-anchor", "middle")
  .style("fill-opacity", function(d) {
    if (d.value === 0) { return 1e-6; }
    else { return 1; }
  })
  .text(function(d) { return d.data.label; }); 
```

完整的jsfiddle：http: [//jsfiddle.net/kPM5L/](http://jsfiddle.net/kPM5L/)

将新数据添加到图表的干净方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T10:35:35.297

为了使过渡顺利进行，您还需要将最初使用的代码添加到更新函数中。[在这里](http://jsfiddle.net/kPM5L/1/)工作 jsfiddle 。

还有一些让你很开心的代码——这也是更新函数中需要的：

```
.enter()
.append("path")
.attr("stroke", "white")
.attr("stroke-width", 0.8)
.attr("fill", function(d, i) { return color(i); })
.attr("d", arc)
.each(function(d) { return this.current = d; });

.enter()
.append("text")
.attr("class", "arcLabel")
.attr("transform", function(d) { return "translate(" + (arc.centroid(d)) + ")"; })
.attr("text-anchor", "middle")
.style("fill-opacity", function(d) {
  if (d.value === 0) { return 1e-6; }
  else { return 1; }
})
.text(function(d) { return d.data.label; }); 
```

# c++ - 在 C++ 中比较两个大型数据列表的有效算法是什么？

> ID：15843296
> 
> 赞同：2
> 
> 时间：2013-04-05T20:48:57.830
> 
> 标签：c++, algorithm, search, compare

我有两个以纳秒为单位的时间列表。每个列表可以有 10^12 个或更多元素。我当前的实现是获取两个列表的一个子集，使用 for 循环比较该子集中的时间并输出相关时间，然后获取另一个子集。对于每个子集比较，这大约运行。(m*n) 其中 m 是列表 1 子集的大小，n 是列表 2 子集的大小，这显然是一个糟糕的算法。

我还有一个比我的数据集的总时间更小的时钟，所以在某些时候需要关注数据中的翻转。

清单 1 有某些事件，清单 2 有次要事件。我想知道次要事件是否在主要事件的某个时间内发生。还有很多噪音，所以我需要创建一个相关时间的直方图，并寻找一个有统计意义的信号的时间。

我想知道是否有任何开源库中可以在 C++ 中使用的已知有效算法，或者我可以实现的有效算法来搜索两个列表的时间，并输出落在窗口内的项目.

下面是蛮力函数的一个例子：

```
int correlate_lists( int window )
{
  for( int i = 0 ; i < list1.size() ; i++ )
  {  
    for( int j = 0 ; j < list2.size() ; j++ )
    {
      if( list2[j].time() > list1[i].time() &&  (list2[j].time() - list1[j].time()) < window )
      {
        printf("Time: %d\n, list2[j].time() - list[1].time() );
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:03:40.340

如果您的两个列表按时间排序，您可以有效地浏览列表：

```
 for( int i = 0, j = 0 ; i < list1.size() ; ++i )
  {  
    while( j < list2.size() && list2[j].time() <= list1[i].time() ) 
    {
      ++j;
    }

    int k = j;

    while( k < list2.size() && list2[k].time() < list1[i].time() + window) 
    {
      printf("Time: %d\n, list2[k].time() - list1[i].time() );
      ++k;
    }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T21:23:02.903

如果列表已排序，那么您肯定可以使用二进制搜索来查找“窗口”位置吗？

# c# - 对象引用未设置为具有类的对象的实例

> ID：15843300
> 
> 赞同：0
> 
> 时间：2013-04-05T20:49:02.270
> 
> 标签：c#, class

我有一种情况，我在一个类中定义了一个类，类似于以下内容：

```
 public partial class ProdData 
    {
    private string prodID;
    private string Description;

    ...and so on until I get to

    private ProdDataChildren[] childItemsField; 
    } 
```

ProdDataChildren 是它自己的类，我用它来识别可能属于父产品的子产品，因此是数组。

在我的程序的主要部分，我有一个读取记录的循环，有点像：

```
 while (myReader.Read())
        {
            ProdData ProductDataIn = new ProdData();
            ProductDataIn.ID = "values assigned here"; 
```

直到我到达我想分配一个孩子的地步，这就是我收到错误“对象引用未设置为对象的实例”的地方，使用以下语句

```
 ProductDataIn.ChildItems[i].ProdID = "string variable here";
        } 
```

我相信错误的原因与当前的 ChildItems 设置为 null 有关，但是我应该如何为其分配值？我是否需要以某种方式实例化和实例化子项，我将如何做到这一点？

任何帮助将不胜感激，我意识到这对某些人来说可能是没有道理的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:52:43.313

首先，您必须在将任何内容分配给该集合之前初始化您的字段。我建议使用`List`而不是`Array`：

```
public partial class ProdData 
{

...and so on until I get to

private List<ProdDataChildren> childItemsField = new List<ProdDataChildren>(); 
} 
```

有了`List`您，您将能够执行以下操作：

```
ProductDataIn.ChildItems.Add(new ProdDataChildren() { ProdID = "string variable here" }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T20:53:32.753

您只声明了变量。您没有创建数组的新实例，因此您试图访问尚未创建的对象。

# android - 投影矩阵与否？(OpenGL ES 2.0)

> ID：15843303
> 
> 赞同：-1
> 
> 时间：2013-04-05T20:49:08.593
> 
> 标签：android, matrix, rotation, opengl-es-2.0, projection

是否有必要使用这样的投影矩阵：

```
Matrix.frustumM(mProjMatrix, 0, -ratio, ratio, -1, 1, 3, 7);

and

Matrix.setLookAtM(mVMatrix, 0, 0, 0, 3, 0f, 0f, 0f, 0f, 1.0f, 0.0f);

// Calculate the projection and view transformation and store results in mMVPMatrix
Matrix.multiplyMM(mMVPMatrix, 0, mProjMatrix, 0, mVMatrix, 0); 
```

我在围绕 z 轴进行简单的 2d（精灵）旋转时遇到了无穷无尽的麻烦。

到目前为止，我取得的最大成功是操纵旋转矩阵（旋转和平移）并将其直接传递给顶点着色器。

它并不完美，并带有一些剪切/倾斜/扭曲，但至少它允许我移动四边形的“枢轴”/中心点。如果我把上面的行放在整个事情上，我会得到各种奇怪的结果。

```
What is the actual purpose of the lines above (I have read the android docs but I dont understand them) and are they necessary?  Do people write OpenGl apps without them? 
```

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T00:25:17.140

OpenGL 是一个 C API，但许多框架会将其函数包装到其他函数中以使生活更轻松。例如，在 OpenGL ES 2.0 中，您必须创建矩阵并将其传递给 OpenGL。但是 OpenGL 并没有为您提供任何工具来实际构建和计算这些矩阵。这是存在许多其他库为您创建此矩阵的地方，然后您将这些构造的矩阵传递给 OpenGL——或者在进行计算之后，该函数很可能会为您将矩阵传递给 OpenGL。只是取决于图书馆。

您可以轻松地不使用这些框架而自己动手，这是学习 3D 图形数学的好方法——而数学确实是该领域一切的关键。

我确定您可以直接访问 Android 中的 OpenGL API，但您选择使用可能是 Android 本身提供的库（类似于 Apple 提供 GLKit 的方式，这是其 iOS 框架的最新补充）。但这并不意味着您*必须*使用该库，但*如果您知道该库在做什么*，它可能会提供更快的开发。

在这种情况下，上面的三个函数似乎是非常通用的矩阵/图形实用程序。您有一个平截头体函数，可以在 3D 空间中设置投影。你有一个lookAt 函数，它决定了相机的视图是什么——它在哪里看，当它在哪里看时，相机在哪里。

而且你有一个矩阵乘法函数，因为最后所有矩阵必须在它们应用于你的 3D 对象的顶点之前进行组合。

重要的是要了解典型的模型视图矩阵将包括相机方向/位置，但它还将包括对象的旋转和缩放。因此，仅发送基于相机的模型视图（来自 LookAt）是不够的，除非您希望您的对象保持在屏幕的中心，不旋转。

如果您要扩展矩阵乘法中的所有数学运算，典型设置可能如下所示：

Frustum * 相机 * 平移 * 旋转 * 顶点

中间的三个，Camera，Translation，Rotation，通常被组合到你的模型视图中，所以将它们相乘以获得那个特定的矩阵，然后将模型视图乘以你的平截头体投影矩阵，整个结果可以应用于你的顶点。

您必须非常小心矩阵乘法的顺序。将平截头体乘以模型视图与将模型视图乘以平截头体不同。

现在您提到了倾斜、扭曲等。造成这种情况的一个可能原因是您的视口。我确定您的 API 中的某处是设置视口高度和宽度的选项，通常是屏幕的高度和宽度。如果它们设置不同，您将看到不正确的纵横比和一些倾斜。只是一种可能的解释。或者可能是您的截锥体参数不太正确，因为这肯定也会影响偏斜之类的事情。

# cloud-foundry - CloudFoundry 错误 503 来自服务网关的意外响应

> ID：15843307
> 
> 赞同：0
> 
> 时间：2013-04-05T20:49:18.660
> 
> 标签：cloud-foundry

我已经使用 CloudFoundry 4 个月了，通过 Wavemaker 或 VMC 部署我的应用程序。今天，当我尝试更新我的应用程序时，我开始收到以下错误：

错误 502 错误网关 错误网关

当我尝试使用 VMC 隧道连接到我的服务以检查我收到的数据库的状态时

CFoundry::ServiceGatewayError: 503: 来自服务网关的意外响应

我可以删除 Postgres 服务并创建一个新服务，但这样我就会丢失我的数据。我确实有备份，但是 CloudFoundry 副本上的副本有很多更新，因此我不愿意删除它。我一直在尝试对应用程序进行更改，以使我能够轻松地直接从网页复制数据，因为从 CloudFoundry 的数据库备份/转储没有好的解决方案。

所以我被卡住了 - 是否可以强制重启服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:51:10.703

当这种情况发生时，通常是由于 Caldecott 的问题，只需将其删除，然后重试隧道到服务；

vmc 删除 caldecott

vmc 隧道 my_mysql_service

# java - Java 在文件中捕获 telnet 输出

> ID：15843310
> 
> 赞同：2
> 
> 时间：2013-04-05T20:49:49.843
> 
> 标签：java, file, telnet, output

我正在尝试远程登录到服务器，运行命令并将该命令的输出放入文件中。我可以得到文件中的命令，但不能得到这个命令的结果。我在控制台上也看不到我的输出，所以我假设它运行但我不确定。有人知道吗？

```
public final static void main(String[] args) throws IOException, InterruptedException
{
    FileOutputStream fout = null;

    try
    {
        fout = new FileOutputStream ("spyfile.log");
    }
    catch (IOException e)
    {
        System.err.println(
            "Exception while opening the spy file: "
            + e.getMessage());
    }

    TelnetClient telnet;

    telnet = new TelnetClient();

    try
    {

        telnet.connect("myserver", 23);
    }
    catch (IOException e)
    {
        e.printStackTrace();
        System.exit(1);
    }

    telnet.registerSpyStream(fout);
    PrintStream out = new PrintStream( telnet.getOutputStream() );
    out.println( "mycommand" );     

    try
    {
        telnet.disconnect();
    }
    catch (IOException e)
    {
        e.printStackTrace();
        System.exit(1);
    }

   fout.close();
    System.exit(0);  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T08:56:49.813

我不确定 TelneClient 是什么，如果这是[Commons Net](http://commons.apache.org/proper/commons-net/)类，那么您缺少实际读取 telnet 会话期间交换的数据的部分。请运行[这个例子](http://www.java2s.com/Code/Java/Network-Protocol/ExampleofuseofTelnetClient.htm)，看看它是如何工作的，一旦你得到它，你就可以根据你的需要进行裁剪。

# jquery-ui - 是否有托管 jqueryui 缩小库

> ID：15843324
> 
> 赞同：-3
> 
> 时间：2013-04-05T20:50:53.627
> 
> 标签：jquery-ui

脚本托管网站中是否有 jQueryUI 的缩小版本？

我想在我的网站中使用 jQueryUI，它大约 425KB，由于互联网速度对我的用户来说是一个问题，我想使用它的缩小版本。未压缩版本托管在 jquery.com 上：

[http://code.jquery.com/ui/1.10.2/jquery-ui.js](http://code.jquery.com/ui/1.10.2/jquery-ui.js)

但我需要缩小版。而且我不想在我自己的网站上托管它。因为我压缩了它，它仍然是大约 280KB。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T20:53:11.890

它在谷歌的托管库中：[https ://developers.google.com/speed/libraries/devguide#jquery-ui](https://developers.google.com/speed/libraries/devguide#jquery-ui)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T20:54:08.200

你看过谷歌的托管库吗？ [https://developers.google.com/speed/libraries/devguide](https://developers.google.com/speed/libraries/devguide)

这是 JqueryUI 的当前版本：http: [//ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.min.js](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.min.js)

# java - 我可以在 api 16 上运行 api 10 android 应用程序吗？有什么方法可以做到这一点？

> ID：15843327
> 
> 赞同：-1
> 
> 时间：2013-04-05T20:51:21.880
> 
> 标签：java, android, api, sdk

我在 api 10 上开发了一个应用程序，现在想知道 Android 的 API 是否与其较新版本兼容？即如果我安装了 Android API 16，我可以使用在 api 10 平台上制作的应用程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:56:30.737

所有 Android API 基本上都向后兼容，因此您的应用程序应该可以正常运行。

但是，您应该查看新版本的[亮点和变更日志](http://developer.android.com/about/index.html)，以确保您的应用使用的 API 没有以有害的方式被修改。

# javascript - 在 GridView 的分页回调之后执行 JavaScript

> ID：15843329
> 
> 赞同：3
> 
> 时间：2013-04-05T20:51:25.143
> 
> 标签：javascript, asp.net, gridview, callback

我有一个启用了 EnableSortingAndPagingCallbacks 的 GridView。当用户点击切换页面时，会执行回调并更新 GridView。发生这种情况后，我需要立即运行 JavaScript 函数，以便可以在新的数据页面上执行一些客户端操作。我怎样才能做到这一点？

我发现最接近我的问题的是：[如何在更新面板回发后执行 javascript 回调？](https://stackoverflow.com/questions/1152946/how-to-have-a-javascript-callback-executed-after-an-update-panel-postback). 但是，在这里使用 pageLoad() 函数将不起作用，因为 pageLoad() 在 GridView 回调之后似乎没有被触发。

我需要使用 IE7 进行这项工作，否则我将使用 DOMSubtreeModified 事件侦听器。

不会触发 GridView1_PageIndexChanging 和 pageLoad 的示例代码。

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="test_script.aspx.cs" Inherits="test_script" %>

<%@ Register assembly="AjaxControlToolkit" namespace="AjaxControlToolkit" tagprefix="asp" %>

<form id="form1" runat="server">
    <asp:ToolkitScriptManager ID="ScriptManager1" runat="server" ScriptMode="Release" />
    <asp:GridView ID="GridView1" runat="server" AllowPaging="true" 
        EnableSortingAndPagingCallbacks="true" DataSourceID="SqlDataSource1" 
        OnPageIndexChanging="GridView1_PageIndexChanging" />
</form>
<script type="text/javascript">
    function pageLoad(sender, args) {
        alert('pageLoad');
    }
</script> 
```

后面的代码：

```
public partial class test_script : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void GridView1_PageIndexChanging(object sender, GridViewPageEventArgs e)
    {
        // This doesn't fire when EnableSortingAndPagingCallbacks is set to true
    }
} 
```

在上面的代码中，pageLoad() 在页面首次加载时触发，但在 GridView 分页后不会触发。在后面的代码中，Page_Load 在 GridView 被分页但 GridView1_PageIndexChanging() 没有被分页时触发。

如果我将 EnableSortingAndPagingCallbacks 更改为 false，所有函数都会按照您对每个 GridView 页面更改的预期触发。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T22:18:36.683

这应该有效：

```
 Protected Sub GridView1_PageIndexChanging(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewPageEventArgs) Handles GridView1.PageIndexChanging
        Me.GridView1.PageIndex = e.NewPageIndex
        BindGridview() 'This is what binds the control
        If Not ClientScript.IsClientScriptBlockRegistered(Me.GetType(), "myScript") Then
            ScriptManager.RegisterClientScriptBlock(Me.GridView1, Me.GetType(), "myScript", "alert('Done with paging');", True)
        End If
    End Sub 
```

由于您没有指定语言，因此我使用了在我的视觉工作室中打开的第一个语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-08T14:24:34.483

如果您想在 gridview 功能之后运行任何客户端，您可以使用`<ClientSettings></ClientSettings>` for you case i`ClientEvents-OnDataBinding="YoueFunctionFromScript()"`

# google-app-engine - 为什么 chrome 不缓存谷歌应用引擎 blobstore

> ID：15843333
> 
> 赞同：3
> 
> 时间：2013-04-05T20:51:31.757
> 
> 标签：google-app-engine, http, browser-cache, blobstore

我正在使用 blobstore 来提供嵌入在 HTML5 音频元素中的音频文件。因为我有一个 blobkey 作为 url 的一部分，所以我可以假设对于任何给定的 url，它的内容永远不会改变。这看起来像是一个完美的缓存设置。

昨天我实施了一个似乎有效的解决方案。至少我记得它有效;)。不幸的是，今天我发现它不适用于 Chrome 和生产服务器。它与 Internet Explorer 和 Firefox 完美配合。它甚至可以与 Chrome 和开发服务器一起使用——我使用的是 1.7.6 版。我的解决方案使用 Cache-Control 标头，但似乎只有 Firefox 使用它。此外，我添加了一个 ETag 标头。当我发现 If-None-Match 请求标头具有相同的值时，我返回 304 代码。这似乎适用于 Internet Explorer。它也适用于 Chrome 和开发服务器。我记得它昨天在 Chrome 和生产环境中工作过，但我不完全确定。无论如何，我遇到的问题是为什么 Chrome 会忽略这两种缓存机制。

而现在很多细节。

## 火狐

初始请求标头：

```
Host: eduzabawy.appspot.com
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:20.0) Gecko/20100101 Firefox/20.0
Accept: audio/webm,audio/ogg,audio/wav,audio/*;q=0.9,application/ogg;q=0.7,video/*;q=0.6,*/*;q=0.5
Accept-Language: pl,en-us;q=0.7,en;q=0.3
Range: bytes=0-
Referer: http://eduzabawy.appspot.com/dziecko/
Cookie: children="jEDor1B8VRDRJreWmUVlUQ\075\075"; session=eyJfc2lkIjoiWk91QmlsOEJlTEd4QVFuYVFiYkpsTyJ9|1365190508|81d81772f6f409dd57ad43a9f447f92d1b56d29e
Connection: keep-alive 
```

初始响应标头：

```
HTTP/1.1 206 Partial Content
Cache-Control: public max-age=100000000
Content-Range: bytes 0-37249/37250
Content-Type: audio/ogg
Date: Fri, 05 Apr 2013 19:45:47 GMT
Etag: blobstore
Server: Google Frontend
X-Firefox-Spdy: 3 
```

在随后的加载中，Firefox 似乎甚至没有尝试获取文件。这就是我认为它应该工作的方式。

## IE浏览器

初始请求标头：

```
Accept: */*
User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)
Referer: http://eduzabawy.appspot.com/dziecko/
Accept-Language: pl-PL
Accept-Encoding: gzip, deflate
Host: eduzabawy.appspot.com
Connection: Keep-Alive
Cookie: children="WyzUQwHEzwX6qnjfn21KEw\075\075"; session=eyJfc2lkIjoia2VOd0llR0hvRHU1cUN0cE1QSWRpWCJ9|1365192921|f2279f82b21947c4d064dbf44a5ce9e1bd95cc0d 
```

初始响应标头：

```
HTTP/1.1 200 OK
Cache-Control: public max-age=100000000
ETag: blobstore
Content-Type: audio/mpeg
Date: Fri, 05 Apr 2013 20:15:23 GMT
Server: Google Frontend
Content-Length: 4637 
```

后续请求标头：

```
Accept: */*
User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)
Referer: http://eduzabawy.appspot.com/dziecko/
Accept-Language: pl-PL
Accept-Encoding: gzip, deflate
Host: eduzabawy.appspot.com
If-None-Match: blobstore
Connection: Keep-Alive
Cookie: children="WyzUQwHEzwX6qnjfn21KEw\075\075"; session=eyJfc2lkIjoia2VOd0llR0hvRHU1cUN0cE1QSWRpWCJ9|1365192921|f2279f82b21947c4d064dbf44a5ce9e1bd95cc0d 
```

后续响应标头：

```
HTTP/1.1 304 Not Modified
ETag: blobstore
Content-Type: audio/mpeg
Content-Length: 4637 
```

## Chrome + 开发服务器

初始请求标头：

```
Host: localhost:8080
Connection: keep-alive
Accept-Encoding: identity;q=1, *;q=0
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.43 Safari/537.31
Accept: */*
Referer: http://localhost:8080/dziecko/
Accept-Language: pl-PL,pl;q=0.8,en-US;q=0.6,en;q=0.4
Accept-Charset: ISO-8859-2,utf-8;q=0.7,*;q=0.3
Cookie: children="xYNsqzfdtZ-2Z764lFSzk1Ed8-g1QoNlcaexsD79gSY\075"; session=eyJfc2lkIjoiTE9CZDc0SHJENHF4OWJua1J4S3dTQSJ9|1365192253|37815772acab0bf44a0c501ea0fd0dc7c617dd09
Range: bytes=0- 
```

初始响应标头：

```
HTTP/1.1 206 Partial Content
etag: blobstore
cache-control: public max-age=100000000
content-type: audio/mpeg
Content-Range: bytes 0-4636/4637
Content-Length: 4637
Server: Development/2.0
Date: Fri, 05 Apr 2013 20:32:19 GMT 
```

后续请求标头：

```
Host: localhost:8080
Connection: keep-alive
Accept-Encoding: identity;q=1, *;q=0
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.43 Safari/537.31
Accept: */*
Referer: http://localhost:8080/dziecko/
Accept-Language: pl-PL,pl;q=0.8,en-US;q=0.6,en;q=0.4
Accept-Charset: ISO-8859-2,utf-8;q=0.7,*;q=0.3
Cookie: children="xYNsqzfdtZ-2Z764lFSzk1Ed8-g1QoNlcaexsD79gSY\075"; session=eyJfc2lkIjoiTE9CZDc0SHJENHF4OWJua1J4S3dTQSJ9|1365192253|37815772acab0bf44a0c501ea0fd0dc7c617dd09
Range: bytes=0-4636
If-None-Match: blobstore 
```

后续响应标头：

```
HTTP/1.1 304 Not Modified
Content-Type: text/html
Server: Development/2.0
Date: Fri, 05 Apr 2013 20:33:08 GMT 
```

## Chrome + 生产服务器

初始请求标头：

```
Host: eduzabawy.appspot.com
Connection: keep-alive
Accept-Encoding: identity;q=1, *;q=0
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.43 Safari/537.31
Accept: */*
Referer: http://eduzabawy.appspot.com/dziecko/
Accept-Language: pl-PL,pl;q=0.8,en-US;q=0.6,en;q=0.4
Accept-Charset: ISO-8859-2,utf-8;q=0.7,*;q=0.3
Cookie: children="sU9aqnqEf67eZFpS7BKSMw\075\075"; session=eyJfc2lkIjoieFlGWlJLMnRwSHJuOVFCb1haTnJLUCJ9|1365194193|2a13cd9eb7aceeb40c43bd82a763d893436d9f1f
Range: bytes=0- 
```

初始响应标头：

```
HTTP/1.1 206 Partial Content
Cache-Control: public max-age=100000000
ETag: blobstore
Content-Type: audio/mpeg
Content-Range: bytes 0-4636/4637
Date: Fri, 05 Apr 2013 20:36:35 GMT
Server: Google Frontend
Transfer-Encoding: chunked 
```

随后的请求和响应与初始相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T08:31:43.467

你的 max-age 似乎太长了，超过 3 年......我从某个地方读到你应该在 GAE 中设置的最大值不超过 1 年。

无论如何，还有一个你应该尝试设置的标头（Pragma：Public），它对我有用（虽然我正在从 blobstore 缓存图像，这里有几行来自我的源代码）：

```
httpResponse.Header().Set("Cache-Control", "public, max-age=600")
httpResponse.Header().Set("Pragma", "Public")
blobstore.Send(httpResponse, project.ImageBlobKey) 
```

顺便说一句，上面的方法也会导致谷歌从边缘缓存中传递你的文件，这确实大大加快了静态资源的速度！

# javascript - 使用 Javascript 在 Windows 8 应用程序中进行 Twitter/Facebook 授权

> ID：15843337
> 
> 赞同：1
> 
> 时间：2013-04-05T20:51:44.473
> 
> 标签：javascript, html, windows-runtime, twitter-oauth, facebook-oauth

有没有办法在基于 Javascript 和 HTML5 的 Windows 8 应用程序中使用 Facebook/Twitter 登录？

授权页面不允许自己嵌入，`iframe`我无法从 javascript 代码导航最顶层窗口到授权 url（“url 因为 url 启动另一个应用程序。只有直接的用户交互才能启动另一个应用程序。Visual Studio 当前未附加到支持脚本诊断的脚本调试目标”错误）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T02:11:03.540

一位微软工程师的回复，非常感谢他：

有几种方法可以做到这一点。您可以自己完成工作以获取令牌。例如 ...

[https://github.com/cauld/winjs-oauth-for-twitter](https://github.com/cauld/winjs-oauth-for-twitter)

... 和 ...

[http://social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/1b17ec50-00af-48ff-980c-5bf58145f2a9](http://social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/1b17ec50-00af-48ff-980c-5bf58145f2a9)

或者您可以使用 WebAuthenticationBroker ...

[http://msdn.microsoft.com/en-us/library/windows/apps/windows.security.authentication.web.webauthenticationbroker.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.security.authentication.web.webauthenticationbroker.aspx)

[http://code.msdn.microsoft.com/windowsapps/Web-Authentication-d0485122](http://code.msdn.microsoft.com/windowsapps/Web-Authentication-d0485122)

# android - http 请求不适用于 android 版本 4

> ID：15843338
> 
> 赞同：0
> 
> 时间：2013-04-05T20:51:55.963
> 
> 标签：android, http

我用 android 版本 2 运行我的应用程序，它工作正常，但是当我用版本 4 运行它时，它出现了一个异常`request.setURI(new URI(url));`

```
public String getXmlFromUrl(String url) {
    String xml = null;

    try {
        // defaultHttpClient
        DefaultHttpClient client = new DefaultHttpClient();
        HttpGet request = new HttpGet();
        try {
            request.setURI(new URI(url));
        } catch (URISyntaxException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            System.out.print("http\n");
        }
        HttpResponse httpResponse = client.execute(request);
        HttpEntity httpEntity = httpResponse.getEntity();
        xml = EntityUtils.toString(httpEntity);

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    // return XML
    return xml;
} 
```

我不明白是什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:54:39.010

试试下面的代码。你必须使用[SSLSocketFactory](http://developer.android.com/reference/org/apache/http/conn/ssl/SSLSocketFactory.html)

把它放在 setContentView 之后

```
int SDK_INT = android.os.Build.VERSION.SDK_INT;

} if (SDK_INT>8){

StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();

StrictMode.setThreadPolicy(policy);

} 
```

HttpClient httpclient = getNewHttpClient();

.... // HttpGet 请求 = new HttpGet(); ..

```
public HttpClient getNewHttpClient() {
        try {
            KeyStore trustStore = KeyStore.getInstance(KeyStore
                    .getDefaultType());
            trustStore.load(null, null);

            SSLSocketFactory sf = new MySSLSocketFactory(trustStore);
            sf.setHostnameVerifier(SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);

            HttpParams params = new BasicHttpParams();
            HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);
            HttpProtocolParams.setContentCharset(params, HTTP.UTF_8);

            SchemeRegistry registry = new SchemeRegistry();
            registry.register(new Scheme("http", PlainSocketFactory
                    .getSocketFactory(), 80));
            registry.register(new Scheme("https", sf, 443));

            ClientConnectionManager ccm = new ThreadSafeClientConnManager(
                    params, registry);

            return new DefaultHttpClient(ccm, params);
        } catch (Exception e) {
            return new DefaultHttpClient();
        }
    } 
```

MySSLSocketFactory.java

```
public class MySSLSocketFactory extends SSLSocketFactory {
    SSLContext sslContext = SSLContext.getInstance("TLS");

public MySSLSocketFactory(KeyStore truststore) throws NoSuchAlgorithmException, KeyManagementException, KeyStoreException, UnrecoverableKeyException {
    super(truststore);

    TrustManager tm = new X509TrustManager() {
        public void checkClientTrusted(X509Certificate[] chain, String authType) throws CertificateException {
        }

        public void checkServerTrusted(X509Certificate[] chain, String authType) throws CertificateException {
        }

        public X509Certificate[] getAcceptedIssuers() {
            return null;
        }
    };

    sslContext.init(null, new TrustManager[] { tm }, null);
}

@Override
public Socket createSocket(Socket socket, String host, int port, boolean autoClose) throws IOException, UnknownHostException {
    return sslContext.getSocketFactory().createSocket(socket, host, port, autoClose);
}

@Override
public Socket createSocket() throws IOException {
    return sslContext.getSocketFactory().createSocket();
}

} 
```

# python - matplotlib 文本未剪裁

> ID：15843340
> 
> 赞同：5
> 
> 时间：2013-04-05T20:52:13.740
> 
> 标签：python, matplotlib

使用 绘制文本`matplotlib`，`text()`然后以交互方式平移图像时，生成的绘制文本不会被剪切到数据窗口。这与使用绘图数据或绘制文本的`annotate()`工作方式相反，并且不像`text()`使用数据窗口坐标那样具有直观意义。

```
import matplotlib.pyplot as plt

plt.ion()
fig = plt.figure()
ax = fig.add_subplot(111)

ax.text(0.5, 0.2, 'text')
ax.annotate('anno', (0.5, 0.3))

plt.draw() 
```

以交互方式将文本从数据窗口的四面移出。当`annotate()`参考点穿过数据窗口边界时，绘制的“anno”会被剪裁，而`text()`绘制的“文本”则不会。

我不确定这种行为是功能还是错误，但肯定看起来像后者，因为此文本会干扰轴标签等。将 1.2.1 与 TkAgg 后端一起使用。

另一个问题是如何正确剪辑所有文本以防止超出数据窗口，而不仅仅是在参考坐标出现时。

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-05T21:51:39.487

这种行为可以由 kwarg 控制`clip_on`：

```
import matplotlib.pyplot as plt

plt.ion()
fig = plt.figure()
ax = fig.add_subplot(111)

txt = ax.text(0.5, 0.2, 'text')
anno = ax.annotate('anno', (0.5, 0.3))
txt_clip = ax.text(0.5, 0.5, 'text-clip', clip_on=True)

plt.draw() 
```

`axes.text` [文档](http://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes.text)。支持和反对将文本剪切到数据区域都有争论。

mpl 中有一个[错误](https://github.com/matplotlib/matplotlib/pull/1885)`txt.set_clip_on(True)`，导致无法按预期工作。

# windows - 使用 MakeCab.exe & .ddf 文件（即使用指令文件）如何指定目标 cab 文件名？

> ID：15843347
> 
> 赞同：5
> 
> 时间：2013-04-05T20:53:00.377
> 
> 标签：windows, compression, cmd, cab

我决定根据`makecab.exe`我的要求在我的应用程序中创建 cab 文件。 [http://msdn.microsoft.com/en-us/library/bb417343.aspx#microsoftmakecabusersguide](http://msdn.microsoft.com/en-us/library/bb417343.aspx#microsoftmakecabusersguide)

而且我需要根据给定的路径存储文件，无论是相对路径还是绝对路径，并在保留原始路径的情况下提取文件。所以我将为此使用指令文件并将该输入提供给 makecab 命令。

[windows 命令提示符 zip/compress 目录](https://stackoverflow.com/questions/3266378/windows-command-promt-zip-compress-directory/3274497#3274497)

但是 cab 输出存储在文件夹 Disk1\1.cab 中。

**请帮助我了解如何将所需的 cab 文件名指定为目标（我将从用户输入中获取 cab 文件名）？**

**此外，是否可以在第二次运行 makecab 命令时将更多文件附加到现有 cab 文件？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T07:38:41.800

终于找到了解决办法。

您可以在指令文件中设置以下两个变量，这些变量将识别 cab 文件的目标路径和名称：

`DiskDirectoryTemplate=template`[输出目录名模板；* 替换为磁盘号]
`CabinetNameTemplate=template` [机柜文件名模板；* 替换为柜号]

[Microsoft MakeCAB 用户指南中的](http://msdn.microsoft.com/en-us/library/bb417343.aspx#microsoftmakecabusersguide "Microsoft MakeCAB 用户指南")描述

> **DiskDirectoryTemplate** =模板
> 
> 设置输出目录名称模板。为布局的每个磁盘创建一个目录。
> 
> 默认值： .Set DiskDirectoryTemplate=DISK* ; 默认为 DISK1、DISK2 等。
> 
> 当 MakeCAB 处理一个指令文件时，它将创建一个或多个磁盘“映像”。然而，MakeCAB 并没有使用某种特定的磁盘格式，而是简单地为每个磁盘创建一个子目录，并将每个磁盘的文件放在适当的目录中。如果`*`此变量中存在 a，则将其替换为磁盘号。如果未`*`指定，则所有文件都放置在此变量指定的单个目录中。
> 
> 仅当磁盘 n 不存在变量 DiskDirectoryn 时才使用此变量。
> 
> 例子：
> 
> ```
> .Set DiskDirectoryTemplate=C:\EXCEL6\DISK*  ; Put files in separate dirs
> .Set DiskDirectoryTemplate=C:\EXCEL6        ; Put all files in C:\EXCEL6
> .Set DiskDirectoryTemplate=                 ; Put all files in current dir 
> ```
> 
> **橱柜名称**模板 = 模板
> 
> 设置cabinet 文件名模板。
> 
> 默认：`.Set CabinetNameTemplate=*.CAB ; 1.CAB, 2.CAB, ...`
> 
> 该模板用于构建每个文件柜的文件名。此`*` 模板中的 替换为机柜编号（1、2 等）。仅当机柜 n 不存在变量 CabinetNamen 时才使用此变量。
> 
> **注意：确保扩展的文件柜名称不超过文件系统的限制**！例如，如果您使用“CABINET*.CAB”，而 MakeCAB 必须创建 10 个或更多的文件柜，那么您的文件柜名称将类似于 CABINET10.CAB，即 9.3，它在 FAT 文件系统中是无效名称。不幸的是，MakeCAB 在创建 9 个机柜之前不会检测到这一点！
> 
> 例子：
> 
> ```
> .Set CabinetNameTemplate=EXCEL*.DIA  ; EXCEL1.DIA, EXCEL2.DIA, etc.
> 
> .Set CabinetNameTemplate=*.          ; 1, 2, 3, etc. 
> ```

此外，当文件在 cab 中拆分时（以防文件柜大小超过其限制大小），您也可以使用变量 CabinetName *n*设置后续文件柜文件名：

`CabinetNamen=filename` [机柜编号 n 的机柜文件名]

> **CabinetNamen** =文件名
> 
> 指定文件柜的文件名。
> 
> 默认： ; 默认情况下，这些变量均未定义
> 
> 如果未为特定磁盘定义此变量，则 MakeCAB 使用 CabinetNameTemplate 构造机柜名称。
> 
> 例子：
> 
> ```
> .Set CabinetName2=test2.cab 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-26T17:04:50.763

如果您确切知道源文件存在的位置，则可以从目录生成文件列表：

```
dir C:\FolderName /s /b /a-d > c:\temp\files.txt 
```

然后使用 files.txt 文件创建 cab 文件。

```
makecab /d CabinetName1=test.cab /D DiskDirectoryTemplate=C:\temp /f c:\temp\files.txt 
```

上面的命令将使用之前生成的文件列表在您的 C:\Temp 文件夹中生成一个 test.cab 文件。

*其他有用的参考：* [Microsoft 机柜参考。](https://msdn.microsoft.com/en-us/library/bb417343.aspx)和 [makecab.exe 详细信息。](https://ss64.com/nt/makecab.html)

# scala - Weka [Scala] 中的分类器更新不一致

> ID：15843349
> 
> 赞同：0
> 
> 时间：2013-04-05T20:53:06.123
> 
> 标签：scala, machine-learning, nlp, weka

我同时更新了两个 weka 分类器。

这是我更新第一个分类器的方式：

```
 List(X, Y, action).zipWithIndex.foreach{
   case (attrString:String, index)=> attrs.elementAt(index) match{
     case attr:Attribute => instance.setValue(attr,attrString)
   }         
 } 
```

这是我更新第二个分类器的方式：

```
 List(X, name, Y).zipWithIndex.foreach{
   case (attrString:String, index) => tagattrs.elementAt(index) match{
     case attr:Attribute => {
       println("Setting taginstance's "+index+"th field to "+attrString)
       taginstance.setValue(attr, attrString)
     }
   }
 } 
```

你会注意到唯一的区别（除了我的调试语句）是 /instance/ 应该有属性 /X, Y, action/，而 /taginstance/ 应该有属性 /X, name, Y/

然后： println(instance) println(taginstance)

不幸的是，这就是这两个函数的输出：

```
Setting taginstance's 0th field to DT
Setting taginstance's 1th field to warm
Setting taginstance's 2th field to JJ
DT,JJ,SHIFT
DT,JJ,? 
```

前三行表明它应该设置正确的值，但如果是这种情况，那么最后一行将显示为 DT、warm、JJ。

有没有搞错！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:13:38.260

@Rehj 的评论让我调试了这个问题。不幸的是，我与实例关联的属性集错误。更改`attrs`为`tagattrs`以下解决了我的问题。我的错！

```
 val tagdata = new Instances("Actions",tagattrs,10) 
```

# java - 将具体对象列表转换为抽象类型

> ID：15843350
> 
> 赞同：0
> 
> 时间：2013-04-05T20:53:10.997
> 
> 标签：java

这已经在[这里](https://stackoverflow.com/questions/933447/how-do-you-cast-a-list-of-objects-from-one-type-to-another-in-java)问过，但解决方案显示警告说“未经检查的演员”。有没有更安全的方法来做到这一点。代码如下。

```
public abstract class Animal {
.
..
public class Dog extends Animal{

..
    public Vector<Animal> myFunc(String[] args) {
        // TODO Auto-generated method stub

        Vector<Dog> arVector = new Vector<Dog>();
        return  (Vector<Animal>)(List<?>) arVector; 

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:56:48.823

这不安全，因为：

```
Vector<Dog> dogVector = new Vector<Dog>();
Vector<Animal> animalVector = (Vector<Animal>)(List<?>) dogVector;
animalVector.add(new Animal()); // seems to be ok, but...
Dog dog = dogVector.get(0); // Runtime exception - there's Animal, not Dog in your Vector. 
```

编译器不允许您转换具有不同泛型类型的类型是有原因的。您可以绕过此限制，但这可能会导致运行时出现严重问题 (*ClassCastException*s)。

编辑：

问题是您必须返回带有动物的向量，但您会根据某些条件创建狗或猫的向量。你可以做的是：

```
public Vector<? extends Animal> myFunc(String[] args) {
   Vector<Dog> vector = new Vector<Dog>();
   // ...
   return vector;
} 
```

或者：

```
public Vector<Animal> myFunc(String[] args) {
   Vector<Animal> vector = new Vector<Animal>();
   vector.add(new Dog());
   return vector;
} 
```

# c# - 从鼠标移动事件调用绘制事件

> ID：15843357
> 
> 赞同：4
> 
> 时间：2013-04-05T20:53:23.680
> 
> 标签：c#, winforms, paint

当鼠标移到 panel2 上时，我需要画线。到目前为止，我已经完成了以下操作

```
public Form1()
{           
    InitializeComponent();            

}

private void panel2_Paint(object sender, PaintEventArgs e)
{
    if (isDragging)
    {
        letsPaint(sender, e);
    }
}

private void panel2_MouseMove(object sender, MouseEventArgs e)
{
    if (isDragging) 
    {
        mouseMoveX = e.X;
        mouseMoveY = e.Y;                               
        this.Paint += new PaintEventHandler(panel2_Paint);
    }
}

private void letsPaint(object sender, PaintEventArgs e) 
{             
    Pen blackpen = new Pen(Color.Black, 3);
    Graphics g = e.Graphics;
    g.DrawLine(blackpen, mouseClickedX, mouseClickedY, mouseMoveX, mouseMoveY);
    g.Dispose(); 
} 
```

但是当我移动鼠标时没有任何反应。我想我在这里做错了 PaintEventHandler() 。请告诉我如何做到这一点，以及是否有更好的方法。

另外我认为我的方法会在表格上画线，但我需要在 panel2 上画线。怎么做？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T20:55:58.340

您无效：

```
public Form1()
{           
  InitializeComponent();            
  panel2.Paint += new letsPaint;
}

private void panel2_MouseMove(object sender, MouseEventArgs e)
{
  if (isDragging) {
    mouseMoveX = e.X;
    mouseMoveY = e.Y;                               
    panel2.Invalidate();
  }
} 
```

并且您没有处理图形对象（您没有创建它），但是您使用了笔：

```
private void letsPaint(object sender, PaintEventArgs e) {             
  using (Pen blackpen = new Pen(Color.Black, 3)) {
    e.Graphics.DrawLine(blackpen, 
                        mouseClickedX, mouseClickedY, mouseMoveX, mouseMoveY);
  }
} 
```

* * *

这是一个适用于位图的快速小方法：

```
Bitmap bmp;
Point lastPoint;

public Form1() {
  InitializeComponent();
  bmp = new Bitmap(panel1.ClientSize.Width, panel1.ClientSize.Height, 
                   System.Drawing.Imaging.PixelFormat.Format32bppPArgb);

  panel1.MouseDown += panel1_MouseDown;
  panel1.MouseMove += panel1_MouseMove;
  panel1.Paint += panel1_Paint;
}

void panel1_Paint(object sender, PaintEventArgs e) {
  e.Graphics.DrawImage(bmp, Point.Empty);
}

void panel1_MouseMove(object sender, MouseEventArgs e) {
  if (e.Button == MouseButtons.Left) {
    using (Graphics g = Graphics.FromImage(bmp)) {
      g.DrawLine(Pens.Black, lastPoint, e.Location);
    }
    lastPoint = e.Location;
    panel1.Invalidate();
  }
}

void panel1_MouseDown(object sender, MouseEventArgs e) {
  lastPoint = e.Location;
} 
```

这会闪烁，因此您需要将面板替换为双缓冲面板。像这样的东西：

```
public class PanelEx : Panel {
  public PanelEx() {
    this.DoubleBuffered = true;
  }
} 
```

# java - EMF 比较代码的编译问题

> ID：15843364
> 
> 赞同：1
> 
> 时间：2013-04-05T20:53:33.987
> 
> 标签：java, eclipse, eclipse-emf, emf, emf-compare

EMF 比较版本：2.1.0 M6 (2013/03/19 17:50)

我正在尝试按照[本指南](http://wiki.eclipse.org/EMF_Compare/Developer_Guide#Using_The_Compare_APIs)中的说明使用独立比较。我收到以下编译错误

```
The method setMatchEngine(IMatchEngine) is undefined for the type EMFCompare.Builder 
```

对于下面的代码

```
// Configure EMF Compare
IEObjectMatcher matcher = DefaultMatchEngine.createDefaultEObjectMatcher(UseIdentifiers.NEVER);
IComparisonFactory comparisonFactory = new DefaultComparisonFactory(new DefaultEqualityHelperFactory());
IMatchEngine matchEngine = new DefaultMatchEngine(matcher, comparisonFactory);
EMFCompare comparator = EMFCompare.builder().setMatchEngine(matchEngine).build(); 
```

我看到它`setMatchEngine`被其他一些 API 取代，如下图所示。我不确定如何`matchEngine`使用该 API 指定新的。

![在此处输入图像描述](https://i.stack.imgur.com/bRlG3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T13:31:14.983

这些 API 已针对 M6 进行了更改（就删除而言，API 现在处于最终的 2.1.0 阶段）。如果您的工作区中有代码，那么“如何使用 API”的一个很好的来源是 EMF Compare 的单元测试。

对于您的特定用例，代码如下所示：

```
IMatchEngine.Factory factory = new MatchEngineFactoryImpl(UseIdentifiers.NEVER);
IMatchEngine.Factory.Registry matchEngineRegistry = new MatchEngineFactoryRegistryImpl();
matchEngineRegistry .add(factory);
EMFCompare comparator = EMFCompare.builder().setMatchEngineFactoryRegistry(matchEngineRegistry).build(); 
```

请注意，`EMFCompare.builder().build();`在大多数情况下，使用默认注册表 ( ) 就足够了……除非您真的不能让 EMF 比较使用 ID：p。

[编辑：一个小提示：我们现在已经用准确的信息更新了 wiki，感谢您的反馈；）]

# macos - 如何伪造对 NSTextField 的点击？

> ID：15843366
> 
> 赞同：1
> 
> 时间：2013-04-05T20:53:39.277
> 
> 标签：macos, cocoa, nstextfield

我有一个 NSTextField。我想以编程方式调用鼠标单击它。这可能吗？

我知道我可以让该字段成为第一响应者，但我只想知道是否可以使用虚假点击来达到相同的效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T22:20:48.220

如果你真的想要，你可以制作自己的[鼠标事件](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSEvent_Class/Reference/Reference.html#//apple_ref/occ/clm/NSEvent/mouseEventWithType%3alocation%3amodifierFlags%3atimestamp%3awindowNumber%3acontext%3aeventNumber%3aclickCount%3apressure%3a)，然后将其传递给[`-[NSApplication sendEvent:]`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSApplication_Class/Reference/Reference.html#//apple_ref/occ/instm/NSApplication/sendEvent%3a).

但是，真的。只需使用[`-[NSWindow makeFirstResponder:]`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindow_Class/Reference/Reference.html#//apple_ref/occ/instm/NSWindow/makeFirstResponder%3a).

# ios - 在教程应用程序中出现此错误：空数组的索引 0 超出范围

> ID：15843367
> 
> 赞同：0
> 
> 时间：2013-04-05T20:53:40.160
> 
> 标签：ios, arrays

请注意新编辑！！！！

所以我正在尝试创建一个从数组加载注释并将它们显示在地图上的应用程序......然后当您在左侧的 UITable 中选择一个位置时，它会缩放到右侧地图上的位置。下面是加载注解的代码，设置section的数量（在UITable中查看），设置每个section的行数，最后将注解名称写入UITable，以便它可以用作选择器。

问题：应用程序运行，但左侧的 UITable（用于选择位置）在 Hotels 部分中不显示任何内容，在 AerialView 部分中显示单词“Empty”，并在 Streets 部分中显示一个位置，其余行在街道部分空白。

所以很明显注释名称没有正确加载到我的 UITable 中。有任何想法吗？

```
-(void) loadOutAnnotations
{

    CLLocationCoordinate2D workingCoordinate;

    //***********HOTELS**************************

    workingCoordinate.latitude = 40.763856;
    workingCoordinate.longitude = -73.973034;
    iCodeBlogAnnotation *hotel1 = [[iCodeBlogAnnotation alloc] initWithCoordinate:workingCoordinate];
    [hotel1 setTitle:@"Hotel 1"];
    [hotel1 setSubtitle:@"This is Hotel #1"];
    [hotel1 setAnnotationType:iCodeBlogAnnotationTypeHotels];

    [mapView addAnnotation:hotel1];

    workingCoordinate.latitude = 50.763856;
    workingCoordinate.longitude = -83.973034;
    iCodeBlogAnnotation *hotel2 = [[iCodeBlogAnnotation alloc] initWithCoordinate:workingCoordinate];
    [hotel1 setTitle:@"Hotel 2"];
    [hotel1 setSubtitle:@"This is Hotel #2"];
    [hotel1 setAnnotationType:iCodeBlogAnnotationTypeHotels];

    [mapView addAnnotation:hotel2];

    workingCoordinate.latitude = 60.763856;
    workingCoordinate.longitude = -93.973034;
    iCodeBlogAnnotation *hotel3 = [[iCodeBlogAnnotation alloc] initWithCoordinate:workingCoordinate];
    [hotel1 setTitle:@"Hotel 3"];
    [hotel1 setSubtitle:@"This is Hotel #3"];
    [hotel1 setAnnotationType:iCodeBlogAnnotationTypeHotels];

    [mapView addAnnotation:hotel3];

    workingCoordinate.latitude = 10.763856;
    workingCoordinate.longitude = -23.973034;
    iCodeBlogAnnotation *hotel4 = [[iCodeBlogAnnotation alloc] initWithCoordinate:workingCoordinate];
    [hotel1 setTitle:@"Hotel 4"];
    [hotel1 setSubtitle:@"This is Hotel #4"];
    [hotel1 setAnnotationType:iCodeBlogAnnotationTypeHotels];

    [mapView addAnnotation:hotel4];

    workingCoordinate.latitude = 30.763856;
    workingCoordinate.longitude = -43.973034;
    iCodeBlogAnnotation *hotel5 = [[iCodeBlogAnnotation alloc] initWithCoordinate:workingCoordinate];
    [hotel1 setTitle:@"Hotel 5"];
    [hotel1 setSubtitle:@"This is Hotel #5"];
    [hotel1 setAnnotationType:iCodeBlogAnnotationTypeHotels];

    [mapView addAnnotation:hotel5];

    // *****************AERIALS*****************************

    workingCoordinate.latitude = 25.763856;
    workingCoordinate.longitude = -15.973034;
    iCodeBlogAnnotation *aerial1 = [[iCodeBlogAnnotation alloc] initWithCoordinate:workingCoordinate];
    [hotel1 setTitle:@"Aerial 1"];
    [hotel1 setSubtitle:@"This is Aerial #1"];
    [hotel1 setAnnotationType:iCodeBlogAnnotationTypeAerialShots];

    [mapView addAnnotation:aerial1];

    workingCoordinate.latitude = 35.763856;
    workingCoordinate.longitude = -25.973034;
    iCodeBlogAnnotation *aerial2 = [[iCodeBlogAnnotation alloc] initWithCoordinate:workingCoordinate];
    [hotel1 setTitle:@"Aerial 2"];
    [hotel1 setSubtitle:@"This is Aerial #2"];
    [hotel1 setAnnotationType:iCodeBlogAnnotationTypeAerialShots];

    [mapView addAnnotation:aerial2];

    workingCoordinate.latitude = 45.763856;
    workingCoordinate.longitude = -35.973034;
    iCodeBlogAnnotation *aerial3 = [[iCodeBlogAnnotation alloc] initWithCoordinate:workingCoordinate];
    [hotel1 setTitle:@"Aerial 3"];    
    [hotel1 setSubtitle:@"This is Aerial #3"];
    [hotel1 setAnnotationType:iCodeBlogAnnotationTypeAerialShots];

    [mapView addAnnotation:aerial3];

    workingCoordinate.latitude = 55.763856;
    workingCoordinate.longitude = -45.973034;
    iCodeBlogAnnotation *aerial4 = [[iCodeBlogAnnotation alloc] initWithCoordinate:workingCoordinate];
    [hotel1 setTitle:@"Aerial 4"];
    [hotel1 setSubtitle:@"This is Aerial #4"];
    [hotel1 setAnnotationType:iCodeBlogAnnotationTypeAerialShots];

    [mapView addAnnotation:aerial4];

    workingCoordinate.latitude = 65.763856;
    workingCoordinate.longitude = -55.973034;
    iCodeBlogAnnotation *aerial5 = [[iCodeBlogAnnotation alloc] initWithCoordinate:workingCoordinate];
    [hotel1 setTitle:@"Aerial 5"];
    [hotel1 setSubtitle:@"This is Aerial #5"];
    [hotel1 setAnnotationType:iCodeBlogAnnotationTypeAerialShots];

    [mapView addAnnotation:aerial5];

     // *****************STREETS*****************************

    workingCoordinate.latitude = 27.763856;
    workingCoordinate.longitude = -37.973034;
    iCodeBlogAnnotation *street1 = [[iCodeBlogAnnotation alloc] initWithCoordinate:workingCoordinate];
    [hotel1 setTitle:@"Street 1"];
    [hotel1 setSubtitle:@"This is Street #1"];
    [hotel1 setAnnotationType:iCodeBlogAnnotationTypeStreets];

    [mapView addAnnotation:street1];

    workingCoordinate.latitude = 37.763856;
    workingCoordinate.longitude = -47.973034;
    iCodeBlogAnnotation *street2 = [[iCodeBlogAnnotation alloc] initWithCoordinate:workingCoordinate];
    [hotel1 setTitle:@"Street 2"];
    [hotel1 setSubtitle:@"This is Street #2"];
    [hotel1 setAnnotationType:iCodeBlogAnnotationTypeStreets];

    [mapView addAnnotation:street2];

    workingCoordinate.latitude = 57.763856;
    workingCoordinate.longitude = -67.973034;
    iCodeBlogAnnotation *street3 = [[iCodeBlogAnnotation alloc] initWithCoordinate:workingCoordinate];
    [hotel1 setTitle:@"Street 3"];
    [hotel1 setSubtitle:@"This is Street #3"];
    [hotel1 setAnnotationType:iCodeBlogAnnotationTypeStreets];

    [mapView addAnnotation:street3];

    workingCoordinate.latitude = 77.763856;
    workingCoordinate.longitude = -87.973034;
    iCodeBlogAnnotation *street4 = [[iCodeBlogAnnotation alloc] initWithCoordinate:workingCoordinate];
    [hotel1 setTitle:@"Street 4"];
    [hotel1 setSubtitle:@"This is Street #4"];
    [hotel1 setAnnotationType:iCodeBlogAnnotationTypeStreets];

    [mapView addAnnotation:street4];

    workingCoordinate.latitude = 87.763856;
    workingCoordinate.longitude = -97.973034;
    iCodeBlogAnnotation *street5 = [[iCodeBlogAnnotation alloc] initWithCoordinate:workingCoordinate];
    [hotel1 setTitle:@"Street 5"];
    [hotel1 setSubtitle:@"This is Street #5"];
    [hotel1 setAnnotationType:iCodeBlogAnnotationTypeStreets];

    [mapView addAnnotation:street5];
}

- (iCodeBlogAnnotationView *)mapView:(MKMapView *)mapView 
                   viewForAnnotation:(id<MKAnnotation>)annotation
{
    iCodeBlogAnnotationView *annotationView = nil;
    iCodeBlogAnnotation *myAnnotation = (iCodeBlogAnnotation *)annotation;

    if(myAnnotation.annotationType == iCodeBlogAnnotationTypeHotels)
    {
        NSString *identifier = @"Hotels";
        iCodeBlogAnnotationView *newAnnotationView = (iCodeBlogAnnotationView*)[self.mapView dequeueReusableAnnotationViewWithIdentifier:identifier];

        if (newAnnotationView == nil)
        {
            newAnnotationView = [[[iCodeBlogAnnotationView alloc] initWithAnnotation:myAnnotation reuseIdentifier:identifier]autorelease];  
        }

        annotationView = newAnnotationView;
    }
    else if(myAnnotation.annotationType == iCodeBlogAnnotationTypeAerialShots)
    {
        NSString *identifier = @"AerialShots";
        iCodeBlogAnnotationView *newAnnotationView = (iCodeBlogAnnotationView*)[self.mapView dequeueReusableAnnotationViewWithIdentifier:identifier];

        if (newAnnotationView == nil)
        {
            newAnnotationView = [[[iCodeBlogAnnotationView alloc] initWithAnnotation:myAnnotation reuseIdentifier:identifier]autorelease];
        }

        annotationView = newAnnotationView;
    }
    else if(myAnnotation.annotationType == iCodeBlogAnnotationTypeStreets)
    {
        NSString *identifier = @"Streets";
        iCodeBlogAnnotationView *newAnnotationView = (iCodeBlogAnnotationView*)[self.mapView dequeueReusableAnnotationViewWithIdentifier:identifier];

        if (newAnnotationView == nil)
        {
            newAnnotationView = [[[iCodeBlogAnnotationView alloc] initWithAnnotation:myAnnotation reuseIdentifier:identifier]autorelease];
        }

        annotationView = newAnnotationView;
    }

    [annotationView setEnabled:YES];
    [annotationView setCanShowCallout:YES];

    return annotationView;
}

#pragma mark tableview dataSource methods

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 3;
}

- (NSString *)tableView:(UITableView *)tableView 
              titleForHeaderInSection:(NSInteger)section
{
    if (section == iCodeBlogAnnotationTypeHotels)
    {
        return @"Hotels";
    }
    else if (section == iCodeBlogAnnotationTypeAerialShots)
    {
        return @"AerialShots";
    }
    else if (section == iCodeBlogAnnotationTypeStreets)
    {
        return @"Streets";
    }
    return nil;
}

- (NSInteger)tableView:(UITableView *)tableView 
 numberOfRowsInSection:(NSInteger)section
{
    return 5;
}

- (UITableViewCell *)tableView:(UITableView *)tableView 
         cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
    {
        cell = [[[UITableViewCell alloc] initWithStyle:(UITableViewCellStyleDefault) reuseIdentifier:CellIdentifier]autorelease];
    }

    // here we are creating an array object BUT it is empty (it has no object in it)
    NSMutableArray *annotations = [[NSMutableArray alloc] init];

    if(indexPath.section == 0)
    {
        for(iCodeBlogAnnotation *annotation in [mapView annotations])
        {
            if([annotation annotationType] == iCodeBlogAnnotationTypeHotels)
            {
                // here is the line where we actually add objects to the array
                [annotations addObject:annotation];
            }
        }

        if ([annotations count] > indexPath.row)
        {    
            cell.textLabel.text = [[annotations objectAtIndex:indexPath.row] title];
        }
        else
        {
            cell.textLabel.text = @"Empty";
        }
    }
    else if (indexPath.section == 1)
    {
        for(iCodeBlogAnnotation *annotation in [mapView annotations])
        {
            if([annotation annotationType] == iCodeBlogAnnotationTypeAerialShots)
            {
                [annotations addObject:annotation];
            }
        }

        if ([annotations count] > indexPath.row)
        {
            cell.textLabel.text = [[annotations objectAtIndex:indexPath.row] title];
        }
        else
        {
            cell.textLabel.text = @"Empty";
        }
    }
    else if (indexPath.section == 2)
    {
        for(iCodeBlogAnnotation *annotation in [mapView annotations])
        {
            if([annotation annotationType] == iCodeBlogAnnotationTypeStreets)
            {
                [annotations addObject:annotation];
            }
        }

        if ([annotations count] > indexPath.row)
        {
            cell.textLabel.text = [[annotations objectAtIndex:indexPath.row] title];
        }
        else
        {
            cell.textLabel.text = @"Empty";
        }
    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T21:16:51.090

在这种情况下，您访问一个数组：

```
cell.textLabel.text = [[annotations objectAtIndex:indexPath.row] title]; 
```

并且注释数组可能是空的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T00:59:34.733

当您创建一个对象时，`NSMutableArray *annotations = [[NSMutableArray alloc] init];`它存在，但它是空的。也就是说，它里面没有对象。您只是在这一行中将对象添加到数组中：`[annotations addObject:annotation];`，您很可能永远也无法做到。也就是说，您最终只会添加正确的`annotation`s 中尽可能多的对象。`[mapView annotations]``annotationType`

然后，您盲目地访问数组的特定元素，而不检查是否有足够的元素。

至少，您应该替换这一行：

```
cell.textLabel.text = [[annotations objectAtIndex:indexPath.row] title]; 
```

像这样：

```
if ([annotations count] > indexPath.row) {
    cell.textLabel.text = [[annotations objectAtIndex:indexPath.row] title];
}
else {
    cell.textLabel.text = @"Empty";
} 
```

更好的是，你应该改变你的实现

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section; 
```

确保您永远不会说一个部分中的行数多于要放入这些行的实际注释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T04:18:59.700

这是一个坏主意。在 viewDidLoad 中初始化你的数组（否则每次有一个单元格时你都会这样做）。在表执行此操作之前，在 viewDidLoad 中加载具有值的数组。如果您不能添加值，则放置一个 if 语句，确保如果数组大小为零，则不要执行任何将访问数组的代码

# asp.net - 无法解析远程名称。WCF 服务出错

> ID：15843368
> 
> 赞同：0
> 
> 时间：2013-04-05T20:53:46.113
> 
> 标签：asp.net, wcf, publish

我有两个通过 WCF 相互通信的 asp.net Web 应用程序。在两个不同的本地主机中开发了两个应用程序。一旦开发成功，我们将它们发布到同一个测试服务器。现在，当其中一个应用程序尝试在另一个应用程序中调用该服务时……它会抛出错误……无法解析远程名称。有人可以建议我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T04:47:30.987

正如@Dhawalk 提到的，配置将非常有帮助。

通常，此错误通常意味着您的“服务地址”错误 - 检查客户端端点的值。默认情况下，您可以在客户端的 app.config 中的 serviceModel 部分找到它。

类似的东西（对于basicHTTPBinding）

```
. . .     
<client>
       <endpoint address="http://YOUR_SERVER_NAME/SERVICE_NAME" ...
. . . 
```

确保您可以从“客户”应用程序访问此 URL

# php - 在 PHP / CodeIgniter 中更新 Stripe 计划客户编号

> ID：15843369
> 
> 赞同：0
> 
> 时间：2013-04-05T20:53:49.073
> 
> 标签：php, codeigniter, stripe-payments

这是我第一次与 Stripe 交互并尝试将其绑定到 CodeIgniter。目前，当您在我的应用程序上创建帐户时，它会将您添加到正确的 Stripe 计划并增加该帐户的总金额。

我在尝试使用此订阅计划时遇到问题#。我在他们的文档中发现这涉及订阅计划数量。

我需要发生的是，当您停用用户时，它需要将数量更新为少 1。我想不通。

玩弄他们的 API，我可以通过执行以下操作完全删除订阅的客户：

```
$this->load->library( 'stripe' );
$this->stripe->customer_delete('cus_1WS0pth6srNf7H'); 
```

现在我正在使用：

```
$this->load->library( 'stripe' );
$customer_id = $company->stripe_id;
$this->stripe->customer_update($customer_id, **WHAT GOES HERE?**); 
```

任何帮助将不胜感激。综上所述，当用户被停用时，我需要将我的计划数量更新为 -1。该用户在我的应用程序中被停用，但现在我需要向 Stripe 发送请求以将我的计划更新为少 1 个用户。

也许该`customer_update`功能不适合用于此目的？文件里有很多`Stripe.php`。

一旦我解决了这个问题，我就可以处理应用它来重新激活用户。

[这是](https://stripe.com/docs/api/php#update_subscription)我认为我需要的文档

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-06T04:05:50.027

我一直在使用 Jason Horwitz 的 bcessa 的 php-stripe 库的分支。它似乎与 Stripe API 更改保持同步。

[https://github.com/sekati/php-stripe](https://github.com/sekati/php-stripe)

无论如何，这就是我为客户应用计划所做的

```
$request = $this->stripe->customer_subscribe( $stripe_id, $plan ); 
```

根据[Stripe 的 API Docs](https://stripe.com/docs/api/curl#update_subscription)，默认情况下，这将按比例分配差异（如果从一个计划更改为另一个计划），所以如果这是你想要的，你很好。如果没有，您可以将其添加到选项数组中，如下所示：

```
$request = $this->stripe->customer_subscribe( $stripe_id, $plan, array('prorate' => false) ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T21:44:14.180

不清楚你是否使用这个库，但你应该检查：

[https://github.com/bcessa/php-stripe](https://github.com/bcessa/php-stripe)

为 CI 编写，非常简单。我会假设你是。

* * *

根据 Stripe 支持（我最近做了同样的事情），您实际上需要取消订阅并重新订阅新计划。

我想要完成的步骤大致是：

1) 获取下一张发票 - 这样我就可以捕获新订阅的下一个计费日期（我们使用了试用期，所以我需要这个。你可以跳过）

2) 取消订阅客户

3) 获取我的新用户总数

4）创建一个计划ID（可以和你以前一样，我相信）

5) 以新计数订阅新计划

6）更新您自己的数据库上的任何内容

# c# - 来自 Windows Store 应用程序的 Windows Azure 存储 REST API 的授权标头

> ID：15843371
> 
> 赞同：1
> 
> 时间：2013-04-05T20:53:58.650
> 
> 标签：c#, azure, azure-table-storage

所以我只是想列出存储帐户中的表来测试使用[查询表](http://msdn.microsoft.com/en-us/library/windowsazure/dd179405.aspx)方法的授权。我尝试使用 SDK，但 SDK 试图引用 RT 中不可用的 DLL。决定试用 REST API。但我无法通过此规范进行身份验证[http://msdn.microsoft.com/en-us/library/windowsazure/dd179428.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/dd179428.aspx)

```
 public async Task ExecuteAsync()
    {
        try
        {
            HttpClient client = new HttpClient();
            Dictionary<string, string> headers = GetHeaders("/Tables");
            client.DefaultRequestHeaders.Date = DateTimeOffset.Parse(headers["Date"]);
            client.DefaultRequestHeaders.Authorization = new AuthenticationHeaderValue("SharedKey", headers["Authorization"]);
            const string url = "http://account-name.table.core.windows.net/Tables";
            XmlReader reader = XmlReader.Create(await client.GetStreamAsync(url));
            //
            // Do some stuff with the reader here
            //
        }
        catch (Exception e)
        {
            // handle exception
        }
    }

    public Dictionary<string, string> GetHeaders(string resource)
    {
        Dictionary<string, string> headers = new Dictionary<string, string>();
        headers["Date"] = DateTime.Now.ToString("R");
        headers["Authorization"] = GetAuthorizationHeader(resource, headers["Date"]);
        return headers;
    }

    public string GetAuthorizationHeader(string resource, string date)
    {
        const string key = PRIMARY_KEY;
        const string accountName = ACCOUNT_NAME;
        string signee = string.Join("\n", new List<string> { "GET", "", "", date, resource });
        // make the signature
        MacAlgorithmProvider hmac = MacAlgorithmProvider.OpenAlgorithm("HMAC_SHA256");
        IBuffer keyMaterial = CryptographicBuffer.ConvertStringToBinary(key, BinaryStringEncoding.Utf8);
        CryptographicKey hmacKey = hmac.CreateKey(keyMaterial);
        IBuffer data = CryptographicBuffer.ConvertStringToBinary(signee, BinaryStringEncoding.Utf8);
        IBuffer hash = CryptographicEngine.Sign(hmacKey, data);
        string signature = CryptographicBuffer.EncodeToBase64String(hash);
        return string.Format("{0}:{1}", accountName, signature);
    } 
```

显然，当我继续获得 403 时，我遗漏了一些东西。通过此代码查看任何问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T03:20:13.340

A few comments:

There's a storage client library for Windows RT as well. Please take a look at my answer here: [Working with Azure in Winrt with Rest API, trouble with signature](https://stackoverflow.com/questions/15602918/working-with-azure-in-winrt-with-rest-api-trouble-with-signature/15603373#15603373).

Coming to your problem, can you try changing the following line of code:

```
headers["Date"] = DateTime.Now.ToString("R"); 
```

to

```
headers["Date"] = DateTime.UtcNow.ToString("R"); 
```

and see if that helps.

**UPDATE**

I also noticed that you're using `CryptographicBuffer.ConvertStringToBinary` to convert Base64 encoded key to bytes. Please try using `CryptographicBuffer.DecodeFromBase64String` ([http://msdn.microsoft.com/en-us/library/windows/apps/windows.security.cryptography.cryptographicbuffer.decodefrombase64string.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.security.cryptography.cryptographicbuffer.decodefrombase64string.aspx)) instead.

# amazon-web-services - MSMQ 是否具有类似于 Amazon SQS 的“锁定直至过期”功能？

> ID：15843373
> 
> 赞同：0
> 
> 时间：2013-04-05T20:54:03.793
> 
> 标签：amazon-web-services, queue, msmq

我一直在使用 AWS SQS，它有一个很好的功能，当从队列中声明一条消息时，它会锁定一段时间。在此锁定期间，如果成功处理消息，则将消息标记为已完成。如果处理失败（并且没有收到来自消息处理器的响应），则在一段时间后锁定到期并且消息可供另一个处理器获取。

现在我需要在 SQS 之外使用队列（主要是出于延迟原因，但也可能出于成本原因）。我真的在寻找具有相同特征的队列提供程序。MSMQ 对我来说是显而易见的选择，因为它已经安装并且我们在其他地方使用它，但是我找不到任何以相同方式处理失败消息的功能。

MSMQ 是否允许这样做，或者是否有一种简单的方法来复制它？

或者，是否有另一种轻量级的开源消息传递服务可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T09:37:01.100

MSMQ 已经这样做了。如果您在事务中读取消息并且事务中止，则该消息将重新出现在队列中。

# ios - 从另一个 void 获取变量值

> ID：15843377
> 
> 赞同：0
> 
> 时间：2013-04-05T20:54:11.977
> 
> 标签：ios, xcode, variables, call, void

我刚开始用 XCode 编程，我需要你的帮助。我有两个空缺；在第一个 void 我创建了一个 NSString，在第二个 void 我需要该字符串的值，但我不知道如何获取该值。

这是我的 .h 文件的缩短版本

```
//.h file
-(void)viewDidLoad
{
  [self ActionOne];
}

-(IBAction)ButtonClick (id):sender
{
  [self ActionTwo];
}

    -(void)ActionOne
    {
      NSString *VarString = @"hello";
    }

    -(void)ActionTwo
    {
      NSLog (@"%@", VarString);
    } 
```

我的问题是 NSLog 的输出是 'null'，希望有人能帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T21:05:04.337

您已在中声明了一个*局部变量*`ActionOne`。只要方法正在运行，它就会一直存在。对于持久存储，您需要一个*ivar*（这是 Objective-C 中使用的一个术语，表示“实例变量”，它是一个变量，每个对象都有一个单独的副本，它是一个类的实例）。最简单的方法是声明一个属性，该属性将创建一个 ivar 和方法来访问它以进行读取和写入。在您的 .h 文件中：

```
@interface MyViewController: UIViewController

@property (nonatomic, strong) NSString *varString;

// ... method declarations, etc

@end 
```

然后在你的 .m 文件中：

```
-(void)actionOne
{
    self.varString = @"hello";
}

-(void)actionTwo
{
    NSLog(@"%@", self.varString);
} 
```

# html - DIV高度设置为屏幕百分比？

> ID：15843391
> 
> 赞同：82
> 
> 时间：2013-04-05T20:55:19.347
> 
> 标签：html, css

我希望将父 DIV 设置为完整 100% 屏幕高度的 70%。我已经设置了以下 CSS，但它似乎没有做任何事情：

```
body {
font-family: 'Noto Sans', sans-serif;
margin: 0 auto;
height: 100%;
width: 100%;
}
.header {
height: 70%;
} 
```

出于某种原因，它似乎不起作用，并且标题不是屏幕尺寸的 70%。有什么建议吗？

* * *

## 回答 #1

> 赞同：210
> 
> 时间：2013-12-30T07:21:00.763

尝试使用视口高度

```
div {
    height:100vh; 
} 
```

[这里](https://stackoverflow.com/questions/1575141/make-div-100-height-of-browser-window)已经详细讨论过了

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-10-10T10:32:27.883

这是**解决方案**，

也添加`html`到`100%`

```
html,body {

   height: 100%;
   width: 100%;

} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-05T20:58:29.103

`absolute`为该 div定位。

[http://jsfiddle.net/btevfik/KkKeZ/](http://jsfiddle.net/btevfik/KkKeZ/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-11-19T00:28:13.673

如果您希望它基于屏幕高度，而不是窗口高度：

```
const height = 0.7 * screen.height

// jQuery
$('.header').height(height)

// Vanilla JS
document.querySelector('.header').style.height = height + 'px'

// If you have multiple <div class="header"> elements
document.querySelectorAll('.header').forEach(function(node) {
  node.style.height = height + 'px'
}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-01T11:35:35.027

通过使用绝对定位，您可以使`<body>`or`<form>`或`<div>`适合您的浏览器页面。例如：

```
<body style="position: absolute; bottom: 0px; top: 0px; left: 0px; right: 0px;"> 
```

然后简单地在`<div>`里面放一个并使用任何百分比`height`或者`width`你想要的

```
<div id="divContainer" style="height: 100%;"> 
```

# java - 在 jgit 中配置 known_hosts

> ID：15843399
> 
> 赞同：7
> 
> 时间：2013-04-05T20:55:49.503
> 
> 标签：java, git, ssh, jsch, jgit

使用 jgit 和 gitolite 进行源代码控制，我有一个应用程序可以根据命令生成某些代码，并且我们希望将其提交给源代码控制。目标是快进，提交新代码，然后推送它。

我有以下方法：

```
private void commitToGitRepository(String updateComment, Config config)
      throws IOException, NoFilepatternException, GitAPIException
{
   if(git == null)
   {
      git = Git.open(new File(config.getDpuCheckoutDir()));
   }
   PullCommand pull = git.pull();
   pull.call();
} 
```

此方法在`pull.call()`方法调用上失败，但有以下异常：

```
com.jcraft.jsch.JSchException: UnknownHostKey: www.somehost.com. RSA key fingerprint is 9d:92:a9:c5:5d:cb:5f:dc:57:ff:38:7e:34:31:fe:75
at com.jcraft.jsch.Session.checkHost(Session.java:748)
at com.jcraft.jsch.Session.connect(Session.java:319)
at org.eclipse.jgit.transport.JschConfigSessionFactory.getSession(JschConfigSessionFactory.java:116)
at org.eclipse.jgit.transport.SshTransport.getSession(SshTransport.java:121)
at org.eclipse.jgit.transport.TransportGitSsh$SshFetchConnection.<init>(TransportGitSsh.java:248)
at org.eclipse.jgit.transport.TransportGitSsh.openFetch(TransportGitSsh.java:147)
at org.eclipse.jgit.transport.FetchProcess.executeImp(FetchProcess.java:136)
at org.eclipse.jgit.transport.FetchProcess.execute(FetchProcess.java:122)
at org.eclipse.jgit.transport.Transport.fetch(Transport.java:1104)
at org.eclipse.jgit.api.FetchCommand.call(FetchCommand.java:128)
at org.eclipse.jgit.api.PullCommand.call(PullCommand.java:245)
at net.intellidata.dpu.controller.schema.EntityMappingController.commitToGitRepository(EntityMappingController.java:149)
... (truncated where it meets my code) 
```

我读这个的方式，它似乎没有找到我的 known_hosts 文件`user_home/.git`。但是，我一直在寻找一个小时，但我没有找到一种方法来配置 JGit 来告诉 JSch 在哪里寻找 known_hosts 文件。

建议？我知道来源的条目存在于我的 known_hosts 文件中

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-06T10:43:04.370

[这个答案](https://stackoverflow.com/a/14024709/6309)提到：

```
jsch.setKnownHosts("C:\\Users\\aUsername\\known_hosts"); 
```

但是您使用的是 jgit，而*不是直接使用* [jsch（Java 安全外壳）](http://www.jcraft.com/jsch/)，所以让我们看看：

```
C:\Users\VonC\prog\git>git clone https://github.com/eclipse/jgit
Cloning into 'jgit'...
remote: Counting objects: 37854, done.
remote: Compressing objects: 100% (7743/7743), done.
remote: Total 37854 (delta 22009), reused 34367 (delta 18831)
Receiving objects: 100% (37854/37854), 6.73 MiB | 1.37 MiB/s, done.
Resolving deltas: 100% (22009/22009), done.

C:\Users\VonC\prog\git>cd jgit

C:\Users\VonC\prog\git\jgit>grep -nrHI "setKnownHosts" *
org.eclipse.jgit/src/org/eclipse/jgit/transport/JschConfigSessionFactory.java:262:                              sch.setKnownHosts(in); 
```

找到了！

这来自[`JschConfigSessionFactory.java#knownHosts()`](https://github.com/eclipse/jgit/blob/master/org.eclipse.jgit/src/org/eclipse/jgit/transport/JschConfigSessionFactory.java#L258)，看起来像：

```
new File(new File(home, ".ssh"), "known_hosts");
# with:
home = fs.userHome(); 
```

`userHome`基于[System.getProperty("user.home")](https://github.com/eclipse/jgit/blob/master/org.eclipse.jgit/src/org/eclipse/jgit/util/FS.java#L242-L251)。

因此，请确保您的 java 会话已[`user.home`定义](https://stackoverflow.com/questions/1503284/java-system-getpropertyuser-home-returns)，并且您`%USERPROFILE%/.ssh/known_hosts`在其中有一个文件。

（`user.home`应该由java设置`%USERPROFILE%`为Windows，也就是说，如果你在Windows上：在某些情况下，[这并不总是有效的](https://stackoverflow.com/questions/2134338/java-user-home-is-being-set-to-userprofile-and-not-being-resolved)）。

* * *

现在，如果您*确实*有一个`%USERPROFILE%/.ssh/known_hosts`，那么，正如[这里提到的](http://fileit.in/p/549)

> 只需 SSH 到客户端（使用命令行`ssh`工具），这会将条目添加到您的`~/.ssh/known_hosts file`.

* * *

在这种情况下，[StormeHawke](https://stackoverflow.com/users/1036285/stormehawke)在[评论](https://stackoverflow.com/questions/15843399/configuring-known-hosts-in-jgit/15849893#comment22614468_15849893)中提到：

> 因为我在**Tomcat 中将它作为 Windows 服务运行**，所以 Jsch（以及扩展名 JGit）不在我的用户文件夹中，而是在该文件夹的**`SYSTEM`帐户主文件**夹中`.ssh`。
> 在这种情况下，我继续将`.ssh`文件夹复制到`SYSTEM`主文件夹中，因为 Tomcat 仅在我的机器上运行以用于开发和测试目的（可能不是最好的安全策略，但在这种情况下风险很小）。

从[这个问题](https://serverfault.com/q/9325/783)，[这个，](https://serverfault.com/q/112927/783)[本地系统帐户](http://msdn.microsoft.com/en-us/library/ms684190%28VS.85%29.aspx)的那个目录应该是：

```
C:\Documents and Settings\Default User
# or Wind7 / 2008
C:\Windows\System32\Config\systemprofile 
```

OP提到：

根据这个电话：

```
 System.out.println(System.getProperty("user.home")); 
```

**`SYSTEM`Windows7（以及任何其他基于 NT 的 Windows 系统）的默认`C:\`**主目录是简单的.
（所以不理想，但为了快速修复，它可以工作）。

# java - 需要安装Java 6 for Mac才能编译Android源代码

> ID：15843401
> 
> 赞同：0
> 
> 时间：2013-04-05T20:56:15.030
> 
> 标签：java, android, macos, android-source, java-6

我正在尝试为我的 Mac 10.8.3 设置 Android 构建环境

我不明白，Apple 在此处提供了有关如何将 mac 恢复为 Java 1.6 的说明：

[http://support.apple.com/kb/HT5559?viewlocale=en_US&locale=en_US](http://support.apple.com/kb/HT5559?viewlocale=en_US&locale=en_US)

它们是我遵循的明确指示。

然而，当我仍然得到以下信息时：

unknown-98:fe:94:3f:92:ce:~ newuser$ java -version java version "1.7.0_13" Java(TM) SE Runtime Environment (build 1.7.0_13-b20) Java HotSpot(TM) 64-Bit服务器虚拟机（内部版本 23.7-b01，混合模式）

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:03:09.007

Mac 附带并偶尔更新 JDK 1.4 到 1.6。您可以在此目录中看到您已安装的版本：

*   /System/Library/Frameworks/JavaVM.framework/Versions

这就是您更改JDK的方式

**1.命令行Java**

我的 Java 来自 /usr/bin/java，它指向上述“版本”目录中的版本之一。要更改您在此处获得的 JDK 版本，请使用 Applications -> Utilities -> Java 下的 Java Preferences 应用程序：

![在此处输入图像描述](https://i.stack.imgur.com/86r8T.png)

您可以将您想要的 JDK 拖到顶部，它应该会立即从命令行反映出来： hostname% java -version java version "1.5.0_16" Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_16 -b06-284) Java HotSpot(TM) 64 位服务器 VM (build 1.5.0_16-133, 混合模式) hostname% java -version java version "1.6.0_07" Java(TM) SE Runtime Environment (build 1.6.0_07) -b06-153) Java HotSpot(TM) 64 位服务器 VM（内部版本 1.6.0_07-b06-57，混合模式）

**2\. 使用 Java 的脚本和应用程序**

通常，其他内置应用程序或您安装的应用程序将使用 JAVA_HOME 环境变量来选择 JDK。默认情况下，您不会有此设置，Mac 特定版本的启动脚本通常会使用 Java 'Versions' 目录中的 CurrentJDK 链接创建一个。添加环境变量的步骤记录在本文中，但我可以为您节省一点时间。在您的主目录中创建一个目录 .MacOSX 并添加一个名为 environment.plist 的文件。以下是我的 ~/.MacOSX/environment.plist 文件的全部内容：

```
<!-- When changing this, also run Java Preferences and change there. -->
<key>JAVA_HOME</key>
<string>/System/Library/Frameworks/JavaVM.framework/Versions/1.6/Home</string> 
```

设置此值后，所有进程都会启动，因为您将拥有可用的 JAVA_HOME。由于在您登录时会读取此文件，因此您必须在创建或编辑此文件后注销/登录一次。

**特例：NetBeans**

我使用的 IDE 是 NetBeans，但以下想法可能也适用于其他大型应用程序。安装 NetBeans 后，它将选择要使用的 JDK 并将其硬编码到属性文件中。如果您希望它依赖于您现在在**environment.plist**中设置的 JAVA_HOME ，您只需编辑一个文件。编辑这个文件：

*   /Applications/NetBeans/NetBeans\ 6.5.app/Contents/Resources/NetBeans/etc/netbeans.conf

..您可以通过更改此行来设置 JDK：

**netbeans_jdkhome=$JAVA_HOME**

请注意，正如 netbeans.conf 文件所指出的，您始终可以通过在启动 IDE 时在命令行上指定来强制使用不同的 JDK。为了您的复制和粘贴乐趣，这里是用于从终端启动它的命令（在这种情况下，我给出了“帮助”选项）。如果您使用不同的版本，自动完成应该有助于路径的版本部分：

*   /Applications/NetBeans/NetBeans\ 6.5.app/Contents/MacOS/netbeans --help

**回顾**

回顾一下，您可以通过使用 Java Preferences 应用程序以及更改 environment.plist 文件中的值来为整个系统切换 JDK。要即时切换，请使用 Preferences 应用程序并在您使用的任何终端中为 JAVA_HOME 设置一个新值，尽管 NetBeans 等一些应用程序仍会获取系统值，您应该在命令行上指定所需的 JDK。

我找到此解决方案的资源：[https ://blogs.oracle.com/bobby/entry/switching_jdks_on_mac](https://blogs.oracle.com/bobby/entry/switching_jdks_on_mac)

# c# - 设置列表初始大小

> ID：15843402
> 
> 赞同：-2
> 
> 时间：2013-04-05T20:56:17.303
> 
> 标签：c#, .net, arrays, list

如何使用 C# 在 .Net 中设置特定对象类型列表的初始大小，并能够在指定索引处插入完全分配的对象？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-05T21:03:12.013

有一个`List<T>`构造函数将一个`int`作为初始列表容量的参数，但它实际上并没有在列表中创建该数量的元素，所以这将抛出`ArgumentOutOfRangeException`：

```
var items = new List<int>(10);
items[4] = 3; 
```

您可以创建自己的方法来创建具有初始大小的那种`List`：

```
private static List<T> CreateList<T>(int capacity)
{
    return Enumerable.Repeat(default(T), capacity).ToList();
} 
```

它会让它工作：

```
var items = CreateList<int>(10);

items[4] = 3; 
```

但是 - 您为什么不直接使用`Array`而不是`List`在您知道所需容量时使用？

***无 LINQ 版本***

```
private static List<T> CreateList<T>(int capacity)
{
    List<T> coll = new List<T>(capacity);
    for(int i = 0; i < capacity; i++)
        coll.Add(default(T));

    return coll;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T21:14:19.010

这可以通过数组轻松完成：

```
string[] sa = new string[99];
sa[71] = "g"; 
```

这也恰好实现了 IList 接口。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-05T21:00:30.533

[列表构造函数 (Int32)](http://msdn.microsoft.com/en-us/library/dw8e0z9z.aspx)

[List.Insert 方法](http://msdn.microsoft.com/en-us/library/sey5k5z4.aspx)

声称插入失败的选民。
您是否阅读了链接中的文档？
如果 index 小于 0，则 ArgumentOutOfRangeException - 或 - index 大于 Count。
所以容量和计数是不一样的——不会使答案出错。
如果 index 小于 0 或 index 大于 Count，MarcinJuraszek 的答案将抛出 ArgumentOutOfRangeException。
我在生产应用程序中使用它来按字母顺序加载，然后在索引 0 处插入任何用户添加，它**从未**抛出异常。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-05T21:00:01.767

您可以使用构造函数重载`List<T>(int capacity)`：

```
var l = new List<string>(42); 
```

创建一个容量为 42 的列表。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-04-05T21:03:41.673

据我所知，与数组相比，将初始大小设置为列表违背了列表背后的整个想法。

但这里是你如何做到的：

```
List<ItemType> list = new List<ItemType>(size); 
```

size 是 int 数据类型。

# java - 比较具有不同值Java的2个String数组的索引

> ID：15843405
> 
> 赞同：0
> 
> 时间：2013-04-05T20:56:23.330
> 
> 标签：java, arrays

我有 2 个并行数组：第一个包含州名，第二个包含州首府。

我正在做一个随机生成的测验，`State`然后要求用户输入该州的首都。一旦收到输入，我想调用一个方法来检查输入的资本指数是否与它所在的州的指数相同。

即：`stateArray[0] = "New York"`和`capitalArray[0] = "Albany"`。

检查答案方法

```
 public static void checkAnswer(String[]stateArray, String capitalArray, String answer)
 {
    int index;
    for (int i = 0; i < capitalArray.length; i++){

        if(capitalArray[i].equalsIgnoreCase(answer)){
            index = i;
        }
    }

    if(capitalArray[index] == stateArray[index]) 
        {
            System.out.println("correct");
        }
        else
        {
            System.out.println("incorrect");
        }
    } 
```

我知道第二个`if`说法是错误的。如何使用在 中找到用户答案的​​索引来比较两个数组`capitalArray`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:16:16.950

```
boolean checkAnswer(String[] stateArray, String[] capitalArray, String displayedState, String answer) {
    for (int i = 0; i < stateArray.length; i++) {
        if (stateArray[i].equals(displayedState) && capitalArray[i].equals(answer)) {
            return true;
        }
    }
    return false;
} 
```

或者其他的东西。关键是你需要传入一些东西来代表你显示的状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T21:22:17.190

您需要跟踪保存向用户显示的状态的索引。例如，现在编写代码的方式使用户能够通过给出错误答案来获得正确答案。以这个例子为解释：

```
string[] stateArray = {"New York", "California"};
string[] capitalArray = {"Albany", "Sacramento"}; 
```

如果您将“纽约”显示为问题并且用户恰好回答“萨克拉门托”，那么您的代码将显示正确。

您还需要一种情况，其中答案与数组中的任何大写字母都不匹配。在您的代码中执行此操作的一种方法是将索引初始化为 -1。

```
int index = -1; 
```

完成 for 循环后，检查 index 是否为 -1 并显示“您的答案不是有效状态”或类似的内容。

也许使用 HashMap，我对 Java 并不完全熟悉，它似乎类似于 Python 中的字典。字典对象有很好的性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-28T06:00:21.560

试试这个函数它返回数组： -

```
public static String[] numSame (String[] list1, String[] list2) 
     {  
          int same = 0;  
          for (int i = 0; i <= list1.length-1; i++) 
          {  
             for(int j = 0; j <= list2.length-1; j++) 
             {  
                if (list1[i].equals(list2[j])) 
                {  
                    same++;  
                    break;  
                }  
             }  
          }  

          String [] array=new String[same];
          int p=0;
          for (int i = 0; i <= list1.length-1; i++) 
          {  
             for(int j = 0; j <= list2.length-1; j++) 
             {  
                if (list1[i].equals(list2[j])) 
                {  
                    array[p]=  list1[i]+"";
                    System.out.println("array[p] => "+array[p]);
                    p++;
                    break;  
                }  
             }  
          } 
          return array;
       } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T21:49:35.427

Java 中的另一种实现是使用 Map 而不是两个数组。

```
Map<String,String> stateCapitals = new HashMap<String,String>();
stateCaptitals.put("New York", "Albany"); 
```

然后你可以检查地图

```
public voic checkAnswer(String chosenState, String chosenCapital) {
  if (stateCapitals.get(chosenState).equals(chosenCapital) {
     System.out.println("you are correct!");
  }
} 
```

这不适用于 2 个并行数组，但如果您真正关心的是您提到的数据类型，而不是数组本身，那么它是一个更好的实现。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T21:28:43.123

既然你知道你问的是什么状态，你也应该知道它的数组索引。正如您在下面看到的，两个数组都被声明为类变量。

```
... class Quiz {

private String[] states = new String[50];
private String[] capitals = new String[50];

... method to fill both arrays with the correct data

 public static void checkAnswer(int question, String answer)
 {

    if(capitalArray[question].equalsIgnoreCase(answer)){
        {
            System.out.println("correct");
        }
        else
        {
            System.out.println("incorrect");
        }
   }
} 
```

最好将`checkAnswer`方法的返回类型设置为`Boolean`，但我把它留给了你。

# selenium - 使用 PHPUnit 在 Selenium RC 中使用多个站点

> ID：15843413
> 
> 赞同：0
> 
> 时间：2013-04-05T20:57:05.083
> 
> 标签：selenium, phpunit, selenium-rc

我正在尝试自动化涉及两个没有通用基本 URL 的网站的用户场景。我怎样才能做到这一点？现在我没有成功尝试更改全局变量，但每次测试都会重置它们。

```
public $check = true;

protected function setUp() {
    $this->setBrowser("*googlechrome");
    if ($this->check==true)
        $this->setBrowserUrl("SITE A");
    else
        $this->setBrowserUrl("SITE B");
    $this->setPort(4444);
    $this->setHost("0.0.0.0");
}

public testA() { //requires SITE A, set check to false }
public testB() { //requires SITE B } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T14:52:30.243

您的代码将无法工作，因为**在每个**测试用例运行之前`setUp()`执行。

 **为什么不更明确地说明您要做什么？尝试以下操作：

```
private $sites = array('A' => 'a.com', 'B' => 'b.com');

protected function setUp() {
    $this->setBrowser("*googlechrome");
    $this->setPort(4444);
    $this->setHost("0.0.0.0");
}

public function testA() 
{
    $this->useSite('A');
}

public function testB() 
{
    $this->useSite('B');
}

private function useSite($site)
{
    $this->setBrowserUrl($this->sites[$site]);
} 
```**

# python - python检查列表中是否已经存在坐标

> ID：15843419
> 
> 赞同：-1
> 
> 时间：2013-04-05T20:57:46.123
> 
> 标签：python, list, multidimensional-array

这项工作是为了分配。我正在使用二维数组，到目前为止，我已经找到了一条我想要通过数组的路径。数组中还有其他路径，我也希望能够通过它们，但我不能重用任何路径。我的数组看起来像：

```
0,2,4,1,6,0,0
2,0,0,0,5,0,0
4,0,0,0,5,5,0
1,0,0,0,1,1,0
6,5,0,1,0,5,5
0,0,5,1,5,0,0
0,0,0,0,5,0,0 
```

我查找附近邻居的代码是：

```
def check_neighbours(Alist, node):
        nodes = []
        for i in range(0,2):
                for j in range(0,2):
                        x = node[0]+i
                        y = node[1]+j
                        if x>=0 and y>=0 and (i!=0 or j!=0) and Alist[x][y]>0:
                                nodes.append([x, y]) 
```

我将每个访问的坐标 x,y 附加到一个列表中，该列表构建了所采用的完整路径。以下是输出示例：

```
inside pathing function
path taken is ['[0, 1]', '[0, 2]', '[0, 3]', '[0, 4]', '[1, 4]', '[2, 4]', '[2, 5]', '[3, 5]', '[4, 5]', '[4, 6]'] 
```

由于我搜索邻居的方式（将 x 和 y 分开），我想不出一种方法来测试建立的当前坐标是否已经位于列表中。我认为代码将适合以下两行：

```
if x>=0 and y>=0 and (i!=0 or j!=0) and Alist[x][y]>0:
                                    nodes.append([x, y]) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T21:26:13.887

关于什么

```
nodes = []
nodes.append([1,1])
nodes.append([2,2])
nodes.append([3,3])

[1,1] in nodes
# True

[1,3] in nodes
# False 
```

我不是很清楚你的问题，所以这可能是关闭的。

话虽如此，因为为了被添加到`nodes`列表中，它必须是前一个节点的右侧一列，下方一列，或两者兼而有之。而且由于您只考虑右侧和下方 ( `range(0,2)`) 的节点，因此您永远不会在列表中找到重复项。

# c# - 试图在 Windows Phone 7.8 应用程序中解析 xml 但获得空值？

> ID：15843428
> 
> 赞同：0
> 
> 时间：2013-04-05T20:58:20.627
> 
> 标签：c#, visual-studio-2010, windows-phone-7, xml-parsing, linq-to-xml

我正在尝试解析作为对 web 服务响应的响应而得到的 xml，该 xml 如下所示

```
<GeneralSearchResponse>
<serverDetail></serverDetail>
<exceptions exceptionCount="1"></exceptions>
<clientTracking height="19" type="logo" width="106"></clientTracking>
<searchHistory></searchHistory>
<categories matchedCategoryCount="1" returnedCategoryCount="1">
<category id="0">
<name>bart</name>
<categoryURL>http://www.shopping.com/bart/products?oq=bart&linkin_id=7000610
</categoryURL>
<items matchedItemCount="1045" pageNumber="1" returnedItemCount="5">
<product id="130506037"></product>
<product id="104483377"></product>
<offer featured="false" id="tp-VCdOoO1RL6xICeRONqg==" smartBuy="false" used="false"></offer>
<offer featured="false" id="12evWWi57lddzFufngUWsg==" smartBuy="false" used="false"></offer>
<product id="96754577"></product>
</items>
<attributes matchedAttributeCount="5" returnedAttributeCount="5"></attributes>
<contentType>hybrid</contentType>
</category>
<intActualCategoryCount>4</intActualCategoryCount>
</categories>
<relatedTerms></relatedTerms>
</GeneralSearchResponse> 
```

但是当我尝试使用以下代码进行解析时，我无法获得任何下降或任何节点

```
XDocument xDoc = new XDocument();
xDoc = XDocument.Parse(data);
var xEle = xDoc.Root.Descendants("categories"); 
```

但是 xEle 没有任何类别。请让我知道是什么问题？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T21:10:20.707

您的 XML 有一个默认命名空间 - 因此其中的元素位于该命名空间中。在 LINQ to XML 中查找元素的方法对命名空间敏感。你要：

```
XNamespace ns = "urn:types.partner.api.shopping.com";
XDocument xDoc = new XDocument();
xDoc = XDocument.Parse(data);
var xEle = xDoc.Root.Descendants(ns + "categories"); 
```

# c# - 及时更新列表框 asp.net

> ID：15843430
> 
> 赞同：1
> 
> 时间：2013-04-05T20:58:28.903
> 
> 标签：c#, asp.net, .net, sql, sql-server

我有一个从数据库中获取数据的列表框。我的问题是我想每隔 3 秒或 n 秒刷新一次该列表框。这在 ASP.Net 中是否可行，我可以在不刷新整个页面的情况下按时更新列表框吗？如果有可能我该怎么做？

好的，我对更新面板进行了研究，但是在制作列表框和列表框刷新的数据源时遇到问题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T12:27:17.383

我认为 $.ajax 应该与 JavaScript setInterval 一起对你很有用，比如：

```
<script>
YourMethodName();

function YourMethodName()
{
  //bind your listbox using $.ajax
  setInterval(YourMethodName, 3000);
}
</script> 
```

如果您需要帮助如何使用 jQuery 绑定列表框，那么[http://www.dotnetcurry.com/ShowArticle.aspx?ID=454](http://www.dotnetcurry.com/ShowArticle.aspx?ID=454)可能会对您有所帮助。

# git - 通过 ssh/git-shell 获得 git 文件权限？

> ID：15843435
> 
> 赞同：1
> 
> 时间：2013-04-05T20:58:37.637
> 
> 标签：git, ssh

我`foo.git`在我的服务器上为开发人员设置了一个私有的裸 git 存储库，并通过 login shell 让他们通过 ssh 访问`git-shell`。

由于它是一个多用户系统，我为他们设置的裸存储库已`chmod -R o-rwx foo.git`在其上运行，因此同一系统上的其他用户无法访问此存储库。

问题是当开发人员推送更改时，在 git 存储库中创建的新文件（例如新对象或新分支标签）是世界可读的。

我如何告诉 git、ssh、git-shell 或其他任何东西 - 当它在 foo.git 中创建文件时它们应该是 chmod `o-rwx`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:01:32.430

查看`git config --help`并搜索`core.sharedRepository`。

如果我对您的配置理解正确，则必须将其放入`config`-file 中：

```
[core]
    sharedRepository = 0666 
```

.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T11:34:31.090

为什么不使用（类似的）Gitolite 来管理对存储库的访问？

它使您可以很好地控制对存储库的访问（如果您愿意，甚至可以单独访问分支），并且您的所有 git 用户只使用一个 Unix 用户帐户（通常称为“git”）。（这类似于 github.com 的工作方式。）。

# node.js - 我怎样才能让 ejs 与猫鼬一起工作？

> ID：15843439
> 
> 赞同：2
> 
> 时间：2013-04-05T20:58:46.923
> 
> 标签：node.js, mongodb, express, mongoose, ejs

我有一条获取所有客户端的路线，我正在尝试将客户端传递给 ejs 以呈现它们。我收到以下错误：

```
Express
500 SyntaxError: Unexpected token {
at Object.Function (unknown source)
at exports.compile (/Users/sm/Desktop/AttApp/node_modules/ejs/lib/ejs.js:234:12)
at Object.exports.render (/Users/sm/Desktop/AttApp/node_modules/ejs/lib/ejs.js:273:10)
at View.exports.renderFile [as engine] (/Users/sm/Desktop/AttApp/node_modules/ejs/lib/ejs.js:303:22)
at View.render (/Users/sm/Desktop/AttApp/node_modules/express/lib/view.js:75:8)
at Function.app.render (/Users/sm/Desktop/AttApp/node_modules/express/lib/application.js:503:10)
at ServerResponse.res.render [as partial] (/Users/sm/Desktop/AttApp/node_modules/express/lib/response.js:721:7)
at ServerResponse.module.exports.res.render (/Users/sm/Desktop/AttApp/node_modules/express-partials/index.js:55:9)
at ServerResponse.res.renderPjax (/Users/sm/Desktop/AttApp/node_modules/express-pjax/pjax.js:17:11)
at Promise. (/Users/sm/Desktop/AttApp/app.js:61:17) 
```

这是我的路线：

```
app.get( '/clients', function( req, res ) {
    return ClientModel.find( function( err, clients ) {
        if( !err ) {
            res.renderPjax('clients/clients.ejs', {
              title: 'Clients Page',
              clients: clients

            });

            console.log(clients);
        } else {
            return console.log( err );
        }
    });
}); 
```

这是我的视图client.ejs：

```
<input type="text" class="table-search" id="search" autocomplete="off" placeholder="Search Clients…">
<table class="table" id="tblData">
        <thead>
        <tr>
        <th>Client Name</th>
        <th>Title</th>
        </tr>
        </thead>
            <tbody id="tblDataBody">
            <% clients.forEach(fucntion(client){ %>

                <tr>
                    <td><a href="http://lar4.loc/clients/<%= client._id %>"><%= client.first_name %></a></td>
                    <td>Title</td>
                </tr>

            <%  }) %>

            </tbody>
</table> 
```

如何让 ejs 模板循环访问客户端数据并呈现它？我正在使用猫鼬来存储和获取数据。我也在使用 express.js。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T08:38:01.443

我认为这是由于这一行的错误

```
<% clients.forEach(fucntion(client){ %> 
```

由于您拼写错误`function`，因此无法解释`{`

# c - 使用 C 的字符串数组中的内存不足

> ID：15843444
> 
> 赞同：0
> 
> 时间：2013-04-05T20:58:56.357
> 
> 标签：c, segmentation-fault, out-of-memory

我有一个这样的字符串数组：

```
char **strArray; 
```

这个数组是满的，我可以用这个方法打印它的内容：

```
while(*strArray){
printf("%s\n",*(strArray++));
} 
```

这工作正常。但是当我使用这个时：

```
while(*strArray){
process(*(strArray++));
} 
```

我取出数组中第二个字符串的内存错误。它为第一个字符串运行，但在第二个字符串时失败。

感谢帮助！

* * *

处理方法如下：

```
process(char *line)
{
char *server_id,*delimiter,*outputMessage,*capacity_str;
int capacity;
delimiter = " ";
strtok(line,delimiter);
server_id = (char *)strtok(NULL,delimiter);
capacity_str = (char *)strtok(NULL,delimiter);
capacity = atoi(capacity_str);
curr_server = (server *)malloc(sizeof(server));
curr_server->server_id = server_id;
curr_server->capacity = capacity;
curr_server->full_capacity = 0;
curr_server->next = head_server;
head_server = curr_server;
strcpy(outputMessage , "server added ");
strcat(outputMessage,server_id);
strcat(outputMessage,"~");
strcat(outputMessage,capacity_str);
strcat(outputMessage,"\n");
writeOutput(outputMessage);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:28:01.533

outputMessage 需要在 strcpy/strcat 分配给它之前分配。我很惊讶您会遇到内存不足错误，而不仅仅是分段错误。

# javascript - 删除日期/时间 document.write 脚本中的字符

> ID：15843445
> 
> 赞同：0
> 
> 时间：2013-04-05T20:59:09.670
> 
> 标签：javascript, jquery, function, document.write

我已经搜索了从我尝试运行的 Javascript 函数中删除 23:59:59 GMT-0400 (EDT) 的各种方法。我只想显示 2013 年 4 月 30 日星期二（例如）。这是我到目前为止...

```
<script type="text/javascript">
    var now = new Date();
    document.write(new Date(now.getFullYear(), now.getMonth() + 1, 0, 23, 59, 59));
</script> 
```

哪个输出...

**2013 年 4 月 30 日星期二 23:59:59 GMT-0400 (EDT)**

任何帮助都会很棒！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T21:03:12.020

```
<script type="text/javascript">
    var now = new Date();
    document.write(new Date(now.getFullYear(), now.getMonth() + 1, 0, 23, 59, 59).toDateString());
</script> 
```

# json - 使用 JSON.Net 的 C# 到 JSON 序列化

> ID：15843446
> 
> 赞同：34
> 
> 时间：2013-04-05T20:59:09.780
> 
> 标签：json, serialization, json.net

我有一个 C# 列表，如下所示：

```
var reqUsers = from user in users
    select new
    {
        username = user.username,
        firstName = user.firstName,
        lastName = user.lastName,
        email = user.email
    }; 
```

我使用以下内容将/序列化为 JSON（ Newtonsoft.JSON ）：

```
var json = JsonConvert.SerializeObject(reqUsers); 
```

使用上面的代码，我得到一个像这样的 json 字符串：

```
[{ username: "alan", firstName: "Alan", lastName: "Johnson", email: "alan@test.com" },
 { username: "allison", firstName: "Allison", lastName: "House", email: "al@test.com" },
 { username: "ryan", firstName: "Ryan", lastName: "Carson", email: "ryan@test.com" } ] 
```

但是这是我需要得到的：因为我使用的是车把模板-

```
var testdata = {
  users: [
  { username: "alan", firstName: "Alan", lastName: "Johnson", email: "alan@test.com" },
  { username: "allison", firstName: "Allison", lastName: "House", email: "al@test.com" },
  { username: "ryan", firstName: "Ryan", lastName: "Carson", email: "ryan@test.com" } ] 
```

如何使用 Serializer 来命名 JSON 数组，如上？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-04-05T21:02:12.560

采用：

```
var json = JsonConvert.SerializeObject(new { users = reqUsers }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-05T07:39:22.740

采用：

```
var json= new JavaScriptSerializer().Serialize(reqUsers); 
```

# java - java.lang.ClassCastException：com.ibm.ws.classloader.Handler$ClassLoaderURLConnection 与 java.net.JarURLConnection 不兼容

> ID：15843451
> 
> 赞同：0
> 
> 时间：2013-04-05T20:59:31.903
> 
> 标签：java, jar, resources, websphere

如何使用 wsjar 文件列出目录的内容？

下面的代码不适用于 WebSphere，但适用于 JBoss：

```
Enumeration<URL> en = getClass( ).getClassLoader( ).getResources( "com/myjars" );

while( en.hasMoreElements( ) ) {

    URL url = en.nextElement( );

    if( url.toString( ).startsWith( "jar:file:" ) || url.toString( ).startsWith( "wsjar:file:" ) ) {

        JarFile jarFile = ( (JarURLConnection)url.openConnection( ) ).getJarFile( );

        Enumeration<JarEntry> eje = jarFile.entries( );

        while( eje.hasMoreElements( ) ) {
            JarEntry jarEntry = eje.nextElement( );

            System.out.println( jarEntry.getName( ) );
        }
    }
} 
```

在 WebSphere 上，我得到：

java.lang.ClassCastException：com.ibm.ws.classloader.Handler$ClassLoaderURLConnection 与 java.net.JarURLConnection 不兼容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:27:54.693

您可以尝试通过从 URL 中剥离`jar:file:`并使用[`ZipFile`类型](http://docs.oracle.com/javase/7/docs/api/java/util/zip/ZipFile.html)来打开，因为您对 jar 作为 jar 并不真正感兴趣，而是对 jar 中的文件（这只是一个 zip 文件）感兴趣。

所以，`"jar:file:///foo/bar/baz.jar"`变成`"/foo/bar/baz.jar"`你传递给[`ZipFile(String)`构造函数的](http://docs.oracle.com/javase/7/docs/api/java/util/zip/ZipFile.html#ZipFile%28java.lang.String%29)

# jsf - 当我们触发 selectoneMenu valueChangeListener 事件时，我们可以在 selectonemenu 组件旁边创建文本框吗

> ID：15843454
> 
> 赞同：0
> 
> 时间：2013-04-05T20:59:38.437
> 
> 标签：jsf

想即时创建文本框有可能吗？
选择要运行的报告：

```
<h:selectOneMenu value="#{reportBean.selectReport}">
    <f:selectItems value = "#{reportBean.allReports}" />
    <f:ajax listener="#{reportBean.getReqID}" render="reqID"> </f:ajax>
</h:selectOneMenu> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T21:46:40.547

似乎您想`<h:inputText>`根据您的`<h:selectOneMenu>`. 是的，这可以通过简单的 JSF 轻松实现。

请注意，如果您使用设置`rendered`属性，因为`false`组件不会出现在组件树中，因此任何调用（甚至 ajax 调用）都无法引用它。为了*更新*它，您应该将组件包装在另一个组件中，例如`<h:panelGroup>`并呈现包装器。基本示例：

```
<h:form id="frmRep">
    <h:selectOneMenu value="#{reportBean.selectReport}">
        <f:selectItems value = "#{reportBean.allReports}" />
        <!--
          assuming your reportBean.getReqID method will change the value of
          reportBean.showReqID attribute to render/not render it and works well
        -->
        <f:ajax listener="#{reportBean.getReqID}" render="pnlRepName" />
    </h:selectOneMenu>
    <h:panelGroup id="pnlRepName">
        <h:inputText id="reqID" rendered="#{reportBean.showReqID}"
            value="#{reportBean.reportName}" />
    <h:panelGroup>
</h:form> 
```

相反，对于这个特定的要求，我不建议使用 ajax 调用，因为它必须去服务器只检查组件是否应该或不应该显示给用户。我会选择一个 JavaScript 解决方案来在客户端处理这个问题。

# mysql - 如何标准化数字组？

> ID：15843456
> 
> 赞同：0
> 
> 时间：2013-04-05T20:59:40.237
> 
> 标签：mysql, database-design

我在Excel中有这个，每行增加5000。`AAAA`是前缀组代码。在 excel 中，我突出显示已完成的操作。例如：

AAAA 1

```
AAAA 1 00000
AAAA 1 05000
AAAA 1 10000
AAAA 1 15000
AAAA 1 20000
AAAA 1 25000
AAAA 1 30000
AAAA 1 35000
AAAA 1 40000
AAAA 1 45000 
```

AAAA 2

```
AAAA 2 05000
AAAA 2 10000
AAAA 2 15000
AAAA 2 20000
AAAA 2 25000
AAAA 2 30000
AAAA 2 35000
AAAA 2 40000
AAAA 2 45000 
```

前缀代码可以是任意一组字母。后前缀代码编号从 1 到 9

将其规范化为 mysql 表的解决方案是什么？我不想把所有这些都放在一张桌子上，否则它会太大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:46:42.467

2张桌子。但我在这里看不到太多标准化！无论如何，您必须将所有值保存在一张表中。你有什么因素可以将值分成许多表吗？

```
tblprefix 

pre_id   prefix name

1         AAAAA
2         BBBBB
3         CCCCC

tblvalues

valueid   value pre_id      prefix_code
1        05000    1            2
2        40000    1            2
3        45000    1            2 
```

# sql - 在 Toad 中将日期作为参数的基本 SQL 查询构造

> ID：15843465
> 
> 赞同：0
> 
> 时间：2013-04-05T21:00:06.713
> 
> 标签：sql, oracle, aggregation, date-arithmetic

我对 SQL 很陌生，并且在理解它的语法时遇到了一些问题。在您将其标记为重复之前，我花了很多时间阅读与我类似的其他问题。

我需要做的是获取 2012 年 7 月至 12 月期间每个月生产的产品的总和，并按每个月计算。

我的表有生产日期和当天生产的总物品的列。例如，数据库中的生产日期存储为“5/21/2013 11:23:45 AM”

表名为“FIRST_CONVEYOR_ROW”

列名为“AMNT_OF_PRODUCT”和 PROD_DATE

我需要一些类似的东西：

```
 SELECT SUM(AMNT_OF_PRODUCT) AS MONTHLYTOTAL FROM FIRST_CONVEYOR_ROW
       FOR EVERY MONTH BETWEEN JULY AND DECEMBER OF 2012 
```

显然查询的第二行不正确，但它传达了我的需要。

我正在寻找的输出将类似于：

七月：4吨

8月：6吨

.....总共30吨。

我可以很容易地获得总体总数，但是当我尝试添加日期范围时，它会让我大吃一惊。

非常感谢任何见解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T22:11:57.157

这是你想要的吗：

```
CREATE TABLE FIRST_CONVEYOR_ROW (
  AMNT_OF_PRODUCT NUMBER,
  PROD_DATE       date
);

INSERT INTO FIRST_CONVEYOR_ROW
values(7, to_date('01/07/2012','dd/mm/yyyy'));
INSERT INTO FIRST_CONVEYOR_ROW
values(4, to_date('02/07/2012','dd/mm/yyyy'));
INSERT INTO FIRST_CONVEYOR_ROW
values(2, to_date('02/08/2012','dd/mm/yyyy'));
INSERT INTO FIRST_CONVEYOR_ROW
values(3, to_date('04/08/2012','dd/mm/yyyy'));
INSERT INTO FIRST_CONVEYOR_ROW
values(9, to_date('04/12/2012','dd/mm/yyyy'));
INSERT INTO FIRST_CONVEYOR_ROW
values(6, to_date('04/01/2013','dd/mm/yyyy'));
COMMIT; 
```

查询是：

```
select to_char(PROD_DATE, 'Month') as product_month, sum(AMNT_OF_PRODUCT) as MONTHLYTOTAL
from   FIRST_CONVEYOR_ROW
where  PROD_DATE between to_date('01/07/2012', 'dd/mm/yyyy') and to_date('31/12/2012', 'dd/mm/yyyy')
group by ROLLUP (to_char(PROD_DATE, 'Month'))
order by to_date(product_month, 'Month')
; 
```

查询结果：

```
PRODUCT_MONTH           MONTHLYTOTAL
----------------------- ------------
July                              11
August                             5
December                           9
                                  25 
```

# matlab - 在不将 MATLAB 添加到 PATH 的情况下使用 MATLAB 引擎应用程序

> ID：15843466
> 
> 赞同：0
> 
> 时间：2013-04-05T21:00:18.190
> 
> 标签：matlab, winapi, dll, path, matlab-engine

我正在开发一个 MATLAB 引擎应用程序。为了使其工作，需要将 MATLAB 添加到 PATH 环境变量中，以便引擎应用程序可以找到某些 DLL（libeng 和 libmx）。

当 MATLAB 注册为 COM 服务器时，它会将其位置写入注册表，我可以访问它。使用此信息，是否有一种简单的方法可以让引擎应用程序工作而无需将 MATLAB 添加到 PATH？引擎应用程序理论上可以从注册表中读取这些 DLL 的位置，但问题是它甚至无法在没有这些 DLL 的情况下启动（根据 MA​​TLAB 引擎编译指令以标准方式编译时）。

我对winapi不是很熟悉，对COM一点也不熟悉。

是否有一个简单的解决方案可以让问题根据注册表中的信息找到它的 DLL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:32:36.993

我找到了以下解决方案：

如果我们使用[延迟 DLL 加载](http://msdn.microsoft.com/en-us/library/151kt790.aspx)，那么我们就有机会在程序尝试加载 DLL 之前设置 DLL 搜索路径。

为此，需要将以下内容添加到链接器选项中： `/DELAYLOAD:libmx.dll /DELAYLOAD:libeng.dll`并且有必要链接到`delayimp.lib`. 完成此操作后，我们可以添加对[SetDllDirectory()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686203%28v=vs.85%29.aspx)的调用，并将 libmx.dll 和 libeng.dll 所在位置的路径添加到 main/WinMain 函数的开头。

# uitableview - 从 -tableView:cellForRowAtIndexPath: 计算“indexPath”处的自定义 UITableViewCell 高度：？

> ID：15843471
> 
> 赞同：1
> 
> 时间：2013-04-05T21:00:35.253
> 
> 标签：uitableview, heightforrowatindexpath

我在`UITableViewCell`自定义类里面调整了一个自定义的高度，我相信我需要使用`-tableView:cellForRowAtIndexPath:`方法来调整单元格的高度。我试图在自定义单元格类中调整自定义单元格的高度，然后在给定的索引路径中抓取单元格，然后返回该单元格的高度，如下所示：

```
 - (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath;
 {
     CustomUITableViewCell *cell = (CustomUITableViewCell *)[tableView cellForRowAtIndexPath:indexPath];

     return cell.frame.size.height;
 } 
```

但我得到堆栈溢出。有什么更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T07:56:45.300

表格视图`delegate`将首先调用`heightForRowAtIndexPath:`，然后根据计算的信息`datasource`构造单元格。`cellForRowAtIndexPath:`

因此，您的方法将行不通。

您需要有一些逻辑来计算高度。（例如，如果您正在显示文本，则高度可能是动态的并且取决于文本的数量 - 您可以使用一种`NSString`方法来计算。）

如果您只是显示几种具有固定高度的单元格，只需将这些高度定义为常量，并根据您`cellForRowAtIndexPath:`决定使用哪个单元格的相同逻辑返回正确的高度。

```
#define kBasicCellHeight 50
#define kAdvancedCellHeight 100

- (CGFloat)tableView:(UITableView *)tableView 
       heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    if (needToUseBasicCellAtThisIndexPath) {
       return kBasicCellHeight;
    }
    return kAdvancedCellHeight;         
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T03:05:16.467

如果是故事板单元格，您可以调用`dequeueReusableCellWithIdentifier:`. 否则，您可以直接使用`[CustomUITableViewCell alloc] initWithFrame:]`.

我自己使用这种方法（使用原型单元来计算高度），因为它允许我们的设计人员修改故事板单元而无需更改代码。

[您可能希望根据此处](https://stackoverflow.com/questions/13660004/retrieve-custom-prototype-cell-height-from-storyboard/14127936#14127936)讨论的高度是静态的还是动态的来调整您的方法。

# c# - 使用扩展参数的类型作为通用类型参数传递

> ID：15843472
> 
> 赞同：1
> 
> 时间：2013-04-05T21:00:36.723
> 
> 标签：c#, .net, generics, extension-methods

我正在尝试编写和扩展方法，该方法采用 this 参数的类型并将其传递给通用类型的方法，即

```
public TDestination MethodName<TSource, TDestination>(this TSource obj)
{
      return DestinationClass.DestinationMethod<TSource, TDestination>(obj)
} 
```

我怎么能假设 this 参数的类型作为目标方法的类型在调用方法时定义 TSource 是可能的

澄清：我想创建一个辅助方法，以便我可以直接从对象调用 MethodName 并使用具有 2 种类型的预先编写的泛型方法，因此我想将其缩短为单个目标类型，并让该方法假定对象的类型为传递给扩展方法

使用示例：即 AutoMapper 扩展示例

原始方法调用：

```
 var person = _db.People.Single(q=>q.Id == 5);
  //use automapper directly to map object 
  return Mapper.Map<Person, PersonDisplay>(person); 
```

我想把它缩短到

```
 var person = _db.People.Single(q=>q.Id == 5);

  //use extension method to map 
  return person.MapTo<PersonDisplay>() 
```

想把它缩短到

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:05:55.453

你不能。通用参数必须全部为显式或全部为隐式。你不能让编译器推断出一个而提供另一个。因此，您将需要不同的 API。也许通过中间体，所以你有类似的东西：

```
obj.Foo().Bar<AnotherType>(); 
```

这是可能的。

# javascript - ExtJS 标签方向

> ID：15843473
> 
> 赞同：0
> 
> 时间：2013-04-05T21:00:40.113
> 
> 标签：javascript, css, extjs

如何使 ExtJS[标签](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.Label)水平呈现，如下所示：

```
------------
-          -
------------ 
```

垂直渲染如下：

```
----
-  -
-  -
-  -
---- 
```

*当然包括其中的文字*。

在 css 中，我会设置文本的样式，`writing-mode: vertical-lr;`用于在适当的方向（[source](https://stackoverflow.com/a/11779632/1211429)）编写文本。但是在这种情况下，为了使包含标签的组件以适当的大小呈现，我需要更改整个容器的方向。

因此，这在 ExtJS 4.1+ 中可行吗？如果是，如何？[小提琴](http://jsfiddle.net/)将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T21:08:22.727

为了使用 ExtJS 执行此操作，您需要将文本项绘制为 90 度：

```
Ext.create('Ext.panel.Panel', {
    title: 'Panel with VerticalTextItem',
    width: 300,
    height: 200,
    lbar: {
        layout: {
            align: 'center'
        },
        items: [{
            xtype: 'text',
            text: 'Sample VerticalTextItem',
            degrees: 90
        }]
    },
    renderTo: Ext.getBody()
}); 
```

这将创建一个带有旋转到 90° 的文本项的面板。此代码示例可以[在 Ext.draw.Text 上的 ExtJS 文档中找到](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.draw.Text)，并且在 4.1.0 及更高版本中可用。[这是根据要求对上述代码进行的修改。](http://jsfiddle.net/H5h7D/)

# php - 覆盖图像周围的黑框（GD 库）

> ID：15843474
> 
> 赞同：0
> 
> 时间：2013-04-05T21:00:41.770
> 
> 标签：php, html, gd

好的，所以我设法覆盖了两个保持透明度的图像，但是现在覆盖图像的右侧周围有一个巨大的黑框..它仍然是透明的，我只需要这个框消失..

这是我的代码..

```
<?php
header('Content-Type: image/png');

$master = imagecreatefrompng('Master.png');
$month = imagecreatefrompng('Mar.png');

imagealphablending($month,true);

imagealphablending($master,true);

imagecopy($master, $month, 83, 290, 0, 0, imagesx($master), imagesx($master));

imagepng($master, null, 1);

?> 
```

我曾尝试使用 imagesavealpha() 但这也不起作用..有人有任何想法吗？

多谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:05:46.953

```
imagecopy($master, ..snip.. imagesx($master), imagesx($master));
                                    ^^^^^^^---should be $month
                                                    ^--- should be 'y'
                                                      ^^^^^^^--- also $month 
```

# ssh - ssh 下 find 命令的多个 -exec 语句问题

> ID：15843476
> 
> 赞同：0
> 
> 时间：2013-04-05T21:01:03.503
> 
> 标签：ssh

我整理了一个 find 命令，它将查找系统上的所有 java 安装。它有 3 个 -exec 子句： find / -name java -type f -exec ls -l {} \; -exec {} -版本\; -执行回声\;

从命令提示符运行时，它会生成如下输出：

```
-rwxr-xr-x 1 root root 47308 Oct 11  2009 ./usr/java/jre1.6.0_17/bin/java
java version "1.6.0_17"
Java(TM) SE Runtime Environment (build 1.6.0_17-b04)
Java HotSpot(TM) Server VM (build 14.3-b01, mixed mode)

-rwxr-xr-x 1 root root 47308 Nov 14 06:27 ./usr/java/jdk1.6.0_38/bin/java
java version "1.6.0_38"
Java(TM) SE Runtime Environment (build 1.6.0_38-b05)
Java HotSpot(TM) Server VM (build 20.13-b02, mixed mode) 
```

我遇到的问题是从 ssh 运行命令时未生成 java 版本。

```
ssh -T -o $USER@$ip_addr  "find / -name java -type f -exec ls -l {} \; -exec {} -version \; -exec echo \;" 
-rwxr-xr-x 1 root root 47308 Oct 11  2009 ./usr/java/jre1.6.0_17/bin/java

-rwxr-xr-x 1 root root 47308 Nov 14 06:27 ./usr/java/jdk1.6.0_38/bin/java 
```

执行第一个 -exec 子句 (ls -l)。第二个 -exec 子句不起作用（java -version）。第三个 -exec 子句被执行（回显）。

问题出在 ssh 命令上。这在 shell 脚本中可以正常工作。我尝试转义一些字段，但找不到解决方案。

有什么建议么？

提前致谢。斯科特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T21:16:17.247

命令

```
java -version 
```

将其输出发送到 stderr，而不是 stdout。

您可以通过附加将标准错误重定向到标准输出

```
2>&1 
```

到命令。例如

```
ssh -T -o $USER@$ip_addr  "find / -name java -type f -exec ls -l {} \; -exec {} -version \; -exec echo \; 2>&1" 
```

# iphone - 当我 setValue 和 forKey 时，iOS NSMutabledictionary 为空

> ID：15843478
> 
> 赞同：0
> 
> 时间：2013-04-05T21:01:18.040
> 
> 标签：iphone, ios, ipad, nsmutabledictionary

我知道我可能做了一些非常愚蠢的事情，但我不知道这段代码的错误在哪里：

```
NSString *string=@"some string";
[self.dataResponse setValue:string forKey:@"Code"]; 
```

我也试过：

```
NSString *string=@"some string";
[self.dataResponse setObject:string forKey:@"Code"]; 
```

但在这两种情况下，我的 nsmutable 字典 self.dataResponse 都是空的。你们中的任何人都知道我在做什么错吗？

我真的很感谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T23:56:36.033

您需要分配和初始化 NSMutableArray 以在其中设置值。例子：

```
self.dataResponse = [[NSMutableArray alloc] init]; // This is alloc and init

NSString *string = @"Some Val";
[self.dataResponse setValue:string forKey:@"Code"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T21:10:58.790

你的变量 self.dataResponse 只是零。

你不得不说

```
self.dataResponse = [NSMutableDictionary new]; 
```

分配和实例化一个字典。

之后，您可以为键分配值！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T23:26:40.873

我认为你一定还没有初始化你的可变字典，无论是使用 alloc/init 还是方便的初始化程序。在你这样做之前，为 key 设置任何对象都不会做任何事情。您可以懒惰地执行此操作，也可以在视图中加载（在其他地方）。

# wordpress - 通过 git 在远程服务器上管理 wordpress 博客

> ID：15843479
> 
> 赞同：1
> 
> 时间：2013-04-05T21:01:26.850
> 
> 标签：wordpress, git, version-control

我希望能够在我的机器上开发我的插件和主题，并且这些更改几乎可以立即反映在我的服务器上。我也想要一个备用计划。所以 git & github 似乎是一个很好的解决方案。我想对服务器进行定期更改（从本地推送），并偶尔将它们上传到 github（本地到 github 或远程到 github）。

问题是我可以将 repo 从 github 克隆到远程服务器和本地计算机，并且能够从本地推送到远程或从 github 拉到远程（如果我不在家）？

编辑：我做了一项研究，发现我实际上需要服务器中的一个裸仓库，但我希望它能够向/从 github 推送/拉取。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T03:44:51.550

在 github 和 bitbucket ( [https://bitbucket.org](https://bitbucket.org) ) 中，您可以添加来自不同机器的任意数量的 ssh 密钥，并从您想要的任何地方推拉。生成这样一个密钥的命令是

```
ssh-keygen 
```

用 enter 回答问题，ssh 密钥将在`/home/user/.ssh/id_rsa.pub`. 您必须为每台要推送的机器执行此操作，并且当存储库设置为私有时，您还必须为您想要从中提取的那些机器执行此操作。

所以工作流程将是

*   本地编辑
*   推送到 github/butbucket 仓库：`git push -u origin`
*   登录到运行 wordpress 的机器：`git pull`

# jquery - raphael.js jquery如何分配和访问id

> ID：15843485
> 
> 赞同：1
> 
> 时间：2013-04-05T21:01:44.353
> 
> 标签：jquery, raphael

raphael.js 文档似乎警告不要使用 element.node ，但它似乎是调用事件的唯一方法。我创建了一个 jsFiddle，它使用 3 种不同的方法为 3 种不同的形状分配 id：.attr、.data 和 .node.id。

.attr 方法我得到一个未定义的 id 警报，并且没有响应 click 事件。

.data 方法我得到了正确的警报 ID，但点击的警报未定义。

.node.id 我得到了正确的警报 id 和正确的点击警报。

有人可以帮助我最好使用哪种方法（如果 .node.id 可以）以及使用 jquery 定位这些形状的正确方法。

html：方形矩形圆

jQuery/拉斐尔

```
var p = Raphael("test");

$(':radio[name="shapes"]').on('click', function () {
var shapeName = $(this).attr('id');

//test attr id
if (shapeName == "square") {
    var test1 = p.rect(10, 10, 40, 40);
    test1.attr('fill', 'black');
    test1.attr('id', 'help1');
    var data1;
    data1 = test1.attr('id');
    alert(data1);
    $(test1.node).click(confirmFunc3, removeOtherNodes);
}
//test node.id
else if (shapeName == "rectangle") {
    var test2 = p.rect(200, 20, 50, 80);
    test2.attr('fill', 'blue');
    test2.node.id='help2';
    var data2;
    data2 = test2.node.id;
    alert(data2);
    $(test2.node).click(confirmFunc);
}
//test data id
else if (shapeName == "circle") {
    var test3 = p.circle(100, 100, 40);
    test3.attr('fill', 'red');
    test3.data('id', 'help3');
    var data3;
    data3 = test3.data('id');
    alert(data3);
    $(test3.node).click(confirmFunc2);
}

function confirmFunc() {
    alert(this.id);
}
function confirmFunc2() {
    alert($(this).data('id'));
}
function confirmFunc3() {
    alert($(this).attr('id'));
}
function removeOtherNodes() {
    $('#help2').remove();
    $('#help3').remove();
}
}); 
```

[http://jsfiddle.net/adam123/9wUJN/115/](http://jsfiddle.net/adam123/9wUJN/115/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T10:31:28.543

1)`element.node.id = "abc"`如果您稍后需要通过 jQuery 访问元素，可以这样做 -`$('#abc').on("click", doSomething);`

2) 但是，当您可以使用 Raphael 时，为什么还需要将 jQuery 用于事件处理程序？

```
raphaelElement.mousedown(eventHandlerFunction); 
```

或者

```
raphaelElement.mousedown(function(e){
   ...
}); 
```

3）你也可以这样做：

```
raphaelElement.id = "abc";
var thatElement = paper.getById("abc");
thatElement.mousedown(function(e){
   ...
}); 
```

# php - 使用 LIKE 语句搜索 MySQL 数据库

> ID：15843492
> 
> 赞同：0
> 
> 时间：2013-04-05T21:02:01.650
> 
> 标签：php, html, mysql, search, sql-like

我需要在我的数据库中返回用户的搜索结果。

目前，我已经设法在 MySQL 查询中使用 LIKE 函数来返回结果计数，但我需要它来回显所有结果的用户名，而不仅仅是第一个结果：

```
<?php
    // mysql details
    $host="localhost"; // Host name 
    $username="classified"; // Mysql username 
    $password="classified"; // Mysql password 
    $db_name="jaycraftcommunity"; // Database name 
    $tbl_name="members"; // Table name 

    // Connect to server and select database.
    mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
    mysql_select_db("$db_name")or die("cannot select DB");

    // form variable to local
    $search = $_POST['username'];

    // make query
    //$sql = "SELECT * FROM $tbl_name WHERE (username='$search' OR verified='$search')"; // sql query
    $sql = "SELECT username FROM $tbl_name WHERE username LIKE '%$search%'"; // sql query
    $result = mysql_query($sql); // do query

    // handle query data
    $count = mysql_num_rows($result);
    $row = mysql_fetch_row($result);
    $array = mysql_fetch_array($result);

    echo $count;

    foreach( $row as $arrays ): ?>
    <tr>
        <td><?php echo htmlspecialchars( $arrays ); ?></td>
        <br />
    </tr>
<?php
    endforeach;
?> 
```

HTML 表单如下所示：

```
<h2>Search</h2>

<form method="post" action="search_engine.php">
    Search for:
    <input type="text" name="username">
    <input type="submit" value="Search for username">
</form> 
```

目前，如果您访问[http://dev.jaycraft.co/player/dupe/search.php](http://dev.jaycraft.co/player/dupe/search.php)，您可以看到它正在运行。搜索单个字母，它显示 echo $count 有多少结果，但只回显第一个结果。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T21:07:55.390

每次调用`mysql_fetch_row($result)`将返回另一行并推进光标。您只需要使用 while() 来遍历结果中的所有行：

```
while($row = mysql_fetch_row($result)) {
    echo $row[0];
}} 
```

为了便于使用，最好使用`mysql_fetch_assoc($result);`which 将返回一个关联数组：

```
while($row = mysql_fetch_assoc($result)) {
    echo $row['username'];
}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T21:09:48.480

你可以

```
<?php
$sql = mysql_query($sql);
while($row = mysql_fetch_assoc($sql)){
    echo $row['username'].'<br />';
}
?> 
```

但请使用 mysqli 而不是 mysql！[http://www.php.net/manual/en/book.mysqli.php](http://www.php.net/manual/en/book.mysqli.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-22T23:45:03.600

当您使用准备行时，上述解决方案不起作用，因为替换符号与类似符号相同。尝试通过将其预先格式化为字符串来在准备中制作搜索参数。然后只需通过 foreach 或 for 循环遍历可用行。

```
 $Table_Name    = $wpdb->prefix.'tablename';
   $SearchField = '%'. $YourVariable . '%';   
   $sql_query     = $wpdb->prepare("SELECT * FROM $Table_Name WHERE ColumnName LIKE %s", $SearchField) ;
 $rows = $wpdb->get_results($sql_query, ARRAY_A);
if(!empty($rows))
  {
   $TotalRows = $wpdb->num_rows;
   foreach($rows as $row)
     {
     echo $row['field name'];
     } 
```

}

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-05T21:03:51.837

你需要一个while循环遍历你的行：

```
while($row = mysql_fetch_array($result){
 foreach( $row as $cell): ?>
    <tr>
        <td><?php echo htmlspecialchars( $cell); ?></td>
        <br />
    </tr>
<?php
    endforeach;
?>

} 
```

`mysql_fetch_row`并且`mysql_fetch_array`几乎是唯一的函数，它们都从结果集中获取下一行。您可以使用`mysql_fetch_assoc`数据库列名作为键来获取值。（这是推荐的）

# html5-canvas - EaselJS：拖动蒙版时将 updateCache() 与 AlphaMaskFilter 一起使用

> ID：15843493
> 
> 赞同：1
> 
> 时间：2013-04-05T21:02:08.697
> 
> 标签：html5-canvas, masking, createjs

我正在使用带有 alpha 渐变的导入 png，我将其设置为掩码，以显示分配给它的位图。蒙版对象是可拖动的（有点像手电筒）。我知道我应该使用 AlphaMaskFilter 作为过滤器之一，并且我知道我应该使用 .updateCache()... 我只是不确定我是否正确使用它们？

```
var stage;
var assetQueue;
var bg;
var bgMask;
var container;
var amf;

$(document).ready(function(){
    loadImages();

});

function loadImages()
{

    // Set up preload queue
    assetQueue = new createjs.LoadQueue();

    assetQueue.addEventListener("complete", preloadComplete);
    assetQueue.loadManifest([{id:"img_bg",src:"images/Nintendo-logo-red.jpg"}, {id:"img_bg_mask",src:"images/background_mask.png"}]);
}

function preloadComplete()
{
    assetQueue.removeEventListener("complete", preloadComplete);

    init();
}

function init()
{
    stage = new createjs.Stage("stage_canvas");

    setBackgrounds();

    sizeStage();

    $(document).mousemove(function(evt){
        trackMouse(evt);
    });
}

function trackMouse(evt)
{
    var mouseX = evt.pageX;
    var mouseY = evt.pageY;

    // Move the containing clip around
    container.x = mouseX - (bgMask.image.width / 2);
    container.y = mouseY - (bgMask.image.height / 2);

    // Offset the position of the masked image.
    bg.x = -container.x;
    bg.y = -container.y;

    container.updateCache();
    stage.update();
}

function setBackgrounds()
{   
    bg = new createjs.Bitmap(assetQueue.getResult("img_bg"));
    bgMask = new createjs.Bitmap(assetQueue.getResult("img_bg_mask"));
    container = new createjs.Container();

    container.addChild(bg);
    amf = new createjs.AlphaMaskFilter(bgMask.image)
    container.filters = [amf];

    container.cache(0, 0, bg.image.width, bg.image.height);

    stage.addChild(container);

    stage.update();
}

function sizeStage()
{

    var windowW = 600;
    var windowH = 600;

    stage.canvas.width = windowW;
    stage.canvas.height = windowH;

    stage.update();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T01:32:13.970

找到解决方案（对于任何感兴趣的人）。关键是将要屏蔽的图像添加到容器中。将容器移动到您想要的任何位置，然后偏移容器内包含的图像。代码已更新以反映这一点。

# javascript - JS 包含标签未从 dom 中删除，即使它已从文件中删除

> ID：15843497
> 
> 赞同：0
> 
> 时间：2013-04-05T21:02:25.747
> 
> 标签：javascript, ruby-on-rails, browser-cache

我正在构建一个 Rails 应用程序，但我遇到了一个问题，即弹出两个确认框，而不是使用 :confirm 时弹出一个。

我得出的结论是，这是`rails.js`被包含两次的结果，一次在我的布局中，一次在`application.js`. `<%=javascript_include_tag "rails.js"%>`但是，当我从中删除`application.html.erb`并在应用程序上查看页面源时，它仍然显示它被包含在内。

我尝试删除浏览器缓存，重新启动浏览器，进入隐身模式，清理资产管道，确保`config.assets.debug = false`. 关于如何缓解这个问题的任何想法？谢谢。

application.html.erb 的头部：

```
 <head>
       <%= csrf_meta_tag %>
        <meta charset="utf-8">
        <!-- [if IE]>  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><![endif]-->
        <title>Title</title>
        <meta name="description" content="">
        <!-- <meta name="viewport" content="width=device-width"> -->
        <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">

        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
<%= javascript_include_tag "application" %>
        <%=stylesheet_link_tag("normalize")%>
        <%=stylesheet_link_tag("main")%>
        <%=stylesheet_link_tag("r")%>
        <%=stylesheet_link_tag("webfonts/ss-standard")%>
        <!--link type="text/css" href="css/jquery.jscrollpane.css"-->

        <%=javascript_include_tag "vendor/modernizr-2.6.1.min"%>
        <%=javascript_include_tag "//use.typekit.net/rwg2mxn.js"%>      
        <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
        <%=javascript_include_tag "jquery.cookie.js"%>
        <!--script type="text/javascript" src="http://platform.linkedin.com/in.js">
            api_key: YOUR_API_KEY_GOES_HERE
            authorize: true
        </script-->
        <%=javascript_include_tag "plugins.js"%>
        <%=javascript_include_tag "vendor/jquery.touchSwipe.min"%>
        <!--script src="js/vendor/jquery.mousewheel.js"></script>
        <script src="js/vendor/jquery.jscrollpane.min.js"></script-->

    <%=yield :head%>

    </head> 
```

应用程序.js：

```
// This is a manifest file that'll be compiled into application.js, which will include all the files
// listed below.
//
// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,
// or vendor/assets/javascripts of plugins, if any, can be referenced here using a relative path.
//
// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// the compiled file.
//
// WARNING: THE FIRST BLANK LINE MARKS THE END OF WHAT'S TO BE PROCESSED, ANY BLANK LINE SHOULD
// GO AFTER THE REQUIRES BELOW.
//
//= require jquery
//= require jquery-fileupload/basic
//= require jquery-fileupload/vendor/tmpl
//= require_tree . 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:14:03.370

Rails 会将你所有的 js 文件包含在 app/assets/javascripts 中，因为

应用程序.html.erb

> javascript_include_tag "应用程序"

和

应用程序.js

> //= 要求树

如果您不想导入 rails.js，则必须从 app/asssets/javascript 目录中删除该文件。

# c - 为什么有些 C 程序在 debug 中可以工作，但在 release 中不行？

> ID：15843499
> 
> 赞同：4
> 
> 时间：2013-04-05T21:02:37.653
> 
> 标签：c, debugging, crash, release, codeblocks

好的，

所以我被困在这里。我有一个程序的代码，该程序根据算法系统地执行站成一圈的人，但我遇到了它在发布模式下崩溃的问题。如果我使用调试器（代码块）运行它，我的代码运行良好，但如果我不这样做，它就会崩溃。我在网上环顾四周，唯一发现的是未初始化的变量，但我尝试在声明时立即为变量设置值，但并没有解决问题。

如果有人能看到我的问题是什么，我将不胜感激。

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>

// if the program does not work, please run in debugger mode. It will work.

void remove_person(int** array, int arraySize, int position)
{
    int i;
    for (i = 0; i < arraySize; ++i)
        printf("%d ", (*array)[i]);
    printf("\n");

    int* temp = malloc((arraySize - 1) * sizeof(int)); // create temporary array smaller by one element

    memmove(temp,*array,(position+1)*sizeof(int)); // copy entire array before position

    memmove(temp+position,(*array)+(position+1),(arraySize - position)*sizeof(int)); // copy entire array after postion

    for (i = 0; i < arraySize - 1; ++i)
        printf("%d ", (temp)[i]);
    printf("\n");

    free (*array);
    *array = temp;
}

int kill(int** a, int n)
{
    int pos = 0;
    int round = 1;
    while(n > 1)
    {
        pos = pos + 2 - (round % 2);

        while(pos >= n)
            pos = pos - n;

        remove_person(a,n,pos);
        n--;

        while(pos >= n)
            pos = pos - n;
        round++;
    }
    return *a[0];
}

void main()
{
    int n, survivor, i;
    int* people;

    printf("Enter number of people for Russian Roulette: \n");
    scanf("%d", &n);

    people = (int*) malloc(n*sizeof(int));

    for(i=0; i < n; i++)
    {
        people[i] = i;
    }

    survivor  = kill(&people, n);
    printf("The survivor is person #%d\n", survivor);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T21:13:37.983

标题问题（“为什么某些 C 程序在调试中工作而不在发布中工作？”）的基本答案是“*当它们调用未定义的行为时*”。

在此处

```
memmove(temp,*array,(position+1)*sizeof(int)); // copy entire array before position

memmove(temp+position,(*array)+(position+1),(arraySize - position)*sizeof(int)); // copy entire array after postion 
```

你复制太多了。要了解原因，请观察第一个`memmove`副本到`temp[0]`, `temp[1]`, ..., `temp[position]`，第二个副本到`temp[position]`, `temp[position+1]`, ..., `temp[position+arraySize-position-1] = temp[arraySize-1]`（注意重叠`temp[position]`）。但是`temp`只有`arraySize-1`元素的空间——你复制的比允许的多一个，所以你得到**未定义的行为**。

它可能在调试而不是发布模式下工作，因为堆的布局不同（调试模式分配器可能会用额外的空间填充分配，以在调试器或分析器下运行时捕获此类错误）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T21:13:27.823

如果我输入 4（甚至高于 4 的数字）作为输入，程序会出现段错误，但我不会进入代码来查看为什么会发生这种情况。

除了该程序运行良好之外，问题是您看不到输出，因为我认为您在 Windows 上运行它。

话虽如此，您应该`scanf("%d", &n);`在末尾添加类似的内容或 run `cmd.exe`，转到包含可执行文件的目录并从那里运行它。

# python - 按条件排序 Django

> ID：15843500
> 
> 赞同：-1
> 
> 时间：2013-04-05T21:02:42.607
> 
> 标签：python, sql, django, sql-order-by, django-queryset

我有 3 个模型 userprofile 和 group ：

```
class UserProfile(models.Model):    
    slug = models.SlugField(max_length=200)
    user = models.ForeignKey(User, unique =True)
    professionalNetwork = models.ForeignKey('SubForum',null=True, blank=True)

class Group(models.Model):
    slug = models.SlugField(max_length=200)
    name = models.CharField(max_length=200)
    professionalNetwork = models.ForeignKey('SubForum')

class SubForum(models.Model):
   name = models.CharField(max_length=200) 
```

我如何获得与特定用户具有相同专业网络的所有组，然后是其余组？

我正在研究诸如 Group.objects.all().order_by('-professionalNetwork = profile.professionalNetwork') 之类的东西，但这当然行不通^^

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T22:07:09.847

这个怎么样（类似于[docs](https://docs.djangoproject.com/en/dev/ref/models/querysets/#extra)中的示例）。这个想法是你引入另一个字段来计算组是否属于指定的专业网络，然后查询集按该字段排序。

```
subforum_id = 1  # some id here by which you need to sort

sql = ''.join((
    'CASE professionalNetwork ',
    'WHEN {} THEN 1 '.format(subforum_id),
    'ELSE -1',
))
q = Group.objects.extra(select={'same_subforum': sql})
q = q.extra(order_by=['same_subforum']) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T22:27:14.857

我得到了它！

```
groupRecommendation = Group.objects.extra(
select={
    'network': """
    SELECT COUNT(*) FROM axiom_alto_userprofile
    WHERE \"professionalNetwork_id\"= axiom_alto_group.\"professionalNetwork_id\" AND axiom_alto_userprofile.id = %d """ % profile.id, 
},
).order_by('-network') 
```

这给我返回 1 表示具有相同专业网络的组和 0 表示没有的组^^

# linux - 输出重定向到文件

> ID：15843501
> 
> 赞同：-1
> 
> 时间：2013-04-05T21:02:44.750
> 
> 标签：linux, shell, io-redirection

当我将命令输出重定向到文件时`>`，文件是以“DOS 格式”创建的，之后`dos2unix`如果我希望文件为 unix 格式，我必须在文件上调用命令。

有没有办法直接从重定向命令执行此操作并在处理文件后避免？

PS我使用的是ubuntu，所以我不明白为什么文件首先以DOS格式创建......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T22:01:23.843

如果您`dos2unix`可以用作过滤器（就像 unix 实用程序通常可以使用的那样），您可以像这样通过管道将输出传递给它：

```
command | dos2unix > file 
```

在你的情况下：

```
tail -1 filename.txt | dos2unix > lastline.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T21:10:36.467

您可以通过用冒号分隔命令在一行中运行多个命令`;`

例子：

`your_cmd > your_outfile ; dos2unix your_outfile`

# c# - Windows 7 和 8 中的系统范围设置 - 注册表不再有用？

> ID：15843512
> 
> 赞同：2
> 
> 时间：2013-04-05T21:03:16.287
> 
> 标签：c#, windows, windows-8, registry, uac

我想在目标机器上跟踪系统范围内的设置——它是一个运行时间计数器，用于跟踪我的客户端运行我的软件的次数。我决定把这个值放在注册表中，但我真的想跟踪它为整个系统运行了多少次，而不仅仅是当前用户帐户。

我希望使用 HKLM 在机器级别进行跟踪，但 UAC 现在不喜欢这个。

是否有正确的方法来读取和写入机器范围的设置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T21:41:51.230

`HKLM`不适合这种用途（至少从 Windows XP 开始）。

请改用`%PROGRAMDATA%`文件夹（您也可以通过 WinAPI 函数[`SHGetKnownFolderPath`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762188%28v=vs.85%29.aspx)使用`FOLDERID_ProgramData`（[`SHGetFolderPath`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762181%28v=vs.85%29.aspx)在`CSIDL_APPDATA`Vista 之前的 Windows 版本上使用）。它专为机器的所有用户全局的应用程序数据而设计。（在 Windows 7 上，这是`C:\ProgramData`文件夹默认情况下。）您的应用程序应该在下面创建一个目录，并将计数器信息存储在该位置的文件中。

（这也意味着您不必通过允许在不适当的位置对注册表进行公共写访问来破坏 UAC 的目的。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T21:52:07.220

从[Environment.SpecialFolder 枚举](http://msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx)：

CommonApplicationData 该目录用作所有用户使用的特定于应用程序的数据的公共存储库。

在您的安装程序中创建一个“CommonApplicationData\Your Company Name\Your Product Name”文件夹，并更改该文件夹的 ACL 以允许有限的用户完全控制权限（继承的权限对于有限的用户是只读的）。您可以通过 LockPermissions MSI 表执行此操作，或者如果您的安装程序不支持 LockPermissions，请创建自定义操作来更改 ACL。

您还需要处理由快速用户切换造成的潜在编辑冲突。

# ios - 如何防止我的应用请求访问照片的权限？

> ID：15843513
> 
> 赞同：1
> 
> 时间：2013-04-05T21:03:20.937
> 
> 标签：ios, objective-c, permissions, camera, avfoundation

我正在制作一个录制视频的应用程序。我将视频保存到应用程序的沙箱中，因此我无需访问用户照片库。我不希望我的应用程序请求许可。然而，大约 50% 的应用程序打开时，它会请求访问照片的权限。

我对原因的最佳猜测：我正在使用一个库，它可以更轻松地使用 AV Foundation，并且它的代码中隐藏了一些触发权限对话框的功能。

确保对话框永远不会出现的最佳方法是什么？我可以通过在我的应用程序列表中的某处设置一个坚定的 NO 来覆盖它吗？我是否必须通过库的代码才能找到有问题的功能？如果是这样，识别罪魁祸首的最佳方法是什么？什么最有可能触发对话？

我正在使用的库：

DIYAV： [https ://github.com/diy/av](https://github.com/diy/av)

DIYCam：[https ://github.com/thisandagain/cam](https://github.com/thisandagain/cam)

我正在触发这样的录制：

```
// self.cam is a DIYCam instance
[self.cam startSession];
[self.cam captureVideoStart]; 
```

并像这样停止录制：

```
[self.cam captureVideoStop];
[self.cam stopSession]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T22:46:39.127

将“DIYAVSettingSaveLibrary”设置为false似乎已经解决了。（默认设置为 true。）

```
NSDictionary *options;
options          = @{ DIYAVSettingFlash              : @false,
                      DIYAVSettingOrientationForce   : @false,
                      DIYAVSettingOrientationDefault : [NSNumber numberWithInt:AVCaptureVideoOrientationLandscapeRight],
                      DIYAVSettingCameraPosition     : [NSNumber numberWithInt:AVCaptureDevicePositionBack],
                      DIYAVSettingCameraHighISO      : @true,
                      DIYAVSettingPhotoPreset        : AVCaptureSessionPresetPhoto,
                      DIYAVSettingPhotoGravity       : AVLayerVideoGravityResizeAspectFill,
                      DIYAVSettingVideoPreset        : AVCaptureSessionPreset1280x720,
                      DIYAVSettingVideoGravity       : AVLayerVideoGravityResizeAspectFill,
                      DIYAVSettingVideoMaxDuration   : @300,
                      DIYAVSettingVideoFPS           : @30,
                      DIYAVSettingSaveLibrary        : @false };

[cam setupWithOptions:options]; // Check DIYAV.h for options
[cam setCamMode:DIYAVModeVideo]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T21:07:50.670

如果你想搜索框架并且你有代码，你应该搜索 `UIImagePickerControllerSourceTypePhotoLibrary`或`UIImagePickerControllerSourceTypeSavedPhotosAlbum`

这些是访问 iPhone 照片库的那些。

# database - 无法在 SQLite 中使用 TRIGGER 解决此外键约束规则？

> ID：15843517
> 
> 赞同：0
> 
> 时间：2013-04-05T21:03:36.407
> 
> 标签：database, sqlite, triggers

首先，我想谈谈外键约束规则以及它的帮助。假设我有两个表，一个主表的主列称为 ID，另一个表是外部表，它也有一个主列称为 ID。外部表中的这一列是指主表中的 ID 列。如果我们不在这些表之间建立任何外键关系/约束，我们可能会遇到许多与完整性相关的问题。

如果我们为它们创建外键关系，对主表中 ID 列的任何更改都会“自动”反映到外表中的 ID 列，这里的更改可以通过 DELETE、UPDATE 查询进行。此外，对外部表中 ID 的任何更改都应受主表中的 ID 列的约束，例如，不应在外部表的 ID 列中插入或更新任何新值，除非它**确实存在**于 ID 中主表的列。

我知道 SQLite 不支持外键约束（具有上面详述的完整功能），我必须使用 TRIGGER 来解决这个问题。我已经使用 TRIGGER 以一种方式成功解决了问题（对主表中 ID 列的任何更改都将反映到外部表中的 ID 列）但相反的方式（如果发生冲突，应该抛出/引发任何错误，比如主表的ID列只有值1,2,3，但是外表ID列的值2更新为4->主表中不存在->应该抛出错误）并不容易。困难的是**SQLite 也不支持 IF 语句和 RAISERROR 函数**。如果支持这些功能，我可以轻松解决。

我想知道如果 SQLite 不支持某些重要功能，您如何使用它？即使使用 TRIGGER 解决问题也不容易，我认为这是不可能的，除了你不关心相反的方式。（事实上​​，如果您仔细设置 SQL 查询，则相反的方式并不是真正必要的，但是谁能确定呢？引发错误是一种提醒我们修复和更正并使其准确运行而不会损坏数据的机制，并且**错误可以t是隐形**的。

如果您仍然不知道我想要什么，我想最后说几句，我的目的是实现SQLite 不支持**的外键约束的全部功能（即使您可以创建这样的关系但****它是假的**，不是真实的，因为您可以在 SQL Server、SQL Server Ce、MS Access 或 MySQL 中从中受益）。

您的帮助将不胜感激。

PS：我真的很喜欢 SQLite，因为它是基于文件的，易于部署，支持大文件大小（比 SQL Server Ce 有优势），但是一些缺失的功能让我重新思考了很多次，我害怕如果去的话，我的应用程序可能不可靠并且无法预料地损坏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T08:57:52.340

回答您巧妙地隐藏在您的咆哮中的问题：SQLite 允许触发器内部的[`RAISE`函数；](http://www.sqlite.org/lang_createtrigger.html#undef_before)由于缺少控制流语句，这必须与 a 一起使用`SELECT`：

```
CREATE TRIGGER check_that_id_exists_in_parent
BEFORE UPDATE OF id ON child_table
FOR EACH ROW
BEGIN
    SELECT RAISE(ABORT, 'parent ID does not exist')
    WHERE NOT EXISTS (SELECT 1
                      FROM parent_table
                      WHERE id = NEW.id);
END; 
```

# r - 更多地控制 R 中的回归树

> ID：15843519
> 
> 赞同：1
> 
> 时间：2013-04-05T21:03:41.300
> 
> 标签：r, tree, regression, rpart

我希望对我的回归树有比 R 包 rpart 允许的更多的控制权。有谁知道R中是否有一个允许我指定以下内容的包：

1.  每个节点允许的拆分数量（到目前为止，我似乎只能有 2 个拆分）
2.  三通最大深度
3.  前 n 次分裂
4.  为了成为进一步分裂的候选者，叶子必须拥有的最小美元数（相对于观察值）。

# r - 您如何提取 ggplot2 用于其坐标的单位？

> ID：15843521
> 
> 赞同：2
> 
> 时间：2013-04-05T21:03:45.847
> 
> 标签：r, ggplot2

这很愚蠢，我不能是唯一一个在将注释与 ggplot2 图形对齐时遇到问题的人。

我不能使用 gridBase，因为我正在尝试自动执行复杂且重复的绘图任务，因此我需要以编程方式获取坐标，并将它们作为参数传递以在绘制 grobs 之前进行注释。

ggplot 可以访问此信息。我也必须有办法做到这一点！

令我惊讶的是，ggplot2 一开始并没有刻意公开对清晰注释情节如此重要的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-14T12:35:12.843

The coordinates - or x and y scales - are set when generating the final plot. Hadley used the term "training". This means that you have to have it plotted, either as a grob or to a device, before ggplot knows the scales.

Instead, you can explicitly tell ggplot the extend of the axis, either with [`coord_cartesian`](http://docs.ggplot2.org/0.9.2.1/coord_cartesian.html) or [`xlim`](http://docs.ggplot2.org/0.9.2.1/xylim.html). For this, you can use the `range` and `pretty` functions to determine the extent together with some nice rounding.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-08T01:15:53.933

您可以使用`layer_scales(plot, i = 1L, j = 1L).`

[在这里查看以供参考](https://ggplot2.tidyverse.org/reference/ggplot_build.html)

# c++ - 如何将值插入已排序的向量中？

> ID：15843525
> 
> 赞同：59
> 
> 时间：2013-04-05T21:04:04.443
> 
> 标签：c++, sorting, vector, stl, insertion-sort

全部，

这个问题是这个问题的[延续](https://stackoverflow.com/questions/15582504/is-there-a-sorted-container-in-stl)。我认为 STL 错过了这个功能，但它只是我的恕我直言。

现在，问题。

考虑以下代码：

```
class Foo
{
public:
    Foo();
    int paramA, paramB;
    std::string name;
};

struct Sorter
{
    bool operator()(const Foo &foo1, const Foo &foo2) const
    {
         switch( paramSorter )
         {
             case 1:
                 return foo1.paramA < foo2.paramA;
             case 2:
                 return foo1.paramB < foo2.paramB;
             default:
                 return foo1.name < foo2.name;
         }
    }

    int paramSorter;
};

int main()
{
    std::vector<Foo> foo;
    Sorter sorter;
    sorter.paramSorter = 0;
        // fill the vector
    std::sort( foo.begin(), foo.end(), sorter );
} 
```

在任何给定的时刻，向量都可以重新排序。该类还具有在排序器结构中使用的 getter 方法。

在向量中插入新元素的最有效方法是什么？

我的情况是：

我有一个网格（电子表格），它使用一个类的排序向量。在任何给定时间，向量都可以重新排序，网格将相应地显示排序后的数据。

现在我需要在向量/网格中插入一个新元素。我可以插入，然后重新排序，然后重新显示整个网格，但这非常低效，尤其是对于大网格。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2014-08-27T09:55:28.177

问题的简单答案：

```
template< typename T >
typename std::vector<T>::iterator 
   insert_sorted( std::vector<T> & vec, T const& item )
{
    return vec.insert
        ( 
            std::upper_bound( vec.begin(), vec.end(), item ),
            item 
        );
} 
```

带有谓词的版本。

```
template< typename T, typename Pred >
typename std::vector<T>::iterator
    insert_sorted( std::vector<T> & vec, T const& item, Pred pred )
{
    return vec.insert
        ( 
           std::upper_bound( vec.begin(), vec.end(), item, pred ),
           item 
        );
} 
```

其中 Pred 是类型 T 上的严格排序谓词。

为此，输入向量必须已经按此谓词排序。

这样做的复杂性在于`O(log N)`搜索`upper_bound`（查找插入的位置），但取决于`O(N)`插入本身。

`std::set<T>`如果没有任何重复或`std::multiset<T>`可能有重复，您可以使用更好的复杂性。这些将自动为您保留排序顺序，您也可以在这些上指定自己的谓词。

您还可以做其他各种更复杂的事情，例如管理新添加的项目的一个`vector`和一个`set`// `multiset`，`sorted vector`然后在它们足够多时将它们合并。任何类型的遍历您的集合都需要遍历这两个集合。

使用第二个向量具有保持数据紧凑的优势。在这里，您的“新添加”项目`vector`将相对较小，因此插入时间将是`O(M)`该`M`向量的大小，并且可能比`O(N)`每次都插入大向量更可行。合并会比一次插入一个`O(N+M)`要好，所以总的来说它是插入元素然后合并。`O(NM)``O(N+M) + O(M²)``M`

您可能也会将插入向量保持在其容量，因此随着您的成长，您将不会进行任何重新分配，而只是移动元素。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-04-05T21:14:44.787

如果您需要始终保持向量排序，首先您可能会考虑是否使用`std::set`或`std::multiset`不简化您的代码。

如果你真的需要一个排序的向量并且想要快速插入一个元素，但又不想强制一个排序标准一直满足，那么你可以先用[`std::lower_bound()`](http://en.cppreference.com/w/cpp/algorithm/lower_bound)它在排序范围内找到元素应该的位置以对数时间插入，然后使用[`insert()`](http://en.cppreference.com/w/cpp/container/vector/insert)成员函数`vector`在该位置插入元素。

如果性能是一个问题，请考虑基准测试`std::list`与`std::vector`. 对于小项目，`std::vector`众所周知，由于缓存命中率更高，所以速度更快，但`insert()`操作本身在列表上的计算速度更快（无需移动元素）。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-08-06T18:39:26.333

请注意，您也可以`upper_bound`根据需要使用。`upper_bound`将确保与其他条目等效的新条目将出现在其序列的*末尾*，`lower_bound`将确保与其他等效的新条目将出现在其序列的*开头*。对于某些实现可能很有用（也许类可以共享一个“位置”但不是它们的所有细节！）

*两者都*将向您保证向量仍然根据`<`元素的结果进行排序，尽管插入`lower_bound`将意味着移动更多元素。

例子：

```
insert 7 @ lower_bound of { 5, 7, 7, 9 } => { 5, *7*, 7, 7, 9 }
insert 7 @ upper_bound of { 5, 7, 7, 9 } => { 5, 7, 7, *7*, 9 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T21:16:38.757

而不是插入和排序。你应该做一个查找然后插入

保持向量排序。（排序一次）。当你必须插入

1.  找到与您要插入的元素相比更大的第一个元素。

2.  在该位置之前进行插入。

这样向量保持排序。

这是一个例子。

```
start {} empty vector

insert 1 -> find first greater returns end() = 1 -> insert at 1 -> {1}
insert 5 -> find first greater returns end() = 2 -> insert at 2 -> {1,5}
insert 3 -> find first greater returns 2 -> insert at 2 -> {1,3,5}
insert 4 -> find first greater returns 3 -> insert at 3 -> {1,3,4,5} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T21:32:02.060

当您想在排序顺序之间切换时，可以使用多个索引数据结构，每个索引数据结构都保持排序顺序（可能是某种平衡树，如 std::map，它将排序键映射到向量索引，或 std ::set 存储指向你的对象的指针 - 但具有不同的比较函数）。

这是一个执行此操作的库：http: [//www.boost.org/doc/libs/1_53_0/libs/multi_index/doc/index.html](http://www.boost.org/doc/libs/1_53_0/libs/multi_index/doc/index.html)

对于每次更改（插入新元素或更新键），您必须更新所有索引数据结构，或将它们标记为无效。

如果您的数据结构没有“太多”排序顺序并且没有“太多”更新，则此方法有效。否则 - 运气不好，您每次想要更改订单时都必须重新排序。

换句话说：您需要的索引越多（以加快查找操作），更新操作所需的时间就越多。当然，每个索引都需要内存。

为了保持索引的数量很少，您可以使用一些查询引擎来组合多个字段的索引，以支持多个字段上更复杂的排序顺序。就像一个 SQL 查询优化器。但这可能是矫枉过正...

示例：如果您有两个字段 a 和 b，则可以支持 4 种排序顺序：

1.  一个
2.  b
3.  先 a 然后 b
4.  先 b 然后 a

有 2 个索引（3\. 和 4.）。随着更多的字段，排序顺序的可能组合变得更大、更快。但是您仍然可以使用“几乎按照您想要的方式”排序的索引，并且在查询期间，根据需要对您无法使用该索引捕获的剩余字段进行排序。对于整个数据的排序输出，这并没有多大帮助。但是如果你只想查找一些元素，第一个“缩小范围”会很有帮助。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-05T21:10:27.310

假设您真的想使用向量，并且排序标准或键不改变（因此已插入元素的顺序始终保持不变）：在末尾插入元素，然后将其移到前面一步时间，直到前面的元素不再更大。

它不能更快​​地完成（关于渐近复杂性或“大 O 表示法”），因为您必须移动所有更大的元素。这就是 STL 不提供此功能的原因 - 因为它在向量上效率低下，如果需要，您不应该使用它们。

编辑：另一个假设：比较元素并不比移动它们贵多少。看评论。

编辑2：由于我的第一个假设不成立（您想更改排序标准），请放弃此答案并查看我的另一个答案：[https ://stackoverflow.com/a/15843955/1413374](https://stackoverflow.com/a/15843955/1413374)

# perl - Ubuntu 将一个文件拆分为三个文件，每个文件的总行数为三分之一

> ID：15843526
> 
> 赞同：1
> 
> 时间：2013-04-05T21:04:04.437
> 
> 标签：perl, shell, ubuntu

我有一个简单的 ascii 文本文件，每行都有一个字符串，比如

```
aa1
aa2
ab1
... 
```

一共N行。我知道我可以使用 split 命令将其拆分为每个文件固定数量的行。如何指定要拆分的文件数，并让拆分决定每个文件有多少行。例如，如果文件有 100 行，我希望能够指定

```
split 3 foo.txt 
```

它会写出三个文件 xaa xab 和 xac，每个文件有 33、33 和 34 行。这甚至可能吗？还是我为此编写一个自定义 Perl 脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:09:07.510

尝试这样做：

```
split -n 3 file 
```

看

```
man split | less +/'^\s*-n' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T21:10:00.453

没有选择[*]

您可以使用“wc”来获取行数，然后除以 3，因此它是您想要使用的任何脚本的几行。

（[*]更新：在 ubuntu 上有，这就是问题所在。-n 似乎并非所有 linux 或更早版本都存在）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T23:49:58.657

如果您的拆分实现不接受`-n`参数，您可以使用此 bash 函数：

```
function split_n() { split -l $((($1+`wc -l <"$2"`-1)/$1)) "$2" "${3:-$2.}"; } 
```

您可以将其调用为

```
split_n 3 file.txt 
```

或者

```
split_n 3 file.txt prefix 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T23:26:51.110

鉴于您的评论是您的 中没有 -n 选项`split`，这是您可以采取的一种稍微复杂的方法。

```
lines=`wc -l < foo.txt`
lines=$((lines/3+1))
split $lines foo.txt 
```

如果您经常这样做，您可以通过获取拆分数量和文件名将其存储在脚本中，如下所示：

```
splits=$1
filename=$2
lines=`wc -l < $filename`
lines=$((lines/$splits+1))
split $lines $filename 
```

# php - Facebook PHP SDK登录redirect_uri

> ID：15843531
> 
> 赞同：1
> 
> 时间：2013-04-05T21:04:25.260
> 
> 标签：php, facebook-login

在 PHP SDK[文档](https://developers.facebook.com/docs/reference/php/facebook-getLoginUrl/)中，我可以阅读：

> 如果用户未成功登录或未授权您的应用程序，则用户将通过 HTTP 302 重定向重定向到您的 redirect_uri，URL 中包含 error、error_reason 和 error_description 参数。

在我的应用程序中，当我单击登录按钮时，我被正确重定向到 https://www.facebook.com/dialog/oauth?[...] 页面，然后提示登录/授权应用程序。完成后，我被重定向到 redirect_uri ，其中包含状态参数的巨大散列字符串。

但 ！我的应用程序需要两个额外的权限。我的问题是：

为什么当我只允许（作为用户）一个额外权限或者我不允许两个额外权限时，我被重定向到带有 state 参数和 NO er​​ror、error_reason 和 error_description 参数的 redirect_uri？

我错过了什么？

# javascript - Javascript 中的 DOM 性能

> ID：15843533
> 
> 赞同：0
> 
> 时间：2013-04-05T21:04:31.333
> 
> 标签：javascript, performance, dom, leaflet, markerclusterer

我对加载大量 DOM 对象的性能有疑问。首先，我有一个长度为 9540 的数组，如下所示：

```
{"Id":144412,"GisX":55.50963,"GisY":9.77794}`) 
```

问题不在于循环，但问题是我将所有点击事件加载到 DOM，这在 Chrome 中需要 1200 毫秒（IE 需要 8700 毫秒），问题出在使用 markerCluster 的 Leafletjs 中。但是任何提高性能的想法。

```
for (var i = 0, obj; (obj = MarkerArrayDefs[i]); i++) {
    setMarker(obj.Id, obj.GisX, obj.GisY, i);
} //The for loop takes: 151.000ms
var markerList = [];

function setMarker(propId, lat, lng) {
    //var marker = new L.Marker([lat, lng]);
    var marker = new L.Marker([lat, lng], {
        icon: customIcon
    }).on('click', function () {
        var markeren = this;
        var popup = L.popup({
            offset: (new L.Point(-10, -47))
        }).setLatLng(markeren.getLatLng()).setContent('<div><span style="color: #4a6b0e; font-weight: bold;">Henter</span><br><img alt="Progress" src="' + ol.url("~/Content/Css/images/mapWaiting.gif") + '" id="imgProg"/></div>').openOn(folia.map);
        $.get(ol.url('~/ControllerHelper/MapContent/'), {
            id: propId,
            callType: searchfilters.ItemType
        }, function (data) {
            popup.setContent(data);
        });
    });
    markerList.push(marker);
    return false;
}
markers.addLayers(markerList); //This takes: 0.000ms.
map.addLayer(markers); // This is the problem: 1200.000ms 
```

**更新** 我尝试使用给我的建议，但性能提升[不多见 JSFiddle 示例](http://jsfiddle.net/GdM7L/8/) [这是起点](http://jsfiddle.net/GdM7L/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:08:08.103

不要使用 setContent 因为它太慢了，手动构建 DOM 节点可能会更快。

一个非常好的操作 DOM 树的教程在[这里](http://www.w3schools.com/htmldom/)。

您还可以使用 canvas 元素和一些 javascript 魔法来规避大 DOM 厄运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T21:13:07.280

将`onclick`事件函数放在标记的父元素上，而不是每个标记上，然后在其中确定单击了哪个（如果有）子元素。然后你只有一个事件要连接——这也应该节省一些内存。

此外，找出成本最高的一个好方法是使用调试器并在代码运行时随机停止代码。不仅要注意当前正在运行的函数，还要注意它上面的“调用堆栈”上的所有函数。大约 5 次中断后，应该有一个函数（来自调用堆栈中的任何位置）显示在 3 或 4 个示例中——这是您要关注的地方。

# c# - 运行双 GridView 控件以显示摘要/详细信息视图

> ID：15843536
> 
> 赞同：0
> 
> 时间：2013-04-05T21:04:54.217
> 
> 标签：c#, asp.net, visual-studio-2010

我有一个查询，要在一列中按序列号显示零件，在另一列中显示它们经过的进程数。

此数据被转储到名为[GridView](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview%28v=vs.100%29.aspx)的控件`gvSummary`中。现在工作正常。

我想做的是添加第二个名为next的[GridView](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview%28v=vs.100%29.aspx)控件，并将其中的所有数据替换为一个控件，该控件将在单击该特定部分时运行该特定部分的详细查询。`gvDetails``gvSummary``gvSummary`

我的攻击计划是用[HyperLink](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.hyperlink%28v=vs.100%29.aspx)控件之`Serial_Number`类的东西替换列 (Column[0])中的文本，其中指定通过**传递**.`NavigateUrl`**`Serial_Number`**

 **```
var table = GetPartsForTimePeriod();
for (int i = 0; i < table.Rows.Count; i++) {
  string serialNumber = table.Rows[i][0].ToString().Trim();
  var link = new HyperLink()
  {
    ID = string.Format("lnk{0}", serialNumber.Replace(' ', '_'))
  };
  link.Text = serialNumber;
  link.NavigateUrl = string.Format("GetDetails(\"{0}\"}", serialNumber);
  table.Rows[i][0] = link;
}
GridView1.DataSource = table;
GridView1.DataBind(); 
```

**问题：**

超链接需要加载一个页面，而我真正想做的就是将下一个查询填充到`gvDetails`控件中。

解决这个问题的正确方法是什么？我通常编写 WinForms 代码，我想不出在 ASP.NET 中执行此操作的方法。**

# c# - 将组合框中选择的值乘以标签中的数字

> ID：15843537
> 
> 赞同：0
> 
> 时间：2013-04-05T21:04:55.133
> 
> 标签：c#, combobox, label, runtime-error, valueconverter

我正在尝试解决如何将 a 中的选定值乘以`ComboBox`存储在标签中的字符串值。我尝试将这两个值都转换为`int`s 但此错误不断出现：

无法将“System.Windows.Controls.ComboBoxItem”类型的对象转换为“System.IConvertible”类型。

```
int quantity = Convert.ToInt32(comboBox3.SelectedItem);
int price = Convert.ToInt32(label1.Content);
label2.Content = quantity*price; 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T21:13:45.517

您想要 SelectedItem 的内容，而不是 SelectedItem 本身（假设 WPF）：

```
Convert.ToInt32(comboBox3.SelectedItem.Content); 
```

但是如果你已经设置了 SelectedValuePath 并且正在使用一些数据绑定到一个模型，你可以用一种更简单的方式获得选择的值（如果模型是一个整数，甚至不使用转换）：

```
comboBox3.SelectedValue 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T21:15:41.837

我不太记得它的确切属性`ComboBoxItem`是（我认为`Text`），但是您需要获取其字符串的值而不是整个对象来执行转换。之后，只需使用`int`'s`ParseString`类方法。

# html - 如何正确使用媒体查询

> ID：15843541
> 
> 赞同：1
> 
> 时间：2013-04-05T21:05:01.137
> 
> 标签：html, css, twitter-bootstrap, responsive-design, media-queries

我正在设计一个响应式网页。我有一个 div，当屏幕尺寸减小时，它的宽度应该减小。

此 div 还包含两个图像链接的列表。即使屏幕宽度减小，它们也应该保持内联。

```
/* The CSS */
div.mymenu{
margin-right:7%;
margin-top:-53px;
background:#000;
width: 28.5%;
opacity:0.8;
}

div.mymenu > .nav-pills{
margin-bottom:7px;
}

div.mymenu > .nav-pills a{
color:#fff;
margin-left: 30%;
}

div.mymenu > .nav-pills a:hover{
background:none;
} 

<!-- The HTML -->

<div class="mymenu pull-right">
            <ul class="nav nav-pills">
                <li><a href="">Why Us</a></li>
                <li><a href=""><img src="img/news.png" /></a></li>
                <li><a href=""><img src="img/help.png" /></a></li>
            </ul>
        </div> 
```

我正在使用推特引导程序。我尝试对 bootstrap-responsive.css 进行更改 - 但没有任何更改。我进行了更改，例如：-

```
@media (min-width: 768px) and (max-width: 979px) {
.mymenu{
 width: 20%;
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T21:32:25.343

对于流体设计，我非常推荐使用 Skeleton：[http ://www.getskeleton.com/](http://www.getskeleton.com/)

这里有一个@media 查询的标准

```
/* #Tablet (Portrait)
================================================== */
    /* Note: Design for a width of 768px */

    @media only screen and (min-width: 768px) and (max-width: 959px) {

    }

/*  #Mobile (Portrait)
================================================== */
    /* Note: Design for a width of 320px */

    @media only screen and (max-width: 767px) {

    }

/* #Mobile (Landscape)
================================================== */
    /* Note: Design for a width of 480px */

    @media only screen and (min-width: 480px) and (max-width: 767px) {

    } 
```

来自阿根廷的问候！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-07T17:03:50.267

```
/* Smartphones (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 320px) 
and (max-device-width : 480px) {
/* Styles */
}

/* Smartphones (landscape) ----------- */
@media only screen 
and (min-width : 321px) {
/* Styles */
}

/* Smartphones (portrait) ----------- */
@media only screen 
and (max-width : 320px) {
/* Styles */
}

/* iPads (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) {
/* Styles */
}

/* iPads (landscape) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : landscape) {
/* Styles */
}

/* iPads (portrait) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : portrait) {
/* Styles */
}

/* Desktops and laptops ----------- */
@media only screen 
and (min-width : 1224px) {
/* Styles */
}

/* Large screens ----------- */
@media only screen 
and (min-width : 1824px) {
/* Styles */
}

/* iPhone 4 ----------- */
@media
only screen and (-webkit-min-device-pixel-ratio : 1.5),
only screen and (min-device-pixel-ratio : 1.5) {
/* Styles */
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T21:15:10.117

您当前的媒体查询会将这些样式限制在 和 之间的浏览器`768px`中`979px`。删除第二个媒体查询 (979) 以使其适用于所有宽于`768 px`.

```
@media (min-width: 768px)  {
    .mymenu {
      width: 20%;
    }
} 
```

另外，请注意，我建议将选择器修剪`div.mymenu`到仅限制选择器`.mymenu`的`div`适用性（也许您会希望 a`ul`具有与 相同的样式`.mymenu`），并且键入更多:)

# javascript - 在 FireBug 控制台中设置一个 js 变量

> ID：15843542
> 
> 赞同：1
> 
> 时间：2013-04-05T21:05:01.870
> 
> 标签：javascript, console, global-variables, firebug

在 Firefox 的 FireBug 控制台中，为什么会发生这种情况？

```
>>> a = 1
1

>>> var a = 50
undefined

>>> a 
50 
```

我只是想学一些js！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T21:06:13.033

`var ...`是一个声明。

语句没有值，因此控制台打印`undefined`语句的结果。

# c++ - 在不更改基类的情况下将一个派生类转换为另一个类

> ID：15843549
> 
> 赞同：3
> 
> 时间：2013-04-05T21:05:18.760
> 
> 标签：c++, inheritance, casting, type-conversion

我有几个孩子班都有相同的父母。每个子类都可以使用包含在父对象中的一些数据来构造。我想使用基础对象中包含的信息将一个孩子变成另一个孩子（不修改基础对象）。

目前它的实现如下例所示：

```
#include <iostream>

using namespace std;

class Data {};
class base
{
public:
    base()  {}
    base(Data input) : data(input)  {}
    virtual ~base() {   cout << "Deleting :" << this->name() << endl;   }
    template<class T> static base* CastToDerrived(base* object)
    {
        T* output = new T(object->data);
        delete object;
        return output;
    }
    virtual const char* name()  {return "base";}
    Data data;
};

class derrived1 : public base
{
public:
    derrived1() {}

    derrived1(Data input): base(input){}
    ~derrived1(){cout << "Deleting :" << this->name() << endl;}
    const char* name(){return "derrived1";}
};

class derrived2 : public base
{
public:
    derrived2(){}
    derrived2(Data input): base(input){}
    ~derrived2(){cout << "Deleting :\t" << this->name() << endl;}
    const char* name(){return "derrived2";}
};

int main(int argc, char *argv[])
{
    base* object = new derrived1();
    cout << "Created :\t"<<object->name()<<endl;
    object = base::CastToDerrived<derrived2>(object);
    cout << "Casted to :\t"<<object->name()<<endl;
} 
```

哪个输出：

```
Created :   derrived1
Deleting :derrived1
Deleting :base
Casted to : derrived2 
```

但是，这需要销毁并再次创建基类，我想避免这种情况 - 我想销毁 derrived1，使用 base 构造 derrived2，但保持基类完整。最好的方法是什么？

（有几个派生类，基类为所有提供了通用接口，一些派生类以后会在不修改基类的情况下添加）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T20:05:59.040

您不能销毁派生类并保留基类，因为它是同一个实例。我们可以使用以下代码演示这一点

```
#include <iostream>

using namespace std;

class Data {};
class base
{
public:
    base()
    {
        printf("base pointer = %08X\n", this);
    }
};

class derrived1 : public base
{
public:
    derrived1()
    {
        printf("derrived1 pointer = %08X\n", this);
    }
};

int main(int argc, char *argv[])
{
    base* object = new derrived1();
    delete object;
    return 0;
} 
```

输出将显示 base an derived1 是同一个指针，另一方面，您使用一些棘手的代码来实现您想要的。这个想法是使用指向 Data 类的指针而不是变量。您的代码将如下所示

```
#include <iostream>

using namespace std;

class Data {};
class base
{
public:
    base(){data = new Data}
    base(Data* input) : data(input)  {}
    virtual ~base() {   cout << "Deleting :" << this->name() << endl;   }
    template<class T> static base* CastToDerrived(base* object)
    {
        T* output = new T(object->data);
        delete object; 
        return output;
    }
    virtual const char* name()  {return "base";}
    Data* data;
};

class derrived1 : public base
{
public:
    derrived1() {}

    derrived1(Data* input): base(input){}
    ~derrived1(){cout << "Deleting :" << this->name() << endl;}
    const char* name(){return "derrived1";}
};

class derrived2 : public base
{
public:
    derrived2(){}
    derrived2(Data* input): base(input){}
    ~derrived2(){cout << "Deleting :\t" << this->name() << endl;}
    const char* name(){return "derrived2";}
};

int main(int argc, char *argv[])
{
    base* object = new derrived1();
    cout << "Created :\t"<<object->name()<<endl;
    object = base::CastToDerrived<derrived2>(object);
    cout << "Casted to :\t"<<object->name()<<endl;
} 
```

我希望这会有所帮助。

# javascript - 单选按钮 onChange 功能

> ID：15843554
> 
> 赞同：0
> 
> 时间：2013-04-05T21:05:41.537
> 
> 标签：javascript, radio-button, onchange

我有一个小问题。这个功能有什么问题？我不知道。选择单选按钮时，我需要弹出警报窗口。感谢您的每一个回复。

HTML

```
<input type="radio" name="radioButton" class="choice" value="1">
<input type="radio" name="radioButton" class="choice" value="2">
<input type="radio" name="radioButton" class="choice" value="3"> 
```

JavaScript

```
var FormFields =
{
    init: function()
    {

        var radio = document.getElementsByName("radioButton");  
        radio.onchange = FormFields.showAlert;  
    },
    showAlert: function()
    {               
        alert("Bye!");
    },
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:11:01.340

因为`getElementsByName`返回 a`NodeList`您需要将事件回调应用于每个输入：

```
var radios = document.getElementsByName("radioButton");
for(var i = 0;i < radios.length;i++){
    radios[i].onchange = FormFields.showAlert;
} 
```

演示：http: [//jsfiddle.net/louisbros/H7TdB/](http://jsfiddle.net/louisbros/H7TdB/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T21:10:06.233

getElementsByName 获取元素列表，因此您在数组上调用 onChange。[https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByName](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByName)

您想要遍历元素并应用 onChange。

# java - 安卓应用中的可搜索页面

> ID：15843555
> 
> 赞同：-2
> 
> 时间：2013-04-05T21:05:46.193
> 
> 标签：java, android, search, searchable

我已经保存了几个 html 页面，我想将它们放入一个允许离线搜索这些 html 页面标题的 Android 应用程序中。如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T21:17:43.260

希望您使用的是 Android 原生编程，并且您的文件位于 res 或 raw 文件夹中。我在我的应用程序中这样做了

1.  创建一个包含所有 html 文件标题的文本文件。
2.  应用程序启动时读取数组或数组列表中的文件内容。
3.  当用户输入数据并单击搜索时，我将解析我的数组列表并记下具有该字符串的位置。在我的应用程序中，用户输入的字符串可以在多个标题中。
4.  我的文件名就像 d0、d1、d2 等。所以一旦我得到文件位置，我将通过在 arrayindex 前面放置“d”来构造文件名

# php - jquery-file-upload 插件：我可以在运行时设置上传路径吗？

> ID：15843564
> 
> 赞同：2
> 
> 时间：2013-04-05T21:06:16.183
> 
> 标签：php, jquery, jquery-file-upload

我发现其他有关更改 jquery-file-upload 插件的上传路径的帖子。但是，答案通常涉及将其硬编码到`upload.class.php`文件中。

我知道该怎么做，但问题是，会有多个用户上传多个需要转到不同文件夹的文件。我需要能够动态设置文件的目标路径。

有什么办法可以做到这一点？我已经查看了 jquery-file-upload 文档并且没有提到这样的选项。事实上，也许只是我累了，但无论如何文档似乎非常缺乏。

如果没有办法动态设置上传路径，那么我有一个解决方法的想法是在上传完成后运行另一个脚本，它将文件从硬编码的目标移动到正确的位置，但这似乎很愚蠢必须这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-18T20:26:54.973

好主意，但您不必破解upload.class.php，您可以通过传入这样的数组来覆盖选项：

```
$upload_dir = '/some/other/directory/';
$options = array('upload_dir' => $upload_dir);
$upload_handler = new UploadHandler($options); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T04:07:45.997

这是我最终得到的解决方案。

`data-url`首先，我在文件上传器附加到的标签中添加了 URL 参数`input`（它应该指向 jquery 文件上传子文件`server/php/`夹，其中包含一个`index.php`文件）：

```
<input type="file" name="files[]" data-url="/jquery-file-upload/server/php/?type=a"> 
```

然后，我在文件中使用了指向的`SWITCH`语句：`index.php``data-url`

```
 switch ($_GET["type"]) {

    case "a":
        $upload_dir = '/custom/folder/here/';
        $upload_url = '/custom/folder/here';
        $allowed_exts = '/\.(jpg|jpeg|gif|png)$/i';
        break;

    case "b":
        // you get the idea
        break;

    default:
        $upload_dir = dirname($_SERVER['SCRIPT_FILENAME']).'/files/';
        $allowed_exts = '/.+$/i';
        break;
} 
```

最后，在`upload.class.php`文件中，我根据我想使用的自定义值修改了相应的行`SWITCH`：

```
 function __construct($options = null, $initialize = true) {
        $this->options = array(
        'script_url' => $this->get_full_url().'/',
        'upload_dir' => $GLOBALS["upload_dir"],
        'upload_url' => $GLOBALS["upload_url"],
        'user_dirs' => false,
        'mkdir_mode' => 0755,
        'param_name' => 'files',
        'delete_type' => 'DELETE',
        'access_control_allow_origin' => '*',
        'download_via_php' => false,
        'inline_file_types' => '/\.(gif|jpe?g|png)$/i',
        'accept_file_types' => $GLOBALS["allowed_exts"],
        ...etc 
```

我在 中定义的变量在`SWITCH`这里用作`$GLOBALS["varname"]，以便可以在类中使用它们。

我希望这能够帮助某人。每个人的情况会有所不同，所以我不建议完全复制和粘贴此代码。我只是想说明基本思想。

注意：“upload_dir”是根路径，“upload_url”是公共路径。

另请注意：正如您在我的示例中看到的那样，我还使用此方法根据条件确定允许哪些文件类型。

可能有一种通过文件上传器 API/Options 执行此操作的内置方法，但文档对您实际可以做什么非常模糊。

# objective-c - Objective-C - 如何将 NSString 转换为转义的 JSON 字符串？

> ID：15843570
> 
> 赞同：4
> 
> 时间：2013-04-05T21:06:50.847
> 
> 标签：objective-c, escaping, sbjson

我有一个可能包含引号、\、/、\r、\n 的 NSString，我想将它转换为 JSON 编码的字符串，所以像这样的字符串

> “文本1\文本2”

变成

> \"文本1\\文本2\"

是否有现有功能可以让我这样做？

另外，我在我的项目中使用 SBJson，但我找不到 SBJson 是否可以这样做。

NSJSONSerialization 不在桌面上，因为我的应用程序仍然需要支持 OSX 10.6

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-05T21:11:04.303

这回答了你的问题了吗？

```
-(NSString *)JSONString:(NSString *)aString {
    NSMutableString *s = [NSMutableString stringWithString:aString];
    [s replaceOccurrencesOfString:@"\\" withString:@"\\\\" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [s length])];
    [s replaceOccurrencesOfString:@"\"" withString:@"\\\"" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [s length])];
    [s replaceOccurrencesOfString:@"/" withString:@"\\/" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [s length])];
    [s replaceOccurrencesOfString:@"\n" withString:@"\\n" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [s length])];
    [s replaceOccurrencesOfString:@"\b" withString:@"\\b" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [s length])];
    [s replaceOccurrencesOfString:@"\f" withString:@"\\f" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [s length])];
    [s replaceOccurrencesOfString:@"\r" withString:@"\\r" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [s length])];
    [s replaceOccurrencesOfString:@"\t" withString:@"\\t" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [s length])];
    return [NSString stringWithString:s];
} 
```

*来源：[将 NSString 转换为 JSON 字符串](http://www.codza.com/converting-nsstring-to-json-string)*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-11-15T13:31:16.367

让我们以更原生的 JSON 方式来做吧；）

如果您喜欢我的回答，请在[https://github.com/wanjochan给我加注星标](https://github.com/wanjochan)

```
//trick: id(@[s]) => string => trim [] => target
//NSString *s
s=[[NSString alloc] initWithData:
  [NSJSONSerialization dataWithJSONObject:@[s] options:0 error:nil]
  encoding:NSUTF8StringEncoding];
s=[[s substringToIndex:([s length]-1)] substringFromIndex:1]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-10T18:05:17.173

斯威夫特 2：

```
/// Escape reserved characters to produce a valid JSON String
/// For example double quotes `"` are replaced by `\"`
/// - parameters:
///   - String: an unescaped string
/// - returns: valid escaped JSON string
func JSONString(str: String?) -> String? {
    var result : String? = nil
    if let str = str {
        result = str
            .stringByReplacingOccurrencesOfString("\"", withString: "\\\"", options: .CaseInsensitiveSearch)
            .stringByReplacingOccurrencesOfString("/", withString: "\\/", options: .CaseInsensitiveSearch)
            .stringByReplacingOccurrencesOfString("\n", withString: "\\n", options: .CaseInsensitiveSearch)
            .stringByReplacingOccurrencesOfString("\u{8}", withString: "\\b", options: .CaseInsensitiveSearch)
            .stringByReplacingOccurrencesOfString("\u{12}", withString: "\\f", options: .CaseInsensitiveSearch)
            .stringByReplacingOccurrencesOfString("\r", withString: "\\r", options: .CaseInsensitiveSearch)
            .stringByReplacingOccurrencesOfString("\t", withString: "\\t", options: .CaseInsensitiveSearch)
    }
    return result
} 
```

斯威夫特 3：

```
func JSONString(str: String) -> String {
    var result = str
    result = result.replacingOccurrences(of: "\"", with: "\\\"")
        .replacingOccurrences(of: "/", with: "\\/")
        .replacingOccurrences(of: "\n", with: "\\n")
        .replacingOccurrences(of: "\u{8}", with: "\\b")
        .replacingOccurrences(of: "\u{12}", with: "\\f")
        .replacingOccurrences(of: "\r", with: "\\r")
        .replacingOccurrences(of: "\t", with: "\\t")

    return result
} 
```

对防止错误非常有用：`Domain=NSCocoaErrorDomain Code=3840 "Invalid escape sequence around character 123."`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-23T18:46:43.617

**斯威夫特 4 解决方案**

```
extension String {
    var stringEncodedJSON: String {
        var copy = self
        let encodingDict: [String: String] = ["\"": "\\\"", "/": "\\/", "\n": "\\n", "\u{8}": "\\b","\u{12}": "\\f", "\r": "\\r", "\t": "\\t"]
        encodingDict.forEach({ copy = copy.replacingOccurrences(of: $0, with: $1) })
        return copy
    }
} 
```

# asp.net-mvc - 如何在 ASP.NET MVC 中混合使用短 URL 和常规 URL？

> ID：15843571
> 
> 赞同：1
> 
> 时间：2013-04-05T21:06:54.847
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我有一个带有正常默认路由和几个控制器的站点。我想分发可以链接回主页/索引操作的“短 URL”链接。例如，我可以做

*   /MySite - 默认带您到主页/索引
*   /MySite/SomeController/SomeAction - 默认带你到指定的控制器/动作

但我也想做：

/MySite/SomeID - 使用提供的 id 参数将您带到 Home/Index。

我可以添加一个“shortUrl”路由并分发一个像“/MySite/ShortUrl/SomeID”这样的网址，但是有没有其他方法可以使用像上面那样的“仅限id”网址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T21:14:25.277

做这样的事情时遇到的问题是以下内容将是模棱两可的：

```
/MySite/SomeID
/MySite/SomeController 
```

您希望如何区分两者？如果你不介意第二个是不可能的（即你很高兴在指定控制器时总是指定一个动作），你可以尝试这样的事情：

```
routes.MapRoute(
    "ShortUrl",
    "{id}",
    new { controller = "Home", action = "Index", id = Url.OptionalParameter }
);

routes.MapRoute(
    "Default",                                              
    "{controller}/{action}/{id}",                           
    new { controller = "Home", action = "Index", id = Url.OptionalParameter }
); 
```

然后，请求`/MySite/SomeID`应将您带到与 相同的操作`MySite/Home/Index/SomeID`。

如果您需要能够指定ID*或*控制器（使用默认操作），您可以执行以下操作（也使用上述路由）：

```
public class HomeController : Controller
{
    public ActionResult Index(string id)
    {
        // If the ID represents something, show that something.
        if (IdMatchesSomeResource(id))
        {
            // Do something
            return View();
        }
        // Otherwise, treat it as a request for a controller.
        else
        {
            return RedirectToAction("Index", id);
        }
    }
} 
```

# ruby - HTTP POST 上的 SSL 错误（未知协议）

> ID：15843578
> 
> 赞同：5
> 
> 时间：2013-04-05T21:07:49.023
> 
> 标签：ruby, api, ssl, https

尝试通过 SSL 连接到 Imgur API 时出现错误。这是代码和错误：

```
 API_URI = URI.parse('https://api.imgur.com')
  API_PUBLIC_KEY = 'Client-ID --'

  ENDPOINTS = {
    :image   => '/3/image',
    :gallery => '/3/gallery'
  }

  # Public: Upload an image
  #
  # args    - The image path for the image to upload
  # 
  def upload(image_path)
    http = Net::HTTP.new(API_URI.host)
    http.use_ssl = true
    http.verify_mode = OpenSSL::SSL::VERIFY_NONE

    params   = {'image' => File.open(image_path)}
    request  = Net::HTTP::Post.new(API_URI.request_uri)
    request.set_form_data(params)
    request.add_field('Authorization', API_PUBLIC_KEY)

    response = http.request(request)
    puts response.body
  end 
```

和错误：

```
`connect': SSL_connect returned=1 errno=0 state=SSLv2/v3 read server hello A: unknown protocol (OpenSSL::SSL::SSLError) 
```

我知道 VERIFY_NODE 不是一个好习惯，但我现在只想测试连接。

红宝石版本：1.9.2

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-07T06:30:33.597

创建 HTTP 客户端时指定端口可解决此问题。

```
http = Net::HTTP.new(API_URI.host, API_URI.port) 
```

或者

```
http = Net::HTTP.new(API_URI.host, 443) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-28T02:53:17.117

对我来说，这是因为我将服务器作为 http ( **tcp://** ) 服务器而不是 https ( **ssl://** ) 启动。

IE

```
bundle exec puma config.ru -b 'tcp://0.0.0.0:3456?key=/path/to/key.key&cert=/path/to/cert.crt' 
```

代替：

```
bundle exec puma config.ru -b 'ssl://0.0.0.0:3456?key=/path/to/key.key&cert=/path/to/cert.crt' 
```

# javascript - 如何正确遍历 getElementsByClassName

> ID：15843581
> 
> 赞同：152
> 
> 时间：2013-04-05T21:07:52.263
> 
> 标签：javascript, html, dom

我是 Javascript 初学者。

我正在通过 启动网页`window.onload`，我必须通过它们的类名 () 找到一堆元素，`slide`并根据某些逻辑将它们重新分配到不同的节点中。我有`Distribute(element)`将元素作为输入并进行分配的功能。我想做这样的事情（例如[here](https://stackoverflow.com/questions/5179798/javascript-getelementsbyclassname-always-returns-none)或[here](https://stackoverflow.com/questions/3871547/js-iterating-over-result-of-getelementsbyclassname-using-array-foreach)概述）：

```
var slides = getElementsByClassName("slide");
for(var i = 0; i < slides.length; i++)
{
   Distribute(slides[i]);
} 
```

但是，这对我来说并没有什么魔力，因为`getElementsByClassName`实际上并没有返回数组，而是 a [`NodeList`](https://developer.mozilla.org/en-US/docs/DOM/NodeList)，即...

**……这是我的猜测……**

...在函数内部被改变`Distribute`（DOM 树在这个函数内部被改变，并且某些节点的克隆发生）。`For-each`循环结构也无济于事。

可变幻灯片行为真的是不确定的，通过每次迭代它都会疯狂地改变它的长度和元素的顺序。

在我的情况下，迭代 NodeList 的正确方法是什么？我正在考虑填充一些临时数组，但不知道该怎么做......

## **编辑：**

我忘了提到的重要事实是，可能有一张幻灯片在另一张幻灯片中，这实际上是改变`slides`变量的原因，因为我刚刚发现感谢用户[Alohci](https://stackoverflow.com/users/42585/alohci)。

对我来说，解决方案是先将每个元素克隆到一个数组中，然后将数组一个接一个地传入`Distribute()`。

* * *

## 回答 #1

> 赞同：185
> 
> 时间：2013-04-05T21:30:28.923

[根据 MDN](https://developer.mozilla.org/en-US/docs/Web/API/NodeList)，从 a 检索项目的方法`NodeList`是：

```
nodeItem = nodeList.item(index) 
```

因此：

```
var slides = document.getElementsByClassName("slide");
for (var i = 0; i < slides.length; i++) {
   Distribute(slides.item(i));
} 
```

我自己没有尝试过（正常`for`循环一直对我有用），但试一试。

* * *

## 回答 #2

> 赞同：112
> 
> 时间：2016-08-25T13:14:29.407

如果您使用新的 querySelectorAll，您可以直接调用 forEach。

```
document.querySelectorAll('.edit').forEach(function(button) {
    // Now do something with my button
}); 
```

**根据下面的评论。nodeLists 没有 forEach 函数。**

如果将它与 babel 一起使用，您可以添加`Array.from`它将非节点列表转换为 forEach 数组。`Array.from`不适用于以下浏览器（包括 IE 11）本机。

```
Array.from(document.querySelectorAll('.edit')).forEach(function(button) {
    // Now do something with my button
}); 
```

**在昨晚的聚会上，我发现了另一种处理没有 forEach 的节点列表的方法**

```
[...document.querySelectorAll('.edit')].forEach(function(button) {
    // Now do something with my button
}); 
```

[浏览器支持 [...]](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax#Browser_compatibility)

显示为节点列表

[![显示为节点列表](https://i.stack.imgur.com/HK5U5.png)](https://i.stack.imgur.com/HK5U5.png)

显示为数组

[![显示为数组](https://i.stack.imgur.com/MdCAT.png)](https://i.stack.imgur.com/MdCAT.png)

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2021-03-04T17:43:52.617

**2021 年的最新答案**

当这个问题被问到（2013 年）时，`.getElementsBy*`方法返回了一个[NodeList](https://developer.mozilla.org/en-US/docs/Web/API/NodeList)。但是，在 2021 年情况并非如此，所有这些 DOM 遍历方法都返回一个实时[HTMLCollection](https://developer.mozilla.org/en-US/docs/Web/API/HTMLCollection)，`getElementsByName`这是一个例外。

这两个列表之间存在显着差异。HTMLCollection 有两个方法，而 NodeList 有五个方法，包括`NodeList.forEach`，可用于遍历 NodeList。

实时集合是有问题的，因为无法在后台保持集合更新。为了实现可靠的集合，在 HTMLCollection 的每个当前实现中，每次**访问集合时都会遍历 DOM 。**实际上，这意味着每次访问实时集合的成员（包括长度）时，浏览器都会遍历整个文档以查找特定元素。

[该标准](https://dom.spec.whatwg.org/#concept-collection)说：

> 如果一个集合是实时的，那么该对象上的属性和方法必须对实际的底层数据进行操作，而不是数据的快照。

## 永远不要迭代实时 HTMLCollection！

相反，将集合转换为数组，并迭代该数组。或者更确切地说，使用 获取元素[`.querySelectorAll`](https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelectorAll)，它为您提供静态 NodeList 和更灵活的选择元素的方式。

如果您确实需要元素的实时列表，请使用最接近的共同祖先元素作为上下文，而不是`document`.

值得注意的是，还存在实时 NodeList。实时 NodeList 的示例是[Node.childNodes](https://developer.mozilla.org/en-US/docs/Web/API/Node/childNodes)和[getElementsByName](https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementsByName)的返回值。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-03-28T21:58:25.980

你总是可以使用数组方法：

```
var slides = getElementsByClassName("slide");
Array.prototype.forEach.call(slides, function(slide, index) {
    Distribute(slides.item(index));
}); 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-07-17T21:03:36.870

我遵循[了 Alohci](https://stackoverflow.com/users/42585/alohci)的反向循环的建议，因为它是 live `nodeList`。这是我为那些好奇的人所做的……

```
 var activeObjects = documents.getElementsByClassName('active'); // a live nodeList

  //Use a reverse-loop because the array is an active NodeList
  while(activeObjects.length > 0) {
    var lastElem = activePaths[activePaths.length-1]; //select the last element

    //Remove the 'active' class from the element.  
    //This will automatically update the nodeList's length too.
    var className = lastElem.getAttribute('class').replace('active','');
    lastElem.setAttribute('class', className);
  } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-12-17T17:28:23.730

```
 <!--something like this--> 
<html>
<body>

<!-- i've used for loop...this pointer takes current element to apply a 
 particular change on it ...other elements take change by else condition 
-->  

<div class="classname" onclick="myFunction(this);">first</div>  
<div class="classname" onclick="myFunction(this);">second</div>

<script>
function myFunction(p) {
 var x = document.getElementsByClassName("classname");
 var i;
 for (i = 0; i < x.length; i++) {
    if(x[i] == p)
    {
x[i].style.background="blue";
    }
    else{
x[i].style.background="red";
    }
}
}

</script>
<!--this script will only work for a class with onclick event but if u want 
to use all class of same name then u can use querySelectorAll() ...-->

var variable_name=document.querySelectorAll('.classname');
for(var i=0;i<variable_name.length;i++){
variable_name[i].(--your option--);
}

 <!--if u like to divide it on some logic apply it inside this for loop 
 using your nodelist-->

</body>
</html> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-07-15T16:11:11.203

我在迭代中遇到了类似的问题，我来到了这里。也许其他人也犯了我犯的同样的错误。

就我而言，选择器根本不是问题。问题是我弄乱了javascript代码：我有一个循环和一个子循环。子循环也`i`用作计数器，而不是`j`，所以因为子循环覆盖了`i`主循环的值，所以这个循环从未进入第二次迭代。

```
var dayContainers = document.getElementsByClassName('day-container');
for(var i = 0; i < dayContainers.length; i++) { //loop of length = 2
        var thisDayDiv = dayContainers[i];
        // do whatever

        var inputs = thisDayDiv.getElementsByTagName('input');

        for(var j = 0; j < inputs.length; j++) { //loop of length = 4
            var thisInput = inputs[j];
            // do whatever

        };

    }; 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-12-19T19:33:30.360

您可以使用[`Object.values`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/values)+[`for...of`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...of)循环：

```
const listA = document.getElementById('A');
const listB = document.getElementById('B');
const listC = document.getElementById('C');
const btn = document.getElementById('btn');

btn.addEventListener('click', e => {
  // Loop & manipulate live nodeLList
  for (const li of Object.values(listA.getElementsByClassName('li'))) {
    if (li.classList.contains('active')) {
      listB.append(li);
    } else {
      listC.append(li);
    }
  }
});
```

```
ul {
  display: inline-flex;
  flex-direction: column;
  border: 1px solid;
}

ul::before {
  content: attr(id);
}

.active {
  color: red;
}

.active::after {
  content: " (active)";
}
```

```
<ul id="A">
  <li class="li active">1\. Item</li>
  <li class="li">2\. Item</li>
  <li class="li">3\. Item</li>
  <li class="li active">4\. Item</li>
  <li class="li active">5\. Item</li>
  <li class="li">6\. Item</li>
  <li class="li active">7\. Item</li>
  <li class="li">8\. Item</li>
</ul>

<button id="btn">Distribute A</button>

<ul id="B"></ul>
<ul id="C"></ul>
```

##### 单线：

```
Object.values(listA.getElementsByClassName('li')).forEach(li => (li.classList.contains('active') ? listB : listC).append(li)) 
```

# facebook - Facebook Connect 应用可以预先细分用户吗？

> ID：15843584
> 
> 赞同：0
> 
> 时间：2013-04-05T21:08:00.850
> 
> 标签：facebook, facebook-insights, segment

有谁知道是否可以设置 Facebook Connect，其中可以设置 pass 变量，以便可以提前将用户划分为不同的组，以便可以以一种也反映这些细分的方式从应用程序中提取见解？

它本质上类似于使用单个应用 ID 运行多个应用。

如果没有，有谁知道是否可以动态创建应用程序 ID？我知道几年前这是不可能的，但我很好奇是否有人知道这是否在最近发生了变化。

顺便说一句，我们有一个自助服务平台，并且正在寻找一种自动化方法，同时也对 Facebook 连接洞察数据进行细分。因此，如果有人有任何其他想法，在软件方面已经完成，或者知道任何可能有帮助的插件，那将非常有帮助。

谢谢！

# ruby-on-rails-3 - RefineryCMS 自定义布局模板适用于主机应用程序，但不适用于引擎

> ID：15843586
> 
> 赞同：3
> 
> 时间：2013-04-05T21:08:09.023
> 
> 标签：ruby-on-rails-3, refinerycms, refinery

所以我按照[炼油厂指南](http://refinerycms.com/guides/using-custom-view-or-layout-templates)创建了一个自定义布局模板。我切换了关于页面以在高级选项中使用我的新模板，它就像一个魅力。

然后，我创建了一个名为 clients 的新引擎，并在客户页面的高级选项中选择了新模板，如您所知，默认为客户 - index.html.erb。

但是引擎忽略了我的模板。为什么？我知道我设置正确，因为它适用于关于页面。不同之处在于，关于页面不是炼油厂引擎的一部分，而客户页面是。我发现[了这个 SO question](https://stackoverflow.com/questions/11902339/how-do-i-properly-setup-a-custom-page-layout-refinerycms-2-0-6)并尝试像这样设置我的引擎的 index.html.erb

```
<% content_for :body %>
 <ul id="clients">
   <% @things.each do |t| %>
     <li>
       <%= link_to t.name, refinery.ts_t_path(t) %>
     </li>
   <% end %>
 </ul> 
```

```
<%= render :layout => 'layouts/client' %> 
```

无济于事。任何帮助将非常感激。谢谢！

# javascript - 尝试进行电子邮件验证，但未按预期工作

> ID：15843587
> 
> 赞同：0
> 
> 时间：2013-04-05T21:08:14.617
> 
> 标签：javascript, jquery

我只是用 jQuery 进行一些表单验证，这是电子邮件的一部分：

```
var re = /^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;
var email = $('#user_email');
$('#user_email').on('keyup change', function() {
      if ((email.val().length <= 6) && (re.test(email.val()))) {
        $('#alert_user_email').text('Email cannot be blank or invalid formation');
        submit_btn.disabled = true;
        $('#alert_user_email').show();
      } else {
        $('#alert_user_email').text('');
        submit_btn.disabled = false;
        $('#alert_user_email').hide();
      }
    }); 
```

但是由于某种原因它不起作用，如果我`&& re.test`从语句中删除这些东西`if`但没有按预期工作，一切都会正常工作，任何启示都会很棒！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T21:14:44.623

你的`if`说法不正确。尝试：

```
if ((email.val().length <= 6) || !(re.test(email.val()))) {
    // your code
} 
```

# ruby-on-rails-3 - Rails 应用程序中没有路线匹配控制器

> ID：15843591
> 
> 赞同：1
> 
> 时间：2013-04-05T21:08:32.677
> 
> 标签：ruby-on-rails-3, routes, actioncontroller

我有一个应用程序，我正在创建一个名为“new_911”的获取操作。当我将 new_911_call_path 放入应用程序布局中时，出现错误“没有路由匹配 new_911 控制器：调用”。然而，调用控制器中有一个名为 new_911 的操作。我究竟做错了什么？

调用控制器：

```
def new_911
    @call = Call.new :call_status => "open"
    respond_with @call
end 
```

应用程序.html.erb

```
<li><%= link_to 'New 911 Call', new_911_call_path %></li> 
```

路线.rb

```
resources :calls do
    member do
      post 'close'
      post 'cancel'
      post 'note'
      get  'new_return'
      get 'duplicate_call'
      get 'edit_times'
      put 'update_billing'
      get 'new_911'
    end 
```

rake 路由：new_911_call GET /calls/:id/new_911(.:format) calls#new_911

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:19:42.537

您需要将参数添加到路由中。您正在使用成员路由，因此您需要添加 id 参数，看看[this](http://guides.rubyonrails.org/routing.html#adding-more-restful-actions)。您可能需要更改该路线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T22:01:51.640

弄清楚了。我使用的是成员而不是集合。同样使用 new_911 给了我一个持续的错误，因此我将其更改为 EmergencyCalls 用于我的控制器架构并使用正常的“新”操作。在我的路线文件中添加了资源 :emergency_calls 并且它起作用了。

对不起，笨蛋。

# java - 如何在 URL 中没有应用程序上下文的情况下使用 Weblogic (12 C)？

> ID：15843594
> 
> 赞同：6
> 
> 时间：2013-04-05T21:08:47.853
> 
> 标签：java, weblogic, clean-urls, weblogic12c

我正在开发一个需要 Weblogic 服务器的 Web 项目，并且在部署后（在我的 Macbook Pro 上）我可以查看该站点的唯一方法是将应用程序名称指定为整个站点的前缀。例如

```
http://localhost:7001/myapp-weblogic/ 
```

这会破坏大量使用根 URL 访问资源的样式和 JavaScript 代码（例如 /images/example.png）

虽然我可以以编程方式将“/my-app”添加到 .jsp 中的内容，但我无法在我的 .css 文件中执行此操作。

*我尝试在 Weblogic > 控制台 > 环境 > 服务器 > myserver* > 协议 > HTTP中设置“默认 WebApp 上下文根：” - 但这不起作用。

这似乎应该是一件很简单的事情。在 IIS 中，我只需在本地主机文件中添加一行并将主机名添加到我的 IIS 容器中 - 总共花费了大约 42 秒。

```
127.0.0.1   myapp.local  -> Let's me view my site at http://myapp.local 
```

提前感谢您的任何见解！

* * *

更新！！我终于把事情搞定了。其中一些对我的设置非常具体，但希望对其他人仍有帮助。

为了让它工作，我需要做 3 件主要的事情和另一件相关的事情：

1.  在 Weblogic 中设置服务器的默认应用程序
    1.  在本地服务器上，转到控制台并登录
    2.  转到：Weblogic > 控制台 > 环境 > 服务器 > *myserver* > 协议 > HTTP
    3.  将“Default WebApp Context Root:”设置为“/”+您的应用程序（例如“/myapp”）
2.  在 MyEclipse 中设置项目的上下文根目录
    1.  在 MyEclipse 中打开项目后，右键单击项目并选择属性
    2.  展开“MyEclipse”并选择“Web”并将 Web Context-root 设置为“/”
3.  将项目weblogic.xml文件中context-root的值设置为“/”
    1.  此文件应位于项目的 WEB-INF 文件夹中
    2.  保存文件并构建应用程序
    3.  重新部署您的应用程序 - 您可能还需要重新启动服务器

### 将我的本地路径变量设置为“/”

所以我必须做的另一件事是设置一个我引用“/”的路径变量。当您请求路径时 (request.getContextPath(); )，它不会在路径前加上“/”，如果您尝试使用类似`<c:url context="${ _path }"`_path 变量不以“/”开头的东西，它将引发异常.

最后一点是我在使用别人的代码时遇到的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T16:31:02.317

在 application.xml 中指定以下设置

```
 <web>
          <web-uri>yourweb.war</web-uri>
          <context-root>/</context-root>
       </web> 
```

现在您可以在没有上下文根的情况下拨打电话

```
 http://localhost:7001/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T08:28:59.947

我假设因为您使用的是 weblogic，所以您部署了一个 java 应用程序。

该结构应该是一个“战争”文件。

有关结构的更多信息，您可以在此处找到。

[http://www.openscope.net/2010/01/25/war-deployment-file-structure/](http://www.openscope.net/2010/01/25/war-deployment-file-structure/)

上下文根的名称（默认为战争名称）也可能被覆盖

[https://forums.oracle.com/forums/thread.jspa?messageID=10366462](https://forums.oracle.com/forums/thread.jspa?messageID=10366462)

希望能帮助到你。

# c++ - Qt同步不可能在这里？

> ID：15843600
> 
> 赞同：2
> 
> 时间：2013-04-05T21:09:11.187
> 
> 标签：c++, multithreading, qt

考虑以下情况：

```
class SomeClass : public QObject
{
  Q_OBJECT
private:
    unsigned long long someVar;

public:
    unsigned long long getSomeVar(){
        return someVar;
    void threadFunc();
} 
```

`threadFunc()`将在一个新线程中调用（你猜对了），它看起来像这样：

```
void SomeClass::threadFunc()
{
  ++someVar;
  // Do stuff...
} 
```

现在，在另一个线程中，我想阅读`someVar`. 我通过调用来做到这一点`getSomeVar()`。但是，需要同步。我怎么做？对于拥有 的线程`somevar`，同步并不难。只会是

```
void SomeClass::threadFunc()
{
  mut.lock();
  ++someVar;
  mut.unlock();
  // Do stuff...
} 
```

`QMutex mut`在类声明中添加了一个。但是我如何同步`getSomeVar()`？我不能只说：

```
unsigned long long getSomeVar(){
  mut.lock();
  return someVar;
  mut.unlock();
} 
```

`mut.unlock()`由于之前的 - 语句，将永远不会被调用`return`。

我知道通常通过写作来避免这种冲突......

```
unsigned long long getSomeVar(){
  QMutex mut;
  // mut-constructor calls mut.lock()
  return someVar;
  // mut-destructor calls mut.unlock()
} 
```

...但在这种情况下，我需要互斥锁在内部`getSomeVar()`和`threadFunc()`. 我试过

```
unsigned long long getSomeVar(){
  // constructing mutex from mut (which is the class' mutex)
  QMutex mutex(mut);
  // mutex-constructor calls mut.lock()
  return someVar;
  // mutex-destructor calls mut.unlock()
} 
```

但是 mutex 的复制构造函数是私有的。

我可以在这里做什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T21:15:31.907

您正在寻找[QMutexLocker](http://qt-project.org/doc/qt-4.8/qmutexlocker.html)

```
{
    QMutexLocker locker(&mut);
    ...
}

// Goes out of scope, unlocks the mutex in its destructor 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T21:15:37.683

您将*互斥锁*与*锁*混淆了：每个可保护变量只有一个互斥锁，但可能有很多尝试锁定它！

您需要一个单独的锁类，其中*每个线程*有一个实例：

```
struct Lock
{
    QMutex & m_;
    Lock(QMutex & m) : m_(m) { m_.lock(); }
    ~Lock() { m_.unlock();}
}; 
```

用法：

```
QMutex mutex;

void thread_function()
{
    Lock lk(mut);
    critical_operation();
}   // unlocks "mutex" as if by magic 
```

Qt 可能已经为您提供了这样一个类。（标准库也这样做：因为`std::mutex`你有`std::lock_guard<std::mutex>`。）

# facebook - Facebook Wall Post 图片相对 URL PhoneGap

> ID：15843607
> 
> 赞同：1
> 
> 时间：2013-04-05T21:09:27.997
> 
> 标签：facebook, api, cordova, post, image

我想在电话差距项目中将本地图片发布到 Facebook 墙上。这是代码。

```
function postToFeed() {

    // calling the API ...
    var obj = {
      method: 'feed',
      redirect_uri: 'YOUR URL HERE',
      link: 'https://developers.facebook.com/docs/reference/dialogs/',
      picture: 'http://fbrell.com/f8.jpg',
      name: 'Facebook Dialogs',
      caption: 'Reference Documentation',
      description: 'Using Dialogs to interact with users.'
    };

    function callback(response) {
      document.getElementById('msg').innerHTML = "Post ID: " + response['post_id'];
    }

    FB.ui(obj, callback);
  } 
```

在行中：

```
picture: 'http://fbrell.com/f8.jpg', 
```

我试图将其更改为相对网址，例如：

```
picture: '../blabla.png', 
```

我继续收到 API ERROR Code 100 的错误，图片 URL 格式不正确。我检查了 facebook api 并没有明确说明。它说：

此帖子所附图片的 URL。图片必须至少为 50 像素 x 50 像素（但最好是 200 像素 x 200 像素）并且最大宽高比为 3:1

有人可以帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:21:48.193

iirc，图片需要在互联网上访问。因此，您不能使用本地图像。– wmfairuz

图片 url 必须是绝对 URL – Tommy Crush

问题解决了。

# python - pyGTK 一次运行 2 个“主循环”

> ID：15843608
> 
> 赞同：0
> 
> 时间：2013-04-05T21:09:29.723
> 
> 标签：python, loops, gtk, main

我正在编写一个 pyGTK 程序，它（除其他外）将允许用户从列表中选择并运行第二个程序。我想启动用户选择的程序作为一个完全独立的进程，它有自己的主循环，但我不确定这样做是否安全。我进行了快速测试（见下文），它似乎是安全的，但我没有做很多 GUI 编程，所以我知道可能有些事情我没有想到。我找不到任何解决此问题的教程，所以我想在深入研究之前先问一下。

一旦第二个程序开始，这两个程序就不需要说话了。

这是我尝试的测试。

```
import gtk
import numpy as np

class TopGUI(gtk.Window):
    def __init__(self):
        super(TopGUI,self).__init__()
        parentLabel = gtk.Label('I am the father')
        newWindowBtn = gtk.Button('meet my brother')
        vBox1 = gtk.VBox(False,4)
        vBox1.pack_start(parentLabel, True, True, 4)
        vBox1.pack_start(newWindowBtn, True, True, 4)

        newWindowBtn.connect("clicked", self.on_clicked) # 0p3n Br07h3r loop on butt0n pre55

        self.add(vBox1)
        self.show_all()
        self.startItUp

    def on_clicked(self, leButton):
        broWin = SecondGUI()
        broWin.startItUp

    def startItUp(self):
        gtk.main()

class SecondGUI(gtk.Window):
    bigthing = None
    def __init__(self):
        super(SecondGUI,self).__init__()
        brotherLabel = gtk.Label('I am the 3\/1L U|\|kl3\. I D3v0ur M3M0ry!')
        spinner = gtk.Spinner()
        vBox1 = gtk.VBox(True,4)
        vBox1.pack_start(brotherLabel, True, True, 4)
        vBox1.pack_start(spinner, True, True, 4)
        spinner.start()

        self.add(vBox1)
        self.show_all()
        self.bigthing = np.zeros([10000,10000])

    def startItUp(self):
        gtk.main()

fatherLoop = TopGUI() 
```

对于后代，这是实现[abarnert](https://stackoverflow.com/users/908494/abarnert)解决方案的测试代码的改进版本。

```
import gtk
import numpy as np
import multiprocessing

class TopGUI(gtk.Window):
    def __init__(self):
        super(TopGUI,self).__init__()
        parentLabel = gtk.Label('I am the father')
        newWindowBtn = gtk.Button('meet my brother')
        vBox1 = gtk.VBox(False,4)
        vBox1.pack_start(parentLabel, True, True, 4)
        vBox1.pack_start(newWindowBtn, True, True, 4)

        newWindowBtn.connect("clicked", self.on_clicked) # 0p3n Br07h3r loop on butt0n pre55
        self.connect("destroy", gtk.main_quit)

        self.add(vBox1)
        self.show_all()
        self.startItUp()

    def on_clicked(self, leButton):
        self.childProcess = multiprocessing.Process(target=child_main)
        self.childProcess.start()

    def startItUp(self):
        gtk.main()

class SecondGUI(gtk.Window):
    bigthing = None
    def __init__(self):
        super(SecondGUI,self).__init__()
        brotherLabel = gtk.Label('I am the 3\/1L U|\|kl3\. I D3v0ur M3M0ry!')
        spinner = gtk.Spinner()
        vBox1 = gtk.VBox(True,4)
        vBox1.pack_start(brotherLabel, True, True, 4)
        vBox1.pack_start(spinner, True, True, 4)
        spinner.start()

        self.add(vBox1)
        self.show_all()
        self.bigthing = np.zeros([10000,10000])

        self.connect("destroy", gtk.main_quit)
        self.startItUp()

    def startItUp(self):
        gtk.main()

def parent_main():
    fatherLoop = TopGUI()

def child_main():
    broWin = SecondGUI()

if __name__ == '__main__':
    parent_main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T21:16:57.583

> 我想启动用户选择的程序作为一个完全独立的进程，它有自己的主循环，但我不确定这样做是否安全。

是的，那将是安全的，实际上它可能正是您想要的。除非您竭尽全力（通过 fd 继承、共享内存、管道等），否则单独的进程不会共享任何内容。

但是您的代码没有这样做，甚至没有尝试这样做。那里没有任何东西可以启动子进程；您只需在同一个解释器中创建一个新对象。因此，一旦您启动第二个 GUI，它将最终运行自己`gtk.main()`的 GUI，使第一个 GUI 挂起，直到第二个退出。

但是您只是在各处引用`self.startItUp`（和`broWin.startItUp`）而不是调用`self.startItUp()`. 所以第二个 GUI 永远不会启动，一切都是“安全的”，从某种意义上说，什么都不做总是安全的。

您可能想使用[`multiprocessing`](http://docs.python.org/2/library/multiprocessing.html). 首先，你不能只`fatherLoop = TopGUI()`在顶层做，因为那样每个进程都可能最终运行它。（它是否与实现/平台相关。）然后，您需要显式创建一个`Process`并为孩子启动它。所以，像这样：

```
class TopGUI(gtk.Window):
    # ...
    def on_clicked(self, leButton):
        self.child = multiprocessing.Process(target=child_main)
        self.child.start()
    # ...

def parent_main():
    fatherLoop = TopGUI()

def child_main():
    broWin = SecondGUI()

if __name__ == '__main__':
    parent_main() 
```

我假设你要修复你的代码，以便构造 a`TopGUI()`或 a`SecondGUI()`调用`self.startItUp()`。

# function - 将此函数转换为匿名函数

> ID：15843610
> 
> 赞同：0
> 
> 时间：2013-04-05T21:09:35.030
> 
> 标签：function, scala, functional-programming

如何创建此函数，如果数字为 5，则返回 true 到匿名函数：

```
def yeah_five(p: Int): Boolean = p == 5 
```

谢谢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:14:01.283

匿名函数的简写：

```
(p: Int) => (p == 5); 
```

长版：

```
new Function1[Int] {
  def apply(p: Int): Int = p == 5
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T21:11:54.290

您需要一个接受整数并返回布尔值的函数

```
(p: Int) => (p == 5); 
```

通读关于[匿名](http://www.scala-lang.org/node/133)函数的教程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T21:22:27.400

我想写它的最短方法是这样的：

```
val f: Int => Boolean = (_ == 5) 
```

当然，根据上下文，您可以松开类型注释：

```
List(1, 2, 3, 5, 4, 5).filter(_ == 5)

=> List(5, 5) 
```

根据@Senia 的观察，您可以更简洁地将对象 5`5==`的方法转换`==`为函数。

```
val g: Int => Boolean = 5==
List(1, 2, 3, 5, 4, 5).filter(g) => List(5, 5) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T23:46:36.270

如果您想将已声明的方法转换为函数，请执行此操作

```
yeah_five _ 
```

# html5-canvas - 带有鼠标交互的 2d Canvas 烟雾示例。

> ID：15843611
> 
> 赞同：0
> 
> 时间：2013-04-05T21:09:41.597
> 
> 标签：html5-canvas

我正在寻找一个使用 HTML 2D Canvas 的烟雾效果示例，其中烟雾是由用户在烟雾中移动鼠标来影响烟雾的，从而使烟雾受到干扰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-01T00:23:00.983

我不知道你是否仍然对此感兴趣，但是，在这里看看[这个](http://jsfiddle.net/jonnyc/Ujz4P/3/) 所以，而不是检查粒子是否触及边缘，你应该提供鼠标 x,y 坐标：

```
function init() {
    var canvas = document.getElementById('myCanvas');
    if (canvas.getContext) {

        // Set the context variable so it can be re-used
        context = canvas.getContext('2d');

        // Create the particles and set their initial positions and velocities
        for(var i=0; i < particleCount; ++i){
            var particle = new Particle(context);

            // Set the position to be inside the canvas bounds
            particle.setPosition(generateRandom(0, canvasWidth), generateRandom(0, canvasHeight));

            // Set the initial velocity to be either random and either negative or positive
            particle.setVelocity(generateRandom(-maxVelocity, maxVelocity), generateRandom(-maxVelocity, maxVelocity));
            particles.push(particle);            
        }
    }
    else {
        alert("Please use a modern browser");
    }
} 
```

# jquery - Rails 中的简单 Javascript Joyride 插件

> ID：15843616
> 
> 赞同：1
> 
> 时间：2013-04-05T21:09:53.560
> 
> 标签：jquery, ruby-on-rails-3, asset-pipeline

由于对 rails 的误解，我担心我的插件无法正常工作。我正在将[zurbs joyride 插件](http://www.zurb.com/playground/jquery-joyride-feature-tour-plugin)添加到索引页面。

我有以下内容`vendor/assets/javascripts/joyride`-

```
joyride-2.0.3.js
jquery.cookie.js
modernizr.mq.js 
```

并以以下方式引用它们`application.js`-

```
//= require jquery
//= require jquery-ui
//= require jquery_ujs
//= require joyride/joyride-2.0.3
//= require joyride/modernizr.mq.js
//= require joyride/jquery.cookie
//= require_tree . 
```

以及适当的CSS `vendor/assets/stylesheets`-

```
joyride-2.0.3.css 
```

并在`application.css`-

```
 *= require_self
 *= require bootstrap
 *= require joyride-2.0.3 
```

现在在我的索引视图中-

```
<h1 id="pageTitle">Title of the page</h1>

<ol id="list_index_tour">
 <li data-id="pageTitle">Here is where the title of your page goes!</li>
</ol>

<script>
  $(window).load(function() {
    $("#list_index_tour").joyride({
    });
  });
</script> 
```

游览没有启动，而是显示了一个有序列表。有一个应用程序布局。我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T00:21:16.637

您可以尝试为此插件制作清单文件。在您的子文件夹中创建一个`index.js`并引用您的资产。

在您的 application.js 中，您可以只拥有：

`//= require joyride`

您也可以尝试将`.js`零件放入`//= require joyride/modernizr.mq.js`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-10T07:07:53.310

特马克拉姆，

[我在这里](https://stackoverflow.com/questions/17202699/cannot-get-joyride-to-work-it-displays-a-list/18159506#18159506)回答了类似的问题

关于在 Rails 中更好地组织包含文件的原始答案是正确的，但这不会导致您的问题。这不起作用的真正原因是 Zurb 自己的设置说明具有误导性。`<ol>`他们说您可以在包含导游步骤的列表中使用您想要的任何 ID ，但实际上您不能开箱即用。

**Zurb 的 Joyride 代码依赖于 CSS/Javascript 之间的特定 ID。**此 ID 和相关代码位于包含的 joyride.css 文件中。那里使用的 ID 是“joyRideTipContent”。我从 joyride.css 文件中粘贴了相关的几行代码（它们在最顶部附近）：

```
#joyRideTipContent { display: none; }
.joyRideTipContent { display: none; } 
```

如果您希望使用不同的 ID，只需按如下方式更改 css 文件中的上述代码，然后它就可以工作（我在上面的代码片段中包含了名称）：

```
#list_index_tour{ display: none; }
.list_index_tour{ display: none; } 
```

**或者，您可以将您的 ID 和选择器更改`<ol>`为“joyRideTipContent”，它可以直接使用。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-14T04:26:11.253

我对joyride也有同样的问题，我刚刚开始工作，只是为了完成我已经说过的话

第一步：在 vendor/assets/javascripts 中，我删除文件名末尾的 js，并在 application.js 中以与演示相同的顺序放置 require 文件。并且还需要css文件

第二步：我创建一个包含joyride代码的部分，将它放在包含joyride视图的文件夹中，并在我的页脚之后的layout/application.html.erb位置呈现它

第三步：我使用演示中的 js2coffee.org 示例转换咖啡脚本中的 javascript

```
$(window).load(function() {
    $('#joyRideTipContent').joyride({
      autoStart : true,
      postStepCallback : function (index, tip) {
      if (index == 2) {
        $(this).joyride('set_li', false, 1);
      }
    },
    modal:true,
    expose: true
    });
  }); 
```

到咖啡脚本：

```
 $(window).load ->
  $("#joyRideTipContent").joyride
    autoStart: true
    postStepCallback: (index, tip) ->
      $(this).joyride "set_li", false, 1  if index is 2

    modal: true
    expose: true 
```

所以基本上这是我所做的步骤，它对我有用。

Ps 尽量不要将文件放在 vendor/assets/javascripts 内的另一个文件夹中，无论如何它们都会被编译。

# javascript - 如果内容大于屏幕高度，弹出窗口总是固定在顶部边缘但会随着整个页面滚动？

> ID：15843626
> 
> 赞同：0
> 
> 时间：2013-04-05T21:10:20.203
> 
> 标签：javascript, css, ajax, scroll, popup

让我试着理解一下。我有一个搜索页面，它可以像 Google 一样返回大量搜索结果。这些搜索结果中的每一个都有一个触发器（通过使用 onmouseover 的图标）来访问所有搜索结果右侧弹出的弹出窗口中的更多信息，就像谷歌一样。这是我想要从弹出窗口中获得的内容：

*   无论我是查看页面顶部的第一个搜索结果，还是页面底部的最后一个搜索结果，我都希望弹出窗口与屏幕的顶部边缘对齐，无论我在页面上的垂直位置（类似于固定）

*   但是，如果弹出窗口恰好包含更多数据，那么垂直屏幕高度允许，而不是弹出窗口在内部创建滚动条，我希望弹出窗口与页面上的其他所有内容一起向右滚动（类似于绝对）

*   问题是固定切断低于可见浏览器窗口高度底部的数据，使其在没有内部滚动条的情况下无法访问。使用 absolute 时，弹出窗口与页面上的所有其他内容一起滚动，这很棒，也是我想要的，但它总是出现在页面的最顶部，即使我在页面的底部，使其不可见用户如果结果列表很长。

就像我试图以某种方式结合这两种方法一样。所以总结一下：

*   当我通过 onmouseover 触发弹出窗口时，无论我垂直在哪里，弹出窗口都应始终固定在顶部边缘，但如果其内容垂直高于屏幕允许的高度，我应该能够向下滚动整个页面以查看其余的。我不应该像固定的那样在弹出窗口中使用内部滚动条。

这可能吗？我应该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T22:59:52.737

您将需要 JavaScript。

首先，将弹出窗口设置`div`为`position: absolute`。这就像`fixed`它可以通过`left`和轻松到达页面上的任何位置`top`，但它仍会随页面滚动。

在链接悬停时，让 JS 检测浏览器的滚动位置（通过`window.offsetY`或`$(window).scrollTop()`在 jQuery 中）。将此偏移量应用于弹出窗口：

```
$('.link').on('click', function () {
    $('.preview').css('top', $(window).scrollTop());
}); 
```

还要记住调整弹出窗口的其他 CSS 属性以满足您的需要 - 但是，大部分都可以在 CSS 中完成；您真正需要的唯一 JS 是该`top`属性。

小提琴：http: [//jsfiddle.net/GWvNx/](http://jsfiddle.net/GWvNx/)

# ruby-on-rails - 如何判断sidekiq是否连接到redis服务器？

> ID：15843637
> 
> 赞同：17
> 
> 时间：2013-04-05T21:10:58.010
> 
> 标签：ruby-on-rails, redis, sidekiq

使用控制台，如何判断 sidekiq 是否连接到 redis 服务器？我希望能够做这样的事情：

```
if (sidekiq is connected to redis) # psuedo code
  MrWorker.perform_async('do_work', user.id)
else
  MrWorker.new.perform('do_work', user.id)
end 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-06T07:32:55.147

您可以使用 Sidekiq 提供的 Redis 信息：

```
redis_info = Sidekiq.redis { |conn| conn.info }
redis_info['connected_clients'] # => "16" 
```

从[Sidekiq 的 Sinatra 状态应用程序](https://github.com/mperham/sidekiq/blob/master/lib/sidekiq/web.rb)中获取。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-05-17T18:04:38.763

我将这种方法应用于 Rails 并给出了上面的答案，`true`如果连接则返回，否则返回`false`。

```
 def redis_connected?
    !!Sidekiq.redis(&:info) rescue false
  end 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-05-18T22:06:45.123

听起来您想知道是否有一个 Sidekiq 进程启动并运行以在给定时间点处理作业。使用 Sidekiq 3.0，您可以这样做：

```
require 'sidekiq/api'

ps = Sidekiq::ProcessSet.new
if ps.size > 0
  MyWorker.perform_async(1,2,3)
else
  MyWorker.new.perform(1,2,3)
end 
```

Sidekiq::ProcessSet 为您提供有关任何正在运行的 Sidekiq 进程的几乎实时（每 5 秒更新一次）信息。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-04-02T16:15:28.473

跳出@overallduka 的答案，对于那些使用[okcomputer](https://github.com/sportngin/okcomputer) gem 的人，这是我设置的自定义检查：

```
class SidekiqCheck < OkComputer::Check
  def check
    if sidekiq_accessible?
      mark_message "ok"
    else
      mark_failure
    end
  end

  private
  def sidekiq_accessible?
    begin
      Sidekiq.redis { |conn| conn.info }
    rescue Redis::CannotConnectError
    end.present?
  end
end

OkComputer::Registry.register "sidekiq", SidekiqCheck.new 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-26T15:13:49.210

```
begin
  MrWorker.perform_async('do_work', user.id)
rescue Redis::CannotConnectError => e
  MrWorker.new.perform('do_work', user.id)
end 
```

# java - 如何在接口中重载方法？

> ID：15843645
> 
> 赞同：11
> 
> 时间：2013-04-05T21:11:36.437
> 
> 标签：java, oop, interface

如果我有这个界面

```
public interface someInterface {
  // method 1
  public String getValue(String arg1);
  // method 2
  public String getValue(String arg1, String arg2);
} 
```

我希望能够将 1 或 2 个字符串传递给 getValue 方法，而不必在每个实现类中都重写。

```
public class SomeClass1 impelments someInterface 
{
 @Override
 public String getValue(String arg1);
}

public class SomeClass2 implements someInterface 
{
 @Override
 public String getValue(String arg1, String arg2);
} 
```

这不起作用，因为 SomeClass1 需要实现方法 2 而 SomeClass2 需要实现方法 1。

我坚持这样做吗？

```
public interface someInterface2 {
  public String getValue(String... args);
}

public class SomeClass3 implements someInterface2 
{
  @Override
  public String getValue(String... args) {
    if (args.length != 1) {
      throw IllegalArgumentException();
    }
    // code
  }
}

public class SomeClass4 implements someInterface2
{
  @Override
  public String getValue(String... args) {
    if (args.length != 2) {
      throw IllegalArgumentException();
     }
    // code
  }
}

someInterface2 someClass3 = new SomeClass3();
someInterface2 someClass4 = new SomeClass4();
String test1 = someClass3.getValue("String 1");
String test2 = someClass4.getValue("String 1, "String 2"); 
```

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-05T21:49:01.950

接口充当该接口用户的*合同*：您指定哪些方法可用（在*所有*实现中）以及如何调用它们。如果一个接口的两个实现需要不同的方法，那么该方法*不*应该是接口的一部分：

```
public interface Lookup {
}

public class MapLookup implements Lookup {
    public String getValue(String key) {
        //...
    }
}

public class GuavaLookup implements Lookup {
    public String getValue(String row, String column) {
        // ...
    }
} 
```

在您的程序中，您将知道您使用的是哪个实现，因此您可以简单地调用正确的函数：

```
public class Program {
    private Lookup lookup = new MapLookup();

    public void printLookup(String key) {
        // I hardcoded lookup to be of type MapLookup, so I can cast:
        System.out.println(((MapLookup)lookup).getValue(key));
    }
} 
```

**替代方法**

如果你的类`Program`更通用并且使用依赖注入，你可能不知道你有哪个实现。然后，我会创建一个新的 interface `Key`，它可以是任一类型的键：

```
public interface Lookup {
    // ...

    public String getValue(Key key);
}

public interface Key {
}

public MapKey implements Key {
    private String key;
    // ...
}

public GuavaKey implements Key {
    private String row, column;
    // ...
} 
```

程序中的依赖注入可能来自某些工厂实现。由于您不知道您使用哪种类型的查找，因此您需要一个`getValue`.

```
public interface Factory {
    public Lookup getLookup();
    public Key getKey();
}

public class Program {
    private Lookup lookup;

    public Program(Factory factory) {
        lookup = factory.getLookup();
    }

    public void printLookup(Factory factory) {      
        System.out.println((lookup.getValue(factory.getKey()));
    }
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-12-16T05:20:45.980

[从 Java 8 开始，您可以通过使用default](https://docs.oracle.com/javase/tutorial/java/IandI/defaultmethods.html)关键字让接口提供方法的实现。因此，一个新的解决方案是提供两种可能引发异常的方法的默认实现，然后从默认接口派生实际实现。

无论如何，这里是你如何做到这一点：

```
public interface SomeInterface {
    // method 1
    default String getValue(String arg1) {
        // you decide what happens with this default implementation
    }

    // method 2
    default String getValue(String arg1, String arg2) {
        // you decide what happens with this default implementation
    }
} 
```

最后，让类覆盖正确的方法

```
public class SomeClass1 implements SomeInterface {
    @Override
    public String getValue(String arg1) {
        return arg1;
    }
}

public class SomeClass2 implements SomeInterface {
    @Override
    public String getValue(String arg1, String arg2) {
        return arg1 + " " + arg2;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T21:15:54.523

一个解决方案（不是很优雅）可能看起来像这样：

```
public abstract class SomeClass {
   public String getValue(String arg1) {
      throw new IllegalArgumentException();
   }
   public String getValue(String arg1, String arg2) {
      throw new IllegalArgumentException();
   }
}

public class SomeClass1 extends SomeClass {
   public String getValue(String arg1) {
      // return sth
   }
}

public class SomeClass2 extends SomeClass {
   public String getValue(String arg1, String arg2) {
      // return sth
   }
} 
```

但是有一个缺点 - SomeClass1 和 SomeClass2 不能直接继承其他类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-01T09:59:11.190

如果第二个值在某种意义上可以被认为是可选的，并且在调用时您总是有 2 个参数，那么您可以创建一个实现 2 参数接口的包装类，将 1 参数实现作为构造函数参数传递并在方法中调用它，例如像这样：

```
interface A{
  method1(P1)
}

interface B{
  method2(P1, P2)
}

class Wrap implements B{
  Wrap(A impl)

  override method2(P1, P2){
    call impl.method1(P1)
  }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-05T17:55:22.237

```
public interface SomeInterface {
    default void print(String s) {
        System.out.println(s);
    }
}

public class SomeClass implements SomeInterface {
    /**
     * Note the this overloads {@link SomeInterface#print(String)}, 
     * not overrides it!
     */
    public void print(int i) {
        System.out.println(i);
    }
} 
```

# tsql - TSQL：FOR XML PATH('') 未能分组

> ID：15843649
> 
> 赞同：9
> 
> 时间：2013-04-05T21:11:41.727
> 
> 标签：tsql, sql-server-2008-r2, for-xml-path

`FOR XML PATH('')`我正在尝试在 TSQL 中使用特定列对列值进行分组。这是两种情况下的结果（请注意，不带 XML 代码 - 即：`SELECT * FROM @xml`- 与带 XML 代码相同）：

```
Class          |     Animals
=================================
Asteroidea     |     Starfish
Mammalia       |     Dog
Mammalia       |     Cat
Mammalia       |     Coyote
Reptilia       |     Crocodile
Reptilia       |     Lizard 
```

根据[这篇文章](http://www.mahipalreddy.com/blog/?p=79)和[这篇文章](http://sqlandme.com/2011/04/27/tsql-concatenate-rows-using-for-xml-path/)（请注意，第二篇文章省略了`GROUP BY`，我不确定作者如何在没有它的情况下成功实现这一点 - 我已经尝试过，它只生成所有值），语法应该是如下图所示：

```
DECLARE @xml TABLE(
    Animal VARCHAR(50),
    Class VARCHAR(50)
)

INSERT INTO @xml
VALUES ('Dog','Mammalia')
    , ('Cat','Mammalia')
    , ('Coyote','Mammalia')
    , ('Starfish','Asteroidea')
    , ('Crocodile','Reptilia')
    , ('Lizard','Reptilia')

SELECT x1.Class
    , STUFF((SELECT ',' + x2.Animal AS [text()] 
    FROM @xml x2 
    WHERE x1.Animal = x2.Animal 
    ORDER BY x2.Animal 
    FOR XML PATH('')),1,1,'' ) AS "Animals"
FROM @xml x1
GROUP BY Class 
```

几个小时后，在这些示例和上面的代码之间，我看不到我在语法上的错误，但我收到错误“列'@xml.Animal'在选择列表中无效，因为它不是包含在聚合函数或 GROUP BY 子句中。” 请注意，如果我不使用 GROUP BY 子句，它仍然不会以适当的方式生成值。另一双眼睛会很有用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T21:17:23.710

我认为您的`WHERE`子句使用了错误的列，您想使用`Class`not `Animal`：

```
SELECT x1.Class
    , STUFF((SELECT ',' + x2.Animal AS [text()] 
    FROM @xml x2 
    WHERE x1.Class = x2.Class 
    ORDER BY x2.Animal 
    FOR XML PATH('')),1,1,'' ) AS "Animals"
FROM @xml x1
GROUP BY Class 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/d41d8/12109)。结果是：

```
|      CLASS |          ANIMALS |
---------------------------------
| Asteroidea |         Starfish |
|   Mammalia |   Cat,Coyote,Dog |
|   Reptilia | Crocodile,Lizard | 
```

# r - 提取用于在 mgcv 中绘制平滑图的数据

> ID：15843654
> 
> 赞同：16
> 
> 时间：2013-04-05T21:11:58.233
> 
> 标签：r, trace, mgcv

几年前的[这个线程描述了如何提取用于绘制拟合 gam 模型的平滑分量的数据。](https://stats.stackexchange.com/questions/7795/how-to-obtain-the-values-used-in-plot-gam-in-mgcv)它有效，但仅当存在一个平滑变量时。我有不止一个平滑变量，不幸的是我只能从系列的最后一个中提取平滑。这是一个例子：

```
library(mgcv)
a = rnorm(100)
b = runif(100)
y = a*b/(a+b)

mod = gam(y~s(a)+s(b))
summary(mod)

plotData <- list()
trace(mgcv:::plot.gam, at=list(c(25,3,3,3)), 
        #this gets you to the location where plot.gam calls plot.mgcv.smooth (see ?trace)
        #plot.mgcv.smooth is the function that does the actual plotting and
        #we simply assign its main argument into the global workspace
        #so we can work with it later.....
        quote({
                    #browser()
                    plotData <<- c(plotData, pd[[i]])
                }))
plot(mod,pages=1)
plotData 
```

我正在尝试获取 和 的估计平滑函数`a`，`b`但该列表`plotData`仅给出了 的估计值`b`。我已经研究了该`plot.gam`函数的内部结构，但我很难理解它是如何工作的。如果有人已经解决了这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-05T21:27:08.017

## mgcv >= 1.8-6 的更新答案

从 mgcv 的**1.8-6**版开始，`plot.gam()`现在不可见地返回绘图数据（来自 ChangeLog）：

> *   plot.gam 现在静默返回绘图数据列表，以帮助高级用户 (Fabian Scheipl) 生成自定义绘图。

因此，使用`mod`原始答案中下面显示的示例，可以做到

```
> plotdata <- plot(mod, pages = 1)
> str(plotdata)
List of 2
 $ :List of 11
  ..$ x      : num [1:100] -2.45 -2.41 -2.36 -2.31 -2.27 ...
  ..$ scale  : logi TRUE
  ..$ se     : num [1:100] 4.23 3.8 3.4 3.05 2.74 ...
  ..$ raw    : num [1:100] -0.8969 0.1848 1.5878 -1.1304 -0.0803 ...
  ..$ xlab   : chr "a"
  ..$ ylab   : chr "s(a,7.21)"
  ..$ main   : NULL
  ..$ se.mult: num 2
  ..$ xlim   : num [1:2] -2.45 2.09
  ..$ fit    : num [1:100, 1] -0.251 -0.242 -0.234 -0.228 -0.224 ...
  ..$ plot.me: logi TRUE
 $ :List of 11
  ..$ x      : num [1:100] 0.0126 0.0225 0.0324 0.0422 0.0521 ...
  ..$ scale  : logi TRUE
  ..$ se     : num [1:100] 1.25 1.22 1.18 1.15 1.11 ...
  ..$ raw    : num [1:100] 0.859 0.645 0.603 0.972 0.377 ...
  ..$ xlab   : chr "b"
  ..$ ylab   : chr "s(b,1.25)"
  ..$ main   : NULL
  ..$ se.mult: num 2
  ..$ xlim   : num [1:2] 0.0126 0.9906
  ..$ fit    : num [1:100, 1] -0.83 -0.818 -0.806 -0.794 -0.782 ...
  ..$ plot.me: logi TRUE 
```

其中的数据可用于自定义绘图等。

下面的原始答案仍然包含有用的代码，用于生成用于生成这些图的相同类型的数据。

* * *

## 原始答案

有几种方法可以轻松做到这一点，并且都涉及在协变量范围内从模型进行预测。然而，诀窍是将一个变量保持在某个值（比如它的样本平均值），同时在其范围内改变另一个变量。

这两种方法涉及：

1.  预测数据的拟合响应，包括截距和所有模型项（其他协变量保持固定值），或
2.  如上所述从模型中预测，但返回每个项的贡献

其中第二个更接近（如果不完全是）`plot.gam`所做的。

这是一些适用于您的示例并实现上述想法的代码。

```
library("mgcv")
set.seed(2)
a <- rnorm(100)
b <- runif(100)
y <- a*b/(a+b)
dat <- data.frame(y = y, a = a, b = b)

mod <- gam(y~s(a)+s(b), data = dat) 
```

现在生成预测数据

```
pdat <- with(dat,
             data.frame(a = c(seq(min(a), max(a), length = 100),
                              rep(mean(a), 100)),
                        b = c(rep(mean(b), 100),
                              seq(min(b), max(b), length = 100)))) 
```

### 从模型中预测新数据的拟合响应

这是从上面做的项目符号**1**

```
pred <- predict(mod, pdat, type = "response", se.fit = TRUE)

> lapply(pred, head)
$fit
        1         2         3         4         5         6 
0.5842966 0.5929591 0.6008068 0.6070248 0.6108644 0.6118970 

$se.fit
       1        2        3        4        5        6 
2.158220 1.947661 1.753051 1.579777 1.433241 1.318022 
```

然后，您可以`$fit`针对协变量进行绘图`pdat`-尽管请记住我的预测保持`b`不变然后保持`a`不变，因此在绘制拟合时只需要前 100 行，`a`或者将后 100 行与`b`. 例如，首先将`fitted`和置信区间数据添加`upper`到`lower`预测数据的数据框中

```
pdat <- transform(pdat, fitted = pred$fit)
pdat <- transform(pdat, upper = fitted + (1.96 * pred$se.fit),
                        lower = fitted - (1.96 * pred$se.fit)) 
```

`1:100`然后使用变量`a`和`101:200`变量的行绘制平滑`b`

```
layout(matrix(1:2, ncol = 2))
## plot 1
want <- 1:100
ylim <- with(pdat, range(fitted[want], upper[want], lower[want]))
plot(fitted ~ a, data = pdat, subset = want, type = "l", ylim = ylim)
lines(upper ~ a, data = pdat, subset = want, lty = "dashed")
lines(lower ~ a, data = pdat, subset = want, lty = "dashed")
## plot 2
want <- 101:200
ylim <- with(pdat, range(fitted[want], upper[want], lower[want]))
plot(fitted ~ b, data = pdat, subset = want, type = "l", ylim = ylim)
lines(upper ~ b, data = pdat, subset = want, lty = "dashed")
lines(lower ~ b, data = pdat, subset = want, lty = "dashed")
layout(1) 
```

这产生

![在此处输入图像描述](https://i.stack.imgur.com/J9F3X.png)

如果您想要一个通用的 y 轴刻度，请删除`ylim`上面的两行，将第一行替换为：

```
ylim <- with(pdat, range(fitted, upper, lower)) 
```

### 预测各个平滑项对拟合值的贡献

**上面2**中的想法以几乎相同的方式完成，但我们要求`type = "terms"`.

```
pred2 <- predict(mod, pdat, type = "terms", se.fit = TRUE) 
```

这将返回一个矩阵`$fit`和`$se.fit`

```
> lapply(pred2, head)
$fit
        s(a)       s(b)
1 -0.2509313 -0.1058385
2 -0.2422688 -0.1058385
3 -0.2344211 -0.1058385
4 -0.2282031 -0.1058385
5 -0.2243635 -0.1058385
6 -0.2233309 -0.1058385

$se.fit
      s(a)      s(b)
1 2.115990 0.1880968
2 1.901272 0.1880968
3 1.701945 0.1880968
4 1.523536 0.1880968
5 1.371776 0.1880968
6 1.251803 0.1880968 
```

`$fit`只需将矩阵中的相关列与 中的相同协变量绘制`pdat`，再次仅使用第一组或第二组 100 行。再次，例如

```
pdat <- transform(pdat, fitted = c(pred2$fit[1:100, 1], 
                                   pred2$fit[101:200, 2]))
pdat <- transform(pdat, upper = fitted + (1.96 * c(pred2$se.fit[1:100, 1], 
                                                   pred2$se.fit[101:200, 2])),
                        lower = fitted - (1.96 * c(pred2$se.fit[1:100, 1], 
                                                   pred2$se.fit[101:200, 2]))) 
```

`1:100`然后使用变量`a`和`101:200`变量的行绘制平滑`b`

```
layout(matrix(1:2, ncol = 2))
## plot 1
want <- 1:100
ylim <- with(pdat, range(fitted[want], upper[want], lower[want]))
plot(fitted ~ a, data = pdat, subset = want, type = "l", ylim = ylim)
lines(upper ~ a, data = pdat, subset = want, lty = "dashed")
lines(lower ~ a, data = pdat, subset = want, lty = "dashed")
## plot 2
want <- 101:200
ylim <- with(pdat, range(fitted[want], upper[want], lower[want]))
plot(fitted ~ b, data = pdat, subset = want, type = "l", ylim = ylim)
lines(upper ~ b, data = pdat, subset = want, lty = "dashed")
lines(lower ~ b, data = pdat, subset = want, lty = "dashed")
layout(1) 
```

这产生

![在此处输入图像描述](https://i.stack.imgur.com/jkK7Q.png)

请注意此图与之前制作的图之间的细微差别。第一个图包括截距项的影响*和*平均值的贡献`b`。在第二个图中，仅显示了平滑器的值`a`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-05T12:34:31.790

Gavin 给出了一个很好的答案，但我想根据原始引用的帖子提供一个（因为我只是花了很多时间弄清楚它是如何工作的 :)。

我直接使用了来自[https://stats.stackexchange.com/questions/7795/how-to-obtain-the-values-used-in-plot-gam-in-mgcv](https://stats.stackexchange.com/questions/7795/how-to-obtain-the-values-used-in-plot-gam-in-mgcv)的代码，还发现我只得到了最后一个模型返回。原因是跟踪代码片段被放置在 mgcv::plot.gam 函数中的位置。您需要确保将代码放在迭代 m 的 for 循环中，并通过 at 参数控制它。

以下跟踪非常适合我的 mgcv:::plot.gam 版本

```
plotData <<- list()
trace(mgcv:::plot.gam, at=list(c(26,3,4,3)), 
quote({
       plotData[[i]] <<- pd[[i]]
  })
) 
```

它在 mgcv:::plot.gam 函数中的这个块之后插入跟踪调用：

```
if (m > 0) 
    for (i in 1:m) if (pd[[i]]$plot.me && (is.null(select) || 
        i == select)) { 
```

现在 plotData 的元素将对应于绘制的不同变量。我发现两个函数对于找出插入此跟踪调用的正确位置非常有帮助，它们是

```
edit(mgcv:::plot.gam)
as.list(body(mgcv::::plot.gam)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-31T16:42:46.553

除了 Gavin Simpson 的精彩回答之外，现在还有一个名为[itsadug](https://cran.r-project.org/web/packages/itsadug/index.html)的 R 包，它提供了几个函数来可视化与 mgcv 匹配的 GAM。

其中包括**plot_smooth**（根据帮助“绘制总和效果并可选地删除随机效果”）。如果我正确理解文档，这接近 Gavin Simpson 提到的选项 1。

还有**get_modelterm**它返回一个列表（或可选的 data.frame），其中包含所选平滑项的估计值。这似乎等同于选项 2（或从 plot.gam 返回的值，但没有绘图）。

# java - 线性布局内 ListView 中的 NullPointerException

> ID：15843657
> 
> 赞同：0
> 
> 时间：2013-04-05T21:12:21.387
> 
> 标签：java, android, nullpointerexception

当我尝试在我的 Android 应用程序中运行此特定活动时，我在已用箭头标记的行（在 Eclipse 中显示为单行）处收到 NullPointerException。

此活动使用线性布局，并在其中一个线性“段”中提供 ListView。我在其他只有一个 ListView 的活动中使用相同的 ListView 代码，因此这些类扩展了 ListActivity。

在下面显示的代码中，我只是像往常一样扩展 Activity，因为如果我在这里扩展 ListActivity，我会收到一条错误消息，指出我必须有一个属性为 'android.R.id.list' 的 ListView，你可以看，有。

```
@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_book_event);

    final ListView lv = (ListView) findViewById(android.R.id.list);
    lv.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, getResources().getStringArray(R.array.cities))); <---

    final Spinner s = (Spinner) findViewById(R.id.spinner);

    ArrayAdapter<CharSequence> aa = new ArrayAdapter<CharSequence>(this, R.array.noSeats, android.R.layout.simple_spinner_item);
    aa.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    s.setAdapter(aa);
    s.setOnItemSelectedListener(new OnItemSelectedListener()
    {

        @Override
        public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3)
        {
            noOfSeats = s.getSelectedItemPosition();
            noOfSeats = noOfSeats + 1;
        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) 
        {

        }

    });
} 
```

这里有什么问题？其他 ListView 可以很好地访问字符串数组，那么这有什么不同呢？

编辑：添加堆栈跟踪

```
04-05 21:30:00.282: E/AndroidRuntime(12791): FATAL EXCEPTION: main
04-05 21:30:00.282: E/AndroidRuntime(12791): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.event_booker/com.example.event_booker.BookEvent}: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
04-05 21:30:00.282: E/AndroidRuntime(12791):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1659)
04-05 21:30:00.282: E/AndroidRuntime(12791):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1675)
04-05 21:30:00.282: E/AndroidRuntime(12791):    at android.app.ActivityThread.access$1500(ActivityThread.java:121)
04-05 21:30:00.282: E/AndroidRuntime(12791):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:943)
04-05 21:30:00.282: E/AndroidRuntime(12791):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-05 21:30:00.282: E/AndroidRuntime(12791):    at android.os.Looper.loop(Looper.java:130)
04-05 21:30:00.282: E/AndroidRuntime(12791):    at android.app.ActivityThread.main(ActivityThread.java:3701)
04-05 21:30:00.282: E/AndroidRuntime(12791):    at java.lang.reflect.Method.invokeNative(Native Method)
04-05 21:30:00.282: E/AndroidRuntime(12791):    at java.lang.reflect.Method.invoke(Method.java:507)
04-05 21:30:00.282: E/AndroidRuntime(12791):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)
04-05 21:30:00.282: E/AndroidRuntime(12791):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624)
04-05 21:30:00.282: E/AndroidRuntime(12791):    at dalvik.system.NativeStart.main(Native Method)
04-05 21:30:00.282: E/AndroidRuntime(12791): Caused by: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
04-05 21:30:00.282: E/AndroidRuntime(12791):    at android.app.ListActivity.onContentChanged(ListActivity.java:243)
04-05 21:30:00.282: E/AndroidRuntime(12791):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:230)
04-05 21:30:00.282: E/AndroidRuntime(12791):    at android.app.Activity.setContentView(Activity.java:1657)
04-05 21:30:00.282: E/AndroidRuntime(12791):    at com.example.event_booker.BookEvent.onCreate(BookEvent.java:22)
04-05 21:30:00.282: E/AndroidRuntime(12791):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-05 21:30:00.282: E/AndroidRuntime(12791):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1623)
04-05 21:30:00.282: E/AndroidRuntime(12791):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T21:26:29.620

问题是 android.R.id.list 指的是默认的列表视图 ID，即`"@android:id/list"`. 您可以选择将它放在您的 xml 中，或者让您的自定义 id 从代码中引用。

您可以让您的 ListView 有一个 id，例如

```
android:id="@android:id/list" 
```

就像是

```
<ListView 
android:id="@android:id/list"
android:layout_width="wrap_content"
android:layout_height="wrap_content" /> 
```

或者有你的身份证：

```
<ListView 
android:id="@+id/yourlist"
android:layout_width="wrap_content"
android:layout_height="wrap_content" /> 
```

并致电：

```
final ListView lv = (ListView) findViewById(R.id.yourlist); 
```

# javascript - Javascript 中的继承

> ID：15843660
> 
> 赞同：6
> 
> 时间：2013-04-05T21:12:36.900
> 
> 标签：javascript, inheritance

我正在研究 Javascript 中的继承概念，我正在查看的教程使用以下代码：

```
// define the Student class
function Student() {
  // Call the parent constructor
  Person.call(this);
}

// inherit Person
Student.prototype = new Person();

// correct the constructor pointer because it points to Person
Student.prototype.constructor = Student; 
```

我的问题是，为什么需要同时调用父构造函数，`Person.call(this)`并将`Student`原型设置为等于一个新`Person`对象（即`Student.prototype = new Person();`）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T21:23:07.393

有两个不同的问题需要处理。

首先是确保新`Student`对象继承自`Person`对象。这就是你这样做的原因`Student.prototype = new Person()`。这使得`Student.prototype`a `Person`so`Student`对象将继承该对象继承的任何内容*（从`Person.prototype`）*。

第二个是将`Person`构造函数中的任何行为应用于任何新`Student`对象。这就是你这样做的原因`Person.call(this)`。如果`Person`构造函数没有任何修改新对象的代码，这在技术上是不需要的，但这样做仍然是一个好主意，以防您`Person`稍后添加一些代码。

* * *

旁注，在设置继承时，最好这样做：

```
Student.prototype = Object.create(Person.prototype) 
```

...和垫片（`Object.create`如果需要）。这样，您实际上不需要调用`Person`构造函数来获取继承自`Person.prototype`. 同样，有时不是问题，但有时在构造函数中会出现在设置继承时不希望出现的副作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T19:01:48.867

在做了一些测试之后，据我了解，对象的原型和在其定义函数中所做的属性声明是分开的。但是，当构造一个新对象时，构造函数将从定义函数和正在创建的对象的原型中提取属性。

例如，

```
function Person()
{

    this.name = "james";
    this.age = "shfifty-five";

}

console.log(Person.prototype.name); // prints "undefined", showing how declaring function Person() and Person.prototype are separate.

Person.prototype.gender = "male";

var human = new Person();

console.log(human.name); // prints "james", showing how the object took properties from declaring function Person().
console.log(human.gender); // prints "male", showing how the object took properties from object prototype Person.prototype.

function Student()
{

    this.gpa = 4.00;

}

Student.prototype = new Person();

Student.prototype.constructor = Student;

var myStudent = new Student();

console.log(myStudent.name); // prints "james"
console.log(myStudent.gender); // prints "male"
/*from above two lines, inheritance holds even though 1) Person() defining function was not called inside Student() defining function
and 2) Person() defining function declares properties of Person object.*/
console.log(myStudent.gpa); // prints "4" 
```

如您所见，在这种情况下，定义函数 Person 确实改变了其对象的属性。但是仍然没有必要在 Student 的构造函数中调用 Person 函数，因为`new Person()`构造函数将从两者`Person.prototype`和`function Person()`定义函数中提取属性。

# c++ - 为特定参数类型设置未知类型或重载运算符的初始值

> ID：15843661
> 
> 赞同：1
> 
> 时间：2013-04-05T21:12:38.373
> 
> 标签：c++, operator-overloading

我仍在学习 C++ 并摆弄运算符重载。

现在，我必须生成一个输出，虽然我不确切知道输入时它将是哪种数据类型 - 它在 中指定，`makefile`可以是`double`,`struct`或`enum`.

先上代码：

```
#include <iostream>

#define TYPE Complex
//#define TYPE Symbol
//#define TYPE double

using namespace std;

struct Complex {
    double Re;
    double Im
};

enum Symbol {
    a, b, c, d, e
};

struct Vector {
    TYPE Data[4];
    //more in struct, but it's irrelevant
};

// operator * overloads for Complex and Symbol here
// output stream operator for Vector, Symbol and Complex
// are also overloaded

TYPE operator * (Vector A, Vector B) {
    TYPE Output;
    int i;

    for (i=0; i<4; i++) {
        Output = A.Data[i] * B.Data[i];
    }

    return Output;
    // the output is garbage, because TYPE Output is not
    // set (to 0) at the beginning
}

int main {
    TYPE x;
    // ...
    x = SomeVectorA * SomeVectorB;
    cout << x << endl;
    // ...
    return 0;
} 
```

由于`TYPE Output`初始化后未设置该值，因此重载将在输出处产生垃圾 - 当我设置它时它会有所帮助，但这是一个问题。为每种类型设置初始值以不同的方式完成。

所以对于`Complex`它

```
Complex X;
X.Re = 0;
X.Im = 0; 
```

为了`Symbol`

```
Symbol X;
X = e; 
```

和`double`往常一样。

我想出的解决方案是`operator`为特定类型重载：

```
double operator * (Vector A, Vector B);   // [1]
Symbol operator * (Vector A, Vector B);   // [2]
Complex operator * (Vector A, Vector B);  // [3] 
```

但是编译器向我抛出了错误，因为我已经重载了`[3]`，尽管`Complex`类型作为输入，并且由于数据类型不兼容而`[1]`我不能再做。`2.05 * 1.1`

我也在考虑为and添加`Init()`功能。但它不会为.`struct Complex``struct Vector``enum`

检查`TYPE`也不起作用，因为编译器仍然会抛出错误。

**问题**
有没有办法为不同的输入参数设置各种重载程序，或者至少做一些事情来避免返回奇怪的输出`TYPE operator * (Vector A, Vector B)`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:37:47.300

尝试调用默认构造函数，例如：

```
TYPE Output = TYPE(); 
```

# android - 如何设置图像矩阵的位置？

> ID：15843666
> 
> 赞同：3
> 
> 时间：2013-04-05T21:13:09.537
> 
> 标签：android, matrix, touch, android-imageview

我有一个`GridView`图像。长按时，屏幕变暗（黑色半透明图像可见），另一个图像变得可见，它与从网格中长按的图像具有相同的资源。

我想要的是能够拖动该图像（我已经成功），但是图像显示在顶角（因为我在 XML 中设计了布局）并且我希望它显示在我单击的位置（准确地说，我希望可拖动图片的中心是我长按的地方）。

我的图像已`fill_parent`打开`FrameLayout`并设置为矩阵比例以控制位置...

这是 XML 的图像部分：

```
<ImageView
    android:id="@+id/imgMainSelectedMovie"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:scaleType="matrix"
    android:visibility="invisible"
    android:src="@drawable/escape" /> 
```

这是`OnTouch()`部分：

```
public boolean onTouch(View v, MotionEvent ev) {
        switch (ev.getAction()) {
        case MotionEvent.ACTION_DOWN:
            X = ev.getX();
            Y = ev.getY();
            if (longClicked) return true;
            break;
        case MotionEvent.ACTION_MOVE:
            if (longClicked) {
                if (!dragStarted) {
                    dragStarted = true;
                    myImageView.setX(X);
                    myImageView.setY(Y);
                }
            matrix.postTranslate((ev.getX() - X), (ev.getY() - Y));
            X = ev.getX();
            Y = ev.getY();
            myImageView.setImageMatrix(matrix);
            return true;
            }
            break;
        case MotionEvent.ACTION_UP:
            if (longClicked) {
            dark.setVisibility(View.INVISIBLE);
            myImageView.setVisibility(View.INVISIBLE);
            longClicked = false;
            return true;
            }

        }
        return false;
    } 
```

这是我试图解决的问题：

```
if (!dragStarted) {
        dragStarted = true; //Changed to true when OnItemLongClick called
        myImageView.setX(X);
        myImageView.setY(Y);
            } 
```

但它只是将图像布局的“起点”更改为输入的 X 和 Y。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T06:51:00.107

问题解决了:) 我所做的是当`onItemLongClick`我调用从`ACTION_DOWN`案例中测量的 X 和 Y 时`onTouch`，获取矩阵当前位置并从图像的位置减去`postTranslate`坐标。`ACTION_DOWN`这是来自的解决方案部分`onItemLongCliick`：

```
matrix.getValues(values);
matrixX = values[Matrix.MTRANS_X];
matrixY = values[Matrix.MTRANS_Y];
matrix.postTranslate(X-matrixX, Y-matrixY);
myImageView.setImageMatrix(matrix); 
```

我想知道为什么他们没有为矩阵添加某种“setPlace”方法......

# c - 为什么这个函数在无限循环中运行？

> ID：15843667
> 
> 赞同：1
> 
> 时间：2013-04-05T21:13:11.287
> 
> 标签：c

我正在尝试学习递归。我不明白为什么下面的代码在无限循环中运行？

```
void myFunc(int n)
{
     if(n==0)
         return;
     else
     {
         printf("%d\n",n);
         myFunc(n--); //if I put n=n-1 before this line then it is running fine and will exit from the function .
         printf("%d\n",n); 
     }

}

int main()
{

    myFunc(4);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T21:14:32.507

`--``myFunc`在您使用它时是一个后减运算符，并且仅在使用 的值调用后才生效`n`，因此您将`myFunc`一遍又一遍地使用相同的值调用。

将其用作预递减运算符将修复您的特定用例：与之前上线`myFunc(--n)`的效果相似`n=n-1`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-05T21:14:53.720

n-- 调用后缀操作，这意味着 n 的值被传递到 myFunc。之后，n 的值减一。调用 myFunc(--n)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-05T21:14:39.547

因为减量是在调用*之后*执行的。不是以前。

如果你这样做`myFunc(--n);`，它会起作用

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-05T21:14:54.450

`n--`传递给`n` *后* 递减，因此每次调用时都会收到相同的值。`n``myFunc()``myFunc``n`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-05T21:41:40.183

n-- 和 --n 是不同的。您应该查找 C 运算符和序列点以获得解释。基本上，n-- 表示“使用 n 并在下一个序列点递减它”，而 --n 表示“先递减 n 然后使用它”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-05T21:41:13.067

N-- 是一个`postfix`运算符。这意味着它会在使用该值后增加您正在使用它的变量。例如，在表达式`x * y--`中，编译器将返回`x * y`，然后递减 y。

# c++ - 是地图 在 C++ 中可能吗？

> ID：15843671
> 
> 赞同：-6
> 
> 时间：2013-04-05T21:13:31.993
> 
> 标签：c++

我想在 C++ 中为地图中的每个键都有一个链表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T21:15:52.847

是的，`std::map<int, std::list<SomeType>>`在 C++ 中是可能的。

看看[ideone](http://www.ideone.com)，它对于测试诸如此类的简单事物很有用。

# http - 网页与服务器通信的方式有哪些？

> ID：15843672
> 
> 赞同：0
> 
> 时间：2013-04-05T21:13:37.070
> 
> 标签：http

我所知道的只是 HTTP GET 和 POST 请求。

在我们的学校服务器上，我们可以玩一些游戏，但不能玩其他游戏。似乎我们不能玩任何有实时信息的游戏。所以我在想实时信息需要不同的方法让游戏与服务器通信，而这个方法被屏蔽了。

网页与服务器通信的其他方式有哪些？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T00:29:36.517

使用 GET/PUT 请求是与网络服务器通信的老式方式。加载网页后，它可以使用 Java/Flash 小程序、AJAX 或 WebSockets 通过单独的连接与网络服务器通信，而无需离开当前页面。这允许双向通信和网页内容的实时更新。

# git - 结对编程时如何使用git

> ID：15843674
> 
> 赞同：4
> 
> 时间：2013-04-05T21:13:41.867
> 
> 标签：git, git-svn

我正在做一个 Apache 项目。我正在寻求有关如何最好地使用 git 来支持我们稍微不寻常的工作流程的建议。我熟悉主要的 git 命令，但没有在小组项目中使用它的经验。

在我的团队中，我们通常会结对编程，并且出于各种原因，每天会多次交换我们正在开发的开发人员的机器。

中央源代码存储库是 SVN，但存在只读 git 镜像。

我希望我的伙伴和我能够经常从彼此的本地存储库中提取提交，并且（不那么频繁地）从服务器获取更新并提交给它。

[如https://www.kernel.org/pub/software/scm/git/docs/git-svn.html](https://www.kernel.org/pub/software/scm/git/docs/git-svn.html)所述，这似乎与“git svn”不能很好地配合：

“建议所有 git svn 用户直接从 SVN 服务器 clone、fetch 和 dcommit，避免 git repositories 之间的所有 git clone/pull/merge/push 操作”

使用 git 支持我们的工作流程的最佳方式是什么？例如，如果我们从只读的 git 存储库克隆而不是使用 git svn，并且偶尔通过将补丁应用到单独的“git svn clone”-d 存储库来提交到 svn 存储库，会更容易吗？

感激地收到任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T21:19:49.507

我们在 github.com 上使用主存储库，然后让四个开发人员使用本地克隆。我们还订阅了使用[Git Flow](https://github.com/nvie/gitflow)来轻松管理我们的分支（*开发、主、修补程序、发布、功能等*）

我们鼓励您阅读[成功的 Git 分支模型](http://nvie.com/posts/a-successful-git-branching-model/)，使用单个远程 repo 作为您的***黄金标准***（*这实际上是 git 中的元思想，没有像 SVN 这样的大师之类的东西*）。在非主分支上进行所有开发，仅从单个远程*提取（而不是从彼此的本地存储库中提取*）。

当然，在开发工作流程中利用 git 的方法有很多种。这对我们的团队非常有效。

**那么这在您的环境中会是怎样的呢？**

你有一个 svn 存储库（*让我们称之为* `svn`），你只读了它的 git 镜像，让我们称之为`roRepo`。我们建议将其克隆`roRepo`到第三个远程仓库，我们称之为`flowRepo`. 然后 ' ***git svn clone*** '`svn`存储库到`svnRepo`.

`flowRepo`应该是您（*dev1*）和您的合作伙伴（*dev2*）以及其他任何人（*devN*）克隆的地方。因此，您最终会得到`dev1Repo`and `dev2Repo`。这些开发存储库永远不会相互拉动或推送，它们只会拉/推到`flowRepo`.

从那里开始，我们鼓励您接受 gitFlow 模型，不是因为它提供了任何黑魔法，而是因为它提供了一些简单的方法来学习/管理 git 中的开发工作流程（*例如使用 dev 分支、使用功能和修补程序分支，发布分支等。它们都只使用 git-flow 为您处理幕后更复杂的 git 命令*）。

然后，您和您的伴侣将`flowRep`全天定期推/拉。最有可能在 dev 分支上，但如果您在功能分支上共享工作，您可能会在偶尔推/拉那里。

当您（*很少，并且通常仅用于发布/修补程序*）达到您需要推回 svn 的点时，创建一个补丁（*您可能需要一个不错的脚本来为您处理这个，所以它不是手动*的）`flowRepo`从应用于`svnRepo`并最终同步回`svn`存储库。

我们的团队这样做了大约一年并取得了成功，直到我们成功地完全摆脱了 SVN 并拥有一个纯 git SCM 解决方案。

*为什么不直接克隆`svnRepo`并完全跳过`flowRepo`？*

基本上是因为它与 SVN 相关联，虽然分支和提交在 GIT 中很便宜，但在 SVN 中它们往往要贵得多。

使用***git-svn***时，最好：

*   尽量减少必须同步回 svn 存储库的分支数量
*   不要指望看到在 git 中完成的分支之间的合并在 svn 中发布：它们不会出现。只有在您对 svn 的 git 分支上进行的提交``dcommit`才会出现。

这就是问题所在，因为[git-flow（一个分支模型）](http://nvie.com/posts/a-successful-git-branching-model/)非常擅长创建分支来表示应用程序开发生命周期（功能、修补程序、开发、发布等），而将其同步回 svn 会很昂贵。

这并不是说它不能完成，但随着时间的推移，我们相信它有很大的潜力最终变得更加难以维护。

# php - MSSQL 和 PHP：根据单击的按钮选择特定行

> ID：15843678
> 
> 赞同：1
> 
> 时间：2013-04-05T21:13:53.893
> 
> 标签：php, sql-server, session, button, row

我正在使用 MSSQL 为模拟图书数据库创建一个网站，用户可以在其中搜索不同的图书并选择他们可能希望添加到他们帐户名下的收藏夹列表中的特定图书。我遇到的问题是我不知道如何区分他们想要添加到收藏夹中的书籍选择，因为我不知道如何将唯一标识它的书籍的 ISBN 设置为 php 会话变量. 如果有人能对此有所了解，我将不胜感激，整天都在努力解决这个问题。

```
//Set up connection
$connection = mssql_connect("$hostName", "$sqlUsername", "$sqlPassword")
or die("ERROR: selecting database server failed.");

//Select database
mssql_select_db($databaseName, $connection)
or die("ERROR: Selecting database failed");

//Search to run if searching for book title
if(isset($_GET['searchBook'])){
$searchBook = $_GET['searchBook'];
$query = "SELECT BOOK.ISBN, Title, Author, Publisher, NumberOfPages, Language, LocationName, ListPrice FROM BOOK, PRICE, LOCATION WHERE Title LIKE '%$searchBook%' AND BOOK.ISBN = PRICE.ISBN AND PRICE.LocationID = LOCATION.LocationID";
}

//Search to run is searching for a book author
if(isset($_GET['searchAuthor'])){
$searchAuthor = $_GET['searchAuthor'];
$query = "SELECT BOOK.ISBN, Title, Author, Genre, Publisher, NumberOfPages, Language, LocationName, ListPrice FROM BOOK, PRICE, LOCATION WHERE Author LIKE '%$searchAuthor%' AND BOOK.ISBN = PRICE.ISBN AND PRICE.LocationID = LOCATION.LocationID";
}

//Store query result
$query_result = mssql_query($query, $connection)
or die( "ERROR: Query is wrong");

//Set up table to display search results
echo "<form action=\"addFavorite.php\" method=\"POST\" name=\"table\">";
echo "<table border=1 align=\"center\">";
echo "<tr>";

// fetch attribute names
while ($filed = mssql_fetch_field($query_result)) {
echo "<th>".$filed->name."</th>";
}
echo "<th>Favorite</th>";
echo "</tr>";

// fetch table records
while ($line = mssql_fetch_row($query_result)) {
echo "<tr>\n";
foreach ($line as $eachline) {
    echo "<td> $eachline </td>";
}
echo "<td><input name=\"".$line['index']."\" type=\"submit\" value=\"Add To Favorites\"></td>";
echo "</tr>\n";
}
echo "</table>";
echo "</form>"; 
```

不确定这是否相关，但以下代码是我获取与单击的按钮行相对应的 ISBN 值的最佳尝试，这并不完全像我希望的那样工作。

```
//Get the ISBN 
$data = mssql_fetch_assoc($query_result);
$ISBN = $data['ISBN'];
echo $ISBN; 
```

这是我的 addFavorite.php 的代码，这是表单操作设置的位置。该文件需要知道哪些用户将一本书添加为收藏夹，以及他们将哪些书添加到该列表中。

```
//Set up connection
$connection = mssql_connect("$hostName", "$sqlUsername", "$sqlPassword")
or die("ERROR: selecting database server failed.");

//Select database
mssql_select_db($databaseName, $connection)
or die("ERROR: Selecting database failed");
$User = $_SESSION['userID'];

//Set up query
$query = "INSERT INTO FAVORITES VALUES(\"$User\",\"**I NEED A SESSION VARIABLE OR SOMETHING TO GO HERE\")";

//Store query result
$query_result = mssql_query($query, $connection)
//or die( "ERROR: Query is wrong"); 
```

任何帮助将非常感激。我知道这是很多信息，如果有任何不合理或我忘记提供的信息，请告诉我。谢谢。

***编辑*** 我尝试使用 BUTTON 而不是使用 INPUT 但由于某种原因按钮的值未设置为任何值。

```
echo "<form action=\"addFavorite.php\" method=\"POST\" name=\"table\">";
echo "<table border=1 align=\"center\">";
echo "<tr>";

// fetch attribute names
while ($filed = mssql_fetch_field($query_result)) {
echo "<th>".$filed->name."</th>";
}
echo "<th>Favorite</th>";
echo "</tr>";

// fetch table records **PROBLEM IN HERE since $line['ISBN'] returns nothing**
while ($line = mssql_fetch_row($query_result)) {
echo "<tr>\n";
foreach ($line as $eachline) {
    echo "<td> $eachline </td>";
}
echo "<td><button name=\"FavoriteButton\" type=\"submit\" value=\"".$line['ISBN']."\">Add To Favorites</button></td>";
echo "</tr>\n";
}
echo "</table>";
echo "</form>"; 
```

***EDIT 2*** 终于搞定了，感谢大家的帮助！在工作条件下发布的有问题的部分代码。

```
echo "<form action=\"addFavorite.php\" method=\"POST\" name=\"table\">";
echo "<table border=1 align=\"center\">";
echo "<tr>";

// fetch attribute names
while ($filed = mssql_fetch_field($query_result)) {
echo "<th>".$filed->name."</th>";
}
echo "<th>Favorite</th>";
echo "</tr>";

// fetch table records
while ($line = mssql_fetch_row($query_result)) {
echo "<tr>\n";
foreach ($line as $eachline) {
    echo "<td> $eachline </td>";
}
echo "<td><button name=\"FavoriteButton\" type=\"submit\" value=\"".$line[0]."\">Add To Favorites</button></td>";
echo "</tr>\n";
}
echo "</table>";
echo "</form>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:29:11.723

使用`BUTTON`-element 而不是`INPUT`-element。这样，您可以使用此元素的“值”属性来传递正确的值。

```
echo "<td><button name=\"$line['index']\" value=\"$line['ISBN']\" type=\"submit\">Add to favorites</button></td>"; 
```

尽管我建议为此使用 AJAX 而不是上述方法：使用按钮的 onclick 事件来执行调用单独的 php 文件并传递正确的 ISBN 号的 javascript。然后将其添加到数据库中，您的原始页面应刷新或重新加载页面的一部分。

# c# - 在 EntityFramework 中删除具有相关实体的实体

> ID：15843683
> 
> 赞同：3
> 
> 时间：2013-04-05T21:14:10.637
> 
> 标签：c#, asp.net, asp.net-mvc, entity-framework, asp.net-mvc-4

我有以下代码：

```
[HttpPost]
public ActionResult Eliminar(Usuario usuario)
{
        db.Usuarios.Attach(usuario);
        usuario.Transacciones.ToList().ForEach(t => db.Transacciones.Remove(t));
        usuario.Eventos.ToList().ForEach(e => db.Eventos.Remove(e));
        db.Usuarios.Remove(usuario);
        db.SaveChanges();
        return RedirectToAction("Index");
} 
```

我不能让它工作。我知道要删除一个实体，您首先必须附加它，但它不适用于具有关系的实体。我也尝试做一个`foreach`循环，并在删除它们之前附加每个`Transaccion`和`Evento`实体，但它也不起作用。

这是`InnerException`包含的错误：

> `System.Data.SqlClient.SqlException: The DELETE statement conflicted with the REFERENCE constraint "FK_TR_US". The conflict occurred in database "bd_dm", table "dbo.Transacciones", column 'idUsuario'. The statement has been terminated.`

我知道这意味着什么，但我不知道如何使代码工作。我需要先删除所有`Transacciones`与`Eventos`相关的`Usuario`，才能删除`Usuario`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T22:39:01.343

经过大量调试（在远程服务器中），我发现了问题所在。*Usuario usuario*数据正确地传递给*Eliminar*方法，但相关对象没有。所以我必须先加载它们，然后才能删除它们，然后删除*Usuario*对象。

这是我的最终代码：

```
[HttpPost]
public ActionResult Eliminar(Usuario usuario)
{
    db.Usuarios.Attach(usuario);
    db.Entry(usuario).Collection("Transacciones").Load();
    db.Entry(usuario).Collection("Eventos").Load();

    usuario.Transacciones.ToList().ForEach(t => db.Transacciones.Remove(t));
    usuario.Eventos.ToList().ForEach(e => db.Eventos.Remove(e));
    db.Usuarios.Remove(usuario);
    db.SaveChanges();

    return RedirectToAction("Index");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-22T15:07:03.220

这可能不会帮助你，但可能会帮助那些看到这个的人（就像我在研究这个问题时所做的那样）。

如果在数据库上设置了“删除时级联”，则不需要执行上述 foreach/remove 组合。有几种方法可以做到这一点，但“编程实体框架：代码优先”中的这一章[https://www.safaribooksonline.com/library/view/programming-entity-framework/9781449317867/ch04s04.html](https://www.safaribooksonline.com/library/view/programming-entity-framework/9781449317867/ch04s04.html)很好地解释了它.

在您的上述情况下：

usuario.Transacciones

usuario.Eventos

只需进入该关联的类，并在反向键上（可能在这种情况下，公共虚拟 Usuarios;，在关联的类中）添加装饰器 [Required]，它将更改外键，使其在删除时具有级联。

如果您不这样做，这些关联将被设置为 null 而不是被删除。

# ruby - Ruby 2.0 中的二进制字符串文字

> ID：15843684
> 
> 赞同：14
> 
> 时间：2013-04-05T21:14:18.047
> 
> 标签：ruby, encoding

升级到 Ruby 2.0 时，一个测试用例开始失败：

```
expected = "\xD1\x9B\x86"
assert_equal expected, actual 
```

带有以下消息：

```
<"ћ\x86"> expected but was
<"\xD1\x9B\x86">. 
```

该`actual`变量包含从外部库调用获得的二进制字符串。

问题是源文件的默认编码（以及字符串文字）[在 Ruby 2.0](https://bugs.ruby-lang.org/issues/6679)中从 US-ASCII 更改为 UTF-8。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-05T21:14:18.047

解决方案是更改字符串文字的定义以强制其编码。有几个可能的选项可以做到这一点：

使用[Array#pack](http://rubydoc.info/stdlib/core/Array%3apack)（所有版本的 Ruby）：

```
expected = ["d19b86"].pack('H*') 
```

使用[String#b](http://rubydoc.info/stdlib/core/2.0.0/String%3ab)（仅限 Ruby >= 2.0）：

```
expected = "\xD1\x9B\x86".b 
```

使用[String#force_encoding](http://rubydoc.info/stdlib/core/String%3aforce_encoding)（仅限 Ruby >= 1.9）：

```
expected = "\xD1\x9B\x86".force_encoding("ASCII-8BIT") 
```

# mysql - 美国邮政编码的最佳列类型是什么？

> ID：15843688
> 
> 赞同：15
> 
> 时间：2013-04-05T21:14:32.357
> 
> 标签：mysql, int, varchar

我想将**邮政编码**（美国境内）存储在 MySQL 数据库中。**节省**空间是当务之急。这是使用 VARCHAR 的更好选择 - 最大长度限制为 6 位或使用 INT 或使用 MEDIUM Int 。邮政编码不会用于任何计算。邮政编码将用于插入（一次）、更新（如果需要）和检索 - 一次（但可以多次）。

**在这里使用VARCHAR 或 INT 或 MEDIUM IN MYSQL**哪个更好？请提出其他建议？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-05T21:22:05.087

将邮政编码存储为数值存在一些问题。

1.  邮政编码有扩展名，这意味着它们可以是`12345-6789`. 您不能将破折号存储在数值数据类型中。
2.  有许多以零开头的邮政编码，如果将其存储为 int，您将失去前导零。
3.  您不要添加/减去等邮政编码或使用数字函数。

我会将邮政编码存储为`varchar(5)`or `varchar(10)`。

作为旁注，我不确定您为什么会选择`varchar(6)`，当标准邮政编码为 5 或 10 并带有扩展名时，您是否有理由选择不寻常的长度？

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-05T21:24:29.613

我通常使用`MEDIUMINT(5) ZEROFILL`5 位数的邮政编码。这将保留任何前导`0`s 并且它只使用 3 个字节，而 a`VARCHAR(5)`将使用 6。这假设您不需要扩展的邮政编码，它有一个破折号和 4 个额外的数字。如果您决定使用文本类型，我会使用`CHAR(5)`而不是，`VARCHAR(5)`因为如果数据总是 5 个字符长会更好。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-05T21:26:53.313

邮政编码总是 5 个字符，因此您需要 CHAR 数据类型，而不是 VARCHAR。

因此，您的选择是

```
CHAR(5)

MEDIUMINT (5) UNSIGNED ZEROFILL 
```

第一个每个邮政编码占用 5 个字节。

第二个每个邮政编码只占用 3 个字节。ZEROFILL 选项对于带有前导零的邮政编码是必需的。

因此，如果空间是您的首要任务，请使用 MEDIUMINT。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-17T20:01:42.190

我建议使用 VARCHAR 数据类型，因为在某些国家/地区，邮政编码用作字母数字，而在其他地方用作整数。所以我们不能将整数用于全局使用。此外，邮政编码可能以零开头，`001101`在这种情况下，如果我们采用数据类型整数，那么前导零将丢失，因此我们无法传递实际的邮政编码。

# .htaccess - Codeigniter 安装在子目录中

> ID：15843692
> 
> 赞同：2
> 
> 时间：2013-04-05T21:14:40.343
> 
> 标签：.htaccess, codeigniter, mod-rewrite

我想在子目录中安装最新版本的 codeigniter。到目前为止有效。但现在我想`index.php`从网址中删除。因此，我`.htaccess`在子文件夹中有这个文件。

```
RewriteEngine On
RewriteBase /dev/

# Removes trailing slashes (prevents SEO duplicate content issues)
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)/$ $1 [L,R=301]

###

# Removes access to the system folder by users.
# Additionally this will allow you to create a System.php controller,
# previously this would not have been possible.
# 'system' can be replaced if you have renamed your system folder.
RewriteCond %{REQUEST_URI} ^system.*
RewriteCond %{REQUEST_URI} ^application.*
RewriteRule ^(.*)$ /index.php/$1 [L]

# Checks to see if the user is attempting to access a valid file,
# such as an image or css document, if this isn't true it sends the
# request to index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

子文件夹的名称为`dev`，webroot（父文件夹）为空。里面只有一个`index.html`文件。

所以这导致了这个结构：

```
/var/www/
    index.html
    dev/
        ci installation here
        .htaccess 
```

当然`mod-rewrite`是启用的。

任何想法为什么它不起作用？[调用http://domain.tld/dev/login 之](http://domain.tld/dev/login)类的内容时出现 404 错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T22:55:40.113

你需要两件事。

在`config.php`, 配置`index_page`为空，因此正确创建了 URL

```
$config['index_page'] = ''; 
```

在你的`.htaccess`

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^.*$ index.php/$0 
```

Codeigniter 提供的这些子目录中的文件已经禁止访问`system`和目录。`application``.htaccess`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T21:55:32.800

试试下面的代码。

```
RewriteEngine on
RewriteCond $1 !^(index\.php|public|\.txt)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?$1 
```

# iphone - 如何在 Iphone 上嵌入无法启动外部播放器的 youtube 视频？

> ID：15843696
> 
> 赞同：2
> 
> 时间：2013-04-05T21:14:51.813
> 
> 标签：iphone, youtube, youtube-api, embed

我正在尝试在我的应用程序中实现嵌入式 Youtube 视频。我设法做到这一点的唯一方法是使用[LBYouTubeView](https://github.com/larcus94/LBYouTubeView)或[HCYotubeParser](http://www.cocoacontrols.com/controls/hcyoutubeparser)等框架。从我读到的内容来看，他们反对 Youtube TOS，因为他们基本上从 http 中剥离了视频链接，得到了类似的[东西](http://r2---sn-gqn-ungl.c.youtube.com/videoplayback?source=youtube&ratebypass=yes&key=yt1&newshard=yes&mt=1365196042&expire=1365221166&dnc=1&el=watch&mv=m&itag=18&ms=au&upn=Z_v-Jvenvcs&cp=U0hVSlJNT19LUENONV9KR1NCOlFMSEJMQnZOT0JL&sparams=cp%2Cid%2Cip%2Cipbits%2Citag%2Cratebypass%2Csource%2Cupn%2Cexpire&ip=79.117.173.42&app=youtube_mobile&fexp=926501%2C929206%2C916612%2C902534%2C932000%2C906383%2C902000%2C901208%2C919512%2C929903%2C925714%2C931202%2C900821%2C900823%2C931203%2C931401%2C906090%2C909419%2C908529%2C930807%2C919373%2C930803%2C906836%2C920201%2C929602%2C930101%2C926403%2C900824%2C910223&id=e6f6a9f910a4d660&sver=3&yms=OOIZKDxQRZI&ipbits=8&signature=4CD8D523A3D8A3ECED84B02AC8A6C68B8C4FB9C9.2797544C51DACBC0E96C2CE0624B04BB9E0038FA)。

这确实可以在 MPMoviePlayerController 中毫无问题地播放（并且无需离开应用程序）。

从我搜索的内容来看，有两个应用程序成功地完成了[Vodio](http://www.vod.io/)和[Frequency](http://www.frequency.com/)，所以我想知道是否有针对开发人员的特殊 sdk 或我可能错过的附属计划。

从我还读到的内容中，如果 Youtube 工程师被标记为 youtube-api，他们会回答这个问题，所以我希望你能解决这个问题。

我已经阅读了有关 UIWebView 实现的信息，但该场景实际上打开了一个我无法控制的外部视频播放器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T12:41:05.080

我环顾四周，这就是我想出的：它涉及使用以下代码将 youtube.html 文件添加到您的项目中：

```
<html>
<head><style>body{margin:0px 0px 0px 0px;}</style></head>
<body>
<!-- 1\. The <iframe> (and video player) will replace this <div> tag. -->
<div id="player"></div>

<script>
    // 2\. This code loads the IFrame Player API code asynchronously.
    var tag = document.createElement('script');
    tag.src = "http://www.youtube.com/player_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

    // 3\. This function creates an <iframe> (and YouTube player)
    //    after the API code downloads.
    var player;
    function onYouTubePlayerAPIReady()
    {
    player = new YT.Player('player',
    {
      width: '640',
      height: '360',
      videoId: '%@',
      playerVars: {'autoplay' : 1, 'controls' : 0 , 'vq' : 'hd720', 'playsinline' : 1, 'showinfo' : 0, 'rel' : 0, 'enablejsapi' : 1, 'modestbranding' : 1},
      events:
        {
        'onReady': onPlayerReady,
        'onStateChange': onPlayerStateChange
        }
    });
    }

    // 4\. The API will call this function when the video player is ready.
    function onPlayerReady(event)
    {
        event.target.playVideo();
    }

    // 5\. The API calls this function when the player's state changes.
    //    The function indicates that when playing a video (state=1),
    //    the player should play for six seconds and then stop.
    var done = false;
    function onPlayerStateChange(event)
    {
    if (event.data == YT.PlayerState.ENDED) 
        {
            window.location = "callback:anything"; 
        };
    }
    function stopVideo() 
    {
        player.stopVideo();
        window.location = "callback:anything";
    }
    function getTime()
    {
        return player.getCurrentTime();
    }
    function getDuration()
    {
        return player.getDuration();
    }
    function pause()
    {
        player.pauseVideo();
    }
    function play()
    {
        player.playVideo();
    }
</script>
</body>
</html> 
```

您还必须创建一个 UiWebView 子类，它也是 UIWebViewDelegate 的委托

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self == nil) return nil;

    self.mediaPlaybackRequiresUserAction = NO;
    self.delegate = self;
    self.allowsInlineMediaPlayback = TRUE;
    self.userInteractionEnabled = FALSE;
    return self;
}

- (void)loadVideo:(NSString *)videoId
{
    NSString *filePath = [[NSBundle mainBundle] pathForResource:@"YouTube" ofType:@"html"];
    //    if (filePath == nil)

    NSError *error;
    NSString *string = [NSString stringWithContentsOfFile:filePath encoding:NSUTF8StringEncoding error:&error];
    // TODO: error check

    string = [NSString stringWithFormat:string, videoId];

    NSData *htmlData = [string dataUsingEncoding:NSUTF8StringEncoding];
    //    if (htmlData == nil)

    NSString *documentsDirectoryPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString *targetPath = [documentsDirectoryPath stringByAppendingPathComponent:@"youtube2.html"];
    [htmlData writeToFile:targetPath atomically:YES];

    [self loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:targetPath]]];
    File = 0;
}

- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    if ([[[request URL] scheme] isEqualToString:@"callback"])
    {
        Playing = FALSE;

        NSString *documentsDirectoryPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
        NSString *targetPath = [documentsDirectoryPath stringByAppendingPathComponent:@"youtube2.html"];
        NSError *error;
        [[NSFileManager defaultManager] removeItemAtPath:targetPath error:&error];       
    }
    return YES;
} 
```

基本上它会创建一个 UIWebView 并将代码加载到 youtube.html 文件中。因为 youtube.html 是静态的，我需要加载某个 id，所以我在文档文件夹 youtube2.html 中动态创建了一个副本，我在其中添加了字符串 id。

整个事情就是 [self loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:targetPath]]]; 有效，但从字符串加载 NSUrlRequest 无效。

您在 html 文件中看到的 Javascript 函数用于控制视频。如果您需要访问时间或完整持续时间，您可以像这样获得它们：

```
float VideoDuration = [[YT_WebView stringByEvaluatingJavaScriptFromString:@"getDuration()"] floatValue];
float VideoTime = [[YT_WebView stringByEvaluatingJavaScriptFromString:@"getTime()"] floatValue]; 
```

# c# - Kendo MVC ToDataSourceResult 对于大型 IQueryable 极其缓慢

> ID：15843703
> 
> 赞同：7
> 
> 时间：2013-04-05T21:15:14.380
> 
> 标签：c#, asp.net, asp.net-mvc-4, kendo-ui, datasource

我已经`DataSourceResult ToDataSourceResult(this IQueryable enumerable, DataSourceRequest request);`广泛使用了 Kendo 扩展，直到现在在查询包含 4000 万条记录的表时才注意到性能问题。我作为基准编写的 take 10 查询，因为它与传入的请求相同。

这是我的阅读动作：

```
public ActionResult ReadAll([DataSourceRequest] DataSourceRequest 
{
    var startTimer = DateTime.Now;
    var context = Helpers.EFTools.GetCADataContext();
    Debug.WriteLine(string.Format("{0} : Got Context", DateTime.Now - startTimer));

    var events = from e in context.Events
                 select
                     new Models.Event()
                         {
                             Id = e.Id,
                             DateTime = e.EventDateTime,
                             HostId = e.Door.HostId,
                             SiteId = e.Door.Host.SiteId,
                             UserId = (int)e.UserId,
                             UserName = e.User.FirstName + " " + e.User.Surname,
                             DoorId = e.DoorId,
                             Door = e.Door.Name,
                             Description = e.Description,
                             SubDescription = e.SubDescription
                         };
    Debug.WriteLine(string.Format("{0} : Built Query", DateTime.Now - startTimer));

    var tenRecods = events.OrderByDescending(i => i.DateTime).Take(10).ToList();
    Debug.WriteLine(string.Format("{0} : Taken 10", DateTime.Now - startTimer));

    var result = events.ToDataSourceResult(request);
    Debug.WriteLine(string.Format("{0} : Datasource Result", DateTime.Now - startTimer));

    return this.Json(result);
} 
```

调试的输出：

```
00:00:00.1316569 : Got Context
00:00:00.1332584 : Built Query
00:00:00.2407656 : Taken 10
00:00:21.5013946 : Datasource Result 
```

虽然有时查询超时。使用 dbMonitor 我捕获了两个查询，首先手动获取 10：

```
"Project1".id,
"Project1"."C1",
"Project1".hostid,
"Project1".siteid,
"Project1".userid,
"Project1"."C2",
"Project1".doorid,
"Project1"."name",
"Project1".description,
"Project1".subdescription
FROM ( SELECT 
    "Extent1".id,
    "Extent1".userid,
    "Extent1".description,
    "Extent1".subdescription,
    "Extent1".doorid,
    "Extent2"."name",
    "Extent2".hostid,
    "Extent3".siteid,
     CAST("Extent1".eventdatetime AS timestamp) AS "C1",
    "Extent4".firstname || ' ' || "Extent4".surname AS "C2"
    FROM    public.events AS "Extent1"
    INNER JOIN public.doors AS "Extent2" ON "Extent1".doorid = "Extent2".id
    INNER JOIN public.hosts AS "Extent3" ON "Extent2".hostid = "Extent3".id
    INNER JOIN public.users AS "Extent4" ON "Extent1".userid = "Extent4".id
)  AS "Project1"
ORDER BY "Project1"."C1" DESC
LIMIT 10 
```

和 ToDataSourceRequest 查询：

```
SELECT 
"GroupBy1"."A1" AS "C1"
FROM ( SELECT Count(1) AS "A1"
    FROM  public.events AS "Extent1"
    INNER JOIN public.doors AS "Extent2" ON "Extent1".doorid = "Extent2".id
)  AS "GroupBy1" 
```

这是`DataSourceRequest request`传入的参数：

```
request.Aggregates Count = 0
request.Filters Count = 0
request.Groups Count = 0
request.Page 1
request.PageSize 10
request.Sorts Count = 1 
```

这是结果`var result = events.ToDataSourceResult(request);`

```
result.AggregateResults null
result.Data Count = 10
result.Errors null
result.Total 43642809 
```

如何以更有效和更快的方式`DataSourceResult`从事件 IQueryable 中获取？`DataSourceRequest`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T19:54:13.723

在实现具有大量调试输出时间戳的自定义绑定（由[Atanas Korchev](/users/10141/atanas-korchev)建议）之后，很明显是什么导致了性能问题，即总数。

看着我捕获的 SQL 备份了这一点，不知道为什么我以前没有看到它。

快速获取总行数是另一个问题，但会在此处发布我找到的任何答案。

# c++ - 成员变量 - 未定义和不可访问

> ID：15843705
> 
> 赞同：-2
> 
> 时间：2013-04-05T21:15:22.680
> 
> 标签：c++, mfc

我无法从成员函数访问私有成员变量`CAboutDlg::OnLButtonDown`。当我尝试为 ellipseColor 分配一个新值时，我得到了`undeclared identifier`错误。当我尝试通过它的类访问它时`CCSIT861a3VasilkovskiyDlg::ellipseColor`，编译器说它是不可访问的。

我错过了什么，如何访问/修改这些变量？

头文件：

```
#pragma once

// CCSIT861a3VasilkovskiyDlg dialog
class CCSIT861a3VasilkovskiyDlg : public CDialogEx
{
// Construction
public:
    CCSIT861a3VasilkovskiyDlg(CWnd* pParent = NULL);    // standard constructor

// Dialog Data
    enum { IDD = IDD_CSIT861A3VASILKOVSKIY_DIALOG };

    protected:
    virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support

// Implementation
protected:
    HICON m_hIcon;

    // Generated message map functions
    virtual BOOL OnInitDialog();
    afx_msg void OnSysCommand(UINT nID, LPARAM lParam);
    afx_msg void OnPaint();
    afx_msg HCURSOR OnQueryDragIcon();
    DECLARE_MESSAGE_MAP()
private:
    COLORREF ellipseColor;
    COLORREF centerRectColor;
    COLORREF rightRectColor;
    CRect centerRect;
    CRect rightRect;
    CSize ellipse;
    bool mouseCaptured;
}; 
```

实施文件：

```
#include "stdafx.h"
#include "CSIT861a3 Vasilkovskiy.h"
#include "CSIT861a3 VasilkovskiyDlg.h"
#include "afxdialogex.h"

#ifdef _DEBUG
#define new DEBUG_NEW
#endif

// CAboutDlg dialog used for App About

class CAboutDlg : public CDialogEx
{
public:
    CAboutDlg();

// Dialog Data
    enum { IDD = IDD_ABOUTBOX };

    protected:
    virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support

// Implementation
protected:
    DECLARE_MESSAGE_MAP()
public:
    afx_msg void OnLButtonDown(UINT nFlags, CPoint point);
    afx_msg void OnLButtonUp(UINT nFlags, CPoint point);
    afx_msg void OnMouseMove(UINT nFlags, CPoint point);
};

CAboutDlg::CAboutDlg() : CDialogEx(CAboutDlg::IDD)
{
}

void CAboutDlg::DoDataExchange(CDataExchange* pDX)
{
    CDialogEx::DoDataExchange(pDX);
}

BEGIN_MESSAGE_MAP(CAboutDlg, CDialogEx)
    ON_WM_LBUTTONDOWN()
    ON_WM_LBUTTONUP()
    ON_WM_MOUSEMOVE()
END_MESSAGE_MAP()

// CCSIT861a3VasilkovskiyDlg dialog

CCSIT861a3VasilkovskiyDlg::CCSIT861a3VasilkovskiyDlg(CWnd* pParent /*=NULL*/)
    : CDialogEx(CCSIT861a3VasilkovskiyDlg::IDD, pParent)
{
    m_hIcon = AfxGetApp()->LoadIcon(IDR_MAINFRAME);

    ellipseColor = RGB(255, 0, 0);
    centerRectColor = RGB(0, 0, 0);
    rightRectColor = RGB(255, 0, 0);
    centerRect.left = 40;
    centerRect.top = 20;
    centerRect.right = 55;
    centerRect.bottom = 80;
    rightRect.left = 75;
    rightRect.top = 35;
    rightRect.right = 90;
    rightRect.bottom = 50;
    ellipse.cx = 10;
    ellipse.cy = 10;
    mouseCaptured = false;
}

void CCSIT861a3VasilkovskiyDlg::DoDataExchange(CDataExchange* pDX)
{
    CDialogEx::DoDataExchange(pDX);
}

BEGIN_MESSAGE_MAP(CCSIT861a3VasilkovskiyDlg, CDialogEx)
    ON_WM_SYSCOMMAND()
    ON_WM_PAINT()
    ON_WM_QUERYDRAGICON()
END_MESSAGE_MAP()

// CCSIT861a3VasilkovskiyDlg message handlers

BOOL CCSIT861a3VasilkovskiyDlg::OnInitDialog()
{
    CDialogEx::OnInitDialog();

    // Add "About..." menu item to system menu.

    // IDM_ABOUTBOX must be in the system command range.
    ASSERT((IDM_ABOUTBOX & 0xFFF0) == IDM_ABOUTBOX);
    ASSERT(IDM_ABOUTBOX < 0xF000);

    CMenu* pSysMenu = GetSystemMenu(FALSE);
    if (pSysMenu != NULL)
    {
        BOOL bNameValid;
        CString strAboutMenu;
        bNameValid = strAboutMenu.LoadString(IDS_ABOUTBOX);
        ASSERT(bNameValid);
        if (!strAboutMenu.IsEmpty())
        {
            pSysMenu->AppendMenu(MF_SEPARATOR);
            pSysMenu->AppendMenu(MF_STRING, IDM_ABOUTBOX, strAboutMenu);
        }
    }

    // Set the icon for this dialog.  The framework does this automatically
    //  when the application's main window is not a dialog
    SetIcon(m_hIcon, TRUE);         // Set big icon
    SetIcon(m_hIcon, FALSE);        // Set small icon

    // TODO: Add extra initialization here

    return TRUE;  // return TRUE  unless you set the focus to a control
}

void CCSIT861a3VasilkovskiyDlg::OnSysCommand(UINT nID, LPARAM lParam)
{
    if ((nID & 0xFFF0) == IDM_ABOUTBOX)
    {
        CAboutDlg dlgAbout;
        dlgAbout.DoModal();
    }
    else
    {
        CDialogEx::OnSysCommand(nID, lParam);
    }
}

// If you add a minimize button to your dialog, you will need the code below
//  to draw the icon.  For MFC applications using the document/view model,
//  this is automatically done for you by the framework.

void CCSIT861a3VasilkovskiyDlg::OnPaint()
{
    //Create pen and pointer to the old pen
    CPen blackPen; 
    blackPen.CreatePen(PS_SOLID, 1, RGB (0, 0, 0)); 

    //Create a bursh
    CBrush blackBrush(centerRectColor);
    CBrush redBrush(rightRectColor);
    CBrush hatchRedBrush(HS_CROSS, ellipseColor);

    //Set up object for painting
    CPaintDC dc (this);
    CRect rect;
    GetClientRect (&rect);
    dc.SetMapMode (MM_ANISOTROPIC);
    dc.SetWindowExt (100, 100);
    dc.SetViewportExt (rect.Width (), rect.Height ());

    //select pen 
    dc.SelectObject(&blackPen);

    //Rectangle red interior color
    dc.SelectObject(&redBrush);
    dc.Rectangle(rightRect); //(75, 35, 90, 50);

    //Rectangel black interior
    dc.SelectObject(&blackBrush);//Select Brush
    dc.Rectangle( centerRect);//(40, 20, 55, 80);

    //Ellipse
    dc.SelectObject(&hatchRedBrush);//Select Brush
    dc.Ellipse(ellipse.cx, ellipse.cy, (ellipse.cx) + 10, (ellipse.cy) + 10);//10, 10, 20, 20);

    if (IsIconic())
    {
        CPaintDC dc(this); // device context for painting

        SendMessage(WM_ICONERASEBKGND, reinterpret_cast<WPARAM>(dc.GetSafeHdc()), 0);

        // Center icon in client rectangle
        int cxIcon = GetSystemMetrics(SM_CXICON);
        int cyIcon = GetSystemMetrics(SM_CYICON);
        CRect rect;
        GetClientRect(&rect);
        int x = (rect.Width() - cxIcon + 1) / 2;
        int y = (rect.Height() - cyIcon + 1) / 2;

        // Draw the icon
        dc.DrawIcon(x, y, m_hIcon);
    }
    else
    {
        CDialogEx::OnPaint();
    }
}

// The system calls this function to obtain the cursor to display while the user drags
//  the minimized window.
HCURSOR CCSIT861a3VasilkovskiyDlg::OnQueryDragIcon()
{
    return static_cast<HCURSOR>(m_hIcon);
}

void CAboutDlg::OnLButtonDown(UINT nFlags, CPoint point)
{
    // TODO: Add your message handler code here and/or call default
    //SetCapture();
    CClientDC dc(this);
    CRect rect;
    GetClientRect(&rect);
    dc.SetMapMode(MM_ANISOTROPIC);
    dc.SetWindowExt(100, 100);
    dc.SetViewportExt(rect.Width(), rect.Height());
    CRect rectEllipse(10, 10, 20, 20);

    CDialogEx::OnLButtonDown(nFlags, point);
}

void CAboutDlg::OnLButtonUp(UINT nFlags, CPoint point)
{
    // TODO: Add your message handler code here and/or call default
    ReleaseCapture ();
    CDialogEx::OnLButtonUp(nFlags, point);
}

void CAboutDlg::OnMouseMove(UINT nFlags, CPoint point)
{
    // TODO: Add your message handler code here and/or call default

    CDialogEx::OnMouseMove(nFlags, point);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:19:00.807

您`OnLButtonDown()`是 的成员函数`CAboutDlg`，但您正试图访问 的`private`非`static`数据成员`CCSIT861a3VasilkovskiyDlg`，这是一个*不同*的类。

您可能打算将函数`OnLButtonDown()`,`OnLButtonUp()`和`OnMouseMove()`作为 的成员函数`CCSIT861a3VasilkovskiyDlg`，而不是作为 的成员函数`CAboutDlg`。

# r - R：如何绘制考虑样本量的小提琴图、箱线图？

> ID：15843706
> 
> 赞同：1
> 
> 时间：2013-04-05T21:15:26.440
> 
> 标签：r, plot, kernel-density, density-plot

举一个简单的例子，假设：

```
A = rnorm(10)
B = rnorm(100)
C = rnorm(500)

library(vioplot)
vioplot(A,B,C) 
```

因此，我的问题是如何创建考虑到样本量的图表。“C”的样本量比“A”高得多，有没有办法让“C”的小提琴图可以显示比“A”“更大”的小提琴？因此，这将是我认为跨越三个类别的密度分布，因此即使“A”和“C”的整个分布形状可能相等，而不是显示相同的图像，它们显示“A”的形状比'C' 和 'B' 也是由于其较小的样本量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:30:20.457

尺寸不会有所不同，因为小提琴图是箱线图和密度/概率图的组合。

这是一个简短的例子：

```
library(ggplot2) 
```

a) 相同大小

```
df.ex<-data.frame(G=c(rep('A',100),rep('B',100)),Y=c(rnorm(100),rnorm(100)))
ggplot(data=df.ex,aes(x=G,y=Y)) + geom_violin() 
```

b) 不同的尺寸

```
df.ex<-data.frame(G=c(rep('A',100),rep('B',1000)),Y=c(rnorm(100),rnorm(1000)))
ggplot(data=df.ex,aes(x=G,y=Y)) + geom_violin() 
```

您可以将它与`geom_jitter`它将显示有多少点：

```
 ggplot(data=df.ex,aes(x=G,y=Y)) + geom_jitter() + geom_violin() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T21:54:48.503

不幸的是，vioplot 的某些参数不接受向量。这是一种解决方法。`vioplot()`此解决方法的有用功能是`at`和`wex`参数以及`add=T`. 基本上，使用按您想要的方式塑造它们的参数分别绘制每把小提琴。您可能需要调整缩放样本大小的方式以用于`wex`.

```
n<-c(100,1000)
size<-scale(sqrt(n),center=F)

x1<-rnorm(n[1])
x2<-rnorm(n[2])

#initialize an empty plot
plot(0:3,rep(0,4),type='l',xlim=c(0,3),ylim=c(-4,4),ylab="",xlab="",xaxt="n",lty=3)

# fill in the violins at specific x locations using the `wex` parameter for size
vioplot(x1,at=1,wex=size[1],add=T,col="darkgray")
vioplot(x2,at=2,wex=size[2],add=T,col="darkgray")
axis(1,at=1:2,labels=c("Mon","Tues")) 
```

![在此处输入图像描述](https://i.stack.imgur.com/YElg1.png)

# php - PHP从facebook var中回显出多维数组

> ID：15843709
> 
> 赞同：0
> 
> 时间：2013-04-05T21:15:31.637
> 
> 标签：php, arrays, facebook-graph-api, multidimensional-array

我有一个 facebook 数组，我正在尝试呼出名称和 ID。

我只有这个数组：$friends_list。

当我使用此代码时：

print_r($friends_list);

然后出现以下内容：但是我如何循环这些？或者，如果我只是想知道有多少个名字，或者只是通过 id 调用一个 var。简而言之，我如何回显 $friends_list 这是一个多维数组？

```
Array ( [data] => Array ( [0] => Array ( [name] => Wendy Cukierski [id] => 524320383 ) [1] => Array ( [name] => Leticia Mercado Correa [id] => 537763225 ) [2] => Array ( [name] => Olivia Urbina [id] => 538711855 ) [3] => Array ( [name] => Ruth Albrecht [id] => 541610111 ) [4] => Array ( [name] => Josh Brahm [id] => 577546485 ) [5] => Array ( [name] => Kim Yu [id] => 583515871 ) [6] => Array ( [name] => SisterTracey Dugas [id] => 643567171 ) [97] => Array ( [name] => Mary Martinez [id] => 100004696266210 ) ) [paging] => Array ( [next] => https://graph.facebook.com/1566027944/friends?limit=5000&offset=5000&__after_id=100004696266210 ) ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T21:17:37.637

重复 --> [如何使用 PHP 在 MySQL 中存储 Facebook 用户的好友列表？](https://stackoverflow.com/questions/10774959/how-to-store-a-facebook-users-friends-list-in-mysql-using-php)

```
$friends_list = file_get_contents('https://graph.facebook.com/me/friends?access_token=' . $atoken );
    $friends_list_array  = json_decode($friends_list,true);
    $arr= $friends_list_array['data'];
    $friend_ids_arr = array();
    foreach($arr as $friend) {
        $friend_ids_arr[] = $friend['id'];
    }
    $friend_ids = implode("," , $friend_ids_arr);
    echo $friend_ids; // output: id1,id2,id3...etc 
```

# java - NumberFormatExceptions 到处抛出。为什么？(解析整数)

> ID：15843716
> 
> 赞同：0
> 
> 时间：2013-04-05T21:15:52.457
> 
> 标签：java, exception, parseint, numberformatexception, text-based

第一次在这里发布一个非常烦人的问题。我决定用 Java 创建一个基于文本的 RPG，以巩固我所学的知识。对于所有冗长的游戏，保存/加载系统是必要的。这就是我的问题出现的地方。

我创建了一个菜单系统，效果很好。但是，当我决定开始一个新游戏时，我会在左侧、右侧和中间抛出 NumberFormatExceptions。我的源代码在下面，非常感谢任何帮助。我已将每个重要部分分成单独的 Java 文件。

```
//Imports
import java.io.IOException;
import java.io.File;
import java.io.*;
import java.util.Scanner;
import javax.sound.sampled.AudioInputStream;
import javax.sound.sampled.AudioSystem;
import javax.sound.sampled.Clip;

//'Choices' - By Yemi Oladimeji/YemZeee

class Choices{
        public static void main(String [] args) throws IOException{

    Scanner input = new Scanner(System.in);
    String startChoice = null;

    //Introduction begin
        GameMethods.space();
        System.out.println("########  ##    ## ######## ######## ########            ######## ########");
        System.out.println("##        ##    ## ##    ##    ##    ##       ##       ##        ");
        System.out.println("##        ##    ## ##    ##    ##    ##       ##       ##        ");
        System.out.println("##        ######## ##    ##    ##    ##       ######    ###### ");
        System.out.println("##        ##    ## ##    ##    ##    ##       ##             ##");
        System.out.println("##        ##    ## ##    ##    ##    ##       ##             ##");
        System.out.println("########  ##    ## ######## ######## ######## ######## ########");
        GameMethods.space();
        System.out.println("Greetings, and welcome to Choices, a 2D text-based RPG!");
        System.out.println("What would you like to do?");
        System.out.println("<P>lay :: <A>bout :: <Q>uit");
        startChoice = input.nextLine();
        GameMethods.sChoice(startChoice);
        }
}//End Choices.java 
```

这是 GameMethods.java 文件的开头

```
import java.util.Scanner;
import java.io.*;
import java.io.IOException;

public class GameMethods extends ChoiceSaveMethods{

static Scanner input = new Scanner(System.in);
static String startChoice;
static String loadChoice;

public static void buffer(){
    try{
        System.in.read();
        } catch(Exception e){
    }
}

public static void space(){
    System.out.println(" ");
}

public static void quit(){
System.exit(1);
}

public static void menuCall(){
    System.out.println("<P>lay :: <A>bout :: <Q>uit");
    startChoice = input.nextLine();
    GameMethods.sChoice(startChoice);
}

public static void sChoice(String startChoice){
    if(startChoice.equals("A")){
        GameMethods.space();
        System.out.println("This is a text-based RPG, created by Yemi Oladimeji.");
        System.out.println("It focuses on the story and said story changes depend on \nthe choices you make in this world.");
        System.out.println("As it is quite story driven, there will be the option at \nthe end of your journey to output your story to a text file for you to save and keep.");
        System.out.println("Now that you know what the game is about, do you want to go back to the menu? \n(Y/N)");
        String aChoice = input.nextLine();
        if(aChoice.equals("Y")){
            GameMethods.menuCall();
        } else if(aChoice.equals("N")){
            System.out.println("Or would you like to quit the game?");
            String qChoice = input.nextLine();
            if(qChoice.equals("Y")){
                System.exit(1);
            } else if(qChoice.equals("N")){
                GameMethods.menuCall();
            }
        }   
    }
    if(startChoice.equals("Q")){
        GameMethods.quit();
    }
    if(startChoice.equals("P")){
        try{
            BufferedReader saveFile = new BufferedReader(new    FileReader("C:\\Users\\Yemi\\Desktop\\TheGame\\SaveFiles\\TextSave1.txt"));
            areaMarkers[0] = Integer.parseInt(saveFile.readLine());
            areaMarkers[1] = Integer.parseInt(saveFile.readLine());
            areaMarkers[2] = Integer.parseInt(saveFile.readLine());
            areaMarkers[3] = Integer.parseInt(saveFile.readLine());
            saveFile.close();

                for(int x = 0; x < 4; x++){
                if(areaMarkers[x] == 1){
                    System.out.println("A save game has been located. Would you like to load it?(Y/N)");
                    loadChoice = input.nextLine();
                    if(loadChoice.equals("Y")){
                        System.out.println("The save/load feature works.");
                    } else if(loadChoice.equals("N")){
                        System.out.println("Starting new game...");
                        GameMethods.gameStart();
                    }
                }
            }
        } catch(IOException ex){
            ex.printStackTrace();
        }
        forestArea();
    }
}

public static void gameStart(){
    //Introduction begin
        GameMethods.space();
        System.out.println("Welcome to 'Choices'. You influence this world with your decisions. You react \nhow you wish...");
        GameMethods.space();
        System.out.println("This game was built to immerse you in a hooking storyline with no graphics, \nand only your imagination can help with that. \nThat and some audio. For that purpose, I recommend that you use headphones \nwhilst playing this game.");
        System.out.println("I require two pieces of information. Your name. What is it?\n(This is what you will be called in game)");
        System.out.println("Your name: ");
        String name1 = input.nextLine();
        System.out.println("And the name for this user account\n(So the program can locate the required files): ");
        String userName = input.nextLine();
        System.out.println("There are two rules...");
        System.out.println("This (*) means a flashback is occurring.");
        System.out.println("And when there is a pause, it means that you \nshould press Enter/Return to continue.");
        System.out.println("You get that? Good.");
        System.out.println("Now. Let us begin your game and remember. \nYour     choices affect your path.");
    //Introduction end
}
} 
```

这是最后一个 Java 文件，包含区域和保存方法：

```
import java.io.*;
import java.util.Scanner;
import java.io.IOException;

public class ChoiceSaveMethods{

//Area variables:
static int[] areaMarkers = new int[4];
static int[] areaChoices = new int[4];
static Scanner input = new Scanner(System.in);

public static void forestArea(){
    GameMethods.space();
    System.out.println("Area 1: Forest. What would you like to do here?: ");
    System.out.println("1 - Save the game?");
    System.out.println("2 - View a description of the area?");
    System.out.println("3 - Progress to the next area?");
    System.out.println("4 - Exit to the main menu?");

   areaChoices[0] = input.nextInt();

   if(areaChoices[0] == 1){
        try{
            FileWriter saveFile1 = new FileWriter("C:\\Users\\Yemi\\Desktop\\TheGame\\SaveFiles\\TextSave1.txt");
            areaMarkers[0] = 1;
            saveFile1.write(1);
            System.out.println("Game has been saved successfully.");
            saveFile1.close();
            forestArea();
        } catch (IOException ex){
            ex.printStackTrace();
        } 
    } else if(areaChoices[0] == 2){
        System.out.println("This is a forest. It has trees.");
        forestArea();
    } else if(areaChoices[0] == 3){
        System.out.println("Progressing to next area...");
        cityArea();
    } else if(areaChoices[0] == 4){
        System.out.println("Returning to main menu.");
        GameMethods.menuCall();
    }
}

public static void cityArea(){
    GameMethods.space();
    System.out.println("Area 2: City. What would you like to do here?: ");
    System.out.println("1 - Save the game?");
    System.out.println("2 - View a description of the area?");
    System.out.println("3 - Progress to the next area?");
    System.out.println("4 - Exit to the main menu?");

    areaChoices[1] = input.nextInt();

    if(areaChoices[1] == 1){
        try{
            FileWriter saveFile2 = new FileWriter("C:\\Users\\Yemi\\Desktop\\TheGame\\SaveFiles\\TextSave1.txt");
            areaMarkers[1] = 1;
            saveFile2.write(areaMarkers[1]);
            System.out.println("Game has been saved successfully.");
            saveFile2.close();
            cityArea();
        } catch(IOException ex){
            ex.printStackTrace();
        }
        } else if(areaChoices[1] == 2){
            System.out.println("This is a city. There are alot of people.");
            cityArea();
        } else if(areaChoices[1] == 3){
            System.out.println("Progressing to next area...");
            magmaArea();
        } else if(areaChoices[1] == 4){
            System.out.println("Returning to main menu.");
            GameMethods.menuCall();
        }
}

public static void magmaArea(){
    GameMethods.space();
    System.out.println("Area 3: Magma Pool. What would you like to do here?: ");
    System.out.println("1 - Save the game?");
    System.out.println("2 - View a description of the area?");
    System.out.println("3 - Progress to the next area?");
    System.out.println("4 - Exit to the main menu?");

    areaChoices[2] = input.nextInt();

    if(areaChoices[2] == 1){
        try{
            FileWriter saveFile3 = new    FileWriter("C:\\Users\\Yemi\\Desktop\\TheGame\\SaveFiles\\TextSave1.txt");
            areaMarkers[2] = 1;
            saveFile3.write(areaMarkers[2]);
            System.out.println("Game has been saved successfully.");
            saveFile3.close();
            magmaArea();
        } catch(IOException ex){
            ex.printStackTrace();
        }
    } else if(areaChoices[2] == 2){
        System.out.println("A blazing pool of molten rock. Very hot.");
        magmaArea();
    } else if(areaChoices[2] == 3){
        System.out.println("Progressing to next area.");
        hospitalArea();
    } else if(areaChoices[2] == 4){
        System.out.println("Returning to main menu.");
        GameMethods.menuCall();
    }
}

public static void hospitalArea(){
    GameMethods.space();
    System.out.println("Area 4: Hospital. What would you like to do here?: ");
    System.out.println("1 - Save the game?");
    System.out.println("2 - View a description of the area?");
    System.out.println("3 - Exit to the main menu.");

    areaChoices[3] = input.nextInt();

    if(areaChoices[3] == 1){
        try
            {
            FileWriter saveFile4 = new FileWriter("C:\\Users\\Yemi\\Desktop\\TheGame\\SaveFiles\\TextSave1.txt");
            areaMarkers[3] = 1;
            saveFile4.write(areaMarkers[3]);
            System.out.println("Game has been successfully saved.");
            saveFile4.close();
            hospitalArea();
        } catch(IOException ex){
            ex.printStackTrace();
        }
    } else if(areaChoices[3] == 2){
        System.out.println("A disused, abandoned hospital. It has an eerie feel     about it.");
        hospitalArea();
    } else if(areaChoices[3] == 3){
        System.out.println("Returning to the main menu...");
        GameMethods.menuCall();
    }
}
} 
```

抛出的异常是这样的：

```
Exception in thread "main" java.lang.NumberFormatException: For input string: ""
    at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
    at java.lang.Integer.parseInt(Integer.java:504)
    at java.lang.Integer.parseInt(Integer.java:527)
    at GameMethods.sChoice(GameMethods.java:59)
    at Choices.main(Choices.java:32) 
```

我意识到这是很多要求，特别是对于第一次发布海报，但我在这里严重缺乏想法。随意复制并运行代码。任何答案都将非常感激。再次谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T22:32:28.170

同意[jahroy](https://stackoverflow.com/users/778118/jahroy) ; 堆栈跟踪告诉您出了什么问题。查看代码，您尝试从保存文件中读取四行中的四个整数，但 *Area() 方法中的保存逻辑只写入一个整数。也许您打算写出一个整数和三个零？

可能最好使用单个整数来指示保存文件中的位置（0=森林、1=城市、2=岩浆等），而不是在单独的行上使用四个 0/1 整数。

# linux - 通过多个脚本将数据添加到 Bash 数组

> ID：15843718
> 
> 赞同：0
> 
> 时间：2013-04-05T21:15:52.957
> 
> 标签：linux, arrays, bash, scripting

我需要在两个 bash 脚本之间传递数组数据。

我有一个控制器配置，两个脚本都来自（etc/config）。在这个文件中，我声明了三个数组：

```
declare -a exeSuccess
declare -a exeFailure
declare -a exeUnknown 
```

我的主脚本并行调用各种下标，这些下标收集数据并输出到数组。

下标：

```
exeSuccess+=($OUTPUT) #This works while the script is running 
```

主脚本：

```
for z in $(ls -l scripts)
do
  sh $z &
  wait
done

echo "Validating Script Output"
echo ${exeSuccess[@]} 
```

当脚本运行时，数组会根据需要填充，但是当它们退出时，数组会被清空（我假设被破坏）。

有谁知道我如何在主脚本的执行过程中保持这个数组的初始化？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:29:57.697

在您的脚本中，您通过执行 sh $z 创建一个子 shell，将 sh 替换为 source，如下所示：

```
source scriptname.sh 
```

这样，您的脚本将不会创建子shell，并且即使在脚本终止后，您在脚本中定义的变量也将存在。

例子：

```
#!/bin/bash
#script.sh

source script2.sh;
echo ${exeSuccess[0]};
echo ${exeSuccess[1]};

#!/bin/bash
#scipt2.sh
declare -a exeSuccess;
exeSuccess[0]="hello";
exeSuccess[1]="hello1"; 
```

输出：

```
$ source script1.sh
hello
hello1
$ echo ${exeSuccess[0]}
hello
$ echo ${exeSuccess[1]}
hello1
$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T21:40:01.670

数组不在不同的 shell 之间共享。每个脚本都将作为一个单独的进程运行，并构建自己的私有数组，但是当进程退出时这些会丢失。@Upasana Shukla 运行脚本的建议`source`将起作用（因为它在主 shell 进程中运行它们，而不是作为子 shell/不同进程），但不允许您并行运行脚本。如果要并行运行它们，最简单的方法可能是将它们输出到临时文件而不是数组：

```
export tmpdir="$(mktemp -d "/tmp/$(basename "$0").XXXXXX")" || {
    echo "Error creating temporary directory" >&2
    exit 1
}

for z in scripts/*; do # Please don't parse ls
   sh "$z" &
done
wait

echo "Validating Script Output"
cat "$tmpdir/exeSuccess"
rm -R "$tmpdir" 
```

在各个脚本中：

```
echo "$OUTPUT" >>"$tmpdir/exeSuccess" 
```

# perl - Perl Net::SNMP 为某些 OID 返回错误值

> ID：15843724
> 
> 赞同：0
> 
> 时间：2013-04-05T21:16:27.503
> 
> 标签：perl, snmp

我正在尝试通过 SNMP 从 QLogic 交换机获取数据。当我从命令行 snmpwalk connUnitPortStatCountError OID (.1.3.6.1.3.94.4.5.1.3) 时，我得到交换机上每个端口的十六进制字符串结果：

```
# snmpwalk -v1 -On -c <community> <host> .1.3.6.1.3.94.4.5.1.3
.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.1 = Hex-STRING: 00 00 00 00 00 00 00 04 
.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.2 = Hex-STRING: 00 00 00 00 00 00 00 04 
.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.3 = Hex-STRING: 00 00 00 00 00 00 00 04 
.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.4 = Hex-STRING: 00 00 00 00 00 00 00 01 
.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.5 = Hex-STRING: 00 00 00 00 00 00 00 04 
.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.6 = Hex-STRING: 00 00 00 00 00 00 00 2C 
.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.7 = Hex-STRING: 00 00 00 00 00 00 00 0E 
.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.8 = Hex-STRING: 00 00 00 00 00 00 00 09 
.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.9 = Hex-STRING: 00 00 00 00 00 00 00 38 
.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.10 = Hex-STRING: 00 00 00 00 00 00 00 1C 
.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.11 = Hex-STRING: 00 00 00 00 00 00 00 12 
.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.12 = Hex-STRING: 00 00 00 00 00 00 00 04 
.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.13 = Hex-STRING: 00 00 00 00 00 00 00 0A 
.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.14 = Hex-STRING: 00 00 00 00 00 00 00 21 
.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.15 = Hex-STRING: 00 00 00 00 00 00 00 04 
.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.16 = Hex-STRING: 00 00 00 00 00 00 00 04 
.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.17 = Hex-STRING: 00 00 00 00 00 00 00 04 
.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.18 = Hex-STRING: 00 00 00 00 00 00 00 04 
.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.19 = Hex-STRING: 00 00 00 00 00 00 00 08 
.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.20 = Hex-STRING: 00 00 00 00 00 00 00 0A 
.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.21 = Hex-STRING: 00 00 00 00 00 00 00 00 
.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.22 = Hex-STRING: 00 00 00 00 00 00 00 00 
.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.23 = Hex-STRING: 00 00 00 00 00 00 00 00 
.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.24 = Hex-STRING: 00 00 00 00 00 00 00 00 
```

但是当我在具有相同 OID 的 Perl 脚本中调用 Net::SNMP 的 get_table() 子例程时，某些端口的值与我从 snmpwalk 得到的结果不匹配：

```
# ./foo <host>
$VAR1 = {
          '.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.1' => '0x0000000000000004',
          '.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.2' => '0x0000000000000004',
          '.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.3' => '0x0000000000000004',
          '.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.4' => '0x0000000000000001',
          '.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.5' => '0x0000000000000004',
          '.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.6' => ',',
          '.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.7' => '0x000000000000000e',
          '.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.8' => '  ',
          '.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.9' => '8',
          '.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.10' => '0x000000000000001c',
          '.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.11' => '0x0000000000000012',
          '.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.12' => '0x0000000000000004',
          '.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.13' => '',
          '.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.14' => '!',
          '.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.15' => '0x0000000000000004',
          '.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.16' => '0x0000000000000004',
          '.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.17' => '0x0000000000000004',
          '.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.18' => '0x0000000000000004',
          '.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.19' => ',
          '.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.20' => '',
          '.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.21' => '',
          '.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.22' => '',
          '.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.23' => '',
          '.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.24' => ''
        }; 
```

请注意，直到第六个端口，结果都匹配，其中 snmpwalk 返回“00 00 00 00 00 00 00 2C”，而我的脚本返回“，”。我在 connUnitPortStatTable 中看到与其他 OID 类似的行为：结果大多与 snmpwalk 一致，但少数不同意。这是 Perl 脚本本身：

```
#!/usr/bin/env perl

use strict;
use warnings;

use Data::Dumper;
use Net::SNMP;

# Custom sort order for OIDs. Only sorts on last number in OID because the rest don't matter in this example
$Data::Dumper::Sortkeys = sub { [ sort { (split '\.', $a)[-1] <=> (split '\.', $b)[-1] } keys %{$_[0]} ] };

my $switch = shift;
my $port = 161;
my $community = <community>; # Edited, obviously

my ($session, $error) = Net::SNMP->session(
                          -hostname      => $switch,
                          -port          => $port,
                          -timeout       => 7,
                          -retries       => 2,
                          -community     => $community,
                        );

if (!defined $session) {
  printf "ERROR: connection failed\n", $error;
  exit 1;
}

my $oid = '.1.3.6.1.3.94.4.5.1.3'; # connUnitPortStatCountError
my $result = $session->get_table(-baseoid => $oid);

if (!defined($result)) {
  printf "ERROR: %s.\n", $session->error();
  $session->close();
  exit 1;
}

$session->close();
print Dumper($result);

exit 0; 
```

**编辑：**为了永久，这是我根据 PerC 的回答更新的程序：

```
#!/usr/bin/env perl

use strict;
use warnings;

use Net::SNMP;

my $switch = shift;
my $port = 161;
my $community = <community>; # Edited, obviously

my ($session, $error) = Net::SNMP->session(
                          -hostname      => $switch,
                          -port          => $port,
                          -timeout       => 7,
                          -retries       => 2,
                          -community     => $community,
                          -translate     => [-octetstring => 0],
                        );

if (!defined $session) {
  printf "ERROR: connection failed\n", $error;
  exit 1;
}

my $oid = '.1.3.6.1.3.94.4.5.1.3'; # connUnitPortStatCountError
my $result = $session->get_table(-baseoid => $oid);

if (!defined($result)) {
  printf "ERROR: %s.\n", $session->error();
  $session->close();
  exit 1;
}

$session->close();

foreach my $key (sort { (split '\.', $a)[-1] <=> (split '\.', $b)[-1] } keys %$result) {
  printf "%s => %s\n", $key, unpack "H*", $result->{$key};
}

exit 0; 
```

和输出：

```
# ./foo <host>
.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.1 => 0000000000000004

.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.2 => 0000000000000004

.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.3 => 0000000000000004

.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.4 => 0000000000000001

.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.5 => 0000000000000004

.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.6 => 000000000000002c

.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.7 => 000000000000000e

.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.8 => 0000000000000009

.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.9 => 0000000000000038

.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.10 => 000000000000001c

.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.11 => 0000000000000012

.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.12 => 0000000000000004

.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.13 => 000000000000000a

.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.14 => 0000000000000021

.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.15 => 0000000000000004

.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.16 => 0000000000000004

.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.17 => 0000000000000004

.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.18 => 0000000000000004

.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.19 => 0000000000000008

.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.20 => 000000000000000a

.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.21 => 0000000000000000

.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.22 => 0000000000000000

.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.23 => 0000000000000000

.1.3.6.1.3.94.4.5.1.3.16.0.0.192.221.18.202.254.0.0.0.0.0.0.0.0.24 => 0000000000000000 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T12:43:15.497

这是因为 Net::SNMP 试图将任何 OCTET_STRING 转换为人类可读的字符串。

请参阅：[https](https://metacpan.org/module/Net::SNMP#Non-blocking-SNMPv2c-get-bulk-request-for-ifTable) ://metacpan.org/module/Net::SNMP#Non-blocking-SNMPv2c-get-bulk-request -for-ifTable 了解说明以及如何解决此问题。

# java - 根据设置android中的用户选择设置ImageView

> ID：15843729
> 
> 赞同：0
> 
> 时间：2013-04-05T21:16:52.283
> 
> 标签：java, android, android-imageview

我正在尝试制作一个应用程序，该应用程序将根据用户在我的应用程序设置中选择 ListPreference 来更改图像。有两张图片，一个森林和一个海洋。When Ocean is selected the value sent to the string is 1, and 2 for the forest, but when I run this code it throws an error saying "Source not found." 有什么建议吗？

```
 public void showUserSettings() {
     String name;
     String pic;
     SharedPreferences sharedPrefs = PreferenceManager.getDefaultSharedPreferences(this);
     name = sharedPrefs.getString("your_name", "NULL");
     pic = sharedPrefs.getString("pic_what", "for");
     int whatPic = Integer.parseInt(pic);
     TextView tvName = (TextView) findViewById(R.id.tvName);
     tvName.setText(name);
     if(whatPic==1) {
              ImageView img = (ImageView) findViewById(R.id.iView);
             img.setImageResource(R.drawable.ocean);
     }else if(whatPic==2); {
         ImageView img = (ImageView) findViewById(R.id.iView);
         img.setImageResource(R.drawable.forest);    
     }

 } 
```

}

# actionscript-3 - Actionscript：1087：语法错误：程序结束后发现额外字符

> ID：15843733
> 
> 赞同：0
> 
> 时间：2013-04-05T21:17:00.250
> 
> 标签：actionscript-3, variables, actionscript, import, filenames

我尝试导入一个 .as 引用我的变量名称/值

```
import "net.chars."+adc; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T21:25:44.473

您不能通过字符串动态导入路径，因为 AS3 导入是在编译时发生的。它们只是告诉编译器您正在使用哪些类/包的指令，仅此而已。

如果您确实需要此功能，则可以使用`getDefinitionByName`该功能，如[本答案](https://stackoverflow.com/a/685059/465378)中所述。但是，您应该注意，您仍然必须在代码中的某处引用该类，否则它不会被编译到 SWF 中。Flash 无法在运行时从外部加载类，因此您必须确保编译器知道要包含它。

有关详细信息，请参阅[本文](http://blogs.adobe.com/cantrell/archives/2010/09/loading-classes-dynamically-in-actionscript-3.html)。

# ios - iOS改变方向的高度

> ID：15843734
> 
> 赞同：1
> 
> 时间：2013-04-05T21:17:10.633
> 
> 标签：ios, objective-c, screen, orientation, c-preprocessor

我的 loadView 方法中有这个条件浮点数，它适用于两个设备。然而，我在试图找到一种方法来改变这些方向时遇到了最糟糕的情况。

我的 Prefix.pch 中有这个：

```
#define dDeviceOrientation [[UIDevice currentDevice] orientation]
#define isPortrait  UIDeviceOrientationIsPortrait(dDeviceOrientation)
#define isLandscape UIDeviceOrientationIsLandscape(dDeviceOrientation)
#define isFaceUp    dDeviceOrientation == UIDeviceOrientationFaceUp   ? YES : NO
#define isFaceDown  dDeviceOrientation == UIDeviceOrientationFaceDown ? YES : NO 
```

我的 loadView 方法中有这个（肖像，因为我想知道它首先有效......：

```
CGRect screenBounds = [[UIScreen mainScreen] bounds];
CGFloat screenHeight = CGRectGetHeight(screenBounds);     
     float Y;
if ((UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)){        
    NSLog(@"%f", screenHeight);
    if (isPortrait){
 Y = (screenHeight-(0.14*screenHeight));
    }else{ 
    }
} else {
    if (isPortrait){
        Y = (screenHeight-(0.25*screenHeight));
    }else{            
    }
}
settingsButton.frame = CGRectMake(20, Y, 40, 40.0);
aboutButton.frame = CGRectMake(75, Y, 40, 40.0); 
```

那里有很多解决方案，但我不是那么敏锐。

=====

Matt Neuburg 指导我考虑 NSLayoutConstraint ......这就是我召集的：

```
[self.view addSubview:ab];
[self.view addSubview:sb];
//constraints
NSLayoutConstraint *constraint =[NSLayoutConstraint
                                  constraintWithItem:ab
                                //ab's relation to the left edge
                                  attribute:NSLayoutAttributeLeading                                      
                                  relatedBy:NSLayoutRelationEqual
                                  toItem:self.view
                                  attribute:NSLayoutAttributeLeading                                      
                                  multiplier:1.0f
                                  constant:7.f];
[self.view addConstraint:constraint];

constraint = [NSLayoutConstraint
              constraintWithItem:ab
              //ab's relation to the bottom edge
              attribute:NSLayoutAttributeBottom
              relatedBy:NSLayoutRelationEqual
              toItem:self.view
              attribute:NSLayoutAttributeBottom
              multiplier:1.0f
              constant:-10.f];

[self.view addConstraint:constraint];

constraint = [NSLayoutConstraint constraintWithItem:sb
            //sb's identical relation to the bottom edge ( violation of DRY but I'm in a hurry :'( //
              attribute:NSLayoutAttributeBottom
              relatedBy:NSLayoutRelationEqual
              toItem:self.view attribute:NSLayoutAttributeBottom
              multiplier:1.0f constant:-10.f];
[self.view addConstraint:constraint];

constraint = [NSLayoutConstraint
              //SB's relation to the leading edge
              constraintWithItem:sb
              attribute:NSLayoutAttributeLeading
              relatedBy:NSLayoutRelationEqual
              toItem:self.view
              attribute:NSLayoutAttributeLeading
              multiplier:1.0f
              constant:75.0f];
[self.view addConstraint:constraint]; 
```

这是结果：

![在此处输入图像描述](https://i.stack.imgur.com/dcl9A.png)

![在此处输入图像描述](https://i.stack.imgur.com/8harV.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T00:30:03.417

正如其他人所暗示的那样，问题在于这`viewDidLoad`还为时过早。我在书中给出了一堆解决方案：

[http://www.aeth.com/iOSBook/ch19.html#SECrotationevents](http://www.apeth.com/iOSBook/ch19.html#SECrotationevents)

`viewDidLayoutSubviews`是一个很棒的地方。iOS 6 中最棒的就是给所有的东西提供良好的约束，然后你就不需要任何关于轮换的代码了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T21:29:03.757

老实说，我真的不知道你的目标是什么，但我很确定如果你把这段代码移到

```
- (void)viewDidLayoutSubviews 
```

方法，您的问题将得到解决！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T00:23:45.657

您是否尝试过使用这种方法？

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    // Your code here
} 
```

# html - 删除可点击图像周围的空间

> ID：15843744
> 
> 赞同：1
> 
> 时间：2013-04-05T21:17:54.153
> 
> 标签：html, css

我正在尝试使用在中心放置一个可点击的图像`padding`。

问题是现在图像周围有很多不需要的可点击空间。尽管图像位于屏幕中间，但我什至可以从屏幕边缘单击图像。

如果我删除`padding`它，但图像不是我想要的。

有没有办法解决这个问题？

我的 HTML：

```
<body>
    <div class="page">
      <div class="body">
        <div id="clicktoenter">
          <h1><a href="home.html" class="home" title="Home Link"></a></h1>
        </div>
      </div>
    </div>
</body> 
```

我的 CSS：

```
.body{
    width:940px;
    margin:0 auto;
    padding:0 10px;
    overflow:hidden;
}

.home{
    margin-bottom: 10px;
    width: 460px;
    height:460px;
    display:block;
    background:url(../images/image.png) center center no-repeat;
    padding:200px 200px;
}

.home:hover{
    background:url(../images/imageclick.png) center center no-repeat;
    padding:200px 200px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:20:31.520

将您的边距更改为此，它将居中，不使用填充。

```
.home{
margin:200px auto 200px auto;
width: 460px;
height:460px;
display:block;
background:url(../images/image.png) center center no-repeat;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T21:24:49.677

你有固定的块元素宽度，所以你可以使用自动左/右边距来居中这个块：

```
.home{
    margin:200px auto;
    width: 460px;
    height:460px;
    display:block;
    background:url(../images/image.png) center center no-repeat;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-05T21:25:23.837

如果您真的希望可点击的图像位于屏幕中间，那么请忘记填充并将图像所在的 h1 居中。

```
#clicktoenter h1 {text-align:center} 
```

# google-chrome - Chrome中的CSS3椭圆渐变

> ID：15843760
> 
> 赞同：1
> 
> 时间：2013-04-05T21:18:49.173
> 
> 标签：google-chrome, css

我正在尝试在 chrome 中获得椭圆渐变。我试过了

```
 background-image:
    -webkit-gradient(ellipse, center top, 0, center top, 50, from(rgba(0,0,0,0)), to(rgba(0,0,0,.5))),
    -webkit-gradient(linear, 50% 100%, 50% 0%, from(#0A6B9A), to(#29ABE2)); 
```

没运气。我尝试了一些我在网上和一些书中找到的其他东西，但一切都失败了，或者变成了圆圈。

通过firefox很容易做到（对那些感兴趣的人来说很酷）：

```
 background-image:
    -moz-radial-gradient(40% 0%, circle, rgba(0,0,0,0), rgba(0,0,0,.5)),
    -moz-linear-gradient(50% 100%, #0A6B9A, #29ABE2); 
```

这在铬中可能吗？根据我见过的渐变的计划规格，这应该是可能的。也许 Chrome 还不支持它。

**编辑哦，我已经检查过了，风格没有被覆盖或任何这样的爵士乐

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:23:49.080

`-moz`是一个仅为 Firefox 保留的 CSS 属性——这就是为什么它在 Chrome（以及任何其他浏览器）中不起作用的原因。

更具体地说，每个开头的 CSS 属性`-`都不是标准的，只适用于特定的浏览器。它仅用于兼容性。如果浏览器不理解属性的含义，它只是跳过它，这就是为什么在 CSS 文件中有多个属性，这是相同的原因`-moz`并且`-webkit`不会在任何地方都有效（不仅对你）。

对于 CSS3 兼容的浏览器，它应该是 W3c 约定的基调，例如

```
background: radial-gradient(ellipse at center, rgba(30,87,153,1) 0%,rgba(41,137,216,1) 50%,rgba(32,124,202,1) 51%,rgba(125,185,232,1) 100%); 
```

（颜色不同，请注意`background: radial-gradient(ellipse ...`）

您可以为此使用[http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)或任何其他 CSS 渐变生成器，只需将方向设置为径向。

# angularjs - AngularJS：动态添加的字段未在 FormController 上注册

> ID：15843765
> 
> 赞同：29
> 
> 时间：2013-04-05T21:19:19.043
> 
> 标签：angularjs, angularjs-directive

我在 AngularJS 中有以下**静态表单：**

```
<form name="myForm" class="form-horizontal">

  <label>First Name:</label>
  <input type="text" name="first_name" ng-model="entity.first_name">

  <label>Last Name:</label>
  <input type="text" name="last_name" ng-model="entity.last_name">

</form> 
```

Angular 为我创建了一个 FormController 并将其发布到范围内（在表单名称下）。这意味着我可以访问以下属性：

```
$scope.myForm.first_name.$error
$scope.myForm.last_name.$invalid
... 
```

这个超级好用！

但就我而言，我正在使用指令**动态**构建表单：

```
<form name="myForm" class="form-horizontal">

  <field which="first_name"></field>
  <field which="last_name"></field>

</form> 
```

`<field>`指令直到一段时间后才会解析为实际元素（`<input>`在我从服务器获取一些数据、链接指令等之后）。

这里的问题是表单控制器上没有定义任何字段属性，就好像动态字段没有向 FormController 注册一样：

```
// The following properties are UNDEFINED (but $scope.myForm exists)
$scope.myForm.first_name
$scope.myForm.last_name 
```

知道为什么吗？任何解决方案/解决方法？

您可以在这个 jsFiddle 中看到整个代码：http:
[//jsfiddle.net/vincedo/3wcYV/](http://jsfiddle.net/vincedo/3wcYV/)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-06T04:16:08.830

**更新 7/31/2015**自 1.3 以来已修复此问题，请参见此处：[https ://github.com/angular/angular.js/issues/1404#issuecomment-125805732](https://github.com/angular/angular.js/issues/1404#issuecomment-125805732)

**原始答案** 不幸的是，目前这是 AngularJS 的短板。Angular 的表单验证不适用于动态命名的字段。您可以在 HTML 底部添加以下内容，以准确查看发生了什么：

```
<pre>{{myForm|json}}</pre> 
```

如您所见，Angular 没有正确获取动态输入名称。目前有一个涉及嵌套表单的解决方法可能会有点讨厌，但它确实有效并且（需要一些额外的工作）将毫无问题地提交父表单。

如果您愿意，可以为该问题争取更多支持：[GitHub 问题 - 动态元素验证](https://github.com/angular/angular.js/issues/1404)。无论哪种方式，这是代码：

[http://jsfiddle.net/langdonx/6H8Xx/2/](http://jsfiddle.net/langdonx/6H8Xx/2/)

HTML：

```
<div data-ng-app>
    <div data-ng-controller="MyController">
        <form id="my_form" name="my_form" action="/echo/jsonp/" method="get">
            <div data-ng-repeat="field in form.data.fields">
                <ng-form name="form">
                    <label for="{{ field.name }}">{{ field.label }}:</label>
                    <input type="text" id="{{ field.name }}" name="{{field.name}}" data-ng-model="field.data" required>
                    <div class="validation_error" data-ng-show="form['\{\{field.name\}\}'].$error.required">Can't be empty.</div>

                </ng-form>
            </div>
            <input type="submit" />
        </form>
    </div>
</div> 
```

JavaScript：

```
MyController.$inject = ["$scope"];

function MyController($scope) {
    $scope.form = {};
    $scope.form.data = {};
    $scope.form.data.fields = []

    var f1 = {
        "name": "input_1",
        "label": "My Label 1",
        "data": ""
    };
    var f2 = {
        "name": "input_2",
        "label": "My Label 2",
        "data": ""
    };

    $scope.form.data.fields.push(f1);
    $scope.form.data.fields.push(f2);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-14T15:53:06.037

我自己也遇到了类似的问题，我解决这个问题的方法是在模板上调用 $compile 之前放置字段的名称。一个简单的 string.replace 就可以了。再说一遍，这只是可能的，因为我通过 http 获取字段模板并可以访问模板文本。

更新：这里有一个小技巧，可以使您的示例正常工作

```
app.directive('field', function($compile) {
    var linker= function(scope, element){

    var template = '<input type="text" name="{{fname}}" ng-model="model">'
    .replace('{{fname}}', scope.fname);
        element.html(template)
        $compile(element.contents())(scope)
    }
  return {
    restrict: 'E',
    scope: {
      fname: '=',
      model: '='
    },

    replace: true,
      link: linker
  };
}); 
```

[http://jsfiddle.net/2Ljgfsg9/4/](http://jsfiddle.net/2Ljgfsg9/4/)

# ios - UIImageView 不会动画，只有静态图像

> ID：15843766
> 
> 赞同：0
> 
> 时间：2013-04-05T21:19:19.880
> 
> 标签：ios, objective-c, animation, uiimageview

我的故事板上有一个 UIImageView，它链接到代码中的一个插座。当我运行代码时，它只显示故事板显示的静态图片，而不是我以编程方式创建的动画。有任何想法吗？

```
for(int i=0; i<4; i++) {
    UIImage *image = [UIImage imageNamed:[NSString stringWithFormat:@"loading%d",i]];
    [self.images addObject:image];
}
self.loadingView.animationImages = self.images;
self.loadingView.animationDuration = 2;
self.loadingView.animationRepeatCount = 1;
[self.loadingView startAnimating]; 
```

注意：loadingView 是 UIImageView，images 是 NSMutableArray。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T22:03:12.093

如果你想制作运行时数组，你可以这样使用。

```
 NSMutableArray *images = [[NSMutableArray alloc] init];

    for (int i = 1 ; i < 4; i++) {

        [images addObject:[UIImage imageNamed:[NSString stringWithFormat: @"loading%d.jpg", i]]];

    }

    self.loadingView.animationImages = images;
    self.loadingView.animationDuration = 2;
    self.loadingView.animationRepeatCount = 1;
    [self.loadingView startAnimating]; 
```

希望这会帮助你。它对我来说很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T21:50:04.313

我建议你像这样直接使用数组。

```
NSArray *images = [[NSArray alloc] initWithObjects:
                 [UIImage imageNamed:@"1.jpg"],
                 [UIImage imageNamed:@"2.jpg"],
                 nil];

self.loadingView.animationImages = images;
self.loadingView.animationDuration = 2;
self.loadingView.animationRepeatCount = 1;
[self.loadingView startAnimating]; 
```

# javascript - 本地主机上的 JavaScript 跨域图像共享！该怎么办？

> ID：15843767
> 
> 赞同：0
> 
> 时间：2013-04-05T21:19:39.113
> 
> 标签：javascript, cross-domain, localhost, sharing

好的，我已经被困了很长时间了。我已经阅读了有关此的所有其他问题和评论，但我没有进一步的...

我正在 Aptana Stundio 3 中开发一个 JavaScript 项目。当我在主文件夹中打开 index.html 文件时，我得到以下信息：

**跨域资源共享策略拒绝跨域图像加载。** （使用最新版本的 Chrome）

但只有当我打开文件夹中的 html 文件时。当我在 Apanta 上运行它时，它工作得很好。

我的项目永远不会在任何服务器上运行......这只是一个我想与其他人分享的游戏，但在他们的**localhost**上。

我读过关于 CORS 之类的东西，但我就是不明白。我知道我必须更改我的文件的标题，以便我可以访问我的资源，但我不知道**如何？！**

我该怎么办？不是一般情况，但在我的情况下。

希望我能尽快得到这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T12:31:49.957

在大多数浏览器中，安全设置会阻止从文件系统运行的页面使用 JavaScript 访问文件系统上的其他文件。这是对基于将 HTML 文档作为附件通过电子邮件发送给受害者的攻击的一种很好的防御措施。

如果要访问其他文件，请通过 HTTP 访问所有文件。

# scala - 在scala中组合地图列表

> ID：15843768
> 
> 赞同：1
> 
> 时间：2013-04-05T21:19:42.457
> 
> 标签：scala

我有以下数据结构：

```
List(Map(
    1365094146000000 -> Map(latitude -> 45.30397), 
    1365094752000000 -> Map(latitude -> 45.30405), 
    1365094449000000 -> Map(latitude -> 45.30412), 
    1365095351000000 -> Map(latitude -> 45.30400), 
    1365095054000000 -> Map(latitude -> 45.30400)), 
    Map(
    1365094146000000 -> Map(longitude -> -75.89806), 
    1365094752000000 -> Map(longitude -> -75.89806), 
    1365094449000000 -> Map(longitude -> -75.89811), 
    1365095351000000 -> Map(longitude -> -75.89804), 
    1365095054000000 -> Map(longitude -> -75.89809))) 
```

合并这些映射的最佳方法是什么，以便生成的对象如下：

```
Map(1365094146000000 -> Map(latitude -> 45.30397, longitude -> -75.89806),
    1365094752000000 -> Map(latitude -> 45.30405, longitude -> -75.89806)) 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T21:35:15.737

至于输入结构，`latitude`应该`longtitude`是字符串。此外，时间戳应该是 Longs，因为它们超出了`Int`' 范围。例如，

```
val lst = List(Map(
    1365094146000000l -> Map("latitude" -> 45.30397), 
    1365094752000000l -> Map("latitude" -> 45.30405), 
    1365094449000000l -> Map("latitude" -> 45.30412), 
    1365095351000000l -> Map("latitude" -> 45.30400), 
    1365095054000000l -> Map("latitude" -> 45.30400)), 
    Map(
    1365094146000000l -> Map("longitude" -> -75.89806), 
    1365094752000000l -> Map("longitude" -> -75.89806), 
    1365094449000000l -> Map("longitude" -> -75.89811), 
    1365095351000000l -> Map("longitude" -> -75.89804), 
    1365095054000000l -> Map("longitude" -> -75.89809))) 
```

修复后，您可以执行以下操作：

```
yourList.flatten.groupBy(_._1) map { case (key, value) => key -> value.map(_._2).flatten.toMap } toMap 
```

首先，这将两个地图合并在一起。然后，它按时间戳对条目进行分组以形成`Map[Long,List[(Long, Map[String,Double])]]`. 在那之后，我们几乎解决了，只需要去掉值 ( `value.map(_._2)`) 中的时间戳重复，展平纬度和经度，并将它们转换为`Map`. 最后，我们将输出从 a 转换`List`为 a `Map`。

带有类型的扩展版本如下所示：

```
yourList.flatten.groupBy { x: (Long, Map[String, Double]) => 
    x._1 } map { case (key: Long, value: List[(Long, Map[String, Double])]) => 
        key -> value.map { x: (Long, Map[String, Double]) => 
            x._2 
        }.flatten.toMap 
    } toMap 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T22:03:37.800

另一种可能：

```
val latitude = "latitude"
val longitude = "longitude"

val data : List[Map[Long, Map[String, Double]]] = List(Map(
    1365094146000000L -> Map(latitude -> 45.30397),
    1365094752000000L -> Map(latitude -> 45.30405),
    1365094449000000L -> Map(latitude -> 45.30412),
    1365095351000000L -> Map(latitude -> 45.30400),
    1365095054000000L -> Map(latitude -> 45.30400)),
    Map(
    1365094146000000L -> Map(longitude -> -75.89806),
    1365094752000000L -> Map(longitude -> -75.89806),
    1365094449000000L -> Map(longitude -> -75.89811),
    1365095351000000L -> Map(longitude -> -75.89804),
    1365095054000000L -> Map(longitude -> -75.89809)))

 data match {
   case List(latmap, longmap) =>
     for ((key, vlat) <- latmap; vlong <- longmap.get(key)) yield (key, vlong ++ vlat)
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T22:12:36.317

Scalaz 提供了一种很好的方式来做你想做的事：

```
import scalaz._, Scalaz._

val lst = List(Map(
    1365094146000000l -> Map("latitude" -> 45.30397), 
    1365094752000000l -> Map("latitude" -> 45.30405), 
    1365094449000000l -> Map("latitude" -> 45.30412), 
    1365095351000000l -> Map("latitude" -> 45.30400), 
    1365095054000000l -> Map("latitude" -> 45.30400)), 
    Map(
    1365094146000000l -> Map("longitude" -> -75.89806), 
    1365094752000000l -> Map("longitude" -> -75.89806), 
    1365094449000000l -> Map("longitude" -> -75.89811), 
    1365095351000000l -> Map("longitude" -> -75.89804), 
    1365095054000000l -> Map("longitude" -> -75.89809)))

scala> lst(0) |+| lst(1) foreach println
(1365094146000000,Map(longitude -> -75.89806, latitude -> 45.30397))
(1365094752000000,Map(longitude -> -75.89806, latitude -> 45.30405))
(1365094449000000,Map(longitude -> -75.89811, latitude -> 45.30412))
(1365095351000000,Map(longitude -> -75.89804, latitude -> 45.304))
(1365095054000000,Map(longitude -> -75.89809, latitude -> 45.304)) 
```

搜索“semigroup”以获取有关代码如何工作的更多信息。

# viewport - 避免视口元属性中的屏幕旋转（网络移动）

> ID：15843771
> 
> 赞同：1
> 
> 时间：2013-04-05T21:19:59.457
> 
> 标签：viewport, meta, landscape-portrait

是否可以使用 viewport 元属性避免 Web 移动设备上的屏幕旋转？我们的网站只能以纵向模式查看。

```
<meta name="viewport" content="width=device-width" /> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T21:15:40.507

不，这完全取决于您的用户代理和运行它的平台。但是你可以确保它们不会弄乱你的页面，如果它被正确地写在头部分。

```
<meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width" /> 
```

# mongodb - mongodb替换子文档的特定值的所有实例

> ID：15843781
> 
> 赞同：3
> 
> 时间：2013-04-05T21:20:39.137
> 
> 标签：mongodb

我的收藏（称为“工人”）：

```
"_id" : "500"
"type" : "Manager",
"employees" : [{
"name" : "bob"
"id" : 101
},{
"name" : "phil"
"id" : 102
}] 
```

目标：对于每个类型的 _id：Manager 并且包含“id”为 102 的子文档：将 102 替换为 202。

期望的最终结果：

```
"_id" : "500"
"type" : "Manager",
"employees" : [{
"name" : "bob"
"id" : 101
},{
"name" : "phil"
"id" : 202
}] 
```

我试过了：

```
db.workers.update({type:'Manager','employees.id':'102'},{$set:{'employees.id':'202'}},{multi:true}) 
```

然后我做了以下两件事来验证：

```
db.workers.find({type: "Manager", 'employees.id': 102}).count() 
```

我得到 9 的结果。

我也试过这个来验证：

```
db.workers.find({$and: [{type: "Manager"},{"employees.id":60}]}).count() 
```

这返回 0。

在这一点上我很困惑。我的更新错了吗？我的发现错了吗？两者都有吗？'9' 结果是错误的吗？“0”错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T01:22:15.117

您需要使用[`$`位置更新](http://docs.mongodb.org/manual/reference/operator/positional/#op._S_)运算符来更新与您的查询匹配的特定元素。您的更新还使用 的值，当这些字段是数字时`'102'`，`'202'`这会使更新尝试匹配字符串。

您的更新应如下所示：

```
db.workers.update(
    {type: 'Manager', 'employees.id': 102}, 
    {$set: {'employees.$.id': 202}}, 
    {multi: true}) 
```

# wordpress - Bitnami/Wordpress 多站点子目录：重定向循环

> ID：15843782
> 
> 赞同：3
> 
> 时间：2013-04-05T21:20:40.207
> 
> 标签：wordpress, bitnami

我正在使用 AWS/Bitnami/Wordpress 堆栈来安装具有子目录结构的 WP 多站点（3.5.1-1）。

我可以创建子站点，但是尝试查看子站点仪表板会导致“重定向循环”。此外，当我查看子站点时，主题/插件似乎已损坏。

我之前安装了多站点没有问题，所以我假设这与 Bitnami 本身有关。我已经搜索了数据库以确认所有站点 URL 都与我读到的相同，这是一个常见的解决方案，但是我仍然面临同样的问题。

这是我的 .htaccess 中的内容：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
# uploaded ﬁles
RewriteRule ^([_0-9a-zA-Z-]+/)?ﬁles/(.+) wp-includes/ms-ﬁles.php?ﬁle=$2 [L]
# add a trailing slash to /wp-admin
RewriteRule ^([_0-9a-zA-Z-]+/)?wp-admin$ $1wp-admin/ [R=301,L]
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]
RewriteRule ^([_0-9a-zA-Z-]+/)?(wp-(content|admin|includes).*) $2 [L]
RewriteRule ^([_0-9a-zA-Z-]+/)?(.*\.php)$ $2 [L]
RewriteRule . index.php [L]
</IfModule>
# END WordPress 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-21T17:53:39.927

尝试这个：

删除你的`.htaccess`文件。

然后编辑`/opt/bitnami/apps/wordpress/conf/wordpress.conf`并替换所有内容：

```
<IfVersion < 2.3 >
  NameVirtualHost *:80
</IfVersion>

<VirtualHost *:80>
 ServerAdmin mail@example.com
 DocumentRoot "/opt/bitnami/apps/wordpress/htdocs"

 <Directory "/opt/bitnami/apps/wordpress/htdocs">
   Options +MultiViews +FollowSymLinks
   AllowOverride None
   <IfVersion < 2.3 >
   Order allow,deny
   Allow from all
   </IfVersion>
   <IfVersion >= 2.3>
   Require all granted
   </IfVersion>

  # BEGIN WordPress
  RewriteEngine On
  RewriteBase /
  RewriteRule ^index\.php$ - [L]

  # uploaded files
  RewriteRule ^([_0-9a-zA-Z-]+/)?files/(.+) wp-includes/ms-files.php?file=$2 [L]

  # add a trailing slash to /wp-admin
  RewriteRule ^([_0-9a-zA-Z-]+/)?wp-admin$ $1wp-admin/ [R=301,L]

  RewriteCond %{REQUEST_FILENAME} -f [OR]
  RewriteCond %{REQUEST_FILENAME} -d
  RewriteRule ^ - [L]
  RewriteRule  ^[_0-9a-zA-Z-]+/(wp-(content|admin|includes).*) $1 [L]
  RewriteRule  ^[_0-9a-zA-Z-]+/(.*\.php)$ $1 [L]
  RewriteRule . index.php [L]
  # END WordPress

 </Directory>
</VirtualHost> 
```

然后使用以下命令重新启动 apache：

```
sudo /opt/bitnami/ctlscript.sh restart 
```

# google-maps-api-3 - 如何在谷歌地图周围设置边框

> ID：15843783
> 
> 赞同：0
> 
> 时间：2013-04-05T21:20:41.193
> 
> 标签：google-maps-api-3

如何在谷歌地图周围设置边框？我用过：

```
mapcanvas.style.style='border:10px solid #0b0'; 
```

这个对吗？我是谷歌地图的新手。

我想我已经找到了它不显示的原因，但是任何人都可以看看并让我知道正确的格式。

```
<section id="wrapper">
Click the allow button on the top of the page to let the browser find your location.
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
<article>
</article>
<script>
function initialize() {
  var mapOptions = {
    zoom: 12,
    center: new google.maps.LatLng(-28.643387, 153.612224),
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    mapTypeControl: true,
    mapTypeControlOptions: {
        style: google.maps.MapTypeControlStyle.HORIZONTAL_BAR,
        position: google.maps.ControlPosition.BOTTOM_CENTER
    },
    panControl: true,
    panControlOptions: {
        position: google.maps.ControlPosition.TOP_RIGHT
    },
    zoomControl: true,
    zoomControlOptions: {
        style: google.maps.ZoomControlStyle.LARGE,
        position: google.maps.ControlPosition.LEFT_CENTER
    },
    scaleControl: true,
    scaleControlOptions: {
        position: google.maps.ControlPosition.TOP_LEFT
    },
    streetViewControl: true,
    streetViewControlOptions: {
        position: google.maps.ControlPosition.LEFT_TOP
    }
  }
  var map = new google.maps.Map(document.getElementById("map-canvas"),
      mapOptions);
}
function success(position) {
  var mapcanvas = document.createElement('div');
  mapcanvas.id = 'mapcontainer';
  mapcanvas.style.height = '250px';
  mapcanvas.style.width = 'auto';
  mapcanvas.style.style='border:10px solid #0b0';
  document.querySelector('article').appendChild(mapcanvas);
  var coords = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
  var options = {
    zoom: 15,
    center: coords,
    mapTypeControl: true,
    navigationControlOptions: {
        style: google.maps.NavigationControlStyle.SMALL
    },
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };
  var map = new google.maps.Map(document.getElementById("mapcontainer"), options);
  var marker = new google.maps.Marker({
      position: coords,
      map: map,
      title:"You are here!"
  });
}
if (navigator.geolocation) {
  navigator.geolocation.getCurrentPosition(success);
} else {
  error('Geo Location is not supported');
}
</script>
</section> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T21:52:59.690

这与谷歌地图无关；这是一个红鲱鱼。

您的问题只是如何在 DIV 或其他 DOM 元素上放置边框。如果您在完全不涉及 Google 地图的情况下尝试您的代码，它仍然不会在您的 DIV 上设置边框。

代替：

```
mapcanvas.style.style = 'border:10px solid #0b0'; 
```

你可以使用：

```
mapcanvas.style.border = '10px solid #0b0'; 
```

或者，使用 jQuery，您可以简化这部分代码：

```
var mapcanvas = document.createElement('div');
mapcanvas.id = 'mapcontainer';
mapcanvas.style.height = '250px';
mapcanvas.style.width = 'auto';
mapcanvas.style.style='border:10px solid #0b0';
document.querySelector('article').appendChild(mapcanvas); 
```

至：

```
$('<div id="mapcontainer">').css({
    height: 250,
    width: 'auto',
    border: '10px solid #0b0'
}).appendTo('article'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-16T15:46:32.640

super late to the party, but there is no doubt in my mind that the actual correct way to do this is by simply stylizing the wrapper with some basic css.

```
#wrapper{
  border:10px solid #0b0;
  min-height:250px;
  height:100%;
  width: 100%;
} 
```

Put `#wrapper` inside a specific height & width element to make the map fit specific dimensions.

# c++ - FireBreath 将值从一个函数传递到另一个函数并在 JavaScript 中使用该函数

> ID：15843785
> 
> 赞同：0
> 
> 时间：2013-04-05T21:20:53.447
> 
> 标签：c++, visual-c++, plugins, firebreath

我怎样才能通过`ptx`和`pty`从`TestPluginAPI::ClickSemulationMove` 到`TestPluginAPI::ClickSemulationClick(int ptx, int pty)`。
问题是我必须在 JavaScript 中使用这两个函数，因此不能简单地将它从一个到另一个公开。

```
FB::variant TestPluginAPI::ClickSemulationClick(int ptx, int pty)
{

ShowCursor(true);
MouseLeft();
MouseReturn(ptx, pty);
ShowCursor(true);
return 0;
}

FB::variant TestPluginAPI::ClickSemulationMove(int ptx, int pty)
{
POINT pt;
MouseMove(-325, 605);
GetCursorPos(&pt);
ptx = pt.x;
pty = pt.y;
return 0;
} 
```

据我所知，我需要使用 JSObjectPtr 或 FB::VariantList，但是没有任何示例我有点困惑。谁能给我看简单的代码示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T06:30:47.293

你读过[JSAPI 文档](http://www.firebreath.org/display/documentation/Supported+JSAPI+types)吗？所有的信息都在那里。

要返回一个包含两个值的数组（将是一个 javascript 数组），您可以这样做：

```
return FB::variant_list_of(pt.x)(pt.y); 
```

然后在javascript中，您可以调用其他方法，例如：

```
var res = plugin().ClickSemulationMove(); // Assuming you don't actually need args here
plugin().ClickSemulationClick(res[0], res[1]); 
```

您也可以直接传入数组，在这种情况下，您可以在 C++ 中执行以下操作：

```
FB::variant TestPluginAPI::ClickSemulationClick(const std::vector<int>& arr)
{
    ShowCursor(true);
    MouseLeft();
    MouseReturn(arr[0], arr[1]);
    ShowCursor(true);
    return 0;
} 
```

说真的， FireBreath 代码库中的[FBTestPlugin 示例](https://github.com/firebreath/FireBreath/tree/master/examples/FBTestPlugin)中有所有这些事情的示例；你应该花一些时间在那里。我看到您提出的大多数问题都可以通过阅读该代码为您自己快速发现，然后您会更好地理解它。

# wordpress - Wordpress 二十一标志

> ID：15843787
> 
> 赞同：1
> 
> 时间：2013-04-05T21:21:01.573
> 
> 标签：wordpress, graphical-logo

我敢肯定这已经被问过很多次了，但是如何在 21 岁儿童主题的网站标题左侧添加徽标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:24:14.243

您必须导航到 WordPress 安装中位于以下位置的 WordPress 二十一主题文件夹：

`/wp-content/themes/twentyeleven`

接下来打开名为的文件`header.php`并找到显示的部分`<h1 id="site-title">`。最后，在此之前添加您的徽标图像以及您可能想要的任何其他内容。

请记住，您可能需要使用一些 CSS，`display: inline;`例如让它与文本位于同一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-17T07:46:21.190

将您的徽标图像放在主题文件夹图像文件夹中。然后在 header.php 中设置徽标图像，如下所示。

```
 <img src="<?php bloginfo("template_url"); ?>/images/logo.png" alt="logo_image"  /> 
```

并调整一些CSS。完毕！:)

# c# - 在 ListView 中显示和编辑各种项目类型

> ID：15843790
> 
> 赞同：1
> 
> 时间：2013-04-05T21:21:13.663
> 
> 标签：c#, wpf, listview, mvvm

我在 ListView 中显示两种类型的项目：

```
abstract class Item
{
    string ID { get; }
}

class ItemTypeA : Item
{
    string Value { get; set; }
}

class ItemTypeB : Item
{
    string ValueOne { get; set; }
    string ValueTwo { get; set; }
} 
```

（当然，它们没有更多内容，它们使用各种接口，但为了举例，我把它省略了，只展示了这些类型的“最终”结构）

所以基本上在 ListView 中，总是有一个 ID 列，其他列取决于项目类型。

我正在考虑在of中使用某种*动态列*，底层视图模型将在其中确定应该显示哪些列（或给定项目类型的*属性）。*`GridView``ListView.View`

 *编辑也是如此——在*编辑区域中，* **ItemTypeA**应该只有一个`TextBox`，**ItemTypeB**应该只有两个。

 ***所以基本上，我的问题是，如何解决这个问题，同时尽量避免为每个项目类型制作完整的单独视图（带有 ListView 和编辑区域）。

另外，我想避免直接在 ListView 中编辑项目，因为项目值有时会包含大量文本（甚至是多行文本），这对于用户来说很难编辑。

（我正在使用 Caliburn.Micro，但这应该与问题不太相关）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T02:05:48.847

您可以为 ListViewItem 提供自己的 DataTemplateSelector：

```
public class MyTemplateSelector : DataTempolateSelector
{
     public override DataTemplate SelectTemplate(object item, DependencyObject container)
     {
        // here select temaplate, from dictionary for example, using item.GetType()
     }
} 
```

您的项目视图模型类：

```
abstract class Item
{
    string ID { get; }

    MyTemplateSelector TemplateSelector { get; }
} 
```

您的 ListViewItem 样式：****

# calendar - 在对象中找不到函数 createEvent

> ID：15843791
> 
> 赞同：0
> 
> 时间：2013-04-05T21:21:18.473
> 
> 标签：calendar

我不知道为什么会出现此错误...此脚本中的所有其他代码都已注释掉...任何帮助将不胜感激！

错误消息：TypeError：在 object 中找不到函数 createEvent。（第 16 行，文件“代码”）

```
function createEvent(test) 
{
var cal = CalendarApp.getCalendarsByName(test);
var title = 'Script Demo Event';
var start = new Date("April 5, 2013 08:00:00 PDT");
var end = new Date("April 5, 2013 10:00:00 PDT");
var desc = "Created using Google Apps Script";
var loc = "Script Center";
var event = cal.createEvent(title, start, end, {description:desc, location:loc});
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:59:18.060

（朋友想通了）这两个一起玩不好......

createEvent 和 getCalendarsByName

createEvent 必须使用 getCalendarsByID

# elasticsearch - 使用 custom_score 按嵌套子项的时间戳排序

> ID：15843796
> 
> 赞同：1
> 
> 时间：2013-04-05T21:21:28.747
> 
> 标签：elasticsearch

我对弹性搜索很陌生，并且一直在努力让这种排序工作。总体思路是使用嵌套消息和嵌套参与者搜索电子邮件消息线程。目标是在线程级别显示搜索结果，按执行搜索的参与者以及 last_received_at 或 last_sent_at 列排序，具体取决于他们所在的邮箱。

我的理解是，您无法在许多嵌套子项中按单个子项的值进行排序。因此，为了做到这一点，我看到了一些关于使用带有脚本的 custom_score 的建议，然后对分数进行排序。我的计划是动态更改排序列，然后运行嵌套的 custom_score 查询，该查询将返回参与者之一的日期作为分数。我一直注意到分数格式很奇怪的一些问题（例如，最后总是有 4 个零）并且它可能不会返回我期望的日期。

以下是相关索引和查询的简化版本。如果有人有任何建议，我将不胜感激。（仅供参考 - 我使用的是弹性搜索 0.20.6 版。）

指数：

```
mappings: {
    message_thread: {
        properties: {
            id: {
                type: long
            }
            subject: {
                dynamic: true
                properties: {
                    id: {
                        type: long
                    }
                    name: {
                        type: string
                    }
                }
            }
            participants: {
                dynamic: true
                properties: {
                    id: {
                        type: long
                    }
                    name: {
                        type: string
                    }
                    last_sent_at: {
                        format: dateOptionalTime
                        type: date
                    }
                    last_received_at: {
                        format: dateOptionalTime
                        type: date
                    }
                }
            }
            messages: {
                dynamic: true
                properties: {
                    sender: {
                        dynamic: true
                        properties: {
                            id: {
                                type: long
                            }
                        }
                    }
                    id: {
                        type: long
                    }
                    body: {
                        type: string
                    }
                    created_at: {
                        format: dateOptionalTime
                        type: date
                    }
                    recipient: {
                        dynamic: true
                        properties: {
                            id: {
                                type: long
                            }
                        }
                    }
                }
            }
            version: {
                type: long
            }
        }
    }
} 
```

询问：

```
{
  "query": {
    "bool": {
      "must": [
        {
          "term": { "participants.id": 3785 }
        },
        {
          "custom_score": {
            "query": {
              "filtered": {
                "query": { "match_all": {} },
                "filter": {
                  "term": { "participants.id": 3785 }
                }
              }
            },
            "params": { "sort_column": "participants.last_received_at" },
            "script": "doc[sort_column].value"
          }
        }
      ]
    }
  },
  "filter": {
    "bool": {
      "must": [
        {
          "term": { "messages.recipient.id": 3785 }
        }
      ]
    }
  },
  "sort": [ "_score" ]
} 
```

**解决方案：**

感谢@imotov，这是最终结果。参与者没有正确嵌套在索引中（而消息不需要）。此外，include_in_root 用于参与者简化查询（参与者是小记录，不是真正的大小问题，尽管@imotov 也提供了一个没有它的示例）。然后，他重组了 JSON 请求以使用 dis_max 查询。

```
curl -XDELETE "localhost:9200/test-idx"
curl -XPUT "localhost:9200/test-idx" -d '{
  "mappings": {
    "message_thread": {
      "properties": {
        "id": {
          "type": "long"
        },
        "messages": {
          "properties": {
            "body": {
              "type": "string",
              "analyzer": "standard"
            },
            "created_at": {
              "type": "date",
              "format": "yyyy-MM-dd'\''T'\''HH:mm:ss'\''Z'\''"
            },
            "id": {
              "type": "long"
            },
            "recipient": {
              "dynamic": "true",
              "properties": {
                "id": {
                  "type": "long"
                }
              }
            },
            "sender": {
              "dynamic": "true",
              "properties": {
                "id": {
                  "type": "long"
                }
              }
            }
          }
        },
        "messages_count": {
          "type": "long"
        },
        "participants": {
          "type": "nested",
          "include_in_root": true,
          "properties": {
            "id": {
              "type": "long"
            },
            "last_received_at": {
              "type": "date",
              "format": "yyyy-MM-dd'\''T'\''HH:mm:ss'\''Z'\''"
            },
            "last_sent_at": {
              "type": "date",
              "format": "yyyy-MM-dd'\''T'\''HH:mm:ss'\''Z'\''"
            },
            "name": {
              "type": "string",
              "analyzer": "standard"
            }
          }
        },
        "subject": {
          "properties": {
            "id": {
              "type": "long"
            },
            "name": {
              "type": "string"
            }
          }
        }
      }
    }
  }
}'
curl -XPUT "localhost:9200/test-idx/message_thread/1" -d '{
  "id" : 1,
  "subject" : {"name": "Test Thread"},
  "participants" : [
    {"id" : 87793, "name" : "John Smith", "last_received_at" : null, "last_sent_at" : "2010-10-27T17:26:58Z"},
    {"id" : 3785, "name" : "David Jones", "last_received_at" : "2010-10-27T17:26:58Z", "last_sent_at" : null}
  ],
  "messages" : [{
    "id" : 1,
    "body" : "This is a test.",
    "sender" : { "id" : 87793 },
    "recipient" : { "id" : 3785},
    "created_at" : "2010-10-27T17:26:58Z"
  }]
}'
curl -XPUT "localhost:9200/test-idx/message_thread/2" -d '{
  "id" : 2,
  "subject" : {"name": "Elastic"},
  "participants" : [
    {"id" : 57834, "name" : "Paul Johnson", "last_received_at" : "2010-11-25T17:26:58Z", "last_sent_at" : "2010-10-25T17:26:58Z"},
    {"id" : 3785, "name" : "David Jones", "last_received_at" : "2010-10-25T17:26:58Z", "last_sent_at" : "2010-11-25T17:26:58Z"}
  ],
  "messages" : [{
    "id" : 2,
    "body" : "More testing of elasticsearch.",
    "sender" : { "id" : 57834 },
    "recipient" : { "id" : 3785},
    "created_at" : "2010-10-25T17:26:58Z"
  },{
    "id" : 3,
    "body" : "Reply message.",
    "sender" : { "id" : 3785 },
    "recipient" : { "id" : 57834},
    "created_at" : "2010-11-25T17:26:58Z"
  }]
}'
curl -XPOST localhost:9200/test-idx/_refresh
echo
# Using include in root
curl "localhost:9200/test-idx/message_thread/_search?pretty=true" -d '{
  "query": {
    "filtered": {
      "query": {
        "nested": {
          "path": "participants",
          "score_mode": "max",
          "query": {
            "custom_score": {
              "query": {
                "filtered": {
                  "query": {
                    "match_all": {}
                  },
                  "filter": {
                    "term": {
                      "participants.id": 3785
                    }
                  }
                }
              },
              "params": {
                "sort_column": "participants.last_received_at"
              },
              "script": "doc[sort_column].value"
            }
          }
        }
      },
      "filter": {
        "query": {
          "multi_match": {
            "query": "test",
            "fields": ["subject.name", "participants.name", "messages.body"],
            "operator": "and",
            "use_dis_max": true
          }
        }
      }
    }
  },
  "sort": ["_score"],
  "fields": []
}
'

# Not using include in root
curl "localhost:9200/test-idx/message_thread/_search?pretty=true" -d '{
  "query": {
    "filtered": {
      "query": {
        "nested": {
          "path": "participants",
          "score_mode": "max",
          "query": {
            "custom_score": {
              "query": {
                "filtered": {
                  "query": {
                    "match_all": {}
                  },
                  "filter": {
                    "term": {
                      "participants.id": 3785
                    }
                  }
                }
              },
              "params": {
                "sort_column": "participants.last_received_at"
              },
              "script": "doc[sort_column].value"
            }
          }
        }
      },
      "filter": {
        "query": {
          "bool": {
            "should": [{
              "match": {
                "subject.name":"test"
              }
            }, {
              "nested" : {
                "path": "participants",
                "query": {
                  "match": {
                    "name":"test"
                  }
                }
              }
            }, {
              "match": {
                "messages.body":"test"
              }
            }
            ]
          }
        }
      }
    }
  },
  "sort": ["_score"],
  "fields": []
}
' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T21:33:32.627

这里有几个问题。您在询问嵌套对象，但在您的映射中未将参与者定义为嵌套对象。第二个可能的问题是分数的类型为浮点数，因此它可能没有足够的精度来表示时间戳。如果您可以弄清楚如何将此值放入浮点数中，您可以看一下这个示例：[弹性搜索 - 标记强度（嵌套/子文档提升）](https://stackoverflow.com/questions/13095866/elastic-search-tagging-strength-nested-child-document-boosting)。但是，如果您正在开发一个新系统，升级到支持嵌套字段排序的 0.90.0.Beta1 可能是明智的。

# java - GUI构建麻烦

> ID：15843798
> 
> 赞同：0
> 
> 时间：2013-04-05T21:21:34.467
> 
> 标签：java, swing, miglayout

我有一个如下所示的 GUI 设置：

![例子](https://i.stack.imgur.com/XuSuV.png)

它显示一个文档，并允许用户通过添加/删除`JTextAreas`和文本来编辑它。

尝试打开文档时遇到问题。文档本身是由`JPanels`相互叠加的层组成的。`JPanels`GUI 中的单个点永远不会超过 6 层。

由于我不知道`JTextArea`将要的高度是多少，所以我必须使其相对于父级（换句话说，不指定它）。

因为布局管理器 ( `MigLayout`) 不知道组件的确切大小（它是相对于父级的），所以它首先向其父级询问父级的大小。该大小再次未知，并询问父母的父母等等（直到 1 级或 2 级 JPanel）。最后，它必须询问很多组件的大小（`checkParent(Container)`仅在上面的示例中，MigLayout 中的一个方法被调用了超过 100 000 次）。

我需要做的是仅在打开文档时设置`JTextArea`（或`JPanel`它所在的）的高度，因此布局管理器不必询问`JTextAreas`父级，从而导致递归地狱。

打开文档后，我必须将高度重置为默认值（以便在添加/删除文本时调整高度）。

我绝对不知道该怎么做，或者如果这是要走的路，我只能确定我上面描述的事情就是问题所在。

几个注意事项：

*   这不是`MigLayout`错误，我去过论坛（下面的链接）
*   [看看这个（最后一个帖子）](http://migcalendar.com/forums/viewtopic.php?f=8&t=12263&sid=9398dd7e8c8cf5e42b48572d56a87bae)
*   我不能将 a`JScrollPane`放入其中，`JTextArea`因为它的任务不仅是保存信息，而且要准确显示它需要多少空间
*   `JTextAreas`我可以在保存文档时轻松获得高度，因此在再次打开文档时可以使用它们

**编辑：这个问题中引用的文档不是 JTextAreas 中使用的“文档”和类似的东西，而是我程序中自定义类中的“文档”（我没有提到，因为它无关紧要，除非它被理解为“文件”）。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T09:26:22.457

因为您的`Document`模型是一个层次结构，所以您需要一棵树。因为您的界面对每个节点都需要一个控件和一个视图，所以您需要一个表。`Outline`，在[这里](https://codereview.stackexchange.com/a/4447/6692)看到，可能是一个合适的选择。您`DocumentTreeModel`将持有对文档的 root 的引用`Element`，就像示例`FileTreeModel`持有对 root 的引用一样`File`。您`RowModel`将包括 a `JLabel`、 a`JCheckBox`和 a `JTextArea`。

# php - 如何扩展数组中的变量以使周围的数组有效

> ID：15843801
> 
> 赞同：0
> 
> 时间：2013-04-05T21:21:51.500
> 
> 标签：php, arrays, wordpress, variables

我有一个问题，我什至不知道如何描述。我需要构建一个动态数组，并将其包含在另一个数组中。让我展开。这是我的代码：

```
$myarrayarray = '';
$categoriesTerms = $catlist = rtrim($categoriesTerms,',');
$categoriestocheck = explode(',',$categoriesTerms);

foreach($categoriestocheck as $key=>$value){
    $myarrayarray .= "array(";
    $myarrayarray .= "'taxonomy' => 'map_location_categories',";
    $myarrayarray .= "'terms' => array(".$value."),";
    $myarrayarray .= "'field' => 'slug',";
    $myarrayarray .= "'operator' => 'AND'";
    $myarrayarray .= "),";
}           
$myarrayarray .= "array(";
$myarrayarray .= "'taxonomy' => 'map_location_categories',";
$myarrayarray .= "'terms' => array('event'),";
$myarrayarray .= "'field' => 'slug',";
$myarrayarray .= "'operator' => 'OR'";
$myarrayarray .= "),";
echo $myarrayarray;

$locationArgs = array(
    'post_type' => 'maplist',
    'orderby' => $orderby,
    'order' => $orderdir,
    'numberposts' => -1,
    'tax_query' => array($myarrayarray),
);

$mapLocations = get_posts($locationArgs); 
```

这不会产生错误，只是无法以任何方式限制数据返回。如果我打印我的 $myarrayarray 变量，我会得到这个用于结合油漆和加压气缸的搜索：

```
array(
    'taxonomy' => 'map_location_categories',
    'terms' => array('paint'),
    'field' => 'slug',
    'operator' => 'AND'
),
array(
    'taxonomy' => 'map_location_categories',
    'terms' => array('pressurized-cylinders'),
    'field' => 'slug',
    'operator' => 'AND'
),
array(
    'taxonomy' => 'map_location_categories',
    'terms' => array('event'),
    'field' => 'slug',
    'operator' => 'OR'
), 
```

如果我把它代替代码中的变量，效果很好。因此，该变量没有格式错误，只是没有在另一个数组中解析。也许我是个白痴，这是不可能的？我究竟做错了什么？！？！？！这让我发疯，我什至不知道如何用短语搜索解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T21:33:33.560

您正在生成一个字符串，而不是一个数组。

```
$str = 'hello,there';
$arr = array($str); 
```

不生产

```
 $arr = array(
       'hello', // element #1
       'there'  // element #2
   ); 
```

它产生

```
$arr = array(
    'hello,there' // single element #1
); 
```

如果要生成嵌套数组，则跳过整个字符串业务

```
$data = array();
foreach($categoriestocheck as $key=>$value){
    $data[] = array(
       'taxonomy' => 'map_location_categories',
       'terms' => array($value.),
       etc..
    );
}
$locationArgs = array(
    ...
    data => $data
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T21:32:57.853

试试这个：

```
$myarrayarray = array();

$categoriesTerms = $catlist = rtrim($categoriesTerms,',');
$categoriestocheck = explode(',',$categoriesTerms);
foreach($categoriestocheck as $key=>$value) {
    $tmp = array();
    $tmp['taxonomy'] = 'map_location_categories';
    $tmp['terms'] = array($value);
    $tmp['field'] = 'slug';
    $tmp['operator'] = 'AND';
    $myarrayarray []= $tmp;
}

$tmp = array();
$tmp['taxonomy'] = 'map_location_categories';
$tmp['terms'] = array('event');
$tmp['field'] = 'slug';
$tmp['operator'] = 'OR';
$myarrayarray []= $tmp;

print_r($myarrayarray); 
```

要么，要么使用，`eval($myarrayarray)`但请记住，使用`eval`通常被认为是邪恶的。

# c++ - C++ 在 2D 坐标中放大到屏幕中心

> ID：15843802
> 
> 赞同：0
> 
> 时间：2013-04-05T21:21:51.827
> 
> 标签：c++, vector, 2d, zooming

我很难进行正确的计算，以便在 2D 坐标中放大屏幕中心，同时将所有内容保持在正确的比例。

我有一个向量，我用它来处理在我的地图编辑器中移动，如下所示：

```
scroll = sf::Vector2<float>(-640.0f, -360.0f); 
```

它设置为 -640.0f、-360.0f 以使 0,0 在初始化时成为屏幕的中心（基于我的窗口为 1280x720）。

我的缩放值范围从 0.1f 到 2.0f，并且以 0.05 的增量增加或减少：

```
zoomScale = zoomScale + 0.05; 
```

当在屏幕上绘制元素时，它们是使用以下代码绘制的：

```
sf::Rect<float> dRect;
dRect.left = (mapSeg[i]->position.x - scroll.x) * (layerScales[l] * zoomScale);
dRect.top = (mapSeg[i]->position.y - scroll.y) * (layerScales[l] * zoomScale);
dRect.width = (float)segDef[mapSeg[i]->segmentIndex]->width;
dRect.height = (float)segDef[mapSeg[i]->segmentIndex]->height;

sf::Sprite segSprite;
segSprite.setTexture(segDef[mapSeg[i]->segmentIndex]->tex);
segSprite.setPosition(dRect.left, dRect.top);
segSprite.setScale((layerScales[l] * zoomScale), (layerScales[l] * zoomScale));
segSprite.setOrigin(segDef[mapSeg[i]->segmentIndex]->width / 2, segDef[mapSeg[i]->segmentIndex]->height / 2);
segSprite.setRotation(mapSeg[i]->rotation);
Window.draw(segSprite); 
```

layerScales 是一个用于放大视差滚动的分段层的值。

这在放大和缩小时似乎工作正常，但中心点似乎发生了变化（我知道应该始终位于 0,0 的元素在我放大后将位于不同的坐标处）。我使用以下来计算鼠标的位置来测试如下：

```
mosPosX = ((float)input.mousePos.x + scroll.x) / zoomScale)
mosPosY = ((float)input.mousePos.y + scroll.y) / zoomScale) 
```

我确信我应该对“滚动”向量进行计算以考虑到这种缩放，但我似乎无法让它正常工作。

我尝试实现类似下面的东西，但它没有产生正确的结果：

```
scroll.x = (scroll.x - (SCREEN_WIDTH / 2)) * zoomScale - (scroll.x - (SCREEN_WIDTH / 2));
scroll.y = (scroll.y - (SCREEN_HEIGHT / 2)) * zoomScale - (scroll.y - (SCREEN_HEIGHT / 2)); 
```

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-15T09:50:30.817

我会用简单的方法（不是最有效但工作正常）并且仅适用于单轴（第二个相同）

最好有未缩放的偏移量：

```
scaledpos = (unscaledpos*zoomscale)+scrolloffset 
```

知道中心点在比例变化后不应该移动（0 表示之前 1 表示之后）：

```
scaledpos0 == scaledpos1 
```

这样做：

```
scaledpos0 = (midpointpos*zoomscale0)+scrolloffset0; // old scale
scaledpos1 = (midpointpos*zoomscale1)+scrolloffset0; // change zoom only
scrolloffset1+=scaledpos0-scaledpos1;                  // correct offset so midpoint stays where is ... i usualy use mouse coordinate instead of midpoint so i zoom where the mouse is 
```

当您无法更改缩放方程时，请对您的缩放方程执行相同的操作

```
scaledpos0 = (midpointpos+scrolloffset0)*zoomscale0;
scaledpos1 = (midpointpos+scrolloffset0)*zoomscale1;
scrolloffset1+=(scaledpos0-scaledpos1)/zoomscale1; 
```

希望我在那里没有犯愚蠢的错误（凭记忆写）。有关更多信息，请参阅

*   [根据当前鼠标位置缩放图形](https://stackoverflow.com/a/37269366/2521214)

# sql - 这个 SQL 语法是如何工作的？

> ID：15843803
> 
> 赞同：3
> 
> 时间：2013-04-05T21:21:59.360
> 
> 标签：sql, sql-server

我今天遇到了另一个开发人员使用 SQL Server 查询设计器工具生成的这个可怕的怪异 SQL 查询。 *我讨厌查询设计器，但我一直试图弄清楚它做了什么。* 我以前从未见过这样的语法，也不理解它。它是如何工作的？

特别是多个 ON 子句连接在一起，与 JOIN 子句分开，这让我失望。

```
SELECT *
FROM  dbo.tblDealStatus
    RIGHT OUTER JOIN dbo.tblUser
            RIGHT OUTER JOIN dbo.tblOwnerLocation
                     INNER JOIN dbo.tblOwner
                          INNER JOIN dbo.tblDeal
                           ON dbo.tblOwner.OwnerID = dbo.tblDeal.OwnerID
                      ON dbo.tblOwnerLocation.DealID = dbo.tblDeal.DealID
             ON dbo.tblUser.UserID = dbo.tblDeal.CHK_Contact
            LEFT OUTER JOIN dbo.tblCompany AS tblCompany_1
                    INNER JOIN dbo.tblParticipation
                     ON tblCompany_1.CompanyID = dbo.tblParticipation.CompanyID
             ON dbo.tblDeal.ParticipationID = dbo.tblParticipation.ParticipationID
     ON /*...
      ....so on and so forth...*/ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T21:34:27.457

首先，为了清楚起见，我规定永远不要在同一个查询中混合右连接和左连接。所有右连接都可以切换到左连接，仅此一项就可以更容易地弄清楚发生了什么。

下一个放弃选择 *. 在连接查询中永远不合适，因为您在两个或多个字段（连接字段）中返回相同的数据，这会浪费宝贵的网络和数据库处理时间。

我相信奇怪的 ON 迫使查询按特定顺序进行。它们很糟糕，我认为不应该使用它们，因为它们很难维护，开发人员也很难理解，因为它们并不常见并且完全不需要。只需反转正确的连接并将表按您需要连接它们的顺序放置即可解决此问题。如果不是，您可能需要一些派生表来获取正确的数据。请注意，在反转它时，您可能需要将这些内部连接更改为其他内容。现在它是如此混乱，它很可能不会返回正确的结果。因此，在重写它时，虽然您希望查看您的更改是否会更改结果，但您还希望使用判断来确定更改是针对错误查询的修复还是错误更改以将查询转换为可维护的内容。

如果写这个烂摊子的开发人员还在，我会强迫他用更标准的 SQL 重写，并告诉他禁止再次使用查询设计器。就我而言，这无法通过代码审查。

如果我正在重写它，我会查找应该在查询中首先出现的表并从那里开始工作。我个人现在的猜测是它将是 tblDeal 表，但我不知道您的数据模型，所以我可能是错的。

# javascript - 为什么“typeof”不需要括号？

> ID：15843805
> 
> 赞同：62
> 
> 时间：2013-04-05T21:21:59.847
> 
> 标签：javascript, typeof

`typeof (myVariable)`和相比有什么区别`typeof myVariable`吗？

两者都有效，但来自 PHP，我不明白为什么这个函数可以使用括号。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-04-05T21:27:01.123

`typeof`关键字代表编程中的*运算符*。`Javascript`

[规范](https://tc39.es/ecma262/#sec-typeof-operator)`typeof`中运算符的正确定义是：

```
typeof[(]expression[)] ; 
```

这就是使用`typeof`as`typeof(expression)`或的原因`typeof expression`。

之所以*要*这样实现它，可能是为了让开发人员处理其代码中的可见性级别。因此，可以使用 typeof 使用干净的条件语句：

```
if ( typeof myVar === 'undefined' )
  // ...
; 
```

[或者使用分组运算符](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Grouping)定义更复杂的表达式：

```
const isTrue = (typeof (myVar = anotherVar) !== 'undefined') && (myVar === true); 
```

**编辑 ：**

在某些情况下，在运算符中使用括号`typeof`可以使编写的代码不易产生歧义。

以下面的表达式为例，其中`typeof`使用了不带括号的运算符。将`typeof`返回空字符串文字和数字之间的连接结果的类型，还是字符串文字的类型？

```
typeof "" + 42 
```

查看上述运算符的定义以及运算符 and 的[优先](https://msdn.microsoft.com/en-us/library/z3ks45k7(v=vs.94).aspx)[级`typeof``+`](https://msdn.microsoft.com/en-us/library/z3ks45k7(v=vs.94).aspx)，似乎前面的表达式等价于：

```
typeof("") + 42 // Returns the string `string42` 
```

在这种情况下，使用括号 with`typeof`会使您想要表达的内容更加清晰：

```
typeof("" + 42) // Returns the string `string` 
```

# css - CSS ::selection，背景仍然是蓝色

> ID：15843809
> 
> 赞同：3
> 
> 时间：2013-04-05T21:22:11.463
> 
> 标签：css, selection

当你使用

```
::selection{
    background: green;
    color: white;
} 
```

当您选择所有内容时，网站的某些部分仍然是蓝色的，有没有办法解决这个问题并使它只有绿色背景而没有蓝色呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T21:28:45.937

这些部分发生在每个站点。这是正常的。看看我的：santz.net

我有同样的问题，但这是一个浏览器错误。不是编码问题。

代码没问题。但是，对于 Mozilla，您可能还需要它

```
::-moz-selection {
    background-color: green;
    color: #fff;
}

::selection {
    background-color: green;
    color: #fff;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T21:26:23.353

您提供的代码在这里没有问题。小提琴：http: [//jsfiddle.net/3fWYZ/1/](http://jsfiddle.net/3fWYZ/1/)

HTML：

```
<p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.</p>
<p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.</p>
<p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.</p> 
```

CSS：

```
::selection{
    background:green;
    color :white;
} 
```

# .net - Sonar 正在使用 OpenCover 运行 Gallio，但 Sonar 仍在报告代码覆盖率：0%

> ID：15843813
> 
> 赞同：0
> 
> 时间：2013-04-05T21:22:27.140
> 
> 标签：.net, code-coverage, sonarqube, gallio, opencover

我正在尝试通过声纳打开覆盖运行代码覆盖。我正在使用以下内容：

Sonar 3.5
C# Plugins 生态系统 2.0
OpenCover 4.5.1313
Gallio v3.4.14.0
sonar-runner 2.1

当我运行 sonar-runner 测试运行和 OpenCover 运行时，报告位于 .sonar 文件夹中，但声纳网站从未更新，我的覆盖率保持在 0%。

这个问题似乎与[此类似](http://sonar.15.n6.nabble.com/coverage-report-xml-is-generated-but-sonar-says-coverage-is-0-td5008850.html)

这是我的声纳项目属性

 `````
# Project identification
sonar.projectKey=Simple.Project
sonar.projectVersion=1
sonar.projectName=Simple
# Info required for Sonar 
sonar.sources=.
sonar.language=cs
#Core C# Settings 
#sonar.dotnet.visualstudio.solution.file=Source/TAMPWebsite/TAMPWebsite.sln
sonar.silverlight.4.mscorlib.location=C:/Program Files (x86)/Reference Assemblies/Microsoft/Framework/Silverlight/v4.0
sonar.dotnet.excludeGeneratedCode=true
sonar.dotnet.4.0.sdk.directory=C:/WIndows/Microsoft.NET/Framework/v4.0.30319
sonar.dotnet.version=4.0

#Gendarme
sonar.gendarme.mode= 

sonar.sourceEncoding=UTF-8

# Gallio / Unit Tests
sonar.gallio.mode=
sonar.gallio.coverage.tool=OpenCover
sonar.gallio.runner=IsolatedProcess
sonar.gallio.installDirectory=C:/Program Files (x86)/Gallio
sonar.dotnet.visualstudio.testProjectPattern=*Test*
sonar.opencover.installDirectory=C:/Program Files (x86)/OpenCover/

# FXCop 
sonar.fxcop.mode=skip  
#StyleCop 
sonar.stylecop.mode=skip
#NDeps
sonar.ndeps.mode=skip
#sonar.switchoffviolations.allfile=DatabaseMigrations
#exclusions
#sonar.exclusions=**generated*,**T4MVC**,**/DatabaseMigrations/** 
````  `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:05:43.047

你正面临这个错误：http: [//jira.codehaus.org/browse/SONARDOTNT-301](http://jira.codehaus.org/browse/SONARDOTNT-301)

它已修复，将在几天后发布的 2.1 版本中提供。``

# javascript - foreach 单选按钮显示更多信息

> ID：15843815
> 
> 赞同：0
> 
> 时间：2013-04-05T21:22:29.527
> 
> 标签：javascript, jquery

我正在尝试为每个单选按钮制作，当单击它以显示有关该单击标题的更多信息的 div 时，单击另一个单选按钮然后显示有关该单选按钮的信息并隐藏另一个单击在：

HTML：

```
<input type="radio" id="1" />
<div class="event1">
 content..
</div>

<input type="radio" id="2" />
<div class="event2">
 content..
</div>

<input type="radio" id="3" />
<div class="event3">
 content..
</div> 
```

jQuery：

```
var i = 1;
while(i < 10) {
$('.event' + i).hide();
    $("#" + i).click(function() {
        $('.event' + i).show();
    });
i++;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T21:26:29.703

您可以尝试使用“每个”更改循环

```
$(function(){
 $("input[type='radio']").each(function(){
  $(this).change(function(){
   if ($(this).is(':checked'))
    $(this).next().show();
   else
    $(this).next().hide();
  });
 });
}); 
```

如果您为无线电元素分配一个类以专门关注它们，那将是可取的。像“radioElements”这样的东西就足够了。或者您也可以将 id 与 starter 一起使用：“radio_1”、“radio_2”，然后使用输入 [id^='radio_']。

在所有情况下，您都可以使用“每个”功能。

更深入地讲，如果您希望切断所有其他无线电“信息”，请将其更改为：

```
$(function(){
 $("input[type='radio']").each(function(){
  $(this).change(function(){
   if ($(this).is(':checked')) {
    $("input[type='radio']").next().hide();
    $(this).next().show();
   }
  });
 });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T21:28:21.667

HTML

```
<input type="radio" name="radio" id="1" />
<div class="event">
 content.. 1
</div>

<input type="radio" name="radio" id="2" />
<div class="event">
 content.. 2
</div>

<input type="radio" name="radio" id="3" />
<div class="event">
 content.. 3
</div> 
```

JS

```
$('input[name=radio]').click(function() {
    $('.event').hide();
    $(this).next('.event').show();
}); 
```

CSS

```
.event {
    display: none;
} 
```

小提琴 [http://jsfiddle.net/UKn6D/](http://jsfiddle.net/UKn6D/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T21:27:15.797

而不是有一段时间看起来像那样为什么不简单地拥有

```
<div id="input-container">
<input class="clickable" />
<div class="content"></div>
</div> 
```

然后这将与多个一起使用，并且 jQuery 可以是这样的

```
$('#input-container input.clickable').click(function() {
$(this).parent().find('div.content').hide();
$(this).next('div.content').show();
}); 
```

我还没有实际测试过上述内容，但我相信它应该对你有用，拥有容器 ID 的原因只是为了加快你的 jQuery 速度，因为它首先通过#elementID 附加更快

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T21:27:31.300

```
$('input[type="radio"]').on('change', function() {
  var id = $(this).attr('id'); //Get the ID from the selected radio button
  $('div:visible').hide(); //Hide visible Divs
  $('div.event' + id).show(); //Show matched Div
}); 
```

您需要给 div 一个额外的类名并在此处更新 jQuery 代码。您还需要确保为输入元素分配一个名称属性，以便它们都属于同一组——假设它们是。

# c++ - 声明 std::string 变量后，Cout 没有输出

> ID：15843820
> 
> 赞同：1
> 
> 时间：2013-04-05T21:22:52.373
> 
> 标签：c++, output

我编写了一个简单的程序，返回作为参数传递的 IP 地址的主机名。该程序使用两个函数：getaddrinfo() 和 getnameinfo()。我正在使用 Linux Mint、Netbeans IDE 和 G++ 编译器。输出没问题，没有错误，但是当我声明一个

```
std::string str; 
```

然后 cout 没有输出，屏幕上没有打印任何内容。但是，当我注释掉 std::string 声明或删除它时，该语句

```
std::cout << "hostname: " << hostname << std::endl; 
```

成功打印返回的主机名。

这种奇怪错误的原因可能是什么？

```
#include <netdb.h>
#include <netinet/in.h>
#include <sys/socket.h>
#include <iostream>
#include <string>

int main()
{
    struct addrinfo* result;
    struct addrinfo* res;
    int error;
    const char* host;
    // When I comment out this line, cout prints the hostnames succesfully.
    std::string str;

    error = getaddrinfo("127.0.0.1", NULL, NULL, &result);
    res = result;

    while (res != NULL)
    {
        char* hostname;
        error = getnameinfo(res->ai_addr, res->ai_addrlen, hostname, 1025, NULL, 0, 0);
        std::cout << "hostname: " << hostname << std::endl;
        res = res->ai_next;
    }

    freeaddrinfo(result);
    // When I declare an std::string str variable, this cout doesn't either print anything
    std::cout << "TEST" << std::endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T21:26:42.607

```
 The arguments host and serv are pointers to caller-
   allocated buffers (of size hostlen and servlen respectively) into which
   getnameinfo() places null-terminated strings containing the host and
   service names respectively. 
```

[http://man7.org/linux/man-pages/man3/getnameinfo.3.html](http://man7.org/linux/man-pages/man3/getnameinfo.3.html)

您的指针必须实际分配。注释掉该行会改变任何东西的事实可能是巧合或优化的奇怪副作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T21:57:27.817

谢谢，它现在可以工作了:)。我想知道何时使用不同的方式来分配内存。据我所知，通过以下方式创建对象的主要区别：

```
// Creating objects:
Test t1;
Test* t2 = new Test(); 
```

1.  第一个对象将在堆中创建，并在函数运行完成时自动删除。
2.  第二个对象将在堆栈​​中创建，并且必须使用 delete/delete[] 运算符手动完成内存释放？

那么在处理指针时我还应该记住什么？我想我需要读一本关于计算机体系结构的好书，因为关于内存和微处理器的知识会带来好处:)

# php - PHP zip文件上传不起作用

> ID：15843822
> 
> 赞同：1
> 
> 时间：2013-04-05T21:22:54.920
> 
> 标签：php, html, upload, download, zip

我的html表单：

```
<form action='' method="post" enctype="multipart/form-data">
<input type="file" name="file" id="file">
<input type="submit" name="submit" value="Submit">
</form> 
```

我的 php 文件：

```
if ($_POST['submit'] == "Submit") {
            echo "Upload: " . $_FILES["file"]["name"] . "<br>";
            echo "Type: " . $_FILES["file"]["type"] . "<br>";
            echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
            echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br>";
            if (file_exists("/downloads/" . $_FILES["file"]["name"]))
            {
                echo $_FILES["file"]["name"] . " already exists. ";
            }
            else
            {
                move_uploaded_file($_FILES["file"]["tmp_name"],
                "/downloads/" . $_FILES["file"]["name"]);
                echo "Stored in: " . "/downloads/" . $_FILES["file"]["name"];
            }
} 
```

我的 public_html: 中有 2 个文件夹：`tmp`和`downloads`777 权限（只是为了测试）

此文件位于下载 (public_html/downloads/new/update.php) 内的 .htaccess 保护文件夹中，我希望将 zip 文件上传到下载目录中。

此代码不会给我任何错误，但不会上传文件。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T21:25:07.380

尝试添加

```
if(move_uploaded_file(...)){
 echo "it works";
} else {
 echo "NOPE";
} 
```

并替换：

```
 move_uploaded_file($_FILES["file"]["tmp_name"], "/downloads/" . $_FILES["file"]["name"]); 
```

和：

```
 move_uploaded_file($_SERVER['DOCUMENT_ROOT'].'/'.$_FILES["file"]["tmp_name"], $_SERVER['DOCUMENT_ROOT']."/downloads/" . $_FILES["file"]["name"]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T22:04:51.790

PHP 需要 MAX_FILE_SIZE 来接收上传的文件

```
<form action='' method="post" enctype="multipart/form-data">
<input type="hidden" name="MAX_FILE_SIZE" value="10240000">
<input type="file" name="file" id="file">
<input type="submit" name="submit" value="Submit">
</form> 
```

使用此表单，您可以上传 10 MB 或更少的 zip 存档...

您还必须将 php.ini 中的 max_post_size 和 upload_max_filesize 设置为相同或更高的值才能上传文件

使用这个 PHP 代码

```
if ((isset($_POST['submit']) && $_POST['submit'] == "Submit") AND isset($_FILES)) {
        echo "Upload: " . $_FILES["file"]["name"] . "<br>";
        echo "Type: " . $_FILES["file"]["type"] . "<br>";
        echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
        echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br>";
        if (file_exists("/downloads/" . $_FILES["file"]["name"]))
        {
            echo $_FILES["file"]["name"] . " already exists. ";
        }
        else
        {
            if(move_uploaded_file($_FILES["file"]["tmp_name"],
            "/downloads/" . $_FILES["file"]["name"]))
                   echo "Stored in: " . "/downloads/" . $_FILES["file"]["name"];

            else echo "file could not be processed";
        } 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T09:08:49.617

这就是我解决它的方法：

HTML：

```
<form enctype="multipart/form-data" method="post" action="">
<input type="hidden" name="MAX_FILE_SIZE" value="300000" />
<input type="file" name="file" id="file">
<input type="submit" name="submit" value="Submit">
</form> 
```

PHP：

```
if($_POST['submit'] == "Submit") {
    $filename = $_FILES["file"]["name"];
    $source = $_FILES["file"]["tmp_name"];
    $type = $_FILES["file"]["type"];
    $name = explode(".", $filename);
    $target_path = "../".$filename;
    if(move_uploaded_file($source, $target_path)) {
        $message = "Your .zip file was uploaded";
    } else {    
        $message = "ERROR";
    }
        if($message) echo $message;
} 
```

# c++ - 如何在 GLUT 中编写文本？

> ID：15843832
> 
> 赞同：0
> 
> 时间：2013-04-05T21:23:21.583
> 
> 标签：c++, opengl, glut, textwriter

如何用 GLUT 和 C++ 编写文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T15:33:54.547

绘制 3D 角色你可以按照这个教程[http://videotutorialsrock.com/opengl_tutorial/draw_text/home.php](http://videotutorialsrock.com/opengl_tutorial/draw_text/home.php)

对于 2D 字符您可以在这里绘制位图字符是示例[http://codeincodeblock.blogspot.com/2011/11/bitmap-is-rectangular-array-of-0s-and.html](http://codeincodeblock.blogspot.com/2011/11/bitmap-is-rectangular-array-of-0s-and.html)

# javascript - SCRIPT438：对象不支持属性或方法“forEach”

> ID：15843834
> 
> 赞同：4
> 
> 时间：2013-04-05T21:23:29.383
> 
> 标签：javascript, ajax, json, internet-explorer-8

IE8 支持属性或方法'forEach'

```
$('.tabs').tabs();
$('#search-consumables [data-ajax-call]').change(function() {

    var $this = $(this),
        settings = $this.data(),
        $target = $(settings.target);

    $.ajax({
       type: 'GET',
       url: 'index.php?route=module/quicklookup/' + settings.ajaxCall,
       data: $this.closest('form').serializeArray(),
       dataType: 'json',
       success: function(data) {
           var html = '';
           $target.find(':not(.blank)').remove();
           html = $target.html();
           data.forEach(function(entry) {
               html += '<option value="'+entry.id+'">'+entry.name+'</option>';
           });
           $target.html(html);
        }
    });
}); 
```

我试过了

```
$.each(data, function(entry) { 
```

然而数据然后返回未定义，我错过了什么才能在 IE8 中工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T21:27:42.963

传递给`jQuery.each`回调的第一个参数是数组中值的索引；第二个参数是实际值。

尝试使用：

```
$.each(data, function(i, entry) {
    // your code here
}); 
```

# c# - Linq 比较两个对象列表，其中一个对象有多个列表

> ID：15843835
> 
> 赞同：5
> 
> 时间：2013-04-05T21:23:33.007
> 
> 标签：c#, linq

```
public class MyObject1
{
    public  Guid g1;
    public Guid g2;
    public Guid g3;
}

public class MyObject2
{
    public Guid g4;
}

List<MyObject1> list1;
List<MyObject2> list2; 
```

我想要一个 LINQ 查询，它将返回 list1 中的所有 MyObject1 对象，其中 MyObject1.g2 == MyObject2.g4 其中 MyObject2 对象位于列表 2 中

我已经编写了在许多步骤中执行此操作的代码，但我认为我可以在一次迭代中完成。

所以像

```
var n = list1.Select(p=> p.g2).ToList()

var o = list2.Intersect(n) 
```

但现在我需要再次使用 o 研究 list1，这很尴尬

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-05T21:25:40.417

听起来您想要[加入](http://msdn.microsoft.com/en-gb/library/bb534675.aspx)：

```
var query = from x1 in list1
            join x2 in list2 on x1.g2 equals x2.g4
            select x1; 
```

或者在扩展方法语法中：

```
var query = list1.Join(list2, x1 => x1.g2, x2 => x2.g4, (x1, x2) => x1); 
```

请注意，这只会为您提供来自的项目`list1`- 如果您还需要相应的项目`list2`，这很简单：

```
var query = from x1 in list1
            join x2 in list2 on x1.g2 equals x2.g4
            select new { x1, x2 }; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-05T21:32:06.967

```
var query = list1.Where(l1 => list2.Any(l2=> l2.g4 == l1.g2)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T21:26:19.873

这个怎么样：

```
var results = 
    from a in list1
    join b in list2 on a.g2 equals b.g4
    select a; 
```

这将返回所有项目`list1`中存在的`list2`项目`MyObject1.g2 == MyObject2.g4`。

# php - 选择使用 PHP 中的 HTML 默认选项不起作用

> ID：15843837
> 
> 赞同：0
> 
> 时间：2013-04-05T21:23:37.130
> 
> 标签：php, html, html-select, selected

我正在对一个表单进行错误验证，该表单允许对数据库中的书籍条目进行数据编辑。除了下拉框外，一切正常。下拉框会自动填充数据库表中特定字段中的每个唯一条目，并且该部分可以完美运行。但是，当人们点击编辑一本书时，所有字段都填充了该书的信息，我希望下拉框默认为该书的正确值。我的解决方案是检查每个值，因为它会根据该字段的实际图书值填充下拉框，如果它们匹配，则将其设为“选定”值。

它不工作。该框仍然可以正常填充，但不是默认值。这是下拉框的代码。

```
<span style="margin-left:10px;">
 Publication Type: 
 <select name="publicationType" >
  <option value=""></option>
  <option value="">-------------------------</option>
  <?php 
   $lPub = '';
   if(array_key_exists('publicationType',$_REQUEST)) $lPub = $_REQUEST['publicationType'];
    $lPubArr = $datasetManager->getPublicationType();
    foreach($lPubArr as $pubStr){
    if($pubStr == $bookArr['publicationType']){
     echo '<option '.($lPub==$pubStr?'selected="selected"':'').'>'.$pubStr.'</option>'."\n";
    }
    else{
     echo '<option '.($lPub==$pubStr?'':'').'>'.$pubStr.'</option>'."\n";
    }
   } 
  ?>
 </select>
</span> 
```

如果需要，我可以提供所有变量。我看不出我做错了什么，但也许有人能够发现一个明显的错误。

谢谢你，凯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T21:32:32.807

不确定这会有所帮助，但试试这个：

```
<?php 
   $lPub = '';
   if( array_key_exists('publicationType',$_REQUEST) )
        $lPub = $_REQUEST['publicationType'];
   $lPubArr = $datasetManager->getPublicationType();
   foreach($lPubArr as $pubStr){
     echo '<option '.($lPub==$pubStr?'selected="selected"':'').'>'.$pubStr.'</option>'."\n";
   } 
```

* * *

我删除了这个条件：

```
f($pubStr == $bookArr['publicationType']) 
```

因为我没有得到`$bookArr['publicationType']`它的用途，也许你不小心把它放在那里了

# c# - 设置页面高度

> ID：15843838
> 
> 赞同：0
> 
> 时间：2013-04-05T21:23:39.427
> 
> 标签：c#, html, height, panel

我有一个在面板中有条件的搜索页面，当页面打开时显然没有结果，并且页面页脚直接出现在搜索面板下方。如何将结果面板设置为设定的高度，然后在找到搜索结果时拉伸为网格的高度。干杯

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Site.Master" AutoEventWireup="true"
    CodeBehind="FrmSearch.aspx.cs" Inherits="web.FrmSearch" %>

<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %>
<asp:Content ID="Content1" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
    <asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server">
    </asp:ToolkitScriptManager>
    <asp:UpdatePanel ID="pnlUpdate" runat="server" ChildrenAsTriggers="true">
        <ContentTemplate>
            <div id="divSearch">
                <asp:Panel ID="pnlSearch" runat="server" DefaultButton="BtnSearch">
                    <table width="100%">
                        <tr>
                            <td>
                                <asp:Label ID="LblName" runat="server" Text="Name:" CssClass="head2"></asp:Label>
                            </td>
                            <td>
                                <asp:TextBox ID="TxtSurname" runat="server" Width="200" CssClass="norm"></asp:TextBox>
                            </td>
                            <tr>
                                <td>
                                    <asp:Label ID="LblAddress" runat="server" Text="Address:" CssClass="head2"></asp:Label>
                                </td>
                                <td>
                                    <asp:TextBox ID="TxtAddress" runat="server" Width="200" CssClass="norm"></asp:TextBox>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2" align="center">
                                    <asp:Button ID="BtnSearch" runat="server" Text="Search" OnClick="BtnSearch_Click" />
                                </td>
                                <td colspan="2" align="center">
                                    <asp:Button ID="BtnReset" runat="server" Text="Reset" OnClick="BtnReset_Click" />
                                </td>
                            </tr>
                    </table>
                </asp:Panel>
            </div>
            <div>
                <asp:Label ID="lblCount" runat="server" CssClass="head2"></asp:Label>
            </div>
            <hr />
            <div id="divResults">
                <asp:Panel ID="pnlResults" runat="server">
                    <asp:GridView ID="gvResults" runat="server" AutoGenerateColumns="false" Width="99%"
                        CssClass="grd" OnRowDataBound="gvResults_RowDataBound">
                        <Columns>
                            <asp:TemplateField HeaderText="Name">
                                <ItemTemplate>
                                    <asp:HiddenField ID="hfGUID" runat="server" Value='<%# Bind("GUID")%>' />
                                    <asp:Label ID="LblName" runat="server" Text='<%# Bind("Name")  %>'></asp:Label>
                                </ItemTemplate>
                            </asp:TemplateField>
                            <asp:TemplateField HeaderText="Address">
                                <ItemTemplate>
                                    <asp:Label ID="LblAddress" runat="server" Text='<%# Bind("Address") %>'></asp:Label>
                                </ItemTemplate>
                            </asp:TemplateField>
                            <asp:TemplateField HeaderText="Post Code">
                                <ItemTemplate>
                                    <asp:Label ID="LblPostCode" runat="server" Text='<%# Bind("Post_Code") %>'></asp:Label>
                                </ItemTemplate>
                            </asp:TemplateField>
                            <asp:TemplateField HeaderText="Telephone">
                                <ItemStyle Width="150px" />
                                <ItemTemplate>
                                    <asp:Label ID="LblTelephone" runat="server" Width="150px" Text='<%# Bind("Telephone") %>'></asp:Label>
                                </ItemTemplate>
                            </asp:TemplateField>
                        </Columns>
                    </asp:GridView>
                </asp:Panel>
            </div>
        </ContentTemplate>
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="btnSearch" />
            <asp:AsyncPostBackTrigger ControlID="btnReset" />
        </Triggers>
    </asp:UpdatePanel>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T21:25:20.507

您可以使用`min-height:200px`容器`divSearch`。

```
#divSearch
{
  min-height:200px  //according to your requirement
} 
```

# scala - 从函数反转布尔返回类型

> ID：15843841
> 
> 赞同：2
> 
> 时间：2013-04-05T21:23:55.017
> 
> 标签：scala, functional-programming

我有两个接受函数类型的函数：`Int => Boolean`函数类型

```
def myFunction1(f1: Int => Boolean) ...
def myFunction2(f2: Int => Boolean) ... 
```

我想从函数 1 调用函数 2，但不只是用 f1 调用它，我想用 f1 的倒数调用它。所以如果 f1 是这样的

```
(x: Int) => x > 4 
```

在运行时，即为大于四的数字返回真。如果数字大于四，我希望​​反向返回 false。在调用 myFunction2 之前是否可以反转 f1？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T21:29:09.087

你可以这样做：

```
def myFunction1(f1: Int => Boolean) =  myFunction2(!f1(_)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T21:54:37.237

```
def myFunction1(f1: Int => Boolean) =  myFunction2(f1 andThen (! _)) 
```

# c++ - 文件 RecvFile 函数中的预期令牌错误

> ID：15843847
> 
> 赞同：0
> 
> 时间：2013-04-05T21:24:41.370
> 
> 标签：c++, sockets, token

我正在学习一些关于 C++ 套接字的例子。[这里](https://stackoverflow.com/questions/9875735/c-socket-programming-a-client-server-application-to-send-a-file)的代码之一有一个错误：在最后一行上方的行中出现“expect token while got fclose”

代码对我来说似乎很好，所以我无法弄清楚这里有什么问题。

任何想法表示赞赏。

```
void RecvFile(int sock, const char* filename) 
{ 
    int rval; 
    char buf[0x1000]; 
    FILE *file = fopen(filename, "wb"); 
    if (!file)
    {
        printf("Can't open file for writing");
        return;
    }

    do
    {
        rval = recv(sock, buf, sizeof(buf), 0);
        if (rval < 0)
        {
            // if the socket is non-blocking, then check
            // the socket error for WSAEWOULDBLOCK/EAGAIN
            // (depending on platform) and if true then
            // use select() to wait for a small period of
            // time to see if the socket becomes readable
            // again before failing the transfer...

            printf("Can't read from socket");
            fclose(file);
            return;
        }

        if (rval == 0)
            break;

        int off = 0;
        do
        {
            int written = fwrite(&buf[off], 1, rval - off, file);
            if (written < 1)
            {
                printf("Can't write to file");
                fclose(file);
                return;
            }

            off += written;
        }
        while (off < rval);
    } 

    fclose(file); 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T21:26:18.730

你有一个`do`没有对应的`while`：

```
do
{
    // ...
    do
    {
        // ...
    }
    while (off < rval);
} 
// No while here

fclose(file); 
```

看起来它应该只是`while (true)`，你不妨坚持在顶部，而不是做`do while`. 如果返回 0 或更少，则执行将中断循环`recv`，这分别表示有序关闭和错误。所以改成：

```
while (true)
{
    // ...
    do
    {
        // ...
    }
    while (off < rval);
}

fclose(file); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T21:26:29.450

您有一个`do`没有相应的声明`while`：

```
do // <== THERE IS NO CORRESPONDING while FOR THIS do
{
    rval = recv(sock, buf, sizeof(buf), 0);
    if (rval < 0)
    {
        // ...
    }

    // ...

    do
    {
        // ...
    }
    while (off < rval); // <== This is OK: the "do" has a matching "while"
}
// Nothing here! Should have a "while (condition)" 
```

如果您只想无限期地重复您的循环，那么您应该使用`while (true)`- 替换`do`关键字（最好），或者将其添加到缺少的`while`地方（如上述评论所示）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T21:26:34.900

你开始了 a`do`而没有实际提供 a`while();`

```
do
{
    rval = recv(sock, buf, sizeof(buf), 0);
    if (rval < 0)
    {
        // if the socket is non-blocking, then check
        // the socket error for WSAEWOULDBLOCK/EAGAIN
        // (depending on platform) and if true then
        // use select() to wait for a small period of
        // time to see if the socket becomes readable
        // again before failing the transfer...

        printf("Can't read from socket");
        fclose(file);
        return;
    }

    if (rval == 0)
        break;

    int off = 0;
    do
    {
        int written = fwrite(&buf[off], 1, rval - off, file);
        if (written < 1)
        {
            printf("Can't write to file");
            fclose(file);
            return;
        }

        off += written;
    }
    while (off < rval);
} //while() Needs to go here

fclose(file); 
```

# java - 在使用 bean 实例化类之后立即调用方法（带参数）的最佳方法是什么？

> ID：15843848
> 
> 赞同：1
> 
> 时间：2013-04-05T21:24:41.790
> 
> 标签：java, spring, javabeans

我已经阅读了 @PostConstruct 和 init-method 但它们不允许从 bean 传递参数。

类似[这个问题](https://stackoverflow.com/questions/5349362/spring-bean-initialization-with-multiple-arg-method)的东西。但是要传递的参数来自实例化 bean 的类。

为了简化：**Invoker**是实例化**Invoked**类并调用**Invoked.Method(args)**的类，其中 args 来自**Invoker.Args**。

问题是我可以在 Beans 中完成这一切吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T02:34:14.403

IMO 类似下面的代码应该可以工作，假设 args 作为 Invoker 类的一部分创建或自动装配到其中：

```
@Component
class Invoker {
   private String[] args = new String[]("1","2","3")

   @Autowired
   private Invoked invoked;

   @PostConstruct
   private void init() {
      invoked.method(args);
   } 

} 
```

# signalr - 在从 Web 访问的自托管 SignalR 服务器中实现授权

> ID：15843849
> 
> 赞同：6
> 
> 时间：2013-04-05T21:24:44.853
> 
> 标签：signalr, signalr-hub, signalr.client

我正在寻找有关如何在自托管（非 IIS）环境中运行的后端服务上实现 SignalR 授权安全的一些指导，该环境是从 Web 应用程序调用的。后端应用程序基本上是一个将 SignalR 事件触发回基于 HTML 的客户端的监视器。这一切都很好（实际上非​​常好）。

但是，我们需要限制来自 Web 站点的经过身份验证的用户对服务器的访问。所以基本上如果一个用户在网站上通过了身份验证，我们需要以某种方式在后端应用程序中获取凭据（用户名就足够了）和验证状态来决定是否允许连接以避免未经授权的访问。

任何人都可以指出一些关于如何完成这种身份验证转发的策略或模式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-18T09:49:02.657

我在这里遇到了类似的问题，因为在我的网络应用程序中，我使用了一个简单的 cookie 身份验证系统，它使用 AoP 样式方法来检查任何具有属性的控制器，然后将获取当前上下文（无论是来自静态 HttpContext.Current 还是根据拦截器的类型从目标调用对象），然后验证 cookie 是否存在，它包含正确的数据，然后最后用数据库或缓存等验证令牌。

无论如何，这种方法也可以用于 Signalr，尽管它有点冗长并且您正在使用依赖注入。您基本上将使用所需属性包装集线器调用，然后设置您的 DI/IoC 配置以拦截这些调用，然后在拦截器中获取集线器实例并从请求中获取 cookie（或您的自定义身份验证机制），验证它是否全部有效，如果不是，则抛出一个`new HttpException("403", "Not authenticated");`应该*将*用户踢出并在它甚至击中您的集线器方法之前返回的，这样您就可以将逻辑放在一个地方（您的拦截器或拦截器消耗的类) 然后只需使用您的属性包装需要使用此身份验证的任何方法。

我使用 Ninject 和拦截扩展，但是现在大多数主要的 DI 框架都有某种形式的 IoC 插件/扩展，例如 Autofac、Windsor、Spring 等。

如果您不喜欢将 DI 和/或 AOP 引入当前项目的路线，那么也许您可以创建一个包含身份验证逻辑的自定义集线器实例，然后在集线器中使用它，所以好吧，您仍然会从要保护的每个集线器方法中手动调用一些身份验证逻辑，但代码较少，例如：

```
public class AuthorisableHub : Hub
{
    private ISomeAuthenticationToken GetSomeAuthenticationTokenFromRequest(Request request) // probably a SignalR specific request object
    {
        // Get your token from the querystring or cookie etc
    }

    private bool IsAuthenticationTokenValid(ISomeAuthenticationToken token)
    {
        // Perform some validation, be it simple or db based and return result
    }

    protected void PerformUserAuthentication()
    {
        var token = GetSomeAuthenticationTokenFromRequest(Context.Request);
        var isRequestValid = IsAuthenticationTokenValid(token);

        if(!isRequestValid)
        { throw new HttpException(403, "<Some forbidden message here>"); }
    }
}

public class MyFancyPantsHub : AuthorisableHub
{
    public void TellAllClientsSomethingSecret(ISecret secret)
    {
        PerformUserAuthentication();

        // Do stuff with the secret as it should have bombed the user out
        // before it reaches here if working correctly
    }
} 
```

它并不完美，但会起作用（我认为），而且我确信我曾经在某处读到过为每个请求新实例化集线器，如果这确实是真的，如果你想的话，你可以把这个逻辑放在你的构造函数中将身份验证应用于集线器内的每个操作。

希望对您有所帮助，或给您一些想法……有兴趣知道您最终是如何解决它的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T01:23:03.997

SignalR 不提供任何额外的身份验证功能。相反，它旨在与您的应用程序的身份验证机制一起使用。

**集线器**

您应该像往常一样进行身份验证，然后使用 SignalR 提供的 Authorize 属性在集线器上强制执行身份验证结果。

Authorize 属性可以应用于整个 Hub 或 Hub 中的特定方法。一些例子：

*   [Authorize] – 仅经过身份验证的用户
*   [Authorize(Roles = "Admin,Manager")] – 仅在指定的 .NET 角色中经过身份验证的用户
*   [Authorize(Users = "user1,user2")] – 仅具有指定用户名的经过身份验证的用户

您还可以通过在 Application_Start 方法中添加以下方法来要求所有 Hub 要求身份验证：

> GlobalHost.HubPipeline.RequireAuthentication();

**持久连接**

您可以在请求中使用用户对象来查看用户是否经过身份验证：

> request.User.IsAuthenticated

# vim - gvim 命令行窗口中的多行

> ID：15843851
> 
> 赞同：1
> 
> 时间：2013-04-05T21:24:52.430
> 
> 标签：vim

如何为多个屏幕行配置 gvim 的 EX 命令行窗口？

注意：这个窗口不是按q时弹出的窗口：它是状态行正下方的窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-21T12:26:18.960

或者，您可以尝试`q:`or`q/`或`q?`or `<c-f>`。试试`:h q`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T00:51:49.453

您可以使用以下命令设置命令行窗口的大小`cmdheight`：

```
set cmdheight=2 
```

这将使命令行窗口占据两个屏幕行。把它贴在你的`.vimrc`. 它在`vim`or`gvim`或 MacVim 或其他任何东西中的工作方式相同。

# ruby-on-rails - 如何从一个控制器插入不同的表？

> ID：15843859
> 
> 赞同：0
> 
> 时间：2013-04-05T21:25:29.250
> 
> 标签：ruby-on-rails, ruby

我正在开发一个应用程序来创建鱼骨图。

我创建了几个模型来处理不同级别的因果关系。问题是，应用程序将有一个表单来将数据引入所有不同的级别，那么我该怎么做呢？

我可以只有一个控制器将信息插入所有不同的表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:37:32.317

如果您打算用不同的逻辑处理它们，一些简单的继承就可以解决问题。

有一个基本模型

```
class Bone < ActiveRecord::Base

end 
```

然后三个继承自它。

```
class BackBone < Person

end

class RibBone < Person

end

class OutSideBone < Person

end 
```

然后，您可以使用 person 作为基础来处理 person 控制器中的所有三个类。如果需要，每个人也会有自己的逻辑。

如果需要，您甚至可以对自己进行所有权，这在这种情况下可能会有所帮助。

```
class Bone < ActiveRecord::Base
    has_many :bones
    belongs_to :master_bone, :class_name => "Bone", :foreign_key => "bone_id"
end 
```

# java - 在 Java 中重用对象的存储意味着什么？

> ID：15843869
> 
> 赞同：0
> 
> 时间：2013-04-05T21:25:55.497
> 
> 标签：java, garbage-collection, specifications

在Java 语言规范的[§12.6](http://docs.oracle.com/javase/specs/jls/se5.0/html/execution.html#12.6)中，它说：

> Java 编程语言没有指定终结器将在多长时间内被调用，只是说它会在对象的存储被重用之前发生。

存储要重用的对象意味着什么？

我是否需要担心我的对象在运行时会随机发生这种情况（例如：在我使用对象时，某些东西会覆盖它）？如果是这样，我该如何防止这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-10T19:15:23.613

> 存储要重用的对象意味着什么？
> 
> 我是否需要担心我的对象在运行时会随机发生这种情况（例如：在我使用对象时，某些东西会覆盖它）？

据我所知，Java 的语义并没有在任何地方暴露这种现象，所以我认为它没有任何意义，它是一个实现细节，或者，一个“信息丰富的”评论。

换句话说，这句话：

```
except to say that it will happen before the storage for the object is reused. 
```

相当于什么都不说，因为它对您应该如何实现符合要求的 Java 编译器没有任何影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T21:27:46.277

在对象被垃圾回收后，对象的存储被重用，并且该对象曾经存储的内存被用于其他事情。

由于这只发生在对象被垃圾收集之后，它永远不会发生在您仍在使用的对象上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T21:29:19.073

我认为“存储”是指用于存储对象的物理堆空间。因此，根据规范，终结器方法保证在它所属的对象尚未被覆盖时运行。

如果您正在使用一个对象（即对其具有正常引用），则它根本不符合垃圾收集条件，因此您不必担心它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T21:41:46.457

将Java“堆”存储视为一堆黑板（或“黑板”或“白板”或其他任何东西，具体取决于您的年龄和您在哪里长大）。

当您创建一个对象时，您“声明”其中一个黑板供您使用，并将您的对象数据写入它。为了跟踪它，你把一根绳子粘在它的一角，然后把那根绳子拿在手里。您将手中的那根绳子称为“参考”。

然后，您可以创建第二个对象（要求使用不同的黑板），在其上写下名称，然后将第一段字符串的末端粘贴到该名称旁边的第二个黑板上。该名称是对象中的一个字段，它引用您创建的第一个对象。

只要你有一根绳子，你可以从一个黑板到下一个黑板，到达你仍在使用的最远的黑板上，你就可以阅读你在那个遥远的黑板上写的东西。

如果您不再需要其中一个黑板，请移除它与您的手之间的那根绳子，或者在另一个黑板上您可能已经用胶带粘住的任何地方。（这是将引用设置为空。）

当黑板不再有任何通向它的绳子时，看门人可以将其擦掉，并提供给需要黑板的​​其他人。当他这样做时，他会将从黑板引向任何其他人的绳子移除，如果没有其他绳子到达它们，它们也会被擦除。（他还会仔细弄清楚，例如，是否有两块黑板只是相互绑在一起，没有其他绳子可以接触到它们。这些也会被擦掉。）

“终结器”是一张说明，您可以将其粘贴到黑板的一侧。就在看门人擦黑板之前，他会阅读那张纸上的说明并执行要求的任何操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-06T00:13:28.947

> 我是否需要担心我的对象在运行时会随机发生这种情况（例如：在我使用对象时，某些东西会覆盖它）？

不，你没有。

简单来说，只有当 GC 知道您的（纯 Java）应用程序不可能再次使用它们*时**，*这些对象才会被覆盖。

* * *

细节：

对象的存储仅在它们被垃圾收集和最终确定后才会被重用。并且一个对象只会在所有*可访问*的引用都丢失/覆盖/忘记之后才会被垃圾收集。如果没有可访问的对象引用，您的应用程序将无法使用它： - 它不再了解该对象。

事实上，它比这更复杂一些，因为可达性有不同的“阴影”。例如，一个等待被终结的对象是“幻影可达”的，终结器有可能再次“复活”该对象。但除非你正在编写重写的类，否则你`finalize()`不需要知道这一点。需要记住的是，只有*无法访问*的对象才会回收它们的存储空间，纯 Java 程序在逻辑上不可能看到无法访问的对象的状态。

# xcode - 将数据文件从 Xcode 复制到 iPad 沙箱

> ID：15843870
> 
> 赞同：3
> 
> 时间：2013-04-05T21:26:00.807
> 
> 标签：xcode, ios5, testing, ios-simulator

我在 Xcode 中创建了一个应用程序，并添加了一个文本文件供应用程序打开和显示。

如何将此文本文件放入 iPad 沙箱文档目录中进行测试？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T22:24:57.230

您需要做几件事：

1.  创建 Documents 目录的路径
2.  确保您的文本文件在您的应用程序包中（拖放到 Xcode 中应该没问题）
3.  按名称将该文本文件从应用程序包复制到 Documents 目录

试试这个：

```
// Documents path
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsPath = [paths objectAtIndex:0];

// Destination path
NSString *fileInDocumentsPath = [documentsPath stringByAppendingPathComponent:@"name-of-your-file.txt"];

// Origin path
NSString *fileInBundlePath = [[NSBundle mainBundle] pathForResource:@"name-of-your-file" ofType:@"txt"];

// File manager for copying
NSError *error = nil;
NSFileManager *fileManager = [NSFileManager defaultManager];
[fileManager copyItemAtPath:fileInBundlePath toPath:fileInDocumentsPath error:&error]; 
```

# javascript - OpenWebkitSharp for .NET——在这种情况下让 Javascript 使用它的任何技巧？

> ID：15843872
> 
> 赞同：0
> 
> 时间：2013-04-05T21:26:05.397
> 
> 标签：javascript, vb.net, open-webkit-sharp

我在 VB.NET 项目中使用 OpenWebkitSharp 浏览器。我想要做的是使用**WebkitBrowser1.Navigate**在浏览器中“即时”显示一些 HTML。这对于基本的 HTML 非常有用，但 Javascript 在这种情况下似乎根本不起作用。例如，我有...

```
WebKitBrowser1.DocumentText = "<!DOCTYPE html><html><head><script>alert('This is an alert'); </script></head><body><p>This is some text</p></body></html>" 
```

正文看起来很好，但从来没有 Javascript 警报。我确保在 Webkit 浏览器中启用了 Javascript，所以这不是问题。

如果我使用 Navigate 方法显示包含 Javascript 的本地页面（即**WebkitBrowser1.Navigate("path/to/local/file")**，那么 Javascript 可以完美运行。但是在使用设置 HTML 时它根本不起作用**WebKitBrowser1.DocumentText**。

对于这个特定的项目，我需要生成 HTML 代码并“即时”显示它，所以我不能使用**WebKitBrowser1.Navigate**。我必须改用**WebkitBrowser1.DocumentText**（或类似的东西）。

有任何想法吗？

或者可能有更好的方法来实现这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T20:11:54.857

我最近遇到了类似的情况，虽然我仍在寻找允许您所描述的解决方案，但这是我决定做的解决方法：

- 将 HTML 保存到临时文件 - 将临时文件加载到表单上的 WebKit 控件中。

不过，我正在考虑对 OpenWebKitSharp 进行自己的修改，看看是否可以做到这一点。基本上，似乎通过 DocumentText 加载的 HTML 与通过 Navigate 加载的渲染路径不同。

# javascript - 通过引用扩展对象

> ID：15843873
> 
> 赞同：3
> 
> 时间：2013-04-05T21:26:09.777
> 
> 标签：javascript

我有一个`extend`方法可以扩展对象，就像您在 JavaScript 中所期望的那样：

```
var objA = {a: true};
var objB = extend({b:false}, objA);
console.log(objB); // {a: true, b: false} 
```

但是，我想通过引用将源的 ( `objA`) 属性扩展到目标 ( `objB`) 对象，以便对源所做的任何更改在事后反映在目标中，如下所示：

```
var objA = {a: true};
var objB = extend({b: false}, objA);
console.log(objB); // {a: true, b:false}
objA.a = false;
console.log(objB); // {a: false, b:false} 
```

例如，当您修改一个对象（始终通过引用分配）时，事情正在按照我希望的方式工作：

```
var objA = {A:{a: true}};
var objB = _.extend({b: false}, objA);
console.log(objB) // {A:{a:true}, b:false};
objA.A.a = false; 
console.log(objB); // {A:{a:false}, b:false}; 
```

因此，换句话说，当对`objA`的非对象文字属性（或任何未通过引用分配的值）进行更改时，我希望这些更改反映在`objB`.

我相当确定如果没有额外的辅助方法，这完全不可能，该方法依赖于某种对象监视方法，该方法在对象更改时触发。

想法？

我的`extend`方法中的代码：

```
(l).extend = (l).merge = function () {
    var args = (l).fn.__args(arguments, [{
            deep: 'bool'
        }, {
            '*': 'obj:object'
        }
    ]),
        target = (l)._object || args.obj,
        keys = [],
        obj, objs, copy, key, i, o;

    // Collect potential objects to merge
    objs = (l).filter(args, function (value, index) {
        if (index !== "obj" &&
            (l).isPlainObject(value) && !((l).isEqual(target, value))) {
            return value;
        }
    });

    // When target object is not selected globally
    if (!args.obj) {
        target = objs.shift();
    }

    // When target object is not selected globally and only a single object
    // is passed extend the library itself
    if (!(l)._global && !objs.length) {
        target = this;
        objs[0] = args.obj;
    }

    // When a boolean is passed go deep
    if (args.deep) {

        // Build property reference used to prevent never ending loops
        (l).each(objs, function (index, value) {
            keys.push((l).keys(value));
            keys = (l).flatten(keys);
        });

        // Add properties to all nested objects
        (l).deep(target, function (depth, index, obj, ref) {
            if ((l).indexOf(keys, index) === -1) {
                for (i = 0; i < objs.length; i++) {
                    for (key in objs[i]) {
                        if ((l).isPlainObject(obj)) {
                            copy = objs[i][key];
                            obj[key] = copy;
                        }
                    }
                }
            }
        }, "*");
    }

    // Merge first level properties after going deep
    for (i = 0; i < objs.length; i++) {
        if ((obj = objs[i]) !== null) {
            for (key in obj) {
                copy = obj[key];
                if (target === copy) {
                    continue;
                }
                target[key] = copy;
            }
        }
    }
    return (l).fn.__chain(target);
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T00:34:18.760

你在这里提到的正是 JavaScript 的原型继承：

```
var objA = {a: false};
var objB = Object.create(objA);
objB.b = false;

console.log(objB.a, objB.b); // true, 
objA.a = false;
console.log(objB.a, objB.b); // false, false 
```

当然如果`objB`重写`a`属性，你会失去那个链接，因为 JavaScript 会`a`在对象中找到属性`objB`，因此不会在原型链中查找。

使用 ECMAScript 5 方法，您可以拥有这样的`extend`功能：

```
function extend(properties, proto) {
  var object = Object.create(proto);
  var descriptor = {};

  Object.getOwnPropertyNames(properties).forEach(function(name) {
    descriptor[name] = Object.getOwnPropertyDescriptor(properties, name);
  });

  return Object.defineProperties(object, descriptor);
}

var objA = {a: true};
var objB = extend({b: false}, objA);
console.log(objB.a, objB.b); // true, false
objA.a = false;
console.log(objB.a, objB.b); // false, false 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T00:12:29.180

```
Object.extend= function (properties,obj) {
            function F() { };
            F.prototype = obj;
            var newObj = new F();
            for (var prop in properties){
                 newObj[prop] = properties[prop];
            }
            return newObj;
        } 
```

# javascript - 在Javascript中使用文本框信息作为变量？

> ID：15843874
> 
> 赞同：0
> 
> 时间：2013-04-05T21:26:10.697
> 
> 标签：javascript

所以，我正在使用 Javascript 制作摇滚、剪纸、剪刀游戏，但我在开始时遇到了一些麻烦。我需要有一个文本框和提交按钮，然后用户输入的“石头”、“纸”、“剪刀”将与计算机的随机选择进行对抗。我将如何让计算机获取输入到文本字段中的内容并根据计算机选择运行它？我是新手，需要朝着正确的方向轻推，因为我不知道如何开始这个问题。

谢谢

编辑：所以，一个朋友给我发了一些代码，我添加了一些代码，看起来它可以工作（至少对我来说），但我不确定将变量“player”设置为等于什么以便等于文本框信息。

```
var player = 

var choices = ["rock","paper","scissors"];
var computer = choices[Math.floor(Math.random()*3)];

var win = "Your "+player+" beats "+computer+". You win.";
var lose = "Your "+player+" loses to "+computer+". You lose.";
var draw = "A draw: "+player+" on "+computer+".";

if(player === "rock"){
    if(computer === "scissors"){
        result = win;
        alert="win";
    }
    else if(computer === "paper"){
        result = lose;
        alert="lose";
    }
    else if(computer === "rock"){
        result = draw;
        alert="draw";
    }
}
else if(player === "paper"){
    if(computer === "rock"){
        result = win;
        alert="win";
    }
    else if(computer === "scissors"){
      result = lose;
        alert="lose";
    }
    else if(computer === "paper"){
        result = draw;
        alert="draw";
    }
}
else if(player === "scissors"){
    if(computer === "paper"){
        result = win;
        alert="win";
    }
    else if(computer === "rock"){
        result = lose;
        alert="lose";
    }
    else if(computer === "scissors"){
        result = draw;
        alert="draw";
    }
}
</script>
</head>
<body>
<form>
<input type="text" id="rockTextInput" size="100" placeholder="Rock, Paper, or Scissors" >
<input type="button" id="Button" value="Play Hand">
</form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T21:28:45.743

计算机的选择可以这样生成：

```
...
var plays = ["rock", "paper", "scissors"];
var rand = Math.round(Math.random() * 2);

alert("Computer played: " + plays[rand]);

//Check to see the winner
... 
```

希望对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T21:52:26.537

由于可能性有限，一种方法是使用查找表。您必须使用更多的 JavaScript 将其链接到您的 HTML。为此，您可能希望使用[`document.getElementById`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById)a[`<input>`](https://developer.mozilla.org/en-US/docs/HTML/Element/Input)的[*值*](https://developer.mozilla.org/en-US/docs/DOM/HTMLInputElement#Properties)并输出到其他一些[*Element*](https://developer.mozilla.org/en-US/docs/DOM/Element)。

```
/*
Usage:
play(player_choice)
    player_choice String, 'rock', 'paper' or 'scissors'
returns Object with properties
    player String, player's choice
    ai String, ai's choice
    result Integer, 0 - lose, 1 - draw, 2 - win
    resultText String, description of result
*/
var play = (function () {
    var options = ['rock', 'paper', 'scissors'],
        result_table = {
            'rock': {
                'rock': 1,
                'paper': 0,
                'scissors': 2
            },
            'paper': {
                'rock': 2,
                'paper': 1,
                'scissors': 0
            },
            'scissors': {
                'rock': 0,
                'paper': 2,
                'scissors': 1
            }
        },
        result_text = ['AI wins', 'Draw', 'Player wins'];
    return function (player_choice) {
            var ai_choice;
            player_choice = player_choice.toLowerCase();
            if (!result_table.hasOwnProperty(player_choice)) {
                throw '[' + player_choice + '] not a valid choice.';
            }
            ai_choice = options[Math.floor(Math.random() * options.length)];
            return {
                    'player': player_choice,
                    'ai': ai_choice,
                    'result': result_table[player_choice][ai_choice],
                    'resultText': result_text[result_table[player_choice][ai_choice]]
                };
        };
}()); 
```

# objective-c - 我如何“滚动”以获得 25% 的机会获得是或否？

> ID：15843877
> 
> 赞同：8
> 
> 时间：2013-04-05T21:26:18.247
> 
> 标签：objective-c

我想根据百分比随机生成是或否

所以我想“滚动”并有 25% 的机会命中 YES，有 75% 的机会命中 NO

希望有人能指出我正确的方向，以最好的方式做到这一点，也许是一些文章之类的？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-05T21:54:16.100

所有其他答案似乎都集中在“是”的百分比为 25%，即 1/4 的概率上。但是如果百分比是 0 到 100 之间的任意整数呢？

```
BOOL randomBoolWithYesPercentage(int percentage) {
    return arc4random_uniform(100) < percentage;
} 
```

用百分比来称呼它，比如`randomBoolWithYesPercentage(25)`.

如果百分比可以是小数，比如 37.6%，该怎么办？然后我们需要变得更复杂。这应该足够了：

```
BOOL randomBoolWithYesPercentage(double percentage) {
    double r = 100 * (double)arc4random() / ((double)UINT32_MAX + 1);
    return r < percentage;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-05T21:39:39.950

使用具有相等分布的随机函数，并使其尽可能等于可能值之一

```
BOOL RollWithDenominator(NSInteger denominator)
{
  return 0 == arc4random_uniform(denominator);
} 
```

对于 1/4 的机会电话`RollWithDenominator(4);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T21:28:18.050

在伪代码中：

```
x = rand(1,4);
if (rand == 1) {
    'yes' // 25% of the time you get 1
} else {
    'no'; // the other 75%, when you get 2,3,4
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T21:32:34.590

对不起，可能应该是一个评论。我没有太多的 IOS 经验，但我相信这可以很容易地应用/转移。

一个简单的解决方案是定义某种具有四个值的数组。然后在这个数组中随机选择一个值。然后在 if/else 语句的帮助下，如果它命中一个特定的单值输出将为“是”，如果它命中其他三个输出中的任何一个，则为“否”。

* * *

编辑：
正是 Marc B 所说的。
您还可以使用数组，例如`(1,0,0,0)`or `(yes,no,no,no)`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T21:43:18.963

这是一个简单的方法：

```
BOOL b = arc4random_uniform(4) == 0; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-05T21:42:26.053

由于您正在为 iOS 编程，这里有一些您可以直接使用的代码：

在您的应用程序开始时调用它，这将使您每次启动应用程序时都有不同的结果：

```
srand (time(NULL)); 
```

然后在代码中需要使用随机结果的地方：

```
BOOL result = false;
int randomValue = rand()%4;
if(randomValue==0)
{
    result = TRUE;
} 
```

变量“结果”的正确率为 25%，错误率为 75%！

# websphere-6.1 - 为什么 websphere 门户控制台中列出了两台服务器

> ID：15843880
> 
> 赞同：0
> 
> 时间：2013-04-05T21:26:21.433
> 
> 标签：websphere-6.1, websphere-portal

当我登录到 websphere 门户控制台并进入服务器 -> 应用程序服务器 -> 我看到列出了两个服务器：`server1`和`Websphere_Portal`. 为什么有两个服务器？这里只有一个门户服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T21:42:20.963

没错，只有一个 Portal 服务器，但那里还有第二个服务器。如果我没记错的话 server1 基本上只是运行管理控制台。它没有运行 Portal。

引用版本 8 的一些更改说明，

> 在以前的版本中，您需要先启动 WebSphere Application Server server1，然后才能启动 WebSphere Portal。还需要 server1 来访问 WebSphere Integrated Solutions Console

[http://infolib.lotus.com/resources/portal/8.0.0/doc/en_us/PT800ACD001/overview/change_portal.html](http://infolib.lotus.com/resources/portal/8.0.0/doc/en_us/PT800ACD001/overview/change_portal.html)

# java - gwt bootstrap 中带有切换按钮的水平控制组

> ID：15843882
> 
> 赞同：1
> 
> 时间：2013-04-05T21:26:25.293
> 
> 标签：java, user-interface, gwt-bootstrap

我正在尝试使用一些布尔值构建一个 gwt 引导表单。由于它们是多选的，因此通常是复选框。这样可行。

但是我发现复选框很难看，并且更喜欢另一种外观，例如带有切换按钮的按钮组。

Buttongroup 在表单中不起作用，我认为是因为它们不是表单元素。

我有哪些选择？我怎样才能很好地实现许多布尔表单元素？

问候马库斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-02T14:49:59.113

`ButtonGroup`确实在`Form`s 工作。这是一些示例代码：

```
<b:Form>
    <b:ControlLabel>Label name</b:ControlLabel>
    <b:TextBox placeholder="Type something…" />
    <b:HelpBlock>Example block-level help text here.</b:HelpBlock>
    <b:CheckBox> Check me out</b:CheckBox>
    <b:ButtonGroup>
        <b:Button toggle="true">Sample1</b:Button>
        <b:Button toggle="true">Sample2</b:Button>
        <b:Button toggle="true">Sample3</b:Button>
        <b:Button toggle="true">Sample4</b:Button>
        <b:Button toggle="true">Sample5</b:Button>
    </b:ButtonGroup>
    <b:SubmitButton addStyleNames="btn">Submit</b:SubmitButton>
</b:Form> 
```

# python - 这个基准似乎相关吗？

> ID：15843883
> 
> 赞同：0
> 
> 时间：2013-04-05T21:26:26.040
> 
> 标签：python, iterator, generator, benchmarking, list-comprehension

我正在尝试对一些`itertools`针对生成器和列表理解的方法进行基准测试。这个想法是我想通过从基本列表中过滤一些条目来构建一个迭代器。

这是我想出的代码（在接受答案后编辑）：

```
 from itertools import ifilter
import collections
import random
import os
from timeit import Timer
os.system('cls')

# define large arrays
listArrays = [xrange(100), xrange(1000), xrange(10000), xrange(100000)]

#Number of element to be filtered out
nb_elem = 100
# Number of times we run the test
nb_rep = 1000

def discard(it):
    collections.deque(it, maxlen=0)

def testGenerator(arr, sample):
    discard(x for x in sample if x in arr)

def testIterator(arr, sample):
    discard(ifilter(sample.__contains__, arr))

def testList(arr, sample):
    discard([x for x in sample if x in arr])

if __name__ == '__main__':

    for arr in listArrays:

        print 'Size of array: %s ' % len(arr)
        print 'number of iterations %s' % nb_rep
        sample = random.sample(arr, nb_elem)

        t1 = Timer('testIterator(arr, sample)', 'from __main__ import testIterator, arr, sample')
        tt1 = t1.timeit(number=nb_rep)

        t2 = Timer('testList(arr, sample)', 'from __main__ import testList, arr, sample')
        tt2 = t2.timeit(number=nb_rep)

        t3 = Timer('testGenerator(arr, sample)', 'from __main__ import testGenerator, arr, sample')
        tt3 = t3.timeit(number=nb_rep)

        norm = min(tt1, tt2, tt3)
        print 'maximum runtime %.6f' % max(tt1, tt2, tt3)
        print 'normalized times:\n iterator: %.6f \n list: %.6f \n generator: %.6f' % \
            (tt1/norm, tt2/norm, tt3/norm)
        print '=========================================== 
```

==========='

我得到的结果请注意，编辑后的版本没有在同一台机器上运行（因此对标准化结果很有用），而是使用 32 位解释器和 python 2.7.3 运行：

```
 Size of array: 100
number of iterations 1000
maximum runtime 0.125595
normalized times:
 iterator: 1.000000
 list: 1.260302
 generator: 1.276030
======================================================
Size of array: 1000
number of iterations 1000
maximum runtime 1.740341
normalized times:
 iterator: 1.466031
 list: 1.010701
 generator: 1.000000
======================================================
Size of array: 10000
number of iterations 1000
maximum runtime 17.033630
normalized times:
 iterator: 1.441600
 list: 1.000000
 generator: 1.010979
======================================================
Size of array: 100000
number of iterations 1000
maximum runtime 169.677963
normalized times:
 iterator: 1.455594
 list: 1.000000
 generator: 1.008846
====================================================== 
```

您能否提供一些改进建议并评论此基准是否可以给出准确的结果？

我知道我的装饰器中的条件可能会影响结果。我希望对此提出一些建议。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T21:46:01.333

首先，不要尝试复制所有内容[`timeit`](http://docs.python.org/2/library/timeit.html)，而是使用它。该`time`函数可能没有足够的准确性来发挥作用，而编写数十行不需要的脚手架代码（尤其是如果它必须进行诸如打开之类的骇人听闻的事情时`func.__name__`）只是无缘无故地招致错误。

假设没有错误，它可能不会显着影响结果。您正在做一些额外的工作并将其充电到`testIterator`，但这只是每个外循环一次。但是，这样做没有任何好处，所以我们不要这样做。

```
def testGenerator(arr,sample):
    for i in (x for x in sample if x in arr):
        k = random.random()

def testIterator(arr,sample):
    for i in ifilter(lambda x: x in sample, arr):
        k = random.random()

def testList(arr,sample):
    for i in [x for x in sample if x in arr]:
        k = random.random()

tests = testIterator, testGenerator, testList

for arr in listArrays:
    print 'Size of array: %s ' % len(arr)
    print 'number of iterations %s' % nb_rep
    sample = random.sample(arr, nb_elem)
    funcs = [partial(test, arr, sample) for test in tests]
    times = [timeit.timeit(func, number=nb_rep) for func in funcs]
    norm = min(*times)
    print 'maximum runtime %.6f' % max(*times)
    print 'normalized times:\n iterator: %.6f \n list: %.6f \n generator: %.6f' % (times[0]/norm,times[1]/norm,times[2]/norm)
    print '======================================================' 
```

* * *

接下来，你为什么要`k = random.random()`在里面这样做？从快速测试来看，仅在没有复杂循环的情况下执行该行 N 次是整个过程的 0.19 倍。因此，您将每个数字增加 20%，这会无缘无故地稀释它们之间的差异。

* * *

一旦你摆脱了它，`for`循环除了消耗迭代器之外没有任何用处，这也增加了额外的开销。从 2.7.3 和 3.3.0 开始，使用没有自定义 C 代码的迭代器的最快方法是`deque(it, maxlen=0)`，所以，让我们试试这个：

```
def discard(it):
    collections.deque(it, maxlen=0)

def testGenerator(arr,sample):
    discard(x for x in sample if x in arr)

def testIterator(arr,sample):
    discard(ifilter(sample.__contains__, arr))

def testList(arr,sample):
    discard([x for x in sample if x in arr]) 
```

或者，或者，只让函数返回一个生成器/ifilter/list，然后`discard`对结果进行脚手架调用（无论哪种方式都不重要）。

* * *

同时，对于这种`testIterator`情况，您是在尝试测试 lambda 与内联表达式的成本，还是`ifilter`与生成器的成本？如果要测试前者，这是正确的；如果是后者，您可能想要优化它。例如，在 64 位 Python 3.3.0 中通过`sample.__contains__`而不是`lambda x: x in sample`似乎快 20%，在 32 位 2.7.2 中快 30%（尽管由于某种原因在 64 位 2.7.2 中根本不快）。

* * *

最后，除非您只测试一个实现/平台/版本，否则请确保尽可能多地运行它。例如，使用 64 位 CPython 2.7.2，`list`并且随着列表的增长从 1.0 倍逐渐攀升到 1.4 倍，`generator`总是并驾齐驱，但在 PyPy 1.9.0 中，总是最快的，从2.1 开始x 和 1.9x 慢，但随着列表的增长接近 1.2x。`iterator``iterator``generator``list`

因此，如果您因为“它很慢”而决定反对迭代器，那么您可能会用 PyPy 的大幅减速换取 CPython 的小得多的加速。

当然，这可能是可以接受的，例如，因为即使是最慢的 PyPy 运行速度也非常快，或者因为您的用户都没有使用 PyPy，等等。但这绝对是“这个基准是否相关？”答案的一部分。

# python-3.x - 将列表从一个函数传递到另一个函数

> ID：15843887
> 
> 赞同：0
> 
> 时间：2013-04-05T21:26:30.280
> 
> 标签：python-3.x

我需要帮助来理解这个指令。

> 您的主程序代码应该调用“getData”函数。将从“summer”函数返回的列表传递给“getData”并保存函数返回的总和。

```
def getData():
    fin = open("sample.dat","r")
    numbers=[]
    for line in fin:
        val =line.rstrip()
        numbers.append(val)
    return numbers
def summer(lst):
    sum=0
    for n in range(0,13,2):
        sum+=powerval(lst[n],lst[n+1])
    return sum 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:37:02.860

如果阅读说明，

> 将函数返回的列表传递`getData`给`summer`并保存函数返回的总和。

然后尝试：

```
total = summer(getData()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T21:32:54.507

我认为这可以满足要求。

```
def getData(lst):
    for l in lst:
        do something with sum
    save sum
    return sum

invoke as:
    getData(summer(some_other_data)) 
```

# javascript - 用于在文本输入更改时更新 URL 哈希的 jQuery 插件

> ID：15843892
> 
> 赞同：1
> 
> 时间：2013-04-05T21:26:46.610
> 
> 标签：javascript, jquery, jquery-plugins, hashtag

是否有一个 jQuery 插件可以在用户将文本输入文本输入时更新页面的 URL 哈希？

我知道这很简单，但我正在寻找一个“智能”的，例如 Google Instant search 或[caniuse.com](http://caniuse.com/)，它不会更新每个`keyup()`事件的哈希值，而是在用户停止输入时更新给定的时间段或文本输入模糊。

我也知道我可以坐下来自己写这个插件，因为我之前写过几个，但我希望有人能推荐一个已经写好的，这样我就不必重新发明轮子了。

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T21:34:53.230

没那么难。~~未经测试的代码：~~

```
var hashTO;
$('#myTextField').on('keyup', function() {
    if(hashTO !== undefined) {
        clearTimeout(hashTO);
    }
    hashTO = setTimeout(updateHash, 1000);
});

function updateHash() {
    var hashVal = encodeURIComponent($('#myTextField').val());
    window.location.hash = hashVal;
} 
```

演示：http: [//jsfiddle.net/vent6/show/](http://jsfiddle.net/vent6/show/)

代码：http: [//jsfiddle.net/vent6/](http://jsfiddle.net/vent6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T21:40:25.830

检查 Underscore 库的 debounce 方法（lodash，就此而言）

[http://underscorejs.org/#debounce](http://underscorejs.org/#debounce)

# jquery - Internet Explorer 10 不发送 Ajax 发布数据

> ID：15843901
> 
> 赞同：6
> 
> 时间：2013-04-05T21:27:32.013
> 
> 标签：jquery, ajax, internet-explorer, post, internet-explorer-10

好的，我研究了几个小时，但我仍然很难过。

Internet explorer 10 会使用 jquery 提交 ajax 请求，但不会包含 post 数据。

这是代码：

```
var ajaxData = "FirstName="+encodeURIComponent($('#FirstName').val()); //get the data from the account form
                ajaxData += "&LastName="+encodeURIComponent($('#LastName').val()); 
                ajaxData += "&EmailAddress="+encodeURIComponent($('#EmailAddress').val());
                ajaxData += "&CAT_Custom_246311="+encodeURIComponent(listData);

                var config = {
                    async: false,
                    type: "POST",
                    url: "/FormProcessv2.aspx?WebFormID=44714&OID={module_oid}&OTYPE={module_otype}&EID={module_eid}&CID={module_cid}&JSON=1",
                    dataType: "json", // text"json",
                    processData: false,
                    data: ajaxData,
                    timeout: 70000,
                    cache: false,

                };

                $.ajax(config)
                .done(function(data, event) {
                    if(data.FormProcessV2Response.success == true){ //success field is in BC response
                        alert("The list was submitted sucessfully.");
                        console.log(XHR);
                    } else{
                        alert("An error occurred and the list was not submitted.");
                    }
                })
                .fail(function(msg,event) {
                    alert("An error occurred and the list was not submitted.");
                }); 
```

其他所有浏览器（safari、opera、chrome、firefox、IE9）都将允许它工作，但代码在 IE 10 中失败。使用 fiddler 查看它表明其他浏览器和 IE 10 之间的标题几乎相同，但是IE 10 的请求标头的内容长度值为 0，并且没有正文。

关于人们遇到的其他一些问题，不，我没有任何下载管理器样式的插件。所有插件都是默认的。这是我记录的插件的照片。

![插件](https://i1301.photobucket.com/albums/ag110/Caleb_Begly/plugins_zps07b6309c.jpg)

```
var xmlhttp;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("POST",config.url,true);
xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
xmlhttp.send(config.data);
} 
```

这是来自 w3schools 的原始请求的虚拟文本，带有我自己的数据。

这是 Internet Explorer 本身（使用开发工具）给出的数据值的示例

```
FirstName=Joe&LastName=Spacely&EmailAddress=tester%40test.com&CAT_Custom_246311=test%3Dtest 
```

我在 Windows 8 x64 w/Media Pack 上使用 Internet Explorer 10.0.9200.16519。

Internet Explorer 是否根本不支持它？

任何帮助，将不胜感激。哦，请不要告诉我 IE 有多糟糕。我们都知道，但我们 Web 开发人员仍然必须处理它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T00:17:53.787

我以前遇到过 IE 和表单数据的问题。我发现最好确保我的输入字段用带有 id 的表单标签包装。然后，当您发布数据时，使用 jQuery [.serialize()](http://api.jquery.com/serialize/)函数为您构建发布数据字符串。

因此，您的配置将如下所示：

```
var config = {
    async: false,
    type: "POST",
    url: "/FormProcessv2.aspx", //truncated for simplicity
    dataType: "json",
    processData: false,
    data: $('#formName').serialize(),
    timeout: 70000,
    cache: false
}; 
```

另外，以防万一我提到确保您将此 ajax 帖子绑定到表单提交或按钮单击，您使用[event.preventDefault()](http://api.jquery.com/event.preventDefault/)阻止默认表单提交操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T15:41:55.260

按要求发帖：

它与您的 URL 已经有 $_POST 数据有关吗？也许如果你在你的变量中包含这些信息并且只有静态 URL 会取得更大的成功。

顺便说一句，您可能会考虑使用 {key:value} 对，因为构建查询字符串更难维护。

# javascript - 使用 getItemValueDouble 返回的科学记数法

> ID：15843902
> 
> 赞同：0
> 
> 时间：2013-04-05T21:27:40.410
> 
> 标签：javascript, xpages, scientific-notation

我有一个带有以下代码行的 SSJS 函数，它不断以科学计数法返回字段“day”的值。除了以下内容之外，我还尝试过使用 BigDecimal，但没有任何区别。SO 和其他关于科学记数法到十进制的博客上的所有其他问题都有 java 的示例，因此我已尽我最大的努力来解释如何为 SSJS 解释这些示例。

值存储在使用以下代码中的 exportDoc 访问的文档中，使用字段名称
**字段名称：day**
**数据类型：数字**
**数据长度：8 字节**
**Seq Num：1**
**Dup 项目 ID：0**
**字段标志：摘要**

**-37.5**

```
 exportDoc.getItemValueDouble('day');
    returned value: -3.75E1

    var dform:java.text.DecimalFormat = new java.text.DecimalFormat("0.##");
    var hrs:String = dform.format(exportDoc.getItemValueDouble('day'));
    //using hrs:Double returns same value
    returned value: -3.75E1

    var hrs:String = dform.parse(@Text(exportDoc.getItemValueDouble('day')));
    //using hrs:Double returns same value
    returned value: -3.75E1

    var hrs = Number(exportDoc.getItemValueDouble('day'));
    returned value: -3.75E1 
```

如果我将 exportDoc.getItemValueDouble('day') 乘以 10，我得到 -375，如果我再除以 10，我仍然得到 -3.75E1，如果我使用 exportDoc.getItemValueInteger('day')，我得到 -38。

这不会发生在整数负数（如 -2、-108 等）或正数（即使不是整数）中。

非常感谢任何帮助，因为这会在导入我们的 HRIS 系统时引起问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:14:46.143

你确定你没有设置某种转换器吗？

我刚刚整理了一个测试页面，但这里没有发生：

```
<xp:panel id="upperPanel">
    <xp:label value="Number field (shows value stored in number field): "
        id="label1"></xp:label>
    <xp:inputText id="inputText1" value="#{document1.subNum}">
        <xp:this.converter>
            <xp:convertNumber type="number"></xp:convertNumber>
        </xp:this.converter>
    </xp:inputText>
</xp:panel>
<xp:panel id="lowerPanel">
    <xp:label id="label2"
        value="Calculated Number (computes value using .getItemValueDouble()): ">
    </xp:label>
    <xp:text escape="true" id="computedField1">
        <xp:this.value><![CDATA[#{javascript:currentDocument.getItemValueDouble("subNum")}]]>
        </xp:this.value>
        <xp:this.converter>
            <xp:convertNumber type="number"></xp:convertNumber>
        </xp:this.converter>
    </xp:text>
</xp:panel> 
```

看起来像这样：

![截屏](https://i.stack.imgur.com/WUuxZ.png)

我什至尝试将 Notes 表单的字段属性设置为“科学”，但（当然）这对 Xpages 没有任何影响。

可能我没有得到你想要做什么？

# c++ - C/C++ Openmp：如果另一个线程同时更新数据，一个线程是否可以读取损坏的数据？

> ID：15843907
> 
> 赞同：1
> 
> 时间：2013-04-05T21:27:51.643
> 
> 标签：c++, parallel-processing, openmp

假设我们有以下代码模式：

```
main(){

   sometype data;

   #pragma omp parallel for
   for(i=0; i< n; i++){

     read data;

     do some calculations that would be used in order to update the data;

     #pragma omp critical{
        update data;
      }
   }
} 
```

我知道我们需要一个临界区来更新数据，因为同时进行两次更新可能会导致损坏，但是如果一个线程在临界区内更新数据而另一个线程正在尝试读取数据会发生什么？

我在网上看到了一些例子，其中阅读被认为是多线程系统中的安全操作，但是我不确定在上述情况下它有多安全。如果它不安全，为了使其安全，应该采取什么适当的措施？

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T21:42:14.413

当一个线程正在写入（更新）数据而其他线程正在从中读取数据时，您的示例中将出现竞争条件。您所读到的“阅读被认为是安全的”是指仅同时读取相同的数据，而不对其进行修改。

您必须用`#pragma omp barrier`s 包围您的关键部分以确保安全更新。

如果您只需要一个线程来更新所有数据，请考虑使用`#pragma omp single`子句。`#pragma omp critical`临界区会被所有线程一一执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T21:48:42.897

这实际上取决于您期望保持一致的内容、运行的架构以及对数据进行的更新类型。

通常，如果您在一个线程中更新某些数据，您应该阻止另一个线程使用或更新该数据。

在典型的现代处理器中，单个操作仅在读取输入和存储结果时是原子的。因此，如果另一个处理器在读取输入和写入结果之间更新相同的数据，则结果是未定义的。但是读取/写入的数据（假设正确对齐）将是一致的。从编译器来看，对齐几乎总是“正确的”，因此该特定数据应该没有问题。但是假设我们有一个包含 10 个值的数组：

```
10.1
10.2
10.3
10.4
10.5
10.6
10.7
10.8
10.9
11.0 
```

我们通过向每个值添加 1.0 来“更新”它。

```
11.1
11.2
11.3
11.4 
```

---- 这里另一个线程“中断”并开始使用数组进行计算“

```
10.5
10.6
10.7
10.8
10.9
11.0 
```

现在，当然，计算的第一部分将使用“新”值完成，第二部分使用“旧”值。这可能不是你想要的。

您不会看到 -1.8812121E-64 的读数，因为您的代码读取了“半更新”值或类似的值。

从多个线程中读取是安全的，但是一旦任何线程开始写入，您必须确保另一个线程根本没有读取数据。

# android - Android JSONException：JSONArray 必须以 [ - 开头，它确实如此

> ID：15843909
> 
> 赞同：3
> 
> 时间：2013-04-05T21:28:01.033
> 
> 标签：android, json, arrays, byte-order-mark

好的，我知道以前有人问过这个问题，但是所有的答案都没有帮助。首先，让我回顾一下问题：

我有一个（PHP 生成的）JSON 元素，PHP 代码如下所示：

```
if (!headers_sent()) header('Content-type: application/json');
echo "[{\"test\":\"success\"}]"; 
```

在此之前没有其他回声，打印或其他任何东西，所以输出真的只是

```
[{"test":"success"}] 
```

没有别的了。PHP 文件保存为纯 UTF-8（经过检查和双重检查）。

现在，我的 Android 代码如下所示：

```
 StringBuilder builder = new StringBuilder();
    HttpClient client = new DefaultHttpClient();
    HttpGet httpGet = new HttpGet("http://myurl");
    try {
        HttpResponse response = client.execute(httpGet);
        StatusLine statusLine = response.getStatusLine();
        int statusCode = statusLine.getStatusCode();
        if (statusCode == 200) {
            HttpEntity entity = response.getEntity();
            InputStream content = entity.getContent();
                BufferedReader reader = new BufferedReader(new InputStreamReader(content, "UTF-8"), 8);
            String line;
            while ((line = reader.readLine()) != null) {
                builder.append(line);
            }
        }
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    String menuData = builder.getString();

    ArrayList<HashMap<String, String>> tempList = new ArrayList<HashMap<String, String>>();
boolean change = false;

try {
    JSONArray jsonMenu = new JSONArray(menuData);

    for (int i = 0; i < jsonMenu.length(); i++) {
        JSONObject jsonObject;
        try {
            jsonObject = jsonMenu.getJSONObject(i);

            HashMap<String, String> menuItem = new HashMap<String, String>();
            menuItem.put("test", jsonObject.getString("test"));
            tempList.add(menuItem);
            change = true;

        } catch (JSONException e) {
        }
    }

} catch (JSONException e) {
}

if(change) {
     // here comes the listview update, but never triggered anyways
} 
```

而且我总是收到相同的错误消息：

```
04-05 21:06:31.226: W/System.err(1208): org.json.JSONException: A JSONArray text must start with '[' at character 1 of ?[{"test":"success"}] 
```

这其实是Logcat输出保存到log.txt并在这里解析，然后一下子就出现了这个问号。在将字符串解析为 JSONArray 之前对字符串进行修剪或格式化的所有尝试都失败了。我完全不知道还能做什么。顺便说一下，在 Eclipse 本身的 Logcat 中没有问号......

在 catch 语句中添加 Log.e 输出，错误输出完全相同。截图在这里：

![LogCat 中的错误消息](https://i.stack.imgur.com/AfZqg.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T12:16:15.743

问题解决了：

在 Notepad++ 中打开 PHP 文件，点击 Encoding => Encode in UTF-8 without BOM。

我忽略了这一点，因为它在状态栏中显示“ANSI as UTF-8”，这听起来很不对（我想要纯 UTF-8 而没有 ANSI 混合）。是的，我不是 Linux 的家伙，所以这个 ANSI/UTF-8 是我从来没有得到说实话的东西，它又把我困住了。

如果有人对我如何找到解决方案感兴趣（这里归功于@Perception、@Raghav-Sood 和@Reuben-Scratton）：

将 menuData 字符串转换为字节数组，发现前两个字符不是 JSONArray 要查找的左括号，而是两个 BOM 字符。

# java - Java中的while循环问题

> ID：15843916
> 
> 赞同：-3
> 
> 时间：2013-04-05T21:28:35.583
> 
> 标签：java

这是我的代码的一小部分。

```
System.out.print("Would you like to continue (Y/N)?");
while (!Anwser.equals("Y")){
    Anwser = UserInput.next();
    System.out.println("Would you like to continue (Y/N)?");
} 
```

这就是答案。

```
> Would you like to continue (Y/N)? 
> Would you like to continue (Y/N)? 
```

为什么我输入了 Y 却不满足条件，它又打印出来了？在此之后，它继续代码：

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T21:29:21.507

循环执行`while`零次或多次。

循环执行一次`do while`或多次。

对于延续问题，您并不真正关心用户输入的内容，只要它是“Y”或“y”即可。其他任何事情都会终止程序。还有一个延续问题，程序通常想要运行一次。因此，将您的代码包装在一个`do while`循环中。

```
do {
// Your code goes here

    System.out.print("Would you like to continue (Y/N)?");
    Anwser = UserInput.next();
} while (answer.equalsIgnoreCase( "Y")); 
```

至于为什么你的代码不起作用。也许您应该在循环开始之前为 Answer 分配一个值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T21:38:23.993

尝试更改“Anwser”变量的值并将其替换为用户的输入

像这样：

```
System.out.print("Would you like to continue (Y/N)?");
Anwser = UserInput.next();
while (!Anwser.equals("Y")){
    System.out.println("Would you like to continue (Y/N)?");
    Anwser = UserInput.next();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T00:24:20.160

它打印两次的原因是因为第一行是在循环之外打印问题，然后测试答案（没有被捕获，然后依赖于引用变量被初始化的内容）然后进入首先得到的 while 循环用户对最后一个问题的输入然后再次打印该问题。

```
System.out.print("Would you like to continue (Y/N)?"); //prints to screen
//no input captured before test
while (!Anwser.equals("Y")){ //tests the reference variable
   Anwser = UserInput.next(); //captures user input after test
   System.out.println("Would you like to continue (Y/N)?"); //asks question again
   } 
```

while 循环是一个预测试循环，这意味着它在运行内部代码之前测试条件。使用此代码，您正在测试对第一个问题的响应以回答第二个问题。因此，如果您想保留 while 循环，您真正需要做的就是将问题放在循环中一次，如下所示：

```
while (!Anwser.equalsIgnoreCase("Y"))
{    
   System.out.println("Would you like to continue (Y/N)?");
   Anwser = UserInput.next();
} 
```

此外，由于您只是在捕获一个字符，因此可能不是让一个 String 对象来保存一个字符文字，而是尝试一个 char 变量。这是解决方案：

```
char answer = ' ';    
Scanner userInput = new Scanner(System.in);

while (answer != 'N') // check for N to end
{           
   System.out.println("Would you like to continue (Y/N)?");
   answer = Character.toUpperCase(userInput.nextLine().charAt(0));
} 
```

# python - 在 Python 和 Ruby 中“绘制”二叉树的库

> ID：15843921
> 
> 赞同：0
> 
> 时间：2013-04-05T21:29:02.100
> 
> 标签：python, ruby, binary-search-tree

我正在尝试在 Python 和 Ruby 中绘制一些二叉树，我想知道我是否可以（在 Python 中）使用`Tkinter`or来做到这一点`SymPy`。在 Ruby 中，我完全不知道该怎么做。

我要做的是将它显示在窗口中或将其保存到文件中，其中任何一个都可以。

我找不到任何相关的东西，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T21:32:35.580

[GraphViz](http://www.graphviz.org/)产生了一些漂亮的图形（见他们的[画廊](http://www.graphviz.org/gallery/)），并有许多不同的 ruby​​ 和 python 包装器。

# jquery - 对象有没有方法find？

> ID：15843926
> 
> 赞同：0
> 
> 时间：2013-04-05T21:29:14.247
> 
> 标签：jquery, object, find

```
var links = ""
$('#right').load('www.mywebsite.com/download', function(data) {
    data.find(".download-row a").each(function(){
        links += $(this).attr("href");
    });
}); 
```

当我在控制台中运行此代码时，它给了我 Object has no method find 。有什么我没有得到...

我只是想获得那个链接

```
<div class="download-row">
    <a href="http://www.website.com">A website</a>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:43:47.850

您需要将数据包装在 jQuery 对象中才能使用 find() 方法。此外，如果您的链接未定义，您可能希望首先记录您的数据以确保您的 load() 正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T21:57:10.423

好的，我终于明白我做错了什么。

加载函数访问了错误的页面，特别是

```
http://www.mywebsite.com/www.mywebsite.com/download 
```

我不应该输入完整的 URL，只是“下载”

正确的代码：

```
$('#right').load('download', function(data) {
$(data).find(".download-row a").each(function(){
    links += $(this).attr("href");
}); 
```

});

# objective-c - 如何确定空格字符是否不止一次在 NSString 中？

> ID：15843932
> 
> 赞同：0
> 
> 时间：2013-04-05T21:29:49.823
> 
> 标签：objective-c, nsstring, uitextfield

如何确定空格字符是否不止一次在 NSString 中？这似乎是一件简单的事情，但是在查看 NSString 方法时我找不到答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T21:31:16.017

```
([string componentsSeparatedByString:@" "].count - 1) > 1 
```

# ios - 跨应用程序的 iOS 自定义 Unicode 字体

> ID：15843933
> 
> 赞同：2
> 
> 时间：2013-04-05T21:29:50.307
> 
> 标签：ios, unicode, fonts

我正在寻找复制此应用程序中的功能 - [appstore.com/coolfonts](http://appstore.com/coolfonts)

我想使用自定义的 unicode 字体输入文本，然后当我将其复制到 Safari 时，它应该保持相同的字体（您可以在应用程序中看到行为）。

所以很明显我应该使用 unicode 字符，但是有没有像给定字符的字体或者我必须以某种方式转换它们？

我很感激这方面的一些帮助。

谢谢，安德鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T17:02:59.533

经过几天的研究 - 据我所知 - 开发人员有一张英文字符到 unicode 字符的映射，并使用文本视图委托方法在键入时替换它们。因此，为什么它不适用于英语以外的其他语言。

如果有人想出更好的方法 - 让我知道。

# git - 总行后 git push 挂起

> ID：15843937
> 
> 赞同：108
> 
> 时间：2013-04-05T21:30:11.647
> 
> 标签：git, bitbucket

我的 git push 在完成推送后挂起。我要去 git push

```
Counting objects: 51, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (47/47), done.
Writing objects: 100% (47/47), 27.64 MiB | 6.47 MiB/s, done.
Total 47 (delta 4), reused 0 (delta 0) 
```

它挂在这里，我必须控制-c 才能返回命令行。过去我已经对这个项目进行了几次提交，没有任何问题。我在我的机器上尝试了其他存储库，它们工作正常。这里发生了什么？

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2013-04-18T13:32:09.200

事实证明这完全没有问题。我只需要等到上传完成。我添加了几个大文件，但没有进度指示器。也许其他人会发现这很有帮助。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2021-08-09T11:30:06.817

[https://git-scm.com/docs/git-config#Documentation/git-config.txt-httppostBuffer](https://git-scm.com/docs/git-config#Documentation/git-config.txt-httppostBuffer)

> **http.postBuffer**
> 
> 将数据发送到远程系统时，智能 HTTP 传输使用的缓冲区的最大大小（以字节为单位）。对于大于这个缓冲区大小的请求，使用 HTTP/1.1 和 Transfer-Encoding: chunked 来避免在本地创建海量的包文件。默认为 1 MiB，这对于大多数请求来说已经足够了。
> 
> 请注意，提高此限制仅对禁用分块传输编码有效，因此仅应在远程服务器或代理仅支持 HTTP/1.0 或不符合 HTTP 标准的情况下使用。一般来说，提高这个值并不是解决大多数推送问题的有效解决方案，但会显着增加内存消耗，因为即使是小推送也会分配整个缓冲区。

**解析度**

1.  将 Git 缓冲区大小增加到存储库的最大单个文件大小

2.  git config --global http.postBuffer 157286400

3.  参考Git push failed的解决方法——客户端打算为ngnix反向代理配置[发送太大的chunked body。](https://confluence.atlassian.com/bitbucketserverkb/git-push-fails-client-intended-to-send-too-large-chunked-body-779171802.html)将此参数增加到您的存储库的最大单个文件大小。

4.  绕过出站代理，如[由于 git 出站代理而无法克隆或拉取中所述](https://confluence.atlassian.com/bitbucketserverkb/can-t-clone-or-pull-due-to-a-git-outbound-proxy-779171769.html)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2018-03-21T16:04:05.423

它可以（正如公认的答案所暗示的那样）只是等待片刻，但在大多数情况下，它与遥控器上的权限相关联。虽然在 GitHub、Gitlab 或 Bitbucket 等公共 git 服务上大多不是问题，但自托管的*remote*可能有一个特殊的用户，或者一个可以访问的组。

在新的裸存储库上，更改文件夹是不够的，而是需要递归，因为`.git`-Folder 在里面。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-06-24T06:27:12.807

它只在我这样做的情况下对我 `git push -u origin master`有用，当我只是简单地用于`git push`位桶时，它并没有通过。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-11-05T10:45:27.823

等到上传完成对我不起作用。我推了不是很大的文件，但等了足够长的时间，还是挂了。

对我有帮助的是从更新`msysgit 1.9.5`到`git-for-windows 2.6.2`.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-08-24T15:10:16.287

在远程机器上的裸仓库的情况下，权限也可能是导致此问题的原因。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-08-08T02:38:40.943

只是想添加这个以防它对任何人有帮助。我有同样的问题，问题是 git 用户没有写入文件的权限，只能读取它们。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-10-26T05:30:33.783

问题是上传文件很大。

您要么等待它，要么转到您的项目文件夹并删除如果使用 maven，您可以在目标文件夹中找到的所有库。然后进行推送，它会很快发生。

无论如何，库文件夹不需要存储在 git 中，这只是浪费 git 空间，除非并且直到它们在 maven 存储库中不可用并且您确实需要存储它们

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-03-06T17:25:08.500

添加另一个本地提交并重试推送对我有用。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-04-25T07:25:26.130

使用这个命令：

```
git remote add origin <url>
git push -f origin master 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-06-26T17:39:33.220

查看您是否已暂存但未提交更改。( `git status`)

如果是这样，请提交（或取消暂存）这些内容，然后尝试推送。为我工作。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-08-03T11:59:15.237

就我而言，这是由`msysgit 1.9.5`. 降级`msysgit 1.9.4`解决问题。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-05-20T11:50:31.643

就我而言，遥控器有一个完整的磁盘。删除遥控器上的一些文件立即解决了这个问题。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-07-23T15:46:42.030

检查git 正在使用的**用户权限！**

在我的情况下，我尝试通过 ssh 并且使用的系统用户无法写入 git 裸存储库......

[这](https://askubuntu.com/questions/336907/really-verbose-way-to-test-git-connection-over-ssh)是调试 ssh 连接的方法

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-11-19T16:37:18.340

此问题可能是由您的 SSH 代理问题引起的。

我最近遇到了这个问题，因为我将默认 shell 从 更改`zsh`为`bash`. 我最初使用 设置我的 ssh 密钥`zsh`，因此默认情况下它们不可用`bash`，使用`chsh -s /bin/bash`.

要解决此问题，您需要使用与执行 git 命令相同的 shell 脚本（`bash`、`sh`、`zsh`等）将 ssh 密钥添加到 SSH 身份验证代理：

```
eval `ssh-agent`
ssh-add ~/.ssh/some_key_rsa 
```

您需要输入密钥的密码才能添加它。要将密码短语存储到您的用户钥匙串中，这样您就不需要在每次使用钥匙时都输入密码，请将带有`-K`选项的钥匙添加到`ssh-add`命令中。

```
ssh-add -K ~/.ssh/some_key_rsa 
```

请注意大写`K`，因为使用小写是不同的命令选项。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-12-05T02:00:25.713

我在推送到 GitHub 时遇到了同样的问题。我发现被推送的文件的一个子集没有被接受。

我通过将我的大型提交分解为较小的提交来发现这一点（如这个 SO 问题中所述：[将先前的提交分解为多个提交](https://stackoverflow.com/questions/6217156/break-a-previous-commit-into-multiple-commits)），然后在大多数较小的部分中找到成功。

问题片段包含图像文件，我仍在整理出哪个特定文件（或多个文件）触发了问题。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-02-05T07:18:38.133

我想将@Fabio 对原始帖子的评论放在第二位——这为我解决了这个问题。

我在 Raspberry Pi 上运行我自己的临时本地 git 服务器。我忘记`chown`了新的裸仓库，从远程 PC 推送第一次提交只会无限期地挂起。

这修复了它（`chown`以 root 身份运行或使用`sudo`）：

```
cd /srv/git
chown git:git -R <repo_name>.git 
```

替换`<repo_name>`为您的仓库的名称。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-04-10T06:43:51.490

我遇到了同样的问题，结果发现我有一个旧版本（我删除但名称相同）连接到 Heroku 的 repo。当我断开它时，它完成了推送。

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2021-11-03T23:43:16.373

我最近在尝试将大约 40 个文件总共推送大约 2MB 时得到了这个。`git push --verbose`没有显示任何错误，但在`Total <...>`写入终端后会挂起。

我通过 GitHub 重新发布了一个新的 PAT，并且推送按预期进行。

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2021-12-30T13:31:53.673

~~等了两个多小时后，我的 git push 仍然卡住了。所以，我不得不在提交之前重新设置，因为我不小心上传了一张 3.1mb 的照片（我猜这是冻结的罪魁祸首）。~~

我找到了一个更友好的解决方案，上面分享的@aroth`git config --global http.postBuffer 157286400`就是答案。

我刚刚打开了一个新的 iTerm 窗口，运行了上面的命令，然后`git push`在 VSCode 中的终端仍然挂起时运行。然后我`ctrl c`关闭了 VSCode 中的终端会话，我又重新开始工作了。

谢谢@aroth！

* * *

## 回答 #21

> 赞同：-2
> 
> 时间：2022-03-02T13:40:48.793

如果您等待的时间足够长但问题仍然存在，请尝试以下操作：

1 - 使用 CTRL+C（命令 +C）停止进程。

2-对任何文件进行非常小且无效的更改。（供 git 系统检测新文件是否已修改）。

3-按照 git add 和 git commit 步骤并推送您的更改。

```
git add modified_file
git commit -m "new commit message" 
```

4-运行 git push 命令，你会看到它没有任何问题

```
git push 
```

# php - Mac 上 file_exists() 是否区分大小写？

> ID：15843938
> 
> 赞同：8
> 
> 时间：2013-04-05T21:30:17.380
> 
> 标签：php, macos, mamp, file-exists

首先，Mac OS X 不是我的本机操作系统，但因为我对 Ubuntu 很熟悉，所以大部分情况下它是一个简单的过渡。

由于它是基于 Unix 的，我的印象是这个操作系统是区分大小写的，但`file_exists()`函数却另有说明。

在我的 htdocs 文件中，我有这两个文件：

测试.php

MyFileWiThMiXeDCaSe.php

在 test.php 中，我有以下代码：

```
if(file_exists('myfilewithmixedcase.php')) {
  echo 'exists';
} else {
  echo 'doesnt exist';
}

// ouputs: exists 
```

任何人都知道这是如何/为什么会发生的？这导致了一个问题，因为当我们将这样的代码部署到 linux 操作系统时，`file_exists()`返回 false。

顺便说一句：我使用 MAMP PRO 作为本地 Web 服务器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T21:34:12.370

尽管是 BSD 衍生 OS X 不区分大小写。或者更确切地说，HF 和 HFS+ 文件系统不是，除非您在格式化磁盘时选择了区分大小写的选项。通常不会这样做，因为许多应用程序（Adobe、MS 等）都存在此问题 - 或者至少他们在我上次在 Tiger 下尝试时这样做了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T21:31:47.487

OS X 上的默认文件系统是不区分大小写的 HFS+。

您可以将卷格式化为区分大小写的 HFS+，并且有（肮脏的）方法可以为现有卷启用区分大小写。但是，这些会破坏现有软件，您应该避免在根卷上区分大小写。

如果您出于某种原因需要区分大小写的文件系统（例如构建 Android 需要它），您可以使用磁盘工具制作适当格式化的磁盘映像。

请注意，OS X 的 UNIX 基础可以很好地与区分大小写的文件系统一起使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T21:32:26.263

默认情况下，Mac OS X 不区分大小写，因此“FILE”和“file”是同一个文件的两个名称。

# ios - iOS 推送通知适用于开发，但不适用于企业分发

> ID：15843941
> 
> 赞同：15
> 
> 时间：2013-04-05T21:30:44.320
> 
> 标签：ios, push-notification, enterprise-distribution

我在这里阅读了很多帖子，并且整天都在阅读 Apple 文档。这里的所有帖子都没有答案，文档在这个问题上也不清楚。

我们有一个应用程序在使用开发配置文件时接收推送通知，但在我们使用企业分发配置文件时却没有。

为沙盒中的推送通知启用了应用 ID。

证书和两个配置文件都与应用程序 ID 相关联。

如果我构建表单 Xcode 推送通知就可以了。如果我存档并分发服务器返回：

```
[Failed to push 6dje7djksis7hyhdjshsjksjd74jdjskshdjd8dhjjdkwu for reason 8] 
```

这是无效的令牌。

我注意到的一件事是我们的开发配置文件对 aps-environment 具有以下内容：

```
<key>aps-environment</key>
<string>development</string> 
```

虽然 Enterprise 分发配置文件具有：

```
<key>aps-environment</key>
<string>production</string> 
```

当我对我的手机运行调试版本（推送工作）时，.app 文件的权利是：

```
<key>aps-environment</key>
<string>development</string> 
```

当我归档它们时（无论我使用什么配置文件或方案）：

```
<key>aps-environment</key>
<string>production</string> 
```

谁能告诉我这是否是预期的？我在这个网站上找到的其他问题都没有真正说明 Dev 可以工作但 Enterprise Distribution 不能工作的原因。

*为什么归档**总是**使 aps-environment 生产？*

谢谢你的时间。

**更新** 这很有趣。

从：

[http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ProvisioningDevelopment/ProvisioningDevelopment.html](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ProvisioningDevelopment/ProvisioningDevelopment.html)

“您必须为沙盒（开发）环境和生产环境获得单独的证书。证书与作为推送通知接收者的应用程序的标识符相关联；此标识符包括应用程序的捆绑 ID。当您创建配置文件时对于其中一种环境，必要的权利会自动添加到配置文件中，包括特定于推送通知的权利。**这两个配置文件称为开发和分发。分发配置文件是将您的应用程序提交到 App Store 的要求。”**

这可能意味着您不使用分发配置文件，除非您要进行生产。真的吗？这看起来很奇怪，因为您可以在进入应用商店之前制作企业分发配置文件。

有人对此有想法吗？我在文档中找不到任何关于此的具体信息。

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-06T20:03:28.367

您的应用程序有 2 个推送证书。1个用于开发，1个用于生产。查看供应门户的推送证书部分。

因此，无论您使用什么推送机制来发送推送，都需要使用正确的证书进行配置。在您的情况下，企业版本将使用生产/分发证书接收推送。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T13:52:44.150

AppID 的开发和生产版本都需要在 Apple 的“配置文件”网站上启用推送通知。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-07T08:50:20.763

1.  使用生产证书。
2.  使用生产 APN 主机：**gateway.push.apple.com**而不是开发 APN：**gateway.sandbox.push.apple.com**
3.  使用生产 APN 反馈主机：**feedback.push.apple.com**。

更多信息请[点击这里](https://stackoverflow.com/questions/7208669/enabling-apple-push-notifications-for-ad-hoc-distribution-environment)

# cakephp - 使用 IN 关键字动态构建 SQL Where 子句

> ID：15843943
> 
> 赞同：0
> 
> 时间：2013-04-05T21:31:06.520
> 
> 标签：cakephp, cakephp-2.3

我正在使用 cakephp 2.3.0。摘要 - 在我的控制器中，我有一个查询，它返回一个或多个 id 值。然后，我想在下一个查询中使用这些 id 值和 SQL IN 关键字。我从概念上知道我想要完成什么。我认为我在 CakePHP 中这样做是正确的，但我可能是错的。我只是不确定动态构建我的 IN 子句的编码部分。

这是我的控制器中的代码片段：

```
$this->set('userIDs', $this->Activity->ActivitiesOfInterest->find('all',
               array (
                    'conditions' => array ('ActivitiesOfInterest.activities_id' => $id),
                    'fields' => array ('ActivitiesOfInterest.user_id')))); 
```

上面的代码很好，因为我得到了我期望的一个或多个值。在下面的代码中，我对这部分进行了硬编码，array(3, 4)，它相当于 SQL IN 关键字。值 3、4 将存储在 userIDs 数组中。但是，这是我不确定如何从上面代码中的数组动态构建 3 和 4 的值的地方。当然，3 和 4 可能并不总是这些值，因为它只取决于数据库中的内容。我想我需要遍历数组并建立我的 id 列表。我对 CakePHP 还有些陌生，我猜这对于有经验的人来说是一个简单的答案。

而且，是的，根据我的用例，我实际上确实想执行 deleteAll 操作。

```
$this->Activity->ActivitiesOfInterest->deleteAll(
                    array('ActivitiesOfInterest.user_id' => array(3, 4)), false); 
```

谢谢，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T05:04:39.537

您也可以通过对 deleteALL 查询使用子查询来执行此操作。

```
$conditionsSubQuery['ActivitiesOfInterest.activities_id'] = $id;
$db = $this->Financial->getDataSource();
        $subQuery = $db->buildStatement(
                array(
            'fields' => array('ActivitiesOfInterest.user_id'),
            'table' => $db->fullTableName($this->Activity->ActivitiesOfInterest),
            'alias' => 'ActivitiesOfInterest',
            'offset' => null,
            'joins' => array(),
            'conditions' => $conditionsSubQuery,
            'order' => null,
            'group' => null
                ),$this->Activity->ActivitiesOfInterest
        );
        $subQuery = ' ActivitiesOfInterest.user_id IN (' . $subQuery . ')' ;
        $subQueryExpression = $db->expression($subQuery);

        $conditions[] = $subQueryExpression;
        $result = $this->Activity->ActivitiesOfInterest->deleteAll(compact('conditions')); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-05T21:52:52.710

您不需要使用`$this->set()`，除非您需要在视图中使用这些用户 ID；在这里[`Hash::extract()`](http://book.cakephp.org/2.0/en/core-utility-libraries/hash.html#Hash%3a%3aextract)可能会有所帮助。

```
// Find the user-ids
$result = $this->Activity->ActivitiesOfInterest->find('all', array (
    'conditions' => array (
        'ActivitiesOfInterest.activities_id' => $id
    ),
    'fields' => array (
        'ActivitiesOfInterest.user_id'
    )
));

if ($result) {
    // 'extract' just the user-ids from the results
    $userIds = Hash::extract($result, '{n}.ActivitiesOfInterest.user_id');

    $this->Activity->ActivitiesOfInterest->deleteAll(
        array(
            'ActivitiesOfInterest.user_id' => $userIds
        ),
        false
    );
} 
```

# actionscript-3 - 在 as3 中添加向自身添加更多动画剪辑的动画剪辑时出错

> ID：15843947
> 
> 赞同：0
> 
> 时间：2013-04-05T21:31:30.277
> 
> 标签：actionscript-3, flash

```
package  
{
    import flash.display.*;

    public class documentclass extends MovieClip
    {
        public var playscreen:avoiderclass;

        public function documentclass() 
        {
            playscreen.addEventListener(playerEvent.DEAD, onplayerdeath);
            playscreen.x = 0;
            playscreen.y = 0;
            playscreen = new avoiderclass();
            addChild(playscreen);
        }
        public function onplayerdeath(PlayerEvent:playerEvent):void
        {
            var Gameover:gameover = new gameover();
            Gameover.x = 0;
            Gameover.y = 0;
            addChild(Gameover);

            playscreen = null;
        }
    }

} 
```

好的，当舞台（这个类）是将玩家和敌人的电影剪辑拉入其中的类时，它起作用了。然后我为舞台添加了这个并将另一个用于播放屏幕......我不知道为什么它不起作用，但谁能给我任何可能为什么它不起作用，没有错误弹出......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T21:42:51.467

您必须将变量 playscreen 设置为一个新的避免类对象，如下所示：

```
 playscreen = new avoiderclass(); 
```

在做之前..

```
 playscreen.addEventListener(playerEvent.DEAD, onplayerdeath);
        playscreen.x = 0;
        playscreen.y = 0; 
```

请尝试这种方式。

```
public class documentclass extends MovieClip {
    public var playscreen:avoiderclass;

    public function documentclass(){
        // construct the object first
        playscreen = new avoiderclass();
        // then manipulate it.
        playscreen.addEventListener(playerEvent.DEAD, onplayerdeath);
        playscreen.x = 0;
        playscreen.y = 0;
        addChild(playscreen);
    } 
```

在该功能中，不要忘记从显示列表中删除播放屏幕

```
 public function onplayerdeath(PlayerEvent:playerEvent):void {
        var Gameover:gameover = new gameover();
        Gameover.x = 0;
        Gameover.y = 0;
        addChild(Gameover);
        // first remove the playscreen from display list
        removeChild(playscreen);
        // then set it to null, now really unreachable and eligible for gc
        playscreen = null;
    }
  }
} 
```

# c# - WMI 查询不返回任何内容

> ID：15843948
> 
> 赞同：2
> 
> 时间：2013-04-05T21:31:31.650
> 
> 标签：c#, wmi, wmi-query

我正在使用 WMI 进行查询以检查特定的驱动器号，如果它不存在，那么我想运行一个方法来使用特定设置创建它。现在我面临的问题是当我发送测试查询以查看驱动器号是否存在时，它返回空。没有错误或异常。

我将如何处理这种情况？

谢谢

```
ManagementObjectSearcher searcher =
                      new ManagementObjectSearcher("root\\cimv2",
                      @"SELECT * FROM Win32_Volume Where DriveLetter = '" + DriveLetter + "'");
                foreach (ManagementObject queryObj in searcher.Get())
                {
                    drives.CurrentDriveLetter = queryObj["DriveLetter"] == null ? "null" : queryObj["DriveLetter"].ToString();
                    drives.CurrentDriveSize = queryObj["Capacity"] == null ? "null" : queryObj["Capacity"].ToString();
                    drives.CurrentDriveName = queryObj["Label"] == null ? "null" : queryObj["Label"].ToString();

                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T00:16:06.303

根据您的评论，您只需要确定该[`ManagementObjectSearcher.Get`](http://msdn.microsoft.com/en-us/library/67a77ef1.aspx)方法返回的集合是否包含元素。为此，您可以使用该[`Count`](http://msdn.microsoft.com/en-us/library/system.management.managementobjectcollection.count.aspx)属性。

试试这个示例代码

```
using System;
using System.Collections.Generic;
using System.Management;
using System.Text;

namespace GetWMI_Info
{
    class Program
    {

        static void Main(string[] args)
        {
            try
            {
                ManagementScope Scope;                
                Scope = new ManagementScope(String.Format("\\\\{0}\\root\\CIMV2", "."), null);
                Scope.Connect();
                ObjectQuery Query = new ObjectQuery("SELECT * FROM Win32_Volume Where DriveLetter='X:' ");
                ManagementObjectSearcher Searcher = new ManagementObjectSearcher(Scope, Query);
                if (Searcher.Get().Count==0)                
                {
                    Console.WriteLine("Do something, when the collection is empty.");                
                }
                else
                foreach (ManagementObject WmiObject in Searcher.Get())
                {
                    Console.WriteLine("{0} {1}","Name",WmiObject["Name"]);// String

                }
            }
            catch (Exception e)
            {
                Console.WriteLine(String.Format("Exception {0} Trace {1}",e.Message,e.StackTrace));
            }
            Console.WriteLine("Press Enter to exit");
            Console.Read();
        }
    }
} 
```

# php - 用户登录的 SQL 代码

> ID：15843949
> 
> 赞同：-1
> 
> 时间：2013-04-05T21:31:34.937
> 
> 标签：php, html, sql, sql-server

我试图学习 SQL 来进行用户登录，现在我得到了一些开源，我上网了解更多的语言并尝试从示例中学习。

现在我无法弄清楚本地主机；我的意思是我尝试添加表（命名用户），我只添加了 3 个详细信息：

```
Name      | Data Type | Default Value | Is Primary Key? | Is Identity? | Allow Nulls
Localhost | nvarchar  | Null -------- | No ------------ | No --------- | Yes
user      | nvarchar  | Null -------- | No ------------ | No --------- | Yes
pass      | nvarchar  | Null -------- | No ------------ | No --------- | Yes 
```

--- 不是代码的一部分，它只是为了在表中排序:)。

无论如何，这是我的代码：

```
<?php

// Edit your mssql info here
// BEGIN MSSQL INFO
$CONFIG['host'] = "localhost";
$CONFIG['user'] = "sa";
$CONFIG['pass'] = "server";
// END MSSQL INFO

//----------------------------- DO NOT EDIT ANYTHING BELOW HERE !!!!! ------------------------------------

$CONFIG['conn']  = mssql_connect( $CONFIG['host'], $CONFIG['user'], $CONFIG['pass']);

function anti_injection($sql) {
   $sql = preg_replace(sql_regcase("/(from|select|insert|delete|where|drop table|show tables|#|\*|--|\\\\)/"),"",$sql);
   $sql = trim($sql);
   $sql = strip_tags($sql);
   $sql = addslashes($sql);
   return $sql;
}
?>

<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>Test</title>
    </head>
    <body>
    <?php
    if(isset($_GET['action']) && ($_GET['action'] == "login")){

        $user = anti_injection($_POST['user']);
        $pass = anti_injection($_POST['pass']);
        $crypt_pass = md5($pass);

        $result1 = mssql_query("SELECT * FROM account.dbo.user_profile WHERE user_id = '".$user."'"); 
        $count1 = mssql_num_rows($result1); 

        $result2 = mssql_query("SELECT user_pwd FROM account.dbo.user_profile WHERE user_id = '".$user."'"); 
        $row2 = mssql_fetch_row($result2); 

        if($count1 == '0') {
            echo '<br>This game account is not found in the database.';
        }
        elseif($row2[0] != $crypt_pass) {
            echo '<br>Wrong password. Try again.';
        }
        elseif($_GET['login'] != 'login' && $count1 == '0') {
            echo '<br>Login Error, Please login again.';
        } else {

        // Begin secure content 
            $_SESSION['user'] = $user;
            echo "<h3>Welcome, ".$_SESSION['user']."</h3>";
            echo "<br>";
            echo "Your content here";
        // Dont forget to and your session
        // session_destroy();
        // End secure content
        }
    } else {

    echo '<h2>Login here</h2><br /> 
        <form name="" action="'.$_SERVER['php_self'].'?action=login" method="post"> 
            Name: <input type="text" name="user" maxlength="16"><br /> 
            Password: <input type="password" name="pass" maxlength="16"> <br />
            <input type="submit" value="Login!"> 
        </form>';
    }
    ?>
    </body>
</html> 
```

正如我所说，我真的不知道如何在表格和代码之间建立联系。

你可以解释吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:58:05.667

使用`mysql_real_escape_string()`（[手动](http://www.php.net/manual/en/function.mysql-real-escape-string.php)）保护您免受 SQL 注入

您与数据库的连接保存在一个变量中，您必须像这样将其添加到您的查询中

```
$result1 = mssql_query("Your Query", $CONFIG['conn']);
$count1 = mssql_num_rows($result1); 
```

# arrays - 将多字字符串分配给 bash 数组元素

> ID：15843951
> 
> 赞同：-1
> 
> 时间：2013-04-05T21:31:38.817
> 
> 标签：arrays, bash

我的目标是从字符串中取出第一个单词并将其分配给 bash 数组，`FIRSTWORD{i]`然后取出字符串的其余部分并将其放入另一个数组中，`REST[i]`其中`i`是整数计数器。

我试过这种方法：（注意：严格来说`tmp`只是为了调试）

**更正：**我将索引从`string`变量中删除。应该是`string[1]`和`string[2]`。

```
string[1]="One Two Three Four"
string[2]="Five Six Seven Eight"
# etc etc

for ((i=0; i < ${#string[@]}; i++ ))
do
   set -- ${string[i]}
   FIRSTWORD[i]=$1  
   tmp="${*:2}" 
   REST[i]=$tmp
   echo $tmp
   echo ${REST[i]}
done 
```

`REST[i]`结果等于`"Two"`但`tmp`等于`"one tswo three"`

所以我尝试了：

```
IFS=$'\n';  REST[i]="${*:2}"; IFS=$' '; 
```

没有喜悦。

那么，我该如何完成这个任务呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:52:04.307

找到了我的答案。我变了：

```
REST[i]=$tmp 
```

到

```
REST[i]="$tmp" 
```

现在，读入 rest 的数据保持在一起。

我认为这与 bash 以及命令行拆分和通配数据有关。

# c - 第一个 tcp echo 客户端无法与第二个 tcp echo 客户端通信（错误的文件描述符）

> ID：15843952
> 
> 赞同：0
> 
> 时间：2013-04-05T21:31:45.433
> 
> 标签：c, sockets, tcp, network-programming

我的应用程序是多用户回声聊天程序。如果客户端发送消息，服务器将发送给所有客户端，包括消息来源的客户端。它在 c 中实现。

服务器为每个新的客户端连接分叉一个进程。所有子进程都可以访问存储在共享内存中的所有客户端的套接字描述符

当有一个客户端时，消息会正确回显。当第二个客户端加入并发送消息时，它会正确地回显给两个客户端。

当第一个客户端发送消息时，它会正确地传输回第一个客户端。但是当尝试将该消息发送到第二个客户端时，它失败并出现错误*文件描述符错误*

同样，每个客户端都可以向之前连接的客户端和自身发送消息，但不能向后来连接的客户端发送消息

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:34:28.607

访问套接字描述符并不意味着您可以访问套接字。您需要共享套接字本身，而不是它们的描述符。

此外，两个进程试图同时在同一个 TCP 连接上发送的结果是不确定的。例如，数据可能是交错的。

所以你的设计基本上是坏的。

您实际上可以共享套接字。你如何做到这一点取决于平台。您还需要使用某种形式的 IPC 来仲裁哪个进程可以写入套接字。例如，您可以为每个套接字使用一个信号量。

# android - 无法在新活动中出现

> ID：15843956
> 
> 赞同：2
> 
> 时间：2013-04-05T21:32:06.717
> 
> 标签：android

活动正在打开，但没有显示任何内容，我尝试将文本设置为新活动中的编辑文本，但活动根本无法打开

我是新手，所以不知道我做错了什么

```
 @Override 
          public void onClick(View v) {
        if
        (edtNumber1.getText().toString().equals("")|| edtNumber2.getText().toString().equals(""))
        {
        Toast msg = Toast.makeText(getBaseContext(),"Enter number please",Toast.LENGTH_LONG);
        msg.show();
        }

        else
        {
         a = Float.parseFloat(edtNumber1.getText().toString());
         b = Float.parseFloat(edtNumber2.getText().toString());
         spinner = (Spinner) findViewById(R.id.spinner1);
         selectedItem = (String) spinner.getSelectedItem();

            if (selectedItem.trim().equals("100mm")) {
                Total =  (int) (a * b * 10);
            }

            else if (selectedItem.trim().equals("215mm")) {
                Total =  (int) (a * b * 20);
            }

            else if (selectedItem.trim().equals("325mm")) {
                 Total =  (int) (a * b * 30);
            }
                Intent intent = new Intent(calculate.this,
                        BlAmounts.class);
                intent.putExtra("Result",Total);
                startActivity(intent);

            }

                   }
              });`
     }

 } 
```

第二个活动

```
protected void onCreate(Bundle savedInstanceState) {
    EditText answer = (EditText) findViewById(R.id.needed); 

    super.onCreate(savedInstanceState);
    setContentView(R.layout.materials_needed);
    Intent sender = getIntent();
            int result = sender.getExtras().getInt("Result");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:46:37.487

**首先**你应该放在`EditText answer = (EditText) findViewById(R.id.needed);`后面`setContentView(R.layout.materials_needed);`

**其次**，您没有为`answer`编辑文本设置任何值。试试这个：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.materials_needed);
    EditText answer = (EditText) findViewById(R.id.needed);
    Intent sender = getIntent();
            int result = sender.getExtras().getInt("Result");
    answer.setText(result+"");
} 
```

# javascript - 如何在中间件中使用 Y.mojito.models？

> ID：15843965
> 
> 赞同：0
> 
> 时间：2013-04-05T21:32:38.500
> 
> 标签：javascript, node.js, yui, middleware, mojito

我将 nodejs 与 mojito mvc 框架一起使用。

我可以从中间件访问一些全局变量吗？如何在中间件中使用 Y.mojito.models？

```
// ./middleware/mymiddleware.js
module.exports = function (req, res, next) {

    // How to use Y?
    //Y.log('fails');
    //Y.mojito.models['MyModel'].fetch(function(err, data) {
    //    next();
    //});
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T21:59:09.430

我强烈建议不要尝试这样做。这些是快速中间件，他们应该做一个快速的工作，有时是异步的工作，但通常，如果请求是由 mojito 调度引擎处理的，你不应该尝试访问中间件中的运行时组件。

话虽如此，有一个内部 API（我再次强烈建议不要使用）可以让您访问全局 Y，它在服务器端保存所有 YUI 模块。像这样的东西：

```
module.exports = function (config) {
   // then `config.Y.mojito.models['MyModel'].fetch()` is available here
   return function (req, res, next) {
      next();
   }
}; 
```

除此之外，如果您正在寻找一种共享模型或公开全局模型的方法，您应该查看 mojito-models-addon`expose`方法。

同样，这`config.Y`件事是私人的，我们可能随时改变它。

*更新：在 mojito 中有两种类型的中间件，传统`express`中间件和 mojito 中间件，它们必须以 为前缀`mojito-`，并且这些中间件应该公开一个接收`config`和返回过渡`express`中间件的函数。没有前缀，它只会在没有准备的情况下按请求调用。*

# windows-8 - Windows 8 商店证书：上传的应用程序包因认证而无效（发布者 ID）

> ID：15843968
> 
> 赞同：6
> 
> 时间：2013-04-05T21:32:55.873
> 
> 标签：windows-8, microsoft-metro, windows-store-apps

尝试将我的应用上传到 Windows 8 商店时收到以下错误：

> 验证错误：应用清单中Identity元素的Publisher属性与您的发布者ID不匹配，即：CN=XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX

我使用错误消息中显示的发布者 ID 手动更新了应用程序清单文件。但是，当我第二次将文件上传到商店时，我提供的值最终被覆盖了。

总之，由于证书问题，我无法将我的解决方案上传到 Windows 8 商店。

请帮忙。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T21:48:45.973

这里没有太多可做的。我怀疑你可能错过了一步。您是否将您的应用程序与 Windows 应用商店相关联？

为此，请在 Visual Studio 的解决方案资源管理器中右键单击您的项目。选择*Store* --> *Associate App With the Store...*然后按照出现的对话框进行操作。

# html - 如果缓存日期超过某个日期，则告诉浏览器更新缓存

> ID：15843970
> 
> 赞同：5
> 
> 时间：2013-04-05T21:33:07.283
> 
> 标签：html, css, caching, metadata, browser-cache

是否有元标记或我可以使用的东西告诉浏览器不要使用某个日期之前的缓存。

例如

`<meta "only use cache if cache is AFTER 4/4/2013">`

如果缓存是旧的，则需要下载所有新的 Javascript、CSS、图像等。

我对站点进行了很多更新，然后它搞砸了仍然有缓存的任何人（你不能指望他们知道按 ctrl+f5 或 ctrl+r）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T21:39:43.043

我通常只是在最后添加一个 get 参数以及我向他们展示的脚本版本

所以如果你有你的javascript

```
www.example.com/script.js 
```

使用网址

```
www.example.com/script.js?foo=1 
```

当我每次都增加 foo 的值时，这会强制浏览器重新获取脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T03:10:34.960

仅在特定日期之后设置缓存没有元标记，但如果您使用任何服务器语言（PHP、.NET、ruby、phyton），您可以将缓存控制设置为无缓存，然后动态设置标题以启动在某个日期后缓存。

例如使用 PHP：

```
<?php
$cdate = date('Ymd');
if ($date > '20130404') {
  header('Cache-Control: max-age=28800'); //cache lifetime to 8 hours
} else {
  header("Cache-Control: no-cache, must-revalidate"); // HTTP/1.1
  header("Expires: Sat, 26 Jul 1997 05:00:00 GMT"); // Date in the past
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T21:41:12.333

这是从带有 ExpiryDates 的 .htaccess 文件配置的

（下面是我的示例。我的主机运行 PHP / Apache 服务器 - 000webhost.com）

```
<IfModule mod_expires.c>

# Enable expirations
ExpiresActive On

# My favicon
ExpiresByType image/x-icon "access plus 1 year"

# Images
ExpiresByType image/gif "access plus 1 month"
ExpiresByType image/png "access plus 1 month"
ExpiresByType image/jpg "access plus 1 month"
ExpiresByType image/jpeg "access plus 1 month"
ExpiresByType text/css "access plus 1 week"

# Javascript
ExpiresByType application/javascript "access plus 1 year"

</IfModule> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-14T02:52:10.807

最近我一直在思考这个问题。我最近开始使用 Leaflet 地图和 GEOJSON（一个带有地理信息的 JSON 文件）。一些 GEOJSON 文件非常大，所以如果数据没有更改，我不想强​​制重新下载数据，但是当我正在开发地图时，我可能会修改其他 JS、GEOJSON 或 CSS文件，所以我希望下载修改后的数据。我只是希望新数据在那里。所以，我想出了这个场景：

1.  重命名所有更改的 JS、GEOJSON 和 CSS 文件。
2.  根据需要编辑对文件的调用（SCRIPT 标记），并使用新名称保存调用 HTML 文件。
3.  将原始页面编辑为元重定向到新页面。

使用此方法应仅加载更改的数据，而不是强制重新下载未更改的（和缓存的）数据。

# ruby-on-rails - Ruby on Rails：在创建单独的模型后可能/最好实现单表继承？

> ID：15843971
> 
> 赞同：0
> 
> 时间：2013-04-05T21:33:07.503
> 
> 标签：ruby-on-rails, refactoring, single-table-inheritance

我在我的介绍性 Ruby on Rails 类中构建了一个简单的地址簿应用程序，它使用单个控制器 (Entry) 使用嵌套表单为街道地址 (Address)、电子邮件地址 (Email) 和 Web 地址 (Web) 提供了单独的模型。我现在想更改最后两个模型（电子邮件和 Web）以使用来自基本 Url 表的单表继承。与使用正确的继承关系从头开始重建应用程序相比，这是否更可取（甚至可能）？

我在下面包含了我现有的模型：

```
class Entry < ActiveRecord::Base
  attr_accessible :first_name, :last_name, :addresses_attributes, :webs_attributes, :emails_attributes
  has_many :addresses, dependent: :destroy
  has_many :emails, dependent: :destroy
  has_many :webs, dependent: :destroy
  accepts_nested_attributes_for :addresses, :emails, :webs, allow_destroy: true, reject_if: :all_blank
end

class Address < ActiveRecord::Base
  belongs_to :entry
  belongs_to :address_type
  attr_accessible :address_type_id, :city, :state, :street, :zip
end

class Email < ActiveRecord::Base
  belongs_to :entry
  belongs_to :address_type
  attr_accessible :address_type_id, :email, :entry_id
  validates_email_format_of :email
end

class Web < ActiveRecord::Base
  belongs_to :entry
  belongs_to :address_type
  attr_accessible :address_type_id, :web, :entry_id
end 
```

会怎么变

```
class Email < ActiveRecord::Base 
```

和

```
class Web < ActiveRecord::Base 
```

到

```
class Email < Url 
```

和

```
class Web < Url 
```

影响我现有的应用程序？

提前感谢您的帮助和建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T22:00:08.533

确保还添加 `Url`继承该类的`ActiveRecord::Base`类。

```
class Url < ActiveRecord::Base
  belongs_to :entry
  belongs_to :address_type
  attr_accessible :address_type_id :entry_id
end

class Email < Url
  attr_accessible :email
  validates_email_format_of :email
end

class Web < Url
  attr_accessible :web
end 
```

还将额外的行添加到您的`entry.rb`：

```
 has_many :urls, dependent: :destroy 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T21:01:11.353

可以生成一个设置单表继承的迁移，但不幸的是，如果不破坏我的应用程序中的其他内容，我无法成功地做到这一点。我继续使用新应用程序重新启动并正确实现了正确的继承。这符合时间和从头开始构建应用程序的实践。在现实世界的环境中，我相信花时间创建适当的迁移和对各种依赖项的更改是值得的。

感谢 Zippie 的建议。我很感激。

# function - Oracle 11g 创建函数失败

> ID：15843978
> 
> 赞同：0
> 
> 时间：2013-04-05T21:33:34.067
> 
> 标签：function, oracle11g

我正在尝试在 oracle 中为我的课程计划创建一个简单的函数，但看不到我做错了什么。

```
CREATE OR REPLACE FUNCTION ten_pct(num1 IN NUMBER) 
RETURN NUMBER
IS
BEGIN
RETURN (num1 * 0.1);
END; 
```

我尝试过声明一个变量并将其设置为等于等式并返回它并得到相同的错误。

错误（2,14）：PLS-00103：在预期以下情况之一时遇到符号“”：。@%; 使用外部字符确定性并行启用流水线聚合结果缓存符号“”被忽略。

我希望有人看到我的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T00:04:27.997

该代码适用于我的机器

```
SQL> CREATE OR REPLACE FUNCTION ten_pct(num1 IN NUMBER)
  2  RETURN NUMBER
  3  IS
  4  BEGIN
  5  RETURN (num1 * 0.1);
  6  END;
  7  /

Function created. 
```

实际上，您在此处发布的代码与您实际尝试运行的代码之间存在一些差异。

# android - 多个 Spinner 在 OnCreate 中调用 setOnItemSelectedListener

> ID：15843979
> 
> 赞同：0
> 
> 时间：2013-04-05T21:33:36.433
> 
> 标签：android

如何在单个布局中使用多个微调器，即在创建时设置设置 On Item Selected Listener

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T22:36:02.623

欢迎来到 SO。您绝对应该阅读[常见问题解答](https://stackoverflow.com/faq)以了解要问什么样的问题以及如何问。如果您想要好的答案并且不希望您的权限被撤销，您需要更具体地说明您的问题并添加相关代码和错误消息以表明您已经尝试过。但既然你是新来的，我就给你这个。最简单的方法是在通过 xml`onCreate()`获得对每个的引用后将侦听器附加到每个`spinner`

```
spinner1.setOnItemSelectedListener(this);
spinner2.setOnItemSelectedListener(this; 
```

然后把方法放在外面`onCreate()`

```
@Override
public void onItemSelected(AdapterView<?> parent, View view, int arg2,
        long arg3) 
{
    // do whatever you need here depending on what is selected
    // you can use a case statement and switch on the id to get the spinner (parent) or view

}

@Override
public void onNothingSelected(AdapterView<?> arg0) {
    // TODO Auto-generated method stub

} 
```

并添加`Implements OnItemSelectedListener`您的`Activity`签名。祝你好运，请在以后提出更具体的问题，并添加代码表明你已经尝试过了。

# php - PHP SQL QUERY - 使用查询过滤，项目的多个值

> ID：15843981
> 
> 赞同：0
> 
> 时间：2013-04-05T21:33:41.117
> 
> 标签：php, mysql, json

我学习 PHP/MySQL 已经有一段时间了，还没有学到太多，因为我专注于 iPhone 开发以及处理我的全职工作。

我正在构建一个消息传递客户端，使用 JSON 来提取新消息和一个聊天窗口......我正在处理的部分是从我的数据库中获取信息。我希望在此请求中获取人与人之间的所有消息（即：FromUser 和 ToUser），然后以 JSON 格式显示它们，但是由于某种原因我无法正确以 JSON 格式显示它。

这是我的例子

```
<?php 
 $enduser = $_GET['usernameto'];
$enduser1 = $_GET['usernamefrom'];
$db = mydatabase;
$con = mysql_connect("localhost","admin","password");
if (!$con)
  {
   die('Could not connect: ' . mysql_error());
  }
mysql_select_db($db, $con);
   $arr = array();
       //Execute the query
      $rs = mysql_query("SELECT * FROM messages WHERE touser = '$enduser' AND fromuser = '$enduser1'");
        $rs1 = mysql_query("SELECT * FROM messages WHERE touser = '$enduser1' AND fromuser = '$enduser'");

        // Add the rows to the array 
       while($obj = mysql_fetch_object($rs)) {
        $arr = $obj;
        } 

    // Add the rows to the array 
   while($obj1 = mysql_fetch_object($rs1)) {
   $arr1 = $obj1;
   }

  echo '{"users":'.json_encode($arr).' '.json_encode($arr1).'}';
// echo ''.json_encode($arr).'';
mysql_close($con);
?> 
```

现在这确实显示了所有消息，例如 FromUser= user1 ToUser= user2 并且还显示 Fromuser= user2 和 toUser = User1。在两个单独的 JSON 列表中，但我希望将它们拉到一个简单的 JSON 列表中，如果可以做到，那将是惊人的，我知道它必须放在我的查询部分......

我也知道我的代码存在大量漏洞和问题，这些漏洞和问题并不“干净”，但是暂时不需要遵循这些方法，直到我去学习如何遵循 SQLi 和 Real Escape 字符串/注入。 ...

谢谢 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T21:38:36.307

关于学习 SQL 注入的评论是正确的，但您可以在一个查询中获取消息：

```
SELECT * FROM messages WHERE (touser = '$enduser' AND fromuser = '$enduser1') OR (touser = '$enduser1' AND fromuser = '$enduser') 
```

这应该选择您要查找的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T21:39:14.587

您的问题非常分散，但我认为您只需将两个结果数组与

```
$combined = array_merge($arr, $arr1); 
```

或者更改您的查询，使其同时提取两组数据。但正如 Marc B 所说，你真的需要养成避免 SQL 注入的习惯，这很容易。

# java - 安装插件时 ADT 恢复为标准 Eclipse

> ID：15843982
> 
> 赞同：1
> 
> 时间：2013-04-05T21:33:45.050
> 
> 标签：java, android, eclipse, plugins, adt

我正在使用从 Android Dev 站点下载的 Eclipse 的 ADT。每次我安装插件并重新启动 ADT 时，启动画面都会从[这个](http://lh4.ggpht.com/-GqCgKpPGDRg/ULgh19NsL7I/AAAAAAAAGO0/Mj5T8I2mDoA/adt-splash_thumb%25255B2%25255D.png?imgmax=800)（ADT 启动画面）恢复到 http://www.stuermer-benjamin.de/v12_1/wp-content/uploads/2012/08/001_launch_eclipse_4.2_juno .jpg&w=905&h=">this (The vanilla Eclipse splash). 应用程序加载后，我的面板布局方式恢复为默认值，UI 看起来不像这样的常规 Eclipse 界面[，](http://marketplace.eclipse.org/sites/default/files/Juno.png?1340832628)而是元素是灰色和四四方方的。然后插件永远不会工作 - 当我尝试执行插件应该处理的操作时，我收到一个错误消息弹出窗口。

我尝试使用的任何插件都发生过这种情况（来自“帮助”>“安装新软件...”对话框）。每次我不得不删除并重新创建我的 Eclipse 程序文件夹时重新下载。有谁知道出了什么问题以及如何正确修复/安装插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:16:11.960

这是一个错误，在这里报告：[http ://code.google.com/p/android/issues/detail?id=41126](http://code.google.com/p/android/issues/detail?id=41126)

**编辑：**已解决：[http ://code.google.com/p/android/issues/detail?id=41126#c73](http://code.google.com/p/android/issues/detail?id=41126#c73)

# android - 服务中的两个侦听器 (android)

> ID：15843993
> 
> 赞同：1
> 
> 时间：2013-04-05T21:34:27.557
> 
> 标签：android, listener, android-service

首先，对不起我的英语。我很抱歉文字很大。我只是想详细描述一下。

我的一点故事：

> 我是 Android 新手。我有一些编程背景（一些 Python，一些 C++）。我首先读了一本关于 Java 的书。然后我读了一本关于 Android 的书（只有几页 =））

所以，我的程序的**目标**：

在后台运行（这里我使用了服务）PhoneCallListener。当有来电时，我使用 SensorEventListener，并做一些神奇的事情。

我是如何意识到的：...

```
public class mbackground extends Service{

public int onStartCommand(Intent intent, int flags, int startId){

    PhoneStateListener phoneStateListener = new PhoneStateListener();
    TelephonyManager telephonyManager = (TelephonyManager) this
            .getSystemService(Context.TELEPHONY_SERVICE);
    telephonyManager.listen(phoneStateListener,PhoneStateListener.LISTEN_CALL_STATE); 
```

然后我尝试在这里使用“ *public class phoneCallListener extends PhoneStateListener{* ”

以及PhoneStateListener的一些方法

```
public void onCallStateChanged(int state, String incomingNumber){ do some things } 
```

这里我有一个问题：由于某种原因，编译器不喜欢定义类 phoneCallListener 中的 public ...然后，我如何在 PhoneStateListener 的方法之一中使用 Sensor Listener **？**

我试图在谷歌中查找信息。诚实地。

我不知道在那种情况下如何正确使用监听器。我发现了一些类似的问题，但是没有使用类**扩展**和一些抽象方法的监听器。

谢谢阅读！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T22:05:54.827

在`onStartCommand`

```
PhoneStateListener phoneStateListener = new PhoneStateListener(); 
```

应该

```
phoneCallListener phoneStateListener = new phoneCallListener(); 
```

# ruby-on-rails - 移除嵌套的属性栏

> ID：15843996
> 
> 赞同：0
> 
> 时间：2013-04-05T21:34:32.830
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested-attributes, destroy

我有一个 Post 模型

```
has_many photos 
```

Post 模型有

```
accepts_nested_attributes_for :photos 
```

在我的帖子编辑表单中，我显示了当前与帖子关联的所有图像

```
<% for photo in @post.photos %>
  <%= image_tag(photo.avatar.url(:thumb)) %> <%= link_to "Remove Photo", post_photo_path(@post, photo), :method => :delete %>
<% end %> 
```

将鼠标悬停在“删除照片”链接上时，路径如下所示

```
http://localhost:3000/posts/17/photos/45 
```

我得到未初始化的常量 PhotosController，但这是意料之中的，因为没有。

我的问题是我是否创建一个并在那里进行破坏操作，只会删除该照片..这是解决方法还是有更好的方法？

编辑

照片控制器

```
 def destroy
  @photo = Photo.find(params[:id])
  @photo.destroy
  redirect_to edit_post_path, :notice => "Successfully deleted Photo"
 end 
```

路线

```
resources :posts do
resources :photos
resources :departments
end 
```

耙子路线

```
edit_post GET    /posts/:id/edit(.:format) 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T22:04:43.420

您描述的选项，调用`destroy`a 的动作`PhotosController`，肯定会成功，并且可能是更简单和更快的解决方案。请注意，如果用户对帖子的其他方面进行了更改，然后单击链接以删除同一表单中的照片，则他们的更改可能会丢失。但是，使用 AJAX 可能有助于缓解这种担忧。

另一种选择是利用 rails 对嵌套表单的现有支持。因为您已经在使用嵌套表单，而`accepts_nested_attributes_for`您已经完成了一半。如果您还没有看到这个，请查看 Ryan Bates 在嵌套表单上的播客：

[http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)
[http://railscasts.com/episodes/197-nested-model-form-part-2](http://railscasts.com/episodes/197-nested-model-form-part-2)

如果你愿意付钱（相信我，这是值得的），修改后的解决方案会更好一些：
[http ://railscasts.com/episodes/196-nested-model-form-revised](http://railscasts.com/episodes/196-nested-model-form-revised)

您感兴趣的肉和土豆是在播客的中间到末尾，Ryan 使用`_destroy`嵌套元素参数中的隐藏字段向控制器指示，而不是当父对象更新时，嵌套关联应该是被摧毁。

您还可以找到一个现成的 gem，它包含了 Ryan 从头开始​​实现的相同 Rails/Javascript 功能。我过去用过[茧](https://github.com/nathanvda/cocoon)，非常满意。

这种技术稍微复杂一些，但在这种情况下我更喜欢它，因为表单的重点是修改帖子，而不是照片。在第一个解决方案中，您必须将`PhotosController#destroy`操作重定向回表单。或者，如果您使用 AJAX，那么您将不得不编写适合您的 Post HTML 布局的 javascript，以便在元素被销毁后正确隐藏/删除该元素。这对于小型应用程序可能没问题，但是随着项目的增长，您可能会发现自己尝试将其`PhotosController`用于其他工作流程，并且可能会变得难以维护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T21:53:35.520

我的观点是，最好的办法是创建一个`PhotosController`来处理销毁动作。这样，您将保留单一职责原则，并减少添加自定义路由的解决方法。

`PostsController`此外，如果您确实确定不会添加与照片相关的任何其他操作（例如标记照片或其他），则可以选择将该操作放入其中。

这真的取决于你，但我相信第一个更容易。

如果您选择第二个选项，请务必在 中为销毁照片操作创建路线，`PostsController`并且链接应指向该确切操作。

你的`routes.rb`：

```
resources :posts do
   resources :photos, :only => [:destroy]
   resources :departments
end 
```

# tsql - 插入多行整数的最有效方法

> ID：15843997
> 
> 赞同：-1
> 
> 时间：2013-04-05T21:34:34.020
> 
> 标签：tsql

我有 2 个简单的选择查询来获取我的 id 列表。我的第一个表返回让我们说 5 个 ID。1、2、5、10、23

我的第二个表返回 50 个 id 的列表，没有任何顺序。

编写查询以将第一个表中的每个 id 映射到第二个表中的所有 id 的最有效方法是什么？

编辑：对不起这里有更多信息。

如果表 1 的结果为 ids = 1、2、5、10、23，而表 2 的结果为 ids = 123、234、345、456、567

我想写一个插入表 3 这些值

```
 Table1ID | Table2ID
         1|123 
         1|234
         1|345
         1|456
         1|567
         2|123 
         2|234
         2|345
         2|456
         2|567 
```

等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T22:32:03.747

It seems like what you are looking for is a Cartesian Product.

You can accomplish this simply by joining the two tables together with no join condition, which is accomplished by `CROSS JOIN`.

```
INSERT dbo.TableC (AID, BID)
SELECT A.ID, B.ID
FROM
   dbo.TableA A
   CROSS JOIN dbo.TableB B
; 
```

Here is an image with a visualization of a Cartesian product. The inputs are small, just the column of symbols on the left corresponding to the first table, and the column on the right being the second table. Upon performing a `JOIN` with no conditions, you get one row per connecting line in the middle.

![Cartesian Product](https://i.stack.imgur.com/kjzBf.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T21:49:11.053

使用`INSERT INTO ... SELECT`带有交叉连接的语句：

```
INSERT INTO TableC (ID1, ID2)
SELECT A.ID AS ID1, b.ID AS ID2 FROM TableA A CROSS JOIN TableB B; 
```

**[示例演示](http://sqlfiddle.com/#!6/ec589/1)**

`INSERT INTO…SELECT`在 MSDN 上有描述：[INSERT (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms174335.aspx)

> 您可以使用`INSERT INTO <target_table> SELECT <columns> FROM <source_table>`有效地将大量行从一个表（例如临时表）传输到另一个具有最少日志记录的表。最少的日志记录可以提高语句的性能并减少操作在事务期间填满可用事务日志空间的可能性。