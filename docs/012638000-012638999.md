# StackOverflow 问答 12638000-12638999

# spring - Spring批处理Cron表达式：每3小时运行一次

> ID：12638000
> 
> 赞同：25
> 
> 时间：2012-09-28T10:11:51.233
> 
> 标签：spring, cron, spring-batch

我希望我的春季批处理作业每 3 小时运行一次

我使用了表达式`* * */3 * * ?`，它在可被 3 整除的时间开始工作，例如说服务器在下午 2 点启动，工作仅在下午 3 点开始执行 - 到目前为止一切都很好，但工作每秒都在开始！是因为我在第一个位置使用了 * 吗？

我试过`0 0 */3 * * ?`了，但它出错了。实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-09-28T12:50:31.500

格式是

> 秒、分、小时、日、月、工作日

所以正确的cron表达式应该是

```
0 0 */3 * * * 
```

如果这不起作用，您收到的确切错误消息是什么？

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-08-01T06:57:16.353

使脚本每 3 小时运行一次的正确语法如下。

```
0 0 0/3 * * ? 
```

# php - 从多维数组中删除重复键

> ID：12638001
> 
> 赞同：1
> 
> 时间：2012-09-28T10:11:54.663
> 
> 标签：php, array-unique

我有一个多维对象数组：

```
 0 => 
    array
      32281 => object ...
      105145 => object ...
      165656 => object ...
      194124 => object ...
      195397 => object ...
      205859 => object ...
  1 => 
    array
      32281 => object ...
      91504 => object ...
      165656 => object ...
      194124 => object ...
      195397 => object ...
      205859 => object ...
  3 => 
    array
      32281 => object ...
      105145 => object ...
      165656 => object ...
      194124 => object ...
      195397 => object ...
      205859 => object ... 
```

我想像这样从这个数组中删除重复的数组（在这种情况下，我将删除 1 并且只有 0 和 3，因为 0 和 1 是相同的）：

```
 0 => 
        array
          32281 => object ...
          105145 => object ...
          165656 => object ...
          194124 => object ...
          195397 => object ...
          205859 => object ...
      3 => 
        array
          32281 => object ...
          91504 => object ...
          165656 => object ...
          194124 => object ...
          195397 => object ...
          205859 => object ... 
```

我用 array_unique、array_keys、array_keys_exists 尝试了很多事情，但都没有成功...

例如 ：

```
$array = array_map("unserialize", array_unique(array_map("serialize", $array))); 
```

或者

```
 $result = array();     
 foreach ($array as $key => $value) { 
    if(!array_key_exists($key,$result))
        $result[$key] = $array[$key]; 
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T10:20:51.680

这个函数应该做：

```
function my_unique($array) {
  foreach($array as $key => $value) {
    foreach($array as $key2 => $value2) {
      if($key != $key2 && $value === $value2) {
        unset($array[$key]);
      }
    }
  }
  return $array;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:34:11.900

你可以试试

```
$array = array(
  0 => 
    array (
      32281 => new stdClass , 
      105145 => new stdClass , 
      165656 => new stdClass , 
      194124 => new stdClass , 
      195397 => new stdClass , 
      205859 => new stdClass ),
  1 => 
    array (
      32281 => new stdClass , 
      91504 => new stdClass , 
      165656 => new stdClass , 
      194124 => new stdClass , 
      195397 => new stdClass , 
      205859 => new stdClass ) ,
  3 => 
    array (
      32281 => new stdClass , 
      105145 => new stdClass , 
      165656 => new stdClass , 
      194124 => new stdClass , 
      195397 => new stdClass , 
      205859 => new stdClass  )
    );

$array2 = array_unique(array_map("serialize", $array));
$final = array_map("unserialize",array_diff($array2, array_diff_assoc(array_map("serialize", $array), $array2)));
var_dump($final); 
```

输出

```
array
  1 => 
    array
      32281 => 
        object(stdClass)[19]
      91504 => 
        object(stdClass)[20]
      165656 => 
        object(stdClass)[21]
      194124 => 
        object(stdClass)[22]
      195397 => 
        object(stdClass)[23]
      205859 => 
        object(stdClass)[24] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T10:34:22.993

```
 <?php
$arr =  array (0 => 
    array(
      32281 => new stdClass,
      105145 => new stdClass,
      165656 => new stdClass,
      194124 => new stdClass,
      195397 => new stdClass,
      205859 => new stdClass,
    ),
  1 => 
    array(
      32281 => new stdClass,
      91504 => new stdClass,
      165656 => new stdClass,
      194124 => new stdClass,
      195397 => new stdClass,
      205859 => new stdClass,
    ),
  3 => 
    array(
      32281 => new stdClass,
      105145 => new stdClass,
      165656 => new stdClass,
      194124 => new stdClass,
      195397 => new stdClass,
      205859 => new stdClass,
    ),
);

$result = array();
function put($value, $key) {
    global $result;
    $result[$key] = $value;
}
array_walk_recursive($arr, "put");

var_dump($result);

/**
array(7) {
  [32281]=>
  object(stdClass)#13 (0) {
  }
  [105145]=>
  object(stdClass)#14 (0) {
  }
  [165656]=>
  object(stdClass)#15 (0) {
  }
  [194124]=>
  object(stdClass)#16 (0) {
  }
  [195397]=>
  object(stdClass)#17 (0) {
  }
  [205859]=>
  object(stdClass)#18 (0) {
  }
  [91504]=>
  object(stdClass)#8 (0) {
  }
}

 */ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T10:38:13.630

**如果我正确理解您的问题，您希望根据所有键**对子数组进行重复数据删除。

假设你有一个基于 0 的自然数组键：

```
$keys=array_map("serialize",array_map("array_keys",$arr));
$keys=array_unique($keys);
$result=array();
foreach($keys as $idx=>$not_care)
{
    $result[$idx]=$arr[$idx];
} 
```

因此对于

```
$arr=array(array(1234=>"1234",5678=>"5678"),
    array(1357=>"1357",2468=>"2468"),
    array(1234=>"1234",5678=>"5678"),
    array(1357=>"1357",8642=>"8642")); 
```

你得到：

```
Array
(
    [0] => Array
        (
            [1234] => 1234
            [5678] => 5678
        )

    [1] => Array
        (
            [1357] => 1357
            [2468] => 2468
        )

    [3] => Array
        (
            [1357] => 1357
            [8642] => 8642
        )

) 
```

# jquery - 在逐步过程中添加额外的步骤

> ID：12638006
> 
> 赞同：1
> 
> 时间：2012-09-28T10:12:03.983
> 
> 标签：jquery

我创建了一个逐步的过程，最终将形成一个测试。它从 Wordpress 中抓取数据行，每一行都是一个问题。

我想在最后添加一个额外的步骤，作为查看您的答案页面。在当前的最后一步中，它显示了一个提交按钮。

**如何更改当前的最后一步以显示隐藏最后一个 .form-row div 并显示另一个带有提交按钮的 div 的下一步按钮？**

也许是因为我已经盯着它看了很长时间，但是有人可以帮我解决这个问题吗？

到目前为止，这是我的代码：

```
<script type="text/javascript">
jQuery(function($) {
$(document).ready(function() {    

    // prepend a 'previous' button to all form-rows except the first
    $('<button>').addClass('previous').appendTo($('.inner').not(':first'));

    // hide all form-rows, but not the first one
    $('.form-row').not(':first').hide();

    // hide on last step
    $('button.next').last().hide();

    // add the submit button to the last form-row
    $('<input>').addClass('submit').prop('type', 'submit').val('Submit').appendTo($('.form-row:last'));

    // handle the previous button, we need to use 'on' here as the
    // previous buttons don't exist in the dom at page load
    $('.form-row').on('click', 'button.previous', function(e) {
        e.preventDefault();
        $(this).parents('div.form-row').hide().prev('div.form-row').show();
    });

    $('button.next').click(function(e) {
        // prevent the next buttons from submitting the form
        e.preventDefault();
        // hide this form-row, and show the next one
        $(this).parents('div.form-row').hide().next('div.form-row').show();
    });    

});
});
</script> 
```

HTML：

```
 <?php $counter = 1; if(get_field('step_by_step_test')): ?>
                <?php while(the_repeater_field('step_by_step_test')): ?>        
                <div class="form-row">
                    <h2 style="float:left;margin-left:7px;"><?php the_title(); ?></h2>
                    <h2 style="float:right;"><?php echo $counter; ?> of <?php echo $total; ?></h2>
                    <div class="clear"></div>
                    <div id="module-area" style="margin-top:0px!IMPORTANT;">
                        <div id="modules-top"></div>
                        <div id="modules-repeat">                           
                            <?php if(get_sub_field('test_image')): ?>
                            <?php while(has_sub_field('test_image')): ?> 
                                <img class="training" src="<?php echo the_sub_field('image'); ?>" />
                            <?php endwhile; ?> 
                            <?php endif; ?>         

                            <br /><br />    
                            <p class="training"><b><?php echo the_sub_field('question'); ?></b></p>

                            <?php if(get_sub_field('answer_options')): ?>
                            <?php while(has_sub_field('answer_options')): ?> 
                                <p class="contact-form"> 
                                    <input style="width: 20px;" type="checkbox" name="CheckboxGroup<?php echo $counter; ?>[]" value="<?php echo the_sub_field('answer'); ?>" />
                                    <?php echo the_sub_field('answer'); ?>
                                </p>                
                            <?php endwhile; ?> 
                            <?php endif; ?>
                            <div class="inner"></div>
                            <button class="next"></button>
                            <div class="clear"></div>
                        </div>
                        <div style="margin-bottom:5px;" id="modules-bottom"></div>
                    </div>
                </div>
                <?php $counter++; endwhile; ?> 
                <?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:53:19.293

我在数孩子，然后显示问题（没有下一个/上一个）按钮。结果是我相信你正在尝试的。[http://jsfiddle.net/TWB6Z/](http://jsfiddle.net/TWB6Z/)

JS

```
$(document).ready(function() {

var EZcounter = $('.form-row').length - 1;

    {...your code...}

    $('.form-row:nth-child(' + EZcounter + 'n) .next').click(function() {
        $('.form-row').show();
        $('.previous, .next').hide();
    });
});​ 
```

# python - 在 Python 中格式化鼻子测试输出

> ID：12638007
> 
> 赞同：6
> 
> 时间：2012-09-28T10:12:06.743
> 
> 标签：python, nose, nosetests

我正在使用nosetests，我的目录结构如下

```
repo
      package1
          sub1
             tests
                 test1.py
                 test2.py
      package2
          sub2
             tests
                 test3.py
                 test4.py
      package3
      package4 
```

如果 test1.py 如下

```
class TestClass1(unittest.TestCase)
      def test_method1()

class TestClass2(unittest.TestCase)
      def test_method2()

class TestClass3(unittest.TestCase)
      def test_method3 
```

鼻子测试运行的输出如下

```
[Method name]  [modulename]. [ClassName] ... status
test_method1  (test1.TestClass1) ... ok
test_method2  (test1.TestClass2) ... ok
test_method3  (test1.TestClass3) ... ok 
```

我想将此输出格式化为如下所示

```
repo.package1.sub1 [package]                             SUCCESS
    test1.py [unit test file]                                SUCCESS
        TestClass1.test_method1 [unit test]                  SUCCESS
        TestClass2.test_method2 [unit test]                  SUCCESS
        TestClass3.test_method3 [unit test]                  SUCCESS 
```

有什么帮助吗？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T18:53:40.807

您可以编写自己的鼻子插件来控制输出。[这个页面](https://nose-plugins.jottit.com/)上有两个已经这样做了：nose_machineout 和nose-subunit。它们将是您查看的一个很好的起点。

# javascript - 使工具提示插件跟随鼠标而不是静态位置

> ID：12638008
> 
> 赞同：1
> 
> 时间：2012-09-28T10:12:12.060
> 
> 标签：javascript, jquery-plugins, mousemove, jquery-tooltip

我正在使用这个工具提示插件： [http ://www.dynamicdrive.com/dynamicindex5/balloontooltip.htm](http://www.dynamicdrive.com/dynamicindex5/balloontooltip.htm)

它非常有用且高度可定制，因为您可以使用定义为工具提示的 HTML 元素并且可以非常快速地进行初始化；您只需在触发器元素的 rel 属性中定义要用作工具提示的元素的 id。

我使用了很多不同的 div，所以这对我很有帮助。

只是出了点小问题。我希望它跟随鼠标没有静态位置。

我在最后添加了一些东西：

```
$(document).mousemove(function (e) {
    amouseX = e.pageX - 30;
    amouseY = e.pageY + 20;
    $(".tooltip").css({ left: amouseX + "px", top: amouseY + "px" });
}); 
```

这个到 displayballoontip(obj, e)

```
dropmenuobj.x = amouseX
dropmenuobj.y = amouseY 
```

并将代码中的每个可见性：隐藏更改为显示：无。因为在我添加了这些之后，工具提示在浏览器显示中导致了一些滚动问题：没有修复它们。

但现在我在使用 Internet Explorer 时遇到了一些问题。它在许多不同的方面都不能很好地工作，例如：我可以看到工具提示从某个地方移动到屏幕上的鼠标，工具提示不会在鼠标退出时立即消失。

这是我所做的一切的代码：

```
var disappeardelay=0  //tooltip disappear delay (in miliseconds)
var verticaloffset=0 //vertical offset of tooltip from anchor link, if any
var enablearrowhead=0 //0 or 1, to disable or enable the arrow image
var arrowheadimg=["arrowdown.gif", "arrowup.gif"] //path to down and up arrow images
var arrowheadheight=11 //height of arrow image (amount to reveal)

/////No further editting needed
var ie=document.all
var ns6=document.getElementById&&!document.all
verticaloffset=(enablearrowhead)? verticaloffset+arrowheadheight : verticaloffset

function getposOffset(what, offsettype){
var totaloffset=(offsettype=="left")? what.offsetLeft : what.offsetTop;
var parentEl=what.offsetParent;
while (parentEl!=null){
totaloffset=(offsettype=="left")? totaloffset+parentEl.offsetLeft : totaloffset+parentEl.offsetTop;
parentEl=parentEl.offsetParent;
}
return totaloffset;
}

function showhide(obj, e){
//dropmenuobj.style.left=dropmenuobj.style.top="-500px"
if (e.type=="mouseover")
obj.display="block"
}

function iecompattest(){
return (document.compatMode && document.compatMode!="BackCompat")? document.documentElement : document.body
}

function clearbrowseredge(obj, whichedge){
if (whichedge=="rightedge"){
edgeoffsetx=0
var windowedge=ie && !window.opera? iecompattest().scrollLeft+iecompattest().clientWidth-15 : window.pageXOffset+window.innerWidth-15
dropmenuobj.contentmeasure=dropmenuobj.offsetWidth
if (windowedge-dropmenuobj.x < dropmenuobj.contentmeasure)
edgeoffsetx=dropmenuobj.contentmeasure-obj.offsetWidth
if (dropmenuobj.x-edgeoffsetx+dropmenuobj.contentmeasure>windowedge)
edgeoffsetx=dropmenuobj.x-windowedge+dropmenuobj.contentmeasure
return edgeoffsetx
}
else{
edgeoffsety=0
var topedge=ie && !window.opera? iecompattest().scrollTop : window.pageYOffset
var windowedge=ie && !window.opera? iecompattest().scrollTop+iecompattest().clientHeight-15 : window.pageYOffset+window.innerHeight-18
dropmenuobj.contentmeasure=dropmenuobj.offsetHeight
if (windowedge-dropmenuobj.y < dropmenuobj.contentmeasure) //move up?
edgeoffsety=dropmenuobj.contentmeasure+obj.offsetHeight+(verticaloffset*2)
return edgeoffsety
}
}

function displayballoontip(obj, e){ //main ballooon tooltip function
if (window.event) event.cancelBubble=true
else if (e.stopPropagation) e.stopPropagation()
if (typeof dropmenuobj!="undefined") //hide previous tooltip?
dropmenuobj.style.display="none"
clearhidemenu()
obj.onmouseout=delayhidemenu
dropmenuobj=document.getElementById(obj.getAttribute("rel"))
showhide(dropmenuobj.style, e)
dropmenuobj.x = amouseX
dropmenuobj.y = amouseY
dropmenuobj.style.left=dropmenuobj.x-clearbrowseredge(obj, "rightedge")+"px"
dropmenuobj.style.top=dropmenuobj.y-clearbrowseredge(obj, "bottomedge")+obj.offsetHeight+"px"
if (enablearrowhead)
displaytiparrow()
}

function displaytiparrow(){ //function to display optional arrow image associated with tooltip
tiparrow=document.getElementById("arrowhead")
tiparrow.src=(edgeoffsety!=0)? arrowheadimg[0] : arrowheadimg[1]
var ieshadowwidth=(dropmenuobj.filters && dropmenuobj.filters[0])? dropmenuobj.filters[0].Strength-1 : 0
//modify "left" value depending on whether there's no room on right edge of browser to display it, respectively
tiparrow.style.left=(edgeoffsetx!=0)? parseInt(dropmenuobj.style.left)+dropmenuobj.offsetWidth-tiparrow.offsetWidth-10+"px" : parseInt(dropmenuobj.style.left)+5+"px"
//modify "top" value depending on whether there's no room on right edge of browser to display it, respectively
tiparrow.style.top=(edgeoffsety!=0)? parseInt(dropmenuobj.style.top)+dropmenuobj.offsetHeight-tiparrow.offsetHeight-ieshadowwidth+arrowheadheight+"px" : parseInt(dropmenuobj.style.top)-arrowheadheight+"px"
tiparrow.style.display="block"
}

function delayhidemenu(){
delayhide=setTimeout("dropmenuobj.style.display='none';  if (enablearrowhead) tiparrow.style.display='none'",disappeardelay)
}

function clearhidemenu(){
if (typeof delayhide!="undefined")
clearTimeout(delayhide)
}

function reltoelement(linkobj){ //tests if a link has "rel" defined and it's the ID of an element on page
var relvalue=linkobj.getAttribute("rel")
return (relvalue!=null && relvalue!="" && document.getElementById(relvalue)!=null && document.getElementById(relvalue).className=="tooltip")? true : false
}

function initalizetooltip(){
var all_links=document.getElementsByTagName("a")
if (enablearrowhead){
tiparrow=document.createElement("img")
tiparrow.setAttribute("src", arrowheadimg[0])
tiparrow.setAttribute("id", "arrowhead")
document.body.appendChild(tiparrow)
}
for (var i=0; i<all_links.length; i++){
if (reltoelement(all_links[i])){ //if link has "rel" defined and it's the ID of an element on page
all_links[i].onmouseover=function(e){
var evtobj=window.event? window.event : e
displayballoontip(this, evtobj)
}
all_links[i].onmouseout=delayhidemenu
}
}
}

if (window.addEventListener)
window.addEventListener("load", initalizetooltip, false)
else if (window.attachEvent)
window.attachEvent("onload", initalizetooltip)
else if (document.getElementById)
window.onload=initalizetooltip

$(document).mousemove(function (e) {
    amouseX = e.pageX - 30;
    amouseY = e.pageY + 20;
    $(".tooltip").css({ left: amouseX + "px", top: amouseY + "px" });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T10:15:01.650

鼠标移动事件有一个功能，您可以使用它来更新位置

[http://api.jquery.com/mousemove/](http://api.jquery.com/mousemove/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:21:21.773

这是一个快速工作示例：

**编辑小改进：**

```
<html>
<head>

<script>

var divName = 'follower'; 
var offX = 15;
var offY = 15;     

function mouseX(evt) {

    if (!evt) evt = window.event; 
    if (evt.pageX) {

        return evt.pageX; 

    }
    else if (evt.clientX) {

        return evt.clientX + (document.documentElement.scrollLeft ?  document.documentElement.scrollLeft : document.body.scrollLeft);

    }
    else {

        return 0;

    }

}

function mouseY(evt) {

    if (!evt) {

        evt = window.event; 
        if (evt.pageY) {

            return evt.pageY; 

        }

    }
    else if (evt.clientY) {

        return evt.clientY + (document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop); 

    }
    else {

        return 0;

    }

}

function follow(evt) {

    if (document.getElementById) {

        var obj = document.getElementById(divName).style; obj.visibility = 'visible';
        obj.left = (parseInt(mouseX(evt))+offX) + 'px';
        obj.top = (parseInt(mouseY(evt))+offY) + 'px';

    }

}

</script>

<style>

#follower {
    position:absolute; 
    overflow:hidden; 
    visibility: hidden;
    z-index:999; 
    width:100px; 
    height:100px;
    background-color:#ccc;
    color: #000;
} 

.item {

    color: #000;
    font-weight: bold;
    cursor: pointer;

}

</style>

</head>
<body>

<div class="item" onclick="follow(event); document.onmousemove = follow;">
    click me for tooltip
</div>

<div id="follower">  
Hey I am a shadow!
</div>

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T12:26:03.233

```
$(document).mousemove(function (e) {
    amouseX = e.pageX - 30;
    amouseY = e.pageY + 20;
    $(".tooltip").css({ left: amouseX + "px", top: amouseY + "px" });
}); 
```

这使工具提示随鼠标移动，但存在一些问题。我已经编辑了问题以解释问题并将代码的最后状态。

# php - 在 $.ajax 调用上创建一个进度条

> ID：12638010
> 
> 赞同：6
> 
> 时间：2012-09-28T10:12:25.883
> 
> 标签：php, javascript, jquery, ajax

当我单击一个按钮以通过 ajax 加载内容时，我想显示一个进度条。一旦我创建`$.ajax`调用，通信就会转到服务器上的一个 php 文件，该文件从服务器上的另一个文件中抓取数据。导入数据需要 7-8 秒。

我想在发出 ajax 请求时显示进度加载器。我在互联网上寻找并找不到简单的解决方案。我所能找到的只是复杂的上传文件脚本，这些脚本需要很长时间才能自定义以执行这个简单的操作。如果有人可以提供帮助，那就太好了。否则，我将不得不使用微调器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T12:26:03.840

因为所有其他答案都只是显示占位符图像或文本或只是伪造它，所以这是你可以做到的（只是描述，没有代码 - 但唯一困难的部分是确定实际完成了多少工作）：

编辑您通过调用的 php 脚本`$.ajax`来计算它已完成的工作百分比 - 您将如何执行此操作非常依赖于脚本执行的操作，因此非常容易（例如，当您只是迭代一个要处理的事情的数组，每个事情都需要大约相同的时间）或非常困难（例如，当大部分时间都花在对库或内置函数的一次非重复调用上时）。将此百分比保存在会话变量中：

```
$_SESSION["PERCENTAGE_DONE"] = $my_calculated_percentage; 
```

显然，您希望尽可能频繁且合理地更新此变量。

现在，创建另一个 php 脚本，它只打印出这个值（对于这个例子来说，纯文本就足够了，但你也可以使用 json 或 xml 或其他你喜欢的格式）：

```
//initialize session, set headers etc. before this
echo $_SESSION["PERCENTAGE_DONE"] 
```

对于 javascript 部分，创建另一个函数，通过 ajax 调用新的 php 脚本，读取返回值并绘制/更新进度条（对于绘图部分，您可以将 JustinJohns 的答案作为起点）。现在，在执行主`$.ajax`调用后，使用此函数`setTimeout`重复查询服务器，直到任务完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T07:17:46.420

请尝试以下 Ajax 进度条脚本：

```
<script>
function submit_form_data(){
    $("#preview").html(''); 
    $("#preview").html('<img src="loader.gif" alt="Uploading...."/> <br><p>Please wait for response.............</p>'); 
    $.post('getdata.php',function(data){$("#preview").html(data)}) }
</script>

<div id='preview'></div> 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-28T11:07:28.113

根本问题是您不知道请求需要多长时间。

这将是建议而不是答案。

我假设时间总是在 7-8 秒左右。

每秒加载 10%，直到达到 90%。

完成后等待您的 ajax 请求完成，并在 ajax 成功回调时将条形宽度设为 100%。

您可以随时间自定义加载条的百分比。

请查看此[演示](http://jsfiddle.net/ZnSZd/2/)

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2012-09-28T10:25:58.147

您使用的图像应该加载动画图像。

```
<div id="loading" >
<p>
<img src="images/loading.gif">
Please Wait
</p>
</div> 
```

然后在脚本函数中使用以下代码

```
<script type='text/javascript'>
function showLoading() {
$("#loading").show();
}

function hideLoading() {
$("#loading").hide();
}

</script> 
```

然后在 ajax 调用中根据需要调用 showLoading 和 hideLoading 函数。它将显示和隐藏动画。

* * *

## 回答 #5

> 赞同：-7
> 
> 时间：2012-09-28T10:16:16.863

正如您要求一个简单的解决方案，这可能会对您有所帮助.. 有一个 ID 为“正在加载”的 div，显示为隐藏。

```
<div id='loading' style='display:none;'><img src='loading.gif' /></div> 
```

当调用ajax请求时，显示div

```
$('#loading').show(); 
```

当响应成功时，再次隐藏div，

```
$('#loading').hide(); 
```

# android - 使用媒体缩略图时的内存问题

> ID：12638011
> 
> 赞同：0
> 
> 时间：2012-09-28T10:12:29.640
> 
> 标签：android, bitmap, thumbnails, mediastore

我正在尝试找到一种有效的方法来处理从`MediaStore`. 实际上，缩略图有两种：`MICRO_KIND`一种是方形的，大小为 96x96，与设备或平台无关；`MINI_KIND`横向图像约为 512x384，纵向图像约为 288x512，也与设备和平台无关。现在，我正在使用异步`Bitmap`加载、回收和缓存的所有最佳实践，实际上我的应用程序在我使用`MICRO_KIND`. 无论如何，这不是我想要的，尤其是对于平板电脑，这样的小图像看起来很糟糕。我试过使用`MINI_KIND`，但它很快就超过了内存限制，更不用说实现了。另一个麻烦是肖像图像有肖像缩略图，我需要它们都是矩形风景。我已经尝试`Bitmaps`在保持纵横比的情况下进行裁剪和调整大小，但这让我更加头疼，因为每次操作`Bitmap`都会创建一个副本，而且我总是使用该`Bitmap.recycle()`方法，`OutOfMemory`一遍又一遍地杀死我。我正在寻找一种优雅且内存高效的方法来创建严格指定大小和方向的缩略图，使用从`MediaStore`. 非常感谢任何帮助和参考。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T10:19:04.853

正如你所说，你已经使用了从种植到回收的所有东西，现在`WeakReferences`也试试吧。

如果这也没有帮助，那么您的代码中可能存在内存泄漏。

请查看我对同一问题的回答：[位图大小超出 Vm 预算错误 android](https://stackoverflow.com/questions/10737582/bitmap-size-exceeds-vm-budget-error-android/10738115#10738115)

这是一个通用的答案，请尝试我提到的所有方法。其中一个应该适合你:)

谢谢你。

# c# - 远程服务器返回错误：(404) Not Found - HttpWebResponse

> ID：12638013
> 
> 赞同：2
> 
> 时间：2012-09-28T10:12:41.267
> 
> 标签：c#, javascript, jquery, asp.net, ajax

我正在使用代理文件来允许我们的系统使用 ajax 从我们系统的不同子域加载页面。我第一次尝试成功地做到了这一点，但我的第二次尝试给了我一个错误，我正在努力找出原因，任何帮助将不胜感激。

首先这是我的 Proxy.aspx.cs：

```
protected void Page_Load(object sender, EventArgs e)
{
    string proxyURL = HttpUtility.UrlDecode(Request.QueryString["u"]);

    if (proxyURL != string.Empty)
    {
        HttpWebRequest request = (HttpWebRequest) WebRequest.Create(proxyURL);
        request.Method = "POST";
        request.ContentLength = 0;
        HttpWebResponse response = (HttpWebResponse) request.GetResponse();

        if (response.StatusCode.ToString().ToLower() == "ok")
        {
            string contentType = response.ContentType;
            Stream content = response.GetResponseStream();
            if (content != null)
            {
                StreamReader contentReader = new StreamReader(content);
                Response.ContentType = contentType;
                Response.Write(contentReader.ReadToEnd());
            }
        }
    }
} 
```

我的 HTML/Javascript 就是这样的：

```
<script>
    $(document).ready(function () {
        $.ajax({
            type: "POST",
            url: "Proxy.aspx?u=<%=GetUrl()%>",
            success: function (data) {
                $('#iFrameHolder').html(data);
            }
        });
    });
</script>

<div id="iFrameHolder"></div> 
```

然后我只使用 GetUrl() 函数来构建我需要从子域上的项目中获取的任何页面的 url。

我用一个 url 完全没有问题，但是第二次尝试我收到了这个错误：

```
System.Net.WebException: The remote server returned an error: (404) Not Found.     
at System.Net.HttpWebRequest.GetResponse()     
at G2F.Collective.WebApplication.Shared.Proxy.Page_Load(Object sender, EventArgs e) 
in D:\My Documents\Firefly\Collective\Dev\Solution\WebSites\G2F.Collective.WebApplication\Shared\Proxy.aspx.cs:line 26     
at System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e)     
at System.Web.UI.Control.LoadRecursive()     
at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) 
```

对我来说，这表明我构建的 url 有问题，但使用 Chrome 的 Web 开发人员工具，我可以复制传递给代理的确切查询字符串，将其粘贴到浏览器地址栏中，然后毫无问题地访问该页面，这意味着正在构建的 url 没有问题。所以我不知道为什么这个返回 404。如果有人能给我任何建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T03:13:54.173

尝试在 AJAX 代码中使用“GET”而不是“POST”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T07:58:58.277

在 Darwish 的建议的帮助下，我发现我需要做的是将 Web 请求更改为 GET 而不是 POST，使我的代理文件如下所示：

```
protected void Page_Load(object sender, EventArgs e)
{
    string proxyURL = HttpUtility.UrlDecode(Request.QueryString["u"]);

    if (proxyURL != string.Empty)
    {
        HttpWebRequest request = (HttpWebRequest) WebRequest.Create(proxyURL);
        request.Method = "GET";
        request.ContentLength = 0;
        HttpWebResponse response = (HttpWebResponse) request.GetResponse();

        if (response.StatusCode.ToString().ToLower() == "ok")
        {
            string contentType = response.ContentType;
            Stream content = response.GetResponseStream();
            if (content != null)
            {
                StreamReader contentReader = new StreamReader(content);
                Response.ContentType = contentType;
                Response.Write(contentReader.ReadToEnd());
            }
        }
    }
} 
```

# c# - 将类中的字符串添加到列表中的速记方法 ?

> ID：12638015
> 
> 赞同：2
> 
> 时间：2012-09-28T10:12:53.280
> 
> 标签：c#, list

我有以下 C# 代码：

```
List<string> names = new List<string>();
if (myObject.myClass != null)
{
     foreach (var foo in myObject.myClass.subClass)
     {
          names.Add(foo.Name);
     }
} 
```

有没有更短的方法来编写这个而不需要遍历每个实例`subClass`来添加`myObject.myClass.subClass.Name`到`names` `List<string>`对象中？

也`myObject.myClass`可以为空。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T10:14:48.330

听起来你可以使用：

```
List<string> names = myObject.myClass == null
    ? new List<string>()
    : myObject.myClass.subclass.Select(x => x.Name).ToList(); 
```

请注意，此表达式：`myObject.myClass.subclass`表明您相当讨厌地违反[了得墨忒耳法则-我](http://en.wikipedia.org/wiki/Law_of_Demeter)*希望*命名实际上并不能反映现实……如果您可以提供一组更具指示性的表达式，那将有很大帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-28T10:15:02.043

您可以使用该`AddRange`方法将 an 的所有元素添加`IEnumerable`到列表中：

```
if (myObject.myClass != null) {
    names.AddRange(myObject.myClass.subClass.Select(c => c.Name));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T10:14:58.703

您可以在 List 上使用[AddRange](http://msdn.microsoft.com/en-us/library/z883w3dc.aspx)方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T10:15:01.953

您可以使用 LINQ 构建列表，但请注意，它仍在枚举以构建列表：

```
var names = myObject.myClass.subClass.Select(x => x.Name).ToList(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T10:16:29.160

目前尚不清楚什么是集合，什么不是。所以我假设这`myObject.myClass`已经是一个集合（`IEnumerable<myClass>`）并且可以为空并且`myClass.subClass`是一个`IEnumerable<subClass>`并且你想要他们所有的名字。

```
var classNames = from c in myObject.myClass
                 where c != null
                 from subC in c.subClass
                 where subC != null
                 select subC.Name;
List<String> names = classNames.ToList(); 
```

这是一个 LINQ 查询，它相当于[`Enumerable.SelectMany`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.selectmany.aspx)in 方法语法。

请注意，您需要添加`using System.Linq`.

# liferay - ResourceActionsException 在我自己的门户中添加数据库中的值时

> ID：12638016
> 
> 赞同：-1
> 
> 时间：2012-09-28T10:13:04.293
> 
> 标签：liferay, portlet, liferay-6

在向数据库添加一些值时出现以下错误。

我的错误跟踪如下

```
...
    10:06:10,730 INFO  [RestaurantPortlet:35] Inside addRegistration
    10:06:10,731 INFO  [RestaurantPortlet:40] {Resto_ID=0, Name=KFC, Location=AHMEDABAD, Room_Count=0, Table_Count=0, userId=10196, companyId=10154, groupId=10180, Reseller_ID=0}
    com.liferay.portal.ResourceActionsException: There are no actions associated with the resource com.test.model.Restaurant
        at com.liferay.portal.service.impl.ResourceLocalServiceImpl.validate(ResourceLocalServiceImpl.java:1348)....... 
```

那么我的行动方法中的错误是什么？

这是我的服务班

```
/**
 * Copyright (c) 2000-2012 Liferay, Inc. All rights reserved.
 *
 * This library is free software; you can redistribute it and/or modify it under
 * the terms of the GNU Lesser General Public License as published by the Free
 * Software Foundation; either version 2.1 of the License, or (at your option)
 * any later version.
 *
 * This library is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more
 * details.
 */

package com.test.service.impl;

import java.util.Collections;
import java.util.List;

import com.test.model.Restaurant;

import com.liferay.portal.kernel.exception.PortalException;
import com.liferay.portal.kernel.exception.SystemException;

import com.test.service.base.RestaurantServiceBaseImpl;

/**
 * The implementation of the restaurant remote service.
 *
 * <p>
 * All custom service methods should be put in this class. Whenever methods are added, rerun ServiceBuilder to copy their definitions into the {@link com.test.service.RestaurantService} interface.
 *
 * <p>
 * This is a remote service. Methods of this service are expected to have security checks based on the propagated JAAS credentials because this service can be accessed remotely.
 * </p>
 *
 * @author bhavik.kama
 * @see com.test.service.base.RestaurantServiceBaseImpl
 * @see com.test.service.RestaurantServiceUtil
 */
public class RestaurantServiceImpl extends RestaurantServiceBaseImpl {
    public Restaurant addreRestaurant(Restaurant restoParam) {
        Restaurant restoVar;

        try {
            restoVar = restaurantPersistence.create((int) counterLocalService
                    .increment(Restaurant.class.toString()));
        } catch (SystemException e) {
            e.printStackTrace();
            return restoVar = null;
        }

        try {
            resourceLocalService.addResources(restoParam.getCompanyId(),
                    restoParam.getGroupId(), restoParam.getUserId(),
                    Restaurant.class.getName(), restoParam.getPrimaryKey(),false,
                    true, true);
        } catch (PortalException e) {
            e.printStackTrace();
            return restoVar = null;
        } catch (SystemException e) {
            e.printStackTrace();
            return restoVar = null;
        }
        restoVar.setResto_ID(restoParam.getResto_ID());
        restoVar.setName(restoParam.getName());
        restoVar.setLocation(restoParam.getLocation());
        restoVar.setRoom_Count(restoParam.getRoom_Count());
        restoVar.setTable_Count(restoParam.getRoom_Count());
        restoVar.setCompanyId(restoParam.getCompanyId());
        restoVar.setUserId(restoParam.getUserId());
        restoVar.setGroupId(restoParam.getGroupId());
        restoVar.setReseller_ID(restoParam.getReseller_ID());

        try {
            return restaurantPersistence.update(restoVar, false);
        } catch (SystemException e) {
            e.printStackTrace();
            return restoVar = null;
        }
    }
    public List<Restaurant> getAllerRestaurants() {
        try {
            return restaurantPersistence.findAll();
        } catch (SystemException e) {
            e.printStackTrace();
            return Collections.emptyList();
        }
    }

    public List<Restaurant> getAllreRestaurants(long groupId, String title) {
        try {
            return restaurantPersistence.findByGroupId(groupId);
        } catch (SystemException e) {
            e.printStackTrace();
            return Collections.emptyList();
        }
    }
} 
```

我的 Portlet 类如下...

```
package com.test.portlet;

import java.util.ArrayList;
import java.util.List;

import javax.portlet.ActionRequest;
import javax.portlet.ActionResponse;

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;

import com.test.model.Restaurant;
import com.test.service.RestaurantServiceUtil;
import com.test.util.RestaurantActionUtil;
import com.test.util.RestaurantValidator;
import com.liferay.portal.kernel.exception.SystemException;
import com.liferay.portal.kernel.servlet.SessionErrors;
import com.liferay.portal.kernel.servlet.SessionMessages;
import com.liferay.portal.kernel.util.ParamUtil;
import com.liferay.portal.kernel.util.Validator;
import com.liferay.portal.kernel.util.WebKeys;
import com.liferay.portal.theme.ThemeDisplay;
import com.liferay.util.bridges.mvc.MVCPortlet;

/**
 * Portlet implementation class BooksPortlet
 */
public class RestaurantPortlet extends MVCPortlet {

    private static Log log = LogFactory.getLog(RestaurantPortlet.class);
    private static String errorJSP="/jsps/error.jsp" ;

    public void addRestaurant(ActionRequest request, ActionResponse response) {

        log.info("Inside addRegistration");
        List<String> errors=new ArrayList<String>();
        Restaurant resto=RestaurantActionUtil.getRestaurantFromRequest(request);
        //boolean bookValid=RestaurantValidator.validateBook(resto, errors);

            log.info(resto);
            Restaurant test=RestaurantServiceUtil.addreRestaurant(resto);
            if(test==null) {
                log.error("REsto was Found Null");
                //response.setRenderParameter("jspPage", errorJSP);
                return ;
            }
            SessionMessages.add(request,"book-added");
            return ;
        }

    }

    /*
    public void deleteBooks(ActionRequest request, ActionResponse response) {

        long bookId = ParamUtil.getLong(request, "bookId");
        ThemeDisplay themeDisplay = (ThemeDisplay) request.getAttribute(
                WebKeys.THEME_DISPLAY);

        if (Validator.isNotNull(bookId)) {
            BooksLocalServiceUtil.deleteBooks(bookId, themeDisplay.getCompanyId());
            SessionMessages.add(request, "book-deleted");

        } else {
            SessionErrors.add(request, "error-deleting");

        }

    }

*/ 
```

请指导我在哪里做错了..

我在资源操作文件夹中的 default.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<resource-action-mapping>

    <portlet-resource>
        <portlet-name>RestaurantPortlet</portlet-name>
        <permissions>
            <supports>
                <action-key>addRestaurant</action-key>
                <action-key>VIEW</action-key>
            </supports>
            <community-defaults>
                <action-key>VIEW</action-key>
            </community-defaults>
            <guest-defaults>
                <action-key>VIEW</action-key>
            </guest-defaults>

            <guest-unsupported>
                <action-key>addRestaurant</action-key>
            </guest-unsupported>
        </permissions>
    </portlet-resource>

    <model-resource>
        <model-name>com.test.Restaurant</model-name>
        <portlet-ref>
            <portlet-name>RestaurantPortlet</portlet-name>
        </portlet-ref>
        <permissions>
            <supports>
                <action-key>addRestaurant</action-key>
                <action-key>DELETE</action-key>
                <action-key>UPDATE</action-key>
                <action-key>VIEW</action-key>
            </supports>
            <community-defaults>
                <action-key>VIEW</action-key>
            </community-defaults>
            <guest-defaults>
                <action-key>VIEW</action-key>
            </guest-defaults>
            <guest-unsupported>
                <action-key>UPDATE</action-key>
                <action-key>DELETE</action-key>
            </guest-unsupported>
        </permissions>
    </model-resource>

</resource-action-mapping> 
```

这是我的restuarntactionutilclass，我怀疑这里出了什么问题……但不知道我是对还是错。请检查一下……

```
package com.test.util;

import java.util.List;

import javax.portlet.ActionRequest;

import com.test.model.Restaurant;
import com.test.model.impl.RestaurantImpl;

import com.liferay.portal.kernel.util.ParamUtil;
import com.liferay.portal.kernel.util.Validator;
import com.liferay.portal.kernel.util.WebKeys;
import com.liferay.portal.theme.ThemeDisplay;

/*Apr 20, 2011
 5:17:37 PM
 */
public class RestaurantActionUtil {

    public static Restaurant getRestaurantFromRequest(ActionRequest request) {
        ThemeDisplay themeDisplay = (ThemeDisplay) request
                .getAttribute(WebKeys.THEME_DISPLAY);
        String Name = ParamUtil.getString(request, "Name",
                "Name Not Availible");
        String Location = ParamUtil.getString(request, "Location",
                "Location Not Availible");
        String table_count = ParamUtil.getString(request, "Table_Count", "0");
        String room_count=ParamUtil.getString(request, "Room_Count","0");
        String reseller_id=ParamUtil.getString(request, "Reseller_ID","0");

        int table = Integer.parseInt(table_count);

        int room = Integer.parseInt(room_count);

        int reseller = Integer.parseInt(reseller_id);

        Restaurant resto = new RestaurantImpl();
        resto.setName(Name);
        resto.setLocation(Location);
        resto.setTable_Count(table);
        resto.setRoom_Count(room);
        resto.setReseller_ID(reseller);
        resto.setCompanyId(themeDisplay.getCompanyId());
        resto.setGroupId(themeDisplay.getLayout().getGroupId());
        resto.setUserId(themeDisplay.getUserId());

        return resto;
    }

} 
```

对象恢复总是为空

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T11:47:41.497

有两个选项可能会有所帮助：

1.  将此添加到 liferay-portlet.xml

    添加默认资源标签

2.  或者通过提供另一个 xml 在您的自定义服务中添加操作。查看[http://www.liferay.com/community/wiki/-/wiki/Main/Permissioning+in+Plugin+Environment#section-Permissioning+in+Plugin+Environment-Step+1](http://www.liferay.com/community/wiki/-/wiki/Main/Permissioning+in+Plugin+Environment#section-Permissioning+in+Plugin+Environment-Step+1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T10:22:39.513

也许这有帮助[http://www.liferay.com/community/forums/-/message_boards/message/3465412](http://www.liferay.com/community/forums/-/message_boards/message/3465412)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-01T09:14:30.240

我刚刚在 Liferay 数据库的资源操作表中编辑了一个条目，其中包含我想要添加的操作，例如“addRestaurant”，最后是它的工作。

# java - 使用 EntityManager 时传递给 Pesist 的分离实体

> ID：12638017
> 
> 赞同：0
> 
> 时间：2012-09-28T10:13:06.083
> 
> 标签：java, hibernate, jpa, jpa-2.0, entitymanager

我有两个实体映射为一对多关系。我在 ID 为 1,2 的数据库中保留两个对象

同类型

场景 1\. 我正在尝试删除 Id '1' 并`getEntityManager.remove(object1)`显示

分离的实体传递给子实体持续存在..甚至找到了数据库记录。

场景 2\. 当我尝试删除 Id '2' 并`getEntityManager.remove(object2)`删除记录 2 时。

此异常仅发生在同一时间输入记录之前。

在我关闭并重新打开页面后，我从 Db 中删除了 ID 1,2，它成功地工作了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T11:23:54.853

> com.manam.mobee.persist.entity.MobeeLabelTemplate#null

检查`mobeeLabel.getMobeeLabelTemplates()`内部`deleteLabel()`并确保它们具有**id**。

* * *

***编辑：***

您需要对象中的 id 来更新和删除。在删除 mobeeLabel 之前，执行 findById 然后将其删除。应该有一些未插入的 mobeeLabelTemplates（或未更新 - id 与数据库不同步）。尝试这样的事情：

```
MobeeLabel freshMobeeToDelete = (MobeeLabel) getEntityManager().find(MobeeLabel.class, mobeeLabel.getId());
getEntityManager().remove(freshMobeeToDelete); 
```

# java - java中的GAE任务队列处理时间

> ID：12638022
> 
> 赞同：2
> 
> 时间：2012-09-28T10:13:28.830
> 
> 标签：java, google-app-engine, servlets, task-queue

在我的 jsp Web 应用程序中，当我处理报告时，它总是会导致 DeadlineExceededException。所以我把这个过程移到了应用引擎的任务队列中。但是使用任务队列，它不会生成报告，也不会显示任何错误消息。任务队列是否是 DeadlineExceededException 的正确解决方案，或者任务队列的处理时间限制为 1 分钟。

我的 queue.xml 配置如下

```
<?xml version="1.0" encoding="UTF-8"?>
<queue-entries>
    <queue>
        <name>default</name>
        <rate>5/s</rate>
    </queue>
    <queue>
        <name>subscription-queue</name>
        <rate>5/s</rate>
    </queue>
    <queue>
        <name>excel-generator-queue</name>
        <rate>5/s</rate>
    </queue>
</queue-entries> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T04:12:00.367

有两个截止日期需要考虑 - 您进行单个 App Engine API 调用的截止日期，以及您的任务处理的总体截止日期。

当您调用 App Engine API 时，有时调用不会在大约 5 秒内完成，您将收到 DeadlineExceededException。您可以选择再次拨打电话。Url Fetch 和 Lease Tasks 等一些 API 允许您指定截止日期。如果您捕获到异常，您将看到哪个代码超时。

使用任务队列时，任务处理的总期限为 10 分钟，除非您使用后端 - [https://developers.google.com/appengine/docs/python/backends/](https://developers.google.com/appengine/docs/python/backends/) （不使用任务队列时，总期限只有 60 秒。）

问题提到“它不会生成报告”。执行任务时，不存在用于查看进度报告或最终报告的 Web 浏览器。在您的报告生成中添加一些日志记录。将生成的报告存储在数据存储中，或通过电子邮件发送。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T10:42:50.910

任务队列超时限制远大于 1 分钟。（至少需要 10 分钟；您必须阅读 GAE 文档才能找到答案）。

此外，请检查您使用的是推送队列还是拉取队列，以及您是否对自己的选择感到满意。我认为您的配置可能适用于默认的推送队列类型。

您是否在排队任务调用的代码中放置了任何日志记录代码？这将允许您找出代码是否正在执行。

# spring - 如何在调用任何 bean/控制器之前拦截 Spring AOP/Aspectj 中的请求？

> ID：12638027
> 
> 赞同：0
> 
> 时间：2012-09-28T10:13:56.390
> 
> 标签：spring, jakarta-ee, spring-webflow

在调用任何 bean/控制器方法之前，我必须记录请求参数/表单数据。我的应用程序是用 Spring Web Flow 编写的。

实施它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T16:01:59.017

我认为 Spring AOP 可以帮助你。

定义一个选择所有控制器方法的切入点表达式并使用 @Before 建议来记录参数

例子：

```
@Before("execution(@controllers.package * *(..))")
public void logArguments(JoinPoint joinPoint) throws Throwable {
    logger.debug("Entering method - Arguments : " + joinPoint.getArgs());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T12:13:04.053

如果需要在到达控制器之前拦截每个请求，可以使用拦截器。您必须使用 HandlerInterceptorAdapter 扩展您的类。您可以覆盖它的 preHandle 方法以在每个请求到达控制器之前拦截它。您将在此方法中访问请求和响应对象以更改目标页面或 url。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-28T11:54:56.780

您不需要 AOP/Aspectj，您可以使用[Servlet 过滤器来做到这一点](http://www.oracle.com/technetwork/java/filters-137243.html)

# mysql - MySQL：将时间跨度块与 SQL 结合起来

> ID：12638028
> 
> 赞同：0
> 
> 时间：2012-09-28T10:14:00.903
> 
> 标签：mysql, sql, date, timespan

我有一张带有时间跨度块的桌子。
时间跨度具有开始日期和天数

1.  表中有不重叠的时间跨度，例如：
    2012-01-01 + 5 天和 2012-05-01 + 3 天

2.  并且有重叠的时间跨度，例如：
    2012-01-01 + 5 天和 2012-01-03 + 3 天

3.  但是，我对连续发生的那些最感兴趣，例如：
    2012-01-01 + 5 天和 2012-01-06 + 3 天和 2012-01-09 + 13 天

我需要一个通常选择 1\. 和 2\. 的查询（每个条目作为单行）。
案例 3\. 必须选择组合为单行，例如
**2012-01-01 + 5**天和 2012-01-06 + **3**天 = **2012-01-01 + 8**天
**2012-01-01 + 5 天和** 2012- 01-06 + **3**天和 2012-01-09 + **13**天 = **2012-01-01 + 21 天**

这是一个示例数据库：

```
CREATE TABLE IF NOT EXISTS `chunks` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`start` date NOT NULL,
`length` smallint(4) unsigned NOT NULL,
PRIMARY KEY (`id`)
) ENGINE=MyISAM ;

INSERT INTO `chunks` (`id`, `start`, `length`) VALUES
(1, '2012-01-01', 5),
(2, '2012-05-01', 3),
(3, '2012-01-03', 3),
(4, '2012-01-06', 3),
(5, '2012-01-09', 13); 
```

这对 MySQL 可行吗？或者以后用Java更好地完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T13:45:20.677

您的问题没有受到足够的约束，因为两个间隔可能在同一日期到达。在这种情况下，它们如何合并？

```
2012-01-01 5
2012-01-02 4
2012-01-06 3 
```

换句话说，这个问题相当于遍历一棵树，先从叶子开始。一般来说，要解决这个问题，您需要跳出仅使用 SQL 的解决方案，例如循环。

如果序列之间存在间隙——即没有重叠——那么问题在 SQL 中是可以解决的。一种方法是使用日历表。第二种是使用复杂的SQL判断一个时间段是否应该与下一个时间段合并，然后找到第一个不合并的时间段，然后将结果分组以将这些时间段组合在一起。

# java - java多线程isalive与否

> ID：12638038
> 
> 赞同：2
> 
> 时间：2012-09-28T10:14:42.797
> 
> 标签：java, multithreading

这样我正在生成线程，但是在 for 循环之后如何检查所有线程是否处于活动状态或不
进一步处理取决于所有线程
，如果线程`dead`然后继续进行进一步处理

```
for (int i = 0;i<List.size();i++) {
                if(List.get(i).trim().length() >0 ){

                    Thread thread = new Thread("Thread"+i){
                        public void run(){              
                            threading(List.get(i),ctx,userSesionObj);
                        }
                      };
                      thread.start();
                }
            } 
```

这`threading`是我的函数，它对我传递的不同数据执行

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T10:18:12.227

您可以使用[ExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)。事实上，我强烈推荐这个。您可以指定不同的线程行为等。执行器将为每个提交的线程返回一个[Future](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Future.html)对象，然后您可以遍历每个`Future`收集结果。所以以下内容：

```
for (Future f : futures) {
   f.get(); // get a result here...
} 
```

将在所有`Futures`返回数据时完成（即当线程完成时）。Executor API 的工作级别比`join()`/ `notify()`etc 更高，使用起来更安全。

这里有很多功能可以使用，我会推荐[教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/exinter.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T10:18:01.297

你可能想要`join`线程。参照。[http://docs.oracle.com/javase/tutorial/essential/concurrency/join.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/join.html)。鉴于您可以暂停主线程，即。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T10:21:55.573

使用`ExecutorService`

**-** `Executors`很好地管理`Thread`对象和`Async`任务

**-**这里不是直接运行线程的客户端，而是中间对象。

**-**`submit()`将此与返回`Future`对象的方法相结合。

**-** `Future`是异步任务的**结果**。

**-**您可以使用`get()`Future的方法，它具有**阻塞性质**，或者`get()`方法与`isDone()`方法一起使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T10:17:59.883

使用[Thread](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Thread.html#isInterrupted%28%29)类中的*isAlive方法。*

从文档中：

> 测试此线程是否存在。如果线程已启动且尚未死亡，则该线程处于活动状态。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T10:19:31.843

正如彼得建议的那样，这应该做......

```
int count = selectedCategoryList.size();
List<Thread> threads = new ArrayList<Thread>();
for (int i = 0; i < count; i++) {
  if(selectedCategoryList.get(i).trim().length() >0 ){
    final Long CategoryID = Long.parseLong(selectedCategoryList.get(i));
    Thread thread = new Thread("ReplaceMedicationThread"+i){
                          public void run(){              
                            threadingForReplacingMedication(CategoryID,ctx,userSesionObj);
                          }
                    };
    threads.add(thread):
   }
}

//start them in a loop
//join them in a loop
//move on.... 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-28T10:37:32.887

在继续处理之前等待某些线程完成的简单方法是使用 CompletionService。这就是你将如何使用它：

```
// list of data that need to be processed before continuing execution
List<DataForProcessing> workList = // ...

// An instance of an Executor http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Executors.html
Executor exec = // ...

// asume that ResultData is a data structure returned from the processing each
// DataForProcessing instance. If processing does not return a value you could
// parameterise the completion service as CompletionService<Void>.
CompletionService<ResultData> service = new ExecutorCompletionService<ResultData>(executor);

// Submit the tasks for processing. Each task will be processed by the executor and
// its result will be wrapped in a Future and place in a BlockingQueue maintained by
// the CompletionService instance. Again, if your submitted task does not return
// a value you should parameterise your task as Callable<Void>.
for (DataForProcessing data: workList) {
  service.submit(new Callable<ResultData>() {
    public ResultData call() {
      // process the data here and return some result (optionally).
    }
  });
 }

// retrieve the results as the become available.
for (int i = 0; i < workLoad.size(); i++) {
  // Retrieve the next processed result. CompletionService returns each task in a
  // Future which provides you with the means to control the lifecycle of the task.
  // When a submitted task is processed by the executor, its Future is placed on a
  // BlockingQueue maintained by the CompletionService. Invoking take() will return
  // the next available result. If your tasks do not return a result you would still
  // need to call Future<Void> f = service.take() in order to wait for every task
  // to finish before proceeding.
  Future<ResultData> f = service.take();
  // If your task returns some result you may access it via the get() method on the
  // task's Future.
  ResultData result = f.get();
  // do some processing if needed
  process(result);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-01T14:28:39.713

我只是用一个简单的全局 int 参数完成了它。我就是这样做的：

```
do{
    Thread.sleep(800);
    System.out.println("threadCounter=="+threadCounter);
    }while(threadCounter != 0); 
```

在哪里`threadCounter`定义全局`int`初始化`zero`

在制作我做+1的每个线程时`threadCounter`；

在我的职能`threading`中，我做-1`threadCounter`

这里`Thread.sleep(800)`不运行那个do-while循环继续。

# php - PHP 5.3 和 IIS 7 中的最大文件上传大小

> ID：12638048
> 
> 赞同：0
> 
> 时间：2012-09-28T10:15:34.277
> 
> 标签：php, iis-7

我已经安装了 PHP 5.3 并配置了 IIS 7。我正在构建 Web 应用程序以使用 php 上传多个 zip 文件。我在 php 文件夹的 php.ini 中更改了以下值：

```
post_max_size = 1024M
upload_max_filesize = 1024M
max_file_uploads = 1024 
```

我还检查了 phpinfo() 以检查更改效果，它正在接受更改。问题是，当我上传较小尺寸的 zip 文件时，文件已上传，但未上传较大尺寸的 zip 文件。可能是什么问题。上传较大的 zip 文件或需要在 IIS 7 中配置是否有任何更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T10:26:08.330

试试这个：在 php 5.3.10

```
upload_max_filesize = 25M 
```

或者可能在 5.3

```
max_file_uploads = 1024M 
```

# php - 获取 URL 时我做错了什么

> ID：12638058
> 
> 赞同：0
> 
> 时间：2012-09-28T10:16:04.350
> 
> 标签：php, html, http-host

我想在我的页面上放置链接。

我用

```
echo "<a href=\"".$_SERVER['HTTP_HOST']."/projecten/project.php?project=1"; 
```

我想去，`mydomain.nl/project/project.ph?project=1` 但我得到的不是那个链接`http://mydomain.nl/projecten/mydomain/projecten/project.php?project=1`

我以为

```
$_SERVER['HTTP_HOST'] 
```

会给我`http://mydomain.nl`，为什么不这样做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T10:18:24.660

`http://`以或开始您的`https://`链接[`//`](http://paulirish.com/2010/the-protocol-relative-url/)。[`$_SERVER['HTTP_HOST']`](http://php.net/manual/en/reserved.variables.server.php)只包含主机，不包含协议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T10:27:38.503

您需要指定协议为 http://

```
echo '<a href="http://'.$_SERVER['HTTP_HOST'].'"/projecten/project.php?project=1'; 
```

或用于安全链接使用

```
echo '<a href="https://'.$_SERVER['HTTPS_HOST'].'"/projecten/project.php?project=1'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T10:23:39.417

你可以很容易地看到这个脚本使用了什么配置

```
<?php
    phpinfo();
?> 
```

我想你想要的是使用 $_SERVER[ **"SERVER_NAME"** ]

# jquery - 如何在 jquery 插件中采用多个嵌套参数？

> ID：12638067
> 
> 赞同：0
> 
> 时间：2012-09-28T10:16:46.133
> 
> 标签：jquery

我正在学习如何制作 jquery 插件，并且正在尝试制作一个简单的幻灯片插件。我希望它看起来像：

```
$("#container").myslider({
   settings:{
      //slide1,  slide2 etc are supposed to be ids of slide divs
      slide1:{
         option1:"something",
         option2:"something"
      }
      slide2:{
      ............ 
       .......
       .......

   }
}) 
```

如您所见，`settings`是实际参数，但我希望它接受嵌套参数。但由于我事先不知道幻灯片的数量，所以我不能简单地定义这些。那么处理这种嵌套+动态参数的基本插件结构是什么样的呢？

# selector - Android ImageView：动态选择器在 Horizo ntalScrollView 中不起作用

> ID：12638084
> 
> 赞同：0
> 
> 时间：2012-09-28T10:17:52.180
> 
> 标签：selector, state, imagebutton, horizontalscrollview

我对 Horizo​​ntalScrollView 和其中包含的 ImageButton（也是 ImageView）有疑问。当填充 Horizo​​ntalScrollView 时，我已经动态分配了一个可绘制选择器。

一切正常，因为您可以单击并触发 OnClickListener。问题在于项目状态。单击 ImageButton（触摸屏）时，显示正确的可绘制对象，但是当我松开手指（非触摸屏）时，显示默认图像而不是按下的图像。如果我分配一个静态可绘制选择器（xml 选择器），也会出现同样的问题。

这是动态选择器的代码：

公共静态StateListDrawable setStateListDrawable（上下文上下文，TypedArray图像）{

```
 StateListDrawable states = new StateListDrawable();

    try{
        states.addState(new int[] {android.R.attr.state_pressed},images.getDrawable(1));
        states.addState(new int[] {android.R.attr.state_focused},images.getDrawable(1));
        states.addState(new int[] { },images.getDrawable(0));
    }catch(Exception e){
        int id = context.getResources().getIdentifier("ID1", "array", context.getPackageName());
        images = context.getResources().obtainTypedArray(id);

        states.addState(new int[] {android.R.attr.state_pressed},images.getDrawable(1));
        states.addState(new int[] {android.R.attr.state_focused},images.getDrawable(1));
        states.addState(new int[] { },images.getDrawable(0));
    }

    return states;
} 
```

这是 Horizo​​ntalScrollView xml：

```
<HorizontalScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/horizontalScrollSports"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="#ffffff" 
    android:scrollbars="none"
    android:descendantFocusability="blocksDescendants">

    <LinearLayout 
        android:id="@+id/iwm_sports_container" 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content">

    </LinearLayout>

</HorizontalScrollView> 
```

在此先感谢您，并以我的英语向您道歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T22:44:54.300

好的，解决了。我不敢相信！！！

我已将“选定状态”放在动态选择器上：

```
public static StateListDrawable setStateListDrawable(Context context, TypedArray images){

        StateListDrawable states = new StateListDrawable();

        try{
            states.addState(new int[] {android.R.attr.state_pressed},images.getDrawable(1));
            states.addState(new int[] {android.R.attr.state_focused},images.getDrawable(1));
            **states.addState(new int[] {android.R.attr.state_selected},images.getDrawable(1));**
            states.addState(new int[] { },images.getDrawable(0));
        }catch(Exception e){
            int id = context.getResources().getIdentifier("ID1", "array", context.getPackageName());
            images = context.getResources().obtainTypedArray(id);

            states.addState(new int[] {android.R.attr.state_pressed},images.getDrawable(1));
            states.addState(new int[] {android.R.attr.state_focused},images.getDrawable(1));
            **states.addState(new int[] {android.R.attr.state_selected},images.getDrawable(1));**
            states.addState(new int[] { },images.getDrawable(0));
        }

        return states;
    } 
```

我更改了 LinearLayout 上的属性 descendantFocusability：

```
<HorizontalScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/horizontalScrollSports"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="#ffffff" 
    android:scrollbars="none"
    android:layout_gravity="center_horizontal">

    <LinearLayout 
        android:id="@+id/iwm_sports_container" 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        **android:descendantFocusability="blocksDescendants"**>

    </LinearLayout>

</HorizontalScrollView> 
```

干杯！！！

PD：对不起我的英语！！！

# sql-server - 添加插入记录的数据和时间信息。不是通过使用插入语句

> ID：12638089
> 
> 赞同：0
> 
> 时间：2012-09-28T10:18:13.363
> 
> 标签：sql-server, sql-server-2008

我有一个`Employee`带有列的表：`Id, Name, Address, City, Createddate`

现在，我必须在将`createddate`记录插入表时添加此列，而不是通过使用 INSERT STATEMENT。

是否有任何默认选项可以在将行添加到表时添加日期信息？

在这方面给我建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T10:24:17.767

将字段的默认值设置为`Getdate()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T10:24:32.547

如果没记错的话，当你创建一个表时，你可以让它自动放置值，比如身份（主键）或日期戳。请参见下面的示例：

```
CREATE TABLE [dbo].[table] (
      tableID [int] IDENTITY(1,1) NOT NULL
    , DatumCreate [datetime] DEFAULT GetDate() NOT NULL,
    , other values ....
    , CONSTRAINT pk_FactuurID PRIMARY KEY (FactuurID)
    ) 
GO 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T10:21:29.143

是的，您可以按照其他人的建议使用*默认值*（带有`GetDate()`），或者，如果您需要更大的灵活性（例如更新列），您可以使用触发器来检查插入的值并直接设置列值。

像这样：

```
CREATE TRIGGER my_trigger
   ON  my_table
   AFTER INSERT, UPDATE, DELETE
AS 
BEGIN
    if exists(select * from inserted)
    -- we're covering just insert cases here..
    begin
       insert into my_table(col1, col2, col3, ..., col_timestamp) 
       select inserted.col1, inserted.col2...., CURRENT_TIMESTAMP from inserted
    end
END

GO 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-28T10:24:39.360

好吧，您不必使用 INSERT，但您可能必须使用 CREATE

[MySQL 时间戳](https://dev.mysql.com/doc/refman/5.0/en/timestamp-initialization.html)

# javascript - Javascript将文本从URL存储到数组中

> ID：12638100
> 
> 赞同：0
> 
> 时间：2012-09-28T10:19:27.873
> 
> 标签：javascript, machine-learning

我正在尝试阅读此链接

> [http://archive.ics.uci.edu/ml/machine-learning-databases/semeion/semeion.data](http://archive.ics.uci.edu/ml/machine-learning-databases/semeion/semeion.data)

并将其格式化并将其存储在 1593x256 数组中，因此我可以在其上应用一些 ML 技术并使用它。任何想法如何获取数据？也许jquery有什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:28:12.220

从您的问题中，我了解到您想知道如何实际获取数据，即获取 URL 并将内容放入 javascript 中的字符串变量中，以便继续处理它。为此，[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)应该是有价值的。

文档中给出了许多示例，一个简单的示例是

```
$.ajax({
  url: "http://archive.ics.uci.edu/ml/machine-learning-databases/semeion/semeion.data",
}).done(function(content) {
  // do something with the content
}); 
```

请记住，尽管尝试从 Web 应用程序执行此类操作需要您托管网站的服务器添加以允许跨域 ajax，例如参见[http://usejquery.com/posts/the-jquery-cross-domain -ajax-guide](http://usejquery.com/posts/the-jquery-cross-domain-ajax-guide)获取相关信息。

解析数据可以通过遍历字符串来完成，按行将其拆分为数组，然后将每行拆分为列。如果您不想自己编写该代码，此处提供了许多指针[来解析 CSV 数据的 Javascript 代码](https://stackoverflow.com/questions/1293147/javascript-code-to-parse-csv-data)- 具体而言，JQuery-cvs 似乎可以配置为完全适合您的需求。

# .net - 等待 UDPClient.ReceiveAsync 超时

> ID：12638104
> 
> 赞同：9
> 
> 时间：2012-09-28T10:19:33.193
> 
> 标签：.net, timeout, udpclient, async-await

我正在使用如下所示的 UDPClient

```
dim c = New UDPClient(port)
client.CLient.ReceiveTimeout = 1
await client.ReceiveAsync() 
```

但是，即使我设置了超时，等待也不会终止或抛出。这是正常行为吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T14:51:57.220

Socket.ReceiveTimeout 的 MSDN 库文章中明确提到了它：

> 获取或设置一个值，该值指定**同步**Receive 调用将超时的时间量。

重点补充。当您使用 ReceiveAsync() 时，您正在执行与同步接收相反的操作。解决方法是使用 System.Timers.Timer 在调用之前启动并在之后停止。关闭 Elapsed 事件处理程序中的套接字，以便 ReceiveAsync() 方法以 ObjectDisposed 异常终止。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-28T12:16:21.803

是的。上的异步方法`Socket`不实现超时。如果您需要异步操作超时，您必须自己创建它们（例如，使用`Task.Delay`and `Task.WhenAny`）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-11-30T16:05:46.677

我最近遇到了这个问题，这就是我解决它的方法：

```
async Task Listen(IPEndPoint ep, int timeout)
{
    using (var udp = new UdpClient(ep))
    {
        var result = await Task.Run(() =>
        {
            var task = udp.ReceiveAsync();
            task.Wait(timeout);
            if (task.IsCompleted)
            { return task.Result; }
            throw new TimeoutException();
        });

        Receive(result); // use the result
    }
} 
```

# css - 负边距在 IE 7 中不起作用

> ID：12638105
> 
> 赞同：2
> 
> 时间：2012-09-28T10:19:35.273
> 
> 标签：css, internet-explorer

我有以下代码：

```
 <style>
            .earthlogo{float: right; margin: -270px 0px 0px 0px;}
 </style>

    <div class="banner">   
        <p>ENVISIONING A BETTER TOMORROW</p> 
        <div class="earthlogo">
            <img src="images/earth.png"/>
        </div>
    </div> 
```

在这里，我将负边距应用于类`earthlogo`及其在 firefox 和 google chrome 中的工作，但在 IE 7 中没有。所以这是在 CSS 中应用负边距的正确方法，如果它是正确的方法，那么为什么它在 IE 7 中不起作用。如何我可以修复 IE 问题吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T10:27:56.020

`margins`您可以使用`position: relative;`负数`top`或`left`偏移量来代替负数；

```
.earthlogo {
     position: relative;
     top: -270px; /*pull it 270 pixels up*/
     left: 0px; /*we don't want to pull it to the left*/
     margin: 0px; /*make sure no margins are applied*/
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-09T11:57:52.537

您可以使用

```
position: relative; 
```

随着

```
 top:270px left:0px offsets 
```

# linux - Linux内核制作预定义的宏

> ID：12638108
> 
> 赞同：0
> 
> 时间：2012-09-28T10:19:48.373
> 
> 标签：linux, build, kernel

哪些是可用于 linux 内核构建的预定义 Make 宏列表

我遇到过

> make V=0|1 [targets] 0 => quiet build (default), 1 => verbose build
> 
> make V=2 [targets] 2 => 给出重建目标的理由
> 
> make O=dir [targets] 在“dir”中找到所有输出文件，包括 .config
> 
> make C=1 [targets] 使用 $CHECK 检查所有 c 源代码（默认稀疏）
> 
> make C=2 [targets] 使用 $CHECK 强制检查所有 c 源代码

然后很快我就遇到了一个宏M

$ make M=drivers/usb/serial

这将在该目录中构建所有需要的文件并链接最终的模块图像。

我想知道在哪里可以找到所有 make 宏的完整列表。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:24:08.253

这不是宏，只是变量赋值。然后makefile根据这些变量决定做什么。看看 [从命令行传递额外的变量来制作](https://stackoverflow.com/questions/2826029/passing-additional-variables-from-command-line-to-make)

# java - cas+spring 安全性

> ID：12638111
> 
> 赞同：1
> 
> 时间：2012-09-28T10:19:59.563
> 
> 标签：java, spring, spring-security, cas, jasig

我正在尝试在我的应用程序中实现 SSO，就目前而言，我遇到了下一个问题：

```
HTTP Status 401 - Authentication Failed: Failed to provide a CAS service ticket to validate

type Status report

message Authentication Failed: Failed to provide a CAS service ticket to validate

description This request requires HTTP authentication (Authentication Failed: Failed to provide a CAS service ticket to validate). 
```

我在另一个tomcat上启动我的cas服务器，在那里登录，当我进入我的应用程序的登录页面时，然后：1.然后没有自动登录2.当我输入凭据时，我看到上面显示的堆栈跟踪我从[这个网站](http://www.oudmaijer.com/2009/12/28/spring-3-spring-security-3-cas-3-3-4-integration/)举了一个例子.

这是我的春季安全上下文：

```
<security:global-method-security  pre-post-annotations="enabled" />

    <security:http use-expressions="true" auto-config="true"
        entry-point-ref="casAuthenticationEntryPoint" >

    <security:custom-filter position="CAS_FILTER" ref="casAuthenticationFilter"></security:custom-filter>

        <security:access-denied-handler  ref="accessDeniedHandler" />

        <security:form-login login-page="/login.html"
            authentication-failure-url="/login.html?login_error=1"
            default-target-url="/index.html" 
            always-use-default-target="false"
            login-processing-url="/j_spring_security_check"
            authentication-failure-handler-ref="failureHandler"
            authentication-success-handler-ref="successHandler" />
        <security:logout logout-url="/logout" logout-success-url="/login.html" />

        <security:intercept-url pattern="/member/**" access="hasRole('viewer')" />
        <security:intercept-url pattern="/admin/**" access="hasRole('SiteAdmin')" />
        <security:intercept-url pattern="/admin/**" access="hasRole('SystemAdmin')" />

        <security:remember-me />
    </security:http>

    <security:authentication-manager alias="authenticationManager">
        <security:authentication-provider user-service-ref="myUserDetailsService" />
        <security:authentication-provider ref="casAuthenticationProvider"></security:authentication-provider>
    </security:authentication-manager>

    <bean id="myUserDetailsService"
        class="com.mypackage.MyUserDetailsService">
    </bean>

    <bean id="authenticationEntryPoint"
        class="org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint">
        <property name="loginFormUrl" value="/login.html" />
        <property name="forceHttps" value="false" />
    </bean>

    <bean id="successHandler"
        class="org.springframework.security.web.authentication.SavedRequestAwareAuthenticationSuccessHandler">
        <property name="defaultTargetUrl" value="/member/index.html" />
    </bean>

    <bean id="failureHandler"
        class="org.springframework.security.web.authentication.ExceptionMappingAuthenticationFailureHandler">
        <property name="defaultFailureUrl" value="/login.html?error=auth_fail" />
    </bean>

    <bean id="bannedHandler"
        class="org.springframework.security.web.authentication.SimpleUrlAuthenticationFailureHandler">
        <property name="defaultFailureUrl" value="/login.html?error=banned" />
    </bean>

    <bean id="accessDeniedHandler"
        class="org.springframework.security.web.access.AccessDeniedHandlerImpl">
        <property name="errorPage" value="/403.jsp"></property>
    </bean>

    <bean id="serviceProperties" class="org.springframework.security.cas.ServiceProperties">
        <property name="service" value="http://localhost:8080/spring-security-cas/j_spring_cas_security_check"></property>
        <property name="sendRenew" value="false"></property>
    </bean> 

    <bean id="casAuthenticationFilter" class="org.springframework.security.cas.web.CasAuthenticationFilter">
        <property name="authenticationManager" ref="authenticationManager"></property>
    </bean>

    <bean id="casAuthenticationEntryPoint" class="org.springframework.security.cas.web.CasAuthenticationEntryPoint">
        <property name="loginUrl" value="http://localhost:9080/cas-server-webapp-3.4.10/login"></property>
        <property name="serviceProperties" ref="serviceProperties"></property>
    </bean>

    <bean id="casAuthenticationProvider" class="org.springframework.security.cas.authentication.CasAuthenticationProvider">
        <property name="userDetailsService" ref="myUserDetailsService"></property>
        <property name="serviceProperties" ref="serviceProperties"></property>
        <property name="ticketValidator">
            <bean class="org.jasig.cas.client.validation.Cas20ServiceTicketValidator">
                <constructor-arg index="0" value="http://localhost:9080/cas-server-webapp-3.4.10"></constructor-arg>
            </bean>
        </property>
        <property name="key" value="cas"></property>
    </bean> 
```

在 web.xml 中，我已经包含了 spring 安全上下文并在 pom 中设置了适当的侦听器等（我使用 maven）我已经添加了所需的依赖项，如文章中所述。但问题依然存在。我很高兴有任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T10:38:46.967

从您的错误消息“此请求需要 HTTP 身份验证”看来，您的 CAS 服务器启用了身份验证。您需要禁用它并通过 HTML 页面登录（即它将是 JSP、ASP 或类似的东西）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-03T02:19:48.450

我得到同样的痕迹，当

```
<servlet-mapping>
    <servlet-name>springmvc</servlet-name>
    <url-pattern>*.do</url-pattern>
</servlet-mapping> 
```

但是 cas 登录 url 没有 *.do 后缀。当我添加 .do 时效果很好。

# windows-8 - 虚拟键盘打开时以编程方式将控件滚动到视图中

> ID：12638117
> 
> 赞同：3
> 
> 时间：2012-09-28T10:20:32.800
> 
> 标签：windows-8, windows-runtime, winrt-xaml

我有一个带有一组垂直文本框的页面。如果其中一个被聚焦，则所有这些都应该可见，即使显示屏幕键盘也是如此。它们的数量足以让它们全部放入键盘上方的可用空间中。当底部文本框获得焦点时，页面会自动向上滚动，以便所有这些都可见，但如果顶部文本框获得焦点，屏幕键盘会覆盖底部。

这是我的页面的简化示例：

```
<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <ItemsControl ItemsSource="{Binding List}" Margin="120 140 0 0">
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Horizontal" Margin="0 10 0 0">
                    <TextBox Text="{Binding Text, Mode=TwoWay}" />
                </StackPanel>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
</Grid> 
```

`DataContext`包含 10 个项目的列表：

```
public class Item
{
    public string Text { get; set; }
}

public class ViewModel
{
    public List<Item> List { get; set; }
}

public MainPage()
{
    this.InitializeComponent();
    DataContext = new ViewModel
    {
        List = Enumerable.Range(0, 10).Select(i => new Item { Text = i.ToString() }).ToList()
    };
} 
```

我已经尝试了几种方法，但都没有成功：

1.  在`TextBox.GotFocus`事件中以编程方式将焦点更改为底部文本框并返回。
2.  In `TextBox.GotFocus` event and `InputPane.Showing` event tried setting the vertical offset of a `ScrollViewer`: (a) the one I included in the page around the `Grid` (b) the one in the visual tree above the `Page` that Windows uses to automatically bring the focused control in view. In both cases the `ScrollViewer` doesn't react to `ScrollToVerticalOffset` calls.

I've also looked at the [sample](http://code.msdn.microsoft.com/windowsapps/Keyboard-Events-Sample-866ba41c#content) suggested in [this question](https://stackoverflow.com/questions/11933495/on-screen-keyboard-is-hiding-content) but it reacts to onscreen keyboard differently, not by scrolling the page.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T10:16:17.843

Thanks to Cyprient's answer I finally managed to get this to work. I pursued option 2.a from my question.

Adding `UpdateLayout()` call was required, but when I put it in the `GotFocus` event handler it only worked after the virtual keyboard was already opened. To make it work the first time when the keyboard was still opening, I had to make two changes:

1.  I had to put the code in the `Showing` event of `InputPane`.
2.  I had to put it in a callback for the dispatcher so that it was called only after the `Showing` event handler had already returned.

Here's the final code:

```
public MainPage()
{
    this.InitializeComponent();
    DataContext = new ViewModel
    {
        List = Enumerable.Range(0, 10).Select(i => new Item { Text = i.ToString() }).ToList()
    };

    var inputPane = InputPane.GetForCurrentView();
    inputPane.Showing += InputPane_Showing;
}

private async void InputPane_Showing(InputPane sender, InputPaneVisibilityEventArgs args)
{
    await Dispatcher.RunAsync(CoreDispatcherPriority.Normal, () =>
        {
            var parentScrollViewer = FindParent<ScrollViewer>(this.pageRoot);
            parentScrollViewer.VerticalScrollMode = ScrollMode.Enabled;
            parentScrollViewer.ScrollToVerticalOffset(65);
            parentScrollViewer.UpdateLayout();
        });
} 
```

Here's the helper function I'm using to get the reference to the same `ScrollViewer` which is used when the page contents gets scrolled automatically because the focused control would not be shown otherwise:

```
public static T FindParent<T>(FrameworkElement reference)
    where T : FrameworkElement
{
    FrameworkElement parent = reference;
    while (parent != null)
    {
        parent = parent.Parent as FrameworkElement;

        var rc = parent as T;
        if (rc != null)
        {
            return rc;
        }
    }

    return null;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T14:57:13.410

Sometimes the ScrollViewer does not refresh itself when you are using ScrollToVerticalOffset. The workaround consists in calling scrollviewer.UpdateLayout() after scrolling. It worked for me in several cases.

# javascript - 关注下一个具有“tabindex”属性的元素

> ID：12638120
> 
> 赞同：0
> 
> 时间：2012-09-28T10:20:50.913
> 
> 标签：javascript, jquery

如何专注于具有“tabindex”属性的下一个元素

我需要这样做，因为我所有的输入和选择都具有相同的 tabindex 并且没有 id

```
$('form').keypress(function (event) {

    $("*:focus").nextAll('[tabindex]').focus(); //this is not working

}); 
```

* * *

```
<div>

    <input type="text"  tabindex="1" />
    <input " type="text"  tabindex="1" />
    <br /><br />
    <input  type="text"  tabindex="1" />

    <select  tabindex="1">
        <option value=""></option>
        <option value=""></option>
        <option value=""></option>
        <option value=""></option>
        <option value=""></option>
    </select>

    <input type="text"  tabindex="1" />

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:29:04.463

您需要选择`:first`元素：

```
$(":focus").nextAll('[tabindex]:first').focus(); 
```

另请注意，您不需要`*`在选择器的开头`:focus`。这是暗示的。

这里有一个完整的模型[http://jsfiddle.net/QJQDP/1/](http://jsfiddle.net/QJQDP/1/)

您的第二个输入中还有一个错字（额外的`"`）。

# android - GridView 上的 OnItemClickListener 在片段内没有响应

> ID：12638123
> 
> 赞同：0
> 
> 时间：2012-09-28T10:21:07.423
> 
> 标签：android, android-fragments, android-gridview, android-adapter

当片段内的网格视图中显示的图像发生 onclick 事件时，我试图获取图像属性。我正在尝试从传递给 onItemClick 方法的参数中获取值。当我尝试访问任何参数时，应用程序在烤面包机内停止工作。

在烤面包机内，我将文本“test”替换为 v.getId()/position/id。然后应用程序停止。

这是代码。

```
 GridView gridView = (GridView) view.findViewById(R.id.imageGrid);
    gridView.setAdapter(new ImageAdapter(this));    
    gridView.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
         Toast.makeText(getActivity(), "test"  ,Toast.LENGTH_SHORT).show();
        }}); 
```

我需要提供任何其他详细信息吗？还是我犯了一些愚蠢的错误？

更新：我在这里添加我的错误日志。

```
09-28 16:03:53.327: W/dalvikvm(15316): threadid=1: thread exiting with uncaught exception (group=0x410f6300)
09-28 16:03:53.337: E/AndroidRuntime(15316): FATAL EXCEPTION: main
09-28 16:03:53.337: E/AndroidRuntime(15316): android.content.res.Resources$NotFoundException: String resource ID #0x10
09-28 16:03:53.337: E/AndroidRuntime(15316):    at android.content.res.Resources.getText(Resources.java:229)
09-28 16:03:53.337: E/AndroidRuntime(15316):    at android.widget.Toast.makeText(Toast.java:265)
09-28 16:03:53.337: E/AndroidRuntime(15316):    at com.example.store.fragments.AllStoresFragment$1.onItemClick(AllStoresFragment.java:111)
09-28 16:03:53.337: E/AndroidRuntime(15316):    at android.widget.AdapterView.performItemClick(AdapterView.java:298)
09-28 16:03:53.337: E/AndroidRuntime(15316):    at android.widget.AbsListView.performItemClick(AbsListView.java:1086)
09-28 16:03:53.337: E/AndroidRuntime(15316):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:2855)
09-28 16:03:53.337: E/AndroidRuntime(15316):    at android.widget.AbsListView$1.run(AbsListView.java:3529)
09-28 16:03:53.337: E/AndroidRuntime(15316):    at android.os.Handler.handleCallback(Handler.java:615)
09-28 16:03:53.337: E/AndroidRuntime(15316):    at android.os.Handler.dispatchMessage(Handler.java:92)
09-28 16:03:53.337: E/AndroidRuntime(15316):    at android.os.Looper.loop(Looper.java:137)
09-28 16:03:53.337: E/AndroidRuntime(15316):    at android.app.ActivityThread.main(ActivityThread.java:4745)
09-28 16:03:53.337: E/AndroidRuntime(15316):    at java.lang.reflect.Method.invokeNative(Native Method)
09-28 16:03:53.337: E/AndroidRuntime(15316):    at java.lang.reflect.Method.invoke(Method.java:511)
09-28 16:03:53.337: E/AndroidRuntime(15316):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
09-28 16:03:53.337: E/AndroidRuntime(15316):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
09-28 16:03:53.337: E/AndroidRuntime(15316):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:41:06.747

如果你传递`v.getId()/position/id`给`Toast`它，它会认为它代表来自`id`的`String`资源`strings.xml`，它不会找到并抛出该异常。试试这个：

```
Toast.makeText(getActivity(), String.valueOf(position), Toast.LENGTH_SHORT).show(); 
```

或者

```
Toast.makeText(getActivity(), "" + position + " " + id, Toast.LENGTH_SHORT).show(); 
```

# javascript - CheckboxFor 的 javascript 值

> ID：12638124
> 
> 赞同：4
> 
> 时间：2012-09-28T10:21:08.880
> 
> 标签：javascript, jquery, asp.net-mvc

checkboxFor 为复选框呈现以下内容：

```
<input id="IsCredit" name="IsCredit" type="checkbox" value="true" />
<input name="IsCredit" type="hidden" value="false" /> 
```

在 JavaScript 中，

```
$('#IsCredit').val(); 
```

总是如此。打勾还是不打勾

如何确定复选框是否已在 Javascript 中勾选？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-28T10:22:26.060

你可以检查它的`checked`属性。使用 jQuery：

```
var isChecked = $('#IsCredit').prop("checked"); 
```

或者使用原生 DOM 方法：

```
var isChecked = document.getElementById("IsCredit").checked; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T10:26:11.893

`val`返回表单元素的值，因为您的元素有一个`true`值，而不是`val()`返回`true`它的检查属性值，您可以使用`prop`读取`checked`复选框属性的方法或`is`方法。

```
if ( $('#IsCredit').is(':checked') {
    // ...
} 
```

或者：

```
var checked = $('#IsCredit').prop('checked'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T10:52:44.383

`$("#IsCredit").attr('checked')`会告诉你是否检查过。您还可以使用第二个参数 true/false 来选中/取消选中复选框。

根据评论，使用`prop`而不是`attr`可用时。例如：

```
$("#IsCredit").prop('checked') 
```

# git - Git - 如何拒绝包含原点标签的提交

> ID：12638131
> 
> 赞同：2
> 
> 时间：2012-09-28T10:21:28.253
> 
> 标签：git, githooks

有人可以共享一个“原点”侧钩子来检查收到的提交是否引入了错误的空白字符（在我的情况下是选项卡）并拒绝该推送？

我不能预先提交，因为我团队中有一些人，嗯......哦，没关系。;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:00:57.547

正确的地方是`update`钩子。我还没有测试过，但是这样的东西应该可以工作：

```
#!/bin/sh
branch=$1
oldrev=$2
newrev=$3

if git diff $oldrev..$newrev | grep -P '\+.*\t'; then
    echo When updating ref $branch: diff $oldrev..$newrev introduces tabs
    exit 1
fi 
```

# iphone - iOS 6 社交集成 - 转到设置问题

> ID：12638132
> 
> 赞同：12
> 
> 时间：2012-09-28T10:21:31.833
> 
> 标签：iphone, objective-c, facebook

我正在尝试将 Facebook 共享程序集成到我的应用程序中。我是`UIActivityViewController`这样使用的：

```
NSArray * activityItems = @[self.imgView.image, self.txtField.text];
UIActivityViewController * activityVC = [[UIActivityViewController alloc] initWithActivityItems:activityItems applicationActivities:nil];
[self presentViewController:activityVC animated:YES completion:nil]; 
```

到目前为止，一切都运行良好。但是我遇到了这样的问题 - 当我点击 facebook 图标并进入 facebook 共享屏幕时，会出现 alertView：

![在此处输入图像描述](../Images/05689bf7b643c4736e75847e573527cd.png)

所以问题是 - 当我单击设置时，我的控制器刚刚被解雇，没有任何反应。对于 twitter，一切运行良好 - 单击“设置”按钮时，我的应用程序将进入后台并打开“设置”。为什么这不适用于 Facebook？任何帮助都会得到帮助。

添加：使用 SLComposeViewController 会导致相同的行为 - 设置未打开

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:31:43.767

我遇到了同样的问题，您将 ios 从 6 更新到 6.0.1 并首先删除验证类型`**SLServiceTypeFacebook**`。`**SLComposeViewController**`现在对我来说一切正常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T10:28:33.910

iOS 6.0.1 解决了这个问题。更新设备上的软件它去设置视图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T11:22:40.240

这个错误似乎在新版本的 iOS (6.0.1) 中得到修复 至少自从我上次升级以来我一切都运行良好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T07:51:25.173

我刚刚将 facebook 社交框架集成到我的应用程序中，并且在 iOS 6.1 上遇到了完全相同的问题，即当我的 facebook 帐户未设置时，我会收到此警告，但单击“设置”只会关闭对话框而不是将我带到设备的设置页面。

我发现这似乎只是一个模拟器问题，它在真实设备上完美运行。我建议你试一试。

# jquery - 单击图像后居中缩放图像（JQuery）

> ID：12638138
> 
> 赞同：0
> 
> 时间：2012-09-28T10:21:48.173
> 
> 标签：jquery, html, css

我写了一个 jquery 函数来缩放图像。第一行隐藏所有图像，最后一行放大当前图像。在这两者之间，我编写了基于逻辑的代码，用于在中心显示图像。但它不起作用，有人可以帮忙吗？

```
 $("img").animate({opacity: "0.001", left: '0px'})

     var imgPosX = ( $(window).width() - $("this").width() )/2; 
     var imgPosY = ( $(window).height() - $("this").height() )/2; 

     $(this).css({"top": imgPosY+"px", "left": imgPosX+"px"}); 
     $(this).animate({opacity:"1", zoom: '150%'}, 'medium');}, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T10:26:08.277

删除`"`s 周围`this`：

```
 var imgPosX = ( $(window).width() - $(this).width() )/2;
 var imgPosY = ( $(window).height() - $(this).height() )/2; 
```

[`this`](http://www.quirksmode.org/js/this.html)是 JavaScript 中的关键字而不是字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:30:38.160

而不是改变顶部和左侧尝试**margin-left和margin-right**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T10:34:00.453

试试这个工作[演示](http://jsbin.com/orimug/7/edit)

```
$(function(){

    $("img").css({opacity: "0.001", left: '0px'});

    objthis= $("img").eq(0);
     var imgPosX = ( $(window).width() - objthis.width() )/2; 
     var imgPosY = ( $(window).height() - objthis.height() )/2; 

     objthis.css({"position":"relative","top": imgPosY+"px", "left": imgPosX+"px"}); 
     objthis.animate({opacity:"1", zoom: '150%'}, 'medium'); 
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T10:28:05.730

我建议使用 jQuery 插件，因为它们很容易找到并且几乎可以执行您要求的任何操作。查看[此示例](http://cssglobe.com/lab/tooltip/02/)以了解可能的替代方案。这还有一个额外的好处，即当您将鼠标移过时，您可以拥有缩略图并加载完整的照片（避免一次下载所有完整的图像）。

# outlook - Outlook 2007 延迟的电子邮件时间戳显示创建时间

> ID：12638142
> 
> 赞同：3
> 
> 时间：2012-09-28T10:21:59.157
> 
> 标签：outlook, timestamp, delay, outlook-2007

我有一些电子邮件设置为延迟发送。我使用了 Outlook 2007 和“直到交付”功能。问题是当用户收到电子邮件时，时间戳显示创建时间，而不是实际发送时间。有什么办法可以改变这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-08-24T21:11:11.443

我发现如果 Outlook 未处于缓存模式，它将无法工作。转到文件后，帐户设置下拉，帐户设置，突出显示我的帐户并选择更改，选中“使用缓存交换模式”，然后完成修复问题。现在时间戳是它离开发件箱的时间，而不是我推送发送的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-12T17:58:47.260

[当您在 Outlook 中发送延迟传递邮件时，"发送时间"时间戳信息不正确](http://support2.microsoft.com/kb/247176)

“当您使用 Microsoft Outlook 发送延迟邮件时，该邮件的实际“发送时间”时间戳信息是邮件的撰写时间，而不是实际发送时间。**这是设计使然。** “

“当 Outlook 以联机模式连接到 Exchange Server 邮箱时，邮件直接提交到 Exchange 邮箱。因此，该邮件的“发送时间”时间戳信息是邮件提交到 Exchange 邮箱的时间，而不是交付给收件人的实际时间。”

# ios - The uiviewcontroller child of a uiviewcontroller not reacting to touches

> ID：12638149
> 
> 赞同：0
> 
> 时间：2012-09-28T10:22:24.850
> 
> 标签：ios, uitableview, first-responder, childviewcontroller

I have a UIViewcontroller that have several views and one uiviewcontroller as childs. The uiviewcontroller include a tableview. The child uiviewcontroller has the delegate and datasource methods.

I can see the tableview, the delegate build right the table, but I cant scroll or select the cells because the child uiviewcontroller don't react to touches.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T11:18:12.553

Fixed it by changing the child uiviewcontroller to be a uiview instead of uiviewcontroller.

# ruby-on-rails - 将普通用户变成管理员用户 Railstutorial

> ID：12638151
> 
> 赞同：1
> 
> 时间：2012-09-28T10:22:29.277
> 
> 标签：ruby-on-rails, ruby-on-rails-3, railstutorial.org

我正在阅读 Michael Hartl 的 Rails 教程，并且在创建管理员用户时弹出了一个问题。

我按照说明创建了一个 admin_user，他可以访问 :destroy 方法。它也不是 attr_accessible，因此人们不能简单地通过浏览器发出 put 请求并将自己更改为 admin。

但是，我有一个两部分的问题——

1）我将如何使用户管理员？

我虽然我需要在控制台中写这样的东西

```
rails console
user = User.find(params[:101])
user.toggle!(:admin) 
```

当我尝试时，我得到

> main:Object 的未定义局部变量或方法“参数”

2）假设可以让自己成为管理员，那么是什么阻止其他人也使用命令行让自己成为管理员？

这是 users_controller 的副本，我认为 Michael 在教程中解决了这个问题，我按照他的说明进行操作，但我不明白下面的代码如何阻止某人进入命令行并让自己成为管理员

```
class UsersController < ApplicationController
  before_filter :signed_in_user, 
                only: [:edit, :update, :index, :destroy]
  before_filter :correct_user,   only: [:edit, :update]  
 before_filter :admin_user,     only: :destroy

  def destroy
    User.find(params[:id]).destroy
    flash[:success] = "User destroyed."
    redirect_to users_url
  end

  def index
    @users = User.paginate(page: params[:page])
  end

  def show
    @user = User.find(params[:id])
   end

  def new
    unless signed_in?
      @user = User.new
    else
      redirect_to @current_user
    end

  end

  def create
    unless signed_in?
      @user = User.new(params[:user])
      if @user.save
        sign_in @user
        flash[:success] = "Welcome to the Sample App!"
        redirect_to @user
      else
        render 'new'
      end
    else
      redirect_to @current_user
    end
  end

  def edit
  end

  def update
    if @user.update_attributes(params[:user])
      flash[:success] = "Profile updated"
      sign_in @user
      redirect_to @user
    else
      render 'edit'
    end
  end

  private

    def signed_in_user
      unless signed_in?
        store_location
        redirect_to signin_url, notice: "Please sign in."
      end
    end

    def correct_user
      @user = User.find(params[:id])
      redirect_to(root_path) unless current_user?(@user)
    end

def admin_user
      redirect_to(root_path) unless current_user.admin?
    end
end 
```

非常感谢您帮助清理问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T10:45:25.463

1.  User.find(params[:101]) 仅适用于 http 浏览器请求。如果您访问[http://www.example.com?101=test](http://www.example.com?101=test)，那么您可以使用值为“test”的 params[:101]。但是在控制台中，除非您声明它，否则您不能使用参数。在您的情况下，正确的方式将是 User.find(101)，如果 101 是用户 ID。
2.  其他人不能让他们成为管理员，因为您没有为 admin 字段添加 attr_accessible。他们如何通过命令外壳来做到这一点？他们无法访问命令行。如果是这样，那就是严重的安全漏洞。

# java - 如何在java中关闭包含框架的单个类

> ID：12638156
> 
> 赞同：1
> 
> 时间：2012-09-28T10:22:39.170
> 
> 标签：java, user-interface, netbeans

我想单独关闭特定的 classname.java 窗口。

我正在使用 netbeans 开发一个 GUI。我创建了一个主类并定义了一个按钮，单击时将加载 new classname().setVisible(true);

这个 classname.java 包含一个框架，其中包含用于获取输入的组件

现在当我使用 System.exit(); 在 classname.java 中所有的窗口都关闭了

我想单独关闭特定的 classname.java 窗口。我该怎么做？

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
   System.exit(0); // TODO add your handling code here:
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T10:27:17.383

采用`DISPOSE_ON_CLOSE`

```
JFrame f = JFrame();
f.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE)` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T10:26:45.243

如果您只想隐藏它，请使用

```
setVisible(false); 
```

或处置使用

```
dispose(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T10:26:02.630

确保您保留对`classname`您创建的实例的引用，并在其上调用`setVisible(false)`或调用`dispose()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T10:36:01.233

当你这样做时，它会关闭所有打开的窗口，这意味着应用程序将被结束。我认为你应该使用这种方法：`windowClosing()`. 您可以在此处获取有关此的更多信息：[链接](http://www.roseindia.net/java/example/java/awt/AwtCloseButtonEvent.shtml)

我希望这对你有帮助。问候，吉尔

# html - 用于跨域跟踪的谷歌分析过滤器设置

> ID：12638157
> 
> 赞同：1
> 
> 时间：2012-09-28T10:22:41.260
> 
> 标签：html, google-analytics

是否每个人都尝试使用过滤器修改跨域配置文件以在内容报告中显示完整域？此更改将在多长时间内生效？

我按照以下步骤操作。但什么都没有改变。

[https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite)

> 1.  在配置文件设置页面中，单击添加过滤器链接。
> 2.  选择添加新过滤器并为过滤器提供名称。
> 3.  选择自定义过滤器，然后在过滤器类型设置上选择高级。
> 4.  在高级设置下：FieldA 应设置为 Hostname b。FieldB 应设置为请求 URI
> 5.  将字段 A 和字段 B 的值设置为 (.*)，这是一个捕获所有字符的表达式。
> 6.  将 Output To --> Constructor 选项设置为 Request URI 并提供 $A1$B1 作为该选项的值。您的报告现在将显示： — www.example.com/index.php — sub.example.com/more.php 这将捕获 URL 的 www.example.com 部分，并将其包含在页面 URL 的开头内容报告部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T19:06:20.237

过滤器不会追溯应用。分析中的所有数据都是静态的。一旦进去就不能改变了。如果您今天设置过滤器，它将从现在开始将主机名添加到 url。

您还可以设置自定义报告，从主机名向下钻取到路径，甚至可以并排显示。这应该会为您提供相同的数据，但如果您有太多数据，则会对其进行抽样，而默认报告则不会进行抽样，因为它们是经过预处理的。

例如：

[https://www.google.com/analytics/web/permalink?uid=c00k2_9TSNeLVakblonUZg](https://www.google.com/analytics/web/permalink?uid=c00k2_9TSNeLVakblonUZg)

# json - 从 RavenDB 获取 JSON 数据

> ID：12638162
> 
> 赞同：3
> 
> 时间：2012-09-28T10:23:06.957
> 
> 标签：json, asp.net-mvc-3, ravendb

我有一个使用嵌入式 RavenDB 存储数据的 Asp.Net MVC3 应用程序。视图需要控制器现在以这种方式创建的 json 数据：

```
 public ContentResult Data()
    {
        var res = JsonConvert.SerializeObject(DocumentSession.Query<DataObject>());
        return new ContentResult { Content = res, ContentType = "application/json" };
    } 
```

一切正常，但对我来说似乎效率低下，因为以 JSON 格式存储在 DB 中的数据在 POCO 中序列化，然后再次反序列化。

有没有更直接的方法可以直接从嵌入式数据库中获取 json 数据？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T19:36:26.363

这根本不是低效的。请记住，在内部，raven 实际上使用 BSON - 所以无论如何你都必须翻译它。还有元数据字段。如果您直接通过控制器返回它，您将没有机会塑造数据的响应并去除不需要的字段。

如果您必须继续这种思路，您有两个选择：

1.  您可以使用 DocumentStore.DatabaseCommands.Get() 和相关操作返回 RavenJObjects，然后您可以从中转换 JSON。

2.  您可以通过 HTTP 直接与 Raven 数据库对话，而无需使用 raven 客户端。

这些都不是直截了当的，而且您正在抛弃 Raven 客户端 API 的许多优点。恕我直言，您要实现的任何性能提升都不会引起注意。我会坚持你目前的做法。

另外 - 如果您只是想避免在此处进行序列化，请考虑返回 JsonResult 而不是 ContentResult。如果您想改用 Json.Net（根据您最近的另一篇文章），这是一种更简洁的方法：http: [//james.newtonking.com/archive/2008/10/16/asp-net-mvc-和-json-net.aspx](http://james.newtonking.com/archive/2008/10/16/asp-net-mvc-and-json-net.aspx)

# c++ - g++ 编译器错误：无法推断模板参数“_Funct”

> ID：12638166
> 
> 赞同：9
> 
> 时间：2012-09-28T10:23:34.010
> 
> 标签：c++, templates, foreach

我正在尝试使用 ANSI C++ for_each 语句来迭代并打印标准向量的元素。如果我让 for_each 调用非重载函数，它可以工作，但如果我让它调用重载函数，则会产生编译器错误。

这是一个最小的测试程序，用于显示编译器错误发生的位置：

```
#include <algorithm>
#include <iostream>
#include <vector>

struct S {
    char c;
    int i;
};
std::vector<S> v;

void print_struct(int idx);
void print_struct(const struct S& s);

// f: a non-overloaded version of the preceding function.
void f(const struct S& s);

int main()
{
    v.push_back((struct S){'a', 1});
    v.push_back((struct S){'b', 2});
    v.push_back((struct S){'c', 3});

    for (unsigned int i = 0; i < v.size(); ++i)
        print_struct(i);

    /* ERROR! */
    std::for_each(v.begin(), v.end(), print_struct);

    /* WORKAROUND: */
    std::for_each(v.begin(), v.end(), f);

    return 0;
}

// print_struct: Print a struct by its index in vector v.
void print_struct(int idx)
{
    std::cout << v[idx].c << ',' << v[idx].i << '\n';
}

// print_struct: Print a struct by reference.
void print_struct(const struct S& s)
{
    std::cout << s.c << ',' << s.i << '\n';
}

// f: a non-overloaded version of the preceding function.
void f(const struct S& s)
{
    std::cout << s.c << ',' << s.i << '\n';
} 
```

我在 openSUSE 12.2 中使用：

```
g++-4.7 -ansi -Wall for_each.cpp -o for_each 
```

完整的错误信息是：

```
for_each.cpp: In function ‘int main()’:
for_each.cpp:31:48: error: no matching function for call to ‘for_each(std::vector<S>::iterator, std::vector<S>::iterator, <unresolved overloaded function type>)’
for_each.cpp:31:48: note: candidate is:
In file included from /usr/include/c++/4.7/algorithm:63:0,
                 from for_each.cpp:5:
/usr/include/c++/4.7/bits/stl_algo.h:4436:5: note: template<class _IIter, class _Funct> _Funct std::for_each(_IIter, _IIter, _Funct)
/usr/include/c++/4.7/bits/stl_algo.h:4436:5: note:   template argument deduction/substitution failed:
for_each.cpp:31:48: note:   couldn't deduce template parameter ‘_Funct’ 
```

我在 Stack Overflow 或一般网络上都没有看到任何针对此特定错误的搜索结果。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T10:29:15.210

名称指的是重载集。您需要指定所需的重载：

```
std::for_each(v.begin(), v.end(), (void (&)(S const&)) print_struct); 
```

另一种方法是使用***多态可调用函数对象***作为助手：

```
struct PrintStruct
{
    template <typename T> void operator()(T const& v) const 
        { return print_struct(v); }
};

int main()
{
    PrintStruct helper;

    std::vector<S> sv;
    std::vector<int> iv;

    // helper works for both:
    std::for_each(sv.begin(), sv.end(), helper);
    std::for_each(iv.begin(), iv.end(), helper); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-28T10:36:18.497

`std::for_each`声明如下所示：

```
template<class InputIter, class Func>
void for_each(InputIter first, InputIter last, Func func); 
```

正如你所看到的，它接受你给它的*任何东西*作为第三个参数。没有限制它必须是*某个签名*的可调用类型或完全可调用类型。

在处理重载函数时，它们本质上是模棱两可的，除非你给它们一些*上下文*来选择正确的函数。在对重载函数的调用中，此上下文是您传递的参数。但是，当您需要指针时，不能将参数用作上下文，并且`for_each`参数也不算作上下文，因为它需要任何东西。

作为函数参数可以是选择正确重载的有效上下文的示例，请参见：

```
// our overloads
void f(int){}
void f(double){}

typedef void (*funcptr_type)(int);
void g(funcptr_type){}

// ...
g(&f); // will select 'void f(int)' overload, since that's 
       // the only valid one given 'g's parameter 
```

正如你所看到的，你在这里给出了一个清晰的上下文，帮助编译器选择正确的重载，而不是让它模棱两可。`std::for_each`的参数*没有*给出这样的上下文，因为它们接受任何东西。

有两种解决方案：

*   通过手动提供上下文
    *   强制转换为正确的函数指针类型，或
    *   使用正确类型的中间变量并传递它
*   使用分派给重载函数的非重载函数（就像你对 所做的那样`f`）

请注意，在 C++11 中，您还可以将 lambda 用于第二个选项：

```
std::for_each(v.begin(), v.end(), [](const S& s){ print_struct(s); }); 
```

* * *

关于您的代码的一些注释：

*   `(struct S){'a', 1}`是复合文字而不是标准 C++
*   `struct S`你在 C++ 中不需要，`S`就足够了

# wpf - 触发时间延迟

> ID：12638179
> 
> 赞同：3
> 
> 时间：2012-09-28T10:24:19.660
> 
> 标签：wpf, vb.net, xaml, mouseover, expander

我希望在我的表单上的 WPF 扩展器上的鼠标悬停事件上附加一个时间延迟（后面的 VB.NET 代码支持 xaml）。此鼠标悬停事件本质上触发了与单击相反的扩展-但我希望在扩展内容之前稍等片刻。到目前为止，我还没有设法通过更广泛的互联网找到任何解决此问题的方法。

当前启用触发器的 xaml 代码是：

```
 <Style x:Key="HoverExpander" TargetType="{x:Type Expander}">
        <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="IsExpanded" Value="True" />
            </Trigger>
        </Style.Triggers>
    </Style> 
```

然后将此样式应用于：

```
<Expander Style="{StaticResource HoverExpander}" 
          HorizontalAlignment="Right"
          ExpandDirection="Left" 
          Height="Auto" 
          Width="Auto">
           <!-- Content here -->
</Expander> 
```

请注意，我已经去掉了其他美学（例如边框、gridrefs 等以提高可读性）。

我认为应该有一些方法来设置鼠标悬停触发器的延迟，但没有找到它的运气。这可以在 xaml 中设置，也可以作为后面代码中的事件。

我目前正在研究这个，所以当我找到解决方案时，我会在这里发布。同时感谢任何想法。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T10:17:44.593

在 MouseOver 事件上使用 EventTrigger，而在 Storyboard 上使用 BooleanAnimationUsingKeyFrames。在情节提要的时间轴中，您可以有关键帧，以便动画在影响您要更改的属性之前等待一段时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T11:56:45.173

这是我确定的代码 - 基于已经给出的想法：

```
 <Style x:Key="HoverExpander" TargetType="{x:Type Expander}">            
        <Style.Setters>                
            <Setter Property="IsExpanded" Value="False"/><!-- Initially collapsed -->            
        </Style.Setters>

        <Style.Triggers>
            <!-- Impose a short delay (500ms) before expanding control -->
            <EventTrigger RoutedEvent="Expander.MouseEnter">
                <BeginStoryboard>
                    <Storyboard>
                        <BooleanAnimationUsingKeyFrames
                            Storyboard.TargetProperty="IsExpanded"
                            Duration="0:0:0.5">
                            <DiscreteBooleanKeyFrame Value="True" KeyTime="100%"/><!-- I.E. after 500ms -->                             
                        </BooleanAnimationUsingKeyFrames>
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger>
            <!-- Collapse when mouse leaves control-->
            <EventTrigger RoutedEvent="Expander.MouseLeave">
                <BeginStoryboard>
                    <Storyboard>
                        <BooleanAnimationUsingKeyFrames
                            Storyboard.TargetProperty="IsExpanded"
                            Duration="0:0:0.1">
                            <DiscreteBooleanKeyFrame Value="False" KeyTime="0%"/><!-- I.E. Immediately -->

                        </BooleanAnimationUsingKeyFrames>
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger>
        </Style.Triggers>
    </Style> 
```

然后像以前一样申请。这已经过测试并在 .NET 4.0 中工作。如果您愿意，可以应用其他巧妙的技巧，我发现以下内容对获得想法很有帮助：

[动画概述 (MSDN)](http://msdn.microsoft.com/en-us/library/ms752312.aspx)

[故事板概述 (MSDN)](http://msdn.microsoft.com/en-us/library/ms742868.aspx)

# javascript - jQuery 对象和参数 - 使用正确的术语/解释

> ID：12638186
> 
> 赞同：0
> 
> 时间：2012-09-28T10:24:39.640
> 
> 标签：javascript, jquery

由于缺乏对几个概念的理解，我发帖也是为了检查我对这段代码的描述是否准确。

首先，我创建了名为contactForm 的父对象。我已经使这个对象等于一个使用文字表示法的对象文字，即使用 { } 创建一个新对象并在括号内定义属性。

然后我有init方法。如果您熟悉面向对象的编程，那将与您的构造函数方法相同。

现在下一部分是我感到困惑的地方。我正在使用 jQuery 创建一个新元素，即按钮标签。这个新创建的元素是否是父对象内的一个对象，称为contactForm？

我的第二个问题是我是否传递了一个将文本设置为“联系我！”的参数 到contactForm 对象或按钮元素/对象？

我的最后一个问题 - 传递给对象的参数是否也可以称为该对象的属性？

抱歉，如果我的术语描述不够准确或不够准确。任何简洁明了的答案将不胜感激。

```
var contactForm = {
        init: function() {

            $('<button></button>', {
                text: 'Contact Me!'
            })
                .insertAfter('article:first');
        }
    }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T12:01:42.387

> 首先，我创建了名为contactForm 的父对象。我已经使这个对象等于一个使用文字表示法的对象文字，即使用 { } 创建一个新对象并在括号内定义属性。

您有一个对象，它在您的代码中由对象[文字](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals#Literals)描述，并将其分配给变量`contactForm`。不知道为什么你会称它为“父母”。

> 然后我有init方法。如果您熟悉面向对象的编程，那将与您的构造函数方法相同。

您的对象有一个名为“init”的属性，它是一个函数 - 方便地称为“方法”。但是，JavaScript 中的构造函数的工作方式略有不同——每个函数在使用[`new`operator](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/new)调用时都可以构造对象。当然，在声明单例实例（作为文字）时，通常会使用专用的初始化方法。

> 现在下一部分是我感到困惑的地方。我正在使用 jQuery 创建一个新元素，即按钮标签。这个新创建的元素是否是父对象内的一个对象，称为contactForm？

不，您在函数中所做的（起初）与对象`init`无关。`contactForm`您正在调用该[`jQuery`](http://api.jquery.com/jQuery/)函数，它返回一个您调用该`insertAfter`方法的对象，并且由于您对该函数的结果不做任何事情，因此它被垃圾收集。

> 我的第二个问题是我是否传递了一个将文本设置为“联系我！”的参数 到contactForm 对象或按钮元素/对象？

您正在传递两个参数：一个字符串和一个对象。jQuery 函数对这些参数的作用对于您的代码来说是未知的。根据[文档](http://api.jquery.com/jQuery/#jQuery2)（以及代码，如果你真的想深入研究的话），这将创建一个`button`元素（包装在一个 jQuery 实例中）并调用`text`它的方法。

> 我的最后一个问题 - 传递给对象的参数是否也可以称为该对象的属性？

不，您将参数传递给函数。函数可能会将它们设置为返回对象的属性，但这取决于函数。无论如何，它们不被称为“函数对象的属性”。

# c - Win32 C/C++ 桌面应用程序中的 Google Maps Api 集成

> ID：12638187
> 
> 赞同：3
> 
> 时间：2012-09-28T10:24:40.333
> 
> 标签：c, google-maps, google-maps-api-3, desktop-application

我们希望将 Google 地图集成到我们的 C/C++ win32 应用程序中。整个想法是当用户第一次运行应用程序时，我们要求他们标记他们的位置，然后检索用户选择位置的坐标并保存到数据库或文件中。

初始化后，我们希望为用户提供一些预先标记的位置，并允许用户找到从他们的位置到那个位置的方向。将提供预标记位置的坐标。

是否可以通过使用 Google Api 来实现我们想要的，如果可以，那么如何实现？如果有关于它的法律问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T15:10:18.313

对于法律问题的答案，最好的地方是查看服务条款，然后当然咨询律师。Maps API 的服务条款和 Maps for Business 服务条款都明确禁止在地理编码数据不与 Google 地图结合使用时使用：

Maps API TOS，相关点是第 10.1.1 (g) 节： [https ://developers.google.com/maps/terms#section_10_1](https://developers.google.com/maps/terms#section_10_1)

商业地图购买协议，相关点为 4.1 (l)： [https ://www.google.com/enterprise/earthmaps/legal/us/maps_purchase_agreement.html](https://www.google.com/enterprise/earthmaps/legal/us/maps_purchase_agreement.html)

如果您需要更自由的替代方案，您可能需要查看[http://www.openstreetmap.org/](http://www.openstreetmap.org/) - 那里提供的地理编码数据包含在开放数据库许可证下，该许可证允许使用归属地。

[http://wiki.openstreetmap.org/wiki/Legal_FAQ](http://wiki.openstreetmap.org/wiki/Legal_FAQ)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T11:02:38.720

您可以在 Windows 上使用 Qt 框架。您可以将您的 win32 应用程序与 Qt 集成。在 Qt 中，您可以使用**QWebKit**框架与您的应用程序和网页（在这种情况下是包含来自 Google 地图的地图的页面）进行通信。实际上，您可以使用 Qt 编写混合应用程序。查看 Qt **QWebKit**文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-15T21:24:11.827

我需要同样的，并通过浏览器对象连接谷歌地图来解决它。

*** 请阅读有关[WebBrowser 控件兼容性](https://blogs.msdn.microsoft.com/patricka/2015/01/12/controlling-webbrowser-control-compatibility/)的信息并按照说明进行操作。

1.  创建一个基于[MFC](https://msdn.microsoft.com/en-us/library/9es9d1k4.aspx)对话框的项目。

2.  添加一个 CExplorer 控件。（参见：[https](https://msdn.microsoft.com/en-us/library/aa752046(v=vs.85).aspx) ://msdn.microsoft.com/en-us/library/aa752046(v=vs.85).aspx ）。

3.  当你的程序的主对话框初始化时，你需要初始化一个全局对象

    ```
     CExplorer1 m_Browser; 
    ```

4.  第一个构建块是 WriteHTML()

    ```
    void WriteHTML(const wchar_t* html)

    {

       IDispatch* pHtmlDoc = m_Browser.get_Document();

       if (!pHtmlDoc)

           return;

       CComPtr<IHTMLDocument2> doc1 = NULL;

       doc1.Detach();

       doc1.Attach((IHTMLDocument2*)pHtmlDoc);

       if (!doc1)

           return;

       // Creates a new one-dimensional array

       SAFEARRAY* psaStrings = SafeArrayCreateVector(VT_VARIANT, 0, 1);

       if (!psaStrings)

           return;

       BSTR bstr = SysAllocString(html);

       if (bstr)

       {

           VARIANT* param;

           HRESULT hr = SafeArrayAccessData(psaStrings, (LPVOID*)&param);

           if (SUCCEEDED(hr))

           {

               param->vt = VT_BSTR;

               param->bstrVal = bstr;

               hr = SafeArrayUnaccessData(psaStrings);

               if (SUCCEEDED(hr))

               {

                   doc1->write(psaStrings);

                   doc1->close();

               }

           }

       }

       // SafeArrayDestroy calls SysFreeString for each BSTR!

       if (psaStrings)

           SafeArrayDestroy(psaStrings);
     } 
    ```

5.  您还应该将浏览器控件添加到您的 .rs 文件中

    **控制 "",IDC_SGWEBBROWSER,"{8856F961-340A-11D0-A96B-00C04FD705A2}",WS_TABSTOP,388,36,236,281**

6.  在实现它的几种方法中，我发现基于坐标创建一个临时 HTML 并调用：`m_Browser.Navigate(FileName, 0, 0, 0, 0);` 是最好的。

7.  “文件名”是根据地图上点的请求坐标创建的，其他属性如下：

8.  为“FileName”分配名称和路径：

    ```
     wchar_t FileName[2048];

      GetCurrentDirectory(2048, FileName);

      wcscat(FileName, L"\\test.html"); 
    ```

9.  用数据填充文件并使用浏览器控件打开它，同时将谷歌地图导航到请求的位置：

变量：

一个。**纬度**

湾。**经度**

C。**缩放**（设置为 10）

d。**API 密钥**。（您需要[获得一份](https://developers.google.com/maps/documentation/javascript/get-api-key)）

**代码（ WriteHTML**函数的替代方法）

```
CString HTML_TEXT;
CRect rect;
CWnd *pWnd = GetDlgItem(IDC_SGWEBBROWSER);
pWnd->GetWindowRect(&rect);
int w = rect.Width()-50, h = rect.Height()-50;
HTML_TEXT.Format(L"<!DOCTYPE html><html><meta http-equiv=\"X - UA - Compatible\" content=\"IE = edge\"><body><div id =\"googleMap\" style=\"width:%dpx;height:%dpx\"><script>function myMap(){var mapProp = {center:new google.maps.LatLng(%f, %f), zoom : 10};var map = new google.maps.Map(document.getElementById(\"googleMap\"), mapProp);marker = new google.maps.Marker({position: new google.maps.LatLng(%f, %f),map: map});}</script><script src = \"https://maps.googleapis.com/maps/api/js?key=%s&callback=myMap\"></script></div></body></html>", w, h, Latitude, Longitude, Latitude, Longitude, API_KEY);
FILE *fp = _wfopen(FileName, L"w");
fwprintf(fp, L"%s", HTML_TEXT.GetBuffer());
fclose(fp);
m_Browser.Navigate(FileName, 0, 0, 0, 0); 
```

# apache-flex - mxml 空引用

> ID：12638188
> 
> 赞同：0
> 
> 时间：2012-09-28T10:24:45.357
> 
> 标签：apache-flex, mxml

我有一个示例自定义 mxml 组件 CustomRadio

```
<?xml version="1.0" encoding="utf-8"?>
<mx:VBox xmlns:mx="http://www.adobe.com/2006/mxml">
    <mx:RadioButton id="radio" />
    <mx:Script>
        public override function set label(value:String):void { 
            this.radio.label = value;
        }
        public override function get label():String {
            return this.radio.label;
        }
    </mx:Script>
</mx:VBox> 
```

和一个应用程序

```
<?xml version="1.0" encoding="utf-8"?>
<mx:WindowedApplication xmlns:mx="http://www.adobe.com/2006/mxml"  xmlns:local="*">
    <local:CustomRadio  label="xxx" />
</mx:WindowedApplication> 
```

我在设置标签中得到空引用错误，说 this.radio 为空。为什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T11:17:12.877

RadioButton 标签需要包含 Script 标签。你现在拥有它的方式，脚本标签只是 VBox 的一部分。由于您使用的是“this”指针，因此它指的是 VBox。

# jquery - 在 Magento 自定义模块模板文件中添加外部脚本

> ID：12638189
> 
> 赞同：1
> 
> 时间：2012-09-28T10:24:46.910
> 
> 标签：jquery, magento

我试图在我的自定义管理模块视图文件中包含外部脚本。

下面的脚本我需要包含在我的自定义管理视图文件中。

```
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script> 
```

我可以直接将此脚本添加到查看文件而不将其添加到 XML 文件中吗？如果我直接在视图文件中添加此脚本，这会导致管理页面出现任何问题吗？

请建议我..

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T15:28:16.730

应该没有问题。

但我强烈建议您使用安全版本的 jQuery 脚本（即 http* *s* *），因为您的后端将受益于它通过安全连接。

# authentication - 经典 ASP，ServerXMLHTTP 在旧服务器上进行身份验证，而不是在新服务器上

> ID：12638191
> 
> 赞同：1
> 
> 时间：2012-09-28T10:24:52.690
> 
> 标签：authentication, asp-classic, serverxmlhttp

我正在使用 Windows 2003 服务器上的经典 ASP 网站。该站点需要身份验证（配置为使用基本身份验证）。一个页面使用 ServerXMLHTTP 从同一网站上的另一个页面请求数据（相同的协议 [HTTPS]，相同的主机名），使用带有参数 Method、URL、Async、UserName、Password 的 Open 方法。多年来它一直正常工作。当请求进行服务器端调用的页面时，日志显示一个没有用户名的请求，用于返回 401 状态的后端页面，然后是另一个包含用户名的请求，该请求返回一个200，后面是对前端页面的请求，状态为200。

我已将该站点复制到 Windows 2008 R2 64 位服务器，在 IIS 中显然具有相同的身份验证配置。但是现在没有从后端页面接收到数据。日志显示后端页面的两次连续请求，没有用户名，都返回 401，然后是前端页面的请求，状态为 500。

问题可能是什么？我看过关于 proxycfg 的讨论，但我们没有使用代理。我已经看到有关使用 Base64 设置凭据的讨论，但是（a）我们不在旧服务器上这样做，并且（b）我还是尝试了它，但它没有任何区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-09T20:23:00.307

请按照此处概述的步骤操作：- [https://stackoverflow.com/a/10762360/1579037](https://stackoverflow.com/a/10762360/1579037) 然后，检查您是否可以在 64 位服务器上创建相同 XML 组件的对象实例？

# reportingservices-2005 - SSRS 电子邮件订阅使用 Exchange server 2010

> ID：12638192
> 
> 赞同：1
> 
> 时间：2012-09-28T10:24:53.717
> 
> 标签：reportingservices-2005, exchange-server-2010

是否可以使用 Microsoft Exchange server 2010 而不是 SMTP 发送 SSRS (SQL SERVER REPORTING SERVICE) 2005 电子邮件订阅？如果可能比怎么做？

我们试图通过编辑文件 rsreportserver.config 来做到这一点。

我们更改了以下代码部分：

```
 <Extension Name="Report Server Email" Type="Microsoft.ReportingServices.EmailDeliveryProvider.EmailProvider,ReportingServicesEmailDeliveryProvider"> 
                    <MaxRetries>3</MaxRetries> 
                    <SecondsBeforeRetry>900</SecondsBeforeRetry> 
                    <Configuration> 
                         <RSEmailDPConfiguration> 
                              <SMTPServer>xxx.xx.xx.xxx</SMTPServer> //Ip Address
                              <SMTPServerPort></SMTPServerPort> 
                              <SMTPAccountName></SMTPAccountName> 
                              <SMTPConnectionTimeout></SMTPConnectionTimeout> 
                              <SMTPServerPickupDirectory></SMTPServerPickupDirectory> 
                              <SMTPUseSSL></SMTPUseSSL> 
                              <SendUsing>2</SendUsing> 
                              <SMTPAuthenticate></SMTPAuthenticate> 
                              <From>Custom-Reports@abc.com</From> 
                              <EmbeddedRenderFormats> 
                                   <RenderingExtension>MHTML</RenderingExtension> 
                              </EmbeddedRenderFormats> 
                              <PrivilegedUserRenderFormats></PrivilegedUserRenderFormats> 
                              <ExcludedRenderFormats> 
                                   <RenderingExtension>HTMLOWC</RenderingExtension> 
                                   <RenderingExtension>NULL</RenderingExtension> 
                                   <RenderingExtension>RGDI</RenderingExtension> 
                              </ExcludedRenderFormats> 
                              <SendEmailToUserAlias>True</SendEmailToUserAlias> 
                              <DefaultHostName></DefaultHostName> 
                              <PermittedHosts></PermittedHosts> 
                         </RSEmailDPConfiguration> 
                    </Configuration> 
               </Extension> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T15:40:52.190

不幸的是，通过查看文档，看起来 SSRS 似乎无法配置为使用 Exchange Web Services，[即使在 SQL Server 2012](http://msdn.microsoft.com/en-us/library/ms159155.aspx)中也是如此。

相当虚弱。就好像他们在 SSRS 上线那天几乎停止了任何重大的开发。

# android - android可扩展列表（左下角）

> ID：12638196
> 
> 赞同：0
> 
> 时间：2012-09-28T10:25:00.860
> 
> 标签：android, android-layout, android-listview, expandable

我想建立一个像图像一样的列表。

1.

2.

3.

4.

当单击项目“1”时，我希望像这样出现（两个列表）。

**1** 1.1

2 1.2

3

4

当单击项目“2”时，我希望像这样出现（两个列表）。

1 2.1

**2** 2.2

3 2.3

4

当单击项目“3”时，我希望像这样出现（两个列表）。

1 3.1

2 3.2

**3** 3.3

4

所以。

我需要帮助，有人有建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:41:34.540

检查以下链接，它可能会帮助你...

[http://android-adda.blogspot.in/2011/06/custom-expandable-listview.html](http://android-adda.blogspot.in/2011/06/custom-expandable-listview.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:51:18.843

您可以创建两个 Listview 并将它们并排放置。第一个列表将包含 1,2,3,4...n，当您单击任何数字时，例如您单击 2，然后 2.1,2.2,2.3....2.n 将出现在第二个列表中。

这可能有助于您了解 ListView 在 Android 中的工作原理 [http://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)

# java - 如何从 ICompilationUnit 获取 IEditorPart

> ID：12638198
> 
> 赞同：1
> 
> 时间：2012-09-28T10:25:07.833
> 
> 标签：java, eclipse, eclipse-plugin

我有`ICompilationUnit`对象。我怎样才能得到`file name with extension`或`IEditorPart`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T22:25:08.880

上面的建议将为您提供资源的简单名称。但是，如果您的目标是为编译单元找到一个现有的编辑器，那么您最好这样做：

```
IEditorPart editor = org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.isOpenInEditor(unit); 
```

如果该单元未在编辑器中打开，这将返回 null。如果您想打开尚未打开的设备，那么您应该这样做：

```
IEditorPart editor = org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.isOpenInEditor(unit); 
```

这两种方法的好处是，如果您传入 ICompilationUnit 以外的其他内容，则将自动选择编辑器的该部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T11:41:39.143

我认为您可以使用 compUnit.getCorrespondingResource().getName() 来获取名称

# css - 在 JSP 中围绕 2 个按钮创建简单的线条边框

> ID：12638200
> 
> 赞同：0
> 
> 时间：2012-09-28T10:25:22.240
> 
> 标签：css, jsp

围绕2个按钮创建线框的最简单方法是什么

```
 <div  align="center" style="max-width:380px; border:2px;">
        <INPUT type="button" value="Find Missing Definitions" onclick="promptUser()">
        <INPUT id="processDefinitionsButton" type="button" value="Process Missing Definitions" onclick="processDefinitions()">  
    </div> 
```

我究竟做错了什么？这不应该添加一条 2px 宽的线吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T10:27:31.963

您必须设置颜色和样式

```
 <div  align="center" style="max-width:380px; border:2px solid red;"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:48:11.063

用这个

```
<div  align="center" style="max-width:380px; border:2px solid #ccc;">
    <INPUT type="button" value="Find Missing Definitions" onclick="promptUser()">
    <INPUT id="processDefinitionsButton" type="button" value="Process Missing Definitions" onclick="processDefinitions()">  
</div> 
```

边框代码就像`border: size type color`

# java - Truezip 就地更改文件

> ID：12638201
> 
> 赞同：0
> 
> 时间：2012-09-28T10:25:22.853
> 
> 标签：java, truezip

我想在几个档案中的几个文件中更改几行。我可以通过解包到临时位置、更改和重新打包来做到这一点。

但是，我的印象是，通过使用 truezip，我应该能够就地进行这种处理。

你们中的任何人都可以帮忙吗？

# c# - 如何从服务器 Floder 在 gridview 中显示图像？

> ID：12638205
> 
> 赞同：0
> 
> 时间：2012-09-28T10:25:33.573
> 
> 标签：c#, asp.net

我收到以下代码错误

```
 <asp:TemplateField HeaderText="Image">
<ItemTemplate>
   <asp:Image ID="img" runat="server" ImageUrl="~/Attachment/<%#Eval("Image") %>" />
</ItemTemplate>
</asp:TemplateField> 
```

error 解析器错误消息：服务器标签格式不正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T10:38:49.290

首先试试这个：

```
 <asp:TemplateField HeaderText="Image">
 <ItemTemplate>
    <asp:Image ID="img" runat="server" ImageUrl="<%# Page.ResolveClientUrl(String.Format("~/Attachment/{0}",Eval("Image"))) %>" />
    </ItemTemplate>
 </asp:TemplateField> 
```

* * *

在服务器中而不是在客户端中还有另一种选择。如果您需要在运行时设置图像 url，它会很有用。

```
 <asp:GridView runat="server" ID="gvActivities" AllowSorting="true" AllowPaging="true"
        PageSize="25" AutoGenerateColumns="false" Width="100%" OnSorting="gvActivities_Sorting"
        OnRowDataBound="gvActivities_RowDataBound">
        <Columns>

            <asp:TemplateField HeaderText='Image' HeaderStyle-Width="4%"
                SortExpression="ActivityType">
                <ItemTemplate>
                    <asp:Image ID="ImageType" runat="server" AlternateText='<%# Eval("Type") %>' />
                </ItemTemplate>
            </asp:TemplateField> 
```

你能看到吗，我正在使用 OnRowDataBound 来设置图像 url。

1.  我没有在客户端中设置 ImageURL。
2.  我正在检查 Row 类型是否为 Data Row。
3.  然后我正在创建一个图像并将笑容中的图像放入其中。看到我正在使用 FindControl 方法。“ImageType”是网格中图像的 id。
4.  然后我正在设置 imageURL 属性

    ```
    protected void gvActivities_RowDataBound(object sender, GridViewRowEventArgs e)
    {
       if (e.Row.RowType == DataControlRowType.DataRow)
        {
           Image img = (Image)e.Row.Cells[0].FindControl("ImageType");
           img.ImageUrl = Page.ResolveClientUrl("Image URL path);
           img.AlternateText = "Text";
           img.ToolTip = "Tooltip";
        }
    } 
    ```

# ios - iOS MKMapView 不在模拟器中显示地图

> ID：12638206
> 
> 赞同：3
> 
> 时间：2012-09-28T10:25:38.253
> 
> 标签：ios, ios-simulator, mkmapview, mapkit

我刚刚开始学习 iPhone 的 iOS 开发，并遵循几个关于如何使用 显示 mapView 的示例`MapKit Framework`，我发现谷歌地图图块没有显示，我只得到一个空视图（灰色图块），至少在iPhone模拟器（我没有在设备上尝试过）。

我也收到此错误消息：

> /SourceCache/GoogleMobileMaps_Sim/GoogleMobileMaps-363.1.2/googlenav/mac/Loader.mm:235 服务器返回错误：403

我在为 Android 开发时找到了类似问题的解决方案，但在 iOS 上却没有。有人可以帮我解决这个问题吗？将`MapKit`框架添加到项目中应该足以使其正常工作，或者我是否遗漏了一些我所遵循的教程中未提及的额外设置？

谢谢！

这是我使用的简单示例代码：

```
// ViewController.h
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>
#import <CoreLocation/CoreLocation.h>

@interface ViewController : UIViewController
@property (strong, nonatomic) IBOutlet MKMapView *mapView;
@end

// ViewController.m
#import "ViewController.h"

@implementation ViewController
@synthesize mapView=_mapView;

- (void)viewDidUnload {
   [super viewDidUnload];
   [self setMapView:nil];
}
... more methods... 
```

在 .xib 文件中，我将 a 连接`MKMapView`到文件的所有者 mapView 插座。而此时，根据教程，我应该能够在运行模拟器时看到默认的美国地图，但我总是在调试区域收到我之前发布的错误，并且地图视图只显示灰色空网格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-08T19:20:06.013

我遇到了同样的问题——我`UIMapView`只显示了网格，而不是实际的地图。我退出了模拟器，然后再次启动了项目——现在它显示了地图！即使您可能已连接到计算机上，iOS 模拟器似乎有时也会断开连接。谢谢大家的意见！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T10:40:10.753

您是否将委托设置为文件所有者（自己）？您是否还包含了 mapkit 框架和相关的头文件？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-23T18:26:45.037

无论出于何种原因，我的 iOS 模拟器有时会失去与 Internet 的连接（我的计算机有连接，但模拟器无法识别它）。一旦我退出并重新启动我的模拟器，我的地图就会开始显示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T21:17:24.117

iOS 模拟器附带了官方地图应用程序。打开它并验证它是否可以获取磁贴，这可能是网络问题。没有任何代码、出口、代表或任何东西，地图应该显示地图数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-30T00:25:20.350

这个问题有点棘手，因为它涉及很多案例，但对我来说，由于网络监控应用程序，它没有加载，例如。`Charles`，请确保您有互联网连接并且它不受监控

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-21T23:57:17.063

正如您所描述的那样，我在 iPhone 模拟器和设备上看到的空地图视图（灰色图块）在尝试指定地图区域时（例如，请参见下面的代码），但是用户尚未授予对其在应用程序中位置的访问权限设置。在模拟器上运行时删除这段代码解决了这个问题。

```
MKCoordinateRegion mapRegion;
mapRegion.center = self.mapView.userLocation.coordinate;
mapRegion.span.latitudeDelta = 0.02;
mapRegion.span.longitudeDelta = 0.02;
[self.mapView setRegion:mapRegion animated: YES]; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-06-21T05:25:10.087

万一有人在寻找解决方案。网络问题对此问题负全责。确保您的模拟器具有网络连接，并且如果它能够加载默认的苹果地图，那么您就可以开始了。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-02-24T22:38:51.723

I solved this problem by connecting to WIFI with my phone. I didn't have a SIM card installed in my phone, so it just showed the tiles. Just make sure you have network connection.

# asp.net - IIS 目录浏览直接禁用文件访问

> ID：12638207
> 
> 赞同：1
> 
> 时间：2012-09-28T10:25:40.253
> 
> 标签：asp.net, iis, file-access

我有一个托管在 IIS 中的网站，并且禁用了目录浏览。该网站是用 ASP.Net、MySql 和 C# 开发的。例如，如果我输入 www.mysite.com/LoremIpsums/ 那么它会显示 403 错误。但是，如果我键入，www.mysite.com/LoremIpsums/IpsumLorem.pdf 它会显示/下载 PDF 文件。如何禁用此功能？我在网上搜索过，发现某事像

```
 <authorization>
    <remove users="*" roles="" verbs="" />
    <add accessType="Allow" roles="Administrators" />
    </authorization> 
```

如果我在web.config中使用它，用户即使在登录后也无法下载pdf文件。那么如何实现仅对登录用户的文件访问。（使用 C# 代码或 IIS 设置）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T10:35:12.957

干得好：

```
<location path="download">
    <system.web>
        <authorization>
        <!-- Order and case are important below -->
            <allow roles="user"/>
            <deny users="?"/>
        </authorization>
    </system.web>
</location> 
```

`download`是您要限制匿名用户直接访问的文件夹。

# ios - Apple 映射内存占用

> ID：12638208
> 
> 赞同：9
> 
> 时间：2012-09-28T10:25:46.197
> 
> 标签：ios, ipad, memory-management, ios6-maps

在 iPad 应用程序中使用新的 Apple 地图时，是否有人遇到过内存占用（Live Bytes）问题？我用 Instruments 测试了我的 iPad 应用程序，似乎在显示地图时内存分配跃升至超过 70MB（开始缩放时甚至为 120MB）——而在 iOS 5.1（使用谷歌地图）上，内存占用小于 4MB。或者有没有人有这个问题的解决方案（减少使用 Apple 地图时的内存占用）？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:09:45.980

正如我上面评论的那样，这成了一个问题，需要我用头撞墙一段时间。直接的答案是，是的，这是苹果承认存在的一个问题，但他们有一些很好的借口，比如更新的硬件设备应该能够轻松处理这种内存消耗。然而，有些人已经在他们的系统中记录了问题，所以在他们修复它并发布补丁之前我们无能为力。

# spring - 原因：在 Spring Security 中无法将 null 或空值传递给构造函数

> ID：12638209
> 
> 赞同：4
> 
> 时间：2012-09-28T10:25:46.957
> 
> 标签：spring, spring-security

当我尝试通过数据库中的 LDAP 对用户进行身份验证时，出现以下错误。

```
Reason: Cannot pass null or empty values to constructor. 
```

谁能告诉我做错了什么？

```
<?xml version="1.0" encoding="UTF-8"?>  
<beans:beans xmlns="http://www.springframework.org/schema/security" 
xmlns:beans="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd  
http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd">  

<http auto-config="true">
<intercept-url pattern="/**" access="ROLE_USER,ROLE_ADMIN" />
<intercept-url pattern="/administrator.htm" access="ROLE_ADMIN" />
<!-- <form-login login-page="/dashboard.htm" default-target-url="/dashboard.htm" authentication-failure-url="/ExceptionPage.jsp" /> -->
<form-login/>
</http>

<authentication-manager>
<authentication-provider>
<!--   <user-service>
<user name="20022263" password="da" authorities="ROLE_USER" />
<user name="20039004" password="da" authorities="ROLE_ADMIN" />
</user-service> -->
   <jdbc-user-service data-source-ref="dataSource" 
users-by-username-query="SELECT a.GLOBALID AS username, a.PASSWORD AS password, a.Enabled AS enabled FROM EU_MAS_TBUSER a WHERE a.GLOBALID=?" 
 authorities-by-username-query="select eu.USERNAME AS username, r.ACCESSROLEID AS authority from EU_MAS_TBUSER eu, EU_MAS_TBUSERS_ROLE r where eu.GLOBALID = r.GLOBALID and eu.GLOBALID=?" 
 role-prefix="ROLE_"/>   
</authentication-provider>

 </authentication-manager>

</beans:beans> 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-28T10:54:32.197

产生异常的实际行在[这里](https://github.com/spring-projects/spring-security/blob/38492a5794e27e543da8801ca55ae4d7d314fbba/core/src/main/java/org/springframework/security/core/userdetails/User.java#L105)。创建用户对象的相关代码在[这里](https://github.com/spring-projects/spring-security/blob/38492a5794e27e543da8801ca55ae4d7d314fbba/core/src/main/java/org/springframework/security/core/userdetails/jdbc/JdbcDaoImpl.java#L235)。

所以我最好的猜测是你在数据库中有一个用户的空密码字段。

请注意，如果您发布这样的错误，如果您提供堆栈跟踪和服务器日志中的相关调试输出，则更容易回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-21T11:02:50.543

> HTTP 状态 401：无法将空值或空值传递给构造函数

服务器期待一个查询参数，但您在其中发送了错误的值。

所以更简单的答案是：

我们需要发送服务器期望的有效查询参数。

# ruby-on-rails - Rspec should_receive 期望 Sinatra 和 Rails 中的不同行为

> ID：12638212
> 
> 赞同：1
> 
> 时间：2012-09-28T10:25:57.800
> 
> 标签：ruby-on-rails, activerecord, rspec, sinatra, rspec2

所以，假设我们有两个模型，A1 和 A2，A1 has_many A2，而 A2 belongs_to A1。根据 ActiveRecord Spec，如果您从 A1 实例化，并尝试在 a2 集合中创建资源，则会触发异常，说需要保存父级才能保存它：

```
a1 = A1.new
a1.a2s.create #=> BOOM! Exception 
```

到这里，一切都清楚了。但是现在我对该案例进行了 Rspec 测试，其中我有一个未保存的 A1 实例，然后我这样做：

```
a1.a2s.should_receive(:create)
a1.a2s.create 
```

这就是牛奶变酸的地方。我在 Sinatra 应用程序和 Rails 应用程序中复制了这些 AR 模型。当我在 Rails 中运行它时，规范会运行，因为期望是匹配的，即使它引发了异常。但是，在 Sinatra 中，它只是引发了异常，而不是接受测试。

有人能告诉我为什么吗？我认为这是一个 Rspec 问题，但他们不承认这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-30T04:09:56.097

您如何将数据存储在 Sinatra 应用程序中？

在 ActiveRecord 中，两次都`a1.a2s`为您提供相同的`ActiveRecord::Relation`实例，因此期望绑定到调用`create`.

我的猜测是，在 Sinatra`a1.a2s`中，每次调用它时都会返回一个新实例，因此期望不受`create`.

你可以通过运行来测试我的理论

```
a1.a2s.object_id
a1.a2s.object_id 
```

并查看两个 id 是否相同。

# javascript - 从文件中加载一个 javascript 对象及其函数

> ID：12638221
> 
> 赞同：1
> 
> 时间：2012-09-28T10:26:11.827
> 
> 标签：javascript, ajax, json

在网站中，我想使用 javascript 函数从文件中加载对象。我最初尝试使用 JSON，但我的 javascript 对象很复杂，并且具有一些参数的功能。有没有办法从文件中加载对象？

### myObject.js（不是有效的 JSON，因为它有一个函数）

```
{
    "value1": "some value",
    "functionValue": function() { 
        return "function value"; 
    }
} 
```

### 从文件加载对象的函数

```
function getFileObject(fileURL) {
    var myObject;

    $.ajax({
        url: fileURL,
        type: "GET",
        datatype: 'json',
        async: false,
        success: function (result) {
            myObject = result;
        }
     });

     return myObject;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:29:22.033

如果您**真的**必须传递函数实现，请不要使用 JSON 并评估您的文本。

```
function fetchFileObject(callback) {
    $.ajax({
        url: value,
        type: "GET",
        datatype: 'text',
        success: function (result) {
            var myObject = eval('('+result+')');
            callback(myObject); // do something  with myObject
        }
     });

} 
```

但是……这不是我自己会考虑的事情。

请注意，您真的不应该使用`async: false`. 它现在已被弃用，并且没有任何充分的理由使用它。这就是我重构您的代码以接受回调的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:38:58.173

您是否尝试过使用

<script src="myobject.js" type="text/javascript"/>

在您的网页标题中添加标签并将 myobject.js 文件中的对象分配给您可以在其他 .js 文件中使用的变量？

这应该适用于单个文件（我自己没有测试过），但是如果您想在客户端动态导入文件，[@dystroy](https://stackoverflow.com/users/263525/dystroy)的解决方案可能更合适。

# html - 使用 htaccess 自动重写 html、php、css 或任何文件扩展名？

> ID：12638225
> 
> 赞同：0
> 
> 时间：2012-09-28T10:26:17.663
> 
> 标签：html, regex, .htaccess, file-extension

有没有办法自动从 url 中删除文件扩展名？

例如：

用户类型

```
www.website.com/page.html 
```

它会自动将页面转换为：

```
www.website.com/page 
```

如果可能的话，使用`/`：

```
www.website.com/page/ 
```

`.htaccess`强制 url 重写文件扩展名必须是自动的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:27:37.130

你试图以错误的方式做这件事。您不想删除扩展名。您想将无扩展名请求**重写为真实文件。**所以如果用户类型

```
http://foo.bar/file 
```

您的服务器将按要求提供服务

```
http://foo.bar/file.html 
```

为此，您需要`mod_rewrite`（或等效的）并根据您的需要设置重写规则。相同的模块也用于使 URL 看起来更好，所以而不是

```
http://foo.bar/script.php?id=34&smth=abc 
```

你可以有

```
http://foo.bar/script/id/34/smth/abc 
```

甚至

```
http://foo.bar/script/34/abc 
```

[阅读更多关于 mod rewrite](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html)的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:35:00.030

我在 .htaccess 中使用它（index.php 正在处理页面）：

```
RewriteRule ^home/$ index.php?page=home
// Result: http://domain.com/home/ 
```

如果你想让它更有活力：

```
RewriteRule ^(.*)/$ index.php?page=$1
// Result: http://domain.com/any-page/ 
```

有关请求页面时可能需要的更多数据：

```
RewriteRule ^(.*)/(.*)/$ index.php?page=$1&id=$2
// Result: http://domain.com/data-page/15/ 
```

如果您只想获取没有索引部分的被调用页面：

```
RewriteRule ^(.*)/$ $1.php 
```

要删除用户添加的扩展：

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteCond %{REQUEST_FILENAME}\.html -f 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T19:22:27.343

你需要做两件事。首先，您需要将所有链接更改为不带扩展名的 URL，然后您需要创建一个 301 重定向，以将仍然可能具有带有扩展名的旧 URL 的浏览器和机器人重定向到新的漂亮 URL。这是一个新位置的服务器响应，它不是重写（这是一个仅在服务器上的内部 URI 重写）。

```
RewriteEngine On
RewriteCond %{THE_REQUEST} ^(GET|HEAD)\ /(.*)\.(html?|php)
RewriteRule ^ /%2/ [L,R=301] 
```

这使得当有人`http://www.website.com/page.html`在他们的浏览器中键入时，他们会被重定向到`http://www.website.com/page/`，新的 URL 将出现在浏览器的 URL 地址栏中。

现在您需要做的第二件事是在内部将其更改*回*有效资源，因为`/page/`不存在，它将返回 404。

```
# need these so we don't clobber legit requests, just pass them through
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# now check the extensions
RewriteCond %{REQUEST_URI} ^/(.*?)/?$
RewriteCond %{DOCUMENT_ROOT}/%1.php -f
RewriteRule ^ /%1.php [L]

RewriteCond %{REQUEST_URI} ^/(.*?)/?$
RewriteCond %{DOCUMENT_ROOT}/%1.html -f
RewriteRule ^ /%1.html [L]

RewriteCond %{REQUEST_URI} ^/(.*?)/?$
RewriteCond %{DOCUMENT_ROOT}/%1.htm -f
RewriteRule ^ /%1.htm [L] 
```

您只需要将它们放在文档根目录的 htaccess 文件中。

# mysql - Using、On 或 Where 组合两个查询

> ID：12638227
> 
> 赞同：0
> 
> 时间：2012-09-28T10:26:22.263
> 
> 标签：mysql, select, join

为了加快某些查询，我将一个大表拆分为两个表（一个具有固定行格式，另一个具有动态行格式），每个表共享相同的主键和相同的总行数，但包含不同的列。

一些查询需要来自两个表的信息。要在一个查询中获取所需的数据，我可以选择执行以下操作：

```
SELECT A.col2, B.col3 FROM A INNER JOIN B ON A.col1=B.col1 WHERE A.col1=?

SELECT A.col2, B.col3 FROM A INNER JOIN B USING (col1) WHERE A.col1=?

SELECT A.col2, B.col3 FROM A, B WHERE A.col1=? AND B.col1=? 
```

从 EXPLAIN SELECT 语句中，我看不出任何差异。我想要一些建议是否真的如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T10:41:35.270

前两个查询中使用的语法首先出现在 ANSI SQL-92 标准（[文本链接](http://www.contrib.andrew.cmu.edu/~shadow/sql/sql1992.txt)）中：

```
 <join specification> ::=
                <join condition>
              | <named columns join>

 <join condition> ::= ON <search condition>
 <named columns join> ::= USING <left paren> <join column list> <right paren> 
```

基本上，`USING (col1)`意思与 相同`ON a.col1 = b.col1`。

您的第三个查询，如果更新为...

```
SELECT A.col2, B.col3 
  FROM A, B 
 WHERE A.col1 = B.col1 AND A.col1=? AND B.col1=? 
```

... 是 'old-school' JOIN 的示例，因为该语法在 ANSI SQL-92 之前使用。

说了这么多，所有三个查询都应该被解析为等效的。

# ruby-on-rails - Carrierwave 到不同的上传文件夹 | 路线不正确

> ID：12638234
> 
> 赞同：2
> 
> 时间：2012-09-28T10:26:53.610
> 
> 标签：ruby-on-rails, routes, rvm, capistrano, carrierwave

我需要在rails 中配置我的carrierwave gem，以使用超出整个rails 范围的不同上传文件夹。

我有一个 VPS 并使用 RVM、ruby、rails。我正在使用 capistrano 进行部署，但是每次进行部署时，上传文件夹都会更改为新部署的版本，并且不会使用所有旧图像。

我想要一个静态文件夹，并且不会在每次部署时都更改。但我似乎无法获得可靠的设置，缓存和存储目录正在更改。此外，当我使用 Rails.root 时（这让我获得了当前的 capistrano 部署文件夹）需要在此文件夹上方获取 1 或 2 个地图（超出 rails.root 的方式）

我如何更改此设置以使其正常工作？

感谢您的时间

**更新**

更改为完整 url：/home/deploy/rails_apps/site/uploads/ 并且正在上传。只有当我想显示图片时，这会给我一个 X 标记。如果我想通过萤火虫检查器打开图像，它会给我错误：

没有路线匹配 [GET] "/home/deploy/rails_apps/site/uploads/product/image/5/thumb_test.png"

我必须如何制定超出此应用程序的路线？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T14:52:05.007

您是否在您的 VPS 上使用带有 Capistrano 符号链接的共享配置？如果是这样，您可以为不会被覆盖的载波图片文件夹进行配置。您还可以在开发和部署机器上使用不同的设置。

您可以观看此截屏视频：[Ryan Bates 的 Capistrano 任务](http://railscasts.com/episodes/133-capistrano-tasks)

希望能帮助到你。

# java - 将 SWT 性质添加到 Eclipse 项目

> ID：12638237
> 
> 赞同：1
> 
> 时间：2012-09-28T10:27:14.747
> 
> 标签：java, eclipse, swt

我在 Linux 下从 eclipse 导出了一个 SWT 项目，并尝试在 Windows 下导入它。到目前为止，一切正常，只是我似乎失去了项目的“SWT 本质”。使用 SWT gui 运行项目可以正常工作，但是当我尝试编辑 GUI 源时，我的源窗口下方没有 Source/Design/Bindings 选项卡，并且无法进行任何图形编辑。有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:39:46.123

我猜你正在使用 WindowBuilder。如果是这种情况，请使用以下内容：

右键单击类文件→打开方式→WindowBuilder编辑器

# android - 在 SD 卡中创建文件夹

> ID：12638238
> 
> 赞同：1
> 
> 时间：2012-09-28T10:27:15.630
> 
> 标签：android, directory, sd-card, ddms, android-file

好的，所以我使用以下代码在 SD 卡中创建了 2 个文件夹：

```
String folderPath = Environment.getExternalStorageDirectory() + "/AllAroundMe/Images/";
      File file = new File(folderPath);
      if(!file.exists())
      {
            if(file.mkdirs());
                      Log.d("MyTag","Successfully created folders");
      } 
```

我测试了这个程序，它确实有效，logcat 打印了上面的成功消息。

但是如果我导航到我的 SD 卡，我看不到“AllAroundMe”文件夹。

如何从我的计算机访问该文件夹？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T10:30:24.997

试试这个打开 DDMS 透视图 -> 文件资源管理器 -> mnt -> sdcard

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T10:31:03.447

转到 Android DDMS FIleExplorer-->mnt-->sdcard--> 并搜索您创建的 sdcard 文件夹

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T10:30:34.637

*   首先我希望你已经在你`External Storage` **的**`Manifest.xml`

*   做这样的事情......我知道你做对了，但我仍然喜欢这种方法。

    文件 f = new File("/sdcard/AllAroundMe/Images/");

*   现在从你的电脑浏览你的 sdcard，我相信你会找到这个文件夹。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T10:33:23.640

只需检查您不能在应用程序的清单文件中授予权限，只需添加此权限即可。

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

比运行您自己的代码，文件夹已在 sdcard 中创建，请检查此。

# python - 将http文件的内容打印到shell？

> ID：12638242
> 
> 赞同：0
> 
> 时间：2012-09-28T10:27:17.287
> 
> 标签：python, http, shell, tcsh

我希望能够以以下形式检索存储在服务器上的日志文件的内容：

```
http://[SOME SORT OF ADDRESS]/file.txt 
```

并将其打印到可以使用“watch”之类的东西刷新的shell，以从shell实时跟踪此日志，而不必使用浏览器。是否有任何简洁的方法可以做到这一点（可能后来被包装成一个 python 脚本）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T10:35:11.890

这将每 0.1 秒获取一次请求的 url 并显示在控制台上

```
watch -n 0.1  wget -qO- http://google.com 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:32:55.550

是`tail -f`的，适用于 Linux。但是，这仅适用于本地文件。如果文件是远程文件，您将不得不反复获取它以保持更新（我认为）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T10:34:57.140

也许你可以尝试这样的事情：

`watch "wget -N http://[SOME SORT OF ADDRESS]/file.txt &> /dev/null; cat file.txt"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T10:35:14.667

```
while sleep 60; do
    curl address
done 
```

每分钟打印一次

根据自己的喜好调整

# dynamics-crm-2011 - 如何在 CRM 2011 中重用实体字段

> ID：12638247
> 
> 赞同：1
> 
> 时间：2012-09-28T10:27:30.520
> 
> 标签：dynamics-crm-2011

我创建了一个实体名称是Student，

在该实体中，我创建了名称、年龄、资格等字段，我想添加新字段，即联系电话号码，但我不想创建新字段。

是否有机会重用联系人实体中显示的手机字段。

如果有怎么......？

请帮我..！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T10:53:39.780

不，您不能将手机字段从联系人实体移动到学生实体。

您必须在学生上创建一个新字段并在联系人上隐藏该字段。

或者，您可以添加查找要联系的学生，以便每个学生都有关联的联系记录并以这种方式使用电话号码。

或者您可以摆脱学生实体，只使用您需要的额外字段的联系人，因为学生实际上是一个实际上是联系人的人。

选择取决于您的业务需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T04:22:43.570

是的你可以。您需要创建一个 htm webresource 并在 webresource 中检索联系人号码，然后将此 htm webresource 插入到表单中。详情请看这篇文章： [http ://www.gapconsulting.co.uk/DesktopModules/SunBlog/Handlers/Print.aspx?entryid=58](http://www.gapconsulting.co.uk/DesktopModules/SunBlog/Handlers/Print.aspx?entryid=58)

# javascript - JavaScript 与 iPhone

> ID：12638249
> 
> 赞同：0
> 
> 时间：2012-09-28T10:27:34.180
> 
> 标签：javascript, iphone, html, xcode, webview

我在我的程序中使用 WebView 中的 HTML 和 JavaScript 时遇到了一个大问题。一切似乎都没有，但当我设置它的路径时，他看到了一个 Java 脚本

但是如果每个人都在 javascript 中放入 html 都可以工作

问：如何正确设置文件 javascript 的路径

***我找到了解决方案。这很简单。我的 JavaScript 文件格式错误。如果你在 UTF-8 中做出来，都站在原地，而且真的很容易添加***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:33:49.927

标准方式是

```
<script type="text/javascript" charset="utf-8" src="YourJSPath"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T12:17:47.053

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"file_name" ofType:@"file_type"];  
NSData *data = [NSData dataWithContentsOfFile:filePath];  
if (data) {  
  NSBundle *bundle = [NSBundle mainBundle]; 
  NSString *path = [bundle bundlePath];
  NSString *fullPath = [NSBundle pathForResource:@"file_name" ofType:@"file_type" inDirectory:path];
  [webView loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:fullPath]]];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T19:33:08.713

所以，我修复了这个错误。据我了解，这是用 Javascript Foreman 而不是 UTF-8 编写的事实，xCode 仅支持 UTF-8

# tsql - 将 a、b、c 添加到数据末尾

> ID：12638252
> 
> 赞同：0
> 
> 时间：2012-09-28T10:27:43.877
> 
> 标签：tsql

我有一个带有contract_code列的表，但是在这个列中有相同的数据，我怎样才能将相同的数据更改为samedata_a和samedata_b等。

例如：更改此数据

```
阿斯弗雷特
JDFJDSFJS
阿斯弗雷特

```

到

```
ASFRETERT_a
JDFJDSFJS
ASFRETERT_b

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T12:47:49.837

您可以通过将 a`row_number()`应用于列来执行此操作。如果您不需要将附加字符作为`alpha`字符，那么使用以下内容会更容易：

使用 CTE 的第一个版本：

```
-- cte version
;with cte as
(
  select col1, row_number() over(partition by col1 order by col1) rn
  from yourtable
)
select 
  case when t1.cnt > 1 
      then c.col1 + '_' 
        + cast(c.rn as varchar(10))
      else c.col1
  end yourColumn
from cte c
inner join
(
  select count(*) cnt, col1
  from yourtable
  group by col1
) t1
  on c.col1 = t1.col1; 
```

第二个版本使用子查询

```
-- non-cte version
select case when t2.cnt > 1 
      then t1.col1 + '_' 
          + cast(t1.rn as varchar(10))
      else t1.col1 
  end yourColumn
from 
(
  select col1, row_number() over(partition by col1 order by col1) rn
  from yourtable
) t1
inner join
(
  select count(*) cnt, col1
  from yourtable
  group by col1
) t2
  on t1.col1 = t2.col1 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/3dc56/9)。上面的两个版本在列的末尾添加了一个整数，但如果你想应用一个字母字符，你应该在你的数据库中添加一个函数（来自[StackOverflow](https://stackoverflow.com/questions/4676497/convert-a-number-to-letters)上这个问题的函数代码）：

```
CREATE FUNCTION dbo.fnColumnNameFromIndex(@i int)
RETURNS varchar(3)
AS
BEGIN
DECLARE @dividend int, @letters varchar(3), @modulo int
    SET @dividend = @i
    SET @letters = ''

    WHILE @dividend > 0
    BEGIN
        SET @modulo = (@dividend - 1) % 26
        SET @letters = CHAR(65 + @modulo) + @letters
        SET @dividend = CONVERT(int, (@dividend - @modulo) / 26 )
    END

    RETURN @letters
END 
```

如果创建此函数，则可以获取每行的字母字符。您的查询将是：

CTE 版本：

```
-- cte version
;with cte as
(
  select col1, row_number() over(partition by col1 order by col1) rn
  from yourtable
)
select 
  case when t1.cnt > 1 
      then c.col1 + '_' 
        + cast(dbo.fnColumnNameFromIndex(c.rn) as varchar(10))
      else c.col1
  end yourColumn
from cte c
inner join
(
  select count(*) cnt, col1
  from yourtable
  group by col1
) t1
  on c.col1 = t1.col1; 
```

子查询版本：

```
-- non-cte version
select case when t2.cnt > 1 
      then t1.col1 + '_' 
          + cast(dbo.fnColumnNameFromIndex(t1.rn) as varchar(10))
      else t1.col1 
  end yourColumn
from 
(
  select col1, row_number() over(partition by col1 order by col1) rn
  from yourtable
) t1
inner join
(
  select count(*) cnt, col1
  from yourtable
  group by col1
) t2
  on t1.col1 = t2.col1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/1697a/11)

# javascript - 在同一脚本中创建各种 IndexedDB objectStores 的最佳方法是什么？

> ID：12638253
> 
> 赞同：0
> 
> 时间：2012-09-28T10:27:50.647
> 
> 标签：javascript, html, indexeddb

对于我的 IndexedDB，我正在提取各种 Ajax 请求，这些请求将向 objectStores 提供数据。由于事务是异步的，我应该如何链接 objectStores 的创建？我正在考虑这样做：

1- 拉取脚本开头的所有 Ajax 请求。

2-请求打开数据库。

3- 在 onsuccess 处理程序中打开第一个事务以创建第一个 objectStore 并插入相应的数据。

4- 在第一个事务上调用 oncomplete 事件以创建第二个事务。

5- 对所有需要创建的对象存储执行此操作。

这是最好的方法，还是我应该只在 indexedDB.open 请求的 onsuccess 处理程序中编写所有事务？

我可以创建各种objectStores并同时插入大量数据而不会导致错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T11:17:56.320

您可以在一次交易中完成所有事情。如果您打开您的事务，则定义此事务的范围。范围可以存在于多个对象存储之外。通过提供您要定位的对象存储的所有名称的数组。

```
var transaction = db.transaction(["obj1", "obj2"]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T18:47:10.617

根据我的经验，在等待 AJAX 响应时事务往往会关闭，因此您必须在 AJAX 响应的成功处理程序中打开事务。

让多个重叠事务并行“运行”肯定没有错，但实际上 JavaScript 仍然是单线程的——你会发现即使是 AJAX 成功处理程序也是按顺序运行的，并且排序是相当可预测的（尽管不能保证），因此，如果您在每个交易中打开一个事务，然后使用一系列 put 处理数据，您可能实际看到的是：

```
openAjax1()
openAjax2()
ajax1Complete()
  // in here, open transaction1 and call objectStore1.put() many times
ajax2Complete()
  // in here, open transaction2 and call objectStore2.put() many times
put()  // from ajax1
put()  // from ajax1
put()  // from ajax1
...    // from ajax1
       // transaction1 completes
put()  // from ajax2
put()  // from ajax2
put()  // from ajax2
...    // from ajax2
       // transaction2 completes 
```

理论上，真正使事情并行发生的唯一方法是使用工作线程，但即便如此，大多数实现仍会将工作集中到单个线程。实际上，后端在优化“批量”写入方面非常出色，因此您甚至不会从使用工作人员中获得太多性能改进。

# php - 在 PHP 中用一个空格替换多个（仅内部）空格？

> ID：12638254
> 
> 赞同：5
> 
> 时间：2012-09-28T10:27:52.090
> 
> 标签：php, regex, preg-replace, pcre

```
$test1 = ' surrounding1 ';               // No replace 
$test2 = '  surrounding2    ';           // No replace
$test3 = '  extra    spaces  between  '; // Becomes '  extra spaces between  ' 
```

正则表达式`'/[ ]{2,}/'`无法解决问题，因为匹配前导和尾随空格。虽然`(?!\S+)\s{2,}(?!\S+)` [不会匹配所有内部空间](http://rubular.com/r/LtEv2MJr3x)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T10:33:58.313

```
$result = preg_replace(
    '/(?<!   # Assert that it is impossible to match...
     ^       #  start-of-string
    |        #  or
     [ ]     #  a space
    )        # ...before the current position.
    [ ]{2,}  # Match at least 2 spaces.
    (?!      # Assert that it is impossible to match...
     [ ]     #  a space
    |        #  or
     $       #  end-of-string
    )        # ...after the current position./x', 
    ' ', $subject); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-28T10:34:54.577

```
$test3 = preg_replace('/\s\s+/', ' ', $test3 ); 
```

# sql-server - 如何在 SQL Server 中选择过去三个月的所有日期

> ID：12638256
> 
> 赞同：0
> 
> 时间：2012-09-28T10:27:55.880
> 
> 标签：sql-server, date

我想从 SQL Server 的表中选择所有最近 3 个月的日期。

数据是这样的：

```
Sunday 20-05-2012
Sunday 27-05-2012
Sunday 10-06-2012
Sunday 24-06-2012
Sunday 08-07-2012
Sunday 22-07-2012
Sunday 12-08-2012
Sunday 19-08-2012
Sunday 09-09-2012
Sunday 16-09-2012 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T11:34:25.617

将日期列保存为带有星期几的 varchar - 坏主意。您无法编写更快的查询，因为您必须始终转换字段以便在 where 子句中使用它。此外，您的查询不能使用 date_column 的索引，并且每个查询都将使用扫描索引。

使用 datetime 列，查询应该是：

```
select date_column
  from table_name
 where date_column between dateadd(m, -3, getdate()) and getdate() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T11:17:17.353

尝试使用此查询：

```
select date_column from table_name
where datepart(m,date_column) > datepart(m,getdate())-3 and datepart(yy,date_column) >= datepart(yy,getdate()) 
```

# python - 如果预先分配到固定长度，二进制堆会运行得更快吗？

> ID：12638257
> 
> 赞同：0
> 
> 时间：2012-09-28T10:27:58.720
> 
> 标签：python, memory-management, heap-memory, a-star

我想用python解决一个非常大的迷宫。我使用 A* 算法和二进制堆作为优先级队列...但是它太慢了...如果我将堆预分配为固定大小，例如计算迷宫中的所有位置并将此长度的列表用作堆，它会运行得更快吗?

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T11:02:01.387

我们可以通过比较构建列表的时间来估算分配列表的成本：

```
from timeit import Timer

>>> Timer('a = [0]*1000000').timeit(100)
0.587
>>> Timer('for i in xrange(1000000): a[i] = i', 'a = [0] * 1000000').timeit(100)
4.464
>>> Timer('for i in xrange(1000000): a.append(i)', 'a = []').timeit(100)
12.360 
```

这表明构建一个百万项目列表比预先分配它需要大约 75 毫秒。

# php - 如何从机器的当前日期和时间制作一个唯一的六位数？

> ID：12638260
> 
> 赞同：1
> 
> 时间：2012-09-28T10:28:00.390
> 
> 标签：php

这没关系，但会导致重复，如何分配机器日期和时间并应用于该六位数唯一？

不工作：`sprintf("%0d", mt_rand(1, 999999));`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T10:30:51.507

试试这个：

```
sprintf("%06d", mt_rand(1, 999999)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:49:00.250

同样，看看：

```
uniqid(); 
```

那也可以用...

[http://php.net/manual/en/function.uniqid.php](http://php.net/manual/en/function.uniqid.php)

# .net - .NET 客户端通过服务引用错误访问服务

> ID：12638263
> 
> 赞同：1
> 
> 时间：2012-09-28T10:28:08.673
> 
> 标签：.net, wcf

我试图通过我的 .Net 客户端应用程序中的服务引用访问服务。当我访问服务方法时，我收到以下错误：

> 访问服务方法时捕获的异常
> 
> System.Xml.XmlException 被捕获 Message=End element 'Body' from namespace 'http://schemas.xmlsoap.org/soap/envelope/' 预期。从命名空间中找到元素“ns:updateStatusAsReadResponse”

我的 app.config 看起来像这样：

```
<bindings>
  <basicHttpBinding>
      <binding name="documentproxySoap11Binding" closeTimeout="00:01:00"
             openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
             allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
             maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
             messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
             useDefaultWebProxy="true">
      <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
          maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <security mode="None">
        <transport clientCredentialType="None" proxyCredentialType="None"
            realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
    </binding>

  </basicHttpBinding>
  <customBinding>
         <binding name="documentproxySoap12Binding">
      <textMessageEncoding maxReadPoolSize="64" maxWritePoolSize="16"
          messageVersion="Soap12" writeEncoding="utf-8">
        <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
            maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      </textMessageEncoding>
      <security authenticationMode="MutualCertificate" >
      </security>
      <httpTransport manualAddressing="false" maxBufferPoolSize="524288"
          maxReceivedMessageSize="65536" allowCookies="false" authenticationScheme="Anonymous"
          bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
          keepAliveEnabled="true" maxBufferSize="65536" proxyAuthenticationScheme="Anonymous"
          realm="" transferMode="Buffered" unsafeConnectionNtlmAuthentication="false"
          useDefaultWebProxy="true" />
    </binding>
  </customeBinding>
  <client>
        <endpoint address="http://xxx.documentproxyHttpSoap11Endpoint/"
             binding="basicHttpBinding" bindingConfiguration="documentproxySoap11Binding"
             contract="documentProxy.documentproxyPortType" name="documentproxyHttpSoap11Endpoint" />

  </client> 
```

# android - 通过设备或服务器向 Urbanairship 注册 APID

> ID：12638264
> 
> 赞同：0
> 
> 时间：2012-09-28T10:28:10.313
> 
> 标签：android, ios, push, android-c2dm, urbanairship.com

我有一个应用程序设置，其中 Android 和 IOS 设备都配置了 UA 库。我遇到的问题是了解其中一些步骤的目的，或者我是否在重复工作。我将首先解释我设置的过程。

1.  在应用程序启动时，设备似乎已成功向 UA 注册。

2.  然后设备将它们的 apid 和信息发布到我自己的服务（在不同的服务器上）。

3.  我的服务器存储设备 ID 信息和推送所需的一切。

4.  对于每个进入的推送启用设备，我的服务器都会对 UA 执行订阅调用。IOS 为“/api/device_tokens/”，Android 为“/api/apids”。

5.  这个服务器被设计成当它想要发送推送通知时，它会查询它拥有的设备 ID 和令牌列表，并将这些信息发送到 UA 的推送 API 服务。“/api/push/”等...

然而，有一个步骤让我感到困惑。第 1 步和第 4 步有什么区别。我基本上是注册了两次设备令牌和信息吗？一次来自设备，一次来自我自己的服务器？

简而言之，设备执行的注册（根据其相关库）与从我的服务器到 UA 的 api“/api/device_tokens”的注册之间有什么区别

此外，这在哪里发挥作用： [https ://docs.urbanairship.com/display/DOCS/Server%3A+Subscription+API](https://docs.urbanairship.com/display/DOCS/Server%3A+Subscription+API)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T19:15:34.677

UA 系统中的术语“订阅”是指定期内容订阅，例如杂志类型的应用程序。而“注册”是系统中的设备注册。每次启动应用程序时（或多或少），应用程序都会向 UA 服务器注册自己。通常不需要在每次推送之前重新注册设备，但是这样做应该不会有害。如果您在服务器上维护设备 ID 列表，则应定期使用反馈 API 来修剪您的列表。这将返回“停用”设备 ID 的列表，因此您不会在系统中存储无法寻址的设备 ID。

除非您的应用正在销售订阅，否则您无需担心订阅 API。

# javascript - 其他可调整大小的 div 宽度上的实时监听器

> ID：12638271
> 
> 赞同：0
> 
> 时间：2012-09-28T10:28:24.670
> 
> 标签：javascript, jquery

假设我们有一个 div：

```
<div id="left">Some content</div> 
```

id 为“left”的 div 是可调整大小的 div（可以在浏览器中用鼠标调整大小），当调整大小时，它会接收到当前宽度的 CSS 样式，如下所示：

```
<div id="left" style="width: 289px;">Some content</div> 
```

我想要实现的是读取#left div的实时事件（或类似的东西）的宽度值，并基于该值添加一些条件（它必须是实时事件，而不是在点击或鼠标释放点击等时读取它.) ...提前感谢您的帮助！

**解决方案：**

您可以使用自定义绑定函数来实现此目的：

```
(function(){
        var interval;
        jQuery.event.special.liveresize = {
            setup: function(){
                var self = this,
                $this = $(this),
                $originalContent = $this.width();
                interval = setInterval(function(){
                if($originalContent != $this.width()) {
                        $originalContent = $this.width();
                        jQuery.event.handle.call(self, {type:'liveresize'});
                    }
                },100);
            },
            teardown: function(){
            clearInterval(interval);
            }
        };
        })(); 
```

然后就叫它：

```
$(function() {
            $('#left').bind('liveresize', function() {
                var actual_width = $(this).width();
                if(actual_width < 930) 
                {
                    $('#left').addClass('ng-av-small-left');
                    $('#left').addClass('ng-av-small-right');    
                } else 
                {
                    $('#left div.block div.left').removeClass().addClass('left');
                    $('#left div.block div.right').removeClass().addClass('right');
                }       
                });
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T10:47:31.313

你可以像这样得到它

```
 var j = $('.box').height(); 
```

检查此链接以获取可调整大小的 div 标签

请参考此链接

[http://jqueryui.com/demos/resizable/#method-option](http://jqueryui.com/demos/resizable/#method-option)

获取 div 的大小

[http://www.ezineasp.net/post/Javascript-Get-Height-of-Div-onclick.aspx](http://www.ezineasp.net/post/Javascript-Get-Height-of-Div-onclick.aspx)

# android - 使用 setStyle 时 DialogFragment 中的 Android ListView 错误

> ID：12638278
> 
> 赞同：3
> 
> 时间：2012-09-28T10:28:49.707
> 
> 标签：android, android-ui, android-4.0-ice-cream-sandwich, android-dialog, android-dialogfragment

我在使用带有 ListView 的 DialogFragment 时遇到问题。当我在 onCreate 中使用 setStyle 时出现问题。

这是代码（为了更清楚地了解这个问题，我用洋红色为列表文本视图着色）：

```
import android.app.DialogFragment;
import android.graphics.Color;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ListView;
import android.widget.TextView;

public class MenuDialog extends DialogFragment {

    public static MenuDialog create() {
        MenuDialog frag = new MenuDialog();
        return frag;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setStyle(STYLE_NO_TITLE, 0);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        ListView v = new ListView(getActivity());
        v.setAdapter(new BaseAdapter() {

            @Override
            public View getView(int position, View convertView, ViewGroup parent) {
                TextView view = null;
                if (convertView == null) {
                    view = new TextView(getActivity());
                    view.setTextAppearance(getActivity(), android.R.style.TextAppearance_Large);
                    view.setPadding(15, 15, 15, 15);
                    view.setBackgroundColor(Color.MAGENTA);
                }
                else
                    view = (TextView) convertView;

                switch (position) {
                case 0: view.setText("Random"); break;
                case 1: view.setText("Community favourites"); break;
                case 2: view.setText("Change image"); break;
                case 3: view.setText("Share"); break;
                case 4: view.setText("Informations"); break;
                }

                return view;
            }

            @Override public long getItemId(int arg0) { return 0; }
            @Override public Object getItem(int arg0) { return null; }
            @Override public int getCount() { return 5; }
        });
        return v;
    }
} 
```

这是它提供的对话框的图像：

![无标题：不工作](../Images/62878a056ecf1ee58b26e03adaaa7d34.png)

现在，如果我简单地评论 setStyle(STYLE_NO_TITLE, 0); 在 onCreate 方法中，一切都按预期工作：

![标题：作品](../Images/a9f7b794990690dc20e7294c01669e65.png)

我究竟做错了什么 ？我不能使用简单的 AlertDialog 因为我需要自定义更多这些列表项。

**编辑：** [您可以在此处下载演示问题的演示 Android Eclipse 项目](http://www.mediafire.com/?jkjrza639a2dzz5)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T11:32:21.197

1.  列表.xml

    ```
    <?xml version="1.0" encoding="utf-8"?>
     <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:orientation="vertical" >

      <ListView
        android:id="@+id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"

         />

     </LinearLayout> 
    ```

2.  menu_rowview.xml

    ```
     <?xml version="1.0" encoding="utf-8"?>
           <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"
        android:orientation="horizontal"
      android:id="@+id/linear"
             >

           <TextView
              android:id="@+id/textView1"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:layout_marginBottom="10dp"
              android:layout_marginLeft="20dp"
              android:layout_marginRight="20dp"
              android:layout_marginTop="10dp"
              android:text="@android:string/unknownName"
              android:textAppearance="?android:attr/textAppearanceLarge" />

             </LinearLayout> 
    ```

3.  更改 onCreateView() （在您的项目中）

    ```
     public View onCreateView(final LayoutInflater inflater, ViewGroup container,    Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.list, container);
    ListView v=(ListView) view.findViewById(R.id.list);
    v.setAdapter(new BaseAdapter() {

        public View getView(int position, View convertView, ViewGroup parent) {
            View rowView = null;
            if (convertView == null) {
                rowView = inflater.inflate(R.layout.menu_rowview, parent, false);

            }
            else
                rowView = convertView;
            LinearLayout lay=(LinearLayout) rowView.findViewById(R.id.linear);
            lay.setBackgroundColor(Color.MAGENTA);
            TextView textView = (TextView) rowView.findViewById(R.id.textView1);
            switch (position) {
            case 0: textView.setText("Random"); break;
            case 1: textView.setText("Community favourites"); break;
            case 2: textView.setText("Change image"); break;
            case 3: textView.setText("Share"); break;
            case 4: textView.setText("Informations"); break;
            }

            return rowView;
        }

        @Override public long getItemId(int arg0) { 
            return arg0; }
        @Override public Object getItem(int arg0) { return arg0; }
        @Override public int getCount() { return 5; }
    });
    return view;
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-04T12:58:22.827

在 onCreate 方法中使用此代码

`getDialog().getWindow().requestFeature(Window.FEATURE_NO_TITLE);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T13:20:10.350

使用`android:minWidth="360dp"`在您的`TextView`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-30T06:09:15.337

这个问题今天让我疯狂一整天，这绝对是系统中的一个错误。我最终要解决的问题是我离开了 STYLE_NO_TITLE 因为我真的不想处理标题，我的其他对话框样式进入主题：

```
fragment.setStyle(DialogFragment.STYLE_NO_TITLE, R.style.Dialog); 
```

这当然会在某些手机上带来问题，这不仅仅是背景的问题，也是一个可触摸的区域。现在讨厌的 hacky 修复在我的项目 xml 布局中：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:height="48dp"
    android:width="600dp"
    android:textSize="19sp"
    android:textColor="@color/blue"
    android:paddingLeft="16dp"
    android:gravity="center_vertical"
    /> 
```

将宽度硬编码为大值是一个技巧，但我不太确定它如何影响低分辨率设备的性能。在 Kindle Fire、Nexus 7 和 2.2 的模拟器上测试 希望这对某人有所帮助

# fortran95 - 打开语句中的状态子句显示奇怪的行为

> ID：12638279
> 
> 赞同：1
> 
> 时间：2012-09-28T10:28:59.530
> 
> 标签：fortran95

嗨，这是我的 fortran 代码

```
program test

implicit none

INTEGER :: ierror
character:: filename

filename="fun"

open(unit=25,file=filename ,status="replace",action="write", &
           iostat=ierror)

              write(*,*)ierror

end program test 
```

我正在使用查普曼的书来学习 Fortran 95-2003。据他说（第 219 页）`status='replace'`子句将打开一个名为`fun`. 如果有任何具有该名称的文件，则将其删除。但是我在`fun`存储 Fortran 程序的主目录中创建了该文件，然后运行了该程序。它确实创建了一个名为 的新文件`f`。该文件`fun`未被删除。所以我不明白这种行为....任何帮助表示赞赏......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T11:45:23.143

您已将变量声明`filename`为具有类型`character`。由于您没有指定长度，编译器将其理解为长度为 1，因此您的分配

```
filename="fun" 
```

导致`filename`具有价值`f`。将变量声明更改为

```
character(len=3) :: filename 
```

或者，可能更好，

```
character(len=:), allocatable :: filename 
```

后一个版本使用现代（我认为是 2003 年及以后）Fortran 的*自动分配*功能。

# jquery - 如何在添加到 dom 之前获取 css 属性？

> ID：12638283
> 
> 赞同：8
> 
> 时间：2012-09-28T10:29:14.607
> 
> 标签：jquery, html

我有这样的代码，这是一个示例代码，

```
<style>
    .divStyle
    {
        border: 2px solid gray;
    }
</style>
<script>
    $(document).ready(function () {
        var div = $("<div class='divStyle'></div>");
        var border = div.css("border");
    });
</script> 
```

边框返回空字符串。如何获得边框值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T10:44:44.623

如果不将其插入到 dom 中就无法完成，`DOM`但这是我能想到的一个技巧，它将它作为隐藏插入到 dom 中，获取 css 属性并将其删除。

```
$(document).ready(function () {
    var div = $("<div class='divStyle'></div>").css('display','none').appendTo('body');
    var border = div.css('border');
    div.remove();
    alert(border);
}); 
```

[**演示**](http://jsbin.com/izidoj/1/edit)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T10:32:47.187

您可以使用类插入隐藏输入，获取 css 属性并使用它们。

```
<input id="getPadding" class="inp" type="text" style="display:none" /> 
```

然后在添加元素之后您可以获取元素父宽度，然后将输入设置为该宽度减去填充量.. 像这样

```
 $('td input').width($(this).parent().width() - [$('#getPadding').css('padding-left') + $('#getPadding').css('padding-right')]) 
```

或者，有一个仅 css 的解决方案，但它在 IE7 及以下版本中不起作用

```
 $('td input').width($(this).parent().width() - [$('#getPadding').css('padding-left') + $('#getPadding').css('padding-right')])
Alternatively there is a css only solution but it does not work in IE7 and below

td input {
    margin: 0px;
    width: 100%;
    height: 100%;
    border: 0px;
    display: block;
    padding: 2px 5px;
    -moz-box-sizing: border-box;
    -ms-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T10:45:47.680

使您的元素不可见。像这样的东西：

```
 var div = $("<div class='divStyle'></div>"); // Create
     $(body).append(div);  // Render
     $(div).hide();  // Hide immediately
 var border = $(div).css("border");  // Get value
    $(div).remove();   // Destroy 
```

# c# - 在for循环中创建对象

> ID：12638287
> 
> 赞同：0
> 
> 时间：2012-09-28T10:29:28.800
> 
> 标签：c#, c#-4.0

在 forloop 内部和外部创建对象是否有区别..我不确定，但我遇到了一个错误，因为在 forloop 外部声明了 oCategoryDe​​finition：

> 在 System.Int32.System.IConvertible.ToType（类型类型，IFormatProvider 提供程序）的 System.Convert.DefaultToType（IConvertible 值，类型 targetType，IFormatProvider 提供程序）从“System.Int32”到“xxx.CategoryDe​​finition”的无效转换。在 Service.AddFeatureValues(VINDescription vinDescription, VehicleDescription vehicleDescription) 处的 Convert.ChangeType(Object value, Type conversionType, IFormatProvider provider)

>

```
 for (int i = 0; i < listLength; i++)
    {
        CategoryDefinition oCategoryDefinition = (CategoryDefinition)Convert.ChangeType
         (vehicleDescription.genericEquipment[i].Item, typeof(CategoryDefinition));
        vinDescription.StandardFeature.Add(oCategoryDefinition.category.Value);
    } 
```

和

```
CategoryDefinition oCategoryDefinition = new CategoryDefinition();

for (int i = 0; i < listLength; i++)
{
   oCategoryDefinition = (CategoryDefinition)Convert.ChangeType
       (vehicleDescription.genericEquipment[i].Item, typeof(CategoryDefinition));
   vinDescription.StandardFeature.Add(oCategoryDefinition.category.Value);
} 
```

**编辑**

为问题添加一个角度：以下是引发**上述错误**的方法：

```
 private void AddFeatureValues(VINDescription vinDescription, VehicleDescription vehicleDescription)
    {
        GenericEquipment[] genericEquipList = null;

        //To add standard features to the vehicle details list.
        CategoryDefinition oCategoryDefinition =  new CategoryDefinition();

        try
        {
            genericEquipList = vehicleDescription.genericEquipment;

            if (genericEquipList != null)
            {
                //Stores the number of items in generic list.
                int listLength = genericEquipList.Length;

                for (int i = 0; i < listLength; i++)
                {
                    //Casting the object type to CategoryDefinition type.
                    oCategoryDefinition = (CategoryDefinition)Convert.ChangeType(vehicleDescription.genericEquipment[i].Item,
                                            typeof(CategoryDefinition));
                    vinDescription.StandardFeature.Add(oCategoryDefinition.category.Value ?? "N/A");
                }
            }
        }
        catch (Exception ex)
        {  
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:45:00.980

也许尝试以下方法，因为唯一的主要区别是 new 关键字。

```
CategoryDefinition oCategoryDefinition;

for (int i = 0; i < listLength; i++)
{
   oCategoryDefinition = (CategoryDefinition)Convert.ChangeType
       (vehicleDescription.genericEquipment[i].Item, typeof(CategoryDefinition));
   vinDescription.StandardFeature.Add(oCategoryDefinition.category.Value);
} 
```

但是，演员表例外并没有真正帮助我的主张。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:39:41.157

在第二种情况下，由于扩展的变量范围（例如方法），您仍然可以引用上次迭代后持续的对象，因此使用第一个版本更安全。

但是（取决于框架如何实现创建引用）它可能会导致轻微的性能影响，这在迭代次数变大时很重要。

# php - PHP CLI：从 ARGV 中删除最后一个元素

> ID：12638288
> 
> 赞同：2
> 
> 时间：2012-09-28T10:29:30.407
> 
> 标签：php, argv

我不确定这是否可能，但我需要做一个肮脏的黑客。假设我从 cli 调用 php

```
php script.php one two 
```

然后在script.php中我正在使用`two`参数做一些事情，然后我想删除它，所以后来包含的第三方代码认为初始命令是

```
php script.php one 
```

我试过了`unset($argv[2])`，`unset($GLOBALS['argv'][2])`但这不起作用。毕竟我想做的事有可能吗？

更新：不起作用=我从第三方代码“太多参数”中得到异常

更新：当然应该是 argv[1]，但这只是这个问题的错字，而不是实际问题。请假设我已经写了 argv[1] :)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T09:58:31.897

您正在尝试使用 删除第三个元素`unset($argv[2])`。

数组是从零开始的。因此，要删除第二个元素，请使用：

> `unset($argv[1])`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T10:40:22.020

在 php 脚本中操作 $argc 和 $argv 是不可能的 AFAIK。这是因为这些值不是脚本本身的一部分，而是在调用范围内定义的。

作为替代方案，您可以复制数组，弹出最后一个参数并使用 exec() 或 system() 调用“第三方代码”并移交缩减的副本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T01:04:49.163

您可以更改变量的值：

*   `$argv`
*   `$argc`
*   `$_SERVER['argv']`
*   `$_SERVER['argc']`
*   `$GLOBALS['argv']`
*   `$GLOBALS['argc']`

这可能会影响用 PHP 编写的依赖此变量的代码。（这可能已经是你想要的了）。

我发现无法在后台更改 argv 和 argc 以`getopt()`影响 PHP 内部函数的行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T13:23:48.397

是的，如果您愿意，您可以更改此设置。

我将此代码用于正在运行的 cli 脚本

```
foreach( $argv as $key => $arg )
  if( $arg == '-s' )
  {
    $s = $argv[ ++$key ];
    unset( $argv[   $key ], $_SERVER[ 'argv' ][ $key ] );
    unset( $argv[ --$key ], $_SERVER[ 'argv' ][ $key ] );
    $argv = array_values( $argv );
    $_SERVER[ 'argc' ]--;
    break;
  } 
```

# .net - 在 Windows 8 RTM 上的 .NET 应用程序中嵌入 Powershell v2.0

> ID：12638289
> 
> 赞同：23
> 
> 时间：2012-09-28T10:29:37.020
> 
> 标签：.net, powershell

在从 Windows 7 升级之前尝试运行托管的 powershell 脚本时出现以下错误，我从未收到此错误。

> 加载扩展类型数据文件时出现以下错误：Microsoft.PowerShell.Core, C:\Windows\SysWOW64\WindowsPowerShell\v1.0\types.ps1xml(2977)：类型“System.Security.AccessControl.ObjectSecurity”中的错误: 例外：getter 方法应该是公共的、非 void 的、静态的，并且有一个 PSObject 类型的参数。Microsoft.PowerShell.Core，C:\Windows\SysWOW64\WindowsPowerShell\v1.0\types.ps1xml(2984)：类型“System.Security.AccessControl.ObjectSecurity”中的错误：异常：getter 方法应该是公共的，非 void , 静态的，并且有一个 PSObject 类型的参数。Microsoft.PowerShell.Core，C:\Windows\SysWOW64\WindowsPowerShell\v1.0\types.ps1xml(2991)：类型“System.Security.AccessControl.ObjectSecurity”中的错误：异常：getter 方法应该是公共的，非 void , 静态的，并且有一个 PSObject 类型的参数。Microsoft.PowerShell.Core，C:\Windows\SysWOW64\WindowsPowerShell\v1.0\types.ps1xml(2998)：类型“System.Security.AccessControl.ObjectSecurity”中的错误：异常：getter 方法应该是公共的，非 void , 静态的，并且有一个 PSObject 类型的参数。Microsoft.PowerShell.Core，C:\Windows\SysWOW64\WindowsPowerShell\v1.0\types.ps1xml(3005)：“System.Security.AccessControl.ObjectSecurity”类型中的错误：异常：getter 方法应该是公共的，非 void , 静态的，并且有一个 PSObject 类型的参数。getter 方法应该是公共的、非 void 的、静态的，并且有一个 PSObject 类型的参数。Microsoft.PowerShell.Core，C:\Windows\SysWOW64\WindowsPowerShell\v1.0\types.ps1xml(3005)：“System.Security.AccessControl.ObjectSecurity”类型中的错误：异常：getter 方法应该是公共的，非 void , 静态的，并且有一个 PSObject 类型的参数。getter 方法应该是公共的、非 void 的、静态的，并且有一个 PSObject 类型的参数。Microsoft.PowerShell.Core，C:\Windows\SysWOW64\WindowsPowerShell\v1.0\types.ps1xml(3005)：“System.Security.AccessControl.ObjectSecurity”类型中的错误：异常：getter 方法应该是公共的，非 void , 静态的，并且有一个 PSObject 类型的参数。

我在 App.config 中应用了以下内容：

```
<dependentAssembly>
  <assemblyIdentity name="System.Management.Automation" publicKeyToken="31bf3856ad364e35" />
  <publisherPolicy apply="no" />
</dependentAssembly> 
```

可能是什么问题？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-08T07:27:54.663

解决方案是执行以下操作，而不是按照我阅读的帖子的建议仅为 System.Management.Automation 添加一个块，您需要为所有引用的 PS 程序集添加一个块。

```
 <runtime>
      <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
        <dependentAssembly>
            <assemblyIdentity name="System.Management.Automation" publicKeyToken="31bf3856ad364e35" />
            <publisherPolicy apply="no" />
          </dependentAssembly>
        <dependentAssembly>
          <assemblyIdentity name="Microsoft.PowerShell.Commands.Utility" publicKeyToken="31bf3856ad364e35" />
          <publisherPolicy apply="no" />
        </dependentAssembly>
        <dependentAssembly>
          <assemblyIdentity name="Microsoft.PowerShell.ConsoleHost" publicKeyToken="31bf3856ad364e35" />
          <publisherPolicy apply="no" />
        </dependentAssembly>
        <dependentAssembly>
          <assemblyIdentity name="Microsoft.PowerShell.Commands.Management" publicKeyToken="31bf3856ad364e35" />
          <publisherPolicy apply="no" />
        </dependentAssembly>
        <dependentAssembly>
          <assemblyIdentity name="Microsoft.PowerShell.Security" publicKeyToken="31bf3856ad364e35" />
          <publisherPolicy apply="no" />
        </dependentAssembly>
        <dependentAssembly>
          <assemblyIdentity name="Microsoft.PowerShell.Commands.Diagnostics" publicKeyToken="31bf3856ad364e35" />
          <publisherPolicy apply="no" />
        </dependentAssembly>
        </assemblyBinding>
    </runtime> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-11-02T06:35:35.873

我在 VS 2015 Update 3 中遇到了同样的问题。

我必须删除文件夹：

```
%APPDATA%\Local\Microsoft\VisualStudio\ 
```

然后添加到：

```
c:\Users\%username%\AppData\Local\Microsoft\VisualStudio\14.‌​0\devenv.exe.config 
```

在部分：

```
<runtime> 
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1"> 
```

以下几行：

```
<dependentAssembly>
  <assemblyIdentity name="System.Management.Automation" publicKeyToken="31bf3856ad364e35" />
  <publisherPolicy apply="no" />
</dependentAssembly>

<dependentAssembly>
  <assemblyIdentity name="Microsoft.PowerShell.Commands.Utility" publicKeyToken="31bf3856ad364e35" />
  <publisherPolicy apply="no" />
</dependentAssembly>

<dependentAssembly>
  <assemblyIdentity name="Microsoft.PowerShell.ConsoleHost" publicKeyToken="31bf3856ad364e35" />
  <publisherPolicy apply="no" />
</dependentAssembly>

<dependentAssembly>
  <assemblyIdentity name="Microsoft.PowerShell.Commands.Management" publicKeyToken="31bf3856ad364e35" />
  <publisherPolicy apply="no" />
</dependentAssembly>

<dependentAssembly>
  <assemblyIdentity name="Microsoft.PowerShell.Security" publicKeyToken="31bf3856ad364e35" />
  <publisherPolicy apply="no" />
</dependentAssembly>

<dependentAssembly>
  <assemblyIdentity name="Microsoft.PowerShell.Commands.Diagnostics" publicKeyToken="31bf3856ad364e35" />
  <publisherPolicy apply="no" />
</dependentAssembly> 
```

我花了两天时间寻找解决方案……谢谢 MS :-/

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-20T10:03:57.107

上面的答案对我不起作用，我通过删除 %APPDATA%..\Local\Microsoft\VisualStudio\ 文件夹解决了这个问题。

重新启动 VS 后，将重新创建此文件夹，并且包管理器控制台再次工作。有点粗糙，但它可以完成工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-03T08:33:07.240

在尝试了已接受答案中的解决方案并厌倦了 Visual Studio 重置文件后，我从头开始重新安装了 VS 2015，此后一直没有出现问题。如果您发现问题仍然存在，那么核选项绝对值得一试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-28T21:11:21.990

为您的操作系统安装适当版本的 PowerShell：

*   Windows XP SP2 / Vista / 2003 / 2008 - PowerShell v1.0
*   Windows XP SP3 / Vista SP1 / 7 / 2003 SP2 / 2008 R2 - PowerShell v2.0
*   Windows 7 SP1 / 8 / 2008 SP1 / 2008 R2 SP1 / 2012 - PowerShell v3.0
*   Windows 7 SP1 / 8.1 / 2008 R2 SP1 / 2012 / 2012 R2 - PowerShell v4.0
*   Windows 7 SP1 / 8.1 / 2008 R2 SP1 / 2012 / 2012 R2 - PowerShell v5.0（作为 Windows Management Framework (WMF) 5.0 的一部分）

# android - 启动并稍后仅刷新服务中的活动

> ID：12638290
> 
> 赞同：0
> 
> 时间：2012-09-28T10:29:46.293
> 
> 标签：android, service, android-activity

我的服务目前正在监听电话，然后通过 startActivity 启动一个活动：

```
Intent intent = new Intent(context, CallMonitor.class);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_MULTIPLE_TASK);
intent.putExtra("call", call);
startActivity(intent); 
```

因此，当服务收到更多电话时，将启动更多活动。

但我希望该服务只启动一个活动。下次它应该将调用发送到已经开始的活动。活动会自行更新。

最好的方法是什么？

亚历山大·米尔克，柏林

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T10:39:09.283

您应该使用**intent.addFlags(intent.FLAG_ACTIVITY_REORDER_TO_FRONT)**来调用已经启动的活动并将其带回前面。在该活动中，您应该覆盖 onResume() 方法。并且为了根据您传递的意图更新该活动，您应该覆盖 onNewIntent() 方法以设置新收到的意图。例如

```
@Override
protected void onNewIntent(Intent intent) {
    super.onNewIntent(intent);
    setIntent(intent);
}

@Override
protected void onResume() {
    super.onResume();
    callString=getIntent().getExtras().getString("call");
    //your code
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T15:28:02.513

经过数小时的测试，解决方案只是 AndroidManifest.xml 中的一行代码：

```
<activity
    ...
    android:launchMode="singleTask"
    ....
</activity> 
```

# java - 如何在 Mongo 中为嵌入对象创建查询？

> ID：12638291
> 
> 赞同：1
> 
> 时间：2012-09-28T10:29:57.790
> 
> 标签：java, mongodb

任何人都可以帮助我创建 mongo 查询以删除 "name" : "gdfgdfgdfg" 嵌入文档

如下存储在 Mongo db 中的对象。

```
{
    "_id": ObjectId("50656f33a4e82d3f98291eff"),
    "description": "gdfgdfgdfg",
    "menus": [
    {
        "name": "gdfgdfgdfg"**,
        "description": "dfgdgd",
        "text": "dfgdfg",
        "key": "2",
        "onSelect": "yyy",
        "_id": ObjectId("50656f3ca4e82d3f98291f00")
    },
    {
        "name": "dfg",
        "description": "dfgdfgdfgdf",
        "text": "dfgdgf",
        "key": "1",
        "onSelect": "uuuu",
        "_id": ObjectId("50656f44a4e82d3f98291f01")
    }
    ]
} 
```

任何人都可以帮助我，我是Mongo的新手

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:19:18.920

在 JavaScript shell 中，您可以这样做：

```
var query = {"_id": ObjectId("50656f33a4e82d3f98291eff")};
db.collection.update(query, {'$pull':{ menus: {name : 'gdfgdfgdfg'} } }); 
```

或使用 ID。

```
db.collection.update(query, {'$pull': { menus: {"_id": ObjectId("50656f3ca4e82d3f98291f00")} } }); 
```

使用 Java 驱动程序应该是这样的：

```
BasicDBObject query = new BasicDBObject("_id", new ObjectId("50656f33a4e82d3f98291eff"));

BasicDBObject docToRemove = new BasicDBObject("name", "gdfgdfgdfg");

BasicDBObject updateCommand = new BasicDBObject("$pull", new BasicDBObject("menus", docToRemove));

collection.update(query, updateCommand); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:41:05.687

Mongo 不会让您删除嵌入的文档。您需要做的是从集合中取出对象，删除列表中的一个对象，然后将其保存回数据库。

```
obj = db.collection.findOne({"_id": ObjectId("50656f33a4e82d3f98291eff")});
menus = obj.menus.splice(0,1); // Or some other way to manually delete
                               // the one item in the list
db.collection.update({"_id": ObjectId("50656f33a4e82d3f98291eff")},
                     {$set: {menus: menus}}); 
```

很复杂，看[这里](https://stackoverflow.com/questions/4588303/in-mongodb-how-do-you-remove-an-array-element-by-its-index)。

**编辑**：如果你不知道索引，你可以试试这个：

```
obj = db.collection.findOne({"_id": ObjectId("50656f33a4e82d3f98291eff")});
var i = 0;
for(i=0;i<obj.menus.length;i++) {
    if(obj.menus[i].name === "gdfgdfgdfg")
        break;
}
menus = obj.menus.splice(i,1);
db.collection.update({"_id": ObjectId("50656f33a4e82d3f98291eff")},
                     {$set: {menus: menus}}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-28T10:36:51.630

```
$conditionArray=array("_id"=>ObjectId("50656f33a4e82d3f98291eff"));
$dataArray=array("description"=>"");
$db->$collectionName->update($conditionArray,array('$unset' =>$dataArray))->limit(1); 
```

# scala - 宏、拼接和模式匹配

> ID：12638293
> 
> 赞同：6
> 
> 时间：2012-09-28T10:30:20.670
> 
> 标签：scala, macros, pattern-matching, scala-2.10, scala-macros

有没有办法在模式匹配中使用宏的参数？我想这样做：

```
def extr(X:AnyRef) = macro extrImpl

def extrImpl(c:Context)(X:c.Expr[AnyRef]):c.Expr[AnyRef] = {
  import c.universe._

  val tree = reify {
    new {
      def unapply(x:String):Option[String] = x match {
        case X.splice => Some(x) //error
        case _ => None
      }
    }
  }.tree
  c.Expr(c.typeCheck(tree))
} 
```

但不幸的是，编译器说“需要稳定的标识符，但找到了 X.splice”。通常，可以通过首先分配一个 val 来解决这个问题，例如：

```
val XX = X.splice 
```

但当然，这也不适用于拼接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T11:42:38.217

不幸的是，现在不可能（并且在 2.10.0-final 中也不可能），但我们有一些工作可能会在后续版本中有所帮助:)

# sql - 加入 SQL 单一查询

> ID：12638298
> 
> 赞同：1
> 
> 时间：2012-09-28T10:30:47.020
> 
> 标签：sql, sql-server, join, llblgenpro

```
select * from ProjectFeature pf
inner join ProjectArea pa
on pa.AreaId = pf.AreaId
inner join Project p
on p.ProjectId = pa.ProjectId
where (p.ProjectId=175 AND pf.FeatureStatusTypeId=2
AND (pf.FeatureId IN (SELECT dbo.[MaxFeatureVersoinId](pf.FeatureId) AS [FeatureId])) AND (pf.FeatureId IN (SELECT dbo.[MaxFeatureVersoinId](pf.FeatureId) AS [FeatureId]))) 
```

我有另一个问题

```
select * from ProjectFeature pf
inner join ProjectArea pa
on pa.AreaId = pf.AreaId
inner join Project p
on p.ProjectId = pa.ProjectId
where (p.ProjectId=175 AND pf.FeatureStatusTypeId=2
AND (pf.FeatureId IN (SELECT dbo.[MaxFeatureVersoinId](pf.FeatureId) AS [FeatureId])) AND (pf.FeatureId IN (SELECT dbo.[MaxFeatureVersoinId](pf.ChangeRequestToFeatureId) AS [FeatureId]))) 
```

第二个查询完全相同，但该函数在查询的最后采用另一个字段

我已经尝试过 UNION 运算符，但 LLBLGEN pro 不支持 UNION 运算符我怎样才能使这个 int oa 成为检索两个结果集的单个查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:04:15.917

```
select * from ProjectFeature pf
inner join ProjectArea pa
on pa.AreaId = pf.AreaId
inner join Project p
on p.ProjectId = pa.ProjectId
where (p.ProjectId=175 AND pf.FeatureStatusTypeId=2
AND ((pf.FeatureId IN (SELECT dbo.[MaxFeatureVersoinId](pf.FeatureId) AS [FeatureId])) 
OR (pf.FeatureId IN (SELECT dbo.[MaxFeatureVersoinId](pf.ChangeRequestToFeatureId) AS [FeatureId])))) 
```

删除冗余后，可以减少请求

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:45:23.390

这是一种重写查询的奇怪方法，但您也可以尝试这样的事情：

```
select * 
from ProjectFeature pf
inner join ProjectArea pa
  on pa.AreaId = pf.AreaId
inner join Project p
  on p.ProjectId = pa.ProjectId
where 
(
  p.ProjectId=175 
  AND pf.FeatureStatusTypeId=2
  AND (pf.FeatureId IN (SELECT dbo.[MaxFeatureVersoinId](pf.FeatureId) AS [FeatureId])) 
  AND (pf.FeatureId IN (SELECT dbo.[MaxFeatureVersoinId](pf.FeatureId) AS [FeatureId]))
)
OR
(
  p.ProjectId=175 
  AND pf.FeatureStatusTypeId=2
  AND (pf.FeatureId IN (SELECT dbo.[MaxFeatureVersoinId](pf.FeatureId) AS [FeatureId])) 
  AND (pf.FeatureId IN (SELECT dbo.[MaxFeatureVersoinId](pf.ChangeRequestToFeatureId) AS [FeatureId]))
) 
```

将这两个`WHERE`子句放在同一个查询中，并`OR`在它们之间加上一个。同样在您的第一个查询中，您似乎在重复最后一行，我不确定您为什么需要这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T10:35:20.440

如果要将结果附加为同一查询下的另一行，只要它们具有完全相同的列和数据类型，那么您可以使用[`UNION`](http://msdn.microsoft.com/en-us/library/ms180026.aspx)相同的：

```
select * from ProjectFeature pf
inner join ProjectArea pa
on pa.AreaId = pf.AreaId
inner join Project p
on p.ProjectId = pa.ProjectId
where (p.ProjectId=175 AND pf.FeatureStatusTypeId=2
AND (pf.FeatureId IN (SELECT dbo.[MaxFeatureVersoinId](pf.FeatureId) AS [FeatureId])) AND (pf.FeatureId IN (SELECT dbo.[MaxFeatureVersoinId](pf.FeatureId) AS [FeatureId])))
UNION
select * from ProjectFeature pf
inner join ProjectArea pa
on pa.AreaId = pf.AreaId
inner join Project p
on p.ProjectId = pa.ProjectId
where (p.ProjectId=175 AND pf.FeatureStatusTypeId=2
AND (pf.FeatureId IN (SELECT dbo.[MaxFeatureVersoinId](pf.FeatureId) AS [FeatureId])) AND (pf.FeatureId IN (SELECT dbo.[MaxFeatureVersoinId](pf.ChangeRequestToFeatureId) AS [FeatureId]))) 
```

# nginx - Nginx 静态配置 - 误导

> ID：12638299
> 
> 赞同：0
> 
> 时间：2012-09-28T10:30:50.940
> 
> 标签：nginx

Nginx 指向静态目录

我无法弄清楚我要去哪里错了。我试图将 Nginx 指向 CSS 和 JS 的静态目录。

我的静态文件夹的真实位置如下：

*   /var/www/site/app/静态
*   /var/www/site/app/static/js
*   /var/www/site/app/static/css

在我的 app_nginx.conf 我有这个：

```
location /static {
root /var/www/site/app/static;
index index.html;
} 
```

当我访问我的站点时，它正在此文件夹中查找内容：

```
http://localhost/static/css/main.css 
```

我在哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T13:03:23.727

您应该能够使用类似于以下内容的内容。

```
root /var/www/site/app/static;

location / {
  index index.html;
} 
```

然后您应该可以使用以下网址来点击您的内容

```
http://localhost/css/main.css 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T17:58:04.540

我更正了这个，你不应该在根指令中包含静态文件夹，它应该是这样的：

```
root /var/www/site/app; 
```

# java - 无法 chmod 文件夹写入

> ID：12638305
> 
> 赞同：0
> 
> 时间：2012-09-28T10:31:15.337
> 
> 标签：java, android, permissions, root, chmod

在我的应用程序（根设备）中，我想对一些文件、文件夹进行 chmod 读写。我的代码在这里：

```
String path = "/mnt/sdcard/.android_secure";
String[] chmod = { "su", "-c","chmod 777 "+path };
try {
    Runtime.getRuntime().exec(chmod);
} catch (IOException e) {
    e.printStackTrace();
}

File f = new File("/mnt/sdcard/.android_secure");
f.canRead(); 
```

但文件仍然无法读取！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T11:01:32.240

我建议您阅读命令的输出以检查命令报告的错误，然后采取必要的纠正措施。

```
Process process = Runtime.getRuntime().exec(chmod); 
BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(process.getInputStream()));

String line;
while ((line = bufferedReader.readLine()) != null){

    Log.d("myTAG", line);
} 
```

祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T10:53:53.247

通常 sdcard 在 fat 文件系统中格式化。并且这种类型的文件系统不支持 unix 风格的文件权限。您可以使用相同的代码来检查是否可以更改设备上文件夹的权限吗？

# c++ - 在屏幕上的字符之间创建空格 - SDL

> ID：12638306
> 
> 赞同：2
> 
> 时间：2012-09-28T10:31:29.560
> 
> 标签：c++, sdl, blit

我有一个包含数字和字符的 bmp 文件。我的程序读取按键并将位图中的适当字符/数字传送到屏幕上。唯一的问题是如果我按'A' - 'A' 将显示在屏幕上，但如果我按'B'，它将取代'A'。所以我永远不会在屏幕上拥有一个以上的角色。

这是我的代码：

```
#include <SDL/SDL.h>
#include <iostream>
#include <string>
#include <vector>
#include <SDL_image/SDL_image.h>

using namespace std;

const Uint32 FRAMES_PER_SECOND = 60;
const int SCREEN_WIDTH = 640;
const int SCREEN_HEIGHT = 480;
const int WIDTH = 21;
const int HEIGHT = 25;

SDL_Event sdlEvent;

char getAsciiKey(const SDL_Event &sdlEvent);

int main( int argc, char* args[] )
{
    //The surfaces
    SDL_Surface* image[2]   = {NULL};
    SDL_Surface* screen     = NULL;

    //Start SDL
    SDL_Init( SDL_INIT_EVERYTHING );

    //Set up screen
    screen = SDL_SetVideoMode( SCREEN_WIDTH, SCREEN_HEIGHT, 32, SDL_SWSURFACE | SDL_DOUBLEBUF );

char filename[256];    //create a large enough C-string

for(int index = 0; index < 2; index++)
{
    sprintf(filename, "Text-types/Arial%d.bmp", index); //Arial0 and Arial1

    //Load the image
    image[index] = IMG_Load( filename );

    if(image == NULL)
    {
        cout << "Error loading image: " << filename << endl;
        exit(1);
    }
}

Uint32 color = SDL_MapRGB(screen->format, 0xff,0xff,0xff);  //White
SDL_FillRect(screen, &screen->clip_rect, color);        //Backgroundcolor -> White

bool quit = false;    

//Main program loop
while(quit == false)
{

    //Process any events from the event queue - such as key presses or mouse movements
    while(SDL_PollEvent(&sdlEvent))
    {
        if(sdlEvent.type == SDL_QUIT)
        {
            quit = true;
        }
        if (sdlEvent.type == SDL_KEYDOWN)   //A key has just pressed
        {   
            int x, y, temp;
            SDL_Rect srcRect;
            SDL_Rect dstRect;

            //char letter = getAsciiKey(sdlEvent);    //Getting keypress

            temp = (static_cast<int>(getAsciiKey(sdlEvent)) - 12);

            x = (temp % 20); //X-axis postion
            y = (temp / 20); //Y-axis position

            srcRect.x = (x - 1) * WIDTH;
            srcRect.y = (y - 1) * HEIGHT;

            //PIXELSIZE
            srcRect.w = WIDTH;
            srcRect.h = HEIGHT;

            dstRect.x = 0;
            dstRect.y = 0;

            dstRect.w = WIDTH;
            dstRect.h = HEIGHT;

            SDL_BlitSurface(image[1] , &srcRect, screen, &dstRect );    //Putting image up                   on screen

            //Update Screen
            SDL_Flip( screen );

            //Pause
            SDL_Delay( 2000 );

        }
    }

}
//Free any loaded images
for(int index = 0; index < 2; index++)
{
    SDL_FreeSurface( image[index] );
}

//Quit SDL
SDL_Quit();

return 0;

}

char getAsciiKey(const SDL_Event &sdlEvent)
{
    char key = 0;
    if(sdlEvent.key.keysym.sym >= SDLK_a && sdlEvent.key.keysym.sym <= SDLK_z)
    {
        if(sdlEvent.key.keysym.mod & KMOD_SHIFT)
        {
            key = 'A' + char(sdlEvent.key.keysym.sym - SDLK_a);
        }

        else
        {
            key = 'a' + char(sdlEvent.key.keysym.sym - SDLK_a);
        }
    }

    else if(sdlEvent.key.keysym.sym >= SDLK_0 && sdlEvent.key.keysym.sym <= SDLK_9)
    {
        key = '0' + char(sdlEvent.key.keysym.sym - SDLK_0);
    }

    return key;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T10:48:45.417

```
dstRect.x = 0;
dstRect.y = 0; 
```

这是你要转移到的位置，我看不到你在任何地方改变它。为每个新角色更新它。

另外，这个：

```
dstRect.w = WIDTH;
dstRect.h = HEIGHT; 
```

是多余的，目的地的宽度和高度在传输时被忽略（至少是[`reference for SDL_BlitSurface`](http://sdl.beuc.net/sdl.wiki/SDL_BlitSurface)这样说的）。

# vim - vim：作为vim命令执行光标后的其余行

> ID：12638307
> 
> 赞同：3
> 
> 时间：2012-09-28T10:31:32.153
> 
> 标签：vim

我有时会发现自己在编写部分文件由外部程序生成的文本。例如考虑一个 C 源文件，其中包含

```
/*
 * To regenerate the following data, place the cursor at the beginning
 * of the next line after this comment, then run
 *   ma:r!find /foo -name '*.in' | xargs whatever | some complicated processing
 * and merge the result with
 *   'a!}sort -u
 */
some
generated
stuff
here 
```

我最终使用鼠标选择第一个命令（`ma:...`），粘贴并运行它，等待命令完成，选择`'a!}sort -u`并粘贴并运行它。这很不雅，因为当我认为它可以是全自动的时候它只是半自动的。我为和朋友阅读了 vim 在线帮助，`:execute`但看起来这不是我想要的。我正在考虑用正确的命令填充 vim 寄存器，然后执行寄存器内容。网上`:help registers`至今没有给出任何线索。

理想情况下，新评论会说类似

```
/*
 * To regenerate the following data, place the cursor on the 'j' on the
 * next line in this comment, then execute it with <SHORT-MAGIC-VIM-INCANTATION>
 *   jjma:r!find /foo -name '*.in' | xargs whatever | ...<CR>'a!}sort -u<CR>
 */ 
```

如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T11:02:21.027

我会让它处理 Ex 命令，而不是普通模式命令（就像`ma`在你的例子中一样）；通过 执行后者很容易`:normal ma`，但是将 Ex 命令输入正常模式会出现转义问题（例如，您如何编码`Enter`必须结束 Ex 命令的？）

这是一个自定义命令：

```
command! -bar -range ExecuteFromCursor execute 'normal! "zy$' | @z 
```

这是一个映射：

```
nnoremap <Leader>e "zy$:@z<CR> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T10:37:10.313

**Edit** Ingo 执行寄存器的方法比我的更容易（`@"`而不是`<^R>"`）。

*我的方法的优点是您有机会像其他任何方式一样交互式地编辑命令行，然后按 Enter 执行。*

我会做

```
y$:<^R>" 
```

*   `y$` *拉到行尾*
*   `:` *启动命令模式*
*   `C-r``"` *插入抽出的文本*

按 Enter，利润。

* * *

我曾经有类似的映射。但我变得懒惰，经常只是做`Y`和编辑命令行。在 windows`Shift-Insert`上，我发现 vim 命令行更流畅一些，所以我会使用它`"+Y`来复制到 windows 剪贴板。但我离题了

# objective-c - MPMoviePlayerController：全屏模式下有声音但没有图片

> ID：12638308
> 
> 赞同：0
> 
> 时间：2012-09-28T10:31:40.750
> 
> 标签：objective-c, ios, ipad, mpmovieplayercontroller

我正在使用以下代码在运行 iOS6 的 iPad 1 上播放电影：

```
 NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"myMovie.mov" ofType:@""]];
    self.moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:url];

    // Register to receive a notification when the movie has finished playing.
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(moviePlayBackDidFinish:)
                                                 name:MPMoviePlayerPlaybackDidFinishNotification
                                               object:self.moviePlayer];

    // Use the new 3.2 style API
    self.moviePlayer.controlStyle = MPMovieControlStyleDefault;

    [self.moviePlayer prepareToPlay];

    self.moviePlayer.view.frame = CGRectMake(0, 0, 1024, 768);

    [self.uiView addSubview:self.moviePlayer.view];

     //[self.moviePlayer setFullscreen:YES animated:YES];

     [self.moviePlayer play]; 
```

这行得通。

但是，如果我取消注释该行`setFullscreen`，我会得到电影音频，但屏幕完全黑屏，没有图片。

我试过改变几行的顺序，特别是`play`调用和`setFullscreen`调用，没有效果。

**更新**

这个问题似乎直接相关：

[MPMoviePlayerController 在全屏问题（显示空白黑屏）](https://stackoverflow.com/questions/11043922/mpmovieplayercontroller-in-full-screen-issue)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T10:35:09.540

首先将这一行 : 更改
`[[NSBundle mainBundle] pathForResource:@"myMovie.mov" ofType:@""]`为:
`[[NSBundle mainBundle] pathForResource:@"myMovie" ofType:@"mov"]`并重试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:43:20.110

使用它为我工作：

```
NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"myMovie" ofType:@"mov"]];
MPMoviePlayerViewController *movieView = [[MPMoviePlayerViewController alloc]initWithContentURL:url];
movieView.moviePlayer.scalingMode =  MPMovieScalingModeFill;
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
        [movieView.moviePlayer.view setFrame:CGRectMake(0,0,480,320)];
else
        [movieView.moviePlayer.view setFrame:CGRectMake(0,0,1024,768)];
movieView.moviePlayer.view.userInteractionEnabled = FALSE;
movieView.moviePlayer.controlStyle=0;
[movieView setFullscreen:YES];
self.view=movieView.view; 
```

# java - JDBC：与数据库无关

> ID：12638310
> 
> 赞同：2
> 
> 时间：2012-09-28T10:31:53.650
> 
> 标签：java, mysql, sql-server, database, jdbc

JDBC 在其文档中指出它有 4 个实现来连接到数据库。我不太明白这 4 个实现是什么意思，我想知道 JDBC 是否真的与数据库无关。也就是说，对于每种类型的数据库，我是否需要“驱动程序”，例如 MYSQL (jConnector)？

我正在编写一个应用程序来支持 Oracle、MySQL 和 MSSQL。

参考： [http ://docs.oracle.com/javase/tutorial/jdbc/basics/gettingstarted.html](http://docs.oracle.com/javase/tutorial/jdbc/basics/gettingstarted.html)

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T10:33:39.703

不幸的是，您将需要所有数据库类型的驱动程序。

如果你想成为真正的数据库不可知论者，你需要使用 JPA：

[http://en.wikipedia.org/wiki/Java_Persistence_API](http://en.wikipedia.org/wiki/Java_Persistence_API)

使用它的一种实现。最受欢迎的一种是 Hibernate：

[http://en.wikipedia.org/wiki/Hibernate_%28Java%29](http://en.wikipedia.org/wiki/Hibernate_%28Java%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T10:35:14.557

使用 JDBC 时，您使用的是与数据库无关的 API。此 API 的接口（Connection、Statement 等）由目标数据库的 JDBC 驱动程序实现。因此，如果您使用 Oracle，则需要一个 oracle 驱动程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T10:34:05.460

是的，JDBC API 与数据库无关——您只需要提供适当的驱动程序。当然，你发送的 SQL 不会是，除非你使用[JPA](http://docs.oracle.com/javaee/5/tutorial/doc/bnbpz.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T11:18:20.723

> JDBC 在它的文档中指出它有 4 个实现来连接到数据库

不，它没有。它可能表明（当前）有 4 个实现*级别。*然而，实现的数量取决于（至少）目标数据库的数量*和*每个数据库的实现的迭代次数，这两者都远大于 4。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-20T07:55:14.777

我已经[在这个答案](https://stackoverflow.com/a/44323668/521799)中解释了单独使用 JDBC 真正与供应商无关是多么困难。这有两层：

*   JDBC 是用于连接数据库的网络协议的一个非常好的抽象。尽管您在这里和那里都需要一些特定于供应商的怪癖。如果您绑定到单个 RDBMS 供应商，这些怪癖很好，但如果您需要支持多个产品，它会变得非常麻烦
*   SQL 是一种非常好的查询语言标准。不过，同样，您在这里和那里都需要很多特定于供应商的怪癖。同上，支持 1 个 RDBMS 及其怪癖是可以的，但很难支持多个。

正如其他人所提到的，[JPA/Hibernate](https://hibernate.org/)帮助您抽象出一些差异，主要是通过删除对更“高级”SQL 功能的访问（包括派生表、联合等，至少从版本 5 开始）。对于方言的更以 SQL 为中心的抽象，[jOOQ](http://jooq.org/)是一个流行的选择。

免责声明：我在 jOOQ 背后的公司工作。

# magento - Magento - 订单确认/发票最终成为垃圾邮件

> ID：12638312
> 
> 赞同：1
> 
> 时间：2012-09-28T10:32:09.513
> 
> 标签：magento, html-email

我的很多客户都收到他们的发票和确认邮件作为垃圾邮件，有没有办法解决这个问题？我一直在谷歌搜索这个主题，但没有运气。我现在发送的电子邮件大多是默认的 mangeto html 正文，并进行了细微的更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T16:39:51.660

Inchoo 有一篇非常好的文章，介绍了如何配置 Magento 和服务器以避免您的电子邮件进入垃圾邮件文件夹（另请查看文章下方 Fooman 的评论）

[http://incho.net/ecommerce/magento/fight-spam-emails/](http://inchoo.net/ecommerce/magento/fight-spam-emails/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-13T10:32:53.490

改变这两件事为我解决了这个问题：

1.  在系统 -> 配置 -> 高级 -> 系统 -> 邮件发送设置下：将“设置返回路径”设置为“指定”并输入返回路径电子邮件。
2.  在 app/code/core/Zend/Mime.php 中将 LINELENGTH 从 200 更改为 100。

# reddit - Reddit api 返回评论或 self.text 的内容

> ID：12638316
> 
> 赞同：3
> 
> 时间：2012-09-28T10:32:13.973
> 
> 标签：reddit

查看文档后，我仍然无法理解它是如何捆绑在一起的。我想要完成的事情很简单：给定一个 url，返回该 url 的文本内容。

例如：

```
import praw

r = praw.Reddit(user_agent='my_cool_app')

post  = "http://www.reddit.com/r/askscience/comments/10kp2h\
         /lots_of_people_dont_feel_identified_or_find/"
comment = "http://www.reddit.com/r/askscience/comments/10kp2h\
           /lots_of_people_dont_feel_identified_or_find/c6ec6hf" 
```

可以使用正则表达式来确定哪个是评论，哪个是帖子，但如果有更好的方法，我会使用它。

所以我的问题是：确定 reddit url 的性质以及如何获取该 url 的内容的最佳方法是什么？

到目前为止我尝试了什么：

```
post=praw.objects.Submission.get_info(r, url).selftext 
#returns the self.text of a post regardless if that url is a permalink to a comment

comment_text = praw.objects.?????() # how to do this ? 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T02:39:27.423

```
import praw
r = praw.Reddit('<USERAGENT>')
comment_url = ('http://www.reddit.com/r/askscience/comments/10kp2h'
               '/lots_of_people_dont_feel_identified_or_find/c6ec6hf')
comment = r.get_submission(comment_url).comments[0]
print comment.body 
```

我[在此处](https://stackoverflow.com/questions/12463818/using-praw-how-do-you-get-comment-linked-by-a-url/12738719#12738719)和[此处](https://stackoverflow.com/questions/12719542/decoding-json-from-reddit-api-in-python-using-praw/12738636#12738636)的回答应提供与您的问题相关的其他有用信息。

# javascript - 让 Javascript 代码触发 ASP.Net 中 DropDownList 上的选择更改

> ID：12638317
> 
> 赞同：0
> 
> 时间：2012-09-28T10:32:14.047
> 
> 标签：javascript, selectedindexchanged

我想添加在 asp.net 的下拉列表中更改所选索引时要触发的 Javascript 代码。

所以，这是我的 DDL：

```
<asp:DropDownList ID="comboReportTypes" runat="server" /> 
```

我想在上面的 DDL 中添加这样的内容： onSelectionIndexChanged="MyJavascriptFuntion(this)"

所以我想结束这样的事情：

```
<asp:DropDownList ID="comboReportTypes" runat="server" onSelectionIndexChanged="MyJavascriptFuntion(this)" /> 
```

这可能吗？

提前致谢。我正在使用 ASP.Net 4.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:48:45.117

从代码中添加 onchange 事件。

例如：DropDownList dlOption = new DropDownList(); dlOption.Attributes.Add("onchange", "javascript:return functionname(this);");

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:40:32.207

使用`jquery`您可以轻松实现您想要做的事情

```
$('#comboReportTypes').change(function(){
//do whatever you need to.
}); 
```

**[看演示](http://jsfiddle.net/k5Kur/)**

**注意：**确保您使用正确`ID`的控件，`DropDownList`因为`server`控件往往会更改它们`ID's`的渲染。

# javascript - 如何在一个命令/进程中执行服务器和客户端测试？

> ID：12638318
> 
> 赞同：2
> 
> 时间：2012-09-28T10:32:17.057
> 
> 标签：javascript, node.js, testing, angularjs, mocha.js

当我在前端使用 AngularJS 和在服务器中使用 Node.js 开发 Web 应用程序时。现在，我正在使用 Mocha（+ Chai + Supertest）为节点服务器（基于 Express）编写测试，并使用 Mocha 和 Testacular 作为测试运行器编写客户端测试，因为 Testacular 是 Angular 的首选工具。

请注意，Angular 应用程序“嵌入”在节点应用程序中，因为它位于模板文件中。

我的测试过程：对于服务器测试，我只是`npm test`，即`mocha <my-test-folder> <my-test-options>`；对于客户端测试，我启动了一个 Testacular 服务器来监视所需文件的变化。但我不喜欢这种并行和不连贯的过程，我确信有更好的、统一的自动化方式。

可以帮我完善流程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T12:47:23.223

在我的旅行中，我还没有看到过这方面的先例，但你应该可以使用[grunt](http://gruntjs.com/)来实现它。您可以创建一个同时调用两者的 grunt 目标。

我有一个[github 项目](https://github.com/roytruelove/angular-seed-grunt)，它应该有助于展示如何在使用 grunt 的 Angular 项目中使用 testacular，这至少有助于客户端部分；将帮助您实现目标。

# sql - 使用下一条记录的数据更新 SQL Server 单元格数据

> ID：12638325
> 
> 赞同：0
> 
> 时间：2012-09-28T10:32:59.740
> 
> 标签：sql, sql-server, database, sql-update

我必须更新一个错误更新的 SQL Server 表的数据，这导致一行单元格的数据覆盖下一个单元格。以下是表应该处于正确状态的示例：

```
FirstName      LastName     EmailID
--------------------------------------------------
abc            xyz          abc.xyz@something.com
def            321          def.321@something.com
ghi            123          ghi.123@something.com 
```

错误的数据变成了：

```
FirstName   LastName    EmailID
---------------------------------------------
abc         xyz         something
def         321         abc.xyz@something.com
ghi         123         def.321@something.com 
```

我知道最后一条记录将找不到，但至少应该正确恢复其他记录

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:27:07.160

假设你的表是按名字排序的，你可以使用这个：

```
declare @contact as table (firstName varchar(255), lastName varchar(255), emailID varchar(255))
insert into @contact (firstName, lastName, emailID)
values
    ('abc', 'xyz', 'something')
    ,('def', '321', 'abc.xyz@something.com')
    ,('ghi', '123', 'def.321@something.com');

with contactCTE(rowNo, firstName, lastName, emailID) 
as
(
    select 
        ROW_NUMBER() OVER (ORDER BY firstName, lastName DESC)
        ,firstName 
        ,lastName 
        ,emailID 
    from
        @contact 
)
update c1   
set
    emailID = c2.emailID 
from 
    contactCTE c1
    inner join contactCTE c2 on c1.rowNo +1 = c2.rowNo;

select * from  @contact 
```

如果您的数据排序不同，只需修改其中的`ORDER BY`部分`contactCTE`以反映这一点

# android - Android 日历事件

> ID：12638326
> 
> 赞同：0
> 
> 时间：2012-09-28T10:33:07.093
> 
> 标签：android, calendar, scheduled-tasks, reminders

我想编写一个在发生日历提醒时触发的应用程序。我还查看了 android developer site 并没有找到任何关于它的信息

我想创建这样的东西（但是它对我不起作用）。我该怎么做？

```
public class SchedulerSetupReceiver extends BroadcastReceiver {
    private static final String APP_TAG = "com.hascode.android";

    private static final int EXEC_INTERVAL = 20 * 1000;

    @Override
    public void onReceive(final Context ctx, final Intent intent) {
        Log.d(APP_TAG, "SchedulerSetupReceiver.onReceive() called");
        AlarmManager alarmManager = (AlarmManager) ctx
                .getSystemService(Context.ALARM_SERVICE);

        Calendar now = Calendar.getInstance();

    }

} 
```

# javascript - 使用 jQuery 背后的逻辑？

> ID：12638328
> 
> 赞同：5
> 
> 时间：2012-09-28T10:33:22.547
> 
> 标签：javascript, jquery, html

我对如何在 HTML 文件中使用 javascript 和 jQuery 有很好的理解，但逻辑上出现了一个问题。

当我们想将 javascript 嵌入到 HTML 文件中时，通常（不是每次）我们都会在 head 部分编写这个简单的代码。

```
<script type="text/javascript"> ... </script> 
```

和当我们想嵌入jQuery的时候一样的和平代码

```
<script type="text/javascript"> ... </script> 
```

只看这一行如何识别，是js代码还是jQuery代码？

谁能简要介绍一下这个逻辑？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-28T10:35:01.440

jQuery 只是一个 Javascript 脚本，当您在自己的脚本之前执行它时，它为您提供了一些非常有用的功能。

当您使用 jQuery 进行编码时，您就是在使用 Javascript 进行编码。

这当然意味着您使用 jQuery 所做的一切都可以在[Vanilla Javascript](http://vanilla-js.com/)中完成（有时会很痛苦，尤其是如果您没有进行实验） 。

通常，您会通过在页面头部的这种导入来检测页面正在使用 jQuery 库：

```
<script type="text/javascript" src="jquery-ui-1.8.21.custom.min.js"></script> 
```

但不能保证 jQuery 可以在另一个脚本中内联或动态加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T10:35:41.010

**jQuery 是 javascript**

jQuery 只是一个 javascript 库，允许您执行需要较少代码的操作（因为 jQuery 代码为您完成了额外的 javascript 工作）。

> jQuery 是一个多浏览器 JavaScript 库，旨在简化 HTML 的客户端脚本

*资料来源：[维基百科](http://en.wikipedia.org/wiki/JQuery)*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T10:35:43.563

没有 jquery 代码之类的东西 - jquery 是一个构建在 javascript 之上的库。所以你可以拥有纯 javascript 代码或使用 jquery 的 javascript 代码。查看是否实际使用 jQuery 需要查看源代码，而不仅仅是包含标签。

# android - 如何在 Playstore 或亚马逊安卓应用中创建评论图表？

> ID：12638336
> 
> 赞同：1
> 
> 时间：2012-09-28T10:33:51.333
> 
> 标签：android, charts

我正在开发一个获得用户评论的安卓应用程序，如谷歌播放应用程序或亚马逊应用程序。我需要像那些应用程序那样显示评论摘要。我想知道天气是否有内置支持来实现这一目标或必须使用库。谁能给我一个机制？提前致谢。！

这是我正在寻找的图像 [来自 Google play]

![在此处输入图像描述](../Images/c4523a0b0a674cb6de0f5e7a30465bef.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:53:05.117

您可以使用以下链接的 google chart api 为您提供一些示例

[http://psychopyko.com/tutorial/how-to-use-google-charts/](http://psychopyko.com/tutorial/how-to-use-google-charts/)

# objective-c - 拖放 UIButton 以在滚动视图之间移动它或重新定位它

> ID：12638337
> 
> 赞同：1
> 
> 时间：2012-09-28T10:33:54.490
> 
> 标签：objective-c, ios, xcode

我有两个`UIScrollViews`，一个显示在屏幕顶部，其中一个网格视图显示所有这些库图像，另一个显示在底部，用户可以从上方选择图像以添加到下方滚动视图。

我在将图像（它是`UIButton`带有背景图像的）从下滚动视图拖动到上滚动视图或在下滚动视图中拖动到另一个位置时遇到问题。请帮忙。

![在此处输入图像描述](../Images/1c5ecf0b2e45e4995126c50ce94b0288.png)

# java - 在 java 中读取 excel 表。该 Excel 表也包含一些银行单元格

> ID：12638344
> 
> 赞同：0
> 
> 时间：2012-09-28T10:34:05.483
> 
> 标签：java, apache-poi

```
Date    Emp_Code    Emp_Name    Cardno  Shift_Start IN  OUT Shift_End   Status  Emp_Late    Left_Early  Hours_Worked    O T OS
26\. Jan. 2011   001 KL Acharya  000001  9:00    9:15    18:34   18:00   P   0.15    0.00    9.19    0:00    0:34
26\. Jan. 2011   002 Seemakiran Upadhya  000002  9:00            18:00   A               0:00    
26\. Jan. 2011   013 Sumana Ravishankar  000013  9:00            18:00   A               0:00    
26\. Jan. 2011   017 Gopalkrishna Prabhau KV 000017  9:00            18:00   A               0:00    
26\. Jan. 2011   021 Sarath Modali   000021  20:00   21:02   6:40    6:00    P   1.02    0.00    9.38    0:00    0:40
26\. Jan. 2011   023 Siddharth Singh 000023  9:00            18:00   A               0:00    
26\. Jan. 2011   034 Meghana K   000034  9:00            18:00   A               0:00    
26\. Jan. 2011   036 Rajendra KS 000036  9:00            18:00   A               0:00    
26\. Jan. 2011   037 Rajesh K    000037  9:00            18:00   A               0:00    
26\. Jan. 2011   039 Mahesh PR   000039  9:00            18:00   A               0:00    
26\. Jan. 2011   041 Krishnamoorthy A    000041  9:00            18:00   A               0:00    
26\. Jan. 2011   047 Smruti Ranjan Panda 000047  9:00            18:00   A               0:00    
26\. Jan. 2011   049 Raghuraman K    000049  9:00    1:12        18:00   MS  0.00            0:00    
26\. Jan. 2011   055 Raghavendra HS  000055  9:00            18:00   A               0:00    
26\. Jan. 2011   063 Anoop Chandran U    000063  9:00            18:00   A               0:00    
26\. Jan. 2011   069 Ramesh Kumar Hegde  000069  9:00            18:00   A               0:00    
26\. Jan. 2011   070 Mohan T 000070  9:00            18:00   A               0:00    
26\. Jan. 2011   078 Shurabh Chaubey 000078  20:00   9:38    10:49   6:00    A   0.00    0.00    1.11    0:00    
26\. Jan. 2011   079 Sourabha Mahopatra  000079  9:00            18:00   A               0:00 
```

这是我的 excel 表，其中包含一些空白单元格。所以我也无法正确阅读表格。任何机构都可以给我一种方法吗？所以在逐行阅读时，当它在中间找到一个空白单元格时，列数会减少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T11:55:00.690

使用 poi-3.8！
这可以处理空白单元格！

```
 package com.vaadin.addon.tableimport;

import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;

import org.apache.poi.hssf.usermodel.HSSFCell;
import org.apache.poi.hssf.usermodel.HSSFRow;
import org.apache.poi.hssf.usermodel.HSSFSheet;
import org.apache.poi.hssf.usermodel.HSSFWorkbook;
import org.apache.poi.ss.usermodel.Row;

public class ExcelImport implements Serializable {

    private static final long serialVersionUID = -8404407996727936498L;

    protected HSSFWorkbook workbook;

    /** The totals row. */
    protected Row titleRow, headerRow, totalsRow;
    protected Row hierarchicalTotalsRow;

    protected FileInputStream is = null;

    /**輔助存儲*/
    private List<List<Object>> data;
    private int headLineNum;

    public ExcelImport(File file, String dealString) {
        //獲得表頭行數
        headLineNum = reflex(dealString);
        //System.out.println("表頭行數 : " + headLineNum);

        try {
            is = new FileInputStream(file);
            workbook = new HSSFWorkbook(is);
        } catch (IOException e) {
            e.printStackTrace();
        }
        HSSFSheet childSheet = workbook.getSheetAt(0);
        //System.out.println("有Physical行数" + childSheet.getPhysicalNumberOfRows());
        //System.out.println("有行数" + childSheet.getLastRowNum() + " , " +childSheet.getFirstRowNum());
        Object o;

        data = new ArrayList<List<Object>>();
        for (int aa = headLineNum; aa < childSheet.getPhysicalNumberOfRows(); aa++) {
            data.add(new ArrayList<Object>());
            for (int bb = 0; bb < childSheet.getRow(aa).getLastCellNum(); bb++) {
                data.get(aa-headLineNum).add(new String());
            }
        }

        for (int j = 0; j < childSheet.getPhysicalNumberOfRows(); j++) {
            HSSFRow row = childSheet.getRow(j);
            //System.out.println("有Physical列数" + row.getPhysicalNumberOfCells());
            //System.out.println("有列数" + row.getLastCellNum());

            if (null != row) {
                for (int k = 0; k < row.getLastCellNum(); k++) {
                    HSSFCell cell = row.getCell(k);

                    if (null != cell) {
                        switch (cell.getCellType()) {
                        case HSSFCell.CELL_TYPE_NUMERIC: // 数字
                            //System.out.print(cell.getNumericCellValue() + "   ");
                            //o = String.valueOf(cell.getNumericCellValue());
                            o = cell.getNumericCellValue();
                            break;
                        case HSSFCell.CELL_TYPE_STRING: // 字符串
                            //System.out.print(cell.getStringCellValue() + "   ");
                            //o = String.valueOf(cell.getStringCellValue());
                            o =cell.getStringCellValue();
                            break;
                        case HSSFCell.CELL_TYPE_BOOLEAN: // Boolean
                            //System.out.println(cell.getBooleanCellValue() + "   ");
                            //o = String.valueOf(cell.getBooleanCellValue());
                            o =cell.getBooleanCellValue();
                            break;
                        case HSSFCell.CELL_TYPE_FORMULA: // 公式
                            //System.out.print(cell.getCellFormula() + "   ");
                            //o = String.valueOf(cell.getCellFormula());
                            o =cell.getCellFormula();
                            break;
                        case HSSFCell.CELL_TYPE_BLANK: // 空值 -->Null Value
                            //System.out.println(" ");
                            o = " ";
                            break;
                        case HSSFCell.CELL_TYPE_ERROR: // 故障
                            //System.out.println(" ");
                            o = " ";
                            break;
                        default:
                            //System.out.print("未知类型   ");
                            o = " ";
                            break;
                        }
                    } else {
                        //System.out.print("-   ");
                        o = "-   ";
                    }
                    if(j == headLineNum) {
                        data.get(j-headLineNum).set(k, getBottomStringById(dealString,k));
                    }
                    if(j >  headLineNum) {
                        data.get(j-headLineNum).set(k, o);
                    }

                }
            }
            //System.out.println();
        }

//      System.out.println("*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=");
//      for (List<Object> ll : data) {
//          for (Object ss : ll) {
//              System.err.print(String.valueOf(ss) + " , ");
//          }
//          System.err.println("*");
//      }
    }

    /**獲得表頭行數*/
    private int reflex(String dealString) {
        int rows = 1;
        TableHeadDeal thd = new TableHeadDeal(dealString);
        rows = thd.rows;
        return rows;
    }

    /**獲得表頭底部字串*/
    private String getBottomStringById(String dealString, int id) {
        String BottomStr = new String();
        TableHeadDeal thd = new TableHeadDeal(dealString);
        BottomStr = thd.getTableHeadBottomParams().get(id);
        return BottomStr;
    }

    public List<List<Object>> getListDate() {
        return data;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:35:55.993

要与 Office 文档交互，唯一真正的解决方案是使用 API，例如[Apache POI](http://poi.apache.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T10:36:47.677

一路[APACHE POI库](http://poi.apache.org/)

# google-apps-script - 如何在谷歌网站最近的变化中隐藏谷歌脚本活动？

> ID：12638346
> 
> 赞同：1
> 
> 时间：2012-09-28T10:34:06.440
> 
> 标签：google-apps-script, google-sites

我的 google-apps-script 会定期更新我的 google 站点列表页面的内容。它删除或添加的每个条目都会添加到网站的“最近更改”中，使该列表变得毫无用处，并与“您删除/添加了一个项目到列表......”杂乱无章。

有没有办法阻止脚本记录这些修改，从最近的更改列表中排除该特定页面，或者排除要记录（或显示）给定用户的操作？

任何建议将不胜感激，谢谢。伯特。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T18:05:58.983

据我所知，没有办法阻止这些更改出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-07T01:14:07.323

管理站点-> 常规选项卡，选项在最底部，也许它是一个新的变化。您可以指定谁可以查看最近的站点活动和修订更改，并将其设置为仅协作者（允许编辑站点的人），因此对公众不可见。

# prolog - 用变量替换原子

> ID：12638347
> 
> 赞同：3
> 
> 时间：2012-09-28T10:34:10.873
> 
> 标签：prolog

我有一个可能包含也可能不包含原子“this”的术语。该术语也可能包含变量。我需要用变量 I 替换“this”。我该怎么做？我试图做这样的事情：

```
term_to_atom((f(a), g(this, b), ...), A),

tokenize_atom(A, L),

replace(this, I, L, L2) 
```

它似乎奏效了。问题是，我需要回到原来的术语，我做不到......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T14:03:56.593

SWI-Prolog 有[atomic_list_concat/2](http://www.swi-prolog.org/pldoc/doc_for?object=atomic_list_concat/2)和[atom_to_term/2](http://www.swi-prolog.org/pldoc/doc_for?object=atom_to_term/3)可以帮助你回到原来的术语。

```
main :-
    term_to_atom((f(a), g(this, b)), A),
    tokenize_atom(A, L),
    replace(this, 'I', L, L2),
    atomic_list_concat(L2, A2),
    atom_to_term(A2, T, []),
    writeln(T).

?- main.
f(a),g(_G69,b)
true . 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-30T12:51:49.463

看看这个谓词（replace/4）：

```
replace(Term,Term,With,With) :-
    !.
replace(Term,Find,Replacement,Result) :-
    Term =.. [Functor|Args],
    replace_args(Args,Find,Replacement,ReplacedArgs),
    Result =.. [Functor|ReplacedArgs].

replace_args([],_,_,[]).
replace_args([Arg|Rest],Find,Replacement,[ReplacedArg|ReplacedRest]) :-
    replace(Arg,Find,Replacement,ReplacedArg),
    replace_args(Rest,Find,Replacement,ReplacedRest). 
```

您需要的示例：

```
| ?- replace(f(1,23,h(5,this)),this,Var,Result).                                                                                           

Result = f(1,23,h(5,Var))                                                                                                                  

yes 
```

# javascript - Sencha：两个列表显示来自同一商店的不同内容。可能的？

> ID：12638350
> 
> 赞同：2
> 
> 时间：2012-09-28T10:34:23.583
> 
> 标签：javascript, extjs, sencha-touch, store

说，我们在商店里有这个：

```
[
    {
        name: 'Criteria 1',
        status: 'In'
    },
    {
        name: 'Criteria 2',
        status: 'Out'
    },
    ...
] 
```

我们需要显示在一个列表中的条件和来自该商店的另一个列表中的条件。有可能吗？

![查看结构](../Images/186fe81b344085625f5a7aef6e29ca26.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T02:22:17.217

几个月前，我为 Sencha 创建了一个 FilteredStore 类。

它并不完美，但可能对您非常有用。
它基本上允许您通过过滤另一个商店来创建新商店。

```
Ext.define('Ext.data.FilteredStore', {
    extend: 'Ext.data.Store',

    ///////////////////////////////////////////////////////////////////////////
    // Configuration

    config: {
        model: 'Ext.data.Model',
        sourceStore: undefined,
        filter: undefined
    },

    ///////////////////////////////////////////////////////////////////////////
    // Fields
    sourceStore: undefined,

    ///////////////////////////////////////////////////////////////////////////
    // Configuration methods

    updateSourceStore: function (newValue, oldValue) {
        //TODO: Remove hooks from old store (oldValue)

        // See if we've received a valid source store
        if (!newValue)
            return;

        // Resolve the source store
        this.sourceStore = Ext.data.StoreManager.lookup(newValue);
        if (!this.sourceStore || !Ext.isObject(this.sourceStore) || !this.sourceStore.isStore)
            Ext.Error.raise({ msg: 'An invalid source store (' + newValue + ') was provided for ' + this.self.getName() });

        // Listen to source store events and copy model
        this.setModel(this.sourceStore.getModel());
        this.sourceStore.on({
            addrecords: 'sourceStoreAdded',
            removerecords: 'sourceStoreRemoved',
            refresh: 'sourceStoreChanged',
            scope: this
        });

        // Load the current data
        this.sourceStoreChanged();
    },
    updateFilter: function () {
        // Load the current data
        this.sourceStoreChanged();
    },

    ///////////////////////////////////////////////////////////////////////////
    // Store overrides

    fireEvent: function (eventName, me, record) {
        // Intercept update events, remove rather than update if record is no longer valid
        var filter = this.getFilter();
        if (filter && eventName === 'updaterecord' && !filter(record))
            this.remove(record);
        else
            this.callParent(arguments);
    },

    ///////////////////////////////////////////////////////////////////////////
    // Event handlers

    sourceStoreAdded: function (sourceStore, records) {
        var filter = this.getFilter();
        if (!filter)
            return;

        // Determine which records belong in this store
        var i = 0, len = records.length, record, newRecords = [];
        for (; i < len; i++) {
            record = records[i];

            // Don't add records already in the store
            if (this.indexOf(record) != -1)
                continue;

            if (filter(record))
                newRecords.push(record);
        }

        // Add the new records
        if (newRecords.length)
            this.add(newRecords);
    },
    sourceStoreRemoved: function (sourceStore, records) {
        this.remove(records);
    },
    sourceStoreChanged: function () {
        // Clear the store
        this.removeAll();

        var records = [],
            i, all, record,
            filter = this.getFilter();

        // No filter? No data
        if (!filter)
            return;

        // Collect and filter the current records
        all = this.sourceStore.getAll();
        for (i = 0; i < all.length; i++) {
            record = all[i];
            if (filter(record))
                records.push(record);
        }

        // Add the records to the store
        this.add(records);
    }
}); 
```

示例使用代码：

```
Ext.define('My.store.ActiveItems', {
    extend: 'Ext.data.FilteredStore',
    config: {
        sourceStore: 'Items',
        filter: function (record) { return record.get('IsActive'); }
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-08T23:03:35.303

extjs 5 为这种场景添加了连锁商店

[http://dev.sencha.com/ext/5.0.0/examples/kitchensink/#binding-chained-stores](http://dev.sencha.com/ext/5.0.0/examples/kitchensink/#binding-chained-stores)

```
Ext.define('KitchenSink.view.binding.ChainedStoresModel', {
extend: 'Ext.app.ViewModel',
alias: 'viewmodel.binding.chainedstores',

stores: {
    everyone: {
        model: 'Person',
        data: KitchenSink.model.Person.generateData(15, 10)
    },
    adults: {
        source: '{everyone}',
        filters: [{
            property: 'age',
            value: 18,
            operator: '>='
        }],
        sorters: [{
            property: 'age',
            direction: 'ASC'
        }]
    }
}
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T02:07:50.780

这是不可能的。当您将列表绑定到商店时，它会反映对该商店所做的所有更改。它们总是同步的。当您在商店上放置过滤器时，该商店的 items[] 数组会更改，这将更改附加到该商店的任何列表。

（类似地，如果将图表绑定到商店，图表会随着商店的更新而自动更新。）

您可以有两个最初使用相同数据填充（和维护）的商店，然后对这两个商店应用不同的过滤器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T10:43:13.377

尝试将**过滤器**应用于商店。可能这会奏效。

```
 var newstore=Ext.getStore("Store"); // If you have Store.js
    newstore.clearFilter();//clear previous filter
    newstore.filter('status', 'In'); 
```

# python - 为什么在我的 Python 类上没有调用 __new__？

> ID：12638363
> 
> 赞同：10
> 
> 时间：2012-09-28T10:35:01.717
> 
> 标签：python, python-2.x

我有一个这样定义的类：

```
class Client():
    def __new__(cls):
        print "NEW"
        return cls

    def __init__(self):
        print "INIT" 
```

当我使用它时，我得到以下输出：

```
cl = Client()
# INIT 
```

`__new__`没有被调用。为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T10:35:01.717

类必须显式继承`object`才能`__new__`被调用。重新定义`Client`所以它看起来像：

```
class Client(object):
    def __new__(cls):
        print "NEW"
        return cls

    def __init__(self):
        print "INIT" 
```

`__new__`现在将在使用时调用：

```
cl = Client()
# NEW 
```

请注意，`__init__`在这种情况下永远不会调用它，因为`__new__`它不会调用超类`__new__`作为它的返回值。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-28T11:25:37.847

阅读了您的答案后，我对其进行了改进

```
class Client(object):
    def __new__(cls):
        print "NEW"
        return super(Client, cls).__new__(cls)
    def __init__(self):
        print "INIT" 
```

这样`c = Client()`输出

```
NEW
INIT 
```

如预期。

# c# - 检查列表是否包含一个属性相同的对象的优雅方法，并且仅在另一个属性的日期较晚时替换

> ID：12638372
> 
> 赞同：2
> 
> 时间：2012-09-28T10:35:24.630
> 
> 标签：c#, .net, linq, list, comparison

我有一堂课如下：

```
Object1{
   int id;
   DateTime time;
} 
```

我有一个清单`Object1`。如果时间值晚于列表中的时间值，我想循环浏览另一个列表`Object1`，搜索具有相同 ID 的 并在第一个列表中替换它。`Object1`如果该项目不在第一个列表中，则添加它。

我确信有一种优雅的方法可以做到这一点，也许使用 linq？：

```
List<Object1> listOfNewestItems = new List<Object1>();
List<Object1> listToCycleThrough = MethodToReturnList();
foreach(Object1 object in listToCycleThrough){
   if(listOfNewestItems.Contains(//object1 with same id as object))
   {
      //check date, replace if time property is > existing time property 
   } else {
      listOfNewestItems.Add(object)
} 
```

显然这是非常混乱的（甚至没有检查更混乱的属性......），有没有更清洁的方法来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T11:58:14.213

```
var finalList = list1.Concat(list2)
                     .GroupBy(x => x.id)
                     .Select(x => x.OrderByDescending(y=>y.time).First())
                     .ToList(); 
```

* * *

这是要测试的完整代码

```
public class Object1
{
    public int id;
    public DateTime time;
}

List<Object1> list1 = new List<Object1>() 
{
    new Object1(){id=1,time=new DateTime(1991,1,1)},
    new Object1(){id=2,time=new DateTime(1992,1,1)}
};

List<Object1> list2 = new List<Object1>() 
{
    new Object1(){id=1,time=new DateTime(2001,1,1)},
    new Object1(){id=3,time=new DateTime(1993,1,1)}
}; 
```

和输出：

```
1 01.01.2001 
2 01.01.1992 
3 01.01.1993 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T10:43:16.637

这是如何检查：

```
foreach(var object in listToCycleThrough)
{
    var currentObject = listOfNewestItems
                              .SingleOrDefault(obj => obj.Id == object.Id);

    if(currentObject != null)
    {
        if (currentObject.Time < object.Time) 
                  currentObject.Time = object.Time
    } 

    else 
        listOfNewestItems.Add(object)
} 
```

但是如果你有大数据，建议`Dictionary`在最新列表中使用，查找时间将是 O(1) 而不是 O(n)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T10:43:29.437

您可以使用 LINQ。[`Enumerable.Except`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.except.aspx)获得设定的差异（最新的），并`join`找到较新的对象。

```
var listOfNewestIDs = listOfNewestItems.Select(o => o.id);
var listToCycleIDs = listToCycleThrough.Select(o => o.id);
var newestIDs = listOfNewestIDs.Except(listToCycleIDs);
var newestObjects = from obj in listOfNewestItems
                    join objID in newestIDs on obj.id equals objID
                    select obj;
var updateObjects = from newObj in listOfNewestItems
                    join oldObj in listToCycleThrough on newObj.id equals oldObj.id
                    where newObj.time > oldObj.time
                    select new { oldObj, newObj };

foreach (var updObject in updateObjects)
    updObject.oldObj.time = updObject.newObj.time;
listToCycleThrough.AddRange(newestObjects); 
```

请注意，您需要添加`using System.Linq;`.

这是一个演示：http: [//ideone.com/2ASli](http://ideone.com/2ASli)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T11:17:56.917

我会创建一个`Dictionary`来查找索引`Id`并使用它

```
var newItems = new List<Object1> { ...
IList<Object1> itemsToUpdate = ... 

var lookup = itemsToUpdate.
        Select((i, o) => new { Key = o.id, Value = i }).
        ToDictionary(i => i.Key, i => i.Value);

foreach (var newItem in newitems)
{
    if (lookup.ContainsKey(newitem.ID))
    {
        var i = lookup[newItem.Id];
        if (newItem.time > itemsToUpdate[i].time)
        {
            itemsToUpdate[i] = newItem;
        }
    }
    else
    {
        itemsToUpdate.Add(newItem)
    }
} 
```

这样，您就不需要为每个新项目重新枚举列表，您将受益于哈希查找性能。

* * *

这应该可以`Id`在新项目列表中重复多次。

# sql-server - 接受多个主键并获取值的存储过程

> ID：12638377
> 
> 赞同：0
> 
> 时间：2012-09-28T10:35:43.987
> 
> 标签：sql-server, stored-procedures

> **可能重复：**
> [接受多个 Id 值的 T-SQL 存储过程](https://stackoverflow.com/questions/43249/t-sql-stored-procedure-that-accepts-multiple-id-values)

```
USE [dbindia]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
 alter proc [procedurename]        
 @srchtxt varchar(50),        
 @status varchar(50),
 @id int        
as        
 select a.listtitle as productname,a.listdesc as description,buyingprice as Price,b.catname as [Primary Category],c.catname as [Secondary Category],d.catname as      [Tritary Category],e.catname as [Quartery Category],
a.balanceqty as [Current Stock],  
'http://ghsindia.biz/image/product/'+a.imgname as Image1,  
'http://ghsindia.biz/image/product/'+a.imgname2 as Image2,  
'http://ghsindia.biz/image/product/'+a.imgname3 as Image3,  
'http://ghsindia.biz/image/product/'+a.imgname4 as Image4,  
'http://ghsindia.biz/image/product/'+a.imgname5 as Image5 from
tbllisting a inner join tblcategory b on a.catid=b.catid   
 left outer join tblSeccategory c on a.catid2=c.Seccatid  
 left outer join tbltricategory d on a.catid3=d.tricatid  
 left outer join tblquarcategory e on a.catid4=e.quarcatid  
 where a.blockstatus=@status and a.listtitle like '%'+@srchtxt+'%' and a.bstatus=1
 **and a.listid in (@id)** order by a.listtitle 
```

这是我的存储过程。我想获取所有`a.listid`可以是一个或多个的值，但是如果 id 的值类似于 (1,2,3) 将如何写入

# php - Codeigniter - 将复杂的 IF 语句移出视图

> ID：12638383
> 
> 赞同：0
> 
> 时间：2012-09-28T10:36:02.370
> 
> 标签：php, codeigniter

我目前正在从事一个项目，这意味着我正在处理很多日期，并且我有一个视图，用户可以在其中查看未来一周的各种事件的概述。

该视图显示多个帐户的多个事件。

我面临的问题是我的视图有一些非常复杂的 IF 语句（检查当前日期、检查事件日期、检查帐户 ID 与事件等）并且它开始看起来很混乱，我相信它可以完成更容易/更精简！

我将如何将 IF 语句移动到控制器？

我尝试查找 CI 的最佳实践，但没有发现任何有用的信息。

任何见解将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T13:31:15.837

我将有一个单独的函数（在控制器或库中）用于准备数据。这个函数只需要返回一个数组，这样就可以在 HTML 中构造数据，而不需要所有的条件检查。

这是一个数据准备库的示例，它不仅可以工作，因此您需要创建一个完整的库，它只是为了给您一个总体思路。

```
<?php
class prepare {
    function prep_page_data($page_id) {

        $output = array();

        $query = $this->ci->db->get_where("page_data", array("page_id" => $page_id));

        foreach($query->result_array() as $row) {
            $output = $row;
            //complete all addtional checks below
            if($row['datetime'] < date("Y-m-d 00:00:00")) {
                $output['archive'] = "old"
            }
            else {
                $output['archive'] = "new";
            }
            //you can add as many conditions as you like to complete the data collection.
        }

        return $output;

    }
}

?> 
```

# iphone - 如何在 iOS6 中发送电子邮件

> ID：12638384
> 
> 赞同：-2
> 
> 时间：2012-09-28T10:36:02.687
> 
> 标签：iphone, objective-c, ios6, xcode4.5

我一直在关注一个教程系列，我正在尝试学习如何发送电子邮件。

我输入了以下代码行，但它说它在 iOS 6 中已被弃用。

```
[self presentModalViewController:picker animated:YES]; 
```

iOS 6 中此代码的替代品是什么，它可以在 iOS 5 设备上运行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T10:40:55.060

该方法已被弃用，取而代之的是

```
presentViewController:animated:completion: 
```

但实际上，这正好在`presentModalViewController:animated:`.

# java - 不同机器上的不同休眠会话工厂用于访问单个数据库实例

> ID：12638388
> 
> 赞同：0
> 
> 时间：2012-09-28T10:36:35.397
> 
> 标签：java, database, hibernate, sessionfactory

我在不同的机器上有不同的休眠会话工厂来访问单个数据库实例，它在会话之间造成了破坏（给出过时的数据/抛出 Nullpointer 异常）。有什么办法可以解决这个问题，或者我只能为一个数据库实例设置一个休眠会话工厂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:42:27.480

当然，有几种方法可以处理这种破坏。

*   只使用短期会话。
*   或在表中使用版本字段并捕获 entity-not-sync-with-db-Exceptions
*   或尝试同步实体管理器
*   或使用 enver
*   或使用试听
*   或使用数据库行的读/写锁

还有一些可能存在

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:20:55.453

戳进去终于找到解决办法，罪魁祸首是存储引擎InnoDB。

# php - mysql_real_escape_string()：在 codeigniter 中访问被拒绝

> ID：12638392
> 
> 赞同：1
> 
> 时间：2012-09-28T10:36:51.883
> 
> 标签：php, mysql, codeigniter, mysql-real-escape-string

我正在使用 Codeigniter。我想在`$_POST`搜索表单中使用字符串值，其中可能包含特殊字符，例如撇号（'），（;）等。我的 mysql 查询如何忽略这些字符，以便我可以选择/保存我的`$_POST['search']`值进数据库？

每当我使用 mysql_real_escape_string() 函数时，它都会给我： `mysql_real_escape_string(): Access denied error.`

我的代码如下所示：

```
$query = "SELECT * FROM products WHERE  
product_name='".mysql_real_escape_string($_POST['search'])."'";

$this->db->query($query); 
```

如何在codeigniter中处理这个问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:39:38.823

切勿将用户输入直接用于查询。阅读有关“sql 注入”和“xss”的更多信息。对于 codeIgnitor，请执行以下操作：

1.  不要使用 $_POST，而是使用[输入类](http://codeigniter.com/user_guide/libraries/input.html)。 `$this->input->post`

2.  使用[查询绑定](http://codeigniter.com/user_guide//database/queries.html)，不需要 mysql_real_escape_string。例如。

    ```
    $sql = "SELECT * FROM some_table WHERE id = ? AND status = ? AND author = ?";

    $this->db->query($sql, array(3, 'live', 'Rick')); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:41:29.127

最好的方法是：

```
$query = "SELECT * FROM products WHERE product_name=?";
$this->db->query($query, array($this->input->post('search')); 
```

看看这里的文档：http: [//codeigniter.com/user_guide/database/queries.html](http://codeigniter.com/user_guide/database/queries.html)

如果你真的想通过转义来做到这一点，请查看转义查询。但最好用绑定来做（如我上面的例子）

# c++ - 为什么 C++11 标准中的 INVOKE 工具引用数据成员？

> ID：12638393
> 
> 赞同：6
> 
> 时间：2012-09-28T10:37:05.477
> 
> 标签：c++, c++11, standards

标准的 $ 20.8.2 描述了 INVOKE 工具，该工具主要用于描述如何在整个标准库中使用可变参数列表调用可调用对象：

> 定义 INVOKE (f, t1, t2, ..., tN) 如下：
> 
> —`(t1.*f)(t2, ..., tN)`当 f 是指向类 T 的成员函数的指针并且 t1 是类型 T 的对象或对类型 T 的对象的引用或对从 T 派生的类型的对象的引用时；
> 
> —`((*t1).*f)(t2, ..., tN)`当 f 是指向类 T 的成员函数的指针且 t1 不是上一项中描述的类型之一时；
> 
> —`t1.*f`当 N == 1 并且 f 是指向类 T 的成员数据的指针并且 t1 是类型 T 的对象或对类型 T 的对象的引用或对从 T 派生的类型的对象的引用时；
> 
> —`(*t1).*f`当 N == 1 并且 f 是指向类 T 的成员数据的指针并且 t1 不是上一项中描述的类型之一时；
> 
> —`f(t1, t2, ..., tN)`在所有其他情况下。

第三项和第四项是干什么用的？`f`据我所知，即使是可调用的，他们也不会`f`调用。他们的用户案例是什么。也许这是标准中的错字并且`*f()`是有意的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-28T10:59:33.837

`INVOKE`之所以这样指定，是因为您实际上可以绑定成员数据指针（通过`bind`和`mem_fn`）：

`§20.8.10 [func.memfn]`

> `template<class R, class T>`
> *`unspecified`*`mem_fn(R T::* pm);`
> 
> p1*返回：*一个简单的调用包装器 (20.8.1) `fn`，使得表达式`fn(t, a2, ..., aN)`等价于`INVOKE(pm, t, a2, ..., aN)`(20.8.2)。`fn`应该有一个嵌套类型，它是**when****是指向成员函数的指针**`result_type`的返回类型的同义词。`pm` **`pm`**

如果您无法绑定成员数据指针，我认为不会存在特殊措辞。

```
#include <functional>
#include <iostream>

struct X{
  int n = 5;
};

int main(){
  X x;
  auto f = std::mem_fn(&X::n);
  std::cout << f(&x) << "\n";
} 
```

输出：5

[活生生的例子。](http://liveworkspace.org/code/e62e72d203d9da6d918af1e5601384c5)

# java - 如何在 pentaho 报表设计器中检查多值参数是空还是空？

> ID：12638395
> 
> 赞同：0
> 
> 时间：2012-09-28T10:37:07.703
> 
> 标签：java, pentaho

我的参数定义：

```
 <list-parameter name="Direction" allow-multi-selection="true" strict-values="true" mandatory="false" type="[Ljava.lang.String;" query="DirectionQuery" key-column="BC_CALL_CLASSIFICATION_DIM_DIRECTION_NAME" value-column="BC_CALL_CLASSIFICATION_DIM_DIRECTION_NAME">
        <attribute namespace="http://reporting.pentaho.org/namespaces/engine/parameter-attributes/core" name="role">user</attribute>
        <attribute namespace="http://reporting.pentaho.org/namespaces/engine/parameter-attributes/core" name="parameter-render-type">list</attribute>
        <attribute namespace="http://reporting.pentaho.org/namespaces/engine/parameter-attributes/core" name="label">Direction</attribute>
        <attribute namespace="http://reporting.pentaho.org/namespaces/engine/parameter-attributes/core" name="hidden">false</attribute> 
```

我的 MQL 查询中的约束部分

```
<constraint>
  <operator>AND</operator>
  <condition>OR( ISNA([param:Destination Type]);EQUALS([BC_FCT_CALLS.BC_NUMBER_CLASSIFICATION_DIM_CLASSIFICATION];[param:Destination Type]))</condition>
</constraint>
<constraint>
  <operator>AND</operator>
  <condition>OR(COUNTA([param:Direction]) == 0 ;EQUALS([BC_FCT_CALLS.BC_CALL_CLASSIFICATION_DIM_DIRECTION_NAME];[param:Direction]))</condition>
</constraint> 
```

第一个约束有效，因为参数是单个值，但第二个约束给我一个消息 CONTA is not supported 如果用户选择多个值，则 ISNA 不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T09:12:47.657

我找到了一种方法，为每个多值参数“param1”在“后处理器公式”中为新参数创建另一个隐藏的布尔参数“param1_hidden”，使用以下公式

```
 =(COUNTA([param1]) = 0 ) 
```

现在在您的查询中

```
OR( EQUALS(TRUE();[param:param1_hidden);EQUALS([TABLE.COLUMN];[param:param1,])) 
```

# c# - 如何在 WebService 调用期间利用空闲 CPU 周期

> ID：12638403
> 
> 赞同：2
> 
> 时间：2012-09-28T10:37:58.230
> 
> 标签：c#, asp.net

我正在调用一个 Web 服务，它在 UpdatePanel 中显示结果。Web 服务会在大约 30 秒内返回结果。到 1 分钟。在此时间间隔内，我当前正在显示 UpdateProgress Bar。

我的目标是利用空闲处理器时间并在 foobar() 方法中执行一些有用的操作，而不是遵循以下最适合当前场景的方法 -

1.  使用 BeginAsync 异步调用 Web 服务继续执行其他任务，直到 BeginAsync 调用其回调方法。
2.  在线程内添加 webservice 操作，并使用 QueueUserWorkItem 将该线程加入到 ThreadPool 中。（在这种情况下我将不得不使用 WaitAny，因为一旦 web 服务返回数据，我需要终止运行 foobar 方法的线程。）
3.  我想知道是否有可能在 asp.net 中回调一个方法，一旦 UpdataProgress 控件被触发并在完成后终止它。

# html - 如何进行跨浏览器/设备音频捕获

> ID：12638406
> 
> 赞同：1
> 
> 时间：2012-09-28T10:38:11.617
> 
> 标签：html, cross-browser, audio-capture

我想用我的发现来澄清某些事情，并用我不知道的事情提出某些问题，

通过浏览器捕获摄像头/麦克风可以通过 getusermedia() 完成；

1.  有什么适用于 i 设备的吗？因为 getusermedia() 似乎在 i 设备中不起作用

2.  我如何从网络浏览器应用程序捕获实际音频（例如，如果我播放音频文件并将其转发 2 分钟，我想从 html5 播放器捕获实际音频流，以便我保存实际音频数据）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T10:41:19.143

如果您不打算支持移动设备，则需要使用 Flash。一种最佳解决方案是使用[wami-recorder](http://code.google.com/p/wami-recorder/)。

从他们的网站：

> ### 问题
> 
> 在撰写本文时，大多数浏览器仍然不支持 WebRTC 的 getUserMedia()，它承诺让 Web 开发人员通过 Javascript 访问麦克风。这个项目为支持 Flash 的浏览器实现了下一个最好的东西。使用 WAMI 录音机，您可以在您的服务器上收集音频，而无需安装任何专有的媒体服务器软件。
> 
> ### 解决方案
> 
> WAMI 录音机使用轻量级 Flash 应用程序通过标准 HTTP POST 将音频从客户端传送到服务器。除了允许麦克风访问的安全设置外，整个界面可以用 HTML 和 Javascript 构建。

希望这可以帮助。

# python - 装饰十六进制函数以填充零

> ID：12638408
> 
> 赞同：92
> 
> 时间：2012-09-28T10:38:25.477
> 
> 标签：python, hex, padding, built-in

我写了这个简单的函数：

```
def padded_hex(i, l):
    given_int = i
    given_len = l

    hex_result = hex(given_int)[2:] # remove '0x' from beginning of str
    num_hex_chars = len(hex_result)
    extra_zeros = '0' * (given_len - num_hex_chars) # may not get used..

    return ('0x' + hex_result if num_hex_chars == given_len else
            '?' * given_len if num_hex_chars > given_len else
            '0x' + extra_zeros + hex_result if num_hex_chars < given_len else
            None) 
```

例子：

```
padded_hex(42,4) # result '0x002a'
hex(15) # result '0xf'
padded_hex(15,1) # result '0xf' 
```

虽然这对我来说很清楚并且适合我的用例（用于简单打印机的简单测试工具），但我不禁认为还有很大的改进空间，这可以压缩成非常简洁的东西。

有什么其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：222
> 
> 时间：2012-09-28T10:43:09.413

使用新的[`.format()`](http://docs.python.org/library/string.html#format-string-syntax)字符串方法：

```
>>> "{0:#0{1}x}".format(42,6)
'0x002a' 
```

**解释：**

```
{   # Format identifier
0:  # first parameter
#   # use "0x" prefix
0   # fill with zeroes
{1} # to a length of n characters (including 0x), defined by the second parameter
x   # hexadecimal number, using lowercase letters for a-f
}   # End of format identifier 
```

如果您想要字母十六进制数字大写但前缀带有小写“x”，您需要一个轻微的解决方法：

```
>>> '0x{0:0{1}X}'.format(42,4)
'0x002A' 
```

从 Python 3.6 开始，您还可以这样做：

```
>>> value = 42
>>> padding = 6
>>> f"{value:#0{padding}x}"
'0x002a' 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-09-28T10:40:55.890

这个怎么样：

```
print '0x%04x' % 42 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2020-01-01T13:07:00.467

```
"{:02x}".format(7)   # '07'
"{:02x}".format(27)  # '1b' 
```

在哪里

*   `:`是第一个参数的[格式化规范](https://docs.python.org/3/library/string.html#format-string-syntax)`{}`的开始`.format()`
*   `02`意思是“从左边用 s 填充输入`0`到长度`2`”
*   `x`表示“格式为带有小写字母的十六进制”

您也可以使用[f-strings](https://docs.python.org/3/tutorial/inputoutput.html#tut-f-strings)执行此操作：

```
f"{7:02x}"   # '07'
f"{27:02x}"  # '1b' 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2018-11-03T07:58:13.343

如果只是为了前导零，你可以试试`zfill`函数。

```
'0x' + hex(42)[2:].zfill(4) #'0x002a' 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-08-23T23:41:32.003

用于`*`传递宽度和`X`大写

```
print '0x%0*X' % (4,42) # '0x002A' 
```

正如[georg](https://stackoverflow.com/a/12638449/604004)和[Ashwini Chaudhary所建议的那样](https://stackoverflow.com/users/846892/ashwini-chaudhary)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-03-10T16:19:05.500

假设您想要十六进制数的前导零，例如您想要 7 位数字，您的十六进制数应该写在上面，您可以这样做：

```
hexnum = 0xfff
str_hex =  hex(hexnum).rstrip("L").lstrip("0x") or "0"
'0'* (7 - len(str_hexnum)) + str_hexnum 
```

结果是：

```
'0000fff' 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-10-25T22:05:46.973

没有一个答案可以很好地处理负数......
试试这个：

```
val = 42
nbits = 16
'{:04X}'.format(val & ((1 << nbits)-1)) 
```

[![在此处输入图像描述](../Images/892e9aca498b345af7ae16f945684d38.png)](https://i.stack.imgur.com/zE5rc.png)

# javascript - Chrome扩展传递变量以动态执行脚本

> ID：12638412
> 
> 赞同：0
> 
> 时间：2012-09-28T10:38:37.317
> 
> 标签：javascript, jquery, jquery-ui, google-chrome-extension

我正在构建一个 chrome 扩展，它打开一个 jquery 对话框并询问用户当前网站。

这是我到目前为止所做的

**背景.html**

```
<html>
    <head>
        <script>
            var tabUrl='';
            chrome.browserAction.onClicked.addListener(function(tab) {
                tabUrl=tab.url; //this varible i want to pass to popup.js

                chrome.tabs.executeScript(null, 
                {file:"jquery-ui.css", 
                    runAt:"document_start"}, 
                function() {  });
                chrome.tabs.executeScript(null, 
                {file:"jquery.js", 
                    runAt:"document_start"}, 
                function () {

                    chrome.tabs.executeScript(null, 
                    {file:"jquery-ui.min.js"}, 
                    function () {
                        chrome.tabs.executeScript(null, {file:"popup.js"}, function()       { 
                        });                    
                    });
                });
            });
        </script>
        <script ></script>
    </head>
</html> 
```

**popup.js**

```
$(function() {
var myurl='http://localhost/addReview.php?url='+tabUrl;
var NewDialog = $('<div id="MenuDialog" ><iframe id="loader" frameborder="0" style="height:400px;width:100%" src="'+myurl+'"></iframe></div>');
NewDialog.dialog({
        modal: true,
        title: "Curate to WishCart",
        show: 'clip',
        hide: 'clip',
        width: '744'
});

}); 
```

我尝试了另一种方式，我将我的 popup.js 代码复制到 background.html 但扩展控制台显示以下错误。

1.  未定义符号 $

2.  未捕获的类型错误：对象 [对象对象] 没有方法“对话”

我想将 tabUrl 传递给 popup.js，这样我就可以加载 i-frame 并使用 iframe src 属性发送当前选项卡 url。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T12:40:02.480

传递给`chrome.tabs.executeScript`方法的脚本将作为[Content Script](http://developer.chrome.com/extensions/content_scripts.html)执行。这意味着，它将无法访问背景页面的上下文和其中定义的变量。

我不确定，但根据文档，您可以尝试使用以下方法：

```
chrome.tabs.executeScript(null, 
    {
        file: "popup.js", 
        code:"showDialog(" + tabUrl + ")"
    }); 
```

注意：根据上面的示例，该`showDialog`函数必须在**popup.js**文件中定义为全局函数。

# eclipse - 保证不会被优化掉的Scala no-op？

> ID：12638414
> 
> 赞同：1
> 
> 时间：2012-09-28T10:38:39.503
> 
> 标签：eclipse, scala, scalac, noop

您可以在关闭`}`Scala 方法时设置断点，但这样做毫无意义，因为它显然不会被命中。

我还是想把它放在那里。所以我想，“我在该行之前放置一个空操作，并在其上设置一个断点怎么样？”

但是由于显然当我尝试设置一个永远不会被命中的断点时 Eclipse 并没有警告我（因为那里没有代码），因此我不能依赖 Eclipse 告诉我是否已经优化了无操作（特别是因为我什至没有使用与 Eclipse Scala 插件使用的相同版本的 Scala 来运行代码）。

那么是否有一个简短的无操作语句或表达式可以在这里使用，它*保证在任何情况下都不会被 Scala 编译器优化掉*- 并且保证不会被 JIT 优化掉以防止断点它被击中了吗？我想在我的例子中它必须是一个表达式而不是一个语句，因为这个方法返回一个有用的值，而不是`Unit`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:47:08.300

它不完全是空操作，但保证不会优化日志语句（或跟踪表达式 - 即另外返回它刚刚记录的值的日志语句）！

唯一的问题是，如果您想查看它实际输出的内容，则每次遇到断点时都必须手动跳过调试语句或跟踪表达式。除非它只是输出变量的值，在这种情况下，您可以在 Eclipse 的“变量”选项卡中找到该变量。

并且至少在我的代码中，使用 Eclipse Scala 插件 2.1 里程碑 2，在“旧式调试模式”中跨过一个跟踪表达式，这不是一件小事——因为它完全被破坏了，由于[这个问题](https://stackoverflow.com/questions/12640018/prevent-eclipse-setting-breakpoint-on-scala-anonymous-functions-lambdas)！

在我意识到发生了什么之前，我花了大约 20 次尝试敲击 F6*和 F7*键，然后才终于成功跨过它！那只是为了踩到它*一次*！

请记住，下一行是`}`- 所以显而易见的解决方法，在下一行设置另一个断点 - 不起作用！

从理论上讲，您应该能够[检查被跟踪的值](https://stackoverflow.com/a/7788106/495796)，而不是试图跨过跟踪。不幸的是，这对我也不起作用——它说找不到类。

# xslt - XSL 显示来自 xml 源的嵌入 pdf

> ID：12638418
> 
> 赞同：0
> 
> 时间：2012-09-28T10:38:50.180
> 
> 标签：xslt, xsl-fo

我有一个 xml 文档，其中包含 base64 格式的嵌入式 pdf 文档。我正在使用 xsl:fo 创建 xml 的 pdf 视图，但是我完全不知道如何使用 xsl 将嵌入的文档显示为整体输出的一部分。有人可以帮忙吗？抱歉，如果这是一个非常简单的问题，但是我是 XSL 的新手，似乎在任何地方都找不到任何示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:32:34.737

PDF 文档在某种意义上是矢量图像，因此[可以嵌入](http://www.renderx.com/reference#PDF)到 XSL FO 渲染引擎的 PDF 输出中 - 到目前为止只是第一页。

RenderX XEP 接受`data:`嵌入图像的 URI 模式，因此作为字符串放置的 base64 编码 PDF 文件`fo:external-graphic/@src`应该可以正常工作：

`src="url('data:application/pdf;base64,encodedpdffilegoeshere...')"`

# jquery - jquery验证插件自定义方法ajax多个参数

> ID：12638422
> 
> 赞同：1
> 
> 时间：2012-09-28T10:39:05.827
> 
> 标签：jquery, jquery-validate

我正在尝试向 jquery-validation 插件添加自定义验证方法。使用给定的国家/地区代码、邮政编码和城市，我通过 ajax 调用一个 php 脚本来检查这种组合是否存在，如果存在，它会返回一个“有效”。

所以我添加的方法如下所示：

```
jQuery.validator.addMethod("zipcitycombination", function(city, element, params) {

  //function check zip and city
  var country = params[0];
  var zip = params[1];

  $.ajax({
    type: 'GET',
    url: '/?eID=tx_zipcity',
    async: false,
    data: 'country=' + country + '&zip=' + zip+ '&city=' + city,
    success: function(data){
        response = ( data == 'valid' ) ? true : false;
    }
  })
  return response;

}, "Please check your combination"); 
```

现在我尝试使用这样的验证：

```
 $("#commentForm").validate({

        rules: {
            delivery_city: {
                zipcitycombination:[$('select[name="amsdelivery_country"]').val(),$('input#delivery_zip').val()]
            }
        } 
```

所以一切正常，除了 zipcitycombination：

[$('select[name="delivery_country"]').val(),$('input#delivery_zip').val()],

因为它使用空值而不是填写的输入字段中的值。在 html 文件中设置值，验证按预期工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:46:31.743

假设您不只是在验证器方法中提取值的原因是您希望使该方法具有通用性，以便您可以将其用于名称/ID 不同的不同形式，我建议您将参数更改为验证方法成为选择器而不是值，例如：

```
var country = $(params[0]).val();
var zip = $(params[1]).val(); 
```

并`validate`像这样配置：

```
$("#commentForm").validate({

    rules: {
        delivery_city: {
            zipcitycombination:['select[name="amsdelivery_country"]','input#delivery_zip']
        }
    } 
```

# jquery - jQuery ajax - 如何仅在 joomla 组件返回时获取文本？

> ID：12638425
> 
> 赞同：0
> 
> 时间：2012-09-28T10:39:15.710
> 
> 标签：jquery, joomla

使用jquery ajax时如何让joomla2.5组件只返回文本？因为现在我得到了完整的 html。我尝试添加“&format=raw”但不起作用！如何解决？

**jQuery**

```
$.ajax({
  type: "POST",
  url: "index.php?option=com_test&task=edit",

  ...................... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:29:12.033

当我需要输出一些 JSON 时，我通常不会让控制器进入视图。我将我想要的数据放入一个对象并将其传递给这个函数：

```
function jsonOut($obj) {
  $app = JFactory::getApplication();

  JResponse::setHeader( 'Expires', 'Mon, 1 Jan 2001 00:00:00 GMT', true );    // Expires in the past
  JResponse::setHeader( 'Last-Modified', gmdate("D, d M Y H:i:s") . ' GMT', true ); // Always modified
  JResponse::setHeader( 'Cache-Control', 'no-store, no-cache, must-revalidate, post-check=0, pre-check=0', false );

  echo json_encode($obj);
  $app->close();
} 
```

无需查看。它只是吐出 JSON。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T15:05:12.200

您只需在任务结束时添加 Jexit() 即可摆脱完整的 html。您也可以使用 die()，但如果有 Jexit()，为什么？干杯。

```
 function edit()
    {
     // Your code
     Jexit(); 
    } 
```

# asp.net - 如何在 asp.net 中使用谷歌翻译 API

> ID：12638435
> 
> 赞同：1
> 
> 时间：2012-09-28T10:39:59.213
> 
> 标签：asp.net, google-translator-toolkit

我想知道我是否可以在 asp.net 中使用 Google Translator API？我正在使用 .net framework 3.5 并将 Google Transaltor API .dll 添加到 bin 文件夹中。代码在这里。

```
string Text = "This is a string to translate";
Google.API.Translate.TranslateClient tc = new TranslateClient("www.google.com");
string trans = tc.Translate(Text,"en","hi"); 
```

在调试时抛出异常：

> [响应状态：403]请使用翻译 v2。请参阅[http://code.google.com/apis/language/translate/overview.html](http://code.google.com/apis/language/translate/overview.html)

这个异常的原因是什么？

# entity-framework - 跨多个 edmx 文件共享实体类型

> ID：12638439
> 
> 赞同：2
> 
> 时间：2012-09-28T10:40:18.813
> 
> 标签：entity-framework, poco

我们将 Entity Framework 4 与 POCO 实体生成器一起使用。到目前为止，我们只有一个 .edmx 文件，但由于它的当前大小（超过 100 个实体），我们遇到了性能问题。

我知道我们应该将其分解为一系列 .edmx 文件，除了一个例外，这很好。我们希望以某种方式在两个或多个这些上下文中共享某些实体类型。例如，在我们的模型中，一个 User 类与许多原本不相关的实体相关联。

那么，是否有可能拥有一个安全模型，它具有自己的 .edmx 和用于生成 POCO 的命名空间，但在另一个 .emdx 中使用它？如果不是，我担心我们会有多个类对同一个数据库表进行建模，这些表需要与数据库同步更新。我会说那是行不通的。（我们使用数据库优先）。

显然，如果我叫错了树，请告诉我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T17:31:36.660

理论上，您可以将单个 POCO 类与多个 EDMX 映射一起使用，因为映射和类必须仅在属性的名称和名称/类型中匹配。在实践中，这有一些限制。我能想到的只有几个：

*   除非您修改每个 EDMX 的生成器，并确保每个实体都将由单个 EDMX 的单个生成器生成，否则您不能通过这种方法使用自动代码生成器。这直接指向了第二个限制。
*   每个 EDMX 中的实体必须完全相同。包括导航属性。如果不是，您将无法在不构建自己的代码生成解决方案的情况下生成它。如果动态代理要求具有唯一名称的类只映射一次，那就更糟了。如果同一类有两个或多个不同的映射，您将无法使用动态代理（延迟加载、动态更改跟踪），每个应用程序运行只有一个映射。

# asp.net - 使用 ASP.NET 站点地图提供程序时如何解决多个控制器错误

> ID：12638441
> 
> 赞同：0
> 
> 时间：2012-09-28T10:40:20.600
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, asp.net-mvc-routing

我正在使用 ASP.NET MVC3 和[ASP.NET MVC Sitemap Provider](http://mvcsitemap.codeplex.com/)。

我有一个名为 Application 的控制器。我还有一个叫做管理的区域。在管理区域中，我还有一个名为 Application 的控制器。

第一个应用程序控制器是针对普通网站用户的。另一个应用程序控制器供管理员使用。

我希望我的网址显示为：

```
/Application/1001/Notes
/Administration/Application/1001/Notes 
```

我对上述 2 个 URL 的路由注册如下：

```
Routes.MapRoute("ApplicationNote",
     "{controller}/{applicationId}/Notes",
     new { controller = "Application", action = "Notes" },
     new { applicationId = @"\d+" },
     new[] { "MyProject.Web.Controllers" });

Routes.MapRoute("AdminApplicationNote",
     "{area}/{controller}/{applicationId}/Notes",
     new { area = "Administration", controller = "Application", action = "Notes" },
     new { applicationId = @"\d+" },
     new[] { "MyProject.Web.Areas.Administration.Controllers" }); 
```

当我运行我的应用程序并转到应用程序控制器中的任何操作方法时，我会在这里收到一个错误：

```
@Html.MvcSiteMap().SiteMapPath() 
```

错误是：

```
Found multiple controllers:Application 
```

这是我的站点地图配置的部分视图：

```
 <mvcSiteMapNode title="About" area="" controller="Home" action="About" />

 <mvcSiteMapNode title="Applications" area="" controller="Application" action="Index" key="ApplicationIndex">
      <mvcSiteMapNode title="Create Application" area="" controller="Application" action="Create" />
      <mvcSiteMapNode title="Applications List" controller="Application" area="" action="List" />
 </mvcSiteMapNode>

 <mvcSiteMapNode title="Administration Dashboard" area="Administration" controller="Dashboard" action="Index">
      <mvcSiteMapNode title="Users Dashboard" area="Administration" controller="User" action="List" />
 </mvcSiteMapNode> 
```

我将如何解决这个问题？如果我删除名为 AdminApplicationNote 的路由，其他应用程序 URL 将正确显示。但随后我可以让第二条区域路线按预期工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T23:16:46.607

什么版本的提供者？

路线看起来一般。我之前遇到过这样的问题（在一个更复杂的场景中）并且 SiteMap 使用了命名空间解析（它应该可以工作，因为你的路由命名空间表明控制器是不同的）。

我建议您从 github获取[MvcSiteMapProvider.DefaultControllerTypeResolver的代码。](https://github.com/maartenba/MvcSiteMapProvider/blob/master/src/MvcSiteMapProvider/MvcSiteMapProvider/DefaultControllerTypeResolver.cs)认为它在第 285 行抛出与使用命名空间定位控制器有关的异常。使用源代码来实现你自己的版本（如果你有的话，当然可以直接进入他们的代码），然后使用你的版本断点并介入并确定为什么它声称它们是重复的。您需要在 Web.config 中注册您的实现。例如类似的东西

```
controllerTypeResolver="MyProject.Web.YourControllerTypeResolver, MyProject" 
```

在创建租户具有不同控制器的多租户应用程序时，我必须这样做，并且我必须提供替代解决策略。

一般来说，您是否需要空白区域（我从不这样做）。通常，您是否需要在子节点等中指定控制器，就好像您不确定它使用父节点一样。

- -更新 -

我认为这可能是一个错误。看看这里[https://github.com/maartenba/MvcSiteMapProvider/issues/78](https://github.com/maartenba/MvcSiteMapProvider/issues/78)

应该在 3.3.4.0 中修复

# php - 带有 curl 的 PHP 脚本返回 200 响应

> ID：12638444
> 
> 赞同：0
> 
> 时间：2012-09-28T10:40:24.507
> 
> 标签：php, curl

在下面的代码片段中，您可以看到我正在尝试通过其 API 以 JSON 格式从网站下载一些数据。

我的问题是，当我尝试获取 json 格式的数据（25 mb 的文本数据）时，php 脚本会向我发送 200 响应（您可以在下面看到）。但奇怪的是脚本实际上完成了执行，并且响应被我的浏览器下载为文件。

如果输入到浏览器中的 url 会返回正确的数据，即使通过 wget 我也可以从此 url 下载内容。

会不会是 curl 会通过响应从服务器传递到我的浏览器？

```
$ch = curl_init("https://example.com/api/json/view/view_name?authtoken=xxxyyyaaaa&raw=true");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HEADER, false);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
$data = curl_exec ($ch); 
```

下载的文件“myscriptname.php”包含：

```
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>200 OK</title>
</head><body>
<h1>OK</h1>
<p>The server is temporarily unable to service your
request due to maintenance downtime or capacity
problems. Please try again later.</p>
</body></html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:54:10.590

这就是您实际使用的 cURL optin CURLOPT_RETURNTRANSFER 的用途：将传输的内容返回给用户代理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T11:00:58.953

您的请求没问题，但服务器将内容作为 html 页面返回（可能是他们的 API 不工作），因此您将得到维护页面作为回复。看着 php.net

```
 CURLOPT_RETURNTRANSFER    TRUE 
to return the transfer as a string of the return value of curl_exec()
 instead of outputting it out directly. 
```

当我用 curl 来

```
 <?php
$ch = curl_init("http://localhost/testjson.php");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HEADER, false);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
$data = curl_exec ($ch);
print_r($data);
?> 
```

我在执行之后得到的是

```
{"result":["google","stack","facebook"]} 
```

（这是因为我使用 print_r($data); 打印了结果）

testjson.php 是

```
<?php 
$data   = array ('result'=>array('google','stack','facebook'));
header('content-type:application/json');
echo json_encode($data);

?> 
```

# android - 安卓gps是什么意思？

> ID：12638446
> 
> 赞同：0
> 
> 时间：2012-09-28T10:40:42.347
> 
> 标签：android, gps

我得到了这条小线：

```
int meter = 1;
update 5000; //1 ms
globalconstant.mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, (long) update, meter,globalconstant.mlocListener); 
```

有人能告诉我这是什么意思吗？这是否意味着 gps 更新时间为 5 秒，如果位置更改 1 米，如果我在 5 秒内移动 1 米 4 次，它可能会在 5 秒内刷新 4 次？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T10:46:31.730

iirc 表示每 5 秒检查一次位置，每次检查后，如果移动超过 1 米，它会通知 mlocListener。（如果你没有移动超过1米，它不会通知）

这意味着您每 5 秒*最多*将获得1 次更新 - 但可能会更少（即，如果您不移动，您的应用将不会获得位置更新）。

至少，它应该是这样工作的。鉴于 GPS 不准确等，即使您站着不动，您最终也可能会收到位置更新（我认为 - 自从我使用 GPS 代码以来已经有一段时间了）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:49:06.673

您可以查看位置管理器[文档](http://developer.android.com/reference/android/location/LocationManager.html)。语法是 [requestLocationUpdates(String provider, long minTime, float minDistance, LocationListener listener)](http://developer.android.com/reference/android/location/LocationManager.html#requestLocationUpdates%28java.lang.String,%20long,%20float,%20android.location.LocationListener%29)

*   提供商，其中 GPS_PROVIDER 或 NETWORK_PROVIDER
*   minTime 是获取 GPS 信号所需的最短时间
*   minDistance , 经纬度坐标的最小变化
*   listener , LocationLister 监听 GPS 信号

因此，在您的情况下，获取 GPS 至少需要 5 秒，距离精度可以为 1 米。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-28T10:50:03.217

这意味着 GPS 将尝试每 5 秒计算一次设备位置。如果计算出的新位置距离前一个位置超过 1 米，那么它将调用 LocationListener 并将新位置作为参数。如果新位置与前一个位置接近一米，它将被丢弃并且不会调用 Listener。

在此处查看文档：[位置管理器](http://developer.android.com/reference/android/location/LocationManager.html#requestLocationUpdates%28java.lang.String,%20long,%20float,%20android.location.LocationListener%29)

# ruby-on-rails-3 - #new 和 #edit 上的 Active_admin 错误

> ID：12638447
> 
> 赞同：1
> 
> 时间：2012-09-28T10:40:44.953
> 
> 标签：ruby-on-rails-3, activeadmin

我在尝试访问主机上的 #new 或 #edit 操作时出错。在我的电脑上一切正常。

```
Started GET "/admin/operations/new" for 109.167.192.252 at 2012-09-27 15:45:37 +0400
Processing by Admin::OperationsController#new as HTML
  Rendered /home/z/.gem/ruby/1.9.1/bundler/gems/active_admin-e42acc0501ee/app/views/active_admin/resource/new.html.arb (43.9ms)
Completed 500 Internal Server Error in 53ms

ActionView::Template::Error (undefined method `call' for :silence:Symbol):
    1: insert_tag renderer_for(:new)
  app/admin/operations.rb:30:in `block (2 levels) in <top (required)>' 
```

在 active_admin 中注册的任何模型都会出现此错误。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T22:53:56.733

f.buttons 不好，只需使用 f.actions insted。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-17T00:38:51.357

听起来像是 papperclip gem 的问题，尝试在您的 papperclips 输入中添加*:required => false*

```
 e.g.
 f.input :photo, :required => false..... 
```

*问候！*

# c# - 循环问题

> ID：12638457
> 
> 赞同：0
> 
> 时间：2012-09-28T10:41:33.370
> 
> 标签：c#, loops

我仍处于学习阶段，`C#`我的程序需要一些帮助。

我的程序应该是这样工作的，我有 6 个推销员，我会在控制台中写下关于他们的信息`(name, sold items etc)`。我怎样才能让它循环 6 次（每个销售员一个）？

```
for (int i = 0; i < 6; i++) (Couldn't come up with more than this)
            { 

            salesmen[] seller = new salesmen[6];

            //Salesmen name
            Console.WriteLine("Enter name: ");
            salesmen[0].namn = System.Console.ReadLine();

            //Birth certificate
            Console.WriteLine("Enter birth certificate: ");
            salesmen[0].birthvertificate = Console.ReadLine();

            //Enter district
            Console.WriteLine("Enter district: ");
            salesmen[0].district = Console.ReadLine();

            //Enter solditems
            Console.WriteLine("Enter solditems: ");
            salesmen[0].solditems = int.Parse(Console.ReadLine());

            //Calculates what level each salesmen has reached
            if (salesmen[0].solditems < 50)
                salesmen[0].level = 1;

            if (salesmen[0].solditems >= 50 && salesmen[0].solitems < 99)
                salesmen[0].level = 2;

            if (salesmen[0].solitems >= 100 && salesmen[0].solditems < 199)
                salesmen[0].level = 3;

            if (salesmen[0].solditems > 199)
                salesmen[0].level = 4; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T10:44:59.890

你只是在改变`salesmen[0]`. 为了使用循环替换`salesmen[0]`所有`salesmen[i]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:46:36.707

您提供的代码是您正在使用的完整代码吗？快速浏览后，我注意到您的数组声明在 for 循环内，用一个空数组初始化数组 6 次。

正如[@Drenguin](https://stackoverflow.com/users/953571/drenguin)所说，您应该使用索引（在本例中为 i）来修改正确的推销员。

我也注意到你写了

```
salesmen[0].namn 
```

代替

```
salesmen[0].name 
```

尽管您的代码有效，但正确的拼写可能更具可读性。

# mysql - 设置 Magento 在多个 mysql 主机上写入

> ID：12638460
> 
> 赞同：0
> 
> 时间：2012-09-28T10:41:40.837
> 
> 标签：mysql, performance, magento, replication, cluster-computing

我是mysql集群的新手。我一直在尝试寻找，当我使用 mysql 集群设置 magento 时，它是否会写入其中一个节点或始终写入一个节点？

我的第二个问题是，当我设置 mysql 复制时：一主一从，主服务器死机，magento 会开始在从机上写入，还是我的应用程序停止工作？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T13:31:38.897

1)

Magento 默认支持：1 个 master 和多个 read slave。对于特定模块，您可以定义不同的读/写自定义连接。因此，通过此设置，您可以将数据写入多个 mysql 主服务器。

*注意：大型 Magento 托管合作伙伴/提供商（nbs、nexcess、peer1 等）都没有设法拥有一个具有多个 db master 的工作解决方案。*

2) 没有。没有自动切换到从机。

# c++ - 二维向量段

> ID：12638461
> 
> 赞同：1
> 
> 时间：2012-09-28T10:41:51.560
> 
> 标签：c++, vector, matrix

我正在尝试使用 2D 向量将大量向量拆分为块。

问题是当我运行程序时，我得到一个分段错误：11 错误。这是代码：

```
vector< vector<double> > Audio::something(vector<double>& theData, int N, int M)
{
int n = theData.size();
int maxblockstart = n - N;
int lastblockstart = maxblockstart - (maxblockstart % M);

int numblocks = (lastblockstart)/M + 1;
vector< vector<double> > subBlock;
this->width = N;
this->height = numblocks;

for(int i=0; (i < numblocks); i++)
{
    for(int j=0; (j < N); j++)
    {   
        subBlock[i][j] = theData[i*N+j];
    } 
}

return subBlock;
} 
```

我在想的是实现一个临时向量，该向量存储 (theData[i*N+j]) 的结果，然后推回 2D 向量内部，但是，这不起作用..有什么想法吗？谢谢 ：）

PS忽略方法名称“something”，这只是我为测试目的而命名的，一旦我解决了这个问题，我会改变它！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T10:44:54.943

您必须使用方法`push_back`将数据插入向量

```
for(int i=0; (i < numblocks); i++)
{
    subBlock.push_back(vector<double>());
    for(int j=0; (j < N); j++)
    {   
        subBlock[i].push_back(theData[i*N+j]);
    } 
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T10:45:07.377

这是一个问题：

```
subBlock[i][j] = theData[i*N+j]; 
```

与`subBlock`默认构造相同，因此不包含任何条目。在使用它们之前，您需要将元素添加到`subBlock`其中。您可以使用以下构造函数构造每个带有双精度`numblocks`数的向量：`vector<double>``N`[`std::vector::vector()`](http://en.cppreference.com/w/cpp/container/vector/vector)

```
vector<vector<double> > subBlock(numblocks, vector<double>(N)); 
```

并且`for`循环保持原样。

# php - PHP OCI：如何回滚任何打开的连接

> ID：12638462
> 
> 赞同：0
> 
> 时间：2012-09-28T10:41:54.883
> 
> 标签：php, oracle, oracle-call-interface

我正在使用 PHP 的 OCI 库与 Oracle 进行通信。在每个函数中都有一个 try...catch 来捕获任何异常。在 catch 部分，我调用了我自己的错误处理函数。

当发生异常时，我想回滚到 oracle 的所有打开连接，最好是在我的错误处理函数中。这可能吗？

谢谢

##

这有点hacky，但这是我解决问题的方法。

在连接到 Oracle 的 connect() 函数中，我输入了以下代码：

```
if(!isset($GLOBALS['OPEN_CONNECTIONS'])){
  $GLOBALS['OPEN_CONNECTIONS'] = array();
  $GLOBALS['OPEN_CONNECTIONS'][] = $this;
}else{
  $GLOBALS['OPEN_CONNECTIONS'][] = $this;
} 
```

这存储了全局范围内所有打开的连接的列表。

在我的错误处理函数中，我这样做：

```
//rollback all open connections
if(isset($GLOBALS['OPEN_CONNECTIONS'])){
  foreach($GLOBALS['OPEN_CONNECTIONS'] as $con){
    $con->rollback();
  }
} 
```

这样，我可以回滚所有打开的连接，而无需将它们传递给我的错误处理程序。

# ios - 在目标 c 示例教程中使用 c++ 文件

> ID：12638464
> 
> 赞同：0
> 
> 时间：2012-09-28T10:42:06.973
> 
> 标签：ios, ipad, ios5, objective-c++

我在哪里可以获得示例教程，我可以在哪里获得如何使用 Objective C 在 XCODE 中使用可视 C++ 文件？我正在开发具有多个可视 C++ 文件的应用程序。基本上这是一个为 Windows 开发的游戏应用程序。现在想在iPad上开发它。那么我可以重复使用这些文件吗？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T13:37:19.030

你可以直接将 c++ 文件添加到 Xcode 中，它会编译它们（假设你有所有正确的头文件等）。您可以使用 ObjectiveC++ 为该代码创建“桥梁”——这意味着您可以将 ObjectiveC 文件的后缀设置为“.mm”，并且文件中的方法将对任何其他 ObjectiveC 对象可见，但您也可以实例化 C++ 对象. 事实上，如果你有 C++ ivars（对象变量），它们会在发布 ObjectiveC 类时得到正确的破坏消息。谷歌“ObjectiveC++”了解更多信息。

# android - 安卓内存不足

> ID：12638465
> 
> 赞同：2
> 
> 时间：2012-09-28T10:42:13.743
> 
> 标签：android, out-of-memory

实际上我在我的应用程序中面临内存不足错误。:(问题是我一直在我的应用程序中使用活动数量，现在我无法转向另一种方法..:(所以在翻转 27 或29 个活动我在 setContentView() 上的 30 个活动上遇到 OOM 错误。在我的所有 XML 文件中，我一直在使用 AbsoluteLayout 设置背景图像，每个布局都有一个主页。在每个布局中，我都设置了 4 到 5 个背景按钮image. 现在每个按钮都设置有声音的图像。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T11:41:50.073

我发现开发 Android 应用程序的最常见错误之一是“java.lang.OutOfMemoryError: Bitmap Size Exceeds VM Budget”错误。我在更改方向后使用大量位图的活动上经常发现此错误：活动被销毁，再次创建，布局从 XML 中“膨胀”，消耗了位图可用的 VM 内存。

垃圾收集器未正确释放先前活动布局上的位图，因为它们已交叉引用其活动。经过多次实验，我找到了一个很好的解决这个问题的方法。

首先，在 XML 布局的父视图上设置“id”属性：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:id="@+id/RootView"
 >
 ... 
```

然后，在 Activity 的 onDestroy() 方法上，调用 unbindDrawables() 方法，将引用传递给父视图，然后执行 System.gc()

```
@Override
protected void onDestroy() {
super.onDestroy();

unbindDrawables(findViewById(R.id.RootView));
System.gc();
}

private void unbindDrawables(View view) {
    if (view.getBackground() != null) {
    view.getBackground().setCallback(null);
    }
    if (view instanceof ViewGroup) {
        for (int i = 0; i < ((ViewGroup) view).getChildCount(); i++) {
        unbindDrawables(((ViewGroup) view).getChildAt(i));
        }
    ((ViewGroup) view).removeAllViews();
    }
} 
```

这个 unbindDrawables() 方法递归地探索视图树并且：

```
Removes callbacks on all the background drawables
Removes childs on every viewgroup 
```

这个解决方案对我有用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T11:13:58.067

我建议使用`system.gc()`并且`finish();`每次跳转另一个活动它会清除您使用的资源并释放它。好的，那么您的应用程序中不会发生内存不足错误。这是工作试试这个。

祝你好运

使用此链接并获得更好的解决方案

[哪些 Android 工具和方法最适合查找内存/资源泄漏？](https://stackoverflow.com/questions/1147172/what-android-tools-and-methods-work-best-to-find-memory-resource-leaks/1147344#1147344)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-15T01:38:06.753

我一直在没有大量 RAM (HTC Wildfire) 的 Gingerbread (2.3.7) 设备上解决这个问题。旋转设备几次后，应用程序崩溃：

```
E/AndroidRuntime( 4805): Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget
E/AndroidRuntime( 4805):        at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
E/AndroidRuntime( 4805):        at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:460)
E/AndroidRuntime( 4805):        at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:336)
E/AndroidRuntime( 4805):        at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697)
E/AndroidRuntime( 4805):        at android.content.res.Resources.loadDrawable(Resources.java:1785)
E/AndroidRuntime( 4805):        at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
E/AndroidRuntime( 4805):        at android.widget.ImageView.<init>(ImageView.java:118)
E/AndroidRuntime( 4805):        at android.widget.ImageView.<init>(ImageView.java:108)
E/AndroidRuntime( 4805):        ... 26 more 
```

旋转的布局非常简单，`RelativeLayout`有几个`ImageView`孩子，其中一个有一个相对较大（文件大小）的图像作为屏幕一部分的背景。

我尝试实施@AndroidUsers 的解决方案，但这并没有解决我的问题。通过更多的工作，我发现我保存背景图像的 ImageView 没有正确释放它的内存，所以我在 unbindDrawables 方法中添加了另一个检查。我还通过一个额外的参数捆绑在 system.gc() 调用中，因此不能错过：

```
public static void unbindDrawables(View view, boolean runGC) {
    if (view.getBackground() != null) {
        view.getBackground().setCallback(null);
    }

    if (view instanceof ImageView) {
        ((ImageView) view).setImageBitmap(null);
        ((ImageView) view).setImageDrawable(null);
    }
    else if (view instanceof ViewGroup) {
        for (int i = 0; i < ((ViewGroup) view).getChildCount(); i++) {
            unbindDrawables(((ViewGroup) view).getChildAt(i), false);
        }
        ((ViewGroup) view).removeAllViews();
    }

    if(runGC) {
        System.gc();
    }
} 
```

在我的测试中，您将 Bi​​tmap 或 Drawable 中的哪一个设置为 null 似乎并不重要，但我认为两者都不会受到伤害。

# backbone.js - 从主干中的 window.localtion.search 重新填充表单

> ID：12638466
> 
> 赞同：1
> 
> 时间：2012-09-28T10:42:17.240
> 
> 标签：backbone.js

我遇到了一个问题，我不知道该怎么咬。我有一个带有很多过滤器的搜索表单。我将所有当前的过滤器存储在全局名称页面中，即：window.NM.CurrentSearchParams = {}，然后我从过滤器中更新哈希。每次更新哈希时，都会触发更新 uri 事件以使用当前参数重新定位 window.localtion.search。这里一切正常。现在我在进入页面反序列化 window.location.search 并使用参数更新 CurrentSearchParams 后遇到问题。那也很好，但我想根据这些参数重新填充表格。我的代码有点乱，不确定最好的方法。如何将不同视图中的表单填充绑定到参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T20:57:32.517

制作`CurrentSearchParams`一个 Backbone.Model，以便您可以订阅其上的`change`事件。

```
 NM.CurrentSearchParams = new Backbone.Model();

MyView = Backbone.View.extend({

  initialize: function(){
    NM.CurrentSearchParams.on("change", this.doStuff, this);
  },

  doStuff: function(){
    // do stuff here
  },

  close: function(){
    NM.CurrentSearchParams.off("change", this.doStuff, this);
  }

}); 
```

请注意我添加的“关闭”方法。这非常重要，您需要在视图完成并准备关闭时调用它，否则最终会导致大量内存泄漏和在僵尸视图实例上触发的事件：http: [//lostechies.com/derickbailey/ 2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/](http://lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/)

# android - 多次调用一种方法 - android代码

> ID：12638467
> 
> 赞同：0
> 
> 时间：2012-09-28T10:42:23.220
> 
> 标签：android

我的布局有 4 个按钮。一个是“正确”的答案，另外三个是“错误”的答案。我希望在按下 3 个“错误”按钮之一的情况下显示 SAME 弹出窗口。这是我得到的代码。

我不想为 3 个按钮中的每一个重复此代码，我如何使用不同的按钮名称调用相同的代码？

```
 ImageButton rredButton=(ImageButton)findViewById(R.id.RredButton);
    rredButton.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            LayoutInflater layoutInflater
            = (LayoutInflater)getBaseContext()      
            .getSystemService(LAYOUT_INFLATER_SERVICE);
            View popupView = layoutInflater.inflate(R.layout.popupright, null);
            final PopupWindow popupWindow = new PopupWindow(               
                    popupView,                
                    LayoutParams.WRAP_CONTENT,                       
                    LayoutParams.WRAP_CONTENT);                            

            Button btnDismiss = (Button)popupView.findViewById(R.id.nextscreen);             
            btnDismiss.setOnClickListener(new Button.OnClickListener(){     
                @Override     
                public void onClick(View v) {      
                    Intent myintent1 = new Intent(colorActivity.this,LearningTimeMenu.class);
                    startActivity(myintent1);
                }
            });
        }}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T10:48:56.147

试试这个

```
private void createPopUP()
{
    LayoutInflater layoutInflater
            = (LayoutInflater)getBaseContext()      
            .getSystemService(LAYOUT_INFLATER_SERVICE);
            View popupView = layoutInflater.inflate(R.layout.popupright, null);
            final PopupWindow popupWindow = new PopupWindow(               
                    popupView,                
                    LayoutParams.WRAP_CONTENT,                       
                    LayoutParams.WRAP_CONTENT);                            

            Button btnDismiss = (Button)popupView.findViewById(R.id.nextscreen);             
            btnDismiss.setOnClickListener(new Button.OnClickListener(){     
                @Override     
                public void onClick(View v) {      
                    Intent myintent1 = new Intent(colorActivity.this,LearningTimeMenu.class);
                    startActivity(myintent1);
                }
            });

}

ImageButton rredButton=(ImageButton)findViewById(R.id.RredButton);
rredButton.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View arg0) {

        createPopUP();

    }}); 
```

否则在 xml 文件中，使用

```
<Button ..........
 android: onClick ="createPopUP"
</Button> 
```

# drupal - Drupal 菜单引发 SQL 错误

> ID：12638468
> 
> 赞同：0
> 
> 时间：2012-09-28T10:42:25.087
> 
> 标签：drupal, drupal-navigation

我对 Drupal 菜单有这个奇怪的问题。当我尝试向任何 drupal 菜单添加链接时，它会引发以下 SQL 异常。我可以创建新菜单或删除现有菜单，但无法添加任何链接 :-) 有帮助吗？

处理异常时抛出额外的未捕获异常。

原来的

PDOException：SQLSTATE [HY000]：一般错误：2006 MySQL 服务器已消失：SELECT s.lid、t.translation、s.version FROM {locales_source} s LEFT JOIN {locales_target} t ON s.lid = t.lid AND t .language = :language WHERE s.source = :source AND s.context = :context AND s.textgroup = 'default'; Array ( [:language] => tr [:source] => 配置用户输入的内容如何被过滤，包括允许的 HTML 标签。还允许启用模块提供的过滤器。 [:context] => ) in locale() ( /home/predra/public_html/modules/locale/locale.module 的第 684 行）。

额外的

PDOException：SQLSTATE [HY000]：一般错误：2006 MySQL 服务器已消失：INSERT INTO {watchdog}（uid、类型、消息、变量、严重性、链接、位置、引用者、主机名、时间戳）值（：db_insert_placeholder_0、：db_insert_placeholder_1 , :db_insert_placeholder_2, :db_insert_placeholder_3, :db_insert_placeholder_4, :db_insert_placeholder_5, :db_insert_placeholder_6, :db_insert_placeholder_7, :db_insert_placeholder_8, :db_insert_placeholder_9); 数组 ( [:db_insert_placeholder_0] => 1 [:db_insert_placeholder_1] => php [:db_insert_placeholder_2] => %type: !message in %function (line %line of %file). [:db_insert_placeholder_3] => a:6:{ s:5:"%type";s:12:"PDOException";s:8:"!message";s:495:"SQLSTATE[HY000]: 一般错误：2006 MySQL 服务器已消失：SELECT s.lid , t.translation, s. 版本来自 {locales_source} s LEFT JOIN {locales_target} t ON s.lid = t.lid AND t.language = :language WHERE s.source = :source AND s.context = :context AND s.textgroup = '默认'; Array ( [:language] => tr [:source] => 配置如何过滤用户输入的内容，包括允许的 HTML 标签。还允许启用模块提供的过滤器。[:context] => ) "; s:9:"%function";s:8:"locale()";s:5:"%file";s:53:"/home/predra/public_html/modules/locale/locale.module";s :5:"%line";i:684;s:14:"severity_level";i:3;} [:db_insert_placeholder_4] => 3 [:db_insert_placeholder_5] => [:db_insert_placeholder_6] => 上下文 AND s.textgroup = 'default'; Array ( [:language] => tr [:source] => 配置如何过滤用户输入的内容，包括允许的 HTML 标签。还允许启用模块提供的过滤器。[:context] => ) "; s:9:"%function";s:8:"locale()";s:5:"%file";s:53:"/home/predra/public_html/modules/locale/locale.module";s :5:"%line";i:684;s:14:"severity_level";i:3;} [:db_insert_placeholder_4] => 3 [:db_insert_placeholder_5] => [:db_insert_placeholder_6] => 上下文 AND s.textgroup = 'default'; Array ( [:language] => tr [:source] => 配置如何过滤用户输入的内容，包括允许的 HTML 标签。还允许启用模块提供的过滤器。[:context] => ) "; s:9:"%function";s:8:"locale()";s:5:"%file";s:53:"/home/predra/public_html/modules/locale/locale.module";s :5:"%line";i:684;s:14:"severity_level";i:3;} [:db_insert_placeholder_4] => 3 [:db_insert_placeholder_5] => [:db_insert_placeholder_6] =>[http://predra.com/admin/structure/menu/manage/menu-header-menu/add](http://predra.com/admin/structure/menu/manage/menu-header-menu/add) [:db_insert_placeholder_7] => [http://predra.com/doktor/haldun-san](http://predra.com/doktor/haldun-san) [:db_insert_placeholder_8] => 78.180。 179.155 [:db_insert_placeholder_9] => 1348828684 ）在 dblog_watchdog() （/home/predra/public_html/modules/dblog/dblog.module 的第 154 行）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T13:54:32.883

请在 mysql\bin\my.ini 中将 max_allowed_pa​​cket 更改为 20M 或更多（取决于您的 mysql 服务器配置路径。）它可以工作！

# nsfetchedresultscontroller - UICollection 查看 & performBatchUpdate

> ID：12638474
> 
> 赞同：2
> 
> 时间：2012-09-28T10:42:56.497
> 
> 标签：nsfetchedresultscontroller, uicollectionview

我试图构建一个可以使用 UICollectionviewcontroller 和 NSFetchresultcontroller 的应用程序，我找到了以下链接[“https://github.com/AshFurrow/UICollectionView-NSFetchedResultsController/blob/master/AFMasterViewController.m](https://github.com/AshFurrow/UICollectionView-NSFetchedResultsController/blob/master/AFMasterViewController.m)

在这里你可以找到代码

```
#pragma mark - UICollectionVIew

- (NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView
{
    return [[self.fetchedResultsController sections] count];
}

- (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section
{

    id <NSFetchedResultsSectionInfo> sectionInfo = [self.fetchedResultsController sections][section];
    return [sectionInfo numberOfObjects];
}

// The cell that is returned must be retrieved from a call to -dequeueReusableCellWithReuseIdentifier:forIndexPath:
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    AFCollectionViewCell *cell = (AFCollectionViewCell *)[collectionView dequeueReusableCellWithReuseIdentifier:CellIdentifier forIndexPath:indexPath];

    NSManagedObject *object = [self.fetchedResultsController objectAtIndexPath:indexPath];

#warning Unimplement Cell Configuration

    return cell;
}

#pragma mark - Fetched results controller

- (NSFetchedResultsController *)fetchedResultsController
{
    if (_fetchedResultsController != nil) {
        return _fetchedResultsController;
    }

#warning Unimplemented fetched results controller

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    // Edit the entity name as appropriate.
    NSEntityDescription *entity = [NSEntityDescription entityForName:<#entity#>inManagedObjectContext:self.managedObjectContext];
    [fetchRequest setEntity:entity];

    // Set the batch size to a suitable number.
    [fetchRequest setFetchBatchSize:<#batch size#>];

    // Edit the sort key as appropriate.
    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:<#descriptor#> ascending:NO];
    NSArray *sortDescriptors = @[sortDescriptor];

    [fetchRequest setSortDescriptors:sortDescriptors];

    // Edit the section name key path and cache name if appropriate.
    // nil for section name key path means "no sections".
    NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil cacheName:@"Master"];
    aFetchedResultsController.delegate = self;
    self.fetchedResultsController = aFetchedResultsController;

    NSError *error = nil;
    if (![self.fetchedResultsController performFetch:&error]) {
         // Replace this implementation with code to handle the error appropriately.
         // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

    return _fetchedResultsController;
}    

- (void)controller:(NSFetchedResultsController *)controller didChangeSection:(id <NSFetchedResultsSectionInfo>)sectionInfo
           atIndex:(NSUInteger)sectionIndex forChangeType:(NSFetchedResultsChangeType)type
{

    NSMutableDictionary *change = [NSMutableDictionary new];

    switch(type) {
        case NSFetchedResultsChangeInsert:
            change[@(type)] = @[@(sectionIndex)];
            break;
        case NSFetchedResultsChangeDelete:
            change[@(type)] = @[@(sectionIndex)];
            break;
    }

    [_sectionChanges addObject:change];
}

- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject
       atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type
      newIndexPath:(NSIndexPath *)newIndexPath
{

    NSMutableDictionary *change = [NSMutableDictionary new];
    switch(type)
    {
        case NSFetchedResultsChangeInsert:
            change[@(type)] = newIndexPath;
            break;
        case NSFetchedResultsChangeDelete:
            change[@(type)] = indexPath;
            break;
        case NSFetchedResultsChangeUpdate:
            change[@(type)] = indexPath;
            break;
        case NSFetchedResultsChangeMove:
            change[@(type)] = @[indexPath, newIndexPath];
            break;
    }
    [_objectChanges addObject:change];
}

- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller
{
    if ([_sectionChanges count] > 0)
    {
        [self.collectionView performBatchUpdates:^{

            for (NSDictionary *change in _sectionChanges)
            {
                [change enumerateKeysAndObjectsUsingBlock:^(NSNumber *key, id obj, BOOL *stop) {

                    NSFetchedResultsChangeType type = [key unsignedIntegerValue];
                    switch (type)
                    {
                        case NSFetchedResultsChangeInsert:
                            [self.collectionView insertSections:[NSIndexSet indexSetWithIndex:[obj unsignedIntegerValue]]];
                            break;
                        case NSFetchedResultsChangeDelete:
                            [self.collectionView deleteSections:[NSIndexSet indexSetWithIndex:[obj unsignedIntegerValue]]];
                            break;
                        case NSFetchedResultsChangeUpdate:
                            [self.collectionView reloadSections:[NSIndexSet indexSetWithIndex:[obj unsignedIntegerValue]]];
                            break;
                    }
                }];
            }
        } completion:nil];
    }

    if ([_objectChanges count] > 0 && [_sectionChanges count] == 0)
    {
        [self.collectionView performBatchUpdates:^{

            for (NSDictionary *change in _objectChanges)
            {
                [change enumerateKeysAndObjectsUsingBlock:^(NSNumber *key, id obj, BOOL *stop) {

                    NSFetchedResultsChangeType type = [key unsignedIntegerValue];
                    switch (type)
                    {
                        case NSFetchedResultsChangeInsert:
                            [self.collectionView insertItemsAtIndexPaths:@[obj]];
                            break;
                        case NSFetchedResultsChangeDelete:
                            [self.collectionView deleteItemsAtIndexPaths:@[obj]];
                            break;
                        case NSFetchedResultsChangeUpdate:
                            [self.collectionView reloadItemsAtIndexPaths:@[obj]];
                            break;
                        case NSFetchedResultsChangeMove:
                            [self.collectionView moveItemAtIndexPath:obj[0] toIndexPath:obj[1]];
                            break;
                    }
                }];
            }
        } completion:nil];
    }

    [_sectionChanges removeAllObjects];
    [_objectChanges removeAllObjects];
}

@end 
```

我有以下错误

```
NSFetchedResultsController during a call to -controllerDidChangeContent:.  -[__NSArrayI unsignedIntegerValue] 
```

_sectionsChange 的 NS 日志给我以下输出

```
1 =         (
        6
    ); 
```

我想知道如何解决这个问题，所以任何帮助将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T19:09:27.013

不，在我更新以下代码后，错误已修复：

```
{
case NSFetchedResultsChangeInsert:
                            [self.collectionView insertItemsAtIndexPaths:@[obj]];
                            [self.collectionView.window endEditing:YES];
                            break;
} 
```

而不是案例`NSFetchedResultsChangeInsert`：

```
[self.collectionView insertItemsAtIndexPaths:@[obj]];
break; 
```

然后删除所有对象，从头开始创建一切，问题解决了！

# c - 为什么 printf("%d\n", printf("%d\b", a)) 会这样工作？

> ID：12638485
> 
> 赞同：3
> 
> 时间：2012-09-28T10:43:31.877
> 
> 标签：c, escaping, printf

这是我的 C 代码，用 gcc 编译。

```
#include<stdio.h>

int main() 
{ 
    int a=1; 
    switch(a)
    {
       int x=10;
       case 1:
           printf("%d\n",printf("%d\b",x));
           break;
       default:
           printf("%d\n",printf("%d\b",x));
    }
    return 0;
} 
```

printf() 应该返回它成功打印的元素数。 `printf("%d\b", x)`应该自己打印 10（因为 \b 将打印指针落后一步（到 10 中的数字 0）并且之后没有任何内容可打印。所以它应该只打印 10。那是 2 个字符。现在外部 printf 将显示 2。输出应该是 102。我实际看到的输出是 2。

在嵌套`printf`s 的情况下，是否记住了打印指针的位置？我的意思是，如果`\b`内部有 a `printf`，它将使打印指针落后一步。当控件现在转到外部`printf`时，是否记住了更改的位置？它会覆盖最后一个字符吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T11:08:56.830

```
printf("%d\b",x) 
```

打印字符`'1'`, `'0'`(因为 x==10) 和`\b`. `\b`是退格字符；如果您打印到终端，它将打印`10`然后将光标移回一列。

调用`printf`返回它打印的字符数；在这种情况下，结果是 3（是的，`'\b'`算作一个字符）。

```
printf("%d\n",printf("%d\b",x)); 
```

内部`printf`调用如我上面解释的那样工作，并返回 3。外部`printf`调用打印`"3\n"`。

所以整个语句将打印：

```
10\b3\n 
```

`'\b'`导致在屏幕上`3`被替换`0`，所以最终显示的结果（当我在我的系统上运行程序时）是：

```
13 
```

如果我通过管道输出`cat -v`，我得到：

```
10^H3 
```

其中`^H`表示退格字符。

**编辑 ：**

这个问题刚刚被编辑，修改后的程序的行为是完全不同的。switch 语句使控制跳过*声明*，但进入声明`int x = 10;`的范围`x`。结果，在被调用`x`时是未初始化`printf`的。这会导致未定义的行为，并且很可能是垃圾输出（我刚刚得到`-1217572876^H12`）。如果`x`碰巧是`0`，我想你会得到`0^H2`，看起来像`2`。

无论你想做什么，请找到更好的方法来做。

# php - 无法让谷歌图表/json数据正常工作

> ID：12638489
> 
> 赞同：0
> 
> 时间：2012-09-28T10:43:51.190
> 
> 标签：php, json, google-visualization

您好我正在尝试生成一个简单的页面，其中包含几个关于使用谷歌 API 的指标。我一遍又一遍地查看了我可以在网上找到的所有信息，但无法弄清楚它为什么显示空白页。我怀疑我的 json 因为我以前没有使用过它。

getData.php 的 json 输出为：

```
[{"hostname":"bongo","value":24},{"hostname":"chappie","value":78}] 
```

应该生成仪表的 php 脚本是：

```
 <html>
  <head>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript" src="jquery-1.6.4.js"></script>
    <script type="text/javascript">

    google.load('visualization', '1', {packages:['gauge']});

    google.setOnLoadCallback(drawChart);

    function drawChart() {
      var jsonData = $.ajax({
          url: "getData.php",
          dataType:"json",
          async: false
          }).responseText;

      var data = new google.visualization.DataTable(jsonData);

    var options = {
          width: 400, height: 120,
          redFrom: 90, redTo: 100,
          yellowFrom:75, yellowTo: 90,
          minorTicks: 5
        };

      var chart = new google.visualization.Guage(document.getElementById('chart_div'));
      chart.draw(data, options);
    }

    </script>
  </head>
  <body>
    <div id='chart_div'></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:50:33.413

您的 json 数据格式不正确，并且您将 Gauge 输入错误为 Guage。我更正了您的代码，它在我的 php 服务器上按如下方式运行（顺便说一句，您可以嵌套数组并使用 json_encode php 函数输出符合 google Datatable json 字符串格式的 json 字符串）：

```
<head>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script type="text/javascript">

    google.load('visualization', '1', {packages:['gauge']});

    google.setOnLoadCallback(drawChart);

    function drawChart() {
    var jsonData = {
                    cols: [{id: 'Host Name', label: 'Host Name', type: 'string'},
                           {id: 'Value', label: 'Value', type: 'number'}],
                    rows: [{c:[{v: 'bongo'}, {v: 24}]},
                           {c:[{v: 'chappie'}, {v: 78}]}]
                    }

    var data = new google.visualization.DataTable(jsonData);

    var options = {
        width: 400, height: 120,
        redFrom: 90, redTo: 100,
        yellowFrom:75, yellowTo: 90,
        minorTicks: 5
    };

    var chart = new google.visualization.Gauge(document.getElementById('chart_div'));
        chart.draw(data, options);
    }

</script>
</head>
<body>
    <div id='chart_div'></div>
</body> 
```

对于调试，您可以执行以下操作： google.visualization.events.addListener(bar_chart_example, 'error', function(err) { document.getElementById('bar_chart_example_div').innerHTML = err.message; });

# mysql - MySQL关键字搜索查询以匹配具有所有关键字的项目？

> ID：12638496
> 
> 赞同：2
> 
> 时间：2012-09-28T10:44:22.697
> 
> 标签：mysql, sql, search, indexing, keyword

我有一个表结构，基本上是：

```
Items
ID: INT(10)
Title: CHAR(255)

ItemsWords
ID: INT(10)
ItemID: INT(10)
Word: CHAR(50) 
```

对于每条“Item”记录，“ItemsWords”表中有多个记录。

我可以找到所有使用这个的项目，其中包含一个像这样的单词：

```
SELECT * FROM Items i, ItemsWords w WHERE w.ItemID=i.ID AND w.Word='WORD_TO_FIND' 
```

我可以找到所有使用它的项目，其中包含以下任何一个词：

```
SELECT * FROM Items i, ItemsWords w 
WHERE w.ItemID=i.ID 
AND (w.Word='WORD_TO_FIND' OR w.Word='ANOTHER_WORD_TO_FIND') 
```

但我也希望能够使用相同的表结构来仅查找包含任意数量的搜索词的“项目”。

我知道我可以通过表格使用全文，该`Items`表格有超过 100,000 条记录，并且`ItemWords`表格不止于此，因此以这种方式设置结构以使这些搜索非常快速并且对服务器的影响最小。上面的一个词或任何词搜索确实是超快速的。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T10:48:08.817

```
select Items.id, Items.Title
from Items
   inner join ItemsWords   
   on Items.ID = ItemsWords.ItemID
where ItemsWords.Word in ('WORD_TO_FIND','ANOTHER_WORD_TO_FIND') 
group by Items.id, Items.Title
having count(distinct ItemsWords.id) =2 
```

最后一行中的数字是您正在搜索的单词列表中的单词数（即：在本例中为 2。

请注意如何使用`inner join`语法而不是`where`子句连接表

# vb.net - Visual Basic 控制台应用程序

> ID：12638498
> 
> 赞同：3
> 
> 时间：2012-09-28T10:44:44.677
> 
> 标签：vb.net, console-application

我正在为计算机科学制作一个控制台应用程序，如果两个数字相同，则显示一条消息，如果它们不同，则显示一条不同的消息。

到目前为止，这是我的代码：

```
Module Module1

Sub Main()
 Dim NumberOne As Integer
 Dim NumberTwo As Integer
 Console.WriteLine("Enter your first number and then press the enter key")
 NumberOne = Console.ReadLine
 Console.WriteLine("Now enter your second number and press the enter key")
 NumberTwo = Console.ReadLine
 If NumberOne = NumberTwo Then
 Console.WriteLine("You entered the same two numbers!")
 Console.ReadLine()
 End If
 If NumberOne <= NumberTwo Then
 Console.WriteLine("You entered two different numbers")
 Console.ReadLine()
 End If
 End Sub
End Module 
```

这运行正常，但问题是如果您输入两个相同的数字，它表示您输入了相同的数字，但是当您按下回车键时，它会显示另一条消息，说明您输入了两个不同的数字。

有谁知道我怎样才能让它只做一个或另一个？

谢谢，

杰克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T10:51:58.873

请更改您的代码：

```
 If NumberOne = NumberTwo Then
 Console.WriteLine("You entered the same two numbers!")
 Console.ReadLine()
 Else
 Console.WriteLine("You entered two different numbers")
 Console.ReadLine()
 End If 
```

希望这可以帮助！

# android - 如何更新sqlite中的整个列？

> ID：12638501
> 
> 赞同：3
> 
> 时间：2012-09-28T10:44:55.880
> 
> 标签：android, sqlite

> **可能重复：**
> [需要更新 SQLite 中列的值](https://stackoverflow.com/questions/5416836/need-to-update-the-value-of-a-column-in-sqlite)

大家好，我的 android 应用程序的 SQLite 数据库表中有 5 条记录。值为 5、25、15、25、25。现在我想用 50 更新我的整个列。例如 5+50=55 并喜欢所有值。我不知道如何编写更新查询。谁能告诉我？提前致谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-28T10:47:24.243

```
UPDATE table SET column=column+50; 
```

这应该对您有所帮助：它通过向列添加 50 来更新所有行的值。如果你想要别的东西（你的问题不是很清楚），那么请更新你的问题并进一步解释。

# javascript - 在没有内容失真的情况下实现 slideUp()

> ID：12638502
> 
> 赞同：0
> 
> 时间：2012-09-28T10:44:57.143
> 
> 标签：javascript, jquery

我想实现一个简单的向上和向下滑动机制，以便在按下按钮时显示内容。使用开箱即用的 jquery 函数 slideUp() 和 slideDown() 挤压内容。我希望滑动机制类似于 twitter 中使用的机制（在时间轴中，当您单击推文时，更多信息和选项会向下滑动）。那里的内容不会被压扁。相反，底部边框在内容上无缝移动，因此向上滑动而不会挤压。关于如何实现这一点的任何指示？

编辑：

要滑入和滑出可见性的内容在 div 内

```
<div id='container'>
 <div id='slider'>
   <div> other content </div>
 </div>
 <div id='button'>
   Click to slide
  </div>
</div> 
```

我听“按钮”div的点击事件

```
$('.button').click(function(){
  if($('.slider').is(":visible"))
  {
    $('.slider').slideUp();
  }
  else { $('.slider').slideDown(); }
}); 
```

这是一个基本的滑块。'slider' div 中的内容在制作动画时会被挤压和扭曲。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T13:21:40.390

试试这个[演示](http://jsbin.com/ejohob/1/edit)

```
$(function(){

  $('#button').click(function(){
  if($('#slider').is(":visible"))
  {
    $('#slider').slideUp();
  }
  else { $('#slider').slideDown(); }
});

}); 
```

# java - getClass() 在基类的构造函数中报告哪个类

> ID：12638504
> 
> 赞同：17
> 
> 时间：2012-09-28T10:44:59.937
> 
> 标签：java, constructor

在Java中，假设`getClass()`在用作基类的类的构造函数中调用将提供有关派生类而不是基类的类的信息是否安全？

它似乎有效，但我想这并不一定意味着它是安全的。例如，如果我有以下两个类：

```
public class Parent {
    public Parent() {
        System.out.println(getClass().getName());
    }
} 
```

和：

```
public class Derived extends Parent {
    public Derived() {
        super();
    }

    public static void main(String... args) {
        new Derived();
    }
} 
```

当我`main()`在 Derived 类中运行该方法时，它会打印：（`Derived`这是我所希望的）。但是我可以在 JVM 中依赖这种行为吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-28T10:50:29.247

`getClass`是`Object`的方法之一，[并返回 的**运行时**类`this`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#getClass%28%29)：

> 返回此 Object 的运行时类。返回的 Class 对象是被表示类的静态同步方法锁定的对象。

所以是的，它总是会返回`Derived`。

# c# - 如何检查缓冲区中的特定位是否在 C# 中设置

> ID：12638507
> 
> 赞同：0
> 
> 时间：2012-09-28T10:45:06.170
> 
> 标签：c#

我有 ac# 代码，它将十六进制代码写入设备的端口。设备回复端口，我阅读了他的答案，将其转换为十六进制并显示在文本框中。所以，现在我必须检查答案中的每一位，并在文本框中显示一条消息或类似的东西。

有人可以帮我吗？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T10:53:50.827

按位与您要检查的位的响应：

```
Byte response = (Byte)0xFF;
Boolean isBitOneSet = (response & 0x1) > 0;
Boolean isBitTwoSet = (response & 0x2) > 0;
Boolean isBitThreeSet = (response & 0x4) > 0; 
```

或使用右移：

```
Boolean isBitFiveSet = ((response >> 4) & 0x1) > 0;

if(isBitFiveSet) System.Windows.MessageBox.Show("Five is set"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T11:00:04.053

如果您需要数字的二进制表示，则可以使用[Convert.ToString()](http://msdn.microsoft.com/en-us/library/14kwkz77.aspx)方法 - 它比单独检查每个位更简单有效。此方法可以转换为二进制和 HEX 格式 - 无论您喜欢什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T12:56:09.447

Ferdinand 已经描述了检查单个位的方式。也许它还不够清楚。

因此，要检查每个字节中的每一位，您应该像这样将代码变白：

```
StringBuilder message = new StringBuilder();
for (int byteNum = 0; byteNum < bytes.Length; byteNum++)
{
  var responseByte = bytes[byteNum];
  for (int bitPos = 0; bitPos < 8; bitPos++)
  {
    message.AppendFormat("Byte {0} bit {1} value is {2}", byteNum, bitPos, (responseByte & (1<<bitPos)) != 0);
  }
} 
```

希望现在更清楚了。您晚上唯一想要更改的是字节和位顺序。我不确定如何将位序列转换为字节数组：第 0 位真的可能是字节中的最后一位。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T11:07:14.237

```
namespace read_display_data 
```

{公共部分类Form1：表格{

```
 SerialPort port = new SerialPort("COM1", 19200, Parity.None, 8, StopBits.One);

    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {

        port.Open();
        port.DataReceived += new SerialDataReceivedEventHandler(port_DataReceived);

    }

    private void Sendbutton_Click(object sender, EventArgs e)
    {

        port.Write(new byte[] { 0x55, 0x08, 0x00, 0x00, 0x00, 0x00, 0x03, 0x5D }, 0, 8)
        byte[] buffer1 = new byte[] { 0x55, 0x08, 0x00, 0x00, 0x00, 0x00, 0x03, 0x5D };

        Log1(LogMsgType.Outgoing, DateTime.Now + "  --  " + ByteArrayToHexString(buffer1) + "\n");

    }

    public enum LogMsgType { Incoming, Outgoing, Normal };

    void port_DataReceived(object sender, SerialDataReceivedEventArgs e)
    {

        int bytes = port.BytesToRead;

        byte[] buffer = new byte[bytes];

        port.Read(buffer, 0, bytes);

        Thread.Sleep(100);

        Log(LogMsgType.Incoming, DateTime.Now + "  --  " + ByteArrayToHexString(buffer) + "\n");
        Log2(LogMsgType.Incoming, DateTime.Now + "  --  " + GetInBinaryString(buffer) + "\n");

    }

    private string ByteArrayToHexString(byte[] buffer)
    {
        StringBuilder sb = new StringBuilder(buffer.Length * 3);
        foreach (byte b in buffer)
            sb.Append(Convert.ToString(b, 16).PadLeft(2, '0').PadRight(3, ' '));
        return sb.ToString().ToUpper();

    }

    private string GetInBinaryString(byte[] buffer)
    {

        StringBuilder sb = new StringBuilder(buffer.Length * 8);
        foreach (byte b in buffer)
            sb.Append(Convert.ToString(b, 2).PadLeft(8, '0').PadRight(5, ' '));
        return sb.ToString().ToUpper();

    }

    private void Log(LogMsgType msgtype, string msg)
    {
        textBox1.Invoke(new EventHandler(delegate
        {
            textBox1.SelectedText = string.Empty;
            textBox1.AppendText(msg);
            textBox1.ScrollToCaret();

        }
        ));

    }
    private void Log1(LogMsgType msgtype, string msg)
    {
        textBox2.Invoke(new EventHandler(delegate
        {
            textBox2.SelectedText = string.Empty;
            textBox2.AppendText(msg);
            textBox2.ScrollToCaret();

        }
        ));

    }

    private void Log2(LogMsgType msgtype, string msg)
    {
        textBox3.Invoke(new EventHandler(delegate
        {
            textBox3.SelectedText = string.Empty;
            textBox3.AppendText(msg);
            textBox3.ScrollToCaret();

        }
        ));

    } 
```

# php - 未输入登录详细信息时防止访问网页的正确程序 PHP

> ID：12638508
> 
> 赞同：1
> 
> 时间：2012-09-28T10:45:15.590
> 
> 标签：php, web-applications, redirect, session-variables

我正在远程服务器上制作安全的 Web 应用程序。是否有阻止用户访问仅对发布了登录详细信息的用户可用的网页的行业标准。

到目前为止，如果用户发送持有会话变量，则使用简单的标头重定向来保护经过身份验证的用户页面。

这是行业标准吗？有没有更好的方法来实现这种方法。

pysedo 代码

```
 Session code dosent equal value or session is null {

     header redirect to index 

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:05:05.137

就像我在评论中所说的那样，重定向标头本身并不是一项安全功能。发送重定向标头后，应确保无法正常执行。

例如：

```
if($username != "foo" && $password != "bar")
{
    header('Location: http://domain.org/index.php');
}

echo "Authorized page"; 
```

即使用户名和密码不正确，仍然可以通过忽略`Location`标题访问此页面的内容。

一个简单的解决方法是：

```
if($username != "foo" && $password != "bar")
{
    header('Location: http://domain.org/index.php');
    die("Redirecting to home page");
}

echo "Authorized page"; 
```

此外，重要的是身份验证不依赖于每个页面上的手动检查，因为这些检查很容易被开发人员忘记。尽量使这些事情自动化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:49:53.380

不太确定我是否正确理解了这个问题。

然而，这可能会有所帮助：由于 Web 服务器以非常好的方式处理身份验证（只要配置正确），因此只剩下热链接。您可以尝试通过服务器配置中的附加重定向规则来捕获该问题：如果 HTTP_REFERER 不是以前经过身份验证的页面，则重定向到任何位置。

我想不出更多了。重要的是在一开始就获得正确且安全的身份验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T11:45:33.510

不确定这是否是一个好的解决方案，但我只是将登录状态保留在会话变量中：

```
if ($_SESSION[loggedIn] == "yes"  && $_SESSION["LevelTwoPermissions"] == "yes")
{
    // Grant access to allowed content...
}
else
{
    // Redirect to login page or ask for login in a pop-up
} 
```

从理论上讲，它可以通过窃取其他用户的会话 cookie 来破解，但对于我的目的来说，这是一个合理的安全级别。

# android - GestureListener 不适用于 android:autoLink="email"

> ID：12638512
> 
> 赞同：1
> 
> 时间：2012-09-28T10:45:44.530
> 
> 标签：android

这是我的布局 xml 文件。

```
 ...
<RelativeLayout 
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:id="@+id/rlt" >

    <TextView
    android:id="@+id/title_text"
    android:layout_height="wrap_content"
    android:layout_width="wrap_content" 
    android:textSize="22dp"
    android:layout_centerHorizontal="true"
    android:textColor ="#add8e6"
    />  

<TextView 
 android:id="@+id/description"   
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:layout_below="@+id/tatle_text"
 android:layout_marginTop="45dp"
 android:textColor = "#e3e4fa"
 android:autoLink="email"
 android:textColorLink="#fdd017"
  />
     ...
     ...
     ...
     ... 
```

这是我的`onFling()`：

```
 SimpleOnGestureListener simpleOnGestureListener
           = new SimpleOnGestureListener(){
          public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
           float velocityY) {
          // TODO Auto-generated method stub

             final float xDistance = Math.abs(e1.getX() - e2.getX());
              final float yDistance = Math.abs(e1.getY() - e2.getY());

              if(xDistance > gs.swipe_Max_Distance || yDistance > gs.swipe_Max_Distance)
              return false;
               Log.v("Help_developers", "Flinging baby!");
              velocityX = Math.abs(velocityX);
              velocityY = Math.abs(velocityY);
                    boolean result = false;

              if(velocityX > gs.swipe_Min_Velocity && xDistance > gs.swipe_Min_Distance){
               if(e1.getX() > e2.getX()) // right to left
               { //Slide to Help_app
                   Intent i=new Intent(Help_developers.this,Help_app.class);
                   startActivity(i);
                finish();
               }
               else
               {
                 //Slide to Help_qanda
                   Intent i=new Intent(Help_developers.this,Help_pending.class);
                   startActivity(i);
               finish();
               }

               result = true;
              }

               return result;
         }
    });
 final GestureDetector gestureDetector
       = new GestureDetector(simpleOnGestureListener);
      rlt.setOnTouchListener(new View.OnTouchListener()
         {
                public boolean onTouch(View view, MotionEvent event) {
                    Log.d("test", "clicked!");
                    if(gestureDetector.onTouchEvent(event))  {
                        Log.d("test", "gesture detected");
                        return true;
                    }

                    return false;
                }
            }); 
```

rlt 是 RelativeLayout 的 id `rlt`。
现在**onFling()**中的投掷不适用于带有 id 的文本视图中的**属性 android:autoLink="email"**`description`。但是当我删除该属性时，一掷千金。我不知道为什么会这样。该属性如何影响投掷手势？
**编辑**
本身 的 onTouch()`GestureListener`没有被调用。日志永远不会记录在 logcat 中。当属性 android:autoLink="email" 存在时。

**完整的布局 XML 文件：**

```
 <?xml version="1.0" encoding="utf-8"?>
    <ScrollView xmlns:android="http://schemas.android.com/apk/res/android" 
                 xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

     <RelativeLayout 
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
     android:id="@+id/rlt" >

        <TextView
        android:id="@+id/title_text"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content" 
        android:textSize="22dp"
        android:layout_centerHorizontal="true"
        android:textColor ="#ffffff"

        />  

    <TextView 
     android:id="@+id/description"   
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:layout_below="@+id/tatle_text"
     android:layout_marginTop="45dp"
     android:textColor = "#e3e4fa"
     android:autoLink="email"
     android:textColorLink="#fdd017"
     android:
      />
<View
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:id="@+id/rlt_touch" />

    <Button
            android:id="@+id/Home"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:background="@drawable/home"
            android:text="Home"
          />

    </RelativeLayout>

    </ScrollView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T03:13:35.280

[与其在我的第一个答案](https://stackoverflow.com/a/12713176/1023092)中关闭 TextView 中的触摸处理，我们可以添加一个透明 View（作为 RelativeLayout 的最顶层子项）来捕获触摸事件，以便我们可以有选择地将相关事件转发到 TextView，同时仍然获得检测手势的所有事件：

*   修改 XML 布局，添加抓屏 View：

    ```
    ...
    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:id="@+id/rlt">

        <TextView
            android:id="@+id/title_text"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:textSize="22dp"
            android:layout_centerHorizontal="true"
            android:textColor="#add8e6"
            android:background="#ff0000" />

        <TextView
            android:id="@+id/description"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_below="@id/title_text"
            android:layout_marginTop="45dp"
            android:textColor="#e3e4fa"
            android:textColorLink="#fdd017"
            android:autoLink="email" />

        <!-- our touch-capturing view -->
        <View
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:id="@+id/rlt_touch" />

    </RelativeLayout>
    ... 
    ```

*   修改 Java 代码，将我们的 OnTouchListener 设置为添加的`rlt_touch`View 并添加事件转发代码：

    ```
    final View rt = findViewById(R.id.rlt_touch);
    final TextView tv = (TextView) findViewById(R.id.description);

    rt.setOnTouchListener(new OnTouchListener() {
        final Rect r = new Rect();
        final Point p1 = new Point();
        final Point p2 = new Point();

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            Log.d("test", "clicked!");

            if (gestureDetector.onTouchEvent(event)) {
                Log.d("test", "gesture detected");
            }

            // offset touch location into the TextView and forward it if relevant
            rt.getGlobalVisibleRect(r, p2);
            tv.getGlobalVisibleRect(r, p1);
            event.offsetLocation(p2.x - p1.x, p2.y - p1.y);
            if (r.contains((int) event.getRawX(), (int) event.getRawY())) {
                tv.onTouchEvent(event);
            }

            return true;
        }
    }); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T16:53:12.557

TextView 上的设置`android:autoLink="email"`将使其开始使用触摸事件，影响您的 OnTouchListener 是否会获得提供给它的事件。

您可以尝试以下一些更改，以便您始终获得事件：

*   将`android:linksClickable`TextView 上的属性设置为 false：

    ```
    ...
    android:autoLink="email"
    android:linksClickable="false"
    ... 
    ```

*   修改您的 OnTouchListener 以始终返回 true：

    ```
    rlt.setOnTouchListener(new OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            Log.d("test", "clicked!");
            if (gestureDetector.onTouchEvent(event)) {
                Log.d("test", "gesture detected");
            }
            return true;
        }
    }); 
    ```

# gradle - 为什么我的 Gradle 测试会重复运行？

> ID：12638514
> 
> 赞同：2
> 
> 时间：2012-09-28T10:45:49.213
> 
> 标签：gradle

我有一个非常标准的 Gradle 构建，它正在构建一个 Java 项目。

当我第一次运行它时，它会编译所有内容并运行测试。当我第二次运行它而不更改任何文件时，它会再次运行测试。

根据[这个线程](http://gradle.1045684.n5.nabble.com/how-does-gradle-decide-when-to-run-tests-td3314172.html)，Gradle 应该默认是懒惰的，如果没有任何变化，也不会打扰运行测试。此处的默认行为是否已更改？

编辑：

如果我`gradle test`重复运行，测试只运行第一次，随后被跳过。但是，如果我`gradle build`重复运行，测试每次都会重新运行，即使所有其他任务都标记为最新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T12:19:52.523

gradle uptodate 检查在信息级别上记录为什么任务不被认为是最新的。请重新运行“gradle build -i”以在检查日志输出时使用信息日志运行。

干杯，勒内

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T13:36:33.267

好的，多亏了 Rene 提示我查看“-i”输出，我得到了答案……

我实际上有 2 个测试任务：来自 Java 插件的“测试”任务，以及我自己的“集成测试”任务。我没有在问题中提到这一点，因为我认为这无关紧要。

事实证明，这些任务正在将它们的输出（报告等）写入同一个目录，因此 Gradle 的基于任务的输入和输出跟踪认为某些事情发生了变化，并重新运行测试。

所以下一个问题（我将单独问）变成：我如何干净地（并且使用最少的 Groovy/Gradle 代码）完全分离测试任务的两个实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T15:55:49.820

您需要在 build.gradle 中创建测试任务，然后调用这些特定任务来运行一组特定的测试。这是一个示例，它将过滤掉类，以便它们不会运行两次（例如在运行一个套件然后独立地重新运行其子类时）：

```
tasks.withType(Test) {
    jvmArgs '-Xms128m', '-Xmx1024m', '-XX:MaxPermSize=128m'
    maxParallelForks = 4  // this runs tests parallel if more than one class
    testLogging {
        exceptionFormat "full"
        events "started", "passed", "skipped", "failed", "standardOut", "standardError"
        displayGranularity = 0
    }   
}
task runAllTests(type: Test) {
    include '**/AllTests.class'
    testReportDir = file("${reporting.baseDir}/AllTests")
    testResultsDir = file("${buildDir}/test-results/AllTests")
}
task runSkipSuite(type: Test) {
    include '**/Test*.class'
    testReportDir = file("${reporting.baseDir}/Tests")
    testResultsDir = file("${buildDir}/test-results/Tests")
} 
```

另外，关于您的构建问题。“构建”任务包括一个清理步骤，即清理构建目录中的测试。否则执行认为测试已经运行。

# html - ApplicationCache 不会缓存任何东西

> ID：12638515
> 
> 赞同：1
> 
> 时间：2012-09-28T10:45:52.787
> 
> 标签：html, application-cache

我正在尝试使网络应用程序在离线时可见。

*   我`index.html`像这样引用清单：`<!DOCTYPE html manifest="manifest.appcache">`
*   MIME 类型正确：my `.htaccess`has`AddType text/cache-manifest .appcache`

这`manifest.appcache`看起来像：

```
CACHE MANIFEST
# 2012-09-28:v1

CACHE:
style.css
images/logo.png 
```

但是，没有缓存任何内容。

当我`applicationCache.status`在 javascript 控制台中调用时，它会返回（我认为如果成功`0`应该返回）。在 Chrome 中，查看还显示没有应用程序缓存。`1`
`chrome://appcache-internals/`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:13:33.147

好吧，那太愚蠢了。这是我做错的事情：

```
<!DOCTYPE html manifest="manifest.appcache"> 
```

应该是：

```
<!DOCTYPE html>
<html manifest="manifest.appcache"> 
```

# vb6 - 在 Windows Server 2003 SP2 上的 VB6 中使用 ADODB 时出现致命错误

> ID：12638516
> 
> 赞同：0
> 
> 时间：2012-09-28T10:45:53.057
> 
> 标签：vb6, windows-server-2003, virtualization, adodb, fatal-error

我们有一个旧版应用程序 (VB6)，它在旧的 Windows Server 2003 机器上运行良好，并且已经使用了很多年。最近我们不得不把它移动到一个不同的物理位置，在这个过程中，我们用虚拟化**克隆了这个盒子并将它放在其他地方。**

理论上这两个环境应该是相同的。

然而，在新盒子上，应用程序在`RecordCount`调用`ADODB.Recordset`. 应该说之前就可以成功读取`ADODB.RecordSet.Properties.Count` 属性没有问题了。

事件查看器报告以下内容：

> 事件类型：错误事件源：应用程序错误事件类别：(100) 事件 ID：1000 日期：28/09/2012 时间：11:15:27 用户：N/A 计算机：APP01 描述：错误应用程序 Control.exe，版本1.0.0.6，故障模块ntdll.dll，版本5.2.3790.4789，故障地址0x0002c6e4。

我只能想象在虚拟化环境中使用 ADODB 会出现问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T09:35:09.063

该问题是由在设置连接时在**ODBC 数据源管理器中使用不同的驱动程序引起的。**

以前我们使用**Microsoft ODBC for Oracle**驱动程序，但是当我们在新服务器上手动设置此连接时，我们错误地选择了不同的连接（由 Oracle 客户端提供）。

解决方法是确保您使用完全相同的驱动程序。

![在此处输入图像描述](../Images/7797c1871889c2b52b62c369ec79c81a.png)

# android - Android 资源大小限定符

> ID：12638518
> 
> 赞同：1
> 
> 时间：2012-09-28T10:45:57.087
> 
> 标签：android, resources, qualifiers

我无法从“values-sw480dp”获取值，也无法在我的 480 x 854 的索尼 Xperia 设备上获取值，也无法在 600 x 1024 的三星银河选项卡上获取值。但能够在 1280 x 752 的摩托罗拉 Xoom 上获取值。

*例如 res/values-sw480dp/strings.xml/*

```
<string name="hello_world">hello world</string> 
```

各个设备上的值

索尼 Xperia ----> @2131034113

三星---->@2131034113

在 xoom ---> 你好世界

谁能解释我这种行为，为什么索尼 Xperia 和三星有“@2131034113”的价值。

先感谢您

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T10:58:50.490

根据[http://developer.android.com/guide/topics/resources/providing-resources.html](http://developer.android.com/guide/topics/resources/providing-resources.html)， sw480dp 表示«屏幕的最小边必须至少为 480 dp»。现在是“160 dpi 屏幕上的像素”，所以我猜`dp`Xperia 的实际大小是320 x 569（假设它是 hdpi 设备）。`dp`

要获得设备屏幕尺寸，`dp`您需要知道抽象密度类（ldpi=120、mdpi=160、hdpi=240、xhdpi=320）。对于上面的 Xperia 屏幕，计算是：`(480*160/240) x (854*160/240)`，其中 160 是基本密度（其中 1`dp`实际上等于一个像素），而 240 是设备抽象密度。

# mysql - 选择查询以获取 rails 中的值元组

> ID：12638519
> 
> 赞同：1
> 
> 时间：2012-09-28T10:46:02.383
> 
> 标签：mysql, sql, ruby-on-rails, database

对象具有以下值：-

```
 valA   valB
  1      1
  1      3
  1      4
  1      5
  2      3
  2      6
  3      7 
```

假设 valA 的不同值是 m，而 valB 是 n。（米<

```
 Objects.each do|var|
      X.where("a = ? AND b = ?",var.valA,var.valB).first 
```

这会触发对 valA 和 valB 的每个值组合的查询。

我想触发一个查询来获取所有记录并处理它们。我该怎么做？

PS：在最坏的情况下，我可以触发 m 个查询，每个 valA 一个，并使用 IN 查询 valB 值。

**编辑**：- 目前，将为 valA 和 valB（此处为 7）的每个组合触发一个查询，并且将处理每个对象（X）。我只想触发一个查询（使用 valA 和 valB 的值元组或其他方法），以便从 X 中获取所有对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:50:23.993

```
X.select("MIN(id)").group("valA, ValB") 
```

# c - 使用 printf，将两个字符串左右对齐到给定长度

> ID：12638520
> 
> 赞同：5
> 
> 时间：2012-09-28T10:46:04.123
> 
> 标签：c, bash, printf, justify, text-justify

在 C 或 Bash shell 中使用 printf，如何将两个字符串（字符数组）左右对齐到给定长度？

例如，如果字符串是“堆栈”和“溢出”，并且长度是 20 个字符，我希望打印

```
stack-------overflow 
```

（为清楚起见，每个空格都显示为破折号）。

字符串的长度未知。如果总长度 + 1 超过给定的长度，是否可以从任一给定方向截断一个或两个字符串并在它们之间留一个空格？例如，如果长度是 10，我们可以得到其中的任何一个吗？

```
stack-over
stack-flow
s-overflow
k-overflow 
```

我知道 printf("%10s", string) 将一个字符串向右对齐， printf("%-10s", string) 将一个字符串向左对齐，但找不到一种方法来证明 2 个字符串，或截断它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T01:36:18.263

这比电池长，但恕我直言，它可以更好地分开琴弦。它还在可能的情况下使用 printf 进行截断，仅针对第二个参数的左手截断回退到其他机制。

重击：

```
truncat () {
  local len=$1 a=$2 b=$3 len_a=${#2} len_b=${#3}
  if ((len <= 0)); then return
  elif ((${len_b} == 0)); then
    printf %-${len}.${len}s "$a"
  elif ((${len_a} == 0)); then
    printf %${len}.${len}s "${b: -$((len<len_b?len:len_b))}"
  elif ((len <= 2)); then
    printf %.${len}s "${a::1}${b: -1}"
  else
    local adj_a=$(((len_a*len+len_b-len_a)/(len_a+len_b)))
    local adj_b=$(((len_b*len+len_a-len_b-1)/(len_a+len_b)))
    printf "%-${adj_a}.${adj_a}s %${adj_b}.${adj_b}s" \
           "$a" \
           "${b: -$((len_b<adj_b?len_b:adj_b))}"
  fi
} 
```

C：

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <unistd.h>

void truncat(long len, const char* a, const char* b) {
  if (len <= 0) return;
  unsigned long long len_a = strlen(a);
  unsigned long long len_b = strlen(b);
  if (!len_b)
    printf("%-*.*s", (int)len, (int)len, a);
  else if (!len_a)
    printf("%*s", (int)len, b + (len < len_b ? len_b - len : 0));
  else if (len <= 2)
    printf("%.1s%.*s", a, (int)(len - 1), b + len_b - 1);
  else {
    unsigned long long adj_a = (len_a * len + len_b - len_a) / (len_a + len_b);
    unsigned long long adj_b = (len_b * len + len_a - len_b - 1) / (len_a + len_b);
    printf("%-*.*s %*s",
           (int)adj_a, (int)adj_a, a,
           (int)adj_b, b + (adj_b < len_b ? len_b - adj_b : 0));
  }
}

int main(int argc, char** argv) {
  truncat(atol(argv[1]), argv[2], argv[3]);
  return 0;
} 
```

样本输出：

```
$ for i in {0..20}; do printf "%2d '%s'\n" $i "$(./truncat $i stack overflow)"; done
 0 ''
 1 's'
 2 'sw'
 3 's w'
 4 's ow'
 5 'st ow'
 6 'st low'
 7 'st flow'
 8 'sta flow'
 9 'sta rflow'
10 'stac rflow'
11 'stac erflow'
12 'stac verflow'
13 'stack verflow'
14 'stack overflow'
15 'stack  overflow'
16 'stack   overflow'
17 'stack    overflow'
18 'stack     overflow'
19 'stack      overflow'
20 'stack       overflow' 
```

免责声明：算术可能会溢出，在这种情况下输出将是错误的（或者，如果您可以将 strlen(a)+strlen(b) 安排为正好 2^64 字节，则程序将 SIG_FPE）。如果有人关心，我可以为 adj_a 和 adj_b 计算提供解释。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T11:03:30.887

您将不得不编写自己的函数来做到这一点。这是一个没有和一个容易截断的例子。对于截断，您需要定义一些规则来作为截断的基础。

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

void concat(const char* str1, const char* str2, char *result, int len)
{
   int str1len = strlen(str1);
   int str2len = strlen(str2);
   memset(result, ' ', len);
   if(!(str1len + str2len > len))
   {
      memcpy(result, str1, str1len);
      memcpy(result + len - str2len, str2, str2len);
      result[len] = '\0';
   }
   else
   {
      memcpy(result, str1, 1);
      memcpy(result + len - str2len, str2, str2len);
      result[len] = '\0';
   }
}

int main()
{
   char str1[] = "stack";
   char str2[] = "overflow";
   int len = 20;
   char* result = malloc(len + 1);
   int len2 = 10;
   char* result2 = malloc(len2 + 1);

   concat(str1, str2, result, len);

   printf("%s\n", result);

   concat(str1, str2, result2, len2);

   printf("%s\n", result2);

   free(result);
   free(result2);

   return 1;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T10:54:21.917

我不认为你可以在一次操作中做到这一点，尤其是截断部分。请注意，在 C 中，例如`printf("%2s", "hello");`不会截断。字段宽度仅对填充目的很重要，而不是截断*。*

您可能需要实现一个自定义函数来执行此操作，在 C 中是这样的：

```
void format_pair(char *out, size_t out_max, const char *s1, const char *s2); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T11:12:45.160

在 Bash 中：

```
#!/bin/bash

function justify_two_strings {
    a=$1; shift;
    b=$1; shift;
    len=$1; shift;

    while [[ $(( ${#a} + ${#b} + 1 )) -gt $len ]]; do
        a=${a:0:-1}     # cut the last character of $a
        b=${b:1}        # cut the first character of $b
    done

    printf "%s%$(( len-${#a} ))s\n" $a $b
}

justify_two_strings 'stack' 'overflow' 20   # prints 'stack       overflow'
justify_two_strings 'stack' 'overflow' 10   # prints 'sta erflow' 
```

`while`如果字符串不合适，您可能需要调整循环的核心以不同方式缩短字符串。

一些提示：

*   `${#a}`给出长度`$a`
*   `${a:s:n}`从索引开始返回`n`字符（从 0 开始）。如果省略，则返回直到字符串结尾的所有内容。`$a``s``n`

# objective-c - 实现搜索栏 iOS 6 表格视图静态单元格

> ID：12638522
> 
> 赞同：0
> 
> 时间：2012-09-28T10:46:06.623
> 
> 标签：objective-c, ios, uisearchbar, xcode4.5

我试图在静态单元格表​​视图上实现搜索栏。

我对 UITableview 控制器进行了子类化，`Search Bar and Search Display Controller`在 .h 中声明并设置了`<UISearchDisplayDelegate>`

现在我不确定在我的 .m 文件中下一步该做什么，我看过的教程都指的是原型单元，我似乎无法根据我的要求调整代码。我还查看了 Apple 的示例代码

我的最终结果是从搜索栏中搜索页面上的单元格。我的搜索栏会显示行，但不会根据搜索对它们进行排序。此外，当返回到表格视图时，它似乎在图形上已损坏。

使用 Xcode 4.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T13:11:29.037

这个问题有很多问题。以下是一些提示：

将搜索栏添加到表头

```
self.tableView.tableHeaderView = self.searchBar; 
```

默认隐藏，向下滚动时会出现

```
[self.tableView setContentOffset:CGPointMake(0, 44)]; 
```

至于搜索/过滤表格。您需要的是指向数据数组的表数据源方法。您还需要保留另一个完整数据列表的数组。在搜索时，调用如下方法：

```
 - (void) performSearchWithText:(NSString *)searchText {
       if ([searchText length] > 0) {
            NSPredicate *predicate = [NSPredicate predicateWithFormat:@"cell contains[cd]   %@", searchText]; 
            NSArray *filteredArray = [self.allData filteredArrayUsingPredicate:predicate];
            self.tableData = [NSArray arrayWithArray:filteredArray];
            [self.tableView reloadData];
        } else {
            self.tableData = self.allData;
            [self.tableView reloadData];   
        }
    } 
```

# wpf - 从后面的代码中设置 Columndefinition 宽度

> ID：12638524
> 
> 赞同：0
> 
> 时间：2012-09-28T10:46:08.843
> 
> 标签：wpf, listview, datatemplate

我需要根据在后面的代码中完成的一些计算，在数据模板中为列表视图设置列定义的宽度。所以我得到了这个：

```
<DataTemplate x:Key="dataTemplateForListview">
        <Border>
        <Grid>                
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="80" x:Name="gridColumnGraph" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
         ...
        </Grid>
       </Border>
</DataTemplate> 
```

此数据模板作为 ItemTemplate 绑定到 ListView。如何访问“gridColumnGraph”？在显示列表视图之前，我需要此访问权限 - 而不是在选择项目时。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:55:12.493

使用数据绑定将 Columndefinition.Width-Property 绑定到代码隐藏或 ViewModel 中的属性之一。

确保您的 ViewModel 继承自 INotifyPropertyChanged。创建一个调用 PropertyChanged-Event 的方法：

```
public event PropertyChangedEventHandler PropertyChanged;
protected virtual void OnPropertyChanged(string propertyName)
{
    PropertyChangedEventHandler handler = PropertyChanged;
    if (handler != null)
    {
        var e = new PropertyChangedEventArgs(propertyName);
        handler(this, e);
    }
} 
```

创建属性：

```
private double _cdWidth;
public double CDWidth
{
    get { return _cdWidth; }
    set { _cdWidth= value; OnPropertyChanged("CDWidth"); }
} 
```

绑定到属性：

```
<ColumnDefinition Width={Binding Path=CDWidth}/> 
```

将 DataContext 设置为 ViewModel：

```
this.DataContext = new ViewModel(); 
```

在代码隐藏中更改 CDWidth：

```
ViewModel vm = (ViewModel)this.DataContext;
vm.CDWidth = 10; 
```

# vb.net - 从文本框控件的多个实例将文本写入文件

> ID：12638526
> 
> 赞同：0
> 
> 时间：2012-09-28T10:46:19.283
> 
> 标签：vb.net, visual-studio-2010, text, textbox, text-files

我有以下代码

```
Private Sub Button5_Click(sender As System.Object, e As System.EventArgs) Handles Button5.Click
                textbox = New TextBox

                textbox.Size = New Size(50, 50)
                If Controls.Count > 0 Then
                    TextBox.Top = Controls(Controls.Count - 1).Bottom

                End If

                Me.SplitContainer2.Panel1.Controls.Add(textbox)
 End Sub 
```

这样做是一个接一个地添加文本框的实例。

下一个将文本文件写入我的系统。

```
Private Sub Button6_Click_1(sender As System.Object, e As System.EventArgs) Handles Button6.Click
        Dim FILE_NAME As String = "C:\Users\Pantheo\test2.txt"

        If File.Exists(FILE_NAME) = True Then

            Dim objWriter As New System.IO.StreamWriter(FILE_NAME)

            objWriter.Write(textbox.Text)
            objWriter.Close()
            MsgBox("Text written to file")

        Else

            MsgBox("File Does Not Exist")

        End If
    End Sub 
```

但是它只写入最后一个控件的值。例如，如果我创建了 2 个文本框，通过单击 Button5 两次，test2.txt 仅包含来自第二个文本框而不是第一个文本框的 .Text 值

有没有办法将每个文本框中的 .Text 值写入同一个文本文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T09:53:08.483

如果我看到这一点，您正在做的就是每次单击 button5 在您的文本框（新文本框）上创建一个新实例，该实例肯定只会保存用它生成的最后一个实例。尝试将您的实例添加到集合中，然后遍历它们

# openlayers - 单击矢量图层中的要素时无法拖动地图

> ID：12638527
> 
> 赞同：4
> 
> 时间：2012-09-28T10:46:26.130
> 
> 标签：openlayers

我有一个带有平铺层和矢量层的 OpenLayers 地图。矢量图层有一个 OpenLayers.Control.SelectFeature，用于在鼠标悬停在某个要素上时显示工具提示。不幸的是，如果单击并拖动功能，这似乎会阻止地图移动。

查看 OpenLayers 代码，SelectFeature 只是将点击扔掉，因为 hover 设置为 true。有没有办法将点击事件传递到地图上以便可以移动它？

我很确定 SelectFeature 是问题的原因，因为当我将其注释掉时，拖动按预期工作。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-01T08:50:14.867

不太明白这个问题，但也许这会有所帮助：

```
selectControl.handlers.feature.stopDown = false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-12T11:54:55.093

选择功能

```
selectFeatureControl = new OpenLayers.Control.SelectFeature(layer,{
   onSelect: onFeatureSelect, 
   onUnselect: onFeatureUnselect
}); 
```

您可以添加此代码以使其在单击功能并拖动时可拖动

```
if (typeof(selectFeatureControl.handlers) != "undefined") { // OL 2.7
    selectFeatureControl.handlers.feature.stopDown = false;
} else if (typeof(selectFeatureControl.handler) != "undefined") { // OL < 2.7
    selectFeatureControl.handler.stopDown = false; 
    selectFeatureControl.handler.stopUp = false; 
} 
```

# asp.net - 在 VB.NET 中使用 EWS 创建约会，我缺少什么？

> ID：12638535
> 
> 赞同：0
> 
> 时间：2012-09-28T10:46:42.953
> 
> 标签：asp.net, vb.net, visual-studio-2008, exchangewebservices

您好，我想向其他成员发送日历邀请，我如何在 vb.net 中做到这一点，我添加了交换网络参考，并且可以向其他人发送普通邮件。

这是我到目前为止所拥有的

```
 Public Sub Einladungen()
        Dim esb As New ExchangeServer.ExchangeServiceBinding
        esb.Credentials = New NetworkCredential(Session("EX_UserName").ToString, Session("EX_Password").ToString)
        esb.Url = Session("EX_DomainURL")

        Dim appointment As CalendarItemType = New CalendarItemType

        ' Set properties on the appointment.
        appointment.Subject = "Dentist Appointment"
        appointment.Body = New BodyType
        appointment.Body.BodyType1 = BodyTypeType.Text
        appointment.Body.Value = "Agenda Items...."
        appointment.Start = New DateTime(2012, 3, 1, 9, 0, 0)
        appointment.End = appointment.Start.AddHours(2)

        appointment.Location = "Conf Room"
        appointment.RequiredAttendees.Add("user1@contoso.com")
        appointment.RequiredAttendees.Add("user2@contoso.com")
        appointment.OptionalAttendees.Add("user3@contoso.com")
        ' Save the appointment.
        appointment.Save(SendInvitationsMode.SendToAllAndSaveCopy)
    End Sub 
```

Visual Studio 告诉我：

> 添加不是“System.Array”的成员

和

> “保存”不是“ExchangeServer.CalendarItemType”的成员

和

> 未声明名称“SendInvitationMode”

我错过了什么？

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:10:39.010

问题是您通过直接引用 Exchange Web 服务创建了自己的 EWS 代理类，但您找到的示例代码是使用[Exchange Web Service Managed API](http://msdn.microsoft.com/en-us/library/exchange/jj220499%28v=exchg.80%29.aspx)构建的。

因此，您应该[下载 EWS Managed API](http://www.microsoft.com/en-us/download/details.aspx?id=30141)，添加对 Microsoft.Exchange.WebServices.dll 的引用，并将代码的开头更改为类似于以下内容：

```
Dim esb As New ExchangeService(ExchangeVersion.Exchange2007_SP1);
esb.Credentials = New NetworkCredential(Session("EX_UserName").ToString, Session("EX_Password").ToString)
esb.Url = Session("EX_DomainURL")

Dim appointment As new Appointment(esb);
// ... the rest of your code here. 
```

您可能想看看这个例子： http: [//msdn.microsoft.com/en-us/library/exchange/dd633661 (v=exchg.80).aspx](http://msdn.microsoft.com/en-us/library/exchange/dd633661(v=exchg.80).aspx)

# c++ - 在持有 boost::interprocess 共享内存锁时处理核心转储

> ID：12638537
> 
> 赞同：1
> 
> 时间：2012-09-28T10:47:04.180
> 
> 标签：c++, boost-interprocess

我正在开发几个多线程进程试图获取通过 boost::interprocess (named_mutex 上的 scoped_lock) 管理的共享内存文件的锁的应用程序。

看起来，如果其中一个进程在持有共享内存文件的锁的同时转储了一个核心，那么所有其他进程最终都会等待这个锁被释放。

关于如何克服这个问题的任何想法？我想确保当持有锁的进程死亡时，它应该确保锁被释放。

我看到的一个问题是我没有调用 named_mutex 对象的析构函数。这可能是这个问题的原因吗？进程核心转储时是否保证调用析构函数？

谢谢！

# php - facebook OAuthException：必须使用活动访问令牌来查询有关当前用户的信息

> ID：12638543
> 
> 赞同：2
> 
> 时间：2012-09-28T10:47:26.300
> 
> 标签：php, codeigniter, facebook-php-sdk

facebook Uncaught OAuthException的可能重复[：必须使用活动访问令牌来查询有关当前用户的信息](http://facebook.stackoverflow.com/questions/6034813/facebook-uncaught-oauthexception-an-active-access-token-must-be-used-to-query-i)

但我没有得到适当的解决方案。

我正在使用带有 codeigniter 的 facebook sdk，它工作正常。但有时它会抛出异常 OAuthException：必须使用活动访问令牌来查询有关当前用户的信息。

这是控制器文件的代码

```
$config = array(
                    'appId'  => 'XXXXXXX',
                    'secret' => 'XXXXXXXXXXXXXXXXXXXXXXXXXX',
                    'fileUpload' => true,
              );

$this->load->library('facebook/Facebook', $config);

$fbme = null;

$user = $this->facebook->getUser();

if ($user) {
    try {               
        $fbme = $this->facebook->api('/me');
    } catch (FacebookApiException $e) {
          error_log($e);
          $user = null;
    }
}

//if user is logged in and session is valid.
if ($fbme){
              //do some stuff...
              //redirecting to user home page (my site's)
    } 
```

在视图文件中，我使用的是 js sdk。查看文件的代码是

```
<div id="fb-root"></div>
    <script type="text/javascript">
        var button2;

        window.fbAsyncInit = function() {
            FB.init({ appId: 'XXXXXXXX',
                status: true,
                cookie: true,
                xfbml: true,
                oauth: true});

           function updateButton(response) {
                button1 = document.getElementById('fb-login'); //login button
                button2 = document.getElementById('fb-logout'); //logout button
                if (response.authResponse) {
                    //user is already logged in and connected
                                button2.onclick = function() {
                                    FB.logout(function(response) {});
                                };
            } else {
                    //user is not connected to your app or logged out
                    button1.onclick = function() {
                        FB.login(function(response) {
                            if (response.authResponse) {
                            } else {
                                //user cancelled login or did not grant authorization
                            }
                        }, {scope:'email,user_birthday,user_about_me,user_likes,user_interests,user_education_history,user_work_history'});
                    }
                }
            }

            // run once with current status and whenever the status changes
            FB.getLoginStatus(updateButton);
            FB.Event.subscribe('auth.login', function(response) {
                window.location.reload();
            });
            FB.Event.subscribe('auth.logout', function(response) {
                window.location.reload();
            });
        };
        (function() {
            var e = document.createElement('script'); e.async = true;
            e.src = document.location.protocol
                + '//connect.facebook.net/en_US/all.js';
            document.getElementById('fb-root').appendChild(e);
        }());       
    </script> 
```

**问题：**

有时它会抛出“OAuthException：必须使用活动访问令牌来查询有关当前用户的信息。” 到错误日志文件。

**案例：用户登录 facebook 并且已经验证了我的应用程序** 如果用户登录 facebook 并验证了我的应用程序并尝试登录到我的网站，而不是将用户重定向到我的网站（php sdk 在这种情况下不起作用） ，它正在加载视图文件。在视图文件中，我也在检查用户是否在 facebook 中登录。（在视图中）如果用户登录它将重新加载页面，相同的控制器脚本将运行并将用户重定向到用户的主页（在这种情况下 php sdk 正在工作。）。

但第一次它不起作用。不知道我在哪里犯错误。

此外，注销按钮（在视图文件中）有时也不起作用。单击它的意思是不会从 facebook 注销用户。（这只发生在我同事的一个浏览器中。她在 Windows 7 中使用 chrome）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T02:11:44.753

我在一起使用 PHP-SDK + JS-SDK 时遇到了类似的问题。我通过删除 FB.init **"cookie:true"**选项暂时解决了这个问题。

由于某种我找不到的原因，在 PHP 和 JS 之间共享了一个无效的**signedRequest** cookie，然后，PHP 会话的有效 access_token 被无效的 access_token 覆盖，从而破坏了以前有效的 PHP 令牌。

我的问题和您的问题之间的区别在于您正在通过 JS 登录并尝试在 PHP 上访问相同的会话（我正在向后做，登录 PHP 并尝试使用 JS-SDK）。

此错误显然已在此拉取请求中得到修复： [https ://github.com/facebook/facebook-php-sdk/pull/48](https://github.com/facebook/facebook-php-sdk/pull/48)

# android - 将自定义对象列表传递给活动：可打包还是可序列化？

> ID：12638545
> 
> 赞同：1
> 
> 时间：2012-09-28T10:47:37.850
> 
> 标签：android

来自安卓文档：

> 注意：看到 Parcelable 可能会引发问题，为什么 Android 不使用内置的 Java 序列化机制？事实证明，Android 团队得出的结论是，Java 中的序列化速度太慢，无法满足 Android 的进程间通信要求。因此，该团队构建了 Parcelable 解决方案。Parcelable 方法要求您显式序列化类的成员，但最终，您可以更快地序列化对象。

**所以我们知道 Parcelable 实际上比 Serializable 更好，**但另一方面，

> 还要意识到 Android 提供了两种机制，允许您将数据传递给另一个进程。第一种是使用意图将捆绑包传递给活动，第二种是将 Parcelable 传递给服务。这两种机制不可互换，不应混淆。也就是说，Parcelable 并不意味着传递给活动。**如果您想启动一个活动并传递一些数据，请使用捆绑包。Parcelable 仅用作 AIDL 定义的一部分**。

**好的，但是我需要将自定义对象列表传递给我的活动！因此，我仍然必须将可打包或可序列化的对象放入捆绑包中！**

现在我这样做了：

```
public class MyObject implements Serializable{ 
```

并通过：

```
 Bundle b = new Bundle();
 b.putSerializable("objList", anArrayListWithMyObjectElements);
 intent.putExtra("objList", b); 
```

由于 ArrayList 也实现了 Serializable 它工作正常...但我看不出以这种方式使用捆绑包的意义...但是 android 告诉我不要使用 Parcelable 进行活动通信...正确答案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T10:51:46.817

根据我的经验，我强烈建议尽可能使用`Parcelable`IPC，无论是否使用 IPC。*它实际上*是 Android对 Java 的替代品`Serializable`，而且更加优化。

如果您需要有关如何包裹物品的帮助，请告诉我。

# wordpress - 如何翻译任何语言的 WordPress 插件？

> ID：12638547
> 
> 赞同：5
> 
> 时间：2012-09-28T10:47:50.603
> 
> 标签：wordpress, language-translation

我已经完成了我的插件，现在想为我的用户提供多语言功能。我对此进行了研究，但很难实施。

我看过[WordPress 翻译](http://codex.wordpress.org/Translating_WordPress)，但需要基本步骤来遵循和翻译我的插件。

**我做了这些**

1.  下载了 POEdit。
2.  在插件目录中创建了“french.po”文件
3.  遵守“french.po”->“french.mo”

**需要做**

1.  如何在 po 文件中定义**msgid**和**msgstr ？**
2.  如何在插件中加载 po/mo 文件？
3.  如何通过 po/mo 文件替换标签/文本？
4.  如何使用**`__e()`**&**`___()`**替换插件页面中的“msgstr”？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-28T15:18:03.713

使用名为[Codestyling Localization](http://wordpress.org/extend/plugins/codestyling-localization/)的插件，您无需使用 POEdit。

我将向您展示一个使用“localizationsample”作为文本域的示例。在这种情况下，语言文件位于 /lang/ 目录中。它们不需要是您实际插件中的那些名称；它们只是例子。

**脚步**

1.  在插件注释标题中添加这些行，以便 Codestyleing Localization 识别。

    文本域：localizationsample
    域路径：/lang

2.  `lang`在您的插件目录中创建一个名为的目录。

3.  安装并激活[Codestyleing 本地化](http://wordpress.org/extend/plugins/codestyling-localization/)插件。

4.  转到`Tools`->`Localization`

5.  找到你的插件并点击`Add New Language`

6.  在单选按钮中选择要本地化的语言（国家/地区），然后按`Create po-file`此时确保在 lang 文件夹中创建了一个 .po 文件。

7.  按`Rescan`->`scan now`这是推荐的，因为在我的系统中不这样做，插件总是显示错误，说“并非所有项目都使用相同的文本域”。

8.  按`Edit`这将为您带来另一个页面，其中列出了可翻译的消息。这些消息是传递给函数`__()`和`_e()`插件代码的消息。

9.  单击`Edit`旁边的表格，`Copy`您将看到一个对话框，为每条消息输入您的翻译。完成翻译。

10.  按`generate mo-file`此时，您应该会看到在`lang`文件夹中创建了一个 .mo 文件。

11.  更改您指定的语言环境`wp-config.php`以反映翻译。默认是`define('WPLANG', '');`

**示例插件**

```
/*  
    Plugin Name: Sample Localization
    Description: Demonstrates how to localize your plugin.
    Text Domain: localizationsample
    Domain Path: /lang
*/

// Localization
add_action('init', 'localizationsample_init');
function localizationsample_init() {
    $path = dirname(plugin_basename( __FILE__ )) . '/lang/';
    $loaded = load_plugin_textdomain( 'localizationsample', false, $path);
    if ($_GET['page'] == basename(__FILE__) && !$loaded) {          
        echo '<div class="error">Sample Localization: ' . __('Could not load the localization file: ' . $path, 'localizationsample') . '</div>';
        return;
    } 
} 

// Add Admin Menu 
add_action('admin_menu','localizationsample_menu');
function localizationsample_menu() { 
    add_options_page(
        'Localization Demo',            // admin page title
        'Localization Demo',            // menu item name
        'manage_options',               // access privilege
        basename(__FILE__),                         // page slug for the option page
        'localization_demo_adminpanel'  // call-back function name
    );
}
function localization_demo_adminpanel() {

    echo '<div class="wrap"><div id="icon-themes" class="icon32"></div>';
    echo '<h2>' . __('Hi there!', 'localizationsample') . '</h2>'; 
    echo '<p>';
    _e('Hello world!', 'localizationsample');
    echo '</p>';
    echo '</div>'; // end of wrap
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-27T13:33:18.830

（此示例是对 DEUTCH 的翻译。您可以将习惯更改为您想要的名称。）

在每个插件头中，都有一个唯一的名称。（例如：

```
/*
Plugin Name: my-pluginname
.......
*/ 
```

然后，在该插件的文件夹中，创建一个文件夹“语言”；

然后，在您的插件 .php 文件（在顶部的某处）中，插入初始化代码：

```
class load_language 
{
    public function __construct()
    {
    add_action('init', array($this, 'load_my_transl'));
    }

     public function load_my_transl()
    {
        load_plugin_textdomain('my-pluginname', FALSE, dirname(plugin_basename(__FILE__)).'/languages/');
    }
}

$zzzz = new load_language; 
```

然后打开任何文本编辑器，然后像这段代码一样插入（注意，我们只添加两个示例消息，“hello”和“bye”，因此，您可以使用类似的行添加任意数量的消息）。

```
# English translations for PACKAGE package.
# Copyright (C) 2012 THE PACKAGE'S COPYRIGHT HOLDER
# This file is distributed under the same license as the PACKAGE package.
# Automatically generated, 2012.
#
msgid ""
msgstr ""
"Project-Id-Version: my-pluginname 1.0\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2012-08-06 13:46-0400\n"
"PO-Revision-Date: 2013-03-21 11:20+0400\n"
"Last-Translator: Automatically generated\n"
"Language-Team: none\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=utf-8\n"
"X-Poedit-SourceCharset: iso-8859-1\n"
"Content-Transfer-Encoding: 8bit\n"
"Plural-Forms: nplurals=2; plural=(n != 1);\n"
"X-Generator: Poedit 1.5.4\n"

#: mypluginindex.php:87 (it is just a line of a note, to remind where our code appears)
msgid "mymessage1"
msgstr "Hello"

#: mypluginindex.php:88
msgid "mymessage2"
msgstr "Bye" 
```

然后将此文件保存为“my-pluginname-en_US.po”（注意，.po 是文件的扩展名，因此请检查您的文本编辑器程序是否未保存到“my-pluginname-en_US.po.TXT”）。

然后下载POEDIT软件，打开这个文件。然后编辑“翻译”字段，然后另存为“my-pluginname-de_DE”会生成两个文件（如果poEdit没有自动生成第二个.mo文件，只需转到文件->首选项->编辑器并检查显示“保存时自动编译 .mo 文件”的框），

然后将这两个文件放入“语言”文件夹中。

在此之后，打开 wp-config.php 并找到以下代码：

```
define ('WPLANG, ''); 
```

并更改为

```
define ('WPLANG, 'de_DE'); 
```

就这样。加载 wordperss 时，它将读取您的插件语言文件，前缀为 -de_DE。

所以，在插件的 .php 文件中，而不是：

```
echo "Something string"; 
```

你应该使用：

```
echo __("mymessage1", 'my-pluginname'); 
```

完成的。现在你应该测试你的插件。
psused 链接： [https://codex.wordpress.org/I18n_for_WordPress_Developers](https://codex.wordpress.org/I18n_for_WordPress_Developers)
[http://codex.wordpress.org/Translating_WordPress](http://codex.wordpress.org/Translating_WordPress)
[https://codex.wordpress.org/Writing_a_Plugin](https://codex.wordpress.org/Writing_a_Plugin)
[http://codex.wordpress.org/Installing_WordPress_in_Your_Language](http://codex.wordpress.org/Installing_WordPress_in_Your_Language)

# jquery - 火狐的错误

> ID：12638549
> 
> 赞同：0
> 
> 时间：2012-09-28T10:48:03.810
> 
> 标签：jquery

我已经在我的网站上添加了 fancybox 代码。我已经在 Chrome、Safari、Firefox、IE 和 Opera 中进行了测试。它在所有导航器中都可以正常工作，除非 Firefox。我不知道为什么，当我在 Firefox 中包含此代码时，我的网格图像会出现在网络之外。您可以在此处查看我参考的示例[http://www.tepui.cat/interiors/altells.html](http://www.tepui.cat/interiors/altells.html) 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T10:55:07.420

1.  在 css 中设置**#taulaImatges**为`"display: inline"`这样：

    > ```
    > #taulaImatges {
    >    display: inline;
    > } 
    > ```

    这修复了 FireFox 布局。

2.  您的脚本根本没有在所有浏览器中加载，因此请考虑检查您的路径:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:51:53.510

您在您的代码中使用的以下链接已损坏。这些文件不在实际路径中

```
 <link rel="stylesheet" href="css/jquery.fancybox.css?v=2.1.0" type="text/css" media="screen">
    <link rel="stylesheet" href="css/jquery.fancybox-buttons.css?v=1.0.3" type="text/css" media="screen">
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/jquery.fancybox.pack.js?v=2.1.0"></script>
    <script type="text/javascript" src="js/jquery.fancybox-buttons.js?v=1.0.3"></script> 
```

请纠正这个并再次检查..希望这会有所帮助:)

# magento-1.7 - 如何在 Magento 1.7 的价格旁边添加产品重量

> ID：12638553
> 
> 赞同：1
> 
> 时间：2012-09-28T10:48:08.437
> 
> 标签：magento-1.7

请我需要帮助。

我想把产品重量放在价格旁边。我使用 Magento 1.7。

谢谢您的帮助。索林

我找到了答案：

编辑 view.phtml 文件 /app/design/frontend/default/delicu/template/catalog/product/view.phtml

并添加鳕鱼：

```
<?php  $_weight = $this->htmlEscape($_product->getWeight()); if ($_weight < 1)
    $_weightstr = number_format($_weight*1000,2) . " gr"; else
    $_weightstr = number_format($_weight,2) . " kg"; echo $_weightstr; ?> 
```

# ios - 使用在 UITextView 中输入的文本动态更新 UILabel？

> ID：12638555
> 
> 赞同：0
> 
> 时间：2012-09-28T10:48:30.323
> 
> 标签：ios, uilabel, uitextview

我有两个视图控制器，我想`UILabel`在写的时候同时更新我的`UITextView`​​……例如，如果我正在写一些文本`UITextView`，它应该同时出现在`UILabel`不点击任何按钮或类似的东西……它应该动态更新......谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T10:56:02.257

试试这个代码，为你的 textview 设置委托

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text{

    lbl.text=textView.text;

} 
```

# html - PHP 页面未完成选择列表。它在屏幕顶部被截断

> ID：12638556
> 
> 赞同：0
> 
> 时间：2012-09-28T10:48:31.090
> 
> 标签：html, css, select

![选择列表被截断](../Images/1fc54e8e97fc780d661f8da01e236a8b.png)

如您所见，选择下拉列表中有值，但未显示，甚至滚动也不可见。

我该怎么做才能看到滚动条？我累了

```
style="overflow-y:scroll;" 
```

但这没有帮助。我在没有键盘和鼠标的触摸显示器上使用此在线页面，因此没有滚动条会产生问题。

请帮助..

# java - Vaadin，当子弹出窗口打开时禁用父窗口？

> ID：12638561
> 
> 赞同：2
> 
> 时间：2012-09-28T10:48:53.873
> 
> 标签：java, user-interface, popup, vaadin

当子窗口弹出窗口打开时，我需要禁用父窗口。我尝试将其设置`setEnable(false)`为父窗口，但是它也禁用了子窗口。有没有办法只禁用父窗口？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T17:03:55.933

您正在寻找的是定义子窗口模式。将其设置为模态后，您的父窗口将无法再使用。

```
Window subwindow = new Window();
subwindow.setModal(true); 
```

更多信息[在这里](https://vaadin.com/book/-/page/application.child-windows.html#application.child-windows.modal)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T11:38:12.297

你可以看到 Vaadin 插件，关于名字是 ConfirmDialog！我发现这是禁用父窗口，当子窗口弹出打开时。！我现在才开始阅读它！

# c++ - 在 C++ 中处理身体习语

> ID：12638566
> 
> 赞同：3
> 
> 时间：2012-09-28T10:49:22.420
> 
> 标签：c++, design-patterns, abstraction

我的库中有一个类，我想向用户公开。我不想公开整个类，因为我可能想稍后进行二进制不兼容的更改。我对以下哪种方法最好感到困惑。

### 情况1：

```
struct Impl1;
struct Handle1
{
  // The definition will not be inline and will be defined in a C file
  // Showing here for simplicity
  void interface()
  {
    static_cast<Impl1*>(this)->interface();
  }
}

struct Impl1 : public Handle1
{
  void interface(){ /* Do ***actual*** work */ }
  private:
  int _data; // And other private data
}; 
```

### 案例二：

```
struct Impl2
struct Handle2
{
  // Constructor/destructor to manage impl
  void interface() // Will not be inline as above.
  {
    _impl->interface();
  }
  private:
  Impl2* _impl;
}

struct Impl2
{
  void interface(){ /* Do ***actual*** work */ }
  private:
  int _data; // And other private data
}; 
```

*Handle*类仅用于公开功能。它们将仅在库内创建和管理。继承只是为了抽象实现细节。不会有多个/不同的*impl*类。在性能方面，我认为两者都是相同的。是吗？我正在考虑采用*案例 1*方法。有什么问题需要注意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T11:01:40.373

您的第二种方法看起来非常像编译防火墙习语（有时称为[PIMPL](https://cpppatterns.com/patterns/pimpl.html)习语）。

唯一的区别是在编译防火墙惯用语中，实现类通常（但不总是）定义为成员。不要忘记构造函数（分配 Impl）和析构函数（释放 Impl）。连同复制构造函数和赋值运算符。

第一种方法也有效，但它需要工厂函数来创建对象。在我使用的时候，我只是把所有的函数都做成了`Handle`纯虚拟的，让客户端代码直接调用。

在这种情况下，由于客户端代码实际上有指向您的对象的指针（在编译防火墙的惯用语中，唯一​​的指针在`Handle`类本身中），客户端将不得不担心内存管理；如果没有循环是可能的，这是一种`shared_ptr`很有意义的情况。（例如，工厂函数可以返回一个 `shared_ptr`，而客户端代码可能永远不会看到原始指针。）

# c# - VSTO-word任务窗格在具有价值问题的多个文档中共享

> ID：12638568
> 
> 赞同：2
> 
> 时间：2012-09-28T10:49:40.933
> 
> 标签：c#, vsto, office-interop

我正在使用 VSTO 和 c# 创建一个插件，

我已经为任务窗格创建了一个用户控件，其中我有以下控件：1）一个文本框 - 用于 Word 文档文件夹，2）一个按钮 - 用于浏览在文本框中抛出指定的文件夹，3）一个树视图控件在文本框中显示指定路径上的所有文件和文件夹，

这些工作正常。当我从树视图中选择一个文档时，它会在没有任务窗格的情况下打开。

我为文档选择编写了以下代码。

```
private void treeFiles_NodeMouseDoubleClick(object sender, TreeNodeMouseClickEventArgs e)
    {
        string fullPath = e.Node.Name;
        string checkExt = Path.GetExtension(fullPath);
        if (checkExt.Contains("doc"))
        {
            //System.Diagnostics.Process.Start(fullPath);
            object fileName = fullPath;
            object readOnly = false;
            object isVisible = true;
            // Here is the way to handle parameters you don't care about in .NET
            object missing = System.Reflection.Missing.Value;

            // Make word visible, so you can see what's happening         
            Globals.MainPage.Application.Visible = true;

            Word.Document aDoc = Globals.MainPage.Application.Documents.Open(ref fileName, ref missing, ref readOnly, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref isVisible);

            // Activate the document so it shows up in front
            aDoc.Activate();
        }
    } 
```

在主文件中，我编写了以下代码：

```
 HomeControl objHomeControl;

    public static Microsoft.Office.Tools.CustomTaskPane taskPaneValue;

    private void ThisAddIn_Startup(object sender, System.EventArgs e)
    {
        objHomeControl = new HomeControl();
        taskPaneValue = this.CustomTaskPanes.Add(objHomeControl, "File task pane");
        taskPaneValue.DockPosition = Office.MsoCTPDockPosition.msoCTPDockPositionLeft;
        taskPaneValue.VisibleChanged += new EventHandler(taskPaneValue_VisibleChanged);
        taskPaneValue.Visible = true;
        this.Application.DocumentOpen += new Word.ApplicationEvents4_DocumentOpenEventHandler(Application_DocumentOpen);

    }

    void Application_DocumentOpen(Word.Document Doc)
    {
        HomeControl objHomeControl1 = new HomeControl();
        taskPaneValue = this.CustomTaskPanes.Add(objHomeControl1, "File task pane",Doc.ActiveWindow);
        taskPaneValue.DockPosition = Office.MsoCTPDockPosition.msoCTPDockPositionLeft;
        taskPaneValue.VisibleChanged += new EventHandler(taskPaneValue_VisibleChanged);
        taskPaneValue.Visible = true;
    }

    void taskPaneValue_VisibleChanged(object sender, EventArgs e)
    {
        Globals.Ribbons.MyRibbon.tgleButton.Checked = taskPaneValue.Visible;

    }

    public Microsoft.Office.Tools.CustomTaskPane TaskPane
    {
        get
        {
            return taskPaneValue;
        }
    } 
```

当我双击节点时，文档打开，但它添加（UserControl）重新初始化。所有值都被重置，从功能区添加开/关不起作用。如何在所有文档中制作 UserControl 共享的单个副本。

我也试过这个

```
 void Application_DocumentOpen(Word.Document Doc)
    {
        taskPaneValue = this.CustomTaskPanes.Add(objHomeControl, "File task pane",Doc.ActiveWindow);
        taskPaneValue.DockPosition = Office.MsoCTPDockPosition.msoCTPDockPositionLeft;
        taskPaneValue.VisibleChanged += new EventHandler(taskPaneValue_VisibleChanged);
        taskPaneValue.Visible = true;
    } 
```

它在新文档中打开任务窗格。但不允许我点击任何地方。如果我单击父文档，我会收到以下异常消息：

“无法使用已与其底层 RCW 分离的 COM 对象。”

帮帮我。

# java - 获取服务超时异常

> ID：12638570
> 
> 赞同：0
> 
> 时间：2012-09-28T10:49:43.350
> 
> 标签：java, .net, web-services, exception

**重大变化**

成立：

```
<binding name="EntityExtractionPortBinding" closeTimeout="00:01:00"
      openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
      allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
      maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
      messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
      useDefaultWebProxy="true">
      <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <security mode="None">
        <transport clientCredentialType="None" proxyCredentialType="None"
          realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
    </binding> 
```

在 app.config 中并在那里更改了所有超时，即使那样**它也会抛出相同的异常**。改变：

```
<binding name="EntityExtractionPortBinding" closeTimeout="00:60:00"
      openTimeout="00:60:00" receiveTimeout="00:60:00" sendTimeout="00:60:00"
      allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
      maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
      messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
      useDefaultWebProxy="true">
      <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <security mode="None">
        <transport clientCredentialType="None" proxyCredentialType="None"
          realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
    </binding> 
```

调用 Web 服务时出现 TimeOut 异常。webservice部署在java中，我的客户端是ac#winform。Web服务部署在TOMCAT服务器上它在客户端给出以下异常：

> 请求通道在 00:00:56.9230000 之后等待回复时超时。增加传递给 Request 调用的超时值或增加 Binding 上的 SendTimeout 值。分配给此操作的时间可能是较长超时的一部分。

**客户端异常：**

> System.TimeoutException 被捕获 Message=请求通道在 00:01:00 之后等待回复时超时。增加传递给 Request 调用的超时值或增加 Binding 上的 SendTimeout 值。分配给此操作的时间可能是较长超时的一部分。Source = mscorlib StackTrace：服务器堆栈跟踪：在 System.ServiceModel.Channels.RequestChannel.Request（消息消息，TimeSpan 超时）在 System.ServiceModel.Dispatcher.RequestChannelBinder.Request（消息消息，TimeSpan 超时）在 System.ServiceModel.Channels。 System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, 已超过分配的超时时间 00:01:00。分配给此操作的时间可能是较长超时的一部分。Source=System.ServiceModel StackTrace：在 System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply（TimeSpan 超时）在 System.ServiceModel.Channels 的 System.ServiceModel.Channels.HttpChannelUtilities.ProcessGetResponseWebException（WebException webException，HttpWebRequest 请求，HttpAbortReason abortReason）。 Channels.RequestChannel.Request（消息消息，TimeSpan 超时） InnerException：System.Net.WebException 消息=操作已超时 Source=System StackTrace：位于 System.ServiceModel 的 System.Net.HttpWebRequest.GetResponse()。

通过 WSDL 访问 Web 服务。我的 app.config 中有以下代码

**客户端的 app.config 中的代码**

```
<endpoint address="http://localhost:8084/EntityExtraction/EntityExtraction"
    binding="basicHttpBinding" bindingConfiguration="EntityExtractionPortBinding"
    contract="DictionaryLookUp.EntityExtraction" name="EntityExtractionPort" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T11:05:14.913

如果我了解您的超时设置少于 60 秒，或者您的网络服务只需要更多时间来处理查询并给出响应。增加请求超时或优化 Web 服务。

用SoapUI测试，webservice需要多长时间才能响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T09:13:27.547

无法在 app.config 文件中输入任何值。但是，当我通过硬编码来增加超时值时，它确实起作用了：

```
DictionaryLookUp.EntityExtractionClient nlp = new 
                             DictionaryLookUp.EntityExtractionClient();
nlp.InnerChannel.OperationTimeout = new TimeSpan(0, 50, 0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T16:33:31.177

将超时设置为值 timeout="00:60:00" 时，我也有类似的经历。就像系统将其解释为 0 秒一样。如果需要，将值设置为“00:59:00”或“01:00:00”

# javascript - 如何将作为 json 对象的一部分输入的日期/时间仅转换为日期？

> ID：12638572
> 
> 赞同：1
> 
> 时间：2012-09-28T10:49:50.233
> 
> 标签：javascript, jquery

我的 json 正在返回：

```
json.Modified = "28/09/12 18:42" 
```

有没有办法可以将其转换为：

```
"28/09/12" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T10:57:13.587

```
var date = "28/09/12 18:42"
date = date.split(" ");
final = date[0]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T10:55:35.990

请使用以下代码

```
var date = "28/09/12 18:42";
var arr =data.split(" ");
var newDate = arr[0]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T10:56:55.303

你可以试试这个

```
var d=json.Modified.split(' ')[0];
alert(d); // 28/09/12 
```

[**演示**](http://jsbin.com/isizaj/1/edit)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-28T11:01:18.077

如果您的字符串始终匹配相同的模式，您可以使用 substr 函数。 [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/substr](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/substr)

```
var cleanedDate = dateAndHours.substr(0,8); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-28T10:55:03.527

```
var dateOnly = json.Modified.substring(0, 8); 
```

# php - 使用 PHP 获取 JSON 数据

> ID：12638576
> 
> 赞同：0
> 
> 时间：2012-09-28T10:50:13.697
> 
> 标签：php, json, stream

如何获取此方法转发到 PHP 网页的数据？

```
 URL url;
   HttpURLConnection connect = null;
   BufferedReader rd;
   StringBuilder sb;
   OutputStreamWriter wr;
   // Change this url to the url of your receiveJsonSms.php.
   String urlString = "http://www.paintedostrich.com/receiveJsonSms.php";
    try {
  System.setProperty("http.keepAlive", "false");
  url = new URL(urlString);
  connect = (HttpURLConnection) url.openConnection();
  connect.setRequestMethod("POST");
  connect.setDoOutput(true);
  connect.setDoInput(true);
  connect.setReadTimeout(10000);

  connect.connect();

  // write to the stream
  String data = URLEncoder.encode("texts", "UTF-8") + "="
          + URLEncoder.encode(jsonTexts.toString(), "UTF-8");

  wr = new OutputStreamWriter(connect.getOutputStream());
  wr.write(data);
  wr.flush();

  // read the result from the server
  rd = new BufferedReader(new InputStreamReader(connect.getInputStream()));
  sb = new StringBuilder();
  String line = null;
  while ((line = rd.readLine()) != null) {
    sb.append(line);
  }` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T10:53:06.710

要在 PHP 中解码 json，请使用[json_decode()](http://php.net/manual/en/function.json-decode.php)。

```
<?php
$json = '{"a":1,"b":2,"c":3,"d":4,"e":5}';

var_dump(json_decode($json));
var_dump(json_decode($json, true));

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:56:58.110

我认为答案是

```
sb.ToString(); 
```

如果您想读取 JSON，这就是您从服务器获得的数据，请使用此

[http://www.codeproject.com/Tips/397574/Use-Csharp-to-get-JSON-data-from-the-web-and-map-i](http://www.codeproject.com/Tips/397574/Use-Csharp-to-get-JSON-data-from-the-web-and-map-i)

# c# - Thread 回调中的 Thread.Sleep 挂起 Windows

> ID：12638577
> 
> 赞同：0
> 
> 时间：2012-09-28T10:50:14.980
> 
> 标签：c#, .net, multithreading, timer

我正在启动一个使用一些文件运行例行任务的线程，不幸的是，`Thread.Sleep`在该线程回调中调用会在指定的时间内挂起 Windows，即。我的光标冻结并且 CTRL+ALT+DEL 也不执行任何操作。如何在不挂断 UI 的情况下专门“休眠”后台线程？

我正在使用这个创建线程：

```
 createThread = new Thread(new ThreadStart(this.createFileExec));
 createThread.Start(); 
```

我的回调是这样的：

```
 private void createFileExec() {
        ....
        Thread.Sleep(100);
        ....
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T10:55:44.913

> 如何在不挂断 UI 的情况下专门“休眠”后台线程？

这正是您通过调用`Thread.Sleep`新线程所做的事情。你确定你不是`createFileExec`从主线程调用吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:59:17.060

詹姆斯是对的，没有理由让 UI 挂起。

您可以尝试的一个快速破解方法是使用循环而不是 Thread.Sleep 。

```
for (int i = 1; i <= 10000; i++)
{
      Console.WriteLine("."); //To know that the thread is asleep.
} 
```

# javascript - 在 IE 中加载本地 XML

> ID：12638583
> 
> 赞同：1
> 
> 时间：2012-09-28T10:50:37.830
> 
> 标签：javascript, xml, internet-explorer

我试图根据[此站点的代码在 IE 中不使用 active-x 来读取本地 xml 文件](http://dean.edwards.name/weblog/2006/04/easy-xml/)

```
var xml = document.createElement("xml");
xml.src = 'file.xml';
document.body.appendChild(xml);
var xmlDocument = xml.XMLDocument;
document.body.removeChild(xml);

console.log(xml.XMLDocument); //undefined
console.log(xml); //<xml XMLDocument="[object]"> 
```

我需要的`[object]`是包含我的 XML 文件的文件。但我无法获取它（见上文）。我错过了什么明显的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:16:16.773

对于遇到此问题的任何人：`XMLDocument`IE9 中不存在该属性，因此导致了该问题。

# php - facebook post to wall - 只有在已经获得许可的情况下才有效，我如何向用户征求许可？

> ID：12638584
> 
> 赞同：-1
> 
> 时间：2012-09-28T10:50:45.817
> 
> 标签：php, python, django, facebook, facebook-graph-api

> **可能重复：**
> [Facebook 应用程序：附加权限](https://stackoverflow.com/questions/4935979/facebook-apps-additional-permissions)

脸书贴到墙上：

我可以通过发送这样的发布请求或使用某些特定于语言的代码来发布到墙上。

```
 curl -F "access_token=tokenstring" -F "message=some message here" "http://graph.facebook.com/username/feed" 
```

仅当用户已授予 PUBLISH_STREAM 权限时，上述方法才有效。但是，如果应用程序没有获得用户的许可怎么办？如何向用户请求权限？

即使从这个 url 询问 access_token

```
 https://graph.facebook.com/oauth/access_token?type=client_cred&client_id=" SECRET " &client_secret=" SECRET "&scope=publish_stream 
```

它在没有征求用户许可的情况下给了我访问令牌，并且在使用此访问令牌时，它给出了用户没有授予对应用程序访问权限的错误，有没有一种方法可以重定向用户请求许可。或者一些请求许可的盒子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T11:12:53.210

是的，根据 Facebook 用户许可，您应该首先生成令牌。并且用户会给你权限然后你可以发布他/她的墙......

# html - 将表格中的样式应用于 th 和 td 中的特定列

> ID：12638587
> 
> 赞同：2
> 
> 时间：2012-09-28T10:51:16.180
> 
> 标签：html, css, html-table

我有一个表格，我希望能够将 CSS 中的特定样式分配给表格中的某些列：-

```
<table border="1">

<tr>
<th>Header 1</th>
<th>Header 2</th>
<th>Header 3</th>
<th>Header 4</th>
<th>Header 5</th>
</tr>
<tr>
<td>row 1, cell 1</td>
<td>row 1, cell 2</td>
<td>row 1, cell 3</td>
<td>row 1, cell 4</td>
<td>row 1, cell 5</td>
</tr>
<tr>
<td>row 2, cell 1</td>
<td>row 2, cell 2</td>
<td>row 2, cell 3</td>
<td>row 2, cell 4</td>
<td>row 2, cell 5</td>
</tr>

</table>​ 
```

我希望能够只给前 2 个样式`text-align:left;`和其余的`th = text-align:center;`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T10:53:32.350

标准和直接解决方案：

```
th {
   text-align:center;       
}
tr th:nth-child(1), tr th:nth-child(2) {
   text-align:left;   
}​ 
```

这种表示法的优点是很容易将其更改为适用于例如第四个和第六个`th`而不是前两个。

请注意，这假设[CSS3 在浏览器中的可用性](http://caniuse.com/#feat=css-sel3)。

如果你想兼容 IE8，你可以在 javascript 中轻松做到：

```
var ths = document.getElementsByTagName('th'); // replace document by your table if necessary    
for (var i=2; i<ths.length; i++) ths[i].style.textAlign="center"; 
```

或使用 jQuery ：

```
​$('th').each(function(){
    if ($(this).index()>=2) $(this).css('text-align', 'center');
}​​​​​​​​​​​​​​​​​​​​​​​​​​​​​);​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:55:16.827

做这个

```
 th:first-child, th:first-child + th{
        text-align:left;
        }
th + th + th{
        text-align:center;
        } 
```

现场演示[http://tinkerbin.com/B5Zi88Pp](http://tinkerbin.com/B5Zi88Pp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T11:01:20.357

CSS3方式

```
th {
text-align:center;
}
th:nth-child(0), th:nth-child(1) { text-align:left; }​ 
```

CSS2方式

```
th{
text-align:center;
}
th:first-child, th:first-child + th{
text-align:left;
} 
```

# php - 需要按降序排列和总计数的 XML 响应

> ID：12638590
> 
> 赞同：0
> 
> 时间：2012-09-28T10:51:32.703
> 
> 标签：php, xml

```
 <?php
            $xml = simplexml_load_string( $response->ApiCallDeatilDataFeedResult );

            foreach ( $xml->call_data as $data )
            {
            ?>
            <tr>

                <td  class="sss"><?php 

                echo $data->call_time;?></td>
                <td  class="sss"><?php 

                $init = $data->call_duration;
$hours = floor($init / 3600);
$minutes = floor(($init / 60) % 60);
$seconds = $init % 60;

echo "$minutes Min : $seconds Sec";
?></td>
                <td  class="sss"><?php echo $data->call_status;?></td>
                <td  class="sss"><?php echo $data->caller_number;?></td>
                <td  class="sss"><?php echo $data->caller_name;?></td>

                <td  class="sss"><?php echo $data->caller_city;?></td>
                <td  class="sss"><?php echo $data->caller_state;?></td>
                <td  class="sss"><?php echo $data->caller_zip;?></td>

            </tr>
            <?php
            }
            ?>
        </table> 
```

在请求 xml 时，我收到了 xml 响应，它以升序给出结果。我需要按降序排列的 XML 响应，并且总共不需要行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:07:26.237

[@Yogesh Suthar](https://stackoverflow.com/users/1679187/yogesh-suthar)的答案是正确的（尽管直接在 $xml 上调用 count 而不是 $xml->call_data），但我认为索引是错误的，因为数组索引从零开始并以长度 1 结束。

编辑：正如[@hakra](https://stackoverflow.com/users/367456/hakra)在评论中所说， call_data 不是一个数组，而是一个可迭代的 SimpleXMLElement。但是为了争论，让我们说它是。所以，我认为应该是：

```
for($i = count($xml->call_data) - 1 ;$i >= 0 ; $i--) 
```

或者，如果您想避免使用索引的麻烦，请尝试使用[array_reverse](http://php.net/manual/en/function.array-reverse.php)如果 call_data 确实是一个数组

```
foreach ( array_reverse($xml->call_data) as $data ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T11:08:35.210

使用[krsort](http://php.net/manual/en/function.krsort.php)进行排序。是的，使用 count() 来计算数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T11:23:40.587

Simplexml 为 提供了一个迭代器`foreach`，如果你想反转它，你可以将它转换为一个数组，反转数组，然后`foreach`在数组上：

```
$datas = $xml->call_data;
$datas = iterator_to_array($datas, 0);
$datas = array_reverse($datas);

foreach($datas as $data)
{
    ...
}

$count = count($datas); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T11:00:44.927

用于`count`行数并反向使用`for`循环用于降序，如本例

```
for($i = count($xml) ;$i >0 ; $i--)
{
   // your code
} 
```

# c# - 减少闪烁时使用 C# Listview 模糊文本

> ID：12638591
> 
> 赞同：3
> 
> 时间：2012-09-28T10:51:33.027
> 
> 标签：c#, .net, winforms, listview

我有一个 System.Windows.Forms.ListView 包含许多项目。它闪烁得令人无法忍受（似乎经常发生这种情况），所以经过一番搜索后，我决定在“ListViewLessFlicker”类中做这两件事。

```
 this.SetStyle(ControlStyles.OptimizedDoubleBuffer | ControlStyles.AllPaintingInWmPaint, true);
        this.SetStyle(ControlStyles.Opaque, true); 
```

尽管 DoubleBuffering 在这些主题中最常作为解决方案给出，但它并没有太大的效果，但是将样式 opaque 设置为 true 极大地减少了闪烁。
[http://www.virtualdub.org/blog/pivot/entry.php?id=273](http://www.virtualdub.org/blog/pivot/entry.php?id=273)

然而，它有一个副作用，我似乎无法找到解决办法。当我将鼠标悬停在 ListView 中的某个项目上时，它现在会使文本变得粗体并且**非常**模糊（除非 opaque 为真，否则不会发生这种情况）。

这是一个非常放大的例子。

![在此处输入图像描述](../Images/360a65b0db5d8e7188cdf88e57cb674e.png)

如果有人有修复或知道它为什么会这样做，我很想知道！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T10:55:50.203

我通常这样做 - 调整控件大小时减少闪烁。批量添加项目时，您需要使用[`BeginUpdate()`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.beginupdate%28v=vs.80%29.aspx)/[`EndUpdate()`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.endupdate%28v=vs.80%29.aspx)来减少闪烁。我不知道是什么可能导致模糊，所以我不能就此提出建议 - 更新您的视频驱动程序可能会有所帮助，但不要抱太大希望。

```
[System.ComponentModel.DesignerCategory ( "" )]
public partial class ListViewEx : ListView
{
    private const int WM_ERASEBKGND = 0x14;

    public ListViewEx ()
    {
        InitializeComponent ();

        // Turn on double buffering.
        SetStyle ( ControlStyles.OptimizedDoubleBuffer |
            ControlStyles.AllPaintingInWmPaint, true );

        // Enable the OnNotifyMessage to filter out Windows messages.
        SetStyle ( ControlStyles.EnableNotifyMessage, true );
    }

    protected override void OnNotifyMessage ( Message oMsg )
    {
        // Filter out the WM_ERASEBKGND message to prevent the control
        // from erasing the background (and thus avoid flickering.)
        if ( oMsg.Msg != WM_ERASEBKGND )
            base.OnNotifyMessage ( oMsg );
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T20:54:20.547

我和你有同样的问题，我在这个页面的评论中找到了解决方案：http: [//www.virtualdub.org/blog/pivot/entry.php?id=273](http://www.virtualdub.org/blog/pivot/entry.php?id=273)

您必须像这样创建新类：

```
public class BufferedListView : ListView
{
    public BufferedListView() : base()
    {
        SetStyle(ControlStyles.OptimizedDoubleBuffer, true);
    }
} 
```

然后将您的 ListView 定义为 BufferedListView ，如下所示：

```
ListView myListView = new BufferedListView(); 
```

在那之后，模糊的文字不再是问题；）

# timeout - RabbitMQ 的 Pika 超时问题

> ID：12638592
> 
> 赞同：1
> 
> 时间：2012-09-28T10:51:38.970
> 
> 标签：timeout, rabbitmq, pika

我遇到了 Pika 出现超时错误的问题。相同的代码（如下）在其他环境中工作正常，但在这个环境中失败。

```
connection = pika.BlockingConnection(pika.ConnectionParameters(host=host)) 
```

rabbitmqctl状态

```
 [{pid,30059},
 {running_applications,[{rabbit,"RabbitMQ","2.8.2"},
                        {os_mon,"CPO  CXC 138 46","2.2.4"},
                        {sasl,"SASL  CXC 138 11","2.1.8"},
                        {mnesia,"MNESIA  CXC 138 12","4.4.12"},
                        {stdlib,"ERTS  CXC 138 10","1.16.4"},
                        {kernel,"ERTS  CXC 138 10","2.13.4"}]},
 {os,{unix,linux}},
 {erlang_version,"Erlang R13B03 (erts-5.7.4) [source] [64-bit] [smp:8:8] [rq:8] [async-threads:30] [hipe] [kernel-poll:true]\n"},
 {memory,[{total,76031440},
          {processes,57368952},
          {processes_used,57354128},
          {system,18662488},
          {atom,1119593},
          {atom_used,1112833},
          {binary,205008},
          {code,12015821},
          {ets,1407392}]},
 {vm_memory_high_watermark,0.39999999993657753},
 {vm_memory_limit,5045529804},
 {disk_free_limit,12613824512},
 {disk_free,10839289856},
 {file_descriptors,[{total_limit,924},
                    {total_used,837},
                    {sockets_limit,829},
                    {sockets_used,829}]},
 {processes,[{limit,1048576},{used,6763}]},
 {run_queue,0},
 {uptime,3298}]
...done. 
```

以前有人打过这个吗？我假设这是一个rabbitmq配置问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:15:50.310

查看 RabbitMQ 日志，您可能需要提供登录凭据：

```
pika.BlockingConnection(pika.ConnectionParameters(host, port=port, virtual_host=vhost, credentials=pika.credentials.PlainCredentials(username, password))) 
```

# c++ - 如何在重载的提取运算符中读取行（忽略空格字符）

> ID：12638597
> 
> 赞同：1
> 
> 时间：2012-09-28T10:51:50.267
> 
> 标签：c++, operator-keyword, getline

您好，我在重载的提取运算符中读取行（忽略空格字符）时遇到问题

这是我的代码任何帮助都会很棒

```
istream& operator>>(istream& is, CreditAccount& Cred){

cout << "Name: ";
is.getline(Cred.name, 256);
} 
```

我的错误如下

```
error: no matching function for call to ‘std::basic_istream<char, std::char_traits<char> >::getline(std::string&, int)’ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T10:55:40.553

我们需要知道 Cred::name 的类型，但是从您的错误来看，它似乎是 std::string。正确使用的功能是：

```
 #include <string> //for std::getline

 istream& operator>>(istream& is, CreditAccount& Cred){
      std::cout << "Name: ";
      std::getline(is, Cred.name);
      return is;
 } 
```

我还要强调，如果您使用`std::cout`提示用户输入，您没有正确使用流提取运算符，它是用于对象状态的基本序列化和反序列化。不用于用户交互。我个人只会有一个“produce_credit_account()”函数或类似的函数。

编辑：清除`std::cin`

```
 std::cin.ignore(std::numeric_limits<std::streamsize>::max()); 
```

# php - PHP 中是否有类似于 call_user_func 但更像 Tcl 的 eval 的函数？

> ID：12638601
> 
> 赞同：1
> 
> 时间：2012-09-28T10:52:01.840
> 
> 标签：php, eval, tcl

*注意：我认为这个问题与 PHP 的`eval`.*

在 Tcl 中，`eval`获取一个列表，使用第一项作为函数 (proc) 名称，其余项作为参数，例如

```
eval [list foobar arg1 arg2 arg3] 
```

相当于

```
foobar arg1 arg2 arg3 
```

在 PHP 中，两者都`call_user_func`需要`call_user_func_array`至少两个参数：(1) 函数名，和 (2) 参数或参数数组。

**PHP中是否有类似的函数只接受一个参数？**

我自己写了，如下所示，但我更喜欢本机方法。

```
function call_user_array(array $a) {
    return call_user_func_array(array_shift($a), $a);
} 
```

提前感谢您的任何提示。

~~*PS不确定“lambda”是否与此有关，但出于某种原因想到了这个词：如果它实际上不相关，是否会有更多知识渊博的人删除标签，以及这个注释？再次感谢！*~~

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T10:54:09.153

不，没有任何内置功能可以做到这一点。由于它可以在一行中实现（就像您所做的那样），因此也没有太多理由考虑包含一个。

# java - 从 T/P 应用程序关闭相机应用程序

> ID：12638602
> 
> 赞同：0
> 
> 时间：2012-09-28T10:52:02.480
> 
> 标签：java, blackberry, camera, exit

我的问题...我已经从我的第三方应用程序访问了相机应用程序，然后我拍照。然后我转到菜单并添加了一个菜单项 (MENUITEM_CAMERA_PREVIEW) 。我的菜单项必须执行一项功能，一旦完成，我希望我的应用程序在打开相机应用程序之前关闭相机并打开上一个屏幕。

我面临与此线程相同的问题：http: [//supportforums.blackberry.com/t5/Java-Development/How-to-exit-camera-app-properly/mp/1924127#M209092](http://supportforums.blackberry.com/t5/Java-Development/How-to-exit-camera-app-properly/m-p/1924127#M209092)

有人可以告诉我他们了解解决方案吗，如果没有，您可能知道解决方案，您的帮助将不胜感激。

我看过这些帖子： [在拍照后以编程方式关闭黑莓中的默认相机](https://stackoverflow.com/questions/5949292/closing-the-default-camera-in-blackberry-programatically-after-taking-a-picture)

[http://supportforums.blackberry.com/t5/Java-Development/Unable-to-close-camera-using-EventInjector-for-touch-screen/mp/785247#M143879](http://supportforums.blackberry.com/t5/Java-Development/Unable-to-close-camera-using-EventInjector-for-touch-screen/m-p/785247#M143879)

[如何以编程方式从另一个应用程序退出黑莓应用程序？](https://stackoverflow.com/questions/10978317/how-to-exit-a-blackberry-application-from-another-application-programatically)

但我不确定我应该添加什么来从我的第三方应用程序退出相机应用程序。

有人可以请帮助我理解....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T11:17:16.267

尝试从您的应用程序中关闭相机应用程序很棘手。我不知道一种干净的方法，但[我已经这样做了](https://stackoverflow.com/a/11030752/119114)。

基本上，您的应用需要请求权限

```
ApplicationPermissions.PERMISSION_INPUT_SIMULATION 
```

注入击键。然后它将模拟**ESC**键的按下，这是用户将/可以手动关闭相机应用程序的方式。为了使这种技术更可靠，我需要让代码（有条件地）多次注入 ESC 键。

我让这个更可靠的方法是，在我启动相机应用程序**之前**`Screen`，我的应用程序中有一个正在显示的内容。然后我监视该屏幕以查看它何时再次*曝光*。当我检测到它已经暴露时，我假设我必须注入*足够的*ESC 键序列来关闭相机（或者我猜用户可能自己按下了**ESC**来返回我的应用程序）。

 ********更新：**根据下面的评论，这是我在此解决方案中使用的一些附加代码，通过监视下面我的一个屏幕的*暴露状态来检测正确的相机关闭：*

```
private boolean _isExposed = false;

protected void onExposed() {
    super.onExposed();
    _isExposed = true;
}

protected void onObscured() {
    super.onObscured();
    _isExposed = false;
}

public boolean isExposed() {
    return _isExposed;
} 
```

如果您愿意，您也可以首先使用任何方法设置`_isExposed`为 false 来打开相机应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T11:56:00.703

这是我最终使用的代码，它好多了。

```
public class MyScreen extends MainScreen{
Player _p;
VideoControl _videoControl;  
FileConnection fileconn;
String PATH;
String GetfileName;
LabelField GetPhotofileName = new LabelField("",LabelField.FOCUSABLE){
    protected boolean navigationClick(int status, int time){
        Dialog.alert("Clicked");
    return true;
    }
 };

 public static boolean SdcardAvailabulity() {
     String root = null;
     Enumeration e = FileSystemRegistry.listRoots();
     while (e.hasMoreElements()) {
         root = (String) e.nextElement();
         if( root.equalsIgnoreCase("sdcard/") ) {
             return true;
         }else if( root.equalsIgnoreCase("store/") ) {
             return false;
         }
     }
     class MySDListener implements FileSystemListener {
         public void rootChanged(int state, String rootName) {
             if( state == ROOT_ADDED ) {
                 if( rootName.equalsIgnoreCase("sdcard/") ) {
                 }
             } else if( state == ROOT_REMOVED ) {
             }
         }
     }
     return true;
 }
 protected boolean invokeAction(int action){
     boolean handled = super.invokeAction(action); 
     if(SdcardAvailabulity()){
           PATH = System.getProperty("fileconn.dir.memorycard.photos")+"Image_"+System.currentTimeMillis()+".jpg";//here "str" having the current Date and Time;
     } else {
         PATH = System.getProperty("fileconn.dir.photos")+"Image_"+System.currentTimeMillis()+".jpg"; 
     }
     if(!handled){
         if(action == ACTION_INVOKE){   
             try{                      
                 byte[] rawImage = _videoControl.getSnapshot(null);
                 fileconn=(FileConnection)Connector.open(PATH);
                 if(fileconn.exists()){
                    fileconn.delete();
                 }
                 fileconn.create();
                 OutputStream os=fileconn.openOutputStream();
                 os.write(rawImage);
                 GetfileName =fileconn.getName();
                 fileconn.close();
                 os.close();
                 Status.show("Image is Captured",200);
                 GetPhotofileName.setText(GetfileName);
                 if(_p!=null)
                    _p.close();          
             }catch(Exception e){
                if(_p!=null){
                    _p.close();
                 }
                 if(fileconn!=null){
                    try{
                         fileconn.close();
                     }catch (IOException e1){ 
                     }
                 }                    
             }
         }
      }           
      return handled;                
  }
 public MyScreen(){
     setTitle("Camera App");
     try{
        _p = javax.microedition.media.Manager.createPlayer("capture://video?encoding=jpeg&width=1024&height=768");
        _p.realize();
        _videoControl = (VideoControl) _p.getControl("VideoControl");
        if (_videoControl != null){
            Field videoField = (Field) _videoControl.initDisplayMode (VideoControl.USE_GUI_PRIMITIVE, "net.rim.device.api.ui.Field");
            _videoControl.setDisplayFullScreen(true);
             _videoControl.setVisible(true);
            _p.start();
            if(videoField != null){
                add(videoField);
            }
        } 
     }catch(Exception e){
         if(_p!=null) {
             _p.close();
         }
         Dialog.alert(e.toString());
     }   
     add(GetPhotofileName);
 }
} 
```******

# vb.net - 将星号添加到模型中的标签

> ID：12638606
> 
> 赞同：0
> 
> 时间：2012-09-28T10:52:18.373
> 
> 标签：vb.net, asp.net-mvc-3, razor

在我看来，我有以下几点：

```
@Html.LabelFor(Function(model) model.StationName) 
```

但想为每个必填字段添加一个星号。如果我更改模型定义中的显示名称，它也会在索引视图中添加一个星号。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:53:59.377

尝试这样做：

```
@Html.DisplayFor(model=>model.StationName)* 
```

它会工作:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T11:02:48.140

这是一个启发式（我不能给你确切的代码，因为我这里没有）：

1.  创建一个 css 类，其中包括将星号附加到应用该类的标记的内容。我相信这是`content-after`关键字；不过不确定。
2.  编写一个 javascript 或（我的推荐）jQuery 脚本以在页面达到就绪状态时运行，以遍历所有`label`标签。
3.  如果`label`标签引用了一个`input`上面有必填字段验证属性的标签（同样，我前面没有名字），将步骤 1 中创建的 css 类应用于标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T16:18:52.910

我遇到了同样的问题，最终在准备好的文档上执行了此操作：

```
var lbl;
$('input[data-val-required]').each(function () {
    lbl = $(this).siblings('label');
    $(lbl).html($(lbl).html() + ' *');
}); 
```

我的标签是输入的兄弟姐妹，但如果标签也位于父母的兄弟姐妹中，当然可以对其进行修改。

# rdf - 如何在 RDF Schema 中声明 RDF 容器？

> ID：12638607
> 
> 赞同：2
> 
> 时间：2012-09-28T10:52:25.863
> 
> 标签：rdf, rdfs

在编写 RDF 模式时，我可以执行以下操作来声明委员会由许多人组成：

```
<rdfs:Class rdf:ID="Committee" />
<rdf:Property rdf:ID="members">
  <rdfs:domain rdf:resource="#Committee" />
  <rdfs:range rdf:resource="#Person" />
</rdf:Property> 
```

但是，我已经读过，将个人定义为委员会成员之间存在细微的语义差异，就像我在上面所做的那样，并且只有整个特定的人组成委员会这一事实。因此，在这种情况下，应该考虑使用 RDF 容器，例如*rdf:Bag*。

我的问题是：**如何在 RDF 模式中声明这样一个“人员包”？**

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-30T11:20:59.910

如果您想声明只有这些人组成委员会，您应该使用`Collection`，而不是`rdf:Bag`。w3schools.com 上的 RDF 教程给出了一个示例：

[https://www.w3.org/TR/rdf-schema/#ch_collectionvocab](https://www.w3.org/TR/rdf-schema/#ch_collectionvocab)

在 RDF 模式中，您需要声明一个属性“ `hasMember`”或“ `member`”。它的*域*是一个委员会，它的*范围*是一个成员。然后，RDF 文件可以为给定的委员会描述无限数量的成员。如果您想在委员会资源中指定这些是唯一的成员，则使用`collection`. 如果您允许更多成员，请使用`rdf:Bag`.

注意：这并不意味着不可能将“成员包”或“成员集合”定义为属性的范围。您可以查看网络上现有的简单本体（有数百个用 RDFS 编写）并比较它们如何定义类似的概念。

# javascript - 带对话框的输入键按钮

> ID：12638611
> 
> 赞同：0
> 
> 时间：2012-09-28T10:52:50.263
> 
> 标签：javascript, html

我有一个带有确定按钮的对话框，确定按钮有效，但我希望用户也能够在键盘上按 Enter，这是我的代码，有什么建议吗？

```
function showDialog()
{
    $('#dialog').dialog('destroy');
    $('#dialog').show();
    $('#dialog').html();

    $("#dialog").dialog({
        resizable: false,
        modal: true,
        height: 120,
        width: 370,
        overlay: {
            backgroundColor: '#000',
            opacity: 0.9
        },
        title:"Enter possible answer"
    });

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T10:56:04.057

```
document.onkeypress=function(e){
if(e.keyCode==13)
{
showDialog();
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T11:39:51.663

```
$(document).ready(function(){
$("#dialog").keyup(function(event){
    if(event.keyCode == 13){
        // your code
        showDialog();
    }
});
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T10:56:59.013

您将要捕获按键事件：

```
if (e.keyCode == 13) {
    //code
} 
```

该JS将检查是否按下了回车键，此代码将适用于所有浏览器/平台。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T11:01:19.217

```
$('#dialog').onKeyDown(function (e) {
  if (e.which == 13) {
    // just trigger the submit handler
alert('Enter');
  } 
```

# ruby-on-rails - 如何在 Redmine 中启用 ActionMailer 的调试日志

> ID：12638613
> 
> 赞同：2
> 
> 时间：2012-09-28T10:52:56.783
> 
> 标签：ruby-on-rails, logging, redmine, bitnami

我在 BitNami Redmine 2.1.0 的 SMTP 电子邮件设置中遇到问题。为了检查使用的值，我需要负责所有 SMTP 通信的 Action_Mailer 的完整调试日志。我已经包括

```
config.log_level = :debug 
```

在 production.rb 中，但这并没有显示 SMTP 通信，而是显示了所有其他 ruby​​ 内容。需要什么来查看 Redmine 和配置的 SMTP 服务器之间的 SMTP 通信？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:06:37.177

您可以尝试设置“config.action_mailer.raise_delivery_errors = true”并查看是否获得更多信息吗？

# maven - maven 依赖有一些在 pom.xml 中没有提到的 jar

> ID：12638616
> 
> 赞同：0
> 
> 时间：2012-09-28T10:53:09.577
> 
> 标签：maven, maven-2

我在项目的 maven 依赖项中有一些 jar，这些 jar 未在项目的 pom.xml 中定义。这怎么可能？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:08:17.553

由于传递依赖（库依赖于其他库）

请参阅：[传递依赖](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Transitive_Dependencies)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T11:29:45.483

您在依赖项中声明的一些 jar`pom.xml`依赖于其他 jar，因此由于这些传递依赖关系，您最终可以在程序集级别获得更多 jar。您可以启动此命令

```
mvn dependency:tree 
```

查看与项目相关的所有依赖项。

请记住，您还可以显式排除一些传递依赖项[，如下所示](http://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html)：

```
<dependency>
  <groupId>sample.ProjectA</groupId>
  <artifactId>Project-A</artifactId>
  <version>1.0</version>
  <scope>compile</scope>
  <exclusions>
    <exclusion>
      <groupId>sample.ProjectB</groupId>
      <artifactId>Project-B</artifactId>
    </exclusion>
  </exclusions> 
</dependency> 
```

但你必须完全确定你不需要它们。

# jquery - 我想使用 jquery 验证 asp.net 中的单选按钮列表

> ID：12638618
> 
> 赞同：1
> 
> 时间：2012-09-28T10:53:19.330
> 
> 标签：jquery, asp.net

我想使用 jquery 验证 asp.net 中的单选按钮列表，我在子页面中有单选按钮列表，并且当用户从不选择任何选项时我需要显示警报框

这是我尝试过的代码。

```
$(function(){ 
    $("#<%=btnSave.ClientID %>").click(function(){
          var v=$("#<%=rdTax.ClientID %>input:checked").val(); 
     }); 
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T11:04:40.417

你的代码应该是这样的

```
$(function(){ 
    $("#<%=btnSave.ClientID %>").click(function(){
          var v=$("#<%=rdTax.ClientID %> input:checked").length;
          if(v==0)
             alert('Not checked any radio button');
     }); 
}); 
```

或者更好，你可以试试这个

```
$(function(){ 
    $("[id$=btnSave]").click(function(){
          var v=$("[id$=rdTax]").find("input:checked").length;
          if(v==0)
             alert('Not checked any radio button');
     }); 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T10:59:34.817

使用**长度**检查是否选中了任何单选按钮，如果没有选择任何按钮，长度将为零

```
$('input[type=radio][name=radiobuttonlistID]:checked').length 
```

并使用**prop**选中或取消选中它们

```
$('input[type=radio][name="radiobuttonlistID"]').prop('checked', false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T11:03:35.170

验证单选按钮的简便方法可在需要时设置单选按钮的默认选择。我认为这是验证单选按钮的最佳方式。

如果您想使用 jquery 验证插件，请参阅链接：

[http://jquery.bassistance.de/validate/demo/radio-checkbox-select-demo.html](http://jquery.bassistance.de/validate/demo/radio-checkbox-select-demo.html)

# java - 杰克逊 JSON 反序列化到 java.util.Date 不起作用

> ID：12638619
> 
> 赞同：0
> 
> 时间：2012-09-28T10:53:20.620
> 
> 标签：java, json, rest, jackson, deserialization

我们正在尝试将 java.util.Date 对象发送到我们的 REST 资源，但 Jackson 将传入日期的 JSON 字符串反序列化为`1348696800000`具有值的 Date `163469056-01-01 00:00:00.0`。可能是什么问题呢？

我们的 REST 资源：

```
@POST
@Consumes(MediaType.APPLICATION_JSON)
@Produces(MediaType.APPLICATION_JSON)
public Response create(A a) {
} 
```

POJO：

```
@XmlRootElement(name = "A")
public class A {
    private Date startDate;
} 
```

JSON：

```
{ ... "startDate":1348696800000, ... } 
```

如果 Jackson 将 Date 序列化为毫秒，它应该能够再次反序列化它。我真的不想为此编写[自定义反序列](http://loianegroner.com/2010/09/how-to-serialize-java-util-date-with-jackson-json-processor-spring-3-0/)化器，然后我必须为客户端和服务器端的每个 Date 属性声明..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T07:35:51.723

所以我们决定解决这个问题，让我们的客户创建格式化的日期字符串，以使用自定义的方式发送到 REST 服务器

```
public class JsonDateSerializer extends JsonSerializer<Date> {

    private static final SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss");

    @Override
    public void serialize(Date date, JsonGenerator gen, SerializerProvider provider)
            throws IOException, JsonProcessingException {

        String formattedDate = dateFormat.format(date);

        gen.writeString(formattedDate);
    } 
```

# ios - 在将 UImage 转换为 2D 数组时需要更正，反之亦然

> ID：12638620
> 
> 赞同：2
> 
> 时间：2012-09-28T10:53:29.853
> 
> 标签：ios, image-processing, core-graphics

我正在尝试从 UIImage 制作一个 2D 像素数组，在制作该数组后，我将其转换回 UIImage 以查看 2D 像素数组数据是否正确。 [http://i.imgur.com/VsCw3.png](https://i.imgur.com/VsCw3.png) 这个链接有两张图片。底部的一个是在将像素数据转换回 UIImage 后获得的。上一个是原始图像。两者看起来完全相似，但是当您放大时，您会看到应该在图像最后一列的像素显示在第一列，但其余数据是准确的。

![在此处输入图像描述](../Images/ef43f015109fd3490f5723d01be53bab.png) // 从二维像素数组获得的图像（第一列数据不准确）

![在此处输入图像描述](../Images/57997f624c56edf5d8d2f8cff09d628c.png) // 实际图像

下面是我用来将 UIImage 转换为像素的代码，反之亦然。我可以找出我做错了什么。请帮我解决这个问题。

//将UIimage转换为二维像素矩阵的代码

```
 CGImageRef inImage = sourceImage.CGImage;
   GContextRef cgctx = [self createARGBBitmapContextFromImage:inImage];

//if (cgctx == NULL) { return nil; /* error */ }
    size_t w = CGImageGetWidth(inImage);
    size_t h = CGImageGetHeight(inImage);
    CGRect rect = {{0,0},{w,h}}; 
    unsigned char* data = CGBitmapContextGetData (cgctx);   
    if (data != NULL) {
    // separate out the rgb values of each pixel in each matrix
    for(int y=0;y<h;y++)
    {
        for(int x=0;x<w;x++)
        {
            int offset = 4*((w*y)+x);
            int alpha =  data[offset]; 
            int red = data[offset+1]; 
            int green = data[offset+2]; 
            int blue = data[offset+3]; 

            sourceRedMatrix[x][y] = red;
            sourceGreenMatrix[x][y] = green;
            sourceBlueMatrix[x][y] = blue;
           // sourceAlphaMatrix[x][y] = alpha;
        }
    }
    CGContextRelease(cgctx); 
 if (data) 
{
    free(data);
} 
```

//从二维像素矩阵中获取返回UIImage的代码

```
for(int y=0;y<h;y++)
{
    for(int x=0;x<w;x++)
    {
         redSourceColor = sourceRedMatrix[x][y];
            greenSourceColor = sourceGreenMatrix[x][y];
            blueSourceColor = sourceBlueMatrix[x][y];                
            rawDataSource[byteIndex] = (char) (255);   // alpha =255, deliberately set
        rawDataSource[byteIndex+1] = (char) (redSourceColor);
        rawDataSource[byteIndex+2] = (char) (greenSourceColor);
        rawDataSource[byteIndex+3] = (char) (blueSourceColor);
        byteIndexSource += 4;
    }
 }CGContextRef ctx = CGBitmapContextCreate(rawData,w, h, 8, 4 * w, CGColorSpaceCreateDeviceRGB(), kCGImageAlphaPremultipliedFirst);
  inImage = CGBitmapContextCreateImage (ctx);
UIImage* updatedSourceImage = [UIImage imageWithCGImage:inImage];  
imageView.image = updatedSourceImage;
free(rawData);
free(sourceRedMatrix);* 
```

# r - R聚类产生错误消息

> ID：12638625
> 
> 赞同：3
> 
> 时间：2012-09-28T10:53:46.610
> 
> 标签：r, cluster-analysis, na

尝试集群时，我收到以下消息：

> diana 中的错误（mat.in，stand = TRUE）：未执行聚类，NA 在相异矩阵中。

这是出乎意料的，因为 diana 采用矩阵而不是相异矩阵。根据文档，矩阵*中*允许使用 NA [但在相异矩阵中不允许使用 NA。

例子：

```
require("cluster")
mat.in=data.frame(A=c(12,10,NA,14,12,60),B=c(NA,11,45,25,13,65))
d=diana(mat.in,stand=TRUE) 
```

我确保既没有全 NA 列也没有全 NA 行。

有谁知道这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:47:56.303

至少对于示例数据，问题在于样本 1 和 3*没有*用于计算差异的信息。考虑：

```
> daisy(mat.in)
Dissimilarities :
          1         2         3         4         5
2  2.828427                                        
3        NA 48.083261                              
4  2.828427 14.560220 28.284271                    
5  0.000000  2.828427 45.254834 12.165525          
6 67.882251 73.593478 28.284271 60.959003 70.767224

Metric :  euclidean 
Number of objects : 6
> mat.in
   A  B
1 12 NA
2 10 11
3 NA 45
4 14 25
5 12 13
6 60 65 
```

这解释`NA`了相异矩阵中的 是真实的。对于样本 1 和 2 之间的比较，`A`样本 3 缺失，但样本 1 存在，而反之亦然`B`。由于没有数据可用于计算这两个样本的相异性，因此您会`NA`在相异矩阵中得到一个。

请注意，`NA`只要有一些信息可以计算相异性，显然允许 s ；生成的矩阵包含所有样本与样本 1 和 3 之间的差异。

# iphone - 是否仍然需要在 iOS 应用程序中包含非 Retina 资产？

> ID：12638628
> 
> 赞同：12
> 
> 时间：2012-09-28T10:53:56.673
> 
> 标签：iphone, ios

是否有必要在新应用中使用非 Retina 资产？

我问是因为它们占用了相当大的空间，而且它们在我的设计工作流程中占用了大量的时间。如今在 2012 年末，唯一受支持的非视网膜设备正在稳步消亡。根据我的统计数据：`13.8%`我的用户在`iPhone 3GS or older`9 月份使用（包括较旧的 iPhone 和 iPod Touches 3rd gen 及以下）。

我不是在问这是否是一个好主意（有时为较低分辨率的设备创建不太详细的艺术品是件好事）。

**我只是想知道是否仅包括 @2x 资产将在非 Retina 显示器上可靠地工作以及是否有任何影响？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T13:56:38.370

不必要。如果您不提供 1X 版本，iOS 将对 2X 资源进行下采样（请注意，模拟器的下采样很糟糕，但设备很好）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-05T15:30:47.777

仅包括视网膜 (@2x) 资产**通常**在非视网膜设备上运行良好，但对于非常小的资产（尤其是带有大量小笔划的小图标），结果将**明显模糊和糟糕**。你应该在非视网膜设备上查看你的应用程序，找到看起来不太好的资产，并为它们添加非视网膜版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T11:05:03.607

如果您在代码中包含带有@2X 的图像，那就太好了。我们需要这样做，因为苹果仍然支持其最新的操作系统，包括 3GS 和 iPod 等设备。

# soap - 如何在 AXIS 1.x 中使用 Log4J SOAP 请求和响应进行日志记录？

> ID：12638631
> 
> 赞同：16
> 
> 时间：2012-09-28T10:54:03.553
> 
> 标签：soap, log4j, axis

我遇到了下一个问题：

我想记录登陆我的 Web 服务（服务器端）的 SOAP 请求/响应。尝试在 wsdd 文件中配置我的 Web 服务。我总是登陆下一个页面：

[如何使用 org.apache.axis.handlers.LogHandler](http://www.theserverside.com/discussions/thread.tss?thread_id=35765)

其中建议配置 Apeche Axis LogHandler 来记录请求/响应。这对我无效，因为 a) 无法在此处链接 log4j，并且 b) 我只是无法使其工作。

有谁知道让我的 log4j 记录请求/响应的方法？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-28T10:54:03.553

因此，经过几个小时或在网上搜索后，我决定冒险并编写自己的处理程序。比预期的要容易得多。

我创建了一个扩展抽象类 BasicHandler (org.apache.axis.handlers.BasicHandler) 的类，并实现了记录请求或响应的调用方法。这是我的课程，我将其命名为 SOAPLogHandler ：

```
package com.mypackage.axishandlers;

import org.apache.axis.AxisFault;
import org.apache.axis.MessageContext;
import org.apache.axis.handlers.BasicHandler;
import org.apache.log4j.Logger;

public class SOAPLogHandler extends BasicHandler {

private static Logger LOG= Logger.getLogger(SOAPLogHandler.class);
private static final long serialVersionUID = 1L;

@Override
public void invoke(MessageContext msgContext) throws AxisFault {
    if(msgContext.getResponseMessage() != null && msgContext.getResponseMessage().getSOAPPart() != null) {
        LOG.info(" Response = " + msgContext.getResponseMessage().getSOAPPartAsString());
    } else {
        if(msgContext.getRequestMessage() != null && msgContext.getRequestMessage().getSOAPPartAsString() != null) {
            LOG.info(" Request = " + msgContext.getRequestMessage().getSOAPPartAsString());
        }    
    }
}  } 
```

这个想法是，首先记录请求，然后在处理时记录响应。因此，在**server-config.wsdd**（或者如果您在客户端，则来自您的客户端的 wsdd 文件）中，我们必须添加一个指向该类的处理程序，并将其配置为在请求/响应链中使用：

第一次添加处理程序

```
 <handler name="log" type="java:com.mypackage.axishandlers.SOAPLogHandler"/> 
```

2nd将该处理程序的使用添加到来自http传输的请求/响应（关注日志处理程序）

```
 <transport name="http">
  <requestFlow>
   <handler type="log"/>
   <handler type="URLMapper"/>
   <handler type="java:org.apache.axis.handlers.http.HTTPAuthHandler"/>
  </requestFlow>
  <responseFlow>
   <handler type="log"/>
  </responseFlow>
...
 </transport> 
```

有了这个，魔术应该完成，你应该从请求/响应中收到一个漂亮的日志！

免责声明：我不确定如果您使用某种 SOAP 多部分的东西会发生什么。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-11-18T09:40:46.117

像对 log4j.properties 一样，将此文件保存为工作目录中的“client-config.wsdd”。

如果您不想更改任何代码并调试您的axis Web 服务客户端，您可以按照此方法记录所有传入和传出的soap 消息。

```
<deployment xmlns="http://xml.apache.org/axis/wsdd/"
xmlns:java="http://xml.apache.org/axis/wsdd/providers/java">

<handler name="log" type="java:org.apache.axis.handlers.LogHandler" >
    <parameter name="LogHandler.fileName" value="c:/logs/axis.log"/>
</handler>

<globalConfiguration>
    <requestFlow>
        <handler type="log" />
    </requestFlow>
    <responseFlow>
        <handler type="log" />
    </responseFlow>
</globalConfiguration>

<transport name="http"
    pivot="java:org.apache.axis.transport.http.HTTPSender" />

</deployment> 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-05-20T15:12:05.513

您需要在`log4.xml`配置文件中添加一个 Axis 记录器，如下所示：

```
<logger name="org.apache.axis.transport.http.HTTPSender">
   <level value="DEBUG"/>
   <appender-ref ref="someLogAppender"/>
</logger> 
```

`someLogAppender`可能是现有的 Log4J 附加程序，或者您可能想要定义一个专用的附加程序，如下所示：

```
<appender name="someLogAppender" class="org.apache.log4j.FileAppender">
   <param name="File" value="/my/path/to/axis.log" />
   <layout class="org.apache.log4j.PatternLayout">
      <param name="ConversionPattern" value="%d %-5p [%c] %m%n" />
   </layout>
</appender> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-01-14T16:29:12.787

我知道它是一个旧线程，但可能对寻找答案的人有用。

对于 AXIS-1 服务器端日志记录，更新您的`server-config.wsdd`如下所示。`server-config.wsdd`在`WEB-INF`您的战争文件的文件夹下。

一个新的日志处理程序。文件名和路径是可配置的。

```
<handler name="log" type="java:org.apache.axis.handlers.LogHandler">
  <parameter name="LogHandler.fileName" value="/tmp/req-res-axis.log" />
</handler> 
```

您还可以使用`LogHandler.writeToConsole`带有 as 值的参数`"true"`来登录控制台日志。

然后更新该`<globalConfiguration>`部分以具有

```
<requestFlow>
 <handler type="log"/>         
</requestFlow>
<responseFlow> 
 <handler type="log"/>
</responseFlow> 
```

如果`requestFlow`and`responseFlow`包含其他处理程序，则将日志作为第一个处理程序。

这应该只用于调试目的，而不是用于生产。由于日志记录是幼稚的，并且在没有任何缓冲区的情况下对文件执行正常的写入操作。其次，由于没有翻转机制，日志文件将增长到 GB。

对于 AXIS-1 客户端日志记录，请`client-config.wsdd`在下面更新您的内容。`client-config.wsdd`应该直接进入您在非任何子文件夹中配置的根文件夹下`classpath`。`classpath`最佳位置是您的`log4j.xml`or`log4j.properties`文件所在的同一目录（感谢上面的#MukeshKoshyM 帖子）。

```
 <deployment xmlns="http://xml.apache.org/axis/wsdd/" xmlns:java="http://xml.apache.org/axis/wsdd/providers/java">

    <handler name="log" type="java:org.apache.axis.handlers.LogHandler" >
     <parameter name="LogHandler.fileName" value="/tmp/axis_req_res.log"/>
    </handler>

    <globalConfiguration>
      <requestFlow>
        <handler type="log" />
     </requestFlow>
     <responseFlow>
        <handler type="log" />
     </responseFlow>
    </globalConfiguration>

<transport name="http"
    pivot="java:org.apache.axis.transport.http.HTTPSender" />
</deployment> 
```

服务器端日志记录提到的相同问题也适用于客户端。

`org.apache.axis.handlers.BasicHandler`对于生产，通过在处理程序中扩展和配置类文件来编写自己的日志处理程序。请查看#raspayu 的上述答案以配置您自己的答案。要记录错误，请覆盖`public void onFault(MessageContext msgContext)`Handler 中的方法。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-02-15T15:58:44.887

记录轴故障的解决方案是扩展 OnFault 方法：

```
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.apache.axis.AxisFault;
import org.apache.axis.MessageContext;
import org.apache.axis.handlers.BasicHandler;

public class SOAPLogHandler extends BasicHandler {

  private static final String AXIS = "AXIS";
  private static final String AXIS_FAULT = "AXIS FAULT";
  private static Logger LOG = LoggerFactory.getLogger(SOAPLogHandler.class);
  private static final long serialVersionUID = 1;

  @Override
  public void invoke(MessageContext msgContext) throws AxisFault {
    logMessage(AXIS, msgContext);
  }

  @Override
  public void onFault(MessageContext msgContext) {
    try {            
        logMessage(AXIS_FAULT,msgContext);
    } catch (AxisFault axisFault) {
        LOG.error("Error on logging messages ",axisFault);
    }
  }

  private void logMessage(String preamble, MessageContext msgContext) throws AxisFault {
    if (msgContext.getResponseMessage() != null && msgContext.getResponseMessage().getSOAPPart() != null) {
        LOG.info("{} Response ={}",preamble ,msgContext.getResponseMessage().getSOAPPartAsString());
        return;
    }

    if (msgContext.getRequestMessage() != null && msgContext.getRequestMessage().getSOAPPartAsString() != null) {
        LOG.info("{} Request={}",preamble,msgContext.getRequestMessage().getSOAPPartAsString());
    }
  }
} 
```

在全局配置请求流中设置处理程序也是强制性的，在 wsdd 文件中将是这样的：

```
<globalConfiguration>     
  <requestFlow>
    <handler type="log" />
  </requestFlow>
  <responseFlow>
    <handler type="log" />
  </responseFlow>
</globalConfiguration>

<handler name="log" type="java:your.package.SOAPLogHandler"/> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-01-16T17:35:38.273

默认情况下，Axis 会检查文件 client-config.wsdd。我们需要将此文件保存在与 log4j.xml 或 log4j.properties 相同的位置。日志文件将在日志处理程序指定的位置生成。确保文件夹结构存在。

`mukesh`

# c - 编译 C 代码时发生错误

> ID：12638636
> 
> 赞同：0
> 
> 时间：2012-09-28T10:54:15.083
> 
> 标签：c

以华氏度为单位的城市温度通过键盘输入。现在我需要编写一个程序来将此温度转换为摄氏度。

所以这里是公式：

```
°C = (°F -  32)  x  5/9 
```

样本输入/输出：

```
Enter Temperature of Dhaka in Fahreinheit: 98.6
Temperature of Dhaka in Centigrade 37.0 C
Now, i have tried with this, but not works. 
```

代码：

```
# include <stdio.h>

void main()
{
    float C;
    printf("Pleas Enter Your Fahreinheit Value to see in centrigate=");
    scanf("%d",&C);

    printf(C);

    float output;
    output=(C-32)*(5/9);

    printf("The centrigate Value is = %.2lf\n\n" ,output);
} 
```

谁能告诉我出了什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-28T11:04:11.650

```
void main()
{
  float far;
  printf("Pleas Enter Your Fahreinheit Value to see in centrigate=");
  scanf("%f",&far);

 // printf(C);

 float cel;
 cel =(far-32)*(5.0/9.0);

 printf("The centrigate Value is = %.2lf\n\n" ,cel);
} 
```

1.  `5/9`是整数除法，它给你`0`。你需要浮动。所以`5.0/9.0`要得到小数部分。
2.  我不知道你为什么这样做`printf(C);`。那根本行不通。采用

    ```
     printf("c = %f",c); 
    ```

3.  float 的格式说明符是`%f`. `%d`用于整数。

4.  您提供`C`存储`farenheit`。现在，这并没有错。但以后可能会引起混乱。尝试在代码中使用有意义的名称，以使其可读。名字越长越好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T10:56:38.250

问题：

*   中的格式说明符[`scanf()`](http://en.cppreference.com/w/c/io/fscanf)应该是`%f`，而不是`%d`用于`int`：

    ```
    /* scanf() returns number of assignments made.
       Check it to ensure a float was successfully read. */
    if (1 == scanf("%f", &C))
    {
    } 
    ```

*   第一个参数[`printf()`](http://en.cppreference.com/w/c/io/fprintf)应该是 a `const char*`，而不是 a `float`：

    ```
    printf("C=%f\n", C); 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T11:06:18.547

您应该进行一些更改，请参阅代码注释：

```
# include <stdio.h>

void main()
{
    float C;
    float output; //Better to declare at the beginning of the block

    printf("Pleas Enter Your Fahreinheit Value to see in centrigate=\n");
    scanf("%f",&C);    //Scanf need %f to read float

    printf("%f\n", C); //becareful with the printf, they need format too.

    output=(C-32)*(5.0/9);    //if you put 5/9 is not a float division, and returns int.
                             //you should add 5.0/9.

    printf("The centrigate Value is = %.2lf\n\n" ,output);
} 
```

我想仅此而已。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T10:57:00.107

该行`printf(C);`应该是`printf("%f\n", C);`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T11:01:44.863

`printf("%f\n",C)`而不是`printf(C)` 并且 `float output`应该在代码的开头，例如`float C`

# javascript - 是否可以让方法像 javascript 类中的属性一样起作用？

> ID：12638637
> 
> 赞同：1
> 
> 时间：2012-09-28T10:54:16.520
> 
> 标签：javascript

使用下面一段试图实现一个类的 javascript：

```
function aClass(){
  this.prop1 = this.getProp1();
}

aClass.prototype.getProp1 = function(){
  // do some stuff
  return result;
} 
```

然后我可以像这样使用它：

```
var obj = new aClass();
alert(obj.prop1); 
```

我现在想做的是：

```
obj.prop1 = "some value"; 
```

这当然会覆盖 prop1，我无法再从 getProp1 函数检索生成的结果。

所以简而言之，是否可以创建一个允许读写的属性，但在这两种情况下都调用一个函数来进行验证？

只要我能达到预期的效果，我很高兴能采用完全不同的方法来处理我在这里所拥有的东西。

它需要与较旧的浏览器一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:57:34.600

您可以为对象属性定义 getter 和 setter；看[这里](http://ejohn.org/blog/javascript-getters-and-setters/)和[这里](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects#Defining_getters_and_setters)。语法将与获取或设置属性相同，但将运行代码而不是愚蠢的值更改。

[**活生生的例子**](http://jsfiddle.net/7hFy4/)。

兼容性限制：不适用于 IE < 9。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:57:42.497

假设您不受某些旧 JS 实现的限制，您可以使用[Object.defineProperty](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty)。

# ruby-on-rails - emberjs 可以与 rails 缓存一起使用吗

> ID：12638639
> 
> 赞同：0
> 
> 时间：2012-09-28T10:54:30.610
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, ember.js

我有一个应用程序，我可以使用 emberjs 和使用 jqueryui 拖放创建页面。

我希望这些页面成为 google 抓取的 html 页面。

我只是在检查是否转到使用 emberjs 创建的页面。我可以使用 Rails 缓存来缓存页面，以便我可以在我的公共网站上将其提供给谷歌吗？

这可能吗？
有谁知道更好的方法吗？ember 核心团队有什么建议？

我知道有关于服务器端模板渲染的讨论，但是在这方面有什么进展吗？

非常感谢瑞克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T14:41:16.370

无法使用 Rails 缓存来缓存客户端 JS 应用程序生成的 HTML。

有些人在做服务器端模板渲染，但是，我还没有看到任何人运行 Ember 服务器端的例子。

支持这种情况是 Ember 团队的最终目标，但很难说何时会发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T11:39:26.467

只是一个想法。

当我更改每个页面时，我不能只从我的 ember 应用程序中保存当前的正文 html。然后我可以在我的公共应用程序上为搜索引擎等提供原始 html。

然后，这将使用 css 等来正确设置样式。

有人看到这种方法有任何问题吗？

谢谢

# javascript - 如何从 JavaScript/jQuery 创建推文？

> ID：12638641
> 
> 赞同：0
> 
> 时间：2012-09-28T10:54:33.630
> 
> 标签：javascript, jquery, twitter

我试图让用户从我的 jQuery 应用程序中发布链接。基本上，他们创建自己的页面，然后选择一些社交网络进行分享。单击“共享”后，应用程序会循环显示社交网络复选框，并根据选择向每个复选框发布信息。

我正在努力为 Twitter 找到一个好方法——无论我在网上看什么，我似乎都得到了相互矛盾的建议。

所以，基本上，应该发生的是：

*   用户在我的应用程序中选择“Twitter”复选框，然后点击“分享”。
*   然后应用程序应该在后台生成一个 url，并为用户的帐户创建一条推文。
*   如有必要，然后可以从 Twitter 向用户显示一个验证框（大概他们需要登录并验证推文）
*   推文被添加到他们的 Twitter 提要中。

听起来不是很复杂，但是我找不到方法！

## 编辑

感谢下面的回复，我现在得到了以下代码：

```
var serverUrl = 'https://twitter.com/intent/tweet?url="www.rocketreel.com"&text="Test"';

$.ajax({
  type: "GET",
  url: serverUrl,
  success: function(data) {
},

error: function(data) {
  var obj = jQuery.parseJSON(data);
  alert(obj.error);
  }
}); 
```

现在，当我运行它时，我得到（在控制台中）：

```
XMLHttpRequest cannot load https://twitter.com/intent/tweet?url=%22www.mysite.com%22&text=%22Test%22\. Origin null is not allowed by Access-Control-Allow-Origin. 
```

我目前无法从实际站点运行它，所以我使用 localhost - 这就是我得到这个的原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:59:57.737

您是否尝试过阅读[api](https://dev.twitter.com/)文档？

[https://dev.twitter.com/docs/tweet-button](https://dev.twitter.com/docs/tweet-button)

[https://twitter.com/about/resources/buttons#tweet](https://twitter.com/about/resources/buttons#tweet)

您可以检查推文按钮的代码并执行推文按钮后面的代码。很直接...

这是被调用的网址：

```
https://twitter.com/intent/tweet?original_referer=yoururl.com&source=tweetbutton&url=http://urltotweet.com&text=[text to tweet] 
```

**更新：**

您遇到了[跨源问题](http://en.wikipedia.org/wiki/Same_origin_policy)。除非您使用一些解决方法（[CORS，代理，......](https://stackoverflow.com/a/12245332/729375)因为您无法修改 twitter api，代理是您唯一的选择，否则您无法通过 ajax 从其他来源加载数据。但这也可能带来并发症..) 你可能甚至不需要。

只需打开一个位置为... [window.open(...)](http://www.w3schools.com/jsref/met_win_open.asp)的新窗口，或者使用提供的 url 创建一个[iframe](http://www.w3schools.com/TAGS/tag_iframe.asp)，而不是通过 ajax 加载完整的页面。

# mysql - 在查询中使用已选择的单元格

> ID：12638642
> 
> 赞同：0
> 
> 时间：2012-09-28T10:54:37.160
> 
> 标签：mysql, database

我想知道我在 MySQL 中是否有可能使用我之前在查询中所做的选择来制作数学语句？例如：

```
SELECT
 t.date as the_date,
 TIMETODIFF(the_date, NOW()) as date_diff,
 t.time_interval as t_interval,
 (date_diff / t_interval) as intervals_left
WHERE
 something = something
ORDER BY
 something DESC 
```

我的问题是，我不能使用这个名字，我给出了选择。例如，当我使用“the_date”来计算 date_diff 时，它会显示“未知列”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:02:24.287

您不能在该`select`零件中再次使用您在零件中定义的别名。您可以在`where`查询部分或其他后续部分中使用它。

# django - 如何获取相关对象？

> ID：12638643
> 
> 赞同：0
> 
> 时间：2012-09-28T10:54:41.373
> 
> 标签：django, django-models

我有三个模型：

```
class Model_1(models.Model):
    ...

class Model_2(models.Model):
    m1 = models.ManyToManyField(Model_1,...
    ...

class Model_3(models.Model):
    m2 = models.ManyToManyField(Model_2,...
    ... 
```

我得到Model_1的对象：

```
object = Model_1.objects.get(id=my_id) 
```

如何从对象中获取相关的 Model_3？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:42:32.957

如果您对 2 个查询没问题，

```
m2_objects = objects.model_2_set.all()
m3_objects = Model_3.objects.filter(m2__in=m2_objects) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T21:37:58.193

```
Model_3.objects.filter(m2__m1=object) 
```

这不直观，但如果值在相关对象集中，则 __exact 过滤器匹配。

编辑：这是shell输出，用于踢球。

```
>>> from myapp.models import *
>>> m1 = Model_1.objects.create(name='it')
>>> m2 = Model_2.objects.create()
>>> m3 = Model_3.objects.create()
>>> 
>>> m1.model_2_set.add(m2)
>>> m2.model_3_set.add(m3)
>>> Model_3.objects.filter(m2__m1=m1).count()
1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T11:34:34.240

`ManyToMany`给你一个集合而不是一个对象。你可以得到`Model_3`这样的对象

```
>>> object = Model_1.objects.get(id=my_id)
>>> for o2 in object.model_2_set.all():
>>>     for o3 in o2.model_3_set.all():
>>>         print o3  # o3 is one of Model_3 object 
```

更改为您提供`model_2_set`的任何内容。`related_name`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T12:41:29.130

这是一个带有 prefetch_related 的解决方案，它只执行 3 个查询。

```
object = Model_1.objects.get(id=my_id) # 1 query
m2_set = object.model2_set.prefetch_related('model3_set') # 2 queries for model 2 and 3
for o3 in chain(*(m2.m3_set.all() for m2 in m2_set)): # chaning o3 sets (no query)
    print o3 # probably no query 
```

来源：prefetch_related：[https](https://docs.djangoproject.com/en/dev/ref/models/querysets/#prefetch-related) ://docs.djangoproject.com/en/dev/ref/models/querysets/#prefetch-related 链：[http://docs.python.org/release/2.6.5/library/itertools。 html#itertools.chain](http://docs.python.org/release/2.6.5/library/itertools.html#itertools.chain)

# wordpress - 如何检查 WordPress 页面是否有另一个页面作为祖先？

> ID：12638644
> 
> 赞同：1
> 
> 时间：2012-09-28T10:54:43.163
> 
> 标签：wordpress, wordpress-theming

正如标题所示，我试图找出某个页面是否有另一个页面作为父母或祖父母或曾祖父母等......

要检查父案例，以下工作

```
if (1 == $post->post_parent) { 
```

但是在检查祖先时

`if (1 == $post->post_ancestor) {`

似乎不起作用。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T02:16:43.387

除了“ninja”提供的功能外，还要注意你的条件不正确：“post_parent”包含父页面的ID，如果当前页面是父页面，则为0。

所以询问页面是否有父页面的实际条件是：

```
if($page->post_parent != 0)
    // page has a parent
else
    // page is a parent 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T11:50:12.583

对此没有内置支持，但您可以使用此辅助函数，只需将其放入您的 functions.php 中：

```
function get_ancestor() {
global $post;
if ($post->post_parent) {
    $ancestors=get_post_ancestors($post->ID);
    $root=count($ancestors)-1;
    $parent = $ancestors[$root];
} else {
    $parent = $post->ID;
}

    return $parent;
} 
```

它将返回作为祖先的帖子的 ID，因此您可以像这样使用它：

```
if(1 == get_ancestor()) {
    // Code here
} 
```

# html - 使用CSS或其他代替js将小数显示为上标

> ID：12638645
> 
> 赞同：5
> 
> 时间：2012-09-28T10:54:52.823
> 
> 标签：html, css

我有很多：

```
<span class="price">17.998,80</span> 
```

客户希望我替换为：

```
<span class="price">17.998<sup>80</sup></span> 
```

...好吧，让javascript ...但是等等！

难道不能通过一些花哨的 CSS/CSS 技巧获得等效的结果吗？

（大 $ 数字，没有小数，上标美分 - ，是我的小数分隔符）

亲切的问候，

斯蒂恩

注意：这很好用：

```
$('span.price').html($('span.price').html().replace(',','<sup>')+'</sup>'); 
```

但偏好是所有 CSS/CSS3 解决方案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T11:35:03.470

不，没有为此目的的 CSS 技巧：您不能在不将它们转换为元素的情况下引用内容中小数点后的数字。

一个`sup`元素并不能真正满足这个目的，因为它将字符放在上标位置，使它们看起来像一个指数。更好的方法是生成

```
<span class="price">17.998<span class="cents">80</span></span> 
```

并使用

```
 .cents {
   font-size: 0.7em;
   position: relative;
   bottom: 0.25em;
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T11:00:36.003

最好的方法是找到您的所有价格并添加 HTML `<sup> ... </sup>`，因为如果有人不加载 javascript，则没有**HTML 标记**。

并且没有**CSS**技巧。

**CSS**所做的唯一一件事就是将样式应用于`<sup>`元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T11:10:34.773

我认为你被 Javascript 困住了，除非你能得到你用 AJAX 调用的服务，以两种元素返回每个价格：欧元和美分：

```
<span class="priceEuros">17.998</span>,<span class="priceCents">80</span> 
```

当然，如果它们是单独的元素，它们将很容易单独设置样式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-09T18:47:24.080

# CSS 上标和下标：

```
.super{
  vertical-align: super;
 }
.sub{
  vertical-align: sub;
 } 
```

[（[来源](https://cssnewbie.com/create-superscript-and-subscript-text-in-css/)）]

# java - 在 OSGi 环境中提供 Web 服务

> ID：12638649
> 
> 赞同：3
> 
> 时间：2012-09-28T10:55:09.790
> 
> 标签：java, web-services, osgi, apache-felix

我正在寻找一种在 OSGi 环境中提供 Web 服务的方法。有没有人有经验并且可以指出我正确的方向？

到目前为止，我知道[Apache CXF DOSGi](http://cxf.apache.org/distributed-osgi.html)，但我也在寻找替代品。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T08:14:36.740

不仅有 CXF dOSGi。您也可以使用普通的 CXF 服务。我已经完成了一个关于在 OSGi 中使用 CXF webservices 的教程。它显示了 JAX-WS 和 JAX-RS 服务。在 OSGi 中使用 CXF 的最简单方法是使用 Apache Karaf，因为 CXF 功能允许使用简单的命令安装 CXF。我还建议使用 maven 和示例中所示的 maven bundle 插件。

[http://www.liquid-reality.de/display/liquid/2011/12/22/Karaf+Tutorial+Part+4+-+CXF+Services+in+OSGi](http://www.liquid-reality.de/display/liquid/2011/12/22/Karaf+Tutorial+Part+4+-+CXF+Services+in+OSGi)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:04:47.950

Marcel Offermans 提供了一个很棒的使用[Amdatu](http://amdatu.org/components/web.html)的教程，它提供了 JAX-RS API 以在 OSGi 中轻松实现 RESTful Web 服务。链接：[http ://amdatu.org/howto/createwebapp.html](http://amdatu.org/howto/createwebapp.html)

# python - 清除条目小部件框

> ID：12638664
> 
> 赞同：2
> 
> 时间：2012-09-28T10:55:49.027
> 
> 标签：python, tkinter, widget, tkinter-entry

我想使用一个条目小部件来获取 1 到 9 之间的数字。如果按下任何其他键，我想将其从显示中删除。

```
 def onKeyPress(event):
        if event.char in ['1', '2', '3', '4', '5', '6', '7', '8', '9']
            ...do something
            return

        # HERE I TRY AND REMOVE AN INVALID CHARACTER FROM THE SCREEN
        # at this point the character is:
        #   1) visible on the screen
        #   2) held in the event
        #   3) NOT YET in the entry widgets string
        # as the following code shows...
        print ">>>>", event.char, ">>>>", self._entry.get()
        # it appeARS that the entry widget string buffer is always 1 character behind the event handler

        # so the following code WILL NOT remove it from the screen...
        self._entry.delete(0, END)
        self._entry.insert(0, "   ")

    # here i bind the event handler    
    self._entry.bind('<Key>',  onKeyPress) 
```

好的，我怎样才能清除屏幕？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:11:48.193

您进行输入验证的方式是错误的。你所问的不能用你发布的代码来完成。一方面，正如您所发现的，当您绑定 on 时，默认情况下绑定会在角色出现在小部件中*之前*`<<Key>>`触发。

 *我可以为您提供解决方法，但正确的答案是使用内置工具进行输入验证。查看条目小部件的`validatecommand`和`validate`属性。[This answer](https://stackoverflow.com/a/4140988/7432) to the question [Interactively validate Entry widget content in tkinter](https://stackoverflow.com/q/4140437/7432)将向您展示如何。该答案显示了如何针对上/下进行验证，但是很容易将其更改为与一组有效字符进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T11:46:44.067

```
import Tkinter as tk

class MyApp():
    def __init__(self):
        self.root = tk.Tk()
        vcmd = (self.root.register(self.OnValidate), 
                '%d', '%i', '%P', '%s', '%S', '%v', '%V', '%W')
        self.entry = tk.Entry(self.root, validate="key", 
                              validatecommand=vcmd)
        self.entry.pack()
        self.root.mainloop()

    def OnValidate(self, d, i, P, s, S, v, V, W):
        # only allow integers 1-9
        if P == "":
            return True
        try:
            newvalue = int(P)
        except ValueError:
            return False
        else:
            if newvalue > 0 and newvalue < 10:
                return True
            else:
                return False

app=MyApp() 
```

取自[这个](https://stackoverflow.com/questions/4140437/python-tkinter-interactively-validating-entry-widget-content)答案，修改后的验证只允许整数 1-9。

（我确信有更好的方法来编写验证，但据我所知，它可以完成这项工作。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-09T16:26:35.570

清除条目小部件的一种简单方法是：

```
from tkinter import *

tk = Tk()

# create entry widget

evalue = StringVar()
e = Entry(tk,width=20,textvariable=evalue)
e.pack()

def clear(evt):
    evalue.set("")   # the line that removes text from Entry widget

tk.bind_all('<KeyPress-Return>',clear)  #clears when Enter is pressed
tk.mainloop() 
```

您可以在任何您希望的上下文中使用它，这只是一个示例*

# android - 当用户到达某个位置时通知用户

> ID：12638668
> 
> 赞同：3
> 
> 时间：2012-09-28T10:56:07.567
> 
> 标签：android, gps, android-pendingintent, locationmanager

在我正在开发的应用程序中，其中一项功能是在用户到达他们之前设置的位置时通知用户。

下面的代码在 Activity 的 addProximityAlert 中：

```
final Intent intent = new Intent(PROX_ALERT_INTENT);
final PendingIntent pendingIntent = PendingIntent.getBroadcast(
        InfoActivity.this, 0, intent, PendingIntent.FLAG_ONE_SHOT);
LocationManager locationManager = (LocationManager) this
        .getSystemService(Context.LOCATION_SERVICE);
locationManager.addProximityAlert(18.7726271, 98.9738381, 5000, -1,
        pendingIntent);
this.locationReminderReceiver = new LocationReminderReceiver();
final IntentFilter filter = new IntentFilter(PROX_ALERT_INTENT);
this.registerReceiver(this.locationReminderReceiver, filter);

@Override
protected void onPause() {
    super.onPause();
    if (this.locationReminderReceiver != null) {
        Log.i("unregisterReceiver", "unregisterReceiver");
        this.unregisterReceiver(this.locationReminderReceiver);
    }
} 
```

这是接收器：

```
public class LocationReminderReceiver extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) {

    final String key = LocationManager.KEY_PROXIMITY_ENTERING;
    final Boolean entering = intent.getBooleanExtra(key, false);

    if (entering) {
        Toast.makeText(context, "LocationReminderReceiver entering", Toast.LENGTH_SHORT).show();
        Log.i("LocationReminderReceiver", "entering");
    } else {
        Toast.makeText(context, "LocationReminderReceiver exiting", Toast.LENGTH_SHORT).show();
        Log.i("LocationReminderReceiver", "exiting");
    }
}
} 
```

`unregisterReceiver`它工作正常，但我每次销毁 Activity 时都需要调用- 这意味着我的应用程序不再通知用户。但是我想在用户靠近该位置时通知用户，直到他取消，或者即使他们关闭应用程序也已经收到通知。

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T11:01:13.297

如果用户关闭您的活动，您确实应该取消注册您的位置监听器。

听起来您需要将应用程序的一部分（监控位置并提醒用户的位）移动到后台服务，以便即使在用户关闭应用程序后它也可以继续运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T05:54:16.260

我需要做的就是在清单中定义接收器

然后我不再需要在 Activity 中注册/注销

```
 <receiver android:name="th.clbs.android.broadcastreceiver.LocationReminderReceiver" >
        <intent-filter>
            <action android:name="th.co.clbs.action.LOCATION_REMINDER" />
        </intent-filter>
    </receiver> 
```

# flash - 带有 Flash 后备的 HTML5 以显示 Wowza 流

> ID：12638669
> 
> 赞同：2
> 
> 时间：2012-09-28T10:56:18.577
> 
> 标签：flash, html5-video, wowza

我正在尝试使用 VideoJS 显示在最新平台（桌面和移动）上可读的视频流。

该视频托管在 Wowza 服务器上，并提供多种格式：

```
rtmp://176.9.93.207:1935/vod/mp4:inazimi.mp4
http://176.9.93.207:1935/vod/mp4:inazimi.mp4/playlist.m3u8 
```

我无法让它与[VideoJS](http://videojs.com/)一起工作。我也尝试过使用[MediaElement](http://mediaelementjs.com/)和[Projekktor](http://www.projekktor.com/)，但没有成功。唯一有效的是具有以下配置的[JW Player](http://www.longtailvideo.com/players)（使用 IE9、FF15、Chrome、iPad 测试），但我需要一个开源解决方案：

```
jwplayer("vid").setup({
    height: 276,
    width: 490,
    image: "video.jpg",
    modes: [
        {
            type: "html5",
            config: {
                file: "http://176.9.93.207:1935/vod/mp4:inazimi.mp4/playlist.m3u8"
            }
        },
        {
            type: "flash",
            src: "player.swf",
            config: {
                file: "mp4:inazimi.mp4",
                streamer: "rtmp://176.9.93.207:1935/vod",
                provider: "rtmp"
            }
        },
        { type: "download" }
    ]
}); 
```

看起来脚本选择了错误的协议，但我不知道如何正确配置它。有没有人在 HTML5/Flash 播放器中使用 Wowza 视频取得成功？

# spring - mvn库问题

> ID：12638673
> 
> 赞同：-1
> 
> 时间：2012-09-28T10:56:29.993
> 
> 标签：spring, maven, jar, mybatis

嗨，我正在用 spring 做 mybatis。

我使用 mybatis.jar 和 mysql-connector.jar 作为除了 spring jars 的 jars。

我为此使用了 Maven 存储库。

使用单个弹簧，我能够运行简单的弹簧应用程序（简单的 hello 程序）

但是在 mvn 存储库中添加 mybatis.jar 和 connector.jar 后，它没有显示任何编译器错误。

当它被执行时，它说 mybatis.jar 和 connector.jar 错误。

所以我将它们包含在 web-inf/lib 文件夹中，然后程序正在运行。

为什么它不能与 maven 一起使用..我做错了什么吗..

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:23:34.490

任何一个：

*   您的项目不是类型`war`，
*   或者您提到的依赖项不正确`scope`；它们应该没有范围，或者`compile`范围 - 这是等效的。

# php - Symfony2：判断控制器是从开发环境调用还是从生产环境调用

> ID：12638682
> 
> 赞同：8
> 
> 时间：2012-09-28T10:57:05.330
> 
> 标签：php, symfony

我开发了一个控制器，用于使用 JSON 响应 AJAX 请愿：

```
class PeopleController extends Controller
{
public function listAction()
{
    $request = $this->getRequest();

    // if ajax only is going to be used uncomment next lines
    //if (!$request->isXmlHttpRequest())
    //throw $this->createNotFoundException('The page is not found');

    $repository = $this->getDoctrine()->getRepository('PeopleManagerBundle:People');
    $items = $repository->findAll();

    // yes, here we are retrieving "_format" from routing. In our case it's json
    $format = $request->getRequestFormat();

    return $this->render('::base.'.$format.'.twig', array('data' => $items));

} 
```

我已启用 HTML 视图，因为它对调试非常有用，但我想限制在应用程序处于生产状态时使用 _format=html 调用此控制器的可能性。如何确定控制器是从开发环境调用还是从生产环境调用？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-28T12:18:06.157

从服务容器中检索内核并使用内置方法：

```
$kernel = $this->get('kernel');
$kernel->isDebug(); // in most cases: false if env=prod, true if env=dev/test
$kernel->getEnvironment(); // prod, dev, test 
```

# iphone - 如何保存 UIwebview 的浏览历史

> ID：12638683
> 
> 赞同：2
> 
> 时间：2012-09-28T10:57:06.017
> 
> 标签：iphone, ios, xcode, uiwebview

我正在开发一个应用程序，其中需要在 Web 中显示维基百科链接

视图。还有在表格视图中显示通过 Web 视图打开的页面的历史记录。我在 goo 上找到了它

gle但找不到任何解决方案。我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T11:08:55.567

`UIWebView`有`goBack`和`goForward`方法。参考[这里]。（[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)）

不要忘记将`UIWebViewDelegate`.h 及其对象添加`delegate`到`self`.

也可以这样`url`存放`NSMutableArray`：

```
- (BOOL) webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {
    NSURL *documentURL = request.mainDocumentURL;

    if(![history containsObject:documentURL.absoluteString]){
        [arrBrowseHistory addObject:documentURL.absoluteString];
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T11:20:07.813

以下代码用于向后和向前进入 UIWebViewController

```
 - (IBAction)backButtonClicked:(id)sender {
      [webView goBack];
    }

    - (IBAction)backButtonClicked:(id)sender {
      [webView goForward];
    } 
```

# xcode - 如何进行全局segue？

> ID：12638685
> 
> 赞同：3
> 
> 时间：2012-09-28T10:57:13.940
> 
> 标签：xcode, cocoa-touch, uinavigationcontroller, storyboard, segue

我有一个复杂的故事板，并且我已经对导航控制器进行了定制，使其具有一个带有 3 个按钮的修复标题（客户要求）。无论您在应用程序的哪个位置，这三个按钮都会推送 3 个不同的视图。

所以我想要的是有一个“全球赛格”的孩子。就像一个segue，无论我是在VC1还是VC2还是VC3上，如果我调用`[self performSegueWithIdentifier:@"segueToMe" sender:self ]`它都会转到对应的视图。

有没有办法做到这一点？我想避免让 7/8 segues 指向这 3 个视图控制器中的每一个。

# mysql - MySQL 非常慢的循环

> ID：12638686
> 
> 赞同：6
> 
> 时间：2012-09-28T10:57:18.110
> 
> 标签：mysql, loops, time, while-loop, long-integer

我在 MySQL 中做了一个非常简单的过程（一个 while 循环）：

```
BEGIN

    DECLARE start INT;
    DECLARE ending INT;

    SET start = 1;
    SET ending = 4000000;

    WHILE (start <= ending) DO
        SET start = start + 1;
    END WHILE;
END 
```

在双核机器上这需要大约 26 秒（每个核心 100%），我不明白为什么。

你能给我一个答案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T11:42:39.910

是的，与 C# 或 Java 等其他编程语言相比，存储过程非常慢。计算方面就是这样。同样的代码在 SQL Server 中也会很慢。可能比 MySQL 快，但您仍然需要等待几秒钟，直到它完全执行。你最好用一种编程语言来做这件事，它可以在一秒钟内完成这样的任务。

换句话说：

存储过程性能缓慢是在数据库中实现计算量大的业务逻辑通常不明智的原因之一。由于网络不再是它们曾经的瓶颈，因此通常最好将数据提取到应用程序层并用您选择的编程语言对其进行处理，即使这需要一些额外的数据库往返。

# java - 模式 matcher.group() 越界异常

> ID：12638691
> 
> 赞同：1
> 
> 时间：2012-09-28T10:57:28.233
> 
> 标签：java, regex

我有字符串：

```
 String myString1 = "22223 2342 1 98 333 3 665"

    String myString2 = "22323 3 222 34 33 1 98" 
```

我只想提取具有 1 位数字的值，然后是空格，然后只有两位数字。

```
 private static final Pattern p3DigitsGap = Pattern.compile(".*\\b\\d\\s\\d{2}\\b.*"); 
```

在上述两个字符串中，我希望提取“1 98”，如果模式位于字符串的末尾，我不能只用空格分割。

```
 Matcher matcher = p3DigitsGap.matcher(myString1);
        if (matcher.find()) {
            Log.i("Matcher found");
            while (matcher.find() == true) {
                Log.i("Matcher is true");
                String extract = matcher.group(1);
                Log.d("extract: " + extract);
            }
        } 
```

如果我删除 while 循环，则永远不会填充字符串提取并引发越界异常。我在 while 循环中添加了 matcher.find() 不等于 true。

我尝试将我的模式交换为：

```
 Pattern p3DigitsGap = Pattern.compile("[^0-9a-z]\\d\\s\\d{2}[^0-9a-z]"); 
```

我认为使用 .*\\b 可能会导致问题，但我得到了相同的结果。

请有人可以帮助我了解我哪里出错了。

提前致谢。

答案编辑：我将 Reimeus 的答案标记为正确，因为它通过使用具有上述正则表达式的组来工作。另请参阅 Tim Pietzcker 的答案，以了解改进我原来的正则表达式的替代解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T11:02:19.527

匹配时最好使用[组，因此您可以使用：](http://docs.oracle.com/javase/tutorial/essential/regex/groups.html)

```
Pattern p3DigitsGap = Pattern.compile(".*\\b(\\d\\s\\d{2})\\b.*");
Matcher matcher = p3DigitsGap.matcher(myString1);
if (matcher.find()) {
   Log.i("Matcher is true");
   String extract = matcher.group(1);
   Log.d("extract: " + extract);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T11:05:24.743

你没有定义组，你可以使用定义一个组`( and )`，我认为你的代码应该是：

```
 private static final Pattern p3DigitsGap = Pattern.compile("\\b\\d\\s\\d{2}\\b");
 Matcher matcher = p3DigitsGap.matcher(myString1);
 while (matcher.find()) {
   Log.i("Matcher is true");
   String extract = matcher.group(0);
   Log.d("extract: " + extract);
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T11:00:57.293

两个问题：

*   您的正则表达式中没有任何捕获组，因此任何匹配的最高有效组将是`.group(0)`（整个匹配）。

*   您的示例字符串仅匹配一次，但您调用`matcher.find()`了两次，因此第二次调用（在`while`循环中）返回不匹配。

尝试这个：

```
Pattern p3DigitsGap = Pattern.compile("\\b\\d\\s\\d{2}\\b");
Matcher matcher = p3DigitsGap.matcher(myString1);
if (matcher.find()) {
    Log.i("Matcher found");
    String extract = matcher.group(0);
    Log.d("extract: " + extract);
} 
```

# c#-4.0 - 使用 EntityDataSource 在 DetailsView 上插入后获取唯一 ID

> ID：12638692
> 
> 赞同：1
> 
> 时间：2012-09-28T10:57:29.703
> 
> 标签：c#-4.0, detailsview, entitydatasource

我正在使用 C#、.net 4.0。我有一个用于插入值的 DetailsView。DetailsView 使用 DataSourceId 属性数据绑定到 EntityDataSource 控件。

EntityDataSource 正在连接到名为 Issues 的 Sql Server 2008 数据库表（通过 EDMX 文件）。

插入发生后，我需要从新插入的行中找到唯一 ID。sql表使用UniqueIdentifier数据类型并且是id列被称为“IssueId”。

我试过这个：

```
protected void DetailsView1_ItemInserted(object sender, DetailsViewInsertedEventArgs e)
{
    if (e.AffectedRows > 0)
    {
        int issueId = 0;
        int.TryParse(e.Values["IssueId"].ToString(), out issueId);
    }
} 
```

但是，在我说“int.TryParse”的那一行，我得到一个“对象引用未设置为对象的实例”。

我需要知道的是如何从刚刚插入的项目中获取唯一 ID？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T15:18:22.627

所以，四个月后回到这个...

我认为您无法在 DetailsView 上的 ItemInserted 事件期间获得唯一 ID。相反，您必须从 EntityDataSource 控件上的 Inserted 事件中获取它。

像这样：

```
protected void edsIssues_Inserted(object sender, EntityDataSourceChangedEventArgs e)
{
        int issueId = 0;
        issueId = ((Model.Issue)e.Entity).IssueId;
} 
```

# iphone - 在 iOS 6 的 uipickerview 中选择组件 1 中的行时崩溃

> ID：12638695
> 
> 赞同：0
> 
> 时间：2012-09-28T10:57:43.487
> 
> 标签：iphone, uipickerview, ios6

我有一个在 iOS 5.1 之前运行良好的应用程序。但最近在 iOS 6 中，当我尝试以编程方式选择组件中的一行时，它开始崩溃。以下是我的代码：

```
UIPickerView *pickerView = [[UIPickerView alloc] initWithFrame:CGRectMake(0, 40, 320, 216)];
pickerView.delegate=self;
pickerView.dataSource=self;
pickerView.showsSelectionIndicator=YES;
[pickerView setTag:10];
//[pickerView selectRow:0 inComponent:0 animated:YES];
int index1 = [arrHours indexOfObject:[arrTitle objectAtIndex:0]];
int index2 = [arrMins indexOfObject:[arrTitle objectAtIndex:1]];

[actionSheet addSubview:pickerView];
[pickerView selectRow:index1 inComponent:0 animated:YES];
[pickerView selectRow:index2 inComponent:1 animated:YES];
[pickerView release]; 
```

当我尝试在组件 0 中选择行时，它运行良好，但是当我尝试在组件 1 中选择行时出现崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T15:56:16.950

好的，调试时发现错误。问题是因为数据中的 00。早期的框架自行将其转换为 0，但在新的 sdk (ios6) 中，当我将 00 视为 0 时，它开始产生错误。

# c# - 为什么此代码在 Windows 7 上有效，但在 Windows XP 上无效？

> ID：12638698
> 
> 赞同：7
> 
> 时间：2012-09-28T10:57:52.900
> 
> 标签：c#, .net, windows, winforms, listview

一点背景知识：我是 WPF 到 WinForms 的转换者，一段时间以来我一直在迁移我的应用程序。

一位朋友向我报告说，我的代码在 Windows XP 上无法运行（它在启动时会产生堆栈溢出），即使它在 Windows 7（我在其中开发）上运行良好。

经过一番研究，导致问题的原因大致如下：

```
 private void listView1_SelectedIndexChanged(object sender, EventArgs e)
 {
     listView1.SelectedIndices.Clear();
     listView1.Items[0].Selected = true;
 } 
```

既然我注意到这个明显糟糕的决定，我就想知道为什么它不能在 Windows XP 上运行。我想知道*为什么它可以在 Windows 7 上运行*。

显然在某些时候编译器会弄清楚我正在尝试做什么并防止一次又一次地触发相同的事件，但**我宁愿让它什么都不做，这样我就可以看到并消除错误我正在开发的平台，而不必同时在两个平台下测试它。**回到 WPF，我可以通过将 e.Handled 设置为“true”来手动处理这种行为，在 WinForms 中显然没有这样的事情。

是否有某种编译器标志？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T11:10:46.163

尝试这个：

```
private void listView1_SelectedIndexChanged(object sender, EventArgs e)
{
   if (!listView1.Items[0].Selected) {
       listView1.SelectedIndices.Clear();
       listView1.Items[0].Selected = true;
   }
} 
```

您只想在第一个项目上设置一次选择。问题是它很可能进入一个永久循环。

至于为什么 Windows 7 比 XP 更宽容，我不能说。可能是 LVM_* 消息的处理顺序或其他任何东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T11:11:21.590

检查并查看 .NET 版本是否有任何不同。如果您的 Windows 7 机器上的 .NET 版本比 XP 上的新版本（很可能），那么即使您的目标是较早的版本，也可能存在差异。

查看[MSDN 关于 .NET 向后兼容性的说明](http://msdn.microsoft.com/en-us/library/ff602939%28v=vs.110%29.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T11:05:14.597

这可能有效（未测试）

```
private void listView1_SelectedIndexChanged(object sender, EventArgs e)
{
   if(Environment.OSVersion.Version.Major < 6) listview1.SelectedIndexChanged -= new EventHandler(listView1_SelectedIndexChanged);
   listView1.SelectedIndices.Clear();
   listView1.Items[0].Selected = true;
   if(Environment.OSVersion.Version.Major < 6) listview1.SelectedIndexChanged += new EventHandler(listView1_SelectedIndexChanged);
} 
```

编辑看看它的操作系统特定的：o

# java - java中对外部方法的模拟调用

> ID：12638713
> 
> 赞同：4
> 
> 时间：2012-09-28T10:59:27.840
> 
> 标签：java, methods, mocking, easymock, powermock

我有一个关于如何在 java 中模拟一些调用的问题，例如，假设我有这个：

```
import whatever.package;

Class myClass extends otherClass {

    public void myMethod() {
        ...
        int a = methodCall();
        ...
    }
} 
```

问题是“methodCall()”来自包“whatever.package”，它是从“otherClass”继承的。是否可以模拟它以便返回我想要的任何 int ？

非常感谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T11:52:21.453

**在评论中澄清之后**

如果它继承，您可以使用我提出的最后一个模式（测试扩展 myClass）并简单地覆盖 methodCall()

* * *

在这个答案中，我假设 methodCall() 是您拥有的另一个类的非静态方法。

让我们修改示例代码：

```
import whatever.package;

Class myClass 
{
    public void myMethod() 
    {
        ...
        anotherClass aClass = new anotherClass();
        int a = aClass.methodCall();
        ...
    }
} 
```

所以，现在我们要模拟出另一个类的methodCall()。

正常的程序是使用接口并将“接线”推到其他地方，以避免紧密耦合。对依赖注入和类似概念进行一些研究。

简而言之，使用 new anotherClass() 创建紧密耦合。您可以在 myClass 构造函数中或通过 getter 和 setter 注入 anotherClass 对象。我假设您需要模拟来编写单元测试。考虑以下代码：

```
import whatever.package;

Class myClass 
{
    private IanotherClass another;

    public void SetAnotherClass(IAnotherClass aClass)
    {
         another = aClass;
    }

    public void myMethod() 
    {
        ...
         int a = another.methodCall();
        ...
    }
} 
```

测试代码：

```
 myClass testedClass = new myClass();
   testedClass.SetAnotherClass(new MyAnotherClassMock());
   testedClass.myMethod(); 
```

至于注入依赖项和针对接口而不是实现进行编程，关于该主题有很多要阅读的内容 - 只需谷歌它！

如果您不想重新设计整个代码并且只需要快速（并且有点脏）修复，您可以考虑将创建 anotherClass 实例移动到单独的方法中，然后简单地让您的测试类从您的类继承，覆盖提到的方法（这个并非总是可能 - 一切都取决于您的实际代码）

例子：

```
Class myClass 
{
    public void myMethod() 
    {
        ...
        IanotherClass aClass = GetAnotherClassInstance();
        int a = aClass.methodCall();
        ...
    }

    protected IanotherClass GetAnotherClassInstance()
    {
        return new anotherClass();
    }
}

Class MyTestClass extends myClass
{
   @overwrite
   protected IanotherClass GetAnotherClassInstance()
   {
        return new anotherClassMock();
   }
} 
```

然后只需使用 myTestClass 进行测试！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-28T11:34:42.473

无需重新设计代码？

模拟 methodCall 的类并在 classpathorder 中向上推。

# php - Shopify 词法错误：json 文本中的字符无效

> ID：12638714
> 
> 赞同：2
> 
> 时间：2012-09-28T10:59:32.073
> 
> 标签：php, shopify

我正在使用“cmcdonaldca”的shopify PHP客户端 - [https://github.com/cmcdonaldca/ohShopify.php](https://github.com/cmcdonaldca/ohShopify.php)

在创建 webhook 时，它会在响应中给出词法错误。这里是代码。

$sc = new ShopifyClient($_SESSION['shop'], $_SESSION['token'], $api_key, $secret);

$b = '{"webhook":{"topic":"orders/create","address":"http://www.abc.com","format":"json"}}';

```
try 
{
       $webhooks = $sc->call('POST','/admin/webhooks.json',$b);
}
catch (ShopifyApiException $e)
{
    var_dump($e->getResponse());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:40:20.680

您需要做的就是因为我以 JSON 格式发布请求。shopify 库在读取路径后所做的事情是，将请求转换为 json

“json_encode($params);”

最后重新排列斜线

stripslashes(json_encode($params));"

因为我们的请求是在 json 中，所以我们不需要再次编码它，如果我们这样做，它会给出错误。

只需在“shopify.php”中省略“json_encode”和“stripslashes”，就可以了。

# database - 无法删除数据库

> ID：12638716
> 
> 赞同：0
> 
> 时间：2012-09-28T10:59:34.117
> 
> 标签：database, postgresql

尝试使用 postgres 删除数据库，但我正在`dropdb: could not connect to database postgres: FATAL: Ident authentication failed for user "root".`使用的命令是**"dropdb databasename"**。请建议

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T17:23:44.370

通常（例如在 Debian 或 Ubuntu 上）*系统用户* `root`没有*数据库用户*的权限。

您的错误消息表明您正试图以*系统用户* `root`身份删除数据库。相反，对*系统用户* `postgres`执行相同操作- 或对具有维护数据库权限的任何*系统用户*（默认情况下也称为）执行相同操作，并且*关联的数据库用户*具有删除相关数据库的必要权限。`connect``postgres`

 *```
sudo -u postgres dropdb databasename 
```

[更多细节在 dropdb 的手册中。](http://www.postgresql.org/docs/current/interactive/app-dropdb.html)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-28T11:02:46.153

标准的做法是

> 删除数据库 [如果存在] nameDB*

# java - PDFRenderer 在打开加密的 pdf 时出错

> ID：12638718
> 
> 赞同：1
> 
> 时间：2012-09-28T10:59:45.223
> 
> 标签：java, pdfrenderer

我正在尝试通过 PDFRenderer 库在 java 程序中打开一个加密的 pdf 文件。编译代码时，PDFPassword 类出错。这是我的代码的一部分。

```
 RandomAccessFile raf = new RandomAccessFile(new File(filename), "r");
    FileChannel fc = raf.getChannel();
    ByteBuffer buf = fc.map(FileChannel.MapMode.READ_ONLY, 0, fc.size());
    String password = "58e72df9-0";
    try{
    PDFPassword pass = new PDFPassword(password);
    //System.out.println(PDFPassword.nonNullPassword(pass));
    PDFFile pdffile = new PDFFile(buf, pass); 
```

我得到的错误是：

```
Exception in thread "main" java.lang.ExceptionInInitializerError
at com.sun.pdfview.decrypt.PDFPassword$PDFDocEncodingByteGenerator.createCharsetEncoder(PDFPassword.java:256)
at com.sun.pdfview.decrypt.PDFPassword$CharsetEncoderGenerator.generateBytes(PDFPassword.java:222)
at com.sun.pdfview.decrypt.PDFPassword.generatePossiblePasswordBytes(PDFPassword.java:167)
at com.sun.pdfview.decrypt.PDFPassword.getPasswordBytes(PDFPassword.java:111)
at com.sun.pdfview.decrypt.StandardDecrypter.<init>(StandardDecrypter.java:159)
at com.sun.pdfview.decrypt.PDFDecrypterFactory.createStandardDecrypter(PDFDecrypterFactory.java:316)
at com.sun.pdfview.decrypt.PDFDecrypterFactory.createDecryptor(PDFDecrypterFactory.java:99)
at com.sun.pdfview.PDFFile.readTrailer(PDFFile.java:1051)
at com.sun.pdfview.PDFFile.parseFile(PDFFile.java:1175)
at com.sun.pdfview.PDFFile.<init>(PDFFile.java:126)
at pdfview.pdfView.main(PdfView.java:49)
    Caused by: java.lang.ArrayIndexOutOfBoundsException: -128
at com.sun.pdfview.PDFDocCharsetEncoder.<clinit>(PDFDocCharsetEncoder.java:68)
... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:59:31.117

我不确定您的问题，但也：

如果你使用[这个](https://github.com/jblough/Android-Pdf-Viewer-Library)库，它会出现递归调用自身的加密错误。

我遇到了 stackoverflow 的加密问题。我发现了问题并解决了 stackoverflow 问题。[像这样](https://github.com/jblough/Android-Pdf-Viewer-Library/issues/8)更改 CryptoCipher 类

也许这可以解决您的问题

# c# - 丢失的 dll - Microsoft.Research.Kinect.dll

> ID：12638719
> 
> 赞同：2
> 
> 时间：2012-09-28T10:59:53.587
> 
> 标签：c#, dll, sdk, kinect

嗨！

在哪里可以找到 Microsoft.Research.Kinect.dll？我已经为此安装了 Kinect SDK 1.5 和工具包，但我没有找到 dll。我不知道。如果你知道请与我分享

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-28T11:06:20.950

下次请google你的问题。我用谷歌搜索了 dll 的名称并想出了[这篇文章](http://robrelyea.wordpress.com/2012/05/30/faq-where-can-i-find-microsoft-research-kinect-dll/)。

> Microsoft.Research.Kinect.dll 是我们从 2011 年开始的早期 beta 版本（beta 1、beta 1 refresh 和 beta 2）的 DLL 名称。
> 
> 在我们的最终版本 1.0（2012 年 2 月 1 日）中，我们将 DLL 名称更改为 Microsoft.Kinect.dll，并对 Kinect for Windows SDK 的 API 表面进行了重大重构。

所以它被重命名了，您所关注的教程/文章使用的是旧代码，因此您需要迁移其中的一些代码，有关迁移提示，请参阅[本文](http://robrelyea.wordpress.com/2012/02/01/k4w-details-of-api-changes-from-beta2-to-v1-managed/)

简而言之：

**DLL的：**

`Microsoft.Research.Kinect.dll`至`Microsoft.Kinect.dll`

**命名空间：**

`Microsoft.Research.Kinect.Nui` **并** `Microsoft.Research.Kinect.Audio`_`Microsoft.Kinect`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T10:12:02.940

如果您仍想使用 de old beta Kinect SDK，您可以从此处下载：

[http://www.microsoft.com/en-us/download/details.aspx?id=27876](http://www.microsoft.com/en-us/download/details.aspx?id=27876)

但在卸载 Kinect SDK 1.5 之前。

# c# - 将 using 语句放入命名空间失败

> ID：12638721
> 
> 赞同：11
> 
> 时间：2012-09-28T10:59:58.573
> 
> 标签：c#, namespaces

我试图用 stylecop 正确地设置一些旧代码。它要求将 using 语句放入其中。它对除一个以外的所有人都有效。我已将问题简化为以下代码。

```
namespace B.C
{
    using System;

    public class Hidden
    {
        public void SayHello()
        {
            Console.WriteLine("Hello");
        }
    }
}

namespace A.B.C
{
    using B.C;

    public class Program
    {
        static void Main(string[] args)
        {
            new Hidden().SayHello();
        }
    }
} 
```

这给出了编译错误错误

> “找不到类型或命名空间名称‘隐藏’（您是否缺少 using 指令或程序集引用？）”。

如果我**使用 BC 移动；**在命名空间 ABC 之上，然后它会正确构建。Hidden 类是由不同的团队开发的，我们不能修改它。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-28T11:04:02.197

由于您在命名空间内`A`，那么`B.C`实际上将是`A.B.C`.

用于`global::`指定您从根目录查找：

```
using global::B.C; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T11:04:36.450

BC 与 ABC 冲突 您需要将 BC 重命名为其他名称或使用`global`

# c#-4.0 - BufferCB 没有被调用？

> ID：12638723
> 
> 赞同：0
> 
> 时间：2012-09-28T11:00:00.623
> 
> 标签：c#-4.0, directshow.net

我在带有 Directshow Lib 的 C#.NET4.0 中的 Windows 应用程序中开发，用于使用网络摄像头录制视频。在视频录制期间，我通过在 BufferCB 中抓取框架来放置覆盖文本，并将覆盖位图放在框架上。

这个带有覆盖的应用程序运行良好。但是几天后覆盖文本没有出现，所以我试图找出问题然后我意识到 BufferCB 没有接到电话。SetCallback() 函数返回 0 表示其中没有错误。那么为什么 BufferCB 没有得到调用？

**编辑**

用于开始录制的按钮单击代码，配置采样器获取视频大小信息等。

```
private void button1_Click(object sender, EventArgs e)
    {

        jpg.RotateFlip(RotateFlipType.RotateNoneFlipY);
        //jpgdata = jpg.LockBits(new Rectangle(0, 0, jpg.Width, jpg.Height), ImageLockMode.ReadWrite, jpg.PixelFormat);
        AvailableAudioInputDevices = new List<DsDevice>();
        DsDevice[] audioInputDevices = DsDevice.GetDevicesOfCat(FilterCategory.AudioInputDevice);
        AvailableAudioInputDevices.AddRange(audioInputDevices);

        AvailableVideoInputDevices = new List<DsDevice>();
        DsDevice[] videoInputDevices = DsDevice.GetDevicesOfCat(FilterCategory.VideoInputDevice);
        AvailableVideoInputDevices.AddRange(videoInputDevices);

        Graph = (IFilterGraph2)new FilterGraph();
        captureGraph = (ICaptureGraphBuilder2)new CaptureGraphBuilder2();

        hr = captureGraph.SetFiltergraph(Graph);
        DsError.ThrowExceptionForHR(hr);

        hr = captureGraph.SetOutputFileName(MediaSubType.Asf, "qwe.wmv", out pMux, out pFilter);
        DsError.ThrowExceptionForHR(hr);

        hr = Graph.AddSourceFilterForMoniker(AvailableAudioInputDevices.First().Mon, null, AvailableAudioInputDevices.First().Name, out capFilter);
        DsError.ThrowExceptionForHR(hr);

        //ConfigProfileFromFile(pMux, "b.prx");

        hr = captureGraph.RenderStream(PinCategory.Capture, MediaType.Audio, capFilter, null, pMux);
        DsError.ThrowExceptionForHR(hr);

        hr = Graph.AddSourceFilterForMoniker(AvailableVideoInputDevices.First().Mon, null, AvailableVideoInputDevices.First().Name, out capFilter);
        DsError.ThrowExceptionForHR(hr);
        #region code for init. preview window and sample grabber
        mediaControl = (IMediaControl)Graph;
        mediaEventEx = (IMediaEventEx)Graph;
        mediaEventEx.SetNotifyWindow(pic.Handle, WM_GRAPHNOTIFY, IntPtr.Zero);
        IBaseFilter vmr9preview = null;
        vmr9preview = (IBaseFilter)new VideoMixingRenderer9();
        hr = Graph.AddFilter(vmr9preview, "VMR9");
        DsError.ThrowExceptionForHR(hr);
        IVMRFilterConfig9 vmr9Config = (IVMRFilterConfig9)vmr9preview;
        vmr9Config.SetRenderingMode(VMR9Mode.Windowless);
        vmr9Config.SetNumberOfStreams(1);
        vmr9Control = (IVMRWindowlessControl9)vmr9preview;
        vmr9Control.SetVideoClippingWindow(pic.Handle);
        vmr9Control.SetAspectRatioMode(VMR9AspectRatioMode.None);
        var srcRect = new DsRect();
        var dstRect = new DsRect(pic.ClientRectangle);
        int arWidth, arHeight;
        vmr9Control.GetNativeVideoSize(out srcRect.right, out srcRect.bottom, out arWidth, out arHeight);
        vmr9Control.SetVideoPosition(srcRect, dstRect);
        sampGrabber = new SampleGrabber() as ISampleGrabber;
        #endregion

        #region code for get video info and config sample grabber
        IPin iPinOutSource = DsFindPin.ByDirection(capFilter, PinDirection.Output, 0);
        // Configure the sample grabber
        IBaseFilter baseGrabFlt = sampGrabber as IBaseFilter;
        ConfigureSampleGrabber(sampGrabber);
        iPinInFilter = DsFindPin.ByDirection(baseGrabFlt, PinDirection.Input, 0);
        iPinOutFilter = DsFindPin.ByDirection(baseGrabFlt, PinDirection.Output, 0);

        // Add the frame grabber to the graph
        hr = Graph.AddFilter(baseGrabFlt, "Ds.NET Grabber");
        DsError.ThrowExceptionForHR(hr);

        hr = Graph.Connect(iPinOutSource, iPinInFilter);
        DsError.ThrowExceptionForHR(hr);

        // Get the default video renderer
        ibfRenderer = (IBaseFilter)new VideoRendererDefault();

        // Add it to the graph
        hr = Graph.AddFilter(ibfRenderer, "Ds.NET VideoRendererDefault");
        DsError.ThrowExceptionForHR(hr);
        iPinInDest = DsFindPin.ByDirection(ibfRenderer, PinDirection.Input, 0);

        // Connect the graph.  Many other filters automatically get added here
        hr = Graph.Connect(iPinOutFilter, iPinInDest);
        DsError.ThrowExceptionForHR(hr);
        SaveSizeInfo(sampGrabber);
        hr = Graph.RemoveFilter(baseGrabFlt);
        DsError.ThrowExceptionForHR(hr);

        hr = Graph.Disconnect(iPinOutSource);
        DsError.ThrowExceptionForHR(hr);

        hr = Graph.RemoveFilter(ibfRenderer);
        DsError.ThrowExceptionForHR(hr);

        hr = Graph.Disconnect(iPinInDest);
        DsError.ThrowExceptionForHR(hr);
        #endregion
        ConfigProfileFromFile(pMux, "b.prx");

        hr = Graph.AddFilter(capFilter, "VMR9");
        DsError.ThrowExceptionForHR(hr);

        hr = Graph.AddFilter(baseGrabFlt, "Ds.NET Grabber");
        DsError.ThrowExceptionForHR(hr);

        hr = captureGraph.RenderStream(PinCategory.Preview, MediaType.Video, capFilter, null, vmr9preview);
        DsError.ThrowExceptionForHR(hr);
        hr = captureGraph.RenderStream(PinCategory.Capture, MediaType.Video, capFilter, null, pMux);
        DsError.ThrowExceptionForHR(hr);

        m_mediaCtrl = Graph as IMediaControl;
        SetupBitmap();
        m_mediaCtrl.Run();
        //timer1.Start();             
    } 
```

Config Sample Grabber 方法

```
private void ConfigureSampleGrabber(ISampleGrabber sampGrabber)
    {
        int hr;
        AMMediaType media = new AMMediaType();

        // Set the media type to Video/RBG24
        media.majorType = MediaType.Video;
        media.subType = MediaSubType.RGB24;
        media.formatType = FormatType.VideoInfo;
        hr = sampGrabber.SetMediaType(media);
        DsError.ThrowExceptionForHR(hr);

        DsUtils.FreeAMMediaType(media);
        media = null;

        // Configure the samplegrabber
        hr = sampGrabber.SetCallback(this, 1);
        DsError.ThrowExceptionForHR(hr);
    } 
```

BufferCB 和 SampleCB

```
 int ISampleGrabberCB.SampleCB(double SampleTime, IMediaSample pSample)
    {
        Marshal.ReleaseComObject(pSample);
        return 0;
    }

    [DllImport("kernel32.dll", EntryPoint = "RtlMoveMemory")]
    static extern void CopyMemory(IntPtr Destination, IntPtr Source, int Length);
    /// <summary> buffer callback, COULD BE FROM FOREIGN THREAD. </summary>
    int ISampleGrabberCB.BufferCB(double SampleTime, IntPtr pBuffer, int BufferLen)
    {    
        CopyMemory(pBuffer, bmpData.Scan0, bmpData.Stride*20);
        return 0;
    } 
```

# physics - 计算光线的速度

> ID：12638725
> 
> 赞同：0
> 
> 时间：2012-09-28T11:00:08.187
> 
> 标签：physics, processing, motion

好的，所以我有一条从已知角度射下来的射线。我知道角度、射线的长度、顶端和底端的坐标。我选择了一个预定义的 (x,y) 底端，并使用 sin() 和 cos() 我设法确定了射线顶端的 (x,y) 位置以保持角度。但到目前为止我所做的是在它的起始位置绘制射线。为了让我在保持角度的同时移动它，我需要速度。

我有这个例子 [http://www.processing.org/learning/topics/reflection1.html](http://www.processing.org/learning/topics/reflection1.html) 但我就是不知道如何计算速度。如果你们能给我一些代码或让我了解如何去做，我将不胜感激。

我正在处理中对此进行编码。如果你能用这种语言向我解释，那就太好了，如果不是……简单的文字解释就足够了。谢谢！

乐

```
void RayRoad(float angle)
{
//h is the hypothenuse of a right triangle and also my ray
//knowing the angle and h, i calculate the opposite and adjacent

float h=3*linii, o, a, Jx,Jy;
float theta=radians(angle);
o=h*sin(theta);
a=h*cos(theta);

//(X1,Y1) bottom end of ray are known
//I determine de top end of the ray (X2,Y2) using a and o
X2=X1+a;
Y2=Y1-o;
MoveRay();
}

void MoveRay()
{
line(X1,Y1,X2,Y2);
ModifyCoords();
} 
```

现在我有了必要的数据，以便以正确的角度绘制那条光线。但我需要移动它（让它下来），我想知道我应该修改多少（X1，Y1）和（X2，Y2）。每次修改坐标后，我都会再次画线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:07:42.590

您需要将计算域 (x, y) 拆分为速度的 (x, y) 分量。对于光线从镜子或表面反射/反射的效果，为了论证，我们假设光束/相互作用具有零恢复（即与表面碰撞后的光线速度相同） . 因此，在这种情况下，射线速度的 x 分量（称为 u - 垂直于平面）不会改变并且是恒定的，速度的 y 分量（称为 v - 垂直于平面）将是逆转。所以速度的变换将是 (u, v) -> (u, -v)。

就这么简单，希望对你有帮助。

# php - 如何在 PHP 中声明一个可以跨模板使用的全局变量？

> ID：12638734
> 
> 赞同：33
> 
> 时间：2012-09-28T11:00:45.597
> 
> 标签：php, wordpress

在 wordpress 中，它调用 header.php，然后调用任何模板名称或请求的页面。如何在我的 php 标头中声明一个变量，然后我可以在其他模板中引用该变量？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-09-28T11:05:29.453

答案很大程度上取决于你需要它做什么。如果您正在开发一个主题并希望在所有文件中保持值不变，您可以将它们放在`functions.php`主题目录中，该目录始终被加载。在那里定义的变量应该在主题中的任何地方都可用。如果您分发主题，这将有效。

如果您想根据自己的安装需要修改现有主题，您可以`wp-config.php`按照建议将它们放入 中，或者（更简洁的方法）您可以[创建](http://codex.wordpress.org/Child_Themes)要更改的主题的子主题。这将使其与 wordpress 核心分开，并防止主题更新覆盖您的更改。

我刚刚尝试使用`functions.php`：

函数.php：

```
$variable = "value"; 
```

header.php：

```
global $variable;
echo $variable; 
```

为我工作。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-28T11:05:30.893

您可以像这样声明它（在functions.php中）：

```
global $domain;
$domain = 'http://www.mydomain.com/'; 
```

不过，您可以像这样回显 WordPress 网站的域。

```
<?php bloginfo('site_url');?> 
```

或者

```
$url = site_url();
echo $url; 
```

或者作为一个函数，在functions.php中

```
function displayMyDomain() {
  global $domain; // you probably don't actually need to set it global as it is a function
  $domain = 'http://www.domain.com/';
  echo $domain;
} 
```

然后在任何地方，使用`<?php displayMyDomain(); ?>`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-28T11:02:11.663

`wp-config.php`您可以在文件中定义它们。

配置文件永远不会更新，因此即使您更新它，您的 Wordpress 安装也会随着时间的推移而具有这些变量。

```
<?php
  require_once('wp-config.php');
  echo $domain;
?> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-08-30T10:36:37.580

另一种在 Wordpress 中定义全局常量的方法，如果出于最佳实践目的，您不想在 WP-config 中添加变量（以保持干净？）。并且由于某些原因，您的变量范围并没有在您的网站的任何地方获得全局范围。

您可以简单地使用：

```
define( 'MY_VARIABLE', 'My Value' ); 
```

有关 consts 范围的更多信息：http: [//php.net/manual/en/language.constants.php](http://php.net/manual/en/language.constants.php)

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2018-01-09T17:11:00.777

我认为**php session是在****Wordpress**上用作全局变量的一种方式。

**1.函数.php**

```
if(!session_id()) {
    session_start();
} 
```

**2.`.php`您想要设置或获取全局变量的任何文件**

*   获取变量

    ```
    if(isset($_SESSION['global_var'])) {
        $local_var = $_SESSION['global_var'];
    } 
    ```

*   设置变量

    ```
    $_SESSION['global_var'] = "This is global var"; 
    ```

# python - 对象没有属性“items_set”。Django orm

> ID：12638738
> 
> 赞同：0
> 
> 时间：2012-09-28T11:01:00.683
> 
> 标签：python, django, django-models, django-orm

我还有一个问题。如何解决？我是 Django 的初学者。

我的错误：

**/magazines/“杂志”对象的 AttributeError 没有属性“items_set”**

```
class Item(models.Model):
    name = models.CharField(max_length=50)
    item_price = models.DecimalField(max_digits=5, decimal_places=2)

class Magazine(models.Model):
    items = models.ManyToManyField('Item', blank=True, null=True)
    owner = models.ForeignKey(User, related_name='u_item')  

def show(request): #magazines items and total price of all items in this magazine
        user = request.user
        magazines = Magazine.objects.filter(owner=user)

        for m in Magazine.objects.filter(owner=user):
            total = m.items_set.all().annotate(total=Sum('item_price'))
            print 'Total cost for items in {0} is {1}'.format(m,total)

        return render_to_response('magazines.html', {'magazines': magazines, 'total': total}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:07:11.007

试试看嘛：

```
total = m.items.all().annotate(total=Sum('item_price')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T11:05:49.803

你不需要`_set`. 这不是反向关系：您在 Magazine 模型上直接拥有 manytomany 字段作为`items`.

```
total = m.items.all()... 
```

# java - 为什么我的 for 循环告诉我语法错误，插入“AssignmentOperator 表达式”？

> ID：12638739
> 
> 赞同：0
> 
> 时间：2012-09-28T11:01:01.893
> 
> 标签：java, for-loop, assignment-operator

我有一些代码，如下所示：

```
int batchPosition = new Integer(batchBegin);

for (batchPosition;batchPosition<=batchEnd;batchPosition++) 
```

但我在eclipse中得到这个错误：

```
Syntax error, insert "AssignmentOperator Expression" to complete ForInit. 
```

我查看了关于这个错误的各种帖子，并用谷歌搜索了它，但我不知道为什么不允许这样做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T11:06:42.433

`batchPosition`它本身不是一个有效的初始化语句 - 你可以简单地跳过它：

```
int batchPosition = new Integer(batchBegin);

for (; batchPosition <= batchEnd; batchPosition++) 
```

但是，如果您不需要`batchPosition`在循环后访问，最好尽可能减少变量范围：

```
for (int batchPosition = new Integer(batchBegin); batchPosition <= batchEnd; batchPosition++) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T11:12:47.127

`for`循环包含 4 个执行部分：

初始化、条件、执行体、递增或递减

```
int batchPosition = new Integer(batchBegin);  

for (batchPostion;batchPosition<=batchEnd;batchPosition++) 
```

您错过了初始化部分。

`for`在您已经初始化之前完全忽略它

```
for (;batchPosition<=batchEnd;batchPosition++) 
```

或者

将之前的行`for`移到内部`for`

```
for (int batchPosition = new Integer(batchBegin);batchPosition<=batchEnd;batchPosition++) 
```

但是，在后一种情况下，您将无法使用`batchPosition`外部`for`范围。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T11:01:01.893

出于某种原因，Java 或 Eclipse（或麻烦）不喜欢循环的这一部分：

```
for (batchPostion.... 
```

它期望用于计算循环中位置（*batchPosition ）的变量***在循环头**中初始化（*for（**第****一个**；**仅**当；重复）***部分。）我猜这是因为希望它只是本地的循环。**

 **要修复，只需将您的作业移动到标题中，如下所示：

```
for (int batchPosition = new Integer (batchBegin);batchPosition<=batchEnd;batchPosition++) 
```

不那么漂亮，但它会工作。**

# c# - 在 Asp.Net Web API 中将 JSON 反序列化为派生类型

> ID：12638741
> 
> 赞同：63
> 
> 时间：2012-09-28T11:01:11.207
> 
> 标签：c#, asp.net-mvc, asp.net-web-api

我正在调用我的 WebAPI 的一个方法，该方法发送一个我想与模型匹配（或绑定）的 JSON。

在控制器中，我有一个方法，例如：

```
public Result Post([ModelBinder(typeof(CustomModelBinder))]MyClass model); 
```

作为参数给出的“MyClass”是一个抽象类。我希望根据传递的 json 类型，实例化正确的继承类。

为了实现它，我正在尝试实现一个自定义活页夹。问题是（我不知道它是否非常基本，但我找不到任何东西）我不知道如何检索请求中的原始 JSON（或者更好的是某种序列化）。

我懂了：

*   actionContext.Request.Content

但是所有方法都公开为异步。我不知道这适合将生成模型传递给控制器​​方法的人......

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-09-28T14:03:04.037

您不需要自定义模型绑定器。您也不需要处理请求管道。

看看另一个 SO：[如何在 JSON.NET 中实现自定义 JsonConverter 以反序列化基类对象列表？](https://stackoverflow.com/questions/8030538/how-to-implement-custom-jsonconverter-in-json-net-to-deserialize-a-list-of-base).

我以此作为我自己解决同一问题的基础。

从`JsonCreationConverter<T>`该 SO 中引用的内容开始（稍作修改以解决响应中类型序列化的问题）：

```
public abstract class JsonCreationConverter<T> : JsonConverter
{
    /// <summary>
    /// this is very important, otherwise serialization breaks!
    /// </summary>
    public override bool CanWrite
    {
        get
        {
            return false;
        }
    }
    /// <summary> 
    /// Create an instance of objectType, based properties in the JSON object 
    /// </summary> 
    /// <param name="objectType">type of object expected</param> 
    /// <param name="jObject">contents of JSON object that will be 
    /// deserialized</param> 
    /// <returns></returns> 
    protected abstract T Create(Type objectType, JObject jObject);

    public override bool CanConvert(Type objectType)
    {
        return typeof(T).IsAssignableFrom(objectType);
    }

    public override object ReadJson(JsonReader reader, Type objectType,
      object existingValue, JsonSerializer serializer)
    {
        if (reader.TokenType == JsonToken.Null)
            return null;
        // Load JObject from stream 
        JObject jObject = JObject.Load(reader);

        // Create target object based on JObject 
        T target = Create(objectType, jObject);

        // Populate the object properties 
        serializer.Populate(jObject.CreateReader(), target);

        return target;
    }

    public override void WriteJson(JsonWriter writer, object value, 
      JsonSerializer serializer)
    {
        throw new NotImplementedException();
    }
} 
```

现在您可以使用 注释您的类型`JsonConverterAttribute`，将 Json.Net 指向自定义转换器：

```
[JsonConverter(typeof(MyCustomConverter))]
public abstract class BaseClass{
  private class MyCustomConverter : JsonCreationConverter<BaseClass>
  {
     protected override BaseClass Create(Type objectType, 
       Newtonsoft.Json.Linq.JObject jObject)
     {
       //TODO: read the raw JSON object through jObject to identify the type
       //e.g. here I'm reading a 'typename' property:

       if("DerivedType".Equals(jObject.Value<string>("typename")))
       {
         return new DerivedClass();
       }
       return new DefaultClass();

       //now the base class' code will populate the returned object.
     }
  }
}

public class DerivedClass : BaseClass {
  public string DerivedProperty { get; set; }
}

public class DefaultClass : BaseClass {
  public string DefaultProperty { get; set; }
} 
```

现在您可以使用基本类型作为参数：

```
public Result Post(BaseClass arg) {

} 
```

如果我们要发布：

```
{ typename: 'DerivedType', DerivedProperty: 'hello' } 
```

然后`arg`将是 的一个实例`DerivedClass`，但如果我们发布：

```
{ DefaultProperty: 'world' } 
```

然后你会得到一个`DefaultClass`.

## 编辑 - 为什么我更喜欢这种方法`TypeNameHandling.Auto/All`

我确实相信使用`TypeNameHandling.Auto/All`JotaBe 支持的方法并不总是理想的解决方案。在这种情况下很可能是这样 - 但我个人不会这样做，除非：

*   我的 API*只会*被我或我的团队使用
*   我不在乎拥有双 XML 兼容端点

当使用 Json.Net`TypeNameHandling.Auto`或`All`时，您的 Web 服务器将开始以`MyNamespace.MyType, MyAssemblyName`.

我在评论中说过，我认为这是一个安全问题。在我从 Microsoft 阅读的一些文档中提到了这一点。它似乎不再被提及，但我仍然觉得这是一个有效的担忧。我***不想***将命名空间限定的类型名称和程序集名称暴露给外界。它增加了我的攻击面。所以，是的，我不能拥有`Object`我的 API 类型的属性/参数，但谁能说我的网站的其余部分完全没有漏洞？谁说未来的端点不会暴露利用类型名称的能力？为什么要抓住这个机会只是因为它更容易？

此外 - 如果您正在编写一个“适当的”API，即专门供第三方使用，而不仅仅是为您自己使用，并且您正在使用 Web API，那么您很可能希望利用 JSON/XML 内容类型处理（至少）。了解您在尝试编写易于使用的文档方面取得了多大的成就，这些文档针对 XML 和 JSON 格式以不同的方式引用您的所有 API 类型。

通过覆盖 JSON.Net 对类型名称的理解方式，您可以使两者保持一致，为您的调用者在 XML/JSON 之间进行选择纯粹基于品味，而不是因为类型名称更容易记住其中一个。

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2014-06-02T16:23:06.177

你不需要自己实现它。JSON.NET 对它有原生支持。

您必须为 JSON 格式化程序指定[所需的 TypeNameHandling 选项](http://james.newtonking.com/json/help/index.html?topic=html/T_Newtonsoft_Json_TypeNameHandling.htm)`global.asax`，如下所示（在应用程序启动事件中）：

```
JsonSerializerSettings serializerSettings = GlobalConfiguration.Configuration
   .Formatters.JsonFormatter.SerializerSettings;
serializerSettings.TypeNameHandling = TypeNameHandling.Auto; 
```

如果您指定`Auto`，就像在上面的示例中一样，参数将被反序列化为`$type`对象属性中指定的类型。如果`$type`缺少该属性，它将被反序列化为参数的类型。因此，您只需在传递派生类型的参数时指定类型。（这是最灵活的选项）。

例如，如果您将此参数传递给 Web API 操作：

```
var param = {
    $type: 'MyNamespace.MyType, MyAssemblyName', // .NET fully qualified name
    ... // object properties
}; 
```

该参数将被反序列化为`MyNamespace.MyType`类的对象。

这也适用于子属性，即你可以有一个像这样的对象，它指定一个内部属性是给定的类型

```
var param = { 
   myTypedProperty: {
      $type: `...`
      ...
}; 
```

在这里，您可以看到[有关 TypeNameHandling.Auto 的 JSON.NET 文档的示例](http://james.newtonking.com/json/help/index.html?topic=html/SerializeTypeNameHandling.htm)。

[这至少从 JSON.NET 4 版本开始有效](http://james.newtonking.com/archive/2011/11/19/json-net-4-0-release-4-bug-fixes)。

**笔记**

你不需要用属性来装饰任何东西，或者做任何其他的定制。它无需对您的 Web API 代码进行任何更改即可工作。

**重要的提示**

[$type 必须是 JSON 序列化对象的第一个属性](https://stackoverflow.com/questions/20408771/json-net-abstract-derived-class-deserialization-with-webapi-220478603)。如果不是，它将被忽略。

**与自定义 JsonConverter/JsonConverterAttribute 的比较**

我正在将本机解决方案[与此答案](https://stackoverflow.com/questions/12638741/deserialising-json-to-derived-types-in-asp-net-web-api/#12641541)进行比较。

要实现`JsonConverter`/ `JsonConverterAttribute`：

*   你需要实现一个自定义`JsonConverter`和一个自定义`JsonConverterAttribute`
*   您需要使用属性来标记参数
*   您需要事先知道参数预期的可能类型
*   `JsonConverter`每当您的类型或属性发生变化时，您都需要实现或更改您的实现
*   有一种[魔术字符串](http://en.wikipedia.org/wiki/Magic_string_%28programming%29#Magic_strings_in_code)的代码气味，以指示预期的属性名称
*   您没有实现可以与任何类型一起使用的通用东西
*   你在重新发明轮子

在答案的作者中有关于安全性的评论。除非你做错了什么（比如为你的参数接受一个过于泛型的类型，`Object`比如它（如果没有，你会得到`null`）。

这些是 JSON.NET 原生解决方案的优势：

*   你不需要实现任何东西（你只需要`TypeNameHandling`在你的应用程序中配置一次）
*   您不需要在操作参数中使用属性
*   您不需要事先知道可能的参数类型：您只需要知道基本类型，并在参数中指定它（它可以是抽象类型，以使多态性更加明显）
*   该解决方案适用于大多数情况*（1）*，无需更改任何内容
*   该解决方案经过广泛测试和优化
*   你不需要魔线
*   实现是通用的，并且将接受任何派生类型

*(1)：如果您想接收不从同一基类型继承的参数值，这将不起作用，但我认为这样做没有意义*

所以我找不到任何缺点，并在 JSON.NET 解决方案上找到了许多优点。

**为什么使用自定义 JsonConverter/JsonConverterAttribute**

这是一个很好的工作解决方案，允许定制，可以修改或扩展以适应您的特定情况。

如果您想做一些原生解决方案无法做到的事情，比如自定义类型名称，或者根据可用的属性名称推断参数的类型，那么请使用适合您自己情况的解决方案。另一个无法定制，也无法满足您的需求。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-28T12:39:45.947

您可以正常调用异步方法，您的执行将被暂停，直到方法返回，您可以以标准方式返回模型。只需像这样拨打电话：

```
string jsonContent = await actionContext.Request.Content.ReadAsStringAsync(); 
```

它会给你原始的 JSON。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-03-08T14:00:13.143

如果您想使用 TypeNameHandling.Auto 但担心安全性或不喜欢需要那种级别的幕后知识的 api 消费者，您可以处理 $type 反序列化您自己。

```
public class InheritanceSerializationBinder : DefaultSerializationBinder
{
    public override Type BindToType(string assemblyName, string typeName)
    {
        switch (typeName)
        {
            case "parent[]": return typeof(Class1[]);
            case "parent": return typeof(Class1);
            case "child[]": return typeof(Class2[]);
            case "child": return typeof(Class2);
            default: return base.BindToType(assemblyName, typeName);
        }
    }
} 
```

然后将其连接到 global.asax.Application__Start

```
var config = GlobalConfiguration.Configuration;
        config.Formatters.JsonFormatter.SerializerSettings = new JsonSerializerSettings { Binder = new InheritanceSerializationBinder() }; 
```

最后，我在包含具有不同类型的对象的属性上使用了包装类和 [JsonProperty(TypeNameHandling = TypeNameHandling.Auto)]，因为我无法通过配置实际类来使其工作。

这种方法允许消费者在他们的请求中包含所需的信息，同时允许允许值的文档独立于平台、易于更改且易于理解。所有这些都无需编写您自己的转换器。

归功于：[https](https://mallibone.com/post/serialize-object-inheritance-with-json.net) ://mallibone.com/post/serialize-object-inheritance-with-json.net 向我展示了该字段属性的自定义反序列化程序。

# jsp - 如何在jsp中运行jar文件方法

> ID：12638751
> 
> 赞同：0
> 
> 时间：2012-09-28T11:01:44.750
> 
> 标签：jsp, jar

我正在尝试在我的 jsp 中运行 jar 文件方法，我已经正确设置了 jar 的构建路径并将该 jar 保存在`WEB-INF/lib`文件夹中。当我尝试运行 jsp 时出现此错误

```
org.apache.jasper.JasperException: Unable to compile class for JSP: 
```

这是我调用 jar 方法的代码。

```
<%
    GenericLog gl=new GenericLog();
    String uname = request.getParameter("uname");
    String pass = request.getParameter("password");
    gl.write(uname);//jar file method which i am calling
    gl.write(pass);
%> 
```

请提出任何解决方案...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T11:11:58.233

你有`GenericLog.class`在你的jsp文件中导入文件吗？像

```
<%@ page import="java.util.*" %> 
```

在上面，它是在jsp页面中导入java.util下的所有类文件。查看[示例](http://www.jsptut.com/directives.jsp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:07:23.467

将 jar 文件保存在 Web/Inf 文件夹中，并检查方法名称是否应该是公开的。

# linux - sed 正则表达式不贪心？

> ID：12638753
> 
> 赞同：1
> 
> 时间：2012-09-28T11:01:52.523
> 
> 标签：linux, bash, unix, sed, grep

在 bash 我有一个字符串变量`tempvar`，它是这样创建的：

```
tempvar=`grep -n 'Mesh Tally' ${meshtalfile}` 
```

`meshtalfile`是一个（大）输入文件，其中包含一些标题行和许多数据行块，每个数据行都由一个开始行标记，该行在上面的 grep 中搜索。

在本例中，变量`tempvar`包含以下字符串：

```
5: Mesh Tally Number 4 977236: Mesh Tally Number 14 1954467: Mesh Tally Number 24 4354479: Mesh Tally Number 34 
```

我现在希望提取与特定网格数相关的行号 - 所以我将变量 meshnum1 定义为等于`24`，然后运行以下 sed 命令：

```
echo ${tempvar} | sed -r "s/^.*([0-9][0-9]*):\sMesh\sTally\sNumber\s${meshnum1}.*$/\1/" 
```

这就是事情出错的地方。我期望输出`1954467`，但我得到了`7`。尝试使用 number`34`而不是返回`9`而不是`4354479`. 似乎 sed 只返回数字的最后一位 - 这肯定违反了贪婪匹配的原则？奇怪的是，当我将`(`左括号移动到包含几个字符时`.*`，它会将整行返回并包括它之前返回的单个字符。它肯定不能在一种情况下贪婪而在另一种情况下反贪吗？希望我刚刚用语法做了一些愚蠢的事情......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T11:24:45.783

问题是它`.*`也很贪婪，这意味着它也会得到所有的数字。`[0-9][0-9]*`由于您强制它在部分中至少获得一位数字，因此`.*`之前它会足够贪婪，只为它之后的表达式留下一位数字。

一个解决方案可能是：

```
echo ${tempvar} | sed -r "s/^.*\s([0-9][0-9]*):\sMesh\sTally\sNumber\s${meshnum1}.*$/\1/" 
```

现在，在和`\s`之间明确地强制在您要匹配的数字之前有一个空格。`.*``[0-9][0-9]*`

希望这会有所帮助=)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T11:24:52.397

$tempvar 中的值应该是多行还是单行？因为如果它是单行，“.*$”应该匹配到行尾，也意味着所有其他值，对吧？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T11:51:32.647

不需要`sed`，这是一种使用方法`GNU grep`：

```
echo "$tempvar" | grep -oP "[0-9]+(?=:\sMesh\sTally\sNumber\s${meshnum1}\b)" 
```

# java - XSLT - 偷偷插入（xsl:copy）

> ID：12638755
> 
> 赞同：0
> 
> 时间：2012-09-28T11:02:06.357
> 
> 标签：java, xml, xslt, xml-parsing, stax

我将从代码开始 - 我们都喜欢代码：D

XML:

```
 <report>
        <subject>
            <subjectId>1</subjectId>
            <name>John</name>
            <surname>Doe</surname>
        </subject>
        <subject>
            <subjectId>2</subjectId>
            <name>Frank</name>
            <surname>Timothy</surname>
        </subject>
        <individual>
            <individualId>10</individualId>
            <name>Isaac</name>
            <surname>Newton</surname>
            <co-worker>
                <subject>
                    <subjectId>1</subjectId>
                    <inXml>true</inXml>
                </subject>
                <subject>
                    <subjectId>2</subjectId>
                    <inXml>true</inXml>
                </subject>
            </co-worker>
        </individual>

        <owner>
            <subject>
                <subjectId>2</subjectId>
                <inXml>true</inXml>
            </subject>
            <share>100</share>
        </owner>

        <individual>
            <individualId>10</individualId>
            <inXml>true</inXml>
        </individual>
    </report> 
```

XML 2：

```
 <report>
        <owner>
            <individual>
                <individualId>10</individualId>
                <inXml>true</inXml>
            </individual>
        </owner>
        <individual>
            <individualId>2</individualId>
            <name>John</name>
            <surname>Doe</surname>
            <co-worker>
                <individual>
                    <individualId>10</individualId>
                    <inXml>true</inXml>
                </individual>
            </co-worker>
        </individual>
        <individual>
            <individualId>10</individualId>
            <name>Isaac</name>
            <surname>Newton</surname>
            <co-worker>
                <individual>
                    <individualId>2</individualId>
                    <inXml>true</inXml>
                </individual>
            </co-worker>
        </individual>

    </report> 
```

XSLT：

```
 <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl">
        <xsl:output method="xml" indent="yes" />

        <xsl:template match="individual[inXml='true']">
            <xsl:variable name="indId" select="./individualId/text()" />
            <xsl:variable name="result" select="//individual[not(inXml) and individualId=$indId]/*" />
            <xsl:choose>
                <xsl:when test="$result != ''">
                    <xsl:copy>
                        <xsl:apply-templates select="$result" />
                    </xsl:copy>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:copy-of select="." />
                </xsl:otherwise>
            </xsl:choose>
        </xsl:template>

        <xsl:template match="subject[inXml='true']">
            <xsl:variable name="subId" select="./subjectId/text()" />
            <xsl:variable name="result" select="//subject[not(inXml) and subjectId=$subId]/*" />
            <xsl:choose>
                <xsl:when test="$result != ''">
                    <xsl:copy>
                        <xsl:apply-templates select="$result" />
                    </xsl:copy>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:copy-of select="." />
                </xsl:otherwise>
            </xsl:choose>
        </xsl:template>

        <xsl:template match="@* | node()">
            <xsl:copy>
                <xsl:apply-templates select="@* | node()" />
            </xsl:copy>
        </xsl:template>

    </xsl:stylesheet> 
```

我想达到什么目的？- 我想在出现“inXml”标签的地方复制主题/个人。XSLT 似乎可以工作..但是对于稍微大一点的 xmls.. 大约 1MB（它并不大..）我的 java 应用程序因 java.lang.OutOfMemoryError: Java heap space 而失败。我将流重定向到文件......令人惊讶的是 - 转换结果的文件以光速增长 - 15秒后大约300mb！:D hehehe - 这证明我的 xlst 中一定有一些错误导致无限循环。

重要的是——在复制节点时，内部可能已经存在“inXml”——这就是我应用模板或结果的原因。我准备的 XML 描述了这个问题。

编辑：XML2 很可能完全搞砸我的应用程序。我该如何解决？我希望通过 XSLT 解决我的 jaxb 解组问题——这不是我知道的解决方案——我需要在解组过程中插入对象的引用，而不是尝试在那里插入更多的 XML 节点。我怎样才能做到这一点？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T11:53:52.633

如果您的数据中有一个循环，您的代码将进入无限递归。

我怀疑条件`not(inXml)`应该是`not(inXML='true')`防止这种情况发生；但不知道你的数据，我不能确定。

# ios - 发布到 facebook FBiOSSDK.3.0.8 时的 HTTP 状态代码 400

> ID：12638760
> 
> 赞同：1
> 
> 时间：2012-09-28T11:02:30.403
> 
> 标签：ios, xcode, facebook

我正在使用 ios sdk 3.0 将简单文本发布到用户 facebook 墙，下面是用于发布到 facebook 的代码

```
[FBRequestConnection
 startForPostStatusUpdate:text completionHandler:^(FBRequestConnection *connection,
                     id result,
                     NSError *error)
{
    if (!error)
    {
        NSLog(@"the status posted");
    }
}]; 
```

但我从 facebook 收到错误

FBSDKLog: 响应 <#1115> : 操作无法完成。（com.facebook.sdk 错误 5。）。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T10:33:19.193

错误是如果您尝试共享 NSString。

这有效：

[FBRequestConnection startForPostStatusUpdate:@"test" completionHandler:^(FBRequestConnection *connection, id result, NSError *error) { }];

这会给你错误：

NSString *testString = @"test"; [FBRequestConnection startForPostStatusUpdate:testString completionHandler:^(FBRequestConnection *connection, id result, NSError *error) { }];

# java - 修改库时无法解决 sun.misc.Unsafe 错误

> ID：12638761
> 
> 赞同：0
> 
> 时间：2012-09-28T11:02:35.957
> 
> 标签：java, android, guava

我正在为我的项目开发一个 android sdk，并`google-http-java-client` 在 sdk 中使用它。我想进行一些更改，`google-http-java-client` 以便我可以在我的应用程序中使用它。例如，我想在`com.google.api.client.http.HttpHeaders`. 为此，我已经提取了源代码，但我在`com.google.common.primitives.UnsignedBytes` as

> 导入 sun.misc.Unsafe 无法解决。

那么有没有其他方法来修改这个库？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:15:22.617

当然。不在android中默认类路径¹上的`UnsafeComparator`用途，但也有作为后备提供的。删除处理的整个部分就足够了，因为它通过其名称进行查找，并且在出现异常的情况下使用回退。`Unsafe`^(`PureJavaComparator``Unsafe``getBestComparator()`)

* * *

¹我认为它在 android 中不存在，但我相信凯文说它存在。无论如何，说它不在默认的类路径上肯定是正确的（不管它是否存在）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T11:10:34.867

您依赖于 Oracle/Sun JDK 附带的东西，这些东西不是由 Google 提供的。简短的回答：不要那样做。长答案：请参阅[“为什么开发人员不应该编写调用'sun'包的程序”](http://www.oracle.com/technetwork/java/faq-sun-packages-142232.html)。

# jquery - 为什么 Html.TextBox 正在渲染带有日期验证的字段

> ID：12638767
> 
> 赞同：4
> 
> 时间：2012-09-28T11:02:47.703
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-4, unobtrusive-validation

我将视图模型中的 DateTime 字段渲染为两个单独的表单字段（日期和时间）。我认为这行代码：

```
@Html.TextBox("EndTime.Date", Model.EndTime.ToShortDateString()) 
```

呈现为：

```
<input data-val="true" data-val-date="The field Date must be a date." 
 data-val-required="The Date field is required." id="StartTime_Date"
 name="StartTime.Date" type="text" value="29/09/2012"> 
```

*   为什么这个输入字段添加了 data-* 属性？
*   为什么它甚至认为这是约会？

这种意外验证的一个有趣的副作用是它会导致字段被验证为日期（这是我想要的巧合），但是 jquery 决定使用**错误的日期格式**，所以我得到了错误：

> “字段日期必须是日期。”

* * *

**更新：** 原来“错误的日期格式”错误是由 Chrome 中的错误引起的。因为 JQuery Validation 库通过创建新`Date()`的 .

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T14:58:17.343

有时您可能会得到不需要的验证字段，即使您没有显式地向该属性添加验证属性。

您可以通过在 Application_Start() 中添加它来禁用它：

```
DataAnnotationsModelValidatorProvider.AddImplicitRequiredAttributeForValueTypes = false; 
```

此外，可以解决您的问题的是您的属性 Model.EndTime 应该允许空值：

```
DateTime? EndTime; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T17:01:53.380

当您使用与模型对象相同的表单名称时，我遇到了类似的问题......表单会自动将其与模型相关联。

如果您计划在提交表单后自己处理日期/时间值，您可以在模型上创建字段

```
private string _endDate;
public string EndDate 
    {
        get
        {
            if (_endDate == null)
                _endDate = EndTime.ToShortDateString();

            return _endDate;
        }
        set
        {
            _endDate = value;
        }
    } 
```

然后使用 EndDate 作为您的文本框字段，甚至使用 TextBoxFor 并将其映射到您的模型。您可以在 post 或 set 访问器中处理数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T10:58:53.637

> 为什么这个输入字段添加了 data-* 属性？

因为您在应用程序中启用了不显眼的验证。默认情况下，MVC 验证系统启用值类型（整数、日期时间）的必需和数据类型的客户端验证。

> 为什么它甚至认为这是约会？

当您将字符串传递给`Html.TextBox`辅助方法时，它会检查是否`Model`包含具有该名称的任何属性，并且在您的情况下，`Model`是否具有具有名称`EndTime`且类型为的属性`DateTime`。

您传递`EndTime.Date`的仍然表示类型`DateTime`（`DateTime`具有类型的属性`Date`仅`DateTime`包含日期组件），因此 MVC 启用了两个验证。

我建议你们两个创建两个不同的属性来存储日期和时间。

# html - 动态垂直多列列表在 IE 中不起作用

> ID：12638769
> 
> 赞同：0
> 
> 时间：2012-09-28T11:03:23.930
> 
> 标签：html, css, list, internet-explorer, cross-browser

Blow 代码适用于 Mozilla、Safari 和 Chrome，但不适用于 IE 7、8、9。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
<style type="text/css"> 
ul {margin: 0; padding: 0; list-style: none;float:left;}

.column {
    background-color: #fff;
    border: 1px solid #999;
    padding: 8px;
    width:40%;
}
label{
   float:left;
}
ul li a{
    display:block;
    float:left;
    width: 120px;
    margin: 0 5px 0 5px;
}
ul li {
    clear:both;
    margin: 0 0 5px 0;  
    overflow:hidden;
}
.column {
/* the proper rules ready for future */
column-count: 3;
column-gap: 20px;

/* Moz/Firefox rules */
-moz-column-count: 3;
-moz-column-gap: 20px;

/* Safari & Chrome rules */
-webkit-column-count: 3;
-webkit-column-gap: 20px;
}
</style>
</head>
<body>
<ul class="column">
    <li><label><input type="checkbox"></label>Francoise Barre-Sinoussi</li>
    <li><label><input type="checkbox"></label>Rachel Carson</li>
    <li><label><input type="checkbox"></label>Shirley M. Tilghman</li>
    <li><label><input type="checkbox"></label>Jane Goodall</li>
    <li><label><input type="checkbox" ></label>Marie Curie</li>
    <li><label><input type="checkbox" ></label>Rosalind Franklin</li>
    <li><label><input type="checkbox" ></label>Svetlana Savitskaya</li>
    <li><label><input type="checkbox" ></label>Mae Jemison</li>
    <li><label><input type="checkbox" ></label>Mayim Bialik</li>
    <li><label><input type="checkbox" ></label>Sally Ride</li>
</ul>
</body> 
</html> 
```

我必须申请什么 hack 才能使其在 IE7、8 和 9 中工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T11:54:33.670

试试这个css代码，

```
ul {margin: 0; padding: 0; list-style: none;float:left;}

.column {
background-color: #fff;
border: 1px solid #999;
padding: 8px;
width:500px;
}
ul li {
float:left;
margin: 0 0 5px 0;  
overflow:hidden;
width: 200px;
background-color: orange;
margin-right: 10px;
}
.column {
/* the proper rules ready for future */
column-count: 3;
column-gap: 20px;

/* Moz/Firefox rules */
-moz-column-count: 3;
-moz-column-gap: 20px;

/* Safari & Chrome rules */
-webkit-column-count: 3;
-webkit-column-gap: 20px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T12:03:38.343

IE 不支持 CSS `column-count`。

我看到的唯一解决方案是更改 html 结构和 css：

*[查看 jsfiddle 演示](http://jsfiddle.net/BBSUb/4/)*

HTML：

```
<div class="border">
<ul class="column">
    <li><label><input type="checkbox"></label>Francoise Barre-Sinoussi</li>
    <li><label><input type="checkbox"></label>Rachel Carson</li>
    <li><label><input type="checkbox"></label>Shirley M. Tilghman</li>
</ul>
<ul class="column">
    <li><label><input type="checkbox"></label>Jane Goodall</li>
    <li><label><input type="checkbox" ></label>Marie Curie</li>
    <li><label><input type="checkbox" ></label>Rosalind Franklin</li>
</ul>
<ul class="column">
    <li><label><input type="checkbox" ></label>Svetlana Savitskaya</li>
    <li><label><input type="checkbox" ></label>Mae Jemison</li>
    <li><label><input type="checkbox" ></label>Mayim Bialik</li>

</ul>
<ul class="column">
    <li><label><input type="checkbox" ></label>Sally Ride</li>
</ul>
</div>​ 
```

CSS：

```
ul {margin: 0; padding: 0; list-style: none;float:left;}

.column {
    background-color: #fff;
    padding: 8px;
}
.border {
    border: 1px solid #999;
    float: left;
}
label{
   float:left;
}
ul li a{
    display:block;
    float:left;
    margin: 0 5px 0 5px;
}
ul li {
    clear:both;
    margin: 0 0 5px 0;  
} 
```

# python - 匹配并从 zip 读取文件

> ID：12638776
> 
> 赞同：1
> 
> 时间：2012-09-28T11:03:48.720
> 
> 标签：python, zip, zipfile

我需要打开一个`manifest.v3`文件并读取版本字段（xml 文件），为此我使用以下代码：

```
from zipfile import ZipFile
zf = ZipFile("somezip.zip")
for name in zf.namelist():
    if name.find("manifest.v3")  >= 0:
        for line in zf.read(name).split("\n"):
            for match in  re.findall(r'<value name="version">([0-9].*?)</value>',line):
                parts=match.split(".")
                localVersion=parts[1]
                print localVersion
zf.close() 
```

上面的代码效果很好，但有时在 zipfile 上我有`manifest.v3`文件和`manifest.v3.old`，`manifest.v3.old.old`等等。

我如何保证我只得到`manifest.v3`文件的结果？而不是所有其他人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T11:09:18.567

尝试将条件更改`name.find("manifest.v3") >= 0`为`name == "manifest.v3"`

在下面添加了一些示例

```
In [181]: name = "manifest.v3"

In [182]: name.find("manifest.v3") >= 0
Out[182]: True

In [183]: name = "manifest.v3.old.old"

In [184]: name.find("manifest.v3") >= 0
Out[184]: True

In [185]: name == "manifest.v3"
Out[185]: False

In [186]: name = "manifest.v3"

In [187]: name == "manifest.v3"
Out[187]: True 
```

# c++ - 函数模板 - 基于输入类返回 T？- C++

> ID：12638777
> 
> 赞同：0
> 
> 时间：2012-09-28T11:03:51.283
> 
> 标签：c++, templates, generics

我创建了一个函数模板，用于从二进制文件加载我的设置。

```
template<class T> T LoadSettings(const std::string &fileName)
{
    // Load settings
    T settings;

    std::string filePath(LOCAL_FILE_DIR);
    filePath.append(fileName);

    std::ifstream file(filePath, std::ios::in | std::ios::binary);

    if (file.is_open())
    {
        if (!settings.ParseFromIstream(&file)) 
        {
            throw ExceptionMessage("Failed to parse TextureAtlasSettings");
        }
    }
    else
    {
        throw ExceptionMessage("Failed to open file");
    }

    return settings;
}; 
```

我希望能够调用该函数并返回适当的设置类。

来自 C# 我会做以下事情。

```
MySettingsClass settings = LoadSettings<MySettingsClass>("FileName.bin"); 
```

我如何在 C++ 中做同样的事情？

编辑：

我应该更通用！

```
throw std::runtime_error("Failed to parse " + typeid(T).name()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:06:08.517

然后在 C++ 中使用这个语法

```
MySettingsClass settings = LoadSettings<MySettingsClass>(std::string("FileName.bin")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T11:08:34.403

```
 template<typename T> 
 T LoadSettings(const std::string& fileName)
 {
    // Load settings
    T settings;

    std::string filePath(LOCAL_FILE_DIR);
    filePath += fileName; 

     std::ifstream file(filePath, std::ios::in | std::ios::binary); 

     if (file && settings.ParseFromIstream(file)) 
     {    
           return settings;
     }
     throw std::runtime_error("Failed to parse TextureAtlasSettings");
 } 
```

这应该可行，但是您可能需要考虑为您的类型 T 编写一个提取运算符。

# matlab - 从不同的 mfile 获取图形句柄并在 GUI 中绘图

> ID：12638780
> 
> 赞同：0
> 
> 时间：2012-09-28T11:04:05.370
> 
> 标签：matlab, user-interface, matlab-guide

我的任务是设计一个 GUI，我需要使用我之前创建的不同 mfile 中的变量和绘图。我对从处理 mfile 中获取变量非常有信心，但我不确定如何获取绘图/图形。

所以基本上我的问题是我是否可以从我的 mfile 中获取（）一个图形，然后在我的 GUI 中设置（）一个轴到该图形。

注意：我这样做的原因是因为我想将数据处理与 GUI mfile 分开。我可以在我的进程按钮的回调中转储所有处理，但这并不好。我也很欣赏我的案例的良好编码实践，因为我以前从未使用过 GUI（仅使用 PHP 和 MATLAB 编写脚本）

注意 2（必须要做的事情的概要）：在 GUI 中，我们基本上应该加载 2 个文件，然后我们按下“处理”按钮，然后必须出现 4 个绘图。所有处理代码已经存在于先前编写的 mfile 中（由我编写）。

谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:37:42.437

我自己想通了！我所做的是使用 gcf 像这样获取当前图形：`output.worldmap = gcf`然后我像这样将对象传回：`setappdata(0,'output',output)`并像这样在我的回调函数中再次抓取它：`getappdata(0,'output')`并使用以下函数设置轴`set(output.worldmap,'CurrentAxes',handles.axes_worldmap)`我还确保正确轴是在我实际运行我的 mfile 之前设置的，它使用`axes(handles.worldmap)`

# javascript - 在 jquery 中设置默认根元素

> ID：12638781
> 
> 赞同：3
> 
> 时间：2012-09-28T11:04:06.090
> 
> 标签：javascript, jquery, jquery-selectors

jQuery 当前使用`window`它作为它的默认元素，所以任何类似`$('div')`的调用都会`div`在`window`.

有什么方法可以更改 jQuery 的默认值，例如：

```
$.defaultRoot = $('.anyOtherRootElement');
$('div').text("Hello"); 
```

`.anyOtherRootElement`这将选择包含类的元素内的任何 div 。

提前致谢

* * *

## 更新

只是一个更新在这里更细化了这个问题：

我想根据来自外部脚本的外部查询执行上述操作，外部脚本不知道是什么`defaultRoot`所以他们仍然可以调用应该是当前基础的内容，所以在这种情况下，我害怕添加 a不幸的是，第二个参数不是一个选项。

同时创建`function`which 返回`defaultRoot.find(el)`会阻止我使用第一级方法，例如`$.trim`,`$.each`等……所以不幸的是，这也是不可能的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T11:08:30.763

理想情况下（出于性能原因）您想要使用`find()`

```
$.defaultRoot.find("div"); 
```

否则，您可以使用设置上下文的 2 参数形式

```
 $("div", $.defaultRoot); 
```

一般来说，您不希望隐式地执行这些类型的事情，因为其他人在以后必须使用您的代码时很容易被彻底搞糊涂。如果您想始终如一地执行此操作并使其更短，您应该创建自己的函数来执行此操作，例如：

```
var $s = function(selector) {
  return $.defaultRoot.find(selector);
} 
```

然后你就可以使用

```
$s("div") 
```

或者你也可以用类似的东西做一个范围内的高阶函数

```
var withScope = function(scope$) {
  return function(selector) {
    return scope$.find(selector);
  }
}

var $s = withScope($.defaultRoot);
$s("div") 
```

如果出于某种原因你真的想搞砸客户端代码的默认状态（乞求混乱 IMO），你应该看看功能实践：currying。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T11:07:26.970

我不认为 jQuery 提供这样的方法或变量。但是您可以在 jQuery 方法中传递第二个参数来设置上下文。

```
$.defaultRoot = $('.anyOtherRootElement');
$('div', $.defaultRoot ).text("Hello"); // all div inside $('.anyOtherRootElement')
$('div' ).text("Hello"); //all div inside body tag 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T11:10:05.883

鉴于您可以将上下文作为第二个参数传递，您可以`$()`使用内部调用 JQuery 的版本轻松覆盖 Javascript 中的运算符，`jQuery.noConflict();`并始终将新根作为第二个参数传递。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T11:06:32.483

```
$('SELECTOR', 'CONTEXT') 
```

您可以使用上下文。和你的情况一样`$('div', '.anyOtherRootElement')`

更多详情，请访问[http://api.jquery.com/jQuery/](http://api.jquery.com/jQuery/)

# arrays - 在 2D numpy 数组中绘制一个矩形

> ID：12638790
> 
> 赞同：6
> 
> 时间：2012-09-28T11:04:41.580
> 
> 标签：arrays, numpy, draw, shape

我有一个 2D numpy 数组，其中包含来自传感器每个像素的单个数据。图像显示在 GUI 中，并带有来自摄像机的实时馈送。我希望能够在图像上绘制一个矩形以区分屏幕区域。绘制一个与图像侧面平行的矩形似乎很简单，但我最终希望能够旋转矩形。我如何知道矩形在旋转时覆盖了哪些像素？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-29T18:48:06.053

如果你不介意依赖，你可以使用 Python Imaging Library。给定一个 2D numpy 数组`data`和一个`poly`多边形坐标数组（形状为 (n, 2)），这将绘制一个填充了数组中值 0 的多边形：

```
img = Image.fromarray(data)
draw = ImageDraw.Draw(img)
draw.polygon([tuple(p) for p in poly], fill=0)
new_data = np.asarray(img) 
```

这是一个独立的演示：

```
import numpy as np
import matplotlib.pyplot as plt

# Python Imaging Library imports
import Image
import ImageDraw

def get_rect(x, y, width, height, angle):
    rect = np.array([(0, 0), (width, 0), (width, height), (0, height), (0, 0)])
    theta = (np.pi / 180.0) * angle
    R = np.array([[np.cos(theta), -np.sin(theta)],
                  [np.sin(theta), np.cos(theta)]])
    offset = np.array([x, y])
    transformed_rect = np.dot(rect, R) + offset
    return transformed_rect

def get_data():
    """Make an array for the demonstration."""
    X, Y = np.meshgrid(np.linspace(0, np.pi, 512), np.linspace(0, 2, 512))
    z = (np.sin(X) + np.cos(Y)) ** 2 + 0.25
    data = (255 * (z / z.max())).astype(int)
    return data

if __name__ == "__main__":
    data = get_data()

    # Convert the numpy array to an Image object.
    img = Image.fromarray(data)

    # Draw a rotated rectangle on the image.
    draw = ImageDraw.Draw(img)
    rect = get_rect(x=120, y=80, width=100, height=40, angle=30.0)
    draw.polygon([tuple(p) for p in rect], fill=0)
    # Convert the Image data to a numpy array.
    new_data = np.asarray(img)

    # Display the result using matplotlib.  (`img.show()` could also be used.)
    plt.imshow(new_data, cmap=plt.cm.gray)
    plt.show() 
```

此脚本生成此图：

![在此处输入图像描述](../Images/2bd25722315f50f0691ac655fed98014.png)

# jquery - 为什么与我的复选框相关的操作在第一次单击时不起作用？

> ID：12638791
> 
> 赞同：1
> 
> 时间：2012-09-28T11:05:00.167
> 
> 标签：jquery, checkbox

我正在尝试为培训课程创建一个订单表格，其中包括现有或以前客户的折扣。这应该很简单 - 如果您是以前的学生，只需勾选复选框，表格就会应用折扣。

我写的代码*几乎*可以工作，但有一个明显的问题。第一次选中该框时，什么也没有发生。然后，如果您取消选中该框，则会应用折扣。*再次*选中该框，它会删除折扣。这意味着如果您选中该框一次，则不会发生任何事情，但如果您再次单击它，尽管表明您*不是*现有/以前的客户，您仍会收到折扣。

html如下：

```
<input type="checkbox" name="discounttick" value="Current or former student" id="discountbox" /> 
```

和jQuery：

```
var discount = 1;

function discountfunction(){
 if($("#discountbox").attr('checked')){
 discount = 0.9;
 }
 else {
 discount = 1;
 } 
 }

$("#discountbox").click(discountfunction); 
```

任何帮助将非常感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T11:07:37.160

`attr`方法不是获取/设置您可以使用的元素属性的好选择`prop`：

```
if($("#discountbox").prop('checked')){ 
```

您还可以使用*三元*运算符和`change`事件：

```
$('#discountbox').change(function(){
     discount = this.checked ? 0.9 : 1
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T11:07:59.220

在老兄周围交换你的变量

```
var discount = 1;

function discountfunction(){
 if($("#discountbox").attr('checked')){
 discount = 1;
 }
 else {
 discount = 0.9;
 } 
 }

$("#discountbox").click(discountfunction); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T11:25:11.250

尝试使用**is**而不是 attr。

```
 var discount = 1;

    function discountfunction(){
     if($("#discountbox").is(':checked')){
     discount = 0.9;
     }
     else {
     discount = 1;
     } 
     }

    $("#discountbox").click(discountfunction); 
```

# xcode4 - NSOpenPanel 在 Mountain Lion 下崩溃

> ID：12638795
> 
> 赞同：3
> 
> 时间：2012-09-28T11:05:06.813
> 
> 标签：xcode4, osx-mountain-lion, nsopenpanel

在我的几个项目中，我使用以下代码：

```
NSOpenPanel * ProfilOpenPanel = [NSOpenPanel openPanel];
[ProfilOpenPanel setCanChooseFiles:YES];
[ProfilOpenPanel setCanChooseDirectories:NO];
[ProfilOpenPanel setAllowsMultipleSelection:YES];
[ProfilOpenPanel setAllowedFileTypes:[NSArray arrayWithObject:@"txt"]];
int antwort=[ProfilOpenPanel runModal]; 
```

自升级到 10.8 和 Xcode4.5 后，此代码不再工作。面板打开，但随后应用程序崩溃并在调试导航器中显示如下消息： quicklook.pluginload(serial) 1 Thread Thread 5 14 _pthread_wqthread

在控制台中，出现几个警告：WindowServer: CGXDeferSurfaces: Invalid source window 19938 和另一个警告： 28.September.12 12:10:40.001 Xcode[78227]: [MT] DVTAssertions: Warning in /SourceCache/IDEKit/IDEKit -1854/Framework/Classes/Editor/IDEEditorContext.m:617 详细信息：x-xcode-disassembly://stack_frame 的丢失历史记录？processID=31774&threadID=12&frameID=0 对象：方法：-_greatestDocumentAncestorWasForgotten 线程：{name = (null), num = 1} 请在[http://bugreport.apple.com](http://bugreport.apple.com)提交错误，并附上此警告消息和任何有用的信息提供。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T09:19:35.167

在 xcode 中禁用我的异常断点对我有用。或者尝试禁用所有断点。

[资料来源：在http://cyborgdino.com/2012/02/nsopenpanel-displaying-a-file-open-dialog-in-os-x-10-7/#comment-702](http://cyborgdino.com/2012/02/nsopenpanel-displaying-a-file-open-dialog-in-os-x-10-7/#comment-702)的博客上回答同一张海报

# mysql - 如何订购此查询

> ID：12638798
> 
> 赞同：3
> 
> 时间：2012-09-28T11:05:18.553
> 
> 标签：mysql, sql

我有一个从 mysql 数据库中获取产品的查询。是这样的：

```
SELECT p.name, p.description, p.price, ps.sizename 
FROM products p
JOIN product_sizes ps ON ps.id = p.size_id 
```

该查询获取的 sizename 可以是 S、M、L 等，也可以是 38、39、40 等。

我现在想要的是，对于这个查询，是按 sizename 排序，但是排序是这样的S、M、L、XL、XXL，而不是字母 L、M、S、XL、XXL。

这该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T11:16:23.693

这应该有效：

```
SELECT p.name, p.description, p.price, ps.sizename 
FROM products p
JOIN product_sizes ps ON ps.id = p.size_id
order by case when CONVERT(sizename, SIGNED INTEGER) IS NOT NULL 
    THEN CONVERT(sizename, SIGNED INTEGER) 
    ELSE -CAST(-1 AS UNSIGNED) END ASC
, case sizename WHEN 'S' THEN 1 
            WHEN 'M' THEN 2
            WHEN 'L' THEN 3
            WHEN 'XL' THEN 4
            WHEN 'XXL' THEN 5 END ASC
, sizename ASC 
```

这是一个小提琴：[http ://sqlfiddle.com/#!2/4a3fb/1/0](http://sqlfiddle.com/#!2/4a3fb/1/0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T11:08:09.120

```
order by case when ps.sizename in (38,39,40)
              then ps.sizename
              when ps.sizename = 'XS'
              then 1
              when ps.sizename = 'S'
              then 2
              when ps.sizename = 'M'
              then 3
              when ps.sizename = 'L'
              then 4
              when ps.sizename = 'XL'
              then 5
              when ps.sizename = 'XXL'
              then 6
         end 
```

您可以根据需要调整字母数字顺序的数字

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T11:07:57.747

你可以用一个`CASE`语句来做到这一点，但我建议`SortOrder`在你的 Size 表中添加一列，并按此排序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T11:09:14.977

尝试

```
 ORDER BY 
        CASE    WHEN sizename='S'    THEN 38 
                WHEN sizename='M'    THEN 39
                WHEN sizename='L'    THEN 40
                WHEN sizename='XL'   THEN 42
                WHEN sizename='XXL'  THEN 44
                WHEN sizename REGEXP ('[0-9]') THEN sizename
        END 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T11:13:50.733

尝试按您想要的顺序指定现有值，如下所示：

```
SELECT p.name, p.description, p.price, ps.sizename 
FROM products p
JOIN product_sizes ps ON ps.id = p.size_id
ORDER BY FIELD(ps.sizename,'S','M','L','XL','XXL',...) 
```

# objective-c - 文字与文字不匹配

> ID：12638800
> 
> 赞同：-1
> 
> 时间：2012-09-28T11:05:28.600
> 
> 标签：objective-c, xcode

> **可能重复：**
> [iOS6 UIAlertView.title 坏了？](https://stackoverflow.com/questions/12592377/ios6-uialertview-title-broken)

// btnstartgame.enabled = yes 但它不应该被启用，我不知道为什么，请帮忙。

//附言。此代码将一些已保存的字符串提供给 2 个标签，然后应检查它们是否相同，尽管由于某种原因它们永远不会相同。（他们 = lblTeamOne 和 lblTeamTwo）

```
@synthesize lblTeamOne;
@synthesize lblTeamTwo;
@synthesize sliderTeamOneOutlet;
@synthesize sliderTeamTwoOutlet;
@synthesize btnStartGame;
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self)
{
    // Custom initialization
}
return self;
}
-(void)loadTeams:(NSString*)location:(UILabel*)lblname
{

NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSString *loadstring = [defaults objectForKey:location];
lblname.text = loadstring;
}
-(void)sliderdisplay:(UISlider *)sliderOutlet :(UILabel *)lblName
{

if(0 < sliderOutlet.value && 1 >= sliderOutlet.value)
{
    [self loadTeams:@"save1" :lblName];

}
if(1 < sliderOutlet.value && 2 >= sliderOutlet.value)
{
    [self loadTeams:@"save2" :lblName];

}
if(2 < sliderOutlet.value && 3 >= sliderOutlet.value)
{
    [self loadTeams:@"save3" :lblName];

}
if(3 < sliderOutlet.value && 4 >= sliderOutlet.value)
{
    [self loadTeams:@"save4" :lblName];

}
if(4 < sliderOutlet.value && 5 >= sliderOutlet.value)
{
    [self loadTeams:@"save5" :lblName];

}
if(5 < sliderOutlet.value && 6 >= sliderOutlet.value)
{
    [self loadTeams:@"save6" :lblName];

}
if(6 < sliderOutlet.value && 7 >= sliderOutlet.value)
{
    [self loadTeams:@"save7" :lblName];

}
if(7 < sliderOutlet.value && 8 >= sliderOutlet.value)
{
    [self loadTeams:@"save8" :lblName];

}
}
-(void)loadMaximum
{

int teamAmount = [[[NSUserDefaults standardUserDefaults] objectForKey:@"teamAmount"] intValue];
NSNumber *yourNumber = [NSNumber numberWithInt:teamAmount];
float sliderMaximumDigital = [yourNumber floatValue];
[sliderTeamOneOutlet setMaximumValue:sliderMaximumDigital];
[sliderTeamTwoOutlet setMaximumValue:sliderMaximumDigital];
}

- (void)viewDidLoad
{
[super viewDidLoad];
[self loadMaximum];
[self loadTeams:@"save1" :lblTeamOne];
[self loadTeams:@"save1" :lblTeamTwo];

if(lblTeamOne == lblTeamTwo)
{
    btnStartGame.enabled = NO;
}
if(lblTeamOne.text == lblTeamTwo.text)
{
    btnStartGame.enabled = NO;
}
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
}

- (IBAction)sliderTeamOneAction:(id)sender
{
[self sliderdisplay:sliderTeamOneOutlet :lblTeamOne];
}

- (IBAction)sliderTeamTwoAction:(id)sender
{
    [self sliderdisplay:sliderTeamTwoOutlet :lblTeamTwo];
} 
```

// 先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T11:10:27.737

要比较字符串，请执行以下操作：

```
[string1 isEqualToString:string2] 
```

如果您使用 == 您实际上是在比较内存中的位置（通常会有所不同）而不是字符串的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T11:43:54.663

您可以使用此代码 Ben 是对的，我给您一个链接，您可以在其中找到您的解决方案。另一个人也面临同样的问题。所以您也可以在这里找到您的解决方案 -

[iOS6 UIAlertView.title 坏了？](https://stackoverflow.com/questions/12592377/ios6-uialertview-title-broken/12619611#12619611)

# java - Java 泛型和集合，为什么我不能用通配符实例化新列表？

> ID：12638803
> 
> 赞同：4
> 
> 时间：2012-09-28T11:05:34.583
> 
> 标签：java, generics, collections

为什么我可以有一个方法接收带有通配符的列表：

```
public processGenerics(List<? extends User> users){...} 
```

但我不能以类似的方式实例化同一个列表？

```
List<? extends User> alist = new ArrayList<? extends User>(); 
```

[已编辑，不是原始问题的一部分，但相关] 为什么我不能以与正常继承相同的方式对 Collections 进行强制转换：

```
List<User> users = new ArrayList<Admin>(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T11:23:17.253

问题中最令人困惑的方面是泛型类型与经典原始类型之间必须经历的潜在心理转换。

在泛型之前，每个变量都有一个明确的类型，例如 Object。尽管您可以将一个字符串分配给它，但一个字符串仍然**是一个**对象，因此范式成立——在所有情况下，您都将**一个对象**分配给一个 Object var。

泛型并非如此。您可能有一个`List<? extends Number>`，它可以从与声明的变量类型无关的一系列类型中分配`instanceof`，但只满足某种**模式**。模式由通配符描述。

因此，为了让您在推理泛型变量类型时更轻松，您需要放弃明确类型的简单而舒适的概念，并根据这些“类型模式”进行思考。

至于你问题的第二部分：`List<User>`and是完全不相关的类型，不管and是相关`List<Admin>`的事实。这就是泛型的工作方式，这是有充分理由的。Java 不允许您添加到, 并且根据您的假设可能会发生：`User``Admin``OrdinaryUser``List<Admin>`

```
List<User> users = new ArrayList<Admin>();
users.add(new OrdinaryUser()); // shouldn't be allowed! 
```

官方术语是泛型类型在其类型参数方面是*不变的。*最好用谷歌搜索这个术语，因为它已经很好地涵盖了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-28T11:13:56.533

构造：

```
List<? extends User> user 
```

表示可以保存 的实例的变量`List<T>`，其中`T`是用户的某个**未知**子类型。当你实际实例化 an`ArrayList<T>`时，你总是知道它应该持有什么类型，所以让你在那里表达这种不确定性是没有用的。

换一种说法：一个变量可以保存（可能）许多不同类型的对象。一个对象实例只有它自己的一种类型。这就是为什么变量声明必须更加灵活的原因。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-28T11:12:49.830

您不能实例化通配符实例。您只能实例化一个特定的实例，例如：

```
List<? extends User> alist1 = new ArrayList<User>();
List<? extends User> alist2 = new ArrayList<SubClassOfUser>(); 
```

什么`List<? extends User>`意思是“一个列表，其类型在编译时未知，但它的上限是`User`-或者是”`User`的子类`User`

虽然可以使用通配符定义*变量* ，但实例可能不会 - 它必须是*某物的列表*

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-28T11:47:31.803

new 运算符通过为新对象分配内存并返回对该内存的引用来实例化一个类。[甲骨文](http://docs.oracle.com/javase/tutorial/java/javaOO/objectcreation.html)

当您使用通配符创建对象时，您无法知道要分配多少内存。

作为参数类型传递给方法的内容不涉及内存分配。

# r - ggplot2图例着色

> ID：12638808
> 
> 赞同：0
> 
> 时间：2012-09-28T11:05:46.927
> 
> 标签：r, ggplot2

我有一个包含 5 列的文本表。我想在同一个图上绘制 4 列作为单独的密度图。我可以实现如下： ![在此处输入图像描述](../Images/b09b1cb20bb034b653d1e20653bde320.png)

上图的代码：

```
library(ggplot2)
library(grid)

dat <- read.table(textConnection("
file        low        high       avg               lowest
102         4218.0     5437.0     4739.0            4723.0
103         4516.0     5765.0     5061.0            5036.0
104         4329.0     5554.0     4858.0            4838.0
107         4094.0     5261.0     4596.0            4578.0
108         4334.0     5569.0     4865.0            4846.0
109         4397.0     5596.0     4924.0            4896.0
110         4046.0     5257.0     4555.0            4547.0
"), header=TRUE)

x_low = dat$low
x_high = dat$high
x_avg = dat$avg
x_lowest = dat$lowest

plotter = ggplot() + geom_density(aes(x=x_low), colour="red", fill="red", alpha = .3, data=data.frame(dat$low))
plotter = plotter + geom_density(aes(x=x_high),colour="blue", fill="blue", alpha = .3, data=data.frame(dat$high))
plotter = plotter + geom_density(aes(x=x_avg), colour="green", fill="green", alpha = .3, data=data.frame(dat$avg))
plotter = plotter + geom_density(aes(x=x_lowest), colour="purple", fill="purple", alpha = .3, data=data.frame(dat$lowest))
plotter = plotter + xlim(c(2000,7000))
print(plotter) 
```

我现在想在情节的一边有一个传奇。据我了解，我需要`colour`在括号内移动`aes`

我这样做如下：

```
library(ggplot2)
library(grid)

dat <- read.table(textConnection("
file        low        high       avg               lowest
102         4218.0     5437.0     4739.0            4723.0
103         4516.0     5765.0     5061.0            5036.0
104         4329.0     5554.0     4858.0            4838.0
107         4094.0     5261.0     4596.0            4578.0
108         4334.0     5569.0     4865.0            4846.0
109         4397.0     5596.0     4924.0            4896.0
110         4046.0     5257.0     4555.0            4547.0
"), header=TRUE)

x_low = dat$low
x_high = dat$high
x_avg = dat$avg
x_lowest = dat$lowest

plotter = ggplot() + geom_density(aes(x=x_low, colour="red", fill="red"), alpha = .3, data=data.frame(dat$low))
plotter = plotter + geom_density(aes(x=x_high, colour="blue", fill="blue"), alpha = .3, data=data.frame(dat$high))
plotter = plotter + geom_density(aes(x=x_avg, colour="green", fill="green"), alpha = .3, data=data.frame(dat$avg))
plotter = plotter + geom_density(aes(x=x_lowest, colour="purple", fill="purple"), alpha = .3, data=data.frame(dat$lowest))

plotter = plotter + xlim(c(2000,7000))
print(plotter) 
```

这输出：

![在此处输入图像描述](../Images/6e2f9c0ad6cabd137e260f9e6ef97efa.png)

现在每个图的颜色都是错误的（与第一个图相比）以及图例中的标签。

我怎样才能：

1.  修正着色
2.  删除每个密度图的深色轮廓
3.  更正图例

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T16:19:54.480

[Dan M. 的回答](https://stackoverflow.com/a/12640262/892313)是惯用且最直接的方法，但我想展示另一种可能在某些情况下占有一席之地的方法。你有`colour`和`fill`包含他们应该使用的颜色的比例；您正在寻找的规模是身份规模。添加以下行：

```
plotter = plotter + scale_fill_identity("", 
  labels=c("red"="low", "blue"="high", "green"="avg", "purple"="lowest"),
  guide="legend") 
plotter = plotter + scale_colour_identity("",
  labels=c("red"="low", "blue"="high", "green"="avg", "purple"="lowest"),
  guide="legend") 
```

`""`参数去掉了图例标题（如果你想要那里的东西，替换它），给出`labels`每种颜色应该被标记的内容。需要一个命名向量来确保颜色和标签之间的匹配是正确的（否则，标签必须按颜色的字母顺序给出）。`guide=TRUE`绘制图例；默认情况下，身份标度没有图例。 ![在此处输入图像描述](../Images/6a80fc5f4a7b36a6e4a09c929457a146.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T12:43:54.910

如果您使用包中的数据重新组织数据`melt`，则可以简化此操作。`reshape2`我认为以下代码将为您提供正确的图例，您想要的填充颜色，并摆脱密度图的轮廓：

```
dat.m <- melt(dat, id="file")
ggplot(dat.m, aes(value, fill=variable)) + geom_density(alpha = .3, color=NA) + scale_fill_manual(values=c("red", "blue", "green", "purple")) 
```

# .net - 加载实体时休眠竞争条件

> ID：12638810
> 
> 赞同：13
> 
> 时间：2012-09-28T11:05:53.917
> 
> 标签：.net, nhibernate, race-condition

我的 webapp 中存在休眠竞争条件的问题。

我知道在使用旧版本的 log4net 时会发生这种情况（应该在 1.2.10 中修复），尽管我也遇到过这种情况。因此，我们暂时禁用了 log4net，因为竞争条件使 IIS 崩溃，并且在生产中发生这种情况是不可接受的。这发生在加载实体时（参见下面的堆栈跟踪）。除此之外，在 RavenDB 中似乎也出现了类似的问题，请参阅此[链接，以及此处](https://groups.google.com/forum/?fromgroups=#!topic/ravendb/lxb_hn74ewg)[链接](http://www.syncfusion.com/support/forums/grid-windows/76832)中没有 NHibernate 的示例。

堆栈跟踪：

```
Server Error in '/' Application.
Probable I/O race condition detected while copying memory. The I/O package is not thread safe by default. In multithreaded applications, a stream must be accessed in a thread-safe way, such as a thread-safe wrapper returned by TextReader's or TextWriter's Synchronized methods. This also applies to classes like StreamWriter and StreamReader.
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.IndexOutOfRangeException: Probable I/O race condition detected while copying memory. The I/O package is not thread safe by default. In multithreaded applications, a stream must be accessed in a thread-safe way, such as a thread-safe wrapper returned by TextReader's or TextWriter's Synchronized methods. This also applies to classes like StreamWriter and StreamReader.

Source Error:

Line 105:
Line 106:                if(webUser.Id > 0) { // logged in
Line 107:                    _user = session.Get<User>(webUser.Id);
Line 108:                    if(_user == null) { // session exists, but no user in DB with this id
Line 109:                        new SessionInit().Remove();

Source File: \App_Code\SessionInit.cs    Line: 107

Stack Trace:

[IndexOutOfRangeException: Probable I/O race condition detected while copying memory. The I/O package is not thread safe by default. In multithreaded applications, a stream must be accessed in a thread-safe way, such as a thread-safe wrapper returned by TextReader's or TextWriter's Synchronized methods. This also applies to classes like StreamWriter and StreamReader.]
   System.Buffer.InternalBlockCopy(Array src, Int32 srcOffsetBytes, Array dst, Int32 dstOffsetBytes, Int32 byteCount) +0
   System.IO.StreamWriter.Write(Char[] buffer, Int32 index, Int32 count) +117
   System.IO.TextWriter.WriteLine(String value) +204
   System.IO.SyncTextWriter.WriteLine(String value) +63
   NHibernate.AdoNet.AbstractBatcher.ExecuteReader(IDbCommand cmd) +71
   NHibernate.Loader.Loader.GetResultSet(IDbCommand st, Boolean autoDiscoverTypes, Boolean callable, RowSelection selection, ISessionImplementor session) +580
   NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies) +275
   NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies) +205
   NHibernate.Loader.Loader.LoadEntity(ISessionImplementor session, Object id, IType identifierType, Object optionalObject, String optionalEntityName, Object optionalIdentifier, IEntityPersister persister) +590

[GenericADOException: could not load an entity: [app.Presentation.User#338][SQL: SELECT user0_.userID as userID24_0_, user0_.instituteID as institut2_24_0_, user0_.email as email24_0_, user0_.password as password24_0_, user0_.username as username24_0_, user0_.mod_remarks as mod6_24_0_, user0_.lastLogin as lastLogin24_0_, user0_.active as active24_0_, user0_.isAcademic as isAcademic24_0_, user0_.created as created24_0_, (select p.firstName from ej_profile p where p.userID = user0_.userID) as formula11_0_, (select p.lastName from ej_profile p where p.userID = user0_.userID) as formula12_0_, (select p.timeZone from ej_profile p where p.userID = user0_.userID) as formula13_0_ FROM ej_user user0_ WHERE user0_.userID=?]]
   NHibernate.Loader.Loader.LoadEntity(ISessionImplementor session, Object id, IType identifierType, Object optionalObject, String optionalEntityName, Object optionalIdentifier, IEntityPersister persister) +960
   NHibernate.Loader.Entity.AbstractEntityLoader.Load(ISessionImplementor session, Object id, Object optionalObject, Object optionalId) +76
   NHibernate.Loader.Entity.AbstractEntityLoader.Load(Object id, Object optionalObject, ISessionImplementor session) +32
   NHibernate.Event.Default.DefaultLoadEventListener.LoadFromDatasource(LoadEvent event, IEntityPersister persister, EntityKey keyToLoad, LoadType options) +173
   NHibernate.Event.Default.DefaultLoadEventListener.Load(LoadEvent event, IEntityPersister persister, EntityKey keyToLoad, LoadType options) +181
   NHibernate.Event.Default.DefaultLoadEventListener.OnLoad(LoadEvent event, LoadType loadType) +1019
   NHibernate.Impl.SessionImpl.FireLoad(LoadEvent event, LoadType loadType) +403
   NHibernate.Impl.SessionImpl.Get(String entityName, Object id) +469
   NHibernate.Impl.SessionImpl.Get(Type entityClass, Object id) +374
   NHibernate.Impl.SessionImpl.Get(Object id) +391
   SessionInit.GetCurrentUser(ISession session) in j:\dev\app\app_wwwroot\App_Code\SessionInit.cs:107
   DynamicPage.OnPreInit(EventArgs e) in j:\dev\app\app_wwwroot\App_Code\DynamicPage.cs:24
   MemberPage.OnPreInit(EventArgs e) in j:\dev\app\app_wwwroot\App_Code\MemberPage.cs:20
   members_stocks_Default.OnPreInit(EventArgs e) in j:\dev\app\app_wwwroot\members\Default.aspx.cs:28
   System.Web.UI.Page.PerformPreInit() +49
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +1716 
```

用户的映射：

```
public class UserViewMapping : ClassMap<User>
{
    public UserViewMapping() {
        Table("ej_user");
        Id(s => s.Id, "userID").GeneratedBy.Native();
        Map(s => s.InstituteId, "instituteID");
        Map(s => s.Email, "email");
        Map(s => s.Password, "password");
        Map(s => s.Name, "username");
        Map(s => s.ModRemarks, "mod_remarks");
        Map(s => s.LastLogin, "lastLogin");
        Map(s => s.Active, "active");
        Map(s => s.IsAcademic, "isAcademic");
        Map(s => s.Created, "created");
        Map(s => s.FirstName).Formula("(select p.firstName from ej_profile p where p.userID = userID)");
        Map(s => s.LastName).Formula("(select p.lastName from ej_profile p where p.userID = userID)");
        Map(s => s.TimeZone).Formula("(select p.timeZone from ej_profile p where p.userID = userID)");
        HasMany<ProfileViewModel>(s => s.Profiles)
            .Table("ej_profile")
            .KeyColumn("userID")
            .Cascade.All()
            .Inverse();
} 
```

一些细节：我使用两个会话来进行查询和命令（以及两个会话工厂），因为我使用了一种类似于 CQRS 的模式。一个用于读取对象的会话，一个用于进行更改的会话（这有助于我保持我的域模型简单并查看模型和映射可能与命令模型不同）。

在我的开发环境（单个用户）中加载用户视图模型时发生竞争条件，但我们确保这在生产中永远不会发生，因为它使 IIS 7 崩溃。此外，在生产中会有多个用户，所以可能是错误可能会更频繁地发生。

此外，我们有很多遗留代码使用 System.Data 和 MySql.Data.MySqlClient.MySqlDataAdapter 来读取/写入数据库。这会不会有影响？

我正在使用 NHibernate 3.1.0（将升级到 3.3.1GA，但这很难重现）和 fluentNhibernate 用于我的映射。

sessionfactories 在 global.asax 中创建：

```
void Application_Start(object sender, EventArgs e)
{
    QuerySessionFactory.Create(connectionString);
    CommandSessionManager.Initialize(connString);
} 
```

我的页面继承自打开和关闭查询会话的 DynamicPage：

```
public class DynamicPage : System.Web.UI.Page
{
    protected override void OnPreInit(EventArgs e)
    {
        Session = QuerySessionFactory.Instance.OpenSession();
    }

    protected override void OnUnload(EventArgs e) {
        base.OnUnload(e);
        Session.Close();
    }
} 
```

在 SessionInit 中（从 httpcontext.session 读取 userID，并创建一个“webuser”，一个具有一些简单信息的用户，如 userId）。后来，我把锁放在了周围，并在事务中完成了用户获取请求，不确定它是否有用。

```
 public IUser GetCurrentUser(ISession session) {
        if(_user == null) { 
            var webUser = new SessionInit().Get;

            if(webUser.Id > 0) { // logged in
                lock(_lock) {
                    using(var tx = session.BeginTransaction()) {
                        _user = session.Get<User>(webUser.Id);
                        tx.Commit();
                    }
                }
                if(_user == null) { // session exists, but no user in DB with this id
                    new SessionInit().Remove();
                }
                ((User)_user)._currentUser = webUser;
            } else {
                if(webUser is CurrentUser && webUser.Id == 0) {
                    if(HttpContext.Current.Session != null) {
                        HttpContext.Current.Response.Cookies.Remove("ASPSESSID");
                        HttpContext.Current.Request.Cookies.Remove("ASPSESSID");
                        HttpContext.Current.Session.RemoveAll();
                        HttpContext.Current.Session.Abandon();
                    }

                    if(HttpContext.Current.Request.Url.Host.Contains("members"))
                        HttpContext.Current.Response.Redirect("/login");
                } else
                    if(webUser.Id == 0) {
                        var userId   = webUser.Id;
                        var userName = webUser.UserName;
                        var loginUrl = webUser.LoginUrl;
                        var clientIp = webUser.ClientIp;
                        var isAdmin  = webUser.IsAdmin();
                        return new eLab.Presentation.Visitor(userId, userName, loginUrl, clientIp, isAdmin, webUser.Theme); 
                    }
            }
            if (_user == null)
                return new eLab.Presentation.Visitor(webUser.Id, webUser.UserName, webUser.LoginUrl, webUser.ClientIp, false, webUser.Theme);
        }
        return _user;
} 
```

命令会话在需要时在 using 块中打开和关闭。

根据堆栈跟踪，问题出现在 StreamWriter -> System.Buffer 中，它再次由 System.IO.SyncTextWriter 调用，它应该是 System.IO.TextWriter 的线程安全包装器。

由于这发生在 TextWriter 中，有没有办法解决这个问题，使用线程安全的 TextWriter？

以我在 DynamicPage 中的方式打开和关闭会话是否安全？

由于这显然难以重现，因此也欢迎任何关于如何做到这一点的想法。

[更新] NHibernate Profiler 告诉我们，我们还在母版页中打开和关闭了一个会话（在 using 块中），因为需要检查当前用户的某些权限，因此每个请求打开两个会话。我已经对其进行了重构，因此它现在不是在页面超类中打开会话，而是在 Application_BeginRequest 上的 global.asax 中打开会话并在 Application_EndRequest 上再次关闭它，其中会话放置在 HttpContext.Current.Items 中。

但是没有确定的测试方法是否可以修复它。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-05-01T06:51:30.240

Stamppot，感谢您将此问题发布到 StackOverflow；如您所知，在 Web 上没有太多关于此错误消息的其他信息。几个月前，我的团队在一个使用 NHibernate 和 log4net 的 webapp 中遇到了类似的问题。（也可能涉及到 StringTemplate。）我们通过在 Global.ascx.cs 的 Application_Start() 事件处理程序中将 Console.Out/Error 重定向到空流（有效地禁用它们）来“修复”问题：

```
protected void Application_Start(object sender, EventArgs e)
{
    Console.SetOut(new System.IO.StreamWriter(System.IO.Stream.Null));
    Console.SetError(new System.IO.StreamWriter(System.IO.Stream.Null)); 
} 
```

详细信息：在我们的例子中，“可能的竞争条件......”错误与负载有关。在生产服务器上，此异常会偶尔出现，每次都会使工作进程崩溃。最终我们发现了如何重现它，方法是运行一个脚本，在很短的时间内用许多请求淹没 webapp。当与 NHibernate/StringTemplate/log4net 源代码相关时，异常堆栈跟踪表明使用 Console.Out/Error 方法在各种情况下进行日志记录。出现这种错误似乎是一个奇怪的地方——这些方法不[被认为是线程安全的吗？](https://stackoverflow.com/questions/1079980/calling-console-writeline-from-multiple-threads)但是，在我们应用上述解决方法后，问题立即消失了，此后再也没有出现过。不幸的是，其他优先事项使我们无法深入挖掘——但无论问题的根本原因是什么，它都没有以任何其他方式表现出来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-23T14:55:11.537

@APW 提供的解决方案的问题是，默认情况下，StreamWriter 不是线程安全的。在这里查看：[https ://msdn.microsoft.com/en-us/library/system.io.streamwriter(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/system.io.streamwriter(v=vs.110).aspx)

通过将“new StreamWriter”传递给 Console.Set* 您正在传递非线程安全实例。所以我认为再次看到类似的错误只是时间问题。

正确的方法是使用[TextWriter.Synchronized](https://msdn.microsoft.com/en-us/library/system.io.textwriter.synchronized(v=vs.110).aspx)方法来包装不安全的 Stream.Null。

```
using System.IO;
...
var nullStream = TextWriter.Synchronized(TextWriter.Null);
Console.SetOut(nullStream);
Console.SetError(nullStream); 
```

UPD：请忽略这个。我发现 Console.SetOut 将任何流包装到 TextWriter.Synchronized(...) 中。[证明。](http://referencesource.microsoft.com/#mscorlib/system/console.cs,1937)

# postgresql - 带有 PostgreSQL 的 CakePHP 2.2 新行插入失败 - 数据库错误：未定义的表：7 错误：关系“table_id_seq”不存在

> ID：12638811
> 
> 赞同：1
> 
> 时间：2012-09-28T11:06:03.110
> 
> 标签：postgresql, cakephp, cakephp-2.2

我的问题如下。

从表中删除多行后，将新记录插入同一个表会导致错误。

```
Database Error
Error: SQLSTATE[42P01]: 
Undefined table: 7 ERROR: relation "order_details_id_seq" does not exist 
```

桌子

```
CREATE TABLE schema.order_details (
    id serial NOT NULL,
    order_id integer NOT NULL,
    field_1 integer,
    field_2 real,
    field_3 character varying(15),
    CONSTRAINT order_details_pkey PRIMARY KEY (id )
)
WITH (
    OIDS=FALSE
); 
```

插入是

```
INSERT INTO "schema"."order_details" ("order_id", "field_1", "field_2", "field_3")
VALUES (37, 1, 2, 'value'); 
```

存在使用的模式中的序列“模式”。“order_details_id_seq”。

```
CREATE SEQUENCE schema.order_details_id_seq
    INCREMENT 1
    MINVALUE 1
    MAXVALUE 9223372036854775807
    START 37
    CACHE 1; 
```

楷模。

```
// Model
class Order extends AppModel {
public $useDbConfig = 'other_data';
public $hasMany = array(
    'OrderDetail' => array(
        'className' => 'OrderDetail',
        'foreignKey' => 'order_id',
        'dependent' => true,
        'order' => array(
                      'OrderDetail.order_id',
                      'OrderDetail.field_1'
                     ))
);

class OrderDetail extends AppModel {
public $useDbConfig = 'other_data';
public $belongsTo = array(
    'Order' => array(
        'className' => 'Order',
        'foreignKey' => 'order_id',
        'dependent'    => true
    ),

// model Order save code on recreation of order
$this->OrderDetail->deleteAll(array('OrderDetail.order_id' => $this->id)); 
```

此时尝试插入`$this->OrderDetail->query('VACUUM FULL ANALYZE order_details');`没有效果

```
foreach ($details as $d) {
    $this->OrderDetail->create();
    $this->OrderDetail->save($d /*array(
        'order_id' => $this->id,
        'field_1' => 1, 
        'field_2' => 2, 
        'field_3' => 'value'
      )*/);
} 
```

我在第一个 foreach 循环中出错。最奇怪的是，这个问题会在一段时间后随机出现和消失。

关于它可能是什么以及如何摆脱它的任何建议？

* * *

目前使用代码解决的问题。

```
$this->Order->id = $id;
$this->Order->delete(); 
```

它为删除语句的每一行（在我的情况下额外 100 个！）触发 2 个查询，而不是在

```
$this->OrderDetail->deleteAll(array('OrderDetail.order_id' => $id)); 
```

所以这次它有改进的空间。

**编辑：**当前代码可以正常工作，因为它应该与调整`DboSource`的 .

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T19:15:17.160

蛋糕似乎在公共模式中寻找它不位于的序列。

通过调整以在`Model/Datasource/DboSource.php` `create`具有此差异的最后插入 getter inf 文件方法中包含模式名称来修复它

@@ -1006,7 +1006,7 @@

```
if ($this->execute($this->renderStatement('create', $query))) {
    if (empty($id)) {
-       $id = $this->lastInsertId($this->fullTableName($model, false, false), $model->primaryKey);
+       $id = $this->lastInsertId($this->fullTableName($model, false, true), $model->primaryKey);
    }
    $model->setInsertID($id);
    $model->id = $id; 
```

我知道修改核心不是要走的路，但只要它可以工作，我就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-06T15:59:27.753

这发生在我身上，因为我修改了表的名称，但 PostgreSQL 没有更改序列的名称。知道了这一点，我更改了影响该表的序列的名称并解决了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-11T12:54:42.510

为防止出现此错误，请在使用 cakephp 时使用此约定命名您的序列：*table_name* _id_seq。例如：

```
table name: user
sequence name should be: user_id_seq 
```

如果你已经有序列，你可以像这样在 posgres 中重命名它

```
alter sequence user_seq rename to user_id_seq 
```

我不喜欢这种命名序列的方式，但在我的情况下它可以防止这种错误

# android - onActivityResult 未从主类调用

> ID：12638813
> 
> 赞同：0
> 
> 时间：2012-09-28T11:06:11.023
> 
> 标签：android, android-intent

我的应用程序有问题。我有一个名为 ExperimentView 的活动，它有一个名为 FrameRoll 的内部类，它实现了 Runnable。

```
public class ExperimentView extends Activity implements OnClickListener,{

    public void onCreate(Bundle savedInstanceState) {
      //Other stuff
      //Call the gpshandler activity
      gpsCall();
    }

    public void gpsCall() {
     if (gpsEnabled.equalsIgnoreCase("true")) {

        Intent gpsHandler = new Intent(ExperimentView.this,
                GpsHandler.class);
        startActivityForResult(gpsHandler,
                GPSHANDLER_ACTIVITY_RETURN);
finish();

       }
  }
  protected void onActivityResult(int requestCode, int resultCode, Intent data) {
     super.onActivityResult(requestCode, resultCode, data);
     //retrieve the data
  }

  public class FrameRoll implements Runnable {
     //do other stuff
  } 
```

}

我正在从 onCreate 方法调用一个子活动，以检索一些 gps 数据。成功检索了 gps 数据。

```
public class GpsHandler extends Activity {

    //obtain location
enter code here
Intent resultIntent = new Intent();
                resultIntent.putExtra("location",
                        optimalLocation.toString());

              setResult(Activity.RESULT_OK, resultIntent); 
```

}

当我尝试从内部类（frameroll）调用子活动时，子活动正常运行，但从不调用 ExperimentVIew 中的 onActivityResult 方法，因此我没有得到任何数据。

```
public class ExperimentView extends Activity implements OnClickListener,{

    public void onCreate(Bundle savedInstanceState) {
      //Other stuff
      //Call the gpshandler activity
      gpsCall();
    }

    public void gpsCall() {
     if (gpsEnabled.equalsIgnoreCase("true")) {

        Intent gpsHandler = new Intent(ExperimentView.this,
                GpsHandler.class);
        startActivityForResult(gpsHandler,
                GPSHANDLER_ACTIVITY_RETURN);

       }
  }
  protected void onActivityResult(int requestCode, int resultCode, Intent data) {
     super.onActivityResult(requestCode, resultCode, data);
     //retrieve the data
  }

  public class FrameRoll implements Runnable {
     gpsCall();
  } 
```

}

我尝试了不同的东西，包括`onActivityResult`在嵌套类中实现，尝试做类似的事情`ExperimentView.this.startActivityForResults()`，我在 gpshandler 中打印了调用活动，它是 ExperimentView。

我尝试的每个方法都失败了。仅当从 . 调用子活动时才调用 onActivityResult 。`onCreate`有人知道我该怎么办吗？

谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:16:52.253

`onActivityResult`一旦您的被调用活动完成，就会被调用。因此，您需要`finish();`在设置结果后调用。例如：

```
setResult(Activity.RESULT_OK, resultIntent);
finish(); 
```

*确保您的`GpsHandler`类符合**Activity**的正确实现，因为它似乎没有覆盖**onCreate**和/或其他方法。

# c# - 如何在 DataTable 中的 gridview 内的标签中添加文本

> ID：12638818
> 
> 赞同：0
> 
> 时间：2012-09-28T11:06:33.243
> 
> 标签：c#, asp.net, gridview, label

我想从 DataTable 绑定网格视图

```
 var dt = new DataTable();
    dt.Columns.Add("nrtest");
    dt.Columns.Add("asd");
    dt.Columns.Add("dsa");
    dt.Columns.Add("qwe");
    dt.Columns.Add("ewq");

    dt.Rows.Add("test1","","","","");
    dt.Rows.Add("test2","","","","");
    dt.Rows.Add("test3","","","","");

    mygrid.DataSource = dt;
    mygrid.DataBind(); 
```

我的网格中的第一列包含标签

我想将数据表中的第一列添加到gridview的第一列

我正在尝试这样：

```
 foreach(GridViewRow gdRow in mygrid.Rows)
            {
               if (gdRow.RowType == DataControlRowType.DataRow)
                     {
             var label1 = (Label) gdRow.Cells[1].FindControl("myLabel");
                         text1.Text = text1;

             var label2 = (Label) gdRow.Cells[1].FindControl("myLabel");
                         text2.Text = text2;

             var label3 = (Label) gdRow.Cells[1].FindControl("myLabel");
                         text3.Text = text3;
           }
      }
  but it doesn't work, at the end all the labels contain text3 
```

我的网格视图：

```
 <asp:GridView ID="mygrid" runat="server" AutoGenerateColumns="False" 
              Visible="True" width="600px" onrowcreated="GdOrarRowCreated">

          <Columns>
                      <asp:TemplateField >
                          <HeaderTemplate>
                   <asp:Label ID="text" runat="server" Text="text" ></asp:Label>
                          </HeaderTemplate>
                          <ItemTemplate>
                              <asp:Label runat="server" ID="myLabel" />
                          </ItemTemplate>
                      </asp:TemplateField>

  <asp:BoundField DataField="asd" Visible="True"  HeaderText="col2"/>
  <asp:BoundField DataField="dsa" Visible="True"  HeaderText="col3"/>
  <asp:BoundField DataField="qwe" Visible="True"  HeaderText="col4"/>
  <asp:BoundField DataField="ewq" Visible="True"  HeaderText="col5"/>

                       </Columns>
                    </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T11:28:11.257

**您正在为所有 3 个标签分配相同的 id。给他们一个唯一的ID，然后尝试。因为它分配了最后一个值**

您的代码还有其他一些问题，您可以尝试类似

```
 var dt = new DataTable();
    dt.Columns.Add("nrtest");
    dt.Columns.Add("asd");
    dt.Columns.Add("dsa");
    dt.Columns.Add("qwe");
    dt.Columns.Add("ewq");

    dt.Rows.Add("test1", "", "", "", "");
    dt.Rows.Add("test2", "", "", "", "");
    dt.Rows.Add("test3", "", "", "", "");

    mygrid.DataSource = dt;
    mygrid.DataBind(); 
```

做任何事情，然后绑定网格，您可以使用 for 循环，这将允许您更轻松地获取行索引，然后您可以使用 rowindex 绑定：

```
 var rows =  mygrid.Rows;
    for(int i=0,j=rows.Count; i<j;i++)
    {
        var row = rows[i];
        if (row.RowType == DataControlRowType.DataRow)
        {
            var label1 = (Label)row.Cells[1].FindControl("myLabel");
            //use rowindex i and colindex "nrtest" to get data from dt
            label1.Text = dt.Rows[i]["nrtest"].ToString();
        }
    } 
```

网格代码将保持与所讨论的相同

```
<asp:GridView ID="mygrid" runat="server" AutoGenerateColumns="False" Visible="True"
    Width="600px">
    <Columns>
        <asp:TemplateField>
            <HeaderTemplate>
                <asp:Label ID="text" runat="server" Text="text"></asp:Label>
            </HeaderTemplate>
            <ItemTemplate>
                <asp:Label runat="server" ID="myLabel" />
            </ItemTemplate>
        </asp:TemplateField>
        <asp:BoundField DataField="asd" Visible="True" HeaderText="col2" />
        <asp:BoundField DataField="dsa" Visible="True" HeaderText="col3" />
        <asp:BoundField DataField="qwe" Visible="True" HeaderText="col4" />
        <asp:BoundField DataField="ewq" Visible="True" HeaderText="col5" />
    </Columns>
</asp:GridView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T11:16:54.280

您正在为所有 3 个标签分配相同的 id。给他们一个唯一的ID，然后尝试。

# symfony-1.4 - 使用 Symfony/Propel 1.4 强制更改“updated_at”列

> ID：12638820
> 
> 赞同：0
> 
> 时间：2012-09-28T11:06:48.083
> 
> 标签：symfony-1.4, propel

我在 Symfony 1.4 和 Propel 1.4 中有一个现有项目

对于新要求，我尝试了以下代码：

```
static public function extendMomentoLock($momentoId,$memberId)
{
    $wherec = new Criteria();
    $updatec = new Criteria();

    $updatec->add(MomentoPeer::LOCKED, 1);
    $updatec->addAnd(MomentoPeer::LOCKEDBY, $memberId);
    $wherec->add(MomentoPeer::ID, $momentoId, Criteria::EQUAL);

    $con = Propel::getConnection(MemberPeer::DATABASE_NAME, Propel::CONNECTION_WRITE);
    BasePeer::doUpdate($wherec, $updatec, $con);

    return "extended";
} 
```

正如预期的那样，它生成了正确的查询，取自日志

```
UPDATE momento SET `LOCKED`=1, `LOCKEDBY`=6 WHERE momento.ID='198' 
```

到这里为止没有问题。

问题开始了，因为我需要每 3 分钟运行一次此查询。规则是，如果记录提前 5 分钟更新，则每 5 分钟自动解锁一次。要保持锁定状态，`updated_at`列必须少于 5 分钟，以便浏览器发送请求以保持记录锁定。

我期待查询更新`updated_at`列。但是，由于查询中没有任何更新，`updated_at`因此列没有更新。

有没有办法强制执行查询，即使没有更新记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:33:24.613

我猜您正在使用 Timestampable 行为，因此只有在行上执行更改时它才会更新日期字段。

我认为您可以使用基本 SQL 语句强制更新：

```
$updatec->addAnd(MomentoPeer::UPDATED_AT, 'NOW()'); 
```

# css - 强制刷新背景图像

> ID：12638821
> 
> 赞同：20
> 
> 时间：2012-09-28T11:06:48.413
> 
> 标签：css

有没有办法确保最近更新的某个背景图像确实出现在每个人的浏览器上的最新版本中（而不是存储在缓存中的旧版本）？

它必须是一个不涉及调用 CSS 的代码行的解决方案（我可以在 css 文件名之后放置一个问号和一个版本号，例如 : `<link href="styles.css?v=2" rel="stylesheet" type="text/css"/>`，但在这种情况下，我无权访问这部分编码）

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-28T11:14:28.290

您可以使用以下方法：

```
.button {
    background: url(../Images/button.png?v=1234);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T11:14:51.347

您可以在另一个 CSS 之后添加另一个 CSS 规则，它会覆盖加载图像并使用添加了版本号的图像的规则。

稍后加载的 CSS 规则具有更高的优先级，因此您可以使用与主 CSS 中相同的选择器，它会覆盖它。

如果你做不到，那你就完蛋了。您必须更改加载的图像的 URL 才能确保获得新图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T12:04:52.137

我喜欢放在这里的几件事

1.  HTML页面中引用的图片、JS、CSS文件根据URL缓存在浏览器中
2.  URL 的更改将向服务器发出新请求并将最新的请求存储在缓存中。

您需要做的就是更改 URL。

虽然您修改了 css 样式表，但您需要更新 HTML 以供 CSS 参考。

```
background: url(../Images/button.png?v=1234); 
```

例如： `http://www.site.com/css/style.css`到`http://www.site.com/css/style.css?ver=002`

```
<link rel="stylesheet" href="css/style.css?ver=002" type="text/css" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T11:15:50.747

您可以添加一个`Expires`in `htaccess`，但如果图像真的很大，那么我建议不要这样做。正如您在没有 CSS 的情况下询问的那样，请尝试：

```
<Files "your_bg.jpg">
FileETag None
<ifModule mod_headers.c>
Header unset ETag
Header set Cache-Control "max-age=0, no-cache, no-store, must-revalidate"
Header set Pragma "no-cache"
Header set Expires "Wed, 11 Jan 1984 05:00:00 GMT"
</ifModule>
</Files> 
```

# java - SimpledateFormat的解析方法java

> ID：12638828
> 
> 赞同：0
> 
> 时间：2012-09-28T11:07:32.047
> 
> 标签：java, parsing, date, date-format, simpledateformat

这是一个愚蠢的问题，但我看不出我做错了什么。我想将字符串解析为`24:00`日期对象。我知道，如果我们使用`kk:mm`日期格式，则时间将从 01:00 到 24:00（[来自 API](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)）。但我无法让下面的代码工作。

```
String test = "24:00";
System.out.println("TEST: " + new SimpleDateFormat("kk:mm").parse(test)); 
```

输出：

```
TEST: Thu Jan 01 00:00:00 GMT 1970 
```

预期输出：

```
TEST: Thu Jan 01 24:00:00 GMT 1970 
```

**编辑：**

```
System.out.println("TEST: " + new SimpleDateFormat("k:mm:ss").format(new SimpleDateFormat("k:mm:ss").parse(test))); 
```

这打印`TEST: Thu Jan 01 24:00:00 GMT 1970`

但是为什么不在解析时呢？

任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T11:16:19.957

Date.toString() 方法默认为 hh:mm。使用 SimpleDateFormat 输出它以及解析它。

# jquery - 使用 .animate 切换 div

> ID：12638832
> 
> 赞同：0
> 
> 时间：2012-09-28T11:07:45.183
> 
> 标签：jquery, html, jquery-animate

到目前为止，我有以下代码：

```
$('div.welcome-handle').click(function() {
        top.$('#welcome-message').toggle(function() {
            $(this).animate({"left": "-=749px"}, 500);
        },
        function() {
            $(this).animate({"left": "+=749px"}, 500);
        });
    }); 
```

我需要能够单击 .welcome-handle 以将#welcome-message 隐藏在屏幕外，然后能够再次单击 .welcome-handle 以将其恢复到原始位置。

上面的代码执行第一部分，然后在第二次单击时显示#welcome-message 并将其滑回以隐藏它。我怎样才能做到这一点：（#welcome 句柄绝对定位在屏幕上）

点击事件 - 滑动 div -749px 点击事件 - 滑动 div +749px 等等...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T11:13:28.263

您可以实现自己的切换。你可以阅读jQuery toggle 的[文档](http://api.jquery.com/toggle/)。

```
 var isShow = true;
    $('div.welcome-handle').click(function() {
          if(!isShow){
            isShow= true;
            top.$('#welcome-message').animate({"left": "-=749px"}, 500);
           }else{
             isShow= false;
             top.$('#welcome-message').animate({"left": "+=749px"}, 500);
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T11:25:50.713

检查 div 是否隐藏，我建议您缓存 dom 对象，以便减少 dom 操作。

```
var CurrDivObject=$('#welcome-message'); //cached object 
```

//你的代码

```
$('div.welcome-handle').click(function() {
        top.$('#welcome-message').toggle(function() {
            if($(CurrDivObject).is(":hidden")) // Show the div
            $(this).animate({"left": "-=749px"}, 500);
        },
        function() {
            if($(CurrDivObject).is(":visible")) // hide the div
             $(this).animate({"left": "+=749px"}, 500);
        });
    }); 
```

# memory-management - 刻录到闪存的 特定扇区

> ID：12638835
> 
> 赞同：2
> 
> 时间：2012-09-28T11:07:51.000
> 
> 标签：memory-management, filesystems, linux-kernel, kernel, bootloader

是否有任何实用程序可以准确指定图像将被刻录到哪个扇区？

我需要根据特定的扇区映射来刻录 SD 卡，

例如，引导加载程序应位于从扇区 57 到扇区 1072（含）的 512K 区域中，
内核应位于从扇区 1073 到扇区 9264（含）的 4M 区域中

等等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T11:16:48.377

```
SECTOR_SIZE=<sector size in bytes>
FLASH_DEV=/dev/sd??
sudo dd if=boot.bin of=$FLASH_DEV bs=$SECTOR_SIZE count=$((1072-57)) seek=57
sudo dd if=kernel   of=$FLASH_DEV bs=$SECTOR_SIZE count=$((9264-1073)) seek=1073 
```

只是`man 1 dd`，而且您必须先在 /dev/sd* 中确定您的闪存驱动器的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T23:09:41.750

您可以使用 dd 实用程序并使用“seek”选项指定扇区偏移量

# c# - 从 Arduino 处理和 C# 串行读取垃圾/垃圾值

> ID：12638836
> 
> 赞同：2
> 
> 时间：2012-09-28T11:07:51.017
> 
> 标签：c#, serial-port, arduino, processing

我四处搜寻，但找不到解决此问题的方法。我正在使用我能想到的最简单的例子来测试它。这是处理代码：

```
void setup() {     
  Serial.begin(9600);
} 

void loop() { 
  for(int i =48;i<51;i++)  {
    Serial.write(i);  //writes 0-2 in ascii and 48-51 in bytes. 
  }
} 
```

如果我在串行监视器上查看输出，它会正确打印“012012012012012012012”等，没有任何问题。我在处理中编写了一个简单的程序来查看数据：

```
import processing.serial.*;
Serial myPort;  

void setup() { 
  String[] ports =Serial.list();
  myPort = new Serial(this, ports[1], 9600);
}

void draw() {
  if (myPort.available() >=10) 
  {   
    byte[] serialIn = new byte[10];
    myPort.readBytes(serialIn);
    for (int i =0;i<serialIn.length;i++)
    {
      println(serialIn[i] +" binary:"+ binary(serialIn[i]));
    }
  }
} 
```

大多数时候它会打印垃圾：

```
-126   binary:10000010
-118   binary:10001010
-110   binary:10010010
-126   binary:10000010
-118   binary:10001010
-110   binary:10010010 
```

有时它会打印正确的值：

```
48   binary:00110000
49   binary:00110001
50   binary:00110010
48   binary:00110000
49   binary:00110001
50   binary:00110010 
```

看起来每个字节都向左移动了 3 位，尽管我无法弄清楚为什么每次运行程序时它的行为都不同。有趣的是，如果我让 arduino 发送 0,1,2 它永远不会打印垃圾。

真的我想用 C# 读取数据。这是基于此示例的 C# 代码的核心：http: [//msmvps.com/blogs/coad/archive/2005/03/23/SerialPort-_2800_RS_2D00_232-Serial-COM-Port_2900_-in-C_2300_-。 NET.aspx](http://msmvps.com/blogs/coad/archive/2005/03/23/SerialPort-_2800_RS_2D00_232-Serial-COM-Port_2900_-in-C_2300_-.NET.aspx)

```
if (serialPort.BytesToRead >0)
{
  byte temp = (byte)serialPort.ReadByte();
  Console.WriteLine(temp +"\t binary: " +byte2Binary(temp));
} 
```

它会打印一些正确的值，但经常会丢失数字并穿插垃圾：

```
130    binary: 10000010
138    binary: 10001010
48     binary: 00110000
49     binary: 00110001
50     binary: 00110010
146    binary: 10010010
49     binary: 00110001
50     binary: 00110010
49     binary: 00110001
50     binary: 00110010
146    binary: 10010010
49     binary: 00110001
50     binary: 00110010
48     binary: 00110000
138    binary: 10001010
146    binary: 10010010 
```

错误数据的二进制值与处理二进制值完全相同。这里的 3 位移位在运行时似乎是随机的，而不是每次运行时都保持一致。我尝试在发送串行命令之间延迟最多 200 毫秒。它有点帮助，但我仍然得到至少 10% 的垃圾数据。我正在尝试运行一个控制循环，所以我能承受的最长延迟是 3ms。我能做些什么来解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T11:11:59.217

> 如果我在串行监视器上查看输出，它会正确打印
> 
> 有时它会打印正确的值：

这表明配置错误，例如尝试 4800 波特。也许检查其他属性（停止位，握手）。

# dojo - Domino 8.5.2 移动控件

> ID：12638839
> 
> 赞同：1
> 
> 时间：2012-09-28T11:08:07.920
> 
> 标签：dojo, xpages, xpages-extlib

我已经安装了带有扩展库的 domino Designer 8.5.2 和 dojo 1.4.3。我已经在 Xpage 的源代码中编写了代码，由以下给出，

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core"
xmlns:xe="http://www.ibm.com/xsp/coreex">
<xe:mApp id="mApp1" selectedPageId="home">
    <xe:mPage id="home" loaded="true" preload="true"
        resetContent="false">
        <xe:djxmHeading id="djxmHeading1" label="Testing">
        </xe:djxmHeading>
    </xe:mPage>
</xe:mApp>
</xp:view> 
```

在浏览器中预览时，它显示错误为，

**“NetworkError: 404 Not Found -” TabBar.js 未能加载 /xsp/.ibmxspres/.extlib/dijit/Mobile.js 并出现错误：错误：无法加载“dojox.mobile.TabBar”；最后一次尝试'../dojox/mobile/TabBar.js'

...x=d._toPixelValue;var asr="DXImageTransform.Microsoft.Alpha";var af=function(n,...**

可能是什么原因，我也在服务器中安装了dojo...请帮助我。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T12:58:48.707

Dojo 1.4.3 不支持移动控件。这些是在 Dojo 1.5.1 中引入的。所以如果你想使用移动控件，你需要使用 OpenNTF 上的移动控件项目。内部是一些基础设施，它们将检测 Dojo 的服务器版本。如果它低于 1.5.1，它将使用数据库中的版本。最新版本可以在这里找到， http: [//mobilecontrols.openntf.org/](http://mobilecontrols.openntf.org/) 最近维护不好。

# java - 在任务栏中的 PopupMenu 中添加垂直分隔符

> ID：12638845
> 
> 赞同：7
> 
> 时间：2012-09-28T11:08:28.910
> 
> 标签：java, swing, jmenuitem, jpopup, jseparator

如何在任务栏中的应用程序的弹出菜单中添加垂直分隔符？

```
 tray = SystemTray.getSystemTray();             
   openMenuItem = new MenuItem("Open P");
   stopKLMenuItem = new MenuItem("Stop");
   exitMenuItem = new MenuItem("exit");
   menu.add(exitMenuItem);
   menu.add(stopKLMenuItem);
   menu.addSeparator(); // adds a horizontal separator
   menu.add(openMenuItem);
   trayIcon = new TrayIcon(image,"P",menu); 
```

该语句`menu.addSeparator()`添加了一个水平分隔符。我还想要一个垂直分隔符，例如：

![在此处输入图像描述](../Images/e39d9629b78bb34c01341e3e5bb99e42.png)

我该怎么做呢 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T12:55:31.310

一个简单的技巧是向 JMenuItem 添加一个空图标。外观然后添加您正在寻找的垂直分隔符（当然，这仅适用于 Windows L&F，其他 L&F 可能会以不同方式呈现）：

![菜单示例结果](../Images/bb4f4f3ad200d40a6090b71f90eadcd1.png)

以及产生它的代码：

```
import java.awt.AWTException;
import java.awt.SystemTray;
import java.awt.TrayIcon;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.image.BufferedImage;

import javax.swing.ImageIcon;
import javax.swing.JMenuItem;
import javax.swing.JPopupMenu;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TestTrayIcon {

    protected void initUI() {

        TrayIcon trayIcon = new TrayIcon(new ImageIcon(
                "http://3.bp.blogspot.com/-nh7fv5FqpU4/TeUbTvAdSkI/AAAAAAAAAUo/Ig53KJGvzlk/s45/avatar.png").getImage());

        final JPopupMenu popupMenu = new JPopupMenu();
        JMenuItem checkBox1 = new JMenuItem("Last checked...", new ImageIcon(new BufferedImage(16, 16, BufferedImage.TYPE_INT_ARGB)));
        JMenuItem checkBox2 = new JMenuItem("Open...");

        popupMenu.add(checkBox1);
        popupMenu.addSeparator();
        popupMenu.add(checkBox2);

        trayIcon.addMouseListener(new MouseAdapter() {
            @Override
            public void mouseReleased(MouseEvent e) {
                if (e.isPopupTrigger()) {
                    popupMenu.setLocation(e.getX(), e.getY());
                    popupMenu.setInvoker(popupMenu);
                    popupMenu.setVisible(true);
                }
            }
        });
        try {
            SystemTray.getSystemTray().add(trayIcon);
        } catch (AWTException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (InstantiationException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IllegalAccessException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (UnsupportedLookAndFeelException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                new TestTrayIcon().initUI();
            }
        });
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T11:41:10.103

想法

1.  添加`Borders`（`MatteBorders`例如）到`JMenuItem(s)`

2.  添加`JPanel`到`JPopup`

    *   必须设置`BorderLayout`并`JPopup`放入`JPanel`( `CENTER area`and/or with `Borders`too)

    *   设置`BorderLayout`为`JPanel`

    *   放在`JSeparator`或区域（取决于或方向`EAST`）`WEST`

    *   `JPanel`放另一个`JButtons`模拟`JMenuItem`（第一眼没有差异）输出到`Swing Action`or`ActionListener`

3.  与`JWindow`（我默认使用`JPopup`或`ToolTip`）相同的东西而不是`JPopup`

4.  也许我错了，但`JPopup`看起来像[变色龙](http://en.wikipedia.org/wiki/Chameleon)

    *   一次`JPanel`，

    *   另一个作为`JWindow`，

    *   抱歉没有最深入的了解，感兴趣

# android - 在 Android 库中调试本机代码

> ID：12638849
> 
> 赞同：20
> 
> 时间：2012-09-28T11:08:44.090
> 
> 标签：android, debugging, android-ndk, android-library

我的工作区布局是：

```
.
├── ApplicationLibrary
│   ├── AndroidManifest.xml
│   ├── ...
│   ├── jni
│   ├── libs
│   ├── ...
│   └── src
└── Application
    ├── AndroidManifest.xml
    ├── ant.properties
    └── ... 
```

如何在 Eclipse 中调试本机库？有没有人对此有所暗示？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-23T15:40:41.237

通过在调试配置对话框中将未剥离的共享库/库的目录添加到调试器中，我能够在 Eclipse 上的 android 库中设置断点并调试本机代码：

1.  转到“运行”菜单->“调试配置”
2.  在左侧窗格的“Android Native Application”下，选择您的应用程序
3.  在“调试器”选项卡下，单击“共享库”部分中的“添加...”。
4.  浏览到您的 android 库项目目录并添加其子目录 obj/local/armeabi。
5.  应用和调试。

这似乎对我有用。希望你也有同样的运气...

和平

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T12:53:35.357

有可能的：

1.  更新您的构建配置以包含“NDK_DEBUG = 1”。右键单击项目 -> 属性 -> C/C++ 构建：

2.  在 C 代码中设置断点。

3.  右键单击您的项目，选择 Debug As -> Android Native Application

更多详情如下：

[http://tools.android.com/recent/usingthendkplugin](http://tools.android.com/recent/usingthendkplugin)

# performance - OpenERP 服务器中的活动用户会话数

> ID：12638851
> 
> 赞同：1
> 
> 时间：2012-09-28T11:08:46.880
> 
> 标签：performance, monitoring, openerp

如何在我的 OpenERP 服务器中找到“活动会话”的数量？

我知道“活动会话”在这里并不是一个确切的概念，但总的来说，我想知道的是服务器所承受的使用压力水平，并将其与专用于过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T22:32:51.223

我向服务器添加了少量日志记录代码，以跟踪通过的每个请求的用户 ID、模型和其他一些参数。您需要注意不要记录任何敏感信息，例如密码，并且您应该注意您的跟踪不会给服务器增加大量负载。[您可以在启动](http://bazaar.launchpad.net/~zaber/openobject-server/main/view/2011/bin/netsvc.py#L473)板上看到我们添加到 OpenERP 5 的跟踪代码。

如果您不需要相同级别的详细信息，则使用网络嗅探器计算与 OpenERP 端口的连接数可能会减少负载，如[本问题](https://askubuntu.com/a/11725/3986)所述。

# cassandra - 如果在 Cassandra 中写入记录时磁盘已满，会发生什么？

> ID：12638856
> 
> 赞同：4
> 
> 时间：2012-09-28T11:08:58.763
> 
> 标签：cassandra

在 cassandra 中存储记录时（存储的一半记录），如果我的磁盘已满且没有空间，会发生什么？如果将抛出任何异常，那么该异常是什么？

第二种情况是，如果我在磁盘已满时创建新的密钥空间怎么办？如果将抛出任何异常，那么该异常是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T22:20:16.860

这取决于您要写入的键空间是使用durable_writes=true 还是false 创建的（默认为true）。

如果是前者并且您的 commitlog 磁盘已满，则在写入 commitlog 时会抛出 IOException（但不会作为响应的一部分返回），并且请求将超时。

如果是后者，并且您的数据盘已满，您将获得成功响应。但是无法刷新到磁盘的 memtable 将继续增长，直到整个节点用完 RAM 并终止。

在第二种情况下，尝试写入提交日志或尝试将新模式刷新到磁盘时将引发异常，具体取决于哪个驱动器已满。在这两种情况下，请求都会超时。

即将推出的 Cassandra 1.2（目前处于测试阶段）改进了对此类情况的处理 - 请阅读[Cassandra 1.2 中的处理磁盘故障](http://www.datastax.com/dev/blog/handling-disk-failures-in-cassandra-1-2)了解详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T11:28:18.483

如果磁盘已满意味着它会停止执行。我尝试了很多次，它一直停止执行。所以你的客户端 api 会抛出连接被拒绝的异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T20:16:22.613

我想你会得到一个超时异常。我只是在尝试将数据加载到磁盘空间不足的主机上时遇到了这个问题。

# c++ - 检查输入是否为有效整数

> ID：12638864
> 
> 赞同：0
> 
> 时间：2012-09-28T11:09:37.137
> 
> 标签：c++

嗨，谁能帮帮我。我需要检查我的输入是否只包含整数。我从查找中猜测我使用了该`isDigit`功能，但我不确定如何使用它来检查整数。

我正在使用 C++ 与 MSI 交互，所以我得到的整数如下：

```
hr = WcaGetProperty(L"LOCKTYPE",&szLockType);
ExitOnFailure(hr, "failed to get the Lock Type"); 
```

我想我必须更改`szLockType`为一个字符，然后使用它`isdigit`来扫描每个字符，但我不确定如何实现这一点。任何帮助将不胜感激。Ps 我是初学者，所以如果这是一个非常微不足道的问题，请原谅.. :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T11:15:05.667

使用[std::stoi()](http://en.cppreference.com/w/cpp/string/basic_string/stol)。如果字符串不是整数值，则会出现异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T11:16:28.810

szLockType 的类型是什么？

它是一个以 null 结尾的字符字符串吗？

然后您可以使用数组语法来获取单个字符。

```
for(int i = 0; i < std::strlen(szLockType); i++) {
    if(!std::isDigit(szLockType[i])) {
         // it contains a non-digit - do what you have to do and then...
         break; // ...to exit the for-loop
    }
} 
```

或者它是一个std :: string？然后语法略有不同：

```
for(int i = 0; i < szLockType.length(); i++) {
    if(!std::isDigit(szLockType.at(i)) {
         // it contains a non-digit - do what you have to do and then...
         break; // ...to exit the for-loop
    }
} 
```

# javascript - 阻止对某些函数的对象原型的函数查找？

> ID：12638865
> 
> 赞同：0
> 
> 时间：2012-09-28T11:09:50.750
> 
> 标签：javascript, function, inheritance, backbone.js, prototype

我正在尝试构建一个自定义集合（我们称之为 GenericList），它可以容纳 n 个集合并表现得就像它只是一个集合一样。

为了继承普通 Backbone 集合的所有功能，我将 GenericList 的原型设置为`Backbone.Collection`. 然后我覆盖重要​​的，如, `fetch()`,`reset()`等等。现在还有一些我想从 GenericList 中剔除的功能（基本上是添加和创建）。`on()``off()`

所以为了删除这些函数，我首先得到我的实例原型，`Backbone.Collection`然后是 Backbone.Collections 原型，它只是一个`Object`包含所有集合函数的原型。当我`delete`从那里调用函数时，我的应用程序中的所有 Backbone.Collection 实例都会丢失这些函数，因为它们都继承自那个对象。

所以我的问题是，除了隐藏对象上的函数之外，是否还有其他技术`delete`，即使该函数是在对象原型链中的任何位置定义的？

编辑：链接[一个小提琴......](http://jsfiddle.net/xmDsH/2/)和[github上的东西](https://github.com/sra448/nested-models-in-backbone/blob/master/model.generics.js)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T11:21:23.607

好吧，这正是原型在 Javascript 中的工作方式。当您在 Javascript 中引用从原型继承的属性时，实际发生的是 Javascript 首先在对象本身上查找该属性，如果没有找到，它会沿着原型链向上移动以查找该属性。这发生在属性查找时，它发生在实际原型对象上，而不是抽象原型定义上。因此，如果您从用作原型的对象中删除某些内容，那么紧接着您将无法再引用该属性，即使在从该对象继承的对象中也是如此。

换句话说，Javascript 中没有“类”和“实例”这样的东西。只有实例。

要正确执行此操作，您需要在从 Backbone.Collection 创建函数*后*从 GenericList 中删除该函数。否则，您实际上是在修改 Backbone.Collection。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:22:32.930

我已经完成了我想要的，不是从继承`new Backbone.Collection`而是从`_.clone(Backbone.Collection.prototype)`. 这样我就有了自己的物理对象作为原型，并且能够删除我想要的任何内容，而不会影响其他集合。

如果您对代码感兴趣，我在[github](https://github.com/sra448/nested-models-in-backbone/blob/master/model.generics.js)上更新了它（第 114 行）。

# c# - 是否可以在 C#/XAML Metro 应用程序中将自定义属性添加到 StorageFile 的 StorageItemContentProperties

> ID：12638866
> 
> 赞同：1
> 
> 时间：2012-09-28T11:09:52.913
> 
> 标签：c#, file, microsoft-metro, windows-runtime, custom-attributes

我知道我可以通过`RetrievePropertiesAsync()`方法检索文件的预定义属性。但是现在我想再添加一个我自己的自定义属性，比如描述，有可能吗？我试过这段代码，但得到异常

```
protected async override void OnNavigatedTo(NavigationEventArgs e)
{
    StorageFile file = await KnownFolders.MusicLibrary.GetFileAsync("video.mp4");
    List<string> propertiesName = new List<string>();
    propertiesName.Add("CustomProperty");
    string a = "Come and knock on our door. We've been waiting for you. Where the kisses are hers and hers and his, three's company, too! Come and dance on our floor. Take a step that is new. We've a lovable space that needs your face, three's company, too! You'll see that life is a ball again and laughter is callin' for you. Down at our rendezvous, three's company, too! The year is 1987 and NASA launches the last of America's deep space probes. In a freak mishap, Ranger 3 and its pilot Captain William 'Buck' Rogers are blown out of their trajectory into an orbit which freezes his life support system and returns Buck Rogers to Earth five hundred years later.";
    IDictionary<string, object> extraProperties = await file.Properties.RetrievePropertiesAsync(propertiesName);
    extraProperties.Add((new KeyValuePair<string, object>("CustomProperty", a)));
    await file.Properties.SavePropertiesAsync(extraProperties);
}

An exception of type 'System.ArgumentException' occurred in App2.exe but was not handled in user code
WinRT information: The specified property name (CustomProperty) is invalid. The property may not be registered on the system.
Additional information: The parameter is incorrect. 
```

**PS：我想要这样的[东西](http://blog.rodhowarth.com/2008/06/how-to-set-custom-attributes-file.html)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T05:10:46.157

这些错误似乎表明需要在要检索的属性系统中定义该属性。快速 MSDN 搜索显示它可以使用[PSRegisterPropertySchema 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762087%28v=vs.85%29.aspx)完成，但它仅适用于桌面应用程序。 [本主题](http://msdn.microsoft.com/en-us/library/windows/desktop/cc144135%28v=vs.85%29.aspx)更详细地描述了注册自定义属性。由于 Windows 8 中已经有很多内置属性和 WinRT，因为它专注于基础知识，因此不太可能从 Windows 应用商店应用程序中实现。这意味着您可以使用桌面应用程序注册该属性，但如果要通过认证，您的商店应用程序不能依赖它的存在。[StorageItemContentProperties](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.fileproperties.storageitemcontentproperties.aspx)的文档提到使用 QueryOptions 来查询由其他应用程序定义的属性，如果您想搜索由其他一些应用程序定义的属性，您可以尝试使用它。

> **注意**使用由另一个应用程序（如 Microsoft Word）定义的属性处理程序获取或设置的属性可能无法访问。相反，您可以尝试使用由系统索引支持的文件查询来获取这些属性。有关详细信息，请参阅 [QueryOptions](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.search.queryoptions.aspx)。

# sql-server-2008 - 在指定数量的组后插入分页符

> ID：12638867
> 
> 赞同：2
> 
> 时间：2012-09-28T11:09:57.803
> 
> 标签：sql-server-2008, c#-3.0

我正在使用 rdlc 文件创建报告。我想在指定数量的组后分页。ie.break 表格行分成多列。我们使用矩阵。

请让我知道，如何进行。提前致谢 。

# php - 我对一些 HTML 和 PHP 代码有一些错误

> ID：12638877
> 
> 赞同：-2
> 
> 时间：2012-09-28T11:10:26.000
> 
> 标签：php, html, arrays, tags

> PHP Parse 错误：语法错误，第 20 行 /home/xxx/public_html/xxxx/index.php 中的意外 ','

代码：

```
<?php
$title = "Home";
$page = "index";
$return = TRUE;
require( "./configuration.php" );
include( "./include.php" );
$returned = @( "harper");
if ( ( $returned ) != @( "harper" ) )
{
exit( "Error. Contact Us." );
}
$rows = ( "SELECT * FROM `client` WHERE `clientid` = '".$_SESSION['clientid']."' LIMIT  1" );
$result1 = ( "SELECT `serverid`, `ipid`, `name`, `game`, `status`, `online`, `slots`,  `type`, `port` FROM `server` WHERE `clientid` = '".$_SESSION['clientid']."' ORDER BY  `serverid`" );
$servers = array( );
while ( $rows1 = ( $result1 ) )
{
if ( !empty( $rows1['ipid'] ) )
{
    $rows2 = ( "SELECT `ip` FROM `ip` WHERE `ipid` = '".$rows1['ipid']."' LIMIT 1" );
    $rows1 = ( $rows1, $rows2 );
}
( $servers, $rows1 );
}

1 part 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T11:12:26.953

PHP 不支持在括号内合并两个表达式：

```
$rows1 = ( $rows1, $rows2 ) 
```

您需要添加函数调用、数组关键字或类似内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T11:12:44.677

您试图以错误的方式创建数组：

```
$rows1 = ( $rows1, $rows2 ); 
```

它应该是

```
$rows1 = new Array( $rows1, $rows2 ); 
```

或者

```
$rows1 = $rows1.$rows2; 
```

代码中的最后一行也是如此：

```
new Array( $servers, $rows1 ); 
```

无论如何，你想用它做什么？它不会重定向到任何东西，所以它只是丢失了。您应该将其保存在变量中

如果要存储`$rows1`在 中`$servers`，请执行以下操作：

```
$servers[] = $rows1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T11:15:44.853

您必须`.`像此编辑一样用于连接使用

```
$rows1 = $rows1.$rows2; 
```

或`array`用于将它们存储在这样的数组中

```
$rows1 = array($rows1,$rows2); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T11:16:58.900

你真正想做的代码 $rows1 = ( $rows1, $rows2 ); ?

您的代码看起来像一个函数调用，它不是 php 语句。

例如：$rows1 = array($rows1, $rows2);

# android - Android 动态壁纸示例被强制关闭，无法实例化服务

> ID：12638879
> 
> 赞同：3
> 
> 时间：2012-09-28T11:10:32.653
> 
> 标签：android, opengl-es, live-wallpaper

我试图为 android live wall paper 运行一些教程示例，但总是出现此错误

> 09-28 16:13:30.729: E/AndroidRuntime(408): java.lang.RuntimeException: 无法实例化服务 net.markguerra.android.glwallpaperexample.MyWallpaperService: java.lang.ClassNotFoundException: net.markguerra.android.glwallpaperexample。加载程序 dalvik.system.PathClassLoader[/data/app/net.markguerra.android.glwallpaperexample-1.apk] 中的 MyWallpaperService

这是我的清单文件

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="net.markguerra.android.glwallpaperexample"
      android:versionCode="1"
      android:versionName="1.0">
    <application android:icon="@drawable/icon" android:label="@string/app_name">
        <service android:label="@string/service_label" android:name=".MyWallpaperService"
            android:permission="android.permission.BIND_WALLPAPER">
            <intent-filter>
                <action android:name="android.service.wallpaper.WallpaperService" />
            </intent-filter>
            <meta-data android:name="android.service.wallpaper"
                android:resource="@xml/myglwallpaper" />
        </service>
    </application>
    <uses-sdk android:minSdkVersion="7" />

</manifest> 
```

我创建的壁纸服务

```
package net.markguerra.android.glwallpaperexample;

import net.rbgrn.android.glwallpaperservice.*;

// Original code provided by Robert Green
// http://www.rbgrn.net/content/354-glsurfaceview-adapted-3d-live-wallpapers

public class MyWallpaperService extends GLWallpaperService {
    public MyWallpaperService() {
        super();
    }

    public Engine onCreateEngine() {
        MyEngine engine = new MyEngine();
        return engine;
    }

    class MyEngine extends GLEngine {
        MyRenderer renderer;
        public MyEngine() {
            super();
            // handle prefs, other initialization
            renderer = new MyRenderer();
            setRenderer(renderer);
            setRenderMode(RENDERMODE_CONTINUOUSLY);
        }

        public void onDestroy() {
            super.onDestroy();
            if (renderer != null) {
                renderer.release();
            }
            renderer = null;
        }
    }
} 
```

这是我的项目结构

![在此处输入图像描述](../Images/413372f05c2ff0a1e2f7e26bacbe44a9.png)

我无法弄清楚它出了什么问题，是什么错误？任何建议都会对我有很大帮助

在堆栈上发现了一些相关的问题，但与动态壁纸无关

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T11:23:49.560

您应该包含`GLWallpaperService.jar`在`libs`文件夹中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T21:47:21.883

它必须是 libs 而不是 lib 还是我弄错了？使用 libs，您应该在 res 或 bin 之类的文件夹上看到一个小 a...

# c# - 尝试将字节数组插入数据库时 从 varchar 到 varbinary 的隐式转换错误

> ID：12638883
> 
> 赞同：4
> 
> 时间：2012-09-28T11:10:46.933
> 
> 标签：c#, sql-server, servicestack, ormlite-servicestack

我想将 File 保存到我的数据库中，所以我将其解析为 byte[]：

```
byte[] f = File.ReadAllBytes(@"E:\Path\To\My\File\MyFile.foo"); 
```

创建表的类：

```
public class Files
{
    [AutoIncrement]
    public int Id { get; set; }

    public byte[] File { get; set; }
} 
```

接下来，在我的服务中，我想将我的文件插入到数据库中：

```
db.Insert(new Files() { File = f }); // db is object to database 
```

在此之后我在现场收到错误：

```
Implicit conversion from data type varchar(max) to varbinary(max) is not allowed. Use the CONVERT function to run this query. 
```

我不知道如何改变它。我试图通过 MemoryStream、FileStream 保存文件，将每个字节的字节保存到新的字节数组中，但我总是收到此错误。

有谁知道，如何解决？

PS我不想将文件保存到数据库中，而不仅仅是文件的URL，所以我需要保存字节[]。PS2 将其他类型插入数据库工作

感谢您的任何建议:)

解决了：

我已经解决了：

如果要将 blob 放入数据库，请使用：

```
IDbCommand cmd = db.CreateInsertStatement(new Files() { File = f });
cmd.ExecuteNonQuery(); 
```

一切都会完美无缺！

当然，如果有人知道如何使用“插入”方法将 Blob 放入数据库 - 就写吧。我还是不知道正确答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T21:09:29.007

我遇到了同样的问题。您的解决方案有效，但它更像是一种解决方法。我向 ServiceStack.OrmLite 提交了一个[拉取请求](https://github.com/ServiceStack/ServiceStack.OrmLite/pull/144)来解决 SQL Server 的问题。

# sql-server - tsql - 使用临时表的 While 循环问题

> ID：12638886
> 
> 赞同：0
> 
> 时间：2012-09-28T11:11:00.323
> 
> 标签：sql-server, tsql, while-loop

我们的 DBA 已将一个函数更改为一个过程，因此我正在修改我的一些过程以适应这一点。在我有一个while循环的过程中，我遇到了这个问题。

我从新过程 (#DGContol) 填充我的临时表，然后有以下 while 循环：

```
SELECT @MinRcd = MIN(RcdNum) FROM #PortfolioDisclosure 
SELECT @MaxRcd = MAX(RcdNum) FROM #PortfolioDisclosure 

SET @RcdNum = @MinRcd
WHILE @RcdNum <= @MaxRcd

BEGIN

    -- Temporarily assign values to variables
    SELECT
            @PortfolioGroup = PortfolioCode
        ,   @EndDateTime    = MaxPositionDate_DetailedDisclosure

    FROM  #PortfolioDisclosure
    WHERE RcdNum = @RcdNum

    INSERT INTO #PositionsTable
        SELECT

                fi.ID_ISIN                          AS [Fund_ISIN]                  
            ,   RTRIM(a.acct_id)                    AS [Internal_Portfolio_Code]    
            ,   a.acct_desc                         AS [Portfolio/Fund_Name]        
            ,   CONVERT(CHAR(11),p.as_of_tms,103)   AS [Portfolio_Date]         
            ,   a.alt_curr_cde                      AS [Portfolio_Base_Ccy]     
            ,   i.iss_desc                          AS [Security_Description]       
            ,   RTRIM(i.pref_iss_id)                AS [Security_ID SEDOL/Internal]
            ,   RTRIM(ia.iss_id)                    AS [Security_ID ISIN]           
            ,   i.denom_curr_cde                    AS [Denomination_Ccy]           

            ,   SUM(p.valval_alt_cmb_amt) OVER (PARTITION BY RTRIM(a.acct_id))      
                                                    AS [Total_Fund_Value]

            ,   p.orig_quantity                     AS [Shares/Par_Value]           
            ,   p.valval_alt_cmb_amt                AS [Market_Value]               
            ,   p.fld5_rte                          AS [Pct_of_NAV] 

            ,   SUM(CASE WHEN i.issue_cls1_cde = '010' THEN p.valval_alt_cmb_amt ELSE 0 END) OVER (PARTITION BY a.acct_id)      
                                                    AS [Cash/Cash_Equivalents]

            ,   i.inc_proj_cmb_rte                  AS [Coupon_Rate]                
            ,   CONVERT(CHAR(11),i.mat_exp_dte,103) AS [Maturity_Date]              

        FROM dw_position_dg AS p

            INNER JOIN #DGControl AS dgc -- [M]onthly, [M]ost recent position
                ON dgc.DataGrpCtlNum = p.data_grp_ctl_num

            INNER JOIN dw_ivw_acct AS a WITH (NOLOCK)
                ON a.acct_id = p.acct_id

            INNER JOIN dw_issue_dg AS i WITH (NOLOCK)
                ON i.instr_id = p.instr_id

            LEFT OUTER JOIN dw_issue_alt_id AS ia WITH (NOLOCK)
                ON ia.instr_id = i.instr_id
                AND ia.id_ctxt_typ = 'ISIN'

            INNER JOIN #PortfolioDisclosure AS fi
                ON fi.PortfolioCode = p.acct_id
                and fi.MaxPositionDate_DetailedDisclosure >= p.as_of_tms

        WHERE RTRIM(a.acct_id) NOT IN ( SELECT xref.internal_value FROM  dbo.DP_CrossReference as xref
                                        WHERE xref.Codeset_type_id = 10401 
                                        AND xref.Originator_id = 'DataVendorPortfolioExclusion')

            -- Clear down variable values
            SET @PortfolioGroup = NULL
            --SET @StartDateTime = NULL
            SET @EndDateTime = NULL

            -- Move to next record
            SET @RcdNum = @RcdNum + 1

END -- END WHILE LOOP 
```

但是，这会返回大量重复记录。如果我用原始函数替换临时表#DGControl，那么我会得到正确数量的记录。

我真的不知道问题是什么，也不知道如何重新编码这个 while 循环，以便使用表#DGControl 我得到正确数量的记录。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T13:19:57.200

您是否将 SELECT * FROM OldFunction(args..) 的输出与 EXEC NewStoredProcedure args... 的输出进行了比较？如果是这样，当 DBA 将函数重构为 proc 时，返回的数据是否看起来相同或重复出现。

如果是这样，您可能需要先从 sp 中删除重复输出，然后通过剩余的代码运行它。简而言之，如果您对两者使用相同的参数，但它们给您的结果不同，那么您需要返回 DBA。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T16:25:48.647

您没有在此代码中使用任何一个局部变量（@PortfolioGroup、@EndDateTime）。它只是插入相同的记录集 N 次。另外，我认为您可以将其编写为单个选择查询，而无需使用临时表或 while 循环，这样可以减少混乱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T13:16:59.410

感谢您的反馈意见。我解决了这个问题。我的代码现在如下所示：

```
BEGIN

SELECT @MinRcd = MIN(RcdNum) FROM #PortfolioDisclosure 
SELECT @MaxRcd = MAX(RcdNum) FROM #PortfolioDisclosure 

SET @RcdNum = @MinRcd
WHILE @RcdNum <= @MaxRcd

BEGIN

    -- Temporarily assign values to variables
    SELECT
            @PortfolioGroup = PortfolioCode
        ,   @EndDateTime    = MaxPositionDate_DetailedDisclosure

    FROM  #PortfolioDisclosure
    WHERE RcdNum = @RcdNum

    -- Insert DGControl record into table based on the MaxPositionDate_DetailedDisclosure from Portfolio Disclosure function
    INSERT INTO #DGControl
        EXEC InfoPortal..usp_Generic_DGControl '', '', @PortfolioGroup, '1', @EndDateTime, @EndDateTime, @PeriodType, 'M', 'POSITION'    -- [M]onthly, [M]ost recent position

    -- Insert into #PositionsTable
    INSERT INTO #PositionsTable
        SELECT
                fi.ID_ISIN                          AS [Fund_ISIN]                  
            ,   RTRIM(a.acct_id)                    AS [Internal_Portfolio_Code]    
            ,   a.acct_desc                         AS [Portfolio/Fund_Name]        
            ,   CONVERT(CHAR(11),p.as_of_tms,103)   AS [Portfolio_Date]         
            ,   a.alt_curr_cde                      AS [Portfolio_Base_Ccy]     
            ,   i.iss_desc                          AS [Security_Description]       
            ,   RTRIM(i.pref_iss_id)                AS [Security_ID SEDOL/Internal]
            ,   RTRIM(ia.iss_id)                    AS [Security_ID ISIN]           
            ,   i.denom_curr_cde                    AS [Denomination_Ccy]           

            ,   SUM(p.valval_alt_cmb_amt) OVER (PARTITION BY RTRIM(a.acct_id))      
                                                    AS [Total_Fund_Value]

            ,   p.orig_quantity                     AS [Shares/Par_Value]           
            ,   p.valval_alt_cmb_amt                AS [Market_Value]               
            ,   p.fld5_rte                          AS [Pct_of_NAV] 

            ,   SUM(CASE WHEN i.issue_cls1_cde = '010' THEN p.valval_alt_cmb_amt ELSE 0 END) OVER (PARTITION BY a.acct_id)      
                                                    AS [Cash/Cash_Equivalents]

            ,   i.inc_proj_cmb_rte                  AS [Coupon_Rate]                
            ,   CONVERT(CHAR(11),i.mat_exp_dte,103) AS [Maturity_Date]              

        FROM dw_position_dg AS p

            INNER JOIN #DGControl AS dgc
                ON dgc.DataGrpCtlNum = p.data_grp_ctl_num

            INNER JOIN dw_ivw_acct AS a WITH (NOLOCK)
                ON a.acct_id = p.acct_id

            INNER JOIN dw_issue_dg AS i WITH (NOLOCK)
                ON i.instr_id = p.instr_id

            LEFT OUTER JOIN dw_issue_alt_id AS ia WITH (NOLOCK)
                ON ia.instr_id = i.instr_id
                AND ia.id_ctxt_typ = 'ISIN'

            INNER JOIN #PortfolioDisclosure AS fi
                ON fi.PortfolioCode = p.acct_id

            -- Clear down variable values
            SET @PortfolioGroup = NULL
            --SET @StartDateTime = NULL
            SET @EndDateTime = NULL
            -- Clear down #DGControl table to allow new record to be inserted
            DELETE FROM #DGControl
            -- Move to next record
            SET @RcdNum = @RcdNum + 1

END -- END WHILE LOOP 
```

在开始时添加存储过程 usp_Generic_DGControl 的执行，然后在每个循环停止重复记录后将其清除。

# c# - 无法将 C++ 中的 TextBox_TextChanged() 转换为 C#

> ID：12638894
> 
> 赞同：1
> 
> 时间：2012-09-28T11:11:27.127
> 
> 标签：c#, c++, wpf, textbox

几个月来，我一直在使用 Juce Library 研究 C++。我在我的项目中编写了一个代码，其中文本框的格式被修改为仅具有很少功能的十六进制值：

**演示：**

**12 ab 32 a5 64**

现在，如果我的光标在末尾并且我继续按退格键，它将删除值，因为它发生在一般文本框中。

现在如果我的光标在 a5 的开头，并且我按下“删除键”，值应该变成这样：

**12 ab 32 56 4**

如果我的光标位于 a5 的末尾并且我按下“删除键”，则不会发生任何事情。在输入值时，空格键不应该让间距 bw 两个值。应该只允许输入 af 和 0-9。

**此处的 C++ 代码：**

```
void CMSP430CommPanel::textEditorTextChanged (TextEditor& editor)
{

if(&editor == m_texti2cWrite)
{       
int count = 0;
int location;

String text1 = m_texti2cWrite->getText();
String text = m_texti2cWrite->getText().removeCharacters(" ");
String hexString = String::empty;   
int countCaret = m_texti2cWrite->getCaretPosition();

    for(int i=0; i < text.length(); i++)
    {               
        hexString = hexString + String (&text[i], 1);
        if((i+1) % 2 == 0)
        {
            if(i != text.length()-1)
            {
                hexString = hexString + T(" "); 
                count ++;               
            }
        }
        count ++;
    }           

    m_texti2cWrite->setText(hexString,false);

    if(text1.length() == m_texti2cWrite->getCaretPosition())
    {
        m_texti2cWrite->setCaretPosition(count);
    }
    else
    {
        m_texti2cWrite->setCaretPosition(countCaret);
    }
}
} 
```

我希望同样的事情在我的 WPF 应用程序中工作。让我们说 C# 中相同代码的一般实现。

请帮忙！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:35:48.277

试试这个（TextBox 的 TextChanged-Event）：

```
 private void TextBox_TextChanged(object sender, TextChangedEventArgs e)
    {
        TextBox m_texti2cWrite = (TextBox)sender;
        int count = 0;

        string text1 = m_texti2cWrite.Text;
        string text = m_texti2cWrite.Text.Replace(" ", string.Empty);
        string hexString = string.Empty;
        int countCaret = e.Changes.ToList()[0].Offset;

        for (int i = 0; i < text.Length; i++)
        {
            hexString += text[i];
            if ((i + 1) % 2 == 0)
            {
                if (i != text.Length - 1)
                {
                    hexString = hexString + " ";
                    count++;
                }
            }
            count++;
        }

        m_texti2cWrite.Text = hexString;
        if (text1.Length == countCaret)
        {
            m_texti2cWrite.Select(count, 0);
        }
        else
        {
            if (e.Changes.ToList()[0].RemovedLength == 0)
            {
                m_texti2cWrite.Select(countCaret + 1, 0);
                if (string.IsNullOrWhiteSpace(hexString.Substring(countCaret, 1)))
                    m_texti2cWrite.Select(countCaret + 2, 0);
            }
            else
            {
                m_texti2cWrite.Select(countCaret, 0);
                if (string.IsNullOrWhiteSpace(hexString.Substring(countCaret, 1)))
                    m_texti2cWrite.Select(countCaret + 1, 0);
            }
        }
    }
} 
```

编辑（仅接受 Digits、ControlKeys 或 af）：

1.  添加这个方法：

    ```
    private Boolean IsTextAllowed(String text)
    {
        string acceptedChars = "ABCDEFabcdef";
        foreach (Char c in text.ToCharArray())
        {
            if (Char.IsDigit(c) || Char.IsControl(c) || acceptedChars.Contains(c)) continue;
            else return false;
        }
        return true;
    } 
    ```

2.  将 TextBox_PreviewTextInput-Event 添加到您的 TextBox

    ```
    private void TextBox_PreviewTextInput(object sender, TextCompositionEventArgs e)
    {
        e.Handled = !IsTextAllowed(e.Text);
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T11:21:26.990

```
public class CMSP430CommPanel
{
    //C++ TO C# CONVERTER WARNING: The original C++ declaration of the following method implementation was not found:
    public void textEditorTextChanged(TextEditor editor)
    {

if (editor == m_texti2cWrite)
{
int count = 0;
int location;

string text1 = m_texti2cWrite.getText();
string text = m_texti2cWrite.getText().removeCharacters(" ");
string hexString = string.empty;
int countCaret = m_texti2cWrite.getCaretPosition();

    for (int i = 0; i < text.Length; i++)
    {
        hexString = hexString + (string)(text[i], 1);
        if ((i + 1) % 2 == 0)
        {
            if (i != text.Length - 1)
            {
                hexString = hexString + T(" ");
                count++;
            }
        }
        count++;
    }

    m_texti2cWrite.setText(hexString,false);

    if (text1.Length == m_texti2cWrite.getCaretPosition())
    {
        m_texti2cWrite.setCaretPosition(count);
    }
    else
    {
        m_texti2cWrite.setCaretPosition(countCaret);
    }
}
}
} 
```

# javascript - d3.svg.line() 问题

> ID：12638895
> 
> 赞同：2
> 
> 时间：2012-09-28T11:11:33.257
> 
> 标签：javascript, svg, d3.js

**JSFiddle 链接：http:** [//jsfiddle.net/zDgsp/](http://jsfiddle.net/zDgsp/)

我对 D3.js 非常陌生，我试图让折线图正常工作（实际上，一个有多条线）。我已经阅读了[d3 API 参考](https://github.com/mbostock/d3/wiki/SVG-Shapes#wiki-line)和一些教程几次，但仍然无法弄清楚我的问题是什么。通常我在适应新事物方面真的很快。

画圆圈效果很好，但线条路径似乎是个问题。DOM 检查器向我展示了我的 SVG 中的许多路径元素，每个元素的大小为`0px x 1px`.

当我在and处理程序`console.log()`中执行返回值时，我发现这些s 甚至没有被调用。[这让我很困惑，因为我正在做与API](https://github.com/mbostock/d3/wiki/SVG-Shapes#wiki-line)中所述完全相同的事情，除了用和替换因为我使用不同的数据。`line.x()``line.y()``console.log()``x(d.x)``x(i)``y(d.y)``y(d)`

我还尝试为封闭路径添加“Z”字符串，但这一切都没有真正帮助。

如何显示这些行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T13:05:56.943

最后一行：`.attr('d', line(dataset))`

因为行生成器不知道要使用哪些数据。

# android - 当活动崩溃时，进程保持活动状态，我无法杀死它

> ID：12638897
> 
> 赞同：2
> 
> 时间：2012-09-28T11:11:45.427
> 
> 标签：android, multithreading, crash, kill-process

我正在开发一个有很多线程的应用程序，到目前为止它经常崩溃，每当我从 eclipse 加载新版本时，它似乎创建了一个新进程。

我似乎找不到杀死旧进程的方法，它们不会出现在正在运行的应用程序中。

我可以看到在进程列表（“ps”命令）中有多个与我的应用程序相关的进程。

有没有办法确保应用程序进程实际上在崩溃时死掉？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:43:32.490

你试过这个`android.os.Process.killProcess(android.os.Process.myPid());`它可以杀死你的进程

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-28T11:18:07.267

您可以通过以下方式终止应用程序的进程：

```
System.exit(1); 
```

为了知道您的应用程序何时崩溃（未被捕获的异常），您需要定义：

```
Thread.setDefaultUncaughtExceptionHandler(new CustomUncaughtExceptionHandler()); 
```

在你的主线程中。

CustomUncaughtExceptionHandler 是：

```
public class CustomUncaughtExceptionHandler implements UncaughtExceptionHandler
{
    private UncaughtExceptionHandler    defaultUEH;

    public CustomUncaughtExceptionHandler()
    {
        this.defaultUEH = Thread.getDefaultUncaughtExceptionHandler();
    }

    public void uncaughtException(Thread t, Throwable e)
    {       
        // Put system.exit here
        if (defaultUEH != null)
        {
            defaultUEH.uncaughtException(t, e);
        }
        else
        {
            this.defaultUEH = Thread.getDefaultUncaughtExceptionHandler();
            defaultUEH.uncaughtException(t, e);
        }
    } 
```

}

# jsf - 在 POST 中获取 viewParam

> ID：12638899
> 
> 赞同：1
> 
> 时间：2012-09-28T11:11:45.800
> 
> 标签：jsf, omnifaces

考虑以下代码：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:o="http://omnifaces.org/ui">

    <f:metadata>
        <o:viewParam name="selected" value="#{testBacking.selected}" >
        </o:viewParam>
    </f:metadata>

    <h:head>
        <title>
            title
        </title>

    </h:head>

    <h:body>
        <o:form includeViewParams="true">
            <h:commandButton action="#{testBacking.go()}" value="go">
                <f:ajax execute="@all" render="@all"/>
            </h:commandButton>
        </o:form>
    </h:body>

</html> 
```

动作方法：

```
public void go() {
    System.out.println("go() is called");

    Collection<UIViewParameter> viewParams = ViewMetadata.getViewParameters(FacesContext.getCurrentInstance().getViewRoot());

    for (UIViewParameter viewParam : viewParams) {
        System.out.println(viewParam.getName() +" = "+ viewParam.getValue());
    }
} 
```

action 方法返回正确的 viewParam 名称，但该值始终为 null。如果这是预期的行为，那么`<o:form includeViewParams="true">`在实际使用中有何帮助？

我正在使用 Mojarra 2.1.12 和 Omnifaces 1.1。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T13:00:05.087

您的 bean 显然是请求范围的。**旨在与视图范围**的bean`<o:viewParam>`结合使用，只是因为它可以防止模型在每次回发到*同一*视图时一次又一次地转换/验证/更新，即使它*已经*在初始请求期间完成并且*仍然*作为属性存在视图范围的 bean。当模型绑定到基于 DB 调用执行工作的昂贵转换器时，这会提高整体性能。[展示示例](http://showcase.omnifaces.org/components/viewParam)也清楚地表明了这一点。

 *****为了实现这一点，`<o:viewParam>`在任何回发期间基本上都会跳过这个模型转换/验证/更新作业。然而，在每个请求上都会新创建一个请求范围的 bean，因此初始模型值在每次回发时都会丢失，并且由于`<o:viewParam>`根本没有设置的设计。

您可以通过将 bean 放置在视图范围内来解决此问题，或者仅使用标准`<f:viewParam>`来解决。

至于`<o:form includeViewParams="true">`，这仅对同步回发有用。如果您删除，`<f:ajax>`那么您将看到它是如何有用的。没有`includeViewParams="true"`URL 就变成了没有 view 参数的那个，即没有`?selected=somevalue`，因此它变得无法添加书签。这与 没有严格的关系`<o:viewParam>`，它与 结合起来效果很好`<f:viewParam>`。*****

# javascript - 用于冻结标题、冻结列、调整列大小的 jQuery 插件

> ID：12638905
> 
> 赞同：0
> 
> 时间：2012-09-28T11:11:58.453
> 
> 标签：javascript, jquery, html-table

在我当前的项目中，我需要将以下功能添加到表中：

*   冻结表头
*   冻结左侧的一列或多列
*   能够重新调整列的大小

我们正在使用 RichFaces 和 jQuery。我搜索了 jQuery 插件，但它们中的每一个都至少缺少这些功能中的一个。谁能推荐一个提供**所有**这些开箱即用功能的 jQuery 插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:26:30.140

我认为[jqGrid](http://www.trirand.com/blog/)涵盖了所有这些必需的功能。

请查看以下每个功能的[演示](http://trirand.com/blog/jqgrid/jqgrid.html)

1.  冻结标题 - 真正的滚动行
2.  冻结列 - 冻结列
3.  重新调整列大小 - 默认情况下存在此功能，但如果需要，您始终可以使用将它们设置为固定宽度的列。文档非常好。

# apache-flex - 如何在列表记录中添加图像？

> ID：12638906
> 
> 赞同：0
> 
> 时间：2012-09-28T11:12:03.973
> 
> 标签：apache-flex, actionscript, flex4

如何在列表记录中添加图像？

我的列表记录包含字符串和图像。我有一个包含字符串和图像的对象。我需要将该对象字符串和图像添加到列表中。

字符串和图像必须在同一个原始列表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T12:00:33.687

好吧，作为将图像渲染到列表中的开始，您可以使用本[教程](http://blog.flexexamples.com/2009/09/18/displaying-images-in-a-spark-list-control-in-flex-4/)：

# c# - 将图像保存为 Server.MapPath() 时在 GDI+ 中发生一般错误

> ID：12638907
> 
> 赞同：1
> 
> 时间：2012-09-28T11:12:12.310
> 
> 标签：c#, asp.net, image, exception-handling, jpeg

我正在尝试保存图像并将其作为电子邮件发送。但是在保存时我得到一个异常，因为 GDI+ 中发生了一般错误。它工作正常，但突然出现此错误。不知道如何进行。任何提示和想法都会非常有帮助。在下面分享我的代码：

```
protected void Button1_Click(object sender, EventArgs e)
{
   string path = Server.MapPath(@"images\certi4.jpg");

    Bitmap b = new Bitmap(path);
    Graphics g = Graphics.FromImage(b);

    g.SmoothingMode = SmoothingMode.AntiAlias;

    string inputString = TextBox1.Text;
    string inputString1 = TextBox2.Text;
    string inputString2 = TextBox3.Text;
    Font f = new Font("Arial", 15, FontStyle.Bold);

    g.DrawString(inputString, f, SystemBrushes.WindowText, new Point(230, 240));
    g.DrawString(inputString1, f, SystemBrushes.WindowText, new Point(350, 290));
    g.DrawString(inputString2, f, SystemBrushes.WindowText, new Point(250, 377));

    Response.Clear();
    Response.ContentType = "image/jpeg";

    b.Save (Server.MapPath("~/images/certi6.jpg"));//**Error in this part**
    b.Save(Response.OutputStream, ImageFormat.Jpeg);   

    //Server.MapPath("ImageFormat.Jpeg");

    MailMessage msg = new MailMessage(txt_From.Text, txt_To.Text);
    msg.Subject = txt_Subject.Text;
    msg.Body =  "<br /><b>From:</b> " + txt_From.Text + "<br /><b>To:</b> " + txt_To.Text + "<br /><br /><br /><br /><b>Name:</b><hr />" + TextBox1.Text + "<br /> <br /><b>Date:</b><br /><hr /><br />" + TextBox2.Text + "<br /><br />";
    msg.IsBodyHtml = true;
    Attachment objAttachment = new Attachment(Server.MapPath("~/images/certi6.jpg"));
    msg.Attachments.Add(objAttachment);
    System.Net.Mail.SmtpClient objSmtpClient = new SmtpClient("10.238.52.200", 25);
    objSmtpClient.Send(msg);
} 
```

# sql - 本机 SQL 查询，获取最大条目

> ID：12638912
> 
> 赞同：1
> 
> 时间：2012-09-28T11:12:30.093
> 
> 标签：sql

想象一个有两个字段的表 T`f1`和`f2`

让我们放一些虚拟值：

```
(1,2) , (1,3) , (1,4), (2,2), (4,1), (4,2) 
```

我想检索`f2`每个的最大值，`f1`即我希望我的查询返回：

```
(1,4), (2,2), (4,2) 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:14:13.270

你必须使用`group by`和聚合函数`max()`

```
select f1,max(f2)
from tab
group by f1 
```

更多信息的链接：

*   [通过...分组](http://www.w3schools.com/sql/sql_groupby.asp)
*   [最大限度（）](http://www.w3schools.com/sql/sql_func_max.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T11:13:37.717

您可以`GROUP BY`使用 f1，它将聚合 f1 的每个不同值的行：

```
SELECT f1, MAX(f2)
FROM T
GROUP BY f1 
```

# .net - DotNet 有菠菜吗？

> ID：12638913
> 
> 赞同：-3
> 
> 时间：2012-09-28T11:12:31.677
> 
> 标签：.net, c#-4.0, bdd, specflow, spinach

我有兴趣在 .Net 上测试 Spinach，有人知道是否有任何基于它的 .Net 框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:45:04.457

没有。.net 上 BDD 的最新技术仍然是 specflow。

# scala - scala中的空值相等，odersky书的解释似乎与scala代码不同？

> ID：12638925
> 
> 赞同：3
> 
> 时间：2012-09-28T11:13:12.707
> 
> 标签：scala, null, equality

在 Odersky 的书“Scala 编程”第二版中，第 89 页的第 5.7 节中，“==”运算符解释为：

> “如您所见，== 已经过精心设计，因此您在大多数情况下都能得到您想要的相等比较。这是通过一个非常简单的规则完成的：首先检查左侧是否为 null，如果不为 null，则调用equals 方法...由于有自动 null 检查，您不必自己进行检查 (7)"

然后注释“7”：

> “自动检查不查看右侧，但任何合理的 equals 方法如果其参数为空，则应返回 false。”

如果空值检查不查看 RHS，我希望 null==anything 总是评估为假......但我尝试了一下，并且 null==null 评估为真。

这本书基于scala 2.8。语言是否在某个时候发生了变化，还是我只是误解了解释？

在我使用的 drools 引擎中， == 被解释为如果 LHS 为空，并且 RHS 不为空，则来自 RHS 的 equals 方法将传递给 LHS。尽管最合理的 equals 方法应该在 null 上返回 false，但我喜欢 drools 引擎处理这个问题的方式。在 SQL 中，我习惯于 null != null。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T11:37:15.750

原因是[`==`AnyRef 是如何实现的](https://github.com/scala/scala/blob/master/src/library-aux/scala/AnyRef.scala#L80)。

```
final def ==(that: AnyRef): Boolean =
    if (this eq null) that eq null
    else this equals that 
```

`eq`是一种检查两个变量是否引用同一个对象的方法，因此在这种情况下，代码段第三行中的`null == null`两个检查都返回 true。`eq null`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T11:38:53.737

在我看来，引用的文字只说明了如果 LHS 不是 会发生什么`null`，所以那部分没有矛盾。对 LHS 时发生的情况的描述`null`可能在您没有引用的文本的某些部分中，或者它完全丢失了。

注 (7) 解释说，如果 LHS 不是`null`，则不对 RHS 执行检查，RHS 只是传递给`equals`。因此，在比较类似的东西时`someExpression == null`，Scala 首先检查是否`someExpression`不为空，然后调用`someExpression.equals(null)`.

我会说Scala的`term1 == term2`被转换成Java的

```
(term1 != null) ? term1.equals(term2) : (term2 == null) 
```

(Note that this is a Java snippet so `==` in the above line means Java's reference equality.)

# qt - 我可以在 Qt 中设置设计师的“始终在顶部”标志吗？

> ID：12638932
> 
> 赞同：1
> 
> 时间：2012-09-28T11:13:38.280
> 
> 标签：qt, always-on-top

我可以从 UI 视图中窗口的属性表中执行此操作吗？

目前，我在 QMainDialog 的构造函数中设置了始终位于顶部的标志：

```
setWindowFlags(Qt::WindowStaysOnTopHint); 
```

# linq - 使用 linq 查询与不同实体左连接

> ID：12638933
> 
> 赞同：1
> 
> 时间：2012-09-28T11:13:40.633
> 
> 标签：linq

我正在使用 linq 查询，因为我有两个实体模型我无法使用左连接我以这种方式实现了我得到空异常

```
var query = from r in ContactsContext.My_schedule_categories.Where(rp => rp.Usr_schedule_owner_usr_id == currentID)    
            join p in profileContext.My_schedule_categories on r.Usr_schedule_category_id equals p.sid into g
            Where(pr => pr.sid == pr.catid)

            from p in g.DefaultIfEmpty()
            select new
            {
                category = r.Usr_schedule_category,
                caid = r.Usr_schedule_category_id,
                oid = r.Usr_schedule_owner_usr_id,
                sid = p.sid
            } 
```

那么您能否向我发送任何示例代码，我如何才能离开两个具有不同实体模型的表？

# c++ - 如何在 C++ 中使用强制转换

> ID：12638948
> 
> 赞同：-3
> 
> 时间：2012-09-28T11:14:48.243
> 
> 标签：c++

我有一个与 c++ 中的 static_cast 相关的问题。

我有 ：

*   类 B 及其派生类 D
*   类 BData 及其派生类 DData

这是代码：

```
class B 
{
  public:
    B(BData * pb)
    {
    }
};

class D : public B 
{
  public:
    D(DData * pd) : B( static_cast<BData*>(pd))
    {
    }
}; 
```

编译总是报错：

```
error C2440: 'static_cast' : cannot convert from 'DData *' to 'BData *',
Types pointed to are unrelated; conversion requires reinterpret_cast, C-style cast or function-style cast 
```

有人知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T11:17:21.563

> **我不能`static_cast`在构造函数中使用？**

您可以`static_cast`在构造函数中使用。

错误消息准确地告诉您为什么会出现错误，
您正在尝试强制转换不相关的类（`DData`和`BData`）。你不能用`static_cast`.

附带说明，您的代码示例和错误消息不匹配，请发布您的真实代码。
如果您的真实代码与您描述的一样，那么它应该可以**[正常工作](http://ideone.com/V511y)**。

# windows-phone-7 - 尝试在 windowsphone 开发中心更新 XAP 时出错

> ID：12638950
> 
> 赞同：0
> 
> 时间：2012-09-28T11:14:48.720
> 
> 标签：windows-phone-7, xap

我正在尝试为 Windows Phone 应用程序提交更新，但是当我单击“更新应用程序”并选择适当的 .xap 文件时，会出现以下错误消息：

[ScriptObject_InvokeFailed] 参数：调试资源字符串不可用。通常，关键和论据提供了足够的信息来诊断问题。请参阅[http://go.microsoft.com/fwlink/?linkid=106663&Version=8.1.10411.0&File=System.Windows.Browser.dll&Key=ScriptObject_InvokeFailed](http://go.microsoft.com/fwlink/?linkid=106663&Version=8.1.10411.0&File=System.Windows.Browser.dll&Key=ScriptObject_InvokeFailed)

这是什么意思？无论我选择什么 .xap 文件，此消息都会不断出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T22:22:53.670

请使用 Internet Explorer 9 或更高版本，这可能会解决您的问题。

# c# - 通过 Json 发送 HTML

> ID：12638954
> 
> 赞同：3
> 
> 时间：2012-09-28T11:15:03.697
> 
> 标签：c#, asp.net, json

我对 Jquery Ajax 调用做出了响应，它运行良好：

```
var jSonTestResultReport =@"{ ""html"" : ""I am text!"" }"; 
```

Javascript 接收它并获取文本并将其呈现在 a 中`Div`，我可以看到它说`"I am Text"`。

但是当我尝试这样做时：

```
var jSonTestResultReport =@"{ ""html"" : ""<li style=""color:green;"">I am text</li>"" }"; 
```

我得到的错误

> 意外的令牌 c.

怎么能发`html`过去`Json`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T11:31:49.623

```
var jSonTestResultReport =@"{ ""html"" : ""<li style=""color:green;"">I am text</li>"" }"; 
```

将创建一个 json 字符串为

```
{ "html" : "<li style="color:green;">I am text</li>" } 
```

这是无效的。`unexpected token c.`来自 的第一个字母`color`。

使用[真正的 json 解析器](http://json.codeplex.com/)而不是手动形成 json。

```
var json = JsonConvert.SerializeObject(new { html=@"<li style=""color:green;"">I am text</li>" }); 
```

**PS：`var jSonTestResultReport =@"{ ""html"" : "I am text!" }";`无法编译。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T11:27:56.270

转义你的 "" qoutes like \""`<li ... >`否则 JSON 会死，因为它是一个文本分隔符

```
var jSonTestResultReport =
     @"{ ""html"" : ""<li style=\""color:green;\"">I am text</li>"" }"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T11:25:46.907

为什么不使用 jQuery.parseJSON 方法，这比使用大量双引号的方法更清晰易读

例如

```
var obj = jQuery.parseJSON('{"html": "<listyle='color: green;'>Iamtext</li>"}'); 
```

另外为了加快速度，我建议您使用 JsonLint 验证器来验证您的 json 对象

# android - 使用 Android 的 SQLite 中的 UNIQUE 列错误

> ID：12638957
> 
> 赞同：0
> 
> 时间：2012-09-28T11:15:20.937
> 
> 标签：android, sqlite, duplicates, unique

我想防止我的 SQLite 数据库中出现重复，所以我做了一列`UNIQUE`。但奇怪的是选择了错误的列。这是我的数据库适配器：

```
public class ProjectsDBAdapter {

 public static final String KEY_ROWID = "_id";
 public static final String KEY_PROJECTNAME = "projectname";
 public static final String KEY_ROUTERIP = "routerip";
 public static final String KEY_URL = "url";
 public static final String KEY_CALIMERO = "calimero";

 private static final String TAG = "ProjectsDBAdapter";
 private DatabaseHelper mDbHelper;
 private SQLiteDatabase mDb;

 private static final String DATABASE_NAME = "KNXTable";
 private static final String SQLITE_TABLE = "Project";
 private static final int DATABASE_VERSION = 1;

 private final Context mCtx;

 private static final String DATABASE_CREATE =
  "CREATE TABLE if not exists " + SQLITE_TABLE + " (" +
  KEY_ROWID + " integer PRIMARY KEY autoincrement," +
  KEY_PROJECTNAME + " TEXT UNIQUE," +
  KEY_ROUTERIP + " TEXT NOT NULL," +
  KEY_URL + " TEXT NOT NULL," +
  KEY_CALIMERO + " TEXT NOT NULL," +
  " UNIQUE (" + KEY_PROJECTNAME +"));";

 private static class DatabaseHelper extends SQLiteOpenHelper {

  DatabaseHelper(Context context) {
   super(context, DATABASE_NAME, null, DATABASE_VERSION);
  }

  @Override
  public void onCreate(SQLiteDatabase db) {
   //invoked when the database is created, 
   //this is where we can create tables and columns to them, create views or triggers.
   Log.w(TAG, DATABASE_CREATE);
   db.execSQL(DATABASE_CREATE);
  }

  @Override
  public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
   //invoked when we make a modification to the database such as altering,
   //dropping , creating new tables.
   Log.w(TAG, "Upgrading database from version " + oldVersion + " to "
     + newVersion + ", which will destroy all old data");
   db.execSQL("DROP TABLE IF EXISTS " + SQLITE_TABLE);
   onCreate(db);
  }
 }

 public ProjectsDBAdapter(Context ctx) {
  this.mCtx = ctx;
 }

 public ProjectsDBAdapter open() throws SQLException {
  mDbHelper = new DatabaseHelper(mCtx);
  mDb = mDbHelper.getWritableDatabase();
  return this;
 }

 public void close() {
  if (mDbHelper != null) {
   mDbHelper.close();
  }
 }

 public long createProject(String ip, String name, 
   String url, String calimero) {

  ContentValues initialValues = new ContentValues();
  initialValues.put(KEY_PROJECTNAME, name);
  initialValues.put(KEY_ROUTERIP, ip);
  initialValues.put(KEY_URL, url);
  initialValues.put(KEY_CALIMERO, calimero);

  return mDb.insertOrThrow(SQLITE_TABLE, null, initialValues);
 }

 public boolean deleteAllProjects() {

  int doneDelete = 0;
  doneDelete = mDb.delete(SQLITE_TABLE, null , null);
  Log.w(TAG, Integer.toString(doneDelete));
  return doneDelete > 0;
 }

 //---deletes a particular title---
 public boolean deleteTitle(String name) 
 {
    return mDb.delete(SQLITE_TABLE, KEY_PROJECTNAME + "='" + name+"'", null) > 0;
 }

 public Cursor fetchProjectsByName(String inputText) throws SQLException {
  Log.w(TAG, inputText);
  Cursor mCursor = null;
  if (inputText == null  ||  inputText.length () == 0)  {
   mCursor = mDb.query(SQLITE_TABLE, new String[] {KEY_ROWID,
    KEY_PROJECTNAME, KEY_ROUTERIP, KEY_URL, KEY_CALIMERO}, 
     null, null, null, null, null); 
  }
  else {
   mCursor = mDb.query(true, SQLITE_TABLE, new String[] {KEY_ROWID,
     KEY_PROJECTNAME, KEY_ROUTERIP, KEY_URL, KEY_CALIMERO}, 
     KEY_PROJECTNAME + " like '%" + inputText + "%'", null,
     null, null, null, null);
  }
  if (mCursor != null) {
   mCursor.moveToFirst();
  }
  return mCursor;
 }

 public Cursor fetchAllProjects() {

  Cursor mCursor = mDb.query(SQLITE_TABLE, new String[] {KEY_ROWID,
    KEY_PROJECTNAME, KEY_ROUTERIP, KEY_URL, KEY_CALIMERO}, 
    null, null, null, null,KEY_PROJECTNAME +" DESC");

  if (mCursor != null) {
   mCursor.moveToFirst();
  }
  return mCursor;
 } 
```

}

并使用此代码填充数据库：

```
 Name = project_name.getText().toString();
        IP = router_ip.getText().toString();
        URL = url.getText().toString();
        dbHelper = new ProjectsDBAdapter(this);
        dbHelper.open();
        //TODO Name statt IP auf Duplikat überprüfen
        try {
            dbHelper.createProject(IP, Name, URL, "Edit");
        } catch (SQLiteException exception) {
            Log.d("SQLite", "Error"+exception.toString());
            exception.printStackTrace();
            duplicate_flag = 1;
        } 
```

LogCat 输出：

```
09-28 13:32:15.925: I/URL(22204): URL http://www.mokkapps.de/wp-admin/calimero.xml ist gültig!
09-28 13:32:15.925: I/Name(22204): Projektname ist Test
09-28 13:32:15.925: I/IP(22204): IP ist 1
09-28 13:32:16.000: W/AndroidParseXMLActivity(22204): Start
09-28 13:32:16.020: W/AndroidParseXMLActivity(22204): java.io.FileNotFoundException: /mnt/sdcard/Test.xml: open failed: ENOENT (No such file or directory)
09-28 13:32:16.020: W/AndroidParseXMLActivity(22204):   at libcore.io.IoBridge.open(IoBridge.java:406)
09-28 13:32:16.020: W/AndroidParseXMLActivity(22204):   at java.io.FileInputStream.<init>(FileInputStream.java:78)
09-28 13:32:16.020: W/AndroidParseXMLActivity(22204):   at de.bertrandt.bertrandtknx.CreateProject.parseXML(CreateProject.java:340)
09-28 13:32:16.020: W/AndroidParseXMLActivity(22204):   at de.bertrandt.bertrandtknx.CreateProject.save_project(CreateProject.java:291)
09-28 13:32:16.020: W/AndroidParseXMLActivity(22204):   at de.bertrandt.bertrandtknx.CreateProject.onOptionsItemSelected(CreateProject.java:108)
09-28 13:32:16.020: W/AndroidParseXMLActivity(22204):   at android.app.Activity.onMenuItemSelected(Activity.java:2564)
09-28 13:32:16.020: W/AndroidParseXMLActivity(22204):   at com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java:984)
09-28 13:32:16.020: W/AndroidParseXMLActivity(22204):   at com.android.internal.view.menu.MenuBuilder.dispatchMenuItemSelected(MenuBuilder.java:735)
09-28 13:32:16.020: W/AndroidParseXMLActivity(22204):   at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:149)
09-28 13:32:16.020: W/AndroidParseXMLActivity(22204):   at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:874)
09-28 13:32:16.020: W/AndroidParseXMLActivity(22204):   at com.android.internal.view.menu.ActionMenuView.invokeItem(ActionMenuView.java:613)
09-28 13:32:16.020: W/AndroidParseXMLActivity(22204):   at com.android.internal.view.menu.ActionMenuItemView.onClick(ActionMenuItemView.java:121)
09-28 13:32:16.020: W/AndroidParseXMLActivity(22204):   at android.view.View.performClick(View.java:3644)
09-28 13:32:16.020: W/AndroidParseXMLActivity(22204):   at android.view.View$PerformClick.run(View.java:14313)
09-28 13:32:16.020: W/AndroidParseXMLActivity(22204):   at android.os.Handler.handleCallback(Handler.java:605)
09-28 13:32:16.020: W/AndroidParseXMLActivity(22204):   at android.os.Handler.dispatchMessage(Handler.java:92)
09-28 13:32:16.020: W/AndroidParseXMLActivity(22204):   at android.os.Looper.loop(Looper.java:137)
09-28 13:32:16.020: W/AndroidParseXMLActivity(22204):   at android.app.ActivityThread.main(ActivityThread.java:4517)
09-28 13:32:16.020: W/AndroidParseXMLActivity(22204):   at java.lang.reflect.Method.invokeNative(Native Method)
09-28 13:32:16.020: W/AndroidParseXMLActivity(22204):   at java.lang.reflect.Method.invoke(Method.java:511)
09-28 13:32:16.020: W/AndroidParseXMLActivity(22204):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
09-28 13:32:16.020: W/AndroidParseXMLActivity(22204):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
09-28 13:32:16.020: W/AndroidParseXMLActivity(22204):   at dalvik.system.NativeStart.main(Native Method)
09-28 13:32:16.020: W/AndroidParseXMLActivity(22204): Caused by: libcore.io.ErrnoException: open failed: ENOENT (No such file or directory)
09-28 13:32:16.020: W/AndroidParseXMLActivity(22204):   at libcore.io.Posix.open(Native Method)
09-28 13:32:16.020: W/AndroidParseXMLActivity(22204):   at libcore.io.BlockGuardOs.open(BlockGuardOs.java:110)
09-28 13:32:16.020: W/AndroidParseXMLActivity(22204):   at libcore.io.IoBridge.open(IoBridge.java:390)
09-28 13:32:16.020: W/AndroidParseXMLActivity(22204):   ... 22 more
09-28 13:32:16.060: E/SKIA(22204): FimgApiStretch:stretch failed
09-28 13:32:22.590: I/URL(22204): URL http://www.mokkapps.de/wp-admin/calimero.xml ist gültig!
09-28 13:32:22.590: I/Name(22204): Projektname ist Test2
09-28 13:32:22.590: I/IP(22204): IP ist 1
09-28 13:32:22.635: D/SQLite(22204): Errorandroid.database.sqlite.SQLiteConstraintException: error code 19: constraint failed
09-28 13:32:22.635: W/System.err(22204): android.database.sqlite.SQLiteConstraintException: error code 19: constraint failed
09-28 13:32:22.640: W/System.err(22204):    at android.database.sqlite.SQLiteStatement.native_executeInsert(Native Method)
09-28 13:32:22.640: W/System.err(22204):    at android.database.sqlite.SQLiteStatement.executeInsert(SQLiteStatement.java:113)
09-28 13:32:22.640: W/System.err(22204):    at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1838)
09-28 13:32:22.640: W/System.err(22204):    at android.database.sqlite.SQLiteDatabase.insertOrThrow(SQLiteDatabase.java:1737)
09-28 13:32:22.640: W/System.err(22204):    at SQLite.ProjectsDBAdapter.createProject(ProjectsDBAdapter.java:88)
09-28 13:32:22.640: W/System.err(22204):    at de.bertrandt.bertrandtknx.CreateProject.save_project(CreateProject.java:283)
09-28 13:32:22.640: W/System.err(22204):    at de.bertrandt.bertrandtknx.CreateProject.onOptionsItemSelected(CreateProject.java:108)
09-28 13:32:22.645: W/System.err(22204):    at android.app.Activity.onMenuItemSelected(Activity.java:2564)
09-28 13:32:22.645: W/System.err(22204):    at com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java:984)
09-28 13:32:22.645: W/System.err(22204):    at com.android.internal.view.menu.MenuBuilder.dispatchMenuItemSelected(MenuBuilder.java:735)
09-28 13:32:22.645: W/System.err(22204):    at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:149)
09-28 13:32:22.645: W/System.err(22204):    at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:874)
09-28 13:32:22.645: W/System.err(22204):    at com.android.internal.view.menu.ActionMenuView.invokeItem(ActionMenuView.java:613)
09-28 13:32:22.645: W/System.err(22204):    at com.android.internal.view.menu.ActionMenuItemView.onClick(ActionMenuItemView.java:121)
09-28 13:32:22.645: W/System.err(22204):    at android.view.View.performClick(View.java:3644)
09-28 13:32:22.645: W/System.err(22204):    at android.view.View$PerformClick.run(View.java:14313)
09-28 13:32:22.645: W/System.err(22204):    at android.os.Handler.handleCallback(Handler.java:605)
09-28 13:32:22.645: W/System.err(22204):    at android.os.Handler.dispatchMessage(Handler.java:92)
09-28 13:32:22.645: W/System.err(22204):    at android.os.Looper.loop(Looper.java:137)
09-28 13:32:22.645: W/System.err(22204):    at android.app.ActivityThread.main(ActivityThread.java:4517)
09-28 13:32:22.645: W/System.err(22204):    at java.lang.reflect.Method.invokeNative(Native Method)
09-28 13:32:22.645: W/System.err(22204):    at java.lang.reflect.Method.invoke(Method.java:511)
09-28 13:32:22.645: W/System.err(22204):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
09-28 13:32:22.645: W/System.err(22204):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
09-28 13:32:22.645: W/System.err(22204):    at dalvik.system.NativeStart.main(Native Method) 
```

目前，如果 routerip 重复，则会引发异常，但我想检查名称。谁能找到我的错误？不能那么戏剧化，但我找不到问题...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:32:24.643

如果您第一次使用唯一的一列运行项目，然后稍后更改它，那么您的更改将不会反映。因为表已经创建并且不会使用新结构再次创建。所以如果是这种情况，请卸载应用程序并再次运行。您也可以使用sqlite浏览器测试表格

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-04T05:45:21.647

如果您没有更改数据库版本，您将收到此错误，因为您的所有代码都很好，但 android 数据库对象认为它是以前的数据库，因此更改数据库版本并再次检查它会在模拟器和真实设备上运行需要删除第一个应用程序，然后在 Rasel 上方检查它说

# windows - 如何在exe中执行bat文件？（使用 WinRAR sfx 创建的 exe）

> ID：12638960
> 
> 赞同：0
> 
> 时间：2012-09-28T11:15:26.240
> 
> 标签：windows, installation, exe, winrar, sfx

我想创建一个包含 mysql.msi 和 java.zip 的 exe 文件。我已经编写了 vbscript 来安装 mysql 并在 C: 驱动器中提取 java 文件。它工作正常。

现在我的问题是：

使用 WinRAR sfx 选项将源文件夹转换为 exe。

单击创建的 exe 时，如何执行 vbscript 或 bat 文件（用于执行 vbscript）？

有人有解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T11:26:23.927

SFX 命令：`Setup`即，`Setup = <program>`

SFX 将在成功提取后尝试执行。包含提取文件的文件夹在执行之前设置为当前文件夹。如果程序名称包含空格，则必须将其括在引号中。

**例子**

`Setup = setup.exe`

# python - BeautifulSoup - 来自检查元素的代码

> ID：12638961
> 
> 赞同：-1
> 
> 时间：2012-09-28T11:15:31.557
> 
> 标签：python, beautifulsoup

我有页面，其中有 2 个不同的 HTML 代码。当我单击查看页面源代码时，我得到了与 BeautifulSoup 中相同的代码，但我想查看来自检查元素的代码。如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T11:24:24.863

我认为firebug的«inspect element»中的html或chrome的开发工具是javascript处理后的html，因此您将无法在beautifulsoup中拥有相同的javascript

您可以解释链接到页面的 javascript 并检索 html 内容，使用[https://github.com/kanzure/pyphantomjs](https://github.com/kanzure/pyphantomjs)等测试工具或直接使用[http://casperjs.org/](http://casperjs.org/)或直接使用[http： //www.gnu.org/software/pythonwebkit/](http://www.gnu.org/software/pythonwebkit/)

# cakephp - 控制器 cakephp 2 中的全局变量

> ID：12638962
> 
> 赞同：3
> 
> 时间：2012-09-28T11:15:34.063
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1, cakephp-2.2

在控制器内部有一个全局变量的方法是什么？

我曾尝试使用 beforeFilter 来做到这一点，但其他功能无法访问它。

只能使用`Configure::read`和完成吗`Configure::write`

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-28T11:21:12.607

您可以在 AppController 的任何控制器中设置可访问的变量

```
class AppController extends Controller {
    public $myGlobalVar;  

    public function beforeFilter()
    {
         //this can be anything array, object, string, etc .....
         $this->myGlobalVar = "test2";
    }
 } 
```

然后在您的另一个控制器中，您可以像这样在任何地方访问变量

```
class TestController extends AppController {

    public function index() {

        debug($this->myGlobalVar);
    }
} 
```

# php - 将运行时创建的表数据保存到数据库中

> ID：12638964
> 
> 赞同：0
> 
> 时间：2012-09-28T11:15:34.650
> 
> 标签：php, javascript, html, mysql

我创建了一个包含两个文本框和一个提交按钮的表单，当我输入行数和列数并单击提交按钮时，将在表单上生成行数和列数表结构，当我将数据输入到我想要的表中时将该数据保存到数据库中。如果您有任何演示示例，请给我它的紧急情况提前谢谢..

这是我的PHP代码：

```
<?php
 include_once "dreportCreation.php";
        {       
            if(isset($_POST['submit']))
                function displaydata($column,$rows)             
                    {       
                        echo "<table border='1' align='center'>";           
                        for($i = 0;$i<$_POST['column'];$i++)       
                        { 
                            echo "<tr>".$j."</tr>";                              
                            for($j = 0; $j <$_POST['rows'];$j++)         
                                {

                                    echo "<td>" ."<input type=\"text\" name='$i'>"."</td>"; 
                                }
                        }
                        echo "</table>";
                    }
        }
    ?>
    <html>
    <head>
    <title>aa</title>
    </head>
    <body>
        <form name="reportCreation" method="post" action="dd.php">
                        <label for='Table'>Define Table</label>
                        <label for='rows'>Row</label>
                        <input type="text" name="column"></input>
                        <label for='column'>Column</label>
                        <input type="text" name="rows"></input>
                        <input type="submit" name="submit" value="submit" onclick="displaydata();">
        </form>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:31:03.517

您的代码有很多问题，首先，您定义了一个名为 的 php 函数`displaydata`，但是在单击提交时调用了一个同名的 javascript 函数。因此，页面重新加载并在表单之外（以及`<html>`标记之前）发送输入，前提是您在 php 内的任何位置调用该函数......至于输入，您应该为每列创建一个数组输入，如下所示：

```
echo "<table border='1' align='center'>";           
for($i = 0;$i<$_POST['column'];$i++)       
{ 
    echo "<tr>".$j."</tr>";                              
    for($j = 0; $j <$_POST['rows'];$j++)         
    {
          echo "<td>" ."<input type=\"text\" name='column_$i[$j]'>"."</td>"; // you should provide a beter name than simly a number ... just saying :)
    }
}
echo "</table>"; 
```

这样，当您获得有关 php 的信息时，您将获得一个数组`$_POST['i']['j']`并能够将它们全部保存。否则，您只会获得每列的最后一个输入。

一个工作示例可能是：

```
<?php
 include_once "dreportCreation.php";
 function displaydata($column,$rows)             
 {       
      echo "<table border='1' align='center'>";           
      for($i = 0;$i<$_POST['column'];$i++)       
      { 
            echo "<tr>".$j."</tr>";                              
            for($j = 0; $j <$_POST['rows'];$j++)         
            {
                  echo "<td>" ."<input type=\"text\" name='column_$i[$j]'>"."</td>"; 
            }
       }
       echo "</table>";
  }
  ?>
    <html>
    <head>
    <title>aa</title>
    </head>
    <body>
        <form name="reportCreation" method="post" action="dd.php">
                        <label for='Table'>Define Table</label>
                        <label for='rows'>Row</label>
                        <input type="text" name="column"></input>
                        <label for='column'>Column</label>
                        <input type="text" name="rows"></input>
                        <input type="submit" name="submit" value="submit">

<?Php 
if (isset($_POST['submit'])) displaydata(); // Show data INSIDE form
?>

        </form>
    </body>
    </html> 
```

顺便说一句，您仍然必须在发布时检测到该数据是否已发送以进行保存。像`if (isset($_POST['column_0'])) { //start saving stuff }`这样的东西会很好

# java - 如何监控我的多线程 EJB2 JBoss 应用程序中的数据库事务？

> ID：12638966
> 
> 赞同：2
> 
> 时间：2012-09-28T11:15:38.313
> 
> 标签：java, oracle, jboss, database-deadlocks

我在我的应用程序中遇到了可重现的 Oracle 死锁。对代码的初步调查没有发现任何明显的原因，所以我想在记录正在运行的 SQL 以及最重要的是它们发生在其中的事务时重新创建这种情况。

我开始添加自己的调试语句，但这似乎是我在重新发明轮子并且已经证明容易出错（我最初错过了我的 EJB 方法之一被定义为“RequiresNew”）

有没有工具可以做到这一点？我看过：

*   log4jdbc，但从我看到的文档中并不清楚它会记录单独的事务，而且它不支持数据源，所以我需要解决这个问题。

*   jdbcslog - 也不清楚它是否会记录事务

还是我错过了一些更明显的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T22:00:35.803

解决了几次类似的情况。仅通过会话记录在复杂的应用程序中找到解决方案非常困难（我称之为幸运）。（Oracle 杀死其中一个会话。一个被杀死，另一个快乐地继续存在）

最好的解决方案是询问你的 DBA（或者如果你可以访问你的 oracle 安装，你可以谷歌然后自己获取它们，这并不复杂）跟踪文件（这个文件是在终止会话的例外中提到的，所以搜索你的警报log)，就会出现死锁图。（只是 DEADLOCK 的全文跟踪文件）

只需在此处查看如何查看跟踪文件的确切信息。[关联](http://www.oracle-base.com/articles/misc/deadlocks.php)

# android - 如何测试 Android 设备上是否安装了许可服务？

> ID：12638967
> 
> 赞同：0
> 
> 时间：2012-09-28T11:15:40.183
> 
> 标签：android

我有一个用 Java 编写的应用程序，我刚刚启用了许可证验证库 (LVL)。在启动过程中，我调用 LVL 来“打电话回家”到 Google Play，以确保应用程序获得正确许可，以便应用程序可以采取行动。

此代码已经过各种响应和各种设备的测试，并且可以正常工作。除了一台设备。在此设备上不断失败，并出现无法绑定到服务的错误。

违规行是 Google 在 LVL SDK 中提供的 LicenseChecker.java 的一部分：

```
boolean bindResult = mContext
      .bindService(
        new Intent(
        new String(Base64.decode("Y29tLmFuZHJvaWQudmVuZGluZy5saWNlbnNpbmcuSUxpY2Vuc2luZ1NlcnZpY2U="))),
    this, // ServiceConnection.
    Context.BIND_AUTO_CREATE); 
```

Base64 字符串包含“com.android.vending.licensing.ILicensingService”（我不知道为什么要对其进行编码，除非可能是一种较弱的混淆形式）。

该设备只是我在网上购买的用于测试的廉价平板电脑，然后刷新了自定义固件。无论出于何种原因，完全有可能“com.android.vending.licensing.ILicensingService”没有正确处理或根本没有处理，我收到了这条消息。

我的客户拥有的其他设备也可能出现此故障，我希望在这种情况下能够向他们传达一些有意义的错误消息，这样他们就不会因为平板电脑出现问题而责怪我的应用程序。

我想我可以查找进程目录，或者我可以找出哪些服务处理命名意图。这可能吗？如果可以，我该怎么做？如果我能尽可能准确地告诉用户应用程序无法运行的原因，我可以为自己省去很多麻烦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-08T15:01:43.190

对于带有自定义固件的廉价平板电脑，您拥有的 Google Play 版本很可能是旧的或非官方的，因此“Google Play 服务”APK 丢失或不是最新的。只有安装了官方 Google Play 的设备才能保证正常工作。我会提供一条消息说这样的话。

# objective-c - UIImageView 背景/透明度

> ID：12638971
> 
> 赞同：1
> 
> 时间：2012-09-28T11:16:02.363
> 
> 标签：objective-c, xcode, background, transparency

我希望两个（或更多） UIImageViews 中有图片，并且它们之间没有空白。简单地说，如果第一张图像是直线，第二张也是，我希望它们看起来像长线，而不像两条分开的线。怎么可能这样做？当我在我的故事板中叠加两个 UIImageView 或将它们彼此靠近时，模拟器视图中的这些行之间仍然存在间隙。当我在 Preview 或 Gimp 或任何其他应用程序中打开两张图片时，我百分百确定它们周围没有边框。线条仅在 0px 处加星标，并在图片的绝对末端结束。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T11:52:05.580

您可以设置 imageView 的属性：

```
imgView.contentMode = UIViewContentModeScaleToFill;
imgView.clipsToBounds = YES; 
```

在瘦的情况下，图像视图之间肯定没有任何空格，尽管纵横比可能会改变如果 UIViewContentModeScaleAspectFill 不满足您的要求，请尝试`UIViewContentModeScaleAspectFill`

# javascript - 用“tabindex”关注下一个元素，但在下一个 td

> ID：12638972
> 
> 赞同：0
> 
> 时间：2012-09-28T11:16:04.737
> 
> 标签：javascript, jquery

为什么这不起作用

我正在尝试使用 "tabindex" 关注下一个 td 中的下一个元素。

我的元素没有 ids 并且都有相同的 tabindex

```
$('form').keypress(function (event) {

        $(":focus").parents('td').next('td').find('[tabindex]:first').focus(); //this is not working

    }

});

<table>
    <tr>
        <td><input name="TextBox1" type="text"  tabindex="1" /></td>
        <td><input name="TextBox2" type="text"  tabindex="1" /></td>
    </tr>
    <tr>
        <td><input name="TextBox3" type="text" tabindex="1" /></td>
        <td><input name="TextBox5" type="text"  tabindex="1" /></td>
    </tr>
    <tr>
        <td>
                <select name="DropDownList1"  tabindex="1">
                    <option value=""></option>
                    <option value=""></option>
                    <option value=""></option>
                    <option value=""></option>
                    <option value=""></option>
                </select>
        </td>
        <td><input name="TextBox6" type="text" tabindex="1" /></td></td>
    </tr>
    <tr>
        <td><input name="TextBox7" type="text" tabindex="1" /></td></td>
        <td><input name="TextBox8" type="text"  tabindex="1" /></td></td>
    </tr>

</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T11:27:34.410

我在[jsfiddle中修改了你的代码](http://jsfiddle.net/uwdYm/1/)

```
$('form').keypress(function (event) {

        $(":focus").parents('td').next('td').find('[tabindex="1"]:first').focus(); //this is not working

});
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T11:20:02.640

试试这个

```
$('#Id:focus').find('input[tabindex=1]').focus() 
```

并索引你 tabIndex

# php - 如何从一组图像中提取随机图像并从 jpg 创建一个新图像并放置水印？

> ID：12638974
> 
> 赞同：0
> 
> 时间：2012-09-28T11:16:14.127
> 
> 标签：php, arrays, random, watermark

我需要从数组中预选数量的图像中选择一个随机图像，并将该图像用于 imagecreatefromjpeg() 函数作为水印代码 My code 的基本图像。imagecreatefromjpeg() 函数不会从生成的随机地址创建新图像。

```
$isrc1 ="c1.jpg";
$isrc2 ="c2.jpg";
$isrc3 ="c3.jpg";
$isrc4 ="c4.jpg";
$isrc5 ="c5.jpg";
$isrcarray = array($isrc1,$isrc2,$isrc3,$isrc4,$isrc5);

for ($i=0; $i<1; $i++) {
$it = $isrcarray[rand(0, count($isrcarray) - 1)] . "\n";

}

$box = @ImageTTFBBox(23,0,'arial.ttf',$userinfo[0]['name']);
$textwidth = abs($box[4] - $box[0]);
$x_finalpos = 255-($textwidth/2);
$image = imagecreatefromjpeg($it);
$font_color = ImageColorAllocate($image,0,0,0);
imagettftext($image, 23, 0, 101, 345, $font_color, 'arial.ttf', $userinfo[0]['name']);
ImageJPEG($image, $img);
ImageDestroy($image);
$img = "result.jpg"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T11:28:41.870

您可以使用

```
 $it=$isrcarray[array_rand($isrcarray)]; 
```

代替，

```
 $it=$isrcarray[rand(0,count($isrcarray)-1)]."\n"; 
```

# android - ALPHA_THRESHOLD 错误？

> ID：12638976
> 
> 赞同：0
> 
> 时间：2012-09-28T11:16:21.337
> 
> 标签：android, alpha

我得到“ALPHA_THRESHOLD 无法解析或不是 ViewConfiguration 的字段”，我的代码如下

```
// If the view has 0 alpha, we set it to be invisible so as to prevent
            // it from accepting touches
            if (alpha < ViewConfiguration.ALPHA_THRESHOLD) {
                v.setVisibility(INVISIBLE);
            } else if (v.getVisibility() != VISIBLE) {
                v.setVisibility(VISIBLE);
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T11:51:39.890

如果您阅读[文档](http://developer.android.com/reference/android/view/ViewConfiguration.html)，您会看到该类`ViewConfiguration`没有任何可访问的公共常量。

如果您阅读源代码，您会看到它`ALPHA_THRESHOLD`是隐藏的（使用`@hide`注释）。

```
/**
 * Minimum alpha required for a view to draw.
 * 
 * @hide
 */
public static final float ALPHA_THRESHOLD = 0.5f / PANEL_BIT_DEPTH; 
```

还`PANEL_BIT_DEPTH = 24`

我对您尝试做的事情或它是否正确没有经验，但您可以用以下代码替换您的代码：

```
final static float ALPHA_THRESHOLD = 0.5f / 24;

if (alpha < ALPHA_THRESHOLD) {
   v.setVisibility(INVISIBLE);
} else if (v.getVisibility() != VISIBLE) {
    v.setVisibility(VISIBLE);
} 
```

# android - 第二次得到错误 java.lang.ArrayIndexOutOfBoundsException .....Android

> ID：12638991
> 
> 赞同：1
> 
> 时间：2012-09-28T11:17:04.623
> 
> 标签：android, arrays, arraylist

当我第二次运行我的应用程序时，它会给出这个错误。如果我清理我的项目，那么它运行正常。而且我启动了新的模拟器然后我的应用程序运行但它没有连续运行。

> null java.lang.ArrayIndexOutOfBoundsException at com.warriorpoint.androidxmlsimple.SplashActivity.loadFeed(SplashActivity.java:140) at com.warriorpoint.androidxmlsimple.SplashActivity.access$0(SplashActivity.java:106)

我的代码在这里

```
 private void loadFeed(){
        try{
            BaseFeedParser parser = new BaseFeedParser();
            messages = parser.parse();
            titles = new ArrayList<String>(messages.size());
            description = new ArrayList<String>(messages.size());
            link = new ArrayList<String>(messages.size());
            arrays=new String[messages.size()][];

            final List<String> imageURL=new ArrayList<String>(1);
            imageURLAmit=new ArrayList<String>(messages.size());
            for (com.warriorpoint.androidxmlsimple.Message msg : messages){

                Spanned title=Html.fromHtml(msg.getTitle());
                titles.add(title.toString());
                link.add(msg.getLink().toString());
                Spanned data=Html.fromHtml(msg.getDescription(),new ImageGetter() {

                    public Drawable getDrawable(String source) {

                        // TODO Auto-generated method stub
                            imageURL.add(source);
                        return null;
                    }
                },null);

                if(imageURL.size()!=0){
                    imageURLAmit.add(imageURL.get(0));                  

                }else{
                    imageURLAmit.add("http://blog.kevinlearynet.netdna-cdn.com/files/applausemeter-300x200.jpg");
                }
                System.out.println("Position b4 loop : "+position);
                int j;
                arrays[position]=imageURL.toArray(new String[imageURL.size()]);
                System.out.println("2D array colomn length : "+arrays[position].length);
                position++;
                System.out.println("Position afeter loop : "+position);
                imageURL.clear();           
                description.add( data.toString());
                System.out.println("End addition");
            }
            System.out.println("Final Image URL lenght : "+imageURL.size());

        } catch (Throwable t){
            Log.e("AndroidNews",t.getMessage(),t);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:21:52.390

第一次看起来`position`是 0，但第二次会是 1。如果您的数组大小为 1，则第二次运行将抛出您得到的异常。

# android - 在片段中接收警报并更新 UI

> ID：12638996
> 
> 赞同：0
> 
> 时间：2012-09-28T11:17:24.430
> 
> 标签：android

由于片段旨在封装逻辑，我决定将 BroadReceiver 逻辑放在我自己的片段中。

起初我设置了一个警报，就像它在 ApiDemos 中显示的那样：

```
Intent intent = new Intent(getActivity(),OnAirPresentBroadcastReceiver.class);
PendingIntent sender = PendingIntent.getBroadcast(getActivity(), 0, intent, 0);

Calendar calendar = Calendar.getInstance();
calendar.setTimeInMillis(System.currentTimeMillis());
calendar.add(Calendar.SECOND, 30);

AlarmManager am = (AlarmManager) getActivity().getSystemService(Context.ALARM_SERVICE);
am.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), sender); 
```

OnAirPresentBroadcastReceiver 接收广播，此广播的目的是更新片段的 UI。我被困在这里 - 有可能吗？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:31:02.880

从您的 Receiver，您可以向您的 Activity 发布另一个 Intent。从 Activity 中，您可以使用 FragmentManager 访问 Fragment。

```
Intent notificationIntent = new Intent(context, MainActivity.class);
notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK);
notificationIntent.putExtra("extra", "extra");
context.startActivityForResult(notificationIntent, 0); 
```

您将在以下活动中获得它：

```
@Override
protected void onNewIntent(Intent intent)
{
    handleNotification(intent);

    super.onNewIntent(intent);
} 
```

如果您的 Activity 未运行，您将在 OnCreate 中获得额外的意图

确保您的活动在前台：（此代码获取前台活动）

```
ActivityManager am = (ActivityManager) context.getSystemService(Activity.ACTIVITY_SERVICE);
List<ActivityManager.RunningTaskInfo> taskInfo = am.getRunningTasks(1);
String name = taskInfo.get(0).topActivity.getShortClassName();
if (name.equals(".YOUR_ACTIVITY_NAME")) 
    {
    //only now start your intent.
    } 
```

您可以尝试的另一个方向：

```
Intent intent = new Intent(getActivity(),YOUR_ACTIVITY_HERE.class);
PendingIntent sender = PendingIntent.getActivitygetActivity(), 0, intent, 0); 
```

现在，您在 Activity 的 onNewIntent 函数中出现的事件（如果它处于活动状态）。这不是一个完整的解决方案，但这可能是一个不错的方向。

# sql - 检查字符串是否是格式良好的 xml

> ID：12638998
> 
> 赞同：3
> 
> 时间：2012-09-28T11:17:29.547
> 
> 标签：sql, xml, oracle

我在数据库中有 varchar2 列。此列以 xml 格式存储字符串。但并非所有字符串都是格式正确的 xml（有些有错误）。如何检查此字符串是否格式正确的 xml？

如果这个字符串不是格式良好的 xml，这样的 sql-query 将在运行时失败：

```
 select 
       extractvalue(xmltype(some_table.value), 'Attachment/@category')
   from some_table 
```

xml有以下格式：

```
 <Attachment {attributes} /> 
```

每个字符串中的属性数量可以不同。

因此，当出现像“asdf”这样的字符串时，我的查询不会失败。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T14:12:38.283

这是一个简单的功能，可以为您检查它；

```
CREATE OR REPLACE FUNCTION isXML(xml CLOB)
RETURN NUMBER
AS
  xmldata XMLTYPE;
BEGIN
  xmldata := XMLTYPE(xml);
  return 1;
EXCEPTION
  when others then
    return 0;
END;
/ 
```

您可以将其用作；

```
SQL> SELECT isXML('fdjkasksdf') FROM DUAL;

ISXML('FDJKASKSDF')
-------------------
                  0

SQL> SELECT isXML('<body></body>') FROM DUAL;

ISXML('<BODY></BODY>')
----------------------
                     1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T11:34:00.027

Oracle SQL 函数`XMLIsValid`和 XMLType 方法`IsSchemaValid()`
无条件运行验证过程。不要记录任何验证状态。回报：

*   1 如果文件被确定为有效。
*   如果确定文档无效或无法确定文档的有效性，则为 0。

**XMLType 方法 SchemaValidate()**
如果验证状态为 0（默认情况下为 0），则运行验证过程。如果确定文档有效，则将验证状态设置为 1。（否则，状态保持为 0。）

XMLType 方法**isSchemaValidated** () 返回记录的 XMLType 实例的验证状态。

XMLType 方法**setSchemaValidated** () 设置（记录）XMLType 实例的验证状态。

检查[此链接](http://docs.oracle.com/cd/E11882_01/appdev.112/e16659/xdb08tra.htm)以供参考

# ruby-on-rails - Rails 自定义电子邮件验证器 | 黑名单

> ID：12638999
> 
> 赞同：1
> 
> 时间：2012-09-28T11:17:43.593
> 
> 标签：ruby-on-rails, ruby, validation, model, blacklist

**情况：**

我有一个*用户*模型，需要通过列入黑名单的电子邮件地址列表进行验证。列入黑名单的电子邮件地址位于名为*blacklist的额外模型中*

# 模型/用户.rb：

```
 class User < ActiveRecord::Base
            validate :email_is_not_blacklisted

            def email_is_not_blacklisted
                    @blacklist = Blacklist.where(:blacklist_type => "E-Mail")

                    @blacklist.each do |item|
                            errors.add(:email, 'is blacklisted') if self.email.match(item)
                    end
            end
    end 
```

# 模型/黑名单.rb

```
 class Blacklist < ActiveRecord::Base
            attr_accessible :name, :blacklist_type

            #some validation code for blacklist items ...
    end 
```

# 黑名单条目示例

```
 #:        name,            blacklist_type
    #1:       'demo-mail.com', 'E-Mail'
    #2:       'test123.com',   'E-Mail' 
```

黑名单模型将来也将用于禁止特定用户名！

**问题：**

我的问题是*[at]blacklist*总是*nil*。也许我的逻辑有问题？换句话说：是否有可能在没有关联的情况下访问另一个模型中的模型？

感谢您提前提供的帮助，并对现有的语言错误表示歉意。我不是以英语为母语的人:)

**解决方案！** 我错过了定义应该使用项目的哪个属性...

```
 errors.add(:email, 'is blacklisted') if self.email.match(item.name) 
```

有时我的大脑不喜欢我喜欢的方式...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T12:54:01.390

我会建议你使用这个

```
class User < ActiveRecord::Base
  validate :email_is_not_blacklisted

  def email_is_not_blacklisted
    if Blacklist.find_by_blacklist_type_and_name("E-Mail",self.email)
       errors.add(:email, 'is blacklsited') 
    end
  end
end 
```

这将比以前的更快

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T11:37:51.260

区分大小写。您正在搜索 blacklist-type = "E-Mail" 并且您的示例数据是 "e-mail"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T12:06:52.367

要扩展我的评论，请尝试以下操作：

```
class User < ActiveRecord::Base
  validate :email_is_not_blacklisted

  def email_is_not_blacklisted
    Blacklist.find_all_by_blacklist_type("E-Mail").each do |item|
      errors.add(:email, 'is blacklsited') if.self.email.match(item)
    end
  end
end 
```