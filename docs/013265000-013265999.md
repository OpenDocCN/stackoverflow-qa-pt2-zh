# StackOverflow 问答 13265000-13265999

# css - 有没有办法我可以在 iphone 上重新设计表单项？

> ID：13265003
> 
> 赞同：3
> 
> 时间：2012-11-07T07:26:10.473
> 
> 标签：css

我正在努力使我的网站具有响应性，并且我的网站上有一个表格。我使用 css 重新设置了表单的样式，但是在 iphone 上，样式“丢失了”，并且它们具有 iphone 的默认样式。

有什么办法可以给它们设计样式吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T08:29:51.390

也许你正在搜索这个：

```
-webkit-appearance: none; 
```

或者对于其他浏览器：

```
 Safari  --webkit-appearance

 Mozilla --moz-appearance 
```

# javascript - Javascript 和 Jquery：单击按钮时为 Google 地图添加标记

> ID：13265004
> 
> 赞同：10
> 
> 时间：2012-11-07T07:26:12.553
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

我正在尝试创建一个按钮，该按钮将向显示的现有谷歌地图添加标记。

```
function initialize()
{
    geocoder = new google.maps.Geocoder();
    codeAddress();
}

function codeAddress()
{
    var image_icon = 'http://www.google.com/intl/en_us/mapfiles/ms/micons/blue-dot.png';
    var address = document.getElementById("type_location").value;

    geocoder.geocode( { 'address': address}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {

            var mapOptions = {
            zoom: 11,
            center: results[0].geometry.location,
            mapTypeId: google.maps.MapTypeId.ROADMAP
            }

        map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

            var marker = new google.maps.Marker({
                map: map,
                position: results[0].geometry.location,
                icon: image_icon
            });

        }           

    });

} 
```

我很新，我希望有人可以帮助我。

如果我有这样的东西来显示我的地图：

```
$(document).ready(function() {  

var coord = $(".address").attr("data-coordinates"); //this displays lat,lng (example: 32.000,-118.000)

var geocoder;
var map;    
initialize();
$(".add_marker").click(function(){

    // this is where I should add a marker?
});

}); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-07T10:47:37.277

幸运的你！

我有一个工作示例，可以完全满足您的要求:)

查看完整代码并在此处进行测试：http: [//jsfiddle.net/RASG/vA4eQ/](http://jsfiddle.net/RASG/vA4eQ/)
只需单击“添加标记”按钮

这是相关代码：

```
var latlng = new google.maps.LatLng(42.745334, 12.738430);

function addmarker(latilongi) {
    var marker = new google.maps.Marker({
        position: latilongi,
        title: 'new marker',
        draggable: true,
        map: map
    });
    map.setCenter(marker.getPosition())
}

$('#btnaddmarker').on('click', function() {
    addmarker(latlng)
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-21T07:10:56.777

地图的 HTML

```
<div id="map" style="width:100%;height:500px" ></div> 
```

用于加载地图和标记的 javascript

```
function myMap() {
    var myCenter = new google.maps.LatLng(28.214461283939166,83.95801313236007);
    var map_Canvas = document.getElementById("map");
    var mapOptions = {center: myCenter, zoom: 14,mapTypeId:google.maps.MapTypeId.HYBRID};
    var map = new google.maps.Map(document.getElementById("map"), mapOptions);
    google.maps.event.addListener(map, 'click', function(event) {
        document.getElementById("latitude").value = map.getCenter().lat(); 
        document.getElementById("longitude").value = map.getCenter().lng(); 
      place_Marker(map, event.latLng);

    });

  }
  var marker;
  function place_Marker(map, location) {
      if(marker){
          marker.setPosition(location);
      }else{
      marker = new google.maps.Marker({
      draggable:true,
      position: location,
      animation: google.maps.Animation.DROP,
      map: map
    });
  }

    var infowindow = new google.maps.InfoWindow({
      content: 'Latitude: ' + location.lat() + '<br>Longitude: ' + location.lng()
    });

    infowindow.open(map,marker);

  } 
```

# javascript - 阅读 AS3 中的浏览器 URL？

> ID：13265005
> 
> 赞同：1
> 
> 时间：2012-11-07T07:26:36.917
> 
> 标签：javascript, html, flash, apache-flex, flex3

我的应用程序作为父应用程序的 IFrame 中的选项卡与其他应用程序集成。

我想阅读浏览器地址栏 URL。

是否可以阅读。

```
<iframe id="myIFrameID123" src="http://192.168.1.102:8080/om/om.html?ucode=" width="100%" height="600"></iframe> 
```

并尝试访问父应用 URL

```
var search:String = ExternalInterface.call("window.location.search.toString");
var vars:URLVariables = new URLVariables(search); 
```

如果可以读取地址栏 URL 就可以了……这两个应用程序都在不同的 JBOS 中运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T07:59:32.653

“*如果可以读取地址栏 URL* ”

是的，可以使用：

```
import flash.external.*;
var curUrl:String =  String( ExternalInterface.call(" function(){ return document.location.href.toString();}")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T10:03:45.757

由于您似乎在使用 Flex，因此不需要 JavaScript 注入。您可以使用[IBrowserManager](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/managers/IBrowserManager.html)访问此信息：

```
var url:String = BrowserManager.getInstance().url; 
```

这个界面提供了很多与浏览器交互的其他可能性，您可以在[docs](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/managers/IBrowserManager.html)中阅读。

# android - Android sdk 2.3.3 E/MediaPlayer(334): error (1, -2147483648) when Turkish chars used in setDataSource

> ID：13265007
> 
> 赞同：1
> 
> 时间：2012-11-07T07:26:42.717
> 
> 标签：android, media-player, error-code, turkish

In my program, I used url in mediaplayer's datasource. If url does not contain any turkish chars, it works normally. However, if it contains turkish chars, following error occurs:

E/MediaPlayer(334): error (1, -2147483648)

In the Url, turkish chars are used in the parameter part

Same error occurs when I use encoded Url, but same url is working correctly in mozilla

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:05:25.747

Try this

```
 mediaPlayer.setDataSource(URLEncoder.encode(yourSongURL,"UTF-8")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T07:19:32.267

instead of setting a URL as a datasource, I create a sound file (with HttpUrlConnection, I got the inputstream and wrote it in a file) and set it as datasource.

# c# - 拉伸 WrapGrid 项目宽度

> ID：13265015
> 
> 赞同：5
> 
> 时间：2012-11-07T07:27:24.030
> 
> 标签：c#, xaml, windows-8, microsoft-metro, windows-runtime

我正在使用`WrapGrid`as `itemscontrol`in a`ListView`以使用以下 XAML 代码 (WinRT) 水平呈现项目

```
<ItemsPanelTemplate >
    <WrapGrid x:Name="ContentGrid" MinWidth="200" MinHeight="0" VerticalAlignment="Top"   HorizontalAlignment="Center"   Orientation="Horizontal" Margin="0,0,0,5" >                                     
    </WrapGrid>
</ItemsPanelTemplate> 
```

现在，当宽度大于并且不能水平添加更多项目时，我如何**水平拉伸项目。**`MinWidth`（所有项目都对齐中心，水平两侧有很多空间）

```
<DataTemplate x:Key="CustomChildItemTemplete">
   <Grid Background="Red">
   </Grid>
</DataTemplate > 
```

**更多详细信息：** 当`listview`宽度约为 800（大约）时，它显示 4 个水平项目（最小项目宽度为 200），但如果宽度为 900（4 个项目可见）并且空白区域（50 像素）位于左右，`itemscontrol`我如何通过增加项目宽度来删除这个空白空间（当`listview`宽度为 900 时，项目宽度必须为 225）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T09:05:59.887

最简单的方法是像这样绑定`MinWidth`：

```
<ItemsControl x:Name="MyItemsControl">
  <ItemsPanelTemplate >
      <WrapGrid x:Name="ContentGrid" MinWidth="{Binding Path=Width,  MinWidth="{Binding RelativeSource={RelativeSource Mode=Self}, Converter={StaticRessource Myconverter}, ConverterParameter=[Here Nb of object that you want in one line]}" MinHeight="0" VerticalAlignment="Top"   HorizontalAlignment="Center"   Orientation="Horizontal" Margin="0,0,0,5" >                                     
      </WrapGrid>
  </ItemsPanelTemplate>
</ItemsControl> 
```

转换器只需将 itemsControl 的宽度除以参数（一行中您想要的对象的 Nb）。所以对象会自动达到你想要的大小！

# java - 我的 Web 服务器似乎没有正确回复请求

> ID：13265016
> 
> 赞同：0
> 
> 时间：2012-11-07T07:27:34.673
> 
> 标签：java, http, webserver

我用java开发了一个轻量级的web服务器（非常轻量级），他的目的主要是流音频。

在网页上，我有一个简单的 html5 音频标签。当我在浏览器中加载页面时，浏览器对音频文件发出 GET 请求，它工作正常。但是当我暂停/播放或搜索时，浏览器会在 X 字节处发出带有 Range 条件的请求

```
GET /audio/3f6dbbd6adcb5eb4ea4cd981f30a6c409727bbf202367df18d4dd1a91a959fdb HTTP/1.1
Host: localhost:8888
Connection: keep-alive
Accept-Encoding: identity;q=1, *;q=0
User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.16 (KHTML, like Gecko) Chrome/24.0.1304.0 Safari/537.16
Accept: */*
Referer: http://localhost:8888/stream/3f6dbbd6adcb5eb4ea4cd981f30a6c409727bbf202367df18d4dd1a91a959fdb
Accept-Language: en-US,en;q=0.8,fr;q=0.6
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Range: bytes=360448- 
```

我让我的服务器回复了一个 206 Partial Content 条件：

```
HTTP/1.1 206 Partial Content
Date : Wed Nov 07 08:07:32 CET 2012
Content-Length:11126914
Content-Range: bytes 360448-11487361
Accept-Ranges: bytes
Content-Type : audio/mpeg 
```

当然是从 360448 字节开始的二进制数据，但是浏览器似乎不喜欢它，当我在浏览器上观看网络数据时，它甚至似乎都没有得到回复（连接被标记为已取消） .

我试图观察 apache 服务器会发生什么，但这有点困难，因为浏览器总是使用 200（缓存），这意味着它使用 mp3 的缓存版本，因此没有对服务器的请求。

我尝试作弊并使用另一个响应号，例如 200 甚至 304（某些服务器似乎使用它），但这里没有运气。

在这个过程中我做错了什么？如果需要，我可以提供更多日志

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T07:34:16.147

根据[http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.16](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.16)，标题应该是

```
Content-Range: bytes 360448-11487361/11487362 
```

`11487362`是文件的完整大小，`11487361`是最后一个从 0 开始的字节偏移量。

# jquery - jquery html 标记验证器

> ID：13265018
> 
> 赞同：0
> 
> 时间：2012-11-07T07:27:35.060
> 
> 标签：jquery, html, markup, validation

我正在尝试找到一个可以验证 html 标记的 jquery 插件（它检查 html 标记是否正确）。

这就是我打算如何工作。

我在 textarea 中输入 html 字符串，jquery 插件必须验证标签是否完整。

它必须报告是否缺少任何结束标签等

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:40:24.053

试试下面的链接：

[http://www.w3avenue.com/2010/01/04/list-of-free-web-based-html-editors-for-your-cms-project/](http://www.w3avenue.com/2010/01/04/list-of-free-web-based-html-editors-for-your-cms-project/)

靠近页面底部：http: [//markitup.jaysalvat.com/home/](http://markitup.jaysalvat.com/home/)

# knockout.js - Ko 模板与 for each 在循环中重复相同的下拉

> ID：13265023
> 
> 赞同：2
> 
> 时间：2012-11-07T07:27:57.823
> 
> 标签：knockout.js

`data-bind ="foreach :list"` 我想在with ko中放置相同的下拉列表。我没有得到可能的解决方案。我可以得到相同的示例代码吗？

例如，我在人（收藏）中有 5 个名字，比如

```
<select data-bind="for-each:people", optionText:'Name' , value = 'Id'> </select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T07:37:39.200

正如我从您的问题中了解到的那样，您的结构类似于

```
<div data-bind="foreach:list">
   .....
   <select data-bind="for-each:people", optionText:'Name' , value = 'Id'> </select>
   .....
</div> 
```

并且每个都`item of list`包含一个属性`people`，它是一个 (Observables)Array。比你应该试试这个

```
<select data-bind="options:people, optionsText:'Name', optionsValue:'Id'"></select> 
```

# php - 在我的网站中将另一个网站显示到 div 中

> ID：13265024
> 
> 赞同：2
> 
> 时间：2012-11-07T07:28:14.187
> 
> 标签：php, google-maps, iframe, popup

我正在使用以下代码在弹出窗口中显示地图。但是地图没有显示在弹出窗口中。[如果我使用http://www.w3schools.com](http://www.w3schools.com)而不是[http://maps.google.co.uk/?q=USA](http://maps.google.co.uk/?q=USA)，它可以正常工作。请大家帮忙。

```
<?php
    echo "<div id='login-box' class='login-popup'>
            <a href='#' class='close'><img src='binc/close_pop.png' class='btn_close' title='Close Window' alt='Close' /></a><br>

    <iframe src='http://maps.google.co.uk/?q=USA'></iframe></div>";

    <a class='login-window' style='color: #0000FF;font: 14px Helvetica;' href='#login-box'>USA</a>

    ?> 
```

包括脚本 jquery-1.6.4.js

```
<script>
$(document).ready(function() {
    $('a.login-window').click(function() {

                //Getting the variable's value from a link 
        var loginBox = $(this).attr('href');

        //Fade in the Popup
        $(loginBox).fadeIn(300);

        //Set the center alignment padding + border see css style
        var popMargTop = ($(loginBox).height() + 24) / 2; 
        var popMargLeft = ($(loginBox).width() + 24) / 2; 

        $(loginBox).css({ 
            'margin-top' : -popMargTop,
            'margin-left' : -popMargLeft
        });

        // Add the mask to body
        $('body').append('<div id="mask"></div>');
        $('#mask').fadeIn(300);

        return false;
    });

    // When clicking on the button close or the mask layer the popup closed
    $('a.close, #mask').live('click', function() { 
      $('#mask , .login-popup').fadeOut(300 , function() {
        $('#mask').remove();  
    }); 
    return false;
    });
});

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T08:15:39.880

谷歌可能会从 iframe 中破坏他们的正常页面，或者至少检查它们的存在并拒绝功能（尽管我无法直接在 maps.google.com 源中找到它，但话又说回来......它一团糟:)） .

Maps.google.com 本身在 maps.google.com 上提供 iframe 嵌入源（按“链接”图标（链接链图标））。

对于您的具体情况，iframe 源将是：

```
<iframe width="425" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="http://maps.google.co.uk/?q=USA&amp;ie=UTF8&amp;hq=&amp;hnear=Verenigde+Staten&amp;t=m&amp;z=4&amp;ll=37.09024,-95.712891&amp;output=embed"></iframe><br /><small><a href="http://maps.google.co.uk/?q=USA&amp;ie=UTF8&amp;hq=&amp;hnear=Verenigde+Staten&amp;t=m&amp;z=4&amp;ll=37.09024,-95.712891&amp;source=embed" style="color:#0000FF;text-align:left">Grotere kaart weergeven</a></small> 
```

试试看。也许这会解决你的问题。

（我刚刚注意到 iframe 源使用荷兰语文本“Grotere kaart weergeven”，意思是“显示完整地图”。根据需要替换）

# mysql - 优化 MySQL 慢计数查询和按天分组

> ID：13265025
> 
> 赞同：3
> 
> 时间：2012-11-07T07:28:16.530
> 
> 标签：mysql, count, query-optimization

我正在以下 MySQL MyISAM 表中跟踪网站上的点击：

```
CREATE TABLE `track_hits` (
  `hit_id` int(10) unsigned NOT NULL auto_increment,
  `referer` varchar(255) default NULL,
  `referer_checksum` int(10) default NULL,
  `domain_checksum` int(10) default NULL,
  `referer_local` enum('Yes','No') default NULL,
  `request` varchar(255) default NULL,
  `request_checksum` int(10) default NULL,
  `embed_id` int(10) unsigned default NULL,
  `embed_user_id` int(10) unsigned default NULL,
  `embed_campaign_id` int(10) unsigned default NULL,
  `date` datetime default NULL,
  `day_checksum` int(10) default NULL,
  `visit_id` int(10) unsigned default NULL,
  PRIMARY KEY  (`hit_id`),
  KEY `referer_checksum` (`referer_checksum`),
  KEY `date` (`date`),
  KEY `visit_id` (`visit_id`),
  KEY `embed_user_id` (`embed_user_id`),
  KEY `embed_campaign_id` (`embed_campaign_id`),
  KEY `day_checksum` (`day_checksum`),
  KEY `domain_checksum` (`domain_checksum`),
  KEY `embed_id` (`embed_id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

该表中有超过 500 万行。

我希望在特定日期范围内每天`visit_id`每个广告系列 ( )的总点击次数和唯一用户总数（基于不同的）。`embed_campaign_id`我正在用这个查询来做这件事：

```
SELECT COUNT(DISTINCT h.`visit_id`) AS `visits`, COUNT(h.`hit_id`) AS `hits`, `date`
FROM (`track_hits` h)
WHERE `h`.`embed_campaign_id` = '31'
AND `h`.`date` >= '2012-10-07 07:00:00'
AND `h`.`date` <= '2012-11-07 07:59:59'
GROUP BY `h`.`day_checksum` 
```

运行大约需要 15-25 秒。

`day_checksum`是日期的 crc32 编码版本，即“2012-11-07”。我已经用没有增加速度替换`GROUP BY`了`DATE(h.date)`。

解释返回：

```
id  select_type table   type    possible_keys           key                 key_len     ref     rows        extra
1   SIMPLE      h       ref     date,embed_campaign_id  embed_campaign_id   5           const   1648683     Using where; Using filesort 
```

我考虑过每天使用汇总表，但是该站点已本地化，并且数据库中的所有日期都以 GMT 为单位。因此，10/07 @ 7PM EST 到 11/07 @7PM EST 将需要返回与 10/07 @ 7PM PST 到 11/07 @7PM PST 不同的计数。

有什么办法可以加快速度吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T08:17:39.837

每列都有一个索引。我认为您可以使用复合（多列）索引获得更好的性能。

[http://dev.mysql.com/doc/refman/5.0/en/multiple-column-indexes.html](http://dev.mysql.com/doc/refman/5.0/en/multiple-column-indexes.html)

像这样的东西：

```
KEY compositeIndex (embed_campaign_id, date, day_checksum, visit_id, hit_id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T08:13:27.853

只是一些疯狂的猜测：

*   做一个`anaylize table`
*   将引擎更改为 InnoDB
*   `date`is not in `group by`，要么完全忽略它，要么将其替换为 ，`day_checksum`要么将两者都更改为`date(date)`
*   去掉周围的牙套`from (track_hits h)`
*   确保，不是硬件，这是瓶颈

最后，每天一次 15-25 秒的等待时间并不长。

# asp.net-mvc - 部署脚本

> ID：13265026
> 
> 赞同：0
> 
> 时间：2012-11-07T07:28:37.803
> 
> 标签：asp.net-mvc, database

我已经使用数据库项目创建了部署脚本。我还在我的 sql 中创建了空数据库并运行了该脚本进行检查。该脚本已成功执行，但是当我看到数据库时，没有创建表。所以知道如何使用脚本以及未创建表的原因是什么。

# sql-server - SQL 在 Like 命令中传递值

> ID：13265039
> 
> 赞同：1
> 
> 时间：2012-11-07T07:29:18.567
> 
> 标签：sql-server

> **可能重复：**
> [在 SQL LIKE 语句中使用变量](https://stackoverflow.com/questions/390362/using-variable-in-sql-like-statement)

我希望它是这样的，它没关系..

```
Declare @modCode varchar(3)
SET @modCOde = 'SOR';

Select dbo.ApplyModuleCode(@modCode, Num) 
From Doc_SalesOrder 
Where Num not LIKE @modCOde 
```

但我想像这样使用它。

```
Declare @modCode varchar(3)
SET @modCOde = 'SOR';

Select dbo.ApplyModuleCode(@modCode, Num) 
From Doc_SalesOrder 
Where Num not LIKE %@modCOde% 
```

我怎样才能达到我想要的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T07:33:16.873

这行得通吗？

```
DECLARE @modCode VARCHAR(3)
SET @modCOde = 'SOR';

SELECT dbo.ApplyModuleCode(@modCode, Num) 
FROM Doc_SalesOrder 
WHERE Num NOT LIKE '%' + @modCOde + '%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T07:32:14.340

```
DECLARE @modCode varchar(5)
SET @modCOde = '%SOR%';
SELECT dbo.ApplyModuleCode(@modCode,Num) 
      FROM Doc_SalesOrder 
      WHERE Num not LIKE @modCOde 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T07:35:21.390

试试这个

```
 DECLARE @modCode VARCHAR(3)
    SET @modCOde = 'SOR';

    SELECT dbo.ApplyModuleCode(@modCode, Num) FROM Doc_SalesOrder WHERE
 Num NOT LIKE '%' + @modCOde + '%' 
```

# vb.net - 如何使用 VB.NET 将数据从一个 sql server 数据库导入到另一个数据库

> ID：13265042
> 
> 赞同：1
> 
> 时间：2012-11-07T07:29:38.837
> 
> 标签：vb.net, sql-server-2008, import

我一直在使用 VB.NET 和 SQL Server 2008 开发应用程序。已经开发了一个软件并处于运行模式，现在我必须开发用户可以在该软件上添加一条记录并将相同记录添加到我的数据库中的工具表也​​。

为此，我必须编写一些代码，以便在我的应用程序中打开特定屏幕/页面时，它将检查该软件上的数据库表，并发现是否有任何新条目/记录也会出现在我的应用程序屏幕中。

简而言之，我必须使用 VB.NET 代码将数据库表中的记录从一个数据库导入另一个数据库。

请指教。

任何人都可以请帮助我吗？

# php - 如何在php中生成一个矩形和一个在矩形中对齐的文本中心？（不是文本框）

> ID：13265044
> 
> 赞同：0
> 
> 时间：2012-11-07T07:29:45.963
> 
> 标签：php, rectangles

我正在尝试创建一个函数来生成一个带有一些文本的矩形。

我有以下功能：

```
<?php
function  create_image()
{
 $im = @imagecreate(190, 190)or die("Cannot Initialize new GD image stream");
 $background_color = imagecolorallocate($im, 255, 255, 255);
 imagerectangle($im, 5, 5, $_SESSION['lungime'], 5+$_SESSION['latime'], $black);

 for ($i=1, $k=0; $i<=$_SESSION['rand'] ; $i++, $k=$k+12)
 imagettftext($im, 12, 0,5+x/2-(strlen($_SESSION['rand'.$i]))/2, 12+$k, $black, $_SESSION['fontr'.$i], $_SESSION['rand'.$i]);

 imagepng($im,"image.png");
 imagedestroy($im);
}
?> 
```

我希望在 for 循环中生成的文本在矩形中居中。我不能用 strlen 来做，因为它返回字符串的字符数。我怎么能这样做？

在生成的圆圈中生成居中对齐的文本怎么样？

请帮我 ！谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T07:41:24.553

您可以使用 PHP 的 imagettfbbox 来获取您在 GD 中打印的文本的尺寸。然后只需一点数学就可以确定将左点设置在哪里。

# c++ - 无法在 python 中加载 c++ DLL

> ID：13265046
> 
> 赞同：8
> 
> 时间：2012-11-07T07:30:14.723
> 
> 标签：c++, python, dll

我正在尝试`.dll`在 Python 中使用 C++，但我什至无法加载它。我正在尝试以下 python 代码来加载它：

```
from ctypes import cdll
mydll = cdll.LoadLibrary('SORT_DLL.dll') 
```

但是当我尝试运行它时，我得到：

```
D:\...\src\SORT_DLL\Debug>UseDll.py
Traceback (most recent call last):
  File "D:\...\src\SORT_DLL\Debug\UseDll.py", line 2, in
 <module>
    mydll = cdll.LoadLibrary('SORT_DLL.dll')
  File "C:\Python27\lib\ctypes\__init__.py", line 443, in LoadLibrary
    return self._dlltype(name)
  File "C:\Python27\lib\ctypes\__init__.py", line 365, in __init__
    self._handle = _dlopen(self._name, mode)
WindowsError: [Error 193] %1 ist keine zulõssige Win32-Anwendung 
```

最后一句用英语表示“%1 不是有效的 Win32 应用程序”。

[我已经在http://docs.python.org/2/library/ctypes.html#module-ctypes](http://docs.python.org/2/library/ctypes.html#module-ctypes)上查看了它，但这并没有解决我的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T11:30:54.323

听起来您安装了不兼容的 Python 版本，或者使用错误的设置编译了 DLL。DLL 和 Python 解释器都必须是 32 位或 64 位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T07:46:35.580

参考这个答案： [https ://stackoverflow.com/a/10163943/953887](https://stackoverflow.com/a/10163943/953887)

“ctypes 不适用于编写 [DLL] 示例的 C++。”

# c# - MVC 4.0 将模型属性分配给 jQuery 变量

> ID：13265047
> 
> 赞同：-1
> 
> 时间：2012-11-07T07:30:15.947
> 
> 标签：c#, jquery, asp.net-mvc-4

如果可能，请在此处提供帮助或以其他方式建议我

C#代码如下

```
 public ActionResult Create()
 {
        var newCircuit = new CircuitViewModel();
        newCircuit.Workouts = _db.Workouts.ToList();
        newCircuit.MemberId = _memberId;
        return View(newCircuit);
} 
```

在 cshtml 页面上的代码是

```
@Html.DropDownList("ddlWorkout", new SelectList(Model.Workouts, "Id", "Name"), "--Select Workout--", new { required = true, style = "width:310px", onchange = "GetExercise(this)" }) 
```

jQuery代码如下：

```
function GetExercise() {     
    var Workouts = @Model.Workouts
    var AllExercises = Workouts[0].Exercises; 
} 
```

基本上在模型中我有锻炼，并且在每次锻炼下都有多个锻炼，所以当我选择锻炼时，我想显示所有锻炼，如果我选择另一个锻炼，那么它的相关锻炼，等等......

所以基本上我想`@Model.Workouts`在 jQuery Workouts 变量中设置。但上面的 jQuery 代码对我不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T07:50:55.030

根据你的例子使用这个：

```
@Html.DropDownList("ddlWorkout", new SelectList(Model.Workouts, "Id", "Name"), "--Select Workout--", new { required = true, style = "width:310px", onchange = "GetExercise($(this))" })

function GetExercise($(this)) {     
var Workouts = $(this.val())
var AllExercises = Workouts[0].Exercises; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-04T07:49:31.453

从上面我了解到，您需要 Js 中的锻炼 ID 下拉列表，以便您可以根据锻炼 ID 绑定锻炼结果。这样做：

```
@Html.DropDownList("ddlWorkout", new SelectList(Model.Workouts, "Id", "Name"), "--Select Workout--", new { required = true, style = "width:310px", onchange = "GetExercise(this)" })
function GetExercise(obj) {     
    // First i'm checking whether user has selected any value in dropdown or not
    if(obj!="" || obj.val()>0)
    {
        var Workouts = obj.val(); //Will have dropdown value
        var AllExercises = Workouts[0].Exercises; //This line i did not get
    } 
} 
```

或者这样做

```
//Set id from dropdown
@Html.DropDownList("ddlWorkout", new SelectList(Model.Workouts, "Id", "Name"), "--Select Workout--", new { required = true, style = "width:310px", @id= "ddlWorkout" })

$(function() {   
    $("#ddlWorkout").change(function() {
         var obj = $("#ddlWorkout").val();
        // First i'm checking whether user has selected any value in dropdown or not
        if(obj != "" || obj>0)
        {
            var Workouts = obj.val(); //Will have dropdown value
           var AllExercises = //Pass Exercise id to get result here
    } 
} 
```

# google-chrome - 为 chrome 扩展构建 UI 以显示后台脚本的结果

> ID：13265049
> 
> 赞同：1
> 
> 时间：2012-11-07T07:30:17.680
> 
> 标签：google-chrome, google-chrome-extension

以下是我的 manifest.json 文件

```
{
    "name": "Demo Extension",
    "version": "1.0.0",
    "manifest_version": 2,
    "browser_action": {
    "default_icon": "icon.png"
    },

    "background": {
    "scripts": ["jquery-1.7.2.js","code.js"]
    },

    "content_scripts": [
        {
            "matches": ["*://*/*"],
            "js": ["jquery-1.7.2.js","content.js"],
            "css": ["panel.css"],
            "run_at": "document_end"
        }
    ],

    "permissions": [
        "webRequest",
        "tabs",
        "http://*/*",
        "https://*/*",
    ]
} 
```

我的主要扩展逻辑在 code.js 文件中，甚至结果也在那里可用。现在我必须将这些结果显示在一个表格中给用户。你会建议我做什么。

我不知道该怎么做。只是我知道我必须构建一个 UI 并将我的表格显示在上面。

提前谢谢大家:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T09:35:08.000

您可以为您的 UI 创建一个专用页面，例如，为其命名`ui.html`。然后你可以在需要的时候打开它，如下所示：

```
chrome.tabs.create({url:chrome.extension.getURL("ui.html")}); 
```

在页面中，您可以创建任意 UI，并用适当的数据填充它，您可以直接从后台页面请求这些数据（假设在`youMethodHere`此处定义了方法）：

```
chrome.extension.getBackgroundPage().youMethodHere(); 
```

此`ui.html`页面将显示在单独的选项卡中。您还可以选择创建一个弹出页面（呈现相同的 UI），用户可以通过单击浏览器操作按钮打开该页面。只需添加到您的清单：

```
"browser_action":
{
  "default_title":"some title",
  "default_icon":"some_icon.png",
  "popup":"ui.html"
} 
```

# html - BlackBerry WebWorks 中的屏幕分辨率

> ID：13265052
> 
> 赞同：0
> 
> 时间：2012-11-07T07:30:33.890
> 
> 标签：html, blackberry, browser, blackberry-webworks

我是 webworks 和整个 BlackBerry Development 的新手，我有一个关于它的问题。我将为 Torch 手机开发我的应用程序。据我所知，手电筒系列有 3 或 4 种不同的屏幕分辨率。但是纵横比保持不变。

所以，问题来了：我应该如何处理我的 html 页面的布局。我应该通过使用 %'s instad 的 px's 来使其灵活，还是应该选择最小的屏幕分辨率，而分辨率更大的手电筒手机会自动使其适合？RIM 对此有任何解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:30:53.213

您可以使用 CSS 中的媒体查询，例如 torch 9800

@media screen and (min-width: 360px) and (max-width: 480px) { … }

您可以在 html5 中将这些功能用于开发人员应用程序的媒体查询

检查此[文档](http://www.w3.org/TR/css3-mediaqueries/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T17:56:39.933

我建议使用这样的 META 视口：

```
<meta name="viewport" content="user-scalable=no,initial-scale=1.0"> 
```

对于 Torch 设备，您可能还需要包含该`target-densitydpi=device-dpi`属性，该属性允许 Web 引擎将内容缩放到当前屏幕分辨率。

这是我为演示视口编写的示例。尝试在您的设备上加载它以查看内容的呈现方式：http: [//blackberry.github.com/WebWorks-Samples/kitchenSink/html/browser/viewport/viewport.html](http://blackberry.github.com/WebWorks-Samples/kitchenSink/html/browser/viewport/viewport.html)

示例还包括 targetdensity 属性的示例页面：http: [//blackberry.github.com/WebWorks-Samples/kitchenSink/html/browser/viewport/densitydpi.html](http://blackberry.github.com/WebWorks-Samples/kitchenSink/html/browser/viewport/densitydpi.html)

# c# - 后台工作者与线程

> ID：13265053
> 
> 赞同：1
> 
> 时间：2012-11-07T07:30:34.120
> 
> 标签：c#, multithreading

对于 C# 4.0 windows 应用程序中的长时间运行任务（异步）。

选择是：

1.  BackgroundWorker（线程池）

2.  线

以上两个建议用于长时间运行的任务（整个应用程序生命周期）。还有其他选择吗？此外，

*   **BackgroundWorker** - 使用 ThreadPool 线程和 UI 更新的长时间运行进程。

*   **线程**- 用户定义的线程（线程创建开销等）和长时间运行的进程（可以使用优先级）

    哪个是最好的选择

    1.  如果不需要 UI 更新、优先级和线程（仅在应用程序/进程启动时创建）？

    2.  如果任务数量增加？（线程池饥饿的护理）

还有什么有趣的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T07:39:10.057

> 对于 C# 4.0 windows 应用程序中的长时间运行任务（异步）。

您可能会使用带有 LongRunning 选项的任务 (TPL)。TPL 也在 ThreadPool 之上运行，但该选项可以使其保留一个线程。

> 如果任务数量增加？（线程池饥饿的护理）

ThreadPool 将尝试动态适应，您可以选择帮助它一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T07:45:54.430

BackgroundWorker 也使用线程，但只是抽象了一些线程创建和监控细节。

因此，通过使用 BackgroundWorker 您可以避免；- 必须处理细节 - 创建新线程的高成本（+性能）

仅当您需要在其他异步任务结束之前运行另一个异步任务时，才会发生 ThreadPool 饥饿。您在这里无能为力，因为 CPU 已经满负荷运行。

我不会直接使用 Thread 的。如果您对提供的 ThreadPool 不满意，也许您可​​以尝试自己实现一个（最好不要这样做，只是开玩笑）。

# cakephp - cakephp在方法get上预填表格

> ID：13265057
> 
> 赞同：4
> 
> 时间：2012-11-07T07:30:41.880
> 
> 标签：cakephp

我有一个搜索表单，我正在使用 GET 方法提交它。表单提交后，我需要用提交的值预先填写表单。如果是 POST，cake 会自动处理这个问题，但它不适用于 GET。我使用 cakephp 的表单助手创建了表单和表单控件。是否有任何简单的方法来预先填写字段而不是手动设置每个字段？我正在使用 cakephp2.x

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T04:05:06.037

我知道这个问题是不久前被问到的，但我最近遇到了同样的问题。

当你使用 GET 时，`CakeRequest`不会填充`CakeRequest::data`属性。表单助手通常使用此属性来填充输入的值。因此，您必须首先在控制器中的某处用您的 GET 数据填充此属性。例如：

```
$this->request->data = $this->request->query; 
```

您的下一个问题是，如果您使用 GET，Form Helper 会忽略您为表单设置的模型。不幸的是，这种行为没有记录在案，但确实提到[了这一点](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html)：

> 您也可以通过`false`. `$model`这会将您的表单数据放入数组：（`$this->request->data`而不是子数组：）`$this->request->data['Model']`。这对于可能不代表数据库中任何内容的简短表单非常方便。

因此，您需要在`false`创建搜索表单时将模型设置为。例如：

```
echo $this->Form->create(false, array('type' => 'get')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-31T02:43:44.947

对于 CakePHP 3，您可以像这样简单地创建表单：

```
echo $this->Form->create($user); 
```

而不是在控制器操作中只需将 $user 设置为实体

```
$user = $this->Users->get($id); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-07T08:06:23.933

您可以通过在控制器中填充`$this->request->data`属性来做到这一点。

例如，假设你有这个作为你的表单：

```
 <?= $this->Form->create('Search'); ?>
 <?= $this->Form->input('query'); ?>
 <?= $this->Form->end(); ?> 
```

然后在您的控制器操作中使用：

```
 $this->request->data('Search.query', 'search data'); 
```

# objective-c - nsmutuable 数组作为参数

> ID：13265065
> 
> 赞同：0
> 
> 时间：2012-11-07T07:31:17.927
> 
> 标签：objective-c

我试图理解一些我认为我知道的东西。

如果在 A 类我做：

```
-(NSMutableArray*)setArray:(NSMutableArray*) array1
{
//some calculations on array 1
  return array1.
} 
```

比`classB`我：

```
 ClassA *instanceA = [[ClassA alloc]init] ;
 ClassC *instanceC = [[ClassC alloc]init] ;
 [instanceC sendArray:[instanceA setArray:someArray] ]; //some array allocated in b
 [instanceA release];
 //in ClassC i have defined  arrayC ,that gets array as a pointer from classB 
```

array1`ClassC`在我发布后是否仍然有效`instanceA ?`

对数组 in 所做的每一次更改都会`ClassB`对 arrayC 进行吗？

这是正确的工作方式吗？我的目标是控制`arrayC`in`ClassC`所以我所做的每一个更改都`ClassB`将适用于 C 中的那个，并且不会因为某些`autorelease`.

用财产做这件事会更好吗？如何 ？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T10:40:04.873

在我发布 instanceA 后，array1 在 ClassC 中是否仍然有效？由于 array1 未在 A 类中分配，并且如果在 A 类中我们没有向 array1 发送释放消息，则 array1 将不会被释放，并且在释放实例 A 后将有效。

对 ClassB 中的数组所做的每一次更改都会对 arrayC 进行吗？由于 ClassB 和 ClassC 指的是相同的数组，因此对数组所做的更改会反映在两个类中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T09:38:25.447

这个问题有点不清楚，所以我猜测你想要理解的内容。

您问“对 ClassB 中的数组所做的每项更改是否也会对 arrayC 进行？”

答案是 B 类或 C 类都没有数组，而是它们都有对数组的*引用*。现在，如果 B 类和 C 类都持有相同的引用，那么通过 B 类中的该引用进行的更改在 C 类中通过它的引用可见 - 因为它们都引用同一个数组。复制引用不会复制数组、创建新数组或类似的东西，它只是复制引用。

如果这仍然令人困惑，请将数组引用视为房屋的地址。您可以在任意多的纸上写下房子的地址，然后将它们传递给任意数量的人，如果每个人都阅读了纸并前往该地址，他们最终都会在同一个房子里。如果其中一个人打破了房子里的一扇窗户，那么所有其他人都会看到破窗户 - 只有一所房子。

HTH，我没有回答完全错误的问题！

# javascript - 从ajax响应对象多次替换一个单词？

> ID：13265067
> 
> 赞同：1
> 
> 时间：2012-11-07T07:31:45.307
> 
> 标签：javascript, ajax, jquery

我有一个 ajax 响应对象说'var data;' .
它包含html内容。
其中有 id='table123' 的表。
我想在变量“数据”中用该表中的“样本”形式替换单词“样本”。
我想使用 javascript 或 jquery 替换所有出现的单词“sample”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T07:32:52.990

您可以使用 javascript[**替换**](http://www.w3schools.com/jsref/jsref_replace.asp)mathod，

```
data.replace(/sample/g, "SAMPLE"); 
```

**由于 OP 的变化而更新**

```
var data = $(data);
changedHtml = data.find('#table123').html().replace(/sample/g, "SAMPLE");
data.find('#table123').html(changedHtml); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T07:58:21.807

先创建表格，然后替换文本。

```
// used "#id" for illustration purposes
$("#id").append( data ); 

var el = $('#table123');
var txt = el.html( el.html().replace(/sample/g, 'SAMPLE') ); 
```

关于 $(data) 的使用，[jQuery 文档](http://api.jquery.com/jQuery/)说明了以下关于将字符串传递给 jQuery()

> 如果字符串看起来是一个 HTML 片段，jQuery 会尝试按照 HTML 的描述创建新的 DOM 元素。

因此，您不妨先创建元素，然后再替换。

# gcc - 是否可以在 gcc 中将多个模块组合成一个模块？

> ID：13265068
> 
> 赞同：0
> 
> 时间：2012-11-07T07:31:57.390
> 
> 标签：gcc, module

说我有`a.o`并且`b.o`我想将它们组合成`c.o`

在makefilw中我写道：

```
gcc a.o b.o -o c.o 
```

但得到了错误：

```
undefined reference to `main' 
```

为什么会发生这种情况，正确的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T10:08:56.577

我相信您正在尝试创建（静态）*库*或*存档*。例如在[http://www.adp-gmbh.ch/cpp/gcc/create_lib.html](http://www.adp-gmbh.ch/cpp/gcc/create_lib.html)或尝试输入`man ar`你的 shell :)

# php - 在 PDO 中通过 MySQL 命令传递 PHP Session 变量

> ID：13265072
> 
> 赞同：0
> 
> 时间：2012-11-07T07:32:04.880
> 
> 标签：php, mysql, pdo, parameter-passing, session-variables

我在 PHP 中有以下代码。我正在尝试将会话变量中的登录值传递到数据库中的 SELECT 命令中。这 ？表示在会话中创建的登录。：

```
try {    
    $conn = new PDO(A_DB_HOST, A_DB_USER, A_DB_PASSWORD);
    $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
} catch (PDOException $e) {
    echo 'Connection failed: ' . $e->getMessage();
}
$member['login'] = $_SESSION['SESS_login'];
$qry=$conn->prepare("SELECT * FROM {?}_clients WHERE login=?");
$qry->bindParam(1, $_SESSION['SESS_login']);
$qry->execute(); 
```

目前，我收到以下错误：

> 致命错误：未捕获的异常“PDOException”和消息“SQLSTATE [HY093]：无效的参数号：绑定变量的数量与 /home/content/14/9957114/html/agent-member-index.php 中的令牌数量不匹配” :15 堆栈跟踪：#0 /home/content/14/9957114/html/agent-member-index.php(15): PDOStatement->execute() #1 {main} 抛出 /home/content/14/9957114 /html/agent-member-index.php 第 15 行

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T07:36:03.677

1.  您不能将值绑定到表名等标识符，只能绑定到*values*。
2.  您在该查询中有两个`?`占位符，但只绑定一个值。

# facebook - wget 到 https://graph.facebook.com/cocacola 错误连接超时

> ID：13265080
> 
> 赞同：1
> 
> 时间：2012-11-07T07:32:36.437
> 
> 标签：facebook, facebook-graph-api, user-interface

当我尝试在我的盒子中 wget 时出现以下错误：

```
wget https://graph.facebook.com/cocacola
--2012-11-07 14:01:27--  https://graph.facebook.com/cocacola
Resolving graph.facebook.com... 69.171.234.22, 2a03:2880:10:8f01:face:b00c:0:26
Connecting to graph.facebook.com|69.171.234.22|:443... failed: Connection timed out 
```

怎么了？https 端口在我的防火墙中打开。

```
ACCEPT     tcp  --  anywhere             anywhere   
state NEW tcp dpt:https 
```

有人可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T13:50:32.793

它应该可以工作，因为它只是返回 JSON 并且不需要访问令牌

```
wget --no-check-certificate https://graph.facebook.com/cocacola 
```

# php - 使用太多 if 块好？有哪些可能的选择？

> ID：13265093
> 
> 赞同：-1
> 
> 时间：2012-11-07T07:33:32.007
> 
> 标签：php, performance

我最近一直在用 PHP 设计一个购物网站。现在在结帐页面中，我必须多次检查用户是否已登录。即，如果用户已登录，则*隐藏 Signin div*并*显示 Shipping div*。

```
<section class="panels <?php if(!isset($_SESSION['username'])) echo"unactivepanel"; else echo"activepanel";?>" id="Sign In">
        <div class="wrapper1" >
            <ul>
            <li><input type="email" placeholder="Enter your email address" required/></li>
            <li class="inf">(will only be used for sending you order information.)</li>
            <fieldset><legend class="orb"> OR</legend>
            <li><input type="button" value="Sign In to booksmore" class="sb si llb" /></li></fieldset>
            <fieldset><legend class="orb"> OR</legend>
            <li>Sign In using any of following service:</li>
            <li>
                <div class="box1 fc">Facebook</div>
                <div class="box1 tw">Twitter</div>
                <div class="box1 gg">Google</div>
                <div class="box1 oi">Open Id</div>
            </li></fieldset>

            </ul>
        </div>
    </section>
    <section class="panels <?php if(!isset($_SESSION['username'])) echo"unactivepanel"; else echo"activepanel";?>unactivepanel" id="Shipping"></section>
    <section class="panels unactivepanel" id="Confirm"></section> 
```

我研究的是使用太多**if**块会减慢执行速度，那么我使用太多**if**块是否正确？如果我没有正确编码（*我现在的感觉），那么***if**块的可能替代方案是什么？（我正在考虑使用**switch**块。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T07:38:45.700

如果您在每个地方都使用相同的 if else，您可以轻松地进行重构。

```
<?php 
if(!isset($_SESSION['username'])) 
 $class = "unactivepanel"; 
else 
 $class = "activepanel";
?> 
```

现在只需在需要的地方做 echo $class ，比如

```
 <section class="panels <?php echo $class;?>unactivepanel" id="Shipping"></section> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T07:41:43.590

塔伦是对的。此外，只有当您有多个可能的代码块都依赖于单个变量的值时，switch case 才会对您有所帮助。在您的情况下，一个 swtich 块将毫无意义。

# java - 获取 JPA 实体版本的通用方法

> ID：13265094
> 
> 赞同：2
> 
> 时间：2012-11-07T07:33:33.383
> 
> 标签：java, jpa, metamodel

我有一个未知的 JPA 实体，需要知道它的版本。我找不到一般的方法来做到这一点。

我尝试了元模型，但不知道将什么传递给 getVersion() 方法：

```
Object entity = ...;
Metamodel metamodel = entityManager.getMetamodel();
IdentifiableType<?> metaClass = 
    (IdentifiableType<?>)metamodel.managedType(entity.getClass());
metaClass.getVersion(<what to put here?>); 
```

中使用了相同的模式`metaClass.getId()`，但有一种补充方法`getIdType()`——`getVersionType()`缺失。

其次，有`entityManagerFactory.getPersistenceUnitUtil().getIdentifier(entity)`方法，但没有`getVersion(entity)`方法。

有没有办法从未知实体获取版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-07T17:01:28.383

比 try/catch 的答案更简洁：

```
public static SingularAttribute<?, ?> getVersionAttribute(ManagedType<?> managedType) {
    if (!(managedType instanceof IdentifiableType<?>))
        return null;

    IdentifiableType<?> identifiableType = (IdentifiableType<?>)managedType;
    if (!identifiableType.hasVersionAttribute())
        return null;

    for (SingularAttribute<?, ?> attribute : identifiableType.getSingularAttributes()) {
        if (attribute.isVersion())
            return attribute;
    }
    return null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T07:52:00.093

恕我直言，您应该将使用 @Version 注释注释的字段类型放在该类中。我认为这也适用于继承，开箱即用。

如果您事先不知道类型，我会使用标准反射。我将遍历所有[声明的字段](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getDeclaredFields%28%29)，并[检查注释](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Field.html#getAnnotation%28java.lang.Class%29)是否包含 @Version 注释。如果没有找到，[检查 superclass](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getSuperclass%28%29)，直到找到...

```
public static Field getVersionField(Object entity) {
    Class<?> myClass = entity.getClass();
    do {
        Field[] fields = myClass.getDeclaredFields();
        for(Field field:fields) {
            if(field.getAnnotation(Version.class)!=null) {
                return field;
            }
        }
    } while((myClass=myClass.getSuperclass())!=null);
    return null;
} 
```

**当心**虽然[Class.getFields()](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getFields%28%29)似乎是一个更好的选择，因为它只返回公共字段，但它不起作用：

> 返回一个包含 Field 对象的数组，该数组反映了此 Class 对象表示的类或接口的所有**可访问公共字段**。

**编辑**以上仅适用于在字段上严格使用@Version 注释的情况。然而，正如 Konstantin Pribluda 指出的那样，这个注释也可以放在方法上，这意味着两件事：

*   方法也必须检查
*   接口也必须检查，因为方法可以由接口定义......

这也意味着我们的简单循环必须转化为递归图遍历......

```
public static Method getVersionMethod(Class<?> myClass) {
    Method[] methods = myClass.getDeclaredMethods();
    for(Method method : methods) {
        if(method.getAnnotation(Version.class)!=null) {
            return method;
        }
    }

    if(myClass.getSuperclass()!=null) {
        Class<?> returned = getVersionMethod(myClass.getSuperclass());
        if(returned!=null) {
            return returned;
        }
    }

    for(Class<?> interfaceToCheck : myClass.getInterfaces()) {
        Class<?> returned = getVersionMethod(interfaceToCheck);
        if(returned!=null) {
            return returned;
        }
    }

    return null;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T09:19:30.707

我错过了什么吗？我将通过在公开版本字段的可版本化实体上实现一个接口来解决此问题。无需反思。

但这是假设您当然可以修改实体类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T14:35:34.357

如果您使用的是 EclipseLink，则可以使用以下方式获取版本，

```
Session session = em.unwrap(Session.class);
session.getDescriptor(Employee.class).getOptimisticLockingPolicy().getWriteLockValue(object, id, session); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-07T15:24:21.880

我通过以下方式解决了它：`javax.persistence.Version`该类指定了支持的数据类型，仅支持七种，因此我一个接一个地尝试所有这些。JPA 规范显然错过了该`getVersionType()`方法，我认为这是一个错误。

```
/**
 * Finds the version attribute for ManagedType instance.
 * @param managedType The metaobject
 * @return The version attribute or null, if it does not have one
 * @throws UnsupportedOperationException
 * If it has a version attribute, but is not one of supported types, as specified in {@link Version} documentation
 * (currently int, Integer, short, Short, long, Long, Timestamp).
 */
private static <T> SingularAttribute<? super T, ?> findVersionAttribute(ManagedType<T> managedType) {
    if ( !(managedType instanceof IdentifiableType))
        return null;

    IdentifiableType<T> identifiableType = (IdentifiableType<T>)managedType;
    if ( ! identifiableType.hasVersionAttribute())
        return null;

    try {
        return identifiableType.getVersion(int.class);
    } catch (IllegalArgumentException e) {
        try {
            return identifiableType.getVersion(Integer.class);
        } catch (IllegalArgumentException e1) {
            try {
                return identifiableType.getVersion(long.class);
            } catch (IllegalArgumentException e2) {
                try {
                    return identifiableType.getVersion(Long.class);
                } catch (IllegalArgumentException e3) {
                    try {
                        return identifiableType.getVersion(short.class);
                    } catch (IllegalArgumentException e4) {
                        try {
                            return identifiableType.getVersion(Short.class);
                        } catch (IllegalArgumentException e5) {
                            try {
                                return identifiableType.getVersion(Timestamp.class);
                            } catch (IllegalArgumentException e6) {
                                throw new UnsupportedOperationException("The version attribute is not of supported type");
                            }
                        }
                    }
                }
            }
        }
    }
} 
```

# oracle - Oracle 存储过程返回结果集

> ID：13265098
> 
> 赞同：0
> 
> 时间：2012-11-07T07:33:45.453
> 
> 标签：oracle, plsql, oracle11g

我对 Oracle 完全陌生，我需要编写一个返回结果集的存储过程。将使用链接服务器从 SQL Server 调用存储过程。我知道我可以使用 ref 游标从 PL/SQL 服务器返回结果集，但我也看到存储过程返回某种数组（例如声明为数字表），然后将其与结果一起返回。哪种方法是正确的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T01:00:29.340

经过对 Oracle 论坛的一些调查和我自己的测试...... Ref Cursor 是合适的方式。使用 oracle oledb 提供程序时，关联阵列将无法正常工作。

# c++ - 带有 Realtek ALC888 的活动耳机插孔 (Windows XP)

> ID：13265101
> 
> 赞同：9
> 
> 时间：2012-11-07T07:34:02.003
> 
> 标签：c++, audio, windows-xp, headphones

如何检测 Realtek ALC888 上插入/移除的事件耳机插孔？

是否有任何 SDK 或库？

全球问题：如何在 Windows XP 下检测到同样的事件？全球答案：不存在通用解决方案。但是，瑞昱音响知道。如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T10:42:59.543

在 Windows XP 上，有一个旧功能

```
waveInGetNumDevs(void) 
```

除非插入耳机插孔，否则应该返回 0。无论如何，确切的行为取决于实际的硬件驱动程序。另请参阅：http: [//msdn.microsoft.com/en-us/library/ms713732%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms713732%28VS.85%29.aspx)

有一些声卡不起作用，但是如果驱动程序附带一个实用程序，该实用程序在将某些东西插入耳机插孔时启动（即，某些卡具有耳机/麦克风的共享插孔，如果您插入设备，它询问您刚刚插入的设备类型）——而不是您可以编写自己的“检测应用程序”，它以某种方式报告（即套接字、管道、共享内存）是否插入了主应用程序。通常在驱动程序安装目录中有一个 exe 文件 - 你可以简单地用你的“检测应用程序”替换它，如果以这种方式自动插入某些东西，它就会启动。

恐怕，除了这两个“解决方案”（或第二个更好的解决方法）之外，Windows XP 无法检测设备是否已插入耳机插孔。不过，在 Windows Vista 和更新版本上，这些事件有一个名为[IKsJackDescription](http://msdn.microsoft.com/en-us/library/ms679023%28VS.85%29.aspx "IKsJack描述")的新接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T15:48:45.580

也可能会触发 WM_DEVICECHANG。

# javascript - 在网格内设置文本框值

> ID：13265103
> 
> 赞同：1
> 
> 时间：2012-11-07T07:34:10.767
> 
> 标签：javascript, asp.net

任何人都知道编辑模式打开时如何在网格内设置值文本框？1\. 我有文本框名称聚合： 2\. 当编辑模式通过按钮打开时，我只想为那些文本框设置一些值。所以我有按钮： 3\. 我需要在 javascript ex setValue() 中定义这些代码：

```
function setValue() {
    var grid = $('<%=gvVariableConfig.ClientID%>');
    ........(what i need to do is here, anyone help)
    }
-----------------------------------------------------------------------------
    <asp:TemplateField HeaderText="Aggregation" ItemStyle-HorizontalAlign="Left" HeaderStyle-Width="5%" ItemStyle-Width="5%">
                            <EditItemTemplate>
                                <asp:TextBox ID="txtAggregation" runat="server" Text='<%# Bind("AGGREGATION") %>' Width="91%">
                                </asp:TextBox>
                                <asp:Label ID="lblAggregation" runat="server" Text='<%# Bind("AGGREGATION") %>' Visible="false">
                                </asp:Label>

                            </EditItemTemplate>
                            <ItemTemplate>
                                <asp:Label ID="lblAggregation" runat="server" Text='<%# Bind("AGGREGATION") %>'>
                                </asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>

----------------------------------------------------------------------------   

    <button type="button" style="width: 100%;" onclick="setValue()"> Assign to Aggregation</button> 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T08:42:43.143

我想我找到了一些线索来解决它，但我不知道在编辑模式下获取行索引....这就是我为特定单元格设置值的方法：

```
var grid = document.getElementById('<%=gvVariableConfig.ClientID%>');
              var val = grid.rows[2].cells[6];
              val.textContent = "tes"; 
```

所以我现在的问题是在编辑模式下获取哪些行用户。单元格索引可以设置为静态，因为不同的按钮分配给不同的单元格。所以希望有人可以对编辑模式下的行索引提出一些建议。

# php - phpmyadmin 无法导出程序

> ID：13265104
> 
> 赞同：10
> 
> 时间：2012-11-07T07:34:13.900
> 
> 标签：php, mysql, phpmyadmin

当我使用 phpMyAdmin 导出 MySQL 数据库时，它会完美地导出所有表数据，但无法`PROCEDURES`正确导出。我得到的是：

```
DELIMITER $$
--
-- Procedures
--
DROP PROCEDURE IF EXISTS `sp_users_get`$$
$$

DROP PROCEDURE IF EXISTS `sp_users_save`$$
$$ 
```

应该有更多的代码

```
CREATE PROCEDURE `sp_user_get`...... 
```

直到程序结束。

谁能帮我从 phpMyAdmin 成功导出数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T23:14:32.467

我建议使用 adminer ( [http://www.adminer.org/](http://www.adminer.org/) ) 作为 phpmyadmin 的替代方案。Phpmyadmin 已经变得非常脏，而且经常出现问题、速度慢、嘿嘿；您甚至可以通过管理员获得更小的转储！

界面很简陋，但是一旦你习惯了它就会很棒。我的 2c :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T12:53:37.200

好吧，我没有发现任何有用的东西。phpMyAdmin 中似乎存在错误。第二天我试图访问它并向我展示了程序。我不确定发生了什么，但可能是因为我变了`delimiter`

# gmail - 使用 Unity 进行 Gmail 身份验证

> ID：13265108
> 
> 赞同：1
> 
> 时间：2012-11-07T07:34:39.137
> 
> 标签：gmail, unity3d

我正在尝试将 Oauth - Google 与 Unity 集成到我的 WebPlayer 平台游戏中。

Unity 是否允许通过 HttpWebRequest 访问网络，因为它是 webplayer ？

一个 JS\HTML 身份验证会与用户信息的统一通信是更好的方法吗？

关于如何做到这一点的任何指示？

# terminal - 阻止错误消息出现在终端中

> ID：13265115
> 
> 赞同：1
> 
> 时间：2012-11-07T07:35:17.850
> 
> 标签：terminal, vlc, suppress-warnings

我正在终端中执行一个命令

```
cvlc song.amr 
```

问题是虽然正在播放歌曲，但在执行指令后我收到了一些消息。消息是

```
VLC media player 1.1.9 The Luggage (revision exported)
Blocked: call to unsetenv("DBUS_ACTIVATION_ADDRESS")
Blocked: call to unsetenv("DBUS_ACTIVATION_BUS_TYPE")
[0x85de7cc] dummy interface: using the dummy interface module... 
```

谁能告诉我如何阻止此消息的出现。就像在 gcc 中一样，当我们不希望出现警告消息时，我们通过给出一个选项来指示它

```
cc -w program.c 
```

无论如何，我可以通过它阻止该消息的出现。还是说解决这个问题是阻止它出现的唯一方法。那怎么解决。或者我可以将这些消息保存在其他文件中并阻止它进入终端，就像我们如何在终端中使用这个“>”重定向运算符将输出存储在其他地方一样。

请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T07:51:17.867

这行得通吗？`cvlc song.amr &> /dev/null`? 否则，您建议的命令行选项是特定于程序的，我不知道 abt cvlc 的选项，也许您可​​以尝试`cvlc -h`看看它是否具有静默模式

# card.io - 我可以使用 card.io 获取信用卡扫描图像吗

> ID：13265117
> 
> 赞同：3
> 
> 时间：2012-11-07T07:35:26.943
> 
> 标签：card.io

我刚刚将 card.io SDK 与我的应用程序集成，我只是想保存扫描的信用卡图像以便稍后在我的应用程序中显示它们，就像其他钱包应用程序一样。有什么办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T17:56:01.623

来自 card.io 的 Josh 在这里。[card.io 是开源](https://github.com/card-io/card.io-iOS-source)的，因此您可以四处挖掘并弄清楚如何获取图像。

但是，出于充分的原因，默认情况下它是隐藏的。一是用户隐私。另一个是 PCI 合规性——CVV2 位于 AmEx 卡的正面，不允许存储 CVV2（任何地方，无论是否安全）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-20T06:18:38.200

card.io 代码不支持它，但如果你真的需要它，你可以在 CardIOActivity.java 的 onActivityResult 中添加以下代码

```
 /* added image response */
        Intent origIntent = getIntent();
        Log.d(TAG, "[IMGCAP] Return image on scan request");
        if (origIntent.getBooleanExtra(EXTRA_RETURN_CARD_IMAGE, false)
              && mOverlay != null && mOverlay.getBitmap() != null) {

            ByteArrayOutputStream scaledCardBytes = new ByteArrayOutputStream();
            Log.d(TAG, "[IMGCAP] Attempting return of image");
            mOverlay.getBitmap().compress(Bitmap.CompressFormat.JPEG, 80, scaledCardBytes);
            data.putExtra(EXTRA_CAPTURED_CARD_IMAGE, scaledCardBytes.toByteArray());
        }
        Log.d(TAG, "[IMGCAP] Set result with return image");
        /************************************/

        setResultAndFinish(resultCode, data); 
```

就在您看到发回活动结果的呼叫之前。您可以在呼叫活动中接收。但正如上面的答案中提到的，它不建议捕获卡图像。对于非金融卡，您只能调用检测和抑制扫描，如果您启用 EXTRA_RETURN_CARD_IMAGE，您将获得该图像。

# azure - Azure 示例应用程序

> ID：13265118
> 
> 赞同：2
> 
> 时间：2012-11-07T07:35:34.197
> 
> 标签：azure, azure-storage, azure-table-storage

我正在运行一个 azure 存储程序。

[https://www.windowsazure.com/en-us/develop/nodejs/tutorials/web-site-with-storage/](https://www.windowsazure.com/en-us/develop/nodejs/tutorials/web-site-with-storage/)

当我运行应用程序时，我收到一个错误：

```
C:\node\Azuretablestorage2\models\task.js:16
        throw error;
              ^
ReferenceError: error is not defined
    at tableCreated (C:\node\Azuretablestorage2\models\task.js:16:15)
    at C:\node\Azuretablestorage2\node_modules\azure\lib\services\table\tableservice.js:268:5
    at C:\node\Azuretablestorage2\node_modules\azure\lib\services\table\tableservice.js:235:7
    at C:\node\Azuretablestorage2\node_modules\azure\lib\services\core\serviceclient.js:534:11
    at C:\node\Azuretablestorage2\node_modules\azure\lib\services\table\tableservice.js:238:5
    at Request._callback (C:\node\Azuretablestorage2\node_modules\azure\lib\services\core\serviceclient.js:197
    at C:\node\Azuretablestorage2\node_modules\azure\node_modules\request\main.js:122:22
    at Request.<anonymous> (native) 
```

从代码中可以看出：

```
 this.storageClient.createTableIfNotExists(tableName, 
    function tableCreated(err) {
      if(err) {
        throw error; 
```

我安装了 azure 但仍然收到此错误..任何建议可能是此错误的原因

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T08:11:02.143

看起来那个代码是错误的。它可能应该读为`throw err;`. 一旦你抛出真正的错误，你将能够看到问题是什么（为什么你首先会得到一个错误。）

# java - 为什么我的动作监听器没有被调用

> ID：13265119
> 
> 赞同：1
> 
> 时间：2012-11-07T07:35:46.337
> 
> 标签：java, jsf-2, primefaces

我有一个 PrimeFaces 对话框，我在其中询问用户详细信息。我将其简化为只有一个输入文本，如下所示。

```
<p:dialog>
        <h:form  prependId="false">
            <p:growl showDetail="false" autoUpdate="true"  life="4000"/>
            <p:panelGrid columns="2">
                <h:outputText value="First Name" />
                <p:inputTextarea  required="true" requiredMessage="First Name is required!" />
                <p:commandButton value="Add" actionListener="#{myBean.addUser}"/>
            </p:panelGrid>
        </h:form>
</p:dialog> 
```

我注意到当我不输入我的名字时，我的动作监听器没有被调用，我认为这是正常的，因为`required="true"`验证已经发生。

有没有办法配置这个，我的动作监听器仍然会被调用？还是我必须删除`required="true"`检查并将所有验证放在我的动作侦听器方法中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T07:52:09.753

您不应该将验证逻辑放入操作方法中。

如果您需要进行比所需检查更多的验证，请为此使用自定义验证器。action 方法应该简单地添加用户并且应该依赖于 jsf 验证阶段。

有关更多信息，请参阅[有关不同验证选项](http://www.mkyong.com/jsf2/custom-validator-in-jsf-2-0/)的此链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T07:54:12.413

如果您想调用您的`actionListener`方法，而不管`<p:inputTextarea/>`删除的值如何，`required="true"`并在您的操作方法中进行验证：

```
 public void addUser() {

       if(StringUtils.isBlank(user.firstName)) {
           FacesContext.getCurrentInstance().addMessage(null,
                new FacesMessage(FacesMessage.SEVERITY_ERROR, "Error! ",
                "First Name is required!"));
           return;
       }
   } 
```

*isBlank from import org.apache.commons.lang3.StringUtils;*

无关：

在我看来，这种方法似乎是一个坏主意。

# python - python 3中的类列表

> ID：13265120
> 
> 赞同：0
> 
> 时间：2012-11-07T07:36:00.690
> 
> 标签：python, class

我们可以在 C 中执行如下操作：

```
struct teams {
char team_name[100];
int team_point[100];

}

struct teams teams1[100]; 
```

我们以这种方式获得结构数组，在 Python 中是否有可能？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T08:40:40.953

```
class Team(object):
    def __init__(self, name, points):
        self.name = name
        self.points = points

teams = []
teams.append(Team('Chicago Bulls', [85, 75, 93, 10])) 
```

由于 Python 是动态的，因此没有什么可以阻止您为对象属性分配任意值（对象实例的行为大多类似于命名空间），但是缺少一个对类型不匹配大喊大叫的迂腐编译器有一些优势。

# php - 从 Wordpress 网站下载 word 文档时弹出 Window Security

> ID：13265126
> 
> 赞同：1
> 
> 时间：2012-11-07T07:36:17.113
> 
> 标签：php, wordpress, internet-explorer-9, download

我有一个 wordpress 网站，它提供了一个 word 文档的下载链接。当用户单击 IE-9 中的下载链接时，会向用户显示一个 windows 安全弹出窗口。它在所有其他浏览器中都能正常工作。

我做了一些搜索，发现这是由于 IE-9 中的一些安全设置。有什么办法可以克服这个设置，因为所有用户大多都会有这个安全设置？

**更新**仅当用户选择打开时才会出现此问题。如果用户从“保存”对话框中选择“保存”或“另存为”选项，它可以正常工作。

这是安全弹出窗口

![在此处输入图像描述](../Images/b31056478f1d19d17008086513dc919e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T19:59:44.230

如果您正在运行 IIS，此答案提供了服务器端修复。问题是当用户尝试通过 IE9 打开 Word 文档时会出现安全弹出窗口，而不是直接下载它。

> ...我们在 IIS7 上进行了设置，并选择禁用“WebDAV”（所有更新都是通过上传文件完成的）。为此，请打开 IIS7，选择服务器或站点，然后单击“请求过滤”。行动 - 拒绝动词...并输入 PROPFIND。为 OPTIONS 创建另一个。我发现服务器不需要重新启动，并且立即修复。希望这对某人有用。-斯图尔特

来自 Moodle 论坛的感谢 Stuart： [https ://moodle.org/mod/forum/discuss.php?d=143111](https://moodle.org/mod/forum/discuss.php?d=143111)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:18:55.697

解决了这个问题。Internet Explorer 无法正确处理 word 文件，因此我实现了一个 PHP 脚本来显式下载文件并且它可以正常工作

# android - “添加到主屏幕”如何打开没有浏览器组件的网页？

> ID：13265128
> 
> 赞同：0
> 
> 时间：2012-11-07T07:36:34.050
> 
> 标签：android, iphone, ios, mobile

我遇到了一些奇怪的事情。

如果您进入此链接：[http](http://www.pointer4u.co.il/ifleet) ://www.pointer4u.co.il/ifleet 并将其添加到主屏幕，当您打开应用程序时，它不会打开浏览器，而是像真正的原生应用程序一样打开它，我发现这对于分发内部应用程序来说是惊人的。

现在这个 web 应用程序（当添加到主屏幕时）不仅隐藏了 UI 组件，而且在加载它时会显示一个加载屏幕，而不是常规的浏览器加载显示。

你可以在[这里找到另一个例子](http://www.mavenlink.com/community/blogs/785-add-to-home-screen-for-iphone-ios-and-android)

他们是怎么做到的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T08:15:34.483

```
 //this is the key for hiding Safari's Top Bar and bottom bar when launch from Home screen short cut. 
  //If this is no, following three lines has no effect.
  <meta name="apple-mobile-web-app-capable" content="yes" />

  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <link rel="apple-touch-startup-image" href="URL_TO/320_460_loading.png" />
  <link rel="apple-touch-startup-image" sizes="640x960" href="URL_TO/640_920_loading.png" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T07:49:15.907

复制自 Steve Jorgensen 在[Hiding Safari User Interface Components on iPhone](https://stackoverflow.com/questions/273671/hiding-safari-user-interface-components-on-iphone)中的回答：

```
window.top.scrollTo(0, 1); 
```

适用于 iPhone，但不适用于 iPad。我已经成功地通过使用

```
<meta name="apple-mobile-web-app-capable" content="yes" /> 
```

并从主屏幕链接启动。我也在使用

```
<meta name="viewport" 
    content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" /> 
```

如果我忽略视口属性，我还没有尝试查看浏览器组件是否仍然隐藏。

# php - 在浏览器中将 base_64 字符串下载为 png

> ID：13265131
> 
> 赞同：0
> 
> 时间：2012-11-07T07:36:55.367
> 
> 标签：php, javascript, png, base64

我编辑了一个 png 图像，在上面放了一些文字，然后显示为

```
<?php    
ob_start();
imagepng($img, NULL);
$rawImageBytes = ob_get_clean();
imagedestroy($img);
echo "<img id='ca_image' src='data:image/png;base64," . base64_encode($rawImageBytes)     . "' />";

?>
<a href="#" onclick="return download();">Download</a>
<script>
function download(){
var img =document.getElementById("ca_image").src;
var url = img.replace(/^data:image\/[^;]/, 'data:application/octet-stream');
location.href = url;
</script> 
```

当我更改文件的内容类型时，浏览器会自动弹出窗口下载，但下载的文件类型是 PART 。我想将 base_64 下载为 png 文件。这种方法有可能吗？这是将文件另存为png的正确方法吗？如果不是请提出解决我问题的正确方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T07:23:24.577

我把它解决为

```
 <input name="string" type="hidden" value="<?php echo base64_encode($rawImageBytes) ?>"/> 
```

并在 php

```
$base64strImg=$_REQUEST['string']; 
 header('Content-Disposition: attachment;filename="test.png"');
header('Content-Type: application/force-download'); 
echo base64_decode($base64strImg); 
```

它会产生一些问题吗？因为没有检查字符串。

# tabs - Prestashop 产品编辑页面新标签模块

> ID：13265133
> 
> 赞同：2
> 
> 时间：2012-11-07T07:36:59.217
> 
> 标签：tabs, product, prestashop

我正在创建模块以将其他选项卡添加到名为“说明”的编辑产品页面中。我已经覆盖了 AdminProductsController，但是我的 tab tpl 文件有问题，我不知道如何按模块安装它。它必须像“SEO”选项卡等。你能帮我吗？我正在使用 1.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-28T09:02:30.490

我认为有一个名为“displayAdminProductsExtra”的钩子，您可以在添加/编辑产品时显示任何字段，保存产品后，您可以将此钩子称为“actionProductAdd”

# json - 反序列化后如何迭代json？

> ID：13265136
> 
> 赞同：1
> 
> 时间：2012-11-07T07:37:37.620
> 
> 标签：json, struts2, deserialization

在我的应用程序中，我使用 ajax 将 json 数组从 jsp 传递到 action cals。在动作类中，我正在获取 json 并使用以下代码对其进行反序列化。

我在人员列表中获取哈希图。如何获取人员列表中的各个条目？

```
String personList = request.getParameter("PersonCollections");
List<Person> persons = (List<Person>) JSONUtil
            .deserialize(personList); 
```

# python - 在上一行添加一个分号

> ID：13265138
> 
> 赞同：0
> 
> 时间：2012-11-07T07:37:39.763
> 
> 标签：python

我有一个像这个注释间隙代表新行的文件。

```
Hello World )
    ;

Hello World ) ;

Hello World )
; 
```

我写了一个小python脚本来将分号移动到上一行的末尾

```
with open(path) as f:
    prev_line =''
    for current_line in f:
        matched = re.match('[^(.+)];',current_line,re.MULTILINE)
        if matched is not None:
            current_line = re.sub('[^(.+)];','',current_line,re.MULTILINE)
            prev_line = re.sub(r'^(.+)$',r'\1 ;',prev_line,re.MULTILINE)
        print prev_line.strip()
        prev_line = current_line.strip() 
```

除了缺少分号的最后一行之外，我得到了预期的输出

```
Hello World ) ;

Hello World ) ;

Hello World ) **semicolon is missing here** 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T07:44:20.680

您应该尝试使用`\s*`：

```
>>> import re 
>>> s = '''Hello World )   
...         ;'''
>>> re.sub(r'\s*;', ';', s)
'Hello World );' 
```

`\s*;`匹配任意数量的空格（包括换行符），后跟分号。

此外，`re.sub()`适用于该模式的任意数量的实例，因此您可以执行以下操作：

```
with open(path) as f:
    fixed = re.sub(r'\s*;', ';', f.read()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T07:46:26.283

```
with open('path/to/file') as infile:
    lines = infile.readlines()

if lines[-1].strip() == ';':
    lines.pop()
if lines[-1].strip()[-1] != ';'
    lines[-1] = lines[-1].rstrip() + ';'

with open('path/to/file', 'w') as outfile:
    outfile.write(''.join(lines)) 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T07:55:57.773

如果分号总是在它自己的行上，你应该能够通过遍历文件来找到它，然后你可以将它添加到上一行的末尾，如下所示：

```
file = open(path, 'r')
lines = file.readlines()
for line in lines:
  if ';' in line:
    lines[lines.index(line)-1] += line
    lines.remove(line) 
```

脚注：不确定是否要保留“;”前面的空格。我只是把最简单的解决方案放在一起。

# php - php：CI 中的路由（Codeigniter）

> ID：13265140
> 
> 赞同：0
> 
> 时间：2012-11-07T07:37:41.683
> 
> 标签：php, codeigniter, url-routing

我真的很难理解 CI 中的 URL/URI 路由。在这种情况下，我有两个链接，一个是 Home，另一个是 Panel，Home 链接到 main/index 和 panel 链接到 main/panel，下面的代码片段可以更好地理解。

```
<a href="main/index"> Home </a>
<a href="main/panel"> Panel </a> 
```

这是控制器的代码`main.php`

```
class Main extends CI_Controller
{
    public function index()
    {
        $this->load->helper('url');
        $this->load->helper('form');
        $this->load->view('templates/header');
        $this->load->view('home');
        $this->load->view('templates/footer');
    }

    public function panel()
    {
        $this->load->helper('url');
        $this->load->helper('form');
        $this->load->view('templates/header');
        $this->load->view('panel');
        $this->load->view('templates/footer');
    }
} 
```

这是我的`routes (config/routes.php)`

```
$route['main/index'] = "main/index";
$route['main/panel'] = "main/panel";
$route['default_controller'] = "main/index"; 
```

在第一次运行时，它会自动转到主/索引，它工作正常，但是当我点击面板链接时它说**找不到对象**，所以没有找到主页链接**对象**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T08:03:57.467

首先，你最好在href中有相对于root的路径：

```
 <a href="/main/index"> Home </a>
   <a href="/main/panel"> Panel </a> 
```

或者，甚至更好的是：

```
 <a href="<?=$base_url;?>main/index"> Home </a>
   <a href="<?=$base_url;?>main/panel"> Panel </a> 
```

接下来是您正在加载的视图，正确的方法是在控制器功能中加载一个视图：

```
 $this->load->view('home'); 
```

在 home.php 中，您需要包含其他视图 home.php：

```
 <?php $this->load->view('templates/header');?>
   ...
   <!--YOUR HOME HTML GOES HERE-->
   ...
   <?php $this->load->view('templates/footer');?> 
```

现在路由。一定要使用 /index.php/[controller]/[function] 链接（除非你使用 url rewrite 像这里[http://ellislab.com/codeigniter/forums/viewthread/180566/](http://ellislab.com/codeigniter/forums/viewthread/180566/)）

路由配置：

```
 $route['default_controller'] = "main/index"; //this is the only thing you need to define 
```

毕竟您的所有页面都可以通过这样的 url 访问：

索引页面：[http](http://example.com/) ://example.com/ , [http://example.com/index.php/main/index](http://example.com/index.php/main/index)

面板页面：[http ://example.com/index.php/main/panel](http://example.com/index.php/main/panel)

# html - 溢出-x 不起作用

> ID：13265142
> 
> 赞同：1
> 
> 时间：2012-11-07T07:37:49.530
> 
> 标签：html, css, scroll

这是我的**代码**

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
  <title></title>
  <style type="text/css">
    .bigbox {
      width:1024px;
      height:600px;
      background-color:#000000;
      overflow-x:auto;
      overflow-y:hidden;
    }
    .box{
      width:500px;
      height:500px;
      float:left;
      background-color:#AAAAAA;
      margin:5px;
    }
  </style>
  </head>
  <body>
    <div class="bigbox">
      <div class="box"></div>
      <div class="box"></div>
      <div class="box"></div>
      <div class="box"></div>
      <div class="box"></div>
      <div class="box"></div>
    </div>
  </body>
</html> 
```

如何使所有**框**水平显示？

和**bigbox**有一个固定`scroll bar`的。`width`

我试图将宽度更改为 5000 像素，它可以工作，但宽度超出了框

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T07:55:33.183

***[演示](http://tinkerbin.com/okUVxFep)*** ——Jsfiddle***[演示](http://jsfiddle.net/rohitazad/Rkue9/)***

HI 现在添加一些**属性**

**像这样**

```
 .bigbox {
    white-space:nowrap;
    }
    .box{
    float:left;  // remove this line 
    display:inline-block;
    vertical-align:top;
    } 
```

***[现场演示](http://tinkerbin.com/okUVxFep)***

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T07:47:43.337

做你的`.box div` `display:inline-block;`

```
.bigbox {
      width:400px;
      height:600px;
      background-color:#000000;
      overflow-x:auto;
      overflow-y:hidden;
      white-space:nowrap;
    }
    .box{
      width:100px;
      height:100px;
      float:left;
      background-color:#AAAAAA;
      margin:5px;
    display:inline-block;
    }​ 
```

**[编辑演示](http://jsfiddle.net/WMzsu/3/)**

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-07T07:44:37.240

最好和最简单的方法（据我所知）是包装所有`.box`元素并将它们的父宽度定义为他所有孩子宽度的总和。

在您的代码示例中，它将是：

CSS：

```
.boxview {
    width: 3060px;
} 
```

HTML：

```
<div class="bigbox">
  <div class="boxview">
    <div class="box"></div>
    <div class="box"></div>
    <div class="box"></div>
    <div class="box"></div>
    <div class="box"></div>
    <div class="box"></div>
  </div>
</div> 
```

如果框的数量没有前缀，那么我建议您使用 JavaScript 动态设置`.boxview`宽度。

另请注意`overflow-x`，不适用于旧版浏览器（仅限 IE9+）。

您可能想`overflow: auto`在定义之前添加`overflow-x`并`overflow-y`作为后备。

**代码示例**：http: [//jsfiddle.net/zvs4H/1/](http://jsfiddle.net/zvs4H/1/)

# php - 在 Magento 中为自定义模块添加链接

> ID：13265143
> 
> 赞同：0
> 
> 时间：2012-11-07T07:37:55.160
> 
> 标签：php, xml, magento, magento-1.5

我正在为 magento 中的供应商创建一个模块。我想在供应商登录链接`top.links.`

如何添加链接？

另外，谁能告诉我像 `<customer_logged_out>`和`<customer_logged_in>`in这样的标签的含义`magento/app/design/frontend/base/default/layout/customer.xml`

因为我用过`<supplier_logged_in>`并且`<supplier_logged_out>`在

`magento/app/design/frontend/default/default/layout/supplier.xml`它不工作。

这是我文件中的示例代码

```
<supplier_logged_in>
    <reference name="top.links">
        <action method="addLink" translate="label title" module="supplier"><label>Log 11Out</label><url helper="customer/getLogoutUrl"/><title>Log Out</title><prepare/><urlParams/><position>100</position></action>
    </reference>
</supplier_logged_in> 
```

还有任何`<customer_logged_in>`文件参考以使其正常工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T21:18:29.603

以下是如何在顶部链接中添加自定义链接，更多信息可以在这里找到[http://www.classylama.com/development/magento-development/editing-magentos-top-links-the-better-way](http://www.classyllama.com/development/magento-development/editing-magentos-top-links-the-better-way)

```
<reference name="top.links">
                    <!-- Add custom links. Pretty self-explanatory.
                    Dig into app/code/core/Mage/Page/Block/Template/Links.php for more info -->
                    <action method="addLink" translate="label title">
                        <label>About Us</label>
                        <url>about</url>  <!-- can use full url also -->
                        <title>About Us</title>
                        <prepare>true</prepare> <!-- set true if adding base url param -->
                        <urlParams helper="core/url/getHomeUrl"/> <!-- base url - thanks @Russ! -->
                        <!-- there are a few param you can send to do different things in <urlParams> 
                                 dig into app/code/core/Mage/Core/Model/Url.php, around line 803 -->                   

                        <!-- below adds #add-fragment to the end of your url -->
                        <!-- <urlParams><_fragment>add-fragment</_fragment></urlParams> -->

                        <!-- below adds ?add-query to the end of your url -->
                        <!-- <urlParams><_query>add-fragment</_query></urlParams> -->

                        <!-- below gives you a new session id (i think...)-->
                        <!-- <urlParams><_nosid>true</_nosid></urlParams> -->

                        <!-- below replaces double quotes, single quotes, greater than, and less than signs 
                                 to their respective url escaped replacements (%22, %27, %3E, %3C) -->
                        <!-- <urlParams><_escape>i'm-a-blog-url</_escape></urlParams> -->

                        <position>1</position>
                        <liParams/>
                        <aParams>class="top-link-about-us"</aParams>
                        <beforeText></beforeText>
                        <afterText></afterText>
                    </action>
    </reference> 
```

您需要在`<default>`节点或内部添加上面的代码`<customer_logged_out>`或`<customer_logged_in>`（当客户在您的商店中登录或注销时，Magento 使用这两个句柄添加功能）。

```
//app/core/Mage/Core/Model/Layout/Update.php.
class Mage_Customer_Model_Observer
{
    public function beforeLoadLayout($observer)
    {
        $loggedIn = Mage::getSingleton('customer/session')->isLoggedIn();

        $observer->getEvent()->getLayout()->getUpdate()
           ->addHandle('customer_logged_'.($loggedIn?'in':'out'));
    }
} 
```

要在您的扩展中使用`<supplier_logged_in>`（如果需要），您首先需要在您的 Magento 自定义扩展中添加自定义布局句柄。要开始挖掘它，我推荐以下文章：

[http://magebase.com/magento-tutorials/creating-custom-layout-handles/](http://magebase.com/magento-tutorials/creating-custom-layout-handles/)

[http://www.classylama.com/magento/add-custom-layout-handles-eg-parent-categories](http://www.classyllama.com/magento/add-custom-layout-handles-e-g-parent-categories)

# mysql - 使用 Nihibernate 和系统动态 linq 进行查询

> ID：13265145
> 
> 赞同：1
> 
> 时间：2012-11-07T07:37:59.933
> 
> 标签：mysql, nhibernate, dynamic-linq

我正在尝试使用 system.dynamic.linq 创建动态排序。

这是我使用的查询：

```
var query = dalSession.Query<T>().AsQueryable();
var res = (from x in query orderby "x.FirstName" select x) 
```

这是mysql的输出：

```
select
     affiliate0_.id as id0_,
     affiliate0_.first_name as first6_0_,
from affiliate affiliate0_ order by 'x.FirstName' //FirstName as well 
```

所以你可以看到mysql查询的输出是直接字符串，而不是它的反射，（`'x.FirstName'`）或（`'FirstName'`）。
这在 mysql 上下文中没有任何意义，看起来我需要 order by `affiliate0_.first_name`。
无论如何要向 Nhibernate 提供成员本身吗？那么编译后的查询会正常完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T08:46:45.117

您必须从您的要求中删除 "。"x.FirstName" 被视为一个字符串并被转换为一个 sql 字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T06:47:44.110

您是否按照以下方式尝试过（如 Diego 建议的那样）？ `(from x in query select x).OrderBy("FirstName")`

因为我觉得你使用的时候动态linq orderby扩展方法没有执行`(x => "FirstName")`

否则试试这个： `(from x in query select x).OrderBy("it.FirstName")`

顺便说一句，我将 Dynamic.cs 中的 OrderBy 方法重命名为 DynamicOrderBy 因为在某些情况下也执行了非动态 linq OrderBy 方法：

`public static IQueryable<T> DynamicOrderBy<T>(this IQueryable<T> source, string ordering, params object[] values)`并改用那个：

`(from x in query select x).DynamicOrderBy("FirstName")`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T17:41:08.717

“x”在动态字符串中没有任何意义。

删除`x.`（即只留下“名字”），它应该可以工作。

使用方法调用而不是查询理解语法，您将获得：

```
var res = query.Orderby("FirstName") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T09:28:51.217

```
var param = Expression.Parameter("x");
var prop = Expression.Property(param, "FirstName");
var lambda = Expression.Lambda<Func<User, string>>(prop, param);
query.Orderby(lambda); 
```

# python-2.7 - 导入 scipy stats 模块以获得经验分布的期望值

> ID：13265146
> 
> 赞同：1
> 
> 时间：2012-11-07T07:38:01.993
> 
> 标签：python-2.7, scipy

我想将数据集列表中的每个成员都拟合到对数正态分布。然后，我想计算一个函数在每个分布上的期望值。我尝试了以下代码并收到以下错误。

**代码**

```
 from numpy import *
   from scipy.stats import lognorm
   dists = map(lognorm,data)
   expectations = [dist.expect(r_[1,1],zeros(40,)) for dist in dists] 
```

**错误**

```
 AttributeError: 'rv_frozen' object has no attribute 'expect' 
```

也许我正在错误地阅读[文档](http://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.lognorm.html)，但我认为它是一种可用于冻结发行版`expect`的方法。`lognormal`

从冻结分布中调用诸如“期望”之类的方法的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T15:28:57.970

见线程

[http://mail.scipy.org/pipermail/scipy-user/2012-August/032860.html](http://mail.scipy.org/pipermail/scipy-user/2012-August/032860.html)

`expect`尚未连接到冻结分布。要么使用未冻结的发行版，要么使用辅助函数，例如

```
def expect(X, f, lb, ub):
    if hasattr(X, 'dist'):
        return X.dist.expect(f, lb = lb, ub = ub)
    else:
        return X.expect(f, lb = lb, ub = ub) 
```

更新：

除了冻结分布的问题外，您还需要检查分布的方法。您需要使用`.fit(data, ...)`来估计参数。

您可以使用计算函数的期望值`expect`，签名在这里[http://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.rv_continuous.expect.html?highlight=expect#scipy.stats .rv_continuous.expect](http://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.rv_continuous.expect.html?highlight=expect#scipy.stats.rv_continuous.expect)

默认值`expect`是计算均值的恒等映射。但是您也可以使用`.mean`或`.stats`方法直接从分布中获取平均值。如果均值有明确的表达式，则可以避免积分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:39:21.803

如果您查看[Scjipy Frozen Object](http://www.scipy.org/doc/api_docs/SciPy.stats.distributions.rv_frozen.html)，您会发现这`expect`不是它的方法。

尝试 ：

```
 from numpy import *
 from scipy.stats import lognorm
 dists = map(lognorm,data)
 expectations = [ lognorm.expect(  func, s, loc  ) for dist in dists] 
```

（我不知道功能选项）

# iphone - 使用 RKObjectMapping 的嵌套映射

> ID：13265152
> 
> 赞同：0
> 
> 时间：2012-11-07T07:38:45.970
> 
> 标签：iphone, ios, xcode, restkit

我正在尝试使用 RKObjectMapping 执行对象映射。

这是我的 JSON 示例：

```
{
        "notification": {
            "created_at": "2012-10-23T02:43:43-04:00",
            "delivered": true,
            "id": 3915,
            "missed": false,
            "rejected": false,
            "search_request_id": 360,
            "bid": {
                "bid_type": "none",
                "bid_type_values": null,
                "comment": "hi\n",
                "created_at": "2012-10-23T02:43:54-04:00",
                "delivered": true,
                "delivery_type": "email",
                "id": 268,
                        "has_chat_session": true,
            },
            "search_request": {
                "created_at": "2012-10-23T02:43:42-04:00",
                "customer_id": 6,
                "id": 360,
                "latitude": "40.7536854",
                "location": "10001",
                "longitude": "-73.9991637",
            }
        } 
```

我已经使用 jsonlint 验证了 JSON，它是有效的。

这是我的映射。

```
 RKObjectMapping *bidMapping = [RKObjectMapping mappingForClass:[Bid class]]; 
    [bidMapping mapKeyPath:@"comment" toAttribute:@"comment"];
    [bidMapping mapKeyPath:@"chat_session_id" toAttribute:@"chatSessionId"];
    [objectManager.mappingProvider setMapping:bidMapping forKeyPath:@"bid"];

    RKObjectMapping *searchRequestMapping = [RKObjectMapping mappingForClass:[SearchRequest class]];
    [searchRequestMapping mapKeyPath:@"purpose" toAttribute:@"purpose"];
    [searchRequestMapping mapKeyPath:@"customer_Id" toAttribute:@"customerId"];
    [searchRequestMapping mapKeyPath:@"need" toAttribute:@"need"];
    [objectManager.mappingProvider setMapping:searchRequestMapping forKeyPath:@"search_request"];

    RKObjectMapping *notificationMapping = [RKObjectMapping mappingForClass:[Notification class]];  // have not mapped all the attributes.
    [notificationMapping mapKeyPath:@"id" toAttribute: @"notificationId"];
    [notificationMapping mapKeyPath:@"created_at" toAttribute:@"timestamp"];
    [notificationMapping mapKeyPath:@"vendor_id" toAttribute:@"vendorId"];
    [notificationMapping mapKeyPath:@"bid" toRelationship:@"bid" withMapping:bidMapping];
    [notificationMapping mapKeyPath:@"search_request" toRelationship:@"search_request" withMapping:notificationMapping]; 
    [objectManager.mappingProvider setMapping:notificationMapping forKeyPath:@"notification"]; 
```

当我尝试 loadObjectsAtResourcePath 时，程序因断言失败而崩溃，我无法调试该断言失败。我也尝试使用 rootKeyPaths 但无济于事。

有人可以帮我找出错误吗？

谢谢你！

ps：我想添加一个 NSDictionary 参数，文档说使用 appendQueryParams:params。但我收到警告说它已被弃用。我可以使用任何替代品吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T07:49:07.407

您在这里给出了错误的映射-

```
 [notificationMapping mapKeyPath:@"search_request" toRelationship:@"search_request" withMapping:notificationMapping]; 
```

你应该给 searchRequestMapping 喜欢-

```
 [notificationMapping mapKeyPath:@"search_request" toRelationship:@"search_request" withMapping:searchRequestMapping]; 
```

代替 appendQueryParams:params，您可以使用 RKClient 的方法以下方法-

```
- (RKRequest *)get:(NSString *)resourcePath queryParameters:(NSDictionary *)queryParameters delegate:(NSObject<RKRequestDelegate> *)delegate; 
```

# r - 如何在 R 中导入 CSV 文件？

> ID：13265153
> 
> 赞同：118
> 
> 时间：2012-11-07T07:38:45.590
> 
> 标签：r, csv, import

我的工作站中有一个`.csv`文件。如何在 R 中打开该文件并进行统计计算？

* * *

## 回答 #1

> 赞同：193
> 
> 时间：2012-11-07T07:40:02.397

您将使用该`read.csv`功能；例如：

```
dat = read.csv("spam.csv", header = TRUE) 
```

您还可以参考[本教程](http://www.cyclismo.org/tutorial/R/input.html#read)了解更多详细信息。

**注意：**确保`.csv`要读取的文件在您的工作目录中（使用 `getwd()`）或指定正确的文件路径。如果需要，可以使用[`setwd`](https://www.rdocumentation.org/packages/base/versions/3.4.3/topics/getwd).

# c++ - Boost：为什么 apply_visitor 在此代码中不起作用

> ID：13265156
> 
> 赞同：3
> 
> 时间：2012-11-07T07:38:53.450
> 
> 标签：c++, boost, apply-visitor, static-visitor

我收到以下编译器错误：

> /usr/include/boost/variant/variant.hpp:832:32: error: no match for call to '(const StartsWith) (bool&)'</p>

对于以下代码。有人知道为什么吗？

```
#include "boost/variant/variant.hpp"
#include "boost/variant/apply_visitor.hpp"

using namespace std;
using namespace boost;

typedef variant<bool, int, string, const char*> MyVariant;

class StartsWith
    : public boost::static_visitor<bool>
{
public:
    string mPrefix;
    bool operator()(string &other) const
    {
        return other.compare(0, mPrefix.length(), mPrefix);
    }
    StartsWith(string const& prefix):mPrefix(prefix){}
};

int main(int argc, char **argv) 
{
    MyVariant s1 = "hello world!";
    apply_visitor(StartsWith("hel"), s1); // << compiler error
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T07:43:20.800

您必须为在 中声明的每种类型提供运算符`MyVariant`。

# mysql - LEFT JOIN 2 表，但只会返回 Table2 中的第一条记录

> ID：13265160
> 
> 赞同：1
> 
> 时间：2012-11-07T07:38:59.460
> 
> 标签：mysql, sql, select, join, group-by

表格1

```
cid
itemdesc
itemprice 
```

表2

```
cid
imagename
status 
```

我的第一个表有唯一的 cid（没有重复）我希望它 LEFT JOIN TO table2 但它每个 cid 有多行

```
cid      imagename           status
1        image1-of-cid1      test1
1        image2-of-cid1      test2
2        image1-of-cid2      test3
2        image2-of-cid2      test4
2        image3-of-cid2      test5 
```

但我只希望查询只返回表 1 中每条记录的第一行

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T08:19:25.573

我同意 John Woo 上面的回答。您需要某种子查询来实际检索表 2 的第一行。例如：

```
SELECT
t1.[id],
t2.*
FROM table1 AS t1
LEFT JOIN table2 AS t2
    ON t2.cid = (SELECT TOP 1 cid FROM table2 WHERE cid = t1.cid) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T07:42:43.100

您需要创建一个额外的子查询，`imagename`每个 `cid`. 尝试这个，

```
SELECT  a.*, b.*
FROM    table1 a
        LEFT JOIN
        (
            SELECT  cid, MIN(imagename) minImage
            FROM table2
            GROUP BY cid
        ) c ON a.cid = c.cid 
        LEFT JOIN table2 b
            ON  c.cid = b.cid  AND
                b.imageName = c.minImage 
```

*   [***SQLFiddle 演示***](http://sqlfiddle.com/#!2/fc3d4/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T07:43:10.427

```
Select 
    distinct a.cid,a.itemdesc,b.imagename,a.itemprice,b.status
from table1 a,
table2 b
where a.cid=b.cid 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T08:45:30.833

尝试这个：

```
SELECT a.cid, a.itemdesc, a.itemprice, b.imagename, b.status 
FROM table1 a 
LEFT OUTER JOIN table2 AS b ON a.cid = b.cid 
GROUP BY a.cid, a.itemdesc, a.itemprice; 
```

# iphone - 具有透明背景的增强现实视频播放

> ID：13265161
> 
> 赞同：7
> 
> 时间：2012-11-07T07:39:06.113
> 
> 标签：iphone, ios, xcode, ipad, augmented-reality

我是增强现实的新手。我需要的是当我的 ipad 应用程序读取任何条形码时，它会播放透明[视频，例如](http://www.youtube.com/watch?v=juOPp21MnWI&feature=related). 我需要展示一个模态的时装秀。我的问题是什么框架为 AR 提供视频渲染。我怎样才能做到这一点。我已阅读以下框架。

1) ar.qualcomm.at 2) ARToolKit

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T13:46:24.467

您可以使用以下框架，只需签署合作伙伴关系（它是免费的）并且使用简单。

[灵气](http://www.aurasma.com/)

# wpf - 如何使用 WPF 在矩阵中显示联结表？

> ID：13265162
> 
> 赞同：0
> 
> 时间：2012-11-07T07:39:05.893
> 
> 标签：wpf, xaml, datagrid, matrix, junction-table

我有两个枚举：

```
public enum MyEnumA
{
    OptionA1 = 1,
    OptionA2 = 2,
    OptionA3 = 3,
}

public enum MyEnumB
{
    OptionB1 = 1,
    OptionB2 = 2,
    OptionB3 = 3,
} 
```

和一个包含两个枚举的类

```
public class AB
{
    public MyEnumA A { get; set; }
    public MyEnumB B { get; set; }
} 
```

我想要两个枚举的复选框矩阵。数据从列表中读取并保存到列表中。此列表是实际的联结表。暂时我手动填写了清单：

```
 private List<AB> ABList = new List<AB>();

    ABList.Add(new AB { A = MyEnumA.OptionA2, B = MyEnumB.OptionB1 });
    ABList.Add(new AB { A = MyEnumA.OptionA3, B = MyEnumB.OptionB3 }); 
```

矩阵现在应该如下所示：

```
 OptionA1 OptionA2 OptionA3
OptionB1                 X
OptionB2
OptionB3                          X 
```

我找到了一个 WinForm 解决方案，其中一切都在代码隐藏中完成： http: [//social.msdn.microsoft.com/Forums/eu/winformsdatacontrols/thread/33fae605-902a-40e3-9bbb-60b77fc33b9b](http://social.msdn.microsoft.com/Forums/eu/winformsdatacontrols/thread/33fae605-902a-40e3-9bbb-60b77fc33b9b)但不能用数据绑定在 xaml 中完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:44:12.333

感谢您的解决方案，Grafix。这是很不错的。我认为将它放在转换器中会更整洁，所以我这样做了：

```
 public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        var abList = value as List<AB>;

        if (abList == null)
            return null;

        var retVal = Enum.GetValues(typeof (MyEnumB)).Cast<MyEnumB>().Select(
                b =>
                new ABViewModel()
                    {
                        Name = b,
                        OptionA1 = abList.Any(ab => ab.B == b && ab.A == MyEnumA.OptionA1),
                        OptionA2 = abList.Any(ab => ab.B == b && ab.A == MyEnumA.OptionA2),
                        OptionA3 = abList.Any(ab => ab.B == b && ab.A == MyEnumA.OptionA3)
                    }).ToList();
        return retVal;
    } 
```

和数据网格：

```
 <DataGrid Height="215" HorizontalAlignment="Left" Margin="91,12,0,0" Name="dataGrid1" 
            VerticalAlignment="Top" Width="299" 
            ItemsSource="{Binding ABList, Converter={StaticResource listToDataTableConverter}}"
            d:DataContext="{d:DesignData }" /> 
```

我像这样设置DataContext：

```
 public MainWindow()
    {
        InitializeComponent();

        ABList.Add(new AB { A = MyEnumA.OptionA2, B = MyEnumB.OptionB1 });
        ABList.Add(new AB { A = MyEnumA.OptionA3, B = MyEnumB.OptionB3 });

        DataContext = this;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T07:35:56.010

如果您想将 WPF DataGrid 与数据绑定一起使用，我认为除了转换数据之外别无他法。

```
 public MainWindow()
    {
        InitializeComponent();

        DataContext = Enum.GetValues(typeof(MyEnumB)).Cast<MyEnumB>().Select(b => new ABViewModel() { Name = b.ToString(), A1 = ABList.Any(ab => ab.B == b && ab.A == MyEnumA.OptionA1), A2 = ABList.Any(ab => ab.B == b && ab.A == MyEnumA.OptionA2), A3 = ABList.Any(ab => ab.B == b && ab.A == MyEnumA.OptionA3) }).ToList();
    }

public class ABViewModel
{
    public string Name { get; set; }
    public bool A1 { get; set; }
    public bool A2 { get; set; }
    public bool A3 { get; set; }
} 
```

Xaml 现在很简单：

```
<DataGrid ItemsSource="{Binding}" IsReadOnly="True"/> 
```

# python - Django Tastypie：每次调用 api 时如何启动一个变量？

> ID：13265175
> 
> 赞同：0
> 
> 时间：2012-11-07T07:39:58.217
> 
> 标签：python, django, api, rest, tastypie

我有两个模型：

```
class Category(models.Model):
    name = models.CharField(max_length=50) 
```

和

```
class SubCategory(models.Model):
    sex =  models.CharField(choices=SEX, blank=True, max_length=5) 
    name = models.TextField(blank=True) 
    category = models.ForeignKey(Category) 
    def __unicode__(self):
        return u'%s' % (self.name) 
```

我正在使用以 JSON 格式返回“SubCategory”对象的tastepie 创建一个api。我想在每个结果集中添加一个自定义字段“start_counter_of_category”，其中包含类别 ID 更改的子类别的计数器（在“category_id”字段上排序时）

该算法相当简单，在“脱水”函数中是这样的：

```
API_SKU_VARS = {
    'COUNTER'       : 1,
    'FIRST_ELEMENT' : 1,
    'PREV_CATEGORY' : 1
}

class SubCategoryResource(ModelResource):
    start_counter_of_category = fields.IntegerField(readonly=True)
    category = fields.ForeignKey(CategoryResource,'category')
    class Meta:
        queryset = SubCategory.objects.all()
        resource_name = 'subcategory'
        filtering = {
            'id' : ALL,
            'name' : ALL,
            'category': ALL_WITH_RELATIONS,
        }
        ordering = ['id','name','category']
        serializer = Serializer(formats=['json'])
    def dehydrate(self, bundle):
        if API_SKU_VARS['PREV_CATEGORY']  != bundle.data['category']: #if the category of the current bundle is not equal to the category of the previous bundle, we update the ['PREV_CATEGORY'] 
            API_SKU_VARS['FIRST_ELEMENT']=API_SKU_VARS['COUNTER'] #update the ['FIRST_ELEMENT'] with the counter of the current bundle
            API_SKU_VARS['PREV_CATEGORY'] = bundle.data['category']
        API_SKU_VARS['COUNTER'] = API_SKU_VARS['COUNTER']+1 #for every bundle passed, we update the counter
        bundle.data['start_counter_of_category']=API_SKU_VARS['FIRST_ELEMENT']
        return bundle.data
    serializer = Serializer(formats=['json']) 
```

它在我启动服务器后的第一次运行时完美运行。可以预见的问题当然是我第二次调用 api 时，变量保留了它们在上一次运行中的值。

任何想法如何在每次进行 api 调用时重新启动变量？

**解决方案：**

重新初始化变量

*   **如果调用的 api 是过滤 API，则**build_filters****
***   **get_detail**如果调用的 api 是详细 API**

 **示例（在我的情况下）：

```
def build_filters(self, filters=None):
        if filters is None:
            filters = {}
        orm_filters = super(SubCategoryResource, self).build_filters(filters) #get the required response using the function's behavior from the super class
        self.API_SKU_VARS = {
            'PREV_CATEGORY':1,
            'COUNTER':1,
            'FIRST_ELEMENT':1,
        }
        return orm_filters 
```

（如果您想将任何自定义逻辑应用到 API 响应中，这些函数将被覆盖）

**更好和最明显的解决方案**

重新实例化***init***函数中的变量，如下所示：

```
def __init__(self,api_name=None):
    self.API_SKU_VARS = {.....}
    super(SKUResource,self).__init__(api_name) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T08:30:17.347

是的，您只需在每次调用开始时运行此代码即可重新初始化（而不是“重新初始化”）变量：

```
API_SKU_VARS['COUNTER'] = 1
API_SKU_VARS['PREV_CATEGORY'] = 1
API_SKU_VARS['FIRST_ELEMENT'] = 1 
```

但这是个坏主意。为什么这个变量首先是全局的？全局变量的全部意义在于它由模块中的所有对象共享，并且在模块的生命周期中存在。如果您想要单个 API 调用本地的东西并且在该调用的整个生命周期内都存在，那么让它成为具有这些特征的东西的成员。初始化成员作为初始化适当对象的一部分。那么就不需要重新初始化了。

看看为什么这是一个坏主意：如果两个客户端同时连接并且都进行相同的 API 调用会发生什么？**

# ruby-on-rails - 如何找出所有“隐藏的”官方 Rails 指南？

> ID：13265178
> 
> 赞同：1
> 
> 时间：2012-11-07T07:40:04.677
> 
> 标签：ruby-on-rails, ruby-on-rails-3

例如，我通过 Google[在 Rails 上找到了 AJAX](http://guides.rubyonrails.org/ajax_on_rails.html)，但它没有列在[Rails 指南索引页面上](http://guides.rubyonrails.org/index.html)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T07:49:58.150

它没有在 Rails 指南中列出，因为大多数辅助函数（如`link_to_remote`Rails 3 中没有）。

# c++ - 如何使用 C++ win32 API 将 Variant Safe Array 转换为 Char？

> ID：13265181
> 
> 赞同：1
> 
> 时间：2012-11-07T07:40:15.953
> 
> 标签：c++, windows, winapi, active-directory, adsi

海我想将`&var`值转换为 char 数组。我怎样才能做到这一点？我正在使用 C++ Win32 API。 ![安全数组到字符](../Images/02b0cf2ee54a9be5cbb3af67a1c591c6.png)

在另一个选项卡中打开图像，您将获得清晰的视图。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T08:14:27.250

最简单的方法是使用 ATL::CComSafeArray。假设您在变量 pSa 中有一个指向安全数组的指针，

```
CComSafeArray<BSTR> array;
array.Attach(pSa);

for(int i=0; i< array.GetCount(); ++i)
{
  std::wcout << (const wchar_t*) array[i] << std::endl;
} 
```

如果你只想使用win32，

```
SafeArrayLock(pSa);
LONG uBound = -1, lBound = 0;
SafeArrayUBound(pSa,1,uBound);
SafeArrayUBound(pSa,1,lBound);
int nCount = uBound - lBound + 1;
for(int i = 0; i<nCount; ++i)
{
 std::wcout << ((BSTR*)(pSa->pvData))[i] << std::endl;
} 
```

# layout - Smartgwt addMember 更改父级的顶部

> ID：13265187
> 
> 赞同：1
> 
> 时间：2012-11-07T07:40:33.790
> 
> 标签：layout, location, smartgwt

我有几个嵌套布局（VLayouts 和 HLayouts），它们包含在选项卡窗格中。在这些布局之一（VLayout）中，有几个元素根据选择窗口动态添加或删除。用户第一次进行选择时，窗格会向上移动几个像素（您不会看到窗格的上部）。其余的时间，疼痛仍然在错误的地方。

总之，第一次添加会影响窗格顶部，其余的添加/删除不会影响它。

这只发生在 Chrome 上。但是，Firefox 和 IE 工作正常。

我的添加代码是：

```
int total = itemsPanel.getMembers().length - 1;
while (total >=0) {
    itemsPanel.removeMember(itemsPanel.getMember(total));
    total--;
}

Record[] records = selectorWindow.getSelectedRows();
if (records != null) {
    for (Record record : records) {
        String name = record.getAttribute("keyRecord");
        HLayout item = items.get(name);
        itemsPanel.addMember(row);
    }
}
if (itemsPanel != null) {
    int r = 80;
    if (Utils.isReducedHeight()) {
        r = 120;
    }

    int visibleHeight = getVisibleHeight() - StyleUtils.HEADER_HEIGHT - r;
    itemsPanel.setHeight(Math.max(1, Math.min(itemsPanel.getMembers().length * Utils.getRowHeight(), visibleHeight)));
    int h = Math.min(itemsPanel.getHeight() + 10, visibleHeight);
    containerItemsPanel.setHeight(h);
} 
```

我正在使用 gwt 2.5.1 和 smartgwt 3.0。任何想法？

提前致谢

# liferay-6 - 将 Liferay 从 6.0.6 升级到 6.1.0 会丢失页面中的 portlet

> ID：13265188
> 
> 赞同：1
> 
> 时间：2012-11-07T07:40:38.580
> 
> 标签：liferay-6

我从 liferay 5.2.3 升级到 6.0.6 ，成功完成，没有留下任何错误；但是当我从 6.0.6 升级到 6.1.0 GA1 portlet 时，它们会从页面中删除，就像它们在 liferay 5.2.3 和 6.0.6 中的页面上一样，我要求使用 liferay portlet，例如 Web 内容显示等。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:07:55.233

我发现了问题，这是解决方案。在“typesettings”列的“layout_”表中设置哪个portlet 放置在哪个页面上以及哪个layout-column 存储在哪个页面上。

通过部署所需的布局，缺少布局。

谢谢

# ios - ARC 不允许使用 stringWithUTF8String

> ID：13265189
> 
> 赞同：0
> 
> 时间：2012-11-07T07:40:42.940
> 
> 标签：ios, automatic-ref-counting

我遇到了这个问题：ARC 不允许将 Objective-C 指针隐式转换为“const char *”。我需要使用哪种方式来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T07:50:15.027

不看代码就无法判断，但这是我的猜测：

如果你传递一个 NSString 你必须把

```
NSString *someStringUTF = @"something";
NSString *someString = [NSString stringWithUTF8String:someStringUTF.UTF8String]; 
```

如果您要传递一个核心对象（大多数以 CF 开头的原始对象），您必须通过授予所有权或保留它来桥接它。

```
(__bridge_transfer NSString*)yourFoundationObject 
```

# java - 使用 jpa 的休眠验证器，传递 @Transient @NotNull 字段的违规

> ID：13265191
> 
> 赞同：1
> 
> 时间：2012-11-07T07:40:48.027
> 
> 标签：java, hibernate, jpa, validation

`@Transient`在标记为和的字段上使用休眠验证器进行验证失败`@NotNull`。然而，它只对那些已经存储在数据库中但现在在对象树中遍历的对象失败。（因为它们的值当然是空的）

对于这样的实体：

```
public class User {

  @ManyToMany
  @Fetch(org.hibernate.annotations.FetchMode.JOIN)
  @Valid
  private Set<Role> roles;

  @NotNull
  private String someField;
}

public class Role {

  @ManyToMany
  @Fetch(org.hibernate.annotations.FetchMode.JOIN)
  @Valid
  private Set<User> users;
} 
```

当我进行验证时`User`，有更多用户特别`Role`有问题，即使当前用户验证成功，对于其他用户我也会出错。

我在客户端执行此验证以将数据提交到服务器端。

我已经看到一些想法如何解决验证`@Transient`和的问题`@NotNull`：

*   [ConstraintViolationException：具有临时确认密码字段的用户实体](https://stackoverflow.com/questions/9266427/constraintviolationexception-user-entity-with-transient-confirmpassword-field)

*   [在保存休眠实体时忽略瞬态模式](https://stackoverflow.com/questions/7267028/ignore-transient-pattern-on-save-hibernate-entity)

然而，这些并没有涵盖我的情况（对相关对象有违规行为）。而且我还没有遇到服务器端的验证问题:)。至于测试那将是下一步。

所以问题是，有没有办法解释验证器，在验证期间应该跳过从数据库中获取的传递对象？

我正在考虑`JPATraversableResolver`通过覆盖来扩展我目前使用的：

```
 /**
     * Determine if the Bean Validation provider is allowed to reach the property state
     *
     * @param traversableObject object hosting <code>traversableProperty</code> or null  
     *                          if validateValue is called
     * @param traversableProperty the traversable property.
     * @param rootBeanType type of the root object passed to the Validator.
     * @param pathToTraversableObject path from the root object to
     *        <code>traversableObject</code>
     *        (using the path specification defined by Bean Validator).
     * @param elementType either <code>FIELD</code> or <code>METHOD</code>.
     *
     * @return <code>true</code> if the Bean Validation provider is allowed to
     *         reach the property state, <code>false</code> otherwise.
     */
     boolean isReachable(Object traversableObject,
                     Path.Node traversableProperty,
                     Class<?> rootBeanType,
                     Path pathToTraversableObject,
                     ElementType elementType); 
```

但是，我仍然面临确定要检查哪些属性以及不检查哪些属性的问题。如果我的检查是针对当前持久对象的瞬态字段，我不会涵盖持久实体（2 个相关实体）的情况，其中检查将在其中一个上进行，而另一个将有问题的瞬态字段。

有任何想法吗？有这方面的经验吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T08:01:58.113

好的，由于没有建议，让我自己回答:)

我最终在瞬态字段上有了特殊的验证组，对于这个组我实现了单独`TraversableResolver`的检查，我是否仍然直接在经过验证的实体中？

这是通过签入完成的：`TraversableResolver.isReachable`在哪里`pathToTraversableObject`检查空的 Strnig。

解决方案的原因是我无法验证相关实体，因为我无法决定这些实体是否需要验证（是否已修改）。但是我提交的那个肯定需要验证。

# list - 绑定到二维数据矩阵的双向 EntityCollection

> ID：13265198
> 
> 赞同：0
> 
> 时间：2012-11-07T07:41:04.890
> 
> 标签：list, binding, multidimensional-array, matrix, entity

我有一个**Day Structure Table**，其中包含我要显示的以下列：

```
DoW HoD Value
1   1   1
1   2   2
1   3   2
1   4   2
1   5   2
1   6   2
1   7   2
1   8   2
1   9   2
1   10  2
1   11  4
1   12  4
1   13  4
1   14  4
1   15  4
1   16  4
1   17  4
1   18  4
1   19  4
1   20  4
1   21  1
1   22  1
1   23  1
1   24  1 
```

Dow 是星期几（星期一等），HoD 是星期几，Value 是实际值。

现在我想将这个**Day Structure 实体集合**直接绑定到一个控件，这样任何更改都可以绑定到**TwoWay**

像这种格式： ![矩阵示例](../Images/7a923f0e129f7b0602f92b322b7538df.png)

我认为实现这一目标的最佳方法是使用模板和/或转换器，但我只是不知道如何;）

我已经阅读[了这篇](http://www.codeproject.com/Articles/36462/Binding-a-ListView-to-a-Data-Matrix)文章，但是缺少双向绑定功能使它对我没有用:(

我希望你能帮帮我

强尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T08:29:10.563

我再次自己解决了它；）

对于这个问题，我创建了一个具有固定数量的行和列的网格。在这个 Grid 中，我将 Itemscontrol 绑定到我的数据列表。在 DataTemplate 中，我放置了一个绑定到当前值的文本框，并将 Grid Row 和 Columnproperties 绑定到星期几/星期几。

优点：文本框是双向数据绑定到某个对象或元素。如果 Row 和 Colum 属性是数字，则非常容易实现。

缺点：仅限于固定数量的行/列。用 XAML（复制和粘贴）编写的很多代码有点“脏”代码。感觉不是最好的方法。

我仍然愿意接受其他建议。

# wordpress - WordPress重命名主题文件夹

> ID：13265199
> 
> 赞同：3
> 
> 时间：2012-11-07T07:41:16.287
> 
> 标签：wordpress, themes, directory, rename

我想知道如何重命名 wp-content 中的“主题”文件夹。我已经重命名了我的 wp-content 文件夹和实际的活动主题文件夹名称，但是我在重命名了存储主题的文件夹之后。

/wp-内容/主题/主题名

中间一个大声笑。

有谁知道这将如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T04:50:02.370

以下将启用站点根目录[中](http://codex.wordpress.org/Function_Reference/register_theme_directory)的目录“t”作为***额外的***主题目录

```
register_theme_directory( '/www/htdocs/username/public_html/t' ); 
```

我想你会喜欢这个帖子：[隐藏网站正在使用 WordPress 的事实的步骤？](https://wordpress.stackexchange.com/q/1507/12615)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-26T12:13:30.880

如果您想在 ex 中保留插件和上传，这很有用。用于 CDN 目的 (NFS) 的单独服务器并删除 public/www 权限。在这种情况下，您只部署主题而不是插件、上传等。

```
define('WP_CONTENT_DIR', __DIR__ . '/data/wp-content');
define('WP_CONTENT_URL', 'http://{your-url/to-blog}/wp-content');
define('WP_PLUGIN_DIR', __DIR__ . '/data/wp-content/plugins');
define('WP_PLUGIN_URL', 'http://{your-url/to-blog}/wp-content/plugins');

$wp_theme_directories = array(__DIR__ . '{/directory-to-themes}');
define('WP_DEFAULT_THEME', '{your-default-theme}'); 
```

请记住：1\. wp-config 中的行顺序很重要 2\. 将主题文件夹保留在 wp-content 中（即使它是空的）

# objective-c - NSOperationQueue 内带有 GCD 的 NSURLConnection，一次有 1 个连接

> ID：13265200
> 
> 赞同：1
> 
> 时间：2012-11-07T07:41:17.767
> 
> 标签：objective-c, upload, nsurlconnection, nsoperation, nsoperationqueue

我的应用必须根据用户的操作进行一系列上传。他可以连续编写一长串上传，所以我更喜欢每次只执行一个 NSURLConnection ，以避免网络拥塞。我正在使用 NSOperationQueue 添加上传作业；在我使用的队列中：

```
[NSURLConnection sendAsynchronousRequest:uploadRequest
                                   queue:tempQueue
                       completionHandler:/* completion code */]; 
```

我的问题是，即使一切正常，具有异步连接的函数也会因为使用块而立即返回，因此 NSOperationQueue 不会等待 NSURLConnection 完成，而是直接继续下一次上传。

我知道我可以实现 - 例如 - 一个 NSMutableArray 来跟踪当前和待处理的上传列表并相应地调度它们，但我想知道是否有一种简单的方法可以告诉这个循环等待如果已经有一个打开的 NSURLConnection进步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T08:31:02.343

为什么不使用同步连接？

```
[myQueue addOperationWithBlock:^{
    NSData *data = [NSURLConnection sendSynchronousRequest:…
        returningResponse:… error:…];
    // …
}]; 
```

然后将最大并发操作数设置为 1，并且上传应该一个接一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T08:26:44.517

好吧，您可以将您的操作队列 maxConcurrentOperationCount 设置为 1 Like [queue setMaxConcurrentOperationCount:1] 希望这会起作用

# c# - 使用 Linq 执行 SQL 函数

> ID：13265209
> 
> 赞同：4
> 
> 时间：2012-11-07T07:41:46.843
> 
> 标签：c#, sql, linq, linq-to-sql

我在 MSSQL 2005 中创建了一个函数，我想使用 linq 运行这个函数。我的函数有 2 个参数。定义如下：

```
USE [MobileGateway]
GO
/****** Object:  UserDefinedFunction [dbo].[Fn_GetNoLocationAddress]    Script Date: 11/07/2012 08:27:58 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER FUNCTION [dbo].[Fn_GetNoLocationAddress] 
(   
    -- Add the parameters for the function here
    @Site nvarchar(255),
    @ReceivedDate int
)
RETURNS @noLocationAddress TABLE (

RequestID int NOT NULL,
Barcode varchar(50) NOT NULL,
AdrID int NOT NULL,
Name varchar(50) NOT NULL,
Street varchar(50) NOT NULL,
HouseNo varchar(4) NOT NULL,
Postal varchar(8) NOT NULL,
City varchar(50) NOT NULL,
Country varchar(50) NOT NULL,
Latitude varchar(50) NOT NULL,
Longitude varchar(50) NOT NULL,
ReveivedDate datetime NOT NULL
)
AS 
BEGIN
    -- Add the SELECT statement with parameter references here
INSERT INTO @noLocationAddress 
SELECT     TOP (100) PERCENT Request1.RequestID, TrackIT.dbo.Sending.Barcode, TrackIT.dbo.Address_View.AdrID, TrackIT.dbo.Address_View.Name, 
                      TrackIT.dbo.Address_View.Street, TrackIT.dbo.Address_View.HouseNo, TrackIT.dbo.Address_View.Postal, TrackIT.dbo.Address_View.City, 
                      TrackIT.dbo.Address_View.Country, Request1.Latitude, Request1.Longitude, Request1.ReceivedDate
FROM         (SELECT DISTINCT RequestID, LTRIM([Content]) AS Barcode, Latitude, Longitude, ReceivedDate
                       FROM          dbo.RequestWithLocation
                       WHERE      (Site LIKE @Site) AND ([Content] <> '') AND (AddressID = '0') AND (ReceivedDate > DATEADD(day, -@ReceivedDate, GETDATE()))) AS Request1 INNER JOIN
                      TrackIT.dbo.Sending ON Request1.Barcode = TrackIT.dbo.Sending.Barcode INNER JOIN
                      TrackIT.dbo.Address_View ON TrackIT.dbo.Sending.DeliveryAdrID = TrackIT.dbo.Address_View.AdrID

ORDER BY TrackIT.dbo.Address_View.AdrID

RETURN

END 
```

如您所见，我有 2 个参数，并且正在返回一个包含信息的表格。但是我需要使用 linq 来执行这个函数。任何人都可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T07:53:54.650

我假设您使用的是 dbml (linq to sql) 文件。

将您的用户定义函数从 Visual Studio 中的服务器资源管理器拖放到您的 dbml 中。

然后从您的 dbml 的 datacontext 对象中，您可以直接调用该函数。

例如，如果您的 dbml 文件名为 xyz.dbml，那么您的数据上下文对象的名称将为“XyzDataContext”，除非您已更改它。

然后试试这个。

```
XyzDataContext db = new XyzDataContext();
List<Fn_GetNoLocationAddressResult> = db.Fn_GetNoLocationAddress("site", 25).ToList(); 
```

# google-chrome - Chrome：自动检测语言以进行拼写检查

> ID：13265210
> 
> 赞同：19
> 
> 时间：2012-11-07T07:41:51.900
> 
> 标签：google-chrome, spell-checking

当我使用 Chrome 上网时，我会交替使用英语和德语。

我真的很喜欢拼写检查功能，但我总是不得不在语言之间手动切换以进行拼写检查，这有点烦人。

有谁知道如何自动化？也许有一个插件？

干杯!

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T23:44:35.193

[这在问题https://code.google.com/p/chromium/issues/detail?id=5102](https://code.google.com/p/chromium/issues/detail?id=5102)中被跟踪。您应该为问题“加注星标”以获取进度通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-04T16:50:04.410

还有这个： [https](https://code.google.com/p/chromium/issues/detail?id=1834) ://code.google.com/p/chromium/issues/detail?id= 1834 这个设计文档： http: [//www.chromium.org/developers/design-documents/advancedspellchecker](http://www.chromium.org/developers/design-documents/advancedspellchecker)

这个设计看起来有点矫枉过正，我希望他们能尽快实现一些更简单的东西。

# r - 在 R 中使用 org.At.tair.db 包进行注释

> ID：13265215
> 
> 赞同：1
> 
> 时间：2012-11-07T07:42:18.523
> 
> 标签：r

我在 linux 操作系统中使用 R 版本 2.15。我有一个由基因 ID 及其特定信号强度值组成的矩阵，如下所示（整个矩阵的子集）：

```
 probes GSM362180    GSM362181  GSM362188    GSM362189  GSM362192
 244901 5.094871713 4.626623079 4.554272515 4.748604391 4.759221647
 244902 5.194528083 4.985930299 4.817426064 5.151654407 4.838741605
 244903 5.412329253 5.352970877 5.06250609  5.305709079 8.365082403
 244904 5.529220594 5.28134657  5.467445095 5.62968933  5.458388909
 244905 5.024052699 4.714631878 4.792865831 4.843975286 4.657188246
 244906 5.786557533 5.242403911 5.060605782 5.458148567 5.890061836 
```

我只想提取第一列，如下所示： ids <- scr[,2] 然后我得到一个因子 [2368]

然后我继续注释如下：

```
 biocLite("GO.db")
 library("AnnotationDbi")
 biocLite("org.At.tair.db")
 biocLite("ath1121501.db").
 genenames <-  org.At.tairGENENAME[ids] #map the probe ids to the gene names in TAIR

 The output of which is  AnnDbBiMap[1]

 number<-org.At.tairENTREZID[ids] #map the probe ids to the gene ids in TAIR
 The output of which is AnnDbBiMap[1]

 And then I try to merge both the lists as : 
 xx<-toTable(entrez)
 yy<-toTable(number)
 complete<-merge(xx,yy) 
```

我在此步骤中遇到错误，无法继续进行。错误内容如下：

```
 Error in fix.by(by.y.y): 'by' must specify uniquely valid column(s) 
```

是因为 ids <- scr[,1] 是一个因素吗？

# vb.net - VB.NET 在使用组合框和文本框过滤 DataGridView 时评估异常

> ID：13265217
> 
> 赞同：0
> 
> 时间：2012-11-07T07:42:19.913
> 
> 标签：vb.net, winforms, visual-studio-2010, datagridview

我正在尝试使用组合框搜索我的 DGV，以获取搜索查询的列名称和文本框。我以前用过这段代码，它工作，但现在我得到一个`EvaluateException`说法

> 无法对 System.Double 和 System.String 执行“点赞”操作。

这就是我正在做的事情：

```
Dim dv As DataView = New DataView()
Dim CmSi = cmbSearch.SelectedItem
dv.Table = OutGoingDataSet.outgoingdeliveries
dv.RowFilter = CmSi & " Like '" & txtSearch.Text & "'"
OutgoingDataGridView.DataSource = dv 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T10:23:25.263

这是你的问题。当您应用过滤器时，请执行以下检查：

```
Column LIKE 'String'. 
```

这适用于所有包含字符串的列。双打不起作用，因为它们不是字符串。基本上这就像

```
if (5 == "5") 
```

这当然是错误的。

因此，在进行`LIKE`比较之前，您必须将您的 double 转换为字符串。我不知道它是否会起作用，但我认为它会起作用。

```
dv.RowFilter = "CONVERT(" & CmSi & ", System.String) LIKE '" & txtSearch.Text & "'" 
```

# c# - XML 文件的加密

> ID：13265220
> 
> 赞同：1
> 
> 时间：2012-11-07T07:42:40.343
> 
> 标签：c#, asp.net, xml, encryption

我想加密一个 XML 文件。我得到了以下代码的帮助：

[MSDN 页面链接](http://msdn.microsoft.com/en-us/library/system.security.cryptography.xml.encryptedxml.aspx)

现在，当调用 encrypt 函数时，问题就来了。将所有值插入 xml 文件后，我调用 encrypt 函数。它转到开关盒 256。但它保持不变。

```
 XmlElement machmac = doc.CreateElement("Mach_MAC");
        machmac.InnerText = txtMachMac.Text;
        root.AppendChild(machmac);

        doc.AppendChild(root);
        doc.Save(@"D:\DEV\Gener_Lic.xml");
        lblmsg.Text = "Your data is saved";

        RijndaelManaged key = null;

        try
        {
            // Create a new Rijndael key.
            key = new RijndaelManaged();
            // Load an XML document.
            XmlDocument xmlDoc = new XmlDocument();

            xmlDoc.Load("D:\\DEV\\Gener_Lic.xml");

            // Encrypt the "Generate_License" element.
            Encrypt(xmlDoc, "Generate_License", key);

            Console.WriteLine("The element was encrypted");

            Console.WriteLine(xmlDoc.InnerXml);

            //Decrypt(xmlDoc, key);

            //Console.WriteLine("The element was decrypted");

            //Console.WriteLine(xmlDoc.InnerXml);

        }
        catch (Exception exc)
        {
            Console.WriteLine(exc.Message);
        }
        finally
        {
            // Clear the key. if (key != null)
            {
                key.Clear();
            }
        }
    }

    catch (Exception ex)
    {
        Console.WriteLine("error : " + ex.Message);
    }

} 
```

加密代码如下：

```
 public static void Encrypt(XmlDocument Doc, string ElementName, SymmetricAlgorithm Key)
{
    // Check the arguments 

    if (Doc == null)
        throw new ArgumentNullException("Doc");
    if (ElementName == null)
        throw new ArgumentNullException("ElementToEncrypt");
    if (Key == null)
        throw new ArgumentNullException("Alg");

    // Find the specified element in the XmlDocument // object and create a new XmlElemnt object.

    XmlElement elementToEncrypt = Doc.GetElementsByTagName(ElementName)[0] as XmlElement;

    // Throw an XmlException if the element was not found. 

    if (elementToEncrypt == null)
    {
        throw new XmlException("The specified element was not found");

    }

    // Create a new instance of the EncryptedXml class
    // and use it to encrypt the XmlElement with the
    // symmetric key.

    EncryptedXml eXml = new EncryptedXml();

    byte[] encryptedElement = eXml.EncryptData(elementToEncrypt, Key, false);

    // Construct an EncryptedData object and populate
    // it with the desired encryption information

    EncryptedData edElement = new EncryptedData();
    edElement.Type = EncryptedXml.XmlEncElementUrl;

    // Create an EncryptionMethod element so that the
    // receiver knows which algorithm to use for decryption
    // Determine what kind of algorithm is being used and
    // supply the appropriate URL to the EncryptionMethod element. 

    string encryptionMethod = null;

    if (Key is TripleDES)
    {
        encryptionMethod = EncryptedXml.XmlEncTripleDESUrl;
    }
    else if (Key is DES)
    {
        encryptionMethod = EncryptedXml.XmlEncDESUrl;
    }
    if (Key is Rijndael)
    {
        switch (Key.KeySize)
        {
            case 128:
                encryptionMethod = EncryptedXml.XmlEncAES128Url;
                break;
            case 192:
                encryptionMethod = EncryptedXml.XmlEncAES192Url;
                break;
            case 256:
                encryptionMethod = EncryptedXml.XmlEncAES256Url;
                break;
        }
    }
    else
    {
        // Throw an exception if the transform is not in the previous categories 
        throw new CryptographicException("The specified algorithm is not supported for XML Encryption.");
    }

    edElement.EncryptionMethod = new EncryptionMethod(encryptionMethod);

    // Add the encrypted element data to the
    // EncryptedData object.
    edElement.CipherData.CipherValue = encryptedElement;

    /// Replace the element from the original XmlDocument
    // object with the EncryptedData element
    EncryptedXml.ReplaceElement(elementToEncrypt, edElement, false);
} 
```

请告诉我哪里出错了。

# c++ - 自定义 Skype 菜单项

> ID：13265224
> 
> 赞同：1
> 
> 时间：2012-11-07T07:42:49.693
> 
> 标签：c++, skype, skype4com

我想在 Skype 中添加菜单项“我的设置”。据我所知，[`Skpye4Com`](http://developer.skype.com/accessories/skype4com)有创建 Skype 客户端的界面。我们可以用它创建 Skype 插件，但我们不能自定义 Skype 本身。现在，我正在寻找一个 API，通过它我可以自定义 Skype。

请建议我这是否可能以及是否存在这样的 API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T07:53:20.190

我相信这根本不可能。Skype 不是开源的，所以[这里](http://developer.skype.com/accessories)提供的 API似乎是开发与 Skype 相关的东西的唯一方法。否则，无论如何都无法更改 Skype 自己的代码来自定义它或构建您自己的版本。

# java - 让与服务器的连接一直打开

> ID：13265230
> 
> 赞同：2
> 
> 时间：2012-11-07T07:43:11.290
> 
> 标签：java, memory-leaks, sms, smtp, jsmpp

我正在为一家公司开发 SMS 应用程序，该应用程序发送 SMS 消息（SUBMIT_SM 命令）并接收 SMSC 的响应（SUBMIT_SM_RESP 命令）以指示它是否已交付给客户。我正在使用[JSMPP API](http://code.google.com/p/jsmpp/wiki/GettingStarted)。

连接到 SMSC 服务器的最佳做法是什么？我应该打开一个连接（一个会话）并在整个应用程序中使用它来发送 SMS 消息（这里有任何内存泄漏）吗？还是每次发送 SMS 消息时都应该连接/断开 SMSC 服务器（此处有任何延迟）？

请注意，我们每小时发送大约 1000-2000 条 SMS 消息。我还注意到 JSMPP API 仅在连接打开时才会收到响应消息 (SUBMIT_SM_RESP)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T08:06:32.273

这取决于连接实现。如果您的连接在长时间休息期间不会“死亡”，那么请使用一个连接，因为它可以节省您每次请求打开/关闭的时间。

如果您的应用程序是多线程的（其中多个线程可以发送消息），我建议您实现一种连接池机制（或使用支持 SMSC 会话的可用机制）。

# iphone - 转换为通用应用程序的 iPad 应用程序出现在 iPhone 新应用程序中？

> ID：13265234
> 
> 赞同：2
> 
> 时间：2012-11-07T07:43:23.077
> 
> 标签：iphone, xcode, app-store, updates, ios-universal-app

我在 App Store 中有一个 iPad 应用程序，我目前正在将其转换为 iPhone 作为通用应用程序。我想知道这个应用程序是否会作为 iPhone 的新应用程序出现在 App Store 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T08:25:06.453

我认为它会在 iPhone 下作为新 App 出现。iTunes App Store，为您发布的每个更新都将您的应用程序放在新应用程序上。由于这是通用的，所以它应该出现在 iPhone 和 iPad 下

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T07:58:34.567

不，会有一个应用程序。Wich 的下载方式与 iPad 和 iPhone 相同。只需更新它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T08:14:08.860

通用应用程序是针对 iPhone、iPod touch 和 iPad 设备优化的单个应用程序。提供适用于当前设备的单个二进制文件可提供最佳用户体验，但当然，您需要做额外的工作。由于设备屏幕尺寸的不同，iPad 的大部分窗口、视图和视图控制器代码可能与 iPhone 和 iPod touch 的代码大不相同。此外，您必须做一些事情来确保您的应用程序在每种设备类型上正确运行。

Xcode 为配置通用应用程序提供了内置支持。创建新项目时，您可以选择是要创建设备特定项目还是通用项目。创建项目后，您可以使用“摘要”窗格更改应用程序目标支持的设备集。从单设备项目更改为通用项目时，您必须填写要添加支持的设备类型的信息。

更多详情[请参考此链接](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/AdvancedAppTricks/AdvancedAppTricks.html)

# quartz-scheduler - 如何在 Quartz 中划分作业集？

> ID：13265238
> 
> 赞同：1
> 
> 时间：2012-11-07T07:43:36.730
> 
> 标签：quartz-scheduler

假设我有超过 100 个短期工作。我想知道我们如何通过在 Quartz 中使用多个不同的调度程序来划分作业集。

您能否指出一些链接以获取详细信息或示例来划分作业集？

提前致谢， 凯瑟尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T07:50:15.240

要使其分区，需要牢记以下几点

1.  公司职位
2.  职位发布日期
3.  按类别划分的工作（IT/医疗/BPO...等）

这些是您可以划分列出的工作的点。这是基本分区，因为工作不断增加，您应该使用一些高级分区。

希望这可以帮助

# browser - rtmp 阻止了哪些不同类型的视频下载？

> ID：13265241
> 
> 赞同：1
> 
> 时间：2012-11-07T07:44:06.917
> 
> 标签：browser, rtmp, rtmps

我想知道 rtmp 会阻止哪些不同类型的下载？下载此类视频有哪些不同的方法？

提前致谢。

# data-structures - 如何合并排序列表的两半

> ID：13265242
> 
> 赞同：1
> 
> 时间：2012-11-07T07:44:11.787
> 
> 标签：data-structures, linked-list

我有一个整数链表，它的前半部分和后半部分都是独立排序的。现在我需要合并两个部分来创建一个单一的排序链表。

样本输入：

输入列表 1：`1->2->3->4->5->1->2`
输出： `1->1->2->2->3->4->5`

输入列表 2：`1->5->7->9->11->2->4->6`
输出 2：`1->2->4->5->6->7->9->11`

**预期输出：**

**1,2,3……**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T07:55:30.877

这是归并排序。

我将保持两个指针：

`ptr1`指向前半部分的第一个元素

并`ptr2`指向后半部分的第一个元素。

您将需要一个额外的数组来存储最终列表，当然您可以选择不使用这个额外的数组，但是这个讨论离主题很远。

**1，**比较`*ptr1`和`*ptr2`，如果`*ptr1`的值小于`*ptr2`，则将该值（即`*ptr1`）复制到最终数组中，然后`ptr1`继续前进。

如果`ptr2`的值是较小的，只需复制`*ptr2`并`ptr2`继续前进

**2、**指针指向最后一个元素后停止，假设前半部分有5个元素`a[0] a[1] a[2] a[3] a[4]`，则指针指向时停止 `a[5]`

**3、**如果前半部分为空，则复制后半部分的其余部分，反之亦然。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T07:47:39.527

这称为[归并排序](http://en.wikipedia.org/wiki/Merge_sort)。

[在这里](http://simplestcodings.blogspot.in/2010/08/merge-sort-implementation-in-c.html)和[这里](http://www.cse.iitk.ac.in/users/dsrkg/cs210/applets/sortingII/mergeSort/mergeSort.html)查看实现细节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T07:48:30.187

寻找自然合并排序以获得最佳解决方案：[http ://en.wikipedia.org/wiki/Merge_sort#Natural_merge_sort](http://en.wikipedia.org/wiki/Merge_sort#Natural_merge_sort)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T08:06:25.130

我在使用函数式语言时已经做过无数次了，所以我想我可以给你一个简短的解释。

如果您将其视为递归过程，则更容易掌握这个想法，但我会给您一个命令式的。你从你的部分列表和一个空的排序列表开始。

然后你开始你的循环，你的部分列表可以看作：

*   都是空的，在这种情况下你的处理就完成了，
*   其中一个为空，您将另一个附加到排序列表中，
*   几个头部元素和列表的尾部，您将在其中比较两个头部，将最小的添加到排序列表中，将另一个留在原来的位置，然后循环使用剩余的列表。

一旦退出循环，您只需返回排序列表。

但是有一个警告：如果您使用的是简单的链表，则可以通过在排序列表前面添加元素并在最后返回之前将其反转来获得更好的运行时间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-08T13:38:53.477

```
int[] merge(int[] left, int[] right) {
        int[] ret = new int[left.length + right.length];

        int i = 0;
        int j = 0;
        for (; i < left.length & j < right.length;) {
            if (left[i] < right[j]) {
                ret[i + j] = left[i++];
            } else if (left[i] > right[j]) {
                ret[i + j] = right[j++];
            } else {
                ret[i + j] = left[i];
                ret[i + j + 1] = left[i];
                i++;
                j++;
            }
        }

        if (i < left.length) {

            copyIntArray(left, i, left.length, ret, ret.length - i);
        } else if (j < right.length) {

            copyIntArray(right, j, right.length, ret, ret.length - j);
        }

        return ret;
    }

    void copyIntArray(int[] src, int startIndex, int endIndex, int[] des, int desStartIndex) {
        for (int i = startIndex; i < endIndex; i++) {
            des[desStartIndex++] = src[i];
        }
    } 
```

# sql - shift id's of table alike (id = id + 1) 其中 id 是主键

> ID：13265244
> 
> 赞同：3
> 
> 时间：2012-11-07T07:44:30.783
> 
> 标签：sql, sqlite

我需要改变表的所有主键

```
UPDATE TODO SET id = id + 1 
```

但我做不到（ Ahmad Al-Mutawa 的[演示](http://sqlfiddle.com/#!5/bd109/2)回答）描述了原因。不能像这样更改主键。

我也不能根据这是 sqlite 来改变表：[http ://www.sqlite.org/omited.html](http://www.sqlite.org/omitted.html)

我正在考虑对其他列进行一些硬编码的递归更改，但是如果没有 tsql 和存储过程，我很难理解如何做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T08:39:43.557

当你执行你的`UPDATE`命令时，你会暂时得到重复的 ID。

为避免这种情况，请分两步更改 ID。
首先，选择一个大于最大 ID 的数字，并将其添加到所有 ID：

```
UPDATE TODO SET id = id + 1000000000 
```

然后，从所有 ID 中减一：

```
UPDATE TODO SET id = id - (1000000000 - 1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T07:51:10.503

![它不起作用](../Images/dd55a43fc6be74275597d367e8bddee0.png)

如果不首先更改表（通过删除 PRIMARY 键属性），就不可能更新 SQLite 主键。

这是[SQLFiddle 演示](http://sqlfiddle.com/#!5/bd109/2)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T07:47:40.513

不确定 Sqlite 是否具有禁用主键的功能。如果是，您可以禁用它，更新表并重新打开主键。

# iphone - 连续两个按钮的按钮网格视图

> ID：13265245
> 
> 赞同：1
> 
> 时间：2012-11-07T07:44:33.247
> 
> 标签：iphone, objective-c, gridview

我想创建一个将动态创建的按钮的网格视图。单击网格视图中的按钮为每个按钮执行不同的任务。我该怎么做？任何帮助将不胜感激？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T07:55:16.360

以下代码可以插入`viewDidLoad`到您的视图控制器中，并假设您已经在界面构建器中设置了 UISCrollView，否则您需要在内部分配滚动视图`viewDidLoad`。

该代码将可变数量的图像项添加到具有 2 列的 UIScrollView。

```
UIButton * button = nil;

//The x and y view location coordinates for your menu items 
int x = 0, y = 0;

//The number of images you want 
int numOfItemsToAdd = 10; 

//The height and width of your images are the screen width devided by the number of columns 
int imageHeight = 320/4, imageWidth = 320/4; 

int numberOfColumns = 2; 

//The content seize needs to refelect the number of items that will be added
[scrollView setContentSize:CGSizeMake(320, imageHeight*numOfItemsToAdd];
for(int i=0; i<numOfItemsToAdd; i++){
    if(i%numberOfColumns == 0){//% the number of columns you want
        x = 0;
        if(i!=0)
            y += imageHeight;  
    }else{
        x = imageHeight;  
    }
    button = [[UIButton alloc] initWithFrame: CGRectMake(x, y, imageWidth, imageHeight)];

    //set the center of the image in the scrollviews coordinate system 
    imageView.center = CGPointMake(x, y); 

    //Finaly add the image to the scorll view
    [scrollView addSubview:button]; 
```

并通过将标签以增量方式分配给按钮，以便将每个标签分配给每个按钮，然后将事件分配给每个按钮，您可以在网格视图中提供不同的任务。在下面

```
-(void) buttonClicked:(UIButton*)mybutton{ } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T08:31:22.403

这可能会帮助您 PTSpringBoard 网格菜单检测示例代码

[https://github.com/ppanopticon/PTSSpringboard](https://github.com/ppanopticon/PTSSpringboard)

![在此处输入图像描述](../Images/82753c2ddf5739aa912a59ec120742b2.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T07:57:30.850

在使用滚动视图之前我已经完成了这可能会对您有所帮助。

```
 int number_of_types = 20; // (no of total buttons )

int btncount=0;
        int number_of_buttons_in_row = 4;
        CGFloat screen_width = 280.0, button_width = 70;

        CGFloat xpadd = (screen_width - ( number_of_buttons_in_row * button_width ))/(number_of_buttons_in_row+1);

        CGFloat x_coord, y_ccord;
        int buttonXOffset, buttonYOffset, buttonWidth, buttonHeight;
        buttonWidth = 57;
        buttonHeight = 57;

        x_coord = 20;
        y_ccord = 70;

        int number_of_rows;

        if((number_of_types % number_of_buttons_in_row) == 0)
            number_of_rows = number_of_types / number_of_buttons_in_row;
        else 
            number_of_rows = number_of_types / number_of_buttons_in_row + 1;

        int number_of_buttons_count = 0;
        for (UIView * view in scrollBack.subviews) {
            if(view.tag!=999 )
            {   
                [view removeFromSuperview];
                view = nil;
            }
        }

        for (int i = 0; i< number_of_rows; i++) {
            for (int j=0; j<number_of_buttons_in_row; j++) {

                buttonXOffset = 75;
                buttonYOffset = 58;
                UIButton *btn=[UIButton buttonWithType:UIButtonTypeRoundedRect];
                btn.frame = CGRectMake(40, 0, 57, 57);

                x_coord += button_width/2 + xpadd;
                btn.center = CGPointMake(x_coord, y_ccord);

                [scrollBack addSubview:btn];

                buttonXOffset = x_coord - buttonWidth/2;
                buttonYOffset = y_ccord - buttonHeight/2;

                UILabel * label = [[UILabel alloc] initWithFrame:CGRectMake(buttonXOffset, buttonYOffset + buttonHeight + 4, buttonWidth+7, 28)];

                btn.tag= btncount;

                [btn setTitle:@"your Title "];
//if titles are in a Array  then you can Use 

    [btn setTitle:[titleArray objectatindex:btncount] forState:UIControlStateNormal];

                [btn addTarget:self action:@selector(yourFunction:) forControlEvents:UIControlEventTouchUpInside];

                label.text = [titleArray objectatindex:btncount];

                label.tag = 777;
                label.backgroundColor = [UIColor clearColor];
                label.font=[UIFont fontWithName:@"Helvetica" size:11];
                label.font=[UIFont boldSystemFontOfSize:11];
                label.textAlignment = UITextAlignmentCenter;
                label.numberOfLines = 0;

                [scrollBack addSubview:label];
                [label release];

                x_coord += button_width/2;
                number_of_buttons_count++;
                if(number_of_buttons_count == 20)
                    break;

                btncount++;

            }
            if(number_of_buttons_count == 20)
                break;
            y_ccord += 120;
            x_coord = 20;

        }
        scrollBack.contentSize = CGSizeMake(320, buttonYOffset + 200);

    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-07T08:06:27.083

```
 for (int i=0; i<totalButtons; i++){

       UIButton* abutton=[[UIButton alloc]initWithFrame:CGRectMake(0, 0, 100, 30)];
       [abutton setTitle:@"Button_Title" forState:UIControlStateNormal];
       abutton.tag=100+i;
       [abutton addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside];
       [gridView addSubview:abutton];
       //here you need to calculate and set the position for the button
       abutton.center=CGPointMake(calculated_X, calculated_Y);
       [abutton release];

    }

-(void) buttonClicked:(UIButton*)mybutton{
    NSLog(@"%d is the Tag",mybutton.tag);
    //here you do what you want with the indexed button clickes

} 
```

# mysql - 查询以按类型返回具有 HP 的口袋妖怪

> ID：13265250
> 
> 赞同：3
> 
> 时间：2012-11-07T07:44:52.917
> 
> 标签：mysql

我有一个充满口袋妖怪卡片的数据库，我想做一个查询以找到每种类型的 HP 最高的口袋妖怪。我希望视图只显示该口袋妖怪的名称、类型和 HP。

```
SELECT MAX(HP), Type, name FROM `Pokemon` group by Type 
```

我有这个代码。它返回最大 HP，但不返回正确的口袋妖怪。此代码是否会为单一类型显示具有相同 HP 的多行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T08:11:05.643

```
Select HP, Type, Name 
from `Pokemon` P inner join 
  (Select Type, Max(HP) MaxHP from `Pokemon` group by Type) MaxPerType 
on P.Type = MaxPerType.Type and P.HP = MaxPerType.MaxHP 
```

这将为您提供每种口袋妖怪类型的所有最高 HP 的列表

`MaxPerType`是每种类型的最高 HP 列表，然后您将其与所有可用口袋妖怪的总列表一起加入，并仅过滤掉每种类型具有最高 HP 的那些。

这将显示单个类型具有相同 HP 的多行。

顺便说一句，mssql 服务器中存在该`'OVER (PARTITION BY'`功能，这更容易，也可能更快。不知道这个在mysql中是否存在

语法是：

```
Select HP, Type, Name from 
  (Select HP, Type, Name, 
     ISNULL((ROW_NUMBER() OVER (PARTITION BY Type order by HP DESC)),0) As Ranking
   from `Pokemon`) P 
where P.ranking = 1 
```

`P.Ranking = 1`只会给你最高（最大）HP

Partition by`'Type'`与`group by`

优点是您不需要将表与自身连接，并且您可以在选择中选择您想要的任何列。包括像 Id 这样的列，这在按方案分组中是不可能的。（组中的 ID 意味着每条记录在结果中都有自己的行，当然如果 ID 是唯一的）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T07:46:58.020

试试这个：

```
SELECT p2.MAXHP, p2.Type, p1.name 
FROM `Pokemon` p1
INNER JOIN
(
   SELECT Type, MAX(HP) MaxHP
   FROM Pokemon
   GROUP BY Type
) p2 ON p1.type = p2.type AND p1.HP = p2.MaxHP 
```

这将为您提供所有具有最大 HP 的口袋妖怪名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T07:53:06.577

我还没有在 mysql 上测试过这个，但是 subselect join 应该可以工作

```
SELECT name from 'Pokemon' as p INNER JOIN (SELECT Max(HP) as maxhp, Type FROM 'Pokemon' GROUP BY TYPE) as maxh on maxhp = p.hp and maxh.Type = p.Type 
```

这将返回每个类别中具有最大生命值的每个口袋妖怪的名称

# node.js - server.js 中的 ldapjs 错误

> ID：13265255
> 
> 赞同：0
> 
> 时间：2012-11-07T07:45:20.717
> 
> 标签：node.js

我收到了这个错误：

```
/home/user/node_modules/ldapjs/lib/server.js:65
throw new TypeError('Invalid argument type: ' + typeof (argv[i]));
        ^
TypeError: Invalid argument type: undefined
at mergeFunctionArgs (/home/user/node_modules/ldapjs/lib/server.js:65:13)
at Server._mount (/home/user/node_modules/ldapjs/lib/server.js:814:35)
at Server.add (/home/user/node_modules/ldapjs/lib/server.js:500:15)
at Object.<anonymous> (/home/user/workspace/ldap/ldap.js:34:8)
at Module._compile (module.js:449:26)
at Object.Module._extensions..js (module.js:467:10)
at Module.load (module.js:356:32)
at Function.Module._load (module.js:312:12)
at Module.runMain (module.js:492:10)
at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

尝试在[ldapjs guide](http://ldapjs.org/guide.html)上进行测试时。

由于该服务无法启动，因此此错误几乎阻碍了进一步测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:33:21.450

您在`pre`ldapjs 被分配函数数组之前传递给它（`undefined`即当时是）。变量和函数声明被提升到顶部，但*赋值*不是。

移动这个

```
133\. var pre = [authorize, loadPasswdFile]; 
```

到顶部，或者至少在你将它传递给 ldapjs 之前。

该分配当前正在第 133 行进行，但您已经在第 34 行传递了它：

```
34\. server.add('ou=users, o=myhost', pre, function(req, res, next) 
```

顺便说一句，您应该能够通过在代码开头设置它来更好地查看错误的来源：

```
Error.stackTraceLimit = Infinity; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T07:50:13.640

我的“解决方案”是将整行注释掉。这肯定不是修复它的正确方法，但至少服务会在那时开始。

# java - 用两个斜线分隔转换处理文件保存

> ID：13265256
> 
> 赞同：1
> 
> 时间：2012-11-07T07:45:26.850
> 
> 标签：java, file, escaping

当我从弹出窗口保存文件时，路径就像这种格式

```
C:\Users\Test\Desktop\ed\file001.xml 
```

但要保存它，我需要使用：

```
StreamResult result = new StreamResult(new File("C:\\Users\\Test\\Desktop\\ed\\file001.xml"))). 
```

IE 文件夹之间有两个斜线分隔。

有没有标准的方法来解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T07:49:06.903

反斜杠需要在 String **literals**中转义，因为它们是特殊字符。但字符串字面`"a\\b"`量实际上是一个包含 a、一个反斜杠和 b 的字符串。如果您打印它，它将显示`a\b`. 就像字符串文字`"a\nb"`是一个包含 a、一个换行符和 b 的字符串。

你没有什么可做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T07:47:57.093

由于反斜杠`\` *转义*了后面的字符，因此您必须在 String 中转义它。

在要转义的字符是 的类似问题上查看我[的旧答案](https://stackoverflow.com/questions/9109879/why-so-many-s-there-in-this-code-what-is-the-usage-of-it/9109897#9109897)`"`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T07:47:45.767

您可以使用`/`而不是`\\`. 或者使用使用`File.separatorChar`这是系统相关的默认名称分隔符。

```
new StreamResult(new File("C:/Users/Test/Desktop/ed/file001.xml"))). 
```

# javascript - 在 IE8 的 HTML 中嵌套引号

> ID：13265258
> 
> 赞同：1
> 
> 时间：2012-11-07T07:45:44.553
> 
> 标签：javascript, html, internet-explorer-8

我有一些代码如下：

```
<script type='text/javascript'>

function display(obj) {
    var targetDiv = document.getElementById(obj);
    targetDiv.style.display='inline-block';
}

</script>

<input onClick="display('id')">      <!-it doesn't work in IE8->

<input onClick="display('id');">      <!-it works in IE8->

<input onClick='display("id")'>      <!-it works in IE8-> 
```

目标块的原始样式是“display:none;”，上面代码的目的是显示块。我是 HTML/Js 的初学者，有人可以向我解释一下吗？无论如何，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:33:37.280

所有备选方案都是正确的，并且具有完全相同的效果。分号在这里没有影响；无论您是否在这样的上下文中使用它，这只是编码风格的问题。双引号和单引号在此处正确使用时具有相同的含义。

你面临的问题（不管它是什么——你没有具体说明“不起作用”是什么意思）在其他地方，在一些没有公开的代码中。将来，如果可能，请提供一个独立的最小文档来重现该问题，最好带有 jsfiddle 链接以便快速检查。

# c# - 如何使用C#来确认一台计算机是否有硬盘raid？

> ID：13265259
> 
> 赞同：1
> 
> 时间：2012-11-07T07:45:44.257
> 
> 标签：c#

我可以使用 C# 来确认计算机是否有硬盘袭击吗？WMI 只能知道计算机上有多少个硬盘。没有关键字可以知道电脑有没有raid。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T08:03:52.257

一般来说，没有。

Windows 确实提供了一种软件 RAID 的实现，称为“动态磁盘”，但它并不常用。

当消费级机器和笔记本电脑使用 RAID 时，通常会在主板芯片组中内置 RAID 控制器。在服务器和工作站中，它通常由专用的附加卡（LSI、Adaptec 等）提供，它通常提供附加功能，例如带有备用电池的大型非易失性缓存，并且可以将计算机连接到外部 SAN或直接连接的存储系统（想想：一个装满硬盘的机架，用一根粗大的电缆连接——这不是 eSATA）。

在这两种情况下，硬件 RAID 控制器将 RAID 卷作为通用卷呈现给操作系统。操作系统确实需要驱动程序来使用控制器，但不能保证驱动程序提供必要的元数据来使用 WMI 或虚拟磁盘服务之类的东西查询 RAID 状态。我操作的所有戴尔 PowerEdge 服务器都是这种情况——它们有自己的 RAID 管理系统，根本没有与 Windows 集成（事实上，太糟糕了，我无法阻止 Windows Server 抱怨磁盘缓存设置）。

但我有一个问题：你为什么关心用户是否使用 RAID 卷？例如，有人可能正在使用 RAID0，它提供零保护（只是性能提升）。

您可以通过根据已知 RAID 控制器的数据库检查控制器名称来检测 RAID 的存在，但这需要定期维护。

# javascript - Javascript SLAP 游戏惩罚不守规矩的编码员

> ID：13265264
> 
> 赞同：2
> 
> 时间：2012-11-07T07:45:54.833
> 
> 标签：javascript, jquery

我的程序员错过了最后期限，我们的客户很生气，有没有我可以指导他们玩的“打程序员”的 JavaScript 游戏，这样他们就可以发泄愤怒？有点像打猴子，你用动画手打它：[http](http://www.suvi.org/funstuff/slapit.html) ://www.suvi.org/funstuff/slapit.html 然后我会放他的照片而不是猴子;-)

# javascript - ASP.NET 如何将 Eval("") 发送到 javascript 方法以操作其值

> ID：13265265
> 
> 赞同：0
> 
> 时间：2012-11-07T07:46:06.487
> 
> 标签：javascript, asp.net

我有以下代码工作正常

```
 <asp:TemplateField>
        <ItemTemplate>
            <div runat="server" id="divFileName" class="divFileName" title='<%# Eval("FileName")%>'>
                <%# Eval("FileName")%></div>
        </ItemTemplate>
    </asp:TemplateField> 
```

的结果`Eval("FileName")`返回一个完整的路径字符串，如下所示：

> C:\Windows\Microsoft.NET\Framework\sbs_diasymreader.dll

我想在客户端发送`Eval("FileName");`到一个 javascript 方法，该方法将裁剪`Eval("FileName");`值并仅返回文件名而不返回完整路径。（对于这个例子，它应该返回`sbs_diasymreader.dll`）

我试图实现的结果是，最终当前包含带路径的全名的表将只显示没有路径的文件

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T08:12:31.657

如果**FileName**字段包含完整路径，您可以使用[FileInfo](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.aspx)类

```
<%# new FileInfo((string)Eval("FileName")).Name %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T08:24:27.067

该表达式是在服务器端处理的，您无法在网格中显示 javascript 的返回值，您只需调用函数即可。改为这样做

```
<asp:TemplateField HeaderText="File Name">
<ItemTemplate>
   <%# System.IO.Path.GetFileName(Eval("FileName").ToString()) %>
</ItemTemplate>
</asp:TemplateField> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T08:26:05.213

在 VB.NET 中，您可以使用以下内容或 Adrian Iftode 提到的内容。

```
<%# FileIO.FileSystem.GetName(Eval("FileName").ToString()) %> 
```

或者，您可以使用您的代码并编写 jQuery 来遍历每个跨度（相应地更新您的选择器），如下所示：

```
 <script type="text/javascript">
        $(document).ready(function () {
            $("span").each(function () {
                $(this).text(getFileName($(this).text()));
            });
        });

        function getFileName(filePath) {
            var index = filePath.lastIndexOf("\\") + 1;
            return filePath.substring(index, filePath.length);
        }
    </script> 
```

# android - SubMenuset 如何将菜单设置为单选按钮

> ID：13265268
> 
> 赞同：0
> 
> 时间：2012-11-07T07:46:30.487
> 
> 标签：android

我添加了两个子菜单项。当我设置 setCheckable(true) 时，它会更改 CheckBox。如何将其设置为单选按钮？单击一次只能选择一个，显示图标然后关闭子菜单。

```
settingMenu.add(1, SETTING_SECOND_ID, 0, R.string.menu_setting_second).setCheckable(true);  
settingMenu.add(1, SETTING_100MILLISECOND_ID, 1, R.string.menu_setting_100milisec).setCheckable(true); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T08:13:31.537

您可以使该组成为可[独占](http://developer.android.com/reference/android/view/Menu.html#setGroupCheckable%28int,%20boolean,%20boolean%29)的。在您的情况下，该组是 1。因此像这样的电话

```
settingMenu.setGroupCheckable(1, true, true); 
```

会变魔术。

# ado - 从 Inno 设置中捕获 ADO 选择查询返回的空行

> ID：13265271
> 
> 赞同：1
> 
> 时间：2012-11-07T07:46:39.177
> 
> 标签：ado, inno-setup

我正在使用 ADO 连接从 Inno 设置连接到 SQL，我正在运行一些选择查询，我将它捕获到一个变量中，如果选择查询返回空行，它会抛出“无效的变体类型转换”错误。我不确定我是否可以使用该`VarIsNull`选项以及如何在我的代码中使用它。请帮忙。下面是示例代码。

```
ADOCommand := CreateOleObject('ADODB.Command');
 ADOCommand.ActiveConnection := ADOConnection;
 SQLQuery := 'SELECT Name FROM sys.databases where name=''' + DBValue + '''';
 ADOCommand.CommandText := SQLQuery;
 ADOCommand.CommandType := adCmdText;
 ADORecordset := ADOCommand.Execute;
 Name := ADORecordset.Fields(0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T05:28:32.047

您可以在将值分配给 Name 变量之前检查返回的记录集是否为空。

一个空的记录集将在您打开它后立即为 EOF 属性返回 true，在代码中它可能类似于以下示例：

```
 SQLQuery := 'SELECT Name FROM sys.databases where name=''' + DBValue + '''';
  ADOCommand.CommandText := SQLQuery;
  ADOCommand.CommandType := adCmdText;
  ADORecordset := ADOCommand.Execute;
  if ADORecordset.EOF then
  begin
    MsgBox('No records', mbInformation, mb_Ok);
    exit;
  end
  else begin
    Name := ADORecordset.Fields(0);
    MsgBox('Name ''' + Name + '''.', mbInformation, mb_Ok);
  end; 
```

# jquery - jquery改变div的位置

> ID：13265272
> 
> 赞同：2
> 
> 时间：2012-11-07T07:46:41.823
> 
> 标签：jquery, position

我想在向下/向上滚动时更改 div 的固定/相对位置，在
本地工作正常但在服务器上不工作

```
$(window).scroll(function(){
        if($(window).scrollTop()>100)
        {
            $("#searchBar").css({
                'position':'fixed',
                'top':'0px',
                'left':$("#wrapper").offset().left+1,
                'width':$("#wrapper").width()
            });
        }
        if($(window).scrollTop()<=100)
        {
            $("#searchBar").css({
                'position':'relative',
                'left':'0px'
            });
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-28T23:28:16.297

服务器对元素使用不同的 id。所以尝试用这个从服务器获取 id。

你`$("#searchBar")`应该是`$("[id$=searchBar]")`，而且`$("#wrapper")`应该是`$("[id$=wrapper]")`。这对我来说非常有效。

# android - 如何向 Android 应用程序投放广告

> ID：13265273
> 
> 赞同：0
> 
> 时间：2012-11-07T07:46:41.217
> 
> 标签：android

我想在 android 上创建一些免费的应用程序，但我想添加一些广告来赚钱。如何找到好的教程如何将广告添加到我的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T07:50:56.547

西蒙是对的，这取决于广告网络。最简单的方法之一是 Google 的 AdMob，这里有它的[教程](https://developers.google.com/mobile-ads-sdk/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T07:52:04.443

您应该联系广告提供商，例如**`admob`**. 检查一下。还有更多可用的添加提供程序。

# model-view-controller - AngularJS 与服务器端 MVC 框架的集成

> ID：13265279
> 
> 赞同：0
> 
> 时间：2012-11-07T07:46:58.910
> 
> 标签：model-view-controller, frameworks, angularjs, server-side

我用 AngularJS 创建了一个应用程序。现在对于后备和一些可扩展的功能，我想将它与其他一些 MVC 框架集成，如 JSF2、Struts2、Spring MVC、ruby on rails 等。任何人都可以建议我是否可以这样做。我应该使用哪个框架。你能分享一些教程/例子吗？它必须是 RESTful 的；这样我就可以控制流量...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T06:12:21.877

我已经写过关于通过 Express.js 服务器端 MVC 库[将 AngularJS 与 Node.js 一起使用的文章。](http://briantford.com/blog/angular-express.html)正如 Florian 所说，您可以使用任何您喜欢的后端，但 Node.js 是我个人的最爱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T09:38:32.193

当然，Angular 在任何服务器端解决方案上都不严格。您可以使用任何您想要构建 RESTful 服务的技术。

# javascript - 如何获取输入（类型=“文件”）框的onText更改事件

> ID：13265280
> 
> 赞同：0
> 
> 时间：2012-11-07T07:47:06.897
> 
> 标签：javascript

我有以下代码

```
<input id="url" type="text" value="blab.ogg"/>
<input id="fileUrl" type="file" size="1" onblur="document.getElementById('url') =  this.value"/> 
```

如果有人通过文件选择器插入文件，我需要在 , 中设置相同的文本`fileUrl`。`url`

什么是触发输入文本动态变化的事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T07:52:09.233

尝试`onchange`事件：

```
<input id="fileUrl" type="file" size="1" 
onchange="document.getElementById('url').value =  this.value"/> 
```

此外，如您所见，您应该将文件输入值分配给 url 输入的值：

```
document.getElementById('url').value =  this.value 
```

# offline - 用于蜘蛛测试的离线大站点下载

> ID：13265281
> 
> 赞同：0
> 
> 时间：2012-11-07T07:47:09.653
> 
> 标签：offline, web-crawler

为了测试离线爬虫功能，我正在寻找下载巨大的网站档案或类似的东西。
所以我可以设置网络服务器来测试蜘蛛，
网上有什么东西可以下载吗？

# java - 如何正确使用 ProcessBuilder

> ID：13265282
> 
> 赞同：1
> 
> 时间：2012-11-07T07:47:10.260
> 
> 标签：java, windows, runtime, runtime.exec

我试图弄清楚如何使用`ProcessBuilder`. 这个微不足道`dir`的甚至不起作用。我究竟做错了什么？

```
Process pb = new ProcessBuilder("cmd","dir C:\\").start();  
InputStream in = pb.getInputStream();  
BufferedReader br = new BufferedReader(new InputStreamReader(in));  
String line;  
while ((line = br.readLine()) != null) {  
    System.out.println(line);  
} 
```

输出只有：

> Microsoft Windows XP [版本 5.1.2600] (C) 版权所有 1985-2001 Microsoft Corp.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T08:34:55.307

尝试

```
Process p = new ProcessBuilder("cmd", "/C", "dir") 
```

Dir 是 shell 的命令。/C 告诉 shell 解释参数。

# c# - 当子类的对象被称为超类时，子类中重写的方法是否仍会被调用？

> ID：13265284
> 
> 赞同：1
> 
> 时间：2012-11-07T07:47:19.667
> 
> 标签：c#, oop, inheritance

好的，可以说我有两个具有相同方法（sampleMethod）的类，它们被孩子覆盖：ObjectParent 和 ObjectChild

```
ObjectChild ExampleVariable = new ObjectChild();
(ExampleVariable as ObjectParent).sampleMethod(); 
```

这会从 ObjectChild 还是从 ObjectParent 调用 sampleMethod？

我认为它会从 ObjectChild 调用 sampleMethod，但我想在基于该假设丢掉一堆代码之前确定一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T07:49:46.743

如果它被覆盖（而不是隐藏），那么在运行时将使用子类的实现。这是多态性的要点之一。您不需要知道对象的实际运行时类型是什么，并且可以将其视为基类的实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T08:14:17.347

正如 Jon Skeet 所说......“假设它确实是一个被**正确覆盖**（而不是仅仅被隐藏）的虚拟方法，它将调用 ObjectChild 实现。”

这里假设你在父类的方法之前使用了 virtual 关键字，在子类的方法之前使用了 override 关键字。

否则......有两件事需要考虑：

1.  父类的方法是否只是被隐藏。要调查此类案件..请查看以下链接：http: [//msdn.microsoft.com/en-us/library/ms173153.aspx](http://msdn.microsoft.com/en-us/library/ms173153.aspx)和 [http://msdn.microsoft.com/en-us/library/ 6fawty39.aspx](http://msdn.microsoft.com/en-us/library/6fawty39.aspx)

2.  提供给方法的访问级别（有时在父级和子级中可能不同）。override 方法和 virtual 方法都必须具有相同的访问级别修饰符，但如果您没有使用这些修饰符，则可以选择。

只有经过以上考虑，我们才能得出有关情况的结论。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T07:50:17.610

> 这会从 ObjectChild 还是从 ObjectParent 调用 sampleMethod？

假设它*确实*是一个被正确覆盖（而不是仅仅被隐藏）的虚拟方法，它将调用`ObjectChild`实现。这就是虚方法的全部意义——你不需要在编译时知道执行时的类型。例如，我可以使用`Stream.Read`（例如，将`Stream`用作参数）编写一个方法，而不知道它最终将使用哪个*实现*。`Stream`在执行时，代码最终可能会从网络、内存、磁盘读取……我的方法的代码既不知道也不知道大小写。

简短但完整的程序演示了这一点：

```
using System;

class ObjectParent
{
    public virtual void Foo()
    {
        Console.WriteLine("ObjectParent.Foo");
    }
}

class ObjectChild : ObjectParent
{
    public override void Foo()
    {
        Console.WriteLine("ObjectChild.Foo");
    }
}

class Test
{
    static void Main()
    {
        // Simpler code to demonstrate the point
        ObjectParent parent = new ObjectChild();
        parent.Foo(); // Prints ObjectChild.Foo
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T07:51:10.970

这取决于您的 sampleMethod 是否是`virtual`和`overriden`.. 那么是的。但也可能有：

```
ObjectParent ExampleVariable = new ObjectChild();
ExampleVariable.sampleMethod(); 
```

`virtual`表示此方法是多态的，可以被派生类型覆盖。`overridden`意味着派生类在这种情况下**实际上从基类覆盖**了 sampleMethod 的实现。我想答案就在关键字本身中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-07T07:51:37.013

是的，它调用`ObjectChild.sampleMethod()`，因为您可以轻松地测试：

```
class ObjectParent
{
    public virtual void sampleMethod()
    {
        Console.WriteLine("Parent");
    }
}

class ObjectChild : ObjectParent
{
    public override void sampleMethod()
    {
        Console.WriteLine("Child");
    }
} 
```

# internet-explorer - 为什么 SignalR 在 IE 上使用 Forever Frame 而不是 Server-Sent 事件？

> ID：13265288
> 
> 赞同：0
> 
> 时间：2012-11-07T07:47:39.360
> 
> 标签：internet-explorer, signalr, server-sent-events

为什么 SignalR 在 IE 上使用 Forever Frame 而不是 Server-Sent 事件？是因为 IE 不支持 SSE 还是没有 Forever Frame 方法那么有效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T11:57:56.283

这是因为 IE[不支持 SSE](http://caniuse.com/#feat=eventsource)，因此使用了永久帧或长轮询形式的后备传输。

# javascript - Access-Control-Allow-Origin 不允许 Origin null

> ID：13265293
> 
> 赞同：0
> 
> 时间：2012-11-07T07:47:45.953
> 
> 标签：javascript, jquery, load, access-control

我遇到了这个问题，有人帮我解决这个问题，这真的很痛苦。我在 ipad 上使用 swipejs 进行轮播，所以它可以正常工作，直到我不包括 jquery.js 但是当我包含 jquery.js 脚本时，它会给出以下错误 XMLHttpRequest cannot load file://localhost/Applications/MAMP/htdocs /Digital/phonegap/www/swipe.js?_=1352274440669。Access-Control-Allow-Origin 不允许 Origin null。

有谁能够帮我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T06:47:35.347

启用 cors 有两个方面
1\. 客户端 确保 Cors 已启用。可以通过 meta http-equiv="Access-Control-Allow-Origin" content="*" 或使用任何其他选项来完成。

1.  服务器端确保在服务器端启用了 Cors。考虑上面的 url 在 rest 客户端或高级 rest 客户端中触发，如果启用了检查 cors，则响应消息应该有这个 Access-Control-Allow-Origin: * in header

您的问题的解决方案是上述 url 可能未启用 cors，请通过在客户端使用高级 restclient 触发 url 检查是否默认启用或不启用它。

# matrix - SciPy和Numpy伪逆的区别

> ID：13265299
> 
> 赞同：14
> 
> 时间：2012-11-07T07:48:06.220
> 
> 标签：matrix, numpy, scipy

我发现有两个版本的函数，它计算和`pinv()`中的矩阵的伪逆，文档可以在以下位置查看：`Scipy``numpy`

[http://docs.scipy.org/doc/numpy/reference/generated/numpy.linalg.pinv.html](http://docs.scipy.org/doc/numpy/reference/generated/numpy.linalg.pinv.html)

[http://docs.scipy.org/doc/scipy/reference/generated/scipy.linalg.pinv.html](http://docs.scipy.org/doc/scipy/reference/generated/scipy.linalg.pinv.html)

问题是我有一个 50000*5000 的矩阵，使用 时`scipy.linalg.pinv`，它花费了我超过 20GB 的内存。但是当我使用时`numpy.linalg.pinv`，只使用了不到 1GB 的内存..

我想知道为什么`numpy`两者`scipy`都有`pinv`不同的实现。以及为什么他们的表现如此不同。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-07T08:39:15.840

我无法解释为什么 scipy 和 numpy 都有实现，但我可以解释为什么行为不同。

`numpy.linalg.pinv`使用 SVD（准确地说是 lapack 方法`dgesdd`）逼近 Moore-Penrose 伪逆，而`scipy.linalg.pinv`在最小二乘意义上求解模型线性系统以逼近伪逆（使用`dgelss`）. 这就是他们的表现不同的原因。我希望得到的伪逆估计的整体准确性也会有所不同。

您可能会发现它的`scipy.linalg.pinv2`性能与 更相似 `numpy.linalg.pinv`，因为它也使用 SVD 方法，而不是最小平方近似。

# codeigniter - CodeIgniter 中参数错误时重定向

> ID：13265304
> 
> 赞同：0
> 
> 时间：2012-11-07T07:48:40.150
> 
> 标签：codeigniter, codeigniter-2, codeigniter-routing

例如，我有一个工作网址：

```
http://localhost/article/154 
```

其中 154 是db 中文章的**$id ，控制器****文章**如下所示：

```
function index ($id = '')
{

// some code here

} 
```

现在，当我输入如下内容时：

```
http://localhost/article/154dsdead34 
```

我收到错误，因为该 ID 不在我的数据库中。但是，页面上显示了 php 错误，整个页面都搞砸了。

相反，我需要一个重定向到我的名为**custom404**的控制器来处理这个问题（或者如果由于某种原因不可能，至少直接重定向（'/'）; 到主页）

对于变体的相同修复（对于大 $id 编号或在 db 中找不到）：

```
http://localhost/article/3004534534534234600234 
```

或（其他参数）

```
http://localhost/article/154/something/derer/asdasd 
```

如何在 CodeIgniter 中进行此类安全检查？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T09:38:26.023

有很多方法可以做到这一点。

在函数内部，定义`($id = NULL)`它跳过空错误，第一条语句可以是`if ( ! is_numeric($id)) show_404();`

你也可以运行`$id = (int)$id;`which 应该`154dsdead34`变成`154`.

路由也是一种选择。你更喜欢什么？

你可以这样做；在函数内部运行：

```
if ( ! preg_match("~^article/\d+$~", $this->uri->uri_string())) {
    // Redirect user
} 
```

相应地改变。`~`打开和关闭正则表达式。这通常是`/`，但`~`你不必逃避`/`( `\/`)。`^`是字符串的开头，`$`也是结尾。`\d+`等于`[0-9]+`并且需要一位或更多位的大小写。我希望这是有道理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T08:01:43.803

通过 config 文件夹中的 routes.php，只检查需要使用的 6 位数字

```
$route['article/([0-9]{1,6})'] = 'article/$1' ; 
```

并将所有其他情况提到 404 或发送给任何其他控制器

# drupal-6 - (upload_fid) Drupal 令牌

> ID：13265305
> 
> 赞同：1
> 
> 时间：2012-11-07T07:48:42.010
> 
> 标签：drupal-6, drupal-views, token

我的 [upload_fid] drupal 令牌有问题，此令牌获取节点中所有上传的文件，我只想获取第一个上传的文件，请帮助我。

谢谢

# php - Paypal IPN：手动调查日志

> ID：13265309
> 
> 赞同：0
> 
> 时间：2012-11-07T07:49:05.547
> 
> 标签：php, logging, error-handling, paypal, paypal-ipn

在[paypal 的 PHP5.2 的 IPN 示例代码中](https://www.x.com/developers/PayPal/documentation-tools/code-sample/216623)，在最后几行中，他们得到了“日志以供手动调查”的注释。

```
else if (strcmp ($res, "INVALID") == 0) {
    // log for manual investigation
} 
```

我应该记录什么样的信息以及如何记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T08:34:08.317

好吧，您必须通过 $_POST 变量记录您从贝宝获得的答案。

如果您使用框架或 CMS，它可能具有日志记录功能。否则你可以使用 PHP 的`error_log`函数

例如：

```
$post_vars = var_export($_POST, true);
error_log("IPN Result: " . $res, 3, "/var/tmp/ipn.log");
error_log("POST_VARS: " . $post_vars, 3, "/var/tmp/ipn.log"); 
```

其中 /var/tmp/ipn.log 是您的日志文件应该出现的自定义路径。

# ios - Facebook iOS SDK 3.1.1 安装问题

> ID：13265314
> 
> 赞同：4
> 
> 时间：2012-11-07T07:49:14.953
> 
> 标签：ios, xcode, facebook, svn, ios6

我发现很难正确连接新的 Facebook SDK。我按照[这个](http://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/)分步指南进行操作，并对这个版本的 SDK 需要实际安装 .pkg 感到非常惊讶。不仅如此，SDK 还需要被项目引用（而不是复制进去）。那么如果有人签出项目的工作副本并且没有在相同的确切相对路径中安装会发生什么？此外，我在配置 SDK 路径时遇到困难，即使合作者确实将 SDK 安装在相同的相对路径中（未找到 SDK，每次提交都需要重新附加），它也能正常工作。

这是一个巨大的不便，我想知道是否有人成功地解决了这个问题。我尝试将资源复制到项目中，但没有骰子（不构建）。

感谢您的时间和努力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T07:30:14.143

实际上，可以从源头连接 Facebook SDK 3.1.1。

只需从[https://github.com/facebook/facebook-ios-sdk](https://github.com/facebook/facebook-ios-sdk)获取源代码，然后将“src/”文件夹添加到您的项目中。而且您必须删除“测试”和“包”文件夹，它们不是必需的。

其他步骤（添加框架、链接器标志）应根据指南完成。希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T13:50:12.623

想出了一个解决方案：将“~/Documents/FacebookSDK/”添加到目标的“框架搜索路径”中，并将“始终搜索用户路径”设置为“是”。

# php - ajax php页面中的TinyMce集成

> ID：13265316
> 
> 赞同：1
> 
> 时间：2012-11-07T07:49:16.400
> 
> 标签：php, ajax, tinymce

我创建了一个 html 页面，其中有 1 个按钮单击第一个将通过 ajax 调用 php 文件“1.p​​hp”，其中有一个带有文本区域的 tinymce 编辑器。打开页面后，我按下按钮编辑器是出现在屏幕上，但是当我第二次按下按钮时，问题出现了，编辑器刚刚消失，一个简单的文本区域取而代之。知道为什么会发生这个错误，

此外，我尝试在附加微型编辑器之前添加一个检查部分，以检查是否已经附加了一个编辑器，然后旧的将被删除，而新的将发生。此代码在 google chrome 中成功运行 100%，但在firefox / ie.This问题只是把我搞砸了，需要想法。

* * *

检查以前的 TINYMCE 集成并删除以下代码工作正常

```
 var oldEditor = tinyMCE.get('message');
    if (oldEditor != undefined) {
    tinymce.remove(oldEditor);
   }
    tinyMCE.execCommand('mceAddControl', false, 'message');
     //MESSAGE IS THE NAME OF TEXT AREA ON WHICH TINYMCE IS GOING TO BE INTEGRATED 
```

# c++ - 找不到错误出现的原因

> ID：13265318
> 
> 赞同：3
> 
> 时间：2012-11-07T07:49:28.387
> 
> 标签：c++, compiler-errors

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-07T07:54:51.047

在 C++ 中，您不能将值分配给函数外部的全局数组。在 main 函数中移动以下行：

```
f[0]=1;
f[1]=1;
go[0]=1;
go[1]=1; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T07:59:12.420

您应该只为函数声明中的变量赋值。

```
#include<iostream>
using namespace std;
int go[10000],f[10000],n,i;
int g(int x) {
    return (f[x-1] + go[x-1]);
}
int main() {

f[0]=1;
f[1]=1;
go[0]=1;
go[1]=1;

    cin>>n;

     for (i=2;i<=n;i++) {
        f[i]=f[i-1]+f[i-2]+(2*g(i-2));
    }
    cout<<f[i];
    system("PAUSE");
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-07T10:20:55.823

您不能在文件范围内进行分配。
但是，您可以进行初始化。
像这样：

```
int go[10000] = {1, 1};  // The remaining 9998 elements will be set to zero automatically.
int f[10000] = {1, 1}; 
```

或者移动里面的作业`main`。

# java - 如何以编程方式配置映射？

> ID：13265319
> 
> 赞同：1
> 
> 时间：2012-11-07T07:49:35.883
> 
> 标签：java, hibernate, mapping, persistent

我们的 Hibernate 配置映射已经以编程方式在 中实现`java`，不是 with`annotation`和 not with`XML`映射。

当上下文初始化时，我们在 Hibernate Mappings 实例中设置了一个映射类层次结构，例如：

```
Mappings mappings = configuration.createMappings();
mappings.addClass(PersistentClass instance); 
```

现在，我面临的问题非常简单，但我没有找到如何为我们的实现添加它的示例。

让我们这么说

我们有 2 个表`A`并且`B`具有多对一关系， `A.type_id = B.id.`我想从`A`以下条件中检索所有记录： `A.type_id = B.id and B.id = 4;`

如何在我的映射对象中添加关联（多对一）。`org.hibernate.mapping.RootClass.`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-27T08:02:58.770

这个问题很老，但也许答案可以帮助其他人。

这个话题很复杂，在这里要回答。不幸的是，Hibernate 文档没有包含很多信息，甚至源代码本身也根本没有记录。

这篇博客文章[http://portofino.manydesigns.com/en/blog/configuring-hibernate-programmatically](http://portofino.manydesigns.com/en/blog/configuring-hibernate-programmatically)（以及它的第二部分）概述了如何以编程方式创建映射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T11:00:10.087

看看[这里的答案](https://stackoverflow.com/questions/16480851/unsupportedoperationexception-the-application-must-supply-jdbc-connections)

另请注意， .addclass 并不像您想象的那么容易。您需要 cfg.xml 和 hbm 文件组合。

# svn - TortoiseSVN 崇高 2 和 Windows

> ID：13265321
> 
> 赞同：1
> 
> 时间：2012-11-07T07:49:57.193
> 
> 标签：svn, tortoisesvn, text-editor, sublimetext2

Sublime 2 文本编辑器似乎有一个问题，当我右键单击并从 TortoiseSVN 编辑文件并在 Sublime 中打开时，我可以对其进行编辑。如果（且仅当）没有其他选项卡打开，它将允许我保存文件（在其临时位置），然后 SVN 将在提示我签入注释后将其重新提交。

但...

如果我打开了多个选项卡，它将不允许保存，因此我不会收到签入提示，也不会返回 SVN。我必须打开 Sublime，关闭所有选项卡，关闭 Sublime，然后右键单击并从 TortoiseSVN 中编辑文件，保存它，然后再次提示进行签入。

有没有人见过这种行为？如果是这样，您是如何解决的，或者您使用了什么其他组合？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:41:39.457

TSVN 在尝试自动提交之前等待编辑器关闭。如果您打开了多个选项卡并仅保存其中一个但保持编辑器运行，TSVN 无法知道您已保存文件并关闭了编辑器的选项卡。

它只能检测编辑器**进程**是否关闭，而不是选项卡是否关闭。

# android - Android ksoap2 使用 AsyncTask 引发异常

> ID：13265331
> 
> 赞同：3
> 
> 时间：2012-11-07T07:50:28.323
> 
> 标签：android, android-asynctask, ksoap2

我有一个连接到 Web 服务并返回 SoapObject 的函数。如果我在没有 AsyncTask 的情况下直接调用此函数，则此函数可以正常工作，但以下代码会引发异常。有什么建议么？

```
 private class LoginTask extends AsyncTask<String, Object, Object> {
    protected SoapObject doInBackground(String... params) {
       try
       {
          return callWebService("a","a");           
       }
       catch (Exception e)
       {
          return null;
       }
    }
    protected void onPostExecute(SoapObject result) {
        setErrorText(result);
    }

 }

private SoapObject callWebService(String UserName, String Password) {

    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
    request.addProperty("UserName", UserName);
    request.addProperty("Password", Password);

    SoapSerializationEnvelope envelope = new    SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.dotNet = true;
    envelope.setOutputSoapObject(request);

    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
    androidHttpTransport.debug = true;

    try {
        androidHttpTransport.call(SOAP_ACTION, envelope);
        SoapObject response = (SoapObject) envelope.getResponse(); //this code causes the problem
        return response;
    } catch (IOException e) {
        e.printStackTrace();
        return null;
    } catch (XmlPullParserException e) {
        e.printStackTrace();
        return null; //Directly jumps to here
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:48:18.310

如果您将任务声明更改为：

```
 private class LoginTask extends AsyncTask<String, Object, Object> 
```

至

```
 private class LoginTask extends AsyncTask<String, Object, SoapObject> 
```

你的 onPostExecute() 应该执行。

# java - Java/Android：getHostName() 对于 InetSocketAddress 始终为空

> ID：13265332
> 
> 赞同：0
> 
> 时间：2012-11-07T07:50:42.183
> 
> 标签：java, android, ports, gethostbyname, inet-socket

我正在使用一个使用开源 java 库 (Calimero) 的 Android 应用程序。我的代码尝试使用以下代码获取主机名和端口：

```
private static KNXNetworkLinkIP connect(InetSocketAddress isaLocalEP, InetSocketAddress isaRemoteEP)
  {
    KNXNetworkLinkIP netLinkIp = null;

    int serviceMode = KNXNetworkLinkIP.TUNNEL; // tunnel to IP router
    boolean useNAT = true; // NAT not used for PC true or false , but needed for emulator = true
    KNXMediumSettings tpSettings = new TPSettings(true); // TP1 medium

    try
    {
      // Output the local end point address

      if (m_debugOutput == true)
      {
        System.out.println("..Tunneling, NAT ignored, TP1 medium");

        // Should be the PC's VPN address

        System.out.print("..Local  EP:");
        System.out.println(isaLocalEP.getHostName() + ":" + isaLocalEP.getPort());

        System.out.print("..Remote EP:");
        System.out.println(isaRemoteEP.getHostName() + ":" + isaRemoteEP.getPort());

        System.out.print("..useNAT:");
        System.out.println(useNAT);

        System.out.println();
      }

      netLinkIp = new KNXNetworkLinkIP(serviceMode, isaLocalEP, isaRemoteEP, useNAT, tpSettings);
    }
    catch (KNXLinkClosedException e)
    {
      System.out.println("connect:KNXLinkClosedException = " + e.getMessage());
    }
    catch (KNXFormatException e)
    {
      System.out.println("connect:KNXFormatException = " + e.getMessage());
    }
    catch (KNXException e)
    {
      System.out.println("connect:KNXException = " + e.getMessage());
    }
    catch (Exception e)
    {
      System.out.println("connect:Exception = " + e.getMessage());
    }
    return netLinkIp;

  } // connect(isaLocalEP, isaRemoteEP) 
```

问题出在这一行：

```
 netLinkIp = new KNXNetworkLinkIP(serviceMode, isaLocalEP, isaRemoteEP, useNAT, tpSettings); 
```

这里是 KNXNetworkLinkIP 的代码

```
 /*
    Calimero - A library for KNX network access
    Copyright (C) 2006-2008 W. Kastner

    This program is free software; you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation; either version 2 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program; if not, write to the Free Software
    Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
*/

package tuwien.auto.calimero.link;

import java.net.InetAddress;
import java.net.InetSocketAddress;
import java.net.NetworkInterface;
import java.net.SocketException;
import java.net.UnknownHostException;

import tuwien.auto.calimero.CloseEvent;
import tuwien.auto.calimero.FrameEvent;
import tuwien.auto.calimero.GroupAddress;
import tuwien.auto.calimero.IndividualAddress;
import tuwien.auto.calimero.KNXAddress;
import tuwien.auto.calimero.Priority;
import tuwien.auto.calimero.cemi.CEMIFactory;
import tuwien.auto.calimero.cemi.CEMILData;
import tuwien.auto.calimero.cemi.CEMILDataEx;
import tuwien.auto.calimero.exception.KNXException;
import tuwien.auto.calimero.exception.KNXIllegalArgumentException;
import tuwien.auto.calimero.exception.KNXTimeoutException;
import tuwien.auto.calimero.knxnetip.KNXConnectionClosedException;
import tuwien.auto.calimero.knxnetip.KNXnetIPConnection;
import tuwien.auto.calimero.knxnetip.KNXnetIPRouter;
import tuwien.auto.calimero.knxnetip.KNXnetIPTunnel;
import tuwien.auto.calimero.link.event.NetworkLinkListener;
import tuwien.auto.calimero.link.medium.KNXMediumSettings;
import tuwien.auto.calimero.link.medium.PLSettings;
import tuwien.auto.calimero.link.medium.RFSettings;
import tuwien.auto.calimero.link.medium.TPSettings;
import tuwien.auto.calimero.log.LogManager;
import tuwien.auto.calimero.log.LogService;

/**
 * Implementation of the KNX network link based on the KNXnet/IP protocol, using a
 * {@link KNXnetIPConnection}.
 * <p>
 * Once a link has been closed, it is not available for further link communication, i.e.
 * it can't be reopened.
 * <p>
 * If KNXnet/IP routing is used as base protocol, the send methods with wait for
 * confirmation behave equally like without wait specified, since routing is an
 * unconfirmed protocol. This implies that no confirmation frames are generated, thus
 * {@link NetworkLinkListener#confirmation(FrameEvent)} is not used.
 * <p>
 * IP address considerations:<br>
 * On more IP addresses assigned to the local host (on possibly several local network
 * interfaces), the default chosen local host address can differ from the expected. In
 * this situation, the local endpoint has to be specified manually during instantiation.
 * <br>
 * Network Address Translation (NAT) aware communication can only be used, if the
 * KNXnet/IP server of the remote endpoint supports it. Otherwise, connection timeouts
 * will occur. With NAT enabled, KNXnet/IP accepts IPv6 addresses. By default, the
 * KNXnet/IP protocol only works with IPv4 addresses.<br>
 * 
 * @author B. Malinowsky
 */
public class KNXNetworkLinkIP implements KNXNetworkLink
{
    /**
     * Service mode for link layer tunneling.
     * <p>
     */
    public static final int TUNNEL = 1;

    /**
     * Service mode for routing.
     * <p>
     */
    public static final int ROUTER = 2;

    private static final class LinkNotifier extends EventNotifier
    {
        LinkNotifier(Object source, LogService logger)
        {
            super(source, logger);
        }

        public void frameReceived(FrameEvent e)
        {
            final int mc = e.getFrame().getMessageCode();
            if (mc == CEMILData.MC_LDATA_IND) {
                addEvent(new Indication(new FrameEvent(source, e.getFrame())));
                logger.info("indication from " + ((CEMILData) e.getFrame()).getSource());
            }
            else if (mc == CEMILData.MC_LDATA_CON) {
                addEvent(new Confirmation(new FrameEvent(source, e.getFrame())));
                logger.info("confirmation of "
                    + ((CEMILData) e.getFrame()).getDestination());
            }
            else
                logger.warn("unspecified frame event - ignored, msg code = 0x"
                    + Integer.toHexString(mc));
        }

        public void connectionClosed(CloseEvent e)
        {
            ((KNXNetworkLinkIP) source).closed = true;
            super.connectionClosed(e);
            logger.info("link closed");
            LogManager.getManager().removeLogService(logger.getName());
        }
    };

    private final int mode;
    private volatile boolean closed;
    private final KNXnetIPConnection conn;
    private volatile byte hopCount = 6;
    private KNXMediumSettings medium;

    private final LogService logger;
    // our link connection event notifier
    private final EventNotifier notifier;

    /**
     * Creates a new network link based on the KNXnet/IP protocol, using a
     * {@link KNXnetIPConnection}.
     * <p>
     * For more details on KNXnet/IP connections, refer to the various KNXnet/IP
     * implementations.<br>
     * 
     * @param serviceMode mode of communication to open, <code>serviceMode</code> is one
     *        of the service mode constants (e.g. {@link #TUNNEL}); depending on the mode
     *        set, the expected local / remote endpoints might differ
     * @param localEP the local endpoint of the link to use;<br> - in tunneling mode
     *        (point-to-point), this is the client control endpoint, use <code>null</code>
     *        for the default local host and an ephemeral port number<br> - in
     *        {@link #ROUTER} mode, specifies the multicast interface, i.e. the local
     *        network interface is taken that has the IP address bound to it (if IP
     *        address is bound more than once, it's undefined which interface is
     *        returned), the port is not used; use <code>null</code> for
     *        <code>localEP</code> or an unresolved IP address to take the host's
     *        default multicast interface
     * @param remoteEP the remote endpoint of the link to communicate with;<br> - in
     *        tunneling mode (point-to-point), this is the server control endpoint <br> -
     *        in {@link #ROUTER} mode, the IP address specifies the multicast group to
     *        join, the port is not used; use <code>null</code> for
     *        <code>remoteEP</code> or an unresolved IP address to take the default
     *        multicast group
     * @param useNAT <code>true</code> to use network address translation in tunneling
     *        service mode, <code>false</code> to use the default (non aware) mode;
     *        parameter is ignored for routing
     * @param settings medium settings defining device and medium specifics needed for
     *        communication
     * @throws KNXException on failure establishing link using the KNXnet/IP connection
     */
    public KNXNetworkLinkIP(int serviceMode, InetSocketAddress localEP,
        InetSocketAddress remoteEP, boolean useNAT, KNXMediumSettings settings)
        throws KNXException
    {
        switch (serviceMode) {
        case TUNNEL:
            InetSocketAddress local = localEP;
            if (local == null)
                try {
                    local = new InetSocketAddress(InetAddress.getLocalHost(), 0);
                }
                catch (final UnknownHostException e) {
                    throw new KNXException("no local host available");
                }
            conn = new KNXnetIPTunnel(KNXnetIPTunnel.LINK_LAYER, local, remoteEP, useNAT);
            break;
        case ROUTER:
            NetworkInterface netIf = null;
            if (localEP != null && !localEP.isUnresolved())
                try {
                    netIf = NetworkInterface.getByInetAddress(localEP.getAddress());
                }
                catch (final SocketException e) {
                    throw new KNXException("error getting network interface: "
                        + e.getMessage());
                }
            final InetAddress mcast = remoteEP != null ? remoteEP.getAddress() : null;
            conn = new KNXnetIPRouter(netIf, mcast);
            break;
        default:
            throw new KNXIllegalArgumentException("unknown service mode");
        }
        // initialize our link with opened connection
        mode = serviceMode;
        logger = LogManager.getManager().getLogService(getName());
        notifier = new LinkNotifier(this, logger);
        conn.addConnectionListener(notifier);
        // configure KNX medium stuff
        setKNXMedium(settings);
    }

    /**
     * Creates a new network link based on the KNXnet/IP tunneling protocol, using a
     * {@link KNXnetIPTunnel} with default communication settings.
     * <p>
     * The link is established using a KNXnet/IP tunnel, the local endpoint is the default
     * local host, the remote endpoint uses the default KNXnet/IP port number, network
     * address translation (NAT) is disabled.
     * 
     * @param remoteHost remote host name
     * @param settings medium settings defining device and medium specifics needed for
     *        communication
     * @throws KNXException on failure establishing link using the KNXnet/IP connection
     */
    public KNXNetworkLinkIP(String remoteHost, KNXMediumSettings settings)
        throws KNXException
    {
        this(TUNNEL, null, new InetSocketAddress(remoteHost, KNXnetIPConnection.IP_PORT),
            false, settings);
    }

    /**
     * Creates a new network link based on the KNXnet/IP routing protocol, using a
     * {@link KNXnetIPRouter}.
     * <p>
     * 
     * @param netIf local network interface used to join the multicast group and for
     *        sending, use <code>null</code> for the host's default multicast interface
     * @param mcGroup address of the multicast group to join, use <code>null</code> for
     *        the default KNXnet/IP multicast address
     * @param settings medium settings defining device and medium specifics needed for
     *        communication
     * @throws KNXException on failure establishing link using the KNXnet/IP connection
     */
    public KNXNetworkLinkIP(NetworkInterface netIf, InetAddress mcGroup,
        KNXMediumSettings settings) throws KNXException
    {
        conn = new KNXnetIPRouter(netIf, mcGroup);
        // initialize our link
        mode = ROUTER;
        logger = LogManager.getManager().getLogService(getName());
        notifier = new LinkNotifier(this, logger);
        conn.addConnectionListener(notifier);
        // configure KNX medium stuff
        setKNXMedium(settings);
    }

    /* (non-Javadoc)
     * @see tuwien.auto.calimero.link.KNXNetworkLink#setKNXMedium
     * (tuwien.auto.calimero.link.medium.KNXMediumSettings)
     */
    public void setKNXMedium(KNXMediumSettings settings)
    {
        if (settings == null)
            throw new KNXIllegalArgumentException("medium settings are mandatory");
        if (medium != null && !settings.getClass().isAssignableFrom(medium.getClass())
            && !medium.getClass().isAssignableFrom(settings.getClass()))
            throw new KNXIllegalArgumentException("medium differs");
        medium = settings;
    }

    /* (non-Javadoc)
     * @see tuwien.auto.calimero.link.KNXNetworkLink#getKNXMedium()
     */
    public KNXMediumSettings getKNXMedium()
    {
        return medium;
    }

    /* (non-Javadoc)
     * @see tuwien.auto.calimero.link.KNXNetworkLink#addLinkListener
     * (tuwien.auto.calimero.link.event.NetworkLinkListener)
     */
    public void addLinkListener(NetworkLinkListener l)
    {
        notifier.addListener(l);
    }

    /* (non-Javadoc)
     * @see tuwien.auto.calimero.link.KNXNetworkLink#removeLinkListener
     * (tuwien.auto.calimero.link.event.NetworkLinkListener)
     */
    public void removeLinkListener(NetworkLinkListener l)
    {
        notifier.removeListener(l);
    }

    /* (non-Javadoc)
     * @see tuwien.auto.calimero.link.KNXNetworkLink#setHopCount(int)
     */
    public final void setHopCount(int count)
    {
        if (count < 0 || count > 7)
            throw new KNXIllegalArgumentException("hop count out of range [0..7]");
        hopCount = (byte) count;
        logger.info("hop count set to " + count);
    }

    /* (non-Javadoc)
     * @see tuwien.auto.calimero.link.KNXNetworkLink#getHopCount()
     */
    public final byte getHopCount()
    {
        return hopCount;
    }

    /**
     * {@inheritDoc} When communicating with a KNX network which uses open medium,
     * messages are broadcasted within domain (as opposite to system broadcast) by
     * default. Specify <code>dst null</code> for system broadcast.
     */
    public void sendRequest(KNXAddress dst, Priority p, byte[] nsdu)
        throws KNXLinkClosedException, KNXTimeoutException
    {
        send(dst, p, nsdu, false);
    }

    /**
     * {@inheritDoc} When communicating with a KNX network which uses open medium,
     * messages are broadcasted within domain (as opposite to system broadcast) by
     * default. Specify <code>dst null</code> for system broadcast.
     */
    public void sendRequestWait(KNXAddress dst, Priority p, byte[] nsdu)
        throws KNXTimeoutException, KNXLinkClosedException
    {
        send(dst, p, nsdu, true);
    }

    /* (non-Javadoc)
     * @see tuwien.auto.calimero.link.KNXNetworkLink#send
     * (tuwien.auto.calimero.cemi.CEMILData, boolean)
     */
    public void send(CEMILData msg, boolean waitForCon) throws KNXTimeoutException,
        KNXLinkClosedException
    {
        doSend(adjustMsgType(msg), waitForCon);
    }

    /* (non-Javadoc)
     * @see tuwien.auto.calimero.link.KNXNetworkLink#getName()
     */
    public String getName()
    {
        // do our own IP:port string, since InetAddress.toString() always prepends a '/'
        final InetSocketAddress a = conn.getRemoteAddress();
        return "link " + a.getAddress().getHostAddress() + ":" + a.getPort();
    }

    /* (non-Javadoc)
     * @see tuwien.auto.calimero.link.KNXNetworkLink#isOpen()
     */
    public boolean isOpen()
    {
        return !closed;
    }

    /* (non-Javadoc)
     * @see tuwien.auto.calimero.link.KNXNetworkLink#close()
     */
    public void close()
    {
        synchronized (this) {
            if (closed)
                return;
            closed = true;
        }
        conn.close();
        notifier.quit();
    }

    /* (non-Javadoc)
     * @see java.lang.Object#toString()
     */
    public String toString()
    {
        return getName() + (mode == TUNNEL ? " tunnel" : " routing") + " mode"
            + (closed ? " (closed), " : ", ") + medium.getMediumString()
            + " medium hopcount " + hopCount;
    }

    private CEMILData adjustMsgType(CEMILData msg)
    {
        final boolean srcOk = msg.getSource().getRawAddress() != 0;
        // just return if we don't need to adjust source address and don't need LDataEx
        if ((srcOk || medium.getDeviceAddress().getRawAddress() == 0)
            && (medium instanceof TPSettings || msg instanceof CEMILDataEx))
            return msg;
        return (CEMILDataEx) CEMIFactory.create(srcOk ? null : medium.getDeviceAddress(),
            null, msg, true);
    }

    private void send(KNXAddress dst, Priority p, byte[] nsdu, boolean confirm)
        throws KNXTimeoutException, KNXLinkClosedException
    {
        final CEMILData f;
        final short mc = mode == TUNNEL ? CEMILData.MC_LDATA_REQ : CEMILData.MC_LDATA_IND;
        final IndividualAddress src = medium.getDeviceAddress();
        // use default address 0 in system broadcast
        final KNXAddress d = dst == null ? new GroupAddress(0) : dst;
        final boolean tp = medium.getMedium() == KNXMediumSettings.MEDIUM_TP0
            || medium.getMedium() == KNXMediumSettings.MEDIUM_TP1;
        if (nsdu.length <= 16 && tp)
            f = new CEMILData(mc, src, d, nsdu, p, true, hopCount);
        else
            f = new CEMILDataEx(mc, src, d, nsdu, p, true, dst != null, false, hopCount);
        doSend(f, confirm);
    }

    private void doSend(CEMILData msg, boolean waitForCon) throws KNXTimeoutException,
        KNXLinkClosedException
    {
        if (closed)
            throw new KNXLinkClosedException("link closed");
        if (medium instanceof PLSettings) {
            final CEMILDataEx f = (CEMILDataEx) msg;
            if (f.getAdditionalInfo(CEMILDataEx.ADDINFO_PLMEDIUM) == null) {
                f.addAdditionalInfo(CEMILDataEx.ADDINFO_PLMEDIUM, ((PLSettings) medium)
                    .getDomainAddress());
                logger.trace("send - added PL additional info to message");
            }
        }
        else if (medium.getMedium() == KNXMediumSettings.MEDIUM_RF) {
            final CEMILDataEx f = (CEMILDataEx) msg;
            final RFSettings rf = (RFSettings) medium;
            if (f.getAdditionalInfo(CEMILDataEx.ADDINFO_RFMEDIUM) == null) {
                final byte[] sn =
                    f.isDomainBroadcast() ? rf.getDomainAddress() : rf.getSerialNumber();
                // add-info: rf-info (0 ignores a lot), sn (6 bytes), lfn (=255:void)
                f.addAdditionalInfo(CEMILDataEx.ADDINFO_RFMEDIUM, new byte[] { 0, sn[0],
                    sn[1], sn[2], sn[3], sn[4], sn[5], (byte) 0xff });
                logger.trace("send - added RF additional info to message "
                    + (f.isDomainBroadcast() ? "(domain address)" : "(s/n)"));
            }
        }
        try {
            logger.info("send message to " + msg.getDestination()
                + (waitForCon ? ", wait for confirmation" : ""));
            logger.trace("cEMI " + msg);
            conn.send(msg, waitForCon ? KNXnetIPConnection.WAIT_FOR_CON
                : KNXnetIPConnection.WAIT_FOR_ACK);
            logger.trace("send to " + msg.getDestination() + " succeeded");
        }
        catch (final KNXConnectionClosedException e) {
            logger.error("send error, closing link", e);
            close();
            throw new KNXLinkClosedException("link closed, " + e.getMessage());
        }
    }
} 
```

我已经用调试器检查了赋予它们的方法的值：

```
isaLocalEP = /169.254.96.102:12345
isaRemoteEP = /169.254.96.33:3671 
```

所以它们不为空。

有任何想法吗？也许 IPv4 或 IPv6 有一些问题？

*LogCat 使用 getAddress().getHostAddress()*

```
11-07 10:04:12.800: W/System.err(14989): tuwien.auto.calimero.exception.KNXException: bind failed: EADDRINUSE (Address already in use)
11-07 10:04:12.805: W/System.err(14989):    at tuwien.auto.calimero.knxnetip.ConnectionImpl.connect(ConnectionImpl.java:369)
11-07 10:04:12.805: W/System.err(14989):    at tuwien.auto.calimero.knxnetip.KNXnetIPTunnel.<init>(KNXnetIPTunnel.java:117)
11-07 10:04:12.805: W/System.err(14989):    at tuwien.auto.calimero.link.KNXNetworkLinkIP.<init>(KNXNetworkLinkIP.java:179)
11-07 10:04:12.805: W/System.err(14989):    at com.example.connectiontest.KNXNetwork.connect(KNXNetwork.java:149)
11-07 10:04:12.805: W/System.err(14989):    at com.example.connectiontest.KNXNetwork.connect(KNXNetwork.java:122)
11-07 10:04:12.805: W/System.err(14989):    at com.example.connectiontest.KNXNetwork.tryConnecting(KNXNetwork.java:80)
11-07 10:04:12.805: W/System.err(14989):    at com.example.connectiontest.HelloKNXNetwork.connect(HelloKNXNetwork.java:67)
11-07 10:04:12.805: W/System.err(14989):    at com.example.connectiontest.HelloKNXNetwork.onClickActivity(HelloKNXNetwork.java:42)
11-07 10:04:12.805: W/System.err(14989):    at java.lang.reflect.Method.invokeNative(Native Method)
11-07 10:04:12.805: W/System.err(14989):    at java.lang.reflect.Method.invoke(Method.java:511)
11-07 10:04:12.805: W/System.err(14989):    at android.view.View$1.onClick(View.java:3111)
11-07 10:04:12.805: W/System.err(14989):    at android.view.View.performClick(View.java:3644)
11-07 10:04:12.805: W/System.err(14989):    at android.view.View$PerformClick.run(View.java:14313)
11-07 10:04:12.805: W/System.err(14989):    at android.os.Handler.handleCallback(Handler.java:605)
11-07 10:04:12.805: W/System.err(14989):    at android.os.Handler.dispatchMessage(Handler.java:92)
11-07 10:04:12.805: W/System.err(14989):    at android.os.Looper.loop(Looper.java:137)
11-07 10:04:12.805: W/System.err(14989):    at android.app.ActivityThread.main(ActivityThread.java:4514)
11-07 10:04:12.805: W/System.err(14989):    at java.lang.reflect.Method.invokeNative(Native Method)
11-07 10:04:12.810: W/System.err(14989):    at java.lang.reflect.Method.invoke(Method.java:511)
11-07 10:04:12.810: W/System.err(14989):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
11-07 10:04:12.810: W/System.err(14989):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
11-07 10:04:12.810: W/System.err(14989):    at dalvik.system.NativeStart.main(Native Method) 
```

*使用端口 0 的 LogCat*

```
11-07 10:16:32.085: W/System.err(17185): android.os.NetworkOnMainThreadException
11-07 10:16:32.090: W/System.err(17185):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
11-07 10:16:32.090: W/System.err(17185):    at libcore.io.BlockGuardOs.sendto(BlockGuardOs.java:175)
11-07 10:16:32.090: W/System.err(17185):    at libcore.io.IoBridge.sendto(IoBridge.java:463)
11-07 10:16:32.090: W/System.err(17185):    at java.net.PlainDatagramSocketImpl.send(PlainDatagramSocketImpl.java:182)
11-07 10:16:32.090: W/System.err(17185):    at java.net.DatagramSocket.send(DatagramSocket.java:287)
11-07 10:16:32.090: W/System.err(17185):    at tuwien.auto.calimero.knxnetip.ConnectionImpl.connect(ConnectionImpl.java:360)
11-07 10:16:32.090: W/System.err(17185):    at tuwien.auto.calimero.knxnetip.KNXnetIPTunnel.<init>(KNXnetIPTunnel.java:117)
11-07 10:16:32.090: W/System.err(17185):    at tuwien.auto.calimero.link.KNXNetworkLinkIP.<init>(KNXNetworkLinkIP.java:179)
11-07 10:16:32.090: W/System.err(17185):    at com.example.connectiontest.KNXNetwork.connect(KNXNetwork.java:148)
11-07 10:16:32.090: W/System.err(17185):    at com.example.connectiontest.KNXNetwork.connect(KNXNetwork.java:121)
11-07 10:16:32.090: W/System.err(17185):    at com.example.connectiontest.KNXNetwork.tryConnecting(KNXNetwork.java:79)
11-07 10:16:32.090: W/System.err(17185):    at com.example.connectiontest.HelloKNXNetwork.connect(HelloKNXNetwork.java:67)
11-07 10:16:32.090: W/System.err(17185):    at com.example.connectiontest.HelloKNXNetwork.onClickActivity(HelloKNXNetwork.java:42)
11-07 10:16:32.090: W/System.err(17185):    at java.lang.reflect.Method.invokeNative(Native Method)
11-07 10:16:32.090: W/System.err(17185):    at java.lang.reflect.Method.invoke(Method.java:511)
11-07 10:16:32.095: W/System.err(17185):    at android.view.View$1.onClick(View.java:3111)
11-07 10:16:32.095: W/System.err(17185):    at android.view.View.performClick(View.java:3644)
11-07 10:16:32.095: W/System.err(17185):    at android.view.View$PerformClick.run(View.java:14313)
11-07 10:16:32.095: W/System.err(17185):    at android.os.Handler.handleCallback(Handler.java:605)
11-07 10:16:32.095: W/System.err(17185):    at android.os.Handler.dispatchMessage(Handler.java:92)
11-07 10:16:32.095: W/System.err(17185):    at android.os.Looper.loop(Looper.java:137)
11-07 10:16:32.095: W/System.err(17185):    at android.app.ActivityThread.main(ActivityThread.java:4514)
11-07 10:16:32.095: W/System.err(17185):    at java.lang.reflect.Method.invokeNative(Native Method)
11-07 10:16:32.095: W/System.err(17185):    at java.lang.reflect.Method.invoke(Method.java:511)
11-07 10:16:32.095: W/System.err(17185):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
11-07 10:16:32.095: W/System.err(17185):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
11-07 10:16:32.095: W/System.err(17185):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T08:03:00.383

我认为问题在于您有一个 IP 地址，但没有主机名！试试这个：

```
 System.out.println(isaLocalEP.getAddress().getHostAddress() + ":" + isaLocalEP.getPort()); 
```

# jquery - 如何使用淘汰赛js上传图像并将其保存在数据库中？

> ID：13265333
> 
> 赞同：5
> 
> 时间：2012-11-07T07:50:42.247
> 
> 标签：jquery, knockout.js

嘿 m 使用带有敲除的 mvc3 并尝试使用敲除绑定来上传上传的图像并将其保存在数据库中。我能够浏览并获取图像，但无法获取如何保存该图像。我的 html 视图是：

```
<div data-bind="foreach: { data: images, beforeRemove: beforeRemoveSlot }">
        <div>
            <input type="file" accept="image/*" data-bind="file: imageFile, fileObjectURL: imageObjectURL, fileBinaryData: imageBinary"/>
            <div data-bind="if: imageObjectURL">
                <img class="thumb" data-bind="attr: { src: imageObjectURL }"/>
            </div>
            <div>Size: <span data-bind="text: fileSize"></span>&nbsp;bytes</div>
        </div>
    </div>
        <input type="submit" value="Upload Picture" data-bind="click: upload" /> 
```

我的视图模型是：

```
var windowURL = window.URL || window.webkitURL;

ko.bindingHandlers.file = {
    init: function (element, valueAccessor) {
        $(element).change(function () {
            var file = this.files[0];
            if (ko.isObservable(valueAccessor())) {
                valueAccessor()(file);
            }
        });
    },

    update: function (element, valueAccessor, allBindingsAccessor) {
        var file = ko.utils.unwrapObservable(valueAccessor());
        var bindings = allBindingsAccessor();

        if (bindings.fileObjectURL && ko.isObservable(bindings.fileObjectURL)) {
            var oldUrl = bindings.fileObjectURL();
            if (oldUrl) {
                windowURL.revokeObjectURL(oldUrl);
            }
            bindings.fileObjectURL(file && windowURL.createObjectURL(file));
        }

        if (bindings.fileBinaryData && ko.isObservable(bindings.fileBinaryData)) {
            if (!file) {
                bindings.fileBinaryData(null);
            } else {
                var reader = new FileReader();
                reader.onload = function (e) {
                    bindings.fileBinaryData(e.target.result);
                };
                reader.readAsArrayBuffer(file);
            }
        }
    }
};

var imageUploadModel = function () {
    var self = {};

    var slotModel = function () {
        var that = {};

        that.imageFile = ko.observable();
        that.imageObjectURL = ko.observable();
        that.imageBinary = ko.observable();

        that.fileSize = ko.computed(function () {
            var file = this.imageFile();
            return file ? file.size : 0;
        }, that);

        that.firstBytes = ko.computed(function () {
            if (that.imageBinary()) {
                var buf = new Uint8Array(that.imageBinary());
                var bytes = [];
                for (var i = 0; i < Math.min(10, buf.length); ++i) {
                    bytes.push(buf[i]);
                }
                return '[' + bytes.join(', ') + ']';
            } else {
                return '';
            }
        }, that);

        return that;
    };

    self.beforeRemoveSlot = function (element, index, data) {
        if (data.imageObjectURL()) {
            windowURL.revokeObjectURL(data.imageObjectURL());
        }
        $(element).remove();
    };

    self.images = ko.observableArray([slotModel()]);

    self.addSlot = function () {
        self.images.push(slotModel());
    };

    self.removeSlot = function (data) {
        self.images.remove(data);
    };

    return self;
} ();

imageUploadModel.upload = function () {

}

$(document).ready(function () {
    ko.applyBindings(imageUploadModel);
}); 
```

任何人都可以建议我如何在上传按钮单击时保存图像？？？？？？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-11T01:53:31.620

这是通过淘汰赛上传单击图像的示例，我已经一起擦洗了

html->

```
<input type="file" data-bind="value: fileName, fileUpload: fileName, url: url">
<script src="{{ STATIC_URL }}html5knockoutImagePreview.js"></script>​ 
```

js->

```
ko.bindingHandlers.fileUpload = {

update: function(element, valueAccessor, allBindingsAccessor){
        var value = ko.utils.unwrapObservable(valueAccessor())
        if(element.files.length && value){
        var file = element.files[0];
        var url = allBindingsAccessor().url

        xhr = new XMLHttpRequest();
        xhr.open("post", url, true);
        xhr.setRequestHeader("Content-Type", "image/jpeg");
        xhr.setRequestHeader("X-File-Name", file.name);
        xhr.setRequestHeader("X-File-Size", file.size);
        xhr.setRequestHeader("X-File-Type", file.type);
        console.log("sending")
        // Send the file (doh)
        xhr.send(file);
        }
  }
}

function MainPageViewModal(){
  this.fileName = ko.observable()
  this.url = "http://127.0.0.1:8000/upload"
}

var mainPageViewModal = new MainPageViewModal()

ko.applyBindings(mainPageViewModal); 
```

[小提琴](http://jsfiddle.net/fredkingham/B4Gy2/1/)

我不能 100% 确定您的所有要求，这是针对 jpeg 的，您需要调整其他类型的内容类型标头等。

编辑

当您继续遇到问题时，这里有一些我从那时起编写的代码可能会有所帮助。它确实使用jquery...

ko 绑定 ->

```
ko.bindingHandlers.filePreview = {
  update: function(element, valueAccessor, allBindingsAccessor){
      var allBindings = allBindingsAccessor()
      if(!!FileReader && valueAccessor() && element.files.length){
        var reader = new FileReader();
        reader.onload = function(event){
          var dataUri = event.target.result
          allBindings.imagePreview(dataUri)
        }
        reader.onerror = function(e) {
          console.log("error", stuff)
        }
        reader.readAsDataURL(element.files[0])
    }
  }
} 
```

模型页面视图->

```
, uploadPreview: function(files){
        var self = this
        self.loadingPreview(true)
        file = files[0]
        if(file.size > 20000000){
          alert("that image is a bit too big for us, got anything smaller?")
        }
        console.log("file size " + file.size)
        var formData = new FormData();
        formData.append("img", file)
        $.ajax({
          url: "/YOUR_UPLOAD_URL",
          type: 'POST',
          data: formData,
          cache: false,
          contentType: false,
          processData: false
      }).done(function(data){
         if(data === "error"){
           alert("somethign wrong happened, please refresh the page")
           return
         }
         self.imgUrl(data.img_url)
         self.imgId(data.img_id)
      }).fail(function(){
        self.loadingPreview(false)
      })
} 
```

html->

```
<input type="file" accept="image/*" name="img" data-bind="value: img, fileAdded: img, previewFunc: function(files){ $data.uploadPreview(files) }" /> 
```

*   这种方法的优点是很多框架喜欢表单数据而不是仅仅图像内容类型的数据更好。
*   我个人认为服务器端交互应该由后端模式驱动，这就是为什么代码在那里而不是绑定处理程序中的原因。
*   如果需要，您还可以获得 jquery ajax 对象的魔力。

抱歉回复晚了，我会在几天后达到高峰，所以如果您仍有问题，请告诉我。

祝你好运！

# django - Django：GAE：non rel：在 cmp 中超出最大递归深度

> ID：13265340
> 
> 赞同：0
> 
> 时间：2012-11-07T07:51:02.563
> 
> 标签：django, google-app-engine, django-nonrel

我正在用 GAE 学习 django。教程链接： http: [//f.souza.cc/2010/08/flying-with-django-on-google-app-engine.html](http://f.souza.cc/2010/08/flying-with-django-on-google-app-engine.html)

谁能告诉我原因？为什么我会收到此错误？

```
File "/usr/local/lib/python2.7/dist-packages/django/db/models/fields/subclassi
  return func(*args, **kwargs)
File "/usr/local/lib/python2.7/dist-packages/django/db/models/fields/subclassi
  return func(*args, **kwargs)
File "/usr/local/lib/python2.7/dist-packages/django/db/models/fields/__init__.
  return connection.creation.db_type(self)
RuntimeError: maximum recursion depth exceeded in cmp 
```

如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:05:43.450

不确定您在哪里下载了资源，但它们可能已过时。django-nonrel 现在托管在 github 上。

我没有尝试遵循这些说明，但它们较新：

[http://seperohacker.blogspot.ca/2012/04/installing-django-nonrel-easily.html](http://seperohacker.blogspot.ca/2012/04/installing-django-nonrel-easily.html)

# php - 表单 POST 数据循环如何分配变量并与数据库进行比较

> ID：13265344
> 
> 赞同：0
> 
> 时间：2012-11-07T07:51:16.140
> 
> 标签：php, mysql

我有一个购物车表单，一旦我提交表单，我就会循环 POST 值以将其打印在桌子上。这是所售商品的循环

```
<?php
    for($i = 0; $i < count($_POST["id"]); $i++){
        echo "<tr>";
        echo "<td>".$_POST["name"][$i]."</td>";
        echo "<td>$ ".$_POST["price"][$i]."</td>";      
        echo "<td>".$_POST["quantity"][$i]."</td>";
        $total[$i] = $_POST["price"][$i]*$_POST["quantity"][$i];
        echo "<td>$ ".$total[$i]."</td>";
        echo "</tr>"; 
 ?> 
```

我的问题是基于这个循环我需要将它与具有以下字段的产品数据库进行比较

|姓名 | 价格 | 数量左 | 数量 | 其中 QtyLeft 是当前的库存数量。那么根据上面的代码，我如何查询我的表以减去出售给 QtyLeft 的商品数量并更新 QtySold？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T08:04:35.227

对于循环中的每个项目：

```
$quantity = intval($_POST["quantity"][$i]);
$id = intval($_POST["id"]);
$sql = "UPDATE product SET QtyLeft = QftLeft - $quantity, QtySold = QtySold + $quantity WHERE id = $id"; 
```

# apache-flex - 在火花标签移动应用程序 Flex Builder 中显示当前日期

> ID：13265347
> 
> 赞同：0
> 
> 时间：2012-11-07T07:51:48.703
> 
> 标签：apache-flex, time, label, flex-spark

我可以找到 MX 组件的东西，但我不能在 spark 组件上工作。

我只想在标签中显示当前日期和日期。

我试过这个（见代码），但我只得到函数 Function(){}

```
<?xml version="1.0" encoding="utf-8"?>
    <s:View xmlns:fx="http://ns.adobe.com/mxml/2009"
            xmlns:s="library://ns.adobe.com/flex/spark"
            currentState="login" tabBarVisible="{currentState!='login'}">

        <s:states>
            <s:State name="login"/>
            <s:State name="planner"/>
        </s:states>

<fx:Script>
    <![CDATA[

        import mx.rpc.events.ResultEvent;
//private function login() :void
//{
//loginservice.send();
//}

        private function checkLogin(evt:ResultEvent):void

        {

            if(loginservice.lastResult.loginsuccess == "yes")

            {

                currentState = "planner";

            } 
            if(evt.result.loginsuccess == "no")

            {
                statusLabel.text = "Incorrect. (Try user/password)";

            }       

        }

        protected function submit_clickHandler(event:MouseEvent):void
        {
            // TODO Auto-generated method stub

        }

        public function displayDate():void {
            var now:Date = new Date();
            var day_int:int = now.getDate(); //gets day of the month
            var month_int:int = (now.getMonth()+1); // gets month. Months are given from 0 to 11, so you need to do +1 here
            var year_int:int = now.getFullYear(); // gets year

            var day_string:String;
            //display always 2 digits for a month, so '02' instead of just '2' for February
            if (day_int < 10) {
                day_string = "0" + day_int.toString();
            }
            else {
                day_string = day_int.toString();
            }

            var month_string:String;
            //display always 2 digits for a day, so '02' instead of just '2'
            if (month_int < 10) { 
                month_string = "0" + month_int.toString();
            }
            else {
                month_string = month_int.toString();
            }

            var year_string:String = year_int.toString();

            // note: this is displaying the date in the DD/MM/YYYY format, this same format is also set for the Datefield below!
            //DateSelect.text = day_string + "/" + month_string + "/" + year_string;
        }

    ]]>
</fx:Script>

    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->

        <s:HTTPService id="loginservice"
                       method="GET"
                       url="http://localhost:8888/MenuPlannerApp/services/login4.php"
                       useProxy="false"
                       result="checkLogin(event)">
            <s:request xmlns="">

                <email>{email.text}</email>

                <password>{password.text}</password>
            </s:request>
        </s:HTTPService>

    </fx:Declarations>
    <s:BorderContainer includeIn="login" width="100%" height="100%" >
        <s:Label id="statusLabel" />  
        <s:TextInput id="email" y="192" left="15" right="15" text="email"/>
        <s:TextInput id="password" y="247" left="15" right="15" text="password" displayAsPassword="true"/>
        <s:Button id="submit" y="306" right="15" width="100" height="30"
                  label="Login" click="loginservice.send()"/>
        <s:Button id="LoginCreate" y="306" left="15" width="100" height="30"
                  label="Create"/>
        <s:Label x="166" y="39" width="113" height="101" fontSize="30"
                 text="Menu&#xd;Planner"/>
    </s:BorderContainer>
    <s:BorderContainer includeIn="planner" width="100%" height="100%">
    <s:Label text="{displayDate}" />

<s:HGroup y="10" width="320" height="46" horizontalAlign="center"
          textAlign="center">

</s:HGroup>
    <s:VGroup includeIn="planner" >
     </s:VGroup>

    </s:BorderContainer>
</s:View> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:10:56.633

改变这个：

```
// offset is today +/- a set number of days
// displayDate(-1) returns string for yesterday
// displayDate(1) returns string for tomorrow etc
public function displayDate(offset:int=0):String {
    var formattedString:String;

    var now:Date = new Date();
    var day_int:int = now.getDate() + offset; //gets day of the month
    var month_int:int = (now.getMonth()+1); // gets month. Months are given from 0 to 11, so you need to do +1 here
    var year_int:int = now.getFullYear(); // gets year

    var day_string:String;
    //display always 2 digits for a month, so '02' instead of just '2' for February
    if (day_int < 10) {
        day_string = "0" + day_int.toString();
    }
    else {
        day_string = day_int.toString();
    }

    var month_string:String;
    //display always 2 digits for a day, so '02' instead of just '2'
    if (month_int < 10) { 
        month_string = "0" + month_int.toString();
    }
    else {
        month_string = month_int.toString();
    }

    var year_string:String = year_int.toString();

    formattedString = day_string + "/" + month_string + "/" + year_string;

    return formattedString;
} 
```

在 mxml 中，你会像这样使用它：

```
<s:Label text="{ displayDate(-3) }" /> 
```

# asterisk - 一些键不能在后台命令中使用

> ID：13265350
> 
> 赞同：0
> 
> 时间：2012-11-07T07:51:57.100
> 
> 标签：asterisk

我有一个如下所示的拨号方案，但对于这些号码它不能正常工作：1,2,3

当用户按 0 或 4..9 时我没有问题，但只有在后台完成并且 waitexten() 启动时它才能检测到 1、2、3，它也可以接受 1、2、3 数字。

```
 exten => s,1,Answer()
   exten => s,n,Background(sherkat)
   exten => s,n,WaitExten(10)
   exten => 1,1,Goto(default,305,1)
   exten => 2,1,Goto(default,303,1)
   exten => 3,1,Goto(default,302,1)
   exten => 4,1,Goto(default,301,1)
   exten => 5,1,Goto(default,324,1)
   exten => t,1,Goto(default,304,1)
   exten => i,1,Goto(default,304,1) 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:06:41.157

我推荐两件事。首先，在您的 Answer() 之后立即添加“Wait(1)”命令，以确保音频流正确地向两端开放。其次，在每个分机号码前加一个“_”；例如：

```
 exten => s,1,Answer()
    same => n,Wait(1)
    same => n,Background(sherkat)
    same => n,WaitExten(10)

   exten => _1,1,Goto(default,305,1)
   exten => _2,1,Goto(default,303,1)
   exten => _3,1,Goto(default,302,1)
   exten => _4,1,Goto(default,301,1)
   exten => _5,1,Goto(default,324,1)

   exten => t,1,Goto(default,304,1)
   exten => i,1,Goto(default,304,1) 
```

...尝试一下，让我知道它是否更适合您。我发现正则表达式限定符“_”通常可以提高 IVR 行为/精度。

# php - html名称文件中的双点

> ID：13265353
> 
> 赞同：0
> 
> 时间：2012-11-07T07:52:06.643
> 
> 标签：php

我很好奇这个带有双点的命名文件，就像这样：“file.name.php”。

即使它在我的页面中工作，这仍然是一个有效的 url，其中 PHP 包含调用此文件名，如下所示：

```
<?php include ('includes/pages/file.name.php'); ?> 
```

如果我将它实施到我的网站到服务器和浏览器，我会遇到问题/冲突吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T07:55:13.940

文件名中的多个点不是问题。

这是一个重复的问题： [文件名中有多个点不好吗？](https://stackoverflow.com/questions/7290989/does-having-multiple-dots-in-a-filename-bad)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T07:56:01.770

您可以`.`在文件名中包含点。它仍然是一个有效的文件。

如果您正在寻找好的做法，请使用连字符`-`或下划线`_`

**例子，**

`file-name.php`或者`file_name.php`

# ruby-on-rails - elasticsearch中的路由字段通过轮胎

> ID：13265358
> 
> 赞同：1
> 
> 时间：2012-11-07T07:52:20.100
> 
> 标签：ruby-on-rails, elasticsearch, tire

我正在尝试通过轮胎宝石将弹性搜索用于多租户应用程序。该应用程序有许多帐户，每个帐户都有许多用户。

用户模型：

```
 include Tire::Model::Search
  mapping do
    indexes :name, :boost => 10
    indexes :account_id
    indexes :company_name
  end

  def to_indexed_json
    to_json( :only => [:name, :account_id, :company_name], 
       )
  end 
```

我想添加基于 account_id 的路由。请帮助如何实现这一点。我看到有两种方法可以指定路由。

1.  在使用路由字段进行映射期间
2.  使用别名

我对第一个选项感兴趣。我看到 _routing 可以作为哈希添加到映射部分。

```
 mapping :_routing => { :required => true, :path => :account_id } do
    indexes :name, :boost => 10
    indexes :account_id
    indexes :company_name
  end 
```

搜索查询：

```
 User.tire.search do
    query do
      filtered do
          query { string('ovamsikrishna@gmail.com') },
          filter :term, :account_id => 2
      end
    end
  end 
```

我们需要在搜索查询中指定任何内容吗？当我指定上面指定的映射（使用路由）时，索引没有发生。没有路由它工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T23:52:54.340

添加 account_id 作为路径有助于您在 1 个分片上累积所有相同的帐户数据。

建议在搜索查询中使用路由，以避免在每个分片上命中搜索查询。

使用[Get Mapping API](http://www.elasticsearch.org/guide/reference/api/admin-indices-get-mapping.html)来验证映射是否正确设置。

# php - JavaScript 不会更改 PHP 填充的文本字段

> ID：13265359
> 
> 赞同：1
> 
> 时间：2012-11-07T07:52:27.293
> 
> 标签：php, javascript, textfield

我有一个文本输入字段，在页面加载时由 PHP 填充。

```
<?php
$product_price = 10000;
?>

<input type='text' name='product_price' value='<?=$product_price?>' > 
```

我有一些 JavaScript 代码可以检查产品价格是否低于 12000。如果是，我会发出警报。

```
if(product_price <= 12000){
    alert("product price must be above 12000");
} 
```

警报工作正常，但问题是如果我将输入字段 product_price 的值更改为 50000，它仍然提示我“产品价格必须高于 12000”

为什么 JS 无法将我输入的值带入该字段？为什么 PHP 填充的值没有改变？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T09:02:26.977

您必须修改输入字段，以便每当用户按下某个键时，javascript `product_price`变量都会更新为输入字段的当前内容。

```
<input type="text" name="product_price" onkeypress="product_price = this.value" value="<?=$product_price?>" > 
```

最好将按键事件的处理委托给函数以验证用户输入。

```
<input type="text" name="product_price" onkeypress="updateProductPrice(this)" value="<?=$product_price?>" >

function updateProductPrice(input) {
    product_price = input.value;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T07:55:19.673

输入框的内容是一个字符串。用于[`parseInt()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)在检查它是否小于或等于 12000 之前对其进行转换。

```
if(parseInt(product_price, 10) <= 12000){
    alert("product price must be above 12000");
} 
```

这不会更新 PHP 变量，因为输入字段和变量之间没有绑定。JavaScript 在客户端运行，而 PHP 代码在服务器上运行。如果您希望从用户那里获取输入，则必须使用[表单提交 GET/POST](http://www.html-form-guide.com/php-form/php-form-tutorial.html)或[Ajax 进行更新，而无需重新加载页面](http://www.queness.com/post/328/a-simple-ajax-driven-website-with-jqueryphp)。

# java - Selenium 可以在 test(Assert.assertEquals()) 失败时截屏吗？

> ID：13265360
> 
> 赞同：1
> 
> 时间：2012-11-07T07:52:30.873
> 
> 标签：java, selenium-webdriver, testng

我是 Selenium 的新手，当 Assert equals 失败时，我被 Selenium 截屏所困。我正在使用TestNG。

当测试用例在服务器端失败时，它需要对页面进行截图，以便我可以准确地知道哪里出错了。

我将代码包装在 try catch 块中，在 catch 中，我正在截屏。

当 O 看到 selenium 问题时，屏幕截图功能正在工作，例如元素不可见、无法单击元素。

但这对于 Assert.equals() 来说是失败的。当 Assert.assertEquals() 失败时，我希望它会捕获并截取屏幕截图。任何人都可以澄清我的疑问吗？

下面是代码片段，我如何尝试实现这一点：

```
try {

Assert.assertEquals(expected,actualoutput,message) //it fails

}

catch {
Selenium taking screenshot  // iam not able to take screenshot
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T05:54:38.267

您可能正在捕获异常，而 Assert 在失败时会引发错误。

但是，我认为 testng 为您提供了其他钩子，您可以在其中分享在测试中对失败进行截图的逻辑。

实现此目的的一种方法是将截屏代码放入 ITestListener 接口提供的 onTestFailure 中。通过这种方式，您可以避免将所有验证放在 try-catch 块中。

最近，TestNG 还增加了一些[执行断言的灵活性](https://groups.google.com/forum/?fromgroups=#!searchin/testng-users/testng%24206.8/testng-users/Q5KGi30f0FE/jwbLBQRkrI8J)。您也可以尝试探索它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T09:35:49.773

虽然评论是真实的，但我为您提供解决方法 - 更改`Assert`为`if`：

```
if (!message.equals(expected)){
   takeScreenshot(outputfile.jpg);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-07T06:10:33.647

如果失败，我建议使用`@AfterMethod`调用`@Override`方法来缩短屏幕的注释`Result`

```
@AfterMethod
        public void onTestFailure(ITestResult testResult) throws IOException {
          if(testResult.getStatus() == ITestResult.FAILURE){
              System.out.println(testResult.getStatus());
            }

@Override
public void onTestFailure(ITestResult result) {
        System.out.println("***** Error " + result.getName() 
                                         + " test has failed *****");

        <Code and Logic>
  } 
```

# javascript - 从ckeditor中的单词粘贴时为标签分配属性

> ID：13265361
> 
> 赞同：2
> 
> 时间：2012-11-07T07:52:33.480
> 
> 标签：javascript, ckeditor

在 ckeditor 中从 word 粘贴时如何为标签分配属性？我想在将 word 文档中的内容粘贴到 ckeditor 时将某些样式属性添加到我的段落标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T20:36:37.080

怎么样挂钩到粘贴事件。您应该可以在那里添加清洁，只需确保首先完成清洁一词。看看这里： [http ://codesel.blogspot.se/2012/08/ckeditor-remove-html-tags-from-pasted.html](http://codesel.blogspot.se/2012/08/ckeditor-remove-html-tags-from-pasted.html)

# php - 站点自动切换

> ID：13265363
> 
> 赞同：3
> 
> 时间：2012-11-07T07:52:47.853
> 
> 标签：php, javascript, jquery, ajax, dynamic

我有 4 个网站，我想像幻灯片一样**循环**和展示，但没有任何额外的框架/添加样式。

我只是希望能够从站点 1 的 URL 转到 5-10 分钟后……它转到站点 2，然后是 3，然后是 4，然后返回到站点 1。在一个永无止境的循环中！

这可能吗？顺利有效地做到这一点的最佳方法是什么？

感谢所有帮助的家伙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T07:56:12.620

PHP：

```
header("refresh: 600; url=yoursite.html");   // 600 seconds = 10 minutes 
```

HTML：

```
<meta http-equiv="refresh" content="600;url=http://yoursite.com/"> 
```

Javascript：

```
function changeLocation() {
    window.location.href = "http://yoursite.com";
}

setTimeout (600000, changeLocation); // 600,000 milliseconds = 10 minutes 
```

您可以使用其中任何**一种**（不是全部一起使用），并通过一点逻辑将 URL 更改为序列中的下一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T07:56:16.973

您可以添加元刷新标签

```
<meta http-equiv="refresh" content="600;url=http://www.yournextsite.com/" /> 
```

在每个网站上从一个到另一个

# c++ - 使用 Qdom 忽略无效的 XML 标记？

> ID：13265366
> 
> 赞同：0
> 
> 时间：2012-11-07T07:53:00.747
> 
> 标签：c++, qt, xml-parsing

我尝试解析包含如下属性标记的 XML 文件：

```
a="(USA & CANADA)" 
```

但我发现它不是格式正确的 XML，因为“&”应该是 URL 编码 (&)

有没有办法告诉 QDom 忽略无效文本来解析文件？因为我不能只修复所有 XML 文件。

我非常感谢任何解决此问题的方法。

编辑：我发现有一个函数 setInvalidDataPolicy(AcceptInvalidChars) 但这在使用 QDomDocument 的 setContent() 时不起作用，或者我只是以错误的方式使用它......

```
QDomDocument xmlcontent;
QDomImplementation impl;
impl.setInvalidDataPolicy(QDomImplementation::AcceptInvalidChars);
QFile XMLContentFile(pathString);
xmlcontent.setContent(&XMLContentFile) 
```

有人有什么想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:49:07.033

我解决了这个问题。我现在使用 QXmlStreamReader 解析 XML 文件，当它引发错误时，我启动一个自己的函数来修复 XML 文件。然后重新启动我的解析程序。这可以完成这项工作，我找不到更好的方法来实现这一目标。

# icons - 如何从 iPhone/iPod5 设备中的应用程序图标中删除光泽效果？

> ID：13265368
> 
> 赞同：1
> 
> 时间：2012-11-07T07:53:06.300
> 
> 标签：icons, iphone-5

我正在寻找一种解决方案来从 iPhone 5 设备的应用程序图标中删除光泽效果。我知道这个效果是苹果默认提供的，为了禁用这个效果，我们需要设置一个标志 In `Info.plist`。这对我有用，适用于普通的 iPhone/iPod 设备（非 4 英寸）。我已经完成了 plist 文件中的每一件事。我也放入了所有需要的图标文件。我认为 4 英寸 (iPhone 5/iPod) 设备不需要单独的图标文件。

我也尝试过这些链接，但我的问题仍然存在。

[第一个链接](https://stackoverflow.com/questions/4727690/how-do-i-remove-gloss-from-an-iphone-app-icon)

[第二环节](https://stackoverflow.com/questions/1453680/how-to-remove-the-white-reflection-on-the-application-icon)

我需要做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T19:32:20.757

只需清除您的构建并从 iPhone 模拟器或 finder 中删除应用程序，然后再次运行该应用程序。此外，在 info.plst 文件中的图标（iOS 5）下，删除图标已经包含光泽效果为真。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-27T13:47:32.490

检查您的 info.plist，并确保您在项目描述中选择了 prerendered 复选框。删除您正在测试的 iPhone5 和/或 iPhone 模拟器上的应用程序。确保您已经包含了您正在部署的所有设备类型的图标。现在再次部署，看看情况如何。

# sql - SQL 更新选择无法绑定多部分标识符“OLD_SP.Num”

> ID：13265369
> 
> 赞同：0
> 
> 时间：2012-11-07T07:53:16.593
> 
> 标签：sql, sql-server, sql-update

```
Declare @modCode varchar(3)
SET @modCOde = 'SOR';

UPDATE  Doc_SalesOrder
SET     OLD_SP.Num = NEW_SP.NewNum
FROM    Doc_SalesOrder as OLD_SP
INNER JOIN
(
     Select
       Id,
       dbo.ApplyModuleCode(@modCode,Num) as NewNum 
     From Doc_SalesOrder
     Where Num not LIKE '%'+@modCOde+'%'
)NEW_SP ON OLD_SP.Id = NEW_SP.Id 
```

当我运行查询时，错误是：

> 无法绑定多部分标识符“OLD_SP.Num”。

为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T07:57:44.273

利用

```
UPDATE  OLD_SP
SET     OLD_SP.Num = NEW_SP.NewNum
FROM    Doc_SalesOrder as OLD_SP /* .... */ 
```

或者只是简单地将表前缀完全放在 set 语句目标中。这里没有歧义。

```
UPDATE  Doc_SalesOrder
SET     Num = NEW_SP.NewNum
FROM    Doc_SalesOrder as OLD_SP /* .... */ 
```

# ruby-on-rails - Rails 真实性令牌在刷新后和创建时会发生什么

> ID：13265378
> 
> 赞同：0
> 
> 时间：2012-11-07T07:53:56.513
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我想知道何时再次生成 rails 中的身份验证令牌。因为每当我刷新页面令牌时都不会改变？我想知道什么时候会再次改变

可能重复：

> [rails 3 authentication_token 它是如何生成的](https://stackoverflow.com/questions/6968106/rails-3-authenticity-token-how-it-is-generated#comment18079544_6968106)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T11:35:27.467

Rails 真实性令牌用于[CSRF 保护](http://guides.rubyonrails.org/security.html#cross-site-request-forgery-csrf)。它存储在 session ( [source](https://github.com/rails/rails/blob/master/actionpack/lib/action_controller/metal/request_forgery_protection.rb#L176) ) 中，只有在 session 被销毁时才会重新生成（例如，当您关闭浏览器或清除 session cookie 时）。

# vb.net - 在“Resources.Designer.vb”中声明的模块“资源”和模块“资源”在命名空间“资源”中发生冲突

> ID：13265380
> 
> 赞同：2
> 
> 时间：2012-11-07T07:54:07.603
> 
> 标签：vb.net, visual-studio-2010

有没有人在 Visual Basic 2010 中看到过这个错误，如果有的话......关于如何解决它的任何想法？

错误是

```
module 'Resources' and module 'Resources', declared in 'Resources.Designer.vb', conflict in namespace 'Resources' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T13:49:56.097

我有同样的 - 删除重复文件：MyProject 文件夹中的 Resources.Designer.vb （这似乎是出于未知原因 - 可能是 VS2010 中的一些自动进程。

就我而言，我有两个文件（完全相同）：

1.  资源.Designer.vb
2.  Resources1.Designer.vb

删除其中一个应该可以。

# ruby-on-rails - 存储所有可能的翻译是“可取的”/“正确的方式”吗？

> ID：13265384
> 
> 赞同：0
> 
> 时间：2012-11-07T07:54:39.220
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, internationalization, globalize3

我正在使用 Ruby on Rails v3.2.2 和[Globalize3 v0.2.0](https://github.com/svenfuchs/globalize3) gem。目前我正在使用 Globalize3 将国家、地区和城市名称翻译成两种语言，但我计划用它来将我的应用程序国际化为更多语言（理想情况下，全部）。因此，我正在使用翻译数据填充数据库，但对此我有一些疑问：我是否应该使用*所有*`country_translations`国际化名称填充我的,`region_translations`和`city_translations`数据库表（即使某些名称可能与默认名称相同 - 在这个如果国际化名称*为零*或重复）？也就是说，在翻译表中，我应该*为每个****我的应用程序支持的语言环境（在我目前的情况下，两个语言环境）以及*每个*国家、地区和城市？***

 **这样做，在支持所有语言的“理想”场景中，提到的表（主要是与地区和城市相关的表）将非常大，并且可能性能较低。另一方面，它确保 Globalize3 能够正常工作，因为在某些情况下似乎不存在国际化记录（我避免解释我的具体情况，因为它“很难”做，也许它会需要一本书来解释）gem*没有*正确地回退到当前的语言环境。

我应该如何进行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T21:26:12.127

我建议您确实预先填充翻译。我一直在做一个项目，其中内容的语言是初步已知的（其中 5 个），并且客户想要 5 个选项卡用于在管理后端填充翻译（当他们编辑包含翻译的对象时）。

但是，如果您没有预先填充翻译，则不会发生这种情况。在我看来，这种情况下的数据库空间或速度不是问题；您将需要 100,000 多个对象，每个对象都有多个翻译，以在默认 MySQL 安装上引入甚至是轻微的滞后。

假设您使用 ActiveAdmin，您将执行以下操作：

```
# app/admin/your_models.rb
...
controller do
  def create
     ...
     YOUR_LANGUAGE_CODES.each do |lang|
       @your_model.translations.build(:locale => lang, :text => YOUR_DEFAULT_I18N_TEXT)
     end
  end
end 
```

因此，当您在后台创建带有翻译的新对象时，您还将自动为其创建所有必要的翻译。当然，为了进行适当的清理，不要忘记在包含模型中包含它：

```
has_many :translations, :dependent => :destroy 
```

...因此，当您销毁对象时，翻译会随之而来。

...或者，您可以只获取循环代码并将其包含在您用来创建包含翻译的对象的任何其他控制器方法中。

我没有完全理解你有点分层的翻译模型，但我相信我已经说明了我的观点。您应该能够对此进行扩展以满足您的特定需求。**

# c# - 下载的文件作为控制器（ASP.NET MVC 3）中的流将自动处理？

> ID：13265392
> 
> 赞同：3
> 
> 时间：2012-11-07T07:55:27.067
> 
> 标签：c#, asp.net-mvc-3, stream

让我们假设下载所选文件的控制器：

```
 public FileResult Download( string f ) {

         Stream file = MyModel.DownloadFiles( f );

         return File( file, "application/octet-stream", (file as FileStream).Name );
 } 
```

和**MyModel**包含

```
public static Stream DownloadFiles(string file){

   return new FileStream(file, FileMode.Open, FileAccess.Read);
} 
```

如果我`using`在控制器中使用关键字，则会抛出异常：**`Cannot access closed file`**.

好吧，我想确定下载的文件是否会被处理（我不知道是否可能，怎么做）？

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-07T08:04:28.383

Controller.File 方法在内部使用**FileStreamResult**类，该类已经包含**using**关键字

```
protected override void WriteFile(HttpResponseBase response) {
    // grab chunks of data and write to the output stream
    Stream outputStream = response.OutputStream;
    using (FileStream) {
        byte[] buffer = new byte[_bufferSize];
        while (true) {
            int bytesRead = FileStream.Read(buffer, 0, _bufferSize);
            if (bytesRead == 0) {
                // no more data
                break;
            }
            outputStream.Write(buffer, 0, bytesRead);
        }
    }
} 
```

[https://github.com/ASP-NET-MVC/ASP.NET-Mvc-3/blob/master/mvc3/src/SystemWebMvc/Mvc/FileStreamResult.cs](https://github.com/ASP-NET-MVC/ASP.NET-Mvc-3/blob/master/mvc3/src/SystemWebMvc/Mvc/FileStreamResult.cs)

# curl - 如何设置 wget 超时参数？

> ID：13265398
> 
> 赞同：1
> 
> 时间：2012-11-07T07:55:56.820
> 
> 标签：curl, timeout, wget

我尝试使用函数 system() 调用 wget 从远程实时数据馈送器中获取一些内容，我将 wget -T 设置为 20 并将 -t 设置为 0，如果我理解正确，那么这将允许 Wget 中止如果连接或读取时间超过 20 秒，则无需重试。

但是，这似乎不起作用，当网络连接不好时，wget 将永远挂在那里，所以我该怎么做才能避免这种情况呢？

另外，我听说这个旧版本的 wget 中可能存在一些错误（我主要是 Windows 用户），我也可以尝试 curl，谁能告诉我 curl 处理超时是否更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-08T15:53:31.250

使用参数

```
--read-timeout=SECS -t 0 
```

# java - 更新非 JSF 表单

> ID：13265399
> 
> 赞同：0
> 
> 时间：2012-11-07T07:55:59.547
> 
> 标签：java, ajax, jsf-2, primefaces

我有一种情况，我想将用户的付款详细信息提交给我的支付网关合作伙伴。

为此，我有一个单独的非 JSF 表单，其中隐藏值作为要传递的参数。

```
<form id="hiddenForm" action="#{checkoutBean.payuAction}" method="post" name="payuForm">

                        <p:outputPanel id="hiddenPanel">
                        <h:inputHidden id="hash" value="#{checkoutBean.hash}"/>
                        <h:inputHidden id="txnid" value="#{checkoutBean.txnid}"/>

                        <h:inputHidden id="amount" value="#{checkoutBean.totoalAmount}"/>
                        <h:inputHidden id="firstname" value="#{checkoutBean.firstname}"/>
                        <h:inputHidden id="email" value="#{checkoutBean.email}"/>
                        <h:inputHidden id="phone" value="#{checkoutBean.phone}"/>
                        <h:inputHidden id="productinfo" value="#{checkoutBean.productInfo}"/>
                        <h:inputHidden id="surl" value="#{checkoutBean.sURL}" />
                        <h:inputHidden id="furl" value="#{checkoutBean.fURL}"/>
                        </p:outputPanel>
    </form> 
```

上面的隐藏值是在向导的最后一步使用 ajax 生成的（primefaces）。ajax 调用正在发生，但我无法更新非 JSF 表单。值为空。

```
<p:commandButton value="Confirm" actionListener="#{checkoutBean.initPayu}" onsuccess="submitPayuForm()" update=":hiddenForm:hiddenPanel" /> 
```

上面的按钮在一个`<h:form>.`

现在我相信不可能从 JSF 组件更新非 JSF 组件。但我只是不知道如何解决这种情况。

关于如何解决这个问题的任何想法？

使用：JSF 2，Primefaces 3.3

**提前致谢。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T08:10:10.030

由于您的表单不是 JSF 组件，因此您不需要将其 id 附加到您的 JSF 组件 ( `:hiddenForm:hiddenPanel`) 的 id 上。

换句话说，尝试这样的事情：

```
<p:commandButton ... update="hiddenPanel" /> 
```

# android - 如何在 webview 中收听 youtube 对象的状态

> ID：13265401
> 
> 赞同：2
> 
> 时间：2012-11-07T07:56:07.523
> 
> 标签：android, youtube-api, android-webview

我将在 Activity 中嵌入一个 youtube 播放器。我必须检查它是否正在播放或已经完成。这是代码

```
package com.example.videotest;

import java.util.regex.Matcher;
import java.util.regex.Pattern;
import org.json.JSONException;
import android.net.Uri;
import android.os.Bundle;
import android.os.Handler;
import android.os.HandlerThread;
import android.annotation.SuppressLint;
import android.app.Activity; 
import android.content.Intent;
import android.graphics.Color;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.webkit.WebSettings.PluginState;
import android.webkit.WebView;
import android.widget.ImageView;
import android.widget.ImageView.ScaleType;
import android.widget.Toast;

public class MainActivity extends Activity {

 WebView webview;

@SuppressLint({ "SetJavaScriptEnabled", "NewApi", "NewApi" })
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    String ytId = getYoutubeID("http://youtu.be/GDka8VKLMJY");
  final String iframe = "<html>" +
        "<body>" +
        "<object width="+"300"+"height="+"220"+">" +
        "<param name=\"movie\" value=\"https://www.youtube.com/v/"+ytId+"?autoplay=&enablejsapi=1&modestbranding=1&rel=0&showinfo=0&autohide=1&theme=light&version=3\">" +
        "</param>" +
        "<param name="+"allowFullScreen"+ "value="+"false"+">" +
        "</param>" +
        "<param name="+"allowScriptAccess"+"value="+"always"+">" +
        "</param>" +
        "<embed src=\"https://www.youtube.com/v/"+ytId+"?autoplay=1&enablejsapi=1&modestbranding=1&rel=0&showinfo=0&autohide=1&theme=light&version=3\" type=\"application/x-shockwave-flash\" allowfullscreen=\"true\" allowScriptAccess=\"always\" width=\"300\" height=\"220\">" +
        "</embed>" +
        "</object>" +
        "</body>" +
        "<html>";

    ImageView play = (ImageView)findViewById(R.id.ImageView1);

    play.setScaleType(ImageView.ScaleType.FIT_XY);
    play.getLayoutParams().height=200;
    play.getLayoutParams().width=-1;
    webview=(WebView) findViewById(R.id.webView1);
    webview.getSettings().setJavaScriptEnabled(true);
    webview.getSettings().setPluginState(PluginState.ON);
    webview.setBackgroundColor(Color.parseColor("#00000000"));
    play.setOnClickListener(new OnClickListener(){

        public void onClick(View v) {
            webview.loadData(iframe, "text/html", "utf-8");
        }});

}

public String getYoutubeID (String URL){
    String youtubeId = "";
    String pattern = "https?:\\/\\/(?:[0-9A-Z-]+\\.)?(?:youtu\\.be\\/|youtube\\.com\\S*[^\\w\\-\\s])([\\w\\-]{11})(?=[^\\w\\-]|$)(?![?=&+%\\w]*(?:['\"][^<>]*>|<\\/a>))[?=&+%\\w]*";
    Pattern compiledPattern = Pattern.compile(pattern, Pattern.CASE_INSENSITIVE);
    CharSequence cs = URL;
    Matcher matcher = compiledPattern.matcher(cs);
    if(matcher.find()){
        youtubeId=matcher.group(1);
        Toast.makeText(getBaseContext(), matcher.group(1), Toast.LENGTH_LONG).show();
    }
    return youtubeId;
}

} 
```

如何跟踪视频是否正在播放？谢谢你的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T01:11:05.483

您是否考虑过使用 YouTube Android Player API？[http://apiblog.youtube.com/2012/12/no-webview-required-with-native-youtube.html](http://apiblog.youtube.com/2012/12/no-webview-required-with-native-youtube.html)。它提供了一个 Java API，因此您不需要包含 WebView，并且使用此机制播放比使用 WebView 更可靠。

# windows - 中星微的 AMCAP.exe 如何通过运行不同驱动程序的摄像机捕获视频？

> ID：13265405
> 
> 赞同：1
> 
> 时间：2012-11-07T07:56:24.930
> 
> 标签：windows, camera, driver, webcam

我一直在试验两个摄像头，一个是网络摄像头，另一个是带有自己的驱动程序的评估套件摄像头，我可以运行 AMCAP.exe（由 Vimicro 提供），它将显示来自连接的摄像头的实时流媒体（两者中的任何一个）尽管每个都使用不同的驱动程序。

**我的问题是：假设 AMCAP.exe 仅作为视频流显示程序运行是否安全？在这种情况下，我假设大多数相机供应商都遵循相机驱动程序的通用标准接口。任何人都可以评论这种假设或解释 AMCAP.exe 如何做到这一点。**

我已经能够在我的基于 c++ 的 OpenCv 应用程序中使用这两个摄像头，但我问是因为第三家公司将为我提供一个基于 USB 板的摄像头（用于评估）并且他们正在询问驱动程序规格。所以我建议它应该与类似于网络摄像头的 Windows 默认驱动程序一起使用，以避免兼容性问题，但我想知道是否有更好的选择我可能会丢失。

注意 I：我已经能够通过以下方式验证每个相机正在使用不同的驱动程序：开始->设备和打印机->USB 2.0 相机->硬件标签->USB 2.0 相机->驱动程序->驱动程序详细信息。连接网络摄像头时，它使用的是微软提供的驱动程序文件：kshunk.sys 和 usbvideo.sys。当我断开网络摄像头并连接评估摄像头时，我能够验证它是否正在使用它自己的（非 Windows）驱动程序。

注二：中星微的AMCAP.exe可以从以下网址下载：VIMICRO USB PC Camera (VC0303) - CNET Download.com

注三：电脑为酷睿i7。操作系统是win7 64位。

对此的任何帮助或意见都非常感谢和非常需要。

最好的，哈桑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T10:47:12.410

相机驱动程序必须实现操作系统定义的接口，这对于同一类别的各种设备（在您的情况下是 USB 相机）没有什么不同。某些设备的默认驱动程序与 Windows 捆绑在一起，可以使用它们。但是，它们不一定对每个设备都是最佳的。例如，对于相机，它们可能只支持有限的一组支持的分辨率，或者可能不是最佳的省电（只是一个例子，不一定会发生什么！）。这是因为 MS 只实现了每个设备中必须存在的基本和必要的功能，而不依赖于各种供应商的专有硬件。专用的摄像头驱动程序应该提供所有附加功能 - 您是决定它是否对您重要的人。

# iis - 缺少授权标头

> ID：13265406
> 
> 赞同：3
> 
> 时间：2012-11-07T07:56:39.140
> 
> 标签：iis, iis-6, iis-7.5, tridion

我有一个运行 ISAPI 过滤器的网站，提供 SSO 功能以及匿名和基本身份验证。

ISAPI 过滤器使用基本凭据填充每个请求的“授权”标头，例如基本的 base64EncodedString（用户名：密码），我可以使用 Fiddler 看到。

接下来，我有一个 HTTP 模块从“授权”标头中获取基本凭据，对其进行解码并将用户名放入新的标头值中。然后，新的标头由 Tridion 拾取并由内置的 SSO 模块使用。

此解决方案适用于 IIS6，但不适用于 IIS7.5；在 IIS7.5 中，请求中不存在“授权”标头。我检查了 HTTP 模块和虚拟 ASPX 页面中的标头。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T11:29:39.207

听起来你的 ISAPI 过滤器没有在 IIS 7.5 中被触发。确保您已按照此处所述启用它们：[http ://forums.iis.net/t/1178302.aspx](http://forums.iis.net/t/1178302.aspx)

# mercurial - 如何获取人类可读的 mercurial push-command 流量示例

> ID：13265408
> 
> 赞同：1
> 
> 时间：2012-11-07T07:57:10.920
> 
> 标签：mercurial, https, protocols, tortoisehg, bitbucket

我正在使用 mercurial hg 使用 https 推送到 bitbucket.org。

对文本文件和二进制文件进行了大量更改。所以我想把这个命令的真实流量用http格式捕获来分析一下。我怎样才能做到？或者至少检查一个捕获的人类可读推送的例子会很棒。

有一个[mercurial wire protocol](http://mercurial.selenic.com/wiki/WireProtocol?highlight=%28%28HttpCommandProtocol%29%29)的链接，但没有示例它的实际外观。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T08:09:18.247

有几个代理（http://mitmproxy.org/ 很受欢迎，我真的很喜欢[http://www.charlesproxy.com/](http://www.charlesproxy.com/)）可以 MITM HTTPS 连接……但是，启动本地 Mercurial 可能更简单服务器，然后嗅探该连接：

```
$ cd some-hg-repo/
$ hg serve
… listening at http://127.0.0.1:8000/ … 
```

然后启动你的数据包嗅探器，在环回接口上观察，并从另一个外壳：

```
% hg clone http://127.0.0.1:8000/ repo-clone
% cd repo-clone
% fortune > foo.c
% hg commit -m "change to foo"
% hg push 
```

下面是它的一些样子：

```
$ sudo tcpdump -i lo0 -A 'tcp port 8000 and (((ip[2:2] - ((ip[0]&0xf)<<2)) - ((tcp[12]&0xf0)>>2)) != 0)'
03:15:05.515867 IP localhost.52031 > localhost.irdmi: Flags [P.], seq 2116430132:2116430284, ack 835526317, win 40830, options [nop,nop,TS val 269453377 ecr 269453377], length 152
E....2@.@............?.@~&)41......~.......
...A...AGET /?cmd=capabilities HTTP/1.1
Accept-Encoding: identity
host: localhost:8000
accept: application/mercurial-0.1
user-agent: mercurial/proto-1.0
… snip …
03:15:05.516780 IP localhost.irdmi > localhost.52031: Flags [P.], seq 173:303, ack 152, win 40830, options [nop,nop,TS val 269453378 ecr 269453378], length 130
E...8b@.@............@.?1..Y~&)....~.......
...B...Blookup changegroupsubset branchmap pushkey known getbundle unbundlehash batch stream unbundle=HG10GZ,HG10BZ,HG10UN httpheader=1024

GET /?cmd=batch HTTP/1.1
Accept-Encoding: identity
x-hgarg-1: cmds=heads+%3Bknown+nodes%3D
host: localhost:8000
vary: X-HgArg-1
accept: application/mercurial-0.1
user-agent: mercurial/proto-1.0

…snip…

03:15:05.528852 IP localhost.irdmi > localhost.52033: Flags [P.], seq 474:516, ack 355, win 40830, options [nop,nop,TS val 269453389 ecr 269453389], length 42
E..^.h@.@............@.A.W...,.....~.R.....
...M...M92550c48fd2dc2c112ac88215eff29a5012abff1
;
03:15:05.529756 IP localhost.52033 > localhost.irdmi: Flags [P.], seq 355:628, ack 516, win 40830, options [nop,nop,TS val 269453390 ecr 269453389], length 273
E..E.N@.@............A.@.,...W.....~.9.....
...N...MGET /?cmd=getbundle HTTP/1.1
Accept-Encoding: identity
x-hgarg-1: common=0000000000000000000000000000000000000000&heads=92550c48fd2dc2c112ac88215eff29a5012abff1
host: localhost:8000
vary: X-HgArg-1
accept: application/mercurial-0.1
user-agent: mercurial/proto-1.0

…snip…

03:15:05.535163 IP localhost.irdmi > localhost.52033: Flags [P.], seq 688:6194, ack 628, win 40830, options [nop,nop,TS val 269453395 ecr 269453394], length 5506
E...AZ@.@............@.A.W...,.....~.......
........]..>O..3.x....L .-.....I.mh....M}.i!..Bh8.PL.   .O
1iB ...C.....4.4....:...H..w....7.\..#.{.p.......-g.....^u....5...H...MWu.@....c.C4Y^19QP....l.....1.d.ukh.5..M.....k.A..<'.2..,.2.......{.q.(?.....rc"._.........m.xx.';...]V_0..e..j..{....OWf.n........J.bZ&kVXAR4...!....*..J.b..x.....@.Y..P........e.i;#....c.F..._.m.a|. .........=.

… snip … 
```

# html - 如果不是 IE 8 或更低版本，则为 HTML

> ID：13265410
> 
> 赞同：3
> 
> 时间：2012-11-07T07:57:14.773
> 
> 标签：html, internet-explorer

我尝试将此语法用于 IE8 或更低版本

```
<!--[if !lte IE 8]>
   //my code here
<![endif]--> 
```

但它似乎注释掉了我的代码……这段代码正确吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-07T08:12:25.277

我不确定这是否是有效的语法，但它在我的情况下确实有效，所以我会在这里发布：

```
<!--[if gte IE 9]><!-->
<canvas width="200" height="200"></canvas>
<!--<![endif]--> 
```

这将针对 IE>=9 和其他浏览器，而 IE<9 将忽略该内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-11T12:01:53.017

在这种情况下，脚本将在 IE10+ 和任何其他非 IE 浏览器上加载。

```
 <!--[if (gt IE 8)|!(IE)]><!-->

    <!-- put script here -->

 <!--<![endif]--> 
```

# html - 如何在 Outlook 的单元格中换行连续文本？

> ID：13265411
> 
> 赞同：3
> 
> 时间：2012-11-07T07:57:26.020
> 
> 标签：html, outlook

我有宽度为 700px 的表格，其中有 6 列。最后一列`<td>`有大约 1000 个字符的连续文本。我已将前 5 列的宽度指定为每列 100 像素，最后一列本身占用 200 像素。由于最后一列中有大量字符，前一列的宽度减小了，最后一列中的文本没有被换行。

在此之前，我尝试过使用 thead 但`<th>`无法设置宽度。我尝试在样式和外部样式中给出宽度，也尝试用百分比和像素给出宽度。没有任何工作。

我尝试在以下位置使用这些`td`：

```
width="200" style="width:200px" 
```

和

```
style="20%" 
```

# jquery - 如何同时使标签和单选按钮可见/不可见并具有切换幻灯片功能？

> ID：13265417
> 
> 赞同：-3
> 
> 时间：2012-11-07T07:57:51.277
> 
> 标签：jquery

给定一个表格行中的复选框，以及下一个表格行上的三个单选按钮。加载页面时，单选按钮是不可见的。

如何创建一个单击功能，可以使单选按钮可见以及上滑下滑效果？

```
<td>
<input type="checkbox" id="appalert" name="appalert" value="appalert"  onclick="toggleRadioButtonPanel(this);"> alert
</td>

<td>
<label class="alertTypePanel" style="visibility: hidden">alertType: </label>
<input type="radio" name="alertTypeOpt" id="alertTypeOpt1" class="alertTypePanel" value="Ticker" style="visibility: hidden">
<label class="alertTypePanel" style="visibility: hidden" style="visibility: hidden">Ticker</label>
<input type="radio" name="alertTypeOpt" id="alertTypeOpt2" class="alertTypePanel" value="Pop up" style="visibility: hidden">
<label class="alertTypePanel" style="visibility: hidden">Pop up</label>
</td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T08:05:00.477

```
<td>
    <input type="checkbox" id="appalert" name="appalert" value="appalert" class="appalert"> alert
</td>

<td>
  <div class="toggle" style="display:none;">
    <label class="alertTypePanel">alertType: </label>
    <input type="radio" name="alertTypeOpt" id="alertTypeOpt1" class="alertTypePanel" value="Ticker">
    <label class="alertTypePanel">Ticker</label>
    <input type="radio" name="alertTypeOpt" id="alertTypeOpt2" class="alertTypePanel" value="Pop up">
    <label class="alertTypePanel">Pop up</label>
  </div>
</td>

$('.appalert').click(function(){
    $(this).parent().next('td').find('.toggle').slideToggle();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T08:07:01.327

尝试这个

**[演示](http://jsfiddle.net/pintu31/cD8FK/)**

```
$('#appalert').click(function(){
   $('label, input:radio').toggleClass('alertTypePanel').slideToggle();
});​​​​

<table>
<tr>
<td>
<input type="checkbox" id="appalert" name="appalert" value="appalert" > alert
</td>

<td>
 <label class="alertTypePanel" >alertType: </label>
 <input type="radio" name="alertTypeOpt" id="alertTypeOpt1" class="alertTypePanel"     value="Ticker" >
<label class="alertTypePanel" >Ticker</label>
<input type="radio" name="alertTypeOpt" id="alertTypeOpt2" class="alertTypePanel" value="Pop up" >
<label class="alertTypePanel" >Pop up</label>
</td>
</tr></table>

.alertTypePanel{
 display:none;
}​ 
```

# javascript - 可以使用 nowjs 和 node.js 向特定用户发送消息（选择性推送通知）

> ID：13265423
> 
> 赞同：1
> 
> 时间：2012-11-07T07:58:29.270
> 
> 标签：javascript, node.js, nowjs-sockets

我有一个用户组，所有用户都连接到单个服务器，并且我想从一个用户向另一个用户发送消息，而接收用户不必接受来自原始消息的任何类型的请求。因此，我尝试为此使用 nowjs，在这里我将简单地广播针对特定用户的味精，并且只有所需的用户会接受它。简而言之，我需要发送诸如选择性推送通知之类的东西。你认为这种广播方法是个好主意吗，因为我认为我一次最多可以拥有 300 个用户，如果没有其他建议，我该如何实施。提前致谢。

# permissions - 请求对新 sdk 的附加权限，但对话框显示登录表单

> ID：13265426
> 
> 赞同：0
> 
> 时间：2012-11-07T07:58:38.527
> 
> 标签：permissions, facebook-android-sdk

在以前的 android SDK 中，我通过调用请求新的权限`Facebook.authorize()`，它显示了批准权限屏幕。但在 SDK 3.0 中，当我调用时`FacebookActivity.openSessionForPublish()`，对话框总是显示登录表单。如何显示批准权限屏幕？

我已经设置了具有令牌和到期日期的会话，其 SessionState 为`CREATED_TOKEN_LOADED`.

是否需要显示权限对话框或`Facebook.authorize()`总是显示登录表单？那么请教我正确的方法。

我的代码如下

```
 public class FbConn extends FacebookActivity {
    public void onCreate(Bundle savedInstanceState) {
       ...
       if( savedInstanceState == null ) {
          Session savedSession = CommonUtil.getFbSession(CustomSessionStore.getFbInfo(getApplicationContext())); //get access token and expiration date from session store and set up new session.
          Session.setActiveSession(savedSession); 
          setSession(savedSession);
       }

    }

    protected void onStart() {
       super.onStart();
       openSessionForPublish(EpisodeApplication.config.getSelectedServer().fbAppId, Constants.FB_PERMISSIONS);
    }

 } 
```

**更新**

我已经注释掉了这些行并且权限请求屏幕显示成功。但我不确定这是否正确。

在`com.facebook.LoginActivity`第 62 行，

```
Utility.clearFacebookCookies(this); 
```

在`com.facebook.Session`第 1202 行，

```
Utility.clearFacebookCookies(getStaticContext()); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T19:04:01.083

如果您已经有一个有效的会话，来自以前的身份验证流程，那么如果您想请求新的权限，请使用 Session.ReauthorizeRequest 类。

```
Session.ReauthorizeRequest reauthRequest = new Session
                .ReauthorizeRequest(this, Constants.FB_PERMISSIONS);
session.reauthorizeForPublish(reauthRequest); 
```

这应该会显示您要求的新权限的权限屏幕，而不是登录表单。

但是，从您的逻辑来看，尚不清楚您在哪里处理第一次登录。如果您希望在此类中处理它，那么我建议使用以下内容：

```
Session.openActiveSession(this, true); 
```

如果没有缓存的令牌，这将打开一个登录表单。如果有缓存的令牌，它将创建一个新的 Session 并使其处于活动状态。这将打开一个具有基本权限的会话（如果用户需要登录）或打开一个具有基于检索到的缓存令牌的权限的会话。然后，您可以调用 re-auth 方法来请求发布权限。您需要在上下文中执行此操作，并且通常不希望背靠背调用 auth 函数，即登录用户，然后立即请求发布权限。

# ruby-on-rails - 检查在 ruby on rails 控制器中收到的表单数据

> ID：13265427
> 
> 赞同：0
> 
> 时间：2012-11-07T07:58:42.380
> 
> 标签：ruby-on-rails, ruby-on-rails-3, to-yaml

我想检查从 ruby​​ on rails 控制器中的表单接收到的表单数据。

我试过了，但没有显示：

```
@user.to_yaml 
```

`@user`表单名称（`<%=form_for @user`）在哪里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T08:10:38.047

表单发送的数据存储在`params`哈希中（有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/6885990/rails-params-explained)）。

此外，在开发中，只需`raise`在控制器操作中添加一个以显示错误页面，并显示所有请求参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T08:13:48.907

上面的答案是正确的。但想改变一些东西

```
all the details are stored in params only 
```

最好通过执行 flash.notice = params 在 flash 中显示这些内容

因为它不会影响应用程序的工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T08:36:04.073

为什么不检查控制台上的服务器日志或使用调试器 gem 来跟踪参数和请求移动的文件......

# .net - 我的 WCF 服务的最大会话数？

> ID：13265432
> 
> 赞同：0
> 
> 时间：2012-11-07T07:59:05.720
> 
> 标签：.net, wcf, iis, configuration, self-hosting

我有一个运行 InstanceContextMode = PerCall、ConcurrencyMode = Multiple、TCP 的 WCF 服务，并且托管在 Selfhost（Windows 服务）和 IIS7/IIS8 中。

节流设置为：

```
<serviceThrottling maxConcurrentCalls="2000" maxConcurrentSessions="2147483647" maxConcurrentInstances="2000"/> 
```

绑定看起来像这样：

```
<binding name="netTcpRegular" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="infinite" sendTimeout="01:00:00" transactionFlow="false" transferMode="Buffered" transactionProtocol="OleTransactions" hostNameComparisonMode="StrongWildcard" listenBacklog="1000" maxBufferPoolSize="2147483647" maxBufferSize="2147483647" maxConnections="200" maxReceivedMessageSize="2147483647">
          <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647"/>
          <reliableSession ordered="true" inactivityTimeout="infinite" enabled="false"/>
          <security mode="None">
            <transport clientCredentialType="None"/>
          </security>
        </binding> 
```

我们在服务中保持状态，因此每个用户都会有自己的对象，每次调用都会获取这些对象。

**问题是使用这些设置我们可以拥有多少并发用户（会话）以及哪些设置会影响这一点？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T08:33:19.380

这取决于单个客户端在任何时候进行多少次并发调用 - 即，如果它在 5 个不同的线程上进行 5 次调用，那么您的 maxconcurrentusers 值将是它可以处理的会话数的 5 倍。当您使用 InstanceContextMode = PerCall 时，您会发现 WCF 将采用 maxConcurrentCalls 和 maxConcurrentInstances 中较低的值作为它创建的实例数。

因此，如果您在任何时候每个客户只拨打一个电话，那么您所提供的值中的会话数为 2000。

如果每个客户端进行 5 个并发调用，则应将其设置为 400。

负载测试中的反复试验通常是最好的方法。

这里有一个很好的例子——http: [//blogs.msdn.com/b/rickrain/archive/2009/06/26/wcf-instancing-concurrency-and-throttling-part-3.aspx](http://blogs.msdn.com/b/rickrain/archive/2009/06/26/wcf-instancing-concurrency-and-throttling-part-3.aspx)

# php - 使用 PHP 的原始文本 SOAP 消息

> ID：13265435
> 
> 赞同：3
> 
> 时间：2012-11-07T07:59:20.090
> 
> 标签：php, sockets, networking, soap, tcp

我正在尝试在我自己的 PHP 应用程序和其他“等待”（侦听）SOAP 消息的外部软件之间进行集成。但是关于我的情况的关键问题是，这个监听 SOAP 消息的软件只接受 RAW 内容，没有可以调用的方法，也没有可以使用的 Wsdl。

是的，我知道......这很奇怪，因为使用 SOAP，您通常应该发送带有一些参数的方法请求，但在这种情况下，我唯一拥有的是一个 URL，我应该使用应该只包含一个字符串的 SOAP 消息发送该 URL （以不成问题的特殊方式格式化），然后此服务器将向我的 PHP 应用程序返回另一个包含字符串的 SOAP 消息。就这样。

似乎在我的情况下我不能使用 PHP SOAP 库，因为我没有方法（或函数）可以调用；我唯一拥有的是一个 URL 和一个我应该像参数一样传递的字符串。我一直在考虑使用 PHP 套接字创建一个基本的 SOAP 消息到那个“奇怪的肥皂服务器”，但我不知道如何去做，或者我如何用 PHP 创建一种让我的应用程序等待的方法来自该外部服务器的答案。

非常感谢您提前提供的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T08:10:29.543

您最好自己制作 WSDL。这不是最微不足道的事情，但它有据可查，因此您应该能够弄清楚。

无需从您将请求发送到的服务中获取 WSDL（在某些情况下，最好在本地拥有 WSDL），因此您只需使用该本地 WSDL 在 PHP 中初始化默认 SOAP 客户端，然后关闭您去。

# python - Python 3.3 - Unicode 对象必须在散列之前进行编码

> ID：13265439
> 
> 赞同：27
> 
> 时间：2012-11-07T07:59:42.160
> 
> 标签：python, python-3.x

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-07T08:02:18.697

只需调用您已经在`pw`and`salt`字符串上提到的方法：

```
pw_bytes = pw.encode('utf-8')
salt_bytes = salt.encode('utf-8')
return hashlib.sha256(pw_bytes + salt_bytes).hexdigest() + "," + salt 
```

# c# - WPF Listview 项目的第一个字符突出显示

> ID：13265442
> 
> 赞同：0
> 
> 时间：2012-11-07T07:59:45.497
> 
> 标签：c#, wpf

我有一个列表视图，它绑定了数据库中的客户数据。我想专注于他们的第一个角色。例如，当我从键盘单击“B”时，突出显示焦点必须转到名称第一个字符为“B”的客户。你有什么主意吗？我的列表视图的 XAML 如下。

```
<ListView x:Name="datalist" ButtonBase.Click="datalist_Click" ContextMenuOpening="datalist_ContextMenuOpening" MouseDoubleClick="datalist_MouseDoubleClick" SelectionChanged="datalist_SelectionChanged"
MouseUp="datalist_MouseUp" PreviewMouseUp="datalist_PreviewMouseUp" > 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:21:41.123

[您可以在此处](http://www.codeproject.com/Articles/409275/Highlight-Searched-Text-in-WPF-ListView)使用代码，而不是文本框 _TextChanged 事件，而是使用 Window_Keydown 事件来捕获按下的键。

而不是这个：

```
private void textboxsearch_TextChanged(object sender, TextChangedEventArgs e)
{
    FilterItems(listPerson, textBoxSearch.Text);
} 
```

用这个：

```
private void Window_KeyDown(object sender, System.Windows.Input.KeyEventArgs e)
{
    FilterItems(listPerson, e.Key.ToString());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:35:08.343

当 ListView 获得焦点时，您可以像这样将 Behavior 附加到 Listview：

（`System.Windows.Interactivity`需要引用）Xaml：

```
<ListView SelectionMode="Multiple">
            <ListViewItem>A Company 1</ListViewItem>
            <ListViewItem>A Company 2</ListViewItem>
            <ListViewItem>A Company 3</ListViewItem>
            <ListViewItem>B Company 1</ListViewItem>
            <ListViewItem>B Company 2</ListViewItem>
            <ListViewItem>C Company 1</ListViewItem>
            <ListViewItem>C Company 2</ListViewItem>
            <ListViewItem>C Company 3</ListViewItem>
            <ListViewItem>D Company 1</ListViewItem>
            <ListViewItem>D Company 2</ListViewItem>
            <ListViewItem>E Company 1</ListViewItem>
            <ListViewItem>F Company 1</ListViewItem>
            <i:Interaction.Behaviors>
                <ListBoxHighlighting:ListViewBehavior />
            </i:Interaction.Behaviors>
        </ListView> 
```

行为：

```
 public class ListViewBehavior : Behavior<ListView>
    {
        protected override void OnAttached()
        {
            AssociatedObject.KeyDown += OnKeyDown;
        }

        protected override void OnDetaching()
        {
            AssociatedObject.KeyDown -= OnKeyDown;
        }

        private void OnKeyDown(object sender, KeyEventArgs e)
        {
            var key = e.Key.ToString();

            AssociatedObject.SelectedItems.Clear();

            foreach (var item in AssociatedObject.Items)
            {
                var i = (item as ListViewItem).Content;
                if(i.ToString().StartsWith(key))
                {
                    AssociatedObject.SelectedItems.Add(item);
                }

            }
        }
    } 
```

# iphone - 在 View Xcode 中拖动 2 个图像

> ID：13265443
> 
> 赞同：0
> 
> 时间：2012-11-07T07:59:46.077
> 
> 标签：iphone, objective-c, ios, xcode, drag-and-drop

我在一个视图中有 2 个图像，我对图像应用了拖动触摸功能，当图像与视图顶部的图像发生碰撞时，它会向您发出警报并将视图顶部的图像更改为不同的图像图片。

我的问题是让我的 if else 语句起作用，如果我取出 == 图像

```
([touch view] == image) { 
```

只有一张图像拖动，我似乎无法同时拖动两张图像。我的 if else 语句没有错误，但似乎不起作用。

**frfViewController.h**

```
#import <UIKit/UIKit.h>

@interface frfViewController : UIViewController {
UIImageView *image;
UIImageView *image2;
UIImageView *images;
UIImageView *collisionImage;

}

@property (nonatomic, retain) IBOutlet UIImageView *image;
@property (nonatomic, retain) IBOutlet UIImageView *image2;
@property (nonatomic, retain) IBOutlet UIImageView *collisionImage;
@property (nonatomic, retain) IBOutlet UIImageView *images;
@end 
```

**frfViewController.m**

```
#import "frfViewController.h"

@interface frfViewController ()

@end

@implementation frfViewController

@synthesize image;
@synthesize image2;
@synthesize images;
@synthesize collisionImage;

- (void)viewDidLoad
{    
}

- (void)viewWillAppear:(BOOL)animated
{

//      [self.navigationController setNavigationBarHidden:YES animated:animated];
//      [super viewWillAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated
{
[self.navigationController setNavigationBarHidden:NO animated:animated];
[super viewWillDisappear:animated];
}

-(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
UITouch *touch = [[event allTouches] anyObject];
CGPoint location = [touch locationInView:self.view];

if ([touch view] == image) {

    image.center = location;
    image.userInteractionEnabled = YES;

}

else if ([touch view] == image2) {

    image2.center = location;
    image2.userInteractionEnabled = YES;

}

[self ifCollided];
}

-(void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
[self touchesBegan:touches withEvent:event];
}

-(void) ifCollided {
if (CGRectIntersectsRect(image.frame, collisionImage.frame) ||  CGRectIntersectsRect(image2.frame, collisionImage.frame)) {

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"image Collided"
                                                    message:@"FuckYea"
                                                   delegate:nil
                                          cancelButtonTitle:@"Reset!"
                                          otherButtonTitles:nil];
    [alert show];

    CGRect myImageRect = CGRectMake(0, 0, 320, 100);
    images = [[UIImageView alloc] initWithFrame:myImageRect];
    [images setImage:[UIImage imageNamed:@"004.jpg"]];
    [self.view addSubview:images];
 }

}

@end 
```

![在此处输入图像描述](../Images/03c206aa6f0bc173df5121b362cc5ffa.png)

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T08:10:23.440

从 iOS 4 起，您可以使用 UIPanGestureRecognizer 轻松进行拖动，

```
 UIPanGestureRecognizer *gesture = [[UIPanGestureRecognizer alloc]
                                       initWithTarget:self
                                       action:@selector(labelDragged:)];
 [yourview addGestureRecognizer:gesture]; 
```

将识别器添加到每个 UIView 并将选择器设置为指向您设置新坐标的位置 = 您可以限制它的位置，例如，如果您遇到碰撞...

```
- (void)labelDragged:(UIPanGestureRecognizer *)gesture
{
UILabel *label = (UILabel *)gesture.view;
CGPoint translation = [gesture translationInView:label];

// move label , limit it to stay inside self.view.frame
float newx = label.center.x + translation.x;
float newy = label.center.y + translation.y;

if (newx<0) { newx = 0; }
if (newy<0) { newy = 0; }

if (newx>self.view.frame.size.width) {
    newx = self.view.frame.size.width;
}

if (newy>self.view.frame.size.height) {
    newy = self.view.frame.size.height;
}

//possibly compute collision here and limit new coordinates further

label.center = CGPointMake(newx,newy);

// reset translation
[gesture setTranslation:CGPointZero inView:label];
} 
```

还可以查看[https://github.com/spoletto/SPUserResizableView](https://github.com/spoletto/SPUserResizableView)上的 draggable&resizable View 类，这也可以为您节省一些工作

# c# - 我的 DAL 应该返回 Person 还是 Datatable？

> ID：13265445
> 
> 赞同：3
> 
> 时间：2012-11-07T07:59:56.803
> 
> 标签：c#, .net, design-patterns, data-access-layer

*看完[这篇](https://stackoverflow.com/questions/836621/should-my-dal-return-datatables-or-i-whatever) ，我还有一个问题：*

我使用此代码查询数据库：

`c# :`

```
new BLL().GetPersonById(1) 
```

`BLL :`

```
public Person GetPersonById(int id)
{
  return new DAL ().GetPersonById(1);
} 
```

`DAL :`

```
public Person  GetPersonById(int id)
{
   // goto db and create instance of Person and fill its data...
} 
```

但是，我做错了吗，

我的 DAL 应该返回`DataTable` **吗**？（所以 BLL 将创建 Person ....？）

`DAL :`

```
public DataTable  GetPersonById(int id)
{
   // goto db ...
} 
```

谢谢你。

编辑 ：

Person 对象在**BE** dll（业务实体）中定义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T08:36:56.877

> "Should my DAL return DataTable instead ? ( so the BLL will create Person .... ?)"

Not at all. Ideally DAL is supposed to deal with database and should return entity/application objects to BAL. DAL works as a *abstraction for database* to BLL.

And I am agree with MikeSW as he said "BLL shouldn't depend on the DAL, at most it defines some interfaces which will be implemented in the DAL."

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T08:06:31.743

您的 DAL，确切地说是存储库，返回 Person，它是 BLL 中定义的业务对象。

BLL 不应该依赖于 DAL，最多它定义了一些将在 DAL 中实现的接口。但是，该应用程序向 DAL 请求存储的业务对象，因为它负责处理所有持久性。

And yes, the DAL depends on the BLL. THe DAL sohld return only aplication objects (business objects or view models), everything persistence access related should be hidden.

# php - php按位标志检测操作

> ID：13265448
> 
> 赞同：3
> 
> 时间：2012-11-07T08:00:21.303
> 
> 标签：php, bit-manipulation

// 嗨，我想用按位操作排除一个标志，但我不知道如何： // 这是标志（它们来自文件系统迭代器）

```
define('CURRENT_AS_FILEINFO', 0);
define('CURRENT_AS_SELF', 16);
define('CURRENT_AS_PATHNAME', 32);
define('CURRENT_MODE_MASK', 240);
define('KEY_AS_PATHNAME', 0);
define('KEY_AS_FILENAME', 256);
define('FOLLOW_SYMLINKS', 512);
define('KEY_MODE_MASK', 3840);
define('NEW_CURRENT_AND_KEY', 256);
define('SKIP_DOTS', 4096);
define('UNIX_PATHS', 8192); 
```

用户可以潜在地设置标志的任何组合。我需要检测是否设置了 CURRENT_AS_SELF 或 CURRENT_AS_PATHNAME，所以到目前为止，这是我的功能：

```
function containsPathnameOrSelfFlag($flags) {
    if ($flags & (CURRENT_AS_PATHNAME | CURRENT_AS_SELF)) {
        return true;
    }
    return false;
} 
```

这是一个测试套件：

```
var_dump(containsPathnameOrSelfFlag(CURRENT_MODE_MASK | CURRENT_AS_PATHNAME)); // true, ok
var_dump(containsPathnameOrSelfFlag(CURRENT_AS_FILEINFO)); // false, ok
var_dump(containsPathnameOrSelfFlag(CURRENT_MODE_MASK | CURRENT_AS_FILEINFO)); // true, but false was expected, because neither CURRENT_AS_SELF nor CURRENT_AS_SELF were set, so my function is wrong 
```

是否可以使用按位运算符使函数通过第三种情况（它应该返回 false）？

我在这里看到的问题是 CURRENT_MODE_MASK 的位与 CURRENT_AS_SELF 和 CURRENT_AS_PATHNAME 的位重叠：

```
0000000000010000 : CURRENT_AS_SELF 
0000000000100000 : CURRENT_AS_PATHNAME 
0000000011110000 : CURRENT_MODE_MASK 
0000000100000000 : KEY_AS_FILENAME
0000001000000000 : FOLLOW_SYMLINKS
0000111100000000 : KEY_MODE_MASK
0000000100000000 : NEW_CURRENT_AND_KEY
0001000000000000 : SKIP_DOTS
0010000000000000 : UNIX_PATHS 
```

因此，每次用户将 CURRENT_MODE_MASK 添加到标志时，我的函数都会认为 CURRENT_AS_SELF 和 CURRENT_AS_PATHNAME 也已设置，但事实并非如此。我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T08:09:01.553

掩码旨在与当前值进行与测试，而不是与新值进行生成。如果您想测试是否存在或仅使用单个标志，则仅使用该标志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T08:06:40.407

如果您不想`CURRENT_MODE_MASK`重叠`CURRENT_AS_SELF`并`CURRENT_AS_PATHNAME`确保它们不共享设置为 1 的公共位。`CURRENT_MODE_MASK`例如，您可以设置为 64 或 192 以适应当前值。

# android - SMS 电话号码验证的替代方法 - 全球

> ID：13265449
> 
> 赞同：1
> 
> 时间：2012-11-07T08:00:25.527
> 
> 标签：android, ios, sms

我一直在尝试找到一种方法来验证电话号码（Android 和 iPhone）而不使用 SMS 验证系统。原因纯粹是围绕成本。我想要一个免费的解决方案。

我可以安全地假设 Android 操作系统会为我提供用户的电话号码（无需验证），从而使其成为免费解决方案吗？iOS 怎么样？

感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T08:18:38.243

Android允许您获取电话号码。您的应用将需要`READ_PHONE_STATE`用户的许可。

然后很容易得到电话号码，如下所示：

```
TelephonyManager tMgr =(TelephonyManager)mAppContext.getSystemService(Context.TELEPHONY_SERVICE);
mPhoneNumber = tMgr.getLine1Number(); 
```

ios 不允许您获取用户的电话号码。他们认为这是一种安全风险。

一位尝试过此操作的开发人员收到了来自苹果的回复：

> “出于安全原因，iPhone OS 将应用程序（包括其首选项和数据）限制在文件系统中的唯一位置。这种限制是被称为应用程序“沙箱”的安全功能的一部分。沙箱是一组精细的-粒度控制限制应用程序对文件、首选项、网络资源、硬件等的访问。”
> 
> 设备的电话号码在您的应用程序容器中不可用。您需要修改您的应用程序，使其仅在您的目录容器中读取，并将您的二进制文件重新提交到 iTunes Connect，以便您的应用程序重新考虑在 App Store 中使用。

因此，您可能仍然需要使用 SMS 服务。祝你好运！

# ios - 对部分块的理解有问题

> ID：13265456
> 
> 赞同：1
> 
> 时间：2012-11-07T08:01:13.143
> 
> 标签：ios, objective-c-blocks, block

我正试图围绕块编程，目前陷入这个问题

```
char *myCharacters[3] = { "TomJohn", "George", "Charles Condomine" };
qsort_b(myCharacters, 3, sizeof(char *), ^(const void *l, const void *r) {
    char *left = *(char **)l;
    char *right = *(char **)r;
    return strncmp(left, right, 1); 
}); 
```

在第二行块参数`^(const void *l, const void *r)`，它从那里得到它的参数值。

来自 Apple[块编程主题](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/bxGettingStarted.html#//apple_ref/doc/uid/TP40007502-CH7-SW1)文档：

> **可可块**
> 
> Cocoa 框架中的一些方法将块作为参数，通常要么对对象集合执行操作，要么在操作完成后用作回调。下面的例子展示了如何使用带有 NSArray 方法 sortedArrayUsingComparator: 的块。该方法接受一个参数——块。**为了说明，在这种情况下，块被定义为 NSComparator 局部变量：**

“在这种情况下，块被定义为 NSComparator 局部变量”是什么意思？

这是提供的代码示例

```
NSArray *stringsArray = @[ @"string 1",
                         @"String 21",
                         @"string 12",
                         @"String 11",
                         @"String 02" ];
static NSStringCompareOptions comparisonOptions = NSCaseInsensitiveSearch |
                                                  NSNumericSearch |
                                                  NSWidthInsensitiveSearch |
                                                  NSForcedOrderingSearch;
NSLocale *currentLocale = [NSLocale currentLocale];
NSComparator finderSortBlock = ^(id string1, id string2) {
    NSRange string1Range = NSMakeRange(0, [string1 length]);
    return [string1 compare:string2 
                    options:comparisonOptions 
                      range:string1Range
                     locale:currentLocale];
};
NSArray *finderSortArray = [stringsArray sortedArrayUsingComparator:finderSortBlock];     
NSLog(@"finderSortArray: %@", finderSortArray); 
```

从哪里`^(id string1, id string2)`得到它的参数值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T08:35:17.937

`NSComparator`实际上是一个如下类型转换的块，与or`typedef NSComparisonResult (^NSComparator)(id obj1, id obj2);`相同。由于它是一个块，格式与参数略有不同。基本上是一个块，它接受两个参数并返回一个值来表示两个对象的顺序。它可以返回 ，或。这可以用于重复比较数组中的两个对象并根据它对其进行排序。这也有助于实现我们自己的排序实现。当排序发生时，该块被调用，并为该块提供值并执行该块。根据我们实施的比较，它从该块返回。`typedef double NSTimeInterval;``typedef long NSInteger;``NSComparator``obj1``obj2``NSComparisonResult``NSOrderedAscending``NSOrderedSame``NSOrderedDescending``sortedArrayUsingComparator``sortedArrayUsingComparator``obj1``obj2``NSComparator``NSComparisonResult`

# android - 延迟将图像下载到 gridView

> ID：13265457
> 
> 赞同：7
> 
> 时间：2012-11-07T08:01:16.320
> 
> 标签：android, json, gridview, lazy-loading

在我的应用程序中，我需要从 url 下载大量图片并将它们显示在 gridView 中。（可以在 1-200 张图片之间）。我不想一次下载所有图片。我阅读了关于延迟下载的内容，我的问题是：我可以只获取 Json 的一部分，在不同的线程中下载图片，**并且只有当用户向下滚动**gridView 时，我才会继续到 Json 的其他部分，并且很快？

编辑：再次嗨。我想在这个 gridView 中实现多选，我很难在适配器的 getView() 方法中实现代码。这是我正在使用的示例：[example](http://www.java2s.com/Code/Android/UI/ThisdemoillustratestheuseofCHOICEMODEMULTIPLEMODALakaselectionmodeonGridView.htm) . 如何在我的 getView() 方法中组合此代码：

```
public View getView(int position, View convertView, ViewGroup parent) {
        CheckableLayout l;
        ImageView i;

        if (convertView == null) {
            i = new ImageView(Grid3.this);
            i.setScaleType(ImageView.ScaleType.FIT_CENTER);
            i.setLayoutParams(new ViewGroup.LayoutParams(50, 50));
            l = new CheckableLayout(Grid3.this);
            l.setLayoutParams(new GridView.LayoutParams(GridView.LayoutParams.WRAP_CONTENT,
                    GridView.LayoutParams.WRAP_CONTENT));
            l.addView(i);
        } else {
            l = (CheckableLayout) convertView;
            i = (ImageView) l.getChildAt(0);
        }

        ResolveInfo info = mApps.get(position);
        i.setImageDrawable(info.activityInfo.loadIcon(getPackageManager()));

        return l;
    }

public class CheckableLayout extends FrameLayout implements Checkable {
    private boolean mChecked;

    public CheckableLayout(Context context) {
        super(context);
    }

    public void setChecked(boolean checked) {
        mChecked = checked;
        setBackgroundDrawable(checked ?
                getResources().getDrawable(R.drawable.blue)
                : null);
    }

    public boolean isChecked() {
        return mChecked;
    }

    public void toggle() {
        setChecked(!mChecked);
    }

} 
```

我的 getView() 代码：

```
public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    ViewHolder holder;
    View vi = convertView;

    if(convertView == null) {
        vi = inflater.inflate(com.egedsoft.instaprint.R.layout.item_clickable, null);
        holder = new ViewHolder();
        holder.imgPhoto = (ImageView)vi.findViewById(com.egedsoft.instaprint.R.id.imageClickable);
        vi.setTag(holder);

    } else {
        holder = (ViewHolder) vi.getTag();
    }

    if (!arrayUrls.get(position).getThumbnailUrl().isEmpty()){
        imageLoader.DisplayImage(arrayUrls.get(position).getThumbnailUrl(), holder.imgPhoto);
    }

    return vi;
} 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-07T08:29:53.323

这就是我在活动中获取多张照片的方式。您可以使用其中的一部分来适应您的逻辑。我用它从相册中获取 Facebook 图片。所以我的需求（我假设）与您的需求不同。但同样，逻辑可能对你有用。

**注意：**这会很长。;-)

这些是通过活动使用的全局声明：

```
// HOLD THE URL TO MAKE THE API CALL TO
private String URL;

// STORE THE PAGING URL
private String pagingURL;

// FLAG FOR CURRENT PAGE
int current_page = 1;

// BOOLEAN TO CHECK IF NEW FEEDS ARE LOADING
Boolean loadingMore = true;

Boolean stopLoadingData = false; 
```

这是获取初始图像集的代码块：

```
private class getPhotosData extends AsyncTask<Void, Void, Void> {

    @Override
    protected Void doInBackground(Void... arg0) {

        // CHANGE THE LOADING MORE STATUS TO PREVENT DUPLICATE CALLS FOR
        // MORE DATA WHILE LOADING A BATCH
        loadingMore = true;

        // SET THE INITIAL URL TO GET THE FIRST LOT OF ALBUMS
        URL = "https://graph.facebook.com/" + initialAlbumID
                + "/photos&access_token="
                + Utility.mFacebook.getAccessToken() + "?limit=10";

        try {

            HttpClient hc = new DefaultHttpClient();
            HttpGet get = new HttpGet(URL);
            HttpResponse rp = hc.execute(get);

            if (rp.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
                String queryAlbums = EntityUtils.toString(rp.getEntity());

                JSONObject JOTemp = new JSONObject(queryAlbums);

                JSONArray JAPhotos = JOTemp.getJSONArray("data");

                // IN MY CODE, I GET THE NEXT PAGE LINK HERE

                getPhotos photos;

                for (int i = 0; i < JAPhotos.length(); i++) {
                    JSONObject JOPhotos = JAPhotos.getJSONObject(i);
                    // Log.e("INDIVIDUAL ALBUMS", JOPhotos.toString());

                    if (JOPhotos.has("link")) {

                        photos = new getPhotos();

                        // GET THE ALBUM ID
                        if (JOPhotos.has("id")) {
                            photos.setPhotoID(JOPhotos.getString("id"));
                        } else {
                            photos.setPhotoID(null);
                        }

                        // GET THE ALBUM NAME
                        if (JOPhotos.has("name")) {
                            photos.setPhotoName(JOPhotos.getString("name"));
                        } else {
                            photos.setPhotoName(null);
                        }

                        // GET THE ALBUM COVER PHOTO
                        if (JOPhotos.has("picture")) {
                            photos.setPhotoPicture(JOPhotos
                                    .getString("picture"));
                        } else {
                            photos.setPhotoPicture(null);
                        }

                        // GET THE PHOTO'S SOURCE
                        if (JOPhotos.has("source")) {
                            photos.setPhotoSource(JOPhotos
                                    .getString("source"));
                        } else {
                            photos.setPhotoSource(null);
                        }

                        arrPhotos.add(photos);
                    }
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        }

        return null;
    }

    @Override
    protected void onPostExecute(Void result) {

        // SET THE ADAPTER TO THE GRIDVIEW
        gridOfPhotos.setAdapter(adapter);

        // CHANGE THE LOADING MORE STATUS
        loadingMore = false;
    }

} 
```

这是为了检测用户何时滚动到最后并获取新的图像集：

```
// ONSCROLLLISTENER
gridOfPhotos.setOnScrollListener(new OnScrollListener() {

    @Override
    public void onScrollStateChanged(AbsListView view, int scrollState) {

    }

    @Override
    public void onScroll(AbsListView view, int firstVisibleItem,
            int visibleItemCount, int totalItemCount) {
        int lastInScreen = firstVisibleItem + visibleItemCount;
        if ((lastInScreen == totalItemCount) && !(loadingMore)) {

            if (stopLoadingData == false) {
                // FETCH THE NEXT BATCH OF FEEDS
                new loadMorePhotos().execute();
            }

        }
    }
}); 
```

最后，这就是我获取下一组图像的方式：

```
private class loadMorePhotos extends AsyncTask<Void, Void, Void> {

    @Override
    protected Void doInBackground(Void... arg0) {

        // SET LOADING MORE "TRUE"
        loadingMore = true;

        // INCREMENT CURRENT PAGE
        current_page += 1;

        // Next page request
        URL = pagingURL;

        try {

            HttpClient hc = new DefaultHttpClient();
            HttpGet get = new HttpGet(URL);
            HttpResponse rp = hc.execute(get);

            if (rp.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
                String queryAlbums = EntityUtils.toString(rp.getEntity());
                // Log.e("PAGED RESULT", queryAlbums);

                JSONObject JOTemp = new JSONObject(queryAlbums);

                JSONArray JAPhotos = JOTemp.getJSONArray("data");

                // IN MY CODE, I GET THE NEXT PAGE LINK HERE

                getPhotos photos;

                for (int i = 0; i < JAPhotos.length(); i++) {
                    JSONObject JOPhotos = JAPhotos.getJSONObject(i);
                    // Log.e("INDIVIDUAL ALBUMS", JOPhotos.toString());

                    if (JOPhotos.has("link")) {

                        photos = new getPhotos();

                        // GET THE ALBUM ID
                        if (JOPhotos.has("id")) {
                            photos.setPhotoID(JOPhotos.getString("id"));
                        } else {
                            photos.setPhotoID(null);
                        }

                        // GET THE ALBUM NAME
                        if (JOPhotos.has("name")) {
                            photos.setPhotoName(JOPhotos.getString("name"));
                        } else {
                            photos.setPhotoName(null);
                        }

                        // GET THE ALBUM COVER PHOTO
                        if (JOPhotos.has("picture")) {
                            photos.setPhotoPicture(JOPhotos
                                    .getString("picture"));
                        } else {
                            photos.setPhotoPicture(null);
                        }

                        // GET THE ALBUM'S PHOTO COUNT
                        if (JOPhotos.has("source")) {
                            photos.setPhotoSource(JOPhotos
                                    .getString("source"));
                        } else {
                            photos.setPhotoSource(null);
                        }

                        arrPhotos.add(photos);
                    }
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        }

        return null;
    }

    @Override
    protected void onPostExecute(Void result) {

        // get listview current position - used to maintain scroll position
        int currentPosition = gridOfPhotos.getFirstVisiblePosition();

        // APPEND NEW DATA TO THE ARRAYLIST AND SET THE ADAPTER TO THE
        // LISTVIEW
        adapter = new PhotosAdapter(Photos.this, arrPhotos);
        gridOfPhotos.setAdapter(adapter);

        // Setting new scroll position
        gridOfPhotos.setSelection(currentPosition + 1);

        // SET LOADINGMORE "FALSE" AFTER ADDING NEW FEEDS TO THE EXISTING
        // LIST
        loadingMore = false;
    }

} 
```

这是从上述查询收集的帮助类`SET`和数据：`GET`

```
public class getPhotos {

    String PhotoID;

    String PhotoName;

    String PhotoPicture;

    String PhotoSource;

    // SET THE PHOTO ID
    public void setPhotoID(String PhotoID)  {
        this.PhotoID = PhotoID;
    }

    // GET THE PHOTO ID
    public String getPhotoID()  {
        return PhotoID;
    }

    // SET THE PHOTO NAME
    public void setPhotoName(String PhotoName)  {
        this.PhotoName = PhotoName;
    }

    // GET THE PHOTO NAME
    public String getPhotoName()    {
        return PhotoName;
    }

    // SET THE PHOTO PICTURE
    public void setPhotoPicture(String PhotoPicture)    {
        this.PhotoPicture = PhotoPicture;
    }

    // GET THE PHOTO PICTURE
    public String getPhotoPicture() {
        return PhotoPicture;
    }

    // SET THE PHOTO SOURCE
    public void setPhotoSource(String PhotoSource)  {
        this.PhotoSource = PhotoSource;
    }

    // GET THE PHOTO SOURCE
    public String getPhotoSource()  {
        return PhotoSource;
    }
} 
```

如果你也想要`adapter`代码，请告诉我。我在适配器中使用[Fedor 的](https://stackoverflow.com/users/95313/fedor) [延迟加载方法。](https://github.com/thest1/LazyList)

呸。希望这对您有所帮助。如果您还有其他问题，请随时提问。:-)

编辑：适配器代码添加：

```
public class PhotosAdapter extends BaseAdapter {

    private Activity activity;

    ArrayList<getPhotos> arrayPhotos;

    private static LayoutInflater inflater = null;
    ImageLoader imageLoader; 

    public PhotosAdapter(Activity a, ArrayList<getPhotos> arrPhotos) {

        activity = a;

        arrayPhotos = arrPhotos;

        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader = new ImageLoader(activity.getApplicationContext());
    }

    public int getCount() {
        return arrayPhotos.size();
    }

    public Object getItem(int position) {
        return arrayPhotos.get(position);
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(final int position, View convertView, ViewGroup parent) {

        ViewHolder holder;

        View vi = convertView;
        if(convertView == null) {
            vi = inflater.inflate(R.layout.photos_item, null);

            holder = new ViewHolder();

            holder.imgPhoto = (ImageView)vi.findViewById(R.id.grid_item_image);

            vi.setTag(holder);
          } else {
            holder = (ViewHolder) vi.getTag();
        }

        if (arrayPhotos.get(position).getPhotoPicture() != null){
            imageLoader.DisplayImage(arrayPhotos.get(position).getPhotoPicture(), holder.imgPhoto);
        }
        return vi;
    }

    static class ViewHolder {
        ImageView imgPhoto;

    }
} 
```

编辑：添加了加载时显示进度的步骤：

将 ProgressBar 添加到您的 XML 中，您在其下方有 GridView。如果它引起任何问题，请使用重量。

```
<LinearLayout
    android:id="@+id/linlaProgressBar"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:orientation="horizontal" >

    <ProgressBar
        style="@style/Spinner"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="2dp" />
</LinearLayout> 
```

在您的 Java 中，将 声明`Linearlayout linlaProgressBar`为 Global 并将其转换为`onCreate()`并将其可见性设置为`linlaProgressBar.setVisibility(View.GONE);`

在`onPreExecute()`使用中是这样的：

```
@Override
protected void onPreExecute() {
    // SHOW THE BOTTOM PROGRESS BAR (SPINNER) WHILE LOADING MORE PHOTOS
    linlaProgressBar.setVisibility(View.VISIBLE);
} 
```

最后添加，这个在`onPostExecute()`

```
// HIDE THE BOTTOM PROGRESS BAR (SPINNER) AFTER LOADING MORE ALBUMS
linlaProgressBar.setVisibility(View.GONE); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T08:12:33.917

您可以查看 Android 文档中的[使用适配器视图](http://developer.android.com/guide/topics/ui/declaring-layout.html#AdapterViews)和[GridView](http://developer.android.com/guide/topics/ui/layout/gridview.html)。最重要的是适配器调用该方法`getView`只传递屏幕上显示的条目的位置，并在用户滚动时询问不同的位置。

`getView`最简单的方法是使用和[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)在适配器的方法上下载所需的图像。

有一个[例子](http://lucasr.org/2012/04/05/performance-tips-for-androids-listview/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T08:31:54.847

从经验来看，在合理消耗内存的同时实现平滑滚动（和整体响应能力）是很棘手的。

最好先寻找现有的解决方案，例如，从这里开始： [Lazy load of images in ListView](https://stackoverflow.com/questions/541966/how-do-i-do-a-lazy-load-of-images-in-listview/3068012#3068012)

我们最终得到了一个定制的专有解决方案。它是一个后台线程，将下载请求和下载并缓存在外部存储上，仅对仍然可见的图像进行排队。当新图像到达时，视图会收到通知并决定何时通知适配器进行更新。

它还节省了带宽，这在某些情况下很重要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-17T05:10:31.007

我发现**IceMAN 的**回答非常有用，但我也建议避免使用两个 AsyncTasks，你可以很容易地做到这一点。

您需要创建一个通用方法来获取所需数据，您可以在其中创建 if/else 条件（例如）：

```
 movies = fetchMovie.execute(sort).get();
        if (movies == null) {
            movieList = new ArrayList<>();
        } else if (addMovies) {
            movieList.addAll(movies);
        } else {
            movieList = movies;
        } 
```

**addMovies**是 onScroll 方法中的布尔值。在 AsyncTask 中，在查询 URL 中提供当前页面，瞧——你让你的代码更小了:)

# python - 奇怪的django文件上传错误

> ID：13265459
> 
> 赞同：1
> 
> 时间：2012-11-07T08:01:38.460
> 
> 标签：python, django, file-upload

虽然有很多主题，但我找不到正确的问题+答案，我的问题是：

我正在尝试编写文件上传。一旦我提交表格，就会出现这个错误：

```
MultiValueDictKeyError at /anzeige_save/
Key 'file' not found in <MultiValueDict: {}> 
```

这是我的模型：

```
class Anzeige(models.Model):
    titel = models.CharField(max_length=300)
    anzeige = models.CharField(max_length=1000)
    date = models.DateTimeField()
    datum = models.CharField(max_length=12)
    file = models.FileField(upload_to='/anzeige/D-d-M-Y/')
    def __unicode__(self):
        return self.titel 
```

这是我的观点：

```
if request.path == '/anzeige_save/':
    anzeige=Anzeige(titel=request.POST['titel'], anzeige=end_anzeige,date=datetime.datetime.now(), datum=request.POST['datum'],file=request.FILES['file'])
    anzeige.save()
    return HttpResponse("Anzeige saved successfully") 
```

这是我在前端的ajax：

```
var title = document.getElementById(title).value;
var body = document.getElementById(body).value;
var file = document.getElementById(name_file).value;
var datum = document.getElementById(datum).value;
if(title==" " || body==" " || title=="" || body=="" || datum=="" || datum==" " ){
alert("Please fill out all!");
}else{
    $.ajax({
    url: "/anzeige_save/",
    type: "POST",
    data: {anzeige:body,titel:title,file:file,datum:datum},
}).success(function(data){
    $(succ_message).text(data);
    $(succ_message).fadeIn(1000);
    $(succ_message).fadeOut(2000);
})
 } 
```

这是格式的文件：

```
...
<input type="file" id="name_file" name="name_file" size="40" maxlength="100000"><br />
... 
```

我在这里错过了什么吗？

我有带有文件字段的模型，并且我正在将其他字段（包括文件）保存到实例中。

感谢您的光临！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T08:08:01.483

确保您的表单是多部分的：

```
enctype="multipart/form-data" 
```

忘记这是您错误的常见原因。

**编辑：**无法通过 ajax* 上传文件。有几个选项：

1.  发布表格
2.  如果您不想刷新页面，请在 iframe 中发布表单
3.  * 不完全正确。您可以使用[FormData](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/FormData/Using_FormData_Objects)对象（旧浏览器不支持）

# python - 读写模式python

> ID：13265466
> 
> 赞同：14
> 
> 时间：2012-11-07T08:02:30.273
> 
> 标签：python

> **可能重复：**
> [python打开内置函数：模式a、a+、w、w+和r+之间的区别？](https://stackoverflow.com/questions/1466000/python-open-built-in-function-difference-between-modes-a-a-w-w-and-r)

```
try:
    f = open("file.txt", "r")
    try:
        string = f.read()
        line = f.readline()
        lines = f.readlines()
    finally:
        f.close()
except IOError:
    pass

try:
    f = open("file.txt", "w")
    try:
        f.write('blah') # Write a string to a file
        f.writelines(lines) # Write a sequence of strings to a file
    finally:
        f.close()
except IOError:
    pass 
```

你好，

这是我可以读写文件的模式，但我想打开文件一次并在 python 中执行读写操作

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-07T08:04:39.800

与任何其他编程语言一样，您可以在`r+`、`w+`和`a+`模式下打开文件。

*   `r+`打开读写（不截断，文件指针在开头）
*   `w+`打开写入（并因此截断文件）和读取
*   `a+`打开追加（不截断写入，仅在文件末尾，文件指针在文件末尾）和读取

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-07T08:05:09.323

从[文档](http://docs.python.org/3.3/tutorial/inputoutput.html#reading-and-writing-files)：

> `r+`: 打开文件进行读写

# oracle - 获取时间范围之间的差距

> ID：13265468
> 
> 赞同：2
> 
> 时间：2012-11-07T08:02:37.000
> 
> 标签：oracle, datetime, plsql, oracle11g

在`WORK_TIME`我的数据库表 ( `EMP_WORKS`) 的列中，我有如下记录。

```
WORK_TIME

19:03:00
20:00:00
21:02:00
21:54:00
23:04:00
00:02:00 
```

我想`view`使用这些数据创建一个数据库。因为它我需要`Gap`在这些时间之间得到如下。

```
WORK_TIME  GAP

19:03:00  -
20:00:00  00:57:00  (Gap between 19:03:00 and 20:00:00)
21:02:00  01:02:00  (Gap between 20:00:00 and 21:02:00)
21:54:00  00:52:00  (Gap between 21:02:00 and 21:54:00)
23:04:00  01:10:00  (Gap between 21:54:00 and 23:04:00)
00:02:00  00:58:00  (Gap between 23:04:00 and 00:02:00) 
```

我怎么能这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T08:15:54.153

首先，您需要在包含 DATE/TIME 字段的表中有一个主键。

[我已经在 SQL Fiddle 上](http://sqlfiddle.com/#!4/3ce7c/11)设置了这个演示.. 看看

我将两次之间的差距表示为小时数。您可以操纵该数字来表示分钟或天数，等等。

```
SELECT 
TO_CHAR(A.WORK_TIME,'HH24:MI:SS') WORK_FROM,
TO_CHAR(B.WORK_TIME,'HH24:MI:SS') WORK_TO,
ROUND(24*(B.WORK_TIME-A.WORK_TIME),2) GAP FROM 
  sample A,
  SAMPLE B
WHERE A.ID+1 = B.ID(+) 
```

如果您的主键值的差异大于 1（主键值之间的差距），那么您将需要像这样动态地偏移该值：

```
 SELECT 
TO_CHAR(A.WORK_TIME,'HH24:MI:SS') WORK_FROM,
TO_CHAR(B.WORK_TIME,'HH24:MI:SS') WORK_TO,
ROUND(24*(B.WORK_TIME-A.WORK_TIME),2) GAP FROM 
  sample A,
  SAMPLE B
WHERE  b.ID = (select min(C.ID) from sample c where c.id>A.ID) 
```

![SQL 小提琴截图](../Images/2e18bdd8f896f385e00620005bc00fb5.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T08:26:51.183

此查询将以小时为单位为您提供差异：

```
SELECT
  work_time,
  ( work_time - LAG(work_time) OVER (ORDER BY work_time) ) * 24 AS gap
FROM emp_works 
```

[SQL Fiddle](http://sqlfiddle.com/#!4/5796a/2)上的示例返回以下内容：

```
WORK_TIME                           GAP
November, 07 2012 19:03:00+0000     (null)
November, 07 2012 20:00:00+0000     0.95
November, 07 2012 21:02:00+0000     1.033333333333
November, 07 2012 21:54:00+0000     0.866666666667
November, 07 2012 23:04:00+0000     1.166666666667
November, 08 2012 00:02:00+0000     0.966666666667 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T08:40:22.643

根据问题中提供的您想要的结果，您希望查看时间间隔。而且我还假设该`WORK_TIME`列是`date`数据类型并且有一个日期部分（否则会有一个负的减法结果（`WORK_TIME`来自的前一个值`00.02.00`））。

```
SQL> create table Work_times(
  2    work_time
  3  ) as
  4  (
  5  select to_date('01.01.2012 19:03:00', 'dd.mm.yyyy hh24:mi:ss') from dual union all
  6  select to_date('01.01.2012 20:00:00', 'dd.mm.yyyy hh24:mi:ss') from dual union all
  7  select to_date('01.01.2012 21:02:00', 'dd.mm.yyyy hh24:mi:ss') from dual union all
  8  select to_date('01.01.2012 21:54:00', 'dd.mm.yyyy hh24:mi:ss') from dual union all
  9  select to_date('01.01.2012 23:04:00', 'dd.mm.yyyy hh24:mi:ss') from dual union all
 10  select to_date('02.01.2012 00:02:00', 'dd.mm.yyyy hh24:mi:ss') from dual
 11  )
 12  /

Table created

SQL> 
SQL> select to_char(t.work_time, 'hh24.mi.ss') work_time
  2         , (t.work_time -
  3            lag(t.work_time) over(order by WORK_TIME)) day(1) to second(0) Res
  4  from work_times t
  5  ;

WORK_TIME RES
--------- -------------------------------------------------------------------------------
19.03.00  
20.00.00  +0 00:57:00
21.02.00  +0 01:02:00
21.54.00  +0 00:52:00
23.04.00  +0 01:10:00
00.02.00  +0 00:58:00

6 rows selected 
```

# reporting-services - 通过其唯一名称访问 SSRS 字段

> ID：13265469
> 
> 赞同：0
> 
> 时间：2012-11-07T08:02:42.390
> 
> 标签：reporting-services

在 SSRS 中编写表达式时，该语法`Fields!<FieldName>.Value`用于读取数据集行中特定字段的值。

现在我注意到，当您将字段添加到数据集时，它不仅具有正常的字段名称，而且还具有与它相关联的唯一名称，形式为`[<Table>].[<FieldName>]`

我想使用其唯一名称而不是字段名称来读取字段的值。如何才能做到这一点？

对于那些感兴趣的人，我需要这个，因为我试图将数据集过滤器作为参数传递。第一个参数将包含要过滤的字段唯一名称，第二个参数将包含要在过滤器中匹配的字段值。虽然在我的情况下，数据集字段名称可以更改，但唯一名称不会，所以我必须使用这个唯一名称

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T11:48:20.107

您可以使用如下语法构造动态字段引用：

=Fields(Parameters!ParameterField.Value).Value

参考[http://msdn.microsoft.com/en-us/library/ms157328.aspx#Parameters](http://msdn.microsoft.com/en-us/library/ms157328.aspx#Parameters)

# asp.net-mvc-3 - 通过 ASP.NET Telerik Grid 中的自定义命令将列值传递给弹出窗口

> ID：13265470
> 
> 赞同：0
> 
> 时间：2012-11-07T08:02:51.443
> 
> 标签：asp.net-mvc-3, razor, telerik, telerik-grid, telerik-mvc

我的 index.cshtml 中有一个 Telerik 网格，我在我的网格中创建了一个自定义编辑命令。我希望每当我单击编辑时，我都想将每个列值传递给我创建的弹出窗口，并将这些值分配给弹出窗口内的文本框。

我的网格如下所示

```
@(Html.Telerik().Grid<POModel>().Name("PurchaseOrders")

     .DataKeys(keys => keys.Add(o => o.WorkOrderPaymentID))
    .Columns(columns =>
                {
                    columns.Bound(o => o.SuppliersInvoiceNumber).HeaderTemplate("<div>Invoice Number</div>") ;
                    columns.Bound(o => o.PONumber).HeaderTemplate("<div>PO Number</div>").ReadOnly().Width(215);
                    columns.Bound(o => o.VendorName).HeaderTemplate("<div>Vendor Name</div>").ReadOnly();

                    columns.Bound(o => o.AmountPaidToSupplier).HeaderTemplate("<div>Total PO Amount</div>").Format("{0:c}").ReadOnly();

                    columns.Command(commands => commands
                 .Custom("Edit")
                 .Text("Edit")
                 .SendState(false)
                 .DataRouteValues(route =>
                 {
                     route.Add(o => o.SuppliersInvoiceNumber).RouteKey("InvoiceNumber");
                     route.Add(o => o.PONumber).RouteKey("PONumber");
                     route.Add(o => o.VendorName).RouteKey("VendorName");
                     route.Add(o => o.AmountPaidToSupplier).RouteKey("AmountPaid");
                 })
                   .Ajax(true)

                 .Action("editPOList", "PurchaseOrder", new { invoiceID = Model.selectedInvoiceID }));

                })

       .DataBinding(dataBinding => dataBinding.Ajax().Select("getPOList", "PurchaseOrder", new { invoiceID = Model.selectedInvoiceID }))

    .Scrollable()
    .Editable(editing => editing.Enabled(true))

  .Sortable() ) 
```

如果我想将所有列值传递给弹出窗口，我的编辑网格操作应该是什么样子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T20:58:37.310

默认的 MVC 模型绑定器很可能会成功提取 Route 值，因此您可以将 POModel 参数添加到您的操作方法签名中。

```
public ActionResult editPOList(POModel model)
        {
            //...
        } 
```

# ios - 在 ios sdk 中创建 facebook 样式时间线

> ID：13265471
> 
> 赞同：1
> 
> 时间：2012-11-07T08:02:52.890
> 
> 标签：ios, facebook-timeline

我正在尝试在 facebook 网站中创建类似于 facebook 时间线的东西。我尝试搜索一些我找不到的示例。如果我想创建一个或现有的示例，任何人都可以指导我如何开始。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:17:14.620

不是一个答案，而是一个**指针**，如果你想[在这里](https://www.facebook.com/about/timeline)做这样的事情，那么它有点难，真的需要用心去做。首先，源代码只对*Mark Zuckerburg 有用*，所以你可以向他索取。如果他会否认，你应该继续，

*想一想，设计它，然后开始制作。*

你需要制作`UITableView`'s, `UIImageView`'s, extra `UILabel`'s 和`UIButton`'s 的无酒精鸡尾酒来装饰和测试，以及一个好看的设计，说是的，它的时间线。

完成上述操作后，您需要一些测试数据，`date`其中`descending`包含`NSSortDescriptor`. 使用您拥有的这些数据更新您的时间线。你必须检查你想要的数据类型，或者你已经包含了。根据您要显示的数据设置布局。

你会说，哇！我有自己的时间表。

# web-applications - 在 Web 应用程序编辑器中使用的修订控制

> ID：13265474
> 
> 赞同：1
> 
> 时间：2012-11-07T08:03:10.943
> 
> 标签：web-applications, version-control

我正在为网络应用程序创建一个基于网络的编辑器。当有人开发网络应用程序时，我正在探索自动保存的想法。与 Google Docs 类似，我希望开发人员能够恢复他们所做的任何事情。您推荐什么版本控制解决方案？我应该在开发人员停止输入后每五秒钟使用一次 GIT 并提交一次吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T08:16:01.280

我喜欢这个想法，但没有类似问题的经验。

但是，这个问题的第一个答案（标记为正确的答案）可能会给您一个提示：[Using a version control system as a data backend](https://stackoverflow.com/questions/2519252/using-a-version-control-system-as-a-data-backend)

# video - ffmpeg，视频转换

> ID：13265478
> 
> 赞同：1
> 
> 时间：2012-11-07T08:03:38.117
> 
> 标签：video, ffmpeg, file-conversion

我有2个视频。元数据文件：

```
Seems stream 0 codec frame rate differs from container frame rate: 2000.00 (2000/1) -> 30.00 (30/1)
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '89.mp4':
  Metadata:
    major_brand     : isom
    minor_version   : 0
    compatible_brands: mp41isom
    creation_time   : 2012-10-23 08:10:51
  Duration: 00:00:08.96, start: 0.000000, bitrate: 2017 kb/s
    Stream #0.0(eng): Video: h264 (Baseline), yuv420p, 640x480, 2006 kb/s, 28.53 fps, 30 tbr, 1k tbn, 2k tbc
    Metadata:
      creation_time   : 2012-10-23 08:10:51
    Stream #0.1(eng): Audio: aac, 48000 Hz, stereo, s16, 48 kb/s
    Metadata:
      creation_time   : 2012-10-23 08:10:51
At least one output file must be specified.
//--------------------------------------------------------------------------------------------------------------//
Seems stream 1 codec frame rate differs from container frame rate: 180000.00 (180000/1) -> 90000.00 (180000/2)
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '56_1.mp4':
  Metadata:
    major_brand     : 3gp4
    minor_version   : 0
    compatible_brands: isom3gp4
    creation_time   : 1946-11-02 07:14:31
  Duration: 00:00:05.23, start: 0.000000, bitrate: 239 kb/s
    Stream #0.0(eng): Audio: amrnb, 8000 Hz, 1 channels, flt, 5 kb/s
    Metadata:
      creation_time   : 1946-11-02 07:14:31
    Stream #0.1(eng): Video: h264 (Baseline), yuv420p, 480x320, 240 kb/s, PAR 65536:65536 DAR 3:2, 17.63 fps, 90k tbr, 90k tbn, 180k tbc
    Metadata:
      creation_time   : 1946-11-02 07:14:31
At least one output file must be specified. 
```

他们不在我的网站上播放。如何将它们带到表单中？

```
Seems stream 0 codec frame rate differs from container frame rate: 47.95 (5994/125) -> 23.98 (24000/1001)
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'oceans-clip.mp4':
  Metadata:
    major_brand     : isom
    minor_version   : 1
    compatible_brands: isomavc1
    creation_time   : 2010-05-18 04:24:00
  Duration: 00:00:46.54, start: 0.000000, bitrate: 3342 kb/s
    Stream #0.0(und): Video: h264 (Constrained Baseline), yuv420p, 640x264 [PAR 132:133 DAR 320:133], 3195 kb/s, PAR 127:128 DAR 635:264, 23.98 fps, 23.98 tbr, 24k tbn, 47.95 tbc
    Metadata:
      creation_time   : 2010-05-18 04:24:00
    Stream #0.1(und): Audio: aac, 44100 Hz, stereo, s16, 144 kb/s
    Metadata:
      creation_time   : 2010-05-18 04:24:01
At least one output file must be specified 
```

我将视频发送到 android 和 vinfone 设备，并且必须在您的网站上播放，但播放器不想播放。我看到的元数据文件开始了。后者属于在网站上正确复制的元数据文件。

# google-maps-api-3 - 谷歌地图 - 如何对齐 MarkerImage 以使左下角指向标记的纬度/经度

> ID：13265480
> 
> 赞同：2
> 
> 时间：2012-11-07T08:03:44.050
> 
> 标签：google-maps-api-3, google-maps-markers

给定w =图像的宽度和h =图像的高度，如何设置它以使url中指定的图像的左下角指向标记定义的纬度和经度？

```
...
'icon': new google.maps.MarkerImage(url,
  new google.maps.Size(w, h),
  new google.maps.Point(?, ?),
  new google.maps.Point(?, ?)
),
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T09:43:41.713

```
...
'icon': new google.maps.MarkerImage(url,
  new google.maps.Size(w, h),
  new google.maps.Point(0,0),
  new google.maps.Point(0,h)
),
... 
```

# c - 提取 coap 查询

> ID：13265485
> 
> 赞同：-1
> 
> 时间：2012-11-07T08:04:02.030
> 
> 标签：c, http, protocols, coap

我需要你的帮助来提取 coap 消息中的查询值。coap 消息看起来像

```
coap://[ff08:90:5001:0:0:0:0:1]:12345/c?a=4 
```

解码的数据包是`52 02 00 00 91 63 63 61 3d 34`. 这`63 61 3d 34`是查询部分`?a=4`。查询后有数据。我已将缓冲区指针指向 63(?)，现在我很惊讶地得到了 34(4) 的值。我如何去价值并提取它？

```
coap_h *hdr = (coap_h *)(buf);

buf = (uint8_t *)(hdr + 1);
len = buf[0] & 0xf;
buf += len + 1; 
```

buf 最初指向`52`，然后我将 buf 移动到选项字段`91`并检查长度，然后增加指向`63`(?) 的 buf。希望我这次很清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T17:31:38.003

我目前没有时间手动解析您的数据包，但您应该知道选项的工作方式在 CoAP-12 中发生了巨大变化。我已经实现了一些函数来编码和解析选项，您可能会发现它们很有用：

[https://github.com/darconeous/smcp/blob/master/src/smcp/coap.c](https://github.com/darconeous/smcp/blob/master/src/smcp/coap.c)

[https://github.com/darconeous/smcp/blob/master/src/smcp/coap.h](https://github.com/darconeous/smcp/blob/master/src/smcp/coap.h)

# regex - 从两个日期生成正则表达式时间戳范围

> ID：13265487
> 
> 赞同：1
> 
> 时间：2012-11-07T08:04:06.687
> 
> 标签：regex, shell, unix, timestamp

从不同格式的两个日期生成正则表达式时间范围（`YYYYMMDD`）的最佳方法是什么，比如说（`D.M.YYYY`）？例如，三个不同的案例：

```
input date 1 = "20.11.2012"  
input date 2 = "27.11.2012"  
Wanted result = "2012112[0-7]"

input date a = "31.12.2011"  
input date b = "6.1.2012"  
Wanted result = "20111231\\|2012010[1-6]"  

input date x = "28.1.2012"  
input date y = "4.2.2012"  
Wanted result = "2012012[8-9]\\|2012013[0-1]\\|2012020[1-4]" 
```

或者是否有比当前形式的“想要的结果”更好的正则表达式来获得相同的结果？在整个范围内一周就足够了，不需要超过 30 天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T09:28:16.883

鉴于您的范围很小（7 天），简单地生成所有日期要容易得多。

这是一个执行此操作的脚本：

```
#!/bin/bash
fromDate="$1"
toDate="$2"

# break the dates into array so that we can easily access the day, month and year
IFS='.' read -a fromDateParts <<< "$fromDate"
IFS='.' read -a toDateParts   <<< "$toDate"

# loop until the days, months and years match on both dates
while [[ "${toDateParts[0]}" -ne "${fromDateParts[0]}" || "${toDateParts[1]}" -ne "${fromDateParts[1]}" || "${toDateParts[2]}" -ne "${fromDateParts[2]}" ]]
do
    # add the date to the pattern
    printf -v date "%d%02d%02d" "${fromDateParts[2]}" "${fromDateParts[1]}" "${fromDateParts[0]}"
    pattern="$pattern|$date"

    ((fromDateParts[0]++))

    # reset days and increment month if days exceed 31
    if [[ "${fromDateParts[0]}" -gt 31 ]]
    then
        fromDateParts[0]=1
        ((fromDateParts[1]++))

        # reset month and increment year if months exceed 12
        if [[ "${fromDateParts[1]}" -gt 12 ]]
        then
            fromDateParts[1]=1
            ((fromDateParts[2]++))
        fi
    fi
done

# finally add the toDate to the pattern
printf -v date "%d%02d%02d" "${toDateParts[2]}" "${toDateParts[1]}" "${toDateParts[0]}"
pattern="$pattern|$date"

# print the pattern, removing the first pipe
echo "${pattern#?}" 
```

示例用法：

```
$ dateRange.sh 28.1.2012 4.2.2012
20120128|20120129|20120130|20120131|20120201|20120202|20120203|20120204

$ dateRange.sh 31.12.2011 6.1.2012
20111231|20120101|20120102|20120103|20120104|20120105|20120106

$ dateRange.sh 28.1.2012 4.2.2012
20120128|20120129|20120130|20120131|20120201|20120202|20120203|20120204 
```

# android - 弹出Android语音识别时如何在主要活动中收听KeyEvent

> ID：13265491
> 
> 赞同：1
> 
> 时间：2012-11-07T08:04:27.537
> 
> 标签：android, android-activity, voice-recognition, keyevent, speech

我使用活动来调用谷歌语音识别活动。我的问题是，当 Google Speech Reg Activity 已经弹出时，我们可以在主要活动中收听 keyevent 吗？

有任何想法吗？不过，我知道当 Google Activity 弹出时，主要活动将是 onPause。

这是我的安卓代码

```
public class TestSpeechReg extends Activity {
private TextView txtText;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Button startButton = new Button(this);
    startButton.setText("Start TestSpeechReg");
    startButton.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
             startSpeechReg(TestSpeechReg.this);
        }
    });

    txtText = new TextView(this);
    txtText.setText("###################");

    LinearLayout layout = new LinearLayout(this);
    layout.setOrientation(LinearLayout.VERTICAL);
    layout.addView(startButton);
    layout.addView(txtText);

    setContentView(layout);
}

// voice recognition
public static final int REQUESTCODE_SPEECHRECOGNITION = 0x1000;

private void startSpeechReg(Activity context) {
    Log.i("TestSpeechReg", "openSpeechRecognition");
    Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
    intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,
            RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
    context.startActivityForResult(intent, REQUESTCODE_SPEECHRECOGNITION);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    switch (requestCode) {
    case REQUESTCODE_SPEECHRECOGNITION: {
        if (resultCode == RESULT_OK && null != data) {
            ArrayList<String> text = data
                    .getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);
            txtText.setText(text.get(0));
        }
        break;
    }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:56:22.023

如果您想控制 UI（例如听按键），则通过[SpeechRecognizer](http://developer.android.com/reference/android/speech/SpeechRecognizer.html)类（需要 API 级别 8）与语音识别器进行交互，这不会启动新的活动。您当前的代码启动了一个新活动，即您的 UI 已停止（即，我认为不仅是`onPause`，而且还被调用）。`onStop`

# android - 使用 SherlockMapActivity 禁用 Eclipse 自动完成功能

> ID：13265492
> 
> 赞同：1
> 
> 时间：2012-11-07T08:04:28.737
> 
> 标签：android, actionbarsherlock, actionbarsherlock-map

我刚刚创建了一个`SherlockMapActivity`从 ActionBarSherlock 的 Maps 插件扩展而来的类。

不幸的是，只有在项目中的这个类中，Eclipse 的自动补全是不起作用的。它根本不显示任何内容，并在底部显示“没有可用的完成。”。

有什么想法可以解决这个问题吗？

戈登

# email - 可能会延迟在詹金斯发送电子邮件？

> ID：13265496
> 
> 赞同：0
> 
> 时间：2012-11-07T08:04:39.103
> 
> 标签：email, jenkins

由于白天的网络流量很高，我们的许多 Jenkins 构建必须在晚上和夜间运行。发送的电子邮件包含报告、损坏的构建通知等。但是，我不希望在晚上和晚上将电子邮件发送给开发人员。是否可以将所有电子邮件排队并在 8-17 个办公时间之间发送？因此，如果构建在夜间中断，则会在上午 8 点发送一封电子邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T08:38:42.390

不幸的是，据我所知，没有插件可以延迟电子邮件发送。但是，也许您可​​以尝试一下[email-ext 插件](https://wiki.jenkins-ci.org/display/JENKINS/Email-ext+plugin)的脚本功能。它允许您在模板中使用 JS 或 Groovy 脚本。在这样的脚本中，您可以编写一个“等待”上午 8 点发送电子邮件的循环。

但就我个人而言，我不喜欢这个想法，这并不是一个真正的好方法，而且它肯定会让构建的最终结果等到早上 8 点（只有在邮件有效发送后才能完成构建） . 这也将有一个缺点，即该作业将在 Jenkins 作业队列中占据一个位置，可能会阻塞另一个作业......

也许开发自己的插件（例如通过分叉 mail-ext 插件）会是一个更好的主意......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T08:46:09.040

让我传播我的想法。

我也不知道任何现有的功能可以通过 Jenkins 实现。插件可能是最好的方式（可能对其他人有益的是公开发布）。

我想到的另一种解决方案是，如果您处于可以控制电子邮件服务器的情况，这也可能是实现您的目标的地方。

至于 SMTP（基于您使用的服务器）可能有一个解决方案。此处提供的可能解决方案（仅在队列模式下发送邮件）可以帮助您：

[如何通过 SMTP 中继延迟邮件传递，可能是 sendmail](https://stackoverflow.com/questions/835743/how-can-i-delay-mail-delivery-through-an-smtp-relay-possibly-sendmail)

# azure - 将 Fiddler 与多个 Azure Web 角色一起使用

> ID：13265498
> 
> 赞同：3
> 
> 时间：2012-11-07T08:04:39.093
> 
> 标签：azure, fiddler

我已经开始研究一个 Windows Azure 解决方案，该解决方案托管多个通过 HTTP 相互通信的 Web 角色项目。

当我在 Visual Studio 中调试 (F5) 我的项目时，会在以下 IP 地址上启动两个 Web 角色：

*   127.0.0.1
*   127.0.0.2

当我运行 Fiddler 时，我使用内置的 ipv4.fiddler 钩子监听发送到 127.0.0.1 的流量。

如何收听发送到 127.0.0.2 的流量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T13:03:07.423

我建议根本不要使用 ipv4.fiddler。相反，请适当地配置您的 2 个 webroles。

我假设您的 Web 角色通过标准 HTTP 进行通信，并且我猜您正在使用标准的 .NET 方法进行通信。为什么不将这些机制配置为使用代理，在本例中为 fiddler 代理。默认情况下，这将是 127.0.0.1:8888 这意味着您将捕获两个角色之间的流量。

# javascript - 如何使用javascript / jquery仅显示具有特定类的li？

> ID：13265500
> 
> 赞同：2
> 
> 时间：2012-11-07T08:04:42.067
> 
> 标签：javascript, jquery, filter, switch-statement, each

我有几个 li 的：

```
<ul>
    <li class="one"></li>
    <li class="one"></li>
    <li class="two"></li>
</ul> 
```

我试图只显示那些有 class="one"

我试过类似的东西：

```
var li = $('li');

    li.each(function(index, data)
    {
        var liClass = li.attr('class');

        switch(liClass)
        {
        case 'one':
              console.log(data);
          break;
        default:
            console.log('no match');
          break;
        }
    }); 
```

在这种情况下`console.log(data);`应该返回：

```
<li class="one"></li>
<li class="one"></li> 
```

但它会全部返回

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T08:06:46.930

[您可以使用类选择器](http://api.jquery.com/class-selector/)通过 jQuery 获取具有给定类的所有元素：

```
$(".one") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T08:07:25.660

```
var li = $('li');

li.each(function(index, data) {
    if($(this).hasClass('one')) {
          console.log(data);
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T08:13:50.197

```
var li = $('li');
    li.each(function(index, data)
    {
var liClass = li.attr('class'); 
// You're selecting li which is the $('li'), and not element inside each(), use $(this) instead.
... 
```

您选择的是 li `$('li')`，而不是里面的元素`each()`，请`$(this)`改用

利用`var liClass = $(this).attr('class');`

这是一个[小提琴](http://jsfiddle.net/UtdaK/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T08:06:30.110

如果我理解这个问题，这应该很容易使用 jQuery 吗？

```
console.log($('li.one')) 
```

# ruby - 使用 therubyracer 在 Windows 机器上安装 ruby gem less-rails

> ID：13265504
> 
> 赞同：2
> 
> 时间：2012-11-07T08:05:12.530
> 
> 标签：ruby, windows-7, v8, therubyracer, less-rails

一段时间以来，我试图在我的 windows7 机器上安装 less-rails gem。

我已经设法使用这个二进制文件安装了所需的 therubyracer.gem： [https ://github.com/stereobooster/therubyracer/downloads](https://github.com/stereobooster/therubyracer/downloads)

我还下载了 v8.dll 并放入了我的 ruby​​/bin 目录。到目前为止一切正常，捆绑安装正在运行并且服务器启动没有任何问题。

但是，一旦我使用较少的文件请求页面，我就会收到以下错误消息

> 未定义的方法“in_javascript？” 对于 #"<"V8::Error: [object Object]>

我的 css.file 几乎是空的

```
/*
*= require 'custom_less/custom'
*= require 'jquery-ui-1.8.24.custom'
*/ 
```

custom.css.less 看起来像这样

```
@import "twitter/bootstrap/reset";
@import "twitter/bootstrap/variables";
@import "custom_less/variables";                 // Your own variable overrides.
@import "twitter/bootstrap/mixins";
@import "custom_less/mixins";                    // Your own mixin.
@import "twitter/bootstrap/scaffolding";
@import "twitter/bootstrap/grid";
@import "twitter/bootstrap/layouts";
//import of further bootstrap components
//but nothing else 
```

我正在使用带有 ruby​​ 1.9.3 的 rails 安装程序。

这样的问题描述不多。我发现的所有问题都是通过更新到至少 ruby​​ 1.9.2 来解决的。但不幸的是，这不是我的解决方案。有人有想法吗？

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-13T14:24:22.443

1.  下载此文件：[https ://github.com/hiranpeiris/therubyracer_for_windows/archive/master.zip](https://github.com/hiranpeiris/therubyracer_for_windows/archive/master.zip)
2.  将其解压缩到一个文件夹并 cd 到该文件夹​​。
3.  通过在该文件夹中安装 gem 文件`gem install therubyracer*`
4.  该文件夹有2个dll文件。将它们复制到您的 ruby​​/bin 文件夹。
5.  将此添加到您的 Gemfile：`gem 'therubyracer'
6.  `bundle install`

玩得开心。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T12:20:01.947

经过大量的研究和反复试验，目前似乎较少在 Windows 平台上工作。

所以我的解决方案是改用 bootstrap-sass-rails gem。这工作得很好。

# php - xp和练级系统PHP MYSQL

> ID：13265508
> 
> 赞同：3
> 
> 时间：2012-11-07T08:06:03.530
> 
> 标签：php, mysql

我查看了所有已提出的问题和答案，但我似乎找不到最适合我的答案。我试图做的是制作一个系统，当用户处于某个 xp 限制时，它会进入下一个级别。它显示在下一个 xp 之前需要多少 xp。

所以

```
lvl1 = 0 => lvl2 = 256 => lvl3 = 785 => lvl4 = 1656 => lvl5 = 2654 
```

我将如何去做，所以如果 xp 达到一定数量，请显示下一个级别需要多少 xp 的数量。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T08:15:36.233

你可以尝试这样的事情：

我们的数据库中有`users_xp`表，带有`user_xp_id`（主键 - 自动增量） `user_id`和`user_xp_amount`（默认值：0）字段。当我们想要更新用户 xp 数量时，我们应该这样做：

```
$mysqli = new mysqli('localhost', 'my_user', 'my_password', 'my_db');

function update_user_xp($user_id, $amount, $mysqli) {
    $mysqli->query("UPDATE users_xp 
                    SET user_xp_amount=user_xp_amount+" . $amount . " 
                    WHERE user_id='$user_id'");
}

// we call this function like:
update_user_xp(4, 10, $mysqli); // user_id: 4, update with 10 points 
```

当我们想要获取实际的用户 xp 数量时，我们可以从我们的 db 表中获取它

```
function get_user_xp($user_id, $mysqli) {
    $sql = $mysqli->query("SELECT user_xp_amount 
                           FROM users_xp 
                           WHERE user_id='$user_id'");
   $row = $sql->fetch_assoc();
   return $row['user_xp_amount'];

}

$xp = array('lvl1' => 0, 'lvl2' => 256, 'lvl3' => 785, 'lvl4' => 1656, 'lvl5' => 2654);

$my_xp = get_user_xp(4, $mysqli); // where 4 is my user id

for($i = 0; $i < count($xp); $i++) {
   if($my_xp == $xp[$i]) {
       echo 'I\'m on level ', ($i+1);
       break;
   }
   else {
       if(isset($xp[$i+1])) {
           if($my_xp > $xp[$i] && $my_xp <= $xp[$i + 1]) {
               echo 'My next level is ', ($i+2), ' and I need ', $xp[$i+1], ' more points for achieving it!';
               break;
            } else {
               echo 'My next level is ', ($i+1), ' and I need ', $xp[$i], ' more points for achieving it!';
               break;
            }
        }
    }
} 
```

**后期编辑：**

```
CREATE TABLE `my_db_name`.`users_xp` (
`user_xp_id` BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY ,
`user_id` BIGINT NOT NULL ,
`user_xp_amount` BIGINT NOT NULL DEFAULT '0'
) ENGINE = InnoDB; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T08:15:06.950

将您的点存储在数据库表中，而不是应用程序级逻辑中以提高灵活性。这是一个建议的架构：

表级别：`INT A_I P_K id, INT points, VARCHAR name`

表用户：（`INT A_I P_K id, VARCHAR user, VARCHAR password, INT points, INT level_id`基本字段）

现在，对于每个获得 XP 的用户操作，更新用户的积分。从`levels`表中获取所有这些行并使用用户的更新点检查它们以产生您需要的结果:) 在 SQL 查询中，请记住`ORDER by points DESC`这样您就可以在循环内轻松检查升级！如果有级别更新，只需更新用户`level_id`以匹配表中的`id`对应`levels`。你可以使用类似的东西`"SELECT levels.name FROM levels WHERE levels.id = $users_level_id"`来显示他所在关卡的名称。

我建议`function xpAction(...)`您在用户可以执行的所有与 XP 相关的操作中调用一个标准函数。因此，如果他添加了一个帖子并且您正在运行`function addPost($data)`，则只需在其中添加一行以`xpAction`使用正确的参数进行调用。

# groovy - 不可变类的可选参数

> ID：13265517
> 
> 赞同：1
> 
> 时间：2012-11-07T08:06:39.297
> 
> 标签：groovy

我不确定这是否是提出这个问题的正确论坛，但它指的是代码，所以我在这里问。

在“Groovy in action”一书的第 7.1.4 节（命名参数）中，作者说命名参数的使用“在创建具有一些可选参数的不可变类时经常出现”。

类的不变性与可选参数有什么关系？我认为这两个主题是完全正交的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T09:51:51.857

> 在创建具有一些可选参数的不可变类时经常出现

上面的句子有点模糊，因为没有“类参数”之类的东西，我只能假设它与方法/构造函数参数有关。

当我们谈论构造函数时，Groovy 的命名参数在涉及可选参数时是有意义的：

```
@groovy.transform.Immutable
class Person {

String firstName
String lastName
Integer age
}

def p = new Person(age: 42, lastName: 'Doe') 
```

上面的例子展示了如何创建一个不可变的`Person`实例。`firstName`不作为命名参数提供，它是可选的。实际上，使用命名参数可以在调用构造函数时指定任何参数组合，而无需实际为所有组合实现构造函数。

也有可能在实例/静态方法调用中使用命名参数，[如 Haki 先生的这篇博文所示](http://mrhaki.blogspot.co.at/2009/09/groovy-goodness-named-parameters-are.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T14:50:28.583

该声明的关键在于，如果您正在处理一个不可变类，则意味着您只有一次机会设置状态 - 在构造函数中。通常，您可以一次一个地通过设置器操作（可变）对象，以建立所需的状态。对于不可变的，如果没有像可选参数这样的工具，则必须为每个可能的实例化状态集创建一个 ctor。对于具有许多字段的类，这可能会变得混乱。

# php - 链接 filterByXXX 错误？

> ID：13265518
> 
> 赞同：1
> 
> 时间：2012-11-07T08:06:39.910
> 
> 标签：php, sql, propel

我有以下代码：

```
$somethingArray = array( 3, 4, 5 );

$myObjects = MyObjQuery::create()
  ->filterBySomething( $somethingArray )
  ->filterById( array( 'min' => $minMyObjID ) )
  ->orderByObjTimestamp('DESC')
  ->find(); 
```

根据 Propel 文档，应该会生成一个 SQL 命令，该命令最终会检查“某物”是否在 somethingArray 数组中，并且 id 是否 > $minMyObjID。但是，id 是 IN 而不是 >。

如果我改为执行以下操作：

```
$myObjects = MyObjQuery::create()
  ->filterBySomething( $somethingArray )
  ->where( 'id > ' . $minMyObjID )
  ->orderByObjTimestamp('DESC')
  ->find(); 
```

生成的 SQL 是我所期望的。这是一个 Propel 错误，还是我在涉及 filterByXXX 参数时误解了文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:45:17.970

我在 Propel 错误跟踪器上发现了一个问题：[https ://github.com/propelorm/Propel/issues/327](https://github.com/propelorm/Propel/issues/327)

这是一个官方错误。暂时没有补丁。

一种解决方法是使用 : 的第二个参数`filterById`：`comparison`

```
->filterById($minMyObjID, '>') 
```

这会导致您找到相同的工作，但以更*推进的方式*。

# c++ - 返回类型与基类不同的 C++ 覆盖函数

> ID：13265522
> 
> 赞同：1
> 
> 时间：2012-11-07T08:06:57.143
> 
> 标签：c++, inheritance, overriding

> **可能重复：**
> [在 C++ 中覆盖虚函数时可以更改返回类型吗？](https://stackoverflow.com/questions/4222279/it-is-possible-to-change-return-type-when-override-a-virtual-function-in-c)

我收到错误：

```
error: conflicting return type specified for âvirtual bool D::Show()
7: error: overriding âvirtual void A::Show()" 
```

当我编译我的代码时。代码是：

```
class A
{
       public:  
       virtual void Show()
       {
        std::cout<<"\n Class A Show\n";
       }
};

class B :  public A
{
    public:
    void Show(int i)
    {
            std::cout<<"\n Class B Show\n";
    }
};

class C
{
    public:
    virtual bool Show()=0;
};

class D :public C, public B
{
    public:
        bool Show(){
            std::cout<<"\n child Show\n";
            return true;}
};

int main()
{
    D d;
    d.Show();
    return 0;
} 
```

我想使用 C 类中的 Show() 函数。我的错误在哪里？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T08:08:17.313

您的编译器正在抱怨，因为这两个函数没有相同的返回类型：其中一个返回 a `void`，另一个返回 a `bool`。您的两个函数应该具有**相同的返回类型**。

你应该有

```
class A {
   public:  
   virtual bool Show() {
      std::cout<<"\n Class A Show\n";
      return true; // You then ignore this return value
   }
};

class B :  public A {
   public:
   bool Show(int i) {
      std::cout<<"\n Class B Show\n";
      return true; // You then ignore this return value
   }
}; 
```

如果你不能改变类`A`and `B`，你可以改变类`C`and`D`有一个`void Show()`方法而不是一个`bool Show()`方法。

如果你不能做任何这些事情，你可以使用[组合而不是继承](http://en.wikipedia.org/wiki/Composition_over_inheritance)`B`：在你的函数中有一个类型的成员`D`而不是从它继承：

```
class D : public C {
public:
    bool Show() {
        std::cout<<"\n child Show\n";
        return true;
    }
    void ShowB() {
        b.Show();
    }

private:
    B b;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T08:15:36.500

您需要添加一个中间人。就像是：

```
class C1 : public C{
public:
    virtual bool show(){ /* magic goes here */ }
};

class D: public C1, public B{
.... 
```

要调用 Show，您需要以下内容： `static_cast<C&>(c).Show();`

# html - 像块一样显示单元格，没有行跨度

> ID：13265526
> 
> 赞同：0
> 
> 时间：2012-11-07T08:07:22.887
> 
> 标签：html, css

[http://jsbin.com/uzojax/2/edit](http://jsbin.com/uzojax/2/edit)

以上是我的 jsbin，我必须在没有 rowspan 属性的块中显示单元格 8，并且不会干扰该单元格的 html 表结构，这将如何成为可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T08:16:56.213

您可以将单元格显示为块或内联块，如下所示：

[http://jsfiddle.net/dCgzh/1/](http://jsfiddle.net/dCgzh/1/)

您可以使用 position: relative，但它会将单元格相对于它在表格中的位置定位，这使得设置其位置和宽度有点困难，因为单元格不“知道”周围单元格的属性。

如果您使用 position: absolute （就像在小提琴中一样），那么定位是相对于主体，或者本身具有定位的容器元素。使用该方法，您可以将单元格定位在表格的左侧。在小提琴中，表格具有“位置：相对”。允许您将单元格放置在表格的左侧，并为其提供与表格相同的宽度 (100%)。

```
 .csstdred {
    display: block;
    /*display: inline-block;*/
    position: relative;
    width: 200px;
  } 
```

没有 CSS 等效于 rowspan，这是有道理的。表格用于表格数据。因此，表是页面结构的一个组成部分。因此，像 rowspan 这样的属性不能仅仅被视为样式，因此它们可以作为单独的 HTML 属性而不是 CSS 样式使用。

# python - 如何跳过在其文档字符串中包含某些文本的测试？

> ID：13265532
> 
> 赞同：2
> 
> 时间：2012-11-07T08:08:06.397
> 
> 标签：python, unit-testing, nose

我想在每个测试方法的文档字符串中存储提示，因此测试加载器可以根据这些提示包含或排除测试。像这样的东西：

```
def test_login_with_valid_credentials(self):
    '''#functional #security #nondestructive'''
    # code goes here 
```

然后测试加载器会发现所有包含子字符串 '#functional' 或其他内容的测试。

我试图避免为此目的使用装饰器，因为我认为使用文档字符串会更灵活。（也许我错了。）

作为新手，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T09:32:58.483

鼻子装饰器不`@attr`就是为了那个吗？[https://nose.readthedocs.org/en/latest/plugins/attrib.html](https://nose.readthedocs.org/en/latest/plugins/attrib.html)

```
from nose.plugins.attrib import attr

@attr(tags=['b','c'])
def test_bc():
    print 1

@attr(tags=['a','b'])
def test_ab():
    print 1

@attr(tags=['a'])
def test_a():
    print 1 
```

然后您可以选择一个或多个值来运行：

```
> nosetests -v -a tags=b  test.py         
test.test_bc ... ok
test.test_ab ... ok

----------------------------------------------------------------------
Ran 2 tests in 0.001s

> nosetests -v -a tags=b -a tags=a test.py
test.test_bc ... ok
test.test_ab ... ok
test.test_a ... ok

----------------------------------------------------------------------
Ran 3 tests in 0.002s 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T04:02:30.130

如果有人想知道，这是实际的语法：

```
@attr(functional=True, security=True, nondestructive=False) 
```

并因此调用测试：

```
/usr/local/bin/nosetests -v --exe -a functional -w test_directory 
```

# wpf - 无法更改 Wpf 工具包自动完成框的背景？

> ID：13265535
> 
> 赞同：0
> 
> 时间：2012-11-07T08:08:35.563
> 
> 标签：wpf

我应该如何更改 wpftoolkit 自动完成框的背景。？我尝试订阅 enabledchanged 事件并更改了控件的背景，该控件根本没有改变。任何人都可以帮忙。

```
<WpfToolkit:AutoCompleteBox x:Name="txtBxSearch" Background="White"  IsTextCompletionEnabled="True" MinimumPrefixLength="0" FilterMode="Contains"  Height="24"  Width="150" KeyDown="txtBxSearch_KeyDown"  >
        <WpfToolkit:AutoCompleteBox.TextBoxStyle>
            <Style TargetType="TextBox">
                <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
                <Setter Property="FocusManager.FocusedElement" Value="{Binding RelativeSource={RelativeSource Self}}"/>                        
                </Style>
        </WpfToolkit:AutoCompleteBox.TextBoxStyle>
    </WpfToolkit:AutoCompleteBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:11:46.200

您可以在 XAML 中执行此操作：

```
<toolkit:AutoCompleteBox
            ToolTip="Enter the path of an assembly."
            x:Name="tbAssembly" Height="27" Width="200"
            Populating="tbAssembly_Populating"                          
            >     
            <toolkit:AutoCompleteBox.Style>
                <Style TargetType="toolkit:AutoCompleteBox">
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding ElementName=tbAssembly, Path=IsEnabled}" Value="True">
                            <Setter Property="Background" Value="Yellow" />
                            <Setter Property="Foreground" Value="Red" />
                        </DataTrigger>
                        <DataTrigger Binding="{Binding ElementName=tbAssembly, Path=IsEnabled}" Value="False">
                            <Setter Property="Background" Value="Black" />
                            <Setter Property="Foreground" Value="Yellow" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </toolkit:AutoCompleteBox.Style>
        </toolkit:AutoCompleteBox> 
```

# iphone - iPhone Mobile safari：Susy 网格在较短的页面上缩放到高度而不是宽度

> ID：13265536
> 
> 赞同：0
> 
> 时间：2012-11-07T08:08:50.247
> 
> 标签：iphone, ios, ios-simulator, mobile-safari, susy-compass

我在让 iPhone 的 Mobile Safari 缩放按预期工作时遇到问题。我将 Susy 用于网格：

```
$total-columns  : 12;
$column-width   : 60px;
$gutter-width   : 32px;
$grid-padding   : $gutter-width/2;
$container-style: static; 
```

我正在使用这个视口元标记：

```
meta name="viewport" content="width=device-width" 
```

问题是某些页面在 iPhone 上没有完全按比例缩小。这似乎仅在页面的高度小于其宽度时才会发生。因此，页面不会看到页面的整个宽度，而是按比例缩小，直到它在高度方向上填满视口。“更长”的页面按预期缩小。

我不确定如何解决此问题。我用网格和元标记尝试了几种不同的方法，但无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T08:55:05.780

使用此元标记

```
<meta name = "viewport" content = "height=device-height, width = device-width,
    initial-scale = .1, user-scalable = yes"> 
```

根据需要给出初始比例。

# php - 我想获取表中给定推荐 id 的总用户数

> ID：13265537
> 
> 赞同：0
> 
> 时间：2012-11-07T08:08:57.427
> 
> 标签：php, mysql

嗨，我想获取表中给定推荐 id 的总用户数，我尝试过使用左连接，但我从 mysql 得到重复的结果。

```
i am attaching of screenshot of my table.
when user register we ask the sponser id which is actually the referral id 
of other user. 
```

[![包含推荐 ID 和赞助商 ID 的表](../Images/b1f43f45b33e95b39b1bfeb5eb0ad839.png)](https://i.stack.imgur.com/X4sdt.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T08:23:53.887

我不明白你为什么需要ajax。`collage.php`返回有效图像，因此您可以使用用于 ajax 调用的链接作为`img`标签`src`URL。只需通过查询字符串传递您可能需要的任何变量。

例子：

```
var queryString = $('#' + form).serialize();
$('#image').html('<img src="collage.php?' + queryString  + '"/>'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T08:17:31.880

将 JS 更改为：

```
function post(form)
 { loading(1); 
   $.ajax({ type: 'POST',
            dataType: 'image/jpeg',
            url: 'collage.php',
            data: $('#'+form).serialize(), 
            success: function(data) 
      { $('#image').html('<img src="data:'+base64_encode(data)+'"') }
           });
   return false; } 
```

有关在 JS 中实现的信息，请参阅[此问题。](https://stackoverflow.com/questions/2820249/how-do-i-base64-encode-and-decode-using-javascript?lq=1)`base64_encode`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T08:16:35.533

在php手册中，描述函数imagejpeg(resource $image [, string $filename [, int $quality ]])

```
imagejpeg() creates a JPEG file from the given image 
```

图像资源，由图像创建函数之一返回，例如

```
imagecreatetruecolor() 
```

或者

```
resource imagecreatefromjpeg ( string $filename ) 
```

然后您可以使用 imagejpeg 输出图像

# jquery - inlineNav 编辑按钮不适用于多选 jqGrid

> ID：13265541
> 
> 赞同：1
> 
> 时间：2012-11-07T08:09:22.090
> 
> 标签：jquery, jqgrid

我有多选内联可编辑 jqGrid 和`inlineNav`. 以下步骤是创建问题：

1.  单击添加按钮，空记录显示在网格中。添加数据并保存。
2.  使用复选框选择该记录。
3.  按 1 步在网格中添加一条记录，但单击取消按钮而不是保存它。
4.  最近的记录消失了，点击编辑按钮，因为我已经选择了一条记录。
5.  所选记录未进入编辑模式，它给出警告消息“选择行”。
6.  如果我取消选择并再次选择并单击编辑按钮，那么它将以编辑模式出现。

你能告诉我任何解决方案吗？

```
var i = 1;
var lastSelection = 0;
$(function () {
    $("#curruntppeGridgrid").jqGrid({
        url: 'getcostperformancecurreuntPPE',
        datatype: "json",
        jsonReader: { "repeatitems": false, unformat: Unformat_Select },
        colNames: ['Category', 'Manufacturer', 'Style', 'UOM', 'Count', 'Unit', 'Qty', 'Cost', 'Sizes', 'Annual Cost', 'VP2'],
        colModel: [
            {
                name: 'category', index: 'category', align: 'center', editable: true, hidden: false, edittype: 'select',
                editoptions: {
                    multiple: false, value: catList,
                    dataEvents: [{
                        type: 'change',
                        fn: function (e) {
                            loadStyle(e);
                        }
                    }]
                },
                editrules: { required: false, custom: true, custom_func: categorycheck }
            },
            {
                name: 'manufacturer', index: 'manufacturer', align: 'center', editable: true, hidden: false, edittype: 'select',
                editoptions: {
                    value: manufList,
                    dataEvents: [{
                        type: 'change',
                        fn: function (e) {
                            loadStyle(e);
                        }
                    }]
                },
                editrules: { required: false }
            },
            {
                name: 'style', index: 'style', align: 'center', editable: true, hidden: false, edittype: 'select',
                editoptions: {
                    multiple: false, value: styleList,
                    dataInit: function (elem) {
                        var v = $(elem).val();
                        if (v != '') {
                            var data = loadSizes(elem);
                            jQuery('#curruntppeGridgrid').setColProp('sizes', { editoptions: { multiple: true, value: data } });
                            var data1 = loadUom(elem);
                            jQuery('#curruntppeGridgrid').setColProp('uom', { editoptions: { value: data1 } });
                        }
                        else {
                            jQuery('#curruntppeGridgrid').setColProp('sizes', { editoptions: { multiple: true, value: {} } });
                            jQuery('#curruntppeGridgrid').setColProp('uom', { editoptions: { value: {} } });
                        }
                    },
                    dataEvents: [{
                        type: 'change',
                        fn: function (e) {
                            loadCategoryAndManufacturer(e);
                        }
                    }]

                },
                editrules: { required: true }
            },
            {
                name: 'uom', index: 'uom', align: 'center', editable: true, hidden: false, edittype: 'select',
                editoptions: {
                    multiple: false, value: uomfList,
                    dataEvents: [{
                        type: 'change',
                        fn: function (e) {
                            setHiddenUom(e);
                        }
                    }]
                },
                editrules: { required: false }
            },
            {
                name: 'averagelifetime', index: 'averagelifetime', editable: true, align: 'center', sortable: false, editrules: { number: true, maxValue: 9999999.99 },
                editoptions: {
                    class: 'validate[custom[number]]',
                    dataEvents: [{
                        type: 'click',
                        fn: function (e) {
                            $('#formQuickSurvey').validationEngine({ promptPosition: 'bottomLeft', validationEventTrigger: 'keyup' });
                        }
                    },
                                {
                                    type: 'change',
                                    fn: function (e) {
                                        setQty(e);
                                    }
                                }
                    ]
                }
            },
            {
                name: 'averagelifetimeselect', index: 'averagelifetimeselect', editable: true, align: 'center', edittype: 'select',
                editoptions: {
                    multiple: false, value: avglifetimelist,
                    dataInit: function (elem) {
                        var v = $(elem).val();
                        if (v != '') {
                            jQuery('#curruntppeGridgrid').setColProp('averagelifetimeselectId', { editoptions: { defaultValue: v } });
                        }
                    },
                    dataEvents: [{
                        type: 'change',
                        fn: function (e) {
                            setHiddenaveragelifetimeselect(e);
                            setQty(e);
                        }
                    }]
                },
                editrules: { required: false }
            },
            {
                name: 'qty', index: 'qty', align: 'center', editable: true, editrules: { integer: true, maxValue: 2147483647 },
                editoptions: {
                    class: 'validate[custom[numbersOnly]]',
                    dataEvents: [{
                        type: 'change',
                        fn: function (e) {
                            calculateannualCost(e);
                        }
                    }, {
                        type: 'click',
                        fn: function (e) {
                            $('#formQuickSurvey').validationEngine({ promptPosition: 'bottomLeft', validationEventTrigger: 'keyup' });
                        }
                    }]
                }
            },
            {
                name: 'cost', index: 'cost', align: 'center', editable: true, editrules: { number: true, maxValue: 9999999.99 },
                editoptions: {
                    class: 'validate[custom[number]]',
                    dataEvents: [{
                        type: 'change',
                        fn: function (e) {
                            calculateannualCost(e);
                        }
                    }, {
                        type: 'click',
                        fn: function (e) {
                            $('#formQuickSurvey').validationEngine({ promptPosition: 'bottomLeft', validationEventTrigger: 'keyup' });
                        }
                    }]
                }
            },
            {
                name: 'sizes', index: 'sizes', align: 'center', edittype: 'select', classes: 'seteventclickoncurrent', editable: true, editoptions: {
                    multiple: true, value: {},
                    dataInit: function (elem) {
                        var v = $(elem).val();
                        if (v != '') {
                            jQuery('#curruntppeGridgrid').setColProp('sizesId', { editoptions: { defaultValue: v } });
                        }
                    },
                    dataEvents: [{
                        type: 'change',
                        fn: function (e) {
                            setHiddensizes(e);
                        }
                    }]
                },
                editrules: { required: false, custom: true, custom_func: checkCurrentSize }
            },
            { name: 'annualCost', index: 'annualCost', align: 'center', editable: true, editoptions: { readonly: 'readonly' } },
            {
                name: 'vp2', index: 'vp2', align: 'center', editable: true, hidden: false, edittype: 'select',
                editoptions: {
                    multiple: false, value: vp2fList,
                    dataInit: function (elem) {
                        var v = $(elem).val();
                        if (v != '') {
                            jQuery('#curruntppeGridgrid').setColProp('vp2Id', { editoptions: { defaultValue: v } });
                        }
                    },
                    dataEvents: [{
                        type: 'change',
                        fn: function (e) {
                            setHiddenvp2(e);
                            validateCategoryandVP2(e);
                        }
                    }]
                },
                editrules: { required: false }
            }
        ],
        cmTemplate: { sortable: false },
        width: eval('gridWidth()'),
        pgbuttons: false,
        pginput: false,
        viewrecords: false,
        //pager: '#curruntppeGridpager',
        toppager: true,
        multiselect: true,
        editurl: 'editsurveyppe',
        caption: 'Current PPE',
        //forceFit:true,
        hiddengrid: true,
        hidegrid: true,
        headertitles: true,
        postData: {
            appId: function () { return $('#selectApplication option:selected').val(); }
        },
        loadComplete: function () {
            $('#del_curruntppeGridgrid_top').removeClass('ui-state-disabled');//this is added to enable delete button after record reload
            if (jQuery('#curruntppeGridgrid').jqGrid('getGridParam', 'gridstate') != 'visible') {
                $("#curruntppeGridgrid_toppager").hide();
            }
            else {
                $("#curruntppeGridgrid_toppager").show();
            }
        },
        afterInsertRow: function () {//this is added to disable delete button while adding record
            $('#del_curruntppeGridgrid_top').addClass('ui-state-disabled');

        }, ajaxSelectOptions: { cache: false }
    });

    jQuery("#curruntppeGridgrid").jqGrid('navGrid', "#curruntppeGridpager",
        { cloneToTop: true, position: 'right', edit: false, add: false, del: true, search: false, refresh: false, pgbuttons: false },
        {}, {}, {
            mtype: 'POST', reloadAfterSubmit: true,
            serializeDelData: function (postdata) {
                var row = jQuery('#curruntppeGridgrid').getRowData(postdata.id);
                // append postdata with extra information
                return { id: postdata.id, oper: postdata.oper, gridId: 'current' };
            }
        }, {});

    //top toolbar
    jQuery("#curruntppeGridgrid").jqGrid('inlineNav', '#curruntppeGridgrid_toppager', {
        position: 'right',
        editParams: {
            aftersavefunc: function () {
                $("#curruntppeGridgrid").jqGrid().trigger("reloadGrid");
                $('#del_curruntppeGridgrid_top').removeClass('ui-state-disabled');//this is added to enable delete button after saveing record
            }, oneditfunc: function () {
                $('#del_curruntppeGridgrid_top').addClass('ui-state-disabled');//this is added to disable delete button while editing record
            }, afterrestorefunc: function () {
                $('#del_curruntppeGridgrid_top').removeClass('ui-state-disabled');//this is added to enable delete button while cancelling record
            }, extraparam: {
                currentApplicationId: function () { return $("#selectApplication option:selected").val(); }
            }
        },
        "restoreAfterSelect": false
    });

    jQuery('#curruntppeGridgrid').jqGrid('setGroupHeaders', {
        useColSpanStyle: true,
        groupHeaders: [{
            startColumnName: 'averagelifetime',
            numberOfColumns: 2,
            titleText: '<em>Average Lifetime</em>'
        }]
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:49:26.047

我认为这是 jqGrid 中的一个错误。[我在以下错误报告](http://www.trirand.com/blog/?page_id=393/bugs/setting-selrow-to-null-inside-of-delrowdata-in-case-multiselecttrue-and-selarrrow-length-0/#p27675)中发布了如何解决问题的建议。我建议修改代码[行](https://github.com/tonytomov/jqGrid/blob/v4.4.1/js/grid.base.js#L2834)`delRowData`

```
if(rowid == $t.p.selrow) {$t.p.selrow=null;} 
```

到下面的代码

```
if(rowid == $t.p.selrow) {
    if ($t.p.multiselect && $t.p.selarrrow.length > 0) {
        $t.p.selrow = $t.p.selarrrow[$t.p.selarrrow.length-1];
    } else {
        $t.p.selrow = null;
    }
} 
```

`jquery.jqGrid.src.js` [您可以在此处](http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.4.1/js/jquery.jqGrid.src-addUniqueRowid.js)找到修改后的版本。该代码包括对`addRow`. 我在发布到 trirand[的下一个错误报告](http://www.trirand.com/blog/?page_id=393/bugs/duplicate-rowid-produced-by-addrow/#p27676)中描述了改进。

**更新**：该错误已在 jqGrid 的主要代码中修复（参见[此处），可以在](https://github.com/tonytomov/jqGrid/commit/dd452fa490bcf6437955b63b1188b4d15f2cb828)[github](https://github.com/tonytomov/jqGrid)上找到。所以修复将在 jqGrid 的下一个（更高为 4.4.1）版本中。

# git - Git 将所有父提交推送到远程（即重写远程历史记录）

> ID：13265543
> 
> 赞同：1
> 
> 时间：2012-11-07T08:09:35.707
> 
> 标签：git, git-filter-branch

一点上下文：我最近使用 cvsimport 从 CVS 迁移到 Git。现在有一个由 gitolite 管理的通用（裸）存储库，人们在其中推送他们的本地更改。然后我发现旧 CVS 历史中的许多标签都没有完美导入。我可以通过使用 cvs2git（本地）从 CVS 重新迁移来解决这个问题，并将我的第一个 repo 的分支头嫁接到 cvs2git 给出的新树上（仍然是本地）。我现在有一个完整的树，其历史比以前更好，其中所有分支的头部都具有与远程当前相同的哈希（我使用了嫁接和过滤器分支，如以下答案所示：[https://stackoverflow .com/a/2428339/1005470](https://stackoverflow.com/a/2428339/1005470) )

我现在想做的是将这些更改推送到遥控器。当然，`git push`返回一切都是最新的：我不知道**如何推送重写的历史**。因为 refs 匹配，所以`git push -f`也会返回所有内容都是最新的。

此外，我当然希望其他开发人员几乎不会注意到某些事情发生了变化。他们下次拉动时应该只会看到更新的历史记录（如果他们必须重新克隆，我也可以）。我假设他们没有基于分支负责人之前的提交进行任何工作（我知道否则会一团糟）。

`git rev-list HEAD`编辑：澄清一下，这是两个存储库的输出（摘录） 。粗体的提交是我进行移植的地方。我想用我在本地存储库中的内容覆盖远程中低于该点的所有内容。

> *Local repo* :
> **fff881c238fff8b0057be8dab494ec5a6aa181d9**
> ac513b5596cca48dd885a969fdcc4a2b49e507d0
> 1b199d8e4ac29e4bd39ff96059031cf9b1390609
> 427837c98a14f28bc2e5d91fcf89e954b3bb3e77
> 0d9e58cc4f6a0107c718c689e24353d4ce59ab8c
> ....
> 
> *Remote repo* :
> 6ad634da6e5acda43e6cf0919e8f4994c08ac862
> bd32b7c9b0ae4faea51720b98586f89972b52e58
> 3778ce4ff85f269e2287d57c7aec3ecefabc135a
> d3c343f3498d1d82b680be2ffc2c5e05c14a3d4c
> a5d200b99f31a005cc8312d0a23a79d4014a2156
> 8b90afbbb06bea062d26b520c42c068ef96e5db7
> **fff881c238fff8b0057be8dab494ec5a6aa181d9**
> 19cf091efb12413027941ac893ea8d503fea415e
> efbed577d5986beef45ba0f9a2560f4b1ca120fc
> bbec686e3389abe0679672a3d71c236b98ffc111
> 5b56665e48b3af51a25d0c9d2342d04e730aaa16
> 2ce095b0ed92f22baf74e728bda07bfded5a4e7b
> ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:54:45.013

看起来您的本地分支未设置为跟踪远程分支。

您将需要在您的分支中设置远程跟踪（检查命令的`--set-upstream`选项`branch`），然后做一个bare `git push`; 或单独推送每个分支，在 push 命令中指定分支名称：`git push --set-upstream <remote> <remote-branch-name>`对于每个分支，同时签出该分支。

我希望这有帮助。

# spring - 在注解注入中使用 ReloadableResourceBundleMessageSource

> ID：13265545
> 
> 赞同：4
> 
> 时间：2012-11-07T08:09:48.137
> 
> 标签：spring, servlets, annotations, code-injection

我`ReloadableResourceBundleMessageSource`在我的 web 项目中使用，我将类注入到 servlet，问题是我想使用 Spring 注释注入类，但它似乎不起作用？我的代码是：

**我的.xml**

```
<bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
    <property name="basenames">
        <list>
            <value>classpath:myList</value>
        </list>
    </property>
    <property name="cacheSeconds" value="1"/>
</bean> 
```

**myServletClass.java**

```
protected void doGet(HttpServletRequest req, HttpServletResponse resp)
        throws ServletException, IOException {

ApplicationContext applicationContext = new ClassPathXmlApplicationContext("my.xml");
String message = applicationContext.getMessage(message, null, "Default 
", null);

} 
```

如何注入`ReloadableResourceBundleMessageSource`using 注释？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-07T11:40:37.847

**将 bean 更改为按名称自动装配**

```
<bean id="messageSource"
class="org.springframework.context.support.ReloadableResourceBundleMessageSource"
    autowire="byName">

   <property name="basenames">
     <list>
       <value>classpath:myList</value>
     </list>
    </property>
    <property name="cacheSeconds" value="1"/>
</bean> 
```

**在 Servlet 中自动装配消息源**

```
public Class MyServlet extends HttpServlet{

  @Autowired
  MessageSource messageSource;

  protected void doGet(HttpServletRequest req, HttpServletResponse resp) 
       throws ServletException, IOException{
    String message = messageSource.getMessage("test.prop", null, "Default",null);
  }
} 
```

**目录结构**

![在此处输入图像描述](../Images/5a41a0e113d38ee4efcbda7793a3f3ed.png)

**src/main/resources/myList.properties**

```
test.prop=Hope this helps. 
```

如果您不使用 Spring MVC，则可能需要在启动应用程序时创建 Spring 应用程序上下文。这可以使用 ContextLoaderListener 在您的 Web.xml 文件中进行配置。

**Web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

    <!-- The definition of the Root Spring Container shared by all Servlets and Filters -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/root-context.xml</param-value>
    </context-param>

    <!-- Creates the Spring Container shared by all Servlets and Filters -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

</web-app> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-08T05:40:37.327

以下是我当前的公司项目 xml：

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:mvc="http://www.springframework.org/schema/mvc" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="
http://www.springframework.org/schema/beans     
http://www.springframework.org/schema/beans/spring-beans-4.0.xsd
http://www.springframework.org/schema/mvc 
http://www.springframework.org/schema/mvc/spring-mvc-4.0.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-4.0.xsd">
<context:component-scan base-package="net.xyz.controller" />
<bean id="ViewResolver"

class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="/WEB-INF/views/" />
    <property name="suffix" value=".jsp" />
</bean>
<bean id="multipartResolver"

class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
</bean>
<mvc:resources location="/assets/" mapping="/assets/**" />

<mvc:resources mapping="/resources/**" location="/resources/" />

<bean id="messageSource" class= 
"org.springframework.context.support.ReloadableResourceBundleMessageSource">
    <property name="basename" value="classpath:messages" />
    <property name="defaultEncoding" value="UTF-8" />
</bean>

<mvc:interceptors>
    <mvc:interceptor>
        <mvc:mapping path="/*/*" />
        <bean class="net.xyz.controller.InterceptorController" />
    </mvc:interceptor>
    <bean class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor">
        <property name="paramName" value="lang" />
    </bean>
</mvc:interceptors>

<bean id="localeResolver"
    class="org.springframework.web.servlet.i18n.CookieLocaleResolver">
    <property name="defaultLocale" value="en" />
</bean>
<mvc:annotation-driven /> 
```

我正在使用两个属性文件： `messages_es.properties`和`messages_en.properties`语言。

我希望这能帮到您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-31T17:12:49.233

你在你的servlet中试过了吗？

```
private ApplicationContext getApplicationContext() {
    ApplicationContext wac = 
    WebApplicationContextUtils.getRequiredWebApplicationContext(
        this.getServletContext());
    return wac;
} // getAppliationContext 
```

然后，当您想要访问 bean 时：

```
ReloadableResourceBundleMessageSource reloadableConfig = 
    (ReloadableResourceBundleMessageSource) 
        getApplicationContext().getBean("messageSource"); 
```

# android - 广播接收器类可以进行休息客户端调用吗？

> ID：13265547
> 
> 赞同：1
> 
> 时间：2012-11-07T08:09:59.413
> 
> 标签：android, broadcastreceiver, push-notification, rest-client

我有一个广播接收器类，用于接收将携带特定项目的 ID/密钥的推送通知。然后我需要使用休息服务拨打电话以检索该项目然后显示它。但它既没有给出任何错误，也没有处理这些步骤。完成此操作后，我需要打开与检索到的特定项目相对应的特定活动。

```
private void retrieveItem(String key) {   
    String feedURI = mContext.getString(R.string.feed_uri_for_push)+"/";
    feedURI += key;     
    RestClient.connect(feedURI, 10, new HTTPData());
}

private class HTTPData implements RestInterface<InputStream>{

@Override
public void onError(Exception e) {
   //give error
}

@Override
public void receive(InputStream instream) {
     String result = RestClient.convertStreamToString(instream);
     JSONArray jsonArray = null;
     try {
             jsonArray = new JSONObject(result).getJSONArray(result); //using array for now.               
    } catch(JSONException e) {
        e.printStackTrace();
    }

    if(jsonArray == null) {
      return;
    }

    // Create Item based on content
    for (int i = 0; i < jsonArray.length(); i++) {
    try {
        if(i > 1){
        break;
    }

            JSONObject preItem = jsonArray.getJSONObject(i);
            ConvertItem item = new NewsItem(rawItem);
            newItem =item;
            } catch (JSONException e) {
              e.printStackTrace();
        }   
     }      
     }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T22:03:18.713

通过使用意图将密钥传递给另一个类并从那里进行其余调用来解决此问题。

# php - 如何使用 jquery.form.js 成功更新图像 src

> ID：13265550
> 
> 赞同：0
> 
> 时间：2012-11-07T08:10:17.790
> 
> 标签：php, jquery, html, ajaxform

我正在使用 jquery.form.js 来 ajax 提交表单并获得响应。

我的 php 页面设置为回显图像 url，如“images/thumbs/071112130957.jpg”

这是我的jQuery：

```
$("#imageform").ajaxForm(
{ 
target: '#preview'
}).submit();
}); 
```

这是我的 html 表单

```
<form action="cropscript.php" id="imageform" method="post" enctype="multipart/form-data">
<input type="file" name="image" id="image" /> <br/>
<input type="submit" name="submit" value="upload image" />
</form>

<div id="preview" > </div>
<img src = "thumbs/default.jpg" id="thumb_img" /> 
```

现在我的问题是如何在 ajaxform 成功后更新 img#thumb_img src ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T08:41:41.183

我很久以前使用 ajaxFrom ，但它只是突然出现在我的脑海中
请检查你的版本的文档

```
$('#imageform').ajaxForm({
  target : '#preview', 
  complete : function (response) {
     $('#thumb_img').attr('src', response.imgsrc);
  }
}); 
```

如果不工作，你能帮我测试吗让我知道

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T11:49:23.227

这对我有用。

```
$(document).ready(function() { 
    $('#image').live('change', function()   
    { 
            $("#imageform").ajaxForm({ 
                    target: '#preview',
                    dataType: 'json',
                    success : function (response) {
                                $('#thumb_img').attr('src','images/thumbs/'+response.imgsrc);
                    }
            }).submit();

    });
}); 
```

# node.js - 添加用户时出现ldapjs错误

> ID：13265553
> 
> 赞同：0
> 
> 时间：2012-11-07T08:10:31.587
> 
> 标签：node.js, ldap

在 ldapjs => [ldapjs guide](http://ldapjs.org/guide.html)上进行测试。

我正在向 ldap 添加一个新的 enry 的部分，给出命令：

```
ldapadd -H ldap://localhost:1389 -x -D cn=root -w secret -f ./user.ldif 
```

user.ldif 文件如下（见链接）

```
dn: cn=ldapjs, ou=users, o=myhost
objectClass: unixUser
cn: ldapjs
shell: /bin/bash
description: Created via ldapadd 
```

但是，当给出“添加”命令时，我得到：

```
adding new entry "cn=ldapjs, ou=users, o=myhost"
ldap_add: Operations error (1)
matched DN: ou=users, o=myhost
additional info: Cannot read property 'ldapjs' of undefined 
```

我没有得到给定的错误。实际上应该做些什么来解决这个问题？我没有找到任何有关此的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T08:30:08.400

做了更多我发现的例子。根据这个[例子](http://www.zytrax.com/books/ldap/ch5/index.html#step1-slapd)修改了'/etc/ldap/ldap.conf' 。更具体地说，我尝试修改仅包含这些模式的“ldap.conf”文件（如示例中所示）：

```
include         /usr/local/etc/openldap/schema/core.schema
include         /usr/local/etc/openldap/schema/cosine.schema
include         /usr/local/etc/openldap/schema/inetorgperson.schema 
```

其余的似乎（还）与我正在做的 ldap.js 测试无关：

这些模式之一可能将此“unixUser”作为父模式（或作为对象类，包括在继承中）。

在修改“ldap.conf”后重新启动“slapd”服务（我敢打赌，它是必需的，所以甚至没有重新启动就没有尝试过）：

```
sudo /etc/init.d/slapd restart 
```

# xamarin.ios - 使用单点触控应用程序设置标题栏样式

> ID：13265559
> 
> 赞同：1
> 
> 时间：2012-11-07T08:10:45.263
> 
> 标签：xamarin.ios

我找到了一个很酷的 iOS Photoshop 模板，我修改了样式以适应我的需要。所以最简单的部分我需要使用 TabBarController 将其转换为与我的单点触控应用程序一起使用。

![在此处输入图像描述](../Images/3d550b91ae6d9782b6ef13de38aaa928.png)

是否可以将图像应用于背景或执行类似于 css 的操作，其中我拍摄 1px 宽的图像并 100% 重复样式？

# html - 使用 Phonegap，哪个更好：多个 html 页面或多个 jquery-mobile 页面？

> ID：13265563
> 
> 赞同：12
> 
> 时间：2012-11-07T08:11:02.143
> 
> 标签：html, cordova, jquery-mobile

正如标题所说，多个 html 页面或多个 jquery-mobile 页面哪个更好？

强调：

我所说的**多个 html 页面**是指一个以 index.html 开头的应用程序，当您使用应用程序导航时，它会将可见页面（通过 href）更改为其他 html 页面，例如 another.html、anotherone.html、 anothertwo.html 等等。

我所说的**多个 jquery-mobile 页面**是这样[的](http://jquerymobile.com/test/docs/pages/multipage-template.html)。

此外，我的意思**更好**的是应用程序的启动速度、每页加载速度、安装程序/应用程序大小、内存消耗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T08:21:20.190

这不是一个完整的答案，但是在加载“多个 jquery-mobile 页面”时需要考虑一些事情。

“多页”案例的缺点：

*   您需要页面中的动态内容吗？这将需要每次重新加载整个多个页面。
*   您多久更新一次页面（我的意思是在应用程序更新中提供更详细的内容，例如）页面？从一个文件中更新多个页面之间的页面不太方便，如果您需要精美的 UI 显示（如相对/绝对类型`position`的组件 ），CSS/XPath 可能会很混乱
*   非常大的页面将需要更长的时间来加载（但您需要在各种设备上实际测试才能看到真正的影响，并且“加载”第一页可能会成功）。

在应用程序大小方面，我不能在这里说，但我的感觉是拥有一页或多页不会有太大变化。然而，拥有 1 个大文件会给 RAM 较少的设备带来困难（即性能较低）。

我个人的偏好会转到几个页面，除非内容非常小而且不是动态的（即取决于用户输入/操作）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-23T07:58:53.890

我正在开发一个巨大的应用程序。有20多个视图页面，每个页面都需要将大量数据写入数据库，处理大量数据等。

因此，设计必须限于多个 HTML 页面。

将其放入多个 JQuery Mobile 页面会使代码过于臃肿且难以管理。因此，作为回报，在页面之间转换时会有明显的视觉滞后（很可能不符合 Apple Store 的条件。幸运的是，我们正在为 Android 开发）。

# javascript - 如果元素在视图中，如何获取？

> ID：13265565
> 
> 赞同：0
> 
> 时间：2012-11-07T08:11:09.700
> 
> 标签：javascript

在我的应用程序中，我想使用：

```
element.scrollIntoView() 
```

为了确保元素在视口内，它可以工作。

但是，我发现它可能会导致一些问题，例如当一个元素在视口内时，然后我将它设置为“进入视图”。然后滚动条会相应地移动，这不是我所期望的。

所以，我想确保元素不在视口内，然后调用`scrollIntoView`.

如何获取元素是否在视口内？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T08:17:36.057

我一直使用 jQuery 的 Viewport 插件，效果很好。

[http://www.appelsiini.net/projects/viewport](http://www.appelsiini.net/projects/viewport)

使用此插件，您可以执行以下操作：

```
if($(".something:in-viewport").length) {
    // do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T08:40:37.937

此函数检查元素是否完全在视口中。

```
function isElementCompletelyInViewPort(element) {

    var elementData = element.getBoundingClientRect(),
        width = document.documentElement.clientWidth,
        height = document.documentElement.clientHeight;

    return ( 
            elementData.bottom <= height
            && elementData.right <= width
            && elementData.left >= 0
            && elementData.top >= 0);       
} 
```

getBoundingClientRect 鲜为人知，但所有主要浏览器都支持。 [https://developer.mozilla.org/en-US/docs/DOM/element.getBoundingClientRect](https://developer.mozilla.org/en-US/docs/DOM/element.getBoundingClientRect)

欢迎任何改进建议:)

# php - 用于获取列总和的 SQL

> ID：13265567
> 
> 赞同：3
> 
> 时间：2012-11-07T08:11:13.880
> 
> 标签：php, mysql, sql

我有三个相互链接的表。

```
mysql> select * from tablea;
+----+--------+
| id | name   |
+----+--------+
|  1 | Item 1 |
|  2 | Item 2 |
+----+--------+
2 rows in set (0.00 sec)

mysql> select * from tableb;
+----+------+----------+
| id | Aid  | name     |
+----+------+----------+
|  1 |    1 | B Item 1 |
|  2 |    2 | B Item 2 |
|  3 |    1 | B Item 3 |
+----+------+----------+
3 rows in set (0.00 sec)

mysql> select * from tablec;
+----+------+----------+-------+
| id | Bid  | name     | value |
+----+------+----------+-------+
|  1 |    1 | C Item 1 |    10 |
|  2 |    2 | C Item 2 |    20 |
|  3 |    1 | C Item 3 |    15 |
|  4 |    2 | C Item 4 |     5 |
|  5 |    3 | C Item 5 |    12 |
+----+------+----------+-------+
5 rows in set (0.00 sec) 
```

TableA 通过 Aid 链接到 TableB，TableC 通过 Bid 链接到 TableB。

我想要的是 tableA 的 id 和所有 TableC 项目的值的总和。

我对上述示例的预期结果集是

```
+-----------+--------+
| tablea.id | sum    |
+-----------+--------+
|         1 |     37 |
|         2 |     25 |
+-----------+--------+ 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-07T08:13:40.703

```
SELECT  a.ID, SUM(c.value) totalValue
FROM    tablea a
        INNER JOIN tableb b
            On a.ID = b.AID
        INNER JOIN tablec c
            ON b.ID = c.BID
GROUP BY a.ID 
```

如果`ID`其他表上可能不存在 from tableA 并且您还想显示它们的结果，请`LEFT JOIN`改用

```
SELECT  a.ID, COALESCE(SUM(c.value), 0) totalValue
FROM    tablea a
        LEFT JOIN tableb b
            On a.ID = b.AID
        LEFT JOIN tablec c
            ON b.ID = c.BID
GROUP BY a.ID 
```

*   [**两个查询的 SQLFiddle 演示**](http://sqlfiddle.com/#!2/44ae1/1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T08:13:17.537

```
SELECT a.id, SUM(c.value) sum
FROM TableA a
INNER JOIN TableB b ON a.id = b.AID
INNER JOIN TableC c ON b.id = c.BID
GROUP BY a.id 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/b526a/1)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-07T08:32:41.757

你可以试试这个查询

```
SELECT a.id AS A, SUM(c.value) AS SUM FROM tablea a INNER JOIN tableb b ON a.id = b.Aid INNER JOIN tablec c ON b.id = c.Bid GROUP BY a.id; 
```

# java - spymemcached 缓存中的下一个唯一键

> ID：13265569
> 
> 赞同：0
> 
> 时间：2012-11-07T08:11:17.653
> 
> 标签：java, unique-key, spymemcached

是否可以使用 spymemcached API 获取自动生成的唯一密钥？

我想使用这样的东西：

```
String key = memcachedClient.add("Some data");
//key - auto generated next unused key 
```

那么，如果不可能，我可以使用某种序列来获取下一个未使用的密钥吗？

问候， 叶夫根尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T08:30:37.780

唯一键由散列函数（[维基散列函数](http://en.wikipedia.org/wiki/Hash_function)）给出。不同输入的哈希函数给出（非常）不同的输出。因此，如果您想要一种为您提供唯一键的方法，请尝试实现哈希函数。尝试寻找MD5 SHA1 ...有很多算法..

# php - 在 JoomGallery 中显示所有没有类别的图像

> ID：13265571
> 
> 赞同：0
> 
> 时间：2012-11-07T08:11:42.687
> 
> 标签：php, joomla

我正在使用 JoomGallery，但我想显示所有图像而不是先创建类别，然后以这种方式将图像放在类别中，只有类别显示在着陆页上。我希望所有图像都显示在着陆页上。我已经搜索了很多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T01:48:57.357

首先创建一个类别，然后将所有图像添加到该类别。

之后，禁用类别视图 - 您可以使用菜单直接指向您的类别视图 index.php?view=category&catid=1&option=com_joomgallery;

或者您可以通过覆盖模板来做到这一点。在这种情况下：

在模板目录 (templates/yourtemplate/html/) 中的 html 目录中创建一个目录，并将其命名为 com_joomgallery，然后在其中创建一个名为“category”的目录，并将其放入您将在 components/com_joomgallery/views/ 中找到的文件中类别/tmpl/

您将在那里找到的 default_images.php 是呈现缩略图的文件，该缩略图将进一步将每个缩略图链接到详细视图。

# javascript - i18next 翻译问题

> ID：13265575
> 
> 赞同：2
> 
> 时间：2012-11-07T08:12:03.567
> 
> 标签：javascript, html, jquery-mobile, internationalization, i18next

我仍然尝试使用 i18next 来翻译我的 jQuery 应用程序。在遇到一些一般性问题（在此处解决：[如何使用 i18next？翻译问题](https://stackoverflow.com/questions/13005791/how-to-use-i18next-problems-with-translations)）之后，我想翻译所有可见文本。但是在这里我遇到了问题，我需要帮助来解决这个问题。我希望有一个人可以帮助我。

```
<html>
<head>
   <meta http-equiv="content-type" content="text/html; charset="UTF-8">

   <link href="jquery-mobile/jquery.mobile.theme-1.0.min.css"      rel="stylesheet" type="text/css"/>
   <link href="jquery-mobile/jquery.mobile.structure-1.0.min.css"  rel="stylesheet" type="text/css"/>

   <script src="jquery-mobile/jquery-1.6.4.min.js"       type="text/javascript"></script>
   <script src="jquery-mobile/jquery.mobile-1.0.min.js"  type="text/javascript"></script>
   <script src="js/i18next-1.5.6.min.js"                 type="text/javascript"></script>
   <script src="js/translation.js"                       type="text/javascript"></script>
</head>
<body>
      <!-- Page Start -->
  <div data-role="page" id="start" data-theme="e">
    <div data-role="header" data-position="fixed" data-theme="e">
      <h1 data-i18n="startHeader"></h1>
    </div>
    <div data-role="content">  
        <a href="#page1" data-icon="arrow-r" data-iconpos="right" data-role="button" data-i18n="buttonA1"></a>
        <a href="#page2" data-icon="arrow-r" data-iconpos="right" data-role="button" data-i18n="buttonA2"></a>
        <a href="#page3" data-icon="arrow-r" data-iconpos="right" data-role="button" data-i18n="buttonA3"></a>
    </div>
  </div>

  <div data-role="page" id="page1" data-theme="e">
    <div data-role="header" data-position="fixed" data-theme="e">
      <a href="#start" data-icon="delete" data-i18n="buttonCancel1"></a>
      <h1 data-i18n="header1"></h1>
    </div>
    <div data-role="content">  
        <a href="#start" data-icon="arrow-r" data-iconpos="right" data-role="button" data-i18n="button1"></a>  
        <a href="#start" data-icon="arrow-r" data-iconpos="right" data-role="button" data-i18n="button2"></a>  
        <a href="#start" data-icon="arrow-r" data-iconpos="right" data-role="button" data-i18n="button3"></a>  
        <a href="#start" data-icon="arrow-r" data-iconpos="right" data-role="button" data-i18n="button4"></a>  
        <a href="#start" data-icon="arrow-r" data-iconpos="right" data-role="button" data-i18n="button5"></a>  
        <a href="#start" data-icon="arrow-r" data-iconpos="right" data-role="button" data-i18n="button6"></a>
    </div>
  </div>

  <div data-role="page" id="page2"  data-theme="e">
    <div data-role="header"  data-theme="e" data-position="fixed">
      <a href="#start" data-icon="delete" data-i18n="buttonCancel2"></a>
      <h1 data-i18n="header2"></h1>
    </div>
    <div data-role="content">&nbsp;</div>
  </div>

  <div data-role="page" id="page3"  data-theme="e">
    <div data-role="header"  data-theme="e" data-position="fixed">
      <a href="#start" data-icon="delete" data-i18n="buttonCancel3"></a>
      <h1 data-i18n="header3"></h1>
    </div>
    <div data-role="content">&nbsp;</div>
  </div>
</body>
</html> 
```

js/translations.js

```
$(document).ready(function(){
  language_complete = navigator.language.split("-");
  language = (language_complete[0]);  
  i18n.init({ lng: language, debug: true }, function() {
    $(".menu").i18n();
    $("#startHeader").i18n();
    $("#buttonA1").i18n();
    $("#buttonA2").i18n();
    $("#buttonA3").i18n();
    $("#header1").i18n();
    $("#header2").i18n();
    $("#header3").i18n();
    $("#buttonCancel1").i18n();
    $("#buttonCancel2").i18n();
    $("#buttonCancel3").i18n();
    $("#button1").i18n();
    $("#button2").i18n();
    $("#button3").i18n();
    $("#button4").i18n();
    $("#button5").i18n();
    $("#button6").i18n();
  });
}); 
```

/locales/de/translation.json

```
{
  "menu": {
    "surname": "Nachname:",
    "firstName": "Vorname:"
  },

  "startHeader":            "Willkommen",
  "buttonA1" : "A1",
  "buttonA2" : "A2",
  "buttonA3" : "A3",
  "header1" : "Überschrift 1",
  "header2" : "Überschrift 2",
  "header3" : "Überschrift 3",
  "buttonCancel1" : "Abbruch",
  "buttonCancel2" : "Abbruch",
  "buttonCancel3" : "Abbruch",
  "button1" : "Klick mich 1",
  "button2" : "Klick mich 2",
  "button3" : "Klick mich 3",
  "button4" : "Klick mich 4",
  "button5" : "Klick mich 5",
  "button6" : "Klick mich 6",
} 
```

/locales/en/translation.json
/locales/dev/translation.json

```
{
  "menu": {
    "surname": "Name:",
    "firstName": "First Name:"
  },

  "startHeader":            "Welcome",
  "buttonA1" : "A1",
  "buttonA2" : "A2",
  "buttonA3" : "A3",
  "header1" : "Headline 1",
  "header2" : "Headline 2",
  "header3" : "Headline 3",
  "buttonCancel1" : "Cancel",
  "buttonCancel2" : "Cancel",
  "buttonCancel3" : "Cancel",
  "button1" : "Click me 1",
  "button2" : "Click me 2",
  "button3" : "Click me 3",
  "button4" : "Click me 4",
  "button5" : "Click me 5",
  "button6" : "Click me 6",
} 
```

菜单翻译仍然有效，所以我从 index.html 中跳过了这部分。

附加问题：是否可以一次翻译所有具有相同内容的文本？示例是当前单独翻译的取消按钮。

在此先感谢您的帮助。

托马斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T01:15:58.370

你可以嵌套你的翻译——比如建立一个词汇表。

```
// given resources
{
     dev: { translation: { nesting1: '1 $t(nesting2)' } },
     en: { translation: { nesting2: '2 $t(nesting3)' } },            
     'en-US': { translation: {  nesting3: '3' } }
};

i18n.t("nesting1"); // -> 1 2 3 
```

[http://i18next.com/pages/doc_features.html#nesting](http://i18next.com/pages/doc_features.html#nesting)

或者只是给每个取消按钮相同的键？

```
$("#buttonCancel1").i18n();
$("#buttonCancel2").i18n();
$("#buttonCancel3").i18n();

<a id="#buttonCancel1" href="#start" data-icon="delete" data-i18n="cancel"></a>
<a id="#buttonCancel2" href="#start" data-icon="delete" data-i18n="cancel"></a>
<a id="#buttonCancel3" href="#start" data-icon="delete" data-i18n="cancel"></a>

{
  "cancel" : "Cancel"
} 
```

# r - 计算行中每个元素之间的差异并使用 r? 报告为单列？

> ID：13265577
> 
> 赞同：1
> 
> 时间：2012-11-07T08:12:20.337
> 
> 标签：r

我有一个从分组数据创建的向量：

```
sitesMODE
FT         KM         KO         LN         LY 
16.840000  32.230769   8.846154 237.000000  57.923077 
```

我想找到每个值与每个值的差异，并最终在单个对象或列中报告它，以便我可以绘制它。

我将在这里重现数据（尽管是矩阵形式）：

```
siteMODE <- matrix(c(16.84, 32.23, 8.84, 237.00, 57.92), 1, 5, byrow = TRUE)
colnames(siteMODE) <- c("FT", "KM", "KO", "LN", "LY") 
```

我知道我可以使用：

```
diffMODELY <- abs(siteMODE - siteMODE[[5]]) 
```

找出表示的列/元素之间的差异，`[[n]]`以便：

```
diffMODELY 
FT        KM        KO        LN        LY 
41.08308  25.69231  49.07692 179.07692   0.00000 
```

我现在的问题是，我怎样才能做到这一点而不必`diffMODELY`为每个列/元素的差异创建一个对象？以及如何将结果报告为矩阵中的单个对象或列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T08:58:56.817

寻找这样的东西？

```
DIFF <- sapply(1:ncol(siteMODE), function(i) abs(siteMODE - siteMODE[i]))
DIFF[upper.tri(DIFF)]
 [1]  15.39   8.00  23.39 220.16 204.77 228.16  41.08  25.69  49.08 179.08 
```

该`sapply`部分计算您想要的差异，但它为您提供了一个矩阵，因为您希望将结果差异转换为一个向量，您可能想要选择上三角矩阵元素或下三角矩阵元素，这就是为什么我应用`upper.tri`函数只选择上三角形元素，最终结果是一个向量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T09:00:48.380

一个简单的解决方案`sapply`：

```
res = sapply(siteMODE, function(x) abs(x - siteMODE))
> res
       [,1]   [,2]   [,3]   [,4]   [,5]
[1,]   0.00  15.39   8.00 220.16  41.08
[2,]  15.39   0.00  23.39 204.77  25.69
[3,]   8.00  23.39   0.00 228.16  49.08
[4,] 220.16 204.77 228.16   0.00 179.08
[5,]  41.08  25.69  49.08 179.08   0.00 
```

添加名称：

```
colnames(res) = colnames(siteMODE)
rownames(res) = colnames(siteMODE)
> res
       FT     KM     KO     LN     LY
FT   0.00  15.39   8.00 220.16  41.08
KM  15.39   0.00  23.39 204.77  25.69
KO   8.00  23.39   0.00 228.16  49.08
LN 220.16 204.77 228.16   0.00 179.08
LY  41.08  25.69  49.08 179.08   0.00 
```

创建一个漂亮的扁平数据结构：

```
require(reshape)
res_flat = melt(res)
# Eliminate duplicates
res_flat = res_flat[melt(upper.tri(res))$value,]
> res_flat
   X1 X2  value
6  FT KM  15.39
11 FT KO   8.00
12 KM KO  23.39
16 FT LN 220.16
17 KM LN 204.77
18 KO LN 228.16
21 FT LY  41.08
22 KM LY  25.69
23 KO LY  49.08
24 LN LY 179.08 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-23T16:18:51.157

将数据保留为向量，然后使用基`outer`函数，只需一步即可产生相同的结果：

```
y<- c(16.84, 32.23, 8.84, 237.00, 57.92)
> abs(outer(y,y, `-`))
   [,1]   [,2]   [,3]   [,4]   [,5]
[1,]   0.00  15.39   8.00 220.16  41.08
[2,]  15.39   0.00  23.39 204.77  25.69
[3,]   8.00  23.39   0.00 228.16  49.08
[4,] 220.16 204.77 228.16   0.00 179.08
[5,]  41.08  25.69  49.08 179.08   0.00 
```

# javascript - 如何在 angularJS 中使用 $document 服务？

> ID：13265578
> 
> 赞同：7
> 
> 时间：2012-11-07T08:12:21.803
> 
> 标签：javascript, jquery, angularjs

一般来说，我对 JS 中的 angularJS 非常陌生，我对使用 $document 有点困惑。据我了解 $document 公开了一些 JQuery 函数。因此，当我想删除与选择器匹配的元素时，我会这样做：

```
$document.remove('.someClassSelector'); 
```

并且该元素应该从 DOM 树中删除，对吗？如果不是，那么以角度操作 DOM 元素及其 css 的正确方法是什么。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-07T17:56:34.890

隐藏/显示 DOM 元素的更常见的“角度方式”是使用[ngHide](http://docs.angularjs.org/api/ng.directive:ngHide)和/或[ngShow指令——在您的 HTML 中“声明”它们（因此](http://docs.angularjs.org/api/ng.directive:ngShow)[概述](http://docs.angularjs.org/guide/overview)页面上的此语句：

> Angular 的构建基于这样一种信念，即在构建 UI 和将软件组件连接在一起时，声明式代码优于命令式代码

同样，要添加/删除 CSS 类，请以声明方式使用[ngClass](http://docs.angularjs.org/api/ng.directive:ngClass)指令。对模型的更改（即 $scope 属性）应该推动 CSS 类的隐藏/显示和添加/删除。

如果您需要更复杂的东西，请将 DOM 操作放入自定义[指令](http://docs.angularjs.org/guide/directive)中，通常在链接函数中。

在 jQuery 世界中，我们考虑触发 DOM 操作代码的事件（例如，在某些元素上调用 remove()）。在 AngularJS 世界中，我们想考虑触发模型更改的事件，然后根据我们的声明性 HTML 自动触发 UI 更改（例如，ng-click 设置一个 $scope 属性，该属性与元素上的 ng-show 绑定）。我还在调整我的想法。

对于大多数 AngularJS 应用程序，您不需要使用 $document。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-07T09:34:58.977

AngularJS 嵌入了一个精简版的 Jquery (jqLit​​e)。

如果您只想使用 jqLit​​e（不嵌入 jquery），您可以执行以下操作来删除元素：

```
angular.element(yourElement).remove() 
```

`$document`是 window.document 的 jqLit​​e 快捷方式

请参阅：[docs.angularjs.org/api/angular.element](http://docs.angularjs.org/api/angular.element)

# android - 如何在启动 Activity 时显示虚拟键盘？

> ID：13265580
> 
> 赞同：-1
> 
> 时间：2012-11-07T08:12:27.787
> 
> 标签：android, keyboard, android-edittext

我想在活动开始后立即显示虚拟键盘，但无法实现它..我正在尝试在清单中设置**android:windowSoftInputMode="stateAlwaysVisible"**但它对我不起作用..

一旦我回按，它不应该被解雇。

是否可以在我们自己的布局上显示虚拟键盘？？？

这是清单文件的一部分

```
 <application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".MainActivity"
        android:label="@string/app_name"
        android:windowSoftInputMode="stateAlwaysVisible" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".FriendsList"
        android:screenOrientation="portrait" />
    <activity android:name=".Places" />
</application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T08:20:41.757

试试下面的链接。

[对于键盘，请点击此链接](http://glorious-arvind.blogspot.in/2012/11/show-or-hide-soft-keyboard-on-opening.html)

试试下面的代码它的工作

```
final TextView txtPassword = (TextView) findViewById(R.id.txtpassword);

       txtPassword.postDelayed(new Runnable() {
        @Override
        public void run() {
            InputMethodManager keyboard = (InputMethodManager)
            getSystemService(Context.INPUT_METHOD_SERVICE);
            keyboard.toggleSoftInput(InputMethodManager.SHOW_FORCED, 0); 
        }
    },200); 
```

# dns - Lion 服务器更改主机名始终指向 Internet 的主机名

> ID：13265589
> 
> 赞同：0
> 
> 时间：2012-11-07T08:13:04.207
> 
> 标签：dns, osx-lion

我是 Lion 服务器设置的新手。Lion 服务器中已配置静态 IP，但我们没有为该静态 IP 分配的域名。所以我们计划保留这个供内部使用。

当我尝试配置主机名（服务器 -> 网络 -> 主机名 -> 编辑）时，它总是指向“互联网主机名”选项。但我需要“本地地址的主机名”。[请找到所附的屏幕截图]

![在此处输入图像描述](../Images/131dc4449339b503561ecaf14dbe68e2.png)

在我更改为“本地地址的主机名”后，它没有反映出来。

由于这个原因，我无法访问“本地 Web 服务器”。我启动了 Web 服务器服务（服务器 -> Web -> ON）。之后我尝试访问默认网络（[https://myIpAddress](https://myIpAddress)）它不起作用。

为了访问 Lion 服务器中的本地 Web 服务器，我需要做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T23:30:35.380

使用 localhost 的别名编辑 /etc/hosts 文件。

您不想为此使用 GUI。

# c# - 无法在 pdf 中打印复选框

> ID：13265592
> 
> 赞同：1
> 
> 时间：2012-11-07T08:13:07.723
> 
> 标签：c#, itextsharp, wkhtmltopdf

我们正在使用 WkHtmlToPdf 将 html 转换为 pdf。现在我也使所有表单字段都可以根据要求进行编辑。由于在将 Html 转换为 Pdf 时 WkHtmlToPdf 中存在错误，因此它使所有表单字段的属性为可见不可打印。

为了解决这个问题，我们使用 ITextSharp 读取由 WkHtmlToPdf 生成的现有 pdf 并将该属性设置为每个表单字段的可见性。

我就是这样做的

```
 var pdfReader = new PdfReader(inputFilename);

        using (var outputStream = new FileStream(outputFilename, FileMode.OpenOrCreate))
        {
            var stamper = new PdfStamper(pdfReader, outputStream);

            // Regenarating all the fileds using itextSharp. 
            // Since wkHtmltoPdf has differnt default settings for pdf form fields (Visible and not Printable)
            var formFields = stamper.AcroFields;
            var filedNames = formFields.Fields.Keys;

            foreach (var keyName in filedNames)
            {
                formFields.SetFieldProperty(keyName, "setflags", PdfAnnotation.FLAGS_PRINT, null);
                formFields.SetFieldProperty(keyName, "setflags", PdfFormField.FF_EDIT, null);
                formFields.SetFieldProperty(keyName, "textsize", 8.0f, null);
                formFields.RegenerateField(keyName);
              }
          } 
```

这解决了我所有字段的问题，但复选框。我在 html 中有几个复选框，它们使用 WkHtmlToPdf 转换为 pdf。我意识到，当我尝试 RegenerateField()（foreach 循环中的最后一行）复选框时，它会丢失其所有属性（无论我选中还是未选中），它只显示空复选框，并且不可编辑。

为了解决这个问题，我想出了以下

```
if (formFields.GetFieldType(keyName).Equals(AcroFields.FIELD_TYPE_CHECKBOX))
{
                    // Regenerate checkbox formfield causing it to reset all its properties 
                    // including checkd/uncheked property     
                    formFields.SetFieldProperty(keyName, "setflags", PdfAnnotation.FLAGS_PRINT, null);

// Ignore the commented code as it is not working Not sure why??? and how

                    //var item = formFields.GetFieldItem(keyName);
                    //var appearance = item.GetValue(0).Get(PdfName.AS);

                    //if (appearance != null)
                    /{
                    //    if (appearance.tostring().tolower().equals("/yes"))
                    //    {
                    //        formfields.regeneratefield(keyname);

                     // Not even one working when I try to set the check box status like below
                    //        success  = formfields.setfield(keyname, "yes");
                    //        success  = formfields.setfield(keyname, "/yes");
                    //        success  = formfields.setfield(keyname, "/yes");
                    //        success = formfields.setfield(keyname, "on");
                    //        success =  formfields.setfield(keyname, "1");

                    //    }
                    } 
```

使用代码（不包括注释）代码复选框成功保留其状态并显示在生成的 Pdf 中。但它不是打印。我检查了复选框的属性，它与 pdf 中的任何其他字段一样可见。除了复选框之外，所有字段（文本框）都在打印其值。

我正在通过 --> Open pdf document--> Forms--> Add/Edit Fields 检查属性

我在这里做错了什么？我没有在复选框上设置属性，而是尝试使用 Itextsharp 构建一个全新的复选框，但我无法使用 ItexSharp 手动示例。以前有人做过这些东西吗？

即使我使用 ItextSharp 生成了一个新的复选框，我如何才能完全替换现有的复选框？

非常感谢您阅读我的故事。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T04:50:54.193

好吧，我通过用 ITextSharp 替换 wkHtmltoPdf 复选框解决了这个问题。我正在详细回答它可能会节省您的时间

```
 /// <summary>
    /// By default, wkHtmlToPdf leaves pdf form fields as being "Visible but not printable". Using iTextSharp we will change them to being "Visible".
    /// </summary>
    private string MakePdfFormFieldsEditable(string inputFilename)
    {
        var outputFilename = CreateTempPdfFilename();

        var pdfReader = new PdfReader(inputFilename);

        var checkedCheckBoxNames = new List<string>();

        using (var outputStream = new FileStream(outputFilename, FileMode.OpenOrCreate))
        {
            var stamper = new PdfStamper(pdfReader, outputStream);

            // Regenarating all the fileds using itextSharp. 
            // Since wkHtmltoPdf has differnt default settings for pdf form fields (Visible and not Printable)
            var formFields = stamper.AcroFields;
            var filedNames = formFields.Fields.Keys;
            var removableFiledNames = new List<string>();

            foreach (var keyName in filedNames)
            {
                if (formFields.GetFieldType(keyName).Equals(AcroFields.FIELD_TYPE_CHECKBOX))
                {
                    // Since check boxes generated by WKHtmltoPdf is crapy and click behaviour is annoying
                    // we are replacing it with new checkbox
                    var item = formFields.GetFieldItem(keyName);

                    // Return "/yes" if it's checked
                    var appearance = item.GetValue(0).Get(PdfName.AS);

                    // Holds current page number information and Location on the page (Rectangle Dimentions)
                    var position = formFields.GetFieldPositions(keyName);

                    var newCheckBoxFieldname = CreateNewCheckBox(position, stamper, keyName);

                    // set newly created check box value
                    if (appearance != null && appearance.ToString().ToLower().Equals("/yes"))
                    {
                        checkedCheckBoxNames.Add(newCheckBoxFieldname);
                    }
                    // List of Check Box field names to be removed
                    removableFiledNames.Add(keyName);
                }
                else
                {
                    formFields.SetFieldProperty(keyName, "setflags", PdfAnnotation.FLAGS_PRINT, null);
                    formFields.SetFieldProperty(keyName, "setflags", PdfFormField.FF_EDIT, null);
                    formFields.SetFieldProperty(keyName, "textsize", 8.0f, null);

                    formFields.RegenerateField(keyName);
                }
            }

            // Removing check boxes generaed with WkHtmlToPdf
            foreach (var oldCheckBox in removableFiledNames)
            {
                formFields.RemoveField(oldCheckBox);
            }

            stamper.Close();
        }

        return checkedCheckBoxNames.Any() ? UpdateCheckBoxes(outputFilename, checkedCheckBoxNames) : outputFilename;
    }

    /// <summary>
    /// Updating Check Boxe's status checked or not in input file
    /// </summary>
    private string UpdateCheckBoxes(string inputFilename, ICollection<string> checkedCheckBoxNames)
    {
        var outputFilename = CreateTempPdfFilename();

        var pdfReader = new PdfReader(inputFilename);

        using (var outputStream = new FileStream(outputFilename, FileMode.OpenOrCreate))
        {
            var stamper = new PdfStamper(pdfReader, outputStream);

            var newformFields = stamper.AcroFields;
            var newfiledNames = newformFields.Fields.Keys;

            foreach (var keyName in newfiledNames)
            {
                if (!newformFields.GetFieldType(keyName).Equals(AcroFields.FIELD_TYPE_CHECKBOX)) continue;

                if (!checkedCheckBoxNames.Contains(keyName)) continue;

                newformFields.SetField(keyName, "On");
            }

            stamper.Close();
        }

        return outputFilename;
    }

    /// <summary>
    /// Constructing new check box
    /// </summary>
    /// <param name="fieldPosition"></param>
    /// <param name="stamper"></param>
    /// <param name="keyName"></param>
    /// <returns>new field name</returns>
    private string CreateNewCheckBox(IList<AcroFields.FieldPosition> fieldPosition, PdfStamper stamper, string keyName)
    {
        var pageNumber = fieldPosition.First().page;
        var locationRectangle = fieldPosition.First().position;

        PdfContentByte canvas = stamper.GetOverContent(1);

        // Create array with two appearances
        var onOff = new PdfAppearance[2];
        onOff[0] = canvas.CreateAppearance(15, 15);
        onOff[0].Rectangle(1, 1, 13, 13);
        onOff[0].Stroke();
        onOff[1] = canvas.CreateAppearance(15, 15);
        onOff[1].SetRGBColorFill(255, 128, 128);
        onOff[1].Rectangle(1, 1, 13, 13);
        onOff[1].FillStroke();
        onOff[1].MoveTo(1, 1);
        onOff[1].LineTo(14, 14);
        onOff[1].MoveTo(1, 14);
        onOff[1].LineTo(14, 1);
        onOff[1].Stroke();

        var newFieldName = keyName + "_G";

        // Creates new check boxes
        var checkbox = new RadioCheckField(stamper.Writer, locationRectangle, newFieldName, "On");

        var field = checkbox.CheckField;

        // Add check box field to writer
        stamper.AddAnnotation(field, pageNumber);

        return newFieldName;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-22T05:51:11.773

这是我使用 CSS 伪元素的解决方案：

```
<style>
label.checkbox:before {
    content: "☐ ";
}
label.checkbox.checked:before {
    content: "☑ ";
}
</style>
<label class="checkbox checked">Yes</label>
<label class="checkbox">No</label> 
```

# asp-classic - On Error Goto 抛出错误

> ID：13265598
> 
> 赞同：1
> 
> 时间：2012-11-07T08:13:31.300
> 
> 标签：asp-classic, error-handling

关于未捕获所有错误等有类似的问题`On Error Goto x`，但我遇到了不同的问题。

大多数情况下，我的（经典 ASP）页面工作正常。一些用户抱怨页面上的错误，无法复制。

我尝试了错误处理，但`On Error Resume Next`对这种情况没有帮助，`On Error Goto`导致页面无法工作并不断抛出错误（看起来像 500，但这可能是因为处理 IIS 在后台进行）。如果标签存在与否，无论我写`Goto 0`与否，都会发生这种情况。`Goto [label]`

这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T08:36:19.173

`On Error GoTo label`在 ASP 中不支持

您开始使用错误捕获块

`On Error Resume Next`,

检查`Err.Number`是否发生错误，

使用关闭块

`On Error GoTo 0`.

[请参阅此文档](http://support.microsoft.com/kb/300043)和[此线程](https://stackoverflow.com/questions/472558/is-try-catch-like-error-handling-possible-in-asp-classic)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-20T08:43:32.470

在较大的 ASP 页面中，尝试使用 On Error Resume Next 捕获每个错误是不切实际的。

如果收到状态代码 500，请将 IIS 配置为使用自定义错误页面。格式化以下内容以适应...

```
Set objASPError = Server.GetLastError

response.write "Category: " & objASPError.Category & _
 "ASPCode: " & objASPError.ASPCode & _
 "Number: " & objASPError.Number & _
 "ASPDescription: " & objASPError.ASPDescription & _
 "Description: " & objASPError.Description & _
 "Source: " & objASPError.Source 
```

# php - CSV 换行问题

> ID：13265599
> 
> 赞同：2
> 
> 时间：2012-11-07T08:13:33.603
> 
> 标签：php, mysql, csv

我有这个 CSV 文件，其中包含以下内容，

```
10000,hello
10000,bye
10000,good 
```

而且，我下面的代码用于读取 CSV 文件，并将它们发送到数据库。

```
if ($_FILES[csv][size] > 0) { 

    //get the csv file 
    $file = $_FILES[csv][tmp_name]; 
    $handle = fopen($file,"r"); 

    //loop through the csv file and insert into database 
    do { 
        if ($data[0]) { 
            mysql_query("INSERT INTO table_name (table_column1, table_column2) VALUES 
                ( 
                    '".$data[0]."', 
                    '".$data[1]. "'
                ) 
            ");         
        }
    } while ($data = fgetcsv($handle,1000,",")); 

} 
```

有了上面，来自 CSV 的数据无法进入数据库，因为它读取的文件如下所示，

```
10000 hello 10000
bye 10000
good 
```

**我可以知道，这是什么问题？代码有问题吗？**

但是，如果我的 CSV 文件的格式如下所示（每行之间有一个空行），

```
10000,hello

10000,bye

10000,good 
```

所有数据都可以成功进入数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T08:22:44.233

为什么不不使用 csv 读取功能呢？

```
if ($_FILES[csv][size] > 0) { 

    //get the csv file 
    $file = $_FILES[csv][tmp_name]; 
    $lines = file($file); 

    foreach ($lines as $line)
    {
        $data = explode(",", $line);
        if ($data[0] != "") { 
            mysql_query("INSERT INTO table_name (table_column1, table_column2) VALUES 
                ( 
                    '".$data[0]."', 
                    '".$data[1]. "'
                ) 
            ");         
        }
    }
} 
```

# javascript - Zepto 长按

> ID：13265601
> 
> 赞同：0
> 
> 时间：2012-11-07T08:13:41.023
> 
> 标签：javascript, jquery, zepto

我一直在为 longClick 事件寻找 Zepto 插件。Zepto 支持 longTap，它非常适合移动设备，但我想在桌面上访问我的页面时切换一个 longClick 事件。我还要求“longClick”干扰“点击”，只允许其中一个。

任何资源或想法？

## 让我工作：

```
$(element).on('longClick', function() { console.log('longClick') }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T14:52:46.213

尝试使用hammer.js，它是一个很棒的库，有很多事件

或使用这个： [https ://github.com/quentint/long-press](https://github.com/quentint/long-press)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T17:26:04.223

我想要“longClick”事件，这样我就可以在我的桌面上测试我的 PhoneGap 应用程序，而不必每次都在我的手机上运行它，这非常耗时。

我最终使用的解决方案是进入 Chrome 开发者工具并“启用触摸事件”。我不仅不再需要“longClick”事件，而且能够删除将我的“tap”事件更改为“单击”destkop 的额外代码。

# html - 使用 CSS 冻结表头时，表头和正文未正确对齐

> ID：13265606
> 
> 赞同：2
> 
> 时间：2012-11-07T08:14:09.467
> 
> 标签：html, css, datatables

当我尝试使用以下 css 修复其头部时，我有一个以下格式的表格，我失去了对齐，表格标题和正文没有正确对齐..我能做些什么来克服这个..

```
#ex_table
{

table-layout: fixed !important;
}

#ex_table thead tr
{
position: fixed !important;

} 
```

这是HTML部分

```
<div class="table_div" style="height:400px;width:98%;overflow:scroll">
<table  id="ex_table">
/*thead and tbody populated dynamically via jquery datatables*/
<tfoot id="ex_footer">
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</tfoot> 
</table>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T08:31:48.837

您必须严格设置单元格的宽度：

> th, td { 宽度：30px }

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T08:44:26.837

将您的标题行宽度设置为表格宽度：

```
#ex_table thead tr
{
  width:98%;
  position: fixed !important;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T08:48:43.053

答案不是那么简单，它需要大量的工作。`position: fixed`使用表格时无法按预期工作，因此您将需要另一种方法

这是我通过网络搜索整理的一个 JSFiddle，[http://jsfiddle.net/UWS6N/1/](http://jsfiddle.net/UWS6N/1/)

在 Stackoverflow 上也发现了这个，这是一个已经回答的问题，它涉及到一些问题`jQuery`，我个人喜欢这样做，`CSS`因为它更快。

[当用户使用 jQuery 将表头滚动到视图之外时，表头保持固定在顶部](https://stackoverflow.com/questions/4709390/table-header-to-stay-fixed-at-the-top-when-user-scrolls-it-out-of-view-with-jque)

另外，请`<th>`仅为标题行保留标签，`<thead>`用作该特定行的容器将有助于代码可读性，将它们放在`<tfoot>`违反标准的情况下（我知道这个表达有点苛刻，但我是标准的倡导者和当我看到糟糕的代码时往往会变得有点前卫，那可能只是我）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T08:32:59.460

无论用户在页面的哪个位置，固定定位都会将元素保持在视口中的同一位置。因此，如果您在 TR 上使用此属性，它们都会堆积在视口（浏览器窗口）的左上角。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T04:56:22.203

我结合了@RomanTheGreat 和@Smiter 证明的解决方案，并编写了一个如下给出的CSS......即使对齐方式不是音高完美。这几乎让我到了那里

```
#ex_table
    {
    table-layout: fixed !important;
    }
    #ex_table thead tr
    {
     width:500px !important;
     position: fixed !important;
    }
    #ex_table tbody tr
    {
     width:500px!important;
    } 
    #ex_table th, td { width:100px; } 
```

# iphone - 在文本视图中插入图像后如何将光标下一行移动/跳转到图像视图

> ID：13265607
> 
> 赞同：0
> 
> 时间：2012-11-07T08:14:08.737
> 
> 标签：iphone, objective-c, ipad, uiimageview, uitextview

我使用图像选择器在文本视图中插入了库中的图像，

在 pickeDelegate**`didFinishPickingImage`**方法中

```
imgview = [[UIImageView alloc] initWithImage:image];

            NSString *messageText = [[NSString alloc]init];
            messageText = messageView.text;
            CGSize s = [messageText sizeWithFont:[UIFont systemFontOfSize:15] //define your textview font size
                               constrainedToSize:CGSizeMake(self.view.bounds.size.width - 40, MAXFLOAT)  //                                      lineBreakMode:UILineBreakModeWordWrap];   
            CGRect frame = CGRectMake(0.0f, s.height+10, 50, 50);//use YourImageView. height and width 
            imgview.frame=frame;

            //[imgview setFrame:CGRectMake(0, 0, 30,30) ];
            [messageView addSubview:imgview]; 
```

并使用以下委托方法逻辑实现了在最后一个文本末尾添加图像的逻辑

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text;
{
      if ( [text isEqualToString:@"\n"] ) {

      }
      else
      {
            NSString *yourstring = [[NSString alloc]init];
            yourstring = textView.text;
            CGSize s = [yourstring sizeWithFont:[UIFont systemFontOfSize:15] //define your textview font size
                              constrainedToSize:CGSizeMake(self.view.bounds.size.width - 40, MAXFLOAT)  // - 40 For cell padding
                                  lineBreakMode:UILineBreakModeWordWrap];   
            CGRect frame = CGRectMake(0.0f, s.height+10, 50, 50);//use YourImageView. height and width 
            imgview.frame=frame;
      }
      return YES;
} 
```

但是每次光标在图像视图*之前开始时，*

但**`i need to jump/ move the cursor after the image when ever i added the image, jus like as folows,`**

我的要求是用户可以在文本视图中输入文本，他可以在文本视图中添加图像，**然后从图像后的下一行，他可以再次输入文本，**

就像我们**在这个堆栈中附加图像一样通过流框这样**

![在此处输入图像描述](../Images/0cbae461e2a4bcf236a38f908808fea6.png)

插入图片后，他可以再次输入文字，

如何做到这一点任何帮助..提前谢谢

我之前的问题：[向 UITextView 添加图像](https://stackoverflow.com/questions/13263808/how-to-add-image-with-in-uitextview-just-like-in-stackoverflow-questin-box)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T10:09:28.590

如果您想在插入图像后对文本字段做出响应，那么-

```
 [YOURTEXTFIELD becomeFirstResponder]; 
```

# coding-style - 这真的是一些编码约定来对齐“=”每个地方吗？

> ID：13265614
> 
> 赞同：0
> 
> 时间：2012-11-07T08:14:37.793
> 
> 标签：coding-style, standards

在我们公司，我们正在尝试遵循编码约定，我的一些前辈告诉我一些编码约定，其中大多数都是我知道的，它们很好，但其中一个是相等对齐，整个代码中的对齐相等看起来有点怪。我知道在我们专门在配置值中进行一组赋值时，我们通常会进行相等对齐。喜欢：

```
$params = array(
                        'dbdriver'  => $dns['scheme'],
                        'hostname'  => (isset($dns['host'])) ? rawurldecode($dns['host']) : '',
                        'username'  => (isset($dns['user'])) ? rawurldecode($dns['user']) : '',
                        'password'  => (isset($dns['pass'])) ? rawurldecode($dns['pass']) : '',
                        'database'  => (isset($dns['path'])) ? rawurldecode(substr($dns['path'], 1)) : ''
                    ); 
```

或喜欢：

```
var $next_link          = '&gt;';
var $prev_link          = '&lt;';
var $last_link          = 'Last &rsaquo;';
var $uri_segment        = 3;
var $full_tag_open      = '';
var $full_tag_close     = '';
var $first_tag_open     = '';
var $first_tag_close    = '&nbsp;';
var $last_tag_open      = '&nbsp;';
var $last_tag_close     = '';
var $first_url          = ''; // Alternative URL for the First Page.
var $cur_tag_open       = '&nbsp;<strong>';
var $cur_tag_close      = '</strong>';
var $next_tag_open      = '&nbsp;';
var $next_tag_close     = '&nbsp;';
var $prev_tag_open      = '&nbsp;';
var $prev_tag_close     = '';
var $num_tag_open       = '&nbsp;';
var $num_tag_close      = '';
var $page_query_string  = FALSE;
var $query_string_segment = 'per_page';
var $display_pages      = TRUE;
var $anchor_class       = ''; 
```

但是，当我们在普通代码中加载库、实例化值、调用方法并在变量中获取响应时，仍然应该有相等对齐吗？就像有 ec2class 的构造函数：

```
public function __construct(array $options = array())
{
    $this->api_version = '2012-07-20';
    $this->hostname = self::DEFAULT_URL;
    $this->auth_class = 'AuthV2Query';

    return parent::__construct($options);
} 
```

或这样的地方：

```
 $this->CI->load->library('awslib');

    $s3          = new AmazonS3();
    $bucket_name = ($is_private) ? 'private_s3_bucket' : 'public_s3_bucket';
    $bucket      = $this->CI->config->item($bucket_name);
    $options     = array(
        'fileUpload' => $file_path,
        'acl'        => AmazonS3::ACL_PUBLIC
    );

    try {
        $response = $s3->create_object($bucket, $file_name, $options);
    } catch (Exception $e) {
        echo "<pre>";
        exit($e);
        echo '</pre>';
    } 
```

所以在最后两个例子中，平等对齐真的很重要吗？有没有这样的标准？因为我认为当它混合了实例化库、加载其他东西、有条件地分配值时，可能是相等对齐并不重要，因为我认为它对我来说更具可读性，请告诉是否有一些标准然后请提供一些参考，在许多框架和库等中，只要在这些语句中存在混合和分配，我从未见过等式对齐这样的地方。所以请告诉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T13:48:56.420

我相信以有意义的方式对齐代码很重要，这样您就可以识别模式。但是，您似乎花费了大量时间重新排列代码，这对可读性的提升是最低的。

在这种情况下，如果是我的公司，我会尝试改变惯例，或者至少让它更灵活一点。尤其是因为它是本地的。我找不到任何提到将相等运算符对齐作为最佳实践的文档。

# php - PHP 和参考：什么是弃用的，什么不是？

> ID：13265617
> 
> 赞同：0
> 
> 时间：2012-11-07T08:14:41.027
> 
> 标签：php, reference

PHP 声明拒绝使用引用变量（5.3 中的 E_DEPRECATED，5.4 中的 E_STRICT）。最初，我认为在所有情况下都使用 &，但似乎不是。

所以我想知道，仍然允许什么样的代码使用引用，现在什么会引发 E_DEPRECATED/STRICT 错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T08:14:41.027

到目前为止，根据我所学到的，结果如下：

```
function foo(&$somevar) { /* ... */ }    // Allowed : pass-by-reference
function &foo($somevar) { /* ... */ }    // Allowed : returning-by-reference
$somevar = &othervar; *1                // Allowed

foo(&$somevar);                          // Refused : call-time pass-by-reference
$somevar = & new SomeObject();           // Refused
$somevar = & SomeObject::foo(); *2      // Refused 
```

1.  $othervar[不是一个对象](https://stackoverflow.com/a/8274318/330867)
2.  `SomeObject::foo()`返回一个对象的新实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T08:24:19.277

```
$somevar = & new SomeObject(); 
```

为什么要这么做？你期望会发生什么？我会说唯一的答案就是检查手册？查看[http://www.php.net/manual/en/language.references.php](http://www.php.net/manual/en/language.references.php)，尤其是关于它们不是什么的部分（例如：指针）。

你可能会在那里读到：

> 仅函数定义就足以通过引用正确传递参数。从 PHP 5.3.0 开始，当您在 foo(&$a); 中使用 & 时，您将收到一条警告说“调用时传递引用”已被弃用。从 PHP 5.4.0 开始，调用时传递引用已被删除，因此使用它会引发致命错误。

所以你已经通过引用传递并通过引用重新运行（都有自己的手册页）

# c# - Windows 窗体应用程序中的重复控件

> ID：13265618
> 
> 赞同：1
> 
> 时间：2012-11-07T08:14:41.790
> 
> 标签：c#, winforms

我正在开发一个 Windows 窗体应用程序来为不同组的员工生成激励报告。为了匹配报告模板，我需要手动将控件放入表单中，仅适用于一名员工。如果我完成了里面的所有逻辑，我怎样才能使它动态化，以便它可以使用相同的模板为所有员工自动生成报告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T08:54:50.993

如果您想动态地执行此操作，您可以设置一个数据库，其中将存储有关工作人员所需控件的信息。现在，当表单加载时，您可以检查需要对特定工作人员进行哪些更改，超出模板。

希望这可以帮助 ！有关更多详细信息，您将需要发布一些代码片段，并且能够提供详细帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T08:18:58.137

您是否考虑过使用 SQL Server Reporting Services？这很好地插入了 Visual Studio，并使报告变得非常简单。如果您的企业已经拥有 SQL Server 许可证，这是一个很好的选择。

此外，如果没有关于您实施这些模板/报告/表单的方式的任何技术细节，很难给出详细的技术响应。请详细说明。

# java - java - 如何使用java中的密码保护连接到系统上运行的服务器？

> ID：13265621
> 
> 赞同：0
> 
> 时间：2012-11-07T08:14:51.240
> 
> 标签：java, runtime.exec

我正在尝试使用 Runtime.exec 从我的 java 代码运行一个类文件，但无法在 Linux 上启动新进程，Windows 上也是如此。

我想要或通过单击按钮从 GUI（我从名为 Launch.jar 的 jar 文件运行）启动进程。

所以我使用了以下代码。

```
String curpath=System.getProperty("user.dir");
 Runtime.getRuntime().exec(new String[] { "/bin/bash", "-c", "java -classpath"+curpath+File.separator+" Launch.jar LaunchNewProcess" }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T08:24:14.930

我认为你需要在之后留一个空间`-classpath`

```
Runtime.getRuntime().exec(new String[] { "/bin/bash", "-c",
"java -classpath "+curpath+File.separator+" Launch.jar LaunchNewProcess" }); 
```

更新：试试这个：

```
Runtime.getRuntime().exec(new String[] { "/bin/bash", "-c",
"java -jar "+curpath+File.separator+"Launch.jar" }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T08:24:31.747

在 -classpath 之后放置一个空格，并在“Launch.jar”上删除空格

```
 try{

     Runtime.getRuntime().exec(new String[] { "/bin/bash", "-c", "java -classpath "+curpath+File.separator+"Launch.jar LaunchNewProcess" });

}catch(Exception e){
   e.printStackTrace();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T08:28:21.677

恕我直言，我建议您放弃使用 Runtime.exec 并开始使用[ProcessBuilder](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html)

那里有很多示例/教程，[这是一个](http://singztechmusings.wordpress.com/2011/06/21/getting-started-with-javas-processbuilder-a-sample-utility-class-to-interact-with-linux-from-java-program/)

# c# - 在 FlowLayoutPanel 中插入用户控件

> ID：13265635
> 
> 赞同：16
> 
> 时间：2012-11-07T08:16:03.767
> 
> 标签：c#, .net, winforms, user-controls, flowlayoutpanel

我有一个`FlowLayoutPanel`和几个`UserControl`s。现在我希望一个控件始终位于我的`FlowLayoutPanel`. 所以我想在最低控制上方添加我的 UserControl。有没有一种简单的方法可以在 中插入用户控件`FlowLayoutPanel`？

我目前正在考虑移除底部的控件，并添加我要添加的控件并再次添加底部控件。但这我不认为这真的是最好的方法。这里有没有人可以帮助我提供一些有关如何执行此操作的信息？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-07T12:04:45.957

是的，`Index`您`Control`可以`User-Control`在`Flow-Layout Panel`.

```
//flPanel is your flow-layout panel...
flPanel.Contorls.Add(ctrl1); //ctrl1 can be any control or user control
flPanel.Contorls.Add(ctrl2); //ctrl2 can be any control or user control
flPanel.Controls.SetChildIndex(ctrl1, flPanel.Controls.GetChildIndex(ctrl2) + 1); 
```

这样，您的 ctrl1 将位于底部，尽管它首先添加到您的`Flow-Layout Panel`.

如果您有更多`Control`的 s，并且您在不同的事件中切换它们的可见性，那么您每次都必须`Index`为每个设置`Control`。

我建议将您`Control`放入`Panel`并添加`Panel`到您的`Flow-Layout Panel`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T10:11:02.537

这与 WinForms/WPF 无关。您正在尝试使用面板进行流式布局，而这显然不是要使用流式的。

您应该相应地更改布局面板。尝试在需要流程的项目上使用流程布局，然后将该面板放在另一个面板中，该面板也托管您的底部面板。

# django - 什么是 django 中的 @csrf_protect_m 为什么使用它？

> ID：13265636
> 
> 赞同：2
> 
> 时间：2012-11-07T08:16:10.293
> 
> 标签：django, django-admin

当我在管理员中覆盖 change_view 时，我将得到以下代码行

```
@csrf_protect_m
@transaction.commit_on_success
def change_view(self, request, object_id, extra_context=None):
    return admin.ModelAdmin.change_view(self, request, object_id, extra_context=extra_context) 
```

前两行代码是什么？我应该用这个吗？它能做什么 ？

我刚刚开始扩展 Django Admin。所以希望你的答案很简单，并举例说明。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T08:35:26.897

`@csrf_protect_m`是一个方法装饰器。要了解它的作用，请阅读有关*csrf*[保护的文档](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/)

`@transaction.commit_on_success`也是一个装饰师。要了解它的作用，请阅读有关[数据库事务的文档](https://docs.djangoproject.com/en/dev/topics/db/transactions/?from=olddocs#controlling-transaction-management-in-views)

简单来说，装饰器是一种将条件功能包装在方法或函数周围的方法。他们包装一个函数，修改它，然后返回这个函数。[python 手册](http://docs.python.org/2/reference/compound_stmts.html#function)对它们的编写方式进行了解释。

# sql-server - 两个服务器中单个 clr 存储过程产生的数据之间的冲突和差异

> ID：13265648
> 
> 赞同：1
> 
> 时间：2012-11-07T08:18:06.510
> 
> 标签：sql-server, clr

我有一个非常特殊的问题！我有一个由 Windows 应用程序调用的 clr 存储过程。当我在 sqlserver 的本地实例中执行此操作时没有任何问题。使用远程服务器执行此工作时会出现此问题。在这种情况下， clr 不能做得很好。我的输出数据错误，两台服务器的数据有很多差异。我想知道为什么这些冲突是由单个 clr sp 发生的？更多信息：我在 clr 中有一个“事务范围”。感谢您的帮助 ！

# oracle - 在过程中使用 FOR UPDATE 时应该何时提交？

> ID：13265659
> 
> 赞同：2
> 
> 时间：2012-11-07T08:19:06.570
> 
> 标签：oracle, stored-procedures, plsql, oracle10g, oracle11g

如果我在存储过程中使用 FOR UPDATE 子句，我应该什么时候“提交”？在关闭打开的光标之后还是在关闭打开的光标之前？以下是我正在使用的程序，我是否以正确的方式进行操作？

```
CREATE OR REPLACE PROCEDURE Proc_UpdateCSClientCount(inMerid     IN  VARCHAR2,
                                                     outCliCount  OUT NUMBER,
                                                     outretvalue  OUT NUMBER)
AS
   CURSOR c1 IS
      SELECT CLIENT_COUNT
        FROM OP_TMER_CONF_PARENT
       WHERE MER_ID = inMerid
      FOR UPDATE OF CLIENT_COUNT;
BEGIN
   OPEN c1;
   IF SQL%ROWCOUNT = 1 THEN
      FETCH c1 INTO outCliCount;
      outCliCount := outCliCount + 1;
      UPDATE OP_TMER_CONF_PARENT
         SET CLIENT_COUNT = outCliCount
       WHERE CURRENT OF c1;
   END IF;
   outretvalue := 0;
   CLOSE c1;
   COMMIT;
EXCEPTION
   WHEN no_data_found THEN
      outretvalue := -1;
END; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T09:24:21.907

您应该在事务结束时提交。我怀疑您能否找到一个合理的案例，即交易结束处于`FOR UPDATE`循环中间。

也许您听说过经常提交是一件好事。这是一个错误的神话，这是[完全错误](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:4951966319022)的。在 Oracle 中则相反：提交涉及额外的工作，因此您应该只在所有工作完成后才提交，而不是以前。

此外，从逻辑的角度来看，如果您可以从头开始而不是完成一半的工作，那么从错误中恢复会变得难以想象。

IMO，在程序中提交应该是非常罕见的。调用应用程序应该是进行必要检查并最终决定是否应提交数据的应用程序。

总之，您不能跨`FOR UPDATE`循环提交（它会产生一个`ORA-01002: fetch out of sequence`），这是一件好事。每当你发现自己在一个正常的循环中提交时，你应该问问自己提交是否真的有必要——很可能不是。

如果您确实需要提交*并且*只获取一次，那么在关闭游标之前或之后提交都没有关系。

* * *

**在您的代码摘录之后更新**：您的代码中有很多地方需要更正（我想它不是直接的生产代码，但仍然是）：

*   永远不会引发异常：只有隐式`SELECT INTO`可以产生`NO_DATA_FOUND`.
*   `SQL%ROWCOUNT`如果前面的语句是 NULL，则为 NULL `SELECT`。
*   您可以使用`c1%ROWCOUNT`，但这只会返回获取的行数：`0`在初始`open`.
*   我主要使用`FOR UPDATE NOWAIT`这样两个会话永远不会互相阻塞。如果你只使用`FOR UPDATE`，你还不如使用一个`UPDATE`，而不是`SELECT`预先使用。
*   这是一个偏好问题，但返回码容易出错，[通常首选异常](https://softwareengineering.stackexchange.com/questions/166039/why-are-exceptions-considered-better-than-explicit-error-testing)。让错误传播。为什么有人会在`id`不存在的情况下调用此函数？这*可能*是调用应用程序/过程中的一个错误，所以你不应该抓住它。

所以你可以像这样重写你的程序：

```
CREATE OR REPLACE PROCEDURE Proc_UpdateCSClientCount(inMerid     IN  VARCHAR2, 
                                                     outCliCount OUT NUMBER) AS
BEGIN
   -- lock the row, an exception will be raised if this row is locked
   SELECT CLIENT_COUNT + 1
     INTO outCliCount
     FROM OP_TMER_CONF_PARENT
    WHERE MER_ID = inMerid
   FOR UPDATE OF CLIENT_COUNT NOWAIT;
   -- update the row
   UPDATE OP_TMER_CONF_PARENT
      SET CLIENT_COUNT = CLIENT_COUNT + 1
    WHERE MER_ID = inMerid;
END; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T08:35:47.600

来自[Oracle 文档](http://docs.oracle.com/cd/B28359_01/appdev.111/b28370/static.htm#CIHHIIID)：

> 当您打开游标时，所有行都被锁定，而不是在获取它们时。 **当您提交或回滚事务时，这些行被解锁。** 由于不再锁定行，因此**您无法在提交后从 FOR UPDATE 游标中获取。**

这很重要。如果您在关闭游标之前或之后提交，则完成任务（完成获取）并不重要。

但是，如果需要在 fetch 之间提交，作为一种解决方法，请使用 update 和 rowid，而不是`where current of`. 来自文档的示例：

```
DECLARE
   CURSOR c1 IS SELECT last_name, job_id, rowid FROM employees;
   my_lastname   employees.last_name%TYPE;
   my_jobid      employees.job_id%TYPE;
   my_rowid      UROWID;
BEGIN
   OPEN c1;
   LOOP
      FETCH c1 INTO my_lastname, my_jobid, my_rowid;
      EXIT WHEN c1%NOTFOUND;
      UPDATE employees SET salary = salary * 1.02 WHERE rowid = my_rowid;
      -- this mimics WHERE CURRENT OF c1
      COMMIT;
   END LOOP;
   CLOSE c1;
END;
/ 
```

**更新**（编辑问题后）：您可以在单个 sql 中执行此操作，无需光标。

```
UPDATE OP_TMER_CONF_PARENT 
set CLIENT_COUNT = CLIENT_COUNT +1 
where MER_ID = inMerid; 
```

**更新2**。为了工作，代码应该更新如下：

```
...
open C1;
FETCH C1 into OUTCLICOUNT;
--dbms_output.put_line(' count:'||c1%rowcount);
IF c1%rowcount = 1 THEN
      outCliCount := outCliCount + 1;
... 
```

也就是说： fetch 应该在计算受影响的行之前完成，并且受影响的行是`c1%rowcount`，不是`sql%rowcount`。如果您想知道某行是否更新，您应该在 if 中添加一个 else 并为 outretvalue 参数分配一个特殊值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T08:33:03.550

如果您在关闭游标之前提交，然后尝试再次获取，您会收到 INVALID_CURSOR 异常。我建议在关闭光标后提交。

# android - Android Calendar API - 事件添加结果捕获

> ID：13265665
> 
> 赞同：1
> 
> 时间：2012-11-07T08:19:32.367
> 
> 标签：android, events, calendar

我正在使用 Calendar API 将事件添加到 Android 日历，但我无法检查用户是否实际添加了我的事件或取消了它。

我正在`startActivityForResult`以事件意图触发，然后我正在检查结果`onActivityResult`，但我总是得到`resultCode = 0`and `data = null`。

有没有办法获取这些数据并检查用户实际做了什么？

# javascript - 使用 jquery 动态添加选取框内容

> ID：13265666
> 
> 赞同：1
> 
> 时间：2012-11-07T08:19:54.367
> 
> 标签：javascript, jquery, html

有什么方法可以使用 jquery 添加内容，例如在 marquee 中？基本上，我想为我的网站添加不同的最新图像。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T11:13:33.473

不确定是否有一致的选框定义。在 HTML 的上下文中，我一直认为它意味着**从右到左**（或 LTR）滚动的文本。

我在评论中看到您希望项目**向上移动**。肯定有一些 JQuery 插件可以做到这一点，但你可以自己轻松地做到这一点。HTML：

```
<ul id="panel_news">
    <li>BigEvent 2012 @ Berlin, 29 Nov - 1 Dec</li>
    <li>User Group meeting hosted by ConnectUs</li>
    <li>Joan announces PXLS</li>
    <li>OpenVMS Boot Camp</li>
</ul>
<ul id="panel_news_bank" style="display: none;">
    <li>IT annual conference in Melbourne</li>
    <li>Benchmark presenation</li>
</ul> 
```

​和 JavaScript/JQuery 代码：

```
var tickerTimer = self.setInterval("ticker()", 2500);
function ticker() {
    $("#panel_news > li").first().hide(500, function() {
        var ticker_item;
        $("#panel_news > li").first().detach().appendTo("#panel_news_bank");
        ticker_item = $("#panel_news_bank > li").first().detach();
        ticker_item.appendTo("#panel_news");
        ticker_item.fadeIn(1000);
        ticker_item = null;
    });
} 
```

在行动中看到它[@jsFiddle](http://jsfiddle.net/targumon/Xs4nC/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T08:29:05.310

将此 JQuery 插件用于选取框：

[http://www.givainc.com/labs/marquee_jquery_plugin.htm](http://www.givainc.com/labs/marquee_jquery_plugin.htm)

# objective-c - 在 UIPickerView 选择数组之前按字母顺序对数组进行排序

> ID：13265667
> 
> 赞同：1
> 
> 时间：2012-11-07T08:19:58.730
> 
> 标签：objective-c, ios, arrays, sorting, uipickerview

我是 iphone 开发新手，需要一些指导才能在 iOS 中对数组进行自定义排序。我想对 UIPickerView 中出现的对象进行排序。传递给 UIPickerView 的对象在一个数组中。

当我打印出数组时，它看起来像这样：

```
 "<ObjectsInfo: 0x1c5249f0>",
    "<ObjectsInfo: 0x1c524940>",
    "<ObjectsInfo: 0x1c5248e0>",
    "<ObjectsInfo: 0x1c524890>",
    "<ObjectsInfo: 0x1c524840>",
    "<ObjectsInfo: 0x1c524a90>", 
```

当我打印出第一个对象的名称时：

```
 ObjectsInfo *object = [objectModelName objectAtIndex:1];
    NSLog(@"%@",object.str_name); 
```

它打印出来：阿尔法

给出的值是示例。我想按字母顺序对数组 objectModelName 进行排序。

我怎么做？

我试过这个：

```
[objectModelName sortUsingSelector:@selector(compare:)]; 
```

如何根据 str_name 进行自定义排序，使其按字母顺序排列？需要一些指导......非常感谢任何帮助......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T08:44:46.693

[objectModelName sortUsingSelector:@selector(compareItem:)];

在 ObjectsInfo.h 中

```
 - (NSComparisonResult)compareItem:(ObjectsInfo *)anotherItem; 
```

在 ObjectsInfo.m 中

```
 - (NSComparisonResult)compareItem:(ObjectsInfo *)anotherItem{

    return [self.str_name compare:anotherItem.str_name options:NSCaseInsensitiveSearch];

  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T08:24:03.227

试试这个。

```
NSArray *sortedArray = [objectModelName sortedArrayUsingComparator:^(ObjectsInfo *firstObject, ObjectsInfo *secondObject) {
            return [firstObject.str_name compare:secondObject.str_name];
        }]; 
```

# paypal - 贝宝高级支付流程

> ID：13265668
> 
> 赞同：2
> 
> 时间：2012-11-07T08:20:00.177
> 
> 标签：paypal

我正在尝试集成 PayPal Payments Advanced..但它返回错误..：“无效的商家信息：10501-由于商家配置无效，无法处理此交易。” 可能是什么解决方案..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-13T14:50:27.410

错误代码 10501 表示 PayPal Payments Pro 或 PayPal Payments Advanced 在您的 PayPal 帐户上未激活。您需要联系 PayPal 来解决此问题。

# magento - 结帐后出错

> ID：13265671
> 
> 赞同：1
> 
> 时间：2012-11-07T08:20:27.343
> 
> 标签：magento, checkout, magento-1.7

结束后被`checkout`重定向到`checkout / onepage / success /`，但是**报错：**

```
data_invalid

a:5:{i:0;s:12:\\\\\\\"data_invalid\\\\\\\";i:1;s:3376:\\\\\\\"#0 /var/www/app/code/core/Mage/Sales/Model/Order/Invoice/Api.php(140): Mage_Api_Model_Resource_Abstract->_fault(\\\\\\\’data_invalid\\\\\\\’, \\\\\\\’Cannot do invoi...\\\\\\\’) 
#1 /var/www/app/design/frontend/default/prosoundeffect/template/checkout/success.phtml(32): Mage_Sales_Model_Order_Invoice_Api->create(\\\\\\\’100000172\\\\\\\’, Array) 
#2 /var/www/app/code/core/Mage/Core/Block/Template.php(241): include(\\\\\\\’/var/www/www.pr...\\\\\\\’) 
#3 /var/www/app/code/core/Mage/Core/Block/Template.php(272): Mage_Core_Block_Template->fetchView(\\\\\\\’frontend/defaul...\\\\\\\’) 
#4 /var/www/app/code/core/Mage/Core/Block/Template.php(286): Mage_Core_Block_Template->renderView() 
#5 /var/www/app/code/core/Mage/Core/Block/Abstract.php(863): Mage_Core_Block_Template->_toHtml() 
#6 /var/www/app/code/core/Mage/Core/Block/Text/List.php(43): Mage_Core_Block_Abstract->toHtml() 
#7 /var/www/app/code/core/Mage/Core/Block/Abstract.php(863): Mage_Core_Block_Text_List->_toHtml() 
#8 /var/www/app/code/core/Mage/Core/Block/Abstract.php(582): Mage_Core_Block_Abstract->toHtml() 
#9 /var/www/app/code/core/Mage/Core/Block/Abstract.php(526): Mage_Core_Block_Abstract->_getChildHtml(\\\\\\\’content\\\\\\\’, true) 
#10 /var/www/app/design/frontend/default/prosoundeffect/template/page/1column.phtml(49): Mage_Core_Block_Abstract->getChildHtml(\\\\\\\’content\\\\\\\’) 
#11 /var/www/app/code/core/Mage/Core/Block/Template.php(241): include(\\\\\\\’/var/www/www.pr...\\\\\\\’) 
#12 /var/www/app/code/core/Mage/Core/Block/Template.php(272): Mage_Core_Block_Template->fetchView(\\\\\\\’frontend/defaul...\\\\\\\’) 
#13 /var/www/app/code/core/Mage/Core/Block/Template.php(286): Mage_Core_Block_Template->renderView() 
#14 /var/www/app/code/core/Mage/Core/Block/Abstract.php(863): Mage_Core_Block_Template->_toHtml() 
#15 /var/www/app/code/core/Mage/Core/Model/Layout.php(555): Mage_Core_Block_Abstract->toHtml() 
#16 /var/www/app/code/core/Mage/Core/Controller/Varien/Action.php(390): Mage_Core_Model_Layout->getOutput() 
#17 /var/www/app/code/core/Mage/Checkout/controllers/OnepageController.php(244): Mage_Core_Controller_Varien_Action->renderLayout() 
#18 /var/www/app/code/core/Mage/Core/Controller/Varien/Action.php(419): Mage_Checkout_OnepageController->successAction() 
#19 /var/www/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch(\\\\\\\’success\\\\\\\’) 
#20 /var/www/app/code/core/Mage/Core/Controller/Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http)) 
#21 /var/www/app/code/core/Mage/Core/Model/App.php(354): Mage_Core_Controller_Varien_Front->dispatch() 
#22 /var/www/app/Mage.php(683): Mage_Core_Model_App->run(Array) 
#23 /var/www/index.php(89): Mage::run(\\\\\\\’\\\\\\\’, \\\\\\\’store\\\\\\\’) 
#24 {main}\\\\\\\”;s:3:\\\\\\\"url\\\\\\\”;s:56:\\\\\\\"/checkout/onepage/success/\\\\\\\”;s:11:\\\\\\\"script_name\\\\\\\”;s:40:\\\\\\\"/index.php\\\\\\\”;s:4:\\\\\\\"skin\\\\\\\”;s:7:\\\\\\\"default\\\\\\\";}}

If i comment out the line 
if (!$order->canInvoice()) { 
$this->_fault(\\\\\\\’data_invalid\\\\\\\’, Mage::helper(\\\\\\\’sales\\\\\\\’)->__(\\\\\\\’Cannot do invoice for order.\\\\\\\’)); 
```

在`app/code/core/Mage/Sales/Model/Order/Invoice/Api.php`一切工作正常。

> 函数 QtyToInvoice 返回 0

如何解决这个问题？

# objective-c - 当我们有标题时，如何防止表格视图顶部和底部的舍入？

> ID：13265673
> 
> 赞同：0
> 
> 时间：2012-11-07T08:20:36.877
> 
> 标签：objective-c, xcode, uitableview

我在“分组”模式下有一个表格视图。我有圆角的页眉和页脚。

我想要每个 tableViewCell 之间的行分隔符

这是我得到的结果： ![在此处输入图像描述](../Images/58f3883e7c5271aea63fd652faa5e7de.png)

我最好手动编写行分隔符。我想知道这是否是设计使然，等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T08:41:15.440

在表视图属性中，您可以`Separtor`在`Attribute inspector`. 在那里你可以改变它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T08:47:07.787

添加以下代码 cellForRowAtIndexPath 代表 tableView 为everyCell创建一个1px高度和200px宽度的自定义图像视图

```
UIView *lineView = [[UIView alloc] initWithFrame:CGRectMake(0, 200,self.view.bounds.size.width, 1)];
lineView.backgroundColor = [UIColor blackColor];
[cell.contentView addSubview:lineView]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-23T20:11:25.573

在 tableview 上将 clipToBounds 设置为 no

# eclipse - 启动 Eclipse RCP 项目的配置

> ID：13265674
> 
> 赞同：0
> 
> 时间：2012-11-07T08:20:39.013
> 
> 标签：eclipse, bundle, rcp

我是 Eclipse 新手，被要求对 RCP 项目进行一些更改。现在我无法让它运行。不幸的是，我无法联系作者寻求帮助。我将不胜感激可能导致解决方案的提示。当我午餐应用程序时，我收到以下日志消息：

```
!ENTRY org.eclipse.osgi 2 0 2012-11-07 09:03:45.878
!MESSAGE One or more bundles are not resolved because the following root constraints are not resolved:
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-11-07 09:03:45.878
!MESSAGE Bundle update@plugins/org.eclipse.team.core.nl1_3.3.0.I20070607.jar was not resolved.
!SUBENTRY 2 org.eclipse.team.core.nl1 2 0 2012-11-07 09:03:45.878
!MESSAGE Missing host org.eclipse.team.core_[3.2.0,4.0.0).
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-11-07 09:03:45.878
!MESSAGE Bundle update@plugins/org.eclipse.emf.edit.ui.nl1_2.3.0.v200706262000.jar was not resolved.
!SUBENTRY 2 org.eclipse.emf.edit.ui.nl1 2 0 2012-11-07 09:03:45.878
!MESSAGE Missing host org.eclipse.emf.edit.ui_[2.0.0,4.0.0).
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-11-07 09:03:45.878
!MESSAGE Bundle update@plugins/org.eclipse.team.ui.nl1_3.3.0.I20070607.jar was not resolved.
!SUBENTRY 2 org.eclipse.team.ui.nl1 2 0 2012-11-07 09:03:45.878
!MESSAGE Missing host org.eclipse.team.ui_[3.2.0,4.0.0).
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-11-07 09:03:45.878
!MESSAGE Bundle update@plugins/org.eclipse.rcp.nl1_3.2.0.v20070612.jar was not resolved.
!SUBENTRY 2 org.eclipse.rcp.nl1 2 0 2012-11-07 09:03:45.878
!MESSAGE Missing host org.eclipse.rcp_[3.2.0,4.0.0).
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-11-07 09:03:45.878
!MESSAGE Bundle update@plugins/org.eclipse.ui.win32.nl1_3.2.100.I20070319-0010.jar was not resolved.
!SUBENTRY 2 org.eclipse.ui.win32.nl1 2 0 2012-11-07 09:03:45.878
!MESSAGE Missing host org.eclipse.ui.win32_[3.2.0,4.0.0).

!ENTRY org.eclipse.osgi 2 0 2012-11-07 09:03:45.878
!MESSAGE The following is a complete list of bundles which are not resolved, see the prior log entry for the root cause if it exists:
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-11-07 09:03:45.878
!MESSAGE Bundle update@plugins/org.eclipse.emf.edit.ui.nl1_2.3.0.v200706262000.jar [29] was not resolved.
!SUBENTRY 2 org.eclipse.emf.edit.ui.nl1 2 0 2012-11-07 09:03:45.878
!MESSAGE Missing host org.eclipse.emf.edit.ui_[2.0.0,4.0.0).
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-11-07 09:03:45.878
!MESSAGE Bundle update@plugins/org.eclipse.team.ui.nl1_3.3.0.I20070607.jar [45] was not resolved.
!SUBENTRY 2 org.eclipse.team.ui.nl1 2 0 2012-11-07 09:03:45.878
!MESSAGE Missing host org.eclipse.team.ui_[3.2.0,4.0.0).
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-11-07 09:03:45.878
!MESSAGE Bundle update@plugins/org.eclipse.ui.win32.nl1_3.2.100.I20070319-0010.jar [66] was not resolved.
!SUBENTRY 2 org.eclipse.ui.win32.nl1 2 0 2012-11-07 09:03:45.878
!MESSAGE Missing host org.eclipse.ui.win32_[3.2.0,4.0.0).
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-11-07 09:03:45.878
!MESSAGE Bundle update@plugins/org.eclipse.team.core.nl1_3.3.0.I20070607.jar [83] was not resolved.
!SUBENTRY 2 org.eclipse.team.core.nl1 2 0 2012-11-07 09:03:45.878
!MESSAGE Missing host org.eclipse.team.core_[3.2.0,4.0.0).
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-11-07 09:03:45.878
!MESSAGE Bundle update@plugins/org.eclipse.rcp.nl1_3.2.0.v20070612.jar [124] was not resolved.
!SUBENTRY 2 org.eclipse.rcp.nl1 2 0 2012-11-07 09:03:45.878
!MESSAGE Missing host org.eclipse.rcp_[3.2.0,4.0.0).

I am using a windows 7 Enterprise 64 (4GB) and Eclipse Juno 64\. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T10:25:36.880

打开启动配置（运行--> 运行配置）并选择您的启动配置。转到插件选项卡，然后单击“验证插件”。你应该在那里看到所有丢失的插件。继续添加缺少的插件。

# ios - UIDevice setOrientation:animated: 导致 EXC_BAD_ACCESS

> ID：13265676
> 
> 赞同：2
> 
> 时间：2012-11-07T08:20:44.967
> 
> 标签：ios, uikit, exc-bad-access, uidevice

我有一个提交给 iTunes 的崩溃日志。我不知道如何重现这个问题，所以我很难解决问题。

[UIDevice setOrientation:animated:] 在 iOS 6 上导致 EXC_BAD_ACCESS 崩溃。

任何建议将不胜感激！

这是崩溃日志的相关部分：

```
Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libobjc.A.dylib                 0x347d9692 objc_msgSend_stret + 18
1   CoreFoundation                  0x3641f034 _CFXNotificationPost
2   Foundation                      0x33ee1d8c -[NSNotificationCenter postNotificationName:object:userInfo:]
3   UIKit                           0x377a5c68 -[UIDevice setOrientation:animated:]
4   UIKit                           0x377a03de -[UIApplication handleEvent:withNewEvent:]
5   UIKit                           0x3779f6d0 -[UIApplication sendEvent:]
6   UIKit                           0x3779f11e _UIApplicationHandleEvent
7   GraphicsServices                0x369525a0 _PurpleEventCallback
8   GraphicsServices                0x369521ce PurpleEventCallback
9   CoreFoundation                  0x364a3170     __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__
10  CoreFoundation                  0x364a3112 __CFRunLoopDoSource1
11  CoreFoundation                  0x364a1f94 __CFRunLoopRun
12  CoreFoundation                  0x36414eb8 CFRunLoopRunSpecific
13  CoreFoundation                  0x36414d44 CFRunLoopRunInMode
14  GraphicsServices                0x369512e6 GSEventRunModal
15  UIKit                           0x377f32fc UIApplicationMain
16  MyApp                       0x0001234a main + 70
17  MyApp                       0x000122fc start + 36 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:25:46.833

我不认为这是一个搞砸的活体。我想说您忘记取消注册观察者并且它已被释放但仍计划接收通知 - 查看订阅此特定通知的任何类并查看添加/删除是否平衡

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-19T09:02:30.940

就像@Daij-Djan 已经提到的那样，它本身不可能是方向改变，因为还有一个帖子`NSNotification`并且应用程序正在崩溃。再次查看您添加的课程`NSNotificationCenter`，也许取消注册没有问题，但像[我在这里找到的帖子一样注册。](https://stackoverflow.com/a/26333917/1141395)

# c - libubox是否支持多线程

> ID：13265678
> 
> 赞同：1
> 
> 时间：2012-11-07T08:21:22.157
> 
> 标签：c, linux, openwrt

我正在使用 libubox 开发一个项目。我已经注意到 libubox 在顺序模式下而不是在多线程模式下执行函数。

有没有人可以证实这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T18:26:16.357

不，libubox 不支持多线程

在Felix（Libubox开发人员）的正当理由之后

> 2012 年 11 月 7 日下午 2:59，KALLEL Mohamed 写道：
> 
> > 你好
> > 
> > 我正在开发一个使用 libubox 的开源项目。我注意到 libubox 在单线程模式下而不是在多线程模式下执行处理程序函数。
> > 
> > 1）所以我想知道libubox是否支持在多线程模式下执行处理程序？
> > 
> > 2）如果是，如何使用 libubox 为注册的处理程序激活多线程
> > 
> > 3）如果没有。我可以在我的主程序中创建 2 个线程，然后每个线程都会调用 libubox 函数来注册处理函数。你能快速介绍一下如何使用 libubox 吗？你好，
> 
> libubox 中的 uloop 目前不是以线程安全的方式设计的。我建议只在一个线程中运行 uloop，并将接收到的事件的处理交给其他线程。这足以满足您的应用程序的需求还是您需要任何特定的更改？
> 
> 我还没有真正研究过 epoll 的线程安全使用（内部在 uloop 中使用），我只记得最近一些与内核相关的讨论指出它的线程使用可能有点棘手，因为一些竞争条件只是固定的最近。
> 
> *   菲利克斯

# search-engine - robots.txt 中的这个命令有什么作用？

> ID：13265679
> 
> 赞同：0
> 
> 时间：2012-11-07T08:21:34.543
> 
> 标签：search-engine, robots.txt

我想知道 Robots.txt 中的以下代码是做什么的。

```
User-agent: *
Disallow: /*? 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T08:27:08.340

该行告诉机器人不要在此主机上`Disallow: /*?`获取任何包含 a 的 URL 。`?`

这似乎是对[只有 Googlebot 支持](https://support.google.com/webmasters/bin/answer.py?hl=en&answer=156449&from=40367&rd=1)的官方标准的扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T05:42:11.163

请注意，[原始 robots.txt 规范](http://www.robotstxt.org/orig.html)`*`中的 不是通配符。因此，不支持各种 robots.txt 扩展名的解析器会将 解释为字符本身。`*`

对于那些解析器，规则将被解释为：“所有机器人，不要抓取**以** `*?`.

例如，这些 URL 将被阻止：

*   `example.com/*?`
*   `example.com/*?.html`
*   `example.com/*?foobar`

虽然这些 URL*不会*被阻止：

*   `example.com/foo*?`
*   `example.com/foo*?.html`
*   `example.com/foo*?foobar`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T08:39:13.000

它的意思是“禁止所有搜索引擎抓取地址栏中包含问号的页面”。因为问号用于将查询参数与脚本名称分开，它基本上会阻止您的动态内容被索引。例如`index.php`将被抓取，但`index.php?page=main`将被禁止抓取。

通常，Robots.txt 用于阻止/允许搜索引擎抓取您网站的部分内容。它可以包含三个指令：User-agent、Allow 和 Disallow。用户代理是指搜索引擎：

```
User-agent: * 
```

表示所有搜索引擎，而您也可以具体说明要禁止的特定搜索引擎。例如，要阻止 Google 将您的网站编入索引，您可以在 robots.txt 中编写：

```
User-agent: Goolge-bot 
```

[您可以在此处](http://www.robotstxt.org/db.html)找到 robots.txt 的搜索引擎列表。

Allow 和 Disallow 分别列出允许/禁止爬取的文件夹或文件。它使用正则表达式语法。

```
Disallow: / 
```

意思是“不要在我的网站上抓取任何东西”。您可以像这样组合禁止和允许：

```
User-agent: *
Allow: /*?
Disallow: *.jpg 
```

基本上意思是“允许抓取动态链接（包含问号的页面），但不允许抓取JPG图片链接”。[这是来自 Google 的 robots.txt 的更详细描述](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=156449)。

# c++ - 最小化时 DirectX 崩溃

> ID：13265681
> 
> 赞同：0
> 
> 时间：2012-11-07T08:21:37.323
> 
> 标签：c++, windows, resize, directx, directx-11

我有一个简单的 DirectX 程序，当我最小化然后取消最小化时会崩溃。

这些是我介绍的事件案例：

```
case WM_SIZING:
case WM_SIZE:
    if(engine.isReady()) engine.resizeDevice();
    if(engine.isReady()) engine.draw();
    break; 
```

调整大小大致为：

```
deviceContext->OMSetRenderTargets(0, NULL, NULL);
    ...
deviceInterface->CreateRenderTargetView( ... );
    ...
deviceContext->RSSetViewports(1, &vp);
    ...
deviceContext->OMSetRenderTargets(1, &renderTargetInterface, NULL); 
```

当我取消最小化时，代码在尝试设置后台缓冲区时死亡。这是传递值的行：
**hr=swapChain->ResizeBuffers(3, 640, 480, DXGI_FORMAT_UNKNOWN, 0);**
ResizeBuffers() 返回错误 0x887a0005

后台缓冲区代码：

```
HRESULT _setBackBuffer(const SettingsVD &settings){
    HRESULT hr;

    hr=swapChain->ResizeBuffers(settings.bufferCount, settings.width, settings.height, DXGI_FORMAT_UNKNOWN, 0);
    if(FAILED(hr)) return hr; // Dies here when UNminimizing

    ID3D11Texture2D* backBuffer=NULL;
    hr=swapChain->GetBuffer(0, __uuidof(backBuffer), (LPVOID*)&backBuffer);
    if(FAILED(hr)) return hr;

    hr=deviceInterface->CreateRenderTargetView(backBuffer, NULL, &renderTargetInterface);
    if(FAILED(hr)) return hr;

    release(backBuffer);

    return hr;
} 
```

任何人都知道为什么后台缓冲区呕吐？

*   可能与我的另一个线程有关，[DirectX Crash When Resizing Tiny](https://stackoverflow.com/questions/12949520/directx-crash-when-resizing-tiny)，但我还没有解决这个问题，所以....bump。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T02:07:08.977

只是剩下的，你应该更好地在 WM_SIZE 中单独处理最小化消息（SIZE_MINIMIZED），如果窗口被最小化，停止渲染并将 CPU 时间让给其他程序。

# c# - 更改 win 应用程序标签和文本

> ID：13265684
> 
> 赞同：2
> 
> 时间：2012-11-07T08:22:03.797
> 
> 标签：c#, winforms

我记得`VB6`我能够获得当前正在运行的软件形式的句柄，并使用一些 API 函数从外部对其进行更改。可以用c#做吗？如何？问题是该软件使用不同的语言。我想把其中的一部分改成英文。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T09:07:00.353

尝试使用`FindWindow`和`SetWindowText`来自 Win32 API：

***`FindWindow`***c#签名：

```
[DllImport("user32.dll", SetLastError = true)]
static extern IntPtr FindWindow(string lpClassName, string lpWindowName); 
```

***`SetWindowText`***c#签名：

```
[DllImport("user32.dll", SetLastError = true, CharSet = CharSet.Auto)]
public static extern bool SetWindowText(IntPtr hwnd, String lpString); 
```

和样本鳕鱼：

```
SetWindowText(Process.GetCurrentProcess().MainWindowHandle, "Hello W"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T08:47:42.773

1) 在 WinForms 中，Control 类中有一个“Handle”属性（所有控件和 Form 类都派生自它（[MSDN 文章](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.handle.aspx)）

2）在 WPF 中没有暴露 HWND 句柄，但您可以使用[WindowInteropHelper](http://msdn.microsoft.com/en-us/library/system.windows.interop.windowinterophelper.aspx)类来获取它。
你可以像这样得到它：

```
 WindowInteropHelper wih = new WindowInteropHelper(YourWindow);
        IntPtr hwndHandle = wih.Handle; 
```

# pdf - Vaadin RichTextArea 内容通过 FOP 转换为 PDF

> ID：13265687
> 
> 赞同：1
> 
> 时间：2012-11-07T08:22:23.033
> 
> 标签：pdf, vaadin, apache-fop, richtextarea

我们需要将 RichTextArea 的内容转换为具有所有格式、对齐方式、图像等的 pdf。有什么简单的方法吗？或者我们必须编写某种解析器？我们正在使用 fop 将 xml 转换为 pdf。

谢谢。此致

异常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:28:23.637

我认为您必须使用外部库，例如`iText`. 但是，您必须自己构建要发送回客户的 pdf。

因此，恕我直言，使用这种方法，无法将您的 textarea 内容按键入的方式推送，并将其转换为 pdf 文件而无需手动格式化。

问候。

# sharepoint - 搜索核心结果 Webpart-Sharepoint 2010

> ID：13265689
> 
> 赞同：1
> 
> 时间：2012-11-07T08:22:25.337
> 
> 标签：sharepoint

我研究了共享点开发，现在我正在完成我教育的最后一部分，以获得在现实生活中练习的考试，这就是我现在所做的。我正在为我正在执业的公司开发一个共享点内部网，并且我正面临以下主题---> 如何过滤掉不需要的搜索结果，以便我只在结果中获得文档而没有链接/网址？提前谢谢 =)

# c# - 如何知道派生类从基类调用/执行哪个方法

> ID：13265690
> 
> 赞同：-1
> 
> 时间：2012-11-07T08:22:30.637
> 
> 标签：c#, oop

我有一个名为**logIT的课程**

```
public class LogIT
{
    public string strMessage = string.Empty;
    public string strClassName = string.Empty;
    public string strMethodName = string.Empty;
    public LogIT()
    {
        strMethodName = new StackFrame(1).GetMethod().Name;
        strClassName = new StackFrame(1).GetMethod().DeclaringType.Name;
    }
} 
```

**另一个继承了名为“ product** ”的 LogIT 类的类

```
public class Product : LogIT
{
    public Product()
    {

    }
    public void GetProduct()
    {

    }

    public void AddEditProduct()
    {

    }
} 
```

这是我的**主要**方法：

```
static void Main(string[] args)
    {
        Product objProduct = new Product();
        objProduct.GetProduct();
    } 
```

我的问题是，当我调用**产品**类的**GetProduct**方法时，我希望调用**logit**类构造函数并知道调用了衍生类的哪个**方法**。

请建议如何完成它或任何其他替代方法。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T08:47:38.070

这是迄今为止我见过的最奇怪的代码......

当您实例化 Product 类时，构造函数只执行一次。

尝试改用以下代码：

```
public class LogIT
{
    public string strMessage = string.Empty;
    public string strClassName = string.Empty;
    public string strMethodName = string.Empty; 

    public void LogStackTrace()
    {
        strMethodName = new StackFrame(1).GetMethod().Name;
        strClassName = new StackFrame(1).GetMethod().DeclaringType.Name;
    }
}

public class Product : LogIT
{
    public Product()
    {

    }
    public void GetProduct()
    {
        base.LogStackTrace();
    }

    public void AddEditProduct()
    {

    }
} 
```

# php - 一台特定机器上的 Symfony2 会话丢失

> ID：13265691
> 
> 赞同：2
> 
> 时间：2012-11-07T08:22:35.760
> 
> 标签：php, session, symfony, liipimaginebundle

我在我的一台开发机器上不断丢失会话。起初它会在几个随机时刻发生，但问题变得更糟，现在它在登录后立即发生。

我可以看到登陆网站时创建了一个会话文件，登录时创建了一个（包含适当的角色等），之后直接创建了一个（没有身份验证信息）有效地将我注销。

它只发生在一台开发机器上，在另一台开发机器和生产中一切都很好。

有人有线索吗？

**更新：**

原来LIIPImagineBundle 以某种方式破坏了我的设置。只要我不为捆绑包创建可写文件夹（/media/cache），一切都很好（除了图像）。一旦我创建了文件夹，一切都会再次中断。有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:54:57.693

我猜你的服务器会话服务器参数值很低。您需要增加这些参数的值。

考虑检查以下参数值

*   session.gc-maxlifetime
*   session.cache_expire

如何增加价值：

```
ini_set('session.gc_maxlifetime', 60*60*22); //22h 
```

更多讨论和解释可以在[这里找到](https://stackoverflow.com/questions/1516266/how-long-will-my-session-last)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T12:33:21.287

几周前有这个问题，在其他一些计算机上是相当随机的。无法修复它，我切换到基于数据库的会话存储，此后没有任何问题。

# c# - 登录页面 C#（不一致）

> ID：13265694
> 
> 赞同：0
> 
> 时间：2012-11-07T08:22:48.267
> 
> 标签：c#, visual-studio-2010, passwords

我正在做一个使用控制器和登录表单的登录页面。当我输入无效的用户名时，我无法登录。但是当我输入我的用户名和错误的密码时..我被允许登录。我的代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T08:39:14.930

你所有的方法都可以像这样

登录方式

```
public bool Login(string username, string password)
{
   User[] userList = GetAllUsers();
   for (int i = 0; i < rows.Count; ++i)
        {
            if (user[i].GetUsername() == username && user[i].GetPassword == password)
            {
              return true;                
            }
        }
        return false;
} 
```

登录按钮点击

```
private void LoginButton_Click(object sender, EventArgs e)
    {
        string userName = this.LoginUsernameTextBox.Text;
        string passwd = this.LoginPasswordTextBox.Text;       

        if (Login(userName, passwd))
        { 
            MessageBox.Show("Login Successfully");
        }
        else
        {
            MessageBox.Show("Login Unsuccessfully!");
        }   
    } 
```

但我建议你不要让所有用户都离开数据库。您必须创建通过 Query 搜索用户的方法

# bash - bash 重定向与另一个命令的结果

> ID：13265697
> 
> 赞同：2
> 
> 时间：2012-11-07T08:22:57.193
> 
> 标签：bash, shell

这个命令效果很好。

```
bash < <(echo 'ls') 
```

这段代码是如何工作的？
我无法理解这个脚本的内部过程。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T08:28:08.280

***<(anycmd)使用******anycmd***的输出创建一个临时文件

 *****anycmd <***正在运行***anycmd ，其标准输入来自******<***右侧的文件

 **所以你的命令相当于

```
tmpf=$(mktemp)
echo 'ls' > $tmpf
bash < $tmpf
unlink $tmpf 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T08:56:18.387

`<(echo 'stuff')`称为*进程替换*。它使用命名管道（或 FIFO）来管道命令的输出（尽管确切的机制取决于系统）。您可以在可以使用文件名的任何地方使用此构造*，因此：

```
program < <(command) 
```

我们从*command*获取输出并将其传递给*program*的标准输入流。

*anywhere：一些程序使用一种称为*内存映射*的技术（请参阅 参考资料`man 2 mmap`），该技术不能用于命名管道。一个写得好的程序会事先检查文件类型，不幸的是不是所有的程序都写得很好......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T08:25:11.467

`echo ls`产生`ls`. `<( ... )`创建一个包含它的文件。`<`将此文件发送到 的标准输入`bash`，使其`bash`运行。****

# spring - 骆驼生产者模板未在spring MVC中注入

> ID：13265703
> 
> 赞同：3
> 
> 时间：2012-11-07T08:23:49.113
> 
> 标签：spring, model-view-controller, apache-camel

我在我的项目中使用 Spring MVC 和 Camel，但遇到了 producerTemplate 无法自动装配的问题。请检查下面的详细信息，

文件 web.xml：

```
<context-param>
 <param-name>contextConfigLocation</param-name>
   <param-value>/WEB-INF/dispatcher-servlet.xml</param-value>
</context-param> 
```

文件 ispatcher-servlet.xml

```
<import resource="camel-config.xml"/> 
```

文件camel-config.xml，定义camelContext

```
<context:component-scan base-package="com.myproject.camel.routes"/>
<camelContext xmlns="http://camel.apache.org/schema/spring" id="myproject.camel">
     <contextScan/>
 <template id="producerTemplate"/>
</camelContext> 
```

这是我的 JAVA 课程：

```
package com.myproject.connector.camel;
public class CamelConnectorImp{
    @Autowired
    private ProducerTemplate producerTemplate; //This is null after starting
    producerTemplate.requestBodyAndHeaders(serviceEndpoint,request, headers);
...
} 
```

有人可以指出我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T10:06:44.487

您可能需要确保 CammelConnectorImp 是 Spring 的已知 bean。

```
@Bean
public class CamelConnectorImp{ .. 
```

**（更新：）**

您可能也应该扫描这个 pojo，以便获取 @Bean：

```
<context:component-scan base-package="com.myproject.camel.routes,com.myproject.connector.camel"/> 
```

或类似的东西可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T10:29:12.660

好的，我终于想通了。原因是，我没有在 Application 上下文中使用 bean，而是通过这种方式创建了该连接器，

```
IConnector connector = new CamelConnectorImp(); 
```

这是错误的，难怪camelContext不在这个实例中。

我的错。

# c# - 从数据库 smallint 到 C# nullable int 的转换错误

> ID：13265704
> 
> 赞同：2
> 
> 时间：2012-11-07T08:23:50.867
> 
> 标签：c#, .net, ado.net

我在数据类型的数据库中有一个 security_role_cd 列`smallint`。我正在使用以下代码将此列选择到`nullable int`变量中。

我收到以下错误：

> 错误 3 无法确定条件表达式的类型，因为 'null' 和 'short' 之间没有隐式转换

克服此错误的正确代码是什么？

```
SELECT R.security_role_cd  FROM Security_Role R WHERE security_role_name = 'Admin' 
```

C＃

```
 int? roleID = null;
        string commandText = "SELECT R.security_role_cd  FROM Security_Role R WHERE security_role_name = @roleName";
        SqlCommand command = new SqlCommand(commandText, connection);
        command.CommandType = System.Data.CommandType.Text;
        command.Parameters.AddWithValue("@roleName",roleName);
        SqlDataReader readerRole = command.ExecuteReader();
        if (readerRole.HasRows)
        {
            while (readerRole.Read())
            {
                roleID = readerRole.GetInt16(0) == 0 ? null : readerRole.GetInt16(0) ;

            }
        }
        readerRole.Close(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T08:26:02.990

它只需要知道如何*输入*：`null`

```
roleID = readerRole.GetInt16(0) == 0 ? (int?)null : (int)readerRole.GetInt16(0); 
```

我个人会缓存该值：

```
int tmp = readerRole.GetInt16(0); // implicit widening to int here
roleID = tmp == 0 ? (int?)null : tmp; 
```

尽管我也会怀疑将 a`0`变成`null`更好用的智慧，`IsDBNull`例如：

```
if(reader.IsDBNull(0)) {
    roleID = null;
} else {
    roleID = (int)readerRole.GetInt16(0);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T08:26:36.187

试试这个

```
roleID = readerRole.GetInt16(0) == 0 ? (int?) null : readerRole.GetInt16(0) ; 
```

根据三元运算符的文档，冒号 (:) 两边的数据类型必须相同。由于您没有强制转换，因此无法确定 null 的类型（即，如果为 nullable int、null string 或 null object）

**更新**

```
roleID = readerRole.GetInt16(0) == 0 ? (int?) null : readerRole.GetInt32(0) ; 
```

# eclipse - Tomcat 无法锁定日志文件

> ID：13265708
> 
> 赞同：0
> 
> 时间：2012-11-07T08:24:13.853
> 
> 标签：eclipse, tomcat, ioexception

我有一个 Vaadin 项目，并且在某些文件夹中有一些资源要管理。例如，我有一个自定义记录器，我想将该日志保存在 WebContent/WEB-INF 文件夹中，但是当我创建文件处理程序时出现此错误：

```
java.io.IOException: Couldn't get lock for pathtofile 
```

这就是我创建 FileHandler 的方式：

```
String baseDir = getContext().getBaseDirectory().getPath();
String path = URLDecoder.decode(baseDir + File.separator + "WEB-INF"+ File.separator + logsPath + File.separator + logName, "UTF-8");
handler = new FileHandler(path, true); 
```

其中 logsPath 是正确加载的属性。当我从调试检查路径字符串是好的。我从 Eclipse 启动应用程序。我注意到eclipse为运行应用程序创建的tmp0文件夹是只读的，对吗？为什么我得到那个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T07:41:26.107

已解决：我在 WebContent 文件夹下创建了一个“logs”文件夹，并在其中放入了一个空文件，因为 Tomcat 不部署空文件夹。

# jakarta-ee - Struts1中，如何在JSP中访问ActionMapping参数

> ID：13265710
> 
> 赞同：0
> 
> 时间：2012-11-07T08:24:15.663
> 
> 标签：jakarta-ee, web, struts1

从问题出发

[在 Struts1 中，如何在 action 标签中使用 set-property 标签？](https://stackoverflow.com/q/13248696/1307229)

使用`set-property`标签时，其值映射到扩展的 ActionMapping 类中的属性。有没有办法在 JSP 中访问这个属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T08:34:32.663

您可以使用`bean:struts`标签：

```
<bean:struts id="myActionMapping" mapping="/myAction" /> 
```

定义后，您可以直接在`myActionMapping`JSP bean 上访问属性：

```
<bean:write name="myActionMapping" property="task" /> 
```

或者，使用 EL：

```
${myActionMapping.task} 
```

参考：[struts-bean.tld](http://struts.apache.org/1.3.10/struts-taglib/tagreference.html#struts-bean.tld)

# c# - 更新列表中的字符串

> ID：13265713
> 
> 赞同：-2
> 
> 时间：2012-11-07T08:24:28.763
> 
> 标签：c#

我已将一个 txt 逗号分隔到多个列表中。例如

```
static public void File()    
{    
    var order_no = new List<String>();    
    var quantity = new List<String>();    
    order_no.Add(fields[0]);    
    quantity.Add(fields[1]);    
} 
```

现在我想要的是在一个循环中，同时在列表中找到相同的订单并且数量为空，然后更新前一个中的数量。

例如

> 订单编号：1 数量：空
> 
> 订单编号：5 数量：2
> 
> 订单号：1 数量：1

它应该做的是将第一个值中的数量更新为1。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T08:35:37.880

你应该为此使用[字典](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)

```
Dictionary<string, string> orders = new Dictionary<string, string>();
if (orders.ContainsKey(field[0]))
{
    if (String.IsNullOrEmpty(orders[field[0]]))
    {
        orders[field[0]] = field[1];
    }
}
else
{
    orders.Add(field[0], field[1]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T08:36:19.360

我个人更喜欢 a `Dictionary<String, String>`，因为这些对在逻辑上属于一起（每个订单一个数量）。但是没问题...

您可以按 order_no 分组并仅选择一个非空值（如果有）：

```
var orderGroups = order_no
    .Select((order, index) => new { 
         order, index,
         quantity = quantity.ElementAtOrDefault(index)
     })
    .GroupBy(x => x.order)
    .Where(g => g.Count() > 1);
foreach(var og in orderGroups)
{
    var firstNotNull = og.FirstOrDefault(x => x.quantity != null);
    if (firstNotNull != null)
    {
        var allIndices = og.Select(x => x.index);
        foreach (int index in allIndices)
            quantity[index] = firstNotNull.quantity;
    }
} 
```

如果您不想要第一个非空数量而是最高数量，请更改以下行：

```
var firstNotNull = og.Where(x => x.quantity != null)
                     .OrderByDescending(x => int.Parse(x.quantity))
                     .FirstOrDefault(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T08:36:37.360

如果您的订单号是唯一的，您可以使用字典：

```
var orders = new Dictionary<string, string>();

// This I assume is your file reading magic
foreach (line in lines)
{
    fields = line.Split(' ');

    if (!orders.ContainsKey(fields[0])
    {
        orders.Add(fields[0], fields[1]);
    }
    else
    {
        orders[fields[0]] = fields[1];
    }
} 
```

# asp.net-mvc-3 - 使用日期转换

> ID：13265719
> 
> 赞同：0
> 
> 时间：2012-11-07T08:24:53.227
> 
> 标签：asp.net-mvc-3, razor

我正在创建自己的日期时间选择器。我想按日期格式显示日期。日期格式包括“MM-dd-yyyy”等格式。

我写的代码如下：

```
public DateTime getCurrentDate(string dateFormat)
{            
     curDate = DateTime.Now;            
     IFormatProvider theCultureInfo = new System.Globalization.CultureInfo("en-us", true);
     return DateTime.ParseExact(curDate.ToShortDateString(), dateformat, theCultureInfo); 
} 
```

当我执行程序时，它显示：字符串未被识别为有效的日期时间。

为我提供一些解决错误的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T09:16:49.370

`DateTime.ParseExact`方法需要`format of the string`与`specified format exactly`. 所以 DateTime.ParseExact(s,format,provider) 期望两者`s`（由提供者指定）并且`format`具有相同的格式，否则它会抛出`String not recognized as a valid DateTime`

在你的情况下 dateFormat 必须是

```
DateTime y = getCurrentDate("dd/MM/yyyy"); //or
DateTime x = getCurrentDate("MM/dd/yyyy"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T05:13:34.547

终于，我明白了..我解决了这样的问题..

```
 public string getCurrentDate(string dateFormat)
 {
     curDate = DateTime.Now.ToShortDateString();
     curDate = String.Format("{0:" + dateFormat + "}", Convert.ToDateTime(curDate));
     return curDate;
 } 
```

# php - 通过 JSON 将数据 Python 传递给 PHP

> ID：13265726
> 
> 赞同：4
> 
> 时间：2012-11-07T08:25:46.083
> 
> 标签：php, python, json, post, http-post

我的项目的范围是将某些值从 python 脚本传递到远程 php 脚本。

我有一个生成关联数组的 python 脚本。例如（已经 JSON 编码）：

```
{"FRONT": "19.50", "RACK": "17.63", "REAR": "21.06", "ROOM": "15.6"} 
```

我需要将此关联数组传递给我遵循本教程的远程 PHP 脚本：http: [//nonstopblah.wordpress.com/2010/07/13/python-to-php-via-json/](http://nonstopblah.wordpress.com/2010/07/13/python-to-php-via-json/)

我得到 200 的 HTTP 响应，但在 php 脚本中 POST 变量似乎为空

这是我的代码：

```
bulkData = json.dumps(temp, ensure_ascii = 'False')
# ensure_ascii is false as data is in unicode and not ascii encoding , use this if data is in any other encoding
print bulkData

print '\nHTTP Response'

headers = { "charset":"utf-8",
"Accept": "text/plain"}
conn = httplib.HTTPConnection(report_host)
postData = urllib.urlencode({'results':bulkData})
conn.request("POST", report_path, postData,headers)
response = conn.getresponse()
text = response.read()
print "Response status: ",response.status,"\n",text
conn.close() 
```

这是 PHP 脚本：

```
if( isset($_POST['results']) )
{
    $data = json_decode($_POST['results']);

    print_r($data);
}
else
{
    echo 'Nothing to listen.';
    print_r($_POST);
} 
```

这是我的python脚本的输出（带有远程响应）：

```
{"FRONT": "20.44", "RACK": "18.88", "REAR": "21.25", "ROOM": "17.7"}

HTTP Response
Response status:  200 
Nothing to listen.Array
(
) 
```

有更聪明的方法吗？我在这里想念什么？

预先感谢您的友好回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T08:51:17.370

我会跳过 urlencoded 表单数据。只需在正文中发送原始数据：

```
conn.request("POST", report_path, bulkData,headers) 
```

然后您可以使用以下命令在 PHP 中读取请求正文：

```
<?
$data = json_decode(file_get_contents('php://input'));
?> 
```

bulkData 字符串将在您的 php 脚本中到达。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T08:58:32.090

我用一个非常简单的 PHP CGI 在本地对此进行了测试，只需要几秒钟的调试就可以找出问题所在：

您正在发送 URL 编码的数据，但您没有正确设置 Content-Type。至少对于 OS X 10.7 上配置的 apache2，这意味着 CGI 将数据视为一个大字符串，而不是一堆变量。显然，该字符串没有“结果”成员。

添加`'Content-Type': 'application/x-www-form-urlencoded'`到您的标题可以解决问题。或者，您可以配置您的 Web 服务器以推断 POST 到的默认内容类型，例如，`/cgi-bin/*`具有相同的净效果。

然而，真正的问题是为什么你首先要对数据进行 JSON 编码和 URL 编码。他们都做类似的事情。由于您的`temp`对象只是`dict`包含所有键和值的字符串，因此您只需对其进行 URL 编码，而无需使用 JSON。或者，或者，只需采用 JSON 编码`bulkData`并将其作为 POST 数据原样发送（理想情况下使用`'Content-Type': 'application/json'`，尽管由于您要明确地读取数据并调用`json_decode`它，这并不是绝对必要的）。

# java - wowza java cpu使用率高

> ID：13265727
> 
> 赞同：1
> 
> 时间：2012-11-07T08:25:48.140
> 
> 标签：java, multithreading, cpu, wowza, mina

我对 wowza 中的 cpu 使用有疑问。

这是一个可疑的线程。这个线程占用了很高的cpu。

```
SocketAcceptorIoProcessor-1.0 prio=10 tid=0x0000002a9fb53000 nid=0x2428 runnable         [0x000000004f017000]
java.lang.Thread.State: RUNNABLE
at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)
at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:210)
at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:65)
at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:69)
- locked <0x00000007d82ba4e8> (a sun.nio.ch.Util$2)
- locked <0x00000007d82ba4d8> (a java.util.Collections$UnmodifiableSet)
- locked <0x00000007d82ad450> (a sun.nio.ch.EPollSelectorImpl)
at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:80)
at org.apache.mina.transport.socket.nio.SocketIoProcessor$Worker.run(Unknown Source)
at org.apache.mina.util.NamePreservingRunnable.run(Unknown Source)
at java.lang.Thread.run(Thread.java:662) 
```

这个线程占用了很高的cpu。这是jdk错误还是其他？

这是我的环境。

CentOS 5.4 版（最终版）

WowzaMediaServer-3.1.2

java 版本 1.6.0_23 Java(TM) SE Runtime Environment (build 1.6.0_23-b05) Java HotSpot(TM) 64-Bit Server VM (build 19.0-b09, 混合模式)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T08:47:41.187

我会首先检查它是否真的在消耗 CPU。如果您正在分析应用程序，它可能会在此方法中花费大量时间，而该方法实际上是阻塞的。大多数分析器在区分在本机代码中花费大量时间（消耗大量 CPU）和阻塞（消耗很少 CPU）的方法之间存在问题

旧版本的 Java 存在可能导致选择器旋转的错误。即它在繁忙的循环中保持不返回任何选择器而不会阻塞，即使它仍然可以正常工作。我相信较新版本的 Java 已修复此问题。我会尝试 Java 6 update 35 或 Java 7 update 7 看看它是否能解决您的问题。

如果连接少于几百个，我更喜欢使用阻塞 NIO，因为它更简单恕我直言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-16T11:29:07.807

我遇到了同样的问题，我通过停止 ntp 服务修复它并手动设置 DATE 并重新启动 ntp 服务：

```
 /etc/init.d/ntp stop
        date -s "$(date)"
        /etc/init.d/ntp start 
```

# eclipse - 为 Eclipse 的 HTML 编辑器创建自定义代码完成

> ID：13265731
> 
> 赞同：0
> 
> 时间：2012-11-07T08:26:10.747
> 
> 标签：eclipse, eclipse-plugin, code-completion, html-editor

我想在 Eclipse 的**HTML 编辑器**（插件`org.eclipse.wst.html.ui`）弹出的代码完成中添加一些自定义结果，但是在 jar 的 plugin.xml 文件中，我只找到了一个扩展点，由于没有架构，它似乎已被弃用无论如何都在jar中的文件。

```
<extension-point id="deviceProfileEntryProvider" 
          name="%Device_Profile_Entry_Provider_Extension.name"     
          schema="schema/deviceProfileEntryProvider.exsd"/> 
```

**1) 是否可以将此类功能添加到 HTML 编辑器？**

假设不可能做到这一点，我在 jar 中“破解”并在 plugin.XML 中添加了以下几行（添加了我自己的新提案计算机）

```
 <proposalComputer activate="false" categoryId="org.eclipse.wst.html.ui.proposalCategory.htmlTemplates"
      class="org.eclipse.wst.html.ui.internal.contentassist.Custom"
      id="org.eclipse.wst.html.ui.proposalComputer.htmlTemplates">
   <contentType id="org.eclipse.wst.html.core.htmlsource">
      <partitionType id="org.eclipse.wst.html.HTML_DEFAULT"/>
   </contentType>
 </proposalComputer> 
```

这是 xml 文件中已存在的提案计算机的复制粘贴。我只更改了类以映射到我的自定义类（org.eclipse.wst.html.ui.internal.contentassist.Custom）

然后我创建了一个名为 的类`Custom`，对其进行编译并将其添加到 jar 中（在由包名称表示的相应目录中）

```
package org.eclipse.wst.html.ui.internal.contentassist;
import java.util.*;
import org.eclipse.core.runtime.IProgressMonitor;
import org.eclipse.jdt.internal.ui.text.javadoc.HTMLTagCompletionProposalComputer;
import org.eclipse.jdt.ui.text.java.ContentAssistInvocationContext;
import org.eclipse.jface.text.contentassist.CompletionProposal;
import org.eclipse.jface.text.contentassist.ICompletionProposal;
import org.eclipse.jface.text.contentassist.IContextInformation;

public class Custom extends HTMLTagCompletionProposalComputer{

@Override
public List<ICompletionProposal> computeCompletionProposals(
        ContentAssistInvocationContext context, IProgressMonitor monitor) {
    return Arrays.asList(new ICompletionProposal[]{
                new CompletionProposal("Asd",context.getInvocationOffset(),0,0),
                new CompletionProposal("sdf",context.getInvocationOffset(),0,0)}
            );
}

@Override
public List<IContextInformation> computeContextInformation(
        ContentAssistInvocationContext context, IProgressMonitor monitor) {
    return null; 
}

@Override
public String getErrorMessage() { return super.getErrorMessage(); }

@Override
public void sessionEnded() {super.sessionEnded();}

@Override
public void sessionStarted() {super.sessionStarted();}

} 
```

...但不幸的是，它没有用。

**2）任何想法我在这里做错了什么并且它不起作用？**

谢谢！

# networking - 如果接收进程停止或挂起，TCP 连接会发生什么？

> ID：13265732
> 
> 赞同：3
> 
> 时间：2012-11-07T08:26:16.937
> 
> 标签：networking, tcp

例如，在 TCP Tahoe 连接中，如果发生大文件传输。突然接收进程或主机关闭或挂起，我知道我们将有一个超时，此时窗口大小将被重置等。据我了解，我们将重新发送未确认的数据包，然后再试一次，并可能再次？

不过，我想知道，在这样的超时之后，在假定接收器不再存在并且数据将停止发送之前，数据将被重新发送多少次。如果进程从挂起状态恢复，它是否能够继续接收数据？

我知道在三次重复确认或超时后重新传输数据。但是，如果多次重新传输失败，或者接收进程突然停止接收，我找不到太多可阅读的内容。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-07T09:03:57.137

如果接收进程退出或被杀死，则其末端的套接字将被关闭。当发送方继续发送数据包时，应该提示RST数据包，这将立即导致错误（ECONNRESET）。

如果接收主机干净关闭，它应该杀死所有进程，这将导致上述情况发生。

如果接收主机和进程都处于活动状态，但进程处于挂起状态（例如 Ctl-z），则在 TCP 级别不会检测到问题。窗口最终会填满，但接收系统将继续确认零窗口探测。要检测这种情况，您需要一个应用层的保活机制。

如果接收主机崩溃、断电，或者它的网络连接失败，这就是重传超时变得相关的时候。重传的次数和频率取决于实现，也可以由系统配置参数控制。我不知道什么是典型参数。

如果接收系统在超时发生之前重启，它会以 RST 数据包响应下一次重传，这将导致 ECONNRESET 错误。

# javascript - jquery将选择更改为复选框

> ID：13265735
> 
> 赞同：-1
> 
> 时间：2012-11-07T08:26:25.050
> 
> 标签：javascript, jquery, html

在我的表单中，我想通过单击链接更改选择复选框列表，选择与前一个选择相同。我已经使用了显示/隐藏 div，但问题是隐藏部分的选择仍然处于活动状态并且会弄乱结果。所以我不知道如何处理这个问题，这就是我请求你帮助的原因。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T08:33:15.917

您可以在隐藏时简单地禁用元素，然后将不会发布禁用元素的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T08:36:33.720

您可以禁用元素选择，也可以删除其名称属性。这是一个示例片段：

```
$('#mylink').click(function(e){
    e.preventDefault();
    $('#myselect').prop('disabled','disabled').hide();
    $('#myselect option').each(function(){
         $('#mylist').append('<input type="checkbox" value="'+$(this).val()+'">'+$(this).val()+'</input>');
    });
}); 
```

# c# - 删除执行文件其本身和文件夹的技术

> ID：13265743
> 
> 赞同：1
> 
> 时间：2012-11-07T08:26:58.557
> 
> 标签：c#, directory, delete-file

我正在开发一个程序，它会为卸载程序删除执行文件本身。因为这也是这个网站经常讨论的主题，所以我很容易找到了方法。

答案之一是-> [http://www.codeproject.com/Articles/31454/How-To-Make-Your-Application-Delete-Itself-Immedia](http://www.codeproject.com/Articles/31454/How-To-Make-Your-Application-Delete-Itself-Immedia)。我提到了这个并写了它。

```
string dir = Path.GetDirectoryName(Application.ExecutablePath);
ProcessStartInfo psi = new ProcessStartInfo();
psi.WindowStyle = ProcessWindowStyle.Hidden;
psi.FileName = "cmd";
psi.Arguments = "/C rmdir /s /q \"" + dir + "\"";
Process p = Process.Start(psi);
Application.Exit(); 
```

删除其文件成功，另一方面，该文件夹未删除。虽然我也想删除一个包含它的文件夹，但有什么好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:56:14.290

您不能使用 rmdir 删除当前目录，如此[处](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/rmdir.mspx?mfr=true)。我自己根本没有尝试过这种技术......但也许导航到一个目录然后再​​试一次？

# iphone - 如何在我的方法中获取 objectAtIndex？

> ID：13265744
> 
> 赞同：0
> 
> 时间：2012-11-07T08:27:06.827
> 
> 标签：iphone, ios

我怎样才能进入`objectAtIndex`我的方法。

例如，如果我使用`didSelectRowAtIndexPath:(NSIndexPath *)indexPath`

我可以得到它

```
 NSLog(@"%@", [currentCourses objectAtIndex:indexPath.row]); 
```

我怎么能在这样的其他方法中做同样的事情？

```
-(void)longPress : (UILongPressGestureRecognizer *)rec {
if (rec.state == UIGestureRecognizerStateBegan) {
 //   NSIndexPath *myPath = [NSIndexPath indexPathForRow:0 inSection:0];
    /*NSArray *currentCourses = [self currentCourses:myIP0.section];
    billContent *bc = [currentCourses objectAtIndex:myIP0.section];
    NSLog(@"title - %@", bc.billTitle);*/
  //  NSLog(@"%@", myPath.row);

  //NSLog(@"did selected - %d", indexPath.row);

}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T08:36:32.563

```
-(void)longPress : (UILongPressGestureRecognizer *)rec {
CGPoint swipeLocation = [rec locationInView:self.tableView];
NSIndexPath *swipedIndexPath = [self.tableView indexPathForRowAtPoint:swipeLocation];
UITableViewCell *swipedCell = [self.tableView cellForRowAtIndexPath:swipedIndexPath];
} 
```

# jquery - 创建的 jQuery 元素不是 jQuery 样式

> ID：13265747
> 
> 赞同：0
> 
> 时间：2012-11-07T08:27:24.037
> 
> 标签：jquery, styles

我是所有 JavaScript 和 jQuery-Stuff 的新手。请原谅我的编码或肮脏风格的任何愚蠢错误。我很高兴收到您经验丰富的所有建设性反馈。

我尝试动态添加一些 jQuery 元素，比如一些新的选择菜单。在我的示例中，用户将决定他想要定制多少辆汽车，并在此基础上为每辆选择的汽车创建一个新的选择菜单。

我让它工作，如果用户选择“2 辆车”，jQuery 将添加两个新的选择菜单。但我的问题是这些菜单不再是 jQuery 样式了。

我在这里做错了什么？是否也可以根据选择的汽车数量在“for-loop”中添加新菜单？

这是我的代码：

```
<script type="text/javascript">

    $('#select-choice-1').live( "change", function(event, ui) {
        var valuee = $(this).val();

        if (valuee == '2') ($('<label for="select-choice-2" class="select">Color of car #1</label>' +
                                          '<select name="select-choice-2" id="select-choice-2">'+
                                          '<option value="red">red</option>'+
                                          '<option value="blue">blue</option>'+
                                          '</select><br><br>' +
                              '<label for="select-choice-3" class="select">Color of car #2</label>' +
                                          '<select name="select-choice-3" id="select-choice-3">'+
                                          '<option value="green">green</option>'+
                                          '<option value="yellow">yellow</option>'+
                                          '</select>').appendTo('#site'));
        if (valuee == '3') ($('<h1>Test</h1>').appendTo('#site'));

    });
    </script> 
```

这是html页面：

```
<div id="site" data-role="fieldcontain">    

    <label for="select-choice-1" class="select">Number of cars</label>
    <select name="select-choice-1" id="select-choice-1">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
    </select>

    </div><!-- "site" --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T08:34:58.427

```
 $('#site').delegate("#select-choice-1", "change", function(event, ui) {
           var valuee = $(this).val();
           var constructhtml = '';
             if (valuee == '2') {
               constructhtml +='<label for="select-choice-2" class="select">Color of car #1</label>' +   '<select name="select-choice-2" id="select-choice-2">'+ '<option value="red">red</option>'+ '<option value="blue">blue</option>'+ '</select><br><br>' + '<label for="select-choice-3" class="select">Color of car #2</label>' + '<select name="select-choice-3" id="select-choice-3">'+ '<option value="green">green</option>'+ '<option value="yellow">yellow</option>'+ '</select>';
             }else if (valuee == '3') {
               constructhtml +='<h1>Test</h1>';
             }
    $('#site').append(constructhtml);
     }); 
```

OP 需要创建一个动态添加的选择菜单

将此 div 放在页面的最底部

```
<div id="selectcontainer"></div>

$(document).ready(function(){

var str = '';
str+='<select>';
   for(i=1;i<=10;i++){
    str+='<option value='"+i+"'>'"+i+"'</option>';

  }   
str+='</select>';
 $('#selectcontainer').html(str);
}); 
```

# php - 数组或非数组 [PHP]

> ID：13265751
> 
> 赞同：-1
> 
> 时间：2012-11-07T08:28:06.270
> 
> 标签：php, architecture, high-load

我想为我的系统实施电子邮件黑名单。在该列表中，我想存储无法送达的电子邮件。

当我的系统无法发送电子邮件时，我想保存它，以后再也不会发送它们。

我可以看到两种可能最简单的解决方案：

当收件人不存在时，

1.  我可以在用户表中设置标记
2.  或在特定表中收集此类不良电子邮件

在我看来，第二个解决方案更简单（因为更容易被缓存），但是有一个关于选择方法的问题......

在 MyMail 功能中，我将首先调用在不良电子邮件列表（表）中搜索当前电子邮件，然后如果不存在则将其发送出去，否则取消发送。

所以主要问题是什么可以更快： 1\. 每次向数据库查询以搜索特定的键，例如，`SELECT 1 FROM table WHERE email='checking_email'`。当然，该表将只有一个字段`email`，并且该字段将被索引（唯一）。我只会使用严格的比较。2.或将该表内容缓存在一个数组中并查询数组以检查特定元素|键是否存在？

如果错误的电子邮件列表可能很长，例如 1000 万条记录。

什么会更快？更适合高负载项目？

PS 我知道 PHP 数组会占用太多内存，但是在开始发送时事通讯时进行大量 DB 查询也不是很好。

PPS 我将把坏邮件缓存在一个变量中，这就是为什么在 PHP 中它会以数组的形式出现。

PPS 另一种方法是在每个缓存键中缓存每封坏电子邮件，并仅检查缓存中是否存在此类键，但在这种情况下，清除缓存会更加复杂。我认为这是最好的解决方案。缓存中的键可以是 bad_email_。该预发送调用的逻辑可能是：检查缓存中是否存在所需的电子邮件，如果不存在，则检查数据库，如果它不存在并且也存在，那么它就是好电子邮件。从另一个角度来看，如果系统检测到错误的电子邮件，那么它将同时保存在数据库和缓存中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T08:36:47.723

与其担心数组中的*查找*是否更快，不如担心将存储该数组的位置。它需要在脚本未运行时在某处进行序列化，然后在需要时将其加载到内存中。在这样做的时间里，您可能已经对数据库运行了数千个查询。如果您的数组可能真的增长到数百万个条目，那么纯 PHP 数组是一个糟糕的解决方案。

如果您担心对数据库的查询过多，请将它们批处理。一次查询数百或数千封电子邮件。使用准备好的语句，这会更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T08:39:49.247

我肯定会使用某种缓存。如果您可以探索更多选项，我建议您使用 Redis（内存中的键/值数据库），它几乎就是为这种目的而设计的，而且速度非常快。[http://redis.io/](http://redis.io/)

# iphone - 在ios中准确地将长字符串转换为数字

> ID：13265756
> 
> 赞同：0
> 
> 时间：2012-11-07T08:28:26.137
> 
> 标签：iphone, ios

让我的字符串在转换为 77777788928 后浮动为 77777788888。但我想要准确的数字

我已经尝试过 [str floatValue]、[str doubleValue] 和 [str longlongValue]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T08:31:10.663

浮

```
float myFloat = [myString floatValue]; 
```

加倍

```
double myDouble = [myString doubleValue]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T08:49:36.000

int 是一个 32 位/4 字节的值。

我很惊讶无法理解（截至目前），你为什么会这样。

现在，您可以使用以下内容，这将起作用 -</p>

```
NSString *string = @"77777788888";
NSLog(@"%lld", [string longLongValue]); 
```

当我理解这个问题时，我一定会发布回复。

问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T08:45:30.847

```
NSLog(@"%.0f", [@"77777788888" floatValue]);
NSLog(@"%.0f", [@"77777788888" doubleValue]);
NSLog(@"%lld", [@"77777788888" longLongValue]); 
```

产生输出

> 77777788928
> 77777788888
> 77777788888

因此，如果您没有获得好的结果，则说明其他问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T08:47:41.330

也许问题是你的双打超出范围，检查这个另一个[问题](https://stackoverflow.com/questions/5851831/what-is-the-range-of-a-double-in-objective-c)

# c - 如何在 C 中反转字符串（未到位）？

> ID：13265761
> 
> 赞同：0
> 
> 时间：2012-11-07T08:28:57.170
> 
> 标签：c, string

我已经搜索过了，但我能找到的只是一个将字符串反转到位的函数。这是我到目前为止所拥有的：

```
char* reverseString(char* string)
{
    int i, j;
    char reversed[sizeof(string)];
    j = strlen(string);

    for (i = strlen(string); i >= 0; i--)
    {
        reversed[j - i] = string[i];
    }
    return reversed;
} 
```

但是，这解决了 reversed 作为局部变量的问题，因此返回指向它的指针会抛出

```
warning: function returns address of local variable [enabled by default] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T08:30:25.443

首先，表达式`sizeof(string)`返回*指针*的大小，而不是字符串的长度。也用于`strlen(string)`那个。正如 ta.speot.is 所指出的，您需要为 terminating 添加一个字符，`'\0'`并将该终止符添加到反转的字符串中。

至于您的问题，变量`reversed`存储在堆栈中，当函数返回时，您不再可以使用该内存区域。您必须使用 eg 在堆上分配该内存`malloc`（并稍后使用 释放该内存`free`）或创建变量`static`，但在这种情况下，您不能在多线程程序中使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T08:33:39.240

您可以为其动态分配内存：

```
char* reverseString(char* string)
{
    int i;
    int j = strlen(string);
    char *reversed = malloc(j + 1);
    ... 
```

在这种情况下，调用者必须记住释放（）返回的分配缓冲区。

或者你可以让调用者传入一个足够大的缓冲区来保存反转的字符串：

```
char* reverseString(char* string, char *reversed)
{
     int i, j;
     j = strlen(string);

     for (i = strlen(string); i >= 0; i--)
     {
 ... 
```

另请注意，在您当前的代码中：`char reversed[sizeof(string)];`是错误的，这个函数内部`string`只是 a `char*`，所以`sizeof(string)`给你 a 的大小`char*`，而不是这个 char* 指向的字符串的长度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T08:33:59.360

You can either allocate space for the reversed string with malloc or let the caller provide space for the new string. The latter usually reduces the risk of programming errors causing memory leaks.

```
void reverseString(char *reversed, char *string)
{
    int i, j;
    j = strlen(string);

    for (i = strlen(string) - 1; i >= 0; i--)
    {
        reversed[i] = string[j-i];
    }
    reversed[j] = 0;  /* Don't forget to nul-terminate the reversed string */
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T08:34:30.357

Just provide the target buffer if you do not want to allocate in your function and then return that. The responsibility then is by the caller that reversed is big enough to fit source.

```
char* reverseString(char* source, char* reversed) {...} 
```

and yes sizeof is not the correct way to check a string size, use strlen()

# c# - 如何在 Richt 文本框的文本字符串中添加 rtf 格式？

> ID：13265762
> 
> 赞同：2
> 
> 时间：2012-11-07T08:29:01.343
> 
> 标签：c#, .net, vb.net, richtextbox, rtf

在 .NET 项目中，我有一个很长的纯文本构建作为几个字符串的连接

```
StringLongText = text1 + text2 + ... + textN 
```

每个字符串“textX”都是评估的结果。在开始的过程结束时，我将结果显示在 RichTextBox 中，这样做很简单：

```
rtfTxt.Text = StringLongText 
```

一切正常，但我无法在之前的 text1、text2、textN 块中添加任何文本格式。

例如，我想在连接它们之前用粗体或斜体写一些单词，包括直接在字符串中的格式。

正在做

```
text1 = "This is some {\b bold} text"
rtfTxt.Text = text1 
```

不工作。

有什么建议吗？感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T08:33:16.627

```
rtfTxt.Rtf = @"{\rtf1\ansi This is some \b bold\b0 text.}"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-09T15:55:06.393

只需将带有格式的所需内容写入 RTF 文件即可。在富文本框中加载 RTF 文件。核实。将 RTF 内容读入文本框。将文本框内容放入 RTF 为：

```
Richtext.rtf = textbox1.text; // (which is textual content) 
```

# android - Facebook SDK 图片发布错误

> ID：13265764
> 
> 赞同：2
> 
> 时间：2012-11-07T08:29:08.540
> 
> 标签：android, facebook-android-sdk

我遇到了一些问题，每当我尝试将图像发布到 facebook 时，总是会显示类似于以下屏幕截图的错误。

它适用于模拟器，但不适用于设备。

我使用旧的，也尝试了新的 facebook SDK (3.0) for android，但没有成功。

![尝试发布图片时出现 Facebook 错误](../Images/0c13b1030d14f5feacc130801053a0f1.png)

这是我的 facebookshare 应用程序的课程代码

```
public class FacebookShare extends Activity
{
    private String                      APP_ID, APP_SECRET, Name, Link, Description, Picture;
    private int                         fbTYPE;
    private Facebook                    facebook;
    private AsyncFacebookRunner mAsyncRunner;
    private Activity                    ctx;
    private Bitmap                      bitmap;

    SharedPreferences                   mPrefs;

    public FacebookShare(Activity ctx)
    {
        APP_ID = "...obfuscated...";

        facebook = new Facebook(APP_ID);
        mAsyncRunner = new AsyncFacebookRunner(facebook);
        this.ctx = ctx;
    }

    public void shareFB(int TypeOfSharing)
    {
        APP_ID = "...obfuscated...";
        facebook = new Facebook(APP_ID);
        mAsyncRunner = new AsyncFacebookRunner(facebook);

        this.fbTYPE = TypeOfSharing;
        loginToFacebook();
    }

    public void loginToFacebook()
    {
        Log.v("debugging", "Entered Login to facebook");
        String access_token = mPrefs.getString("access_token", "");
        long expires = mPrefs.getLong("access_expires", 0);

        if (!access_token.equals(""))
        {
            facebook.setAccessToken(access_token);

            Log.v("Access Token", facebook.getAccessToken());
        }

        if (expires != 0)
        {
            facebook.setAccessExpires(expires);
        }

        if (!facebook.isSessionValid())
        {
            Log.v("debugging", "Session is Invalid");

            facebook.authorize(ctx, new String[]{
            "email","publish_stream"
            }, new DialogListener()
            {

                public void onCancel()
                {
                    // Function to handle cancel event
                }

                public void onComplete(Bundle values)
                {
                    // Function to handle complete event
                    // Edit Preferences and update facebook acess_token

                    SharedPreferences.Editor editor = mPrefs.edit();
                    editor.putString("access_token", facebook.getAccessToken());
                    editor.putLong("access_expires", facebook.getAccessExpires());
                    editor.commit();

                    if (fbTYPE == 1)
                    {
                        postToWall();
                    }
                    else if (fbTYPE == 0)
                    {
                        postToWall(getBitmap());
                    }
                }

                public void onError(DialogError error)
                {
                    Log.v("debugging", error.getMessage());
                }

                public void onFacebookError(FacebookError fberror)
                {
                    Log.v("debugging", fberror.getMessage());
                }

            });
            Log.v("debugging", "Passed from authorization");
        }
        else
        {
            if (fbTYPE == 1)
            {
                Log.v("debugging", "Entered Post to facebook");
                postToWall();
            }
            else if (fbTYPE == 0)
            {
                Log.v("debugging", "Entered Post image to facebook");
                postToWall(getBitmap());

            }
        }
    }

    public void clearCredentials()
    {

        try
        {

            facebook.logout(ctx);

        }
        catch (MalformedURLException e)
        {

            e.printStackTrace();

        }
        catch (IOException e)
        {

            e.printStackTrace();

        }

    }

    public void postToWall()
    {
        // post on user's wall.
        Bundle params = new Bundle();
        params.putString("description", getDescription());
        params.putString("picture", getPicture());
        params.putString("name", getName());
        params.putString("link", getLink());

        facebook.dialog(ctx, "feed", params, new DialogListener()
        {

            public void onFacebookError(FacebookError e)
            {
                e.printStackTrace();
                Log.e("FBDEBUG", e.toString());
            }

            public void onError(DialogError e)
            {
                e.printStackTrace();
                Log.e("FBDEBUG", e.toString());
            }

            public void onComplete(Bundle values)
            {
                Toast.makeText(ctx, "Thanks for sharing JOLENPOP", Toast.LENGTH_SHORT).show();
            }

            public void onCancel()
            {
                // Login_Activity.asyncFBLogin fblogin = null;
                // fblogin.execute();
            }
        });

    }

    public void postToWall(Bitmap bmImage)
    {
        Log.v("debugging", "entered postToWall(bitmap)");
        byte[] data = null;
        Bitmap bm = Bitmap.createBitmap(bmImage);
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        bm.compress(CompressFormat.JPEG, 100, baos);
        data = baos.toByteArray();

        Bundle params = new Bundle();
        params.putString("method", "post");
        params.putString("message", getDescription());
        params.putByteArray("image", data);

        try
        {
            String response = facebook.request("me");
            response = facebook.request("me/photos", params, "POST");
            if (response == null || response.equals("") || response.equals("false"))
            {
                Log.v("response String", response);
                return;
            }
            else if (response.toLowerCase().contains("error"))
            {
                Log.v("response String", response);
                return;
            }
        }
        catch (Exception e)
        {
            e.printStackTrace();
            Log.e("FBDEBUG", e.toString());
            return;
        }

        Toast.makeText(ctx, "Your photo has been successfuly published!", Toast.LENGTH_LONG).show();
    }

    public void getProfileInformation()
    {
        mAsyncRunner.request("me", new RequestListener()
        {
            public void onComplete(String response, Object state)
            {
                Log.d("Profile", response);
                String json = response;
                try
                {
                    JSONObject profile = new JSONObject(json);
                    // getting name of the user
                    String name = profile.getString("name");
                    // getting email of the user
                    String email = profile.getString("email");

                    runOnUiThread(new Runnable()
                    {

                        public void run()
                        {
                            // Toast.makeText(getApplicationContext(), "Name: " + name
                            // + "\nEmail: " + email, Toast.LENGTH_LONG).show();
                        }

                    });
                }
                catch (JSONException e)
                {
                    e.printStackTrace();
                }
            }

            public void onIOException(IOException e, Object state)
            {

            }

            public void onFileNotFoundException(FileNotFoundException e, Object state)
            {

            }

            public void onMalformedURLException(MalformedURLException e, Object state)
            {

            }

            public void onFacebookError(FacebookError e, Object state)
            {

            }
        });
    }

    /**
     * setters
     * */
    public void setFacebook(Facebook facebook)
    {
        this.facebook = facebook;
    }

    public void setAsyncRunner(AsyncFacebookRunner mAsyncRunner)
    {
        this.mAsyncRunner = mAsyncRunner;
    }

    public void setPrefs(SharedPreferences mPrefs)
    {
        this.mPrefs = mPrefs;
    }

    public void setName(String val)
    {
        this.Name = val;
    }

    public void setLink(String val)
    {
        this.Link = val;
    }

    public void setBitmap(Bitmap val)
    {
        this.bitmap = val;
    }

    public void setDescription(String val)
    {
        this.Description = val;
    }

    public void setPicture(String val)
    {
        this.Picture = val;
    }

    /**
     * getters
     * */

    public String getAppID()
    {
        return this.APP_ID;
    }

    public String getName()
    {
        return this.Name;
    }

    public String getLink()
    {
        return this.Link;
    }

    public String getDescription()
    {
        return this.Description;
    }

    public String getPicture()
    {
        return this.Picture;
    }

    public Bitmap getBitmap()
    {
        return this.bitmap;
    }

} 
```

这是我使用它的方式：

```
fbShare = new FacebookShare(this);
mPrefs = PreferenceManager.getDefaultSharedPreferences(this);

Log.v("debugging", "entered post to image");
Bitmap screenshot = this.glSurfaceView.mRenderer.screenCapture;
fbShare.setName("JOLENPOP");
fbShare.setDescription("I got a score of " + this.glSurfaceView.mRenderer.Score + " in JOLENPOP! Try to beat me!");
fbShare.setBitmap(screenshot);
fbShare.setPrefs(mPrefs);
fbShare.shareFB(0); 
```

我尝试了内置应用程序和 facebook.FORCE_DIALOG_AUTH，但它们的结果没有区别..提前谢谢，还有更多的力量:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T05:52:57.570

我怀疑这与将参数设置为字节 [] 而不是位图有关。

最直接的方法可能是尝试使用 Request.newUploadPhotoRequest() 而不修改生成的请求。一旦你得到这个工作，你可以添加额外的参数来自定义帖子或查看该方法的实现，如果你想做更深入的更改，看看它是如何构建请求的。

# android - Android 如何将我的应用程序添加到“帐户和同步”以及如何使用？

> ID：13265770
> 
> 赞同：-3
> 
> 时间：2012-11-07T08:29:21.120
> 
> 标签：android, sync

`Android`如何将我的应用程序添加到帐户**和同步**以及如何使用它？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-08T07:45:23.663

[http://www.c99.org/2010/01/23/writing-an-android-sync-provider-part-1/](http://www.c99.org/2010/01/23/writing-an-android-sync-provider-part-1/)

这是一个帐户和同步示例。工作这个

# asp.net - 在上传窗口中只显示特定的文件类型？

> ID：13265781
> 
> 赞同：0
> 
> 时间：2012-11-07T08:30:13.597
> 
> 标签：asp.net

有没有办法通过ASP.NET在文件上传窗口的下拉菜单中只显示特定的文件类型，如下图所示？例如，我只想允许从资源管理器中选择 *.xlsx 文件。我可能已经在某些应用程序中看到了这一点，但找不到实现它的方法。

![快照](../Images/3c4117c116cc905eec7f3237b6bc364d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T08:48:49.503

对于excel，您可以尝试：

```
<input type="file" name="myFile" accept="application/vnd.ms-excel" /> 
```

如果要使用asp.net的fileupdload控件应该可以写

```
<asp:FileUpload id="someId"  accept="application/vnd.ms-excel" runat="server" /> 
```

但你不能依赖它跨浏览器。您仍然需要在后面的代码中验证文件。在后面的代码中验证文件的最简单方法（但绝不是全面的）是通过调用方法检查扩展名，`Path.GetFileExtension(fileName)`如果是错误的扩展名，您将向用户返回错误。我通常会将此检查放在“submitbutton_click”事件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T08:39:04.243

无法立即限制文件类型，但是您可以使用 RegularExpressionValidator 来检查文件扩展名：

```
<asp:RegularExpressionValidator ControlToValidate="FUpload1" ValidationExpression="^.*\.(jpg|JPG)$" runat="server" /> 
```

# haskell - 纯函数中的跟踪输出

> ID：13265783
> 
> 赞同：4
> 
> 时间：2012-11-07T08:30:18.507
> 
> 标签：haskell, ghc

是否可以在纯函数中打印跟踪日志，例如：

```
pure :: Int -> Int
pure x = do
  <trace log>
  return x*x 
```

我知道，这不是“Haskell clean”，但 GHC 中没有任何有用的技巧吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-07T08:39:26.083

对于调试，您可以使用该[`Debug.Trace`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Debug-Trace.html)模块。

```
import Debug.Trace

pure :: Int -> Int
pure x = trace "log" (x * x) 
```

请注意，由于惰性，在某些情况下输出可能会与您正在生成的其他输出混合，因此不建议将其用于登录生产代码，但对于简单的调试任务通常没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T08:42:28.210

当然，总是有的`unsafePerformIO`。并不是说在这里使用它是个好主意！

```
import System.IO.Unsafe

pure :: Int -> Int
pure x = unsafePerformIO $ do
  print x
  return $ x*x 
```

# javascript - ko.mapping.defaultOptions().include 应该是一个数组或字符串

> ID：13265784
> 
> 赞同：0
> 
> 时间：2012-11-07T08:30:21.640
> 
> 标签：javascript, knockout.js, knockout-mapping-plugin

我正在使用淘汰赛 js，并且正在尝试克隆视图模型以将其添加到网格中。这就是我正在做的事情：

```
var newModel = new ko.mapping.fromJS(ko.mapping.toJS(self)); 
```

但我得到：

```
Error: ko.mapping.defaultOptions().include should be an array or string.

...fault:a[d]=g}}return a}function i(){var a=e.utils.arrayPushAll([{},q],arguments)... 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T08:43:11.287

您必须删除`new`关键字：

```
var newModel = ko.mapping.fromJS(ko.mapping.toJS(self)); 
```

但这是创建副本的坏方法。如果您也在使用，请`jQuery`尝试以下操作：

```
var newModel = jQuery.extend(true, {}, self); 
```

# jsp - 有没有办法覆盖在标签库的 TLD 中声明的 URI？

> ID：13265787
> 
> 赞同：1
> 
> 时间：2012-11-07T08:30:30.190
> 
> 标签：jsp, servlets, taglib

假设我正在使用打包在 JAR 文件中的标记库。鉴于我不想修改 JAR 文件，有没有办法更改或覆盖标签库声明的 URI，以防它的 URI 与另一个标签库发生冲突？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T12:55:04.530

如果您得到不同标记库的冲突 URI 并且不想更改 JAR，您可以从 JAR 中提取 TLD 并尝试使用以下内容覆盖它`web.xml`：

```
<jsp-config>
    <taglib>
        <taglib-uri>http://foobar.org</taglib-uri>
        <taglib-location>/WEB-INF/tlds/yourtaglib.tld</taglib-location>
    </taglib>
</jsp-config> 
```

这假设您将提取的 TLD 文件放入其中，`/WEB-INF/tlds/yourtaglib.tld`并且您将`http://foobar.org`在 JSP 中引用它：

```
<%@ taglib uri="http://foobar.org" prefix="p" %> 
```

# android - 如何获取android os版本的代号

> ID：13265789
> 
> 赞同：0
> 
> 时间：2012-11-07T08:30:35.463
> 
> 标签：android, api

我已经通过 String androidVersion = Build.VERSION.RELEASE 检索了 android 版本

现在我想，如果我的版本是 4.0，我应该在运行时在字符串变量中获得 IceCreamSandwich 而不是 4.0。如果有任何用于代号的 API，请提供帮助。提前致谢。我的示例代码是：

```
 String androidVersion = Build.VERSION.RELEASE.toString();
     String androidName = "";
     String and = "4.1.2";
        if(androidVersion == and)
        {
        androidName = "JellyBeans";
        }
    else
    {
        androidName = "Not Having any name";

    } 
```

在调试时，我无法进入 if 循环，它正在进入 else。我不知道是什么问题。可能是我获取的版本和传递给比较的字符串不匹配。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-06T11:55:37.543

尝试这个

```
public String getSDKCodeName(){
    String codeName = "";
        Field[] fields = Build.VERSION_CODES.class.getFields();
        for (Field field : fields) {
            String fieldName = field.getName();
            int fieldValue = -1;

            try {
                fieldValue = field.getInt(new Object());
            } catch (IllegalArgumentException e) {
                e.printStackTrace();
            } catch (IllegalAccessException e) {
                e.printStackTrace();
            } catch (NullPointerException e) {
                e.printStackTrace();
            }

            if (fieldValue == Build.VERSION.SDK_INT) {
                codeName = fieldName;
            }
        }
    return codeName;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-09T23:02:47.707

没有直接的方法可以从 android 获取代号。一种简单的方法是使用

```
private Field[] fields;
fields = Build.VERSION_CODES.class.getFields();
fields[Build.VERSION.SDK_INT + 1].getName() 
```

但这并不稳定，并导致我`ArrayIndexOutOfBoundsExceptioin`在少数设备的生产中崩溃。

即使在生产中，手动创建返回代号的方法对我来说也非常稳定。

```
String codeName = getVersionCode(Build.VERSION.SDK_INT)

private String getVersionCode(int code){
    switch (code){
      case 0:{
        return "BASE";
      }
      case 1:{
        return "BASE_1_1";
      }
      case 2:{
        return "CUPCAKE";
      }
      case 3:{
        return "CUR_DEVELOPMENT";
      }
      case 4:{
        return "DONUT";
      }
      case 5:{
        return "ECLAIR";
      }
      case 6:{
        return "ECLAIR_0_1";
      }
      case 7:{
        return "ECLAIR_MR1";
      }
      case 8:{
        return "FROYO";
      }
      case 9:{
        return "GINGERBREAD";
      }
      case 10:{
        return "GINGERBREAD_MR1";
      }
      case 11:{
        return "HONEYCOMB";
      }
      case 12:{
        return "HONEYCOMB_MR1";
      }
      case 13:{
        return "HONEYCOMB_MR2";
      }
      case 14:{
        return "ICE_CREAM_SANDWICH";
      }
      case 15:{
        return "ICE_CREAM_SANDWICH_MR1";
      }
      case 16:{
        return "JELLY_BEAN";
      }
      case 17:{
        return "JELLY_BEAN_MR1";
      }
      case 18:{
        return "JELLY_BEAN_MR2";
      }
      case 19:{
        return "KITKAT";
      }
      case 20:{
        return "KITKAT_WATCH";
      }
      case 21:{
        return "L";
      }
      case 22:{
        return "LOLLIPOP";
      }
      case 23:{
        return "LOLLIPOP_MR1";
      }
      case 24:{
        return "MARSHMALLOW";
      }
      case 25:{
        return "NOUGAT";
      }
      case 26:{
        return "OREO";
      }
      case 27:{
        return "OREO";
      }
      case 28:{
        return "PIE";
      }
      case 29:{
        return "Q";
      }
      case 30:{
        return "R";
      }
      default: {
        return "Android";
      }
    }

} 
```

# visual-studio-2010 - 通过控制台应用程序访问vs2010中的所有sharepoint列表标题

> ID：13265796
> 
> 赞同：1
> 
> 时间：2012-11-07T08:31:01.787
> 
> 标签：visual-studio-2010, sharepoint-2010

大家好，我已经编写了一个代码来使用控制台应用程序检索 SharePoint 中可用的列表

我的代码如下

```
string strSite="http://dorababu:1904/";
SPSite spSite=new SPSite(strSite);
SPWeb spweb=spSite.RootWeb;
foreach(SPList objList in spweb.Lists)
{
    console.WriteLine(objList.Title);
}
spweb.Dispose();
spSite.Dispose();
consol.ReadLine(); 
```

有人可以帮我吗？这没有显示标题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T13:18:41.383

因为您使用的是 SharePoint 2010，所以我会为此使用客户端对象模型。使用此代码，您可以从服务器外部加载 SharePoint 内容。

```
var ctx = new ClientContext("http://tests");
var lists = ctx.Site.RootWeb.Lists;
ctx.Load(lists);
ctx.ExecuteQuery();
foreach (var list in lists)
  Console.WriteLine(list.Title);

Console.ReadKey(); 
```

您需要添加以下引用才能使其正常工作：

```
Microsoft.SharePoint.Client
Microsoft.SharePoint.Client.Runtime 
```

# android - 为不同的 Android 设备设计全屏图形

> ID：13265797
> 
> 赞同：0
> 
> 时间：2012-11-07T08:31:06.310
> 
> 标签：android

我是一位经验丰富的 iOS 开发人员，但我对 Android 完全陌生。我必须开发一个具有全屏背景图像和必须非常适合屏幕的各种图像的 Android 应用程序。现在在 iOS 上，我们生活在一个“受保护”的世界中，这很容易，因为我知道每台设备的屏幕尺寸，但在 Android 上，我认为这是非常不同的。我已经阅读了关于 small/normal/large/xlarge 和 ldpi/mdpi/hdpi/xhdpi 结构的信息，但是我找不到任何关于设计一个在不同尺寸和比例的设备上都能很好地工作的全屏图像。我该怎么做呢？我的意思是，我应该为普通+hdpi 设备制作多大的图像才能让它看起来不错？图像不得扭曲（因此不得更改比例），但我可以忍受它们的尺寸缩小。我应该添加一些“空间”吗 到顶部/底部或侧面的图像以使其正常工作？如何做到最好？

谢谢索伦_

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:23:37.343

我自己做所有的缩放。一旦您获得了 android 提供的屏幕尺寸，请使用尽可能少的 xml 并在您的应用程序中设置所有尺寸。

# javascript - 使用 JavaScript 和 MVC 重定向到控制器

> ID：13265800
> 
> 赞同：1
> 
> 时间：2012-11-07T08:31:27.233
> 
> 标签：javascript, asp.net-mvc, model-view-controller

我试图使用这行代码从 JavaScript 重定向到控制器

```
 location.href = '/Dashboard/'; 
```

它重定向到仪表板，但在我的仪表板视图中，当文档加载时调用此方法

```
 $.post("Dashboard/UsersGet", {}, function (dataSet) {
    //do something with the dataset
 }); 
```

然后我得到这个错误。

```
POST http://localhost:1414/Dashboard/Dashboard/UsersGet 404 (Not Found) 
```

我可以看到仪表板被添加到 url 两次。如何在不发生这种情况的情况下重定向到控制器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T08:32:40.623

使用`Url`助手：

```
@Url.Action("UsersGet", "Dashboard") 
```

完整代码：

```
$.post('@Url.Action("UsersGet", "Dashboard")', {}, function (dataSet) {
    //do something with the dataset
 }); 
```

Asp.Net MVC 中的路由不像经典的 Asp.Net 那样工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T08:34:56.800

试试这个：

```
 $.post("/Dashboard/UsersGet", {}, function (dataSet) {
    //do something with the dataset
 }); 
```

添加`/`到网址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T08:38:07.133

```
 $.post("Dashboard/UsersGet", {}, function (dataSet) {
    //do something with the dataset
 }); 
```

应该

```
 $.post("/Dashboard/UsersGet", {}, function (dataSet) {
    //do something with the dataset
 }); 
```

如果没有“/”，您发布的网址将附加到当前网址。

# html - x-handlebars 模板内的 Twitter 引导工具提示

> ID：13265803
> 
> 赞同：3
> 
> 时间：2012-11-07T08:31:43.433
> 
> 标签：html, twitter-bootstrap, handlebars.js

我有一个**车把模板**

```
<script id="line_template" type="text/x-handlebars-template">
  .....
  <td>{{OrderDateString}}</td>
  <td>{{StoreName}}</td>
  <td><a href="#" rel="tooltip" title="first tooltip">{{CommissionString}}</a></td>
  .....
</script> 
```

和一个**脚本**

```
<script type="text/javascript">
  $(document).ready(function () {
    $("a").tooltip({
      'selector': '',
      'placement': 'bottom'
    });
  });
</script> 
```

除 Bootstrap 工具提示外，一切正常。在车把模板之外，Bootstrap 工具提示正在工作，所以我知道所有内容都已正确加载。

我不知道我做错了什么？有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-30T03:36:52.357

由于您将它绑定到准备好的文档上，因此它可能不会绑定到在把手模板呈现时创建的元素。我通过在渲染模板后绑定工具提示行为来解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T21:14:52.860

不完全确定它是否如此简单，但似乎您需要向`data-toggle`锚添加一个属性，所以它看起来像这样：

```
<a href="#" rel="tooltip" data-toggle="tooltip" title="first tooltip">{{CommissionString}}</a></td> 
```

我注意到这个问题已经很老了，因此最好开始使用您的 Bootstrap 版本发布问题，或者即使这些问题被埋没了，但如果有人发现它们，他们更有可能找到有效的答案。

# icons - “添加或删除程序”中 ClickOnce 应用程序的图标

> ID：13265806
> 
> 赞同：7
> 
> 时间：2012-11-07T08:31:50.867
> 
> 标签：icons, clickonce, addremoveprograms

我在“开始”菜单、应用程序文件夹等中为我的应用程序找到了正确的图标，但它没有出现在“*添加或删除程序*”列表中。我应该为此包括什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T08:56:27.887

您可能无法直接通过 ClickOnce 执行此操作，因为它不受支持。*[也许您可以尝试编辑注册表，如ClickOnce Application 的 Add/Remove Programs 中的 Missing Icon](http://social.msdn.microsoft.com/Forums/en-US/winformssetup/thread/db1d57ee-7743-4409-8072-f0e84ab5330a/)*所示：

```
RegistryKey myUninstallKey = Registry.CurrentUser.OpenSubKey(@"Software\Microsoft\Windows\CurrentVersion\Uninstall");
string[] mySubKeyNames = myUninstallKey.GetSubKeyNames();

for (int i = 0; i < mySubKeyNames.Length; i++)
{
    RegistryKey myKey = myUninstallKey.OpenSubKey(mySubKeyNames , true);
    object myValue = myKey.GetValue("DisplayName");
    if (myValue != null && (string)myValue == _ApplicationName)
    {
        myKey.SetValue("DisplayIcon", _ExecutablePath + @"\App.ico");
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-10T10:50:11.823

您可以使用 Windows 标准属性添加图标`ARPPRODUCTICON`。在您的标准 Windows 安装程序中，添加以下代码。这将在控制面板中添加一个图标。

```
<Icon Id="icon.ico" SourceFile="MySourceFiles\icon.ico"/>
<Property Id="ARPPRODUCTICON" Value="icon.ico" /> 
```

# android - Android：将 textColor 应用于布局

> ID：13265807
> 
> 赞同：0
> 
> 时间：2012-11-07T08:31:51.927
> 
> 标签：android, xml

我正在尝试将 textColor 应用于布局而不是 textView。这是可能的还是 textView 是唯一可以通过 xml 应用文本颜色的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T08:37:49.000

这是通过编码设置文本颜色的链接

[如何在代码中设置TextView的文字颜色？](https://stackoverflow.com/questions/4602902/how-to-set-text-color-of-textview-by-coding)

在 xml 中，您可以在文本视图中执行此操作。

```
android:textColor="#000000" 
```

希望这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T08:51:04.840

在您希望使用另一种文本颜色的 UI 元素上实现自定义样式和设置样式。您也许还可以制作一些可以为布局设置的自定义主题，但我不确定它是否或如何工作。但是你当然可以从这里得到一些关于[Android 开发者风格和主题](http://developer.android.com/guide/topics/ui/themes.html)的想法。

# c - 按位运算符的说明

> ID：13265808
> 
> 赞同：3
> 
> 时间：2012-11-07T08:31:53.150
> 
> 标签：c

我一直在对变量执行按位运算。

```
int p=3,q=5;
int a=~p,b=~q; //complement a and b
printf("%d %d\t%d %d",p,a,q,b); 
```

'b' 的理论输出是 10，如果它是有符号的，它必须是 -2。但是输出是-6。

有人可以解释一下它的工作原理吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T08:37:27.243

`~`是 c（或 python）中的按位补码运算符，它本质上计算`-x - 1`.

所以一个表看起来像：

```
0  -1
1  -2
2  -3
3  -4 
4  -5 
5  -6 
```

在二进制补码表示中，如果数字 x 的最高有效位为 1，则实际值为 -(~x + 1)。

例如，

```
0b11110000 = -(~0b1111 + 1) = -(15 + 1) = -16. 
```

这是负数的自然表示，因为

```
0000001 =  1
0000000 =  0
1111111 = -1  (wrap around)
1111110 = -2
1111101 = -3 etc. 
```

有关详细信息，请参阅[http://en.wikipedia.org/wiki/Two%27s_complement](http://en.wikipedia.org/wiki/Two%27s_complement)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T08:36:37.567

`p`是 0b11，因此`a`（假设 16 位 int）如果无符号则为 0b1111111111111100 = 0xFFFC，如果有符号则为 -3。

`q`是 0b101，因此`b`（假设为 16 位整数）如果无符号则为 0b1111111111111010 = 0xFFFA，如果有符号则为 -6。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T08:41:13.967

在取 p（即 5）的补码时，您期望它是 1010。即 10。但事实是在一个补码操作期间，所有位都被反转。

考虑这个程序。

```
#include <stdio.h>

int main()
{

int p=5,q=3;
int a=~p,b=~q; //complement a and b
printf("%x %x\t%x %x",p,a,q,b);

return 0;
} 
```

印刷

```
5 fffffffa  3 fffffffc 
```

所以在使用 %d 打印时，会考虑符号。

# java - 使用正则表达式模式的电话号码类别

> ID：13265811
> 
> 赞同：0
> 
> 时间：2012-11-07T08:32:07.850
> 
> 标签：java, regex, phone-number

我想获得电话号码的用户输入。我有 2 个数字类别 Golden 和 Normal。当用户输入某种模式的电话号码时，系统会自动判断为Golden或Normal。我在编码某些模式时遇到问题。黄金模式编号之一是这样的：AB001234，其中 AB 是 12、23、34、45、56、67、78 和 89 之类的数字。这是我到目前为止得到的。

```
 public static void main(String[] args) {

    Scanner userinput = new Scanner(System.in);

    System.out.println("Enter Telephone Number");
    String nophone = userinput.next();

    String Golden = "(\\d)(\\1)002345|(\\d*)12345$";
    //I want to add AB001234 pattern to the line above but I don't know how.

    if (nophone.matches(Golden)) {
        System.out.println("Golden");
    }

    else {
        System.out.println("Normal");
    }
    } 
```

我不确定我是否真的必须使用正则表达式。还有一个问题，你可以看到 String Golden 的第一部分没有 $ 而第二部分有 $。如果我放置或删除 $ 符号，我不确定效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T08:42:12.807

`(\\d)(\\1)`不检查序列`12`，`23`等等。而是检查两个连续数字，如`11`, `22`, `33`, ...

要检查序列，您必须明确地使用`Pipe(|)`- `(12|23|34|45|...)`

所以，你的模式`Golden Number`应该是这样的： -

```
^(?:12|23|34|45|56|67|78|89)001234$ 
```

`(?:..)`- 表示`non-capturing group`. 它不会在您的模式中被捕获为编号组。

**注意： -**如果您的长度`sequence`不同，则`Regex`不是匹配它们的合适方法。

对于第二个问题，`$`表示字符串的结尾。因此，`$`末尾的模式将在字符串的末尾匹配。另外，`Caret (^)`是否匹配字符串的开头。

**例如： -**

*   `abc$`匹配字符串`"asdfabc"`，但不匹配`"sdfabcf"`。
*   `^abc`匹配字符串`"abcfsdf"`，但不匹配`"sdfabcf"`。
*   `^abc$`只匹配字符串`"abc"`，因为它是唯一一个以 . 开头和结尾的字符串`"abc"`。

您可以通过以下链接了解更多信息`Regexp`：-

*   [http://docs.oracle.com/javase/tutorial/essential/regex/](http://docs.oracle.com/javase/tutorial/essential/regex/)
*   [http://docs.oracle.com/javase/tutorial/essential/regex/quant.html](http://docs.oracle.com/javase/tutorial/essential/regex/quant.html)
*   [http://www.vogella.com/articles/JavaRegularExpressions/article.html](http://www.vogella.com/articles/JavaRegularExpressions/article.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T08:46:54.497

要得到这个：

> AB001234，其中 AB 是 12、23、34、45、56、67、78 和 89 之类的数字。这是我到目前为止得到的

正则表达式看起来像：

```
^(12|23|34|45|56|67|78|89)001234$ 
```

该`$`符号表示字符串的结尾。这意味着如果在最后一个字符之后有任何附加字符，则该字符串将与正则表达式不匹配。

`^`符号表示字符串的开头。

有关更多信息，请查看Javadoc API 上[的正则表达式构造摘要。](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)

# python - 使用 python 进行 CSV 操作

> ID：13265812
> 
> 赞同：1
> 
> 时间：2012-11-07T08:32:13.657
> 
> 标签：python, csv, iterator

出于我的目的，在实际使用行之前，我必须知道（CSV）文件中的行数。我用谷歌搜索，发现文档说我应该创建一个迭代器（CSV.reader）两次（第一次用于计数，第二次用于处理行）。这是唯一的方法，还是有一些棘手的方法可以做到这一点？

感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T08:52:10.263

如果您的文件不是很大，您可以尝试：

```
from csv import reader

def proceed(size):
    with open(filename) as f:
        data = list(csv.reader(f))
        if len(data) > size:
            return
        else:
            for line in data:
                #do action

weights = {'user1': 4, 'user2': 5}  
for k,v in weights.iteritems():
    proceed(v) 
```

或者如@georgesl 建议的那样，以防您有一个非常大的文件：

```
def proceed(size):
    if sum(1 for row in csv.reader(open(filename))) > size:
        return
    else:
        for line in csv.reader(open(filename)):
            #do action 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T08:48:43.747

我不知道不读取文件的方法，但是根据瓶颈所在的位置，您可以只处理*N*行，如果有更多则丢弃它们，例如：

```
count = 0
for line in reader:
    count += 1
    if count > N:  # Over the limit so stop processing
        break
    else:
        processed_data += process(line)
else:
    # This block only runs if the loop completed naturally, i.e. count <= N
    return processed_data 
```

如果`process(line)`价格昂贵，那么您最好的选择可能是使用问题中描述的两个循环。

# ssis - 将不匹配的查找行插入表后如何继续该过程？

> ID：13265813
> 
> 赞同：5
> 
> 时间：2012-11-07T08:32:17.967
> 
> 标签：ssis, dataflow, union-all

在数据流中，是否可以进行查找、插入不匹配的行、重新查找然后继续使用完整（原始）数据集？

我看不到在插入的行转到 a 之后如何获取/重新使用它们`OLE DB Destination`，我也看不到 a`Multicast`可以等到查找插入分支完成（然后将所有它们合并回来）。

如果不能在数据流中完成，我是否必须在之前的数据流任务中重复所有过滤逻辑，以便首先进行查找插入？

这可能是一个明显/已经回答的问题，但搜索后我找不到太多。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T03:20:44.730

这在单个数据流中是不可能的。如果你用谷歌搜索得够多，周围有各种各样的“解决方案”，但它们忽略了行在缓冲区/批处理中沿着数据流传输并并行处理的架构现实。

因此，图像您有多个“新”行到达 2 个相邻缓冲区。无法确保在缓冲区 2 命中上游查找之前，您对缓冲区 1 的“新”行的下游处理已经完成。这将导致多个“新”行被插入到相同键的查找目标表中。

您需要有一个上游数据流任务来执行所有必需的查找插入。这将是运行时整体上更有效的解决方案，因为您的查找插入可以使用快速加载和表锁定，并且您的下游查找可以是完整缓存。

# php - 如何通过 php sdk 将用户标记为图片？

> ID：13265814
> 
> 赞同：1
> 
> 时间：2012-11-07T08:32:19.080
> 
> 标签：php, facebook, facebook-graph-api

我正在使用此代码。它不做任何事情。:(

```
$post_url = "https://graph.facebook.com/".$photo_id."/tags/".$random_friend['id']."?access_token=".$access_token."&x=22&y=22&method=POST";   

 $response = file_get_contents($post_url); 
```

我已经定义了一切..但它仍然不起作用。我想知道如何在我的应用上传的图片中标记用户或他的朋友。

我正在使用所有必需的权限。user_photos、friends_photos、publish_stream

# c - ARM：fromelf - 切换以在文本输出中获取枚举地址

> ID：13265815
> 
> 赞同：0
> 
> 时间：2012-11-07T08:32:27.907
> 
> 标签：c, struct, enums, arm, cortex-m3

我使用这个命令：

```
fromelf.exe -a project.axf > output.txt 
```

知道我在 Cortex-M3 中的存储地址。那里列出了所有结构，以及所有闪存和 Ram 地址。如何输出枚举？我认为它们都在 .axf - 文件中？Axf = 精灵？！

谢谢。

# php - 从弹出页面获取值并将其插入父页面codeigniter

> ID：13265817
> 
> 赞同：0
> 
> 时间：2012-11-07T08:32:40.060
> 
> 标签：php, javascript, codeigniter

我有一个弹出页面，其中有一个带有字段的表单

```
name,discription , date etc 
```

当表单提交成功弹出页面关闭。到目前为止它工作正常。

但知道我想获得的价值

```
NAME field 
```

从弹出页面并将其插入到父页面表单中。两个页面都有不同的控制器。请告诉我如何进一步进行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:44:48.370

将名称字段的值存储在会话中。这样您甚至可以在另一个控制器中访问它。

[http://ellislab.com/codeigniter/user_guide/libraries/sessions.html](http://ellislab.com/codeigniter/user_guide/libraries/sessions.html)

# c++ - OpenSceneGraph C++ 访问冲突读取位置 0x00421000

> ID：13265819
> 
> 赞同：1
> 
> 时间：2012-11-07T08:32:45.403
> 
> 标签：c++, openscenegraph

使用 OpenSceneGraph，我一直遇到这个违规问题，我希望能得到一些帮助。问题在于下面的特定行恰好是我的主要功能中的第一行。

```
 osg::ref_ptr<osg::Node> bench = osgDB::readNodeFile("Models/test.IVE"); 
```

我的目录中有我的模型文件夹。错误如下。

**OSG3D.exe 中 0x68630A6C (msvcr100.dll) 处的未处理异常：0xC0000005：访问冲突读取位置 0x00421000。**

这就是问题似乎出现的地方。

```
/** Read an osg::Node from file. 
  * Return valid osg::Node on success,
  * return NULL on failure.
  * The osgDB::Registry is used to load the appropriate ReaderWriter plugin
  * for the filename extension, and this plugin then handles the request
  * to read the specified file.*/
inline osg::Node*  readNodeFile(const std::string& filename)
{
    return readNodeFile(filename,Registry::instance()->getOptions());
} 
```

我将不胜感激有关将来如何最好地处理此类异常消息的详细信息。是否有工具可以使调试变得容易，或者有没有办法捕获确切的问题并修复它们？我将不胜感激。

我的最终目标是学习如何更好地调试 C++ 相关问题。有了这个，这意味着阅读编译器错误列表[http://msdn.microsoft.com/en-us/library/850cstw1(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/850cstw1(v=vs.71).aspx)是不够的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-03T11:26:04.567

![在此处输入图像描述](../Images/993d2b41cfe7a8e14d3a96846bddf78c.png)

经过测试，发现要么

*   您正在**调试**模式下编译代码，但使用**发布**libs/dll 或
*   您正在以**发布**模式编译代码，但使用**调试**库/dll。

因此，只需使用 debug osg lib 进行调试构建，并使用发布版本进行发布构建，就完成了。

![在此处输入图像描述](../Images/8a5fd41bfb77bf19599e3dc362464646.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T04:55:33.007

Please do the following troubleshooting:

1.  check where is your Model folder, suppose you should copy it under debug or release folder, since they are the default execute path.

2.  add some protection code before your read the node files, you must ensure the file exists before you read it.

3.  Construst a ReaderWriter::Options directly and replace Registry::instance()->getOptions() and see if issue is still.

And I think Design by Contract is good to avoid most of this kind of issues.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T23:41:59.447

通过使用 Application Verifier（来自 Microsoft）等工具，我很幸运地解决了类似的问题。GFlags 和类似的工具也不错。

Application Verifier 安装简单，然后将其指向您的 exe 并在 Visual Studio 中运行该应用程序。当问题发生时，它将破坏发现问题的应用程序。这可能是问题发生的确切位置，也可能不是问题发生的确切位置（尽管我很幸运能在它刚开始的地方着陆），但应该更容易看到可能发生的事情。

你能打开程序吗？Microsoft 将其安装在 C:\Windows\System32\appverif.exe 中。运行它时，您选择文件以及要调试的内容。在您的情况下，选择与内存相关的选项。激活 App Verifier，它应该会告诉您现在应该在 Visual Studio 中运行它。因此，在 Visual Studio 中运行您的程序，App Verifier 应该有助于在发生错误的位置（或附近）停止您的程序。谷歌应用程序验证。有一些不错的教程。

# c# - 如何从一个目录移动到另一个目录？

> ID：13265833
> 
> 赞同：0
> 
> 时间：2012-11-07T08:33:23.603
> 
> 标签：c#, .net

我正在使用`Directory.GetCurrentDirectory()`功能。获得当前目录路径后，我需要向上移动两个目录并将此错误的路径获取到路径变量。

知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T08:36:23.710

你的意思是两个目录？如果您要向上移动，请使用[Directory.GetParent](http://msdn.microsoft.com/en-us/library/system.io.directory.getparent.aspx)。你不能*随意*往下走，你需要知道你要去哪里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T08:37:11.227

假设你的意思是向上移动，而不是向下移动：

```
var x = new DirectoryInfo(Directory.GetCurrentDirectory());
var result = x.Parent.Parent; 
```

您现在可以获取该目录的所有数据，例如：

```
var fullName = result.FullName; 
```

[**MSDN**](http://msdn.microsoft.com/en-us/library/8s2fzb02.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T08:37:51.227

如果您确实希望该`Directory.GetCurrentDirectory()`方法返回不同的目录，则需要使用匹配的`Directory.SetCurrentDirectory()`方法来更改应用程序的工作目录。

[http://msdn.microsoft.com/en-us/library/system.io.directory.setcurrentdirectory.aspx](http://msdn.microsoft.com/en-us/library/system.io.directory.setcurrentdirectory.aspx)

如果要下移，可以使用该`Directory.GetDirectories()`方法查看当前路径下的所有文件夹，然后使用该`Directory.SetDirectory()`方法将其设置为其中之一。再次重复以获取“两个目录”。Sans 错误处理（并假设您每次都想要第一个目录）：

```
var directory = Directory.GetCurrentDirectory();
var directories = Directory.GetDirectories(directory);
directory = directories.First();
directories = Directory.GetDirectories(directory);
directory = directories.First(); 
```

如果您确实表示**向上**而不是向下，那么正如其他人所说，使用该`Directory.GetParent()`方法获取当前目录的父级......两次。

# servicestack - servicestack 在查询字符串变量中反序列化 JSON

> ID：13265834
> 
> 赞同：1
> 
> 时间：2012-11-07T08:33:30.643
> 
> 标签：servicestack

在其余服务中，我正在模拟与另一个产品相同的内容，json 以 Web 表单或查询字符串参数的形式获取/发布。

我的请求 DTO 有另一个 DTO 对象作为 json 的属性

如果表单参数是 POST 的，我可以添加一个 RequestFilter 来反序列化表单参数，但如果 GET 在查询变量中与 json 一起使用，则服务堆栈代码将在 StringMapTypeDeserializer 中抛出“KeyValueDataContractDeserializer：转换为类型时出错”异常。

在 StringMapTypeDeserializer 中，它获取 DTO 属性的解析函数。有没有向 JsvReader.GetParseFn(propertyType); 中添加一些东西？处理我的 JSON 的反序列化？

或者为这个查询参数添加解析的其他方式？不做自定义处理程序。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T19:46:14.060

ServiceStack 使用[JSV 格式](https://github.com/ServiceStack/ServiceStack.Text/wiki/JSV-Format)（即不带引号的 JSON）来解析 QueryStrings。

JSV 允许您在 QueryString 中嵌入深层对象图，如[以下示例 url 所示](http://www.servicestack.net/ServiceStack.Examples.Host.Web/ServiceStack/Json/SyncReply/StoreLogs?Loggers=%5B%7BId:786,Devices%3a%5B%7BId:5955,Type%3aPanel,TimeStamp:1199303309,Channels%3a%5B%7BName%3aTemperature,Value:58%7D,%7BName%3aStatus,Value%3aOn%7D%5D%7D,%7BId:5956,Type%3aTank,TimeStamp:1199303309,Channels%3a%5B%7BName%3aVolume,Value:10035%7D,%7BName%3aStatus,Value%3aFull%7D%5D%7D%5D%7D%5D)：

```
http://www.servicestack.net/ServiceStack.Examples.Host.Web/ServiceStack/Json/
SyncReply/StoreLogs?Loggers=[{Id:786,Devices:[{Id:5955,Type:Panel,
  Channels:[{Name:Temperature,Value:58},{Name:Status,Value:On}]},
  {Id:5956,Type:Tank,TimeStamp:1199303309,
  Channels:[{Name:Volume,Value:10035},{Name:Status,Value:Full}]}]}] 
```

如果要更改 ServiceStack 使用的默认绑定，可以注册自己的[Custom Request Binder](https://github.com/ServiceStack/ServiceStack/wiki/Serialization-deserialization)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T07:04:57.573

我这样做是为了自动为 apphost.Configure 中的所有 dto 设置我自己的自定义通用请求绑定器。遍历 EndpointHost.Config.ServiceController.AllOperationTypes 好吗？

```
 public static void Register(IAppHost appHost)
    {

        foreach (Type t in EndpointHost.Config.ServiceController.AllOperationTypes)
        {
            var method = typeof(MyFormatClass).GetMethod("DeserializationRequestBinder");
            var genericMethod = method.MakeGenericMethod(t);
            var genericDelegate = (Func<IHttpRequest, object>) Delegate.CreateDelegate( typeof( Func<IHttpRequest, object> ), genericMethod);

            // add DeserializationRequestBinder<t> to serivcestack's RequestBinders
            appHost.RequestBinders.Add(t, genericDelegate);
        }
    }

    public static object DeserializationRequestBinder<RequestDTO>(IHttpRequest httpReq)
    {
        // uses a few of the extension methods from ServiceStack.WebHost.Endpoints.Extensions.HttpRequestExtensions
        var requestParams = httpReq.GetRequestParams();            

    // create <RequestDTO> and deserialize into it

    } 
```

# php - 在 PHP 中打印成功保存的代码

> ID：13265838
> 
> 赞同：1
> 
> 时间：2012-11-07T08:33:45.443
> 
> 标签：php

我正在使用下面的代码，在提交数据库中的所有值后，如何成功保存消息。

```
$query = "INSERT INTO applyonline (name, email, gender, phone, dob, applicationintake, applicationintake2, degree, ielts, experience, experience2) VALUES ('".$name."', '".$email."','".$gender."','".$phone."','".$dob."','".$applicationintake1."','".$applicationintake2."','".$degree."','".$ielts."','".$experience1."','".$experience2."')";
$result = mysql_query($query); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T08:37:09.390

**首先**你应该阅读这个帖子：[为什么我不应该在 PHP 中使用 mysql_* 函数？](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-function-in-php)

然后，[阅读文档](http://php.net/manual/fr/function.mysql-query.php)，您将看到`mysql_query`INSERT 查询返回 true 或 false。

所以：

```
$query = "INSERT INTO applyonline (name, email, gender, phone, dob, applicationintake, applicationintake2, degree, ielts, experience, experience2) VALUES ('".$name."', '".$email."','".$gender."','".$phone."','".$dob."','".$applicationintake1."','".$applicationintake2."','".$degree."','".$ielts."','".$experience1."','".$experience2."')";
$result = mysql_query($query);

if (true === $result)
{
  echo 'All right !';
}
else
{
  echo 'Something is wrong: ' . mysql_error();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T08:36:03.813

```
$query = "INSERT INTO applyonline (name, email, gender, phone, dob, applicationintake, applicationintake2, degree, ielts, experience, experience2) VALUES ('".$name."', '".$email."','".$gender."','".$phone."','".$dob."','".$applicationintake1."','".$applicationintake2."','".$degree."','".$ielts."','".$experience1."','".$experience2."')";
$result = mysql_query($query) or die('error while saving data');
if($result){
  echo 'data saved successfully';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-27T11:21:51.850

```
$query = "INSERT INTO applyonline (name, email, gender, phone, dob, applicationintake, applicationintake2, degree, ielts, experience, experience2) VALUES ('".$name."', '".$email."','".$gender."','".$phone."','".$dob."','".$applicationintake1."','".$applicationintake2."','".$degree."','".$ielts."','".$experience1."','".$experience2."')";
$result = mysql_query($query) or die(mysql_error());
if($result){
  echo 'data saved successfully';
}

mysql_error() function will explain you error in detail . 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T08:36:58.457

使用骰子停止脚本，否则显示保存成功。

```
$query = "INSERT INTO applyonline (name, email, gender, phone, dob, applicationintake, applicationintake2, degree, ielts, experience, experience2) VALUES ('".$name."', '".$email."','".$gender."','".$phone."','".$dob."','".$applicationintake1."','".$applicationintake2."','".$degree."','".$ielts."','".$experience1."','".$experience2."')";
$result = mysql_query($query) or die("Could not save");
if ($result)
echo "<br>Saved</br>"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T08:37:58.613

如果成功进入数据库，则将处理 if 语句中的任何内容。

```
$query = "INSERT INTO applyonline (name, email, gender, phone, dob, applicationintake, applicationintake2, degree, ielts, experience, experience2) VALUES ('".$name."', '".$email."','".$gender."','".$phone."','".$dob."','".$applicationintake1."','".$applicationintake2."','".$degree."','".$ielts."','".$experience1."','".$experience2."')";
$result = mysql_query($query);
if($result){
    echo "Data has been saved";
} 
```

# wmi - 当我通过 j-interop 访问 wmi 时必须关闭防火墙

> ID：13265840
> 
> 赞同：1
> 
> 时间：2012-11-07T08:33:58.903
> 
> 标签：wmi, firewall, j-interop

如果我想通过 j-interop 访问 wmi，我必须关闭防火墙，否则我会得到“RPC 服务器不可用”。错误。远程机器的操作系统是windows server 2008，我不想关闭它的防火墙，有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T13:53:49.350

MSDN 文档详细解释了这个主题，试试这些文章。

*   [连接到远程计算机上的 WMI (Windows)](http://msdn.microsoft.com/en-us/library/windows/desktop/aa389290%28v=vs.85%29.aspx)
*   [`Connecting Through Windows Firewall (Windows)`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa389286%28v=vs.85%29.aspx)
*   [从 Windows Vista 开始远程连接到 WMI](http://msdn.microsoft.com/en-us/library/windows/desktop/aa822854%28v=vs.85%29.aspx)

# c++ - C++模板实参推演过程

> ID：13265842
> 
> 赞同：4
> 
> 时间：2012-11-07T08:34:21.680
> 
> 标签：c++

任何人都可以帮助告诉我为什么论点推论没有按我的预期工作吗？请查看我的代码注释以了解我的思路？

```
#include <iostream>
#include <type_traits>
#include <iomanip>
#include <string>

using namespace std;

template<class T>
void deduce1(T args, string arg){
cout << "template<class T> void deduce1(T args) " << " argument passed in was: " << arg << " deduced as: " << typeid(T).name() << endl;
cout <<  "Is const: " << boolalpha << is_const<T>::value << endl;
cout <<  "Is reference: " << boolalpha << is_reference<T>::value << endl;
cout <<  "Is pointer: " << boolalpha << is_pointer<T>::value << endl;
}

template<class T>
void deduce2(T& args,string arg){
cout << "template<class T> void deduce2(T args) " << " argument passed in was: " << arg << " deduced as: " << typeid(T).name() << endl;
cout <<  "Is const: " << boolalpha << is_const<T>::value << endl;
cout <<  "Is reference: " << boolalpha << is_reference<T>::value << endl;
cout <<  "Is pointer: " << boolalpha << is_pointer<T>::value << endl;
}

template<class T>
void deduce3(T&& args,string arg){
cout << "template<class T> void deduce3(T args) " << " argument passed in was: " << arg << " deduced as: " << typeid(T).name() << endl;
cout <<  "Is const: " << boolalpha << is_const<T>::value << endl;
cout <<  "Is reference: " << boolalpha << is_reference<T>::value << endl;
cout <<  "Is rvalue reference: " << boolalpha << is_rvalue_reference<T>::value << endl;
cout <<  "Is pointer: " << boolalpha << is_pointer<T>::value << endl;
}

int _tmain(int argc, _TCHAR* argv[])
{

int a = 1;
const int b = 5;
int c[] = {12};
int const d[] = {12};
int& e = a;

deduce1(a,"int a = 1");
deduce1(b,"const int b = 5");
deduce1(c,"int c[] = {12}");
deduce1(d,"int const d[] = {12}"); // would have thought is_const<T> would return true any comments?
deduce1(e,"int& e = a");
deduce1(5,"5");

deduce2(a,"int a = 1");
deduce2(b,"const int b = 5"); //would have though type would be deduced as int const comments?
deduce2(c,"int c[] = {12}"); // why is this not returning true as a reference?
deduce2(d,"int const d[] = {12}"); // would have thought is_const<T> would return true any comments
deduce2(e,"int& e = a");

deduce3(a,"int a = 1");
deduce3(b,"const int b = 5");
deduce3(c,"int c[] = {12}"); // why is this not returning true as a reference?
deduce3(d,"int const d[] = {12}"); // would have thought is_const<T> would return true any comments
deduce3(e,"int& e = a");
deduce3(string("Hello"),"string(\"Hello\")"); // why not rvalue reference

return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T10:24:00.847

我会依次处理你的每一条评论。

1.  `deduce1`与`d`：

    ```
    template <class T> void deduce1(T args, string arg);
    int const d[] = {12};
    deduce1(d, "int const d[] = {12}"); // would have thought is_const<T> would return true 
    ```

    第一件重要的事情是，您不能在 C++ 中按值将数组作为参数传递。表示数组的表达式几乎会立即衰减为指向其第一个元素的指针。所以`T`这里推导出的类型将是`int const *`.

    那么，为什么这不起作用？问题是*指针*不是`const`. 指针指向的`int`s 是`const`。如果要报告`const`所指向类型的正确性，则需要`remove_pointer`在检查`const`正确性之前使用。因此，您将`const`检查更改为：

    ```
    cout <<  "Is const: " << boolalpha << is_const<typename remove_pointer<T>::type>::value << endl; 
    ```

    但是，它之前给出的结果是正确的答案。指针确实不是`const`。事实上，即使指针是`const`，顶层`consts`在类型推导完成之前被剥离，所以无论如何`T`都不会`const`。这样做的原因是，如果您按值传递，那么您实际上并不关心`const`参数的有效性，因为无论如何您都在复制它。

2.  `deduce2`与`b`：

    ```
    template <class T> void deduce2(T& args,string arg);
    const int b = 5;
    deduce2(b,"const int b = 5"); //would have though type would be deduced as int const 
    ```

    不确定这里发生了什么，但我的输出是：

    ```
    deduced as: i
    Is const: true
    Is reference: false
    Is pointer: false 
    ```

    完全符合预期。

3.  `deduce2`与`c`：

    ```
    int c[] = {12};
    deduce2(c,"int c[] = {12}"); // why is this not returning true as a reference? 
    ```

    它是说它不是一个参考，出于同样的原因，所有的`deduce2`电话都这么说（你也有这个问题`deduce3`）。在您的函数中，您正在检查类型，`T`但类型`args`是`T&`。您只检查`&`. 所以在这里，`args`is的类型，`int (&)[1] c`但您只是在检查是否`int [1]`是参考。通过在检查中使用`decltype(args)`而不是修复它。`T`

4.  `deduce2`与`d`：

    ```
    int const d[] = {12};
    deduce2(d,"int const d[] = {12}"); // would have thought is_const<T> would return true 
    ```

    `deduce1`与（第 1 项）相同的问题`d`。

5.  `deduce3`与`c`：

    ```
    template <class T> void deduce3(T&& args,string arg);
    int c[] = {12};
    deduce3(c,"int c[] = {12}"); // why is this not returning true as a reference? 
    ```

    `deduce2`与（第 3 项）相同的问题`c`。

6.  `deduce3`与`d`：

    ```
    int const d[] = {12};
    deduce3(d,"int const d[] = {12}"); // would have thought is_const<T> would return true 
    ```

    `deduce1`与（第 1 项）相同的问题`d`。

7.  `deduce3`与`string("Hello")`：

    ```
    deduce3(string("Hello"),"string(\"Hello\")"); // why not rvalue reference 
    ```

    我将假设您对“通用参考”有所了解。Scott Meyers 有一篇很棒的[文章](http://isocpp.org/blog/2012/11/universal-references-in-c11-scott-meyers)和关于这个主题的[演讲。](http://channel9.msdn.com/Shows/Going+Deep/Cpp-and-Beyond-2012-Scott-Meyers-Universal-References-in-Cpp11)

    在这种情况下，因为`string("Hello")`是一个右值表达式，所以类型`T`被推导为`string`（通过推导右值引用类型的规则`T&&`）。的类型`args`是现在`string &&`。所以如果你检查是否`decltype(args)`是一个右值，它会说是真的。但`T`它本身不是。

如果您修复代码以使所有类型特征 on`T`现在都 on `decltype(args)`，您将遇到一个新问题。当 args 是引用类型时，您期望的某些类型`const`不会是。那是因为没有`const`参考之类的东西。与第 1 项中的使用类似`remove_pointer`，您需要使用`remove_reference`来获取底层类型并检查是否为`const`.

# php - PHP 'include' Navigation 在子文件夹中使用时会自动添加 '../'

> ID：13265847
> 
> 赞同：0
> 
> 时间：2012-11-07T08:34:34.347
> 
> 标签：php, html, include, navigation

我花了几天时间寻找这个问题的解决方案，在过去的几年里已经给出了很多，但我仍然无法理解它。我是 PHP 的初学者，因此不胜感激。

我不确定是否有一个通用的解决方案可以同时与 WAMP localhost 和在线网站一起使用。

我的`navMain.php`文件是`/includes`文件夹。

假设我在根文件夹中（在 PC 和`index.php`服务器上）。我也将在文件夹中。`contact.php``wamp/www/SITENAME/``httpdocs/``books.php``/media`

我在`navMain.php`文件中创建了什么代码，以便在`index.php`读取它时生成导航链接到`contact.php`as`<a href="contact.php">`但是当`books.php`读取它时它是`<a href="../contact.php">`或更简单的东西？

我找到了类似的解决方案，`$path = $_SERVER['DOCUMENT_ROOT'];`但仍然不确定这是否适用于像我这样的问题并且应该放在`navMain.php`文件中，或者`navMain.php`在`index.php`.

此外，当我尝试找到的解决方案时，我不知道如何使它在本地主机和/或 Web 服务器上正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T08:39:53.973

您应该始终使用绝对路径，即以 . 开头的路径`/`。

无论当前网址如何，绝对路径始终有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T08:47:01.823

把它放在一个包含的文件中也许......

将路径逻辑与 ' `$root_path =`' 变量放在一起 - 这样，如果您在在线或离线测试，它就会起作用

```
if($_SERVER['HTTP_HOST'] == 'www.mydomain.com'){ // put in here your live domain name - echo $_SERVER['HTTP_HOST'] to ensure its correct
    // this is your online server
    $root_path = "/hello";
}else{
    // this is your offline test environment
    $root_path = "local/hello/";
} 
```

然后在你的页面...

```
<a href="<?php echo $root_path;?>/file.php">Link</a> 
```

# post - 如何从 rails app 在linkedin上发帖？

> ID：13265850
> 
> 赞同：0
> 
> 时间：2012-11-07T08:34:38.660
> 
> 标签：post, gem, ruby-on-rails-3.2, linkedin

是否可以通过 ruby​​ on rails 应用程序在linkedin 中发布。如果是这样，请指导我如何去做。

我用谷歌搜索了很多，但没有得到任何正确的解决方案。

我的代码如下。

对于控制器，

```
require 'rubygems'
require 'linkedin'
class AuthController < ApplicationController

def index
 LinkedIn.configure do |config|
  config.token = "somekey"
  config.secret = "somesecret"
end

LINKEDIN_CONFIGURATION = { :site => 'https://api.linkedin.com',
                    :authorize_path => '/uas/oauth/authenticate',
                    :request_token_path =>'/uas/oauth/requestToken?scope=r_basicprofile+r_emailaddress+r_network+r_contactinfo',
                    :access_token_path => '/uas/oauth/accessToken' }
client = LinkedIn::Client.new("some_key", "some_secret",  LINKEDIN_CONFIGURATION )
request_token = client.request_token(:oauth_callback => 
                              "http://#{request.host_with_port}/auth/callback")
session[:rtoken] = request_token.token # request token
session[:rsecret] = request_token.secret # request secret
redirect_to client.request_token.authorize_url
end

def create
   @user = User.find_or_create_from_auth_hash(auth_hash)
   self.current_user = @user
   redirect_to '/'
end

 protected
  def auth_hash
   request.env['omniauth.auth']
  end

def callback
 if session[:atoken].nil?
  pin = params[:oauth_verifier]
  atoken, asecret = client.authorize_from_request(session[:rtoken], session[:rsecret], pin)
  session[:atoken] = atoken # authentication token
  session[:asecret] = asecret # authentication secret
 else
  client.authorize_from_access(session[:atoken], session[:asecret])
 end
 @profile = client.profile(:fields => [:first_name]).first_name
 @profiles = client.profile(:fields => [:last_name]).last_name  
 @positions = client.profile(:fields => %w(positions)).positions
 @headline = client.profile(:fields => [:headline]).headline
 @educations = client.profile(:fields => [:educations]).educations
 @post = client.add_share({:comment => "blah"})
@user = client.profile(:fields => %w(positions))
@companies = @user.positions.all.map{|t| t.company}
# And if you want the most recent company it can be accessed via companies[0]
 end
end 
```

配置/初始化程序/omniauth.rb

```
Rails.application.config.middleware.use OmniAuth::Builder do
provider :linkedin, "some_key", "some_secret", :scope => 'r_fullprofile  r_emailaddress r_network', :fields => ["id", "email-address", "first-name", "last-name", "headline", "industry", "picture-url", "public-profile-url", "location", "connections"]
end 
```

在视图中，

```
Headline : <%= @headline %>
</br>
Name : <%= @profile %> <%= @profiles %>
<%= @positions %>
<%= @post %>
<%= @user %>
<%= @educations %>
<%= @companies %>
</br>
<br/>
WELCOME !!!
You have successfully logged in to  through Your LinkedIn Profile !!! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T01:39:08.607

你说的帖子是什么意思？你到底想发布什么？我假设您希望从您的应用程序中发布网络更新。在这种情况下，您需要授予您的应用“rw_nus”权限。只需将该成员权限附加到您的 :request_token_path

```
:request_token_path =>'/uas/oauth/requestToken?scope=r_basicprofile+r_emailaddress+r_network+r_contactinfo+rw_nus' 
```

# objective-c - 我如何将 b2Vec2（box2d 顶点类型）添加到 NSMutableArray

> ID：13265857
> 
> 赞同：1
> 
> 时间：2012-11-07T08:35:30.703
> 
> 标签：objective-c, cocos2d-iphone, objective-c++, box2d-iphone

```
NSMutableArray *sumPositionArray;
sumPositionArray = [[NSMutableArray alloc] init];  
for (int i = 0; i < 10; i++) 
{
      b2Body *currentBody = (b2Body*)[[bodies objectAtIndex:i] pointerValue];
      b2Vec2 innerPosition=innerCircleBody->GetPosition(); 
      float theta = deltaAngle*i; 
      float x = radius*cosf(theta);
      float y = radius*sinf(theta);
      b2Vec2 circlePosition = b2Vec2(x/PTM_RATIO, y/PTM_RATIO);
      b2Vec2 sumPosition=innerPosition+circlePosition;
      b2Vec2 impulse = b2Vec2(0,0);
      b2Vec2 sumposition=innerPosition+circlePosition;
      [sumPositionArray addObject:[NSValue valueWithPointer:sumPosition]];
} 
```

**我收到一条错误消息：** 没有从 b2vec2 到 'const void *' 的可行转换

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T08:54:51.493

然后将 B2Vec2 坐标转换为 CGPoint，您可以通过使用 NSValue 将它们插入到数组中。

```
NSArray *points = [NSArray arrayWithObjects:
                     [NSValue valueWithCGPoint:CGPointMake(5.5, 6.6)],
                     [NSValue valueWithCGPoint:CGPointMake(7.7, 8.8)],
                     nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T09:39:23.773

它正在工作。谢谢@Shailesh

```
for (int i = 0; i < 10; i++) 
{
 CGPoint currentBo =[[sumPositionArray objectAtIndex:i] CGPointValue];  // get CGPoint into Array

} 
```

# python - 如何使用规则在 Outlook 中触发 python 脚本？

> ID：13265861
> 
> 赞同：10
> 
> 时间：2012-11-07T08:35:47.270
> 
> 标签：python, outlook

有没有办法使用 Outlook 规则运行 python 脚本。我看到一个运行脚本的选项，但是当我单击时，会出现一个空框。我如何在那个框中获取脚本。我知道这可以通过 VBS 完成，但我希望在该窗口中出现一个 python 脚本。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-12T15:46:16.970

您提到的“框”用于选择您编写的 Outlook VB 脚本。如果您想使用此方法运行 python 代码，您将需要编写触发它的 VBA，然后选择它。

Outlook 中的 Alt+F11 打开 VBA 窗口，然后在 Project1 下的空白处，右键单击并插入模块。打开模块并开始编写脚本。

要运行你的 python 代码，[我假设你已经为 Python 设置了 Windows 环境 PATH 变量] 使用以下格式作为子例程

```
Sub run_python()
Shell("python C:\path\to\the\filename.py")
End Sub 
```

上面的“Shell”命令将“”中的内容传递给 Windows shell 提示符。如果它在那里运行，它就会在这里运行——或者这就是理论！显然，您需要文件路径中的正确驱动器号。

但是，要获得出现在脚本列表中的内容，它必须是特定类型的脚本/项目。您可以使用“Outlook.MailItem”：

```
Sub run_python(Item As Outlook.MailItem)
Shell("python C:\path\to\the\filename.py")
End Sub 
```

这应该够了吧。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-07T08:51:01.527

我自己从来没有为 Outlook 做过这个，但是 python win32extensions 适用于所有支持 COM [http://starship.python.net/~skippy/win32/Downloads.html](http://starship.python.net/~skippy/win32/Downloads.html)

# xml - xcode中的xml解析

> ID：13265867
> 
> 赞同：-1
> 
> 时间：2012-11-07T08:36:14.623
> 
> 标签：xml, xcode, parsing

我在 XCode 中解析 XML 时遇到了一些问题。这是我的 XML 文件。

```
<?xml version="1.0" encoding="utf-8">
<responses>
    <response name="login" type="call" datatype="string">123qwdaasdt6708uu12edhajsup71y2ehno;aishdp18yu2hbd8y
    </response>
</responses> 
```

如何解析和获取字符串“123qwdaasdt6708...8y”？以及如何解析名称“登录”并将其显示为字符串变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T23:44:18.850

**重点不是**

```
<?xml version="1.0" encoding="utf-8"> 
```

`<?xml version="1.0" encoding="utf-8"?>`

这使它更好地工作；）

并做你想做的事：

**输出 123qwdaasdt6708...8y 并获取 name="login"**

您应该执行以下操作：

```
 public static void debugXML(){

        try {

            Document doc = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(new File("D:\\Loic_Workspace\\Test2\\res\\test.xml"));

            NodeList ndList = doc.getElementsByTagName("response");

            System.out.println(ndList.item(0).getTextContent());
            System.out.println(ndList.item(0).getAttributes().item(0));

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (SAXException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ParserConfigurationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

} 
```

**System.out.println(ndList.item(0).getTextContent())** ==> 给出 123qwdaasdt6708uu12edhajsup71y2ehno;aishdp18yu2hbd8y

**System.out.println(ndList.item(0).getAttributes().item(0));** ==> 给出 name="login"，如果您刚刚登录，只需执行*System.out.println(ndList.item(0).getAttributes().item(0).getTextContent());*

希望能帮助到你 ;）

# javascript - 在 JavaScript 中对 Array 实现函数

> ID：13265868
> 
> 赞同：0
> 
> 时间：2012-11-07T08:36:14.407
> 
> 标签：javascript, arrays

我正在编写的 JS 脚本得到一个非常奇怪的响应。我对 JS 有点陌生，所以我对更改现有类（在本例中为数组）知之甚少。

我希望我做得正确，但这是我试图运行的代码的 JSFiddles（抽象得很明显，但我相信我已经包含了所有相关部分）

[http://jsfiddle.net/UMHn5/](http://jsfiddle.net/UMHn5/)

我认为问题在于我不知道如何正确更改 Array 类，因为当我删除 Array.prototype 的“删除”更改时，我得到一个不同的错误（数组没有删除功能） .

我得到的异常如下：

```
`Uncaught TypeError: Object function (from, to) {
var rest = this.slice((to || from) + 1 || this.length);
  this.length = from < 0 ? this.length + from : from;
  return this.push.apply(this, rest);
} has no method 'shift'` 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T08:53:55.470

当您循环访问 的成员时`strokes`，您将获得密钥`0`，`1`并且`"remove"`。当您使用您获得的第三个键`strokes["remove"]`（与 相同`strokes.remove`）时，它将返回`remove`您添加到数组原型中的方法，并且您会收到该错误。

循环遍历数组的索引而不是数组的成员：

```
for (var i = 0; i < strokes.length; i++) {
  strokes[i].shift(.05);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T08:50:07.700

在中`for (sn in strokes)`，分配给“删除”时会出错`sn`，的值`strokes[sn]`是您添加到数组而不是笔划实例的函数。

改成

```
for (var i = 0; i < strokes.length; i++) {
  strokes[i].shift(.05);
} 
```

或先测试类型

```
if (typeof strokes[sn] != 'function') {
  ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T08:39:08.983

尝试这个：

```
for (var i = 0; i < strokes.length; i++) {
    strokes[i].shift(.05); //Where I'm getting the error
} 
```

jsFiddle：http: [//jsfiddle.net/UMHn5/2/](http://jsfiddle.net/UMHn5/2/)

您没有在小提琴中包含原型。

# wcf - 使用 IIS 的 WCF 应用程序是否需要客户额外安装？

> ID：13265872
> 
> 赞同：1
> 
> 时间：2012-11-07T08:36:17.527
> 
> 标签：wcf, iis

将在 WCF 应用程序上工作，该应用程序将与 apache 服务器（我们托管）以及 sharepoint（客户托管）进行通信。WCF 应用程序也将部署在客户端。

我的问题是，这是否需要客户安装某些东西（IIS？）才能为他们工作？当然，我们更希望他们不必这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T10:16:03.147

IIS 不是托管 WCF 服务的唯一方式 - 您还可以在另一个 .NET 应用程序中或通过 Windows 服务自行托管它。

例如，如果您使用控制台应用程序来托管您的服务，那么客户设备上唯一需要的就是适当的 .NET 运行时（与 WCF 服务内置的运行时相同）。

查看[托管服务](http://msdn.microsoft.com/en-us/library/ms730158%28v=vs.100%29.aspx)以获取更多信息。

# javascript - 从 HTML 对象中查找特定的类名在 JQuery 中不起作用

> ID：13265874
> 
> 赞同：0
> 
> 时间：2012-11-07T08:36:21.280
> 
> 标签：javascript, jquery

任务：为具有特定类名的 HTML 元素使用函数。

简而言之：我有一个 Jquery 函数，它将通过添加在页面中设置所有样式但我需要，如果 a 的类名为“noStyle”，则不应执行该函数

这是我的jQuery：

```
var scr = jQuery.noConflict();
   scr(document).ready(function($){
    scr.fn.extend({

customStyle : function(options) {

  if(!scr.browser.msie || (scr.browser.msie&&scr.browser.version>6)){
  return this.each(function() {

                    function hasClass($currentSelected1, cls) {
                        return (' ' + $currentSelected1.className + ' ').indexOf(' ' + cls + ' ') > -1;
                    }

        var currentSelected = scr(this).find(':selected');

                    if(hasClass(scr(this)[0].outerHTML, 'noStyle') == false)
                        {
                            scr(this).after('<span class="customStyleSelectBox"><span class="customStyleSelectBoxInner">'+currentSelected.text()+'</span></span>').css({position:'absolute', opacity:0,fontSize:scr(this).next().css('font-size')});
                            var selectBoxSpan = scr(this).next();
                            var selectBoxWidth = parseInt(scr(this).width()) - parseInt(selectBoxSpan.css('padding-left')) -parseInt(selectBoxSpan.css('padding-right'));
                            var selectBoxSpanInner = selectBoxSpan.find(':first-child');
                            selectBoxSpan.css({display:'inline-block !important'});
                            selectBoxSpanInner.css({width:selectBoxWidth, display:'inline-block'});
                            var selectBoxHeight = parseInt() + parseInt(selectBoxSpan.css('padding-top')) + parseInt(selectBoxSpan.css('padding-bottom'));
                            scr(this).height(selectBoxHeight).change(function(){
                            selectBoxSpanInner.text(scr(this).find(':selected').text()).parent().addClass('changed');
                            });
                        }
                        else{
                            alert("sdklj");
                        }

                    });
                }
            }
        });
    });
    scr(function(){
        scr('select').customStyle();
    }); 
```

.phtml 是：

```
<select  name="board_category_id[]" id="board_category_id" class="noStyle board_category_class" multiple="multiple" style="opacity: 1 !important;position: relative !important;width: 100% !important;" row="2"  onchange="changeselected(this)" style="background-image: none !important;">
                            <?php foreach ($result as $pincategory) { ?>
                                    <option  value=" <?php echo $pincategory->category_id; ?>" id=" <?php echo $pincategory->category_id; ?>"  > <?php echo $pincategory->category_name; ?></option>
                                <?php } ?>
                            </select> 
```

您无需担心 php 标签，因为它可以完美运行。

实时链接是：http: [//iseofirm.net/service/SVE177/](http://iseofirm.net/service/SVE177/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T08:40:32.820

试试这个：

```
if(!$(this).hasClass('noStyle')) {....} 
```

# android - 将哈希表序列化为android上的文件

> ID：13265877
> 
> 赞同：2
> 
> 时间：2012-11-07T08:36:31.390
> 
> 标签：android, serialization, hashtable

所以我对序列化场景很陌生，我不知道是否可以序列化哈希表然后将其保存到文件中......但这是我迄今为止尝试过的......出于某种原因到我的代码部分而不是执行 Try 块？

```
public void addDataIntoFlashCardFile(Context context, Hashtable<Integer, ArrayList<Deck>> data) {
        try {
            FileOutputStream fos = context.openFileOutput(
                    FLASHCARDS_FILENAME, Context.MODE_PRIVATE
                            | Context.MODE_APPEND);
            ObjectOutputStream osw = new ObjectOutputStream(fos);
            osw.writeObject(data);

    } catch (FileNotFoundException e) {
        // catch errors opening file
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
        Toast.makeText(context, "calles", Toast.LENGTH_SHORT).show();
    }
    } 
```

在这里，我尝试从文件中读取它（这不起作用，因为它首先不会写入文件）

```
try {

            Hashtable<Integer, ArrayList<Deck>> temp = new Hashtable<Integer, ArrayList<Deck>>();
            FileInputStream myIn = context.openFileInput(FLASHCARDS_FILENAME);
            ObjectInputStream IS = new ObjectInputStream(myIn);
            Toast.makeText(context, "here", Toast.LENGTH_SHORT).show();
            try {

                temp = (Hashtable<Integer, ArrayList<Deck>>)IS.readObject();
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();

            }
            IS.close();

            //testing purposes
            for (int i = 0; i < temp.size(); i++) {
                for (int p = 0; p < temp.get(i).size(); p++) {
                    for (int q = 0; q < temp.get(i).get(p).getDeck().size(); q++) {
                    Toast.makeText(context, temp.get(i).get(p).getDeck().get(q).getQuestion(), Toast.LENGTH_LONG).show();
                    }
                }
            }
        }
        catch (IOException e) {
            e.printStackTrace();
            Toast.makeText(context, "here", Toast.LENGTH_SHORT).show();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T08:47:51.807

您实际上可以使用 JSONObject。

第 1 步：创建您的 JSONObject：

```
JSONObject myAwesomeObject = new JSONObject();
JSONArray myAwesomeArray = new JSONArray(); 
```

第 2 步：遍历 HashMap 并将其添加到 JSONObject

```
for (Entry<Integer, ArrayList<Deck>> entry : map.entrySet())
{
    ArrayList<Deck> decks = temp.get(entry);
    JSONObject JSONDeck = new JSONObject();
    for (Deck deck : decks){
        JSONDeck.add("deck", deck.getWhateverDataDeckContains());
    }
    myAwesomeArray.add("deck", JSONDeck);
}
myAwesomeObject.add("deck_collection", myAwesomeArray); 
```

第 3 步：获取包含您的表的字符串：

```
String myAwesomeContents = myAwesomeObject.toString(); 
```

第 4 步：将其作为纯文本插入文件中。

要反序列化它，您只需遍历您的 JSONObject 并填写一个新表。

第 1 步：从文件中取回字符串。

第 2 步：创建包含该字符串的 JSONObject 的新实例：

```
JSONObject deserialized = new JSONObject(stringContainingYourDataInJSON); 
```

第 3 步：取回您的简单数据：

```
ArrayList<Deck> decksArray = new ArrayList<Deck>();
JSONArray decks = deserialized.getJSONArray("deck_collection");
for (int i=0; i<decks.length(); i++){
    JSONObject deck = decks.get(i);
    String name = deck.getString("name");
    int length = deck.getInt("length");
    // etc
    Deck deckPojo = new Deck();
    deckPojo.setWhatever(whateverParamsYouWantToSet);
    decksArray.add(deckPojo);
 } 
```

# c# - 使用c#的windows窗体中的不可关闭窗口？

> ID：13265883
> 
> 赞同：-1
> 
> 时间：2012-11-07T08:36:39.250
> 
> 标签：c#, .net

当我单击 Windows 表单上的提交按钮时，它应该会弹出一个没有关闭 (X) 按钮的弹出窗口（询问是或否），即使我们单击该弹出窗口应闪烁的任何位置以响应该响应。

那么该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T08:40:11.310

订阅表单的 'Closing' 事件，进行一些检查，如果您想阻止表单关闭，请将 e.Cancel 设置为 true。

```
 private bool _incomplete;

    private void Form1_Closing(object sender, System.ComponentModel.CancelEventArgs e)
    {
        if (_incomplete)
        {
            e.Cancel = true;
        }
    } 
```

PS，下次发帖前请先搜索谷歌，这不是 StackOverflow 的工作方式，你看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T08:51:06.930

```
private void button1_Click(object sender, EventArgs e)    
{
   MessageBox.Show("Test","abc",MessageBoxButtons.YesNo,MessageBoxIcon.Information);
} 
```

# c# - 用于文件（客户端）和 SQL Server 数据库（服务器）同步的 Microsoft Sync Framework

> ID：13265884
> 
> 赞同：1
> 
> 时间：2012-11-07T08:36:40.043
> 
> 标签：c#, sql-server, sync, microsoft-sync-framework

我正在尝试使用 Microsoft Sync Framework 实现同步解决方案。服务器将是 SQL 服务器数据库，其中包含 FileStream 中的文档，客户端将是文件系统（Windows 操作系统）。我已经看到文件同步提供程序与 Azure Blob 存储/自定义提供程序。但是没有看到这个。有没有人对此有任何想法。我的应用场景是：数据库服务器通过SQL server的FileStream机制以字节数组的形式包含文件/文档。同步活动会将文档从 SQL 服务器同步到任何给定的文件系统。请帮帮我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T06:24:11.877

您必须构建自己的自定义提供程序才能使其正常工作。现有的文件同步提供程序和 sql 同步提供程序不能相互配合。

# oracle - UTL_SMTP：在邮件正文中发送html+css表和在单个字母中发送附件的过程

> ID：13265886
> 
> 赞同：0
> 
> 时间：2012-11-07T08:36:44.863
> 
> 标签：oracle, plsql, smtp, attachment

任何人都可以帮助我更正代码以发送带有附件的邮件。因此，我应该发送一封带有小表格（使用 html 和 css 准备）的邮件正文和 .csv 作为附件。该过程仅适用于消息正文，但它不想发送附件 =(：

```
CREATE OR REPLACE PROCEDURE test_send_mail(
    p_sender    IN VARCHAR2,
    p_recipient IN VARCHAR2,
    p_subject   IN VARCHAR2,
    p_message   IN CLOB – table in html)
as
    l_mailhost VARCHAR2(255) := 'localhost';
    l_mail_conn utl_smtp.connection;

    v_add_src  VARCHAR2(4000);
    v_addr     VARCHAR2(4000);
    slen number := 1;

    crlf VARCHAR2(2)  := chr(13)||chr(10);

    i      NUMBER(12);
    len   NUMBER (12);
    part  NUMBER(12) := 16384;

    -- css for table in letter body
    l_stylesheet CLOB := '
       <html><head>
       <style type="text/css">
                   body     { font-family     : Verdana, Arial;
                              font-size       : 10pt;}

                   .green   { color           : #00AA00;
                              font-weight     : bold;}

                   .red     { color           : #FF0000;
                              font-weight     : bold;}

                   pre      { margin-left     : 10px;}

                   table    { empty-cells     : show;
                              border-collapse : collapse;
                              width           : 100%;
                              border          : solid 2px #444444;}

                   td       { border          : solid 1px #444444;
                             font-size       : 12pt;
                              padding         : 2px;}

                   th       { background      : #EEEEEE;
                              border          : solid 1px #444444;
                              font-size       : 12pt;
                              padding         : 2px;}

                   dt       { font-weight     : bold; }

                  </style>
                 </head>
                 <body>';

-- variables for attachment
/*Table header in attachment*/
lv_mycolumns   VARCHAR2(32000):= 'A1'||chr(9)||'A2'||chr(9)||'A3'||chr(13)||chr(10);               
lv_message     VARCHAR2(32000);

CURSOR cur_query
IS
SELECT 'help' as  A1, 'me' as  A3, 'please' as  A3
from DUAL; -- I would like to see this table in the attachment

attached_file_name VARCHAR2(50):= 'REPORT_';
ddate VARCHAR2(16):= TO_CHAR (SYSDATE, 'YYYYMMDDHH24MISS');
filetype varchar(10):= '.xls'; -- really csv  

BEGIN
   l_mail_conn := utl_smtp.open_connection(l_mailhost, 25);
    utl_smtp.helo(l_mail_conn, l_mailhost);
    utl_smtp.mail(l_mail_conn, p_sender);
    if(instr(p_recipient,';') = 0) then
        utl_smtp.rcpt(l_mail_conn, p_recipient);
    else
        v_add_src := p_recipient || ';';
        while(instr(v_add_src,';',slen) > 0) loop
            v_addr := substr(v_add_src, slen, instr(substr(v_add_src, slen),';')-1);
            slen := slen+instr(substr(v_add_src, slen),';');
            Dbms_Output.put_line('rcpt ' || v_addr);
            utl_smtp.rcpt(l_mail_conn, v_addr);
    end loop;

  end if;

    utl_smtp.open_data(l_mail_conn );
    utl_smtp.write_data(l_mail_conn,
     'MIME-version: 1.0' || crlf ||
     'Content-Type: text/html; charset=ISO-8859-15' || crlf ||
     'Content-Transfer-Encoding: 8bit' || crlf ||
     'Date: '   || to_char(sysdate, 'Dy, DD Mon YYYY hh24:mi:ss') || crlf ||
     'From: '   || p_sender || crlf ||
     'Subject: '|| p_subject || crlf ||
     'To: '     || p_recipient || crlf);
    utl_smtp.write_raw_data(l_mail_conn, utl_raw.cast_to_raw(l_stylesheet));

    i   := 1;
    len := DBMS_LOB.getLength(p_message);
    WHILE (i < len) LOOP
        utl_smtp.write_raw_data(l_mail_conn, utl_raw.cast_to_raw(DBMS_LOB.SubStr(p_message,part, i)));
        i := i + part;
    END LOOP;
    utl_smtp.write_raw_data(l_mail_conn, utl_raw.cast_to_raw('</body></html>'));

-- begin the attachment. This part I need to correct. How?

FOR rec IN cur_query
   LOOP
      lv_message := rec.A1||chr(9)||rec.A2||chr(9)||rec.A3||chr(13)||chr(10);
   END LOOP;

  -- end connectin
    utl_smtp.close_data(l_mail_conn );
    utl_smtp.quit(l_mail_conn);
end; 
```

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:27:29.590

您没有设置正确的内容类型，也没有正确定义边界（阅读 Content-Type: multipart/mixed）。

例如（还请记住，如果要附加二进制文件，则必须对其进行 base64 编码）：

边界“---YOURBOUNDARY”根本不应该出现在电子邮件正文中，因此请确保选择永远不会出现的内容:)

```
 utl_smtp.open_data(l_mail_conn );
    utl_smtp.write_data(l_mail_conn,
     'MIME-version: 1.0' || crlf ||
     'Date: '   || to_char(sysdate, 'Dy, DD Mon YYYY hh24:mi:ss') || crlf ||
     'From: '   || p_sender || crlf ||
     'Subject: '|| p_subject || crlf ||
     'To: '     || p_recipient || crlf || 
     'Content-Type: multipart/mixed;' || crlf ||
     ' boundary="---YOURBOUNDARY"' || crlf ||crlf);

    utl_smtp.write_data(l_mail_conn, '-----YOURBOUNDARY'||crlf);
    utl_smtp.write_data(l_mail_conn, 'Content-Type: text/html' || crlf);
    utl_smtp.write_data(l_mail_conn,  'Content-Transfer-Encoding: 8bit' || crlf || crlf);
    utl_smtp.write_raw_data(l_mail_conn, utl_raw.cast_to_raw(l_stylesheet));

    i   := 1;
    len := DBMS_LOB.getLength(p_message);
    WHILE (i < len) LOOP
        utl_smtp.write_raw_data(l_mail_conn, utl_raw.cast_to_raw(DBMS_LOB.SubStr(p_message,part, i)));
        i := i + part;
    END LOOP;
    utl_smtp.write_raw_data(l_mail_conn, utl_raw.cast_to_raw('</body></html>'));
    utl_smtp.write_data(l_mail_conn,  crlf || crlf);

-- begin the attachment. This part I need to correct. How?

    utl_smtp.write_data(l_mail_conn, '-----YOURBOUNDARY'||crlf);
    utl_smtp.write_data(l_mail_conn, 'Content-Type: text/plain;'||crlf);
    utl_smtp.write_data(l_mail_conn,  'Content-Transfer-Encoding: 8bit' || crlf);
    utl_smtp.write_data(l_mail_conn,'Content-Disposition: attachment;'|| crlf);
    utl_smtp.write_data(l_mail_conn, ' filename="attach.txt"'|| crlf|| crlf);
FOR rec IN cur_query
   LOOP
      utl_smtp.write_data(l_mail_conn, rec.A1||chr(9)||rec.A2||chr(9)||rec.A3||crlf);
   END LOOP;

   utl_smtp.write_data(l_mail_conn, crlf||'-----YOURBOUNDARY--');

  -- end connectin
    utl_smtp.close_data(l_mail_conn );
    utl_smtp.quit(l_mail_conn); 
```

即带有我的代码示例的正文输出如下：

```
-----YOURBOUNDARY
Content-Type: text/html

<html><head>
       <style type="text/css">
                   body     { font-family     : Verdana, Arial;
                              font-size       : 10pt;}

                   .green   { color           : #00AA00;
                              font-weight     : bold;}

                   .red     { color           : #FF0000;
                              font-weight     : bold;}

                   pre      { margin-left     : 10px;}

                   table    { empty-cells     : show;
                              border-collapse : collapse;
                              width           : 100%;
                              border          : solid 2px #444444;}

                   td       { border          : solid 1px #444444;
                             font-size       : 12pt;
                              padding         : 2px;}

                   th       { background      : #EEEEEE;
                              border          : solid 1px #444444;
                              font-size       : 12pt;
                              padding         : 2px;}

                   dt       { font-weight     : bold; }

                  </style>
                 </head>
                 <body>test123</body></html>

-----YOURBOUNDARY
Content-Type: text/plain;
Content-Disposition: attachment;
 filename="attach.txt"

help    me  please

-----YOURBOUNDARY-- 
```

# c# - 我对 C# WPF WebBrowser 类有疑问

> ID：13265891
> 
> 赞同：0
> 
> 时间：2012-11-07T08:36:57.267
> 
> 标签：c#, wpf, browser

我对 C# WPF WebBrowser 类有疑问

我有一个使用 WebBrowser 类的 C# WPF 应用程序。我已经覆盖了 LoadComplete 方法以及其他几种方法来尝试在页面加载后获取 html 内容：

```
 String URL = textBox1.Text;

    URL = URL.Replace(' ', '+');

    webbrowser1 = new WebBrowser();

    webbrowser1.LoadCompleted += new LoadCompletedEventHandler(webbrowser1_LoadCompleted);
    webbrowser1.Loaded += new RoutedEventHandler(webbrowser1_Loaded);
    webbrowser1.Navigated += webbrowser1_Navigated;

    grd.Children.Add(webbrowser1);

    int i = 0;
    webbrowser1.Navigate(new Uri("https://www.google.com/#q=" + URL + .... 
```

我已经在这些方法中放置了断点，并且我已经编写了代码来从 WebBrowser 类的 HTMLDocument 中获取内部 HTML，并且我已经将 html 文本输出到每个方法的不同文件中。

然后我运行了程序。在程序运行时，我会观察实际程序以查看文档是否加载。正在加载的网页是谷歌搜索查询的结果页面。

从视觉上看，当我运行代码时，当 LoadComplete、Loaded 和 Navagated 的每个方法被命中时，输出是一个空白的白色页面。只有在方法被点击（几次）并且程序空闲后，才会显示结果页面。

输出到文件的 HTML 代码不代表 google 搜索结果页面。相反，它代表 google 主页并且没有任何结果。有任何想法吗？如何以编程方式获取结果页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:01:40.307

尝试`https://www.google.com.au/search?q=query`改用，即

```
webbrowser1.Navigate(new Uri("https://www.google.com/search?q=" + URL + .... 
```

# c# - 集合的数据绑定

> ID：13265892
> 
> 赞同：1
> 
> 时间：2012-11-07T08:36:57.290
> 
> 标签：c#, data-binding, collections

我只想将一个集合绑定到另一个集合：假设有一个

```
List<string> original = new List<string>(); 
```

并且有一个

```
List<string> extended = 
           new List<string>(from curItem in originals select curItem + "_extension"); 
```

因此扩展的项目与原始项目相同，但末尾带有“_extension”。

我想要的是将扩展绑定到原始，这样如果原始更改，扩展也会更改。

我知道我可以使用事件并每次都重新创建扩展。但我认为这不是有效的。

编辑：可以说：原始很大，重新创建扩展的单个元素太累了，创建单个元素也太累了。所以我想要有两个列表（或集合），其中 on 观察另一个并添加或删除更改，如 Wpf 中的数据绑定，但添加扩展。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T09:01:33.797

您可以使用[`BindingList<T>`](http://msdn.microsoft.com/en-us/library/ms132679.aspx?cs-save-lang=1&cs-lang=csharp)System.ComponentModel 上的类来实现这一点……也许这就像用锤子杀死一只苍蝇，但可以用于更复杂的示例。

我认为您可以制作**这样的扩展方法**：

```
static class ExtensionMethods
{
    public static IEnumerable<string> Extensions(this IEnumerable<string> strs)
    {
        foreach (var str in strs)
        {
            yield return str + "_extension";
        }
    }
} 
```

你可以在每一个上使用它`IEnumerable<String>`：

```
foreach (var x in original.Extensions())
{
    Console.WriteLine(x);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T09:07:17.697

我认为有两种不同的方法：

1.  `extended`当原始更改时更改。
2.  根本不创建`extended`，而是创建一些类，它将在每个查询中添加“_extention”。

使用 bindingList，第一种方法将足够有效。

```
public class MyClass
{
    private BindingList<string> original = new BindingList<string>();
    private List<string> extended = new List<string>();

    public BindingList<string> Original
    {
        get
        {
            return original;
        }
    }

    public IEnumerable<string> Extended
    {
        get
        {
            return extended;
        }
    }

    public MyClass()
    {
        original.ListChanged += OnChanging;
    }

    void OnChanging(object sender, ListChangedEventArgs e)
    {
        switch (e.ListChangedType)
        {
            case ListChangedType.ItemAdded:
                extended.Add(original[e.NewIndex] + "_extention");
                break;
            case ListChangedType.ItemChanged:
                extended[e.NewIndex] = original[e.NewIndex] + "_extention";
                break;
            case ListChangedType.ItemDeleted:
                extended.RemoveAt(e.NewIndex);
                break;
            case ListChangedType.ItemMoved:
                string tmp = extended[e.NewIndex];
                extended[e.NewIndex] = extended[e.OldIndex];
                extended[e.OldIndex] = tmp;
                break;
            case ListChangedType.Reset:
                extended = new List<string>();
                foreach (string originalItem in original)
                {
                    extended.Add(originalItem + "_extention");
                }
                break;
        }
    }
} 
```

第二种方法看起来像这样：我们创建自己的类女巫包含链接到`originals`

```
public class MyExtendedList : IEnumerable
{
    private List<string> original;
    public MyExtendedList(List<String> original)
    {
        this.original = original;
    }

    public IEnumerator GetEnumerator()
    {
        return new ExtendedEnum(original);
    }
}

public class ExtendedEnum : IEnumerator
{
    private List<string> original;
    private int position = -1;
    public ExtendedEnum(List<String> original)
    {
        this.original = original;
    }

    public object Current
    {
        get
        {
            return CurrentString;
        }
    }

    public bool MoveNext()
    {
        position++;
        return (position < original.Count);
    }

    public void Reset()
    {
        position = -1;
    }

    public String CurrentString
    {
        get
        {
            try
            {
                return original[position] + "_extension";
            }
            catch (IndexOutOfRangeException)
            {
                throw new InvalidOperationException();
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-07T08:45:49.733

制作自己的课程：

```
public class MyClass
{
   private string _Item;
   public string Item 
   { 
       get { return _Item; }
       set 
       {
           if (_Item != value)
           {
               _Item = value;
               _ItemWithExtension = _Item + "_extension";
           }
       }
   }
   private string _ItemWithExtension;
   public string ItemWithExtension
   {
      get { return _ItemWithExtension; }
   }
}

var extended = 
           new List<MyClass>(from curItem in originals select 
                            new MyClass()
                            {
                                Item = curItem
                            }
                           ); 
```

# javascript - 如何动态更改表格单元格文本颜色？

> ID：13265899
> 
> 赞同：2
> 
> 时间：2012-11-07T08:37:31.633
> 
> 标签：javascript, html

我需要一个解决方案来通过 javascript 动态更改表格单元格的文本颜色。文本可以是以下颜色：蓝色、绿色、红色和黑色。

表格示例：

```
<html>
  <head>
    <title></title>
    <meta http-equiv="content-type" content="text/html; charset="UTF-8">
    <script src="jquery-mobile/jquery-1.6.4.min.js"       type="text/javascript"></script>
    <script src="jquery-mobile/jquery.mobile-1.0.min.js"  type="text/javascript"></script>
  </head>
  <body>
  <div data-role="page" id="page">
    <div data-role="content">
      <table width="100%" border="0" id="friends" class="menu">
        <tr id="friend1">
          <td>First name</td>
          <td>Surname</td>
        </tr>
        <tr id="friend2">
          <td>First name</td>
          <td>Surname</td>
        </tr>
        <tr id="friend3">
          <td>First name</td>
          <td>Surname</td>
        </tr>
        <tr id="friend4">
          <td>First name</td>
          <td>Surname</td>
        </tr>
        <tr id="friend5">
          <td>First name</td>
          <td>Surname</td>
        </tr>
      </table>
    </div>
  </div>
  </body>
</html> 
```

如何更改文本颜色？条件是，我可以通过 javascript 动态执行此操作并且不止一次。这意味着我需要设置一种颜色（例如红色），然后将颜色重置为黑色并将其设置为另一种颜色（例如蓝色）。

我看到了一些通过 id 设置颜色的示例，但我发现无法将此示例转移到表格单元格，并且每个单元格都可以有不同的颜色。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T08:44:13.533

你可以通过所有的td

```
var tds = document.getElementsByTagName("td");

for(var i = 0, j = tds.length; i < j; ++i)
   tds[i].style.color = "#00AA00"; 
```

或者

您可以通过作为特殊元素子级的 td：

```
var myNode = document.getElementById("friend2");
var tds = myNode.getElementsByTagName("td");

    for(var i = 0, j = tds.length; i < j; ++i)
       tds[i].style.color = "#00AA00"; 
```

问候！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T08:43:45.420

为您的 css 文件中的每种颜色创建一个类：

```
.redCell{
    color:red;
}
.blueCell{
    color:blue;
}
.yellowCell... 
```

然后，将该类添加到您需要的 TD 中：

```
$('#friend01').addClass('blueCell'); 
```

如果您需要去除颜色：

```
$('#friend01').removeClass('blueCell'); 
```

如果您需要知道一个单元格是否具有某种颜色：

```
$('#friend01').hasClass('blueCell'); 
```

# php - 子字符串 utf-8 字符，最多 10 个字母数字字符

> ID：13265900
> 
> 赞同：1
> 
> 时间：2012-11-07T08:37:36.827
> 
> 标签：php, substring, multibyte, mbstring

我在获取此字符串的子字符串时遇到问题：

```
GMOクラウドの芦田です。前回、OpenSocialに対応したSNSの「OpenPNE」をインストールしたので、今回はソーシャルアプリを作ってOpenPNE上で公開してみます。また、作ったアプリをmixiアプリとしてmixiにも登録してみましょう。 
```

我只想显示最多第 n 个字符，或者至少不显示损坏/不完整的单词。

起初我试过。

```
$content = "GMOクラウドの芦田です。前回、OpenSocialに対応したSNSの「OpenPNE」をインストールしたので、今回はソーシャルアプリを作ってOpenPNE上で公開してみます。また、作ったアプリをmixiアプリとしてmixiにも登録してみましょう。";
$content = mb_substr($content, 0, 10, 'UTF-8'); 
```

但结果是：

```
GMOクラウドの芦田です。前回、OpenSo 
```

这个词不完整

我也尝试使用正则表达式：

```
$content = "GMOクラウドの芦田です。前回、OpenSocialに対応したSNSの「OpenPNE」をインストールしたので、今回はソーシャルアプリを作ってOpenPNE上で公開してみます。また、作ったアプリをmixiアプリとしてmixiにも登録してみましょう。";
if (preg_match('/^.{1,40}\b/s', $content, $match))
{
    print_r($match);
} 
```

结果：

```
Array ( [0] =>GMO ) 
```

可以做些什么来得到类似的东西

```
GMOクラウドの芦田です。前回、OpenSocial 
```

单词应该是完整的。我可以用 php 中的 mb_ 函数来完成此操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-08T11:30:35.303

您需要 Mecab 等形态分析工具将字符串转换为数组。Mecab 可以被命令行和[PHP 扩展](https://github.com/rsky/php-mecab)使用。如果您使用自制软件，请安装**mecab**和**mecab-ipadic**。

```
$words = [
  'GMO', 'クラウド', 'の', '芦田', 'です。', '前回、', 
  'OpenSocial', 'に', '対応した', 'SNS'
];

$max = 26;

$ret = '';
$i = 0;

while(mb_strlen($ret.$words[$i], 'UTF-8') <= $max) {

  $ret .= $words[$i];
  $i += 1;
}

var_dump(
  mb_strlen($ret, 'UTF-8'),
  'GMOクラウドの芦田です。前回、OpenSocial' === $ret
); 
```

# http - HTTP 内容编码，base64

> ID：13265902
> 
> 赞同：8
> 
> 时间：2012-11-07T08:37:46.523
> 
> 标签：http, base64, content-encoding

有什么方法可以知道 HTTP 响应的消息正文是否使用 Base64 编码？

我了解到内容传输编码不是 HTTP 标头的一部分。

那么，哪个 HTTP 标头表明内容是使用 Base64 编码的？我认为内容编码仅用于压缩。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-07T08:58:09.970

据我了解，HTTP 正文可能未使用 Base64 编码：

> HTTP 不使用 RFC 2045 的 Content-Transfer-Encoding (CTE) 字段。从 MIME 兼容协议到 HTTP 的代理和网关必须 在交付之前**删除任何非身份 CTE（“quoted-printable”或“base64”）编码**HTTP 客户端的响应消息。

身份是：

> 默认（身份）编码；使用**没有任何转换**。

当然，您可以使用 HTTP 传输 Base64 编码的数据，但这应该是双方（客户端和服务器）都同意的，并且似乎没有标题来描述这种行为。

# javascript - sencha 日历的文档在哪里

> ID：13265911
> 
> 赞同：2
> 
> 时间：2012-11-07T08:38:13.550
> 
> 标签：javascript, jquery, extjs, calendar

[Sencha Ext JS Calendar](http://docs.sencha.com/ext-js/4-1/#!/example/calendar/index.html)看起来适合我的应用程序，但无法确定它是否有适当的文档？我的应用程序是关于通过带有多个小工具的日历显示和管理事件。有什么推荐吗？

我也在考虑使用[FullCalendar](http://arshaw.com/fullcalendar/)。谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T09:00:57.673

Hello **Ext JS Calendar** 只不过是一个示例应用程序，例如用于 ext js的**kitchensink 。**我认为这些示例应用程序不会有文档。但是如果您想知道应用程序是如何完成的，请使用谷歌 Chrome 的检查元素或其他浏览器中的类似功能，您将能够找到它是如何完成的使用 Ext js 完成...很简单

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T08:47:36.087

不知道 Sencha，但 Fullcalendar 已大量记录并完全可定制。所以我的建议是选择 Fullcalendar。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-02T15:48:08.717

如果您想管理您的活动，我不向您推荐 FullCalendar。该插件缺乏管理功能:(

# javascript - 从 jquery 或 javascript 中的表单帖子中读取值

> ID：13265912
> 
> 赞同：2
> 
> 时间：2012-11-07T08:38:16.920
> 
> 标签：javascript, jquery

我有一个表单，在提交时会转到另一个站点的登录页面，并且在验证身份验证后，用户将被重定向回我的站点，并且我从以下帖子值中收到：TOKEN 和地址信息。

我想在登录后重定向到的页面上获取以帖子形式发送的 TOKEN 和地址信息。我如何通过 jquery 或 javascript 获取这些值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T08:42:56.453

POST 值不适用于 jQuery 或 Javascript，因为在提交表单后服务器不会将它们发送回客户端。您需要使用服务器端代码在页面中回显它们，例如在 PHP 中：

```
var $_POST = <?php echo json_encode($_POST); ?>; 
```

然后你就可以使用 $_POST。

# sql-server - 如何构建我的 EF 模型，以便它们基于存储过程选择

> ID：13265914
> 
> 赞同：1
> 
> 时间：2012-11-07T08:38:25.813
> 
> 标签：sql-server, entity-framework, stored-procedures

老实说，我对 EF 完全陌生，有点迷茫。我有一个现有的数据库，一切都通过存储过程。甚至选择都是存储过程。我的模型需要使用它，但我不知道如何开始。如果对象要基于存储过程输出而不是表，我假设我真的可以使用自动生成。

我试过谷歌搜索，但老实说，我不认为我知道要寻找什么。

如果我创建一个空的实体框架模型，并自己构建所有对象，我可以通过执行存储过程而不是直接映射到表来以某种方式获取数据吗？

我该怎么做？我需要阅读哪些文章？我的搜索似乎总是以花哨的自动生成文章结束，这似乎不适用于我的情况。

我知道这是一个广泛的问题，但我在这里有点迷失了。任何帮助深表感谢。

**编辑**

因此，我了解到我可以基于存储的选择创建一个复杂类型。但是，我真的没有办法将更新/插入/删除过程映射到此。我真的不明白如何将实体类型和复杂类型链接在一起，如果这是可能的或这样做的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T08:54:01.800

您可以使用函数导入来映射存储过程 - 将它们的返回类型声明为您的实体的集合，然后使用`ExecuteFunction`

例如：

```
context.ExecuteFunction<YourEntity>("YourSelectStoredProcedure") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T09:25:01.610

```
to start with create entity model (.dbmx file) from existing DB, which will include your existing stored procedure from your DB

after which u can go to entity model and check the Tab model browser, under stored procedures u can select the required SP, and also specify the type of data it will return 

check these links 

http://channel9.msdn.com/Blogs/wriju/Using-Stored-Procedure-in-ADONET-Entity-Framework-40

http://msdn.microsoft.com/en-us/data/gg699321.aspx 
```

# php - 来自服务器宽度 jquery Ajax 的响应

> ID：13265918
> 
> 赞同：0
> 
> 时间：2012-11-07T08:38:36.420
> 
> 标签：php, jquery

我可以使用下面的代码将任何数据发送到服务器并获得成功的结果，但我的代码不发送响应`$data`是真还是假。代码是可以成功插入到数据库 localhost PHP 文件：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<html>
<head>
<script src="http://code.jquery.com/jquery-1.8.2.js"></script>
<script type="text/javascript">
$(document).ready(function(){
        $.post("http://www.test.com/index.php",  {userCode:"ttt-ddd-fff"},
            function(data){  
                alert (data.message);
            },'json');  
});
</script>
</head>
</html> 
```

服务器：

```
<?php
include_once ('./AFactory.class.php');
$database= new AFactory;
$db=new AFactory();
$link=$db->getDBO();
$query=array('id'=>NULL,'userCode'=>$_POST['userCode']);
$sql=$db->insertQuery(' `test`.`users`',$query);
if ( mysql_query($sql) ) 
    {$data['success']=true;$data['message']='ok';}
else 
    {$data['success']=false;$data['message']='no';}

echo json_encode($data);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T08:40:33.473

你可以尝试使用

```
alert (data.success); 
```

而不是

```
alert (data.message); 
```

# drupal - 找不到drupal管理

> ID：13265922
> 
> 赞同：0
> 
> 时间：2012-11-07T08:38:56.783
> 
> 标签：drupal, administration

我刚刚移动了我的 drupal 站点，现在当我输入管理员链接时，什么也没有发生。你知道为什么吗？

谢谢

这是我的htaccess，：我不知道它是否有问题：我认为没有，因为一切都在旧版本中正常工作。

有关信息，旧地址（仍然可用）是：www.flunchinvite.com

但管理链接类似于 www.flunchinvite.com.flunch.something.net

```
#
# Apache/PHP/Drupal settings:
#

# Protect files and directories from prying eyes.
<FilesMatch "\.(engine|inc|info|install|make|module|profile|test|po|sh|.*sql|theme|tpl(\.php)?|xtmpl)$|^(\..*|Entries.*|Repository|Root|Tag|Template)$">
  Order allow,deny
</FilesMatch>

# Don't show directory listings for URLs which map to a directory.
Options -Indexes

# Follow symbolic links in this directory.
Options +FollowSymLinks

# Make Drupal handle any 404 errors.
ErrorDocument 404 /index.php

# Set the default handler.
DirectoryIndex index.php index.html index.htm

# Override PHP settings that cannot be changed at runtime. See
# sites/default/default.settings.php and drupal_environment_initialize() in
# includes/bootstrap.inc for settings that can be changed at runtime.

# PHP 5, Apache 1 and 2.
<IfModule mod_php5.c>
  php_flag magic_quotes_gpc                 off
  php_flag magic_quotes_sybase              off
  php_flag register_globals                 off
  php_flag session.auto_start               off
  php_value mbstring.http_input             pass
  php_value mbstring.http_output            pass
  php_flag mbstring.encoding_translation    off
</IfModule>

# Requires mod_expires to be enabled.
<IfModule mod_expires.c>
  # Enable expirations.
  ExpiresActive On

  # Cache all files for 2 weeks after access (A).
  ExpiresDefault A1209600

  <FilesMatch \.php$>
    # Do not allow PHP scripts to be cached unless they explicitly send cache
    # headers themselves. Otherwise all scripts would have to overwrite the
    # headers set by mod_expires if they want another caching behavior. This may
    # fail if an error occurs early in the bootstrap process, and it may cause
    # problems if a non-Drupal PHP file is installed in a subdirectory.
    ExpiresActive Off
  </FilesMatch>
</IfModule>

# Various rewrite rules.
<IfModule mod_rewrite.c>
  RewriteEngine on

  # Block access to "hidden" directories whose names begin with a period. This
  # includes directories used by version control systems such as Subversion or
  # Git to store control files. Files whose names begin with a period, as well
  # as the control files used by CVS, are protected by the FilesMatch directive
  # above.
  #
  # NOTE: This only works when mod_rewrite is loaded. Without mod_rewrite, it is
  # not possible to block access to entire directories from .htaccess, because
  # <DirectoryMatch> is not allowed here.
  #
  # If you do not have mod_rewrite installed, you should remove these
  # directories from your webroot or otherwise protect them from being
  # downloaded.
  RewriteRule "(^|/)\." - [F]

  # If your site can be accessed both with and without the 'www.' prefix, you
  # can use one of the following settings to redirect users to your preferred
  # URL, either WITH or WITHOUT the 'www.' prefix. Choose ONLY one option:
  #
  # To redirect all users to access the site WITH the 'www.' prefix,
  # (http://example.com/... will be redirected to http://www.example.com/...)
  # uncomment the following:
  # RewriteCond %{HTTP_HOST} !^www\. [NC]
  # RewriteRule ^ http://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
  #
  # To redirect all users to access the site WITHOUT the 'www.' prefix,
  # (http://www.example.com/... will be redirected to http://example.com/...)
  # uncomment the following:
  # RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
  # RewriteRule ^ http://%1%{REQUEST_URI} [L,R=301]

  # Modify the RewriteBase if you are using Drupal in a subdirectory or in a
  # VirtualDocumentRoot and the rewrite rules are not working properly.
  # For example if your site is at http://example.com/drupal uncomment and
  # modify the following line:
  # RewriteBase /drupal
  #
  # If your site is running in a VirtualDocumentRoot at http://example.com/,
  # uncomment the following line:
  # RewriteBase /

  # Pass all requests not referring directly to files in the filesystem to
  # index.php. Clean URLs are handled in drupal_environment_initialize().
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_URI} !=/favicon.ico
  RewriteRule ^ index.php [L]

  # Rules to correctly serve gzip compressed CSS and JS files.
  # Requires both mod_rewrite and mod_headers to be enabled.
  <IfModule mod_headers.c>
    # Serve gzip compressed CSS files if they exist and the client accepts gzip.
    RewriteCond %{HTTP:Accept-encoding} gzip
    RewriteCond %{REQUEST_FILENAME}\.gz -s
    RewriteRule ^(.*)\.css $1\.css\.gz [QSA]

    # Serve gzip compressed JS files if they exist and the client accepts gzip.
    RewriteCond %{HTTP:Accept-encoding} gzip
    RewriteCond %{REQUEST_FILENAME}\.gz -s
    RewriteRule ^(.*)\.js $1\.js\.gz [QSA]

    # Serve correct content types, and prevent mod_deflate double gzip.
    RewriteRule \.css\.gz$ - [T=text/css,E=no-gzip:1]
    RewriteRule \.js\.gz$ - [T=text/javascript,E=no-gzip:1]

    <FilesMatch "(\.js\.gz|\.css\.gz)$">
      # Serve correct encoding type.
      Header set Content-Encoding gzip
      # Force proxies to cache gzipped & non-gzipped css/js files separately.
      Header append Vary Accept-Encoding
    </FilesMatch>
  </IfModule>
</IfModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T08:58:30.463

您使用的是哪个版本的 Drupal？您当前的服务器配置是否启用了干净的 URL？如果是 Drupal 7，请尝试 www.yourdomain.com/?q=admin。

# c++ - 是否存在内存泄漏，如果是，为什么？

> ID：13265923
> 
> 赞同：-2
> 
> 时间：2012-11-07T08:38:58.407
> 
> 标签：c++, memory-leaks

假设我有一个返回 char* 的函数

```
char* GetName(int index); 
```

还有另一个以 char* 作为输入参数的函数

```
void PrintName(const char* name); 
```

所以如果我这样做

```
PrintName( GetName(10) ); 
```

有内存泄漏吗？如果是，为什么？**这是在不使用 std::string**的情况下处理此问题的唯一方法：

```
char* name = GetName(10);
PrintName(name);
free(name); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T08:41:34.597

取决于`GetName`返回的内容。

但是正如您所使用的`free( name )`，我假设它返回动态分配的内存。

那么是的，存在内存泄漏。

C++ 没有垃圾收集器。如果分配内存，则需要释放它。

或者使用智能指针。或者一个包装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T08:42:17.560

只要你释放（）GetName（）返回的内存区域，它就不是内存泄漏。但这一切都取决于 GetName(); 内部发生了什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T08:42:20.730

从您共享的内容来看，没有什么叫做内存泄漏，因为您还没有分配任何内存，这可能会泄漏。您刚刚指定您可以分配一些内存并传递它。

所以，简而言之，这完全取决于你在函数中写的内容`GetName`&`PrintName`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T08:42:51.260

很简单，every`malloc`必须与 a 匹配`free`，every`new`与 a `delete`，every`new[]`与 a匹配`delete[]`。你没有说什么`GetName`，但我假设它使用了`malloc`. 在这种情况下，由于您不调用`free`.

第二段代码是避免内存泄漏的一种方法，另一种是调用`free`（可能不是一个好主意，因为如果没有动态分配的内存`PrintName`就无法调用）。`PrintName`

当然也正是因为这个难，才推荐大家使用`std::string`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-07T08:48:43.333

如果您不小心，手动执行此 alloc/dealloc 会带来麻烦……所以最好使用 std:string 之类的东西。

话虽如此，如果char *是在GetName内部分配的，那么它需要在外部删除。您可以将其视为所有权：GetName 通过返回 char* 来放弃所有权，因此由接收 char* 的人继续处理它。您可以决定 PrintName 取得所有权，然后它必须删除它，或者按照您在上一个示例中显示的方式进行操作。

一种更简单的方法是预分配（最好在堆栈上）：

```
char name[TheSizeYouNeed];
PrintName (GetName(10, name)); 
```

GetName 会这样做的地方：

```
char *GetName (int len, char *buf) {
  strcpy (buf, "xxx");
  return buf;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-07T08:44:47.197

从你写的内容很难判断。基本上，如果您不使用`malloc`关键字，那么您不必调用`free`. 在堆栈上分配的内存（即不使用`malloc`）将在其范围结束时释放。

但是如果你在`GetName`using内部分配`malloc`，NOT 调用`free`会导致内存泄漏。

所以归结为：

*   如果你不使用`malloc`，它不会泄漏。
*   如果您使用`malloc`并且没有免费调用，它会泄漏。

# objective-c - Cocos2D 中的 ObjC 条件编译

> ID：13265932
> 
> 赞同：0
> 
> 时间：2012-11-07T08:39:30.120
> 
> 标签：objective-c, cocos2d-iphone, conditional-compilation

我试图让一种方法在 iOS 和 MacOS 之间表现不同。我需要它来处理 MacOS 平台上的键盘事件。

浏览源代码，我发现以下宏正在使用中。在为 macOS 平台运行我的代码时，我只会将“开始”输出到控制台，就好像没有定义“_CC_PLATFORM_MAC”一样。

我做错了吗？

```
-(void)processEvent:(NSEvent*)event{

    NSLog(@"begin");

#ifdef __CC_PLATFORM_IOS

    NSLog(@"nothing here");

#elif defined(__CC_PLATFORM_MAC)

    NSLog(@"process keyboard event");

#endif // __CC_PLATFORM_MAC

} 
```

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T08:42:30.773

缺少标头 #import "cocos2d.h"

# ruby - 连接到单独 AWS 实例上的 PostGres DB 时出现“无法从服务器接收数据：连接超时”或“连接未打开”错误

> ID：13265938
> 
> 赞同：7
> 
> 时间：2012-11-07T08:39:48.530
> 
> 标签：ruby, postgresql, amazon-ec2, amazon-web-services

我在 AWS EC2 实例上运行的应用服务器中使用 Ruby 1.9.3。我的 Postgres 数据库在单独的 EC2 实例上运行，但两个实例都在同一个安全组中。当 m Ruby 代码连接到数据库时，它使用 Sequel ORM gem ( [http://sequel.rubyforge.org/](http://sequel.rubyforge.org/) )。

现在，我已将 Postgres 9.1.4 DB 配置为能够正确接受来自应用服务器实例的连接。

但是，时不时地，我在应用服务器的日志中注意到它无法连接到 Postgres 数据库实例，并且我会看到如下错误消息：

```
PG::Error: could not receive data from server: Connection timed out 
```

或者

```
PG::Error: connection not open 
```

所以我去了 Postgres 数据库实例并查看了 /var/log/postgresql/postgresql-9.1-main.log ，我看到了一堆这样的消息：

```
2012-11-07 08:15:17 UTC LOG:  could not receive data from client: Connection timed out
2012-11-07 08:15:17 UTC LOG:  unexpected EOF on client connection 
```

我在网上搜索过，包括堆栈溢出，并确保我的 PostgreSQL 没有启用 SSL（我的 postgresql.conf 文件中有“ssl=off”）

在这一点上，我不确定 Postgres 配置中的问题到底是什么。如果没有充分证明的理由，我不会在我的生产服务器上搞乱最大连接数或最大超时值。

应用服务器大部分时间都可以连接到数据库，这个问题只是间歇性地出现。

在 Ruby 方面，这是进行 Postgres 调用时“连接未打开”的错误跟踪：

```
PG::Error: connection not open
/var/lib/gems/1.9.1/gems/sequel-3.38.0/lib/sequel/adapters/postgres.rb:145:in `async_exec'
/var/lib/gems/1.9.1/gems/sequel-3.38.0/lib/sequel/adapters/postgres.rb:145:in `block in execute_query'
/var/lib/gems/1.9.1/gems/sequel-3.38.0/lib/sequel/database/logging.rb:33:in `log_yield'
/var/lib/gems/1.9.1/gems/sequel-3.38.0/lib/sequel/adapters/postgres.rb:145:in `execute_query'
/var/lib/gems/1.9.1/gems/sequel-3.38.0/lib/sequel/adapters/postgres.rb:132:in `block in execute'
/var/lib/gems/1.9.1/gems/sequel-3.38.0/lib/sequel/adapters/postgres.rb:111:in `check_disconnect_errors'
/var/lib/gems/1.9.1/gems/sequel-3.38.0/lib/sequel/adapters/postgres.rb:132:in `execute'
/var/lib/gems/1.9.1/gems/sequel-3.38.0/lib/sequel/adapters/postgres.rb:372:in `_execute'
/var/lib/gems/1.9.1/gems/sequel-3.38.0/lib/sequel/adapters/postgres.rb:234:in `block (2 levels) in execute'
/var/lib/gems/1.9.1/gems/sequel-3.38.0/lib/sequel/adapters/postgres.rb:379:in `check_database_errors'
/var/lib/gems/1.9.1/gems/sequel-3.38.0/lib/sequel/adapters/postgres.rb:234:in `block in execute'
/var/lib/gems/1.9.1/gems/sequel-3.38.0/lib/sequel/database/connecting.rb:229:in `block in synchronize'
/var/lib/gems/1.9.1/gems/sequel-3.38.0/lib/sequel/connection_pool/threaded.rb:105:in `hold'
/var/lib/gems/1.9.1/gems/sequel-3.38.0/lib/sequel/database/connecting.rb:229:in `synchronize'
/var/lib/gems/1.9.1/gems/sequel-3.38.0/lib/sequel/adapters/postgres.rb:234:in `execute'
/var/lib/gems/1.9.1/gems/sequel-3.38.0/lib/sequel/dataset/actions.rb:744:in `execute'
/var/lib/gems/1.9.1/gems/sequel-3.38.0/lib/sequel/adapters/postgres.rb:483:in `fetch_rows'
/var/lib/gems/1.9.1/gems/sequel-3.38.0/lib/sequel/model/base.rb:785:in `primary_key_lookup'
/var/lib/gems/1.9.1/gems/sequel-3.38.0/lib/sequel/model/base.rb:124:in `[]' 
```

同样，这是“无法从服务器接收数据”的跟踪：

```
 PG::Error: could not receive data from server: Connection timed out
/var/lib/gems/1.9.1/gems/sequel-3.38.0/lib/sequel/adapters/postgres.rb:124:in `block'
/var/lib/gems/1.9.1/gems/sequel-3.38.0/lib/sequel/adapters/postgres.rb:124:in `ensure in check_disconnect_errors'
/var/lib/gems/1.9.1/gems/sequel-3.38.0/lib/sequel/adapters/postgres.rb:124:in `check_disconnect_errors'
/var/lib/gems/1.9.1/gems/sequel-3.38.0/lib/sequel/adapters/postgres.rb:132:in `execute'
/var/lib/gems/1.9.1/gems/sequel-3.38.0/lib/sequel/adapters/postgres.rb:372:in `_execute'
/var/lib/gems/1.9.1/gems/sequel-3.38.0/lib/sequel/adapters/postgres.rb:234:in `block (2 levels) in execute'
/var/lib/gems/1.9.1/gems/sequel-3.38.0/lib/sequel/adapters/postgres.rb:379:in `check_database_errors'
/var/lib/gems/1.9.1/gems/sequel-3.38.0/lib/sequel/adapters/postgres.rb:234:in `block in execute'
/var/lib/gems/1.9.1/gems/sequel-3.38.0/lib/sequel/database/connecting.rb:229:in `block in synchronize'
/var/lib/gems/1.9.1/gems/sequel-3.38.0/lib/sequel/connection_pool/threaded.rb:105:in `hold'
/var/lib/gems/1.9.1/gems/sequel-3.38.0/lib/sequel/database/connecting.rb:229:in `synchronize'
/var/lib/gems/1.9.1/gems/sequel-3.38.0/lib/sequel/adapters/postgres.rb:234:in `execute'
/var/lib/gems/1.9.1/gems/sequel-3.38.0/lib/sequel/dataset/actions.rb:744:in `execute'
/var/lib/gems/1.9.1/gems/sequel-3.38.0/lib/sequel/adapters/postgres.rb:483:in `fetch_rows'
/var/lib/gems/1.9.1/gems/sequel-3.38.0/lib/sequel/model/base.rb:785:in `primary_key_lookup'
/var/lib/gems/1.9.1/gems/sequel-3.38.0/lib/sequel/model/base.rb:124:in `[]' 
```

我观察到，如果我在同一个实例上同时运行 App 服务器和 Postgres DB，那么就不存在连接问题，至少现在还没有。也许 Postgres 对非本地数据库连接不太宽容？

请让我知道我可能错过了什么，我很感激！

是

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T02:43:39.757

通常对此的解释是连接问题。

或者，如果不是连接，则可能是协议同步问题。看起来两端可能正在尝试从套接字读取，而没有尝试写入。所以也许客户端期望服务器发送响应，而服务器期望客户端发送数据。

如果它是间歇性的和偶尔的，这将很难调试，因为你不能真的只是 tcpdump 并分析它。

我会在服务器端添加更多日志记录 -`log_statement = 'all'`和一个`log_line_prefix`显示客户端 IP、后端开始时间和后端 pid 的日志。这样，您就可以开始尝试将这些失败与失败之前发生的会话活动相匹配，确定它是特定的客户端、特定的作业还是真的只是随机的。

这个 Sequel ORM gem`libpq`是在底层使用，还是它自己的 PostgreSQL 协议实现？如果是后者，那可能会成为罪魁祸首。

更新：看起来它可以使用`pg`gem（`libpq`-based）、`postgres`gem 或可能`postgres-pr`（无论是什么）。`pg`如果安装了它会更喜欢。

由于您似乎已经在使用`pg`gem，您可能需要做一些诊断工作来追踪问题出现的位置 - 特定查询、特定客户端等 - 并尝试找到重现问题的方法。PostgreSQL`csvlog`可能很有用，因此您可以更轻松地加载和分析日志。

# php - php重载_call不会触发

> ID：13265944
> 
> 赞同：-1
> 
> 时间：2012-11-07T08:40:20.967
> 
> 标签：php, call, overloading

我是 PHP 新手，使用 PHP 5.3.13，我在 php 中遇到重载问题。

我编写了很小的代码来验证是否`_call`被触发，但它根本不起作用。

有人知道吗？

```
 class Foo{
            function _call($methodName, $argument){
                echo "_call()";
            }
        }

        $foo = new Foo;
        $foo->runtest(); 
```

> 错误：致命错误：调用未定义的方法 Foo::runtest() in
> 
> C:\wamp\www\tutorial\part2\testfunctions.php 第 77 行

非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T08:44:13.547

[您有一个错字， __call](http://php.net/__call)需要两个下划线。

# android - 访问 sim 工具包的 android 应用程序

> ID：13265949
> 
> 赞同：27
> 
> 时间：2012-11-07T08:40:37.437
> 
> 标签：android, android-service, sim-toolkit

我想构建一个从 sim 工具包访问信息的应用程序。我的运营商允许您访问服务，例如检查您的帐户余额、发送和接收现金以及大量服务。是否有任何资源、教程甚至只是关于如何访问 sim 工具包中的信息的指针。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-25T10:53:22.127

**SIM 工具包**-

调用低级库的应用程序，后者又与调制解调器固件接口 -

[https://github.com/android/platform_packages_apps_stk](https://github.com/android/platform_packages_apps_stk)

它在某种程度上取决于手机的无线电接口层 (RIL) 实现。

**笔记：**

在许多设备上，RIL 是专有的，因此第三方开发人员只花时间获得基本的东西，比如`calls, SMS, data, etc`工作，而不是把所有的时间都花在对一些疯狂的闭源硬件进行逆向工程上。

可以提供帮助的 WIKI 链接 -

[http://en.wikipedia.org/wiki/SIM_Toolkit](http://en.wikipedia.org/wiki/SIM_Toolkit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-09T18:37:07.000

为了将 SIM 卡作为安全元件访问并在终端和 SIM 之间执行 STK 主动命令，必须安装 SIM 小程序，以便通过 OTA 或读卡器安装 SIM 小程序，SIM Profile(SPI,KIc,KId,TAR,CNTR)需要 SIM 卡提供商提供的参数和 OTA 密钥。

如果得到这些信息，在阅读Java Card、SIM Toolkit 和Global Platform 规范后，就可以进行SIM 小程序开发了。一旦小程序成功安装在 SIM 卡上，通过自定义 APDU 发送命令，可以要求终端执行多个任务或注册回调以捕获终端上发生的事件。

# php - PHP在循环中对项目进行分组

> ID：13265950
> 
> 赞同：0
> 
> 时间：2012-11-07T08:40:39.693
> 
> 标签：php, loops, while-loop

在一个循环中，我想将前 5 个项目包装在 a`li`中，然后每 6 个项目包装在 a 中`li`。我正在尝试以下代码，但它无法正常工作，它将前 5 个项目包装在 a`li`中，之后它仅包装 li 中的每第六个项目，但第 7 - 12 个没有 li。

```
$i = 0;
while ($i < 19){
    $i++;
    if($i == 1 ){ echo '<li>'; }
    if (($i > 5) AND ( $i % 6 == 0)){echo "<li>";}
    echo "<div>item " . $i . "</div>"; 
    if( $i == 5 ){ echo '</li>'; }
    if(($i > 5) AND ( $i % 6 == 0)) { echo "</li>"; }
}
if ($i < 5 ) { echo "</li>"; }
if (($i > 5) AND ($i % 6 != 0)) { echo "</li>"; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T08:52:23.357

这里更干净和易于阅读的解决方案。

```
$i = 0;
$group = 0;
$group_by = 5;
while ($i < 19){
    $i++;
    if ($group == 0) {//new group start
        echo "<li>";
    }
    echo "<div>item " . $i . "</div>"; 
    $group++;
    if ($group == $group_by) {//end of group
       echo "</li>\n";
       $group = 0;
       $group_by = 6;
    }
}
if ($group != 0) { echo "</li>"; }//end group if it was not closed 
```

[http://codepad.org/oxJloL03](http://codepad.org/oxJloL03)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T08:55:38.240

试试这个解决方案：

```
for ($i = 1; $i < 20; $i++) {
    echo ($i === 1 || $i % 6 === 0) ? "<li>" : null,
        "<div>item {$i}</div>",
        ($i % 6 === 5) ? "</li>" : null;
}
if ($i % 6 !== 0) echo "</li>"; 
```

我试图让它尽可能简单。

**[代码示例](http://codepad.org/bK89ZCt4)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T08:48:31.120

这是因为您的条件说`$i % 6 == 0`这意味着“每六项”，而不是**6**项。

要包装 6 个连续元素，即从 7 到 12，您应该将您的条件重写为`$i <= 12`，以便您的代码变为：

```
$i = 0;
for (; $i < 19; $i++) {

    if($i == 1 ){ echo '<li>'; }
    if (($i > 5) AND ( $i <= 12)){echo "<li>";}
    echo "<div>item " . $i . "</div>"; 
    if( $i == 5 ){ echo '</li>'; }
    if(($i > 5) AND ( $i <= 12)) { echo "</li>"; }
}
if ($i < 5 ) { echo "</li>"; }
if (($i > 5) AND ($i <= 12)) { echo "</li>"; } 
```

# coq - 取列表头部的选项元素

> ID：13265953
> 
> 赞同：0
> 
> 时间：2012-11-07T08:40:43.350
> 
> 标签：coq

我有类型

```
Variable l: list (a * b * option c * option d).
Variable ls : list (list l). 
```

我想`option d`从列表的顶部获取类型，然后检查整个列表。我的代码如下所示：

```
Definition test (l: list (a * b * option c * option d)):=
match l with
| nil => ... (* not important *)
| (_,_,_,od) :: l' => 
  match od with
  | None => ... (* not important *)
  | Some d => if forallb (fun li => forallb (fun ci => do_something ci d)) ls) l'
  end
end. 
```

我的问题是`if forallb (fun li => forallb (fun ci =>do_something ci d))ls)l'`我添加的测试是`forallb (fun li =>...)`因为我希望它在整个列表中进行测试`l'`。但我根本没有使用这个论点`li`。

编辑：我的问题集中在`if forallb (fun li => forallb (fun ci => do_something ci d))ls)l'`. 我添加`forallb (fun li =>`是因为我想对列表的其余部分进行测试`l'`。如果没有`forallb (fun li`我可以存档此测试`if (forallb (fun ci => do_something ci d))ls`，但我不知道如何在列表中再次测试此条件`l'`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T13:52:56.083

你的上下文不一致。

变量 l : ...

使 l 是一个列表

变量 ls ：列表（列表 l）。

假设 l 是一个类型。

也许你的意思是：

定义 l := list (a * b * option c * option d)。

变量 ls := 列表（列表 l）。

这使得 ls 成为列表列表的列表（如三维数组）。

现在，假设您的意思是 do_something 具有类型 l -> d -> bool

我猜你想用 ls 中的所有 l 类型的元素和 test 的参数中的所有 d 类型的元素（也称为 l，yuck）来测试 do_something。

你应该有

...

|Some d => if forallb (fun li => forallb (fun ci => do_something ci d)) ls then test l' else false ...

但坦率地说，你的问题留给回答者猜测！

# android - Facebook 3.0b 活动在后台静默工作

> ID：13265954
> 
> 赞同：-1
> 
> 时间：2012-11-07T08:40:45.253
> 
> 标签：android, android-activity, facebook-android-sdk

我有一个扩展 GLActivity 类的活动。

我需要使用 FaceBook sdk 来做一些 facebook 交互。因此，每当我需要来自 facebook 的东西时，我都会创建一个新活动。完成后，我调用 finish() 回到主要活动。

如何调用它一次然后只使用它的功能？有些任务不需要对话屏幕（例如检查会话是否处于活动状态），但我仍然需要调用意图来创建新的（因为`FacebookActivity.OnCreate`函数中有一些初始化，我`finish()`每次都必须这样做）而且它看起来很顽固. 每次活动小狗都会出来一秒钟。

或者我如何在不创建活动的情况下调用一些 Facebook 的东西？（我没有任何按钮，一切都是从本机代码调用的。）

Upd：我知道有 AsyncFacebookRunner，但他的方法已被弃用，它使用了弃用的 facebook 功能。

Upd2：我已经让这个活动不可见，但我仍然认为这不是最好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:19:14.673

Normally you'd just let your Activity extend the FacebookActivity. As this doesn't work out for you as you extend GLActivity, you should **look at the code** of the FacebookActivity and simply **copy the relevant parts** into your Activity. So you can achieve the same as inheriting from GLActivity and FacebookActivity. The code is in the facebook library project in the com.facebook package.

# c# - 在运行时设置成员资格提供者的数据库......？

> ID：13265957
> 
> 赞同：0
> 
> 时间：2012-11-07T08:40:55.283
> 
> 标签：c#, .net, database, asp.net-membership, membership-provider

我们正在使用 ASP.Net 成员提供程序（SQL Server 提供程序），并且我希望能够仅更改类中的数据库名称。为此，我需要配置 ASP.Net 成员资格提供程序，以便我的安装程序可以使用它

我用代码作为

```
public class CodeFirstMembershipProvider : SqlMembershipProvider
    {    
      public override void Initialize(string name, System.Collections.Specialized.NameValueCollection config)  
      { 
          base.Initialize(name, config);  

          // hard coded for testing  
          string connectionString = @"server=localhost;database=masterdb;uid=master;pwd=password";

          // Set private property of Membership provider.  
          FieldInfo connectionStringField = GetType().BaseType.GetField("_sqlConnectionString", BindingFlags.Instance | BindingFlags.NonPublic);  
          if(connectionStringField != null)
            connectionStringField.SetValue(this, connectionString);  
      }
} 
```

在上面的代码中，我需要输入并更改完整的连接字符串值..

它也很好用......

但我的查询是仅更改 web.config 文件中提到的当前连接字符串的数据库名称..

那么有没有办法通过代码通过 ASP.Net 成员资格切换数据库名称？

# java - 命名空间 QName 异常的 JAXB XML 序列化错误

> ID：13265960
> 
> 赞同：0
> 
> 时间：2012-11-07T08:41:11.003
> 
> 标签：java, jaxb, jetty, jersey

我有一个[Jersey](http://jersey.java.net)服务，它通过 JAXB 将对象序列化为 XML 表示。之前在 Glassfish 上工作过，但在切换到 Jetty 后，我得到了一个

> java.lang.String 不能转换为 javax.xml.namespace.QName

错误。当我搜索这种错误时，我并没有在网络上获得真正有用​​的信息。因为在我有点困惑之前它与 Glassfish 一起工作。你有想法吗？

## 泽西岛部分

```
@POST
@Path("test")
@Consumes("application/xml")
@Produces({"application/xml", "application/json"})
public DocResult returnInfo(Document dom) {

    DocResult result = new DocResult();
    List<mypackage.Document> docs = ...; // loads some documents
    result.documents = docs;
    return result;
} 
```

## 要序列化的类

```
@XmlRootElement(name = "result")
@XmlAccessorType(XmlAccessType.FIELD)
public class DocResult {

    @XmlElementWrapper(name = "documents")
    @XmlElement(name = "document")
    public List<Document> documents;

    public DocResult() {
        documents = new ArrayList<Document>();
    }
} 
```

这是完整的堆栈跟踪：

```
java.lang.ClassCastException: java.lang.String cannot be cast to javax.xml.namespace.QName
    at com.sun.xml.bind.v2.runtime.XMLSerializer.attWildcardAsURIs(XMLSerializer.java:769)
    at com.sun.xml.bind.v2.runtime.ClassBeanInfoImpl.serializeURIs(ClassBeanInfoImpl.java:395)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsXsiType(XMLSerializer.java:681)
    at com.sun.xml.bind.v2.runtime.property.ArrayElementNodeProperty.serializeItem(ArrayElementNodeProperty.java:69)
    at com.sun.xml.bind.v2.runtime.property.ArrayElementProperty.serializeListBody(ArrayElementProperty.java:172)
    at com.sun.xml.bind.v2.runtime.property.ArrayERProperty.serializeBody(ArrayERProperty.java:159)
    at com.sun.xml.bind.v2.runtime.ClassBeanInfoImpl.serializeBody(ClassBeanInfoImpl.java:344)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsSoleContent(XMLSerializer.java:597)
    at com.sun.xml.bind.v2.runtime.ClassBeanInfoImpl.serializeRoot(ClassBeanInfoImpl.java:328)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsRoot(XMLSerializer.java:498)
    at com.sun.xml.bind.v2.runtime.MarshallerImpl.write(MarshallerImpl.java:320)
    at com.sun.xml.bind.v2.runtime.MarshallerImpl.marshal(MarshallerImpl.java:249)
    at javax.xml.bind.helpers.AbstractMarshallerImpl.marshal(AbstractMarshallerImpl.java:75)
    at com.sun.jersey.json.impl.JSONMarshallerImpl.marshal(JSONMarshallerImpl.java:74)
    at com.sun.jersey.core.provider.jaxb.AbstractRootElementProvider.writeTo(AbstractRootElementProvider.java:179)
    at com.sun.jersey.core.provider.jaxb.AbstractRootElementProvider.writeTo(AbstractRootElementProvider.java:157)
    at com.sun.jersey.spi.container.ContainerResponse.write(ContainerResponse.java:306)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1448)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1360)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1350)
    at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:538)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:716)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:401)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:766)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:450)
    at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:230)
    at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:945)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:756)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:410)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

# android - 如何升级系统应用程序

> ID：13265961
> 
> 赞同：-1
> 
> 时间：2012-11-07T08:41:11.153
> 
> 标签：android, upgrade

我已经开发了一个应用程序并在设备中构建。现在我需要升级它，如果是的话，用户是否有可能从谷歌播放获取更新信息？我对此感到困惑..我已经发布了同一应用程序的更新版本，但用户没有收到更新通知。我必须以任何方式升级它，所以请向我提出建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T08:57:10.453

用户将自动获得更新。但是您需要在清单中增加 versionCode：

```
android:versionCode="1"<!--change to 2-->
android:versionName="1.0" <!--You'd update this too, but I'm not sure its necessary--> 
```

完成后，您创建一个新的 .apk，将其上传到您的游戏帐户，然后激活它。

# python - 没有名为 registration.backends.default.urls 的模块

> ID：13265963
> 
> 赞同：5
> 
> 时间：2012-11-07T08:41:12.897
> 
> 标签：python, django

这个主题肯定与[这个主题](https://stackoverflow.com/questions/4259497/no-module-named-backends-default-urls)有关，但是，根据批准的答案和相关评论，修复是更改`registration.backends.default.urls`为`registration.urls`. 当我尝试相同的错误时，错误是相同的，但是，`registration.urls`而不是`registration.backends.default.urls`.

PS`django.contrib.auth`被添加到`INSTALLED_APPS`

```
Environment:

Request Method: GET
Request URL: http://127.0.0.1:8000/accounts/register/

Django Version: 1.4.2
Python Version: 2.7.3
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'oauth2app',
 'django.contrib.admin',
 'uni_form',
 'server')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "C:\Python27\lib\site-packages\django-1.4.2-py2.7.egg\django\core\handlers\base.py" in get_response
  101\.                             request.path_info)
File "C:\Python27\lib\site-packages\django-1.4.2-py2.7.egg\django\core\urlresolvers.py" in resolve
  298\.             for pattern in self.url_patterns:
File "C:\Python27\lib\site-packages\django-1.4.2-py2.7.egg\django\core\urlresolvers.py" in url_patterns
  328\.         patterns = getattr(self.urlconf_module, "urlpatterns", self.urlconf_module)
File "C:\Python27\lib\site-packages\django-1.4.2-py2.7.egg\django\core\urlresolvers.py" in urlconf_module
  323\.             self._urlconf_module = import_module(self.urlconf_name)
File "C:\Python27\lib\site-packages\django-1.4.2-py2.7.egg\django\utils\importlib.py" in import_module
  35\.     __import__(name)
File "C:\Users\Roel\workspace\ts-server\tsserver\tsserver\urls.py" in <module>
  19\.     (r'^accounts/', include('registration.backends.default.urls')),
File "C:\Python27\lib\site-packages\django-1.4.2-py2.7.egg\django\conf\urls\__init__.py" in include
  24\.         urlconf_module = import_module(urlconf_module)
File "C:\Python27\lib\site-packages\django-1.4.2-py2.7.egg\django\utils\importlib.py" in import_module
  35\.     __import__(name)

Exception Type: ImportError at /accounts/register/
Exception Value: No module named registration.backends.default.urls 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T08:54:40.763

我必须先安装 django-registration (似乎只有逻辑:-s)

`pip install django-registration`

# php - 在线比较不同 php版本的结果

> ID：13265980
> 
> 赞同：0
> 
> 时间：2012-11-07T08:42:16.707
> 
> 标签：php

有一个页面，您可以在其中比较不同 php 版本中 php 代码的结果，但我找不到它。前段时间在 Stackoverflow 上找到的。很好，因为您没有选择版本。它只是在所有版本中运行代码并比较输出。

有人知道我在找什么页面吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T08:52:04.837

啊，找到了：http: [//3v4l.org](http://3v4l.org)

对于那个很抱歉...

# c# - 使用 SqlHelper.ExecuteDataSet() 执行 SQL Server 存储过程并获取返回值

> ID：13265981
> 
> 赞同：2
> 
> 时间：2012-11-07T08:42:16.400
> 
> 标签：c#, sql-server, ado.net

我有一个`SQL Server Stored Procedure`. 这个过程有一个输出参数。在我的`C#.NET`应用程序中，我通过执行此过程`SqlHelper.ExecuteDataSet()`并返回一个查询结果`DataSet`。如何在使用`SqlHelper.ExecuteDataSet()`. 有些文章说我需要使用`SqlHelper.ExecuteNonQuery()`，但我也需要`DataSet`。

这是我的代码：

```
 public DataSet GetDataPerTable(string spName, string a, string b, out int c)
        {
            try
            {
                c = 0;

                SqlParameter[] spParameter = new SqlParameter[3];

                spParameter[0] = new SqlParameter("@a", SqlDbType.Char, 4);
                spParameter[0].Direction = ParameterDirection.Input;
                spParameter[0].Value = a;

                spParameter[1] = new SqlParameter("@b", SqlDbType.Char, 1);
                spParameter[1].Direction = ParameterDirection.Input;
                spParameter[1].Value = b;

                spParameter[2] = new SqlParameter("@c", SqlDbType.Int);
                spParameter[2].Direction = ParameterDirection.ReturnValue;                
                c = Convert.ToInt32(spParameter[2].Value);

                return SqlHelper.ExecuteDataset(Configuration.MyConnectionString, CommandType.StoredProcedure, spName, spParameter);
            }
            catch (Exception ex)
            {

                throw ex;
            }
        } 
```

我的`c`变量总是返回 0。有什么想法吗？提前致谢 ：）

我的程序是这样的：

```
CREATE PROCEDURE [dbo].SPR_MyProcedure (@a Char(4), @bChar(1), @c Int Output)  
SELECT * 
FROM MyTable
Set @c = 1 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T08:48:10.013

`@c`不是返回值，而是输出参数

改变

```
spParameter[2].Direction = ParameterDirection.ReturnValue; 
```

到

```
 spParameter[2].Direction = ParameterDirection.Output; 
```

此外，您需要`c`在调用后设置变量，`ExecuteDataset` 例如：

```
DataSet dataset = SqlHelper.ExecuteDataset(Configuration.MyConnectionString, CommandType.StoredProcedure, spName, spParameter);
c=(int)spParameter[2];
return dataset; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T08:54:35.340

您必须使用`ParameterDirection.Output`for 参数`c`。请参阅[在 ADO.NET 中获取输出参数值](https://stackoverflow.com/questions/290652/get-output-parameter-value-in-ado-net)

`ParameterDirection.ReturnValue`是整个存储过程的返回值，默认为0或RETURN语句中指定的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T09:10:44.073

SqlHelper.ExecuteDataSet 不返回输出参数。看到这个链接

[http://www.mediachase.com/documentation/fileuploader/Api/Mediachase.FileUploader.SqlHelper.ExecuteDataset_overload_5.html](http://www.mediachase.com/documentation/fileuploader/Api/Mediachase.FileUploader.SqlHelper.ExecuteDataset_overload_5.html)

对于他们使用 ExecuteNonQuery 的每个示例中的输出参数，请参阅这些文章以获取输出参数

[http://forums.asp.net/t/360456.aspx/1](http://forums.asp.net/t/360456.aspx/1)

[http://www.codeproject.com/Articles/15666/Data-Access-Application-Block-NET-2-0-Get-Return-V](http://www.codeproject.com/Articles/15666/Data-Access-Application-Block-NET-2-0-Get-Return-V)

我希望它可以帮助你

# c++ - QAbstractItemModel->setItemData 在插入 Qt::UserRole 时返回 false

> ID：13265992
> 
> 赞同：0
> 
> 时间：2012-11-07T08:42:54.777
> 
> 标签：c++, qtreeview, qabstractitemmodel

我不知道为什么当我尝试插入`Qt::UserRole`项目`QTreeView`时它总是返回 false 但当我输入时却没有，`Qt::EditRole` 这是代码：

```
void TreeVieweX::insertRow(QString& slink)
{
    QModelIndex index = this->selectionModel()->currentIndex();
    QAbstractItemModel *model = this->model();
    int iRowCount = this->model()->rowCount();
    if (!model->insertRow(iRowCount, index.parent()))
        return;

    QModelIndex child = model->index(iRowCount,0, index.parent());
    bool bEditRole =  model->setData(child, QVariant(slink), Qt::EditRole); // working great can fetch the data later 

    QHash<QString, QVariant> indexSelectedMap;
    indexSelectedMap.insert("site_name",QVariant(slink));

    QMap<int, QVariant> roles;
    roles.insert(Qt::UserRole,indexSelectedMap);
    bool bUserRole =  model->setItemData( index.parent(),roles); //returns false , cant fetch data later
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T08:11:18.030

QAbstractItemModel::setItemData 只是一个方便的函数，它为角色映射中的每个项目调用 setData。

```
bool QAbstractItemModel::setItemData(const QModelIndex &index, const QMap<int, QVariant> &roles)
{
    bool b = true;
    for (QMap<int, QVariant>::ConstIterator it = roles.begin(); it != roles.end(); ++it)
        b = b && setData(index, it.value(), it.key());
    return b;
} 
```

假设您的模型没有重新实现 setItemData，那么问题可能出在您在具体模型中的任何 setData 实现中。

# cuda - 在 cuda 中预取（通过 C 代码）

> ID：13265993
> 
> 赞同：8
> 
> 时间：2012-11-07T08:42:54.797
> 
> 标签：cuda, prefetch

我正在通过 C 代码在 CUDA (Fermi GPU) 中进行数据预取。Cuda 参考手册讨论了 ptx 级代码而不是 C 级代码的预取。

谁能将我与一些文件或有关通过 cuda 代码（cu 文件）预取的东西联系起来。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-07T10:35:33.910

根据[PTX 手册](http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/ptx_isa_3.0.pdf)，这里是预取在 PTX 中的工作方式：

![在此处输入图像描述](../Images/b3898322f82179b301e05597c732d5f1.png)

您可以将 PTX 指令嵌入到 CUDA 内核中。[这是NVIDIA 文档](http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/Using_Inline_PTX_Assembly_In_CUDA.pdf)中的一个小样本：

```
__device__ int cube (int x)
{
  int y;
  asm("{\n\t"                       // use braces for local scope
      " .reg .u32 t1;\n\t"           // temp reg t1,
      " mul.lo.u32 t1, %1, %1;\n\t" // t1 = x * x
      " mul.lo.u32 %0, t1, %1;\n\t" // y = t1 * x
      "}"
      : "=r"(y) : "r" (x));
  return y;
} 
```

您可能会以 C 中的以下预取函数得出结论：

```
__device__ void prefetch_l1 (unsigned int addr)
{

  asm(" prefetch.global.L1 [ %1 ];": "=r"(addr) : "r"(addr));
} 
```

注意：您需要 Compute Capability 2.0 或更高版本的 GPU 进行预取。相应地传递正确的编译标志`-arch=sm_20`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-07-28T11:50:59.657

根据[这个线程](https://devtalk.nvidia.com/default/topic/913519/cuda-programming-and-performance/tuning-a-kernel-with-ldg-on-off-array-and-prefetching/)，下面是不同缓存预取技术的代码：

```
#define DEVICE_STATIC_INTRINSIC_QUALIFIERS  static __device__ __forceinline__

#if (defined(_MSC_VER) && defined(_WIN64)) || defined(__LP64__)
#define PXL_GLOBAL_PTR   "l"
#else
#define PXL_GLOBAL_PTR   "r"
#endif

DEVICE_STATIC_INTRINSIC_QUALIFIERS void __prefetch_global_l1(const void* const ptr)
{
  asm("prefetch.global.L1 [%0];" : : PXL_GLOBAL_PTR(ptr));
}

DEVICE_STATIC_INTRINSIC_QUALIFIERS void __prefetch_global_uniform(const void* const ptr)
{
  asm("prefetchu.L1 [%0];" : : PXL_GLOBAL_PTR(ptr));
}

DEVICE_STATIC_INTRINSIC_QUALIFIERS void __prefetch_global_l2(const void* const ptr)
{
  asm("prefetch.global.L2 [%0];" : : PXL_GLOBAL_PTR(ptr));
} 
```

# android - Android在重新加载数据后将选定背景设置为列表行？

> ID：13265995
> 
> 赞同：2
> 
> 时间：2012-11-07T08:43:04.000
> 
> 标签：android, listview

我有以下问题：我有一个`ListView`。如果您单击一行，我的列表将重新加载，并在该行上添加一个按钮。到目前为止没问题...但是：添加按钮后，我希望`ListView`（在重新加载后）选择刚刚编辑（或添加）的行。我希望所选行（添加按钮的行）在重新加载列表后保持突出显示。

任何建议或示例代码将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T08:57:30.800

你试过用`setSelection(position)`吗？
您可能必须使用以下代码：

```
listView.post(new Runnable() {
    @Override
    public void run() {
        listView.setSelection(position);
    }
}); 
```

**更新：**
尝试使用 XML 属性`android:listSelector`和`android:drawSelectorOnTop`（请参阅[文档](http://developer.android.com/reference/android/widget/AbsListView.html#attr_android%3adrawSelectorOnTop)）突出显示所选项目。
如果它不能按您的意愿工作，您可以`Adapter`使用名为 selectedPosition 的 int 属性创建一个自定义，将所选项目的位置传递给 this`Adapter`并调用`notifyDataSetChanged`方法`OnItemClick`，然后在方法中，如果位置等于 selectedPosition `Adapter`，则更改`View`返回的 by 。`getView`

# android - Android：使用 URL 访问目录路径

> ID：13265996
> 
> 赞同：1
> 
> 时间：2012-11-07T08:43:04.520
> 
> 标签：android, url

我有一个要从服务器访问的文件目录，但在我的代码中，我没有要引用的特定文件，只是想获取父目录文件夹名称。

例如：www.website.com/path

我尝试使用 URL("file", "website.com", "path") 来检索目录，但似乎它不起作用，并且也没有抛出 MalformedURLException。

我可以通过这种方式访问​​文件夹吗？还是有其他方法可以解决？