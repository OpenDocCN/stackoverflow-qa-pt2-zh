# StackOverflow 问答 16188000-16188999

# jackson - 如何让 Resteasy 2.3.6 使用 Jackson 2.+

> ID：16188000
> 
> 赞同：4
> 
> 时间：2013-04-24T09:11:27.843
> 
> 标签：jackson, resteasy

有没有办法让 RestEasy 使用 Jackson 2+ ？似乎 RestEasy Jackson 提供者使用 Jackson 1.9.9，它仍然是 ResetEasy 3 的情况。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-13T11:50:39.250

这似乎很简单。Jackson 2 中已经有 Jackson JAXRS 提供程序。

*   `jackson-jaxrs-xml-provider`
*   `jackson-jaxrs-json-provider`
*   `jackson-jaxrs-smile-provider`

所以在 pom.xml

```
<dependency>
    <groupId>com.fasterxml.jackson.jaxrs</groupId>
    <artifactId>jackson-jaxrs-json-provider</artifactId>
    <version>2.2.2</version>
</dependency> 
```

`resteasy-jettison-provider`排除以确保您在处理 JSON 时没有冲突也很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-11T11:14:37.997

不幸的是，无法将 Jackson 2.x 与 RESTEasy 2.x 一起使用，因为 Jackson 1.x 的集成非常紧密。

但是，RESTEasy 从 3.0-beta-5 版本开始支持 Jackson 2.x -如果您使用 Maven ，请参阅[此问题](https://issues.jboss.org/browse/RESTEASY-801)了解详细信息或进行[存储库搜索。](http://mvnrepository.com/artifact/org.jboss.resteasy/resteasy-jackson2-provider)

# .net - 托管堆和GC堆有什么区别

> ID：16188003
> 
> 赞同：1
> 
> 时间：2013-04-24T09:11:31.457
> 
> 标签：.net, clr

谁能向我解释托管堆和GC堆之间的区别？因为我注意到有时总托管堆大小 < (Gen 0 + Gen 1 + Gen 2 + LOH) 在 Process explorer + VMMap 中。

在我看来，总托管堆应该等于 GC 堆（Gen0-2+LOH），为什么在进程资源管理器的 .NET 性能选项卡中，总 GC 堆大小大于 VMMap 中的托管堆大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-29T23:22:40.673

```
GC HEAP 
```

GC Heap 承载对象实例，Generations 是垃圾收集器堆的逻辑视图

```
MANAGED HEAP 
```

托管堆段是垃圾收集器代表托管代码从操作系统（通过调用 VirtualAlloc）保留的一块内存

```
LOADER HEAP 
```

LoaderHeaps 将类型系统组合在一起，它进一步分为 1> 高频堆 2> 低频堆 3> Stub Heap

您还可以使用 SOS 来验证这些堆

!eeheap -loader

!eeheap - GC

!GCRoot [-nostacks] [对象引用]

# android - Android 1.6 上的 java.lang.VerifyError 和 getActionBar()

> ID：16188004
> 
> 赞同：2
> 
> 时间：2013-04-24T09:11:37.860
> 
> 标签：android, android-actionbar, verifyerror

在我的应用程序中，我正在使用以下代码：

```
@TargetApi(14)
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    if(android.os.Build.VERSION.SDK_INT>=14) {
        getActionBar().setHomeButtonEnabled(false);
    }

} 
```

但是当我在带有 Android 1.6 的模拟器中运行它时，我得到了这个错误：

```
04-24 09:01:16.562: E/dalvikvm(922): Could not find method com.myname.myapp.MainActivity.getActionBar, referenced from method com.myname.myapp.MainActivity.onCreate
04-24 09:01:16.562: W/dalvikvm(922): VFY: unable to resolve virtual method 1014: Lcom/myname/myapp/MainActivity;.getActionBar ()Landroid/app/ActionBar;
04-24 09:01:16.562: W/dalvikvm(922): VFY:  rejecting opcode 0x6e at 0x0155
04-24 09:01:16.562: W/dalvikvm(922): VFY:  rejected Lcom/myname/myapp/MainActivity;.onCreate (Landroid/os/Bundle;)V
04-24 09:01:16.572: W/dalvikvm(922): Verifier rejected class Lcom/myname/myapp/MainActivity;
04-24 09:01:16.572: W/dalvikvm(922): Class init failed in newInstance call (Lcom/myname/myapp/MainActivity;)
04-24 09:01:16.572: D/AndroidRuntime(922): Shutting down VM
04-24 09:01:16.572: W/dalvikvm(922): threadid=3: thread exiting with uncaught exception (group=0x4001aa28)
04-24 09:01:16.572: E/AndroidRuntime(922): Uncaught handler: thread main exiting due to uncaught exception
04-24 09:01:16.582: E/AndroidRuntime(922): java.lang.VerifyError: com.myname.myapp.MainActivity
04-24 09:01:16.582: E/AndroidRuntime(922):  at java.lang.Class.newInstanceImpl(Native Method)
04-24 09:01:16.582: E/AndroidRuntime(922):  at java.lang.Class.newInstance(Class.java:1472)
04-24 09:01:16.582: E/AndroidRuntime(922):  at android.app.Instrumentation.newActivity(Instrumentation.java:1097)
04-24 09:01:16.582: E/AndroidRuntime(922):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2316)
04-24 09:01:16.582: E/AndroidRuntime(922):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2417)
04-24 09:01:16.582: E/AndroidRuntime(922):  at android.app.ActivityThread.access$2100(ActivityThread.java:116)
04-24 09:01:16.582: E/AndroidRuntime(922):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1794)
04-24 09:01:16.582: E/AndroidRuntime(922):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-24 09:01:16.582: E/AndroidRuntime(922):  at android.os.Looper.loop(Looper.java:123)
04-24 09:01:16.582: E/AndroidRuntime(922):  at android.app.ActivityThread.main(ActivityThread.java:4203)
04-24 09:01:16.582: E/AndroidRuntime(922):  at java.lang.reflect.Method.invokeNative(Native Method)
04-24 09:01:16.582: E/AndroidRuntime(922):  at java.lang.reflect.Method.invoke(Method.java:521)
04-24 09:01:16.582: E/AndroidRuntime(922):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
04-24 09:01:16.582: E/AndroidRuntime(922):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:549)
04-24 09:01:16.582: E/AndroidRuntime(922):  at dalvik.system.NativeStart.main(Native Method) 
```

当我删除线 getActionBar().setHomeButtonEnabled(false); 它工作正常。在不删除此行的情况下如何修复它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:29:00.667

使用`android-support-v4.jar`它就像在隐藏之后添加 ActionBar 一样。

希望您已将[actionbarShareLock](http://actionbarsherlock.com/)用于 < 11 API。

# javascript - jQuery条件通过

> ID：16188009
> 
> 赞同：1
> 
> 时间：2013-04-24T09:11:48.033
> 
> 标签：javascript, jquery

我为 2 个输入进行了自己的表单验证，一个用于电话号码，另一个用于电子邮件地址。而且我在 1 页中有 2 个表格。

我的代码是

```
var email, phone;

if (email address validation passed) {
    email = true;
} else {
    email = false;
}

if (phone number validation passed) {
    phone = true;
} else {
    phone = false;
}

if (!(phone && email)) {
    return false
} else {
    return true
} 
```

因为我在同一页面上有两个表单，所以我想为第二个表单提供另一个片段，例如，

```
var email2, phone2;

if (email address validation passed) {
    email2 = true;
} else {
    email2 = false;
}

if (phone number validation passed) {
    phone2 = true;
} else {
    phone2 = false;
}

if (!(phone2 && email2)) {
    return false
} else {
    return true
} 
```

我发现的问题是，为了提交表单，我需要`email, phone, email2, phone2;`全部等于 true。但是，我需要提交条件 if`email, phone are true`或`phone2, email2 are true` Just 需要有人检查这是否是解决我的问题的正确合乎逻辑的方法？

```
if (!(phone2 && email2)) {
    return false
} else if(!(phone  && email )) {
    return false
} else return true; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T09:15:05.023

> 但是，如果电子邮件，电话为真或电话2，电子邮件2为真，我需要提交条件

你说的方式是最简单的编码方法：

```
if ((email && phone) || (email2 && phone2)) {
    return true;
} else {
    return false;
} 
```

如果你只是要根据条件是真还是假来返回真或假，你可以像这样在一行中做到这一点：

```
return (email && phone) || (email2 && phone2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T09:17:23.187

你可以检查它像

```
if((phone2 && email2) || (phone && email))
    return true;
else
    return false; 
```

# git - Github 中错误地标记为子模块的文件夹

> ID：16188014
> 
> 赞同：1
> 
> 时间：2013-04-24T09:12:06.833
> 
> 标签：git

我遇到了一个问题。我们有一个小组项目的 github 设置。git repo 中的一个文件夹是一个 web 应用程序，它有自己的 heroku 部署，因此也有自己的 .git。Github 总是将此文件标记为绿色，我不知道如何将其从 git 子模块转换为普通文件夹。

我尝试将 /path/.git 添加到 .gitignore 但没有帮助。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-01T16:53:58.777

解决方案在于将它们作为子模块添加到 git。信息在这里找到：http: [//git-scm.com/book/en/Git-Tools-Submodules](http://git-scm.com/book/en/Git-Tools-Submodules)。

您需要转到主目录，然后执行以下操作：

```
git submodule add git://github.com/<something>.git <name> 
```

然后，当您拉取您的目录时，您可以让它重新拉取所有子模块：

```
git submodule init
git submodule update 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:37:48.767

似乎 repo 子模块在 github 的网站上显示为绿色。虽然不是通过实践经验说的，因为我从未创建过包含子模块的 github 存储库，而是通过观察。

来源[这个](https://stackoverflow.com/questions/13551625/git-submodules-in-github-repo)，[这个](https://stackoverflow.com/questions/11099665/git-repository-from-github-empty-green-folder)和[这个](https://stackoverflow.com/questions/12936014/github-submodule-automatically-in-download)。

# ios - UITableViewCell drawRect 影响其他单元格

> ID：16188015
> 
> 赞同：3
> 
> 时间：2013-04-24T09:12:10.383
> 
> 标签：ios, objective-c, uitableview

我有一个`UITableView`自定义单元格。

我想使用该`drawRect`方法自己渲染单元格（我正在使用蒙版渲染带圆角的图像）。

无论如何，使用`drawRect`tableView 中的方法只绘制一个单元格。其余的都在那里，它们只是看不见的。我可以点击它们，但我看不到它们。

如果我删除该`drawRect`方法，则所有单元格都可见并显示标签。

`drawRect`方法是...

```
- (void)drawRect:(CGRect)rect
{
    CGContextRef context = UIGraphicsGetCurrentContext();

    CGRect mask = CGRectMake(10, 10, rect.size.width - 20, rect.size.height - 20);

    UIBezierPath *maskPath = [UIBezierPath bezierPathWithRoundedRect:mask cornerRadius:4];

    CAShapeLayer *maskLayer = [CAShapeLayer layer];
    maskLayer.frame = self.frame;

    maskLayer.path = maskPath.CGPath;

    self.layer.mask = maskLayer;

    if (self.image == nil) {
        CGContextSetFillColorWithColor(context, [UIColor colorWithWhite:0.6 alpha:1.0].CGColor);
        CGContextFillRect(context, rect);
    } else {
        float width = rect.size.width - 20;
        float height = self.image.size.height / self.image.size.width * width;

        CGRect imageRect = CGRectMake((rect.size.width - width) * 0.5, (rect.size.height - height) * 0.5, width, height);
        [self.image drawInRect:imageRect];
    }
} 
```

我在这里做错了吗？

此外，如果我移除蒙版，那么它会绘制所有单元格，但我希望蒙版在那里用于圆角。

**编辑 - 删除图像绘图**

我编辑了 drawRect 方法（在 中`UITableViewCell`）（为什么我要把它放在 tableView 中？）

无论如何，新`drawRect`方法是......

```
- (void)drawRect:(CGRect)rect
{
    if (self.image == nil) {
        CGContextRef context = UIGraphicsGetCurrentContext();

        CGRect mask = CGRectMake(10, 10, rect.size.width - 20, rect.size.height - 20);

        UIBezierPath *maskPath = [UIBezierPath bezierPathWithRoundedRect:mask cornerRadius:4];

        CAShapeLayer *maskLayer = [CAShapeLayer layer];
        maskLayer.frame = self.frame;

        maskLayer.path = maskPath.CGPath;

        self.layer.mask = maskLayer;

        CGContextSetFillColorWithColor(context, [UIColor colorWithWhite:0.7 alpha:1.0].CGColor);
        CGContextFillRect(context, rect);
    }
} 
```

如果图像为 nil，则它会在其位置呈现一个灰色矩形。除了它只显示第一个单元格。掩码似乎阻止了其他单元格的显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T09:36:07.207

您正在将遮罩层框架设置为单元格的框架，该框架位于单元格的超级视图 - UITableView 的坐标空间中，因此对于所有单元格，但第一个实际遮罩框架将超出单元格的边界。尝试将掩码框架设置为单元格的边界：

```
maskLayer.frame = self.bounds; 
```

# c# - 动态改变按钮背景颜色c#

> ID：16188016
> 
> 赞同：-2
> 
> 时间：2013-04-24T09:12:11.353
> 
> 标签：c#, sqldatareader

我想用一个计时器来帮助改变 flowLayoutPanel1 中包含的按钮的颜色。使用我的查询代码颜色改变正确，但是当查询条件变为假时，我的按钮不会改变他的颜色（当我创建它时我将颜色设置为绿色）。

这是我的代码：

```
private void timer1_Tick(object sender, EventArgs e)
{
    int t = 0;
    int st = 0;
    try
    {
        using (SqlConnection cn =new SqlConnection(VisualizzaOrdini.Form1.cnstr))
        {
            string strSql = "SELECT tavolo,stampa FROM Ordini";
            SqlCommand cmd = new SqlCommand(strSql, cn);
            cn.Open();
            using (SqlDataReader dr = cmd.ExecuteReader())
            {
                while (dr.Read())
                {
                    t = (int)dr["tavolo"];
                    st = (int)dr["stampa"];
                    foreach (Control c in flowLayoutPanel1.Controls)
                    {
                        if (st == 0)
                        {
                            if (c.Name == Convert.ToString(t))
                            {
                                c.BackColor = Color.Red;
                            }
                        }
                        else if (c.Name == Convert.ToString(t))
                        {
                            c.BackColor = Color.Green;
                        }
                    }
                }
            }
            cn.Close();
        }
    }
}
catch (Exception)
{
} 
```

我需要在餐厅程序中实现这一点。如果它很忙，我想把它涂成红色，如果它有空，我想把它涂成绿色。

这是一张图片：

[https://docs.google.com/file/d/0B-nMmszaCz8EVE9JdjlISHg1aDA/edit?usp=sharing](https://docs.google.com/file/d/0B-nMmszaCz8EVE9JdjlISHg1aDA/edit?usp=sharing)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:54:33.483

如果您在 flowLayoutPanel1 代码中的 Panel 中的按钮不起作用

```
foreach (Control c in flowLayoutPanel1.Controls)
                    {
                        if (c is Panel)
                        {
                           //iterate through panel
                        }
                    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:32:35.033

```
foreach (Button button in flowLayoutPanel1.Controls)
{    
    if (button.Name == Convert.ToString(t))
    {
        if (st == 0)
        {
           button.BackColor = Color.Red;
        }                    
        else
        {
           button.BackColor = Color.Green;
        }
    }
} 
```

此外，更改 foreach 循环以查找特定的按钮控件（或您可能正在使用的任何自定义控件），因为它当前将查看**所有**控件，无论它们是否是按钮

# excel - SUMIF 函数：如果单元格包含特定名称，则求和

> ID：16188018
> 
> 赞同：7
> 
> 时间：2013-04-24T09:12:14.520
> 
> 标签：excel, function

我想在 Excel 2010 中运行一个函数，它必须：

*   检查特定范围内的哪个单元格包含名称
*   如果上一个任务为真，则对相邻单元格求和

例子：

在 B2:B227 范围内有一些名称，如讴歌、奥迪、宝马、凯迪拉克等。在 C2:C227 范围内有这些制造商在 2012 年销售的汽车数量。

我想计算某些制造商销售的汽车总和。

我正在考虑类似的事情，但它不起作用。我想我在第一步犯了一个错误（识别单元格 B2:B227 中的名称）。

`=SUMIF(B2:B227,OR("Audi","Acura","BMW","Cadillac"),D2:D227)`

谢谢，

詹卢卡

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T12:00:55.147

您**可以**使用 SUMIF，但由于结果是一个数组（每个标准一个总和），您需要在 SUMIF 周围使用 SUM 或 SUMPRODUCT 来获得总数，例如

`=SUM(SUMIF(B2:B227,{"Audi","Acura","BMW","Cadillac"},D2:D227))`

或在一系列单元格中列出奥迪、讴歌等，例如 K2:K5 并使用此版本

`=SUMPRODUCT(SUMIF(B2:B227,K2:K5,D2:D227))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:06:36.120

我最初查看了类似于以下链接的内容，但我认为这不允许您`SUMIF`基于标准。

[如果单元格包含 1 个或多个关键字，则更改不同单元格的值](https://stackoverflow.com/questions/5394063/excel-if-cell-contains-1-or-more-keywords-change-value-of-a-different-cell)

* * *

[根据本文，](http://www.ozgrid.com/Excel/sum-if.htm)您似乎可以再使用`SUMIF`for multiple criteria 。

好的，所以如果我们需要对相应单元格（在同一行上）满足 2 个或更多条件的单元格范围求和，我们就不能再使用 SUMIF。我们可以使用的公式，按照它们的效率，是

1.  DSUM 下载 DSUM 的高级示例
2.  总产品
3.  SUM 和 IF 函数嵌套并作为数组公式输入。有关详细信息，请参阅数组公式

有关可用的不同选项的更多信息，[这篇文章应该非常有帮助](http://www.ozgrid.com/Excel/sum-if.htm)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2016-08-13T23:07:19.857

```
=(SUMIF(A5:A230,K5:K15,C5:C230)) 
```

# approximation - 用斯特林近似计算下限

> ID：16188021
> 
> 赞同：1
> 
> 时间：2013-04-24T09:12:20.677
> 
> 标签：approximation, lower-bound

我们在学校有这个练习，我们要计算算法的下限。我们知道下限是：Log_6((3*n)! / n!^3) 我们将使用斯特林近似来近似 n!。当应用斯特林近似时，我们得到：

log_6((sqrt(2*pi*3*n)*((3*n)/e)^(3*n) * e^alpha)/(sqrt(2*pi*n)*(n/e) ^n * e^alpha)^3)

现在我们的问题是，每次我们尝试用简单的对数属性扩展这个公式，例如 log(a/b) = log(a)-log(b), log(a*b) = log(a)+log( b), log(a^b) = b*log(a) 最后对于 sqrt log(sqrt(a)) = log(a^1/2) = 1/2 * log(a)，我们得到一个结果支配表达式的位置将是 n*log(n) * 常量。现在我们从老师那里知道我们必须找到一个线性下限，所以这是错误的。

我们已经使用了 2 天，即将放弃。有人可以帮助我们吗？

提前致谢！

# jboss5.x - 负载下的间歇性 JVM 崩溃

> ID：16188022
> 
> 赞同：1
> 
> 时间：2013-04-24T09:12:21.603
> 
> 标签：jboss5.x, jvm-crash

我目前正在使用 JDK 1.6.0_45 对在 JBoss 5.1 中运行的集群应用程序进行负载测试，并且遇到间歇性 JVM 崩溃。从错误报告（下面报告中的更多详细信息）看来，伊甸园空间在崩溃时已满（100%），所以我怀疑这是最有可能的候选者。

因此，我一直在运行 JVisualVM 来查找内存泄漏，特别是监视我自己的类。我可以看到这些类在内存中增长，但随后垃圾收集器会定期清理它们。

即使存在内存泄漏，我也希望在 JVM 完全崩溃之前看到 OutOfMemory 错误。任何人都可以帮助我指出问题所在的正确方向吗？任何指导将不胜感激。

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x000000006dba43f7, pid=3980, tid=2556
#
# JRE version: 6.0_45-b06
# Java VM: Java HotSpot(TM) 64-Bit Server VM (20.45-b01 mixed mode windows-amd64 compressed oops)
# Problematic frame:
# V  [jvm.dll+0x2c43f7]
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
# 
```

剪断

```
Heap
 PSYoungGen      total 670272K, used 662831K [0x00000007d5560000, 0x0000000800000000, 0x0000000800000000)
  eden space 641728K, 100% used [0x00000007d5560000,0x00000007fc810000,0x00000007fc810000)
  from space 28544K, 73% used [0x00000007fc810000,0x00000007fdcabf68,0x00000007fe3f0000)
  to   space 28352K, 12% used [0x00000007fe450000,0x00000007fe7d0e60,0x0000000800000000)
 PSOldGen        total 1398144K, used 1096904K [0x0000000780000000, 0x00000007d5560000, 0x00000007d5560000)
  object space 1398144K, 78% used [0x0000000780000000,0x00000007c2f32250,0x00000007d5560000)
 PSPermGen       total 422848K, used 378606K [0x0000000760000000, 0x0000000779cf0000, 0x0000000780000000)
  object space 422848K, 89% used [0x0000000760000000,0x00000007771bb800,0x0000000779cf0000) 
```

剪断

```
VM Arguments:
jvm_args: -Dprogram.name=run.bat -XX:MaxPermSize=512m -Xms2G -Xmx2G -Dhttp.proxyHost=testproxy -Dhttp.proxyPort=8010 -Dhttps.proxyHost=testproxy -Dhttps.proxyPort=8010 -Djavax.net.ssl.trustStore=cacerts -Djavax.net.ssl.trustStorePassword=changeit -Djavax.net.ssl.keyStore=testkeystore.jks -Djavax.net.ssl.keyStorePassword=testkeystore -Djboss.messaging.ServerPeerID=2 -Dhttp.nonProxyHosts=*.mydomain.com -Dsun.rmi.dgc.client.gcInterval=900000 -Dsun.rmi.dgc.server.gcInterval=900000 -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -Djava.library.path=C:\jboss-5.1.0.GA\bin\native;C:\Program Files (x86)\Windows Resource Kits\Tools\;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0;C:\jboss-5.1.0.GA\bin -Djava.endorsed.dirs=C:\jboss-5.1.0.GA\lib\endorsed 
java_command: org.jboss.Main -c hops-cnf -b 0.0.0.0
Launcher Type: SUN_STANDARD 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:36:30.860

这很可能是 JVM 版本和 eden 空间的问题。您最好的选择可能是减少 GC 线程？尝试

```
-XX:LargePageSizeInBytes=5m -XX:ParallelGCThreads=1 -XX:+UseParNewGC -XX:+UseConcMarkSweepGC 
```

# internet-explorer - 如何修复边框半径与框阴影结合的 IE 渲染？

> ID：16188024
> 
> 赞同：9
> 
> 时间：2013-04-24T09:12:38.900
> 
> 标签：internet-explorer, css

有没有人知道如何在 IE 9 和 10 中“修复”box-shadow 和border-radius 组合的渲染？

使用嵌入阴影时尤其明显。与 webkit/gecko 相比，IE 中阴影的半径有很大不同...

在这张图片中，您可以看到问题所在。左边是一个带有嵌入框阴影的按钮，右边是没有框阴影的按钮。（不要介意不同的字体渲染）

![在此处输入图像描述](https://i.stack.imgur.com/i74lR.png)

这是使用的代码： http: [//dabblet.com/gist/5450815](http://dabblet.com/gist/5450815)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-02T12:10:01.183

仅当嵌入阴影的扩展触发比 IE 中边框半径的大小更大的“阴影半径”时，才会出现此问题。在您的示例中将边框半径设置为 50px，它在 IE 和 Chrome 中看起来相同。

如果您需要更大的 box-shadow 传播，那么您可以只使用边框，至少在您的示例中可以解决问题。示例：[http ://dabblet.com/gist/5501799](http://dabblet.com/gist/5501799)

您可能会看到的另一个问题是 IE 和 Chrome 呈现的 box-shadow 模糊完全不同，但我假设您因此没有在示例中使用它...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-29T18:56:06.173

我尝试过并且有效的快速（半脏）解决方案是 div 内的 div。如果这样做，请告诉我。

HTML 代码：

```
</head>
<body>
 <div class="box"><div class="box-inside"></div></div>
 </body>
</html> 
```

代码：

```
.box {
border-radius: 15px;
box-shadow: inset 0 0 0 10px #000;
width: 200px;
height: 100px;
background: #000;
}
.box-inside {
border-radius: 15px;
box-shadow: inset 0 0 0 10px #fff;
width: 175px;
height: 75px;
position: relative;
top: 12%;
left: 6%;
background: #fff;
} 
```

我的[jsfiddle](http://jsfiddle.net/cornelas/NbA6n/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-02T20:46:10.863

试试这个，添加这个角色：

```
filter:progid:DXImageTransform.Microsoft.Blur(PixelRadius='15', MakeShadow='true', ShadowOpacity='1'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-12-05T01:20:34.907

您可以安全地使用`inset`框阴影来模拟现代浏览器中的边框，但 IE 会错误地渲染半径。您可以通过让 IE 回退到默认的“初始”样式来解决此问题。

```
.Button {
  color: #0ac;
  background-color: #fff;
  border-radius: 8px;
  box-shadow: inset 0 0 0 2px #0ac;
}

/* IE media query hack */
@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {
  .Button {
    box-shadow: 0 0 0 2px #0ac;
  }
} 
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2013-04-24T10:29:06.673

试试这个：//CSS

```
.box {
    border-radius: 15px;
    -moz-border-radius: 15px;
    -webkit-border-radius: 15px;
    -khtml-border-radius: 15px;

    -moz-box-shadow: inset 0 0 10px #000;
    -webkit-box-shadow: inset 0 0 10px #000;
    box-shadow: inset 0 0 10px #000;

    width: 200px;
    height: 100px;
} 
```

对于 IE8，您必须包含 CSS3 pie(pie.htc) 文件，然后它才能在 IE8 上运行。

您可以从这里下载：`http://css3pie.com/`

# c# - 使用 Windows 登录对用户进行身份验证

> ID：16188025
> 
> 赞同：1
> 
> 时间：2013-04-24T09:12:42.210
> 
> 标签：c#, .net, security, authentication

我想尽量避免强迫用户登录以使用我的应用程序，所以我想知道是否有安全措施我可以使用经过 Windows 身份验证的用户？

我个人看不到这个工作，因为在某些时候我的应用程序将不得不向用户发送登录用户名并获取权限。

假设这个连接是加密的......我猜恶意用户仍然可以反编译我的应用程序，更改代码以模拟用户并重新编译。即使我对代码进行了混淆，我也确信围绕它必须存在方法。

有任何想法吗？

# oauth - Twitter Oauth Giving “远程服务器返回错误：（401）”

> ID：16188027
> 
> 赞同：1
> 
> 时间：2013-04-24T09:12:47.190
> 
> 标签：oauth, twitter, oauth-2.0, twitter-oauth

我正在使用 Twitter OAuth 来验证用户身份并在我的网站上显示用户推文。

以下是用于 API 的一些常量：

公共常量字符串 REQUEST_TOKEN = " [https://api.twitter.com/oauth/request_token](https://api.twitter.com/oauth/request_token) "; 公共常量字符串 AUTHORIZE = " [https://api.twitter.com/oauth/authorize](https://api.twitter.com/oauth/authorize) "; 公共常量字符串 ACCESS_TOKEN = " [https://api.twitter.com/oauth/access_token](https://api.twitter.com/oauth/access_token) ";

现在，当我使用

新的 StreamReader(webRequest.GetResponse().GetResponseStream());

然后我收到错误：“远程服务器返回错误：（401）未经授权。”

My webrequest uri is [https://api.twitter.com/oauth/access_token?oauth_consumer_key=myConsumerkey&oauth_nonce=3403339&oauth_signature_method=HMAC-SHA1&oauth_timestamp=1366792353&oauth_token=1372849567-3BtbvrvJ3HXl774InICgBz1T2jcLpif9xecxWmc&oauth_version=1.0&oauth_signature=%2bLyQZwQwiNGJNP9uk591Hy4arfk%3d](https://api.twitter.com/oauth/access_token?oauth_consumer_key=myConsumerkey&oauth_nonce=3403339&oauth_signature_method=HMAC-SHA1&oauth_timestamp=1366792353&oauth_token=1372849567-3BtbvrvJ3HXl774InICgBz1T2jcLpif9xecxWmc&oauth_version=1.0&oauth_signature=%2bLyQZwQwiNGJNP9uk591Hy4arfk%3d)

那么这个网址有什么问题。请帮助我摆脱这个。

谢谢，达尔维尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:06:03.370

您是否正在发送用户授权您的应用时收到的 oauth_verifier 代码？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T07:57:38.220

不使用 oauth_verifier 的 Twitter 应用程序将无法完成 OAuth 流程。如果您在回调中没有收到 oauth_verifier，请确认您在 POST oauth/request_token 上明确设置了 oauth_callback。

# javascript - iOS 停止随机发送 httprequests[Titanium]

> ID：16188029
> 
> 赞同：2
> 
> 时间：2013-04-24T09:12:53.543
> 
> 标签：javascript, ios, titanium, httprequest, appcelerator

我有一个应用程序每 5 秒发送一次地理位置，如果没有找到新位置，则每分钟最后一次找到位置。所以基本上应用程序无法停止将地理位置发送到 PHP 文件。

尽管如此，它确实如此。完全随机的。该应用程序只是停止发送到服务器而没有错误（因为我的 onerror 中有一个警报）并且当我打开应用程序以查看发生了什么时才开始重新发送。

顺便说一句，它似乎在 Android 上运行良好！

我的 info.plist 中有一些东西可以让它保持活力（它确实让它保持活力，但我猜只是随机停止生活）：

```
<key>UIBackgroundModes</key>
<array>
    <string>external-accessory</string>
    <string>location</string>
</array> 
```

我的 httprequest 看起来像这样：

```
 function sendCoordinates() {
        //Reset the visual text(errors/succesmessage etc)
        if (Titanium.Network.online) {

            //Concat the GPSholder array into the toSend and than empty the GPSholder.
            //To toSend accumulates GPSholder arrays in case it can't be sent for some reason but avoids getting duplicates in the GPSholder
            //the toSend is emptied out after a succesful save.
            toSend = toSend.concat(getGPSholder());
            GPSholder = [];
            if (toSend.length > 0) {
                GPSSaved.text = '';
                minuteInterval = 0;
                var xhr=Titanium.Network.createHTTPClient({enableKeepAlive: false});
                xhr.open("POST","http://xxx.nl/website/services/esrm_tracker/push_tt_positions.php");        
                xhr.onload = function(){

                    if(this.status == '200'){

                        if(this.readyState == 4){
                            var result = JSON.parse(this.responseText);

                            switch(result.result) {
                                case 1:
                                    secondsLastSent = 0;
                                    counterBlock.text = "De laatste locatie is " + secondsLastSent + " seconden geleden verstuurd";
                                    counterBlock.show();
                                    toSend = [];
                                break;

                                case -1:
                                    GPSSaved.text = 'Authorisatie code niet geldig. Er worden geen locaties meer verstuurd.';
                                GPSstop();
                            break;

                            case -2:
                                GPSSaved.text = 'Locaties niet geldig';
                            break;

                            case -3:
                                GPSSaved.text = 'Authorisatie code niet gevonden. Er worden geen locaties meer verstuurd.';
                                GPSstop();
                            break;

                            case -10:
                                GPSstop();
                            break;

                            default:
                                GPSSaved.text = 'Onbekende fout. Er worden geen locaties meer verstuurd.';
                                GPSstop();
                            break;
                        }
                    }       
                }
            }
            xhr.onerror = function(e){ 
                GPSSaved.text = e.status + ' <- error';
                alert(e);
            };

            xhr.timeout = 10000;

            xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
            var str = JSON.stringify(toSend);
            var params = {
                auth_key : auth_key,
                locations : str
            };

            xhr.send(params);
        }
   } else {
        GPSSaved.text = 'Geen internet. Het versturen van locaties wordt hervat als de verbinding is hervat.';
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:04:30.337

从我从您的代码中可以看出，您没有为 iOS 注册后台任务。您只打算通过配置它来做到这一点。

我也不认为它是随机的，而是在应用程序关闭 5 分钟后。在那一点上，应用程序`pauses`直到它再次打开，因此它将继续传输位置。

你应该看看这个文档：[http ://docs.appcelerator.com/titanium/latest/#!/api/Titanium.App.iOS.BackgroundService](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.App.iOS.BackgroundService)

```
var service = Ti.App.iOS.registerBackgroundService({url:'bg-service1.js'}); 
```

请注意，它将运行不同的实例，并且您不应将整个应用程序包含在此后台服务中，因为它也没有 UI。为它创建一个单独的文件，包含所需的 http 和数据库调用，仅此而已。

# ajax - 无法在 fancybox 中编辑表单输入字段

> ID：16188032
> 
> 赞同：1
> 
> 时间：2013-04-24T09:12:57.723
> 
> 标签：ajax, forms, fancybox, fancybox-2

我使用 Fancybox 编辑实体而不重新加载整个页面。但是通过 ajax 加载表单内容后，我无法编辑输入字段。如果我单击其中一个输入，我会立即失去焦点。显示fancybox的代码很简单：

```
<a class="lightbox fancybox.ajax" href="/app_dev.php/devices/517781e3e707a00217000033/edit">Bearbeiten</a> 
```

和 javascript（提交尚未实现的表单）

```
$(document).ready(function() {
    $(".lightbox").fancybox({
        minWidth : 300,
        minHeight : 150,
        openEffect : 'none',
        closeEffect : 'none'
    });
}); 
```

通过ajax返回的内容：

```
<form class="lightbox" action="/app_dev.php/devices/517781e3e707a00217000033/edit" method="POST">
    <fieldset id="device">
        <p>
            <label for="device_name" class="required"> device.name </label>
            <input type="text" id="device_name" name="device[name]" required="required" value="VW BUS">
        </p>
        <p>
            <label for="device_type" class="required"> device.type </label>
            <select id="device_type" name="device[type]" required="required">
                <option value="0">FME 2100</option>
                <option value="1">FME 2200</option>
                <option value="2">FME 3200</option>
            </select>
        </p>
        <p>
            <label for="device_number" class="required"> device.number </label>
            <input type="text" id="device_number" name="device[number]" required="required" value="+43xxxxxxxxx">
        </p>
        <p>
            <label for="device_imei" class="required"> device.imei </label>
            <input type="text" id="device_imei" name="device[imei]" required="required" value="xxxxxxxxxxxx">
        </p>
        <input type="hidden" id="device__token" name="device[_token]" value="xxxxxxxxxxxxxxx">
    </fieldset>
    <input type="submit" value="form.save">
</form> 
```

如前所述，我立即失去了对输入字段的关注。选择正在工作...

我使用fancybox 2.1.4 和jquery 1.9.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-20T11:13:33.460

您可以使用这个小提琴并根据语法进行更改：http: [//jsfiddle.net/UYHxc/2/](http://jsfiddle.net/UYHxc/2/)

```
$.fancybox.open('#divFancyBoxTest',{
 // prevents closing when clicking INSIDE fancybox 
         openEffect  : 'none',
         closeEffect : 'none',             
         closeBtn : false,              
         helpers   : { 
          overlay : {closeClick: false} // prevents closing when clicking OUTSIDE fancybox 
         }
});
$('#addbtn').click(function(){
            $(".input_add").toggle(); //add input box                                 
        }); 
```

```
<div id="divFancyBoxTest">
     <div style=" font-size: 14px; font-weight: bold; text-align: center; margin-bottom: 17px;">Click the link in the email we have sent to</div>    
     <div style="text-align:center; margin-bottom: 17px;"><a href="logout" style="color: #00A8EC;text-decoration: underline; font-weight: bold; padding: 4px; border-radius: 10px; margin-top: 10px;margin-left: 0px !important;">logout</a></div>
        <div style=" font-size: 14px; font-weight: bold; text-align: center;margin-bottom: 17px;">to complete your registration.</div>    
        <div style=" font-size: 14px; text-align: center;margin-bottom: 17px;"><span style="color: #00A8EC; font-weight: bold;padding-left: 5px;padding-right: 5px;">
                <a style="color: #00A8EC;text-decoration: underline; font-weight: bold; padding: 4px; border-radius: 10px; margin-top: 10px;margin-left: 0px !important;" id="resendemail">Resend confirmation email </a>
                <span style="color:#000;">|</span>
                <a style="color: #00A8EC;text-decoration: underline; font-weight: bold; padding: 4px; border-radius: 10px; margin-top: 10px;margin-left: 0px !important;" id="addbtn">Change email address</a>                
                <div class="input_add" style="margin-top: 30px;display: none;">                    
                    <input type="text" name="email" style="padding-top: 4px !important;" >
                    <button style="background-color: #00A8EC;height: 30px;box-shadow: none;border: 1px solid #00A8EC;color: #fff;">Submit</button>                    
                </div>
            </span>
            </div>        
   </div>    
    <input type="text" id="something" value="test" />
</div>
```

# java - java.lang.NoSuchFieldError: sqlResultSetMappings

> ID：16188035
> 
> 赞同：0
> 
> 时间：2013-04-24T09:13:09.257
> 
> 标签：java, hibernate

```
Initial SessionFactory creation failed.java.lang.NoSuchFieldError: sqlResultSetMappings` <br/> 
```

我收到此错误并且无法修复，因为这可能是对休眠注释 jar 缺乏了解。

```
java.lang.NoSuchFieldError: sqlResultSetMappings
at org.hibernate.cfg.AnnotationConfiguration.createExtendedMappings(AnnotationConfiguration.java:166)
at org.hibernate.cfg.AnnotationConfiguration.secondPassCompile(AnnotationConfiguration.java:254)
at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1036)
at com.util.HibernateUtil.<clinit>(HibernateUtil.java:16)
at com.view.OrderProcessingAction.<init>(OrderProcessingAction.java:84)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
at java.lang.reflect.Constructor.newInstance(Unknown Source)
at java.lang.Class.newInstance0(Unknown Source)
at java.lang.Class.newInstance(Unknown Source)
at com.opensymphony.xwork2.ObjectFactory.buildBean(ObjectFactory.java:123)
at com.opensymphony.xwork2.ObjectFactory.buildBean(ObjectFactory.java:154)
at com.opensymphony.xwork2.ObjectFactory.buildBean(ObjectFactory.java:143)
at com.opensymphony.xwork2.ObjectFactory.buildAction(ObjectFactory.java:113)
at com.opensymphony.xwork2.DefaultActionInvocation.createAction(DefaultActionInvocation.java:275)
at com.opensymphony.xwork2.DefaultActionInvocation.init(DefaultActionInvocation.java:365)
at com.opensymphony.xwork2.DefaultActionInvocation.access$000(DefaultActionInvocation.java:38)
at com.opensymphony.xwork2.DefaultActionInvocation$1.doProfiling(DefaultActionInvocation.java:83) 
```

我现在添加了堆栈跟踪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-10T21:54:06.103

您的字段中缺少一些字段

[查看此链接http://docs.jboss.org/hibernate/entitymanager/3.6/reference/en/html_single/](http://docs.jboss.org/hibernate/entitymanager/3.6/reference/en/html_single/)上的“本机查询”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:23:57.120

假设您使用的是正确的 Hibernate 初始化代码，则此问题可能是 jar 版本不一致。

尽管您已正确检测到原因，但我建议您在此处打印整个堆栈跟踪。您可以在堆栈跟踪中找到代码失败的确切位置（哪个类、方法等）。有了这些信息，可以通过类名找到相关的 jar。您可以为此目的使用 jarfinder： [Jarfinder](http://www.jarfinder.com/)

这会让你知道哪个 jar 与你当前的 hibernate 配置不一致。

希望这可以帮助

# java - 查找使用 RSA 生成的数字的主要因素（这是两个密钥的一部分）

> ID：16188036
> 
> 赞同：0
> 
> 时间：2013-04-24T09:13:09.410
> 
> 标签：java, rsa

我有 RSA (e; n) 生成的公钥和私钥 (d; n)。例如，我得到了所有这 3 个数字：

```
n=113753..47267
e=4978..2634861
d=352...1223909 
```

有了这些知识，如何找到 n 的主要因素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:28:38.780

您不能分解 n （这实际上是 RSA 密码系统所基于的点）。在“不能”下，我的意思是，通常在密码学中，“不能在合理的时间内做到这一点”。

# python - 嵌入在 PyQt 中的 Matplotlib 交互式图形

> ID：16188037
> 
> 赞同：7
> 
> 时间：2013-04-24T09:13:11.133
> 
> 标签：python, graph, matplotlib, pyqt4, interactive

我创建了一个简单的 python 脚本，运行时应该在 PyQT 窗口中显示嵌入的 matplotlib 图。我已经使用[本](http://www.technicaljar.com/?p=688)教程来嵌入和运行图表。除了命名约定和整个 UI 中的一些差异之外，我的图表生成的完全与教程中提到的一样。

我的问题是我想让它成为一个允许缩放和拖动的交互式图表，但我想只用鼠标（点击和拖动、滚轮等）而不用工具栏（我发现它丑陋的）。

小部件类：

```
class MplCanvas(FigureCanvas):
    """
    Creates a canvas on which to draw our widgets
    """
    def __init__(self):
        self.fig = Figure()
        self.ax = self.fig.add_subplot(111)

        FigureCanvas.__init__(self, self.fig)
        FigureCanvas.setSizePolicy(self, QtGui.QSizePolicy.Expanding,QtGui.QSizePolicy.Expanding)
        FigureCanvas.updateGeometry(self)

class marketdephWidget(QtGui.QWidget):
    """
    The market deph graph
    """
    def __init__(self, parent = None):
        QtGui.QWidget.__init__(self, parent)
        self.canvas = MplCanvas()
        self.vbl = QtGui.QVBoxLayout()
        self.vbl.addWidget(self.canvas)
        self.setLayout(self.vbl) 
```

绘图功能（按下按钮运行）：

```
# initialize the mplwidgets
def PlotFunc(self):
    randomNumbers = random.sample(range(0, 10), 10)
    self.ui.widget.canvas.ax.clear()
    self.ui.widget.canvas.ax.plot(randomNumbers)
    self.ui.widget.canvas.draw() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T07:49:49.807

已经有一段时间了，但我正在解决类似的问题。我[这里有一个例子](https://github.com/JeffMGreg/pyStocker.git)。也许这会有所帮助。

该程序正在使用`PySide`，但应该不是问题。

运行程序

```
python pyStocker.py 
```

您会看到一个小部件弹出窗口，在左上角您会看到一个`TextEdit`框。只需输入 GOOG 或其他一些有效的股票代码，然后按 Enter。该图表将填充股票的数据。底部的滑块实时更改图形。

# java - IDE 的 Maven 支持比带有 m2e 的 Eclipse 更好？

> ID：16188038
> 
> 赞同：2
> 
> 时间：2013-04-24T09:13:13.130
> 
> 标签：java, eclipse, maven, m2e

我们使用 maven 管理多模块项目，使用 Eclipse 和 m2e 进行开发。

不幸的是，Eclipse 本身并不理解 Maven 的工作方式，即使 m2e 做了很多工作来使“带有模块的父 pom”Maven 方式看起来像“几个逻辑独立的项目”Eclipse 方式，当我添加时它会中断父 pom 的新模块。如果 Maven 是一等公民，我希望 Eclipse 会立即将新模块作为一个新的 Maven 项目来使用。

是否有另一个具有更好 Maven 支持的 IDE，或者我应该游说 m2e 人员？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T09:16:47.457

没有用它做很多工作，但据我所知，Netbeans IDE 似乎有一个很好的 maven 集成。

只需尝试一个简短的示例项目！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:35:08.103

首先，游说 m2e 的人总是好的——更好地支持 maven 总是一件好事。

话虽如此，我正在使用[intellij idea](http://www.jetbrains.com/idea/)从事约 200 个模块的 maven 项目。它的 maven 支持（在他们的社区版中提供）非常棒 - 你甚至不需要 maven idea 插件来创建你的项目，你只需直接导入你的 pom。

它还将正确处理您对 pom 所做的更改 - 只需向父 pom 添加一个新的，idea 实际上会为您创建相应的目录和子 pom。然后它将新的子模块添加到项目中。它还支持“条件”子模块——在各种配置文件下定义的模块。当您启用/禁用 Maven 配置文件（Maven 面板，IDE 的右侧）时，它将正确地将子模块添加到创意项目/从创意项目中删除。

并不是说对于较大的项目，您希望关闭此自动导入并手动重新导入您的项目（想法会提示您，或者最坏的情况是 Maven 面板上有一个按钮），因为自动重新导入非常大的项目将是引人注目。

idea 会正确地将多模块树状项目映射到idea 多模块项目中，并会自动获取您的库、依赖项、maven 配置文件等。它也很容易直接从中执行 maven 操作（右侧的 maven 面板IDE 的一侧）。

它没有选择我们一些更复杂的构建步骤（我们有一些实用程序绑定到他的生命周期，它使用 maven exec 插件生成我们的一些源代码，如果你只是做一个项目 - >从 intellij 构建所有它没有被拾取例如）但这些事情并不常见。此外，您可以通过直接从 IDE 执行 maven 而不是尝试从 IDE 构建来解决此问题。

不完美，但我见过的最好的。

# php - 如何在 Zend Studio 9.0.1 中创建动作

> ID：16188039
> 
> 赞同：1
> 
> 时间：2013-04-24T09:13:14.373
> 
> 标签：php, zend-framework

```
zf create action add Index
zf create action edit Index
zf create action delete Index 
```

我正在使用 Zend Studio 9.0.1(ZendServer-CE-php-5.3.14-5.6.0-SP4-Windows_x86)，我知道如何通过 win 7 中的 zf 命令行执行此操作。我只是想知道是否有办法我可以通过 Zend Studio 9.0.1 手动执行此操作吗？因为我用的是windows。我不习惯运行命令。根据这篇文章：[Zend Studio：如何通过 IDE 向现有控制器添加新操作？](https://stackoverflow.com/questions/2180234/zend-studio-how-do-you-add-a-new-action-to-an-existing-controller-via-the-ide), 似乎从 Studio 创建动作有一些问题。但它没有提到如何解决它。

# c# - teltonika 和服务器之间的短信通信

> ID：16188046
> 
> 赞同：2
> 
> 时间：2013-04-24T09:13:29.023
> 
> 标签：c#

我的项目是teltonika设备 fm2200的**远程配置。**

我为此使用c#。我需要以短信形式发送配置数据并将其保存在设备的闪存中。我需要在我的项目中执行以下给定项目。

*   如何使用**SMS配置****gpsTrackingDevice**？
***   我可以将配置数据作为 SMS 发送到设备吗？*   短信数据可以保存在闪存中吗？**

# configuration - 仅在执行“make check”时链接 cppuint 库

> ID：16188050
> 
> 赞同：1
> 
> 时间：2013-04-24T09:13:32.900
> 
> 标签：configuration, autoconf, automake

您可以通过执行`make check`. 但是，cppuint 库被硬编码到`LDFLAGS`in 中`Makefile.am`。有没有一种方法可以在 cppuint 库中`configure.am` *仅*在执行 a`make check`时链接，而在执行常规时不链接`make`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-01T19:37:23.773

没有预先罐头。您可能可以通过制作技巧来做到这一点。

但是，我会说你可能不想走这条路。这样做意味着重新链接“make check”，但也重新链接“make all”或“make install”。

另一种方法是让您的测试套件使用可执行文件的特殊测试版本，但名称不同。对于这个，您可以使用每个目标设置将库添加到链接标志。

# javascript - 如何调整CSS3多列列表布局的动态宽度

> ID：16188052
> 
> 赞同：1
> 
> 时间：2013-04-24T09:13:38.507
> 
> 标签：javascript, jquery, css

我正在尝试使用 CSS3 开发具有多列列表（li）布局的垂直菜单。子菜单列是使用具有定义高度的 css3 生成的。因此，子菜单容器（ul）的宽度变成动态的。

我已经尝试了很多来调整容器（ul）的 **宽度**。谁能帮我做到这一点？

# python - 计算文本文件中字符串的出现次数

> ID：16188054
> 
> 赞同：0
> 
> 时间：2013-04-24T09:13:40.897
> 
> 标签：python, counter

我有以下程序，我想在我的文本文件中找到例如字符串“浅粉色”！我使用`word==' '.join(['light','pink'])`它，它不起作用。

```
from operator import itemgetter

def mmetric1(file):
    words_gen = (word.lower() for line in open("test.txt")
                                             for word in line.split())
    words = {}

    for word in words_gen:
        if (word=='aqua')or(word=='azure')or(word=='black')or(word=='light pink'):
            words[word] = words.get(word, 0) + 1

    top_words = sorted(words.items(), key=itemgetter(1))

    for word, frequency in top_words:
       print ("%s : %d" % (word, frequency)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:19:29.987

您已经将整行拆分为单独的单词：

```
for word in line.split() 
```

所以没有一个单词`words_gen`包含文本`light pink`。相反，它包含`light`and`pink`作为两个单独的单词，以及该行上的所有其他单词。

你需要一种不同的方法；看看正则表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T09:25:27.350

你的整个方法都是错误的。

在我看来，您想检查文件中是否存在一组字符串。您应该使用正则表达式。

这里：

```
from collections import Counter
import re

def mmetric1(file_path, desired):
    finder = re.compile(re.escape('(%s)' % '|'.join(desired)), re.MULTILINE)
    with open(file_path) as f:
        return Counter(finder.findall(f))

# have a list of the strings you want to find
desired = ['aqua', 'azure', 'black', 'light pink']
# run the method
mmetric1(file_path, desired) 
```

* * *

如果您担心大文件和性能，您可以遍历文件中的行：

```
def mmetric1(file_path, desired):
    results = Counter()
    finder = re.compile(re.escape('(%s)' % '|'.join(desired)))
    with open(file_path) as f:
        for line in f:
            Counter.update(finder.findall(line))
    return results 
```

* * *

要按照您自己的方式打印这些结果：

```
for word, frequency in mmetric1(file_path, desired).items():
    print ("%s : %d" % (word, frequency)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T09:24:07.617

拆分字符串时，其拆分基于空格，其中包括空格字符

所以以后，除了 IF 之外，您将不可能以您建议阅读的方式匹配连续的单词

*   你不想修改你的循环

示例代码

```
try:
   while True:
        word = next(words_gen)
       if any(word == token for token in ['aqua', 'azure', 'black']) \
          or (word == 'light' and  next(word) == 'pink'):
            words[word] = words.get(word, 0) + 1 
except StopIteration:
    pass 
```

*   使用正则表达式

如果您正在搜索一个巨大的文件，这不是一个好的选择

*   使用其他一些数据结构，如前缀树

# sphinx - 用于文件索引的 Sphinx 版本

> ID：16188057
> 
> 赞同：-2
> 
> 时间：2013-04-24T09:13:50.107
> 
> 标签：sphinx

我正在对 MS Office 文件进行全文搜索，我正在使用 postgresql 和 sphinx 进行索引，但在我们的生产服务器上安装了 sphinx 版本 0.99。我无法决定是否需要将其更新到最新版本。这个版本在性能上有多少不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:40:54.687

绝对性能？不多。它没有变得更好，也没有变得更糟。Sphinx 已经相当快了，没有任何突破性的变化突然让它变得如此之快。

它更多关于功能和修复。但是新功能可以让您更轻松、更快捷地完成工作，这反过来可能会带来更高的性能。

# matlab - Octave/Matlab：向向量添加新元素

> ID：16188058
> 
> 赞同：76
> 
> 时间：2013-04-24T09:13:51.230
> 
> 标签：matlab, vector, octave, element

有一个向量`x`，我必须添加一个元素 ( `newElem`) 。

有什么区别-

```
x(end+1) = newElem; 
```

和

```
x = [x newElem]; 
```

?

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2013-04-24T09:15:54.680

`x(end+1) = newElem`更健壮一点。

`x = [x newElem]`仅当`x`是行向量时才有效，如果它是列向量`x = [x; newElem]`，则应使用。`x(end+1) = newElem`但是，适用于行向量和列向量。

但总的来说，应该避免增长的向量。如果你经常这样做，它可能会使你的代码陷入困境。想一想：增加一个数组涉及分配新空间、复制所有内容、添加新元素以及清理旧的混乱......如果你事先知道正确的大小，那就太浪费时间了 :)

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-04-24T09:20:32.823

只是为了补充@ThijsW的答案，第一种方法比连接方法有显着的速度优势：

```
big = 1e5;
tic;
x = rand(big,1);
toc

x = zeros(big,1);
tic;
for ii = 1:big
    x(ii) = rand;
end
toc

x = []; 
tic; 
for ii = 1:big
    x(end+1) = rand; 
end; 
toc 

x = []; 
tic; 
for ii = 1:big
    x = [x rand]; 
end; 
toc

   Elapsed time is 0.004611 seconds.
   Elapsed time is 0.016448 seconds.
   Elapsed time is 0.034107 seconds.
   Elapsed time is 12.341434 seconds. 
```

我在 2012b 中运行了这些时间，但是当我在 matlab 2010a 中的同一台计算机上运行相同的代码时，我得到了

```
Elapsed time is 0.003044 seconds.
Elapsed time is 0.009947 seconds.
Elapsed time is 12.013875 seconds.
Elapsed time is 12.165593 seconds. 
```

所以我猜速度优势只适用于最新版本的 Matlab

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-24T19:27:58.363

如前所述，使用`x(end+1) = newElem`的优点是它允许您将向量与标量连接起来，而不管您的向量是否被转置。因此，添加标量更加稳健。

但是，不应该忘记的是，`x = [x newElem]`当您尝试一次添加多个元素时，它也会起作用。此外，这更自然地概括为您想要连接矩阵的情况。`M = [M M1 M2 M3]`

* * *

总而言之，如果您想要一个允许您将现有向量`x`与`newElem`可能或可能不是标量连接的解决方案，这应该可以解决问题：

```
 x(end+(1:numel(newElem)))=newElem 
```

# android - 调用scrollby后获取imageview的左边距和上边距

> ID：16188061
> 
> 赞同：0
> 
> 时间：2013-04-24T09:13:55.853
> 
> 标签：android, drag-and-drop, imageview

我`image.scrollBy`用来移动图像drawable。

然而，在调用之后`image.getLeft()`它`image.getLayoutParams().leftMargin`返回 0。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:34:30.043

我认为你调用`image.getLayoutParams().leftMargin`and`image.getLeft()`进入构造函数或进入`onCreate`你的`Activity`!

返回 0，因为您在对象初始化期间调用它！`onCreate`为了获得正确的值，您应该在外部和构造函数中调用它。

在构造函数期间，视图未初始化，并且如果参数为// ，`onCreate`则活动不知道视图的大小。`wrap_content``fill_parent``match_parent`

只有在视图初始化后才能使用获取大小方法。

# paypal - PHP - Opencart - 使用信用卡的 Paypal 3d 安全支付

> ID：16188062
> 
> 赞同：3
> 
> 时间：2013-04-24T09:13:58.093
> 
> 标签：paypal, opencart, 3d-secure

在英国以外的 opencart 中是否有任何用于 Paypal 3d 安全支付的扩展/模块？如果有，请告诉我3d安全支付的流程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T09:58:05.413

如果银行向您发放了带有 3d secure 的信用卡，您将无法付款，如果不支持 3d secure，paypal 将无法从您的帐户中取款。

# vb.net - 数字签名安装 Shield 安装程序

> ID：16188064
> 
> 赞同：4
> 
> 时间：2013-04-24T09:14:01.543
> 
> 标签：vb.net, code-signing, installshield-le

我最近收到了一个 VB.NET 项目，用于修复一些错误并为其创建安装程序。有人告诉我使用 Install Shield LE。

创建安装脚本一切顺利，但当我从网站下载应用程序并尝试安装它时，Windows 8 会给我一个智能屏幕警告。

我知道 Windows 8 政策中流行的应用程序获得更多“信任点”并变得流行，但该应用程序的目标受众是相当少的人群，因此我们不能依赖此选项。更重要的是，没有适当知识的人会被警告信息排斥，这可能导致 MS 永远不会提高对应用程序的信任。

我的问题是，我是否必须同时使用证书签署应用程序和安装程序？如果是这样，我该如何签署安装程序，因为该项目有一个签名选项卡，但我找不到安装程序的签名选项卡。

如果有人能告诉我获得适当的证书是否会删除警告消息，告诉我**这不是一个常见的下载文件，并且**在下载应用程序时可能会受到 chrome/IE 的危险，则可以加分。*我知道有很多关于此的主题，但其中大多数建议将该网站添加到网站管理员工具中，但这并没有帮助，我们仍然收到消息*

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:42:44.340

如果我正确阅读了您的帖子，那么您谈论的是应用程序而不是网站，为此您需要代码签名证书。签署网站的证书是不同的，因此首先要确定您正在制作和想要签署的证书。

决定之后，您需要决定使用谁来提供您的证书。典型的来源是 VeriSign、Thwaite 或 Globalsign，仅举三例。都收取不同的价格，但基本上做同样的事情。

获得证书后，用于构建应用程序的安装程序会对您选择的代码文件和实际的安装程序（msi 或 exe）本身进行签名。

这应该消除您现在看到的警告人们他们将要下载的潜在危险文件的消息。

但是，我再怎么强调都不过分，在继续购买之前，您需要清楚自己需要哪种类型的证书。我认为根据您的描述，您正在谈论代码签名证书，但请先检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-04T12:19:43.420

按照 CAB 论坛规定，您需要进行扩展验证代码签名才能绕过智能屏幕过滤​​器。

扩展验证代码签名将立即与机器建立信任，因为您需要通过更严格的验证过程来获得它！（或者至少这是它背后的理由！）

我认为您可以从 SYmantec 或 GLobalsign 获得扩展验证码签名。

# jquery - 浏览器视图内容崩溃，窗口何时最小化？

> ID：16188065
> 
> 赞同：1
> 
> 时间：2013-04-24T09:14:04.247
> 
> 标签：jquery, html, css, browser, user-interface

`browser window`如果是，我的应用程序看起来不错`fully maximized`。当`collapsed`我. _`minimized``browser window`

我不需要折叠内容。我已经给出了`div`看起来只`textarea`显示消息的内容`%`。

我的 Jsp 将是，

```
<div style="padding-left: 16px;" id="messageLayout">
    <div id="messageDisplayArea" > 

    </div>
</div> 
```

我的`jquery`意志是，当我`send button`点击

```
function send(){
    name = $("#name").val();
    message = $("#message").val();
    var time = "Time";

    var user = "<div id='user' class='fontStyle'>"+name+"</div>";
    var msg = "<div id='msg'  class='fontStyle'>"+message+"</div>";
    var timeStamp = "<div id='time'  class='fontStyle'>"+time+"</div>";

    var row = "<div id='msgSet' >"+ user + msg + timeStamp +"</div>";

    $("#messageDisplayArea").append(row);
} 
```

我的`CSS`意志是

```
#messageDisplayArea {
    height: 250px;
    width: 100%;
    overflow: auto;
    border-color: #6495ED;
    white-space: normal;
    border-style: solid;
    border-width: 1px;
    background-color: white;
}

#user {
    width: 10%;
    float: left;
    color: red;
    word-wrap: break-word;
}

#msg {
    width: 79%;
    color: green;
    float: left;
    word-wrap: break-word;
}

#time {
    width: 10%;
    float:left;
    color: gray;
    word-wrap: break-word;
    padding-left: 5px;
}

#msgSet {
    width: 100%;
    float:left;
    word-wrap: break-word;
    padding-bottom: 5px;
    padding-top: 5px;
} 
```

好的答案绝对值得赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:39:24.457

尝试删除你的`word-wrap: break-word`

# ms-access - 在以下上下文中，& 和 $ 符号是什么意思？

> ID：16188066
> 
> 赞同：4
> 
> 时间：2013-04-24T09:14:04.290
> 
> 标签：ms-access, vba, ms-access-2007

我正在进行代码审查并遇到了这个问题：

```
Dim lngLen As Long    
lngLen = 16& 
```

我已经阅读了一些内容，这似乎是一种将数字转换为长数字的方法 - 对吗？

但这真的有必要吗，因为您可以分配`lngLen`16 的值，因为它是一个数值。

此外，按照此代码完成：

```
Dim strCompName As String   
strCompName = String$(lngLen, 0&) 
```

我从 Access 帮助定义中意识到该`String`方法“返回包含指定长度的重复字符串的变体”。

那么 $ 有什么作用呢？又是 & 将 0 转换为 long 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T09:33:55.363

您好，您可以查看此[问题](https://stackoverflow.com/questions/8341524/what-is-the-meaning-of-the-dollar-sign-after-a-method-name-in-vb-net)以获取您查询的可能答案。

编辑：此外，我能够在互联网上搜索更多资源，并且我发现了最初在这个[论坛页面上找到的这个 VBA](http://www.mrexcel.com/forum/excel-questions/429130-dollar-sign-after-right-left-function-visual-basic-applications.html)[输入约定](http://www.xoc.net/standards/rvbacc.asp#DollarSignFunctions)。

希望这会对您有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T09:40:53.023

好吧，根据你的询问

有些人认为选择返回正确类型的函数会稍微高效一些，这样可以更快地执行代码。

另一方面，有些人认为在没有使用后缀声明类型声明后缀时，在代码中添加类型声明后缀根本没有用处。当然，这只会混淆代码。

```
String$ is a function
The $ at the end is a way of declaring the variable As String.
The & at the end is a way of declaring the variable As Long. 
```

你是对的，我认为这些在这里没有必要。

# opencart - OpenCart 仪表板错误 - fopen(): open_basedir 限制生效

> ID：16188072
> 
> 赞同：2
> 
> 时间：2013-04-24T09:14:27.380
> 
> 标签：opencart

我在下面的仪表板页面上有这个 OpenCart 错误...

```
Warning: fopen(): open_basedir restriction in effect. 
File(/var/www/vhosts/domainname.com/shop/download/test) is not within the allowed path(s):
(/var/www/vhosts/Cloud2.chrisames.co.uk/:/tmp/) in 
/var/www/vhosts/domainname.com/shop/admin/controller/common/home.php on line 99Warning:
fopen(/var/www/vhosts/domainname.com/shop/download/test): failed to open stream:
Operation not permitted in 
/var/www/vhosts/domainname.com/shop/admin/controller/common/home.php on line 99Warning:
fwrite() expects parameter 1 to be resource, boolean given in 
/var/www/vhosts/domainname.com/shop/admin/controller/common/home.php on line 
101Warning: fclose() expects parameter 1 to be resource, boolean given in 
/var/www/vhosts/domainname.com/shop/admin/controller/common/home.php on line 
103Warning: file_exists(): open_basedir restriction in effect. 
File(/var/www/vhosts/domainname.com/shop/download/test) is not within the allowed 
path(s): (/var/www/vhosts/Cloud2.chrisames.co.uk/:/tmp/) in 
/var/www/vhosts/domainname.com/shop/admin/controller/common/home.php on line 
105Warning: sprintf(): Too few arguments in 
/var/www/vhosts/domainname.com/shop/admin/controller/common/home.php on line 106 
```

任何帮助最受赞赏:)

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-10-21T19:45:50.210

使用 FileZilla 客户端（免费软件，下载并安装它[https://filezilla-project.org/download.php?type=client](https://filezilla-project.org/download.php?type=client)或从这里下载[http://sourceforge.net/projects/filezilla/](http://sourceforge.net/projects/filezilla/)）...然后 Chmod目录和文件...设置目录 755，文件 644。（服务器有自己的权限规则，但现在很常见。）

这将为您解决

# http - 如何从服务器下载文件并在客户端启动下载过程

> ID：16188073
> 
> 赞同：0
> 
> 时间：2013-04-24T09:14:32.093
> 
> 标签：http

我想在客户端提交表单后从我的服务器下载文件。我在客户端创建表单没有问题，但不知道如何以及如何从服务器返回到客户端，这将启动文件下载过程......

谢谢，奥马尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:31:05.730

那么，您希望用户看到某种文件下载对话框吗？这是一个比较琐碎的问题。

在处理表单时，只需在发送实际内容（即作为 HTTP 标头的一部分）之前提交文件名`action`：

```
Content-Disposition: attachment; filename=YourDownload.txt 
```

这将导致浏览器显示文件下载对话框，默认为`YourDownload.txt`而不是 URL 中显示的脚本名称。

请记住，文件名中的特殊字符应类似于 URI 编码（即 a`%`后跟十六进制代码）进行转义。否则浏览器可能会忽略它。

[有关此标头字段的更多信息，请参见第 19.5.1 节。](http://www.w3.org/Protocols/rfc2616/rfc2616-sec19.html#sec19.5.1)

# javascript - Javascript错误未捕获异常

> ID：16188079
> 
> 赞同：8
> 
> 时间：2013-04-24T09:14:51.187
> 
> 标签：javascript, jquery, ios

我正在使用一个名为 `pull.js`. 它用于 Ipad 中的下拉刷新，但是，当我使用其他 jquery 和 javascript 时停止工作？它给出了以下未捕获的异常错误：

> " 错误：未捕获的异常：
> 
> [异常...“没有足够的参数”nsresult：“0x80570001（NS_ERROR_XPC_NOT_ENOUGH_ARGS）”位置：“JS 框架 :: pull.js :: 匿名 :: 第 26 行”数据：否] “

我正在传递这个 js 文件的内容：

```
var PULL = function() {
    var content,
        pullToRefresh,
        refreshing,
        contentStartY,
        success,
        start,
        cancel,
        startY,
        track = false,
        refresh = false;

    var removeTransition = function() {
        //content.style['-webkit-transition-duration'] = 0;
    };
    return {
        init: function(o) {
            content = document.getElementById('content');
            pullToRefresh = document.getElementById('pull_to_refresh');
            refreshing = document.getElementById('refreshing');
            success = o.success;
            start = o.start;
            cancel = o.cancel;

            document.body.addEventListener('touchstart', function(e) {
                e.preventDefault();
                contentStartY = parseInt(content.style.top);
                startY = e.touches[0].screenY;
            });

            document.body.addEventListener('touchend', function(e) {
                if(refresh) {
                    //content.style['-webkit-transition-duration'] = '.5s';
                    content.style.top = '50px';

                    pullToRefresh.style.display = 'none';
                    refreshing.style.display = '';

                    success(function() { // pass down done callback
                        pullToRefresh.style.display = '';
                        refreshing.style.display = 'none';
                        content.style.top = '0';
                        content.addEventListener('transitionEnd', removeTransition);
                    });

                    refresh = false;
                } else if(track) {
                    //content.style['-webkit-transition-duration'] = '.25s';
                    content.style.top = '0';
                    content.addEventListener('transitionEnd', removeTransition);

                    cancel();
                }
                track = false;
            });

            document.body.addEventListener('touchmove', function(e) {
                var move_to = contentStartY - (startY - e.changedTouches[0].screenY);
                if(move_to > 0) track = true; // start tracking if near the top
                content.style.top = move_to + 'px';

                if(move_to > 50) {
                    refresh = true;
                } else {
                    //content.style['-webkit-transition'] = '';
                    refresh = false;
                }
            });
        }
    };
}(); 
```

谁能帮帮我吗。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-12T10:58:59.053

XPC 错误并非来自于调用纯 Javascript 方法`parseInt`（并且 radix 参数 在*规范中**是*可选的，因此所有这些注释在很多方面都是错误的）。

 ** * *

您在所有调用中都[缺少第三个`useCapture`参数](http://www.w3.org/TR/2000/REC-DOM-Level-2-Events-20001113/events.html#Events-EventTarget-addEventListener)`addEventListener`：

这里：

```
document.body.addEventListener('touchstart', function(e) {
    ...
}, false);  //<-- add third argument 
```

这里：

```
content.addEventListener('transitionEnd', removeTransition, false);  //<-- add third argument 
```

这里：

```
document.body.addEventListener('touchend', function(e) {
    ...
}, false);  //<-- add third argument 
```

这里：

```
content.addEventListener('transitionEnd', removeTransition, false);  //<-- add third argument 
```

和这里：

```
document.body.addEventListener('touchmove', function(e) {
    ...
}, false); //<-- add third argument 
```

请注意，在[较新的规范中，该参数已设为 optional](http://www.w3.org/TR/DOM-Level-3-Events/#events-EventTarget-addEventListener)。但这并不重要。*

# hibernate - 使用同一张表在 NHibernate 中进行子类映射

> ID：16188081
> 
> 赞同：2
> 
> 时间：2013-04-24T09:14:56.850
> 
> 标签：hibernate, nhibernate, fluent-nhibernate, nhibernate-mapping, fluent-nhibernate-mapping

我有一张桌子。那是s。有两个类 1.`S`和 2。`P`

Plate 继承自 S。这些类是：

```
public class S
{
    public virtual decimal Id { get; set; }        
    public virtual IList<P> ChildPs { get; set; }
}

public class P : S
{
    public virtual GType GType { get; set; }
}

internal class SMap : ClassMap<S>
{
    public SMap()
    {
        Table("s");
        Id(x => x.Id).Column("A_S_ID");
        /* Set Parent_S_Id */
        HasMany<P>(x => x.ChildPs)
            .KeyColumn("PARENT_A_S_ID")
            .Cascade.All();
    }
}

internal class PMap : SubclassMap<P>
{
    public PMap()
    {
        References(x => x.GType)
             .Column("G_TYPE_ID")
             .ForeignKey("G_TYPE_LU_ID");
    }
} 
```

我创建了一个`S`实例并将一些添加`P`到`ChildP`. 当我保存`S`实例时，它会给出错误`P is not exist`。有人对此有任何想法吗？

请分享你的看法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T02:05:21.463

您的继承映射设置是“每个子类的表”。这意味着您将为不同的班级提供不同的表格。我不确定，但在我看来你无法保存，因为你只有一张桌子。您可以[在此处](https://github.com/jagregory/fluent-nhibernate/wiki/Fluent-mapping)的子类部分找到更多信息。

# c++ - C++中的评分系统

> ID：16188085
> 
> 赞同：4
> 
> 时间：2013-04-24T09:15:14.000
> 
> 标签：c++, if-statement, switch-statement

所以这是我的 C++ 问题：

编写一个程序，将字母等级转换为数字等级。字母等级是 A、B、C、D 和 F，后面可能跟着 + 或 -。它们的数值是 4、3、2、1 和 0。没有 F+ 或 F-。A + 将数值增加 0.3，a - 将数值减少 0.3。但是，A+ 的值为 4.0。

输入字母等级：B
数值为 2.7

这是我的代码：

```
int main ()
{
    char grade;
    int value;
    cout << "Enter letter grade : " ;
    cin >> grade;

    switch(grade)
    {
    case 'A' : value = 4;
        break;
    case 'B' : value =  3;
        break;
    case 'C' : value = 2;
        break;
    case 'D' : value = 1;
        break;
    case 'E' : value = 0;
        break;
    default : cout << "Wrong input " << endl;
        break;
    }

    cout << value;
    system("PAUSE");
    return 0;
} 
```

它能够为 A 打印 4，为 B 打印 3，依此类推。但是，这个问题要求我们也对 + 和 - 进行计算。我应该在切换后使用 if else 语句吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T09:20:24.767

如果输入是`A+`or `B-`，那么它就不再是一个字符了。因此，使用一串字符获取它，并检查值。

```
char a[3];
float m,n;
cin>>a;
if(a[1]=='+')
   m=0.3;
else if (a[1]=='-')
   m=-0.3;
else
    m=0;
switch(a[0])
{
  //Assign the value of n as 4,3,2,1 depending upon the grade.
}
cout<<n+m; 
```

将打印成绩

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:31:41.270

简单地添加更多案例会有所帮助。修改您的代码如下：

```
 int main ()
    {
    String grade;
    float value;
    cout << "Enter letter grade : " ;
    cin >> grade;

    switch(grade)
    {
    case "A" : value = 4;
        break;
    case "A+" : value = 4.3;
        break;
    case "A-" : value = 3.7;
        break;
    case "B" : value = 3;
        break;
    case "B+" : value = 3.3;
        break;
    case "B-" : value = 2.7;
        break;        
    case "C" : value = 2;
        break;
    case "C+" : value = 2.3;
        break;
    case "C-" : value = 1.7;
        break;        
    case "D" : value = 1;
        break;
    case "D+" : value = 1.3;
        break;
    case "D-" : value = 0.7;
        break;        
    case "F" : value = 0;
        break;
    default : cout << "Wrong input " << endl;
        break;
    }

    cout << value;
    system("PAUSE");
    return 0;

    } 
```

这是您所做的直接扩展，可能有数百万种其他方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T09:35:18.323

我会依次处理每个角色。你知道第一个应该是字母等级，所以你先看那个，你可以像你已经得到的那样使用 switch 语句。

```
uint value = 0;
char grade_letter = grade[0];

switch (grade_letter) {
    // assign value as appropriate
} 
```

然后，如果存在第二个字符，请检查它是 + 还是 - 并相应地修改从 switch 语句中获得的值。

```
if (grade.length() > 1) {
    char modifier = grade[1];
    switch (modifier) {
        case '+': value += 0.3;
        // etc.
    }
} 
```

当然，在此之前，您需要检查 A+ 的特殊情况并跳过其他所有内容。

另一种方法是用预先准备好的数据结构中的查找替换 switch 语句，例如 a `std::map<char, int>`，即使初始化代码从硬编码数据准备它，它也会打开从配置文件加载等级信息的方法或将来某个时候的数据库。不过，在这种情况下，特殊情况 A+ 会变得有点棘手。

# c++ - 从 std::vector 继承

> ID：16188093
> 
> 赞同：8
> 
> 时间：2013-04-24T09:15:43.000
> 
> 标签：c++

这里有很多答案说不要从 std::vector 等继承，例如[这个问题](https://stackoverflow.com/questions/10353954/potential-problems-with-inheriting-from-stdvector)。我理解其中的原因并同意他们的看法。但是在[这里](http://isocpp.org/files/papers/4-Tour-Algo-draft.pdf)第 4.4.1.2 节 Bjarne Stroustrup 自己继承了 std::vector 以添加范围检查。

这是一个特例，或者只是在那种情况下可以接受的事情，或者他真的不应该做的事情：P

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T09:26:10.407

我认为[这个答案](https://stackoverflow.com/a/7110262/912144)完美地回答了你的问题。

从 继承并非不可能`std::vector`，它可能会非常有限（由于没有虚拟析构函数），对其他人来说相当混乱，并且通过组合扩展无论如何都会比继承更好/更容易/更易于维护。

也许 Stroustrup 只是想表明它是可行的，但不一定暗示他建议这样做。

# solr - solr 是否有提交后挂钩（或其他东西）来通知奴隶？

> ID：16188098
> 
> 赞同：1
> 
> 时间：2013-04-24T09:16:01.720
> 
> 标签：solr

我希望 Solr 主服务器在提交时调用从属服务器的复制处理程序。我想在提交实际发生**时**`commitWithin`传递一个和一个 URL 来调用。

 **我希望它（提交后挂钩 URL）在主提交后立即**通知从属**，以便从属可以开始拉动。

目前我们在 master 上提交，然后调用`solr/CORE/replication/?...`每个 slave。现在我想更改为 commitWithin。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:10:38.147

是的，Solr（至少是最新的）有一个[灵活的 post-commit hook](http://wiki.apache.org/solr/SolrConfigXml#A.22Update.22_Related_Event_Listeners)。它是由 Solr 本身触发的，因此会知道提交实际发生的时间（回答关于 commitWithin 的评论）。**

# php - 想要匹配php中的模式

> ID：16188100
> 
> 赞同：3
> 
> 时间：2013-04-24T09:16:04.860
> 
> 标签：php, regex

我想匹配以下字符串的模式：（ **字符串是动态的，意味着我从 html 表单的请求中获取它，所以它可能每次都是新的，但字符串的格式总是相同的）**

**实际上我想要每个请求中可能不同的关键字（姓名，薪水，帐户）**

```
$str="$(name) is $(salary) and $(account)";
if(preg_match_all("/\$\((.+?)\)/is",$str,$arrmsgvar,PREG_SET_ORDER)){
    echo "<pre>";
    print_r($arrmsgvar);
    echo "</pre>";
} 
```

我正在编写正则表达式以匹配该模式但没有成功。有人能告诉我上述代码的正确正则表达式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T09:21:56.407

您的正则表达式（如果您想确定，也可以搜索字符串）应该用单引号引起来。

使用双引号，PHP 将您的正则表达式解释为：

```
/$\((.+?)\)/
 ^
missing backslash here 
```

这段代码应该可以正常工作。

```
<?php

$str='$(name) is $(salary) and $(account)';
if(preg_match_all('/\$\((.+?)\)/',$str,$arrmsgvar,PREG_SET_ORDER)){
    echo "<pre>";
    print_r($arrmsgvar);
    echo "</pre>";
} 
```

[**证明**](http://codepad.viper-7.com/7wooiK)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:19:10.000

此正则表达式将返回一个包含三个值的数组

```
"/\$\((\w+)\)/"

preg_match_all("/\$\((\w+)\)/",$str,$arrmsgvar);

Array
(
[0] => Array
    (
        [0] => $(name)
        [1] => $(salary)
        [2] => $(account)
    )

[1] => Array
    (
        [0] => name
        [1] => salary
        [2] => account
    )

) 
```

# python - GAE/Python ImportError timegm

> ID：16188101
> 
> 赞同：1
> 
> 时间：2013-04-24T09:16:06.710
> 
> 标签：python, eclipse, google-app-engine, calendar

我对 Python 和 Google App Engine 都很陌生，我正在慢慢发疯，试图解决以下编译错误。

> 文件“/opt/google/google_appengine/google/appengine/tools/appengine_rpc.py”，第 26 行，导入 cookielib 文件“/usr/lib/python2.7/cookielib.py”，第 38 行，从日历导入 timegm ImportError：无法导入名称 timegm

我在 Eclipse 中使用 PyDev 插件在本地部署。据我所知，没有任何错误的原因。我已经尝试将 timegm.py 文件夹添加到 PYTHONPATH 配置中，我什至通过`from calendar import timegm`在我的代码中使用自动完成简单地导入来证明这一点！

我见过其他人有这个问题，但没有解决方案。有人知道怎么修这个东西吗？

代码如下：

```
import httplib2
import webapp2
from apiclient.discovery import build
from google.appengine.api import oauth
from oauth2client.client import OAuth2WebServerFlow
from urlparse import urlparse, parse_qs

class MainPage(webapp2.RequestHandler):    
    def get(self):
        flow = OAuth2WebServerFlow(__CLIENT_ID, __CLIENT_SECRET, _SCOPE, _REDIRECT_URI)
    authUri = flow.step1_get_authorize_url()            
    queryString = parse_qs(urlparse(authUri).query)

    if 'error' not in queryString:
        # Create an httplib2.Http object to handle our HTTP requests and authorize it
        credentials = flow.step2_exchange(queryString['code'])
        http = httplib2.Http()  
        http = credentials.authorize(http)            
        service = build("calendar", "v3", http=http)                                                
        events = service.events().list(calendarId=__VISITORS_CALENDAR).execute(http=http)

        if events['items']:
            # show what we've got
            for event in events['items']:
                self.response.write(event['summary'])
        else:
            self.response.write('No events found in the calendar')

    else:
        self.response.write('Denied...')

app = webapp2.WSGIApplication([('/', MainPage)], debug = True) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-24T10:00:26.170

不需要安装任何东西，`calendar.timegm`是标准库中的一个函数。

可能发生的情况是您有一个名为 的本地文件`calendar.py`，它隐藏了 stdlib 版本。您的日历文件没有这样的功能，因此出现错误。将您的文件重命名为其他名称。

# google-chrome - 将 consoleexport 扩展安装到 Chrome

> ID：16188102
> 
> 赞同：0
> 
> 时间：2013-04-24T09:16:06.633
> 
> 标签：google-chrome, firebug

您如何将 Firebug 扩展 Consoleexport 安装到 Chrome？我下载了一个似乎只适用于 Firefox 的 XPI 文件？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T23:12:01.773

正确的。[XPI 文件](http://en.wikipedia.org/wiki/XPInstall)仅适用于 Firefox。因此，由于他们的代码绑定到 Firefox 内部 API，您无法在 Chrome 中安装 Firebug 或其任何扩展。

塞巴斯蒂安

# javascript - 无法让“jQuery.inArray”在我的代码中工作

> ID：16188103
> 
> 赞同：0
> 
> 时间：2013-04-24T09:16:08.060
> 
> 标签：javascript, jquery, html, internet-explorer-8

我创建了一个显示列表项的小交互，单击时会旋转它们 - [http://jsfiddle.net/S79qp/430/](http://jsfiddle.net/S79qp/430/)

我最近不得不更改`.indexOf()`为，`jQuery.inArray`因为`.indexOf()`在 IE8 中不起作用。我遇到的问题是由于我不熟悉这种方法而无法使其正常工作。谁能告诉我我做错了什么

```
 index = jQuery.inArray(a, current) + 1;
   if (index < 0 ||  index >= l.length) {
       index = 0;
   }

   next = (l.eq(index).html());

   jQuery(this).html(next);

  return this; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T09:32:25.597

那么在您的 inArray 中，发送的参数顺序不正确。

它应该是

```
 index = jQuery.inArray(current,a) + 1; 
```

它是（您正在寻找的价值），（在哪里查看）

[http://jsfiddle.net/S79qp/431/](http://jsfiddle.net/S79qp/431/)这是正确的小提琴

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T09:32:34.990

第一个参数是值，第二个是你要找的数组..所以你有它的 backwords

它应该是

```
index = jQuery.inArray(current, a) + 1; 
```

引用[文档](http://api.jquery.com/jQuery.inArray/)

> `jQuery.inArray( value, array [, fromIndex ] )`
> **说明：**在 an中搜索指定`value`的`array`并返回其索引（*如果未找到，则返回 -1*）。

# iphone - 从其矩形中删除活动指示器？

> ID：16188104
> 
> 赞同：1
> 
> 时间：2013-04-24T09:16:10.383
> 
> 标签：iphone, ios, objective-c, uiactivityindicatorview

我正在使用此代码显示活动指示器：

```
 UIActivityIndicatorView  *av = [[[UIActivityIndicatorView alloc]initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhite] autorelease];
    av.frame=CGRectMake(0.5*winSize.width-winSize.width/4, 0.80*winSize.height , winSize.width/2, winSize.width/8);
    [av setBackgroundColor:[UIColor colorWithRed:0.23 green:0.23 blue:0.23 alpha:0.75]];
    av.layer.cornerRadius=4;
    av.tag  = 31000;
    [[[CCDirector sharedDirector]view]addSubview:av];
    [av startAnimating]; 
```

并删除它：

```
UIActivityIndicatorView *tmpimg = (UIActivityIndicatorView *)[[[CCDirector sharedDirector]view] viewWithTag:31000];
    if(tmpimg)
        [((UIView *)tmpimg) removeFromSuperview]; 
```

我需要的是仅删除指示器本身（滚动的圆圈）并留下我刚刚绘制的他的视图的矩形（`av.frame`）。

我该怎么做？非常感谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:20:48.780

你不能。

构建一些自定义 UIView 来保存背景+角半径，并保存活动指示器。

之后，您可以向此自定义 UIView 添加一个隐藏/删除活动指示器的方法。

顺便说一句，您可以隐藏活动指示器，或者停止它（如果 hidesWhenStopped 为 YES，这将比每次创建活动指示器高效得多）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T09:26:22.100

在这种情况下，您可以做的是设置

```
av.hidesWhenStopped = YES; 
```

它会在停止时隐藏指示器。我认为你不需要删除它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T09:33:18.143

添加使用这个......

```
UIView * aView = [[UIView alloc] initWithFrame:CGRectMake(0.5*winSize.width-winSize.width/4, 0.80*winSize.height , winSize.width/2, winSize.width/8)];
aView.backGroundColor = [UIColor clearColor];
aView.tag  = 31000;
UIActivityIndicatorView  *av = [[[UIActivityIndicatorView alloc]initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhite] autorelease];
av.frame=aView.bounds;
[av setBackgroundColor:[UIColor colorWithRed:0.23 green:0.23 blue:0.23 alpha:0.75]];
av.layer.cornerRadius=4;

[aView addSubview:av];
[[[CCDirector sharedDirector]view]addSubview:aView];
[av startAnimating]; 
```

并删除使用这个

```
UIView * aView = [[[CCDirector sharedDirector]view] viewWithTag:31000];
if(aView)
{
    [aView removeFromSuperview];
} 
```

# powershell - Redemption Outlook MAPITable 和 UserProperties Q

> ID：16188105
> 
> 赞同：0
> 
> 时间：2013-04-24T09:16:11.410
> 
> 标签：powershell, outlook, outlook-redemption

我写了一些 powershell，它检查一堆用户邮箱，并使用 Mapitable 检查特定属性。但是我还需要计算 UserProperties，并且我正在努力与 MapiTable 一起执行此操作 - 理想情况下，我希望它是“从 blah 中选择 blah，其中 userproperties.count = 4 并且 crmregardingID 不为空”

这是代码片段：

```
$sSqlQuery = 'Select Subject, senderName, MessageClass, ReceivedTime From $oFolName where "http://schemas.microsoft.com/mapi/string/{00020329-0000-0000-C000-000000000046}/crmRegardingId" IS NOT NULL'
$CurrFold = $RSession.GetFolderFromID($oDefFolder.EntryID)

$RTable.Item = $CurrFold.Items

$RecordSet = $RTable.ExecSQL($sSQLQuery)
if($recordset.recordcount -gt 0){
write-host "running loop"
Do STUFF
$recordset.Movenext()} until
    ($Recordset.EOF -eq $true )
$recordset.close()
$RSession.Logoff()
} 
```

非常感谢所有帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:45:42.333

用户属性定义存储为特殊命名属性中的 blob。获取 UserProperties 集合的唯一方法是将消息作为 RDOMail 对象打开；你不能使用 ExwecSQL 做到这一点。

# magento - 运行产品导入配置文件后 Magento 观察者未触发

> ID：16188109
> 
> 赞同：0
> 
> 时间：2013-04-24T09:16:23.720
> 
> 标签：magento, events, magento-1.7

我创建了一个名为“catalog_product_import_profile_after”的新自定义事件。此事件在产品导入运行配置文件完成过程后调用。如果我为 2 个产品运行配置文件，那么它工作正常并且触发了自定义事件，但是当我为数千种产品运行相同的配置文件时，它正在工作并且不会触发自定义事件。

这是observer.php文件的代码——

```
<?php
class GWB_ClearOrphan_Model_Observer
{

            public function disableProducts(Varien_Event_Observer $observer)
            {

                try{    
                    $collection = Mage::getModel('catalog/product')->getCollection()
                            ->addAttributeToSelect('sku')
                            ->addAttributeToFilter('attribute_set_id',9)
                            ->load();
                }
                catch(Exception $e) {
                    //Mage::log($e->getMessage(), null, 'collection.log');
                }

                try{
                    $resource = Mage::getModel('core/resource');
                    $readConnection = $resource->getConnection('core_read');
                    $writeConnection = $resource->getConnection('core_write');
                }
                catch(Exception $e) {
                    //Mage::log($e->getMessage(), null, 'developer.log');
                }

                foreach($collection as $val) {
                    $sku = $val->getSku();

                    $query = "SELECT * FROM feed_products WHERE feed_sku='".$sku."'";
                    $results = $readConnection->fetchAll($query);
                    $feed_sku = $results[0]['feed_sku'];

                    if($feed_sku != ''){
                        $product = Mage::getModel('catalog/product')->loadByAttribute('sku', $sku);
                        $product->setStatus(2);
                        try {
                            $product->save();
                            //$product->delete();
                        }
                        catch (Exception $e) {
                            Mage::log($e->getMessage(), null, 'product_disable.log');
                        }   
                    }               
                }

                try{
                    $writeConnection->query("TRUNCATE TABLE feed_products");
                } 
                catch(Exception $e){
                    echo $e;
                }
            }

}

?> 
```

我已经在“ProfileController.php”文件下注册了这个事件，这里是这个函数的代码---

```
<?php

    public function batchFinishAction()
        {   
            $batchId = $this->getRequest()->getParam('id');
            if ($batchId) {
                $batchModel = Mage::getModel('dataflow/batch')->load($batchId);
                /* @var $batchModel Mage_Dataflow_Model_Batch */

                if ($batchModel->getId()) {
                    $result = array();
                    try {
                        $batchModel->beforeFinish();
                    } catch (Mage_Core_Exception $e) {
                        $result['error'] = $e->getMessage();
                    } catch (Exception $e) {
                        $result['error'] = Mage::helper('adminhtml')->__('An error occurred while finishing process. Please refresh the cache');
                    }

            Mage::dispatchEvent('catalog_product_import_profile_after', array('adapter'=>$this));

                    $batchModel->delete();
                    $this->getResponse()->setBody(Mage::helper('core')->jsonEncode($result));
                }
            }
        }

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T21:10:27.830

这取决于您触发事件的确认记录。这可能是您从后端或 cli 运行批处理并在“前端”节点中触发事件。这里最好在全局节点中描述此事件的配置。

# javascript - 选择选项默认不起作用

> ID：16188110
> 
> 赞同：1
> 
> 时间：2013-04-24T09:16:29.037
> 
> 标签：javascript, html, jsp, html-select

我的页面中有 3 个选择标签，我想为它们设置一个默认值。我搜索了一种方法来做到这一点，它适用于一个但不适用于另一个。我在这里找不到问题。我在这里得到了我想要的值：

```
String start =String.valueOf(rule.getStart());
String end =String.valueOf(rule.getEnd());
String numberOfCars = String.valueOf(rule.getNumberOfCars()); 
```

我已经测试了这些值，它们是正确的。这些是我的选择标签：

```
<select id="numberOfCars" name="numberOfCars">
            <option value="1">1</option>            
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="1">4</option>            
            <option value="2">5</option>
            <option value="3">6</option>
            <option value="1">7</option>            
            <option value="2">8</option>
            <option value="3">9</option>
            <option value="3">10</option>
        </select>

<select id="startHour" name="startHour">
            <option value="0">0</option>                    
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>   
        </select>
<select id="endHour" name="endHour" >
            <option value="16">16</option>
            <option value="17">17</option>
            <option value="18">18</option>
            <option value="19">19</option>
            <option value="20">20</option>
            <option value="21">21</option>
            <option value="22">22</option>
            <option value="23">23</option>
        </select> 
```

这是我发现的功能。一个 for start 工作完美，但另一个 2 没有，我找不到原因：

```
<script type="text/javascript"> 
$(document).ready(function() {
  if (!$("#endHour option:selected").length)
$("#endHour option[value='<%=end%>']").attr('selected', 'selected');
});
</script>
<script type="text/javascript"> 
$(document).ready(function() {
 if (!$("#numberOfCars option:selected").length)
$("#numberOfCars option[value='<%=numberOfCars%>']").attr('selected', 'selected');
});
</script>
<script type="text/javascript"> 
$(document).ready(function() {
 if (!$("#starHour option:selected").length)
$("#startHour option[value='<%=start%>']").attr('selected', 'selected');
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:18:12.633

```
<script type="text/javascript"> 
$(document).ready(function() {
  if (!$("#endHour option:selected").length)
$("#endHour option[value='<%=end%>']").attr('selected', true);
});
</script> 
```

如果我没记错的话，你应该这样做。你应该将它们全部合并到同一个标签中。为什么要传播它们？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:21:32.800

由于`startHour`代码中的错误，选择有效。

```
$(document).ready(function() {
 if (!$("#starHour option:selected").length)  //Notice its starHour not startHour
$("#startHour option[value='<%=start%>']").attr('selected', 'selected');
}); 
```

默认情况下，选择中的选项将设置为选中，这会导致条件块中的代码不执行。StartHour 执行是因为选择器中的错误导致值为 0。

尝试删除条件块：

```
<script type="text/javascript"> 
$(document).ready(function() {
     $("#endHour option[value='<%=end%>']").attr('selected', 'selected');
     $("#startHour option[value='<%=start%>']").attr('selected', 'selected');
     $("#numberOfCars option[value='<%=numberOfCars%>']").attr('selected', 'selected');
});
</script> 
```

这是一个非常简单的示例，说明了基本问题，即默认选择了一个选项。[http://jsfiddle.net/fVjzw/](http://jsfiddle.net/fVjzw/)

# c# - 获取 ObjectListView 中的下一个/上一个项目

> ID：16188112
> 
> 赞同：7
> 
> 时间：2013-04-24T09:16:44.023
> 
> 标签：c#, objectlistview

我的应用程序使用 Q 和 A 键移动到 ObjectListView 中的下一项，只要用户不使用其中一个列标题对列表项进行排序，它就可以很好地工作。如果用户已排序，则按下 Q/A 键会导致列表在列表项之间跳转，因为它似乎使用原始顺序，而不是当前顺序。

所以我正在寻找一种解决方案，即使在用户排序后也允许用户移动到下一个项目。我目前拥有的代码（仅用于 A 键）如下：

```
if (e.KeyCode == Keys.A)
{
  OLVListItem next = listSession.GetNextItem(listSession.SelectedItem);
  if (next == null)
  {
    return;
  }

  listSession.SelectedObject = (Session)next.RowObject;
  listSession.EnsureModelVisible((Session)next.RowObject);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T06:40:02.057

对，这似乎可行，例如向下显示的项目：

```
int index = listSession.GetDisplayOrderOfItemIndex(listSession.SelectedItem.Index);
OLVListItem next = listSession.GetNthItemInDisplayOrder(index + 1); 
```

并向上显示显示的项目：

```
int index = listSession.GetDisplayOrderOfItemIndex(listSession.SelectedItem.Index);
OLVListItem next = listSession.GetNthItemInDisplayOrder(index - 1); 
```

# javascript - 计算两次javascript之间的时间差

> ID：16188119
> 
> 赞同：9
> 
> 时间：2013-04-24T09:17:03.467
> 
> 标签：javascript, date, time, gettime

我一直在寻找如何做到这一点，我发现了很多复杂代码的例子。我用这个：

```
var time1 = new Date();
var time1ms= time1.getTime(time1); //i get the time in ms 
```

然后我在代码的其他部分执行此操作

```
var time2 = new Date();
var time2ms= time2.getTime(time2); 
```

最后：

```
var difference= time2ms-time1ms;
var lapse=new Date(difference);  
label.text(lapse.getHours()+':'+lapse.getMinutes()+':'+lapse.getSeconds()); 
```

这很好用，除了一个问题，它给我的时间总是 +1，所以我必须添加到代码中 **(time.getHours()-1)**否则它给了我一个多小时....

我认为这是一种比周围所有其他示例更简单的方法......但我仍然不明白为什么我需要添加“-1”才能获得正确的失误。

谢谢！！！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-24T09:20:57.817

问题是你的时区。

当您这样做时`new Date(difference)`，您正在创建一个`Date`对象，该对象代表`difference`1970 年 1 月 1 日之后的精确毫秒。当您这样做时，`lapse.getHours()`您的时区将用于计算。您不能通过 Javascript 修改您的时区，也不能修改此行为。并非没有一些*繁重的*Javascript 技巧。

但是您的`difference`不代表*日期*，而是日期的*差异*。就这样对待，并计算小时、分钟和秒，如下所示：

```
var hours = Math.floor(difference / 36e5),
    minutes = Math.floor(difference % 36e5 / 60000),
    seconds = Math.floor(difference % 60000 / 1000); 
```

或者，您可以在创建时考虑您的时区`lapse`：

```
var lapse = new Date(difference + new Date().getTimezoneOffset() * 1000); 
```

但我不建议这样做：`Date`对象对于您的目的来说太过分了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-21T11:20:49.910

请注意，在`getTimezoneOffset()`返回以分钟为单位的值，所以如果你想使用间隔，你可以纠正它的时区差异，如下所示：

```
lapse = new Date(difference); 
tz_correction_minutes = new Date().getTimezoneOffset() - lapse.getTimezoneOffset();
lapse.setMinutes(offset_date.getMinutes() + tz_correction_minutes); 
```

现在你可以这样做：

```
label.text(lapse.getDate()-1+' days and'  +lapse.getHours()+':'+lapse.getMinutes()+':'+lapse.getSeconds()); 
```

以人类可读的形式打印出时差

# xml - 分析（数万）个 XML 文件

> ID：16188120
> 
> 赞同：0
> 
> 时间：2013-04-24T09:17:10.323
> 
> 标签：xml, xslt, solr, xquery, apache-camel

我有一个应用程序，它将为它处理的每个搜索查询（来自 Solr）生成一个日志条目，以便我可以为我的搜索引擎计算某些统计信息。例如，没有结果的查询数、平均命中数等。现在我想知道如何最好地执行此分析。负载估计高达每天一万次搜索，每周生成统计数据。换句话说，我正在寻找计算多达*十万个 XML 文件*的统计信息的最佳方法。

该过程将由 Apache Camel 控制，我目前认为 XQuery 将是解决这个问题的最佳选择。由于我仍在努力建立架构，因此我无法运行任何真实世界的测试，因此我想在深入研究之前就最佳方法获得一些意见。一些问题：

*   XQuery 可以处理这么多文件，还是我需要使用 XSLT 将它们全部转换为单个文档？
*   XQuery 是适合这项工作的工具吗？在我看来，这比尝试在高级编程语言中执行此操作更有效，而 XSLT 太低级了。
*   一种替代方法可能是在 Apache Lucene/Solr 中索引这些查询。这会更有效率吗？
*   我可以将这些 XML 文件存储在文件系统上吗？还是我需要将它们加载到 XML 数据库中？（我不熟悉。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T11:20:44.510

原则上，XSLT 2.0 或 XQuery 1.0 都可以处理这个问题，但性能取决于实际数量和查询的复杂性。一般来说，（我知道这听起来很平庸）XSLT 更擅长转换（从每个源文档生成一个新文档），而 XQuery 更擅长查询（从每个源文档中提取少量信息）。将所有小文档合并为一个大文档并没有什么特别的意义。我还要说，将它们放入数据库没有多大意义，除非（a）您确实需要这将提供的交叉索引，或者（b）您将在一段时间内重复使用这些文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T11:08:49.680

按问题的相应顺序回答：

*   是的，XQuery 可以使用集合处理不定数量的文件，看看`fn:collection()`函数
*   “正确的工具”是一个高度主观的问题并且值得商榷，因此它并不适合 SO。但是，如果您想使用 XML 文档，XQuery 是一个显而易见的选择，因为它正是为此而设计的。但这当然也取决于其他因素，例如您的技能
*   当然，索引会加快这项工作。是否真的有必要取决于许多因素，例如文件的大小和预期的工作量。在这里很难给出一个实际的答案，但作为一般规则，索引东西总是一个好主意。但是，如果您经常更新，维护索引的成本可能会很高。很难判断您的应用程序是否会从中受益，因为它取决于工作负载、预期读取和写入的数量以及更多因素
*   我非常不建议将它们存储在文件系统上。在您要求在 Apache Lucene/Solr 中对它们进行索引之前，为什么不使用 XML 数据库对它们进行索引呢？如果您有十万个 XML 文件并将它们存储在文件系统上，那么处理它们很可能会非常缓慢。这听起来很像 XML 数据库的工作。有不同的，比如[MarkLogic](http://www.marklogic.com)（商业）、[eXist](http://exist-db.org/)（开源）或[BaseX](http://www.basex.org)（开源）等等​​。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T19:07:52.590

它们**必须**是 XML 格式吗？我会非常强烈地探索将这些统计数据加载到某种数据库中。如果信息的字段/类别是常规的，则为普通数据库，如果不是，则进入无模式 NoSQL 数据库之一。这将使推导统计数据变得更加容易。

如果您记录的标准可能发生变化，您甚至可以使用具体模式或动态字段将其加载回 Solr（独立核心）。

# java - 将子类对象分配给超类实例类型只是为了覆盖概念？或者我们也这样做是为了别的？

> ID：16188122
> 
> 赞同：4
> 
> 时间：2013-04-24T09:17:13.320
> 
> 标签：java, oop

您是否将子类对象分配给 Superclass 实例类型仅用于覆盖？还是我们这样做也是为了别的？

示例：Sub 是 Super 的子类型，并且 `Super s = new Sub();`

请解释。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T09:22:10.137

当有人编写这样的代码时，他/她正试图遵循基本的 OO 设计原则，即：

> 编程到一个接口，而不是一个具体的实现

我已经在[我的一篇博](http://sayemdb.wordpress.com/2011/05/17/an-intro-to-design-pattern-2/)文中解释了这一原则。看`Class Inheritance VS Interface Inheritance`部分。

总结这篇文章，当您使用父类型的引用来引用子类型的实例时，您会获得很大的灵活性。例如，如果您将来需要更改子类型的实现，您将能够轻松地做到这一点，而无需更改大部分代码。

考虑以下方法 -

```
public void DoSomeStuff(Super s) {
    s.someMethod();
} 
```

并调用此方法 -

```
DoSomeStuff(new Sub()); 
```

现在，如果您需要更改 内部的逻辑`someMethod`，您可以轻松地通过声明 的新子类型`Super`，例如`NewSubType`，并更改该实现内部的逻辑来实现。这样，您将永远不必接触使用该方法的其他现有代码。您仍然可以通过`DoSomeStuff`以下方式使用您的方法 -

```
DoSomeStuff(new NewSubType()); 
```

如果您将参数声明为`DoSomeStuff`of `Sub`，那么您也必须更改其实现 -

```
DoSomeStuff(NewSubType s) {
    s.someMethod();
} 
```

它也可能链接/冒泡到其他几个地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T09:29:10.097

是的，但“压倒一切”不是我会使用的术语。通常，拥有类层次结构的原因不是为了**改变**超类的行为，而是为了**实现**它。通常情况下，超类要么是接口，而不是类，要么是遵循模板方法模式的抽象类，其中一些方法保持抽象，多个子类实现这些方法，但一般行为已经固定。

更具体地说，如果我们像您的示例中那样将子类分配给超类实例变量，我们希望在交换子类的情况下限制对代码的影响（我们只需要编辑一行！）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T10:48:33.730

允许这种（将对象作为通用超类型的实例处理）的 OO 设计特性称为[多态性](http://docs.oracle.com/javase/tutorial/java/IandI/polymorphism.html)。

将一个子类型实例分配给超类型变量，以统一方式处理所有可能的子类型类，例如使用由超类型类声明（但可能覆盖）的方法。

您可能会感兴趣阅读的相关 OO 主题：

*   [抽象类](http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html)
*   [接口](http://docs.oracle.com/javase/tutorial/java/IandI/createinterface.html)

# post - 是否有任何可以拦截请求并打印正文的 Apache Web 服务器模块

> ID：16188123
> 
> 赞同：0
> 
> 时间：2013-04-24T09:17:22.490
> 
> 标签：post, apache2, httprequest

我正在寻找一个可以拦截 POST 请求并打印 POST 请求的“正文”的 Apache 模块。

如果没有针对此类情况的任何模块，是否还有其他方法可以提供帮助？

注意：我在 windows 操作系统中使用 Apache2 作为 Web 服务器。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:08:04.513

如果我正确理解您的问题，您正在寻找 mod_dumpio ：

[http://httpd.apache.org/docs/2.2/mod/mod_dumpio.html](http://httpd.apache.org/docs/2.2/mod/mod_dumpio.html)

# java - 从 XML 元素中读取属性

> ID：16188132
> 
> 赞同：0
> 
> 时间：2013-04-24T09:17:44.147
> 
> 标签：java, xml, xml-parsing

我正在尝试使用下面发布的 Java 代码显示“x”的值，但它什么也没显示。请让我知道我的错误在哪里：

Java代码：

```
for (int temp = 0; temp < nList.getLength(); temp++) {
  Node nNode = nList.item(temp);
  System.out.println("\nCurrent Element :" + nNode.getNodeName());
  System.out.println("\n"+nList.getLength());
  if (nNode.getNodeType() == Node.ELEMENT_NODE) {
    Element eElement = (Element) nNode;
    if(eElement.getAttribute("place") != null){
      System.out.println("x: " + eElement.getElementsByTagName("place").item(0).getTextContent());    
    }
  }
} 
```

XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<document>  
<group id="Fontanestra">
<place  x="4222873.962227057"   y="2902240.7064015563"  class="hdlamp lamp651   
Fontanestra"/>
<place  x="4222675.856667058"   y="2902341.1436763224"  class="hdlamp lamp745 
Fontanestra"/>
<place  x="4222761.571650493"   y="2902285.145924819"   class="hdlamp lamp871 
Fontanestra"/>
<place  x="4222703.30618614"    y="2902320.7303823503"  class="hdlamp lamp972 
Fontanestra"/>
<place  x="4222802.65477977"    y="2902265.5807657656"  class="hdlamp lamp1084 
Fontanestra"/>
<place  x="4222935.246730494"   y="2902220.7360558496"  class="hdlamp lamp1110  
Fontanestra"/>
<place  x="4222734.639113373"   y="2902300.2547685634"  class="hdlamp lamp1215 
Fontanestra"/>
<place  x="4222837.368032"      y="2902252.747460649"   class="hdlamp  
lamp1225 Fontanestra"/>
<place  x="4222904.859771981"   y="2902230.8135758354"  class="hdlamp lamp1336  
Fontanestra"/>

</group>        
</document> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T09:19:16.420

```
 if(eElement.getAttribute("place") != null){ 
```

据我了解XML，“地点”不是一个属性

```
if (nNode.getNodeType() == Node.ELEMENT_NODE) {
   Element eElement = (Element) nNode;
   if ("place".equalsIgnoreCase(eElement.getTagName())){
      System.out.println("x: " +     eElement.getAttribute("x"));    
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:42:02.317

查看您的代码，我认为`nList`是通过调用获得的：

```
NodeList nList = someDocument.getElementsByTagName("group"); 
```

因此，您需要调整循环结构，加上按名称搜索而不是寻找属性：

```
for (int i = 0; i < nList.getLength(); i++) {
  Node groupNode = nList.item(i);

  NodeList placeList = groupNode.getChildNodes();

  for (int j = 0; j < placeList.getLength(); j++) {
    Node placeNode = placeList.item(j);

    if (placeNode instanceof Element) {
      Element element = (Element) placeNode;

      if ("place".equalsIgnoreCase(element.getTagName())) {
        System.out.println("x: " + element.getAttribute("x"));
      }
    }
  }
} 
```

# cgi - 内部服务器错误 500 Bugzilla 安装

> ID：16188133
> 
> 赞同：4
> 
> 时间：2013-04-24T09:17:45.777
> 
> 标签：cgi, debian, bugzilla

我按照本教程[安装 Bugzilla](https://askubuntu.com/questions/61935/how-do-i-install-bugzilla)，直到我在 URL 中点击 localhost/bugzilla 才遇到任何问题。我的`sites-available/default`配置如下：

```
 #ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
    Alias /bugzilla/ /var/www/bugzilla/
    <Directory /var/www/bugzilla>
            AddHandler cgi-script .cgi .pl
            Options +Indexes +ExecCGI +FollowSymLinks
            DirectoryIndex index.cgi
            AllowOverride Limit
    </Directory>
    #<Directory "/usr/lib/cgi-bin">
    #       AllowOverride All
    #       Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
    #       Order allow,deny
    #       Allow from all
    #</Directory> 
```

当尾随`var/log/apache2/error.log`

```
(13)Permission denied: exec of '/var/www/bugzilla/index.cgi' failed 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-12T14:57:35.457

更改`AllowOverride Limit`为`AllowOverride All`我解决了整个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-13T00:49:45.070

这也对我有用。在使用 git 升级到 5.0.3 时，我遇到了 500 内部服务器错误。将 Apache 中的 bugzilla.conf 从更改`AllowOverride Limit`为`AllowOverride All`并重新启动 Apache 解决了该问题。

# batch-file - 列出 ZIP 文件的内容

> ID：16188135
> 
> 赞同：3
> 
> 时间：2013-04-24T09:18:00.133
> 
> 标签：batch-file, zip, 7zip

按照技术食谱的示例，我设法列出了 ZIP 文件的内容（使用 7-Zip：

```
FOR /F "tokens=* delims=" %%A in ('dir /b /s *.zip') do (7z.exe l -r "%%A" >> listing.txt) 
```

但是，这只是将 ZIP 文件的整个目录结构转储到一个文本文件（称为 list.txt）中。

我只想列出最高级别目录的目录名称，例如

Example.Zip

```
7-Zip 9.20  Copyright (c) 1999-2010 Igor Pavlov  2010-11-18

Listing archive: C:\Users\Test\Desktop\7zip\Demo.zip

--
Path = C:\Users\Test\Desktop\7zip\Demo.zip
Type = zip
Physical Size = 1252

   Date      Time    Attr         Size   Compressed  Name
------------------- ----- ------------ ------------  ------------------------
2013-04-24 13:12:26 D....            0            0  Directory Three\Sub Folder One
2013-04-24 13:13:00 D....            0            0  Directory Three\Sub Folder Three
2013-04-24 13:12:54 D....            0            0  Directory Three\Sub Folder Two
2013-04-24 13:12:26 D....            0            0  Directory Two\Sub Folder One
2013-04-24 13:13:00 D....            0            0  Directory Two\Sub Folder Three
2013-04-24 13:12:54 D....            0            0  Directory Two\Sub Folder Two
2013-04-24 13:12:26 D....            0            0  Directory One\Sub Folder One
2013-04-24 13:13:00 D....            0            0  Directory One\Sub Folder Three
2013-04-24 13:12:54 D....            0            0  Directory One\Sub Folder Two
------------------- ----- ------------ ------------  ------------------------
                                     0            0  0 files, 9 folders 
```

我只希望文本文件包含：

*   目录一
*   目录二
*   目录三

谁能建议我如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T10:46:03.463

7z 似乎没有内置键，但是你可以做一些批处理脚本（这个在文件名中搜索斜杠，如果没有找到斜杠则显示行）：

```
7z.exe l -r archive.zip > lines.txt

@echo off

setlocal ENABLEDELAYEDEXPANSION

for /f "tokens=*" %%a in (lines.txt) do (
  set line=%%a
  set srch=!line:\=!
  if "!line!" == "!srch!" (
     echo !line!
  )
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:21:58.770

```
7z.exe l -r "File.7z" | FINDSTR "[0-9].D....\>" | FIND /V "\" 
```

使用第一个 Findstr，我们过滤输出，得到一个仅包含 dirs 的列表（“D”属性）。

通过第二个查找，我们从输出中删除包含反斜杠的路径（文件夹\子文件夹）。

**如何将其与大量拉链一起使用：**

```
@echo off

(For /R %%# in (*.zip) do (

    Echo File: "%%#" | MORE

    For /F "Tokens=5,*" %%A in (
        '7z.exe l -r "%%#" ^| FINDSTR "[0-9].D....\>" ^| FIND /V "\"'
    ) do (
        Set /A "Num+=1"
        Call Echo %%NUM%%.0: %%B
    )

    Set /A "Num=0"
    Echo+

))>"listing.txt"

Pause&Exit 
```

**测试结构：**

```
 Date      Time    Attr         Size   Compressed  Name
------------------- ----- ------------ ------------  ------------------------
2013-04-24 13:02:29 ....A          274          167  ..bat
2013-04-24 13:02:29 ....A          274               1\2\2.bat
2013-04-24 13:02:29 ....A          274               a\b\c\c.bat
2013-04-24 13:12:45 D....            0            0  a\b\c
2013-04-24 13:12:37 D....            0            0  a\b
2013-04-24 13:12:33 D....            0            0  a
2013-04-24 13:12:50 D....            0            0  1\2
2013-04-24 13:12:24 D....            0            0  1
------------------- ----- ------------ ------------  ------------------------
                                   822          167  3 files, 5 folders 
```

**收到的输出：**

```
File: "C:\Users\Administrador\Desktop\Nueva carpeta\x.7z" 

1.0: a
2.0: 1 
```

# django - 如何在选择中只显示一些数据？

> ID：16188136
> 
> 赞同：1
> 
> 时间：2013-04-24T09:18:06.933
> 
> 标签：django, django-forms

我有两个模型：

```
class ArticleTemplate(models.Model):
    title = models.CharField(max_length=250)
    text = models.TexField()
    [...]
    owner = models.ForeignKey(user)

class Article(models.Model):
    template = models.ForeignKey(ArticleTemplate)
    title = models.CharField(max_length=250)
    text = models.TexField()
    [...]
    owner = models.ForeignKey(user) 
```

以及文章的形式：

```
class ArticleForm(models.Model):
    class Meta:
        model = Article
        fields = ('id', 'template', 'title', 'text') 
```

但是选择向我显示了所有模板，以及那些不属于 request.user 的模板。

如何仅显示分配给登录用户的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:07:18.283

您可以通过在视图中调用 queryset 来过滤 Django ModelForm 中的外键选择：

```
form.template.queryset = ArticleTemplate.objects.filter(owner=request.user) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:31:56.747

`__init__`向 ArticleForm添加一个方法：

```
def __init__(self, *args, **kwargs):
    logged_user = kwargs.pop("logged_user")
    super(ArticleForm, self).__init__(*args, **kwargs)
    templates = logged_user.article_template_set.all()
    self.fields['template'].queryset = templates 
```

从视图：

```
form = ArticleForm(logged_user=request.user) #GET request

form = ArticleForm(request.POST, logged_user=request.user) #POST 
```

# javascript - 我应该如何在http post请求的请求有效负载中传递json数据

> ID：16188137
> 
> 赞同：37
> 
> 时间：2013-04-24T09:18:07.007
> 
> 标签：javascript, json, node.js, payload

我想知道，如何在有效负载中传递 json 请求，例如`{'name' : 'test', 'value' : 'test'}`：：

```
var post_data = {};

var post_options = {
  host: this._host,
  path: path,
  method: 'POST',
  headers: {
    Cookie: "session=" + session,
    'Content-Type': 'application/json',
    'Content-Length': post_data.length,
  }
};

// Set up the request
var post_req = http.request(post_options, function (res) {
  res.setEncoding('utf8');
  res.on('data', function (chunk) {
    console.log('========Response========: ' + chunk);
  });
});

// post the data
post_req.write(post_data);
post_req.end(); 
```

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2013-04-24T14:40:10.737

使用[请求](https://github.com/mikeal/request)模块

`npm install -S request`

```
var request = require('request')

var postData = {
  name: 'test',
  value: 'test'
}

var url = 'https://www.example.com'
var options = {
  method: 'post',
  body: postData,
  json: true,
  url: url
}
request(options, function (err, res, body) {
  if (err) {
    console.error('error posting json: ', err)
    throw err
  }
  var headers = res.headers
  var statusCode = res.statusCode
  console.log('headers: ', headers)
  console.log('statusCode: ', statusCode)
  console.log('body: ', body)
}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-03-06T10:47:19.207

我试过这个，它似乎正在工作。我需要基本的身份验证，所以我已经包含了身份验证，如果你不需要它，你可以丢弃它。

```
var value = {email:"",name:""};

 var options = {
        url: 'http://localhost:8080/doc/',
        auth: {
            user: username,
            password: password
        },
        method :"POST",
        json : value,

    };

    request(options, function (err, res, body) {
        if (err) {
            console.dir(err)
            return
        }
        console.dir('headers', res.headers)
        console.dir('status code', res.statusCode)
        console.dir(body)
    }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-09T22:59:45.503

只需转换为字符串并发送。

```
post_req.write(JSON.stringify(post_data)); 
```

# java - primefaces 3.4，p：安排在错误日期显示事件

> ID：16188139
> 
> 赞同：1
> 
> 时间：2013-04-24T09:18:11.517
> 
> 标签：java, primefaces

我正在使用素面的 p:schedule 组件。我从数据库中获取事件日期。事件日期（来自数据库）采用 MM/DD/YYYY 格式，如下所示：04/05/2012 04/12/2012 04/19/201

但是当日程安排在页面上绘制时，该事件显示在以下日期：

2012 年 4 月 4 日 2012 年 4 月 11 日 2012 年 4 月 18 日

我正在使用以下代码段

```
<p:schedule value="#{fileSubmissionBean.scheduleModel}"
   aspectRatio="3"
   slotMinutes="60"
   draggable="false"/> 
```

任何帮助都是可取的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:24:21.657

尝试将此添加到您的 web.xml

```
<context-param>
    <param-name>javax.faces.DATETIMECONVERTER_DEFAULT_TIMEZONE_IS_SYSTEM_TIMEZONE</param-name>
    <param-value>true</param-value>
</context-param> 
```

如果仅此一项还不足以在您`p:schedule`的`timeZone`属性中设置，

像这样`<p:schedule timeZone="GMT-X"`...

（用您的格林威治标准时间替换 X）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T09:35:06.850

您需要在 Primefaces 的 Schedule control 中设置 timeZone，然后它才能正常工作。

尝试这个

```
<div class="row rowSpace">                       
  <p:schedule value="#{fileSubmissionBean.scheduleModel}"
      aspectRatio="3"
      slotMinutes="60"
      draggable="false"
      timeZone="UTC"
      />
 </div> 
```

您可以在此处查看详细信息[PrimeFaces 组件计划详细信息](http://forum.primefaces.org/viewtopic.php?f=3&t=27946&start=10)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-06-29T13:15:39.657

查看多个论坛，我看到很多关于放置 timeZone 的建议，但它不起作用，因为您应该放置`ignoreTimezone="false"`，只需放置

```
p:schedule ignoreTimezone="false" 
```

# semantic-web - 是否可以在语义网中实现数学推导？

> ID：16188144
> 
> 赞同：0
> 
> 时间：2013-04-24T09:18:19.570
> 
> 标签：semantic-web, reasoning, swrl

**例如：** 我们有前提`a < b`和`b < c`，你`a < c`能用语义网推断吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:08:27.660

# javascript - 从 url 变量填充输入字段 - 使用 javascript 或 jquery

> ID：16188151
> 
> 赞同：2
> 
> 时间：2013-04-24T09:18:34.760
> 
> 标签：javascript, jquery, url, input

我有一个网址

[http://www.example.com/state=survey&action=display&survey=39&zone=surveys¤cy=丹麦](http://www.example.com/state=survey&action=display&survey=39&zone=surveys&currency=Denmark)

用户将登陆具有上述网址的新页面。此页面将包含一个表格。有一个 ID 为“currencyrequired”的输入 - 我希望此输入自动从 url 中提取货币变量（在本例中为丹麦）。

```
<input type="text" id="currencyrequired" name="currencyrequired" size="40" maxlength="20" value="" class="input-pos-int"> 
```

网址的货币部分可能会发生变化，因为这取决于他们选择的国家/地区，因此您最终可能会得到 - [http://www.example.com/state=survey&action=display&survey=39&zone=surveys¤cy=Norway](http://www.example.com/state=survey&action=display&survey=39&zone=surveys&currency=Norway)

理想情况下，我想要列出所有货币（总共 8 个），脚本将检查 url 中列出的国家/地区，并使用输出填充所需的货币输入字段

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:09:35.267

尝试这个：

```
$("#currencyrequired").val(getParameterByName('currency'));

function getParameterByName(name)
{
  name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
  var regexS = "[\\?&]" + name + "=([^&#]*)";
  var regex = new RegExp(regexS);
  var results = regex.exec(window.location.search);
  if(results == null)
    return "";
  else
    return decodeURIComponent(results[1].replace(/\+/g, " "));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:24:06.437

您可以使用`location.search`返回查询字符串并执行以下操作：

```
var url = location.search;
var country = url.substring(url.indexOf('currency=')+9, url.length);

$("#input").val(country); 
```

[http://jsfiddle.net/ckJ5S/](http://jsfiddle.net/ckJ5S/)

# c++ - 使用 Qt::QueuedConnection 的信号执行顺序

> ID：16188152
> 
> 赞同：9
> 
> 时间：2013-04-24T09:18:38.547
> 
> 标签：c++, qt

我有两个信号 A 和 B 从线程 X 中的一个对象依次发出，并且两个连接的插槽位于主线程中。连接是 QueuedConnection（由于多线程连接）。我的问题是：在调用插槽时是否尊重信号的顺序，或者是否有机会以任意顺序执行它们？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T10:24:11.130

您的两个信号都将在 X 线程的单个事件队列中排队，因此相应的插槽将按照信号发出的顺序执行。

但在以下情况下，您不能依赖插槽执行顺序：

```
signal A connected to a slot in X thread
signal B connected to a slot in Y thread 
```

此外，还有一种`Qt::BlockingQueuedConnection`连接类型。如果您使用它连接第一个信号，则当前线程将被阻塞，直到另一个线程中的相应插槽完成其工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-24T10:23:22.260

根据当前的 QT 源 (5.*)，它们将按照使用 FIFO 算法发出的顺序进行调度。但正如评论中所述，文档中没有任何内容指定此顺序，因此我不建议转发该行为。

# c++ - 链接错误：在 Windows 上使用 MinGW 的 Boost 库

> ID：16188154
> 
> 赞同：4
> 
> 时间：2013-04-24T09:18:44.317
> 
> 标签：c++, eclipse, boost, linker, mingw

我正在使用 Windows 7 64x 并安装了 MinGW。

我的目标是在 Eclipse 上使用 boost 库（这里：）`boost_program_options`。

`libboost_program_options-vc90-mt-gd-1_53.lib`boost库已正确安装，我可以在下面看到文件`C:\MinGW\boost_1_53_0\stage\lib`

我现在尝试通过以下方式在 Eclipse 中链接它`Properties -> C/C++ Build -> Settings -> MinGW C++ Linker -> Libraries`：

这里我输入 for `Library Search Path`( `-L`):`C:\MinGW\boost_1_53_0\stage\lib` 和 for `Libraries`( `-l`):`boost_program_options-vc90-mt-gd-1_53`

尝试构建时，我收到以下错误消息：

```
11:06:54 **** Build of configuration Debug for project AP ****
make all 
Building file: ../src/HW1EX1.cpp
Invoking: GCC C++ Compiler
g++ -I"C:\MinGW\boost_1_53_0" -I"C:\MinGW\boost_1_53_0\boost\program_options" -I"C:\MinGW\boost_1_53_0\boost" -I"C:\MinGW\boost_1_53_0\boost\program_options\detail" -O0 -g3 -Wall -c -fmessage-length=0 -MMD -MP -MF"src/HW1EX1.d" -MT"src/HW1EX1.d" -o "src/HW1EX1.o" "../src/HW1EX1.cpp"
Finished building: ../src/HW1EX1.cpp

Building target: AP.exe
Invoking: MinGW C++ Linker
g++ -LC:\MinGW\boost_1_53_0\stage\lib -static-libgcc -o "AP.exe"  ./src/HW1EX1.o   -lboost_program_options-vc90-mt-gd-1_53
c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../../mingw32/bin/ld.exe: cannot find -lboost_program_options-vc90-mt-gd-1_53
collect2: ld returned 1 exit status
make: *** [AP.exe] Error 1

11:06:57 Build Finished (took 3s.80ms) 
```

有谁知道我可能做错了什么？

感谢您的时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:51:11.667

您显然已经下载了使用 Microsoft Visual C++ 编译器编译的二进制发行版（这`...-vc90-...`是一个提示）。或者，也许您是自己构建的，但您是使用 Microsoft Visual C++ 编译器完成的。您必须使用 MinGW 从源代码构建 Boost，因为您不能混合由不同 C++ 编译器生成的 C++ 代码。换句话说，在您的情况下，您无法使用 MinGW 链接到 Microsoft Visual C++ 编译器生成的库。

另外，我怀疑这`-LC:\MinGW\boost_1_53_0\stage\lib`是行不通的，因为有反斜杠并且没有引用。所以它应该是`-L"C:\MinGW\boost_1_53_0\stage\lib"`or `-LC:/MinGW/boost_1_53_0/stage/lib`。我更喜欢第二种变体，所以尝试将反斜杠更改为正斜杠，看看效果如何。还要仔细检查`libboost_program_options-mgw46-1_53.a`是否真的在`C:\MinGW\boost_1_53_0\stage\lib`.

# javascript - 选择多个输入字段

> ID：16188155
> 
> 赞同：0
> 
> 时间：2013-04-24T09:18:45.030
> 
> 标签：javascript, jquery

我想选择一些隐藏字段并遍历它们。这些字段如下所示：

```
<form method="post" action="" id="uitjes">    
    <input type="hidden" value="3" name="form-0-Workshops">
    <input type="hidden" value="ochtend" name="form-0-Dagdeel">
    <input type="hidden" value="1" name="form-0-Aantal">
    <input type="hidden" value="1" name="form-0-Workshops">
    <input type="hidden" value="middag" name="form-0-Dagdeel">
    <input type="hidden" value="1" name="form-0-Aantal">
    <input type="hidden" value="2" name="form-0-Workshops">
    <input type="hidden" value="middag" name="form-0-Dagdeel">
    <input type="hidden" value="1" name="form-0-Aantal">
</form> 
```

我这样选择它们：

```
var form = $("#uitjes");
form.find('input[name$="Workshops"]').each(rename);
form.find('input[name$="Dagdeel"]').each(rename);
form.find('input[name$="Aantal"]').each(rename); 
```

在这种情况下，研讨会的选择包括 3 个要素： `[input 1, input 1, input 3]`.

问题是所有接下来的元素都会多计算一个元素 (4): `[input#id_form-0-Dagdeel, input ochtend, input middag, input middag]`。

因此我的循环不像预期的那样工作。

选择第一个元素是首选行为。我不明白为什么第一个选择与下一个选择不同。

我这样做的原因是重命名字段以获得如下输出：

```
<form method="post" action="" id="workshops">
    <input type="hidden" value="3" name="form-0-Workshops">
    <input type="hidden" value="ochtend" name="form-0-Dagdeel">
    <input type="hidden" value="1" name="form-0-Aantal">
    <input type="hidden" value="1" name="form-1-Workshops">
    <input type="hidden" value="middag" name="form-1-Dagdeel">
    <input type="hidden" value="1" name="form-1-Aantal">
    <input type="hidden" value="2" name="form-2-Workshops">
    <input type="hidden" value="middag" name="form-2-Dagdeel">
    <input type="hidden" value="1" name="form-2-Aantal"> 
```

因此我调用这个函数（感谢@epascarello）：

```
function rename (i) {
    var parts = this.name.split("-");
    parts[1] = i;
    this.name = parts.join("-");
} 
```

# html - 想要拖动我的 div 而不水平显示滚动

> ID：16188157
> 
> 赞同：2
> 
> 时间：2013-04-24T09:18:50.747
> 
> 标签：html, css, jquery

我必须将我的 div 拖到另一个 div。它正在拖放，但在我的代码中，因为我使用了 Bootstrap JS 的滚动。因此，当我水平拖动时，它也显示了滚动 Div 本身的拖动。如何显示 div 上的拖动？

我的视图代码如下。

```
<fieldset class="span4">
      <legend>Builder</legend>
      <div class="builder scrollspy-example" id="builderBox" data-spy="scroll" style="height: 600px;" data-bind="foreach:items">
             <div class='media draggable alert alert-block fade in' data-bind="attr:{'data-id':ID}">
             <button type='button' class='close' data-dismiss='alert'>×</button>
             <div class='row'>
                  <legend><h4 class='media-heading' data-bind="text:Title" style='margin-left: 30px;'></h4></legend>
             </div>
             <div class="row" style="margin-left: 5px;">
                 <div class='pull-left'>
                      <img class='media-object' data-bind="attr:{src:'http://images.vidzapper.com/'+ImageUrl+'?w=60&h=60'}" style='width: 60px; height: 60px;' />
                 </div>

                </div>
            </div>
        </fieldset>
        <fieldset class="span4">
            <legend>Organizer</legend>
            <div class="Organizer  scrollspy-example" id="drop" data-spy="scroll" style="height: 600px;">
            </div>
        </fieldset> 
```

脚本中拖放的代码如下：

```
$("#drop").droppable({
                accept: ".draggable",
                drop: function (event, ui) {
                    console.log("drop");
                    var dropped = ui.draggable;
                    var droppedOn = $(this);
                    $(dropped).detach().css({ top: 0, left: 0 }).appendTo(droppedOn);

                   }
              });
    $("#drop").sortable(); 
```

我该怎么做才能显示在我的字段集上的拖动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-04T11:17:19.063

使用**包含**属性将拖动限制在指定元素或区域的范围内。可能的字符串值：'parent'、'document'、'window'、[x1, y1, x2, y2]。

```
$('.draggable').draggable({
    containment:'body'
}); 
```

[关联](https://jsfiddle.net/xremvnqt/)

# ruby-on-rails - 思考狮身人面像的刻面名称

> ID：16188158
> 
> 赞同：1
> 
> 时间：2013-04-24T09:18:52.547
> 
> 标签：ruby-on-rails, sphinx, thinking-sphinx, faceted-search

我已经为产品模型定义了这样的方面：

product_index.erb

```
ThinkingSphinx::Index.define :product, :with => :active_record do  
  indexes publish
  indexes name, :sortable => true
  indexes price, :sortable => true
  indexes manufacturer.permalink, :as => :manufacturer, :facet => true
  has manufacturer_id
end 
```

和考虑的方面：

```
<% @facets.each do |facet, facet_options| %>
<h5><%= facet %></h5>
<ul>
    <% facet_options.each do |option, count| %>
    <li><%= link_to "#{option} (#{count})",
    :params => {facet => option, :page => 1} %></li>
    <% end %>
</ul> 
```

这是为这样的制造商生成方面：

**制造商**

*   <a href="manufacturer=manufacturer-permalink&page=1">manufacturer-permalink (53)

如何为标题添加自己的名称（例如将**制造商**替换为**品牌**）并为链接添加自己的名称（例如将制造商永久链接（53）替换为制造商名称（53）（其中制造商是模型类））

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T18:17:59.300

我为此目的写了一些东西 - 将外键方面转换为相应的对象。你可以在这里找到代码：[https ://gist.github.com/pat/5477820](https://gist.github.com/pat/5477820)

您需要清楚要迭代哪些方面 - 否则您最终会在 HTML 中列出manufacturer_id 和manufacturers。

在构面搜索查询之后，您的控制器可能会执行以下操作：

```
FacetExpander.expand @facets, :manufacturer 
```

那么在你看来：

```
<h5>Manufacturers</h5>
<ul>
  <% @facets[:manufacturers].each do |manufacturer, count| %>
  <li><%= link_to "#{manufacturer.name} (#{count})",
    :params => {:manufacturer_id => manufacturer.id, :page => 1} %></li>
  <% end %>
</ul> 
```

# python - 如何从剪贴板读取数据并将其作为值传递给python中的变量？

> ID：16188160
> 
> 赞同：4
> 
> 时间：2013-04-24T09:18:57.200
> 
> 标签：python

如何从剪贴板读取数据并将其作为值传递给python中的变量？

例如：

我将通过按 ctrl+c 或右键单击复制一些数据 {eg: 200}。并将其传递给变量。

c = 200

..any1 可以告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-24T10:09:31.467

To read from clipboard in your script with tkinter is this easy:

```
try:
    # Python2
    import Tkinter as tk
except ImportError:
    # Python3
    import tkinter as tk

root = tk.Tk()
# keep the window from showing
root.withdraw()

# read the clipboard
c = root.clipboard_get() 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-24T09:35:11.687

只需[将此](http://coffeeghost.net/2010/10/09/pyperclip-a-cross-platform-clipboard-module-for-python/)脚本放在您的路径中某处，例如在您的项目文件夹中，然后；

```
import pyperclip # The name you have the file
x = pyperclip.paste() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T09:30:21.547

这仅适用于`Windows`操作系统！

在 C++ 中：通过`GetData`使用 查看此链接[http://msdn.microsoft.com/en-us/library/system.windows.clipboard.aspx](http://msdn.microsoft.com/en-us/library/system.windows.clipboard.aspx)`namespace``Systems.Windows`

而对于 python，您可以使用`gtk`或`Pygtk`库来完成相同的任务！例如：

```
gtk.Clipboard() 
```

# java - 是否可以使用 PDFBox 从 PDF 中检索每个字符的字体颜色

> ID：16188161
> 
> 赞同：1
> 
> 时间：2013-04-24T09:18:57.793
> 
> 标签：java, pdfbox

是否可以使用 PDFBox 从 PDF 中检索每个字符的字体颜色根据我之前的问题的解决方案：[如何使用 PDFBOX java 提取字体颜色？](https://stackoverflow.com/q/16105311/1191670) 我一直在继续，直到检索下面的字体属性是我的代码片段

```
 PDDocument doc = null;
    doc = PDDocument.load("C:\\Users\\Desktop\\abc.pdf");
    PDFStreamEngine engine = new PDFStreamEngine(ResourceLoader.loadProperties("org/apache/pdfbox/resources/PageDrawer.properties"));
    PDPage page = (PDPage)doc.getDocumentCatalog().getAllPages().get(0);
    engine.processStream(page, page.findResources(), page.getContents().getStream());
    PDGraphicsState graphicState = engine.getGraphicsState();
    System.out.println(graphicState.getNonStrokingColor().getJavaColor()); 
    doc.close(); 
```

实际 PDF 仅包含以下文本：`MessageHi`其中 Message 将包含蓝色作为字体颜色并`Hi`保持绿色，当我执行上面的代码时，它会显示我

```
java.awt.Color[r=0,g=255,b=0]  ----> green 
```

同样，我尝试使用下面的代码来检索每个字符及其各自的字体属性，但是，在显示颜色时它总是显示`java.awt.Color[r=0,g=0,b=0] --- black color`

```
public class PrintTextLocations extends PDFTextStripper {

public PrintTextLocations() throws IOException {
    super.setSortByPosition(true);
}

public static void main(String[] args) throws Exception
{
    PDDocument document = null;
    document = PDDocument.load("C:\\Users\\Desktop\\abc.pdf");
    List allPages = document.getDocumentCatalog().getAllPages();
    PrintTextLocations printer = new PrintTextLocations();
        for (int i = 0; i < allPages.size(); i++) 
        {
            PDPage page = (PDPage) allPages.get(i);
            System.out.println("Processing page: " + i);
            PDStream contents = page.getContents();
            if (contents != null)
            {
                printer.processStream(page, page.findResources(), page.getContents().getStream());              
            }
        }       
        document.close();
    } 
protected void processTextPosition(TextPosition text){      
        try {
            System.out.println("String[" + text.getXDirAdj() + ","
                    + text.getYDirAdj() + " fs=" + text.getFontSize() + " xscale="
                    + text.getXScale() + " height=" + text.getHeightDir()
                    + " space=" + text.getWidthOfSpace() + " width="
                    + text.getWidthDirAdj() + "]" + text.getCharacter() + getGraphicsState().getNonStrokingColor().getJavaColor());
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }                   
}
} 
```

任何人都可以帮我检索每个字符的字体颜色吗？

谢谢

# sql - SQL 表行顺序

> ID：16188162
> 
> 赞同：-1
> 
> 时间：2013-04-24T09:18:58.267
> 
> 标签：sql, row-number

考虑以下场景：

我在变量`'1,2,3,4'`和.`'2,3,4'``@table1Ids``@table2Ids`

然后我有以下几行：

```
SELECT 
   ROW_NUMBER() OVER (ORDER BY GETDATE()) AS [ROW],
   ID 
INTO #table1Ids 
FROM ConvertCSVToBigIntTable(@table1Ids,',');

SELECT 
   ROW_NUMBER() OVER (ORDER BY GETDATE()) AS [ROW],
   ID 
INTO #table2Ids 
FROM ConvertCSVToBigIntTable(@table2Ids,','); 
```

我这样做是为了从字符串值中得到两个表，它们作为参数传递给 SP。

`#table1Ids`但是元组的顺序`#table2Ids`必须是完整的，因为它们是相互关联的。

我的问题是，它们有没有可能出现故障。

**请注意，这`ConvertCSVToBigIntTable`是一个将逗号分隔的字符串转换为表格的内置函数。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:36:57.540

为什么不直接更改您的 ConvertCSVToBigIntTable 以添加一个标识列作为它从 CSV 创建的表的 ID 列？

这样，您甚至不需要执行 ROW_NUMBER 并且可以按身份排序。

# c++ - C++ 代码在 Win 2000 中崩溃，但在 Win xp 中不会崩溃

> ID：16188164
> 
> 赞同：0
> 
> 时间：2013-04-24T09:19:06.680
> 
> 标签：c++, windows-xp

```
main()
{       
int *p;

free(p);
} 
```

此代码在 Win 2K 中崩溃。但不知何故不会在 Win Xp 中崩溃！知道为什么吗？

编辑：是的。这是一个错误，不应该写。更多信息：使用的编译器是 VC 6 编译器。在 Win Xp 机器上以发布模式编译代码。在多台装有 Win Xp 的机器上运行此代码的可执行文件。该代码没有导致任何崩溃。但是在多台 Win 2K 机器上运行相同的代码。每次都崩溃！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T09:21:02.433

这是未定义的行为。它可能会崩溃，可能不会崩溃，甚至在显示器上绘制独角兽，对于未定义行为的行为没有规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T09:21:10.570

您的代码是未定义的行为：您正在尝试使用（实际上是免费的）未初始化的指针。

由于这是 UB，因此尝试理解为什么它在一个操作系统上工作（或者更确切地说似乎）在另一个操作系统上工作是完全无关的：UB 的原则是“*所有赌注都没有，任何事情都可能发生*”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T09:21:59.840

这正是它所代表的代码吗？即，在初始化 p 之间没有任何内容？

作为一种猜测，我会说在您的 XP 系统上，编译器正在将 p 初始化为 NULL（我不认为它必须这样做，它就是这样）。在 2K 系统上，编译器只是将 *p 添加到堆栈中，值可以是任何值。

Free(p) 将正确处理 NULL 指针，但如果您的 2K 系统在堆栈上创建指针时没有将指针归零（我认为 C 标准不需要），那么它可能是 dnagling，因此是免费的(p) 可能会尝试释放一些任意内存，从而导致您出现问题。

如果你从

```
int *p = NULL;
free(p); 
```

这会改变行为吗？

# php - 算术运算的类型铸造

> ID：16188168
> 
> 赞同：3
> 
> 时间：2013-04-24T09:19:22.047
> 
> 标签：php, math

今天在阅读参考书时，我遇到了一个例子：

```
echo (int) ((0.1 + 0.7) * 10); // output 7 
```

因为`((0.1 + 0.7) * 10)`在内部评估为`7.999999`，当转换为时`int`，结果`7`。

我也觉得是对的。请参阅**[键盘](http://codepad.org/FHqCrZOG)**。

但是当我尝试更多示例时，我发现了一些奇怪的东西，例如-

`echo (int) ((0.2 + 0.7) * 10); // output 9`（**[键盘](http://codepad.org/QHsrcZE0)**）

`echo (int) ((0.7 + 0.7) * 10); // output 14`（**[键盘](http://codepad.org/rliA3S63)**）

还有很多。每次我更改值时，它都会给我正确的答案。

我想知道为什么只`((0.1 + 07) * 10)`产生与其他结果不同的结果。

这真的很奇怪还是我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T14:11:07.917

在常见的双精度格式中，数字用符号位、11 位指数和称为有效数的 53 位小数部分表示。有效数字始终是一个 53 位非负整数除以 2 ^(52)（也可以用二进制写为一个二进制数字、一个小数点和另外 52 个二进制数字）。

.1 无法准确表示。它用 -4 的指数和 7205759403792794 / 2 ^(52)的有效数字表示。也就是说，最接近`double`0.1 的是 7205759403792794•2 ^(-52) •2 ^(-4) = 0.1000000000000000055511151231257827021181583404541015625。

最接近`double`0.7 的有效数字为 6305039478318694 / 2 ^(52)，指数为 -1；它是 6305039478318694•2 ^(-52) •2 ^(-1) = 0.6999999999999999555910790149937383830547332763671875。

当您将这两个数字相加时，结果为 0.7999999999999999611421941381195210851728916168212890625。这在 a 中也不能完全表示`double`；它必须四舍五入到最接近的可表示值，当你乘以 10 时，它必须再次四舍五入。但是，您可以看到总和小于 0.8。最终结果小于 8，因此转换为整数会将其截断为 7。

最接近的`double`0.8 是 0.8000000000000000444089209850062616169452667236328125。当您将其添加到 0.1000000000000000055511151231257827021181583404541015625 时，总和为 0.9000000000000000499600361081320443190634250640869140625。如您所见，它大于 0.9。舍入和乘以 10 的最终结果将是 9 或更大，因此转换为整数会产生 9。

您尝试的其他几个值没有四舍五入的事实仅仅是偶然的。每个不能精确表示的值都介于两个可表示值之间，一个高一个低。有些更接近较高的值，有些更接近较低的值，而您恰好选择了更接近较高可表示值并向上四舍五入的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T09:26:12.267

[在PHP 文档](http://www.php.net/manual/en/language.types.integer.php#language.types.integer.casting "PHP文档")中看到：

> 切勿将未知分数转换为整数，因为这有时会导致**意外结果**。

```
<?php
    echo (int) ( (0.1+0.7) * 10 ); // echoes 7!
?> 
```

所以是的，结果很奇怪，因为意外（(0.1+0.7) * 10 的内部表示就像 7.99999...）

PHP 文档中有关[浮点精度](http://php.net/manual/en/language.types.float.php)的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T09:29:15.180

计算机处理绝对；它们不能在位级别明确表示分数。这是使用[浮点表示](http://en.wikipedia.org/wiki/Floating_point)来解决的，这是一种表示实数近似值的方法。

不幸的是，有些数字不可能 100% 准确地表示，这会导致在处理浮点运算时不精确。

有关确切原因的更多信息，请对浮点表示进行一些研究。但这是一门相当数学技术的学科。

**编辑**

让我澄清一下。我们都知道计算机处理二进制。它们读取、写入和处理 1 或 0 的位。

32 位处理器通常会将内存划分为 4 字节的块。所以整数和浮点数的默认大小是 4 字节，或 32 位。用二进制表示一个整数（一个 int）很容易。数字 8 是：00000000 00000000 00000000 00001000。但是计算机如何表示十进制数？请记住，它只能看到 1 和 0；它不能只放置一个“。” 在他们中间！

定点表示（例如，说前 16 位是整数值（. 之前的部分），后 16 位是小数值）显着限制了可以表示的数字范围，因为它减少了最大数字到 16 位 int 并可能浪费“。”之后的所有位。可能不需要。

因此计算机使用一种称为浮点表示的技术，其中数字使用编码指数进行缩放。所以数字的一部分是指数，一部分是分数。与定点表示法相比，这大大增加了可能数字的范围。但是有些数字无法完全精确地表示。

这就是为什么任何处理货币的计算机系统从不将值存储为浮点数（例如，1.10 英镑将始终存储为 110p）。任何需要精度的系统都应该执行与 int 一样多的算术运算，并在最后一步将任何除法转换为浮点数。

请注意，这不仅仅是一个 PHP 问题，它存在于所有语言中。例如，JavaScript：

```
alert((0.1+0.7)*10); // alerts 7.9999999999 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T09:25:35.010

这是由于使用浮点数时舍入不精确例如：

```
0.1 + 0.7 = 0.7999999999
0.7999999999 * 10 = 7.999999999
floor(7.999999999) = 7 
```

解决这个问题的方法是在类型转换之前进行舍入。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-24T09:29:48.173

使用`intval`它，它更可靠。

# c# - Windows 窗体控件中的焦点属性始终为真

> ID：16188176
> 
> 赞同：1
> 
> 时间：2013-04-24T09:19:59.747
> 
> 标签：c#, .net, winforms, focus, gdi+

我目前正在开发一个 Windows 窗体控件库，作为其中的一部分，我正在编写一个自定义按钮控件。它与标准的 Button 控件非常相似，但在呈现方式上确实存在一些差异。话虽这么说，下面的代码并不是我想要实现的目标的完整表示，但它确实说明了我想要表达的观点。

以下是代码示例：

```
public class Button : System.Windows.Forms.ButtonBase, IButtonControl
{
    public Button()
    {
        base.SetStyle(ControlStyles.UserPaint, true);
        base.SetStyle(ControlStyles.AllPaintingInWmPaint, true);
        base.SetStyle(ControlStyles.ResizeRedraw, true);
        base.SetStyle(ControlStyles.SupportsTransparentBackColor, true);
    }

    protected override void OnPaint(PaintEventArgs e)
    {
        using (Bitmap bitmap = new Bitmap(this.ClientRectangle.Width, 
                                          this.ClientRectangle.Height, 
                                          PixelFormat.Format32bppArgb))
        {
            using(Graphics graphics = Graphics.FromImage(bitmap))
            {
                ButtonRenderer.DrawButton(graphics, 
                                          this.ClientRectangle, 
                                          this.Text, 
                                          this.Font, 
                                          TextFormatFlags.HorizontalCenter 
                                            | TextFormatFlags.VerticalCenter, 
                                          this.Focused, 
                                          this.GetButtonState());
            }
            e.Graphics.DrawImageUnscaled(bitmap, this.ClientRectangle);
        }
    }   
} 
```

这工作正常，并适当地呈现按钮，但是，按钮上总是有一个焦点矩形，即使表单上的其他对象应该接收焦点（从而从自定义按钮中移除焦点），它仍然被绘制为焦点矩形。

是否有一个原因？为什么控件没有失去焦点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:26:03.507

试试这个

```
public Button()
    {
        base.SetStyle(ControlStyles.UserPaint, true);
        base.SetStyle(ControlStyles.AllPaintingInWmPaint, true);
        base.SetStyle(ControlStyles.ResizeRedraw, true);
        base.SetStyle(ControlStyles.SupportsTransparentBackColor, true);
        base.SetStyle(ControlStyles.Selectable, false);

    } 
```

它删除了控件的焦点矩形。

# spring - Spring @MVC如何从请求参数获取JavaBeans列表而不将列表包装在对象中

> ID：16188182
> 
> 赞同：0
> 
> 时间：2013-04-24T09:20:14.487
> 
> 标签：spring, spring-mvc, data-binding

我需要这个控制器：

```
@RequestMapping("/path/to/my/app")
public String process(List<JavaBean> javaBeans){
    // Do something with the list
} 
```

在客户端，我需要手动创建用户操作列表，就像这样

```
<form action="/path/to/my/app">
    <input name="javaBeans[0].field1"/>
    <input name="javaBeans[0].field2"/>
    <input name="javaBeans[0].field3"/>
    <br/>
    <input name="javaBeans[1].field1"/>
    <input name="javaBeans[2].field2"/>
    <input name="javaBeans[3].field3"/>
    <!-- and so forth -->
</form> 
```

我的主要问题是我在控制器内收到空列表。我必须将它包装在另一个 javabean 中才能使代码正常工作。喜欢以下

```
public class BeanWrapper{
    private List<JavaBean> javaBeans;

    // Getter and setter
} 
```

并在控制器中

```
@RequestMapping("/path/to/my/app")
public String process(BeanWrapper wrapper){
    List<JavaBean> list = wrapper.getJavaBeans();
    // Do something with the list
} 
```

这个版本有效，但我不得不不必要地将我的列表包裹在一个对象周围。有办法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:01:05.307

你可以试试这个：

```
public String process(@RequestParam("javaBeans[]") List<JavaBean> javaBeans) { 
```

**更新：**

`javaBeans[1]`Spring 默认绑定当前不支持使用索引 () 的语法。如评论中所述，您可以通过使用`@RequestBody`注释来解决此限制。

```
public String process(@RequestBody List<JavaBean> javaBeans) 
```

这需要一个`POST`请求，以及以不同格式（例如 JSON）发送的数据或实现您自己的消息转换器。

# java - 错误：java.sql.SQLException：[Microsoft][ODBC dBASE Driver] 参数太少。预计 1

> ID：16188184
> 
> 赞同：0
> 
> 时间：2013-04-24T09:20:15.043
> 
> 标签：java, ms-access, ms-access-2007

我正在使用 MS Access 2007 并尝试插入数据，我得到了异常，我已经尝试使用 [] 大括号，但它不起作用。它成功创建了 DBF 文件，但没有生成确切的输出。

```
 import java.sql.*;

           public class Test
           {
             public static void main(String[] args)
              {
               try 
                  {
                     Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");

                     String dataSourceName = "mdbTEST";
                     String dbURL = "jdbc:odbc:" + dataSourceName;
                     Connection con = DriverManager.getConnection(dbURL, "",""); 

          //  creating a java.sql.Statement so I can run queries

                    Statement s = con.createStatement();
                    s.execute("create table TESTME ( olumn_name integer )");
        // creating a table

       // inserting some data into the table

                    s.execute("insert into TESTME values(3)");

       // selecting the data from the table
                    s.execute("[select column_name from TESTME]");

       //getting any ResultSet that came from our query 

                    ResultSet rs = s.getResultSet();  
                   if (rs != null) 
       // if rs == null, then there is no ResultSet to view

                 while ( rs.next() ) 
                        {
        /* the next line will get the first column in our current row's ResultSet 
        as a String ( getString( columnNumber) ) and output it to the screen */ 

             System.out.println("[Data from column_name:]" + rs.getString(1) );
                        }

             s.execute("drop table TESTME");
             s.close(); 
             con.close(); 
                  }
            catch (Exception err)
                      {
                        System.out.println("ERROR: " + err);
                      }
        }
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:55:51.130

你的陈述

```
s.execute("[select column_name from TESTME]"); 
```

将不起作用，因为 Access SQL 使用方括号来分隔表名和列*名*`SELECT`，因此您的 SQL“查询”由没有关键字的单个名称组成。我建议...

```
s.execute("SELECT [column_name] FROM [TESTME]"); 
```

`CREATE TABLE`...但是由于您的陈述中有错字，这可能行不通。尝试这个：

```
s.execute("SELECT [olumn_name] FROM [TESTME]"); 
```

## 编辑

以下代码适用于我：

```
import java.sql.*;

public class JDBCQuery {
    public static void main( String args[] )
    {
        try
        {
            Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
            Connection conn = DriverManager.getConnection("jdbc:odbc:Driver={Microsoft Access Driver (*.mdb, *.accdb)};DBQ=C:\\Users\\Public\\Database1.accdb;");
            Statement s = conn.createStatement();
            s.execute("CREATE TABLE [TESTME] ([column_name] integer)");
            s.execute("INSERT INTO [TESTME] VALUES (3)");
            s.execute("SELECT [column_name] FROM [TESTME]");
            ResultSet rs = s.getResultSet();
            if (rs!=null)
            {
                while (rs.next())
                {
                    System.out.println("Data from column_name: " + rs.getString(1));
                }
            }
            s.execute("DROP TABLE [TESTME]");
            s.close();
            conn.close();
        }
        catch( Exception e ) {
            e.printStackTrace();
        }
    }
} 
```

（请注意，`Database1.accdb`当我运行此代码时，数据库文件已经存在。）

# ios - 无法在 iOS 上启动任何 Tabris 1.0 应用程序

> ID：16188188
> 
> 赞同：0
> 
> 时间：2013-04-24T09:20:24.783
> 
> 标签：ios, tabris

*抱歉，我不确定是在此处还是在 GitHub 上发布 Tabris 问题，现在 1.0 可用？这是我刚刚在 GitHub 上提出的一个副本...*

我已经使用 Tabris 1.0 几天了，在浏览器和 Android 上运行良好，但我根本无法启动 iOS 客户端。这是我在 XCode 中的错误，无论是模拟设备还是真正的 iPad，都是一样的：

2013-04-24 09:45:53.616 RapHello[2636:907] *** 17 天的大布里斯审判离开** **2013-04-24 09:45:53.620 RapHello[2636:907]-[AppDelegate clientDidBecomeReady]：无法识别的选择器发送到实例 0x1e51fb70 2013-04-24 09:45:53.621 RapHello[2636:907]*****Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[AppDelegate clientDidBecomeReady]: unrecognized selector sent to instance 0x1e51fb70' *** First throw call stack: (0x343ae3e7 0x3c238963 0x343b1f31 0x343b0737 0x34308208 0x342ff349 0x34c16b7f 0x361c3d11 0x36215b7d 0x361bdd1f 0x361bd7ad 0x361bd1ef 0x37eb15f7 0x37eb1227 0x343833e7 0x3438338b 0x3438220f 0x342f523d 0x342f50c9 0x3621446d 0x362112b9 0xb7981 0xb7908) libc++abi.dylib：终止调用抛出异常***

 ***这很早就发生了。我在设备上看到了 TABRIS 徽标屏幕，但随后发生了崩溃，没有其他任何事情发生。

任何想法我做错了什么 - 显然是非常基本的。

谢谢，约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:49:58.233

要解决该问题，您需要将以下方法添加到您的 AppDelegate.m ：

```
- (void)clientDidBecomeReady {
   /*
    Called when the Tabris client did become ready and will start a new session. 
    */
} 
```

我们将尽快在试用版下载中解决此问题。***

# javascript - 对象指针突然变得未定义

> ID：16188191
> 
> 赞同：-1
> 
> 时间：2013-04-24T09:20:39.193
> 
> 标签：javascript, arrays, object, undefined

是否已知 Javascript 会突然使对象指针未定义而没有任何警告？

我将三个对象指针数组传递给一个函数，在调用另一个函数后，其中一个作为参数提供，另一个在调用后变为未定义。

我也尝试将那个传递给另一个函数，并在每一步检查它是否发生任何事情，但是在从该函数返回控制之前什么都没有发生（返回另一个对象引用数组已在该函数中构建）。

我也尝试克隆它并在调用后从克隆中复制回来，但结果仍然未定义。最奇怪的是，我尝试再次构建它，在调用提到的其他函数之后插入对构建它的函数的调用。还是一样。

发生这种情况的函数如下。请注意调用绘图之前和之后的相同警报。第一个有效，另一个无效。

```
function play(skaters,nations,distances)
{
    var pairs = [];
    for(i=0;i<distances.length;i++)
    {
    alert(distances[i].value + ' ' + distances[i].unit + ':');
    pairs = drawing(skaters,i);
    try{
    alert(distances[i].value + ' ' + distances[i].unit + ':');
    } catch(err) {alert(err.message)}
    for(j=0;j<pairs.length;j++) 
    displayPair(pairs[j],distances[i],skaters,nations);
//  displayDistance(distances[i],skaters,nations);
    }
//  displayFinal(nations); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T06:32:24.190

既没有`i`也没有`j`用`var`关键字声明，意思是`i`并`j`成为全局范围内的变量而不是局部变量（假设您没有在其他地方声明它们，我们只是在这里没有看到它，但这似乎不太可能）。如果`drawing`修改`i`，可能会导致您看到的问题。

如果没有看到你的代码的其余部分（特别是`drawing`函数和它调用的任何东西），这是不可能的，但是使用`var`关键字来声明变量将是一个朝着正确方向的良好开端。

# java - jsch 并从特定目录运行 sudo

> ID：16188193
> 
> 赞同：0
> 
> 时间：2013-04-24T09:20:47.960
> 
> 标签：java, linux

我已连接到远程 ubuntu 服务器。在连接时，我想执行下面的 shell 命令

```
String command = "cd "to some directory" ; 
sudo ./i3lsdd"; 
// want to move to a directory and execute sudo ./i3lsdd command. 
```

我使用了下面的代码，但它给出了这个错误：

> “sudo：不存在 tty，也没有指定 askpass 程序对不起，再试一次。”

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-27T06:32:26.100

将命令“sudo ./i3lsdd”保留在主目录的 .sh 文件中。

使用获取主目录路径

```
String path = channelSftp.pwd(); 
```

编写如下命令

```
String command = "sudo -S " + path + "/scriptname.sh"; 
```

使用以下代码提供密码

```
out1.write((sudo_pass + "\n").getBytes()); 
out1.flush(); 
```

# c++ - 将树展平为链表 C++，没有指针

> ID：16188199
> 
> 赞同：0
> 
> 时间：2013-04-24T09:21:00.277
> 
> 标签：c++, data-structures, cuda, tree, linked-list

我正在研究一种遗传算法，我想尝试将一些函数放入 cuda 中，看看是否可以实现值得的加速。

目前的数据结构是一棵节点树，其中函数节点包含指向它们可能拥有的任何子节点的指针向量。我相信我需要将这棵树折叠成一个链表，可能是节点的向量（不是指针）。这些节点将包含指向其子节点的整数索引列表。通过这种方式，我可以将结构按值传递给 cuda。

```
 root/             (0)
  ├── add           (1)
  │   ├── 5         (2)
  │   └── divide    (3)
  │       ├── 10    (4)
  │       └── 5.7   (5)
  └── multiply      (6)
      ├── 1.2       (7)
      └── 77        (8) 
```

它可以很容易地展平，但我担心进行这些更改将需要一些自定义函数，并且可能比 node->childNode[x] 样式结构的计算成本更高。

例如，如果我想用数字 7 替换除法及其子结构，我需要：

*   流行成员 4,5
*   将索引 3 处的除数更改为数字 7。
*   更新根函数，使其第二个子函数的引用现在为 4。
*   更新乘法函数，现在在 4，即子节点现在在 5 和 6

肯定有更好的办法？我不是 C++ 专家，所以我正在寻找建议和代码示例会非常有帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T09:30:03.470

我建议保持你的树结构完全原样，除了用数组中的索引替换你的指针，正如 tera 所说。

我在说什么数组？您需要设置一个内存池（又名固定大小块分配器）。你可以谷歌这个。池基本上是一个包含任何节点类型的数组。您应该提前选择最大大小（树中需要的最大节点数）。然后，您将永远不必调整/增长这个数组。您的内存池类将具有 allocate 和 free 方法，但它们对数组的索引进行操作，而不是指针。

使用这种方法，您将能够非常便宜地进行您提到的树修改 - 使用内存池，分配和删除项目非常便宜，并且您永远不会在内存中复制/移动节点。

您将把树的根（同样，只是一个索引，而不是一个指针）连同内存池的数组一起传递给 GPU。

# spring - 使用 Hibernate 和 Spring 更新记录的问题

> ID：16188202
> 
> 赞同：0
> 
> 时间：2013-04-24T09:21:04.127
> 
> 标签：spring, hibernate, spring-mvc

我有一对多的关系表。当我插入记录时，程序插入新记录没有任何问题，但是当我尝试使用 更新记录时`saveOrUpdate()`，程序没有按我的预期工作。只有父表（例如，`student`）记录被更新并且新记录被插入到子表（例如，`studentaddress`）中。与父表一样，我也需要在子表中进行更新。

如何做到这一点？请帮我。以下是 Hibernate 工具生成的代码：

**学生桌**

```
@OneToMany(fetch = FetchType.LAZY, mappedBy = "student",cascade=CascadeType.ALL) 
```

**学生地址表**

```
@ManyToOne(fetch = FetchType.LAZY) @JoinColumn(name = "student_id", nullable = false) 
```

我进行了很多搜索，但找不到任何与更新相关的站点，但我已经看到一些站点用于一个表更新。就我而言，我想更新两个表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:22:44.690

尝试将此添加到学生

```
@org.hibernate.annotations.Cascade(org.hibernate.annotations.CascadeType.SAVE_UPDATE) 
```

# r - 增加绘图刻度线的长度

> ID：16188203
> 
> 赞同：10
> 
> 时间：2013-04-24T09:21:09.673
> 
> 标签：r, datetime, plot, axis-labels

如何增加绘图刻度线的长度？这是一个小例子：

```
r <- as.POSIXct(round(range(time), "mins"))
plot(time, x, t="l", xaxt = "n")
axis.POSIXct(1, at = seq(r[1], r[2], by = "min"), format = "%H:%M:%S") 
```

这使

![在此处输入图像描述](https://i.stack.imgur.com/ewYaJ.png)

如您所见，所有刻度的大小都相同。有没有办法自动增加签名的刻度的长度？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-24T11:04:00.193

创建非常具体的轴布局时，通常需要在绘制绘图后添加轴。由于您没有可重现的示例，因此我创建了自己的数据集。

1.  创建绘图，但不显示轴

    ```
    plot(1:10, axes=FALSE, frame=TRUE) 
    ```

2.  添加 x 比例。在此示例中，值为 1,2,3, ...., 10。参数`tck`指定刻度长度：

    ```
    ##The tck value should be smaller here
    axis(1, 1:10, tck=-0.05) 
    ```

3.  现在为“中间”值添加一个额外的比例。我已经设置`labels=""`了，所以我们不打印任何值：

    ```
    axis(1, seq(0.5, 9.5, 1), labels=rep("", 10), tck=-0.01) 
    ```

这给出了：

![在此处输入图像描述](https://i.stack.imgur.com/BXeZL.png)

# c# - EF：saveChanges 成功，但更改仅在编辑现有引用成员时反映在 DB 中

> ID：16188210
> 
> 赞同：-2
> 
> 时间：2013-04-24T09:21:28.353
> 
> 标签：c#, sql, asp.net-mvc, sql-server-2008, entity-framework

我正在使用EF。

我有一个`Parent`名为`MamConfiguration_V1`

它有一个 EntityCollection`MamConfigurationToBrowser_V1`

我的上下文是`mMaMDBEntities`。

我正在尝试将新的添加`MamConfigurationToBrowser_V1`到现有的`MamConfiguration_V1`

我没有收到任何错误，但没有记录添加到数据库中。

当我更新现有参考成员时，更改会反映在数据库中。

我究竟做错了什么？

公共 MamConfiguration_V1 保存（MamConfiguration_V1 项）{

```
 try
        {

            var itemFromDB = mMaMDBEntities.MamConfiguration_V1.SingleOrDefault(a=> a.ConfigurationId == item.ConfigurationId);

            if (itemFromDB != null)
            {

                UpdateEfBrowsers(itemFromDB, item);

                mMaMDBEntities.SaveChanges();

                return item;
            }
            else
            {
                throw new KeyNotFoundException(string.Format("configurationId = {0} wasn't found in the DB", item.ConfigurationId));
            }

    }

    private void UpdateEfBrowsers(MamConfiguration_V1 itemFromDb, MamConfiguration_V1 itemFromUi)
    {
        foreach (var item in itemFromDb.MamConfigurationToBrowser_V1.ToList())
        {
            if (itemFromUi.MamConfigurationToBrowser_V1.All(b => b.BrowserVersionId != item.BrowserVersionId))
            {
                mMaMDBEntities.MamConfigurationToBrowser_V1.DeleteObject(item);
            }
        }

        for (int i = 0; i < itemFromUi.MamConfigurationToBrowser_V1.Count; i++)
        {
            var element = itemFromUi.MamConfigurationToBrowser_V1.ElementAt(i);

            var item =
                itemFromDb.MamConfigurationToBrowser_V1.SingleOrDefault(b => b.BrowserVersionId == element.BrowserVersionId);

            if (item != null)
            {
                // copy properties from element to item
            }

                //add new
            else
            {
                //element.Browser = mMaMDBEntities.Browsers.Single(browserItem =>
                //                                                 browserItem.BrowserID == element.BrowserID);

                //element.MamConfigurationId = itemFromDb.ConfigurationId;

                element.MamConfiguration_V1 = null;

                mMaMDBEntities.MamConfigurationToBrowser_V1.AddObject(element);

                itemFromDb.MamConfigurationToBrowser_V1.Add(element);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:43:49.910

```
for (int i = 0; i < itemFromUi.MamConfigurationToBrowser_V1.Count; i++)
        {

...

                mMaMDBEntities.MamConfigurationToBrowser_V1.AddObject(element);

                itemFromDb.MamConfigurationToBrowser_V1.Add(element);
} 
```

问题是`AddObject`或`Add`

从 itemFromUi.MamConfigurationToBrowser_V1.Count 中删除一个项目

从而减少计数。

我不知道为什么。

我已经替换为`foreach`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-24T11:28:09.657

你需要写

```
*databasename*.SaveChanges() 
```

添加到数据库后。否则不会保存

# sql-server-2005 - 如何摆脱 SQL Server 中的#temp 表和 CTE

> ID：16188215
> 
> 赞同：0
> 
> 时间：2013-04-24T09:21:41.403
> 
> 标签：sql-server-2005, left-join, common-table-expression

因此，我问了一个关于如何摆脱#temp 表的问题。

[如何摆脱#temp 表](https://stackoverflow.com/questions/16015006/how-to-get-rid-of-temp-tables-from-the-query/16016076#16016076)

也得到了解决。但我也不想使用 CTE。

任何想法，如何将所有这些查询合并为一个。

```
select {some columns} into #temp1 from {some tables} where {conditions1}
select {some other columns} into #temp2 from {some tables} where {conditions2}
select {some other columns} into #temp3 from {some tables} where {conditions3}

select {some columns from all #temp tables} from #temp1, #temp2,
#temp3 where {conditions} 
```

谢谢

斋

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:46:28.060

我完全不清楚您想要实现什么，但如果您不想使用 CTE（出于任何奇怪的原因），派生表可能会满足您的需求：

```
select {some columns 
from ( 
  select {some columns} 
  from {some tables} 
  where {conditions1}
) as t1
  join ( 
    select {some other columns} 
    from {some tables} 
    where {conditions2}
  ) as t2 ON {join condition between t1 and t2}
  join (
    select {some other columns}  
    from {some tables} 
    where {conditions3}
  ) as t3 ON {join condition between t2 and t3}
where {conditions} 
```

（虽然从技术上讲并没有真正的区别，但这只是写同一件事的不同方式）

# matlab - Matlab中的简单序列特征选择

> ID：16188218
> 
> 赞同：0
> 
> 时间：2013-04-24T09:21:53.413
> 
> 标签：matlab, select, machine-learning

我有一个`40X3249`嘈杂的数据集和`40X1`结果集。我想在 Matlab 中对其执行简单的顺序特征选择。Matlab示例很复杂，我无法理解。即使是一些关于 SoF 的例子也无济于事。我想使用**决策树**作为分类器来执行特征选择。有人可以简单地解释一下。
与特征数量相比，我的数据集的观察数量非常少，这也是一个问题吗？
我正在关注这个例子：[Sequential feature selection Matlab](https://stackoverflow.com/questions/8288095/sequential-feature-selection-matlab)，我收到这样的错误：

> TRAINING 的合并协方差矩阵必须是正定的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T10:46:30.323

我已经解释了您在回答之前的问题时收到的错误消息。

一般来说，你有比样本更多的变量是一个问题。这将阻止您使用某些技术，例如您尝试的判别分析，但无论如何这是一个问题。事实是，如果变量与样本的比率如此之高，那么即使它们都是随机数，某些变量组合很可能会完美地分类您的数据集。如果您构建单个决策树模型，这是正确的，如果您使用特征选择方法显式搜索变量组合，则更是如此。

我建议您尝试某种降维方法。如果您的所有变量都是连续的，您可以按照@user1207217 的建议尝试 PCA。或者，您可以使用潜在变量方法进行模型构建，例如 PLS（`plsregress`在 MATLAB 中）。

如果您仍然打算在此数据集上使用带有决策树的顺序特征选择，那么您应该能够修改您链接到的问题中的示例，将分类调用替换为 one to `classregtree`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T10:39:04.240

此错误来自`classify`该问题中执行 LDA 的函数的使用。当数据等级不足（或者换句话说，某些特征几乎完全相关）时，会发生此错误。为了克服这个问题，您应该将数据投影到较低维的子空间。主成分分析可以为您做到这一点。有关如何在 Matlab 的统计工具箱中使用函数的更多详细信息，请参见[此处。](http://www.mathworks.co.uk/help/stats/pca.html)`pca`

```
[basis, scores, ~] = pca(X); % Find the basis functions and their weighting, X is row vectors
indices = find(scores > eps(2*max(scores))); % This is to find irrelevant components up to  machine precision of the biggest component .. with a litte extra tolerance (2x)
new_basis = basis(:, indices); % This gets us the relevant components, which are stored in variable "basis" as column vectors
X_new = X*new_basis; % inner products between the new basis functions spanning some subspace of the original, and the original feature vectors 
```

这应该让您自动投影到相关的子空间。请注意，您的特征将不再具有与以前相同的含义，因为它们将是旧特征的加权组合。

额外说明：如果您不想更改您的特征表示，那么您需要使用适用于排名不足数据的东西而不是分类。您可以推出自己的惩罚判别分析版本（这很简单），使用支持向量机或其他不会像 LDA 那样破坏相关特征的分类函数（由于需要协方差估计的矩阵求逆）。

编辑： PS 我没有测试过这个，因为我已经在 Matlab 中推出了我自己的 PCA 版本。

# java - Java - 是否可以实例化 UserDefined 类或 java 原始类型

> ID：16188219
> 
> 赞同：2
> 
> 时间：2013-04-24T09:21:54.223
> 
> 标签：java, variables

我有一个用户定义的类，如下所示，

```
package com.hexgen.tools;

public class UserDefinedParams {
    private String dataType="";
    private String isArray="";
    public String getDataType() {
        return dataType;
    }
    public void setDataType(String dataType) {
        this.dataType = dataType;
    }
    public String getIsArray() {
        return isArray;
    }
    public void setIsArray(String isArray) {
        this.isArray = isArray;
    }

} 
```

`dataType`以及`isArray`如果 dataType ->`this may have userdefined pojo class or java primitive type`和 if isArray ->的值`this will have Y or N`。基于此如何创建类似的东西：

如果 dataType`someUserDefinedPOJO`和 isArray`Y`

->`someUserDefinedPOJO[] obj = new someUserDefinedPOJO();`

```
vise versa for java primitive types too. 
```

`is it possible through reflection in java?`

这个怎么做？

此致

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T09:25:15.970

只需使用 a `HashMap<String,Object>`，您就可以在其中定义所有变量，例如：

```
HashMap<String,Object> map=new HashMap<String,Object>();
map.put("myVarName",new Object());

System.out.printlb(map.get("myVarName")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T09:26:10.083

Java 中没有动态变量。Java 变量必须在源代码中声明。

根据您要实现的目标，您应该使用数组、List 或 Map；例如，请参见[此处](https://stackoverflow.com/questions/6729605/dynamic-variable-names-in-java)。

```
int n[] = new int[3];
for (int i = 0; i < 3; i++) {
    n[i] = 5;
}

List<Integer> n = new ArrayList<Integer>();
for (int i = 1; i < 4; i++) {
    n.add(5);
}

Map<String, Integer> n = new HashMap<String, Integer>();
for (int i = 1; i < 4; i++) {
    n.put("n" + i, 5);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T09:26:47.133

我认为您应该研究Java反射。但这已经发布在SO上。

[阅读链接 1](https://stackoverflow.com/questions/5537363/how-to-create-new-variable-in-java-dynamically)

[阅读链接 2](https://stackoverflow.com/questions/1192534/is-there-away-to-generate-variables-names-dynamically-in-java)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T09:28:10.380

另一种可能的方法是使用泛型：

```
public class CustomVariable<E> {
    private E var;

    public CustomVariable<E>(E value){
        var = value;
    }
} 
```

但是我不知道数组。

# xampp - 如何在 Windows 7 上的 XAMPP 上使用 Bitnami Wordpress 安装

> ID：16188221
> 
> 赞同：1
> 
> 时间：2013-04-24T09:21:58.630
> 
> 标签：xampp, bitnami

我是运行 Xampp 和 Bitnami 的新手，但据我所知，Bitnami 为 Wordpress 提供了一键式安装工具，类似于我在我的网络主机上获得的工具。

Xampp 正在运行，我已经安装了 Bitnami，`C:\xampp`可以在 Xampp Admin 的 Applications 项下看到它，但我看不到如何在新站点上安装 Wordpress。

我尝试再次运行安装程序并使用路径`C:\xampp\htdocs\my_new_site`，但我得到一个`error`说它不包含`valid XAMPP installation`. 我应该如何使用 Bitnami？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-26T13:39:36.493

BitNami for XAMPP 将您选择的应用程序（WordPress、Drupal 和/或 Joomla！）安装在 C:\XAMPP\apps 目录中，这是[分步指南](http://bitnami.com/stack/xampp)。如果您运行安装程序并选择 WordPress，则文件应放置在 c:\XAMPP\apps\wordpress 中。目前使用 BitNami 安装程序，您将只能安装一个 WordPress（不过您可以手动添加更多实例）。

# unity3d - 统一着色器错误；大概在 if 语句中

> ID：16188225
> 
> 赞同：0
> 
> 时间：2013-04-24T09:22:11.097
> 
> 标签：unity3d, shader

我正在着色器中进行两个线平面相交，但是我需要考虑是否没有击中光线以及哪条光线的距离最短。

但是，以下代码会引发一个错误，该错误不会给我任何有用的信息（并指向错误的方向）。如果我将 tex 和 selectN 设置为说 intersection.xy 和 N，它可以正常工作（但当然不会给出我需要的结果）。

我在 Unity 工作。

```
float3 selectN;

float2 tex;
if (dist == 0.0) {
   selectN = N2;
   tex = intersection2.xy;
} else if (dist2 == 0.0) {
   selectN = N;
   tex = intersection.xy;
} else if (dist < dist2) {
   selectN = N;
   tex = intersection.xy;
} else {
   selectN = N2;
   tex = intersection2.xy;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T15:04:10.167

我需要添加#pragma target 3.0，因为我的着色器变得“太复杂”了。

# php - 如何通过 gmail 使用 symfony2 发送电子邮件？

> ID：16188226
> 
> 赞同：1
> 
> 时间：2013-04-24T09:22:12.360
> 
> 标签：php, symfony

我想使用 symfony 和 gmail 发送电子邮件。我的意思是发件人和收件人都使用gmail。我将 config.yml 配置如下：

```
swiftmailer:
    transport: gmail
    encryption: ssl
    auth_mode:  login
    host:      smtp.gmail.com
    username:  username
    password:  pass
    spool:     { type: memory }

 $message = \Swift_Message::newInstance()
            ->setSubject('Hello Email')
            ->setFrom('sender@gmail.com')
            ->setTo('destination@gmail.com')
            ->setBody('hello') 
```

这段代码正确吗？

另一个注意事项：当我添加此代码时，它起作用了

```
$form = $this->get('form.factory')->create(new xxxType(), array('key' => 'var')); 
```

但有了这个它不会

```
$form = $this->createForm(new xxxType(),$entity); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:01:48.187

您正在使用[spool](http://symfony.com/doc/current/cookbook/email/spool.html)，它会延迟发送电子邮件，直到您实际通过 app/console 命令发送电子邮件。如之前链接的文档中所述，邮件一直保存在内存中。

为了发送电子邮件，您应该停止使用假脱机，或手动发送它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:01:52.383

我看看你刚刚忘记的文档

```
 $this->get('mailer')->send($message); 
```

来源：[http ://symfony.com/doc/2.0/cookbook/email/email.html](http://symfony.com/doc/2.0/cookbook/email/email.html)

# arm - 带有自动配置的 ARM 编译器

> ID：16188228
> 
> 赞同：6
> 
> 时间：2013-04-24T09:22:18.013
> 
> 标签：arm, cross-compiling, autotools

我正在尝试使用 autoconf 为 ARM 架构编译一些文件。我在 Ubuntu 12.04 中编译它们，目标系统是 BeagleBoard XM。我运行以下命令：

```
./configure --host=arm-linux-gnueabi -prefix=${CSTOOL_DIR}/linux_arm_tool 
```

并得到这个结果：

```
configure: WARNING: if you wanted to set the --build type, don't use --host.
If a cross compiler is detected then cross compile mode will be used
checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for arm-linux-gnueabi-strip... arm-linux-gnueabi-strip   
checking for a thread-safe mkdir -p... /bin/mkdir -p
checking for gawk... no
checking for mawk... mawk
checking whether make sets $(MAKE)... yes
checking for arm-linux-gnueabi-gcc... arm-linux-gnueabi-gcc
checking whether the C compiler works... no
configure: error: in `/home/edgar/Desktop/smartsantander/commserver':
configure: error: C compiler cannot create executables
See `config.log' for more details 
```

这是 config.log 文件：

```
This file contains any messages produced by compilers while
running configure, to aid debugging if configure makes a mistake.

It was created by commserver configure 3.2, which was
generated by GNU Autoconf 2.68\.  Invocation command line was

  $ ../configure --target=i686-pc-linux-gnu --host=arm-linux-gnueabi --build=i686-pc-linux-gnu -prefix=/linux_arm_tool

## --------- ##
## Platform. ##
## --------- ##

hostname = ear-it
uname -m = i686
uname -r = 3.5.0-27-generic
uname -s = Linux
uname -v = #46~precise1-Ubuntu SMP Tue Mar 26 19:33:56 UTC 2013

/usr/bin/uname -p = unknown
/bin/uname -X     = unknown

/bin/arch              = unknown
/usr/bin/arch -k       = unknown
/usr/convex/getsysinfo = unknown
/usr/bin/hostinfo      = unknown
/bin/machine           = unknown
/usr/bin/oslevel       = unknown
/bin/universe          = unknown

PATH: /usr/lib/lightdm/lightdm
PATH: /usr/local/sbin
PATH: /usr/local/bin
PATH: /usr/sbin
PATH: /usr/bin
PATH: /sbin
PATH: /bin
PATH: /usr/games
PATH: /home/ear-it/Desktop/arm-2008q3/arm-none-linux-gnueabi/bin
PATH: /home/ear-it/Desktop/arm-2008q3/arm-none-linux-gnueabi/bin/

## ----------- ##
## Core tests. ##
## ----------- ##

configure:1801: checking for a BSD-compatible install
configure:1869: result: /usr/bin/install -c
configure:1880: checking whether build environment is sane
configure:1930: result: yes
configure:1979: checking for arm-linux-gnueabi-strip
configure:1995: found /usr/bin/arm-linux-gnueabi-strip
configure:2006: result: arm-linux-gnueabi-strip
configure:2071: checking for a thread-safe mkdir -p
configure:2110: result: /bin/mkdir -p
configure:2123: checking for gawk
configure:2153: result: no
configure:2123: checking for mawk
configure:2139: found /usr/bin/mawk
configure:2150: result: mawk
configure:2161: checking whether make sets $(MAKE)
configure:2183: result: yes
configure:2272: checking for arm-linux-gnueabi-gcc
configure:2288: found /usr/bin/arm-linux-gnueabi-gcc
configure:2299: result: arm-linux-gnueabi-gcc
configure:2568: checking for C compiler version
configure:2577: arm-linux-gnueabi-gcc --version >&5
arm-linux-gnueabi-gcc (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3
Copyright (C) 2011 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

configure:2588: $? = 0
configure:2577: arm-linux-gnueabi-gcc -v >&5
Using built-in specs.
COLLECT_GCC=arm-linux-gnueabi-gcc
COLLECT_LTO_WRAPPER=/usr/lib/gcc/arm-linux-gnueabi/4.6/lto-wrapper
Target: arm-linux-gnueabi
Configured with: ../src/configure -v --with-pkgversion='Ubuntu/Linaro 4.6.3-1ubuntu5' --with-bugurl=file:///usr/share/doc/gcc-4.6/README.Bugs --enable-languages=c,c++,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-4.6 --enable-shared --enable-linker-build-id --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/arm-linux-gnueabi/include/c++/4.6.3 --libdir=/usr/lib --enable-nls --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --enable-gnu-unique-object --enable-plugin --enable-objc-gc --enable-multilib --disable-sjlj-exceptions --with-arch=armv7-a --with-float=softfp --with-fpu=vfpv3-d16 --with-mode=thumb --disable-werror --enable-checking=release --build=i686-linux-gnu --host=i686-linux-gnu --target=arm-linux-gnueabi --program-prefix=arm-linux-gnueabi- --includedir=/usr/arm-linux-gnueabi/include --with-headers=/usr/arm-linux-gnueabi/include --with-libs=/usr/arm-linux-gnueabi/lib
Thread model: posix
gcc version 4.6.3 (Ubuntu/Linaro 4.6.3-1ubuntu5) 
configure:2588: $? = 0
configure:2577: arm-linux-gnueabi-gcc -V >&5
arm-linux-gnueabi-gcc: fatal error: no input files
compilation terminated.
configure:2588: $? = 4
configure:2577: arm-linux-gnueabi-gcc -qversion >&5
arm-linux-gnueabi-gcc: fatal error: no input files
compilation terminated.
configure:2588: $? = 4
configure:2608: checking whether the C compiler works
configure:2630: arm-linux-gnueabi-gcc -O3 -m32 -s -w   conftest.c  >&5
cc1: error: unrecognized command line option '-m32'
configure:2634: $? = 1
configure:2672: result: no
configure: failed program was:
| /* confdefs.h */
| #define PACKAGE_NAME "commserver"
| #define PACKAGE_TARNAME "commserver"
| #define PACKAGE_VERSION "3.2"
| #define PACKAGE_STRING "commserver 3.2"
| #define PACKAGE_BUGREPORT ""
| #define PACKAGE_URL ""
| #define PACKAGE "commserver"
| #define VERSION "3.2"
| /* end confdefs.h.  */
| 
| int
| main ()
| {
| 
|   ;
|   return 0;
| }
configure:2677: error: in `/home/ear-it/Desktop/smartsantander/commserver/build':
configure:2679: error: C compiler cannot create executables
See `config.log' for more details

## ---------------- ##
## Cache variables. ##
## ---------------- ##

ac_cv_env_CC_set=
ac_cv_env_CC_value=
ac_cv_env_CFLAGS_set=
ac_cv_env_CFLAGS_value=
ac_cv_env_CPPFLAGS_set=
ac_cv_env_CPPFLAGS_value=
ac_cv_env_LDFLAGS_set=
ac_cv_env_LDFLAGS_value=
ac_cv_env_LIBS_set=
ac_cv_env_LIBS_value=
ac_cv_env_build_alias_set=set
ac_cv_env_build_alias_value=i686-pc-linux-gnu
ac_cv_env_host_alias_set=set
ac_cv_env_host_alias_value=arm-linux-gnueabi
ac_cv_env_target_alias_set=set
ac_cv_env_target_alias_value=i686-pc-linux-gnu
ac_cv_path_install='/usr/bin/install -c'
ac_cv_path_mkdir=/bin/mkdir
ac_cv_prog_AWK=mawk
ac_cv_prog_CC=arm-linux-gnueabi-gcc
ac_cv_prog_STRIP=arm-linux-gnueabi-strip
ac_cv_prog_make_make_set=yes

## ----------------- ##
## Output variables. ##
## ----------------- ##

ACLOCAL='${SHELL} /home/ear-it/Desktop/smartsantander/commserver/missing --run aclocal-1.11'
AMDEPBACKSLASH=''
AMDEP_FALSE=''
AMDEP_TRUE=''
AMTAR='$${TAR-tar}'
AUTOCONF='${SHELL} /home/ear-it/Desktop/smartsantander/commserver/missing --run autoconf'
AUTOHEADER='${SHELL} /home/ear-it/Desktop/smartsantander/commserver/missing --run autoheader'
AUTOMAKE='${SHELL} /home/ear-it/Desktop/smartsantander/commserver/missing --run automake-1.11'
AWK='mawk'
CC='arm-linux-gnueabi-gcc'
CCDEPMODE=''
CFLAGS='-O3 -m32 -s -w'
CPPFLAGS=''
CYGPATH_W='echo'
DEFS=''
DEPDIR=''
ECHO_C=''
ECHO_N='-n'
ECHO_T=''
EXEEXT=''
INSTALL_DATA='${INSTALL} -m 644'
INSTALL_PROGRAM='${INSTALL}'
INSTALL_SCRIPT='${INSTALL}'
INSTALL_STRIP_PROGRAM='$(install_sh) -c -s'
LDFLAGS=''
LIBOBJS=''
LIBS=''
LTLIBOBJS=''
MAKEINFO='${SHELL} /home/ear-it/Desktop/smartsantander/commserver/missing --run makeinfo'
MKDIR_P='/bin/mkdir -p'
OBJEXT=''
PACKAGE='commserver'
PACKAGE_BUGREPORT=''
PACKAGE_NAME='commserver'
PACKAGE_STRING='commserver 3.2'
PACKAGE_TARNAME='commserver'
PACKAGE_URL=''
PACKAGE_VERSION='3.2'
PATH_SEPARATOR=':'
SET_MAKE=''
SHELL='/bin/bash'
STRIP='arm-linux-gnueabi-strip'
VERSION='3.2'
ac_ct_CC=''
am__EXEEXT_FALSE=''
am__EXEEXT_TRUE=''
am__fastdepCC_FALSE=''
am__fastdepCC_TRUE=''
am__include=''
am__isrc=' -I$(srcdir)'
am__leading_dot='.'
am__nodep=''
am__quote=''
am__tar='$${TAR-tar} chof - "$$tardir"'
am__untar='$${TAR-tar} xf -'
bindir='${exec_prefix}/bin'
build_alias='i686-pc-linux-gnu'
datadir='${datarootdir}'
datarootdir='${prefix}/share'
docdir='${datarootdir}/doc/${PACKAGE_TARNAME}'
dvidir='${docdir}'
exec_prefix='NONE'
host_alias='arm-linux-gnueabi'
htmldir='${docdir}'
includedir='${prefix}/include'
infodir='${datarootdir}/info'
install_sh='${SHELL} /home/ear-it/Desktop/smartsantander/commserver/install-sh'
libdir='${exec_prefix}/lib'
libexecdir='${exec_prefix}/libexec'
localedir='${datarootdir}/locale'
localstatedir='${prefix}/var'
mandir='${datarootdir}/man'
mkdir_p='/bin/mkdir -p'
oldincludedir='/usr/include'
pdfdir='${docdir}'
prefix='/linux_arm_tool'
program_transform_name='s,x,x,'
psdir='${docdir}'
sbindir='${exec_prefix}/sbin'
sharedstatedir='${prefix}/com'
sysconfdir='${prefix}/etc'
target_alias='i686-pc-linux-gnu'

## ----------- ##
## confdefs.h. ##
## ----------- ##

/* confdefs.h */
#define PACKAGE_NAME "commserver"
#define PACKAGE_TARNAME "commserver"
#define PACKAGE_VERSION "3.2"
#define PACKAGE_STRING "commserver 3.2"
#define PACKAGE_BUGREPORT ""
#define PACKAGE_URL ""
#define PACKAGE "commserver"
#define VERSION "3.2"

configure: exit 77 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T14:50:38.197

见`unrecognized command line option '-m32'`。您不会将*-m32*传递给**ARM**编译器。这很可能是包中的一个错误，或者可能是您正在做的事情`configure`。从*Makefile.in*或*包*中的任何位置删除它。

## 如何读取*config.log*

当您开始使用*config.log时，它尤其不直观。*文件末尾有一大段用于`configure`转储所有**变量**。您必须继续向上滚动，直到找到实际失败的命令。一些向后搜索的短语是*缓存变量。*并*参见“config.log”了解更多详情*。一般来说，此时会显示一些程序，编译选项和输出。在上面的示例中，您可以在此处找到*-m32*被拒绝的地方。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T09:25:18.073

该行：

```
./configure --host=arm-linux-gnueabi --prefix=${CSTOOL_DIR}/linux_arm_tool 
```

为我工作。我已经用这种方式编译了很多库。我的猜测是，您要构建的软件包的 autoconf 脚本已损坏。

# web-services - 使用 Jibx2WSDL 从 java 生成 wsdl

> ID：16188230
> 
> 赞同：1
> 
> 时间：2013-04-24T09:22:22.270
> 
> 标签：web-services, cxf, axis2, wsdl2java, jibx

我正在使用`jibx2wsdl`插件`wsdl`从`java`.

但是对于 java 集合列表，我得到所有列表的相同名称。

每次我生成`jibx`我手动重命名列表。

有没有解决办法。

如果其他一些库（cxf、xmlbeans、watever ..）不存在这个问题，也请告诉我。

这是我的 wsdl for java 列表中的一个示例。

```
<collection field="reportingYearList" usage="optional" create-type="java.util.ArrayList">

<value name="**string**" type="java.lang.String">

<collection> 
```

# vim - 如何在 Vim 中给 nmap 一个关键变量？

> ID：16188232
> 
> 赞同：1
> 
> 时间：2013-04-24T09:22:26.820
> 
> 标签：vim

我刚得到答案，可以通过键入以给定字符开头跳到行

`/`+ ^[字符]

但我认为它没有`f`跳到一行中的字符那么快。所以我想将它映射到一个组合键，比如

`go`+ [字符]

通过做类似的事情`.vimrc`

`nmap go<expr> /^<expre>`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T09:36:32.173

见`:help map-expression`; 您可以使用以下命令查询单个字符`getchar()`：

```
:nnoremap <expr> go '/^' . nr2char(getchar()) . '<CR>' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:35:39.503

很难直接映射这个函数。因为字母/字符可以是任何东西。

但是这个小功能可能对您有用：

```
function! GoToLine()
    call inputsave()
    let c= input('Enter chars:')
    call inputrestore()
    call search ('^' . c)
    let @/ = '^'.c
endfunction 
```

您可以映射例如：

```
nnoremap <leader>go call GoToLine() 
```

然后输入您需要的字符，该功能会将您带到那里。这样，您可以输入多个字符。

希望能帮助到你。

# java - 重用mysql查询

> ID：16188236
> 
> 赞同：1
> 
> 时间：2013-04-24T09:22:42.903
> 
> 标签：java, mysql

我有多个查询，其中我会做一些任务。

例如：

```
<pre>
select * from test 
where something
if check A
if check B
if check C
compare something.
For one table.
</pre> 
```

同样，我对不同的表还有许多其他查询。

```
<pre>
select * from test 
where something
if check A
if check B
if check C
compare something.
</pre>

currently i am using reference. 

    select * from test 
    where something

<pre>
&lt;include refId="test"/&gt;
</pre>

<sql id="test">
if check A
if check B
if check C
compare something
</sql> 
```

有没有其他更好的方法来做到这一点。查询的返回类型也是哈希映射。

我想知道我们是否可以创建一个函数或方法，我们可以将一些值作为列名或行名传递，然后执行以下操作而不是编写多个查询？

更多信息：实际上我正在寻找一种方法来编写一次查询并一直使用它而无需多次输入，正如我之前告诉你的那样，我目前正在使用参考来做到这一点。但我正在寻找一种不需要使用不同的选择语句然后调用包含标记的方法。相反，我想编写一个函数，我可以将表名或列名从 java 控制器类传递到 xml 或查询文件。因此它可以接收这些值，然后考虑这些输入并采取相应的行动。

像上面一样，我必须从不同的表中执行或提取详细信息，但所有查询中的条件几乎相同。所以我想创建一个函数，我可以在其中发送表从哪里选择和选择什么，然后条件应该是一般的，我可以传递值，然后它应该为所有人做 wrk。

示例代码：

```
<select id="searchPatientAdmissionByDates" resultType="hashMap" parameterType="hashMap">
    SELECT COUNT(DISTINCT(admission_details.PATIENT_ID)) AS CASECOUNT
    FROM admission_details,patient
    WHERE
    admission_details.PATIENT_ID = patient.id
    <if test="admissionDate !=null">
        AND
        FROM_DATE &gt;= #{admissionDate}
    </if>
    <if test="admissionDateThru !=null">
        AND
        FROM_DATE &lt;= #{admissionDateThru}
    </if>
    <if test="dischargeDate !=null">
        AND
        THRU_DATE &gt;= #{dischargeDate}
    </if>
    <if test="dischargeDateThru !=null">
        AND
        THRU_DATE &lt;= #{dischargeDateThru}
    </if>
</select> 
```

这是一个查询，有一些条件。与此查询类似，有许多具有相同 if 条件但表不同的查询。所以我想创建一个函数，我可以在其中传递值，并且该函数应该适用于具有相同条件的所有查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:07:31.327

这是我看到很多人试图解决的问题。

我见过的一般模式是通过检查一堆对象属性来动态创建 SQL 查询。有点像

```
UserSearchFilter filter = new UserSearchFlter().
filter.setFirstName("John");
filter.setJobTitle("CFO");

List<User> users = userDao.search(filter); 
```

DAO 只对每个已知属性使用 if 语句，如果检测到，则相应地添加 WHERE 子句。

这通常会在一段时间内运作良好。最终，性能调优变得很困难，因为代码中有太多路径。

有时，最好不要通过 where 子句，而是通过子查询或内部连接条件来完成特定的过滤器。有时，当且仅当使用特定过滤条件时，您才需要有条件地连接其他表。有时，您需要使用一个`WITH`因子来提取一堆记录，然后在稍后的查询中加入它们，这样可能会执行得更好。

在这种情况下，您会希望对每个条件都有一个单独的固定查询。

当然，现在，对每一个小一次性的单独查询可能同样不利于维护。我一直在这两个方面，我努力破译过去优雅的代码，但由于条件的数量而变成了意大利面条代码，而且我在每个小区域都有相同的 SQL，没有重复使用。

就像生活中的大多数事情一样，你可以达到一个健康的平衡。

# php - 在执行文件时，如何在控制台中使用带有 php 输出的 Ant 脚本执行 PHP 文件

> ID：16188242
> 
> 赞同：0
> 
> 时间：2013-04-24T09:23:06.893
> 
> 标签：php, apache, ant, exec

我的蚂蚁脚本

```
<target name="testRunPHP">
    <exec executable="${php}" failonerror="true" dir="${source}">
            <arg line="${local.deploydir}/application/controllers/sleepTest.php"/>
            <arg line="-output" />
    </exec>
</target> 
```

我的 sleepTest.php

```
header( 'Content-type: text/html; charset=utf-8' );
header("Cache-Control: no-cache, must-revalidate");
header ("Pragma: no-cache");
set_time_limit(0);
apache_setenv('no-gzip', 1);
ini_set('zlib.output_compression', 0);
ini_set('implicit_flush', 1);
for ($i = 0; $i < 10; $i++) { 
    $randSlp=rand(1,3);
    echo "Sleeping for ".$randSlp." second. ";;
    sleep($randSlp);
    if(ob_get_level()>0)
       ob_end_flush(); 
}
ob_implicit_flush(1); 
```

如果在浏览器中运行文件而不是在执行文件时显示输出，
但在执行完成后在 ant 脚本中显示输出（在控制台中）。
我想在文件处理过程中在控制台中显示回显...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T10:23:13.117

Exec 将每一行输出到标准输出。您的 php 脚本中的问题是您将其输出到一行。您需要做的就是在`echo "Sleeping for ".$randSlp." second. \n";`. 我已经用这些脚本对此进行了测试：

构建.xml

```
<project name="exectest" default="test">

    <dirname property="build.dir" file="${ant.file}" />

    <target name="test">

            <exec executable="cmd">
                <arg value="/c" />
                <arg value="C:\wamp\bin\php\php5.3.13\php.exe" />
                <arg value="${build.dir}\test.php" />
            </exec>

    </target>

</project> 
```

测试.php

```
<?php

header( 'Content-type: text/html; charset=utf-8' );
header("Cache-Control: no-cache, must-revalidate");
header ("Pragma: no-cache");
set_time_limit(0);
apache_setenv('no-gzip', 1);
ini_set('zlib.output_compression', 0);
ini_set('implicit_flush', 1);
for ($i = 0; $i < 10; $i++) { 
    $randSlp=rand(1,3);
    echo "Sleeping for ".$randSlp." second. \n";
    sleep($randSlp);
    if(ob_get_level()>0)
       ob_end_flush(); 
}
ob_implicit_flush(1);

?> 
```

# javascript - 如何通过动态 ecma/javascript 表达式生成 vxml 标签

> ID：16188243
> 
> 赞同：0
> 
> 时间：2013-04-24T09:23:12.140
> 
> 标签：javascript, ecmascript-5, ecma262, vxml

我在以下情况下遇到问题：我的 vxml 有以下代码段：

```
<block> 
<script src="myscript.es"/> 
<audio> <value expr="temp()"/> </audio> 
<exit/> 
</block> 
```

**myscript.es：**

```
function temp(){ 
var delay = new String("abc <break time='2000ms'/> pqr"); 
return delay; 
} 
```

评估的表达式不被视为标记，而是如下所示：添加 <break time='2000ms'/> bbb

有没有办法从 ecmascript 表达式动态生成标签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T15:54:21.073

您的示例至少有几个问题。首先，值标记中使用的表达式的结果不应返回中断元素，仅返回您希望文本转语音引擎语音回复的项目。你需要做这样的事情来在两个值之间插入一个中断。

```
<form id="F1"> 
  <var name="Color1" expr="'red'"/> 
  <var name="Color2" expr="'blue'"/> 
  <block> 
    <prompt> 
       My favorite colors are  
       <value expr="Color1"/>
       <break time="2000ms"/>
       <value expr="Color2"/>
    </prompt> 
  </block> 
</form> 
```

而且您不能在 VoiceXML 中使用 ECMA 脚本生成标签。要动态生成标签，您必须使用您喜欢的 Web 技术，例如 ASP.NET、JSP 或 PHP 作为示例。

如果您是 VoiceXML 的新手并且熟悉 ASP.NET MVC，那么您可以使用一个名为[VoiceModel](https://voicemodel.codeplex.com/)的开源项目来生成动态 VoiceXML，而无需了解 VoiceXML 语法。

# iphone - FBLoginView 拒绝某些用户

> ID：16188245
> 
> 赞同：2
> 
> 时间：2013-04-24T09:23:14.873
> 
> 标签：iphone, ios, facebook, sdk, facebook-ios-sdk

我在我的项目中使用最新的 Facebook iOS SDK。我已经按照他们自己的指南使用 FBLoginView 成功实现了 Facebook 登录： [https ://developers.facebook.com/ios/login-ui-control/](https://developers.facebook.com/ios/login-ui-control/)

这适用于大多数人，但是有些人遇到无法登录的问题 - 收到一条错误消息，提示他们需要接受所需的权限才能登录。即使他们明确接受这些权限！

我使用与上述链接（靠近页面底部）的示例相同的错误处理，并且似乎触发了 FBErrorCategoryUserCancelled 类型的错误。

我无法在模拟器和 iPhone 上模拟我的任何 Facebook 帐户上的错误。然而，很多人都在遇到这个问题，但没有任何重要的共同点。我应该怎么办？

**4月24日更新**

My`WelcomeViewController`是处理 Facebook 登录的视图。在`.m`文件中，我有以下用于处理权限的代码：

```
- (void)viewDidLoad
{    
    [super viewDidLoad];

    // Facebook login permissions
    loginView.readPermissions = @[@"email"];
    loginView.publishPermissions = @[@"publish_actions"];
    loginView.defaultAudience = FBSessionDefaultAudienceFriends;

} 
```

**更新 4 月 24 日第 2 部分**

在我的测试人员的帮助下，我已经定位了问题。遇到登录问题的每个人都已将 Facebook 与 iOS 集成 - 也就是说，他们在 iOS 上使用 Facebook 登录（在设置 -> Facebook 下）。一旦禁用此功能 - 他们就可以登录。这是 SDK 中的错误还是我该如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:39:16.443

在 facebook 的应用程序设置中将沙盒模式设置为禁用。![在此处输入图像描述](https://i.stack.imgur.com/onREr.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:43:13.977

如已[接受的对具有类似问题的问题的回答中所述，](https://stackoverflow.com/a/12687112/653513)您应该只在登录时请求读取权限。

另请参阅[iOS 6 集成](https://developers.facebook.com/docs/howtos/ios-6/)文档。

仅当用户实际尝试发布某些内容时才应请求发布权限 - 这也会带来更好的用户体验（这样用户不会感觉到您的应用程序将以他的名义自行发布。

# java - SVN 符号链接对 Linux 和 Windows 透明

> ID：16188248
> 
> 赞同：0
> 
> 时间：2013-04-24T09:23:25.123
> 
> 标签：java, svn, maven

这就是我的 SVN 现在的样子

```
SVN
 + trunk
     + src
     + pom.xml 
```

我想添加

```
 + trunk_alternative_pom
     + src -> SVN/trunk/src
     + pom.xml 
```

因此，当我更新项目（在 Linux 或 Windows 中）时，看起来两个“src”文件夹完全不相关，尽管在幕后（在 SVN 内部）它们是相同的。

重要的是原始主干没有修改单个字节。假设我无法将 pom_alternative.xml 添加到主干并使用 -f 参数运行 Maven，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:04:27.143

您将需要使用svn : [externals](http://svnbook.red-bean.com/en/1.7/svn.advanced.externals.html)指向`trunk_alternative_pom/src``SVN/trunk/src`

如果所有客户端都使用类 UNIX 操作系统（Linux、MacOS 等），您可以使用符号链接，但 Windows 上的 SVN 不支持符号链接（并且 NTFS 仅在 Windows Vista 中开始支持它）。

# sql - 为什么SQL脚本可以在本地环境运行，但不能在其他服务器上运行

> ID：16188251
> 
> 赞同：0
> 
> 时间：2013-04-24T09:23:40.657
> 
> 标签：sql, sql-server

我编写了一个 SQL 脚本来将名称映射到报告名称。我已经在我的本地 SQL Server 2012 机器上进行了验证。它运作良好。但是，当我在服务器中运行时，出现错误

> 消息 537，级别 16，状态 3，行 40
> 传递给 LEFT 或 SUBSTRING 函数的长度参数无效。

而且我还尝试直接在远程服务器中运行“选择”部分，结果也是正确的。我不明白为什么它是错误的。有什么想法吗？（注意：我在错误行中添加了“error here-->”）

```
DECLARE @jobTable TABLE 
(
  job_name nvarchar(max),
  report_name nvarchar(max),
  event_type nvarchar(max),
  description nvarchar(max),
  last_run_date int,
  last_run_time int
)

declare
  @job_name uniqueidentifier,
  @report_name nvarchar(max),
  @event_type nvarchar(max),
  @description nvarchar(max),
  @last_run_date int,
  @last_run_time int,
  @last_run_dur int

/************** alert ********/
declare getId_alertjob_cursor cursor for (
     SELECT 
       [jobs].[name] job_name,
       alertFeed.relativePath report_name,
         CONVERT(nvarchar(max), SUBSTRING([steps].[command], CHARINDEX(' @EventType=''', [steps].[command], 0) + LEN(' @EventType='''), CHARINDEX('''', [steps].[command], CHARINDEX(' @EventType=''', [steps].[command]) + LEN(' @EventType=''')) - CHARINDEX(' @EventType=''', [steps].[command], 0) - LEN(' @EventType=''')), 0) event_type,
       [steps].[last_run_date] last_date,
       [steps].[last_run_time] last_time,
       [steps].[last_run_duration] last_dur
       FROM [msdb].[dbo].[sysjobs] [jobs] INNER JOIN [msdb].[dbo].[sysjobsteps] [steps] ON [jobs].[job_id] = [steps].[job_id], ReportingService_4c0ed75e1e8c4e50acbf853867f071f3_Alerting.dbo.AlertDefinition [alertDef], ReportingService_4c0ed75e1e8c4e50acbf853867f071f3_Alerting.dbo.Feed [alertFeed]
       WITH (NOLOCK)
       WHERE [jobs].[name] <> 'syspolicy_purge_history' 
       and alertDef.scheduleid = CONVERT(nvarchar(max), SUBSTRING([steps].[command], CHARINDEX(' @EventData=''', [steps].[command], 0) + LEN(' @EventData='''), CHARINDEX('''', [steps].[command], CHARINDEX(' @EventData=''', [steps].[command]) + LEN(' @EventData=''')) - CHARINDEX(' @EventData=''', [steps].[command], 0) - LEN(' @EventData=''')), 0)
       and alertDef.FeedId = alertFeed.FeedId
);

open getId_alertjob_cursor 
error here-->    fetch next from getId_alertjob_cursor INTO   @job_name,   @report_name,  @event_type,  @last_run_date,  @last_run_time, @last_run_dur

while @@FETCH_STATUS = 0
BEGIN
--     INSERT INTO @jobTable VALUES (@job_name, @report_name, @event_type,'Alert',0,0);
--   ,@last_run_date,@last_run_time);
     fetch next from getId_alertjob_cursor INTO   @job_name,   @report_name,  @event_type,  @last_run_date,  @last_run_time,@last_run_dur
END

close getId_alertjob_cursor
deallocate getId_alertjob_cursor 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:35:07.880

我怀疑这是因为有些作业的步骤不包含该短语`@EventType='`，这导致您的子字符串失败。

添加一个快速签入以确保它首先存在，如下所示：

```
Case 
        When CHARINDEX(' @EventType=''', [steps].[command]) > 0 Then
        CONVERT(nvarchar(max), SUBSTRING([steps].[command], CHARINDEX(' @EventType=''', [steps].[command], 0) + LEN(' @EventType='''), CHARINDEX('''', [steps].[command], CHARINDEX(' @EventType=''', [steps].[command]) + LEN(' @EventType=''')) - CHARINDEX(' @EventType=''', [steps].[command], 0) - LEN(' @EventType=''')), 0) 
        Else ''
        End as [EventType] 
```

刚刚注意到你的 WHERE 子句中有这个：

```
and alertDef.scheduleid = CONVERT(nvarchar(max), SUBSTRING([steps].[command], CHARINDEX(' @EventData=''', [steps].[command], 0) + LEN(' @EventData='''), CHARINDEX('''', [steps].[command], CHARINDEX(' @EventData=''', [steps].[command]) + LEN(' @EventData=''')) - CHARINDEX(' @EventData=''', [steps].[command], 0) - LEN(' @EventData=''')), 0) 
```

您还应该添加一个检查以查看该`command`字段是否包含`@EventData`

也许如果您尝试解释您要达到的目标，那么某人可能会发布更好的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:45:35.543

首先，我想提一下，在这种情况下不需要使用游标。即您的查询可以简化为以下内容：

```
DECLARE @jobTable TABLE 
(
      job_name SYSNAME
    , report_name SYSNAME
    , event_type NVARCHAR(1000)
    , [description] NVARCHAR(2000)
    , last_run_date INT
    , last_run_time INT
)

INSERT INTO @jobTable 
(
      job_name
    , report_name
    , event_type
    , last_run_date
    , last_run_time
)
SELECT 
      d.job_name
    , report_name = alertFeed.relativePath
    , d.event_type
    , d.last_date
    , d.last_time
FROM (
    SELECT 
          job_name = j.[name] 
        , event_type = CASE WHEN CHARINDEX(' @EventType=''', s.[command]) > 0 
            THEN CONVERT(NVARCHAR(MAX), SUBSTRING(s.[command], CHARINDEX(' @EventType=''', s.[command], 0) + LEN(' @EventType='''), CHARINDEX('''', s.[command], CHARINDEX(' @EventType=''', s.[command]) + LEN(' @EventType=''')) - CHARINDEX(' @EventType=''', s.[command], 0) - LEN(' @EventType=''')), 0) 
            ELSE ''
          END
        , last_date = s.[last_run_date] 
        , last_time = s.[last_run_time] 
    FROM [msdb].dbo.sysjobs j WITH (NOLOCK)
    JOIN [msdb].dbo.sysjobsteps s WITH (NOLOCK) ON j.job_id = s.job_id 
    WHERE j.[name] != 'syspolicy_purge_history' 
) d
JOIN [ReportingService_4c0ed75e1e8c4e50acbf853867f071f3_Alerting].dbo.AlertDefinition [alertDef] ON alertDef.scheduleid = event_type
JOIN [ReportingService_4c0ed75e1e8c4e50acbf853867f071f3_Alerting].dbo.Feed [alertFeed] ON alertDef.FeedId = alertFeed.FeedId 
```

此外，我对数据库 [ReportingService_..._Alerting] 感到不安。如果它位于执行任务的同一台服务器上，则可能值得拒绝使用数据库。

# jquery - 在选定页面中打开的图库图像

> ID：16188253
> 
> 赞同：-2
> 
> 时间：2013-04-24T09:23:44.233
> 
> 标签：jquery, html, css, jquery-mobile, thumbnails

我有一个缩略图库，我想在带有反向链接的预览页面中打开每个大图像。请建议我该怎么做。

html

```
<ul>
    <li>
        <a href="big image link"><img src="thumb nail image"/></a>
    </li>
    <li>
        <a href="big image link"><img src="thumb nail image"/></a>
    </li>
    ....
</ul> 
```

想在 html 的预览页面中打开大图

```
<div>
    <a href="back">Go back</a>
    <img src="holder for big image" />
</div> 
```

请建议..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:48:32.300

如果你想使用 jquery，这会让你开始：

html:

```
<div id="holder"></div>
<ul><li><img class="pointer" src="http://bit.ly/Yx18em"/></li></ul> 
```

CSS：

```
#holder{
    position: absolute;
    display: none;
}

li{
    list-style: none;
}

li img{
    width:25px;
    height: auto;
}

.pointer{
    cursor: pointer;
    cursor: hand;
} 
```

jQuery：

```
$("ul img").click(function() {
  $('#holder').html(
      '<img src="'+$(this).attr('src') 
      +'"><span id="close" class="pointer">back</span>'
  ).show();
  $("#close").click(function() {
      $(this).parent().hide();
  });  
}); 
```

工作示例：http: [//jsfiddle.net/qLEZ6/2/](http://jsfiddle.net/qLEZ6/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:37:40.240

使用插件 [Photoswipe怎么样](http://www.photoswipe.com/)

[这个](http://www.photoswipe.com/latest/examples/04-jquery-mobile.html)例子准确地展示了你在寻找什么。

# c++ - 如何从主类中调用 C++ 中的函数？

> ID：16188254
> 
> 赞同：-1
> 
> 时间：2013-04-24T09:23:49.097
> 
> 标签：c++, c

这是主文件：

```
// ConsoleApplication7.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"
#include "targetver.h"

//void  __video_encode_example(const char *filename);

int _tmain(int argc, _TCHAR* argv[])
{

    //__video_encode_example("adi.avi");
    return 0;
} 
```

我尝试使用以下方法调用该函数：

```
void  __video_encode_example(const char *filename);
__video_encode_example("adi.avi"); 
```

但我遇到了一些错误。

这是我试图调用它的内部函数的类：

```
#define FF_API_AVCODEC_OPEN 1
#ifdef __cplusplus
   extern "C"

#include  "libavcodec\avcodec.h"
#include "libavutil\mathematics.h"

void video_encode_example(const char *filename)
 {
     AVCodec *codec;
     AVCodecContext *c= NULL;
     int i, out_size, size, x, y, outbuf_size;
     FILE *f;
     AVFrame *picture;
     uint8_t *outbuf;
     int n;

     printf("Video encoding\n");

     /* find the mpeg1 video encoder */
     codec = avcodec_find_encoder(CODEC_ID_MPEG1VIDEO);

     if (!codec) {
         fprintf(stderr, "codec not found\n");
         exit(1);
     }

     c = avcodec_alloc_context3(codec);
     picture= avcodec_alloc_frame();

     /* put sample parameters */
     c->bit_rate = 400000;
     /* resolution must be a multiple of two */
     c->width = 352;
     c->height = 288;
     /* frames per second */
     //c->time_base= (AVRational){1,25};
     c->time_base.num=1;c->time_base.den=25;

     c->gop_size = 10; /* emit one intra frame every ten frames */
     c->max_b_frames=1;
     c->pix_fmt = PIX_FMT_YUV420P;

     /* open it */
     if (avcodec_open(c, codec) < 0) {
         fprintf(stderr, "could not open codec\n");
         exit(1);
     }

     //f = fopen(filename, "wb");

     n = fopen_s(&f,filename, "wb");

     if (!f) {
         fprintf(stderr, "could not open %s\n", filename);
         exit(1);
     }

     /* alloc image and output buffer */
     outbuf_size = 100000;
     outbuf = (uint8_t*)malloc(outbuf_size);

     /* the image can be allocated by any means and av_image_alloc() is
      * just the most convenient way if av_malloc() is to be used */

     //av_image_alloc(picture->data, picture->linesize,
       //             c->width, c->height, c->pix_fmt, 1);
     picture->data[0] = (uint8_t*)av_malloc(1000000);
     picture->data[1] = (uint8_t*)av_malloc(1000000);
     picture->data[2] = (uint8_t*)av_malloc(1000000);
     picture->data[3] = (uint8_t*)av_malloc(1000000);
     picture->data[4] = (uint8_t*)av_malloc(1000000);
     picture->data[5] = (uint8_t*)av_malloc(1000000);
     picture->data[6] = (uint8_t*)av_malloc(1000000);
     picture->data[7] = (uint8_t*)av_malloc(1000000);

     /* encode 1 second of video */
     for(i=0;i<25;i++) {
         fflush(stdout);
         /* prepare a dummy image */
         /* Y */
         for(y=0;y<c->height;y++) {
             for(x=0;x<c->width;x++) {
                 picture->data[0][y * picture->linesize[0] + x] = x + y + i * 3;
             }
         }

         /* Cb and Cr */
         for(y=0;y<c->height/2;y++) {
             for(x=0;x<c->width/2;x++) {
                 picture->data[1][y * picture->linesize[1] + x] = 128 + y + i * 2;
                 picture->data[2][y * picture->linesize[2] + x] = 64 + x + i * 5;
             }
         }

         /* encode the image */
         out_size = avcodec_encode_video(c, outbuf, outbuf_size, picture);
         printf("encoding frame %3d (size=%5d)\n", i, out_size);
         fwrite(outbuf, 1, out_size, f);
     }

     /* get the delayed frames */
     for(; out_size; i++) {
         fflush(stdout);

         out_size = avcodec_encode_video(c, outbuf, outbuf_size, NULL);
         printf("write frame %3d (size=%5d)\n", i, out_size);
         fwrite(outbuf, 1, out_size, f);
     }

     /* add sequence end code to have a real mpeg file */
     outbuf[0] = 0x00;
     outbuf[1] = 0x00;
     outbuf[2] = 0x01;
     outbuf[3] = 0xb7;
     fwrite(outbuf, 1, 4, f);
     fclose(f);
     free(outbuf);

     avcodec_close(c);
     av_free(c);
     av_free(picture->data[0]);
     av_free(picture);
     printf("\n");
     #endif 
```

问题是如何在 main 中声明和使用函数？

现在，如果我编译它，我没有任何错误，但是当我尝试在 main 中调用和使用该函数时，我遇到了一些错误。

**编辑**

这是我在尝试在 main 中声明和调用函数时遇到的错误：

> 错误 1 ​​错误 LNK2019：函数 wmain 中引用的未解析外部符号“void __cdecl __video_encode_example(char const *)”(?__video_encode_example@@YAXPEBD@Z)

和：

> 错误 2 错误 LNK1120: 1 未解决的外部

我没有添加任何标题或其他内容，这是具有上述函数的类，这就是我尝试从类中声明和调用函数的方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T09:34:41.317

我认为`extern "C"`定义不正确。使用前

```
#ifdef __cplusplus 
extern "C" {
#endif 
```

在函数定义之前和

```
#ifdef __cplusplus 
}
#endif 
```

在它之后。它应该围绕函数定义，不包含`#include`s。通常一个表现良好的头文件无论如何都会包含这些行。你`#endif`就在函数定义结束之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:37:30.793

您应该将头文件#include 到您的 main.cpp 中。可能是这样的：

//文件：__video_encode_example.h

```
#ifndef VEE_H_
#define VEE_H_

void  __video_encode_example(const char *filename);  //here's your declaration.

#endif 
```

//文件：__video_encode_example.cpp

```
#include "__video_encode_example.h"
void video_encode_example(const char *filename){

   // your implementation code here.

} 
```

//文件：main.cpp

```
#include "__video_encode_example.h"
int main(int argc, char **argv){

__video_encode_example("adi.avi");  // use your function here.

} 
```

希望有所帮助。

# java - 对访问在另一个类中创建的对象感到困惑

> ID：16188256
> 
> 赞同：-1
> 
> 时间：2013-04-24T09:23:53.613
> 
> 标签：java, class, instance, getter

```
public static void main(String[] args) {
 ReadAuthor ReadAuth = new ReadAuthor();
 ReadCommands readCom = new ReadCommands(); } 
```

在 ReadARticles 类中，我有一个创建文章**数组**列表的方法。

```
 public class ReadArticles {
 public ArrayList<Article> articleList = new ArrayList<Article>();

 while(i=0;i<line number;,++){
       public void readDaFile(){
           articleList.add( new Article(ID,name,publisherName,publishYear));
            } 
```

从`ReadCommands`class ，我调用`ReadArt.readDaFile`（读取但也创建arraylist）。

```
 public class ReadCommands {
    ReadArticles readArt = new ReadArticles();
       public void readDaFile(){
             readArt.tryOpeningOrDieTrying(filename);
             readArt.readDaFile(); } 
```

我的问题是；从主要的，我可以到达`articlelist`；

```
 System.out.println(readCom.readArt.articleList.get(20).getPublisherName()); 
```

或者

```
 System.out.println(readCom.getArticleList().size()); 
```

但是我无法从`readAuthor`类中访问文章列表（为阅读作者和为他们创建数组列表而创建的另一个类。

我什至尝试在两个和类中创建`getter`for以确保但仅适用于 main。我的目标是从 ReadAuthor 类中查看 articleList。`ArticleList``ReadCommands``ReadArticles``getters`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:56:53.447

`ReadAuthor`并且`ReadCommands`可能不在同一个包中。

`ReadArticles readArt` `public`进入_`ReadCommands`

由于没有指定访问修饰符，默认值为“包保护”。

[你可以在这里](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)阅读更多关于它的信息。

# sql-server - 在sql server中使用like查询二进制列

> ID：16188257
> 
> 赞同：9
> 
> 时间：2013-04-24T09:23:54.240
> 
> 标签：sql-server, sql-server-2008

我正在使用 SQL Server 2008。在我的表中，我有一个名为`TestData`type的列`binary`。

TestData 列中的样本数据是

```
1\. 0x0001DC780C0030373156635D0C00B8840301009A0600AC
2\. 0x0301DC780C0030373156385D0C006499C401009A0600AC 
```

在下面编写了两个查询以获取 TestData 以“0x0001”开头的行。但他们都没有工作。

```
SELECT * 
FROM T_TRANSACTION 
WHERE  CAST(Indicium AS nvarchar(MAX)) LIKE '0x0001%'

----No results found

SELECT * 
FROM T_TRANSACTION 
WHERE  CAST(Indicium AS nvarchar(MAX)) LIKE '0x0001%'

----Returns all the rows 
```

请更正查询以获得预期结果

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-24T09:34:33.870

不要转换它，但将其视为一个范围（就像您将日期时间值一样）

```
DECLARE @foo TABLE (TestData varbinary(100) NOT NULL);
INSERT @foo (TestData) VALUES
         (0x0001DC780C0030373156635D0C00B8840301009A0600AC),
         (0x0001AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA),
         (0x0001AFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF),
         (0x0301DC780C0030373156385D0C006499C401009A0600AC),
         (0x0301FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF),
         (0x0302000000000000000000000000000000000000000000);

SELECT *
FROM @foo
WHERE TestData >= 0x0001 AND TestData < 0x0002;

-- added more digit for clarity of what actually happens
SELECT *
FROM @foo
WHERE TestData >= 0x00010000 AND TestData < 0x00020000;

SELECT *
FROM @foo
WHERE TestData >= 0x0001AA AND TestData < 0x0001AB;

SELECT *
FROM @foo
WHERE TestData >= 0x0301 AND TestData < 0x0302; 
```

这具有能够在 TestData 上使用索引的好处

编辑，您只需指定所需数量的数字

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T09:58:53.483

对于领先的前缀 LIKE 比较，gbn 的答案就可以了。对于字符串搜索的**真正**LIKE 等价，您可以按如下方式使用 LIKE：（
*从 @gbn 借用架构和示例数据）*

```
DECLARE @foo TABLE (TestData varbinary(100) NOT NULL);
INSERT @foo (TestData) VALUES
         (0x0001DC780C0030373156635D0C00B8),
         (0x0001AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA),
         (0x0001AFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF),
         (0x0301DC780C0030373156385D0C006499C401009A0600AC),
         (0x0301FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF),
         (0x0302000000000000000000000000000000000000000000);

SELECT *
FROM @foo
WHERE CAST(TestData AS VARCHAR(MAX)) LIKE '%'+CAST(0xDC78 AS VARCHAR(MAX))+'%'; 
```

当您将二进制值转换为 VARCHAR 时，它所做的只是将原始位视为字符串流。它不会神奇地将其转换为字符串表示形式。考虑下面的例子：

```
select cast(0x41 as varchar(10));     -- Result: A
select cast(0x414263 as varchar(10)); -- Result: ABc 
```

因为字节 0x41 或序数 65 在标准拉丁代码页中是“A”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-31T09:28:34.383

不要将字节数组用作字符串，将其用作数字。

您需要做的就是：

> SELECT * FROM T_TRANSACTION WHERE Indicium >= 0x0001

或者如果你想得到一个特定的：

> SELECT * FROM T_TRANSACTION WHERE Indicium >=0x0001DC780C0030373156635D0C00B8840301009A0600AC

# c++ - 有符号整数溢出在 C++ 中仍然是未定义的行为吗？

> ID：16188263
> 
> 赞同：86
> 
> 时间：2013-04-24T09:24:05.397
> 
> 标签：c++, c++11, undefined-behavior, integer-overflow

众所周知，[有符号整数溢出是未定义的行为](https://stackoverflow.com/questions/4240748/allowing-signed-integer-overflows-in-c-c)。但是 C++11`cstdint`文档中有一些有趣的东西：

> 有符号整数类型，宽度分别为 8、16、32 和 64 位，没有填充位，**负值使用 2 的补码**（仅在实现直接支持该类型时提供）

[[见链接](http://en.cppreference.com/w/cpp/types/integer)]

这是我的问题：由于标准明确规定 for `int8_t`、`int16_t`和负数是 2 的补码，这些类型的溢出仍然是未定义的行为吗`int32_t`？`int64_t`

**编辑**我检查了 C++11 和 C11 标准，这是我发现的：

C++11，第 18.4.1 节：

> 头文件定义了与 C 标准中的 7.20 相同的所有函数、类型和宏。

C11，§7.20.1.1：

> typedef 名称`intN_t`指定宽度为 N、无填充位和二进制补码表示的有符号整数类型。因此，`int8_t`表示这样一个宽度正好为 8 位的有符号整数类型。

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-04-24T09:51:44.553

> 这些类型的溢出仍然是未定义的行为吗？

**是的。**根据 C++11 标准的第 5/4 段（关于一般的任何表达式）：

> 如果在计算表达式期间，结果未在数学上定义或不在其类型的可表示值范围内，**则行为未定义**。[...]

对这些有符号类型使用二进制补码表示这一事实并不意味着在评估这些类型的表达式时使用算术模 2^n。

另一方面，关于*无符号算术，标准明确规定（第 3.9.1/4 段）：*

> `unsigned`声明的无符号整数**应遵守算术模 2^n 的定律，**其中 n 是该特定整数大小的值表示中的位数

这意味着无符号算术运算的结果始终是“*数学定义*的”，并且结果始终在可表示的范围内；因此，5/4 不适用。脚注 46 解释了这一点：

> 46) 这意味着**无符号**算术不会溢出，因为不能由得到的无符号整数类型表示的结果以比得到的无符号整数类型可以表示的最大值大一的数字为模减少。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-04-24T09:54:59.703

仅仅因为一个类型被定义为使用 2s 补码表示，它并没有遵循该类型中的算术溢出被定义。

有符号算术溢出的未定义行为用于启用优化；例如，编译器可以假设 if `a > b`then`a + 1 > b`也；这在无符号算术中不成立，因为可能`a + 1`会环绕到`0`. 此外，某些平台可以在算术溢出时生成陷阱信号（参见例如[http://www.gnu.org/software/libc/manual/html_node/Program-Error-Signals.html](http://www.gnu.org/software/libc/manual/html_node/Program-Error-Signals.html)）；该标准继续允许这种情况发生。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T09:39:57.130

我敢打赌。

从标准文档（pg.4 和 5）：

> **1.3.24 未定义的行为**
> 
> 本国际标准没有要求的行为
> 
> [注：当本国际标准省略任何明确的行为定义或程序使用错误的构造或错误数据时，可能会出现未定义的行为。允许的未定义行为的范围从完全忽略具有不可预测结果的情况，到在翻译或程序执行期间以环境特征的记录方式表现（有或没有发出诊断消息），到终止翻译或执行（发出的诊断消息）。许多错误的程序结构不会产生未定义的行为；他们需要被诊断出来。--结束注]

# python - 从生成器中获取固定数量的项目

> ID：16188270
> 
> 赞同：6
> 
> 时间：2013-04-24T09:24:17.960
> 
> 标签：python, generator

从生成器获取固定数量的项目的最有效方法是什么？

我目前所做的是使用`zip`and `range`。在此示例中，我从生成器中获取大小为 3 的块。

```
def f():
  x = 0
  while x < 21:
    yield x
    x += 1

g = f()

while True:
  x = [i for _, i in zip(range(3), g)]
  if not x:
    break
  print x 
```

背景是我使用的数据库为查询结果提供了一个生成器对象。比我用数据填充一个固定大小的 numpy 数组并将其作为一批处理。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T09:25:24.760

使用[`itertools.islice`](http://docs.python.org/2/library/itertools.html#itertools.islice)：

```
import itertools

for elem in itertools.islice(f(), 3):
    print elem 
```

并直接进入您的 numpy 数组：

```
my_arr = np.array(itertools.islice(f(), 3)) 
```

# python-2.7 - 从实时视频流中捕获图像并使用 python 在静态文本框中显示图像

> ID：16188272
> 
> 赞同：2
> 
> 时间：2013-04-24T09:24:22.307
> 
> 标签：python-2.7, pythoncard, anpr

我正在使用停车摄像头，我需要从实时视频流中捕获车牌的图像。

我开发了一个 python GUI，我需要在同一个 GUI 中捕获和显示车牌的图像、文本。

任何人都可以帮助我开发基于 python 的基本功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-10T20:07:27.203

OpenCV 可能对此类任务有所帮助。这篇文章涵盖了类似的任务，并且可以为您提供一些关于如何解决该问题的灵感（但在 C++ 中）： [如何使用 OpenCV 从图像中提取文本行](https://stackoverflow.com/questions/19128253/how-to-extracting-line-of-text-from-image-using-opencv)

可以在这里找到另一个冗长的帖子（全是 python）： [OpenCV-Python 中的简单数字识别 OCR](https://stackoverflow.com/questions/9413216/simple-digit-recognition-ocr-in-opencv-python?lq=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-16T16:36:23.300

Check out OpenALPR ([http://www.openalpr.com](http://www.openalpr.com)). This should solve the problem of showing the number plate and the text within it. It's written in C++ though, so you'd need to hook that into your Python program.

# spring-security - Spring Security ACL - 创建权限

> ID：16188277
> 
> 赞同：1
> 
> 时间：2013-04-24T09:24:42.723
> 
> 标签：spring-security, acl

我可以使用具有实体权限的 Spring Security ACL，但我想知道如何测试用户是否有权访问类的“创建”（位 2）权限。

就像是 ：

```
aclPermissionEvaluator.hasPermission(auth, clazz, "create") 
```

有人可以帮助我吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:57:51.280

您可以使用 Spring 的 SpEL 注释，例如`@PreAuthorize`，并覆盖接口的`hasPermission`方法`PermissionEvaluator`。如果您使用按位权限掩码，并且用户的权限（作为`int`）评估为“15”（`1111`），并且对象所需的权限是“6”（`0110`），您可以执行以下操作：

```
public boolean hasPermission(Authentication auth, Object targetObject, Object requiredPermissions) {
    int permissionMask = MyUserClass.getMask();
    int permissionsRequired = Integer.valueOf(requiredPermissions.toString());
    return ((permissionMask | requiredPermissions) == permissionMask);
} 
```

只要对象权限掩码中的活动位在用户权限上处于活动状态，这将返回 true。然后，您需要在`security.xml`文件中声明此自定义权限评估器：

```
<security:global-method-security pre-post-annotations="enabled">
    <security:expression-handler ref="expressionHandler"/>
</security:global-method-security>

<bean id="expressionHandler" class="org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler">
    <property name="permissionEvaluator" ref="permissionEvaluator"/>
</bean>

<bean id="permissionEvaluator" class="my.project.package.CustomPermissionEvaluator"/> 
```

现在，无论何时调用`hasPermission()`，您的自定义评估器都会处理该请求。显然，您可以使用您喜欢的任何逻辑来评估权限——只需确保返回类型为`boolean`，并且要传递的参数与您发送的内容相匹配（或评估；注意格式异常）。

请注意，您的自定义参数必须作为`Object`覆盖传递`hasPermission()`；您还可以通过更改签名来重载该方法以处理您喜欢的任何参数类型（例如 String 或 int），并且编译器*应该*选择最具体的签名。但是，由于您正在实现 PermissionEvaluator 接口，因此无论如何您都必须包含给定的签名（身份验证、对象、对象），因此除非您有某些特定需要编写重载方法，否则您也可以直接覆盖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-19T09:45:55.980

我有完全相同的问题，可悲的是，没有“开箱即用”的解决方案。

如果您的域模型允许，一种方法是将创建权限添加到您要创建的父对象

例如，假设您想为客户创建一个用户。您可以为允许为此特定客户端创建用户的用户添加创建权限到客户端。那就是我选择的路径。

如果您的域对象不允许这样做，我发现这样做的唯一方法是：

*   创建一个新表`acl_class_entry`，列表`acl_entry`等效但链接到一个`acl_class`而不是一个`acl_object_identity`
*   然后你创建你自己的权限评估器，附加方法`boolean hasPermission(Authentication authentication, Serializable targetId, String targetType, Object permission)`来检查`acl_class_entry`if 是否`target_id`为空的权限。这将允许您使用 SPel 表达式检查对类的权限`hasPermission(nulll, 'className', 'permission')`
*   当然，您还需要创建自己的版本`AclService`来创建此类权限。

# sql-server - 如何在 SQL Server 中将标识列设置为创建的表

> ID：16188278
> 
> 赞同：12
> 
> 时间：2013-04-24T09:24:54.117
> 
> 标签：sql-server, sql-server-2008-r2

我在 SQL Server 中创建了一个表，如下所示：

```
CREATE TABLE [UserName]
(
   [ID] [int] NOT NULL ,
   [Name] [nvarchar] (50) NOT NULL ,
   [Address] [nvarchar] (200) NULL

   CONSTRAINT [PK_UserName] PRIMARY KEY CLUSTERED ([ID] ASC)
) ON [PRIMARY]
GO 
```

如果我想做`ID`一个身份列，我需要什么？我是否需要删除并创建此表并设置`ID`为`[ID] [int] IDENTITY(1,1) NOT NULL`.

通过使用 drop 和 create，表中的所有数据`UserName`都将丢失。

是否有另一种方法可以设置`IDENTITY COLUMN`为**created table**的列而不会丢失数据？

我使用 SQL Server 2008 R2 :)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-24T09:28:10.077

```
ALTER TABLE [UserName] DROP COLUMN [ID];

ALTER TABLE [UserName] 
    ADD [ID] integer identity not null; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-24T09:31:45.950

试试这个——

```
DECLARE @temp TABLE
(
      ID INT NOT NULL 
    , Name NVARCHAR(50) NOT NULL 
    , [Address] NVARCHAR(200) NULL
) 

INSERT INTO @temp (ID, Name, [Address])
SELECT ID, Name, [Address]
FROM dbo.UserName

DROP TABLE dbo.UserName

CREATE TABLE dbo.UserName
(
      [ID] [int] IDENTITY(1,1) NOT NULL 
    , [Name] [nvarchar] (50) NOT NULL 
    , [Address] [nvarchar] (200) NULL
CONSTRAINT [PK_UserName] PRIMARY KEY CLUSTERED 
([ID] ASC)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

SET IDENTITY_INSERT dbo.UserName ON

INSERT INTO dbo.UserName (ID, Name, [Address])
SELECT ID, Name, [Address] 
FROM @temp

SET IDENTITY_INSERT dbo.UserName OFF 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-07-30T10:33:17.893

最简单的方法：-

1.  右键单击对象资源管理器中的表并选择“设计”

2.  选择要为其设置标识的列，然后转到列属性

3.  在“身份规范”下将“（是身份）”更改为“是”

4.  单击`Save`....完成:)

    [![在此处输入图像描述](https://i.stack.imgur.com/xSBMt.png)](https://i.stack.imgur.com/xSBMt.png)

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-15T20:19:03.690

这是一个最少记录的解决方案。

```
SELECT 
    IDENTITY(INT, 1,1) AS ID,
    Name, [Address]
INTO dbo.UserName_temp
FROM dbo.UserName;

ALTER TABLE dbo.UserName_temp
    ADD CONSTRAINT [PK_UserName] PRIMARY KEY CLUSTERED;

DROP TABLE dbo.UserName;

EXEC sp_rename 'dbo.UserName_temp', 'UserName'; 
```

SRC： [http ://sqlmag.com/sql-server/appending-identity-column-temporary-table](http://sqlmag.com/sql-server/appending-identity-column-temporary-table)

但是 IDENTITY() 函数“只能在带有 INTO 表子句的 SELECT 语句中”。

[http://msdn.microsoft.com/en-us/library/ms189838.aspx](http://msdn.microsoft.com/en-us/library/ms189838.aspx)

# python - Django 中的原始 SQL 查询

> ID：16188279
> 
> 赞同：3
> 
> 时间：2013-04-24T09:25:11.050
> 
> 标签：python, sql, django

这个原始查询有什么问题吗？

```
Worker.objects.raw('Delete from customer_worker Where customer_ptr_id= %s', [customer.id]) 
```

客户 id 返回一个字符串，但似乎什么也没发生，执行后对象仍然存在。

对象 Worker 是 的子对象`Customer`，我想保留客户，但删除该`Worker`对象。

以下是`Customer`和`Worker`型号：

```
class Customer(User):                                                    
    slug=models.SlugField(unique=True)
    description=models.TextField(null=True)
    phone=models.IntegerField(null=True)
    isWorker=models.BooleanField()

    def save(self,*args,**kwargs):                                        
        self.slug=slugify(self.username)                                          
        super(Customer,self).save(*args, **kwargs)                             

    def __unicode__(self):
        return self.username

class Worker(Customer):
    comment=models.ForeignKey(Comment, null=True)
    keyword=models.ManyToManyField('job.JobGenre', null=True)

    def __unicode__(self):
        return self.username 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T10:01:36.077

`connection.cursor()`您可以通过( [docs](https://docs.djangoproject.com/en/dev/topics/db/sql/#executing-custom-sql-directly) )直接删除您的记录：

```
from django.db import connection

cursor = connection.cursor()
cursor.execute('DELETE FROM costumer_worker WHERE costumer_ptr_id = %s', [costumer.id])
connection.commit() 
```

但是，您尝试做的事情看起来太简单而无法直接编写 SQL，请改用 django ORM。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T09:38:55.487

您可能会错过提交交易。根据您的设置，您可能需要 `transaction.commit_unless_managed()`在 django 1.4 中添加：（在 django 1.5 中不需要，因为默认设置不同）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-09T09:00:36.503

使用这一行：

```
from django.db import connection, transaction
cursor = connection.cursor()
with transaction.commit_on_success():
   cursor.execute('DELETE FROM costumer_worker WHERE costumer_ptr_id = %s', [costumer.id])
   connection.commit() 
```

# .net - WPF中的MethodInvoker？

> ID：16188287
> 
> 赞同：7
> 
> 时间：2013-04-24T09:25:30.460
> 
> 标签：.net, wpf, winforms

`System.Windows.Forms.MethodInvoker`有没有类似for的内置委托`WPF`？

`WinForms`我正在从to移植一些功能`WPF`，为此我不明智地导入 winforms 参考，是否有任何相应的委托`WPF`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-24T10:37:22.907

你可以像这样使用；

```
Dispatcher.BeginInvoke(new Action(delegate
  {
    // Do your work
  })); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-24T09:27:28.240

[MethodInvoker](http://msdn.microsoft.com/en-us/library/system.windows.forms.methodinvoker.aspx)也用于 WPF。您可以在 Dispatcher.Invoke 或 Control.Invoke 方法中使用它。您也可以使用具有许多覆盖的[Action委托。](http://msdn.microsoft.com/en-us/library/system.action.aspx)他们都会有效率。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-03T04:02:05.173

例如，你有按钮控件 btnLogin 你可以像这样使用它：

在 WPF 中：

```
btnLogin.Dispatcher.Invoke(new Action(delegate
{
    // Running on the UI thread
    btnLogin.Content = "TEST";
})); 
```

在 Winform 中：

```
btnLogin.Invoke((MethodInvoker)delegate {
    // Running on the UI thread
    btnLogin.Text = "TEST";
}); 
```

干杯!

# javascript - JavaScript setTimeout setInterval

> ID：16188290
> 
> 赞同：0
> 
> 时间：2013-04-24T09:25:34.067
> 
> 标签：javascript, settimeout, setinterval

我正在为一个网站编写一些代码，我想创建一个 165px x 2px 的线，它会出现然后消失并继续这样做到无穷大。我用 JavaScript 写了这段代码：

```
function sivapokretna() {
        document.getElementById("pokretnasiva").style.width= "165px";
        setTimeout("document.getElementById('pokretnasiva').style.width= '0px';", 4000);
}

function sivo() {
    setInterval(sivapokretna(), 8000);
} 
```

如您所见，在第一个函数中，我将 div 元素的大小从 0 更改为 165，然后延迟后将其变回 0。出于某种原因，尽管我在第二个函数中使用了 setInterval，但它只执行了一次。不要混淆，我已经用 CSS3 3 秒转换完成了更改。这是正在更改的元素代码的 CSS 部分。

```
#pokretnasiva {
    width: 0px;
    height: 2px;
    background: #ff0000;
    transition: width 3s;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:27:17.657

您需要将对该函数的引用传递给`setInterval`. 您正在调用该函数，因此您实际上是在传递它的*返回值*（这是`undefined`因为没有明确的`return`声明）。

您需要删除调用括号：

```
setInterval(sivapokretna, 8000);
//                     ^--- No invoking parentheses here! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T09:27:18.883

您正在**调用**该函数，立即运行，然后一遍又一遍地告诉`setInterval`运行（函数的返回值）。`undefined`

您需要*传递函数*，而不是**调用**函数并传递其返回值。

删除`()`.

```
setInterval(sivapokretna, 8000) 
```

# c# - 如何扩展 XmlAttribute 行为？

> ID：16188297
> 
> 赞同：1
> 
> 时间：2013-04-24T09:25:57.767
> 
> 标签：c#, .net, xml, xml-serialization, xml-attribute

如何扩展 XmlAttribute 类？

使用下面的代码，我使我的可为空属性可序列化，如果没有值，则从序列化中排除：

```
 [XmlIgnore]
        public DateTime? LastUpdated { get; set; }

        [XmlAttribute("lastUpdated")]
        public DateTime LastUpdatedSerializable
        {
            get { return this.LastUpdated.Value; }
            set { this.LastUpdated = value; }
        }

        public bool ShouldSerializeLastUpdatedSerializable()
        {
            return LastUpdated.HasValue;
        } 
```

而不是上面，我希望能够使用下面的代码来实现相同的结果：

```
 [XmlAttribute("lastUpdated", IsNullable = true)]
        public DateTime? LastUpdatedSerializable
        {
            get;
            set;
        } 
```

因此，我希望能够扩展 XmlAttribute 以接受名为 IsNullable 的属性，然后如果值为 true，则应使用上述代码替换实现，以便如果没有值则排除节点。

这是微软应该为 XmlAttribute 添加到 .NET Framework 中的东西。

如何实现？

# jquery - 为什么调用 JSOM executeQueryAsync 时我的 jQuery Promises 被忽略？

> ID：16188300
> 
> 赞同：2
> 
> 时间：2013-04-24T09:26:06.780
> 
> 标签：jquery, sharepoint-2013

我对 jQuery Promises 的一个小问题摸不着头脑。基本上我试图链接几个方法调用（在插件中保存），以便按顺序调用它们。

但是，因为其中一个函数有一个 SP context.executeQueryAsync 调用，所以当我尝试这个时，它们似乎被调用了 final 方法，而不是在继续之前等待 promise 的已解决状态。

我在下面的 jsFiddle 中复制了类似于我正在使用超时所做的事情：

[http://jsfiddle.net/qPHmu/11/](http://jsfiddle.net/qPHmu/11/)

这是使用 executeQueryAsync 调用的方法的基本版本：

```
GetList: function (listTitle, fields, camlXml) {
                var dfd = new $.Deferred();
                $this = $(this);

                var data = $this.data('SPLists');

                if (!data) {
                    var list = web.get_lists().getByTitle(listTitle);
                    var query = new SP.CamlQuery(camlXml);
                    var items = list.getItems(query);

                    context.load(items, 'Include (' + fields + ')');
                    context.executeQueryAsync(function () {
                        dfd.resolve();
                    },
                    function (sender, args) {
                        dfd.reject();
                    });
                }

                return dfd.promise();
        } 
```

我以与 jsfiddle 示例相同的方式调用我的函数。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:48:45.030

以下不会等待执行 MyPromiseTest 函数：

```
$.fn.MyPromiseTest()
    .done($.fn.MyPromiseTest("Get"))
        .done($.fn.MyPromiseTest("Final")); 
```

试试[这样](http://jsfiddle.net/qPHmu/12/)：

```
$.fn.MyPromiseTest()
    .done(function() { 
        return $.fn.MyPromiseTest("Get").done(function() { 
            return $.fn.MyPromiseTest("Final"); 
        })
    }); 
```

**编辑：**

你也可以使用[.pipe](http://api.jquery.com/deferred.pipe/)来更新 promise（从 1.8 开始你应该使用[.then](http://api.jquery.com/deferred.then/)）：

```
$.fn.MyPromiseTest()
    .pipe(function() { return $.fn.MyPromiseTest("Get"); })
    .pipe(function() { return $.fn.MyPromiseTest("Final"); }); 
```

见[http://jsfiddle.net/qPHmu/13/](http://jsfiddle.net/qPHmu/13/)

# zk - 最大化时如何使 Tablelayout 中的面板填充整个布局？

> ID：16188303
> 
> 赞同：0
> 
> 时间：2013-04-24T09:26:10.573
> 
> 标签：zk

`Panel`默认情况下， in`Portallayout`可以最大化为`Portalchildren`or 布局本身。

我怎样才能使`Panel`布局`Tablelayout`也可以最大化？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-24T10:39:24.730

它对我有用。

```
<portallayout id="myptl" maximizedMode="whole">
            <portalchildren style="padding: 5px" width="450px" id="column1">
                <panel height="400px" title="Pie Chart Demo" border="normal"
                    collapsible="true" maximizable="true" style="margin-bottom:10px">
                    <panelchildren>
                        <iframe width="100%" height="100%"
                            src="/monitors/pie_chart_demo.zul" />
                    </panelchildren>
                </panel>
            </portalchildren>
    </portallayout> 
```

# domain-driven-design - 领域驱动设计（示例博客应用程序）

> ID：16188306
> 
> 赞同：4
> 
> 时间：2013-04-24T09:26:18.503
> 
> 标签：domain-driven-design

我最近在学习 DDD，并不太了解这些概念。我对示例博客应用程序有一些疑问。

假设博客系统中有四个域对象：`User`、`Blog`和。一个可以只有一个，a有多个实体，a有很多实体。`Post``Comment``User``Blog``Blog``Post``Post``Comment`

我的设计是`Blog`聚合根：

```
class Blog {
    private User;
    private List<Post> posts;
}

class Post {
    private List<Comment> comments;
}

class BlogRepository {
    public void saveBlog(Blog blog);
    public void findBlogById(long id);
    public void getAllBlogs();
} 
```

我这样设计聚合根和存储库是否正确？

我有一些要求来获取`Comment`用户为所有实体添加的所有`Blog`实体，并且`User`允许修改她/他自己的`Comment`.

我的问题是如何实现这些要求？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T15:24:21.367

虽然您提供的模型反映了领域，但它并不是最佳的 DDD 实现。使用 DDD，除了考虑实体之间的关系之外，还必须考虑事务一致性边界。因此，最好将 a 和 设计`Blog`为`Post`仅`User`通过 ID 相互引用的单独聚合。此外，实体没有理由`Blog`需要拥有帖子集合。您永远不需要加载整个博客，并且行为永远不会跨越多个帖子。相反，提供分页存储库方法来加载博客的帖子子集。然而， A`Comment`可以是一个值对象，因此注释集合应该与`Post`总计的。获取用户所有评论的最简单方法是创建一个存储库查询方法，该方法返回一个[读取模型](http://gorodinski.com/blog/2012/04/25/read-models-as-a-tactical-pattern-in-domain-driven-design-ddd/)，以防止将查询与实体中的行为混为一谈。有关设计聚合的更多信息，请查看[有效聚合设计](https://vaughnvernon.co/?p=139)。

# database - 从 oracle SP 返回隐式字符串

> ID：16188310
> 
> 赞同：0
> 
> 时间：2013-04-24T09:26:30.683
> 
> 标签：database, oracle, stored-procedures, cursor, return-value

嗨，我有以下存储过程...

```
CREATE OR REPLACE PROCEDURE DB.INSERTGOOD
(
--CapRefCursor OUT Cap_Cur_Pkg.CapCur,
p_APPLIANT_TLT IN GOODRIGHT_MANUAL.APPLICANT_TLT%TYPE,
p_APPLIANT_NME IN GOODRIGHT_MANUAL.APPLICANT_NME%TYPE,
p_APPLICANT_SURNME IN GOODRIGHT_MANUAL.APPLICANT_SURNME%TYPE,
p_COMPANY_NME IN GOODRIGHT_MANUAL.COMPANY_NME%TYPE,
p_ID_CDE IN GOODRIGHT_MANUAL.ID_CDE%TYPE,
p_ADD1 IN GOODRIGHT_MANUAL.ADD1%TYPE,
p_OCCUPATION1 IN GOODRIGHT_MANUAL.OCCUPATION1%TYPE,
p_REMARK1 IN GOODRIGHT_MANUAL.REMARK1%TYPE,
p_SOURCE IN GOODRIGHT_MANUAL.SOURCE%TYPE
) 
IS
BEGIN

INSERT
INTO GOODRIGHT_MANUAL
(
SEQ_ID,
APPLICANT_TLT,      
APPLICANT_NME,
APPLICANT_SURNME,
COMPANY_NME,   
ID_CDE,
ADD1,            
OCCUPATION1,            
REMARK1,            
GOODRIGHT_MANUAL.SOURCE            
)
VALUES
(
goodright_seq.nextval, 
p_APPLIANT_TLT,
p_APPLIANT_NME,
p_APPLICANT_SURNME,
p_COMPANY_NME,
lower(p_ID_CDE),
p_ADD1,
p_OCCUPATION1,
p_REMARK1,
p_SOURCE
);
COMMIT;
-- OPEN CapRefCursor FOR
--select 'True';
EXCEPTION
WHEN DUP_VAL_ON_INDEX
THEN ROLLBACK;
--  select 'False';
END DB.INSERTGOOD;
/ 
```

在这里，如果事务提交成功，我想返回一个字符串 TRUE，如果事务回滚，则返回 FALSE。
定义了一个输出变量 CapRefCursor，但我不知道如何将 true false 分配给该变量并返回它。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:47:10.867

您已经定义了一个没有`OUT`参数的过程，因此它不能返回任何内容。

您有几个选项可以返回成功信息：

1.  定义一个函数而不是一个过程。一个函数总是返回一些东西，您可以定义一个要返回的字符串`VARCHAR2`，例如在您的情况下。
2.  为过程添加`OUT`参数。`OUT`参数在逻辑上等价于函数返回值。您可以拥有多个这样的参数。
3.  修改您的逻辑，以便该过程在工作时不返回任何内容，并在失败时引发异常。

我会选择解决方案（3），因为：

*   解决方案 (1) 和 (2) 容易出错：您可能很容易忘记检查返回码，在这种情况下，您的程序将继续执行**，就好像在失败的情况下没有发生错误一样**。忽略错误是将良性错误转变为怪物的最可靠方法，因为它可能导致广泛的数据损坏。您的程序可能会持续数月，而您却没有意识到它会间歇性地失败！
*   异常逻辑就是为了克服这个问题而设计的，让代码更干净、更清晰。**在每个过程调用之后不再有丑陋的 if-then-else**。仅出于这个原因，解决方案 (1) 和 (2) 在广泛用于返回成功/错误状态时被视为[代码异味](http://en.wikipedia.org/wiki/Code_smell)（反模式）。
*   涉及的代码更少，只需删除`EXCEPTION`块并**让错误传播**。
*   如果您让异常传播（并且不发出中间提交），失败的过程将[撤消它们的工作而不回滚整个事务。](https://stackoverflow.com/questions/1468116/does-oracle-roll-back-the-transaction-on-an-error)

最后，一般来说，您不应控制子过程中的事务逻辑。执行单个插入的过程可能是较大事务的一部分。您不应让此过程提交或回滚。您的**调用代码**，无论是 PL/SQL、GUI 还是脚本，都应该决定事务是应该前进并完成还是回滚。

# mysql - 向表格添加多个标签

> ID：16188312
> 
> 赞同：0
> 
> 时间：2013-04-24T09:26:38.010
> 
> 标签：mysql, sql, database, stored-functions

我在数据库中有一个表`tags`，我想创建一个基于添加值的查询，如果`name`标签不存在，下一个选定的 ID 以及名称是否存在选定的标签 ID

我创建了一个简单的代码：

```
DELIMITER $$
USE `cc`$$
DROP FUNCTION IF EXISTS getTagId$$
CREATE FUNCTION getTagId (tag CHAR(20)) RETURNS  INT CHARSET utf-8
    BEGIN
       DECLARE id INT
       set @id = (select id from tags where name = @tag)
           if (@id is null) then
            insert into tags(name) values(@tag)
            set @id = (select last_insert_id())
           end if
        SELECT @id
    END
delimiter; 
```

但是这段代码不起作用（这是我在 MySQL 中的第一个函数）。

我想在单个查询中向数据库添加更多标签，然后是 10 个，您对如何优化有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:38:53.597

您应该`$$`在最后一行之前添加一个。

而且，你忘记了很多`;`

返回一个数字并指定字符集是荒谬的，并且可能是语法错误。

删除所有行`@id`并简单地添加`RETURN last_insert_id();`

IF NOT EXISTS ((select id from tags where name = tag)) THEN

（另请注意，我从标签中删除了@！）

可能还有更多错误，但请注意这些:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:45:03.790

但可能我的旧答案没用。真正的问题是：这个存储函数真的需要吗？我猜你试图这样做只是为了避免重复。

为了达到相同的目标：

*   为 tags.name 添加唯一索引
*   使用 INSERT IGNORE （如果该标签已经存在则没有错误）

# c# - 为什么我不能在 MVC 控制器中使用 System.IO.File 方法？

> ID：16188314
> 
> 赞同：50
> 
> 时间：2013-04-24T09:26:38.410
> 
> 标签：c#, asp.net-mvc, file

我试图在 MVC 控制器中使用它之前查看文件是否存在：

```
string path = "content/image.jpg";

if (File.Exists(path))
{ 
    //Other code
} 
```

关键字带有红色下划线，`File`编译器显示错误：

> `System.Web.MVC.Controller.File(string, string, string)`是一种“方法”，女巫在给定的上下文中无效。

如何`File.Exists()`在控制器中使用？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2013-04-24T09:27:51.693

你应该在它前面加上一个命名空间：

```
if (System.IO.File.Exists(picPath))
{ 
    //Other code
} 
```

这样做的原因是因为您在控制器操作中编写此代码，该控制器操作已经[`File`](http://msdn.microsoft.com/en-us/library/dd492897%28v=vs.108%29.aspx)在 Controller 类上定义了一个方法。

# asp.net - How to change Account/Login asp:literal

> ID：16188319
> 
> 赞同：0
> 
> 时间：2013-04-24T09:27:01.160
> 
> 标签：asp.net

i default login in asp.net when something in passowrd or username is wrong I have this message : `Your login attempt was not successful. Please try again.`

this is some asp:Literal How can i change this text

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:39:31.673

If you're using the ASP.NET [Login control](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.login.aspx), you can simply set the [FailureText](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.login.failuretext.aspx) property to an alternate message.

Or if you need more control, you can template the `Login` control to provide your own custom UI.

# google-maps - 谷歌地图路线匹配

> ID：16188320
> 
> 赞同：2
> 
> 时间：2013-04-24T09:27:04.067
> 
> 标签：google-maps

我需要确定是否有 2 个人从 A 市到 B 市采取相同的路线。谷歌地图返回从 A 市到 B 市的多条路线。我允许用户标记航点以选择特定路线。但在某些情况下，即使路线相同，如果所选航路点不存在于路线数组中，它也不匹配相同的路线。航点是正确的做法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-03-04T06:47:27.353

您可以使用谷歌地图“腿”来做到这一点。并比较每个使用列表。

[![在此处输入图像描述](https://i.stack.imgur.com/uImNv.png)](https://i.stack.imgur.com/uImNv.png)

# c# - 在c#中将uri转换为字符串

> ID：16188321
> 
> 赞同：2
> 
> 时间：2013-04-24T09:27:09.713
> 
> 标签：c#, uri

我有这个代码：

```
 public static string FindRelativePath(string basePatrh, string targetPath)
    {
        Func<FileSystemInfo, string> getFullName = delegate(FileSystemInfo path)
            {
                string fullName = path.FullName;

                if (path is DirectoryInfo)
                {
                    if (fullName[fullName.Length - 1] != Path.DirectorySeparatorChar)
                    {
                        fullName += Path.DirectorySeparatorChar;
                    }
                }

                return fullName;
            };

        string basePatrhFullName = getFullName(new DirectoryInfo(basePatrh));
        string targetPathFullName = getFullName(new DirectoryInfo(targetPath));

        Uri basePatrhUri = new Uri(basePatrhFullName);
        Uri targetPathUri = new Uri(targetPathFullName);
        Uri relativeUri = basePatrhUri.MakeRelativeUri(targetPathUri);

        return relativeUri.ToString().Replace('/', '\\');
    } 
```

与另一条路径相比，此代码将路径转换为相对路径。例如：

```
 FindRelativePath("c:\test","C;\test\dir1\dir2") 
```

将返回
dir1\dir2

该代码运行良好，但如果路径中有空格，例如：

```
 FindRelativePath("c:\test","C;\test\dir1\dir 2") 
```

它返回错误的字符串：

```
dir1\dir%202 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:33:01.717

您可以使用[Uri.UnescapeDataString](http://msdn.microsoft.com/en-us/library/system.uri.unescapedatastring.aspx)，它是 Uri.EscapeDataString 的反向[函数](http://msdn.microsoft.com/en-us/library/system.uri.escapedatastring.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:59:44.080

"%20" 是 US-ASCII 空格字符的转义编码所以你必须像 Uri.UnescapeDataString 一样取消转义它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T09:30:24.927

返回的字符串没有错 %20 表示之间的空格`dir` `2`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T09:43:18.010

```
public static string FindRelativePath(string basePath, string targetPath)
{
           return Uri.UnescapeDataString(
                basePath.MakeRelativeUri(targetPath)
                    .ToString()
                    .Replace('/', Path.DirectorySeparatorChar)
                );
} 
```

# python - 如何在 Nagios 中使用 Python 文件？

> ID：16188322
> 
> 赞同：2
> 
> 时间：2013-04-24T09:27:09.973
> 
> 标签：python, plugins, nagios

我正在尝试使用以下 Python 代码和说明从 Nagios 获得响应：http: [//skipperkongen.dk/2011/12/06/hello-world-plugin-for-nagios-in-python/](http://skipperkongen.dk/2011/12/06/hello-world-plugin-for-nagios-in-python/)

由于某种原因，我从来没有从 Nagios 得到好的结果，它总是返回消息：返回代码 126 超出范围 - 插件可能丢失

我安装了 nagiosplugin 1.0.0，但似乎仍然没有任何工作并行我还有一些其他服务（不是 python 文件）可以工作，例如 http 检查、当前用户和 SSH

我究竟做错了什么？我已经尝试解决了几天

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:23:33.333

让 Nagios 使用您的新插件非常容易。您应该对三个文件进行更改并重新启动 Nagios — 仅此而已。

第一个文件是**/etc/nagios/command-plugins.cfg**（如果您知道此文件的路径或**ubuntu**中的类似文件，请留下评论）。假设插件文件放在 /usr/lib/nagios/plugins/ 目录下：

```
command[check_hello_world]=/usr/lib/nagios/plugins/check_helloworld.py -m 'some message' 
```

将一个目录下拉到**/etc/nagios/objects/commands.cfg （对于 ubuntu 用户应该在该目录****/etc/nagios-plugins/config/**中创建 cfg 文件）：

```
define command {
    command_name    check_hello_world
    command_line    $USER1$/check_hello_world.py -m 'some message'
} 
```

保存文件并打开**/etc/nagios/objects/localhost.cfg**（在 /etc/nagios3/nagios.cfg 和默认情况下**cfg_dir=/etc/nagios3/conf.d**中的服务定义文件的 ubuntu 路径中。所以，要在 ubuntu 中定义新服务，用户应在该目录中创建 cfg 文件，例如**hello.cfg**）。找到此部分：

```
#
# SERVICE DEFINITIONS
# 
```

并添加新条目：

```
define service {
    use                 local-service ; Name of service template to use
    host_name           localhost
    service_description Check using the hello world plugin (always returns OK)
    check_command       check_hello_world
} 
```

剩下的就是重新启动 Nagios 并验证插件是否正常工作。通过发出以下命令重新启动 Nagios：

```
/etc/init.d/nagios restart 
```

[http://www.linux-mag.com/id/7706/](http://www.linux-mag.com/id/7706/)

ubuntuforums.org -[主题：我在 Ubuntu Server 12.04 LTS 上安装 Nagios 的注意事项](http://ubuntuforums.org/showthread.php?t=1986743)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-21T19:41:26.997

即使文件中的 shebang 指定了它，我也必须预先添加 python2.7 的路径。

在命令定义中我有这个：

```
command_line /usr/local/bin/python2.7 $USER1$/check_rabbit_queues.py --host $HOSTADDRESS$ --password $ARG1$ 
```

即使实际 python 文件的顶部有：

```
#!/usr/bin/env python2.7 
```

即使脚本在没有指定解释器的情况下从命令行执行并返回就好了。

我尝试的其他任何方法似乎都不起作用。

# android - Activity 的 UI 在 AsyncTask 的 onPostExecute 上冻结？

> ID：16188323
> 
> 赞同：0
> 
> 时间：2013-04-24T09:27:15.703
> 
> 标签：android, asynchronous, android-asynctask

我曾经`AsyncTask`请求大量数据。收到后，数据在方法内部进行`onPostExecute`处理。处理数据可能需要一段时间。

根据我的理解，`AsyncTask`它是异步的并且独立于 UI。

*   为什么我的活动冻结`onPostExecute`？
*   如果方法内部的处理时间过长`Activity`，冻结是否正常？`onPostExecute`
*   我怎样才能使它`Activity`不会冻结`onPostExecute`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T09:33:26.470

1.  您应该`database , network ,parsing`在方法中执行所有数据源操作，例如（response.etc）`doInBackground`。
2.  如果您想更新异步任务中的任何 ui 更新，请使用`onProgressUpdate`
3.  我认为您正在执行任何解析操作`onPostExecute`。尝试`parsed` `data`在`postexecute`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T09:33:05.120

为什么我的 Activity 在 PostExecute 上冻结？

> 根据您的帖子，您对 PostExecute 方法执行了一些耗时的操作。在 PostExecute 上运行在 UI 线程上，所以你的 UI 被冻结没关系。

如果 onPostExecute 方法内部的处理时间过长，Activity 冻结是否正常？

> 是的，它就是。您应该在 doInBackground 方法中执行长操作（非 UI 线程）

如何使我的 Activity 不会在 PostExecute 上冻结？

> 尝试将您的长时间操作转移到 doInBackground 方法，并在 PostExecute 中根据响应更新 UI，这是您在 doInBackground 方法中的操作后得到的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T09:32:23.567

确保您在`doInBackground`方法中使用`AsynTask`方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T09:39:39.293

请参阅 Long Running Task You Need to Bind in `doInBackground` here you cannot Bind UI control Like`Button`等`ImageView` 。在完成后 `doInBackground` 您`onPostExecute` 可以 Bind All Require Control ，请确保此处 [ `onPostExecute`] 您没有运行其他任务。

# android - android google maps v2 想要显示2 市场显示

> ID：16188326
> 
> 赞同：1
> 
> 时间：2013-04-24T09:27:27.523
> 
> 标签：android, google-maps

我试过喜欢 [with 2 Lat Long Details]

```
 final LatLng latlong = new LatLng(lat,lng);
              final LatLng latlongcr = new LatLng(currentlat,currentlong);

                 mapView.addMarker(new MarkerOptions().position(latlongcr).title("Here You Are"));
                 mapView.addMarker(new MarkerOptions().position(latlong).title(addr));

                 mapView.moveCamera(CameraUpdateFactory.newLatLngZoom(latlong, 20));
                 mapView.moveCamera(CameraUpdateFactory.newLatLngZoom(latlongcr, 20));
                 mapView.animateCamera(CameraUpdateFactory.zoomTo(20), 2000, null); 
```

但只获得一个标记。想要显示 2 个标记 Mapview 工作正常

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T09:48:28.577

尝试使用`LatLngBounds.Builder`：

```
LatLngBounds.Builder builder = new LatLngBounds.Builder();
builder.include(latlongcr);
builder.include(latlong);
LatLngBounds bounds = builder.build();
mapView.animateCamera(CameraUpdateFactory.newLatLngBounds(bounds, 20)); 
```

# php - 在 php 中，它不是下载 csv 文件，而是在浏览器中打开

> ID：16188329
> 
> 赞同：1
> 
> 时间：2013-04-24T09:27:34.547
> 
> 标签：php, download, force-download

我正在尝试通过浏览器下载 CSV 文件。该脚本部分工作，因为到目前为止我设法在屏幕上显示 CSV，但下载没有开始。

这是我到目前为止所尝试的：

```
if(isset($currency)) {
    header("Content-Type: application/csv");
    header("Content-Disposition: attachment;Filename=Pricelogs.csv");
    ob_clean();
    $filename = "/tmp/".uniqid().".csv";
    exportCSVFile($filename, $currency, $country, $provider);
    readfile($filename);
    //unlink("'".$filename."'");
} else {
    echo "ERR_USERNAME_PASSWORD";
    exit();
} 
```

我已经从常见问题解答中阅读了所有此类问题并尝试过，但它只能在浏览器上打开，而不是下载。
我还使用了带单引号的标题。我也试过 `header("Content-Type: text/csv");` 了：

```
 header("Expires: 0");
    header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
    header("Cache-Control: private",false); // required for certain browsers 
    header("Content-Type: application/force-download");
    header("Content-Disposition: attachment; filename=\"".$filename."\";" );
    header("Content-Transfer-Encoding: binary"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:35:37.783

我通常只是这样做：

```
header('Content-type: text/csv');
header("Content-Disposition: attachment; filename=my_csv_filename.csv");

// print CSV lines here

exit(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T10:41:02.280

输入您的 CSV 文件 URL，它将显示在浏览器中，而不是强制浏览器下载。您可以在您网站的 iframe 中打开它。

[http://docs.google.com/viewer?embedded=true&url=www.yoursite.com/filename.csv](http://docs.google.com/viewer?embedded=true&url=www.yoursite.com/filename.csv)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T09:40:00.377

我可以告诉你这个组合对我有用：

```
$bom = chr(0xEF) . chr(0xBB) . chr(0xBF);
header("Content-type: application/csv; charset=UTF-8");
header("Content-Disposition: attachment; filename=$filename.csv");
header("Pragma: no-cache");
header("Expires: 0");
print $bom . $data;
exit; 
```

如果我是你，我会首先简单地测试这个（在你所有的缓冲之外），首先看看你是否设法使这个工作，然后才在你的特定设置中测试它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T10:10:41.053

你可以试试这个。

```
header("Pragma: public");
header("Expires: 0");
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
header("Cache-Control: private",false);
header("Content-Type: application/octet-stream");
header("Content-Disposition: attachment; filename=\"$filename.csv\";" );

print $content; 
```

# ruby-on-rails - 如何使用 SMTP 服务器发送电子邮件？

> ID：16188333
> 
> 赞同：0
> 
> 时间：2013-04-24T09:27:55.763
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, email, smtp

邮件/开发.rb

```
config.action_mailer.delivery_method = :smtp  
config.action_mailer.smtp_settings = {
 :adress => 'myemail@gmail.com',
 :port => 25,
 :authentication => :login,
 :user_name => 'myemail',
 :password => 'secret'
} 
```

这是我的邮件：

```
class UserMailer < ActionMailer::Base
def welcome_email(name, email, subject, question)
@recipients   = email
@from         = "myemail@gmail.com"
headers         "Reply-to" => "myemail0@gmail.com"
@subject      = "Welcome to MyDomain"
@sent_on      = Time.now
@content_type = "text/html"
#body[:username]  = name
mail(:to => email, :subject => subject, :from => 'myemail@gmail.com')
end
end 
```

有这个错误：504 5.3.3 AUTH mechanism LOGIN not available

请帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:00:11.940

我使用这些方面的东西来与 gmail 交谈

```
config.action_mailer.delivery_method = :smtp  
config.action_mailer.perform_deliveries = true

config.action_mailer.smtp_settings = {
 :address => 'smtp.gmail.com',
 :port => 587,
 :authentication => 'plain',
 :user_name => 'myemail',
 :password => 'secret',
 :enable_starttls_auto => true,
 :domain => 'gmail.com'
} 
```

# autotools - automake 错误：没有找到正确的 AM_INIT_AUTOMAKE 调用

> ID：16188335
> 
> 赞同：14
> 
> 时间：2013-04-24T09:28:03.590
> 
> 标签：autotools, automake

我是 autotools 的新手，并遵循本[教程](http://markuskimius.wikidot.com/programming:tut:autotools:4)。但我无法解决这个错误，

```
 $ automake
   configure.ac: error: no proper invocation of AM_INIT_AUTOMAKE was found.
   ..
   Makefile.am: error: required file './depcomp' not found
   ..
   /usr/share/automake-1.12/am/depend2.am: error: am__fastdepCC does not appear in AM_CONDITIONAL
  ..
  /usr/share/automake-1.12/am/depend2.am: error: AMDEP does not appear in AM_CONDITIONAL
  .. 
```

我的`configure.ac`文件是

```
 # -*- Autoconf -*-
   # Process this file with autoconf to produce a configure script.

   AC_PREREQ([2.69])
   AC_INIT([FULL-PACKAGE-NAME], [VERSION], [BUG-REPORT-ADDRESS])
   AM_INIT_AUTOMAKE(hello,1.0)
   AC_CONFIG_SRCDIR([config.h.in])
   AM_CONFIG_HEADERS(config.h)

   # Checks for programs.
   AC_PROG_CC

   # Checks for libraries.

   # Checks for header files.
   AC_CHECK_HEADERS([sys/time.h])

   # Checks for typedefs, structures, and compiler characteristics.

   # Checks for library functions.
   AC_CHECK_FUNCS([gettimeofday])

   AC_CONFIG_FILES([Makefile])
   AC_OUTPUT 
```

我在网上查了解决方法，我的`configure.ac`看起来很好，不知道是什么问题。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-24T16:15:28.697

你从哪里复制粘贴你`configure.ac`的？无论该站点是什么，您都应该将其从书签中删除！

您正在将`AC_INIT`指示软件包版本的新方法与`AM_INIT_AUTOMAKE`执行相同操作的旧方法混合在一起。不要两者都做。（*新旧*指的是 10 年前发生的切换。）从 Automake 1.13 开始，不再支持使用两个参数进行调用的旧*方法*`AM_INIT_AUTOMAKE`。

在您的情况下，删除`AM_INIT_AUTOMAKE`参数并正确设置参数`AC_INIT`以反映项目的名称和版本就足够了。

有关非常简单的最新示例，请参阅[automake 手册](http://www.gnu.org/software/automake/manual/automake.html#Hello-World)`configure.ac`。

而不是调用`automake`自己，只需使用`autoreconf -vfi`它以正确的顺序运行所有相关工具，并安装丢失的文件。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-10-21T07:51:15.543

您必须逐行修复它。

首先，您`Makefile.am`需要的`depcomp`. 因此，您必须将其复制到您的文件夹（对于此步骤，您可以运行`automake --add-missing`以自动添加丢失的文件）：

```
cp -a /usr/share/automake-X.XX/depcomp . 
```

其次，您必须在`aclocal`之前运行`automake`：

```
$ aclocal 
```

最后，您可以运行`automake`：

```
$ automake
$ autoconf 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-16T11:49:40.700

就我而言，将 libtool 从 2.2.6 更新到 2.4.6。ps：我用的是1.15版本的automake。在运行 aclocal 和 autoheader 之前运行 libtoolize。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-29T04:57:41.970

尝试

```
autoreconf -i 
```

autoreconf 将通过添加推荐或需要的缺失文件将项目引导到可分发状态。

# spring - 我想根据登录用户更改主页菜单。我如何在 Spring MVC 中做到这一点？

> ID：16188336
> 
> 赞同：2
> 
> 时间：2013-04-24T09:28:05.377
> 
> 标签：spring, jsp, spring-mvc, spring-security, spring-webflow

我可以使用 Spring-MVC 登录。现在我想根据登录的用户更改菜单。如何使用 spring MVC 控制器将登录用户名传递到我的主页？这样我就可以使用该用户名并根据登录名更改菜单？是否有任何可用的框架？如果我想在成功登录后将一组对象（其中将包含分配给登录用户的操作）发送到我的主页怎么办？

有没有更好的方法呢？

任何建议将不胜感激。需要帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:30:31.573

除了 Bhushan 的回答之外，您还可以使用自定义 UserDetails 类来存储与经过身份验证的用户有关的信息，并将值从控制器类传递给模型`model.put("myParamName", myParam);`

然后，在 JSP 中，无论有无`authorize`标签，您都可以使用`${myParam}`. 请注意，这不仅限于纯 HTML 内容；您也可以以这种方式传递 Javascript —— 请注意，虽然传递的内容可能是您喜欢的任何数据类型（无论如何，JSP 可以处理），但最终呈现时它将被视为字符串，所以您必须转义字符并包含换行符和/或制表符以获取冗长的内容和正确的格式。例如：

**MyController.java**

```
. . .

String myJavascript = "<script>\n\tvar myVar = \"Hello Dheeraj!\";\n\talert(myVar);\n</script";
model.put("someJavascript", myJavascript);

. . . 
```

**我的页面.jsp**

```
${someJavascript} 
```

现在，当调用该页面时，客户端将看到以下内容：

```
. . .

<script>
    var myVar = "Hello Dheeraj!";
    alert(myVar);
</script> 
```

当然，您也可以传递数组等，并循环遍历项目以构建`<select>`元素等。用户特定的逻辑可能驻留在您的控制器类上（或从中调用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:24:46.887

如果你想基于角色来处理这个问题，那么 spring security 提供了 jsp taglib 来处理这个问题。

[http://static.springsource.org/spring-security/site/docs/3.0.x/reference/taglibs.html](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/taglibs.html)

例子

```
<sec:authorize access="hasRole('supervisor')">

This content will only be visible to users who have
the "supervisor" authority in their list of <tt>GrantedAuthority</tt>s.

</sec:authorize> 
```

# xslt - 创建一个分层 xml 表单一个“平面”xml 一个类似的书描述

> ID：16188341
> 
> 赞同：0
> 
> 时间：2013-04-24T09:28:34.570
> 
> 标签：xslt

这是对[“选择当前元素和当前元素的下一个元素之间的所有元素”](https://stackoverflow.com/q/16145859/2115381)提出的后续问题。即使我不确定创建一个新问题是否是我这样做的正确方式。因为最初的问题得到了回答，但后来又改变了。所以在我看来，改变的问题是开放的。此外，我认为如果更改后的问题适合答案，则应将其放回统计数据中。

**问题是如何创建分层 xml 形式的“平面”xml，如书籍描述。**

输入 xml 类似于

```
<root>
    <heading_1>Section 1</heading_1>
    <para>...</para>
    <list_1>...</list_1>
    <heading_2>Section 1.1</heading_2>
    <para>...</para>
    <heading_3>Section 1.1.1</heading_3>
    <para>...</para>
    <list_1>...</list_1>
    <heading_2>Section 1.2</heading_2>
    <para>...</para>
    <footnote>...</footnote>
    <heading_1>Section 2</heading_1>
    <para>...</para>
    <list_1>...</list_1>
    <heading_2>Section 2.1</heading_2>
    <para>...</para>
    <list_1>...</list_1>
    <list_2>...</list_2>
    <heading_3>Seciton 2.1.1</heading_3>
    <para>...</para>
    <heading_2>Section 2.2</heading_2>
    <para>...</para>
    <footnote>...</footnote>
</root> 
```

每个都`<heading_*>`应该被解释为`<section>` 预期输出 xml 的开头。

```
<section>
    <title>Section 1</title>
    <para>...</para>
    <list_1>...</list_1>
    <section>
        <title>Section 1.1</title>
        <para>...</para>
        <section>
            <title>Section 1.1.1</title>
            <para>...</para>
            <list_1>...</list_1>
        </section>
    </section>
    <section>
        <title>Section 1.2</title>
        <para>...</para>
        <footnote>...</footnote>
    </section>
</section>
<section>
    <title>Section 2</title>
    <para>...</para>
    <list_1>...</list_1>
    <section>
        <title>Section 2.1</title>
        <para>...</para>
        <list_1>...</list_1>
        <list_2>...</list_2>
        <section>
            <title>Section 2.1.1</title>
            <para>...</para>
        </section>
    </section>
    <section>
        <title>Section 2.2</title>
        <para>...</para>
        <footnote>...</footnote>
    </section>
</section> 
```

[我还尝试了一段时间根据@JLRishe](https://stackoverflow.com/a/16146259/2115381)的原始解决方案找到解决方案 。所以我找到了一个，并喜欢把它放在这里作为一种可能性的答案。我希望有一个更易于理解的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T10:48:25.583

这是适用于任何航向深度的通用解决方案：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>
  <xsl:key name="kChildHeader" 
           match="/*/*[starts-with(local-name(), 'heading_')]"
           use="generate-id(preceding-sibling::*
                       [local-name() = 
                        concat('heading_', 
                               substring-after(local-name(current()), '_') - 1
                              )][1]
                            )"/>
  <xsl:key name="kChildItem" 
           match="/*/*[not(starts-with(local-name(), 'heading_'))]"
           use="generate-id(preceding-sibling::*
                             [starts-with(local-name(), 'heading_')][1])"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="/*">
    <xsl:copy>
      <xsl:apply-templates select="heading_1" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="*[starts-with(local-name(), 'heading_')]">
    <xsl:copy>
      <xsl:apply-templates select="key('kChildHeader', generate-id()) |
                                   key('kChildItem', generate-id())"/>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

在您的示例输入上运行时，这会产生：

```
<root>
  <heading_1>
    <para>...</para>
    <list_1>...</list_1>
    <heading_2>
      <para>...</para>
      <heading_3>
        <para>...</para>
        <list_1>...</list_1>
      </heading_3>
    </heading_2>
    <heading_2>
      <para>...</para>
      <footnote>...</footnote>
    </heading_2>
  </heading_1>
  <heading_1>
    <para>...</para>
    <list_1>...</list_1>
    <heading_2>
      <para>...</para>
      <list_1>...</list_1>
      <list_2>...</list_2>
      <heading_3>
        <para>...</para>
      </heading_3>
    </heading_2>
    <heading_2>
      <para>...</para>
      <footnote>...</footnote>
    </heading_2>
  </heading_1>
</root> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T09:34:01.763

这是我目前的解决方案

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:exsl="http://exslt.org/common"
    extension-element-prefixes="exsl">

    <xsl:output method="xml" indent="yes"/>

    <xsl:variable name="headerLevel_txt">
        <heading name="__none__" level="0"/>
        <heading name="heading_1" level="1"/>
        <heading name="heading_2" level="2"/>
        <heading name="heading_3" level="3"/>
    </xsl:variable>

    <xsl:variable name="headerLevel" select="exsl:node-set($headerLevel_txt)" />

    <xsl:template match="@* | node()">
        <xsl:copy>
            <xsl:apply-templates select="@* | node()" >
                <xsl:with-param name="ch" select="h1" />
            </xsl:apply-templates>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="/*">
        <xsl:copy>
            <xsl:apply-templates select="heading_1" />
        </xsl:copy>
    </xsl:template>

    <xsl:template match="heading_1 | heading_2 | heading_3" >
        <xsl:param name="previousheaader" select="'__none__'" />

        <xsl:variable name="endOfLevel" >
            <xsl:call-template name="endOfLevel">
                <xsl:with-param name="currentheaader" select="name()" />
                <xsl:with-param name="previousheaader" select="$previousheaader" />
            </xsl:call-template>
        </xsl:variable>

        <xsl:if test ="$endOfLevel != 'end'" >
            <section>
                <title>
                    <xsl:value-of select="normalize-space(.)"/>
                </title>

                <!-- following siblings including next heading  -->
                <xsl:variable name="fsinh" select="following-sibling::*[ 
                              generate-id( preceding-sibling::*
                                           [
                                             name() = 'heading_1' or name() = 'heading_2' or  name() = 'heading_3'
                                           ][1]
                                          ) = generate-id(current()) ]" />

                    <xsl:apply-templates select="$fsinh[ position()!=last()]" >
                        <xsl:with-param name="previousheaader" select="name()" />
                    </xsl:apply-templates>

                <!-- following siblings heading same as next   -->
                <xsl:variable name="fshsan" select="following-sibling::*[  
                              name() = name($fsinh[last()]) and
                              generate-id( preceding-sibling::*
                                           [
                                             name() = name(current())
                                           ][1]
                                          ) = generate-id(current()) ]" />
                <xsl:apply-templates select="$fshsan" >
                    <xsl:with-param name="previousheaader" select="name()" />
                </xsl:apply-templates>

            </section>
        </xsl:if>

    </xsl:template>

    <xsl:template name="endOfLevel">
        <xsl:param name ="currentheaader"/>
        <xsl:param name ="previousheaader"/>
        <!-- The previous heading ends if the current has an higher level (smaller level number)-->
        <xsl:variable name ="cl" select="number($headerLevel/heading[@name=$currentheaader]/@level)"/>
        <xsl:variable name ="pl" select="number($headerLevel/heading[@name=$previousheaader]/@level)"/>
        <xsl:if test ="$cl &lt; $pl">end</xsl:if>
    </xsl:template>

</xsl:stylesheet> 
```

它将生成以下输出：

```
<root>
  <section>
    <title>Section 1</title>
    <para>...</para>
    <list_1>...</list_1>
    <section>
      <title>Section 1.1</title>
      <para>...</para>
      <section>
        <title>Section 1.1.1</title>
        <para>...</para>
        <list_1>...</list_1>
      </section>
    </section>
    <section>
      <title>Section 1.2</title>
      <para>...</para>
      <footnote>...</footnote>
    </section>
  </section>
  <section>
    <title>Section 2</title>
    <para>...</para>
    <list_1>...</list_1>
    <section>
      <title>Section 2.1</title>
      <para>...</para>
      <list_1>...</list_1>
      <list_2>...</list_2>
      <section>
        <title>Seciton 2.1.1</title>
        <para>...</para>
      </section>
    </section>
    <section>
      <title>Section 2.2</title>
      <para>...</para>
      <footnote>...</footnote>
    </section>
  </section>
</root> 
```

# php - PHP 注意：未定义索引：保存在第 87 行的 /HTML/contact.php 中

> ID：16188346
> 
> 赞同：0
> 
> 时间：2013-04-24T09:28:50.133
> 
> 标签：php

我完成了一个网站，当我尝试移动网站时，重写规则没有按计划工作。现在该网站可以正常工作，但我的联系表格是唯一不起作用的。我得到的错误是 unidentified index:save in contact.php on line 87。它与这行代码有关：

```
if (isset($_GET['save']) || $_GET['save'] == 'contact') {        
include('contact-form-submit.php'); 
```

在迁移之前，整个站点运行良好。

这是联系表格：

```
<?php  
                    // check for a successful form post  
                    if (isset($_GET['s'])) echo "<div class=\"alert alert-success\">".$_GET['s']."</div>";  

                    // check for a form error  
                    elseif (isset($_GET['e'])) echo "<div class=\"alert alert-error\">".$_GET['e']."</div>";  
                    ?>                          
                    <form method="POST action="contact.php">  
                        <input class="input-xlarge" name="contact_name" type="text" placeholder="Naam" <?php if(isset($_GET['contact_name']) && !isset($_GET['s'])) print 'value="'.$_GET['contact_name']. '"'; ?>> <br/>
                        <input class="input-xlarge" name="contact_tel" type="text" placeholder="Telefoonnummer" <?php if(isset($_GET['contact_tel']) && !isset($_GET['s'])) print 'value="'.$_GET['contact_tel']. '"'; ?>><br/>
                        <input class="input-xlarge" name="contact_email" type="text" placeholder="E-mail" <?php if(isset($_GET['contact_email']) && !isset($_GET['s'])) print 'value="'.$_GET['contact_email']. '"'; ?>><br/>
                        <input class="input-xlarge" name="contact_onderwerp" type="text" placeholder="Onderwerp" <?php if(isset($_GET['contact_onderwerp']) && !isset($_GET['s'])) print 'value="'.$_GET['contact_onderwerp']. '"'; ?>><br/>
                        <textarea rows="6" name="contact_message" placeholder="Typ uw vraag" <?php if(isset($_GET['contact_message']) && !isset($_GET['s'])) print 'value="'.$_GET['contact_message']. '"'; ?>></textarea><br/> 
                        <input type="hidden" name="save" value="contact"> 
                        <button type="submit" class="btn">Verstuur</button>                   
                    </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T09:30:57.907

三个问题：

## 1

> ```
>  if (isset($_GET['save']) || $_GET['save'] == 'contact') { 
> ```

该`isset`部分是为了通过利用短路来避免 PHP 通知（因此仅在确实存在时才评估），但`$_GET['save'] == 'contact'`您*应该*编写**，****而不是**.`$_GET['save']`**`&&``||`**

这一定被您以前平台上的弱错误报告设置所掩盖；看起来您已经迁移了您的网站内容，但没有迁移您的服务器设置...哎呀！

## 2

另一个问题是您的表单操作是“POST action=”，因为您`"`在 HTML 中忘记了 a：

```
<form method="POST action="contact.php"> 
```

你应该在你的文本编辑器中打开语法高亮，这样你就可以自己发现这些愚蠢的错别字。

## 3

最后，当您将表单方法固定为 时`POST`，`$_GET`仍不会使用表单值填充，因为**`$_POST`使用的是**.

以前没有办法这样做，除非您在其他地方有代码可以自动`$_POST`进入`$_GET`以在两种表单方法之间进行标准化（我有时会这样做）。但是，您没有向我们展示这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:30:36.690

这是因为您使用表单方法作为 POST 并尝试使用 _GET 使用 $_POST['save'] 来获取它。因此，将您的 if 条件更改为

```
if (isset($_POST['save']) && $_POST['save'] == 'contact') { 
```

# actionscript-3 - 满足条件时重复一个函数

> ID：16188348
> 
> 赞同：0
> 
> 时间：2013-04-24T09:28:52.677
> 
> 标签：actionscript-3, flash, loops, actionscript, air

我有一个关于动作脚本 3 的问题。

我在做一个游戏，游戏的基本规则是：

1.  一个物体从上面掉下来
2.  英雄（用户）必须避开物体
3.  如果物体撞到地面或英雄：英雄死亡或物体再次从顶部坠落。

我正在为对象使用添加子方法，并为秋季使用计时器功能。

问题是：当物体撞到地面时，函数不会循环。它就这样结束了。所以不会有任何坠落的物体了。

请帮我。谢谢 ：）

```
stage.addEventListener(Event.ENTER_FRAME, addfire1);

function addfire1(e:Event):void
{
    if (api1==false)//if object is not on the stage
    {
        randomx = randomRange();//generate random X
        addChild(api);
        api.x = randomx;//set x
        api1 = true;//object is now on stage
    }
    if (api.hitTestObject(hero) || api.hitTestObject(ground))
    {
        falltimer.stop();
        //stop timer;
        falltimer.reset();
        //reset fall Count to zero ;
        removeChild(api);//object removed
        api1=false;
    }
}

function firefall(Event:TimerEvent):void
{
    if (api1)
    {
        api.y +=  20;//set speed y
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T09:33:20.470

只需将两种情况分开：英雄和地板。

```
if (api.hitTestObject(hero))
{
    falltimer.stop();
    //stop timer;
    falltimer.reset();
    //reset fall Count to zero ;
    removeChild(api);//object removed
    api1=false;
} 
else if (api.hitTestObject(ground))
{
   //reset object's position
   api.y = -20;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T14:03:56.957

假设当时只有一个物体掉落，我不会移除该物体，而是将其移动到原始 y 位置和新的 x 位置。而不是有计时器，我会创建一个更新功能，每次你进入一个框架时都会运行。

```
stage.addEventListener(Event.ENTER_FRAME, update);

private function update(e:Event):void
{
    if(!api1) //if object is not on the stage (same as api1==false)
    {
        addfire1();
    }

    if(api1) //if object if on stage (same as api1==true)
    {
        firefall();
    }
}

private function addfire1(e:Event):void
{
    randomx = randomRange();//generate random X
    addChild(api);
    api.x = randomx;//set x
    api1 = true;//object is now on stage

    if (api.hitTestObject(hero))
    {
        hitHero(); //execute what should happen to the hero when the he is hit
        resetFire();
    }
    else if(api.hitTestObject(ground))
    {
        resetFire();
    }
}

private function firefall(Event:TimerEvent):void
{
    api.y +=  20;//set speed y
}

private function resetFire():void
{
    api.x = randomRange();
    api.y = 0;
} 
```

如果你这样写，你就不必把东西弄混了。尽量保持一切分开，一个功能做一件事。如果您正在制作大型游戏，请尝试将所有内容分开。

希望这可以解决问题并让您更轻松地完成游戏:)

# java - 尝试从数据库中检索值时出现 SQLite 数据库错误

> ID：16188349
> 
> 赞同：1
> 
> 时间：2013-04-24T09:28:53.220
> 
> 标签：java, android, sqlite, select

我有一个活动，我将值插入到 sqlite 表中，然后查询表以获取值。

**活动**：

```
public class TableActivity extends Activity {

    TableLayout follow_up_table;
    TableRow followup_tr_data;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_table);

        follow_up_table=(TableLayout) findViewById(R.id.follow_up_table);

        //---------------Essay Title Table Header-----------------------------------------------
        TableRow essay_title_tr_head = new TableRow(this);
        essay_title_tr_head.setId(10);
        essay_title_tr_head.setBackgroundResource(R.drawable.list_header);
        essay_title_tr_head.setLayoutParams(new LayoutParams(
        LayoutParams.FILL_PARENT,
        LayoutParams.WRAP_CONTENT));

        TextView label_essay_title = new TextView(this);
        label_essay_title.setId(20);
        label_essay_title.setText("Time");
        label_essay_title.setTextColor(Color.WHITE);
        label_essay_title.setPadding(5,5,5,5);
        essay_title_tr_head.addView(label_essay_title);// add the column to the table row here
        label_essay_title.setTextSize(12);    

        TextView label_description = new TextView(this);
        label_description.setId(20);
        label_description.setText("Student Name");
        label_description.setTextColor(Color.WHITE);
        label_description.setPadding(5,5,5,5);
        essay_title_tr_head.addView(label_description);// add the column to the table row here
        label_description.setTextSize(12);    

        follow_up_table.addView(essay_title_tr_head, new TableLayout.LayoutParams(
                LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT));

      //---------------Essay Title Table Header-----------------------------------------------

        //getTime();

        // database handler
       insertData("Morning", "2013-04-23 10:00:00", "Suresh Kumar");
       insertData("Morning", "2013-04-23 11:30:00", "Pravat Das");
       insertData("Evening", "2013-04-23 16:16:00", "Namita Roy");
       insertData("Evening", "2013-04-23 17:30:00", "Rakesh Mitra");
       insertData("After noon", "2013-04-23 10:00:00", "Anil Sarma");

       getTime();
    }

    public void getTime()
    {
        // database handler
         // database handler
        DatabaseHandler db = new DatabaseHandler(getApplicationContext());

        // Spinner Drop down elements
        List<String> lables = db.getTime();
        Iterator itr = lables.iterator();
        while(itr.hasNext())
        {
            System.out.println(itr.next());
        }

    }

    //method to insert data into local database
    public void insertData(String timeName, String time, String studentName)
    {
        DatabaseHandler db = new DatabaseHandler(TableActivity.this);
        ContentValues values = new ContentValues();
        //db.createDataBase();
         values.put("timeName",timeName);
         values.put("time",time);
         values.put("studentName",studentName);

         db.insertValues(timeName, time, studentName);
        db.close();

    }

} 
```

**数据库助手类**：

```
public class DatabaseHandler extends SQLiteOpenHelper {
    // Database Version
    private static final int DATABASE_VERSION = 1;

    // Database Name
    private static final String DATABASE_NAME = "counselor";

    // Labels table name
    private static final String TABLE_LABELS = "follow_up";

    // Labels Table Columns names
    private static final String KEY_ID = "id";
    private static final String KEY_time_name = "time_name";
    private static final String KEY_time = "time";
    private static final String KEY_student_name = "student_name";

    public DatabaseHandler(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    // Creating Tables
    @Override
    public void onCreate(SQLiteDatabase db) {
        // Category table create query
        String CREATE_CATEGORIES_TABLE = "CREATE TABLE follow_up (_id INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL , time_name VARCHAR, time DATETIME, student_name VARCHAR)";
        db.execSQL(CREATE_CATEGORIES_TABLE);
    }

    // Upgrading database
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // Drop older table if existed
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_LABELS);

        // Create tables again
        onCreate(db);
    }

    public void insertValues(String timeName, String time, String studentName)
    {
        SQLiteDatabase db = this.getWritableDatabase();
        String sql = "INSERT INTO follow_up ( time_name, time, student_name) VALUES ('"+timeName+"', '"+time+"', '"+studentName+"')";
        Cursor cursor = db.rawQuery(sql, null); //<< execute here 
           cursor.moveToFirst();
           db.close();
    }

// 
//    /**
//     * Getting all labels
//     * returns list of labels
//     * */
    public List<String> getTime(){
        List<String> labels = new ArrayList<String>();

        // Select All Query
        String selectQuery = "SELECT time_name FROM follow_up ORDER BY time";

        SQLiteDatabase db = this.getReadableDatabase();
        Cursor cursor = db.rawQuery(selectQuery, null);

        // looping through all rows and adding to list
        if (cursor.moveToFirst()) {
            do {
                labels.add(cursor.getString(1));
            } while (cursor.moveToNext());
        }

        // closing connection
        cursor.close();
        db.close();

        // returning lables
        return labels;
    }
} 
```

**logcat 中的错误**：

```
04-24 09:21:18.187: D/dalvikvm(1260): GC_FOR_ALLOC freed 66K, 7% free 2561K/2748K, paused 169ms, total 183ms
04-24 09:21:18.207: I/dalvikvm-heap(1260): Grow heap (frag case) to 3.222MB for 635812-byte allocation
04-24 09:21:18.328: D/dalvikvm(1260): GC_FOR_ALLOC freed 2K, 6% free 3179K/3372K, paused 116ms, total 116ms
04-24 09:21:18.467: D/dalvikvm(1260): GC_CONCURRENT freed <1K, 6% free 3190K/3372K, paused 9ms+27ms, total 141ms
04-24 09:21:19.167: E/CursorWindow(1260): Failed to read row 0, column 1 from a CursorWindow which has 5 rows, 1 columns.
04-24 09:21:19.167: D/AndroidRuntime(1260): Shutting down VM
04-24 09:21:19.167: W/dalvikvm(1260): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
04-24 09:21:19.197: E/AndroidRuntime(1260): FATAL EXCEPTION: main
04-24 09:21:19.197: E/AndroidRuntime(1260): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.ica.dynamictable/com.ica.dynamictable.TableActivity}: java.lang.IllegalStateException: Couldn't read row 0, col 1 from CursorWindow.  Make sure the Cursor is initialized correctly before accessing data from it.
04-24 09:21:19.197: E/AndroidRuntime(1260):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
04-24 09:21:19.197: E/AndroidRuntime(1260):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-24 09:21:19.197: E/AndroidRuntime(1260):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-24 09:21:19.197: E/AndroidRuntime(1260):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-24 09:21:19.197: E/AndroidRuntime(1260):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-24 09:21:19.197: E/AndroidRuntime(1260):     at android.os.Looper.loop(Looper.java:137)
04-24 09:21:19.197: E/AndroidRuntime(1260):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-24 09:21:19.197: E/AndroidRuntime(1260):     at java.lang.reflect.Method.invokeNative(Native Method)
04-24 09:21:19.197: E/AndroidRuntime(1260):     at java.lang.reflect.Method.invoke(Method.java:511)
04-24 09:21:19.197: E/AndroidRuntime(1260):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-24 09:21:19.197: E/AndroidRuntime(1260):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-24 09:21:19.197: E/AndroidRuntime(1260):     at dalvik.system.NativeStart.main(Native Method)
04-24 09:21:19.197: E/AndroidRuntime(1260): Caused by: java.lang.IllegalStateException: Couldn't read row 0, col 1 from CursorWindow.  Make sure the Cursor is initialized correctly before accessing data from it.
04-24 09:21:19.197: E/AndroidRuntime(1260):     at android.database.CursorWindow.nativeGetString(Native Method)
04-24 09:21:19.197: E/AndroidRuntime(1260):     at android.database.CursorWindow.getString(CursorWindow.java:434)
04-24 09:21:19.197: E/AndroidRuntime(1260):     at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:51)
04-24 09:21:19.197: E/AndroidRuntime(1260):     at com.ica.commons.DatabaseHandler.getTime(DatabaseHandler.java:77)
04-24 09:21:19.197: E/AndroidRuntime(1260):     at com.ica.dynamictable.TableActivity.getTime(TableActivity.java:83)
04-24 09:21:19.197: E/AndroidRuntime(1260):     at com.ica.dynamictable.TableActivity.onCreate(TableActivity.java:73)
04-24 09:21:19.197: E/AndroidRuntime(1260):     at android.app.Activity.performCreate(Activity.java:5104)
04-24 09:21:19.197: E/AndroidRuntime(1260):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-24 09:21:19.197: E/AndroidRuntime(1260):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
04-24 09:21:19.197: E/AndroidRuntime(1260):     ... 11 more 
```

**实际上我想要做的是将所有 time_name 放入一个列表中，以便我可以使用它填充一个表。**

我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T09:36:13.913

在您的 DBHelper 方法中`getTime()`，您使用查询仅获取一行。稍后在您使用的那个方法中`labels.add(cursor.getString(1));`

您应该`labels.add(cursor.getString(0));`改用，因为在`Cursor`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T09:39:57.913

`cursor.getString(1)`应该是`cursor.getString(0)`因为在查询中`"SELECT time_name FROM follow_up ORDER BY time";`你只会得到一个数据，即`time_name` 在索引`0`中`cursor.getString(0)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T09:42:00.713

```
SELECT time_name FROM follow_up ORDER BY time 
```

仅包含 1 列。因此，它的索引为 0。您可以使用

```
labels.add(cursor.getString(0)); 
```

或者，更干净：

```
int index = cursor.getColumnIndex("time_name"); 
```

和

```
labels.add(cursor.getString(index)); 
```

另外，我应该补充一点，你`if ... do ... while`可以用单个`while(cursor.moveToNext())`块替换，因为新创建的光标的位置总是在第一个之前，使第一个`moveToNext`有效地等同于`moveToFirst`

# sql-server - 通过 SQL 删除特定备份文件

> ID：16188350
> 
> 赞同：13
> 
> 时间：2013-04-24T09:28:53.837
> 
> 标签：sql-server, backup

我一直在研究如何**通过 SQL 查询删除特定的备份文件**，但我只找到关于“删除早于某个日期的备份”的结果。那不是我想要的。我想保留旧备份，但我希望能够通过其 ID 删除特定备份。

我可以轻松地从 msdb 表中删除条目及其给定备份的还原历史记录，但我希望能够通过 SQL 查询删除文件（**我知道它们的完整路径**，因为它存储在数据库中)，这样他们就不会一直浪费磁盘空间。

过程“xp_delete_file”似乎不允许删除特定文件。

我假设如果有删除旧文件的过程，应该有某种方法可以删除特定文件。请不要担心这里的安全。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-09-19T19:36:33.667

可能年纪大了，但可能会帮助某人。**xp_delete_file** 可用于删除特定的备份文件。试试下面的代码：

```
EXECUTE master.dbo.xp_delete_file 0,N'c:\backup\backup1.bak' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-11T19:55:56.213

```
--Define a backup device and physical name. 
USE AdventureWorks2012 ;
GO
EXEC sp_addumpdevice 'disk', 'mybackupdisk', 'c:\backup\backup1.bak' ;
GO
--Delete the backup device and the physical name.
USE AdventureWorks2012 ;
GO
EXEC sp_dropdevice ' mybackupdisk ', 'delfile' ;
GO 
```

[http://technet.microsoft.com/en-us/library/ms188711.aspx](http://technet.microsoft.com/en-us/library/ms188711.aspx)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-24T09:57:13.287

这就是我需要的。

```
xp_cmdshell 'del c:\backup\file.bak' 
```

可能需要通过以下方式激活命令：

```
EXEC sp_configure 'show advanced options', 1
GO

EXEC sp_configure 'xp_cmdshell', 1
GO

RECONFIGURE
GO 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-19T13:54:55.717

创建一个备份设备，其物理名称指向备份文件：

```
exec master..sp_addumpdevice @devtype = 'disk',
@logicalname = '<logical_name>',
@physicalname = '<path + physical filename>' 
```

然后，执行：

```
exec master..sp_dropdevice '<logical_name>', delfile 
```

你的文件不见了！

物理文件名可以在表“msdb..backupmediafamily”中找到

# single-sign-on - 如何将 openam 配置为身份提供者 (IdP) 以测试基于 SAML 的 SSO

> ID：16188353
> 
> 赞同：5
> 
> 时间：2013-04-24T09:28:57.673
> 
> 标签：single-sign-on, saml, openam

我正在尝试将 openam 配置为身份提供者来测试我的基于 SAML 的服务提供者应用程序。

我进行了很多搜索并看到了 openam 的文档。openam 支持很多东西，我现在可能不需要。我不想阅读整个文档，这将花费大量时间阅读我现在不想测试的东西。[我什至在http://docs.forgerock.org/en/openam/10.0.0/admin-guide/index/index.html](http://docs.forgerock.org/en/openam/10.0.0/admin-guide/index/index.html)看到了chatpet 9“管理 SAML 2.0 SSO” 但在此之前需要配置很多东西.

是否有任何快速入门指南可以将其作为基于 saml 的 IdP 进行测试？

编辑

不是很快，详细的也还好。但我希望 OpenAm 作为身份提供者。SP 是我们开发的托管在 Jetty 上的应用程序。还告诉我我必须在 SP 上进行哪些更改，例如应用程序的哪些 url 应该响应什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T21:40:53.017

你的问题没有万能的答案。设置 SAMLv2 联合很大程度上取决于实际的 SP 实现，有些 SP 可以使用 SAML 元数据，有些则不能。在两个 OpenAM 实例之间设置联合以供参考的最简单方法如下：

*   在 node1 上创建托管 IdP 向导
*   在 node2 上创建托管 SP 向导
*   在两个节点上删除持久的 NameID 格式，因此两者都将在列表顶部具有瞬态
*   在 node1 上注册远程 SP 向导，URL 为：node2/openam/saml2/jsp/exportmetadata.jsp
*   在 node2 上注册远程 IdP 向导，URL 为：node1/openam/saml2/jsp/exportmetadata.jsp
*   在 Hosted SP 设置中的 node2 上，将临时用户设置为“匿名”

毕竟，您可以使用以下方法测试联邦：

*   /openam/spssoinit?metaAlias=/sp&idpEntityID=node1_entityid on node2
*   /openam/idpssoinit?metaAlias=/idp&spEntityID=node2_entityid on node1

我使用了默认的 metaAlias 值，但这些值应该在控制台页面上可见。同样，通过下载元数据，您可以查看给定实体的实际实体 ID。

基于此，您现在应该看到，使用 OpenAM IdP，您至少可以使用 idpssoinit URL 测试 SAML 支持（如果您的 SP 支持未经请求的响应），但从另一方面来看，它在很大程度上取决于您的 SP 实现您需要的方式实际触发 SAML 身份验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T11:12:12.027

[这](http://blog.ebadgujar.com/2010/11/steps-for-configuring-openam-as-idp.html)似乎是一个简单的设置。

# php - 如何在您网站的 url 中执行脚本

> ID：16188361
> 
> 赞同：-1
> 
> 时间：2013-04-24T09:29:14.657
> 
> 标签：php, javascript

是否可以从 URL 执行 javascript 函数？

就像是：`http://www.mysite.com/mypage.php?alert(HelloWorld);`

当访问此 url 时，它应该运行脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:30:34.900

在任意网站上？不，这意味着浏览器会在每个站点上创建一个可怕的[XSS 安全漏洞。](https://en.wikipedia.org/wiki/Cross-site_scripting)

在您的网站上？您可以编写一个服务器端脚本来读取查询字符串并将其注入到一个`<script>`元素中……这会给您的网站带来上述可怕的 XSS 安全漏洞。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:53:10.003

您可以在您的 PHP 文件中定义它！

你的 PHP 文件：

```
if($_GET['script'] == "1")
{
...do script
} 
```

在您的网址中：

```
http://youraddress.com/index.php?script=1 
```

为自己定制。希望有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T09:31:36.057

这是不可能的，而且将是一个巨大的安全问题。在登录页面中设置脚本并在加载后运行它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T09:34:08.563

这是一件非常愚蠢的事情。但是你可以...你不需要 PHP。只需使用 Javascript。

在 <body onload=""> 只放 eval(decodeURIComponent(window.location.search.substr(1))); 像这样：

```
<body onload="eval(decodeURIComponent(window.location.search.substr(1)));"> 
```

网址应该像[http://www.mysite.com/mypage.php?alert](http://www.mysite.com/mypage.php?alert) ('HelloWorld');

（所以丢掉 url 中的 <script></script> ）

# java - 操作系统使用java登录和注销时间

> ID：16188365
> 
> 赞同：1
> 
> 时间：2013-04-24T09:29:24.497
> 
> 标签：java

谁能帮我知道如何使用java api检测系统登录和注销时间？只有登录时的登录时间和系统关闭时的注销时间。如果可能的话，der 也可用于 linux 机器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T09:39:34.000

看看这个：

```
public static long getSystemUptime() throws Exception {
long uptime = -1;
String os = System.getProperty("os.name").toLowerCase();
if (os.contains("win")) {
    Process uptimeProc = Runtime.getRuntime().exec("net stats srv");
    BufferedReader in = new BufferedReader(new InputStreamReader(uptimeProc.getInputStream()));
    String line;
    while ((line = in.readLine()) != null) {
        if (line.startsWith("Statistics since")) {
            SimpleDateFormat format = new SimpleDateFormat("'Statistics since' MM/dd/yyyy hh:mm:ss a");
            Date boottime = format.parse(line);
            uptime = System.currentTimeMillis() - boottime.getTime();
            break;
        }
    }
} else if (os.contains("mac") || os.contains("nix") || os.contains("nux") || os.contains("aix")) {
    Process uptimeProc = Runtime.getRuntime().exec("uptime");
    BufferedReader in = new BufferedReader(new InputStreamReader(uptimeProc.getInputStream()));
    String line = in.readLine();
    if (line != null) {
        Pattern parse = Pattern.compile("((\\d+) days,)? (\\d+):(\\d+)");
        Matcher matcher = parse.matcher(line);
        if (matcher.find()) {
            String _days = matcher.group(2);
            String _hours = matcher.group(3);
            String _minutes = matcher.group(4);
            int days = _days != null ? Integer.parseInt(_days) : 0;
            int hours = _hours != null ? Integer.parseInt(_hours) : 0;
            int minutes = _minutes != null ? Integer.parseInt(_minutes) : 0;
            uptime = (minutes * 60000) + (hours * 60000 * 60) + (days * 6000 * 60 * 24);
        }
    }
}
return uptime;
} 
```

这将为您提供正常运行时间，因此请从当前时间中减去它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:38:23.510

如果系统是指操作系统，那么我建议您为此使用脚本，尤其是对于 linux。例如，您可以使用文件 ~/.bashrc 来检测登录。

# java - scala反射在这种情况下不起作用

> ID：16188366
> 
> 赞同：2
> 
> 时间：2013-04-24T09:29:27.260
> 
> 标签：java, scala, reflection

我声明了一个类：

```
trait TO {  
    @BeanProperty var id: String = _ 
    @BeanProperty var age : Int = _     
    @BeanProperty var createdAt : Long = _ 
    @BeanProperty var disable: Boolean = _ 
}
class UMTTestObject extends TO {
    @BeanProperty var inner: UMTInnerTO = _
}
class UMTInnerTO extends TO{} 
```

并且在反思中，这对于 UMTInnerObject 的 setAge 不起作用：

```
setter.invoke(inner, 0) 
```

而 setter 是 UMTInnerObject 的 setAge，inner 是 UMTInnerObject 的一个实例

错误消息显示：

java.lang.NoSuchMethodError: me.baihe.blackhole.luna.helpers.TO$class.setAge(Lme/baihe/blackhole/luna/helpers/TO;I)V

这很令人困惑——

有谁知道为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:38:25.647

这个 REPL 会话展示了如何使用 Scala 反射 API 调用 setter：

```
scala> import scala.reflect.runtime. { universe => ru }
import scala.reflect.runtime.{universe=>ru}

scala> trait TO { var age: Int = _ }
defined trait TO

scala> class UMTInnerTO extends TO
defined class UMTInnerTO

scala> val inner = new UMTInnerTO
inner: UMTInnerTO = UMTInnerTO@173379f

scala> val m = ru.runtimeMirror(inner.getClass.getClassLoader)
m: reflect.runtime.universe.Mirror ...

scala> val im = m.reflect(inner)
im: reflect.runtime.universe.InstanceMirror = instance mirror for UMTInnerTO@173379f

scala> val setterSymb = (ru.typeOf[UMTInnerTO].members find (_.name.decoded == "age_=")).get
setterSymb: reflect.runtime.universe.Symbol = method age_=

scala> val setter = im.reflectMethod(setterSymb.asMethod)
setter: reflect.runtime.universe.MethodMirror = method mirror for TO.age_$eq(x$1: scala.Int): scala.Unit (bound to UMTInnerTO@173379f)

scala> inner.age
res0: Int = 0

scala> setter(5)
res1: Any = ()

scala> inner.age
res2: Int = 5 
```

您可以访问[Scala 反射文档](http://docs.scala-lang.org/overviews/reflection/overview.html)以了解代码段中发生的情况。

--

**更新**：无论如何，如果您仍然对 Java API 感兴趣，我们开始吧！

您应该知道 Scala 中的*setter*不使用 Java 命名约定。您将找不到`setAge`方法（至少，如果您不手动声明它）。相反，您必须搜索一种`age_=`方法。

```
scala> classOf[UMTInnerTO].getMethod("age_$eq", classOf[Int])
res0: java.lang.reflect.Method = public void UMTInnerTO.age_$eq(int)

scala> inner.age
res1: Int = 0

scala> res0.invoke(inner, 3: Integer)
res2: Object = null

scala> inner.age
res3: Int = 3 
```

这篇关于 getter 和 setter[的帖子](http://dustinmartin.net/getters-and-setters-in-scala/)可能会有所帮助。

# c# - 从 apicontroller 传递值以在 asp.net mvc4 中查看

> ID：16188367
> 
> 赞同：0
> 
> 时间：2013-04-24T09:29:27.440
> 
> 标签：c#, asp.net-mvc-4, asp.net-web-api

我的 api 控制器中有数据列表。

我想使用类似于 viewbag 的东西传递这些数据来查看。

我知道我们不能在 apicontrller 中使用 viewbag，所以有什么替代方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T09:32:06.777

通常 ApiControllers 不返回视图。他们返回`models`，或`HttpResponseMessage`就此而言。因此，您可以简单地拥有一个包含所需属性的视图模型，然后让您的 API 操作返回此视图模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:44:27.373

你不应该这样做，API 控制器只返回数据（XML、Json 等）。所以你应该有两个控制器：

*   **System.Web.Http.ApiControlle**使用它来返回数据集合，例如：

    ```
    public List<Company> Get()
    {
        return this._companyService.GetCompanies();
    } 
    ```

    返回 Json 或 XML 中的公司列表，而不是视图。

*   **System.Web.Mvc.Controller**使用这个来返回没有数据的 HTML，例如没有行或客户端模板的 HTML 表。

如何将两者联系起来？这个想法是使用 JavaScript 在客户端呈现，这样做有很多理由，主要是您在两个完全分离的提要中拥有数据和演示文稿，因此您将能够重用您的数据馈送（例如在移动应用程序中）。

在客户端渲染使用一些 JavaScript 渲染引擎是个好主意，看看[http://handlebarsjs.com/](http://handlebarsjs.com/)。

使用 Jquery.getJSON() 获取您的 JSON 并从您的 DOM 或通过 Ajax 获取您的车把模板，选择一个 DOM 元素以插入生成的 HTML。获得 JSON、模板和容器后，请使用以下函数：

```
function RenderJson (json,template,container) {
    var compiledTemplate = Handlebars.compile(template);
    var html = compiledTemplate(json);
    $(container).html(html); //set new content
} 
```

我知道这似乎是一个更复杂的过程，但如果你尝试它，你会看到它的优势，例如，你将能够分别测试你的数据馈送和数据呈现。

希望能帮助到你 ：）

# jsf - 渲染组件时如何应用 Primefaces 效果

> ID：16188369
> 
> 赞同：0
> 
> 时间：2013-04-24T09:29:34.780
> 
> 标签：jsf, primefaces

我有拖放面板和拖放面板，当组件被拖放到拖放面板中时，我会显示一个新面板并根据渲染布尔属性隐藏旧面板，如下所示：

**1-xhtml：**

```
<p:outputPanel id="oldPanel" rendered=#{myBean.old_panel_rendered}> .... </p:outputPanel>
<p:outputPanel id="newPanel" rendered=#{myBean.new_panel_rendered}> .... </p:outputPanel> 
```

**2-豆：**

```
old_panel_rendered=true;
new_panel_rendered=false;

public void onComponentDrop(DragDropEvent ddEvent) { 

        old_panel_rendered=false;
        new_panel_rendered=true;

    } 
```

如何在渲染时为 newPanel 执行效果，并在未渲染时为 oldPanel 执行效果。

请指教，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:27:26.137

调用 js 函数，该函数将在新项目丢弃时应用效果：

```
<p:ajax listener="#{bean.onDrop}" onstart="applyEffects();" update="newPanel" /> 
```

功能是：

```
function applyEffects() {
    var oldPanel = $(document.getElementById('oldPanel'));
    var newPanel = $(document.getElementById('newPanel'));
    oldPanel.css({"display":"none"});//or oldPanel.fadeOut(500) which looks fancy
    newPanel.css({"display":"inline"});
    newPanel.effect("highlight",
            {color:"#87FF7A"}, 1500);
} 
```

*   调用时不要忘记提供组件的确切客户端 ID `document.getElementById`。您可以通过浏览器的开发人员设置来检测它。如果有问题，你可以放弃`update="newPanel"`，或者你可以试试`update="oldpanel newpanel"`。

为了能够将其应用于特定面板：

```
public void onComponentDrop(DragDropEvent ddEvent) { 
    int id = event.getData();//or sth.similar to getId
    RequestContext.getCurrentInstance().addCallbackParam("index", id);
} 
```

上面的代码向 ajax 响应添加了一个参数，它可以通过以下方式检索：

```
function applyEffects(xhr,status,args) {
    var oldPanel = $(document.getElementById('oldPanel'));
    var newPanel = $(document.getElementById('newPanel'));
    if(args.id=='oldPanel') {//oldPanel or whatever which equals to eventID
        oldPanel.css({"display":"none"});//or oldPanel.fadeOut(500) which looks fancy
    }
    newPanel.css({"display":"inline"});
    newPanel.effect("highlight",
            {color:"#87FF7A"}, 1500);
} 
```

你应该从`p:ajax oncomplete="applyEffects(xhr,status,args);"`. 我在这里直接编码，因此可以在 IDE 上轻松看到一些错误。

# dart - 如何构建具有多个视图的复杂 Web UI 应用程序？

> ID：16188370
> 
> 赞同：23
> 
> 时间：2013-04-24T09:29:39.707
> 
> 标签：dart, dart-webui

我将构建具有许多不同视图的复杂应用程序。想象一下例如 eshop 解决方案。可以有很多不同的观点：

*   包含一些静态信息的联系页面
*   新客户登记表
*   查看您的订单
*   商品一览
*   有关产品的详细信息
*   ...

现在我有点困惑，如何使用 Web UI 构建如此复杂的应用程序。我希望将视图的 HTML 模板分隔在多个文件中，并有一些逻辑来确定应该呈现哪一个。

假设我想要一个包含页眉和页脚等基本内容的主模板，那么我有很多内容模板，这些模板应该被注入到主模板内的正确位置。

到目前为止，我一直只看到使用 Dart Web UI 的小型单模板示例，所以我不知道如何实现这一点。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-24T12:23:04.300

我已经整理了一个小例子来说明我目前是如何做到的（希望我们很快就会看到一个更大的*最佳实践*示例应用程序）：

**有关此示例的完整源代码，请参阅[要点：如何在 Dart 中构建具有多个视图的 Web UI 应用程序](https://gist.github.com/marcojakob/5451636)**

## 主要应用

*   *app.html* - 包含主应用程序布局，实例化*页眉*和*页脚*组件并为视图创建一个容器。
*   *app.dart* - 处理导航事件并替换视图容器内的视图（见下文）
*   *应用程序.css*

## 网页组件

### 页眉和页脚

*   *header.html* - 标题的 Web 组件
*   *footer.html* - 页脚的 Web 组件

### 意见

*   *contact.html* - 联系人视图的 Web 组件
*   *contact.dart* - 包含 ContactsView 类的 Dart 文件
*   *products.html* - Products 视图的 Web 组件
*   *products.dart* - 包含 ProductsView 类的 Dart 文件

## 在视图之间切换

[实例化 Web 组件](http://www.dartlang.org/articles/web-ui/spec.html#instantiation)的标准方法是`<x-foo></x-foo>`在**HTML**中使用。由于我们有不同的视图，我们必须在**Dart**代码中实例化 Web 组件。为此，我们必须手动调用 Web 组件生命周期方法。这不是直截了当的，将来可能会改进（参见[第 93 期](https://github.com/dart-lang/web-ui/issues/93)，其中也包含一些示例）。

以下是切换视图的方法（来源`app.dart`）：

```
import 'dart:html';
import 'package:web_ui/web_ui.dart';

import 'contact.dart';
import 'products.dart';

void main() {
  // Add view navigation event handlers
  query('#show-contact-button').onClick.listen(showContactView);
  query('#show-products-button').onClick.listen(showProductView);
}

// Used to call lifecycle methods on the current view
ComponentItem lifecycleCaller;

/// Switches to contacts view
void showContactView(Event e) {
  removeCurrentView();

  ContactView contactView = new ContactView()
      ..host = new Element.html('<contact-view></contact-view>');

  lifecycleCaller = new ComponentItem(contactView)..create();
  query('#view-container').children.add(contactView.host);
  lifecycleCaller.insert();
}

/// Switches to products view
void showProductView(Event e) {
  removeCurrentView();

  ProductsView productsView = new ProductsView()
      ..host = new Element.html('<products-view></products-view>');

  lifecycleCaller = new ComponentItem(productsView);
  lifecycleCaller.create();
  query('#view-container').children.add(productsView.host);
  lifecycleCaller.insert();
}

void removeCurrentView() {
  query('#view-container').children.clear();

  if (lifecycleCaller != null) {
    // Call the lifecycle method in case the component needs to do some clean up
    lifecycleCaller.remove();
  }
} 
```

这里是来源`app.html`：

```
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    <title>A Complex Web UI Application</title>
    <link rel="stylesheet" href="app.css">

    <!-- import the header and footer components -->
    <link rel="components" href="header.html">
    <link rel="components" href="footer.html">

    <!-- import the view components -->
    <link rel="components" href="contact.html">
    <link rel="components" href="products.html">
  </head>
  <body>
    <header-component></header-component>

    <div id="view-container"></div>

    <button id="show-contact-button">show contact view</button>
    <button id="show-products-button">show products view</button>

    <footer-component></footer-component>

    <script type="application/dart" src="app.dart"></script>
    <script src="packages/browser/dart.js"></script>
  </body>
</html> 
```

**注意**：我必须通过导入视图组件，`<link rel="components" href="contact.html">`即使我没有在 HTML 文件中直接引用它。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-04-25T04:12:01.567

您可以使用结合模板的[路由库来极大地自动化该过程。](http://pub.dartlang.org/packages/route)

在`urls.dart`您将定义应用程序将处理的路由。`app.dart`将设置路由监听器。最后，`app.html`将持有一个页面容器，该容器将自动切换页面组件（通过使用模板实例化）。

设置此结构后，可以通过常规锚标记处理页面导航，而不是调用自定义函数来更改页面。

要添加新页面，您必须执行以下操作：

1.  在中添加新路线`urls.dart`
2.  `pages/`在文件夹中新建一个 WebComponent
3.  为页面添加新的条件模板`app.html`

下面你可以看到一个处理主页和联系页面的应用程序示例：

**网址.dart：**

```
library urls;

import 'package:route/url_pattern.dart';

final homeUrl = new UrlPattern(r'/');
final contactUrl = new UrlPattern(r'/contact'); 
```

**应用程序飞镖：**

```
import 'dart:html';
import 'package:web_ui/web_ui.dart';
import 'package:route/client.dart';
import 'urls.dart' as urls;
import 'package:web_ui/watcher.dart' as watchers;  

// Setup the routes to listen to    
void main() {
  var router = new Router()
  ..addHandler(urls.homeUrl, showPage)
  ..addHandler(urls.contactUrl, showPage)  
  ..listen();
}

// Change the page that we are on
void showPage(String path) {
  watchers.dispatch();
} 
```

**应用程序.html**

```
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    <title>Sample app</title>
    <link rel="stylesheet" href="app.css">

    <!-- import the pages -->
    <link rel="components" href="pages/xhomepage.html">
    <link rel="components" href="pages/xcontactpage.html">
  </head>
  <body>

    <!-- You could put a header here if you want !-->

    <!-- Templates take care of automatically switching the page !-->
    <div class="pages">    
      <template instantiate="if urls.homeUrl.matches(window.location.pathname)">
        <x-home-page></x-home-page>
      </template>
      <template instantiate="if urls.contactUrl.matches(window.location.pathname)">
        <x-contact-page></x-contact-page>
      </template>
    </div>

    <!-- You could put a footer here if you want !-->

    <script type="application/dart" src="app.dart"></script>
    <script src="packages/browser/dart.js"></script>
  </body>
</html> 
```

**编辑：**我删除了 app.dart 必须定义自己的页面的步骤。相反，模板会检查 URL 路径是否与 urls.dart 中定义的 UrlPattern 匹配。这应该更简化一些事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-10T11:58:03.707

我创建了一个 Polymer 元素`<bind-view>`，它根据当前路线创建和添加视图元素。该元素与[route_hierarchical](http://pub.dartlang.org/search?q=route_hierarchical)包一起使用。
有关更多详细信息，请参阅GitHub 上的[BWU 聚合物路由](https://github.com/bwu-dart/bwu_polymer_routing)。

路由配置看起来像

```
library bwu_polymer_routing_example.route_initializer;

import 'package:route_hierarchical/client.dart' as rt;
import 'package:bwu_polymer_routing/module.dart';

class RouteInitializer implements Function {
  void call(rt.Router router, RouteViewFactory views) {
    views.configure({

      'usersList': routeCfg(
          path: '/users',
          view: 'user-list',
          defaultRoute: true,
          dontLeaveOnParamChanges: true,
          enter: (route) => router.go('usersList', {})),
      'user': routeCfg(
          path: '/user/:userId',
          view: 'user-element',
          dontLeaveOnParamChanges: true,
          mount: {
        'articleList': routeCfg(
            path: '/articles',
            view: 'article-list',
            defaultRoute: true,
            dontLeaveOnParamChanges: true,
            mount: {
          'article': routeCfg(
              path: '/article/:articleId',
              view: 'article-element',
              bindParameters: ['articleId', 'userId'],
              dontLeaveOnParamChanges: true,
              mount: {
            'view': routeCfg(
                path: '/view',
                defaultRoute: true,
                dontLeaveOnParamChanges: true),
            'edit': routeCfg(
                path: '/edit',
                dontLeaveOnParamChanges: true)
          })
        })
      })
    });
  }
} 
```

包含元素，一个占位符，其中为当前路由配置的视图被添加`<app-element>`。`<bind-view>`视图可以嵌套。任何视图本身都可以包含一个`<bind-view>`元素。这允许在没有太多样板的情况下创建分层视图组合。

```
<!DOCTYPE html>

<link rel='import' href='../../../../packages/polymer/polymer.html'>

<link rel='import' href='../../../../packages/bwu_polymer_routing/bind_view.html'>
<link rel='import' href='user_list.html'>
<link rel='import' href='user_element.html'>
<link rel='import' href='article_list.html'>
<link rel='import' href='article_element.html'>

<polymer-element name='app-element'>
  <template>

    <bind-view id='app-element'></bind-view>

  </template>
  <script type='application/dart' src='app_element.dart'></script>
</polymer-element> 
```

该`app_element.dart`文件包含路由器初始化代码

```
class AppModule extends Module {
  AppModule() : super() {
    install(new RoutingModule(usePushState: true));
    bindByKey(ROUTE_INITIALIZER_FN_KEY, toValue: new RouteInitializer());
  }
}

@CustomTag('app-element')
class AppElement extends PolymerElement with DiContext {
  AppElement.created() : super.created();

  @override
  void attached() {

    super.attached();

    initDiContext(this, new ModuleInjector([new AppModule()]));
  }
} 
```

该包还包含一些辅助 mixin，用于向 Polymer 元素添加[依赖注入 (DI)](http://pub.dartlang.org/packages/di)功能，例如`DiContext`此处使用的 mixin。构造函数注入不能与 Polymer 一起使用，但事件是一个很好的替代品。

`DiConsumer`mixin 允许使用这个简单的代码从 DI 请求一个实例

```
@CustomTag('article-list')
class ArticleList extends PolymerElement with DiConsumer {

  @observable String userId;

  @override
  void attached() {
    super.attached();

    // The two lines below show how to request instances from DI
    // but they are redundant here because 
    // route parameters are assigned to attributes of the view automatically
    // when the view is created or when the values change
    var di = inject(this, [RouteProvider /* add more types here as needed */]);
    userId = (di[RouteProvider] as RouteProvider).parameters['userId'];
  }
} 
```

# java - 播放框架 2 渲染 pdf

> ID：16188374
> 
> 赞同：5
> 
> 时间：2013-04-24T09:29:50.600
> 
> 标签：java, playframework-2.0, pdf-generation

是否可以使用 play framework 2 渲染 pdf 文档？

（有一个模块可以为play 1.x渲染pdf。有没有办法在play 2中渲染？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T09:48:37.770

如果您希望将视图模板呈现为 PDF 文档，请查看[此模块](https://github.com/innoveit/play2-pdf)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-15T12:13:35.223

有一个 apache fop 插件，它可以从 fop 文件中创建 pdf。

fop 文件不是最直观的文件，但最后我总能找到一种方法来按照我想要的方式格式化复杂的 pdf。

要将插件添加到您的播放应用程序中，请将其添加到 build.sbt ：

```
"org.apache.avalon.framework" % "avalon-framework-api" % "4.2.0" from "http://repo1.maven.org/maven2/avalon-framework/avalon-framework-api/4.2.0/avalon-framework-api-4.2.0.jar",
"org.apache.avalon.framework" % "avalon-framework-impl" % "4.2.0" from "http://repo1.maven.org/maven2/avalon-framework/avalon-framework-impl/4.2.0/avalon-framework-impl-4.2.0.jar",
"org.apache.xmlgraphics" % "fop" % "1.1" 
```

这是我从 fop 字符串创建 pdf 文件的函数：

```
private static FopFactory   fopFactory = FopFactory.newInstance();

/**
 * Wrote according to this example :
 * http://xmlgraphics.apache.org/fop/1.1/embedding.html#examples
 * @param outputPath    Path to the file to create (must end by .pdf).
 * @param foString      Description of the pdf document to render.
 *                      http://www.w3schools.com/xslfo/default.asp
 * @return  the output path.
 */
public static String toPdf(String outputPath, String foString)
{
    OutputStream out;
    try {
        File fileOutput = new File(outputPath);
        out = new BufferedOutputStream(new FileOutputStream(fileOutput));
    } catch (FileNotFoundException e) {
        Logger.error("InvoicePdf.invoiceToPdf: " + e.getMessage());
        return null;
    }
    try {
        Fop fop = fopFactory.newFop(MimeConstants.MIME_PDF, out);
        TransformerFactory factory = TransformerFactory.newInstance();
        Transformer transformer = factory.newTransformer();
        Source src = new StreamSource(new StringReader(foString));
        Result res = new SAXResult(fop.getDefaultHandler());
        transformer.transform(src, res);
    }catch (Throwable e){
        Logger.error("InvoicePdf.invoiceToPdf: " + e.getMessage());
        e.printStackTrace();
        return null;
    } finally {
        try {
            out.close();
        } catch (Throwable e) {
            Logger.error("InvoicePdf.invoiceToPdf: " + e.getMessage());
        }
    }
    return outputPath;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-04T18:28:33.637

使用 scala 游戏时，您可以使用 scala 库[https://github.com/cloudify/sPDF](https://github.com/cloudify/sPDF)。

然后在您的 Play 2.x 控制器中，您可以使用以下代码呈现 pdf：

```
import io.github.cloudify.scala.spdf.{Pdf, PdfConfig, Portrait}

def yourAction = Action { implicit request =>
  val pdf = Pdf(
    executablePath = "/usr/bin/wkhtmltopdfPath",
    config = new PdfConfig {
      orientation := Portrait
      pageSize := "A4"
      marginTop := "0.5in"
      marginBottom := "0.5in"
      marginLeft := "0.5in"
      marginRight := "0.5in"
      printMediaType := Some(true)
    }
  )

  val outputStream = new ByteArrayOutputStream

  pdf.run(
    sourceDocument = views.html.yourTemplate().toString(),
    destinationDocument = outputStream
  )

  Ok(outputStream.toByteArray).as("application/pdf")
} 
```

# dynamics-crm-2011 - 如何在自定义按钮上发送电子邮件模板单击crm

> ID：16188377
> 
> 赞同：-2
> 
> 时间：2013-04-24T09:29:56.100
> 
> 标签：dynamics-crm-2011, dynamics-crm, crm, dynamics-crm-4, dynamics-crm-online

我在自定义实体的网格视图中添加了一个自定义按钮，从这里如何设置该按钮的操作以发送电子邮件以选择关联记录。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T02:34:00.587

创建一个发送电子邮件的工作流，然后在您单击自定义按钮时使用 javascript 触发该工作流。

# paypal - [OpenERP]如何将paypal的交易状态回复到openerp表单中？

> ID：16188378
> 
> 赞同：2
> 
> 时间：2013-04-24T09:29:58.733
> 
> 标签：paypal, openerp

我有一个 openerp 应用程序，其中包括使用贝宝支付的选项。付款后，我想向用户显示交易状态。如何从 paypal 获取交易状态的响应到 openerp 表单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:35:40.867

取决于您使用的 PayPal 服务。例如，如果您使用的是 Website Payments Pro DoDirectPayment API 或 Express Checkout，您应该会在买家完成付款后收到回复到您的系统。然后您可以在屏幕上显示结果。如果您使用的是网站支付标准，您可以使用[PDT](https://www.x.com/developers/paypal/documentation-tools/ipn/integration-guide/IPNPDTAnAlternativetoIPN)将响应返回到退货页面以显示给您的买家。如果您希望将结果存储在服务器/数据库中并能够随时查看它们，您可以使用[IPN](https://www.x.com/developers/paypal/documentation-tools/ipn/integration-guide/IPNIntro)。 [付款完成后， IPN](https://www.x.com/developers/paypal/documentation-tools/ipn/integration-guide/IPNIntro)会将详细信息的 POST 发送到您的系统，您可以随时查询系统的状态。

# performance - Spring集成jdbc消息存储性能

> ID：16188379
> 
> 赞同：2
> 
> 时间：2013-04-24T09:30:00.380
> 
> 标签：performance, jdbc, store, spring-integration, aggregator

我使用 SimpleMessageStore ( memory ) 作为 Aggregator 的默认存储，但由于我需要持久存储，我开始使用由 Mysql 5.5 支持的 jdbc 解决方案

但我真的很担心它的性能，因为使用 PerfTest（databene 的 contiperf），内存存储达到 6000 条消息/秒，而使用 mysql（或 redis，或 mongo），我不能达到超过 15-20消息/秒。

```
 <int:aggregator      id="XDRAggegator"
                        input-channel="mqChannel"
                        output-channel="publishChannel"
                        message-store="jdbc-messageStore"
   ....

    <bean id="reaper" class="org.springframework.integration.store.MessageGroupStoreReaper">
        <property name="messageGroupStore" ref="jdbc-messageStore"/>
        <property name="timeout"           value="${msg.timeout}"/>
   </bean>

<task:scheduler id="taskScheduler"/>

<task:scheduled-tasks scheduler="taskScheduler">    
    <task:scheduled ref="reaper" method="run" fixed-rate="${reaper.rate}"/>
</task:scheduled-tasks>

<task:executor id="taskExecutor" pool-size="1"/>
<task:annotation-driven executor="taskExecutor" scheduler="taskScheduler"/>

  <int-jdbc:message-store id="jdbc-messageStore" data-source="dataSource"  />

  <bean id="dataSource" class="com.jolbox.bonecp.BoneCPDataSource" >
       <property name="driverClass" value="com.mysql.jdbc.Driver" />
       <property name="jdbcUrl" value="jdbc:mysql://${database.host}:3306/XDR?autoReconnect=true&amp;cachePrepStmts=true&amp;prepStmtCacheSize=50" />
       <property name="username" value="${database.username}"/>
       <property name="password" value="${database.password}"/>
       <property name="idleConnectionTestPeriodInMinutes" value="1"/>
       <property name="idleMaxAgeInMinutes" value="2"/>    
       <property name="connectionTimeoutInMs"   value="1000" />             
       <property name="maxConnectionsPerPartition" value="10"/>
       <property name="minConnectionsPerPartition" value="4"/>
       <property name="partitionCount" value="4"/>
       <property name="acquireIncrement" value="2"/>                              
       <property name="statementsCacheSize" value="10"/>
       <property name="closeConnectionWatch" value="false"/>
 </bean> 
```

我错过了什么吗？我正在使用 spring-integration-jdbc 库中的默认模式。

# oracle - oracle中的嵌套表给出错误

> ID：16188381
> 
> 赞同：0
> 
> 时间：2013-04-24T09:30:07.523
> 
> 标签：oracle, oracle11g

我无法创建嵌套表。我执行了以下命令：

```
create or replace type address_ty as object(
    street nvarchar2(15),
    city nvarchar2(15),
    district nvarchar2(15));

create or replace type name_ty as object(
    name nvarchar2(15),
    address address_ty);

create or replace type dependent_ty as object(
    relation nvarchar2(15),
    name name_ty,
    age number);

create or replace type dependent_list as table of dependent_ty;

create or replace type employee_info_ty as object(
    emp_id nvarchar(15),
    name name_ty,
    salary nvarchar(15),
    dept_id nvarchar(15),
    dependents dependent_list); 
```

当我创建一个表时，它给出了一个错误：

```
create table employee_info of employee_info_ty OIDINDEX OID_EMPLOYEE_INFO
nested table dependent store as dependent_ty;

SQL Error: ORA-00902: invalid datatype
00902\. 00000 -  "invalid datatype" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:03:03.983

您的最后一个类型声明无效：

```
create or replace type employee_info_ty as object(
    emp_id nvarchar(15),
    name name_ty,
    salary nvarchar(15),
    dept_id nvarchar(15),
    dependents dependent_list);
/

Warning: Type created with compilation errors.

show errors

Errors for TYPE EMPLOYEE_INFO_TY:

LINE/COL ERROR
-------- -----------------------------------------------------------------
0/0      PL/SQL: Compilation unit analysis terminated
2/12     PLS-00201: identifier 'NVARCHAR' must be declared 
```

如果将其更改为使用，`nvarchar2`则针对的`invalid datatype`错误`employee_info_ty`会消失，但会被另一个错误替换：

```
create or replace type employee_info_ty as object(
    emp_id nvarchar2(15),
    name name_ty,
    salary nvarchar2(15),
    dept_id nvarchar2(15),
    dependents dependent_list);
/

Type created.

create table employee_info of employee_info_ty OIDINDEX OID_EMPLOYEE_INFO
nested table dependents store as dependent_ty;

nested table dependent store as dependent_ty
             *
ERROR at line 2:
ORA-00904: : invalid identifier 
```

`dependents`...这是因为您在类型定义中调用了嵌套表，但`dependent`在这里。您也不能重复使用`dependent_ty`该`store as`子句，因为这是您刚刚创建的对象类型；你会得到一个 ORA-00955。这有效：

```
create table employee_info of employee_info_ty OIDINDEX OID_EMPLOYEE_INFO
nested table dependents store as dependents_tab;

Table created. 
```

* * *

从评论中的问题，如果您填充如下行：

```
insert into employee_info values (
    employee_info_ty('1', name_ty('Joe Bloggs',
            address_ty('1 Main Street', 'Omaha', 'Nebraska')),
        '20000', '2', dependent_list(dependent_ty('Daughter',
            name_ty('Emily Bloggs',
                address_ty('1 Main Street', 'Omaha', 'Nebraska')),
            '14')
        )
    )
); 
```

您可以选择直接属性，例如：

```
select e.emp_id, e.name.name
from employee_info e;

EMP_ID          NAME.NAME
--------------- ---------------
1               Joe Bloggs 
```

和嵌套属性，如：

```
select d.relation, d.name.name, d.age
from the(select e.dependents from employee_info e where emp_id = '1') d;

RELATION        NAME.NAME              AGE
--------------- --------------- ----------
Daughter        Emily Bloggs            14 
```

我想你是在 PL/SQL 中操作这些，但原理是一样的。

不知道你为什么要存储`emp_id`和`salary`作为字符串。

# sql-server-2008 - 如何在sql中只显示一次值

> ID：16188390
> 
> 赞同：0
> 
> 时间：2013-04-24T09:30:32.957
> 
> 标签：sql-server-2008

我又来了，所以我再次需要你的建议。我在这里有我的脚本，它使表 A 出现。考虑到每个 dnum 的最近到期日期（日期）和服务项目的能力（onHand），我想在 Order 列中显示 qty 一次。前任。(dnum #593) 如果订购数量为 10 件，则应查找最近的到期日期，即 2014 年 6 月 12 日，然后查看是否可以提供该数量。假设它手头有 50 件，则条件满足，因此它将显示 10 内联到该行项目。我不知道我将如何处理这个问题。任何建议都可以。

谢谢

```
 SELECT t2.[dnum], t2.[ddate], 
   t2.[ccode], t2.[cname], 
   t1.[icode],t1.[bnum], 
   t1.[wcode],t1.[edate],t1.OnHand,
   t2.Order 
  FROM   (SELECT A.[dnum], A.[status],
           A.[ddate], A.[ccode], 
           A.[cname], B.[icode], 
           B.[desc], B.Order, 
           b.wcode 
  FROM  A INNER JOIN B ON A.dentry = B.dentry 
    WHERE status = 'O') t2 
    LEFT JOIN (SELECT T0.[icode], T0.[bnum], 
                     T0.[wcode], T0.[edate], T0.Onhand
              FROM   oibt T0 
              WHERE  T0.Onhand> 0 
            ) t1 
          ON t1.icode = t2.icode AND t1.wcode = t2.wcode 
```

表 A（执行代码时的示例输出）

```
 DNUM    ddate    ccode   cname     icode      bnum       wcode    edate      OnHand      Order 
  593  3/26/2013    C01   CUST01    Item001  MLUF-20121224  W01    12/06/2014    50         10
  593  3/26/2013    C01   CUST01    Item001  MLUF-20130329  W01    03/28/2015    1640       10
  593  3/26/2013    C01   CUST01    Item001  MLUF-20121224  W01    12/23/2014    10         10
  593  3/26/2013    C01   CUST01    Item001  MGTJ-20130201  W01    02/01/20158   830        10
  866  09/04/2013   C45   CUST45    Item835  MFR-20120901   w01    09/01/2014    15          9
  866  09/04/2013   C45   CUST45    Item835  MPPS-20110121  w01    09/01/2014    6           9
  928  04/18/2013   C36   CUST36    Item221  MFC-201209011  w01    01/21/2013    1          10
  928  04/18/2013   C36   CUST36    Item221  MASW-20130201  w01    02/01/2015    37         10 
```

表 B（我将如何得到这个结果？？）

```
 DNUM    ddate    ccode   cname     icode      bnum       wcode    edate      OnHand      Order 
  593  3/26/2013    C01   CUST01    Item001  MLUF-20121224  W01    12/06/2014    50         10
  593  3/26/2013    C01   CUST01    Item001  MLUF-20130329  W01    03/28/2015    1640      
  593  3/26/2013    C01   CUST01    Item001  MLUF-20121224  W01    12/23/2014    10       
  593  3/26/2013    C01   CUST01    Item001  MGTJ-20130201  W01    02/01/2015    830        
  866  09/04/2013   C45   CUST45    Item835  MFR-20120901   w01    09/01/2014    15          9
  866  09/04/2013   C45   CUST45    Item835  MPPS-20110121  w01    09/01/2014    6         
  928  04/18/2013   C36   CUST36    Item221  MFC-201209011  w01    01/21/2013    1          1
  928  04/18/2013   C36   CUST36    Item221  MASW-20130201  w01    02/01/2015    37         9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:35:23.050

这很复杂。您需要做的是找到一组 dnum 的第一条记录，以及与主选择匹配的位置输出 order 列，如果没有匹配则输出 null。

像这样的东西（尽管请注意我做的 99% 的 SQL 是针对 MySQL 的，所以这没有经过测试）

```
SELECT A.dnum, A.ddate, 
   A.ccode, A.cname, 
   B.icode,T0.bnum, 
   T0.wcode,T0.edate,T0.OnHand,
   CASE WHEN Sub1.dnum IS NULL THEN NULL ELSE B.Order END AS OrderCol
FROM  A 
INNER JOIN B ON A.dentry = B.dentry AND status = 'O'
LEFT JOIN oibt T0 ON T0.icode = B.icode AND T0.wcode = B.wcode AND T0.Onhand> 0 
LEFT OUTER JOIN 
(
    SELECT A.dnum, MIN(T0.edate) AS MinDate
    FROM  A 
    INNER JOIN B ON A.dentry = B.dentry AND status = 'O'
    LEFT JOIN oibt T0 ON T0.icode = B.icode AND T0.wcode = B.wcode AND T0.Onhand> 0 
    GROUP BY A.dnum
) AS Sub1
ON A.dnum = Sub1.dnum AND T0.edate = Sub1.MinDate
ORDER BY t2.dnum, t1.edate 
```

# php - PHP Fsockopen 检查端口 25

> ID：16188393
> 
> 赞同：0
> 
> 时间：2013-04-24T09:30:49.847
> 
> 标签：php, smtp

我编写了一个代码来检查我的一台本地服务器的端口 25。smtp 服务器正在服务器上运行，但是当我使用 fsockopen 检查时，返回连接被拒绝错误。那么我如何使用简单的 php 代码检查 SMTP 是关闭还是启动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:41:40.953

php脚本和smpt在同一台机器上吗？您是否检查过与 telnet 的连接？

```
telnet your.local.server 25 
```

一般来说，“连接被拒绝”是指它所说的；）

*   smtp 服务器未运行，或
*   您的服务器不可访问（防火墙？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:46:12.153

最好写下您的服务器详细信息，例如操作系统

检查你的防火墙，也许它拒绝你的连接

并检查连接：

```
telnet your-server 25 
```

# c# - 用小数计算

> ID：16188395
> 
> 赞同：-2
> 
> 时间：2013-04-24T09:30:50.800
> 
> 标签：c#

我试图在计算后得到我的 int 的逗号数，但我似乎无法让它工作。

我的代码：

```
int price = 120;
decimal calc = price / 100; 
```

但它只返回 1。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T09:32:05.203

```
int price = 120;
decimal calc = price / 100m; 
```

你的变种：

```
int price = 120;
int temp = price / 100;// temp = 1
decimal calc = (decimal) temp; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T09:32:16.010

```
int price = 120;
decimal calc = ((decimal)price) / 100; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T09:32:15.280

您的计算是以整数类型完成的，因为两个操作数都是整数。它应该是：

```
decimal calc = price / 100M; 
                     // ^^^^^
                     //atleast one of the operand should be decimal 
```

或者

```
decimal calc = (decimal)price / 100; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T09:41:43.067

当您将一个整数除以另一个整数时，结果始终是一个整数。由于您希望以更精确的方式获得答案，因此您需要根据所需的精度对其进行类型转换。Decimal 在 C# 中为您提供最佳精度。但即使转换为 float 或 double 也会以您期望的格式为您提供答案。再次铸造取决于所需的准确度。[这](http://msdn.microsoft.com/en-us/library/3b1ff23f%28v=VS.100%29.aspx)是来自 MSDN 的更详细的解释。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T09:44:05.877

最简单的方法是也声明`price`为十进制

```
decimal price=120;
decimal calc=price/100; 
```

如果它来自参数或另一个局部变量，您仍然可以将其存储为十进制，如：

```
int priceInInt=120;
decimal price=priceInInt;
decimal calc=price/100; 
```

# jquery - jQuery - 无法使用 twitter bootstrap 的 datepicker 禁用过去的日期

> ID：16188396
> 
> 赞同：4
> 
> 时间：2013-04-24T09:30:55.007
> 
> 标签：jquery, date, twitter-bootstrap, datepicker

在 rails 3.2.9 中，我正在使用 twitter bootstrap gem 并尝试使用它的 datepicker。在这个日期选择器工具中，我需要禁用过去的日期，我需要启用当前日期和未来日期。但现在我无法禁用过去的日期。

我尝试过不同的方法，

例如 1：

```
function scriptDatePicker(id){
var today = new Date();
var dd = today.getDate();
var mm = ("0" + (today.getMonth() + 1)).slice(-2) //January is 0!
var yyyy = today.getFullYear();
$('#' + id).datepicker({
    format: "yyyy-mm-dd",
    startDate: yyyy + '-' +  mm + '-' + dd
});
} 
```

例如 2：

```
$('#id').datepicker({startDate: '01/01/2013'}); 
```

例如 3：

```
$("#datepicker").datepicker({ minDate: 0 }); 
```

例如 4：

```
$('.datepicker').datepicker('setStartDate', '2013-01-01'); 
```

而且我还尝试了其他一些示例，但它不起作用。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T10:35:49.023

HTML 标记：

```
<input id="dpd1" type="text" data-date-format="yyyy-mm-dd"> 
```

jQuery：

```
var nowTemp = new Date();
var now = new Date(nowTemp.getFullYear(), nowTemp.getMonth(), nowTemp.getDate(), 0, 0, 0, 0);

$('#dpd1').datepicker({
  onRender: function(date) {
    return date.valueOf() < now.valueOf() ? 'disabled' : '';
  }
}); 
```

现场示例：http: [//jsfiddle.net/Jdqvk/2/](http://jsfiddle.net/Jdqvk/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-18T13:53:37.560

对于只想显示当前年份并禁用过去几年和未来几年的所有日期的每个人。就是这个：

# 标记

```
<input id="dp1" type="text" data-date-format="yyyy-mm-dd"> 
```

# Javascript

```
var nowTemp = new Date();
var now = new Date(nowTemp.getFullYear());

$('#dp1').datepicker({
  onRender: function(date) {
    return date.getFullYear() < now.valueOf() ? 'disabled' : (date.getFullYear() > now.valueOf() ? 'disabled' : '');
  }
}); 
```

# android - 如何在Android中单击按钮时停止Runnable？

> ID：16188398
> 
> 赞同：6
> 
> 时间：2013-04-24T09:30:59.157
> 
> 标签：android

我必须在单击开始按钮时开始可运行并在单击暂停按钮时停止它。我的启动按钮单击时可运行的代码是

```
 // TODO Auto-generated method stub
    //while (running) {
     mUpdateTime = new Runnable() {
            public void run() { 
     sec += 1;
        if(sec >= 60) {
            sec = 0;
            min += 1;
            if (min >= 60) {
                min = 0;
                hour += 1;
            }
        }
        Min_txtvw.setText(String.format(mTimeFormat, hour, min, sec));
        mHandler.postDelayed(mUpdateTime, 1000);
            }
        };
        mHandler.postDelayed(mUpdateTime, 1000);
    //} 
```

现在我想在暂停按钮单击时停止该可运行

pause_btn.setOnClickListener(new OnClickListener() {

```
 @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            play_btn.setVisibility(View.VISIBLE);
            pause_btn.setVisibility(View.INVISIBLE);

        }
    }); 
```

如果有人知道请帮助我，我如何在暂停按钮单击时停止该可运行。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-24T09:40:32.647

利用

```
mHandler.removeCallbacksAndMessages(runnable); 
```

在暂停按钮点击。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-24T09:40:23.007

保留一个`boolean cancelled`标志来存储状态。将其初始化为 false，然后在单击停止按钮时将其修改为 true。

在你的`run()`方法中继续检查这个标志。

**编辑**

上述方法通常有效，但仍然不是停止可运行/线程的最合适方法。可能存在任务被阻止并且无法检查标志的情况，如下所示：

```
 public void run(){
        while(!cancelled){
           //blocking api call
        }
    } 
```

假设任务正在进行阻塞 api 调用，然后修改了取消标志。只要阻塞 API 调用正在进行，任务就无法检查状态的变化。

**替代和安全的方法**

停止线程或任务（Runnable）最可靠的方法是使用**中断**机制。中断是一种协作机制，可确保停止线程不会使其处于不一致状态。
在我的博客上，我详细讨论了中断，[链接](http://geekrai.blogspot.in/2014/02/interrupting-thread-in-java.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-12T04:52:11.147

完整代码：

```
 iterationCount = 0;
   final Handler handler = new Handler();
    final int delay = 1000; //milliseconds
    handler.postDelayed(new Runnable() {
        public void run() {
            //do something
            if (iterationCount < 10) {
                handler.postDelayed(this, delay);
            }
            iterationCount++;
            Log.e("tag", "after 1 second: " + iterationCount);
        }
    }, delay); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-21T11:05:23.310

使用以下代码：

```
handler.removeCallbacks(runnable); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-04-24T10:20:34.270

螺纹螺纹；
//开始按钮里面

```
 thread=new Thread(new Runnable() {

    @Override
    public void run() {
    sec += 1;
        if(sec >= 60) {
             sec = 0;
             min += 1;
            if (min >= 60) {
                min = 0;
                hour += 1;
        }
         }
         Min_txtvw.setText(String.format(mTimeFormat, hour, min, sec));
         mHandler.postDelayed(mUpdateTime, 1000);
      });
   thread.start(); 
```

//内部停止按钮

```
mHandler.removeCallbacksAndMessages(runnable);
thread.stop(); 
```

# android - 如何从锁屏开始新活动？

> ID：16188402
> 
> 赞同：6
> 
> 时间：2013-04-24T09:31:08.340
> 
> 标签：android, android-activity, widget, android-4.2-jelly-bean, lockscreen

我正在为联系人管理创建简单的小部件，它允许用户拨号并向所需联系人发送短信。

它可以作为“普通小部件”正常工作，但是当我在 Android 4.2 上将其添加为锁屏小部件时，短信应用程序或拨号应用程序无法启动。好吧，事实上他们是明星，但在“背后”锁屏，所以用户仍然必须手动解锁屏幕才能拨打/发送短信。

我在网上搜索了一些解决方案，但没有什么能派上用场。我知道 FLAG_DISABLE_KEYGUARD 或 FLAG_SHOW_WHEN_LOCKED，但由于短信/拨号应用程序不是“我的”，所以我不知道它们是否设置了正确的标志。作为一种解决方法，我尝试创建设置这些标志的活动，然后简单地启动所需的一个（拨号或短信），但这无济于事。

有一种解锁屏幕的方法，但这涉及使用 KeyguardManager 和 KeyguardLock （工作正常），但由于使用 KeyguardLock.newKeyguardLock() 我最终导致手机无法自动打开锁定，肯定是因为我没有释放这个锁（它会导致锁再次出现，这不是我想要的）。

事实上，这个小部件应该与锁定屏幕上的默认短信小部件或邮件小部件类似地工作？

所以，我的问题是，如何实现这一点并从锁屏开始新的活动？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T11:36:46.990

好吧，我自己找到了解决方案。原来我很接近:)

要启动 3rd 方应用程序/活动，最简单的解决方案是创建某种代理活动，它将在窗口上设置适当的标志，然后启动所需的活动并完成。

示例代码如下所示：

小部件中的调用意图（调用代理）：

```
 @Override
public void onReceive(Context context, Intent intent) {
    Utilities.printLog(TAG, "onReceive");
    Utilities.printLog(TAG, "intent: " + intent);
    if (intent.getAction().equals(ACTION)) {

        final String number = intent.getStringExtra(EXTRAS);
        Toast.makeText(context, "Selected number: " + number,
                Toast.LENGTH_SHORT)
                .show();

        /** REMOVING KEYGUARD RECEIVER **/
        // not really an option - lock is still holded by widget and screen
        // cannot be locked again ;(
        // KeyguardManager keyguardManager = (KeyguardManager) context
        // .getSystemService(Context.KEYGUARD_SERVICE);
        // KeyguardLock lock = keyguardManager
        // .newKeyguardLock(Context.KEYGUARD_SERVICE);
        // lock.disableKeyguard();

        final Intent activity = new Intent(context, MainActivity.class);
        activity.putExtras(intent.getExtras());
        activity.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        activity.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
        activity.addFlags(Intent.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS);
        context.startActivity(activity);
    }

    super.onReceive(context, intent);
} 
```

在代理活动中只需调用：

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    getWindow().requestFeature(Window.FEATURE_NO_TITLE);
    // getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED);
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD);

    final Intent callingIntent = getIntent();

    final String actionToLaunch = callingIntent.getStringExtra(ContactsStackWidgetProvider.ACTION);
    final String number = callingIntent.getStringExtra(ContactsStackWidgetProvider.EXTRAS);

    final Intent activity = new Intent();
    if (actionToLaunch.equals(Intent.ACTION_DIAL)) {
        activity.setAction(Intent.ACTION_DIAL);
        activity.setData(Uri.parse("tel:"+number));
    } else if (actionToLaunch.equals(Intent.ACTION_SENDTO)) {
        activity.setAction(Intent.ACTION_SENDTO);
        activity.setData(Uri.parse("sms:"+number));
    } else {
        throw new IllegalArgumentException("Unrecognized action: "
                + actionToLaunch);
    }

    new Handler().postDelayed(new Runnable() {

        @Override
        public void run() {
            startActivity(activity);
            finish();//it is important to finish, but after a small delay
        }
    }, 50L);

} 
```

# javascript - 使 StockCharts 中的工具提示与 HighCharts 中的行为相同

> ID：16188403
> 
> 赞同：1
> 
> 时间：2013-04-24T09:31:12.307
> 
> 标签：javascript, highcharts, highstock

如何让 StockChart 工具提示的行为与 HighCharts 中的相同？

如果你看一下小提琴，在股票图表中，光标移动到鼠标位置，就像在“图表”实例中一样，工具提示会捕捉到最近的点。

这是小提琴：

[http://jsfiddle.net/gn393/](http://jsfiddle.net/gn393/)

```
$(function () {
    var chart = new Highcharts.StockChart({
        chart: {
            renderTo: 'container1'
        },

        tooltip: {
            positioner: function (w,h,p) {
                return { x: p.plotX + chart.plotLeft, y: p.plotY + chart.plotTop };
            }
        },

        series: [{type:"area",
            data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]        
        }, {
            data: [194.1, 95.6, 54.4, 29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4]        
        }]
    });
});

$(function () {
    var chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container2'
        },

        tooltip: {
            positioner: function (w,h,p) {
                return { x: p.plotX + chart.plotLeft, y: p.plotY + chart.plotTop };
            }
        },

        series: [{type:"area",
            data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]        
        }, {
            data: [194.1, 95.6, 54.4, 29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4]        
        }]
    });
}); 
```

我需要工具提示捕捉到 StockChart 上最近的点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T10:02:38.153

这就是共享工具提示在 Highcharts 中的工作方式。您需要禁用它（`shared: false`），以获得所需的结果，看看：http: [//jsfiddle.net/gn393/1/](http://jsfiddle.net/gn393/1/)

# javascript - 如何用 Jquery 模拟 div 的 Control-Click（多选）？

> ID：16188405
> 
> 赞同：0
> 
> 时间：2013-04-24T09:31:15.387
> 
> 标签：javascript, jquery

我有一排 div，我需要多选不同的行……但不使用复选框。我的行在悬停时“突出显示”，并在使用此功能选择时永久突出显示：

```
function load_to_que(elemID){
    is_selected = $(elemID).attr('is_selected')
    console.log(is_selected);
    if(is_selected != "true"){
        $(elemID).attr('is_selected','true');
        $(elemID).attr('style','background-color: #88C4FF;');
    }else{
        $(elemID).attr('is_selected','false');
        $(elemID).attr('style','');
    }

    //etc....
} 
```

使用上面的代码，我可以通过单击来选择和取消选择 div/行，并查看视觉反馈...单击一次，div 突出显示，再次单击，它的背景恢复正常.. 单击不同的 div/行一次你有多个选择/亮点..

现在我需要做的是...

单击不同的 div 时，所有其余 div 应恢复正常（未突出显示）.. 我有两种方法可以做到这一点 1.1）循环遍历元素并评估是否已经选择了 is_selected 属性，然后取消选择 1.2 ) 创建一个 window.selectedIDs 变量并在那里维护选定 div 的记录，并使用它来循环并取消选择所有当前选定的 div

问题：w/c 比上述更好？还是有更好的技术？

PS我不需要代码详细的例子..我基本上只需要好的想法来解决这个问题..

# ios - 如果将 UIButton 作为子视图添加到 UIImageView，则单击 UIButton 不起作用

> ID：16188408
> 
> 赞同：0
> 
> 时间：2013-04-24T09:31:26.273
> 
> 标签：ios, objective-c, uiimageview, uibutton, addsubview

我有一个简单`UIImageView`的动画，我需要检测它的点击。我添加了一个`UIButton`这是 this 的子视图`UIImageView`。但是，点击它不起作用。添加到视图时，我已经对其`UIButton`本身进行了测试，并且它可以工作，所以不是导致问题的按钮。

这是代码：

```
self.red = [[UIImageView alloc] initWithFrame:CGRectMake(50, 300, 85, 100)];
self.red.image = [UIImage imageNamed:@"red.png"];

[self.red setUserInteractionEnabled: YES];
[self.view addSubview: self.red];
[self.view bringSubviewToFront:self.red]; 

UIButton *redButton = [UIButton buttonWithType: UIButtonTypeCustom];
redButton.frame = CGRectMake(self.red.frame.origin.x, self.red.frame.origin.y, self.red.frame.size.width, self.red.frame.size.height);
[redButton addTarget: self action:@selector(correctButtonClick) forControlEvents: UIControlEventAllTouchEvents];
[redButton setUserInteractionEnabled:YES];

[self.red addSubview: redButton];
[self.red bringSubviewToFront:redButton]; 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T09:36:47.947

而不是这条线，`redButton.frame = CGRectMake(self.red.frame.origin.x, self.red.frame.origin.y, self.red.frame.size.width, self.red.frame.size.height);`试试这个

```
redButton.frame = CGRectMake(0,0, self.red.frame.size.width, self.red.frame.size.height); 
```

**编辑：**`[self.red bringSubviewToFront:redButton];`不需要这条线..

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T09:39:13.187

而不是插入 a`UIButton`作为子视图使用 a `UITapGestureRecognizer`，例如：

```
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(correctButtonClick)];
[self.red addGestureRecognizer:tap]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T09:56:40.800

您要做的就是反转您的实现，将 UIButton 添加到 UIImageView 不是一个好主意，而是以编程方式创建自定义样式的 UIButton，并将 UIImageView 添加为其子视图，肯定会起作用

编辑：至于您当前的实现，您已经在 UIImageView 中添加了 UIButton，因此您可能希望图像的每个部分都接受点击事件，在这种情况下，您的 UIButton 的 x 和 y 坐标将为 0,0 而不是 red.x 和 red .y，但是宽度和高度是正确的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-20T08:14:54.767

自定义按钮没有 UI。所以你不能选择它。（您可以尝试使用绑定按钮，或者向按钮添加一些图像并将按钮 alpha 设置为 0.1 或其他）

@tkanzakic 的答案应该是正确的。只需将 TapGestureRecognizer 添加到 ImageView 或将 Image 添加到 Button。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-24T09:33:00.407

只需执行 self.red.userInteractionEnabled = YES。

UIImageView 默认有 userInteractionEnabled NO。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-24T10:55:10.840

很简单，按钮没有响应，因为它的框架是错误的，所以它不是你认为的位置。基本上在下面更改您的行：

```
redButton.frame = CGRectMake(self.red.frame.origin.x, self.red.frame.origin.y, self.red.frame.size.width, self.red.frame.size.height); 
```

有了这个：

```
redButton.frame = CGRectMake(self.red.bounds.origin.x, self.red.bounds.origin.y, self.red.frame.size.width, self.red.frame.size.height); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-24T09:58:13.337

不要使用单独的 imageview 和 Button，而是使用 Button**中的 imageview 属性**。这将解决您的所有问题，并使您无需编写额外的代码行。

```
UIButton *redButton = [UIButton buttonWithType: UIButtonTypeCustom]; 
```

> **redButton.imageView.image = [UIImage imageNamed:@"red.png"];**

```
redButton.frame = CGRectMake(50, 300, 85, 100);
[redButton addTarget: self action:@selector(correctButtonClick) forControlEvents: UIControlEventAllTouchEvents];
[redButton setUserInteractionEnabled:YES];

[self.red addSubview: redButton]; 
```

# android - 同时录制音频并转换为文本

> ID：16188415
> 
> 赞同：0
> 
> 时间：2013-04-24T09:31:51.070
> 
> 标签：android, speech-to-text

我开发了一个应用程序可以记录一段特定时间的音频，另一个应用程序使用网络将语音转换为文本。有没有可能这两件事可以同时进行？我的意思是录制音频并将录制的音频文件中可用的语音转换为文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-30T09:47:29.973

您执行此操作的方式可能不是很准确，因为语音输入有许多不同的建议。但是你可以给它一个打击。
据我了解，您应该在后台服务中运行音频并启动语音检测。
对于后台服务[，这](http://developer.android.com/training/run-background-service/index.html)就是您使用它们的方式。[您也可以在此处](http://www.codeproject.com/Articles/258176/Adding-Background-Music-to-Android-App)查看完整的应用程序。
语音识别可以参考[这里](http://www.jameselsey.co.uk/blogs/techblog/android-how-to-implement-voice-recognition-a-nice-easy-tutorial/)。

这就是您创建服务的方式。
最好将您的媒体代码投入使用。这是在后台播放媒体的最佳方式。

```
public class serv extends Service{

    MediaPlayer mp;
    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        return null;
    }
    public void onCreate()
    {   
        mp = MediaPlayer.create(this, R.raw.b);
        mp.setLooping(false);
    }
    public void onDestroy()
    {       
        mp.stop();
    }
    public void onStart(Intent intent,int startid){

        Log.d(tag, "On start");
        mp.start();
    }
} 
```

其中 raw 是在资源中创建的文件夹。R.raw.b 是一个 mp3 文件。
在您触发此意图之前调用此服务。

```
/**
 * Fire an intent to start the voice recognition activity.
 */
private void startVoiceRecognitionActivity()
{
    Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
    intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,
            RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
    intent.putExtra(RecognizerIntent.EXTRA_PROMPT, "Voice recognition Demo...");
    startActivityForResult(intent, REQUEST_CODE);
}

/**
 * Handle the results from the voice recognition activity.
 */
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data)
{
    if (requestCode == REQUEST_CODE && resultCode == RESULT_OK)
    {
        // Populate the wordsList with the String values the recognition engine thought it heard
        ArrayList<String> matches = data.getStringArrayListExtra(
                RecognizerIntent.EXTRA_RESULTS);
        wordsList.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,
                matches));
    }
    super.onActivityResult(requestCode, resultCode, data);
} 
```

# xcode - 退出 UIWebView 的 HTML 链接

> ID：16188416
> 
> 赞同：0
> 
> 时间：2013-04-24T09:31:51.670
> 
> 标签：xcode, uiwebview, safari

我的应用程序 iPhone 已通过 Apple 验证。我有一个 UIWebView，我想退出这个 UIWebView 以使用 HTML 链接转到 Safari，但它不起作用。

请我需要帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:17:28.557

试试这样

将此添加到 UIWebView 委托：

```
 -(BOOL) webView:(UIWebView *)inWeb shouldStartLoadWithRequest:(NSURLRequest *)inRequest navigationType:(UIWebViewNavigationType)inType {
        if ( inType == UIWebViewNavigationTypeLinkClicked ) {
            [[UIApplication sharedApplication] openURL:[inRequest URL]];
            return NO;
        }

        return YES;
    } 
```

# android - 是否可以告诉 Android 地图应用程序找到给定坐标的路径

> ID：16188417
> 
> 赞同：1
> 
> 时间：2013-04-24T09:32:04.623
> 
> 标签：android, google-maps, gps

我正在尝试制作一个在地图上显示事件、同事、约会等位置的应用程序。此时一切都很好，但现在我正在考虑让用户可以单击该位置并选择一个“引导我到那里”选项，它将打开 Android 地图或另一个“寻路”应用程序到该位置的坐标。这是因为在我的应用程序上制作这样一个系统会超出我的能力并且需要很长时间。

我的问题：是否可以向 Android 地图发送意图以设置旅行到坐标，如果可能的话如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T09:39:36.043

AFAIK 没有正式的方式来启动导航器，但是

```
 String address = google.navigation:q=yout+address+here;
  Intent implicitIntent = new Intent(Intent.ACTION_VIEW,  Uri.parse(address));
                                startActivity(implicitIntent); 
```

为我工作

# python - 框架的 Tkinter 滚动条

> ID：16188420
> 
> 赞同：84
> 
> 时间：2013-04-24T09:32:05.277
> 
> 标签：python, tkinter, scrollbar, frame

我的目标是在其中包含多个标签的框架中添加一个垂直滚动条。只要框架内的标签超过框架的高度，滚动条就会自动启用。经过搜索，我发现[了这个](https://stackoverflow.com/questions/3085696/adding-a-scrollbar-to-a-grid-of-widgets-in-tkinter)有用的帖子。根据那篇文章，我知道为了实现我想要的，（如果我错了，请纠正我，我是初学者）我必须先创建一个`Frame`，然后`Canvas`在该框架内创建一个并将滚动条粘贴到该框架上出色地。之后，创建另一个框架并将其作为窗口对象放在画布内。所以，我终于想出了这个：

```
from Tkinter import *

def data():
    for i in range(50):
       Label(frame,text=i).grid(row=i,column=0)
       Label(frame,text="my text"+str(i)).grid(row=i,column=1)
       Label(frame,text="..........").grid(row=i,column=2)

def myfunction(event):
    canvas.configure(scrollregion=canvas.bbox("all"),width=200,height=200)

root=Tk()
sizex = 800
sizey = 600
posx  = 100
posy  = 100
root.wm_geometry("%dx%d+%d+%d" % (sizex, sizey, posx, posy))

myframe=Frame(root,relief=GROOVE,width=50,height=100,bd=1)
myframe.place(x=10,y=10)

canvas=Canvas(myframe)
frame=Frame(canvas)
myscrollbar=Scrollbar(myframe,orient="vertical",command=canvas.yview)
canvas.configure(yscrollcommand=myscrollbar.set)

myscrollbar.pack(side="right",fill="y")
canvas.pack(side="left")
canvas.create_window((0,0),window=frame,anchor='nw')
frame.bind("<Configure>",myfunction)
data()
root.mainloop() 
```

1.  我做对了吗？有没有更好/更智能的方法来实现这段代码给我的输出？
2.  为什么我必须使用网格方法？（我尝试了放置方法，但画布上没有出现任何标签。）
3.  `anchor='nw'`在画布上创建窗口时使用有什么特别之处？

请保持你的答案简单，因为我是一个初学者。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-04-24T17:13:09.933

*请注意，建议的代码仅适用于 Python 2*

这是一个例子：

```
from Tkinter import *   # from x import * is bad practice
from ttk import *

# http://tkinter.unpythonic.net/wiki/VerticalScrolledFrame

class VerticalScrolledFrame(Frame):
    """A pure Tkinter scrollable frame that actually works!
    * Use the 'interior' attribute to place widgets inside the scrollable frame
    * Construct and pack/place/grid normally
    * This frame only allows vertical scrolling

    """
    def __init__(self, parent, *args, **kw):
        Frame.__init__(self, parent, *args, **kw)            

        # create a canvas object and a vertical scrollbar for scrolling it
        vscrollbar = Scrollbar(self, orient=VERTICAL)
        vscrollbar.pack(fill=Y, side=RIGHT, expand=FALSE)
        canvas = Canvas(self, bd=0, highlightthickness=0,
                        yscrollcommand=vscrollbar.set)
        canvas.pack(side=LEFT, fill=BOTH, expand=TRUE)
        vscrollbar.config(command=canvas.yview)

        # reset the view
        canvas.xview_moveto(0)
        canvas.yview_moveto(0)

        # create a frame inside the canvas which will be scrolled with it
        self.interior = interior = Frame(canvas)
        interior_id = canvas.create_window(0, 0, window=interior,
                                           anchor=NW)

        # track changes to the canvas and frame width and sync them,
        # also updating the scrollbar
        def _configure_interior(event):
            # update the scrollbars to match the size of the inner frame
            size = (interior.winfo_reqwidth(), interior.winfo_reqheight())
            canvas.config(scrollregion="0 0 %s %s" % size)
            if interior.winfo_reqwidth() != canvas.winfo_width():
                # update the canvas's width to fit the inner frame
                canvas.config(width=interior.winfo_reqwidth())
        interior.bind('<Configure>', _configure_interior)

        def _configure_canvas(event):
            if interior.winfo_reqwidth() != canvas.winfo_width():
                # update the inner frame's width to fill the canvas
                canvas.itemconfigure(interior_id, width=canvas.winfo_width())
        canvas.bind('<Configure>', _configure_canvas)

if __name__ == "__main__":

    class SampleApp(Tk):
        def __init__(self, *args, **kwargs):
            root = Tk.__init__(self, *args, **kwargs)

            self.frame = VerticalScrolledFrame(root)
            self.frame.pack()
            self.label = Label(text="Shrink the window to activate the scrollbar.")
            self.label.pack()
            buttons = []
            for i in range(10):
                buttons.append(Button(self.frame.interior, text="Button " + str(i)))
                buttons[-1].pack()

    app = SampleApp()
    app.mainloop() 
```

它还没有将鼠标滚轮绑定到滚动条，但这是可能的。不过，使用滚轮滚动可能会有些颠簸。

编辑：

到 1)
恕我直言，滚动框架在 Tkinter 中有些棘手，似乎并没有做太多。似乎没有优雅的方法可以做到这一点。
您的代码的一个问题是您必须手动设置画布大小 - 这就是我发布的示例代码所解决的问题。

到 2）
你在谈论数据功能？地方也适合我。（总的来说，我更喜欢网格）。

到 3)
好吧，它将窗口定位在画布上。

我注意到的一件事是，您的示例默认处理鼠标滚轮滚动，而我发布的示例没有。将不得不看一些时间。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-05-30T16:59:34.243

> “我做得对吗？有没有更好/更智能的方法来实现这段代码给我的输出？”

一般来说，是的，你做对了。除了画布之外，Tkinter 没有本机可滚动容器。如您所见，设置起来并不难。正如您的示例所示，只需 5 或 6 行代码即可使其工作 - 取决于您如何计算行数。

> “为什么我必须使用网格方法？（我尝试了放置方法，但画布上没有出现任何标签？）”

你问为什么你必须使用网格。不需要使用网格。Place, grid 和 pack 都可以使用。只是有些更自然地适合特定类型的问题。在这种情况下，看起来您正在创建一个实际的网格——标签的行和列——所以网格是自然的选择。

> “在画布上创建窗口时使用 anchor='nw' 有什么特别之处？”

锚点告诉您窗口的哪个部分位于您提供的坐标处。默认情况下，窗口的中心将放置在坐标处。对于上面的代码，您希望左上角（“西北”）位于坐标处。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2016-06-16T14:16:10.257

请看我的课程是一个可滚动的框架。它的垂直滚动条也绑定到`<Mousewheel>`事件。所以，你所要做的就是创建一个框架，用你喜欢的方式填充它，然后让这个框架成为我的`ScrolledWindow.scrollwindow`. 随意询问是否有不清楚的地方。

使用了很多来自@Brayan Oakley 的答案来接近这个问题

```
class ScrolledWindow(tk.Frame):
    """
    1\. Master widget gets scrollbars and a canvas. Scrollbars are connected 
    to canvas scrollregion.

    2\. self.scrollwindow is created and inserted into canvas

    Usage Guideline:
    Assign any widgets as children of <ScrolledWindow instance>.scrollwindow
    to get them inserted into canvas

    __init__(self, parent, canv_w = 400, canv_h = 400, *args, **kwargs)
    docstring:
    Parent = master of scrolled window
    canv_w - width of canvas
    canv_h - height of canvas

    """

    def __init__(self, parent, canv_w = 400, canv_h = 400, *args, **kwargs):
        """Parent = master of scrolled window
        canv_w - width of canvas
        canv_h - height of canvas

       """
        super().__init__(parent, *args, **kwargs)

        self.parent = parent

        # creating a scrollbars
        self.xscrlbr = ttk.Scrollbar(self.parent, orient = 'horizontal')
        self.xscrlbr.grid(column = 0, row = 1, sticky = 'ew', columnspan = 2)         
        self.yscrlbr = ttk.Scrollbar(self.parent)
        self.yscrlbr.grid(column = 1, row = 0, sticky = 'ns')         
        # creating a canvas
        self.canv = tk.Canvas(self.parent)
        self.canv.config(relief = 'flat',
                         width = 10,
                         heigh = 10, bd = 2)
        # placing a canvas into frame
        self.canv.grid(column = 0, row = 0, sticky = 'nsew')
        # accociating scrollbar comands to canvas scroling
        self.xscrlbr.config(command = self.canv.xview)
        self.yscrlbr.config(command = self.canv.yview)

        # creating a frame to inserto to canvas
        self.scrollwindow = ttk.Frame(self.parent)

        self.canv.create_window(0, 0, window = self.scrollwindow, anchor = 'nw')

        self.canv.config(xscrollcommand = self.xscrlbr.set,
                         yscrollcommand = self.yscrlbr.set,
                         scrollregion = (0, 0, 100, 100))

        self.yscrlbr.lift(self.scrollwindow)        
        self.xscrlbr.lift(self.scrollwindow)
        self.scrollwindow.bind('<Configure>', self._configure_window)  
        self.scrollwindow.bind('<Enter>', self._bound_to_mousewheel)
        self.scrollwindow.bind('<Leave>', self._unbound_to_mousewheel)

        return

    def _bound_to_mousewheel(self, event):
        self.canv.bind_all("<MouseWheel>", self._on_mousewheel)   

    def _unbound_to_mousewheel(self, event):
        self.canv.unbind_all("<MouseWheel>") 

    def _on_mousewheel(self, event):
        self.canv.yview_scroll(int(-1*(event.delta/120)), "units")  

    def _configure_window(self, event):
        # update the scrollbars to match the size of the inner frame
        size = (self.scrollwindow.winfo_reqwidth(), self.scrollwindow.winfo_reqheight())
        self.canv.config(scrollregion='0 0 %s %s' % size)
        if self.scrollwindow.winfo_reqwidth() != self.canv.winfo_width():
            # update the canvas's width to fit the inner frame
            self.canv.config(width = self.scrollwindow.winfo_reqwidth())
        if self.scrollwindow.winfo_reqheight() != self.canv.winfo_height():
            # update the canvas's width to fit the inner frame
            self.canv.config(height = self.scrollwindow.winfo_reqheight()) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-05-28T14:17:01.807

即使不使用 Canvas，我们也可以添加滚动条。我已经在许多其他帖子中阅读过它，我们不能直接在框架中添加垂直滚动条等。但是在做了很多实验之后，找到了添加垂直和水平滚动条的方法:)。请在下面找到用于在 treeView 和框架中创建滚动条的代码。

```
f = Tkinter.Frame(self.master,width=3)
f.grid(row=2, column=0, columnspan=8, rowspan=10, pady=30, padx=30)
f.config(width=5)
self.tree = ttk.Treeview(f, selectmode="extended")
scbHDirSel =tk.Scrollbar(f, orient=Tkinter.HORIZONTAL, command=self.tree.xview)
scbVDirSel =tk.Scrollbar(f, orient=Tkinter.VERTICAL, command=self.tree.yview)
self.tree.configure(yscrollcommand=scbVDirSel.set, xscrollcommand=scbHDirSel.set)           
self.tree["columns"] = (self.columnListOutput)
self.tree.column("#0", width=40)
self.tree.heading("#0", text='SrNo', anchor='w')
self.tree.grid(row=2, column=0, sticky=Tkinter.NSEW,in_=f, columnspan=10, rowspan=10)
scbVDirSel.grid(row=2, column=10, rowspan=10, sticky=Tkinter.NS, in_=f)
scbHDirSel.grid(row=14, column=0, rowspan=2, sticky=Tkinter.EW,in_=f)
f.rowconfigure(0, weight=1)
f.columnconfigure(0, weight=1) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-23T21:54:53.500

对于任何偶然发现这一点的人（就像在寻找我自己的要点时所做的那样），我在[https://gist.github.com/mp035/9f2027c3ef9172264532fcd6262f3b01](https://gist.github.com/mp035/9f2027c3ef9172264532fcd6262f3b01)上为此目的维护了一个要点 它具有对各种操作系统的滚轮支持，已评论，并且在文件中有一个内置的演示。

# windows-8 - Windows 8 Store App - 启动放置在网络服务器上的文档，无需在本地下载

> ID：16188425
> 
> 赞同：0
> 
> 时间：2013-04-24T09:32:08.680
> 
> 标签：windows-8, windows-store-apps

我目前正在构建一个 Windows 8 应用商店应用程序，并正在使用以下方法调用在 Word 客户端中打开一个文档。

`await Windows.System.Launcher.LaunchFileAsync(Storagefile);`

问题是当前正在从本地路径打开 Storagefile，即

`D://document.docx`

我希望能够直接从网络路径打开它，即

`https://somepage/document.docx`

但需要的是我不能在本地下载它，而只能直接从网页上启动它。

这可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-26T09:52:18.817

我找到了一种直接从服务器打开文档而无需在本地下载它们的方法。

**可以使用**Url Protocols来实现直接打开的功能。****

 **```
await Windows.System.Launcher.LaunchUriAsync(new Uri( "ms-word:https://somepage/document.docx")); 
```**

# android - 如果包含在选择器背景中的图像发生变化，Android有什么方法可以重用按钮选择器？

> ID：16188431
> 
> 赞同：1
> 
> 时间：2013-04-24T09:32:21.637
> 
> 标签：android, android-layout, android-xml, android-selector

我在每个按钮的图层列表中使用相同的背景形状，然后在该图层列表中使用与该按钮的功能相关的特定图像。

我知道我可以为每个按钮创建一个选择器，但是有没有办法重用选择器并动态更改每个按钮的图像（正常、聚焦和按下都使用相同的图像）？

即使没有办法重用选择器，有没有其他好的重用方法，而不是为每个按钮创建 3 个单独的图层列表可绘制对象和一个选择器？

干杯

编辑：每个按钮都有一个文本组件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:34:53.053

使用[图像按钮](https://www.google.com.bd/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&sqi=2&ved=0CC8QFjAA&url=http://developer.android.com/reference/android/widget/ImageButton.html&ei=U6d3UfbdNMn3rQeuuIDYAw&usg=AFQjCNF2XaiXbYKZKIoLE9ShfnIP2NPhmg&sig2=5smUHLrVvEFeGBjCdXhzGg&bvm=bv.45580626,d.bmk)

```
android:background="@drawable/yout_selector"
android:src="drawable/image" 
```

# android - 如何在android 2.2中制作类似标签的ICS（白色背景，底部有天蓝色线）

> ID：16188433
> 
> 赞同：0
> 
> 时间：2013-04-24T09:32:24.517
> 
> 标签：android, android-tabhost

如何在 android 2.2 中制作默认的 ICS 样式选项卡。我不想使用 ActionBarSherlock，而是需要应用自定义可绘制对象。有人可以帮忙吗？我尝试使用 9.png 但没有太大帮助，因为它没有填充完整的选项卡，而是只显示了一些模糊的扩展背景。如果您建议一些可绘制对象 - 请同时提供可绘制对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:02:19.763

您可以从此链接下载现成的演示：[ICSStyleTab](https://github.com/Abhan/TabViewPager)。我为其中一个项目尝试了它，它工作正常。如果您想添加寻呼机功能，您可以使用`FragmentPager`从`Support V4`库中轻松添加。

[更新：带有寻呼机演示](https://github.com/Abhan/TabViewPager)的 ICSStyle 选项卡

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T09:47:10.947

HoloEverywhere 是一个为 3.0 之前的设备提供 ICS/Holo 主题的库：

[https://github.com/Prototik/HoloEverywhere](https://github.com/Prototik/HoloEverywhere)

即使您真的想编写自己的代码，您也可以通过查看其源代码来获得大量洞察力。

# encryption - makecert.exe 将数字证书存储在哪里

> ID：16188437
> 
> 赞同：6
> 
> 时间：2013-04-24T09:32:30.877
> 
> 标签：encryption, cryptography, certificate, certificate-authority

我使用本教程和 makecert.exe 工具创建了一个自签名证书和一个客户端证书：

[http://msdn.microsoft.com/en-us/library/ff647171.aspx](http://msdn.microsoft.com/en-us/library/ff647171.aspx)

但是，当我去 MMC 并尝试在受信任的根证书颁发机构中导入证书时，我不知道在哪里可以找到 .cer 文件。

makecert.exe 工具在哪里保存它创建的证书？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-06-03T00:06:03.577

如果您做了我所做的，只是将命令提示符留在 c:\windows\system32 中（使用 x64 Cross Tools 命令提示符），您会惊讶于该文件不在 c:\windows\system32 中（通过执行简单的目录 *.cer)。

幸运的是，它位于 c:\windows\SysWOW64 中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-24T09:41:45.493

第 1 步，第 1 点

> 打开 Visual Studio 命令提示符并浏览到要保存证书文件的位置

因此，它不是您在打开 Visual Studio 命令提示符时前往的位置吗？

# drop-down-menu - 内联下拉定位问题

> ID：16188442
> 
> 赞同：0
> 
> 时间：2013-04-24T09:32:36.363
> 
> 标签：drop-down-menu, inline

请看下面的小提琴： http: [//jsfiddle.net/4LZnC/](http://jsfiddle.net/4LZnC/) 我需要这样做，所以当您将鼠标悬停在`.dropdown`元素上时，`.expandable`要显示但使用父级的背景和边框。换句话说，尝试`position:absolute`从`.expandable`. 我需要相同的效果，但不`.expandable`压低其他内容。我该如何做到这一点？我真的一点头绪都没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:34:22.543

您需要将绝对位置分配给父元素并用固定高度的容器包装它。

**HTML**

```
<div id="wrap">
    <div class="dropdown">
        Flow content
        <div class="expandable">
        my expandable content here my expandable content here my expandable content   here my expandable content here my expandable content here 
        </div>
    </div>
</div> 
```

**CSS**

```
div.dropdown {background:red; border:3px solid blue; position:absolute; width: 100%;}
div.dropdown .expandable { display:none; position: relative; top:100%; left:0; }
div.dropdown:hover .expandable { display:block; }
#wrap{ height:26px; } 
```

**工作示例** [http://jsfiddle.net/4LZnC/3/](http://jsfiddle.net/4LZnC/3/)

# security - Symfony 2 Security.yml 重定向循环和 LogicException 问题

> ID：16188444
> 
> 赞同：3
> 
> 时间：2013-04-24T09:32:42.770
> 
> 标签：security, symfony

好的，我想我需要手握..

这个问题是上一个问题的后续： [Symfony2 img/LdapBundle Bad credentials error](https://stackoverflow.com/questions/16153125/symfony2-img-ldapbundle-bad-credentials-error)

我已经把它分开了，因为它是一个不同的问题。我遇到了与 security.yml 文件相关的两个不同问题，如下所述。

我有我的security.yml：

```
security:
    firewalls:
        login_firewall:
            pattern:    ^/login$
            anonymous:  ~
            imag_ldap:
                check_path: login_check
                login_path: login
                csrf_provider: form.csrf_provider
                intention: authenticate
                provider: ldap
            logout:
                path:           /logout
                target:         /
        restricted_area:
            pattern:          ^/
            #anonymous:        ~ 
    providers:
        ldap:
           id: imag_ldap.security.user.provider

    encoders:
        IMAG\LdapBundle\User\LdapUser: plaintext

    access_control:
        - { path: ^/login,          roles: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/,               roles: IS_AUTHENTICATED_FULLY } 
```

但我收到以下错误： `LogicException: No authentication listener registered for firewall "restricted_area".`

所以我尝试了以下方法：

```
security:
    firewalls:
        login_firewall:
            pattern:    ^/login$
            anonymous:  ~
            imag_ldap:
                check_path: login_check
                login_path: login
                csrf_provider: form.csrf_provider
                intention: authenticate
                provider: ldap
            logout:
                path:           /logout
                target:         /
        restricted_area:
            pattern:          ^/
            #anonymous:        ~ 
            imag_ldap:
                check_path: login_check
                login_path: login
                csrf_provider: form.csrf_provider
                intention: authenticate
                provider: ldap
            logout:
                path:           /logout
                target:         / 
```

但这会导致重定向循环。

谁能告诉我如何让它工作？我正在尝试使用[https://github.com/BorisMorel/LdapBundle](https://github.com/BorisMorel/LdapBundle) ldap 包对用户进行身份验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T09:59:16.717

根据文档[https://github.com/BorisMorel/LdapBundle#configure-securityyml](https://github.com/BorisMorel/LdapBundle#configure-securityyml)，您应该有一个防火墙，`pattern: ^/`其中也存在登录名。

```
security:
    firewalls:
        restricted_area:
            pattern:    ^/
            anonymous:  ~
            imag_ldap:
                check_path: login_check
                login_path: login
                csrf_provider: form.csrf_provider
                intention: authenticate
                provider: ldap
            logout:
                path:           /logout
                target:         /
    providers:
        ldap:
           id: imag_ldap.security.user.provider

    encoders:
        IMAG\LdapBundle\User\LdapUser: plaintext

    access_control:
        - { path: ^/login$,         roles: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/,               roles: IS_AUTHENTICATED_FULLY } 
```

不需要身份验证的站点必须包含在`acces_control`角色`IS_AUTHENTICATED_ANONYMOUSLY`下。这也适用于 dev-environment 中的分析器和工具栏（实际上对于 FOSUserBundle，但我认为这对于 LdapBundle 也很重要）。是的，我知道 symfony 文档说要专门为`^/login$`.

```
 - { path: ^/_wdt, role: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/_profiler, role: IS_AUTHENTICATED_ANONYMOUSLY } 
```

**编辑**：不要忘记从包中导入路由定义而不是自己定义它们。见[https://github.com/BorisMorel/LdapBundle#import-routing](https://github.com/BorisMorel/LdapBundle#import-routing)

# activiti - 运行 activiti-rest.war 时出现异常

> ID：16188452
> 
> 赞同：0
> 
> 时间：2013-04-24T09:33:00.647
> 
> 标签：activiti

任何人都可以解释如何运行 activiti-rest.war 的过程，我正在使用 postgres 数据库。我在运行时将war文件复制到tomcat webapps中显示此错误，还有一件事我没有使用spring框架，我使用postgres配置更改db.properties文件，仍然配置设置的内容和位置。在tomcat中清楚地解释和老板

```
org.activiti.engine.ProcessEngines initProcessEnginFromResource
SEVERE: Exception while initializing process engine :couldn't check if tables are already present using metadata:
### Error getting a new connection.  Cause: java.sql.SQLException: No suitable driver found for jdbc:postgresql://localhost:5432/activiti
### Cause: java.sql.SQLException: No suitable driver found for jdbc:postgresql://localhost:5432/activiti
org.activiti.engine.ActivitiException: couldn't check if tables are already present using metadata:
### Error getting a new connection.  Cause: java.sql.SQLException: No suitable driver found for jdbc:postgresql://localhost:5432/activiti
### Cause: java.sql.SQLException: No suitable driver found for jdbc:postgresql://localhost:5432/activiti
        at org.activiti.engine.impl.db.DbSqlSession.isTablePresent(DbSqlSession.java:890)
        at org.activiti.engine.impl.db.DbSqlSession.isEngineTablePresent(DbSqlSession.java:854)
        at org.activiti.engine.impl.db.DbSqlSession.dbSchemaUpdate(DbSqlSession.java:806)
        at org.activiti.engine.impl.db.DbSqlSession.performSchemaOperationsProcessEngineBuild(DbSqlSession.java:1100)
        at org.activiti.engine.impl.SchemaOperationsProcessEngineBuild.execute(SchemaOperationsProcessEngineBuild.java:25)
        at org.activiti.engine.impl.interceptor.CommandExecutorImpl.execute(CommandExecutorImpl.java:24)
        at org.activiti.engine.impl.interceptor.CommandContextInterceptor.execute(CommandContextInterceptor.java:60)
        at org.activiti.engine.impl.interceptor.LogInterceptor.execute(LogInterceptor.java:32)
        at org.activiti.engine.impl.ProcessEngineImpl.<init>(ProcessEngineImpl.java:75)
        at org.activiti.engine.impl.cfg.ProcessEngineConfigurationImpl.buildProcessEngine(ProcessEngineConfigurationImpl.java:311)
        at org.activiti.engine.ProcessEngines.buildProcessEngine(ProcessEngines.java:194)
        at org.activiti.engine.ProcessEngines.initProcessEnginFromResource(ProcessEngines.java:167)
        at org.activiti.engine.ProcessEngines.init(ProcessEngines.java:98)
        at org.activiti.engine.ProcessEngines.getProcessEngine(ProcessEngines.java:224)
        at org.activiti.engine.ProcessEngines.getDefaultProcessEngine(ProcessEngines.java:217)
        at org.activiti.rest.servlet.ActivitiServletContextListener.contextInitialized(ActivitiServletContextListener.java:39)
        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)
        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)
        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:977)
        at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1655)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
        at java.util.concurrent.FutureTask.run(FutureTask.java:138)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)
Caused by: org.apache.ibatis.exceptions.PersistenceException:
### Error getting a new connection.  Cause: java.sql.SQLException: No suitable driver found for jdbc:postgresql://localhost:5432/activiti
### Cause: java.sql.SQLException: No suitable driver found for jdbc:postgresql://localhost:5432/activiti
        at org.apache.ibatis.exceptions.ExceptionFactory.wrapException(ExceptionFactory.java:23)
        at org.apache.ibatis.session.defaults.DefaultSqlSession.getConnection(DefaultSqlSession.java:222)
        at org.activiti.engine.impl.db.DbSqlSession.isTablePresent(DbSqlSession.java:867)
        ... 29 more
Caused by: java.sql.SQLException: No suitable driver found for jdbc:postgresql://localhost:5432/activiti
        at java.sql.DriverManager.getConnection(DriverManager.java:602)
        at java.sql.DriverManager.getConnection(DriverManager.java:154)
        at org.apache.ibatis.datasource.unpooled.UnpooledDataSource.doGetConnection(UnpooledDataSource.java:181)
        at org.apache.ibatis.datasource.unpooled.UnpooledDataSource.doGetConnection(UnpooledDataSource.java:176)
        at org.apache.ibatis.datasource.unpooled.UnpooledDataSource.getConnection(UnpooledDataSource.java:80)
        at org.apache.ibatis.datasource.pooled.PooledDataSource.popConnection(PooledDataSource.java:371)
        at org.apache.ibatis.datasource.pooled.PooledDataSource.getConnection(PooledDataSource.java:80)
        at org.apache.ibatis.transaction.jdbc.JdbcTransaction.openConnection(JdbcTransaction.java:131)
        at org.apache.ibatis.transaction.jdbc.JdbcTransaction.getConnection(JdbcTransaction.java:58)
        at org.apache.ibatis.session.defaults.DefaultSqlSession.getConnection(DefaultSqlSession.java:220)
        ... 30 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T12:30:35.043

您正在部署的 tomcat 服务器`activiti-rest.war`应该在其 lib 文件夹中包含 postgres JDBC 驱动程序 jar 文件。

您可以在[此处获取 postgre JDBC 驱动程序](http://jdbc.postgresql.org/download.html)。

# ruby-on-rails-3 - 添加提交按钮调用早期按钮的功能本身

> ID：16188455
> 
> 赞同：0
> 
> 时间：2013-04-24T09:33:01.750
> 
> 标签：ruby-on-rails-3

我正在开发 Rails 3 应用程序。这里有一个视图显示用户上传的所有 excel 文件。*执行所有复选框选定文件的按钮已经存在，每个文件分别删除*。现在**我应该添加一个“删除”按钮来删除选定的文件**。我添加了按钮 n 修改了此表单调用的函数，现在*只是显示“执行中”和“删除中”，*以检查第二个“删除”按钮是否具有功能。但是每次单击删除时，它仅在 cmd 中打印“执行中”。我猜想在视图“列表”中编写的 AJAX 相关代码是问题所在。请帮忙！！告诉我为什么它总是会执行？相关代码在这里：

PS：我在controller.rb中也使用过`if params[:commit]="Delete"`& `if params[:delete_button]`，但没有帮助

**list.html.erb（显示所有文件的视图）**

```
<% if @files.length > 0 %>
<h2 id='comments'>Uploaded Excel Files are as listed below for Edit/Delete/Execution</h2>
<div id='checkone' class='hide'>Please check atleast one excel file to execute</div>
    <% ajax_str = "new Ajax.Request('/account/execute_testcases', {asynchronous:true, evalScripts:true, onComplete:function(request){adjust_sidebar();Element.show('msg');Element.hide('waitid');Element.hide('disableexecuteid');Element.show('executeid');}, onLoading:function(request){Element.show('waitid');Element.hide('msg');Element.hide('executeid');Element.show('disableexecuteid');}, parameters:Form.serialize(this)}); return false;".html_safe %>
    <%= form_for 'file_names', :url => {:controller => 'account', :action => 'execute_testcases'},  :remote => true, :html => {:name => 'frmExecute', :onsubmit => ajax_str }, :id =>'execute_tc' do |f| %>
    <table>
        <% if @file_count > 1 && @error_in_all_files == false %>
        <tr>
        <td>
        <input type='checkbox' name='chkAll' onclick='checkAll();'>
        <span class='text'>Check All/Decheck All</span>
        </td>
        </tr>
        <% end %>
    </table>
    <table class='upload'>
    <% for a in @files %>
        <tr>

        <td>
        <% file_id = a.id.to_i %>
        <% if(@excel_errors[file_id].nil? || @excel_errors[file_id].empty?) && a.file_type.to_i != 1 %>
            <input type='checkbox' name = "excelfile[]" value="<%= a.excel_filename %>,<%= a.excel_filename_with_timestamp %>">
        <% else %>
            <input type='checkbox' name = "excelfile[]" value="<%= a.excel_filename %>,<%= a.excel_filename_with_timestamp %>" disabled=true>
        <% end %>
        <a href="open_excel_file/<%= a.id %>" title='Click to open' class='nodecoration'><%= a.excel_filename %></a>
        </td>
        <td>
        <%= link_to(image_tag("/images/b_edit.png", :border => 0, :title => 'Edit'), :action => 'upload_file', :file_id => a.id) %>
        </td>
        <td>
        <a href="delete/<%=a.id %>"><img src='/images/b_drop.png' border=0 title='Delete' onclick="return confirm('This will delete the related reports too. Are you sure to delete?');"></a>

        </td>
        <td>
            <% 
               if !@excel_errors[file_id].nil? && !@excel_errors[file_id].empty? 
                 @joined_excel_errors = @excel_errors[file_id].join(', ')
            %>     
                <a href='#' onclick="show_excel_errors(<%=file_id%>);" title="Error">Error</a>
            <% end %>
        </td>

        </tr>
        <tr id="excel_error_<%=file_id %>" style='display:none;'>
           <td colspan=4>
            <% if !@excel_errors[file_id].nil? && !@excel_errors[file_id].empty? %>
                <div class="padder">
                <% for error_value in @excel_errors[file_id] %>
                    <font color='maroon'><%= error_value %></font><br>
                <% end %>
                </div>
            <% end %>
            </td>
        </tr>
    <% end %>
        <tr><td>&nbsp;</td></tr>

        <tr>
        <td>
        <% if @error_in_all_files == false %>
        <span class='executebutton' id='executeid'>
            <%= f.submit "Execute", name: 'execute_button', :onclick =>"return checkSelected();" %>
        </span>
        <span class='deletebutton' id='deleteid'>
            <%= f.submit "Delete", name: 'delete_button', :onclick =>"return checkSelected();" %>
        </span>
        <% end %>
        <span id='disableexecuteid' class='executebutton' style='display:none;'>
        <input type='submit' value="Execute" disabled="disabled">
        </span>
        <span id='waitid' style="display:none;" class='text'>
            <br>Executing Test Cases...Please wait...<%= image_tag("/images/wait26trans.gif", :border => 0) %>
        </span>
        <span id='msg' style="display:none;" class='text'>
            <br><br>  Click here to <%= link_to 'View Test Results', {:controller => 'account', :action => 'recent_test_results'}, :class => 'brownlink' %>
        </span> 
        </td>
        </tr>
    </table>
    <span id='subject_list'>    
    </span>
    <% end %>
<% else %>
No test case sheets found! 
    <br><br>
    <%= link_to '>> Upload File', {:controller => 'account', :action => 'upload_file'}, :class => 'brownlink' %>
<% end %>
<% for i in 1..10 %>
    <div>&nbsp;</div>
<% end %> 
```

**控制器.rb**

```
 def execute_testcases
  if !params[:execute_button].nil? 
    puts "in execute"
    # file_names = []
    # originalfile_filewithtime = []
    # original_file_map = {}
    # originalfile_filewithtime = params[:excelfile]
    ......
    # SOME CODE HERE
    ......
    # render :update do |page|
      # page.replace_html :subject_list, :partial => 'show_output', :locals => {:new_file_map => @new_file_map}
      # page.visual_effect :highlight,  'subject_list', :duration => 2
      # flash[:display]=@execmsg
    #end
    # puts @execmsg

  elsif !params[:delete_button].nil? 
   puts "in delete"
  end

  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T09:29:26.880

我意识到它必须与 AJAX 做一些事情，`Form.serialize(this)`它可以序列化所有内容。即它调用视图中第一个按钮的功能，而不管是否存在提交按钮

# string - 在 Pig 中通过两个略有不同的键加入

> ID：16188468
> 
> 赞同：0
> 
> 时间：2013-04-24T09:33:29.637
> 
> 标签：string, join, merge, mapreduce, apache-pig

一个 mapreduce 任务：

file_one中的key1为a1,a2,a3,a10,a11,a12；file_two 中的 key2 为 persona1、persona1、persona2、persona3、persona12、persona12、persona3、persona11、persona10。

Merge_file=JOIN file_one BY Key1, file_two by Key2??(怎么写..)

而且由于第二个键有重复，这有关系吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:15:17.783

我的建议是为每个数据集创建一个新列并加入其中，例如：

```
A = foreach file_one generate *, join_key1 as SUBSTRING(key1, 1, 100);
B = foreach file_two generate *, join_key2 as SUBSTRING(key2, 7, 100);
C = join A by join_key1, B by join_key2; 
```

# c# - CXXI 现在支持 MSVC ABI 了吗？

> ID：16188470
> 
> 赞同：2
> 
> 时间：2013-04-24T09:33:42.140
> 
> 标签：c#, c++, .net, visual-c++, mono

一年（或两年）过去了。CXXI 现在支持 MSVC ABI 了吗？我见过[这个](https://github.com/mono/cxxi/pull/2)但还没有看到关于使用 CXXI 和 MSVC ABI 编译的 C++ DLL 的文章。有没有人尝试/测试过它可以与 MSVC ABI 一起使用？

现在似乎有大约 3 个 CXI：

*   [一个](https://github.com/tritao/cxxi)用 Clang 而不是 GCC-XML 和[甜蜜的自动生成 API](https://github.com/tritao/cxxi/blob/master/examples/OpenCV/OpenCV.cs)（似乎还活着，[可能](https://github.com/mono/cxxi/pull/2#issuecomment-5696679)有 MSVC ABI 支持）
*   [一个](https://github.com/kthompson/cxxi)可能具有 MSVC ABI 支持并具有[MonoDroid](https://github.com/mono/cxxi/pull/2)[使用示例的示例](http://rogue-modron.blogspot.ru/2012/05/cxxi-monodroid.html) `problems still present in the master have been solved in the fork, in particular with parameters passed by reference`（似乎保留了一年）
*   [原版](https://github.com/mono/cxxi)（好像留了一年，MSVC ABI 支持不详）

# c++ - 每次我知道我正在处理无符号值时，我应该使用“无符号”吗？

> ID：16188482
> 
> 赞同：9
> 
> 时间：2013-04-24T09:34:06.010
> 
> 标签：c++, signedness

通常已知值是积极的。例如 TCP/UDP 序列号总是正值。两者`int`都`unsigned int`足够大，甚至可以存储最大的`sequence number`，所以我可以使用这些类型中的任何一种。当已知值为正时，还有许多其他示例。

`unsigned`当常规类型的容量`signed`足够（而且通常绰绰有余）时，是否有任何理由使用类型？

我个人倾向于使用常规类型，因为：

*   `int`可能比`uint`or更具可读性`unsigned int`
*   我不需要包含额外的标题`UINT`等。
*   我将避免在程序中的某个地方进行额外的演员表

`unsigned`我可以想象使用类型的原因：

*   帮助编译器生成更好的代码？
*   帮助其他程序员了解该变量是无符号的
*   避免可能的错误（例如，当将 int 分配给 UINT 编译器时可能会产生编译时错误，我们应该检查我们分配的值是否为负）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:49:26.743

原因之一是比较有符号数和无符号数会导致令人惊讶的结果。在 C 和（我认为）C++ 中，比较有符号数和无符号数会导致有符号数被解释为无符号数。如果有符号值恰好是负数，则将其读取为无符号将给出比任何无符号数更大的值，这不是您想要的。有关Objective-C 中的示例，请参阅[此问题，它使用与 C 相同的转换规则。](https://stackoverflow.com/q/16161107/643383)

# requirements - 个人项目的要求

> ID：16188485
> 
> 赞同：0
> 
> 时间：2013-04-24T09:34:14.120
> 
> 标签：requirements

收集需求是创建软件或 Web 应用程序的重要阶段。我在网上进行了广泛的搜索，但没有找到任何关于如何引出个人项目需求的指导。我发现的所有信息——包括我读过的书——都集中在不同的利益相关者身上。

所以我想知道，“收集”个人项目要求的最佳方式是什么？

我无法想象我是唯一一个有这个问题的人。我对 Web 应用程序有很多想法。由于此时我是唯一的利益相关者——还没有确定用户，我需要开发几个供个人使用的应用程序——我发现很难通过采访自己来引出这些要求。

由于英语不是我的母语，因此对可能的文本错误深表歉意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:41:39.770

您可以拥有一个文档，其中包含您在项目负责人中拥有的所有信息，采用名为“项目回忆录”的项目符号列表格式。只需列出您需要放入项目的所有信息和业务规则。之后，您可以开始开发一种非正式的软件需求文档（因为它是针对个人项目的），其中包含在开发阶段为您提供的一些基本信息，例如带有描述、用例和场景的功能列表，这将帮助您进行测试在后期阶段，用于定义 UI 外观和元素的模拟屏幕，用于定义屏幕内容的数据元素列表。只需保持简单易用，因为它仅供您个人使用。希望这会有所帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:37:58.930

这些问题应该是思考过程的触发器。

如果您是利益相关者旁边的开发人员，有什么不同？您的想法是利益相关者的想法，您必须尝试通过此过程确定自己的需求。

使用结构化方法识别您自己的需求将帮助您识别在开发过程中可能会遇到的需求。

如果唯一的目的不仅仅是个人的，我怀疑开始开发是否是一个好主意。然后，您将需要找到潜在客户进行面试。调查可能的市场。

# margin - 空跨度会导致奇怪的边距/填充

> ID：16188489
> 
> 赞同：1
> 
> 时间：2013-04-24T09:34:25.417
> 
> 标签：margin, html, css

当我在 a 中放置一个固定大小的 display-block`<span>`元素时，`<div>`它会在`<div>`. 当元素内有文本时`<span>`，一切都很好。这是什么原因？我该如何解决？我在 Firfox 和 Chrome 上进行了测试。

[奇怪的空间 http://picster.at/img/0/9/6/0968c75ddf29ad07cb71eee2cff472a9.png](http://picster.at/img/0/9/6/0968c75ddf29ad07cb71eee2cff472a9.png)

```
<!DOCTYPE html>
<html>

<head>
    <style type="text/css">
    <!--
    .outer {
        background: grey;
        padding: 4px;
    }
    .inner {
        display: inline-block;
        background: cyan;
        height: 40px;
        width: 40px;
    }
    -->
    </style>
</head>

<body>
    <div class="outer">
        <span class="inner">Foo</span>
    </div>

    <br>

    <div class="outer">
        <span class="inner"></span>
    </div>
</body>

</html> 
```

**更新：**

浮动将是显示块元素的替代方案。完全有效，但是我想了解此示例中的显示块有什么问题。此外，对我来说，它看起来不像是空白问题，因为这只会影响左/右的边距（如果我错了，请纠正我）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T09:40:15.210

这是因为您正在使用`inline-block;`，这是`inline-block`与`floats`

[**演示**](http://jsfiddle.net/TSugb/)

```
.outer {
    background: grey;
    padding: 4px;
    overflow: hidden;
}

.inner {
    float: left;
    background: cyan;
    height: 40px;
    width: 40px;
} 
```

`inline-block`留下 4px 边距的空白。

[**更多信息**](http://robertnyman.com/2010/02/24/css-display-inline-block-why-it-rocks-and-why-it-sucks/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T09:47:30.830

这个 hack 对我很有用。

[演示](http://jsfiddle.net/x495s/)

```
.inner:after{
        content: '\00a0';
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T09:45:49.163

inline-block 搞砸了

如果您将其设置为 inline-block 的意图是设置一行 .inner，则将内部设置更改为块，然后向左浮动。

然后使用带有 clear: both 的 div 来解决通常浮动导致的问题。

这是您修改的代码：

```
<head>
    <style type="text/css">
    <!--
    .outer {
        background: grey;
        padding: 4px;
    }
    .inner {
        display: block;
        background: cyan;
        height: 40px;
        width: 40px;
        float: left;
        margin-right: 4px;
    }
    .clear{
        clear:both;
    }
    -->
    </style>
</head>

<body>
    <div class="outer">
        <span class="inner">Foo</span>
        <div class="clear"></div>
    </div>

    <br>

    <div class="outer">
        <span class="inner"></span>
        <span class="inner"></span>
        <div class="clear"></div>
    </div>
</body>

</html> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-12T13:44:03.187

它可以通过将外部元素的“行高”设置为 0 来解决。这几乎解决了所有情况。

不要忘记确保内部元素不会继承它，为此您只需将其设置为“line-height:initial”。

```
.outer {
        background: grey;
        padding: 4px;
        line-height:0;
    }
    .inner {
        display: inline-block;
        background: cyan;
        height: 40px;
        width: 40px;
        line-height:initial;
    } 
```

# java - weka：如何从测试单个实例中获取类名

> ID：16188490
> 
> 赞同：4
> 
> 时间：2013-04-24T09:34:26.897
> 
> 标签：java, testing, classification, weka, evaluate

我想为单个实例做一个测试

我在 FilteredClassifier 中使用 j48，如下所示：

```
Remove rm = new Remove();
rm.setAttributeIndices("1"); // remove 1st attribute
// classifier
J48 j48 = new J48();
j48.setUnpruned(true); // using an unpruned J48

// meta-classifier
FilteredClassifier fc_J48 = new FilteredClassifier();
fc_J48.setFilter(rm);
fc_J48.setClassifier(j48);
tdta.dataSet.setClassIndex(tdta.dataSet.numAttributes() - 1);
fc_J48.buildClassifier(tdta.dataSet); 
```

现在，我尝试这些选项：

```
j48.classifyInstance(dataSet.instance(1)) 
```

或者

```
eval.evaluateModelOnce(j48, dataSet.instance(1)) 
```

我认为这将是相同的结果。

**我的问题是：** 当我得到双数时，如何将其转换为班级名称？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-03T08:32:28.010

试试这个：

```
System.out.println(dataSet.classAttribute().value((int) j48.classifyInstance(dataSet.instance(1))); 
```

看看：[http ://weka.8497.n7.nabble.com/Predicting-in-java-td27363.html](http://weka.8497.n7.nabble.com/Predicting-in-java-td27363.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-28T10:12:41.113

```
for (int i = 0; i < test.numInstances(); i++) {
  double pred = fc.classifyInstance(test.instance(i));
  System.out.print("ID: " + test.instance(i).value(0));
  System.out.print(", actual: " + test.classAttribute().value((int)         test.instance(i).classValue()));
 System.out.println(", predicted: " + test.classAttribute().value((int) pred)); 
```

}

`test`是`testInstances`，所以如果你有一个实例，你可以`test.instance(i)`用你的实例替换。

# sql-server - SqlServer 2008 需要建议以优化我的查询以及哪些归档到表中的索引字段

> ID：16188494
> 
> 赞同：0
> 
> 时间：2013-04-24T09:34:30.740
> 
> 标签：sql-server, indexing, database-performance

我有这个查询

```
select count(distinct user1_.Id) as col_0_0_ from [FriendCloseness] friendclos0_ inner join [User] user1_ on friendclos0_.User_id=user1_.Id where dateadd(d, 0, datediff(d, 0, friendclos0_.LastUpdate))=@p0 and friendclos0_.IsInvited=1 and user1_.IsDeleted=0 and user1_.Sex=@p1 
```

表用户加入 FriendCloseness 查询 FriendClossness 字段 LastUpdate、IsInvited、用户字段 IsDeleted、Sex where

涉及查询的表用户结构

User **Id,(Primary key) IsDeleted, Sex,**

FriendClossness **Id,(主键，DBMS会自动设置索引为主键吗？) LastUpdate (datetimeoffset), IsInvited, User_id (外键)**

我知道**我需要索引哪个字段**，我想通过创建新字段“InviteDate”来删除日期函数以仅存储日期

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:57:10.360

试试这个——

```
SELECT col_0_0_ = COUNT(DISTINCT u.Id)
FROM (
    SELECT u.Id
    FROM dbo.[User] u
    WHERE u.IsDeleted = 0 
        AND u.Sex = @p1
    --GROUP BY u.Id
) u
JOIN (
    SELECT 
          f.[user_id]
        , LastUpdate = DATEADD(DAY, 0, DATEDIFF(DAY, 0, f.LastUpdate))
    FROM dbo.[FriendCloseness] f
    WHERE f.IsInvited = 1 
) f ON f.[user_id] = u.Id
WHERE f.LastUpdate = @p0 
```

# windows-services - 在 WiX 安装程序中安装和启动 Windows 服务失败

> ID：16188495
> 
> 赞同：15
> 
> 时间：2013-04-24T09:34:33.417
> 
> 标签：windows-services, wix, wix3.8

我正在创建一个 MSI 包，用于使用 WiX v3.8 安装和启动 Windows 服务。代码如下：

```
<Component Id="INSTALLAPSSERVICE" Guid="991D5F82-0E77-4FE3-B1D8-4C941B84C7CD" Win64="yes">
   <File Id="ApsService.exe"
         Name="ApsService.exe"
         Source="Resource\ApsService.exe"
         KeyPath="yes"
         Vital="yes"
         DiskId="1"></File>
   <ServiceInstall Id="ApsServiceInstaller"
                   Name="ApsService"
                   DisplayName="ApsService"
                   Type="ownProcess"
                   Start="auto"
                   ErrorControl="normal"
                   Description="A monitor service for windows application."
                   Account="[SERVICEACCOUNT]"
                   Password="[SERVICEPASSWORD]"
                   Vital="yes"
                   Interactive="no"></ServiceInstall>
    <ServiceControl Id="StartService"
                    Start="install"
                    Stop="both"
                    Remove="uninstall"
                    Name="ApsService"
                    Wait="yes"/>
</Component> 
```

但安装失败，日志中出现以下错误：

```
Executing op: ServiceControl(,Name=ApsService,Action=1,Wait=1,)
StartServices: Service: ApsService
Error 1920\. Service 'ApsService' (ApsService) failed to start. Verify that you have      sufficient privileges to start system services.
MSI (s) (F0:D0) [15:57:28:630]: I/O on thread 3676 could not be cancelled. Error: 1168
MSI (s) (F0:D0) [15:57:28:630]: I/O on thread 1888 could not be cancelled. Error: 1168
MSI (s) (F0:D0) [15:57:28:630]: I/O on thread 1764 could not be cancelled. Error: 1168
MSI (s) (F0:D0) [15:57:28:630]: I/O on thread 3504 could not be cancelled. Error: 1168
MSI (s) (F0:D0) [15:57:28:630]: I/O on thread 2100 could not be cancelled. Error: 1168
MSI (s) (F0:D0) [15:57:28:630]: I/O on thread 2752 could not be cancelled. Error: 1168
MSI (s) (F0:D0) [15:57:28:630]: I/O on thread 3672 could not be cancelled. Error: 1168
MSI (s) (F0:D0) [15:57:28:630]: I/O on thread 3876 could not be cancelled. Error: 1168
MSI (s) (F0:D0) [15:57:28:630]: I/O on thread 1400 could not be cancelled. Error: 1168
MSI (s) (F0:C0) [15:57:28:630]: Product: WinApsSetup64 -- Error 1920\. Service 'ApsService' (ApsService) failed to start. Verify that you have sufficient privileges to start system services. 
```

如何修复错误？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-24T12:20:02.607

您收到的错误消息是 Windows Installer 在安装期间无法启动服务时发送的一般消息。几乎总是问题是服务缺少依赖项或在启动时未完全配置。要调试根本问题，请尝试：

1.  安装 MSI 包。
2.  当出现错误对话框时，指示服务启动失败 **不要*关闭对话框。
3.  启动 services.msc 或使用命令行中的 sc.exe 来尝试启动您的服务。Windows 安装程序应该已经配置了足够多的服务，以便能够更深入地调试它失败的原因。
4.  如有必要，直接调试到您的服务可执行文件以查看它无法启动的原因。

如果这是用托管代码编写的服务，请确保它不**依赖**于放置在 GAC 中的文件。直到安装过程中的非常非常晚的时候，文件才会出现在 GAC 中。如果您必须在 GAC 中使用文件，您将无法使用内置`ServiceControl`元素，并且必须编写自定义操作以在`InstallFinalize`. 请注意，在`InstallFinalize`自定义操作之后不会提升，因此您的服务必须支持由非提升用户启动。同样，我建议不要依赖 GAC。

祝您调试服务好运！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-19T21:13:05.597

ServiceInstall 帐户在 OP 的示例中被混淆了，但是如果忘记完全限定帐户，则可能会发生此错误，如下所示：

`<ServiceInstall ... Account="NT AUTHORITY\LocalService" />`

如果您只指定用户名（没有 NT 授权），您的安装程序将失败，如下所示：

`<ServiceInstall ... Account="LocalService" />`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-04T16:59:30.513

记得在 [SERVICEACCOUNT] 中添加“作为服务登录”权限，

将“作为服务登录”权限添加到本地计算机上的帐户

1) 打开本地安全策略。

2) 在控制台树中，双击**本地策略**，然后单击**用户权限分配**。

3) 在详细信息窗格中，双击**作为服务登录**。

4) 单击**添加用户或组**，然后将相应的帐户添加到具有**作为服务登录**权限的帐户列表中。

来自：[http](http://technet.microsoft.com/en-us/library/cc739424%28v=ws.10%29.aspx) ://technet.microsoft.com/en-us/library/cc739424%28v=ws.10%29.aspx 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-01T19:53:12.663

在调试服务启动问题时，我总是只使用一个简单的 if() 语句来检查安装目录中是否存在特定文件。当服务失败时，我打开一个命令提示符（在关闭指示失败的对话框之前）并使用“echo >thatfile”来创建我在 if() 中查找的文件。if() 的对象是 Debugger.Launch() 调用。

现在，我可以关闭对话框并重新运行安装程序，这一次它将启动调试器，我可以看到会发生什么。我倾向于使用静态类初始化作为启动调试器的时刻，但您可以尝试在“OnStart()”中执行此操作，但如果存在加载/绑定问题，您可能不会在它死之前到达那一点. 而在静态类初始化期间执行它几乎总是会告诉您需要作为依赖项解决的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-19T20:40:53.220

所以我今天收到了这个错误，因为我的服务有依赖项，必须在启动服务之前进行 GACed。事实证明，安装程序最后对依赖项进行 GAC，如果不构建某种引导程序/多部分安装程序，确实没有解决这个问题的好方法。

但是，我找到了以下解决方案：将程序集都部署到 GAC 并将它们安装在与服务相同的目录中。这样，服务将能够在程序文件目录中找到启动时的 DLL，并且它们将被 GACed（这是出于其他原因的要求）。

为此，我必须创建两个单独的组件组和一个“虚拟”目录：

```
<Directory Id="TARGETDIR" Name="SourceDir">
  <Directory Id="ProgramFilesFolder">
    <Directory Id="INSTALLDIR" Name="NameOfProgram" />
    <Directory Id="GacDlls" Name="libs" />
  </Directory>
</Directory> 
```

然后我创建了两个组件组：一个包含 exe 和所有库，第二个包含相同的库，且 Assembly 属性设置为“.net”：

```
<ComponentGroup Id="ServiceLibs" Directory="GACDlls">
    <Component Id="log4netGAC"
                   Guid="a23099ac-5880-4b6e-af3f-fa7cef113226">
        <File Id="log4net.dllGAC"
              Name="log4net.dll"
              Source="..\ProjectDir\bin\$(var.Configuration)\log4net.dll"
              KeyPath="yes"
              Vital="yes"
              DiskId="1"
              Assembly=".net"
            />
    </Component>
</ComponentGroup>

<ComponentGroup Id="ProductComponents" Directory="INSTALLDIR">
    <Component Id="log4net"
               Guid="463e05db-e248-44d7-bbde-467358b7310f">
        <!-- normally we'd want to GAC this (Assembly=".net"), but that would prevent us from starting the service up during install so we'll just drop it in the program folder -->
        <File Id="log4net.dll"
              Name="log4net.dll"
              Source="..\ProjectName\bin\$(var.Configuration)\log4net.dll"
              KeyPath="yes"
              Vital="yes"
              DiskId="1"                      
            />              
    </Component>
    ... other components ...
</ComponentGroup> 
```

现在它起作用了！

# java - Synchronizing of shared object which is used by worker threads

> ID：16188498
> 
> 赞同：0
> 
> 时间：2013-04-24T09:34:41.540
> 
> 标签：java, multithreading, calendar, synchronization

My last question to this topic and the corresponding answer did not explain all details. So I decide to simplify the code:

```
List<String> wis = new ArrayList<String>();
for(int i=0;i<3000;i++) {
    wis.add("test_" + i);
}   
DayCalc calc = new DayCalc();   
List<List<String>> partition = MyPartition.partition(wis, 30);
ExecutorService executor = Executors.newFixedThreadPool(4);
for(List<String> part: partition) {
    Runnable worker = new DayCalcWorker(part, calc);
    executor.execute(worker);
}
executor.shutdown();
while (!executor.isTerminated()) {
    // Execute all Threads
} 
```

The shared class object "calc" is used by all executed threads:

```
public class DayCalc {
    private static int CURRENT_DAY_OF_YEAR = DateTimes.getCurrentCalendarDay();
    ArrayList<String> kwContentArray;

    public DayCalc() {
       kwContentArray = new ArrayList<String>();
    }

    private int getCurrentCalendarDay(Calendar cal) {
       // Reset time to start of day (00:00)
       cal.set(Calendar.HOUR, 0);
       cal.set(Calendar.MINUTE, 0);
       // Get starting day
       Calendar currentTime2 = StartDate.getStartDate();
       System.out.println("Day: " + CURRENT_DAY_OF_YEAR);
       System.out.println("Start Date: " + currentTime2.getTime());
       int day = (int) Convert.daysBetween(currentTime2.getTime(), cal.getTime());
       return day;
    }

    public void setValueFromWorkItem(String wiID, String duration, Calendar cal) {
       if (duration != null) {
        this.setDurationValues(wiID, duration, cal);
       } else {
        int currentDay = getCurrentCalendarDay(cal);
        long time = 0;
        kwContentArray.add(String.valueOf(time));
       }
    }

  // [...]
} 
```

Thread Worker class:

```
public class DayCalcWorker implements Runnable {

    private List<String> wis;
    private DayCalc dayCalc;    
    GregorianCalendar cal = new GregorianCalendar();
    GregorianCalendar cal2 = new GregorianCalendar();    

    public DayCalcWorker(List<String> wis, DayCalc dayCalc) {
      this.wis = wis;
      this.dayCalc = dayCalc;
    }    

    @Override
    public void run() {
       if (wis != null && wis.size() > 0) {
           for(String wi: wis) {
             long randomDate = System.currentTimeMillis() + Random.getValue();
             cal.setTime(new Date(randomDate));
             dayCalc.setValueFromWorkItem(wi, "24", cal);
           }
       }
    }
} 
```

**Question**

Is it save **not** to synchronize the methods `setValueFromWorkItem` or `getCurrentCalendarDay` because they use e.g. only a **local created calendar object** from each Worker thread?

Because the object `calc` from the class `DayCalc` is shared I have only to keep care of objects which are created within this class and not with passed objects from Worker Threads which are calling methods of `calc`, haven't I?

Note that the code itself makes no sence at all. It just should explain that I use mutable calendar objects which need to synchronized (maybe).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:45:46.260

No, it's not safe. You're modifying a shared list (`kwContentArray`) from inside the `setValueFromWorkItem()` method. So this modification, and all the other accesses to this shared list (read or write), must be synchronized. You coud also use a concurrent List implementation, if that suits your needs.

# java - 使用线程读取或写入文件

> ID：16188515
> 
> 赞同：-1
> 
> 时间：2013-04-24T09:35:40.117
> 
> 标签：java, synchronization, thread-safety

我想要读取和写入文件的程序。我想一次执行任何一项操作（读取或写入）。如果我正在读取文件，写入请求将等待直到读取操作完成。如果我写入文件，则读取请求将等待直到写操作完成

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:41:53.867

您必须使用互斥锁。它是一种结构，一次只允许一个线程使用资源。环顾 ReentrantLock。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:53:00.963

创建一个类来进行读写，并使其完全同步，例如：

```
public class MyFileManager{
  private static MyFileManager instance;

  public static synchronized MyFileManager getInstance(){ // to use as singelton
    if(instance==null){
      instance=new MyFileManager();
    }
    return instance;
  }

  private MyFileManager(){} // to avoid creation of new instances

 public synchronized String read(File f){
   //Do Something
 }

 public synchronized void write(File f, String s){
   //Do Something
 }

} 
```

现在，当您想阅读或写作时，只需

```
String s=MyFileManager.getInstance.read(myfile);
MyFileManager.getInstance.write(myfile,"hello world!"); 
```

# perl - 合并重复值并在表之间复制

> ID：16188516
> 
> 赞同：0
> 
> 时间：2013-04-24T09:35:41.867
> 
> 标签：perl

这就是我的情况。我有两张桌子：

```
Table 1

C0   C1   C2   C3    ...    C8
     1                      10
     2                      50
     3                      70
     3                      20

Table 2

C0   C1   C2   C3    ...    C7
     1                      
     2                      
     3                      

Table 2 should become like this

C0   C1   C2   C3    ...    C7
     1                      x = 10
     2                      x = 50
     3                      x = 70,20 
```

所以基本上我想做的是比较两个表的 C1 的值。如果值相同，则应将 C8（表 1）的值复制到 C7（表 2）并添加“x =”。但是，当 C1 (table1) 中存在重复值时，例如此处的 3，那么在表 2 中，这些值应彼此相邻放置，以“，”分隔（例如此处 x = 70,20）

这是我到目前为止所拥有的

```
my $table1 = $ARGV[0];
my $table2 = $ARGV[1];

# Open my file (I use exactly the same code for opening table 2)
unless ($table1) {
    print "Enter filename of file:\n";
    $table1 = <STDIN>;
    chomp $table1;
    }
open(DATA1,'<',$table1) or die "Could not open file $filename $!";

# Here I push the values of C8 in table 1 to the same row
my %info = ()    
while (<DATA1>) {
    my @columns = split;
if( exists $info{ $columns[1] } ) {
    push @{ $info{ $columns[1] }->{var} }, $columns[8];
}
else {
    $info{ $columns[1] } = { var =>[ $columns[8] ] }
}
} 
```

如果这一切都正确，我现在唯一需要做的就是将值复制到 C7（表 2）并让它们以“x=”开头

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:12:31.763

我想这就是你所要求的。有关在 %t1 中对 @line 的访问如何工作的详细信息，请参阅`perldoc perldsc` 和`perldoc perllol`

```
use strict;
use warnings;

my $table1 = $ARGV[0];
my $table2 = $ARGV[1];

open(my $fh1,$table1) || die "$! $table1";
open(my $fh2,$table2) || die "$! $table1";

#discard the first lines which are the headers
my $headers1=<$fh1>;
my $headers2=<$fh2>;

#set up data from table1
my %t1=();
while(<$fh1>) {
    chomp;  #remove newlines
    my @line=split(/\t/);  #split on tabs
    my $keyfield=$line[1]; #key is C1
    push @{$t1{$keyfield}}, $line[8];
}

#read from table2 and write output
while(<$fh2>) {
    chomp; #remove newlines
    my @line=split(/\t/);  #split on tabs
    my $keyfield=$line[1]; #key is C1
    my @x=();
    if (exists($t1{$keyfield}) ) {
        push @x,@{$t1{$keyfield}}; # get the C8 values from t1
    }
    for my $c (0..6) {
        print $line[$c],"\t"; #print C0 to C6 with a tab seperator
    }
    print "x = ",join(",",@x),"\n";    #do x=70,20 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:21:28.993

您正在尝试将数组引用映射到字符串！

你能做的是，

1.  将数组的数据复制到`$string`.
2.  连接`$string`为`$string = "x = $string";`.
3.  将此修改`$string`后的值分配给 hash( `%info`) 代替`array reference`. 因为两者都是标量，分配不应该是一个问题。

# java - 合并两个具有相同键和不同值的 JsonObject

> ID：16188517
> 
> 赞同：0
> 
> 时间：2013-04-24T09:35:48.397
> 
> 标签：java, json

我有两个 JsonObject 具有相同的键但不同的值。我想将两个 JsonObject 与另一个 JsonObject 中的相同键合并。

```
JSONObject a = new JSONObject("{\"data\": [ {\"empId\": 1,\"deptId\": 2},{\"empId\": 3,\"deptId\": 4}]}");
JSONObject b = new JSONObject("{\"data\": [ {\"empId\": 7,\"deptId\": 8},{\"empId\": 9,\"deptId\": 10}]}"); 
```

结果应该是这样的。

```
{\"data\": [ {\"empId\": 1,\"deptId\": 2},{\"empId\": 3,\"deptId\": 4},{\"empId\": 7,\"deptId\": 8},{\"empId\": 9,\"deptId\": 10}]} 
```

请让我知道如何做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T09:42:26.130

用于`JSONArray`存储多个`JSONObject`. 使用它无需担心为此分配密钥，`JSONObject`例如

```
JSONObject a = new JSONObject("{\"data\": [ {\"empId\": 1,\"deptId\": 2},{\"empId\": 3,\"deptId\": 4}]}");
JSONObject b = new JSONObject("{\"data\": [ {\"empId\": 7,\"deptId\": 8},{\"empId\": 9,\"deptId\": 10}]}"); 
```

**编辑**

```
JSONArray jArr_A= a.getJSONArray("data");

JSONArray jArr= new JSONArray();
for(int i=0;i<jArr_A.length();i++){
     jArr.put(jArr_A.getJSONObject(i));
} 
```

现在换一个对象

```
jArr_A= b.getJSONArray("data");

for(int i=0;i<jArr_A.length();i++){
     jArr.put(jArr_A.getJSONObject(i));
} 
```

现在检查你的 jArr 对象的长度是否加倍。

```
JSONObject mainJson = new JSONObject();
mainJson.put("data", jArr); 
```

# couchdb - 在 CouchDB 中建模文档层次结构的最佳方法

> ID：16188519
> 
> 赞同：12
> 
> 时间：2013-04-24T09:35:51.133
> 
> 标签：couchdb, hierarchical-data

我正在尝试在 CouchDB 中对文档层次结构进行建模以在我的系统中使用，这在概念上类似于博客。*每篇博文至少*属于一个类别，每个类别可以有多个帖子。类别是分层的，这意味着如果帖子属于层次结构“ **CatA** -> **CatB ”（“** **CatB**在 CatA 中）”中的 CatB，它也属于**CatA**。

 ******用户必须能够快速找到一个类别中的所有帖子（及其所有子项）。

**解决方案 1** 每个 post 类型的文档都包含一个“类别”数组，表示其在层次结构中的位置（参见[2](http://probablyprogramming.com/2008/07/04/storing-hierarchical-data-in-couchdb)）。

```
{
   "_id": "8e7a440862347a22f4a1b2ca7f000e83",
   "type": "post",
   "author": "dexter",
   "title": "Hello",
   "category":["OO","Programming","C++"]
} 
```

**解决方案 2** 每个 post 类型的文档都包含表示其在层次结构中的路径的“类别”字符串（参见[4](http://blog.mudynamics.com/2010/10/02/using-couchdb-group_level-for-hierarchical-data/)）。

```
{
   "_id": "8e7a440862347a22f4a1b2ca7f000e83",
   "type": "post",
   "author": "dexter",
   "title": "Hello",
   "category": "OO/Programming/C++"
} 
```

**解决方案 3** 每个 post 类型的文档都包含其父“类别”id，表示其在层次结构中的路径（参见[3](https://stackoverflow.com/questions/6129561/retrieving-hierarchical-nested-data-from-couchdb)）。通过链接的“类别”文档类型构建分层类别结构。

```
{
   "_id": "8e7a440862347a22f4a1b2ca7f000e83",
   "type": "post",
   "author": "dexter",
   "title": "Hello",
   "category_id": "3"
}

{
   "_id": "1",
   "type": "category",
   "name": "OO"
}

{
   "_id": "2",
   "type": "category",
   "name": "Programming",
   "parent": "1"
}

{
   "_id": "3",
   "type": "category",
   "name": "C++",
   "parent": "2"
} 
```

**问题**

在 CouchDB 中存储这种关系的最佳方式是什么？就磁盘空间、可扩展性和检索速度而言，最有效的解决方案是什么？

可以对这种关系进行建模以考虑本地化的类别名称吗？

**免责声明**

我知道这个问题已经在这里被问过几次了，但似乎没有明确的答案，也没有解决每个解决方案优缺点的答案。抱歉问题的长度:)

**读到此为止**

[CouchDB - 权威指南](http://guide.couchdb.org/)

[在 CouchDB 中存储分层数据](http://probablyprogramming.com/2008/07/04/storing-hierarchical-data-in-couchdb)

[从 CouchDB 检索分层/嵌套数据](https://stackoverflow.com/questions/6129561/retrieving-hierarchical-nested-data-from-couchdb)

[将 CouchDB group_level 用于分层数据](http://blog.mudynamics.com/2010/10/02/using-couchdb-group_level-for-hierarchical-data/)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-24T11:00:43.347

这个问题没有*正确*的答案，因此缺乏明确的答案。这主要取决于您要优化的使用类型。

您**说属于某个类别（及其子类别）的文档的检索速度是最重要的**。前两个解决方案允许您创建一个多次发出博客文章的视图，一次针对从叶到根的链中的每个类别。因此，可以使用单个（因此快速）查询来选择所有文档。第二种解决方案与第一种解决方案的唯一区别在于，您将类别“路径”的解析从将文档插入到视图的*地图*功能的代码中移动到组件中。我更喜欢第一种解决方案，因为它实现*地图*功能更简单，而且更灵活（例如，它允许类别名称包含斜线字符）。

在您的场景中，您可能还想创建一个精简视图，用于计算每个类别的博客文章数量。使用这些解决方案中的任何一个都非常简单。通过拟合缩减功能，可以使用单个请求检索每个类别中的帖子数量。

前两种解决方案的一个缺点是，将一个类别从一个父级重命名或移动到另一个父级需要更新每个文档。第三种解决方案允许在不接触文档的情况下进行。但是根据您对场景的描述，我假设按类别检索非常频繁，并且类别重命名/移动非常罕见。

**解决方案 4**我提出了第四个解决方案，其中*博客文章*文档包含对*类别*文档的引用，但仍然引用帖子类别的所有祖先。这允许在不触及博客文章的情况下重命名类别，并允许您使用类别存储其他元数据（例如类别名称或描述的翻译）：

```
{
    "_id": "8e7a440862347a22f4a1b2ca7f000e83",
    "type": "post",
    "author": "dexter",
    "title": "Hello",
    "category_ids": [3, 2, 1]
}

{
    "_id": "1",
    "type": "category",
    "name": "OO"
}

{
    "_id": "2",
    "type": "category",
    "name": "Programming",
    "parent": "1"
}

{
    "_id": "3",
    "type": "category",
    "name": "C++",
    "parent": "2"
} 
```

您仍然必须将类别的父级与类别一起存储，这是在帖子中复制数据，以允许遍历类别（例如，用于显示类别树以进行导航）。

您可以扩展此解决方案或您的任何解决方案，以允许将帖子分类为多个类别，或者一个类别具有多个父级。当一篇文章被分类为多个类别时，您需要将每个类别的祖先的并集存储在文章的文档中，同时保留作者选择的类别以允许它们与文章一起显示或稍后编辑。

*让我们假设有一个名为“Ajax”的附加类别，其锚点为“JavaScript”、“Programming”和“OO”。为了简化下面的示例，我选择了类别的文档 ID 以等于类别的名称。*

```
{
    "_id": "8e7a440862347a22f4a1b2ca7f000e83",
    "type": "post",
    "author": "dexter",
    "title": "Hello",
    "category_ids": ["C++", "Ajax"],
    "category_anchestor_ids": ["C++", "Programming", "OO", "Ajax", "JavaScript"]
} 
```

要允许一个类别有多个父级，只需在一个类别中存储多个父级 ID。您需要在查找某个类别的所有祖先时消除重复项。

**查看解决方案 4**假设您想要获取特定类别的所有博客文章。我们将使用具有以下示例数据的数据库：

```
{ "_id": "100", "type": "category", "name": "OO"                              }
{ "_id": "101", "type": "category", "name": "Programming", "parent_id": "100" }
{ "_id": "102", "type": "category", "name": "C++",         "parent_id": "101" }
{ "_id": "103", "type": "category", "name": "JavaScript",  "parent_id": "101" }
{ "_id": "104", "type": "category", "name": "AJAX",        "parent_id": "103" }

{ "_id": "200", "type": "post", "title": "OO Post",          "category_id": "104", "category_anchestor_ids": ["100"]                      }
{ "_id": "201", "type": "post", "title": "Programming Post", "category_id": "101", "category_anchestor_ids": ["101", "100"]               }
{ "_id": "202", "type": "post", "title": "C++ Post",         "category_id": "102", "category_anchestor_ids": ["102", "101", "100"]        }
{ "_id": "203", "type": "post", "title": "AJAX Post",        "category_id": "104", "category_anchestor_ids": ["104", "103", "101", "100"] } 
```

除此之外，我们使用`posts_by_category`在设计文档中调用的视图，该视图`_design/blog`通过以下*映射*函数调用：

```
function (doc) {
    if (doc.type == 'post') {
        for (i in doc.category_anchestor_ids) {
            emit([doc.category_anchestor_ids[i]], doc)
        }
    }
} 
```

然后我们可以使用对以下 URL 的请求来获取该`Programming`类别（具有 ID `"101"`）或其子类别之一中的所有帖子。`GET`

```
http://localhost:5984/so/_design/blog/_view/posts_by_category?reduce=false&key=["101"] 
```

这将返回一个视图结果，其中键设置为类别 ID，值设置为发布文档。相同的视图还可用于获取所有类别的摘要列表以及该类别及其子类别中的帖子数量。我们在视图中添加以下*reduce*函数：

```
function (keys, values, rereduce) {
    if (rereduce) {
        return sum(values)
    } else {
        return values.length
    }
} 
```

然后我们使用以下 URL：

```
http://localhost:5984/so/_design/blog/_view/posts_by_category?group_level=1 
```

这将返回一个缩减视图结果，其中键再次设置为类别 ID，值设置为每个类别中的帖子数。在此示例中，必须单独获取类别名称，但可以创建简化视图结果中的每一行都已包含类别名称的视图。******

# proxy - 代理时如何将原始 url 作为请求参数包含在内？

> ID：16188521
> 
> 赞同：6
> 
> 时间：2013-04-24T09:35:52.243
> 
> 标签：proxy, nginx

我想将带有 nginx 实例的传入请求代理到一个小的 java 后端应用程序。这个想法是我希望将每个原始请求的 uri 作为请求参数包含在内，例如：

```
location / {
            proxy_pass http://localhost:9000?url=$request_uri;
        } 
```

但它不起作用

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T09:43:55.937

```
location / {
            proxy_pass http://localhost:9000$request_uri;
        } 
```

`@request_uri`等于从客户端接收到的原始*请求*URI，包括参数。

这篇`$request_uri`文章的内容是`/questions/16188521/how-do-i-include-the-original-url-as-a-request-parameter-when-proxying`。

见[http://wiki.nginx.org/HttpCoreModule#.24request_uri](http://wiki.nginx.org/HttpCoreModule#.24request_uri)

# java - 在java中读取excel文件时找不到文件错误

> ID：16188525
> 
> 赞同：0
> 
> 时间：2013-04-24T09:36:08.033
> 
> 标签：java

尽管文件存在，但当我尝试在 java 中读取 excel 文件时出现以下错误。我在Windows环境中。我已确认该文件存在于该位置。

```
java.io.FileNotFoundException: D:\myfile.xls (The system cannot find the file specified)
    at java.io.FileInputStream.open(Native Method)
    at java.io.FileInputStream.<init>(Unknown Source)
    at jxl.Workbook.getWorkbook(Workbook.java:213) 
```

我的代码如下：

```
 wb = Workbook.getWorkbook(new File("D:/myfile.xls")); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T09:37:45.753

尝试过

```
 wb = Workbook.getWorkbook(new File("D:\\myfile.xls")); 
```

另请参阅：[File.separator 或 File.pathSeparator](https://stackoverflow.com/questions/5971964/file-separator-vs-pathseparator)

确保您的文件在 D 盘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:48:48.413

让我举个例子，代码已经过测试，如果可行，请告诉我。

> 文件 fileExcel = new File("D:/DATAVALUE.xls");
> 
> 工作簿 w;
> 
> w = Workbook.getWorkbook(fileExcel); 工作表工作表 = w.getSheet(0);

我测试了这段代码，让我为你捕获了这段代码。

> /* * 要更改此模板，请选择工具 | 模板 * 并在编辑器中打开模板。*/ 包堆栈溢出；
> 
> 导入java.io.File；导入 jxl.Cell；导入 jxl.Sheet；导入 jxl.Workbook；
> 
> /** * * @author jwijaya */ public class Stackoverflow {
> 
> ```
> /**
>  * @param args the command line arguments
>  */
> public static void main(String[] args) {
>     // TODO code application logic here
>     try
>                     {
> 
>                     File fileExcel = new File("D:/tes.xls");
>                     Workbook w;
>                     w = Workbook.getWorkbook(fileExcel);
>                     Sheet sheet = w.getSheet(0);
> 
>                     for (int j = 0; j < sheet.getRows(); j++) {
>                         for (int i = 0; i < sheet.getColumns(); i++) {
>                             Cell cell = sheet.getCell(i, j);
> 
>                                                 if((j==0 && i==0 ) || (j==0 && i==1) ||  (j==0 && i==2) || (j==0 && i==3))
>                                                 {
>                                                 System.out.println("Isi tabel "
>                                                 + cell.getContents());
>                                                 }
> 
>                         }
>                                                 Cell tanggal = sheet.getCell(0,j);
>                                                 String tanggalfinal = tanggal.getContents(); 
>                                                 System.out.println(tanggalfinal);
> 
>                                                 Cell datausd = sheet.getCell(1,j);
>                                                 String datausdfinal = datausd.getContents(); 
>                                                 System.out.println(datausdfinal);
> 
>                                                 Cell datajapan = sheet.getCell(2,j);
>                                                 String datajapanfinal = datajapan.getContents(); 
>                                                 System.out.println(datajapanfinal);
> 
>                                                 Cell dataaus = sheet.getCell(3,j);
>                                                 String dataausfinal = dataaus.getContents(); 
>                                                 System.out.println(dataausfinal);
> 
>                     }
> 
>                     }
>                     catch (Exception e)
>                     {
>                     System.err.println("Got an exception!");
>                     System.err.println(e.getMessage());
>                     }
> } } 
> ```

下载这个文件

```
https://hotfile.com/dl/204326337/3f04919/tes.xls.html 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-24T06:16:36.610

如果您事先创建了 excel 文件，请尝试将其保存为 97-2000 工作表（即旧的 Excel 格式）。

# git - git下如何与其他开发者共享一个分支

> ID：16188528
> 
> 赞同：3
> 
> 时间：2013-04-24T09:36:17.080
> 
> 标签：git, git-branch, git-workflow

一般来说（我可以提供更多细节），我们的工作流程：

1）我们有`prime repo`一个远程服务器主机。

2）我们有`bare repo`一个远程服务器主机。

3）我们在本地计算机上和本地存储库上有一个带有工作树的裸仓库的克隆`bare is setup as a remote`。

在此之下，我们至少使用两个分支：dev 分支和一个 master 分支。

挂钩将管理此过程，以根据 HEAD 放置在 dev 或 master 上进行更改。

所以，这是一个很好的工作流程，但我想知道是否有人可以帮助我们做得更好。

假设用户 A 正在他的本地工作`branch test-this-thing`；

他/她希望另一个开发人员也能在这个分支上工作。

**考虑到上面的工作流程**，有没有办法推送一个特定的分支，以便其他用户也可以从该特定分支中提取该工作，以便他们可以一起进行测试这个事情？

**更新**

集线器或原点重命名。所以：

如果我在本地做：

```
git checkout -b test
git push hub test 
```

我得到了裸仓库的分支。好的。

如果其他开发人员 B 这样做：

```
git checkout -b testdeveloperB
git pull hub test:testdeveloperB 
```

它将成功地`fetch`和`merge`测试分支进入testdeveloperB。

因此，假设开发人员 B 对本地 testdeveloperB 分支进行了更改，并希望将这些更改推送到集线器测试分支。

**他在分支 testdeveloperB**

我试过了：

`git push hub test:testdeveloperB`- 它说没有像测试这样的想法。

我试过了：

`git push hub testdeveloperB:test`- 显然没问题。

所以关于这一点`push`- hub 之后的第一个参数是我们要推送文件引用的地方，第二个是我们希望文件引用去的地方。

既然我们在本地 testdeveloperB 分支上，为什么我们需要明确引用它？

为什么我们不能简单地做`git push`？

**更新答案，** 因为我们还没有在我们的 git 配置上设置它，所以 git 不知道该怎么做。

提前致谢。

# html - css 设置其他同级 div 透明但目前我没有悬停

> ID：16188534
> 
> 赞同：-5
> 
> 时间：2013-04-24T09:36:35.647
> 
> 标签：html, css

我想要做的是当我悬停 1 div 时，只使这个兄弟 div 透明

```
<div>DIV 1</div>
<div>DIV 2</div>
<div>DIV 3</div> 
```

什么是CSS？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T09:39:55.450

给定 HTML：

```
<div>DIV 1</div>
<div>DIV 2</div>
<div>DIV 3</div> 
```

悬停`DIV 1`并影响`DIV 2`：

```
div:nth-child(1):hover + div
/* or:
div:first-child:hover + div
*/ {
    background-color: #ffa;
} 
```

[JS Fiddle 演示，使用`:nth-child(1)`](http://jsfiddle.net/davidThomas/dUDPQ/).

[JS Fiddle 演示，使用`:first-child`](http://jsfiddle.net/davidThomas/dUDPQ/1/).

悬停`DIV 1`并影响`DIV 3`：

```
div:nth-child(1):hover + div + div {
    background-color: #ffa;
} 
```

[JS Fiddle 演示，使用`:nth-child(1)`](http://jsfiddle.net/davidThomas/dUDPQ/2/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:42:44.883

如何使用容器`div`：

```
<div id="outer">
    <div>DIV 1</div>
    <div>DIV 2</div>
    <div>DIV 3</div>
</div> 
```

和CSS：

```
#outer:hover div {
    opacity: .5;
}
#outer:hover div:hover {
    opacity: 1;
} 
```

[这是一个jsfiddle](http://jsfiddle.net/f9kD9/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T09:43:47.247

CSS 有两个[兄弟组合子](http://www.w3.org/TR/css3-selectors/#sibling-combinators)：

相邻组合器影响“直接邻居”：

```
div + div 
```

> 两个序列表示的元素在文档树中共享相同的父元素，并且第一个序列表示的元素紧邻第二个序列表示的元素之前。

一般组合器影响“一般邻居”：

```
div ~ div 
```

> 两个序列表示的元素在文档树中共享相同的父元素，并且第一个序列表示的元素在（不一定立即）第二个序列表示的元素之前。

根据您的需要，您可以使用其中一种。

您的问题非常模糊，但其中之一可能对您有用：

```
div:hover + div  /* affects adjacent div */
div:hover ~ div  /* affects all sibling divs */
div:first-child:hover +|~ div /* only triggers on your first div */ 
```

# signalr - 在 Signalr 1.1 beta 中找不到连接上的 AddClientCertificate 方法

> ID：16188535
> 
> 赞同：0
> 
> 时间：2013-04-24T09:36:36.573
> 
> 标签：signalr

在 Signalr 1.1 beta 中找不到连接上的 AddClientCertificate()。使用以下命令下载并安装 nuget 包到解决方案

```
 PM> Install-Package Microsoft.AspNet.SignalR -Pre 
```

signalr client.dll 详细信息如下 Microsoft.AspNet.SignalR.Client(16757...) 文件版本 1.1.20410.0 产品版本 1.1.0-beta1。

无法找到连接。AddClientCertificate() 方法

请帮忙在哪里下载最新的在集线器连接上有 AddClientCertificate 方法的 signalr 1.1 beta 版本？

提前致谢。普里亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:38:55.500

您正在安装错误的软件包：

```
Install-Package Microsoft.AspNet.SignalR.Client -Pre 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-20T03:32:55.197

I'm not seeing this either. I'm using SignalR 1.1.0 released with Visual Studio 2010\. I just searched throughout the entire list in the Object Browser. I can't find anything under Microsoft.AspNet.SignalR.Client

# android - trigger.io Android webview 应用程序 - 键盘关闭或方向更改后出现灰色背景

> ID：16188539
> 
> 赞同：1
> 
> 时间：2013-04-24T09:36:45.743
> 
> 标签：android, android-webview, cordova, trigger.io

我正在使用 Trigger.io 构建一个 html5 包装的 iOS / Android 应用程序。

我在 Android 上遇到问题，在虚拟键盘关闭或手机更改方向后，有时屏幕上会出现灰色背景。

示例屏幕截图如下所示。

灰色背景是在我的应用页面结束之后。有时它会在一瞬间可见，有时它会一直保持可见，直到您执行滚动页面、拉回键盘、更改方向等操作。

看起来很刺耳。

理想情况下，我希望阻止问题的发生，但作为临时解决方案，我很高兴能够将灰色设置为我自己的背景颜色以使其不那么引人注目。

![页面底部的灰色区域](https://i.stack.imgur.com/zUYdh.png)

![页面底部的灰色区域](https://i.stack.imgur.com/7uaaW.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:03:15.873

当键盘消失时，这看起来像 HTML 没有被重新绘制......如果你做一些事情来触发渲染，它会清除吗？

你在这里使用框架来处理 UI 吗？可能试图根据可见视口做一些聪明的事情？

据我所知，问题的根源在于 webview 没有正确重新绘制，或者您的 JavaScript 中的某些内容无法响应视口大小的变化。

您可以尝试在“web”目标（而不是 Android）上运行应用程序，然后在手机的浏览器中打开它：如果您可以深入应用程序以创建相同的效果，这将有助于将问题隔离到 webview 渲染或你的 JS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T07:15:38.820

我的项目中有一个非常相似的问题，在我的情况下是在 Android 2.3.5 上，但不是在 Android 4.* 上。在我的情况下，原因是没有为清单中的关联活动设置窗口软输入模式：

```
android:windowSoftInputMode="adjustPan" 
```

相反，当键盘出现时窗口正在调整大小，但当键盘消失时显然没有再次调整大小。

更多细节可以在[这里](http://developer.android.com/guide/topics/manifest/activity-element.html)找到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-17T01:24:50.993

我几乎对同样的问题发疯了。我终于发现这在很大程度上取决于您使用的设备。我有一个类似的问题：[android 键盘消失后固定元素（HTML）中断？](https://stackoverflow.com/questions/24346790/fixed-elements-html-break-after-android-keyboard-dissapears)

而且我也在使用trigger.io。某些设备不会发生这种情况。可能是 android 中的特定操作系统，也可能只是特定设备处理内存延迟的方式。

我一直在寻找这个，但我选择了@jamesbrady，因为 HTML 不会重绘。触发器中的问题是您**无法**编辑

```
android:windowSoftInputMode="adjustPan" 
```

因为 AndroidManifest.xml 中的活动标签在每次运行时都会更新。您需要为此构建一个私有模块。

# iphone - -base64Encoding 返回类型默认为 id

> ID：16188541
> 
> 赞同：0
> 
> 时间：2013-04-24T09:36:54.393
> 
> 标签：iphone, ipad, ios6, uiimagejpegrepresentation

在我的应用程序中，当我尝试使用以下编码时，我收到警告为

代码

```
[UIImageJPEGRepresentation(petAvadar.image, 1.0)base64Encoding] 
```

警告

```
Instance method '-base64Encoding' not found (return type defaults to 'id') 
```

如何删除此警告，请帮我解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T09:45:29.457

然后通过以下方式将您的 UIImage 对象转换为 NSData：

```
NSData *imageData = UIImageJPEGRepresentation(image, 1.0); 
```

然后应用 Base64 编码将其转换为 base64 编码的字符串：

```
NSString *encodedString = [imageData base64Encoding]; 
```

[一旦检查这个](https://stackoverflow.com/questions/3889478/uiimage-to-base64-string-encoding)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T09:44:36.350

您需要在头文件中声明您的函数。

您应该添加这样的一行：

```
-(returnType)base64Encoding; 
```

`returnType`您的方法返回的类型在哪里，例如 ,`NSString*`或您的方法返回的任何类型。`NSInteger``void`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T09:48:39.333

确保你已经从[这里donlaoded Base64 lib 类](http://cdn.imthi.com/c70689/wp-content/uploads/2010/08/base64.zip)

然后导入**Base64.h**使用下面的代码片段

**用于将图像编码为 Base64**

```
NSData* data = UIImageJPEGRepresentation(yourImage, 1.0f);
 [Base64 initialize];
 NSString *strEncoded = [Base64 encode:data]; 
```

**并将 Base64 解码为图像：**

```
[Base64 initialize]; 
 NSData* data = [Base64 decode:strEncoded ];;
 image.image = [UIImage imageWithData:data]; 
```

您可能还想查看[此](http://www.imthi.com/blog/programming/iphone-sdk-base64-encode-decode.php)链接和[此](http://www.rdcworld-iphone.blogspot.in/2013/03/convert-string-to-base64-in-ios-tutorial.html)链接

# c# - 如何从列表视图中在 asp.net 中创建 excel 文件？

> ID：16188545
> 
> 赞同：0
> 
> 时间：2013-04-24T09:37:00.023
> 
> 标签：c#, asp.net, excel, listview, printing

我对asp.net 和listview 有两个问题。我有一个带有列表视图的网络应用程序。此列表视图按活动目录填充来自用户的数据。listview 仅显示搜索到的用户。

问题一：

我想将此 ListView 导入 Excel 文件。我怎么能做到这一点？我必须为此使用 CSV 吗？

问题2：

我想打印出这个列表视图。我怎么能做到这一点，或者如果我制作一个excel文件并且用户打印这个文件会更好：/

我需要小费和好的链接:)

谢谢<3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:42:10.143

1 - 请检查这些关于如何将列表视图导出到 excel 文件的链接：

[http://forums.asp.net/p/1245474/2583840.aspx](http://forums.asp.net/p/1245474/2583840.aspx)

[http://www.c-sharpcorner.com/uploadfile/vasanthks/export-gridviewlistview-to-excel-with-color-formatting/](http://www.c-sharpcorner.com/uploadfile/vasanthks/export-gridviewlistview-to-excel-with-color-formatting/)

[http://www.dotnetlogix.com/article/aspnet/56/How-to-export-listview-in-excel-in-asp.net.html](http://www.dotnetlogix.com/article/aspnet/56/How-to-export-listview-in-excel-in-asp.net.html)

2 - 对于打印，您可以进行报告 :)

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T07:22:19.347

非常适合打印和保存到 Excel、PDF、Word 和打印目的，我更喜欢使用 RDLC，因为它更易于维护。我没有使用此第三方办公室控件和 dll 的良好经验。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T09:40:26.190

如果您只想打印列表，则可以从 Web 界面打印。创建一个包含您要打印的内容的页面，然后按照以下说明操作：

[http://www.w3schools.com/jsref/met_win_print.asp](http://www.w3schools.com/jsref/met_win_print.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T09:50:32.843

问题 1：不，您不需要使用 CSV。您可以使用[EPPlus](http://epplus.codeplex.com/)导出到 Excel。它做得非常出色，在出口方面没有什么不能做的。

问题2：我会使用上面的，但这取决于打印文件的人的要求。您可以只转储一个简单的列表，但恕我直言，Excel 会更好。

只是为了完成这个......一些伪代码让你生成一个简单的电子表格......

```
using OfficeOpenXml;

using (ExcelPackage outPackage = new ExcelPackage(YOUR_DESTINATION_FILENAME))
{
    // Add new worksheet
    ExcelWorksheet destWorkSheet = outPackage.Workbook.Worksheets.Add("Spreadsheet name");

    // Draw header
    destWorkSheet.Cells[1, 1].Value = "Header 1";
    destWorkSheet.Cells[1, 2].Value = "Header 2";

    // Loop through your data and add rows
    for (int i = 0; i < YOURDATA.Count; i++)
    {
        destWorkSheet.Cells[i+2, 1].Value = YOUR_DATA_1;
        destWorkSheet.Cells[i+2, 2].Value = YOUR_DATA_2;
    }

    // Save spreadsheet
    outPackage.Save();
} 
```

希望这可以帮助，

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T11:43:20.763

```
 {
        Response.ClearContent();
        Response.Buffer = true;
        string fileName="filname.xlsm";Response.AddHeader("content-disposition",  string.Format("attachment;filename={0}",fileName));
        Response.ContentType = "application/ms-excel";
        StringWriter sw = new StringWriter();
        HtmlTextWriter htw = new HtmlTextWriter(sw);
        ListView1.RenderControl(htw);
        Response.Write(sw.ToString());
        Response.End();
    } 
```

# javascript - 如何检查 jquery 或 javascript 中的父元素是什么类型的节点或类/id？

> ID：16188548
> 
> 赞同：1
> 
> 时间：2013-04-24T09:37:05.490
> 
> 标签：javascript, jquery, html, dom

如何`<li>, <div>, <p>, etc`在 jquery 中检查最近的父元素是否是节点类型，即，或者是类名？

我做了下面的代码，但它不起作用：

```
var msgSpan = $('<span/>', {class: 'msg'});

function checkField(field) {
    if (field.closest('li')) {
        console.log('Parent is an Li');
        field.closest('li').addClass('error').find('.input').before(msgSpan);
    } else if (field.closest('.parent')) {
        console.log('Parent is a class called .parent');
        field.closest('.parent').addClass('error').find('.input').before(msgSpan);
    }
}

// Usage
checkField($('input[type="text"]'); 
```

HTML：

```
<form id="search-jobs">
    <fieldset class="parent">
        <label for="jobs_search">Search jobs</label>
        <div class="input left">
            <input type="text" id="jobs_search" name="jobs_search" class="required" placeholder="Search jobs" />
        </div>
        <div class="btn-cont left">
            <input type="submit" id="" name="" class="button" value="Search" />
        </div>
    </fieldset>
</form> 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:46:41.257

如果要检查**直接父**元素，可以使用以下命令：

```
$parent = field.parent();
if ($parent.is('li, div, p, .className')) {
    $parent.addClass('error').find('.input').before(msgSpan);
} 
```

或者，如果您想检查**最近**的元素：

```
$closest = field.closest('li, div, p, .className');
if ($closest.length) {
    // $closest[0].tagName (would give you the element type)
    // $closest[0].className (would give you the class, if one exists)
    $closest.addClass('error').find('.input').before(msgSpan);        
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:46:49.710

您可以在不检查标签的情况下实现此目的。

```
var msgSpan = "<div>Error</div>";
function checkField(field) {
    var $parent = (field.parents(".parent").length) ? field.parents(".parent"): field.parents("li");
    if($parent.length){
        $parent.addClass('error').find('input').before(msgSpan);
    }
}

checkField($("#jobs_search")); 
```

**工作示例** [http://jsfiddle.net/kg3Nq/2/](http://jsfiddle.net/kg3Nq/2/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-24T09:52:42.990

使用[`.is()`](http://api.jquery.com/is)方法

```
var msgSpan = $('<span/>', {class: 'msg'});

function checkField(field) {
    var parent = field.parent();

    if (parent.is('li')) {
        console.log('Parent is an Li');
        parent.addClass('error').find('.input').before(msgSpan);
    } else if (parent.is('.parent')) {
        console.log('Parent is a class called .parent');
        parent.addClass('error').find('.input').before(msgSpan);
    }
}

// Usage
checkField( $('input[type="text"]') ); 
```

请记住，由于您将可能匹配多个`input`元素的选择作为字段传递，因此代码仅适用于找到的第一个元素。（*换句话说，您应该使用仅匹配一个元素的更具体的选择器*）

就像是

```
checkField( $('input[type="text"]').first() ); 
```

* * *

此外，您似乎在两种情况下都运行相同的代码（*日志消息除外*）。如果这是预期的行为，您可以使用单个检查

```
function checkField(field) {
    var parent = field.parent();

    if (parent.is('li') || parent.is('.parent')) {
        parent.addClass('error').find('.input').before(msgSpan);
    }
} 
```

# asp.net - Uploadify for ASP.NET 应用程序返回大文件的 HTTP 错误

> ID：16188550
> 
> 赞同：4
> 
> 时间：2013-04-24T09:37:15.283
> 
> 标签：asp.net, uploadify

我的 Uploadify 脚本适用于大多数小于 10 MB 的文件。但是一旦文件大小开始超过 40 MB，它将无法上传，只有“HTTP 错误”的错误消息。我尝试为 Uploadify 实现 onError 处理程序，但它没有给我任何详细信息，确切的错误是什么。变量返回“未定义”。我检查了我的 web.config 文件，文件大小限制设置为 50 MB，我的超时时间为 30 分钟，所以我不知道问题出在哪里。这是我的脚本：

```
$('#uploader').uploadify({
  'uploader': '/js/uploadify/uploadify.swf',
  'script': '/cms/common/uploadify/UploadHandler.ashx',
  'cancelImg': '/images/cancel_upload.png',
  'buttonImg': '/images/select_video_thumbnail_en-us.gif',
  'auto': true,
  'folder': '/Temp',
  'multi': false,
  'sizeLimit': 0,
  'displayData': 'percentage',
  'simUploadLimit': 1,
  'fileExt': '*.jpg;*.gif;*.png',
  'fileDesc': '*.jpg;*.gif;*.png',
  'buttonText': 'Select thumbnail...',
  'width': '120',
  'height': '24',
  'onComplete': function (e, queueId, fileObj, response, data)
  {
    return true;
  },
  'onError': function (a, b, c, d)
  {
    if (d.status == 404)
      alert('Could not find upload script.');
    else if (d.type === "HTTP")
      alert('error ' + d.type + ": " + d.status);
    else if (d.type === "File Size")
      alert(c.name + ' ' + d.type + ' Limit: ' + Math.round(d.sizeLimit / 1024) + 'KB');
    else
      alert('error ' + d.type + ": " + d.text);
  },
  'onCancel': function (e, queueId, fileObj, data)
  {

  }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T10:28:59.903

我正在运行的 IIS7 的默认内部文件大小限制为 30 MB。将 maxRequestLength 设置为大于此值将无济于事。通过将以下内容添加到您的 web.config 文件中，可以解决该问题：

```
<system.webServer>
        <security>
            <requestFiltering>
                <requestLimits maxAllowedContentLength="50000000"/>
            </requestFiltering>
        </security>
</system.webServer> 
```

这也可以在 IIS7 中设置。有关更多详细信息，请参阅以下链接： [IIS7 文件上传大小限制](http://www.webtrenches.com/post.cfm/iis7-file-upload-size-limits) [在 IIS 7 中启用请求过滤](http://www.hosting.com/support/windows-server-2008/enabling-request-filtering-in-iis-7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:19:27.273

在您的 uploadify 函数中添加以下标签。

```
'sizeLimit': '10045728' 
```

它会为你工作。大小限制是您的文件大小限制。它以 KB 为单位。

# java - Picasa 搜索 API 有哪些好的替代方案？

> ID：16188551
> 
> 赞同：-2
> 
> 时间：2013-04-24T09:37:18.527
> 
> 标签：java, api, facebook-graph-api, flickr, picasa

我正在编写一个基于 Web 的示例应用程序，该应用程序需要以 XML 文档的形式提供基于图像的结果。目前我正在使用 Picasa 搜索 API。我在请求 API 调用 URL 时收到 XML 响应。这是我当前的实现：

```
private void fetchImageURLs() {
        try {
            String urlString = "https://picasaweb.google.com/data/feed/api/all?";
            urlString += "q="+searchTerm;
            urlString += "&max-results="+numImages;
            urlString += "&start-index="+offset;

            // Get XML from Picasa API
            URL url = new URL(urlString);
            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            DocumentBuilder db = dbf.newDocumentBuilder();
            Document doc = db.parse(url.openStream());
            doc.getDocumentElement().normalize();

            // Parse XML to obtain image URLs
            NodeList nList = doc.getElementsByTagName("content");
            for (int i = 0; i < nList.getLength(); i++) {
                Node nNode = nList.item(i);
                Element eElement = (Element) nNode;
                String imageUrlString = eElement.getAttribute("src");

                // Push the image URLs on the queue to be used by fetchImagesAndSave()
                imageURLs.push(new URL(imageUrlString));
            }
        }
        catch (Exception e) {
            e.printStackTrace();
        }
    } 
```

如果您能帮助我弄清楚如何使用 Twitter/Facebook/PhotoBucket 或 Flickr API 来做同样的事情，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:55:31.003

**对于 Flickr：**

您可以使用[Flickr4Java](https://github.com/callmeal/Flickr4Java) API。

但由于您需要的只是搜索，因此您可以使用 REST API：

`http://api.flickr.com/services/rest/?method=flickr.test.echo&name=value`

您需要的方法`flicker.photos.search`记录[在这里。](http://www.flickr.com/services/api/flickr.photos.search.html)

要使用 Flickr API，您需要有一个 API 密钥，所以您应该[申请一个。](http://www.flickr.com/services/api/misc.api_keys.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:51:46.243

如果您想在不了解每个 API 的情况下使用多个 API，那么您应该查看[Temboo](http://www.temboo.com)。

Temboo 规范了 API 访问，因此您可以使用相同的语法与多个[图像 API](https://www.temboo.com/library/keyword/photo/)（以及更多）通信。Temboo 还可以帮助您将 API 响应转换为您选择的格式（在这种情况下，您可以在适当的情况下从 JSON 转换为 XML）。

（全面披露：我在 Temboo 工作）

# ios - NSInvalidUnarchiveOperationException (NSLayoutConstraint) iOS5

> ID：16188553
> 
> 赞同：0
> 
> 时间：2013-04-24T09:37:29.003
> 
> 标签：ios, objective-c, nslayoutconstraint

我`NSInvalidUnarchiveOperationException`在**iPhone** 5.1 模拟器上得到了一个。

```
*** Terminating app due to uncaught exception 'NSInvalidUnarchiveOperationException', 
reason: 'Could not instantiate class named NSLayoutConstraint' 
```

在 iOS6 和**iPad** 5.1 模拟器上一切正常。

问题是我**没有**在我的项目中使用 NSLayoutConstraints 也不包含任何**Nib** -Files！

有什么建议吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T15:43:21.417

我不知道它是什么，但卸载并重新安装该应用程序就可以解决问题（顺便说一句，“干净”并没有）。

# javascript - 解析数据并在字母下按字母顺序排列

> ID：16188556
> 
> 赞同：0
> 
> 时间：2013-04-24T09:37:40.353
> 
> 标签：javascript, jquery, arrays, object

这就是我想成为的：

![在此处输入图像描述](https://i.stack.imgur.com/TCRyk.png)

这是我的 JavaScript：

```
var retrievedObject = localStorage.getItem('exhibitor');

    // CALL FUNCTION
    parsePerObject(JSON.parse(retrievedObject));

    function parsePerObject(data){

    } 
```

这是我在 localStorage 中的对象：

> {"41873":{"id":"41873","external_id":"","eventid":"5588","venueid":"0","exhibitorcategoryid":"0","name":" Niels Vroman","shortname":"","booth":"","imageurl":"","mapid":"0","y1":"0","x1":"0"," x2":"0","y2":"0","description":"Niels uit Zulte.","tel":"0497841121","address":"Drogenboomstraat 54","email":"vroman. niels@hotmail.com","web":" [http://nielsvroman.be](http://nielsvroman.be)","code":"","username":"","password":"","image1":"","imagedescription1":"","image2":"","imagedescription2":"" ,"image3":"","imagedescription3":"","image4":"","imagedescription4":"","image5":"","imagedescription5":"","image6":"", "imagedescription6":"","image7":"","imagedescription7":"","image8":"","imagedescription8":"","image9":"","imagedescription9":""," image10":"","imagedescription10":"","image11":"","imagedescription11":"","image12":"","imagedescription12":"","image13":"","imagedescription13":"","image14":""," imagedescription14":"","image15":"","imagedescription15":"","image16":"","imagedescription16":"","image17":"","imagedescription17":"","image18 ":"","imagedescription18":"","image19":"","imagedescription19":"","image20":"","imagedescription20":"","order":"0","brands ":[],"类别":[],"linktodetails":true,"imagethumb":""},"41877":{"id":"41877","external_id":"","eventid":"5588","venueid":"0","参展商categoryid":"0","name":"Ferdau Daems","shortname":"","booth":"","imageurl":"","mapid":"0","y1":" 0","x1":"0","x2":"0","y2":"0","description":"Ferdau Daems","tel":"0497683697","address":"Waregem ","email":"fer.dau@gmail.com","web":"41877","external_id":"","eventid":"5588","venueid":"0","exhibitorcategoryid":"0","name":"Ferdau Daems","shortname":"", "展位":"","imageurl":"","mapid":"0","y1":"0","x1":"0","x2":"0","y2": "0","description":"Ferdau Daems","tel":"0497683697","address":"Waregem","email":"fer.dau@gmail.com","web":"41877","external_id":"","eventid":"5588","venueid":"0","exhibitorcategoryid":"0","name":"Ferdau Daems","shortname":"", "展位":"","imageurl":"","mapid":"0","y1":"0","x1":"0","x2":"0","y2": "0","description":"Ferdau Daems","tel":"0497683697","address":"Waregem","email":"fer.dau@gmail.com","web":"Ferdau Daems","shortname":"","booth":"","imageurl":"","mapid":"0","y1":"0","x1":"0"," x2":"0","y2":"0","description":"Ferdau Daems","tel":"0497683697","address":"Waregem","email":"fer.dau@gmail .com","网络":"Ferdau Daems","shortname":"","booth":"","imageurl":"","mapid":"0","y1":"0","x1":"0"," x2":"0","y2":"0","description":"Ferdau Daems","tel":"0497683697","address":"Waregem","email":"fer.dau@gmail .com","网络":"电子邮件":"fer.dau@gmail.com","web":"电子邮件":"fer.dau@gmail.com","web":"[http://ferdau.be](http://ferdau.be)","code":"","username":"","password":"","image1":"","imagedescription1":"","image2":"","imagedescription2":"" ,"image3":"","imagedescription3":"","image4":"","imagedescription4":"","image5":"","imagedescription5":"","image6":"", "imagedescription6":"","image7":"","imagedescription7":"","image8":"","imagedescription8":"","image9":"","imagedescription9":""," image10":"","imagedescription10":"","image11":"","imagedescription11":"","image12":"","imagedescription12":"","image13":"","imagedescription13":"","image14":""," imagedescription14":"","image15":"","imagedescription15":"","image16":"","imagedescription16":"","image17":"","imagedescription17":"","image18 ":"","imagedescription18":"","image19":"","imagedescription19":"","image20":"","imagedescription20":"","order":"0","brands ":[],"类别":[],"链接到详细信息":true}}

有谁知道我如何按名称的字母顺序排序并从第一个字母制作标题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T09:46:02.567

假设您有一个`Array`对象，而不是`Object`对象，来启用索引和排序。对象没有顺序。

您从中检索它`localStorage`。你解析它。

```
var people = JSON.parse(localStoarge.getItem("exhibitor");
// now you have an array of objects, each object representing a person.
// regardless of what structure you have now, change it to achieve this.
var comparePersons = function(a, b) {
    // this function will compare two people objects.
    return a.name.localeCompare(b.name);
    // it's using String.prototype.localeCompare which returns 1 if a.name > b.name,
    // 0 for equal and -1 for smaller. localeCompare is lexicographic comparison.
};
people.sort(comparePersons);
// now you have the people sorted alphabetically. 
```

您可以遍历 people 数组，获取唯一的起始字母，将它们组成一个数组，然后根据需要显示数据。它应该相当简单。

```
var letters = '', groups = {};
for (var i = 0, len = people.length; i < len; i++) {
     var letterKey = people[i].name.charAt(0).toLowerCase();// get the first letter
     if (letters.indexOf(letterKey)) == -1) {
         letters += letterKey;
         groups[letterKey] = [people[i]];// index the people by unique letters.
     } else {
         groups[letterKey].push([people[i]]);// add to the existing list. Another Syntax fix
     };
}; 
```

此时你有一个像这样的对象：

```
a: [person1, person2, person5, etc..]//the people at A.
b: [person 3, person 4, etc..]// the people at B. 
```

只需使用上面的数据来创建显示。还有更多，我将不得不向您开具发票:)。

这里的技巧是`Array.prototype.sort`（[这里有更多关于它](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)）和`String.prototype.localeCompare`（[在这里阅读更多](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/localeCompare)）。

# ruby-on-rails - Ruby limit types of class passed to a method?

> ID：16188559
> 
> 赞同：0
> 
> 时间：2013-04-24T09:37:46.523
> 
> 标签：ruby-on-rails, ruby

What i stumbled upon just now - how to **easily** limit verity of classes that are passed to one method to only one class type ? ex. code:

```
class S
  attr_reader :s
  def initialize(s = nil)
    @s = s || 14
  end
end

class Gets
  def self.read(s)
    s.s
  end

end

s=S.new
p Gets.read(s) # 14 
```

Let's say that class S has a more complex structure and i want to be sure that only that class could be passed to `Gets#read` method, **how can i do that?**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T09:51:28.987

```
class Gets
  def self.read(s)
    raise ArgumentError unless s.kind_of?(S)
    s.s
  end
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T09:56:08.907

While to solution of [sawa](https://stackoverflow.com/a/16188839/273395) definitely is valid and does exactly what you want. In dynamic languages like ruby it's actually more common to use [duck typing](http://en.wikipedia.org/wiki/Duck_typing).

The idea is to just assert to which messages the attribute must respond to. This allows to easily pass in e.g. a different implementation.

```
class Gets
  def self.read(obj)
    raise ArgumentError, "must implement #s" unless obj.respond_to?(:s)
    obj.s
  end
end 
```

# regex - 从行首到左方括号全选

> ID：16188563
> 
> 赞同：0
> 
> 时间：2013-04-24T09:38:03.117
> 
> 标签：regex, regexbuddy

我需要一个正则表达式，它将选择从行首到第一个左方括号的所有内容。在下面的示例中，它将匹配**Lorem**、 consectetur **-** adipisicing和**labore et**

```
Lorem [ipsum] dolor sit amet,

consectetur-adipisicing [elit] sed do 

eiusmod tempor incididunt ut

labore et [dolore] magna aliqua. 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-16T13:59:37.413

当一个简单的锚和否定字符类可以解决问题时，为什么人们会使用点和复杂的环视结构？

```
(?m)^[^\[\r\n]+(?=\[) 
```

如果您的正则表达式支持它，您可以通过使量词所有格来进一步优化此正则表达式：

```
(?m)^[^\[\r\n]++(?=\[) 
```

如果您的正则表达式风格不支持前瞻，请`[`在匹配中包含 并使用捕获组来获取您想要的部分：

```
(?m)^([^\[\r\n]+)\[ 
```

如果您的正则表达式风格不支持模式修饰符`(?m)`，只需打开选项以`^`在正则表达式之外的换行符（“多行模式”）处进行匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T09:49:24.973

**使用后视和前瞻：**

```
(?<=^|\n)(.*?)(?=\s?\[) 
```

**解释：**

`(?<=...)`是肯定的后视，检查前面的字符是否匹配。

`^|\n`旨在成为行首。文本开头 ( `^`) 或换行符 ( `\n`)。

`.`是任何字符。

`.*?`是零个或多个任意字符。`*?`而不`*`是非贪婪匹配，因此它将匹配第一个而不是最后一个括号。

`(?=...)`是积极的前瞻，检查下一个字符是否匹配。

`\s`是空白，`?`使其成为可选（这是为了防止 之前的空格`[`也匹配）。

`\[`是转义的`[`（它需要转义，因为`[`有不同的含义）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T09:44:19.093

try`"[^\[]*"` `[]`表示字符集，表示`^\[`除重复任意次数之外的任何内容。如此结合，这应该是你的答案`[``*`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T09:41:17.663

我想说最简单的版本是：

`(.*?)\[.*`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T09:52:04.283

这可能会有所帮助..

```
^(.*)\[ 
```

**简单示例：**

```
my $str ="consectetur-adipisicing [elit] sed do";
my $tmp;
if ($str =~ m/^(.*)\[/) {
    $tmp = $1;
}
print "String upto [: $tmp\n"; 
```

**输出是：**

```
String upto [: consectetur-adipisicing 
```

# sql - 如何从 url 执行 sql 脚本？

> ID：16188564
> 
> 赞同：-1
> 
> 时间：2013-04-24T09:38:10.500
> 
> 标签：sql, sql-server

我在 10 个 SVN url 上有 10 个 sql 脚本。

我想编写一个执行这 10 个 svn sql 脚本的 sql 脚本。

例如, `http://svn/s1.sql`, `http://svn/s1.sq2`, ....

我想写一个喜欢`execute http://svn/s1.sql`,`execute http://svn/s2.sql`等的 sql

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:00:20.517

[**您可以使用sqlcmd**](http://msdn.microsoft.com/en-IN/library/ms170572.aspx)运行所有 .SQL 文件[](http://msdn.microsoft.com/en-IN/library/ms170572.aspx)

 **首先创建一个批处理文件并将以下代码粘贴到该批处理文件中：

```
sqlcmd -S ServerName -U Username -P password -i c:\s1.sql -o C:\s1.txt
sqlcmd -S ServerName -U Username -P password -i c:\s2.sql -o C:\s2.txt
sqlcmd -S ServerName -U Username -P password -i c:\s3.sql -o C:\s3.txt
sqlcmd -S ServerName -U Username -P password -i c:\s4.sql -o C:\s4.txt 
```

从 SQL Server 执行批处理文件，如下所示。

```
EXEC master..xp_CMDShell 'c:filename.bat' 
```

您也可以参考下面的链接来运行批处理文件..

[**SQL SERVER – 使用 T-SQL 运行批处理文件 – xp_cmdshell bat 文件**](http://blog.sqlauthority.com/2007/06/27/sql-server-running-batch-file-using-t-sql-xp_cmdshell-bat-file/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:44:53.123

您需要编写一个程序来下载文件，逐行读取它们，在内部附加它们并执行整个批处理。

如果您可以通过在浏览器中调用 url 来执行 SQL 脚本，那将是一个巨大的安全漏洞。**

# android - 光标计数在平板电脑中为 0，但在手机中为 2

> ID：16188567
> 
> 赞同：0
> 
> 时间：2013-04-24T09:38:20.000
> 
> 标签：android, count, cursor

我正在使用`tablet (android version 4.1.1)`和`phone (android version 4.1.2)`。

我正在尝试获取光标计数`onclick`，但平板电脑和手机的结果不同。

基本上，结果与预期一样正确，`phone`但与`tablet`.

**我的代码：**

```
clickmaster.setOnClickListener(new OnClickListener() {

   @Override
   public void onClick(View v) 
   {
    db = getDatabase(); //common method for open and accessing data

    String sql = "SELECT user_id FROM users WHERE source_id = ? AND cartname = ?";

    Cursor cur0 = db.rawQuery(sql, new String[]{sid,"MasterCart"});

    cur0.moveToFirst();

    System.out.println(cur0.getCount()); //Result 0 for tablet and 2 for phone.
   } 
```

因此，在上面的代码中，我打印了`cur0.getCount()`0 和`tablet`2 ，令人惊讶的是`phone`.

为什么这么冷漠？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:40:46.340

首先从手机和平板电脑上卸载应用程序，然后再次运行它，并检查，
在您访问旧数据库的任何设备中，首先从手机和 Tab 中清除数据库。

# c# - WPF,C# 使用 VS2010

> ID：16188570
> 
> 赞同：0
> 
> 时间：2013-04-24T09:38:22.903
> 
> 标签：c#, wpf, visual-studio-2010

我用CheckBox，Lable做了Binding，实现了BoolToVisibleOrHidden类，意思是什么时候`checkBox1.IsChecked`应该显示Lable，我要实现的是checkbox选中的EventHandler，我想用MessageBox实现。如果`Messabox.Yes`那时只应显示标签，

```
 <CheckBox Name="_checkBoxExpertMode" IsChecked="{Binding Path=DisplayChecked, Mode=TwoWay}" 
 <Lable  Name="_lableDisplay" Visibility="{Binding Path=DisplayChecked, Mode=OneWay, NotifyOnTargetUpdated=True, Converter={StaticResource BoolToVisConverter}}"
                                                          />

 System.Windows.Forms.DialogResult dialogResult = System.Windows.Forms.MessageBox.Show("Sure", "Some Title", System.Windows.Forms.MessageBoxButtons.YesNo);
              if (dialogResult == System.Windows.Forms.DialogResult.Yes)
            {
                _checkBoxExpertMode.IsChecked = true;
            }
           else if (dialogResult == System.Windows.Forms.DialogResult.No)
           {
               _checkBoxExpertMode.IsChecked = false;
           } 
```

但是标签在消息框弹出之前显示。

帮帮我，提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T09:58:01.540

将绑定放在复选框上并使用[Checkbox.Checked 事件](http://msdn.microsoft.com/fr-fr/library/system.windows.controls.primitives.togglebutton.checked.aspx)。

```
<CheckBox Name="..." Checked="CheckBox_Checked"  /> 
```

在事件处理程序中，显示消息框并使用属性来指示是否应显示标签：

```
public class MyWindow
{
    public bool ShouldLabelBeDisplayed { get; set; }

    public void CheckBox_Checked(object sender, RoutedEventArgs e)
    {
        DialogResult dialogResult = MessageBox.Show(...);
        if (dialogResult == DialogResult.Yes)
        {
            ShouldLabelBeDisplayed = true;
        }
        else
        {
            ShouldLabelBeDisplayed = false;
        }
    } 
```

最后，将标签的 Visible 属性绑定到此属性：

```
 <Label Name="..." Visibility="{Binding Path=ShouldLabelBeDisplayed, Converter={StaticResource BoolToVisConverter}}" /> 
```

可能不完全是这样，但你明白了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:50:01.083

tru 将标签的属性设置为：

```
yourlabel.Visibility="Hidden". 
```

然后当你想展示时，你应该做属性：

```
yourlabel.Visibility="Visible". 
```

# python - python中的简单线程

> ID：16188572
> 
> 赞同：0
> 
> 时间：2013-04-24T09:38:24.117
> 
> 标签：python, multithreading, python-multithreading

我的 GUI 中有一个功能需要一段时间才能完成，因为它与另一个程序通信。由于我不想每次都等待它完成，然后再恢复使用 GUI，我想将此函数作为线程启动。

我试着这样做：

```
threading.Thread(target=self.Sweep, args=Input).start() 
```

但它什么也没做，没有例外，没有结果。如果我正常启动该功能，它可以正常工作

```
self.Sweep(Input) 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T22:39:40.860

在我看来，glglgl 是对的。

您应该为“args”传递一个元组或列表，例如`args=[1]`而不是`args=1`。发生的情况是，你启动你的线程，它立即死亡，因为它试图打开一个序列 - args - 你传递了一个序列以外的东西 - 并且`TypeError`抛出了一个异常。

我对您的日志记录持怀疑态度 - 您应该已经看到了这个异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:50:52.220

我不知道这是否足以解决问题，但至少，你应该让你的 args

```
args=(Input,) 
```

为了将它与“直接”调用相匹配。

`args`参数 for`Thread()`应该是一个包含函数所有参数的元组`target`。因为你有一个参数，`Input`你必须匹配这个元组来表示这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T09:52:42.597

该`threading`模块的使用方式与 Java 等效模块相同。

我认为您正在尝试使用[`thread`](http://docs.python.org/2/library/thread.html). 尝试这个：

```
thread.start_new_thread(someFunc, ()) 
```

你可以[在这里](http://docs.python.org/2/library/thread.html#thread.start_new_thread)得到一些关于`thread.start_new_thread`.

# mysql - 如何在 MySQL 中选择字段值

> ID：16188573
> 
> 赞同：0
> 
> 时间：2013-04-24T09:38:30.367
> 
> 标签：mysql

想要实现的是如下所示：`a.column1`如果`a.column1`有一个值，则选择作为值 x，否则我想要`b.column1`作为值 x。

我想像下面的伪代码：

```
SELECT (hasValue(a.column1)?a.column1:b.column1 as x FROM a, b 
```

在我的实际情况下，它实际上是三张桌子。我想这可能会使努力变得更加棘手？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T09:42:43.377

合并返回第一个非空值，试试这个：

```
SELECT COALESCE(a.column1,b.column1) as x FROM a,b; 
```

# java - 从组合框中获取 SelectedItem

> ID：16188574
> 
> 赞同：1
> 
> 时间：2013-04-24T09:38:42.563
> 
> 标签：java, swing, awt, actionlistener, jcombobox

像这样我可以从 ComboBox 输出选定的值..

```
public static String selectedString(ItemSelectable is) {
    Object selected[] = is.getSelectedObjects();
    return ((selected.length == 0) ? "null" : (String)selected[0]);
}

public static void main(String[] args) {
        // Add ActionListener
        ActionListener actionListener = new ActionListener() {
            public void actionPerformed(ActionEvent actionEvent) {
                ItemSelectable is = (ItemSelectable)actionEvent.getSource();
                String name=selectedString(is);
                System.out.println(name);
            }
        };

        // Add Actionlistener to ComboBox kundeAuswahl
        kundeAuswahl.addActionListener(actionListener);

       // i wanna have the value of name for use here:
       // String test[] = getChildAsArray("kunde","projekt",name);
} 
```

但是我想从这个函数中获取值**名称**，通常我使用 return，但这给了我一个错误。那我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:46:49.573

使用类变量。

```
 class Abc{

   String itemname

   ActionListener actionListener = new ActionListener() {
        public void actionPerformed(ActionEvent actionEvent) {
            ItemSelectable is = (ItemSelectable)actionEvent.getSource();
            String name=selectedString(is);
            itemname=name;
            System.out.println(name);
        }
    }
      // use itemname in class

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T09:47:17.203

您应该了解在 a 中选择某些内容`ComboBox`是一个*事件*：事件处理程序在事件发生时执行。但是，示例的最后几行*是在创建组合框时执行的*。

因此，当时`name`不可用。但是，您可以从事件处理程序中调用您喜欢的任何函数：

```
public static void main(String[] args) {
    ActionListener actionListener = new ActionListener() {
        public void actionPerformed(ActionEvent actionEvent) {
            ItemSelectable is = (ItemSelectable)actionEvent.getSource();
            String name=selectedString(is);

            doSomethingWithName(name);
        }
    };

    // Add Actionlistener to ComboBox kundeAuswahl
    kundeAuswahl.addActionListener(actionListener);
}

public static void doSomethingWithName(String name) {
    String test[] = getChildAsArray("kunde","projekt",name);
    // ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T09:45:08.410

我不确定您要实现什么，但似乎类成员变量和/或从您的匿名类调用类方法都可以解决问题。

`public void actionPerformed(ActionEvent actionEvent)`由于方法的返回类型为 void，因此您也不能返回 String 。

# graph - 为什么 RDBMS 不能存储相当大的图？

> ID：16188575
> 
> 赞同：3
> 
> 时间：2013-04-24T09:38:49.797
> 
> 标签：graph, rdbms, graph-databases

我开始使用图形数据库来存储即时生成的大图。但我不相信为什么要使用图形数据库来完成我的工作，以及为什么不用传统的 RDBMS 来做我想做的事。我的具体问题是，为什么关系数据库不好，或者更确切地说，图形数据库比 RDBMS 更好地存储图形？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-07T18:34:07.627

阅读 Graph Databases（早期版本，可在此处获得：http: [//graphdatabases.com/](http://graphdatabases.com/)）后，一切都归结为性能。根据查询的深度或递归程度，RDBMS 或图形数据库返回结果所需的时间越长。传统的 RDBMS 并不是为快速遍历实体之间的关系而设计的，而图形数据库则是专门为此而构建的。如果您的递归只有 2 级深，但在此级别之后性能明显下降，这可能不是问题。

请把这个和一粒盐一起吃。这直接来自图形数据库，我没有复制这些结果。

# javascript - JS,CSS,jQuery DIV 3D效果

> ID：16188580
> 
> 赞同：0
> 
> 时间：2013-04-24T09:38:59.680
> 
> 标签：javascript, jquery, css

我正在寻找一种特定的效果，但我不确定它叫什么或者我应该如何搜索它。

基本上，我追求的是 3D 效果。我有一个 DIV 元素，我希望它的行为就像放在一个球上（位于它的中心下方）。

因此，当您将鼠标悬停在边缘上时，该边缘将缩小/缩小。

有没有人见过类似的东西？这完全可以实现吗？

编辑：[此示例中的行为最能描述我所追求的，](http://cubiq.org/dropbox/text3d.html)但 DIV 不是文本。我想我可以根据我的需要调整这个例子。

抱歉，如果我的描述过于笼统，我不知道如何描述我需要的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T09:54:14.450

您可以为此使用 CSS 过渡。使用 css 过渡，您可以为 div 或对象设​​置动画。

看看这个很棒的教程

[https://developer.mozilla.org/en-US/docs/CSS/Tutorials/Using_CSS_transitions](https://developer.mozilla.org/en-US/docs/CSS/Tutorials/Using_CSS_transitions)

一个例子：

[JSFIDDLE](http://jsfiddle.net/Uw56J/)

```
<body>
    <p>The box below combines transitions for: width, height, background-color, transform. Hover over the box to see these properties animated.</p>
    <div class="box"></div>
</body>

.box {
    border-style: solid;
    border-width: 1px;
    display: block;
    width: 100px;
    height: 100px;
    background-color: #0000FF;
    -moz-transition:width 2s, height 2s, background-color 2s, -moz-transform 2s;
    -webkit-transition:width 2s, height 2s, background-color 2s, -webkit-transform 2s;
    -o-transition:width 2s, height 2s, background-color 2s, -o-transform 2s;
    transition:width 2s, height 2s, background-color 2s, transform 2s;
}
.box:hover {
    background-color: #FFCCCC;
    width:200px;
    height:200px;
    -moz-transform:rotate(180deg);
    -webkit-transform:rotate(180deg);
    -o-transform:rotate(180deg);
    transform:rotate(180deg);
} 
```

希望是你的意思。

# android - 使用 DOM 解析器读取和写入内部 android xml 文件

> ID：16188585
> 
> 赞同：0
> 
> 时间：2013-04-24T09:39:16.370
> 
> 标签：android, xml

我是 Android 新手，我正在尝试从 Android 中的 xml 文件读取和写入一些信息。我认为如果我使用 DOM 解析器来做这些事情是可能的......我在应用程序开始时读取文件以获取数据并尝试在应用程序终止之前保存以存储配置更改。我想出了如何从 raw/xml 读取文件，但将修改后的 xml 保存回此处似乎是一个真正的痛苦（甚至不可能）......也许我采取了错误的方法，但我相信应该可以以某种方式修改Android中的一些内部xml文件。怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:45:32.830

您不能修改或更新`raw/xml`文件目录。Android`/res`目录是**只读的**。所以你只能从中读取文件，不允许写回。（**因为 Android .apk 文件具有只读权限）**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:52:48.460

u `cant modify`xml 存储在android app.u在设备上安装应用程序时`xml folder`需要该文件并对其进行修改。在这种情况下，您可以使用 Dom Parser 从设备的 sdcard/内部存储读取和写入 xml 文件。`copy``sdcard/internal storage`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-14T17:14:23.767

@user370305 是对的！！

简单的逻辑是，您不能在运行时在内部存储（原始、资产、布局等）中创建文件。因此，您可以通过授予“write_external_storage”权限在外部创建不同的文件。然后你就可以读或写了。

这是一个例子

```
 public void readXML() throws IOException{ 

         //get the xml file from the raw folder
        InputStream is = getResources().openRawResource(
                    R.raw. config );

        Resources r = getResources();
        AssetManager assetManager = r .getAssets();

         //then write the dummy file
        File f = new File(Environment.getExternalStorageDirectory(), "dummy.xml" );
        OutputStream os = new FileOutputStream(f , true);

         final int buffer_size = 1024 * 1024;
         try
        {
            byte [] bytes = new byte [buffer_size ];
            for (;;)
            {
                int count = is.read( bytes, 0, buffer_size );
                if (count == -1)
                    break ;
                os.write( bytes , 0, count );
            }
            is.close();
            os.close();
        }
         catch (Exception ex )
        {
            ex.printStackTrace();
        }

         //then parse it
                    parseConfigXML( f);

  }

   public String parseConfigXML(File configXML ) {

        XmlPullParser xpp = null ;
         String httpUrl= "";
        FileInputStream fis ;
        XmlPullParserFactory factory = null ;
         try {

               fis = new FileInputStream( configXML);
               factory = XmlPullParserFactory.newInstance();
               factory .setNamespaceAware( true);
               xpp = factory .newPullParser();
               xpp .setInput( new InputStreamReader( fis));

               int eventType = xpp.getEventType();
               while (eventType != XmlPullParser. END_DOCUMENT) {
                     if (eventType == XmlPullParser. START_DOCUMENT) {

                    } else if (eventType == XmlPullParser. START_TAG) {

                    } else if (eventType == XmlPullParser. END_TAG) {

                    } else if (eventType == XmlPullParser. TEXT) {

                           httpUrl += xpp .getText().replace( "\n", "" );

                    }
                     eventType = xpp .next();
              }
        } catch (FileNotFoundException e1 ) {
               // TODO Auto-generated catch block
               e1.printStackTrace();
        } catch (XmlPullParserException e ) {
               // TODO Auto-generated catch block
               e.printStackTrace();
        } catch (IOException e ) {
               // TODO Auto-generated catch block
               e.printStackTrace();
        }

         return httpUrl .trim().replace( "\n", "" );
  } 
```

# ruby-on-rails - Ruby on Rails 中的 content_for 和 ajax

> ID：16188587
> 
> 赞同：1
> 
> 时间：2013-04-24T09:39:23.437
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery, partial-views, content-for

我对 RoR 中的 content_for 有问题，我对控制器进行了远程调用，它包含 javascript update.js.erb 渲染部分 _update.html.erb 并且在部分 content_for 内部有一个需要添加到html页面头部的javascript

控制器

```
def uploadimage
  respond_to do |format|
    format.js 
  end
end 
```

更新.js.erb

```
$('#reloadimage').html("<%= escape_javascript( render 'users/crop' )%>"); 
```

部分 _crop.html.erb

```
<% content_for(:head1) do %>

<%= stylesheet_link_tag "jquery.Jcrop" %>
<%= javascript_include_tag "jquery.Jcrop.min" %>
<script type="text/javascript" charset="utf-8">
$(function() {
  $('#cropbox').Jcrop({
    onChange: update_crop,
    onSelect: update_crop,
    setSelect: [0, 0, 500, 500],
    aspectRatio: 1
  });
});
</script>

<% end %> 
```

布局 application.html.erb

```
<head>
....

<%= yield :head1 %>

....
</head> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:55:45.760

这是行不通的。请记住，您正在客户端操作 HTML，布局已经呈现。

将您的更改添加到头部`update.js.erb`：

```
$("head").append(.....); 
```

# wso2 - 可以构建 WSO2 API Mngt 4.0.7

> ID：16188589
> 
> 赞同：0
> 
> 时间：2013-04-24T09:39:26.037
> 
> 标签：wso2, wso2esb, wso2carbon

```
When i am trying to build wso2 api mgnt i got this error: Please help me 
```

mvn 干净安装

```
 [INFO] ------------------------------------------------------------------------

    [INFO] BUILD FAILURE

    [INFO] ------------------------------------------------------------------------

    [INFO] Total time: 15:22.482s

    [INFO] Finished at: Wed Apr 24 15:02:05 IST 2013

    [INFO] Final Memory: 19M/490M

    [INFO] ------------------------------------------------------------------------

[ERROR] Failed to execute goal org.wso2.maven:carbon-p2-plugin:1.5:p2-profile-gen 
```

项目 am-p2-profile 上的 (3-p2-profile-generation)：P2 发布者返回代码为 13 -> [

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T08:52:36.423

首先你必须建立轨道，然后是内核，然后是平台。你做了那个命令吗？如果您收到相同的错误，您可以粘贴完整的错误日志。

谢谢 ！

# vb.net - VB.Net中无法通过服务控制器访问windows服务描述

> ID：16188592
> 
> 赞同：0
> 
> 时间：2013-04-24T09:39:30.500
> 
> 标签：vb.net, windows-services, servicecontroller

我有我公司的这个 Windows 服务：

![在此处输入图像描述](https://i.stack.imgur.com/gDEx8.png)

我想在后面的代码中从中获取服务描述！但由于某种原因，它不返回服务描述。

谁能帮我这个 。

这是我的代码，它返回什么：

```
Dim MyServices As ServiceController = New ServiceController("AccTech Exchange Rate Import")
    Dim Status As String = MyServices.Status.ToString
    Dim Name As String = MyServices.ServiceName 
```

以及 MyService 变量返回的内容。

![在此处输入图像描述](https://i.stack.imgur.com/NTMQl.png)

我如何从这里获得服务描述？

问候，

编辑：

这是 Miki Shah 为我指明正确方向后的代码！

```
Dim MyServices As ServiceController = New ServiceController("AccTech Exchange Rate Import")

Dim Status As String = MyServices.Status.ToString
Dim Name As String = MyServices.ServiceName
Dim Description As String

Dim objPath As String = String.Format("Win32_Service.Name='{0}'", Name)
Using service As New ManagementObject(New ManagementPath(objPath))
    Description = service("Description")
End Using 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:18:42.370

您可以通过以下方式获得，并且必须添加 System.Management 的引用

```
string serviceName = MyServices.ServiceName
string objPath = string.Format("Win32_Service.Name='{0}'", serviceName);
using (ManagementObject service = new ManagementObject(new ManagementPath(objPath)))
{
    Console.WriteLine(service["Description"]);
} 
```

# javascript - Javascript，替换在 ipad 中不起作用，如何在 ipad 中使用替换？

> ID：16188599
> 
> 赞同：0
> 
> 时间：2013-04-24T09:39:48.737
> 
> 标签：javascript, jquery, javascript-events

我用下面的代码替换了html，它在浏览器中工作，但在ipad safari浏览器中不工作如何解决这个问题？

```
var text=$('#content_area').html();
var text2=text.replace('<span style="background-color: rgb(233, 207, 236);">proposes</span>'
, 'proposes'); 
$('#content_area').html(text2); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T09:51:52.427

你做错了™。不要修改原始 HTML 字符串，修改 DOM。

```
$( '#content_area span:contains("proposes")' ).replaceWith( 'proposes' ); 
```

您*也可以*按背景颜色进行选择，但这并不可靠。问题很可能是 Mobile Safari 没有将颜色保持为 rgb() 而是以十六进制格式，所以这样的事情可能会起作用：

```
$( '#content_area span' ).filter(function() {
    return ( $(this).css('background-color') === 'rgb(233, 207, 236)' 
          || $(this).css('background-color').toLowerCase() === '#e9cfec' );
}).replaceWith( 'proposes' ); 
```

最好的解决方案是，如果您可以向跨度添加一个类或以其他方式可靠地区分它们，以便选择器是明确的。

# android - 将数据传输到另一个活动类

> ID：16188600
> 
> 赞同：0
> 
> 时间：2013-04-24T09:39:53.017
> 
> 标签：android, json, facebook

我制作了一个使用 Facebook 登录的 android 应用程序。我想将用户的 Facebook id 转移到另一个 Activity 类。我使用以下代码来执行此操作

```
 Bundle bundle = new Bundle();
   bundle.putString("fields", "id");
   AsyncFacebookRunner asyncRunner = new AsyncFacebookRunner(facebook);
   asyncRunner.request("me", bundle, new AsyncFacebookRunner.RequestListener() {
        public void onMalformedURLException(MalformedURLException e, Object state) {
            // TODO Auto-generated method stub
        }

        public void onIOException(IOException e, Object state) {
            // TODO Auto-generated method stub
        }

        public void onFileNotFoundException(FileNotFoundException e, Object state) {
            // TODO Auto-generated method stub
        }

        public void onFacebookError(FacebookError e, Object state) {
            // TODO Auto-generated method stub
        }

        public void onComplete(String response, Object state) {
            JSONObject jObject;
            try {
                jObject = new JSONObject(response);
                Log.d("FACEBOOK ID", jObject.getString("id"));

            } catch (JSONException e) {
                e.printStackTrace();
            }
        }
    }); 
```

我能够在 try and catch 中获取 Facebook id，但是当我使用此 id 或将其转移到另一个活动时，它会显示并转移“null”。

我应该怎么做才能将 Facebook id 转移到另一个活动课程？请帮忙！！！

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:48:52.250

## 将您的 FACEBOOK 用户 ID 保存在**Preference**中，并在您的应用程序中的任何位置使用它

店铺

```
String loginId = jObject.getString("id");

SharedPreferences p = PreferenceManager.getDefaultSharedPreferences(context);

p.edit().putString("FB_ID", loginId).commit(); 
```

在另一个活动中获取 id

```
SharedPreferences p = PreferenceManager.getDefaultSharedPreferences(context);
String username = p.getString("FB_ID", ""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:54:37.143

使用附加功能！

对于发送：

```
int id = 42;
Intent i = new Intent(FromActivity.this, ToActivity.class);
i.putExtra("your_identifient", id);
startActivity(i); 
```

进入你的新活动：

```
int id = -1;
Bundle extras = getIntent().getExtras();
if (extras.containsKey("your_identifient"))
  id = extras.getInt("your_identifient", -1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T09:44:32.657

这是存储 id 的完整代码吗，因为我没有看到赋值语句。即你没有存储你在任何地方收到的“id”的值。你刚刚登录了它。

使用赋值语句，如

```
String loginId = jObject.getString("id"); 
```

# jquery - 在 jQuery 中选中复选框后显示文本字段

> ID：16188607
> 
> 赞同：0
> 
> 时间：2013-04-24T09:40:07.287
> 
> 标签：jquery, filter

我有一个带有过滤器的 div，如下所示：（复选框的类名是=> **dynamicFilterInput**）

```
[ ] all product
[ ] bmw
[ ] mercedes
[x] audi 
```

当检查了更多复选框时，必须在另一个`<div>`这样的文本中出现文本：

> 选择的过滤器：
> 
> • 奥迪
> **取消选中所有**

我不知道该怎么做，我试过这个：

```
$(".dynamicFilterInput").on( "click", function() {
    $( "#tabs_pieces_select" ).html( $("input:checked").val() + " is checked!" );
}); 
```

但它不起作用。我在控制台中收到此错误：

> TypeError: $(...).on 不是函数

小提琴链接[http://jsfiddle.net/WPnkh/](http://jsfiddle.net/WPnkh/)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T09:50:39.733

对于 1.4.2 版，使用“委托”/“绑定”。事实上，如果您没有动态添加复选框，则无需使用 on/delegate/bind。简单的点击就可以了。

```
$(".dynamicFilterInput").click(function() { 
 $("#tabs_pieces_select").html($(this).val() + " ::: is checked");
}); 
```

上面的代码用于简单地使用 click 函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T09:57:33.863

试试这个：

```
$(".dynamicFilterInput").click(function () {
    if (this.checked) $("#tabs_pieces_select").html($(this).val() + " is checked!");
}); 
```

无论您选中还是取消选中复选框，都会调用此函数，因此我们需要确保当单击复选框并选中它时，只有文本出现在另一个 div 上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T10:02:14.043

你可以看看这个[http://jsfiddle.net/5KdfB/](http://jsfiddle.net/5KdfB/)

基本上你下面的代码会以某种方式工作，但有一些小问题。

$(".dynamicFilterInput").click(function() { $( "#tabs_pieces_select" ).html( $("input:checked").val() + " 被选中！" );

这只会发布第一个被选中的输入复选框，但是如果我们检查两个或更多复选框怎么办......您的代码只会显示第一个输入复选框。

$('.dynamicFilterInput').on('click', function() { var choice = $(this);

```
if (choice.is(":checked"))
{
    $('#choices' ).append( choice.val()  + " is checked!" );
} 
```

});

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T09:55:46.220

使用[.live()](http://api.jquery.com/live/)

```
$(".dynamicFilterInput").live("click", function() {
    $("#tabs_pieces_select").html($("input:checked").val()
            + " is checked!");
}); 
```

# mysql - 如果计数小于数字，则获取对象

> ID：16188609
> 
> 赞同：0
> 
> 时间：2013-04-24T09:40:11.647
> 
> 标签：mysql, sql, sybase

我有 2 个简单的表格 -`Firm`和`Groups`. 我还有一个`FirmGroupsLink`用于在它们之间建立连接的表（连接是一对多的）。

表`Firm`具有属性 - `FirmID`, `FirmName`,`City`

表`Groups`具有属性 - `GroupID`,`GroupName`

表`FirmGroupsLink`具有属性 - `FrmID`,`GrpID`

现在我想做一个查询，它将返回所有那些组比@num少的公司，所以我写

```
SELECT FirmID, FirmName, City
FROM (Firm INNER JOIN FirmGroupsLink ON Firm.FirmID =
FirmGroupsLink.FrmID) 
HAVING COUNT(FrmID)<@num 
```

但它没有运行，我在 Microsoft Access 中尝试了这个，但它最终应该适用于 Sybase。请告诉我，我做错了什么。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T09:45:50.527

为了正确计数，您需要提供您正在计算的组。
如果你不分组，那么有子句，而且计数不能工作。

在这里，您按公司计数。事实上，因为您需要检索有关公司的信息，所以您按 FirmId、FirmName 和 City 进行分组，因此查询应该如下所示：

```
SELECT Firm.FirmID, Firm.FirmName, Firm.City
FROM Firm
    LEFT OUTER JOIN FirmGroupsLink 
        ON Firm.FirmID = FirmGroupsLink.FrmID
GROUP BY Firm.FirmID, Firm.FirmName, Firm.City
HAVING COUNT(FrmID) < @num 
```

请注意，我将 a 替换为`INNER JOIN`，`LEFT OUTER JOIN`因为您可能还想要不属于任何组的 Firm 。

# php - iframe中的PHP CURL更改基本网址？

> ID：16188613
> 
> 赞同：0
> 
> 时间：2013-04-24T09:40:21.647
> 
> 标签：php, iframe, curl

我正在使用对 API 的 CURL 调用。该调用返回一个我在 iframe 中回显的 HTML DOM 树。问题是基本 url 是指我自己的站点而不是 API 的站点。例如：`<script type="text/javascript" src="/swf/swfobject.js"></script>`将引用我的网站而不是 API。我查看了 CURL 设置选项，但找不到我要找的东西，有人可以帮我吗？我尝试使用 preg_replace ，但我有很多不同的不可预测的链接。（以及它的肮脏方式！）

CURL 调用代码：

```
function CallAPI($method, $url, $data = false)
{
    $curl = curl_init();

    switch ($method)
    {
        case "POST":
            curl_setopt($curl, CURLOPT_POST, 1);

            if ($data)
                curl_setopt($curl, CURLOPT_POSTFIELDS, $data);
            break;
        case "PUT":
            curl_setopt($curl, CURLOPT_PUT, 1);
            break;
        default:
            if ($data)
                $url = sprintf("%s?%s", $url, http_build_query($data));
    }

    // Optional Authentication:
    curl_setopt($curl, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
    //curl_setopt($curl, CURLOPT_USERPWD, "username:password");

    curl_setopt($curl, CURLOPT_URL, $url);
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);

    return curl_exec($curl);
}

$output = CallAPI($method, $url, $data);

echo $output; 
```

HTML：

```
<iframe src="videorecorder.php" frameBorder="0" scrolling="no"></iframe> 
```

请帮我！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:37:49.847

[CURLOPT_REFERER](http://php.net/manual/en/function.curl-setopt.php)

```
curl_setopt($curl, CURLOPT_REFERER, $referer); 
```

# wcf - Silverlight 避免两次请求事件

> ID：16188617
> 
> 赞同：0
> 
> 时间：2013-04-24T09:40:30.370
> 
> 标签：wcf, c#-4.0, silverlight-5.0

我有一个控件，例如，`Submit`如果用户连续单击按钮两次或更多次，则用户会收到相同的消息/相同的操作发生两次或更多次。

我需要避免这种情况。

感谢您的投入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:43:46.673

您需要在视图背后的代码（或 ViewModel，如果使用 MVVM 模式）中检测按钮单击事件并禁用该按钮。现在我认为您的提交按钮正在触发某种异步操作。异步操作成功完成后，您可能需要启用该按钮以使其再次可用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-24T10:09:01.607

Shankar, if you want to avoid clicking on button, you should disable it. If you can give more details about what exactly you are trying to do, more details can be given.

# asp.net - 如何在 asp.net 中将文件作为下载链接提供？

> ID：16188621
> 
> 赞同：0
> 
> 时间：2013-04-24T09:40:36.747
> 
> 标签：asp.net, file-upload

在我的 asp.net 网站中，用户可以上传多个文件，这些文件位于服务器硬盘上的“上传”文件夹中。我通过使用用户名+原始文件名重命名文件来保存文件示例：如果我上传文件'user.text'并且我的代码是1000，那么文件将保存在名为'1000_user.Text'的上传文件夹中。这是为了针对特定用户识别文件。现在，当管理员登录应用程序并选择一个用户时，他应该能够看到他/她上传的所有文件。文件应该是可下载的格式给他。

我怎样才能达到同样的效果？我完全不知道，如何去做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T07:18:19.623

最推荐的实现方式是使用数据库，它与 Gallery 的一个模块相同，其中用户有相册和相册中的一些图片。管理员可以查看每个用户的相册和相册中的图片。您必须在数据库中引入两个表。我有正在上传的文件的类别信息（主表）和其他包含文件本身信息的表（详细信息表）。

另一种方法是为应用程序中的文件类别的每个用户创建一个分层文件夹目录，然后递归读取目录和字段，然后将它们列出以显示给应用程序用户。我猜当文件数量会增加时，这将是昂贵的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:48:27.687

我可以根据可行性向您建议几种方法。方法 1 - 如果您可以更改数据库，当用户上传文件时，您应该在数据库中保存针对用户动态生成的文件名。这样当管理员登录并想要查看用户上传的所有文件时，您只需要进行数据库查询并将它们显示在网格中即可。当用户单击文件名时，您可以从硬盘中获取文件并允许它下载到管理员。

如果数据库更改不可行，您的任务将更加困难。您必须在所有文件中使用用户名查询您的目录。您可以使用 LINQ 使这项任务对您来说更容易一些。获得所有列表后，将其显示给管理员。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T09:45:47.130

这不是您在 SO 上提问的方式。无论如何已经是一条建议：

1.  将您的文件存储在 webroot 之外，并在您的网站中使用脚本来获取文件并将其呈现给用户。这是出于安全原因：如果有人设法上传了恶意文件，您不希望他能够从网络上执行它。
2.  在数据库中存储文件信息和上传信息：谁上传了什么以及何时上传？依赖文件名不是一个好主意。您也可以最终将文件存储在数据库中（作为 BLOB），但我更喜欢旧的文件系统

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T09:49:06.283

我建议您将有关文件的元数据保存在数据库中（例如原始文件名和用户名）。然后，您可以使用此元数据来查找用户已上传的文件。根据数据库表中的唯一 ID 为文件指定磁盘上的文件名。这样，用户可以上传多个同名文件。确保此文件夹不在您的应用程序中，以便出于安全原因可以通过 url 访问它们。

# java - 如何通过 JRuby 使用 Compass，嵌入到我的软件中？

> ID：16188626
> 
> 赞同：2
> 
> 时间：2013-04-24T09:40:56.683
> 
> 标签：java, ruby, jruby, compass-sass

我必须在我的 java 软件中动态地“编译”罗盘文件。所以，按照stackoverflow上的解释，我已经完成了这些步骤：

*   获取 JRuby (1.7.3)，配置 jruby.jar 和二进制文件 (gem, rake ...) 的 PATH 并学习从 Java 启动 ruby​​ 脚本
*   使用以下命令行将指南针和依赖项 gem 放入本地目录

    ```
    gem install -i ./compass compass 
    ```

    => 所以我得到一个`./compass/`包含目录的`bin, cache,doc, gems & specifications`目录。

*   使用以下命令行将 gems 放入 jar 中（考虑使用与 gems 不同的 jar 名称，以避免 JRuby“需要”jar 而不是 gems）

    ```
    jar cf compass-lib.jar -C compass . 
    ```

*   在本地目录中编写一个测试脚本`test.rb`来测试我的 jar。它包含 ：

    ```
    require 'compass'

    Compass.add_configuration(
        {
            :project_path => '.',
            :sass_path => 'styles/scss',
            :css_path => 'styles/css'
        },
        'custom' # A name for the configuration, can be anything you want
    )
    Compass.compiler.compile('test.scss', 'test.css') 
    ```

*   使用 JRuby 执行此脚本，使用以下命令行：

    ```
    jruby -I . -rcompass-lib.jar test.rb 
    ```

*   并得到这个错误......

    ```
    Unable to load Sass. Please install it with one of the following commands:
      gem install sass --pre
    LoadError: no such file to load -- jar:file:C:/jruby-1.7.3/lib/jruby.jar!/gems/s
    ass-3.2.8/lib/sass/../sass
      require at org/jruby/RubyKernel.java:1027
      require at c:/jruby-1.7.3/lib/ruby/shared/rubygems/custom_require.rb:36
       (root) at jar:file:C:/jruby-1.7.3/lib/jruby.jar!/gems/sass-3.2.8/lib/sass/ver
    sion.rb:5
      require at org/jruby/RubyKernel.java:1027
       (root) at c:/jruby-1.7.3/lib/ruby/shared/rubygems/custom_require.rb:1
      require at c:/jruby-1.7.3/lib/ruby/shared/rubygems/custom_require.rb:36
      require at org/jruby/RubyKernel.java:1027
       (root) at jar:file:C:/jruby-1.7.3/lib/jruby.jar!/gems/sass-3.2.8/lib/sass.rb:
    9
       (root) at c:/jruby-1.7.3/lib/ruby/shared/rubygems/custom_require.rb:1
      require at org/jruby/RubyKernel.java:1027
      require at c:/jruby-1.7.3/lib/ruby/shared/rubygems/custom_require.rb:60
       (root) at jar:file:C:/jruby-1.7.3/lib/jruby.jar!/gems/compass-0.12.2/lib/comp
    ass/dependencies.rb:6
         each at org/jruby/RubyArray.java:1613
       (root) at c:/jruby-1.7.3/lib/ruby/shared/rubygems/custom_require.rb:1
      require at org/jruby/RubyKernel.java:1027
      require at c:/jruby-1.7.3/lib/ruby/shared/rubygems/custom_require.rb:36
       (root) at test.rb:1 
    ```

对问题的想法，也许还有解决方案？;) 提前感谢。

**[更新#1]**

在 Jörg W Mittag 明显的建议之后，错误消失了。谢谢 ;) 现在，它只是找不到 scss 文件，所以这是一个“正常问题” ;)

**[更新#2]**

在 IRB 中成功使用 compass 之后，是时候通过 Java 转置测试了。因此，我在 Java 中编写了一些行来执行我的 ruby​​ 脚本，第一次只使用绝对路径来避免出现问题。

```
InputStream myFile = ISRessources.getFile("C:/Path/To/My/test.rb");
new ScriptingContainer().runScriptlet(myFile, "test.rb"); 
```

但是......如何“加载”我的`compass-lib.jar`？`-r`JRuby 中的等价物是什么？我尝试将 gem 包含到 jruby.jar 中，以在 java 构建路径的外部 jar 中添加 compass-lib.jar，但两者都不起作用，我仍然有：

```
LoadError: no such file to load -- compass
  require at org/jruby/RubyKernel.java:1027
   (root) at test.rb:1 
```

任何想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:08:00.680

错误消息说：

> 无法加载 Sass。请使用以下命令之一安装它：
> 
> ```
> gem install sass --pre 
> ```

# java - MVC - 需要建议以使用 Java 中的自定义应用程序实现 MVC 模式

> ID：16188627
> 
> 赞同：0
> 
> 时间：2013-04-24T09:40:57.487
> 
> 标签：java, model-view-controller

考虑下面显示使用 Java 构建的自定义应用程序的屏幕截图。

![在此处输入图像描述](https://i.stack.imgur.com/xzxnw.jpg)

1) 在这个自定义应用程序中，我们可以在“查看端口”中添加人员和汽车，如上图所示。

2）我正在尝试为这个自定义应用程序编写一个插件，它执行以下操作

*   读取视口中的所有 Person 对象
*   读取视口中的所有 Car 对象
*   读取 person 和 car 的所有属性，看是否有链接，如果有链接，则输出。

现在，我正在尝试使用下面的 MVC 模型来实现插件

![在此处输入图像描述](https://i.stack.imgur.com/5653I.png)

基于这个模型，我将所有视图（如 JPanel、按钮等）放在视图文件中，控制器中的按钮单击操作。但是在创建模型时，我遇到了一个困惑。

在我创建的插件中，我没有直接访问任何数据库表的权限。相反，自定义应用程序为我提供了以下功能

```
- getObjectsInViewPort()
- getObjectType(object)
- getProperties(object) etc., 
```

现在，我如何设计我的模型？我是否应该在模型中创建一些方法来使用上述内置模型并将一些结果返回给我的控制器，然后发送到视图进行更新？

或者请告诉我在这种情况下我应该如何以正确的方式执行 MVC。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:53:55.167

只需开始编写提供侦听器的模型，专注于控制器的侦听、调用。制作触发事件等的抽象（模型）视图类。*以情景为基础，带有“故事”。*

这将允许编写播放场景的单元测试。

在下一阶段，采用这样的视图类并从 JFrame 或其他 GUI 类*扩展它。*或者嵌入抽象视图类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:49:19.540

你走在正确的轨道上。要构建模型，您不必访问数据库。

**1）**建立你的模型

**2)**从您的模型中调用 API 函数

**3）**在你的模型中获取返回结果

**4）**把它交给控制器

**5)**依次将其呈现给查看。

**答案已更新**

所有业务处理功能也将进入您的模型，因为这是您的业务模型，而不是 POJO。使用数据层设计模式创建 POJO 来存储业务数据（API 返回的数据），然后在模型类中使用它们与控制器进行交换。

# hadoop - 使用HDFS存储HBase的数据时出错

> ID：16188633
> 
> 赞同：0
> 
> 时间：2013-04-24T09:41:36.043
> 
> 标签：hadoop, hbase

当我将hbase-site.xml 中的**hbase.rootdir**配置设置为本地文件系统，如**文件：** //hbase_root_dir_path，hbase 工作正常。但是当我将其更改为**hdfs：** //localhost:9000/hbase 时，hbase 一开始也可以. **但是过了一小段时间（通常是几秒钟）**，它没有工作。我发现 HMaster 用 jps 命令停止了。当然我无法打开 localhost:60010 网页。我看了日志，发现……错了如下所示：

```
 INFO org.apache.zookeeper.server.PrepRequestProcessor: Got user-level KeeperException when processing sessionid:0x13e35b26eb80001 type:delete cxid:0x13 zxid:0xc txntype:-1 reqpath:n/a Error Path:/hbase/backup-masters/localhost,35320,1366700487007 Error:KeeperErrorCode = NoNode for /hbase/backup-masters/localhost,35320,1366700487007
INFO org.apache.zookeeper.ClientCnxn: Opening socket connection to server localhost/127.0.0.1:2182\. Will not attempt to authenticate using SASL (unknown error)
ERROR org.apache.hadoop.hbase.regionserver.handler.OpenRegionHandler: Failed open of region=person,,1365998702159.a5af90c23325829096517fb3b15bca17., starting to roll back the global memstore size.
java.lang.IllegalStateException: Could not instantiate a region instance.
WARN org.apache.zookeeper.ClientCnxn: Session 0x13e35b26eb80002 for server null, unexpected error, closing socket connection and attempting reconnect 

```

我在 Ubuntu 12.04 LTS 中使用了 hbase 的伪分布式模式。在我的 /etc/hosts 中，我已经将主机名的 IP 更改为 127.0.0.1。如果关闭，我的 hadoop 安全模式状态。我的 hadoop 版本是 1.0.4，我的 hbase 版本是 0.94.6.1（都是最新的稳定版发布），HBase 参考指南说 hbase-0.94.x 与 hadoop-1.0.x 配合得很好。
我认为 HDFS 会导致问题，因为它确实适用于本地文件系统。顺便说一下，有一个 hbase-xxx-security 版本，它和 hbase-xxx 版本有什么区别，我需要使用安全发布？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:03:31.407

你设置你的 Zookeeper 法定人数了吗？Zookeeper 似乎正在尝试连接到您的本地主机。

尝试使用`hbase.zookeeper.quorum`. `hbase-site.xml`此外，如果您不管理自己的 Zookeeper 实例，请确保在`hbase-env.sh`这一行中没有 commented `export HBASE_MANAGES_ZK=true`。

# spring-mvc - 使用spring mvc时如何加载extjs接口

> ID：16188634
> 
> 赞同：3
> 
> 时间：2013-04-24T09:41:37.610
> 
> 标签：spring-mvc, extjs4

我正在使用**extjs 4 MVC**架构，而且我正在使用**spring MVC**

当我运行我的项目时，我什么都看不到，但是当我使用 firebug 检查时，我看到所有的 js 文件都已加载

这是我在萤火虫中看到的错误

```
GET http://localhost:8080/Views/Ext4Example/view/login/LoginForm.js?_dc=1366793593142 404 (Not Found) ext-all.js:1
GET http://localhost:8080/Views/app/controller/Login.js?_dc=1366793593216 404 (Not Found) ext-all.js:1
GET http://localhost:8080/Views/Ext4Example/view/login/WestMenu.js?_dc=1366793593147 404 (Not Found) ext-all.js:1
GET http://localhost:8080/Views/Ext4Example/view/login/HomePage.js?_dc=1366793593141 404 (Not Found) ext-all.js:1
GET http://localhost:8080/Views/Ext4Example/model/Login.js?_dc=1366793593151 404 (Not Found) ext-all.js:1
GET http://localhost:8080/Views/app/view/Viewport.js?_dc=1366793593214 404 (Not Found) ext-all.js:1
GET http://localhost:8080/Views/Ext4Example/store/Login.js?_dc=1366793593151 404 (Not Found) 
```

在我看到的 Eclipse 控制台上

```
24 avr. 2013 10:31:40 org.springframework.web.servlet.DispatcherServlet noHandlerFound
ATTENTION: No mapping found for HTTP request with URI [/Views/Ext4Example/view/login/LoginForm.js] in  
DispatcherServlet with name 'mvc-dispatcher' 
```

我还写了映射部分

```
<mvc:resources mapping="/resources/**"  location="/resources/" /> 
```

有人有回应吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T12:43:41.807

看起来您使用了不同的文件夹结构。在这种情况下，您的资源映射不起作用。

尝试以下资源映射。

```
<mvc:resources mapping="/Views/**"  location="/Views/" /> 
```

# internationalization - 推动行为 i18n 和可归档

> ID：16188640
> 
> 赞同：0
> 
> 时间：2013-04-24T09:41:49.987
> 
> 标签：internationalization, archive, propel

我正在使用推进，我在我的一张桌子上设置了两种行为：

```
<behavior name="archivable" />
<behavior name="i18n">
  <parameter name="i18n_columns" value="name" />
  <parameter name="default_locale" value="de" />
</behavior> 
```

问题是，如果我归档该表的对象，则不会保存“名称”字段。显然在基类的“copyInto”方法中没有

```
$copyObj->setName($this->getName()); 
```

这是推进中的错误还是我在这里遗漏了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T08:23:38.403

您必须手动归档 i18n 信息，方法是使表也可归档，并覆盖生成的 archive() 方法。Propel 博客中给出了一个示例：

```
class Book extends BaseBook
{
  public function archive(PropelPDO $con = null)
  {
    // archive the book reviews
    BookReviewQuery::create()
      ->filterByBook($this)
      ->archive($con);
    // archive the current object
    return parent::archive($con);
  }
} 
```

来源： http: [//propel.posterous.com/introducing-archivable-behavior-and-why-softd](http://propel.posterous.com/introducing-archivable-behavior-and-why-softd)

# php - phpseclib - 输入值提示

> ID：16188643
> 
> 赞同：0
> 
> 时间：2013-04-24T09:41:56.087
> 
> 标签：php, ssh, phpseclib

我找不到与此问题相关的示例。我想输入值以提示我发送命令后出现的提示

我发送这个命令：

```
$ssh->exec('sudo pure-pw useradd '.$server_dir.' -u ftpuser -d /home/ftpusers/'.$server_dir); 
```

如果使用腻子，它应该返回提示。这不是 sudo 密码（我已禁用用户的密码提示）。密码提示适用于 ftp 用户。

```
Password: 
```

在那之后：

```
Enter it again: 
```

我想知道，我怎么能用 phpseclib 回答他们？我试过了：

```
$ssh-exec('password');
$ssh-exec('password'); 
```

但它不起作用，所以我现在有点卡住了。

编辑//我也尝试使用读写，但是页面一直在加载..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T12:57:03.857

好的，最后我让它工作了，这是代码：

```
$ssh->write('sudo pure-pw useradd '.$server_dir.' -u ftpuser -d /home/ftpusers/'.$server_dir."\r\n");
$ssh->read("Password:");
$ssh->write($ftp_pw."\r\n");
$ssh->read("Enter it again:");
$ssh->write($ftp_pw."\r\n");
$ssh->exec("sudo pure-pw mkdb"); 
```

# php - 在 PHP 中启用 FTP

> ID：16188647
> 
> 赞同：0
> 
> 时间：2013-04-24T09:42:07.307
> 
> 标签：php, ftp, php4

我需要使用 PHP4 将一些文件移动到 FTP。我尝试使用 ftp_connect()。当我使用此方法运行 PHP 页面时，出现此错误

```
Fatal error: Call to undefined function: ftp_connect() 
```

google了一下，发现安装PHP的时候应该启用FTP。现在如何在我的 PHP4 中启用 FTP。？

（`phpinfo()`没有显示有关 FTP 的任何内容。我在服务器中做了这些事情。但在我的本地一切正常。phpinfo() 显示 FTP 已启用。）

# javascript - div innerhtml上的jquery动画改变

> ID：16188651
> 
> 赞同：1
> 
> 时间：2013-04-24T09:42:22.843
> 
> 标签：javascript, jquery, css, jquery-ui

我有一个这样的div：

```
<div id="outerDiv"><img src="1.png" /></div> 
```

我想把outerDiv的innerhtml改成另一个图片，

**我可以在下面的代码中使用 jquery 实现一些动画/淡入淡出效果吗？**或任何其他用动画更改内部 html 的方式。

```
$('#outerDiv').html('<img src = "2.png" />') 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T09:44:40.750

```
$('#outerDiv img').fadeOut(1000, function()
{     
    $(this).attr('src',"2.png").fadeIn(1000);
}); 
```

**演示：http:** [//jsfiddle.net/hvG7k/](http://jsfiddle.net/hvG7k/)

# iphone - iphone - 设置背景视图时在 UITableViewCell 中画一条线

> ID：16188655
> 
> 赞同：2
> 
> 时间：2013-04-24T09:42:32.280
> 
> 标签：iphone, ios, uitableview, drawing, drawrect

我写了如下的drawRect。

```
-(void)drawRect:(CGRect)rect
{
    [super drawRect:rect];
    CGContextRef cxt = UIGraphicsGetCurrentContext();
    CGContextSetLineWidth(cxt, 2.0);
    CGContextSetStrokeColorWithColor(cxt, [UIColor redColor].CGColor);
    CGContextMoveToPoint(cxt, 250.0 , 0.0);
    CGContextAddLineToPoint(cxt, 250.0, 50.0);
   CGContextStrokePath(cxt);
} 
```

它画了红线。但是当我将背景视图设置为单元格线时消失了。我已将视图设置如下。

```
UIView *view = [[UIView alloc] initWithFrame:cell.frame];
        view.backgroundColor = [UIColor grayColor];
    cell.backgroundView = view; 
```

问题是什么？背景视图如何隐藏线条？请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:48:18.377

我猜你在一个`UITableViewCell`？

您不应该覆盖`drawRect`单元格本身。而是将您的绘图代码放在 custom或层次结构`backgroundView`中的自定义视图中。`contentView`（取决于您计划的结果，可能 backgroundView 对您来说是正确的）

这条线消失了，因为`backgroundView`它是 TableViewCell 的子视图，所以它位于单元格本身的顶部。（你可以看到这个，如果你使用`[UIColor colorWithWhite:0.0 alpha:0.5]`你的 backgroundView 的 backgroundColor。） UITableViewCell 上有很多视图，它看起来有点像这样：

```
UITableViewCell
  > BackgroundView
  > (EditControl) 
  > ContentView
  > (AccessoryView) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:53:18.770

同意 jaydee3，你不应该覆盖 UITableViewCell 的 drawRect，而是让你的自定义视图类从 UIView 扩展，在那里扩展 drawRect 并在那里做所有的框架和着色的事情，然后将该视图的一个实例设置为你的单元格背景视图，它更好方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T11:04:08.120

当您已经绘制了背景时，您无法再次为该单元格设置背景颜色或图像。它覆盖在您绘制的内容上。

# php - htaccess 使用参数从 asp 重定向到 php

> ID：16188657
> 
> 赞同：2
> 
> 时间：2013-04-24T09:42:44.397
> 
> 标签：php, .htaccess

我必须将我所有的 asp 页面重定向到用 PHP 开发的新网站。

我有我的asp页面，
`abc.asp?id=82`

需要重定向到哪个
`siteurl/index.php/abc`

任何人都可以在 HTAccess 中帮助我吗？

我试过了，
`Redirect 301 /abc.asp?id=82 siteurl/index.php/abc`

`rewriterule ^/abc.asp?id=82$ siteurl/index.php/abc[R=301,L]`

但这不起作用并给我一个 404 错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T09:52:23.473

您无法匹配 a`Redirect`或中的查询字符串`RewriteRule`。目前尚不清楚您要在这里完成的范围。`id=82`重要吗？`abc`意思是“任何只是字母的东西”吗？是`siteurl`目录还是域名？如果严格来说这是您尝试过的，那么严格来说这就是它的工作方式：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} ^id=82($|&)
RewriteRule ^/?abc.asp$ siteurl/index.php/abc? [L,R=301] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T09:52:18.723

你犯了两个主要错误：

1.  重写规则仅匹配 URI 部分，不匹配查询字符串
2.  .htaccess 中的重写规则与前导斜杠不匹配。

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{QUERY_STRING} ^id=82(&|$) [NC]
RewriteRule ^(abc)\.asp$ http://domain.com/index.php/$1 [R=302,L,NC] 
```

一旦您验证它正在工作，将 302（临时重定向）替换为 301（永久重定向）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T09:52:49.863

只需使用

```
RewriteRule ^abc.asp$ siteurl/index.php/abc [R=301,QSA,L] 
```

那应该可以完成工作..`QSA`如果这就是您对标题的意思，那么使用该标志也将转发任何​​ GET 参数。

# c++ - 从不可排序的向量中删除重复项

> ID：16188661
> 
> 赞同：5
> 
> 时间：2013-04-24T09:42:56.627
> 
> 标签：c++, duplicates, stdvector

我正在寻找一种从向量中删除重复项的方法（我们称他为 theGreatVector :D）。我不能使用 std::sort 后跟 std::unique 因为没有办法对我的对象进行排序。

theGreatVector包含一些`vector<Item*>`(smallVectors)

我得到了 == 的重载，`vector<Item*>`所以我可以使用它

我可以在 O(n²) 中创建一些东西，但我需要时间效率（theGreatVector.size() 可能是 10⁵ 或 10⁶）

现在我得到的是类似的东西（只有当 smallOne 不在我的向量中时，我才会填充我的向量）：

```
for(i=0;i<size;i++)
{
  vector<Item*>smallOne = FindFacets(i)
  if(smallOne doesnt belong to GreatOne) // this line already in O(n) :/
  {
     theGreatOne.push_back(smallOne);
  }
} 
```

如果即使在 nlog(n) + n 或任何低于 n² 的情况下也有办法做到这一点，那就太好了！

非常感谢

阿兹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:51:45.020

您始终可以将`std::tie`每个数据成员放入一个`std::tuple`并使用字典排序来对指向您的大数据结构的指针向量进行排序。然后，您可以`std::unique`在复制输出之前对该数据结构进行操作。通过一个小的修改，您还可以通过直接对大`Item`向量进行排序来删除重复的内容。

```
#include <tuple>
#include <memory>
#include <vector>

// tuples have builtin lexicographic ordering, 
// I'm assuming all your Item's data members also have operator<
bool operator<(Item const& lhs, Item const& rhs)
{
    return std::tie(lhs.first_data, /*...*/ lhs.last_data) < std::tie(rhs.first_data, /*...*/ rhs.last_Data);
}

int main()
{
   // In the Beginning, there was some data
   std::vector<Item> vec;
   // fill it

   // init helper vector with addresses of vec, complexity O(N)
   std::vector<Item*> pvec; 
   pvec.reserve(vec.size());
   std::transform(std::begin(vec), std::end(vec), std::back_inserter(pvec), std::addressof<Item>);

   // sort to put duplicates in adjecent positions, complexity O(N log N) 
   std::sort(std::begin(pvec), std::end(pvec), [](Item const* lhs, Item const* rhs){
       return *lhs < *rhs; // delegates to operator< for Item
   });       

   // remove duplicates, complexity O(N)
   auto it = std::unique(std::begin(pvec), std::end(pvec), [](Item const* lhs, Item const* rhs){
       return *lhs == *rhs; // assumes Item has operator==, if not use std::tuple::operator==
   });
   pvec.erase(it, std::end(pvec));

   // copy result, complexity O(N)
   std::vector<Item> result;
   result.reserve(pvec.size());
   std::transform(std::begin(pvec), std::end(pvec), std::back_inserter(result), [](Item const* pelem){
       return *pelem;
   });

   // And it was good, and done in O(N log N) complexity
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:52:45.753

看看无序集： [http](http://www.cplusplus.com/reference/unordered_set/unordered_set/) ://www.cplusplus.com/reference/unordered_set/unordered_set/ 它似乎做你想做的事。单个元素的插入平均在 O(1) 中完成，在最坏的情况下为 O(n)，只需要提供相等运算符。

# html - 在 ul 标签中定义 div 的 lastchild

> ID：16188663
> 
> 赞同：1
> 
> 时间：2013-04-24T09:43:05.717
> 
> 标签：html, css

我的结构如下所示：

```
<div style="">                                                                                       
<ul>      
  <h1>Some text</h1>
  <div class="border">
     <li><a href="#">Some text</a></li>
  </div>
</ul>

<ul>      
  <h1>Some text</h1>
  <div class="border">
     <li><a href="#">Some text</a></li>
  </div>
</ul>
</div> 
```

我想选择 div.border:last-child 但是当我写入我的 css 文件时

```
//css-file//
.border:last-child: solid 1px black;
//or//
div .border:last-child: solid 1px black;
//or//
div ul .border:last-child: solid 1px black; 
```

问题是我的伪类：last-child 被忽略了，所有带有边框类的 div 都被设置了样式，我只希望最后一个孩子得到边框。

这是一个例子：http: [//jsfiddle.net/H3uKp/](http://jsfiddle.net/H3uKp/)

我正在使用谷歌浏览器

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T09:46:22.857

您的标记不正确，一个`ul`元素不能包含除 之外的任何其他子元素`li`，您可以这样做

```
<ul>
   <li></li>
   <li><div></div></li>
</ul> 
```

而不是使用

```
ul li:last-of-type {
   border: /* Whatever */ ;
} 
```

如果你想定位 div 而不是使用

```
ul li:last-of-type div {
   border: /* Whatever */ ;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:56:49.907

实际上这样做的另一种方式就是这样

```
<div style="">                                                                                       
<ul>      
  <h1>Some text</h1>
     <li><a href="#">Some text</a></li>
    <h1>Some text</h1>
     <li><a href="#">Some text</a></li>
</ul> 
```

然后只需添加样式

```
 li {
    border: 1px solid black;
}
    li:last-child {
        border: none;
    } 
```

在 jsFiddle 中对此进行了测试，它工作得很好。

# pattern-matching - 使用 DTW 设置处理 MFFC 中的异常值

> ID：16188667
> 
> 赞同：0
> 
> 时间：2013-04-24T09:43:18.103
> 
> 标签：pattern-matching, speech-recognition, mfcc

我有一个小型命令识别系统，用户首先记录他的命令，然后系统尝试识别它们。前端的特征向量是 MFCC 的系数。后端使用 DTW 进行识别以对齐这些特征向量并输出分数（ 0 -> 命令相等）。此设置的问题在于将命令（用户记录的命令）与其他单词区分开来。选择最大分数作为识别命令的阈值不会产生好的结果。我查找了 LDA 和 PCA，目的是将记录的特征投影到不同的特征空间，在那里它们可以更容易分离。每个记录的命令都是一个类，它具有来自与该命令的帧相关联的前端的样本特征向量。由此我计算了 LDA 所需的变换，并将变换应用于每组生成的 MFCC 系数。这并没有让我区分记录的命令和未记录的命令。

我的问题是：

*   应用 LDA 的方法是错误的吗？
*   还有其他更适合我的设置的方法（MFCC + DTW）吗？

非常感谢任何帮助或指导。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T14:32:18.010

> 此设置的问题在于区分未记录的命令。

您可能想要更好地表达您想要将您正在寻找的关键字与所有其他可能的单词分开。目前尚不清楚“未记录”是什么意思

> 应用 LDA 的方法是错误的吗？

没有错，没有意义。PCA 优化了不同的特性，但绝不可能改善分离。

> 选择最大分数作为识别命令的阈值不会产生好的结果。

这种方法不是最好的方法，但它应该工作得相对好。多年来，它被证明了。您可能只是在它的实现或测试中犯了一个错误，或者还有其他一些错误。我建议你重新审视它。

您唯一需要知道的是阈值必须取决于模板关键字。所以对于不同的模板关键字阈值必须不同。单一的阈值是行不通的。

# django - 向查询集添加计数

> ID：16188668
> 
> 赞同：0
> 
> 时间：2013-04-24T09:43:32.660
> 
> 标签：django, django-models

我有两个模型。

```
class Category(models.Model):
    name = models.CharField()

   @property
   def element_count()
      return Element.objects.filter(name=self.name).count()

class Element(models.Model):
   name = models.CharField()
   categories = models.ManyToManyField(Category) 
```

我想计算与该类别相关的每个元素的数量。此功能适用于模板和视图，但有什么方法可以直接进入查询集中？

如果这样做`Category.objects.all()`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T10:03:43.237

尝试这个：

```
>>> from django.db.models import Count
>>> q = Category.objects.all().annotate(element_count = Count('element'))

>>> print q[0].element_count
223 
```

文档：[https ://docs.djangoproject.com/en/dev/topics/db/aggregation/](https://docs.djangoproject.com/en/dev/topics/db/aggregation/)

# java - 错误的 ELF 类：ELFCLASS32（可能原因：架构字宽不匹配）

> ID：16188672
> 
> 赞同：11
> 
> 时间：2013-04-24T09:43:54.080
> 
> 标签：java, linux, exception, ubuntu, cardreader

我有这个奇怪的异常说错误的 ELF 类，但包装器设置正确。

使用此 SDK 从比利时身份证发行商官方网站读取比利时身份证：http://eid.belgium.be/en/binaries/beid-sdk-3.5.3-ubuntu-9.10-i686-6193_tcm147-94066_tcm406-114986 [。 tgz](http://eid.belgium.be/en/binaries/beid-sdk-3.5.3-ubuntu-9.10-i686-6193_tcm147-94066_tcm406-114986.tgz)

```
$ uname -a # Using NetBeans IDE 7.3 in Ubuntu 12.10 64-bit
Linux sun-M14xR2 3.5.0-25-generic #39-Ubuntu SMP Mon Feb 25 18:26:58 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux
$ java -version
java version "1.7.0_15"
OpenJDK Runtime Environment (IcedTea7 2.3.7) (7u15-2.3.7-0ubuntu1~12.10.1)
OpenJDK 64-Bit Server VM (build 23.7-b01, mixed mode) 
```

代码：

```
package javaapplication1;

import java.lang.*;
import be.belgium.eid.*;

public class JavaApplication1 {
  //*****************************************************************************
  // Get the data and dump to the screen
  // Beware: The data coming from the cards is encoded in UTF8!
  //*****************************************************************************

  private static void getSISData(BEID_SISCard card) throws Exception {
    BEID_SisId sisId = card.getID();

    System.out.println();

    System.out.println("\tPeronal data:");
    System.out.println("\t-------------");
    System.out.println("\tName                 : " + sisId.getName());
    System.out.println("\tSurname              : " + sisId.getSurname());
    System.out.println("\tInitials             : " + sisId.getInitials());
    System.out.println("\tGender               : " + sisId.getGender());
    System.out.println("\tDateOfBirth          : " + sisId.getDateOfBirth());
    System.out.println("\tSocialSecurityNumber : " + sisId.getSocialSecurityNumber());

    System.out.println();

    System.out.println("\tCard data:");
    System.out.println("\t----------");
    System.out.println("\tLogicalNumber        : " + sisId.getLogicalNumber());
    System.out.println("\tDateOfIssue          : " + sisId.getDateOfIssue());
    System.out.println("\tValidityBeginDate    : " + sisId.getValidityBeginDate());
    System.out.println("\tValidityEndDate      : " + sisId.getValidityEndDate());
  }

  //*****************************************************************************
  // Get the data from a Belgian SIS card
  //*****************************************************************************
  private static void getSISCardData(BEID_ReaderContext readerContext) throws Exception {
    BEID_SISCard card = readerContext.getSISCard();
    getSISData(card);
  }

  //*****************************************************************************
  // Get the data and dump to the screen
  // Beware: The data coming from the cards is encoded in UTF8!
  //*****************************************************************************
  private static void getEIDData(BEID_EIDCard card) throws Exception {
    BEID_EId eid = card.getID();

    if (card.isTestCard()) {
      card.setAllowTestCard(true);
      System.out.println("");
      System.out.println("Warning: This is a test card.");
    }

    System.out.println("\tDocumentVersion    : " + eid.getDocumentVersion());
    System.out.println("\tDocumentType       : " + eid.getDocumentType());

    System.out.println();

    System.out.println("\tPeronal data:");
    System.out.println("\t-------------");
    System.out.println("\tFirstName          : " + eid.getFirstName());
    System.out.println("\tSurname            : " + eid.getSurname());
    System.out.println("\tGender             : " + eid.getGender());
    System.out.println("\tDateOfBirth        : " + eid.getDateOfBirth());
    System.out.println("\tLocationOfBirth    : " + eid.getLocationOfBirth());
    System.out.println("\tNobility           : " + eid.getNobility());
    System.out.println("\tNationality        : " + eid.getNationality());
    System.out.println("\tNationalNumber     : " + eid.getNationalNumber());
    System.out.println("\tSpecialOrganization: " + eid.getSpecialOrganization());
    System.out.println("\tMemberOfFamily     : " + eid.getMemberOfFamily());
    System.out.println("\tAddressVersion     : " + eid.getAddressVersion());
    System.out.println("\tStreet             : " + eid.getStreet());
    System.out.println("\tZipCode            : " + eid.getZipCode());
    System.out.println("\tMunicipality       : " + eid.getMunicipality());
    System.out.println("\tCountry            : " + eid.getCountry());
    System.out.println("\tSpecialStatus      : " + eid.getSpecialStatus());

    System.out.println("");

    System.out.println("\tCard data:");
    System.out.println("\t----------");
    System.out.println("\tLogicalNumber      : " + eid.getLogicalNumber());
    System.out.println("\tChipNumber         : " + eid.getChipNumber());
    System.out.println("\tValidityBeginDate  : " + eid.getValidityBeginDate());
    System.out.println("\tValidityEndDate    : " + eid.getValidityEndDate());
    System.out.println("\tIssuingMunicipality: " + eid.getIssuingMunicipality());
  }

  //*****************************************************************************
  // Get the data from a Belgian kids EID card
  //*****************************************************************************
  private static void getKidsCardData(BEID_ReaderContext readerContext) throws Exception {
    BEID_KidsCard card = readerContext.getKidsCard();
    getEIDData(card);
  }

  //*****************************************************************************
  // Get the data from a Belgian foreigner EID card
  //*****************************************************************************
  private static void getForeignerCardData(BEID_ReaderContext readerContext) throws Exception {
    BEID_ForeignerCard card = readerContext.getForeignerCard();
    getEIDData(card);
  }

  //*****************************************************************************
  // Get the data from a Belgian EID card
  //*****************************************************************************
  private static void getEidCardData(BEID_ReaderContext readerContext) throws Exception {
    BEID_EIDCard card = readerContext.getEIDCard();
    getEIDData(card);
  }

  //*****************************************************************************
  // get a string representation of the card type
  //*****************************************************************************
  private static String getCardTypeStr(BEID_ReaderContext readerContext) throws Exception {
    String strCardType = "UNKNOWN";
    BEID_CardType cardType = readerContext.getCardType();

    if (cardType == BEID_CardType.BEID_CARDTYPE_EID) {
      strCardType = "BEID_CARDTYPE_EID";
    } else if (cardType == BEID_CardType.BEID_CARDTYPE_KIDS) {
      strCardType = "BEID_CARDTYPE_KIDS";
    } else if (cardType == BEID_CardType.BEID_CARDTYPE_FOREIGNER) {
      strCardType = "BEID_CARDTYPE_FOREIGNER";
    } else if (cardType == BEID_CardType.BEID_CARDTYPE_SIS) {
      strCardType = "BEID_CARDTYPE_SIS";
    } else {
      strCardType = "BEID_CARDTYPE_UNKNOWN";
    }
    return strCardType;
  }

  //*****************************************************************************
  // Show the info of the card in the reader
  //*****************************************************************************
  private static void showCardInfo(String readerName) throws Exception {
    BEID_ReaderContext readerContext = BEID_ReaderSet.instance().getReaderByName(readerName);
    if (readerContext.isCardPresent()) {
      System.out.println("\tType               : " + getCardTypeStr(readerContext));

      BEID_CardType cardType = readerContext.getCardType();

      if (cardType == BEID_CardType.BEID_CARDTYPE_EID) {
        getEidCardData(readerContext);
      } else if (cardType == BEID_CardType.BEID_CARDTYPE_KIDS) {
        getKidsCardData(readerContext);
      } else if (cardType == BEID_CardType.BEID_CARDTYPE_FOREIGNER) {
        getForeignerCardData(readerContext);
      } else if (cardType == BEID_CardType.BEID_CARDTYPE_SIS) {
        getSISCardData(readerContext);
      } else {
      }
    }
  }

  //*****************************************************************************
  // Show the reader info an get the data of the card if present
  //*****************************************************************************
  private static void showReaderCardInfo(String readerName) throws Exception {
    BEID_ReaderContext readerContext = BEID_ReaderSet.instance().getReaderByName(readerName);

    System.out.println("Reader: " + readerName);
    System.out.println("\tCard present: " + (readerContext.isCardPresent() ? "yes" : "no"));

    showCardInfo(readerName);

    System.out.println("");
  }

  //*****************************************************************************
  // scan all the card readers and if a card is present, show the content of the
  // card.
  //*****************************************************************************
  private static void scanReaders() throws Exception {
    long nrReaders = BEID_ReaderSet.instance().readerCount();
    System.out.println("Nr of card readers detected: " + nrReaders);

    for (int readerIdx = 0; readerIdx < nrReaders; readerIdx++) {
      String readerName = BEID_ReaderSet.instance().getReaderName(readerIdx);
      showReaderCardInfo(readerName);
    }
  }

  //*****************************************************************************
  // Main entry point
  //*****************************************************************************
  public static void main(String argv[]) {
    System.out.println("[Info]  eID SDK sample program: read_eid");

    String osName = System.getProperty("os.name");

    if (-1 != osName.indexOf("Windows")) {
      System.out.println("[Info]  Windows system!!");
      System.loadLibrary("beid35libJava_Wrapper");
    } else {
      System.loadLibrary("beidlibJava_Wrapper");
    }

    try {
      BEID_ReaderSet.initSDK();
      scanReaders();
    } catch (BEID_Exception e) {
      System.out.println("[Catch] BEID_Exception:" + e.GetError());
    } catch (Exception e) {
      System.out.println("[Catch] Exception:" + e.getMessage());
    }

    try {
      BEID_ReaderSet.releaseSDK();
    } catch (BEID_Exception e) {
      System.out.println("[Catch] BEID_Exception:" + e.GetError());
    } catch (Exception e) {
      System.out.println("[Catch] Exception:" + e.getMessage());
    }
  }
} 
```

输出：

```
[Info]  eID SDK sample program: read_eid
Exception in thread "main" java.lang.UnsatisfiedLinkError: /home/sun/Downloads/beidsdk/beidlib/Java/unsigned/libbeidlibJava_Wrapper.so.3.5.3: /home/sun/Downloads/beidsdk/beidlib/Java/unsigned/libbeidlibJava_Wrapper.so.3.5.3: wrong ELF class: ELFCLASS32 (Possible cause: architecture word width mismatch)
    at java.lang.ClassLoader$NativeLibrary.load(Native Method)
    at java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1750)
    at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1675)
    at java.lang.Runtime.loadLibrary0(Runtime.java:840)
    at java.lang.System.loadLibrary(System.java:1047)
    at javaapplication1.JavaApplication1.main(JavaApplication1.java:269)
Java Result: 1
BUILD SUCCESSFUL (total time: 0 seconds) 
```

**编辑：**

[https://code.google.com/p/eid-viewer/](https://code.google.com/p/eid-viewer/) [https://code.google.com/p/eid-mw/](https://code.google.com/p/eid-mw/)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-24T09:52:19.560

它不起作用，因为您使用的是 64 位版本的 Java，并且您尝试使用的 SDK 包含 32 位本机库 ( `libbeidlibJava_Wrapper.so.3.5.3`)。64 位 JRE 无法加载 32 位本机库。

您需要使用 32 位版本的 Java，或者找到具有 64 位本机库的 SDK 版本。

# c - 对 udp 数据包的回复被阻止

> ID：16188674
> 
> 赞同：0
> 
> 时间：2013-04-24T09:44:02.903
> 
> 标签：c, udp, firewall

我正在编写一个 C 程序来搜索本地网络上的 smb 共享并挂载它们。为了获取找到的 smb 服务器的主机名，我向服务器发送了一个 udp nbns 数据包。数据包正确，服务器回复。我正在使用wireshark来检查这个。我将我发送的数据包与 nbstat 发送的数据包进行了比较，我还比较了服务器返回的数据包。除了 id 和校验和，它们是相同的。

当我使用 nbstat 发出请求时，回复数据包被正确接收，但是对我自己的数据包的回复可能被防火墙阻止了。在收到服务器的回复后，客户端机器向服务器发送一条 icmp“Destination unreachable (Port unreachable)”消息。我怀疑我的防火墙正在发送它。

这是wireshark的输出

No. Time Source Destination Protocol Length Info
12 29.870065 192.168.1.245 192.168.1.21 NBNS 92 名称查询 NBSTAT *<00><00.......
13 29.870494 192.168.1.21 192.168.1.245 NBNS 2593 名称查询响应
259STAT 14.70 192.168.1.245 192.168.1.21 ICMP 281 目的地不可达（端口不可达）

我应该怎么做才能让回复通过？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:07:21.773

您的程序是否在侦听 UDP 端口 137 以接收服务器回复？如果不是，这解释了为什么您的主机发送 ICMP 数据包端口不可达。

如果您侦听端口 137，请在发送 NBNS 查询时尝试将源端口配置为端口 137。因此防火墙现在应该允许数据包到该端口。

# c# - 使用 Soap 扩展的 Web 服务同时调用两次

> ID：16188675
> 
> 赞同：0
> 
> 时间：2013-04-24T09:44:04.813
> 
> 标签：c#, web-services

我有两个 Web 服务*GetStreets*和*GetCities*，它们同时使用另一个称为*Location*的 Web 服务（不要问我为什么这样做，我只是必须这样做）。问题在于这些 Web 服务在我的 .net 应用程序中几乎同时被调用。

我的问题是，我怎样才能让其中一个等到 Soap Extension for Location 中发生的写入完成后再写入，或者如何将文件重命名为写入位置，以便两个服务写入每次都不一样的文件。

创建文件名的 GetInitializer 方法：

```
 public override object GetInitializer(Type WebServiceType)
    {
        string filename = string.Format("{0}_{1}_{2}.log", WebServiceType.FullName, methodName, DateTime.Now.ToString("yyyyMMdd"));
        return ConfigurationManager.AppSettings["SoapLogPath"] + "\\" + filename;
    } 
```

PS：我已经使用 using 和 lock：

```
 public override void ProcessMessage(SoapMessage message)
    {
        lock (thisLock)
        {
            switch (message.Stage)
            {
                case SoapMessageStage.BeforeSerialize:
                    //WriteOutput(message);
                    break;
                case SoapMessageStage.AfterSerialize:
                    WriteOutput(message);
                    break;
                case SoapMessageStage.BeforeDeserialize:
                    WriteInput(message);
                    break;
                case SoapMessageStage.AfterDeserialize:
                    break;
                default:
                    break;
            }
        }
    }

    /// <summary>
    /// The method writes away the input message
    /// </summary>
    /// <param name="message">The soap message that will be logged</param>
    public void WriteOutput(SoapMessage message)
    {
        newStream.Position = 0;
        using(FileStream fs = new FileStream(filename, FileMode.Append, FileAccess.Write))
        {
            using(StreamWriter w = new StreamWriter(fs))
            {
                string soapString = (message is SoapServerMessage) ? Environment.NewLine + "Output SoapResponse" : "Output SoapRequest";
                w.WriteLine("-----" + soapString + " at " + DateTime.Now);
                Copy(newStream, fs);
                newStream.Position = 0;
                Copy(newStream, oldStream);
            }
        }
        //Force clean up
        GC.Collect();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-23T11:56:32.207

应用锁是一步，但我也提供了读取权限： using(FileStream fs = new FileStream(filename, FileMode.Append, FileAccess.ReadWrite))

# c# - 在 asp.mvc 3 视图中样式化 html 表的 td/tr 显示元素

> ID：16188690
> 
> 赞同：0
> 
> 时间：2013-04-24T09:44:48.207
> 
> 标签：c#, html, css, asp.net-mvc-3

我这样做是为了从 ASP.NET MVC 3 项目中查看。我在运行时创建表，因为行、列和与之关联的数据都记录在数据库中，并且对于不同的表会有所不同。在下图中，您可以了解我需要更改的基本概念：

![在此处输入图像描述](https://i.stack.imgur.com/hqKpr.png)

表格末尾之后继续的边界线是`<div>`标签的边界，其高度和宽度与为表格定义的边界线相同。

但是有几个问题我想解决：

*   桌子的宽度变得比想象的要大
*   即使有足够的空间，一些元素也需要两行（第一行在`alabala`上面`yes`，下一个`<td>`blabla 与文本框在同一行，这实际上是我想要的。
*   也许这总结了我上面指出的东西 - 我想表格保持它的大小，无论每行有多少元素，我希望文本框之前的文本与文本框本身出现在同一行。

我在 HTML 和 CSS 方面的经验都很差，所以不知道什么是可能的，什么是不可能的，所以如果不能准确地实现输出，我想随时为漂亮的表格视图提出一个可接受的解决方案。

附言

这就是我实际创建的方式`<td>..</td>`：

```
sb.Append("<td>" + innerArray[a][0].QuestionText +
          "<input type='textbox' style='border: 1px solid red' value=" +
          innerArray[a][0].FieldValue + "></td>"); 
```

在哪里 ：`System.Text.StringBuilder sb = new System.Text.StringBuilder();`

# html - xml元素中文本的HTML格式

> ID：16188691
> 
> 赞同：0
> 
> 时间：2013-04-24T09:44:48.547
> 
> 标签：html, xml, xslt

我目前正在使用 XSLT 样式表格式化我的 xml。它看起来有点像这样

```
<xsl:for-each select="Talents">
    <div style="font-family:Calibri, Arial; font-size:5pt; cursor: default;">
<xsl:if test="Talent != ''">
    <table border="0" width="650">
        <tr>
            <td style="padding-left: 15px;" bgcolor="#A0A0A0" width="80%">

            <b id="toggle"><xsl:value-of select="Talent"/></b></td>

            <td bgcolor="#A0A0A0" width="20%" align="center">
                <xsl:value-of select="TCost"/>
                <xsl:text>  -  </xsl:text>
                <xsl:value-of select="Type"/>
            </td>
         </tr>
    </table>
// etc 
```

所以将 XML 元素格式化成一个漂亮的结构化表格是相当容易的。我想知道如果可能的话，您如何格式化这些元素中的实际文本。

例如，您不知道元素 Tyep 中的内容，但您可以在其中包含 html elemtns，以便如果您看到**围绕文本使其变粗等？**

 **所以我的问题是你能用 xml 元素来格式化文本吗？

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="style.xsl" type="text/xsl"?>
<Collection>
     <Talents>
     <Talent>Smiling</Talent>
     <TCost>1</TCost>
     <Type>ANY king of smile will do but the fake ones are the bed</Type>
     </Talents> 
```

我正在看的是是否有可能让html格式像粗体下划线不同的文本颜色？如果是这样，我该如何执行此操作，以便当我打开我的 xml 时，它使用我的 style.xsl 进行样式设置，然后 xml 元素内的文本也具有 html 格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T12:10:59.147

我试图创建一个工作示例，希望能回答您的问题：

要复制带有 xlm 或 html 标记的内容，您必须将“身份转换模板”复制到您的 xslt 文件中。

```
<xsl:template match="@*|node()">
    <xsl:copy>
        <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
</xsl:template> 
```

并从`xsl:value-of`变为`apply-templates`。（只是你想拥有整个子树的副本）。

xsl 将如下所示：

```
<xsl:template match="/*">
    <xsl:apply-templates select="Collection" />
</xsl:template>
<xsl:template match="Collection">
    <xsl:for-each select="Talents">
        <div style="font-family:Calibri, Arial; font-size:5pt; cursor: default;">
            <xsl:if test="Talent != ''">
                <table border="0" width="650">
                    <tr>
                        <td style="padding-left: 15px;" bgcolor="#A0A0A0" width="80%">

                            <b id="toggle">
                                <xsl:value-of select="Talent"/>
                            </b>
                        </td>

                        <td bgcolor="#A0A0A0" width="20%" align="center">
                            <xsl:value-of select="TCost"/>
                            <xsl:text>  -  </xsl:text>
                            <xsl:apply-templates select="Type/node()"/>
                        </td>
                    </tr>
                </table>
            </xsl:if>
        </div>
    </xsl:for-each>
</xsl:template>

<xsl:template match="@*|node()">
    <xsl:copy>
        <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
</xsl:template> 
```

现在您可以将 html 添加到 Type 标记。使用此输入：

```
<?xml version="1.0" encoding="UTF-8"?>
<xml>
    <Collection>
        <Talents>
            <Talent>Smiling</Talent>
            <TCost>1</TCost>
            <Type>ANY <b>king</b> of smile will do but the fake ones are the bed</Type>
        </Talents>
    </Collection>
<xml> 
```

它将生成以下输出：

```
<div style="font-family: Calibri, Arial; font-size: 5pt; cursor: default;">

        <table border="0" width="650">
            <tr>
                <td style="padding-left: 15px;" bgcolor="#A0A0A0" width="80%">
                    <b id="toggle">Smiling</b>
                </td>
                <td bgcolor="#A0A0A0" width="20%" align="center">
                    1 - ANY <b>king</b> of smile will do but the fake ones are the bed
                </td>
            </tr>
        </table>
    </div> 
```**

# c++ - 使用 if(true) 子句缩小资源管理器对象的范围？

> ID：16188693
> 
> 赞同：1
> 
> 时间：2013-04-24T09:44:55.480
> 
> 标签：c++, visual-c++, scope, raii

我有一个位于多线程应用程序中的资源存储对象。为了（希望）确保线程安全，我每次想要访问资源或插入新资源时都会锁定一个互斥锁。例如，插入一个新资源：

```
void ResourceManager::insertResource(const std::string& id)
{
    // create the object with such ID
    Resource res = Resource(id);

    // ... more code on res

    // lock the mutex to insert the resource
    std::lock_guard<std::mutex> guard(mResourcesMutex);

    // insert the resource in a STL container
    mResources.insert(ResourceContainer::value_type(id, res));

    // ... more code that does not require the mutex lock
} 
```

我希望 lock_guard 的范围最小，以便尽快调用它的析构函数，并且其他线程可以访问资源。特别是，我想在 mResources.insert(...) 语句之后解锁互斥锁。

我考虑过使用简单的 if 语句来确定 lock_guard 的范围：

```
 if(true)
    {
        std::lock_guard<std::mutex> guard(mResourceMutex);
        mResources.insert(ResourceContainer::value_type(id, res);
    } 
```

但我不知道它是否有效。我发现很难检查这是否正确地确定了 lock_guard 的范围，或者另一方面，编译器是否只是认为我疯了，并且它优化了去掉 if 语句的代码。

我的问题是：

*   **这管用吗？**
*   **这值得么？我会注意到性能下降吗？**
*   **有没有更好的选择？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T09:47:35.250

*   是的，它有效。一旦您退出作用域，该作用域的本地对象将立即被销毁。

*   是的，这是值得的，尤其是在像您的示例这样的情况下（减少对象的生命周期以确保尽早释放资源 - 但您也可以使用它来缩小临时标识符的范围并使其在此之后无法访问，即使这种用法比您的示例更有趣）。

*   是的，有一个（稍微）更好的选择：只使用没有`if`子句的大括号：

.

```
{
    std::lock_guard<std::mutex> guard(mResourceMutex);
    mResources.insert(ResourceContainer::value_type(id, res);
} 
```

适当的编译器将能够优化生成的代码，`if (true)`因此生成的代码将是相同的，但从样式的角度来看，单独的大括号要干净得多。此外，单独的大括号是一个众所周知且立即可识别的习语，而你`if (true)`的不是并且让读者想知道（即使是短暂的）“ if*的目的是什么？哦等等，对，这是通常的范围限制习语。 ……* ”。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-24T09:48:12.393

你为什么用`if(true)`？你可以简单地使用`block scope`

```
{
    std::lock_guard<std::mutex> guard(mResourceMutex);
    mResources.insert(ResourceContainer::value_type(id, res);
} 
```

# python - 如何在 Python 中返回最大范围内的数字

> ID：16188699
> 
> 赞同：0
> 
> 时间：2013-04-24T09:45:04.797
> 
> 标签：python

### 这是我在python中的公式

实现数学函数 f(x) = -5 x5 + 69 x2 - 47

### 定义数学函数

```
def math_formula(x):

# This is the formula
    math_formula = -5 * (x**5) + 69 *(x**2) - 47
    return math_formula 
```

### 打印我们范围内的值

```
for value in range (0,4):
    print 'For f(',(value),')', 'the number is:' , math_formula(value)

print ''    
print ('The the maximum of these four numbers is:'), max(math_formula(value)) 
```

该函数返回 f(0) 到 f(3) 的所有数字。

有人可以回答以下问题：为什么此打印不返回最大数量？

```
print ('The the maximum of these four numbers is:'), max(math_formula(value)) 
```

它返回范围内较大的负数。我不知道如何返回最大正数。如何返回最大正数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T09:48:20.280

```
max(math_formula(value) for value in range(0, 4)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T09:47:52.450

`max()`需要处理一个序列。您需要将所有计算的列表传递给它。试试这个变化：

```
results = []
for value in range(0, 4):
    print 'For f(',(value),')', 'the number is:' , math_formula(value)
    results.append(math_formula(value)) # add the value to the list

print ''
print 'The maximum of these four numbers is:', max(results) 
```

您还可以简化您的`math_formula`方法：

```
def math_formula(x):
    return -5 * (x**5) + 69 *(x**2) - 47 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T09:49:29.660

尝试：

```
max((math_formula(value) for value in xrange(0,4))) 
```

* * *

**编辑**

对于您的口译员：

```
max([math_formula(value) for value in range(0,4)]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-21T07:22:08.370

我们也可以使用它 `max(a[i:i+k])` 来获得一个范围内的最大值

# python - 根据长度将值附加到字典？

> ID：16188704
> 
> 赞同：0
> 
> 时间：2013-04-24T09:45:14.837
> 
> 标签：python

我有一个列表列表`uarfcnrssi2`和一个列表字典`band2`。然后，我有某些条件将 uarfcnrssi2 中的值添加到 band2，如下所示：

```
uarfcnrssi2=[[10564, 20, 1],[10637, 26, 1], [10662, 32, 1], [10712, 26, 1], [10837, 15, 1], [10837, 17, 1],
 [2, 10, 13], [3, 18, 13], [44, 12, 13], [10564, 27, 13], [49, 15, 13], [64, 20, 13], [66, 19, 13], [976, 27, 13], [981, 21, 13], [982, 20, 13], [985, 13, 13], [988, 13, 13], [788, 12, 11]]      

band2= {'channel1': 10564, 'channel2': 10589, 'channel3': 10612, 'channel4': 10637,'channel5': 10662, 'channel6': 10687,
'channel7': 10712, 'channel8': 10737, 'channel9': 10762, 'channel10': 10787,'channel11': 10812, 'channel12': 10837, }
var1 = 5
var2 = -190
band2 = {k: [v, v/var1, v/var1+var2] for k, v in band2.iteritems() 
```

代码：

```
for k, v in band2.items():
    for i in uarfcnrssi2:
        if v[0] == i[0] and i[2] == 1 and len(v)<=3:
            band2[k].append(i[1]) 
```

我现在有一本这样的字典：

```
{'channel11': [10812, 2162, 1972], 'channel10': [10787, 2157, 1967], 'channel3': [10612, 2122, 1932], 'channel2': [10589, 2117, 1927], 'channel1': [10564, 2112, 1922, 20], 'channel7': [10712, 2142, 1952, 26], 'channel6': [10687, 2137, 1947], 'channel5': [10662, 2132, 1942, 32], 'channel4': [10637, 2127, 1937, 26], 'channel9': [10762, 2152, 1962], 'channel8': [10737, 2147, 1957], 'channel12': [10837, 2167, 1977, 15]} 
```

但是，对于我没有附加第 4 个项目的列表，我想`0`附加到每个项目的末尾，我没有问题再次循环执行此操作，但是有没有办法编辑我上面的代码来做到这一点？

编辑：我这样做的方式是我想改进的

```
for k, v in band2.items():
    for i in uarfcnrssi2:
        if v[0] == i[0] and i[2] == 1 and len(v)<=3:
            band2[k].append(i[1])

for k, v in band2.items():
    if len(v) <=3:
        band2[k].append(0)
print band2 
```

最终输出：

```
band2 = {'channel11': [10812, 2162, 1972, 0], 'channel10': [10787, 2157, 1967, 0], 'channel3': [10612, 2122, 1932, 0], 'channel2': [10589, 2117, 1927, 0], 'channel1': [10564, 2112, 1922, 20], 'channel7': [10712, 2142, 1952, 26], 'channel6': [10687, 2137, 1947, 0], 'channel5': [10662, 2132, 1942, 32], 'channel4': [10637, 2127, 1937, 26], 'channel9': [10762, 2152, 1962, 0], 'channel8': [10737, 2147, 1957, 0], 'channel12': [10837, 2167, 1977, 15]} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:08:42.553

OK I understand the issue now. I think you can combine your two loops, like this:

```
for v in band2.values():
    for i1, i2, i3 in uarfcnrssi2:
        if v[0] == i0 and i2 == 1 and len(v) <= 3:
            v.append(i1)
    if len(v) <= 3: # never matched any list values, so add zero instead
        v.append(0) 
```

Note that the outer loop is over the `values` of the dictionary, since you were only using the key for indexing (which isn't necessary, since you already have a reference to the value). I've also made the inner loop unpack the three values into individual variables. I suggest giving them meaningful names (I've only used `i0`, `i1` and `i2` because I don't know what the values mean).

# vb.net - 无法将“system.int32”类型的对象转换为“system.int32[]”类型

> ID：16188705
> 
> 赞同：1
> 
> 时间：2013-04-24T09:45:18.520
> 
> 标签：vb.net, type-conversion

我在第四行得到上述错误。我如何（假设我必须）将值转换为双方都具有相同的数据类型？

```
dsOrderList = objResult.ds
        For Each drow As DataRow In dsOrderList.Tables(0).Rows
            Dim objOrder As New Orders
            objOrder.OrderID = drow("OrderID")
            objOrder.CustomerID = drow("CustomerID")
            objOrder.EmployeeID = drow("EmployeeID") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:48:05.433

您需要将 dataRow 中的值转换为 int、string 等值，然后再将其分配给另一个变量，其类型可能是 int

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T10:22:14.877

我认为您将一个值串入整数数组，必须有一个数组或提供数组元素

```
dsOrderList = objResult.ds
    For Each drow As DataRow In dsOrderList.Tables(0).Rows
        Dim objOrder As New Orders
        objOrder.OrderID(0) = drow("OrderID") '0 is Element of Order ID
        objOrder.CustomerID = drow("CustomerID")
        objOrder.EmployeeID = drow("EmployeeID") 
```

或者

```
dsOrderList = objResult.ds
    For Each drow As DataRow In dsOrderList.Tables(0).Rows
        Dim objOrder As New Orders
        objOrder.OrderID =  {drow("OrderID")}
        objOrder.CustomerID = drow("CustomerID")
        objOrder.EmployeeID = drow("EmployeeID") 
```

> 更新

如果 objOrder.OrderID 的元素什么都不是，那么使用

```
objOrder.OrderID = new int() {drow{"OrderID"}) 
```

# javascript - 使用正则表达式 javascript 进行手机号码验证

> ID：16188709
> 
> 赞同：0
> 
> 时间：2013-04-24T09:45:35.847
> 
> 标签：javascript, regex

我想要格式为 +91（或任何其他国家/地区代码）-9999999999（10 位手机号码）的手机号码。

我试过`/^\+[0-9]{2,3}+[0-9]\d{10}`了，但它不起作用请帮助

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T09:53:35.183

简而言之，解决方案：

```
// should return an array with a single match representing the phone number in arr[0]
var arr = '+49-1234567890'.match(/^\+\d{1,3}-\d{9,10}$/); 
// should return null
var nullVal = 'invalid entry'.match(/^\+\d{1,3}-\d{9,10}$/); 
```

更长的解释：

*   `/`开始正则表达式
*   `^`尝试从头开始匹配
*   `\+`匹配一个+号
*   `\d{1,3}`匹配一个数字 1 到 3 次
*   `-`匹配破折号
*   `\d{9,10}`匹配 9 位或 10 位数字
*   `$`强制匹配仅在可以应用到字符串终止时才有效
*   `/`完成正则表达式

了解正则表达式的作用，可能会让您根据自己的需要对其进行修改

有时最好忽略您遇到的任何空格。`\s*`匹配 0 或 n 个空格。因此，为了更加宽容，您可以让用户输入类似`' + 49 - 1232345 '`

与此匹配的正则表达式将是`/^\s*\+\s*\d{1,3}\s*-\s*\d{9, 10}\s*$/`（只需用 填充可能的空间位置`\s*`）

除此之外：我强烈建议掌握正则表达式，因为它们在许多情况下都非常方便。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T09:50:45.600

如果您希望数字中出现破折号（您的格式显示），那么您的正则表达式中没有任何内容可以匹配它：正则表达式中的第二个加号是否意味着破折号？

```
^\+[0-9]{2,3}-[0-9]\d{10} 
```

另请注意：

1.  某些国家/地区代码是单个数字（例如，1 代表北美，7 代表俄罗斯），这些将不匹配
2.  我怀疑所有手机的本地部分总是 10 位数（例如，随着手机拥有量的增长，这在人口众多的国家是不够的）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-11-13T09:03:59.203

您可以简单地编写以下内容：

```
var pattern=/^(0|[+91]{3})?[7-9][0-9]{9}$/; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-24T06:10:51.810

使用遮罩功能

```
jQuery(function($){
  $("#phone").mask("999-999-9999",{placeholder:" "});   
}); 
```

看这里[http://office.microsoft.com/en-in/access-help/control-data-entry-formats-with-input-masks-HA010096452.aspx](http://office.microsoft.com/en-in/access-help/control-data-entry-formats-with-input-masks-HA010096452.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-03T09:27:08.250

对于移动验证，请尝试此

```
<html>
<head>
<title>Mobile number validation using regex</title>
<script type="text/javascript">
    function validate() {
        var mobile = document.getElementById("mobile").value;
        var pattern = /^[7-9][0-9]{9}$/;
        if (pattern.test(mobile)) {
            alert("Your mobile number : "+mobile);
            return true;
        }
        alert("It is not valid mobile number");
        return false;

    }
</script>

</head>
<body>
Enter Mobile No. :
<input type="text" name="mobile" id="mobile" />
<input type="submit" value="Check" onclick="validate();" />
</body>
</html> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-24T09:51:26.607

```
\+[0-9]{2,3}-[0-9]+ 
```

尝试这个。这匹配`+`开头的a，国家代码的两个或三个数字，后跟a，`-`后跟任意数量的数字

# c++ - 采访：添加两个以字符串形式给出的二进制数

> ID：16188710
> 
> 赞同：0
> 
> 时间：2013-04-24T09:45:36.260
> 
> 标签：c++, python, string, binary

在浏览[http://www.glassdoor.com/Interview/Facebook-Interview-Questions-E40772.htm](http://www.glassdoor.com/Interview/Facebook-Interview-Questions-E40772.htm)上的一些面试问题时，我遇到了以下问题：

> 给定二进制数的两个字符串表示形式（例如“1001”、“10”），编写一个函数，将它们相加并以字符串形式返回结果（例如“1011”）。

这是我开始为这个问题编写的一些 Python 代码（现在还不完整），但我不太确定这是否是最好的（甚至是正确的）方法。我还考虑过首先在 C++ 中实现相同的功能，但放弃了考虑字符串操作中增加的复杂性。

```
def add_binary(a,b):
    temp = ""
    carry = false
    //i from len(a) to 1 and j from len(b) to 1
    bit_sum = add_bit ((a[i],b[j])
    if (bit_sum == "10"):
            temp.append("0")
            carry = true
    elif carry:
            temp.append(add_bit("1",bit_sum))
    else:
            temp.append(bit_sum)

    return temp.reverse()

def add_bit(b1, b2):
    if b1 == '0':
            return b2
    elif b2 == '0':
            return b1
    elif (b1 = '1' and b2 =='1'):
            return "10"
    else return None

a = "1001"
b = "10"
add_binary(a,b) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T10:12:39.727

首先，如果字符串足够短（小于 64 位），我可能只是将它们转换为内部整数类型（`unsigned long long`），在那里进行加法，然后重新转换结果。二进制字符串和内部格式之间的转换非常非常简单。

否则，我可能会首先对它们进行归一化，以便它们具有最大长度的结果。就像是：

```
size_t size = std::max( lhs.size(), rhs.size() ) + 1;
lhs.insert( lhs.begin(), size - lhs.size(), '0' );
rhs.insert( rhs.begin(), size - rhs.size(), '0' ); 
```

我还将创建一个这种大小的结果字符串：

```
std::string results( size, '0' ); 
```

还有一个进位变量，初始化为'0'：

```
char carry = '0'; 
```

然后，我将使用反向迭代器，或者更可能只是一个索引（这将确保访问每个字符串的相同元素）循环三个字符串：

```
size_t current = size;
while ( current != 0 ) {
    -- current;
    //  ...
} 
```

在循环中，您实际上只有四种可能性：我只需计算 '1'（在`lhs[current]`和`rhs[current]`中 `carry`），然后对结果、设置 `results[current]`和`carry`适当地进行切换：

```
int onesCount = 0;
if ( carry == '1' ) {
    ++ onesCount;
}
if ( lhs[current] == '1' ) {
    ++ onesCount;
}
if ( rhs[current] == '1' ) {
    ++ onesCount;
}
swith ( onesCount ) {
case 0:
    carry = '0';
    results[current] = '0';
    break;

case 1:
    carry = '0';
    results[current] = '1';
    break;

case 2:
    carry = '1';
    results[current] = '0';
    break;

case 3:
    carry = '1';
    results[current] = '1';
    break;
} 
```

就个人而言，我认为这是最简单、最干净的解决方案，尽管有点冗长。或者，您可以将开关替换为以下内容：

```
results[current] = onesCount % 2 == 0 ? '0' : '1';
carry = onesCount < 2 ? '0' : '1'; 
```

最后，如果需要，您可以取消结果中的任何前导零（最多有一个），并且可以断言 `carry == '0'`（因为如果不是，我们已经搞砸了大小的计算）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T09:52:03.937

这里最困难的部分是我们需要从右到左处理字符串。我们可以通过以下方式做到这一点：

*   反转字符串（输入和输出）。
*   在递归调用中，在“返回”时处理这些位，即首先在“下一个位”上调用递归加法，然后再加“当前位”。
*   使用反向迭代器并从右到左构造结果。一个问题仍然是如何提前知道结果长度（所以你知道从哪里开始）。

当数字很大时，递归解决方案会出现问题，即堆栈可能会溢出。

反转字符串是最简单的解决方案，但不是最有效的解决方案。

第一个和第三个选项的组合是使用反向迭代器反向处理输入字符串，但以相反的顺序构造结果（因此您可以简单地附加位），然后反转结果。

这或多或少也是你的方法。实现循环计数`i`并`j`从字符串长度减 1（！）直到 0，因此这将以相反的顺序遍历输入字符串。如果`carry`设置为 true，则在下一次迭代中将位和加一。将 的位和表示`add_bit`为整数，而不是再次表示为字符串，因此可以添加进位。

[在 C++ 中，您可以使用rbegin()](http://en.cppreference.com/w/cpp/string/basic_string/rbegin)和[rend()](http://en.cppreference.com/w/cpp/string/basic_string/rend)以相反的顺序遍历任何序列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T09:49:23.010

在 Python 中，您可以使用 将字符串转换为整数`int`，这也提供了转换的基础：

```
num = '111'
print int(num, 2) 
```

打印 7.

将结果转换回二进制：

```
print "{:b}".format(4) 
```

打印 100

# eclipse - 关于构建项目存档的eclipse错误

> ID：16188718
> 
> 赞同：0
> 
> 时间：2013-04-24T09:45:54.887
> 
> 标签：eclipse, jakarta-ee, maven

我正在尝试通过 maven 设置一个空项目以使用 WELD CDI 和 JSF。一切都很好，直到我在尝试清理和重建时收到来自 eclipse 的奇怪错误消息：

![在此处输入图像描述](https://i.stack.imgur.com/Vxoze.png)

我不知道它试图找到哪个文件。它是 web.xml 还是任何其他描述符文件？任何人都知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:30:37.620

问题的根源是 jboss 工具插件，我不知道为什么。我的问题是通过从我的 eclipse Juno 中删除 Jboss 工具插件来解决的。

# windows-phone-7 - Windows Phone 7.0 应用仍然可以上传到 Windows 应用商店吗？

> ID：16188725
> 
> 赞同：0
> 
> 时间：2013-04-24T09:46:15.317
> 
> 标签：windows-phone-7, windows-phone

Windows Phone 7.0 应用程序是否仍可以上传到 Windows 应用商店，还是必须更新到 Windows Phone 7.5？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T06:05:54.467

是的，我认为它仍然支持。[在此处](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh184840%28v=vs.105%29.aspx)参考此链接

它表明可以提交 7.0 应用程序。

![在此处输入图像描述](https://i.stack.imgur.com/z7CEm.png)

# c# - 动画 RenderTransformOrigin

> ID：16188726
> 
> 赞同：3
> 
> 时间：2013-04-24T09:46:19.993
> 
> 标签：c#, wpf, xaml, animation

我想`RenderTransformOrigin`在 xaml 中进行修改`storyboard`。该值不得动画，立即更改也可以。以下代码不起作用：

```
<Storyboard x:Key="StoryboardFadeIn">
  <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransformOrigin).(Point.X)" Storyboard.TargetName="UserControl" To="0"/>
  <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransformOrigin).(Point.Y)" Storyboard.TargetName="UserControl" To="0"/>
</Storyboard> 
```

是否可以在动画中更改此属性（仅使用 xaml）？

错误代码：

```
The property "X" is not a DependencyProperty. To be used in markup, non-attached properties must be exposed on the target type with an accessible instance property "X". 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T12:04:21.053

我不确定您是否可以使用 动画点结构的`X`and ，但您应该能够使用 a动画`Y``DoubleAnimation``RenderTransformOrigin``PointAnimation`

例子：

```
<Storyboard x:Key="StoryboardFadeIn">
    <PointAnimation Storyboard.TargetProperty="(UIElement.RenderTransformOrigin)" Storyboard.TargetName="UserControl" To="0,0"/>
</Storyboard> 
```

# c# - 在这种情况下避免 fxcop 错误 CA1004

> ID：16188729
> 
> 赞同：0
> 
> 时间：2013-04-24T09:46:24.397
> 
> 标签：c#, warnings, fxcop

我有一个案例，它返回 T 类型的对象。我的代码如下所示。

```
public static T GetObjectsFromWebRequest<T>(string urlPath) where T : class
    {
        T modelObjects;
        try
        {

            //SaveServiceDataIntoTextFile(urlPath);
            WebRequest request = WebRequest.Create(urlPath);

            WebResponse ws = request.GetResponse();
            StreamReader responseStream = new StreamReader(ws.GetResponseStream());
            //Get the response of the webrequest into a string
            string response = responseStream.ReadToEnd();

            modelObjects = XMLSerializeDeserialize.ConvertXMLToModel<T>(response);
        }

        catch (Exception)
        {
            throw;
        }

        return modelObjects;
    } 
```

在这种情况下，我没有任何选择，但添加了一个默认参数，例如

```
public static T GetObjectsFromWebRequest<T>(string urlPath, T a = null) where T : class 
```

有没有其他方法可以解决此违规行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-02T15:08:40.580

正如[这里](https://stackoverflow.com/a/2967520/331281)所建议的，您可以使用一个`out`参数来传达您的结果：

```
public static void GetObjectsFromWebRequest<T>(string urlPath, out T objects) ... 
```

# javascript - 创建切换 data-* 属性 jQuery 函数

> ID：16188739
> 
> 赞同：0
> 
> 时间：2013-04-24T09:46:59.640
> 
> 标签：javascript, jquery

我正在开发一个新项目并使用“data-js”属性。我目前正在手动切换每个 data-js 属性，例如：

```
$(this).attr('data-js', $(this).attr('data-js') == 'unstar' ? 'star' : 'unstar') 
```

我有一个用于创建 jQuery 插件式扩展的“shell”，如下所示：

```
!function($) {
            $.fn.toggleData = function(options) {
                var settings = $.extend({
                    someEvent: function() {
                        alert('default')
                    }
                }, options)

                return this.each(function() {
                    settings.someEvent()
                })
            }
        }(jQuery) 
```

所以我基本上想要的是创建一个函数，它会给我以下内容，它可以在所有 data-js 属性中重用：

```
$('[data-js=unstar]').click(function(){
    $(this).toggleData('unstar', 'star')

}) 
```

关于如何做到这一点或更好的方法的任何想法！......非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:37:57.807

这是你追求的那种东西吗？我刚刚将克隆放入以证明它适用于所有未来的 [data-js] 数据类型。

```
$('body').on('click', '[data-js]', function () {

if ($(this).attr('data-js') == 'unstar' || $(this).attr('data-js') == 'star') {

    $(this).attr('data-js', $(this).attr('data-js') == 'unstar' ? 'star' : 'unstar');

    alert($(this).attr('data-js'));
    $(this).clone().insertAfter(this);

}
}); 
```

# java - 如何从按钮单击获取当前 JPanel

> ID：16188744
> 
> 赞同：3
> 
> 时间：2013-04-24T09:47:14.690
> 
> 标签：java, swing, jpanel

如果单击按钮，我将如何获得它当前所在的 JPanel？

我知道如何制作按钮并添加动作监听器并进行事件处理。我不知道如何选择当前面板。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T12:32:25.233

修改了上面帖子中的代码以避免使用最终变量

```
public void buildUI() {
JFrame frame = new JFrame();
JPanel panel = new JPanel();
JButton button = new JButton("Button");
panel.add(button);
button.addActionListener( new ActionListener() {

    public void actionPerformed(ActionEvent e) {
        System.out.println("The current panel is " + ((JButton)e.getComponent()).getParent());
    }

});
frame.add(panel);
frame.pack();
frame.setDefaultCloseBehavior(JFrame.CLOSE_ON_EXIT);
frame.setVisible(true);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T12:29:16.627

```
public void buildUI() {
    JFrame frame = new JFrame();
    final JPanel panel = new JPanel();
    JButton button = new JButton("Button");
    panel.add(button);
    button.addActionListener( new ActionListener() {

        public void actionPerformed(ActionEvent e) {
            System.out.println("The current panel is " + panel);
        }

    });
    frame.add(panel);
    frame.pack();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setVisible(true);
} 
```

编辑：添加侦听器代码与 GUI 代码不在同一类中的示例。

```
//PanelPrintingListener.java
public class PanelPrintingListener implements ActionListener {

    private JPanel panel;

    public PanelPrintingListener(JPanel panel) {
        this.panel = panel;
    }

    public void actionPerformed(ActionEvent e) {
        System.out.println("The current panel is " + panel);
    }

}

//OtherFoo.java
public void buildUI() {
    JFrame frame = new JFrame();
    JPanel panel = new JPanel();
    JButton button = new JButton("Button");
    panel.add(button);
    button.addActionListener( new PanelPrintingListener(panel) );
    frame.add(panel);
    frame.pack();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setVisible(true);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-13T06:58:51.833

如果您正在寻找当前处于活动状态的面板（意味着它是堆栈中的顶部面板），那么您可以使用 getComponent() 方法。

```
 Component active = parentPanel.getComponent(0); 
```

现在“活动”对象将具有当前活动或显示的面板。请注意，“父面板”是放置所需子面板的面板。

# javascript - Dropzone js在没有表单的情况下无法工作

> ID：16188751
> 
> 赞同：2
> 
> 时间：2013-04-24T09:47:36.650
> 
> 标签：javascript, jquery, dropzone.js

如何在不使用表单中的类的情况下使用 dropzone。

我基本上想有`div`一个表格并`class="dropzone"`在那个div中调用。但这似乎不起作用。

下面是我的代码：

```
<!DOCTYPE html>
<html lang="en">
    <head>
    <title></title>
    <link rel="stylesheet" href="css/basic.css" />
    <link rel="stylesheet" href="css/dropzone.css"/>
    <script src="dropzone.min.js"></script>
    <script type="text/javascript">
        var myDropzone = new Dropzone("div#myId", { url: "file-upload"})
    </script>

    <body>
        <form action="upload.php">
            <input type="text">
            <div id="myId" class="dropzone"></div>
        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T10:07:03.757

`.ready`当 DOM 准备好并像这样使用时启动事件。

```
<!DOCTYPE html>
<html lang="en">
    <head>
    <title></title>
    <link rel="stylesheet" href="css/basic.css" />
    <link rel="stylesheet" href="css/dropzone.css"/>
    <script src="dropzone.min.js"></script>
    <script type="text/javascript">
        jQuery(document).ready(function() 
        {
            var myDropzone = new Dropzone("div#myId", { url: "file-upload"});
        });
    </script>

    <body>
        <form action="upload.php">
            <input type="text">
            <div id="myId" class="dropzone"></div>
        </form>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-02-15T21:50:38.010

您的 url 参数未指向任何有效的 php 文件。我相信你的代码应该是这样的

```
<!DOCTYPE html>
<html lang="en">
<head>
<title></title>
<link rel="stylesheet" href="css/basic.css" />
<link rel="stylesheet" href="css/dropzone.css"/>
<script src="dropzone.min.js"></script>
<script type="text/javascript">
    var myDropzone = new Dropzone("div#myId", { url: "upload.php"}) //according to your forms action
</script>

<body>
    <form action="upload.php">
        <input type="text">
        <div id="myId" class="dropzone"></div>
    </form>
</body> 
```

# xml - 如何同步两个xml文件？

> ID：16188753
> 
> 赞同：0
> 
> 时间：2013-04-24T09:47:43.860
> 
> 标签：xml, merge, sync

我在服务器中有 XML1 如下

```
 <?xml version="1.0" encoding="utf-8"?>
<Node id="0" Value="Root">
<Node id="1" Value="L1">
<Node id="1.1" Value="N11">
  <Node id="1.1.2" Value="N112" />
 </Node>
</Node>
<Node id="2" Value="L2">
<Node id="2.1" Value="N21" />
 </Node>
</Node> 
```

我在本地还有另一个 XML2，如下所示

```
<?xml version="1.0" encoding="utf-8"?>
<Node id="0" Value="Root">
 <Node id="1" Value="L1">
<Node id="1.1" Value="N11"></Node>
<Node id="1.2" Value="N12"></Node>
 </Node>
<Node id="2.1" Value="N21"></Node>
</Node> 
```

现在我想同步这两个 xmls 并输出如下

```
<?xml version="1.0" encoding="utf-8"?>
<Node id="0" Value="Root">
 <Node id="1" Value="L1">
<Node id="1.1" Value="N11" />
<Node id="1.2" Value="N12" />
  </Node>
  <Node id="2.1" Value="N21" />
</Node> 
```

请为此提供解决方案..提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T09:57:49.083

使类结构像

```
 [XmlTypeAttribute(AnonymousType = true)]
public class Node
{
    [XmlAttribute(AttributeName = "id")]
    public string Id { get; set; }

    [XmlAttribute(AttributeName = "Value")]
    public string Name { get; set; }

    [XmlAttribute(AttributeName = "Status")]
    public string Status { get; set; }

    [XmlElement("Node")]
    public List<Node> Nodes { get; set; }
} 
```

通过使用反序列化将这些 xml 转换为一个对象并调用递归方法来比较每个节点并合并到第一个 xml。

```
private void sync_Click(object sender, EventArgs e)
    {
        strLogg = string.Empty;
        Node oSource = FillData(textBox1.Text + ".xml");
        Node oDesignation = FillData(textBox2.Text + ".xml");
        UpdateNodes(oSource, oDesignation);
        WriteXML(oSource,"XML1.xml");
        string strHeader = "Changes at " + DateTime.Now + System.Environment.NewLine;
        System.IO.File.AppendAllText(exportPath + "xmlLogger.txt",  strHeader + strLogg + Environment.NewLine);
        //System.Diagnostics.Process.Start(exportPath + "\\xmlLogger.txt"); // show log file

    }

 private static Node FillData(string xmlName)
    {
        string path = exportPath + xmlName;
        FileStream fs = new FileStream(path, FileMode.Open);
        XmlReader reader = new XmlTextReader(fs);
        XmlRootAttribute xRoot = new XmlRootAttribute("Node");
        xRoot.IsNullable = true;
        var serializer = new XmlSerializer(typeof(Node), xRoot);
        var result = (Node)serializer.Deserialize(reader);
        reader.Close();

        return result;
    }

private void UpdateNodes(Node n1, Node n2)
    {
        // Update Value
        if (n1.Name != n2.Name)
        {
            LogChanges(n1.Name + " Changed as " + n2.Name);
        }

        n1.Name = n2.Name;
        if (n1.Nodes != null || n2.Nodes != null)
        {

            if ((n1.Nodes != null && n1.Nodes.Count > 0) && (n2.Nodes != null && n2.Nodes.Count > 0))
            {
                // add new nodes to XML1
                var newNodes = n2.Nodes.Where(ns => (!(n1.Nodes.Select(nn => nn.Id).ToList()).Contains(ns.Id) && ns.Status != "del")).ToList();
                newNodes.ForEach(n => LogChanges("Added " + n.Name));
                n1.Nodes.AddRange(newNodes);

                // delete nodes from XML1
                var delNodes = n2.Nodes.Where(ns => ((n1.Nodes.Select(nn => nn.Id).ToList()).Contains(ns.Id) && ns.Status == "del")).ToList();
                if (delNodes.Count > 0)
                {
                    delNodes.ForEach(n => LogChanges("Deleted " + n.Name));
                }
                n1.Nodes.RemoveAll(ns => n2.Nodes.Count(nn => nn.Id == ns.Id && nn.Status == "del") > 0);

                if (n2.Nodes.Count > 0 && n2.Nodes.Count > 0)
                {
                    n1.Nodes.ToList().ForEach(n =>
                    {
                        if (n2.Nodes.Count(ns2 => ns2.Id == n.Id) > 0)
                        {
                            UpdateNodes(n, n2.Nodes.Where(ns2 => ns2.Id == n.Id).FirstOrDefault());
                        }
                    }
                        );
                }
            }
            else if ((n1.Nodes != null && n1.Nodes.Count > 0) && (n2.Nodes == null || n2.Nodes.Count == 0))
            {
                n2.Nodes = new List<Node>();
                n2.Nodes.AddRange(n1.Nodes);
            }
            else if ((n1.Nodes == null || n1.Nodes.Count == 0) && (n2.Nodes != null && n2.Nodes.Count > 0 && n2.Nodes.Count(ns => ns.Status !="del") > 0))
            {
                n1.Nodes = new List<Node>();
                n1.Nodes.AddRange(n2.Nodes);
                n2.Nodes.ForEach(n => LogChanges("Added  " + n.Name));
            }
        }
    }

    private void LogChanges(string sName)
    {
        strLogg +=  sName +  System.Environment.NewLine;
    } 
```

# javascript - 在方向更改时隐藏 jQuery Mobile 固定工具栏

> ID：16188757
> 
> 赞同：0
> 
> 时间：2013-04-24T09:47:59.223
> 
> 标签：javascript, jquery, css, jquery-mobile, screen-orientation

使用 jQuery Mobile，我可以使用以下方法在页面上创建一个固定的工具栏：

```
<div data-role="header" data-position="fixed">Content</div> 
```

我想做的是在设备方向改变时隐藏固定标题，我可以使用以下方法检测到这一点：

```
$(window).on('orientationchange ', function() {
    if (event.orientation === 'portrait') {

    }
    else if (event.orientation === 'landscape') {
    }
}); 
```

如何从页面中隐藏固定工具栏？工具栏上的设置`display: none`有效，但在标题之前的位置留下了一个空白区域。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T10:07:08.250

工作示例：http: [//jsfiddle.net/d2mMv/](http://jsfiddle.net/d2mMv/)

Javascript：

```
$(document).on('pagebeforeshow', '#index', function(){       
    $('#test-header').hide();
    $('#test-content').addClass('test-content');
}); 
```

CSS：

```
.test-content {
    margin-top: -40px !important;
} 
```

不幸的是，因为我们隐藏了一个标题，它仍然存在，所以我们可以触发**create**、**pagecreate**或**updatelayout**，因此我们需要使用 css 手动完成。

# php - 如何在 magento onepage 结帐过程中添加驱动程序提示？

> ID：16188758
> 
> 赞同：4
> 
> 时间：2013-04-24T09:48:01.767
> 
> 标签：php, magento, checkout

目前，我需要在 magento 单页结帐过程中添加自定义**驱动程序提示**步骤，就在运输方法（步骤 3）之后，我希望用户从一些给定选项中选择提示（我将制作单选按钮），即将包含一定的金额，假设用户选择了 150 美元，那么这个金额将被添加到总付款中？我通过谷歌尝试了所有其他教程，它们都不适合我，感谢任何帮助，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-30T12:38:50.850

我最近处理类似类型的需求。所以请按照我的指示：-

**我要求你不要关注答案的长度，只关注结果**

**第 1 步**：-如果您想在运输和运输方式之间放置司机小费，请先打开

\app\code\core\Mage\Checkout\Block\Onepage.php 有一个数组 $stepCodes（第 44 行）。用这个替换它

```
$stepCodes = array('billing', 'shipping', 'excellence2','shipping_method', 'payment', 'review'); 
```

我使用**excellent2**你也可以使用这个名字。

**第 2 步**：- 现在我们需要在 app\code\core\Mage\Checkout\Block\Onepage\ 上创建 Excellence2 类，因此创建一个新的 php 文件并将该代码放入其中并保存为 Excellence2.php

```
class Mage_Checkout_Block_Onepage_Excellence2 extends Mage_Checkout_Block_Onepage_Abstract
{
protected function _construct()
{
    $this->getCheckout()->setStepData('excellence2', array(
        'label'     => Mage::helper('checkout')->__('Tip Ammount'),
        'is_show'   => $this->isShow()
    ));
    parent::_construct();

}
} 
```

**注意**：- 现在您可以在 _construct() 函数的标签处添加任何名称，因此将**“Tip Ammount”**更改为**驱动程序提示**

**第 3 步**：-现在打开位于 app\code\core\Mage\Checkout\controllers\ 中的 OnepageController.php 并找到**saveBillingAction** **()**函数（行号：-296）并将该代码替换为

```
 public function saveBillingAction()
{       
    if ($this->_expireAjax())
      {
        return;
      }
    if ($this->getRequest()->isPost()) {
        //            $postData = $this->getRequest()->getPost('billing', array());
        //            $data = $this->_filterPostData($postData);
        $data = $this->getRequest()->getPost('billing', array());
        $customerAddressId = $this->getRequest()->getPost('billing_address_id', false);

        if (isset($data['email'])) {
            $data['email'] = trim($data['email']);
        }
        $result = $this->getOnepage()->saveBilling($data, $customerAddressId);

        if (!isset($result['error'])) {
            /* check quote for virtual */
            if ($this->getOnepage()->getQuote()->isVirtual()) {
                $result['goto_section'] = 'payment';
                $result['update_section'] = array(
                    'name' => 'payment-method',
                    'html' => $this->_getPaymentMethodsHtml()
                );
            } elseif (isset($data['use_for_shipping']) && $data['use_for_shipping'] == 1) {
                $result['goto_section'] = 'excellence2';  //Goes to our step
                $result['allow_sections'] = array('shipping');
                $result['duplicateBillingInfo'] = 'true';
            } else {
                $result['goto_section'] = 'shipping';
            }
        }

        $this->getResponse()->setBody(Mage::helper('core')->jsonEncode($result));
    }
} 
```

**第 4 步**：- 再次在同一个文件**OnepageController.php**中有一个 saveShippingAction() 函数（第 331 行）将其更改为

```
 public function saveShippingAction()
 {
    if ($this->_expireAjax()) {
        return;
    }
    if ($this->getRequest()->isPost()) {
        $data = $this->getRequest()->getPost('shipping', array());
        $customerAddressId = $this->getRequest()->getPost('shipping_address_id', false);
        $result = $this->getOnepage()->saveShipping($data, $customerAddressId);

        if (!isset($result['error'])) {
            $result['goto_section'] = 'excellence2'; //Go to our step
        }
        $this->getResponse()->setBody(Mage::helper('core')->jsonEncode($result));
    }
  } 
```

这段代码告诉用户，当用户通过运输步骤时，他将进入我们的**司机提示**步骤。

**第5步**：-再次在同一个文件（**OnepageController.php**）中，我们需要告诉用户在通过 **驱动程序提示**步骤后将重定向到哪里。所以在saveShippingAction（）函数之后创建一个saveExcellence2Action（）

```
public function saveExcellence2Action()
{
    if ($this->_expireAjax()) {
        return;
    }
    if ($this->getRequest()->isPost()) {
        $data = $this->getRequest()->getPost('excellence2', array());

        $result = $this->getOnepage()->saveExcellence2($data);

        if (!isset($result['error'])) {
            $result['goto_section'] = 'shipping_method';
            $result['update_section'] = array(
                'name' => 'shipping-method',
                'html' => $this->_getShippingMethodsHtml()
            );
        }

        $this->getResponse()->setBody(Mage::helper('core')->jsonEncode($result));
    }
} 
```

**第 6 步**：- 现在我们更改 checkout.xml，它位于

\app\design\frontend\default\your template\layout 打开它并找到

```
<checkout_onepage_index translate="label"> 
```

并且在该特定节点中有块（第 326 行）

```
<block type="checkout/onepage_shipping" name="checkout.onepage.shipping" as="shipping" template="checkout/onepage/shipping.phtml"/> 
```

只需在上面显示的这一行之后添加一个新块

```
<block type="checkout/onepage_excellence2" name="checkout.onepage.excellence2" as="excellence2" template="checkout/onepage/excellence2.phtml"/> 
```

**第 7 步**：- 现在我们需要 在 \app\design\frontend\default\your template\template\checkout\onepage\创建一个**excellent2.phtml文件**

此文件显示您要向用户显示的内容

```
<form id="co-excellence2-form" action="">
<div class="wide"> <label for="excellence2:like" class="required"><em  style="color:#F00;">*</em>&nbsp;&nbsp;&nbsp;Select the amount of tip ,You wish to give to the driver.</label>
</div>
<div style="margin-top:20px;">
<ul>
<li>
<input type="radio" name="excellence2[like]" id="excellence2:like" value="0" checked="checked" class="radio" onclick="savevalue(this.value);"/>&nbsp;&nbsp;&nbsp;No Tip/Pay driver at the door
</li>
<li>
<input type="radio" name="excellence2[like]" id="excellence2:like" value="150" class="radio" onclick="savevalue(this.value);" />&nbsp;&nbsp;&nbsp;150$
</li>
<li>
<input type="radio" name="excellence2[like]" id="excellence2:like" value="250" class="radio"  onclick="savevalue(this.value);"/>&nbsp;&nbsp;&nbsp;250$
</li>
<li>
<input type="radio" name="excellence2[like]" id="excellence2:like" value="400" class="radio" onclick="savevalue(this.value);" />&nbsp;&nbsp;&nbsp;400$
</li>
<li>
<input type="radio" name="excellence2[like]" id="excellence2:like" value="500" class="radio"  onclick="savevalue(this.value);"/>&nbsp;&nbsp;&nbsp;500$
</li>
<li>
<input type="radio" name="excellence2[like]" id="excellence2:like" value="15% of total amount" class="radio" onclick="savevalue(this.value);" />&nbsp;&nbsp;&nbsp;15% of Total Amount
</li>
</ul>
</div>
<fieldset>
<div class="buttons-set" id="excellence2-buttons-container">
<p class="required"><?php echo $this->__('* Required Fields') ?></p>
<button type="button" title="<?php echo $this->__('Continue') ?>" class="button" onclick="excellence2.save()"><span><span><?php echo $this->__('Continue') ?></span></span>    
</button>
<span class="please-wait" id="excellence2-please-wait" style="display:none;">
<img src="<?php echo $this->getSkinUrl('images/opc-ajax-loader.gif') ?>" alt="<?php echo $this->__('Loading next step...') ?>" title="<?php echo $this->__('Loading next step...') ?>" class="v-middle" /> <?php echo $this->__('Loading next step...') ?>
</span>
</div>
</fieldset>
</form>
<script type="text/javascript">
//<![CDATA[
var excellence2 = new ExcellenceMethod2('co-excellence2-form','<?php echo  $this->getUrl('checkout/onepage/saveExcellence2') ?>');
var excellenceForm2 = new VarienForm('co-excellence2-form');
//]]>

</script> 
```

**第 8 步**：-现在我们需要在 \skin\frontend\default\your template\js创建一个**excellentcheckout.js文件**

```
var ExcellenceMethod2 = Class.create();
ExcellenceMethod2.prototype = {
initialize: function(form, saveUrl){
    this.form = form;
    if ($(this.form)) {
        $(this.form).observe('submit', function(event){this.save();Event.stop(event);}.bind(this));
    }
    this.saveUrl = saveUrl;
    this.validator = new Validation(this.form);
    this.onSave = this.nextStep.bindAsEventListener(this);
    this.onComplete = this.resetLoadWaiting.bindAsEventListener(this);
},

validate: function() {

    return true;
},

save: function(){

    //alert('hi');
    if (checkout.loadWaiting!=false) return;
    if (this.validate()) {
        checkout.setLoadWaiting('excellence2');
        var request = new Ajax.Request(
            this.saveUrl,
            {
                method:'post',
                onComplete: this.onComplete,
                onSuccess: this.onSave,
                onFailure: checkout.ajaxFailure.bind(checkout),
                parameters: Form.serialize(this.form)
            }
        );
    }
},

resetLoadWaiting: function(transport){
    checkout.setLoadWaiting(false);
},

nextStep: function(transport){
    if (transport && transport.responseText){
        try{
            response = eval('(' + transport.responseText + ')');
        }
        catch (e) {
            response = {};
        }
    }

    if (response.error) {
        alert(response.message);
        return false;
    }

    if (response.update_section) {
        $('checkout-'+response.update_section.name+'-load').update(response.update_section.html);
    }

    if (response.goto_section) {
        //alert(response);
        checkout.gotoSection(response.goto_section);
        checkout.reloadProgressBlock();
        return;
    }

    checkout.setPayment();
}
} 
```

**第 9 步**：- 现在我们需要创建一个新函数来保存选择了哪个用户的数据。所以我们在 Onepage.php 中的 saveShipping($data, $customerAddressId) 函数之后创建了一个名为**saveExcellence2()**的新函数，该函数位于 \app\code\core\Mage\Checkout\Model\Type\

```
public function saveExcellence2($data)
{
    if (empty($data)) 
    {
        return array('error' => -1, 'message' => $this->_helper->__('Invalid data.'));
    }
    $this->getQuote()->setExcellenceLike2($data['like']);
    $this->getQuote()->collectTotals();
    $this->getQuote()->save();

    $this->getCheckout()

    ->setStepData('excellence2', 'complete', true)
    ->setStepData('shipping_method', 'allow', true);

    return array();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-11T05:52:06.027

默认情况下，magento 提供了一些结帐步骤。但有时您需要添加来自客户的额外信息以供将来参考。一个常见的请求自定义是在默认结帐过程中添加自定义表单。这不是接触核心文件的好习惯。您可以通过覆盖模块来做到这一点。在此示例中，公司名称为**Ipragmatech**，模块名称为**Checkoutstep**。

Step1：在结账过程中添加自定义步骤

打开 Ipragmatech > Checkoutstep > Block > Onepage> Checkoutstep.php 文件并编写以下代码

```
 class Ipragmatech_Checkoutstep_Block_Onepage_Checkoutstep extends Mage_Checkout_Block_Onepage_Abstract
    {
       protected function _construct()
       {     
          $this->getCheckout()->setStepData('checkoutstep', array(
          'label'     => Mage::helper('checkout')->__('Invitation to participation'),
          'is_show'   => true
        ));
        parent::_construct();
       }
     } 
```

步骤 2：在结帐过程中添加您想要的步骤和位置

打开 Ipragmatech > Checkoutstep > Block > Onepage> Checkoutstep.php 文件并编写以下代码

```
 class Ipragmatech_Checkoutstep_Block_Onepage extends Mage_Checkout_Block_Onepage
    {
      public function getSteps()
      {
             $steps = array();

             if (!$this->isCustomerLoggedIn()) {
                $steps['login'] = $this->getCheckout()->getStepData('login');
             }

            $stepCodes = array('billing', 'shipping', 'shipping_method', 'payment', 'checkoutstep', 'review');
         foreach ($stepCodes as $step) {
             $steps[$step] = $this->getCheckout()->getStepData($step);
          }

    return $steps;
   }
} 
```

Step3：抓取自定义表单的提交值，设置自定义表单的值

打开 ipragmatech > Checkoutstep > controllers > OnepageController.php 并编写以下函数

```
 public function saveCheckoutstepAction()
    {
      $this->_expireAjax();
      if ($this->getRequest()->isPost()) {

     //Grab the submited value 
     $_entrant_name = $this->getRequest()->getPost('entrant_name',"");
     $_entrant_phone = $this->getRequest()->getPost('entrant_phone',"");
     $_entrant_email = $this->getRequest()->getPost('entrant_email',"");
     $_permanent_address = $this->getRequest() ->getPost('permanent_address',"");
     $_address = $this->getRequest()->getPost('local_address',"");

     Mage::getSingleton('core/session') ->setIpragmatechCheckoutstep(serialize(array(
    'entrant_name' =>$_entrant_name,
    'entrant_phone' =>$_entrant_phone,
    'entrant_email' =>$_entrant_email,
    'permanent_address' =>$_permanent_address,
    'address' =>$_address
     )));

    $result = array();
    $redirectUrl = $this->getOnePage()->getQuote()->getPayment() ->getCheckoutRedirectUrl();
        if (!$redirectUrl) {
            $this->loadLayout('checkout_onepage_review');
            $result['goto_section'] = 'review';
            $result['update_section'] = array(
                'name' => 'review',
                'html' => $this->_getReviewHtml()
            );

        }

        if ($redirectUrl) {
            $result['redirect'] = $redirectUrl;
        }

        $this->getResponse()->setBody(Zend_Json::encode($result));
    }
} 
```

Step4：保存自定义表单信息

当调用 checkout_onepage_controller_success_action 事件挂钩时。打开 Ipragmatech > Checkoutstep > Model >Observer.php 并编写以下内容

```
 class Ipragmatech_Checkoutstep_Model_Observer {
      const ORDER_ATTRIBUTE_FHC_ID = 'checkoutstep';
      public function hookToOrderSaveEvent() {
      if (Mage::helper('checkoutstep')->isEnabled()) {
         $order = new Mage_Sales_Model_Order ();
         $incrementId = Mage::getSingleton ( 'checkout/session' )->getLastRealOrderId ();
         $order->loadByIncrementId ( $incrementId );

       // Fetch the data 
       $_checkoutstep_data = null;
       $_checkoutstep_data = Mage::getSingleton ( 'core/session' )->getIpragmatechCheckoutstep ();
       $model = Mage::getModel ( 'checkoutstep/customerdata' )->setData ( unserialize ( $_checkoutstep_data ) );
       $model->setData ( "order_id",$order["entity_id"] );
       try {
           $insertId = $model->save ()->getId ();
             Mage::log ( "Data successfully inserted. Insert ID: " . $insertId, null, 'mylog.log');
        } catch ( Exception $e ) {
            Mage::log ( "EXCEPTION " . $e->getMessage (), null, 'mylog.log' );
          }
        }
    } 
```

}

Magento – 在结帐扩展中添加自定义表单是一个完整的解决方案，可以在您的电子商务网站的结帐过程中添加额外的步骤。它允许管理员以 CSV 格式从自定义表中导出数据。访问链接以获取此免费扩展[http://www.magentocommerce.com/magento-connect/custom-form-in-checkout.html](http://www.magentocommerce.com/magento-connect/custom-form-in-checkout.html)

# java - 异常调度输入事件

> ID：16188759
> 
> 赞同：2
> 
> 时间：2013-04-24T09:48:04.503
> 
> 标签：java, android

我正在尝试做列表视图。我的应用程序在第一次打开时工作，但在返回主菜单后它不再工作并且在模拟器上给出错误“不幸的是应用程序已停止”。

这是我的主要内容。

```
public class ListMyJob extends Activity {
        ItemListBaseAdapter adapter;               //////after answers ı added.
        public void onBackPressed() {             //////after answers ı added.
                                                 //////after answers ı added.
            adapter.notifyDataSetChanged();      //////after answers ı added.

    }                                           //////after answers ı added.
    ArrayList<ItemDetails> jobs = new ArrayList<ItemDetails>();{   /////////////some list data /////////////////////}

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        ArrayList<ItemDetails> image_details = jobs;

        final ListView lv1 = (ListView) findViewById(R.id.listV_main);
        lv1.setAdapter(new ItemListBaseAdapter(this, image_details));
        lv1.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> a, View v, int position, long id) { 
                Object o = lv1.getItemAtPosition(position);
                ItemDetails obj_itemDetails = (ItemDetails)o;
                Toast.makeText(ListMyJob.this, "You have chosen : " + " " + obj_itemDetails.getName(), Toast.LENGTH_LONG).show();
                Intent intObj = new Intent(ListMyJob.this,ListMyExercises.class);  /////modified

                intObj.putExtra("description",obj_itemDetails.getItemDescription());
                intObj.putExtra("name",obj_itemDetails.getName());
                intObj.putExtra("imagenumber",obj_itemDetails.getImageNumber());
                intObj.putExtra("videonumber", obj_itemDetails.getVideoNumber());

                ItemDetailsWrapper wrapper = new ItemDetailsWrapper(obj_itemDetails.getChild());
                intObj.putExtra("exerciselist", wrapper); // i.putExtra("obj", new ItemDetailsWrapper(list));

                startActivity(intObj);
            }  
        });
    }
} 
```

我在 logcat 上收到这些错误。

```
04-24 09:31:44.596: E/InputEventReceiver(2170): Exception dispatching input event.
04-24 09:31:44.596: E/MessageQueue-JNI(2170): Exception in MessageQueue callback: handleReceiveCallback
04-24 09:31:44.676: E/MessageQueue-JNI(2170): java.lang.IllegalStateException: The content of the adapter has changed but ListView did not receive a notification. Make sure the content of your adapter is not modified from a background thread, but only from the UI thread. [in ListView(2131099660, class android.widget.ListView) with Adapter(class com.jsupport.HealthyMe.ItemListBaseAdapter)]
04-24 09:31:44.676: E/MessageQueue-JNI(2170):   at android.widget.ListView.layoutChildren(ListView.java:1544)
04-24 09:31:44.676: E/MessageQueue-JNI(2170):   at android.widget.AbsListView.onTouchEvent(AbsListView.java:3403)
04-24 09:31:44.676: E/MessageQueue-JNI(2170):   at android.view.View.dispatchTouchEvent(View.java:7246)
04-24 09:31:44.676: E/MessageQueue-JNI(2170):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2168)
04-24 09:31:44.676: E/MessageQueue-JNI(2170):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1903)
04-24 09:31:44.676: E/MessageQueue-JNI(2170):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
04-24 09:31:44.676: E/MessageQueue-JNI(2170):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
04-24 09:31:44.676: E/MessageQueue-JNI(2170):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
04-24 09:31:44.676: E/MessageQueue-JNI(2170):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
04-24 09:31:44.676: E/MessageQueue-JNI(2170):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
04-24 09:31:44.676: E/MessageQueue-JNI(2170):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
04-24 09:31:44.676: E/MessageQueue-JNI(2170):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
04-24 09:31:44.676: E/MessageQueue-JNI(2170):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
04-24 09:31:44.676: E/MessageQueue-JNI(2170):   at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1953)
04-24 09:31:44.676: E/MessageQueue-JNI(2170):   at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1405)
04-24 09:31:44.676: E/MessageQueue-JNI(2170):   at android.app.Activity.dispatchTouchEvent(Activity.java:2410)
04-24 09:31:44.676: E/MessageQueue-JNI(2170):   at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1901)
04-24 09:31:44.676: E/MessageQueue-JNI(2170):   at android.view.View.dispatchPointerEvent(View.java:7426)
04-24 09:31:44.676: E/MessageQueue-JNI(2170):   at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:3220)
04-24 09:31:44.676: E/MessageQueue-JNI(2170):   at android.view.ViewRootImpl.deliverInputEvent(ViewRootImpl.java:3165)
04-24 09:31:44.676: E/MessageQueue-JNI(2170):   at android.view.ViewRootImpl.doProcessInputEvents(ViewRootImpl.java:4292)
04-24 09:31:44.676: E/MessageQueue-JNI(2170):   at android.view.ViewRootImpl.enqueueInputEvent(ViewRootImpl.java:4271)
04-24 09:31:44.676: E/MessageQueue-JNI(2170):   at android.view.ViewRootImpl$WindowInputEventReceiver.onInputEvent(ViewRootImpl.java:4363)
04-24 09:31:44.676: E/MessageQueue-JNI(2170):   at android.view.InputEventReceiver.dispatchInputEvent(InputEventReceiver.java:179)
04-24 09:31:44.676: E/MessageQueue-JNI(2170):   at android.os.MessageQueue.nativePollOnce(Native Method)
04-24 09:31:44.676: E/MessageQueue-JNI(2170):   at android.os.MessageQueue.next(MessageQueue.java:125)
04-24 09:31:44.676: E/MessageQueue-JNI(2170):   at android.os.Looper.loop(Looper.java:124)
04-24 09:31:44.676: E/MessageQueue-JNI(2170):   at android.app.ActivityThread.main(ActivityThread.java:5041)
04-24 09:31:44.676: E/MessageQueue-JNI(2170):   at java.lang.reflect.Method.invokeNative(Native Method)
04-24 09:31:44.676: E/MessageQueue-JNI(2170):   at java.lang.reflect.Method.invoke(Method.java:511)
04-24 09:31:44.676: E/MessageQueue-JNI(2170):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-24 09:31:44.676: E/MessageQueue-JNI(2170):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-24 09:31:44.676: E/MessageQueue-JNI(2170):   at dalvik.system.NativeStart.main(Native Method)
04-24 09:31:44.676: D/AndroidRuntime(2170): Shutting down VM
04-24 09:31:44.676: W/dalvikvm(2170): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
04-24 09:31:44.716: E/AndroidRuntime(2170): FATAL EXCEPTION: main
04-24 09:31:44.716: E/AndroidRuntime(2170): java.lang.IllegalStateException: The content of the adapter has changed but ListView did not receive a notification. Make sure the content of your adapter is not modified from a background thread, but only from the UI thread. [in ListView(2131099660, class android.widget.ListView) with Adapter(class com.jsupport.HealthyMe.ItemListBaseAdapter)]
04-24 09:31:44.716: E/AndroidRuntime(2170):     at android.widget.ListView.layoutChildren(ListView.java:1544)
04-24 09:31:44.716: E/AndroidRuntime(2170):     at android.widget.AbsListView.onTouchEvent(AbsListView.java:3403)
04-24 09:31:44.716: E/AndroidRuntime(2170):     at android.view.View.dispatchTouchEvent(View.java:7246)
04-24 09:31:44.716: E/AndroidRuntime(2170):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2168)
04-24 09:31:44.716: E/AndroidRuntime(2170):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1903)
04-24 09:31:44.716: E/AndroidRuntime(2170):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
04-24 09:31:44.716: E/AndroidRuntime(2170):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
04-24 09:31:44.716: E/AndroidRuntime(2170):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
04-24 09:31:44.716: E/AndroidRuntime(2170):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
04-24 09:31:44.716: E/AndroidRuntime(2170):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
04-24 09:31:44.716: E/AndroidRuntime(2170):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
04-24 09:31:44.716: E/AndroidRuntime(2170):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
04-24 09:31:44.716: E/AndroidRuntime(2170):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
04-24 09:31:44.716: E/AndroidRuntime(2170):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1953)
04-24 09:31:44.716: E/AndroidRuntime(2170):     at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1405)
04-24 09:31:44.716: E/AndroidRuntime(2170):     at android.app.Activity.dispatchTouchEvent(Activity.java:2410)
04-24 09:31:44.716: E/AndroidRuntime(2170):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1901)
04-24 09:31:44.716: E/AndroidRuntime(2170):     at android.view.View.dispatchPointerEvent(View.java:7426)
04-24 09:31:44.716: E/AndroidRuntime(2170):     at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:3220)
04-24 09:31:44.716: E/AndroidRuntime(2170):     at android.view.ViewRootImpl.deliverInputEvent(ViewRootImpl.java:3165)
04-24 09:31:44.716: E/AndroidRuntime(2170):     at android.view.ViewRootImpl.doProcessInputEvents(ViewRootImpl.java:4292)
04-24 09:31:44.716: E/AndroidRuntime(2170):     at android.view.ViewRootImpl.enqueueInputEvent(ViewRootImpl.java:4271)
04-24 09:31:44.716: E/AndroidRuntime(2170):     at android.view.ViewRootImpl$WindowInputEventReceiver.onInputEvent(ViewRootImpl.java:4363)
04-24 09:31:44.716: E/AndroidRuntime(2170):     at android.view.InputEventReceiver.dispatchInputEvent(InputEventReceiver.java:179)
04-24 09:31:44.716: E/AndroidRuntime(2170):     at android.os.MessageQueue.nativePollOnce(Native Method)
04-24 09:31:44.716: E/AndroidRuntime(2170):     at android.os.MessageQueue.next(MessageQueue.java:125)
04-24 09:31:44.716: E/AndroidRuntime(2170):     at android.os.Looper.loop(Looper.java:124)
04-24 09:31:44.716: E/AndroidRuntime(2170):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-24 09:31:44.716: E/AndroidRuntime(2170):     at java.lang.reflect.Method.invokeNative(Native Method)
04-24 09:31:44.716: E/AndroidRuntime(2170):     at java.lang.reflect.Method.invoke(Method.java:511)
04-24 09:31:44.716: E/AndroidRuntime(2170):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-24 09:31:44.716: E/AndroidRuntime(2170):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-24 09:31:44.716: E/AndroidRuntime(2170):     at dalvik.system.NativeStart.main(Native Method)
04-24 09:36:44.811: I/Process(2170): Sending signal. PID: 2170 SIG: 9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T10:16:37.563

利用

```
onBakcPressed(){
  adapter.notifydatasetchanged();
} 
```

# ember.js - ember.js：通知嵌套路由中的条目创建

> ID：16188762
> 
> 赞同：0
> 
> 时间：2013-04-24T09:48:07.410
> 
> 标签：ember.js, ember-data

我有一个问题：我添加了一个对象，我希望在嵌套路由的上下文中将它“实时”附加到我的对象列表中。在 Ember.js 上下文中，我不想通知此更改，它应该自动更新。

可能吗？

给定这个路由器：

```
App.Router.map ->
  @resource "raw_materials", ->
    @route 'new' 
```

和这些模板：

raw_materials.hbl

```
{{#linkTo raw_materials.new}}CREATE{{/linkTo}}
<ul>
  {{#each controller}}
  <li>
    {{name}} - {{quantity}}
  </li>
{{outlet}} 
```

raw_materials/new.hbl

```
{{view Ember.TextField valueBinding="name"}}
{{view Ember.TextField valueBinding="quantity"}}
<a {{action 'create' this}}>V</a> 
```

控制器：

```
App.RawMaterialsNewController = Ember.ArrayController.extend
  create: (params)->
    App.RawMaterial.createRecord({
      name: params.name,
      quantity: params.quantity
    })
    @get("store").commit() 
```

所以结果是这样的： ![结果](https://i.stack.imgur.com/ItYld.png)

更新：我目前的路线是：

```
App.RawMaterialsRoute = Ember.Route.extend
  model: -> App.RawMaterial.find({}) 
```

如果我改变它

```
App.RawMaterialsRoute = Ember.Route.extend
  model: -> App.RawMaterial.find() 
```

问题解决了。

我使用的原因`.find({})`是它给了我 isLoaded 事件，而`.find()`数组 isLoaded 总是正确的，即使它没有加载

我能做些什么？

谢谢

# javascript - 如何在Javascript中进行计算？

> ID：16188763
> 
> 赞同：-2
> 
> 时间：2013-04-24T09:48:10.637
> 
> 标签：javascript

```
i = 3;
j = 2;

function domath(x) {
    i = 4;
    j = 1;
    return i*x + j;
}

j = domath(i) - j;
alert(j); //expected result = 11

k = domath(i) + j;
alert(k); //expected result = 15 
```

上面的 JavaScript 代码没有返回预期的结果（如代码中的注释所示）。请为我更正代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T09:53:14.953

由于您不使用`var`，因此您在第一行中定义的变量实际上`i`与`j`您在`domath()`函数中定义的变量相同...

尝试这个 ：

```
i = 3;
j = 2;

function domath(x) {
    var i = 4;
    var j = 1;
    return i*x + j;
}

j = domath(i) - j;
alert(j); //expected result = 11

k = domath(i) + j;
alert(k); //expected result = 15 
```

PS：更改变量名称以使您的代码更具可读性可能是个好主意

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T09:52:47.367

使用声明你的变量`var`：

```
var i = 3;
var j = 2;

function domath(x) {
  var i = 4;
  var j = 1;
  return i * x + j;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T09:54:41.657

```
var i = 3;
var j = 2;

function domath(x) {
    var i = 4;
    var j = 1;
    return i*x + j;
}

var x = domath(i) - j; // overwriting J will change your next expected result
alert(x); //expected result = 11

var k = domath(i) + j;
alert(k); //expected result = 15 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T09:56:52.343

问题是您正在覆盖全局变量，即搞砸了您的数学：

```
j = domath(i) - j; 
```

这个表达式是从左到右计算的。调用`domath()`将为 and 分配新值`i`，`j`因此此处的有效代码如下：

```
j = (i = 4) * 3 + 1 - 1; 
```

所以一旦完成，`j`将设置为`12`，这确实不是`11`。此外，`i`将有一个值`4`。

要在函数中使用局部变量，您必须重新声明它们，本质上隐藏此范围之外的全局变量：

```
function domath(x) {
    var i = 4;
    var j = 1;
    return i * x + j;
} 
```

这一次，第一个 assignment 将被解析为 this，因为`domath()`不会接触`i`并`j`分配到外部：

```
j = 4 * 3 + 1 - 2 
```

完成此操作后，将按预期`j`设置为 。`11`

* * *

为避免此类问题，最好`var`在定义新变量时始终使用（无论如何在想要编写`strict`代码时都必须这样做），并且不要使用如此简短、不明确的变量名称。我会考虑将单字符变量名的使用限制在迭代器和其他范围非常有限的东西上。永远不要因为某些东西是全球性的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T09:52:30.720

这似乎是一种非常讨厌的做事方式。

我个人会做类似的事情：

```
var v1;
var v2;

function math(x){ //do math here then return}
alert(math(1)) 
```

如果你真的必须在每个地方使用相同的变量，至少这样做：

```
var i = 3;
var j = 2;

function domath(x) {
var i = 4;
var j = 1;
return i*x + j;
} 
```

有意义的变量名称也将使您保持良好的状态，使用 var 而不是 global 也会对您有所帮助！

# javascript - AngularJS - html 渲染和 ng-bind-html-unsafe

> ID：16188769
> 
> 赞同：0
> 
> 时间：2013-04-24T09:48:18.783
> 
> 标签：javascript, angularjs

大家好，我对 angularJS html 渲染有一点问题。问题是当我使用时`ng-bind-html-unsafe`，布局看起来完全错误。但是，我只是将鼠标悬停在该区域周围，一切都移动到正确的位置。所以不知何故，我猜它与 angularJS 自定义属性有关，因为没有`ng-bind-html-unsafe`.

```
<li><a href="#!/static/faq"
    ng-bind-html-unsafe="locale['static-faq']"></a></li>
<li><a href="#!/static/privacy-policy"
    ng-bind-html-unsafe="locale['static-privacy-policy']"></a></li>
<li><a href="#!/static/terms"
    ng-bind-html-unsafe="locale['static-terms']"></a></li>
<li><a href="#!/static/contact"
    ng-bind-html-unsafe="locale['static-contact']"></a></li>
<li><a href="#!/static/team"
    ng-bind-html-unsafe="locale['static-team']"></a></li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:48:26.880

事实证明这不是 angularJS 的问题。正因为`text-decoration: uppercase`如此，我没想到它会成为问题。

# hibernate - 使用 SPRING MVC 在 JPA Hibernate 中重置数据库

> ID：16188778
> 
> 赞同：0
> 
> 时间：2013-04-24T09:48:38.437
> 
> 标签：hibernate, jpa, spring-mvc

我有一个要求，我想清除整个数据库表而不是继续前进。

我在使用 LocalSessionFactoryBean 的休眠中找到了以下解决方案。

[https://code.google.com/p/ormunit/source/browse/trunk/ormunit-hibernate/src/main/java/net/chrisrichardson/ormunit/hibernate/ResetDatabaseByRecreatingSchemaStrategy.java](https://code.google.com/p/ormunit/source/browse/trunk/ormunit-hibernate/src/main/java/net/chrisrichardson/ormunit/hibernate/ResetDatabaseByRecreatingSchemaStrategy.java)

但是我在 Hibernate 上使用 JPA，结果我有 LocalContainerEntityManagerFactoryBean。

谁能指导我，我如何使用 JPA over hibernate 实现类似的解决方案。

动机是重置数据库

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T15:32:42.910

使用休眠，您可以设置 `<property name="hbm2ddl.auto">create</property>`或创建删除。

您也可以使用[dbunit](http://www.dbunit.org/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T08:51:12.727

我用过

> 模式导出

为了解决这个问题，

```
LocalContainerEntityManagerFactoryBean localSessionFactoryBean = getLocalSessionFactoryBean(applicationContext);

        Configuration conf = new Ejb3Configuration().configure(
                localSessionFactoryBean.getPersistenceUnitInfo(), null)
                .getHibernateConfiguration();
        SchemaExport export = new SchemaExport(conf, localSessionFactoryBean
                .getDataSource().getConnection());
        export.create(true, true);

public LocalContainerEntityManagerFactoryBean getLocalSessionFactoryBean(
            ApplicationContext applicationContext) {

        return (LocalContainerEntityManagerFactoryBean) applicationContext
                .getBean(LocalContainerEntityManagerFactoryBean.class);
    } 
```

# jquery - 如何将文件路径从控制器中的操作传递到 $.AJAX 成功函数

> ID：16188780
> 
> 赞同：0
> 
> 时间：2013-04-24T09:48:41.880
> 
> 标签：jquery, model-view-controller

如何将文件路径从控制器中的操作传递到 $.AJAX 成功函数。

```
[HttpPost]
public JsonResult OrgLevelReport(string startdate, string enddate)
{
    string file = "D:/Sample.xlsx";
    return Json(file);
}
$.ajax({
    url: '@Url.Action("OrgLevelReport", "Reports")',
    type: 'POST',
    data: { startdate: startdate, enddate: enddate },
    datatype: 'json',
    success: function (bbb) {
        alert(bbb);
        alert("1");
        if (window.ActiveXObject) {
            try {
                var objExcel;
                objExcel = new ActiveXObject("Excel.Application");
                objExcel.Visible = true;
                objExcel.Workbooks.Open(bbb, false);
            }
            catch (e) {
                alert(e.message);
            }
        } else {
            alert("Your browser does not support this.");
        }
    }
}); 
```

`alert(bbb)`行显示 PK...无效字符串而不是实际字符串。

# iphone - IOS 应用程序中的 instagram 集成中的“重定向 URI 与注册的重定向 URI 不匹配”

> ID：16188786
> 
> 赞同：9
> 
> 时间：2013-04-24T09:48:53.940
> 
> 标签：iphone, ios, objective-c, ipad, instagram

我正在开发 iPad 应用程序，我需要集成 Instagram。我找到了一个工作正常的样本。但是来到我的应用程序时，我在 Instagram 开发者帐户中注册为新用户。尽管我按照 Instagram API 文档中所述的步骤进行操作，但我收到错误消息“重定向 URI 与注册的重定向 URI 不匹配”。

有人可以指导我如何生成重定向 URI 吗？

这是我在 Instagram 中所做的。![在此处输入图像描述](https://i.stack.imgur.com/W5021.png)

在我的模拟器中，我收到了这个错误：

![在此处输入图像描述](https://i.stack.imgur.com/C5SrX.png)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-07-12T21:05:28.853

为您的应用程序使用重定向 URI：igeb6240d263fb4736b3740af87edd18ea://authorize

您的 REDIRECT URI 应为：“ig”+“您的 clientId”+“://authorize”

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-16T23:52:25.737

您可以使用任何您想要的作为重定向 URI。您必须在授权请求中将重定向 URI 作为 Get 参数传递。

确保两者匹配！您可以导航到子文件夹或向其中添加其他参数，但它的开头必须保持不变。

我建议不要使用您的网站，而是链接到您的应用程序 url 方案之一。有关如何设置的指南，请查看此处：[http ://www.idev101.com/code/Objective-C/custom_url_schemes.html](http://www.idev101.com/code/Objective-C/custom_url_schemes.html)

因此，例如，您可以使用`myapp://`您想要在 instagram 注册的默认重定向 URI。

在您的应用程序中，您可以向其添加其他参数。Instagram 会将它们传递到您的重定向 URI，因此您可以在 AppDelegate 或服务器上再次读取它们。确保正确编码重定向 URI。最简单的方法是：

```
NSString *unescaped = [NSString stringWithFormat:@"myapp://?someparameter=%@",theparametersvalue];
NSString *redirectURI = (NSString *)CFBridgingRelease(CFURLCreateStringByAddingPercentEscapes(
                                                                      NULL,
                                                                      (__bridge CFStringRef) unescaped,
                                                                      NULL,
                                                                      CFSTR("!*'();:@&=+$,/?%#[]"),
                                                                      kCFStringEncodingUTF8)); 
```

现在将`redirectURI`您的客户端 ID 与此 URL 一起插入并触发请求：

```
https://api.instagram.com/oauth/authorize/?client_id=YOURCLIENTID&redirect_uri=YOURREDIRECTURI&response_type=code 
```

如果您需要的不仅仅是基本权限，请查看文档中的范围。

# mongodb - MongoDB reduce 函数未运行

> ID：16188788
> 
> 赞同：1
> 
> 时间：2013-04-24T09:49:10.377
> 
> 标签：mongodb, mapreduce

我已将以下 sql 语句翻译为 map reduce：

```
select
    p_brand,    p_type,     p_size, 
    count(ps_suppkey) as supplier_cnt
from 
    partsupp, part
where 
    p_partkey = ps_partkey
    and p_brand <> 'Brand#45'
    and p_type not like 'MEDIUM POLISHED %'
    and p_size in (49, 14, 23, 45, 19, 3, 36, 9)
    and ps_suppkey not in (
            select 
            s_suppkey
            from 
            supplier
            where 
            s_comment like '%Customer%Complaints%'
        )
group by 
    p_brand, p_type, p_size
order by 
    supplier_cnt desc, p_brand, p_type, p_size; 
```

地图归约功能：

```
db.runCommand({
    mapreduce: "partsupp",
    query: {
        "ps_partkey.p_size": { $in: [49, 14, 23, 45, 19, 3, 36, 9] },
        "ps_partkey.p_brand": { $ne: "Brand#45" }
    },
    map: function() {
        var pattern1 = /^MEDIUM POLISHED .*/;
        var pattern2 = /.*Customer.*Complaints.*/;

        var suppkey = this.ps_suppkey.s_suppkey;

        if( this.ps_suppkey.s_comment.match(pattern1) == null ){
            if(this.ps_suppkey.s_comment.match(pattern2) != null){
                emit({p_brand: this.ps_partkey.p_brand, p_type: this.ps_partkey.p_type, p_size: this.ps_partkey.p_size}, suppkey);
            }
        }
    },
    reduce: function(key, values) {
        return values.length;
    },
    out: 'query016'
}); 
```

输出结果（在我看来）没有减少：

```
{
        "result" : "query016",
        "timeMillis" : 46862,
        "counts" : {
                "input" : 122272,
                "emit" : 54,
                "reduce" : 0,
                "output" : 54
        },
        "ok" : 1
} 
```

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T03:45:33.200

map 函数输出键值对。

reduce 函数的目的是为同一个键组合多个值。这意味着如果特定键值仅在它只有一个值时才发出，并且没有什么可以减少的。

这是您必须以与 reduce 函数将返回的格式完全相同的格式在 emit 语句中输出值的原因之一。

地图输出：

```
emit(key1, valueX);
emit(key1, valueY);
emit(key2, valueZ); 
```

Reduce 结合 valueX 和 valueY 为 key1 返回新的 valueXY ，最终结果将是：

```
key1, valueXY
key, valueZ 
```

请注意，reduce 从未在 key2 上调用过。对于每个键值，Reduce 函数可能会被调用零次、一次或多次，因此您必须小心地构造 map 和 reduce 函数以允许这种可能性。

您的 map 函数没有发出正确的值 - 您想要进行计数，因此您必须输出一个*count*。您的 reduce 函数必须遍历已经累积的计数并将它们相加并返回组合计数。您可能想查看 MongoDB 文档中提供的一些示例。

您可能可以使用聚合框架更简单地执行此操作 - 我认为此处不需要 MapReduce，除非您期望输出大量结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-23T19:19:37.137

我怀疑你打电话`emit(value,key)`而不是`emit(key,value)`.

正如其他人已经说过的，映射值和缩减值必须具有相同的结构。如果您只想进行计数，请映射 value=1 并在 reduce 函数中 return `Array.sum(values)`。

# javascript - 将多维输入数组转换为 JSON

> ID：16188800
> 
> 赞同：2
> 
> 时间：2013-04-24T09:49:48.027
> 
> 标签：javascript, jquery, json, multidimensional-array

我想最终获取我的输入字段**值**并将它们放入 JSON 字符串中（通过 Jquery/Javascript）。

这是我的 html 标记

```
<input type="text" class="specifications" name="specifications[0][title]" />
<input type="text" class="specifications" name="specifications[0][stat]" />

<input type="text" class="specifications" name="specifications[1][title]" />
<input type="text" class="specifications" name="specifications[1][stat]" />

<input type="text" class="specifications" name="specifications[2][title]" />
<input type="text" class="specifications" name="specifications[2][stat]" />

<input type="text" class="specifications" name="specifications[3][title]" />
<input type="text" class="specifications" name="specifications[3][stat]" /> 
```

我希望我的 JSON 字符串是这样的

```
[
{ title: 'title1', stat: '1000' },
{ title: 'title1', stat: '2000' },
{ title: 'title2', stat: '3000' },
{ title: 'title3', stat: '4000' },
{ title: 'title4', stat: '5000' }
] 
```

我现在搜索了很多并找到了这些线程，但它们并没有帮助我完成我想要完成的事情

[jquery用数组序列化输入](https://stackoverflow.com/questions/11127227/jquery-serialize-input-with-arrays)

[使用 jquery ajax post 提交表单输入数组](https://stackoverflow.com/questions/14474658/submit-form-input-array-with-jquery-ajax-post)

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T10:10:15.630

这将根据您的输入创建您描述的对象：

```
 var specsLen = $('input.specifications').length / 2,
        array = [],
        i;
    for (i = 0; i < specsLen; i += 1) {
        array.push({
            title: $('input.specifications[name="specifications[' + i + '][title]"]').val(),
            stat: $('input.specifications[name="specifications[' + i + '][stat]"]').val()
        });
    }) 
```

[参见小提琴示例](http://jsfiddle.net/D4EaY/)

# c++ - 命名管道中的多个 writefile 和 readfile

> ID：16188802
> 
> 赞同：1
> 
> 时间：2013-04-24T09:49:51.103
> 
> 标签：c++, file-io, pipe, named-pipes

我需要通过管道传递一些字符串。我们不能通过管道传递指针，我们必须传递数据。为了传递一个字符串，我们可以发送一个字符数组。但我不想使用数组。我需要一种以可变大小发送字符串的方法。

我使用 msdn 示例来创建管道服务器和管道客户端：

但是在管道客户端和管道服务器中，我不是只有一个 writeFile 和 readFile 函数，而是以这种方式使用了它们三次：

我使用了一个结构来保存我的字符串大小。首先发送这个结构。然后我的两个字符串将被发送。所以首先在管道服务器中，将读取字符串的大小，然后接收两个字符串。

我在客户端和服务器程序中都定义了这样的结构：

```
typedef struct 
{
    int fileNameLen;
    int commandArgLen;
}pipeData,*PpipeData;

   pipeData dataToWrite;
   pipeData *pdataToWrite = &dataToWrite; 
```

在管道客户端我想发送这个字符串：

```
 LPTSTR s1 = TEXT("file1");
   LPTSTR s2 = TEXT("startCmd");

   dataToWrite.commandArgLen = sizeof(s1);
   dataToWrite.fileNameLen = sizeof(s2); 
```

我以这种方式通过管道客户端发送了结构。

```
 fSuccess = WriteFile( 
      hPipe,                  // pipe handle 
      pdataToWrite,             // message 
      sizeof(dataToWrite),              // message length 
      &cbWritten,             // bytes written 
      NULL);                  // not overlapped 

   if ( ! fSuccess) 
   {
      _tprintf( TEXT("WriteFile to pipe failed. GLE=%d\n"), GetLastError() ); 
      return -1;
   }

   fSuccess = WriteFile( 
      hPipe,                  // pipe handle 
      s1,             // message 
      sizeof(s1),     // message length 
      &cbWritten,             // bytes written 
      NULL);                  // not overlapped 

   if ( ! fSuccess) 
   {
      _tprintf( TEXT("WriteFile to pipe failed. GLE=%d\n"), GetLastError() ); 
      return -1;
   }

   fSuccess = WriteFile( 
      hPipe,                  // pipe handle 
      s2,             // message 
      sizeof(s2),     // message length 
      &cbWritten,             // bytes written 
      NULL);                  // not overlapped 

   if ( ! fSuccess) 
   {
      _tprintf( TEXT("WriteFile to pipe failed. GLE=%d\n"), GetLastError() ); 
      return -1;
   } 
```

在管道服务器中读取管道我使用 3 readFile 像这样：

```
 fSuccess = ReadFile( 
         hPipe,        // handle to pipe 
         pdataToWrite,    // buffer to receive data 
         sizeof(pdataToWrite), // size of buffer 
         &cbBytesRead, // number of bytes read 
         NULL);        // not overlapped I/O 

      if (!fSuccess || cbBytesRead == 0)
      {   
          if (GetLastError() == ERROR_BROKEN_PIPE)
          {
              _tprintf(TEXT("InstanceThread: client disconnected.\n"), GetLastError());
              break;
          }

          else
          {
              _tprintf(TEXT("InstanceThread ReadFile failed, GLE=%d.\n"), GetLastError());
              break;
          }

      }

   // Process the incoming message.
      GetAnswerToRequest(TEXT("structure recieved"), pchReply, &cbReplyBytes); 

      fSuccess = ReadFile( 
         hPipe,        // handle to pipe 
         s1,    // buffer to receive data 
         dataToWrite.commandArgLen, // size of buffer 
         &cbBytesRead, // number of bytes read 
         NULL);        // not overlapped I/O 

      if (!fSuccess || cbBytesRead == 0)
      {   
          if (GetLastError() == ERROR_BROKEN_PIPE)
          {
              _tprintf(TEXT("InstanceThread: client disconnected.\n"), GetLastError()); 
          }

          else
          {
              _tprintf(TEXT("InstanceThread ReadFile failed, GLE=%d.\n"), GetLastError()); 
          }
          break;
      }    
      GetAnswerToRequest(s1, pchReply, &cbReplyBytes); 

      fSuccess = ReadFile( 
         hPipe,        // handle to pipe 
         s2,    // buffer to receive data 
         dataToWrite.fileNameLen, // size of buffer 
         &cbBytesRead, // number of bytes read 
         NULL);        // not overlapped I/O 

      if (!fSuccess || cbBytesRead == 0)
      {   
          if (GetLastError() == ERROR_BROKEN_PIPE)
          {
              _tprintf(TEXT("InstanceThread: client disconnected.\n"), GetLastError()); 
          }

          else
          {
              _tprintf(TEXT("InstanceThread ReadFile failed, GLE=%d.\n"), GetLastError()); 
          }
          break;
      }

      GetAnswerToRequest(s2, pchReply, &cbReplyBytes); 
```

这种方式不能正常工作。当管道服务器在第一个 readFile 中读取数据时，它可能会返回此错误：ERROR_MORE_DATA（如果我在 createNamedPipe 中使用了 PIPE_TYPE_MESSAGE）

我不知道如何在管道客户端和服务器中使用多个 writeFile 和 readFile。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-03T06:38:34.517

如果在消息模式下读取命名管道并且下一条消息比 nNumberOfBytesToRead 参数指定的长，ReadFile 返回 FALSE，GetLastError 返回 ERROR_MORE_DATA。可以通过对 ReadFile 或 PeekNamedPipe 函数的后续调用来读取消息的其余部分。通过 MSDN

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa365467%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365467%28v=vs.85%29.aspx)

供参考

# ios - 我可以创建一个构建规则来监视 plist 中的更改并在运行时调用方法吗？

> ID：16188803
> 
> 赞同：2
> 
> 时间：2013-04-24T09:49:51.683
> 
> 标签：ios, xcode, uiappearance

我正在为 iOS 应用程序构建主题引擎，并且希望能够检测到 plist 文件的更改，然后更新包并在我的代码中触发一个方法来重新应用我修改过的样式。这是`UIAppearance`代理管理器。

我确信这是可能的，因为我使用过的 CSS/Ios 框架（如 NUI 和 Pixate）能够监控 CSS 的变化。

任何想法从哪里开始？

# android - Fragment Adapter AlertDialog findFragmentByTag 在手机上返回 null

> ID：16188804
> 
> 赞同：0
> 
> 时间：2013-04-24T09:49:53.527
> 
> 标签：android, android-fragments, android-adapter

我正在做一个典型的片段活动，左窗格 Fragment A 作为列表，右窗格 Fragment B 作为内容（在平板电脑上），在手机上两者都在一个窗格中。

一切都在平板电脑版本上运行良好。但是在手机版上我遇到了问题。我的 Fragment B 由一些 TextViews 和在它们下面的一个 GridView 组成。每次用户单击网格项时，我都想更新 TextViews。这工作正常。问题在于在网格适配器中实现 AlertDialog：

```
OnClickListener clickListener = new OnClickListener() {
    @Override
    public void onClick(View v) {
        AlertDialog.Builder builder = new AlertDialog.Builder(mContext.getContext());               
        ...             
        builder.setPositiveButton(mContext.getContext().getResources().getString(
            R.string.ok),  new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int which) {

                    fragActivity.getSupportFragmentManager().executePendingTransactions();

                    FragmentB f = (FragmentB)
                        ((MyActivity) fragActivity).getSupportFragmentManager()
                        .findFragmentByTag(FragmentB.TAG);

                    item.setAmount(helperDouble);  //shouldn't be relevant to the problem
                    if (f != null) {
                        Log.i("GridAdapter", "f is not null, updating views");
                        f.updateViews();                                    
                    } else {
                        Log.i("GridAdapter", "f is null, what the...");
                    }
                }
            }
        });

        AlertDialog dialog = builder.create();
        dialog.show();
    }
}; 
```

FragmentB f 每次在平板电脑上都返回正常，但无论我做什么，它总是在手机上返回 null。它似乎与[此 SO 帖子](https://stackoverflow.com/questions/9966928/finding-fragment-view-on-activity-android-findfragmentbytagstring-tag-returns)相似，但我不知道是否可以将其应用于我的情况。这是我在 MyActivity 中添加片段的方法：

```
@Override
public void onCustomerSelected(Customer customer, int index) {
    //update fragment here

    if (isScreenSizeLarge()) {  //if tablet:
        FragmentB f;
        //if fragment doesn't exist, create it
        if (getSupportFragmentManager().findFragmentByTag(FragmentB.TAG) == null) {
            f = FragmentB.newInstance(customer, index);
            FragmentTransaction trans = getSupportFragmentManager().beginTransaction();
            trans.add(R.id.fragment_b_container, f, FragmentB.TAG);
            trans.commit();
            getSupportFragmentManager().executePendingTransactions();
        } else {
            f = (FragmentB) getSupportFragmentManager()
                .findFragmentByTag(FragmentB.TAG);
        }
    } else {       //if phone:
        FragmentB newCartFrag = FragmentB.newInstance(customer, index);
        FragmentTransaction newTrans = getSupportFragmentManager().beginTransaction();
        newTrans.replace(R.id.fragment_container, newCartFrag);
        newTrans.addToBackStack(FragmentB.TAG);
        newTrans.commit();
        getSupportFragmentManager().executePendingTransactions();
    }
} 
```

（是的，我知道我调用了 executePendingTransactions() 两次，以防万一。）

所以我假设问题与片段的片段（或片段活动）“失去焦点”有关。我只是不明白为什么它会在平板电脑上找到它（它可能会失去焦点，因为它需要担心两个片段）而不是手机（其中 FragmentB 是当时唯一的活动片段）之间的区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T13:14:14.017

在 onCustomerSelected() 中，我忘记在“替换”行中添加标签。

代替

```
newTrans.replace(R.id.fragment_container, newCartFrag); 
```

应该是

```
newTrans.replace(R.id.fragment_container, newCartFrag, FragmentB.TAG); 
```

非常小的东西，所以我花了很长时间才找到。

# java - 是否可以创建用户定义的 POJO 原语的新实例

> ID：16188808
> 
> 赞同：0
> 
> 时间：2013-04-24T09:50:15.353
> 
> 标签：java, reflection

我有课`TestClass`是否可以在运行时为此创建新实例？就像我们`TestClass someObj = new TestClass(); also TestClass[] someObj = new TestClass();`为 java 原始类型创建相同的东西的方式一样。

如果可以通过示例支持答案，是否可以通过反思。

编辑：

```
import java.awt.Rectangle;

public class SampleNoArg {

   public static void main(String[] args) {
      Rectangle r = (Rectangle) createObject("java.awt.Rectangle");
      System.out.println(r.toString());
   }

   static Object createObject(String className) {
      Object object = null;
      try {
          Class classDefinition = Class.forName(className);
          object = classDefinition.newInstance();
      } catch (InstantiationException e) {
          System.out.println(e);
      } catch (IllegalAccessException e) {
          System.out.println(e);
      } catch (ClassNotFoundException e) {
          System.out.println(e);
      }
      return object;
   }
} 
```

与上面相同，但我想创建一些对象数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:19:37.020

您不能使用[Class#newInstance](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#newInstance%28%29)来实例化数组：

> InstantiationException - 如果此类表示抽象类、接口、**数组类**、原始类型或 void；或者如果该类没有空构造函数；或者如果实例化由于某种其他原因而失败。

这是一个可能的解决方法：

```
@SuppressWarnings("unchecked")
public static <T> T[] newArray(Class<T> clazz, int n) {
    return (T[]) Array.newInstance(clazz, n);
} 
```

# entity-framework - 如何通知 ViewModel 模型（EntityObject）计算属性的变化

> ID：16188811
> 
> 赞同：0
> 
> 时间：2013-04-24T09:50:26.963
> 
> 标签：entity-framework, mvvm, viewmodel

我已经向我的模型（实体框架自动生成的类）添加了一个计算属性。**我如何通知 ViewModel 对此属性的任何更改**？计算的属性位于我的部分类中，因此该类是一个 EntityObject。

EF EntityObject 类在每个自动生成的属性上都有 ReportPropertyChanged，但是如何使用我自己的计算属性来做到这一点？如果我尝试使用它，我会得到一个 ArgumentException: The property 'xxxxxx' does not have a valid entity mapping on the entity object。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T22:31:56.683

据我了解，您已扩展 EF 实体以添加计算属性，并且您希望在计算属性更改时相应地更新 UI。

在这种情况下，`INotifyPropertyChanged`在您的部分类上实现，然后`OnPropertyChanged("propertyName")`在您的计算属性更新时调用。

# java - 为什么数组列表动态增加而不是动态减少

> ID：16188813
> 
> 赞同：4
> 
> 时间：2013-04-24T09:50:28.277
> 
> 标签：java, collections

我有一个简单的疑问，当 Arraylist 变满时，它会随着因子（2,1.5 或 old_capacity*3/2 +1 或其他任何值）增加它的大小，并在其中添加新元素。那么如果数字被某些因素删除，为什么不动态减小它的大小。就像我在 arraylist 中有 10000 个元素并且在特定时间所有元素都被删除了，现在数组列表中只有 100 个元素它仍然拥有 10000 个对象内存。为什么我必须调用 trimTosize() 之类的？为什么不是他们的自动？我错过了什么 .. ？请不要告诉我该怎么做，我想知道为什么我们必须这样做？？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T09:53:10.007

> 那么如果数字被某些因素删除，为什么不动态减小它的大小。

出于**性能**原因。分配内存始终是一项昂贵的操作。不释放它背后的逻辑是，如果你的数据结构已经达到给定的大小，即使你删除了元素，那么它将来可能会再次达到那个大小。

重新分配也可能很昂贵（这取决于实现，但通常是正确的。请参阅[realloc](http://www.cplusplus.com/reference/cstdlib/realloc/)的 C），因为您可能需要释放先前分配的内存的整个块，然后为调整大小的结构重新分配一个新的块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:59:42.143

如果一个`ArrayList`已满并且您想添加一个新元素，那么除了增加它的大小之外别无他法。如果您删除条目并且尺寸变小，则实际上不需要调整它的大小 - 将其保持在其大小将是更高效的方式。也许很快会添加新项目？

如果你想让它变小，你仍然可以使用`trimToSize()`.

因此，自动增加其大小是有意义的，但不会自动减小它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T09:53:31.663

因为如果你有一个包含一百万成员的列表，然后删除一个，你真的想将 999,999 个引用复制到一个新数组吗？

编辑：为了解决评论中的一个问题 - 在集合“自动”调整大小时设置一些阈值的问题是它使性能管理变得困难。

如果我从数组列表中删除一个元素，我希望该操作需要一定的时间。第 499,999 次删除应该花费与第 500,000 次删除相似的时间。如果我真的想在某个时候调整集合的大小，我可以使用提供的方法来做到这一点 - 但它在*我的*控制之下。

# android - 在Android真机上运行时地图不显示

> ID：16188816
> 
> 赞同：0
> 
> 时间：2013-04-24T09:50:36.403
> 
> 标签：android, google-maps, nullpointerexception

我已经编写了代码来显示地图并在真实设备上运行。但地图显示为空。

这是我的代码，

```
 package com.example.findproperty;

public class MainActivity extends FragmentActivity implements LocationListener {

private static final String TABLE_NAME = "LatsLongs";
private static final String COLUMN_ID = "_Id";
private static final String Latitude = "Latitude";
private static final String Longitude = "Longitude";
Double Lat;
Double Long;
protected static final int UPDATE_LATLNG = 2;
protected static final int UPDATE_ADDRESS = 0;
public final android.content.Context Context = MainActivity.this;
LocationManager lm;
String textmessage = "";
String phonenumber = "";
GoogleMap mMap;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    int chkGooglePlayServices = GooglePlayServicesUtil
            .isGooglePlayServicesAvailable(Context);
    if (chkGooglePlayServices != ConnectionResult.SUCCESS) {
        GooglePlayServicesUtil.getErrorDialog(chkGooglePlayServices,
                (Activity) Context, 1122).show();
    } else {
        mMap = ((SupportMapFragment) getSupportFragmentManager()
                .findFragmentById(R.id.map)).getMap();
        mMap.setMapType(GoogleMap.MAP_TYPE_NORMAL);
        lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        final boolean isProviderEnabled = lm
                .isProviderEnabled(LocationManager.GPS_PROVIDER);
        Criteria criteria = new Criteria();
        criteria.setAccuracy(Criteria.ACCURACY_FINE);
        String locationprovider = lm.getBestProvider(criteria, true);

        // Location Update
        LocationListener listener = new LocationListener() {
            @Override
            public void onLocationChanged(Location location) {
                mMap.clear();
                final CameraPosition cameraPosition = new CameraPosition.Builder()
                        .target(new LatLng(location.getLatitude(), location
                                .getLongitude())).zoom(14.0f).build();
                final CameraUpdate cameraUpdate = CameraUpdateFactory
                        .newCameraPosition(cameraPosition);
                mMap.moveCamera(cameraUpdate);
            }

            AlertDialog.Builder dialog = new AlertDialog.Builder(Context)
                    .setTitle(R.string.RemindEnableGps);
            AlertDialog alert = dialog.create();

            @Override
            public void onProviderDisabled(String provider) {
                alert.setCanceledOnTouchOutside(false);
                alert.setCancelable(true);
                alert.show();

            }

            @Override
            public void onProviderEnabled(String provider) {
                alert.dismiss();

            }

            @Override
            public void onStatusChanged(String provider, int status,
                    Bundle extras) {
            }
        };

        lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0,
                listener);
        final Location mLocation = lm
                .getLastKnownLocation(LocationManager.GPS_PROVIDER);

        final CameraPosition cameraPosition = new CameraPosition.Builder()
                .target(new LatLng(mLocation.getLatitude(), mLocation
                        .getLongitude())).zoom(14.0f).build();
        final CameraUpdate cameraUpdate = CameraUpdateFactory
                .newCameraPosition(cameraPosition);
        mMap.moveCamera(cameraUpdate);
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub

}

@Override
public void onProviderEnabled(String provider) {
    // TODO Auto-generated method stub

}

@Override
public void onProviderDisabled(String provider) {
    // TODO Auto-generated method stub

}

@Override
public void onLocationChanged(Location location) {
    // TODO Auto-generated method stub

}

} 
```

清单.xml，

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<permission
    android:name="com.example.findproperty.permission.MAPS_RECEIVE"
    android:protectionLevel="signature" />

<uses-permission android:name="com.example.findproperty.permission.MAPS_RECEIVE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

<uses-feature
    android:glEsVersion="0x00020000"
    android:required="true" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.findproperty.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="My_API_KEY" />
 </application>

</manifest> 
```

activity_main.xml，

```
<?xml version="1.0"?>
<RelativeLayout xmlns:tools="http://schemas.android.com/tools"
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<fragment
    android:id="@+id/map"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_marginBottom="30dp"
    android:layout_marginLeft="30dp"
    android:layout_marginRight="30dp"
    android:layout_marginTop="60dp"
    class="com.google.android.gms.maps.SupportMapFragment"
    android:clickable="true" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/edtSearch"
    android:layout_alignLeft="@+id/map"
    android:text="Limit Distance:" />

<EditText
    android:id="@+id/edtSearch"
    android:layout_width="60dp"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/btnSearch"
    android:layout_centerHorizontal="true"
    android:ems="10"
    android:inputType="number" />

<Button
    android:id="@+id/btnSearch"
    android:layout_width="wrap_content"
    android:layout_height="35dp"
    android:layout_alignParentTop="true"
    android:layout_alignRight="@+id/map"
    android:layout_marginRight="14dp"
    android:layout_marginTop="15dp"
    android:text="Find" />

</RelativeLayout> 
```

当我调试它显示的应用程序时，mMap 为空，mLocation 也为空。我没有得到 Gps 坐标。

这是我的Logcat，

```
04-24 15:17:53.143: I/ApplicationPackageManager(10248): cscCountry is not German : INS
04-24 15:17:53.182: D/dalvikvm(10248): DexOpt: couldn't find field Landroid/content/res/Configuration;.smallestScreenWidthDp
04-24 15:17:53.182: W/dalvikvm(10248): VFY: unable to resolve instance field 23
04-24 15:17:53.182: D/dalvikvm(10248): VFY: replacing opcode 0x52 at 0x0012
04-24 15:17:53.190: D/dalvikvm(10248): VFY: dead code 0x0014-0018 in Lcom/google/android/gms/common/GooglePlayServicesUtil;.b (Landroid/content/res/Resources;)Z
04-24 15:17:53.331: W/dalvikvm(10248): Unable to resolve superclass of Lmaps/p/s; (425)
04-24 15:17:53.331: W/dalvikvm(10248): Link of class 'Lmaps/p/s;' failed
04-24 15:17:53.331: W/dalvikvm(10248): Unable to resolve superclass of Lmaps/y/bo; (3818)
04-24 15:17:53.331: W/dalvikvm(10248): Link of class 'Lmaps/y/bo;' failed
04-24 15:17:53.339: W/dalvikvm(10248): Unable to resolve superclass of Lmaps/i/k; (4206)
04-24 15:17:53.339: W/dalvikvm(10248): Link of class 'Lmaps/i/k;' failed
04-24 15:17:53.339: E/dalvikvm(10248): Could not find class 'maps.i.k', referenced from method maps.z.ag.a
04-24 15:17:53.339: W/dalvikvm(10248): VFY: unable to resolve new-instance 3538 (Lmaps/i/k;) in Lmaps/z/ag;
04-24 15:17:53.339: D/dalvikvm(10248): VFY: replacing opcode 0x22 at 0x006d
04-24 15:17:53.354: D/dalvikvm(10248): VFY: dead code 0x006f-007f in Lmaps/z/ag;.a (Landroid/view/LayoutInflater;Lcom/google/android/gms/maps/GoogleMapOptions;ZLjava/lang/String;)Lmaps/z/ag;
04-24 15:17:53.448: D/dalvikvm(10248): GC_CONCURRENT freed 367K, 48% free 3090K/5831K, external 688K/1036K, paused 3ms+4ms
04-24 15:17:53.472: I/ApplicationPackageManager(10248): cscCountry is not German : INS
04-24 15:17:53.643: D/dalvikvm(10248): GC_CONCURRENT freed 315K, 45% free 3324K/6023K, external 688K/1036K, paused 4ms+5ms
04-24 15:17:53.768: E/Google Maps Android API(10248): Failed to load map.  Could not contact Google servers.
04-24 15:17:53.870: W/dalvikvm(10248): threadid=1: thread exiting with uncaught exception (group=0x40018578)
04-24 15:17:53.870: E/AndroidRuntime(10248): FATAL EXCEPTION: main
04-24 15:17:53.870: E/AndroidRuntime(10248): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.findproperty/com.example.findproperty.MainActivity}: java.lang.NullPointerException
04-24 15:17:53.870: E/AndroidRuntime(10248):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
04-24 15:17:53.870: E/AndroidRuntime(10248):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
04-24 15:17:53.870: E/AndroidRuntime(10248):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-24 15:17:53.870: E/AndroidRuntime(10248):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
04-24 15:17:53.870: E/AndroidRuntime(10248):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-24 15:17:53.870: E/AndroidRuntime(10248):    at android.os.Looper.loop(Looper.java:130)
04-24 15:17:53.870: E/AndroidRuntime(10248):    at android.app.ActivityThread.main(ActivityThread.java:3687)
04-24 15:17:53.870: E/AndroidRuntime(10248):    at java.lang.reflect.Method.invokeNative(Native Method)
04-24 15:17:53.870: E/AndroidRuntime(10248):    at java.lang.reflect.Method.invoke(Method.java:507)
04-24 15:17:53.870: E/AndroidRuntime(10248):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
04-24 15:17:53.870: E/AndroidRuntime(10248):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
04-24 15:17:53.870: E/AndroidRuntime(10248):    at dalvik.system.NativeStart.main(Native Method)
04-24 15:17:53.870: E/AndroidRuntime(10248): Caused by: java.lang.NullPointerException
04-24 15:17:53.870: E/AndroidRuntime(10248):    at com.example.findproperty.MainActivity.onCreate(MainActivity.java:130)
04-24 15:17:53.870: E/AndroidRuntime(10248):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-24 15:17:53.870: E/AndroidRuntime(10248):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
04-24 15:17:53.870: E/AndroidRuntime(10248):    ... 11 more
04-24 15:17:54.089: D/dalvikvm(10248): GC_CONCURRENT freed 311K, 44% free 3542K/6279K, external 929K/1036K, paused 4ms+4ms 
```

该设备已安装 google-play-services。并且启用了gps。但地图显示为空。

**我的移动设备无法访问互联网。**

请任何人帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:02:01.393

1.  在这部分：

    我假设“My_API_KEY”部分被您的实际 API 密钥替换，对吧？

2.  这条线是否抛出异常？

    mMap.setMapType(GoogleMap.MAP_TYPE_NORMAL);

3.  看看这个链接：

[Google Play 服务 - SupportMapFragment.getMap() 总是返回 null](https://stackoverflow.com/questions/14067889/google-play-service-supportmapfragment-getmap-always-returning-null)

# css - 在 wordpress 的列中显示图像和文本

> ID：16188817
> 
> 赞同：0
> 
> 时间：2013-04-24T09:50:37.857
> 
> 标签：css, wordpress, html

我正在尝试在 wordpress 中创建一个 2 列布局，左侧是图像，右侧是文本。这需要最大为 600 像素宽度，图像都将是 250 像素宽和 142 像素高的固定尺寸，我将在下面重复图像/文本，如本网站[http://housemusicpodcasts.co.uk/latest -播客/](http://housemusicpodcasts.co.uk/latest-podcasts/)

我所有的尝试都导致文本只出现在图像下方。我希望能够在不需要更改核心文件的情况下使用 html/css。

编辑：好的，我有这段代码，但它没有正确对齐，有什么想法我需要改变吗？

```
<div class="pod">
<div class="singleblock">
<div class="wp-caption align:left;" style="width: 250px;"><img title="TEST" alt=""       src="http://www.djdavestewart.com/site/wp-content/uploads/2013/04/test.jpg" width="250" height="142" hspace="5" vspace="5" />
<p class="wp-caption-text">TEST CAPTION</p>

</div>
<p>TEXT HERE</p>
<p style="text-align:right;">Read More....</p>
</div>
</div>

<div class="pod">
<div class="singleblock">
<div class="wp-caption align:left;" style="width: 250px;"><img title="TEST" alt="TEST" src="http://www.djdavestewart.com/site/wp-content/uploads/2013/04/test.jpg" width="250" height="142" hspace="5" vspace="5" />
<p class="wp-caption-text">TEST CAPTION</p>

</div>
<p style="text-align: left;">TEXT HERE</p>
<p style="text-align: right;">Read More....</p>
</div>
</div> 
```

CSS

```
.pod p {
margin: 0px;
padding: 0px;
float: left;
clear: right;
}

.singleblock {
float:left;
clear:left;
margin-bottom: 10px;
} 
```

任何指导将不胜感激。

加里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:40:10.437

for each couple of image/text, put them in a div. put a class on this div, and on use this CSS

```
.yourdive img{
  float : left;
} 
```

# jsp - Displaytag struts 2 转到特定页面

> ID：16188819
> 
> 赞同：1
> 
> 时间：2013-04-24T09:50:39.607
> 
> 标签：jsp, struts2, pagination, displaytag, ognl

在我的项目中，我正在使用显示标签。当返回的结果像 300 页时，问题就来了。用户需要跳转到页面，例如 200，但他不能。他需要慢慢地去那里（一次5页左右）。我想为用户添加在下拉列表中选择他想要跳转到的页面的能力。显示标签中是否有任何属性或任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T14:55:59.600

在您的情况下，您需要使用[**ParamEncoder**](http://www.displaytag.org/1.2/displaytag/apidocs/org/displaytag/util/ParamEncoder.html)来获取在[**TableTagParameters.html**](http://displaytag.sourceforge.net/11/displaytag/apidocs/org/displaytag/tags/TableTagParameters.html)中指定的参数的**名称**（以及最终的**值**）。`displayTag`[](http://displaytag.sourceforge.net/11/displaytag/apidocs/org/displaytag/tags/TableTagParameters.html)**`PARAMETER_PAGE`**

 **```
<div>
    With Scriptlets 
    <br/>
    <% String pageNumParameter = 
              new org.displaytag.util.ParamEncoder("id_of_your_displaytag_table").encodeParameterName(org.displaytag.tags.TableTagParameters.PARAMETER_PAGE); %>
    [parameter name] = <%= pageNumParameter %>
    <br/>
    [parameter value]= <%= request.getParameter(pageNumParameter) %> 
</div>

<div>
    With OGNL
    <br/>   
    <s:set var="pageNumParameter" 
           value="%{new org.displaytag.util.ParamEncoder('id_of_your_displaytag_table').encodeParameterName(@org.displaytag.tags.TableTagParameters@PARAMETER_PAGE)}" />        
    [parameter name] = <s:property value="%{#pageNumParameter}"/>
    <br/>
    [parameter value]= <s:property value="#parameters[#pageNumParameter]"/>
</div> 
```

然后，您应该能够通过为该表`request`传递*动态*生成的参数以及您想要的值（来自 a `SelectBox`、来自 an `Input Text`、来自脚本等）来制作 a**

# linux - htpasswd：创建了错误的凭据

> ID：16188824
> 
> 赞同：1
> 
> 时间：2013-04-24T09:50:49.543
> 
> 标签：linux, fedora, .htpasswd

我试图在运行 Linux Fedora 18 的机器上设置 svn。我使用 htpasswd 创建并添加了新用户。所以基本上我所做的是：

```
$ htpasswd -c passwd admin. 
```

其中 passwd 是包含用户名/密码对的文件。默认情况下，htpasswd 应该使用 md5 来加密密码。因此，后来当我尝试登录时，即使我提供了正确的用户名和密码，我也无法登录。在尝试了不同的事情之后，我去了一些在线 md5 生成器，输入了相同的密码。结果字符串与 htpasswd 生成的字符串不同。我手动编辑了passwd文件，输入了我从网站上得到的md5密码并成功登录。是htpasswd有问题还是有一些系统设置需要修复？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-31T07:52:00.053

The syntax is

```
htpasswd -c passwdfile username 
```

or

```
htpasswd -cb passwdfile username yourpassword 
```

The default hash algorithm is MD5 since version 2.2.18 of apache (you can identify it by the $apr1$ prefix). Before that, the default hash was unix crypt, (without a prefix). If your apache version is <2.2.18, you'd better force md5 with

```
htpasswd -cm passwdfile username
htpasswd -cbm passwdfile username yourpassword 
```

Maybe after that you should check your passwdfile is correctly created (do you havec permissions etc).

When you generate an MD5 hash, with online tools or with the htpasswd command-line, it's different each time because it uses a random salt.

# html - 使用版本号后缀防止图像缓存

> ID：16188826
> 
> 赞同：2
> 
> 时间：2013-04-24T09:50:52.313
> 
> 标签：html, image, caching

是否有任何理由将版本号附加到图像的 src 属性以防止缓存是一个坏主意？例如：

```
<img alt='Test' src='images/cat.png?v=1.456'/> 
```

在重复浏览器访问时，图像会被缓存，直到版本号更改。仅当这些特定图形已更改时，才会更新版本号。

这是有效的标记和明智的技术吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T09:56:31.013

它是有效的标记，在大多数情况下，它是一种简单、直接的技术来实现所需的结果。

但是，正确的解决方案是将适当的 HTTP 缓存控制标头与图像资源一起使用。[`ETag`](http://en.wikipedia.org/wiki/HTTP_ETag)特别是标题旨在解决这个确切的问题。

# performance - Java7 System.identityHashCode 性能

> ID：16188827
> 
> 赞同：2
> 
> 时间：2013-04-24T09:50:53.167
> 
> 标签：performance, java-7, hashcode, xstream

现场：

*   我正在使用 XStream，它经常使用 System.identityHashCode。
*   我已从 IBM Java 1.5 迁移到 Oracle Java 7

问题：

我看到了一个性能问题，并且发现 System.identityHashCode 可能是我的问题。

问题：

*   有什么好的解释为什么我看到新 Java 的性能下降（以及从 IBM 到 Oracle 的变化）？
*   我如何绕过这个瓶颈？

以下是我的基准测试（都在相同的硬件上运行）：

```
32 bit Oracle Java 7

System.identityHashCode: 517669471 - 51ns
Object.hashCode: 491220730 - 49ns

64 bit Oracle Java 7:

System.identityHashCode: 353134647 - 35ns
Object.hashCode: 339331774 - 33ns

IBM Java 1.5

System.identityHashCode: 19241979 - 1ns
Object.hashCode: 89621026 - 8ns 
```

基准测试程序的来源是：

```
import java.util.*;

public class HashCodeTest
{
  static int ITS = 10000000;
  static Object O = new Object();

  public static void main(String[] args)
  {
    TreeSet<Integer> large = new TreeSet<Integer>();
    Random ran = new Random();
    for (int i=0; i<10000; i++) {
      large.add(ran.nextInt());
    }

    testIdentityHashCode(large);
    testHashCode(large);
    testIdentityHashCode(large);
    testHashCode(large);
  }

  protected static void testIdentityHashCode(TreeSet<Integer> large)
  {
    long start = System.nanoTime();
    for (int i=0; i<ITS; i++) {
      Object o = new Container(large);
      System.identityHashCode(o);
    }
    long end = System.nanoTime();
    System.out.println("System.identityHashCode: " + (end-start) + " - " + (end-start)/ITS + "ns");
  }

  protected static void testHashCode(TreeSet<Integer> large)
  {
    long start = System.nanoTime();
    for (int i=0; i<ITS; i++) {
      Object o = new Container(large);
      o.hashCode();
    }
    long end = System.nanoTime();

    System.out.println("Object.hashCode: " + (end-start) + " - " + (end-start)/ITS + "ns");
  }

  private static class Container {
    private final Object o;

    public Container(Object o)
    {
      this.o = o;
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-11T12:51:27.513

您看到这种差异可能是因为 System.identityHashCode 需要一些时间才能被内联和/或 Object.hashCode 被内联到您的方法中。另外，您实际上是在测量分配时间，因为您在循环的每一步都实例化了一个对象。

尝试这个：

```
public class HCTests {

static int ITS = 1000;

@Test
public void run() {

    Object[] o = newArray(1000);

    for (int i = 0; i < 10; i++) {
        timeHash(o);
    }

    System.out.println("----------------");

    for (int i = 0; i < 10; i++) {
        timeHash(newArray(1000));
    }

}

private Object[] newArray(int max) {
    Object[] o = new Object[max];

    for (int i = 0; i < o.length; i++) {
        o[i] = new Object();
    }

    return o;
}

private void timeHash(Object[] o) {
    //store the hashes to avoid possible dead-code elimination
    int[] hashes=new int[o.length];
    long start = System.nanoTime();

    for (int j = 0; j < ITS; j++) {
        for (int i = 0; i < o.length; i++) {
            hashes[i]=System.identityHashCode(o);
        }
    }

    long elapsed = System.nanoTime() - start;

    System.out.println("Elapsed " + elapsed + "(ns). Avg: " + (float)elapsed
            / (o.length * ITS));

    for (int i : hashes) {
        if(i==0) {
            System.out.println("Ooops, got 0 hashCode!!!");
        }
    }
}} 
```

对于我得到的第一个循环的输出（旧 Intel Core 2 Duo 2.1GHz）

**经过 7557271(ns)。平均：7.557271
经过 18508470（ns）。平均：18.50847**
...
**经过 2026678（ns）。平均：2.026678**

在第二个循环我得到

经过 2142041（ns）。平均：2.142041
经过 1951888（ns）。平均：1.951888
经过 1929891（ns）。平均：1.929891
经过 1934779（ns）。平均：1.934779
经过 1993438（ns）。平均：1.993438
经过 2133732（ns）。平均：2.133732
经过 1995882（ns）。平均：1.995882
经过 2326329（ns）。平均：2.326329
经过 1939178（ns）。平均：1.939178
经过 2275980（ns）。平均：2.275981

# cocoa - 可可守护进程应用程序没有完成启动未调用？

> ID：16188829
> 
> 赞同：0
> 
> 时间：2013-04-24T09:50:57.293
> 
> 标签：cocoa, daemon, reboot

全部：

我使用 Cocoa 编写了一个守护进程，它工作正常。但是在重新启动 MacBook Pro 后，不会调用 applicationDidFinishLaunching。
我注意到，当尝试使用 Xcode“Product->Attach to Process”附加进程时，它的图标是控制台应用程序图标，它似乎根本没有加载资源文件。
如果我使用 Activity Monitor 终止进程，然后进程再次启动，此时，所有工作都按预期工作，Xcode“产品->附加到进程”中的图标现在显示为 Cocoa 图标。
就是觉得奇怪，重启后怎么让它工作？
我的 plist 文件在 /Library/LaunchDaemon/com.sss.mytest.plist
我的应用程序文件在 /Applications/Mytest.app

谢谢， Ryo

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T09:54:06.683

我得到了这个工作，似乎'loginwindow'在用户登录之前没有启动，所以没有窗口可以处理，所以窗口加载失败，现在我使用基础工具而不是Cocoa，一切正常。

# java - 在来电Android中打开扬声器

> ID：16188831
> 
> 赞同：3
> 
> 时间：2013-04-24T09:51:01.967
> 
> 标签：java, android, audio, speaker

我想打开扬声器并将其设置为最大音量。在我的 PhoneStateListener 中，我正在拦截来电，它适用于任何来电/去电。

问题是我只想为两个特定的传入号码打开此功能。

这是我的代码：

```
 case TelephonyManager.CALL_STATE_OFFHOOK:
        if (incomingNumber.equals( strRegisterNumber1) || incomingNumber.equals( strRegisterNumber2))
        {
            AudioManager audioManager = (AudioManager) contextMember.getSystemService(Context.AUDIO_SERVICE);
            audioManager.setSpeakerphoneOn(true);
            audioManager.setStreamVolume(AudioManager.STREAM_MUSIC, audioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC), 0);

        }
        break; 
```

如果没有 if 语句，它可以正常工作，但在他的情况下，演讲者会保持关闭状态。

请告知我做错了什么或如何实现我的目标？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:57:15.613

代替

```
incomingNumber.equals( strRegisterNumber1) || incomingNumber.equals( strRegisterNumber2) 
```

利用

```
incomingNumber.contains( strRegisterNumber1) || incomingNumber.contains( strRegisterNumber2) 
```

因为传入的号码可能`+`带有国家代码或`00`国家代码。因此，您只需检查来电号码是否包含所需的号码。

希望能帮助到你...

# shell - 获取给定路径的文件系统类型

> ID：16188835
> 
> 赞同：0
> 
> 时间：2013-04-24T09:51:22.230
> 
> 标签：shell

好的，所以我正在使用一个使用 rsync 的脚本，但是它可能运行几乎任何风格的 unix，包括 Mac OS X。

问题是 rsync 需要适当的 --iconv 设置以防 UTF 文件名引起问题，这可能是文件系统（如 HFS+）的情况。

我需要做的是，在给定路径时，找出它所在的文件系统类型，以便我可以为已知问题情况填写适当的 iconv 属性。

或者，如果有人知道 rsync 的安全 --iconv 参数也适用于 HFS+；rsync 站点推荐 --icon=UTF-8,UTF8-MAC，但是我希望它不会在其他平台上工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:27:41.520

与其让您的脚本猜测，`RSYNC_ICONV`不如让用户负责在运行前适当地设置环境变量。

# java - 避免在复合模式中使用 instanceof

> ID：16188836
> 
> 赞同：5
> 
> 时间：2013-04-24T09:51:23.080
> 
> 标签：java

我正在为大学做一个项目，我们正在编写一个游戏。在这个游戏中，可能会出现多种效果，一种效果会影响另一种效果的行为。现在的一个想法是使用一种复合模式，起初它似乎是一个可靠的解决方案。这里最大的问题是效果的行为方式取决于它所耦合的效果，我们看到解决此问题的唯一方法是使用 .getClass() 或我们想不惜一切代价避免的 instanceof。

有哪些方法可以设计这个问题？

编辑（一个小例子）：我没有明确的代码示例，但我将尝试通过以下示例进行澄清：

所以游戏中有手榴弹（很明显会爆炸并造成伤害），这种爆炸被视为“ExplosionEffect”。手榴弹所在的方格在运行时可能会发生电源故障（PowerfailureEffect）。ExplosionEffect 和 PowerfailureEffect 可以耦合，这会导致爆炸更强烈并造成更多伤害。ExplosionEffect 也可以与其他效果相结合，导致爆炸伤害的表现更加不同

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T09:58:45.753

您可以使用访客设计模式。所有效果类都实现了一个效果接口。主类使用 Effect 接口方法询问 EffectB 类应该如何表现。EffectB类中Effect的方法的实现调用主类中正确的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T10:14:23.223

另一个界面怎么样。也许有各种`Modifier`效果实现的接口。这些修饰符可以做诸如“增加爆炸力”之类的事情。您可以`instanceof`查看该类是否实现了修饰符，然后一个效果可以修改另一个效果。

注意：在`instanceof`接口上做一个是完全可以接受的——你不是在确定它是否可以根据它是什么来做某事，而是根据它所拥有的 API。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T10:31:55.190

```
public void test(){
    methodForWaterEffect(new WaterEffect());
    combinationAttack1(new FireEffect(), new WaterEffect());
}

interface Effect{
    public void activateEffect();
}

class FireEffect implements Effect{

    @Override
    public void activateEffect() {
        System.out.println("Fire!");
    }

}

class WaterEffect implements Effect{

    @Override
    public void activateEffect() {
        System.out.println("Water!");
    }

}
public void combinationAttack1(FireEffect fe, WaterEffect we){
    //your algorithm here

}

public void methodForWaterEffect(WaterEffect fe){
    fe.activateEffect();
} 
```

我有一个非常简单的建议。为什么不为每个实现名为 Effect 的接口的效果创建类。此外，如果您正在尝试模拟组合攻击，为什么不为这些组合攻击中的每一个创建函数呢？

所以在你的例子中，它将是

```
public void combination2(PoisonEffect pe, PowerFailureEffect pf){

} 
```

这可能看起来工作量很大，但我认为这很好地解耦了您的代码，以后您可能会发现管理代码更容易。

请注意，为简单起见，它们不在单独的类文件中 =D。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-24T09:59:38.853

一个常见的反模式是使用类型检查，例如 with `instanceof`，而不是多态性。这是一个简单的例子。

```
public class Shape {
    public void draw() {
        if (this instanceof Square) {
            // Draw a square
        } else if (this instanceof Circle) {
            // Draw a circle
        }
    }
}

public class Square extends Shape {
    // ...
}

public class Circle extends Shape {
    // ...
} 
```

请注意，`draw()`在 class 中的方法中`Shape`，我们通过查看当前对象的类型来确定要绘制的内容，然后执行相应的代码。这有几个缺点：类`Shape`需要知道它的所有子类，如果你想添加一个新的形状，你也必须修改类`Shape`。通过覆盖子类中的方法，使用多态性要好得多`draw()`：

```
public abstract class Shape {
    public abstract void draw();
}

public class Square extends Shape {
    public void draw() {
        // Draw a square
    }
}

public class Circle extends Shape {
    public void draw() {
        // Draw a circle
    }
} 
```

这样，类`Shape`不需要知道它的所有子类，你不需要修改`Shape`来添加一个新的形状，并且属于一个特定形状的所有逻辑都在它所属的地方（那个形状的类） .

# python - Python中值之间的零填充

> ID：16188837
> 
> 赞同：3
> 
> 时间：2013-04-24T09:51:24.027
> 
> 标签：python, python-2.7, numpy

我在低通插值过程中遇到问题，我必须在处理之前用零填充一维数组。

我有这样的事情：[1 2 3 4 5 6]

我想要这样的数组 [1 0 2 0 3 0 4 0 5 0 6] 所以它是数组中的 L-1 个零，其中 L 是填充零之前数组中所有值的数量。

如何在 Python 中做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-24T09:58:39.743

您可以将未填充的值列表分配到另一个零列表的切片中：

```
original_list = range(1,7)                 # [1,2,3,4,5,6]
padded_list = [0]*(2*len(original_list)-1) # [0,0,0,0,0,0,0,0,0,0,0]
padded_list[::2] = original_list           # [1,0,2,0,3,0,4,0,5,0,6] 
```

这也可以转化为`numpy`，尽管正如 Jaime 在评论中指出的那样，它更容易使用`numpy.insert`：

```
import numpy as np

arr = np.arange(1, 7)              # array([1, 2, 3, 4, 5, 6])
np.insert(arr, slice(1, None), 0)  # array([1, 0, 2, 0, 3, 0, 4, 0, 5, 0, 6]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-29T17:19:31.410

我必须实时应用大量数据，所以我检查了性能，np.insert 似乎是 Python 2.7 上最慢的一个：

```
np.insert:                     1.393 ms
list:                          0.406 ms
np.repeat then zero out:       0.409 ms
np.zeros then assign value:    0.073 ms 
```

这是测试代码：

```
import time
import numpy as np

start = 0
limit = 30000000

def tic():
    global start
    start = time.clock()

def toc(text):
    print("%-30s %.3f ms" % (text, time.clock()-start))

original_list = range(1,limit)
original_array = np.arange(1, limit)

tic()
insert_array = np.insert(original_array, slice(1, None), 0)
toc("np.insert:")

tic()
padded_list = [0]*(2*len(original_list)-1)
padded_list[::2] = original_list
toc("list:")

tic()
repeat_array = np.repeat(original_array, 2)
repeat_array[1::2] = 0
toc("np.repeat then zero out:")

tic()
padded_array = np.zeros(2*len(original_list)-1, dtype=original_array.dtype)
padded_array[::2] = original_array
toc("np.zeros then assign value:") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T10:10:10.293

```
def zero(array):
    for i in range(1, len(array)):
        array.insert(i+i-1,0)
    return array

array = [1, 2, 3, 4, 5, 6]
newArray = zero(array) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T23:55:05.060

强制`itertools`方法：

```
>>> from itertools import izip, repeat, chain
>>> list(chain.from_iterable(izip(el, repeat(0))))[:-1]
[1, 0, 2, 0, 3, 0, 4, 0, 5, 0, 6] 
```

更好`itertools`的方法...

```
from itertools import islice, izip, repeat, chain
blah = list (islice (chain.from_iterable (izip(repeat (0), your_seq)), 1, None)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T09:57:10.570

```
l = [1, 2, 3, 4, 5, 6]

def zero_pad(l):
    r = []
    for x in l:
        r.append(x)
        r.append(0)
    return r[:-1]

print zero_pad(l) 
```

将打印：

```
[1, 0, 2, 0, 3, 0, 4, 0, 5, 0, 6] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-24T09:58:37.443

一种简单的方法：

```
>>> i = [1,2,3,4,5,6]
>>> [i.insert(i.index(x)+1,0) for x in i[:-1]]
[None, None, None, None, None]
>>> i
[1, 0, 2, 0, 3, 0, 4, 0, 5, 0, 6] 
```

同上，展开：

```
>>> for x in i[:-1]:
...     i.insert(i.index(x)+1,0)
...
>>> i
[1, 0, 2, 0, 3, 0, 4, 0, 5, 0, 6] 
```

# android - 如何从另一个类的 MainActivity 修改视图？

> ID：16188843
> 
> 赞同：0
> 
> 时间：2013-04-24T09:51:38.653
> 
> 标签：android, android-gridview, layout-inflater

我想从另一个类（在我的例子中称为 GameplayController）更新我在 MainActivity 中创建的 GridView。

具体来说，我试图简单地将我目前在 MainActivity 中拥有的 gridView.setOnItemClickListener(....)... 插入到 GameplayController 类中的方法中。

我正在制作一个小棋盘游戏应用程序，我想创建一个方法“play()”，该方法为游戏循环运行，直到游戏结束。我在 MainActivity 的 onCreate 中启动了 GridView，然后我调用我希望游戏运行的方法，但我不知道如何将我创建的 GridView 转移到我的 GameplayController 类方法“play()”，以便我可以直接从那里正确更新它。

这是我的 MainActivity 的相关部分：

```
...
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState){

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        GridView gridview = (GridView) findViewById(R.id.gridview);
        gridview.setAdapter(new ImageAdapter(this));

        //Create board model, add units to player's list.
        UnitArray gameBoardModel = new UnitArray();

        //Run the game loop until winner found.
        GameplayController.play();

        //This ClickListener I don't want here, I want it in my play() method.
        gridview.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View v, int postion,
                    long id) {
                // Toast for development help only.
                Toast.makeText(MainActivity.this, "" + postion,
                        Toast.LENGTH_SHORT).show();
            }
        });

    }
... 
```

这是我要控制 GridView 的类的相关部分：

```
public class GameplayController {

    private static boolean gameOver = false;

    /*
     * Will run the game loop.
     */
    public static void play() { 
        while (gameOver == false) {
            /*
             * Update the GridView from Main somehow.
             */

            /*
            * Will be put in correct place later.
            /*
            gameOver = true;
        }
    }
} 
```

这可能是完全错误的，但我需要使用 LayoutInflater 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:18:31.393

为了让它发挥作用，我必须，

答：在我的“GameplayController”类中创建一个 Context、一个 LayoutInflater 和一个构造函数。

```
Context ctxt;
LayoutInflater myInflater;

public GameplayController(Context c){
    ctxt = c;
    myInflater = (LayoutInflater)c.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
} 
```

B：更改我的“播放”方法以返回视图并接受视图作为参数。

```
private static boolean gameOver = false;

/*
 * Will run the game loop.
 */
public View play(GridView gv) { 
    while (gameOver == false) {
        gv.setOnItemClickListener(new OnItemClickListener(){
            public void onItemClick(AdapterView<?> parent, View v, int position, long id){
                Toast.makeText(ctxt, "" + position, Toast.LENGTH_SHORT).show();
                ImageView img = (ImageView)v;
                img.setImageResource(R.drawable.rock1select);
            }
        });
        return(gv);
    }
    return gv;
} 
```

}

C：在我的“MainActivity”中创建一个“GameplayController”对象，将其上下文作为参数传递。然后调用“play”方法，将在 Main 中创建的 View 传递给它。

公共类 MainActivity 扩展 Activity {

```
@Override
protected void onCreate(Bundle savedInstanceState){

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    GridView gridview = (GridView) findViewById(R.id.gridview);
    gridview.setAdapter(new ImageAdapter(this));

    GameplayController gc = new GameplayController(this);

    //Create board model, add units to player's list.
    UnitArray gameBoardModel = new UnitArray();

    //Run the game loop until winner found.
    gc.play(gridview);

} 
```

像我这样的新手参考这里是我主要使用的导入语句：

```
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.GridView; 
```

以及我的“GameplayController”中的那些，它有点像 Image/GridView 控制器/适配器：

```
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.GridView;
import android.widget.ImageView;
import android.widget.Toast; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:07:10.677

将活动（或网格，更确切地说）作为参数传递给您的`play`方法。

但是，您会发现您`play`是一个无限循环，并且 A/ 您永远无法到达`gridview.setOnItemClickListener`，而 B/ 您正在以某种方式阻塞 UI 线程，例如您将在几秒钟内获得 ANR。

如果您的游戏是实时的，您需要将游戏循环放在另一个线程中并在处理程序上发布消息以更新视图（请参阅 Handler、Looper、AsyncTask ...）

如果您的游戏是回合制的，您需要仅在需要时调用视图更新例程，而无需循环。

# ios - iOS 中的彩色进度条

> ID：16188844
> 
> 赞同：2
> 
> 时间：2013-04-24T09:51:40.970
> 
> 标签：ios, uiprogressbar

![进展开始](https://i.stack.imgur.com/FNa81.png)

![进度完成](https://i.stack.imgur.com/02XLm.png)

我需要在 iOS 应用程序中设置这种 Progressbar。任何人都可以建议我在完成进度后如何获得这种外观（第二张图片）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:54:52.560

[从可可控件](https://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=progress+bar)中查看一些内容

[适用于 iOS 的 YLProgressBar](https://www.cocoacontrols.com/controls/ylprogressbar)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T10:46:44.987

看到这个：

[适用于 iOS 的 AMGProgressView](https://www.cocoacontrols.com/controls/amgprogressview)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T10:43:20.927

试试我的自定义编码：您可以根据需要更改图像。

.h 文件

```
 //ProgressBar
            NSTimer *splashtimer;
            UIImage *ProgressBarBackgroundImage;
            UIImageView *ProgressBarLeft;
            UIImageView *ProgressBarRight;
            UIImageView *ProgressBarMiddle;
            UIImageView *LoadingBackground;

            NSInteger totalSizeOfProgressBarAnimation;
            NSInteger totalCountOfProgressBarAnimation;
            NSInteger NoOfPercentage;
            NSInteger startingvalue;
            int progressValue;

        //ProgressBar
        @property (nonatomic,retain) UIImageView *ProgressBarLeft;
        @property (nonatomic,retain) UIImageView *ProgressBarRight;
        @property (nonatomic,retain) UIImageView *ProgressBarMiddle;
        @property (nonatomic,retain) UIImageView *LoadingBackground;

        - (void) ProgressBarSizeCheck:(NSInteger)starting:(NSInteger)ending; 
```

.m 文件

```
 @synthesize ProgressBarLeft,ProgressBarRight,ProgressBarMiddle,LoadingBackground;
        - (void)viewDidLoad {
            [super viewDidLoad]

            splashtimer = [NSTimer scheduledTimerWithTimeInterval: 0.75 target: self selector: @selector(startMoveProgress) userInfo: nil repeats: NO];

            ProgressBarLeft = [[UIImageView alloc] init];
            ProgressBarMiddle = [[UIImageView alloc] init];
            ProgressBarRight = [[UIImageView alloc] init];
            LoadingBackground = [[UIImageView alloc] init];
            ProgressBarBackgroundImage = [UIImage imageNamed: @"loaderbg.png"];
           [self.view addSubview: LoadingBackground];
        } 
```

# 语用标记 -

# 杂注标记进度条方法

```
 -(void)ProgressBarSizeCheck:(NSInteger)starting:(NSInteger)ending {
            startingvalue = starting;
            endingValue = ending;
            NoOfPercentage = ending - starting;

            if (startingvalue==0) {
                //ProgressBarLeft Image
                ProgressBarLeft.frame = CGRectMake(23,410,10,20);
                UIImage *ProgressBarImage = [UIImage imageNamed: @"loaderleftpart.png"];
                ProgressBarLeft.image = ProgressBarImage;
                [self.view addSubview: ProgressBarLeft];
                //LeftImageOver

                //ProgressBarMiddleImage
                ProgressBarMiddle.frame = CGRectMake(33,410,0,20);
                UIImage *ProgressBarImageMiddle = [UIImage imageNamed: @"loadercenterpart.png"];
                ProgressBarMiddle.image = ProgressBarImageMiddle;
                [self.view addSubview: ProgressBarMiddle];
                //MiddleImageOver

                //ProgressBarRightImage
                ProgressBarRight.frame = CGRectMake(33,410,10,20);
                UIImage *ProgressBarImageRight = [UIImage imageNamed: @"loaderrightpart.png"];
                ProgressBarRight.image = ProgressBarImageRight;
                [self.view addSubview: ProgressBarRight];
                //RightImageOver

                totalSizeOfProgressBarAnimation = 276 * NoOfPercentage / 100;
                totalSizeOfProgressBarAnimation=totalSizeOfProgressBarAnimation-20;
                int Duration=NoOfPercentage/10;
                [self moveDown:Duration:totalSizeOfProgressBarAnimation];

            }
            else {
                totalSizeOfProgressBarAnimation = 276 * startingvalue / 100;
                totalSizeOfProgressBarAnimation=totalSizeOfProgressBarAnimation-20;

                //ProgressBarLeftImage
                ProgressBarLeft.frame = CGRectMake(23,410,10,20);
                UIImage *ProgressBarImage = [UIImage imageNamed: @"loaderleftpart.png"];
                ProgressBarLeft.image = ProgressBarImage;
                [self.view addSubview: ProgressBarLeft];
                //LeftImageOver

                //ProgressbarMiddleImage
                ProgressBarMiddle.frame = CGRectMake(33,410,totalSizeOfProgressBarAnimation,20);
                UIImage *ProgressBarImageMiddle = [UIImage imageNamed: @"loadercenterpart.png"];
                ProgressBarMiddle.image = ProgressBarImageMiddle;
                [self.view addSubview: ProgressBarMiddle];
                //MiddleImageOver

                //ProgressBarRightImage
                ProgressBarRight.frame = CGRectMake(33+totalSizeOfProgressBarAnimation,410,10,20);
                UIImage *ProgressBarImageRight = [UIImage imageNamed: @"loaderrightpart.png"];
                ProgressBarRight.image = ProgressBarImageRight;
                [self.view addSubview: ProgressBarRight];
                //RightImageOver

                totalSizeOfProgressBarAnimation = 276 * NoOfPercentage / 100;
                int Duration=NoOfPercentage/10;
                [self moveDown:Duration:totalSizeOfProgressBarAnimation];
            }

        }

        -(void)moveDown:(NSInteger)animationDuration:(NSInteger)size {
            CGRect startFrame = [ProgressBarMiddle frame];
            [UIView beginAnimations:@"move10" context:NULL];
            [UIView setAnimationDuration:animationDuration];
            [ProgressBarMiddle setFrame:CGRectMake(startFrame.origin.x, 410, startFrame.size.width+size, startFrame.size.height)];
            [ProgressBarRight setFrame:CGRectMake(33+(startFrame.size.width+size),410,10,20)];
            [UIView setAnimationDelegate:self];
            [UIView setAnimationCurve: UIViewAnimationCurveEaseOut];
            [UIView commitAnimations];

            splashtimer = [NSTimer scheduledTimerWithTimeInterval: animationDuration target: self selector: @selector(pushTabControl) userInfo: nil repeats: NO];
        }
        -(void)pushTabControl {
            [self.navigationController pushViewController: tabObj animated:YES];
        }

        -(void) startMoveProgress {

            LoadingBackground.frame = CGRectMake(22,410,276,22);
            UIImage *ProgressBarBackgroundImage = [UIImage imageNamed: @"loaderbg.png"];
            [LoadingBackground setUserInteractionEnabled: YES];
            LoadingBackground.image = ProgressBarBackgroundImage;
            [self ProgressBarSizeCheck:0:100];

        } 
```

//看图片

1)loaderbg.png

![装载机](https://i.stack.imgur.com/eAOlI.png)

2）装载机中心部分

![中心部分](https://i.stack.imgur.com/2xEp3.png)

3)loaderrightpart ![右侧](https://i.stack.imgur.com/M0Js9.png)

4）loderleft部分

![在此处输入图像描述](https://i.stack.imgur.com/595dP.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-11T02:56:08.810

![样本](https://github.com/minjoongkim/MJProgressView/raw/master/MJProgressView.gif)

看到这个：

[适用于 iOS 的 MJProgressView](https://github.com/minjoongkim/MJProgressView)

# mvvm - 模态是 MVVM 中的反模式吗？

> ID：16188845
> 
> 赞同：2
> 
> 时间：2013-04-24T09:51:43.817
> 
> 标签：mvvm, modal-dialog, anti-patterns

有一篇[有趣的文章](https://stackoverflow.com/questions/3928179/communication-between-6-viewmodels-and-a-messenger-antipattern)讨论了视图模型之间的通信模式。

我最近努力在 WPF MVVM 应用程序中实现模态对话框，但我想得越多，我就越明白为什么它很困难以及为什么没有内置帮助器来实现这一点。针对不同的平台只会加强这种视图：看起来适合显示所选项目详细信息的模式对话框通常是通过导航到移动设备上的不同视图来实现的。

所以我想问那些成功实现 MVVM 模式并避免代码隐藏的人：你是否也避免了模态对话框？您找到了哪些合适的替代品？我至少能想到两个：

*   将子（模态）视图放置在新视图中，并使用 pub/sub 实现父子模型之间的通信；
*   将带有子控件的面板直接添加到父视图，然后将其可见性以激活子视图作为弹出模拟模态。

第二种方法肯定更受限制，当父视图可以产生各种子视图时它并不真正起作用，但是当父视图需要显示一个小的单个弹出窗口时它看起来很合适。还是最好选择第一种方法，因为它更通用。还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:47:06.577

[这就是](https://stackoverflow.com/questions/3801681/good-or-bad-practise-for-dialogs-in-wpf-with-mvvm)我在 mvvm 中进行对话的方式。

调用对话窗口的 ViewModel：

```
 var result = this.uiDialogService.ShowDialog("Dialogwindow title goes here", dialogwindowVM);

 ... do anything with the dialog result... 
```

# wbem - wbem 查询是否对结果的顺序提供任何保证？

> ID：16188855
> 
> 赞同：0
> 
> 时间：2013-04-24T09:52:05.943
> 
> 标签：wbem

代码如

```
WbemScripting::WbemObjectSet::ExecQuery("Select * from Win32_LogicalDisk","WQL",0x10,NULL); 
```

对返回结果的顺序提供任何保证吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-25T06:36:13.310

我无法确定 WMI 脚本环境，但基于 WBEM 相关标准（例如[DSP0200](http://www.dmtf.org/standards/published_documents/DSP0200_1.3.pdf)）中定义的底层 ExecQuery 操作不提供任何排序​​保证的事实，我假设它不提供。

通常，在 CIM/WBEM 中，不保证返回对象的集合是有序的。

安迪

# winforms - 将 Windows 窗体与 XNA 应用程序连接

> ID：16188856
> 
> 赞同：1
> 
> 时间：2013-04-24T09:52:11.873
> 
> 标签：winforms, forms, xna, connection, window

我正在创建一个 XNA 应用程序，我想在启动 XNA 应用程序之前添加一个 Windows 表单，询问用户他的用户名和密码登录，我创建了所有这些但是当我运行我的程序时它直接打开 XNA 窗口。请告诉我如何使用 Windows 窗体运行 XNA？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:44:53.587

您希望如何在游戏中创建表单取决于您，但在开始游戏之前检查某些内容的最佳方法可能是放入您的 Program.cs 文件。

我做的一个例子是这样的：

```
using System.Windows.Forms;

static class Program
{
    static void Main(string[] args)
    {
        #if WINDOWS

        if (MessageBox.Show("Do you wish to start?", "Start Game", MessageBoxButtons.YesNo) == DialogResult.Yes)
        {
            using (Game1 game = new Game1())
            {
                game.Run();
            }
        }

        #endif
    }
} 
```

这会提示用户是否应该开始游戏。如果您随后使用自己的表单对其进行自定义，该表单会检查一些数据并返回有效的 DialogResult。如果 DialogResult == DialogResult.OK，那么用户是有效的，也许对话框可以存储登录信息，以便游戏可以获取它（如果需要）并且可能在 game.Run() 之后执行此操作；

在创建自定义 InputDialog 时，非常简单。我有一个我刚刚为此定制的动态输入框。那么这个简单的布局就变成了：

```
using System.Windows.Forms;

static class Program
{
    static void Main(string[] args)
    {
        #if WINDOWS

        XNASignIn signinDialog = new XNASignIn();
        DialogResult result = DialogResult.Abort;

        while (result == DialogResult.Abort)
        {
            result = signinDialog.ShowDialog();

            if (result == DialogResult.Abort)
                MessageBox.Show("You entered the wrong username and password");
        }

        if (result == DialogResult.Cancel)
            MessageBox.Show("You cancelled the login, the game will exit");
        else if (result == DialogResult.OK)
        {
            using (Game1 game = new Game1())
            {
                game.Run();
            }
        }

        #endif
    } 
```

我的登录对话框的完整源代码：

[http://pastebin.com/yVZbtxH8](http://pastebin.com/yVZbtxH8)

只需创建一个类并将其复制进去。

请记住为您的 XNA 项目添加对 System.Windows.Forms 的引用。

# javascript - 花式盒子没有关闭

> ID：16188872
> 
> 赞同：0
> 
> 时间：2013-04-24T09:52:52.583
> 
> 标签：javascript, jquery, fancybox

我最近开始尝试花式盒子。当 url 中有 preg 匹配时，我会触发花哨的框。一切都运行良好，除了单击 OK 或 CANCEL 时，花哨的框没有关闭。

```
if(preg_match('/school/',$_SERVER['REQUEST_URI']) )
    {
       ?>
       <script>$("#single_image").fancybox().trigger('click');</script>
       <?php

    } 

<div style="display:none;" id="single_image" >
<p>Continue or Decline</p>
<p><input type="button" onclick="php_function();" value="OK" /><input type="button" value="CANCEL" onclick="$.fancybox.close();"</p></div> 
```

php_function() 是一个用于 ajax 调用的 javascript 函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:55:49.407

为什么不使用它的方法打开它 trigger('click') 呢？

```
$.fancybox.open( [group], [options] ) 
```

参考： http: [//fancyapps.com/fancybox/#docs](http://fancyapps.com/fancybox/#docs)

# gwt - 当支持 Web 应用程序时，GWT 应用程序置换脚本未缓存在 iOS 设备上

> ID：16188873
> 
> 赞同：0
> 
> 时间：2013-04-24T09:53:00.380
> 
> 标签：gwt, web-applications, ios6, linker, cache-manifest

最近，当我在 iOS 6.x 设备上*以 web-app (fullscreen) mode*运行时，我发现了一个与我的 GWT 应用程序中的缓存有关的问题。问题是**iOS 似乎忽略了我对庞大排列文件**( `<hash>.cache.html`.)的缓存策略指令

我有一个 servlet 过滤器在静态资源（包括`*.cache.html`文件）上设置缓存标头，例如：

```
# Response header snippet
Expires: Fri, 26 Jul 2013 09:58:28 GMT
Cache-Control: public, max-age=8640000
ETag: W/"322107-1359629388000"
Last-Modified: Thu, 31 Jan 2013 10:49:48 GMT 
```

但是，一旦我加入网络应用程序支持并将应用程序添加到我的主屏幕，iOS 设备将在*每次加载*时请求排列文件，并且既不发送`If-None-Match`也不发送`If-Modified-Since`请求标头。通过`<meta>`标签添加 Web 应用支持：

```
<meta name="apple-mobile-web-app-capable" content="yes" /> 
```

我无法在任何地方找到此问题的文档，并且不确定这是一个错误。然而，这是我所经历的*。*缓存在我的桌面浏览器中按预期工作，我可以在其中检查接收到的标头。我无法在任何地方嗅探用户代理并根据此信息进行区分，因此所有客户端都将收到相同的标头。

* * *

我能够通过一个 HTML5 缓存清单文件“解决”眼前的问题，如本[Google I/O 演讲中所述：“Google I/O 2010 - GWT Linkers target HTML5 WebWorkers & more”](http://youtu.be/omBURP0MxcI?t=33m46s)，其中自定义[GWT Linker](http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/core/ext/Linker.html)生成清单文件包含*所有生成的排列*，例如：

```
CACHE MANIFEST
<hash1>.cache.html
<hash2>.cache.html
...
<hashN>.cache.html 
```

并直接在主机页面 ( `<module>.html`) 中添加清单：

```
<!doctype html>
<html manifest="[module-path]/offline.manifest">
... 
```

这一切都很好*，**除了*所有客户端现在[必须加载](http://alistapart.com/article/application-cache-is-a-douchebag#section13)[*所有*](http://alistapart.com/article/application-cache-is-a-douchebag#section13)[排列](http://alistapart.com/article/application-cache-is-a-douchebag#section13)，即使*只*需要一个！我的情况是 18 个排列，每个排列在 3G 或 Edge 上约 5MB :( 这真的是最好的解决方案吗？*[](http://alistapart.com/article/application-cache-is-a-douchebag#section13)*

 **** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:53:00.380

我最终做的是进一步调查，发现我可以将它添加到***所有*****排列脚本中，****而不是在主机页面中添加清单引用。***清单本身可以是一个通用（实际上是空的）文件：*

 *> 鼓励作者也将主页包含在清单中，但实际上引用清单的页面会自动缓存，即使没有明确提及。（[来源](http://www.whatwg.org/specs/web-apps/current-work/multipage/offline.html#introduction-5)）

因此，我写了一个简单`Linker`的：

1.  创建脱机清单文件
2.  将`manifest`属性添加到`<html>`所有排列脚本 ( `*.cache.html`) 的标记中。

被`Linker`称为`ManifestLinker`并且相当简单：

```
package com.example.linker;

// Imports

@LinkerOrder(Order.POST)
public class ManifestLinker extends AbstractLinker {
    private static final String MANIFEST_FILE = "manifest.nocache.appcache";
    private static final String HTML_FIND = "<html>";
    private static final String HTML_REPLACE = "<html manifest=\"" + MANIFEST_FILE + "\">";

    /* (non-Javadoc)
     * @see com.google.gwt.core.ext.Linker#getDescription()
     */
    @Override
    public String getDescription() {
        return "`Manifest Linker`: Adds AppCache support for static `.cache.html` resources.";
    }

    @Override
    public ArtifactSet link(TreeLogger logger, LinkerContext context, ArtifactSet artifacts) throws UnableToCompleteException {
        ArtifactSet output = new ArtifactSet(artifacts);

        output.add(buildManifest(logger));

        for (EmittedArtifact artifact : artifacts.find(EmittedArtifact.class)) {
            if (artifact.getVisibility() == Visibility.Public && artifact.getPartialPath().endsWith(".cache.html")) {
                logger.log(TreeLogger.TRACE, "Processing file: " + artifact.getPartialPath());

                String cacheHtml = Util.readStreamAsString(artifact.getContents(logger));
                if (cacheHtml.startsWith(HTML_FIND)) {
                    cacheHtml = HTML_REPLACE + cacheHtml.substring(HTML_FIND.length()); // Replace `<html>` tag.

                    output.replace(copyArtifact(logger, artifact, cacheHtml));
                }
            }
        }

        logger.log(TreeLogger.INFO, "Manifest created and linked successfully.");

        return output;
    }

    private EmittedArtifact copyArtifact(TreeLogger logger, EmittedArtifact original, String contents) throws UnableToCompleteException {
        EmittedArtifact copy = emitString(logger, contents, original.getPartialPath());
        copy.setVisibility(original.getVisibility());

        return copy;
    }

    private EmittedArtifact buildManifest(TreeLogger logger) throws UnableToCompleteException {
        StringBuilder builder = new StringBuilder();
        builder.append("CACHE MANIFEST\n")
               .append("# Generated by ")
               .append(getClass().getSimpleName())
               .append(": ")
               .append(System.currentTimeMillis())
               .append(".\n\n")
               .append("NETWORK:\n")
               .append("*\n");

        SyntheticArtifact manifest = emitString(logger, builder.toString(), MANIFEST_FILE);

        return manifest;
    }
} 
```

在我的`<module>.gwt.xml`文件中，我定义并添加了链接器：

```
<?xml version="1.0" encoding="UTF-8"?>
<module>
    ...
    <define-linker name="manifest" class="com.example.linker.ManifestLinker" />
    <add-linker name="manifest" />
    ... 
```

另外，我确保通过我的设置正确的内容类型`web.xml`：

```
...
<mime-mapping>
    <extension>appcache</extension>
    <mime-type>text/cache-manifest</mime-type>
</mime-mapping>
... 
```

发出`manifest.nocache.appcache`的也很简单：

```
CACHE MANIFEST
# Generated by ManifestLinker: 1366702621298.

NETWORK:
* 
```****

# c#-4.0 - 清空多个文本框的内容

> ID：16188876
> 
> 赞同：0
> 
> 时间：2013-04-24T09:53:04.727
> 
> 标签：c#-4.0

在我的 Windows 窗体应用程序中有多个 textBoxes 。如何删除所有主题的内容？我不想一一删除文本框的内容

```
textBox1.text=string.emty.tostring(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:05:28.447

如果所有这些 TextBoxes 属于同一个容器并且没有其他 TextBoxes 放置在该容器中，那么您可以枚举容器的子项

```
foreach (var tb in container.Controls.OfType<TextBox>())
{
    tb.Text = string.Empty; // or tb.Text = null;
} 
```

如果您有多个文本框，并且由于某种原因无法将它们分组到一个容器中，您应该递归搜索所有可用的文本框，然后过滤结果集合。
您可以`Tag`为此使用roperty。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:59:21.480

```
foreach (Textbox myTB in this.Controls)
{
   if (myTB != null)
       myTB.Text = String.Empty;
} 
```

您不必在 Empty 上使用 toString()。

# iphone - 如何确定视图控制器

> ID：16188877
> 
> 赞同：1
> 
> 时间：2013-04-24T09:53:06.490
> 
> 标签：iphone, ios, uiviewcontroller

我有三个视图控制器 A、B 和 C。A 和 B 都呈现视图控制器 C。我怎样才能知道哪个视图控制器呈现视图控制器 C？

PS：一旦我确定哪个视图控制器呈现控制器 C，我想隐藏/取消隐藏一些按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T09:56:41.593

只需将viewController 中的`int`属性设置为. 当您将视图控制器从设置为. 如果意味着，设置为。呈现后，当您的视图控制器调用时，在此方法中，基于，您可以隐藏或显示该特定按钮。[这是简单的 hack :)]`C``fromViewController``A``1``B``2``C``viewWillAppear``fromViewController`

代码中`C`的 viewWillAppear..

```
if ( self.fromViewController == 1) // Set from viewController while you create C in A Controller
{
 [_hButton setHidden:YES];

}

else if ( self.fromViewController == 2) 
{
  [_hButton setHidden:NO];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:00:03.580

您可以通过多种方式做到这一点，您可以在 C 视图控制器中声明一个 Boolean/anyType 变量。如果您使用 segues 来呈现 C 视图控制器，您可以为该变量设置所需的值并在加载 C 视图控制器时使用该变量。

例如，如果您正在使用 segues。

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
     if ([segue.identifier isEqualToString:@"AtoC"]) {
            C *cobj = [segue destinationViewController];
            cobj.variable =TRUE;
    }else
   {
      cobj.variable=FALSE;
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T10:01:20.773

当您呈现模态视图控制器时，您可能会对**visibleViewController**属性更感兴趣，该属性将为您提供当前视图的控制器，无论是模态呈现还是推送到导航堆栈。

**在呈现 C 之前将visibleViewController.nibName**保存在变量中，并在呈现 C 后检查 visibleViewController.nibName 是否等于 A 或 B :)

```
//before presenting VC C
appdelegate.myController = self.navigationcontroller.visibleViewController.nibName;

//after VC C is presented
if([appdelegate.myController isEqualToString:@"A"]) {

    //Write your code
}
else {
    //Write other code 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T10:01:45.227

**C 不应该关心 A 或 B。**相反，让 A 和 B 在 C 中设置一些状态，告诉它是否显示按钮，或者让他们将自己设置为 C 的代表，以便 C 可以询问他们是否显示按钮. 无论哪种方式，您都可以在其他视图控制器中使用 C 而无需更改 C。

# java - 运行琐碎测试时，PowerMockRunner 导致 ExceptionInInitializerError

> ID：16188878
> 
> 赞同：6
> 
> 时间：2013-04-24T09:53:06.913
> 
> 标签：java, maven, easymock, powermock

我无法使用 Powermock 测试运行器运行一个非常简单的测试类。它会导致 ExceptionInInitializerError。它看起来是类路径上的依赖项的问题，但是，我尝试了一些依赖版本的变体，但它们都导致相同的错误。使用 Powermock 测试运行程序时，如何让这个简单的测试通过？

测试代码：

```
package net.solasistim.hello;

import org.junit.Test;
import org.junit.Assert;
import org.junit.runner.RunWith;
import org.powermock.modules.junit4.PowerMockRunner;

@RunWith(PowerMockRunner.class)
public class HelloTest {
    @Test
    public void testMain() {
        Assert.assertTrue(true);
    }
} 
```

项目 POM：

```
<project>
  <modelVersion>4.0.0</modelVersion>
  <groupId>net.solasistim.hello</groupId>
  <artifactId>hello</artifactId>
  <version>1</version>
  <packaging>jar</packaging>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <powermock.version>1.5</powermock.version>
  </properties>

  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>4.11</version>
      <scope>test</scope>
    </dependency>
   <dependency>
      <groupId>org.powermock</groupId>
      <artifactId>powermock-module-junit4</artifactId>
      <version>${powermock.version}</version>
      <scope>test</scope>
   </dependency>
   <dependency>
      <groupId>org.powermock</groupId>
      <artifactId>powermock-api-easymock</artifactId>
      <version>${powermock.version}</version>
      <scope>test</scope>
   </dependency>  
   <dependency>
      <groupId>cglib</groupId>
      <artifactId>cglib</artifactId>
      <version>3.0</version>
      <scope>test</scope>
   </dependency>  
   <dependency>
      <groupId>org.ow2.asm</groupId>
      <artifactId>asm</artifactId>
      <version>4.1</version>
      <scope>test</scope>
   </dependency>  
  </dependencies>
</project> 
```

运行`mvn clean compile test`会导致以下输出：

```
-------------------------------------------------------------------------------
Test set: net.solasistim.hello.HelloTest
-------------------------------------------------------------------------------
Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.097 sec <<< FAILURE!
initializationError(net.solasistim.hello.HelloTest)  Time elapsed: 0.007 sec  <<< ERROR!
java.lang.ExceptionInInitializerError
        at org.powermock.api.extension.proxyframework.ProxyFrameworkImpl.isProxy(ProxyFrameworkImpl.java:29)
        at org.powermock.reflect.internal.WhiteboxImpl.getUnmockedType(WhiteboxImpl.java:1783)
        at org.powermock.reflect.internal.WhiteboxImpl.getType(WhiteboxImpl.java:2237)
        at org.powermock.reflect.internal.WhiteboxImpl.checkArgumentTypesMatchParameterTypes(WhiteboxImpl.java:2191)
        at org.powermock.reflect.internal.WhiteboxImpl.findMethodOrThrowException(WhiteboxImpl.java:938)
        at org.powermock.reflect.internal.WhiteboxImpl.doInvokeMethod(WhiteboxImpl.java:882)
        at org.powermock.reflect.internal.WhiteboxImpl.invokeMethod(WhiteboxImpl.java:859)
        at org.powermock.reflect.Whitebox.invokeMethod(Whitebox.java:466)
        at org.powermock.tests.utils.impl.AbstractTestSuiteChunkerImpl.registerProxyframework(AbstractTestSuiteChunkerImpl.java:154)
        at org.powermock.tests.utils.impl.AbstractTestSuiteChunkerImpl.getPowerMockTestListenersLoadedByASpecificClassLoader(AbstractTestSuiteChunkerImpl.java:107)
        at org.powermock.modules.junit4.common.internal.impl.JUnit4TestSuiteChunkerImpl.createDelegatorFromClassloader(JUnit4TestSuiteChunkerImpl.java:143)
        at org.powermock.modules.junit4.common.internal.impl.JUnit4TestSuiteChunkerImpl.createDelegatorFromClassloader(JUnit4TestSuiteChunkerImpl.java:39)
        at org.powermock.tests.utils.impl.AbstractTestSuiteChunkerImpl.createTestDelegators(AbstractTestSuiteChunkerImpl.java:217)
        at org.powermock.modules.junit4.common.internal.impl.JUnit4TestSuiteChunkerImpl.<init>(JUnit4TestSuiteChunkerImpl.java:59)
        at org.powermock.modules.junit4.common.internal.impl.AbstractCommonPowerMockRunner.<init>(AbstractCommonPowerMockRunner.java:32)
        at org.powermock.modules.junit4.PowerMockRunner.<init>(PowerMockRunner.java:33)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:532)
        at org.junit.internal.builders.AnnotatedBuilder.buildRunner(AnnotatedBuilder.java:29)
        at org.junit.internal.builders.AnnotatedBuilder.runnerForClass(AnnotatedBuilder.java:21)
        at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:59)
        at org.junit.internal.builders.AllDefaultPossibilitiesBuilder.runnerForClass(AllDefaultPossibilitiesBuilder.java:26)
        at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:59)
        at org.junit.internal.requests.ClassRequest.getRunner(ClassRequest.java:26)
        at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:51)
        at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:123)
        at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:104)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:616)
        at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:164)
        at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:110)
        at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:175)
        at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcessWhenForked(SurefireStarter.java:107)
        at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:68)
Caused by: java.lang.IllegalArgumentException
        at org.objectweb.asm.ClassVisitor.<init>(Unknown Source)
        at net.sf.cglib.core.DebuggingClassWriter.<init>(DebuggingClassWriter.java:49)
        at net.sf.cglib.core.DefaultGeneratorStrategy.getClassVisitor(DefaultGeneratorStrategy.java:30)
        at net.sf.cglib.core.DefaultGeneratorStrategy.generate(DefaultGeneratorStrategy.java:24)
        at net.sf.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:216)
        at net.sf.cglib.core.KeyFactory$Generator.create(KeyFactory.java:144)
        at net.sf.cglib.core.KeyFactory.create(KeyFactory.java:116)
        at net.sf.cglib.core.KeyFactory.create(KeyFactory.java:108)
        at net.sf.cglib.core.KeyFactory.create(KeyFactory.java:104)
        at net.sf.cglib.proxy.Enhancer.<clinit>(Enhancer.java:69)
        ... 38 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T18:29:41.043

PowerMock 和最新的 cglib 似乎无法相处。我不能告诉你确切的原因，但如果你**从 3.0 降级到 2.2.2**，它应该可以工作：

```
<dependency>
    <groupId>cglib</groupId>
    <artifactId>cglib</artifactId>
    <version>2.2.2</version>
    <scope>test</scope>
</dependency> 
```

# sql-server-2008 - 找出使用 SQL Server 2008 中的证书对哪些存储过程进行签名

> ID：16188880
> 
> 赞同：7
> 
> 时间：2013-04-24T09:53:08.613
> 
> 标签：sql-server-2008, tsql, stored-procedures, certificate, signature

我正在生成一个数据库更新脚本，我想找出存储过程已使用各种证书进行签名。

我可以使用 sys.procedures 获取存储过程列表，并且可以使用 sys.certificates 获取证书列表，但我无法找出使用各种证书签署了哪些存储过程

是否有 sys.procedures_certificates 视图或类似的东西？也许 SQL Server Management Studio GUI 上有一种方法可以告诉我这个..

我花了很长时间在谷歌上搜索，但无济于事。

在此先感谢您的帮助..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T12:46:22.767

您应该能够使用 sys.crypt_properties 很容易地得到它 -[在这里查看 msdn 文章](http://msdn.microsoft.com/en-US/library/ms189536.aspx)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-06-21T12:03:04.237

```
SELECT [Object Name] = object_name(cp.major_id),
       [Object Type] = obj.type_desc,   
       [Cert/Key] = coalesce(c.name, a.name),
       cp.crypt_type_desc
FROM   sys.crypt_properties cp
INNER JOIN sys.objects obj        ON obj.object_id = cp.major_id
LEFT   JOIN sys.certificates c    ON c.thumbprint = cp.thumbprint
LEFT   JOIN sys.asymmetric_keys a ON a.thumbprint = cp.thumbprint
ORDER BY [Object Name] ASC 
```

# ios - addSubView:mapView 不显示初始视图控制器

> ID：16188882
> 
> 赞同：0
> 
> 时间：2013-04-24T09:53:09.493
> 
> 标签：ios, objective-c, xcode, xcode4.5

我有两个视图控制器。在第一个视图控制器（appViewController）中，我有一个按钮，按下它应该推送到下一个视图控制器，它有一个地图视图。我已将第一个视图控制器设置为初始视图控制器。问题是当构建运行时，它直接进入第二个视图，而不是第一个。问题出在某处：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    MapView* mapViewer = [[MapView alloc] initWithFrame:
                         CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];

    [self.view addSubview:mapViewer];

    Place* home = [[Place alloc] init];
    home.name = @"Home";
    home.description = @"Sweet home";
    home.latitude = 22.72299;
    home.longitude = 75.857506;

    Place* office = [[Place alloc] init];
    office.name = @"Office";
    office.description = @"Bad office";
    office.latitude = 23.272258;
    office.longitude = 77.413788;

    [mapViewer showRouteFrom:home to:office];

} 
```

如果我删除此行：[self.view addSubview:mapViewer];，那么我只会得到一张简单的地图，而不是我想要的（我想要的地图是显示两个位置之间的路线的地图。该功能运行良好）。但是第一个场景是可见的。如何解决这个问题，以便我将所有前面的屏幕都显示到 mapView 屏幕，并加载正确的地图？我正在使用 Xcode 4.5 和情节提要。

# mongodb - 上次写操作的MongoDB时间戳？

> ID：16188888
> 
> 赞同：3
> 
> 时间：2013-04-24T09:53:17.040
> 
> 标签：mongodb, timestamp

我想验证我们设置的几个 Mongo DB 是否被实际使用。因此，我希望获得最后一次写入操作的时间戳。到目前为止我发现了什么：

*   查询带有时间戳的集合。问题：不同集合的不同查询。并非所有人都有时间戳。许多数据库中的许多集合。

*   一般的oplog。对于 STANDALONE 服务器将无法工作 - 除非我现在通过使独立服务器在副本集中运行来创建 oplog。然后也许我可以 ping oplog 并获取数据。让 JS 脚本请求最后一个对象可能会更快。

*   [mongooplog](http://docs.mongodb.org/manual/reference/mongooplog/)命令。用于*复制*更改（将更改从 A 应用到 B）。我宁愿浏览 oplog 本身。

*   使用 ObjectID（它的时间戳精确到一秒）。甚至还有[详细介绍如何使用](http://www.kchodorow.com/blog/2011/12/20/querying-for-timestamps-using-objectids/).

不过，我想知道是否有办法只查询数据库并让它回答。最好是每个集合，但如果我能得到每个数据库的答案，那就太酷了。这将允许我删除未使用的数据库。有什么我可以用的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:17:37.540

关于什么

```
db.serverStatus() 
```

在此命令的输出中，您有许多操作：

```
"opcounters" : {
        "insert" : 1111,
        "query" : 532,
        "update" : 0,
        "delete" : 0,
        "getmore" : 4,
        "command" : 357
    }, 
```

连接数：

```
"connections" : {
    "current" : 1,
    "available" : 2047
}, 
```

网络利用率：

```
"network" : {
    "bytesIn" : 82202280,
    "bytesOut" : 24469137,
    "numRequests" : 1635
}, 
```

简单的监控就够了

# sockets - 停止 Windows 7 应用程序以发送 ARP 请求？

> ID：16188896
> 
> 赞同：0
> 
> 时间：2013-04-24T09:53:46.790
> 
> 标签：sockets, networking, window, arp

我有一个在 Windows 7 上运行并与外部硬件通信的应用程序。外部硬件和 Windows 7 都使用静态 IP 进行通信。

**问题：** 有时 Windows 7 发送的 ARP 数据包会导致硬件发送的数据包丢失。

是否有任何方法可以停止我的系统发送 ARP 请求，或者是否有使用网络的应用程序列表以便我可以禁用它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-30T21:16:06.897

您可以使用静态 ARP 条目将外部 IP 和 MAC 地址绑定在一起，而无需 Windows 7 机器执行 ARP 请求来解析该 IP 的 MAC。

在命令行运行中，

```
netsh interface ipv4 add neighbors {external machine IP} {external machine MAC} 
```

# gwt - Gwt，如何使“富文本区域”仅接受粗体斜体等少数功能并删除所有其他功能？

> ID：16188897
> 
> 赞同：0
> 
> 时间：2013-04-24T09:53:50.317
> 
> 标签：gwt, user-interface, format, richtextarea

比方说，当你在 stackoverflow 中创建新帖子时，你只能设置旧的
和一些非常简单的 Html 标签。

Gwt 中的“富文本区域”有太多我不需要的功能。我只需要粗体、斜体、下划线和超链接。那么如何自定义“富文本区域”，使其只接受一些有限的功能。

此外，当用户将任何来自互联网的格式化文本放入“富文本区域”时，它将清除所有格式，但保留粗体、斜体、下划线和超链接。

另一种解决方案是使文本区域像富文本区域一样工作？

那么，你知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:28:53.347

没有一种方法可以让你去`richTextAreaToolbar.setActiveBlagh(false)`，老实说这会很棒。

由于 GWT 使用默认值`RichTextToolbar`，因此您需要自定义`RichTextToolbar`.

[代码](https://code.google.com/p/google-web-toolkit/source/browse/tags/2.5.0/samples/showcase/src/com/google/gwt/sample/showcase/client/content/text/RichTextToolbar.java)

使用那里的代码，但删除所有不必要的功能，如颜色/图像/等。如果您愿意，您甚至可以添加自己的。这将需要一段时间，但能够自定义您自己的小部件会更令人满意。

**编辑：** 这是另一个链接，可以为您提供有关如何设置它的建议：[自定义 RichTextToolbar](http://www.jeanhsu.com/2010/06/10/how-to-use-richtexttoolbar-in-gwt/)

# java - Spring数据mongodb可分页

> ID：16188903
> 
> 赞同：1
> 
> 时间：2013-04-24T09:54:00.727
> 
> 标签：java, spring, mongodb

我试图让它与spring data mongodb一起工作，但我发现第一个imt eworks，但如果我增加分页中的页码，总是返回0条记录。这是我的代码：

我的服务中的代码

```
 @Override
    public List<Purchase> findByUserId(String userId, int pageNumber) {
        Pageable request =
                new PageRequest(pageNumber - 1, PAGE_SIZE);
        return purchaseRepository.findByUserId(userId, request).getContent();
    } 
```

这里是存储库

```
@Component
public interface PurchaseRepository extends MongoRepository<Purchase, Integer> {

    Purchase findById(@Param("id") String id);

    Page<Purchase> findByUserId(@Param("userId") String userId,Pageable pageable);

    List<Purchase> findAll();

} 
```

但就像我说的，当 pageNumber 为 1 时，一切正常。但是当第二次是 10 时，结果是 0 PAGE_SIZE = 10，是的，我已经检查了数据库并且我已经有 15 个文档。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-02T23:36:26.727

如果您有 15 个文档，且 pageSize=10，那么您将只有 page# 0 和 1 中的数据分别包含 10 和 5 个元素。后续页面不应为您获取任何对象

# database - 弱实体可以有子类吗

> ID：16188909
> 
> 赞同：1
> 
> 时间：2013-04-24T09:54:15.260
> 
> 标签：database, entity-relationship

我想知道弱实体是否有子类。似乎我找不到任何提到它无法完成的规则​​。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T07:11:15.877

如果弱实体不在规范化中，那么我们不能将其划分为子类。因为弱实体本身依赖于 1 或 2 个实体。所以它不包含可规范化的属性。

# python - 使用 pika 获取 RabbitMQ 队列的消费者总数

> ID：16188912
> 
> 赞同：3
> 
> 时间：2013-04-24T09:54:34.873
> 
> 标签：python, rabbitmq, pika, python-pika

以下代码是我用来计算消费者数量的代码：

```
import pika

connection = pika.BlockingConnection(pika.ConnectionParameters(host='IP ADDRESS'))
channel = connection.channel()

this=channel.queue_declare(queue="Queue_name",passive=True)

print this.method.consumer_count 
```

现在我获得的计数是活跃消费者的数量。但是，当消费者从队列中消费时，此计数将打印为零。现在我需要从队列中消费的消费者总数。这出现了 RabbitMQ 管理（作为消费者：0 活跃 25 总计）

当队列中有消息时，有没有办法从队列中获取消费者总数的计数？

先感谢您

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T09:05:44.320

以下是对这个问题的回答。但是，它使用 HTTP API 而不是 pika。

```
import subprocess
import os
import json

#Execute in command line
def execute_command(command):
     proc = subprocess.Popen(command,shell=True,stdout=subprocess.PIPE) 
     script_response = proc.stdout.read().split('\n')
     resp=json.loads(script_response[7])
     print resp[0]['name']
     print resp[0]['consumers']

  ######### MAIN #########
  if __name__ == '__main__':
      execute_command('curl -i -u guest:guest http://*IP ADDRESS*:15672/api/queues/') 
```

请参考：[http ://hg.rabbitmq.com/rabbitmq-management/raw-file/3646dee55e02/priv/www-api/help.html](http://hg.rabbitmq.com/rabbitmq-management/raw-file/3646dee55e02/priv/www-api/help.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-07-08T11:00:19.220

一个简单的选择：

```
self._channel = self._connection.channel()
queue_state = self._channel.queue_declare(queue=self.__queue_name, passive=True, durable=True)
print(queue_state.method.consumer_count)
print(queue_state.method.message_count) 
```

# android - Android - 无法从 strings.xml 读取粗体文本

> ID：16188914
> 
> 赞同：0
> 
> 时间：2013-04-24T09:54:35.773
> 
> 标签：android, string, bold

这是 strings.xml 中的一个字符串：

```
<string name="data_dd"><b>Data: </b>/string> 
```

这是java代码：

```
myTextViews[pointer].setText(getResources().getText(R.string.data_dd) + data + "\n"); 
```

问题是字符串 data_dd 在文本视图中不是粗体。我也尝试了这些，但没有一个起作用：

```
<string name="data_dd"><Data><![CDATA[ <b>Data: </b> ]]> </Data></string>

myTextViews[pointer].setText(Html.fromHtml(getResources().getString(R.string.data_dd)) + data + "\n"); 
```

我能怎么做？

提前谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T09:57:37.817

尝试改变：

```
myTextViews[pointer].setText(Html.fromHtml(getResources().getString(R.string.data_dd)) + data + "\n"); 
```

至 ：

```
myTextViews[pointer].setText(Html.fromHtml(getResources().getString(R.string.data_dd) + data + "\n")); 
```

或测试：

```
yourtextView.setTypeface(null, Typeface.BOLD); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:18:46.827

> **如果要设置整个 myTextViews[pointer] Bold，请使用以下代码：**

在字符串.xml 中

```
<string name="data_dd">Data: </string> 
```

在 TextView 中：

```
myTextViews[pointer].setTypeface(null,Typeface.BOLD);
myTextViews[pointer].setText(getResources().getText(R.string.data_dd) + data); 
```

> **如果您只希望标题“数据：”为粗体，变量“数据”中的其余文本为正常，则使用：**

```
myTextViews[pointer].setText(Html.fromHtml("<b>Data:</b>"+ data)); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-24T09:59:56.450

你是说中文吗？你可以这样试试：

```
TextPaint tp = tv.getPaint();
tp.setFakeBoldText(true); 
```

# java - Java LinkedList API 不是多余的吗？

> ID：16188917
> 
> 赞同：7
> 
> 时间：2013-04-24T09:54:44.540
> 
> 标签：java, api, collections, linked-list

Java LinkedList类中的方法`add`、`addLast`和不执行相同的操作吗？如果是这样，为什么 API 设计要以简洁换取冗余？`offer``offerLast`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-24T09:59:08.883

该类`LinkedList`实现接口`List`和`Deque`. 所以这个类需要实现这四个方法，尽管你是对的，它们做的完全一样。

顺便说一句，这`LinkedList`不是 API。如果您使用接口，例如

```
List<String> list = new LinkedList<>(); 
```

例如，您将看不到方法`addLast`和。`offer``offerLast`

# .net - 通过组策略部署 VSTOR 4 Framework MSI

> ID：16188926
> 
> 赞同：2
> 
> 时间：2013-04-24T09:55:03.030
> 
> 标签：.net, ms-office, vsto, outlook-addin

我开发了一个 Outlook 2010 加载项，它将部署在数百台机器上。为了部署加载项，我使用了 Microsoft 的 ClickOnce 机制。

该加载项依赖于 Office 2010 运行时框架 (VSTOR 4) 的 Visual Studio 工具。在所有机器上手动安装框架非常不方便。好的是在客户端机器上进行批量安装的某种自动化过程。IT 似乎遵循的最佳途径是通过组策略部署先决条件。这里的问题是它只接受 MSI 文件。VSTOR 4 不是 MSI 格式，而是 EXE。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T09:55:25.250

我研究了一下，发现很多开发者都面临这个问题。这就是我解决它的方法。

安装 7-zip，并将“vstor_redist.exe”的所有内容解压到一个文件夹中。确认它可能会询问您的所有覆盖请求。在文件夹内导航并找到另一个文件夹“vstor40”；在那里导航并找到 2 个文件：“vstor40_x64.exe”和“vstor40_x86.exe”。使用 7-zip 从这些文件中提取内容。而且...给你，你有你的MSI文件。

希望对未来 VSTO 开发的开发者有所帮助。

# sql-server - SQL Server AVG 和 Excel AVERAGE 产生不同的结果？

> ID：16188928
> 
> 赞同：2
> 
> 时间：2013-04-24T09:55:11.597
> 
> 标签：sql-server, excel, average

我试图在 SQL 服务器上显示平均值，但是当我在 Excel 中测试数据时，结果不一样，肯定有一些明显的东西我遗漏了。

以下是 SQL Server 的代码和结果：

```
SELECT DISTINCT
d.d_reference + ' - ' + d.d_name AS Faculty,
AVG(sub.GroupSize) AS FacultyAverage

FROM
unitesnapshot.dbo.capd_register r
INNER JOIN unitesnapshot.dbo.capd_studentregister sr ON sr.sr_register = r.r_id
INNER JOIN unitesnapshot.dbo.capd_activity a ON a.a_register = r.r_id
INNER JOIN unitesnapshot.dbo.capd_moduleactivity ma ON ma.ma_activity = a.a_id
INNER JOIN unitesnapshot.dbo.capd_module m ON m.m_id = ma.ma_activitymodule
INNER JOIN unitesnapshot.dbo.capd_department d ON d.d_id = m.m_moduledept
INNER JOIN unitesnapshot.dbo.capd_section sec ON sec.s_id = m.m_modulesection
INNER JOIN (SELECT
            r.r_reference,
            COUNT(DISTINCT s.s_studentreference) AS GroupSize
            FROM
            unitesnapshot.dbo.capd_student s
            INNER JOIN unitesnapshot.dbo.capd_person p ON p.p_id = s.s_id
            INNER JOIN unitesnapshot.dbo.capd_studentregister sr ON sr.sr_student = p.p_id
            INNER JOIN unitesnapshot.dbo.capd_register r ON r.r_id = sr.sr_register
            GROUP BY
            r.r_reference) sub ON sub.r_reference = r.r_reference

WHERE
SUBSTRING(r.r_reference,4,2) = '12' AND
d.d_reference = '730'

GROUP BY
d.d_reference,
d.d_name 
```

![在此处输入图像描述](https://i.stack.imgur.com/fvzZT.png)

这是 Excel 中的结果：

![在此处输入图像描述](https://i.stack.imgur.com/5uEew.png)

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T10:08:03.490

试试这个好玩：

```
select avg(a)
from
    (values(1),(2),(3),(4)) x(a);

avg(a)
-------
2 
```

AVG() 返回与基列相同的数据类型。如果您的列是*int*类型，那么结果也将被截断为*int*。下面返回“正确”的结果。

```
select avg(cast(a as decimal(10,5)))
from
    (values(1),(2),(3),(4)) x(a);

result
--------
2.5 
```

您显示的差异（24 与 19.50484）很可能涉及与此相关的另一个错误。例如，要检查您在 Excel 中汇总的数据是否与在 SQL Server 中的相同，请将此结果转储到 Excel 中并进行汇总。***如果它与您当前认为的 SQL Server 数据的 Excel等效***数据不匹配，请将列对齐并检查它们是否具有相同的行数。然后按值 ASCENDING 对每一列进行单独排序并再次比较。

```
SELECT d.d_name, sub.GroupSize AS FacultyAverage
FROM unitesnapshot.dbo.capd_register r
INNER JOIN unitesnapshot.dbo.capd_studentregister sr ON sr.sr_register = r.r_id
INNER JOIN unitesnapshot.dbo.capd_activity a ON a.a_register = r.r_id
INNER JOIN unitesnapshot.dbo.capd_moduleactivity ma ON ma.ma_activity = a.a_id
INNER JOIN unitesnapshot.dbo.capd_module m ON m.m_id = ma.ma_activitymodule
INNER JOIN unitesnapshot.dbo.capd_department d ON d.d_id = m.m_moduledept
INNER JOIN unitesnapshot.dbo.capd_section sec ON sec.s_id = m.m_modulesection
INNER JOIN (SELECT r.r_reference,
            COUNT(DISTINCT s.s_studentreference) AS GroupSize
            FROM unitesnapshot.dbo.capd_student s
            INNER JOIN unitesnapshot.dbo.capd_person p ON p.p_id = s.s_id
            INNER JOIN unitesnapshot.dbo.capd_studentregister sr ON sr.sr_student = p.p_id
            INNER JOIN unitesnapshot.dbo.capd_register r ON r.r_id = sr.sr_register
            GROUP BY r.r_reference) sub ON sub.r_reference = r.r_reference
WHERE SUBSTRING(r.r_reference,4,2) = '12' AND d.d_reference = '730'
ORDER BY d.d_name 
```

# java - 单元缓存映射加载失败 - GWT

> ID：16188929
> 
> 赞同：6
> 
> 时间：2013-04-24T09:55:12.277
> 
> 标签：java, gwt, compiler-errors, intellij-idea, smartgwt

我在 GWT 项目的编译时收到此错误，没有像“gwt-UnitCache”这样的文件夹要删除，如以下问题中所建议的那样

*   [奇怪的 GWT 编译错误](https://stackoverflow.com/questions/13648657/weird-gwt-compile-error)

*   [GWT RPC 应用程序中的异常](https://stackoverflow.com/questions/8521475/exception-in-gwt-rpc-app)

我正在使用 IntelliJ IDEA (IDE)、SmartGWT EE (Framework)、JBoss AS (Server) 和 JPA

这是错误日志：

![在此处输入图像描述](https://i.stack.imgur.com/Md9Fa.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-06T08:07:39.787

如果您更改`<module rename-to='<appname>'>`.gwt.xml 中的值，它将给出相同的错误:) 但是您可以删除您的`gwt-unitCache`，一切正常 :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-13T17:04:37.273

IntelliJ IDEA 将 GWT 缓存文件存储在 以外的其他位置`<ProjectFolder>/gwt-unitCache`，如果您使用的是 Eclipse 和 GPE（Google Plugin for Eclipse），这是缓存的默认目录。

在 IDEA 中，GWT 缓存默认应位于`<your_home>/.IntelliJIdea12/system/gwt`(IntelliJ IDEA 12, Linux)。对于其他操作系统，您可以检查[Project 和 IDE Settings](http://www.jetbrains.com/idea/webhelp/project-and-ide-settings.html)。

如果您删除提到`gwt`的文件夹内容，IntelliJ 将创建一个新的缓存，这反过来可能会解决您的`Failure in unit cache...`（和类似的`Unable to read from byte cache`）问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-10T10:34:04.690

我对 Eclipse 也有同样的问题。

不幸的是，唯一的解决方案似乎是 Crowlix 给出的解决方案。我试图删除 gwtCache 和 Temp 文件，但没有任何效果。

只有在删除整个项目并重新导入它时，问题才会得到解决。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T15:06:21.073

我面临同样的错误，这个提示对我不起作用，此外，我一直在寻找解决方案，最后，我得到了这个建议：

[Java堆栈溢出错误](https://stackoverflow.com/a/2127262)

我尝试使用-Xss1m，但错误仍然存​​在，我继续尝试，我的最终值是-Xss5m

我正在使用 GWT 2.5.1 和 IntelliJ 12。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-25T07:19:21.643

我能够通过系统地删除、编译和重新添加每个工件来修复它。如果您遇到此问题，请确保您有这样的结构：

![在此处输入图像描述](https://i.stack.imgur.com/siqop.png)

**lib**包含您的编译时库

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-09T08:03:22.697

我在用**maven**构建项目时遇到了同样的问题。

签署[Nishant](https://stackoverflow.com/questions/12525288/is-there-a-way-to-pass-jvm-args-via-command-line-to-maven)和@iVieL 的建议：

```
$ export MAVEN_OPTS="-Xms512m -Xmx1024m -Xss32m"
$ mvn clean package 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-13T14:12:30.520

你必须先清理你的项目（Project -> Clean）然后删除 /gwt-unitCache 然后重建它。

# vb.net - 使用 htmlagilitypack 我们如何确定是否加载了 URL 或所需的网页

> ID：16188931
> 
> 赞同：1
> 
> 时间：2013-04-24T09:55:15.580
> 
> 标签：vb.net, html-agility-pack

我想知道，使用`htmlagilitypack`我们如何确定是否加载了给定 URL 的网页，因为我想将此加载与进程栏相关联。有什么想法可以做到这一点吗？

我还想在加载网页后执行一些功能。有没有像 webbrowser 控件这样的方法有状态 WebBrowserReadyState.Complete ？

例如，我有一个用于 Web 浏览器控制的代码

```
 While Not WebBrowser1.ReadyState = WebBrowserReadyState.Complete
        If timerCouunt = True Then Exit While
        Application.DoEvents()
        If ProgressBar1.Value >= 100 Then ProgressBar1.Value = 0
        ProgressBar1.Value = ProgressBar1.Value + 20
    End While 
```

我怎样才能做到以上使用`htmlagilitypack`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:50:48.470

HtmlAgilityPack 有一个 HtmlWeb 实用程序类，可以下载页面，但它是同步的，不像 web 浏览器。

或者，您可以使用 HttpWebRequest 或 WebClient 下载页面文本并使用 Html Agility Pack 对其进行解析。两者都可以使用异步方法，例如 WebClient 具有[DownloadDataCompleted 事件](http://msdn.microsoft.com/library/system.net.webclient.downloaddatacompleted.aspx)。

# php - 在一页 wordpress 上显示辅助导航

> ID：16188940
> 
> 赞同：0
> 
> 时间：2013-04-24T09:55:31.560
> 
> 标签：php, wordpress, templates, navigation

我的标题中有这段代码：

```
 <?php if (has_nav_menu('sub-header-menu', 'responsive')) { ?>
            <?php wp_nav_menu(array(
                'container'       => '',
                'menu_class'      => 'sub-header-menu',
                'theme_location'  => 'sub-header-menu')
                ); 
            ?>
        <?php } ?> 
```

我需要一些让它只显示在博客页面和该页面的子页面（即类别）上的东西。我对 PHP 不是很好，但我想这会很简单

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:00:08.383

只需在您的条件下添加您的博客页面的页面 ID。

```
$parentPageId = is_subpage();
if (has_nav_menu('sub-header-menu', 'responsive') &&
   (is_page( $blogPageId ) || $parentPageId == $blogPageId)) 
```

*您也可以使用slug*检查您的页面。

```
is_page( 'blog' ) 
```

获取父页面 ID（如果存在）的函数。

```
function is_subpage() {
    global $post;
    if ( is_page() && $post->post_parent ) {
        return $post->post_parent;
    } else {
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:01:08.850

找出博客页面的ID `$blogid = 123`（例如），然后检查`if ($page->ID == $blogid) { /*show menu*/ }`

# android - Android facebook sdk 3.0.1 使用最后一个会话

> ID：16188943
> 
> 赞同：0
> 
> 时间：2013-04-24T09:55:44.890
> 
> 标签：android, facebook-android-sdk

我有以下使用 facebook sdk 3.0.1 的场景。当用户首次登录并选择“FB 登录”时，SSO 启动，新会话打开，一切正常。但是，当用户关闭应用程序并重新启动它时 - 我不明白如何获取最后一个打开的会话，目前我正在打开一个新会话并且用户再次看到 FB 进度条（当它连接到再次使用 FB，即使用户在上次运行时已经批准了 FB）。有人知道如何跳过此操作吗？

编辑1：

这就是我检索会话的方式：

```
public void tryRetrievFacebookSession() {
    Session session = Session.getActiveSession();

    if (session != null && session.isOpened())
        return;

    session = Session.openActiveSession(this, true, new Session.StatusCallback() {

        @Override
        public void call(Session session, SessionState state, Exception exception) {
            MobliLog.d("SplashScreen", "Inside call() with session with state: " + session.getState());
            // onSessionStateChanged(session, state, exception);
        }
    });

}

 @Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    Session session = Session.getActiveSession();

    if (session != null)
        session.onActivityResult(this, requestCode, resultCode, data);

    uiHelper.onActivityResult(requestCode, resultCode, data);

} 
```

会话通常是通过 LoginButton 或以下行创建的：

```
session = Session.getActiveSession();

    if (session.getState().isClosed())
        session = new Session(this);

    if (session.isOpened()) {
        onAuthenticationEndListener.onSuccessfullAuthentication();
        return;
    } else {
        this.onFacebookAuthenticationEndListener = onAuthenticationEndListener;
        Session.setActiveSession(session);
        session.openForRead(new Session.OpenRequest(SocNetwksCompatScreen.this).setCallback(null));
        return;
    } 
```

资料一：

当我做第一个 Session session = Session.getActiveSession(); 在 sso 身份验证后的登录中，我的会话状态为 CLOSED 而不是 OPENED

信息2：我正在使用uiHelper并像这样初始化它：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    twitter = SocialPluginsUtils.getTwitterClient();

    uiHelper = new UiLifecycleHelper(this, statusCallback); 
    uiHelper.onCreate(savedInstanceState);
} 
```

现在，我知道在我执行 Session.getActiveSession(); 之后 会话状态应该打开，然后打开，然后应该调用 uiHelper 的回调。在我的代码中，状态是 CLOSED 或 CLOSED_LOGIN_FAILED 或 CREATED（不确定为什么它不稳定），其余的不会发生

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:23:36.740

事实上，每次用户关闭应用程序时会话都会关闭。
所以如果`Session.getActiveSession()`返回一个空会话，你只需要调用`Session.openActiveSession(activity, true, sessionCallback)`.

如果存在有效的令牌缓存，此方法将使用它来打开新会话，而无需用户插入任何数据。否则，这将显示具有基本权限的默认对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T17:49:28.747

从我在您编辑后看到的情况来看，问题可能与您管理会话的方式有关。我在我的项目中使用此代码：

```
 Session session = Session.getActiveSession();

    if (session == null){
        Session.openActiveSession(activity, true, sessionCallback);
    }

    else if (!session.getState().isOpened()){
        session.openForRead(new Session.OpenRequest(activity)
                .setCallback(sessionCallback));
                    //this will open the session with basic read permissions
    }

    else {          
        //do what you want with the opened session
    } 
```

此外，如果您使用，`UiLifecycleHelper`则不需要我在评论中建议您的两行代码，它们已经在帮助程序的方法中。但是你必须确保在activity的每个相关方法（onResume、onPause等）中调用helper的所有方法。

如果没有令牌缓存，`openActiveSession(activity, true, sessionCallback)`它将自动调用一个新对话框，如果用户成功登录，则新的令牌缓存将可供将来使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T10:13:02.630

问题解决了。我不小心调用了 session.closeAndClearTokenInformation(); 在 onStop() 中（是的，太愚蠢了！）

# android - android - 两种颜色的Action Bar背景

> ID：16188944
> 
> 赞同：1
> 
> 时间：2013-04-24T09:55:45.200
> 
> 标签：android, android-layout, android-actionbar, actionbarsherlock

我正在使用`ActionbarSherlock`. 我需要为操作栏创建一个背景样式，如下图所示。

![操作栏图像](https://i.stack.imgur.com/VGSyE.png)

我可以使用 9-patch 图像创建纯色背景样式，但这对我来说似乎很复杂。请给我一个线索来实现这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T11:41:41.130

为所有操作栏高度创建 9-patch 图形，即 48 dp（纵向）、40 dp（横向）和 56 dp（平板电脑）。至少在 xhdpi 中提供图形。

这是电话，肖像（xhdpi）的图形。重命名为**ab_bg.9.png**

![9补丁](https://i.stack.imgur.com/EYiKY.png)

```
<style name="AppTheme" parent="Theme.Sherlock">
    <item name="actionBarStyle">@style/Styled.ActionBar</item>
    <item name="android:actionBarStyle">@style/Styled.ActionBar</item>
</style>

<style name="Styled.ActionBar" parent="@style/Widget.Sherlock.ActionBar">
    <item name="android:background">@drawable/ab_bg</item>
</style> 
```

# iphone - 测量来自 iPhone 的声音输入

> ID：16188951
> 
> 赞同：1
> 
> 时间：2013-04-24T09:56:08.273
> 
> 标签：iphone, audio, recorder

我正在尝试在 xcode 中为 iPhone 制作一个小型声音测量应用程序，我一直在使用以下教程来激活麦克风

[http://mobileorchard.com/tutorial-detecting-when-a-user-blows-into-the-mic/](http://mobileorchard.com/tutorial-detecting-when-a-user-blows-into-the-mic/)

我想将输入提取为数字并将其显示在应用程序的标签中。我该怎么做呢？

我试过创建一个 IBOutlet 和像这样的标题：

@property (weak,nonatomic) IBOutlet UILabel *myLabel;

我尝试在以下代码中包含 _mylabel 部分：

```
if (recorder) {
    [recorder prepareToRecord];
    recorder.meteringEnabled = YES;
    [recorder record];
    levelTimer = [NSTimer scheduledTimerWithTimeInterval: 0.03 target: self selector:      @selector(levelTimerCallback:) userInfo: nil repeats: YES];
    _myLabel.text = [[NSString alloc] initWithFormat:@"%@", recorder];**
} else
    NSLog([error description]); 
```

这是 levelTimerCallback 的代码

```
- (void)levelTimerCallback:(NSTimer *)timer {
[recorder updateMeters];
NSLog(@"Average input: %f Peak input: %f", [recorder averagePowerForChannel:0], [recorder peakPowerForChannel:0]);} 
```

这完全是胡说八道吗？

当我运行代码时，我附加代码的标签会显示 message `<AVAudioRecorder: 0x7d2b00>`。然而，我确实注意到我在 xcode 中的终端开始显示麦克风的平均输入和峰值输入。但是如何将这些数据放入标签中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T04:21:17.457

你应该这样做，

```
- (void)levelTimerCallback:(NSTimer *)timer 
{
    [recorder updateMeters];
    NSLog(@"Average input: %f Peak input: %f", [recorder averagePowerForChannel:0], [recorder peakPowerForChannel:0]);
    _myLabel.text = [NSString stringWithFormat@"Average input: %f Peak input: %f",[recorder averagePowerForChannel:0], [recorder peakPowerForChannel:0]];
} 
```

见上面`_myLabel.text`是要在你的方法中更新。

希望这可以帮助。

**编辑**

```
 _myLabel.text = [NSString stringWithFormat@"%f",[recorder averagePowerForChannel:0]]; //Only average input
 _myLabel.text = [NSString stringWithFormat@"%f",[recorder peakPowerForChannel:0]]; //Only peak input 
```

# gzip - 解压缩 Gzip 格式？

> ID：16188953
> 
> 赞同：1
> 
> 时间：2013-04-24T09:56:09.293
> 
> 标签：gzip, compression, inflate-exception

我面临 Gzip 解压缩的问题。

情况是这样的。我有一些 UTF-8 格式的文本。现在这个文本使用 PHP 中的 gzdeflate() 函数压缩，然后存储在 Mysql 中的 blob 对象中。

现在我尝试检索 blob 对象，然后使用 Java 的 Gzip Stream 解压缩它。但它会抛出一个错误，说它不是 GZIP 格式。

我什至在 Java 中使用 Inflater 来做同样的事情，但现在我得到“DataFormatException：不正确的标头检查”。充气机的代码如下。

```
 //rs is the resultset
 //blobAsBytes is the byte array
 while(rs.next()){
        blob = rs.getBlob("old_text");
        int blobLength = (int) blob.length();  
        blobAsBytes = blob.getBytes(1, blobLength);
    }

     Inflater decompresser = new Inflater();
     decompresser.setInput(blobAsBytes);
     byte[] result = new byte[100];
     int resultLength = decompresser.inflate(result);  // this is the line where the exception is occurring.
     decompresser.end();

     // Decode the bytes into a String
     String outputString = new String(result, 0, resultLength, "UTF-8");
     System.out.println(outputString); 
```

我必须使用 Java 执行此操作并获取存储在数据库中的所有文本。

有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:49:53.453

使用`gzencode()`，不使用`gzdeflate()`。后者不产生 gzip 格式，它产生 deflate 格式。前者*确实*产生 gzip 格式。PHP 函数的名称非常可怕且令人困惑。

或者，在构造函数中使用具有 true的`java.util.zip.Inflater`类。这将在 Java 端解码原始 deflate 数据。`nowrap``Inflater`

# html - 想要显示在滚动的容器 div 上的拖动

> ID：16188954
> 
> 赞同：0
> 
> 时间：2013-04-24T09:56:11.420
> 
> 标签：html, css, jquery

我想将我`<div>`的从一个容器拖到另一个容器。但在那种情况下，每当我拖动我`div`的时候，滚动就完成了，并且`div`被拖动到了容器本身的内部。

我的 HTML 代码如下：

```
<fieldset class="span4">
    <legend>Builder</legend>
    <div class="builder scrollspy-example" id="builderBox" data-spy="scroll" style="height: 600px;" data-bind="foreach:items">
        <div class='media draggable alert alert-block fade in' data-bind="attr:{'data-id':ID}">
            <button type='button' class='close' data-dismiss='alert'>×</button>
            <div class='row'>
                <legend><h4 class='media-heading' data-bind="text:Title" style='margin-left: 30px;'></h4></legend>
            </div>
            <div class="row" style="margin-left: 5px;">
                <div class='pull-left'>
                    <img class='media-object' data-bind="attr:{src:'http://images.vidzapper.com/'+ImageUrl+'?w=60&h=60'}" style='width: 60px; height: 60px;' />
                </div>
            </div>
        </div>
</fieldset>
<fieldset class="span4">
    <legend>Organizer</legend>
    <div class="Organizer  scrollspy-example" id="drop" data-spy="scroll" style="height: 600px;">
    </div>
</fieldset> 
```

我的脚本代码如下::

```
$("#drop").droppable({
    accept: ".draggable",
    drop: function (event, ui) {
        console.log("drop");
        var dropped = ui.draggable;
        var droppedOn = $(this);
        $(dropped).detach().css({ top: 0, left: 0 }).appendTo(droppedOn);
    }
});
$("#drop").sortable(); 
```

我应该使用什么以便拖动显示在容器上？

# ruby-on-rails - 在 Rails 中更新 Cancan

> ID：16188958
> 
> 赞同：0
> 
> 时间：2013-04-24T09:56:32.567
> 
> 标签：ruby-on-rails

我正在做一个授权应用程序，其中： -具有管理员角色，可以管理所有内容。-拥有访客角色，可以创建帖子并编辑他创建的帖子。

我面临着客人角色的问题。我已经完成了以下关联：-posts belongs_to user（在帖子模型中，在迁移中我也有 user_id 属性，我已经引用了用户的帖子）-user has_many 帖子。

当我尝试创建新帖子时，user_id 为零。我不知道如何在 Post 对象中设置 user_id 属性。

类 ProductsController < ApplicationController

```
before_filter :self_load, :only=>[:show,:edit,:update,:destroy]

before_filter :authenticate_user, :only=>[:edit,:update,:destroy]

def index
 @products=Product.find(:all)
end

def new 
 @product=Product.new(:user_id=>current_user.id)
end

def create
 @product=Product.new(params[:product])
 if @product.save
    redirect_to root_url, :notice=>'New Product has been added'
 else
    render :action=>'new'

 end
end  

def show
end

def edit
end

def update

if @product.update_attributes(params[:product])
     redirect_to root_url, :notice=>'Product has been updated.'
  else
     render :action => 'edit'
  end
end

def destroy

 @product.destroy
 redirect_to root_url    
end

def self_load
 @product = Product.find(params[:id])
end

def authenticate_user
 if current_user
 else
   redirect_to root_url, :notice=>'You are not authorised to access'
 end
end
end 
```

看法：

## 添加产品

<%= form_for(@product) 做 |f| %> <% 如果@product.errors.any? %>

```
 <ul>
  <% @product.errors.full_messages.each do |msg| %>
    <li><%= msg %></li>
  <% end %>
  </ul>
<% end %>

<table>

<tr><td><%= f.label 'Title:' %></td>
   <td><%= f.text_field :title %></td>

<tr><td><%= f.label 'Description:' %></td>
  <td><%= f.text_area :description,:rows=>10 %></td></tr>

<tr><td><%= f.label 'Price:' %></td>
   <td><%= f.text_field :price %></td></tr>

<tr><td><%= f.submit 'Save' %></td></tr>
</table>

<% end %>
<%= link_to 'Back', root_url %> 
```

模型类 Product < ActiveRecord::Base

```
 belongs_to :user 

 attr_accessible :title, :description, :price, :user_id

 validates_presence_of :title, :description, :price

 validates_uniqueness_of :title

 validates_length_of :title, :in=>4..10

 validates_length_of :description, :minimum=>10

 validates_numericality_of :price
end 
```

请帮我解决这个问题......如果你需要任何进一步的信息，你可以问......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:26:56.443

如果只有登录用户可以创建产品，试试这个

```
class ProductsController < ApplicationController
  def create
    @product =  current_user.products.build params[:product]

    if @product.save
      # Stuff is product save succesfully
    else
      # Stuff is product does not saved
    end

  end
end 
```

# android - 在 asynchtask 中给出异常的进度对话框

> ID：16188961
> 
> 赞同：5
> 
> 时间：2013-04-24T09:56:38.250
> 
> 标签：android, exception, android-asynctask, progressdialog, forceclose

我正在开发一个 android 应用程序，当我关闭进度对话框时，我使用异步任务和后期执行方法，异常即将到来并且应用程序正在强制关闭。

例外情况是：

```
 04-24 09:41:54.661: E/AndroidRuntime(1727): java.lang.IllegalArgumentException: View not attached to window manager
    04-24 09:41:54.661: E/AndroidRuntime(1727):     at android.view.WindowManagerImpl.findViewLocked(WindowManagerImpl.java:355) 
```

编码：

```
data_insertion = new AsyncTask<Void, Void, Void>() {
  @Override
  protected void onPreExecute() {
    // TODO Auto-generated method stub             
    CommonUtility.show_PDialog(MainActivity.this);
    super.onPreExecute();
  }
  @Override
  protected void onPostExecute(Void result) {
    // TODO Auto-generated method stub
    //setting alaram for refresh api 
    CommonUtility.close_PDialog(); //*getting exception on this line* 
    Intent setalaram = new Intent(MainActivity.this, SetAlaram.class);
    startService(setalaram);
    Intent i = new Intent(MainActivity.this, PlayListActivity.class);
    startActivity(i);
    MainActivity.this.finish();
    super.onPostExecute(result);
    finish();
  }
  @Override
  protected Void doInBackground(Void...params) {
    // TODO Auto-generated method stub
    //some code 
  }
  return null;
}
}.execute(null, null, null); 

//and here is my close method for dilogue
public static void close_PDialog() {
  if (dialog != null && dialog.isShowing()) {
    dialog.dismiss();
  }
} 
```

日志输出：

```
04-24 09:41:54.661: E/AndroidRuntime(1727): FATAL EXCEPTION: main
04-24 09:41:54.661: E/AndroidRuntime(1727): java.lang.IllegalArgumentException: View not attached to window manager
04-24 09:41:54.661: E/AndroidRuntime(1727):     at android.view.WindowManagerImpl.findViewLocked(WindowManagerImpl.java:355)
04-24 09:41:54.661: E/AndroidRuntime(1727):     at android.view.WindowManagerImpl.removeView(WindowManagerImpl.java:200)
04-24 09:41:54.661: E/AndroidRuntime(1727):     at android.view.Window$LocalWindowManager.removeView(Window.java:432)
04-24 09:41:54.661: E/AndroidRuntime(1727):     at android.app.Dialog.dismissDialog(Dialog.java:278)
04-24 09:41:54.661: E/AndroidRuntime(1727):     at android.app.Dialog.access$000(Dialog.java:71)
04-24 09:41:54.661: E/AndroidRuntime(1727):     at android.app.Dialog$1.run(Dialog.java:111)
04-24 09:41:54.661: E/AndroidRuntime(1727):     at android.app.Dialog.dismiss(Dialog.java:268)
04-24 09:41:54.661: E/AndroidRuntime(1727):     at commonUtilities.CommonUtility.close_PDialog(CommonUtility.java:233)
04-24 09:41:54.661: E/AndroidRuntime(1727):     at com.walkover.filesharing.MainActivity$1.onPostExecute(MainActivity.java:55)
04-24 09:41:54.661: E/AndroidRuntime(1727):     at com.walkover.filesharing.MainActivity$1.onPostExecute(MainActivity.java:1)
04-24 09:41:54.661: E/AndroidRuntime(1727):     at android.os.AsyncTask.finish(AsyncTask.java:417)
04-24 09:41:54.661: E/AndroidRuntime(1727):     at android.os.AsyncTask.access$300(AsyncTask.java:127)
04-24 09:41:54.661: E/AndroidRuntime(1727):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
04-24 09:41:54.661: E/AndroidRuntime(1727):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-24 09:41:54.661: E/AndroidRuntime(1727):     at android.os.Looper.loop(Looper.java:130)
04-24 09:41:54.661: E/AndroidRuntime(1727):     at android.app.ActivityThread.main(ActivityThread.java:3683)
04-24 09:41:54.661: E/AndroidRuntime(1727):     at java.lang.reflect.Method.invokeNative(Native Method)
04-24 09:41:54.661: E/AndroidRuntime(1727):     at java.lang.reflect.Method.invoke(Method.java:507)
04-24 09:41:54.661: E/AndroidRuntime(1727):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-24 09:41:54.661: E/AndroidRuntime(1727):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-24 09:41:54.661: E/AndroidRuntime(1727):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:03:56.603

可能当任务结束并在其 onPostExecute 上运行时，创建它的 Activity（并从中获取上下文）在到达 onPostExecute 时已经被销毁。

您可以保持这种方式，或者在某个地方创建一个 progressDialog 实例，每次您需要一个对话框时都可以使用它，并且在您的活动的 onDestroy() 方法中您可以取消它（以防发生类似情况）。

# php - 如何通过php将图像从域上传到同一服务器下的另一个域？

> ID：16188963
> 
> 赞同：0
> 
> 时间：2013-04-24T09:56:40.893
> 
> 标签：php, image, file, file-upload

我想将图像从文件夹移动`www.abc.com/upload/abc.jpg`到`www.def.com/upload/abc.jpg`. 这两个网站有相同的godaddy cpanel，但它们的ftp 细节不同.. 我怎样才能移动那个图像？

```
 <?php
   move_uploaded_file($_FILES["file"]["tmp_name"],
  "C:\inetpub\vhosts\def.com\upload\\" . $_FILES["file"]["name"]);

 ?> 
```

它不工作。但是当我使用`ftp_put()`函数时它会起作用，这个函数需要 ftp 用户名和密码。我想在没有 ftp 详细信息的情况下移动图像。我怎样才能移动它，有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:21:45.433

试试这个解决方案：

```
# Source domain code..
$save_dir = 'C:\inetpub\vhosts\abc.com\upload\abc.jpg' ;# Temporary save file in your source domain..
$url = "http://www.def.com/copy_upload_file.php"; # destination domain URL
$ch = curl_init();
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_VERBOSE, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible;)");
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_POST, true);
$post = array(
    "file"=> "@".$save_dir,
);
curl_setopt($ch, CURLOPT_POSTFIELDS, $post);
$response = curl_exec($ch); 
```

将此文件添加到您的另一个域中..

```
# Destination domain file called as copy_upload_file.php
$path = 'C:\inetpub\vhosts\def.com\upload\'; # Write full path here
if(isset($_FILES["file"]))
{
    if ($_FILES["file"]["error"] > 0)
    {
        echo "0";
    }
    else
    {
        if(is_uploaded_file($_FILES["file"]["tmp_name"]) && move_uploaded_file($_FILES["file"]["tmp_name"], $path . $_FILES["file"]["name"]))
        {
            echo "1";
        }
        else {
            echo "0";
        }
    }
}
else
{
    echo "0";
} 
```

# jms - 基于正文内容在 JMS 中进行过滤

> ID：16188964
> 
> 赞同：0
> 
> 时间：2013-04-24T09:56:40.973
> 
> 标签：jms, publisher, subscriber

我正在使用 JMS 实现 Pub/Sub 模型。我从 Pub 向所有订阅者发送消息。我希望订阅者应该根据实际消息正文中的某些字符串获得过滤的消息。

例如，订阅者订阅了主题“体育”，并且应该只接收那些在消息正文中包含关键字“板球”的帖子。

ps 我不想使用消息选择器。

我该如何实现这一点。

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:03:40.090

您不能使用任何机制来根据消息正文内容过滤有关主题的消息。通常**JMS 选择器**用于过滤消息，但即使这也不适用于正文内容：

来自[Java EE 6 教程](http://docs.oracle.com/javaee/6/tutorial/doc/bnceh.html#bncey)：

> **消息选择器不能根据消息正文的内容来选择消息。**.

这里的问题是您必须首先接收（即**使用**）消息，然后**提取**其内容，这排除了任何类型的 Body 过滤的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T11:58:47.623

看看阿帕奇骆驼。它提供了一种路由和过滤消息的方法，并与 Active MQ 完美集成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T05:18:05.250

JMS 本身无法做到这一点。

您通常所做的是使发送应用程序根据消息类型（订单、潜在客户、发票、状态报告或诸如此类）使用不同的队列。如果您不想使用单独的队列，您至少可以让发送应用程序使用可以使用选择器过滤的某些属性标记消息。

在某些情况下，您仍然需要根据消息的实际内容进行路由和/或过滤，有专门为这类事情量身定制的软件。[Apache Camel](http://camel.apache.org/)和[Mule ESB](http://www.mulesoft.org/)是两个选项。

# oracle-apex - 使一行以表格形式只读

> ID：16188966
> 
> 赞同：0
> 
> 时间：2013-04-24T09:56:42.263
> 
> 标签：oracle-apex

我有一个表格形式，用户将每年更新他们的目标。每个产品将有三行：一行显示销售额（去年），一行显示 sales_target（销售人员将进入）和一个经理图（经理期望销售人员应该卖什么）。用户应该只能查看去年的销售额和经理的数字，并且能够进入 sales_targets。我知道如何使列可读，但如果它不是经理人物和销售，则坚持如何使行可读。

我可以从另一篇文章中使用一些 javascript，但是那是用于列而不是行，可以使用类似的东西吗？[链接在这里](https://stackoverflow.com/questions/16056575/only-display-edit-link-on-certain-rows-on-apex-report)

我在这里做了一个演示：

链接：[apex.oracle.com](http://apex.oracle.com)
工作区：apps2
用户：用户
密码：DynamicAction2
应用程序名称：Application 71656 表格形式的只读行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T10:59:56.130

是的，可以使用类似的东西（在页面加载时执行）：

```
$('#TAB_REP').find('td[headers="TYPE"]:contains(manager figure)').siblings('td').children('input').attr('disabled', 'disabled'); 
```

其中 TAB_REP 是您的报告的静态 ID。

我尝试使用更简单的方法 - 通过定义列的属性，但在表格报告中，顶点不会替换 #COLUMN# 字符串。希望这不是一个错误。

PS我已经改变了你的演示。

# salesforce - 带有附件的 Salesforce 电子邮件发送添加了额外的扩展名 .html

> ID：16188967
> 
> 赞同：1
> 
> 时间：2013-04-24T09:56:49.587
> 
> 标签：salesforce, sendmail

我正在发送带有 3 个附件的电子邮件，它工作正常，但是当附件文件很大时，它会在我的电子邮件中添加带有文件名的额外扩展名，即 test.pdf 与 (test.pdf.html) 一起出现，并且邮件会转到垃圾邮件文件夹。下面是我的代码。

```
 if(strAttachFile != null && strAttachFile != '' && fileBody != null) {
        Messaging.Emailfileattachment efa1 = new Messaging.Emailfileattachment();  
        efa1.setFileName(objAttachment1.Name);        
        efa1.setbody(objAttachment1.Body); 
        fileAttachments.add(efa1);
    }
    if(strAttachFile1 != null && strAttachFile1 != ''  && fileBody1 != null) {
        Messaging.Emailfileattachment efa2 = new Messaging.Emailfileattachment();  
        efa2.setFileName(objAttachment2.Name);
        efa2.setbody(objAttachment2.Body); 
        fileAttachments.add(efa2);
        system.debug('---fileAttachments---'+fileAttachments);
    }
    if(strAttachFile2 != null && strAttachFile2 != '' && fileBody2  != null) {
        Messaging.Emailfileattachment efa3 = new Messaging.Emailfileattachment();  
        efa3.setFileName(objAttachment3.Name);
        efa3.setbody(objAttachment3.Body); 
        fileAttachments.add(efa3);
    }

    mail.setFileAttachments(fileAttachments); 
    system.debug('---mail---'+mail);
    Messaging.sendEmail(new Messaging.SingleEmailMessage[] { mail }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:05:50.920

这是由于 Salesforce 发送附件的方式，可能与附件的大小有关。

Salesforce 会自动转换超过 3mb 的附件并将它们作为链接发送。

HTML 文件链接到由 salesforce 托管的服务器，并将此文件存储 30 天。（作为独奏电子邮件不得通过 Force.com 服务器发送。）

就这些。

# javascript - 如何将javascript数组绑定到mvc4剃须刀列表框

> ID：16188971
> 
> 赞同：0
> 
> 时间：2013-04-24T09:56:53.243
> 
> 标签：javascript, asp.net-mvc-3, asp.net-mvc-4

我在java脚本中有一个数组

```
var aaa = ["school1,100"],["school2,101"],["school3,103"] 
```

我想将此数组绑定到剃须刀页面的多选列表框。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:16:20.083

您必须使用 jQuery 将 Javascript 数组绑定到列表框。下面的代码将帮助您将 JS 数组绑定到列表框。

**JAVASCRIPT**

```
 $(document).ready(function () {

 var aaa = ["school1,100", "school2,101", "school3,103"]

 for (var i = 0; i < aaa.length; i++) {
     $('#listbox').append('<option>' + aaa[i] + '</option>');
 }
}); 
```

**HTML**

```
 <select id="listbox" size="5"></select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:24:46.583

```
<select id="listbox" size="5"></select> 
```

JS：

```
var select = document.getElementById('listbox');
addOptions(select, aaa);

function addOptions(el, ar){
    for(var i = 0; i < ar.length; i++){
        var option = document.createElement('option');
        option.innerHTML = ar[i];
        el.appendChild(option);
    }
} 
```

# c# - 强制执行代码直到方法结束

> ID：16188973
> 
> 赞同：1
> 
> 时间：2013-04-24T09:56:55.597
> 
> 标签：c#, multithreading, sockets, delay, delayed-execution

我正在开发客户端-服务器多线程应用程序：

沟通的进展是：

1.  服务器侦听套接字
2.  客户端连接并向服务器发送请求或请求
3.  每个请求都以 0x04 结束
4.  服务器必须使用比传入请求慢的操作来处理每个请求

当两个请求在短时间内发生并且由于第二个请求即将处理而无法处理第一个请求直到方法结束时，我在“ProcessClient”方法中遇到问题。foreach 循环后出现问题：

```
 foreach (var t in invoices)
            {
                SaveToDataBase(t);
            } 
```

方法直到最后才会执行，并且不会使用以下代码片段向客户端发送响应：

```
 var ResponseFile = ResponseClientFolder + "\\" + ResponseClientFileName + x + ".txt";
            StreamWriter sw = File.CreateText(ResponseFile);
            sw.WriteLine(_odgovor);
            sw.Close();
            _odgovor = string.Empty;
            SendToClient(ResponseFile); 
```

因为第二个请求发生在“ProcessClient”方法中。

有什么办法可以解决这个问题。我一直在寻找许多没有成功的解决方案。

整个代码如下：

```
 private void RunListener()
    {
        try
        {
            _listener = new TcpListener(IPAddress.Parse(ServerAddres), ServerPort);
            _listener.Start();
            while (true)
            {
                TcpClient client = _listener.AcceptTcpClient();
                Invoke(new Action(() => { }));
                ThreadPool.QueueUserWorkItem(ProcessClient, client);
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message, @"Run listener");
        }
    }

    private void ProcessClient(object state)
    {
        try
        {
            byte[] bytes = new byte[1024];
            TcpClient client = state as TcpClient;
            StringBuilder completeMessage = new StringBuilder();

            if (client == null) return;

            networkStream = client.GetStream();
            int bytesRead = 0;
            do
            {
                bytesRead = networkStream.Read(bytes, 0, bytes.Length);
                completeMessage.AppendFormat("{0}", Encoding.Default.GetString(bytes, 0, bytesRead));
            } while (bytesRead > 0 && bytes[bytesRead - 1] != 0x04);

            completeMessage = completeMessage.Replace(@"”", "");

            string datetime = DateTime.Now.ToString();
            var x = datetime.Replace(".", string.Empty).Replace(":", string.Empty).Replace(" ", string.Empty);
            var inputfilename = "Racun" + x + ".txt";

            StreamWriter sws = File.CreateText(inputfilename);
            sws.WriteLine(completeMessage);
            sws.Close(); 
            string data = completeMessage.ToString();
            char[] delimiters = { '\r', '\n' };
            string[] invoices = data.Split(delimiters, StringSplitOptions.RemoveEmptyEntries);

            foreach (var t in invoices)
            {
                SaveToDataBase(t);
            }

            var ResponseFile = ResponseClientFolder + "\\" + ResponseClientFileName + x + ".txt";
            StreamWriter sw = File.CreateText(ResponseFile);
            sw.WriteLine(_odgovor);
            sw.Close();
            _odgovor = string.Empty;
            SendToClient(ResponseFile);
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message, @"Proces client");
        }
    }

    private void SendToClient(string ResponseFile)
    {
        try
        {
            byte[] byteData = File.ReadAllBytes(ResponseFile);
            List<byte> byteDat = new List<byte>();
            byteDat.AddRange(byteData);
            byteDat.Add(0x04);

            byteData = byteDat.ToArray();
            networkStream.Write(byteData, 0, byteData.Length);
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message, @"Send to client");
        }
    } 
```

# jquery - 循环遍历我的父 jstree 节点的每个子节点

> ID：16188974
> 
> 赞同：0
> 
> 时间：2013-04-24T09:57:02.323
> 
> 标签：jquery, jstree

第一次在这里发帖。

创建了一个新的 jstree 节点并使用对话框来收集其他信息后，我正在尝试对其他兄弟节点的属性进行一些验证。但我不知道如何最好地通过兄弟姐妹循环

```
 // get the list of children of the parent
   var siblings = $.jstree._reference(data.rslt.parent)._get_children("li"); 
```

这将返回十个预期孩子的数组，但我无法有效地查看它们！

```
 siblings[0] // has no attr() method. 
```

我如何最好地循环兄弟姐妹？

# mule - 是否可以在 mule 中延迟服务？

> ID：16188976
> 
> 赞同：0
> 
> 时间：2013-04-24T09:57:04.290
> 
> 标签：mule

我有一个 mule 应用程序，它生成单个 xml 文件并根据查询将它们放在一个文件夹中，现在我想创建汇总报告，其中将包含来自各种单独报告的数据。由于服务是随机运行的，因此我想确保延迟生成汇总报告，以便在调用汇总报告服务之前所有单个文件都存在。是否可以在服务上设置计时器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:48:31.577

您可以使用quartz 在mule 中调度流的执行。用户 cron 表达式可根据您的需要自定义计划。这是使用石英调度程序的流程示例 -

```
<flow name="resendFailedMessages">
<description>   
    "*/15 07-18 * * ?" run every 15 minutes from 7 am to 6 pm every day -->
</description>
<quartz:inbound-endpoint jobName="hostRedeliveryJob" cronExpression="*/15 07-18 * * ?">
    <quartz:endpoint-polling-job>
        <quartz:job-endpoint ref="redeliverToHost" />
    </quartz:endpoint-polling-job>
</quartz:inbound-endpoint>
<set-variable variableName="hostXML" value="#[payload]" />
<logger message="QUARTZ found message for host" level="INFO" />
<flow-ref name="webServiceCall" />
<flow-ref name="inspectWSResponse" />
<exception-strategy ref="retryExceptionStrategy" /> 
```

还要检查一下 - [https://github.com/ddossot/mule-in-action-2e/blob/master/chapter07/src/main/app/quartz-config.xml](https://github.com/ddossot/mule-in-action-2e/blob/master/chapter07/src/main/app/quartz-config.xml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T14:23:25.027

似乎是聚合的候选者：http: [//blogs.mulesoft.org/asynchronous-message-processing-with-mule/](http://blogs.mulesoft.org/asynchronous-message-processing-with-mule/)

# assembly - NASM 组装程序

> ID：16188982
> 
> 赞同：0
> 
> 时间：2013-04-24T09:57:15.810
> 
> 标签：assembly, x86, nasm

我正在尝试用 NASM 进行汇编代码，非常沮丧……基本上我所坚持的是将输入的数字更改为用 $ 符号绘制的更大数字。所以程序所做的就是读取一个介于 1 和 9 之间的数字并将其转换为数值并显示一个大的 $​​ 数字。我为每一行的每个数字定义了一个位模式，以显示用于绘制数字的 $ 符号模式。所有数字的大小都是 7 行，现在我需要逐步浏览位模式，这就是我卡住的地方。到目前为止，这是我的程序。

```
 bits    16
            org     0x100
            jmp     main    ;Jump to main program
message:    db      'Please enter a number(1-9)',0ah,0dh,'$'
enl_num1:   db      06h,06h,06h,06h,06h,06h,06h ; enlarged 1
enl_num2:   db      04h,0Ah,11h,02h,04h,08h,1Fh ; enlarged 2
enl_num3:   db      0Eh,11h,06h,18h,06h,01h,1Eh ; enlarged 3
enl_num4:   db      01h,02h,04h,0Ah,1Fh,02h,02h ; enlarged 4
enl_num5:   db      1Fh,10h,1Ch,02h,01h,02h,1Ch ; enlarged 4
enl_num6:   db      01h,02h,04h,08h,14h,14h,08h ; enlarged 5
enl_num7:   db      1Fh,01h,02h,04h,08h,10h,10h ; enlarged 7
enl_num8:   db      04h,0Ah,0Ah,04h,0Ah,0Ah,04h ; enlarged 8
enl_num9:   db      0Eh,11h,11h,0Fh,01h,01h,1Fh ; enlarged 9
error_mess: db      '**','$'
output_0:   db      ' ' 
output_d:   db      '$'     

str_to_num:
            xor     bh,bh   ;bh = 0
            cmp     al,39h  ;ASCII for 9
            jg      str_to_num_error    ; > 9 is invalid
            sub     bl,30h  ;convert to numeric
            jl      str_to_num_error    ; < 0 also invalid
            mov     bh,1h   ;succesful completion
str_to_num_error:
            ret             ;return
error:      
            mov     dx,error_mess ;adding ** to number that is not 1-9
            mov     ah,09         ;to display string
            int     21h           ;DOS interrupt
            jmp     message
            ret                   ;return

print_num:  
            mov     cx,8    ; cx=8 loop counter
            mov     al,[si] ;move one byte into al
            push    ax      ;push onto stack
            inc     si      ;point to next byte
            cmp     dh,0    ;test for 0
            jne     not_0
            je      is_0
            loop    print_num   ;decrement cx, repeat loop if cx <>0
            db      ' ',0ah,0dh,'$'
            mov     ah,09   ;to display string
            int     21h     ;DOS interrupt

            ret
not_0:      mov     dx,output_d  ;address of output
            mov     ah,09        ;service - display message
            int     21h          ;DOS system call
            ret
is_0        mov     dx,output_0  ;address of output
            mov     ah,09        ;service - display message
            int     21h          ;DOS system call
            ret

main:       mov     al,00   ;clear the screen
            mov     ah,06
            mov     bh,17h  ;white on blue
            mov     dh,05   ;set row to 5
            mov     dl,10   ;set column to 10
            int     10h     ;screen handling
            mov     dx,message
            mov     ah,09   ;to display string
            int     21h     ;DOS interrupt to display string
            mov     ah,07   ;single char keyboard input
            int     21h     ;DOS interrupt
            call    str_to_num ;convert str to num
            cmp     bh,1h   ;test if bh contains 1
            call    error   ;print error
            cmp     bh,0h   ;test if bh contains 0
            mov     si,bl   ;si contains address of number string
line_loop:  mov     cx,7    ;once for each line
            jmp     print_num ;print the number
            loop    line_loop ;decrement cx, repeat if cx<>0
            int     20h 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:09:38.560

Psuedo-code for how to display one of your 8*7 characters:

```
ptr = &enl_num1 + (number-1)*7
for row = 0..6 do
  mask = 80h     // start with the left-most bit
  for column = 0..7 do
    if ptr[row] AND mask then
      put_char('$')
    else
      put_char(' ')
    mask >>= 1
  end for
  put_string("\n")
end for 
```

By the way, this isn't going to work:

```
loop    print_num   ;decrement cx, repeat loop if cx <>0
db      ' ',0ah,0dh,'$'
mov     ah,09   ;to display string
int     21h     ;DOS interrupt 
```

If you interleave data with code you need to jump past the data, otherwise the processor will try to execute the data as if it was code.

# android - 将数据发布到 Web 服务时出错

> ID：16188984
> 
> 赞同：0
> 
> 时间：2013-04-24T09:57:16.613
> 
> 标签：android, json, android-asynctask, httpresponse

我想使用 JSON 发布数据。但我无法做到这一点。这是我的java代码：

```
package com.bandapp;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import org.apache.http.util.EntityUtils;
import org.json.JSONArray;
import org.json.JSONObject;
import org.json.JSONTokener;

import android.app.ListActivity;
import android.app.ProgressDialog;
import android.os.AsyncTask;
import android.os.Bundle;
import android.widget.ListAdapter;
import android.widget.SimpleAdapter;
import android.widget.Toast;

public class UpcomingShow extends ListActivity {
    public static final String TAG_SHOW_TITLE = "show_title";
    public static final String TAG_SHOW_VENUE = "show_venue";
    public static final String TAG_SHOW_DATE = "show_date";
    public static final String TAG_SHOW_TIME = "show_time";
    public static String URL = "http://example.com/example/example/mainAPI.php";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.upcoming_show);
        new AsyncData().execute();
    }

    class AsyncData extends AsyncTask<String, Void, Void> {
        JSONParser jParser;
        ArrayList<HashMap<String, String>> upcomingShows;
        ProgressDialog pDialog;

        @Override
        protected void onPreExecute() {
            pDialog = new ProgressDialog(UpcomingShow.this);
            pDialog.setTitle("Loading....");
            pDialog.setMessage("Please wait...");
            pDialog.show();
            super.onPreExecute();
        }

        @Override
        protected Void doInBackground(String... args) {
            // TODO Auto-generated method stub
            jParser = new JSONParser();
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            upcomingShows = new ArrayList<HashMap<String,String>>();
            params.add(new BasicNameValuePair("rquest", "={"));
            params.add(new BasicNameValuePair("method","band_info"));
            params.add(new BasicNameValuePair("body","[{}]}"));

            String res = "";
            try {
                HttpClient httpclient = new DefaultHttpClient(); 
                HttpPost httppost = new HttpPost(URL);
                httppost.setEntity(new UrlEncodedFormEntity(params));  
                HttpResponse response = httpclient.execute(httppost);  
                res = EntityUtils.toString(response.getEntity());
                JSONTokener t = new JSONTokener(res);
                JSONArray a = new JSONArray(t);
                JSONObject o = a.getJSONObject(0);
                String sc = o.getString(TAG_SHOW_TITLE);
                if(sc.equals("1"))
                {
                    // posted successfully
                    Toast.makeText(UpcomingShow.this, sc, Toast.LENGTH_SHORT).show();
                }
                else
                {
                 // error occurred
                    Toast.makeText(UpcomingShow.this, "Fail.", Toast.LENGTH_SHORT).show();
                }
            }
            catch (Exception e) 
            {
                e.printStackTrace();
            }

            return null;
        }

        protected void onPostExecute(Void result) {
            super.onPostExecute(result);
            if (pDialog != null && pDialog.isShowing()) {
                pDialog.dismiss();
            }
            ListAdapter adapter = new SimpleAdapter(UpcomingShow.this, upcomingShows, R.layout.upcomingshows_row, new String[] {
                    TAG_SHOW_TITLE, TAG_SHOW_DATE, TAG_SHOW_TIME, TAG_SHOW_VENUE }, new int[] { R.id.textTitle, R.id.textdate,
                    R.id.textTime, R.id.textVenue });
            setListAdapter(adapter);
        }
    }
} 
```

此外，我无法为我保存在 doInBackground() 中的任何消息敬酒。你能帮我解决这个问题吗...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:03:41.900

```
 if(sc.equals("1"))
                {
                    // posted successfully
                    Toast.makeText(UpcomingShow.this, sc, Toast.LENGTH_SHORT).show();
                }
                else
                {
                 // error occurred
                    Toast.makeText(UpcomingShow.this, "Fail.", Toast.LENGTH_SHORT).show();
                } 
```

> 删除此代码表单`doInBackground`

你不能在后台更新你的用户界面，你可以进入`result`并`onPostExecute`弹出那些吐司。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T10:07:21.817

你不能干杯， `doInBackground()`因为你不能在线程执行期间更新 UIview ！你应该使用`'onProgress'`和'`publishProgress'`

改变 ：

```
class AsyncData extends AsyncTask<String, Void, Void> 
```

到：

```
class AsyncData extends AsyncTask<String, String, Void> 
```

并覆盖 toast 的 onProgress：

```
@Override
protected void onProgressUpdate(String... values) {
    super.onProgressUpdate(values);
        if (values[0] != null)
                Toast.makeText(UpcomingShow.this, values[0], Toast.LENGTH_SHORT).show();
} 
```

并进入 doInBackground()：

```
if(sc.equals("1"))
{
    publishProgress(sc);
   }
   else
   {
    publishProgress("Fail.");
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T10:07:37.367

在执行`AsyncTask<String, Void, Void>`任务时，您无法在主线程中实现 Toast 显示，用户 Log.d(“TAG”，“your-text”);

你可以在 onPostExecution() 中实现 Toast

```
}catch (Exception e) 
            {
                e.printStackTrace();
            }

            return sc; 
```

}

```
protected void onPostExecute(Void result) {
            super.onPostExecute(result);
            if (pDialog != null && pDialog.isShowing()) {
                pDialog.dismiss();
            }
         if(result.equals("1"))
            {
                // posted successfully
                Toast.makeText(UpcomingShow.this, result, Toast.LENGTH_SHORT).show();
            }
            else
            {
             // error occurred
                Toast.makeText(UpcomingShow.this, "Fail.", Toast.LENGTH_SHORT).show();
            }
        }
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T10:09:28.700

我尝试通过 Postman（谷歌扩展）发送您的请求，您提供的 URL 以 HTTP 状态 200 响应，但没有响应消息。问题是，根据提供的代码，您期望来自所述 url 的消息响应。您可能应该检查您正在连接的服务器。

# google-chrome-devtools - 如何调试 Chrome 中的下一个 JavaScript 事件，脚本在后台运行？

> ID：16188986
> 
> 赞同：1
> 
> 时间：2013-04-24T09:57:17.540
> 
> 标签：google-chrome-devtools

在 Chrome DevTools 中，我希望能够按 F8（暂停脚本执行），然后与页面的元素交互以查看它触发的脚本。例如，目标是在我单击按钮后立即暂停脚本执行。

但是，当按下 F8 时，我被带到 Sources 选项卡中的某个脚本文件。它似乎一直在运行，也许是在计时器上。我按 Shift+F11 退出该功能，但这使我在 Chrome 中再次进入“未激活”状态。

在这种情况下，后台运行的脚本是[Plupload](http://plupload.com/) jQuery 插件。

我可以停用或忽略那些在后台持续运行的脚本，以便能够调试页面交互事件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T13:09:45.047

您可以使用 Sources 选项卡上的 DOM、XHR 和 Event Listener[断点菜单](https://developers.google.com/chrome-developer-tools/docs/scripts-breakpoints#xhr)来定位您想要调查的操作。这种方法可能需要一些实验和练习，但它可能会给你你所寻求的控制。

# java - 从另一个主 JFrame 创建一个新的 JFrame 并在新的 JFrame 上绘制形状或添加组件

> ID：16188991
> 
> 赞同：0
> 
> 时间：2013-04-24T09:57:37.097
> 
> 标签：java, swing

我有主 JFrame，其中包含一个 JPanel 及其上的所有组件。我在我的主 Jframe 上绘制了一个图表，我使用 getGraphics() 方法在 JPanel 上绘制形状。我想将其转换为另一个图表，以便新图表显示在新 Jframe 上，但我无法绘制任何形状在新创建的框架面板上。（我也尝试使用与我在主 Jframe 中使用的相同的 getGraphics() 方法进行绘制）。

```
import java.awt.FlowLayout;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.geom.Line2D;
import javax.swing.JButton;
import javax.swing.JPanel;
public class Transformation extends javax.swing.JFrame {

    private JPanel myPanel;
    public Transformation() {

    this.setSize(500, 500);
    this.setVisible(true);
    myPanel = new JPanel(new FlowLayout());
    myPanel.add(new JButton("Hello"));
    this.getContentPane().add(myPanel);
    Graphics2D g = (Graphics2D) myPanel.getGraphics();
    g.draw(new Line2D.Double(20, 50, 100, 200) );

    }
} 
```

在主 Jframe 中，我在 Jbutton 的动作侦听器中调用了以下行。

转换 tfm = new Transformation();

# github - 如何将我的分叉回购的部分更改提交为补丁？

> ID：16188993
> 
> 赞同：8
> 
> 时间：2013-04-24T09:57:37.863
> 
> 标签：github

我从 GitHub 分叉了一个 repo 并进行了一些更改。然后我发现我在一个文件中的一个修改可以是对原始仓库问题的补丁，但是作者不想合并我的其他修改，所以我不想直接发送拉取请求。而且我认为再次分叉并修改该文件以制作补丁然后发送拉取请求似乎并不那么优雅。有没有“标准”的方式来做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T10:01:56.370

在我看来，您应该使用相同的根创建一个新分支，然后使用[cherry-pick](https://www.kernel.org/pub/software/scm/git/docs/git-cherry-pick.html)添加您所做的每个提交，除了那些未被作者接受的提交。

然后在这个分支上发送一个拉取请求。

此外，如果您想将所有修改重新组合到一个简单的提交中，您可以在将其推送到在线之前在本地分支上使用[squash rebase。](http://ariejan.net/2011/07/05/git-squash-your-latests-commits-into-one/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T10:02:13.893

记下所需提交的 SHA-1 哈希。切换回原始项目的主分支，从中创建一个新分支，然后[`cherry-pick`](https://www.kernel.org/pub/software/scm/git/docs/git-cherry-pick.html)将其提交到新分支上。

然后，您可以将新分支推送到 GitHub 并发送带有更改的 PR。

如果您在一次提交中修改了多个文件，则必须以某种方式重写该提交。

# c++ - 多用户聊天服务器 C++

> ID：16188996
> 
> 赞同：0
> 
> 时间：2013-04-24T09:57:51.450
> 
> 标签：c++, multithreading, sockets, chat

我正在用 c++ 构建一个聊天服务器（允许用户之间的私人消息）......这对我来说是一个挑战，而且我已经遇到了一个死点......我不知道什么可能会更好。

顺便说一句：我对 C++ 并不陌生；这就是我想要挑战的原因......所以如果有其他最佳方式，多线程等......请告诉我。

## 选项 A

我有一个 c++ 应用程序正在运行，它有一个套接字数组，在每个循环（我猜是 1 秒循环）中读取所有输入（循环通过所有套接字）并将其存储到 DB（需要一个日志），然后，再次循环遍历所有套接字，发送每个套接字中需要的内容。

*优点：*一个单一的过程，包含。易于开发。 *缺点：*我认为它几乎没有可扩展性，并且只有一个故障焦点……我的意思是，20k 套接字的性能如何？

## 选项 B

我有一个监听连接的 C++ 应用程序。当接收到连接时，它会派生一个处理该套接字的子进程......读取用户的所有输入并将其保存到数据库中。并在每个循环中检查数据库中所有必需的输出以写入套接字。

*优点：*如果守护进程足够小，每个套接字都有一个进程可能更具可扩展性。同时，如果一个进程失败，所有其他进程都保持在线。 *缺点：*更难开发。可能是为每个连接维护一个进程消耗了太多资源。

**你认为最好的选择是什么？欢迎任何其他想法或建议:)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-27T11:12:19.453

正如评论中所提到的，还有一个额外的选择是使用[`select()`](http://man7.org/linux/man-pages/man2/select.2.html)or [`poll()`](http://man7.org/linux/man-pages/man2/poll.2.html)（或者，如果您不介意使您的应用程序平台特定，类似[`epoll()`](http://man7.org/linux/man-pages/man7/epoll.7.html)）。我个人建议`poll()`，因为我觉得它更方便，但我认为`select()`至少在某些版本的 Windows 上可用 - 我不知道在 Windows 上运行对你来说是否重要。

这里的基本方法是首先将所有套接字（包括一个监听套接字，如果你正在监听连接）添加到一个结构中，然后根据需要调用`select()`或`poll()`。此调用将阻塞您的应用程序，直到至少一个套接字有一些数据要读取，然后您被唤醒并通过准备好读取的套接字，处理数据，然后再次跳回阻塞状态. 您通常在循环中执行此操作，例如：

```
while (running) {
    int rc = poll(...);
    // Handle active file descriptors here.
} 
```

这是编写主要受 IO 限制的应用程序的好方法 - 即它花费更多时间处理网络（或磁盘）流量，而不是实际使用 CPU 处理数据。

正如评论中提到的，另一种方法是为每个连接分叉一个线程。这非常有效，您可以在每个线程中使用简单的阻塞 IO 来读取和写入该连接。出于几个原因，我个人建议不要使用这种方法，其中大部分主要是个人喜好。

首先，处理需要一次写入大量数据的连接很繁琐。套接字不能保证一次写入所有待处理的数据（即它发送的数量可能不是您请求的全部数量）。在这种情况下，您必须在本地缓冲待处理的数据并等待套接字中有空间发送它。这意味着在任何给定时间，您可能正在等待两个条件 - 套接字已准备好发送，或者套接字已准备好读取。当然，您可以避免从套接字读取，直到所有待处理的数据都发送完毕，但这会在处理数据时引入延迟。或者，您可以使用`select()`或`poll()`就在那个连接上 - 但如果是这样，为什么还要使用线程，只需以这种方式处理所有连接。您还可以为每个连接使用两个线程，一个用于读取，一个用于写入，如果您不确定是否始终可以在一次调用中发送所有消息，这可能是最好的方法，尽管这会使您需要的线程数量翻倍这可能会使您的代码更复杂并略微增加资源使用量。

其次，如果您计划处理*许多*连接或高连接周转率，那么线程对系统的负载要比使用`select()`或朋友多一些。在大多数情况下，这并不是什么大问题，但对于大型应用程序来说却是一个因素。这可能不是一个实际问题，除非您正在编写类似于每秒处理数百个请求的网络服务器，但我认为值得提及以供参考。如果您正在编写这种规模的东西，那么您最终可能会使用混合方法，在这种方法中，您将进程、线程和非阻塞 IO 的某些组合相互叠加。

第三，一些程序员发现线程处理起来很复杂。您需要非常小心地使所有共享数据结构成为线程安全的，无论是使用排他锁定（互斥锁）还是使用为您执行此操作的其他库代码。有很多示例和库可以帮助您解决这个问题，但我只是指出需要注意 - 多线程编码是否适合您是一个品味问题。忘记锁定某些东西并让您的代码在测试中正常工作相对容易，因为线程不会碰巧与该数据结构竞争，然后在现实世界中较高负载下发生这种情况时会发现难以诊断的问题。小心谨慎，编写健壮的多线程代码并不难，我不反对（尽管[意见不一）](http://www.eecs.berkeley.edu/Pubs/TechRpts/2006/EECS-2006-1.pdf))，但您应该注意所需的护理。在某种程度上，这适用于编写任何软件，当然，这只是程度问题。

除了这些问题，线程对于许多应用程序来说是一种相当合理的方法，而且有些人似乎发现它们比非阻塞 IO 更容易处理`select()`。

至于您的方法，A 可以工作，但会浪费 CPU，因为无论是否有实际有用的工作要做，您都必须每秒醒来。此外，您在处理消息时会延迟一秒钟，这可能会让聊天服务器感到恼火。一般来说，我会建议类似`select()`的方法比这更好。

选项 B 可以工作，尽管当您想在连接之间发送消息时，您将不得不使用管道之类的东西在进程之间进行通信，这有点痛苦。您最终将不得不等待传入管道（用于发送数据）和套接字（用于接收数据），因此您最终会遇到同样的问题，不得不等待两个文件句柄，例如`select()`或线程。真的，正如其他人所说，线程是分别处理每个连接的正确方法。单独的进程也比线程更昂贵的资源（尽管在 Linux 等平台上，写时复制方法`fork()`意味着它实际上并不算太糟糕）。

对于只有几十个连接的小型应用程序，在线程和进程之间进行技术选择并不多，这在很大程度上取决于哪种风格更能吸引你。我个人会使用非阻塞 IO（有些人称之为异步 IO，但这[不是我使用术语的方式](http://en.wikipedia.org/wiki/Asynchronous_I/O)）并且我已经编写了很多执行此操作的代码以及许多多线程代码，但它仍然是真的只是我个人的意见。

最后，如果您想编写可移植的非阻塞 IO 循环，我强烈建议您研究[libev](http://software.schmorp.de/pkg/libev.html)（或者可能是[libevent](http://libevent.org/)，但我个人认为前者更易于使用且性能更高）。这些库在不同的平台上使用不同的原语，`select()`因此`poll()`您的代码可以保持不变，并且它们还倾向于提供更方便的接口。

如果您对此还有任何疑问，请随时提问。

# android - 安卓应用错误

> ID：16188997
> 
> 赞同：1
> 
> 时间：2013-04-24T09:57:51.613
> 
> 标签：android, android-manifest

我在测试应用程序中构建了我的应用程序的一些元素，并且我已将这些元素复制到我的主应用程序中，但是当我运行它时，应用程序会爆炸。

我感觉我的清单有问题，但我不能完全确定。这是我的清单：-

```
 <?xml version="1.0" encoding="utf-8"?>
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="police.uk.greatermanchesterpoliceandroid"
android:versionCode="1"
android:versionName="1.0">

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/CustomTheme">
   <activity
        android:name=".MainActivity"
        android:label="@string/app_name" 
        android:screenOrientation="portrait">
    <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 

    <activity android:name=".CustomizedListView" android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

     <activity
        android:name=".DetailsActivity"
        android:label="@string/app_name" 
        android:screenOrientation="portrait">
     <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        </activity>

      <activity
        android:name=".FileCache"
        android:label="@string/app_name" 
        android:screenOrientation="portrait">
     <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        </activity>

       <activity
        android:name=".ImageLoader"
        android:label="@string/app_name" 
        android:screenOrientation="portrait">
     <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        </activity>

        <activity
        android:name=".LazyAdapter"
        android:label="@string/app_name" 
        android:screenOrientation="portrait">
     <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        </activity>

         <activity
        android:name=".MemoryCache"
        android:label="@string/app_name" 
        android:screenOrientation="portrait">
     <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        </activity>

          <activity
        android:name=".Utils"
        android:label="@string/app_name" 
        android:screenOrientation="portrait">
     <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        </activity>

            <activity
        android:name=".XMLParser"
        android:label="@string/app_name" 
        android:screenOrientation="portrait">
     <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        </activity>

    <activity
        android:name=".ac2"
        android:label="@string/app_name" 
        android:screenOrientation="portrait">
     <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        </activity>

  <meta-data
android:name="com.google.android.maps.v2.API_KEY"
android:value="AIzaSyAioYkrj1Wl44z2LQvTCOw6GXPXdTroGng"/>      

</application>

 <permission
android:name="com.example.mapdemo.permission.MAPS_RECEIVE"
android:protectionLevel="signature" />
<uses-permission android:name="com.example.mapdemo.permission.MAPS_RECEIVE"/>

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />     
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

 <uses-feature
android:glEsVersion="0x00020000"
android:required="true"/>

<uses-sdk android:minSdkVersion="11" /> 
```

任何人都可以看到问题吗？

我的 LogCat 中的这一行让我担心：-

```
04-24 11:42:16.769: D/dalvikvm(18849): Late-enabling CheckJNI
04-24 11:42:16.794: I/dalvikvm(18849): Turning on JNI app bug workarounds for target SDK version 11...
04-24 11:42:16.799: E/jdwp(18849): Failed sending reply to debugger: Broken pipe
04-24 11:42:16.799: D/dalvikvm(18849): Debugger has detached; object registry had 1 entries
04-24 11:42:16.904: D/AbsListView(18849): Get MotionRecognitionManager
04-24 11:42:16.914: D/AndroidRuntime(18849): Shutting down VM
04-24 11:42:16.914: W/dalvikvm(18849): threadid=1: thread exiting with uncaught exception (group=0x41b082a0)
04-24 11:42:16.914: E/AndroidRuntime(18849): FATAL EXCEPTION: main
04-24 11:42:16.914: E/AndroidRuntime(18849): java.lang.RuntimeException: Unable to start activity ComponentInfo{police.uk.greatermanchesterpoliceandroid/police.uk.greatermanchesterpoliceandroid.CustomizedListView}: android.os.NetworkOnMainThreadException
04-24 11:42:16.914: E/AndroidRuntime(18849):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2100)
04-24 11:42:16.914: E/AndroidRuntime(18849):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
04-24 11:42:16.914: E/AndroidRuntime(18849):    at android.app.ActivityThread.access$600(ActivityThread.java:140)
04-24 11:42:16.914: E/AndroidRuntime(18849):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
04-24 11:42:16.914: E/AndroidRuntime(18849):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-24 11:42:16.914: E/AndroidRuntime(18849):    at android.os.Looper.loop(Looper.java:137)
04-24 11:42:16.914: E/AndroidRuntime(18849):    at android.app.ActivityThread.main(ActivityThread.java:4898)
04-24 11:42:16.914: E/AndroidRuntime(18849):    at java.lang.reflect.Method.invokeNative(Native Method)
04-24 11:42:16.914: E/AndroidRuntime(18849):    at java.lang.reflect.Method.invoke(Method.java:511)
04-24 11:42:16.914: E/AndroidRuntime(18849):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1008)
04-24 11:42:16.914: E/AndroidRuntime(18849):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:775)
04-24 11:42:16.914: E/AndroidRuntime(18849):    at dalvik.system.NativeStart.main(Native Method)
04-24 11:42:16.914: E/AndroidRuntime(18849): Caused by: android.os.NetworkOnMainThreadException
04-24 11:42:16.914: E/AndroidRuntime(18849):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1118)
04-24 11:42:16.914: E/AndroidRuntime(18849):    at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
04-24 11:42:16.914: E/AndroidRuntime(18849):    at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
04-24 11:42:16.914: E/AndroidRuntime(18849):    at java.net.InetAddress.getAllByName(InetAddress.java:214)
04-24 11:42:16.914: E/AndroidRuntime(18849):    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
04-24 11:42:16.914: E/AndroidRuntime(18849):    at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
04-24 11:42:16.914: E/AndroidRuntime(18849):    at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
04-24 11:42:16.914: E/AndroidRuntime(18849):    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
04-24 11:42:16.914: E/AndroidRuntime(18849):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:670)
04-24 11:42:16.914: E/AndroidRuntime(18849):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:509)
04-24 11:42:16.914: E/AndroidRuntime(18849):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
04-24 11:42:16.914: E/AndroidRuntime(18849):    at police.uk.greatermanchesterpoliceandroid.XMLParser.getXmlFromUrl(XMLParser.java:45)
04-24 11:42:16.914: E/AndroidRuntime(18849):    at police.uk.greatermanchesterpoliceandroid.CustomizedListView.onCreate(CustomizedListView.java:47)
04-24 11:42:16.914: E/AndroidRuntime(18849):    at android.app.Activity.performCreate(Activity.java:5206)
04-24 11:42:16.914: E/AndroidRuntime(18849):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1094)
04-24 11:42:16.914: E/AndroidRuntime(18849):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
04-24 11:42:16.914: E/AndroidRuntime(18849):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:29:00.183

此错误指出您正在尝试在活动主线程上进行网络操作。不建议这样做，因为在您收到 ApplicationNotResponding 异常之前，您只有 5 秒的时间来响应交互。

请考虑将网络操作移动到后台线程，例如，通过 service 或[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:03:06.733

您正在使用

```
<intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
</intent-filter> 
```

对于每一项活动。请删除此代码，但应在启动时首先调用的 Activity 除外。

欲了解更多信息，请阅读[此处](http://developer.android.com/guide/topics/manifest/manifest-intro.html#ifs)

**更新：**

你有这个问题：

```
Caused by: android.os.NetworkOnMainThreadException
   at police.uk.greatermanchesterpoliceandroid.XMLParser.getXmlFromUrl(XMLParser.java:45)
   at police.uk.greatermanchesterpoliceandroid.CustomizedListView.onCreate(CustomizedListView.java:47) 
```

请在 XMLParser 或 CustomizedListView 检查您的代码，并将网络操作移至后台线程。最好的方法是[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T10:03:29.250

更改您的权限

```
<permission
android:name="com.example.mapdemo.permission.MAPS_RECEIVE"
android:protectionLevel="signature" />
<uses-permission android:name="com.example.mapdemo.permission.MAPS_RECEIVE"/> 
```

至

```
<permission
    android:name="police.uk.greatermanchesterpoliceandroid.permission.MAPS_RECEIVE"
    android:protectionLevel="signature" />
<uses-permission android:name="police.uk.greatermanchesterpoliceandroid.permission.MAPS_RECEIVE"/> 
```

我刚改了包名

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T10:05:36.693

您放置的不止一个 `<intent-filter> </intent-filter>` 意味着它是您应用程序的起点，并且它必须只包含一个 Activity，并且您已将其放入每个 Activity 中。这是一个错误。`<intent-filter> </intent-filter>`从你想在Android中开始你的活动的地方放 ..希望这有帮助

让我让您的工作轻松，,, :)

```
<?xml version="1.0" encoding="utf-8"?>
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="police.uk.greatermanchesterpoliceandroid"
android:versionCode="1"
android:versionName="1.0">

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/CustomTheme">
   <activity
        android:name=".MainActivity"
        android:label="@string/app_name" 
        android:screenOrientation="portrait">
    <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 

    <activity android:name=".CustomizedListView" android:label="@string/app_name">

    </activity>

     <activity
        android:name=".DetailsActivity"
        android:label="@string/app_name" 
        android:screenOrientation="portrait">

        </activity>

      <activity
        android:name=".FileCache"
        android:label="@string/app_name" 
        android:screenOrientation="portrait">

        </activity>

       <activity
        android:name=".ImageLoader"
        android:label="@string/app_name" 
        android:screenOrientation="portrait">

        </activity>

        <activity
        android:name=".LazyAdapter"
        android:label="@string/app_name" 
        android:screenOrientation="portrait">

        </activity>

         <activity
        android:name=".MemoryCache"
        android:label="@string/app_name" 
        android:screenOrientation="portrait">

        </activity>

          <activity
        android:name=".Utils"
        android:label="@string/app_name" 
        android:screenOrientation="portrait">

        </activity>

            <activity
        android:name=".XMLParser"
        android:label="@string/app_name" 
        android:screenOrientation="portrait">

        </activity>

    <activity
        android:name=".ac2"
        android:label="@string/app_name" 
        android:screenOrientation="portrait">

        </activity>

  <meta-data
android:name="com.google.android.maps.v2.API_KEY"
android:value="AIzaSyAioYkrj1Wl44z2LQvTCOw6GXPXdTroGng"/>      

</application>

 <permission
android:name="com.example.mapdemo.permission.MAPS_RECEIVE"
android:protectionLevel="signature" />
<uses-permission android:name="com.example.mapdemo.permission.MAPS_RECEIVE"/>

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />     
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

 <uses-feature
android:glEsVersion="0x00020000"
android:required="true"/>

<uses-sdk android:minSdkVersion="11" /> 
```