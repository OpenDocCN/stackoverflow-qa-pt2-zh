# StackOverflow 问答 14116000-14116999

# html - IE7中删除侧边栏的css解决方案

> ID：14116002
> 
> 赞同：0
> 
> 时间：2013-01-02T01:42:25.313
> 
> 标签：html, css, internet-explorer-7

我正在构建位于 www.kraken.ikas.sk 的网站，但在 IE7 中删除右侧边栏时遇到问题。我有 2 个边栏（宽度 180 像素），中间是 main_content，应该根据右侧边栏的存在来调整大小。所以它不能有固定的宽度。请给我找一些css解决方案（hack）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T02:03:23.710

如果需要，您可以将`display: table`/`display: table-cell`用于现代浏览器，并为 IE6-7 使用[仿真](http://tanalin.com/en/projects/display-table-htc/)polyfill。

# c++ - `constexpr` 和 `const` 之间的区别

> ID：14116003
> 
> 赞同：747
> 
> 时间：2013-01-02T01:42:28.167
> 
> 标签：c++, c++11, constants, constexpr

`constexpr`和有什么区别`const`？

*   我什么时候可以只使用其中之一？
*   我什么时候可以同时使用，我应该如何选择一个？

* * *

## 回答 #1

> 赞同：719
> 
> 时间：2013-01-02T05:10:47.840

## 基本含义和语法

这两个关键字都可以在对象和函数的声明中使用。应用于*对象*时的基本区别是：

*   `const`将对象声明为*常量*。这意味着保证一旦初始化，该对象的值就不会改变，并且编译器可以利用这一事实进行优化。它还有助于防止程序员编写修改初始化后不打算修改的对象的代码。

*   `constexpr`声明一个对象适合在标准所称的*常量表达式*中使用。但请注意，这`constexpr`不是唯一的方法。

当应用于*函数*时，基本区别是：

*   `const`只能用于非静态成员函数，一般不能用于函数。它保证成员函数不会修改任何非静态数据成员（可变数据成员除外，无论如何都可以修改）。

*   `constexpr`可以与成员函数和非成员函数以及构造函数一起使用。它声明函数适合在*常量表达式*中使用。编译器只会在函数满足特定标准 (7.1.5/3,4) 时接受它，最重要的是^((†))：

    *   函数体必须是非虚拟的并且非常简单：除了 typedef 和静态断言之外，只`return`允许使用一条语句。在构造函数的情况下，只允许使用初始化列表、typedef 和静态断言。（不过`= default`，`= delete`也被允许。）
    *   从 C++14 开始，规则更加宽松，从那时起在 constexpr 函数中允许的内容：`asm`声明、`goto`语句、带有除`case`and以外标签的语句`default`、try-block、非文字变量的定义类型，静态或线程存储持续时间的变量的定义，不执行初始化的变量的定义。
    *   参数和返回类型必须是*文字类型*（即，一般来说，非常简单的类型，通常是标量或聚合）

## 常量表达式

如上所述，`constexpr`声明对象和函数都适合在常量表达式中使用。常量表达式不仅仅是常量：

*   它可以用于需要编译时评估的地方，例如，模板参数和数组大小说明符：

    ```
     template<int N>
      class fixed_size_list
      { /*...*/ };

      fixed_size_list<X> mylist;  // X must be an integer constant expression

      int numbers[X];  // X must be an integer constant expression 
    ```

*   但请注意：

*   将某些东西声明为`constexpr`不一定保证它将在编译时进行评估。它*可以用于*此类，但也可以用于在运行时评估的其他地方。

*   一个对象*可以在**没有*被声明的情况下适用于常量表达式`constexpr`。例子：

    ```
     int main()
         {
           const int N = 3;
           int numbers[N] = {1, 2, 3};  // N is constant expression
         } 
    ```

    这是可能的`N`，因为 是常量并在声明时用文字初始化，满足常量表达式的条件，即使它没有被声明`constexpr`。

**那么我什么时候必须使用`constexpr`呢？**

*   像上面这样的**对象**`N`可以用作常量表达式*而无需*声明`constexpr`。这适用于所有对象：
*   `const`
*   整数或枚举类型*和*
*   在声明时使用本身是常量表达式的表达式初始化

[[这是由于第 5.19/2 节：常量表达式不得包含涉及“左值到右值修改，除非 [...] 整数或枚举类型的左值 [...]”的子表达式，感谢 Richard Smith 纠正我的早先声称这适用于所有文字类型。]]

*   对于一个适合在常量表达式中使用的**函数，它****必须**被显式声明`constexpr`；仅仅满足常量表达式函数的标准是不够的。例子：

    ```
     template<int N>
     class list
     { };

     constexpr int sqr1(int arg)
     { return arg * arg; }

     int sqr2(int arg)
     { return arg * arg; }

     int main()
     {
       const int X = 2;
       list<sqr1(X)> mylist1;  // OK: sqr1 is constexpr
       list<sqr2(X)> mylist2;  // wrong: sqr2 is not constexpr
     } 
    ```

**`const`我什么时候可以/应该同时使用两者`constexpr` *？***

**A. 在对象声明中。**当两个关键字都引用要声明的同一个对象时，这从来没有必要。`constexpr`暗示`const`。

```
constexpr const int N = 5; 
```

是相同的

```
constexpr int N = 5; 
```

但是，请注意，在某些情况下，每个关键字都引用声明的不同部分：

```
static constexpr int N = 3;

int main()
{
  constexpr const int *NP = &N;
} 
```

在这里，`NP`被声明为地址常量表达式，即本身就是常量表达式的指针。（当通过将地址运算符应用于静态/全局常量表达式来生成地址时，这是可能的。）这里，两者`constexpr`和`const`都是必需的：`constexpr`总是指正在声明的表达式（这里`NP`），而`const`指`int`（它声明了一个指针-到常量）。删除`const`会使表达式非法（因为 (a) 指向非常量对象的指针不能是常量表达式，并且 (b)`&N`实际上是指向常量的指针）。

**B. 在成员函数声明中。**在 C++11 中，`constexpr`意味着`const`，而在 C++14 和 C++17 中则不是这样。在 C++11 下声明为的成员函数

```
constexpr void f(); 
```

需要声明为

```
constexpr void f() const; 
```

在 C++14 下，以便仍然可以用作`const`函数。

* * *

## 回答 #2

> 赞同：146
> 
> 时间：2013-01-02T01:44:42.583

`const`适用于**variables**，并**防止它们**在您的代码中被修改。

`constexpr`告诉编译器这个**表达式**会产生一个**编译时常量 value**，所以它可以用在数组长度、分配给`const`变量等地方。Oli 给出的[链接](https://stackoverflow.com/questions/4748083/when-should-you-use-constexpr-capability-in-c11)有很多很好的例子。

基本上，它们完全是 2 个不同的概念，可以（并且应该）一起使用。

* * *

## 回答 #3

> 赞同：78
> 
> 时间：2016-01-01T07:45:24.673

## 概述

*   `const`保证程序**不会改变对象的值**。但是，`const`不保证对象经历了哪种类型的初始化。

    考虑：

    ```
    const int mx = numeric_limits<int>::max();  // OK: runtime initialization 
    ```

    该函数`max()`仅返回一个文字值。但是，因为初始化程序是一个函数调用，所以`mx`会进行运行时初始化。因此，您不能将其用作*常量表达式*：

    ```
    int arr[mx];  // error: “constant expression required” 
    ```

*   `constexpr`是一个新的 C++11 关键字，它使您无需创建宏和硬编码文字。它还保证在某些条件下，对象会经历*静态初始化*。它控制表达式的评估时间。通过**对其表达式强制执行编译时求值**，`constexpr`您可以定义真正的*常量表达式*，这些表达式对于时间要求严格的应用程序、系统编程、模板以及一般而言在任何依赖编译时常量的代码中都至关重要。

## 常量表达式函数

*常量表达式函数*是声明的函数`constexpr`。它的主体必须是非虚拟的，并且只包含一个返回语句，除了 typedef 和静态断言。它的参数和返回值必须具有字面量类型。它可以与非常量表达式参数一起使用，但是当这样做时，结果不是常量表达式。

常量表达式函数旨在在不牺牲性能或类型安全的情况下替换*宏*和*硬编码文字。*

```
constexpr int max() { return INT_MAX; }           // OK
constexpr long long_max() { return 2147483647; }  // OK
constexpr bool get_val()
{
    bool res = false;
    return res;
}  // error: body is not just a return statement

constexpr int square(int x)
{ return x * x; }  // OK: compile-time evaluation only if x is a constant expression
const int res = square(5);  // OK: compile-time evaluation of square(5)
int y = getval();
int n = square(y);          // OK: runtime evaluation of square(y) 
```

## 常量表达式对象

*常量表达式对象*是声明的对象`constexpr`。它必须使用常量表达式或由带有常量表达式参数的常量表达式构造函数构造的右值来初始化。

常量表达式对象的行为就像它被声明一样`const`，除了它需要在使用之前进行初始化并且它的初始化器必须是一个常量表达式。因此，常量表达式对象始终可以用作另一个常量表达式的一部分。

```
struct S
{
    constexpr int two();      // constant-expression function
private:
    static constexpr int sz;  // constant-expression object
};
constexpr int S::sz = 256;
enum DataPacket
{
    Small = S::two(),  // error: S::two() called before it was defined
    Big = 1024
};
constexpr int S::two() { return sz*2; }
constexpr S s;
int arr[s.two()];  // OK: s.two() called after its definition 
```

## 常量表达式构造函数

*常量表达式构造函数*是声明的构造函数`constexpr`。它可以有一个成员初始化列表，但它的主体必须为空，除了 typedef 和静态断言。它的参数必须有文字类型。

常量表达式构造函数允许编译器在编译时初始化对象，前提是构造函数的参数都是常量表达式。

```
struct complex
{
    // constant-expression constructor
    constexpr complex(double r, double i) : re(r), im(i) { }  // OK: empty body
    // constant-expression functions
    constexpr double real() { return re; }
    constexpr double imag() { return im; }
private:
    double re;
    double im;
};
constexpr complex COMP(0.0, 1.0);         // creates a literal complex
double x = 1.0;
constexpr complex cx1(x, 0);              // error: x is not a constant expression
const complex cx2(x, 1);                  // OK: runtime initialization
constexpr double xx = COMP.real();        // OK: compile-time initialization
constexpr double imaglval = COMP.imag();  // OK: compile-time initialization
complex cx3(2, 4.6);                      // OK: runtime initialization 
```

Scott Meyers的《 *Effective Modern C++*》一书中的提示`constexpr`：

*   `constexpr`对象是 const 并使用编译期间已知的值进行初始化；
*   `constexpr`当使用编译期间已知的参数调用函数时，函数会产生编译时结果；
*   `constexpr`对象和函数可以在比非`constexpr`对象和函数更广泛的上下文中使用；
*   `constexpr`是对象或函数接口的一部分。

资料来源： [使用 constexpr 提高 C++ 中的安全性、性能和封装性](http://blog.smartbear.com/c-plus-plus/using-constexpr-to-improve-security-performance-and-encapsulation-in-c/)。

* * *

## 回答 #4

> 赞同：49
> 
> 时间：2018-08-05T16:43:33.907

两者`const`和`constexpr`都可以应用于变量和函数。尽管它们彼此相似，但实际上它们是非常不同的概念。

两者`const`和都`constexpr`意味着它们的值在初始化后无法更改。例如：

```
const int x1=10;
constexpr int x2=10;

x1=20; // ERROR. Variable 'x1' can't be changed.
x2=20; // ERROR. Variable 'x2' can't be changed. 
```

`const`和之间的主要区别`constexpr`是它们的初始化值已知（评估）的时间。虽然`const`变量的值可以在编译时和运行时`constexpr`进行评估，但始终在编译时进行评估。例如：

```
int temp=rand(); // temp is generated by the the random generator at runtime.

const int x1=10; // OK - known at compile time.
const int x2=temp; // OK - known only at runtime.
constexpr int x3=10; // OK - known at compile time.
constexpr int x4=temp; // ERROR. Compiler can't figure out the value of 'temp' variable at compile time so `constexpr` can't be applied here. 
```

知道值在编译时还是运行时已知的关键优势在于，只要需要编译时常量，就可以使用编译时常量。例如，C++ 不允许您指定具有可变长度的 C 数组。

```
int temp=rand(); // temp is generated by the the random generator at runtime.

int array1[10]; // OK.
int array2[temp]; // ERROR. 
```

所以这意味着：

```
const int size1=10; // OK - value known at compile time.
const int size2=temp; // OK - value known only at runtime.
constexpr int size3=10; // OK - value known at compile time.

int array3[size1]; // OK - size is known at compile time.
int array4[size2]; // ERROR - size is known only at runtime time.
int array5[size3]; // OK - size is known at compile time. 
```

因此，`const`变量既可以定义像这样的**编译时常**`size1`量，也可以用来指定数组大小和像这样的**运行时常**`size2`量，这些常量只在运行时才知道，不能用于定义数组大小。另一方面，`constexpr`总是定义可以指定数组大小的编译时常量。

两者`const`和`constexpr`也可以应用于函数。函数必须`const`是成员函数（方法、运算符），其中应用`const`关键字意味着该方法不能更改其成员（非静态）字段的值。例如。

```
class test
{
   int x;

   void function1()
   {
      x=100; // OK.
   }

   void function2() const
   {
      x=100; // ERROR. The const methods can't change the values of object fields.
   }
}; 
```

A`constexpr`是一个不同的概念。**如果将编译时常量作为参数传递，**它将函数（成员或非成员）标记为可以在编译时评估的函数。例如你可以这样写。

```
constexpr int func_constexpr(int X, int Y)
{
    return(X*Y);
}

int func(int X, int Y)
{
    return(X*Y);
}

int array1[func_constexpr(10,20)]; // OK - func_constexpr() can be evaluated at compile time.
int array2[func(10,20)]; // ERROR - func() is not a constexpr function.

int array3[func_constexpr(10,rand())]; // ERROR - even though func_constexpr() is the 'constexpr' function, the expression 'constexpr(10,rand())' can't be evaluated at compile time. 
```

顺便说一下，这些`constexpr`函数是常规的 C++ 函数，即使传递了非常量参数也可以调用。但在这种情况下，您将获得非 constexpr 值。

```
int value1=func_constexpr(10,rand()); // OK. value1 is non-constexpr value that is evaluated in runtime.
constexpr int value2=func_constexpr(10,rand()); // ERROR. value2 is constexpr and the expression func_constexpr(10,rand()) can't be evaluated at compile time. 
```

`constexpr`也可以应用于成员函数（方法）、运算符甚至构造函数。例如。

```
class test2
{
    static constexpr int function(int value)
    {
        return(value+1);
    }

    void f()
    {
        int x[function(10)];

    }
}; 
```

一个更“疯狂”的样本。

```
class test3
{
    public:

    int value;

    // constexpr const method - can't chanage the values of object fields and can be evaluated at compile time.
    constexpr int getvalue() const
    {
        return(value);
    }

    constexpr test3(int Value)
        : value(Value)
    {
    }
};

constexpr test3 x(100); // OK. Constructor is constexpr.

int array[x.getvalue()]; // OK. x.getvalue() is constexpr and can be evaluated at compile time. 
```

* * *

## 回答 #5

> 赞同：43
> 
> 时间：2013-10-02T12:58:10.287

根据 Bjarne Stroustrup 的“The C++ Programming Language 4th Editon”一书
• **const**：大致意思是“我保证不会改变这个值”（第 7.5 节）。这主要用于指定接口，以便可以将数据传递给函数而不用担心它被修改。
编译器强制执行 const 做出的承诺。
• **constexpr**：大致意思是“在编译时进行评估”（第 10.4 节）。这主要用于指定常量，以允许
例如：

```
const int dmv = 17; // dmv is a named constant
int var = 17; // var is not a constant
constexpr double max1 = 1.4*square(dmv); // OK if square(17) is a constant expression
constexpr double max2 = 1.4∗square(var); // error : var is not a constant expression
const double max3 = 1.4∗square(var); //OK, may be evaluated at run time
double sum(const vector<double>&); // sum will not modify its argument (§2.2.5)
vector<double> v {1.2, 3.4, 4.5}; // v is not a constant
const double s1 = sum(v); // OK: evaluated at run time
constexpr double s2 = sum(v); // error : sum(v) not constant expression 
```

要使函数在常量表达式中可用，也就是说，在将由编译器计算的表达式中，它必须定义为**constexpr**。
例如：

```
constexpr double square(double x) { return x∗x; } 
```

要成为 constexpr，函数必须相当简单：只是一个计算值的返回语句。constexpr 函数可用于非常量参数，但完成后结果不是常量表达式。我们允许在不需要常量表达式的上下文中使用非常量表达式参数调用 constexpr 函数，这样我们就不必定义本质上相同的函数两次：一次用于常量表达式，一次用于变量。
在一些地方，语言规则需要常量表达式（例如，数组边界（第 2.2.5 节、第 7.3 节）、案例标签（第 2.2.4 节、第 9.4.2 节）、一些模板参数（第 25.2 节）和使用 constexpr 声明的常量）。在其他情况下，编译时评估对性能很重要。与性能问题无关，不变性（具有不可更改状态的对象）的概念是一个重要的设计问题（第 10.4 节）。

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2018-07-06T05:10:11.503

A`const int var`可以在运行时动态设置为一个值，一旦设置为该值，就不能再更改它。

A`constexpr int var`不能在运行时动态设置，而是在编译时动态设置。一旦设置为该值，就无法再更改。

这是一个可靠的例子：

```
int main(int argc, char*argv[]) {
    const int p = argc; 
    // p = 69; // cannot change p because it is a const
    // constexpr int q = argc; // cannot be, bcoz argc cannot be computed at compile time 
    constexpr int r = 2^3; // this works!
    // r = 42; // same as const too, it cannot be changed
} 
```

上面的代码片段编译得很好，我已经注释掉了那些导致它出错的代码。

这里需要注意的关键概念是`compile time`和的概念`run time`。C++ 中引入了新的创新，旨在尽可能多地`** know **`在编译时进行某些事情，以提高运行时的性能。

任何不涉及上述两个关键概念的解释尝试都是幻觉。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2016-06-05T10:33:51.427

正如@0x499602d2 已经指出的那样，`const`仅确保在初始化后不能更改值，而 as `constexpr`（在 C++11 中引入）保证变量是编译时常量。
考虑以下示例（来自 LearnCpp.com）：

```
cout << "Enter your age: ";
int age;
cin >> age;

const int myAge{age};        // works
constexpr int someAge{age};  // error: age can only be resolved at runtime 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2020-04-10T00:34:31.340

我认为任何答案都没有真正说明它有什么副作用，或者实际上是什么。

`constexpr`和`const`at namespace/file-scope 在使用文字或表达式初始化时是相同的；但是对于函数，`const`可以由任何函数`constexpr`初始化，但由非 constexpr（未用 constexpr 或非 constexpr 表达式标记的函数）初始化会产生编译器错误。两者`constexpr`和`const`都是变量的隐式内部链接（实际上，如果编译 -O1 或更强，它们将无法进入链接阶段，并且`static`不会强制编译器为`const`或`constexpr`在时发出内部（本地）链接器符号-O1 或更强；唯一这样做的时候是您获取变量的地址。除非用ie表示`const`，否则它将是一个内部符号`constexpr``extern``extern constexpr/const int i = 3;`需要使用）。在函数上，`constexpr`使函数永远不会到达链接阶段（无论定义`extern`或`inline`-O0 或 -Ofast 是什么），而`const`永远不会，并且`static`仅对-O1`inline`及更高版本有此影响。当`const`/`constexpr`变量由`constexpr`函数初始化时，负载总是使用任何优化标志进行优化，但如果函数只是`static`or `inline`，或者变量不是`const`/ ，则永远不会优化`constexpr`。

**标准编译（-O0）**

```
#include<iostream>
constexpr int multiply (int x, int y)
{

  return x * y;
}

extern const int val = multiply(10,10);
int main () {
  std::cout << val;
} 
```

编译为

```
val:
        .long   100  //extra external definition supplied due to extern

main:
        push    rbp
        mov     rbp, rsp
        mov     esi, 100 //substituted in as an immediate
        mov     edi, OFFSET FLAT:_ZSt4cout
        call    std::basic_ostream<char, std::char_traits<char> >::operator<<(int)
        mov     eax, 0
        pop     rbp
        ret

__static_initialization_and_destruction_0(int, int):
        . 
        . 
        . 
```

然而

```
#include<iostream>
const int multiply (int x, int y)
{

  return x * y;
}

const int val = multiply(10,10); //constexpr is an error
int main () {
  std::cout << val;
} 
```

编译为

```
multiply(int, int):
        push    rbp
        mov     rbp, rsp
        mov     DWORD PTR [rbp-4], edi
        mov     DWORD PTR [rbp-8], esi
        mov     eax, DWORD PTR [rbp-4]
        imul    eax, DWORD PTR [rbp-8]
        pop     rbp
        ret

main:
        push    rbp
        mov     rbp, rsp
        mov     eax, DWORD PTR val[rip]
        mov     esi, eax
        mov     edi, OFFSET FLAT:_ZSt4cout
        call    std::basic_ostream<char, std::char_traits<char> >::operator<<(int)
        mov     eax, 0
        pop     rbp
        ret

__static_initialization_and_destruction_0(int, int):
        . 
        . 
        . 
        mov     esi, 10
        mov     edi, 10
        call    multiply(int, int)
        mov     DWORD PTR val[rip], eax 
```

这清楚地表明，`constexpr`导致`const/constexpr`文件范围变量的初始化在编译时发生并且不产生全局符号，而不使用它会导致`main`在运行时之前发生初始化。

**使用 -Ofast 编译**

甚至 -Ofast 也没有优化负载！[https://godbolt.org/z/r-mhif](https://godbolt.org/z/r-mhif)，所以你*需要* `constexpr`

* * *

`constexpr`也可以从其他`constexpr`函数内部调用函数以获得相同的结果。`constexpr`on a function 还可以防止在函数中使用在编译时无法完成的任何事情；例如，在 上呼叫`<<`操作员`std::cout`。

`constexpr`在块范围内的行为相同，如果由非 constexpr 函数初始化，则会产生错误；该值也立即被替换。

最后，它的主要用途就像 C 的内联函数，但它仅在该函数用于初始化文件范围变量时才有效（这些函数不能在 C 上执行，但它们可以在 C++ 上执行，因为它允许动态初始化文件-范围变量），除了该函数也不能将全局/局部符号导出到链接器，即使使用`extern/static`，您可以`inline`在 C 上使用它；块范围变量赋值函数可以简单地使用 -O1 优化进行内联，而无需`constexpr`使用 C 和 C++。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2021-02-22T12:00:34.340

# const 和 constexpr 关键字概述

在 C++ 中，如果一个 const 对象是用一个常量表达式初始化的，那么我们可以在需要常量表达式的任何地方使用我们的 const 对象。

```
const int x = 10;
int a[x] = {0}; 
```

**例如，我们可以在 switch 中做一个 case 语句。**

**constexpr 可以与数组一起使用。**

**constexpr 不是类型。**

**constexpr 关键字可以与 auto 关键字一起使用。**

```
constexpr auto x = 10;

struct Data {   // We can make a bit field element of struct.   
    int a:x;
 }; 
```

**如果我们用一个常量表达式初始化一个 const 对象，那么这个 const 对象生成的表达式现在也是一个常量表达式。**

**常量表达式：**可以在编译时计算其值的表达式。

x*5-4 // 这是一个常量表达式。**对于编译器来说，输入这个表达式和直接输入 46 没有区别。**

**初始化是强制性的。它只能用于阅读目的。它不能改变。到目前为止，“const”和“constexpr”关键字之间没有区别。**

**注意：**我们可以在同一个声明中使用 constexpr 和 const。

```
constexpr const int* p; 
```

# 构造函数

通常，函数的返回值是在运行时获得的。 **但是当满足某些条件时，对 constexpr 函数的调用将在编译时作为常量获得。**

**注意：**在函数调用中将参数发送到函数的参数变量，如果有多个参数，则发送到所有参数变量，如果 CE 函数的返回值将在编译时计算。！！！

```
constexpr int square (int a){
return a*a;
}

constexpr int a = 3;
constexpr int b = 5;

int arr[square(a*b+20)] = {0}; //This expression is equal to int arr[35] = {0}; 
```

**为了使函数成为 constexpr 函数，函数的返回值类型和函数参数的类型必须属于称为“文字类型”的类型类别。**

**constexpr 函数是隐式内联函数。**

### 重要的一点：

不需要使用常量表达式调用任何 constexpr 函数。这不是强制性的。如果发生这种情况，计算将不会在编译时完成。它将被视为正常的函数调用。因此，在需要常量表达式的地方，我们将无法再使用该表达式。

### 成为 constexpr 函数所需的条件如下所示；

**1）**函数的参数中使用的类型和函数返回值的类型必须是字面量类型。

**2）**不应在函数内部使用具有静态生命周期的局部变量。

**3）**如果函数是合法的，当我们在编译时用常量表达式调用这个函数时，编译器会在编译时计算函数的返回值。

**4 )**编译器需要查看函数的代码，所以 constexpr 函数几乎总是在头文件中。

**5 )**为了让我们创建的函数成为 constexpr 函数，函数的定义必须在头文件中。因此，无论哪个源文件包含该头文件，都会看到函数定义。

### 奖金

通常使用默认成员初始化，可以在类中初始化具有 const 和整数类型的静态数据成员。但是，为了做到这一点，必须同时存在“const”和“integral types”。

**如果我们使用 static constexpr 那么它不必是一个整数类型来在类中初始化它。只要我用常量表达式初始化它，就没有问题。**

```
class Myclass  {
         const static int sx = 15;         // OK
         constexpr static int sy = 15;     // OK
         const static double sd = 1.5;     // ERROR
         constexpr static double sd = 1.5; // OK
 }; 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-06-13T12:59:59.853

首先，两者都是 c++ 中的限定符。声明为 const 的变量必须初始化并且以后不能更改。因此，通常声明为 const 的变量甚至在编译之前就会有一个值。

但是，对于 constexpr 它有点不同。

对于 constexpr，您可以给出一个可以在程序编译期间计算的表达式。

显然，声明为 constexper 的变量以后不能像 const 一样更改。

# php - Webbot 通过 php cURL 自动提交表单

> ID：14116023
> 
> 赞同：0
> 
> 时间：2013-01-02T01:46:08.403
> 
> 标签：php, curl, web-crawler, bots

我只是想通过 php 和 cURL 自动登录到登录表单

我有：

```
<?php
# get url to form
$url = "http://thesite.com/login.php";
$ch = curl_init($url); # initialize that form

#run value of $_POST variable in form fields from above url.
$params = "username='' OR '1'='1&password='' OR '1'='1&login-php-submit-button=submit";

## set cURL options
curl_setopt($ch, CURLOPT_POST, 1);  
curl_setopt($ch, CURLOPT_POSTFIELDS, $params);  #set parameter $_POST fields
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); 
$response = curl_exec($ch);

    if (!$response) {
        $http_code = curl_getinfo($ch, CURLINFO_HTTP_CODE);
        curl_close($ch); // make sure we closeany current curl sessions
        die(stripslashes($http_code.' Can\'t connect to server.'));
    }

//curl_close($ch); // close curl session 

## echo the result from cURL 'ing
echo $response;

curl_close($ch);
?> 
```

当我访问此脚本时，它只显示`$url`我刚刚访问 URL 的值，它不显示任何错误消息，如“错误传递”或任何内容。

我觉得`$params`这里可能设置不正确。我一直在不懈地尝试让它发挥作用。我目前有它的设置，其中`$params`值的设置是：

*formnameofinputvalue* = `valueToInputIntoFormElement`&

其中**&**分隔每个 formInputName=formInputValue

有人看到我在这里做错了吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T02:11:35.123

Does the login.php script submit the values to another URL? Check the source for the login.php page and see if the form is submitting to another URL (action= in the form element). If so, you will want to use that URL instead since that is where the values are being submitted. The login.php is only the form to collect the values.

On the other hand, login.php might submit to itself, in which case you have the right URL.

# video-streaming - 服务器上单一格式的点播视频流

> ID：14116025
> 
> 赞同：0
> 
> 时间：2013-01-02T01:46:17.607
> 
> 标签：video-streaming, mp4, jwplayer, amazon-cloudfront, flash-media-server

我正在开发一个网络应用程序，可以按需流式传输视频（预先录制的，非现场直播）。我将视频（mp4 文件）存储在 Amazon S3 存储桶中。我的应用程序在 EC2 实例 (Amazon Linux AMI) 上运行。该网络应用程序使用 JW Player 来显示视频。我能够启动并运行该应用程序。作为下一步，我计划转向基于 CloudFront 和 Adob​​e Flash Media Server (FMS) 的解决方案，以实现真正的流式视频，而不是我现在采用的渐进式下载解决方案。在此之前，我有几个问题一直困扰着我。

我当前设置的问题是我的视频在 Safari、IE 和 Chrome 中播放良好，但在 Firefox 中却没有。我知道这是因为 Firefox 不支持 mp4 格式。我不想为同一视频创建 3 个版本（mp4、webm 和 ogg），以便播放器可以回退到浏览器支持的版本。

1.  有没有办法在服务器上拥有一个版本的视频文件（例如 mp4）并以客户端浏览器/设备支持的格式动态流式传输（例如，以 ogg 格式流式传输到 FF 浏览器，以 mp4 流式传输到 Safari/Chrome )?
2.  FMS 是否提供这样做的能力？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T03:09:04.957

1.  FF 在 HTML5 标签中不支持 H.264，您可以使用[http://camendesign.com/code/video_for_everybody](http://camendesign.com/code/video_for_everybody)。如果不支持 HTML5，它将回退到 Flash 插件。

2.  FMS 不提供转码功能，您可以使用“wowza”但它是付费的。

# git - Git 从我的 FORK 中删除分支

> ID：14116033
> 
> 赞同：0
> 
> 时间：2013-01-02T01:47:46.550
> 
> 标签：git

用于从我的 fork 中删除分支的命令是什么（我认为它被称为“本地”）。
我用`git branch -d local_branch`我看到的：

```
error: Cannot delete the branch 'local_branch' which you are currently on. 
```

这里有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T02:02:52.557

在您可以删除分支之前，您应该签出到其他分支。即使那样，`git branch -d`如果该分支指向的提交将无法从其他分支访问，则将拒绝删除该分支。

如果您将工作分支合并到主分支，它将使这些提交仍然可以访问（通过合并提交），并且`git branch -d`应该删除您的工作分支而不会抱怨。

如果你真的，肯定想要核对那个分支，你可以使用`git branch -D`- 但它可能会导致你的工作丢失。

# php - 从 PHP 中的数组中获取随机短语？

> ID：14116035
> 
> 赞同：1
> 
> 时间：2013-01-02T01:48:09.450
> 
> 标签：php, random

我有这样的短语，例如：测试 1、测试 2、测试 3，现在如何以随机模式在加载页面上显示？

前功能

```
function random()
{
    $array = ['test 1', 'test 2', 'test 3'];

    return $random_array;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T01:52:31.153

将它们放在一个数组中并使用[array_rand](http://php.net/manual/en/function.array-rand.php)获取随机密钥。

```
function random()
{
  $phrases = array(
    'random test 1',
    'random test 2',
    'random test 3'
  );

  return $phrases[array_rand($phrases)];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T01:51:07.850

将它们放入一个数组并选择一个随机元素：

```
$array = array();
$array[] = 'test1';
$array[] = 'test2';
$array[] = 'test3';
$array[] = 'test4';

echo $array[ mt_rand( 0 , (count( $array ) -1) ) ]; 
```

或者你可以只打乱数组并选择第一个元素：

```
shuffle( $array );

echo $array[0]; 
```

或者，我刚刚发现的另一种方法：

使用`array_rand();`查看其他一些答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T01:53:24.383

```
<?php

function random(){
    $phrases = array(
        "test1",
        "test2",
        "test3",
        "test4"
        );

    return $phrases[mt_rand(0, count($phrases)-1)]; //subtract 1 from total count of phrases as first elements key is 0
}

echo random(); 
```

和一个工作示例 - [http://codepad.viper-7.com/scYVLX](http://codepad.viper-7.com/scYVLX)

*编辑*`array_rand()`按照阿诺德丹尼尔斯的建议 使用

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-05T12:53:41.480

php中最好和最短的解决方案是：

```
$array = [
    'Sentence 1',
    'Sentence 2',
    'Sentence 3',
    'Sentence 4',
];

echo $array[array_rand($array)]; 
```

**更新：**对于 PHP 7.1 中的上述答案是使用`random_int`函数而不是`mt_rand`因为它更快：

```
$array = [
    'Sentence 1',
    'Sentence 2',
    'Sentence 3',
    'Sentence 4',
];

echo $array[random_int(0, (count($array) - 1))]; 
```

> 有关`mt_rand`vs的更多信息，`random_int`请参见以下链接： [https ://stackoverflow.com/a/28760905/2891689](https://stackoverflow.com/a/28760905/2891689)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T01:49:23.810

将它们放入一个数组并返回一个随机值。

# android - 造型 ActionBar Sherlock

> ID：14116041
> 
> 赞同：5
> 
> 时间：2013-01-02T01:48:46.557
> 
> 标签：android, android-actionbar, actionbarsherlock

我正在尝试自定义我的 sherlock 操作栏，但我在 style.xml 中编写的代码没有被识别。

在我的清单文件中：

```
 android:theme="@style/Theme.Sherlock" 
```

我的 style.xml：

```
<resources>
<style name="Theme.MyAppTheme" parent="Theme.Sherlock">
    <item name="android:actionBarStyle">@style/Theme.MyAppTheme.ActionBar</item>
</style>

<style name="Theme.MyAppTheme.ActionBar" parent="Widget.Sherlock.ActionBar">
    <item name="android:background">#222222</item>
    <item name="android:height">64dip</item>
    <item name="android:titleTextStyle">@style/Theme.MyAppTheme.ActionBar.TitleTextStyle</item>
</style>

<style name="Theme.MyAppTheme.ActionBar.TitleTextStyle" parent="TextAppearance.Sherlock.Widget.ActionBar.Title">
    <item name="android:textColor">#fff</item>
    <item name="android:textStyle">bold</item>
    <item name="android:textSize">32sp</item>
</style> 
```

我这样称呼我的动作栏：

```
public class MainActivity extends SherlockActivity {

 com.actionbarsherlock.app.ActionBar actionbar;

 ...

 actionbar = getSupportActionBar();

 ... } 
```

显示操作栏没有问题，但同样没有显示 style.xml 中编码的任何自定义，有人可以帮我吗？谢天谢地。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T03:14:31.310

这是因为您在清单文件中应用了相同的原始样式，`android:theme="@style/Theme.Sherlock"`这没有任何区别。您已经准备了带有名称的自定义样式`Theme.MyAppTheme`，父级为`Theme.Sherlock`。因此，您需要在清单文件中声明您的自定义样式（Theme.MyAppTheme），例如`android:theme="@style/Theme.MyAppTheme"`. 正如其他回答者所说，即使您也必须像下面那样包含没有 android 前缀属性的属性。希望这可以帮助。即使你也可以参考[这个](https://stackoverflow.com/questions/14104091/is-there-a-way-to-set-actionbar-backgound-by-image-in-android/14104260#14104260)。

```
 <style name="Theme.MyAppTheme" parent="Theme.Sherlock.Light">
            <item name="android:actionBarStyle">@style/Theme.MyAppTheme.ActionBar</item>
        <item name="actionBarStyle">@style/Theme.MyAppTheme.ActionBar</item>        
    </style>

    <style name="Theme.MyAppTheme.ActionBar" parent="Widget.Sherlock.ActionBar">
    <item name="android:background">#222222</item>
    <item name = "background">#222222</item> 
    <item name="android:height">64dip</item>
     <item name="height">64dip</item>

    <item name="android:titleTextStyle">@style/Theme.MyAppTheme.ActionBar.TitleTextStyle</item>
<item name="titleTextStyle">@style/Theme.MyAppTheme.ActionBar.TitleTextStyle</item>
</style>

<style name="Theme.MyAppTheme.ActionBar.TitleTextStyle" parent="TextAppearance.Sherlock.Widget.ActionBar.Title">
        <item name="android:textColor">#fff</item>
        <item name="textColor">#fff</item>
        <item name="android:textStyle">bold</item>
        <item name="textStyle">bold</item>
        <item name="android:textSize">32sp</item>
        <item name="textSize">32sp</item>
 </style> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T04:10:22.497

使用它，您无需创建自己的样式

[操作栏样式生成器](http://jgilfelt.github.com/android-actionbarstylegenerator/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T02:12:59.087

这：

```
<item name="android:actionBarStyle">@style/Theme.MyAppTheme.ActionBar</item> 
```

是默认的ActionBar，注意'android:'。你必须像这样设计它：

```
 <resources>
    <style name="Theme.MyAppTheme" parent="Theme.Sherlock">
        <item name="android:actionBarStyle">@style/Theme.MyAppTheme.ActionBar</item>
        <item name="actionBarStyle">@style/Theme.MyAppTheme.ActionBar</item>

    </style>

    <style name="Theme.MyAppTheme.ActionBar" parent="Widget.Sherlock.ActionBar">
        <item name="android:background">#222222</item>
        <item name="android:height">64dip</item>
        <item name="background">#222222</item>
        <item name="height">64dip</item>
        <item name="android:titleTextStyle">@style/Theme.MyAppTheme.ActionBar.TitleTextStyle</item>
        <item name="titleTextStyle">@style/Theme.MyAppTheme.ActionBar.TitleTextStyle</item>
    </style>

    <style name="Theme.MyAppTheme.ActionBar.TitleTextStyle" parent="TextAppearance.Sherlock.Widget.ActionBar.Title">
        <item name="android:textColor">#fff</item>
        <item name="android:textStyle">bold</item>
        <item name="android:textSize">32sp</item>
        <item name="textColor">#fff</item>
        <item name="textStyle">bold</item>
        <item name="textSize">32sp</item>
    </style> 
```

# mysql - MYSQL 使用随机但特定的条目更新列

> ID：14116042
> 
> 赞同：0
> 
> 时间：2013-01-02T01:48:52.220
> 
> 标签：mysql, sql-update

当我尝试使用 0123456789 进行更新时，MySQL 更新似乎使用 2147483647 的幻数进行了更新。

在某个地方，MySQL 似乎在任何模式的 INT 列上将一个数字与另一个数字相关联。我什至在哪里寻找这样的关联。详情如下。

* * *

此更新执行了预期的操作，并将 012345678 输入到相应行的 ContactPhone2 列中。

```
UPDATE `alacarte`.`customercontacts` SET `ContactPhone2`='012345678' WHERE `CustomerID`='cust-000004' and`ContactID`='1' 
```

此更新实际上在相应行的 ContactPhone2 列中输入 2147483647；远离 0123456789。

```
UPDATE `alacarte`.`customercontacts` SET `ContactPhone2`='0123456789' WHERE `CustomerID`='cust-000004' and`ContactID`='1' 
```

ContactPhone2 的数据类型是 INT(10)，默认值为 NULL，并且没有设置参数（OK、NN、AI 等） 这是来自 MYSQL 常规日志。对于 012345678 更新。

```
 130101 17:51:43       89 Query set autocommit=0
 130101 17:51:44       89 Prepare   UPDATE `alacarte`.`customercontacts` SET `ContactPhone2`='012345678' WHERE `CustomerID`='cust-000004' and`ContactID`='1'
       89 Execute   UPDATE `alacarte`.`customercontacts` SET `ContactPhone2`='012345678' WHERE `CustomerID`='cust-000004' and`ContactID`='1'
       89 Query commit
       89 Close stmt 
```

以及 0123456789 更新的日志条目。

```
130101 17:51:48    89 Query set autocommit=0
130101 17:51:49    89 Prepare   UPDATE `alacarte`.`customercontacts` SET `ContactPhone2`='0123456789' WHERE `CustomerID`='cust-000004' and`ContactID`='1'
       89 Execute   UPDATE `alacarte`.`customercontacts` SET `ContactPhone2`='0123456789' WHERE `CustomerID`='cust-000004' and`ContactID`='1'
       89 Query commit
       89 Close stmt 
```

* * *

更新 0123456780 Works，所以它不是数字的长度。

这发生在整个数据库中具有 INT(10+) 的任何列上，但不会发生在 VARCHAR 列上。

更好的是，它在另一个名为*thedesignge*的模式上做同样的事情，该模式是旧模式，后来被复制和重命名，但它在 mysql 中仍然有效，尽管未使用。

列上没有运行任何触发器，并且只有一个触发器在 ContactID 列上的表上运行。也没有给出错误。

查询一般都是通过 MySQL 工作台进行的，虽然我试过一次在终端直接通过 shell 进入更新查询，得到了相同的结果。

在某个地方，MySQL 似乎在任何模式的 INT 列上将一个数字与另一个数字相关联。我什至在哪里寻找这样的关联。

我们还没有对缓存或索引做任何事情，除了 MySQL 默认的。我们正在运行 mysql 5.5.29

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T02:12:35.093

2147483647 的“神奇”数字是 2^31-1，这是 int 的上限。这意味着它认为您输入的数字太大。

最好的选择是使用 varchar 来存储您的电话号码。确保它足够大以处理所有预期的情况，我强烈建议使用正则表达式格式化电话号码，以便为您清理输入。如果您只需要 (xxx) xxx-xxxx 而不需要扩展名或任何有趣的东西（如国际号码），这是一种在 php 中格式化电话号码的简单方法。

```
$phoneNumber = '1-(235) 555.1234';

$formatted = '';
if (preg_match('/1?[^0-9]*([02-9][0-9][0-9])[^0-9]*([0-9]{3})[^0-9]*([0-9]{4})/', $phoneNumber, $matches)) {
    $formatted = "($matches[1]) $matches[2]-$matches[3]";
} else {
    // phone number is invalid
} 
```

结果将是 $formatted = `(235) 555-1234`。正则表达式包含一个可选的 1 前缀，该前缀被丢弃，并且第一个实际数字不能为 1。

显然，如果您使用它来格式化它，您应该在接受它之前使用相同的正则表达式来验证电话号码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T02:14:55.487

你可能溢出了你的 INT 值。当 MySQL 溢出时，默认情况下它存储数据类型支持的最大值。有符号 32 位整数的最大值是 2 ^(31) -1，即 2147483647。

值“012345678”和“0123456789”是可以的。也就是说，它们在 INT 的范围内，并且它们插入得很好。所以我怀疑这些价值观是否真的造成了麻烦。

我会寻找其他一些使用超出范围的不同值进行更新的 SQL 语句。例如，有人可能试图通过电话分机添加他们的电话号码。

您可以启用严格模式，以便整数溢出导致错误，而不是静默截断值。当它发生时，它会更清楚地告诉你。

```
SET SQL_MODE='STRICT_ALL_TABLES'; 
```

见[http://dev.mysql.com/doc/refman/5.5/en/server-sql-mode.html](http://dev.mysql.com/doc/refman/5.5/en/server-sql-mode.html)

PS：您提到 INT(10) 好像整数参数对数据类型支持的值范围很重要。这是一个常见的误解，但没关系。INT 始终为 32 位。请参阅[INT(10) 和 INT(12) 之间有什么区别（应用于我的代码时）？](https://stackoverflow.com/questions/1632403/what-is-the-difference-when-being-applied-to-my-code-between-int10-and-int1/1632567#1632567)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T02:04:42.597

你用的是什么mysql版本？我不能复制那个。

有`set ContactPhone2=round('0123456789')`帮助吗？*（假设你想*保持前导零，只是改为 varchar 更好。）

# php - 如何从 while 循环中设置全局函数

> ID：14116044
> 
> 赞同：0
> 
> 时间：2013-01-02T01:49:18.297
> 
> 标签：php

我试图做的是为 $ftp_user_name 设置一个全局变量，这样我就可以将它放在我的函数中，这样当循环运行信息时，它将在我的 ftp 连接结束时正确 preg_match 并输出我的文件列表寻找。

```
function is_txt($file) {
    global $ftp_user_name;
    return preg_match('/backup-[0-9]+\.[0-9]+\.[0-9]+_[0-9]{2}-[0-9]{2}-[0-9]{2}_'.$ftp_user_name.'.tar.gz/', $file) > 0;
}

while($row = mysql_fetch_array($query)) {

    $ftp_dir = $row['ftpdir'];

    // main display loop

    if (empty($row['ftphost'])){

        $ftp_server = $row['domain'];
        $ftp_user_name = $row['cpuser'];
        $ftp_user_pass = $row['cppass'];

    }
    else
    {
        $ftp_server = $row['ftphost'];
        $ftp_user_name = $row['ftpuser'];
        $ftp_user_pass = $row['ftppass'];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T02:18:41.923

这是我的建议，不需要使用全局变量，只需将其作为参数传递：

```
function is_txt($file,$user_name) {
    return preg_match('/backup-[0-9]+\.[0-9]+\.[0-9]+_[0-9]{2}-[0-9]{2}-[0-9]{2}_'.$user_name.'.tar.gz/', $file) > 0;
}

while($row = mysql_fetch_array($query)) {
    ...
    if (is_txt($file, $ftp_user_name)){
       // your code here
    }
    ...
} 
```

# ios - 如何捕获应用了 CAAnimation 的 CALayer 的内容？

> ID：14116046
> 
> 赞同：1
> 
> 时间：2013-01-02T01:49:26.143
> 
> 标签：ios, core-animation

我有兴趣将一系列录制`CoreAnimations`到视频文件中。为此，我构建了一个系统，该系统`CALayer`每秒渲染 30 次的当前状态并将其合成为视频。但是，这些单独的帧渲染不包括`CoreAnimation`更改。

当前捕获帧的方法：

```
[self.layer renderInContext:UIGraphicsGetCurrentContext()]; 
```

在核心动画文档中它写道：

> 动画属性也可以显式动画。要显式地为属性设置动画，您需要创建一个 Core Animation 动画类的实例并指定所需的视觉效果。显式动画不会更改图层中属性的值，它只是在显示中对其进行动画处理。

你知道在哪里/如何在`CoreAnimation`应用后截取图层的实际外观吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T04:30:03.297

很确定您可以调用`-presentationLayer`以获取与当前显示的图层版本大致对应的图层...有限制，请签入`CALayer.h`。

如果您无法捕获完整的 30 帧的输出，您可以在捕获期间暂停演示文稿，然后通过操作根层的`speed`和属性“单步执行”它们。`timeOffset`

# ruby-on-rails-3 - rails 3 从嵌套模型中选择控件

> ID：14116049
> 
> 赞同：0
> 
> 时间：2013-01-02T01:50:09.877
> 
> 标签：ruby-on-rails-3

我有 2 个模型用户和团队。一个团队可以有很多用户，每个用户都属于一个团队。

team_id 是我的用户表中的一列作为 fk。

我想在我的创建用户表单上有一个选择下拉列表，其中包含我所有的团队 team_id。

这段代码做我想要的但是

```
 <%= f.fields_for :teams do |builder| %>
    <p>
        <%= f.label :team_id, "Select Team For User" %>
        <%= builder.collection_select :team_initials, Team.all, :id, :team_initials %>
    </p>
<% end %> 
```

它不会尝试将 id 值添加到用户。这是错误

```
 Parameters:
{"utf8"=>"✓",
 "authenticity_token"=>"xxxxx",
 "user"=>{"name"=>"brand new",
 "email"=>"test1@test.com",
 "password"=>"[FILTERED]",
 "password_confirmation"=>"[FILTERED]",
 "teams"=>{"team_initials"=>"27"}},
 "commit"=>"Create my account"} 
```

它抱怨它不能添加到团队模型中。

我要做的就是为我的创建用户表单获取所有现有团队的 ID，因此当您创建用户时，您可以选择该用户团队。

我上面有 team_initials 的原因是我试图使用对用户更友好的字段进行选择，但仍将用户团队 ID 作为值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T00:28:49.220

我认为你在正确的轨道上。该`fields_for`机制用于在关联模型中设置值。我认为您要做的就是建立关联。

因此，您可以丢失该`fields_for`行，然后是本节：

```
builder.collection_select :team_initials, Team.all, :id, :team_initials 
```

应该：

```
f.collection_select :team_id, Team.all, :id, :team_initials 
```

我在这里寻找关于collection_select 的信息，因为我不知道它在我的脑海中： http: [//api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html)

我认为这会将这个参数从更改`"teams"=>{"team_initials"=>"27"}},`为`"team_id"=>"27",`

我希望能解决它。

# oauth - Google 阅读器 OAuth 范围的 oauth_verifier 缺失或无效

> ID：14116050
> 
> 赞同：0
> 
> 时间：2013-01-02T01:50:13.597
> 
> 标签：oauth, google-api, oauth-2.0, google-reader, google-oauth

我正在使用 Google OAuth 1.x Playground 试用 Google Reader API。但是当我尝试使用以下 OAuth 范围进行授权时，我得到“oauth_verifier 丢失或无效”： [http ://www.google.com/reader/api](http://www.google.com/reader/api)

我相信这是正确的范围。请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:28:56.930

您需要为 Google Reader API 使用 OAuth 2.0（您可以在[Google OAuth 2.0 Playground](https://developers.google.com/oauthplayground/)试用）。您列出的范围是正确的。

# eclipse - Eclipse Juno：无法读取模型扩展

> ID：14116051
> 
> 赞同：0
> 
> 时间：2013-01-02T01:50:21.563
> 
> 标签：eclipse, eclipse-plugin, eclipse-juno, e4

导出产品后，当我尝试运行应用程序时，我在应用程序中看不到任何视图。我知道原因，这是因为错误“无法读取模型扩展”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T22:27:17.983

从 Eclipse IDE 中启动时，您的产品可以正常工作吗？只有导出的产品会产生错误？然后检查导出的产品是否确实包含所有必需的文件。例如，它是否包括`plugin.xml`, `Application.e4xmi`, ...？

从 IDE 中启动时，所有源代码文件都可用于正在运行的产品。但是，当导出时，只有每个插件文件中特别列出的`build.properties`文件才会成为导出产品的一部分。例如，如果文件中未列出模型文件 (*.e4xmi) `build.properties`，您导出的产品将无法加载模型。

# haskell - 引用键值列表时可能返回值

> ID：14116056
> 
> 赞同：1
> 
> 时间：2013-01-02T01:51:25.563
> 
> 标签：haskell

我在haskell中使用键值列表，当在列表中找不到键而不是异常时，我想获取值Nothing。例如：

```
*> x
fromList [(1,[(6,14.0),(3,9.0),(2,7.0)]),(2,[(4,15.0),(3,10.0)]),(3,[(6,2.0),(4,11.0)]),(5,[(4,6.0)]),(6,[(5,9.0)])]
*> x ! 7
*** Exception: Map.find: element not in the map 
```

是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T02:03:46.803

LMHTFY: [`Map k a -> k -> Maybe a`](http://www.haskell.org/hoogle/?hoogle=Map+k+a+-%3E+k+-%3E+Maybe+a).

第一个结果是[`Map.lookup`](http://hackage.haskell.org/packages/archive/containers/latest/doc/html/Data-Map-Lazy.html#v%3alookup)，这就是你想要的。

# python - Python eval(repr(object)) - 无效的语法

> ID：14116064
> 
> 赞同：2
> 
> 时间：2013-01-02T01:53:22.450
> 
> 标签：python, class, repr

我正在乱搞一副牌。我有一个问题，我读过 eval(repr(object)) 应该等同于对象[堆栈溢出主题](https://stackoverflow.com/questions/1436703/difference-between-str-and-repr-in-python)。

我为我的卡片实现了两个类，一个 Card 类和一个 Deck 类。每个都有一个 repr 方法，我试图在该方法中尽可能接近实际创建对象的语法。Card and Deck的init和repr代码：

```
class Card(object):

    def __init__(self, num, suit):
        self.__num = num
        self.__suit = suit

    def __repr__(self):
        return "{!r}({!r},{!r})".format(self.__class__, self.__num, self.__suit)

class Deck(object):

    def __init__(self, cards=None):
        if not cards:
            self.__cards = {"diamonds":[], "hearts":[], "spades":[], "clubs":[]}
        else:
            self.__cards = cards

    def __repr__(self):
         return "{!r}({!r})".format(self.__class__, self.__dict__) 
```

这是错误：

```
print(eval(repr(self.deck.deck)))
File "<string>", line 1
{'hearts': [<class 'cards.Card'>(1,'hearts'), <class 'cards.Card'>(2,'hearts'), <class 'cards.Card'>(3,'hearts'), <class 'cards.Card'>(4,'hearts'), <class 'cards.Card'>(5,'hearts')], 'clubs': [<class 'cards.Card'>(1,'clubs'), <class 'cards.Card'>(2,'clubs'), <class 'cards.Card'>(3,'clubs'), <class 'cards.Card'>(4,'clubs'), <class 'cards.Card'>(5,'clubs')], 'spades': [<class 'cards.Card'>(1,'spades'), <class 'cards.Card'>(2,'spades'), <class 'cards.Card'>(3,'spades'), <class 'cards.Card'>(4,'spades'), <class 'cards.Card'>(5,'spades')], 'diamonds': [<class 'cards.Card'>(1,'diamonds'), <class 'cards.Card'>(2,'diamonds'), <class 'cards.Card'>(3,'diamonds'), <class 'cards.Card'>(4,'diamonds'), <class 'cards.Card'>(5,'diamonds')]}
            ^
SyntaxError: invalid syntax 
```

我只是猜测这是因为 Card 类的表示方式。我试图用 {!r} 代替 {!s} 但它并没有改变它。我只是在考虑硬编码它属于 Card 类的事实，但我希望有一些特定的方式可以做到这一点。

解决：只需要在`.__name__`后面加上`self.__class__`并使用 {!s} （以便删除引号）而不是 {!r}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T02:07:32.213

如您所见，您`repr`的表单根本不是用于创建对象的表单。它是`<class 'cards.Card'>(1,'hearts')`，不是`Card(1, 'hearts')`。解决此问题的一种方法是`self.__class__.__name__`在您的`__repr__`而不是仅使用`self.__class__`.

然而，你为什么要这样做？你只是`eval(repr(...))`用来测试repr好不好？有比使用更好的方法来创建实例的副本`eval(repr(...))`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T02:07:49.270

不要代表类本身，使用它的名称。

```
def __repr__(self):
    return "{}({!r},{!r})".format(self.__class__.__name__, self.__num, self.__suit) 
```

然后它应该看起来像它在源代码中的样子。

# grails - Grails UI（插件）对话框未触发控制器操作

> ID：14116066
> 
> 赞同：1
> 
> 时间：2013-01-02T01:53:26.580
> 
> 标签：grails, grails-plugin

祝大家新年快乐，

我正在开发一个项目，我必须在对话框（模式窗口）窗口的“列表”中显示每条记录的详细信息，同时用户单击列表中每条记录上的链接。我正在尝试使用 GrailUI 插件来完成此操作。这是我的代码：

```
<gui:dialog width="300px" 
           controller="tag" 
           action="showTags" 
           params=" [id:userInstance.userId]" 
           update="dialogData" 
           draggable="true" 
           triggers="[show:[type:'link', text:'Show Tags', on:'click']]" 
           modal="true">
   <div id='dialogData'>This will be updated by the controller action....</div> 
```

由于某种原因，对话框标签未触发控制器操作。它打开对话框窗口，但只显示此消息“这将由控制器操作更新......”。它没有显示控制器操作呈现的输出（视图）。有人可以帮助我了解我做错了什么吗？

Jquery 和 jquery-ui 是我在项目中使用的其他插件。

感谢你的帮助。

**编辑**

```
 def test(Integer max) {
        ....
        ....
        userInstanceList = User.list(params)
        render (view: "test", model: [userInstanceList: userInstanceList, userInstanceTotal: User.count()])

}           

def showTags () {
    def user = User.findByUserId(params.id)
        def tagInstanceList = user.tags
    render(view: "test", model: [tagInstanceList: tagInstanceList])
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T15:43:17.953

如果您想将某些内容提交到远程，您需要设置`form="true"`. 然后任何表单元素都可以放置在对话框标签内，而无需定义表单。当 form="true" 时，对话框创建自己的表单。

这是我测试过的一个例子：

**测试.gsp：**

```
 <html>
        <head>
            ....
            <r:require modules="grailsui-dialog"/>    
        </head>
        <body class="yui-skin-sam">            
            <gui:dialog width="300px" 
               controller="test" 
               action="showTags" 
               params=" [id:userInstance.userId]" 
               form="true"                        <!-- the key to remote submit -->
               update="dialogData" 
               draggable="true" 
               triggers="[show:[type:'link', text:'Show Tags', on:'click']]" 
               modal="true" >    
               <!-- You can put any input element here, which will be submitted in the form-->
               <div id='dialogData'>This will be updated by the controller action....</div>   
           </gui:dialog>
       </body>
   </html> 
```

**测试控制器：**

```
class TestController {

    def test() { 
        .........
    }

    def showTags() {
        def user = User.findByUserId(params.id)
        def tagInstanceList = user.tags
        render(template: "ajaxResponse", model: [tagInstanceList: tagInstanceList, user:user])          //render a template, not a view
    } 
```

对于 Ajax 请求，您不能呈现视图，该视图将替换原始页面。相反，您应该发回一个带有要在对话框中显示的标签的模板：

**_ajaxResponse.gsp**

```
<h3>Tag List of user ${user.username}</h3>
<g:each in="${tagInstanceList}" var="tag">
    <p>${tag}</p>
</g:each> 
```

# xmonad - 我可以在不使用 xterm 的情况下启动 clisp 吗？

> ID：14116070
> 
> 赞同：0
> 
> 时间：2013-01-02T01:54:27.357
> 
> 标签：xmonad

在 emacs 中，clisp 可以在自己的缓冲区中运行，如下所示：

```
(defun clisp ()
    (interactive)
    (async-shell-command "clisp -q -modern -ansi" "*clisp*"))
(global-set-key "\C-c\C-l" 'clisp) 
```

不使用 emacs，我们可以使用`xterm -e clisp`它来运行它。可以在不使用 xterm 的情况下在 xmonad 窗口中运行 clisp 吗？

真挚地！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T03:53:08.857

呃，这个简单的命令不是`clisp`做你想做的吗？如果没有，你需要明确你的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T12:44:01.577

> 可以在不使用 xterm 的情况下在 xmonad 窗口中运行 clisp 吗？

您可以使用 xterm 以外的终端仿真器，但除此之外：不，您不能在不使用终端仿真器的情况下在其自己的窗口中运行控制台应用程序。

# javascript - 我需要帮助了解钛合金 (MVC) 的开发

> ID：14116071
> 
> 赞同：8
> 
> 时间：2013-01-02T01:55:06.703
> 
> 标签：javascript, xml, titanium-mobile, appcelerator-mobile

我习惯于在 MVC 框架中进行开发，例如 cake 和 Backbone，但我无法在 Alloy 中进行开发。网上好像没有什么好的例子。如果有人能举例说明如何设置几个按钮来响应点击事件并将您带到新窗口，我将非常感激。我也在使用 Ti 的 map api 来显示谷歌地图，但我也不确定如何正确初始化它。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T07:05:45.827

这里是 MVC 合金的非常有用的链接

[http://developer.appcelerator.com/question/143969/alloy-mvc-examples](http://developer.appcelerator.com/question/143969/alloy-mvc-examples)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-23T10:33:29.127

以下是我经常使用的有用链接集合：

合金快速入门

[http://docs.appcelerator.com/titanium/latest/#!/guide/Alloy_Quick_Start](http://docs.appcelerator.com/titanium/latest/#!/guide/Alloy_Quick_Start)

合金框架指南

[http://docs.appcelerator.com/titanium/latest/#!/guide/Alloy_Framework](http://docs.appcelerator.com/titanium/latest/#!/guide/Alloy_Framework)

Alloy Google Group 仅供高级讨论（无问答）

[https://groups.google.com/forum/?fromgroups#!forum/appc-ti-alloy](https://groups.google.com/forum/?fromgroups#!forum/appc-ti-alloy)

合金github仓库

[https://github.com/appcelerator/alloy](https://github.com/appcelerator/alloy)

合金测试应用程序，有点像单独的 Kitchen-Sink-esque 应用程序

[https://github.com/appcelerator/alloy/tree/master/test/apps](https://github.com/appcelerator/alloy/tree/master/test/apps)

合金 XML 视图 [http://docs.appcelerator.com/titanium/3.0/#!/guide/Alloy_XML_Markup](http://docs.appcelerator.com/titanium/3.0/#!/guide/Alloy_XML_Markup)

[http://docs.appcelerator.com/titanium/latest/#!/guide/Alloy_Samples-section-37535160_AlloySamples-TestCaseExamples](http://docs.appcelerator.com/titanium/latest/#!/guide/Alloy_Samples-section-37535160_AlloySamples-TestCaseExamples)

RSS 阅读器示例 [https://github.com/appcelerator/alloy/tree/master/samples/rss](https://github.com/appcelerator/alloy/tree/master/samples/rss)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-31T05:17:47.023

[这是MVC 合金](https://www.youtube.com/watch?v=a0adAsLE0v4)的非常有用的链接

# c - 添加到链表的尾部而不使用 if

> ID：14116075
> 
> 赞同：4
> 
> 时间：2013-01-02T01:55:50.473
> 
> 标签：c, data-structures, linked-list

这是一个面试问题，我想我会和你们分享。

> 如何在不使用“if”的情况下有效地添加到链表的尾部？

从此函数中删除 if。(`?`仍然是`if`)。

```
typedef struct tNode_ tNode;

struct tNode_ {
  tNode* pNext;
  int data;
};

tNode* pHead = NULL;
tNode* pTail = NULL;   

AddTail(tNode* pNode){
  if(!pTail) {
    pHead = pNode;
  }
  else {
    pTail->pNext = pNode;
  }
  pTail = pNode;
  pTail->pNext = NULL;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T02:01:04.807

一种（诚然愚蠢的）方法是使用短路逻辑运算符`&&`和`||`. 例如，您可以这样做：

```
 AddTail(tNode* pNode){
      pTail || (pHead = pNode);
      !pTail || (pTail->pNext = pNode);

      pTail = pNode;
      pTail->pNext = NULL;
 } 
```

这是有效的，因为如果`ptail`为 null，则第一条语句的第一部分将评估为 false，从而强制评估语句的后半部分`||`。如果它不为空，则不会评估语句的后半部分。类似的逻辑适用于下一条语句。

也就是说，这是一个非常愚蠢的面试问题，老实说，我不知道他们在做什么。就个人而言，我会质疑有人试图评估你编写这样的代码的能力是否明智。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T02:20:13.650

```
tNode pHead;
tNode pTail;

void init() {
  pHead.pNext = &pTail;
  pTail.pNext = &pHead;
}

AddTail(tNode* pNode){
  pTail.pNext->pNext = pNode;
  pNode->pNext = &pHead;
  pTail.pNext = pNode;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T01:59:45.127

```
typedef struct tNode_ tNode;

struct tNode_ {
  tNode* pNext;
  int data;
};

/* normal initialization for pHead */

tNode* pHead = NULL;

/* the trick is to point at where you want the next pointer to go
 * instead of saving a pointer to the node.
 */
tNode** ppTail = &pHead;

AddTail(tNode* pNode){
  pNode->pNext = NULL;
  /* update the next pointer */
  *ppTail = pNode;
  /* save the address of the next pointer */
  ppTail = &pNode->pNext;
}

main(){
  int cnt;

  tNode* pNew;

  for(cnt=0; cnt<10; cnt++){
    pNew = malloc(sizeof(tNode));
    pNew->data = cnt;
    AddTail(pNew);
  }

  for(pNew = pHead; pNew; pNew = pNew->pNext){
    printf("%d\n", pNew->data);
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T02:11:51.220

我会为每个列表使用一个虚拟元素（或他们称之为[哨兵节点）。](http://en.wikipedia.org/wiki/Sentinel_node)附加到头部成为附加到虚拟对象，附加到尾部只是附加到最后一个元素，然后根据定义存在。

```
typedef struct tNode_ tNode;

struct tNode_ {
  tNode* pNext;
  int data;
};

// The Remove operation must never remove this dummy!
tNode* pDummy = (tNode*)calloc(1, sizeof(tNode));
tNode* pHead = pDummy;
tNode* pTail = pDummy;

AddTail(tNode* pNode){
  pTail->pNext = pNode;
  pTail = pNode;
  pTail->pNext = NULL;
} 
```

# deployment - 用java更新java？

> ID：14116076
> 
> 赞同：0
> 
> 时间：2013-01-02T01:56:18.000
> 
> 标签：deployment, java, auto-update

我环顾四周，在任何地方都找不到，但是有没有办法通过 java 应用程序更新 JRE，然后使用新的 JRE 重新启动所述应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T07:16:36.073

从正在运行的 Java 应用程序中更新 JRE。不是通常做的事情。

取而代之[`deployJava.js`](http://download.oracle.com/javase/7/docs/technotes/guides/jweb/deployment_advice.html)的是确保安装了特定的 Java 主要版本，并使用[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)确保[特定的微版本](http://pscode.org/jws/version.html)可用。

这些技术都与启动富客户端（小程序和桌面应用程序）有关。如果是应用程序。有一个[这里提到的 GUI，](https://stackoverflow.com/questions/14114205/floating-button-is-awt)它应该是“所有系统都运行”。

# android - 具有不同视图的 Google+ 应用列表视图布局

> ID：14116077
> 
> 赞同：0
> 
> 时间：2013-01-02T01:56:25.733
> 
> 标签：android, android-layout, android-listview, android-sliding

我正在尝试实现一个滑动菜单，就像在 Google 的 Google+ Android 应用中找到的那样：

![谷歌应用](../Images/fc11b757129eb8ca707a1260a03a8e1e.png)

我已经让实际的滑动菜单工作了，但是我在实现可以容纳任何类型的子视图的滚动视图时遇到了麻烦。

例如，我想在屏幕截图中有一个像“通知”行这样的标题，在它下面有一个`ListView`带有通知项目的标题。而且我想在该列表下方有另一个部分，可能称为“错误”，在它下面有一个不同`ListView`的错误。也许`WebView`在最底层。

这如何最好地实施？

**注意：**我已经阅读[了本教程](http://android.amberfog.com/?p=296)，但它谈论的是单个`ListView`. 如果可能的话，我想使用 a`LinearLayout`或类似的方法来构建它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:20:20.177

我最终实现这一点的方式是使用`ScrollView`我简单填充的`Views`.

使用 a 时需要考虑一些事项`ScrollView`，例如[此答案](https://stackoverflow.com/questions/5573183/scrollview-optimizations)或[Android 文档](http://developer.android.com/reference/android/widget/ScrollView.html)。

据我了解，如果您需要列表中的大量项目，那么您应该考虑使用`ListView`. 否则 a`ScrollView`会做得很好。

# ruby-on-rails - 当用户从 Android 上传时，如何允许将图像文件上传到回形针？

> ID：14116079
> 
> 赞同：1
> 
> 时间：2013-01-02T01:57:07.253
> 
> 标签：ruby-on-rails, ruby-on-rails-3, paperclip

我刚刚注意到，当用户从 Android 的默认浏览器上传文件时，文件类型将是 this。

> 应用程序/八位字节流

但是这种文件类型意味着各种类型的文件，因此回形针允许用户上传几乎任何东西:(

我正在限制此代码要上传的文件的类型

**模型/comment.rb**

```
validates_attachment_content_type :comment_icon, :content_type => ['image/jpeg', 'image/png','image/gif'] 
```

但是这样一来，使用Android默认浏览器的用户就无法上传。

如何启用从 Android 的默认浏览器上传？

# ruby - 1.9.3 安装，错误信息 factory_girl 需要 Ruby 版本 >= 1.9.2

> ID：14116083
> 
> 赞同：1
> 
> 时间：2013-01-02T01:57:40.053
> 
> 标签：ruby, rbenv

我刚刚用 ruby​​ 1.9.3 安装了 rbenv

```
rbenv version
1.9.3-p327 (set by /Users/me/.rbenv/version) 
```

但是，当我尝试运行包更新（在安装 rbenv 之前创建的项目中）时，我收到一条错误消息，指出 factory_girl 至少需要 ruby​​ 1.9.2。请参阅下面的错误消息

如果相关，当我执行 gem --version 时，我会看到对 1.8.23 的引用。

```
gem --version
1.8.23 
```

错误信息

```
Installing factory_girl (4.1.0) /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems/installer.rb:163:in `install': factory_girl requires Ruby version >= 1.9.2\. (Gem::InstallError)
    from /Library/Ruby/Gems/1.8/gems/bundler-1.0.18/lib/bundler/source.rb:101:in `install'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.0.18/lib/bundler/rubygems_integration.rb:78:in `preserve_paths'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.0.18/lib/bundler/source.rb:91:in `install'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.0.18/lib/bundler/installer.rb:58:in `run'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.0.18/lib/bundler/rubygems_integration.rb:93:in `with_build_args'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.0.18/lib/bundler/installer.rb:57:in `run'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.0.18/lib/bundler/installer.rb:49:in `run'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.0.18/lib/bundler/installer.rb:8:in `install'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.0.18/lib/bundler/cli.rb:268:in `update'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.0.18/lib/bundler/vendor/thor/task.rb:22:in `send'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.0.18/lib/bundler/vendor/thor/task.rb:22:in `run'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.0.18/lib/bundler/vendor/thor/invocation.rb:118:in `invoke_task'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.0.18/lib/bundler/vendor/thor.rb:263:in `dispatch'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.0.18/lib/bundler/vendor/thor/base.rb:386:in `start'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.0.18/bin/bundle:13
    from /usr/bin/bundle:19:in `load'
    from /usr/bin/bundle:19 
```

更新：

第一个答案告诉我要做三个步骤

```
gem install bundle
rbenv rehash
bundle install 
```

我做了这些步骤（它安装了捆绑器）'

```
gem install bundler
Fetching: bundler-1.2.3.gem (100%)
Successfully installed bundler-1.2.3
1 gem installed 
```

但是当我尝试“捆绑安装”时，我收到了关于 Factory_girl 的相同错误消息。有趣的是，我决定再次尝试这三个步骤，从 gem install bunlder 开始，它再次安装了它？！#??

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T02:23:51.720

`bundle`您使用的命令来自系统 Ruby 安装，即 Ruby 1.8.x。

尝试

1.  `gem install bundler`
2.  `rbenv rehash`
3.  `bundle install`

这应该可以解决您的问题。

# exit - 不知道如何启动程序功能

> ID：14116086
> 
> 赞同：0
> 
> 时间：2013-01-02T01:58:22.380
> 
> 标签：exit, function

**（初学者问题）似乎我建了一座没有门的房子。例如，假设您有三个 def 块：

```
def intro ( ):
  blah
  def middle ( )

def middle ( ):
  blah
  def end ( )

def end ( ):
  blah

intro ( ) #calling function here to start prog causes infinite loop 
```

计算机初始化所有 defs，但随后退出 prog，因为没有任何东西指向开始。你如何开始？如果我将 def intro 设置为 prog 的最后一行，那么事情就会陷入无限循环。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T02:08:22.937

不要`def`在函数调用之前写。试试这个：

```
def intro():
  print "intro"
  middle()

def middle():
  print "middle"
  end()

def end():
  print "end"

intro() 
```

# php - PHP MYSQL 使用数据库变量创建数据库

> ID：14116087
> 
> 赞同：0
> 
> 时间：2013-01-02T01:58:26.530
> 
> 标签：php, mysql, database

我已经创建了以下代码，我似乎无法找出它有什么问题，任何帮助将不胜感激。

```
<?php

$con = mysql_connect("host","user","password");

mysql_select_db("Stores", $con);

$street = mysql_query("SELECT Street FROM Sports WHERE Name = 'Nike'");

if (mysql_query("CREATE DATABASE $street", $con))
{
       echo "Success";
}

else
{
       echo "Fail";
}

mysql_close($con); 
```

我一直在失败，有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T02:06:49.440

这段代码有很多问题：

1.  起初这可能不是很相关，但是 php mysql 扩展被标记为**deprecated**，请切换到 mysqli 或更好，PDO[也在官方文档中指出](http://php.net/manual/en/function.mysql-query.php)。已弃用意味着它仅用于支持遗留代码（这意味着它不应该在新代码中使用）并且它将在将来的某个时候消失。我推荐 PDO，因为它是一个更加成熟、灵活和通用的数据库接口，如果您打算花时间学习一些东西，PDO 绝对是您的最佳选择。特别注意[准备好的语句](http://php.net/manual/en/pdo.prepare.php)，它们将帮助您避免各种问题，而不必摸索各种*转义*函数。
2.  mysql_query 返回一个查询结果（作为资源），您应该使用某种 fetch 命令读取该结果 - 请参阅[此处的 PDO 的 query() 方法的文档](http://php.net/manual/en/pdo.query.php)
3.  我一点也不知道你为什么要在你的服务器上创建一个以你通过查询找到的**街道**命名的新**数据库？**你可能应该解释你的意图是什么，我很确定这不会做你想做的事。

 **根据评论编辑：

对我来说，切换到 PDO 的主要优点是

*   面向未来：使用 mysql_ 扩展程序，您有一天会升级 php，扩展程序将永远消失。PDO 不会很快发生这种情况。
*   支持多个数据库：传统上，每个数据库品牌都由 mysql 中自己的专有扩展提供服务。PDO 统一了所有这些扩展，这意味着通过 1 个 API，您可以使用现有的大多数常见数据库。请注意，它不会消除这些数据库之间的方言差异，但是为它们提供一个 API 绝对是一大优势。
*   PDO 积极鼓励您使用准备好的语句，这通常被认为是针对各种安全问题（如 SQL 注入）的防弹但简单的保护 - 无需为了使常规 SQL 语句有些安全而需要做的所有转义废话.

关于为每个用户创建数据库的评论，我真的认为您需要阅读一些关于关系数据库的介绍性材料。最常见的应用程序由一个数据库支持，该数据库在大多数情况下包含一组固定的表（例如，商店、客户、订单、订单项）以及它们之间的关系。例如，一家商店有许多客户，每个客户都有一个或多个订单，每个订单包含一个或多个项目。所有数据都是通过查询利用这些关系来获取的，例如使用连接来提取属于一个订单的所有项目，或者列出与一个客户相关的所有订单。这里 重要 的是 , 除了 最 特殊 的 情况 之外 , 只有**一个**每个数据类型的表。也就是说，所有客户都存储在一张表中，所有订单都存储在一张表中，以此类推。

我没有时间阅读所有内容，但[databaseprimer.com](http://www.databaseprimer.com/)可能有助于您开始了解这些概念。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T02:05:30.337

`mysql_query`将返回一个资源。您必须先使用获取数据`mysql_fetch_assoc($query)`

在查询后添加此行：

```
 $fetch = mysql_fetch_assoc($streets); 
```

然后在您的第二个查询中将 $streets 更改为 $fetch['street']。**

# iphone - XCODE：从 iPhone 5 设备的 NIB 调整 UIImageView 大小

> ID：14116088
> 
> 赞同：3
> 
> 时间：2013-01-02T01:58:33.580
> 
> 标签：iphone, ios, xcode, uiviewcontroller, uiimageview

我正在尝试为用户调整背景静态`UIImageView`（来自`Nib`文件）的大小`iPhone5`。不幸的是，以下代码似乎对背景视图的大小没有任何影响。

有谁知道为什么？提前感谢您提供的任何帮助。

**视图控制器.m：**

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
    device = appDelegate.deviceType;
    NSLog(@"The device platform is: %@", device);
    if ([[device substringToIndex:8] caseInsensitiveCompare: @"iPhone 5"] == NSOrderedSame) {
        [background sizeThatFits:CGSizeMake(320, 504)];
    }
    else {
        [background sizeThatFits:CGSizeMake(320, 416)];
    }
...
//Note: 'background' is declared in `ViewController.h` as, `IBOutlet` `UIImageView` *background, and is linked to the image view in ViewController_iPhone.xib 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T02:30:04.467

一些想法：

1.  正如 demosten 和 shabzco 建议的那样，我不会使用设备名称/描述来确定坐标（如果没有别的，那么 iPhone 6 等）；

2.  如果您要以`frame`编程方式设置，我建议`background.frame`根据视图控制器的视图设置属性，`bounds`而不是硬编码图像视图的大小。这样，背景会被调整为视图控制器视图的适当大小，不仅与设备无关，而且无论该视图控制器是否在以后作为另一个容器控制器的子视图控制器嵌入，等等。 （例如，如果您将视图放在导航控制器和标签栏控制器、您自己的自定义容器控制器等中会怎样）。此外，不要对状态栏或其他图形元素的大小做出假设。让 iOS 为您解决所有这些问题，只需：

    ```
    background.frame = self.view.bounds; 
    ```

3.  或者更好的是，如果您已将背景图像视图添加到 NIB 本身，请设置自动调整大小的蒙版，并且根本不要以`frame`编程方式更改。如果您关闭了自动布局，只需像这样设置图像视图的自动调整大小属性：

    ![自动调整大小](../Images/8db6e1d191dc2b4e23308bf964f45df7.png)

最重要的是，如果可以的话，避免在代码中显式引用设备名称并避免硬编码坐标。在代码中硬编码维度只会使您的应用程序更加脆弱，容易受到新设备、新版本 iOS、将视图控制器嵌入其他容器控制器等问题的影响，并限制代码的重用机会。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T02:09:50.943

这是在 iPhone 5 和以前尺寸的设备之间进行检查的更好方法

```
if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
{
    CGSize result = [[UIScreen mainScreen] bounds].size;
    if(result.height == 480)
    {
        [background sizeThatFits:CGSizeMake(320, 416)];
    }
    if(result.height == 568)
    {
        [background sizeThatFits:CGSizeMake(320, 504)];
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T02:19:00.597

`sizeThatFits`不改变大小。你应该修改`background.frame`. 就像是：

```
background.frame = CGRectMake(background.frame.origin.x, background.frame.origin.y, 320, 416); 
```

和

```
background.frame = CGRectMake(background.frame.origin.x, background.frame.origin.y, 320, 504); 
```

在编辑 Nib 文件时，还要确保您的 UIImageView 在大小检查器选项卡中没有灵活的宽度或高度。

# php - PHP mail() 奇怪的附加信息自动发送

> ID：14116092
> 
> 赞同：2
> 
> 时间：2013-01-02T01:59:14.633
> 
> 标签：php, email

好吧，最近，我创建了一个脚本并将其放在我可以访问的域中。一旦我尝试发送电子邮件，电子邮件就通过了，没问题，但是有一件我觉得很奇怪的事情。

我的主题字段未设置。我的主题行完全空白，好像我从未发送过一样。似乎我的标头也没有通过它们发送。（见：[图片](http://i.imgur.com/Zdxbt.png)）

另外，这些东西和我的信息一起在电子邮件中发送是有原因的吗？就像，它可能是 php.ini 中的设置吗？

> 消息 ID：message-id-here@**.gs
> 
> 日期：2013 年 1 月 2 日，星期三 05:37:47 +0400 (MSK)
> 
> 来自：www-data@**.gs (www-data)
> 
> 返回路径：www-data@**.gs
> 
> X-OriginalArrivalTime: 2013 年 1 月 2 日 01:37:47.0814 (UTC) FILETIME=[C5131C60:01CDE889]
> 
> 我正在发送一封电子邮件，这就是消息。
> 
> 这是正确的吗？

目前，这就是我的脚本的样子。

```
<html>
<head>
    <title>Email</title>
</head>

<body>
    <?php
        ini_set("mail.add_x_header", "Off");
        if(isset($_POST['send']))
        {
            $To = ((isset($_POST['to'])) ? $_POST['to'] : '');
            $Subject = ((isset($_PST['subject'])) ? $_POST['subject'] : '');
            $Message = ((isset($_POST['message'])) ? $_POST['message'] : '');
            $Headers = ((isset($_POST['from'])) ? "From: " . $_POST['from'] . "\r\n" : '');
            $Headers = ((isset($_POST['reply-to'])) ? "Reply-to: " . $_POST['reply-to'] . "\r\nReturn-Path:" . $_POST['reply-to'] . "\r\n" : '');
            if(mail($To, $Subject, $Message, $Headers))
            {
                echo 'Sent to ' . $To . '.';
            }
        }
    ?>

    <form method="POST">
        To: <input type="text" name="to" value="" /><br />
        Subject: <input type="text" name="subject" value="" /><br />
        Message: <textarea name="message" style="width:300px; height:200px;"></textarea><br />
        From: <input type="text" name="from" value="" /><br />
        Reply-To: <input type="text" name="reply-to" value="" /><br />
        <input type="submit" name="send" />
    </form>
</body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T02:01:24.040

您的主题未设置，因为您有错字。改变：

```
$Subject = ((isset($_PST['subject'])) ? $_POST['subject'] : ''); 
```

到：

```
$Subject = ((isset($_POST['subject'])) ? $_POST['subject'] : ''); 
```

至于标题，您的 Return-To 会覆盖 From 标题。您还应该将 \r\n 更改为 \n，因为某些电子邮件客户端将 \r\n 解释为“所有标题的结尾”。

所以，而不是：

```
$Headers = ((isset($_POST['from'])) ? "From: " . $_POST['from'] . "\r\n" : '');
$Headers = ((isset($_POST['reply-to'])) ? "Reply-to: " . $_POST['reply-to'] . "\r\nReturn-Path:" . $_POST['reply-to'] . "\r\n" : ''); 
```

做：

```
$Headers = array();
if (isset($_POST['from']))
{
    $Headers[] = "From: " . $_POST['from'];
}
if (isset($_POST['reply-to']))
{
    $Headers[] = "Reply-to: " . $_POST['reply-to'];
    $Headers[] = "Return-Path: " . $_POST['reply-to'];
}
$Headers = implode("\n", $Headers) . "\r\n"; 
```

# java - 如何在java中的数组中设置JButtons的颜色？

> ID：14116093
> 
> 赞同：2
> 
> 时间：2013-01-02T01:59:17.427
> 
> 标签：java, swing, jbutton, background-color

假设有一个名称按钮数组：
private JButton buttons[] = new JButton[9];
如何将此数组中所有按钮的颜色设置为蓝色？

这是我的全部代码：这是一个使用按钮的井字游戏。

```
import java.awt.*; 
import java.awt.event.*;
import javax.swing.*;
import java.awt.BorderLayout;

public class TicTacToe implements ActionListener {
private JButton buttons[] = new JButton[9];
private JFrame window = new JFrame("Tic Tac Toe");
private boolean win = false;
private int count = 0;
private int Xwins = 0, Owins = 0;
private String letter = "";
private int[][] winCombinations = new int[][] {
        {0, 1, 2}, {3, 4, 5}, {6, 7, 8}, //horizontal wins
        {0, 3, 6}, {1, 4, 7}, {2, 5, 8}, //vertical wins
        {0, 4, 8}, {2, 4, 6}                     //diagonal wins
};
String name1 = JOptionPane.showInputDialog("Please enter first player's name");
String name2 = JOptionPane.showInputDialog("Please enter second player's name");

public TicTacToe(){
    JOptionPane.showMessageDialog(null,"Remember Player 1 is X and Player 2 is O.");
    window.setSize(300,300);
    window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    window.setLayout(new GridLayout(3,3));
    window.setVisible(true);

      for(int i=0; i<=8; i++){
          buttons[i] = new JButton();
          window.add(buttons[i]);
          buttons[i].addActionListener(this);
          buttons[i].setBackground(Color.MAGENTA);
  }
      for (JButton button: buttons) {
           button.setBackground(Color.BLUE);
        }

}

public void actionPerformed(ActionEvent event) {
        count++;
        if(count % 2 == 0){
            letter = "O";

        }else{
            letter = "X";
        }
         JButton pressedButton = (JButton)event.getSource(); 
         pressedButton.setText(letter);
         pressedButton.setEnabled(false);
         pressedButton.setBackground(Color.WHITE);

    //Determine who won
    for(int i=0; i<=7; i++){
        if( buttons[winCombinations[i][0]].getText().equals(buttons[winCombinations[i][1]].getText()) && 
                buttons[winCombinations[i][1]].getText().equals(buttons[winCombinations[i][2]].getText()) && 
                buttons[winCombinations[i][0]].getText() != ""){
                win = true;
            }
        }
        if(win == true){
            if(letter == "X"){
                JOptionPane.showMessageDialog(null, name1 + " wins the game!");
            }else{
                JOptionPane.showMessageDialog(null, name2 + " wins the game!");
            }
            playAgain();
        }else if(count == 9 && win == false){
            JOptionPane.showMessageDialog(null, "The game is tied!");
            playAgain();
        }
    } 

public void playAgain(){
    if(letter == "X"){
        Xwins++;
    }else{
        Owins++;
    }
    JOptionPane.showMessageDialog(null, name1 + " has won this many times: " + Xwins);
    JOptionPane.showMessageDialog(null, name2 + " has won this many times: " + Owins);
    int response = JOptionPane.showConfirmDialog(null, "Would you like to play again?", "Confirm", JOptionPane.YES_NO_OPTION, JOptionPane.QUESTION_MESSAGE);

    if(response == JOptionPane.YES_OPTION){
        reset();
    }else{
        System.exit(0);
    }
}

  public void reset() {
      for(int i = 0; i<=8; i++) {
              buttons[i].setText("");
              buttons[i].setEnabled(true); 
      }
      win = false;
      count = 0;
  }  

public static void main(String[] args){
    TicTacToe play = new TicTacToe();
   }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T02:51:30.790

这实际上是`JButton`.

背景和内容是两个不同的概念。虽然您可以更改背景颜色，但它可能不会更改按钮的内容区域。事实上，它可能在不同的外观和感觉下表现不同。

相反，使用`JLabel`，它更容易控制......

![在此处输入图像描述](../Images/f000054db64eae7cb0957dc3a335f0ed.png)

```
public class TicTacToe implements ActionListener {

    private JLabel labels[] = new JLabel[9];
    private JFrame window = new JFrame("Tic Tac Toe");
    private boolean win = false;
    private int count = 0;
    private int Xwins = 0, Owins = 0;
    private String letter = "";
    private int[][] winCombinations = new int[][]{
        {0, 1, 2}, {3, 4, 5}, {6, 7, 8}, //horizontal wins
        {0, 3, 6}, {1, 4, 7}, {2, 5, 8}, //vertical wins
        {0, 4, 8}, {2, 4, 6} //diagonal wins
    };
    String name1 = JOptionPane.showInputDialog("Please enter first player's name");
    String name2 = JOptionPane.showInputDialog("Please enter second player's name");

    public TicTacToe() {
        JOptionPane.showMessageDialog(null, "Remember Player 1 is X and Player 2 is O.");
        window.setSize(300, 300);
        window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        window.setLayout(new GridLayout(3, 3));
        window.setVisible(true);

        MouseHandler handler = new MouseHandler();

        for (int i = 0; i <= 8; i++) {
            labels[i] = new JLabel();
            labels[i].setOpaque(true);
            labels[i].setBorder(new LineBorder(Color.LIGHT_GRAY));
            labels[i].setHorizontalAlignment(JLabel.CENTER);
            window.add(labels[i]);
            labels[i].addMouseListener(handler);
            labels[i].setBackground(Color.MAGENTA);
        }
//        for (JButton button : buttons) {
//            button.setBackground(Color.BLUE);
//        }

    }

    public void actionPerformed(ActionEvent event) {
    }

    public void playAgain() {
        if (letter == "X") {
            Xwins++;
        } else {
            Owins++;
        }
        JOptionPane.showMessageDialog(null, name1 + " has won this many times: " + Xwins);
        JOptionPane.showMessageDialog(null, name2 + " has won this many times: " + Owins);
        int response = JOptionPane.showConfirmDialog(null, "Would you like to play again?", "Confirm", JOptionPane.YES_NO_OPTION, JOptionPane.QUESTION_MESSAGE);

        if (response == JOptionPane.YES_OPTION) {
            reset();
        } else {
            System.exit(0);
        }
    }

    public void reset() {
        for (int i = 0; i <= 8; i++) {
            labels[i].setText("");
            labels[i].setEnabled(true);
        }
        win = false;
        count = 0;
    }

    public class MouseHandler extends MouseAdapter {

        @Override
        public void mouseClicked(MouseEvent event) {
            count++;
            if (count % 2 == 0) {
                letter = "O";

            } else {
                letter = "X";
            }
            JLabel pressedLabel = (JLabel) event.getSource();
            pressedLabel.setText(letter);
            pressedLabel.setEnabled(false);
            pressedLabel.setBackground(Color.WHITE);

            //Determine who won
            for (int i = 0; i <= 7; i++) {
                if (labels[winCombinations[i][0]].getText().equals(labels[winCombinations[i][1]].getText())
                                && labels[winCombinations[i][1]].getText().equals(labels[winCombinations[i][2]].getText())
                                && labels[winCombinations[i][0]].getText() != "") {
                    win = true;
                }
            }
            if (win == true) {
                if (letter == "X") {
                    JOptionPane.showMessageDialog(null, name1 + " wins the game!");
                } else {
                    JOptionPane.showMessageDialog(null, name2 + " wins the game!");
                }
                playAgain();
            } else if (count == 9 && win == false) {
                JOptionPane.showMessageDialog(null, "The game is tied!");
                playAgain();
            }
        }
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception ex) {
                }

                TicTacToe play = new TicTacToe();
            }
        });
    }
} 
```

您可能拥有的唯一其他选择是创建一个只能绘制背景颜色的按钮的实现，这需要您扩展 from `AbstractButton`，但老实说，这是很多工作......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T02:17:08.450

`reset`您需要在方法的`for`循环中将按钮颜色重置为蓝色：

```
buttons[i].setBackground(Color.blue); 
```

这是生成的应用程序在我的机器和 Mac OSX 机器上的样子。选择后按钮变为白色：

![在此处输入图像描述](../Images/8d9ee9be554a4a9c85e7ef5f73e37196.png)   ![在此处输入图像描述](../Images/7c1d83943b1f4e97c0eaab77f304696d.png)

如果您使用的是 Mac OSX，您可能还会遇到系统外观问题。您可以`main`像这样在您的方法中更改它：

```
public static void main(String[] args){
   try {
      // Set cross-platform Java L&F (also called "Metal")
      UIManager.setLookAndFeel(UIManager.getCrossPlatformLookAndFeelClassName());
      // alternatively, the following should load the default L&F for your system
      //UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
   } catch (Exception e) {}

   TicTacToe play = new TicTacToe();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T02:51:01.910

@808sound 在正确的轨道上 - 一些标准的外观和感觉（例如 Windows）使更改按钮颜色变得奇怪/困难/困难。

在程序开始时，尝试通过以下方式设置 LAF

```
UIManager.setLookAndFeel(UIManager.getCrossPlatformLookAndFeelClassName()); 
```

[更多细节在这里](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html#programmatic)

# c# - 从 url 加载图像保存为字节

> ID：14116097
> 
> 赞同：4
> 
> 时间：2013-01-02T01:59:49.113
> 
> 标签：c#, image, bytearray, html-agility-pack

我用 HTMLAgilityPack 获得了一张图像，然后我想将其加载为字节，以便将其保存在数据库中。

```
byte[] bIMG = File.ReadAllBytes(doc.DocumentNode.SelectSingleNode("//img[@class='image']").Attributes["src"].Value); 
```

但它说`URI formats are not supported.`我还能怎么做？

编辑：**doc.DocumentNode.SelectSingleNode("//img[@class='image']").Attributes["src"].Value**给出一个链接

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-02T02:02:12.183

该类`System.IO.File`无法读取 Web URI - 您可以为此使用 WebClient：

```
byte[] imageAsByteArray;
using(var webClient = new WebClient())
{
    imageAsByteArray = webClient.DownloadData("uri src");
} 
```

# ruby-on-rails - 更新表格的单元格

> ID：14116098
> 
> 赞同：0
> 
> 时间：2013-01-02T01:59:55.667
> 
> 标签：ruby-on-rails, sql-update

我有这些行`views/admins/index.html.erb`

按下后，我尝试`User`在 role_ids 的单元格中更新我的表格`update`：

如果`worker.role_ids`是 [1]，它将更改为 [2]。如果`worker.role_ids`是 [2]，它将变为 [1]。

```
<td><%= worker.email %></td>
<td><%= worker.role_ids %></td>
<td><%= link_to 'edit', edit_admin_path(worker) %></td> 
```

我可以定义`edit`and `_form`，但是没有优雅的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T03:06:04.057

您可以通过 Ajax 来实现（我认为这就是您要寻找的东西）。您可以调用远程操作，传递对象的 id，并调用方法以更新为相应的值。例如：

看法

```
<%= link_to 'Change Role', change_admin_role_path(worker.id), :remote => true %> 
```

控制器

```
def change_admin_role
   @worker = User.find(params[:id])
   @worker.change_role
end 
```

记得**添加路由**，还要**在 User 模型**中创建方法 change_role 来评估实际值并进行更改，并**创建一个 change_admin_role.js.coffee**（或 change_admin_role.js.erb）来通过视图对视图进行更改阿贾克斯。

# javascript - Javascript OOP - 从原型设置器访问方法

> ID：14116099
> 
> 赞同：1
> 
> 时间：2013-01-02T02:00:11.537
> 
> 标签：javascript, oop

尝试运行以下代码时出现“未定义”错误。它发生就行了`this.xPositionForPageAtIndex(selectedPageNumber)`。当我尝试记录`this`所有实例属性时，除了函数。

```
function Gallery(div) {
    this.count = 5;
    this.pageWidth = 500;
    this.selectedPage = 1;

    this.xPositionForPageAtIndex = function(pageIndex) {
        if (pageIndex < 1 || pageIndex > this.count) {
            return 0.0;
        }

        return (pageIndex - 1) * this.pageWidth;
    }
}

Gallery.prototype = {
    set selectedPage(selectedPageNumber) {
        var page = this.pages[((selectedPageNumber) + 1)];

        if (!page.classList.contains("animate")) {
            page.classList.add("animate");
        }

        if (!page.classList.contains("final")) {
            page.classList.add("final");
        }

        console.log(this);

        this.binder.setAttribute("-webkit-transform", "translateX(" -this.xPositionForPageAtIndex(selectedPageNumber) + "px)");

        this.selectedPage = page;
    }
} 
```

我对 Javascript OOP 有点陌生，但我认为我真的不知道足够多的术语来正确研究这个答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T05:26:07.780

## 连续问题

在你说你遇到麻烦的那一行是减号而不是加号：

```
"translateX(" -this.xPositionForPageAtIndex(selectedPageNumber) 
```

应该

```
"translateX("  + this.xPositionForPageAtIndex(selectedPageNumber) 
```

## 通过将公共方法放在原型中进行优化

此外，放入`xPositionForPageAtIndex`原型可能也是一个好主意，因为它不依赖任何私有字段。任何公共函数（这意味着它不依赖于私有字段）都可以进入原型。这样，您正在创建的对象的每个实例都不会有该函数的副本。

根据您的代码，我认为您不会有足够的`Gallery`实例来解决这个问题，但这是一个很好的做法。

另一方面，如果你的函数依赖于某种私有字段，那意味着它是一个特权函数，它不能进入​​原型。像这样的东西：

```
function Gallery(someParam){
    //this is a private variable
    var hiddenVar = someParam + "bar";

    // this is a privileged method: publicly accessible, but
    // can "see" private variables
    this.showHidden = function() {
        return hiddenVar
    };      
};
var gal = new Gallery("foo");
gal.hiddenVar; // undefined
gal.showHidden(); // "foobar" 
```

## 意外的无限递归

更大的问题是以下行：

```
this.selectedPage = page; 
```

该行在属性的设置器内`selectedPage`。

该行`selectedPage`递归调用自身，并且只能以`RangeError`.

用函数来写它会更清楚一点，所以这就是正在发生的事情：

```
var a = {
    foo: function(param){
        // do some stuff
        this.foo(4);
    }
}; 
```

调用`a.foo(2)`将导致一个`RangeError`.

由于 ES5 设置器的工作方式，它被隐藏了一点。下面是使用 setter 的样子：

```
var a = {
    set foo(){
        // do some stuff
        this.foo = 3;
    }
}; 
```

调用`a.foo = 2` 将导致 a`RangeError`因为 setter 函数被递归调用。

希望那些对你有帮助。如果您还没有查看 Douglas Crockford，请在 YouTube 上观看他。有一些很好的讲座可以帮助你很多。

# c++ - C++11 之前的可变参数模板

> ID：14116104
> 
> 赞同：8
> 
> 时间：2013-01-02T02:01:16.527
> 
> 标签：c++, boost, c++11

Boost 在 C++11 和*Variadic Templates*之前是如何实现 Tuple 的？

换句话说：是否可以通过不使用C++11 中的内置*Variadic Templates*
功能 来实现*Variadic Templates类或函数？*

 ** * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T03:00:54.823

Boost 对元组的大小有限制。与大多数实际场景一样，您不需要超过 10 个元素，您不会介意此限制。作为一个库维护者，我猜想，有了可变参数模板，世界变得简单多了。没有更多的宏黑客...

下面是关于 Boost tuple 的大小限制及其实现的深入讨论： [boost tuple: increase maximum number of elements](https://stackoverflow.com/questions/6425178/boost-tuple-increasing-maximum-number-of-elements)

回答你的第二个问题：不，这是不可能的。至少不是无限数量的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-10T16:16:10.403

作为库开发人员，我见过 2 个用于可变参数模板的常见用例。您可以为两者构建一个解决方法。

案例一：函数对象

std::function<> 和 lambdas 非常好，但即使是 c++11 也只能为您提供一组相当基本的东西，您可以“开箱即用”地使用它们。要在它们之上实现非常酷的东西和实用程序，您需要支持可变参数模板，因为 std::function 可以与任何普通函数签名一起使用。

解决方法：使用 std::bind 的递归调用是您的朋友。它比真正的可变参数模板效率低（并且像完美转发这样的一些技巧可能不起作用），但在移植到 c++11 之前，它对于适度的模板参数 #s 可以正常工作。

案例2：普通班

有时您需要一个普通的类来管理通用 std::function<>s（见上文）或公开像“printf”这样的 API。这里的解决方法归结为细节以及类的每个 API 正在做什么。

仅操作可变参数模板数据但不需要存储它的 API 可以作为递归调用运行。您需要编写它们，以便它们一次“消耗”一个参数，并在它们用完参数时停止。

需要存储可变参数模板数据的 API（包括构造函数）更难——如果类型真的是无限的并且可以是任何东西，那么你就搞砸了。但是，如果它们总是确定性地映射到二进制的原语，你可以做到。只需编写一个“序列化”调用，获取您支持的所有类型，然后使用它将整个集合序列化到二进制缓冲区中，并构建一个用于获取和设置它们的“类型信息”数据向量。在可用的特殊情况下，就内存和性能而言，它实际上是比 std::tuple 更好的解决方案。

这是“序列化元组”技巧：

```
// MemoryBuffer: A basic byte buffer w/ its size
class MemoryBuffer {
private:
   void* buffer;
   int   size;
   int   currentSeekPt;

protected:
   void  ResizeBuffer() {
      int   newSz  = size << 1; // Multiply by 2
      void* newBuf = calloc( newSz, 1); // Make sure it is zeroed
      memcpy( newBuf, buffer, target->size);
      free( buffer);

      size = newSz; 
      buffer = newBuf;
   }

 public:
    MemoryBuffer(int initSize) 
       : buffer(0), size(initSize), currentSeekPt(0)
    {
       buffer = calloc( size, 1);
    }
   ~MemoryBuffer() {
      if(buffer) {
         free( buffer);
      }
    }

    // Add data to buffer
    bool AddData(const void* data, int dataSz) {
        if(!data || !dataSz) return false;

        if(dataSz + currentSeekPt > size) { // resize to hold data
            ResizeBuffer();
        }
        memcpy( buffer, data, dataSz);
        return true;
    }

    void* GetDataPtr() const { return buffer; }
    int   GetSeekOffset() const { return currentSeekPt; }
    int   GetTotalSize() const { return size; }
};

struct BinaryTypeInfo {
   std::type_info type;     // RTTI type_info struct. You can use an "enum"
                            // instead- code will be faster, but harder to maintain.   
   ui64      bufferOffset;  // Lets me "jump" into the buffer to 
}

// Versions of "Serialize" for all 'tuple' data types I support
template<typename BASIC>
bool Serialize(BASIC data, MemoryBuffer* target,
              std::vector<BinaryTypeInfo>& types)
{
    // Handle boneheads
    if(!target) return false;

    // Setup our type info structure
    BinaryTypeInfo info;
    info.type = typeid(data);
    info.bufferOffset = target->GetSeekOffset();

    int binarySz = sizeof(data);
    void* binaryVersion = malloc( binarySz);
    if(!binaryVersion) return false;

    memcpy( binaryVersion, &data, binarySz); // Data type must support this
    if(!target->AddData( binaryVersion, binarySz)) {
        free( binaryVersion);
        return false;
    }
    free( binaryVersion);

    // Populate type vector     
    types.push_back( info);
    return true;
} 
```

这只是一个快速而肮脏的版本；你会更好地隐藏真实的东西，并可能将这些碎片组合成 1 个可重复使用的类。请注意，如果您希望处理 std::string 和更复杂的类型，则需要特殊版本的 Serialize()。*

# java - 将 AudioInputStream 与 ProgressMonitorInputStream 一起使用

> ID：14116105
> 
> 赞同：0
> 
> 时间：2013-01-02T02:01:19.830
> 
> 标签：java, inputstream, ioexception, javasound, progressmonitor

**修订/总结：**

我正在使用插件来解码 MP3 音频文件。我想提供一个`ProgressMonitor`向用户提供反馈。构造一个解码MP3格式AudioFile的AudioInputStream的逻辑如下：

```
readAudioFile(File pAudioFile) throws UnsupportedAuioFileException, IOException {
    AudioInputStream nativeFormatStream = AudioSystem.getAudioInputStream(pAudioFile);
    AudioInputStream desiredFormatStream = AudioSystem.getAudioInputStream(AUDIO_OUTPUT_FORMAT,nativeFormatStream);
    int bytesRead, bufferLength;
    byte[] rawAudioBuffer[bufferLength=4096];
    bytesRead=desiredFormatStream.read(rawAudioBuffer,0,bufferLength));
   ...
} 
```

第一次尝试是用 ProgressMontorInputStream 包装音频文件，然后从中获取 AudioInputStream：

```
readAudioFile(File pAudioFile) throws UnsupportedAuioFileException, IOException {
    ProgressMonitorInputStream monitorStream = new ProgressMonitorInputStream(COMP,"Decoding",new FileInputStream(pAudioFile);
    AudioInputStream nativeFormatStream = AudioSystem.getAudioInputStream(monitorStream);
    AudioInputStream desiredFormatStream = AudioSystem.getAudioInputStream(AUDIO_OUTPUT_FORMAT,nativeFormatStream);
    int bytesRead, bufferLength;
    byte[] rawAudioBuffer[bufferLength=4096];
    bytesRead=desiredFormatStream.read(rawAudioBuffer,0,bufferLength));
   ...
} 
```

在构建时，在执行时，我在构建`AudioInputStream`from时得到以下信息`ProgressMonitorInputStream`：

```
java.io.IOException: mark/reset not supported 
```

下面的评论确认 AudioInputStream 需要它包装的 InputStream 来支持 mark() 和 reset() 方法，而 ProgressMonitorInputStream 显然不支持。

下面的另一个建议是用 BufferedInputStream 包装 ProgressMonitorInputStream（它支持标记/重置）。那么我有：

```
readAudioFile(File pAudioFile) throws UnsupportedAuioFileException, IOException {
    ProgressMonitorInputStream monitorStream = new ProgressMonitorInputStream(COMP,"Decoding",new FileInputStream(pAudioFile);
    AudioInputStream nativeFormatStream = AudioSystem.getAudioInputStream(new BufferedInputStream(monitorStream));
    AudioInputStream desiredFormatStream = AudioSystem.getAudioInputStream(AUDIO_OUTPUT_FORMAT,nativeFormatStream);
    int bytesRead, bufferLength;
    byte[] rawAudioBuffer[bufferLength=4096];
    bytesRead=desiredFormatStream.read(rawAudioBuffer,0,bufferLength));
   ...
} 
```

现在这个构建和执行没有错误。然而，ProgressMonitor 从未出现，尽管 setMillisToPopup(10) 和 setMillisToDecideToPopup(10); 我的理论是，将未解码的音频实际读入内存的时间仍然快于 10 毫秒。时间实际上是在从磁盘读取后解码原始音频。所以下一步就是在构造解码的AudioInputStream之前用ProgressMonitorInputStream包装未解码的AudioInputStream：

```
readAudioFile(File pAudioFile) throws UnsupportedAuioFileException, IOException {
    AudioInputStream nativeFormatStream = AudioSystem.getAudioInputStream(pAudioFile);
    AudioInputStream desiredFormatStream = AudioSystem.getAudioInputStream(AUDIO_OUTPUT_FORMAT,new BufferedInputStream(new ProgressMonitorInputStream(COMP,"Decoding",nativeFormatStream);
    int bytesRead, bufferLength;
    byte[] rawAudioBuffer[bufferLength=4096];
    bytesRead=desiredFormatStream.read(rawAudioBuffer,0,bufferLength));
   ...
} 
```

我似乎在踢罐头，但没有取得进展。这个问题有什么解决方法吗？是否有另一种方法来提供`ProgressMonitor`解码过程？我的（不满意的）后备是显示一个忙碌的光标。对实现目标的其他方法有什么建议 - 向用户提供视觉反馈，至少估计完成解码的剩余时间？

# c - 如何在 gcc 中清除屏幕？

> ID：14116109
> 
> 赞同：2
> 
> 时间：2013-01-02T02:01:35.947
> 
> 标签：c, codeblocks

我正在为我的 C 使用代码块和 gcc，因为我是初学者我如何清除屏幕功能

```
clrscr(); 
```

不管用

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T02:02:45.977

以下应该适用于大多数系统：

```
system("clear"); 
```

或者

```
 system("tput clear"); 
```

# apache - 使用 .htaccess 从目录加载内容

> ID：14116119
> 
> 赞同：1
> 
> 时间：2013-01-02T02:03:26.103
> 
> 标签：apache, .htaccess, configuration

假设我们有`domain.com`, 并且`test.domain.com`作为子域。> Apache 的 Document Root 是`/var/www`.

test.domain.com 的主文件夹位于`/home/user/domain.com/test`，默认情况下来自主机。

我想从 dir 加载内容`/usr/local/www/domain.com/test`。

我正在尝试（不成功）使用 .htaccess 文件。那可能吗？

我可以从另一个目录文件夹加载内容吗？
我在共享主机上，我无权访问 Apache 的配置文件。

# ruby-on-rails - 在 Rails 中通过其 belongs_to 关系查询记录

> ID：14116122
> 
> 赞同：26
> 
> 时间：2013-01-02T02:03:59.510
> 
> 标签：ruby-on-rails, ruby, activerecord, relation

我有一个活动模型，它们属于一个位置

如何选择 location.country = 澳大利亚的所有活动？（例如）

我可以在一个范围内这样做吗？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2015-10-21T18:25:26.087

使用最新的 Rails 版本，您可以：

```
Activity.joins(:location).where(locations: { country: "Australia" }) 
```

谨防：

*   它是位置（**单数**），`joins(:location)`因为它引用了`belongs_to` **关系名称**
*   它是位置（**复数**），`where(…)`因为它引用了**表名**

后者意味着如果您有以下情况：

```
belongs_to :location, class_name: "PublicLocation" 
```

查询将是：

```
 Activity.joins(:location).where(public_locations: { country: "Australia" }) 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-01-02T02:37:07.377

您正在谈论的查询类型是联接。您可以在控制台中尝试这样的查询，例如：

```
Activity.joins(:locations).where('locations.country = "Australia"') 
```

这意味着 SQL 将获取与 then 相关联的所有活动和位置，找到 country=Australia 的位置，然后返回与这些位置相关联的活动。

要使其成为更可重用的范围，请在您的模型上使用国家/地区变量定义它：

```
scope :in_country, lambda {|country| joins(:locations).where('locations.country = ?',country)} 
```

[您可以在API 文档](http://guides.rubyonrails.org/active_record_querying.html#scopes)中了解更多信息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-02T02:27:40.467

是的，可以使用范围。像这样的东西应该适用于活动模型：

```
scope :down_under, 
    joins(:locations).
    where("locations.country = 'Australia') 
```

# regex - 如何只允许 .htaccess 正则表达式中的某些单词？

> ID：14116124
> 
> 赞同：0
> 
> 时间：2013-01-02T02:04:10.507
> 
> 标签：regex, .htaccess

例如，我可以在我的域 ( )`.htaccess`的基目录中编写以下规则：`/`

```
RewriteRule ^something/[bd]on$ foo.php [L] 
```

如果我的域是，它将与以下 URL 匹配`www.example.com`：

```
http://www.example.com/something/bon
http://www.example.com/something/don 
```

对？但是我怎么把词放在那里匹配呢？例如，`apple`and `cheese`，因此它只匹配：

```
http://www.example.com/something/apple
http://www.example.com/something/cheese 
```

请注意，在 之后我有大约 40 种不同的可能性`something/`，所以请为我提供一个`.htaccess`可以适应这种情况的规则。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T02:12:28.370

40 个单词听起来很长，但 AFAIK，使正则表达式模式匹配一​​组选项的唯一方法是将它们明确地写在括号中，用管道`|`字符分隔。

所以我认为`RewriteRule ^something/(word1|word2|word3)$ foo.php [L]`应该为你工作。

**编辑：**

我忘了提。要缩短列表，您可以对单词使用字符组/范围和条件（例如`colou?r`or `gr[ae]y`），但这会让您稍后需要编辑时看起来很混乱。

# ffmpeg - 显示 UDP(RGB) 输入到 ffmpeg 或 vlc

> ID：14116127
> 
> 赞同：0
> 
> 时间：2013-01-02T02:04:29.410
> 
> 标签：ffmpeg, udp, rgb, vlc

我从本地端口接收仅包含 RGB 有效负载（视频流）的 UDP 数据包。

如何使用 ffmpeg 或 vlc 显示 RGB？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-16T08:57:05.027

我希望这些帮助，即使他们没有直接回答你的问题。它们给出了使用 ffmpeg 和 gstreamer 处理原始 rgb 数据所需的命令行选项的指针。

1.  我曾经需要从连接到另一台计算机的网络摄像头接收 rgb 帧。

2.  无法使用 UDP，因为没有成帧，数据包被丢弃，帧变得不完整，行不同步。因此 TCP（使用 UDP 是一个问题或更改命令中的那个词）。

与 ffmpeg、gstreamer、mencoder、mplayer 和 vlc 的斗争产生了以下解决方案。

*“建筑学”：*

[LINUX V4L2 网络摄像头捕获] -> [THEORA 视频压缩] -> [RTP 流@端口 1233] -> [接收主机] -> [THEORA 视频解压缩] -> [RAW RGB/8BPP 到本地主机@端口 1234]

*命令行：*

```
# VIDEO STREAM SENDING SIDE
vlc -vvv -I dummy --udp-caching=0 --sout-mux-caching=0 --no-audio \
  v4l2:///dev/video0:width=640:height=480:caching=200:fps=10/1 :v4l2-caching=0 \
  ':sout=#transcode{vcodec=mp2v,vb=3000,acodec=none}: \
    rtp{mux=ts,dst=destinationhost,port=1233,caching=0}'

# VIDEO STREAM RECEIVING/FORWARDING TO TCP / ffmpeg
ffmpeg -i rtp://0.0.0.0?localport=1233 \
  -f rawvideo -pix_fmt rgb24 -vcodec rawvideo tcp://127.0.0.1:1234 
```

或者，一个命令来完成它们（使用 gstreamer）：

```
# CAPTURE WEBCAM->FORWARD RGB GRAYSCALE TO TCP / gstreamer
gst-launch-0.10 v4l2src device=/dev/video0 ! ffmpegcolorspace \
  ! video/x-raw-gray, width=320, height=240, 'framerate=(fraction)30/1' \
  ! tcpclientsink host=localhost port=1234 
```

# java - OpenGL着色器不工作？

> ID：14116134
> 
> 赞同：1
> 
> 时间：2013-01-02T02:06:33.097
> 
> 标签：java, opengl, shader, lwjgl

我使用 LWJGL 在 Java 中创建了一个类，它导入着色器并启用和禁用它们，因此当它们被启用时，我会得到一些很酷的效果。问题是每次我初始化我的类时它都会崩溃，这显然是由于“glCreateProgram”函数造成的。

```
public class Shader {
private int Shader;
private int VShader;
private int FShader;

public void InitShader() throws IOException, Exception
{
    Shader = glCreateProgram(); //This is where the exception is thrown.
    VShader = glCreateShader(GL_VERTEX_SHADER);
    FShader = glCreateShader(GL_FRAGMENT_SHADER);
    StringBuilder VSHADER_SOURCE = new StringBuilder();
    StringBuilder FSHADER_SOURCE = new StringBuilder();
        BufferedReader reader1 = new BufferedReader(new FileReader("shader.vert"));
        String text1;
        while ((text1 = reader1.readLine()) != null)
        {
            VSHADER_SOURCE.append(text1).append("\n");
        }
        reader1.close();
        BufferedReader reader2 = new BufferedReader(new FileReader("shader.frag"));
        String text2;
        while ((text2 = reader2.readLine()) != null)
        {
            FSHADER_SOURCE.append(text2).append("\n");
        }
        reader2.close();
    glShaderSource(VShader, VSHADER_SOURCE);
    glCompileShader(VShader);
    if (glGetShader(VShader, GL_COMPILE_STATUS) == GL_FALSE)
        throw new Exception();
    glShaderSource(FShader, FSHADER_SOURCE);
    glCompileShader(FShader);
    if (glGetShader(FShader, GL_COMPILE_STATUS) == GL_FALSE)
        throw new Exception();
    glLinkProgram(Shader);
    glValidateProgram(Shader);

}

public void EnableShader()
{
    glUseProgram(Shader);
}

public void DisableShader()
{
    glUseProgram(0);
}
} 
```

它奏效了，他们随机地停在我身上。你能弄清楚发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:55:30.670

在任何地方创建包含此方法的类：

```
public static final void check(String errorMessage) {
int errorValue = GL11.glGetError();

if (errorValue != GL11.GL_NO_ERROR) {
String errorString = GLU.gluErrorString(errorValue);
System.err.println("ERROR - " + errorMessage + ": " + errorString);

if (Display.isCreated()) Display.destroy();
System.exit(-1);
}
} 
```

并放在`YourClassName.check("things that just happened few lines above - just to know where you should seek for errors")`每个设置方法的末尾，甚至更频繁。

您得到的错误意味着您破坏了着色器程序中的某些内容并且它们无法正确编译，因此您的 java 代码应该没问题。如果您发布着色器代码，也许我可以提供更多帮助。

# wordpress - 如何在 Wordpress 的自定义帖子类型菜单中包含“当前菜单祖先”类？

> ID：14116149
> 
> 赞同：0
> 
> 时间：2013-01-02T02:09:21.847
> 
> 标签：wordpress

我需要 Wordpress 菜单包含“current-menu-ancestor”类以反映该站点当前位于配方部分。假设我有一个食谱自定义帖子类型。我的functions.php中有以下代码，但它不起作用：

```
function add_active_item_classes($classes = array(), $menu_item = false){

if ( get_post_type() == 'recipe' && $menu_item->title == 'Recipes') {
$classes[] = 'current-menu-ancestor';

return $menuclasses;
}
} 
```

另外我不知道我将使用什么过滤器挂钩来产生这种效果？感谢您的建议和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:56:42.920

我在这里有完整的答案：[https ://wordpress.stackexchange.com/questions/77931/how-to-include-the-current-menu-ancestor-class-on-a-custom-post-type-menu-in -w/78302#78302](https://wordpress.stackexchange.com/questions/77931/how-to-include-the-current-menu-ancestor-class-on-a-custom-post-type-menu-in-w/78302#78302)

变量存在问题，这就是它无法正常工作的原因。希望这对任何寻找类似解决方案的人都有帮助。

# php - 关于使用 php 循环多个 FTP 连接的建议

> ID：14116151
> 
> 赞同：0
> 
> 时间：2013-01-02T02:09:37.263
> 
> 标签：php

我正在寻找一些关于其他开发人员如何完成相同任务的建议。本质上，我试图做的是遍历数据库中的行以连接到多个 FTP 帐户 preg_match，然后将文件彼此分开输出。以下是工作流程的示例：

```
pull connection 1
login to FTP
check preg_match against all files listed
list matching files
disconnect
...
pull connection 2
login to FTP
check preg_match against all files listed
list matching files
disconnect
...
repeat 
```

最终结果将是我创建一个表格，结果彼此分开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T02:18:27.933

我认为这里最大的挑战将是延迟时间。我会寻找一种解决方案，它不会在有人等待网页加载或其他输出时尝试实时执行所有操作。如果可能的话，我会在远程服务器上构建一些 API，这样我就不必执行原始 FTP 请求，而是可以查询远程服务器上确定的匹配结果。但是，如果需要，我会使用 PHP 的 cURL 工具在它自己的 cron 驱动的脚本中独立地连接到每个外部服务器，所有输出都存储到中央数据库中。然后可以独立于获取/匹配查询本地数据库所需的最终输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T02:33:45.743

如果要建立许多 FTP 连接并且如果考虑性能，那么您将希望以并行方式而不是串行方式建立连接。为此，生成完成工作的子进程，将其结果保存到数据库中，而父进程等待创建足够的结果，然后再从数据库中获取结果并输出它们。

# php - 如何使用 php 触发站点语言更改？

> ID：14116153
> 
> 赞同：8
> 
> 时间：2013-01-02T02:09:47.230
> 
> 标签：php

我正在制作一个网站，只使用 PHP 作为后端（无框架），它应该有 3 种语言版本。站点结构（表/div）可能不太常见。它倾向于模拟某种 Ajax 行为。我在正文中包含一个文件 (selector.php)，它通过导航链接传递的 _GET() 处理它的内容。这意味着，该站点实际上从未离开 index.php。语言是链接（标志）。

现在，我确实成功地实现了 3 种语言（数组/会话/cookie），并且确实有效。但是，我需要的是能够使语言选择保持/刷新与调用它的页面相同的页面。在这里它变得很棘手，因为我只使用一个页面，每个包含/后续包含（30+）都是从 index.php 调用的，所以使用`header ('Location: ...')`似乎不是一个选择。我知道如何检索我当前的地址，包括 GET 参数，所以我可以使用它。但是怎么做？在代码的开头阅读它，然后在语言模块中重新阅读在任何给定点都匹配。有一个会话，所以我也可以使用会话变量，但是为内容制作 35+ 个变量（所以 url 更改）并一直匹配它们，似乎不是正确的方法。在哪里，更准确地说如何捕捉语言更改，以及如何刷新/重定向到“同一页面”以使更改生效？这可能是一个设计流程。

注意 1：使用**mod_rewrite**我重定向了我的语言查询，所以现在不是`mysite.com/index.php?lang=en`，而是形式，`mysite.com/en/index.php`所以我可以使用更友好的链接来调用正文内容。
注意 2：上周我在这里阅读/搜索 Google 引导的任何地方，尝试了无数次不同的方法，但都没有按预期工作（也许是概念流程？！）。
注意 3：由于这是针对明确要求完全不使用 Java 的客户，请不要提供 Ajax/jQuery/Java 解决方案（有了这些，我会知道该怎么做）。
注意 4：整个代码比较大，无法粘贴在这里，所以如果您需要查看不同的部分，请命名它们，我将编辑我的问题。
注5：我仍然保持自己作为初学者，所以请多多包涵。

提前致谢。

所以语言选择器看起来像这样：

```
 session_start();
    header('Cache-control: private'); // IE 6 FIX
    if(isSet($_GET['lang'])) {
        $lang = $_GET['lang'];
        $_SESSION['lang'] = $lang;
        setcookie("lang", $lang, time() + (3600 * 24 * 30)); }
    else if(isSet($_SESSION['lang'])) {
        $lang = $_SESSION['lang']; }
    else if(isSet($_COOKIE['lang'])) {
        $lang = $_COOKIE['lang']; }
    else {
        $lang = 'ro'; }

    switch ($lang) {
    case 'en': $lang_file = 'lang.en.php'; break;
    case 'it': $lang_file = 'lang.it.php'; break;
    case 'ro': $lang_file = 'lang.ro.php'; break;
    default: $lang_file = 'lang.ro.php'; break; }

    include_once 'languages/'.$lang_file; 
```

然后选择器...

```
 function isValidPage($cont) {
     $validpages = array("history","mission","etc");
     if(in_array($cont,$validpages) && file_exists(ltrim($cont,'/') . '.php')) {
          return TRUE; } 
    else {
          return FALSE; }
    }

    if(isset($_GET['cont']) && isValidPage($_GET['cont'])) {
        @include($_GET['cont'] . '.php'); } 
    else {
        @include('sub_index.php'); } 
```

我开始我的 index.php：

```
 <?php include_once 'lang_sel.php'; ?> 
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>mysite</title>
    <link rel="stylesheet" href="style/css.css" type="text/css" />   

</head>
<body>
    <div class="parent">
        <div class="left"><?php include("main/left_main.php"); ?></div>
        <div class="right">
            <div class="topmain"><?php include("main/top_main.php"); ?></div>
            <div class="dummyx"></div> <!-- dummy div for adjusting starting position -->
            <div class="rightall">
                <?php include("main/top_nav.php"); ?>
                <?php /*include("main/top_rotator.php"); */?>
                <table width="780" border="0" cellpadding="10px" cellspacing="0" bgcolor="transparent" id="middle"><?php include ('selector.php'); ?></table> <!-- container for the main content -->
            </div>       
            <div class="footer">
                <?php include("main/bottom.php"); ?>
                <?php include("main/footer.php"); ?>
            </div>
        </div>
        <div class="clr"></div> <!-- clearing div attributes -->
    </div> 
```

然后左侧包含标志：

```
<tr>
    <td width="30">&nbsp;  </td>
    <td width="63" align="center" valign="middle"><span class="lang"><a href="<?=WEBROOT?>ro/index.php" title="Romana"><img src="images/flags_ro.jpg" alt="ro" name="Romana" width="35" height="40" /></a></span></td>
    <td width="63" align="center" valign="middle"><span class="lang"><a href="<?=WEBROOT?>en/index.php" title="English"><img src="images/flags_en.jpg" alt="en" name="English" width="35" height="40" /></a></span></td>
    <td width="63" align="center" valign="middle"><span class="lang"><a href="<?=WEBROOT?>it/index.php" title="Italiano"><img src="images/flags_it.jpg" alt="it" name="Italiano" width="35" height="40" /></a></span></td>
    <td width="30">&nbsp;  </td>
</tr> 
```

还有菜单，它是一堆列表，例如：

```
 <ul class="menu">   
            <li><a href="index.php?cont=history" style="background:none"><?php echo $lang['MENU_HISTORY']; ?></a><!--<div><span>if you want to add 'sub-content' put it here</span></div>!--></li>
            <li><a href="index.php?cont=mission" style="background:none"><?php echo $lang['MENU_MISSION']; ?></a></li>
            <li><a href="index.php?cont=p_systems" style="background:none"><?php echo $lang['MENU_P_SYSTEM']; ?></a></li>
            <li><a href="index.php?cont=s_dist" style="background:none"><?php echo $lang['MENU_S_DIST']; ?></a></li>
        </ul> 
```

内容很简单，文字和图片。所以上面的主要代码...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T02:44:20.643

看看这对您的需求是否有意义。 [http://www.experts-exchange.com/Web_Development/Web_Languages-Standards/PHP/A_8910-A-Polyglot-Web-Site-in-PHP.html](http://www.experts-exchange.com/Web_Development/Web_Languages-Standards/PHP/A_8910-A-Polyglot-Web-Site-in-PHP.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:53:01.203

经过 1 万亿次尝试/错误，我终于成功了！也许这不是最优雅的解决方案（即 spartan），但它确实有效。关键是读取当前**URL**，将其分解以获取带有参数的当前页面，然后将其放入标志的 href 中。

所以在 index.php 的开头我放了：

```
<?php 
    $url = $_SERVER['REQUEST_URI']; 
    $pieces = explode("/", $url); 
?> 
```

然后我的标志的链接变成了：

```
<a href="<?=WEBROOT . 'en/' . $pieces[3]?>" title="English"> 
```

`WEBROOT`我的基本网址和文件夹在哪里，并且`$pieces[3]`始终是我的当前页面（即。。`index.php?cont=history`这样我总是登陆当前页面，并且相应地更改了语言。

注意：就我而言。第三部分包含当前页面。如果其他人使用此技术，请务必检查。另外，我一直只使用 1 个参数，所以请记住这一点（实际上并不重要）。

如果其他人知道更好的解决方案，我会持开放态度。谢谢大家。

# django - django 提供静态 css 文件

> ID：14116157
> 
> 赞同：0
> 
> 时间：2013-01-02T02:09:54.270
> 
> 标签：django, django-templates

我对 Django 开发比较陌生。我在 /static/css 目录中有一个 css 文件。

当我尝试运行 url 时，没有 CSS 应用于我的模板。python manage.py runserver 窗口显示以下错误

[01/Jan/2013 20:00:40]“GET /home/prat/PROJECT_ROOT/SOURCE_ROOT/static/css/Style.css HTTP/1.1”404 2207

有人可以指点我如何调试它。我已经阅读了多个 stackoverflow 问题，并在我的 settings.py 中添加了以下设置。

```
PROJECT_R = os.path.abspath(os.path.dirname(__name__))
PROJEECT_R = PROJECT_R + "../"
STATIC_ROOT = os.path.join(PROJECT_R, "static")
STATIC_URL = 'static/'

.
├── manage.py
├── README
├── SOURCE_ROOT
│   ├── __init__.py
│   ├── __init__.pyc
│   ├── settings.py
│   ├── settings.pyc
│   ├── urls.py
│   ├── urls.pyc
│   ├── wsgi.py
│   └── wsgi.pyc
├── static
│   ├── css
│   │   ├── README
│   │   └── Style.css
│   ├── images
│   │   └── README
│   └── js
│       └── README
├── template
│   ├── base.html 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T02:17:53.247

以下是我通常如何管理动态项目根目录：

```
from os.path import dirname, realpath, join
PROJECT_ROOT = dirname(realpath(__file__)) 
```

然后再往下，静态根：

```
STATIC_ROOT = join(PROJECT_ROOT, 'static/') 
```

然后你像这样引用静态文件：

```
{{ STATIC_URL }}css/Style.css 
```

编辑：

有关更多信息，请参阅[文档](https://docs.djangoproject.com/en/dev/howto/static-files/)。

# java - 相机旋转计算？

> ID：14116158
> 
> 赞同：0
> 
> 时间：2013-01-02T02:10:30.817
> 
> 标签：java, opengl-es, camera, rotation

我想在世界空间中翻译相机。它没有像我预期的那样移动。我的算法是

1.  首先我在视图空间中翻译相机。相机始终位于 (0,0,0) 中。在我计算出视图空间中的新相机位置点之后。然后我将这些点与逆视图矩阵相乘，所以我想我会得到世界空间中的相机位置。

2.  其次，我计算新的视图矩阵然后我使用 OpenGL 的 setLookAtM 函数计算视图矩阵。并设置新的视图矩阵。

但我的问题是它的新位置无法计算。它的值为 NAN

这是我的代码。

```
private void pivotRotation(double angle,int[] pivot, double distance){
    float[] temp = new float[4];
    float[] temp2 = new float[4];

    float[] extObj = new float[16];     
    float[] startPointsOnViewSpace = new float[4];
    float[] newEyeOrigin = new float[4];
    float[] newLookOrigin = new float[4];

    int[] viewport = new int[16];

    viewport[0] = 0;
    viewport[1] = 0;
    viewport[2] = (int)myRenderer.screenWidth;
    viewport[3] = (int)myRenderer.screenHeight;

    int[] newEye = new int[2];
    newEye[0] = (int)((pivot[0] + ((viewport[2]/2) - pivot[0]) * Math.cos(angle)  - ((viewport[3]/2) - pivot[1]) * Math.sin(angle)));
    newEye[1] = (int)((pivot[1] + ((viewport[2]/2) - pivot[0]) * Math.sin(angle)  + ((viewport[3]/2) - pivot[1]) * Math.cos(angle)));

    GLU.gluUnProject((float)newEye[0], (float)(viewport[3] - newEye[1]), 0.0f, myRenderer.modelViewMatrix, 0, myRenderer.projectionMatrix, 0, viewport, 0, extObj, 0);
    Matrix.multiplyMV(startPointsOnViewSpace, 0, myRenderer.modelViewMatrix, 0, extObj, 0);
            // new camera location in viewspace
    startPointsOnViewSpace[0] /= startPointsOnViewSpace[3]; 
    startPointsOnViewSpace[1] /= startPointsOnViewSpace[3];
    startPointsOnViewSpace[2] /= startPointsOnViewSpace[3];

    newEyeOrigin[0] = startPointsOnViewSpace[0];   
    newEyeOrigin[1] = startPointsOnViewSpace[1];
    newEyeOrigin[2] += distance / pinchParameter;
    newEyeOrigin[3] = 1.0f;

    newLookOrigin[0] = newEyeOrigin[0]; 
    newLookOrigin[1] = newEyeOrigin[1];
    newLookOrigin[2] = newEyeOrigin[2] - 1.0f;
    newLookOrigin[3] = 1.0f;
    // temp[0], temp[1], temp[2] are new camera location in the world space. i think
    Matrix.multiplyMV(temp, 0, myRenderer.inverseViewMatrix, 0, newEyeOrigin, 0);
    Matrix.multiplyMV(temp2, 0, myRenderer.inverseViewMatrix, 0, newLookOrigin, 0);
    for(int i = 0; i < 3; i++){
        myRenderer.eyeLocation[i] = temp[i];
        myRenderer.lookPosition[i] = temp2[i];
    }

    myRenderer.eyeSettings(); 
```

# ruby-on-rails - Rails：在 Heroku 上使用 FFMPEG 转换视频时出现编码器错误

> ID：14116160
> 
> 赞同：1
> 
> 时间：2013-01-02T02:11:19.710
> 
> 标签：ruby-on-rails, heroku, ffmpeg

我正在尝试上传视频并将文件转换为 mp4 并使用`paperclip-ffmpeg`和`paperclip`gems 减小文件大小。运行本地服务器一切正常，我只在heroku上遇到这个问题。我在 vendor/ffmpeg/ 中安装了 ffmpeg（我按照以下步骤操作：[https](https://gist.github.com/3963576) ://gist.github.com/3963576 ）。这是我得到的代码和我得到的错误：

模型/视频.rb：

```
class Video < ActiveRecord::Base
  attr_accessible :content, :user_id, :video
  has_attached_file :video , :styles => { 
    :medium => { :geometry => "500x500", :format => 'mp4',
        :convert_options => { :output => { :vcodec => 'libx264',
        :b => '1000k', :bt => '200k',
        :acodec => 'libfaac', :ab => '56k', :ac => 2 } } }
  }, :processors => [:ffmpeg]

  belongs_to :user
end 
```

当我运行时`heroku logs`：

```
2013-01-02T00:38:20+00:00 app[web.1]: Started POST "/videos" for 101.170.255.251 at 2013-01-02 00:38:20 +0000
2013-01-02T00:38:20+00:00 app[web.1]: Processing by VideosController#create as HTML
2013-01-02T00:38:20+00:00 app[web.1]:   Parameters: {"utf8"=>"✓", "authenticity_token"=>"X0IKts46TF8aFvEb1I/szFo/28omlVBXIIyJ3APz3YA=", "video"=>{"content"=>"", "video"=>#<ActionDispatch::Http::UploadedFile:0x00000004ac88a8 @original_filename="sample.mov", @content_type="video/quicktime", @headers="Content-Disposition: form-data; name=\"video[video]\"; filename=\"sample.mov\"\r\nContent-Type: video/quicktime\r\n", @tempfile=#<File:/tmp/RackMultipart20130102-2-1ch9zcp>>}, "commit"=>"Post"}
2013-01-02T00:38:20+00:00 app[web.1]: [paperclip] [ffmpeg] ffmpeg -i "/tmp/sample20130102-2-4j5sgh.mov" 2>&1
2013-01-02T00:38:20+00:00 app[web.1]: [paperclip] [ffmpeg] Resize
2013-01-02T00:38:20+00:00 app[web.1]: [paperclip] [ffmpeg] Command Success
2013-01-02T00:38:20+00:00 app[web.1]: [paperclip] [ffmpeg] Making...
2013-01-02T00:38:20+00:00 app[web.1]: [paperclip] [ffmpeg] Building Destination File: 'sample20130102-2-4j5sgh' + 'mp4'
2013-01-02T00:38:20+00:00 app[web.1]: [paperclip] [ffmpeg] Destination File Built
2013-01-02T00:38:20+00:00 app[web.1]: [paperclip] [ffmpeg] Adding Source
2013-01-02T00:38:20+00:00 app[web.1]: [paperclip] [ffmpeg] Adding Geometry
2013-01-02T00:38:20+00:00 app[web.1]: [paperclip] [ffmpeg] Convert Options: 500x280
2013-01-02T00:38:20+00:00 app[web.1]: [paperclip] [ffmpeg] Adding Format
2013-01-02T00:38:20+00:00 app[web.1]: [paperclip] [ffmpeg] -i :source -y -vcodec libx264 -b 1000k -bt 200k -acodec libfaac -ab 56k -ac 2 -s 500x280 :dest
2013-01-02T00:38:20+00:00 app[web.1]: [paperclip] [ffmpeg] Extracting Target Dimensions
2013-01-02T00:38:20+00:00 app[web.1]: [paperclip] [ffmpeg] Building Parameters
2013-01-02T00:38:20+00:00 app[web.1]: [paperclip] [ffmpeg] Target Size is Available
2013-01-02T00:38:20+00:00 app[web.1]: [paperclip] [ffmpeg] Keeping Aspect Ratio
2013-01-02T00:38:20+00:00 app[web.1]: Command :: ffmpeg -i '/tmp/sample20130102-2-4j5sgh.mov' -y -vcodec libx264 -b 1000k -bt 200k -acodec libfaac -ab 56k -ac 2 -s 500x280 '/tmp/sample20130102-2-4j5sgh20130102-2-1mr35ix.mp4'
2013-01-02T00:38:20+00:00 app[web.1]: ffmpeg version git-2013-01-01-d079d1d Copyright (c) 2000-2012 the FFmpeg developers
2013-01-02T00:38:20+00:00 app[web.1]:   built on Jan  1 2013 12:59:49 with gcc 4.4.3 (Ubuntu 4.4.3-4ubuntu5)
2013-01-02T00:38:20+00:00 app[web.1]:   configuration: --enable-shared --disable-asm --prefix=/app/vendor/ffmpeg
2013-01-02T00:38:20+00:00 app[web.1]:   libavfilter     3\. 30.102 /  3\. 30.102
2013-01-02T00:38:20+00:00 app[web.1]:   libavcodec     54\. 85.100 / 54\. 85.100
2013-01-02T00:38:20+00:00 app[web.1]:   libavdevice    54\.  3.102 / 54\.  3.102
2013-01-02T00:38:20+00:00 app[web.1]:   libavutil      52\. 13.100 / 52\. 13.100
2013-01-02T00:38:20+00:00 app[web.1]:   libswresample   0\. 17.102 /  0\. 17.102
2013-01-02T00:38:20+00:00 app[web.1]:   libswscale      2\.  1.103 /  2\.  1.103
2013-01-02T00:38:20+00:00 app[web.1]:   libavformat    54\. 58.100 / 54\. 58.100
2013-01-02T00:38:21+00:00 app[web.1]:     creation_time   : 2013-01-02 00:36:58
2013-01-02T00:38:21+00:00 app[web.1]:     minor_version   : 0
2013-01-02T00:38:21+00:00 app[web.1]:     major_brand     : qt  
2013-01-02T00:38:21+00:00 app[web.1]: Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/sample20130102-2-4j5sgh.mov':
2013-01-02T00:38:21+00:00 app[web.1]:     model           : iPhone 4
2013-01-02T00:38:21+00:00 app[web.1]:     compatible_brands: qt  
2013-01-02T00:38:21+00:00 app[web.1]:     model-eng       : iPhone 4
2013-01-02T00:38:21+00:00 app[web.1]:     make-eng        : Apple
2013-01-02T00:38:21+00:00 app[web.1]:     date-eng        : 2012-12-28T00:39:34+1100
2013-01-02T00:38:21+00:00 app[web.1]:     encoder         : 6.0
2013-01-02T00:38:21+00:00 app[web.1]:     encoder-eng     : 6.0
2013-01-02T00:38:21+00:00 app[web.1]:   Duration: 00:00:00.03, start: 0.000000, bitrate: 9465 kb/s
2013-01-02T00:38:21+00:00 app[web.1]:     Stream #0:0(und): Audio: aac (mp4a / 0x6134706D), 44100 Hz, mono, fltp, 75 kb/s
2013-01-02T00:38:21+00:00 app[web.1]:     date            : 2012-12-28T00:39:34+1100
2013-01-02T00:38:21+00:00 app[web.1]:       creation_time   : 2013-01-02 00:36:58
2013-01-02T00:38:21+00:00 app[web.1]:     make            : Apple
2013-01-02T00:38:21+00:00 app[web.1]:   Metadata:
2013-01-02T00:38:21+00:00 app[web.1]:     Metadata:
2013-01-02T00:38:21+00:00 app[web.1]:       handler_name    : Core Media Data Handler
2013-01-02T00:38:21+00:00 app[web.1]:     Stream #0:1(und): Video: h264 (Main) (avc1 / 0x31637661), yuv420p, 640x360 [SAR 1:1 DAR 16:9], 8605 kb/s, 30 fps, 30 tbr, 600 tbn, 1200 tbc
2013-01-02T00:38:21+00:00 app[web.1]:     Metadata:
2013-01-02T00:38:21+00:00 app[web.1]:       handler_name    : Core Media Data Handler
2013-01-02T00:38:21+00:00 app[web.1]: Unknown encoder 'libx264'
2013-01-02T00:38:21+00:00 app[web.1]: Please use -b:a or -b:v, -b is ambiguous
2013-01-02T00:38:21+00:00 app[web.1]:       creation_time   : 2013-01-02 00:36:58
2013-01-02T00:38:21+00:00 app[web.1]: [paperclip] An error was received while processing: #<Paperclip::Error: error while processing video for sample20130102-2-4j5sgh: Command 'ffmpeg -i :source -y -vcodec libx264 -b 1000k -bt 200k -acodec libfaac -ab 56k -ac 2 -s 500x280 :dest' returned 1\. Expected 0>
2013-01-02T00:38:21+00:00 app[web.1]:   Rendered videos/new.html.erb within layouts/application (3.2ms)
2013-01-02T00:38:21+00:00 heroku[router]: at=info method=POST path=/videos host=stark-sea-5654.herokuapp.com fwd=101.170.255.251 dyno=web.1 queue=0 wait=0ms connect=3ms service=3685ms status=200 bytes=1878
2013-01-02T00:38:21+00:00 app[web.1]:   Rendered layouts/_footer.html.erb (0.0ms)
2013-01-02T00:38:21+00:00 app[web.1]: Completed 200 OK in 342ms (Views: 124.8ms | ActiveRecord: 10.4ms)
2013-01-02T00:38:21+00:00 app[web.1]:   Rendered layouts/_header.html.erb (1.2ms) 
```

在消息之前一切正常，`Unknown encoder 'libx264'`所以我认为这可能与 ffmpeg 有关？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T02:15:26.417

ffmpeg 不附带 libx264 安装。libx264 需要单独安装，并且在 ffmpeg ./configure 中需要包含 libx264。本指南应该可以帮助您使用 libx264 安装 ffmpeg：[https ://ffmpeg.org/trac/ffmpeg/wiki/UbuntuCompilationGuide](https://ffmpeg.org/trac/ffmpeg/wiki/UbuntuCompilationGuide)

# java - 从 Java HTTPUrlConnection 发送 JSON，但 $_POST 变量在 PHP 中为空？

> ID：14116170
> 
> 赞同：0
> 
> 时间：2013-01-02T02:12:57.887
> 
> 标签：java, php, android, json

我正在编写一个 Android 应用程序，我想将一些 JSON 数据发送到 PHP 服务器。POST 请求确实发送到服务器，但在我的 server.php 脚本中，我检查了 $_POST 变量，它是空的。TCP/IP 监视器不在 Eclipse ADT 中，wireshark 不显示 localhost 请求，所以我看不到实际发送的内容。那么有没有人知道正在发送什么以及如何在 PHP 中访问它？还是我在某处的代码中犯了错误？

```
 JSONObject json = new JSONObject();

    try {
        json.put("dog", "cat");
    } catch (JSONException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

    HttpURLConnection urlConnection = null;
    try {
        URL url = new URL("http://10.0.2.2/server.php");
        urlConnection = (HttpURLConnection)url.openConnection();
        urlConnection.setRequestProperty("Content-Type", "application/json");
        urlConnection.setRequestProperty("Accept", "application/json");
        urlConnection.setRequestMethod("POST");         
        urlConnection.setDoOutput(true);
        OutputStreamWriter os = new OutputStreamWriter(urlConnection.getOutputStream(), "UTF-8");
        os.write(json.toString());
        os.close();
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T09:43:40.333

尝试一下。

```
JSONObject json = new JSONObject();

    try {
        json.put("dog", "cat");
    } catch (JSONException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

HttpClient localDefaultHttpClient=new DefaultHttpClient();
        HttpPost lotlisting = new HttpPost("http://10.0.2.2/server.php");
        ArrayList localArrayList = new ArrayList();
        localArrayList.add(new BasicNameValuePair("json",json.toString()));
        try {
            lotlisting.setEntity(new UrlEncodedFormEntity(localArrayList));
            String str = EntityUtils.toString(localDefaultHttpClient.execute(lotlisting).getEntity());

        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

您将在 str 变量中获得输出；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T02:37:09.740

我认为缺少刷新尝试 os.flush(); 在 os.write(..) 之后

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-09T18:58:06.217

不要使用 $_POST。在用户服务器上做这样的事情

```
 $json = file_get_contents('php://input');
    $animals= json_decode($json,true);

    //you can do 
    echo $animals['dog']; 
```

# c# - 使两个不同文本文件的某些文本部分相等并进行更改

> ID：14116172
> 
> 赞同：-1
> 
> 时间：2013-01-02T02:13:17.123
> 
> 标签：c#, file, replace

我正在创建一个应用程序，它很快从互联网上抓取两个文件，检查它们并创建第三个文件。抓取部分的部分已经完成，所以目前我有两个文件。

第一个是一个 .txt 文件，其中包含如下文本：

```
Order Code|Stock
ACREPAIR|1031
AF813|18
AF823|12
AFCOB11|21
AFCS300|33
AFCS3000|1
AFEM4|5
AFOMNI|17
AFOX2|-3
AFOX3|-3
AFROD|28
AFSENSOR|50
AFUF21|24
AN00001|-1
AN00002|21
AN00003|4
AN00004|4
AN00005|9
... 
```

该文件每一行中的文本是某个项目的代码和一个项目的库存（目前有多少产品可用）。有数十万条这样的行

然后我有另一个文件，它也是一个 .txt，格式如下：

```
Action,CategoryPath,ID,Name,Code,Stock
"Product","Home > Opto-electronics > LED > Standard LED, Multicolour",2226,"KINGBRIGHT LED, 3MM, HE-RED/GRN L-93WEGW","SC07621",202
"Product","Home > Resistors > Fixed",2228,"VISHAY DRALORIC RESISTOR, 0402, 5%, 10K0 CRCW040210K0JNEAIF","RE06211",0
"Product","Home > Resistors > Fixed",2229,"VISHAY DRALORIC RESISTOR, 0402, 5%, 3R90 CRCW04023R90JNEAIF","RE06212",0
"Product","Home > Resistors > Fixed",2230,"VISHAY DRALORIC RESISTOR, 0402, 5%, 2R70 CRCW04022R70JNEAIF","RE06220",25
"Product","Home > Resistors > Fixed",2231,"VISHAY DRALORIC RESISTOR, 0402, 5%, 33R0 CRCW040233R0JNEAIF","RE06221",0
"Product","Home > Resistors > Fixed",2232,"VISHAY DRALORIC RESISTOR, 0402, 5%, 100R CRCW0402100RJNEAIF","RE06226",0
"Product","Home > IC's > Comparators",2234,"STMICROELECTRONICS IC, COMPARATOR DUAL, DIP8, 393 LM393N","SC10207",57
"Product","Home > IC's > Amplifiers > Operational",2237,"STMICROELECTRONICS OP AMP, QUAD JFET, DIP14 TL084CN","SC07929",82
"Product","Home > IC's > Amplifiers > Audio Power",2239,"NATIONAL SEMICONDUCTOR AMP, AUDIO 0.25W, DIP8, 386 LM386N-1","SC08430",83
"Product","Home > IC's > Microcontrollers",2241,"MICROCHIP 8BIT FLASH MCU, 12F675, DIP8 PIC12F675-I/P","ACREPAIR",16
... 
```

我的问题来了。我需要我的应用程序从第一个文件中获取一行，分别获取代码和库存，然后在第二个文件中找到匹配的代码并比较库存值。如果它们在第二个文件中不同，则库存将替换为第一个文件中的库存价值。但如果值相同，则应删除第二个文件中包含代码和相同股票值的行（替换为空）。

需要解释的部分：

1.  如何通过获取由代码 ex 组成的几个变量来读取第一个文件。**ACREPAIR**和股票前。1031

2.  如何在第二个文件中找到代码如下所示的行：*“产品”、“主页 > IC 的 > 微控制器”、2241、“MICROCHIP 8BIT FLASH MCU、12F675、DIP8 PIC12F675-I/P”、“ **ACREPAIR** ” ,16*并且 16 将被 1031 替换，或者如果值相同，则将从第二个文件中删除该行。

我将非常感谢有关如何做到这一点的建议甚至片段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T02:37:05.403

我希望这对开始有任何帮助。`Skip`完成调用以跳过文件的标题行。请注意，可以通过多种方式优化此代码（使用 a`HashSet`而不是数组 for `compareTo`，避免硬编码拆分索引等），但我相信您有责任这样做。

```
var items = File.ReadAllLines("file1.txt").
    Skip(1).
    Select(s =>
    {
        var strings = s.Split('|');
        if (strings.Length != 2) throw new FormatException();
        return new {Code = strings[0], Stock = Convert.ToInt32(strings[1])};
    }).
    ToArray();
var compareTo = File.ReadAllLines("file2.txt").
    Skip(1).
    Select(s =>
    {
        var strings = s.Split(',');
        if (strings.Length != 6) throw new FormatException();
        return new {Code = strings[4].Trim('"'), Stock = Convert.ToInt32(strings[5])};
    }).
    ToArray();
//You can use Intersect after having defined your EqualityComparer, 
//avoid anonymous types in your final code
foreach (var item in items.Where(i => compareTo.Any(i2 => i.Code == i2.Code)))
{
    //Operate, be aware that compareTo is dissociated from your original file
    //So you'll have to adapt the above approach for your needs.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T03:21:29.117

由于我不知道您的 C# 技能如何，所以我只会给您一个路线图。

这两个文件乍一看似乎非常不同，但如果你仔细观察，你会发现它们在结构上非常相似：两个文件都是“逗号分隔”的。唯一的区别是分隔符（`|`反对`,`）和列的数量，即在第二个文件中你有你不需要的列。

所以一个可能的算法可能是：

1.  将第一个文件读入内存并用于`string.Split()`获取每行的名称/值对。

2.  将第二个文件也读入内存（我希望文件不会太大）并用于`string.Split()`获取所有列值，包括那些您实际上不需要的值。您需要它们来编写 (6) 中的整个文件。

3.  关闭两个文件的文件句柄！这对于在 (6) 中覆盖它很重要。

4.  遍历第二个文件的行，对于每一行，在第一个文件的行中搜索等效条目。

5.  现在您可以比较这些值并执行您想要的操作（更改第二个文件的值、删除整行等）。比较/更改时请注意文件 2 中的引号！

6.  打开文件 2 的写句柄并覆盖文件，将文件 2 的（已更改！）行列表以正确的格式打印到新文件中。要生成类似 CSV 的格式，您可以使用`string.Join()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T02:53:06.563

假设您的 Txt 文件最后包含产品代码和库存计数，这应该可以解决问题。

如果您的文本文件很大，这可能会执行得很慢，但是您可以根据需要进行重构，但这应该是一个很好的起点。

```
List<string[]> stock = new List<string[]>(File.ReadAllLines("G:\\Stock.txt").Select(line => line.Split('|')));
List<string[]> products = new List<string[]>(File.ReadAllLines("G:\\Products.txt").Select(line => line.Split(',')));

products.ForEach(p =>
{
    // since not all arrays in this case are the same lenght, we will go backwards from the end
    int productStockIndex = Array.IndexOf(p, p.Last());

    // product name is before the stock count
    int productNameIndex = productStockIndex - 1;

    // get product name to find in Stock.txt and remove extra quotes from product name
    string productName = p[productNameIndex].Replace("\"", "");

    // check if Stock.txt contains the product
    if (stock.Any(s => s[0] == productName))
    {
        // Update the stock count
        p[productStockIndex] = stock.First(stk => stk[0] == productName)[1];
    }       
}); 
```

保存存档....

# c# - 替换多个 [代码] 块

> ID：14116174
> 
> 赞同：0
> 
> 时间：2013-01-02T02:14:03.690
> 
> 标签：c#, .net, regex

我正在创建一个博客站点，我将允许用户在 [代码] 代码内容 [/代码] 中输入代码

在一篇博文中会有多个像这样的 [代码] 块。

我想使用 Regex 找到每个 [Code] 块，然后将其替换为

```
<pre>command 
```

`&lt;`我也想将`&gt;`pre 标签替换为 < >

现在我找到了有用的代码，可以帮助我解决这个问题，但我对正则表达式感到困惑，有人可以帮我解决这个问题。

```
 static string ProcessCodeBlocks(string value)
{
    StringBuilder result = new StringBuilder();

    Match m = Regex.Match(value, @"\[pre=(?<lang>[a-z]+)\](?<code>.*?)\[/pre\]");
    int index = 0;
    while( m.Success )
    {
        if( m.Index > index )
            result.Append(value, index, m.Index - index);

        result.AppendFormat("<pre class=\"{0}\">", m.Groups["lang"].Value);
        result.Append(ReplaceBreaks(m.Groups["code"].Value));
        result.Append("</pre>");

        index = m.Index + m.Length;
        m = m.NextMatch();
    }

    if( index < value.Length )
        result.Append(value, index, value.Length - index);

    return result.ToString();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T02:28:11.760

..来自 RegexBuddy 的解释：

```
\[pre=(?<lang>[a-z]+)\](?<code>.*?)\[/pre\]

Match the character “[” literally «\[»
Match the characters “pre=” literally «pre=»
Match the regular expression below and capture its match into backreference with name     “lang” «(?<lang>[a-z]+)»
   Match a single character in the range between “a” and “z” «[a-z]+»
      Between one and unlimited times, as many times as possible, giving back as needed     (greedy) «+»
Match the character “]” literally «\]»
Match the regular expression below and capture its match into backreference with name     “code” «(?<code>.*?)»
   Match any single character that is not a line break character «.*?»
      Between zero and unlimited times, as few times as possible, expanding as needed (lazy) «*?»
Match the character “[” literally «\[»
Match the characters “/pre” literally «/pre»
Match the character “]” literally «\]» 
```

要使其适用于`[Code][/Code]`，您可以将其更改为：

```
\[code\](?<code>.*?)\[/code\] 
```

..请记住，这仅适用于单行块。此外，只有一个`code`组.. 没有`lang`组了.. 所以从 C# 中删除它..

# c# - 关于解析 XML 文档的建议

> ID：14116175
> 
> 赞同：1
> 
> 时间：2013-01-02T02:14:18.603
> 
> 标签：c#, xml, serialization, xml-serialization, deserialization

希望在这方面得到一些帮助：我非常感谢开发人员与我分享了这个 XML 文件，因为它可以让我省去很多麻烦。但他告诉我，我是靠我自己的方式来阅读它的。基本上我正在为纸牌游戏编写一个 Windows 商店应用程序。我有一个 XML，它是我的卡片列表，并希望将其读入列表。我没有收到任何错误，并且之前已将 XML 读入列表。任何意见，将不胜感激。

下面是一段 XML：

```
<?xml version="1.0" encoding="UTF-8"?><carddatabase>
    <cards>
        <card>
            <name>Tundra Kavu</name>
            <set picURL="http://gatherer.wizards.com/Handlers/Image.ashx?multiverseid=26805&amp;type=card" picURLHq="" picURLSt="">AP</set>
            <color>R</color>
            <manacost>2R</manacost>
            <type>Creature - Kavu</type>
            <pt>2/2</pt>
            <tablerow>2</tablerow>
            <text>{T}: Target land becomes a Plains or an Island until end of turn.</text>
        </card>
    </cards>
   </carddatabase> 
```

这是我的序列化程序：

```
 public async void readFile()
        {
            StorageFolder myFolder = ApplicationData.Current.LocalFolder;
            StorageFile myFile = await myFolder.CreateFileAsync("cards.xml", CreationCollisionOption.OpenIfExists);

                XmlSerializer Serializer = new XmlSerializer(typeof(List<card>), new XmlRootAttribute("carddatabase"));
                string XmlString = await FileIO.ReadTextAsync(myFile);
                XmlDocument xmlDoc = await XmlDocument.LoadFromFileAsync(myFile);
                var settings = new XmlReaderSettings { ConformanceLevel = ConformanceLevel.Auto, IgnoreWhitespace = true, IgnoreComments = true };
                var stringReader = new StringReader(XmlString);
                XmlReader reader = XmlReader.Create(stringReader, settings);

               List<card> temp = (List<card>)Serializer.Deserialize(reader);
            foreach(card x in temp)
            {
                await tempTable.InsertAsync(x);  
            }
        } 
```

这是我的卡片类：

```
public class card
{
    public string id { get; set; }
    public string name { get; set; }
    public string manacost { get; set; }
    public string set { get; set; }
    public string color { get; set; }
    public string tablerow { get; set; }
    public string text { get; set; }
    public string type { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T02:21:02.757

[您可以使用Linq](http://msdn.microsoft.com/en-us/library/bb387098.aspx)解析 xml ：

```
XDocument xdoc = XDocument.Load(myFile);
var cards = from c in xdoc.Descendants("card")
            select new card() {
                name = (string)c.Element("name"),
                manacost = (string)c.Element("manacost"),
                set = (string)c.Element("set"),
                color = (string)c.Element("color"),
                tableRow = (string)c.Element("tablerow"),
                text = (string)c.Element("text"),
                type = (string)c.Element("type")
            };

foreach(var card in cards)
    await tempTable.InsertAsync(card); 
```

此外，Linq 允许您将值从字符串转换为其他数据类型，因此您可以`int TableRow { get; set; }`在类中拥有属性，可以将其解析为`TableRow = (int)c.Element("tablerow")`（或者`int?`如果不需要 tablerow 元素）。

顺便说一句，在 C# 中，我们使用 CamelCase 名称来表示类型和属性。因此，考虑具有如下类型：

```
public class Card
{
    public string Id { get; set; }
    public string Name { get; set; }
    public string ManaCost { get; set; }
    public string Set { get; set; }
    public string Color { get; set; }
    public int TableRow { get; set; }
    public string Text { get; set; }
    public string Type { get; set; }
} 
```

# ruby-on-rails - Post/Put 请求的路由错误（乘客标头）

> ID：14116180
> 
> 赞同：5
> 
> 时间：2013-01-02T02:15:01.907
> 
> 标签：ruby-on-rails, passenger

我遇到了一个奇怪的问题，经过大量研究后无法接近。我有几种通过 Carrierwave 上传文件的表格。当我上传信息时，部分路线被切断（我认为）。

例如，我有一个多部分表单提交给：

> https:/domain/programs/223/add_file 作为 POST

但在提交时我收到错误

> 没有路由匹配 [POST] "/223/add_file"

即使我的地址栏中的内容是完整的路线。如果将完整的路线作为 GET 请求提交，它可以正常工作。当我运行 rake 路线时，路线显示得很好。

这是我的路线的一个子集：

```
resources :programs do
  match "add_file" => "programs#add_file" 
```

如果重要的话，我在 Apache 上运行 Rails 3.2.2 和Passenger。该问题仅发生在此生产服务器上，从未在开发中。

有任何想法吗？我被困在这个上，因为它影响了多条路线，我已经尝试为该表格定义一个自定义路线，但没有运气。

**更新：** 当我从表单中删除 multi-part => true 或 file_field_tag 时，它可以解决问题。这仍然是一个问题，但似乎与其说是关于路由，不如说是关于带有文件上传的表单。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T11:48:15.443

使用以下代码`passenger_extension.rb`在文件夹中创建：`lib`

**乘客 3**

```
module PhusionPassenger
  module Utils

    protected

    NULL = "\0".freeze

    def split_by_null_into_hash(data)
      args = data.split(NULL, -1)
      args.pop
      headers_hash = Hash.new
      args.each_slice(2).to_a.each do |pair|
        headers_hash[pair.first] = pair.last unless headers_hash.keys.include? pair.first
      end
      return headers_hash
    end

  end
end 
```

**乘客 5**

```
module PhusionPassenger
  module Utils

    # Utility functions that can potentially be accelerated by native_support functions.
    module NativeSupportUtils
      extend self

      NULL = "\0".freeze

      class ProcessTimes < Struct.new(:utime, :stime)
      end

      def split_by_null_into_hash(data)
        args = data.split(NULL, -1)
        args.pop
        headers_hash = Hash.new
        args.each_slice(2).to_a.each do |pair|
          headers_hash[pair.first] = pair.last unless headers_hash.keys.include? pair.first
        end
        return headers_hash
      end

      def process_times
        times = Process.times
        return ProcessTimes.new((times.utime * 1_000_000).to_i,
          (times.stime * 1_000_000).to_i)
      end
    end

  end # module Utils
end # module PhusionPassenger 
```

然后在 'config/application.rb' 中执行：

```
class Application < Rails::Application
  ...
  config.autoload_paths += %W(#{config.root}/lib)
  require 'passenger_extension'
end 
```

然后重新启动网络服务器。

注意：我不确定这不会破坏任何其他功能，因此使用它需要您自担风险，如果您发现这种方法有任何危害，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T02:29:03.647

这里的一个问题是您没有指定路由是在集合还是成员上定义的。其中哪一个是正确的路线？

```
programs/:id/add_file

programs/add_file 
```

您应该像这样构建您的路线：

```
resources :programs do
  post 'add_file', :on => :member
end 
```

或者

```
resources :programs do
  member do
    post 'add_file'
  end
end 
```

上面将接受 post 请求`programs/:id/add_file`并将它们作为程序 id发送`ProgramsController.add_file`到。`params[:id]`

如果你想在收藏中使用它，你可以这样做：

```
resources :programs do
  post 'add_file', :on => :collection
end 
```

或者

```
resources :programs do
  collection do
    post 'add_file'
  end
end 
```

这将接受 post 请求`programs/add_file`并将它们发送到`ProgramsController.add_file`，但不会`params[:id]`设置。

一般来说，您应该始终指定路由是否在集合或成员上，并且您应该指定路由应该接受哪个动词（即使用'get'或'post'等而不是'match'）。

试试上面的方法，看看能不能解决你的问题，如果不能，请告诉我，我再看看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T02:35:04.633

我认为您可能需要添加

```
:via => [:post] 
```

根据您的路线规范。它适用于开发而不是生产似乎很奇怪，但据我了解 Rails 路由，您添加的匹配器只会响应获取。

尝试将匹配更改为

```
match "add_file" => "programs#add_file", :via => [:post] 
```

此外，根据 Andrew 刚刚提交的答案，您最好使用成员说明符来明确说明操作发生在具有特定 id 的特定程序上，而不是集合上。它还应该在您的 add_file 方法中保存一些代码，这些代码可能正在努力从 url 获取 id 参数。

# django - Django 条目创建。视图/其他文件中的方法或作为模型类的方法

> ID：14116181
> 
> 赞同：0
> 
> 时间：2013-01-02T02:15:04.397
> 
> 标签：django, views, models

Django 创建条目。

1）如 Django 文档中所见：

```
class Article(models.Model):
    user = models.ForeignField(User)
    title = models.CharField(#some_params)
    content = models.CharField(#some_params)
    date = models.DateTimeField(#some_params) 
```

那么在我看来，我可以：

```
new_article = Article(user=user, title="abc", content="xyz", date = datetime.utcnow())
new_article.save() 
```

2）但也可以通过在 Article 类中调用方法来完成，即：

```
class Article(models.Model):
    user = models.ForeignField(User)
    title = models.CharField()
    content = models.CharField()

    def add_article(self, title, content):  
        self.title = title
        self.content = content
        self.date = datetime.utcnow()
        self.save() 
```

然后在视图中：

```
title = "abc"
content = "xyz"
new_article = Article(user=user)
new_article.add_article(abc, xyz) 
```

我问是因为我已经看到了将内容添加到数据库中的两种方法。我想问一下：

1.  什么是更好的做法？
2.  对第二个示例中的安全性有任何担忧吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T03:21:03.630

在我看来，选项 1 是更好的做法。`add_article`是不必要的，因为您可以使用`auto_now`日期字段的属性设置日期，其他所有内容都已内置。您将拥有更少的代码和更少的维护。

# excel - Excel VBA如何防止插入新行时搞砸？

> ID：14116182
> 
> 赞同：1
> 
> 时间：2013-01-02T02:15:18.133
> 
> 标签：excel, vba

假设我在宏中有这一行：

```
Sheets("sheet1").Range("A1").Value = Sheets("sheet2").Range("A5").Value 
```

我怎样才能以编程方式（仅通过 VBA）使其在工作表 1 中插入`A1`和`A2`, `A1`,之间`B2`时不会因为行号被更改而搞砸？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T08:11:35.403

避免此类问题的标准方法是使用`Named ranges`.

如果`A1`是结果的重要位置，则可以称为“myResult”，如果`A5`是输入的重要位置，则可以称为“myInput”。然后您的代码将更改为：

```
Sheets("sheet1").Range("myResult").Value = Sheets("sheet2").Range("myInput").Value 
```

无论您现在插入多少列或行，上面的代码总是会找到相同的单元格。

还是我误解了这个问题？

如果这些范围实际上总是在表格`A1`中`A5`的相同相对位置，例如右下角，那么解决方案会有所不同。

# php - PHP/SQL - 三个随机图像

> ID：14116186
> 
> 赞同：0
> 
> 时间：2013-01-02T02:15:35.770
> 
> 标签：php, mysql

我想要做的是从数据库中显示三个随机图像。

我想使用`'SELECT * FROM banner_images ORDER BY RAND() LIMIT 3'`，并且在脚本的末尾，有三个带有随机图像路径（DB 列）的变量。

我的数据库结构：

```
id    name           path 
1     Banner-101     Banner-101.png 
2     Banner-102     Banner-102.png 
3     Banner-103     Banner-103.png 
4     Banner-104     Banner-104.png 
5     Banner-105     Banner-105.png 
```

因此，例如在脚本运行后，这些是变量

```
$path1 = 'Banner-103.png';
$path2 = 'Banner-105.png';
$path2 = 'Banner-101.png'; 
```

或类似的东西。

有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T02:18:26.047

循环行并添加到数组中：

```
$array = array();
$i = 0;

//do your query
//fetch assoc rows
//loop them
while($row){
   $array[$i] = $row['path']; //change banner to field name
$i++;
} 
```

如果您需要这些可变名称，只需在以下位置分配它们：

```
 $path1 = $array[0];
   $path2 = $array[1];
   $path2 = $array[2]; 
```

现在你可以像你想要的那样回显这 3 个变量名。

# ios - 有什么方法可以比 UIImagePNGRepresentation 更快地编码 PNG？

> ID：14116194
> 
> 赞同：13
> 
> 时间：2013-01-02T02:18:37.120
> 
> 标签：ios, uiimage, catiledlayer, cgimageref, uiimagepngrepresentation

我正在为`CATiledLayer`. 在 iPhone 4S 上生成 120 个 256 x 256 的 4 个细节级别的图块大约需要 11 秒。图像本身适合 2048 x 2048。

我的瓶颈是`UIImagePNGRepresentation`。生成每张 256 x 256 的图像大约需要 0.10-0.15 秒。

我尝试在不同的背景队列上生成多个图块，但这只会将其缩短到大约 9-10 秒。

我也尝试过使用 ImageIO 框架，代码如下：

```
- (void)writeCGImage:(CGImageRef)image toURL:(NSURL*)url andOptions:(CFDictionaryRef) options
{
    CGImageDestinationRef myImageDest = CGImageDestinationCreateWithURL((__bridge CFURLRef)url, (__bridge CFStringRef)@"public.png", 1, nil);
    CGImageDestinationAddImage(myImageDest, image, options);
    CGImageDestinationFinalize(myImageDest);
    CFRelease(myImageDest);
} 
```

虽然这会生成更小的 PNG 文件（赢了！），但它需要大约 13 秒，比以前多 2 秒。

有什么方法可以`CGImage`更快地对 PNG 图像进行编码吗？[也许像libjpeg-turbo](http://libjpeg-turbo.virtualgl.org/)这样使用`NEON`ARM 扩展（iPhone 3GS+）的库呢？

是否有比 PNG 更好的格式来保存不占用大量空间的图块？

我能想到的唯一可行的选择是将图块大小增加到 512 x 512。这将编码时间减少了一半。不过，不确定这会对我的滚动视图产生什么影响。该应用适用于 iPad 2+，仅支持 iOS 6（以 iPhone 4S 为基准）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T03:41:54.237

原来`UIImageRepresentation`表现如此糟糕的原因是因为它*每次都*在解压缩原始图像，即使我*认为*我正在使用`CGImageCreateWithImageInRect`.

您可以在此处查看 Instruments 的结果：

![在此处输入图像描述](../Images/fed49b6a8509ba32d374f05b9cde2714.png)

注意`_cg_jpeg_read_scanlines`和`decompress_onepass`。

我*用*这个强制解压缩图像：

```
UIImage *image = [UIImage imageWithContentsOfFile:path];
UIGraphicsBeginImageContext(CGSizeMake(1, 1));
[image drawAtPoint:CGPointZero];
UIGraphicsEndImageContext(); 
```

这个时间大约是 0.10 秒，几乎相当于每次`UIImageRepresentation`通话所用的时间。

互联网上有许多文章建议将绘图作为强制解压缩图像的一种方式。

有一篇关于 Cocoanetics [Avoiding Image Decompression Sickness](http://www.cocoanetics.com/2011/10/avoiding-image-decompression-sickness/)的文章。文章提供了另一种加载图像的方法：

```
NSDictionary *dict = [NSDictionary dictionaryWithObject:[NSNumber numberWithBool:YES]
                                                 forKey:(id)kCGImageSourceShouldCache];
CGImageSourceRef source = CGImageSourceCreateWithURL((__bridge CFURLRef)[[NSURL alloc] initFileURLWithPath:path], NULL);
CGImageRef cgImage = CGImageSourceCreateImageAtIndex(source, 0, (__bridge CFDictionaryRef)dict);
UIImage *image = [UIImage imageWithCGImage:cgImage];
CGImageRelease(cgImage);
CFRelease(source); 
```

而现在同样的过程大约需要 3 秒！使用 GCD 并行生成图块可以更显着地减少时间。

上述`writeCGImage`功能大约需要 5 秒。由于文件大小较小，我怀疑 zlib 压缩级别更高。

# java - Eclipse ADT（Android 开发工具）中缺少 TCP/IP 监视器？

> ID：14116196
> 
> 赞同：1
> 
> 时间：2013-01-02T02:18:42.310
> 
> 标签：java, android, eclipse

我需要为 Android 应用程序处理 HTTP 和 TCP 请求。但是，当我转到 Window->Preferences->Run/Debug 时，没有可见的 TCP/IP 监视器设置，如果我转到 Window->Show View->Other，则找不到 TCP/IP 监视器。

那么为什么我的 Eclipse ADT 中缺少这个工具呢？有没有安装方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T02:30:14.937

TCP/IP 监视器包含在 Eclipse Web Tools 中，它们捆绑在 Eclipse EE 版本中，但可以在此处单独下载：http: [//download.eclipse.org/webtools/downloads/](http://download.eclipse.org/webtools/downloads/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T02:24:54.997

TCP/IP Monitor 是一个 Eclipse 插件：它不一定默认安装。

它是“WTP”（Web 工具平台）的一部分：

*   [http://www.javablog.fr/eclipse-tcpip-monitor-view.html](http://www.javablog.fr/eclipse-tcpip-monitor-view.html)

*   [http://www.eclipse.org/webtools/](http://www.eclipse.org/webtools/)

# java - Android Cursor - 如果它们相等，两个浮点数不相加？

> ID：14116197
> 
> 赞同：0
> 
> 时间：2013-01-02T02:18:58.030
> 
> 标签：java, android

这是一个奇怪的问题，我希望它有一个简单的解决方案。我有一个带有加密值的数据库。我创建了一个游标，它将遍历表中的每个条目，解密我需要的列中的值，并将值添加到变量“total”中。我想要列中所有值的总和。这是代码：

```
while (c.moveToNext())
      {           
            strTotal = c.getString(c.getColumnIndexOrThrow(KEY_TOTAL));
            strTotal = sc.decrypt(strTotal);
            total = Float.valueOf(strTotal) + total;             
      } 
```

现在，这是奇怪的部分。假设我在数据库中有两个值：2 + 4。每个都被解密后，它会正确添加它们：6。现在，如果值相等：2 + 2，例如，该方法返回“2”而不是“4”。即使它是小数点也会发生这种情况（例如，2 + 2.01 = 4.01，但 2 + 2 仍然输出 2）。

我在这里缺少什么吗？谢谢！

编辑：

我改变了代码只是为了看看解密是否是问题所在，它仍然给我同样的结果：

```
float total = 0;
String strTotal = "10";
while (c.moveToNext())
      {     
          try {
                //strTotal = sc.decrypt(c.getString(c.getColumnIndex(KEY_TOTAL)));
                total = Float.valueOf(strTotal) + total;
            } catch (Exception e) {
                Log.e(TAG, "exception", e);
            }           
      } 
```

此代码返回“10”，即使数据库中有 3 个条目！看起来如果数据库中的两行在 KEY_TOTAL 字段中具有相同的值，则返回的结果较少。这是查询：

```
Cursor c = mDb.query(true, DATABASE_TABLE, new String[] {KEY_TOTAL}, KEY_TYPE + "=" + t, null, null, null, null, null); 
```

如果我拉数据库并用 sqlite 浏览器打开它，然后选择所有行，我仍然得到 3，但是。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T05:56:32.637

你检查过抛出的异常吗？特别是 NumberFormatException？我猜还有其他一些逻辑问题导致循环过早退出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T21:28:48.580

我刚刚检查了[Android 的 SQLite 文档](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#query%28boolean,%20java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)（我不是 Android 开发人员），我想我发现了你的问题。查询方法的第一个参数是是否选择不同的行。由于您传递 TRUE 并且您只选择一列，因此将从结果中删除重复项，这不是您想要的。

将您的查询调用更改为以下内容应该可以解决您的问题。

```
Cursor c = mDb.query(false, DATABASE_TABLE, new String[] {KEY_TOTAL},
    KEY_TYPE + "=" + t, null, null, null, null, null); 
```

# node.js - node.js 和 expressjs 使用 URL 参数渲染模板

> ID：14116200
> 
> 赞同：3
> 
> 时间：2013-01-02T02:19:23.063
> 
> 标签：node.js, express

目前有一个用户带着邀请 ID 来到我的注册页面

示例：[http ://www.mysite.com/user/register/50e203eb4d37bdfd22000042](http://www.mysite.com/user/register/50e203eb4d37bdfd22000042)

页面加载和表单加载等......一切都很好。然后我做一些后端验证，如果验证失败，我用消息和表单数据调用 res.render：

```
res.render('user/register', {
    messages: messages 
    , form: form 

}); 
```

这一切都按预期工作，但是当渲染发生时，它会让用户回到：

[http://www.mysite.com/user/register](http://www.mysite.com/user/register) （缺少invite_id）

如何通过 res 渲染传递 URL 参数？

如果我做：

```
res.render('user/register/50e203eb4d37bdfd22000042', {
    messages: messages 
    , form: form 

}); 
```

它实际上正在寻找那个 50e203.... 文件并给我找不到 404

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T03:33:36.240

你可能会混淆`res.render()`吗`app.get()`？看起来您正在尝试在第二个示例中指定路线：`res.render('user/register/50e203eb4d37bdfd22000042'...`- 但是 res.render 没有指定路线，您需要 app[METHOD] ，其中 app 是一个快速实例。

为了处理对 /user/register/someinvite 的 GET 请求，请使用：

```
app.get('/user/register/:invitation', function(req, res, next) {
// in here you can access the invitation id with req.params.invitation
  res.render('user/register');
}); 
```

# jquery - 根据评论密度更改 .accordion 面板的颜色

> ID：14116203
> 
> 赞同：2
> 
> 时间：2013-01-02T02:20:42.550
> 
> 标签：jquery, jquery-ui-accordion

所以我试图让短篇小说的每一段在你点击它们时都有评论，并且评论也会随着每段评论的数量而改变颜色的强度。

到目前为止看起来像这样：

[http://www.miraclejones.com/cathedral.html](http://www.miraclejones.com/cathedral.html)

我正在使用“Easy Comment”Jquery 插件在我的每个手风琴中添加评论——效果很好——但是在根据数量改变段落颜色时，我遇到了困难，或者仅仅是存在，评论。

这是我最后一个好主意，但我无法让它发挥作用，我不知道为什么：

```
 if ($("#paragraph1 .ec-comment-pane div.ec-total:contains('0')")>0) {
 $("#h31").css("backgroundColor","pink");}
 else {
 $("#h31").css("backgroundColor","green");
 } 
```

任何帮助将不胜感激。我是一名小说作家，不是一个程序员，但我很想以这种风格出版我的下一个系列。如果您有任何问题，或者我可以进一步解释什么，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T02:26:55.147

你可以这样做：

```
$('.ui-accordion-header').each(function( index, element ){
 if( $(element).height() > 100 ){
  $(element).css("backgroundColor","pink");
 }else{
  $(element).css("backgroundColor","green");
  $(element).css("color","white");//nice contrast, just for example
 }
}); 
```

这将使大区域具有粉红色背景，而小区域具有绿色背景。请注意，绿色很难阅读黑色文本，也许您还应该将那里的文本着色为白色，或者选择不同的颜色。无论如何，我认为这些颜色可能只是一个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T02:26:38.517

试试看，条件是长度

```
if ($("#paragraph1 .ec-comment-pane div.ec-total:contains('0')").length >0) {
 $("#h31").css("backgroundColor","pink");}
 else {
 $("#h31").css("backgroundColor","green");
 } 
```

或者

```
color = function(){
  $('.ec-total').each(function(){
    count = parseInt($(this).text());
    if(count > 0)
       $(this).closest('.ui-accordion-content').prev().css("backgroundColor","pink");
    else
       $(this).closest('.ui-accordion-content').prev().css("backgroundColor","green");
  });
}
setTimeout(function(){ color(); }, 1000); 
```

编辑：添加了setimeout，因为ajax需要一些时间来修改ec-total里面的文本

# mdx - 如何使用 MDX 获得最后一个非空的 10 个成员？

> ID：14116210
> 
> 赞同：2
> 
> 时间：2013-01-02T02:22:24.953
> 
> 标签：mdx

我有一个 MDX 查询：

```
SELECT
NON EMPTY {Hierarchize({[Measures].[Rating]})} ON COLUMNS,
NON EMPTY {Hierarchize({[Response].[Response Name].Members})} ON ROWS
FROM [Ratings] 
```

这会将响应名称表返回到响应计数。不过，此查询为所有响应返回一行，我只想要最近的 10 个响应。

我尝试像这样使用 HEAD 来做到这一点：

```
SELECT
NON EMPTY {Hierarchize({[Measures].[Rating]})} ON COLUMNS,
HEAD(NON EMPTY {Hierarchize({[Response].[Response Name].Members})}, 10) ON ROWS
FROM [Ratings] 
```

但它给出了一个错误“第 3 行第 18 列的语法错误，标记 'NON'”

如果我删除了 NON EMPTY，那么它会按我的预期工作（仅返回 10 个成员），但是它包括空的 Ratings。

如何同时使用 NON EMPTY 和 HEAD？（或以另一种方式完成同样的事情）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T14:18:46.367

我相信答案已经有点晚了，但这是我使用的解决方案（我遇到了同样的问题）：

```
select {[Measures].[Percentage Present]} ON COLUMNS, 
Head(Filter([Student].[Student].AllMembers, not isEmpty([Measures].[Percentage Present])),10) ON ROWS 
from [Attendance] 
```

Head + Filter(, not isEmpty([measure])) 成功了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T03:06:46.613

不确定“最后”是什么意思，但这里有一个使用[NonEmpty](http://www.iccube.com/support/documentation/mdx/NonEmpty.html)函数而不是 NON EMPTY 关键字的语句：

```
SELECT

NON EMPTY [Measures].[Rating] ON COLUMNS,

HEAD( NonEmpty( 
         [Response].[Response Name].Members, 
         [Measures].[Rating] 
      ), 
      10
) ON ROWS

FROM [Ratings] 
```

# objective-c - NSPredicate 单引号问题

> ID：14116217
> 
> 赞同：6
> 
> 时间：2013-01-02T02:23:59.367
> 
> 标签：objective-c, xcode4, nspredicate

现在我在 NSPredicate 中面临单引号 ( ' ) 问题。

这是我的查询：

```
 NSPredicate *query = [NSPredicate predicateWithFormat:[NSString stringWithFormat:@"s_name='%@' AND s_regno=%d",Name,[RegNo intValue]]]; 
```

当我使用名称“John”进行过滤时，一切正常，完全没有错误。但我用的名字是“Mary ' Monny”。有错误。

我怀疑这是因为单引号。请帮助我如何克服这个问题。

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-02T02:40:28.273

作为快速修复，您根本不需要该`NSString`部件。这种替换是`predicateWithFormat:`方法的重点！只需使用：

```
NSPredicate *query = [NSPredicate predicateWithFormat:@"s_name == %@ AND s_regno == %d", Name, [RegNo intValue]]; 
```

我喜欢完全避免使用格式字符串，而是在代码中构建谓词。

```
NSPredicate *nameQuery =
[NSComparisonPredicate predicateWithLeftExpression:[NSExpression expressionForKeyPath:@"s_name"]
                                   rightExpression:[NSExpression expressionForConstantValue:Name]
                                          modifier:NSDirectPredicateModifier
                                              type:NSLikePredicateOperatorType
                                           options:NSCaseInsensitivePredicateOption|NSDiacriticInsensitivePredicateOption];

NSPredicate *regNoQuery =
[NSComparisonPredicate predicateWithLeftExpression:[NSExpression expressionForKeyPath:@"s_regno"]
                                   rightExpression:[NSExpression expressionForConstantValue:RegNo]
                                          modifier:NSDirectPredicateModifier
                                              type:NSEqualToPredicateOperatorType
                                           options:0];

NSPredicate *query = [NSCompoundPredicate andPredicateWithSubpredicates:@[nameQuery,regNoQuery]]; 
```

请注意，我添加`NSCaseInsensitivePredicateOption|NSDiacriticInsensitivePredicateOption`了对名称进行不区分大小写和变音符号的比较，如`s_name like[cd] %@`. 如果不需要，当然可以使用`type:NSEqualToPredicateOperatorType`and `options:0`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-21T15:18:01.773

如果 name = @"Bell's"，你可以尝试这样做谓词：

```
NSPredicate *query = [NSPredicate predicateWithFormat:@"name == \"%@\"", name]; 
```

只需将标准单引号替换为双引号即可。

# node.js - 用 Mocha 测试 locomotive.js

> ID：14116220
> 
> 赞同：1
> 
> 时间：2013-01-02T02:25:30.027
> 
> 标签：node.js, mocha.js, locomotivejs

我正在使用 locomotive.js 构建一个应用程序，并且希望使用 Mocha 测试框架构建我的测试套件。一般来说，我也是 TDD/BDD 的新手，所以请考虑到这一点。我很好奇是否有人能指出我开始测试基于机车的应用程序的好方向。

我最大的问题是：

1.  如何测试控制器的操作？
2.  我可以测试初始化​​程序吗？
3.  是否有关于创建测试请求对象的最佳实践？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T07:57:26.873

1.  *测试控制器动作*
    这取决于你到底想测试什么。控制器操作通常要么返回内容，要么沿着服务器堆栈传递（可能在出现错误的情况下）请求，因此测试它们意味着使用类似[supertest](https://github.com/visionmedia/supertest "超测")的东西来检查正确的响应（该`supertest`页面还提到了如何将它与 Mocha 一起使用）

2.  *我可以测试初始化​​程序吗？*
    单独测试初始化​​程序很困难，因为它们需要在 LocomotiveJS 应用程序的上下文中运行。但是，您可以创建一个仅启动应用程序的测试，在启动过程中它还将运行所有初始化程序。[我刚刚在我的 Locomotive + Sequelize 样板项目](https://github.com/robertklep/locomotive-sequelize-boilerplate)中添加了一个简单的基于 Mocha 的测试框架，它展示了如何从 Mocha 中启动 Locomotive 应用程序。

3.  *是否有关于创建测试请求对象的最佳实践？*
    如果您的意思是如何检查对请求的响应，请查看上述`supertest`或[mocha-headless](https://github.com/heldr/mocha-headless)。

# mysql - MySQL - 如何在 WHERE 子句中为列名本身使用通配符？

> ID：14116221
> 
> 赞同：-1
> 
> 时间：2013-01-02T02:25:49.163
> 
> 标签：mysql, syntax, where, wildcard, columnname

我有一个关于mysql的基本问题。在我的表“表”中，我有一个名为“foo”（字符串）的列。我想做这样的事情：

```
SELECT * FROM table WHERE %foo% LIKE '%thing%' 
```

但这显然是不正确的。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T02:27:08.563

```
SELECT * FROM table WHERE key like '%sth%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T02:27:42.877

```
select * from table where key like '%sth%' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T02:34:11.833

首先 key 是保留关键字。因此，您可能需要在~~方括号周围添加~~ **带引号的反引号**。其次，您需要正确使用通配符。许多答案已经向您表明了这一点。根据样本数据设置。

```
Set @sth:= 'joh' 
```

方法 2 是使用`REGEXP`.

```
Select * from mytable 
where `key`
REGEXP @sth 
; 
```

方法 3 是使用`instr`.

```
select * from landlord
where instr(`key`,@sth) > 0
; 
```

你也可以试试`match` `against`。但它似乎不适用于**partial strings**。

这是一个`FullText`搜索，你的桌子必须能够做到这一点。[MYISAM 是唯一可以进行全文搜索的表类型](https://stackoverflow.com/questions/963534/mysql-fulltext-indexes-problem)。假设您没有启用它，那么您可以使用以下几`Alter`行修改表。使用`FullText`搜索，您实际上是在列上添加**索引。**`key`使用索引搜索变得更快。

```
`ALTER TABLE mytable ENGINE = MYISAM;`

Alter Table mytable
Add FULLTEXT(`key`)
;

Select * from mytable 
where match(`key`) 
against(%@sth% IN BOOLEAN MODE)
; 
```

* [SQLFIDDLE 演示](http://sqlfiddle.com/#!2/43674/1)

# sql - 如何使用 XSLT 和一个键来规范化 SQL Server 生成的 XML

> ID：14116222
> 
> 赞同：1
> 
> 时间：2013-01-02T02:26:27.563
> 
> 标签：sql, xml, xslt, xslt-2.0, normalize

当我从 SQL Server 查询数据 AS XML 时，它通常会生成重复的 XML 节点。通常我可以调整查询以消除这种情况，但并非总是如此。对于那些我不能的时候，我最终得到了这样的 XML：

```
<Xml>
<House houseId="3" address="123 Main">
    <Dog dogId="13" name="Rover">
        <Flea fleaId="17" name="Chester" />
    </Dog>
    <Dog dogId="13" name="Rover">
        <Flea fleaId="23" name="Poindexter" />            
    </Dog>
</House>
<House houseId="3" address="123 Main">
    <Human humanId="9" name="Mr. Johnson">
        <Child childId="11" name="Susie" />
    </Human>
    <Human humanId="9" name="Mr. Johnson">
        <Child childId="31" name="Sandy" />
    </Human>
</House>
<House houseId="5" address="987 Wall">
    <Dog dogId="13" name="Rover">
        <Flea fleaId="17" name="Chester" />
    </Dog>
    <Dog dogId="13" name="Rover">
        <Flea fleaId="19" name="Wilhelm" />            
    </Dog>
</House>
</Xml> 
```

请注意，有两个彼此相邻的 <House> 节点，它们的属性相同。它们仅在子节点上有所不同。我正在尝试创建一个 XSLT，它将采用相同的兄弟节点，并将它们折叠成一个包含所有子节点超集的节点。在示例中，<House houseId="3"> 将包含 <Dog> 和 <Human> 节点。像这样：

```
<Xml>
<House houseId="3" address="123 Main">
    <Dog dogId="13" name="Rover">
        <Flea fleaId="17" name="Chester" />
        <Flea fleaId="23" name="Poindexter" />            
    </Dog>
    <Human humanId="9" name="Mr. Johnson">
        <Child childId="11" name="Susie" />
        <Child childId="31" name="Sandy" />
    </Human>
</House>
<House houseId="5" address="987 Wall">
    <Dog dogId="13" name="Rover">
        <Flea fleaId="17" name="Chester" />
        <Flea fleaId="19" name="Wilhelm" />            
    </Dog>
</House>
</Xml> 
```

不仅合并了两个相同的 House 节点，还合并了重复的 Dog 和 Human 节点。但请注意，在两个不同的 <House> 节点下列出的 <Dog dogId='13' name='Rover'> 节点并未合并，因为它们不相同。（由于他们的祖先。）这就是我想要的：组合匹配的兄弟节点。

因为 XML 是由 SQL 生成的，所以 XSLT 将处理许多不同名称和排列的节点。因此，我无法对节点名称进行硬编码。但我可以放心，每个节点都会有一个相应的 id 属性，该属性将包含一个数值。例如：<House houseId="3">、<Dog dogId="17"> 和 <Flea fleaId="13">。
我也知道根节点没有属性，所以我可以开始处理根节点的子节点。

我的策略是为每个节点创建一个 xsl:key，其中节点的键值是其祖先节点与 id 值的串联。示例键值在下面的评论中

```
<Xml>
<House houseId="3" address="123 Main"><!--"houseId=3"-->
    <Dog dogId="13" name="Rover" ><!--"houseId=3;dogId=13"-->
        <Flea fleaId="17" name="Chester" /><!--"houseId=3;dogId=13;fleaId=17"-->
    </Dog>
    <Dog dogId="13" name="Rover" ><!--"houseId=3;dogId=13"-->
        <Flea fleaId="23" name="Poindexter" /><!--"houseId=3;dogId=13;fleaId=23"-->         
    </Dog>
</House>
<House houseId="3" address="123 Main" ><!--"houseId=3"-->
    <Human humanId="9" name="Mr. Johnson" ><!--"houseId=3;humanId=9"-->
        <Child childId="11" name="Susie" /><!--"houseId=3;humanId=9;childId=11"-->
    </Human>
    <Human humanId="9" name="Mr. Johnson"><!--"houseId=3;humanId=9"-->
        <Child childId="31" name="Sandy" /><!--"houseId=3;humanId=9;childId=31"-->
    </Human>
</House>
<House houseId="5" address="987 Wall" ><!--"houseId=5"-->
    <Dog dogId="13" name="Rover"><!--"houseId=5;dogId=13"-->
        <Flea fleaId="17" name="Chester" /><!--"houseId=5;dogId=13;fleaId=17"-->
    </Dog>
    <Dog dogId="13" name="Rover"><!--"houseId=5;dogId=13"-->
        <Flea fleaId="19" name="Wilhelm" /><!--"houseId=5;dogId=13;fleaId=19"-->           
    </Dog>
</House>
</Xml> 
```

因此，两个看似匹配的 <Dog dogId='13' name='Rover'> 将通过它们的祖先来区分：

<Xml><House houseId="3"><Dog dogId='13' name='Rover'>

houseId=3;dogId=13

对比

<Xml><House houseId="5"><Dog dogId='13' name='Rover'>

houseId=5;dogId=13

这样，可以组合重复（兄弟）节点。不幸的是，我很难理解如何使用 XSL 和 xslt:key 来实现它。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T03:41:01.307

**这种转变**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:my="my:my">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="/*" priority="3">
  <xsl:sequence select="my:grouping(., *)"/>
 </xsl:template>

 <xsl:function name="my:grouping" as="element()*">
  <xsl:param name="pElem" as="element()"/>
  <xsl:param name="pChildren" as="element()*"/>

  <xsl:element name="{name($pElem)}" namespace="{namespace-uri($pElem)}">
   <xsl:apply-templates select="$pElem/@*"/>
   <xsl:for-each-group select="$pChildren" group-by="my:signature(.)">
     <xsl:copy>
       <xsl:apply-templates select="@*|node()[not(self::*)]"/>
       <xsl:apply-templates select=
           "my:grouping(., current-group()/*)/*"/>
     </xsl:copy>
   </xsl:for-each-group>
  </xsl:element>
 </xsl:function>

 <xsl:function name="my:signature" as="xs:string">
  <xsl:param name="pElem" as="element()"/>

  <xsl:variable name="vAttibs" as="xs:string*">
   <xsl:perform-sort select="$pElem/@*">
     <xsl:sort select="name()"/>
   </xsl:perform-sort>
  </xsl:variable>
  <xsl:sequence select=
   "string-join((name($pElem)
                 ,for $at in $vAttibs
                   return concat($at, '+', $pElem/@*[name()=$at])
                 )
                  ,'|')"/>
 </xsl:function>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<Xml>
    <House houseId="3" address="123 Main">
        <Dog dogId="13" name="Rover">
            <Flea fleaId="17" name="Chester" />
        </Dog>
        <Dog dogId="13" name="Rover">
            <Flea fleaId="23" name="Poindexter" />
        </Dog>
    </House>
    <House houseId="3" address="123 Main">
        <Human humanId="9" name="Mr. Johnson">
            <Child childId="11" name="Susie" />
        </Human>
        <Human humanId="9" name="Mr. Johnson">
            <Child childId="31" name="Sandy" />
        </Human>
    </House>
    <House houseId="5" address="987 Wall">
        <Dog dogId="13" name="Rover">
            <Flea fleaId="17" name="Chester" />
        </Dog>
        <Dog dogId="13" name="Rover">
            <Flea fleaId="19" name="Wilhelm" />
        </Dog>
    </House>
</Xml> 
```

**产生想要的正确结果：**

```
<Xml>
   <House houseId="3" address="123 Main">
      <Dog dogId="13" name="Rover">
         <Flea fleaId="17" name="Chester"/>
         <Flea fleaId="23" name="Poindexter"/>
      </Dog>
      <Human humanId="9" name="Mr. Johnson">
         <Child childId="11" name="Susie"/>
         <Child childId="31" name="Sandy"/>
      </Human>
   </House>
   <House houseId="5" address="987 Wall">
      <Dog dogId="13" name="Rover">
         <Flea fleaId="17" name="Chester"/>
         <Flea fleaId="19" name="Wilhelm"/>
      </Dog>
   </House>
</Xml> 
```

**并使用此扩展 XML 文档（添加了文本节点）：**

```
<Xml>
    <House houseId="3" address="123 Main">
        <Dog dogId="13" name="Rover">
          Dog named Rover
            <Flea fleaId="17" name="Chester">Regular dog flee</Flea>
        </Dog>
        <Dog dogId="13" name="Rover">
            <Flea fleaId="23" name="Poindexter">Flea named Poindexter</Flea>
        </Dog>
    </House>
    <House houseId="3" address="123 Main">
        <Human humanId="9" name="Mr. Johnson">
            <Child childId="11" name="Susie">Susan Johnson</Child>
        </Human>
        <Human humanId="9" name="Mr. Johnson">
            <Child childId="31" name="Sandy">Sandy Johnson</Child>
        </Human>
    </House>
    <House houseId="5" address="987 Wall">
        <Dog dogId="13" name="Rover">
            <Flea fleaId="17" name="Chester" />
        </Dog>
        <Dog dogId="13" name="Rover">
            <Flea fleaId="19" name="Wilhelm" />
        </Dog>
    </House>
</Xml> 
```

**再次产生正确的结果**：

```
<Xml>
   <House houseId="3" address="123 Main">
      <Dog dogId="13" name="Rover">
          Dog named Rover
            <Flea fleaId="17" name="Chester">Regular dog flee</Flea>
         <Flea fleaId="23" name="Poindexter">Flea named Poindexter</Flea>
      </Dog>
      <Human humanId="9" name="Mr. Johnson">
         <Child childId="11" name="Susie">Susan Johnson</Child>
         <Child childId="31" name="Sandy">Sandy Johnson</Child>
      </Human>
   </House>
   <House houseId="5" address="987 Wall">
      <Dog dogId="13" name="Rover">
         <Flea fleaId="17" name="Chester"/>
         <Flea fleaId="19" name="Wilhelm"/>
      </Dog>
   </House>
</Xml> 
```

**说明**：

我们使用两个函数：`my:signature()`和`my:grouping()`：

1.  `my:signature()`为每个元素创建一个签名——这是元素名称和所有 attrName+value 对的管道分隔字符串，按 attrName 排序。

2.  `my:grouping()`用于`my:signature()`进行正确的分组。它有第二个参数，包含要分组的元素。

# python - 在函数调用中初始化字典的好处

> ID：14116238
> 
> 赞同：1
> 
> 时间：2013-01-02T02:29:13.140
> 
> 标签：python, dictionary

我在 Google Map API 网站上查看此代码：

```
import simplejson, urllib
GEOCODE_BASE_URL = 'http://maps.googleapis.com/maps/api/geocode/json'

def geocode(address,sensor, **geo_args):
    geo_args.update({
        'address': address,
        'sensor': sensor  
    })

    url = GEOCODE_BASE_URL + '?' + urllib.urlencode(geo_args)
    result = simplejson.load(urllib.urlopen(url))

    print simplejson.dumps([s['formatted_address'] for s in result['results']], indent=2)

if __name__ == '__main__':
    geocode(address="San+Francisco",sensor="false") 
```

我注意到在 geocode 函数中，当我们实际应用该函数时，我们在调用该函数时不使用 geo_args 字典，而是使用它来初始化我们在下一行中更新的字典。与在函数本身中初始化字典相比，使用它有什么好处？它使代码不太清楚，所以我认为这样做是有原因的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T02:35:59.937

`geo_args`用来。字面词典

```
{
    'address': address,
    'sensor': sensor  
} 
```

更新`geo_args`，而不是相反。

`address`像这样的原因在我看来`sensor`是必需的参数。这种结构允许函数强制执行该要求，并允许它们按位置传递。`.update()`只是将所有参数合并为一个，以便可以将它们提供给`urllib.urlencode`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T02:36:15.843

不清楚？这是 **kwargs（关键字参数字典）的正常行为。因此，当您看到带有的内容时`**`，将传递一堆命名参数或关键字参数。

看到其他答案。我可能误解了你的问题。我同意其他答案：地址和传感器是必需的。

# c++ - 改变原产地？赢32？

> ID：14116239
> 
> 赞同：3
> 
> 时间：2013-01-02T02:29:18.653
> 
> 标签：c++, visual-c++, gdi, win32gui

是否可以将显示器上的原点从左上角移动到显示器的中心？

我为什么要这样做？这样，我可以绘制以下点：

`(-21,-25),(22,-25),(21,25),(-21,25)`

如您所见，其中一些是负面的，因此在显示器上不可见。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T02:31:51.270

使用 GDI 功能`SetViewportOrgEx()`。请注意，在 GDI 中，坐标与屏幕无关；它们与设备上下文相关，通常对应于窗口的客户区。

# ruby-on-rails - Rails - 使用 rake 任务更新属性。需要帮助排查模型方法代码

> ID：14116242
> 
> 赞同：0
> 
> 时间：2013-01-02T02:30:06.633
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rake, rake-task

我正在尝试使用每晚运行的 rake 任务（使用 Heroku Scheduler）并在满足某些特定条件时更新一些属性。

**关于应用程序的一点逻辑：**

该应用程序允许用户“接受挑战”并在一年中每周阅读一本书。这很简单：用户注册，创建他们第一周要阅读的第一本书，然后可以输入他们下周要阅读的内容。在他们“排队”了下周的书后，该表单将被隐藏，直到他们的第一本书创建后 7 天。此时，排队的书被移动到列表的顶部并标记为“正在阅读”，而之前的“正在阅读”的书会下移到列表中的第二个位置。

如果用户没有“排队”一本书，系统会在最新的“当前阅读”图书创建后 7 天自动创建一个。

**我需要一些建议的地方**

我目前陷入困境的地方是让书籍更新属性，如果自上一本“当前阅读”书籍创建以来已经 7 天。下面是我的书本模型，该方法`update_queue`是在 rake 任务期间调用的方法。运行 rake 任务当前没有出现错误并正确循环代码，但它不会更改任何属性值。因此，我确定该`update_queue`方法中的代码在某些地方不正确，我希望您能帮助解决原因。我如何测试这一点是通过添加一本书然后手动将我的系统日期更改为提前 8 天。相当野蛮，但我没有为此应用程序编写的测试套件，这是对我来说最简单的方法:)

```
class Book < ActiveRecord::Base
  attr_accessible :author, :date, :order, :title, :user_id, :status, :queued, :reading
  belongs_to :user

 scope :reading_books, lambda {
    {:conditions => {:reading => 1}}
  }

  scope :latest_first, lambda {
    {:order => "created_at DESC"}
  }

  def move_from_queue_to_reading
    self.update_attributes(:queued => false, :reading => 1);
  end

  def move_from_reading_to_list
    self.update_attributes(:reading => 0);
  end

  def update_queue
    days_gone = (Date.today - Date.parse(Book.where(:reading => 1).last.created_at.to_s)).to_i

    # If been 7 days since last 'currently reading' book created
    if days_gone >= 7

        # If there's a queued book, move it to 'currently reading'
        if Book.my_books(user_id).where(:queued => true)
            new_book = Book.my_books(user_id).latest_first.where(:queued => true).last
            new_book.move_from_queue_to_reading
            Book.my_books(user_id).reading_books.move_from_reading_to_list

        # Otherwise, create a new one
        else
            Book.my_books(user_id).create(:title => "Sample book", :reading => 1)

        end
    end
  end 
```

**我的 rake 任务看起来像这样（scheduler.rake 放在 lib/tasks 中）：**

```
task :queue => :environment do
  puts "Updating feed..."
  @books = Book.all
  @books.each do |book|
    book.update_queue
  end
  puts "done."
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T04:51:24.590

可能的原因是，程序流程没有进入 if days_gone >= 7 条件。

你可以通过两种方式检查

1 - 简单易行的方法（但不是很好的方法）

使用 p 语句每个都具有某种意义全文

前任：

```
def update_queue
    days_gone = (Date.today - Date.parse(Book.where(:reading => 1).last.created_at.to_s)).to_i

    p "days gone : #{days_gone}"   

    # If been 7 days since last 'currently reading' book created
    if days_gone >= 7
        p "inside days_gone >= 7"
    etc... 
```

2 - 使用 ruby​​ 调试器并使用调试点

在 Gem 文件中添加

```
gem 'debugger' 
```

并在需要的地方插入断点

```
def update_queue
        days_gone = (Date.today - Date.parse(Book.where(:reading => 1).last.created_at.to_s)).to_i
       debugger 
```

[更多帮助](http://jeremyhubert.com/articles/debugging-in-rails.html)

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T03:37:18.330

我会将`update_queue`逻辑移至 User 模型并稍微修改 Book 模型，然后执行以下操作：

```
# in book.rb
# change :reading Boolean field to :reading_at Timestamp
scope :queued, where(:queued => true)
scope :earliest_first, order("books.created_at")
scope :reading_books, where("books.reading_at IS NOT NULL")

def move_from_queue_to_reading
  self.update_attributes(:queued => false, :reading_at => Time.current);
end

def move_from_reading_to_list
  self.update_attributes(:reading_at => nil);
end

# in user.rb
def update_queue
  reading_book = books.reading_books.first
  # there is an edge-case where reading_book can't be found
  # for the moment we will simply exit and not address it
  return unless reading_book 

  days_gone = Date.today - reading_book.reading_at.to_date

  # If less than 7 days since last 'currently reading' book created then exit
  return if days_gone < 7

  # wrap modifications in a transaction so they can be rolled back together
  # if an error occurs
  transaction do
    # First deal with the 'currently reading' book if there is one
    reading_book.move_from_reading_to_list

    # If there's a queued book, move it to 'currently reading'
    if books.queued.exists?
      books.queued.earliest_first.first.move_from_queue_to_reading
    # Otherwise, create a new one
    else
      books.create(:title => "Sample book", :reading_at => Time.current)
    end
  end
end 
```

现在你可以让 Heroku 调度器每天运行一次这样的事情：

```
User.all.each(&:update_queue) 
```

修改`User.all`为仅在需要时返回活动用户。

哦，您可以在测试时使用 timecop gem 来操作时间和日期。

# php - 无法登录 Drupal

> ID：14116247
> 
> 赞同：1
> 
> 时间：2013-01-02T02:30:42.810
> 
> 标签：php, drupal, content-management-system

我正在创建自己的 Drupal 主题，但我注销后查看它的外观，但无法重新登录以更改设置。

我去了`/?q=user`，那也没用。到目前为止，我的主题只显示了站点名称和口号。我可以在服务器上的文件中更改它吗？还是我必须卸载drupal并重新安装它？

我的网址是[aidrupal.freeiz.com](http://aidrupal.freeiz.com/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T02:35:16.360

通过 settings.php 文件更改回默认主题。这是一个解释如何的线程：http: [//drupal.org/node/87390](http://drupal.org/node/87390)

或者，根据 Jonathan 的评论，将默认主题中的文件粘贴到您的文件上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:46:26.553

查看您提供的链接的 HTML 源代码后，您的`page.tpl.php`或`node.tpl.ph`p 文件似乎没有正确解析。

请浏览它们，看看这些文件是否有任何错误。

谢谢。

# ruby-on-rails - 在 Rails 控制器中通过数据库查询设置变量

> ID：14116252
> 
> 赞同：0
> 
> 时间：2013-01-02T02:32:14.373
> 
> 标签：ruby-on-rails, database, controllers

我希望管理员能够`Rides`在他的仪表板页面上查看列表`admin_dash#index`（它以典型的方式遍历表中的每个变量）。

这是管理破折号的控制器：

```
class AdminDashController < ApplicationController
  def index
    @pending_rides = Ride.find_by_completed(false)
    @completed_rides = Ride.find_by_completed(true)
  end
end 
```

在`rails console`中，这些精确的搜索返回正确的结果。但在视图中，这两个变量似乎都是`nil`（甚至不是空数组）。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T02:36:40.107

尝试使用`Ride.find_all_by_completed(bool)`

# node.js - 将 Haxe 模块导入 node.js 脚本

> ID：14116253
> 
> 赞同：4
> 
> 时间：2013-01-02T02:32:17.427
> 
> 标签：node.js, haxe

使用 node.js 和 Haxe，有没有办法编写一个函数，从 Haxe 文件生成 node.js 模块，然后返回生成的模块？我开始使用 Haxe 编写 node.js 模块，我需要一种更轻松地导入模块的方法。

```
function requireHaxe(variableToRequire, haxeFileLocation){
    //generate a JavaScript module from the Haxe file, and then return the generated JavaScript module
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-07-31T21:35:39.183

考虑这个

```
//Haxenode.hx

class Haxenode {
  @:expose("hello")
  public static function hello(){
    return "hello";
  }
} 
```

`@:expose("hello")`一部分是把东西放进去`module.exports`。

现在启动

```
haxe -js haxenode.js -dce no Haxenode 
```

现在你可以`haxenode.js`在 nodejs中使用

```
var haxenode = require('./haxenode.js');
var hello = haxenode.hello; 
```

因此，这结合在一起就是您问题的答案：

```
var cp = require('child_process');

function requireHaxe(haxeClassPath,cb){
    //generate a JavaScript module from the Haxe file, and then return the generated JavaScript module

    cp.exec('haxe -js haxenode.js -dce no ' + haxeClassPath,function(err){
        if (err){
            cb(err); return;
        }

        cb(null,require('./haxenode.js'));
    });
} 
```

请注意，输出文件名是存根。

但不要这样做 - 最好将 haxe 编译为构建步骤（带有所有必要的编译选项），然后`require`在运行时使用常规。

# php - php正则表达式，扫描文档以输出行和值

> ID：14116258
> 
> 赞同：3
> 
> 时间：2013-01-02T02:34:40.870
> 
> 标签：php, regex, preg-match-all

我知道你们是正则表达式大师，我在使用 php preg_match_all 的正则表达式模式时遇到了困难，

```
$var = "1        CARRYL               CLOYDE          GLADWIN         93 SOESDYKE LINDEN        FARMER             129790657
        1        fdfdfd               CLOYDE          GLADWIN         93 SOESDYKE LINDEN        FARMER             129790657
        1        dfdfdf               CLOYDE          GLADWIN         93 SOESDYKE LINDEN        FARMER             129790657
        1        gfgfgg               CLOYDE          dfdfdfd         93 SOESDYKE LINDEN        FARMER             129790657
";

$regex = "#(\d+) [A-Z]+  [A-Z]+  [A-Z]+ [0-9-A-Z]+  [A-Z]+ (\d+)#";
preg_match_all($regex,$var,$array);

print_r($array);
?> 
```

当我执行这个脚本时，这是我得到的结果。

```
Array ( [0] => Array ( ) [1] => Array ( ) [2] => Array ( ) ) 
```

我正在寻找的结果在下面列出，不幸的是我认为我的表达中缺少一些东西，请你帮忙。

```
Array
(
    [0] => Array
        (
            [0] => 1        CARRYL               CLOYDE          GLADWIN         93 SOESDYKE LINDEN        FARMER              129790657
            [1] => 1        fdfdfd               CLOYDE          GLADWIN          93 SOESDYKE LINDEN        FARMER             129790657
            [2] => 1        dfdfdf               CLOYDE          GLADWIN          93 SOESDYKE LINDEN        FARMER             129790657
            [2] => 1        gfgfgg               CLOYDE          GLADWIN          93 SOESDYKE LINDEN        FARMER             129790657

        )

) 
```

我有一个包含 $var 中定义的完整列表的文档，我想要正则表达式模式来扫描文档以查找此数据，我遇到了很大的困难，请您帮忙，谢谢您的时间和精力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T02:43:45.950

`m`对于多行和`i`不区分大小写。

```
$regex = "#\d+\s+[A-Z]+\s+[A-Z]+\s+[A-Z]+\s+\d+\s[A-Z]+\s[A-Z]+\s+[A-Z]+\s+\d+#mi";

preg_match_all($regex, $var, $array);

print_r($array); 
```

# c# - 使用 SendGrid 发送 100 封电子邮件的最佳方式是什么，每封电子邮件都有不同的 CC 和 BCC

> ID：14116259
> 
> 赞同：1
> 
> 时间：2013-01-02T02:34:56.633
> 
> 标签：c#, sendgrid

通过在 X-SMTPAPI 标头中添加“收件人”收件人，SendGrid 能够通过一次调用其 SMTP API 向多个收件人发送邮件：http: [//sendgrid.com/docs/API_Reference/SMTP_API/index.html](http://sendgrid.com/docs/API_Reference/SMTP_API/index.html)。

您可以使用替换为每个收件人自定义电子邮件正文：http: [//sendgrid.com/docs/API_Reference/SMTP_API/substitution_tags.html](http://sendgrid.com/docs/API_Reference/SMTP_API/substitution_tags.html)

但我找不到为每个收件人发送自定义抄送和密件抄送的方法。我想为每封电子邮件发送不同的抄送和密送地址。怎么做？

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:46:14.873

无法通过 X-SMTPAPI 标头在每封邮件的基础上自定义抄送或密件抄送。但是，您可以分配适用于您发送的所有电子邮件的密件抄送或抄送。

例如，如果您要发送如下所示的内容：

```
"x-SMTPAPI": {
  "to": ["user1@example.com", "user2@example.com", ...],
  "bcc": ["some.employee1@example.com", "some.employee2@example.com"],
  ...
} 
```

user1@example.com 和 user2@example.com 都会收到电子邮件，而 some.employee1@example.com 和 some.employee2@example.com 将在两封发出的电子邮件中被密件抄送。

# qt - Qt/OpenGL - 在 3D 场景上绘制 2D“比例线”

> ID：14116262
> 
> 赞同：3
> 
> 时间：2013-01-02T02:35:06.577
> 
> 标签：qt, opengl, drawing

我有一个 QGLWidget 的子类“GLWidget”，我在其中渲染 3D 场景。我可以旋转并放大它。

我用`QTimer`以下函数调用：

```
void GLWidget::processCurrent()
{
    draw();
    printStats();
    glFlush();
    swapBuffers();
} 
```

主要的OpenGL渲染函数“ `draw()`”是：

```
void GLWidget::draw()
    {
      if (isDisplayFirst)
      {
        isDisplayFirst = false;
        glViewport(0, 0, w_width, w_height);

        glMatrixMode(GL_PROJECTION); // Select The Projection Matrix
        glLoadIdentity(); // Reset The Projection Matrix

        glMatrixMode(GL_MODELVIEW); // Select The Modelview Matrix
        glLoadIdentity(); // Reset The Modelview Matrixi

        gluPerspective(45.0f, (float)w_width / w_height, g_nearPlane, g_farPlane);
        gluLookAt (0.0, 0.0, 3.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0);
        glScalef(0.03f, 0.03f, 0.03f);
      }

      rotateScene();

      glClearColor(0.0 ,0.0, 0.0, 0.0);
      glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

      glEnable(GL_POINT_SPRITE);
      glTexEnvi(GL_POINT_SPRITE, GL_COORD_REPLACE, GL_TRUE);
      glEnable(GL_VERTEX_PROGRAM_POINT_SIZE_NV);

      glEnable(GL_BLEND);
      glBlendFunc (GL_SRC_ALPHA, GL_ONE);

      GLuint vbo_disk = 0;

        glBindBuffer(GL_ARRAY_BUFFER, vbo_disk);
        glVertexPointer(4, GL_DOUBLE, 4*sizeof(double), Galaxy->pos);
        glEnableClientState(GL_VERTEX_ARRAY);

        glColor4f(1.0f, 1.0f, 1.0f, 0.2f);
        glDrawArrays(GL_POINTS, 0, Galaxy->getNumParticles_disk());

        glBindBuffer(GL_ARRAY_BUFFER, 0);
        glDisableClientState(GL_VERTEX_ARRAY);

        glDisable(GL_BLEND);
        glDisable(GL_POINT_SPRITE);
    } 
```

我已经用“ `printStats()`”函数在这个 GLWidget 上渲染了 2D 文本（统计数据）。我现在想在这个 3D 场景上画一条“2D 比例线”。

我通过以下方式成功绘制了这条线`printStats()`：

```
 glDisable(GL_TEXTURE_2D);
  glColor3f(1.0f, 1.0f, 1.0f);
  glLineWidth(3.0f);
  glBegin(GL_LINES);
  glVertex2d(5, 40);
  glVertex2d(20, 40);
  glEnd();
  glEnable(GL_TEXTURE_2D); 
```

但我的问题是，当我进行旋转或缩放时，这条线会随着 3D 场景移动。

在能够对 3D 对象进行操作的同时锁定这条 2D 线的方法是什么？

我想避免使用带有覆盖的“overpainting” `paintEvent`。

我也尝试使用 glPush/Pop Matrix，但 2D 和 3D 之间存在冲突。

你能给我一些建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T03:21:53.203

您正在尝试实现 HUD 功能，原则上您需要正常绘制 3D 场景，然后备份您想要重用的所有 OpenGL 状态，并使用[`gluOrtho2D`](http://www.opengl.org/sdk/docs/man2/xhtml/gluOrtho2D.xml)or设置新的投影矩阵`glOrtho`。此外，您还想关闭深度检查。

调用该`ortho`函数后，您很可能会以屏幕比例绘制，因此您必须相应地计算线条的大小。完成 hud 后，您可以将更改从堆栈中弹出，以便再次绘制。

关于绘制 OpenGL HUD 的 stackoverflow 有几个问题

*   [OpenGL 2D HUD 优于 3D](https://stackoverflow.com/questions/5467218/opengl-2d-hud-over-3d)
*   [3D 应用中的 OpenGL 2d HUD](https://stackoverflow.com/questions/8370537/opengl-2d-hud-in-3d-application)

在gamedev论坛上进行了相当不错的讨论

*   [http://www.gamedev.net/topic/388298-opengl-hud/](http://www.gamedev.net/topic/388298-opengl-hud/)

# php - 在设计基本网站时，我应该使用 PHP 吗？

> ID：14116264
> 
> 赞同：3
> 
> 时间：2013-01-02T02:35:13.200
> 
> 标签：php, jquery, html, adobe-edge

过去，即使是基本的网站设计，我也一直使用 PHP，而且我从未使用过 .html 扩展名。这样做有几个原因，但最大的原因之一是能够在我的网站上使用“PHP Includes”，所以我只需要设计一次导航。

这很好用，因为 Dreamweaver 始终能够呈现不是真正“服务器端”的基本 PHP 内容，例如包含。但现在，我正在尝试改用 Adob​​e Edge Code，因为它确实是轻量级的，而且我不必在速度较慢的计算机上加载大型应用程序来工作。它也非常好，因为它确实具有出色的 CSS 编辑功能，以及仅在浏览器中运行的精彩实时预览。据我所知，当您使用 .php 文件时，它们无法做更酷的事情。

所以 - 我想我的问题是，是否有可能只使用 HTML/CSS/JS 来做类似“PHP-Includes”的事情？或者我真的需要停止懒惰，将我的工作流程切换回所有 HTML，只需复制/粘贴每个页面上的导航部分。

另外 - 抱歉，如果这个问题很像“讨论”，我试着尽可能直截了当地写出来。

编辑：该应用程序支持 JavaScript、CSS 和 HTML，我的一位朋友推荐使用 jQuery。任何人都知道它如何与 jQuery 一起工作？或者如果会？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T02:47:41.787

服务器端包含的替代方案和 PHP 是使用静态站点生成器：
一个脚本，它获取您的文件（HTML、Markdown 或其他格式）并将它们与其他 HTML 和样式组合，最后返回由 HTML 组成的整个网站， JavaScript 和 CSS。

它们以许多不同的格式和语言存在。最受欢迎的可能是[Jekyll (Ruby)，但在 PHP (](https://github.com/mojombo/jekyll) [Phrozn](http://www.phrozn.info/en/) )、Python ( [Hyde](http://ringce.com/hyde) )、Node.js ( [Punch](http://laktek.github.com/punch/) ) 等中也有替代品。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T02:38:39.867

Vanilla HTML 和 CSS 没有任何原生包含的功能。最接近的是服务器解析的 html（又名“shtml”），它*可以*包含，但如果你走这条路，你还不如回到 PHP（shtml 与 PHP 相比没有优势）。

正如您所说，我认为您的选择是 PHP 或复制/粘贴。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T02:38:11.300

是的，您可以实现与`include`使用[服务器端包含相同的功能](http://en.wikipedia.org/wiki/Server_Side_Includes)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T02:38:21.130

还有其他技术，例如服务器端包含 (.shtml) - [http://en.wikipedia.org/wiki/Server_Side_Includes](http://en.wikipedia.org/wiki/Server_Side_Includes)，但我完全不熟悉这个 Adob​​e 平台或它所允许的内容。

# html - 将文本环绕在 div 周围

> ID：14116266
> 
> 赞同：0
> 
> 时间：2013-01-02T02:35:43.797
> 
> 标签：html, css, text

如何让 div 2 环绕 div 1 ？

（两个 div 都包含文本）

```
+---++------------------+
|   ||                  |
| 1 ||                  |
|   ||          2       |
+---+|                  |
+----                   |
|                       |
+----------------------- 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T02:38:53.110

浮动 div 1：[演示](http://jsbin.com/overof/5/edit)

CSS：

```
#d1 {
  float: left;
} 
```

HTML：

```
<div id="d1">Hello world. Hello world. Hello world. </div>
<div id="d2">
  Testing. Testing. Testing. Testing. Testing. Testing. Testing. Testing. Testing. Testing. Testing. Testing. Testing. Testing. Testing. Testing. Testing. Testing. Testing. Testing. Testing. Testing. Testing. Testing. Testing. Testing. Testing.
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T02:45:04.937

嵌套 div，将它们向左浮动并为内部 div 应用尺寸样式。这是一个演示： http: [//jsfiddle.net/njmWS/](http://jsfiddle.net/njmWS/)：

HTML：

```
<div>
    <div>
        <div>
            Hello
        </div>
        My name is abraham lincoln
    </div>
    And I hunt vampires
</div> 
```

CSS：

```
div{
    float:left;
    background-color:gray;
    color:white;
    height:200px;
    width:300px;
}
div > div{
    background-color:blue;
    height:100px;
    width:50%;
}
div > div > div{
    background-color:red;
    height:50px;
    width:70%;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T02:39:19.927

CSS，对吧？尝试分层你的 div，看看你想出了什么。从您的图表中，将 div 2 改为 div 1，以便它是更大的空间，因此另一个 div 将适合它。

# actionscript-3 - MXMLC 编译器缺少文件系统库

> ID：14116270
> 
> 赞同：0
> 
> 时间：2013-01-02T02:36:53.727
> 
> 标签：actionscript-3

直到此时直接从 MXMLC 命令行中，我才遇到麻烦。在编译 Actionscript 3 代码时，我遇到了依赖问题。

```
import flash.filesystem; 
```

我得到

```
 Error: Definition flash:filesystem could not be found 
```

还有另外一两个文件相关的库，例如 filestream。在哪里可以找到这些标准库以及如何将它们添加到我的 MXMLC 库 PATH？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T02:52:16.587

您尝试使用的具体类是什么？如果要导入`flash.filesystem`包中的所有类，则需要`*`在该导入语句的末尾添加一个。否则，您需要附加类名。类似于其中之一：

```
import flash.filesystem.*; 
```

或者

```
import flash.filesystem.File; 
```

另一个可能存在问题的是作为 SDK 一部分的 flex-config.XML（或 air-config.xml）文件中的值。您可能需要对其进行配置以包含 AIR sdk 中的类等。

# jquery - 无法显示更新的图像

> ID：14116271
> 
> 赞同：2
> 
> 时间：2013-01-02T02:36:58.163
> 
> 标签：jquery, css, url

我有以下代码：

**jQuery**

```
$("document").ready(function(){
    var imglink;
    imglink = 'url("http://poweruser.aeiou.pt/wp-content/uploads/2012/12/google.jpg")';
    $('#trick_img').css('content',imglink);

    $(document).on("click","change",function(){
        imglink = 'url("http://poweruser.aeiou.pt/wp-content/uploads/2012/12/Google-Gmail.jpg")';
        $('#trick_img').css('content',imglink);
    });

});​ 
```

**HTML**

```
<image id="trick_img" draggable="false"/><br/>
<button id="change">Change image</button>​ 
```

**CSS**

```
img#trick_img { margin:10px; } 
```

**测试链接** [http://jsfiddle.net/Y5jA9/](http://jsfiddle.net/Y5jA9/)

**我的问题是：**如何改变屏幕上的图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T02:42:08.350

这一行：

```
$(document).on("click","change",function(){ 
```

应改为：

```
$(document).on("click","#change",function(){ 
```

按 id 引用“更改图像”按钮

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T02:43:17.133

```
$(document).on("click","#change",function(){
        imglink = 'http://poweruser.aeiou.pt/wp-content/uploads/2012/12/Google-Gmail.jpg';
        $('#trick_img').attr('src',imglink);
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T03:08:21.807

```
 $(document).on("click","#change",function(){
        var imglink;
        imglink = 'http://poweruser.aeiou.pt/wp-content/uploads/2012/12/Google-Gmail.jpg';
        $('#trick_img').attr('src',imglink);
    }); 
```

尝试这个

[http://jsfiddle.net/Y5jA9/3/](http://jsfiddle.net/Y5jA9/3/)

# bash - grep 查找具有特定名称的目录中所有文件中的字符串

> ID：14116275
> 
> 赞同：7
> 
> 时间：2013-01-02T02:37:22.623
> 
> 标签：bash, directory, grep, find

我在具有这种结构的目录中有 csv 文件：

```
20090120/
20090121/
20090122/
etc... 
```

我想在这些目录中的所有 csv 文件中查找某个字符串，但仅限于 2009 年 1 月，例如 200901*/*.csv

是否有一个 bash 命令行参数可以做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-02T02:39:37.123

是的。`grep "a certain string" 200901*/*.csv`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-02T02:39:48.930

你需要类似的东西：

```
grep NEEDLE 200901*/*.csv 
```

（假设您的搜索字符串`NEEDLE`当然是 - 只需将其更改为您*实际*查找的任何内容）。

shell 非常有`bash`能力扩展多级路径和文件名。

也就是说，当然，仅限于 CSV 文件向下一个目录。如果要搜索整个子树，则必须使用稍微复杂（且适应性强）的`find`命令。

但是，假设您可以设置深度限制，您可以摆脱类似（三个级别）：

```
grep NEEDLE 200901*/*.csv 200901*/*/*.csv 200901*/*/*/*.csv 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-02T04:13:25.457

**试试这个 ：**

```
grep -lr "Pattern" 200901*/*.csv 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-26T18:01:29.897

尝试结合使用**find**来搜索特定的文件名模式和**grep**来查找模式：

```
find . -name "*.csv" -print -exec grep -n "NEEDLE" {} \; | grep -B1 "NEEDLE" 
```

# android - 无法使用意图调用活动

> ID：14116276
> 
> 赞同：0
> 
> 时间：2013-01-02T02:37:36.940
> 
> 标签：android, android-intent, android-activity

我试图从我的主要活动中调用一个活动，但它正在崩溃，我无法弄清楚为什么。

我使用如下按钮从我的主要活动中调用活动

```
btnStart.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
            Intent i = new Intent(MainActivity.this, ShapeScreen.class);
            startActivity(i);   
    }
}); 
```

然后使用如下代码打开一个活动，它应该只显示布局shapesscreen.xml（其中没有错误）

```
public class ShapeScreen extends Activity {
   @Override
   public void onCreate(Bundle savedInstanceState) {
    setContentView(R.layout.shapescreen);
   }
} 
```

第二个活动在我的清单中定义

```
<activity
    android:name=".MainActivity"
    android:label="Cubic Measurement" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity>
<activity
    android:name=".ShapeScreen"
    android:label="Cubic Measurement" >
    <intent-filter>
        <action android:name="kurt.steveboss.shapescreen" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity> 
```

但是，当我单击此按钮时，应用程序崩溃，并且我的 LogCat 中出现以下错误

```
 01-02 15:03:37.550: I/InputReader(2100): Touch event's action is 0x1 (deviceType=0) [pCnt=1, pending(waiting finished signal)=0, s=]
 01-02 15:03:37.550: I/InputDispatcher(2100): Delivering touch to current input target: action: 0x1
 01-02 15:03:37.550: I/InputDispatcher(2100): Delivering touch to current input target: action: 0x1
 01-02 15:03:37.550: I/InputDispatcher(2100): Delivering touch to current input target: action: 0x1
 01-02 15:03:37.555: I/ActivityManager(2100): START {intent.toShortString} from pid 8045
 01-02 15:03:37.555: I/power(2100): *** acquire_dvfs_lock : lockType : 1  freq : 1000000 
 01-02 15:03:37.555: D/PowerManagerService(2100): acquireDVFSLockLocked : type : DVFS_MIN_LIMIT  frequency : 1000000  uid : 1000  pid : 2100  tag : ActivityManager
 01-02 15:03:37.555: W/ActivityManager(2100): mDVFSLock.acquire()
 01-02 15:03:37.570: D/ActivityManager(2100): Trying to launch applicationName
 01-02 15:03:37.580: D/KeyguardViewMediator(2100): setHidden false
 01-02 15:03:37.650: D/dalvikvm(8045): GC_FOR_ALLOC freed 22K, 2% free 18560K/18887K, paused 10ms
 01-02 15:03:37.655: I/dalvikvm-heap(8045): Grow heap (frag case) to 21.095MB for 2903056-byte allocation
 01-02 15:03:37.680: D/dalvikvm(8045): GC_CONCURRENT freed 2K, 2% free 21393K/21767K, paused 1ms+1ms
 01-02 15:03:37.765: D/dalvikvm(8045): GC_FOR_ALLOC freed <1K, 2% free 21394K/21767K, paused 9ms
 01-02 15:03:37.770: I/dalvikvm-heap(8045): Grow heap (frag case) to 23.864MB for 2903056-byte allocation
 01-02 15:03:37.790: D/dalvikvm(8045): GC_CONCURRENT freed <1K, 2% free 24229K/24647K, paused 1ms+2ms
 01-02 15:03:37.875: D/dalvikvm(8045): GC_FOR_ALLOC freed <1K, 2% free 24231K/24647K, paused 10ms
 01-02 15:03:37.880: I/dalvikvm-heap(8045): Grow heap (frag case) to 26.634MB for 2903056-byte allocation
 01-02 15:03:37.900: D/dalvikvm(8045): GC_CONCURRENT freed <1K, 2% free 27066K/27527K, paused 2ms+2ms
 01-02 15:03:37.985: D/dalvikvm(8045): GC_FOR_ALLOC freed <1K, 2% free 27067K/27527K, paused 9ms
 01-02 15:03:37.995: I/dalvikvm-heap(8045): Grow heap (frag case) to 29.404MB for 2903056-byte allocation
 01-02 15:03:38.015: D/dalvikvm(8045): GC_CONCURRENT freed <1K, 2% free 29902K/30407K, paused 1ms+1ms
 01-02 15:03:38.095: D/dalvikvm(8045): GC_FOR_ALLOC freed <1K, 2% free 29904K/30407K, paused 9ms
 01-02 15:03:38.105: I/dalvikvm-heap(8045): Grow heap (frag case) to 32.174MB for 2903056-byte allocation
 01-02 15:03:38.125: D/dalvikvm(8045): GC_CONCURRENT freed <1K, 2% free 32739K/33287K, paused 1ms+1ms
 01-02 15:03:38.210: D/dalvikvm(8045): GC_FOR_ALLOC freed <1K, 2% free 32741K/33287K, paused 10ms
 01-02 15:03:38.220: I/dalvikvm-heap(8045): Grow heap (frag case) to 34.944MB for 2903056-byte allocation
 01-02 15:03:38.235: D/dalvikvm(8045): GC_CONCURRENT freed <1K, 2% free 35576K/36167K, paused 2ms+2ms
 01-02 15:03:38.315: D/dalvikvm(8045): GC_FOR_ALLOC freed <1K, 2% free 35578K/36167K, paused 9ms
 01-02 15:03:38.325: I/dalvikvm-heap(8045): Grow heap (frag case) to 37.714MB for 2903056-byte allocation
 01-02 15:03:38.340: D/dalvikvm(8045): GC_CONCURRENT freed <1K, 2% free 38413K/39047K, paused 2ms+2ms
 01-02 15:03:38.415: D/dalvikvm(8045): GC_FOR_ALLOC freed <1K, 2% free 38414K/39047K, paused 10ms
 01-02 15:03:38.430: I/dalvikvm-heap(8045): Grow heap (frag case) to 40.485MB for 2903056-byte allocation
 01-02 15:03:38.445: D/dalvikvm(8045): GC_CONCURRENT freed <1K, 2% free 41249K/41927K, paused 2ms+2ms
 01-02 15:03:38.555: I/power(2100): *** release_dvfs_lock : lockType : 1 
 01-02 15:03:38.555: D/PowerManagerService(2100): releaseDVFSLockLocked : all DVFS_MIN_LIMIT are released 
 01-02 15:03:38.555: W/ActivityManager(2100): mDVFSLock.release()
 01-02 15:03:38.975: W/PowerManagerService(2100): Timer 0x7->0x3|0x0
 01-02 15:03:38.975: I/PowerManagerService(2100): Ulight 0x7->0x3|0x0
 01-02 15:03:38.975: D/lights(2100): write_int /sys/class/sec/sec_touchkey/brightness = 2
 01-02 15:03:38.975: D/PowerManagerService(2100): setLightBrightness : mButtonLight : 0
 01-02 15:03:39.725: D/KeyguardViewMediator(2100): handleTimeout 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T02:41:43.070

您应该使用该`.class`方法来启动您的 Activity。

```
btnStart.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                Intent i = new Intent(MainActivity.this, ShapeScreen.class);
                startActivity(i);   
            }
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T04:44:20.560

我认为您没有在应用程序中的 AndroidManifest.xml 文件上启动活动。您只需在 AndroidManifestfie 上尝试此代码

```
 <activity
 android:name=" .ShapeScreen" >
</activity> 
```

现在你可以试试这肯定会奏效

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T02:43:15.120

用这个

```
@Override
            public void onClick(View v) {
                Intent i = new Intent("YOUR_ACTIVITY_CLASS.this,ShapeScreen.class");
                startActivity(i);   
            } 
```

**代替**

```
 @Override
        public void onClick(View v) {
            Intent i = new Intent("kurt.steveboss.shapescreen");
            startActivity(i);   
        } 
```

# c++ - 在 C++ 中使用指针调用函数

> ID：14116278
> 
> 赞同：2
> 
> 时间：2013-01-02T02:38:02.753
> 
> 标签：c++, pointers

非常简单，我正在重新学习 C++，我正在接受指针。我了解基本概念，但我遇到了一些麻烦。**调用**这个函数的语法是什么？

```
void getTime(int& hours, int& minutes, int& seconds) const
{
    hours = hr;
    minutes = min;
    seconds = sec;
} 
```

正如您可能已经猜到的那样，该函数的要点是将时间（小时、分钟和秒）返回到位于函数调用所在范围内的三个指针。假设已经定义了 hr、min 和 sec .

此外，如果有人想详细说明指针（特别是何时使用 & 以及何时使用 *），将不胜感激。预先感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T02:44:51.003

您的函数签名使用`&`，表示通过引用。这意味着您只需将您的函数调用为

```
int h, m, s;

// ... code ...

getTime(h, m, s); 
```

因为您的函数通过引用传递这些参数，所以只要`getTime()`更改传递的参数之一，更改就会传播到函数外部，而不是通过值传递的参数，其中更改仅限于函数范围。

您可以通过将指针传递给变量来实现类似的效果：

```
void getTime(int * hours, int * minutes, int * seconds)
{
     // do stuff
}

// ... code ...

int h, m, s;
getTime(&h, &m, &s); 
```

在后一种情况下， the`&`是**地址**运算符。通过取消引用传递的地址，您的函数可以对其函数范围之外的内存进行更改。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T02:43:57.037

调用函数的语法是：

```
className.getTime(a, b, c); 
```

where`className`是您定义此方法的类的名称`a`，`b`, 和`c`都是整数的变量。参数列表中的 & 符号`&`表示变量可以修改其值。没有它，您可以修改参数，但不会更改相应的参数。这里没有使用指针，而不是从我可以看到的地方。

也许您将参数中的*一元* `&`与一元混淆了。一元的`&`作用是返回其操作数的内存地址。返回的地址恰好是一个指针；但是，这与您的示例无关。

如果要使用指针，则必须使用如下函数签名：

```
void getTime(int* a, int* b, int* c) const 
```

`*`这里意味着函数需要一个指针（一元`*`是取消引用）。我们会这样称呼它：

```
int *a, *b, *c;

getTime(a, b, c); 
```

或者像这样：

```
int a, b, c;

getTime(&a, &b, &c); 
```

不同之处在于第一个示例中的变量是指针，因此无需传递地址。在第二个示例中，我们需要传递地址，因为它会产生一个指向对象的指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T02:49:55.080

您在这里拥有的不是指针，而是*引用*。两者之间存在一些显着差异。首先，引用不能是`NULL`，它们必须指向已经初始化的东西。其次，所需的语法是不同的。

例如，如果您使用指针，则该函数将具有签名：

```
void getTime(int* hours, int* minutes, int* seconds) const
{
    hours = &hr;
    minutes = &min;
    seconds = &sec;
} 
```

然后你会这样称呼它：

```
int hours, minutes, seconds;
hours = minutes = seconds = 0;
getTime(&hours, &minutes, &seconds); 
```

引用以类似的方式起作用，也就是说，它们用于更改传入的底层参数，以及避免复制。但是，语法不同：

```
int hours, minutes, seconds;
hours = minutes = seconds = 0;
getTime(hours, minutes, seconds); //Notice & not required 
```

你什么时候使用每个？通常，尽可能使用引用，必要时使用指针。在现代 C++ 中，通常会避开指针以支持其他构造。对于诸如多态性或直接修改放入容器中的值之类的事情仍然需要它们（尽管这很可能会超出您的位置，如果这些都没有意义，请暂时忽略它）。

当传递一个类或大对象时，使用对常量的引用。因此，例如 a`std::vector`通常作为 传递`void some_func(const std::vector<int>& v)`。如果你真的需要修改它，通过引用传递，`void some_func(std::vector<int>& v)`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T02:48:50.073

您的问题中没有指针，但有*引用*。该函数的调用方式与使用普通参数完全相同，即：

```
//assuming an object called object that possesses the function:
//I am assuming its a object-function because of the 'const' modifier

int h, m, s;

object.getTime(h,m,s); 
```

这里简单解释一下指针和引用的区别：

*指针*存储另一个变量的内存地址，并用`*`字符声明。它们的值是一个整数，表示另一个变量在计算机内存中的位置；为了访问此值，您必须*取消引用*运算符（也是`*`字符）：

```
int * p; //p stores the location in memory of an int.
p = new int; //pointers must be dynamically allocated to avoid segfaults
p = &(some pre-existing int) //or set to the reference of another variable

*p = 7;//The * is used to access the data the pointer "points to"
delete p; //and must be deleted once they are done being used. 
```

*引用*类似于普通变量，因为它们包含常规数据，但不同之处在于它们在传递给函数时保持相同的内存位置（可能还有更多，我知道引用确实在这件事上表现得很好，尽管它们可能有其他一些定义）：

```
int& i; //i is an int.
i = 7; //and can be assigned like one
//and cannot be dynamically allocated or deleted 
```

希望这可以帮助。

# php - 我已经尝试过 application/pdf ....如何上传 pdf 文件？

> ID：14116286
> 
> 赞同：2
> 
> 时间：2013-01-02T02:39:00.893
> 
> 标签：php, html, file, pdf, upload

```
'<?php
    $allowedExts = array("jpg", "jpeg", "gif", "png");
$extension = end(explode(".", $_FILES["file"]["name"]));
if ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/png")
|| ($_FILES["file"]["type"] == "image/pjpeg"))
&& ($_FILES["file"]["size"] < 20000)
&& in_array($extension, $allowedExts))
  {
  if ($_FILES["file"]["error"] > 0)
    {
    echo "Return Code: " . $_FILES["file"]["error"] . "<br>";
    }
  else
    {
    echo "Upload: " . $_FILES["file"]["name"] . "<br>";
    echo "Type: " . $_FILES["file"]["type"] . "<br>";
    echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
    echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br>";

    if (file_exists("upload/" . $_FILES["file"]["name"]))
      {
      echo $_FILES["file"]["name"] . " already exists. ";
      }
    else
      {
      move_uploaded_file($_FILES["file"]["tmp_name"],
      "upload/" . $_FILES["file"]["name"]);
      echo "Stored in: " . "upload/" . $_FILES["file"]["name"];
      }
    }
  }
else
  {
  echo "Invalid file";
  }
?> ' 
```

我已经尝试过 application/pdf ....如何上传 pdf 文件？我可以将 jpg 和 png 上传到我的网站上，但不能用于 doc、txt 或 pdf。我知道这段代码适用于 $allowedExts = array("jpg", "jpeg", "gif", "png"); 只是，但如何更改 || ($_FILES["file"]["type"] == "image/jpeg") 到 || ($_FILES["file"]["type"] == "application/pdf")? 提前谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T02:41:46.323

您的代码正在寻找扩展 (pdf) && 类型

pdf 的 MIME 类型：

应用程序/pdf、应用程序/x-pdf、应用程序/acrobat、应用程序/vnd.pdf、文本/pdf、文本/x-pdf

Microsoft 文档的扩展和 mime 类型：http: [//fileext.com/faq/office_mime_types.php](http://filext.com/faq/office_mime_types.php)

* * *

我认为你可以解决这个问题：

修改您的页面添加此行

```
echo "Type: " . $_FILES["file"]["type"] . "<br> Extension: " . $_FILES["file"]["name"] . "<br>"; 
```

它将显示文件类型和名称。

# sql - 匹配多个具有相同值 SQL 的列

> ID：14116292
> 
> 赞同：5
> 
> 时间：2013-01-02T02:40:05.747
> 
> 标签：sql

假设该表具有 、 等列`akey1`以及`bkey2`更多`ckey3`类似的列。
有没有办法寻找一个共同的价值

`SELECT * FROM table WHERE %key% LIKE 'xyz'`

除了使用多个 AND ， OR 条件。解决方案是否特定于 DBMS 都没关系。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-02T02:45:51.080

缺少动态 sql，您将不得不拼出每个列名。但是您可以获得一些语法快捷方式，并且只列出一次常量：

```
SELECT * FROM table WHERE 'xyz' IN (akey1, bkey2, ckey3) 
```

使用动态 sql，您仍然必须发出相同的查询...但是您至少可以先使用字符串工具来构建它，如果您想使用通配符匹配，您可以在`information_schema.columns`视图中查找它们。但是，这涉及打开和迭代游标或将列数据返回给客户端，其中任何一个都涉及到更多的工作，而不仅仅是在原始查询中列出列名。希望您在开始向它发出查询之前至少对您的数据库有足够的了解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-31T13:42:13.247

你也可以试试这个方法

```
ALTER PROCEDURE USP_GetClinicNameList

	 @SearchStr varchar(50)
AS
BEGIN

SET @SearchStr = RTRIM(@SearchStr) + '%'

SELECT TOP (10)
	*
FROM clinic c
WHERE c.cclinicname LIKE @SearchStr
OR c.caddress1 LIKE @SearchStr
OR c.caddress2 LIKE @SearchStr
OR c.ccity LIKE @SearchStr
OR c.cstate LIKE @SearchStr
OR c.cclinicid LIKE @SearchStr
OR c.czip LIKE @SearchStr
OR c.ccliniccode LIKE @SearchStr
OR c.cphone LIKE @SearchStr
ORDER BY c.cclinicname

END
GO
```

希望它会更容易理解。

# openerp - 在 OpenERP 中设置默认日期

> ID：14116293
> 
> 赞同：4
> 
> 时间：2013-01-02T02:40:11.440
> 
> 标签：openerp

我正在为 OpenERP 7 创建一个模块，以便在创建新合作伙伴时将今天的日期设置为默认值。我已经安装了模块，重新启动了 Openerp 服务并且默认值没有改变。*（我为网站字段添加了一个“goofball”字段和虚假默认数据，以确保它不是 python lambda 代码问题。它不是......）*这是我在 partner.py 中的代码：

```
from osv import osv, fields
import datetime

class res_partner(osv.osv):
    _inherit = 'res.partner'

    _columns = {"goofball":fields.char('goofball', size=15)}

    _defaults = {
        'website': 'www.veppsight.com',
        'date': lambda *a: datetime.date.today().strftime('%Y-%m-%d'),
    } 
```

未为网站和日期字段输入默认数据，并且未在我在 psql 中验证的数据库中创建“goofball”字段。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-05T23:22:01.970

从 V6.1 开始，有一个新函数来处理今天的日期，称为 context_today。

您可以在以下链接中查看背景... [http://openerp-expert-framework.71550.n3.nabble.com/Bug-925361-Re-6-1-date-values-that-are-initialized -as-defaults-may-appear-as-quot-off-by-one-day-quoe-td3741270.html](http://openerp-expert-framework.71550.n3.nabble.com/Bug-925361-Re-6-1-date-values-that-are-initialized-as-defaults-may-appear-as-quot-off-by-one-day-quoe-td3741270.html)

基于此，您可以使用...

```
_ defaults = { 
'date1': fields.date.context_today, 
} 
```

问候，-马里奥

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T12:45:51.403

导入时间和默认值

```
_defaults = {
    'website': 'www.veppsight.com',
    'date': lambda *a: time.strftime('%Y-%m-%d'),
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T05:19:01.790

使用以下代码：

```
from osv import osv, fields
import time

class res_partner(osv.osv):
    _inherit = 'res.partner'

    _columns = {"goofball":fields.char('goofball', size=15)}

    _defaults = {
        'website': 'www.veppsight.com',
        'date1': time.strftime('%Y-%m-%d'),
    } 
```

如果可能的话，将字段名称重命名为其他名称`DATE`。日期在 POSTGRESQL 中为 DT

谢谢你

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T11:35:42.000

```
_defaults = {
        'date': lambda self,cr,uid,context={}: context.get('date', fields.date.context_today(self,cr,uid,context=context)), 
```

或者

```
'date': lambda self, cr, uid, context={}: context.get('date', time.strftime("%Y-%m-%d %H:%M:%S")), 
```

或者

```
'date' : fields.date.context_today,
 } 
```

Lambda 是 python 中的内联或匿名函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T13:09:00.773

这个怎么样：

```
从 osv 导入 o​​sv，字段
进口时间

类 res_partner(osv.osv):
    _inherit = 'res.partner'

    _columns = {"goofball": fields.char('goofball', size=15)}

    _defaults = {
        '网站': 'www.veppsight.com',
        'date1': lambda *a: time.strftime('%Y-%m-%d'),
    }

res_partner()

```

# php - 根据值组合数组中的字段

> ID：14116298
> 
> 赞同：1
> 
> 时间：2013-01-02T02:41:14.483
> 
> 标签：php

因此，我查看了几篇关于 array_merge 和 array_unique 的帖子，但没有看到与我正在尝试做的完全一样的事情。我假设解决方案是这样的：[PHP - Merge-down multidimensional arrays by named key](https://stackoverflow.com/questions/4748292/php-merge-down-multidimensional-arrays-by-named-key?rq=1)，除了我使用的是字符串，而且我也会用重复的键结束，我认为这是行不通的.

我有一个数组 ($classagg)，我用它来创建一个网页详细说明事件的类。我目前使用的代码是：

```
usort($classagg, function($a, $b) {
 return strcmp($a['title'], $b['title']);
});

foreach($classagg as $out){
print "
<p>
<a class=\"education-class-list-title\" name=\"$out[presenter]\">$out[title]</a><br />
<span class=\"education-class-list-description\">$out[description]</span><br />
<span class=\"education-class-list-presenter\"> Presented by: <a           href=\"/event/$out[eventType]/$out[eid]?qt-event=3#$out[presenter]\">$out[presenter]</a>        </span>
</p>
";
} 
```

一切都运行良好，但是我有一些课程，其中两个演讲者正在展示同一个课程。该系统设置为 CRM，所以很遗憾，我无法为两位演示者提供组合应用程序。

当前数组的简化版本可能如下：

```
Array
(
    [0] => Array
        (
            [title] => Class 1
            [description] => This is a Class
            [presenter] => John
        )

    [1] => Array
        (
            [title] => Class 2
            [description] => This is a another class
            [presenter] => Sue
        )

    [2] => Array
        (
            [title] => Class 1
            [description] => Sally is presenting with John
            [presenter] => Sally
        )

) 
```

我想合并数组 0 和 2，保留标题，保留其中一个描述（最好是较长的），并保留两个名称。

我非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T02:55:03.077

```
$newArray = array();

foreach( $array as $class ) {
  if( isset( $newArray[$class['title']] ) ) {
    $presenters = explode( ', ', $newArray[$class['title']]['presenter'] );
    $presenters[] = $class['presenter'];
    $newArray[$class['title']]['presenter'] = implode( ', ', $presenters );

    $e = $newArray[$class['title']]['description'];
    $n = $class['description'];
    $newArray[$class['title']]['description'] = (strlen($n) > strlen($e) ? $n : $e);
  }
  else {
    $newArray[$class['title']] = $class;
  }
} 
```

# protocols - 如何在 Clojurescript 中使用 deftype 实现关联结构

> ID：14116299
> 
> 赞同：4
> 
> 时间：2013-01-02T02:41:29.253
> 
> 标签：protocols, clojurescript

我想提供一个基于[Javascript Typed Arrays](http://www.khronos.org/registry/typedarray/specs/latest/)的向量的 Clojurescript 实现，它支持 assoc、replace 等。我想我想这样做（也许有更好的方法，或者也许有人已经做到了？）。大概我会使用 deftype，但我应该为哪些协议提供“混凝土”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T00:50:50.087

让我们看看内置向量实现了什么。您可以[在 github 上](https://github.com/clojure/clojurescript/blob/master/src/cljs/cljs/core.cljs#L2948)查看源代码。

看起来是：`Object`, `IWithMeta`, `IMeta`, `IStack`, `ICollection`, `IEmptyableCollection`, `ISequential`, `IEquiv`, `IHash`, `ISeqable`, `ICounted`, `IIndexed`, `ILookup`, `IMapEntry`, `IAssociative`, `IVector`, `IReduce`, `IKVReduce`, `IFn`, `IEditableCollection`and `IReversible`.

这很多，但是由于每个方法都定义了一种或最多两种方法，所以工作量并不大。另外，您可以保留其中的一些未实现，例如`IEditableCollection`哪些仅用于瞬态或`IReduce`哪些用于新的减速器功能。

您甚至不必让您的新数据结构完全像内置 Vector 一样工作。例如，你可以让它实现所有顺序的东西，而不用担心地图的东西，当然，它不如普通的 Vector 方便。

# php - symfony 项目标题中的动态数据

> ID：14116302
> 
> 赞同：0
> 
> 时间：2013-01-02T02:42:03.140
> 
> 标签：php, layout, header, symfony1, symfony-1.4

我有一个 Symfony 1.4 项目。如您所知，模板布局是在应用程序的模板文件夹中独立定义的，然后普遍应用于所有其他模板。我的布局非常简单，如下所示：

```
<div id = "header">
</div>
<div id = "content">
<?php echo $sf_content ; ?>
</div>
<div id = "footer">
</div> 
```

$sf_content，正如大多数 symfonians 所知道的，本质上是为当前正在查看的任何网页吐出模板。如果我的标题需要一些特定数据，例如注销、徽标等，我只需将其包含在标题中即可。这很好用，因为它本质上是静态的。我面临的挑战是如何在页眉标签中包含动态且特定于页面的数据，因为 UI 要求我将其包含在其中。

例如，我的一个网页需要在下拉/选择菜单中加载用户特定数据。这是动态的，范围可以从 0 到 100，并且特定于每个用户。创建这个下拉菜单不是问题，我已经完成了这部分。挑战在于，鉴于我的数据成为 $sf_content 的一部分并且在我的内容 div 中吐出，我如何将其加载到标题中。

有没有办法将我的 $sf_content 的特定部分移动到标题 div 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T02:49:54.673

在您的 actions.php 中：

```
$this->getResponse()->setSlot('someData', 'and its value'); 
```

在 layout.php 中：

```
<div id="header">
<?php echo get_slot('someData'); ?>
</div>
<div id="content">
<?php echo $sf_content ; ?>
</div>
<div id="footer">
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:18:05.353

插槽为此工作。它们可以像上面的第一个答案一样在操作中设置，也可以在模板本身中定义它们。这就是我在为布局定义动态数据的地方所做的。

在您的示例中：

```
<div id="header">
  <?php include_slot('some slot name')?>
</div>
<div id="content">
<?php echo $sf_content() ?>
</div>
<div id="footer">
</div> 
```

在模板中，您将定义以下内容：

```
<?php slot('some slot name')?>
  //your code goes here
<?php end_slot() ?> 
```

当布局被渲染时，Symfony 会将代码放在`slot()`和之间`end_slot()`，你使用`include_slot()`.

为方便起见，我创建了一个包含在所有模板中的全局部分，它定义了整个应用程序中使用的各种公共插槽。有关插槽及其用法的更多信息，请[点击此处](http://symfony.com/legacy/doc/gentle-introduction/1_4/en/07-Inside-the-View-Layer#chapter_07_sub_slots)

# asp.net-mvc - 使用 HTML.BeginForm 时，ReturnUrl 如何存储在 MVC4 Razor 页面中？

> ID：14116312
> 
> 赞同：2
> 
> 时间：2013-01-02T02:43:31.610
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我正在使用以下 Razor 代码：

```
@using (Html.BeginForm("action", "controller", new { ReturnUrl = ViewBag.ReturnUrl }, FormMethod.Post, new { @class = "form", @id = "registerForm", data_href = "/User/Account/Register" }))
{
    ....
} 
```

这会产生：

```
<form action="/User/Account/Register" class="form" data-href="/User/Account/Register" id="registerForm" method="post" novalidate="novalidate"> 
```

我在生成的代码中没有看到任何对 ReturnUrl 的引用。有人可以解释这是作为 HTML 的一部分存储的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T04:12:03.407

让我们看看你的代码

```
@using (Html.BeginForm("action", "controller", new { ReturnUrl = ViewBag.ReturnUrl }, FormMethod.Post, new { @class = "form", @id = "registerForm", data_href = "/User/Account/Register" }))
{
    ....
} 
```

第一个参数是操作方法名称，第二个是控制器，第三个参数是[`RouteValueDictionary`](http://msdn.microsoft.com/en-us/library/dd493084%28v=vs.108%29.aspx)，所以当您指定 ReturnUrl 时，它成为路由数据参数的一部分，并且在您的操作方法中您可以像访问它一样

```
public ActionResult action(FormColection col, string ReturnUrl){
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-26T12:28:34.347

由于某种原因，我没有在表单标签中获得所需的 returl 参数

> 通过写这个

```
@using(Html.BeginForm("Login", "Account",
                new { returnUrl = ViewBag.ReturnUrl, }, FormMethod.Post, null)) 
```

> 想要这个，它应该用html写这个

```
 <form action="/Account/Login?returnUrl=%2FDashboard%2FIndex" method="post"> 
```

> 但是在浏览器html中得到这个

```
<form action="/Account/Login/Dashboard/Index" method="post"> 
```

**解决方案：**

```
@using(Html.BeginForm("Login", "Account",
                new { backUrl = ViewBag.ReturnUrl, }, FormMethod.Post, null)) 
```

> 将产生这个

```
<form action="/Account/Login?backUrl=%2FDashboard%2FIndex" method="post"> 
```

# javascript - 创建 NodeJS + Redis 应用程序导致错误退出代码 139

> ID：14116315
> 
> 赞同：4
> 
> 时间：2013-01-02T02:43:40.347
> 
> 标签：javascript, node.js, redis

我的 app.js 有以下内容：

```
var express = require('express')
  , http = require('http')
  , path = require('path')
  , redis = require('redis')
  , client = redis.createClient();

var app = express();

app.configure(function(){
    app.set('port', process.env.PORT || 3000);
    app.set('views', __dirname + '/views');
    app.set('view engine', 'jade');
    app.use(express.favicon());
    app.use(express.logger('dev'));
    app.use(express.bodyParser());
    app.use(express.methodOverride());
    app.use(express.cookieParser('your secret here'));
    app.use(express.session());
    app.use(app.router);
    app.use(require('stylus').middleware(__dirname + '/public'));
    app.use(express.static(path.join(__dirname, 'public')));
});

app.configure('development', function(){
  app.use(express.errorHandler());
});

require('./routes')(app);

client.on("connect", function () {
    console.log("Client on connect");
});

http.createServer(app).listen(app.get('port'), function(){
  console.log("Express server listening on port " + app.get('port'));
}); 
```

我所尝试的只是使用[node_redis](https://github.com/mranney/node_redis)库来连接 Redis 实例。Node.js 和 Redis 都安装在本地。我想指出的一件事是我创建并尝试使用 Jetbrains 的 Webstorm 运行这个项目（因为我想要一个为我提供一些调试功能的 IDE）。字符串 'Client on connect' 已记录到控制台，但我的应用程序几乎每次都会崩溃`'Process finished with exit code 139'`。我尝试通过命令行运行该应用程序，该应用程序没有崩溃。最糟糕的是，当应用程序无法在 Webstorm 中运行时，没有任何类型的堆栈跟踪。有没有人知道问题是什么，或者我可以在哪里找到有关此错误代码的更多信息？

另外，为了让我们在同一个页面上：我的 Redis 服务器已启动并正在运行，并从另一个自定义 web 应用程序接收持续的数据流。我能够启动 redis-cli，并验证 Redis 是否确实包含任何数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T06:20:16.550

如果您使用的是 Unix 类型的操作系统，则 139 表示“128 + 您的 Node 进程崩溃的信号编号”。所以在你的情况下，那个信号是 11，在大多数 Unices 上意味着 SIGSEGV。换句话说：Node 进程在某种无效的内存引用上崩溃。

根据我的经验，当您在从 IDE（或其他应用程序）启动进程时遇到此类错误时，通常意味着 IDE 正在传递某种导致崩溃的环境。您可以尝试将 GDB 附加到正在运行的 Node 进程（但在连接到它之前会导致崩溃）以找出导致它的原因。

另一种解决方案：如果您可以更改 Webstorm 将启动的节点可执行文件，您可以尝试制作一个包装 Node 并打印一些调试信息的 shell 脚本。像这样的东西：

```
#!/bin/sh

echo "ENVIRONMENT: $ENV"
sleep 1
/path/to/actual/node "$@" 
```

这将输出传递给 Node 可执行文件的环境变量。从那里，您可以尝试取消设置任何看起来可疑的变量：

```
unset STRANGE_VARIABLE 
```

在启动 Node 可执行文件之前，将它们放在上面的脚本中。

# objective-c - 压缩代码有什么好处吗？

> ID：14116322
> 
> 赞同：3
> 
> 时间：2013-01-02T02:44:12.873
> 
> 标签：objective-c, cocoa, coding-style

假设我有一个长几行的声明：

```
NSString *urlString = @"http://www.example.com";
NSURL *url = [NSURL urlWithString:urlString];
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url]; 
```

像这样将它压缩成一行有什么好处吗？

```
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:[NSURL urlWithString:@"http://www.example.com"]]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T03:15:52.577

单行版本的好处是您不必创建临时中间变量。如果您对这些中间变量没有其他用途，这将特别有用。在某些情况下，使用单线看起来更整洁，但在其他情况下，它可能看起来很笨重。没有硬性规定可以遵循，这完全取决于你自己的审美。就个人而言，我会为您的场景选择单行版本，但可能还有其他人不同意。

有一次我知道我避免使用单行代码时，初始化方法需要多个参数，因为它可能会变得混乱且难以理解，尤其是当你深入多层时。对于一个精简的例子：

```
id someObject = [MyClass myClassWithThing:[Thing thingWithX:5 andY:5] supportingThing:[SupportingThing supportingThingWithString:@"Tada!"] error:NULL]; 
```

有些人更喜欢使用[东波兰圣诞树表示法](http://www.kuro5hin.org/story/2004/6/1/43942/41236)，它看起来像：

```
id someObject = [MyClass myClassWithThing:[Thing thingWithX:5 andY:5]
                          supportingThing:[SupportingThing supportingThingWithString:@"Tada!"]
                                    error:NULL]; 
```

同样，这里没有可遵循的规则。尽管 Objective-C 有关于如何命名类和方法的约定，但我还没有遇到嵌套消息发送的约定。

首先，代码的可读性和可维护性。

# wpf - 如何在 WPF 的窗口中运行时将一个 UserControl 切换为另一个？

> ID：14116329
> 
> 赞同：0
> 
> 时间：2013-01-02T02:45:34.297
> 
> 标签：wpf, binding, user-controls, window, viewmodel

我有一个窗口的一部分应该显示几个用户控件之一。每个 UserControl 呈现相同的数据，只是以不同的格式、排列和样式。将在 Window 的这一部分中显示的特定 UserControl 应由存储在 Window 的 ViewModel 中的单个设置确定。

如何使程序最终用户可以更改在运行时显示在窗口中的 UserControl？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T04:41:53.973

一种（快速但不一定是最好的）方法是将 ContentControl 添加到您的窗口

```
<ContentControl Name="cc" /> 
```

然后随意设置它的内容。例如。在代码隐藏中设置它

```
cc.Content = new UserControl1(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T13:49:44.287

我想到了。在我的 ViewModel 中，我有一个`UserControl`名为 的属性`SelectedUC`，以及另一个名为的属性`Style`，它是一种`enum`类型，它枚举了`UserControls`我正在使用的不同之处。在我拥有的属性`set`部分中，该部分属性有一个 switch-case 语句，它将字段设置为相应类型的新实例，并将 ViewModel ( ) 作为参数传递。`Style``OnPropertyChanged("SelectedUC");``get``SelectedUC``SelectedUC``UserControl``this`

```
private MyStyleEnum _style = MyStyleEnum.OneStyle;
public MyStyleEnum Style
{
    get { return _style; }
    set
    {
        if (value != _style)
        {
            _style = value;
            OnPropertyChanged("Style");
            OnPropertyChanged("SelectedUC");
        }
    }
}

private UserControl _selectedUC;
public UserControl SelectedUC
{
    get
    {
        switch (Style)
        {
            case MyStyleEnum.OneStyle:
                _selectedUC = new ucOneControl(this);
                break;
            case MyStyleEnum.AnotherStyle:
                _selectedUC = new ucAnotherControl(this);
                break;
        }
        return _selectedUC;
    }
    set { _selectedUC = value; }
} 
```

在我`MainView`的 xaml 中，我有一个`ContentPresenter`属性`Content`绑定到`SelectedUC`ViewModel 中的属性。

```
<ContentPresenter Content="{Binding SelectedUC}" /> 
```

在我`SettingsView`的 xaml 中，我有一组`RadioButton`s 都绑定到`Style`属性并使用 a`Converter`和`ConverterParameter`。

```
<Window x:Class="MyProject.View.SettingsView"
        xmlns:cv="clr-namespace:MyProject.Converters"
        xmlns:vm="clr-namespace:MyProject.ViewModel">
<Window.Resources>
    <cv:EnumToBoolConverter x:Key="EBConverter"/>
</Window.Resources>
<RadioButton Content="One" IsChecked="{Binding Path=Style, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource ResourceKey=EBConverter}, ConverterParameter={x:Static Member=vm:MyStyleEnum.SingleLine}}"/>                       
</Window> 
```

EnumToBoolConverter.cs：

```
public class EnumToBoolConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (parameter.Equals(value))
            return true;
        else
            return false;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        return parameter;
    }
} 
```

# java - Swing：从另一个类获取组件的父级

> ID：14116331
> 
> 赞同：2
> 
> 时间：2013-01-02T02:45:44.883
> 
> 标签：java, swing, components, parent-child

我有一个主类，我所有的 gui 组件都被称为 Math.java。在一个单独的类 (Calc) 中，我从 Calc 的构造函数中的 Math 获取所有组件并将它们保存在本地组件中。唯一不起作用的是，当我尝试获取其中一个组件的父组件时，它总是返回 null。当我直接访问 Math 中的 JLabels 时，它可以工作。

card[] 是一个 JLabels 数组。panel2a 和 layer 是 JPanel。

```
 public void clear()
{
    for(int i =0;i <cards.length; i++)
    {
//this works, calling the components directly
        if(math.cards[i].getParent().equals(math.panel2a) )
        {
            math.panel2a.remove(cards[i]);

            layer.add(cards[i]);

            layer.repaint();
        }
//this doesn't work, using the local components
        if(cards[i].getParent().equals(panel2a) )
        {
            panel2a.remove(cards[i]);

            layer.add(cards[i]);

            layer.repaint();
        }
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T20:36:53.700

如果这两个数组确实保存了对同一个对象的引用，那么（据我所知）该对象的任何方法都无法根据对象引用的存储位置而表现出不同的行为。换句话说，如果它是同一个对象，那么`math.cards[i] == cards[i]`绝对不可能根据您调用`math.cards[i].anyMethod()`或`cards[i].anyMethod()`.

由于您看到不同的结果，因此数组不能具有相同的对象。您可能还没有将本地`cards`数组的内容添加到任何容器中。另请记住，当您将组件添加到一个容器时，该组件会自动从它可能已经在其中的任何容器中删除。

# android - 如何在选项卡式 Android 应用程序的选项卡中放置地图

> ID：14116344
> 
> 赞同：1
> 
> 时间：2013-01-02T02:49:24.810
> 
> 标签：android, google-maps, android-support-library

将地图放入选项卡式 Android 应用程序的最佳和最符合标准的方法是什么？

我故意对上述应用程序的编程设置含糊其辞，因为我一直在涉猎兼容性包和 API 以及各种含糖的 Android 版本，以寻找最普遍兼容的方法。似乎 Google 希望开发人员使用 Fragments 作为选项卡，而不是使用 TabActivity 设置。因此，由于我需要 MapFragment 对象，我不得不使用新的 Google Maps V2 API。在 FragmentActivity 中的 FragmentTabHost 中放置 SupportMapFragment 后，我​​不知道如何使 MapFragment 显示某些内容。

我基本上患有严重缺乏线索。自己进行搜索并不是特别成功，因为我对使用旧版本的 Android 解决方案持谨慎态度；我宁愿使用 Support 包，因为它似乎可以确保我的应用程序将支持旧的和新的 Android 版本。

我喜欢示例代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T13:25:30.047

我最终在谷歌支持库中转换并使用 Fragment 和 FragmentTabHost。新的谷歌地图 Android API v2 在本月早些时候推出，支持 MapFragments，因此我的问题得到了解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:56:30.793

我不确定这是否是最好的方法，但我在这篇文章中进行了一些尝试后得到了它： [NullPointer or InflateException when search on Google Maps](https://stackoverflow.com/questions/14246085/nullpointer-or-inflateexception-when-searching-on-google-maps/14264460#14264460) 查看它是否有助于让您了解如何在您的应用程序中实现它。我使用一个操作栏作为标签导航顺便说一句。

# javascript - Jquery Animation：当元素改变颜色或样式时如何使文本出现

> ID：14116345
> 
> 赞同：5
> 
> 时间：2013-01-02T02:49:31.433
> 
> 标签：javascript, jquery, html, css, animation

嗯，伙计们，当我摆弄一些动画时，我被困在了 Jquery 中。事情是我想让一个文本框出现并在按钮像画廊一样突出显示时显示文本 ummm .....。无论如何，我做了一半，但文字没有显示。所以任何帮助...

Ps 的想法是让一个按钮/圆圈发光，并在其下方显示一个文本，就像当一个按钮/圆圈发光时，下方的空白区域显示与之关联的文本。

```
<script src="jquery.js" type="text/javascript"></script>
<script type="text/javascript">

            function slide() 
            {//slide start

                $(".textHold").hide()
                .delay(1000)
                .queue(
                    function()
                    {//queue function start
                        $(".red").css(
                        {//css start
                            "background-color":"#000"
                        }//css end
                                    );//css ();
                    $(this).dequeue();
                    }//queue function/\
                    );//queue();

                $(".textHold").fadeIn(500);
                $(".textr").fadeIn(500).fadeOut(5000).delay(500);
                $(".textHold").fadeOut(500).delay(500);
                $(".textHold")
                .queue(
                    function ()
                    {
                        $(".red").css({"background-color":"#f00"});
                        $(this).dequeue();
                    }
                )
                .delay(500)
                .queue(
                    function()
                    {
                        $(".blue").css({"background-           color":"#000"});
                        $(this).dequeue();
                    }
                )

                .fadeIn(500);$(".text").fadeIn(500).delay(500).fadeOut(500).delay(500);
            $(".textHold").fadeOut(500).delay(500);
                $(".textHold").queue(
                    function()
                        {
                        $(".blue").css({"background-color":"#00f"});
                        $(this).dequeue();
                    }
                    );
                }//slide() /\
setInterval(function(){slide();},500);

</script>
</head>
<body>
    <div class="red">
    </div>
    <div class="blue">
    </div>
    <div class="textHold">
    <span class="text">Hello blue</span>
    <span class="textr">Hello Red</span>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T04:22:11.910

在我看来，更改按钮样式的代码在您的控制之下（不是第三方代码）。在这种情况下，您可以在按钮更改颜色时触发 JQuery 自定义事件。该事件将有一个侦听器，该侦听器将相应地显示文本。

请参阅：[http ://www.sitepoint.com/jquery-custom-events/](http://www.sitepoint.com/jquery-custom-events/)

# php - 如何在 PHP 中编写与未定义变量的比较

> ID：14116352
> 
> 赞同：0
> 
> 时间：2013-01-02T02:50:34.577
> 
> 标签：php, undeclared-identifier

我了解到我已经养成了一个不好的编程习惯，即在比较运算符中使用它们之前并不总是定义变量或属性。我以前从未注意到这一点，但现在我在不同的环境中开发，我得到了通知。

例如：

```
if ($test_var)
    echo "Do some stuff"; 
```

这很容易根据需要`isset`或`empty`根据需要来解决。

但是，我也倾向于在比较中使用这些未声明的变量/属性，如下所示：

```
if (($test_int == 1) && ($test_str == "hello world"))
    echo "Do some stuff"; 
```

用`isset`or`empty`语句重写要困难得多。我可以把整个东西包装在一堆 . `issets`，但是你很快就会得到嵌套的意大利面条代码，这会影响可读性和可维护性。

我了解为什么会发生这种情况，但我正在寻求帮助，将最佳解决方案作为一般做法。

抱歉，如果此解决方案之前已发布。我看了看，但我能找到的只是关于为什么会出现通知的问题，而不是具体如何写比较。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T03:16:20.003

我认为最好的方法是通过在程序之前分配某种值来初始化您进行比较的这些变量`null`。

```
$chicken = null;

// some code that generates $egg value

if ($egg) {
    $chicken = "Leghorn";
}

if ("Leghorn" === $chicken) {
    echo "I say ..I say...boy...";
} 
```

因此，如果`$chicken = null;`在上面的示例中缺少，并且值为`$egg`false，您通常会收到 PHP 通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T02:56:52.987

如果您只是想摆脱通知，请检查您的错误报告设置： http: [//php.net/manual/en/function.error-reporting.php](http://php.net/manual/en/function.error-reporting.php)

（如果您有一个在每个页面顶部运行的脚本，您可以执行以下操作：error_reporting(E_ALL & ~E_NOTICE);

否则，您可以在顶部附近声明变量（可能是一个更好的主意）。

无关：这是个人的事情，但如果你把你的 IF 语句用大括号括起来，以后会更容易破译！

# google-chrome-extension - 如何将事件绑定到 chrome 扩展弹出窗口中的元素

> ID：14116354
> 
> 赞同：0
> 
> 时间：2013-01-02T02:50:54.003
> 
> 标签：google-chrome-extension

我已经搜索了很多，但我找到的答案都没有 100% 有效。

基本上，我希望弹出窗口显示一些按钮，然后使用不同的参数调用相同的函数。概念：

```
<button onclick="foo(1,2);">Button 1</button>
<button onclick="foo(2,3);">Button 2</button> 
```

我尝试了一些简单直接的方法，但都不起作用。如果我从函数中取出代码，并让 popup.js 包含代码，它就可以工作（我的函数很好）。

我试过了：

```
$('#btn1').click(function(e) {
    alert('btn1');
}); 
```

也

```
document.getElementById('btn1').addEventListener('click',doSomething(1,2)); 
```

另外，我尝试在 a 中添加按钮 addEventListener`document.addEventListener('DOMContentLoaded', function() {....});`

奇怪的是，如果我的 popup.js 包含 button.addEventListener，第一个会在单击浏览器操作时触发，然后什么都不起作用。无论单击事件侦听器是否在 DOMContentLoaded 侦听器内部，都会发生这种情况。

我觉得这是一个 CSP 问题，但我似乎无法让它工作。

对于那些扫描问号的人：从 popup.html/popup.js 中，如何根据 onclick 事件调用具有不同参数的单个函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T09:00:22.770

# 问题

我不确定在复制到 SO 时是否只是通过您的缩写，但您提供的任何代码都不会“粘贴”：

*   您在按钮上没有 id，因此绑定到 id（我认为这只是因为它们在第一次粘贴中不相关！）
*   第二个粘贴使用 jQuery 库，因此您需要确保包含并允许 jQuery：[https ://stackoverflow.com/a/10928761/969807](https://stackoverflow.com/a/10928761/969807)
*   在第三次粘贴中，addEventListener 的第二个参数应该是一个接受事件作为第一个也是唯一一个参数的函数（如果需要）。（继续阅读）

# 解决方案

在您描述的场景中绑定事件的最常见方法如下：

```
document.getElementById('btn1').addEventListener('click', function (){
    foo(1, 2);
}, false); 
```

但是，如果有很多（或数量可变）的按钮，我可能会这样做：

popup.html：

```
<div id="buttons">
  <button data-param1="1" data-param2="2">Button 1</button>
  <button data-param1="2" data-param2="3">Button 2</button>
</div> 
```

popup.js：

```
var els = document.querySelectorAll('#buttons button'),
    i, total, param1, param2;

for (i = 0, total = els.length; i < total; i++) {
  el = els[i];

  param1 = parseInt(el.getAttribute('data-param1'));
  param2 = parseInt(el.getAttribute('data-param2'));

  el.addEventListener('click', function (){ foo(param1, param2) }, false);
} 
```

# java - 创建文件时android崩溃

> ID：14116360
> 
> 赞同：1
> 
> 时间：2013-01-02T02:52:26.067
> 
> 标签：java, android, file

我正在开发一个音频应用程序，但是在尝试创建 PCM 文件时它崩溃了，这里是代码：

```
public class RecordPCM {

public void record() {

    Log.d("mensaje","Recording testeo started");

    int frequency = 11025;
    //int channelConfiguration = AudioFormat.CHANNEL_CONFIGURATION_MONO;

    int channelConfiguration = AudioFormat.CHANNEL_IN_MONO; //cambiado por el de arriba por deprecado

    int audioEncoding = AudioFormat.ENCODING_PCM_16BIT;
    File file = new File(Environment.getExternalStorageDirectory().getAbsolutePath() + "/reverseme.pcm");

    // Delete any previous recording.
    if (file.exists()) {
    file.delete();
    Log.d("mensaje","file exists!!!");

    }

    // Create the new file.
    try {
    file.createNewFile();
    } catch (IOException e) {
    throw new IllegalStateException("Failed to create :::: " + file.toString());
    }

    try {
    // Create a DataOuputStream to write the audio data into the saved file.
    OutputStream os = new FileOutputStream(file);
    BufferedOutputStream bos = new BufferedOutputStream(os);
    DataOutputStream dos = new DataOutputStream(bos);

    // Create a new AudioRecord object to record the audio.
    int bufferSize = AudioRecord.getMinBufferSize(frequency, channelConfiguration, audioEncoding);
    AudioRecord audioRecord = new AudioRecord(MediaRecorder.AudioSource.MIC, 
    frequency, channelConfiguration, 
    audioEncoding, bufferSize);

    short[] buffer = new short[bufferSize]; 
    audioRecord.startRecording();

    boolean isRecording = false; //metido para arreglar

    while (isRecording) {
    int bufferReadResult = audioRecord.read(buffer, 0, bufferSize);
    for (int i = 0; i < bufferReadResult; i++)
    dos.writeShort(buffer[i]);
    }

    audioRecord.stop();
    dos.close();

    } catch (Throwable t) {
    Log.d("mensaje","Recording Failed");
    }

}

public void copio(){
    Log.d("mensaje","Recording testeo");

}
} 
```

所以当我打电话时

> 记录对象.记录（）；

该应用程序因错误而崩溃：

```
?:??: W/?(?): FATAL EXCEPTION: main
?:??: W/?(?): java.lang.IllegalStateException: Could not execute method of the activity
?:??: W/?(?):   at android.view.View$1.onClick(View.java:3597)
?:??: W/?(?):   at android.view.View.performClick(View.java:4202)
?:??: W/?(?):   at android.view.View$PerformClick.run(View.java:17340)
?:??: W/?(?):   at android.os.Handler.handleCallback(Handler.java:725)
?:??: W/?(?):   at android.os.Handler.dispatchMessage(Handler.java:92)
?:??: W/?(?):   at android.os.Looper.loop(Looper.java:137)
?:??: W/?(?):   at android.app.ActivityThread.main(ActivityThread.java:5039)
?:??: W/?(?):   at java.lang.reflect.Method.invokeNative(Native Method)
?:??: W/?(?):   at java.lang.reflect.Method.invoke(Method.java:511)
?:??: W/?(?):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
?:??: W/?(?):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
?:??: W/?(?):   at dalvik.system.NativeStart.main(Native Method)
?:??: W/?(?): Caused by: java.lang.reflect.InvocationTargetException
?:??: W/?(?):   at java.lang.reflect.Method.invokeNative(Native Method)
?:??: W/?(?):   at java.lang.reflect.Method.invoke(Method.java:511)
?:??: W/?(?):   at android.view.View$1.onClick(View.java:3592)
?:??: W/?(?):   ... 11 more
?:??: W/?(?): Caused by: java.lang.IllegalStateException: Failed to create :::: /storage/emulated/0/reverseme.pcm
?:??: W/?(?):   at com.hyper.reverspeech.RecordPCM.record(RecordPCM.java:48)
?:??: W/?(?):   at com.hyper.reverspeech.ReverSpeechActivity.buttonRecPressed(ReverSpeechActivity.java:20) 
```

所以

1.  是什么让我的应用程序崩溃，

2.  为什么我的 logCat 显示为 ？问号？？，

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T03:01:30.817

“崩溃”的原因是您的应用程序`IllegalStateException`在尝试（并且失败）创建文件时抛出 am。为什么你得到一个`IOException`是任何人的猜测。你把证据扔了！（提示：使用`IllegalStateException`包含异常参数的构造函数...并通过`e`）

您的 logcat 输出中的问号可以通过以下方式解释：

*   [调试问题 (Android Eclipse)](https://stackoverflow.com/questions/11439821/debugging-issues-android-eclipse)
*   [为什么 LogCat 将所有项目显示为警告（橙色）？](https://stackoverflow.com/questions/11494257/why-is-logcat-showing-all-items-as-warnings-orange)

# python - Python 架构 - 导入额外的模块，还是在代码执行部分导入模块？

> ID：14116362
> 
> 赞同：0
> 
> 时间：2013-01-02T02:52:46.877
> 
> 标签：python, architecture, import, module

我有一个模块，它定义了一个从两个（或多个）其他模块之一实例化一个类的类。下面是几个代码示例。在第一个示例中，导入了两个模块，但只使用了一个（每个 MyIo 实例一个）。在第二个示例中，仅导入所需的模块。在更高级别的模块中可能有一个或多个 MyIo 实例。

我喜欢第二个示例只导入使用的内容，但我不太喜欢它`import`发生在“代码执行”部分。

我的问题是：

1.  哪个示例是更好的架构选择，为什么？
2.  导入最终未使用的模块是否会受到惩罚？
3.  Python 中代码执行部分的导入是否被认为是“错误的形式”？

此示例导入​​两个模块，但只使用一个...

```
''' MyIo.py '''

...
...
from DevSerial import Device as DeviceSerial
from DevUSB import Device as DeviceUSB

class MyIo:

  def __init__(self, port)
    if port.lower() == 'usb':
      self.device=DeviceUSB()
    else:
      self.device=DeviceSerial(port)
...
... 
```

以下仅导入正在使用的模块...

```
''' MyIo.py '''

...
...
class MyIo:

  def __init__(self, port)
    if port.lower() == 'usb':
      from DevUSB import Device
      self.device=Device()
    else:
      from DevSerial import Device
      self.device=Device(port)
...
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T02:56:19.577

根据[PEP 8](http://www.python.org/dev/peps/pep-0008/#imports)，所有导入都应该放在文件的顶部。让它们分布在整个文件中会导致难以维护和调试软件。

我能想到的唯一性能开销是在程序启动时——它必须加载更多模块。一旦程序运行，就不应该有任何额外的开销。

要回答您的问题：

1.  前者。很明显，使用了哪些其他文件，而您必须深入挖掘第二个文件才能找到所有依赖项。
2.  是的，但仅在启动时。
3.  是的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T03:01:50.517

实际上，即使您将模块导入到函数中，一旦您的函数执行完毕，它们仍将存在于 sys.modules 中，除非您手动删除它们。所以是的，不直接在代码顶部导入它们是没有意义的（例如示例＃1）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T03:52:30.950

不只是卡在页面顶部的导入最常见的用途是兄弟模块代表不同的、互斥的选项的情况：最好的例子是 os.path，它会自动交换适当的模块。即使在顶部而不是在代码中进行差异导入也很常见。

# mysql - 我可以使用“最后更新”时间戳来选择 MySQL 记录进行更新吗？

> ID：14116363
> 
> 赞同：2
> 
> 时间：2013-01-02T02:52:46.223
> 
> 标签：mysql

我有一个大约 30,000 行的 MySQL 数据库。我每晚将此数据库更新到远程服务器，但一次更新的行数不会超过 50 行。我是唯一更新数据库的人。我想开发一种方法，其中仅将更改的行导出到远程服务器。

为了节省数据库中的空间并在导出到远程服务器时节省时间，我构建了“存档”表（在远程服务器上），其中包含不再更新且不驻留在本地数据库中的记录。但我知道将这些数据拆分为多个表是不好的设计，如果需要更改表的结构，可能会导致问题。

所以我想重建数据库，以便所有具有相似表结构的记录都在一个表中（就像它们在数据库小得多时一样）。结果表（包含所有存档记录）的大小将超过 80,000 行，对于在整个数据库包中导出来说太大了。

为此，我想（1）在添加或修改行时更新每行中的“最后更新”时间戳（2）当“最后更新”时间戳大于时间戳时，仅选择表中的行进行导出最后一次导出操作的时间 (3) 编写一个查询来构建导出 .sql 文件，其中仅包含新的和更新的行 (4) 更新导出操作的时间戳，以便在下一次导出期间进行比较

有没有人这样做过？如果是这样，我将不胜感激有关如何完成此任务的一些指导。

史蒂夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T03:34:58.563

如果您添加具有`timestamp`数据类型的列，例如`last_updated timestamp`，它将自动更新为`now()`每次行更改时。

然后每天一早，只需发送昨天的更改：

```
select * from mytable
where last_updated between subdate(CURDATE(), 1) and CURDATE() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T02:58:31.800

为什么不将远程服务器设置为复制从属服务器？MySQL 只会在这种情况下发送更新的行，并且非常快速/有效。

通常建议使用官方的复制策略，而不是自己动手。如果您遇到问题，您将有很多示例可供参考，并且会有很多人了解正在发生的事情。

# java - 小代码更改后的 java.lang.ClassFormatError

> ID：14116369
> 
> 赞同：-3
> 
> 时间：2013-01-02T02:53:39.140
> 
> 标签：java, netbeans, ant

我重温了我的程序，结果它就炸了。我所做的只是一些 String.format() 返回，并且恢复这些更改并没有使这个错误消失。当我研究错误时，它似乎与 Maven 有关？但我使用 ANT 来构建项目。

```
Exception in thread "Thread-2" java.lang.ClassFormatError: Absent Code attribute in method that is not native or abstract in class file InHouseLeague/Workers/BotListener
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:449)
at java.net.URLClassLoader.access$100(URLClassLoader.java:71)
at java.net.URLClassLoader$1.run(URLClassLoader.java:361)
at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
at org.schwering.irc.moep.MoepIRC.run(MoepIRC.java:831)
at java.lang.Thread.run(Thread.java:722) 
```

它引用的代码（我已经好几周没碰过了）

```
public void run() {
    updateTab(Util.CONSOLEWINDOWINDEX, "# Trying to connect to "+ host, 
        serverColor);
    enableConnectMenuItem(false);
    username = username.toLowerCase();
    if (!useSSL) {
    conn = new BotConnection(host, portMin, portMax, password, nickname, 
        username, realname);
    } else {
    BotSSLConnection sslconn = new BotSSLConnection(host, portMin, portMax, 
        password, nickname, username, realname);
    if (!autoAcceptSSLCerts)
        sslconn.addTrustManager(new AskTrustManager());
    conn = sslconn;
    }
    conn.addIRCEventListener(new BotListener(this)); //ERROR POINTS TO HERE
    conn.setColors(true); 
    conn.setPong(false); 
    conn.setDaemon(true);
    try {
    conn.connect();
    this.isConnected = conn.isConnected();
    } catch (Exception exc) {
    String reason = "";
    if (exc.getMessage() != null) {
        reason = ": "+ exc.getMessage();
    }
    updateTab(Util.CONSOLEWINDOWINDEX, "# Couldn't connect"+ reason, 
        serverColor);
    enableConnectMenuItem(true);
    exc.printStackTrace();
    this.isConnected = false;
    }
} 
```

在此之前我所做的更改发生：

从：

```
 @Override
    public String toString() {
        String returnStr = String.format("%s(ELO: %d):", getTeamName(), teamELO);
        for (IPlayer player : roster) {
            returnStr = String.format("%s %s", returnStr, player.getUserName());
        }
        return returnStr;
    } 
```

到

```
 public String toString() {
        String returnStr = String.format("%s[%d]:", getTeamName(), teamELO);
        for (IPlayer player : roster) {
            returnStr = String.format("%s %s;", returnStr, player.getUserName());
        }
        return returnStr;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T05:10:42.207

诊断是：

类文件 InHouseLeague/Workers/BotListener 中非本机或抽象方法中的缺失代码属性

您没有说代码更改是在 InHouseLeague.Workers.BotListener 类中，还是在库类中。无论如何，通常任何代码更改都不能使编译器生成没有代码属性的方法。类文件以另一种方式被破坏，例如，它是硬件设备错误。

# c - 在同一个函数中，UB 是否可以通过间接访问一个不在作用域内的局部变量？

> ID：14116370
> 
> 赞同：3
> 
> 时间：2013-01-02T02:53:50.207
> 
> 标签：c, scope, undefined-behavior

在第二个右大括号之后，`b`只能通过间接访问`a`。

```
int main() {
    int *a;
    {
        int b = 42;
        a = &b;
    }
    printf("%d", *a); // UB?
    return 0;
} 
```

由于`b`不再在范围内，这是 UB 吗？我知道从已经返回的函数中取消引用指向非静态局部变量的指针是 UB，但在这种情况下，一切都在同一个函数中。

这是 C++ 中的 UB，但我不确定 C。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T02:56:18.443

`b`仍然在一个不同的嵌套范围内，该范围`b`在您访问它时已经退出并因此被破坏。所以它是**未定义的行为**。同一功能内的一切都是无关紧要的。

出于变量生命周期的目的，您可以将“已返回的函数”视为嵌套范围，反之亦然。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-02T03:00:05.183

是的，访问*任何*已达到其**生命周期的变量都是未定义的行为。**范围和存储时间在这里略有不同。范围更多的是“变量标识符何时可见？” 并且存储持续时间是“变量本身何时存在？”。

您可以拥有范围和持久的事物，例如：

```
int main (void) {
    int spoon = 42;
    // spoon is both in scope and enduring here
    return 0;
} 
```

或超出范围但持久：

```
int main (void) {
    int *pSpoon;
    {
        static int spoon = 42;
        pSpoon = &spoon;
    }
    // spoon is out of scope but enduring here (use *pSpoon to get to it)
    return 0;
} 
```

您还可以使变量超出范围且不持久，例如：

```
int main (void) {
    // spoon is neither in scope nor enduring here ("there is no spoon")
    return 0;
} 
```

实际上，您唯一不能拥有的是范围内的变量，但不是持久的。标识符与存储相关联，因为允许没有后备存储的变量几乎没有意义。

我不是在这里谈论指针，这是一个额外的间接级别 - 范围内的指针变量*总是*存储指针值本身，即使它指向的东西*已经*结束或尚未开始，它的存储持续时间。

未定义行为在某些情况下可能起作用的事实绝不会使行为被定义，事实上这是未定义行为最烦人的特征之一，因为它有时*确实*起作用。否则会更容易被发现。

在这种特殊情况下，`b`变量存储持续时间在内部右大括号处结束，因此在该点之后尝试访问它是不明智的。

* * *

标准的控制部分是`c11 6.2.4 Storage duration of objects`（稍作解释以删除不必要的位）：

> 对象具有决定其生命周期的存储持续时间。有四种存储持续时间：静态、线程、自动和分配。
> 
> 其标识符声明为没有链接且没有存储类说明符 static 的对象具有自动存储持续时间。
> 
> 对于这样的对象，它的生命周期从进入与其关联的块开始，直到该块的执行以任何方式结束。

# iphone - 在 iphone 设备上运行 iframeextractor 时帧率低

> ID：14116371
> 
> 赞同：0
> 
> 时间：2013-01-02T02:53:57.893
> 
> 标签：iphone, ios, ipad

想问一下是否有人在iphone设备上运行iframeextractor时遇到过低帧率。当我在模拟器上运行它时，视频很好，但是当代码在 iphone 设备上运行时，帧速率变慢了。有谁知道是什么原因？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:34:27.553

iphone 处理器比您的桌面 mac 慢得多，并且资源较少。rgb 图像转换很慢。

# php - 提取数据但不止一个

> ID：14116372
> 
> 赞同：-3
> 
> 时间：2013-01-02T02:53:59.097
> 
> 标签：php, html, pdo, aspnetdb

好的，这是我使用非常简单的东西的代码，基本上它目前会拉出一张随机的个人资料图片以及用户的名字和姓氏。

像魅力一样工作，唯一的问题是我怎样才能让它一次拉得更多

```
 $query = $db->query("SELECT * FROM `content` ORDER BY RAND() LIMIT 1");

  while ($row = $query->fetch(PDO::FETCH_ASSOC)) {
  $FirstName = $row['FirstName'];
  $LastName = $row['LastName'];
  $ProfilePic = $row['ProfilePic'];
  $AccountNumber = $row['AccountNumber'];

  echo '<a href="Http://MyUrl.Com/Profile.php?AccountNumber=';
  echo $AccountNumber;
  echo '"><img src="http://MyUrl.Com/Content/';
  echo $ProfilePic;
  echo '" width="89" height="117" alt="" /></a><span class="des"><br><a             href="Http://MyUrl.Com/Profile.php?AccountNumber=';
  echo $AccountNumber;
  echo '#">';
  echo $FirstName .' '. $LastName;
  echo '</a></span>'; 
```

}

因此，它现在可以完美地提取一个帐户，我想要它一次提取 8 个帐户，这样我就可以拥有 $FirstName1 = $row['FirstName']

我这样做的原因是因为格式错误，所以请不要尝试在循环中给我拉甲酸盐或任何东西，我怎样才能在不破坏 while 循环的情况下重复这 8 次

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T02:55:47.630

我不确定我是否理解你的问题？您可以通过在代码的第一行将 LIMIT 1 更改为 LIMIT 8 来提取多个结果：

```
$query = $db->query("SELECT * FROM `content` ORDER BY RAND() LIMIT 8"); 
```

# spotify - sessionDidEndPlayback 没有被调用

> ID：14116373
> 
> 赞同：1
> 
> 时间：2013-01-02T02:54:06.817
> 
> 标签：spotify, cocoalibspotify-2.0

我已经包含了 SPSessionPlaybackDelegate 并包含了该方法：

```
-(void)sessionDidEndPlayback:(SPSession *)aSession {
NSLog(@"song ended");

} 
```

然而，当歌曲自然结束播放时，这不会被调用。我应该做些什么来实现这个委托吗？其他此类方法正在适当的时候被调用：

```
-(void)sessionDidLoginSuccessfully:(SPSession *)aSession; {

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T10:06:58.337

`sessionDidEndPlayback:`是`SPSessionPlaybackDelegate`协议的一部分，而不是`SPSessionDelegate`. 它会在设置为`playbackDelegate`会话对象的任何对象上调用。

*但是*，如果您`SPPlaybackManager`用于音频播放，则该类会`playbackDelegate`在您创建它时将其设置为会话，并要求它保持这种状态。

目前，`SPPlaybackManager`没有为轨道结束提供委托方法，因此在当前版本的 CocoaLibSpotify 中执行此操作的方法是观察`SPPlaybackManager`的`currentTrack`属性——当它发生时`nil`，你知道播放已经结束。

CocoaLibSpotify的`dev`分支刚刚将该方法添加`playbackManagerIsFinishingPlayback:`到`SPPlaybackManager`的委托协议中。

# jquery - 设置焦点顺序 (Webworks)

> ID：14116376
> 
> 赞同：1
> 
> 时间：2013-01-02T02:54:23.370
> 
> 标签：jquery, html, blackberry-webworks

我的应用程序焦点顺序似乎有问题。该应用程序应该从 web 服务中检索记录列表，然后使用 div 中的 for 循环显示。

例子：

```
function loadListing()
{
  var listing = "";
  var value = new Array('One', 'Two', 'Three', 'Four', 'Five', 'Six', 'Seven', 'Eight', 
  'Nine', 'Ten');

  listing += '<div style="background-color: purple; color: yellow; padding: 10px;  
  margin-bottom: 10px;">I\'m some big listing</div>';

  listing += '<div id="container">';

  for(var h = 0; h < 10; h++)
  {
    listing += '<div class="innerContainer" x-blackberry-focusable="true" 
    onmouseover="bigHover(this)" onmouseout="dontHover(this)">';
    listing += '<div style="font-size: 20px; font-weight: bold;">'+value[h]+'</div>'; 
    listing += '</div>';
  }
  listing += '</div>';

  listing += '<div style="background-color: purple; color: yellow; padding: 10px;   
  margin-top: 20px;margin-bottom: 10px;">I\'m self-generate listing</div>';
  for(var i = 1; i <= 10; i++)
  {
    listing += '<div><ul class="ulClass">';
    listing += '<li><span class="pretty" x-blackberry-focusable="true"   
    onmouseover="hoverMe(this)" onmouseout="dontHover(this)">' +i+' </span></li>';
    listing += '</ul></div>';
  }
 $('#mainBody').html(listing);
} 
```

CSS：

```
.ulClass{ list-style: none; margin: 0; padding: 0; }

.ulClass li{ display: inline; float: left; }

.pretty{ font-size: 20px; color: orange; border: 1px solid orange; padding: 3px; 
         margin: 3px; width: 5px; } 
```

当用户完成滚动列表时，分页（ul class="paging"）上的下一个可聚焦元素将位于第 10 页而不是第 1 页。

[小提琴](http://jsfiddle.net/arunpjohny/ZAw8v/)

有人可以帮忙吗？

# delphi - 与 TThread.Synchronize 和 DLL 的访问冲突

> ID：14116378
> 
> 赞同：1
> 
> 时间：2013-01-02T02:54:36.053
> 
> 标签：delphi, dll, synchronize, tthread

我正在使用 DelphiPraxis 的 WorkerThread 和 Delphi XE2。 [http://www.delphipraxis.net/93835-workerthread-der-diener-im-hintergrund.html](http://www.delphipraxis.net/93835-workerthread-der-diener-im-hintergrund.html) 在我的 JobThread 中，我正在加载一个 DLL，它会等待（用于测试..）

```
function DLLClass.doStuff(): boolean;
var
  I: integer;
begin
  try
    for I := 0 to 100 do
    begin
      sleep(10);
      if (assigned(StatusCallback)) then
        StatusCallback(PWideChar(I));
    end;
    Result := true;
  except
    on e: exception do
    begin
      error := 'DLL FEHLER: ' + e.ClassName + ' - ' + e.Message;
      Result := false;
    end;
  end;
end; 
```

“StatusCallback”是对正在加载 DLL 的线程中的过程的引用：

```
 TStatusUpdate = procedure(Status: PWideChar) of object; stdcall; 
```

我的回调如下所示：

```
procedure JobThread.statuscall(status: pwidechar); stdcall;
begin
  //saving the Status in a global Variable..
  if Assigned(OnStatus) then
    fThread.Synchronize(syncStatus);
end; 
```

哪个电话：

```
procedure JobThread.syncStatus;
begin
  if Assigned(OnStatus) then
  begin
    OnStatus(self);
  end;
end; //<- AV here! 
```

OnStatus 事件处理程序：

```
Procedure TfMain.uploadStatus(aJob: TWorkerThreadJob);
begin
  //doing nothing.. yet an AV
  sleep(10);
end; 
```

我认为这个问题在某种程度上与 DLL 无法与 MainThread 同步有关。关于解决 Synchronize 的任何想法（如果它实际上是问题）？

# javascript - 将自定义样式应用于地图

> ID：14116379
> 
> 赞同：-4
> 
> 时间：2013-01-02T02:54:58.070
> 
> 标签：javascript, google-maps-api-3

首先，我想说我不是程序员。
问题是什么，我浏览了整个网络以了解如何自定义您的 Google 地图。
所以我发现你可以使用 API v3 做到这一点。为了找到正确的代码，我使用了 Google 的 Styled Maps 并获得了代码

```
[
  {
    featureType: "all",
    elementType: "labels",
    stylers: [
      { visibility: "off" }
    ]
  }
] 
```

但我不知道如何使用它。我有一个`.html`包含此代码的文件（没有 HEAD，BODY，什么都没有）：

```
<iframe width="640" height="640" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.de/maps?hl=de&amp;ie=UTF8&amp;t=m&amp;ll=53.070843,8.800274&amp;spn=0.002256,0.00456&amp;z=17&amp;output=embed"></iframe><br /><small><a href="https://maps.google.de/maps?hl=de&amp;ie=UTF8&amp;t=m&amp;ll=53.070843,8.800274&amp;spn=0.002256,0.00456&amp;z=17&amp;source=embed" style="color:#0000FF;text-align:left">Größere Kartenansicht</a></small> 
```

如何组合代码以便获得所需样式的地图？
我必须在记事本中另外写什么才能应用地图样式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T06:14:43.657

首先，我会给你一个指向 javascript google maps API 文档的链接。谷歌在使他们的文档非常容易理解方面做得非常好，即使对于非程序员也是如此。

[https://developers.google.com/maps/documentation/javascript/tutorial](https://developers.google.com/maps/documentation/javascript/tutorial)

对于样式用法，请查看先前的响应：

[https://stackoverflow.com/a/11686763/1911676](https://stackoverflow.com/a/11686763/1911676)

这是使用您发布的样式的 google javascript API 的示例网页。它直接从位于此处的谷歌地图示例模板复制而来

[http://code.google.com/p/gmaps-samples-v3/source/browse/trunk/devfest-2010/manila/talk/maps/template.html?r=193&spec=svn197](http://code.google.com/p/gmaps-samples-v3/source/browse/trunk/devfest-2010/manila/talk/maps/template.html?r=193&spec=svn197)

为您做一些小改动。

```
<!DOCTYPE html>
 <html>
  <head>
   <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
   <meta name="viewport" content="initial-scale=1.0, user-scalable=no"/>
   <style type="text/css">

/*you can change the map size here*/
  #map {
    height: 640px;
    width: 640px;
  }

</style>

<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>

<script type="text/javascript">
  function init() {
    var map = new google.maps.Map(document.getElementById('map'), {

//change map settings (origin, zoom amount, type...)
      zoom: 17,
      center: new google.maps.LatLng(53.070843, 8.800274),
      mapTypeId: google.maps.MapTypeId.ROADMAP

    });
  }
  google.maps.event.addDomListener(window, 'load', init);

//Here is where you put your styles
 var styles = [
  {
   featureType: "all",
   elementType: "labels",
   stylers: [
    { visibility: "off" }
   ]
  }
 ];

/*this sets the style*/
 map.setOptions({styles: styles});

</script>

</head>

<body>
 Other content
<!--this is where your map is. This replaces the iframe-->
 <div id="map"></div>
 Other content
</body>
</html> 
```

你可以看到它在这里工作：

[http://jsfiddle.net/sP7m5/1/](http://jsfiddle.net/sP7m5/1/)

我希望这有帮助。

# php - 使用多个表从 mysql 查询中格式化日期

> ID：14116385
> 
> 赞同：0
> 
> 时间：2013-01-02T02:55:30.237
> 
> 标签：php, mysql, sql

我有一个 sql 查询，用于显示我网站的新闻部分。

我真的很喜欢将日期显示为“2012 年 1 月 2 日”，但是当我从 5 个表中选择所有字段时，我不知道将格式要求放在哪里（我没有选择单个字段）。

我的查询如下：

```
$query_newsheadlines = "
SELECT *
FROM 
  NewsArticles, 
  NewsArticleCategories, 
  NewsArticlePhotos,
  NewsCategories, 
  NewsPhotos
WHERE
  NewsArticles.id = NewsArticleCategories.newsArticleID 
  AND NewsArticles.id = NewsArticlePhotos.newsArticleID
  AND NewsArticlePhotos.newsPhotoID = NewsPhotos.id
  AND NewsArticleCategories.newsCategoryID = NewsCategories.id
  AND NewsCategories.SectionID = 201
ORDER BY NewsArticles.publishDate DESC"; 
```

任何想法，将不胜感激 ：）

**更新我的日期所在的列是 NewsArticles.publishDate**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T02:57:37.743

您需要指定要格式化的列（*只是不要懒惰地指定列*）。利用`DATE_FORMAT`

```
SELECT DATE_FORMAT(CURDATE(),'%D %M, %Y') 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/d41d8/5433)

其他来源*_*

*   [日期格式（）](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)

# windows - 除 AdCenter 外，还有其他适用于 WinRT (Windows 8) 的广告 SDK 吗？

> ID：14116391
> 
> 赞同：3
> 
> 时间：2013-01-02T02:56:30.487
> 
> 标签：windows, windows-runtime

除 AdCenter 外，还有其他适用于 WinRT (Windows 8) 的广告 SDK 吗？这适用于 C# 和 XAML。

任何人？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T21:18:17.180

查看专门针对 Windows 8 和 Windows Phone的[AdDuplex交叉推广网络。](https://www.adduplex.com/)

# python - 调度：最小化非重叠时间范围之间的差距

> ID：14116398
> 
> 赞同：1
> 
> 时间：2013-01-02T02:57:48.063
> 
> 标签：python, django, algorithm, scheduling

使用 Django 开发一个小型调度 Web 应用程序，在该应用程序中，人们被分配特定时间与他们的上级会面。员工被存储为模型，与表示时间范围和一周中空闲时间的模型的 OneToMany 关系。例如：

```
Bob: (W 9:00, 9:15), (W 9:15, 9:30), ... (W 15:00, 15:20)
Sarah: (Th 9:05, 9:20), (F 9:20, 9:30), ... (Th 16:00, 16:05)
...
Mary: (W 8:55, 9:00), (F 13:00, 13:35), ... etc 
```

我的程序允许设置基本的日程安排，雇主可以选择查看前 N 个可能的日程安排，条件是他们在那周至少与所有员工会面一次。我目前正在生成所有可能的会议排列，并过滤掉会议时间重叠的时间表。有没有一种方法可以从 M 个可能的时间表中生成前 N 个时间表，而无需经历所有 M 个可能性？

澄清：我们试图获得任何一天的最小差距总和，所有天的总和。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T03:17:57.410

我会使用搜索算法，比如[A-star](http://en.wikipedia.org/wiki/A%2a_search_algorithm)来做到这一点。图中的每个节点代表一个人的可用时间段，并且从一个节点到另一个节点的路径意味着`node_a`并且`node_b`在部分时间表中。

另一种解决方案是创建一个图，其中节点是每个人的可用时间，如果与 node_a 关联的人与与 node_b 关联的人不同，则存在从 node_a 到 node_b 的边。每个节点的权重是与两个节点相关联的时间之间的时间量。

创建此图后，您可以从图中生成[最小生成树](http://en.wikipedia.org/wiki/Minimum_spanning_tree)的变体。该变体与 MST 的不同之处在于：

1.  如果与节点关联的人员尚未在 MST 中，您将仅将节点添加到 MST。
2.  当所有人都在 MST 中时，您完成了 MST 的创建。

生成的最小生成树将代表单个调度。

要生成其他计划，请从图中删除您刚刚创建的计划中找到的所有边，然后从已删除边的图中创建一个新的最小生成树。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T04:24:31.163

一般来说，调度问题是 NP 难的，虽然我想不出这个问题的简化来证明这一点，但它与许多其他[著名的 NP 完全问题](http://en.wikipedia.org/wiki/List_of_NP-complete_problems#Sequencing_and_scheduling)非常相似。可能有一个多项式时间的解决方案可以找到一天的最小差距（尽管我也不知道），但我不太希望需要多天来解决它。不幸的是，这是一个复杂的问题，可能没有一个完美优雅的答案。（或者，当有人稍后发布时，我会踢自己。）

首先，我想说，如果您的数据集相当小，并且您已经能够相当快地计算所有可能的时间表，您可能只想坚持使用该解决方案，因为所有其他解决方案都是近似值，并且可能最终运行速度较慢，如果它们运行时间的常数因子很大。（意味着它不会随着数据集的大小而增长，因此对于大型数据集它会相对较小。）

最简单的近似是只使用贪心启发式。它几乎肯定不会找到最佳时间表，如果大多数时间表重叠，可能需要很长时间才能找到解决方案，而且只有少数甚至是有效的解决方案 - 但我会假设这是员工时间并非如此。

从任意时间表开始，为每位员工随机选择一个时间段。对于每次迭代，选择一名员工并将他的时间段更改为相对于当前计划的其余部分的最佳时间。重复此过程，直到您对结果感到满意 - 当它不再足够快或花费太长时间时。您可能不想重复，直到您无法进行任何改进计划的更改，因为此过程可能会循环处理大多数数据。

这不是一个很好的启发式方法，但它应该产生一些合理的时间表，并且有很大的调整空间。您可能希望始终先尝试切换重叠时间，或者您可能希望尝试调换当前造成最大差距的员工，或者可能消除您已经尝试过的某些时段。您有时可能希望允许转向不太理想的解决方案，希望您处于局部最小值并想要摆脱它 - 一些随机性也可以帮助解决这个问题。确保您始终跟踪您迄今为止看到的最佳解决方案。

要生成更多时间表，最明显的做法是使用不同的随机时间表重新开始该过程。或者，可能从您找到的上一个解决方案中任意翻转几次，然后从那里重复。

**编辑**：这都与[遗传算法](http://en.wikipedia.org/wiki/Genetic_algorithm)相当相关，您可能想要使用我在 GA 中提出的一些想法。

# java - 如何使模态窗口不可移动？

> ID：14116399
> 
> 赞同：4
> 
> 时间：2013-01-02T02:58:30.050
> 
> 标签：java, zk

我想要一个模态`Window`但不可移动，并且在文档中找不到有关此行为的任何信息。如何禁用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T02:10:43.133

目前您可以使用客户端编程来自定义一个不可移动的模态（重叠，弹出）窗口，下面的示例创建两个重叠的窗口并使其中一个不可移动

```
<zk xmlns:w="client">
    <window title="center win, movable" border="normal"
        position="center,center"
        onCreate="self.doOverlapped();" />
    <window title="top win, not movable" border="normal"
        sclass="z-window-not-movable"
        position="center,top"
        onCreate="self.doOverlapped();">
        <attribute w:name="bind_"><![CDATA[
            function (a, b, c) {
                if (!this.$class.ignoremoveOverridden) {
                    this.$class.ignoremoveOverridden = true;
                    var oldImove = this.$class._ignoremove;
                    this.$class._ignoremove = function (dg, pointer, evt) {
                        var wgt = dg.control;
                        if (jq(wgt.$n()).hasClass('z-window-not-movable')) {
                            return true;
                        }
                        return oldImove.apply(wgt, arguments);
                    }
                }
                this.$bind_(a, b, c);
            }
        ]]></attribute>
    </window>
</zk> 
```

参考：

[窗口.js](https://github.com/zkoss/zk/blob/master/zul/src/archive/web/js/zul/wnd/Window.js)

[ZK 客户端编程](http://books.zkoss.org/wiki/Small_Talks/2010/April/Client_Side_Programming)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T03:20:27.460

如果 a`Window`没有标题（没有标题，关闭按钮，...），您不能移动它。
如果您想要/需要头部元素，我很确定没有内置方法
可以禁用该运动。但我也对此感兴趣，我认为这应该
作为一个功能添加到 zk tracker 中。
我将更详细地查看该`Window`组件，如果我找到
禁用它的方法，我将添加它。

# android - 是否有任何适用于 Android 的 IR api？

> ID：14116401
> 
> 赞同：4
> 
> 时间：2013-01-02T02:58:49.707
> 
> 标签：android

我最近得到了一个 Galaxy Tab 2，其中包括一个遥控器。我试图用谷歌搜索一些 api 可用性，但找不到任何东西。是否有在自定义应用程序上使用 IR 控件，还是被三星锁定？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-30T06:39:16.533

真的很晚的答案，但对于那些发现这个问题的人......

我也在寻找三星红外 API。我只发现[三星开发者论坛对](http://developer.samsung.com/forum/board/thread/view.do?boardName=GeneralB&messageId=169734)类似查询的回复（日期为 2012 年 9 月 6 日），其中三星代表表示三星没有向公众提供 IR API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-03T05:26:11.607

我们可以使用自定义应用程序控制 ir blaster..它没有锁定......你可以试试这个代码..

```
@SuppressLint("NewApi")
    public void click(View v) {

        final ConsumerIrManager irManager = (ConsumerIrManager) getSystemService(CONSUMER_IR_SERVICE);
        Log.i("PowerButton", "Button Clicked.");

        if (irManager.hasIrEmitter()) {
            Log.i("PowerButton", "Has IR Emitter.");

            ConsumerIrManager.CarrierFrequencyRange[] freqRange = irManager.getCarrierFrequencies();

            Log.i("PowerButton", "Min Frequency: " + freqRange[0].getMinFrequency());
            Log.i("PowerButton", "Max Frequency: " + freqRange[0].getMaxFrequency());

            int[] pattern = {/* Insert pattern here */};
            int frequency = 10000;

            irManager.transmit(frequency, pattern);
        } else {
            Log.i("PowerButton", "Does not have an IR Emitter.");
        }

    } 
```

# java - Android：有选择地使用 onPause()

> ID：14116403
> 
> 赞同：0
> 
> 时间：2013-01-02T02:59:00.097
> 
> 标签：java, android, onpause

我有一个单一的活动计时器应用程序，其中我重写了 onPause() 方法以在用户按下主页或返回按钮时暂停计时器。但是，我希望计时器在用户手动关闭屏幕的情况下继续移动，但我知道这也会调用 onPause() 方法。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T03:02:17.870

您可以覆盖`onBackPressed`以允许您在按下后退按钮时添加一些额外的逻辑。但是，更好的方法可能是将代码放入 中`onStop()`，仅当另一个 Activity 移到前台时才会调用它。

有关更多详细信息，请参阅[Android 文档](https://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T18:53:55.903

我最终通过检测并忽略 onPause() 方法中的屏幕关闭事件来做到这一点。可以在此处找到有关如何执行此操作的说明：http: [//thinkandroid.wordpress.com/2010/01/24/handling-screen-off-and-screen-on-intents/](http://thinkandroid.wordpress.com/2010/01/24/handling-screen-off-and-screen-on-intents/)

具体来说，我使用了评论中的这段代码（由 Kyle 提供）：

```
 @Override
    protected void onCreate() {
        // initialize receiver
        IntentFilter filter = new IntentFilter(Intent.ACTION_SCREEN_ON);
        filter.addAction(Intent.ACTION_SCREEN_OFF);
        BroadcastReceiver mReceiver = new ScreenReceiver();
        registerReceiver(mReceiver, filter);
        //NEW
        PowerManager pm =(PowerManager) getSystemService(Context.POWER_SERVICE);
        // your code
    }
    @Override
    protected void onPause() {
        // when the screen is about to turn off
        // Use the PowerManager to see if the screen is turning off
        if (pm.isScreenOn() == false) {
            // this is the case when onPause() is called by the system due to the screen turning off
            System.out.println(“SCREEN TURNED OFF”);
        } else {
            // this is when onPause() is called when the screen has not turned off
        }
        super.onPause();
    } 
```

# java - Android RESTful POST 去哪儿了？

> ID：14116405
> 
> 赞同：0
> 
> 时间：2013-01-02T02:59:41.290
> 
> 标签：java, android, rest, post

我想首先说我是 Android 和 java 的新手（在较小程度上）。我有一个客户端-服务器应用程序，客户端是一个 Android 应用程序，服务器正在运行 Tomcat。考虑到我是新手，我对 POST 请求有点困惑。客户端有几个文本字段，用户输入信息并点击一个按钮，该按钮调用一个可以很好地完成 POST 任务的方法。我可以看到服务器从客户端的 POST 表单中接收数据，但我的问题是这些信息（来自表单）去哪里了？它应该创建一个新资源（在本例中为 Person 资源）...这是执行 POST 的 PersonResource 类的代码。

```
@POST
@Consumes(MediaType.APPLICATION_FORM_URLENCODED)
@Produces(MediaType.APPLICATION_JSON)
public Person postPerson(MultivaluedMap<String, String> personParams) {
    String firstName = personParams.getFirst(FIRST_NAME);
    String lastName = personParams.getFirst(LAST_NAME);
    String email = personParams.getFirst(EMAIL);

    System.out.println ("System storing: " + firstName + " " + lastName + " " + email);

    person.setFirstName(firstName);
    person.setLastName(lastName);
    person.setEmail(email);

    System.out.println ("person info: " + person.getFirstName() + " " + person.getLastName() + " " + person.getEmail() + " " + person.getId());

    return person;
} 
```

它返回一个人员资源，但最终该人员资源到哪里去了？如果我没有提供解决此问题所需的所有必要信息，我深表歉意。如果需要更多信息，我将很乐意提供。我真的很感激给予的任何帮助。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T03:24:48.417

我不确定我是否完全理解这个问题，但这里有一个可能有用的概述：

客户端 POST 向服务器发送 HTTP 请求。服务器必须具有某种处理请求的 Web 服务框架（例如 Jersey 或 CXF 或...）。类上的 JAX-RS 注释（@POST 和 @Consume）指示 Web 服务框架将请求路由到类的*postPerson*方法。听起来这很有效，是吗？

然后，您的方法会根据表单的内容（即用户输入）构造一个 Person 对象。您的方法将此 Person 返回到 Web 服务框架。

那么这个人会怎么样呢？您提供的 @Produces 注释指示 Web 服务框架生成人员的 JSON 表示并将其包含在发送回客户端的 HTTP 响应的正文中。响应可能如下所示：

```
HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
Content-Length: 259
{"fistName":"Bob", "lastName":"Barker", "email":"bob_bark@priceisright.com"} 
```

这是你要找的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T04:26:21.977

您可以使用 HttpPost 提交请求，然后使用 gson 将响应转换回对象。HttpPost 应该放在异步请求（即 AsyncTask）下。你可以参考

[http://www.androidsnippets.com/executing-a-http-post-request-with-httpclient](http://www.androidsnippets.com/executing-a-http-post-request-with-httpclient)

[异步 HTTP 发布 android](https://stackoverflow.com/questions/9954477/async-http-post-android)

[http://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)

# algorithm - 生成随机花的算法思路

> ID：14116410
> 
> 赞同：5
> 
> 时间：2013-01-02T03:00:39.300
> 
> 标签：algorithm, random

谁能建议任何链接、想法或算法来随机生成花朵，就像我的个人资料图片一样？个人资料图片花只有一个 10 x 10 网格，算法并不是真正随机的。我还希望新算法使用大约 500 x 500 甚至更好的网格，允许用户选择网格的大小。

[Plant[][] 被声明为 int plant[10][10];]

```
public void generateSimpleSky(){

    for(int w2=0;w2<10;w2++)
        for(int w3=0;w3<10;w3++)
            plant[w2][w3]=5;

}

public void generateSimpleSoil(){

    for(int q=0;q<10;q++)
        plant[q][9]=1;

}

public void generateSimpleStem(){

    int ry=rand.nextInt(4);
    plant[3+ry][8]=4;
    xr=3+ry;

    for(int u=7;u>1;u--){

        int yu=rand.nextInt(3);
        plant[xr-1+yu][u]=4;
        xr=xr-1+yu;

    }

}

public void generateSimpleFlower(){

    plant[xr][2]=3;

    for(int q2=1;q2<4;q2++)
        if((2-q2)!=0)
            plant[xr][q2]=2;

    for(int q3=xr-1;q3<=xr+1;q3++)
        if((xr-q3)!=0)
            plant[q3][2]=2;

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T07:59:00.577

这听起来像是一个相当简单的问题，您一次只生成 1 个参数，可能基于先前变量的输出。

我的花模型是：它只有一个相当直立的茎，一个完美的圆形中心，茎上交替的两侧有一些叶子，花瓣完美地分布在中心周围。

`random()`只是某些选定范围内的随机数，每个变量的范围可能是唯一的。`random(x1, x2, ..., xn)`根据变量 x1, x2, ..., xn 生成某个范围内的随机数（如 stemWidth < stemHeight/2，一个合理的假设）。

**茎**

```
stemXPosition = width / 2
stemHeight = random()
stemWidth = random(stemHeight)
stemColour = randomColour()
stemWidthVariationMax = random(stemWidth, stemHeight)
stemWidthVariationPerPixel = random(stemWidth, stemHeight) 
```

`stemWidthVariationMax`/`-PerPixel`用于生成不完全笔直的茎（如果你想做一些复杂的事情，低`PerPixel`是为了平滑）。使用这些生成词干，如下所示：

```
pixelRelative[y-position][0] := left x-position at that y-position relative to the stem
pixelRelative[y-position][1] := right x-position at that y-position relative to the stem

pixelRelative[0][0] = randomInRange(-stemWidthVariationMax, stemWidthVariationMax)
for each y > 0:
  pixelRelative[y-1][0] = max(min(randomInRange(pixel[y] - stemWidthVariationPerPixel,
                                        pixel[y] + stemWidthVariationPerPixel),
                          -stemWidthVariationMax),
                      stemWidthVariationMax)
//pixelRelative[0][1] and pixelRelative[y-1][1] generated same as pixelRelative[y-1][i]
for each y:
  pixelAbsolute[y][0] = width / 2 - stemWidth / 2 + pixelRelative[y][0]
  pixelAbsolute[y][1] = width / 2 + stemWidth / 2 + pixelRelative[y][1] 
```

您还可以使用弧线来简化事情，一次超过 1 个像素。

**顶端**

```
centerRadius = random(stemHeight)
petalCount = random() // probably >= 3
petalSize = random(centerRadius, petalCount) 
```

生成花瓣不太容易，需要从 0 步长到 2*PI，步长为 ，`2*PI/petalCount`并围绕圆生成弧线。它需要一个好的图形 API 或一些不错的数学。

[这里有](http://golancourses.net/2010spring/02/22/flower-generation/)一些漂亮的花朵顶部，虽然看起来不是开源的。请注意，它们根本没有中心。（或 centerRadius = 0）

**叶子**

您可能可以就此写一篇整篇论文，（如[this one](http://arxiv.org/abs/1004.4388)）但一个简单的想法就是生成一个1/2圆并从那里向外延伸线以在2 *圆的半径处相遇并绘制平行线花上。

一旦有了叶子生成算法：

```
leafSize = random(stemHeight) // either all leaves are the same size or generate the size for each randomly
leafStemLength = random(leafSize) // either all leaves have the same stem length or generate for each randomly
leafStemWidth = random(leafStemLength)
leaf[0].YPosition = random(stemHeight)
leaf[0].XSide = randomly either left or right
leaf[0].rotation = random between say 0 and 80 degrees
for each leaf i:
  leaf[i].YPosition = random(stemHeight, leaf[i-1]) // only generate new leaves above previous leaves
  leaf[i].XSide = opposite of leaf[i].XSide 
```

**最后的话**

确定每个边界的方法`random`要么是争论它，要么给它一些固定值，随机生成其他所有东西几次，不断增加/减少它，直到它开始看起来很奇怪。

10 x 10 与 500 x 500 可能需要非常不同的算法，我不建议在 100 x 100 以下使用上述算法，可能会生成更大的图像并使用平均或其他方法简单地缩小它。

**代码**

我开始编写一些 Java 代码，当我意识到这可能比我想花的时间要长一些，所以我将向您展示我目前所拥有的。

```
 // some other code, including these functions to generate random numbers:
  float nextFloat(float rangeStart, float rangeEnd);
  int nextInt(int rangeStart, int rangeEnd);

  ...

  // generates a color somewhere between green and brown
  Color stemColor = Color.getHSBColor(nextFloat(0.1, 0.2), nextFloat(0.5, 1), nextFloat(0.2, 0.8));
  int stemHeight = nextInt(height/2, 3*height/4);
  int stemWidth = nextInt(height/20, height/20 + height/5);
  Color flowerColor = ??? // I just couldn't use the same method as above to generate bright colors, but I'm sure it's not too difficult
  int flowerRadius = nextInt(Math.min(stemHeight, height - stemHeight)/4, 3*Math.min(stemHeight, height - stemHeight)/4); 
```

# java - MainActivity.this 不是封闭类 AsyncTask

> ID：14116415
> 
> 赞同：10
> 
> 时间：2013-01-02T03:01:26.170
> 
> 标签：java, android, android-asynctask

我正在尝试第一次创建 AsyncTask，但我运气不佳。

我的 AsyncTask 需要从服务器获取一些信息，然后将新布局添加到主布局以显示此信息。

一切似乎或多或少都清楚了，但是“MainActivity 不是封闭类”的错误消息困扰着我。

似乎没有其他人有这个问题，所以我想我错过了一些非常明显的东西，我只是不知道它是什么。

另外，我不确定我是否使用了正确的方法来获取上下文，并且因为我的应用程序没有编译，所以我无法测试它。

非常感谢您的帮助。

这是我的代码：

```
public class BackgroundWorker extends AsyncTask<Context, String, ArrayList<Card>> {
    Context ApplicationContext;

    @Override
    protected ArrayList<Card> doInBackground(Context... contexts) {
        this.ApplicationContext = contexts[0];//Is it this right way to get the context?
        SomeClass someClass = new SomeClass();

        return someClass.getCards();
    }

    /**
     * Updates the GUI before the operation started
     */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
    }

    @Override
    /**
     * Updates the GUI after operation has been completed
     */
    protected void onPostExecute(ArrayList<Card> cards) {
        super.onPostExecute(cards);

        int counter = 0;
        // Amount of "cards" can be different each time
        for (Card card : cards) {
            //Create new view
            LayoutInflater inflater = (LayoutInflater) ApplicationContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            ViewSwitcher view = (ViewSwitcher)inflater.inflate(R.layout.card_layout, null);
            ImageButton imageButton = (ImageButton)view.findViewById(R.id.card_button_edit_nickname);

            /**
             * A lot of irrelevant operations here
             */ 

            // I'm getting the error message below
            LinearLayout insertPoint = (LinearLayout)MainActivity.this.findViewById(R.id.main);
            insertPoint.addView(view, counter++, new ViewGroup.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.WRAP_CONTENT));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-02T03:06:22.153

Eclipse 可能是正确的，并且您正试图从其自己的文件 () 中的另一个类访问它**自己的**文件`MainActivity`内的类 ( )。没有办法做到这一点 - 一个班级应该如何神奇地了解另一个班级的实例？你可以做什么：**`BackgroundWorker`**

 ***   移动 AsyncTask 使其成为[*内部*](http://docs.oracle.com/javase/tutorial/java/javaOO/innerclasses.html)类`MainActivity`
*   将您的 Activity 传递给 AsyncTask （通过其构造函数）然后使用`activityVariable.findViewById();`（我`mActivity`在下面的示例中使用）或者，您的`ApplicationContext`（使用正确的命名约定，`A`需要小写）实际上是`MainActivity`您的一个实例很好去, 也一样`ApplicationContext.findViewById();`

使用构造函数示例：

```
public class BackgroundWorker extends AsyncTask<Context, String, ArrayList<Card>>
{
    Context ApplicationContext;
    Activity mActivity;

   public BackgroundWorker (Activity activity)
   {
     super();
     mActivity = activity;
   }

//rest of code... 
```

至于

> 我不确定我是否使用了正确的方法来获取上下文

没事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-14T15:23:55.000

**上面的例子是内部类，这里是独立类...**

```
public class DownloadFileFromURL extends AsyncTask<String, String, String> {
ProgressDialog pd;
String pathFolder = "";
String pathFile = "";
Context ApplicationContext;
Activity mActivity;

public DownloadFileFromURL (Activity activity)
{
    super();
    mActivity = activity;
}
@Override
protected void onPreExecute() {
    super.onPreExecute();
    pd = new ProgressDialog(mActivity);
    pd.setTitle("Processing...");
    pd.setMessage("Please wait.");
    pd.setMax(100);
    pd.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
    pd.setCancelable(true);
    pd.show();
}

@Override
protected String doInBackground(String... f_url) {
    int count;

    try {
        pathFolder = Environment.getExternalStorageDirectory() + "/YourAppDataFolder";
        pathFile = pathFolder + "/yourappname.apk";
        File futureStudioIconFile = new File(pathFolder);
        if(!futureStudioIconFile.exists()){
            futureStudioIconFile.mkdirs();
        }

        URL url = new URL(f_url[0]);
        URLConnection connection = url.openConnection();
        connection.connect();

        // this will be useful so that you can show a tipical 0-100%
        // progress bar
        int lengthOfFile = connection.getContentLength();

        // download the file
        InputStream input = new BufferedInputStream(url.openStream());
        FileOutputStream output = new FileOutputStream(pathFile);

        byte data[] = new byte[1024]; //anybody know what 1024 means ?
        long total = 0;
        while ((count = input.read(data)) != -1) {
            total += count;
            // publishing the progress....
            // After this onProgressUpdate will be called
            publishProgress("" + (int) ((total * 100) / lengthOfFile));

            // writing data to file
            output.write(data, 0, count);
        }

        // flushing output
        output.flush();

        // closing streams
        output.close();
        input.close();

    } catch (Exception e) {
        Log.e("Error: ", e.getMessage());
    }

    return pathFile;
}

protected void onProgressUpdate(String... progress) {
    // setting progress percentage
    pd.setProgress(Integer.parseInt(progress[0]));
}

@Override
protected void onPostExecute(String file_url) {
    if (pd!=null) {
        pd.dismiss();
    }
    StrictMode.VmPolicy.Builder builder = new StrictMode.VmPolicy.Builder();
    StrictMode.setVmPolicy(builder.build());
    Intent i = new Intent(Intent.ACTION_VIEW);

    i.setDataAndType(Uri.fromFile(new File(file_url)), "application/vnd.android.package-archive" );
    i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

    getApplicationContext().startActivity(i);
} 
```

}**

# android - Android：在外部触摸时缩放动画后发生onTouch事件

> ID：14116417
> 
> 赞同：0
> 
> 时间：2013-01-02T03:01:38.790
> 
> 标签：android, animation, touch-event

我有一个看起来像这样的布局：

```
<FrameLayout
    android:id="@+id/container"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >
    <ImageView
        android:id="@+id/image"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:scaleType="center"/>
</FrameLayout> 
```

“图像”是全屏开始的。为“图像”设置了一个 onTouchListener，效果很好。然后我用 ScaleAnimation 缩放“图像”（大约一半大小），我期望发生的是 onTouchListener 只会在“图像”被触摸时拾取，但它仍然会在整个屏幕上触发并且 getX 得到相同作为 getRawX 的值。

有什么方法可以检测我是否在 onTouch 的图像范围内？我考虑过根据比例值对边界进行硬编码，但肯定有更优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T06:23:10.037

首先，您可以在屏幕上找到图像的宽度和高度，如下所示：

```
widthOnScreen = origWidth * scaleFactor
heightOnScreen = origHeight * scaleFactor 
```

正如你所说的“图像是全屏开始” `origWidth = viewWidth`，`origHeight = viewHeight`并且 scaleFactor 是应用到图像上的总比例，直到最大/最小。

```
matrix.getvalues(val); 
```

保持左、上、右、下：

```
left=val[2]; 
right=val[Matrix.MSCALE_X]*actualWidth+val[2]; //actualWidth is image's actual width
top=val[5];
bottom=vals[Matrix.MSCALE_Y]*actualHeight+val[5]; 
```

然后`onTouch()`，检查您的`event.getX()`,`getY()`是否在这些左、上、右和下边界内。

# android - Android：应用程序未在 AVD 中预览

> ID：14116418
> 
> 赞同：0
> 
> 时间：2013-01-02T03:01:46.450
> 
> 标签：android, eclipse, avd

我已经处理这个问题两天了，因为我是 Android 开发的新手。我正在使用 Eclipse，当我选择启动应用程序时，AVD 启动，屏幕黑屏几秒钟，然后出现动画“Android”，此后没有任何反应。起初我以为它正在加载，直到我打开它将近一个小时，但什么也没发生。

控制台读取

```
[2013-01-01 20:52:57 - FirstApp] Android Launch!
[2013-01-01 20:52:57 - FirstApp] adb is running normally.
[2013-01-01 20:52:57 - FirstApp] Performing com.example.firstapp.MainActivity activity launch
[2013-01-01 20:52:58 - FirstApp] Automatic Target Mode: launching new emulator with compatible AVD 'AVD_for_Nexus_S_by_Google'
[2013-01-01 20:52:58 - FirstApp] Launching a new emulator with Virtual Device 'AVD_for_Nexus_S_by_Google'` 
```

正如我所说，我对此并不陌生，如果我没有提及任何其他必要的组件，那仅仅是因为我不知道在哪里可以找到这个解决方案。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T07:00:44.963

对于所有 Android 初学者来说，这可能是一个非常烦人的问题。起初，我也习惯于盯着“Android”动画几分钟和几小时，只是想知道。

使用安卓模拟器：

```
1\. Always start the AVD before directly running an application.  
Emulators usually take a considerable amount of time to load before you can  
actually try to run an app.  
2\. Change the timeout settings by Window-->Preferences-->Android-->DDMS-->ADB  
Connection TimeOut. Set it to say 50000\.  
3\. Once the AVD has loaded fully(there is usually a homescreen kind of display  
after the 'Android' animation you mentioned), then run your app as right-click-->  
Run as Android Application  
4.Sometimes, there is a keypad lock on the emulator display just like a phone, so  
you might have to manually unlock the display before you can see the running app 
```

希望这可以帮助。

# c++ - 如何强制 gcc 链接未使用的静态库

> ID：14116420
> 
> 赞同：44
> 
> 时间：2013-01-02T03:01:54.673
> 
> 标签：c++, c, gcc, g++, ld

我有一个程序和一个静态库：

```
// main.cpp
int main() {}

// mylib.cpp
#include <iostream>
struct S {
    S() { std::cout << "Hello World\n";}
};
S s; 
```

我想将静态库（`libmylib.a`）链接到程序对象（`main.o`），尽管后者不直接使用前者的任何符号。

以下命令似乎不适用于`g++ 4.7`. 它们将在没有任何错误或警告的情况下运行，但显然`libmylib.a`不会链接：

```
g++ -o program main.o -Wl,--no-as-needed /path/to/libmylib.a 
```

或者

```
g++ -o program main.o -L/path/to/ -Wl,--no-as-needed -lmylib 
```

你有更好的想法吗？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-01-02T03:20:58.113

使用`--whole-archive`链接器选项。

*命令行中紧随其后*的库不会丢弃未引用的符号。`--no-whole-archive`您可以通过在这些库之后添加来恢复正常的链接行为。

在您的示例中，命令将是：

```
g++ -o program main.o -Wl,--whole-archive /path/to/libmylib.a 
```

一般来说，它将是：

```
g++ -o program main.o \
    -Wl,--whole-archive -lmylib \
    -Wl,--no-whole-archive -llib1 -llib2 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-02T03:21:42.083

最初的建议是“关闭”：

*   [如何强制 gcc 从库中链接未引用的静态 C++ 对象](https://stackoverflow.com/questions/4767925/how-to-force-gcc-to-link-unreferenced-static-c-objects-from-a-libraray)

尝试这个： `-Wl,--whole-archive -lyourlib`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-02T05:38:36.253

我更喜欢其他答案，但这是另一个“解决方案”。

1.  使用 ar 命令从存档中提取所有 .o 文件。

    ```
    cd mylib ; ar x /path/to/libmylib.a 
    ```

2.  然后将所有这些 .o 文件添加到链接器命令

    ```
    g++ -o program main.o mylib/*.o 
    ```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-05-10T13:44:10.753

如果静态库中有一个特定函数被链接器剥离为未使用，但您确实需要它（一个常见示例是**JNI_OnLoad()**函数），您可以强制链接器保留它（当然，所有代码从此函数调用）。添加`-u JNI_OnLoad`到您的链接命令。

# jquery - 根据标题更改悬停图像

> ID：14116423
> 
> 赞同：1
> 
> 时间：2013-01-02T03:02:12.613
> 
> 标签：jquery

好的，所以我试图根据它们的标题在悬停时更改 5 个图像。我有一个代码，它部分有效，我相信我写得不正确。所以我要发布两次尝试，希望有人能理解我想要做什么。

```
$(document).ready(function() { 
var found = $('.user-basic-info img'); 
 found.filter('[src="http://i13.servimg.com/u/f13/17/83/35/07/adminn10.png"]')
  .hover(function(){
 $(this).closest('img').replaceWith('<img alt="" src="http://i13.servimg.com/u/f13/17/83/35/07/adming10.png"/>');
 });
});

$(document).ready(function() { 
var found = $('.user-basic-info img'); 
 found.filter('[src="http://i13.servimg.com/u/f13/17/83/35/07/adminn10.png"]')
  .hover(function(){
 $(this).closest('img').onMouseEnter('<img alt="" src="http://i13.servimg.com/u/f13/17/83/35/07/adming10.png"/>').onMouseOut('<img alt="" src="http://i13.servimg.com/u/f13/17/83/35/07/adminn10.png"/>');
 });
}); //this code works partly as well, I just get no method of onMouseEnter 
```

第一次使用悬停效果来回更改图像。我还需要能够使它与其他 5 个图像兼容，所以我必须为每个“src”或者更确切地说是标题有变量

为了澄清一个问题，`.filter`我们可以对标题做同样的事情吗？就像这样`[title="Founder"]`只是想知道因为上面（关于变量）我想知道我是否可以写......

`var a = $('.user-basic-info img').filter('[title="Founder"]');`

`var b = $('.user-basic-info img').filter('[title="Founder"]');`

就是想

我现在使用的代码::

```
$(function(){
var a = $('.user-basic-info img[title=Founder]');
var b = $('.user-basic-info img[title=Manager]');
var c = $('.user-basic-info img[title=Members]');
var d = $('.user-basic-info img[title=Technician]');
var e = $('.user-basic-info img[title=Moderator]');
var f = $('.user-basic-info img[title=Presidential]');
  $(div.post).hover(function() {
 a.attr('src','http://i13.servimg.com/u/f13/17/83/35/07/adming10.png');
  },
function() {
  a.attr('src','http://i13.servimg.com/u/f13/17/83/35/07/adminn10.png');
 });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T03:14:40.903

你可以试试这个：

```
$(document).ready(function() { 
    $('.user-basic-info img[title=Founder]').hover(
        function() {
            $(this).attr('src', "http://i13.servimg.com/u/f13/17/83/35/07/adming10.png"​);
        },
        function() {
            $(this).attr('src', "http://i13.servimg.com/u/f13/17/83/35/07/adminn10.png");
        }
    );
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T03:14:46.997

```
<img class=".user-basic-info" title="Founder" src="http://i13.servimg.com/u/f13/17/83/35/07/adminn10.png">

$('.user-basic-info img[title=Founder]').hover(function() {
    $(this).attr('src','http://i13.servimg.com/u/f13/17/83/35/07/adming10.png');
},
function() {
    $(this).attr('src','http://i13.servimg.com/u/f13/17/83/35/07/adminn10.png');
}); 
```

这样的事情对你有用吗？

[http://jsfiddle.net/Q6XMA/5/](http://jsfiddle.net/Q6XMA/5/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T03:06:33.223

`closest('img')`永远不会起作用，因为图像没有后代。从方法链中删除它：

```
$(this).replaceWith('<img alt="" src="http://i13.servimg.com/u/f13/17/83/35/07/adming10.png"/>'); 
```

如果您的最终目标是在悬停时切换 src 属性，只需这样做，而不是替换整个图像：

```
$(this).attr('src','http://i13.servimg.com/u/f13/17/83/35/07/adming10.png'); 
```

也可以按标题属性进行过滤。您发布的片段应该可以正常工作。

# javascript - 在使用带有 underscore.js 的 jquery mobile 时遇到问题。

> ID：14116427
> 
> 赞同：1
> 
> 时间：2013-01-02T03:03:34.223
> 
> 标签：javascript, jquery-mobile, underscore.js

嘿伙计们，我正在尝试使用 jquery mobile 来构建应用程序。还将 underscore.js 用于一些模板功能。我试图弄清楚为什么表单不采用 jquery mobile 附带的 css 规则。我认为这与我的表单位于用于使用 underscore.js 的脚本标记内这一事实有关，我希望有人能阐明这个问题。

```
<script type="text/html" id='usageList'>
 <form method="post" action="parse/final_template.html"> 
     <input type="text" name="Name" value="some text" data-mini="true" />
    <select name="Location">
     <% _.each(deals,function(item,key,list){ %>
    <% var f = item.Name; %><!-- create more variables -->

      <option value="<%= item.name %>">  <%= item.name %> </option>
    <% }); %>
    </select>

</form>
 </script> 
```

# excel - 从 excel 中读取特定列并解析数据

> ID：14116428
> 
> 赞同：1
> 
> 时间：2013-01-02T03:03:36.480
> 
> 标签：excel, clojure

由于记录是不可变的，我无法读取数据并在没有它自己创建新实例的情况下对其进行解析。此外，我如何能够从许多特定列中读取我的 excel 文件，而不是从第 0 列读取到 EOF。无论如何，我是否可以从第 1 列、第 3 列、第 5 列读取数据。假设第 1 列将被解析为字符串，第 3 列将解析为整数，第 5 列将解析为长整数。

```
(defrecord Record [Name Age Index])

(defn read-csv [fname count]
  (with-open [file (io/reader fname)]
    (doall (take count (map (comp first csv/read-csv)
                            (line-seq file))))))
(def records (map #(apply ->Record %) (read-csv "C:/Users/user/Documents/URECA/hi/lib/test.csv" 1))) 
```

这就是我所拥有的，但它似乎是在逐步阅读这些列

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T06:32:49.587

要保留文本字段的引号，您可以通过正则表达式解析 csv 文件：

```
(defn read-csv [fname count]
  (with-open [file (io/reader fname)]
    (doall (map #(str/split % #",") ; doesn't work with commas in text fields
                (take count (line-seq file))))))

(defn make-record [idxs types row]
  (apply ->Record
         (map (fn [idx t]
                (let [value (nth row idx)]
                  (case t
                    :string value
                    :int (Integer/parseInt value)
                    :long (Long/parseLong value))))
              idxs types)))

(def records (map (partial make-record
                           [0 2 4]
                           [:string :int :long])
                  (read-csv "/home/mobyte/test.csv" 3)))

(pprint records)
-> ({:Name "\"s1\"", :Age 1, :Index 111}
    {:Name "\"s2\"", :Age 2, :Index 112}
    {:Name "\"s3\"", :Age 3, :Index 113})

(type (:Age (first records)))
->java.lang.Integer

(type (:Index (first records)))
-> java.lang.Long

(type (:Name (first records)))
-> java.lang.String 
```

# php - 函数中的多个参数通过 arrary_filter 运行

> ID：14116430
> 
> 赞同：0
> 
> 时间：2013-01-02T03:03:39.370
> 
> 标签：php

我如何运行多个参数`array_filter`？这是我的带有多个参数和`array_filter`代码的函数

```
function is_txt($file, $user) {
return preg_match('/backup-[0-9]+\.[0-9]+\.[0-9]+_[0-9]{2}-[0-9]{2}-[0-9]{2}_'.$user.'.tar.gz/', $file) > 0;
}

....

$list = ftp_nlist($conn_id, $ftp_dir);
$filtered = array_filter($list, 'is_txt');
if(count($filtered)){
foreach( $filtered as $name => $file){

echo $file; 
echo "<br>";

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T03:08:15.043

您可以使用匿名函数：

```
$filtered = array_filter($list, function($file) use ($user) {
  return is_txt($file, $user);
}); 
```

*※PHP版本需要>= 5.3*

# java - JScrollPane 滚动条不可滚动

> ID：14116433
> 
> 赞同：2
> 
> 时间：2013-01-02T03:03:59.597
> 
> 标签：java, swing, jframe, jscrollpane, jcomponent

我有一个类可以绘制一些非常简单的图形，例如线条、圆形和矩形。线条是可动态扩展的，有时当它们超出分辨率时，如果没有滚动条就无法看到。因此，我已将 JScrollPane 添加到我的 JFrame 中，但不幸的是，尽管已经调用了布局管理器，但滚动条不可滚动。

这是我所拥有的： - 一个绘制组件（线、矩形、圆形）的类 - 一个设置 JFrame/JScrollPane 的类

这是我的 GUI 类的摘录代码：

```
 JFrame frame = new JFrame("GUIFrame");
    frame.setLayout(new BorderLayout()); // Layout already set
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    DrawComponent comp = new DrawComponent(); // Reference to class that draw components
    JScrollPane sp = new JScrollPane(comp, ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS, ScrollPaneConstants.HORIZONTAL_SCROLLBAR_ALWAYS);
    sp.setPreferredSize(new Dimension(1000, 1000));

    frame.add(sp, BorderLayout.CENTER);
    frame.setSize(500,500);
    frame.setVisible(true); 
```

使用上面的代码，我让 Java 向我展示了一个带有滚动窗格的 JFrame，其中包含我的 jcomponents。我已将滚动条设置为始终如上所示显示，但它们不可滚动，呈灰色显示。

正如 Andrew 所建议的，我花了一些时间来创建一个 SSCCE 来反映我正在尝试做的事情：

```
import java.awt.BorderLayout;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.geom.Line2D;
import java.util.Random;

import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.ScrollPaneConstants;

public class DrawTest {
    public static void main(String[] args){
        JFrame frame = new JFrame("SSCCE");
        frame.setLayout(new BorderLayout());
        frame.setSize(1000, 1000);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);       

        DrawComp d = new DrawComp();
        JScrollPane sp = new JScrollPane(d, ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS, ScrollPaneConstants.HORIZONTAL_SCROLLBAR_ALWAYS);

        frame.add(sp);      
        frame.setVisible(true);
    }
}

class DrawComp extends JComponent {

    public void paintComponent(Graphics g){
        Graphics2D g2 = (Graphics2D)g;

        Random ran = new Random();
        int ranNum = ran.nextInt(10);
        System.out.println(ranNum);
        double length = 100 * ranNum;
        g2.draw(new Line2D.Double(10, 10, length, length));
    }
} 
```

上面的代码根据随机输入绘制了一条对角线。我打算做的是，当行变得太长以至于超出框架大小时，我希望我能够滚动并查看整行。我再次将 line 组件添加到 JScrollPane 但它不能滚动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T05:07:24.223

我很抱歉。您正在以正确的方式使用 JScrollPane。我运行了你的代码，我想我明白了 JScrollPane 不工作的原因。想象一下，当您将 jframe 的背景设置为全红色（通过在各处绘制红点）时，jscrollpane 是否应该可以滚动？不，因为绘制背景颜色是在背景中。实际的 VIEW 没有改变，也没有比显示尺寸大，所以滚动窗格看不到滚动点。您的绘画组件方法正在做类似的事情。它只是在背景中绘制一些东西。实际的 VIEW 没有改变，所以滚动窗格不起作用。

```
public class DrawTest {
    public static void main(String[] args){
        JFrame frame = new JFrame("SSCCE");
        frame.setLayout(new BorderLayout());
        frame.setSize(500, 500);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);       

        final DrawComp d = new DrawComp();
        final JScrollBar hbar,vbar;
        hbar = new JScrollBar(JScrollBar.HORIZONTAL, 0, 1, 0, 500);
        vbar = new JScrollBar(JScrollBar.VERTICAL, 0, 1, 0, 500);

        frame.setLayout(null);
        frame.add(d);      
        frame.add(hbar);      
        frame.add(vbar);      
        d.setBounds(0, 0, 300, 300);
        vbar.setBounds(460, 0, 20, 480);
        frame.setVisible(true);

        vbar.addAdjustmentListener(new AdjustmentListener() 
        {
            public void adjustmentValueChanged(AdjustmentEvent e) 
            {
                d.setLocation(d.getX(), -vbar.getValue());
            }
        });
    }
} 
```

这是垂直滑动组件的代码。我对您现有的代码进行了一些更改。DrawComp 还是一样的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T08:17:07.127

我找到了一个临时解决我的问题的方法。鉴于绘图非常简单，我决定使用线的终点来覆盖preferredSize。

关于我在上面发布的 SSCCE，我在 paintComponent() 中添加了一个*setPreferredSize(new Dimension(length, length)*以便在调用时，preferredSize 始终是该行的终点。这确保我得到了如果需要，可以覆盖整个绘画区域，但仍可以滚动。

# java - 从 txt 文件中读取

> ID：14116434
> 
> 赞同：0
> 
> 时间：2013-01-02T03:04:23.707
> 
> 标签：java

我写了一个方法，每次看到一个新单词时都会给`int`被调用者加 1：`total`

```
public int GetTotal() throws FileNotFoundException{
    int total = 0;
    Scanner s = new Scanner(new BufferedReader(new FileReader("Particles/Names.txt")));
    while(s.hasNext()){
        if(s.hasNext()){
            total++;
        }
    }
    return total;
} 
```

这是正确的写法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T03:08:19.740

看起来不错。但这`inner IF`是不必要的，`next()`方法也是必需的。下面应该没问题。

```
public int GetTotal() throws FileNotFoundException{
    int total = 0;
    Scanner s = new Scanner(new BufferedReader(new FileReader("Particles/Names.txt")));
    while(s.hasNext()){
            s.next();
            total++;
    }
    return total;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T03:11:14.367

Scanner 实现了 Iterator。你至少应该让迭代器向前迈出一步，像这样：

```
public int GetTotal() throws FileNotFoundException{
int total = 0;
Scanner s = new Scanner(new BufferedReader(new FileReader("Particles/Names.txt")));
while(s.hasNext()){
        s.next();
        total++;
}
return total; 
```

}

否则循环将无限运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T03:22:09.257

使用正则表达式匹配所有非空格。:-)

```
import java.io.File;
import java.io.FileNotFoundException;
import java.util.Scanner;

public class ScanWords {

 public ScanWords() throws FileNotFoundException {
   Scanner scan = new Scanner(new File("path/to/file.txt"));
   int wordCount = 0;
   while (scan.hasNext("\\S+")) {
     scan.next();
     wordCount++;
   }
   System.out.printf("Word Count: %d", wordCount);
 }

 public static void main(String[] args) throws Exception {
    new ScanWords();
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T03:31:10.107

正如其他人所说，您有一个无限循环。还有一种更简单的使用扫描仪的方法。

```
 int total = 0;
    Scanner s = new Scanner(new File("/usr/share/dict/words"));

    while(s.hasNext()){
        s.next();
        total++;
    }
    return total; 
```

# php - 检索网站上的电子邮件地址

> ID：14116435
> 
> 赞同：0
> 
> 时间：2013-01-02T03:04:31.053
> 
> 标签：php

我是 Android 应用程序的发布者。

我的网站需要自动检索 Android 应用程序数据，但 Google Play 不支持 iTunes Store 等 API 系统。因此，我需要创建一个有助于检索 Android 数据的 PHP 命令。我需要获取标题、应用图片、描述和电子邮件地址。

首先，当我知道 Google Play URL 地址时，我试图获取电子邮件地址。这是我做的例子。这是华尔街日报应用程序。

华尔街日报 Android 应用 URL - [https://play.google.com/store/apps/details?id=wsj.reader_sp](https://play.google.com/store/apps/details?id=wsj.reader_sp)

```
<a href="mailto:mobilereader@wsj.com" rel="nofollow">Email Developer</a> 
```

当我点击该网站时，我可以找到上面的 HTML 代码。

```
$Google_Play_URL = 'https://play.google.com/store/apps/details?id=wsj.reader_sp';
$string = file_get_contents($Google_Play_URL);

$parsing = new SimpleXmlElement($string); 
$attrs = (array)$parsing->attributes(); 
$mail = str_replace('mailto:','',$attrs['href']); 
if(filter_var($mail,FILTER_VALIATE_MAIL))
{
   echo $mail;
} 
```

结果应该是“mobilereader@wsj.com”，但它失败了。你能看出问题吗？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T03:17:51.127

您可以使用 PHP [DOMDocument](http://php.net/manual/en/class.domdocument.php)来执行此操作，例如：

```
$Google_Play_URL = 'https://play.google.com/store/apps/details?id=wsj.reader_sp';
$string = file_get_contents($Google_Play_URL);

$dom = new DOMDocument();
$dom->loadHTML($string);
$anchors = $dom->getElementsByTagName('a');

foreach ($anchors as $anchor) {
    if ($anchor->nodeValue === 'Email Developer') {
        $email = str_replace('mailto:', '', $anchor->getAttribute('href'));

        if (filter_var($email, FILTER_VALIDATE_EMAIL)) {
            echo $email;
        }
    }
} 
```

您提供的 url 的示例输出为：`mobilereader@wsj.com`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T03:12:40.113

使用正则表达式匹配电子邮件地址。此外，您在过滤器名称中有错字。

尝试这个：

```
$Google_Play_URL = 'https://play.google.com/store/apps/details?id=wsj.reader_sp';
$string = file_get_contents($Google_Play_URL);

preg_match('/<a href="mailto\:(.*)" rel="nofollow">Email Developer<\/a>/s', $string, $matches);
if (count($matches) > 0 && filter_var($matches[1], FILTER_VALIDATE_MAIL))
{
   echo $matches[1];
} 
```

# javascript - 将javascript字符串隐式解析为整数有什么缺点吗？

> ID：14116436
> 
> 赞同：4
> 
> 时间：2013-01-02T03:05:11.320
> 
> 标签：javascript

有什么区别

```
"2" * 1 + 5 
```

和

```
parseInt("2") + 5 
```

只是为了写一个更易读的代码，还是第一种形式存在兼容性问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T03:15:37.170

`parseInt`用于从字符串中获取整数。考虑以下代码：

```
var myString = "3 blind mice";
var myInteger = parseInt(myString); //3 
```

JavaScript 会自动进行类型转换，所以是这样的：

```
"2" * 1 + 5 //7 
```

字符串`"2"`被转换为数字。

正如上面在评论中提到的，`parseInt`为 base 提供了一个额外的参数。

JavaScript 有很多关于类型转换的非常奇怪的规则，有时并不清楚 JavaScript 在每种情况下会做什么。请记住，`+`运算符也用于连接和加法。

如果您尝试将某些内容显式转换为数字，则可以使用`Number`JavaScript 提供的构造函数。考虑到以下几点：

```
var myString = "2";
var myNum = Number(myString); //2
console.log(typeof myNum); //number 
```

如果没有`new`关键字，它可以用于将字符串转换为数字。虽然它确实有效，但我不确定`parseInt`是否应该用于转换。只需使用`Number`构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T03:21:33.287

我不认为在第一种形式中使用强制转换存在兼容性问题，它是一种应该被广泛支持的语言特性。

但是，由于您必须添加代码来进行任何一种转换（`* 1`vs. ），我会从风格的角度`parseInt`投票，因为它使您的意图更清晰。`parseInt`有时很难在不使用隐式转换的情况下直接在 javascript 中保持类型。

不熟悉您的代码或 javascript 的人可能想知道第一种形式发生了什么。

另外，正如评论中所指出的那样，`parseInt`速度更快，所以这是一场全面的胜利。

# validation - 在应用程序中扩展 JSF 验证

> ID：14116437
> 
> 赞同：0
> 
> 时间：2013-01-02T03:05:15.587
> 
> 标签：validation, jsf

我们正在开发一个基于 JSF (v2.0) 框架的 Web 应用程序。我们需要在我们的应用程序中进行自定义验证。我们决定`JSF validation framework`通过实现`Validator`类来扩展 。

所以让我们说我们有多个需要验证的输入字段。这些输入字段是`First Name, Last Name`，`Email Address.`我们需要用户在这些字段中输入信息。并且电子邮件地址字段将有两个验证 -`Required`和`isValidEmailAddress`.

我们应该能够在和字段中使用自定义`Required`验证。**但每次我希望为每个字段显示不同的错误消息**。例如，如果是，我想显示 First Name Last name Last name is required`。`First Name, Last Name``Email Address`**`First Name``is required. In case of``I want to display`**

 **如何`Required`为多个字段重用相同的验证实现但错误消息不同？可以在 JSF 中做到这一点吗？你能告诉我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T04:07:25.160

首先，您不需要在 JSF 中为所需的输入编写自己的验证逻辑。它是框架本身提供的基本设施之一。

JSF 的验证框架完全从与验证相关的消息中抽象出来，因此两者不必相互依赖。您的选择：

1.  每个输入组件都有一个`validatorMessage`属性，允许您指定将在验证错误时显示给用户的文本/字符串。对于您的特定用例，JSF 更进一步为输入组件指定`required`and`requiredMessage`属性；分别强制执行所需的输入并显示专门用于所需输入验证的消息。这在您的用例中意味着您不需要为所需的输入编写自定义验证逻辑。

2.  根据更好的设计原则，您可以在资源包中配置所有所需的验证/转换错误消息（[此处](http://www.mkyong.com/jsf2/jsf-2-0-and-resource-bundles-example/)为示例），并在您的 jsf 视图中引用资源包中的条目。

实现验证器接口需要您实现`validate`具有以下签名的方法

```
 public void validate(FacesContext ctxt, UIComponent comp, Object value) throws ValidatorException 
```

`comp`指正在验证的组件，您可以从中获取它`Class`，clientId 等`value`将提供来自组件的提交值**

# ruby-on-rails-3 - 是否有 Rails 约定将大量查询数据保存到浏览器？

> ID：14116438
> 
> 赞同：1
> 
> 时间：2013-01-02T03:05:41.173
> 
> 标签：ruby-on-rails-3, jquery

我有一个应用程序，它允许用户从具有许多列的单个大表中向下钻取数据。它是这样工作的：

*   屏幕上有一个不同的顶级表值列表。

*   用户单击它，然后列表更改为单击的任何内容的不同的下一级值。

*   用户单击其中一个值，进入第三级值等。

他们可以通过大约 50 个属性，但通常最终只有 3 或 4 个。但由于这 3 或 4 个在 50 个可能的属性中有所不同，我必须将选择保留到浏览器。现在我以一种可怕而笨重的隐藏形式来做这件事。它有效，但它是微妙的和次优的。为了使其工作，屏幕上的任何级别属性的值都将填充到单击事件的隐藏表单上的适当位置，然后 jQuery Ajax POST 提交表单。丑陋的。

我也看过 Backbone.js，但我不想在这个项目中加入另一个工具包，因为我可能缺少一些其他简单的约定。有没有`Rails Way`做这样的事情的标准，或者只是一些更好的方式时期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T17:19:59.540

### 单表向下钻取的可能方法

如果您想从具有大量列的单个表中执行列选择，您可以考虑一些基本方法。

1.  使用客户端 JavaScript 库按需显示/隐藏列。例如，您可以使用[DataTables](http://www.datatables.net/)根据与所选最后一个值（或一组值）相关的内容来动态调整显示哪些列。
2.  您可以在视图中使用表单将相关列名称传递到会话或参数哈希中，并检查这些值以在深入到下一个级别时在视图中呈现哪些列。
3.  您的下一个服务器端请求可能包含感兴趣的列列表，并且您的控制器可以使用这些列名称来构建使用*SELECT*或[#pluck](http://api.rubyonrails.org/classes/ActiveRecord/Calculations.html#method-i-pluck)的自定义查询。此类查询通常涉及受污染的对象，因此请彻底清理输入并小心处理！
4.  如果您的数据库支持视图，用户可以从下一个控制器操作中选择预定义或动态视图，这可能会或可能不会更高性能。这至少是一个值得追求的想法，但是您必须仔细地对此进行基准测试，并确保您最终不会遇到 SQL 注入或需要维护的无法管理的预定义视图数量。

### 一些注意事项

在决定是在客户端还是服务器端处理此类功能时，通常需要在内存和延迟之间进行权衡。通常还值得重新审视拥有一个巨大的非规范化表背后的业务逻辑，并调查是否不能将问题域分解为一组更易于管理的 RESTful 资源。

要考虑的另一件事是，Rails 不会阻止您做违反基本面向资源的 MVC 模式的事情。从您的问题来看，隐含的假设是您没有每个数据资源的规范表示；以这种方式接近 Rails 通常会增加复杂性。如果确实需要这种复杂性来满足您的应用程序的要求，那很好，但我当然建议您仔细评估您的基本设计目标，看看功能权衡和长期维护负担是否值得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T20:17:31.977

我在 Stack Overflow 上发现了与您类似的问题；似乎没有任何人提到的用于跨请求持久化的 API 或样式。你能做的最好的似乎是在类中存储或对你已经在做的事情进行一些迭代：

1）[会话/请求之间的内存持久性](https://stackoverflow.com/questions/3354156/in-ruby-on-rails-how-can-i-persist-objects-in-memory-between-sessions)

2)[以设计方式处理请求持久性](https://stackoverflow.com/questions/2791093/what-data-if-any-persists-across-web-requests-in-ruby-on-rails)

3)[使用类缓存](https://stackoverflow.com/questions/9085566/how-to-persist-ruby-class-variables-across-page-loads-in-rails)

# jquery - 更改 CKEditor 标题的字体并将其反映在下拉菜单中

> ID：14116440
> 
> 赞同：0
> 
> 时间：2013-01-02T03:06:08.527
> 
> 标签：jquery, css, ckeditor

有没有办法可以`h1,h2`在 CKEditor 的编辑器对话框中更改默认标题字体（即 ），以便它们同时出现在文本区域和段落格式下拉菜单中。我一直在浏览 css 文件并将以下代码放入**/skins/moono/editor.css**：

```
.cke_reset_all h1, .cke_reset_all h2 {
    font-size: 25px;
    font-family: Rockwell, Georgia, Helvetica, Tahoma, Arial, 'Times New Roman', serif; 
} 
```

但它没有任何效果。我想知道这是否是我必须在 Javascript 方面做的事情。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T07:08:33.943

您可以使用`!important`CSS 中的属性来强制浏览器使用它，如下所示

```
.cke_reset_all h1, .cke_reset_all h2 {

 font-size: 25px !important;

 font-family: Rockwell, Georgia, Helvetica, Tahoma, Arial, 'Times New Roman', serif !important; 

} 
```

通过将其写为 `!important`. 它将覆盖它以前的所有 css。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T08:25:18.620

将这些规则放在`contents.css`CKEditor 主目录的文件中：

```
h1, h2 {
    font-size: 25px;
    font-family: Rockwell, Georgia, Helvetica, Tahoma, Arial, 'Times New Roman', serif; 
} 
```

这足以在格式下拉列表和编辑器内容中设置标题样式。

# android - 将文本文件中的字符串值读入 textView

> ID：14116446
> 
> 赞同：1
> 
> 时间：2013-01-02T03:06:52.343
> 
> 标签：android

我一直在到处寻找一种允许从文本文件中读取@string 值的方法。我不确定我是否完全清楚，因为我似乎无法用语言来描述它，所以我将使用这个片段。

```
This is a <@string/square_root> 
```

因此，当我将文件读入文本视图时，它包含平方根符号。这可能吗？或者如果有另一种方法可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T03:46:33.530

执行此操作的标准方法是将字符串放在资源文件中，通常是 res/values/strings.xml（请注意，下面的 221A 是平方根符号的 Unicode 值）。

```
<string name="square_root">\u221A</string> 
```

然后，您可以从 XML 布局文件中引用此字符串：

```
<TextView android:text="@string/square_root" ...> 
```

或来自 Java 代码：

```
Context context = this;  // in this example the current activity is the context
String title = context.getString(R.string.square_root);
TextEdit textEdit = ....
textEdit.setText(title); 
```

有关详细信息，请参阅：http: [//developer.android.com/guide/topics/resources/string-resource.html](http://developer.android.com/guide/topics/resources/string-resource.html)

# html - CSS/HTML - 下拉菜单上的文本向右对齐，即使我向左对齐

> ID：14116449
> 
> 赞同：1
> 
> 时间：2013-01-02T03:07:31.133
> 
> 标签：html, css, drop-down-menu, text-alignment

我在下面遇到的问题的图片。我试着用谷歌搜索，但这是一个非常具体的问题，我找不到任何有用的东西。

[图片](http://i.imgur.com/C3s3K.png) （抱歉使用了imgur，堆栈溢出不允许新用户嵌入图片）

CSS：

```
#dropDown3 {position:absolute;
            top:130px;  
            left:860px;
            padding:15px;
            margin:0px;
            text-align:left;
            line-height:170%;
            width:40px;
            height:45px;
            display:none;
            background-color:#006bb2;
            border-radius:1px;
            z-index:2;} 
```

我的其他两个下拉菜单没有这个问题。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T03:12:11.340

问题是你的填充：你有 15px 的填充。因此，由于空间太小，文本出现在右侧多于左侧。

尝试减少填充或将宽度设置得更大一些。

我希望它有帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T03:11:51.840

尝试

```
#dropDown3  li{
 text-align:left;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T03:13:12.930

您的文本左对齐，否则最近的 t 和存档中的 e 将右对齐，但它们不是，正如 Vucko 所说，不要将元素移到左边。

# c++ - Boost asio set_option 错误

> ID：14116454
> 
> 赞同：1
> 
> 时间：2013-01-02T03:08:21.977
> 
> 标签：c++, boost-asio

我尝试在 redhat 中使用参数 0.0.0.0 127.0.0.1 运行以下程序，并且在 socket_.set_option(boost::asio::ip::multicast::join_group(multicast_address ));

它还尝试在窗口中运行它，并且在 vc++ 中运行良好。我快没主意了。请帮帮我。

```
//
// receiver.cpp
// ~~~~~~~~~~~~
//
// Copyright (c) 2003-2008 Christopher M. Kohlhoff (chris at kohlhoff dot com)
//
// Distributed under the Boost Software License, Version 1.0\. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
//

#include <iostream>
#include <string>
#include <boost/asio.hpp>
#include "boost/bind.hpp"

const short multicast_port = 30001;

class receiver
{
public:
  receiver(boost::asio::io_service& io_service,
      const boost::asio::ip::address& listen_address,
      const boost::asio::ip::address& multicast_address)
    : socket_(io_service)
  {
    // Create the socket so that multiple may be bound to the same address.
    boost::asio::ip::udp::endpoint listen_endpoint(
        listen_address, multicast_port);
    socket_.open(listen_endpoint.protocol());
    socket_.set_option(boost::asio::ip::udp::socket::reuse_address(true));
    socket_.bind(listen_endpoint);

    **// Join the multicast group.
    socket_.set_option(
        boost::asio::ip::multicast::join_group(multicast_address)); <-- Error**

    socket_.async_receive_from(
        boost::asio::buffer(data_, max_length), sender_endpoint_,
        boost::bind(&receiver::handle_receive_from, this,
          boost::asio::placeholders::error,
          boost::asio::placeholders::bytes_transferred));
  }

  void handle_receive_from(const boost::system::error_code& error,
      size_t bytes_recvd)
  {
    if (!error)
    {
      std::cout.write(data_, bytes_recvd);
      std::cout << std::endl;

      socket_.async_receive_from(
          boost::asio::buffer(data_, max_length), sender_endpoint_,
          boost::bind(&receiver::handle_receive_from, this,
            boost::asio::placeholders::error,
            boost::asio::placeholders::bytes_transferred));
    }
  }

private:
  boost::asio::ip::udp::socket socket_;
  boost::asio::ip::udp::endpoint sender_endpoint_;
  enum { max_length = 1024 };
  char data_[max_length];
};

int main(int argc, char* argv[])
{
  try
  {
    if (argc != 3)
    {
      std::cerr << "Usage: receiver <listen_address> <multicast_address>\n";
      std::cerr << "  For IPv4, try:\n";
      std::cerr << "    receiver 0.0.0.0 239.255.0.1\n";
      std::cerr << "  For IPv6, try:\n";
      std::cerr << "    receiver 0::0 ff31::8000:1234\n";
      return 1;
    }

    boost::asio::io_service io_service;
    receiver r(io_service,
        boost::asio::ip::address::from_string(argv[1]),
        boost::asio::ip::address::from_string(argv[2]));
    io_service.run();
  }
  catch (std::exception& e)
  {
    std::cerr << "Exception: " << e.what() << "\n";
  }

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T03:19:24.927

从[这个较早的问题](https://stackoverflow.com/q/8675623/478288)中，您需要

```
socket_.set_option(
    boost::asio::ip::multicast::join_group(multicast_address.to_v4())); 
```

也就是说，附加`.to_v4()`在您的`ip::address`变量上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T07:19:55.007

我不应该使用本地IP。它不是多播 ip 格式

# parsing - 试图将不匹配的括号设置为不正确的输入，在 SML 中不起作用

> ID：14116456
> 
> 赞同：1
> 
> 时间：2013-01-02T03:09:25.923
> 
> 标签：parsing, sml, smlnj

我正在用 SML 写一个计算器。

在我的程序中，我使用以下括号：

```
{ }    (* highest priority *) 

[ ]    (* middle priority *) 

( )    (* weakest priority *) 
```

当用户输入一个字符串时，例如：

```
calc "1+(2*3)"   (* that's ok *) 
```

但是那些：

```
 calc "1+[2*3)"   (* Not Ok *) 

 calc "1+(2*3}"   (* Not Ok *) 

 calc "1+{2*3]"   (* Not Ok *) 
```

不是，因为左括号与右括号不匹配。

我试图用 SML 写，但它不起作用。当用户输入带有不平衡括号的表达式时，我想要做的是返回`-1`或显示错误消息

这是代码：

```
signature ScannerForExp = sig
  datatype token = 
                    (* parenthesis *)

                   Lpar3             (* { *)
                 | Rpar3             (* } *)
                 | Lpar2             (* [ *)
                 | Rpar2             (* ] *)  
                 | Lpar              (* ( *)
                 | Rpar              (* ) *)

                    (* operations *)

                 | Multiply          (* * *)
                 | Div               (* / *)
                 | Plus              (* + *)
                 | Minus             (* - *)
                 | Modulo            (* % *)
                 | Power             (* ^ *)                 
                 | Num of int        (* [0-9]+ *)
                 | Undef of string   (* undefined *)
  val scanner : string -> (token list)
end;

    | #"{"::r => if s = "" then (Lpar3,r) else (toToken s,c::l)
    | #"}"::r => if s = "" then (Rpar3,r) else (toToken s,c::l)     
    | #"["::r => if s = "" then (Lpar2,r) else (toToken s,c::l)
    | #"]"::r => if s = "" then (Rpar2,r) else (toToken s,c::l)
    | #"("::r => if s = "" then (Lpar,r) else (toToken s,c::l)
    | #")"::r => if s = "" then (Rpar,r) else (toToken s,c::l) 
```

这是处理这个的函数：

```
 fun E l = E2 l
  and F l
      = case l of 
          (Num n)::l1 => (NumNode n,l1)
        | Lpar::l1 => let val (en,l2) = E l1  in case l2 of Rpar::l3 => (en,l3)

        | Lpar2::l1 => let val (en,l2) = E l1 in case l2 of Rpar2::l3 => (en,l3)

        | Lpar3::l1 => let val (en,l2) = E l1 in case l2 of Rpar3::l3 => (en,l3)

    ...
...
(* more code *) 
```

但是当我尝试添加由`Lpar`with`Lpar2`或 `Lpar`with组成的规则时`Lpar3`：

```
 fun E l = E2 l
  and F l
      = case l of 
          (Num n)::l1 => (NumNode n,l1)
        | Lpar::l1 => let val (en,l2) = E l1  in case l2 of Rpar::l3 => (en,l3)

        | Lpar2::l1 => let val (en,l2) = E l1 in case l2 of Rpar2::l3 => (en,l3)

        | Lpar3::l1 => let val (en,l2) = E l1 in case l2 of Rpar3::l3 => (en,l3)

        (* a ( with a ] *)
        | Lpar::l1 => let val (en,l2) = E l1  in case l2 of Rpar2::l3 => raise exception 
```

我得到：

```
stdIn:5875.9-5903.34 Error: match redundant and nonexhaustive 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T07:33:21.047

您的缩进有点偏离，但看起来您已经拥有的代码应该`ParserForExp`在括号不匹配时引发异常。

使用您的“新”代码，会发生错误，因为您有两种`Lpar::l1`情况，这使得其中一种是多余的。
我相信您需要移动不匹配的括号案例：

```
| Lpar::l1 => let val (en,l2) = E l1  in 
                    case l2 of Rpar::l3 => (en,l3)
                             | Rpar2::l3 => [raise mismatched parentheses]
                             | Rpar3::l3 => [raise mismatched parentheses]
                             | _ => raise ParserForExp 
                    end 
```

# performance - 带有内置 Web 服务器的 Ubuntu 上的 FastRWeb 性能

> ID：14116457
> 
> 赞同：2
> 
> 时间：2013-01-02T03:09:53.330
> 
> 标签：performance, web-services, r

我在 Ubuntu 10.04 机器上运行的 R 2.15.2（不给糖就捣蛋）的安装上安装了 FastRWeb 1.1-0。我希望使用生成的系统来运行 Web 服务。

我通过在 rserve.conf 中将 http.port 设置为 8181 并取消设置套接字目标来配置系统。我已将 .http.request 分配给 FastRWeb::.http.request。我使用 HTTP POST 在客户端和服务器之间交换 JSON blob（第二个 blob 的大小可能超过 150KB，并且不适合 HTTP GET 查询字符串。）

一切都是端到端的——我有一个小的客户端 R 脚本，它可以跨通道生成 JSON RPC 调用。我看到调用了 run 函数，并看到它返回。

但是，我遇到了一个重大的性能问题：从 run() 返回（包括对 done() 的调用）到 R 客户端获取返回值的时间，返回路径花费了超过 12 秒的时间。RCurl 似乎不是罪魁祸首；似乎有些东西需要 12 秒才能返回。

有人对在哪里看有什么建议吗？我可以轻松地转而使用 Apache 2.0 和 CGI​​，但老实说，我宁愿让一切都以 R 为中心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T12:56:37.970

回答我自己的问题。

我用 Rprof()/Rprof(NULL) 对包装了 .http.request，并查看了每个例程花费的时间。事实证明，系统在 .run 的标准实现中在 URLDecode 中花费了大约 11 秒。这看起来像是核心中 URLDecode 中的缩放问题。

# jquery - 如何扩大/减少表格单元格的高度？

> ID：14116465
> 
> 赞同：1
> 
> 时间：2013-01-02T03:12:02.103
> 
> 标签：jquery, html, css

有一个 Jsfiddle，我有一个填充表格单元格的文本区域。但是我需要帮助的是有人可以在小提琴中创建一个函数，用户可以在其中扩展或减小表格单元格的大小。如果表格单元格高度增加或减少，我想测试我的 css 以查看 textarea 是否可以填充 textarea？

这是小提琴：http: [//jsfiddle.net/BpWes/1/](http://jsfiddle.net/BpWes/1/)

下面是小提琴的代码：

HTML：

```
 <table id="tbl">
        <tr>
        <th>Question</th>
        </tr>
        <tr>
        <td class="question">
         <textarea class="textAreaQuestion" id="mainTextarea"  name="questionText"></textarea>
            </td>
        </tr>
        </table> 
```

查询：

```
$('textarea').css('background','#EAEAEA'); 
```

CSS：

```
td{ vertical-align:top}

#tbl{
border:1;
height:250px;    
}

.question{     
    border:1px black solid;
    padding: 0;
    height:100%
}

.textAreaQuestion{
    width:100%;

    height:100%;
    border:0;
    padding:0;
    font-size:100%;  

    margin:0;

} 
```

**更新：**

HTML：

```
 <table id="tbl">
        <tr>
        <th>Question</th>
        </tr>
        <tr>
            <td class="question">
<div class="divheight">
    <textarea class="textAreaQuestion" id="mainTextarea"  name="questionText"></textarea>
                </div>
            </td>
        </tr>
        </table> 
```

CSS：

```
.question{     

        border:1px black solid;
        padding: 0;
    }

    .divheight{
    height:100%
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T03:26:36.750

请检查这个[小提琴](http://jsfiddle.net/arunpjohny/BpWes/36/)，它是否解决了你的问题。

```
var cell = $('td.question');

$('.increase').click(function(){
    cell.height(cell.height()+20);
});
$('.decrease').click(function(){
    cell.height(cell.height()-20);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T03:23:23.407

这是一个例子，我认为它可以帮助你

[http://jsfiddle.net/BpWes/37/](http://jsfiddle.net/BpWes/37/)

点击按钮，当我们改变高度和宽度时，您可以看到文本区域填充表格单元格。

html

```
 <table id="tbl">
        <tr>
        <th>Question</th>
        </tr>
        <tr>
        <td class="question">
         <textarea class="textAreaQuestion" id="mainTextarea"  name="questionText"></textarea>
            </td>
        </tr>
        </table>
<input type ="button" value="expand" id ="expand"/> 
```

jQuery

```
 $('textarea').css('background','#EAEAEA');

$("#expand").click(function(){    
$(".question").height(500);
$(".question").width(500);
 }); 
```

# css - IE 中的 RTL 问题影响整个页面

> ID：14116468
> 
> 赞同：1
> 
> 时间：2013-01-02T03:12:59.207
> 
> 标签：css, internet-explorer, right-to-left

我正在用希伯来语开发一个网站，在 Chrome 和 Firefox 中一切都很好（正如预期的那样），但我的 IE 有问题。当我放置

```
direction:RTL;
unicode-bidi:embed; 
```

整个页面向右移动，并出现一个水平滚动条。

在页面的初始加载时，IE 加载它滚动到右侧，所以看起来不错（不需要手动滚动），但水平滚动条在那里。

所有其他元素都正确放置，我找不到问题。没有元素会溢出主包装器之外，并且只有`direction:RTL`放置滚动条时才会出现滚动条。

我可以注意到滚动条出现在加载结束附近，但我不知道是否有某种方法可以逐步加载页面（例如断点/调试/步骤）。

我在 3 台不同的计算机（IE8/XP、IE8/Win7、IE9/Win7 以及[http://netrenderer.com](http://netrenderer.com)）上对其进行了测试

一些帮助/指导将不胜感激。

您可以在以下位置查看：

[http://southbeachsmoke.co.il/](http://southbeachsmoke.co.il/)

[http://southbeachsmoke.co.il/products/category/1](http://southbeachsmoke.co.il/products/category/1)

# java - 使用 eclipse 减少应用程序安装大小的提示？

> ID：14116470
> 
> 赞同：0
> 
> 时间：2013-01-02T03:13:03.187
> 
> 标签：java, android

我刚刚构建了我的第一个 android 应用程序。一个科学计算器。安装后，我想检查它的大小并将其与类似的应用程序进行比较。我的应用程序是 650kb，目前在 Play 商店中最受欢迎的是 500kb，默认的是 4kb。

我的应用程序只有一个活动，其中一个类和布局在编译之前总共有 20kb。那么我的应用程序怎么能比最受欢迎的应用程序多占用 100kb 呢？我只是好奇，我想有些文件是自动生成的，可以删除以节省空间（比如我在 /res 中找到的一些图像），但不能随机删除文件。

我该怎么做才能使应用程序更轻巧？如何检查哪些文件未使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T03:50:12.777

您可以尝试删除未使用的图像并使用图像优化工具来减小 png 的大小（例如 ImageOptim）。通常用户不关心应用程序的大小，如果需要，您也可以提供 sdcard 选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T04:18:07.937

正如 GobyGoby 所说，删除未使用的图像并压缩使用的图像肯定会降低您的应用程序的大小。您还可以通过[ProGuard 之](http://proguard.sourceforge.net/)类的工具运行您的应用程序。我自己没有使用过它，但它似乎是最流行的工具。

# jquery - 标记输入类型文件中的错误 jquery addrow

> ID：14116471
> 
> 赞同：1
> 
> 时间：2013-01-02T03:13:04.920
> 
> 标签：jquery, file, row, add

我有这个脚本

```
<script src="/js/jquery.table.addrow.js">

<table border="0"> 
<tr> 
 <td><input type="file" name="image[]" value=""/></td>  
 <td><a class="delRow" href="javascript:void(0)">delete</a></td> 
</tr> 
<tr> 
 <td colspan="2">
 <a class="addRow" href="javascript:void(0)" id="1">add</a>  
 </td> 
</tr> 
</table> 

$(document).ready(function(){    
$(".addRow").btnAddRow();   
$(".delRow").btnDelRow(); }); 
```

这可行，但是如果我使用firefox进行添加行并且第一个文件输入标记类型选择了一个文件，则新文件类型携带的文件输入标记。当我想要一个新的输入标签为空时。

如果我使用 crome，则不会发生这种情况。

我该如何解决这个问题..有什么可以帮助的:)

[小提琴](http://jsfiddle.net/arunpjohny/kfqTP/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T03:37:51.950

不确定它是否正确，但您可以使用回调函数，在添加新行后调用该函数，并将输入的值设置为空白，例如：

```
$(".addRow").btnAddRow(function(obj){
    $(obj).find("input[type='file']").val(''); //get input and sent it empty
});   
$(".delRow").btnDelRow(); 
```

演示：[jsFiddle](http://jsfiddle.net/kfqTP/9/)

# sql-server - 在 SQL Server 中，如何为两种特定情况选择 NULL（包括查询）

> ID：14116473
> 
> 赞同：0
> 
> 时间：2013-01-02T03:13:27.800
> 
> 标签：sql-server, sql-server-2008, reporting-services, ssrs-2008

我有这个查询：

```
SELECT crr.Codes
FROM Client_Response_Ranges_for_SSRS_Respondent_Answer crr
WHERE crr.Name =  @ReportParameter1 
```

但我想说 - 如果`@ReportParameter1`（这是我在 SSRS 报告中使用的参数）是`All`or `Prescreens`，则覆盖它通常返回的内容（the `nvarchar` `NULL`）并返回一个真正的 null （即不返回任何内容？） ..

我试过这样的事情：

```
SELECT     
   CASE 
      WHEN @ReportParameter1 = 'All' THEN 'NULL'
      WHEN @ReportParameter1 = 'Prescreens' THEN NULL
      ELSE crr.Codes 
   END 
```

但它不起作用，并给我一个错误，上面写着：

> *本地报告处理过程中发生错误。
> 报告处理过程中发生错误。
> 数据集“DataSet2”的查询执行失败。
> 已声明变量名称“@ReportParameter1”。变量名称在查询批处理或存储过程中必须是唯一的。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T03:42:30.117

我在 null 之前删除了一个单引号，并为选择列提供了一个别名。试试下面：

```
SELECT     CASE when @ReportParameter1 = 'All' then null 
                when @ReportParameter1 = 'Prescreens' then null
                else crr.Codes end as codes
FROM         Client_Response_Ranges_for_SSRS_Respondent_Answer crr
where crr.Name =  @ReportParameter1 
```

# android - Android 中的 Google Analytics - 过滤掉测试设备

> ID：14116475
> 
> 赞同：4
> 
> 时间：2013-01-02T03:13:54.617
> 
> 标签：android, google-analytics, google-analytics-api

有没有办法让我的测试设备在我打开我的 Android 应用程序时不会报告我的谷歌分析？我知道使用 AdMob，您可以添加测试设备，这些设备会加载虚拟广告。Android 上的分析有类似的东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-10T09:22:09.943

我知道它已经回答了，但恕我直言，这个答案是不正确的。

根据：[https](https://developers.google.com/analytics/devguides/collection/android/v2/advanced#opt-out) ://developers.google.com/analytics/devguides/collection/android/v2/advanced#opt-out将客户端置于演示模式不会阻止它发送数据，它只会将调试信息添加到 LogCat . 相反，您可以使用同一链接中解释的 setAppOptOut()。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T18:37:08.167

您可以将分析客户端置于“调试”模式，这样它就不会发送任何数据。（如果您使用的是 v2：请参阅[官方文档](https://developers.google.com/analytics/devguides/collection/android/v2/advanced#opt-out)，如果您使用的是 v1：请参阅[本概述](http://bitiotic.com/blog/2012/05/20/mapping-google-analytics-to-an-android-game-with-libgdx/)的“测试”部分）。

或者，在服务器端，您可以让 GA 根据域或 IP 过滤掉客户端。请参阅[http://support.google.com/analytics/bin/answer.py?hl=en&answer=1033162](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1033162)

# asp.net - ASP.net WebForms 无扩展 URL

> ID：14116477
> 
> 赞同：3
> 
> 时间：2013-01-02T03:14:02.080
> 
> 标签：asp.net, url-rewriting, routing, url-routing

据我了解，在 ASP.net 4.0 中，URL 路由已被合并到 Web 窗体中。我能做这样的事情真是太好了：

```
void Application_Start(object sender, EventArgs e) 
{
    RegisterRoutes(RouteTable.Routes);
}
void RegisterRoutes(RouteCollection routes)
{
    routes.MapPageRoute("Category", "list/{id}/{name}", "~/category.aspx");
    routes.MapPageRoute("Product", "item/{id}/{name}", "~/product.aspx");
} 
```

但是，我是否有一种内置方法可以将无扩展名的 url 路由到他们的 .aspx 对应项，而无需为每个文件手动添加路由？例如：

```
account/login => account/login.aspx
contact-us => contact-us.aspx 
```

谢谢

* * *

我在路线的末尾添加了以下内容作为包罗万象的规则，它似乎正在工作。

```
routes.MapPageRoute("Default", "{*file}", "~/{file}.aspx"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T03:18:03.950

您可以使用 MVC 中的占位符

**VB.NET**

```
 routes.MapPageRoute(
        "ThreeLevels",
        "{folder}/{file}/{id}",
        "~/{folder}/{file}.aspx", True,
        New RouteValueDictionary From {
            {"folder", "Home"},
            {"file", "Default"},
            {"id", Nothing}
        }) 
```

**C＃**

```
 routes.MapPageRoute(
        "ThreeLevels",
        "{folder}/{file}/{id}",
        "~/{folder}/{file}.aspx", true,
        new RouteValueDictionary {
            {"folder", "Home"},
            {"file", "Default"},
            {"id", null}
        }); 
```

# html - css下拉菜单折叠

> ID：14116484
> 
> 赞同：0
> 
> 时间：2013-01-02T03:15:18.027
> 
> 标签：html, css, drop-down-menu, css-float, collapse

[http://i.imgur.com/cA2xV.png](http://i.imgur.com/cA2xV.png)

我的下拉菜单位于下一个 div 元素下，有关如何解决此问题的任何想法？

CSS：

```
 .cf ul li{
float:left;
margin: 0;
padding: 0;
list-style:none;
font-family:"open sans", sans-serif;

}

.cf li a {
display:block;
padding:0 1em;
line-height: 2.5em;
color:#FFFFFF;
}

.cf li a:hover {
background-color:#ffa627;
}

li{
position:relative;
}
ul.submenu {
float:none;
background: #222;
position:absolute;
left:-9000em;
}

.topmenu li:hover ul{
left:0;
}   

ul.submenu li {
float:none;
}

#nav-bar nav {
background-color: #222;

}

.cf:before,
.cf:after {
content: " "; /* 1 */
display: table; /* 2 */
}

.cf:after {
clear: both;
}

/**
 * For IE 6/7 only
 * Include this rule to trigger hasLayout and contain floats.
 */
.cf {
    *zoom: 1;

.callout1 {
background-color: #fff; 
text-align: center; 
padding: 20px 0px;
width:319px;
text-decoration:none;
font-family: 'Open Sans', sans-serif;
color:#222;
border-right: 1px solid #EFEFEF; 
float:left;

} 
```

HTML：

```
<div id="nav-bar" class="cf">
                <nav class="cf">
                    <ul class="topmenu">
                        <li class="hometop"><a href="#" class="hometop">Home</a></li>
                        <li ><a href="#" >Catagory</a>
                            <ul class="submenu">
                                <li><a href="#">Blah Blah</a></li>
                                <li><a href="#">Blah UGG</a></li>
                            </ul>
                        </li>
                        <li ><a href="#">About</a></li>
                        <li ><a href="#">How To Order</a></li>
                    </ul>
                </nav>

            </div>
<div id="extra-info">
                <nav>
                    <ul>
                        <li><a href="#" class="callout1">Do You Have Any Questions? <br>Contact Us</a></li> 
```

第一次做一个网站，把我的头发拉出来，现在整天都在想这个，请你们中的一个快速开发向导帮助我！

已编辑：已粘贴“您有任何问题与我们联系”div html 及其 css。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T03:24:12.083

尝试这样的事情。我希望这个 CSS 类应该可以工作

```
.cf{
   position:relative; 
   z-index:9999;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T03:26:16.743

您可以通过将更大的 z-index 放到下拉菜单中来做到这一点

具有较大堆栈顺序的元素始终位于具有较低堆栈顺序的元素之前。

喜欢

```
div{
  z-index:5;
}

.dropdown{
   z-index:6;
}

Note: z-index only works on positioned elements 
```

(`position:relative , position:absolute, or position:fixed).`

# mysql - 主从配置

> ID：14116488
> 
> 赞同：-1
> 
> 时间：2013-01-02T03:17:05.553
> 
> 标签：mysql, linux

我需要为 mysql 设置一个主从设置。

1 个 Master 和 1 个 Slave（复制）。

现在这里的主要问题是：当主人失败时，是否可以将奴隶提升为主人。那么当老主人起来时，它现在将成为奴隶。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T03:27:31.607

您的问题的答案是“是”，这里有[一些必须遵循的说明](http://blog.lavabeans.com/post/84449034/mysql-rollover-from-master-to-slave)。本质上，假设 Andrew 是当前的奴隶，而 Abe 是当前的主人。要交换两者：

检查 Andrew 以确保 sql 线程已尽可能完成处理。在 mysql 提示符下，运行`SHOW PROCESSLIST`. （您也可以通过使用 MySQL Administrator 查看当前连接来执行此操作。） IO 线程和 sql 线程都应作为 system_users 列出。IO 线程应该具有“在读取主事件失败后重新连接”的状态。如果sql线程完全赶上，它的状态应该是“已读取所有中继日志；等待从 I/O 线程更新它”。如果这说明了其他内容（例如处理中继日志），那么从站仍在赶上，您需要让它运行直到赶上。

进行此检查的另一种方法是运行命令`SHOW SLAVE STATUS \G`，并查看中继日志和位置。然后您可以验证这确实是最新的中继日志，并使用 mysqlbinlog 实用程序验证该位置是否是最新的。请注意，您不能在从站状态输出中使用 SECONDS_BEHIND_MASTER 变量 - 如果从站无法连接到主站，它将为空。

一旦安德鲁被赶上，重置它。在 MySQL 提示符下，运行 RESET SLAVE;。这将删除 master.info 文件，并将安德鲁从束缚中解救出来。

接下来，将所有二进制日志移动到一个临时目录。二进制日志看起来像 andrew-bin.000001，其中 andrew 是主机名。此步骤并非绝对必要，但我不喜欢删除日志文件。

现在重置 Andrew 的二进制日志。这将删除所有二进制日志，这就是我们在上一步中备份它们的原因。当我们把安倍带回来时，这也将使安倍很容易成为安德鲁的奴隶。为此，请运行 RESET MASTER；在安德鲁。

在 Andrew 上编辑 my.cnf，注释掉 read_only 系统变量（如果您设置了它）。

在 Andrew 上重启 mysql：`/etc/init.d/mysql restart`

将 masterdb.janitors.com cname 更改为指向 Andrew，而不是 Abe。此步骤要求您的应用程序指向之前的 setupmasterdb.janitors.com，而不是像 andrew.janitors.com 这样的东西。

Web 应用程序现在应该成功连接到作为主数据库的 Andrew。

一旦安倍康复，我们就可以把他当作安德鲁的奴隶抚养。第一步是编辑 Abe 上的 my.cnf，并取消注释 read_only 系统变量。

在 Abe 上启动 mysql（与上面相同的命令）。请注意，这意味着不应将 mysql 设置为在机器启动时自动启动。这是一项额外的安全措施。我不知道 mysql 是否会尝试任何类型的错误恢复，例如完成由于崩溃而无法完成的事务 - 但我们不希望它做任何会使其与 Andrew 有任何不同的事情（它可能已经略有不同，但我们对此无能为力）。因此，通过在启动之前将其设置为只读，我们确保对 db 的唯一更新是来自新主节点的更新。

让安倍成为安德鲁的奴隶。在安倍身上，跑

`CHANGE MASTER TO MASTER_USER='replicator', MASTER_PASSWORD='password', MASTER_HOST='andrew.janitors.com', MASTER_LOG_FILE='andrew-bin.0000001', MASTER_LOG_POS=4;`

我们知道日志文件中的确切位置，因为我们在步骤 4 中将其重置。此外，我们将 master_host 设置为 andrew.janitors.com 而不是 masterdb.janitors.com 因为我们不一定希望任何故障转移到单独的主服务器（因为不同的master会有不同的二进制日志）。

# javascript - 我想自动点击

> ID：14116497
> 
> 赞同：-3
> 
> 时间：2013-01-02T03:18:11.417
> 
> 标签：javascript

我想自动点击网站上的这个链接。

```
<a href="/wall/withdraw.php?processor=ppp">Withdraw</a> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T03:20:28.863

你可以开火它的`click()`方法。

```
<a href="/wallet/withdraw.php?processor=ppp" id="foo">Withdraw</a>

document.getElementById("foo").click(); 
```

你需要一些方法来选择元素，我给了它一个 ID 并使用`getElementById()`

# python - Python多处理池 - 迭代对象方法？

> ID：14116502
> 
> 赞同：7
> 
> 时间：2013-01-02T03:19:12.013
> 
> 标签：python, multiprocessing

也许更熟悉 Python 的多处理池代码的人可以帮助我。我正在尝试通过套接字连接同时连接到我网络上的多个主机（任何时候 N 个）并执行一些 RPC。当一个主机完成时，我想将下一个主机添加到池中以运行，直到所有主机完成。

我有一个类 HClass，它有一些方法可以做到这一点，并且 hostlist 中包含一个主机名列表。但是我无法了解 Pool 的任何 docs.python.org 示例来使其正常工作。

一小段代码来说明我到目前为止所得到的：

```
hostlist = [h1, h2, h3, h4, ....]
poolsize = 2

class HClass:
  def __init__(self, hostname="default"):
    self.hostname = hostname

  def go(self):
      # do stuff
      # do more stuff
  ....

if __name__ == "__main__":
  objs = [HClass(hostname=current_host) for current_host in hostlist]
  pool = multiprocessing.pool(poolsize)
  results = pool.apply_async(objs.go()) 
```

到目前为止，我很幸运有这个回溯：

```
Exception in thread Thread-2:
Traceback (most recent call last):
  File "/usr/lib/python2.7/threading.py", line 551, in __bootstrap_inner
    self.run()
  File "/usr/lib/python2.7/threading.py", line 504, in run
    self.__target(*self.__args, **self.__kwargs)
  File "/usr/lib/python2.7/multiprocessing/pool.py", line 319, in _handle_tasks
    put(task)
PicklingError: Can't pickle <type 'generator'>: attribute lookup __builtin__.generator failed 
```

进程一直挂起，直到我用 Control-C 退出它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T04:34:54.450

我会尽量减少进程间通信。看起来您真正需要发送的只是主机名字符串：

```
for host in hostlist:
    pool.apply_async(worker, args = (host,), callback = on_return) 
```

例如，

```
import multiprocessing as mp
import time
import logging

logger = mp.log_to_stderr(logging.INFO)

hostlist = ['h1', 'h2', 'h3', 'h4']*3
poolsize = 2

class HClass:
    def __init__(self, hostname="default"):
        self.hostname = hostname

    def go(self):
        logger.info('processing {h}'.format(h = self.hostname))
        time.sleep(1)
        return self.hostname

def worker(host):
    h = HClass(hostname = host)
    return h.go()

result = []
def on_return(retval):
    result.append(retval)

if __name__ == "__main__":
    pool = mp.Pool(poolsize)
    for host in hostlist:
        pool.apply_async(worker, args = (host,), callback = on_return)
    pool.close()
    pool.join()
    logger.info(result) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-25T01:23:19.993

我同意@unutbu 的解决方案……越简单越好。但是，如果您确实必须发送类方法`go`，我会使用`pathos.multiprocesssing`, 而不是`multiprocessing`.

```
>>> from pathos.multiprocessing import ProcessingPool as Pool
>>> p = Pool(4)
>>> class Test(object):
...   def plus(self, x, y): 
...     return x+y
... 
>>> t = Test()
>>> p.map(t.plus, x, y)
[4, 6, 8, 10] 
```

在此处获取代码： [https ://github.com/uqfoundation/pathos](https://github.com/uqfoundation/pathos)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T03:34:54.933

我认为这与[使用 python 的多处理 Pool.map() 时 Can't pickle <type 'instancemethod'> 的问题相同](https://stackoverflow.com/questions/1816958/cant-pickle-type-instancemethod-when-using-pythons-multiprocessing-pool-ma)

*从上面链接中的答案复制。*问题是多处理必须腌制事物以将它们吊在进程之间，并且绑定的方法是不可腌制的。

一种方法是让 go 函数不受限制，比如把它放在课堂之外。[或者使用copy_reg](http://docs.python.org/2/library/copy_reg.html?highlight=copyreg)使该函数可打包

# c# - XNA 中的 Rpg 风格运动

> ID：14116507
> 
> 赞同：1
> 
> 时间：2013-01-02T03:20:23.607
> 
> 标签：c#, xna

我正在尝试在 XNA 中制作 RPG 游戏，但我遇到了移动问题。我想创建类似于 RPG maker 中的运动，您可以在其中顺利地从一个瓷砖走到另一个瓷砖，并在您停止行走时捕捉到一个瓷砖的中间。我该怎么做呢？我有这个，但它会立即从一个正方形移动到另一个正方形，中间没有任何东西。

```
 if (aCurrentKeyboardState.IsKeyDown(Keys.Right) == true && mPreviousKeyboardState != aCurrentKeyboardState)
            {
                Position.X += 30;
            }
            else if (aCurrentKeyboardState.IsKeyDown(Keys.Left) == true && mPreviousKeyboardState != aCurrentKeyboardState)
            {
                Position.X -= 30;
            }
            else if (aCurrentKeyboardState.IsKeyDown(Keys.Up) == true && mPreviousKeyboardState != aCurrentKeyboardState)
            {
                Position.Y -= 30;
            }
            else if (aCurrentKeyboardState.IsKeyDown(Keys.Down) == true && mPreviousKeyboardState != aCurrentKeyboardState)
            {
                Position.Y += 30;
            } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-02T10:05:01.473

你需要比现在更多的地方。

首先，正如您已经意识到的那样，直接设置位置是即时的。解决方案？

## 速度

而不是直接设置`Position`，设置一个`velocity`：

```
Vector2 velocity = Vector2.Zero; 
```

还要定义某种移动速度：

```
const float speed = 10.0f; 
```

`velocity`改为在您的按键中修改：

```
if (aCurrentKeyboardState.IsKeyDown(Keys.Right) == true && mPreviousKeyboardState != aCurrentKeyboardState)
{
    velocity.X = new Vector2(speed, 0.0f);
}
else if (aCurrentKeyboardState.IsKeyDown(Keys.Left) == true && mPreviousKeyboardState != aCurrentKeyboardState)
{
    velocity.X = new Vector2(-speed, 0.0f);
}
else if (aCurrentKeyboardState.IsKeyDown(Keys.Up) == true && mPreviousKeyboardState != aCurrentKeyboardState)
{
    velocity.Y = new Vector2(0.0f, -speed);
}
else if (aCurrentKeyboardState.IsKeyDown(Keys.Down) == true && mPreviousKeyboardState != aCurrentKeyboardState)
{
    velocity.Y = new Vector2(0.0f, speed);
} 
```

现在，每一帧，只需更新`Position`以使速度在其上积极工作：

```
//assuming you're using GameTime gameTime for the timing values
Position += velocity * (float)gameTime.ElapsedGameTime.TotalSeconds; 
```

（如果你使用固定的游戏时间，你并不需要乘以经过的时间，但我通常把它放在那里，因为我更喜欢以每秒为单位进行测量。）

## 瓷砖运动

这是与“平滑”运动完全不同的问题。现在你已经有了基本的速度，你现在需要的就是在移动一个完整的瓷砖后停止。有很多方法可以解决这个问题，但我将在这里勾勒出一个简单的方法。

保留一个“距离”变量来表示角色在他的运动中走了多远，与方向/轴无关：

`float distance = 0.0f;`

随着您的`Position`更改增加它，并在之后立即进行“旅行足够远”测试：

```
//assuming you're using GameTime gameTime for the timing values
Position += velocity * (float)gameTime.ElapsedGameTime.TotalSeconds;

//increment total distance indepedent of direction/axis
distance += Math.Abs(velocity.X) + Math.Abs(velocity.Y);

//test if we've travelled far enough
if (distance >= tileSize)
{
    //reset distance
    distance = 0.0f;

    //stop
    velocity = Vector2.Zero;

    //TODO: SNAP TO TILE
} 
```

这将是一个好的开始，但您仍然需要做两件事：

1.  完成移动后捕捉到最近的图块（您刚刚前往的图块）。如果你不这样做，角色将开始缓慢地从瓷砖网格中“脱离”。为此，我建议获取角色的**中心坐标**（坐标 + 平铺大小 / 2）并将它们转换为**平铺坐标**，然后将其转换回“真实”坐标浮动。也有许多其他方法。

2.  确保在运动时禁用按键。如果你不这样做，角色可以通过中断运动中途自由地“离开”平铺网格。你可以保留一个布尔值`inMotion`，或者更简洁地说，测试是否`velocity`不是`Vector2.Zero`（然后你知道你在运动）。

如果您希望在中途中断运动并仍保持与网格同步，它会变得更先进一些，但这应该会给您一个良好的开端。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T04:08:05.977

撇开关于适当性的问题：

您在每次按键时将单位添加到位置。在印刷机上移动的正确数量将取决于您的主循环的速度：在这里，您在每次游戏更新时移动 30 个单位，这可能很多或很少（如果没有更多上下文很难判断）。

为了便于讨论，假设您的图块跨度为 100 个单位，我们将移动速度保持为每刻 30 个单位（完全由数字组成 - 仅用于说明）。所以一个关键保持会给你这样的东西：

```
turn  |0| 1| 2| 3|  4|  5|  6|  7|
units |0|30|60|90|120|150|180|210|
square|0| 0| 1| 1|  1|  2|  2|  2| 
```

当您按下键时，您只需在绝对位置（60、90 等）绘制角色。当关键出现时，它变成（为了清楚起见，用长格式）：

```
float total_squares_moved = position / square_size;
int rounded_up = ((int) (total_square_size + .5f));
position = (rounded_up + .5f) * square_size; 
```

它将捕捉到您所在的最后一个图块。您可以通过将“rounded_up”行中的 .5f 更改为较低的数字（朝向最后一次）或较高的数字（朝向下一次）来向前或向后偏移。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T16:46:10.083

编辑：斯科特解决方案非常相似，但我个人更喜欢在源和目标之间制作动画，而不是每帧增加位置。所以这是我的版本：

您只需要在角色位于图块（中间）而不是移动时检查键。然后，当检测到一个键时，您开始从 tile1 到 tile2 的移动动画，并等待动画完成以再次接受输入。

私人变量：

```
float m_animPercent = 1;
float m_animSpeed = 1.0f / .5f; // half a second to perform the movement. might want to try faster, like .25f (250 ms)
Vector2 m_from;
Vector2 m_to; 
```

更新：

```
if (m_animPercent == 1)
{
    // Can check for inputs
    if (aCurrentKeyboardState.IsKeyDown(Keys.Right)) // Check for pressed only, so the player can hold the key down.
    {
        m_from = Position;
        m_to = Position + new Vector2(30, 0); // Set the destination tile position
        m_animPercent = 0;
    }
    [... do other movement checks... ]
}
else
{
    // Animate to the new position
    m_animPercent += m_animSpeed * ElapsedTime;
    if (m_animPercent >= 1) m_animPercent = 1;
    Position = m_from + (m_to - m_from) * m_animPercent;
} 
```

# html - 使用 Web Audio API 在 Chrome 上无缝循环

> ID：14116509
> 
> 赞同：2
> 
> 时间：2013-01-02T03:20:28.180
> 
> 标签：html, audio, web-audio-api

我无法使用 Web Audio API 在 Chrome 中进行无缝循环。延迟很小（< 100 毫秒）但非常明显。我测试过的文件是m4a和wav。它们在 Safari 6 中无缝循环，但在 Chrome 23 中却没有。我在这里使用示例代码：http: [//www.w3.org/2011/audio/wiki/Basic-Examples#Looping_Sounds_Without_Gaps](http://www.w3.org/2011/audio/wiki/Basic-Examples#Looping_Sounds_Without_Gaps)

# apache - 如何从变量中提取子字符串？

> ID：14116512
> 
> 赞同：1
> 
> 时间：2013-01-02T03:20:53.950
> 
> 标签：apache, variables, substring, server-side-includes

我想将三位数的 HTTP 错误代码回显为三个单独的数字。我尝试了两种方法，但都失败了：

**方法一**

```
<!--#echo var="{$REDIRECT_STATUS,0,1}" --><br>
<!--#echo var="{$REDIRECT_STATUS,1,1}" --><br>
<!--#echo var="{$REDIRECT_STATUS,2,1}" --> 
```

输出：

(无)
(无)
(无)

**方法二**

```
<!--#if expr="$REDIRECT_STATUS = /^([0-9]{1})([0-9]{1})([0-9]{1})$/" -->
<!--#echo var="$1" --><br>
<!--#echo var="$2" --><br>
<!--#echo var="$3" --> 
```

输出：

（无）
404
（无）

**我想要的是：**

4
0
4

任何帮助表示赞赏。谢谢。

# android - 创建sqlite数据库并为sqlite进行操作时如何在android的listview中使用上下文菜单？

> ID：14116522
> 
> 赞同：1
> 
> 时间：2013-01-02T03:21:48.317
> 
> 标签：android, sqlite, contextmenu

我在列表视图上创建了数据库和 Y 显示记录，如果我长按列表视图记录，则上下文菜单打开。在上下文菜单中，有两个操作，一是显示操作，二是删除操作。如果我选择显示，则在下一个活动中显示完整记录。

**ListActivity.java**

```
public class ListActivity extends Activity {
    ListView lv;
    ArrayList<String> items = new ArrayList<String>();
    ArrayList<String> items_id = new ArrayList<String>();
    dbhelper dh;
    SQLiteDatabase db;
    int index_id;
    Button btn;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_list);
        Button btn;
        btn = (Button)findViewById(R.id.newProjectlist);
        btn.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

                    Intent intent= new Intent(ListActivity.this,NewProject.class);
                startActivity(intent);
            }
        });  
        lv = (ListView)findViewById(R.id.projectListView);
        setUpList();
        dh = new dbhelper(this);
        Cursor c = getAllData();
        showAllData(c);  
        registerForContextMenu(lv);      
    }

  @Override
    public void onCreateContextMenu(ContextMenu menu, View v,
            ContextMenuInfo menuInfo) {
        // TODO Auto-generated method stub
        super.onCreateContextMenu(menu, v, menuInfo);

        if(v.getId() == R.id.projectList){
            menu.setHeaderIcon(R.drawable.ic_launcher);
            menu.setHeaderTitle("Record List");
            menu.add(0,1,menu.NONE,"Delete Record");
            menu.add(0,2,menu.NONE,"Show Record");
        }
    }

    @Override
public boolean onContextItemSelected(MenuItem item) {
    // TODO Auto-generated method stub
        int itemId = item.getItemId();
        if(itemId == 1)
        {
            AdapterView.AdapterContextMenuInfo menuinfo;
            menuinfo = (AdapterContextMenuInfo) item.getMenuInfo();
            index_id = menuinfo.position;
            deleteUserData(index_id);
        }
        if(itemId == 2){
            AdapterView.AdapterContextMenuInfo menuinfo;
            menuinfo = (AdapterContextMenuInfo) item.getMenuInfo();
            index_id = menuinfo.position;
            editUserData(index_id);
        }
    return super.onContextItemSelected(item);
}

    private void editUserData(int indexid) {
        // TODO Auto-generated method stub
        String user_id = items_id.get(indexid);
        Intent intEdit = new Intent(ListActivity.this, MainActivity.class);
        intEdit.putExtra("EditID", user_id);
        startActivityForResult(intEdit, 1);
    }

    private void deleteUserData(int indexid) {
        // TODO Auto-generated method stub
        String user_id = items_id.get(indexid);
        //Toast.makeText(getApplicationContext(), "id " + user_id, 1).show();
        db = dh.getWritableDatabase();
        db.delete("timer","_ID" + "=" + user_id, null);
        finish();
//      Toast.makeText(getApplicationContext(), "Record deleted successfully", 1).show();
    }

    private void showAllData(Cursor c) {
        // TODO Auto-generated method stub
        while(c.moveToNext())
        {
            int id = c.getInt(0);
            String name = c.getString(1);
            String timerpoint1 = c.getString(2);
            String timerpoint2 = c.getString(3);
            String timerpoint3 = c.getString(4);
            String servicetime1 = c.getString(5);
            String servicetime2 = c.getString(6);
            items.add("" + name);
            items_id.add(""+id);
        }
        setUpList();
    }

    private Cursor getAllData() {
        // TODO Auto-generated method stub
        db = dh.getReadableDatabase();
        //String sortorder = dh.Name + "DESC";
    //  String query ="SELECT DISTINCT name FROM timer";
    //  Cursor c = db.rawQuery(query, null);
    //   if (c != null) {
    //            c.moveToFirst();
    //        }
        String[] cols = new String[] {dh.Name, "name"};
        Cursor c = db.query(true, "timer",null,null,null,null,"ASC",null, null);   
        //Cursor cur = db.query(Distinct,"timer", null, null, null, null, null, null, null);
        startManagingCursor(c);
        return c;   
        }
    private void setUpList() {
        // TODO Auto-generated method stub
        lv.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,items));
    }   

    } 
```

如果我选择删除然后删除记录。使用上下文菜单我们可以实现这个目标。我有该应用程序的一些代码，但代码无法正常工作。所以，请为此提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T03:34:59.507

请提供有关您所看到内容的更多详细信息，但是查看您的代码我猜测列表视图可能保持相同状态，并且在您删除后不刷新。如果是这种情况，您可能需要[重新查询](https://stackoverflow.com/questions/1850771/how-to-refresh-a-listview-to-requery-its-cursor-to-repopulate-its-data-and-its-v)光标。此方法已弃用，但是您应该能够使用它来验证是否是问题所在，或者只需获取光标的新实例并按照[文档](http://developer.android.com/reference/android/database/Cursor.html#requery)建议加载它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T03:48:55.327

有几件事：首先你的删除方法是关闭的。您获得了 id 字段，然后找到了要删除的相应字符串，但您仍然希望`_id`使用此字符串在字段中删除。这种方式不会删除任何内容，因为这些字符串不会在该列中。更好的是简单地删除原来的`long id`。

```
private void deleteUserData(long indexid) {
    db.delete("timer","_ID" + "=" + indexid, null);
    finish();
} 
```

就是这样。现在另一个问题实际上是检索要删除的 id。你正在使用

```
index_id = menuinfo.position; 
```

但这不会给您数据库中的任何 ID。这只是给你`ListView`适配器上的位置。你需要使用这个位置，来得到这个`_id`。由于您使用的是，`ArrayAdapter`这意味着`_id`从用于填充此列表视图的相应集合中获取。

所以根据你的人口方法。

```
private void showAllData(Cursor c) {
    while(c.moveToNext())
    {
        int id = c.getInt(0);
        String name = c.getString(1);
        .....
        items.add("" + name);
        items_id.add(""+id);
    }
    lv.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,items));
} 
```

很明显，您现在需要做什么才能`_id`根据现在的位置得到这个。

```
 @Override
    public boolean onContextItemSelected(MenuItem item) {
        int itemId = item.getItemId();
        if(itemId == 1)
        {
            AdapterView.AdapterContextMenuInfo menuinfo = (AdapterContextMenuInfo) item.getMenuInfo();
            int position = menuinfo.position;
            String id_string = items_id.get(position);
            long id = Long.valueOf(id_string);
            deleteUserData(id);
//          then you probably want it off the corresponding collection too
            items_id.remove(position);
        }
        ..... 
```

# c# - 如何在不敏感DLL版本的情况下检查方法是否具有某些属性？

> ID：14116526
> 
> 赞同：1
> 
> 时间：2013-01-02T03:22:25.510
> 
> 标签：c#, .net, reflection, attributes, .net-assembly

我有一个使用 NUnit 属性的自定义测试用例运行器。我使用反射加载测试 DLL 并检查方法是否包含 [Test] 属性，如下所示：

```
method.IsDefined(typeof(TestAttribute), true) 
```

但是，如果测试 DLL 和我的运行器引用不同版本的 NUnit，这似乎返回 false，例如，运行器使用 NUnit 2.6，而测试 DLL 在参考中使用 NUnit 2.5。如果 DLL 版本不同，有没有一种方法可以执行此检查，该检查返回 true？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T06:07:27.413

我只想检查属性的全名。属性中没有其他元数据`TestAttribute`，也不会被误认为是其他元数据。

```
bool isTestMethod = method.GetCustomAttributes(false).Any(attribute => attribute.GetType().FullName == typeof(TestAttribute).FullName); 
```

如果您想对此严格要求，则必须通过 app.config 文件为您的自定义测试运行程序执行程序集绑定重定向。

# joomla - 带有 Virtuemart 购物车的 Joomla 面包屑

> ID：14116528
> 
> 赞同：1
> 
> 时间：2013-01-02T03:22:38.743
> 
> 标签：joomla, virtuemart, breadcrumbs

当我点击购物车链接时。面包屑显示双链接标题，如所附：![面包屑](../Images/099d226d73a90136aa8436501536bca2.png)

这是我的代码：

```
 <?php // no direct access
defined('_JEXEC') or die('Restricted access'); ?>
<div class="breadcrumb">
<span class="left"></span>
<ul>
<?php for ($i = 0; $i < $count; $i ++) :

// If not the last item in the breadcrumbs add the separator
if ($i < $count -1){
if(!empty($list[$i]->link)) {
echo '<li><a href="'.$list[$i]->link.'" class="pathway">'.$list[$i]->name.'</a></li>';
} else {
echo '<li>'.$list[$i]->name.'</li>';
}
//echo ' '.$separator.' ';
}else if ($params->get('showLast', 1)) 
{ // when $i == $count -1 and 'showLast' is true
    echo '<li>'.$list[$i]->name.'</li>';
}
endfor; ?>
</ul>
<span class="right"></span>
</div> 
```

我怎样才能消除第一个网址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T03:30:21.053

尝试这样的事情

```
if($i!=0){

    if($list[$i - 1]->name != $list[$i]->name){
    echo '<li>'.$list[$i]->name.'</li>';
    echo $separator;
    }
} 
```

另一种方式这只发生在这个页面然后你可以使用jQuery删除第一个li

找到第 n 个子选项并将其删除。

希望这可以帮助你..

# jquery - 在鼠标悬停时从中心缩放 SVG (Raphaël) 路径

> ID：14116529
> 
> 赞同：0
> 
> 时间：2013-01-02T03:23:20.813
> 
> 标签：jquery, svg, raphael, scale

我正在尝试在鼠标悬停时缩放 SVG 路径，但因为我必须在将路径添加到纸上时转换路径，结果弄得一团糟。

请参阅：http: [//jsfiddle.net/chrisloughnane/Kc4q2/](http://jsfiddle.net/chrisloughnane/Kc4q2/)

使用此转换属性添加路径：

`transform: 'S2.5,2.5,0,0'`

并在`mouse in`我制作动画时： `this.animate({transform: 's2.9,2.9,0,0'}, 200);`

`mouse out`我恢复 ：`this.animate({transform: 's2.5,2.5,0,0' }, 400, "bounce");`

在这里检查后，我发现提到的人`element.getBBox()`，我尝试了这个，但我搞砸了。

```
var center = this.getBBox();
var adjustx = center.width / 2 ;//+ center.x;
var adjusty = center.height / 2 ;//+ center.y;
adjustx = (1 - 3)*adjustx;
adjusty = (1 - 3)*adjusty; 
```

谁能指出我错过了什么？

或者推荐一个很好的工具来将 SVG 路径调整为新的默认值。我试过inkscape和[http://svg-edit.googlecode.com/svn/branches/2.5.1/editor/svg-editor.html](http://svg-edit.googlecode.com/svn/branches/2.5.1/editor/svg-editor.html)

蒂亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:38:34.573

处理转换是拉斐尔最不喜欢的部分。我可能在这里遗漏了一个明显的解决方案，但这是我修复它的方法：

*   当形状完全按照路径指定的方式绘制时，获取原始转换之前的边界框。

*   计算鼠标悬停前后形状中心的 dx 和 dy 差异。如果 bbox 是原始的预缩放边界框，那么对于 dx，这将是 2.5 * (bbox.x + bbox.width / 2) - 2.9 (bbox.x + bbox.width / 2)。这显然可以减少。

*   将放大的形状向后平移这些数量。

在代码中：

```
 var obj = paper.path(paths[county].path);
    obj.bbox = obj.getBBox();
    obj.attr({ transform: 'S2.5,2.5,0,0' });

    obj.mouseover(function (e) {
        var dx = -0.4 * (this.bbox.x + this.bbox.width / 2);
        var dy = -0.4 * (this.bbox.y + this.bbox.height / 2);
        this.animate({ transform: 'S2.9,2.9,0,0T' + dx + ',' + dy}, 200);
    }).mouseout(function (e) {
        this.animate({ transform: 's2.5,2.5,0,0' }, 400, "bounce");
    }); 
```

这是一个[更新的小提琴给你](http://jsfiddle.net/Kc4q2/8/)。作为参考，我让它绘制了代表鼠标悬停前后边界框的红色和蓝色矩形——每当转换让我消化不良时，我都会使用这种策略。您自然会想要删除它们。

要记住的另一件事：不规则形状的实际中心是其[质心](http://en.wikipedia.org/wiki/Center_of_mass)，而不是其边界框的中点。（只有当它是一个完全对称的形状时，这两个点才相同，而地理边界很少会产生这种形状。）对于像阿拉斯加州这样的形状，在拐角处有很多岛屿，这会使基于中心的缩放看起来很尴尬.

如果你想变得非常花哨，你可以尝试计算每个形状的质心。但我怀疑你想去那里，而且这些县似乎在中心周围的质量分布大致均匀。

# php - 单击下一步时，搜索结果分页返回所有结果

> ID：14116533
> 
> 赞同：1
> 
> 时间：2013-01-02T03:23:47.747
> 
> 标签：php, pdo

我正在尝试构建一个基本搜索，但在这里遇到了一个小代码问题，我想对我的搜索结果集进行分页，这就是我所拥有的 1) 一个名为“input”的输入字段，a 并且在 post 方法 2 的形式中) 当用户提交表单时，它会使用下面的代码调用 search.php。

## 问题

分页返回正确分页的结果集，但是当我移至下一页时，将返回搜索表中的所有记录，包括那些不符合 where 子句中条件的记录。

这是代码：让我知道这里的代码是否太多。我可以粘贴到其他地方并提供链接；多谢你们

```
<?php

    $input = $_POST['input'];
    $categories = $_POST['category'];
    $state = $_POST['state'];

    $targetpage = "search.php";
    $limit = 3;

    //This query checks for data
    $qq = " SELECT * FROM classified where confirm='0' ";
    $qq = $db->prepare($qq);
    $qq->execute();

    $total_pages =$qq->rowCount();

    $stages = 3;
    $page = ($_GET['page']);
    if ($page){
        $start = ($page - 1) * $limit;
    } else {
        $start = 0;
    }

    $rows = $qq->fetchAll();
    if ($rows > 0){
        $q = " SELECT * FROM classified where confirm='0' ";
        if (!empty( $input)) {
            $q .= "AND title LIKE '%".$input."%' ";
        }
        if (!empty($_POST['search_category']) ) {
            $q .= "AND id_cat = ".$categories." ";
        }

        if (!empty($_POST['state']) ) {
            $q .= "AND id_state = ".$state." ";
        }
        $q .= "ORDER BY date DESC LIMIT $start, $limit ";
    }
    $q = $db->prepare($q);
    $q->execute();
    //// Just for testing purposes to see what's coming out
    print_r($q);

    /*** echo number of columns ***/
    $resultt = $q->fetchAll();
    // Initial page num setup
    if ($page == 0){
        $page = 1;
    }
    $prev = $page - 1;
    $next = $page + 1;

    $lastpage = ceil($total_pages/$limit);
    $LastPagem1 = $lastpage - 1;

    $paginate = '';
    if ($lastpage > 1) {
        $paginate .= "<div class='paginate'>";
        // Previous
        if ($page > 1){
            $paginate.= "<a href='$targetpage?page=$prev'>Previous</a>";
        } else {
            $paginate.= "<span class='disabled'>Previous</span>";
        }
        // Pages
        if ($lastpage < 7 + ($stages * 2)) { // Not enough pages to breaking it up
            for ($counter = 1; $counter <= $lastpage; $counter++) {
                if ($counter == $page) {
                $paginate.= "<span class='current'>$counter</span>";
                } else {
                    $paginate.= "<a href='$targetpage?page=$counter'>$counter</a>";
                }
            }
        } else if ($lastpage > 5 + ($stages * 2)) {// Enough pages to hide a few?
            // Beginning only hide later pages
            if ($page < 1 + ($stages * 2)) {
                for ($counter = 1; $counter < 4 + ($stages * 2); $counter++) {
                    if ($counter == $page) {
                        $paginate.= "<span class='current'>$counter</span>";
                    } else {
                        $paginate.= "<a href='$targetpage?page=$counter'>$counter</a>";
                    }
                }
                $paginate.= "...";
                $paginate.= "<a href='$targetpage?page=$LastPagem1'>$LastPagem1</a>";
                $paginate.= "<a href='$targetpage?page=$lastpage'>$lastpage</a>";
            } else if ($lastpage - ($stages * 2) > $page && $page > ($stages * 2)) { // Middle hide some front and some back
                $paginate.= "<a href='$targetpage?page=1'>1</a>";
                $paginate.= "<a href='$targetpage?page=2'>2</a>";
                $paginate.= "...";
                for ($counter = $page - $stages; $counter <= $page + $stages; $counter++) {
                    if ($counter == $page) {
                        $paginate.= "<span class='current'>$counter</span>";
                    } else {
                        $paginate.= "<a href='$targetpage?page=$counter'>$counter</a>";
                    }
                }
                $paginate.= "...";
                $paginate.= "<a href='$targetpage?page=$LastPagem1'>$LastPagem1</a>";
                $paginate.= "<a href='$targetpage?page=$lastpage'>$lastpage</a>";
            } else { // End only hide early pages
                $paginate.= "<a href='$targetpage?page=1'>1</a>";
                $paginate.= "<a href='$targetpage?page=2'>2</a>";
                $paginate.= "...";
                for ($counter = $lastpage - (2 + ($stages * 2)); $counter <= $lastpage; $counter++) {
                    if ($counter == $page) {
                        $paginate.= "<span class='current'>$counter</span>";
                    } else {
                        $paginate.= "<a href='$targetpage?page=$counter'>$counter</a>";
                    }
                }
            }
        }
        // Next
        if ($page < $counter - 1) {
            $paginate.= "<a href='$targetpage?page=$next'>Next</a>";
        } else {
            $paginate.= "<span class='disabled'>Next</span>";
        }
        $paginate.= "</div>";
    }
    // pagination
    echo $total_pages.' Results';
    echo $paginate;
    ////////
    if (count($resultt) !== 0) {
        foreach ($resultt as $row) {
            echo $row['title'];
            echo $row['categories'];
            echo $row['state'];
        }
    } else {
        echo "No data available";
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T03:31:48.967

这当然是因为当您转到下一页时，您不会再次发送这些值：

```
$input = $_POST['input'];
$categories = $_POST['category'];
$state = $_POST['state']; 
```

对应于您的过滤器值。他们肯定会变得空虚。

希望这可以帮助。

# javascript - 如何在谷歌表单脚本编辑器中设置 var 主题以返回其连接的表单/工作表中指定字段的值？

> ID：14116534
> 
> 赞同：1
> 
> 时间：2013-01-02T03:23:51.207
> 
> 标签：javascript, email, google-apps-script, google-forms, google-apps-script-editor

如何在谷歌表单脚本编辑器中设置 var 主题以返回其连接的表单/工作表中指定字段的值？

例如，如果我的列标题和相应的表单字段分别是“名称”和“日期”，我将如何编码“var subject =”以从这些列中提取该信息，以便确认电子邮件的主题包括数据？

下面的代码将我的表单数据从 Google Docs 提取到电子邮件确认消息中，并显示输入的数据。我想自定义脚本以具有与一个或多个表单字段匹配的自定义电子邮件主题行，而不仅仅是像现在这样的一组“短语”（即“新订单”）。

```
function sendFormByEmail(e) 
{    

  var email = "my email"; 

  var subject = "New Order Form";

  var s = SpreadsheetApp.getActiveSheet();
  var headers = s.getRange(1,1,1,s.getLastColumn()).getValues()[0];    
  var message = "";    

  for(var i in headers)
    message += headers[i] + ' = '+ e.namedValues[headers[i]].toString() + "\n\n"; 

  MailApp.sendEmail(email, subject, message); 

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-07T00:47:29.473

下面的代码片段来自一个已经激活的 Google Form 电子邮件通知脚本。它不是完整的脚本，但是，如果您将其添加到现有脚本中，它将执行您在问题中要求的内容。

下面的代码在做什么：

**第 1 步：**将两个变量分配给您希望在电子邮件通知中保持一致的两个不同常量，即`var subject1`和`var subject2`。

**注意：您可以更改常量和变量以满足您的需要。*

**第 2 步：**分配您在第 1 步中创建的两个变量以及您希望从用户提交的回复中插入主题行的数据。

如果我分别在您的 Google 表单字段“姓名”和“日期”中提交了值“John”和“3/6/2014”，您将收到一封主题为“由 John 于 3/6/2014 提交”的电子邮件.

```
var subject1 = "Submitted by ";
var subject2 = "On ";

subject = subject1 + e.namedValues['Name'].toString() + subject2 + e.namedValues['Date'].toString(); 
```

最后，请记住，您可以在此主题字符串中添加任意数量的变量，以便为您的电子邮件通知创建完美的主题。

希望有帮助，

*干杯...*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T19:50:03.363

假设您的表单有问题“姓名”和“日期”，它们分别位于第 2 (B) 列和第 3 (C) 列。由于您已经在访问表单提交时传递给您的函数的事件信息，因此您可以执行相同的操作来构建主题。

```
function sendFormByEmail(e) 
{    

  var email = "my email"; 

  var form = e.namedValues;
  var subject = form["Name"] + form["Date"];

 ... 
```

# xcode - 带有多个动画的 UIView 动画

> ID：14116539
> 
> 赞同：1
> 
> 时间：2013-01-02T03:25:24.393
> 
> 标签：xcode, uiview

我编写了一系列代码，将`UIIMAGE`CENTER 移动到 LEFT 位置，然后也会出现两个文本字段。动画效果很好，但是`UIIMAGE`在我点击任一文本字段后，它将移回原始（中心）位置。请指教。

这是我的代码：

```
-(void)moveLogoLeft{
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:1.0];
[UIView setAnimationDelay:0.0];
img_CPLLogo.frame = CGRectMake(130.0f, 230.0f, img_Logo.frame.size.width, img_Logo.frame.size.height);
[UIView commitAnimations]; 
```

}

并制作一个“UIButton”来触发动作

```
-(IBAction)doShowTextfield:(id)sender{
[UIView animateWithDuration:0 animations:^{
[btm_welcome setAlpha:0];
img_Logo.frame = CGRectMake(100.0f, 230.0f, img_Logo.frame.size.width, img_Logo.frame.size.height);

}completion:^(BOOL completed){
    [self showTextfield];
}];
}
} 
```

这有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T05:52:37.717

根据您的要求使用`UITextField`'s`delegate`方法：

```
 - (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
 {
   [UIView animateWithDuration:0 animations:^{
   [
      //do your requirement here
   }completion:^(BOOL completed){
      //do anything more here
   }];
   }
 } 
```

# jquery - 带有 jquery、jquery 表单插件和 ASP.Net WebMethod 的 JSON 原语无效

> ID：14116541
> 
> 赞同：1
> 
> 时间：2013-01-02T03:25:56.843
> 
> 标签：jquery, asp.net, ajax, json, webmethod

我在通过 jquery 将 JSON 数据发送到我的 ASPX 页面中的 WebMethod 时遇到问题。jQuery代码是：

```
<script type="text/javascript">
    $(document).ready(function () {
        $("#frmLogin").validate({
            errorClass: "errorBox",
            onfocusout: false,
            rules: { 
                txtUsername: "required",
                txtPassword: "required"
            },
            messages: { 
                txtUsername: "Enter username.",
                txtPassword: "Enter password." 
            },
            submitHandler: function (form) {
                $(this).ajaxSubmit({
                    type: "POST",
                    url: "Default.aspx/Login",
                    data: '{userName: \abc\',password:\'123\'}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (data, textStatus, jqXHR) {
                        if (data.d) {
                            alert("OK");
                        }
                        else {
                            alert("NO");
                        }
                    },
                    error: function (jqXHR, textStatus, errorThrown) {
                        alert(jqXHR.responseText);
                    },
                    complete: function (jqXHR, textStatus) {
                        alert("SUCCESS");
                    }
                });
            }
        });
    });
</script> 
```

我不断收到的错误是“无效的 JSON 原语”。我一直在搜索，问题似乎在于数据的格式。当我更换：

```
data: '{userName: \abc\',password:\'123\'}', 
```

和：

```
data: {}, 
```

然后一切正常。我一直在尝试许多不同的变体（在很多论坛和博客中都可以看到），例如：

```
data: "{userName: '" + 'abc' + "', password: '" + '123' + "'}",

data: "{userName:'abc', password:'123'}",

data: '{userName:"abc", password:"123"}',

data: '{"userName":"abc","password":"123"}',

data: '{"userName": "abc","password":"123"}', 
```

但到目前为止没有任何效果。

我正在调用的 WebMethod 是：

```
[WebMethod, ScriptMethod]
public static bool Login(string userName, string password)
{
    return SecurityManager.Instance.Login(userName: userName, password: password);
} 
```

另外，我正在使用 jquery.form.js 库（http://www.malsup.com/jquery/form/#getting-started）。如果使用单独的 $.ajax() 如下所示，它可以工作，所以我不知道在使用 jquery.form.js 时是否需要使用一些特殊的东西。

```
$("#frmLogin").submit(function (event) {
    //stop form from submitting normally
    event.preventDefault();

    //Get form values
    var strUsername = $("#txtUsername").val(),
    strPassword = $("#txtPassword").val();

    //Call the login function
    $.ajax({
        type: "POST",
        url: "Default.aspx/Login",
        data: "{userName: '" + strUsername + "', password: '" + strPassword + "'}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (data, textStatus, jqXHR) {
            if (data.d) {
                alert("OK");
            }
            else {
                alert("NO");
            }
        },
        error: function (jqXHR, textStatus, errorThrown) {
            alert(errorThrown);
        },
    });
}); 
```

**编辑 1：** 我得到的完整错误消息是：

{“消息”：“无效的 JSON 原语：%7B\u00261=%22\u00262=u\u00263=s\u00264=e\u00265=r\u00266=N\u00267=a\u00268=m\u00269=e\ u002610=%22\u002611=%3A\u002612=%22\u002613=a\u002614=b\u002615=c\u002616=%22\u002617=%2C\u002618=%22\u002619=p\u002620=a\ u002621=s\u002622=s\u002623=w\u002624=o\u002625=r\u002626=d\u002627=%22\u002628=%3A\u002629=%22\u002630=1\u002631=2\u002632=3 \u002633=%22\u002634=%7D.","StackTrace":" 在 System.Web.Script.Serialization.JavaScriptObjectDeserializer.BasicDeserialize（字符串输入，Int32 depthLimit，JavaScriptSerializer 序列化程序）\r\n 在 System.Web.Script .Serialization.JavaScriptSerializer.Deserialize(JavaScriptSerializer 序列化程序，字符串输入，类型类型，Int32 depthLimit)\r\n 在 System.Web.Script.Serialization.JavaScriptSerializer.Deserialize[T](字符串输入)\r\n 在 System.Web 。脚本。Services.RestHandler.GetRawParamsFromPostRequest(HttpContext context, JavaScriptSerializer 序列化程序)\r\n 在 System.Web.Script.Services.RestHandler.GetRawParams(WebServiceMethodData methodData, HttpContext context)\r\n 在 System.Web.Script.Services.RestHandler。 ExecuteWebServiceCall(HttpContext context, WebServiceMethodData methodData)","ExceptionType":"System.ArgumentException"}

**编辑 2：** 使用 Firebug 我已经看到我传递的 JSON 数据是 URLEnconded。这是 Firebug 在请求中显示的内容：

0=%7B&1=%22&2=u&3=s&4=e&5=r&6=N&7=a&8=m&9=e&10=%22&11=%3A&12=%22&13=a&14=b&15=c&‌​16=%22&17=%2C&18=%22&19= p&20=a&21=s&22=s&23=w&24=o&25=r&26=d&27=%22&28=%3A&29=%22‌​&30=1&31=2&32=3&33=%22&34=%7D

**编辑 3：** 我正在审查更多内容，看来错误出在表单插件上。如果我将数据设置为：

```
data: { userName: 'abc', password: '123' }, 
```

萤火虫显示：“userName=abc&password=123”。所以似乎即使我将类型参数设置为 POST，参数也会转换为查询字符串。如果我这样做：

```
data: $.toJSON({ userName: 'abc', password: '123' }), 
```

然后数据得到 URLEncoded。如何使表单插件将数据作为 JSON 对象发送？

**编辑 4：** 我一直在调试 jquery.form.js 库，发现它总是 URLEnconding 数据，假设它总是作为查询字符串发送。在从 115 到 120 的行中，有这样的：

```
var elements = [];
var qx, a = this.formToArray(options.semantic, elements);
if (options.data) {
    options.extraData = options.data;
    qx = $.param(options.data, traditional);
} 
```

qx 的结果值为： "0=%7B&1=%22&2=u&3=s&4=e&5=r&6=N&7=a&8=m&9=e&10=%22&11=%3A&12=%22&13=v&14=a&15=l&16=u&17=e&18 =1&19=%22&20=%2C&21=%22&22=p&23=a&24=s&25=s&26=w&27=o&28=r&29=d&30=%22&31=%3A&32=%22&33=v&34=a&35=l&36=u&37=e&38=2&39=% 22&40=%7D"。然后，在从 135 到 145 的行中，qx 转换为 q，并将 q 分配给 options.data（替换我作为参数发送的 JSON 对象）：

```
var q = $.param(a, traditional);
if (qx) {
    q = (q ? (q + '&' + qx) : qx);
}
if (options.type.toUpperCase() == 'GET') {
    options.url += (options.url.indexOf('?') >= 0 ? '&' : '?') + q;
    options.data = null;  // data is null for 'get'
}
else {
    options.data = q; // data is the query string for 'post'
} 
```

如果我不让库替换它在 options.data 中的内容，那么一切正常。有任何想法吗？我应该解决这个问题还是应该使用不同的方法来实现我想要的？

**编辑 5：** 在 jquery-1.8.3.js 库中，从 7870 到 7872 的行我发现了这个：

```
if ( s.data && s.processData && typeof s.data !== "string" ) {
    s.data = jQuery.param( s.data, s.traditional );
} 
```

这是在ajax（方法）内部。如您所见，该库仅在条件为真时才对数据进行编码（通过 jQuery.param() 方法）。否则，它来了就走了。但是，jquery.form.js 库总是调用 jQuery.param() 方法，如下所示（并在我的**编辑 4**中指出）：

```
if (options.data) {
    options.extraData = options.data;
    qx = $.param(options.data, traditional);
} 
```

有什么想法吗？有谁知道如何联系 jquery 表单插件的开发人员？我已经通过 Twitter 尝试过，但没有运气。

这是非常令人沮丧的。任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T03:35:28.397

JSON 需要双引号。发送的数据不是

```
data: '{"userName": "abc","password":"123"}', 
```

参考：http: [//json.org/](http://json.org/)

站点看起来很原始，但站点发起者开发了 JSON 规范和解析 JSON 的现代浏览器中使用的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T05:27:26.957

您应该将字段值添加到对象，如下所示，然后将该对象传递给将在所需事件上调用的函数。

```
//make object that will have values from form
var dataToSend = {
                    fieldname: $("FIELDCLASS OR ID").val();
                  };

  function tocall(){
       $.ajax({
                 url: urlForSaving,
                 data: JSON.stringify(dataToSend),
                 cache: false,
                 type: 'POST',
                 dataType: 'json',
                 contentType: "application/json;charset=utf-8",
                 success: function (data, status) {
             },
                 error: function (xhr, ajaxOptions, thrownError) { alert('error') }
             });
                   }; 
```

或者你也可以用`serialize()`方法序列化表单，google一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T23:25:58.023

好的。我想我得自己回答。这不是我所期望的解决方案，但我想在我可以从其他人那里获得更多信息或者我能够联系开发人员之前，这可以帮助面临同样问题的其他人。好吧，在查看了jquery表单插件的代码后，我发现该库总是对数据进行URLEncoding，而jquery库中的ajax()方法则不是。因此，我已将 jquery 表单修复如下。我不是专家，所以我所做的可能不是最好的，但它会让我继续前进，直到我找到更好和永久的解决方案：

1.  我已将以下代码替换为第 117 到 120 行：

    **我改变了这个：**

    ```
    if (options.data) {
        options.extraData = options.data;
        qx = $.param(options.data, traditional);
    } 
    ```

    **对此：**

    ```
    if (options.data && options.processData && typeof options.data !== "string") {
        options.extraData = options.data;
        qx = $.param(options.data, traditional);
    } 
    ```

2.  如果在 136 到 138 的行中，我在下面添加了一个 else

    **我改变了这个：**

    ```
    if (qx) {
        q = ( q ? (q + '&' + qx) : qx );
    } 
    ```

    **对此：**

    ```
    if (qx) {
        q = ( q ? (q + '&' + qx) : qx );
    }
    else {
        q = options.data;
    } 
    ```

谢谢。

# css - CSS整个精灵图像被加载

> ID：14116542
> 
> 赞同：0
> 
> 时间：2013-01-02T03:26:13.253
> 
> 标签：css, sprite

我是 CSS sprites 的新手，并试图在 firefox 上使用它们。问题是当我在标签或任何标签上加载精灵时，它会在页面上显示整个精灵图像。

我也尝试使用 text-indent = -9999px 但这没有帮助。该图像仍显示在页面其余部分的顶部。使用 z-index 也无济于事。

```
#container{
background: url(csg-50e22b073c545.png) no-repeat top left transparent;
overflow: hidden;
}
.bulletform{
background-position: 0 - 1567px;
width: 30px;
height: 30px;
} 
```

所以，我的问题是：1.如何避免显示整个精灵图像？2.我可以只加载一次精灵图像或页面的一些根DIV标签吗？然后使用背景位置在相关位置显示单个图像？

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T03:31:49.060

这不是你使用精灵的方式。您不应该将其加载到任何顶级包装器中。相反，为每个应该使用精灵的元素设置背景图像并调整背景位置。浏览器足够聪明，只加载一次相同的图像，无论你在 CSS 中调用它多少次。

# c# - 有人可以帮我处理我的正则表达式吗？

> ID：14116543
> 
> 赞同：-1
> 
> 时间：2013-01-02T03:26:15.207
> 
> 标签：c#, .net, regex

我试图在引号之间获取所有内容。引号之间的内容是文件位置。所以它就像 "C:\Users\Documents and Settings\Pictures\mypic.bmp" 我目前使用的正则表达式是：

```
 "([""'])(?:(?=(\\?))\2.)*?\1" 
```

它可以获取数字和字母，只是它在反斜杠处拆分。有人可以帮助我，以便我可以匹配完整的字符串吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T03:32:45.430

我会去：

```
@"""\s*(.*?)\s*""" 
```

我用来测试它的示例代码：

```
 protected void btnSubmit_Click(object sender, EventArgs e)
    {
        Match match = Regex.Match(txtString.Text, @"""\s*(.*?)\s*""",
            RegexOptions.IgnoreCase);

        if (match.Success)
        {
            string key = match.Groups[1].Value;
            lblFinal.Text = key;
        }
    } 
```

我们可以修正我的反对票吗？;)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T03:50:03.707

您可以使用以下正则表达式（在 C# 字符串文字中引用）：

```
string regexPattern = "\\\"(.+?)\\\""; 
```

或者

```
string regexPattern = @"\""(.+?)\"""; 
```

没有 C# 文字转义

```
\"(.+?)\" 
```

这样匹配的组将是引号内的字符串

如果在[http://derekslager.com/blog/posts/2007/09/a-better-dotnet-regular-expression-tester.ashx进行测试](http://derekslager.com/blog/posts/2007/09/a-better-dotnet-regular-expression-tester.ashx)

资源

```
"C:\Users\Documents and Settings\Pictures\mypic.bmp" 
```

图案

```
\"(.+?)\" 
```

结果

```
C:\Users\Documents and Settings\Pictures\mypic.bmp 
```

# c# - 如何在中等信任环境中识别有问题的完全信任 asp.net 代码

> ID：14116557
> 
> 赞同：0
> 
> 时间：2013-01-02T03:28:50.437
> 
> 标签：c#, asp.net

我们正在将 MVC3 C# Web 应用程序部署到新的托管环境。我们来自的环境允许完全信任应用程序级别。新的托管环境只允许中等信任，因此我们的应用程序现在会为需要完全信任的调用抛出安全错误。我们一直在审查我们的代码，试图找到有问题的调用，以便我们可以解决信任问题，但未能找到特定的代码行。下面是我们得到的异常，它对调用的来源非常模糊：

**安全异常**

**描述：**应用程序试图执行安全策略不允许的操作。要授予此应用程序所需的权限，请联系您的系统管理员或在配置文件中更改应用程序的信任级别。

**异常详细信息：** System.Security.SecurityException：请求“System.Security.Permissions.FileIOPermission，mscorlib，Version=4.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”类型的权限失败。

**源错误：**在执行当前 Web 请求
期间生成了未处理的异常。
可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

**堆栈跟踪：**

```
[SecurityException: Request for the permission of type
'System.Security.Permissions.FileIOPermission, mscorlib, Version=4.0.0.0,      
Culture=neutral, PublicKeyToken=b77a5c561934e089' failed.]
System.Security.CodeAccessSecurityEngine.Check(Object demand, StackCrawlMark&  
stackMark,      
Boolean isPermSet) +0
System.Security.CodeAccessSecurityEngine.Check(CodeAccessPermission cap,
StackCrawlMark&  
stackMark) +31
System.Security.CodeAccessPermission.Demand() +46
System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, 
Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options,
SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy, Boolean useLongPath,
Boolean checkHost) +654
System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare
share) +65
System.Configuration.Internal.InternalConfigHost.StaticOpenStreamForRead(String  
streamName) +85
System.Configuration.Internal.InternalConfigHost.System.Configuration.Internal.
IInternalCon    figHost.OpenStreamForRead(String streamName, Boolean assertPermissions)    
+116
System.Configuration.Internal.InternalConfigHost.System.Configuration.Internal.
IInternalCon figHost.OpenStreamForRead(String streamName) +10
System.Configuration.Internal.DelegatingConfigHost.OpenStreamForRead(String streamName)
+11
System.Configuration.UpdateConfigHost.OpenStreamForRead(String streamName) +38
System.Configuration.BaseConfigurationRecord.InitConfigFromFile() +319 
```

我们想知道是否有人能给我们一些关于如何追踪此安全级别错误的见解。是否有任何类型的应用程序或插件可以帮助我们确定问题的位置？其次，当抛出这些异常时，任何人都可以阐明吗？是否必须调用有问题的代码来引发异常，或者在 Web 服务器上编译页面时是否会发生此错误？

# jquery - 使用 jquery 切换通过 ajax 加载的元素

> ID：14116558
> 
> 赞同：0
> 
> 时间：2013-01-02T03:29:06.567
> 
> 标签：jquery, ajax, toggle

我有一个.php，它通过ajax 加载到一个div 中。在这个 .php 中，我有一个`<a href>`链接应该切换下一个`<p>`，显示/隐藏。但是当我将 jQuery 代码放入 .php 本身时，它不起作用。所以我意识到我可能必须将 jQuery 代码放入具有 ajax 的接收 .php 中 - 用户将在其中看到`<a href>`显示/隐藏`<p>`. 但它似乎没有做任何事情。这是html：

```
echo "<div><a class=\"exp\" href=\"javascript:void(0)\">View explanation: </a>";
echo "<p class=\"pexp\" style=\"display:none;\">";
echo $tfeedback;
echo "</p></div>"; 
```

jQuery：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
$('.exp').on('click', function (e) {
    e.preventDefault(); // stop href()
    $(this).next().toggle();      
});
    });
</script> 
```

$tfeedback 是字符串 - 我已经检查以确保它不为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T08:24:19.633

```
Please try this code hope it helps you......

$(document).delegate('.exp','click', function (e) {
    e.preventDefault(); // stop href()
   if($(this).next().css('display')=='block'){
    $(this).next().hide();
}else{
    $(this).next().show();
     }   
});

OR

$(document).on('click', '.exp', function (e) {
    e.preventDefault(); // stop href()
    if($(this).next().css('display')=='block'){
    $(this).next().hide();
}else{
    $(this).next().show();
     }      
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T03:32:04.770

在通过 AJAX 加载锚点和段落之前，您可能正在执行第二个片段中的代码。在这个阶段没有匹配的元素`.exp`，所以集合`$('.exp')`是空的。

解决方案是委托给已经存在的祖先：

```
$(document).on('click', '.exp', function (e) {
    e.preventDefault(); // stop href()
    $(this).next().toggle();      
}); 
```

# php - 根据用户ID显示来自mysql的结果？

> ID：14116559
> 
> 赞同：0
> 
> 时间：2013-01-02T03:29:37.363
> 
> 标签：php, mysql

想知道是否有人可以帮助我。我的网站上有一个功能，用户可以在其中链接朋友，如果他们继续访问另一个用户的个人资料并选择“成为我的朋友链接”，那么它将将该用户 ID 添加到数据库并将其与添加朋友 ID 的用户相匹配，并且被添加为朋友 ID 的人。

现在我正在尝试回显用户在其页面上拥有的朋友，目前我在下面使用的功能正在将用户朋友回显给所有其他用户的个人资料。

但是我希望每个用户的朋友都单独显示，所以如果用户 1 在用户 1 的页面上添加用户 3 4 和 5 作为他的朋友，它将显示用户 3 4 和 5。

如果用户 2 添加好友 8 9 和 10 则用户 8 9 和 10 将显示在用户 2 的页面中。

有人可以告诉我哪里出错了。

谢谢。

功能代码：

```
function get_friends() {
            global $connection;
            global $_SESSION;
            $query = "SELECT e.friend_id, p.display_name
                        FROM ptb_friends e, ptb_profiles p
                        WHERE e.user_id = p.user_id
                        LIMIT 3";
                        $friend_set = mysql_query($query, $connection);
            confirm_query($friend_set);
            return $friend_set;
        } 
```

我的回显代码：

```
<?php
        $friend_set = get_friends();
while ($friend = mysql_fetch_array($friends_set)) {

    echo "<a href=\"profile.php?id={$friend['friend_id']}\"><img width=\"60px\" height=\"60px\" class=\"friend_pic\" src=\"data/photos/{$friend['friend_id']}/_default.jpg\" /></a>";
?>
<?
        }
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T03:32:28.073

在您的查询中，您应该使用 ORDER-BY 函数

```
select e1."Event_Name", v2."Venue", e1."Ticket_price"
from "events" e1, "venues" v2
where (e1."VenueNo" = v2."VenueNo")
order by e1."Ticket_price" asc 
```

// asc 升序 desc 降序

在你的情况下

```
$query = "SELECT e.friend_id, p.display_name
                    FROM ptb_friends e, ptb_profiles p
                    WHERE e.user_id = p.user_id
                    ORDER BY e.user_id 
                    LIMIT 3"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T03:40:52.197

为什么不创建一个像“add-frinds”这样的表呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T03:44:20.850

要在查询中连接两个表，请使用[Mysql-JOIN-Functions](http://dev.mysql.com/doc/refman/5.1/de/join.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T04:04:29.730

您将当前配置文件用户 ID 传递到此页面。然后在你的sql上应用这种格式的where子句 where p.user_id = current_profile_user_id。所以你只会得到这个用户配置文件的朋友。（所以必须有一个表来满足这种格式的查询）。

user_id friends_id -------- ---------- 2 3

4 5

2 1

这里 2 个数字用户个人资料 ID 有这些 ids(3,1) 的朋友。

# python - Boost::python 派生类方法的包装器

> ID：14116560
> 
> 赞同：0
> 
> 时间：2013-01-02T03:30:11.623
> 
> 标签：python, boost, wrapper, derived

我有 C++ 类及其用于 boost::python 的包装器：

```
class CApp
{
 public:
   virtual bool FOOs (){}; //does not matter for now
   bool Run( const char * First,const char * Last) 
   {
     ...
     return "Running..."
   };

struct pyApp : CApp, wrapper<CApp>  //derived class 
{
   ... // wrappers for virtual methods
}

#include <boost/python.hpp>
using namespace boost::python;
BOOST_PYTHON_MODULE( myApp )
{
class_<pyApp, boost::noncopyable>("CApp", init<>()   )
            ...
    .def("Run",&pyMOOSApp::Run);
} 
```

编译就OK了。但是当我调用 Python 代码时

```
from myApp import *

class pyApp(CApp):
def __init__(self):
    print "INIT-->"

CClass = CApp()
pyClass = pyApp()
CClass.Run('myApp','bar')
pyClass.Run('myApp','bar') 
```

我有一个错误：

```
INIT-->
Running... // this is from CClass.Run
Traceback (most recent call last):
File "./pytest.py", line 18, in <module>
pyClass.Run('myApp','bar')
Boost.Python.ArgumentError: Python argument types in
CApp.Run(pyApp, str, str)
did not match C++ signature:
Run(CApp {lvalue}, char const*, char const*) 
```

因此，我尝试为 Run 方法编写一个包装器，该方法将 str 转换为 char 放置在派生类 c++ 代码中：

```
bool Run(std::string a, std::string b) {
    char * cstrA;
    char * cstrB;
    cstrA = new char[a.size()+1];
    cstrB = new char[b.size()+1];
    strcpy(cstrA,a.c_str());
    strcpy(cstrB,b.c_str());
    return this -> CApp::Run(cstrA, cstrB);
} 
```

但唯一的变化是在最后一击：

```
did not match C++ signature:
Run(pyApp {lvalue}, std::string, std::string) 
```

**我很确定 Run 方法的包装不好**，所以任何帮助都将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:46:16.057

我刚刚看到您的另一个问题（[Python BOOST 使用派生类 (C++)](https://stackoverflow.com/q/14076708/82896)）并相信这具有相同的解决方案。如果在派生类中提供 init，则需要在基类上调用 init()。在此处查看我的解决方案 - [https://stackoverflow.com/a/14742937/82896](https://stackoverflow.com/a/14742937/82896)。

# java - 固定字段之一时的java继承

> ID：14116561
> 
> 赞同：3
> 
> 时间：2013-01-02T03:30:18.483
> 
> 标签：java, inheritance

继承问题。

我有 1 个超类和 2 个子类。

问题：我可以对字段**age**和方法**getAge()**使用继承吗？让我感到困惑的是 Dog 类中的字段年龄是**固定**的（15）而不是参数。我想将方法​​ getAge() 移动到超类，但是 Dog 的年龄的固定值让我感到困惑。当一个（子）类中的字段固定为一个值而它不在另一个类中时该怎么办。你还能使用继承吗？如何解决这个问题？

```
//Super class:
    public class Animal
    {
       private String name;

       public Animal(String nam)
       {
          name = nam;
       }

       public void displayName("This animal is: " + name);
    }

//Subclass 1:
public class Cat extends Animal
{
private int age;

       public Cat(String nam, int a)
       {
          super(nam);
          age = a;
       }

       public int getAge()
       {
           return age;
       }
}

//Subclass 2:
public class Dog extends Animal
{
private int age;

       public Dog(String nam)
       {
          super(nam)
          age = 15;
       }

       public int getAge()
       {
           return age;
       }
} 
```

马特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T03:44:21.287

怎么样：

```
public abstract class Animal
{
   private String name;
   private int age;

   public Animal(String nam)
   {
      name = nam;
   }

   public void displayName() 
   {
      System.out.println("This animal is: " + name);
   }

   public abstract int getAgeInAnimalYears();
}

public class Cat extends Animal
{
       private int age;

       public Cat(String nam, int a)
       {
          super(nam);
          age = a;
       }

       @Override
       public int getAgeInAnimalYears()
       {
           return age * 9;
       }
}

public class Dog extends Animal
{
       private int age;

       public Dog(String nam)
       {
          super(nam)
          age = 15;
       }

       @Override
       public int getAgeInAnimalYears()
       {
           return age * 7;
       }
} 
```

这使用一个抽象类 ( [http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html](http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html) ) 用于`Animal`. 请注意，这意味着您不能再实例化`Animal`对象，它们必须是`Cat`s 或`Dog`s 或`Animal`. 我认为这是一个合理的设计选择，但是如果由于某种原因需要实例化 pure `Animal`s，则可以将它们保留为普通类并引发异常：

```
public class Animal
{
   private String name;
   private int age;

   public Animal(String nam)
   {
      name = nam;
   }

   public void displayName() 
   {
       System.out.println("This animal is: " + name); 
   }

   public int getAgeInAnimalYears() {
      throw new UnsupportedOperationException();
   }
} 
```

## 这有什么了不起的？

为了解决您关于代码重用的问题：您已经通过`displayName()`只实现一次来节省空间 - 想象一下，如果这是一个更复杂的功能，仍然对所有动物都一样，还想象另外三个子类，突然间你节省了一大堆代码。然而，更有吸引力的是继承允许您执行的以下功能：

```
public class Zoo
{
    private ArrayList<Animal> list = new ArrayList<Animal>();

    public void addAnimal(Animal a)
    {
        list.add(a);
    }

    public void everyoneSayHello()
    {
        for (Animal a : list) {
            a.displayName();
            System.out.println("It is " + a.getAgeInAnimalYears() + \
                               " animal-years old!")
        }
    }
 } 
```

您现在可以将`Dog`s、`Cat`s 和任何内容添加到您的列表中，并且当您调用 时`everyoneSayHello()`，[多态](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)会自动`getAgeInAnimalYears()`为您调用正确的！如果没有继承，这只适用于难以扩展的大`if`/块。`case`使用继承，您只需添加另一个扩展类`Animal`，无需更改任何其他代码！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T03:41:25.913

如果我理解你想问的问题..你想要做的改变`Animal`如下

```
public class Animal
{
    ....
    protected int age;
    public int getAge()
    {
        return age;
    }
} 
```

`age`并从子类中删除定义-`getAge`这是因为我假设（并且我认为您也想这样做）所有动物都有年龄，但是对于不同的动物，它们可能会受到不同的管理，就像您的情况一样。

您的其余代码**无需更改**（我已设置年龄保护，以便可以在子类中设置它），但不是您这样做的方式，而是使用设置器`setAge`并根据需要自定义（忽略年龄并设置15 以狗为例）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T03:42:17.903

在任何一种情况下，您都不会公开 API 方法来改变年龄。您可以将字段和 getter 都移到超类中，并且由于年龄永远不会修改，因此它将按您的预期工作。

如果您要向超类添加一个 setter（或任何修改年龄的方法），您需要做的就是在 Dog 类中覆盖该方法并采取适当的操作（例如，什么都不做，抛出 UnsupportedOperationException 等）。

# objective-c - 避免重新初始化我的表格视图的数据源（核心数据）

> ID：14116563
> 
> 赞同：0
> 
> 时间：2013-01-02T03:30:45.567
> 
> 标签：objective-c, ios, core-data

所以我制作了一个运行良好的小应用程序，我只是不确定一些最佳实践/效率。该应用程序有一个加载到表视图中的核心数据源。可以从文本字段将项目添加到表格视图中。问题在于我的 TVViewController 方法中的行`[_tvds init]`。`cellForRowAtIndexPath`我认为这条线会导致`_tvds`当我向上和向下滚动表格时要重新实例化的实例变量 - 这会导致性能下降吗？我还是 iOS 和 Objective C 的新手，所以请随时给我指点如何重构我的代码。分离视图控制器和数据存储（使用 Core Data 方法等）似乎没有必要，但我正在尝试练习我的 MVC 设计。这是代码（我省略了 App Delegate 和 xib 文件——它们是标准的东西）。该应用程序有效，但对我的初学者来说似乎不是最佳选择。

**TVViewController.h**

```
#import <UIKit/UIKit.h>
#import "TVDataSource.h"
#import "TVAppDelegate.h"
@interface TVViewController : UIViewController <UITableViewDataSource, UITableViewDelegate,UITextFieldDelegate>

@property (strong, nonatomic) IBOutlet UITableView *tableView;
@property (nonatomic, retain) TVDataSource *tvDS;
@property (weak, nonatomic) IBOutlet UITextField *addSomethingTextField;
- (IBAction)goButton:(id)sender;

@end 
```

**TVViewController.m**

```
#import "TVViewController.h"

@interface TVViewController ()
@end
@implementation TVViewController

- (void)viewDidLoad
{
[super viewDidLoad];
_tvDS = [[TVDataSource alloc]init];
NSLog(@"%@",[_tvDS dataArray]);

NSLog(@"%@",[[_tvDS dataArray] valueForKey:@"name"]);

[_addSomethingTextField setDelegate:self];

}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
// Return the number of sections.
return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
// Return the number of rows in the section.
// If you're serving data from an array, return the length of the array:

return [[_tvDS dataArray] count];
}

// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
            }

// Set the data for this cell:

cell.textLabel.text = @"dfjklsl";
NSInteger myInt = [indexPath row];
[_tvDS init];
NSObject *myObj = [[_tvDS dataArray] objectAtIndex:myInt];

[[cell textLabel]setText:[myObj valueForKey:@"name"]];

// NSArray *toBeDisplayed = [_tvDS getAnArray];

// [[cell textLabel]setText:[toBeDisplayed objectAtIndex:myInt]];

// set the accessory view:
cell.accessoryType =  UITableViewCellAccessoryNone;

return cell;
}
 - (IBAction)goButton:(id)sender {
 NSString *textFieldContents = [_addSomethingTextField text];
[[_tvDS dataArray] addObject:textFieldContents];
[_tvDS addItem:textFieldContents];
[_addSomethingTextField setText:@""];

[[self tableView] reloadData];
NSLog(@"%u",[[_tvDS dataArray] count]);

}
-(BOOL)textFieldShouldReturn:(UITextField *)textField
{
[self goButton:textField];
[_addSomethingTextField resignFirstResponder];
//NSLog(@"%@", [_addSomethingTextField text]);
return YES;
}
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
NSUInteger row = [indexPath row];

NSLog(@"%@", [[_tvDS dataArray] objectAtIndex:row]);

}

@end 
```

**电视数据源.h**

```
#import <Foundation/Foundation.h>
#import "TVAppDelegate.h"
@interface TVDataSource : NSObject
@property (nonatomic, retain) NSMutableArray *dataArray;
@property (nonatomic, retain) NSManagedObjectContext *context;
@property (nonatomic, retain) NSFetchRequest *request;
@property (nonatomic, retain) NSError *error;
//@property (nonatomic, strong) NSArray *obj
//@property (nonatomic, weak) NSManagedObjectContext *context;
//-(void)saveInput;
-(void)addItem:(id)input;

@end 
```

**电视数据源.m**

```
#import "TVDataSource.h"

@implementation TVDataSource

- (id)init
{
    self = [super init];
    TVAppDelegate *appDelegate = [[UIApplication sharedApplication]delegate];
    NSManagedObjectContext *context = [appDelegate managedObjectContext];
    NSEntityDescription *entityDesc = [NSEntityDescription entityForName:@"Todo" inManagedObjectContext:context];
    NSFetchRequest *request = [[NSFetchRequest alloc]init];
    [request setEntity:entityDesc];
    // NSPredicate *pred = [NSPredicate predicateWithFormat:@"(name = %@)", [_name text]];

    NSManagedObject *matches = nil;
    NSError *error;
    NSArray *objects = [context executeFetchRequest:request error:&error];

    if ([objects count]==0) {
        NSLog(@"nothing there");
    } else {
        matches = objects[0];

        [self setDataArray:[objects mutableCopy]];
        NSLog(@"initialise %@",[self dataArray]);
        //NSLog(@"%@",[_dataArray valueForKey:@"name"]);

    }
    return self;

}
-(void)addItem:(id)input
{
    TVAppDelegate *appDelegate = [[UIApplication sharedApplication]delegate];

    NSManagedObjectContext *context = [appDelegate managedObjectContext];
    NSManagedObject *newTask;
    newTask = [NSEntityDescription insertNewObjectForEntityForName:@"Todo" inManagedObjectContext:context];
    [newTask setValue:input forKey:@"name"];

    if ([input isEqualToString:@""]) {
        NSLog(@"CONTENTS BLANK");

    } else {
        NSLog(@"Contents were %@", input);
        NSLog(@"goButton: was called");
        NSError *error;
        [context save:&error];
    }
}

@end 
```

谢谢你们的帮助。我认为这将是一件简单的事情。

**编辑：**

应该更清楚我尝​​试过的事情/遇到的问题。我必须再次执行初始化的原因是，当我从文本字段添加新内容时，我可以从核心数据存储重新填充。如果我删除第二个`init`，那么当我添加一个新项目并尝试向下滚动到它时，我会收到一个 SIGABRT 错误。我相信这个错误是因为我将文本字段的内容添加到没有“名称键”的数组中。我不知道如何解决这个问题。我考虑过为视图控制器创建一个工作数组以向用户显示，然后将此更新到核心数据存储。这是一个好的解决方案还是有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T03:52:03.330

您已经`init`在方法中使用了数据源`viewDidLoad`，因此在返回单元格时不需要它。

我会完全删除它，看看你是否有任何由此引起的问题。如果您的课程是正确的，那么您是对的，每次调用它只是在浪费时间。

由于它不会在不调用 init 的情况下将其添加到您的数据源中，因此您只能在添加新对象时调用 init。或者，更好的是，`addItem`通过添加以下行来修复您的方法，使其无需重新初始化即可工作：

```
[self.dataArray addObject:input]; 
```

# c# - 将 GIF 文件保存到图片文件夹？

> ID：14116567
> 
> 赞同：2
> 
> 时间：2013-01-02T03:31:09.220
> 
> 标签：c#, windows-phone-8, nokia

诺基亚 Cinemagraph 能够将 gif 文件保存到设备上的图片文件夹中。但是 XNA MediaLibrary 类只允许在那里保存 JPEG 文件。

他们如何能够保存 gif 文件？WP8 中是否有一个新课程可以让你做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T08:33:38.747

诺基亚 Cinemagraph 并不完全将 GIF 文件保存在 Pictures 文件夹中，它实际上存储了一张 JPG 照片以及一个指向存储在应用程序本地文件夹中的数据的链接。

这是通过使用随 Windows Phone 8 引入的新[**富媒体可扩展性功能来完成的。**](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj662942%28v=vs.105%29.aspx)

> 富媒体应用程序包含来自本地文件夹或 Web 的数据，以提供独特的体验来查看或编辑它们捕获的图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T21:05:16.143

我收到 Justin Angel (@JustinAngel) 的回复，说这些 API 没有向公众公开。

# c# - Neo4jClient 与属性创建关系并稍后更新

> ID：14116568
> 
> 赞同：1
> 
> 时间：2013-01-02T03:31:31.263
> 
> 标签：c#, neo4j, neo4jclient

我有一个 Neo4jClient 的 Friend 关系类，我想用它来管理我的社交网站上的朋友。我没有为每个可能的朋友状态（请求、接受、拒绝、阻止）创建单独的关系，而是在我的朋友关系类中添加了一个属性。但是，当使用 Neo4jClient 序列化该类时，它不会在关系上创建**Status**属性。

这是我的关系类：

```
/// <summary>
/// Friendship relationship - User is a friend of a User with a Status of REQUESTED, ACCEPTED, DENIED, BLOCKED
/// </summary>
public class Friend : Relationship, IRelationshipAllowingSourceNode<User>,
    IRelationshipAllowingTargetNode<User>
{
    public static readonly string TypeKey = "FRIEND";

    public string Status { get; set; }

    public Friend(NodeReference targetNode)
        : base(targetNode)
    { }

    public override string RelationshipTypeKey
    {
        get { return TypeKey; }
    }
} 
```

这是我创建关系的代码：

```
client.CreateRelationship(user, Friend(requestedUser) { Status = "REQUESTED" }); 
```

我希望以后能够查询所有 Friend 关系并根据 Status 属性返回不同的集合。我还希望能够更新好友关系的 Status 属性。请告知应该如何正确添加 Status 属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T05:57:19.877

经过进一步研究，我发现您需要为继承的通用关系类提供一个有效负载类，如下所示：

```
/// <summary>
/// Friendship relationship - User is a friend of a User with a Status of REQUESTED, ACCEPTED, DENIED, BLOCKED
/// </summary>
public class Friend : Relationship<FriendPayload>, IRelationshipAllowingSourceNode<User>,
    IRelationshipAllowingTargetNode<User>
{
    public static readonly string TypeKey = "FRIEND";

    public Friend(NodeReference targetNode)
        : base(targetNode)
    { }

    public override string RelationshipTypeKey
    {
        get { return TypeKey; }
    }
} 
```

这是有效负载类：

```
public class FriendPayload
{
    public string Status { get; set; }
} 
```

这应该允许您将属性添加到您的关系中。从那里，您可以使用 Cypher 根据关系中的属性获取特定的关系/节点。您还可以使用 Cypher 来更新关系属性，如下所示：

```
START n=node(1) MATCH n-[r:FRIEND]-e WHERE e.Name = "Bob" SET r.Status = "ACCEPTED"; 
```

注意：您还可以对起始节点使用基于索引的查找。

我将尝试在我的博客上为 Neo4jClient 编写一个基本的入门教程，将我的所有发现汇总到一个地方，因为我已经弄清楚了基础知识。

# css - 强制 Div 低于另一个并防止重叠

> ID：14116569
> 
> 赞同：10
> 
> 时间：2013-01-02T03:31:38.377
> 
> 标签：css, layout, html

我有两个 Div 元素。第一个应该是屏幕的 100% 高度和宽度。我希望第二个 Div 的宽度为 100%，但高度可变，具体取决于内容并开始内联（低于第一个）。所以全屏是 Div 1，你必须向下滚动才能看到 Div 2。但是我尝试过的所有内容都重叠。

```
<div style="background-color:red;height:100%;width:100%;left:0px;top:0px"></div>
<br/>
<div style="width:100%;position:relative;background-color:yellow">
      <br/>test<br/>test<br/>test<br/>test<br/>test<br/>test<br/>test<br/>test<br/>test<br/>test<br/>test<br/>test<br/>test<br/>..
</div> 
```

[​http://jsfiddle.net/FBJ8h/](http://jsfiddle.net/FBJ8h/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-02T03:39:46.673

因为

```
position:absolute 
```

使 div 不被占用，这意味着其他元素在对齐和定位时不会“看到”它们。

用这个：

```
html,body {
    height:100%;
}
div.div2 {
    top:100%;
} 
```

[JSFiddle](http://jsfiddle.net/FBJ8h/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T03:37:18.397

首先，您必须将 html- 和 body-tag 设置为 height: 100%：

```
html, body {
    height:100%;
} 
```

第二件事，你必须改变的是将第一个 div 的位置设置为“相对”而不是“绝对”（就像在 jsfiddle 文件中一样）：

```
position: relative; 
```

我希望它有帮助...

编辑：并删除`<br>`两个 div 之间的 -Tag - 如果没有，它们之间会有一个白色的间隙......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-06T03:35:04.397

使用应该使用 "clear:both" ...在 div 标签之间添加以下内容

```
<style>
.clearfix{
clear:both;
}
</style>
<body>
<div class="clearfix"></div>
<body> 
```

# java - Java多线程编程——原子操作

> ID：14116572
> 
> 赞同：3
> 
> 时间：2013-01-02T03:31:54.443
> 
> 标签：java, multithreading, concurrent-programming

我正在学习使用 Java 进行多线程编程。这是我得到的一个困惑。

```
class Cache<K, V> {
private ConcurrentMap<K, V> cache;
private ConcurrentLinkedQueue<K> lru;

public Cache () {
    // initiate cache and lru
}

public put (K key, V value) {
    // some pre-processing
    synchronized (this) {
        cache.put(key, value);
        lru.add(key);
    }
    // some post-processing
}

} 
```

这是一些非常简单的缓存，其中包含最近最少使用的记录 (lru)。显然我需要使这两个操作原子化。否则很可能缓存和 lru 的状态会不同。

现在假设我想要一个定时器任务来清理缓存，比如说它会清理一半的缓存。我的问题是我上面的代码是否确保这两个操作（放置缓存和添加 lru）对于清理任务来说是原子的？我可以做如下的事情：

```
class CleanTask {
    Cache cache;   // the reference of Cache
    public void run () {
        // some pre-processing
        for (int i = 0; i < n; i++) {   // Just suppose I need remove n element
            synchronized (XXX) {
                cache.getCache().remove(cache.getLru().poll());
            }
        }
    }
} 
```

我应该在XXX里放什么？

非常感谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T03:52:14.303

> 我的问题是我上面的代码是否确保这两个操作（放置缓存和添加 lru）对于清理任务来说是原子的？

是（假设清洁任务在不同的线程中）

> 我应该在XXX里放什么？

相同的缓存对象例如：`synchronized (cache) {`同步应该发生在同一个锁（对象）上

如果它们对您的情况有用，您还可以探索 java 中的其他原子类：[atomic package](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/package-summary.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T03:52:11.370

在您的情况下，您将在 XXX 处同步**缓存，但是，我建议您将同步****put**和**getLru**方法作为替代方法。

# sharepoint - 如何在 C# 中设置任务优先级

> ID：14116573
> 
> 赞同：0
> 
> 时间：2013-01-02T03:31:59.933
> 
> 标签：sharepoint, sharepoint-workflow

我正在向我的组织编写 SharePoint 工作流，我需要在其中创建工作流任务并将其优先级设置为给定值（高、中和低）。我可以更改所有其他任务属性，例如“分配给”或“预期日期”，但不能更改“优先级”。请让我知道是否有人有任何解决方案。

问候， Pradeep

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T03:34:28.663

谢谢大家，但这是我的错误。当我在下拉菜单中设置它的值时，一切正常。

# php - 功能在 Wordpress 中不起作用

> ID：14116575
> 
> 赞同：0
> 
> 时间：2013-01-02T03:32:02.727
> 
> 标签：php, wordpress

我有一个由成员在这里创建的函数。它在 PHP 文件中单独工作。但是，一旦我尝试在我的 Wordpress 模板中使用它（准确地说是 single.php），它就会停止工作（无论如何它都会输出 false）。当我试图在我的模板的 single.php 中使用它时，我已经包含了原始代码和代码。将不胜感激任何帮助。谢谢。

独奏：

```
<?php
// Normalize time to count from 0
function timeOfWeek($time) {
  if (!is_int($time)) $time = strtotime($time) ;
  $secondsInWeek = (7 * 24 * 3600);
  return (($time - strtotime('monday 00:00')) % $secondsInWeek + $secondsInWeek) % $secondsInWeek;
}

function isOpen($opened, $time) {
  $time = timeOfWeek($time);

  foreach ($opened as $openday) {
    list($open, $close) = $openday;

    if ($open < $close) { 
      if ($time > $open && $time < $close) return true;
    } else {
      if ($time > $open || $time < $close) return true; // Special case sunday -> monday
    }
  }

  return false;
}

$opened = array();
$opened[] = array(timeOfWeek('monday 10:00'), timeOfWeek('monday 23:00'));
$opened[] = array(timeOfWeek('tuesday 10:00'), timeOfWeek('tuesday 23:00'));
$opened[] = array(timeOfWeek('wednesday 10:00'), timeOfWeek('wednesday 23:00'));
$opened[] = array(timeOfWeek('thursday 10:00'), timeOfWeek('thursday 23:00'));
$opened[] = array(timeOfWeek('friday 10:00'), timeOfWeek('saturday 01:00'));
$opened[] = array(timeOfWeek('saturday 10:00'), timeOfWeek('sunday 01:00'));
$opened[] = array(timeOfWeek('sunday 10:00'), timeOfWeek('monday 01:00'));

$open = isOpen($opened, time());
var_dump($open);
?> 
```

在 single.php 中：

```
<?php if ( have_posts() ) while ( have_posts() ) : the_post(); ?>
    <?php if (et_get_option('lucid_integration_single_top') <> '' && et_get_option('lucid_integrate_singletop_enable') == 'on') echo (et_get_option('lucid_integration_single_top')); ?>

    <article id="post-<?php the_ID(); ?>" <?php post_class('entry clearfix'); ?>>
        <?php 
            $index_postinfo = et_get_option('lucid_postinfo2');
            if ( $index_postinfo ){
                echo '<p class="meta-info">';
                et_postinfo_meta( $index_postinfo, et_get_option('lucid_date_format'), esc_html__('0 comments','Lucid'), esc_html__('1 comment','Lucid'), '% ' . esc_html__('comments','Lucid') );
                echo '</p>';
            }
        ?>

        <?php
            global $wp_embed;
            $thumb = '';
            $et_full_post = get_post_meta( $post->ID, '_et_full_post', true );
            $width = apply_filters('et_blog_image_width',630);
            if ( 'on' == $et_full_post ) $width = apply_filters( 'et_single_fullwidth_image_width', 960 );
            $height = apply_filters('et_blog_image_height',210);
            $classtext = '';
            $titletext = get_the_title();
            $thumbnail = get_thumbnail($width,$height,$classtext,$titletext,$titletext,false,'Singleimage');
            $thumb = $thumbnail["thumb"];

            $et_video_url = get_post_meta( $post->ID, '_et_lucid_video_url', true );
        ?>
        <?php if ( '' != $thumb && 'on' == et_get_option('lucid_thumbnails') ) { ?>
            <div class="post-thumbnail">
                <?php
                    if ( 'video' == get_post_format( $post->ID ) && '' != $et_video_url ){
                        $video_embed = $wp_embed->shortcode( '', $et_video_url );

                        $video_embed = preg_replace('/<embed /','<embed wmode="transparent" ',$video_embed);
                        $video_embed = preg_replace('/<\/object>/','<param name="wmode" value="transparent" /></object>',$video_embed); 
                        $video_embed = preg_replace("/height=\"[0-9]*\"/", "height=350", $video_embed);
                        $video_embed = preg_replace("/width=\"[0-9]*\"/", "width={$width}", $video_embed);

                        echo $video_embed;
                    } else {
                        print_thumbnail($thumb, $thumbnail["use_timthumb"], $titletext, $width, $height, $classtext);
                    }
                ?>
            </div>  <!-- end .post-thumbnail -->
        <?php } ?>

        <div class="post_content clearfix">
            <h1 class="title"><?php the_title(); ?></h1>
            <?php
// Normalize time to count from 0
function timeOfWeek($time) {
  if (!is_int($time)) $time = strtotime($time) ;
  $secondsInWeek = (7 * 24 * 3600);
  return (($time - strtotime('monday 00:00')) % $secondsInWeek + $secondsInWeek) % $secondsInWeek;
}

function isOpen($opened, $time) {
  $time = timeOfWeek($time);

  foreach ($opened as $openday) {
    list($open, $close) = $openday;

    if ($open < $close) { 
      if ($time > $open && $time < $close) return true;
    } else {
      if ($time > $open || $time < $close) return true; // Special case sunday -> monday
    }
  }

  return false;
}

$opened = array();
$opened[] = array(timeOfWeek('monday 10:00'), timeOfWeek('monday 23:00'));
$opened[] = array(timeOfWeek('tuesday 10:00'), timeOfWeek('tuesday 23:00'));
$opened[] = array(timeOfWeek('wednesday 10:00'), timeOfWeek('wednesday 23:00'));
$opened[] = array(timeOfWeek('thursday 10:00'), timeOfWeek('thursday 23:00'));
$opened[] = array(timeOfWeek('friday 10:00'), timeOfWeek('saturday 01:00'));
$opened[] = array(timeOfWeek('saturday 10:00'), timeOfWeek('sunday 01:00'));
$opened[] = array(timeOfWeek('sunday 10:00'), timeOfWeek('monday 01:00'));

$open = isOpen($opened, time());
var_dump($open);
?>
            <?php the_content(); ?>
            <?php wp_link_pages(array('before' => '<p><strong>'.esc_attr__('Pages','Lucid').':</strong> ', 'after' => '</p>', 'next_or_number' => 'number')); ?>
            <?php edit_post_link(esc_attr__('Edit this page','Lucid')); ?>
        </div>  <!-- end .post_content -->
    </article> <!-- end .entry -->

    <?php if (et_get_option('lucid_integration_single_bottom') <> '' && et_get_option('lucid_integrate_singlebottom_enable') == 'on') echo(et_get_option('lucid_integration_single_bottom')); ?>

    <?php 
        if ( et_get_option('lucid_468_enable') == 'on' ){
            if ( et_get_option('lucid_468_adsense') <> '' ) echo( et_get_option('lucid_468_adsense') );
            else { ?>
               <a href="<?php echo esc_url(et_get_option('lucid_468_url')); ?>"><img src="<?php echo esc_url(et_get_option('lucid_468_image')); ?>" alt="468 ad" class="foursixeight" /></a>
    <?php   }    
        }
    ?>

    <?php 
        if ( 'on' == et_get_option('lucid_show_postcomments') ) comments_template('', true);
    ?>
<?php endwhile; // end of the loop. ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T03:48:19.157

首先，您应该将函数定义移到 while 循环之外，因为一旦有超过 1 个帖子，脚本就会中断。接下来，确保您的服务器时区正确。其他一切都很好。

# objective-c - 如何在Objective-C中访问另一个数组中的数组索引

> ID：14116579
> 
> 赞同：0
> 
> 时间：2013-01-02T03:32:13.817
> 
> 标签：objective-c, xcode, indexing, nsarray

我有这个数组，我想访问另一个数组中的第一个索引。

```
(
    (
        1021,
        "String1,
        "<null>",
        "name1, name2",
        P,
        "String2",
        "Link1",
        "String3",
        "String4"
    ),
    (
        1025,
        "String1",
        "<null>",
        "name1, name2"
        P,
        "String2",
        "Link1",
        "String3",
        "String4"
    )
) 
```

我尝试使用此代码进行 NSLog：

```
NSLog(@"ID: %@", [[array objectAtIndex:0] objectAtIndex:0]); 
```

但它不起作用。它给了我一个错误说：

```
-[__NSCFString objectAtIndex:]: unrecognized selector sent to instance 
```

我只想在第一个数组的第一个数组中记录值 1021。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T03:40:03.790

您面临的问题是其中一个`array`或第一个元素`array`是一个字符串。

将其分开并使用调试器单步执行，以确保正确加载和访问数组：

```
NSArray *array = [NSArray /* load from somwhere */];
NSLog(@"%@", array);

NSArray *innerArray = [array objectAtIndex:0];
NSLog(@"%@", innerArray);

NSNumber *objectId = [innerArray objectAtIndex:0];
NSLog(@"%@", objectId); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T03:40:22.633

此错误表明其中的第一个对象`array`是`NSString`.

是否有任何代码向所述数组添加字符串？

如果第一个对象`array`是字典，那么您的代码就可以了。

# android - 将字符串响应转换为 json 数组时出错 - android

> ID：14116580
> 
> 赞同：0
> 
> 时间：2013-01-02T03:32:18.593
> 
> 标签：android, json, string, response

我正在使用 ASYNC 任务通过 HTTPPost 与 Internet 进行交互......这是 java 代码

```
private void viewMyprofile(String username) {
    System.out.println("in view my profile");
    class HttpGetAsyncTask extends AsyncTask<String, Void, String>{
        @Override
        protected String doInBackground(String... params) {
            String lUsername = params[0];

            HttpClient client = new DefaultHttpClient();
            HttpConnectionParams.setConnectionTimeout(client.getParams(), 10000); //Timeout Limit
            HttpResponse response;
           // JSONObject json = new JSONObject();
            System.out.println("in do in background");
            try{
                HttpPost post = new HttpPost(URL);
                List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
                nameValuePairs.add(new BasicNameValuePair("username", lUsername));
                nameValuePairs.add(new BasicNameValuePair("stringdata", "Hi"));
                post.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                response = client.execute(post);
                /*Checking response */
                if(response!=null){
                    InputStream in = response.getEntity().getContent(); //Get the data in the entity 
                    jsonResponse = convertStreamToString(in);
                    System.out.println("this is my response = " + jsonResponse);
                    return jsonResponse;
                }
            }
            catch(Exception e){
                e.printStackTrace();
            }
            return null ;
        }

        @Override
        protected void onPostExecute(String result) {
            super.onPostExecute(result);

            try {
                JSONArray jsonArray = new JSONArray(result);
                Log.i(MyProfile.class.getName(),
                    "Number of entries " + jsonArray.length());
                for (int i = 0; i < jsonArray.length(); i++) {
                  JSONObject jsonObject = jsonArray.getJSONObject(i);
                  Log.i(MyProfile.class.getName(), jsonObject.getString("password"));
                  textView.setText(jsonObject.getString("password"));
                }
              } catch (Exception e) {
                e.printStackTrace();
              }
        }
    }

    HttpGetAsyncTask httpGetAsyncTask = new HttpGetAsyncTask();
    // Parameter we pass in the execute() method is relate to the first generic type of the AsyncTask
    // We are passing the connectWithHttpGet() method arguments to that
    httpGetAsyncTask.execute(username);
    System.out.println("after execution call");
}

public static String convertStreamToString(InputStream is) throws Exception {
    BufferedReader reader = new BufferedReader(new InputStreamReader(is));
    StringBuilder sb = new StringBuilder();
    String line = null;

    while ((line = reader.readLine()) != null) {
        sb.append(line);
    }

    is.close();

    return sb.toString();
} 
```

}

这是两条 logcat 线...

```
01-02 08:51:31.789: I/System.out(21879): this is my response =   {"0":"1","id":"1","1":"205041316950ae6ca20e6ac8.73557365","userid":"205041316950ae6ca20e6ac8.73557365","2":"Moderators","name":"Moderators","3":"ADMIN","username":"ADMIN","4":"umairisback","password":"umairisback","5":"omerjerk@gmail.com","email":"omerjerk@gmail.com","6":"1234567890","phone":"1234567890","7":"2012","batch":"2012","8":"","stream":"","9":"15\/08\/1994","dob":"15\/08\/1994","10":"on the PC!!!    \\m\/","address":"on the PC!!!    \\m\/","11":"Delhi Technological University","college":"Delhi Technological University","12":"Web Developer at LudlowCastle.co.in","occupation":"Web Developer at LudlowCastle.co.in","13":"School tym was totally awesome...\r\n\r\n Still miss it a lot ... :) ....","memories":"School tym was totally awesome...\r\n\r\n Still miss it a lot ... :) ...."}
01-02 08:51:31.809: W/System.err(21879): org.json.JSONException: Value {"stream":"","phone":"1234567890","college":"Delhi Technological University","userid":"205041316950ae6ca20e6ac8.73557365","13":"School tym was totally awesome...\r\n\r\n Still miss it a lot ... :) ....","password":"umairisback","11":"Delhi Technological University","12":"Web Developer at LudlowCastle.co.in","id":"1","username":"ADMIN","name":"Moderators","occupation":"Web Developer at LudlowCastle.co.in","3":"ADMIN","2":"Moderators","10":"on the PC!!!    \\m\/","1":"205041316950ae6ca20e6ac8.73557365","0":"1","7":"2012","address":"on the PC!!!    \\m\/","6":"1234567890","email":"omerjerk@gmail.com","batch":"2012","5":"omerjerk@gmail.com","dob":"15\/08\/1994","4":"umairisback","9":"15\/08\/1994","memories":"School tym was totally awesome...\r\n\r\n Still miss it a lot ... :) ....","8":""} of type org.json.JSONObject cannot be converted to JSONArray 
```

如您所见，我在将响应字符串转换为 json 数组时遇到错误...请帮助我...

PS我是新手...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T03:47:34.200

根据您的输出日志，您没有得到一个数组，而是得到一个 JSONObject。所以就...

```
try {
     JSONObject jsonObject = new JSONObject(result);
     Log.i(MyProfile.class.getName(), jsonObject.getString("password"));
     textView.setText(jsonObject.getString("password"));
} catch (Exception e) {
     e.printStackTrace();
} 
```

应该记录并将 textView 的文本设置为 umairisback

# imagemagick - 在 mac lion 上安装 rmagick

> ID：14116581
> 
> 赞同：1
> 
> 时间：2013-01-02T03:32:19.547
> 
> 标签：imagemagick, rmagick

找到很多关于它的帖子并按照他们所说的但对我不起作用。

我做了什么

酿造安装 imagemagick 宝石安装 rmagick

它向我显示以下错误

```
checking for Ruby version >= 1.8.5... yes
checking for /usr/local/bin/gcc-4.2... yes
checking for Magick-config... yes
checking for ImageMagick version >= 6.3.5... yes
checking for HDRI disabled version of ImageMagick... yes
checking for stdint.h... yes
checking for sys/types.h... yes
checking for wand/MagickWand.h... yes
checking for InitializeMagick() in -lMagickCore... no
checking for InitializeMagick() in -lMagick... no
Can't install RMagick 2.12.0\. Can't find the ImageMagick library or one of the dependent libraries. Check the mkmf.log file for more detailed information. 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T12:39:05.793

在这里你会找到答案。我有同样的问题，这完美解决了！

[Rails 和 OS X：如何安装 rmagick？](https://stackoverflow.com/questions/13963404/rails-and-os-x-how-to-install-rmagick)

# regex - 正则表达式提取字符串中的增量数字

> ID：14116583
> 
> 赞同：-1
> 
> 时间：2013-01-02T03:32:40.093
> 
> 标签：regex

我正在使用多文件重命名工具，它可以根据正则表达式模式重命名文件名。例如，我有这样的文件名：

```
Otrazenie.(01.serija.iz.12).2011.XviD.SATRip.RiperAM.avi
Otrazenie.(02.serija.iz.12).2011.XviD.SATRip.RiperAM.avi
Otrazenie.(03.serija.iz.12).2011.XviD.SATRip.RiperAM.avi 
```

或者像这些：

```
Beauty.and.the.Beast.S01E01.LostFilm.TV.avi
Beauty.and.the.Beast.S01E02.LostFilm.TV.avi
Beauty.and.the.Beast.S01E03.LostFilm.TV.avi 
```

在这里，我们在字符串中只有数字会发生变化（01,02,03...）

如何构建正则表达式以从字符串中获取该数字？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-02T04:47:28.370

并非总是可以预测将基于单个文件更改的系列中的值。例如，想象一下从 24 部电视剧的第 2 季中提取剧集编号。文件名中有三个可能的系列值`24_02_07.avi`。`24_02_08.avi`在显示下一个文件名 ( )之前，尚不清楚哪个数字是系列值。

考虑到这一点，您可以运行以下 bash 脚本。它首先在当前目录的文件中找到最长的公共前缀。然后它会在每个文件名中查找前缀后面的数字：

```
set -- *
files=$#

prefix=$1
while [ -n "$prefix" ]; do
  set -- $prefix*
  [ $# -eq $files ] && break
  prefix=${prefix%?}
done

ls | sed -e "s/$prefix\([0-9]*\).*/\1/g" | sort -nu 
```

我假设由于没有提到语言，我们在命令行上。

前缀是使用[Chris FA Johnson](http://cfajohnson.com/)的解决方案来[找到文件名中最长的公共子字符串的](http://www.unix.com/shell-programming-scripting/93124-finding-longest-common-substring-among-filenames.html)。

# python - python效率哪个更适合设置在常量上下文中使用的变量

> ID：14116586
> 
> 赞同：2
> 
> 时间：2013-01-02T03:32:58.703
> 
> 标签：python, python-3.x, python-2.7, performance

解决方案：Python 在设置时计算变量的值，而变量只是一个指针。我会说第一个选项更清楚，因为运行时的唯一区别是 Python 需要多长时间才能将值转换为二进制存储 - 最小。

我感谢所有回复的人。

在正在编写的模块中，我需要为简单的开/关开关定义大量常量。这显然很容易作为二进制字符串完成，但是当我定义 constnts 时，下面的哪个方法对运行时速度和运行时内存使用的影响较小。

一：

```
THIS_VAR_0 = 2**0
THIS_VAR_1 = 2**1
.
.
.
This_Var_N = 2**N 
```

或者，两个：

```
THIS_VAR_0 = 0
THIS_VAR_1 = 1
.
.
.
This_Var_N = 536870912 # 2**30 
```

编辑：他们不需要计算不止一次。虽然 python 可能没有本机只读常量，但我正在编写这部分代码以使用这些类似常量。`wx.ID_ANY`（与, 和`wx.DEFAULT_FRAME`类型的想法相同）

另一种说法是：是在第一次遇到（设置）变量时完成计算，然后是用于查找的指针，还是指向公式的指针，并且在每次遇到变量时计算公式？

注意：我需要基于 Python 2.7 的此信息，但对于 Python 3.X 的响应（如果不相同）也将不胜感激。如果您的回答仅适用于 2 或 3，请这样说。（我还没有深入研究 3，但计划好了，所以未来的使用知识也很好 ;-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T03:45:38.993

除非您重置它们，否则它们只会被评估一次。如果你用评估来做数学，你会为数学付出一次代价，但在第一次阅读之后，它们会是相同的。

如果您真的希望每次都对它们进行评估，您可以用 lambdas 替换它们，但您必须用大括号调用它们：

```
pi = lambda : 3.14159265359
two_pi = lambda : 2 * pi()

around = two_pi() * r # note braces 
```

FWIW Python 没有创建只读变量的本机方式，因此这里的“常量”是一个约定，而不是基本事实。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T03:39:29.297

Python 在设置时计算变量的值，而变量只是一个指针。我会说第一个选项更清楚，因为运行时的唯一区别是 Python 需要多长时间才能将值转换为二进制存储 - 最小。

这是一般的Python，顺便说一句。

另外，您说您需要定义很多常量，那么为什么不使用 for 循环和 dict：

```
THIS_VAR = {}
for i in range(n):
    THIS_VAR[i] = 2 ** i 
```

然后您可以通过 THIS_VAR[i] 访问这些值。它比手动定义每个常量要快得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T04:44:45.670

Python 进行常量折叠。

```
>>> import dis
>>> def function():
...     return 2**21
... 
>>> dis.disassemble(function.__code__)
  2           0 LOAD_CONST               3 (2097152) 
              3 RETURN_VALUE 
```

`2**21`编译模块后，和之间将没有任何区别`2097152`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T23:04:47.923

比使用运算符更有效`**`或`pow()`可能使用`<<`运算符。然后您的代码可以替换为：

```
THIS_VAR_0 = 1<<0             # equal to 2**0; actually, it is 1
THIS_VAR_1 = 1<<1             # 2 
...
This_Var_N = 1<<N             # 2**N 
```

[Python 3](http://docs.python.org/3.3/library/stdtypes.html#bitwise-operations-on-integer-types)的文档说：

> 左移 n 位相当于乘以 pow(2, n)**而不进行溢出检查**。

对于[Python 2.7，文档的同一部分](http://docs.python.org/2.7/library/stdtypes.html#index-19)说：

> 左移 n 位相当于乘以 pow(2, n)。如果结果超出普通整数的范围，则返回一个长整数。

...即它没有提到溢出检查。无论如何，它对两个版本的 Python 产生相同的结果。

移位运算符更自然地用于定义像 C 系列语言中的常量。对于处理器的*本机整数*，该操作非常快。无论如何，使用显式数字的情况也是很常见的，这应该是最有效的。（如果你真的`timeit`，请发布结果。）如果没有解释，它只会更不可读，更难理解。无论如何，您可以使用 shift 运算符添加注释：

```
THIS_VAR_0 = 0               # default
THIS_VAR_1 = 1               # 1 << 0
...
This_Var_N = 536870912       # 1 << 30 
```

**当心：**您有问题中的错误。如果`THIS_VAR_0`应该为零，则不能生成为`2**0`。

# localhost - 子站点上的 Wordpress 多站点重定向循环错误，而不是主站点

> ID：14116587
> 
> 赞同：1
> 
> 时间：2013-01-02T03:33:09.950
> 
> 标签：localhost, wamp, wordpress, redirect-loop

我正在使用 WAMP 2.2 和 WP 3.5 在本地构建一个 WordPress 多站点。这是一个全新的 WP 安装，并使用新站点的子目录。我可以查看网络仪表板和主博客仪表板和站点。我可以查看子站点，但是当我尝试访问他们的仪表板时，我收到 310/redirect loop 错误消息。

所以这些 URL 工作正常：

```
http://localhost/www.bloggersofhealth.org/

http://localhost/www.bloggersofhealth.org/wp-admin/

http://localhost/www.bloggersofhealth.org/areliaj/ 
```

但这一次超时并给出重定向循环错误：

```
http://localhost/www.bloggersofhealth.org/areliaj/wp-admin/ 
```

问题站点都是几天前创建的，所以为了确保我没有对这些站点进行一些更改，我刚刚创建了一个新的测试子站点，它也有同样的问题。

我读过其他人有这个问题，我已经验证

*   检查 Apache 重写模块
*   我检查了博客和选项表，都将 localhost 显示为域和正确的文件路径，并且 URL 中没有 www
*   我在另一篇文章中读到添加 www 解决了这个问题，但我知道你不能使用 localhost 做到这一点
*   我检查了 htacess 有

    ```
    RewriteEngine On
    RewriteBase /www.bloggersofhealth.org/
    RewriteRule ^index\.php$ - [L] 
    ```

*   我检查了 wpconfig 有

    ```
    define('SUBDOMAIN_INSTALL', false);
    define('DOMAIN_CURRENT_SITE', 'localhost');
    define('PATH_CURRENT_SITE', '/www.bloggersofhealth.org/'); 
    ```

我是 WordPress、WAMP 和 PHP 的新手，但我会热切地接受所提供的任何建议，因为我想精通这三者。

# javascript - 从 DOM 中移除后重新渲染/交换模板

> ID：14116588
> 
> 赞同：0
> 
> 时间：2013-01-02T03:33:26.933
> 
> 标签：javascript, html, dom, meteor

目前我有以下布局：

```
<div id="main">
    {{> my_template}} 
</div> 
```

现在稍后我有一个选择器`$("#main")`，我用它`html(..)`来更改内容以显示集合中的记录。

所以现在可能看起来像这样：

```
<div id="main">
    <h1>A title...</h1>
    <p>some text</p>
</div> 
```

或者可能是这样（如果我知道如何）：

```
<div id="main">
    {{> another_template}} 
</div> 
```

这样做的正确方法是什么，以便我可以`my_template`为其他模板重新渲染/换出？我必须使用`Meteor.render`吗？我怎样才能做到这一点？

**编辑：**
我需要更多说明如何使用只有 HTML 而没有反应性模板变量的模板来执行此操作。如何使用 启用/禁用它`Session`？

```
<template name="newForm">
    <form>
        <input..>
        <textarea..></textarea>
        <!-- more fields.. -->        
    </form> 
</template> 
```

我将如何使用`Template.newForm`来隐藏这个？我还应该`Template`在这种情况下使用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T03:36:59.380

您可以将所有备用模板彼此相邻放置：

```
<div id="main">
    {{> my_template}} 
    {{> another_template}}
    {{> yet_another_template}}
</div> 
```

并且只需确保在您的代码中一次只显示其中一个。例如：

```
Template.my_template = function() {
  if (Session.equals("template_to_show", "my_template")) {
    return SomeCollection.find();
  }
}
Template.another_template = function() {
  if (Session.equals("template_to_show", "another_template")) {
    return SomeOtherCollection.find();
  }
}
// etc 
```

# javascript - 防止拖动时触发点击事件

> ID：14116599
> 
> 赞同：2
> 
> 时间：2013-01-02T03:35:43.603
> 
> 标签：javascript, jquery, jquery-ui, onclick, draggable

> **可能重复：**
> [使用 jQuery 拖放防止单击事件](https://stackoverflow.com/questions/1771627/preventing-click-event-with-jquery-drag-and-drop)

假设有一个相册滑块。用户可以拖动照片滑块并在单击照片时选择要查看的照片。问题是单击事件与拖动事件重叠。这意味着，当用户单击要拖动的照片时，也会发生单击事件。谢谢

```
 //slider is draggable
    $('#slider').draggable({axis: "x"});

    //slider photo click event
    $('#slider li').click(function() {
        page_index = $(this).attr('class').substring(4);
        tmp = parseInt(page_index);
        $('#book').turn('page', tmp);
        close_overlay();
    }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T03:42:39.207

我认为这个问题是由事件冒泡引起的。试试我的解决方案

```
function cancelBubbleEvent(e) {
    if (e) {
         e.stopPropagation();
    }
    else {
         window.event.cancelBubble = true;
    }
}

//slider is draggable
$('#slider').draggable({axis: "x"});

//slider photo click event
$('#slider li').click(function(e) {
    page_index = $(this).attr('class').substring(4);
    tmp = parseInt(page_index);
    $('#book').turn('page', tmp);
    close_overlay();

    // cancel event bubbling
    cancelBubbleEvent(e);
}) 
```

# plugins - cakePHP 2.0 cakedc 用户插件 - 似乎已安装但无法访问

> ID：14116600
> 
> 赞同：2
> 
> 时间：2013-01-02T03:36:24.933
> 
> 标签：plugins, cakephp-2.0, cakedc

我知道我应该能够通过 [mydomain.com]/users/[controller] 使用用户插件，例如 mydomain.com/users/login 或 mydomain.com/users/users/login，但出现错误：在此服务器上找不到请求的地址“/users/users/login”。

在 UsersController.php 中似乎允许登录：protected function _setupAuth() {$this->Auth->allow('add', 'reset', 'verify', 'logout', 'view', 'reset_password', '登录'）;

插件已加载，因为蛋糕模式外壳直到它才起作用。

AppController 的前置过滤器：

```
public $components = array(
    'Session',
            'Auth'
    );

 public function isAuthorized($user) {

     return true;
 }

function beforeFilter() {
    $this->Auth->allow('index');
            $this->set('logged_in', $this->Auth->loggedIn());
            $this->set('current_user', $this->Auth->user());
            $this->Auth->authorize = 'controller';
            $this->Auth->fields = array('username' => 'email', 'password' => 'passwd');
            $this->Auth->loginAction = array('plugin' => 'users', 'controller' => 'users', 'action' => 'login', 'admin' => false);
            $this->Auth->loginRedirect = '/';
            $this->Auth->logoutRedirect = '/';
            $this->Auth->authError = __('Sorry, but you need to login to access this location.', true);
            $this->Auth->loginError = __('Invalid e-mail / password combination.  Please try again', true);
            $this->Auth->autoRedirect = true;
            $this->Auth->userModel = 'User';
            $this->Auth->userScope = array('User.active' => 1);
            if ($this->Auth->user()) {
                $this->set('userData', $this->Auth->user());
            $this->set('isAuthorized', ($this->Auth->user('id') != ''));
    } 
} 
```

}

我写的其他页面（不是插件）似乎工作正常。

它带有一个UsersAppController.php ...

我错过了什么？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T03:36:01.063

As documentation, you must load the plugin on this way

```
CakePlugin::load('Users', array('routes' => true)); 
```

that means your routes must be

```
Router::connect('/users', array('plugin' => 'users', 'controller' => 'users'));
Router::connect('/users/index/*', array('plugin' => 'users', 'controller' => 'users'));
Router::connect('/users/:action/*', array('plugin' => 'users', 'controller' => 'users'));
Router::connect('/users/users/:action/*', array('plugin' => 'users', 'controller' => 'users'));
Router::connect('/login/*', array('plugin' => 'users', 'controller' => 'users', 'action' => 'login'));
Router::connect('/logout/*', array('plugin' => 'users', 'controller' => 'users', 'action' => 'logout'));
Router::connect('/register/*', array('plugin' => 'users', 'controller' => 'users', 'action' => 'add')); 
```

Then for call login just go

```
/login 
```

Best Regards

# jquery - 找不到寻呼机 Jqgrid 错误

> ID：14116603
> 
> 赞同：0
> 
> 时间：2013-01-02T03:36:46.023
> 
> 标签：jquery, asp.net, asp.net-mvc, jquery-plugins, jqgrid

我正在尝试将 jqgrid 集成到我的应用程序中，但出现寻呼机未找到错误。

这里是进口。

```
 <link rel="stylesheet" type="text/css" href="/Scripts/themes/steel/grid.css" title="steel" media="screen" />
    <link href="/Scripts/themes/jqModal.css" rel="stylesheet" type="text/css" />
<script src="/Scripts/Lib/jquery-1.4.2.js" type="text/javascript" language="javascript"></script>  
        <script src="/Scripts/Lib/jquery.blockUI.js" type="text/javascript"></script>
        <script src="/Scripts/Lib/jquery.bgiframe.js" type="text/javascript" language="javascript"></script>  

    <script src="/Scripts/Lib/js/grid.locale-en.js" type="text/javascript"></script>

    <script src="/Scripts/Lib/jquery.jqGrid.js" type="text/javascript"></script>
    <script src="/Scripts/Lib/jquery.jqGrid.min.js" type="text/javascript"></script>

    <script src="/Scripts/Lib/js/jqModal.js" type="text/javascript"></script>
    <script src="/Scripts/Lib/js/jqDnR.js" type="text/javascript"></script> 
```

这是我的 .htm 文件

```
<body>
<div id="report-tab">
<h2>Customers List</h2>
    <table id="list" class="scroll" cellpadding="0" cellspacing="0" width="100%">
    </table>
     <div id="pager"></div>

    </div>
    </body> 
```

这是我的 report.js 文件代码

```
var ReportTab = function () {

    return {
        Init: function () {

            // jQuery(document).ready(function () {

            var test = $('#list');
            var Pager1 = $('#pager');
            test.jqGrid({
                Url: "/Home/GridData",
                datatype: 'json',
                mtype: 'GET',
                colNames: ['Id', 'Votes', 'Title'],
                colModel: [
          { name: 'Id', index: 'Id', width: 40, align: 'left' },
          { name: 'Votes', index: 'Votes', width: 40, align: 'left' },
          { name: 'Title', index: 'Title', width: 200, align: 'left'}],
                pager : $('#pager'),
                rowNum: 10,
                rowList: [5, 10, 20, 50],
                sortname: 'Id',
                sortorder: "desc",
                viewrecords: true,
                imgpath: '/scripts/themes/steel/images',
                caption: 'My first grid'
            }).navGrid(pager, { edit: false, add: false, del: false, refresh: true, search: false });
            //  });
        }
    }
} (); 
```

帮助解决问题

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:10:19.983

在底部分开你的寻呼机 - 而不是

```
navGrid(pager, { edit: false, add: false, del: false, refresh: true, search: false }); 
```

尝试

```
$('#list').jqGrid('navGrid', '#pager', {edit: false, add: false, del: false, refresh: true, search: false}); 
```

它可能归结为您查找“寻呼机”的方式，如第一行所示，您也可以尝试通过“#pager”与寻呼机来指示寻呼机是什么。

# r - 与条件连接

> ID：14116608
> 
> 赞同：-5
> 
> 时间：2013-01-02T03:38:11.560
> 
> 标签：r

我正在尝试将 1 个文件的某些行连接成 1 行，但它必须取决于内容并且在整个文件中是可变的。

我的数据文件的简化版本：

```
>xy|number|Name
ABCABCABC
ABCABCABC
ABCABCABC
ABC
>xy|number2|Name2
ABCABCABC
ABCABC
>xy|number3|Name3
ABCABCABC
ABCABCABC
ABCABCABC
ABCAB 
```

我希望它以这样的方式结束：（空格表示不同的列）

```
xy number Name ABCABCABCABCABCABCABCABCABCABC
xy number2 Name2 ABCABCABCABCABC
xy number3 Name3 ABCABCABCABCABCABCABCABCABCABCAB 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T04:41:08.443

这是与@MatthewLundberg 类似的解决方案，但`cumsum`用于拆分向量。

```
file<-scan('~/Desktop/data.txt','character')
h<-grepl('^>',file)
file[h]<-gsub('^>','',paste0(file[h],'|'),'')
l<-split(file,cumsum(h))
do.call(rbind,strsplit(sapply(l,paste,collapse=''),'[|]'))

#   [,1] [,2]      [,3]    [,4]                              
# 1 "xy" "number"  "Name"  "ABCABCABCABCABCABCABCABCABCABC"  
# 2 "xy" "number2" "Name2" "ABCABCABCABCABC"                 
# 3 "xy" "number3" "Name3" "ABCABCABCABCABCABCABCABCABCABCAB" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T03:54:05.990

```
dat <- read.table(file, header=FALSE)

h <- grep('^>', dat$V1)
m <- matrix(c(h, c(h[-1]-1, length(dat$V1))), ncol=2)
gsub('[|]', ' ', 
      sub('>', '',
        apply(m, 1, function(x)
          paste(dat$V1[x[1]], paste(dat$V1[(x[1]+1):x[2]], collapse=''))
             )
          )
     )
## [1] "xy number Name ABCABCABCABCABCABCABCABCABCABC"    
## [2] "xy number2 Name2 ABCABCABCABCABC"                 
## [3] "xy number3 Name3 ABCABCABCABCABCABCABCABCABCABCAB" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T07:12:55.703

如果您想要具有结果的 data.frame，请考虑以下事项：

```
raw <- ">xy|number|Name
ABCABCABC
ABCABCABC
ABCABCABC
ABC
>xy|number2|Name2
ABCABCABC
ABCABC
>xy|number3|Name3
ABCABCABC
ABCABCABC
ABCABCABC
ABCAB"

s <- readLines(textConnection(raw))        # s is vector of strings

first.line <- which(substr(s,1,1) == ">")  # find first line of set
N <- length(first.line)
first.line <- c(first.line, length(s)+1)   # add first line past end

# Preallocate data.frame (good idea if large)
d <- data.frame(X1=rep("",N), X2=rep("",N), X3=rep("",N), X4=rep("",N),
                stringsAsFactors=FALSE)

for (i in 1:N)
{
  w <- unlist(strsplit(s[first.line[i]],">|\\|"))  # Parse 1st line
  d$X1[i] <- w[2]
  d$X2[i] <- w[3]
  d$X3[i] <- w[4]
  d$X4[i] <- paste(s[ (first.line[i]+1) : (first.line[i+1]-1) ], collapse="")
}

d
  X1      X2    X3                               X4
1 xy  number  Name   ABCABCABCABCABCABCABCABCABCABC
2 xy number2 Name2                  ABCABCABCABCABC
3 xy number3 Name3 ABCABCABCABCABCABCABCABCABCABCAB 
```

我希望默认情况下 R 左对齐的字符串在 data.frame 中显示它们时。

# c++ - 我的班级被视为未声明的标识符

> ID：14116612
> 
> 赞同：0
> 
> 时间：2013-01-02T03:39:06.207
> 
> 标签：c++, visual-c++

我正在尝试编译一个不完整的程序，以尝试在事情变得太大之前捕获语法问题。话虽如此，我创建的类几乎都是完整的（一些成员函数被存根），并且包含在与主程序不同的文件中。Visual Studio 将它们识别为类（可以通过将鼠标悬停在它们上来查看）。

现在，问题是当我尝试编译它时，我收到以下错误：

```
1>d:\my programs\powerplay\powerplay\powerplay.hpp(99): error C2065: 'pp_player' : undeclared identifier
1>d:\my programs\powerplay\powerplay\powerplay.hpp(99): error C2146: syntax error : missing ')' before identifier 'player'
1>d:\my programs\powerplay\powerplay\powerplay.hpp(99): error C2182: 'resolve_current_space' : illegal use of type 'void' 
```

该文件的第 99 行是一个函数声明（其中 pp_player 是我的类中较大的一个，如前所述，VS 将其识别为一个类，无论如何在编辑器中）：

```
void resolve_current_space (pp_player& player); 
```

一切都正确 #include 'd，并且其他类没有任何问题。我试过注释掉这个函数（声明和定义），但是编译器阻塞了下一个试图使用这个类的对象作为参数的函数。我尝试在文件的前面实例化这个类的一个对象，虽然我没有得到完全相同的错误，但它或多或少等同于同一件事。

任何人都知道这可能是什么？如果需要，如果以上内容还不够，我可以提供我的全部资源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T04:01:48.580

`pp_player`在您尝试使用它时，没有声明范围内，简单明了，这就是该错误消息的含义。

因此，尽管您断言所有内容都已正确包含，但事实并非如此，或者您包含的内容`pp_player`在此之前没有声明或定义。

这是 C 和 C++ 中的一个基本原则，大多数东西（标准中有一些不需要这样做的边缘情况，例如标签）需要在使用前声明。

确保在文件的第 99 行*之前*`hpp`定义类型。

# variables - 什么时候使用实例变量比使用 let() 更有利？

> ID：14116613
> 
> 赞同：9
> 
> 时间：2013-01-02T03:39:10.570
> 
> 标签：variables, rspec

似乎有很多支持使用[`let()`](https://stackoverflow.com/questions/5359558/when-to-use-rspec-let)in rspec 来初始化变量。在哪些情况下可以使用实例变量（即`@name`）？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-02T07:12:17.130

出于以下几个原因，我总是更喜欢 let 实例变量：

*   实例变量在被引用时就存在了，这意味着如果您在实例变量拼写中犯了任何错误，那么当一个新的实例变量被初始化为 nil 时，它肯定会导致您遇到一些问题。但是如果你拼错了，你会得到 NameError 。

*   此外，您将在 before 块中初始化实例变量，这意味着每次运行规范时都会执行 before 块，即使该规范不使用您已初始化的那些实例变量。下面给出的例子；

    ```
    before do
      @user  = Factory :user
      @movie = Factory :movie
    end

    it "should have user" do
      @user.should eq User.first
    end

    it "should have movie" do
      @movie.should eq Movie.first
    end 
    ```

尽管所有规范都运行良好，但`@movie`在第一个规范中没有使用，`@user`在第二个规范中没有使用。

你也可以用 let 和 bang "!" `let!`,`let`被延迟评估，如果你不调用它永远不会被实例化，用于`let`定义 memoized helper ，而`let!`在每个方法调用之前强制评估。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-26T13:41:36.493

我赞成这个问题，但最后我自己回答了这个问题。

首先描述差异

使用该`let`方法时，它不会初始化变量，直到它在测试中被引用——这使得它不同于从`@instance variables`一开始就被初始化的变量。

总的来说没有太大的差异。`@instance variables`当您想确保`let`对象已初始化时使用。但另一方面，这也可以用 . 来完成`let!`，因此没有明显的理由使用`@instance variable`.

总而言之，对我来说，使用 over 有明显的**理由**，但没有明显的理由使用over`@instance variable``let``@instance variables``let!`

`@instance variables`需要更多时间来加载，并且使用它们可能会导致代码中不必要的复杂性，这可以通过使用`let`或来避免`let!`

你也可以看看这两个答案，也许它会给你更多的信息：

[何时使用 RSpec let()？](https://stackoverflow.com/questions/5359558/when-to-use-rspec-let)

[RSpec：let 和 before 块有什么区别？](https://stackoverflow.com/questions/5974360/rspec-difference-between-let-and-before-block)

# sockets - UDP套接字，选择多个客户端之一

> ID：14116616
> 
> 赞同：2
> 
> 时间：2013-01-02T03:39:45.330
> 
> 标签：sockets, udp

这就是我想要做的事情：
我有 4 个时钟和网络上有一台 PC。我（PC）想从任何时钟中获取时间。

想法：
每个时钟都使用UDP广播（广播，因为我不知道PC的IP）。PC 获得第一个数据集（时间），从那时起只查看来自该时钟的数据集。（不要被时钟之间的微小时差混淆）

Clocks=Clients:
- socket
- 绑定到端口 1234
- sendto(broadcast,'1234')

PC=Server
- socket
- 绑定到端口 1234
- recvfrom(data,client_addr) //从第一个接收到的数据中提取 client_addr
- connect(client_addr) //只从这个客户端接收数据
- recvfrom()

1：这是正确的方法吗？还是有更好的选择？

2：如果我想在 PC 上使用多个应用程序来获取时间数据，我该怎么办？我可以复制代码并使用它吗？我的印象是，端口 1234 现在被第一个获得绑定的应用程序阻止了。（我猜 SO_REUSEADDR 不会起作用，因为只有一个应用程序会获取数据，而我不知道它会是哪一个）

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T04:34:29.073

> 1：这是正确的方法吗？

是的。

> 还是有更好的选择？

想不出一个副手。

> 2：如果我想在 PC 上使用多个应用程序来获取时间数据，我该怎么办？

使用`SO_REUSEADDR`.

> 我可以复制代码并使用它吗？

是的。

> 我的印象是，端口 1234 现在被第一个获得绑定的应用程序阻止了。

不。

> （我猜 SO_REUSEADDR 不会起作用，因为只有一个应用程序会获取数据，而我不知道它会是哪一个）

猜错了。为什么要猜测呢？为什么不试试呢？比猜测更可靠，也比在这里提问更快。

# api - 指示无法更新用户名记录的正确值或状态代码是什么？

> ID：14116625
> 
> 赞同：0
> 
> 时间：2013-01-02T03:41:29.733
> 
> 标签：api, http, rest

我正在实施一项基本服务，将用户名添加到数据库中的用户记录中。服务首先检查用户名是否存在，如果它返回一些值来告诉客户端用户名已经被使用。如果用户名可用，它会更新用户记录并返回“OK”。在这个应用程序中，客户端是一个原生的 IOS 移动应用，服务器是 node.js。但这应该与这个问题无关。

对于这项服务，您建议我使用什么作为返回值？例如，成功时应该返回状态码 200？布尔值？自定义字符串？同样，对于不成功的情况，推荐的和习惯的返回值是多少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T04:10:59.743

对于成功的条件，我会返回 201，对于不成功的条件，我会返回 400 或 409。

希望有帮助！

布兰登

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T05:00:04.890

状态 201 旨在在创建某些资源时使用。因此，当您的用户被创建时，您应该设置状态代码 201，并在同一请求进行更新时将其设置为 200。此外，您可以返回创建/更新用户的 ID id。恕我直言，您应该将创建和更新作为单独的服务。
发生错误时，您可以使用适当的 4xx 错误（参考[链接](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)）。如果您的响应是 XML 或 JSON，请始终在您的响应中保留状态消息属性。您可以在其中设置适当的消息，移动应用程序可以根据您提供的 HTTP 状态代码检查此消息。

# mysql - 我需要加入三个表，将结果按一列分组，并显示另一列的最大值

> ID：14116627
> 
> 赞同：4
> 
> 时间：2013-01-02T03:42:03.410
> 
> 标签：mysql, sql, join, greatest-n-per-group

假设我有三张桌子：

*   `users`带有名称 ID
*   `emails`包含具有其电子邮件地址的行
*   `messages`包含包含其电子邮件日期和标题的行

当然，第二个和第三个表都可以使用用户 ID 与第一个表匹配。

我想要一个查询，它只返回*每个用户一次*，他们的电子邮件地址和他们*最近*消息的日期。

如果我使用这个：

```
SELECT name,email,title,date
FROM users
JOIN emails ON users.id = emails.user_id
JOIN messages ON messages.user_id = emails.user_id
group by name
order by date desc 
```

我没有收到最新消息，因为排序是在加入和分组之后发生的。我每人收到一封来自我的用户的电子邮件，这些电子邮件按日期排序。

这可以一次完成吗？我错过了什么？

Pastebin 用于您可以使用的虚拟数据库：http: [//pastebin.com/1x273aEe](http://pastebin.com/1x273aEe) - 实际数据库与此不完全相同，但问题相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T03:50:07.967

```
SELECT  a.*, b.*, c.*
FROM    users a
        INNER JOIN emails b
            ON a.ID = b.user_ID
        INNER JOIN messages c
            ON a.ID = c.user_ID
        INNER JOIN
        (
            SELECT user_id, MAX(date) maxDate
            FROM messages
            GROUP BY user_ID
        ) d ON c.user_ID = d.user_ID AND
                c.date = d.maxDate 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/fac90/2)

# java - Java：将 char 转换为 int 的问题

> ID：14116633
> 
> 赞同：0
> 
> 时间：2013-01-02T03:43:41.043
> 
> 标签：java

> **可能重复：**
> [Java char 数组到 int](https://stackoverflow.com/questions/2683324/java-char-array-to-int)

我有以下代码，对象在`stackCells`哪里`ArrayList`：

```
int[] stackCell = {0, 0};

if (!stackCells.isEmpty())  {
    String stackCellString = stackCells.get(0);
    stackCell[0] = stackCellString.charAt(0);
    stackCell[1] = stackCellString.charAt(1);
} 
```

所以我遇到的问题`stackCell`是没有将字符解释为`int`. 例如， 的值`stackCellString`应该是`"88"`。但是，当我使用`chartAt(0)`and时`charAt(1)`，我得到一个 int 值`56`。如果我在命令中使用这些相同的调用`System.out.println(stackCellString.charAt(0) + stackCellString.charAt(1))`，我会得到正确的结果（即`"88"`）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T03:51:25.140

它通过以下方式将字符解释为 int：

`56`是字符的 ASCII 码`'8'`。

如果您想从字符串中获取数字，您将需要使用类似于`Integer.parseInt()`上述评论之一的内容。

更有效的解决方案可能是根据 ASCII 码进行一些数学运算。如果您知道所有字符都是十进制数字，则可以`(code - 48)`获取该数字（`code`ASCII 码在哪里）。例如，`(56 - 48) = 8`，这就是你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T03:53:14.943

56 是数字 8 的 ASCII 码。要得到你想要的，你可以这样做：

```
stackCell[0] = stackCellString.charAt(0) - '0';
stackCell[1] = stackCellString.charAt(1) - '0'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T03:48:05.527

```
String stackCellString="88";
        stackCell[0] = stackCellString.charAt(0);
        stackCell[1] = stackCellString.charAt(1);
        System.out.println(stackCell[0]);
        System.out.println(stackCell[1]);
        System.out.println(stackCell[0]+stackCell[1]);
        System.out.println(stackCellString.charAt(0) + stackCellString.charAt(1)); 
```

输出：

```
56
56
112
112 
```

您没有返回`charAt`作为其字符表示。

如果您希望它返回“88”，您需要这样做：

```
stackCellString.subString(0,1) + stackCellString.subString(1,2); 
```

另一个解决方法是：

```
"" + stackCellString.charAt(0) + stackCellString.charAt(1); 
```

# ajax - 在 Spring MVC 的 Ajax Post 中发送除 File 之外的其他数据

> ID：14116634
> 
> 赞同：0
> 
> 时间：2013-01-02T03:44:17.643
> 
> 标签：ajax, post, file-upload

我正在尝试使用 ajax post 中的文件发送一些其他数据

```
 var fileInput = document.getElementById('file');
     var creditcardid =  document.getElementById('creditcardid');
     var file = fileInput.files[0];
   var formData = new FormData();

     formData.append('creditcardid', 'creditcardid');
     formData.append('file', file);

      $.ajax({
        url: url,
        data: formData,
        cache: false,
        contentType: false,
        processData: false,
        type: 'POST',
        success: function(response) {
            document.getElementById('statusMsg').innerHTML="<fmt:message key="fileUpload.success"/>"; 
            Success();
       }

In controller i am writing the code as

@RequestMapping(value = "/fileUpload", method = RequestMethod.POST)
public @ResponseBody String fileUpload(@RequestParam(value = "creditcardid")Long creditcardid,@RequestParam(value = "file") MultipartFile file,Model model, HttpServletRequest request) {

    String response = "generic.unexpectederror";
    try {
        model.addAttribute("message", "File '" + file.getOriginalFilename() + "' uploaded successfully");
        logger.info("Size of the file is " + file.getSize());
        logger.info("Name of the file is "  + file.getOriginalFilename());
        response = "fileUpload.success";

    } catch (DataIntegrityViolationException e) {
        response = "fileUpload.error";
        logger.error(ExceptionUtils.getStackTrace(e));

    }
    return response;
 } 
```

但我的代码没有调用控制器。请让我知道如何接收数据和文件。谢谢

# asp.net-mvc - Simplemembership ASPXAUTH cookie 在两个单独的 Web 项目上进行验证

> ID：14116639
> 
> 赞同：7
> 
> 时间：2013-01-02T03:44:43.120
> 
> 标签：asp.net-mvc, asp.net-mvc-4, forms-authentication, simplemembership, .aspxauth

我正在使用 SimpleMembership 开发一个 ASP.NET MVC4 项目，它会在您登录时生成一个 ASPXAUTH cookie。它似乎工作得很好，但是今天我打开了另一个 MVC4 项目，只是注意到我已经登录了在。

这非常奇怪，因为新项目实际上没有在数据库中定义任何用户。更令人不安的是，当我在新项目上点击“注销”时，它使我退出了原始站点。

两个站点都在不同的端口上运行，尽管都在本地主机上。在检查请求以查看为什么它返回“IsAuthenticated == true”时，我注意到 ASPXAUTH cookie 被发送到两个站点，并且调试器中 cookie 的“域”参数为“null”。这让我觉得也许 cookie 是作为“无域”cookie 生成的（老实说，我不知道这样的事情是否可能发生！），并查看了 web.config 设置以指定域：

```
<authentication mode="Forms">
  <forms loginUrl="~/Account/Login" timeout="2880" domain="http://localhost:56626" />
</authentication> 
```

不幸的是，设置“域”参数使 cookie 停止工作。我已经尝试了所有排列方式（使用 http、不使用 http、使用端口、不使用端口等），每次我指定域时，浏览器都会收到具有正确指定域名的 cookie（我在 Chrome 开发人员工具中检查了它），但随后无法将其发送回后续请求的服务器。

所以，我对这里发生的事情感到很困惑。这是由于我在某处未正确设置而导致的安全漏洞吗？或者，ASPXAUTH cookie 会在同一个域的两个不同端口上授权用户使用两个完全不同的 Web 应用程序，这是完全正常的行为吗？我会在网络主机上对此进行测试，但不幸的是，我目前无权访问任何运行 MVC4 的程序。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T14:03:44.157

ASPXAUTH 是 cookie 的默认名称，但通过更改 Web.Config 中每个项目的此名称，您可以使其仅应用于该项目。

```
<authentication mode="Forms">
  <forms loginUrl="~/Account/Login" timeout="2880" domain="http://localhost:56626"  name=".PROJ1AUTH"/>
</authentication> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T19:59:13.300

将**Name**属性添加到 forms 元素。它将以您提供的名称命名 authcookie，使其在其他项目中独一无二。

```
<authentication mode="Forms">
  <forms loginUrl="~/Account/Login" timeout="2880" name="A_UNIQUE_NAME" />
</authentication> 
```

# java - 如何使用 JNLP 将命令行参数传递给应用程序？

> ID：14116640
> 
> 赞同：9
> 
> 时间：2013-01-02T03:45:07.150
> 
> 标签：java, arguments, jnlp, java-web-start

我的应用程序有一个 JNLP 包。现在我需要将命令行参数传递给我的应用程序。如何扩展我的 JNLP 文件以列出命令行参数？

例如，我需要说和`java main.class arg1 arg2`需要作为 JNLP 文件的一部分提及。`arg1``arg2`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-02T03:56:17.097

有关该[`application-desc`元素](http://docs.oracle.com/javase/7/docs/technotes/guides/javaws/developersguide/syntax.html#application_desc)的更多详细信息，请查看该元素的描述`argument`。

> 该`application`元素指示 JNLP 文件正在启动应用程序（而不是小程序）。..
> 
> *`argument`可以通过包含一个或多个嵌套元素来为应用程序指定参数。*
> 例如：

```
 <application-desc main-class="Main">
    <argument>arg1</argument>
    <argument>arg2</argument>
  </application-desc> 
```

# python - 哪个更适合缩放？ORM 的 distinct() 或 python set()

> ID：14116642
> 
> 赞同：6
> 
> 时间：2013-01-02T03:45:39.267
> 
> 标签：python, mysql, django, postgresql

新年快乐！

我有一个模型可以保存数十万条记录。该模型如下所示：

```
class Transaction(models.Model):
    user = models.ForeignKey(User)
    client = models.ForeignKey(Client)
    amount = models.FloatField() 
```

我想知道某个用户正在处理的所有客户。要获取唯一的客户端 ID，我可以单独使用 Django ORM：

```
Transaction.objects.filter(user=the_user).distinct('client_id').values_list('client_id', flat=True) 
```

或执行以下操作：

```
set(Transaction.objects.filter(user=the_user).values_list('client_id', flat=True)) 
```

两者都会产生相同的结果。但是考虑到大量记录，哪一个会更快？我知道`distinct`对数据库的操作相对较慢，但它与 python 相比如何`set()`？

最后，如果涉及到数据库，我的选择是 MySql 和 PostgreSql 用于生产。对于这个特定的操作，他们两者之间会有什么区别吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-02T03:59:45.077

我通常使用 orm 函数，它更具可读性并且它在数据库级别上运行，因此实际计算不同值的 RDBMS 也是如此，并且您只需一步即可获得结果。

您可以使用 python 集完成相同的操作，但您需要先带上所有数据集，然后应用 set()。所以你必须执行两步操作才能做到这一点。

在您的第一种情况（orm）中，您只有 I/O 开销，而在第二种情况下，您有 I/O 开销 + 一个函数调用，所以我会使用 ORM 的不同。

# asp.net - 如何将字符串值放入字符串数组中？附加代码（错误：对象引用未设置为对象的实例。）

> ID：14116643
> 
> 赞同：0
> 
> 时间：2013-01-02T03:45:46.260
> 
> 标签：asp.net, string, arrays

我收到错误“对象引用未设置为对象的实例。” 我的在这里，

```
 public class UserProfession
    {
        public UserProfession()
        {

        }
        public System.String[] Designation
        {
            get;
            set;
        }
} 
```

然后我像使用它一样，

```
 UserProfession.Designation[0] =txt_Search.Text.ToString(); 
```

错误我提到你希望你的建议。

-谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T03:56:37.477

在分配值之前，您必须初始化对象。初始化应该只进行一次。我已将数组大小初始化为十。你可以在这里拥有自己的价值观。如果要动态调整大小，可以使用 ArrayList

```
int length = 10;
UserProfession.Designation = new System.String[length];
UserProfession.Designation[0] =txt_Search.Text.ToString(); 
```

更多信息： http: [//msdn.microsoft.com/en-us/library/aa287601 (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa287601(v=vs.71).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T04:10:03.867

当您对数组属性进行赋值时，如下所示：

```
UserProfession.Designation[0] =txt_Search.Text.ToString(); 
```

您实际上正在做的是调用该`get`属性的部分......而不是`set`. 这将返回支持该属性的对象......整个对象，而不仅仅是索引。直到对象返回后才会进行索引查找。一旦你有了那个对象，访问索引就可以正常工作了。

你得到这个特定的异常是因为你有一个`UserProfession.Designation`应该返回对数组对象的引用的表达式，但是因为你从未初始化数组，所以当你尝试查找第 0 个元素的引用时，那里什么也没有。此时，框架发现数组（您的“对象引用”）“未设置为对象的实例”……这只是一种奇特的说法`null`。

换句话说，您需要有一个已经存在的数组来保存您要分配的值。这意味着做这样的事情：

```
Designation = new String[10];
public String[] Designation
{
    get;
    set;
} 
```

但是，请注意我们从未使用过该`set`部分？因此，您可以进一步简化，如下所示：

```
Designation = new String[10];
public String[] Designation {get;private set;} 
```

这将防止客户端代码从您的对象下完全交换整个数组，否则将提供数组属性的全部功能。如果您为数组提供自己的后备存储，您甚至可以完全摆脱 setter 而不会丢失功能：

```
private string[] _designation = new string[10];
public string[] Designation {get {return _designation;} } 
```

但是，让我们再补充一点：您希望在初始化数组之前将其分配给数组，这向我表明您可能并不真正知道它会在前面有多大。如果是这种情况，您可能需要某种集合而不是数组。泛型 List 是一种方便且非常兼容的数组替代品。看起来像这样：

```
private List<string> _designation = new List<string>();
public List<string> Designation {get {return _designation;}} 
```

您仍然可以按索引访问该列表中的项目，就像使用数组一样。您现在需要担心的唯一区别是如何添加新项目：

```
UserProfession.Designation.Add(txt_Search.Text); 
```

另请注意，我删除了 .ToString() 调用。由于您的`.Text`属性几乎可以肯定*已经*是一个字符串，因此调用 .ToString() 方法只是愚蠢的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T04:05:55.093

它必须在我们使用之前初始化值，因为目前它是空的。你最好在构造函数中添加初始化代码。

# java - 泛型下限（“超级”）问题？

> ID：14116650
> 
> 赞同：4
> 
> 时间：2013-01-02T03:47:56.407
> 
> 标签：java, generics

> **可能重复：**
> [java泛型超级关键字](https://stackoverflow.com/questions/3847162/java-generics-super-keyword)

我无法将我的知识与以下示例程序联系起来。请参阅下面的示例程序，然后我的疑问在该程序下方。

```
import java.util.*;
class A { }
class B extends A { }
class C extends B { }

public class sampleprog {

    public static void main(String[] args) {

        List<? super A> list1 = new ArrayList<A>();
        list1.add(new A());//valid. ok
        list1.add(new B());//valid, why? it is not super to A?
        list1.add(new C());//valid, why? it is not super to A?

        List<? super B> list2 = new ArrayList<A>();
        list2.add(new A());//not valid. why? it is also super to B!!!
        list2.add(new B());
        list2.add(new C());

        List<? super C> list3 = new ArrayList<C>();
        list3.add(new A());//not valid, why? It is super to A so should be valid!!!
        list3.add(new B());//not valid, why? It is super to A so should be valid!!!
        list3.add(new C());
    }
} 
```

我的疑问： - 据我所知，这`? super T`意味着您可以添加任何超级类，`T`但这里的输出不同？甚至子类也成功添加，这完全令人困惑。- 输出与列表初始化 ( `List<? super C> list3 = new ArrayList<C>();`) 没有区别。在这个初始化中，我分配了`A`or的列表`B`，输出是一样的！

请解开我的疑惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T03:59:29.187

如果我们`? super`在泛型声明中使用，引用可以指向相同的泛型集合或超泛型集合。因此，在这种情况下，通过 IS-A 测试的所有内容都是有效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T05:13:29.793

`List<? super B>`意思是

```
List<? super B> list1 = new ArrayList<A>();
List<? super B> list1 = new ArrayList<B>(); 
```

被允许。`ArrayList<A>`是超级的`ArrayList<B>`，不是吗？我们可以将`B`'s 和`C`' 添加到`ArrayList<A>`and `ArrayList<B`> 中吗？我们可以。可以加`A`'s吗？only to`ArrayList<A>.`但是`List<? super B>`也允许指向`ArrayList<B>`。所以我们不能将`A`'s 添加到`List<? super B>`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T05:13:38.380

“? super T” 表示您可以添加的任何类必须是 T 或其子类的实例。

因此`List<? super C> list3 = new ArrayList<C>();`，在 list3 中，您可以添加 C 类或其子类实例 ( `SomeClass extends C`) 的实例。

父对象列表可以有自己的子对象和子对象，但为子类创建的列表不能有其父对象。希望你现在清楚了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T04:49:56.700

投票给@us2012 的评论。

*   为了`List<? super A>`

    类型是 A。A、B 和 C 都是 A 的子类型，因此可以添加它们。

*   为了`List<? super B>`

    类型可以是A，B。B和C都是A或B的子类型。想想两者的区别`List<? super B> list2 = new ArrayList<A/B>()`

*   为了`List<? super C>`

    类型可以是 A、B、C。所以只有 C 是 A、B 或 C 的子类型。

例如，`Machine`-> `Car`-> `SportsCar`。因为`List<? super Machine>`，无论是Machine、Car、SportsCar，都是Machine，所以添加是安全的。

# javascript - 按下按钮时尝试http获取的html表单

> ID：14116653
> 
> 赞同：0
> 
> 时间：2013-01-02T03:48:23.673
> 
> 标签：javascript, html, forms

我有一个 html 表单，里面有几个选择列表和一个文本框。我还有一个表单之外的提交按钮。这样做的原因是我想自己构造参数，因为我不想要所有选择列表的内容。我遇到的问题是，当我按下提交按钮时，表单会自动尝试重定向到同一页面，但使用 ? 最后是表格的所有内容。我也遇到了 window.location.href 在 submit() javascript 方法中不起作用的问题，但我不确定这是否是由表单问题引起的。示例代码：

```
 <form>
      <input name="cName" type="text" class="input-xlarge" id="input01" placeholder=
  "Enter title" />
  <div class="control-group">
    <hr />
    <label class="control-label" for="select01">Select box 1</label>

    <div class="controls">
      <select id="select01" name="type" onChange="reportModification(this.value)">
  <option>One</option>
 </select>
 </div>
</div>
  </form>
 <button class="btn btn-primary" onClick="next()">Next</button> 
```

这不是页面中的确切代码，只是一个副本。因此在某些地方它可能不是有效的 html。谢谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T03:51:39.983

您在 url 中获取参数的原因是使用 get 请求而不是 post 请求。你应该使用：

```
<form method="POST" action=""> 
```

另外为什么你的按钮在表单之外？你可以有这个：

```
 </div>
   <input class="btn btn-primary" type="submit" value="Next" onClick="next()" />
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T03:56:22.400

我认为您的按钮必须在表单元素内。您可以在表单元素中使用 onsubmit 来拦截表单，然后再将其发送到服务器。在这里，您可以在值离开之前对其进行操作。您还需要表单中的操作属性。如果你的函数返回true，数据将被提交，false 则不会。

# android - android 应用程序中的 Sqlite 数据库工作，但它在表中带有双重条目（插入）

> ID：14116659
> 
> 赞同：0
> 
> 时间：2013-01-02T03:49:29.953
> 
> 标签：android, sqlite, insert, sqliteopenhelper

我在 android 中做了一个应用程序，并使用 Sqlite 数据库来存储数据。我已经尝试过 sqlite Open helper 并为它上课。它运行良好，但问题是当我插入数据时，它在表中插入了两次。

我的代码如下：

**db-helper.java**

```
package com.example.timerdemo2;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;

public class dbhelper extends SQLiteOpenHelper {

    public static String db_name = "myDB.db";
    public static String Name = "name";
    public static String Timerpoint1 = "timerpoint1";
    public static String Timerpoint2 = "timerpoint2";
    public static String Timerpoint3 = "timerpoint3";
    public static String Servicetime1 = "servicetime1";
    public static String Servicetime2 = "servicetime2";

    public dbhelper(Context context) {
        super(context, db_name, null, 1);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
try{

            db.execSQL("CREATE TABLE timer(_ID INTEGER PRIMARY KEY AUTOINCREMENT,Name TEXT,Timerpoint1 TEXT,Timerpoint2 TEXT,Timerpoint3 TEXT,Servicetime1 TEXT,Servicetime2 TEXT);");
            /*String sql = "INSERT INTO register (Email,Name,Contact)" + "VALUES (" + Email + "," + Name + "," + Contact + ")";
            db.execSQL(sql);*/

        }catch (Exception e) {
            // TODO: handle exception
            System.out.println(e.getMessage());
        }
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
        android.util.Log.v("Constants", "Upgrading database which will destroy all data");
        onCreate(db);
    }

} 
```

**TimeDetails.java**

```
package com.example.timerdemo2;

import java.sql.SQLOutput;
import java.util.jar.Attributes.Name;

import android.os.Bundle;
import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.content.ContentValues;
import android.content.DialogInterface;
import android.content.Intent;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.view.KeyEvent;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

public class Timedetails extends Activity {
EditText eta,etb,etc,service1,service2;
Button btn,btn1;
TextView tv1;
SQLiteDatabase db;

dbhelper dh = new dbhelper(this);

/*@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        moveTaskToBack(true);
        return true;
    }
    return super.onKeyDown(keyCode, event);
}  */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_timedetails);

        Bundle b1 = this.getIntent().getExtras();
        final String title = b1.getString("title");
        tv1 = (TextView)findViewById(R.id.Projecttitle);
        tv1.setText(title);

        Bundle bundle = getIntent().getExtras();
        String tim1 = bundle.getString("t1");
        String tim2 = bundle.getString("t2");
        String tim3 = bundle.getString("t3");

        final String titl = bundle.getString("titl1");
        final TextView tv = (TextView)findViewById(R.id.Projecttitle);
        tv.setText(titl);

        eta = (EditText)findViewById(R.id.timval1);
        eta.setText(tim1);
        etb = (EditText)findViewById(R.id.timval2);
        etb.setText(tim2);
        etc = (EditText)findViewById(R.id.timval3);
        etc.setText(tim3);

     String ser1 = bundle.getString("dif1");
     String ser2 = bundle.getString("dif2");

        service1 = (EditText)findViewById(R.id.servicetime1a);
        service1.setText(ser1);
        service2 = (EditText)findViewById(R.id.servicetime2a);
        service2.setText(ser2);

     //   btn1 =(Button)findViewById(R.id.delete);
      /*  btn1.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                showMessageAlert();
            }

        /*  private void showMessageAlert() {
                // TODO Auto-generated method stub
                 runOnUiThread(new Runnable() {
                        public void run() {
                            AlertDialog.Builder builder = new AlertDialog.Builder(Timedetails.this);
                                final Dialog dialog = null;
                            builder.setTitle("Alert");
                            builder.setMessage("Are you sure you want to delete");

                            builder.setCancelable(true);
                            builder.setInverseBackgroundForced(true);
                            builder.setPositiveButton("I Accept",   new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface arg0, int arg1) {
                                  // dialog.dismiss();
                                   Intent intent = new Intent(Timedetails.this,ListActivity.class);
                                    Toast.makeText(getApplicationContext(), "Your Time Details has been Deleted", Toast.LENGTH_SHORT).show();
                                    startActivity(intent);
                                     // delete the stuff you wan to 
                                }
                            });
                            builder.setNegativeButton("I decline",  new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface arg0, int arg1) {
                                    //Do nothing

                                }
                            });
                            AlertDialog alert = builder.create();
                            alert.show();
                        }
                    });
            }
        });*/

        btn=(Button)findViewById(R.id.save);
        btn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                 Intent intent =new Intent(Timedetails.this,ListActivity.class); 
                 //   Toast.makeText(getApplicationContext(), "Project has been added to List", 1).show();
                    startActivity(intent);
                    addRecord();
                //  Toast.makeText(getApplicationContext(), "Record inserted successfully !", 1).show();
                addRecord();
            }

            private void addRecord() {
                // TODO Auto-generated method stub
                String tv1 = tv.getText().toString();
                tv.setText(tv1);
               //String title = tv1.getText().toString();
                //tv1.setText(tv);
                String tmp1 = eta.getText().toString();
                String tmp2 = etb.getText().toString();
                String tmp3 = etc.getText().toString();
                String ser1 = service1.getText().toString();
                String ser2 = service2.getText().toString();
                insertData(titl,tmp1,tmp2,tmp3,ser1,ser2);
                Toast.makeText(getApplicationContext(), "Record inserted suceessfully", Toast.LENGTH_LONG).show();  
            }

            private void insertData(String titl, String tmp1, String tmp2,
                    String tmp3, String ser1, String ser2) {
                // TODO Auto-generated method stub
            //  Toast.makeText(getApplicationContext(), titl + " " + tmp1 + " " + tmp2 + " "+ tmp3 + " "+ ser1 +" "+ ser2, 1).show();
                SQLiteDatabase db = dh.getWritableDatabase();
                ContentValues cv = new ContentValues();
                cv.put(dh.Name, titl);
                cv.put(dh.Timerpoint1, tmp1);
                cv.put(dh.Timerpoint2, tmp2);
                cv.put(dh.Timerpoint3, tmp3);
                cv.put(dh.Servicetime1, ser1);
                cv.put(dh.Servicetime2, ser2);
            //  Toast.makeText(getApplicationContext(), " " + cv, 1).show();
                db.insert("timer", dh.Name, cv);

            }

        });
         }
    public boolean onKeyDown(int keycode, KeyEvent event) {
        if (keycode == KeyEvent.KEYCODE_BACK) {
            moveTaskToBack(true);
        }
        return super.onKeyDown(keycode, event);
    }

} 
```

**ListActivity.java**

```
package com.example.timerdemo2;

import java.util.ArrayList;

import android.R.menu;
import android.os.Bundle;
import android.provider.ContactsContract.CommonDataKinds.Phone;
import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.view.ContextMenu;
import android.view.KeyEvent;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.view.ContextMenu.ContextMenuInfo;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;
import android.widget.Toast;
import android.widget.AdapterView.AdapterContextMenuInfo;

public class ListActivity extends Activity {
    ListView lv;
    ArrayList<String> items = new ArrayList<String>();
    ArrayList<String> items_id = new ArrayList<String>();
    dbhelper dh;
    SQLiteDatabase db;
    private boolean Distinct = true;
    int index_id;
    Button btn;
    public boolean onKeyDown(int keycode, KeyEvent event) {
        if (keycode == KeyEvent.KEYCODE_BACK) {
            moveTaskToBack(true);
        }
        return super.onKeyDown(keycode, event);
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_list);
        Button btn;
        btn = (Button)findViewById(R.id.newProjectlist);
        btn.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

                    Intent intent= new Intent(ListActivity.this,NewProject.class);
                startActivity(intent);
            }
        });  
        lv = (ListView)findViewById(R.id.projectListView);
        setUpList();
        dh = new dbhelper(this);
        Cursor c = getAllData();
        showAllData(c);  
        registerForContextMenu(lv);      
    }

  @Override
    public void onCreateContextMenu(ContextMenu menu, View v,
            ContextMenuInfo menuInfo) {
        // TODO Auto-generated method stub
        super.onCreateContextMenu(menu, v, menuInfo);

        if(v.getId() == R.id.projectList){
            menu.setHeaderIcon(R.drawable.ic_launcher);
            menu.setHeaderTitle("Record List");
            menu.add(0,1,menu.NONE,"Delete Record");
            menu.add(0,2,menu.NONE,"Show Record");
        }
    }

    @Override
public boolean onContextItemSelected(MenuItem item) {
    // TODO Auto-generated method stub
        int itemId = item.getItemId();
        if(itemId == 1)
        {
            AdapterView.AdapterContextMenuInfo menuinfo;
            menuinfo = (AdapterContextMenuInfo) item.getMenuInfo();
            index_id = menuinfo.position;
            deleteUserData(index_id);
        }
        if(itemId == 2){
            AdapterView.AdapterContextMenuInfo menuinfo;
            menuinfo = (AdapterContextMenuInfo) item.getMenuInfo();
            index_id = menuinfo.position;
            editUserData(index_id);
        }
    return super.onContextItemSelected(item);
}

    private void editUserData(int indexid) {
        // TODO Auto-generated method stub
        String user_id = items_id.get(indexid);
        Intent intEdit = new Intent(ListActivity.this, MainActivity.class);
        intEdit.putExtra("EditID", user_id);
        startActivityForResult(intEdit, 1);
    }

    private void deleteUserData(int indexid) {
        // TODO Auto-generated method stub
        String user_id = items_id.get(indexid);
        //Toast.makeText(getApplicationContext(), "id " + user_id, 1).show();
        db = dh.getWritableDatabase();
        db.delete("timer","_ID" + "=" + user_id, null);
        finish();
//      Toast.makeText(getApplicationContext(), "Record deleted successfully", 1).show();
    }

    private void showAllData(Cursor c) {
        // TODO Auto-generated method stub
        while(c.moveToNext())
        {
            int id = c.getInt(0);
            String name = c.getString(1);
            String timerpoint1 = c.getString(2);
            String timerpoint2 = c.getString(3);
            String timerpoint3 = c.getString(4);
            String servicetime1 = c.getString(5);
            String servicetime2 = c.getString(6);
            items.add("" + name);
            items_id.add(""+id);
        }
        setUpList();
    }

    @SuppressWarnings("deprecation")
    private Cursor getAllData() {
        // TODO Auto-generated method stub
        db = dh.getReadableDatabase();
        //String sortorder = dh.Name + "DESC";
    //  String query ="SELECT DISTINCT name FROM timer";
    //  Cursor c = db.rawQuery(query, null);
    //   if (c != null) {
    //            c.moveToFirst();
    //        }

        Cursor cur = db.query(Distinct,"timer", null, null, null, null, null, null, null);
        startManagingCursor(cur);
        return cur; 
        }
    private void setUpList() {
        // TODO Auto-generated method stub
        lv.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,items));
    }   

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T14:53:39.970

它插入两次，因为您的插入方法被调用了两次。（通过`addRecord`这里）

```
 btn=(Button)findViewById(R.id.save);
    btn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent intent =new Intent(Timedetails.this,ListActivity.class); 
            //   Toast.makeText(getApplicationContext(), "Project has been added to List", 1).show();
            startActivity(intent);
            addRecord(); <--------- add once
            //  Toast.makeText(getApplicationContext(), "Record inserted successfully !", 1).show();
            addRecord(); <---------- added a second time!
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T04:09:22.763

尝试将 Insert 语句移至 dbHelper 类的 onCreate 以外的新方法。*数据被插入的次数是类被调用的次数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T04:13:45.317

btn=(按钮)findViewById(R.id.save); btn.setOnClickListener(new OnClickListener() {

```
 @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        Intent intent =new Intent(Timedetails.this,ListActivity.class); 
        //   Toast.makeText(getApplicationContext(), "Project has been added to List", 1).show();
        startActivity(intent);
        addRecord(); <--------- add once
        //  Toast.makeText(getApplicationContext(), "Record inserted successfully !", 1).show();
        addRecord(); <---------- added a second time!
    } 
```

# javascript - 如何在javascript中自行关闭浏览器

> ID：14116663
> 
> 赞同：0
> 
> 时间：2013-01-02T03:50:06.423
> 
> 标签：javascript, html

我想制作一个简单的`html`页面，`javascript`打开后会自动关闭。

我的主要目标是在弹出窗口中的一些数据更新后将用户重定向到此页面，以便在数据更新后关闭窗口。

我无法弄清楚。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T03:53:20.933

JSFiddle 代码： http: [//jsfiddle.net/XaSKY/](http://jsfiddle.net/XaSKY/)以查看实际情况。

你可以使用`window.close()`函数

# amazon-web-services - AWS CloudSearch 是否有默认词干和同义词？

> ID：14116665
> 
> 赞同：5
> 
> 时间：2013-01-02T03:50:21.713
> 
> 标签：amazon-web-services, amazon-cloudsearch

在 CloudSearch 管理控制台中，我看到您可以添加自己的词干和同义词。这会覆盖内部默认的词干和同义词列表，还是没有这样的默认列表并且您需要在 CloudSearch 使用这些功能之前添加词干和同义词？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T10:13:36.587

关于[茎](http://docs.aws.amazon.com/cloudsearch/latest/developerguide/stemmingopts.html)：

> 词干被指定为术语和词干对的集合。当您配置词干提取选项时，现有的词干提取字典将替换为您指定的映射。默认情况下，Amazon CloudSearch 不定义任何词干。但是，总是会执行一些基本的算法词干提取，例如删除复数后缀。（无论您是否指定自定义词干词典，都会这样做。）

关于[同义词](http://docs.aws.amazon.com/cloudsearch/latest/developerguide/synonymopts.html)：

> 默认情况下，Amazon CloudSearch 不定义任何同义词。

要完成答案，关于[停用词](http://docs.aws.amazon.com/cloudsearch/latest/developerguide/stoppingopts.html)：

> 默认情况下，Amazon CloudSearch 为英语 (en) 定义以下停用词：
> 
> ```
> a
> an
> and
> are
> as
> at
> be
> but
> by
> for
> in
> is
> it
> of
> on
> or
> the
> to
> was 
> ```

# objective-c - NSBezierPath 动画从一个圆圈到另一个圆圈

> ID：14116667
> 
> 赞同：0
> 
> 时间：2013-01-02T03:50:33.193
> 
> 标签：objective-c, animation, smooth, nsbezierpath

我有一个测试视图，我在其中进行一些图形测试。目前我有一个方法**drawCircle**绘制一个带阴影的彩色圆圈。

在**awakeFromNib**中，我设置了一个计时器**timerAction** ，它每 0.5 秒触发一次 timerAction 方法：**setNeedsDisplay** : **YES**

这种方式**drawRect**触发**drawCircle**绘制另一个具有随机颜色和阴影的圆圈。请参阅下面的方法。

到目前为止一切正常。我想顺利地从一个色环切换到另一个色环。现在一点都不顺畅。它只是突然从一个切换到另一个。

我尝试了几件事，但我就是不知道该怎么做。

有任何想法吗？

罗纳德。

**TimeCircle2.h**

```
 //
  //  TimeCircle2.h
  //  Egg&Breakfast
  //
  //  Created by Ronald Hofmann on 29.12.12.

  #import <Cocoa/Cocoa.h>

  @interface TimeCircle2 : NSView {

     CGFloat CGFalpha       ;
     CGFloat CGFblue        ;
     CGFloat CGFgreen       ;
     CGFloat CGFred         ;

     NSURL    *pathToFolder ;
     NSShadow *shadow       ;
     NSTimer  *timer        ;

     NSColor
     *myRedColor,*myGreenColor,*myRedBGColor,*myGreyColor,*myRandomColor,
     *mydarkGreyColor,*myYellowBGColor,*myBlueColor,*myBlackColor,*myDkGreenColor;

     IBOutlet NSSliderCell
     *slideHourCell, *slideMinCell, *slideSecCell ;

     float
     lineTheWidth,circleWidth,circleHeight,spaceX,spaceY,intervall,
     center1,center2,shadow1,shadow2,ankathete,gegenkathete,winkelAlpha;

     BOOL     flagButtonWasClicked ;
     int      drawRectCount,getHTime, getMTime,getSTime,goalTS ;

     IBOutlet TimeCircle2 *myTimeCircleView ;
     IBOutlet NSButton    *butStart         ;
     IBOutlet NSPanel     *mainPanel        ;
     IBOutlet NSButton    *boxForEver       ;
     IBOutlet NSButton    *boxMakeSound     ;
     IBOutlet NSButton    *timerFlagSwitch  ;

     IBOutlet NSSlider    *slideHour        ;
     IBOutlet NSSlider    *slideMin         ;
     IBOutlet NSSlider    *slideSec         ;
     IBOutlet NSSlider    *angleSlider      ;
     IBOutlet NSSlider    *volumeAdjust     ;
     IBOutlet NSTextField *txtRemark        ;
     IBOutlet NSProgressIndicator *progInd  ;

     TimeCircle2          *myTimeCircle     ;

  }

  @end 
```

**TimeCircle2.m**

```
 //
     //  TimeCircle2.m
     //  Egg&Breakfast
     //
     //  Created by Ronald Hofmann on 29.12.12.

  #import "TimeCircle2.h"
  #import "NSObject+Utilities.h"

  @implementation TimeCircle2

  #define overLine 15
  #define kProject        @"EggBreakfast"

  #pragma mark Global Declarations
  NSBezierPath *path;
  NSBezierPath *path1,*path2,*path3,*path4;
  NSPoint  centerPoint1,centerPoint2      ;
  NSPoint  centerPoint;

  BOOL     flagButtonWasClicked           ;
  float    liveAngle,radius,transparency,intvalSet  ;

  #pragma mark Methods
  - (id)initWithFrame:(NSRect)frame
  {
     self = [super initWithFrame:frame];
     if (self) {
           // Initialization code here.
     }

     return self;
  }

  - (void) awakeFromNib      {

     timer = [[NSTimer scheduledTimerWithTimeInterval: 0.5
                                               target:self
                                             selector:@selector(timerAction:)
                                             userInfo:nil
                                              repeats:YES] retain];
  }

  - (void)drawRect:(NSRect)dirtyRect
  {
     [self drawCircle];
  }

  - (void) timerAction:(NSTimer *)aTimer {
     [self setNeedsDisplay:YES];
  }

  - (void) drawCircle        {

     NSRect bounds      = self.bounds ;
     NSBezierPath *path = [NSBezierPath bezierPath];

     shadow1 = 4; shadow2 = -shadow1;

     shadow = [NSShadow new];
     float setShadow   = 0.2f          ;

     float radius = 5+(circleHeight/2);

     spaceX       = (bounds.size.width  - circleWidth )/2.0f;
     spaceY       = (bounds.size.height - circleHeight)/2.0f;

     setShadow   = 0.2f          ;

     lineTheWidth = 1.0f;

     circleWidth  =  bounds.size.width  *0.80f;
     circleHeight =  bounds.size.height *0.80f;

     radius = 12+(circleHeight/2);

     spaceX       = (bounds.size.width  - circleWidth )/2.0f;
     spaceY       = (bounds.size.height - circleHeight)/2.0f;

     center1      =  bounds.size.width /2.0f;
     center2      =  bounds.size.height/2.0f;

     centerPoint  =  NSMakePoint(center1,center2);

     path = [ NSBezierPath bezierPathWithOvalInRect:
             (NSRect) {{ spaceX, spaceY },{ (circleWidth), (circleHeight)}}] ;

     [path setLineWidth:2.0000f];
     [[self ccRandom:0.6f :0.0f]  setStroke];

     [shadow setShadowColor: [NSColor blackColor]];
     [shadow setShadowBlurRadius: 5.0f];

     [shadow setShadowOffset: NSMakeSize(shadow1,shadow2)];
     [shadow set];

     [path stroke];

  }

  @end 
```

# object - 如何在 OpenCV/JavaCV 中检测椭圆？

> ID：14116672
> 
> 赞同：0
> 
> 时间：2013-01-02T03:51:36.113
> 
> 标签：object, opencv, detection, javacv, ellipse

我目前正在开发一个程序来检测从任意点拍摄的台球桌图像中台球的坐标。

我首先计算了桌角并扭曲图像的透视以获得鸟瞰图。不幸的是，这使得球形球看起来略呈椭圆形，如下所示。

![在此处输入图像描述](../Images/64c5c310281cc2d3381d6437ec6c5755.png)

**为了检测椭圆，我提取了除绿色毡区域之外的所有区域，并在如下所示的结果图像上使用了霍夫变换算法 (HoughCircles)。不幸的是，没有检测到椭圆（我只能假设，因为它们不是圆形）。**

![在此处输入图像描述](../Images/031463e20fadc5e6be72be898447e60b.png)

## 有没有更好的方法来检测这张图片中的球？我在技术上使用 JavaCV，但 OpenCV 解决方案应该是合适的。非常感谢您的阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T06:01:07.217

提取的 BW 图像很好，但它需要一些形态滤波器来消除噪声，然后您可以提取每个对象的外部轮廓（通过 cvFindContours）并拟合最佳椭圆（通过 cvFitEllipse2）。

# performance - Int 比较比 Haskell 中的 ByteString 比较快多少？

> ID：14116675
> 
> 赞同：0
> 
> 时间：2013-01-02T03:51:43.027
> 
> 标签：performance, haskell, comparison, bytestring

我正在实现模式挖掘算法，通常输入数据是具有以下格式的文件

```
item1 item2 item3
item0 item3 item10
....
item30 item40 item30 
```

通常`itemx`是一个`String`。为了提高效率，我曾经读取`ByteString`比默认文件更快的文件`String`。由于模式挖掘算法的主要任务是项目集之间的比较。我想知道如果我更改输入文件格式以便进行比较`Int`而不是比较`ByteString`. 这是新颖的格式：

```
1 2 3
0 3 10
....
30 40 30 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T12:51:51.300

如果您限制自己只询问 Int 上的相等函数 - 由`eqInt#`primop 给出 - 是否比字节串上的相等函数更快 -

```
primop   IntEqOp  "==#"   Compare
   Int# -> Int# -> Bool
   with commutable = True 
```

对比

```
eq :: ByteString -> ByteString -> Bool
eq a@(PS fp off len) b@(PS fp' off' len')
  | len /= len'              = False    -- short cut on length
  | fp == fp' && off == off' = True     -- short cut for the same string
  | otherwise                = compareBytes a b == EQ
{-# INLINE eq #-} 
```

那么 Int 情况会更快。毫无疑问。

但是，如果您必须`Int`先将字节串输入（或字符串输入）解析为令牌，您可能会输。

真正了解这里的唯一方法是测量。

# android - Android 通过 jni 将大型浮点数组从本机传递到 java。如果超过一定大小会出错

> ID：14116687
> 
> 赞同：0
> 
> 时间：2013-01-02T03:53:07.377
> 
> 标签：android, arrays, android-ndk, java-native-interface, limit

我想在浮点数[100000]之外的任何地方传递一个大的浮点数数组。我有一个设置成功地传递了一个大小为 212 的数组。但是任何更大的它都会崩溃，并在 logcat 中给出以下错误消息：

“致命信号 11 (SIGSEGV) 位于 0xbe949000 (code=1)”

## 我的代码

**本机功能**

```
NIEXPORT jfloatArray JNICALL  Java_carron_graphics_benchmark_NativeWrapper_getArrayNative(JNIEnv * env, jclass cls) {

    int tempSize = mParticleSystem->mSizeOfSystem*2;

    jfloat cArray[tempSize];
    jsize len = sizeof(cArray);

    jfloatArray jArray = (*env).NewFloatArray(len);

    if (jArray != NULL) {

        jint i;

        for (i = 0; i < tempSize; i++) {
            cArray[i] = mParticleSystem->mParticlePositions[i];
        }
        (*env).SetFloatArrayRegion(jArray, 0, len, cArray);
    }
    return jArray;
} 
```

**Java** 非常简单，只需抓取数组即可。如果我创建并传递一个大于 212 的浮点数组，尽管我得到了如上所示的错误。

```
float tempArray[] = NativeWrapper.getArrayNative(); 
```

**有没有人遇到过这个问题或者可以看到我如何绕过这个限制？如果这个问题已经得到回答，我也很抱歉，我找不到这个具体的问题也没有答案。任何帮助将不胜感激 ：）**

编辑：

用于在通过 jni 频繁获取数组时更新全局 jfloatArray 以避免垃圾收集器。

```
static jfloatArray gArray = NULL;

JNIEXPORT jfloatArray JNICALL Java_carron_graphics_benchmark_NativeWrapper_getArrayNative(JNIEnv * env, jclass cls)  {
    int arrayLength = mParticleSystem->mSizeOfSystem*2;

    if (gArray == NULL)
    {
        // create array
        jfloatArray jArray;
        jArray = env->NewFloatArray(arrayLength);
        gArray = (jfloatArray)env->NewGlobalRef(jArray);
    }

    // Update global 
    env->SetFloatArrayRegion(gArray, 0, arrayLength, mParticleSystem->mParticlePositions);

    return gArray;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T06:52:05.100

您的代码的问题是堆栈的大小有限。你不能把大数组（`jfloat cArray[tempSize]`变量）放在那里。如果您想创建大型数组，请在堆上执行此操作，就像 Alex 向您展示的那样。

如果`mParticleSystem->mParticlePositions`是浮点数组，那么这段代码会更好：

```
int tempSize = mParticleSystem->mSizeOfSystem*2;
jfloatArray jArray = env->NewFloatArray(tempSize);

if (jArray != NULL)
{
    env->SetFloatArrayRegion(jArray, 0, tempSize, mParticleSystem->mParticlePositions);
}
return jArray; 
```

如果它不是浮点数组，则使用以下代码，无需创建额外的浮点数组：

```
int tempSize = mParticleSystem->mSizeOfSystem*2;
jfloatArray jArray = env->NewFloatArray(tempSize);

if (jArray != NULL)
{
    if (float* ptr = env->GetFloatArrayElements(jArray, NULL))
    {
        for (int i=0; i<tempSize; i++)
        {
            ptr[i] = mParticleSystem->mParticlePositions[i];
        }
        env->ReleaseFloatArrayElements(jArray, ptr, JNI_COMMIT);
    }
}

return jArray; 
```

**编辑**

要将 jArray 存储在其他地方（例如全局），请执行以下操作：

```
static jfloatArray gArray = NULL;

jfloatArray fun(...)
{
    jfloatArray jArray;

    if (gArray == NULL)
    {
        // create array
        jArray = env->NewFloatArray(tempSize);
        gArray = (jfloatArray)env->NewGlobalRef(jArray);
    }
    else
    {
        jArray = gArray;
    }

    // ... here fill/modify jArray
    // SetFLoatArrayRegion/GetFloatArrayElemeents/ReleaseFloatArrayElements

    return jArray;
} 
```

完成后释放内存：

```
void freeArray(...)
{
    env->DeleteGlobalRef(gArray);
    gArray = NULL;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T06:30:15.853

您的代码无法编译：您可能有

```
jfloat *cArray = new jfloat[tempSize]; 
```

在您编译的代码中。

您的代码中的错误是调用 NewFloatArray()。您应该调用 NewFloatArray(tempSize)，而不是 (sizeof(cArray))。

另请注意，无需使用 mParticleSystem->mParticlePositions 的中间副本。如果它是一个浮点数组，您可以简单地将它用于 SetFloatArrayRegion()。

# html - 在悬停事件上为 CSS 渐变背景设置动画

> ID：14116689
> 
> 赞同：2
> 
> 时间：2013-01-02T03:53:16.640
> 
> 标签：html, css

我有一些使用以下样式在悬停时使用背景渐变设置样式的菜单项：

```
#sidebar ul li a:hover {
    background-image: linear-gradient(bottom, rgb(68,68,68) 5%, rgb(51,51,51) 100%);
    background-image: -o-linear-gradient(bottom, rgb(68,68,68) 5%, rgb(51,51,51) 100%);
    background-image: -moz-linear-gradient(bottom, rgb(68,68,68) 5%, rgb(51,51,51) 100%);
    background-image: -webkit-linear-gradient(bottom, rgb(68,68,68) 5%, rgb(51,51,51) 100%);
    background-image: -ms-linear-gradient(bottom, rgb(68,68,68) 5%, rgb(51,51,51) 100%);

    background-image: -webkit-gradient(
        linear,
        left bottom,
        left top,
        color-stop(0.05, rgb(68,68,68)),
        color-stop(1, rgb(51,51,51))
    );
    color: #f0f0f0;
    border-top-left-radius: 4px;
    border-bottom-left-radius: 4px;
} 
```

我的问题是，是否可以使用 CSS3 过渡或动画使新背景（由渐变定义）从右侧滑入？还是我必须求助于使用精灵图像或 Javascript？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T04:13:45.487

尚不支持渐变动画。然而，这个网站为悬停时的动画感觉提供了一种令人愉悦的方法——

[http://sapphion.com/2011/10/css3-gradient-transition-with-background-position/](http://sapphion.com/2011/10/css3-gradient-transition-with-background-position/)

示例 CSS：-

```
#DemoGradient{  
    background: -webkit-linear-gradient(#C7D3DC,#5B798E);  
    background: -moz-linear-gradient(#C7D3DC,#5B798E);  
    background: -o-linear-gradient(#C7D3DC,#5B798E);  
    background: linear-gradient(#C7D3DC,#5B798E);  

    -webkit-transition: background 1s ease-out;  
    -moz-transition: background 1s ease-out;  
    -o-transition: background 1s ease-out;  
    transition: background 1s ease-out;  

    background-size:1px 200px;  
    border-radius: 10px;  
    border: 1px solid #839DB0;  
    cursor:pointer;  
    width: 150px;  
    height: 100px;  
}  
#DemoGradient:Hover{  
    background-position:100px;  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T04:02:39.203

似乎渐变还不支持过渡（仍然）：

[使用带有渐变背景的 CSS3 过渡](https://stackoverflow.com/questions/6542212/use-css3-transitions-with-gradient-backgrounds)

如果您使用背景图像而不是 css3 渐变，则可以使用 css 过渡对其进出动画。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-11T14:29:19.110

试试这个作为一个黑客：

```
<div class="background-animate">
  <div class="content">Hi im content</div>
</div> 
```

并设计它

```
.background-animate {
    position: relative;
    z-index: 10;
    display: block;
    background: transparent;
}
.background-animate:before {
    content: "";
    position: absolute;
    transition: opacity .35s ease-in-out;
   -moz-transition: opacity .35s ease-in-out;
   -webkit-transition: opacity .35s ease-in-out;
    top:0; left: 0; right: 0; bottom: 0; z-index:-1;
    background: -moz-radial-gradient(center, ellipse cover, #ffffff 40%, #e9eae9 100%); /* FF3.6-15 */
    background: -webkit-radial-gradient(center, ellipse cover, #ffffff 40%,#e9eae9 100%); /* Chrome10-25,Safari5.1-6 */
    background: radial-gradient(ellipse at center, #ffffff 40%,#e9eae9 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
}
.background-animate:hover:before {
    opacity: 0;
}
.background-animate:after {
    content: ""; opacity: 0;
    transition: opacity .35s ease-in-out;
   -moz-transition: opacity .35s ease-in-out;
   -webkit-transition: opacity .35s ease-in-out;
    position: absolute;
    top:0; left: 0; right: 0; bottom: 0; z-index:-1;
    background: -moz-radial-gradient(center, ellipse cover, #ffffff 80%, #e9eae9 100%); /* FF3.6-15 */
    background: -webkit-radial-gradient(center, ellipse cover, #ffffff 80%,#e9eae9 100%); /* Chrome10-25,Safari5.1-6 */
    background: radial-gradient(ellipse at center, #ffffff 80%,#e9eae9 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
}
.background-animate:hover:after {
    opacity: 1;
} 
```

它基本上在渐变之间进行不透明度切换。在这里找到演示[https://codepen.io/anon/pen/eWOEoR](https://codepen.io/anon/pen/eWOEoR)

# django - 有没有“正确”的方式将 django.db.models.query.ValuesListQuerySet 转换为纯列表？

> ID：14116692
> 
> 赞同：13
> 
> 时间：2013-01-02T03:53:33.927
> 
> 标签：django, django-models

我试图以一种方法从多个模型中删除记录，是否具有以下架构：

```
picture 1:1 picture_foreign_picture *:1 picture_foreign 
```

我正在删除这些给定的列表 picture_foreign 对象：

```
picture_foreign_pictures = PictureForeignPicture.objects.filter(picture_foreign__in=picture_foreigns)
picture_ids = picture_foreign_pictures.values_list('picture_id', flat=True)
logger.warn('PICTURES REMOVE: %s' % picture_ids)
picture_foreign_pictures.delete()
logger.warn('PICTURES REMOVE: %s' % picture_ids) 
```

2 个记录器行输出以下内容：

```
WARNING 2013-01-02 03:40:10,974 PICTURES REMOVE: [86L]
WARNING 2013-01-02 03:40:11,045 PICTURES REMOVE: [] 
```

尽管如此，图片`86`仍然存在：

```
mysql> select id from picture where id = 86;
+----+
| id |
+----+
| 86 |
+----+
1 row in set (0.00 sec) 
```

我想我可以通过简单地转换`picture_ids`为纯整数列表来解决这个问题，但是我想知道是否有更多的 Django 方法呢？我原以为`flat=True`已经处理了这个，但它似乎不仅仅是一个纯粹的列表。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-02T04:11:13.597

好吧，我不确定它是否正确，但使用它`list()`来完成此操作非常简单：

```
picture_ids = list(picture_foreign_pictures.values_list('picture_id', flat=True)) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-10T12:11:18.703

上述解决方案不起作用：

您可以像这样转换为 pur 列表：

```
p_ids =PictureForeignPicture.objects.filter(picture_foreign__in=picture_foreigns).values_list('picture_id', flat=True)

new_list = [];new_list.extend(p_ids) 
```

# clojure - java中的字符串数组到clojure

> ID：14116703
> 
> 赞同：1
> 
> 时间：2013-01-02T03:56:33.610
> 
> 标签：clojure

如果我在java中有一个字符串数组

例子

```
public static void main (String [] args)
{
      int x = Integer.parseInt(args[2]);
} 
```

clojure 中这段代码的等价物是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T03:59:57.723

Clojure 可以直接调用 Java 方法，因此假设您的函数传递了一个字符串数组，您可以这样做：

```
(defn my-parse [args]
  (Integer/parseInt (aget args 2))) 
```

注意事项：

*   `aget`是一个从 Java 数组中获取元素的函数。
*   该语法`(ClassName/methodName ...)`用于调用 Clojure 中的 Java 静态方法
*   Clojure 会在需要时自动使用反射来选择正确的方法实现。所以在这种情况下，它不需要在编译时知道什么类型的对象存储在 args 数组中 - 它会在运行时确定它们是字符串并相应地对待它们

还值得注意的是，Clojure 实际上可以**解构**Java 数组。所以你也可以这样做：

```
(defn my-parse [[s0 s1 s2 & more-strings]]
  (Integer/parseInt s2)) 
```

在此代码中，`s0`取第一个数组元素、`s1`第二个、`s2`第三个元素的值，并且`more-strings`是任何剩余参数的序列

# search - 从主要搜索引擎中排除页面部分的确定方法

> ID：14116705
> 
> 赞同：4
> 
> 时间：2013-01-02T03:56:51.890
> 
> 标签：search, seo, search-engine

我有相当多的页面不变部分，我想从搜索结果中排除，以防止模糊每个页面上的独特内容。

我读到 class="nocontent" 将为 Google 执行此操作。但是雅虎和必应等其他主要搜索引擎呢？是否有全球公认的解决方案，或者是否有额外的步骤让他们这样做？

感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:51:55.913

*谷歌*没有为一般搜索提供这样的功能。该课程[`nocontent`](http://support.google.com/customsearch/bin/answer.py?hl=en&answer=2364585)仅适用于 Google 自定义搜索。评论[`googleon`/`googleoff`](https://developers.google.com/search-appliance/documentation/46/admin_crawl/Preparing#pagepart)仅适用于 Google Search Appliance。

*雅虎！* 2007 年[引入](http://www.ysearchblog.com/2007/05/02/introducing-robots-nocontent-for-page-sections/)了这个类。*谷歌*[不支持](https://twitter.com/mattcutts/statuses/2499654256)它。`robots-nocontent`

 *有一个[microformats draft](http://microformats.org/wiki/robots-exclusion)，但它可能没有支持。

* * *

尽管如此，有一些“黑客”可以完成你所需要的，但我不会指望或使用它们。例如：用 JS 插入内容，或者将内容嵌入到`iframe`（并在 中屏蔽源 URL `robots.txt`）。*

# ios - iOS Game Center 可以在游戏中的玩家之间传递字符串/对象吗？

> ID：14116707
> 
> 赞同：0
> 
> 时间：2013-01-02T03:56:56.050
> 
> 标签：ios, object, game-center

以前从未在我的应用程序中使用过 Game Center。如果这个问题很幼稚，那就太好了。我也不确定这是否是正确的地方。:)

我目前正在考虑让我的应用程序支持 Game Center，主要是为了推广我的应用程序。我的应用程序实际上是一个类似拼图的游戏，想想填字游戏，所以它不是一个多人游戏。但是，我认为我可以让它具有竞争力：一个制造难题，另一个解决它；第二轮，球员互换角色。现在，我的问题是游戏中心是否支持这种格式。例如，Game Center 是否允许用户将字符串或其他类型的对象传递给其他玩家？如果是这样，那么我可以将拼图（由一个玩家提供）实现为一个字符串，并在其他玩家端对其进行解码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T05:12:39.960

这听起来正是 iOS 5 中引入的回合制游戏 API 的用途。检查 GsmeKit 文档。

# php - 将apache添加到用户组文件上传权限

> ID：14116708
> 
> 赞同：10
> 
> 时间：2013-01-02T03:57:16.210
> 
> 标签：php, apache

我有一个 php 脚本将文件上传到某个文件夹，目前它们正在作为“psacln”组上传，以便我可以通过 FTP 删除文件。当 PHP 作为 FastCGI 运行时，一切正常，我必须将 PHP 更改为作为 Apache 模块运行才能使 php 扩展工作。但现在我无法通过 PHP 脚本删除文件，因为权限被拒绝。我假设是因为现在“Apache”组正在尝试删除属于“psacln”的文件。如何允许 apache 删除这些文件？

编辑：ls -alF

```
drwxr-xr-x   2 fugitiveink psacln 4096 Nov 13 14:05 92/
drwxr-xr-x   2 fugitiveink psacln 4096 Nov 13 06:57 93/
drwxr-xr-x   2 fugitiveink psacln 4096 Nov 13 14:12 95/
drwxr-xr-x   2 fugitiveink psacln 4096 Dec 21 18:56 96/
drwxr-xr-x   2 fugitiveink psacln 4096 Dec 21 08:30 97/
drwxr-xr-x   2 fugitiveink psacln 4096 Nov 13 14:26 98/
drwxr-xr-x   2 fugitiveink psacln 4096 Nov 13 14:28 99/ 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-02T04:15:07.730

我假设您对该系统具有 shell 和 root 访问权限。如果是这样，您可以尝试将 apache 用户（通常是`apache`或`www-data`）添加到`/etc/group`文件中。

正确的方法是使用`usermod`，尽管我通常只是直接编辑文件。

简而言之，如果您的 apache 用户是`apache`，请尝试：

```
sudo usermod apache --append --groups psacln 
```

这基本上使 apache 用户可以访问 psacln 组拥有的任何文件和目录。

如果这不起作用，请发布具有文件权限 ( `ls -alF`) 的目录示例，我们可以从中进行处理。

编辑：

使用 nano 直接编辑组文件（替换为您喜欢的任何编辑器）：

```
sudo nano /etc/groups 
```

并找到`psacln`组并添加`apache`用户：

```
psacln:x:130:apache 
```

请注意，gid ( `130`) 无疑会有所不同。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-01-02T04:05:05.537

将上传目录的权限设置为 777（所有用户的 wrx）。你还能上传新文件吗？如果可以，您应该能够删除文件。

# android - Android SimpleAdapter 错误的数据项与列表行相关联

> ID：14116710
> 
> 赞同：1
> 
> 时间：2013-01-02T03:57:43.233
> 
> 标签：android, android-listview

我有一个与自定义 SimpleAdapter 关联的列表视图。我制作了自定义 SimpleAdapter，因为我想将不同的事件处理程序与包含的 textview 和 imageview 相关联，而不是其余的列表项小部件。所以，基本上我对列表项的两个部分有两个不同的事件处理程序。

我的 SimpleAdapter 自定义是：

```
class ClickableButtonListAdapter extends SimpleAdapter {

    private static class ViewHolder {
        TextView text;
        ImageView image;
    }

    public ClickableButtonListAdapter(Context context,
        List<? extends Map<String, ?>> data, int resource, String[] from, int[] to) {
        super(context, data, resource, from, to);
    }

    @SuppressWarnings("unchecked")
    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        final View view = super.getView(position, convertView, parent);
        ViewHolder holder = (ViewHolder) view.getTag();
        if(holder == null) {
            holder = new ViewHolder();
            holder.text = (TextView) view.findViewById(R.id.comments);
            holder.image = (ImageView) view.findViewById(R.id.arrow);
            view.setTag(holder);
            final Context context = view.getContext();
            final HashMap<String, String> article = (HashMap<String,String>) getItem(position);
            OnClickListener listener = new OnClickListener() {
                @Override
                public void onClick(View view) {
                    String item_id = article.get("item_id");
                    Intent intent = new Intent(context, HNewsCommentsActivity.class);
                    intent.putExtra("item_id", item_id);
                    context.startActivity(intent);
                }
            };
            holder.text.setOnClickListener(listener);
            holder.image.setOnClickListener(listener);
        }
        return view;
    }
} 
```

稍后，在我的 onCreate 活动中，我将我的自定义 SimpleAdapter 关联如下：

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        try {
            final ArrayList<HashMap<String, String>> articles = getHNewsFeed();
            final SimpleAdapter adapter = new ClickableButtonListAdapter(this,
                    articles, R.layout.article,
                    new String[] {"title", "urlShort", "score", "comments", "item_id"},
                    new int[] {R.id.title, R.id.url, R.id.score, R.id.comments, R.id.item_id}
                    );
            final ListView l = (ListView) findViewById(android.R.id.list);
            l.setAdapter(adapter);
            l.setOnItemClickListener( new OnItemClickListener() {
                @Override
                public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
                    final HashMap<String, String> article = articles.get(position);
                    String url = article.get("url");
                    Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
                    startActivity(intent);
                }
            });
        } catch (Exception e) {
            Log.w(TAG, e.getMessage());
            Toast.makeText(this, e.getMessage(), Toast.LENGTH_SHORT).show();
        }
    } 
```

我的问题是这些与包含的 textview 和 imageview 关联的事件处理程序（我在自定义 SimpleAdapter 的 getView 中初始化）似乎得到了错误的数据源项，并在单击时显示不同文章的数据。然而，listview 项单击处理程序获取正确的数据源项。有人可以帮我指出为什么我与自定义 SimpleAdapter 的 getView 中的 textview 和 imageview 关联的事件处理程序不能正常工作吗？我的理解是 SimpleAdapter 的 'getItem(position)' 方法应该返回正确的数据源项。但由于某种原因，它似乎没有这样做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T04:19:24.687

你的逻辑有错误。Adapter的getView方法被调用很多次，一个View可以在不同的时间段显示不同的item。

那么它是如何工作的：

当 ListView 想要一个项目时，它会从 Adapter 类调用 getView 方法（无论该视图是否应该显示给用户或仅用于计算视图项目的大小）。ListView 传递 convertView 参数 - 这是此适配器前一段时间返回的旧视图，现在不需要了。可以重复使用它而不是再次膨胀（超级方法是这样的）。这是您的代码问题。如果将旧视图传递给您的 getView 方法，则它已经具有标记对象。而你的 (holder == null) == false。因此，代表一篇文章的视图打开了另一篇文章。

尝试改变你的逻辑来解决这个错误。最好的方法是只创建一次持有者，每次都设置视图监听器。

希望这会有所帮助。

编辑。这是解决问题的两种方法。

```
@SuppressWarnings("unchecked")
@Override
public View getView(final int position, View convertView, ViewGroup parent) {
    final View view = super.getView(position, convertView, parent);
    ViewHolder holder = (ViewHolder) view.getTag();
    if(holder == null) {
        holder = new ViewHolder();
        holder.text = (TextView) view.findViewById(R.id.comments);
        holder.image = (ImageView) view.findViewById(R.id.arrow);
        view.setTag(holder);
    }

    final Context context = view.getContext();
    final HashMap<String, String> article = (HashMap<String,String>) getItem(position);
    OnClickListener listener = new OnClickListener() {
        @Override
        public void onClick(View view) {
            String item_id = article.get("item_id");
            Intent intent = new Intent(context, HNewsCommentsActivity.class);
            intent.putExtra("item_id", item_id);
            context.startActivity(intent);
        }
    };
    holder.text.setOnClickListener(listener);
    holder.image.setOnClickListener(listener);

    return view;
} 
```

第二，我更爱。感谢 Vinay S Shenoy 提供这个版本。

```
@SuppressWarnings("unchecked")
@Override
public View getView(final int position, View convertView, ViewGroup parent) {
    final HashMap<String, String> article = (HashMap<String,String>) getItem(position);

    final View view = super.getView(position, convertView, parent);
    ViewHolder holder = (ViewHolder) view.getTag();
    if(holder == null) {
        holder = new ViewHolder();
        holder.text = (TextView) view.findViewById(R.id.comments);
        holder.image = (ImageView) view.findViewById(R.id.arrow);
        view.setTag(holder);
        final Context context = view.getContext();
        OnClickListener listener = new OnClickListener() {
            @Override
            public void onClick(View view) {
                String item_id = view.getTag();
                //String item_id = article.get("item_id");
                Intent intent = new Intent(context, HNewsCommentsActivity.class);
                intent.putExtra("item_id", item_id);
                context.startActivity(intent);
            }
        };
        holder.text.setOnClickListener(listener);
        holder.image.setOnClickListener(listener);
    }

    holder.text.setTag(article.get("item_id"));
    holder.image.setTag(article.get("item_id"));

    return view;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T04:09:49.210

问题是因为文章对象是在 OnClickListener 之外创建的。

您需要做的是将 item_id 作为标签保存在 TextView 和 ImageView 中。在 res/strings.xml 文件中添加两个字符串，其 ID 为 tag_holder 和 tag_item_id。然后，像这样更改您的 getView() 。

```
 @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        final View view = super.getView(position, convertView, parent);
        ViewHolder holder = (ViewHolder) view.getTag(R.string.tag_holder);
        if(holder == null) {
            holder = new ViewHolder();
            holder.text = (TextView) view.findViewById(R.id.comments);
            holder.image = (ImageView) view.findViewById(R.id.arrow);
            view.setTag(R.string.tag_holder, holder);
            final Context context = view.getContext();

            OnClickListener listener = new OnClickListener() {
                @Override
                public void onClick(View view) {
                    String item_id = (String)view.getTag(R.string.tag_item_id);
                    //String item_id = article.get("item_id");
                    Intent intent = new Intent(context, HNewsCommentsActivity.class);
                    intent.putExtra("item_id", item_id);
                    context.startActivity(intent);
                }
            };
            holder.text.setOnClickListener(listener);
            holder.image.setOnClickListener(listener);
        }

         final HashMap<String, String> article = (HashMap<String,String>) getItem(position);

            holder.text.setTag(R.string.tag_item_id, article.get("item_id");
            holder.image.setTag(R.string.tag_item_id, article.get("item_id");
        return view;
    } 
```

此外，我建议不要为每个列表项创建新的 OnClickListener()，因为此 OnClick 侦听器仅依赖于 View Tag。相反，在适配器的构造函数中实例化您的侦听器，并对所有 List 项使用相同的实例。

# php - hash_hmac 如何处理十六进制输入？

> ID：14116711
> 
> 赞同：2
> 
> 时间：2013-01-02T03:58:05.520
> 
> 标签：php, hmacsha1

我正在尝试在 php 中对一些十六进制字节进行 hmac 哈希。不确定我是否正确理解散列或十六进制表示，因为 2 个散列不匹配，例如

```
<?php
echo bin2hex("\x32\x45\xff\xca".pack("N",1))."\n";
echo hash_hmac('sha1', '\x32\x45\xff\xca\x00\x00\x00\x01', 'secret')."\n";
echo hash_hmac('sha1', '\x32\x45\xff\xca'.pack("N",1), 'secret')."\n"; 
```

给

```
3245ffca00000001
3710e984df2fe4c53e0a9760cf0480357c6e431c
6308db257308f3466430807eb622489c7fff84df 
```

字节对我来说似乎是相同的，但它们给出了不同的哈希......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T08:01:42.633

你猜怎么着，原来我需要的是使用双引号而不是单引号，而且这两个哈希`'\x32\x45\xff\xca\x00\x00\x00\x01'`都是不正确的。

所以

```
echo hash_hmac('sha1', "\x32\x45\xff\xca\x00\x00\x00\x01", 'secret')."\n";
echo hash_hmac('sha1', "\x32\x45\xff\xca".pack("N",1), 'secret')."\n"; 
```

给出正确的东西

```
cde1e3710b6265b77fd4ac84293e20d981e92a6a
cde1e3710b6265b77fd4ac84293e20d981e92a6a 
```

微妙但真实，在[这里测试一下](http://codepad.org/F23bOmTV)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T06:17:52.043

这是因为在您的输入中：

```
 echo hash_hmac('sha1', '\x32\x45\xff\xca\x00\x00\x00\x01', 'secret')."\n";
      echo hash_hmac('sha1', '\x32\x45\xff\xca'.pack("N",1), 'secret')."\n"; 
```

要成为 d 的字符串`hash_hmac`是不同的，

```
 echo '\x32\x45\xff\xca\x00\x00\x00\x01'; // output : \x32\x45\xff\xca\x00\x00\x00\x01
     echo '\x32\x45\xff\xca'.pack("N",1);     // output : \x32\x45\xff\xca 
```

这就是为什么你的答案会有所不同。

# algorithm - 使用集合生成子字符串

> ID：14116712
> 
> 赞同：2
> 
> 时间：2013-01-02T03:58:18.470
> 
> 标签：algorithm, data-structures, set

我的朋友在他的采访中被问到一个问题。

如何找到给定字符串的所有可能子字符串？我知道这可以使用许多技术来解决，但后来他得到了一个提示，那就是使用集合来解决它。

我无法弄清楚如何使用集合来做到这一点。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T04:02:49.670

根据定义，集合仅包含一个元素的一个副本。使用集合来解决这个问题将消除在输出集中包含重复子字符串的可能性。

假设您正在迭代此字符串：

```
aabbaa 
```

寻找长度为 2 的子字符串，并随时将它们添加到集合中。

你会发现：

```
aa
ab
bb
ba
aa 
```

其中第一个和最后一个是重复的，因此将丢弃一个。

# jquery - 无法在函数外部声明全局变量

> ID：14116718
> 
> 赞同：1
> 
> 时间：2013-01-02T04:00:08.540
> 
> 标签：jquery, global, var

尽我所能尝试我无法使用全局变量在函数之外获取我的数据。我已经尝试了所有我能想到的方法，包括 window.nuTime 都没有成功。

```
$.ajax({
    cache: false,
    type: 'POST',              
    url: 'servertime.asp',
    data: {},
    success:    function (data) {
                $('#servertime').html(data);
                window.nuTime = data;
                //alert(data);
                },
    error:      function (jxhr, msg, err) {
                $('#response').append('<li style="color:red">' + msg + '</li>');
                }
    });

alert(nuTime); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T04:09:22.657

科林是对的！你可以这样改进：

```
$.ajax({
    cache: false,
    type: 'POST',              
    url: 'servertime.asp',
    data: {},
    success:    function (data) {
                    $('#servertime').html(data);
                    alertNuTime(data);
                },
    error:      function (jxhr, msg, err) {
                    $('#response').append('<li style="color:red">' + msg + '</li>');
                }
    });

function alertNuTime(data) {
    alert(data);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T04:02:44.237

当`alert(nuTime)`被调用时，AJAX 还没有返回。任何取决于结果的东西都必须在成功处理程序中（或由所述处理程序调用）

编辑：您可以像这样实现“延迟”：

```
function someFunctionThatDependsOnAjaxBeingDone(arg1,arg2,arg3) {
    if( typeof nuTime === "undefined") {
        var t = this, ac = arguments.callee, arg = arguments;
        setTimeout(function() {ac.apply(t,arg);},100);
    }
    else {
        // normal function stuff here
    }
} 
```

但是，除非您手动转换`arguments`为数组，否则这在某些浏览器中不起作用，并且它也不能与返回值一起正常工作。

# android - 如果不立即与 JellyBean 中的 RecognitionListener 对话，则冻结

> ID：14116724
> 
> 赞同：9
> 
> 时间：2013-01-02T04:01:48.200
> 
> 标签：android, speech-recognition, android-4.2-jelly-bean

我正在开发的基于语音识别的应用程序适用于从 API 8（Android 2.2）开始的所有 Android 版本。

但在 Nexus S 4G (Android 4.1.1) 上，RecognitionListener 将简单地**停止大约 1 分钟，然后通过其**[onError()](http://developer.android.com/reference/android/speech/RecognitionListener.html#onError%28int%29)回调发出 ERROR_SERVER 。

如果在**1-2**秒内（在[onReadyForSpeech](http://developer.android.com/reference/android/speech/RecognitionListener.html#onReadyForSpeech%28android.os.Bundle%29)哔声之后）说话，它将按预期正常运行。

JellyBean 发生了什么变化可以解释这种行为？

更重要的是，有没有办法让它像旧版本的 Android 一样运行？**（即继续听，如果在默认的10 秒**内没有说话，则发出 ERROR_SPEECH_TIMEOUT ）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T19:30:01.277

我最终使用了[@scriptocalypse建议的解决方案](https://stackoverflow.com/a/14223908/679180)

谢谢@scriptocalypse！

（我没有机会尝试[@HoanNguyen](https://stackoverflow.com/a/14950616/679180)建议的解决方案，因为它实现了一项超出我的小应用程序范围的服务，但它看起来很有希望。也谢谢@HoanNguyen。）

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-08T21:05:20.873

这里有一个[类似的帖子](https://stackoverflow.com/questions/11196052/speechrecognizer-not-hearing-after-first-result)，提供了在收到 ERROR_TIMEOUT_SPEECH 结果时再次收听的建议。

# android - 我将如何从我的 android 程序中打印文本？

> ID：14116726
> 
> 赞同：0
> 
> 时间：2013-01-02T04:02:20.920
> 
> 标签：android, printing

我想知道如何将一些文本内容从我的 android 应用程序打印到物理打印机。我发布了一个类似的问题，但答案似乎对我不起作用。我想知道一些 API 或任何其他可以解决我的问题的替代方案。任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T04:32:13.633

我尝试过的唯一没有痛苦的解决方案是使用谷歌的云打印功能：[http](http://www.google.com/cloudprint/learn/apps.html) ://www.google.com/cloudprint/learn/apps.html 。

从他们的文档到上述参考页面的底部，有以下关于从移动设备打印的说明。诀窍是您的文档应该可以从 Gmail 或 Google Docs 获得。如果那是您拥有东西的地方，那么这可能是您的选择。

> 如果您通过手机浏览器访问 Gmail 或 Google Docs，则可以通过 Google 云打印打印任何电子邮件、文档、电子表格或其他 Docs 文件。使用新的 print2docs 功能，您还可以将您希望的任何文件“打印”到您的 Docs 帐户以进行安全保存。由谷歌制作。从您的手机访问[http://m.google.com](http://m.google.com)

# ios - 在 UIButtons 上绘图

> ID：14116727
> 
> 赞同：2
> 
> 时间：2013-01-02T04:02:26.703
> 
> 标签：ios, cocoa-touch, drawing

我目前正在编写一个将日历作为其屏幕之一的应用程序。对于日历，我需要在数字下方放置彩色圆圈以表示那些日子的活动。

我倾向于在日历中的每一天使用 UIButton，这样我就可以为所有按钮分配相同的功能（包括每天处理彩色圆圈的自定义绘图例程）。

是否可以即时绘制彩色圆圈，或者我应该使用预先制作的图像达到一定数量的事件（彩色圆圈）？

其次，如果我可以即时绘制这些，有人可以指出所涉及的类的文档让我这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T04:39:08.070

我认为您正在寻找的是`(UIBezierPath *)bezierPathWithOvalInRect:(CGRect)rect`.

该类的文档可以在[UIBezierPath 类参考中找到](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIBezierPath_class/Reference/Reference.html#//apple_ref/occ/cl/UIBezierPath)

# c# - RelayCommand 与 EventToCommand

> ID：14116734
> 
> 赞同：2
> 
> 时间：2013-01-02T04:03:10.010
> 
> 标签：c#, wpf, mvvm, mvvm-light, routed-commands

我对Mvvmlight`RelayCommand`和`EventToCommand`在 Mvvmlight 中有点困惑。似乎`EventToCommand`处理`EventTrigger`并调用一个`RelayCommand`来做工作。如：

```
 <i:Interaction.Triggers>
        <i:EventTrigger x:Uid="i:EventTrigger_1" EventName="MouseLeftButtonUp">
            <cmd:EventToCommand x:Uid="cmd:EventToCommand_1" Command="{Binding Form_MouseLeftButtonUpCommand}" PassEventArgsToCommand="True"/>
        </i:EventTrigger>
    </i:Interaction.Triggers> 
```

我的理解正确吗？

那么，我们可以`RelayCommand`直接使用 with `EventTrigger`，而不需要使用`EventToCommand`吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T04:20:15.807

[`EventToCommand`](http://geekswithblogs.net/lbugnion/archive/2009/11/05/mvvm-light-toolkit-v3-alpha-2-eventtocommand-behavior.aspx)是一种[自定义行为](http://msdn.microsoft.com/en-us/library/ff725476%28v=expression.40%29.aspx)。它首先由[Expression blend](http://blogs.msdn.com/b/expression/archive/2009/03/30/behaviors-under-the-hood-api-details-and-constraining-the-type.aspx)团队提供，现在是[WPF 4](http://msdn.microsoft.com/en-us/library/ms749011.aspx)的一部分。如果您不使用 WPF4。[您需要从这里](http://www.microsoft.com/downloads/en/details.aspx?FamilyID=f1ae9a30-4928-411d-970b-e682ab179e17&displaylang=en)获得 Blend SDK 。

行为将功能封装为可重用组件。这些将在默认情况下不存在功能时使用。例如向标签、组合框等添加命令支持。

> 我们可以直接使用 RelayCommand 和 EventTrigger，而不需要使用 EventToCommand 吗？

No.`RelayCommand`是避免代码冗余以定义自定义命令的快捷方式。它扩展`ICommand`了可以为`Execute(T)`和附加的委托`CanExecute(T)`。它类似于[`DelegateCommand`](http://msdn.microsoft.com/en-us/library/ff654132.aspx)Prism 库。

```
<cmd:EventToCommand x:Uid="cmd:EventToCommand_1" Command="{Binding Form_MouseLeftButtonUpCommand}" PassEventArgsToCommand="True"/> 
```

上一行`cmd:EventToCommand`是基础控件的附加功能。`Form_MouseLeftButtonUpCommand`是`Command`它执行的。该命令可以封装为`RelayCommand`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T08:27:57.490

感谢 Tilak 的有用回答。

根据 Tilak 的解释，我确实搞砸了，比如将绑定放在事件处理程序中（例如**Button GotFocus="{Binding DoJob}"**）-> 构建失败，发现像这样的事件处理程序不支持绑定。我们只能在Command中进行绑定（比如**Button Command="{Binding DoJob}"** />，这种情况下会调用默认事件，有button的话应该是Click事件）。做一些愚蠢的事情会帮助我更多地了解生活 - LOL

> 我们可以直接使用 RelayCommand 和 EventTrigger，而不需要使用 EventToCommand 吗？

实际上，我打算不使用 EventToCommand，我找到了解决方案：改用 InvokeCommandAction（属于 System.Windows.Interactivity - Mvvm-light 也指此程序集）。

# neo4j - 具有可变关系路径长度的 Neo4j 密码查询

> ID：14116741
> 
> 赞同：2
> 
> 时间：2013-01-02T04:04:37.500
> 
> 标签：neo4j, cypher

我正在将我的复杂用户数据库移动到 Neo4j，用户可以在其中加入多个团队之一，彼此成为朋友等等。在 RDBMS 中执行此操作既痛苦又缓慢，但使用 Neo4j 非常简单且令人兴奋。:)

我希望有一种方法可以查询

*   距离一跳的关系和
*   另一种关系是 2 跳远

从同一个查询。

```
START n=node:myIndex(user='345')
MATCH n-[:IS_FRIEND|ON_TEAM*2]-m
RETURN DISTINCT m; 
```

原因是作为朋友的用户彼此相距一条边，但由团队链接的用户是通过该团队节点链接的，因此他们相距两条边。此查询执行 IS_FRIEND*2 和 ON_TEAM*2，获取队友（是的）和朋友的朋友（嘘）。

Cypher 中是否有一种简洁的方法可以在单个查询中获得不同长度的关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T19:15:45.327

我重写了它以返回一个集合：

```
start person=node(1) 
match person-[:IS_FRIEND]-friend 
with person, collect(distinct friend) as friends 
match person-[:ON_TEAM*2]-teammate 
with person, friends, collect(distinct teammate) as teammates 
return person, friends + filter(dupcheck in teammates: not(dupcheck in friends)) as teammates_and_friends 
```

[http://console.neo4j.org/r/oo4dvx](http://console.neo4j.org/r/oo4dvx)

感谢您将样本数据库放在一起，Werner。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T12:02:00.723

我在[http://console.neo4j.org/?id=sqyz7i创建了一个小型测试数据库](http://console.neo4j.org/?id=sqyz7i)

我还创建了一个查询，它将按照您的描述工作：

```
START n=node(1) 
MATCH n-[:IS_FRIEND]-m 
WITH collect(distinct id(m)) as a, n 
MATCH n-[:ON_TEAM*2]-m 
WITH collect(distinct id(m)) as b, a
START n=node(*) 
WHERE id(n) in a + b
RETURN n 
```

# ruby-on-rails - 如何更改已使用 Devise 的令牌进行身份验证的用户的“登录后路径”？

> ID：14116745
> 
> 赞同：4
> 
> 时间：2013-01-02T04:04:50.400
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我在我的应用程序控制器中覆盖了 after_sign_in_path_for，如下所示：

**application_controller.rb**

```
def after_sign_in_path_for resource
  case resource
    when User
        blah
    when Admin
        blah
  end
end 
```

这在用户通过登录页面登录时有效。但是当用户通过[Devise 的](https://github.com/plataformatec/devise)[Token Authenticatable](http://rubydoc.info/github/plataformatec/devise/master/Devise/Models/TokenAuthenticatable)模块`after_sign_in_path_for`登录时，方法根本不会被调用。用户被带到. 我怎样才能改变这个？ `root_path`

我正在使用 Rails 3.2.0、ruby 1.9.3p194 和 Devise 2.1.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T06:29:45.600

我建议您看一下[Devise 自己的 ConfirmationsController](https://github.com/plataformatec/devise/blob/master/app/controllers/devise/confirmations_controller.rb)，它在我看来就像它调用 after_sign_in_path_for ，并且资源将是我假设的用户。但可能需要用您自己的控制器覆盖该控制器，因此您可以在确定之前记录资源。

# redirect - 当我尝试在 Joomla 中使用值传递参数时，为什么 wyciwyg 重定向

> ID：14116746
> 
> 赞同：2
> 
> 时间：2013-01-02T04:05:00.497
> 
> 标签：redirect, pagination, joomla2.5

当我尝试使用诸如 ?page=1 之类的值传递变量时，它重定向为`http://wyciwyg://{number}`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T04:57:06.627

终于得到了线索，`<script>`从自定义模块中删除了标签并解决了。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T05:17:18.863

简单的，

您可以从 TinyMCE 插件基本选项中的禁止元素列表中删除脚本标签。

# bash - 需要将文本文件的内容分配给 bash 脚本中的变量

> ID：14116748
> 
> 赞同：51
> 
> 时间：2013-01-02T04:05:15.437
> 
> 标签：bash

我对制作 bash 脚本非常陌生，但我的目标是获取一个我拥有的 .txt 文件并将 txt 文件中的单词字符串分配给一个变量。我已经尝试过了（不知道我是否在正确的轨道上）。

```
#!/bin/bash
FILE="answer.txt"
file1="cat answer.txt"
print $file1 
```

当我运行这个时，我得到

```
Warning: unknown mime-type for "cat" -- using "application/octet-stream"
Error: no such file "cat"
Error: no "print" mailcap rules found for type "text/plain" 
```

我能做些什么来完成这项工作？

编辑** 当我将其更改为：

```
#!/bin/bash
    FILE="answer.txt"
    file1=$(cat answer.txt)
    print $file1 
```

我得到了这个：

```
Warning: unknown mime-type for "This" -- using "application/octet-stream"
Warning: unknown mime-type for "text" -- using "application/octet-stream"
Warning: unknown mime-type for "string" -- using "application/octet-stream"
Warning: unknown mime-type for "should" -- using "application/octet-stream"
Warning: unknown mime-type for "be" -- using "application/octet-stream"
Warning: unknown mime-type for "a" -- using "application/octet-stream"
Warning: unknown mime-type for "varible." -- using "application/octet-stream"
Error: no such file "This"
Error: no such file "text"
Error: no such file "string"
Error: no such file "should"
Error: no such file "be"
Error: no such file "a"
Error: no such file "varible." 
```

当我输入 cat answer.txt 时，它会打印出这个文本字符串应该是一个变量，但是，我仍然无法让 bash 用这个变量来做到这一点。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-01-02T04:06:41.467

您需要反引号来捕获命令的输出（并且您可能想要`echo`而不是`print`）：

```
file1=`cat answer.txt`
echo $file1 
```

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2013-01-02T07:28:51.483

在 bash 中，`$(< answer.txt)`等价于`$(cat answer.txt)`，但是是内置的，因此更快、更安全。请参阅[bash 手册](https://www.gnu.org/software/bash/manual/html_node/Command-Substitution.html)。

我怀疑你正在运行这个[`print`](http://man.cx/print)：

```
NAME  
    run-mailcap, see, edit, compose, print − execute programs via entries in the mailcap file 
```

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2013-01-02T04:07:07.963

该`$()`构造`stdout`从命令返回。

```
file_contents=$(cat answer.txt) 
```

# jquery - 为 jQuery 验证插件动态设置规则/消息对象

> ID：14116750
> 
> 赞同：2
> 
> 时间：2013-01-02T04:06:02.550
> 
> 标签：jquery, jquery-validate

我确信有更好的方法来实现这一点，但无法弄清楚。我有一个表格，顶部有 2 个始终需要的字段。然后，我有一系列选项卡，它们在选择时加载到不同的字段中（加载单独的 HTML 块，以便在提交表单时只提交当前在 DOM 中的内容）。我正在使用 jquery 验证插件（[http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)），它允许您在每组新字段加载时将验证规则/消息设置为一个对象，以删除冗余规则和随着字段的变化添加新的。问题是规则/消息对象都必须写入 js 以供需要时使用，而且文件很长，而且看起来效率很低。这是我的伪代码：

```
<form>
    <input1 (always on page) />
    <input2 (always on page) />
    <ul id="nav-tabs">
        <li id="tab1"></li>
        <li id="tab2"></li>
        <li id="tab3"></li>
    </ul>
    <div id="dynamic-content">
        <!-- different form fields load in here from separate html files, all requiring different rules in addition to the 2 fields always on the page -->
    </div>
    <input type="submit" />
</form> 
```

我在想可能有一些解决方案可以在设置的每个 HTML 块中加载规则？有没有人做过这样的事情？

感谢任何能提供帮助的人。吨

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T18:55:39.973

使用内置`rules()`方法添加规则。 [请参阅文档。](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)

注意：调用*后***必须**调用该方法。*`.validate()`*

 *[jsFiddle 演示](http://jsfiddle.net/kSFKE/2/)

```
$("#form").validate({
    // my other options
});

// the following method must come AFTER .validate()

$(".myClass").each(function() {
    $(this).rules('add', {
        required: true,
        minlength: 5
    });
}); 
```

以下与 custom 结合使用`messages:`。请注意，格式与将规则添加为选项时略有不同`.validate()`...

```
$(".myClass").each(function() {
    $(this).rules('add', {
        required: true,
        minlength: 5,
        messages: {
            required: "Required input",
            minlength: jQuery.format("At least {0} characters are necessary")
        }
    });
}); 
```

**当您向表单动态添加字段时，此方法也非常有用。**

```
var myRule = {
    required: true,
    minlength: 5,
    messages: {
        required: "Required input",
        minlength: jQuery.format("At least {0} characters are necessary")
    }
}

$("#myform").append('<input type="text" name="four" /><br />');
$("[name='four']").rules('add', myRule); 
```

**jsFiddle 演示：**

[http://jsfiddle.net/kSFKE/10/](http://jsfiddle.net/kSFKE/10/)

`remove`如果您要动态销毁不需要的字段输入，则无需使用删除规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T23:07:15.893

如果它只是您需要的简单验证，您可以使用`class`每个属性`input`来验证它。

**HTML**

```
<input type="text" name="input1" class="required" /> 
```

**Javascript**

```
$("#Form").validate(); 
```

**[演示](http://jsfiddle.net/AhScD/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T04:23:48.607

还有一种`rules()`方法具有动态规则更改`add`的`remove`子方法

[http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)

示例（来自文档）：

```
$("#myinput").rules("add", {
 minlength: 2
}); 
```

许多人也没有意识到字段上的类的简单性。

对于您将在规则对象中使用布尔值的简单规则，用作类的相同规则名称将自动注册该字段。您创建的任何方法也是如此。

您还可以考虑`data-`在添加/删除元素时使用属性来帮助修改规则。可以循环遍历新元素或旧元素并使用`data-`属性解析到`rules()`方法中

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-06-30T03:15:28.433

有人问如何动态应用规则；

```
 <?php
    $form_rules = array(
    'user_login' => array(
    'required' => true,
    'minlength' => 4)
    );
    ?> 
```

然后在页面的头部

```
 <script>
        $(document).ready(function() {
            $('#portal_reg').validate({ // form id 
                'rules': <?php echo json_encode($form_rules); ?>
            });
        });
    </script> 
```*

# android - 分配变量时Android内存不足

> ID：14116757
> 
> 赞同：5
> 
> 时间：2013-01-02T04:07:38.847
> 
> 标签：android, memory, bitmap

所以我明白了：

```
'01-01 20:37:34.859: E/dalvikvm-heap(19921): Out of memory on a 6471856-byte allocation.' 
```

当试图将一堆变量分配给内存时。我正在分配 24 个变量，如下所示：

```
mElements.add(new ShopElement(getResources(),R.drawable.shop_starter, b1X , b1Y,true,1,"red",true,5,checkLocked(0))); 
```

其中之一：

```
bNumbers = new Bitmap[] {Bitmap.createScaledBitmap(BitmapFactory.decodeResource(getResources(), R.drawable.h0)
        , 65,65, true),
        Bitmap.createScaledBitmap(BitmapFactory.decodeResource(getResources(), R.drawable.h1)
        , 65,65, true),
        Bitmap.createScaledBitmap(BitmapFactory.decodeResource(getResources(), R.drawable.h2)
        , 65,65, true),
        Bitmap.createScaledBitmap(BitmapFactory.decodeResource(getResources(), R.drawable.h3)
        , 65,65, true),
        Bitmap.createScaledBitmap(BitmapFactory.decodeResource(getResources(), R.drawable.h4)
        ,65,65,true),
        Bitmap.createScaledBitmap(BitmapFactory.decodeResource(getResources(), R.drawable.h5)
        , 65,65, true),
        Bitmap.createScaledBitmap(BitmapFactory.decodeResource(getResources(), R.drawable.h6)
        , 65,65, true),
        Bitmap.createScaledBitmap(BitmapFactory.decodeResource(getResources(), R.drawable.h7)
        , 65,65, true),
        Bitmap.createScaledBitmap(BitmapFactory.decodeResource(getResources(), R.drawable.h8)
        , 65,65, true),
        Bitmap.createScaledBitmap(BitmapFactory.decodeResource(getResources(), R.drawable.h9)
        , 65,65, true),
        Bitmap.createScaledBitmap(BitmapFactory.decodeResource(getResources(), R.drawable.time)
                , 50,50, true)}; 
```

但在我完成创建的 24 个元素中的第 16 个之前，它在某些手机上崩溃了。

我有一个**Galaxy S2**，它运行良好，但在**S3**和其他手机上它崩溃了。

我很乐意应要求提供更多信息。

我之前搜索过此错误，尝试应用解决方案，并查看了“有效显示位图”的内容，但似乎没有任何帮助。

令我头疼的是它适用于 S2，但不适用于 S3。S3不应该在各个方面都超过S2吗？

我正在使用全局 BitmapFactory.Options 来绘制我的所有位图，我将选项设置如下：

```
Global.opts = new BitmapFactory.Options();
    Global.opts.inDither=false;                     
    Global.opts.inPurgeable=true;                  
    Global.opts.inInputShareable=true;              
    Global.opts.inTempStorage=new byte[16 * 1024]; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T04:57:45.783

只是你试图访问更多的内存然后你有。因此**解决方案是增加内存或仅使用可用内存**。

三个建议这样做。

1）如果您正在使用`BitmapFactory.Options`并且错误仍然存​​在，那么这意味着您没有为给定的图像使用正确的配置。**只要确保堆大小足够**。

```
 BitmapFactory.Options opts=new BitmapFactory.Options();
        opts.inDither=false;                     //Disable Dithering mode
        opts.inSampleSize = 8;                    // scale image upto 1/8 of the original image.
        opts.inPurgeable=true;                   //Tell to gc that whether it needs free memory, the Bitmap can be cleared
        opts.inInputShareable=true;              //Which kind of reference will be used to recover the Bitmap data after being clear, when it will be used in the future
        opts.inTempStorage=new byte[16 * 1024]; //you can increase this value as per your need. 
```

您可以使用属性增加`inTempStorage`大小以使其工作或图像。有关采样的更多信息，您可以参考此[链接](https://stackoverflow.com/questions/3331527/android-resize-a-large-bitmap-file-to-scaled-output-file/8497703#8497703)。`sample``inSampleSize`

尝试使用不同的选项。它应该工作。

2) 您还可以通过在文件中使用[android:largeHeap="true"](http://developer.android.com/reference/android/R.styleable.html#AndroidManifestApplication_largeHeap)`manifest`属性来增加应用程序的整体堆大小，但这不适用于任何预 Honeycomb 设备。在 2.3 之前的设备上，您可以使用 VMRuntime 类。

3）如果您想以编程方式检测堆大小并希望根据需要更改它，那么您可以点击此[链接](https://stackoverflow.com/questions/2630158/detect-application-heap-size-in-android)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T04:32:24.457

该错误清楚地表明您正在尝试使用更多内存。这直接指向图像大小。因此，您需要调整图像大小以使用更少的内存。出于这个原因可以使用的一个是[BitmapFactory.Option](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inSampleSize)。或者手动调整图像大小，注意它是否适合您的所有需求。只是为了说明问题，

> 堆大小是分配给应用程序执行的内存量。android 应用程序的堆大小由设备 RAM 决定。例如，如果设备的 RAM 为 179 MB，则 android 应用程序只会获得 18MB 的堆大小。

[在这里](http://www.mindfiresolutions.com/Memory-Optimization-2040.php)找到更多。有关如何有效加载大型位图的更多信息，请参见[此处](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)。

> 我有一个 Galaxy S2，它运行良好，但在 S3 和其他手机上它崩溃了

检查您提到的设备的 RAM 大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T04:30:11.687

在 Android 内存管理中，每个应用程序都有一个可以使用的**最大堆内存**，一旦应用程序使用的堆内存超过了堆内存，Android 操作系统会自动杀死该应用程序。所以只有你得到**“内存不足异常”..**

要解决这个问题，您可以**使用 Android 的 NDK 概念**。因为堆概念是针对 SDK 部分的。

IE，

您可以使用 NDK 使应用程序使用超过 300MB（如果可用）的 RAM，但在 SDK 中是不可能的

# android - Android：拖放后在指定LinearLayout中勾选指定Imageview

> ID：14116762
> 
> 赞同：1
> 
> 时间：2013-01-02T04:09:13.780
> 
> 标签：android, android-layout

我想知道是否有一种方法，我可以在将ImageView拖放到LinearLayout之后调用检查是否在指定LinearLayout中指定Imageview？

例如：

我有一个 Bicycle ImageView 并将其放入 Transport LinearLayout。

如果将自行车 ImageView 拖放到 Transport LinearLayout 中，是否有任何 android java 方法可以检查/调用/使用？

# css - 为什么我不能在 Firefox 中绝对定位生成的内容？

> ID：14116774
> 
> 赞同：2
> 
> 时间：2013-01-02T04:11:12.397
> 
> 标签：css, firefox, css-selectors

我正在创建一个水平导航栏。这是它的CSS：

```
#topnav {
    clear: both;
    overflow: hidden;
    display: table;
}

#topnav ul {
    display: table-row;
}

#topnav ul li {
    display: table-cell;
    vertical-align: middle;
    background: #1b4260;
    position: relative;
}

#topnav a {
    display: block;
    color: white;
    padding: 10px 0px 15px 10px;
    font-size: 14px;
    width: 100px;
    text-align: center;
}

#topnav ul li+li:before{
    content: "*";
    position: absolute;
    top: 11px;
    color: #ff0000;
    float: left;
} 
```

这是HTML：

```
<p>---</p>
<p>---</p>
<div id="topnav">
    <ul>
        <li>
            <a href="blah">Item 1</a>
        </li>
        <li>
            <a href="blah">Item 2</a>
        </li>
        <li>
            <a href="blah">Item 3</a>
        </li>
    </ul>
</div> 
```

这将创建一个带有小星号分隔符的导航栏。它在每个浏览器中看起来都很好......

![](../Images/d16d4d761b2c8041c5875478483866fc.png)

...除了火狐。Firefox 在生成的内容上忽略“位置：绝对”：

![](../Images/b84ba6b6f37f72190fc51166efc552b4.png)

为什么会这样做？我的 CSS 做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T04:20:24.343

您还需要定位 ul：

```
#topnav ul {
    display: table-row;
    position:absolute;
} 
```

见这里：http: [//jsfiddle.net/k5hVP/1/](http://jsfiddle.net/k5hVP/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T04:24:22.290

我知道这并不理想，但我找到了一种方法来做到这一点，无需定位到顶部，也无需绝对定位`ul`. 您删除顶部定位，并使用 margin-top 来调整星号的位置。

[http://jsfiddle.net/ajPLB/7/](http://jsfiddle.net/ajPLB/7/)

Jani 的解决方案与我有关，因为`position:relative`理论上也应该有效（而且它是侵入性较小的解决方案），但它没有，这意味着该解决方案与正常的定位优先级没有任何关系，并且似乎依赖于Firefox 处理定位优先级的一些奇怪方式。

# sql - 获取 PDO SQL 的数组中存在 2 个字段的所有行？

> ID：14116780
> 
> 赞同：0
> 
> 时间：2013-01-02T04:12:24.270
> 
> 标签：sql, pdo

我有一个结构如下的数组：

```
Array
(
    [0] => Array
        (
            [0] => 1 //x
            [1] => 3 //y
        )

    [1] => Array
        (
            [0] => 8 //x
            [1] => 7 //y
        )

    [2] => Array
        (
            [0] => 9 //x
            [1] => 9 //y
        )
) 
```

我想知道的是有一种方法可以进行查询以获取所有行，其中 2 个字段与第二级数组的任何一对值匹配，例如说我有 2 行：

```
 |  uid  |  id  |  x  |  y  |
    - - - - - - - - - - - - - 
   |   1   |  1   |  1  |  3  |  //both x and y exist together 
   |   1   |  1   |  9  |  9  |  //both x and y exist together
   |   1   |  1   |  9  |  5  |  //no combination do not select this 
```

我试图避免循环数组并使用`SELECT`每次迭代，但宁愿以某种方式直接在我的查询中执行它以降低循环量。

这是完全可能的还是我唯一的选择来循环数组并一次查询每个......随着数组长度的增长，这对我来说似乎非常密集！

我希望也许有一些`in_array`方法`SQL`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T04:44:24.367

我的建议是从您提供的数组中生成一个长查询。

```
<?php
$arr = array(
    array(1,3),
    array(8,7),
    array(9,9)
);

function wherify($val) {
    return "(`x` = ".$val[0]." AND `y` = ".$val[1].")";
}

$criteria = implode(" OR ", array_map("wherify", $arr));

$query = "SELECT * FROM `table` WHERE $criteria";
echo $query; 
```

这将创建一个如下所示的查询。

```
SELECT * FROM `table`
    WHERE (`x` = 1 AND `y` = 3)
       OR (`x` = 8 AND `y` = 7)
       OR (`x` = 9 AND `y` = 9) 
```

[（执行）](http://ideone.com/JWuicc)

# android - 离线时从 Jsoup 连接获取数据缓存

> ID：14116782
> 
> 赞同：0
> 
> 时间：2013-01-02T04:13:00.633
> 
> 标签：android, jsoup

我有一个问题，当设备在线时，我可以将新闻阅读到我的网站，我解析使用库 jsoup，但是当设备离线时，阅读的页面将为空，我的问题是离线时我如何还在读已经读过的新闻，是否存储在缓存中，如果存储了如何获取？我下面的代码是来自我的网站的数据，我将其放入变量 DATA 中。谢谢。

> 公共静态字符串数据；

```
private void setData() {
        DATA = "";
        final String URI = ""http://megapolitan.kompas.com/read/2013/01/02/10533531/BMW.Rasyid.Rajasa.Diselimuti.Plastik.Abuabu"";
        new Thread() {
            public void run() {
                try {
                    DATA = new LoadNews().execute(URI).get();
                } catch (Exception e) {
                }
            }
        }.start();
}

private class LoadNews extends AsyncTask<String, Integer, String> {
    private String itemContent;

    protected void onPreExecute() {
        super.onPreExecute();
    }

    protected String doInBackground(String... params) {
        String url = params[0];
        Document doc;
        try {
            doc = Jsoup.connect(url).get();
            Elements element = doc.select("div.isi_berita2011 pt_5");
            itemContent = element.toString();
            return itemContent;
        } catch (IOException e) {
            e.printStackTrace();
        }

        return null;
    }

    protected void onPostExecute(String result) {
        dismissProgressDialog();
        super.onPostExecute(result);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T04:18:40.260

将您的数据放入缓存中。使用您的 URI 作为密钥。看看[Android 对象缓存](https://stackoverflow.com/questions/10841470/android-objects-cache)

内存缓存：http: [//developer.android.com/reference/android/util/LruCache.html](http://developer.android.com/reference/android/util/LruCache.html)

磁盘缓存：[https ://github.com/JakeWharton/DiskLruCache](https://github.com/JakeWharton/DiskLruCache)

# java - 尝试将本地依赖项添加到heroku java应用程序时接收无法解决依赖项错误

> ID：14116784
> 
> 赞同：1
> 
> 时间：2013-01-02T04:13:40.197
> 
> 标签：java, maven, heroku

我正在尝试按照 Heroku 上的“将非托管依赖项添加到 Maven 项目”一文，将本地 JAR 依赖项添加到 java 项目。我一直卡在更新 Pom 文件部分，它告诉我添加/更新存储库元素。我将示例存储库元素添加到我的 pom.xml 文件中，当我尝试将代码推送到 heroku 时，我收到以下错误：

> 无法在项目 fuji 上执行目标：无法解析项目 com.example.fuji:fuji:jar:1.0-SNAPSHOT 的依赖项：在项目中找不到工件 com.example.tambora:Tambora:jar:0.0.1-SNAPSHOT。当地的

似乎我将存储库 ID 或名称元素命名为错误，但我不知道它们也应该更改什么。我能够在本地运行此应用程序而不会收到任何错误。

这是我的 pom.xml 文件

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.example.fuji</groupId>
  <artifactId>fuji</artifactId>
  <version>1.0-SNAPSHOT</version>
  <name>Fuji</name>
  <url>http://maven.apache.org</url>
  <dependencies>
    <dependency>
      <groupId>com.example.tambora</groupId>
      <artifactId>Tambora</artifactId>
      <version>0.0.1-SNAPSHOT</version>
    </dependency>
    <dependency>
        <groupId>org.apache.tomcat.embed</groupId>
        <artifactId>tomcat-embed-core</artifactId>
        <version>7.0.22</version>
    </dependency>
    <dependency>
        <groupId>org.apache.tomcat.embed</groupId>
        <artifactId>tomcat-embed-logging-juli</artifactId>
        <version>7.0.22</version>
    </dependency>
    <dependency>
        <groupId>org.apache.tomcat.embed</groupId>
        <artifactId>tomcat-embed-jasper</artifactId>
        <version>7.0.22</version>
    </dependency>
    <dependency>
        <groupId>org.apache.tomcat</groupId>
        <artifactId>tomcat-jasper</artifactId>
        <version>7.0.22</version>
    </dependency>
    <dependency>
        <groupId>org.apache.tomcat</groupId>
        <artifactId>tomcat-jasper-el</artifactId>
        <version>7.0.22</version>
    </dependency>
    <dependency>
        <groupId>org.apache.tomcat</groupId>
        <artifactId>tomcat-jsp-api</artifactId>
        <version>7.0.22</version>
    </dependency>
  </dependencies>
  <build>
    <finalName>fuji</finalName>
    <plugins>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>appassembler-maven-plugin</artifactId>
            <version>1.1.1</version>
            <configuration>
                <assembleDirectory>target</assembleDirectory>
                <programs>
                    <program>
                        <mainClass>launch.Main</mainClass>
                        <name>webapp</name>
                    </program>
                </programs>
            </configuration>
            <executions>
                <execution>
                    <phase>package</phase>
                    <goals>
                        <goal>assemble</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
  </build>
  <repositories>
    <!--other repositories if any-->
    <repository>
        <id>project.local</id>
        <name>project</name>
        <url>file:${project.basedir}/repo</url>
    </repository>
</repositories>
</project> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T01:23:45.093

这可能是因为`com.example.tambora:Tambora:jar:0.0.1-SNAPSHOT`是 SNAPSHOT，但尚未为您的自定义存储库启用 SNAPSHOT。根据[Maven: The Complete Reference](http://www.sonatype.com/books/mvnref-book/reference/pom-relationships-sect-pom-syntax.html)，这是必需的：

> 作为默认设置，Maven 不会检查远程存储库上的 SNAPSHOT 版本。要依赖 SNAPSHOT 版本，用户必须明确启用使用 POM 中的存储库或 pluginRepository 元素下载快照的能力。

你应该可以[这样](http://maven.apache.org/pom.html#Repositories)：

```
<repository>
    <id>project.local</id>
    <name>project</name>
    <url>file:${project.basedir}/repo</url>
    <snapshots>
        <enabled>true</enabled>
    <checksumPolicy>fail</checksumPolicy>
  </snapshots>
</repository> 
```

此外，在本地解决此问题时，我建议删除您的`~/.m2/repo/com/example/tambora`目录，因为可能发生的情况是 Maven 在您的本地存储库中找到 JAR，而不是嵌入在您的项目中的那个。

# java - 将图像添加到 GridView 时 AsyncTask 崩溃

> ID：14116787
> 
> 赞同：0
> 
> 时间：2013-01-02T04:14:15.410
> 
> 标签：java, android, android-layout

我已经设置了一个`GridView`来保存一些从 SD 卡加载的图像。但是，有很多图像要加载，因此我决定在后台线程上运行加载和重采样任务，并在加载完成后将图像`AsyncTask`添加到图像`GridView`中。不幸的是，每当我运行代码时，都会遇到此错误：

```
01-01 19:49:40.239: E/AndroidRuntime(3851): FATAL EXCEPTION: main
01-01 19:49:40.239: E/AndroidRuntime(3851): java.lang.NullPointerException
01-01 19:49:40.239: E/AndroidRuntime(3851): at com.stullich.tim.woistmeinphoto.PhotoGalleryActivity.addImage(PhotoGalleryActivity.java:199)
01-01 19:49:40.239: E/AndroidRuntime(3851): at <packagename>.PhotoGalleryActivity.access$0(PhotoGalleryActivity.java:195)
01-01 19:49:40.239: E/AndroidRuntime(3851): at <packagename>.PhotoGalleryActivity$FileFetcher.onProgressUpdate(PhotoGalleryActivity.java:226)
01-01 19:49:40.239: E/AndroidRuntime(3851): at <packagename>.PhotoGalleryActivity$FileFetcher.onProgressUpdate(PhotoGalleryActivity.java:1)
01-01 19:49:40.239: E/AndroidRuntime(3851): at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:618)
01-01 19:49:40.239: E/AndroidRuntime(3851): at android.os.Handler.dispatchMessage(Handler.java:99)
01-01 19:49:40.239: E/AndroidRuntime(3851): at android.os.Looper.loop(Looper.java:137)
01-01 19:49:40.239: E/AndroidRuntime(3851): at android.app.ActivityThread.main(ActivityThread.java:4514)
01-01 19:49:40.239: E/AndroidRuntime(3851): at java.lang.reflect.Method.invokeNative(Native Method)
01-01 19:49:40.239: E/AndroidRuntime(3851): at java.lang.reflect.Method.invoke(Method.java:511)
01-01 19:49:40.239: E/AndroidRuntime(3851): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
01-01 19:49:40.239: E/AndroidRuntime(3851): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
01-01 19:49:40.239: E/AndroidRuntime(3851): at dalvik.system.NativeStart.main(Native Method) 
```

这是似乎引起麻烦的代码：

```
final class FileFetcher extends AsyncTask<Void, LoadedImage, Void> 
{
  private Context mContext;

  public FileFetcher(Context context)
  {
     mContext = context;
  }

  @Override
  protected void onPreExecute()
  {
     loadImages(new File("/mnt/extSdCard/Bilder"));         
  }

  @Override
  public void onProgressUpdate(LoadedImage... value)
  {
     addImage(value);
  }

  @Override
  protected Void doInBackground(Void... rootDir) 
  {
     int i = 1;
     for (File f : directories)
     {
        File[] anImage = f.listFiles();
        if (anImage.length > 0)
        {
           Bitmap aMap = decodeSampledBitmapFromFile(anImage[0], 120, 120);
           publishProgress(new LoadedImage(aMap));
           i++;
        }
     }
     return null;

  }
}

//My addImage method
private void addImage(LoadedImage... value) 
{
  for (LoadedImage image : value) 
  {
      adapter.addPhoto(image);
      adapter.notifyDataSetChanged();
  }
} 
```

每次`addImage`调用该方法时似乎都会发生崩溃。总是返回一个位图，所以我不知道`NullPointerException`可以把它扔到哪里。任何帮助将不胜感激，因为我已经坐在这个问题上很长一段时间了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T04:26:27.410

我忘记初始化`onCreate`导致应用程序崩溃的适配器。

# django - django model field like view

> ID：14116791
> 
> 赞同：0
> 
> 时间：2013-01-02T04:15:09.997
> 
> 标签：django, django-models

我想要一个模型字段，它将返回另一个模型的最新相关信息。

一个例子-

```
class Thing(models.Model):
  name = models.CharField(max_length=200)
  state = models.ForeignKey(State, query=latest) #pure fantasy
class State(models.Model):
  change = models.DateTimeField(auto_now_add=True)
  thing = models.ForeignKey(Thing) 
```

假设模型类 State 与 Thing 具有多对一的关系。

given- some_thing = Thing.object.all()[0]

我希望 some_thing.state 成为 State 的实例，它具有我手头的实例 Thing 的最新 State.change 值。

我想在 Django 模型级别指定一个实例变量来执行我上面描述的操作。我可以想到两种方法来做到这一点，但都不是这个级别：

1.  在实际的数据库级别——创建一个视图并关闭 django 数据库同步（http://stackoverflow.com/questions/507795/can-i-use-a-database-view-as-a-model-in-django )
2.  视图级别——当我创建新的 State 行时，手动将该行设置为相关的 Thing.state 实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T06:17:16.227

您不能拥有数据库级别的动态外键。但是，您可以拥有一个属性或方法来为您捕获您的项目：

```
class Thing(models.Model):
    name = models.CharField(max_length=200)

    @property
    def state(self):
        return State.objects.latest('change')

class State(models.Model):
    change = models.DateTimeField(auto_now_add=True)
    thing = models.ForeignKey(Thing) 
```

# tableview - 如何禁用 tableView 中表列的重新排序？

> ID：14116792
> 
> 赞同：5
> 
> 时间：2013-01-02T04:15:30.637
> 
> 标签：tableview, javafx-2

试图弄清楚如何禁用 javafx 2 中表列的重新排序？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-02T04:15:30.637

这是解决方案：

```
tblView.getColumns().addListener(new ListChangeListener() {
        @Override
        public void onChanged(Change change) {
          change.next();
          if(change.wasReplaced()) {
              tblView.getColumns().clear();
              tblView.getColumns().addAll(column1,column2...);
          }
        }
    }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-09-27T16:57:43.490

在浪费了很多时间之后，我找到了以下非常简单的解决方案：

```
TableHeaderRow header = (TableHeaderRow) myTableView.lookup("TableHeaderRow");
header.setMouseTransparent(true); 
```

# java - JSP页面到PHP页面的转换？

> ID：14116795
> 
> 赞同：1
> 
> 时间：2013-01-02T04:16:24.193
> 
> 标签：java, php, javascript

我想知道有什么解决方案可以将 JSP 页面转换为 PHP 页面。因为我要求将这些PHP页面集成到Joomla中。使用Joomla是强制的。没有替代joomla的方法。因此我们坚持这个转换问题。所以，我们需要任何转换器或任何替代方法来转换JSP页面PHP页面。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T04:20:24.750

除了懂两种语言的人类程序员之外，没有可靠的转换器。JSP 和 PHP 相距甚远（不仅仅是语言，还有您将与它们一起使用的 API 和库），无法进行任何类型的自动转换。任何这样做的尝试都需要更多的程序员时间来清理结果，而不是在 PHP 中完全重写。

# html - 表单目标是 iframe 父级

> ID：14116797
> 
> 赞同：7
> 
> 时间：2013-01-02T04:17:18.950
> 
> 标签：html, forms, webforms, parent

我有一个 iframe 内的表单，我需要确保该表单提交给 iframe 的父级。Target="_top" 和 target="_parent" 不起作用，我开始对自己有点恼火。

如果有人能指出我正确的方向，那就太棒了。:)

我有一个带有 src 的普通 iframe 到一个 html 页面 - 那个 html 页面有这个......

```
<form action="#" method="post" target="_parent" >
  <table id="Table_01" width="308" height="411" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td colspan="6">
            <img src="index_01.png" width="308" height="163" alt=""></td>
    </tr>
    <tr>
        <td colspan="2" rowspan="4">
            <img src="index_02.png" width="112" height="142" alt=""></td>
        <td colspan="3" style="background-image: url('optin_name.png');" width="189" height="40" alt="">
         <input type="text" name="name" style="background: transparent;border:0px;font-size:25px;width:185px;height:37px">
        </td>
        <td rowspan="6">
            <img src="index_04.png" width="7" height="247" alt=""></td>
    </tr>
    <tr>
        <td colspan="3">
            <img src="index_05.png" width="189" height="33" alt=""></td>
    </tr>
    <tr>
        <td colspan="2" style="background-image: url('optin_email.png');" width="188" height="40" alt="">
            <input type="text" name="email" style="background: transparent;font-size:25px;border:0px;width:185px;height:37px;">
        </td>
        <td rowspan="4">
            <img src="index_07.png" width="1" height="174" alt=""></td>
    </tr>
    <tr>
        <td colspan="2">
            <img src="index_08.png" width="188" height="29" alt=""></td>
    </tr>
    <tr>
        <td rowspan="2">
            <img src="index_09.png" width="73" height="105" alt=""></td>
        <td colspan="2" style="background-image: url('optin_submit.png');" width="174" height="54" alt="">
            <input type="submit" name="submit" value="                 " style="background: transparent;border:0px;width:170px;height:50px;">
        </td>
        <td rowspan="2">
            <img src="index_11.png" width="53" height="105" alt=""></td>
    </tr>
    <tr>
        <td colspan="2">
            <img src="index_12.png" width="174" height="51" alt=""></td>
    </tr>
    <tr>
        <td>
            <img src="spacer.gif" width="73" height="1" alt=""></td>
        <td>
            <img src="spacer.gif" width="39" height="1" alt=""></td>
        <td>
            <img src="spacer.gif" width="135" height="1" alt=""></td>
        <td>
            <img src="spacer.gif" width="53" height="1" alt=""></td>
        <td>
            <img src="spacer.gif" width="1" height="1" alt=""></td>
        <td>
            <img src="spacer.gif" width="7" height="1" alt=""></td>
    </tr>
</table>
</form> 
```

我无法将它发布到 iframe 父窗口中，而不是在新窗口中和/或 iframe 本身内部，两者都不是不可以的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T05:57:09.193

您`action`在表单中的属性似乎有问题。您要将数据发布到哪个 URL？尝试将`#`action 属性中的 替换为目标 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T06:24:27.607

1.  防止默认提交行为
2.  用于`window.parent`访问父级
3.  让父母在 iframe 中发布表单值

[表单提交后如何进行 Jquery 回调？](https://stackoverflow.com/questions/11534690/how-to-do-a-jquery-callback-after-form-submit)

```
$("#myform").submit(function(event) {
    event.preventDefault();
    var val = $(this).find('input[type="text"]').val();

    // I like to use defers :)
    deferred = $.post("http://somewhere.com", { val: val });

    deferred.success(function () {
        // Do your stuff.
    });

    deferred.error(function () {
        // Handle any errors here.
    });
}); 
```

# facebook - 实现 facebook 登录

> ID：14116798
> 
> 赞同：-1
> 
> 时间：2013-01-02T04:17:38.197
> 
> 标签：facebook, facebook-javascript-sdk, facebook-php-sdk

试图找出包含`Login with Facebook`在我的网站中的最佳方式。
目前我正在使用`png`图像，onclick 调用 php 控制器。该控制器可以访问 Facebook PHP SDK。控制器与 facebook api 对话并对用户进行身份验证。
但是在网上我检查了其他的实现方式。
第一部分是类型`facebook Login Button`：

*   仅使用 CSS 开发的按钮
*   按钮开发 XFBML
*   只是一个登录图像

第二部分是登录实现：

*   服务器端身份验证（我现在正在做的方式）
*   客户端身份验证。使用 JS SDK，然后将会话传递给 PHP SDK
*   通过 url 调用 facebook api，然后重定向到 php 代码。就像是`https://www.facebook.com/dialog/oauth?client_id=appId&amp;scope=email&amp;redirect_uri=http//localhost/authenticate`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T03:47:36.400

Facebook 为不同的设备和项目提供了多种登录流程。

**客户端 JavaScript SDK**

难度：低 推荐用于：网站、Facebook 上的应用和移动应用

**本机设备登录**

难度：中等推荐用于：支持的移动设备上的本机应用程序

**服务器端登录**

难度：高推荐用于：桌面应用程序或其他不适合 JavaScript 的环境

以上细节来自 Facebook 开发者网站。请[查看此链接以获取更多详细信息](https://developers.facebook.com/docs/concepts/login/login-architecture/)。

Facebook 建议对网站使用 Javascript SDK，因为使用 FB.Login() 只会触发弹出窗口并轻松获得响应。在某些情况下，使用 JavaScript 可能不合适，或者您可能更喜欢用不同的编程语言创建登录流程，然后使用服务器端登录。

# android - 来自类 android 的 xml 字符串

> ID：14116800
> 
> 赞同：0
> 
> 时间：2013-01-02T04:17:39.123
> 
> 标签：android, xml, database, string, sqlite

此代码使应用程序崩溃，如果我从静态变量中引用数据库名称，它将起作用。当我尝试从 strings.xml 获取它时，它会使应用程序崩溃。知道为什么会失败吗？这是一个类而不是一个活动，所以我导入了 android.content.res.Resources。另外，如果我尝试 context.getString 它也会崩溃。

```
import android.content.Context;
import android.content.res.Resources;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;

public class DatabaseHelper extends SQLiteOpenHelper {

//public static final String DATABASE_NAME = "library.db";
public static final String TITLE = "title";
public static final String AUTHOR = "author";
public static final String ISBN = "isbn";

public DatabaseHelper(Context context) {
    super(context, Resources.getSystem().getString(R.string.DATABASE_NAME), null, 1);
}

@Override
public void onCreate(SQLiteDatabase db) {
    db.execSQL("CREATE TABLE books (_id INTEGER PRIMARY KEY AUTOINCREMENT, title TEXT, author TEXT, isbn TEXT);");

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // TODO Auto-generated method stub

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T04:35:26.657

您不需要为数据库名称使用字符串资源，实际上这样做没有多大意义。字符串资源主要用于用户将看到的任何内容，以便您可以为其他配置（特别是其他语言）提供替代资源。您提供的本质上是数据库的文件名。由于这完全在您的应用程序内部并且用户永远不会看到它，因此您应该只使用带有您想要的数据库文件名称的静态最终字符串。

```
/* Database file name */
private static final String BD_NAME = "something.db";

public DatabaseHelper(Context context) {
    super(context, DB_NAME, null, null);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T04:20:45.640

这是错误的

```
super(context, Resources.getSystem().getString(R.string.DATABASE_NAME), null, 1); 
```

尝试这个

```
super(context, context.getResources().getString(R.string.DATABASE_NAME), null, 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T04:21:14.997

改变 `Resources.getSystem().getString(R.string.DATABASE_NAME)`

至

```
context.getResources().getString(R.string.DATABASE_NAME) 
```

# php - 使用 curl 获取页面 - 在 php 中它工作正常但是当我使用 ajax 时出现问题

> ID：14116801
> 
> 赞同：0
> 
> 时间：2013-01-02T04:17:44.577
> 
> 标签：php, ajax, curl

我有一个卷曲以下地址的php页面。它检索页面运行一些 xpath 查询并返回/回显结果。

当我通过浏览器访问此页面时，它工作正常，没有显示错误并且正在返回结果。

但是，当我尝试通过 ajax 访问此页面时，没有任何东西返回 ajax，而且似乎有点卡住了。

事件流程是：我对我的 php 页面进行 ajax 调用。在该页面中，我执行 crul 和 xpath 查询，结果将返回给 ajax。

这是我尝试检索的页面。

[http://www.zara.com/webapp/wcs/stores/servlet/product/us/en/zara-us-W2012-s/337006/908067/FANTASY%20MINI%20SKIRT%20WITH%20DIAMANTE](http://www.zara.com/webapp/wcs/stores/servlet/product/us/en/zara-us-W2012-s/337006/908067/FANTASY%20MINI%20SKIRT%20WITH%20DIAMANTE)

奇怪的是 php 没有通过我设置的任何错误`error_reporting (-1);`来显示所有错误，但仍然没有

这是我如何进行 curl 调用：

```
$url = 'http://www.zara.com/webapp/wcs/stores/servlet/product/us/en/zara-us-W2012-s/337006/908067/FANTASY%20MINI%20SKIRT%20WITH%20DIAMANTE';

$pageData = curl_init($url);
$userAgent = "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US) AppleWebKit/525.13 (KHTML, like Gecko) Chrome/0.A.B.C Safari/525.13";
curl_setopt($pageData, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($pageData, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($pageData, CURLOPT_USERAGENT, $userAgent);
    // - update
    // echo "notification";
    // exit;
    //
echo $to_return = curl_exec($pageData); 
```

这是ajax调用：

```
var ajax_url = 'http://www.somedomain.com/f/ajax_func.php';
var url_to_search = 'http://www.zara.com/webapp/wcs/stores/servlet/product/us/en/zara-us-W2012-s/337006/908067/FANTASY%20MINI%20SKIRT%20WITH%20DIAMANTE';

$.ajax({
    type: "POST",
    url: ajax_url,
    data: { ajax_search_product: "ajax", url_to_search: url_to_search}
    }).success(function(data) {
        alert(data);
}) 
```

我错过了什么吗？这真的很尴尬，它是如何在 php 中工作的，但是作为 ajax 它会导致无法解释的错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T08:05:51.683

```
Please add error function in your ajax to know what the status and error is...

error:function(xhr,err){
alert("ERROR : "+err);
    alert("readyState: "+xhr.readyState+"\nstatus: "+xhr.status);
    alert("responseText: "+xhr.responseText);
} 
```

# objective-c - 检查形状中是否包含一组坐标

> ID：14116802
> 
> 赞同：5
> 
> 时间：2013-01-02T04:17:59.243
> 
> 标签：objective-c, cocoa-touch, geometry

> **可能重复：**
> [检测 CGPoint 是否在多边形内](https://stackoverflow.com/questions/8952476/detect-if-cgpoint-within-polygon)

我有来自 a 的一组触摸的坐标`UIEvent`。有没有办法检查它们是否包含在我可以定义的某个形状（多边形）中？

我有 Java 方面的经验，我会使用`polygon`该类并调用该`contains(int x, int y)`方法。在 Cocoa Touch 中是否有类似的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T04:21:56.823

如果您将多边形定义为`CGPath`，您可以使用`CGPathContainsPoint()`... 您能告诉我们更多关于您的应用概念的信息吗？

编辑：

还有更高级别的`UIBezierPath`和/或`NSBezierPath`.. 这两个对象都有一个`-containsPoint`方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T04:27:08.153

尝试使用`CGRectContainsPoint(CGRect rect, CGPoint point)`

见这里：[https ://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGGeometry/Reference/reference.html](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGGeometry/Reference/reference.html)

或者

[检测 CGPoint 是否在多边形内](https://stackoverflow.com/questions/8952476/detect-if-cgpoint-within-polygon)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T04:37:39.183

也许您正在做一些不寻常的事情，例如您只想在三角形或其他东西内检测到触摸。如果是这样，您可以忽略这一点。但由于您是 iOS 新手，我建议您使用`UIControl`带有目标-动作对的子类或`UIGestureRecognizer`.

示例代码是：

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
[button addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside]; 
```

稍后在`target`- 可能是您的视图控制器中，您将实现该方法：

```
- (void)buttonPressed:(id)sender
{
} 
```

使用手势识别器，您可以将手势识别器添加到 a`UIView`中，并且与 一样`UIControl`，添加一个目标-动作对：

```
UITapGestureRecognizer *tapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(viewTapped:)];
[self.view addGestureRecognizer:tapRecognizer];

- (void)viewTapped:(UIGestureRecognizer *)recognizer
{
} 
```

这些是基本用户交互的典型方法。与使用 & company 相比，您将拥有*更*`touchesBegan`简单的时间，但如果它们是您所需要的，那么其他回答者会为您提供帮助。

# docpad - 从 DocPad 配置文件添加到块

> ID：14116807
> 
> 赞同：2
> 
> 时间：2013-01-02T04:18:51.790
> 
> 标签：docpad

如何从配置文件中添加块？

例如：通过执行以下操作设置要包含在块中的脚本/样式列表：

```
 @getBlock('scripts').add([
        '/vendor/jquery.js'
        '/vendor/jquery-ui.js'
    ]) 
```

在配置文件中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T04:18:51.790

根据GitHub 上的[Issue #387 ，](https://github.com/bevry/docpad/issues/387)[由 balupton 回答](https://github.com/bevry/docpad/issues/387#issuecomment-11799691)：

我们通常有两种方法可以做到这一点。

# 通过模板数据

```
templateData:
    site:
        scripts: [
            '/vendor/jquery.js'
            '/vendor/jquery-ui.js'
            ] 
```

然后在您的布局中：

```
<%- @getBlock('scripts').add(@site.scripts).toHTML() 
```

# 通过填充集合事件

```
events:
    populateCollections: ->
        @getBlock('scripts').add([
            '/vendor/jquery.js'
            '/vendor/jquery-ui.js'
        ]) 
```

# css - 使用 CSS 创建一个动态重新排序的图标网格？

> ID：14116813
> 
> 赞同：2
> 
> 时间：2013-01-02T04:20:31.120
> 
> 标签：css, html, alignment

注意：脚本不是我的选择

我正在向客户发送电子邮件，在电子邮件底部带有一组 12 个 100X100 图标（100% 宽度，均匀间隔）：

```
X X X X X X
X X X X X X 
```

如果他们在较小宽度的设备上打开电子邮件，则应重新排序：

```
x x x x 
x x x x
x x x x 
```

和

```
X X X 
X X X 
X X X
X X X 
```

ETC

这在 CSS 中可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T04:26:12.990

是的，使用浮动元素。通过向左浮动元素，当它们到达右边缘时，它们将中断到下一行。使用一个`div`元素作为容器，因为它默认具有宽度`auto`，它使用所有可用的宽度。例子：

HTML：

```
<div class="Container">
  <div class="item">X</div>
  <div class="item">X</div>
  <div class="item">X</div>
  <div class="item">X</div>
  <div class="item">X</div>
</div> 
```

CSS：

```
.Container { overflow: hidden; }
.Container .item { float: left; width: 100px; height: 100px; } 
```

在容器上设置`overflow`样式而不指定任何宽度或高度，将使子元素留在容器内。没有它，子元素不会影响容器的高度，因此它的高度会为零。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T05:45:02.450

使用`display:inline-block;`.

您的 div 将是块元素，但您将能够像任何其他内联元素一样操作它们。您甚至可以证明它们填充容器的输入宽度。

**例子**

[jsFiddle](http://jsfiddle.net/woestijnrog/gzXxG/6/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T05:07:01.840

如果您只使用一个 div 和一堆锚图像标签，那么只需设置`max-width`属性。

**HTML：**

```
<div class="icons">
    <a href="#"><img src="image1.png" /></a>
    <a href="#"><img src="image2.png" /></a>
    <a href="#"><img src="image3.png" /></a>
    <a href="#"><img src="image4.png" /></a>
    <a href="#"><img src="image5.png" /></a>
    <a href="#"><img src="image6.png" /></a>
    <a href="#"><img src="image7.png" /></a>
    <a href="#"><img src="image8.png" /></a>
    <a href="#"><img src="image9.png" /></a>
    <a href="#"><img src="image10.png" /></a>
    <a href="#"><img src="image11.png" /></a>
    <a href="#"><img src="image12.png" /></a>
</div> 
```

CSS：

```
.icons {
    max-width: 600px;
} 
```

演示：

[**jsFiddle**](http://jsfiddle.net/FMXSB/)

# sql - 将秒转换为 HH:MM:SS 格式

> ID：14116821
> 
> 赞同：1
> 
> 时间：2013-01-02T04:22:09.173
> 
> 标签：sql, sql-server

如何`HH:MM:SS`在 SQL Server 中将秒（int）转换为格式？

例如 90 应该输出 => 00:01:30

**更新**

我有两个日期`START_DATE`和`ENDDATE`。

我想要这些日期的差异

最后我想总结一下`HH:MM:SS`格式上的这些差异

[小提琴： http](http://sqlfiddle.com/#!3/39c2b/1/0) ://sqlfiddle.com/#!3/39c2b/1/0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T04:37:51.790

```
 declare @sec int
      set @sec=10

      select
          convert(varchar(5),@sec/3600)
           +':'+convert(varchar(5),@sec%3600/60)
           +':'+convert(varchar(5),(@sec%60)); 
```

**将数据更新**
为 hh:mm:ss 使用“替换”

```
 declare @sec int
             set @sec=90

     select
          replace(convert(varchar(5),@sec/3600)
            +':'+str(convert(varchar(5),@sec%3600/60),2)
            +':'+str(convert(varchar(5),(@sec%60)),2),' ','0'); 
```

例如看这里的[例子](http://sqlfiddle.com/#!3/1fa93/4270)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T04:40:17.110

```
declare @Seconds int;
set @Seconds = 90;
select replace(str(@Seconds/3600,len(ltrim(@Seconds/3600))+
abs(sign(@Seconds/359999)-1)) + ':' + str((@Seconds/60)%60,2)+
':' + str(@Seconds%60,2),' ','0') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T06:45:04.273

您指的是`TIMESPAN`SQL中的概念。但是，T-SQL 中没有 TIMESPAN 变量。相反，您可以使用以下概念。

我不会使用 ElapsedSecond 作为存储变量（尽管它有效）。原因是为了有效地表示 TIMESPAN，最好将其存储为 DATETIME。这样，您可以获得 DATETIME 变量的所有灵活性。例如，您可以执行`YEAR( @TimeSpan)`, `MONTH( @TimeSpan )`。如果您存储了 ElapsedSecond，则将更难做到这一点。

为了说明 T-SQL 中的概念：

```
DECLARE @StartDate AS DATETIME
DECLARE @EndDate AS DATETIME
SET @StartDate = '1/1/2013 1:01:58'
SET @EndDate = '1/5/2013 7:02:00'

DECLARE @TimeSpan AS DATETIME
SET @TimeSpan =  @EndDate - @StartDate

PRINT   CONVERT( VARCHAR, (DATEDIFF( DAY, 0, @TimeSpan) * 24) + DATEPART(HOUR, @TimeSpan) )
        + ':' + RIGHT( '0' + CONVERT( VARCHAR, DATEPART( MINUTE, @TimeSpan ) ), 2)
        + ':' + RIGHT( '0' + CONVERT( VARCHAR, DATEPART( SECOND, @TimeSpan ) ), 2 ) 
```

请注意，在上面，您可以`DATEPART()`像使用任何`DATETIME`变量一样使用该函数并处理 TimeSpan。当您了解更多细节时，这将更加灵活和重要。

另一个优点是**负**时间跨度。如果您使用 ElapsedSecond 方法，该函数将**失败**，而 TimeSpan 将继续存在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T21:37:19.943

这可能会有所帮助 - 减去时间部分等的好例子。您可以添加/求和...：

```
Select start_date, end_date, time_diff,
   EXTRACT(DAY FROM time_diff) days,
   EXTRACT(HOUR FROM time_diff) hours,
   EXTRACT(MINUTE FROM time_diff) minutes,
   EXTRACT(SECOND FROM time_diff) seconds
From
(
Select start_date, end_date, end_date - start_date time_diff
From
(
Select CAST(to_date('21/02/2012 06:10:00 am', 'dd/mm/yyyy  hh:mi:ss am') AS TIMESTAMP)  end_date
     , CAST(to_date('01/01/2012 12:00:00 am', 'dd/mm/yyyy  hh:mi:ss am') AS TIMESTAMP) start_date
From dual
))
/ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-20T15:29:24.713

这将生成一个有效的 .NET 时间戳。代码虽然没有优化。

```
create function [dbo].to_timespan(@secs as int) returns nvarchar(16)
begin
    declare @mins int, @hours int, @days int;
    set @days = @secs / (60 * 60 * 24);
    set @secs = @secs - @days * (60 * 60 * 24); 
    set @hours = @secs / (60 * 60);
    set @secs = @secs - @hours * (60 * 60);
    set @mins = @secs / 60;
    set @secs = @secs - @mins * 60;
    return replace(str(@days, 2) + '.' + str(@hours, 2) + ':' + str(@mins, 2) + ':' + str(@secs, 2), ' ', '0');
end
GO 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-19T23:39:12.060

从两个 DATETIME 值的差异返回 HH:MM:SS 字符串输出的最简单方法是使用内置的 T-SQL 日期/时间函数。

```
DECLARE
    @Start_Date DATETIME = DATEADD(SECOND, -86399, GETDATE())
  , @End_Date DATETIME = GETDATE();

SELECT 
    CONVERT (VARCHAR(8), 
    DATEADD(SECOND, DATEDIFF(SECOND, @Start_Date, @End_Date), 0), 108) 
    AS ElapsedHHMMSS; 
```

输出：23:59:59

但是请注意，如果您处理的时间超过 1 天，您可能需要除 HH:MM:SS 之外的不同输出。这在 24 小时后达到最大值，但 24:00:01 无论如何都不适用于这种格式。上面的其他一些响应将产生无效的 24:00:01 输出。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-01-02T04:33:52.473

```
 select to_char(to_date(90,'sssss'),'hh24:mi:ss') from dual; 
```

试试这个伙伴

# xpath - 使用 xpath 获取节点集合

> ID：14116822
> 
> 赞同：-1
> 
> 时间：2013-01-02T04:22:10.600
> 
> 标签：xpath, xmldocument

我有一个包含大量节点的 xmldocument。xmldocument 是从字符串变量加载的。我正在尝试使用 xpath 获取节点集合。我的问题是，当我在不调试的情况下运行应用程序时，集合的节点很少（大约 5 或 6 个），但是如果我在获取节点集合行进行调试并按 F11，我会根据我在该点暂停的时间获得不同数量的节点. 我不知道发生了什么。是因为内存处理吗？还是我做错了什么。（注意：我正在从 DOM 中删除 foreach 循环内的集合中的节点）

任何想法？

![如果我在返回时暂停，则该集合只有 6 个节点。](../Images/164a04a2c4a1dfdb6602b5e8954463d4.png)

![如果我在 foreach 暂停，该集合有 556 个节点](../Images/f806669413786d185fd1b4296fc97e07.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T09:35:52.903

`XmlNodeList`实现可能是懒惰的。并且在遍历集合时操作文档可以更改集合。所以通常，如果你想删除在 DOM 中找到的节点`XmlNodeList`，你会向后执行，例如`for (int i = lstDel.Count - 1; i >= 0; i--) { lstDel[i].ParentNode.RemoveChild(lstDel[i]); }`.

如果您仍然有问题，请考虑发布代码示例，以便我们重现问题，仅通过屏幕截图很难判断发生了什么。

# c# - WinForm：如何专门停靠在屏幕的一侧

> ID：14116824
> 
> 赞同：6
> 
> 时间：2013-01-02T04:22:19.633
> 
> 标签：c#, winforms

经过数小时的搜索，我仍然没有找到任何满足我需求的解决方案。

通过说独占停靠我的意思是它占用屏幕的一部分（左，右，顶部或底部），其余其他程序不能使用该部分。如果你有 Windows 8，它看起来像 Win8 中的 2 分区功能的一小部分。

我有WPF的解决方案，但现在我需要基于WinForm来做。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T04:46:13.643

您可以在代码项目中使用这个很棒的解决方案（作者 Corneliu 是/曾经是 MVP）： http: [//www.codeproject.com/Articles/6045/Sticky-Windows-How-to-make-your-top-level -forms-to](http://www.codeproject.com/Articles/6045/Sticky-Windows-How-to-make-your-top-level-forms-to)

否则，Hans Passant 在这里有一个很好的实现：[如何让我的 Windows 窗体应用程序捕捉到屏幕边缘？](https://stackoverflow.com/questions/589268/how-to-make-my-windows-form-app-snap-to-screen-edges)

**编辑：**

如果您想限制其他程序使用该空间，请尝试 Arik Poznanski 的[c#](/questions/tagged/c%23 "显示标记为“c#”的问题") `Application Desktop Toolbars`方法： http: [//www.codeproject.com/Articles/3728/C-does-Shell-Part-3](http://www.codeproject.com/Articles/3728/C-does-Shell-Part-3)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T05:00:09.010

我明天可以检查，但我相信当我实施这个时，我以此作为指导。

[http://www.codeproject.com/Articles/6741/AppBar-using-C](http://www.codeproject.com/Articles/6741/AppBar-using-C)

# android - 在 WebView 中强制关闭 - 离线时不起作用

> ID：14116826
> 
> 赞同：1
> 
> 时间：2013-01-02T04:23:49.107
> 
> 标签：android, android-layout, android-intent, android-widget, android-webview

我想在线显示网站。当它处于离线模式时，它应该显示缓存的网站。我创建的，但是当它在线时它正在工作。但是当它处于离线模式时，它会导致强制关闭。我不知道我在哪里出错。请帮助我。

编码如下：

```
 w=(WebView)findViewById(R.id.webView1);
    enableHTML5AppCache();
}

private void enableHTML5AppCache() {    
      w.getSettings().setAppCacheMaxSize(1024*1024*8);
      w.getSettings().setAppCachePath("/data/data/"+ getPackageName() +"/cache");
      w.getSettings().setAllowFileAccess(true);
      w.getSettings().setAppCacheEnabled(true);
      w.getSettings().setCacheMode(WebSettings.LOAD_DEFAULT);
      cm = (ConnectivityManager)this.getSystemService(Activity.CONNECTIVITY_SERVICE);

      if(cm.getActiveNetworkInfo().isConnected())
         {
                w.getSettings().setCacheMode(WebSettings.LOAD_DEFAULT);
            w.setInitialScale(1);
                w.loadUrl("http://www.google.com/");
         }
      else
         {
              w.getSettings().setCacheMode(WebSettings.LOAD_CACHE_ELSE_NETWORK);
              w.loadUrl("http://www.google.com/");
         }
} 
```

在清单文件中，我也使用了权限

```
<uses-permission android:name="android.permission.INTERNET"/>

<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T04:33:10.030

`cm.getActiveNetworkInfo()`没有可用网络时可以等于 null

你需要像这样检查网络

```
if(cm.getActiveNetworkInfo() != null && cm.getActiveNetworkInfo().isConnected()) 
```

看到这个[链接](http://developer.android.com/reference/android/net/ConnectivityManager.html#getActiveNetworkInfo%28%29)

# iphone - 是否可以将 Google Direction API 与 Apple Maps 一起使用？

> ID：14116827
> 
> 赞同：0
> 
> 时间：2013-01-02T04:23:54.830
> 
> 标签：iphone, google-maps, maps, directions

我正在使用 Apple Maps API 编写应用程序。我想通过谷歌服务的查询方向显示用户和朋友路线（https://developers.google.com/maps/documentation/directions/?hl=vi）。从服务中获取数据后，我使用 MKPolyline（iOS SDK 中的类）在 Apple 地图上显示路线。这是否可能并且与 Apple 和 Google 的政策不冲突？

期待您的回复。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T05:09:20.210

IIRC，Google 的 Maps API 条款明确禁止将他们的数据服务与其他人的地图一起使用。

* * *

**更新：**在 iOS 7 及更高版本中，MapKit 具有用于获取方向（并呈现结果路线）的 API。请参阅[`MKDirections`](https://developer.apple.com/library/ios/documentation/MapKit/Reference/MKDirections_class/index.html#//apple_ref/occ/cl/MKDirections)和相关文档。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T12:57:53.333

您可以尝试新的 iOS 版 Google Maps SDK：

[https://developers.google.com/maps/documentation/ios/](https://developers.google.com/maps/documentation/ios/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T05:36:08.010

是的，可以将谷歌方向api与苹果地图一起使用...在IOS6下面的示例代码中试试这个希望对您有帮助...

```
 CLLocationCoordinate2D coordinate = CLLocationCoordinate2DMake([_iLat doubleValue],[_iLong doubleValue]);

//create MKMapItem out of coordinates
MKPlacemark* placeMark = [[MKPlacemark alloc] initWithCoordinate:coordinate addressDictionary:nil];
MKMapItem* destination =  [[MKMapItem alloc] initWithPlacemark:placeMark];

if([destination respondsToSelector:@selector(openInMapsWithLaunchOptions:)])
{
    //using iOS6 native maps app
    [destination openInMapsWithLaunchOptions:@{MKLaunchOptionsDirectionsModeKey:MKLaunchOptionsDirectionsModeDriving}];

} 
```

# machine-learning - 哪种（机器学习）方法可以识别多元时间序列中不稳定的移动 3D 结构？

> ID：14116828
> 
> 赞同：0
> 
> 时间：2013-01-02T04:24:03.067
> 
> 标签：machine-learning, neural-network, scikit-learn, pybrain

假设我以时间序列的形式对当地的温度、风速、气压、湿度等进行了测量，这就是我从世界上所知道的一切。有时，龙卷风会掠过我的探测器。

因为龙卷风不仅仅是一种随机的东西，还有一种模式，训练有素的眼睛可以在时间序列中识别出来……温度、风速等的一些变化以某种方式相互关联，周围有不可预测的波动。

我想以某种自动方式来识别时间序列中的间隔，这些间隔对应于我的探测器“看到”龙卷风的时期。

哪种机器学习方法更适合识别它们，并给我一些相应的“可靠性系数”。

请注意，由于龙卷风本质上是一种不稳定的物体，而且还会以某种不稳定的方式移动，因此探测器并不总是看到相同的温度、风速等变化，因为龙卷风可以在探测器上来回移动，局部变化它的形状等。我想我想说的是时间序列测量值与这些量的实际空间分布不对应，可以在龙卷风的“静止框架”中绘制。但是，它总是会看到“某种”相同的特征，但周围有一些随机性，我的眼睛可以识别出来，这让我认为这对于 ML 来说是一项合适的任务。

其他问题：是否有 python ML 库可以实现推荐的方法？(PyBrain, Scikit ? ...?)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:26:38.947

可能可以在数据上移动窗口上提取一些时间序列特征，手动将一些事件标记为龙卷风发生的正面例子，并将其余样本视为负面样本，然后拟合分类器以将正面龙卷风事件与随机天气区分开来从您的传感器测量的条件。

您的数据中有多少这样的事件？如果认为您需要至少 100 次龙卷风事件才能训练一个足够可靠的模型，并对其预测准确性进行足够好的估计。

是否可以公开发布该数据集，例如在[http://figshare.com](http://figshare.com)上？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T06:04:25.653

机器学习算法种类繁多。您提供的信息不建议任何一组算法在未经进一步调查的情况下具有优越性。延长的时间序列确实表明您可能需要一种算法来创建简化的特征向量。神经网络不会自动为您提供可靠性系数。如果您愿意公开分发包含数百个随机正例和负例的数据集，那么随着时间的推移，很可能许多不同的组会应用各种算法。存在各种“竞赛”站点，可以加快这一进程。

# ajax - 在 codeigniter 中链 ajax 请求

> ID：14116830
> 
> 赞同：1
> 
> 时间：2013-01-02T04:24:24.053
> 
> 标签：ajax, codeigniter, jquery

我有一个使用自动完成的表单，我可以检索输入字段上的数据，但我不知道如何获取描述数据。我想做的是从用户那里获取值，然后调用另一个控制器以使用 ajax 获取附加信息（这样我可以在需要时获取更多信息）。谢谢

看法

```
<script type="text/javascript">
$(document).ready(function() {
$(function() {
    $( "#autocomplete" ).autocomplete({
        source: function(request, response) {
            $.ajax({ url: "<?php echo site_url('test/suggestions'); ?>",
            data: { term: $("#autocomplete").val()},
            dataType: "json",
            type: "POST",
            success: function(data){
                response(data);
            }
        });
    },
    minLength: 2

    });
});
});
</script>

<label for="title">Job Title</label>
<input name="title" type="text" id="autocomplete" />

<label for="description">Description</label>
<p id="description" /></p> 
```

控制器

```
 function suggestions()
{
    $this->load->model('tp_model');
    $term = $this->input->post('term',TRUE);

    if (strlen($term) < 1) break;

    $rows = $this->tp_model->GetAutocomplete(array('keyword' => $term));

    $title_array = array();
    $description_array = array();

    foreach ($rows as $row){
         array_push($title_array, $row->title); 
         array_push($description_array, $row->description);

}
    echo json_encode($title_array);     

} 
```

模型

```
 function GetAutocomplete($options = array())
{

    $this->db->select('*');
    $this->db->from('test');
    $this->db->like('title', $options['keyword'], 'after');
    $query = $this->db->get();
    return $query->result();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T05:07:12.327

您可以使用“[选择](http://api.jqueryui.com/autocomplete/#event-select)”事件从控制器中获取描述以进行自动完成。

```
$("input#autocomplete").autocomplete({
    source: ...,
    .....,
    select: function(event, ui) {
        var id = ui.item.id;
        $.ajax({
            url: description_fetch_url, //another controller
            data: "descritpion_id="+id,
            ....
            success: function(data) {
                $("#description").html(data)
            } 
        });
    }
}); 
```

# javascript - 窗口位置href不起作用

> ID：14116836
> 
> 赞同：1
> 
> 时间：2013-01-02T04:26:02.683
> 
> 标签：javascript, redirect, web

我正在尝试使用 javascript 导航到新页面。当我将 window.location.href = "next.html" 放在页面标题中时，它可以正常工作。但是在单击按钮后从函数调用它时，它不起作用。示例代码：

```
function next(){
 $post = "?id=10"
        alert($post);
     window.location.href = "next.html" + $post;
 } 
```

警报显示 ?id=10，但不会重定向。谢谢您的帮助

“失踪是一个错字，不在真实的网站上，对不起！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T04:30:52.830

这个：

```
function next(){
 $post = "?id=10
        alert($post);
     window.location.href = "next.html" + $post;
 } 
```

是您的 PHP 中的语法错误。尝试这个：

```
<?php
    function next(){
     $post = "?id=10";
?>
     alert($post);
     window.location = "next.html" + <?php echo $post; ?>;
<?php
    }
?> 
```

## **你真的不应该像这样混合 PHP 和 JavaScript。**

* * *

**编辑**：确定混淆后 - 如果不涉及 PHP，请尝试：

```
function next(){
 var post = "?id=10";
        alert(post);
 window.location = "next.html" + post;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T04:27:49.393

似乎代码中有错误：

`$post = "?id=10`应该有`"`到底

# go - 无论接收者类型如何，都在 interface{} 上动态调用方法

> ID：14116840
> 
> 赞同：17
> 
> 时间：2013-01-02T04:26:33.147
> 
> 标签：go, reflection, go-reflect

我正在开发一个用 Go 编写的模板系统，这意味着它需要自由使用该`reflect`包。在这种特定情况下，我需要能够动态调用`interface{}`. 奇怪的是，只要我的数据是已知类型，我的反射逻辑就可以正常工作，但如果数据是 type 则不行`interface{}`。

下面的例子你可以看到`main()`和中的逻辑`Pass()`是相同的。唯一的区别是数据是已知类型还是内部已知类型`interface{}`

去玩：[http ://play.golang.org/p/FTP3wgc0sZ](http://play.golang.org/p/FTP3wgc0sZ)

```
package main

import (
    "fmt"
    "reflect"
)

type Test struct {
    Start string
}

func (t *Test) Finish() string {
    return t.Start + "finish"
}

func Pass(i interface{}) {
    _, ok := reflect.TypeOf(&i).MethodByName("Finish")
    if ok {
        fmt.Println(reflect.ValueOf(&i).MethodByName("Finish").Call([]reflect.Value{})[0])
    } else {
        fmt.Println("Pass() fail")
    }
}

func main() {
    i := Test{Start: "start"}

    Pass(i)
    _, ok := reflect.TypeOf(&i).MethodByName("Finish")
    if ok {
        fmt.Println(reflect.ValueOf(&i).MethodByName("Finish").Call([]reflect.Value{})[0])
    } else {
        fmt.Println("main() fail")
    }
} 
```

执行此代码后，我们得到以下结果

```
Pass() fail
startfinish 
```

这意味着我动态调用方法的方法可以正常工作，除非我的对象当前位于`interface{}`.

相反，如果我不使用指针接收器并通过，`i`那么它会按预期工作。

去玩：[http ://play.golang.org/p/myM0UXVYzX](http://play.golang.org/p/myM0UXVYzX)

这让我相信我的问题是`&i`当 i() 是一个`interface{}`. 我已经搜索了反射包并测试了诸如`reflect.Value.Addr()`和之类的东西，`reflect.PtrTo()`但是我无法按照我需要的方式工作。我的预感是它与 an`interface{}`定义为引用对象这一事实有关。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-04T17:46:27.300

感谢@Jeremy Wall，我相信我能够解决我的问题。基本问题是在`interface{}`. 有4例。

1.  `interface{}`基础数据是价值，接收者是价值
2.  `interface{}`底层数据是指针，接收者是值
3.  `interface{}`底层数据是值，接收者是指针
4.  `interface{}`底层数据是指针，接收者是指针

使用反射，我们可以确定接口的基础值。然后使用进一步的反射，我们可以生成当前类型的替代数据类型。如果传入的数据是一个值，我们需要生成一个指向它的指针

```
value := reflect.ValueOf(data)
if value.Type().Kind() == reflect.Ptr {
    ptr = value
    value = ptr.Elem() // acquire value referenced by pointer
} else {
    ptr = reflect.New(reflect.TypeOf(i)) // create new pointer
    temp := ptr.Elem() // create variable to value of pointer
    temp.Set(value) // set value of variable to our passed in value
} 
```

现在我们拥有两种数据类型，我们可以简单地使用每种数据类型来检查现有方法

```
var finalMethod reflect.Value
method := value.MethodByName(methodName)
if method.IsValid() {
    finalMethod = method
}
// check for method on pointer
method = ptr.MethodByName(methodName)
if method.IsValid() {
    finalMethod = method
}

if (finalMethod.IsValid()) {
    return finalMethod.Call([]reflect.Value{})[0].String()
} 
```

因此，考虑到这一点，我们可以有效地动态调用任何方法，无论是声明为`*receiver`还是`receiver`。

完整的概念证明：[http ://play.golang.org/p/AU-Km5VjZs](http://play.golang.org/p/AU-Km5VjZs)

```
package main

import (
    "fmt"
    "reflect"
)

type Test struct {
    Start string
}

// value receiver
func (t Test) Finish() string {
    return t.Start + "finish"
}

// pointer receiver
func (t *Test) Another() string {
    return t.Start + "another"
}

func CallMethod(i interface{}, methodName string) interface{} {
    var ptr reflect.Value
    var value reflect.Value
    var finalMethod reflect.Value

    value = reflect.ValueOf(i)

    // if we start with a pointer, we need to get value pointed to
    // if we start with a value, we need to get a pointer to that value
    if value.Type().Kind() == reflect.Ptr {
        ptr = value
        value = ptr.Elem()
    } else {
        ptr = reflect.New(reflect.TypeOf(i))
        temp := ptr.Elem()
        temp.Set(value)
    }

    // check for method on value
    method := value.MethodByName(methodName)
    if method.IsValid() {
        finalMethod = method
    }
    // check for method on pointer
    method = ptr.MethodByName(methodName)
    if method.IsValid() {
        finalMethod = method
    }

    if (finalMethod.IsValid()) {
        return finalMethod.Call([]reflect.Value{})[0].Interface()
    }

    // return or panic, method not found of either type
    return ""
}

func main() {
    i := Test{Start: "start"}
    j := Test{Start: "start2"}

    fmt.Println(CallMethod(i, "Finish"))
    fmt.Println(CallMethod(&i, "Finish"))
    fmt.Println(CallMethod(i, "Another"))
    fmt.Println(CallMethod(&i, "Another"))
    fmt.Println(CallMethod(j, "Finish"))
    fmt.Println(CallMethod(&j, "Finish"))
    fmt.Println(CallMethod(j, "Another"))
    fmt.Println(CallMethod(&j, "Another"))
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-02T06:03:25.083

在您的示例中，您不会使用支持 Finish 方法的东西调用 pass，因为 Finish 仅在指向 Test 结构的指针上定义。MethodByName 在这种情况下正在做它应该做的事情。`*Test != Test`它们完全是两种不同的类型。再多的反思也不会将测试变成*测试。实际上也不应该。您可以使用 PtrTo 函数来确定 Finish 方法是否在指针类型上定义，但这无助于您获得指向实际值的指针。

使用指针调用 Pass 有效：[http ://play.golang.org/p/fICI3cqT4t](http://play.golang.org/p/fICI3cqT4t)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-08T08:22:53.530

这是 golang 实现类似功能的一个很好的例子：

```
package main

import "fmt"

type Parent struct {
    Attr1 string
}

type Parenter interface {
    GetParent() Parent
}

type Child struct {
    Parent //embed
    Attr   string
}

func (c Child) GetParent() Parent {
    return c.Parent
}

func setf(p Parenter) {
    fmt.Println(p)
}

func main() {
    var ch Child
    ch.Attr = "1"
    ch.Attr1 = "2"

    setf(ch)
} 
```

代码来自：[https ://groups.google.com/d/msg/golang-nuts/8lK0WsGqQ-0/HJgsYW_HCDoJ](https://groups.google.com/d/msg/golang-nuts/8lK0WsGqQ-0/HJgsYW_HCDoJ)

# sql - NULL 条件结果是否倒置？

> ID：14116846
> 
> 赞同：3
> 
> 时间：2013-01-02T04:28:24.917
> 
> 标签：sql, sqlite

您好我面临一个关于 sql 查询中的 NULL 条件检查的问题。

下图是关于选择表 session_testset 的行，该表具有列“sync”和 NULL 值。

它有一行 NULL 值仍然返回 0 记录。

![不返回行](../Images/ba8b5a9f26cab5835ae5f340bd719214.png)

当我更改条件并检查“NOT NULL”时。它正在返回记录。

![返回行](../Images/010ea0c62f201b50ac5f68e33c5d35c6.png)

但这是错误的。为什么会这样？

这是我的表结构
![在此处输入图像描述](../Images/b1d141dd5de71bda3522f571a45926be.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T04:36:46.337

据我所知，如果我们使用查询`SELECT * FROM table_name WHERE column_name IS NULL`返回它没有值的列，这意味着未填充。您的表有一个值`NULL`。检查您的代码而不在列中放置 NULL 值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T04:39:53.530

我认为 Anaz 已经为您提供了您所需要的。 当您尝试使用 IS NULL 和 IS NOT NULL
时，列中没有值与其中具有值“NULL”不同。

我刚刚在示例数据库上尝试了一个测试查询，这些查询工作得很好：

```
1\. SELECT * FROM sample_db WHERE name IS NULL;  //returns row where name  
column has no value
2\. SELECT * FROM sample_db WHERE name IS NOT NULL;  //returns row where name  
column has values 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T04:44:43.400

```
select * from session_testset where  sync is null or sync = ''; 
```

或者

```
select * from session_testset where ifnull(sync , '') = ''; 
```

或者

```
select * from session_testset where coalesce(sync , '') = ''; 
```

或者

```
select * from session_testset where ifnull(length(sync ), 0) = 0; 
```

# vb.net - 调整窗口大小时如何调整表单元素的大小？

> ID：14116848
> 
> 赞同：9
> 
> 时间：2013-01-02T04:29:23.140
> 
> 标签：vb.net, winforms, visual-studio

我有这个表单，里面有一个选项卡控件和一个列表框：

![在此处输入图像描述](../Images/752dd0ab2135546806f837e300707196.png)

当我调整窗口的高度时，我得到如下信息：

![在此处输入图像描述](../Images/0203fe96ec7b4f24cf9d655b01fee141.png)

但是，我实际上希望选项卡控件和列表框一起调整大小，结果如下：

![在此处输入图像描述](../Images/02111314a0d280499475930044e252d7.png)

我相信我可以通过响应表单中的某种`onResize()`方法来实现这种效果，并自己计算以手动更新选项卡控件和列表框的大小。

但是，我已经看到许多应用程序实现了这种效果，所以我怀疑实际上有更好的方法来做到这一点——也许是内置功能。

您知道实现此效果的更好方法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-02T05:01:36.623

这是一个很好的教程，它解释了如何在使用停靠和锚属性调整容器表单控件的大小时调整 winform 控件的大小：

[http://www.techrepublic.com/article/manage-winform-controls-using-the-anchor-and-dock-properties/6165908](http://www.techrepublic.com/article/manage-winform-controls-using-the-anchor-and-dock-properties/6165908)

设置锚属性的四个值（上、右、下、左），您可以使控件的边缘相对于 Form 控件保持静止，即使在调整大小时也是如此。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-02T04:53:44.730

您可以使用选项卡控件的锚属性——只需锚定所有四个边。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-16T11:35:10.397

这可能会有所帮助：

```
Private Sub frmMain_SizeChanged(sender As Object, e As EventArgs) Handles MyBase.SizeChanged 'tab container sizechanged event
        tabMain.Dock = DockStyle.None 'set dock to none to allow resize
        tabMain.Size = New Size(New Point(3, 3)) ' set size anything you want
        tabMain.Dock = DockStyle.Fill 'set dock to fill to fit to container
    End Sub 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T07:56:14.237

您可以使用选项卡和列表框的 Dock 属性来填充

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-25T17:41:25.800

要获得所需的结果，请将控件放置在您希望的标准尺寸形式中。然后使用 Anchor 属性为 Top、Bottom、Left、Right。这允许您指定您始终希望控件在基于最小尺寸的表单中相对定位。

IE：将锚属性设置为 Top、Bottom、Left、Right 这将确保控件的 Top、Bottom、Left、Right 边缘与每个边缘的距离始终相同，无论父项大小如何。

如果您希望控件与控制表面的每个边缘保持特定距离，请使用 Anchor Top、Bottom、Left、Right

如果您希望控件顶部和左侧边缘锁定距离父级顶部和左侧边缘 8 个像素，请将 Anchor 属性设置为 Top，Left 控件将永远不会调整大小，它将始终保持相对定位在 8,8。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-02T08:14:15.770

您使用`Dock`和`Anchor`属性来控制组件控件在调整其父/容器大小时如何调整其大小。

要使控件填充其容器，只需

```
theControl.Dock = System.Windows.Forms.DockStyle.Fill 
```

要保留一些边距，请设置`Anchor`属性

```
theControl.Anchor = CType((System.Windows.Forms.AnchorStyles.Top _
    Or System.Windows.Forms.AnchorStyles.Bottom _
    Or System.Windows.Forms.AnchorStyles.Left _
    Or System.Windows.Forms.AnchorStyles.Right), System.Windows.Forms.AnchorStyles) 
```

您还可以在“属性”工具窗口中设置这些属性。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-24T19:01:22.933

在查找属性的一侧单击`tab 1`或然后。然后选择中间的那个或输入full。`tab 2``Property Tab``Dock`

或者

您可以查找`Anchor`并选择`bottom tab`、`top tag`、`right tag`和`left tag`。

希望这有帮助！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-08-31T13:08:51.137

您可以在表单加载事件中使用以下代码...

```
TabControl1.Dock = DockStyle.Fill
ListBox1.Dock = DockStyle.Fill 
```

当窗体也调整大小时，这将调整控件的大小。

您还可以使用控件的 tableLayout Panel 或锚属性来获得相同的结果。

希望这可以帮助！

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2018-08-03T17:05:01.553

我在使用*锚点*和*停靠*点时遇到了很多困难，因为我有很多来自其他库的控件，其中一些没有锚点和停靠点属性，但是这种技术帮助了我。它通过使用该窗体的 Resize 事件使用 WinForm的*width*和*Height*属性引用它来动态设置 WinForm 中所有控件的大小。在下面的代码示例中，表单名称是 Main。

```
Dim CuRWidth As Integer = Me.Width
Dim CuRHeight As Integer = Me.Height

    Private Sub Main_Resize(sender As Object, e As EventArgs) Handles MyBase.Resize
            Dim RatioHeight As Double = (Me.Height - CuRHeight) / CuRHeight
            Dim RatioWidth As Double = (Me.Width - CuRWidth) / CuRWidth

            For Each ctrl As Control In Controls
                ctrl.Width += ctrl.Width * RatioWidth
                ctrl.Left += ctrl.Left * RatioWidth
                ctrl.Top += ctrl.Top * RatioHeight
                ctrl.Height += ctrl.Height * RatioHeight
            Next

            CuRHeight = Me.Height
            CuRWidth = Me.Width
End Sub 
```

来源：[https ://www.youtube.com/watch?v=QVi1ve5qHXA](https://www.youtube.com/watch?v=QVi1ve5qHXA)

# c# - 保存数据后如何清除缓存？

> ID：14116851
> 
> 赞同：2
> 
> 时间：2013-01-02T04:29:41.587
> 
> 标签：c#, asp.net, browser-cache, outputcache, clear-cache

我只是新的 ASP .NET，我想知道如何在保存并重定向到其他页面后清除所有数据条目？

我在我的 HTML 页面上试过这个，

```
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="-1"> 
```

还有这个在我的代码隐藏页面上，

```
 protected void Page_Load(object sender, System.EventArgs e)
    {
        if(!Page.IsPostBack)
        {
            Response.Cache.SetCacheability(HttpCacheability.Server);
            Response.Expires = -1;
            Response.AddHeader("Pragma", "No-Cache");
            Response.CacheControl = "no-cache";
        }
    } 
```

但是每当我回去时，我编码的数据/页面仍然会出现。

请帮忙。非常感谢。谢谢你。:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T04:34:30.087

它应该是：

```
Response.Cache.SetExpires(DateTime.UtcNow.AddMinutes(-1));
Response.Cache.SetCacheability(HttpCacheability.NoCache);
Response.Cache.SetNoStore(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T04:34:39.543

如果您不希望浏览器保持填充表单字段，您可以将 HTML 属性设置`autocomplete`为`off`.

```
<input type="text" name="myfield" autocomplete="off" /> 
```

# android - 多个静态TextViews VS TextView 的Listview VS 一个多行TextView

> ID：14116856
> 
> 赞同：1
> 
> 时间：2013-01-02T04:30:56.247
> 
> 标签：android, listview, textview

假设我有 10 个文本项，所有这些对用户都是可见的。每个文本项都有不同的颜色和样式。我不知道实现这一目标的最佳方法是什么。

多个静态文本视图 - 最容易实现，但性能可能是最差的。

textview 的列表视图 - 所有项目对用户可见，我不确定它在性能方面是否与多个静态文本视图完全相似。

多行 - 最难实现，不确定这种方法是否可以有 2 行的 1 个文本项。

任何人都可以建议我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T04:48:49.337

不用担心 10`TextView`性能问题。除非你在其中写一本书。如果你真的想知道哪个是性能方面的，你可以用 1000 或更多来对它们进行基准测试。但最有可能使用 XML 膨胀它并从 XML 中检索应该是最好的性能方面。做对您最简单或对用户最好的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T04:37:25.950

首先决定你想要实现什么。

**10 文本视图**

使用此方法仅适用于此活动。而且您不能使用它，这是非常消耗内存的过程。

**Textview的Listview**

使用这种方法很好并显示每种不同的颜色文本，然后根据您想要显示的颜色填充任何数组。

第三个很懒。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T05:30:36.790

如果它修复了只有 10`TextView`则使用 10 `TextView`。

否则，如果`TextView`没有固定使用**[ListView](http://eureka.ykyuen.info/2010/03/15/android-%E2%80%93-applying-alternate-row-color-in-listview-with-simpleadapter/)**

# oauth-2.0 - Dart：HttpException：无法解析标头值

> ID：14116857
> 
> 赞同：1
> 
> 时间：2013-01-02T04:31:22.303
> 
> 标签：oauth-2.0, google-drive-api, dart

我得到一个

> HttpException：无法解析标头值

[当使用M2 发布](http://www.dartlang.org/articles/m2-whats-new/)dart [http](http://pub.dartlang.org/packages/http)和[oauth2](http://pub.dartlang.org/packages/oauth2)库调用 http.Client.get(Uri) 方法时。我正在尝试使用 API 来执行[File: get](https://developers.google.com/drive/v2/reference/files/get)。我成功地将我的授权请求重定向到一个简单的基于控制台的 http 服务器以获取令牌。然后以下代码会导致异常：

```
oauth.Credentials credentials = new oauth.Credentials(code);
http.Client client = new oauth.Client(CLIENT_ID, CLIENT_SECRET, credentials);
Uri uri = new Uri("https://www.googleapis.com/drive/v2/files/$fileID");
Future<http.Response> result = client.get(uri); 
```

以下是完整的堆栈跟踪：

```
HttpException: Failed to parse header value
Unhandled exception:
FutureUnhandledException: exception while executing Future
HttpException: Failed to parse header value
original stack trace:
  null
#0      _FutureImpl._complete (bootstrap:844:11)
#1      _FutureImpl._complete (bootstrap:848:5)
#2      _FutureImpl._setException (bootstrap:873:14)
#3      _CompleterImpl.completeException (bootstrap:952:30)
#4      _FutureImpl._forwardException.<anonymous closure> (bootstrap:936:34)
#5      _FutureImpl._complete (bootstrap:832:22)
#6      _FutureImpl._complete (bootstrap:848:5)
#7      _FutureImpl._setException (bootstrap:873:14)
#8      _CompleterImpl.completeException (bootstrap:952:30)
#9      _FutureImpl._forwardException.<anonymous closure> (bootstrap:936:34)
#10     _FutureImpl._complete (bootstrap:832:22)
#11     _FutureImpl._complete (bootstrap:848:5)
#12     _FutureImpl._setException (bootstrap:873:14)
#13     _CompleterImpl.completeException (bootstrap:952:30)
#14     _FutureImpl._forwardException.<anonymous closure> (bootstrap:936:34)
#15     _FutureImpl._complete (bootstrap:832:22)
#16     _FutureImpl._complete (bootstrap:848:5)
#17     _FutureImpl._setException (bootstrap:873:14)
#18     _CompleterImpl.completeException (bootstrap:952:30)
#19     _FutureImpl._forwardException.<anonymous closure> (bootstrap:936:34)
#20     _FutureImpl._complete (bootstrap:832:22)
#21     _FutureImpl._complete (bootstrap:848:5)
#22     _FutureImpl._setException (bootstrap:873:14)
#23     _CompleterImpl.completeException (bootstrap:952:30)
#24     IOClient.send.<anonymous closure>.<anonymous closure> (package:http/src/io_client.dart:38:36)
#25     _FutureImpl._complete (bootstrap:840:19)
#26     _FutureImpl._complete (bootstrap:848:5)
#27     _FutureImpl._setValue (bootstrap:862:14)
#28     _CompleterImpl.complete (bootstrap:949:26)
#29     async.<anonymous closure> (package:http/src/utils.dart:173:41)
#30     _Timer._createTimerHandler._handleTimeout (dart:io:7035:28)
#31     _Timer._createTimerHandler._handleTimeout (dart:io:7043:7)
#32     _Timer._createTimerHandler.<anonymous closure> (dart:io:7051:23)
#33     _ReceivePortImpl._handleMessage (dart:isolate-patch:37:92) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T07:46:45.950

要使用[Google Drive SDK API](https://developers.google.com/drive/v2/reference/)，您可以使用适用于 Dart 的[Google API 客户端库，](http://code.google.com/p/google-api-dart-client/)它允许从 Dart 应用程序访问 Google API。

[https://github.com/Scarygami/dart-google-oauth2-library](https://github.com/Scarygami/dart-google-oauth2-library)就是以此为基础构建的，它可以作为替代方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T19:15:31.467

你可能没有初始化SSL？

```
SecureSocket.initialize(); 
```

有关详细信息，请参阅[http://api.dartlang.org/docs/bleeding_edge/dart_io/SecureSocket.html](http://api.dartlang.org/docs/bleeding_edge/dart_io/SecureSocket.html)。

# gwt - 他们是否有任何关于如何将 GWT 与 PureMVC 框架一起使用的教程？

> ID：14116859
> 
> 赞同：1
> 
> 时间：2013-01-02T04:31:41.797
> 
> 标签：gwt, puremvc

我试图谷歌并没有发现任何东西。

是否有任何网站展示如何使用 PureMVC 实现 GWT？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T18:51:51.463

您可以从参考[http://code.google.com/p/purevmc4gwt/](http://code.google.com/p/purevmc4gwt/)开始。自 2008 年以来，该项目被放弃，没有任何活动。从那时起，GWT 发生了巨大变化，***GWT 已转向 MVP 方法以适应以 Web 为中心的优化****。[https://developers.google.com/web-toolkit/articles/mvp-architecture](https://developers.google.com/web-toolkit/articles/mvp-architecture)*

PureMVC 也有几次尝试使用 javascript 端口。最后一个似乎消失了[http://puremvc.org/content/view/156/1/](http://puremvc.org/content/view/156/1/)

如果您尝试过任何 puremvc javacript 端口。您可以编写 JSNI 包装器并使用它们。这将是一个相当大的挑战:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:48:50.933

[http://www.codeproject.com/Articles/294768/Exploring-another-MVC-variant-PureMVC](http://www.codeproject.com/Articles/294768/Exploring-another-MVC-variant-PureMVC)

[http://code.google.com/p/gwt-mvc/](http://code.google.com/p/gwt-mvc/)

GWT MVC 项目的目的是在 Google Web Toolkit 的小部件库之上创建一个层，该层能够基于客户端部分的模型-视图-控制器设计模式以更简单和更有指导性的方式实现 RIA。

# sql-server - 使用 SQL 将一张表中的两行合并为单行

> ID：14116860
> 
> 赞同：0
> 
> 时间：2013-01-02T04:31:45.403
> 
> 标签：sql-server

```
ID  Name    Address Acc_Number  BookingNo   Amt
 1  MERY    Kollam  111111111   NULL        1000
 2  Jos     Kochi   111111111   c/01        NULL 
```

输出

```
ID  Name    Address Acc_Number  BookingNo   Amt
1   MERY    Kollam  111111111   c/01        1000 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T04:46:56.953

我认为使用 Acc_Number 自加入同一个表应该可以实现

```
SELECT 
     a.ID,  
     a.Name,    
     a.Address, 
     a.Acc_Number,  
     COALESCE(a.BookingNo, b.BookingNo) as BookingNo,   
     COALESCE(a.Amt, b.Amt) As Amt
FROM TableA a
JOIN TableA b
     ON a.Acc_Number = b.Acc_Number 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T04:58:33.800

```
SELECT top 1 t1.ID,t1.Name,  
     t1.Address, 
     t1.Acc_Number,  
     COALESCE(t1.BookingNo, t2.BookingNo) as 'BookingNo',COALESCE(t1.Amt, t2.Amt) as 'Amt'
FROM testtable1 t1 JOIN testtable1 t2 
     ON t1.Acc_Number = t2.Acc_Number and t1.NAME!=t2.NAME 
```

# ios - Grand Central Dispatch 未显示 NSLog 语句

> ID：14116861
> 
> 赞同：1
> 
> 时间：2013-01-02T04:31:52.457
> 
> 标签：ios, xcode, grand-central-dispatch

我今天刚开始使用 GCD，我以为我对它的工作原理有所了解，但现在我有点困惑为什么 NSLog 语句没有在控制台中打印/显示。

基本上，如果我正确理解 GCD，则需要完成几个步骤。

1.  创建一个新队列
2.  将块添加到队列

这是我如何在我的一个文件中使用 GCD 的示例，

**ViewControllerWelcome.m**

```
 #import <ViewControllerWelcome.h"
 #import <dispatch/dispatch.h> // Grand Central Dispatch

 @interface ViewControllerWelcome ()
 {
 // declare private methods here
 dispatch_queue_t scan_queue;
 }
 @end

 @implementation ViewControllerWelcome

 - (void)viewDidLoad {
   [super viewDidLoad];

 // threading stuff - GCD
scan_queue = dispatch_queue_create("com.chrisrjones.kegcop", NULL);

// put blocks of code into curly braces to run on separate thread
dispatch_async(scan_queue, ^{

    [serial handShake];
    NSLog(@"execution reached here");

 });
}

@end 
```

由于它目前正在运行，我没有在 ^{ 中看到 NSLog 语句的输出

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T04:36:46.560

可能是您的 [serial handShake]；正在阻塞..尝试将日志放在此调用之前

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T04:38:52.097

试试这种方式。

```
 NSLog(@"execution reached here");
 [serial handShake]; 
```

代替

```
[serial handShake];
NSLog(@"execution reached here"); 
```

# javascript - 在 ExtJS4 中，为什么参数可以记录但不能以编程方式访问？

> ID：14116863
> 
> 赞同：1
> 
> 时间：2013-01-02T04:32:05.217
> 
> 标签：javascript, extjs4, sencha-architect

我正在使用 Sencha Architect 2 创建应用程序。在编写无法访问数据的事件处理程序时，我曾多次遇到问题。

具体来说，我正在尝试编写一个 AfterRender 函数来以编程方式选择组合框中的第一项。组合框是从 JSON 存储中填充的，可以正常加载。我无法访问加载的数据，所以我在函数中有以下代码来记录可用的数据：

```
onComboboxAfterRender: function(abstractcomponent, options) {
  // abstractcomponent.value = abstractcomponent.store.data.items[0].date;
  console.log(abstractcomponent);
  console.log(abstractcomponent.store);
  console.log(abstractcomponent.store.data);
  console.log(abstractcomponent.store.data.items);
  console.log(abstractcomponent.store.data.items[0]);
} 
```

以下是 javascript 控制台输出：

![控制台日志输出](../Images/546c5dc877e5fef5591a62bb812b1997.png)

可以看出，在`abstractcomponent.store.data`记录的第三个项目中，项目显示为空。然而，如果我深入研究，items 是一个包含三个条目的数组。

显然我在做一些根本错误的事情。我会很感激有关如何从 After Render 处理程序内部访问存储数据的建议，以及我是否存在某种基本的 ExtJS/JavaScript/JavaScript 控制台误解，因为这对我来说毫无意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:57:54.407

这是一个参考。当您将其输出到控制台时，商店尚未填充。

但是，当您使用 Chrome/Firebug 并展开控制台时，它现在就在那里并且将被填写。

# javascript - java脚本中的秒表

> ID：14116864
> 
> 赞同：-1
> 
> 时间：2013-01-02T04:32:05.040
> 
> 标签：javascript, asp.net

我想通过向母版页添加 4 个 aspx 页面来一次为 4 个科目设计一个在线考试网站。为此，我需要一个秒表。

据我所知，我用 JavaScript 设计了一个秒表并将其附加到母版页。

```
var tim;
var min = 120;
var sec = 60;
var f = new Date();

function f1() {
    f2();
    document.getElementById("startday").innerHTML = f.getDate() + "/" + (f.getMonth() + 1) + "/" + f.getFullYear();
    document.getElementById("starttime").innerHTML = "Exam Starts at " + f.getHours() + ":" + f.getMinutes();
    //document.getElementById("endtime").innerHTML = "Your  time is :" + f.toLocaleTimeString();
}

function f2() {
    if (parseInt(sec) > 0) {
        sec = parseInt(sec) - 1;
        document.getElementById("showtime").innerHTML = min + ":" + sec;
        tim = setTimeout("f2()", 1000);
    } else {
        if (parseInt(sec) == 0) {
            min = parseInt(min) - 1;
            if (parseInt(min) == 0) {
                clearTimeout(tim);
                location.href = "default5.aspx";
            } else {
                sec = 60;
                document.getElementById("showtime").innerHTML = min + ":" + sec;
                tim = setTimeout("f2()", 1000);
            }
        }
    }
} 
```

但我的问题是，如果我改变主题，母版页也会刷新，秒表时间从 120 分钟开始重新开始。

所以请帮助我。即使我改变了主题，时间也应该照原样继续，没有任何刷新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T04:43:24.500

我假设您使用的是 ASP.Net Web 表单。您可以使用 Session 来保持 Clock 的状态。在母版页中，您可以拥有类似的东西

```
<script>
    var min = <%= Session["min"] %>;
    var sec = <%= Session["sec"] %>;
</script> 
```

每次用户切换到另一个页面时，尝试更新会话状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T04:39:04.097

如果您在 ASP 中执行此操作，则应将计时器保留在服务器端并将其引入新加载的页面（以便您随时保持状态）。否则，您可以设置 cookie 并在您从一个页面转到另一个页面时从您离开的地方继续。

或者，您可以动态加载新页面，这样您就永远不会使用 iframe 离开主页面（计时器所在的页面），或者，如果所有页面都位于一个域的本地，则可以通过 ajax 加载它们。

但我确实认为第一个选项是最好的，如果您可以控制 ASP。

# python - Python正则表达式去匹配任何以字符串开头的字符串

> ID：14116866
> 
> 赞同：2
> 
> 时间：2013-01-02T04:32:23.510
> 
> 标签：python, regex

我对正则表达式了解不多，正在努力学习它们。我正在使用 Python 并且需要使用`re.compile`来创建一个匹配任何以变量字符串开头的字符串的正则表达式。字符串是可变的`url`。目前我有`re.compile('%s*'%url)`，但它似乎不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T04:38:02.770

使用`re.escape(url)`：

```
In [15]: import re

In [16]: url = 'http://stackoverflow.com'

In [17]: pat = re.compile(re.escape(url))

In [18]: pat.match('http://stackoverflow.com')
Out[18]: <_sre.SRE_Match object at 0x8fd4c28>

In [19]: pat.match('http://foo.com') is None
Out [19]: True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T04:40:56.400

虽然正则表达式适用于这种情况，但为什么不使用[str. **开始（）**](http://docs.python.org/2/library/stdtypes.html#str.startswith)？使您的事情变得更简单，并且已经内置在 python 中，用于此类情况。它还压缩了必须使用您的代码完成的所有操作，例如编译、匹配等。因此，您的代码可以如下所示，而不是正则表达式：

```
url = "http://example.com/"
string = "http://example.com is a great site! Everyone check it out!"
if string.startswith(url):
    print 'The string starts with url!'
else:
    print "The string doesn't start with url. Very unfortunate." 
```

# php - 使用 .htaccess 文件时出现“内部服务器错误 500”

> ID：14116869
> 
> 赞同：3
> 
> 时间：2013-01-02T04:32:47.807
> 
> 标签：php, .htaccess

> **可能重复：**
> [内部服务器错误](https://stackoverflow.com/questions/2471056/internal-server-error)

我希望在 php 中更改我的网站的 URL，所以我为此使用 .htaccess 文件，但它显示了**Internal Server Error 500**。

谁能帮我解决服务器错误？

寻找您的宝贵意见。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T04:49:35.470

找出导致 500 服务器错误的原因 **以下是一些基本步骤，可用于找出导致错误的原因。**

*   打开位于 cPanel 日志部分的错误日志工具。
*   重新加载导致错误的网页。重新加载错误日志页面。
*   在错误日志中搜索您的 IP 地址以查找与之相关的任何错误，您的 IP 地址位于页面顶部。

**您会看到此错误的主要原因有 3 个：**

1.  文件或文件夹权限。
2.  .htaccess 中有错误的代码或语法。
3.  配置不当的 php.ini。

**文件或文件夹权限**

[Sun Jun 05 12:03:22 2011] [error] [client 66.249.72.82] SoftException in Application.cpp:601: Directory "/home1/examplec/public_html" is writeable by group

在这种情况下，您的帐户有一个具有无效权限集的文件夹。要更正此问题，只需将权限从“777”恢复为“755”即可。虽然每个站点可能不同，但以下权限通常是正确使用的权限：

文件 - 644 CGI 脚本 - 755 目录 - 755

您可以使用位于 cPanel 的文件类别中的文件管理器、FTP 客户端或使用 SSH/Bash 中的“chmod”命令来修改权限。有关如何更改文件和文件夹权限的更多信息，请参阅我们的知识库文章设置文件和用户权限

**.htaccess 中的错误代码或语法**

.htaccess 可以做的事情范围很广，而且使用起来并不难，但是如果您没有正确输入语法，它可能会导致服务器 500 错误。下面列出了一些可能导致错误的常见示例。

**语法未关闭**

[Sun Jun 05 12:11:38 2011] [alert] [client 66.249.72.82] /home1/examplec/public_html/.htaccess: /home1/examplec/public_html/.htaccess:3: ExampleRule/Module> 未关闭。

同样，解决方案是简单地修复语法或删除它。在这种情况下，请正确关闭结尾的“”指令并将规则放在自己的行中以解决问题。

这些只是可能由错误的 .htaccess 参数引起的几个常见示例。您遇到的情况可能会有所不同，但通常错误消息的描述性足以确定其中的错误而无需进一步调查。配置不当的 php.ini ForceType

当您使用带有（或不带有）扩展名的文件时，该文件类型的正常扩展名不同，您可以在 .htaccess 文件中使用 ForceType 以使服务器清楚地知道如何处理该文件（或文件夹中的所有文件） （这适用于没有 phpsuexec 的服务器）。

一个例子：当你有一个名为 'item' 的文件（如 Nucleus 用于 FancyURL's）并希望它被服务器解析为 php 时，你在 .htaccess 文件中使用以下代码：

```
ForceType application/x-httpd-php 
```

但是，由于我们的服务器使用 phpsuexec，这将导致内部服务器错误。要解决这个问题，您可以简单地使用 SetHandler 而不是 ForceType，因此您的 .htaccess 文件变为：

```
SetHandler application/x-httpd-php 
```

php_value 在没有 phpsuexec 的服务器上，可以使用 .htaccess 文件中的 php_value 语句来更改 php 的设置（实际上是覆盖 php.ini 中的设置）。在带有 phpsuexec 的服务器上，这也会导致服务器错误。为了解决这个问题，您可以使用一个 php.ini 文件，该文件与您放置 .htaccess 文件的位置相同。在该 php.ini 文件中，您可以更改所有 php 值。您只需将要修改的值放入该文件中。例如，如果您想将 short_open_tag 设置为 Off，您会使用 short_open_tag？= 在您的 .htaccess 文件中关闭。使用 php.ini 文件会导致：

```
[PHP]
short_open_tag = Off 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T04:53:26.653

尝试更改所有文件和文件夹的所有权用户。然后您必须查看正确允许的适当文件夹的权限。

# ruby-on-rails - 每当通过 capistrano 部署 gem 时出现错误，Rails

> ID：14116870
> 
> 赞同：3
> 
> 时间：2013-01-02T04:32:57.033
> 
> 标签：ruby-on-rails, ruby-on-rails-3, cron, whenever, whenever-capistrano

我正在尝试通过一个 rails 项目的when gem 创建我的第一个 cron 作业。运行时`cap deploy`，我收到此错误：

```
...
* 2013-01-01 22:29:00 executing `whenever:update_crontab'
  * executing "cd /var/www/vhosts/famnfo.com/releases/20130102042834 && bundle exec whenever --update-crontab FamNFo --set environment=production --roles db"
    servers: ["famnfo.com"]
    [famnfo.com] executing command
 ** [out :: famnfo.com] /var/www/vhosts/famnfo.com/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/core_ext/numeric/time.rb:49:in `days': wrong number of arguments (1 for 0) (ArgumentError)
 ** [out :: famnfo.com] from config/schedule.rb:23:in `initialize'
 ** [out :: famnfo.com] from /var/www/vhosts/famnfo.com/shared/bundle/ruby/1.9.1/gems/whenever-0.8.1/lib/whenever/job_list.rb:25:in `instance_eval'
 ** [out :: famnfo.com] from /var/www/vhosts/famnfo.com/shared/bundle/ruby/1.9.1/gems/whenever-0.8.1/lib/whenever/job_list.rb:25:in `initialize'
 ** [out :: famnfo.com] from /var/www/vhosts/famnfo.com/shared/bundle/ruby/1.9.1/gems/whenever-0.8.1/lib/whenever.rb:15:in `new'
 ** [out :: famnfo.com] from /var/www/vhosts/famnfo.com/shared/bundle/ruby/1.9.1/gems/whenever-0.8.1/lib/whenever.rb:15:in `cron'
 ** [out :: famnfo.com] from /var/www/vhosts/famnfo.com/shared/bundle/ruby/1.9.1/gems/whenever-0.8.1/lib/whenever/command_line.rb:55:in `whenever_cron'
 ** [out :: famnfo.com] from /var/www/vhosts/famnfo.com/shared/bundle/ruby/1.9.1/gems/whenever-0.8.1/lib/whenever/command_line.rb:106:in `updated_crontab'
 ** [out :: famnfo.com] from /var/www/vhosts/famnfo.com/shared/bundle/ruby/1.9.1/gems/whenever-0.8.1/lib/whenever/command_line.rb:36:in `run'
 ** [out :: famnfo.com] from /var/www/vhosts/famnfo.com/shared/bundle/ruby/1.9.1/gems/whenever-0.8.1/lib/whenever/command_line.rb:7:in `execute'
 ** [out :: famnfo.com] from /var/www/vhosts/famnfo.com/shared/bundle/ruby/1.9.1/gems/whenever-0.8.1/bin/whenever:41:in `<top (required)>'
 ** [out :: famnfo.com] from /var/www/vhosts/famnfo.com/shared/bundle/ruby/1.9.1/bin/whenever:19:in `load'
 ** [out :: famnfo.com] from /var/www/vhosts/famnfo.com/shared/bundle/ruby/1.9.1/bin/whenever:19:in `<main>'
    command finished in 2308ms
*** [deploy:update_code] rolling back
... 
```

这是我的 schedule.rb 代码：

```
set :output, "#{path}/log/cron.log"

every 1.day :at => "8:00am" do
    runner "BirthdayReminders.send_birthday_email_reminders"
end 
```

我已将此添加到我的 capistrano deploy.rb 文件中

```
set :whenever_command, "bundle exec whenever"
require "whenever/capistrano" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T06:55:13.373

```
set :output, "#{path}/log/cron.log"

every 1.day :at => "8:00am" do
    runner "BirthdayReminders.send_birthday_email_reminders"
end 
```

尝试在一天之后添加一个逗号：

```
every 1.day, :at => "8:00am" do
  ... 
```

# ruby - 如何获取尝试的 url 和 header 信息？

> ID：14116876
> 
> 赞同：0
> 
> 时间：2013-01-02T04:34:27.873
> 
> 标签：ruby, rest, activeresource

我正在尝试连接到 Web 服务端点，但我不知道如何调试它，我的代码是：

```
require 'rubygems'
require 'active_resource'

class Project < ActiveResource::Base
  class << self
    attr_accessor :auth_token
  end

  def save
    prefix_options[:auth_token] = self.class.auth_token
    super
  end
end

Project.site = 'http://example.com:8080/api/v1'
Project.format = :json
Project.auth_token = 'aaa1112222333'
p = Project.new(:name => 'pizza time 1')
p.save 
```

我收到以下错误：

```
gems/ruby-1.9.3-p194@testing/gems/activeresource-3.2.9/lib/active_resource/connection.rb:130:in `handle_response': Failed.  Response code = 400\.  Response message = Bad Request. (ActiveResource::BadRequest) 
```

如果它是 POST 或 GET 等，我如何输出请求的确切 url？

# unit-testing - 测试用例和测试谷歌应用引擎

> ID：14116881
> 
> 赞同：0
> 
> 时间：2013-01-02T04:34:55.777
> 
> 标签：unit-testing, google-app-engine

我在谷歌应用引擎**[python]**中开发了一个应用程序， 我如何通过某种脚本对其进行测试？我试过*gaeunit*。还有其他选择吗？

假设我有以下类型的表格

![在此处输入图像描述](../Images/2402ec982c7d9a0973a0a22cb4a9ab0d.png)

我该如何为此编写测试脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T10:56:27.837

这不是单元测试——单元测试是指您测试代码的基本单元以确保其正常运行，而不是在生产环境中运行它。您正在做的是功能测试。

我建议你看看[Selenium](http://seleniumhq.org/)。

# servicestack - 如何在 ServiceStack 中注销经过身份验证的用户？

> ID：14116882
> 
> 赞同：14
> 
> 时间：2013-01-02T04:34:56.337
> 
> 标签：servicestack

为菜鸟问题道歉。刚开始学习servicestack。我正在为我的视图引擎使用带有 Razor 的自托管控制台应用程序，用于注册的“RegistrationFeature”插件和用于通过表单发布进行身份验证的 CredentialsAuthProvider 以允许用户登录。

[SocialBootStrap](https://github.com/ServiceStack/SocialBootstrapApi)应用程序使用MVC 3 并执行“FormsAuthentication.SignOut()”以允许用户注销。鉴于我使用的是自托管应用程序，我创建了一个 LogoutService，它只执行 Request.RemoveSession() 并且似乎可以工作。

这是注销用户会话的正确方法吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-02T05:40:19.677

有一个明确的注销服务，即`/auth/logout`作为[ServiceStack 身份验证支持的](https://github.com/ServiceStack/ServiceStack/wiki/Authentication-and-authorization)一部分，您应该使用它。

您可以执行 GET 或 POST 到，`/auth/logout`或者如果您使用 C# 客户端，您可以使用以下命令注销：

```
client.Post(new Authenticate { provider = "logout" }); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-12T14:11:03.963

在 ServiceStack v4 上，您将需要此行。

```
client.Post(new Authenticate { provider = AuthenticateService.LogoutAction }); 
```

# mono - HttpWebRequest 在 Raspberry Pi 上使用单声道调用 WCF 服务超时

> ID：14116888
> 
> 赞同：1
> 
> 时间：2013-01-02T04:37:04.990
> 
> 标签：mono, timeout, raspberry-pi, system.net.httpwebrequest

我已经在运行 Devian 的树莓派模型 a 上安装了单声道。我可以使用 HTTPWebRequest 调用常规网页，但调用 WCF 服务会导致调用超时。这是代码：

```
using System;
using System.Net;
using System.IO;
using System.Text;

namespace TestWeb
{
    class MainClass
{
    public static void Main (string[] args)
    {
        var r = (HttpWebRequest)WebRequest.Create ("https://eventboardstaging2.falafel.com/ConferenceService2/ConferenceListEx?dummy=634924037818870000");
        r.Method = "POST";
        r.ContentType = "application/json; charset=utf-8";

        string json = "{\"PrivateLabel\":\"\",\"UserID\":\"46bff210-95fb-4292-8fe8-e3d99c86b97d\",\"UtcCutoff\":null}";

        byte[] data = Encoding.UTF8.GetBytes(json);

        using (var req = r.GetRequestStream()) {
            req.Write(data, 0, data.Length);
            using (var response = r.GetResponse()) {
                using (StreamReader sr = new StreamReader(response.GetResponseStream())) {
                    var s = sr.ReadToEnd ();
                    Console.WriteLine (s.Substring(1,100));
                }
            }
        }
    }
}
} 
```

堆栈跟踪是

```
Unhandled Exception: System.Net.WebException: The request timed out
at System.Net.HttpWebRequest.EndGetResponse (IAsyncResult asyncResult) [0x00000] in    <filename unknown>:0 
at System.Net.HttpWebRequest.GetResponse () [0x00000] in <filename unknown>:0 
at TestWeb.MainClass.Main (System.String[] args) [0x00000] in <filename unknown>:0 
[ERROR] FATAL UNHANDLED EXCEPTION: System.Net.WebException: The request timed out
at System.Net.HttpWebRequest.EndGetResponse (IAsyncResult asyncResult) [0x00000] in <filename unknown>:0 
at System.Net.HttpWebRequest.GetResponse () [0x00000] in <filename unknown>:0 
at TestWeb.MainClass.Main (System.String[] args) [0x00000] in <filename unknown>:0 
```

# python - 在python中交换两个列表

> ID：14116893
> 
> 赞同：4
> 
> 时间：2013-01-02T04:37:32.613
> 
> 标签：python, list

我在 python 中有一个包含 2 个大小相同的列表的列表，例如：

```
list_of_lists = [list1, list2] 
```

在对`list1`和进行一些处理后的 for 循环中`list2`，我必须交换它们，以便`list1`成为`list2`和`list2`成为初始化为全零的列表。所以在迭代结束时 list_of_lists 必须看起来像：

```
list_of_lists = [list1 which has contents of list2, list2 which has all zeros] 
```

在 C 中，可以只复制 的指针，`list2`然后`list1`指向`list2`一个初始化为全零的列表。我如何在 python 中做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-02T04:39:47.780

听起来你主要是在循环`list1`中工作。`list2`所以你可以重新分配它们的值：

```
list1 = list2
list2 = [0]*len(list2) 
```

Python 还允许您将其缩短为单行：

```
list1, list2 = list2, [0]*len(list2) 
```

但在这种情况下，我发现两行版本更具可读性。或者，如果你真的想要`list_of_lists`，那么：

```
list_of_lists = [list2, [0]*len(list2)] 
```

或者如果你想要两者：

```
list1, list2 = list_of_lists = [list2, [0]*len(list2)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T04:40:41.180

像这样...

```
list_of_lists = [list_of_lists[1], []]

for i in range(count):
    list_of_lists[1].append(0) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T05:08:30.127

```
list_of_lists=[ list_of_lists[1], [0,]*len(list_of_lists[1]) ] 
```

交换的成本与您提到的指针交换相同

# optimization - 优化 Haskell 程序

> ID：14116900
> 
> 赞同：5
> 
> 时间：2013-01-02T04:38:56.073
> 
> 标签：optimization, haskell

我昨天开始研究 Haskell，目标是真正学习它。我在编程语言课程中用它编写了一些琐碎的程序，但没有一个真正关心效率。我试图了解如何提高以下程序的运行时间。

我的程序解决了以下玩具问题（如果您知道阶乘是什么，我知道手动计算答案很简单，但我正在使用后继函数以蛮力方式进行计算）：

[http://projecteuler.net/problem=24](http://projecteuler.net/problem=24)

给定有限长度列表的字典排序后继函数的算法如下：

1.  如果列表已经按降序排列，那么我们在字典顺序中拥有最大元素，因此没有后继。

2.  给定一个列表 h : t，或者 t 在词典排序中是最大的，或者不是。在后一种情况下，计算 t 的后继。在前一种情况下进行如下。

3.  选择 t 中大于 h 的最小元素 d。

4.  用 t 中的 h 替换 d，给出一个新列表 t'。排序中的下一个元素是 d : (sort t')

我实现这个的程序如下（很多这些函数可能在标准库中）：

```
max_list :: (Ord a) => [a] -> a
max_list []     = error "Empty list has no maximum!"
max_list (h:[]) = h
max_list (h:t)  = max h (max_list t)

min_list :: (Ord a) => [a] -> a
min_list []     = error "Empty list has no minimum!"
min_list (h:[]) = h
min_list (h:t)  = min h (min_list t)

-- replaces first occurrence of x in list with y
replace :: (Eq a) => a -> a -> [a] -> [a]
replace _ _ []  = []
replace x y (h:t)
    | h == x    = y : t
    | otherwise = h : (replace x y t)

-- sort in increasing order
sort_list :: (Ord a) => [a] -> [a]
sort_list []    = []
sort_list (h:t) = (sort_list (filter (\x -> x <= h) t))
               ++ [h]
               ++ (sort_list (filter (\x -> x > h) t))

-- checks if list is in descending order
descending :: (Ord a) => [a] -> Bool
descending []     = True
descending (h:[]) = True
descending (h:t)
    | h > (max_list t) = descending t
    | otherwise        = False

succ_list :: (Ord a) => [a] -> [a]
succ_list []      = []
succ_list (h:[])  = [h]
succ_list (h:t)
    | descending (h:t)   = (h:t)
    | not (descending t) = h : succ_list t
    | otherwise = next_h : sort_list (replace next_h h t)
    where next_h = min_list (filter (\x -> x > h) t)

-- apply function n times
apply_times :: (Integral n) => n -> (a -> a) -> a -> a
apply_times n _ a
    | n <= 0      = a
apply_times n f a = apply_times (n-1) f (f a)

main = putStrLn (show (apply_times 999999 succ_list [0,1,2,3,4,5,6,7,8,9])) 
```

现在是实际问题。在注意到我的程序运行了一段时间后，我编写了一个等效的 C 程序进行比较。我的猜测是 Haskell 的惰性求值会导致 apply_times 函数在实际开始求值之前在内存中构建一个巨大的列表。我必须增加运行时堆栈大小才能运行。既然高效的 Haskell 编程似乎是关于技巧的，那么有没有什么好的技巧可以用来最小化内存消耗？尽量减少复制和垃圾收集的方法怎么样，因为列表会不断创建，而 C 实现会完成所有工作。

既然 Haskell 被认为是高效的，我想一定有办法吗？关于 Haskell，我不得不说的一件很酷的事情是，该程序在第一次编译时就可以正常工作，因此该语言的一部分似乎确实兑现了它的承诺。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-02T05:53:00.490

> 许多这些功能可能在标准库中

确实。如果您`import Data.List`, 则可以`sort`使用，`maximum`并且`minimum`可以从`Prelude`. `sort`from`Data.List`总而言之比准快速排序更有效，特别是因为这里的列表中有很多已排序的块。

```
descending :: (Ord a) => [a] -> Bool
descending []     = True
descending (h:[]) = True
descending (h:t)
    | h > (max_list t) = descending t
    | otherwise        = False 
```

效率低——`O(n²)`因为它在每一步都遍历了整个左尾，尽管如果列表是降序的，那么尾的最大值必须是它的头。 **但这**在这里有一个很好的结果。它防止了 thunk 的积累，因为第三个等式的第一个守卫`succ_list`强制对列表进行完全评估。但是，通过显式强制列表*once*可以更有效地完成此操作。

```
descending (h:t@(ht:_)) = h > ht && descending t 
```

会使它成为线性的。那

> 在注意到我的程序运行了一段时间后，我编写了一个等效的 C 程序进行比较。

那将是不寻常的。到目前为止，很少有人会在 C 中使用链表，在此之上实现惰性求值将是一项艰巨的任务。

用 C编写一个*等价*的程序是非常不习惯的。在 C 中，实现算法的自然方法是使用数组和就地突变。这在这里自动效率更高。

> 我的猜测是 Haskell 的惰性求值会导致 apply_times 函数在实际开始求值之前在内存中构建一个巨大的列表。

不完全是，它构建的是一个巨大的thunk，

```
apply_times 999999 succ_list [0,1,2,3,4,5,6,7,8,9]
~> apply_times 999998 succ_list (succ_list [0 .. 9])
~> apply_times 999997 succ_list (succ_list (succ_list [0 .. 9]))
~> apply_times 999996 succ_list (succ_list (succ_list (succ_list [0 .. 9])))
...
succ_list (succ_list (succ_list ... (succ_list [0 .. 9])...)) 
```

并且，在构建该 thunk 之后，必须对其进行评估。要评估最外面的调用，必须对下一个调用进行足够远的评估，以找出最外面的调用中匹配的模式。所以最外面的调用被压入堆栈，并开始评估下一个调用。为此，必须确定哪个模式匹配，因此需要第三次调用的部分结果。因此，第二个调用被压入堆栈 ... 。最后，堆栈上有 999998 个调用，并开始计算最里面的调用。然后你在每次调用和下一个外部调用之间打一点乒乓球（至少，依赖关系可能会传播得更远），同时从堆栈中冒泡和弹出调用。

> 有什么好技巧可以用来减少内存消耗

是的，强制中间列表在它们成为 的参数之前进行评估`apply_times`。您需要在这里进行完整的评估，所以香草`seq`还不够好

```
import Control.DeepSeq

apply_times' :: (NFData a, Integral n) => n -> (a -> a) -> a -> a
apply_times' 0 _ x = x
apply_times' k f x = apply_times' (k-1) f $!! f x 
```

这可以防止 thunk 的积累，因此您不需要比在`succ_list`和计数器中构建的一些短列表更多的内存。

> 尽量减少复制和垃圾收集的方法怎么样，因为列表会不断创建，而 C 实现会完成所有工作。

对，这仍然会分配（和垃圾收集）很多。现在，GHC在分配和垃圾收集短期数据方面**非常出色（在我的机器上，它可以轻松地以每 MUT 秒 2GB 的速率进行分配而不会很慢），但是，***不分配*所有这些列表会更快。

因此，如果要推送它，请使用就地突变。工作在一个

```
STUArray s Int Int 
```

或者一个未装箱的可变向量（我更喜欢`array`包提供的接口，但最喜欢`vector`接口；在性能方面，`vector`包为你内置了很多优化，如果你使用`array`包，你必须编写自己快速编写代码，但编写良好的代码在所有实际用途中的性能相同）。

* * *

我现在做了一些测试。我没有测试过原来的lazy `apply_times`，只测试了`deepseq`每个应用程序的一个`f`，并且已经将所有涉及的实体的类型固定为`Int`。

通过该设置，替换`sort_list`为`Data:list.sort`将运行时间从 1.82 秒减少到 1.65 秒（但增加了分配的字节数）。差别不大，但列表不够长，不足以让准快速排序的坏案例真正咬人。

最大的区别在于`descending`按照建议进行更改，这将时间降低到 0.48 秒，分配速率为每 MUT 秒 2,170,566,037 字节，GC 时间为 0.01 秒（然后使用`sort_list`而不是`sort`使时间达到 0.58 秒）。

用更简单的方法替换列表结尾段的排序`reverse`- 该算法保证在排序时按降序排序 - 将时间缩短到 0.43 秒。

算法的相当直接的翻译以使用未装箱的可变数组，

```
{-# LANGUAGE BangPatterns #-}
module Main (main) where

import Data.Array.ST
import Data.Array.Base
import Control.Monad.ST
import Control.Monad (when, replicateM_)

sortPart :: STUArray s Int Int -> Int -> Int -> ST s ()
sortPart a lo hi
   | lo < hi   = do
       let lscan !p h i
               | i < h = do
                   v <- unsafeRead a i
                   if p < v then return i else lscan p h (i+1)
               | otherwise = return i
           rscan !p l i
               | l < i = do
                   v <- unsafeRead a i
                   if v < p then return i else rscan p l (i-1)
               | otherwise = return i
           swap i j = do
               v <- unsafeRead a i
               unsafeRead a j >>= unsafeWrite a i
               unsafeWrite a j v
           sloop !p l h
               | l < h = do
                   l1 <- lscan p h l
                   h1 <- rscan p l1 h
                   if (l1 < h1) then (swap l1 h1 >> sloop p l1 h1) else return l1
               | otherwise = return l
       piv <- unsafeRead a hi
       i <- sloop piv lo hi
       swap i hi
       sortPart a lo (i-1)
       sortPart a (i+1) hi
   | otherwise = return ()

descending :: STUArray s Int Int -> Int -> Int -> ST s Bool
descending arr lo hi
    | lo < hi   = do
        let check i !v
                | hi < i    = return True
                | otherwise = do
                    w <- unsafeRead arr i
                    if w < v
                      then check (i+1) w
                      else return False
        x <- unsafeRead arr lo
        check (lo+1) x
    | otherwise = return True

findAndReplace :: STUArray s Int Int -> Int -> Int -> ST s ()
findAndReplace arr lo hi
    | lo < hi   = do
        x <- unsafeRead arr lo
        let go !mi !mv i
                | hi < i    = when (lo < mi) $ unsafeWrite arr mi x >> unsafeWrite arr lo mv
                | otherwise = do
                    w <- unsafeRead arr i
                    if x < w && w < mv
                      then go i w (i+1)
                      else go mi mv (i+1)
            look i
                | hi < i    = return ()
                | otherwise = do
                    w <- unsafeRead arr i
                    if x < w
                      then go i w (i+1)
                      else look (i+1)
        look (lo+1)
    | otherwise = return ()

succArr :: STUArray s Int Int -> Int -> Int -> ST s ()
succArr arr lo hi
    | lo < hi   = do
        end <- descending arr lo hi
        if end
          then return ()
          else do
              needSwap <- descending arr (lo+1) hi
              if needSwap
                then do
                    findAndReplace arr lo hi
                    sortPart arr (lo+1) hi
                else succArr arr (lo+1) hi
    | otherwise = return ()

solution :: [Int]
solution = runST $ do
    arr <- newListArray (0,9) [0 .. 9]
    replicateM_ 999999 $ succArr arr 0 9
    getElems arr

main :: IO ()
main = print solution 
```

在 0.15 秒内完成。用更简单的零件反转代替排序可以将其降低到 0.11。

将算法拆分为小的顶级函数，每个函数执行一项任务，使其更具可读性，但这是有代价的。函数之间需要传递更多参数，因此并非所有参数都可以在寄存器中传递，并且某些传递的参数 - 数组边界和元素计数 - 根本没有使用，所以这是传递的重量。使所有其他函数成为本地函数在`solution`一定程度上减少了整体分配和运行时间（排序为 0.13 秒，反转为 0.09 秒），因为现在只需要传递必要的参数。

进一步偏离给定的算法并使其回到前面，

```
module Main (main) where

import Data.Array.ST
import Data.Array.Base
import Data.Array.Unboxed
import Control.Monad.ST
import Control.Monad (when)
import Data.Bits

lexPerm :: Int -> Int -> [Int]
lexPerm idx num = elems (runSTUArray $ do
    arr <- unsafeNewArray_ (0,num)
    let fill i
            | num < i   = return ()
            | otherwise = unsafeWrite arr i i >> fill (i+1)
        swap i j = do
            x <- unsafeRead arr i
            y <- unsafeRead arr j
            unsafeWrite arr j x
            unsafeWrite arr i y
        flop i j
            | i < j     = do
                swap i j
                flop (i+1) (j-1)
            | otherwise = return ()
        binsearch v a b = go a b
          where
            go i j
              | i < j     = do
                let m = (i+j+1) `unsafeShiftR` 1
                w <- unsafeRead arr m
                if w < v
                  then go i (m-1)
                  else go m j
              | otherwise = swap a i
        upstep k j
            | k < 1     = return ()
            | j == num-1 = unsafeRead arr num >>= flip (back k) (num-1)
            | otherwise  = nextP k (num-1)
        back k v i
            | i < 0     = return ()
            | otherwise = do
                w <- unsafeRead arr i
                if w < v
                  then nextP k i
                  else back k w (i-1)
        nextP k up
            | k < 1 || up < 0   = return ()
            | otherwise = do
                v <- unsafeRead arr up
                binsearch v up num
                flop (up+1) num
                upstep (k-1) up
    fill 0
    nextP (idx-1) (num-1)
    return arr)

main :: IO ()
main = print $ lexPerm 1000000 9 
```

我们可以在 0.02 秒内完成任务。

然而，问题中提到的聪明算法用更少的代码在更短的时间内解决了任务。

# python - 如何在数据库服务器上运行 South migrations (Django)？

> ID：14116907
> 
> 赞同：0
> 
> 时间：2013-01-02T04:40:12.873
> 
> 标签：python, mysql, database, django, django-south

最初，我刚刚拥有同时安装了 Django、South 和我的数据库的服务器（网络 + 数据库服务器相结合）。但现在，我们正在转向专用数据库服务器和专用 Web 应用服务器。

由于数据库服务器没有安装 Django 或 South，我该如何运行迁移？或者至少，用新的模式更改更新数据库的最佳方法是什么？如果有帮助，那就是 MySQL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T04:45:11.043

数据库是否与 django/South 在同一台机器上运行并不重要。无论您的 django 安装在哪里，都在其设置中配置了数据库。南迁应该完全一样。

# c++ - SFML 窗口不出现

> ID：14116913
> 
> 赞同：0
> 
> 时间：2013-01-02T04:40:59.123
> 
> 标签：c++, sfml

最近，我一直在与 SFML 合作创建一个小游戏——直到今天晚上，一切都出奇地快速和简单。我离开了常用的工作站，在 Windows 8 平板电脑/上网本上进行了一些清理工作，游戏窗口不再出现。我可以运行程序，它立即完成，并要求我按任意键退出控制台。我做了一些研究，发现我使用的SFML版本不支持ATI显卡，所以我将程序升级到2.0（它现在基本上只是一个框架，所以升级只花了几个小时，并且我认为即使它没有解决所有问题也不会受到伤害）。

不幸的是，它仍然没有出现。当我运行程序时，控制台会按预期出现，但图形/渲染窗口没有 - 而是显示文本“按任意键继续”。打印在控制台上，就好像程序已经运行完毕一样。按下某个键会导致程序退出，返回值为 0。

该程序使用 Codelite 用 C++ 编写，并使用 g++ 编译。我目前正在使用 Windows 8 Professional 平板电脑/上网本，虽然在我可以访问另一台计算机之前无法对其进行测试，但它之前运行良好，我没有理由相信它已经停止运行所以在当前环境之外。有什么建议么？

[更新]：尝试在另一台 PC 上运行它，Windows 7，并得到一个新的错误，关于无法在 libstdc++-6.dll 中找到过程入口点 __gxx_personality_v0。整个代码太大而无法发布，但我认为这不是问题，因为它似乎甚至没有进入 main()。

```
#include <iostream>
#include <string>
#include <cstdio>
#include <cassert>

#include "sfml.hpp"
#include "angelscript.hpp"
#include "MapGenerator.hpp"
#include "TestState.hpp"
#include "std.hpp"

sf::RenderWindow* initialize();

void TestAngelScript();
void MessageCallback(const asSMessageInfo *msg, void *param);

int main()
{   
    std::cout << "Made it into main!!!" << std::endl;
    TestAngelScript();

    std::cout << "Initializing" << std::endl;
    sf::RenderWindow* App = initialize();

    TextureHandler::Initialize();
    FontHandler::Initialize();
    SoundHandler::Initialize();
    MusicHandler::Initialize();
    InputHandler::Initialize(App);
    StateEngine engine;
    IState* state = new TestState(App);
    engine.AddState(state);

    sf::Clock clock;

    while (App->isOpen())
    {
        sf::Event Event;
        while (App->pollEvent(Event))
        {
            // Window closed
            if (Event.type == sf::Event::Closed)
                App->close();

            // Escape key pressed
            if ((Event.type == sf::Event::KeyPressed) && (Event.key.code == sf::Keyboard::Escape))
                App->close();
        }

        // Get elapsed time
        float ElapsedTime = clock.restart().asSeconds();

        engine.Update(ElapsedTime);
        App->clear();
        engine.Draw(App);
        App->display(); 
    }

    return EXIT_SUCCESS;
}

sf::RenderWindow* initialize()
{
    return new sf::RenderWindow(sf::VideoMode(800, 600, 32), "SFML Graphics");
}

// Print the script string to the standard output stream
void print(std::string &msg)
{
  printf("%s", msg.c_str());
}

void TestAngelScript()
{
    // Create the script engine
    asIScriptEngine *engine = asCreateScriptEngine(ANGELSCRIPT_VERSION);

    // Set the message callback to receive information on errors in human readable form.
    int r = engine->SetMessageCallback(asFUNCTION(MessageCallback), 0, asCALL_CDECL); assert( r >= 0 );

    // AngelScript doesn't have a built-in string type, as there is no definite standard 
    // string type for C++ applications. Every developer is free to register it's own string type.
    // The SDK do however provide a standard add-on for registering a string type, so it's not
    // necessary to implement the registration yourself if you don't want to.
    RegisterStdString(engine);

    // Register the function that we want the scripts to call 
    r = engine->RegisterGlobalFunction("void print(const string &in)", asFUNCTION(print), asCALL_CDECL); assert( r >= 0 );  

    // The CScriptBuilder helper is an add-on that loads the file,
    // performs a pre-processing pass if necessary, and then tells
    // the engine to build a script module.
    CScriptBuilder builder;
    r = builder.StartNewModule(engine, "MyModule"); 
    if( r < 0 ) 
    {
      // If the code fails here it is usually because there
      // is no more memory to allocate the module
      printf("Unrecoverable error while starting a new module.\n");
      return;
    }
    r = builder.AddSectionFromFile("assets\\scripts\\test.as");
    if( r < 0 )
    {
      // The builder wasn't able to load the file. Maybe the file
      // has been removed, or the wrong name was given, or some
      // preprocessing commands are incorrectly written.
      printf("Please correct the errors in the script and try again.\n");
      return;
    }
    r = builder.BuildModule();
    if( r < 0 )
    {
      // An error occurred. Instruct the script writer to fix the 
      // compilation errors that were listed in the output stream.
      printf("Please correct the errors in the script and try again.\n");
      return;
    }

    // Find the function that is to be called. 
    asIScriptModule *mod = engine->GetModule("MyModule");
    asIScriptFunction *func = mod->GetFunctionByDecl("void main()");
    if( func == 0 )
    {
      // The function couldn't be found. Instruct the script writer
      // to include the expected function in the script.
      printf("The script must have the function 'void main()'. Please add it and try again.\n");
      return;
    }

    // Create our context, prepare it, and then execute
    asIScriptContext *ctx = engine->CreateContext();
    ctx->Prepare(func);
    r = ctx->Execute();
    if( r != asEXECUTION_FINISHED )
    {
      // The execution didn't complete as expected. Determine what happened.
      if( r == asEXECUTION_EXCEPTION )
      {
        // An exception occurred, let the script writer know what happened so it can be corrected.
        printf("An exception '%s' occurred. Please correct the code and try again.\n", ctx->GetExceptionString());
      }
    }

    // Clean up
    ctx->Release();
    engine->Release();
}

// Implement a simple message callback function
void MessageCallback(const asSMessageInfo *msg, void *param)
{
  const char *type = "ERR ";
  if( msg->type == asMSGTYPE_WARNING ) 
    type = "WARN";
  else if( msg->type == asMSGTYPE_INFORMATION ) 
    type = "INFO";
  printf("%s (%d, %d) : %s : %s\n", msg->section, msg->row, msg->col, type, msg->message);
} 
```

没有任何东西输出到控制台，保存执行后输入的提示。程序返回 0。

在 IDE 之外运行程序会导致一些关于缺少 DLL 的错误（libstdc++-6.dll 和 libgcc_s_sjlj_1.dll）一旦提供了这些错误，我就会收到关于缺少过程入口点的错误……尽管在上网本上它会抱怨SFML 音频 dll 中缺少大约相同的点......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-22T10:59:32.410

我知道这是一个老问题，但以防万一您仍在尝试解决它。

在我看来，您的渲染窗口的初始化函数很可能是问题所在。您正在返回一个指向局部变量的指针，这将起作用，但您不会得到您的窗口。

您需要在 main 之外声明您的应用程序指针，例如

```
sf::RenderWindow* App;
void initialize() { /* Initialize render window here. */ };

...

int main() ... 
```

或者您可以选择更简单的解决方案，只需在主函数中创建窗口。

```
...
int main () {
...
sf::RenderWindow App(sf::VideoMode(800, 600), "my window");
...
} 
```

请注意，如果它是在 main 中创建的，您仍然可以将它传递给您的函数

```
InputHandler::Initialize(&App); 
```

您的初始化函数应将 a`sf::RenderWindow*`作为参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T18:16:23.897

关于不显示 sfml 窗口：这是一个已知问题，当您的窗口超过屏幕分辨率时会发生这种情况。减小渲染窗口的高度和/或宽度通常可以解决问题。您也可以改用全屏模式。

# iphone - UIActivityIndi catorView 不会停止 UIWebView

> ID：14116914
> 
> 赞同：-1
> 
> 时间：2013-01-02T04:40:59.870
> 
> 标签：iphone, ios, xcode, uiwebview, uiactivityindicatorview

**编辑：我解决了**

我解决了。我变了：

```
@property(nonatomic,retain) UIActivityIndicatorView *activityIndicator; 
```

至

```
@property(nonatomic,retain) IBOutlet UIActivityIndicatorView *activityIndicator; 
```

**我的问题：**

我正在制作一个简单的 UIWebView 应用程序，我希望指示器在加载完网页后停止旋转。我在故事板界面中选中了“完成后隐藏”，并将指示器连接到视图控制器（activityIndi​​cator）。它仍然没有停止。在我的头文件中，我有这个：

```
@interface ViewController : UIViewController<UIWebViewDelegate>{
IBOutlet UIBarButtonItem *bBack, *bForward, *toolbarStop, *toolbarRefresh;
IBOutlet UIActivityIndicatorView *_activityIndicator;

BOOL internetOK;
NSTimer *timer;

}
-(void)tryInternet;
-(void)loading;
-(void)startAnimating;
-(void)stopAnimating;
-(void)verifyInternet;
-(IBAction)refresh:(id)sender;
-(IBAction)dontTouchMe:(id)sender;
-(IBAction)refreshWebView:(id)sender;
@property (weak, nonatomic) IBOutlet UIWebView *webview;
@property(nonatomic,retain) UIActivityIndicatorView *activityIndicator; 
```

在我的 .m 文件中，我有这个：

```
- (void)webViewDidStartLoad:(UIWebView *)webView {
    [_activityIndicator startAnimating];
}

- (void)webViewDidFinishLoad:(UIWebView *)webView {
    [_activityIndicator stopAnimating]; 
```

为什么这不起作用？你有什么想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T05:41:10.457

我假设，您已将委托连接到您的视图控制器。

每当调用`webViewDidStartLoad`委托时`UIWebView`，您的动画就会开始。

我认为，方法不是`webViewDidFinishLoad`方法，而是`webViewFailedToLoad`调用。因此，您需要`[activityIndicator stopAnimating];`在该失败的方法中编写代码。

希望，对你有帮助。

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T05:05:34.413

在您的.h 文件中，取两个相同的名称，即activityIndi​​cator。然后在你的 .m 文件中合成它，即`activityIndicator = _activityIndicator`. 然后编写以下代码 -

```
- (void)webViewDidStartLoad:(UIWebView *)webView
{
 [activityIndicator setActivityIndicatorViewStyle:UIActivityIndicatorViewStyleGray];
 [activityIndicator startAnimating];
}

- (void)webViewDidFinishLoad:(UIWebView *)webView {
 [activityIndicator stopAnimating]; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T12:05:37.083

我解决了。我变了：

```
@property(nonatomic,retain) UIActivityIndicatorView *activityIndicator; 
```

至

```
@property(nonatomic,retain) IBOutlet UIActivityIndicatorView *activityIndicator; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T04:52:40.320

尝试使用以下代码。

```
- (void)webViewDidStartLoad:(UIWebView *)webView
{
 [_activityIndicator setActivityIndicatorViewStyle:UIActivityIndicatorViewStyleGray];
 [_activityIndicator setFrame:CGRectMake(200, 10, 20, 20)];
 [self.view addSubview:_activityIndicator];
 [_activityIndicator startAnimating];
}

- (void)webViewDidFinishLoad:(UIWebView *)webView {
 [_activityIndicator startAnimating];
} 
```

我希望它会奏效。

# java - 通过AudioInputStream读取数据时需要关心大端和小端吗？

> ID：14116916
> 
> 赞同：10
> 
> 时间：2013-01-02T04:41:14.763
> 
> 标签：java, audio, bytearray, endianness, javasound

我正在通过 AudioInputStream 将 wav 文件读入字节数组，

```
 AudioInputStream audiofile = AudioSystem.getAudioInputStream(f);
    byte[] audio=new byte[numberofframes*framesize];
    int bytes=audiofile.read(audio); 
```

考虑到数据是以小端序排列的，还是 AudioInputStream 为我做的，我是否需要排列样本的字节？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:04:36.167

如果数据以多于一个字节编码，例如，16 位或更多位深度，无论通道数如何，大端与小端都很重要。Java 不会自动按默认顺序排列 PCM 字节，它只是接受它们。

以下是 java 音频教程中最清晰、写得最好的单节，恕我直言，涵盖了与格式及其转换有关的问题：

[http://docs.oracle.com/javase/tutorial/sound/converters.html](http://docs.oracle.com/javase/tutorial/sound/converters.html)

# android - 如何将图像按钮包装在水平线性布局中？

> ID：14116919
> 
> 赞同：9
> 
> 时间：2013-01-02T04:42:35.633
> 
> 标签：android, android-linearlayout, android-relativelayout

有没有办法在水平线性布局中包装图像按钮？或者还有其他方法可以做以下事情吗？

我有六个图像按钮。假设这些按钮出现在这样的中等分辨率设备中：

```
Image button 1 | Image button 2 | Image button 3 | (1st row)

Image button 4 | Image button 5 | Image button 6 | (2nd row) 
```

我希望这些按钮出现在平板电脑或任何这样的高分辨率设备中：

```
Image button 1 | Image button 2 | Image button 3 | Image button 4 | (1st row)

Image button 5 | Image button 6 |      (2nd row) 
```

或者像这样：

```
Image button 1 | Image button 2 | Image button 3 | Image button 4 | Image button 5 | 
Image button 6 | 
```

根据设备屏幕。

这是我的主要 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>

<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@layout/back2">

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@layout/back2">
<TextView
        android:layout_width="fill_parent"
        android:layout_height="50dp"
        android:background="@layout/button5"
        android:gravity="center"
        android:orientation="vertical"
        android:text="@string/hello"
        android:textColor="#D5D5D5"
        android:textSize="20sp" />
<com.google.ads.AdView android:id="@+id/adView"
                         android:layout_width="wrap_content"
                         android:layout_height="wrap_content"
                         ads:adUnitId="a150c75f96c352c"
                         ads:adSize="BANNER"

                         ads:loadAdOnCreate="true"/>

<org.core.mywindows8.FlowLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:f="http://schemas.android.com/apk/res/org.core.mywindows8"
f:horizontalSpacing="6dip"
f:verticalSpacing="12dip"
f:fitContent="true"

   android:layout_width="fill_parent"
android:layout_height="wrap_content"
>

<Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
      android:background="@color/morange1"
        android:drawableTop="@drawable/tutorials"
        android:textColor="#ffffff"
        android:id="@+id/button1"
        android:paddingTop="16sp"
        android:drawablePadding="10sp"
        android:text="@string/tutorials"
/>
<Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
    android:background="@color/mviolet"
        android:drawableTop="@drawable/themes"
        android:textColor="#ffffff"
        android:id="@+id/button2"
        android:paddingTop="16sp"
        android:drawablePadding="10sp"
        android:text="@string/themes"
        />
<Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
     android:background="@color/mblu2"
        android:drawableTop="@drawable/gadgets"
         android:textColor="#ffffff"
        android:id="@+id/button3"
        android:paddingTop="16sp"
        android:drawablePadding="10sp"
        android:text="@string/gadgets"/>
<Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
android:background="@color/mgree"
        android:drawableTop="@drawable/network"
        android:textColor="#ffffff"
        android:id="@+id/button4"
        android:paddingTop="16sp"

        android:drawablePadding="10sp"
       android:text="@string/networking"/>
<Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
    android:background="@color/mblu3"
        android:drawableTop="@drawable/search"
         android:textColor="#ffffff"
        android:id="@+id/button5"
        android:paddingTop="16sp"
        android:drawablePadding="10sp"
        android:text="@string/win8index"/>

 </org.core.mywindows8.FlowLayout>
</LinearLayout>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-02T04:45:13.117

您可以为此使用 FlowLayout。

检查[这个](https://github.com/ApmeM/android-flowlayout)

**已编辑**

从我给您的链接中将所需的类、样式和属性添加到您的项目中。并通过将其添加到您的布局 XML 中来使用此布局。

* * *

在 Git 项目中提到.. 将 Git 项目中的所有文件复制到您的项目中

用户 FlowLayout 而不是 XML 中的 LinearLayout

```
<com.yourpackage.FlowLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
>
</com.yourpackage.FlowLayout> 
```

然后在该 FlowLayout 中添加您的子视图，可能仅在 XML 中或在运行时。

其他支持的参数是：

```
xmlns:f="http://schemas.android.com/apk/res/your.namespace"
f:horizontalSpacing="6dip"
f:verticalSpacing="12dip"
f:orientation="vertical"
f:layout_horizontalSpacing="32dip"
f:layout_verticalSpacing="32dip" 
```

* * *

我添加了一个支持以将内容放在一行中。获取[我的 github 源](https://github.com/vivekkhandelwal/android-flowlayout)

使这项工作。您需要为您的布局再提供一个属性 fitContent 为 true。

f:fitContent="true"

**回答您的意见**

f:verticalSpacing="12dip" - 用于指定整个 FlowLayout 的垂直间距。即每个子视图/按钮都将具有垂直间距。

例子

```
 <org.apmem.tools.layouts.FlowLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        f:verticalSpacing="12dip"
    >

</org.apmem.tools.layouts.FlowLayout> 
```

而 f:layout_verticalSpacing="32dip" 在我们指定权重时被指定给子按钮

例子

```
<Button
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    f:layout_verticalSpacing="32dip"
>
</Button> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-22T19:21:39.920

我在这里发布了一个简单且相对简洁的解决方案的详细信息：

[https://stackoverflow.com/a/23228213/2162226](https://stackoverflow.com/a/23228213/2162226)

* * *

*摘要*：

*   解决方案基于这个共享项目：[http ://hzqtc.github.io/2013/12/android-custom-layout-flowlayout.html](http://hzqtc.github.io/2013/12/android-custom-layout-flowlayout.html)

*   我的帖子解释了如何解决我使用该示例遇到的错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T04:55:23.627

通常，您会为不同的配置制作备用布局 XML 文件。这些文件夹中的每一个都将有一个同名的 xml 文件（您`setContentView()`在 Activity 中调用时使用的文件）。

```
/res/layout/
/res/layout-sw600dp/
/res/layout-sw720dp/ 
```

如果您的项目没有这些文件夹，您可以继续自己制作。这会在运行时告诉系统，根据设备的最小可用宽度（以与密度无关的像素表示），将使用这三种布局中的一种。`sw600dp`推荐用于指定“大屏幕”，如 7 英寸平板电脑；`sw720dp`推荐用于指定“xlarge 屏幕”，如 10 英寸平板电脑。这些数字可以是任意的。

您也可以按照 Vivek Khandelwal 的建议使用 FlowLayout 实现，但这可能会或可能不会完全按照您的意愿工作。

# php - 错误：未定义的属性：codeigniter 中的 News::$form_validation

> ID：14116920
> 
> 赞同：2
> 
> 时间：2013-01-02T04:42:52.480
> 
> 标签：php, codeigniter, codeigniter-form-helper

我是 codeigniter 的新手，正在尝试用户指南中的教程。但我坚持我的第三个教程是创建新闻项目。在我的控制器部分，它给出了以下错误：

严重性：通知

消息：未定义的属性：News::$form_validation

文件名：控制器/news.php

行号：44

我在控制器部分使用的代码是

```
public function create()
{
$this->load->helper('form');
$this->load->library('form_validation');

$data['title'] = 'Create a news item';

$this->form_validation->set_rules('title', 'Title', 'required');
$this->form_validation->set_rules('text', 'text', 'required');

if ($this->form_validation->run() === FALSE)
{
    $this->load->view('templates/header', $data);   
    $this->load->view('news/create');
    $this->load->view('templates/footer');

}
else
{
    $this->news_model->set_news();
    $this->load->view('news/success');
}
} 
```

请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:52:57.157

可能您没有指定加载模型。所以在之前包括这个

```
$this->load->model('news_model'); 
```

之后你可以打电话

```
$this->news_model->set_news(); 
```

或编辑 config\autoload.php 并设置您的模型，然后您可以在成功验证后使用

```
news_model::set_news(); 
```

或者你可以在构造函数中，像这样：

```
class MySomeClas extend CI_Controller
 {
  parent::__construct();
  $this->load->model('news_model');
 } 
```

并正确调用模型

# php - 将数据 PHP 多维数组传递给 Javascript

> ID：14116932
> 
> 赞同：0
> 
> 时间：2013-01-02T04:44:48.510
> 
> 标签：php, javascript, jquery, json, multidimensional-array

我在这个网站上搜索了一个解决方案，但不幸的是，根本没有用，所以我决定问你们。希望你能帮帮我。

我有这个将值推入数组的 PHP 文件。

**PHP文件：**

```
$out_html = array();
$type1_ach = array(
    "title" => $ach_info[0], //Title1 is Value of $ach_info[0]
    "description" => $ach_info[1] //Description1 is Value of $ach_info[1]
);
array_push($out_html, $type1_ach);

$type5_ach = array(
    "title" => $ach_info[0], //Title2 is Value of $ach_info[0]
    "description" => $ach_info[1] //Description2 is Value of $ach_info[1]
);

array_push($out_html, $type5_ach); 
```

我使用 JSON 回应它，因为我通过 jquery 传递它。

`echo json_encode($out_html);`

这是我的 HTML 文件，它应该输出我从 PHP 文件传递​​的数据。

**文件：**

```
function test_pop() {
    var fb_id = "1**************"; //Facebook ID
    var v_id = "***********"; //Video ID

$.post('http://mysite.com/test.php', {fb_id: fb_id, v_id: v_id}, function(data) {
    var obj = $.parseJSON(data);
    var title = obj.title;
    var description = obj.description;
    var whole_ach = "You obtained " + title + "<br>" + description;
    console.log(whole_ach);

});
} 
```

它在控制台日志中输出响应为：

**你得到了 undefined <br> undefined**

然后，如果我将变量更改`var title = obj.title;`为`var title = obj.title[0];` 并更改`description = obj.description`为`description = obj.description[0]`它会给出输出（响应）

**未捕获的类型错误：无法读取未定义的属性“0”**

所需的输出应该是**您获得了 Title1 < br> Description1**但不幸的是我似乎做不到正确。

希望大家帮帮我，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T05:01:37.077

您应该收到一组对象。`data`数组也是如此，但您将其视为对象。

尝试遍历数组：

```
$.each(obj,function( index, item){    
   console.log( item.title);    
}) 
```

或者，如果您想直接访问主数组中的值：

```
console.log( obj[0].title); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T05:03:30.087

需要更新您的 JavaScript 代码：

```
function test_pop() {
    var fb_id = "1**************"; //Facebook ID
    var v_id = "***********"; //Video ID

$.post('http://mysite.com/test.php', {fb_id: fb_id, v_id: v_id}, function(data) {
    var obj = $.parseJSON(data);
    var title = obj[0].title;
    var description = obj[0].description;
    var whole_ach = "You obtained " + title + "\n" + description;
    console.log(whole_ach);

});
} 
```

您需要指定数组索引号：

```
 var title = obj[0].title;
    var description = obj[0].description; 
```

希望有帮助。

# watir - 在 watir 中保存屏幕截图

> ID：14116937
> 
> 赞同：9
> 
> 时间：2013-01-02T04:45:58.780
> 
> 标签：watir

我想将屏幕截图保存在 Watir 中，文件名如`ddmmyyyy_hhmmss.png`.

我正在尝试关注...

```
@@filename = Time.now
browser.screenshot.save (@@filename.png) 
```

...但它将文件保存为`@@filename.png`. 我还需要将文件保存在特定位置。

你能帮帮我吗？

* * *

你好泽利科，

我尝试了您的建议，但收到以下错误消息：

```
C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.26.0/lib/selenium/webdriver/common/driver_extensions/takes_screenshot.rb:18:in `initialize': Invalid argument - 2013-01-03 11:02:21 +1100.png (Errno::EINVAL)
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.26.0/lib/selenium/webdriver/common/driver_extensio
ns/takes_screenshot.rb:18:in `open'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.26.0/lib/selenium/webdriver/common/driver_extensio
ns/takes_screenshot.rb:18:in `save_screenshot' 
```

我认为问题是日期和时间戳的格式。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-02T09:16:39.227

试试这个：

```
browser.screenshot.save ("#{@@filename}.png") 
```

如果要将文件保存在特定位置，请尝试以下操作：

```
browser.screenshot.save ("/path/to/file/#{@@filename}.png") 
```

当然，替换`/path/to/file/`为实际路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T02:34:01.333

谢谢您的帮助。

我使用以下来格式化日期和时间部分，现在它正在将屏幕截图保存在所需的位置。

文件名 = DateTime.now.strftime("%d%b%Y%H%M%S")

browser.screenshot.save ("Test/#{filename}.png")

问候

# php - Facebook JSON 在通过浏览器和脚本/PHP 访问时返回不同的数据

> ID：14116938
> 
> 赞同：0
> 
> 时间：2013-01-02T04:46:04.913
> 
> 标签：php, facebook

我有一个通过以下 URL 定位的 Facebook 提要： [https](https://www.facebook.com/feeds/page.php?id=131872766880896&format=json) ://www.facebook.com/feeds/page.php?id=131872766880896&format=json 。

它采用 URL 指定的 JSON 格式。

当我在浏览器上输入这个 URL 时，我得到一个有效的 JSON。但是，如果我要从 PHP 页面请求此 URL，或者使用 PHP 脚本（如 file_get_contents 然后 json_decode，或 jQuery getJSON），我得到的是 HTML 响应，这实际上是一个 Facebook 页面，要求我升级我的浏览器。通过将上述 URL 输入 JSON Lint 验证器，可以看到此响应的 HTML 代码。

我必须使用这种方法，因为我正在为其构建提要的站点没有与之关联的 App ID，因此除非使用个人 Facebook 帐户，否则我无法获得访问令牌，这也不是一个可行的选择由于 online_access 的弃用，这意味着我必须每 60 天手动重新生成一个长寿命的访问令牌。还是有另一种解决方法？我只需要在页面的 Feed 上显示最后一个条目，所以我想在 $data['entries'][0]['content'] 获取内容，其中 $data 是 JSON 对象。

此处的帖子[Loading facebook wall feed JSON issues](https://stackoverflow.com/questions/10929308/loading-facebook-wall-feed-json-issues)显示用户最终通过 PHP 加载它，然后通过 AJAX 填充他的页面。但也如上所述，通过 PHP 加载它会为我提供 HTML 代码块，该代码块是通过将我想要使用的 Facebook 提要 URL 输入到 JSON Lint 中生成的。这是我的 PHP 代码的样子：

```
<?php
$feed = file_get_contents('https://www.facebook.com/feeds/page.php?id=131872766880896&format=json');
echo $feed;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T10:48:57.750

Facebook 正在检查用户代理 HTTP 标头——因此，如果您想以这种方式访问​​受“保护”的资源，您必须在您的请求中发送一个看起来像当前“真实”浏览器的用户代理标头。

# javascript - Meteor.JS 从 Google API 问题中检索

> ID：14116942
> 
> 赞同：1
> 
> 时间：2013-01-02T04:46:56.657
> 
> 标签：javascript, api, youtube, meteor

哇哦，我还有更多流星问题！我要做的是从 YouTube Data API v3 中检索用户的频道“片段”。这包含一个对象，其中包含一个名为的数组，`items`其中包含我在应用程序中需要的所有数据。我当前的客户端代码如下：

```
if (Meteor.user() && !Meteor.loggingIn()) {
    Meteor.http.get("https://www.googleapis.com/youtube/v3/channels?part=snippet&mine=true&access_token=" + Meteor.user().services.google.accessToken, function (err, result) {
        console.log(result.statusCode, result.data);
        var retdata =  result.data;
        return retdata.items;
    });
} 
```

在客户端控制台中输出：

```
200 
Object {kind: "youtube#channelListResponse", etag: ""eTr3dHIt5_K9qdGtRKL-5XdpiQI/4Lt-RSCeBy7D3VwX3c_uic6-LIM"", pageInfo: Object, items: Array[1]} 
```

但是该函数`undefined`由于某种原因返回，这意味着我不能使用它的返回值。

为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T12:34:48.920

这是因为您将返回数据的方法作为第二个参数传递`http.get`给异步回调，一旦数据从您调用的地址返回，该回调就会被调用。所以：

```
Meteor.http.get(url, callback); 
```

不返回任何东西。相反，与其在回调中返回一个对象，不如将其设置在一个范围之外的东西上`get`：

```
if (Meteor.user() && !Meteor.loggingIn()) {
    var url = "https://www.googleapis.com/youtube/v3/channels";
    var params = {
      access_token: Meteor.user().services.google.accessToken,
      part: "snippet",
      mine: "true"
    };
    Meteor.http.get(url, {params: params}, function (err, result) {
        console.log(result.statusCode, result.data);
        var retdata =  result.data;
        Session.set("myItems", retdata.items);
    });
} 
```

确保您还`services.google.accessToken`手动发布了该字段，否则 Meteor.user() 将无法使用该字段。并确保您在模板中或在某个反应性地方执行所有这些操作，如果 Meteor.user() 尚不可用，Meteor 将重新运行代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T02:39:35.393

经过与 Meteor 的 IRC 频道上的人的大量工作和讨论，我们终于得出了这个[要点](https://gist.github.com/4459262)中的工作结论。

# javascript - 无需许多中间检查即可获得嵌套的 JSON/对象值？

> ID：14116943
> 
> 赞同：6
> 
> 时间：2013-01-02T04:47:09.883
> 
> 标签：javascript, json, undefined

假设我有一个带有混合对象和数组的复杂 json 对象 x。是否有一种简单或通用的方法来检查该对象中的变量是否为空或未定义，例如：

```
if(x.a.b[0].c.d[2].e!=null) .... 
```

而不是通常检查所有父字段

```
if(x.a!=null 
&& x.a.b!=null
&& x.a.b[0]!=null
&& x.a.b[0].c!=null
&& x.a.b[0].c.d!=null
&& x.a.b[0].c.d[2]!=null
&& x.a.b[0].c.d[2].e!=null) .... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T04:50:36.510

```
try {
   if(x.a.b[0].c.d[2].e!=null)
    //....
} catch (e) {
    // What you want 
} 
```

**[现场演示](http://jsfiddle.net/QbGcr/1/)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T05:04:55.257

这是一个不需要异常处理的变体..会更快吗？我对此表示怀疑。会不会更干净？好吧，这取决于个人喜好.. 当然，这只是一个小的演示原型，我相信已经存在更好的“JSON 查询”库。

```
// returns the parent object for the given property
// or undefined if there is no such object
function resolveParent (obj, path) {
    var parts = path.split(/[.]/g);
    var parent;
    for (var i = 0; i < parts.length && obj; i++) {
        var p = parts[i];
        if (p in obj) {
            parent = obj;
            obj = obj[p];
        } else {
            return undefined;
        }
    }
    return parent;
}

// omit initial parent/object in path, but include property
// and changing from [] to .
var o = resolveParent(x, "a.b.0.c.d.2.e");
if (o) {
    // note duplication of property as above method finds the
    // parent, should it exist, so still access the property
    // as normal
    alert(o.e); 
} 
```

# iphone - 链接器错误 OBJC_CLASS_$_AVAudioPlayer"

> ID：14116945
> 
> 赞同：2
> 
> 时间：2013-01-02T04:47:31.677
> 
> 标签：iphone, xcode4.2

大家好，

```
[Error: objc-class-ref in ViewController.o
    ld: symbol(s) not found for architecture i386
    clang: error: linker command failed with exit code 1 (use -v to see invocation)] 

I am running an application which will produce sound after button is clicked , 
```

看到错误后，我已经包含了所有音频框架

```
 [ objc-class-ref in ViewController.o
        ld: symbol(s) not found for architecture i386
        clang: error: linker command failed with exit code 1 (use -v to see invocation)
        ] 
```

从堆栈溢出但它仍然对我不起作用..请查看下面的代码，我已经包含了我的 .h 和 .m 文件并建议我一些解决方案

这可能是一个链接器错误，但我已经包含了构建阶段的框架并包含了#import 框架..如果我遗漏了什么，请查看我的下面的代码，请告诉我......我是 iPhone 开发的自学初学者..

```
 //  ViewController.h

        //  Audioplaying
        //
        //  Created by Vaibhav on 12/31/12.
        //  Copyright (c) 2012 __MyCompanyName__. All rights reserved.
        //

        #import <UIKit/UIKit.h>
        #import <AVFoundation/AVAudioPlayer.h>
         #import <AudioToolbox/AudioToolbox.h>

        @interface ViewController : UIViewController <AVAudioPlayerDelegate >

        {
            AVAudioPlayer *player;
            UIButton *playButton;
        }

        @property (nonatomic, retain) AVAudioPlayer *player;
        @property (nonatomic, retain) IBOutlet UIButton *playButton;

        - (IBAction) play;

        @end

    //
    //  ViewController.m
    // 
    #import "ViewController.h"
    #import <AVFoundation/AVAudioPlayer.h>

    @implementation ViewController

    @synthesize player, playButton;

    - (void)viewDidLoad {

        // grab the path to the caf file
        NSString *soundFilePath =
        [[NSBundle mainBundle] pathForResource: @"blip"
                                        ofType: @"caf"];

        NSURL *fileURL = [[NSURL alloc] initFileURLWithPath: soundFilePath];

        // create a new AVAudioPlayer initialized with the URL to the file
        AVAudioPlayer *newPlayer =
        [[AVAudioPlayer alloc] initWithContentsOfURL:fileURL error:nil];

        // set our ivar equal to the new player
        self.player = newPlayer;

        // preloads buffers, gets ready to play
        [player prepareToPlay];
        // set delegate so we can get called back when the sound has finished playing
        [player setDelegate: self];

        [super viewDidLoad];
    }

    // delegate method
    - (void) audioPlayerDidFinishPlaying: (AVAudioPlayer *) player
                            successfully: (BOOL) completed {
        if (completed == YES) {
            self.playButton.enabled = YES;
        }
    }

    // 
    - (IBAction) play {

        self.playButton.enabled = NO;
        [self.player play];

    }
    - (void)viewDidUnload
    {
        [super viewDidUnload];
        // Release any retained subviews of the main view.
        // e.g. self.myOutlet = nil;
    }

    - (void)viewWillAppear:(BOOL)animated
    {
        [super viewWillAppear:animated];
    }

    - (void)viewDidAppear:(BOOL)animated
    {
        [super viewDidAppear:animated];
    }

    - (void)viewWillDisappear:(BOOL)animated
    {
        [super viewWillDisappear:animated];
    }

    - (void)viewDidDisappear:(BOOL)animated
    {
        [super viewDidDisappear:animated];
    }

    - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
    {
        // Return YES for supported orientations
        return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
    }

    @end 
```

错误 ：

```
Build target Audioplaying

Ld /Users/vaibhav/Library/Developer/Xcode/DerivedData/Audioplaying-eaaytfuwbstsyffgakkifipcygeu/Build/Products/Debug-iphonesimulator/Audioplaying.app/Audioplaying normal i386
    cd "/Users/vaibhav/Iphone projects/Audioplaying"
    setenv MACOSX_DEPLOYMENT_TARGET 10.6
    setenv PATH "/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/clang -arch i386 -isysroot /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk -L/Users/vaibhav/Library/Developer/Xcode/DerivedData/Audioplaying-eaaytfuwbstsyffgakkifipcygeu/Build/Products/Debug-iphonesimulator -F/Users/vaibhav/Library/Developer/Xcode/DerivedData/Audioplaying-eaaytfuwbstsyffgakkifipcygeu/Build/Products/Debug-iphonesimulator "-F/Users/vaibhav/Iphone projects/Audioplaying" -filelist /Users/vaibhav/Library/Developer/Xcode/DerivedData/Audioplaying-eaaytfuwbstsyffgakkifipcygeu/Build/Intermediates/Audioplaying.build/Debug-iphonesimulator/Audioplaying.build/Objects-normal/i386/Audioplaying.LinkFileList -mmacosx-version-min=10.6 -Xlinker -objc_abi_version -Xlinker 2 -fobjc-arc -Xlinker -no_implicit_dylibs -D__IPHONE_OS_VERSION_MIN_REQUIRED=50000 -framework AVFoundation -framework UIKit -framework Foundation -framework CoreGraphics -o /Users/vaibhav/Library/Developer/Xcode/DerivedData/Audioplaying-eaaytfuwbstsyffgakkifipcygeu/Build/Products/Debug-iphonesimulator/Audioplaying.app/Audioplaying

ld: warning: ignoring file /Users/vaibhav/Iphone projects/Audioplaying/AVFoundation.framework/AVFoundation, file was built for unsupported file format which is not the architecture being linked (i386)
Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_AVAudioPlayer", referenced from:
      objc-class-ref in ViewController.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T05:21:58.087

只需添加`Foundation.framework`和`AVFoundation.framework`框架，`Build Phases=>Link Binaries With Libraries`然后尝试一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T06:35:21.540

您以某种方式创建了自己的损坏框架`AVFoundation.framework`，并在您的项目中命名。这个损坏的框架的存在阻止了链接器使用系统的`AVFoundation`框架。

您需要删除`/Users/vaibhav/Iphone projects/Audioplaying/AVFoundation.framework`其中的所有内容。

# java - 发现以元素“jpa:repository”开头的无效内容

> ID：14116946
> 
> 赞同：2
> 
> 时间：2013-01-02T04:48:12.023
> 
> 标签：java, spring, spring-data-jpa

我在 spring-data-jpa 中使用它：

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
xmlns:jdbc="http://www.springframework.org/schema/jdbc" xmlns:jee="http://www.springframework.org/schema/jee"
xmlns:tx="http://www.springframework.org/schema/tx" xmlns:jpa="http://www.springframework.org/schema/data/jpa"
xsi:schemaLocation="
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd
    http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.2.xsd
    http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.2.xsd
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.2.xsd
    http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa.xsd"
default-lazy-init="true">

<jpa:repositories base-package="org.kb" repository-impl-postfix="Impl">
<jpa:repository id="articleDao" repository-impl-ref="articleDaoPlus" /> 
</jpa:repositories> 
```

但我得到了例外：

嵌套异常是 org.xml.sax.SAXParseException：cvc-complex-type.2.4.a：发现以元素“jpa:repository”开头的无效内容。'{"http://www.springframework.org/schema/data/repository":include-filter, "http://www.springframework.org/schema/data/repository":exclude-filter}' 之一是预期的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T11:14:31.443

简而言之，如果您替换`http://www.springframework.org/schema/data/jpa/spring-jpa.xsd`为`http://www.springframework.org/schema/data/jpa/spring-jpa-1.1.xsd`，它将解决问题。但我不确定你是否愿意这样做。

原因？标签`<jpa:repository id="articleDao" repository-impl-ref="articleDaoPlus" />`在新的 spring-data-jpa 版本中被删除。

看看这两个xsds ie `http://www.springframework.org/schema/data/jpa/spring-jpa.xsd`和`http://www.springframework.org/schema/data/jpa/spring-jpa-1.1.xsd`

# php - 从 PHP 中的数组中的 MySQL 表中的每一行返回特定列

> ID：14116947
> 
> 赞同：0
> 
> 时间：2013-01-02T04:48:17.223
> 
> 标签：php, mysql

所以假设这是我在 MySQL 中的数据库的层次结构。

```
Database: Example
  Table: Test
    Row 1
      Column 1 ("one"): Whatever
      Column 2 ("two"): Something
      Column 3 ("three"): Test
    Row 2
      Column 1  ("one"): Blah
      Column 2  ("two"): Testing
      Column 3  ("three"): Yup 
```

如何返回包含`one`列值的数组？

数组看起来像这样：

```
Array ( [0] => Whatever [1] => Blah ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T04:51:12.140

我认为它很简单。

```
select Column 1 From tablename; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T04:57:29.273

可能是空格的问题。如果列名中有空格，请使用反引号，例如

```
 select `Column 1` from tablename; 
```

我不确定您的示例是否描述了您的实际问题:(

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T05:01:05.817

```
$query = "SELECT column1 FROM test";
$result = mysql_query($query);
$numRows = mysql_num_rows($result); // should be 2

while($row = mysql_fetch_array($result)) {
  $row[0]; // data from column
} 
```

# android - 如何在android中以编程方式关闭3G数据连接？

> ID：14116948
> 
> 赞同：1
> 
> 时间：2013-01-02T04:48:20.983
> 
> 标签：android, dataservice, 3g-network

我想分别启用/禁用 3G 和其他数据连接。是否可以单独访问 3G？这意味着如果用户选择选项 3G，则仅启用/禁用 3G 数据连接。如果用户选择选项数据服务，启用/禁用除 3G 以外的数据连接。可以吗？**我尝试了**以下方法

`enableDataConnectivity();`
**和**
`disableDataConnectivity();`
 **`TelephonyManager`**

 **但我认为这些方法会完全关闭/打开所有数据服务。我想单独访问 3G。

这个怎么做？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-02T04:59:05.250

此代码示例应该适用于运行姜饼及更高版本的 android 手机：

```
private void setMobileDataEnabled(Context context, boolean enabled) 
{
   final ConnectivityManager conman = (ConnectivityManager)    
   final ConnectivityManager conman = (ConnectivityManager)
   context.getSystemService(Context.CONNECTIVITY_SERVICE);
   final Class conmanClass = Class.forName(conman.getClass().getName());
   final Field iConnectivityManagerField = conmanClass.getDeclaredField("mService");
   iConnectivityManagerField.setAccessible(true);
   final Object iConnectivityManager = iConnectivityManagerField.get(conman);
   final Class iConnectivityManagerClass =     Class.forName(iConnectivityManager.getClass().getName());
   final Method setMobileDataEnabledMethod = iConnectivityManagerClass.getDeclaredMethod("setMobileDataEnabled", Boolean.TYPE);
   setMobileDataEnabledMethod.setAccessible(true);
   setMobileDataEnabledMethod.invoke(iConnectivityManager, enabled);
} 
```

这也需要以下许可。

```
<uses-permission android:name="android.permission.CHANGE_NETWORK_STATE"/> 
```**

# c# - （带有 SQLite 的用户控件）---> 无法创建组件“UserControl1”，System.DllNotFound Excpetion，无法加载 Sqlite.interop.dll

> ID：14116949
> 
> 赞同：3
> 
> 时间：2013-01-02T04:48:41.037
> 
> 标签：c#, sqlite, dll, interop

我有一个使用 Sqlite 的用户控件。编译并添加到工具箱后，通过将其拖动到新的表单中，出现如下所述的错误消息：

“无法创建组件'UserControl1'。错误消息跟随'System.DllNotFoundException：'无法加载Dll'Sqlite.Interop.dll'：找不到指定的模块。来自HResult的异常：0x8007007E

我用谷歌搜索了这个问题，我仍然无法解决这个问题。但有趣的是，如果我通过引用在表单中对其进行硬编码并创建一个新控件，则用户控件可以正常工作。为什么拖放有这个问题？

还有一个问题：我正在使用 Nuget 安装 sqlite，有 2 个版本：32 位和 64 位：我应该添加哪个作为参考？我正在使用 VS2010 终极版 sp1。Sqlite v 1.0.83.0。将dll编译为任何cpu。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-02T07:44:46.927

如果您为 SQLite 下载了正确的二进制文件，则根据您的项目构建选项将 SQLite.Interop.dll 复制到您的 Release 或 Debug 文件夹中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-24T14:20:23.093

我认为这是一个与 SQLite 不同的问题，更具体地说，是当您尝试从工具箱中拖动用户控件时找不到 DLL。我有同样的问题。我能够通过编程方式添加用户控件`Controls.Add(myUserControl)`，它工作正常，但我无法从工具箱中拖动它。一些搜索使我找到了以下链接，其中包含 Hans Passant 的见解：

[https://social.msdn.microsoft.com/Forums/en-US/e6ba24f2-4f2d-42bd-b2f2-1e00744e0052/dllimport-throws-systemdllnotfoundexception-in-usercontrol?forum=netfxbcl](https://social.msdn.microsoft.com/Forums/en-US/e6ba24f2-4f2d-42bd-b2f2-1e00744e0052/dllimport-throws-systemdllnotfoundexception-in-usercontrol?forum=netfxbcl)

要点是设计器不知道查找 DLL 的路径。作为测试，我在`DllImport`ie中对路径进行了硬编码`[DllImport(*full path here*)]`，并且能够成功地将用户控件从工具箱拖到设计器中。（确保在尝试添加用户控件之前添加完整路径后进行构建！）

在没有任何重大测试的情况下，我似乎能够然后删除完全合格的路径，并且设计师似乎记得在哪里看。我可以从表单中删除用户控件并再次添加它而不会出现问题。但是，一旦我关闭 Visual Studio 并重新打开它，从工具箱中拖放用户控件再次失败。希望这些信息可以帮助某人了解正在发生的事情和/或引导他们朝着正确的方向寻求解决方案。

# java - 如何将所有属性从一个 JavaBean 复制到另一个具有不同属性名称的 JavaBean？

> ID：14116952
> 
> 赞同：1
> 
> 时间：2013-01-02T04:49:16.717
> 
> 标签：java, javabeans

我想将大量 bean 的属性从一个 JavaBean 复制到另一个。我查看了 Apache Commons [BeanUtils](http://commons.apache.org/beanutils/api/org/apache/commons/beanutils/BeanUtils.html)。但问题是它希望两个 bean 中的属性名称相同。没有办法提供映射。

例如，在我的 bean 1 中，属性可能是*firstName*，而在 bean 2 中，它可能是*name*。

因此，我想要某种方式来透明地复制这些属性，并在可能的情况下在属性名称之间的某处提供映射。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T05:02:17.863

尝试使用[推土机](http://dozer.sourceforge.net/)。它支持您期望的映射。它们支持通过 XML、注释等进行映射。

[在这里](http://dozer.sourceforge.net/documentation/usage.html)查看简单的例子。

# html - .css 属性将表单按钮锚定在表单内的表格之外

> ID：14116953
> 
> 赞同：1
> 
> 时间：2013-01-02T04:49:20.493
> 
> 标签：html, css

我正在尝试使用浮动或其他方式让表单按钮出现在下表之外：

```
<form action="./deleteentry.php" method="post">
    <?php
        foreach ($dbr as $var) {
    ?>
            <tr>
                <td><?php echo $i; ?></td>
                <td><?php echo $var["title"]; ?></td>
                <td><?php echo $var["year"]; ?></td>
                <td><?php echo $var["author"]; ?></td>
                <td><?php echo $var["condition"]; ?></td>
                <td><?php echo $var["genre"]; ?></td>
                <td><?php echo $var["publisher"]; ?></td>
                <td><input type="radio" name="order" value="<?php echo $i; ?>"/></td>
            </tr>
    <?php
        $i++;
        }
    ?>
<br /><br />
<div class="delshift">
    <input type="submit" value="Confirm" />
</div>
</form> 
```

最终产品应如下图所示。我的表单/div 应该有哪些 .css 属性？目前我的 div 有：

```
.delshift{
    float: right;
    overflow: hidden;
    clear: both;
} 
```

![我的问题的视觉表示](../Images/bafcc9421db86fcca9ae1edb32f86cbc.png) 对不起，大图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T04:57:36.657

尝试这个：-

```
<form action="./deleteentry.php" method="post">
<div style="width:100%;">    
<?php
        foreach ($dbr as $var) {
    ?>
            <tr>
                <td><?php echo $i; ?></td>
                <td><?php echo $var["title"]; ?></td>
                <td><?php echo $var["year"]; ?></td>
                <td><?php echo $var["author"]; ?></td>
                <td><?php echo $var["condition"]; ?></td>
                <td><?php echo $var["genre"]; ?></td>
                <td><?php echo $var["publisher"]; ?></td>
                <td><input type="radio" name="order" value="<?php echo $i; ?>"/></td>
            </tr>
    <?php
        $i++;
        }
    ?>
<br /><br />
</div>
<div class="delshift">
    <input type="submit" value="Confirm" />
</div>
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T04:58:29.400

您在上面发布的代码不是有效的 html（没有包含 tr 标签的表格元素）...但是，如果您将 tr 包装在表格中并将表格向左浮动，然后还将包含提交按钮的 div 浮动向左，你应该能够让它工作。

基本结构将是：

```
<form>
    <table style="float:left;">
        <?php code ?>
    </table>
    <div style="float:left;">
        <input type="submit" />
    </div>
</form> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T05:04:15.917

对 div 使用 float left 它的包含表

```
<div style="float:left">
<form action="./deleteentry.php" method="post">
   <table>
            <tr>
                <td>1</td>
                <td>2</td>
                <td>3</td>
                <td>3</td>
                <td>4</td>

            </tr>
   </table>
<br /><br />
</div>
<div>
    <input type="submit" value="Confirm" />
</div>
</form> 
```

# delphi - 在 Delphi 中实现 PBKDF2？

> ID：14116954
> 
> 赞同：0
> 
> 时间：2013-01-02T04:49:24.313
> 
> 标签：delphi, delphi-xe3, pbkdf2

如何在 Delphi 中使用此算法？德尔福有这样的课程吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-22T00:25:35.800

我使用@alzaimar 提供的链接和维基百科上的一些阅读实现了该算法。当然欢迎提出改进建议！

```
uses
  System.SysUtils, System.Math, IdHMAC, IdHMACSHA1;
type
  TIdHMACClass = class of TIdHMAC;

// Modeled after http://www.di-mgt.com.au/cryptoKDFs.html#PKCS5
function PBKDF2(const P: TBytes; const S: TBytes; const C: Integer;
  const kLen: Integer; PRFC: TIdHMACClass = nil): TBytes;
var
  PRF: TIdHMAC;
  D: Integer;
  I: Int32;
  F: TBytes;
  U: TBytes;
  J: Integer;
  T: TBytes;

  function _ConcatenateBytes(const _B1: TBytes; const _B2: TBytes): TBytes; inline;
  begin
    SetLength(Result, Length(_B1) + Length(_B2));
    if Length(_B1) > 0 then
      Move(_B1[Low(_B1)], Result[Low(Result)], Length(_B1));
    if Length(_B2) > 0 then
      Move(_B2[Low(_B2)], Result[Low(Result)+Length(_B1)], Length(_B2));
  end;

  function _INT_32_BE(const _I: Int32): TBytes; inline;
  begin
    Result := TBytes.Create(_I shr 24, _I shr 16, _I shr 8, _I);
  end;

  procedure _XorBytes(var _B1: TBytes; const _B2: TBytes); inline;
  var
    _I: Integer;
  begin
    for _I := Low(_B1) to High(_B1) do
      _B1[_I] := _B1[_I] xor _B2[_I];
  end;

begin
  if not Assigned(PRFC) then
    PRFC := TIdHMACSHA1;

  PRF := PRFC.Create;
  try
    D := Ceil(kLen / PRF.HashSize);
    PRF.Key := P;
    for I := 1 to D do
    begin
      F := PRF.HashValue(_ConcatenateBytes(S, _INT_32_BE(I)));
      U := Copy(F);
      for J := 2 to C do
      begin
        U := PRF.HashValue(U);
        _XorBytes(F, U);
      end;
      T := _ConcatenateBytes(T, F);
    end;
    Result := Copy(T, Low(T), kLen);
  finally
    PRF.Free;
  end;
end;

procedure TestPBKDF2SHA1HMAC;
var
  P: TBytes;
  S: TBytes;
  K: TBytes;

  function _BytesToHexString(const _B: TBytes): string;
  var
    _I: Integer;
  begin
    for _I := Low(_B) to High(_B) do
      Result := Result + IntToHex(_B[_I], 2);
  end;

begin
  P := TBytes.Create($70, $61, $73, $73, $77, $6F, $72, $64);
  S := TBytes.Create($78, $57, $8E, $5A, $5D, $63, $CB, $06);

  K := PBKDF2(P, S, 2048, 24);
  Assert('BFDE6BE94DF7E11DD409BCE20A0255EC327CB936FFE93643' = _BytesToHexString(K));

  P := TBytes.Create($70, $61, $73, $73, $77, $6F, $72, $64);
  S := TBytes.Create($73, $61, $6C, $74);

  K := PBKDF2(P, S, 1, 20);
  Assert('0C60C80F961F0E71F3A9B524AF6012062FE037A6' = _BytesToHexString(K));
  K := PBKDF2(P, S, 2, 20);
  Assert('EA6C014DC72D6F8CCD1ED92ACE1D41F0D8DE8957' = _BytesToHexString(K));
  K := PBKDF2(P, S, 4096, 20);
  Assert('4B007901B765489ABEAD49D926F721D065A429C1' = _BytesToHexString(K));
  K := PBKDF2(P, S, 16777216, 20);
  Assert('EEFE3D61CD4DA4E4E9945B3D6BA2158C2634E984' = _BytesToHexString(K));

  P := TBytes.Create($70, $61, $73, $73, $77, $6F, $72, $64, $50, $41,
    $53, $53, $57, $4F, $52, $44, $70, $61, $73, $73, $77, $6F, $72, $64);
  S := TBytes.Create($73, $61, $6C, $74, $53, $41, $4C, $54, $73, $61, $6C,
    $74, $53, $41, $4C, $54, $73, $61, $6C, $74, $53, $41, $4C, $54, $73, $61,
    $6C, $74, $53, $41, $4C, $54, $73, $61, $6C, $74);

  K := PBKDF2(P, S, 4096, 25);
  Assert('3D2EEC4FE41C849B80C8D83662C0E44A8B291A964CF2F07038' = _BytesToHexString(K));
end; 
```

做任何你喜欢的事，但使用它需要你自担风险。

# ios - 在通过数据源创建的 UITextField 中显示占位符文本

> ID：14116955
> 
> 赞同：1
> 
> 时间：2013-01-02T04:49:27.707
> 
> 标签：ios, uitableview, uitextfield, uitextfielddelegate

**背景：** 我有一个 UITableView，它有三行，其中包含从 TableDataSource 填充的自定义 UITextField。这些文本字段中的默认文本也是从数据源填充的（数据库字段的默认值）。

当用户选择/单击特定的 UITextField 时，我能够自动清除 UITextField。

**问题：** 如果用户选择了一个特定的 UITextField，然后移动到另一个 UITextField 而不编辑文本，那么我希望原始的默认文本重新出现。我尝试在委托的“didEndEditing”方法中将 UITextField 设置为 nil，但没有成功。

有人可以建议他们是否知道实现此目的的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T05:10:27.650

您可以使用 的`placeholder`属性简单地做到这一点`UITextField`，但是文本会以一种有点模糊的方式出现，如果您想显示以前的值，那么您可以使用以下解决方案：

您可以使用`textFieldDidEndEditing`委托方法来完成。

```
 - (void)textFieldDidEndEditing:(UITextField *)textField
{
   if(textField.text.lenght == 0)
   {
      textField.text = yourPreviousText;
   }
} 
```

而在`textFieldShouldBeginEditing`

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
   yourPreviousText = textField.text;
} 
```

yourPreviousText 是`NSString`在类范围内声明的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T05:08:10.937

**解决方案**：我正在使用 UITextfield.text 属性设置占位符文本。我应该使用 UITextField.placeholder 属性。自动设置此属性可确保占位符文本消失并根据用户执行的编辑重新出现。在试图找出用户输入/未输入的内容方面，省去了很多工作。

# json - WCF Rest POST 方法正在获取 null json 字符串

> ID：14116960
> 
> 赞同：0
> 
> 时间：2013-01-02T04:50:30.320
> 
> 标签：json, wcf, rest

WCF Rest POST 总是得到空字符串。我花了一个多星期的时间去探索，但到目前为止还没有运气......

我的服务代码：

```
[ServiceContract]
public interface ISaveSurvey
{   
    [WebInvoke(Method = "POST",
           ResponseFormat = WebMessageFormat.Json,
           RequestFormat = WebMessageFormat.Json,               
           BodyStyle = WebMessageBodyStyle.Wrapped,
           UriTemplate = "/SSS")]        
    bool InsertSiteSurveyInfo(string jsonString);
} 
```

网络配置：

```
 <compilation debug="false" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <services>
      <service name="Honeywell.HBS.SiteSurvey.SaveSurvey" behaviorConfiguration="SaveSurvey">
        <endpoint address="" binding="webHttpBinding" contract="Honeywell.HBS.SiteSurvey.ISaveSurvey" behaviorConfiguration="wcfRestBehavior"/>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="SaveSurvey">
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
       <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="wcfRestBehavior">
          <webHttp />
        </behavior>
      </endpointBehaviors>
    </behaviors>
      <bindings>
          <!-- Customizations for REST service -->
          <webHttpBinding>
              <binding name="ApiExportBinding" maxReceivedMessageSize="10485760"
                              maxBufferPoolSize="10485760" maxBufferSize="10485760">
                  <readerQuotas maxDepth="32" maxStringContentLength="10485760"
                                  maxArrayLength="10485760" maxBytesPerRead="10485760" />
                  <security mode="None" />
              </binding>
          </webHttpBinding>
      </bindings>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true"/>
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer> 
```

客户代码：

```
<script type="text/javascript" language="javascript">
    function testRest() {

        $.ajax({
            type: "POST",
            dataType: "json",
            url: "http://ie22ltjpsd4bs/SSTest/SaveSurvey.svc/SSS",
            contentType: "application/json",
            data: "{\"siteInformation\":{\"siteName\":\"Malar\",\"siteNumber\":\"123344555\",\"siteContactPerson\":\"test\",\"siteAddress\":\"test\",\"siteCity\":\"test\",\"sitePostalZipCode\":\"test\",\"siteTelephone\":1234576788,\"siteContractNumber\":\"asdfasdf\",\"siteHoneywellBranch\":\"asdfasdf\",\"siteFieldSiteLeader\":\"asdfasdf\",\"siteTeamLead\":\"asdfasdf\",\"siteTechnician\":\"asdfasdf\",\"equipments\":[{\"equipmentID\":\"BRANCH TOOL INVENTORY\",\"equipSiteContactTelephone\":12345678,\"equipDescription\":\"asdfasdf\",\"equipLocation\":\"asdfasdf\",\"equipSupervisionOrFrontEnd\":\"asdfasdf\",\"equipNumberOfStations\":12,\"equipMakeOrTypePC\":\"asdfasdf\",\"equipWindowsVersion\":\"asdfasdf\",\"equipManufacturer\":\"A C MOTOR\",\"equipManufacturerDateOrAge\":\"1979-12-31T18:30:00.000Z\",\"equipProductNameOrVersion\":\"asdfasdf\",\"equipGraphicSoftwareIncl\":\"No\",\"equipExistingSaveBackup\":\"Yes\",\"equipBackupSaveFormat\":\"\",\"equipLocalAccess\":\"asdfasdf\",\"equipPassword\":\"asdfasdfasdf\",\"equipRemoteAccess\":\"Modem\",\"equipAccessInfo\":\"asdfasdf\",\"equipSystemArchitecture\":\"Yes\",\"equipArchivedInAdept\":\"Yes\",\"equipOtherInformation\":\"asdfasdf\",\"controllersInformation\":[{\"controllerName\":\"asdfasdf\",\"controllerQuantity\":\"121\",\"controllerManufacturer\":\"asdfasdf\",\"controllerSoftwareProgram\":\"Yes\",\"controllerProductNameOrVersion\":\"asdfasdf\",\"controllerTypeOfProgram\":\"Interpreted\",\"controllerExistingSaveBackup\":\"Yes\",\"controllerBackUpSaveFormat\":\"\",\"controllerLocalAccess\":\"asdf\",\"controllerPassword\":\"asdf\",\"controllerRemoteAccess\":\"Modem\",\"controllerAccessInfo\":\"asdf\",\"controllerControlDrawings\":\"Yes\",\"controllerOperatingSequence\":\"Yes\",\"controllerOtherInformation\":\"asdfasddf\"}]}]}}",
            success: function(result)
            {
                alert("Sucess");
            }, 
            failure: function(result)
            {
                alert("Failure");
            }
        });
    }
    function (result) {     
    }
</script> 
```

按钮点击：

```
<asp:Button ID="Button1" runat="server" onclick="Button1_Click" OnClientClick="testRest()" Text="Button" /> 
```

我附加了 w3wp 进程并尝试调试服务，并且 json 字符串始终为空。但是我使用提琴手来拦截请求 json 字符串正在发布但服务实现代码总是为空..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T11:06:17.270

这是有计划的行为。您的服务不知道如何映射您传递的数据。如果您要将 json 内容作为字符串传递，您应该像这样包装它：

```
data: JSON.stringify({ jsonString: "your_data" }) 
```

# php - 自使用wordpress的日期字符串以来的成员？

> ID：14116966
> 
> 赞同：2
> 
> 时间：2013-01-02T04:51:33.237
> 
> 标签：php, wordpress, wordpress-theming

我正在为我正在处理的 wordpress 网站创建作者页面，并且我想显示自日期以来的成员。是否有一个字符串可以根据正在显示的作者获取用户数据并在屏幕上回显？

我做了一些研究，但大多数关于这个主题的文章只回显当前登录用户的日期。我希望即使只是查看帖子的人也能显示日期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T05:26:15.310

可以使用这样的东西：

```
$AuthorData = get_user_by( 'slug', 'user_slug' );
$Date = $AuthorData->user_registered;
echo $Date ."<br /><br />"; 
```

也可以使用 `id`，`email`或者`login`代替`slug`

# codeigniter - 使用 codeigniter 中的连接从 3 个表中获取不同的记录

> ID：14116967
> 
> 赞同：1
> 
> 时间：2013-01-02T04:51:47.290
> 
> 标签：codeigniter, join, left-join, inner-join, outer-join

我有三个表案例，客户，出席

在案件

**id start_date end_date client_id 状态**

1 2012-12-30 2013-01-30 1 新开始

2 2012-12-31 2013-01-31 2 试用期

在客户

**id 姓名 dob 性别 状态**

1 汤姆 1987-01-30 马

2 杰瑞 1985-01-31 FD

出席

**id client_id 日期状态**

1 1 2013-01-30

2 1 2013-01-31

我需要这样的结果

**case_id case_start_date case_end_date client_id Name att_date atte_status**

1 2012-12-30 2013-01-30 1 汤姆 2013-01-30,2013-01-31 A,P

这可能吗？我是一个自学者，我对加入查询没有好主意，请任何人帮助我....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T05:49:15.683

尝试这个..

```
$this->db->select('ca.*,ci.Name,a.date,a.status');
$this->db->from('cases'.' ca');
$this->db->join('clients'.' ci','ca.client_id=ci.id','left');
$this->db->join('attendance'.' a','a.client_id=ci.id','left');
return $this->db->get(); 
```

如果您想了解有关加入和活动记录的更多信息，请阅读用户[指南...](http://ellislab.com/codeigniter/user-guide/database/active_record.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T06:17:00.530

这是一个非常简单的示例，可让您开始使用所有 Construcor Code Construct `$joins`as array 的任意数量的连接常见乐趣：

```
$joins = array(
    array(
        'table' => 'table2',
        'condition' => 'table2.id = table1.id',
        'jointype' => 'LEFT'
    ),
); 
```

将连接作为数组处理的示例函数：

```
public function get_joins($table, $columns, $joins)
{
    $this->db->select($columns)->from($table);
    if (is_array($joins) && count($joins) > 0)
    {
        foreach($joins as $k => $v)
        {
            $this->db->join($v['table'], $v['condition'], $v['jointype']);
        }
    }
    return $this->db->get()->result_array();
} 
```

# c++ - 错误 C2143：语法错误：缺少“；” 在 Visual C++ 中的“*”之前

> ID：14116968
> 
> 赞同：-2
> 
> 时间：2013-01-02T04:51:58.770
> 
> 标签：c++, visual-c++

我是 C++ 新手，我用 MS Visual C++ 创建了一个单文档界面应用程序。当我编译它时，在名为 Day10 SDIDOC.h 的头文件中出现了一些错误，如下所示

```
error C2143: syntax error : missing ';' before '*'
error C2501: 'CLine' : missing storage-class or type specifiers
error C2501: 'GetLine' : missing storage-class or type specifiers
error C2143: syntax error : missing ';' before '*'
error C2501: 'CLine' : missing storage-class or type specifiers
error C2501: 'AddLine' : missing storage-class or type specifiers 
```

我的文件是

**第 10 天 SDIDOC.h**

```
public:
CLine * GetLine(int nIndex);
int GetLineCount();
CLine * AddLine(CPoint ptFrom,CPoint ptTo);
CObArray m_oaLines;
virtual ~CDay10SDIDoc();
#ifdef _DEBUG
virtual void AssertValid() const;
virtual void Dump(CDumpContext& dc) const;
#endif 
```

这些 GetLine() 和 AddLine() 方法在 Day10 SDIDOC.cpp 中像这样实现

**Day10 SDIDOC.cpp**

```
CLine * CDay10SDIDoc::AddLine(CPoint ptFrom, CPoint ptTo)
{
//create a new CLine Object
CLine *pLine = new CLine(ptFrom,ptTo);

try
{
   //Add the new line to the object array
m_oaLines.Add(pLine);

   //Mark the document as dirty(unsaved)
   SetModifiedFlag();
 }
//Did we run into a memory exception ?
 catch(CMemoryException* perr)
{
   //Display a message for the user,giving the bad new
   AfxMessageBox("Out of Memory",MB_ICONSTOP|MB_OK);

   //Did we create a line object?
   if(pLine)
   {
   //Delete it
   delete pLine;
    pLine = NULL;
   }
   //delete the exception object
 perr->Delete();
}
  return pLine;
  } 
```

和 GetLine 方法

```
CLine * CDay10SDIDoc::GetLine(int nIndex)
{
return (CLine*) m_oaLines[nIndex];

} 
```

我不明白有什么问题。请给我一个解决方案。谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T04:53:54.597

看来您的编译器在解析这两个函数时**看不到声明。**`CLine`因此，它不知道该名称是什么，因此会出错。

您可以通过**将标头包含**到定义中`CLine`或仅在顶部添加**前向声明**`Day10 SDIDOC.h`并将标头包含在 cpp 文件中来解决此问题。前向声明就足够了，因为您仅使用指向对象的指针`CLine`而不定义`CLine`对象或在标题中以任何方式使用其定义。

# android - ViewPager fragmentstatepageadapter getItem 没有传递正确的位置

> ID：14116977
> 
> 赞同：2
> 
> 时间：2013-01-02T04:52:54.017
> 
> 标签：android, android-viewpager

我创建了一个 viewpager 布局，一个扩展 FragmentActivity 的类和一个片段。我想要的是每个片段都在视图页面中的哪个位置传递。因此，创建第一个 viewpager 获取参数 0，第二个获取 1 等。然后，如果我以一种或另一种方式滚动，这些数字仍然是真实的计数。

问题是第一次创建片段时，它似乎被创建了两次，所以传递的位置是 0 然后 1。但是我无法向后滚动，但我确定该类被调用了两次。现在，当我向前滚动时，位置逐渐增加一。但是，如果我向后滚动，它会在仅一页后立即下降到三，然后继续从 1 下降到 0，所以现在我终于可以看到我的 0 布局了。

我有这个：

```
private class ScreenSlidePagerAdapter extends FragmentStatePagerAdapter {

    public ScreenSlidePagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        PracticeFragment fragment = new PracticeFragment();
        getAll.putInt("position", position);
        fragment.setArguments(getAll);
        return fragment;
    }

    @Override
    public int getCount() {
        return numberofQ;
    }
} 
```

它首先在进入我的片段类之前运行 getItem 两次，以便位置是 0 然后 1。然后当它到达我的片段类时，它使布局正常，我滚动浏览几个（3 或 4）新页面和每次它都会在该位置上加一，然后当我向后滚动时，它说它是零或二，然后数字仍然是零星的。最后突然，当我滚动回开始位置时，位置再次为 0，所以我的位置 0 的片段突然显示。

我不明白发生了什么，所以我想知道错误是什么？

公共类实践片段扩展片段{

```
TextView question, explain;
private ScrollView sv;
private boolean starActionBar;
private final static int version = Consts.SDKversion;

ArrayList<RadioButton> rbArray;
ArrayList<LinearLayout> lArray;
ArrayList<ImageView> ivArray;

int iRow;

SQLite info;
private String correctAnswer;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    info = new SQLite(getActivity());
    starActionBar = PreferenceManager.getDefaultSharedPreferences(
            getActivity()).getBoolean("star", true);
    setHasOptionsMenu(true);

}

@Override
public void onViewStateRestored(Bundle savedInstanceState) {
    super.onViewStateRestored(savedInstanceState);
    for (RadioButton r : rbArray) {
        if (r.isChecked()) {
            r.performClick();
        }
    }
}

@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    inflater.inflate(R.menu.activity_pm_fragment, menu);
    super.onCreateOptionsMenu(menu, inflater);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    ViewGroup rootView = (ViewGroup) inflater.inflate(
            R.layout.activity_main, container, false);

    lArray = new ArrayList<LinearLayout>();
    rbArray = new ArrayList<RadioButton>();
    ivArray = new ArrayList<ImageView>();

    lArray.add((LinearLayout) rootView.findViewById(R.id.PM_LinLay0));
    lArray.add((LinearLayout) rootView.findViewById(R.id.PM_LinLay1));
    lArray.add((LinearLayout) rootView.findViewById(R.id.PM_LinLay2));
    lArray.add((LinearLayout) rootView.findViewById(R.id.PM_LinLay3));
    lArray.add((LinearLayout) rootView.findViewById(R.id.PM_LinLay4));

    for (LinearLayout l : lArray) {
        l.setOnTouchListener(PracticeFragment.this);
        l.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                if (((ViewGroup) v).getChildAt(0).isEnabled()) {
                    ((ViewGroup) v).getChildAt(0).performClick();
                }
            }
        });
    }

    rbArray.add((RadioButton) rootView.findViewById(R.id.radio0));
    rbArray.add((RadioButton) rootView.findViewById(R.id.radio1));
    rbArray.add((RadioButton) rootView.findViewById(R.id.radio2));
    rbArray.add((RadioButton) rootView.findViewById(R.id.radio3));
    rbArray.add((RadioButton) rootView.findViewById(R.id.radio4));

    ivArray.add((ImageView) rootView.findViewById(R.id.ivradio0));
    ivArray.add((ImageView) rootView.findViewById(R.id.ivradio1));
    ivArray.add((ImageView) rootView.findViewById(R.id.ivradio2));
    ivArray.add((ImageView) rootView.findViewById(R.id.ivradio3));
    ivArray.add((ImageView) rootView.findViewById(R.id.ivradio4));

    rootView.findViewById(R.id.bNext).setVisibility(View.GONE);
    rootView.findViewById(R.id.bPrevious).setVisibility(View.GONE);
    sv = (ScrollView) rootView.findViewById(R.id.svMain);

    info.open();
    iRow = Integer.valueOf(info.getEverything(getArguments(), getArguments().getInt("position"), "next"));
    Cursor c = info.getCursor(iRow);
    ((TextView) rootView.findViewById(R.id.tvQuestion))
            .setText((getArguments().getInt("position") + 1) + ") " + c.getString(2));

    explain = (TextView) rootView.findViewById(R.id.tvExplain);
    explain.setText(c.getString(9));
    explain.setVisibility(View.GONE);
    correctAnswer = c.getString(8);

    String[] aArray = { c.getString(3), c.getString(4), c.getString(5),
            c.getString(6), c.getString(7) };

    c.close();
    info.close();

    int o = 0;
    int pos = 0;
    for (String s : aArray) {
        LinearLayout l = lArray.get(pos);
        if (s.contentEquals("BLANK")) {
            l.setVisibility(View.GONE);
        } else {
            l.setVisibility(View.VISIBLE);
            rbArray.get(pos).setText(s);
            rbArray.get(pos).setOnClickListener(null);
            if (o % 2 == 0) {
                l.setBackgroundColor(Consts.colorAlt);
            }
            o++;
        }
        pos++;
    }

    return rootView;
}

} 
```

但是，如果我注释掉除视图组之外的所有内容并返回 rootview - 仍然是同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T05:51:53.957

每次将 getAll 初始化为 getItem() 中的新对象

使您的片段类静态

并在 PracticeFragment 中创建一种方法

```
 static PracticeFragment newInstance(int num) {
        PracticeFragment f = new PracticeFragment();

        // Supply num input as an argument.
        Bundle args = new Bundle();
        args.putInt("num", num);
        f.setArguments(args);

        return f;
    } 
```

并更换适配器

```
 @Override
public Fragment getItem(int position) {
        return PracticeFragment.newInstance(position);
       } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T23:53:41.857

子类化它解决了问题！

# yii - 在 YII 模型中使用确认密码（比较规则）时无法更新数据

> ID：14116978
> 
> 赞同：0
> 
> 时间：2013-01-02T04:53:25.290
> 
> 标签：yii

在注册表单中，使用了密码字段和确认密码字段。使用此数据后无法更新。模型

```
public function rules()
    {
            // NOTE: you should only define rules for those attributes that
            return array(
                    array('name, password', 'required'),
                    array('password', 'compare', 'compareAttribute'=>'confirm_password'), 
                    array('name', 'length', 'max'=>55),
                    // The following rule is used by search().
                    // Please remove those attributes that should not be searched.
                    array('id, name', 'safe', 'on'=>'search'),
            );
    } 
```

尝试从 index.php 更新用户模型

```
`$post= User::model()->findByPk(1); $post->name='Abcdef'; $post->password='newpassword'; $post->save();` 
```

新数据没有更新？什么时候解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T07:47:26.470

更新将不起作用，因为`confirmpassword`尚未设置。如果更新时不需要密码，请包含密码[方案](http://www.yiiframework.com/doc/api/1.1/CModel#scenario-detail)，否则将始终检查它。

```
 public function rules()
     {
        // NOTE: you should only define rules for those attributes that
        return array(
                array('name', 'required'),
                array('password', 'required','on'=>'create'),
                array('password', 'compare', 'compareAttribute'=>'confirmpassword','on'=>'create'),
                array('name', 'length', 'max'=>55),
                // The following rule is used by search().
                // Please remove those attributes that should not be searched.
                array('id, name', 'safe', 'on'=>'search'),
        ); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-02T06:17:13.227

```
 public $confirmpassword;

    public function rules()
    {
            // NOTE: you should only define rules for those attributes that
            return array(
                    array('name, password, confirmpassword', 'required'),
                    array('password', 'compare', 'compareAttribute'=>'confirmpassword'), 
                    array('name', 'length', 'max'=>55),
                    // The following rule is used by search().
                    // Please remove those attributes that should not be searched.
                    array('id, name', 'safe', 'on'=>'search'),
            );
    } 
```

# android - 将Phonegap文件添加到android内核，除了html css和jquery文件

> ID：14116981
> 
> 赞同：1
> 
> 时间：2013-01-02T04:53:46.217
> 
> 标签：android, cordova, kernel, native

我基本上是一名 Web 开发人员。我使用 Phonegap 工具构建 Android iOS 和 RIM 应用程序。我想将 Corodova.jar 文件和 Phonegap.js 文件包含在 Android 内核中（在 Android 操作系统中）。所以每次我不想在我的 android APP 中添加这两个文件时。我想让这些文件存储在 android 中内核并在任何phonegap项目运行时执行，以提高执行速度，类似于本机应用程序

现有的电话差距模型：在每个应用程序内部都包含 corodova.jar 文件和电话差距 .js 文件发生并且应用程序被执行

我的想法 - 通过“Maxymus Boopathy”（在谷歌中输入并搜索，你会找到我的

在 Android 操作系统/内核内部 保存/存储 Corodova.jar 和 JS 文件以及除 html 和 CSS 之外的所有文件 这样每次执行期间，应用程序都会从​​ android 内核中获取 Corodova.jar 和 js 文件并将其用于所有 phonegap 应用程序：低文件大小，高性能提高应用程序的速度

通过“Maxymus Boopathy”（输入谷歌并罚款我）我有世界上唯一的名字，没有其他人有这个名字期待我！！！

# php - 此代码未在 wordpress 中提交的数据

> ID：14116983
> 
> 赞同：0
> 
> 时间：2013-01-02T04:54:01.817
> 
> 标签：php, wordpress

这是我表单的 php，我想在 wordpress 中使用它，有人能帮我解决这个问题吗？我是 wordpress 的新手，它没有向表格提交任何数据给表单提供一些操作路径我不知道这段代码的错误在哪里我无法提交表单

```
 //protect your codes from attacks.
     if ( isset($_POST['exporter']) ? $exporter=$wpdb->escape($_POST['exporter']) : $exporter=''
     isset ($_POST['importer']) ? $importer=$wpdb->escape($_POST['importer']) : $importer=''
isset($_POST['dateissue']) ? $dateissue=$wpdb->escape($_POST['dateissue']) : $dateissue='';
   //..
 }
    if (!$wpdb->insert('wp_form_data',

                            array(
                                'consignor'=>$_POST[exporter]
                                ,'consignee'=>$_POST[importer]
                                ,'conveyance'=>$_POST[conveyance]
                    ,'origin'=>$_POST[origin]
                    ,'entry_port'=>$_POST[dpoe]
                    ,'importing_country'=>$_POST[impcon]
                    ,'container_no'=>$_POST[container]
                    ,'package_no'=>$_POST[nopk]
                        ,'package_type'=>$_POST[tyop]
                    ,'product_name'=>$_POST[name]
                    ,'bot_name'=>$_POST[botname]
                    ,'quantity'=>$_POST[quantity]  

,'certify'=>$_POST[certify]                                 ,'add_declaration'=>$_POST[declaration]
,'date'=>$_POST[date]

                                ,'treatment'=> $_POST[treatment]
                                ,'duration_temprature'=>$_POST[dutemp]
                                ,'concentration'=>$_POST[concen]
                                ,'add_information'=>$_POST[adinfo]
                                ,'inspector_name'=>$_POST[insname]
                                ,'place'=>$_POST[place]
                                ,'name_designation'=>$_POST[namedesg]
                                ,'issue_date'=>$_POST[dateissue]
                            ))) exit;
    else {echo 'Form Submitted';}
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T05:08:31.503

试试这个代码（正如你提到的上面的代码本身有很多问题。关于整个页面的 Donoo 有多少） -`Seems like you are lacking of basic PHP skills. Spend a week to learn **PHP** before going to have a sky level PHP`

```
<?php
//no need to connect &amp; close to db. it's done automatically by wpdb.
global $wpdb;
//protect your codes from attacks.
isset($_POST['exporter']) ? $exporter=$wpdb->escape($_POST['exporter']) : $exporter='';
isset($_POST['importer']) ? $importer=$wpdb->escape($_POST['importer']) : $importer='';
isset($_POST['conveyance']) ? $conveyance=$wpdb->escape($_POST['conveyance']) : $conveyance='';
isset($_POST['origin']) ? $origin=$wpdb->escape($_POST['origin']) : $origin='';
isset($_POST['dpoe']) ? $dpoe=$wpdb->escape($_POST['dpoe']) : $dpoe='';
isset($_POST['impcon']) ? $impcon=$wpdb->escape($_POST['impcon']) : $impcon='';
isset($_POST['container']) ? $container=$wpdb->escape($_POST['container']) : $container='';
isset($_POST['nopk']) ? $nopk=$wpdb->escape($_POST['nopk']) : $nopk='';
isset($_POST['tyop']) ? $tyop=$wpdb->escape($_POST['tyop']) : $tyop='';
isset($_POST['name']) ? $name=$wpdb->escape($_POST['name']) : $name='';
isset($_POST['botname']) ? $botname=$wpdb->escape($_POST['botname']) : $botname='';
isset($_POST['quantity']) ? $quantity=$wpdb->escape($_POST['quantity']) : $quantity='';
isset($_POST['certify']) ? $certify=$wpdb->escape($_POST['certify']) : $certify='';
isset($_POST['declaration']) ? $declaration=$wpdb->escape($_POST['declaration']) : $declaration='';
isset($_POST['date']) ? $date=$wpdb->escape($_POST['date']) : $date='';
isset($_POST['treatment']) ? $treatment=$wpdb->escape($_POST['treatment']) : $treatment='';
isset($_POST['dutemp']) ? $dutemp=$wpdb->escape($_POST['dutemp']) : $dutemp='';
isset($_POST['concen']) ? $concen=$wpdb->escape($_POST['concen']) : $concen='';
isset($_POST['adinfo']) ? $adinfo=$wpdb->escape($_POST['adinfo']) : $adinfo='';
isset($_POST['insname']) ? $insname=$wpdb->escape($_POST['insname']) : $insname='';
isset($_POST['place']) ? $place=$wpdb->escape($_POST['place']) : $place='';
isset($_POST['namedesg']) ? $namedesg=$wpdb->escape($_POST['namedesg']) : $namedesg='';
isset($_POST['dateissue']) ? $dateissue=$wpdb->escape($_POST['dateissue']) : $dateissue='';
$data = array( 'consignor'=>$_POST[exporter]
        ,'consignee'=>$_POST[importer]
        ,'conveyance'=>$_POST[conveyance]
        ,'origin'=>$_POST[origin]
        ,'entry_port'=>$_POST[dpoe]
        ,'importing_country'=>$_POST[impcon]
        ,'container_no'=>$_POST[container]
        ,'package_no'=>$_POST[nopk]
        ,'package_type'=>$_POST[tyop]
        ,'product_name'=>$_POST[name]
        ,'bot_name'=>$_POST[botname]
        ,'quantity'=>$_POST[quantity]
        ,'certify'=>$_POST[certify]
        ,'add_declaration'=>$_POST[declaration]
        ,'date'=>$_POST[date]
        ,'treatment'=> $_POST[treatment]
        ,'duration_temprature'=>$_POST[dutemp]
        ,'concentration'=>$_POST[concen]
        ,'add_information'=>$_POST[adinfo]
        ,'inspector_name'=>$_POST[insname]
        ,'place'=>$_POST[place]
        ,'name_designation'=>$_POST[namedesg]
        ,'issue_date'=>$_POST[dateissue]
    );
if (!$wpdb->insert('wp_form_data', $data)) {
    echo "Form Submitted and Inserted";
} else {
    echo 'Form Submitted';
} 
```

# c# - 将windows phone emulator 连接到电脑的代码

> ID：14116985
> 
> 赞同：0
> 
> 时间：2013-01-02T04:54:33.177
> 
> 标签：c#, windows-phone-7

我今年有一个项目，我需要通过 wifi 连接将 windows phone 连接到 pc 并执行基本的同步操作。. . 作为这个应用程序开发的新手，我不知道从哪里开始我面临的问题是我应该使用哪种协议和服务。我只想知道一个基本代码来建立模拟器和计算机之间的连接并传输简单的消息或其他东西......我搜索了很多网站，但找不到简单的连接代码。我正在为 windows phone 使用 Microsoft Visual Studio 2010 Express

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T05:32:53.030

但是有几种方法可以将数据从应用程序中提取到手机：

*   Webservices，您创建一个 Web 服务并且您的应用程序调用该 Web 服务（[示例](http://www.codeproject.com/Questions/355937/How-to-use-webservice-in-Windows-Phone-7-applicati)）
*   基于套接字（例如 UDP）

如果你想在你的应用程序不运行（用户不可见）的情况下做某事，那么你可以看看后台任务。样品在[这里](http://code.msdn.microsoft.com/wpapps/CSWP7ScheduledTaskAgent-6450bcf1)。尽管您在后台任务中可以完成的工作受到限制，但请参阅 Microsoft 的文档。

# linq-to-entities - 如何将 Linq 中的两个 GUID 与实体进行比较

> ID：14116986
> 
> 赞同：4
> 
> 时间：2013-01-02T04:54:45.077
> 
> 标签：linq-to-entities, guid

我正在编写一个 L2E 查询来比较两个 GUID 值。它根本不允许直接比较，并且 L2E 查询中也不允许使用 .ToString() 方法。我们如何实现这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-06-25T12:44:07.620

我不知道这是否适用于您的情况，但我发现我可以在 Linq 中使用 Guid.CompareTo 方法，并将其正确转换为 SQL。

```
documentQuery.Where(s => s.DocumentGuid.CompareTo(MyGuidVariable) > 0); 
```

这将产生以下 SQL：

```
AND ([Extent1].[DocumentGuid] > @p__linq__1) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-02T05:01:00.600

您需要比较两个 GUID 参数的字符串表示

```
string var1=Convert.ToString(GuidParam1);
string var2=Convert.ToString(GuidParam2) 
```

然后比较那些字符串值

```
 if(var1.CompareTo(var2)==0) 
```

# c# - 我想在使用其他管理员帐户时收到传入消息的消息通知（弹出式样式）

> ID：14116992
> 
> 赞同：-1
> 
> 时间：2013-01-02T04:56:05.513
> 
> 标签：c#, windows

我在我的计算机上设置了 2 个管理帐户，并在其中一个上打开了一个聊天可执行文件；聊天应用程序可以是任何东西（自制系统、Skype、雅虎......）。当我使用其他管理员帐户时，我想收到即将发送到其中的消息的消息通知（弹出式样式）。

详情：2个账号A和B，都登录并​​来回切换。聊天应用程序正在帐户 A 上运行，我登录到它。然后我从系统开始菜单中选择切换用户并选择帐户 B 登录。某人，也许是朋友通过帐户 A 中的聊天系统向我发送了一条消息。现在我想查看来自我朋友的消息的系统通知消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T05:35:25.660

我从您的应用程序中得到的用户，您在每个客户端中都有服务器或接收器，那么您有一些解决方案来解决这个问题：

首先，您可以向您的应用程序添加一个 Windows 服务，它可以管理您的接收消息以显示在女巫帐户中。您可以通过`UserName = System.Security.Principal.WindowsIdentity.GetCurrent().User`并在收到通知登录用户的消息事件中获取用户信息。请注意，Windows 服务必须显示通知。

在第二种解决方案中，如果锁定的用户进程在锁定模式下工作（我认为它工作），您管理接收消息以通知该计算机中的所有用户或登录用户。在这种情况下，您必须为通知创建小程序并运行它`Process.start(ProcessStartInfo)`（您也可以在案例 1 中使用它）。

祝你好运。

# ios - Objective-C：弱属性不能按预期工作

> ID：14116993
> 
> 赞同：10
> 
> 时间：2013-01-02T04:56:07.797
> 
> 标签：ios, weak-references, strong-references

> **可能重复：**
> [为什么弱 NSString 属性没有在 iOS 中发布？](https://stackoverflow.com/questions/11107729/why-do-weak-nsstring-properties-not-get-released-in-ios)

我是 Objective C 的新手，我有一些我自己无法回答的问题。我有一段代码用于测试 __weak 变量（当然，我使用的是 ARC）：

```
NSString *myString = [[NSString alloc] initWithFormat:@"John"];
NSString * __weak weakString = myString;
myString = nil; //<-- release the NSString object
NSLog(@"string: %@", weakString); 
```

上述代码的输出与预期一致，因为 weakString 是一个弱变量：

```
2013-01-02 11:42:27.481 ConsoleApp[836:303] string: (null) 
```

但是当我将代码修改为：

```
NSString *myString = [[NSString alloc] initWithFormat:@"John"];
NSString * __weak weakString = myString;
NSLog(@"Before: %@", weakString); //<--- output to see if the __weak variable really works.
myString = nil;
NSLog(@"After: %@", weakString); 
```

输出完全不是我所期望的：

```
2013-01-02 11:46:03.790 ConsoleApp[863:303] Before: John
2013-01-02 11:46:03.792 ConsoleApp[863:303] After: John 
```

后一个 NSLog 的输出必须是 (nil) 而不是“John”。我试图在许多文档中搜索，但我没有找到这个案例的答案。有人能给出合理的解释吗？提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T07:12:23.410

该`NSLog`函数将传递的 NSString 保留在自动释放池中。因此，在 autorelease 池耗尽之前，zeroing-weak 变量不会被归零。例如：

```
__weak NSString* weakString = nil;

@autoreleasepool {
    NSString* myString = [[NSString alloc] initWithFormat:@"Foo"]; // Retain count 1
    weakString = myString;         // Retain count 1
    NSLog(@"A: %@", weakString);   // Retain count 2
    NSLog(@"B: %@", weakString);   // Retain count 3
    myString = nil;                // Retain count 2
    NSLog(@"C: %@", weakString);   // Retain count 3

    NSAssert(weakString != nil, @"weakString is kept alive by the autorelease pool");
} 

// retain count 0
NSAssert(weakString == nil, @"Autorelease pool has drained."); 
```

为什么 NSLog 将字符串放入自动释放池？这是一个实现细节。

您可以使用调试器或 Instruments 来跟踪 NSString 实例的保留计数。确切的保留计数并不重要，但它确实揭示了幕后发生的事情。重要的是 NSString 实例在自动释放池耗尽时被释放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T07:12:53.317

我认为这只是一些实现细节。你的弱变量正在被清除，但不仅仅是立即清除。例如，这按预期工作：

```
NSString *myString = [[NSString alloc] initWithFormat:@"John"];
NSString * __weak weakString = myString;
@autoreleasepool {
    NSLog(@"Before: %@", weakString);
    myString = nil;
}
NSLog(@"After: %@", weakString); // nil 
```

# java - 无法使用 Thread.start() 启动 JavaFX 任务

> ID：14116996
> 
> 赞同：1
> 
> 时间：2013-01-02T04:56:25.687
> 
> 标签：java, multithreading, concurrency, javafx

好吧，我目前正在学习 JavaFX，作为一个初学者（但不是 Java），我开始阅读 Java 的官方教程，目前正在学习[JavaFX 中的并发](http://docs.oracle.com/javafx/2/threads/jfxpub-threads.htm)。我尝试创建我的第一个 JavaFx`Task`对象并启动它。这是我到目前为止所尝试的

```
Task<Integer> task = new Task<Integer>(){
    @Override protected Integer call() throws Exception{
        int iterations;
        for(iterations = 0; iterations < 10000; iterations++){
            if(isCancelled()){
                break;
            }
            System.out.println("Iteration " + iterations);
            Thread.sleep(3000);
        }
        return iterations;
    }
};

//start the background task
Thread th = new Thread(task);
th.setDaemon(true);
System.out.println("Starting background task...");
th.start();
System.out.println("Background task started..."); 
```

但任务没有开始。我在控制台中看不到任何消息。有什么我错过的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T11:07:09.653

任务**旨在在 JavaFX**应用程序的上下文中运行，如下例所示

```
import javafx.application.Application;
import javafx.concurrent.Task;
import javafx.stage.Stage;

import java.io.IOException;

public class JavaTaskClass extends Application{

       public static void main(String[] args) { 
         launch(args); 
       }

      @Override public void start(final Stage stage) throws IOException {
        //create task object
        Task<Integer> task = new Task<Integer>(){

          @Override
          protected Integer call() throws Exception{
            System.out.println("Background task started...");
            int iterations;
            for(iterations = 0; iterations < 10000; iterations++){
              if(isCancelled()){
                break;
              }
              System.out.println("Iteration " + iterations);
              Thread.sleep(3000);
            }
            return iterations;
          }
        };

        //start the background task
        Thread th = new Thread(task);
        th.setDaemon(true);
        System.out.println("Starting background task...");
        th.start();
    }

} 
```

# php - 测试连接是否错误

> ID：14116997
> 
> 赞同：0
> 
> 时间：2013-01-02T04:56:41.300
> 
> 标签：php, conditional

我在[这里使用这个脚本](https://github.com/xPaw/PHP-Minecraft-Query/blob/master/MinecraftQuery.class.php)，它并不总是想连接到我设置的服务器。如果没有，它会显示一个错误`"Failed to receive status"`。我想知道如何测试是否发生这种情况并将其放入 if 语句中？

例如：

```
if (isError) return false; 
```

这是检查脚本中是否存在错误的部分：

```
if( !$Data )
        {
            throw new MinecraftQueryException( "Failed to receive status." );
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T05:00:34.020

只需使用[**try ... catch**](http://php.net/manual/en/language.exceptions.php)块。但请确保您正在记录异常消息。对以后的调查很有帮助。

```
try
{
    $Query = new MinecraftQuery( );
    // .. do mine craft connection
    $Query->Connect( '...', 25565 );
    print_r( $Query->GetInfo( ) );
} catch(MinecraftQueryException $mqe){
    // log $mq->getMessage() for future investigation
    return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T05:02:11.490

您需要将`Connect`调用包围在 try/catch 块中以捕获异常，然后将失败代码放入 catch 块中。[您可以在PHP 手册](http://php.net/exceptions)中阅读有关异常的更多信息：

```
try {
    $query->Connect();
} catch(MinecraftQueryException $exception) {
    return false;
} 
```