# StackOverflow 问答 12851000-12851999

# c++ - UDP async_receive 的 boost::asio 错误

> ID：12851004
> 
> 赞同：1
> 
> 时间：2012-10-12T01:27:58.343
> 
> 标签：c++, udp, client-server, boost-asio, tftp

我遇到了来自 boost::asio 的奇怪错误的问题。我正在实现 TFTP 服务器的一半（仅限服务器-> 客户端）。我在第一个套接字上的端口 69 上获得第一个 RRQ 数据包，然后创建另一个套接字来执行 DATA、ACK 交换。我在该套接字上启动 async_receive()，然后对第一个数据包执行 send()。然后我得到接收的处理程序回调（我假设 ACK 进来），它给出了错误“无法建立连接，因为目标机器主动拒绝了它”，我从另一个线程理解这里意味着 ERROR_PORT_UNREACHABLE。

我真的不明白接收呼叫如何导致 UNREACHABLE 错误，因为我没有接触任何东西，我正在接收。我检查了 send() 的结果，那里没有错误。

我检查了套接字中的本地和远程端点（在错误之前和之后），它们都有正确的 IP 地址和端口。

有任何想法吗？我用谷歌搜索，找不到其他人有这个问题。大多数结果导致我使用stackoverflow，所以我在这里问。

**编辑**—— *我的问题是我正在使用调试器。当我开始发送第一个数据包时，客户端在大约一秒钟内发送了十几个请求后，客户端超时并放弃了，我的数据来不及了。当我在没有断点的情况下运行时，它工作正常。感谢大家的建议。正是观察 Wireshark 中的数据包给了我线索。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T01:42:29.990

发送成功的原因是因为发送只是表明数据包已被提供给操作系统。特别是，操作系统随后将该数据包发送到目的地，并以指示主机未在侦听的 IP 数据包进行响应。然后您的操作系统接收它，并在您的套接字上设置一个标志，导致下一次读取失败。由于您已经在执行异步接收，因此会导致接收返回错误。

如果可能的话，我强烈建议使用wireshark 或类似的东西来观察UDP 交换，看看你是否能发现任何其他问题。我不熟悉 TFTP 协议，因此无法提供太多输入。

# linux - 在 VIM 上使用重音符号

> ID：12851007
> 
> 赞同：0
> 
> 时间：2012-10-12T01:28:12.837
> 
> 标签：linux, vim

几个小时前，我从旧的 Debian 盒子换成了新的盒子，当我这样做时，我带来了在旧设备上使用的 .vimrc。

在我可以使用的旧版本上：áéóçãñ 等（首先是 simbol ' 然后是字母）

在我的新机器上，我根本无法做到这一点，我总是得到 A 后跟一些晦涩的符号。

我已经检查了我的编码，两台机器上都是 utf-8。

同样在两台机器上，我都可以在 bash 提示符下使用重音符号，所以问题出在 vim 上。

有人有解决这个问题的提示吗？

谢谢你的帮助。

编辑：我刚刚发现了一个不同之处，在我的旧机器上我有 VIM 7.3 在新机器上是 7.2.445，可能是这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T01:31:27.787

尝试添加

```
set encoding=utf-8 
```

在你的`vimrc`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T01:44:09.903

它现在正在工作。我不知道为什么，但是正如我所说的编码 utf-8 对我不起作用然后我开始尝试其他方法，我发现编码 iso-8859 解决了我在那台机器上的问题。奇怪的是，在我的旧机器上它可以通过 utf-8 工作。

# python - 使用子进程运行程序时出错

> ID：12851009
> 
> 赞同：0
> 
> 时间：2012-10-12T01:28:27.990
> 
> 标签：python, python-2.7, subprocess

我有一个工具可以返回一些关于我正在运行的机器的信息。在正常的命令行上它会像 -

> sudo /path-to-tool-directory/工具 arg

这很好用。现在，当我将其分解并将其包含在我的 python 脚本中时

> 结果 = subprocess.call (["sudo /path-to-tool-directory/tool","arg"])

它给我一个错误

> subprocess.py在 XYZ 行，
> 在 _execute_child
> raise child_exception
> OSError: [Errno 2] No such file or directory

任何线索这里可能出了什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T05:58:34.723

使用 subprocess 模块时，您需要为`call()`函数提供命令行参数**列表**。以你上面的例子：

```
result = subprocess.call (["sudo /path-to-tool-directory/tool","arg"]) 
```

这不起作用，因为`"sudo /path-to-tool-directory/tool"`它是一个列表项。您需要的是**所有**项目都是单独的列表项：

```
result = subprocess.call (["sudo", "/path-to-tool-directory/tool", "arg"]) 
```

这应该成功运行并终止，将 sudo 的返回代码留在`result`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T01:33:15.720

拆分对 sudo 的调用（出于@zzzrik 上面详述的所有原因）：

```
>>> result = subprocess.call (["sudo /usr/bin/python","/home/hughdbrown/Dropbox/src/longwords.py"])
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/subprocess.py", line 493, in call
    return Popen(*popenargs, **kwargs).wait()
  File "/usr/lib/python2.7/subprocess.py", line 679, in __init__
    errread, errwrite)
  File "/usr/lib/python2.7/subprocess.py", line 1249, in _execute_child
    raise child_exception
OSError: [Errno 2] No such file or directory
>>> result = subprocess.call (["sudo", "/usr/bin/python","/home/hughdbrown/Dropbox/src/longwords.py"])
[sudo] password for hughdbrown: 
```

看？第二个正在工作，因为我收到提示输入密码。

# c# - 在 Windows 中全局检测双击

> ID：12851010
> 
> 赞同：2
> 
> 时间：2012-10-12T01:28:33.013
> 
> 标签：c#, c++, windows, visual-studio-2010, winapi

我想编写一个在后台运行的 Windows 程序，并打印出下一次鼠标双击事件发生的确切时间（精确到毫秒）。具体来说，我想要双击桌面上某个 .exe 文件的确切时间。有没有办法做到这一点，如果有，你能提供一些简单的示例代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T02:10:18.213

可能制作一个 Windows 挂钩是最好的解决方案。查看有关钩子的文档。

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms632589%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632589%28v=vs.85%29.aspx)

看看这个演示：

[http://code.msdn.microsoft.com/windowsdesktop/CppWindowsHook-06957865](http://code.msdn.microsoft.com/windowsdesktop/CppWindowsHook-06957865)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T02:17:40.710

在某些情况下，例如silverlight，您没有鼠标双击事件，因此您可以检查鼠标按下的时间和位置，并将其与下一次鼠标按下的时间和位置进行比较，以模拟双击动作。它是这样的：

```
 double mouseVerticalPosition;
    double mouseHorizontalPosition;        
    DateTime clickedTime;
    bool IsSecondClick = false;

    void button_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
       {
           if(IsSecondClick)
           {

             IsSecondClick = false;
             if ((y - mouseVerticalPosition == 0) & y - mouseHorizontalPosition == 0) &
             clickedTime - DateTime.Now < SOMETIME )
             { 
               // mouse double click happenes
             }
           }
           else
           {
             IsSecondClick = true;
             clickedTime = DateTime.Now;
             mouseVerticalPosition = e.GetPosition(null).Y;
             mouseHorizontalPosition = e.GetPosition(null).X;               

           }
       } 
```

# c# - 如何在 MVC 中调用另一个控制器函数？

> ID：12851012
> 
> 赞同：1
> 
> 时间：2012-10-12T01:28:38.437
> 
> 标签：c#, asp.net-mvc

我有两个控制器。

一个是

```
 public partial class CatalogController : BaseNopController
    {

 [NonAction]
        protected IEnumerable<ProductOverviewModel> PrepareProductOverviewModels(IEnumerable<Product> products, 
            bool preparePriceModel = true, bool preparePictureModel = true,
            int? productThumbPictureSize = null, bool prepareSpecificationAttributes = false,
            bool forceRedirectionAfterAddingToCart = false)
        {
 var models = new List<ProductOverviewModel>();
            foreach (var product in products)
            {
                var model = new ProductOverviewModel()
                {
                    Id = product.Id,
                    Name = product.GetLocalized(x => x.Name),
                    ShortDescription = product.GetLocalized(x => x.ShortDescription),
                    FullDescription = product.GetLocalized(x => x.FullDescription),
                    SeName = product.GetSeName(),
                };

}
} 
```

另一个是

```
public class HireController : BaseNopController
    {

        [HttpPost]
        public ActionResult CheckData(string submitButton)
        {
            switch (submitButton)
            {
                case "Yes":

                   // I want to call  CatalogController  --> PrepareProductOverviewModels
                case "No":
                    return RedirectToRoute("detailform");
                default:
                    return RedirectToRoute("detailform");
            }

        }
} 
```

在 Hire 控制器 --> CheckData 函数中，我想调用 CatalogController -->PrepareProductOverviewModels(...) 我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T01:32:11.560

它是`protected`，所以除非你`HireController`派生自`CatalogController`，否则你不能调用它。但是，如果您将它放在另一个类中，例如 ViewModel 类，并制作它`public`，您可以从您的`HireController`.

该 ViewModel 存在`protected`或存在于您的控制器类中几乎没有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T04:15:03.897

如果您有需要在控制器之间共享的方法，那么您应该将它们分离到“帮助器”类中，并让两个控制器都调用该类。

# r - 如何在 R 中填充环境

> ID：12851018
> 
> 赞同：4
> 
> 时间：2012-10-12T01:29:05.993
> 
> 标签：r, environment

我正在使用`IMIS`包（增量混合重要性采样）来估计参数。不幸的是，它是为查找函数而编写的`likelihood`，`sample.prior`并且`prior`在它被调用的环境中，所以我不能将它包装在一个函数中（我的最终目标）。作品中的单变量示例`?IMIS`很好，

```
require(IMIS)
likelihood <- function(theta) exp(-1*sin(3*theta)*sin(theta^2) - 0.1*theta^2)
prior <- function(theta) dnorm(theta, 0, 5)
sample.prior <- function(n) rnorm(n, 0, 5)
result = IMIS(500, 3000, 100, 10)

## also fine using do.call (pertinent below)
result <- do.call(IMIS, args = list(B = 500, B.re = 3000, number_k = 100, D = 10)) 
```

但不出所料，将其包装在一个函数中不会：

```
rm(likelihood, prior, sample.prior, result)
imisWrap <- function() {
    likelihood <- function(theta) exp(-1*sin(3*theta)*sin(theta^2) - 0.1*theta^2)
    prior <- function(theta) dnorm(theta, 0, 5)
    sample.prior <- function(n) rnorm(n, 0, 5)
    result = IMIS(500, 3000, 100, 10)
    return(result)
}
imisWrap() ## can't find sample.prior 
```

我*认为*解决此问题的方法是在我的包装器中创建一个环境（或使用它的环境），然后使用它在该环境`do.call`中运行`IMIS`，但我不知道如何创建一个包含`likelihood`、`prior`、`sample.prior`和其中的新环境`result`。

* * *

**编辑：**使用@BenBolker 的优秀评论我有一个改进但仍然没有工作的尝试：

```
imisWrap2 <- function() {
    likelihood <- function(theta) exp(-1*sin(3*theta)*sin(theta^2) - 0.1*theta^2)
    prior <- function(theta) dnorm(theta, 0, 5)
    sample.prior <- function(n) rnorm(n, 0, 5)
    imisEnv <- new.env()
    assign("likelihood", likelihood, envir = imisEnv)
    assign("sample.prior", sample.prior, envir = imisEnv)
    assign("prior", prior, envir = imisEnv)
    result = do.call(IMIS,
                     args = list(B = 500, B.re = 3000, number_k = 100, D = 10),
                     envir = imisEnv)
    return(result)
} 
```

但这仍然找不到功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T08:39:16.800

您可以将`environment(IMIS) <- environment()`其放在顶部`imisWrap`以使其正常工作。这只会修改`IMIS`in的行为`imisWrap`。包命名空间中的函数版本不变。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T07:13:35.560

您可以通过`attach`ing 环境（并`detach`在使用后进行清理）来使其工作：

```
imisWrap() <- function() {
    imisList <- list(
      likelihood = function(theta) exp(-1*sin(3*theta)*sin(theta^2) - 0.1*theta^2),
      prior = function(theta) dnorm(theta, 0, 5),
      sample.prior = function(n) rnorm(n, 0, 5)
    )
    imisEnv <- as.environment(imisList)
    attach(imisEnv)
    result = IMIS(500, 3000, 100, 10)
    detach(imisEnv)
    return(result)
}

imisWrap()
[1] "5000 likelihoods are evaluated in 0 minutes"
[1] "Stage   MargLike   UniquePoint   MaxWeight   ESS"
[1]    1.000   -0.806 1796.246    0.001 2434.921
[1] "maximum posterior= -1.96 , likelihood= 0.61 , prior= -2.57 , time used= 0 minutes, convergence= 0"
... 
```

但是，我回应@BenBolker，因为这确实是包作者应该更干净地解决的功能问题。

# javascript - JQuery 中的流线型

> ID：12851021
> 
> 赞同：0
> 
> 时间：2012-10-12T01:30:01.303
> 
> 标签：javascript, jquery, html, css

我只是想知道是否有办法简化我的 JQuery 代码？这就是我目前所拥有的：

```
$(document).ready(function () {
    $(window).bind("unload", function () {});

    $("#bg a").click(function (event) {
        event.preventDefault();
    });

    $("a.transition2").hover(function (event) {
        event.preventDefault();
        $(".background2").stop(true, false).animate({
            opacity: "1"
        }, 1000);
    },

    function () {
        $(".background2").stop(true, false).delay(500).animate({
            opacity: "0"
        }, 1500);
    });
    $("a.transition3").hover(function (event) {
        event.preventDefault();
        $(".background3").stop(true, false).animate({
            opacity: "1"
        }, 1000);
    },

    function () {
        $(".background3").stop(true, false).delay(500).animate({
            opacity: "0"
        }, 1500);
    });
    $("a.transition4").hover(function (event) {
        event.preventDefault();
        $(".background4").stop(true, false).animate({
            opacity: "1"
        }, 1000);
    },

    function () {
        $(".background4").stop(true, false).delay(500).animate({
            opacity: "0"
        }, 1500);
    });
    $("a.transition5").hover(function (event) {
        event.preventDefault();
        $(".background5").stop(true, false).animate({
            opacity: "1"
        }, 1000);
    },

    function () {
        $(".background5").stop(true, false).delay(500).animate({
            opacity: "0"
        }, 1500);
    });
    $("a.transition6").hover(function (event) {
        event.preventDefault();
        $(".background6").stop(true, false).animate({
            opacity: "1"
        }, 1500);
    },

    function () {
        $(".background6").stop(true, false).delay(500).animate({
            opacity: "0"
        }, 1000);
    });
    $("a.transition7").hover(function (event) {
        event.preventDefault();
        $(".background7").stop(true, false).animate({
            opacity: "1"
        }, 1000);
    },

    function () {
        $(".background7").stop(true, false).delay(500).animate({
            opacity: "0"
        }, 1500);
    });
    $("a.transition8").hover(function (event) {
        event.preventDefault();
        $(".background8").stop(true, false).animate({
            opacity: "1"
        }, 1000);
    },

    function () {
        $(".background8").stop(true, false).delay(500).animate({
            opacity: "0"
        }, 1500);
    });

    $("a.transition2").click(function (event) {
        event.preventDefault();
        $("#border").animate({
            right: "-50px"
        }, 500);
        $("#border").animate({
            left: "300px"
        }, 500);
        $("#border").animate({
            width: "30px"
        }, 500);
        $("#social").animate({
            right: "-50px"
        }, 500);
        $("#social").animate({
            left: "20px"
        }, 500);
        $("#menu").animate({
            right: "-200px"
        }, 500);
        $("#menu").animate({
            left: "50px"
        }, 500);
    });

    $("a.transition8").click(function (event) {
        event.preventDefault();
        $("#contact").animate({
            opacity: "1"
        });
    });
    $("#contact").click(function (event) {
        event.preventDefault();
        $("#contact").animate({
            opacity: "0"
        });
    });

}); 
```

将过渡悬停放在一段代码中真的很好吗？

这是标记：

```
<div id="bg">
<img src="photos/backgrounds/home.jpg" class="background1" alt=""/>
<ul>
    <li><a href=""><img src="photos/backgrounds/about.jpg" class="background2" alt=""/></a></li>
    <li><a href=""><img src="photos/backgrounds/3D.jpg" class="background3" alt=""/></a></li>
    <li><a href=""><img src="photos/backgrounds/photo.jpg" class="background4" alt=""/></a></li>
    <li><a href=""><img src="photos/backgrounds/video.jpg" class="background5" alt=""/></a></li>
    <li><a href=""><img src="photos/backgrounds/graphics.jpg" class="background6" alt=""/></a></li>
    <li><a href=""><img src="photos/backgrounds/web.jpg" class="background7" alt=""/></a></li>
    <li><a href=""><img src="photos/backgrounds/contact.jpg" class="background8" alt=""/></a></li>
</ul>
</div>

<div id="menu">
    <ul>
        <li><a href="" class="transition2">aboutme</a></li>
        <li><a href="" class="transition3">3Dmodelling</a></li>
        <li><a href="" class="transition4">photography</a></li>
        <li><a href="" class="transition5">videocreation</a></li>
        <li><a href="" class="transition6">graphics</a></li>
        <li><a href="" class="transition7">webdesign</a></li>
        <li><a href="" class="transition8">contact</a></li>
    </ul>
</div> 
```

希望有人可以提供帮助？多谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T01:34:40.207

由于元素的顺序似乎匹配，您可以通过索引找到相应的背景元素：

```
var $backgrounds = $('#bg li img');
var $menu_items = $('#menu li a');

$menu_items.hover(function(event){
    event.preventDefault();
    var $bg = $backgrounds.eq($menu_items.index(this));
    $bg.stop(true, false).animate({opacity:"1"},1000);
}, function() {
    var $bg = $backgrounds.eq($menu_items.index(this));
    $bg.stop(true, false).delay(500).animate({opacity:"0"},1500);
}); 
```

**参考：** [`.eq`](http://api.jquery.com/eq/) ,[`.index`](http://api.jquery.com/index/)

您还可以使用`.each`并获取一次相应的元素并通过存储对它的引用，`.data`这样您就不必每次都查找它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T02:27:28.710

将链接元素更改为如下所示：

```
<li><a href="" class="transition" data-sequence="2">aboutme</a></li> 
```

（如果您还需要`transitionN`该类用于 CSS 目的，您当然可以同时拥有）。

然后使用以下 jQuery：

```
$("a.transition").hover(function(event) {
    event.preventDefault();
    var $bg = $(".background"+$(this).data("sequence"));
    $bg.stop(true, false).animate({opacity:"1"},1000);
 }, function() {
    var $bg = $(".background"+$(this).data("sequence"));
    $bg.stop(true, false).delay(500).animate({opacity:"0"},1500);
 }); 
```

# windows - 检查命令行参数是否是使用 IF 的驱动器

> ID：12851022
> 
> 赞同：0
> 
> 时间：2012-10-12T01:30:12.197
> 
> 标签：windows, shell, batch-file

我看到一个Windows批处理文件如下：

```
..
::Handle the case where the install dir is specified as a drive
if not "%1" == "" if /I "%1" == "%~d1" set INSTALL_DIR=%~d1
.. 
```

问题 1：我从来没有见过两个 IF 语句像这样一起使用。它是否像 AND 一样，即 (persudo code: (("%1" != "") and (%1 == "%~d1")) ？

问题 2：似乎只有当 %1 是驱动器时才会设置 INSTALL_DIR。但是下面的单次检查还不够吗？

```
if /I "%1" == "%~d1" set INSTALL_DIR=%~d1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T07:45:22.550

2 一起使用的事实`if`并没有太大的区别，只是碰巧如果第一个成功运行的命令是另一个`if`语句。

是的， 2具有与逻辑`if`相同的功能。`AND`

单次检查似乎就足够了，但前提是他们没有对批处理执行特定的错误消息。

例如，如果没有给出参数，他们可能想要明确地检查这一点，并给出一条错误消息，说明没有参数。然后，如果有一个，并且它不是驱动器，请为此提供另一条错误消息。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T03:46:08.717

**问题 1**：您可能会发现像这样进行 IF 嵌套更容易（为了便于阅读）。

```
..
::Handle the case where the install dir is specified as a drive
if not "%1" == "" ( 
if /I "%1" == "%~d1" ( 
set INSTALL_DIR=%~d1
)
)
.. 
```

这也允许您在“if”实例中嵌套多个命令。例如：

```
..
::Handle the case where the install dir is specified as a drive
if not "%1" == "" ( 
echo Parameter 1 is not empty
if /I "%1" == "%~d1" ( 
echo Parameter 1 is a drive so setting the variable
set INSTALL_DIR=%~d1
)
)
.. 
```

**问题 2**：在您的示例中，测试确实需要参数是驱动器或路径（带驱动器），并将参数过滤到驱动器单独。

够了吗？这取决于您是否需要进行额外的检查，例如：

*   如果驱动器存在
*   如果驱动器是本地硬盘

如果您有足够的检查真的取决于您，您需要您的代码有多健壮，以及您对 %1 中使用的内容有多少控制权。

# html - 仅使用 css 和 html 的 Javascript onclick 模拟（不使用 javascript）

> ID：12851023
> 
> 赞同：6
> 
> 时间：2012-10-12T01:30:20.897
> 
> 标签：html, css

是否可以在不使用任何 javascript 的情况下创建一个在单击各种元素时更改的页面并将多个事件绑定到页面的各种元素？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-12T01:30:20.897

是的，有多种方法可以做到这一点，可以使用 :focus、:active、:checked 来完成。查看[演示](http://jsfiddle.net/AA4aK/2/)。

以下是一个使用 :checked 的示例，为什么我选择它而不是其他的，因为它简化了编写 css 规则并允许我使用多个元素从不同的地方与之交互。但说够了，html：

```
<input type="checkbox" id="cb1" /><span>This will change color</span> 
```

和CSS：

```
span { color: red; }
input:checked + span { color: blue; } 
```

你可能会说复选框很难看，而且它们在所有浏览器上看起来都不一样，这是真的，但你不必显示它们，你可以使用带有 for 属性的标签来影响复选框的状态，对于前面的示例，这可以通过以下方式实现：

```
<label for="cb1">Click here to toggle checkbox</label> 
```

好的，但是现在您可能认为事情变得复杂了，因为您使用了 2 个元素而不是 1 个，是的，但同时，由于`<label for="id">`通过 id 选择元素，您可以将标签放置在文档中您喜欢的任何位置，并且不仅如此，您还可以使用多个标签来更改同一输入的状态。如果你愿意，你也可以给他们自己的 id 或 classes，并为他们设置不同的样式。

更重要的是，您可以组合多个输入的状态并添加一个规则，如果您愿意的话，据我所知，目前任何其他纯 HTML + CSS 解决方案都不可用。

对于更复杂的示例，甚至是使用此实现的类似灯箱效果的微型演示，请参见 this [fiddle](http://jsfiddle.net/AA4aK/2/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T08:51:44.240

我个人最喜欢的伪选择器是 :target 。

这是我创建的一个纯 CSS 灯箱，它完全依赖于 :target。灯箱被称为[LightBoCSS](http://lightbocss.eggmaps.com/)（原因很明显）。主页上有一个演示，还有一个到 github 存储库的链接。请注意，我还没有在其中放置任何非 webkit 转换，因此请使用 webkit 浏览器以获得最佳体验。

# 的HTML：

```
 <div class="lightbox">
        <!-- ===== Put the thumbnails in here ===== -->
        <div class="thumbnails">
            <a href="#b1">
                <img src="images/ScreenShot1thumb1.png"/>
            </a>
            <a href="#b2">
                <img src="images/ScreenShot2thumb2.png"/>
            </a>
        </div>
        <!-- ===== Put the big images in here ===== -->
        <div class="lightboximg">
            <a id="b1" href="#">
                <img src="images/ScreenShot1.jpg" alt="EggMaps iPhone Screenshot 1" />
            </a>
            <a id="b2" href="#">
                <img src="images/ScreenShot2.jpg" alt="EggMaps iPhone Screenshot 2" />
            </a>
        </div>
    </div> 
```

## 使其工作的基本（蒸馏）CSS：

当“a”是目标时，“top”属性会发生变化。

```
/* Hide each large image */
.lightboximg  > a { /* the container for a large image */
    top: -999em; 
}

/* display the (large image container) anchor elem when it is the target */
.lightboximg > a:target {
    top: 0px;
} 
```

## 完整的 CSS：

```
/* Note the :target pseudo-selector. */
/* Hide each large image */
.lightboximg  > a { /* the container for a large image */
    display: block;
    min-height: 100%;
    width: 100%;
    position: absolute;
    /*top: -999em;  for browsers that can't set top in percentages - see comment from xception below */
    top: -101%;
    background-color: #222222; /* dark grey - for browsers that can't do rgba */
    background-color: rgba(0,0,100,0.4); /* for browsers that can't set multiple backgrounds */
    background: url(Fabric-14.png), rgba(0,0,100,0.4);
    opacity: 0;
    transition: top 1s ease-in-out,  opacity 1s ease-in-out, z-index 0.5s ease-in-out;
    -webkit-transition: top 1s ease-in-out,  opacity 1s ease-in-out, z-index 0.5s ease-in-out;
    z-index: -1;
}

/* display the (large image container) anchor elem when it is the target */
.lightboximg > a:target {
    top: 0px;
    opacity: 1;
    transition: top 1s ease-in-out,  opacity 1s ease-in-out, z-index 0.5s ease-in-out;
    -webkit-transition: top 1s ease-in-out,  opacity 1s ease-in-out, z-index 0.5s ease-in-out;
    z-index: 1001;
}

/* style for the large images */
.lightboximg > a img {
    /* centre the image */
    display:block;
    margin: 0px auto;
    /* make it fit into the window */
    max-width: 100%;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-14T11:07:39.827

最佳答案演示了可以使用 pure 完成的许多很酷的技巧`CSS`，但是，它没有演示如何使用`onclick`without将数据发布到表单`JavaScript`。大多数人会告诉你这是不可能的，但事实并非如此。

不使用 , 提交数据的唯一方法`JavaSript`是使用`submit`按钮。按钮的`submit`样式可以类似于文本，但并不理想。只需隐藏提交按钮并`labels`与相应的`for`属性一起使用。

请参阅：[JS Fiddle 示例](https://jsfiddle.net/za9nrm42/5/)

其他事件，例如，`onchange`确实需要`JavaScript`，但使用`submit`立即被 JavaScript 隐藏的按钮允许代码在 JavaScript 被禁用时工作。

大多数开发人员不建议为禁用了客户端脚本的访问者编写代码，因为如今几乎每个人都启用了它。我不同意。虽然。确实几乎每个人都`client-side`启用了脚本，使网站在禁用脚本的情况下工作有一些优势：

1.  通过使用 JavaScript 来强制执行良好的编码实践，这就是为了增强网站。（对我来说，JavaScript 主要是通过避免不必要的页面刷新来加速我的网站）
2.  强制我正确处理客户端使用后退按钮或刷新页面的情况。禁用客户端脚本总是会导致页面刷新，所以我不得不处理这些情况。
3.  防止 JavaScript 错误破坏网站。
4.  鼓励良好的安全实践。一些新手错误地依赖 JavaScript 进行验证。验证客户端以保存`api calls`和方便客户端是可以的，但**永远不**应该依赖它。服务器端验证是必不可少的，因为客户端的任何东西都可能被伪造。

# windows - Windows 命令行/shell - 丢弃 UTF-8 BOM

> ID：12851027
> 
> 赞同：5
> 
> 时间：2012-10-12T01:30:41.093
> 
> 标签：windows, command-line, batch-file

[这个问题是关于选择性地将行从一个文件附加到另一个文件的另一个问题](https://stackoverflow.com/questions/12838802/windows-command-line-shell-while-appending-file-to-another-file-how-to-ignore/12838974)的延续。

我正在使用的正则表达式可以很好地匹配要保留/丢弃的行。问题是该文件是由一堆其他文件组成的，有时我想要保留的行开始是 UTF-8 编码文件的第一行。这意味着该`findstr`命令返回如下内容：

```
∩╗┐LineToKeep that started out as the first line in its file
LineToKeep another
LineToKeep more lines
∩╗┐LineToKeep that started out as the first line in its file
LineToKeep more 
```

保证除 BOM 字节外，该行将始终以“LineToKeep”开头。我怎样才能摆脱这三个 UTF-8 BOM 字节，因为这些 windows shell 命令无法正确处理它们？

我希望有一种方法可以将它们删除，或者可能对`findstr`上一个问题的命令进行修改。

由于我知道每一行必须以“LineToKeep”或“∩╗┐LineToKeep”开头，我认为有一种方法可以计算`if (Line[3:10] == "LineToKeep") { Line = Line[3:]; }`每一行的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-12-15T14:16:13.380

[unix 世界](https://unix.stackexchange.com/questions/381230/how-can-i-remove-the-bom-from-a-utf-8-file)的另一种替代方法是就地删除文件中的 BOM：

```
sed -zbi "1s/^\xEF\xBB\xBF//" filepath 
```

这需要从[https://github.com/mbuilov/sed-windows下载](https://github.com/mbuilov/sed-windows)[适用于 windows](https://stackoverflow.com/questions/127318/is-there-any-sed-like-utility-for-cmd-exe)的 sed 4.4，它提供了防止[行尾损坏的](https://stackoverflow.com/questions/4652652/preserve-line-endings#comment82599963_11508669)工作[和](https://www.gnu.org/software/sed/manual/sed.html#Command_002dLine-Options-1)[选项](https://www.gnu.org/software/sed/manual/sed.html#Command_002dLine-Options-1)。[`-z``-b`](https://www.gnu.org/software/sed/manual/sed.html#Command_002dLine-Options-1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T19:22:44.137

我最终在 Windows cmd 中调用 PowerShell：

```
powershell . "Get-ChildItem . | Select-String '^LineToKeep' | foreach {$_.Line}" 
```

# java - Java Pattern 不返回最左边的匹配

> ID：12851029
> 
> 赞同：0
> 
> 时间：2012-10-12T01:31:22.087
> 
> 标签：java, regex

我必须解析程序的输出来搜索错误。错误表示为：

> [(FieldName/Value) = (**短语**/ **What is Up John Carl?** ) 失败的规则**字母数字**] [(FieldName/Value) = ( **newLabel** / **Óscar's IPad** ) 失败的规则**非法字符**]

每行可能有多个错误，对于每个错误，我都想检索粗体字/句子。为了做到这一点，我正在创建一个正则表达式，如下所示：

```
static String s1 = Pattern.quote("[(FieldName/Value) = (");
static String s2 = Pattern.quote(") failed rule");
static String s3 = Pattern.quote("]");
static Pattern p = Pattern.compile(s1 + "(\\w+)/(.+)" + s2 + "(.+)" + s3);
while (matcher.find()) {
    String token = matcher.group(1);
    sb.append("#");
    sb.append(token);
    token = matcher.group(2);
    sb.append("#");
    sb.append(token);
    token = matcher.group(3).trim();
    sb.append("#");
    sb.append(token);
} 
```

但输出是：

```
#phrase#What is Up John Carl?) failed rule alphanumeric] [(FieldName/Value) = (newLabel/Óscar's IPad#illegalchars 
```

所以它不会返回两场比赛，只是一场。它将第二组与字符串的其余部分匹配，而不是停在第一组`"failed rule"`。我想这是由于`(.+)`模式中的第一个，但问题是任何东西都可以进入那里，所以我需要`(.+)`. 任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T03:35:43.853

正如您在[本教程](http://docs.oracle.com/javase/tutorial/essential/regex/quant.html) `(.+)`末尾看到的那样是**Greedy**，因此它将搜索适合正则表达式的最大子字符串，例如在`"(ab)(cd)"`正则表达式`(.+)`中将返回`ab)(cd`。

你想要的是**Reluctant 量词** `(.+?)`（后面有`?`标记`+`）。由于该正则表达式将尝试找到与您的正则表达式匹配的最小子字符串

`"(ab)(cd)"`with`(.+?)`会找到`ab`and `cd`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T03:23:04.433

您应该能够使量词不贪婪。你用“？”做这个 象征。

```
static Pattern p = Pattern.compile(s1 + "(\\w+)/(.*?)" + s2 + "(.*?)" + s3); 
```

看看 SO 中的另一个例子：

[Java中的非贪婪正则表达式](https://stackoverflow.com/questions/8931183/non-greedy-regular-expression-in-java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T03:21:01.203

```
Pattern p = Pattern.compile(s1+"(\\w+)/(.*?)" + s2 + "(.*?)" + s3); 
```

# iis - 覆盖子站点的 IIS 重写规则？

> ID：12851032
> 
> 赞同：8
> 
> 时间：2012-10-12T01:31:54.597
> 
> 标签：iis, rewrite

我想强制所有入站连接为我的站点恢复为 HTTPS。在 StackOverflow.com 上搜索答案，得到以下代码：

```
<rewrite>
    <rules>
        <rule name="Redirect to HTTPS" stopProcessing="true">
                <match url="(.*)" />
                <conditions>
                    <add input="{HTTPS}" pattern="^OFF$" />
                </conditions>
            <action type="Redirect" url="https://{HTTP_HOST}/{R:1}" redirectType="Permanent" />
        </rule>
     </rules>
</rewrite> 
```

这很好用。现在每个进入[http://mySite.com](http://mySite.com)的人都会被重定向到[https://mySite.com](https://mySite.com)。

mySite.com 有一个子应用程序，可在 mySite.com/ajax/ 访问。我不希望此子应用程序的入站连接受到重写；连接到 /ajax 子应用程序时，应维护用户指定的原始协议（http 或 https）。我应该在这个子应用程序的 web.config 文件中放置什么来否定发生在父级的重写？

（我希望 /ajax 子站点免于 https 重写的原因是因为它可以从基于 HTTP 的第三方网页访问。如果调用 /ajax 的第三方页面是 HTTP（不是HTTPS），然后我想在调用时保留 HTTP'ness。）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-30T23:51:54.080

以下 web.config 片段应该做你想做的事。它会删除此应用程序的所有重写规则。

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <rewrite>
            <rules>
                <clear />
                <!-- Insert rules for this application (if any) **below** the "clear" -->
            </rules>
        </rewrite>
    </system.webServer>
</configuration> 
```

# c++ - c++中的调车场算法

> ID：12851033
> 
> 赞同：3
> 
> 时间：2012-10-12T01:31:55.770
> 
> 标签：c++, infix-notation, postfix-notation, shunting-yard

我需要一个接受中缀字符串（如“3 + 4 * 9”）并将其转换为后缀（如“4 9 * 3 +”）的函数。

我让它工作，直到你在括号内加上括号。我整天都在努力，无法弄清楚我做错了什么——也许有头脑的人能看到它吗？我觉得我真的很亲近！

谢谢！这是代码：

```
 string ExpressionManager::infixToPostfix(string infixExpression)
    {
cout << "itop Testing : " << infixExpression << endl;
string posnums = "0123456789";
string posops = "+-*/%(){}[]";
string onlyops = "+-/%*";
string space = " ";
string openbra = "([{";
string closebra = ")]}";
stack <string> nums;
stack <string> ops;
string output = "";

//check to make sure expression is valid

if (!(isBalanced(infixExpression)))
{
    cout << "Infix Expression isn't balanced!" << endl;
    return "invalid";
}

for (int i=0; i<infixExpression.size(); i++)
{
    if ((posnums.find(infixExpression[i])!=string::npos) || (posops.find(infixExpression[i])!=string::npos) || (space.find(infixExpression[i])!=string::npos))
    {}

    else
    {
        cout << "Invalid character " << infixExpression[i] << " found." << endl;
        return "invalid";
    }
}

int numcount = 0;
int opcount = 0;
//Numbers vs. Operators
for (int i = 0; i < infixExpression.size(); i++)
{
    if (posnums.find(infixExpression[i]) != -1)
    {

        while(infixExpression[i] != ' ')
        {
            if (i == (infixExpression.size()-1))
                break;
            i++;
        }
        numcount++;
    }

    if (onlyops.find(infixExpression[i]) != -1)
    {
        opcount++;
    }
}

if (opcount == (numcount - 1))
{
}
else
{
    cout << "Bad operators to numbers ratio!" << endl;
    return "invalid";
}

//Get rid of proceeding whitespaces.
int safety = 0;
int net = infixExpression.size();

while (infixExpression[0] == ' ')
{
    infixExpression.erase(0,1);
    safety++;

    if (safety>=net)
        break;
}

//cout << "At this point, it is " << postfixExpression << endl;

//the fun part! Set up stacks

for (int i =0; i< infixExpression.size(); i++)
{
    cout << "It gets hung up on character " << infixExpression[i] << endl;
    if(openbra.find(infixExpression[i]) != -1)
    {

        string word = "";
        word += infixExpression[i];
        ops.push(word);

        cout << "Pushing onto stack: " << word << endl;
    }
    else if(closebra.find(infixExpression[i]) != -1)
    {
            cout << "contents of remaining ops stack: "<< endl;
            stack <string> temp;
            temp = ops;
                for (int j = 0; j < temp.size(); j++)
                {
                    cout << "\t" << temp.top() << endl;
                    temp.pop();
                }

        while (openbra.find(ops.top()) == -1)
        {

            output += " " + ops.top();
            cout << "Pushing from stack: " << ops.top() << endl;
            ops.pop();
        }

        cout << "Pushing from stack: " << ops.top() << endl;
        ops.pop();

    }

    else if (posnums.find(infixExpression[i]) != -1)
    {

        string word = "";
        while (infixExpression[i] != ' ')
        {
            word += infixExpression[i];
            i++;
            if (i== infixExpression.size())
                break;
        }
        output += " " + word;

    }

    else if (onlyops.find(infixExpression[i]) != -1)
    {

        if (ops.size() == 0)
        {
            string word = "";
        word += infixExpression[i];
        ops.push(word);
        }
        else
        {
        int o1p = 0;
        int o2p = 0;

        if ((infixExpression[i] == '+') || (infixExpression[i] == '-'))
            o1p = 0;
        else
            o1p = 1;

        if ((ops.top() == "+") || (ops.top() == "-"))
            o2p = 0;
        else
            o2p = 1;

        while ((ops.size() > 0) && (o1p <= o2p))
        {
            output += " " + ops.top();
            cout << "(odd) Pushing from stack: " << ops.top() << endl;

        if ((ops.top() == "+") || (ops.top() == "-"))
            o2p = 0;
        else
            o2p = 1;

        if (ops.size() > 0)
        {
            ops.pop();
        }
        else
        {
            break;
        }
        }

        string word = "";
        word += infixExpression[i];
        ops.push(word);
        }
    }

}

while (output[0] == ' ')
{
    output.erase(0,1);
}

return output;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T07:46:09.347

我的建议是你直接去相关的维基页面描述

1.  [调车场算法](http://en.wikipedia.org/wiki/Shunting-yard_algorithm)
2.  [逆波兰表示法](http://en.wikipedia.org/wiki/Reverse_Polish_notation)

我已经在 J​​ava 和 C++ 中实现了 Shutting Yard 算法，发现 Wiki 页面非常好，是一个很好的帮助来源。它们足够详细，使您能够以您喜欢的任何编程语言逐步实现算法。

另一个建议：相当熟悉堆栈和队列的实际使用，因为它们在这些算法中无处不在。

请参阅此[博客文章](http://www.technical-recipes.com/2011/a-mathematical-expression-parser-in-java/)，了解上述 Shutting Yard 算法的一些 C++ 和 Java 实现。

如果您希望包含其他数学运算符（sin、cos、log 等）和更复杂的表达式和子表达式，它还包含进一步的部分（正在进行中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-13T16:34:10.830

[这](http://pastebin.com/P4Gb9DX0)是解决方案的（最后一个版本）。在某些步骤中，它使用 Dijkstra 的调车场算法（如果我们以正确的方式遍历它，则在`traverse()`成员函数member的末尾`output_`包含表达式的反向波兰符号形式）。`input_`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T01:46:20.100

我个人认为Shunting-yard算法你必须更加努力学习

因为你说输出就像 "4 9 * 3 +" ，但是我读过的关于算法和堆栈操作的内容应该是（像 "9 4 * 3 +"）

重要的问题是在对数和算子进行分类后，根据设置的要弹出算子的条件，从算子栈中全部弹出，并压入数栈

# javascript - javascript检测是否存在div类并更改不同div的innerHTML（如果为真）

> ID：12851037
> 
> 赞同：0
> 
> 时间：2012-10-12T01:32:34.587
> 
> 标签：javascript, html, css, if-statement

我维护（但没有开发）在其博客页面上有评论表单的 ASP 站点。添加评论时，页面会显示一个新的 div，其样式为“comments-wrap”类。如果还没有评论，则该 div 根本不会出现。它不需要我们的 ID，因为页面上可能最终会有多个评论。

我想向空的页面添加一个新的 div（可能使用   或样式 display:none），除非脚本检测到“comments-wrap”类的存在。

例如，让我们调用新的 div 。我希望它一直出现在页面上（例如 ），但是当页面上检测到“comments-wrap”类时，空间会变为“Previous Comments”。

到目前为止，我有：

```
<script>
function myFunction() {
if ($(".comments-wrap")[0]) { 
document.getElementById("comments-previous").innerHTML="Previous Comments";
}
}
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T01:54:28.610

如果您使用 jquery`.length`来查找当前匹配的元素数

```
<script>
   $(document).ready(function(){
       if ($(".comments-wrap").length) { 
          $("#comments-previous").html('Previous Comments');
       }
   });
</script> 
```

**编辑**

```
<!DOCTYPE html>
<html>
<head>
<title>Untitled</title>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>

<script>
$(document).ready(function(){
    if ($(".comments-wrap").length) { 
        $("#comments-previous").html('Previous Comments');
    }
});
</script> 
</head>
<body>
 <div class="comments-wrap"></div>
 <div id="comments-previous"></div>
</body>
</html> 
```

# linux - 在 Linux 上的特定日期/时间执行 a.out

> ID：12851039
> 
> 赞同：0
> 
> 时间：2012-10-12T01:33:10.513
> 
> 标签：linux, time

我需要在特定日期/时间开始“a.out”。例如，我想非常准确地在下午 12:10:30 开始“a.out”。任何想法表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T01:35:11.930

这就是`cron`和/或`at`的目的。

由于`cron`只有一分钟的分辨率，您可能需要设置一个在 12:09 运行的脚本。

然后，该脚本将进入一个紧密循环，检查日期和时间，直到正好是 12:10:30，然后运行您的“真实”代码。

因此，您的`cron`输入将是：

```
9 12 * * * /mydir/myscript 
```

会`/mydir/myscript`是这样的：

```
#!/bin/bash
while [[ $(date +%H%M%S) -lt 121030 ; do
    sleep 1
done
/mydir/myexecutable 
```

那就是如果您希望它在一天中的同一时间运行很多天。对于一次性执行，您仍然可以使用脚本，但使用`at`它来运行它（时间字符串为`YYYYMMDDhhmm`）：

```
at -f /mydir/myscript -t 201212311209 
```

或者，如果您`at`足够先进，它可能允许在`-t`选项中进行亚分钟规范，以便您的包装作业不会停留太久（时间字符串`YYYYMMDDhhmm.ss`）：

```
at -f /mydir/myscript -t 201212311210.25 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T01:36:07.030

这很简单：

```
at 1210 <<< "sleep 30; /path/to/a.out" 
```

`at`command 专门设计用于在特定时间运行命令。`cron`不同的是，它是为重复任务而设计的。

看`man 1 at`

# java - BestBefore 拼图测试用例

> ID：12851046
> 
> 赞同：0
> 
> 时间：2012-10-12T01:34:03.380
> 
> 标签：java, testing

我为这个[谜题](http://www.spotify.com/us/jobs/tech/best-before/)编写了以下代码。我提出了一个我认为涵盖所有情况的测试输入列表，并且代码通过了所有这些情况。但是机器人不接受我的回答。看在 FSM 的份上，我需要解决这个问题，这样我今晚才能入睡。任何人都可以建议我的代码将失败的测试用例吗？

主类：

```
package bestBefore;

import java.text.SimpleDateFormat;
import java.text.DateFormat;
import java.util.List;
import java.util.ArrayList;
import java.util.Date;
import java.util.Calendar;
import java.util.GregorianCalendar;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

public class BestBefore {

    private String d_inputDate;
    private List<Date> d_validDateList ;
    private static String s_dateFormat = "yyyy-MM-dd";
    private static DateFormat s_df ;
    private static Calendar s_upperBoundary ;
    private static Calendar s_lowerBoundary ; 

    static {
        s_df = new SimpleDateFormat(s_dateFormat);
        s_df.setLenient(false);
        s_upperBoundary = new GregorianCalendar();

            s_upperBoundary.clear();
        s_upperBoundary.set(3000,Calendar.JANUARY,1);
        s_lowerBoundary = new GregorianCalendar();
            s_lowerBoundary.clear();
        s_lowerBoundary.set(1999,Calendar.DECEMBER,31);
    }

    public static void main ( String[] args ) {

        String inputDate = "";;
        if ( args.length == 0 ){
            //sop("Usage: java BestBefore <input_date>");
            try {
                BufferedReader stdin = new BufferedReader(new InputStreamReader(System.in));
                inputDate = stdin.readLine();
            }catch (IOException ioe) {
                sop(ioe.getMessage());
            }
        }else{
            inputDate = args[0];
        }

        BestBefore bb = new BestBefore(inputDate);
        sop(bb.getEarliestDate());
    }

    public BestBefore ( String inputDate ) {
        d_inputDate = inputDate;
        d_validDateList = new ArrayList<Date> ();
        processDate();
    }

    private void processDate() {

        if ( d_inputDate == null)
            return;

        String[] dates = d_inputDate.split("/");
        int[] datesInt = new int[3];  // to store the parseInts

        if( dates.length !=3 ) {
            return;
        }

        int yearInd = -1;
        try {
        // check if any 4 digits , then that is the year and also integer parse
        for ( int i = 0 ; i < dates.length ; i ++ ) {

            if(dates[i].length() == 3)
                return;

            //Covnert to int 
            datesInt[i] = Integer.parseInt(dates[i].trim());

            if (datesInt[i] > 31){ // if number greater than 31 then year  : TODO check month too and avoid looops
                if ( yearInd == -1) {
                    yearInd = i;
                }
                else{
                    return;
                }
            }

            // Check for negative numbers
            if ( datesInt[i] < 0 ) {
                return;
            }
        }

        //ProcesDates
        if ( yearInd != -1 )  // we have a year / cuts down number of date parses by factor of 3
            haveYear(datesInt,yearInd);
        else
            noYear(datesInt);

    }catch (Exception e ) { // not a number
        return;
    }

    }

    private void haveYear(int[] dates, int yearInd ) {
        String dateToParse = padYear(dates[yearInd]+"") + "-";
        int[] mD = new int[2];

        for ( int i = 0,j = 0   ; i < dates.length ; i ++ ) {
            if ( i == yearInd ) 
                continue;
            mD[j] = dates[i] ;
            j++;
        }

        // parse date and rotate  and repeat
        for ( int i = 0 ; i < mD.length ; i ++ ) {
            try { 
                Date date = s_df.parse( dateToParse+mD[0]+"-"+mD[1] );
                if ( (s_lowerBoundary.getTime()).before(date) && (s_upperBoundary.getTime().after(date)))
                    d_validDateList.add(date );
            }catch ( Exception e ) {
                // Not a valid date
                continue;
            }finally {
                mD = rotate(mD);
            }
        }
    }

    private void noYear(int[] dates){
        // parse  and repeat
        for ( int i = 0 ; i < dates.length ; i ++ ) {
            haveYear( dates, i );
        }
    }

    public String getEarliestDate( ) {

        try{
            Date earliestDate = null;

            if (d_validDateList.size() == 0) {
                return d_inputDate+" is illegal";
            }

            // get the earliest date
            for ( Date dt : d_validDateList ) {
                if ( earliestDate == null ) {
                    earliestDate  = dt;
                    continue;
                }
                if ( dt.before(earliestDate) )
                    earliestDate = dt ;
            }

            return (s_df.format(earliestDate)) ;
        }
        catch(Exception e ){
            return d_inputDate+" is illegal";
        }

    }

    //
    // Static utility methods follow
    //

    private static void sop ( String message ) {
        System.out.println(message);
    }

    private static int[] rotate(int[] a){
        if (a.length ==0 )
            return a;

        int firstElement = a[0];

        for ( int i = 0 ; i < a.length-1 ; i ++ ) {
            a[i]= a[i+1];
        }
        a[a.length-1] = firstElement;
        return a;
    }

    private static String padYear(String s ){
        if ( s.length() > 3) 
            return s;

        String frt =  (String.format("2%1$#3s", s)).replace(" ","0");
        return ( frt) ;
    }

    // Invalid Date Exception Class

} 
```

测试类：

```
 package bestBefore;

public class BestBeforeTest {

    private static String[] dta = {"01/01/01",
        "999/12/31",
        "12/12/12",
        "0/0/0",
        "4/1/5",
        "999/12/12",
        "10/11/12",
        "qwe/1/1",
        "-1/10/10",
        "1000/1/1",
        "2100/2/29",
        "31/11/76",
        "2400/2/29",
        "2404/2/29",
        "2401/2/29",
        "",
        "1/1/",
        "000000000000/ /",
        "1/1/1.0",
        "1/1/1",
        "1/2/3",
        "30/5/09",
        "26/12/12",
        "36/12/12",
        "0\3\33",
        "1.1/3.0/3",
        "999/31/12",
        "1/1/000",
    "02/4/67",
"",
"unknown", 
"2012-10-10", 
"20121010", 
"2012/10/10/",
    "2012/10/10" ,
    "2012/1/10",
    "2012/10/1", "12/10/10", "2/10/10",
    "2/10",
    "2",
            "31/12/2999",
            "1/1/3000"
    };

    public static void main ( String[] args){

        for ( int i = 0; i < dta.length ; i ++ )    {
            BestBefore bb = new BestBefore(dta[i]);
            System.out.println(bb.getEarliestDate());
        }
    }
} 
```

试验结果：

```
2001-01-01
999/12/31 is illegal
2012-12-12
0/0/0 is illegal
2001-04-05
999/12/12 is illegal
2010-11-12
qwe/1/1 is illegal
-1/10/10 is illegal
1000/1/1 is illegal
2100/2/29 is illegal
31/11/76 is illegal
2400-02-29
2404-02-29
2401/2/29 is illegal
 is illegal
1/1/ is illegal
000000000000/ / is illegal
1/1/1.0 is illegal
2001-01-01
2001-02-03
2005-09-30
2012-12-26
2036-12-12
0 is illegal
1.1/3.0/3 is illegal
999/31/12 is illegal
1/1/000 is illegal
2/10 is illegal
2067-02-04
 is illegal
unknown is illegal
2012-10-10 is illegal
20121010 is illegal
2012-10-10
2012-10-10
2012-01-10
2012-01-10
2010-10-12
2002-10-10
2/10 is illegal
2 is illegal
2999-12-31
1/1/3000 is illegal
null is illegal 
```

谢谢大家。我相信这将是提出测试用例的一个很好的学习经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T02:46:23.840

下面的代码怎么样：

```
public static void main ( String[] args){

  for ( int i = 0; i < dta.length ; i ++ )    {
    BestBefore bb = new BestBefore(***null***);
    System.out.println(bb.getEarliestDate());
  }

} 
```

所以你的测试用例应该详尽地包括特殊情况。例如

```
null
""
"unknown"
"2012-10-10"
"20121010"
"2012/10/10/"

"2012/10/10"
"2012/1/10"
"2012/10/1"
"12/10/10"
"2/10/10"
"2/10"
"2" 
```

# orbeon - eXist db 文件（words.dbx 和 dom.dbx）的大小不断增加，如何减少它们？

> ID：12851051
> 
> 赞同：0
> 
> 时间：2012-10-12T01:35:06.057
> 
> 标签：orbeon, exist-db

我们正在使用使用 eXist 数据库 1.2.4 的 Orbeon 表单 3.7.1。我们遇到的问题是 .dbx 文件的大小即使在会话过期后仍会不断增加。

特别是 words.dbx 和 dom.dbx。清除它们的唯一方法（我知道）是重新启动 Orbeon。

这个问题类似于[Growing eXist database](https://stackoverflow.com/questions/10071135/growing-exist-database)，但我们使用的是Orbeon 3.7，目前我们没有时间升级到3.8。

所以我的问题是：如何在不重新启动 Orbeon 的情况下减小这些文件的大小？有解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T23:03:03.637

抱歉，但我认为 Orbeon Forms 3.7 没有办法解决这个问题，当时它使用 eXist 来存储缓存信息。希望，由于 3.7 现在已经超过 3 年了，而且您的应用程序已经持有了这么久，它应该能够持有更长的时间，足以让您有时间升级到 3.9 或 4.0，这指日可待.

# php - 带有标签的 Onclick 返回值

> ID：12851054
> 
> 赞同：0
> 
> 时间：2012-10-12T01:35:58.913
> 
> 标签：php, javascript, html

嗨，我试图用这行代码实现的是返回一个值，以供同一页面中的 SQL 语句使用，目前做错了我猜你不能将**值**插入标签元素。将不胜感激有关这样做的任何建议。

```
 <td align="center">
                        <label value='yearlvl' 'onclick="this.form.submit();">
                        <?php echo $row[0];?></label>
      </td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T01:37:34.283

你之前有一个额外的报价`onclick`。这可能会导致你的问题..

它应该是：

```
<td align="center">
    <label value='yearlvl' onclick="this.form.submit();">
        <?php echo $row[0];?>
    </label>
</td> 
```

# android - android - 无法将明显的整数解析为整数

> ID：12851063
> 
> 赞同：1
> 
> 时间：2012-10-12T01:36:36.343
> 
> 标签：android, sqlite

对于我正在为客户开发的应用程序，我有一个大型高尔夫球场 SQLite 数据库，该数据库在版本化更新中重新填充了新数据，即将新数据添加到数据库中已有的现有记录中。

这些更新的一部分是数字和文本数据的混合，这些数据会自动导出为带有逗号分隔符的 .txt 文件（但也可以导出为 .rtf，尽管我认为 .txt 会更容易使用）。[此 Pastebin 链接](http://pastebin.com/CahfrgVk)中给出了此类输出 .txt 文件的示例。

处理读取 .txt 文件并从每一行中获取每个值的代码是

```
// Insert records from csv file into database
        BufferedReader reader = new BufferedReader(new InputStreamReader(in_s));
        try {
            String line;
            while ((line = reader.readLine()) != null) {
                String[] RowData = line.split(", ");
                int numEntries = RowData.length;
                if(numEntries == 5) {
                    // Course Insertion Row
                    //                      "Scenic Hills CC - WHITE", 70.0, 124, "Pensacola", "FL"
                    courseHelper.createCourse(RowData[0], Double.valueOf(RowData[1]), Integer.parseInt(RowData[2]), RowData[3], RowData[4]);
                    mCurrentLine++;
                }
                else {
                    // Hole Insertion Row
                    //                      1, 1, 4, 416
                    holeHelper.createHole(Integer.parseInt(RowData[0]), Integer.parseInt(RowData[1]), Integer.parseInt(RowData[2]), Integer.parseInt(RowData[3]));
                    mCurrentLine++;

                }                   
            }
        } 
```

希望尝试自己处理课程数据库更新的客户不是非常精通技术，而是坚持使用他向我发送每次更新的新 .txt 文件的方法。

但是，随着我收到的一些 .txt 文件越来越大，我开始在每 100 行大约 2 行出现“java.lang.NumberFormatException：无法将'6'解析为整数”类型错误该文件的长度，除了 6 之外的不同数字，取决于 .txt 文件的哪一行导致异常。

在 Bless Hex Editor 中打开 .txt 文件，我注意到在导致 NumberFormatException 的每一行的开头，非 ascii 字符（以十六进制表示，EF BB）就在前导整数之前。显然，这个非 ASCII 字符正在使`parseInt()`方法崩溃。

经过漫长的解释，我有两个主要问题：

1.  即使这些非ASCII字符的放置在整个文件中似乎是伪随机的，解决根问题的最佳方法是什么？
2.  如果无法对#1 进行良好修复，那么在相关活动中读入 .txt 文件之前“清理”它的好方法是什么？

提供的任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T02:33:07.937

它可以是字节顺序标记 (http://en.wikipedia.org/wiki/Byte_order_mark)。EF BB 看起来像是 BOM 的一部分，用于在文本流的开头标识 UTF-8 编码。

我会问客户是如何生成这些文件的。如果任何进程将多个文件混合到一个更大的文件中，它可能会错误地将多个 BOM 吐出到最终流中。

如果您无法修复生成这些文件的过程，您可以围绕它编写代码。尝试捕获数字格式异常，倒回流（如果可能/必要）并测试是否是这两个字节引起的。如果是这样，丢弃这两个字节并解析下一个整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T06:50:42.507

`parseInt`为检测 BOM ( `if (str.startsWith("\uFEFF"))`) 并删除它编写一个包装函数。

# cruisecontrol.net - CruiseControl.NET 中 NDepend 的评估问题

> ID：12851065
> 
> 赞同：3
> 
> 时间：2012-10-12T01:36:45.920
> 
> 标签：cruisecontrol.net, ndepend

我正在尝试将 NDepend 与 CruiseControl.NET 集成。但是，当我尝试构建任何项目时，出现以下构建错误：“错误：评估问题：您的评估期尚未激活。请运行 Visual NDepend 开始评估”。我已经评估了我的 NDepend 试用版，并在 ccnet 配置文件中设置了 NDepend 任务。请建议我能做什么！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T13:39:31.673

评估模式可能会针对系​​统上的每个用户触发。使用用于运行 CruiseControl.NET 实例的用户身份在构建服务器上手动调用 NDepend，关闭评估对话框，然后再次尝试构建。

# .htaccess - htaccess mod-rewrite 文件名，如何格式化正则表达式

> ID：12851066
> 
> 赞同：0
> 
> 时间：2012-10-12T01:36:51.647
> 
> 标签：.htaccess, mod-rewrite

我的根目录中有一个名为 images 的目录。我有一个 number-category.jpg 的命名约定。我正在通过 PHP 脚本使用此约定，并希望在我的 htaccess 中有一个 RewriteRule，它可以为 SEO 目的对 word-word-category-number.jpg 做一些事情。

所以曾经的' `10-abstract.jpg`'现在是' `fine-art-abstract-art-10.jpg`'

我正在阅读一些教程，但没有成功：

```
RewriteRule ^([0-9]-[a-z])-art.jpg$ /2/art/$1-$2.jpg [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T01:53:34.873

对于`word-word-category-number.jpg`，请尝试：

```
RewriteRule ^[^-]+-[^-]+-([^-]+)-([0-9]+)\.jpg$ /2/art/$2-$1.jpg [L] 
```

但这不适用于您的示例，因为`fine-art-abstract-art-10.jpg`is `word-word-category-word-number.jpg`. 您可以为此添加另一个部分：

```
RewriteRule ^[^-]+-[^-]+-([^-]+)-[^-]+-([0-9]+)\.jpg$ /2/art/$2-$1.jpg [L] 
```

这将需要一个 request`http://your.domain.com/fine-art-abstract-art-10.jpg`和 serve `/2/art/10-abstract.jpg`。

# twisted - 我应该如何在 for 循环中使用 deferLater

> ID：12851070
> 
> 赞同：4
> 
> 时间：2012-10-12T01:37:23.630
> 
> 标签：twisted

它不一定必须在 for 循环中，但您将如何处理数据，将扭曲的异步“睡眠”放在中间的数据列表中。本质上，我想完成这样的事情，这显然是行不通的。它直接通过循环运行，没有睡眠。deferLater 是否只需要在方法上使用？如果是这样，我将如何使用扭曲实现相同的结果，以便在每个数据库保存条目之间有一个“睡眠”？

```
 @defer.inlineCallbacks
 def queryDatabase(self, kwargs):

    #Just testing deferLater
    for x in xrange(10000):
        yield txmongo.my_db.test_collection.save({"something":x * time.time()},safe=True)
        d = deferLater(reactor, 5, lambda: none)
        print str(datetime.datetime.now()) + ' ==> ' + str(x) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T02:30:21.770

永远不会失败，只需要写下问题，我就会找到答案。这似乎对我有用：

```
@defer.inlineCallbacks
def query(self, kwargs):

    # insert some test data
    for x in xrange(10000):
        print str(datetime.datetime.now()) + '===>' + str(x)
        yield deferLater(reactor, 5, lambda: none)

@defer.inlineCallbacks
def makeRequest(self, kwargs):
    g = yield self.query(kwargs) 
```

# android - 如何在Android对话框上完全遮住背景？

> ID：12851071
> 
> 赞同：2
> 
> 时间：2012-10-12T01:37:27.323
> 
> 标签：android

我正在展示一个带有对话框主题的活动 (android:theme="@android:style/Theme.Dialog")

当我弹出这个活动时，我想完全屏蔽后台活动。目前，下方的Activity杂乱无章，虽然模糊，但还是太显眼了。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T09:17:05.333

尝试这个：

```
WindowManager.LayoutParams lp = dialog.getWindow().getAttributes();  
lp.dimAmount=1.0f;
dialog.getWindow().setAttributes(lp);  
dialog.getWindow().addFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T01:43:39.710

制作一个文件`style.xml`并把这个xml代码

```
<style name="blackDialog" parent="android:style/Theme.Dialog" >
        <item name="android:background">@null</item>    
</style> 
```

在您的清单文件`android:theme="@style/AppTheme"`中，在您的活动中添加属性

```
<activity android:theme="@style/blackDialog" 
      android:name=".Activity2" 
      android:label="@string/title" /> 
```

# php - 如何将 javascript 对象传递给 PHP 并访问值

> ID：12851072
> 
> 赞同：2
> 
> 时间：2012-10-12T01:37:29.100
> 
> 标签：php, jquery, object, post, json

我需要将 javascript 对象传递给 PHP，然后将其解码为关联数组。我在这个网站上阅读了许多类似的问题，现在用谷歌搜索了几个小时。我的问题是我找不到涵盖双方（javascript 和 PHP）的简单示例。这是我尝试做的简化版本。将数据作为键/值对发布是我可以让任何东西通过的唯一方法。HTML 中有一个 DIV 用于显示答案。我要做的就是确认数据在此代码中通过。

我得到的只是“加载了 POST 数组”，这对我来说表明 POST 数组包含数据，但我要么解码错误，要么错误地访问关联数组。我还阅读了 JQUERY 站点上的 AJAX 和 POST 页面，但这些示例并没有让我到达我需要的地方。如果我为 strob 分配一个简单的字符串值，它就会完美传递。

```
 $(document).ready(function(){
            var obj={};
            obj.value1="foo";
            obj.value2="bar";
            var strob=JSON.stringify(obj);
            $.post("byterecord.php",{sendToValue: strob},
            function(data){
                $('#display').html(data.returnFromValue);
            }, 
            "json");
        }); 
```

字节记录.php

```
<?php
if (isset($_POST['sendToValue'])){

$aarray=json_decode($_POST['sendToValue'],true);
$strval=$aarray[value1];

}else{
$strval = "nothing.";
}

echo json_encode(array("returnFromValue"=>"POST array is loaded with " .$strval));  

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T03:08:51.960

您的代码工作正常：

但是，从控制台检查您的请求时，会生成 PHP 通知：

```
 Notice: Use of undefined constant value1 - assumed 'value1' 
```

要么改变参数

```
 $aarray[value1]; 
```

至

```
 $aarray['value1']; 
```

或者，尝试关闭 error_reporting ：

```
 error_reporting(0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T01:41:32.910

直接传递对象即可：

```
$.post("byterecord.php", obj, function() {}); 
```

然后在php中，您可以通过以下方式获取它：

```
$value1 = $_POST['value1'];
$value2 = $_POST['value2']; 
```

# ruby-on-rails - ActiveAdmin 用户是否已登录？

> ID：12851076
> 
> 赞同：1
> 
> 时间：2012-10-12T01:38:17.187
> 
> 标签：ruby-on-rails, activeadmin

我正在寻找一种方法来检查用户是否从模型中登录到 activeadmin。除非用户登录，否则应拒绝访问特定属性。我希望有这样的东西，但找不到让它工作的方法：

```
class Object < ActiveRecord::Base

  def should_show?

    # find activeadmin user
    if ActiveAdmin.current_admin_user?

      # activeadmin user is logged in
      true

    else

      # not logged in
      false

    end 
  end

end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-03T07:58:23.900

活动管理员使用[设备](https://github.com/plataformatec/devise)进行身份验证。

使用设计的方法 user_signed_in？用于检查登录用户。由于在 active_admin 中用户默认称为 admin_user；用下面的方法检查

`admin_user_signed_in?`

那是在您的代码中替换`ActiveAdmin.current_admin_user?`为`admin_user_signed_in?`

# ruby-on-rails - 短信验证

> ID：12851077
> 
> 赞同：4
> 
> 时间：2012-10-12T01:38:19.473
> 
> 标签：ruby-on-rails, sms

我正在为应用程序创建 SMS 验证，并在此处找到有关 RubySource 的教程：[http](http://rubysource.com/adding-sms-capabilities-to-your-rails-app/) ://rubysource.com/adding-sms-capabilities-to-your-rails-app/ 。

我对 Rails 很陌生，似乎无法弄清楚如何为*Users#new*创建它说我需要在*app/views/users*中创建的视图文件。

希望得到一些帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T02:37:20.287

视图文件没什么特别的，它只是一个普通的文本文件，带有一个人为的扩展名。在这种情况下，您的文件名应该是`new.html.erb`, 在引用的位置。你可以把它变成一个空的文本文件，然后把他们的代码放进去。

文件名是按照惯例派生的——第一部分（new）是动作，第二部分是要渲染的类型（html），第三部分是使用的渲染引擎（erb）。

# mysql - 什么版本的 MySQL 连接器将与 Mono 2.10.1 一起使用

> ID：12851078
> 
> 赞同：1
> 
> 时间：2012-10-12T01:38:25.127
> 
> 标签：mysql, asp.net-mvc-3, asp.net-mvc-2, mono, mysql-connector

我正在尝试将在 mod_mono 下运行的 ASP .NET 2.0 应用程序升级到 4.0。2.0 应用程序使用针对 2.x 平台构建的 DLL 的 6.3.5 版本，并且运行良好。

以下是迄今为止我尝试过的连接器 DLL 版本：

*   6.3.5 - 2x
*   6.3.5 - 4 倍
*   6.5.4 - 4x

我正在添加 mono/4.0/machine.config 像这样：

```
<add name="MySQL Data Provider" invariant="MySql.Data.MySqlClient" description=".Net Framework Data Provider for MySQL"
         type="MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data, Version=6.3.5.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d"/> 
```

PublicKeyToken 对于所有不同的版本似乎都是相同的。

但是，当我运行该应用程序时，我得到了这个：

```
Unhandled Exception: System.IO.FileLoadException: The assembly name is invalid.
  at System.Reflection.AssemblyName..ctor (System.String assemblyName) [0x00045] in /root/mono-2.10.1/mcs/class/corlib/System.Reflection/AssemblyName.cs:93 
  at Mono.CSharp.ImportedAssemblyDefinition.ReadAttributes () [0x000c5] in /root/mono-2.10.1/mcs/mcs/import.cs:1522 
  at Mono.CSharp.MetadataImporter.GetAssemblyDefinition (System.Reflection.Assembly assembly) [0x00028] in /root/mono-2.10.1/mcs/mcs/import.cs:821 
  at Mono.CSharp.ReflectionImporter.ImportAssembly (System.Reflection.Assembly assembly, Mono.CSharp.RootNamespace targetNamespace) [0x00000] in /root/mono-2.10.1/mcs/mcs/reflection.cs:88 
  at Mono.CSharp.DynamicLoader.LoadReferences (Mono.CSharp.ModuleContainer module) [0x0003e] in /root/mono-2.10.1/mcs/mcs/reflection.cs:587 
  at Mono.CSharp.Driver.Compile () [0x00159] in /root/mono-2.10.1/mcs/mcs/driver.cs:1535 
  at Mono.CSharp.Driver.Main (System.String[] args) [0x0003d] in /root/mono-2.10.1/mcs/mcs/driver.cs:243 
```

我读过很多帖子说这个版本有效或那个版本有效，我想知道是否有人确定，所以我不会被卡住下载一大堆 dll 并在没有时从一个跳到另一个工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:41:32.920

我没有弄清楚这一点，但我确实看到另一篇帖子表明他们升级到更高版本的 Mono 并解决了这个问题。

我升级到`2.10.9`并且问题似乎已解决，并且该站点的 MVC2 版本似乎正在运行而没有问题。

我确实遇到了单声道找不到 4.0 连接器的 v6.5.4 的问题，所以我已经恢复到 6.3.5 并且已经解决了这个问题。我正在运行 SubSonic，因此可能与 SubSonic 相关联`6.3.5`，这就是找不到 6.5.4 的原因。

# sql - 我有一个奇怪的错误

> ID：12851080
> 
> 赞同：1
> 
> 时间：2012-10-12T01:39:02.303
> 
> 标签：sql, database

我相信这与我的外键有关，但我真的不明白出了什么问题。这是我得到的错误：

第 1 行的错误 1005 (HY000)：无法创建表 'cse156.Accounts' (errno: 150)

```
 CREATE TABLE `AccountType`(
   `AccountType` varchar(255)NOT NULL,
   `Label` varchar(255) NOT NULL,
   `BaseAPR` float(10) NOT NULL DEFAULT'0.0',
   `BaseFee` float(10) NOT NULL DEFAULT '0.0',
   PRIMARY KEY (`AccountType`)
 );

CREATE TABLE `Accounts`(
   `AccountID` int(10) NOT NULL DEFAULT '0',
   `AccountType` varchar(255) NOT NULL,
   `Balance` float(10) Default '0',
   `DateofCreation` varchar(255),
   `AprAdjustment` float(10) NOT NULL DEFAULT'0.0',
   `FeeAdjustment` float(10) NOT NULL DEFAULT'0.0',
   PRIMARY KEY (`AccountID`),
   FOREIGN KEY (`AccountType`) REFERENCES AccountTypes(`AccountType`)
 );

 INSERT INTO `Accounts` VALUES (867001,'RIRA08',543.23,'2008/03/01',0.0,0.0),(530900,'RIRA08',123.00,'2008/04/05',0.125,3.50),(321455,'GCD1009',1232123.12,'2002/01/05',-1.25,0.0),(392108,'RPSA',450.00,'1994/06/09',0.0,15.00),(32948,'RPSA',25.00,'1997/08/03',0.25,2.50),(90490001,'GCD1009',1000000.50,'2005/03/06',1.25,0.50);

 INSERT INTO `AccountType` VALUES('RIRA08','Roth IRA',2.05,10.00),('GCD1009','Golden Years         Certificate of Deposit',5.05,0.00),('MIRA09','Roth IRA',3.2,0.00),('RPSA','Savings    Advantage',1.85,0.00);

 DROP TABLE IF EXISTS `Customers`;

 CREATE TABLE `Customers` (
   `CustomerID` int(11) NOT NULL DEFAULT '0',
   `CustomerFirstName` varchar(255) NOT NULL,
   `CustomerLastName` varchar(255) NOT NULL,
   `Address` varchar(255) NOT NULL,
   `Email` varchar(255) NOT NULL,
   `Flag` varchar(1) NOT NULL,
   PRIMARY KEY (`CustomerID`),
   FOREIGN KEY (`AccountID`) REFERENCES Accounts(`AccountID`)
 );

 INSERT INTO Customers VALUES (829304,'Anthony','Rizzo','123 A Street,Omaha, NE, 68116','rizzo@cubs.com,arizzo@iowacubs.com','S'),(423904,'Starlin','Castro','456 B Ave., Chicago, IL, 67777','scastro@gmail.com','P'),(423431,'Darwin','Barney','7G North,Le City,ON,E5F456','dbar@yahoo.com,barn@mlb.com,db01@unl.edu','S');

 DROP TABLE IF EXISTS `CustomerAccounts`;

 CREATE TABLE `CustomerAccounts` (
   `CustomerID` int(11) NOT NULL DEFAULT '0',
   `AccountID` int(11)  DEFAULT '0',
   FOREIGN KEY (`AccountID`) REFERENCES Accounts(`AccountID`),
   FOREIGN KEY (`CustomerID`) REFERENCES Customers(`CustomerID`)
 );

 INSERT INTO `CustomerAccounts`VALUES(829304,0), (423904,867001),(423904,530900),(423431,90490001),(423431,32948),(423431,392108); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T01:47:20.853

Errno 150 是一个`FOREIGN KEY`错误，通常是由于数据类型不匹配或缺少列。在您的情况下，这是表名中的拼写错误。

您的表名不正确`AccountTypes`，而不是`AccountType`在`Accounts`FK 定义中：

```
 FOREIGN KEY (`AccountType`) REFERENCES AccountTypes(`AccountType`)
 -------------------------------------------------^^^  Oops, should be AccountType 
```

再往下一点，该`Customers`表接下来将失败，因为没有`AccountID`列：

```
 CREATE TABLE `Customers` (
   `CustomerID` int(11) NOT NULL DEFAULT '0',
   `CustomerFirstName` varchar(255) NOT NULL,
    /* Add the AccountID column for your FK definition */
   `AccountID` INT(10),
   `CustomerLastName` varchar(255) NOT NULL,
   `Address` varchar(255) NOT NULL,
   `Email` varchar(255) NOT NULL,
   `Flag` varchar(1) NOT NULL,
   PRIMARY KEY (`CustomerID`),
   FOREIGN KEY (`AccountID`) REFERENCES Accounts(`AccountID`)
 ); 
```

再进一步，您会在这里遇到问题，因为数据类型`INT(11)`不`AccountID`匹配`Accounts.AccountID`，即`INT(10)`：

```
 CREATE TABLE `CustomerAccounts` (
   `CustomerID` int(11) NOT NULL DEFAULT '0',
   /* Make this INT(10) to match the referenced column */
   `AccountID` int(10)  DEFAULT '0',
   FOREIGN KEY (`AccountID`) REFERENCES Accounts(`AccountID`),
   FOREIGN KEY (`CustomerID`) REFERENCES Customers(`CustomerID`)
 ); 
```

# qooxdoo - QooxDoo 新手：在零件装载机上需要帮助

> ID：12851081
> 
> 赞同：1
> 
> 时间：2012-10-12T01:39:15.903
> 
> 标签：qooxdoo

目前我正在使用 qooxdoo 库开发 RIA 应用程序。

使用 qooxdoo 的部分加载器时出现错误。

这是我的**Application.js**：

```
/* ************************************************************************
#asset(crmv2/*)
************************************************************************ */
qx.Class.define("crmv2.Application",
{
members :{
 main : function(){
  // Call super class
  this.base(arguments);

  // Enable logging in debug variant
  if (qx.core.Environment.get("qx.debug"))
  {
    // support native logging capabilities, e.g. Firebug for Firefox
    qx.log.appender.Native;
    // support additional cross-browser console. Press F7 to toggle visibility
    qx.log.appender.Console;
  }

  /*
  -------------------------------------------------------------------------
    Below is your actual application code...
  -------------------------------------------------------------------------
  */

  /*
  -------------------------------------------------------------------------
    USE AN EXISTING NODE TO ADD WIDGETS INTO THE PAGE LAYOUT FLOW
  -------------------------------------------------------------------------
  */

  // Hint: the second and the third parameter control if the dimensions
  // of the element should be respected or not.
  var htmlElement = document.getElementById("isle");
  var inlineIsle = new qx.ui.root.Inline(htmlElement, true, true);

  // use VBox layout instead of basic
  inlineIsle.setLayout(new qx.ui.layout.VBox);

  // new container
  var container = new qx.ui.container.Composite(new qx.ui.layout.HBox);

  // Create a button
  var button1 = new qx.ui.form.Button("First Button", "crmv2/test.png");
  button1.setAllowStretchY(false);
  container.add(button1);
  container.setPadding(10);

  // spacer
  var spacer = new qx.ui.core.Spacer();
  container.add(spacer, { flex: 1 });

  // create a date chooser component
  var dateChooser = new qx.ui.control.DateChooser;
  container.add(dateChooser);

  // add container to the inline root
  inlineIsle.add(container);

  // Add an event listener
  button1.addListener("execute", function(e) {
    qx.io.PartLoader.require(
      ["testpart"], 
      function()
      {

          this.__MainWindow = new crmv2.MainWindow();
          //this.getRoot().add(this.__MainWindow);

        //   open the window
        this.__MainWindow.center();
        this.__MainWindow.open();
      },
      this);
    var main = new crmv2.MainWindow();
  main.open();
  });

  /*
  -------------------------------------------------------------------------
    ADD WIDGETS WITH ABSOLUTE POSITIONING
  -------------------------------------------------------------------------
  */

  // Create a button
  var button2 = new qx.ui.form.Button("absolutely positioned");

  // Add button to document at fixed coordinates
  this.getRoot().add(button2, {left: 500, top: 310});

  // Add an event listener
  button2.addListener("execute", function(e) {
    alert("I'm an absolutely positioned button!\n" + 
          "I overlay existing content.");
  });

}
}
}); 
```

**主窗口.js**

```
qx.Class.define("crmv2.MainWindow",
{
extend : qx.ui.window.Window,
construct : function()
{
  this.base(arguments, "crmv2");
}
}); 
```

**conf.json**

```
{
  "name"    : "crmv2",
"include" :
[{
"path" : "${QOOXDOO_PATH}/tool/data/config/application.json"
}
],
"export" :
[
"api",
"api-data",
"build",
"clean",
"distclean",
"fix",
"info",
"inspector",
"lint",
"migration",
"pretty",
"profiling",
"source",
"source-all",
"source-hybrid",
"simulation-build",
"simulation-run",
"test",
"test-source",
"translation"
], 
"default-job" : "source-hybrid",
"let" :{
"APPLICATION"  : "crmv2",
"QOOXDOO_PATH" : "../../..",
"QXTHEME"      : "crmv2.theme.Theme",
"API_EXCLUDE"  : ["qx.test.*", "${APPLICATION}.theme.*", "${APPLICATION}.test.*", "${APPLICATION}.simulation.*"],
"LOCALES"      : [ "en" ],
"CACHE"        : "${TMPDIR}/qx${QOOXDOO_VERSION}/cache",
"ROOT"         : "."
},
// You only need to edit the remainder of this file, if you want to customize
// specific jobs, or add own job definitions.
"jobs" :
{
"source":
{
  "packages" :
  {
    "parts"  :
    {
      "boot"     :
      {
        "include" : [ "${QXTHEME}", "crmv2.Application" ]
      },
      "testpart" :
      {
        "include" : [ "crmv2.MainWindow" ]
      }
    }
  }
}

// Uncomment the following entry to add a contrib or library to your
// project; make sure to adapt the path to the Manifest.json; if you are
// using a contrib: library, it will be downloaded into the path specified
// by the 'cache/downloads' config key
/*
"libraries" : 
{
  "library" :
  [
    {
      "manifest" : "contrib://SkeletonApplication/trunk/Manifest.json"
    }
  ]
}
*/

// If you want to tweak a job setting, see the following sample where
// the "format" feature of the "build-script" job is overridden.
// To see a list of available jobs, invoke 'generate.py x'.
/*
,"build-script" :
{
  "compile-options" : 
  {
    "code" :
    {
      "format" : false
    }
  }
}
*/
}
} 
```

我在 FIRBUG 控制台中遇到了这个错误：

**TypeError: parts[i] is undefined
parts[i].load(onLoad, this);**

谁能告诉我怎么了？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T09:14:39.840

您为“源”作业定义了部件 - 您`generate.py source`在加载应用程序之前运行了吗？！

一旦开始运行，不要忘记在 config.json 的“构建”作业中复制部件定义`generate.py build`。

# java - 从不同的类调用方法

> ID：12851082
> 
> 赞同：0
> 
> 时间：2012-10-12T01:39:19.010
> 
> 标签：java

嗨，我仍在学习使用方法，但我的一项任务要求我从不同的 .java 文件中的方法调用方法。

问题是“集合”无法识别，并显示一条错误消息，指出两个“集合”都无法解析为变量。我是否错误地调用了该方法？

这是相关的方法。它来自一个名为 Sets 的 java 文件。

```
public static final int Initial_Pop =
        (int)(EARTH_AT * EARTH_BT * 0.4); 
```

这是我试图调用上述方法的方法..

```
public static void plusPeople (int[][] earth, int newPerson) {

    int [][] earthpopulation = new int [Sets.EARTH_AT][Sets.EARTH_BT];
} 
```

如果我不清楚或没有提供足够的信息，我深表歉意。如果是这样，请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T01:41:36.267

您正在尝试访问 EARTH_AT 和 EARTH_BT，但我不知道它们是否是静态的。即使声明的变量是 INITIAL_ALIVE_COUNT。

还要记住检查两个类是否在同一个文件夹（或包）中。如果没有，则必须导入 Sets 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T01:42:09.610

当您调用`Sets.EARTH_AT`and时`Sets.EARTH_BT`，这些不是方法，而是 Sets 类中的变量。确保这些是 Sets 类中的静态变量

# html - 如何删除虚线边框 Firefox 中的元素？

> ID：12851084
> 
> 赞同：6
> 
> 时间：2012-10-12T01:40:19.543
> 
> 标签：html, css, firefox

在 Firefox（当前版本 14.0.1）`<area>`中，我在[此处（http://mediabrands.com.au/）](http://mediabrands.com.au/)创建的一些标签周围出现了一个虚线轮廓。我不仅看到一条虚线，而且一旦它出现我就无法摆脱它（例如通过单击另一个区域）。

![在此处输入图像描述](../Images/f0b7857c8a6d0e5b5b52cd0eeb327a01.png)

我已经在这里和谷歌搜索了相当长的时间，但仍然没有设法摆脱它们。它们不会出现在任何其他浏览器中。

我尝试过的事情（以及以下所有组合）没有成功：

*   添加`outline: none`到 img、map 和 area 标签（以及它们的`:focus`和`:active`）对应项。
*   添加`border: none`到每个。
*   添加`hidefocus="hidefocus"`到每个。
*   `::-moz-focus-inner{ border: none; outline: none; }`为每个元素添加了各种组合。
*   为每一个添加`.focus(function(){ $(this).blur(); })`（jQuery）。

我相信我已经用尽了我所能遇到的所有信息——还有其他方法可以摆脱这些线条吗？

这是供快速参考的 HTML，以及其中的某些东西可能是我无法摆脱它的原因：

```
<img src="anatomy/dial/components/foundation.png" id="dial-map" usemap="#dial" />
<map name="dial">
    <area title="Ansible" class="tab" id="click-ansible" shape="poly" coords="412,419,376,447,313,474,248,487,247,434,327,415,374,377" href="#">
    <area title="Cadreon" class="tab" id="click-cadreon" shape="poly" coords="487,245,478,313,455,366,416,417,378,380,429,299,434,246" href="#">
    <area title="Orion" class="tab" id="click-orion" shape="poly" coords="418,73,453,117,482,191,484,242,431,244,422,180,378,111" href="#">
    <area title="Ensemble" class="tab" id="click-ensemble" shape="poly" coords="247,1,311,10,368,35,415,70,378,108,312,66,244,53" href="#">
    <area title="Reprise" class="tab" id="click-reprise" shape="poly" coords="73,69,111,39,176,8,242,2,243,53,172,66,112,108" href="#">
    <area title="Magna Global" class="tab" id="click-magnaglobal" shape="poly" coords="245,487,186,481,114,450,71,417,110,377,175,423,246,432" href="#">
    <area title="Airborne" class="tab" id="click-airborne" shape="poly" coords="69,414,37,373,12,316,2,244,55,244,68,322,106,375" href="#">
    <area title="Marketing Sciences" class="tab" id="click-analytics" shape="poly" coords="2,242,11,171,33,120,71,74,109,109,70,168,54,241" href="#">
    <area title="MB3" class="tab" id="click-mb3" shape="poly" coords="257,430,178,422,120,384,82,340,140,305,163,337,206,360,262,364,317,342,348,305,404,340,384,367,324,413" href="#">
    <area title="UM" class="tab" id="click-um" shape="poly" coords="307,134,245,116,246,56,309,68,375,109,418,178,430,237,429,288,404,339,350,303,368,246,358,198,344,169" href="#">
    <area title="Initiative" class="tab" id="click-initiative" shape="poly" coords="80,339,63,289,58,235,72,171,109,112,176,67,243,56,242,119,192,128,152,159,126,206,122,261,137,306" href="#">
    <area title="View Website" id="website" shape="poly" coords="173,330,139,292,133,213,161,167,196,143,245,129,305,146,336,176,359,246,339,300,309,335,260,352,209,351" href="#">
</map> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T01:53:47.617

问题是您在 dial.js 的第 151 行上的模糊焦点功能。删除它可以解决问题。

```
$("img, area, map").focus(function(event) {
    $(this).blur();
}); 
```

为防止聚焦于区域元素，请将 a 设置[`tabindex`](https://stackoverflow.com/a/19000539/900747)为`-1`，即

```
<area tabindex="-1" title="Ansible" class="tab" id="click-ansible" shape="poly" coords="... 
```

演示：http: [//jsfiddle.net/SO_AMK/K8Adx/](http://jsfiddle.net/SO_AMK/K8Adx/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T01:42:28.137

似乎焦点模糊导致了问题：

从 dial.js 中删除：

```
// Prevent focus of areas.
$("img, area, map").focus(function() {
    $(this).blur();
}); 
```

这是我为简化一切而制作的小提琴：http: [//jsfiddle.net/MadLittleMods/gDrAS/](http://jsfiddle.net/MadLittleMods/gDrAS/) 注释和取消注释 javascript 以查看不同的结果。

* * *

模糊和焦点的解决方案是使用`event.preventDefault()`. 因此，您可以将上面删除的内容替换为：

```
// Prevent focus of areas.
$("img, area, map").focus(function(e) {
    e.preventDefault();
}); 
```

还有一个使用属性的`tabindex`修复。`tabindex="-1"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T23:21:42.123

尝试将区域焦点和活动状态设置为边框 0，如下所示：

根据以下问题：[Internet Explorer 9 中图像映射周围的蓝色边框](https://stackoverflow.com/questions/10193613/blue-border-around-image-maps-in-internet-explorer-9)

```
a,
img {
  outline: none;
}
map > area,
map > area:active,
map > area:focus {
  outline: none;
  border: 0;
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-14T22:54:53.963

尝试使用 CSS：`text-decoration:none;`

# c# - MSChart 更新阻止工人头

> ID：12851086
> 
> 赞同：3
> 
> 时间：2012-10-12T01:40:23.157
> 
> 标签：c#

我正在使用 .NET 中的 Microsoft Chart 库。我正在尝试绘制每 10 毫秒从硬件生成的数据。这通常工作正常，除非我移动主窗体。然后更新图表会阻塞工作线程。请参阅随附的代码作为模拟数据的示例。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Diagnostics;
using System.Threading;

namespace ChartTest
{
    public partial class Form1 : Form
    {
        private Worker _worker;
        double oldData;

        public Form1()
        {
            InitializeComponent();
            oldData = 0.0;
            _worker = new Worker();
            _worker.NewDataEvent += new EventHandler(_worker_NewDataEvent);
        }

        void _worker_NewDataEvent(object sender, EventArgs e)
        {
            double data = _worker.GetData();
            Add(data - oldData);
            oldData = data;
        }

        private delegate void AddDelegate(double data);

        public void Add(double data)
        {
            if (chart1.InvokeRequired)
            {
                chart1.Invoke(new AddDelegate(Add), data);
            }
            else
            {
                chart1.Series[0].Points.AddY(data);
            }
        }

        private void btnGo_Click(object sender, EventArgs e)
        {
            _worker.Start();
        }
    }

    public class Worker
    {
        private double data;
        Stopwatch st;
        bool running;

        public Worker()
        {
            data = 0.0;
            st = new Stopwatch();
            running = false;
        }

        public event EventHandler NewDataEvent;

        public void Start()
        {
            running = true;
            Thread t = new Thread(Run);
            t.Start();
        }

        private void Run()
        {
            st.Start();
            while (running)
            {
                Thread.Sleep(10);
                data = (double)st.ElapsedTicks / (double)Stopwatch.Frequency;
                NewDataEvent(this, null);
            }
        }

        public double GetData()
        {
            return data;
        }
    }
} 
```

注意：如有必要，我可以提供设计器代码。

Worker 类运行一个线程，该线程每 10 毫秒生成一些数据。它引发了一个事件，Form1 使用该事件来调用图表中的更新。这通常没问题，除非某些东西延迟了 UI 渲染，例如拖动表单。如果 worker 的 Run() 函数是时间关键的，这是有问题的。有没有办法在不阻塞线程的情况下尽快更新图表？

如果这意味着有时图表需要 20 毫秒才能更新，那很好。我只是希望它尽快更新。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T09:49:57.987

（我假设它是 WPF 并且您的图表只是添加点，而不是具有更多花哨部分（如填充区域）的图表）：

每 10 毫秒意味着您每秒添加 100 个图形对象，如果您的应用程序保持打开状态 1 分钟，您将拥有一个包含至少 6000 个图形对象的图表，并且当您移动主窗口时，UI 需要重绘至少 6000 个图形对象！我认为这是预期的！现在还要添加区域、颜色、厚度和其他东西……实际上 UI 线程已经耗尽。

我认为您首先采用某种数学过程（分析或统计过程，如插值）来产生有意义的采样然后绘制它们更合适。

我不太了解 Win Forms，但我认为这对他们来说也是正确的。

# iphone - Apple 推送通知、注销应用和删除应用问题/解决方案

> ID：12851088
> 
> 赞同：5
> 
> 时间：2012-10-12T01:41:28.043
> 
> 标签：iphone, ios, push-notification, apple-push-notifications

除了在一种情况下，推送通知对我来说效果很好。我们正在开发的应用程序需要您登录/注销，因此当您登录时，服务器会向您发送通知，而当您未登录时，它不应该。

如果用户在登录时删除应用程序，服务器不知道用户已删除应用程序。如果应用程序保持被删除并且服务器尝试发送通知，这不是问题 - 服务器端的 APNS 反馈机制会捕捉到这一点并关闭会话。

如果用户重新安装应用程序怎么办？从服务器的角度来看，他们仍处于登录状态。在应用程序启动时，您可以向服务器发送一条注销消息。如果您不启动应用程序怎么办？该应用程序仍会看到通知！

这是一个我不应该担心的愚蠢的边缘案例吗？或者是否有一种公认的方法来解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T07:23:26.827

您可以做一件事，当设备向服务器发送通知注册请求时，服务器可以检查设备的 UDID，如果发现任何通知，服务器可以将其清除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T02:40:14.827

我想说解决此问题的最佳方法是设置一定的时间（可能是一周或 2 周），如果用户不使用该应用程序或服务器未收到用户的任何数据，则会将其注销.

这样，它会自动将他们注销，如果他们两周没有使用该应用程序，他们将不得不在再次使用该应用程序时登录

# regex - 使用 sed 提取数字而不使用重复修饰符（+、?、{m}）

> ID：12851091
> 
> 赞同：0
> 
> 时间：2012-10-12T01:41:33.050
> 
> 标签：regex, bash, sed

我有这样的事情：

```
plym    fury    77      73      2500
chevy   nova    79      60      3000
ford    mustang 65      45      10000
volvo   gl      78      102     9850
ford    ltd     83      15      10500
chevy   nova    80      50      3500
fiat    600     65      115     450
honda   accord  81      30      6000
ford    thundbd 84      10      17000
toyota  tercel  82      180     750
chevy   impala  65      85      1550
ford    bronco  83      25      9500 
```

我需要创建一个列表，列出所有价格低于 10,000 美元的汽车，雪佛兰除外。该列表应从最低成本到最高排序。

我必须使用`sed`退出选项和正则表达式（不要使用重复）

到目前为止我有这个

```
grep -iv "chevy" cars | sort -nk 5 | sed '/regex$/ q' 
```

我在没有重复的情况下遇到了正则表达式的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T03:02:25.803

这是作业吗？

*   由于您已经按成本升序排序，因此您只需要在成本变为五位数时停止抓取行。
*   `sed '/regex$/q'`当任何匹配时都会停止（因为`q`( *quit* ) 命令） 。`regex$`
*   你已经有了一个`$`匹配行尾的地方，所以你只需要一个`regex`代表五个任意字符（或数字，如果你认为这样更好）的东西。
*   ~~之后，您将需要更多管道命令来获取汽车名称（请参阅`cut`）并删除重复项（请参阅`sort -u`和/或`uniq`）~~

*跟进评论：*

我现在假设通过*重复*，您的意思是不希望您的正则表达式模式包含重复（即`[a-z][a-z][a-z]`）。（我最初以为您的意思是您不想要重复的汽车名称，所以我现在已经删除了那部分。）

您可能会对这些语法感兴趣：

随着：

*   `?`- 零或一
*   `*`- 零个或多个
*   `+`- 一个或多个

还有：

*   `{n}`- 准确的`n`时间
*   `{n,}`-`n`或更多次。
*   `{n,m}`-`n`到`m`次。

您可能还想`-r`在使用这些时指定，这样您就不必逃避所有事情。（例如`sed -r '[a-z]{3}'`，与`sed '[a-z]\{3\}'`.

有关egrep 语法（使用）的更多信息，请参阅下面的正则*表达式。*`man egrep``sed`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T01:50:55.737

您可以更简单地使用`GNU awk`：

```
awk '!/chevy/ && $NF < 10000 { print | "sort -nk 5" }' file.txt 
```

结果：

```
fiat    600     65      115     450
toyota  tercel  82      180     750
plym    fury    77      73      2500
honda   accord  81      30      6000
ford    bronco  83      25      9500
volvo   gl      78      102     9850 
```

更新：

这是一种使用方法`GNU sed`：

```
< file.txt sort -nk 5 | sed -nre '/chevy/d' -e '/.* [0-9]{,4}$/p' 
```

结果：

```
fiat    600     65      115     450
toyota  tercel  82      180     750
plym    fury    77      73      2500
honda   accord  81      30      6000
ford    bronco  83      25      9500
volvo   gl      78      102     9850 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T01:45:56.147

`awk`和`GNU sort`：_

```
awk '!/chevy/{if($5 < 10000){print}}' file.txt | sort -n -k 5 
```

* * *

**输出**

```
fiat    600     65      115     450
toyota  tercel  82      180     750
plym    fury    77      73      2500
honda   accord  81      30      6000
ford    bronco  83      25      9500
volvo   gl      78      102     9850 
```

* * *

`sed`不是为制作算术表达式而设计的。有些人尝试过[Sed 替换可能涉及算术？](https://stackoverflow.com/questions/6958839/sed-substitution-possible-with-arithmetic-involved)

* * *

**另一个使用, 在&`Perl`上测试过的**解决方案**（非常便携）`Minix``Archlinux`**

 **```
perl -lane '
    END{for (sort {$a<=>$b} keys %h) {print $h{$_}}}
    $h{$F[-1] . " " . $F[1]} = join "\t", @F
        if $F[-1] < 10000 && $F[1] ne "chevy"
' file.txt 
```**

# mysql - 我该如何编写这个 MySQL 查询？

> ID：12851094
> 
> 赞同：0
> 
> 时间：2012-10-12T01:42:14.617
> 
> 标签：mysql

我们有一个系统，用户可以向我们发送一袋袋货物。

我正在尝试弄清楚如何使用计算字段来吸引用户，以了解他们发送第三包商品的日期。历史表上指示此事件的状态为“已处理”。如果我只想获取特定包的收到日期，我会写：

```
SELECT bags.created_at FROM history 
WHERE history.state='received' AND history.bag_id LIMIT 1 
```

这是我们的表格：

```
users
  id

bags
  user_id

history
  state
  bag_id
  created_at 
```

最终目标是一个选择查询，它为我们提供用户记录并添加“字段” 3rd_bag_received_at

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T01:49:23.083

您可以`group by`user_id，然后添加一个`having`子句以仅包含具有`count(distinct bag_id) >= 3`.

然后`limit`到3，并`order by`获取最新日期`max(created_at)`

这有帮助吗？

实现看起来像这样：

```
select 
 user.id, 
 max(history.created_at) as third_bag_received_at

from
(

 select 
   user.id, 
   max(history.created_at)

 from 
   users

   inner join bags
   on user.id = bags.user_id

   inner join history
   on bags.id = history.bag_id

 where history.state = 'processed'

 group by
   user.id

 having
   count(history.bag_id >= 3)

 limit 3

 order by 2 -- does this work in mySql? (It means "column 2" in MS SQL)
)

Limit 1 
```

**编辑：如何解决计算列中其他表的连接/聚合问题：**

我可能不会将此添加为计算列，而是创建一个包含此要求所需的任何信息的视图，包括`third_bag_received`基于此查询的列。

但是，如果您确实需要将其实现为表格上的计算列：

我建议创建一个接受您`user.id`作为输入并返回值的用户函数`third_bag_received_at`（同样，基于上述查询的逻辑）。

然后从您的计算列中调用此函数。请参阅@user10635[对此 SO 问题](https://stackoverflow.com/questions/166518/sql-server-2005-computed-column-result-from-aggregate-of-another-table-fields-v)的回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T02:01:46.890

我只是在开发更多的 Sepster 答案以使其清楚。这个问题是不稳定的，因为它没有说桌袋有任何名为bags.id的字段，我必须弥补它。

```
SELECT users.id, MAX(history.created_at) as 3rd_bag_received_at
FROM users LEFT JOIN bags ON (users.id=bags.user_id)
LEFT JOIN history ON(bags.id = history.bag_id)
WHERE history.state='received'
GROUP BY users.id
HAVING COUNT(history.bag_id) >= 3; 
```

# jquery - respond_to do |format| 的错误 在应用程序控制器中

> ID：12851101
> 
> 赞同：-1
> 
> 时间：2012-10-12T01:43:08.123
> 
> 标签：jquery, ruby-on-rails, ajax, json, authentication

我的应用程序控制器中有一个辅助方法，并且根据请求格式我想返回不同的东西。这是方法。

```
def require_facebook_sign_in!
    session[:return_to] = request.url
    unless current_user
      respond_to do |format|

        format.html {redirect_to "/auth/facebook"}
        format.json { status :created , :callback => params[:callback] }
      end

    end
  end 
```

我收到以下错误。我对其进行了调试，并为 respond_to do |format| 引发了此错误

> argumentError（参数数量错误（0 为 2））：
> app/controllers/application_controller.rb:16:in require_facebook_sign_in！'`block (2 levels) in require_facebook_sign_in!'
> app/controllers/application_controller.rb:13:in`

为什么respond_to无法访问辅助方法中的格式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T03:57:49.500

我解决了这个问题。

我在渲染 json 中缺少一个参数

正确的方法是这个 format.json { render json: "errors", status: :unprocessable_entity, :callback => params[:callback] }

# php - PHP 生成的 HTML 输出为 jQuery $.post 请求添加了 \r\n 字符和额外的空格

> ID：12851102
> 
> 赞同：1
> 
> 时间：2012-10-12T01:43:09.603
> 
> 标签：php, .post

我有一个正在实现的登录系统，当我使用从 jQuery $.post 调用的 PHP 脚本时，它会添加 \r\n、一些空格，然后再次添加 \r\n（如使用 firebug 所见）。

我正在尝试返回“成功”一词（如果登录有问题，则返回其他词），以便我可以确定登录请求的状态。在比较之前，我总是可以去掉斜线并修剪输出，但如果我能解决这个原因，我宁愿不必这样做。

这个 PHP 的输出是 "Success\r\n \r\n" 而不仅仅是 "Success" ：

```
<?php
// session_destroy();
$lname = $_POST['lname'];
$passhash = $_POST['pass'];

include 'includes/dbiconnect.php';

$loginStatus = "NA";
$query = "SELECT `txt_LOGINNAME`, `txt_PASSHASH`, `txt_PILOTNAME`, `bool_SYSADMIN` FROM `tbl_staff_details` WHERE `txt_LOGINNAME` = '{$lname}' AND `bool_CURRENT` = 1";
$result = mysqli_query($db_link,$query) or die('cannot open DB for login!');

if (is_null($result)) {
    $result_row_num = 0;
} else {
$result_row_num = mysqli_num_rows($result);
$loginDetail = mysqli_fetch_assoc($result);
}

switch (true) {
    case ($result_row_num == 0):
    $loginStatus = "Not Found";
        break;
    case ($result_row_num > 1):
        $loginStatus = "Too Many";
        break;
    case ($loginDetail['txt_LOGINNAME'] == $lname):
        // The Default:
        $loginStatus = "Incorrect Password";
        // Deviate from default only if PW Hashes match
        if ($passhash == $loginDetail['txt_PASSHASH']) {
            session_start();
            $_SESSION['FullName'] = $loginDetail['txt_PILOTNAME'];
            $_SESSION['SysAdmin'] = $loginDetail['bool_SYSADMIN'];
            $_SESSION['LoginName'] = $loginDetail['txt_LOGINNAME'];
        $_SESSION['lastActivity'] = time();
            $loginStatus = "Success";
        } // if
} // switch

mysqli_close($db_link);
print "{$loginStatus}";
?> 
```

处理此问题的 Javascript 是（包括一些帮助我可视化输入/输出的警报语句）：

```
case (passwordentered != "" && usernameentered != ""):
    $("#errorField").val("I can work with this");
        var passwordhash = CryptoJS.SHA256(passwordentered);
        var str_hash = passwordhash.toString(CryptoJS.enc.Hex);
        alert(passwordhash);
        $.post( 'validatelogin.php' , {lname : usernameentered, pass : str_hash},
            function(output) {
                alert(output);
                switch (output) {
                    case "Success":
                        $("#errorField").val("Login Was Successful");
                        window.location("./daysheets.php");
                        break;
                    case "Incorrect Password":
                        $("#errorField").val("ERROR: Incorrect Password");
                        break;
                    case "Not Found":
                        $("#errorField").val("ERROR: User Not Found");
                        break;
                    case "Too Many":
                        $("#errorField").val("ERROR: Not Unique");
                    default:
                        var loginerror = output + ", Login Err";
                        $("#errorField").val(loginerror);
                }
        });
        break; 
```

如果有人可以告诉我在 jQuery 获取它时将附加字符附加到输出的位置/原因，将不胜感激。

问候

布雷登

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T02:28:00.030

2条建议：

1.  既然是普通话，就设置 header('Content-type: text/plain');
2.  尝试从这个文件和includes/dbiconnect.php 中删除关闭的?>。这些文件中的一个或两个文件中可能有尾随字符返回，这就是您所看到的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T02:26:10.457

如果打开 PHP 标记之前或之后有任何空格，则会将其输出到浏览器。您可以使用 jQuery 的 trim 函数或返回一个 json 数组。

```
<?php
echo json_encode($loginStatus);
?> 
```

您还可以将您的 switch 函数移动到 PHP 文件并输出登录状态消息。

# ios - 使用 UITableViewCellStyleValue1 从 didSelectRowAtIndexPath 获取 detailLabel 值

> ID：12851106
> 
> 赞同：0
> 
> 时间：2012-10-12T01:44:02.243
> 
> 标签：ios, uitableview

我有一个表格视图，右侧有一个详细标签。我已经为我的应用程序委托中的一个变量分配了一个值，一切似乎都运行良好。当我单击一行时，我想为我的详细信息屏幕获取此值。我想要得到的值将放在下面的值@“Test”中。此值当前在每行右侧的详细信息中显示为字符串“Yes”或“No”。

didSelectRowAtIndexPath

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

NSMutableArray *sectionArray = [self.arrayOfSections objectAtIndex:indexPath.section];

appDelegate.selectedSetting = [[NSString alloc] initWithFormat:@"Select value: %@ for %@, in section: %@", @"Test", [sectionArray objectAtIndex:indexPath.row], [self tableView:tableView titleForHeaderInSection:indexPath.section]];

[tableView deselectRowAtIndexPath:indexPath animated:YES];

SettingsViewController *settings = [[SettingsViewController alloc] initWithNibName:@"Settings" bundle:[NSBundle mainBundle]];

[self.navigationController pushViewController:settings animated:YES];
} 
```

cellForRowAtIndex

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

UITableViewCell *result = nil;

if ([tableView isEqual:self.myTableView]){

    static NSString *CellIdentifier = @"CellIdentifier";

    result = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (result == nil){

        result = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier];
    }

    NSMutableArray *sectionArray = [self.arrayOfSections objectAtIndex:indexPath.section];

    result.textLabel.text = [sectionArray objectAtIndex:indexPath.row];

    NSString *res = (NSString *)result.textLabel.text;

    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

    if ([[self tableView:tableView titleForHeaderInSection:indexPath.section] isEqualToString:@"XYZ"]) {

        if ([res isEqualToString:@"ABC"]) {

            result.detailTextLabel.text = appDelegate.my_important_value;                
        } 
    }

    appDelegate.selected_value = result.detailTextLabel.text;

    result.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
}

return result;
} 
```

# json - Golang 中的 JSON RPC 请求与 Gorilla/rpc

> ID：12851109
> 
> 赞同：2
> 
> 时间：2012-10-12T01:44:27.763
> 
> 标签：json, go, rpc, json-rpc

我正在尝试使用该`Gorilla/rpc`包来设置一个 RPC 来接收请求并回复响应（显然）。

首先，我尝试使用提供的示例`Gorilla/rpc`

这是我的代码：

```
type HelloArgs struct {
    Who string
}

type HelloReply struct {
    Message string
}

type HelloService struct{}

func (h *HelloService) Say(r *http.Request, args *HelloArgs, reply *HelloReply) error {
    reply.Message = "Hello, " + args.Who + "!"
    return nil
}

func main() {
    r := mux.NewRouter()

    jsonRPC := rpc.NewServer()
    jsonCodec := json.NewCodec()
    jsonRPC.RegisterCodec(jsonCodec, "application/json")
    jsonRPC.RegisterCodec(jsonCodec, "application/json; charset=UTF-8") // For firefox 11 and other browsers which append the charset=UTF-8
    jsonRPC.RegisterService(new(HelloService), "")
    r.Handle("/api", jsonRPC)

    http.ListenAndServe(":"+port, nil)
} 
```

我有几个问题：

1.  我不确定如何`Access-Control-Allow-Origin`像通常在`http.ResponseWriter`（使用常规网络服务器）上为跨域请求设置标头一样，因为这不以 a`http.ResponseWriter`作为参数。

2.  我实际上会发送什么来访问该`HelloService.Say`方法？我试过了`{ method: "HelloService.Say", params:[{Who: "Me"}]}`，但我明白`405 (Method Not Allowed)`了（不确定这是否是因为我无法发出 x 域请求？）

任何见解都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T05:19:04.600

## **已编辑**：修复“类型同义词”的错误使用

对于 1 号：

`Gorilla/rpc/json`'s `CodecRequest.WriteResponse`（实现`Gorilla/rpc`'s `CodecRequest`）是**[代码](http://code.google.com/p/gorilla/source/browse/rpc/json/server.go#106)**接触`http.ResponseWriter`.

这意味着我们必须有自己的实现`CodecRequest`来设置 CORS 标头。

服务器使用的每一个`CodecRequest`实际上都是由一个`Codec`;生成的。`Codec`s 是制造工厂，`CodecRequests`换句话说。

这意味着我们必须创建一个`Codec`来生成`CodecRequest`设置 CORS 标头的 s。

Go 的伟大之处在于，编写这种额外的行为真的很容易！

试试这个：

```
package cors_codec
import (
    "Gorilla/rpc"
    "net/http"
    "strings"
)
//interface: ain't nobody dope like me I feel so fresh and clean
func CodecWithCors([]string corsDomains, unpimped rpc.Codec) rpc.Codec {
    return corsCodecRequest{corsDomains, unpimped}
}

type corsCodecRequest struct {
    corsDomains []string
    underlyingCodecRequest rpc.CodecRequest
}

//override exactly one method of the underlying anonymous field and delegate to it.
func (ccr corsCodecRequest) WriteResponse(w http.ResponseWriter, reply interface{}, methodErr error) error {
    w.Header().add("Access-Control-Allow-Origin", strings.join(ccr.corsDomains, " "))
    return ccr.underlyingCodecRequest.WriteResponse(w, reply, error)
}

type corsCodec struct {
    corsDomains []string
    underlyingCodec rpc.Codec
}

//override exactly one method of the underlying anonymous field and delegate to it.
func (cc corsCodec) NewRequest(req *http.Request) rpc.CodecRequest {
  return corsCodecRequest{cc.corsDomains, cc.underlyingCodec.NewRequest(req)}
} 
```

那是一个有趣的练习！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-13T16:04:26.287

我知道这是一个很老的问题，但实际上有一种更简单的方法可以实现这一点。

`rs/cors`你可以通过几行`justinas/alice`打包来做到这一点。

```
func main() {
    chain := alice.New(cors.Default().Handler)

    server := rpc.NewServer()
    server.RegisterCodec(json2.NewCodec(), "application/json")
    server.RegisterService(new(HelloService), "")

    http.Handle("/rpc", chain.Then(server))

    http.ListenAndServe(":8081", nil)
} 
```

# c++ - C++ 联合成员未初始化

> ID：12851113
> 
> 赞同：1
> 
> 时间：2012-10-12T01:45:24.477
> 
> 标签：c++, initialization, unions

当我发现一些奇怪的东西时，我刚刚开始与工会一起探索

如果我运行这个程序

```
 #include <iostream>
    using namespace std;
    union myun{
    public:
    int x;
    char c;
    };

    int main()
    {
     myun y;
     //y.x=65;
      y.c='B';
     cout<<y.x;
    } 
```

输出是一些垃圾值，如果改变 yc 的值不会改变接下来我做了这个

```
 #include <iostream>
    using namespace std;
    union myun{
    public:
    int x;
    char c;

    };
     int main()
     {
      myun y;
      y.x=65;
      y.c='B';
      cout<<y.x;
     } 
```

输出如预期的那样为 66，因为 yc='B' 将 65 替换为其 ASCII 值 (66)。谁能解释第一种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T01:49:05.377

从不是最后一个写入的联合成员中读取实际上是未定义的行为。

如果联合中的项目是*布局兼容的*（如标准中定义的），则可以执行此操作，但这里的情况并非如此`int`（`char`更正确地说，如果这两种类型具有相似的位宽，则*可能*是这种情况，但那是通常情况并非如此）。

从 C++03 标准（现在被 C++11 取代但仍然相关）：

> 在一个联合中，任何时候最多可以有一个数据成员处于活动状态，即任何时候最多可以有一个数据成员的值存储在一个联合中。

我想你可能想看看`reinterpret_cast`你是否想做这种叠加活动。

* * *

就第一个幕后实际发生的事情而言，数字输出的十六进制值：

```
-1218142398 (signed) -> 3076824898 (unsigned) -> B7649F42 (hex)
                                                       ==
                                                       ^^
                                                       ||
                                       0x42 is 'B' ----++ 
```

应该提供线索。`y.c='B'`仅设置该结构的单个字节*，*而其他三个字节（在我的情况下）则不确定。

通过在`y.x=65`该点之前插入一行，它设置了所有*四个*字节，而这三个备用字节设置为零。因此，当您在以下分配中设置单个字节时，它们保持为零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T01:50:41.473

好吧，当你展示你对第二种情况的理解时，你有点解释了第一种情况。

初始化字符部分只会修改提供`int`. 假设 32 位 int，这意味着 3 个字节仍未初始化......因此是垃圾。

这是您的工会的内存使用情况：

```
 byte
           0  1  2  3
         +------------
myun::x  | X  X  X  X
myun::c  | X  -  -  - 
```

当你设置时`x`，你设置一个整数，所以所有剩余的字节都被初始化。当你设置 时`c`，你只修改一个字节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T01:51:59.773

```
 y.c='B';
 cout<<y.x; 
```

这具有未定义的行为。在任何给定时间，联合仅包含其成员之一。`int`如果它实际上包含该成员，则您不能尝试读取该`char`成员。因为没有定义这种行为，所以允许编译器对代码做它想做的事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T01:52:17.203

因为`sizeof(int) != sizeof(char)`.

也就是说，一个整数和一个字符占用的内存量是不同的（在现在的普通计算机中，int 是 4 个字节，char 是 1 个字节）。工会的规模与其最大的成员一样大。因此，当您设置 char 时，您只设置了 1 个字节的内存 - 其他 3 个字节只是随机垃圾。

要么首先设置工会的最大成员，要么执行以下操作：

```
memset(&y, 0, sizeof(y)); 
```

用零填充整个联合。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-12T01:53:35.183

在联合中，分配的内存等于最大成员的大小，在您的情况下是 int ，即在 16 位编译器的情况下为 2 个字节。所有成员使用相同的内存空间来存储他们的数据，因此实际上一次只能存储一种类型的成员。

当您将值“B”分配给 char 成员时，它在 1 字节的内存空间中存储了 66。然后，您尝试输出 int 成员的值，但该成员尝试通过从内存的 2 个字节读取值来计算值，因此您得到了一个垃圾值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-12T01:58:24.363

变量y是联合类型，y的长度是四个字节。比如y的内存布局是这样的：

```
---------------------------------
| byte1 | byte2 | byte3 | byte4 |
--------------------------------- 
```

1）在第一个程序中，这句话 `y.c='B';`只是设置了byte1，但是byte2、byte3、byte4是栈中的随机值。

2）在第二个程序中，句子yx=65；设置 byte1 为 65 ， byte2, byte3, byte4 为零。然后，句子`y.c='B';`将 byte1 设置为 'B' 的整数 ASCII 值，因此输出为 66。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-12T01:56:43.303

POD 类型的局部变量（更具体地说，堆栈上的变量，即具有“自动”存储类）在声明时不会初始化为任何内容，因此 3 个字节（或 64 位系统上的 7 个字节）不受您的分配`y.c`将包含随机垃圾。

另请注意，受分配 to 影响的特定字节`y.c`取决于 CPU 的字节顺序，因此即使您`y.x`在分配 to 之前进行初始化，此代码在不同系统上的行为也会有所不同`y.c`。

# javascript - 获取指定元素的总宽度，包括边距和填充

> ID：12851118
> 
> 赞同：0
> 
> 时间：2012-10-12T01:46:00.673
> 
> 标签：javascript, jquery, css

好的，我有这个代码。

```
<script>
$(document).ready(function(){

    var totalWidth = 0;

    $('.thewidgets').each(function(index) {
        totalWidth += parseInt($(this).width(), 10);
    });

    $('#marginwidgets').css({width: totalWidth});

});
</script> 
```

html

```
<div id="marginwidgets">
 <div class="thewidgets">
  the widgets 1
 </div>
 <div class="thewidgets">
  the widgets 2
 </div>
 <div class="thewidgets">
  the widgets 3
 </div>
</div> 
```

和CSS

```
#marginwidgets
{
margin: 0px auto;
overflow: auto;
max-width: 100%;
}
.thewidgets
{
width: 284px
padding: 5px;
margin-left: 10px;
}
.thewidgets:first-child
{
margin-left: 0px !important;
} 
```

正如您在脚本中看到的，例程是获取 .thewidgets 的总宽度，然后将其总宽度应用到 #marginwidgets 中，这应该可以完美地集中 #marginwidgets。

但我希望 .thewidgets 的总宽度包括边距和填充，然后将其应用到#marginwidgets 但我不知道如何制作它，这里有人可以弄清楚该怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T01:50:38.457

使用[`outerWidth`](http://api.jquery.com/outerWidth/)而不是宽度，并`true`作为参数传递以包含边距：

```
$(this).outerWidth(true); 
```

此外，维度函数返回数字而不是字符串，因此`parseInt`尽管您可能想使用`Math.floor`,`Math.ceil`或，但没有必要`Math.round`。

# derived-class - 使用 boost.serialization 序列化 Eigen 矩阵

> ID：12851126
> 
> 赞同：5
> 
> 时间：2012-10-12T01:47:51.770
> 
> 标签：derived-class, boost-serialization, eigen

我正在尝试序列化本征矩阵。这样我就可以序列化一个更复杂的对象。我使用 Matrix 作为基类，并在派生类中包含序列化。我对如何处理 Matrix.data() 感到困惑，它返回一个 c 样式的数组（如果我是正确的）。这是我的尝试：

```
#include <boost/archive/text_oarchive.hpp>
#include <boost/archive/text_iarchive.hpp>

template < class TEigenMatrix>
class VariableType : public TEigenMatrix {
private:
  friend class boost::serialization::access;
  template<class Archive>
  void serialize(Archive & ar, const unsigned int version)
  {
      ar & this.data();
  }
public:
}; 
```

我想将它用作“包装器”：

```
VariableType<Matrix<double,3,1>> serializableVector; 
```

代替

```
Matrix<double,3,1> vector; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-26T08:46:09.020

由于 Eigen 中的 Matrix 很密集，因此您可以将 Jakob 答案中的 for-loop 替换为[make_array](http://www.boost.org/doc/libs/1_52_0/libs/serialization/doc/wrappers.html#arrays)为：

> ar & boost::serialization::make_array(t.data(), t.size());

我在这篇文章中做了更详细的回答：[https ://stackoverflow.com/a/23407209/1686769](https://stackoverflow.com/a/23407209/1686769)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-17T06:59:46.890

通过将以下自由函数放入您的编译单元，您可以有效地使 Boost.Serialization 了解如何序列化 Eigen 类型：

```
namespace boost
{
    template<class Archive, typename _Scalar, int _Rows, int _Cols, int _Options, int _MaxRows, int _MaxCols>
    inline void serialize(
        Archive & ar, 
        Matrix<_Scalar, _Rows, _Cols, _Options, _MaxRows, _MaxCols> & t, 
        const unsigned int file_version
    ) 
    {
        for(size_t i=0; i<t.size(); i++)
            ar & t.data()[i];
    }
} 
```

在您给出的示例中，您应该能够做到（未经测试）：

```
void serialize(Archive & ar, const unsigned int version)
{
    ar & *this;
} 
```

查看我[之前](https://stackoverflow.com/a/12618789/672634)关于使用 Boost.Serialization 对 Eigen 类型进行序列化的回答以获得更详细的示例。

# grep - 为什么递归 grep 显示“没有这样的文件或目录”错误？

> ID：12851128
> 
> 赞同：27
> 
> 时间：2012-10-12T01:48:10.400
> 
> 标签：grep, symlink

我正在寻找一个本地 svn 目录。当我运行时，`grep -r "pattern" .`我会遇到一些错误，例如

> grep: ./Data/test: 没有这样的文件或目录

谁要求`grep`查找不存在的文件？

* * *

```
>grep --version
grep (GNU grep) 2.10

>lsb_release -a
No LSB modules are available.
Distributor ID: Ubuntu
Description:    Ubuntu 12.04 LTS 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-30T10:40:37.760

默认情况下，grep 不会忽略不存在或不可读的文件。您需要提供`-s`or`--no-messages`选项才能执行此操作。引自`man grep`：

> ```
>  -s, --no-messages
>           Suppress  error  messages about nonexistent or unreadable files.
>           Portability note: unlike GNU grep, 7th Edition Unix grep did not
>           conform to POSIX, because it lacked -q and its -s option behaved
>           like GNU grep's -q option.  USG-style grep also  lacked  -q  but
>           its  -s  option  behaved  like GNU grep.  Portable shell scripts
>           should avoid both -q and -s and  should  redirect  standard  and
>           error output to /dev/null instead.  (-s is specified by POSIX.) 
> ```

# google-chrome - 如何使用 Chrome 扩展创建 Websocket 客户端？

> ID：12851130
> 
> 赞同：9
> 
> 时间：2012-10-12T01:48:19.433
> 
> 标签：google-chrome, google-chrome-extension, websocket, client

我正在尝试在 Chrome 扩展程序/Chrome 打包应用程序上创建一个 WebSocket 客户端，其行为类似于hakobera 的[Simple WebSocket Client](https://chrome.google.com/webstore/detail/simple-websocket-client/pfdhoblngboilpfeibdedpjgfnlcodoo?hl=en)或Chrome Web Store 上的 toni.ruottu 的[Dark Websocket Terminal](https://chrome.google.com/webstore/detail/dark-websocket-terminal/cpopfplgicdljhakjpdochbbiodlgaoc?hl=en)。

我一直在尝试将以下代码添加到我的 Chrome 扩展程序中，但甚至无法使任何连接正常工作。（我在 appache 上的 pywebsocket 扩展在 localhost 上运行）

```
var ws;
if ("WebSocket" in window) {
  ws = new WebSocket("ws://localhost");
  ws.onopen = function() {
    ws.send("hello");
  };
} 
```

我应该在清单文件中放一些特别的东西吗？或者我应该使用其他方法在 Chrome 扩展程序中建立连接？一些代码示例或示例项目将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2021-04-10T06:02:32.123

确保：

*   `https://localhost`您在 manifest.json 中指定了权限
*   您从后台页面而不是内容脚本打开 WebSocket

您可以找到使用 WebSocket[的全功能扩展的示例。](https://github.com/fregante/GhostText/blob/main/source/manifest.json)

# ruby - Watir 脚本通过 launchd

> ID：12851133
> 
> 赞同：0
> 
> 时间：2012-10-12T01:48:42.280
> 
> 标签：ruby, automation, watir, watir-webdriver, launchd

有可能我不能为此使用launchd，我只是找不到任何明确表示不的东西。那么，问题来了……

我想在每小时 10 分钟后运行我的 Watir 脚本。此脚本启动 Firefox、执行测试并将结果记录到标准输出。我像这样设置我的 plist 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" \
  "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
  <key>Label</key>
  <string>client_checkout</string>
  <key>Program</key>
  <string>/Users/chris/svn/qa/watir/tests/client.sh</string>
   <key>StartCalendarInterval</key>
    <dict>
        <key>Minute</key>
        <integer>52</integer>
    </dict>
</dict>
</plist> 
```

在那个shell脚本里面我有：

```
echo 'hello' >> /Users/chris/results.txt
ruby /Users/chris/svn/qa/watir/tests/client_checkout.rb 
```

回声用于调试目的。

当我将 plist 文件放在 /Library/LaunchDaemons 中时，脚本运行，我看到“Hello”写入文本文件。然后，当它碰到 Ruby 部分时它会失败。当我查看 system.log 时，我看到：

```
com.apple.launchd.peruser.502[118] (client_checkout[25285]): Exited with code: 1 
```

我尝试将 plist 文件切换到 /Library/LaunchAgents 但结果完全相同。

另外，我认为这不是文件路径问题。当我提供完整的文件路径时，就像我在这里所做的那样，这些脚本可以在任何目录中正常运行。

我不能这样使用launchd吗？我“做错了”吗？这是怎么回事？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T03:40:03.710

我可以想到两件事可能是那里的问题。环境可能没有正确设置。我会尝试从 sh（或 bash）运行它，并且可能会检查以确保您的 $PATH 之类的配置符合您的预期。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" \
  "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
  <key>Label</key>
  <string>client_checkout</string>

  <key>ProgramArguments</key>
    <array>
      <string>/bin/sh</string> <!-- New bit here -->
      <string>/Users/chris/svn/qa/watir/tests/client.sh</string>
    </array>

   <key>StartCalendarInterval</key>
    <dict>
        <key>Minute</key>
        <integer>52</integer>
    </dict>
</dict>
</plist> 
```

如果要检查环境，可以将脚本更改为以下内容：

```
env > /Users/chris/Desktop/launchdenv.txt 
```

可能导致问题的另一件事是在 w/oa gui 环境下运行 firefox。将您的启动脚本移动到`~/Library/LaunchAgents/`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T18:08:20.353

它失败了，因为它找不到我的 Gems，它们位于 /Users/chris/.rvm，而不是 /usr/。在 RVMs 网站上找到了我需要添加到我的脚本中的内容，现在我正在运行！对于其他有同样问题的人，您需要从 RVM 获得的代码可以在 @ [https://rvm.io/workflow/scripting/找到](https://rvm.io/workflow/scripting/)

具体来说，将其添加到 shell 脚本的开头：

```
 # Load RVM into a shell session *as a function*
if [[ -s "$HOME/.rvm/scripts/rvm" ]] ; then

  # First try to load from a user install
  source "$HOME/.rvm/scripts/rvm"

elif [[ -s "/usr/local/rvm/scripts/rvm" ]] ; then

  # Then try to load from a root install
  source "/usr/local/rvm/scripts/rvm"

else

  printf "ERROR: An RVM installation was not found.\n"

fi 
```

# php - 如何在php中将2038年的时间戳转换为日期

> ID：12851138
> 
> 赞同：1
> 
> 时间：2012-10-12T01:49:15.283
> 
> 标签：php

> **可能重复：**
> [PHP 和 mySQL：2038 年错误：它是什么？如何解决？](https://stackoverflow.com/questions/2012589/php-mysql-year-2038-bug-what-is-it-how-to-solve-it)

在 PHP 中将时间戳（2038 年或以上）转换为日期时遇到问题，它总是显示 1901 年而不是 2038 年或以上。但是当转换年份 < 2038 的时间戳时一切正常。请帮我解决这个问题。非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T01:55:41.560

这是因为 INT 数据类型在 32 位机器上的限制

![在此处输入图像描述](../Images/99b552061e5d652056bed4d84c870eef.png)

解决方案

1.  使用长数据类型（64 位就足够了）
2.  对于 MySQL，将日期存储为 DATETIME 而不是 TIMESTAMP

# ruby-on-rails - Heroku上的Rails部署崩溃

> ID：12851140
> 
> 赞同：0
> 
> 时间：2012-10-12T01:49:22.350
> 
> 标签：ruby-on-rails, ruby-on-rails-3, deployment, heroku

这是我在 Rails 部署中的第一次尝试，我一生都无法解决这个问题。出于某种原因，我无法让我的应用程序运行。这是我在运行 heroku 日志时得到的结果：

```
2012-10-12T01:44:29+00:00 heroku[web.1]: Starting process with command `bundle exec rails server thin -p 54445`
2012-10-12T01:44:34+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.1/lib/active_support/dependencies.rb:236:in `load_dependency'
2012-10-12T01:44:34+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.1/lib/active_support/dependencies.rb:251:in `require'
2012-10-12T01:44:34+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/handler/thin.rb:1:in `<top (required)>'
2012-10-12T01:44:34+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/handler.rb:20:in `inject'
2012-10-12T01:44:34+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.1/lib/active_support/dependencies.rb:251:in `block in require'
2012-10-12T01:44:34+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/handler.rb:20:in `get'
2012-10-12T01:44:34+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/handler.rb:20:in `each'
2012-10-12T01:44:34+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.1/lib/active_support/dependencies.rb:251:in `require': no such file to load -- thin (LoadError)
2012-10-12T01:44:34+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:269:in `server'
2012-10-12T01:44:34+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.1/lib/rails/commands/server.rb:59:in `start'
2012-10-12T01:44:34+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/handler.rb:20:in `const_get'
2012-10-12T01:44:34+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.1/lib/rails/commands.rb:55:in `block in <top (required)>'
2012-10-12T01:44:34+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/handler.rb:20:in `block in get'
2012-10-12T01:44:34+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.1/lib/rails/commands.rb:50:in `tap'
2012-10-12T01:44:34+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.1/lib/rails/commands.rb:50:in `<top (required)>'
2012-10-12T01:44:34+00:00 app[web.1]:   from script/rails:6:in `require'
2012-10-12T01:44:34+00:00 app[web.1]:   from script/rails:6:in `<main>'
2012-10-12T01:44:34+00:00 app[web.1]: Exiting
2012-10-12T01:44:35+00:00 heroku[web.1]: Process exited with status 1
2012-10-12T01:44:35+00:00 heroku[web.1]: State changed from starting to crashed 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T02:31:35.203

“真正的”错误是这样的：

```
`require': no such file to load -- thin (LoadError) 
```

您可以将以下行添加到您的 gemfile 中，以使其正常工作：

```
 gem 'thin' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T06:24:44.697

我认为您应该添加 2 颗宝石，如下所示：

```
gem "heroku"
gem "thin" 
```

然后运行命令行： bundle install

更多详情请查看：[http ://wowcode.herokuapp.com](http://wowcode.herokuapp.com/)

# ios - 如何通过我的 iOS 应用访问不同的 Facebook 帐户

> ID：12851142
> 
> 赞同：3
> 
> 时间：2012-10-12T01:49:48.310
> 
> 标签：ios, facebook

这是我第一次将 facebook 集成到应用程序中，所以我确定我一定错过了一些东西。我遇到的问题是我只能通过我的带有 facebook 集成的 iOS 应用访问我的 OWN facebook 帐户。

细节：我成功地将 facebook (SDK 3.1) 集成到我的应用程序 (xcode 4.5) 中。我第一次通过我的应用程序登录 Facebook 时，它要求我输入密码等。在模拟器和我的 iPhone (iOS 6) 上运行良好，可以访问我的朋友和他们的信息，但这里有两个问题：

1）当我点击我设置的“facebook注销”按钮，然后我重新登录时，它说我“已经被授权”使用该应用程序。没有选项可以更改 facebook 用户。

2) 我通过 testflight 将应用程序发送给了一位朋友，当他在手机上打开它并单击使用自己的帐户登录 Facebook 时，他收到一条错误消息，显示为“com.facebooksdk 错误 2”。

为什么我不能更改使用该应用程序的 facebook 用户？我按照 Fb 应用开发者网站上名为“登录”的教程进行了设置：[https ://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/](https://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/)

我还使用了“运行 SQL 查询”教程中的一些代码来获取我朋友的照片：[https ://developers.facebook.com/docs/howtos/run-fql-queries-ios-sdk/](https://developers.facebook.com/docs/howtos/run-fql-queries-ios-sdk/)

有什么可以帮助或指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T08:15:31.697

您应该将您的朋友作为开发者添加到应用程序（在应用程序仪表板的“角色”部分）。

如果您想取消该应用程序的授权，请转到桌面版 Facebook，然后在帐户设置（在“应用程序”下）中删除有问题的应用程序。当您再次运行应用程序时，系统会要求您重新授权。

您可能还会发现 SDK 中的此示例很有用：[https ://github.com/facebook/facebook-ios-sdk/tree/master/samples/SwitchUserSample](https://github.com/facebook/facebook-ios-sdk/tree/master/samples/SwitchUserSample)

# c - 交换字节中的位

> ID：12851144
> 
> 赞同：0
> 
> 时间：2012-10-12T01:50:33.020
> 
> 标签：c, bit-manipulation, bit-shift

我正在尝试创建一个函数，该函数根据另一个字节的最低有效位（称为密钥）更改给定输入字节 c1 的位。

如果 key 的最低位有任何 1，则 c1 的位需要根据其对应的镜像位位置进行交换。

例如，让我们说，

key = 0110 1010，我们只关心 1010 作为它的最低有效位。

c1 = 0010 1011

根据 1010，我们需要在 c1 中将第 1 位与第 6 位、第 3 位与第 4 位互换。

c1 最终应该是 0111 0001。

这是我到目前为止所做的：

```
unsigned char swapBits(unsigned char c1, unsigned char key){
    for(int i = 0; i < 4; i++){
            key = (key >> i);
            if(key & 1){
               /* swap bits here */
            }
    }
    return c1;
} 
```

我将如何实现这一目标？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T02:19:15.103

```
#include <stdint>    // uint8_t
#include <limits.h>  // CHAR_BIT

uint8_t furtle(uint8_t val, uint8_t key) 
{
    uint8_t mask_lo = 0x01;                  // init masks at LS and MS bits
    uint8_t mask_hi = mask_lo << (CHAR_BIT - 1);
    for (int b = 0; b < CHAR_BIT / 2; ++b)
    {
        if (key & mask_lo)                   // if bit b is set in val
        {
            uint8_t b_lo = val & mask_lo;    // get corresponding low/high bits
            uint8_t b_hi = val & mask_hi;    // and swap them
            val = (val & ~mask_lo) | (b_hi >> (CHAR_BIT - b * 2 - 1));
            val = (val & ~mask_hi) | (b_lo << (CHAR_BIT - b * 2 - 1));
        }
        mask_lo <<= 1;                       // shift masks
        mask_hi >>= 1;
    }
    return val;
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-12T01:54:15.763

您可以将所有位插入到数组中，然后交换元素。

最后，读取所有元素作为输出或使用 string.concat 函数将元素添加到字符串中。

# jquery - jquery中的滑动div

> ID：12851145
> 
> 赞同：0
> 
> 时间：2012-10-12T01:50:37.637
> 
> 标签：jquery, css, ruby-on-rails-3, slidetoggle

我正在尝试在我的网站顶部创建一个工具栏类型部分。我只需要一个默认隐藏的 div，以及一个挂在该 div 底部的按钮。单击它时，div 应向下滑动（按钮仍位于底部）。单击后，它应该向上滑动。

这是我目前拥有的：

```
<div id="account_toolbar" style="background-color:#fff;">
  <div id="toolbar_contents" style="display:none;">  This is the account toolbar so far
  </div>
  <div id="button" style="background-color: #ff0000;"><%= image_tag    "templates/_global/my_account.png", :id => "my_account_btn", :style => "float: right; margin-right: 100px;" %></div>
</div> 
```

图像标签使用 ruby​​/rails 语法，所以不要注意。它将像任何其他图像标签一样呈现。

这是我正在使用的 jquery：

```
$('#my_account_btn').click(function () {
    $('#toolbar_contents').slideToggle();
}); 
```

所以，这实际上在很大程度上是有效的。然而，我的问题是工具栏内容 div 的间距将帐户按钮向下推。当它向上或向下滑动时，它会暂时将自己附加到 div 的底部，然后在完成滑动后跳回（在隐藏的 div 的底部和帐户按钮的顶部之间留有间隙）。

我希望这是有道理的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T02:24:17.213

这是因为您没有指定某些元素的宽度，并且您可以应用浮动以使其完好无损。试着得到这个想法。

```
<style>
#account_toolbar{
    width:500px;
}
.toolbar_contents_wrapper{
    float:left;
    width:400px;
    height:100px;
}
#button{
    float:left;
    width:300px;
}

.clear{
    clear:both;
}
 </style>

 <div id="account_toolbar" style="background-color:#fff;">
    <div class="toolbar_contents_wrapper">
     <div id="toolbar_contents" style="display:none;">  This is the account toolbar so far
  </div>
</div>
<div class="clear"></div>
<div id="button" style="background-color: #ff0000;"><img    src="#" id="my_account_btn" style="float: right; margin-right: 100px;" /></div>
</div>

<script>
$(function(){
    $('#my_account_btn').click(function () {
    $('#toolbar_contents').slideToggle();
});
});
</script> 
```

请注意 .toolbar_contents_wrapper 这将阻止您下方的按钮向上/向下移动。我测试了这段代码，它可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T02:25:46.740

尝试删除`display:none`并改为在您的文档加载上运行 .hide() 。以下是适用于我的网站的代码。

```
$(document).ready(function() {
$('#toolbar_contents').hide();
  $('#my_account_btn').click(function() {
    $('#toolbar_contents').slideToggle(400);
    return false;
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T03:33:54.543

好的，各位大佬给点思路，谢谢！

最终修复它的是将底部 div（持有图像/按钮的那个）设置为按钮的高度。之前，div 没有显示并且在浏览器中的最终高度为 0px。

```
<div id="account_toolbar" style="background-color:#fff;">
  <div id="toolbar_contents" style="">  This is the account toolbar so far
  </div>
  <div id="button" style="background-color: #ff0000; height:59px;"><%= image_tag "templates/_global/my_account.png", :id => "my_account_btn", :style => "float: right; margin-right: 100px;" %></div>
</div> 
```

红色的样式背景颜色以前根本没有显示出来。我暂时把它放在那里，看看 div 出现在哪里。

不管怎样，再次感谢各位！

# java - Java2D神器？

> ID：12851150
> 
> 赞同：3
> 
> 时间：2012-10-12T01:51:07.913
> 
> 标签：java, swing, java-2d

我正在将 Java2D 用于我正在编写的游戏，并且在我开始将它与其他摇摆组件集成之前使用它没有任何问题。我的问题是当我添加到 JFrame 的第一个组件不是我正在绘制的画布时，当我将鼠标悬停在文本窗格的滚动条上时，会出现一个奇怪的工件。每次我执行应用程序时都会发生这种情况。当我先有画布时，没有问题。

由于某种原因，这似乎仅在使用默认 Java2D 管道时（恰好是 sun.java2d.d3d=true）在 Windows 上发生，并且出现了工件。当我设置 sun.java2d.opengl=true 或 sun.java2d.noddraw=false AND sun.java2d.d3d=false 时，它​​不会发生。

我猜这是 Direct3D Java2D 管道的某种错误？我可以轻松解决它，但想知道是否有其他人遇到过这样的问题？我正在运行最新的 JDK7u7，但它也发生在以前的版本中。我应该注意，如果我最小化窗口并恢复它，工件就会消失并且永远不会返回，直到我重新启动应用程序。

与神器： ![坏的](../Images/b3aec36307aa8d80d2609503c7995e0e.png)

没有工件（先添加画布而不是 JLabel 图像之后）： ![好的](../Images/2222aab2915ebfbb6fac1bb417988de0.png)

如果有人对此有任何进一步的信息，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T01:57:46.750

这是一个众所周知的伪影，因为它未能尊重[opacity](http://www.oracle.com/technetwork/java/painting-140037.html#props)属性。因为“Swing 程序[应该覆盖](http://www.oracle.com/technetwork/java/painting-140037.html#callbacks) `paintComponent()`而不是覆盖`paint()`”，所以一定要`super.paintComponent()`在你的实现中首先调用。[这里](https://stackoverflow.com/q/7213178/230513)和[这里](https://stackoverflow.com/a/11744971/230513)都有相关的例子。

附录：另见[*混合重量级和轻量级组件*](http://www.oracle.com/technetwork/articles/java/mixing-components-433992.html)。

# php - 是否可以自动点击facebook登录按钮（ )?

> ID：12851151
> 
> 赞同：1
> 
> 时间：2012-10-12T01:51:30.243
> 
> 标签：php, mysql, facebook, wordpress

我已阅读有关此问题的所有主题（[Facebook 自动登录](https://stackoverflow.com/questions/8164336/facebook-auto-login)、[使用 Curl 的自动 Facebook 登录](https://stackoverflow.com/questions/7302013/auto-facebook-login-with-curl)等）。但在这些中，我都没有找到答案。我有一个带有 FB 自动连接插件的 Wordpress 系统。我已经创建了显示该 wordpress 页面的 facebook 应用程序。当用户登录 facebook 时，我想自动登录 wordpress。可能吗？（我在应用程序中尝试了这个[自动登录 facebook 用户](https://stackoverflow.com/questions/4653427/auto-login-facebook-user-into-application)）。但还是一无所获。我正在考虑使用 jquery 自动单击该按钮：.click() 或 trigger('click');，但又没有。我什至试图检查用户是否登录了 Facebook，但我没有得到任何答案。

```
 FB.getLoginStatus(function(response) {
     if (response.status === 'connected') {
          alert('working');
     }
  } 
```

. 也许你有什么建议？因为我不知道在哪里可以找到答案...

# android - Android通过触摸设置手动对焦

> ID：12851154
> 
> 赞同：9
> 
> 时间：2012-10-12T01:51:44.080
> 
> 标签：android, android-camera

我将通过打开相机来设置我的 Android 应用程序，并通过触摸相机中的点来启用手动对焦。相机可以重新对焦到我指向屏幕的位置。你能告诉我我应该从修改方法或哪个组件开始吗？

下面是我的代码：

```
public void takePhoto(File photoFile, String workerName, int width, int height, int quality) {
    if (getAutoFocusStatus()){
        camera.autoFocus(new AutoFocusCallback() {
            @Override
            public void onAutoFocus(boolean success, Camera camera) {
                camera.takePicture(shutterCallback, rawCallback, jpegCallback);
            }
        }); 
    }else{
        camera.takePicture(shutterCallback, rawCallback, jpegCallback);
    }

this.photoFile = photoFile;
this.workerName = workerName;
this.imageOutputWidth = width;
this.imageOutputHeight = height;
}

public void takePhoto(File photoFile, int width, int height, int quality) {
takePhoto(photoFile, null, width, height, quality);
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-02-19T04:50:10.920

虽然这个答案没有显示如何专注于单个区域，但它在展示如何准确地聚焦相机开始时绝对有用。

这是我所做的。这适用于我的设备（HTC 的 Droid DNA），内置于 Android Studio

在两者`OnSurfaceChanged()`中`OnSurfaceCreated()`，我都有以下代码：（`mCamera`是我的私人`Camera`对象）

```
 mCamera.stopPreview();
        Camera.Parameters p = mCamera.getParameters();
        p.setFocusMode(Camera.Parameters.FOCUS_MODE_AUTO);

        mCamera.setParameters(p);
        mCamera.setPreviewDisplay(surfaceHolder);
        mCamera.startPreview();
        mCamera.autoFocus(null); 
```

在构造函数中，您必须放置

```
 setFocusable(true);
        setFocusableInTouchMode(true); 
```

这将允许您接收焦点事件。至于抓他们……

```
 public boolean onTouchEvent(MotionEvent event){
    if(event.getAction() == MotionEvent.ACTION_DOWN){
        Log.d("down", "focusing now");

        mCamera.autoFocus(null); 
    }

    return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-22T06:27:25.093

您是否尝试过使用 setFocusAreas() 设置用户触摸的焦点区域？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T02:02:51.367

> 这里的关键是调用 camera.autoFocus(autoFocusCallBack) 并且在我们聚焦方法 autofocusCallback.onAutoFocus(boolean success, Camera camera) 被调用之后 – 调用 camera.takePicture (Camera.ShutterCallback shutter, Camera.PictureCallback raw, Camera.PictureCallback jpeg )

查看更多：[http ://achorniy.wordpress.com/2009/12/29/how-to-use-autofocus-in-android/](http://achorniy.wordpress.com/2009/12/29/how-to-use-autofocus-in-android/)

或者

> 在表面改变和预览之前，您可以使用自动对焦设置，它会自动设置焦距，然后开始预览，然后自动对焦显示的任何内容...

```
public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {

// Set camera properties first
Camera.Parameters parameters = camera.getParameters();
        parameters.setFocusMode(Camera.Parameters.FOCUS_MODE_AUTO);
        camera.setParameters(parameters);

camera.startPreview();

camera.autoFocus(null);

} 
```

信用：[在哪里放置自动对焦类android相机](https://stackoverflow.com/questions/8058122/where-to-put-autofocus-in-the-class-android-camera?rq=1)

# java - log4net 调试选择性过滤器

> ID：12851159
> 
> 赞同：-1
> 
> 时间：2012-10-12T01:52:08.987
> 
> 标签：java, logging, log4j

我想问一下 log4net 框架是否可以执行选择性过滤以仅针对特定条件显示 DEBUG 项？目前我有一个 Java 应用程序，它会排出大量的调试日志。如果您将阈值设置为调试，则日志会在半天内轮换到允许的最大文件轮换。我被迫将阈值设置为信息，但我仍想显示选定的调试值日志。

这可以在不更改代码的情况下完成吗？只是 log4j.properties 文件中的更改？

例如，我想用某个关键字显示某个 DEBUG 项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T02:25:24.243

我不知道你能做到，但阅读[Filters](http://logging.apache.org/log4net/release/manual/configuration.html)的文档，似乎他们可能会完成你想要的。

# java - 我正在尝试一个简单的比较 2 个文本文件并打印 2 个之间的差异

> ID：12851160
> 
> 赞同：2
> 
> 时间：2012-10-12T01:52:13.077
> 
> 标签：java

```
import java.io.*;

public class CheckingTwoFilesAndComparing implements Serializable {

private static final long serialVersionUID = 1L;

static String FILE_ONE = "/Users/abextra/myText1.txt";
static String FILE_TWO = "/Users/abextra/myText2.txt";

public static void main(String[] args) {

    try {
        CompareFile(FILE_ONE, FILE_TWO);

    } catch (Exception e) {
        e.printStackTrace();
    }
}

private static void CompareFile(String fILE_ONE2, String fILE_TWO2)
        throws Exception {

    File f1 = new File("FILE_ONE");
    File f2 = new File("FILE_TWO");

    FileReader fR1 = new FileReader(f1);
    FileReader fR2 = new FileReader(f2);

    BufferedReader reader1 = new BufferedReader(fR1);
    BufferedReader reader2 = new BufferedReader(fR2);

    String line1 = null;
    String line2 = null;

    while (((line1 = reader1.readLine()) != null)
            &&((line2 = reader2.readLine()) != null)) {
        if (!line1.equalsIgnoreCase(line2)) {
            System.out.println("The files are DIFFERENT");
        } else {
            System.out.println("The files are identical");
        }

    }
    reader1.close();
    reader2.close();

   }
} 
```

这是上面代码中提到的路径中存在的2个文本文件的内容

```
==myText1.txt===
1,This is first line, file
2,This is second line, file
3,This is third line , file
4,This is fourth line, file

==myText2.txt===
1,This is first line, file
2,This is second line, file
3,This is third  line, file
4,This is fourth line, file
5,This is fifth line, file 
```

我是 java 的新手。我使用了 eclipse 调试器，我看到我不断收到“FileNot found”异常 - 有人可以帮忙吗？非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T01:54:06.483

```
File f1 = new File("FILE_ONE");
File f2 = new File("FILE_TWO"); 
```

尝试在此处删除引号。您之前在程序中将 FILE_ONE 和 FILE_TWO 声明为变量，但您没有调用它们。相反，您直接调用了字符串“FILE_ONE”，当然不会找到它。因此，将其替换为您传递给 CompareFile 的参数...

```
File f1 = new File(fILE_ONE2);
File f2 = new File(fILE_TWO2); 
```

并告诉我们这是否可以解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T02:02:23.227

您必须从以下位置删除引号：

```
File f1 = new File("FILE_ONE"); 
```

和

```
File f2 = new File("FILE_TWO"); 
```

另外，请确保在文件的路径`"/Users/abextra/myText1.txt"`中，*“用户”*确实应该是大写的。在许多系统上，`/users/`是小写的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T05:09:21.857

也`FileNotFoundException`可以在文件打开时抛出。（仅当您尝试写入已打开的文件时才会发生这种情况）

尝试关闭文件，然后运行程序。

# java - EhCache Cache 和 CacheWriter 刷新

> ID：12851165
> 
> 赞同：1
> 
> 时间：2012-10-12T01:52:52.897
> 
> 标签：java, ehcache

我正在尝试 Ehcache 的后写功能，以实现对数据库的高并发写入的合并。现在，我一切正常（我写入缓存，然后在配置的策略下），缓存正在调用我的 CacheWriter 实现以进行后写。但是，我需要在某个时间点（例如，当应用程序将要关闭时，或在集成测试中），将所有挂起的缓存值“刷新”到 CacheWriter。换句话说，我想调用 Ehcache 将所有脏值“提交”到 CacheWriter。

关于如何实现这一目标的任何想法？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:03:48.010

也许你可以使用它的关闭监听器：[http ://ehcache.org/documentation/operations/shutdown](http://ehcache.org/documentation/operations/shutdown)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-01T10:08:01.257

面对同样的问题，我求助于轮询和等待：

```
WriteBehindManager writerManager = (WriteBehindManager) cache.getWriterManager();
Stopwatch createStarted = Stopwatch.createStarted();
while (writerManager.getQueueSize() > 0 && createStarted.elapsed(TimeUnit.SECONDS) < 30) {
    Thread.yield();
} 
```

其中 Stopwatch 是 Guava 库中的计时器对象。我浏览了源代码，但从 EHCache 2.9 开始，没有有意刷新`WriteBehindQueue`代码中的 。此解决方案假定写入缓存的任何代码也被关闭，并且`maxWriteDelay`最后一次写入操作的延迟加起来不超过 30 秒。

# azure-sql-database - SQL Azure 是否支持“FOR XML”（RAW、AUTO、PATH）

> ID：12851167
> 
> 赞同：3
> 
> 时间：2012-10-12T01:53:25.870
> 
> 标签：azure-sql-database

MS SQL Server 支持使用 FOR XML（RAW、AUTO、PATH）提取关系数据。SQL Azure 是否支持此功能？如果没有，有没有人尝试过解决方法。提前谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T15:32:10.387

是的。我在 SQL Azure 中使用`FOR XML PATH`and没有问题。`FOR XML RAW`还不需要使用该`AUTO`选项。

# android - Android 项目依赖

> ID：12851176
> 
> 赞同：2
> 
> 时间：2012-10-12T01:55:37.223
> 
> 标签：android

我需要有关 Android SDK 中的项目依赖问题的帮助。

我有以下项目：“Sync”（仅 Java 项目）“Agonis”（Android 库项目）“Dragonis”（Android 应用程序项目）

Agonis 对 Sync 有项目依赖，Dragonis 对 Agonis 有项目依赖，如下所示：

Dragonis->Agonis->同步

我已正确使用 Properties->Android->Library 对话框将 Agonis 添加为 Android 库。我已经在 Agonis 构建路径设置中导出了 Sync 项目：

[http://i.stack.imgur.com/GsQIR.png](http://i.stack.imgur.com/GsQIR.png)

在 Dragonis 项目中，我在“Android Dependencies”虚拟文件夹中看到了 Agonis 和 Sync：

[http://i.stack.imgur.com/EhH8L.png](http://i.stack.imgur.com/EhH8L.png)

从这里开始，我希望一切都能正常工作，但事实并非如此。

我可以启动应用程序，但是一旦我从 Agonis 项目 (com.mob.agonis.AgonisServer) 实例化一个类型，我就会收到 NoClassDefFoundError。如果重要的话，我尝试实例化的 Agonis 类型扩展了 Sync 项目 (com.mob.sync.Server) 中的类型。

我尝试清理所有项目，并在 Agonis 和 Dragonis 上使用 Android Tools->Fix Project Properties 无济于事。

我忽略了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T02:26:09.603

将jar库放入文件夹libs中，并添加到java构建路径中。
右键单击文件->构建路径->添加到构建路径
希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T04:59:38.413

我想到了。

仅 Sync Java 库正在编译为 1.7 Java 字节码。Android 仅支持将 Java 1.6 字节码转换为 DEX。

孩子们，滚动到控制台顶部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-01T14:52:21.057

您可以通过命令行工具解决此问题。您可以创建/更新 Dragonis 和 Agonis android 项目 - 一个作为应用程序，另一个作为库。请参阅[http://developer.android.com/tools/projects/projects-cmdline.html](http://developer.android.com/tools/projects/projects-cmdline.html)

您可以使用命令行工具轻松设置从 D -> A 的依赖关系，如引用库项目部分所示。在这个阶段，D 的构建会自动触发 A 的构建。

现在修改 A - 的 build.xml 以在预编译阶段包含对 : build 和复制 Sync.jar 的依赖（查看 build.xml 内部以找到占位符）。可以通过使用 subant 启动子 ant 进程来完成构建和复制任务。见[http://ant.apache.org/manual/Tasks/subant.html](http://ant.apache.org/manual/Tasks/subant.html)

在这个阶段，如果您触发 ant build，您的所有依赖项都可以在命令行上正常工作。现在您还可以通过从源代码导入 android 项目 Dragonis 来使用 eclipse。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-11T12:08:00.187

从“Sync”的项目属性中，将“Java Compiler”->“JDK Complience”设置为 1.6。重建和享受！

# wpf - 在 WPF 控件中查看 PdfSharp 文档

> ID：12851183
> 
> 赞同：1
> 
> 时间：2012-10-12T01:56:59.933
> 
> 标签：wpf, pdfsharp

我正在使用配套的[MigraDoc 和 PdfSharp 库](http://www.pdfsharp.net)来生成报告。

PdfSharp[文档](http://www.pdfsharp.net/PDFsharpFeatures.ashx)反复提到 WPF 并谈到您可以“在 PDF 页面和窗口中绘图”，但我不知道如何在查看器中查看我`PdfDocument`的。所有示例都只是通过使用`Process.Start()`.

这些库中的任何一个是否包含用于查看文档的 WPF 控件？`RichTextEditor`理想情况下，我正在寻找一个基本的文档查看器控件，类似于`FlowDocuments`.

（我正在使用通过 NuGet 分发的 PdfSharp 和 MigraDoc 库。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T18:59:28.023

您可以使用[WPF PDF 查看器](https://wpfpdfviewer.codeplex.com/)。它将 Adob​​e PDF Reader COM 组件包装为 WPF 控件

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T04:05:01.777

PDF Viewer 是一个 ActiveX 控件，需要使用 WindowsFormHost 托管。如果您需要 PDR 的 WPF 渲染器，Adobe 还没有推出它。您需要自己创建并解析 PDF 文档。

这里有几个链接可以帮助您在 WPF 窗口中托管 PDF 文档：

[http://www.codeproject.com/Articles/380019/Using-Adobe-Reader-in-a-WPF-app](http://www.codeproject.com/Articles/380019/Using-Adobe-Reader-in-a-WPF-app)

[http://hugeonion.com/2009/04/06/displaying-a-pdf-file-within-a-wpf-application/](http://hugeonion.com/2009/04/06/displaying-a-pdf-file-within-a-wpf-application/)

Telerik 有一个使用 WPF 创建的 PDF 查看器，它使用 WPF 呈现 PDF 文档。它称为 RADPDFViewer [http://blogs.telerik.com/blogs/posts/12-02-29/introducing-pdf-viewer-for-silverlight-wpf.aspx](http://blogs.telerik.com/blogs/posts/12-02-29/introducing-pdf-viewer-for-silverlight-wpf.aspx)

您必须使用 Adob​​e 提供的一个，或者您需要像 Telerik 那样自己创建它。

# linux - dlopen 失败：无法打开共享对象文件：没有这样的文件或目录

> ID：12851184
> 
> 赞同：9
> 
> 时间：2012-10-12T01:57:06.717
> 
> 标签：linux

问题是我`dlopen`用来加载一个库（.so 是我写的，它不是系统库），但是我得到了标题中显示的错误。

1.  我已经包括`dlfcn.h`
2.  在编译器中，我使用了`-ldl`命令
3.  我要加载的只是源代码文件夹，我尝试添加`-L.`，但它不起作用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-12T02:07:38.760

如果您要 dlopen 的库不在标准搜索路径中，您有多种选择：

1.  在 dlopen 中指定文件的完整路径

    `dlopen("/full/path/to/libfile.so");`

2.  通过 LD_LIBRARY_PATH 添加库的路径

    `LD_LIBRARY_PATH=/path/to/library/ ./executable`

3.  使用 ld -rpath 选项将库路径添加到应用程序。

    `g++ -link stuff- -Wl,-rpath=/path/to/library/`

请注意，选项 1 和 3 将库路径硬编码到您的应用程序中。-rpath 确实有一个选项来指定相对路径，即

```
-Wl,-rpath=$ORIGIN/../lib/ 
```

将相对路径嵌入到应用程序中。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-03-03T13:10:34.527

找出代码出错的最残酷和有效的方法是以下命令，它将激活共享库的调试模式，并[在此处](http://tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html)记录：

```
export LD_DEBUG=libs 
```

然后，您会惊讶地弹出这么多信息。不用担心，这些信息会告诉您刚刚键入的命令需要哪些共享库以及在哪里可以找到这些所需的库。例如，如果您键入，屏幕将被重置，然后将打印`reset`有关共享库命令需要的信息。`reset`

然后，执行你的“有问题的”可执行文件，看看出了什么问题。

* * *

PS.1：根据您接受的神话解决方案：

> 在 dlopen 中指定文件的完整路径
> 
> dlopen("/full/path/to/libfile.so");

似乎即使您在`dlopen`函数中使用绝对或相对路径，找不到目录的错误仍然会出现。我正在使用 CentOS，我的 Debian 也有这个问题。所以我认为神话提供的第一个解决方案是错误的。您可以在我上面提到的“调试”模式下进行验证。

* * *

PS.2：如果您“安装”或“编译”共享库而不是通过包管理器安装它，则必须运行`sudo ldconfig /path/where/not/found/shared/library/reside`以通知系统新添加的共享库。例如 ：

```
cp /etc/ld.so.cache ~/ld.so.cache.backup    
#cp -r /etc/ld.so.conf.d ~/ld.so.conf.d.backup #sometimes this backup is unnecessary.
#cp /etc/ld.so.conf ~/ld.so.conf.backup #sometimes this backup is unnecessary.
sudo ldconfig /PATH/WHERE/NOT/FOUND/SHARED/LIBRARY/RESIDE
###I am omitting the cp commands to roll back.
###For example, sudo cp -f ld.so.cache /etc/ld.so.cache 
```

要了解这里发生了什么，请仔细阅读上面链接中的所有内容。

* * *

PS.3：您始终可以使用命令`export LD_DEBUG=help`，`export LD_DEBUG=libs`找出`-rpath`或`LD_LIBRARY_PATH`解决您的问题。你会喜欢这种调试模式。

* * *

PS.4：找出问题所在的不那么残酷的方法：

```
ldd ./YOURproblematicEXECUTABLE 
```

该命令可以告诉您要打开的共享库是否位于。此外，有很多方法可以解决您的问题，每种方法都有其局限性和适用性。所以我强烈建议你阅读我上面提供给你的链接，并了解如何选择解决问题的方法。看完之后，如果你真的觉得自己很“OK”，你还可以阅读这篇[更好地理解 Linux 二级依赖关系的例子](http://www.kaizou.org/2015/01/linux-libraries/)，以加深理解。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T02:10:07.217

dlopen 的声明看起来像， void *dlopen(const char *filename, int flag);

如果将 para 'filename' 设置为共享库的 name ，则应将当前路径添加到 'LD_LIBRARY_PATH' 中。例如，

1、dlopen("libtest.so" , RTLD_LAZY)

2、在shell中，导出LD_LIBRARY_PATH=.:$LD_LIBRARY_PATH

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-03T08:47:42.050

就我而言，解决方案非常简单：

> 除非明确指定为相对路径，否则路径应为绝对路径

所以我换了

```
dlopen("mylib.so", RTLD_NOW) 
```

和

```
dlopen("./mylib.so", RTLD_NOW) 
```

问题解决了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-10T09:53:26.820

我会推荐[dlerror](https://linux.die.net/man/3/dlerror)来了解原因

```
void* handle = dlopen(SO_FILE, RTLD_NOW | RTLD_LOCAL | RTLD_DEEPBIND);
if(handle == NULL)
{
    printf(LOG_ERROR, "Error: %s\n",  dlerror());
    assert(0);
} 
```

这将报告错误的详细原因

# c - 如何用 C 编译简单的 gearman worker？

> ID：12851189
> 
> 赞同：1
> 
> 时间：2012-10-12T01:57:43.770
> 
> 标签：c, gcc, gearman

我正在尝试在 C 上编译一个简单的 gearman worker。我使用 mac。这是代码：

```
`#include <libgearman/gearman.h>
int main(void) {
    gearman_worker_st worker;
    gearman_worker_create(&worker);
    gearman_worker_add_server(&worker, "localhost", 4730);
    return 0;
}` 
```

`当我尝试编译它时：`

 ````
#gcc 测试.c
架构 x86_64 的未定义符号：
  “_gearman_worker_add_server”，引用自：
      ccLUuf8y.o 中的 _main
  “_gearman_worker_create”，引用自：
      ccLUuf8y.o 中的 _main
ld：未找到架构 x86_64 的符号
collect2: ld 返回 1 个退出状态

```

我知道我必须将 gcc 与 gearman 链接，但尝试时：

```
#gcc test.c -lgearman
ld：找不到 -lgearman 的库
collect2: ld 返回 1 个退出状态

```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T02:17:47.077

也许您需要定义 lib 路径，例如 `-L/usr/lib/`，使用您的 libgearman.a 存储路径来替换`-L/usr/lib/`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T02:33:23.377

可能你需要定义“包含路径”和“lib路径”，例如/usr/local中的头文件“libgearman/gearman.h”，/usr/local/libgearman中的库libgearman.so /lib

编译命令，如 gcc -I/usr/local -L/usr/local/libgearman/lib test.c -lgearman

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-22T20:50:47.810

[如此处](http://gearman.info/libgearman/gearman_worker_create.html)所述，您必须将其与 -lgearman 链接

```
gcc test.c -lgearman 
````

# java - 确定数字是否“平淡”的方法

> ID：12851192
> 
> 赞同：0
> 
> 时间：2012-10-12T01:58:16.340
> 
> 标签：java, compiler-errors

所以我的任务是编写一个程序来确定一个数字是否平淡。意思是，如果你取一个数字：57，然后加上每个数字的平方，5*5 + 7*7，这就是现在的新数字：74。然后你一直这样做，直到你得到 58，这意味着这个数字不是平淡无奇的，或者你得到 1，这意味着这个数字是平淡的。58 只会重复一个总是以 58 结束的序列。

所以我想尝试一些基本的递归，但也许我误解了这里递归的使用。

以下是我写的两个相关方法：

```
public static boolean insipid(int num){

    int dig1 = 0, dig2 = 0, dig3 = 0; // num = 159 for example, dig1 would be 1\. Default is 0 in case of a 2 digit number, dig1*dig1 = 0
    if(num == 58){ //The number is not insipid
        return false;
    }
    if(num == 1){ // the number is insipid
        return true;
    }

    if (num < 10){
        insipid(num * num);
    }
    if(num>99){
        dig1 = (int)(num / 100);
        dig2 = (int)((num - 100)/10);
        dig3 = num - (((int)(num / 10))*10);
        insipid(squaresum(dig1,dig2,dig3));
    }
    else{
        dig2 = (int)(num/10); //the 10s place
        dig3 = num - (((int)(num/10)) * 10); // the 1's place
        insipid(squaresum(dig1, dig2,dig3)); //dig1 = 0 so I just pass it along with it.
    }
}

public static int squaresum(int dig1, int dig2, int dig3){
    //Returns the sum of three digits squared.
    return (dig1 * dig1) + (dig2 * dig2) + (dig3 + dig3);
} 
```

它给了我一个错误，说只要我提供一个数字，Insipid() 就必须返回一个布尔值。但是我知道对于任何数字，它最终*总是*会解析为 58 或 1。所以不应该总是返回 true 或 false ，所以返回一个布尔值并且错误无效？显然情况并非如此，而是我如何看待它。是这里使用的递归无效吗？

另外，如果您对我如何清理它有任何建议，我不介意严厉批评，我的 java 不是很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T02:04:40.850

如果您使用您的解决方案，唯一缺少的是来自递归调用的 return 语句`incipid`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T02:04:10.257

更新你平淡如下。用 声明的方法`return`在所有情况下都必须返回值。如果您的方法达到第二个其他值，即如果数字不是 1 和 58，则您的方法不会返回任何值。

```
public static boolean insipid(int num){
  boolean returnValue = false;
  if(num == 58){ //The number is not insipid
   //do nothing
  } if(num == 1){ // the number is insipid
    returnValue = true;
  }else{
    int dig1 = 0, dig2 = 0, dig3 = 0; // num = 159 for example, dig1 would be 1\. Default is 0 in case of a 2   digit number, dig1*dig1 = 0
    if (num < 10){
        returnValue = insipid(num * num);
    }
    else if(num>99){
        dig1 = (int)(num / 100);
        dig2 = (int)((num - 100)/10);
        dig3 = num - (((int)(num / 10))*10);
        returnValue = insipid(squaresum(dig1,dig2,dig3));
    }
    else{
        dig2 = (int)(num/10); //The 10s place
        dig3 = num - (((int)(num/10)) * 10); //the 1s place
        returnValue = insipid(squaresum(dig1, dig2,dig3)); //dig1 = 0 so I just pass it along with it.
    }
  }
  return returnValue ;
} 
```

请注意：我只是试图回答您关于退货问题的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T02:10:55.133

除了 Yogendra Singh 的回答之外，您还错误地计算了数字：例如

```
dig2 = (int)((num -100)/10); 
```

你假设百位数是 1。试试

```
dig2 = (int)((num - dig1 * 100)/10); 
```

同样对于`dig3`.

# ruby - 使用 ctags 从 Emacs 中的另一个 ruby gem 快速导航到函数的定义代码

> ID：12851193
> 
> 赞同：2
> 
> 时间：2012-10-12T01:58:16.433
> 
> 标签：ruby, emacs, ctags

我在 emacs 中有一个 ruby​​ 脚本。

```
require 'watir'
ie=Watir::IE.new 
```

当我将光标放在单词 IE 上并按 C+] 时，我希望 Emacs 打开 IE 类的定义，它位于 watir gem 的源代码中。

如何使用 Emacs 和 ctags 实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T04:46:49.070

在安装 gem 的目录中使用以下命令：

```
ctags -e -a --Ruby-kinds=-fF -o TAGS -R . 
```

`M-.`然后在光标位于`Watir`单词上方时按下Emacs。Emacs 将提示您输入 TAGS 文件的位置，然后它会跳转到类型的定义。

Emacs 中的基本 etags 用法：

`M-.`转到光标下的方法，在同一窗口中。第一次它要求提供 TAGS 文件。 `C-4 .`转到光标下的方法。打开一个新窗口。第一次它要求提供 TAGS 文件。 `M-,`循环到下一个选择。

# android - 如何在没有 R.raw 文件的情况下在 android 中初始化 MediaPlayer

> ID：12851195
> 
> 赞同：3
> 
> 时间：2012-10-12T01:58:26.393
> 
> 标签：android, audio, media-player

如何在没有 R.raw 或某种文件的情况下在 Android 中初始化 MediaPlayer？

如果我不使用某些文件初始化 MediaPlayer，我将在运行时收到空指针异常。但是当程序启动时，没有文件路径可供使用，因为用户还没有按下按钮从 SD 卡中选择 mp3 文件。

初始化媒体播放器时，还有另一个问题。它只需要一个 R.raw 类型的文件，而不是 SD 卡中文件的路径。如果我在 R.raw 目录中没有任何文件，那么我无法使用文件进行初始化。看来您需要本地 R.raw 文件夹中的音频文件来执行此操作。

```
 Mediaplayer player = MediaPlayer.create(this, R.raw.sample_music); 
```

有一个名为“setDataSource”的方法允许我设置文件的路径，但是我必须先初始化 MediaPlayer。

```
 player.setDataSource(selectedAudioPath); 
```

还有其他初始化 MediaPlayer 的方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T02:05:28.387

```
MediaPlayer mediaPlayer = new MediaPlayer();
mediaPlayer.setDataSource(filepath); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-10T21:37:31.840

这篇文章对我有帮助，下面的代码也可以：

```
Mediaplayer player = MediaPlayer.create(this, Uri.parse(File.getAbsolutePath())); 
```

# c# - 实体框架：检查实体的所有关系以供外键使用

> ID：12851199
> 
> 赞同：13
> 
> 时间：2012-10-12T01:59:24.113
> 
> 标签：c#, .net, asp.net-mvc, entity-framework, entity-framework-4

我有一个实体，我们称它为`CommonEntity`具有在许多其他实体中用作外键的主键。随着应用程序的开发，这些链接将继续增长。

我想要一种方法来查看是否`CommonEntity`可以安全地删除（即它不被任何其他实体使用）。

我意识到我能做到

```
if(!ce.EntityA.Any() && !ce.EntityB.Any() ... && !ce.EntityN.Any())
{
   //Delete
} 
```

但我希望有一种方法可以自动检查所有关系，因为我不喜欢每次添加新关系时都必须返回并手动更改此代码的想法。也许 EF4+ 中有一些我不知道的东西？

我认为可以使用事务范围来尝试删除对象并在失败时将其回滚，但我不确定这种方法是否有任何不利的副作用。

有更好的方法吗？

**编辑：**看起来 VS2012 使用了 EF5，即使项目是 .Net 4，所以即使它是从数据库生成的，它也使用 POCO 创建了模型。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-12T06:13:04.340

就让它失败吧。如果实体有很多关系，那么验证可能非常繁重。

```
public bool TryDelete(int id)
{
    try
    {
        // Delete
        return true;
    }
    catch (SqlException ex)
    {
        if (ex.Number == 547) return false; // The {...} statement conflicted with the {...} constraint {...}
        throw; // other error
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-12T04:49:05.450

你可以试试这个：

```
var allrelatedEnds = ((IEntityWithRelationships)ce).RelationshipManager.GetAllRelatedEnds();
bool hasRelation = false;
foreach (var relatedEnd in allrelatedEnds)
{
    if (relatedEnd.GetEnumerator().MoveNext())
    {
        hasRelation = true;
        break;
    }
}

if (!hasRelation)
{
    //Delete
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-08-04T09:47:39.023

您可以为此使用反射（如果您不想使用“在 SQL 上删除失败”）我写这个是因为我不想删除实体，只是想知道它是否与任何相关！

```
 public static object GetEntityFieldValue(this object entityObj, string propertyName)
        {
            var pro = entityObj.GetType().GetProperties(BindingFlags.Public | BindingFlags.Instance).First(x => x.Name == propertyName);
            return pro.GetValue(entityObj, null);

        }

 public static IEnumerable<PropertyInfo> GetManyRelatedEntityNavigatorProperties(object entityObj)
        {
            var props = entityObj.GetType().GetProperties(BindingFlags.Public | BindingFlags.Instance).Where(x => x.CanWrite && x.GetGetMethod().IsVirtual && x.PropertyType.IsGenericType == true);
            return props;
        }

public static bool HasAnyRelation(object entityObj)
        {

                var collectionProps= GetManyRelatedEntityNavigatorProperties(entityObj);

                foreach (var item in collectionProps)
                {
                    var collectionValue = GetEntityFieldValue(entityObj,item.Name);
                    if (collectionValue != null && collectionValue is IEnumerable)
                    {
                        var col = collectionValue as IEnumerable;
                        if (col.GetEnumerator().MoveNext())
                        {
                            return true;
                        }

                    }
                }
               return false;
} 
```

请注意：不得释放上下文，必须启用代理，并且知道它将获取所有相关记录到内存中（它太重了）

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-08-15T19:06:18.547

首先使用 EF 中的 Find 找到要删除的实体并将实体传递给下面的函数。如果函数返回 true，则表示无法删除并且存在外部数据。如果函数返回 false，则表示没有父记录或子记录，并且可以删。。

```
 public static bool DeleteCheckOnEntity(object entity)
   {
     var propertiesList = entity.GetType().GetProperties();
     return (from prop in propertiesList where prop.PropertyType.IsGenericType select prop.GetValue(entity) into propValue select propValue as IList).All(propList => propList == null || propList.Count <= 0);
   } 
```

# vb.net - 从 Gridview 到文本框的数据

> ID：12851204
> 
> 赞同：-2
> 
> 时间：2012-10-12T01:59:54.910
> 
> 标签：vb.net, datagridview

我在 vb.net 中有一个带有 datagridview 的表单，它在列中显示我的数据。我想要完成的是，在选择一行并按下编辑按钮后，将打开一个新表单并将该行拆分为正确的文本框以更新数据。datagridview 行显示不同类型的数据：姓名、电子邮件、日期等...有什么想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T11:32:28.340

在 EditButton 单击处理程序中，您可以使用 MyDataGridView.CurrentRow 属性访问 datagridview 中的选定行。

这个对象 - 一个 DataGridViewRow - 具有单元格，您可以通过索引单独访问这些单元格，然后获取它们的值：

...CurrentRow.Cells(n).Value

然后，您可以使用它来填写编辑表单中的项目。

完成编辑表单后，检索（更新的）值并将它们放回 CurrentRow.Cells(n).Value

如果您的 datagridview 是数据绑定的，那么您也可以直接使用数据存储，通过

...CurrentRow.DataBoundItem

这个对象的类型当然取决于你的配置；例如，它可能是一个 DataRow。

这应该足以让你继续前进。

最后说明您添加的“谢谢...”：您显然是该站点的新手。我不确定你为什么得到“downvotes”。这可能是因为您的问题相当初级（“家庭作业”），或者人们发现您的问题描述不够清晰/详细。请理解，答案（如果有）是“无偿”提供的，并且需要贡献者的“自愿”努力。可以理解的是，他们更喜欢你做大部分的工作/学习/尝试，然后再要求别人“为你做你的工作”。无意冒犯。

# algorithm - 如何检测时间序列数据中的显着变化/趋势？

> ID：12851208
> 
> 赞同：27
> 
> 时间：2012-10-12T02:00:39.197
> 
> 标签：algorithm, statistics, real-time, signal-processing, numerical

所以我有一个说 25 个样本的数组，我希望能够注意到它是从这 25 个样本时间间隔减少还是增加的趋势（基本上 25 个样本数组是我的缓冲区，每隔 1 毫秒就被填充一次）。

请注意，我正在寻找的是总体趋势，而不是单个导数（因为我会使用有限差分或其他数值微分技术获得）。

基本上我希望我的数据是嘈杂的，所以即使在进行过滤等之后也可能会有起伏。但这是我正在寻找的行为增加或减少的总体趋势。

我想整合每毫秒的增加/减少行为来触发一些事件，这更像是一个用户界面事件（闪烁 LED），所以只要我能检测到总体趋势，它就不必非常延迟处理。

提前致谢！

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-01T15:03:26.490

正如已经指出的那样，您不是在寻找导数。您确实在寻找时间序列的“重大变化”检测算法。

您肯定需要一个平滑滤波器（移动平均滤波器很好——请参阅[Bjorn](https://stackoverflow.com/a/12874212/181638)对此部分的回答）。

但除了平滑过滤器之外，您还需要一个**决策标准或阈值选择器**，您将决定过滤后的变化是否显着。

如果您的时间序列的基础统计数据是稳定的（固定时间序列），那么您可以使用**固定的统计阈值**，即与平均值的标准差。例如，如果您想要一个相当强的“警报”阈值，您可能会选择 2 个标准差（认为只在最强的 5% 回报时发出警报）。

如果潜在问题中没有任何内容表明您的时间序列是稳定的，即如果序列可能具有趋势，或者生成时间序列的基础过程在您监控时可能会经历根本性变化，那么您在信噪比 (mu/sigma) 的意义上，将需要使用动态或**自适应阈值。**然后，您可以选择检测所有通过信噪比测试的“有意义”元素。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-13T14:49:18.373

在我看来，您根本不想要导数。听起来你想要一个低通滤波器。低通滤波器只是简单地去除快速变化的数据，并将较长、变化较慢的趋势留在原处。最直观的低通滤波器是移动平均滤波器，您可以在其中取最后 n 个输入的平均值，其中 n 是根据噪声与您正在寻找的趋势的大小确定的。这广泛用于从音频数据到图像处理再到失业数据（广泛引用的四个星期移动平均失业数据）。

如果您认为有必要，可以使用递归技术开发更有效/选择性的过滤器。您可以使用本教程创建低通滤波器。它是为音频编写的，但它适用于大多数数据。它向您展示了如何编写钟形滤波器，但低通滤波器更容易。

[http://blog.bjornroche.com/2012/08/basic-audio-eqs.html](http://blog.bjornroche.com/2012/08/basic-audio-eqs.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T04:03:01.480

如果您知道信号统计信息并将其用作 n 步提前预测器，则可以使用[维纳滤波器。](http://en.wikipedia.org/wiki/Wiener_filter)然后，您可以轻松地根据维纳滤波器的预测做出趋势决定。如果信号不是广义平稳的，并且您认为预测不能线性完成（非线性/非平稳过程），那么您可以使用像[LMS](http://en.wikipedia.org/wiki/Least_mean_squares_filter)滤波器这样的自适应维纳滤波器。

# jquery - 横向排列文本

> ID：12851209
> 
> 赞同：1
> 
> 时间：2012-10-12T02:00:48.573
> 
> 标签：jquery, html, css

众所周知，无论您是否有固定高度，文本都是从上到下的，除非您将溢出设置为隐藏。我想知道是否有办法让文本从垂直变为水平。就像在大屏幕上打开一个大 MS 字，您可以看到左侧的第一页和右侧的第二页。我想在我正在规划的网站中达到同样的效果。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T02:16:10.210

CSS Regions 在这里可能是一个很大的帮助，但截至今天，它们正在开发中，并且几乎没有浏览器支持。

但是你可以使用的是`column-count`和`column-gap`

这是我制作的小提琴：http: [//jsfiddle.net/MadLittleMods/wpTX7/](http://jsfiddle.net/MadLittleMods/wpTX7/)

这是一些将其水平拆分为 200px 高度内的列的 css。

```
#overflow_horizontal 
{
    height: 200px;
    overflow: scroll;

    -moz-column-count: 2;
    -moz-column-gap: 24px;
    -webkit-column-count: 2;
    -webkit-column-gap: 24px;
    column-count: 2;
    column-gap: 24px;
} 
```

**编辑：**

这是一个后备。jsFiddle：http: [//jsfiddle.net/MadLittleMods/SEDaQ/](http://jsfiddle.net/MadLittleMods/SEDaQ/)

小提琴确实有效，但不适用于 IE9，因为它不喜欢文本/纯资源。如果你能给我一个 Columnizer 的静态链接，我可以更新小提琴，它会工作得很好。

添加[Modernizr](http://modernizr.com/)和[Columnizer](http://welcome.totheinter.net/columnizer-jquery-plugin/)。

添加这个 jQuery（将 # 列更改为您需要的任何内容）：

```
$('.no-csscolumns > #overflow_horizontal').columnize({ 
    columns: 3
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T02:15:41.957

1\. 插入 -> 分节符 -> 分节符（下一页分节符）。

2\. 文件 -> 页面设置 -> 设置横向

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T02:15:56.623

我不知道你为什么要这样做，它听起来不像一个功能性网页，但如果你只是将元素宽度设置为 10000px 并溢出到自动你将能够让文本跑掉屏幕的一侧。

[http://jsfiddle.net/NHD2e/](http://jsfiddle.net/NHD2e/)

还有这个问题：[Continuing overflowed text in a different div?](https://stackoverflow.com/questions/7400174/continuing-overflowed-text-in-a-different-div)

# python - 如何在Python中实例的初始化过程中调用某些方法

> ID：12851210
> 
> 赞同：0
> 
> 时间：2012-10-12T02:00:51.630
> 
> 标签：python, oop

我是 Python 新手，

初始化`f`类的实例后`Fraction`，我希望该方法`reduce`已被调用，所以`print`结果是减少后

```
f = Fraction(3,6)

print f #=> 1/2 not 3/6 
```

这是代码：

```
class Fraction(object):
    '''Define a fraction type'''
    def __init__(self, num=0, denom=1):
        '''Create a new Fraction with numerator num and denominator demon'''
        self.numerator = num
        if denom != 0:
            self.denominator = denom
        else:
            raise ZeroDivisionError
    def reduce(self):
        gcd = findgcd(self.numerator, self.denominator)
        self.numerator /= gcd
        self.denominator /= gcd

    def findgcd(self, x, y):
        gcd = None
        min_number = min(x, y)
        for i in range(min_number, 1, -1):
            if x % i == 0 and y % i == 0:
                gcd = i
        return gcd

    def __repr__(self):
        return "{0}/{1}".format(self.numerator, self.denominator) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T02:02:58.060

是什么阻止您`self.reduce()`在方法结束时调用`__init__`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T02:03:45.590

你有两个问题：

1.  您需要调用`self.reduce()`构造函数`__init__`以`reduce()`在实例化阶段调用方法。
2.  你还需要改变：

    ```
    def reduce(self):
        gcd = findgcd(self.numerator, self.denominator) 
    ```

    到：

    ```
    def reduce(self):
        gcd = self.findgcd(self.numerator, self.denominator) 
    ```

因为否则您的实例将无法找到`findgcd`.

* * *

以下代码将解决您的问题：

```
class Fraction(object):
    '''Define a fraction type'''
    def __init__(self, num=0, denom=1):
        '''Create a new Fraction with numerator num and denominator demon'''
        self.numerator = num
        if denom != 0:
            self.denominator = denom
        else:
            raise ZeroDivisionError
        self.reduce()

    def reduce(self):
        gcd = self.findgcd(self.numerator, self.denominator)
        self.numerator /= gcd
        self.denominator /= gcd

    def findgcd(self, x, y):
        gcd = None
        min_number = min(x, y)
        for i in range(min_number, 1, -1):
            if x % i == 0 and y % i == 0:
                gcd = i
        return gcd

    def __repr__(self):
        return "{0}/{1}".format(self.numerator, self.denominator)

>>>> f = Fraction(3,6)
>>>> f
1/2 
```

# c# - 在 Silverlight 中按下鼠标

> ID：12851211
> 
> 赞同：1
> 
> 时间：2012-10-12T02:00:53.333
> 
> 标签：c#, silverlight, mouseevent, mouseenter

我正在 Silverlight 中开展一个项目。这就是问题：

当鼠标进入我的控件时，我想检查鼠标按钮是否已经按下。无法查看它何时被按下，因为它可能已在浏览器之外按下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:30:14.940

这是默认行为，这就是为什么将 mousebuttonup 事件用于进程的最终操作（例如单击按钮），如果您在按钮之外释放按钮，则不会处理其分配。

但是，您可以根据您的方案使用 Silverlight 的拖放功能找到解决方法。

# android - Android - 是否可以在视频通话期间以编程方式切换摄像头

> ID：12851212
> 
> 赞同：1
> 
> 时间：2012-10-12T02:01:05.173
> 
> 标签：android, video, android-activity, call, android-camera

我设法使用以下代码打开了视频通话：

```
 Intent callIntent = new Intent("com.android.phone.videocall");
    callIntent.putExtra("videocall", true);     
    callIntent.setData(Uri.parse("tel:" + "0528322206"));
    startActivity(callIntent); 
```

现在，我想以编程方式将摄像头切换到后置摄像头（默认情况下，屏幕使用前置摄像头，但我想使用后置摄像头）。可能吗？我可以用自己的活动替换整个屏幕，以便控制布局等吗？

# jquery - 选择子复选框不适用于 jquery 1.72

> ID：12851214
> 
> 赞同：1
> 
> 时间：2012-10-12T02:01:13.567
> 
> 标签：jquery, select, checkbox, version

我正在尝试创建一个复选框来控制 UL 列表的子复选框...这适用于 jquery 1.4 但不适用于 1.72。我在这里做错了什么？我认为它是选择器，但无法弄清楚。

```
 $(".checkboxFilter input:checkbox").change(function () {
        $(".checkboxFilter").find(':checkbox').prop("checked", this.checked);
  }); 
```

[http://jsfiddle.net/johncmolyneux/pqLts/2/](http://jsfiddle.net/johncmolyneux/pqLts/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T02:03:37.797

`:checkbox`选择器已弃用，请尝试使用该`$('[type=checkbox]')`方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T02:21:00.973

试试这个

```
$(function() {
    $(":checkbox").click(function() {
        $(this).parent().find(":checkbox").attr("checked", this.checked);
    });
});​ 
```

//或者

```
$(function() {
    $("input[type=checkbox]").click(function() {
        $(this).parent().find("input[type=checkbox]").attr("checked", this.checked);
    });
});​ 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/pqLts/7/)**

# c# - 如何在 C# 中创建具有受保护构造函数的类的实例

> ID：12851221
> 
> 赞同：-1
> 
> 时间：2012-10-12T02:02:22.003
> 
> 标签：c#

> **可能重复：**
> [带有私有密封类的 Activator.CreateInstance](https://stackoverflow.com/questions/440016/activator-createinstance-with-private-sealed-class)

我正在尝试访问具有受保护构造函数的类中的方法。谁能帮助我如何创建类的实例以访问其中的方法。

谢谢，

卡提克昆查姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T02:06:34.843

我假设您可以创建您描述的类的子类。所需要的只是您在自己的类中创建一个构造函数，该构造函数使用您需要的任何构造函数参数调用 base()。

```
public MyDerivedClass : OtherBaseClass
{
    MyDerivedClass() : base()
    { }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T02:17:23.110

外部世界无法访问具有受保护构造函数的类，而其派生类可以访问。如果你想创建那些派生类的实例，那么你可以，但是如果你想创建那个基类的实例，那么你可以引入一些基本返回类型的静态方法，它可以在每次调用时返回你的类的新实例实例方法，类似于单例模式，但不限于创建一个实例。

**第一种方式：**

```
public Base
{
    protected Base() { }
}

public Derived : Base
{
    public Derived() : Base() { } 
} 
```

用法：

```
Dervied d = new Derived(); 
```

**第二种方式：**

```
public Base
{
    protected Base() { }

    public static Base Instance() { return new Base(); }
} 
```

用法：

```
Base b = Base.Instance(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T02:05:39.823

具有受保护构造函数的类位于通常具有某种形式的返回实例的静态方法的类上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T02:07:32.110

该类是抽象类吗？如果是，那么我认为正确的做法是继承该类。

# cocos2d-iphone - 为什么 iPhone 5 在 Cocos2d 中会出现短暂的 Letterboxing 并显示 Default.png？

> ID：12851222
> 
> 赞同：4
> 
> 时间：2012-10-12T02:02:31.120
> 
> 标签：cocos2d-iphone, default.png

我有 Default-568@2x.png 可以正常加载。

但是，（在实际设备上）在显示 iPhone 5 之后，会以信箱模式显示 Default.png。然后它会加载 1136 × 640 px 的标题屏幕——这很好，它应该做什么。

我正在使用默认的 Cocos2d HelloWorld 模板。我没有更改 plist 中的任何内容或其他内容。

有任何想法吗？

为什么它会加载 Default.png 以及如何解决这个问题？

谢谢。

在 IntroLayer 我们有

```
-(void) onEnter

    if( UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone ) {
    background = [CCSprite spriteWithFile:@"Default.png"];
    background.rotation = 90;
} 
```

这就是 Default.png 出现的原因。

如果您使用的是 iPhone 5，如何继续显示 Default-568h@2x.png？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T03:32:21.293

我刚刚添加了另一个 if 语句：

```
 if ([UIScreen mainScreen].bounds.size.height == 568.0) {
        background = [CCSprite spriteWithFile:@"Default-568h@2x.png"];
        background.rotation = 90;
    } 
```

# matlab - 如何忽略matlab中的输出变量？

> ID：12851224
> 
> 赞同：4
> 
> 时间：2012-10-12T02:02:34.407
> 
> 标签：matlab

```
[dummy index] = sort(A); 
```

我想忽略排序函数的第一个输出，只保留索引。当我使用上述内容时，我在 matlab 编辑器中收到警告：

> 分配给 dummy 的值似乎未使用。

它建议使用 ~ 代替。当我使用〜。

```
[~ index] = sort(A); 
```

我收到以下错误：

> 在这种情况下，不允许使用 ~ 来忽略一个值。

有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-12T02:41:44.963

您必须添加一个逗号并分隔输出参数才能使 ~ 工作。

以下作品

```
[dummy index] = sort(A);
[dummy, index] = sort(A);
[~, index] = sort(A); 
```

但

```
[~ index] = sort(A); 
```

失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T02:10:23.490

它确实有效，尽管您的问题甚至没有显示您使用 ~ 您说您收到错误的地方。

```
A = rand(1,5);
[~,ind] = sort(A);

ind
ind =
     3     5     1     2     4 
```

# ruby-on-rails - 如何更新表以匹配更新的 gem

> ID：12851225
> 
> 赞同：0
> 
> 时间：2012-10-12T02:02:43.817
> 
> 标签：ruby-on-rails

我正在使用[active-record-reputation-system](https://github.com/twitter/activerecord-reputation-system/) gem，并希望将其更新为`v 2.0.0`.

gem 创建三个表，`RS_Evaluations`、`RS_Reputation_Messages`和`RS_Reputations`。这三个表已为 v 2.0.0 重命名，但它们不会通过简单地捆绑安装 v2.0.0 gem 在我的数据库中得到更新。

我该如何更新这些表？我是不是该：

**1) 只更新具有完整列内容的表名？**（据我所知，列名随更新而变化）。如果是这样，我该怎么做？

**2）删除旧表并创建新的正确表？**这并不理想，但不会杀死我，因为我在现有表中没有大量数据。我可以通过我的数据库查看器（即 PGAdminIII）简单地删除旧表吗？还是我需要迁移删除表的文件？

输入将不胜感激！

**更新**[迁移指南](https://github.com/twitter/activerecord-reputation-system/wiki/Migrate-to-Version-2.0)有一行 关于

```
Also, you need to update your database data as follow: 
UPDATE rs_reputation_messages SET sender_type = 'ReputationSystem::Evaluation' WHERE sender_type = 'RSEvaluation' 
```

我该怎么做呢？我只熟悉通过迁移文件更新数据库。这是直接对数据库进行的 SQL 调用吗？

# java - Collections.unmodifiableCollection() 的 hashCode 和 equals

> ID：12851229
> 
> 赞同：13
> 
> 时间：2012-10-12T02:03:08.230
> 
> 标签：java, collections, unmodifiable

该类`Collections`有许多静态辅助方法来提供各种集合类型的只读视图，例如`unmodifiableSet()`,`unmodifiableList()`等。对于这些视图对象，`hashCode()`and`equals()`方法将调用转发到底层集合......有一个奇怪的例外：`unmodifiableCollection()`.

JavaDoc[明确指出](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#unmodifiableCollection%28java.util.Collection%29)：

> 返回的集合不会*将*hashCode 和 equals 操作传递给支持集合，而是依赖于`Object`'s`equals`和`hashCode`方法。在支持集合是集合或列表的情况下，这对于保留这些操作的合同是必要的。

我的问题：这是在说什么？如果支持集合是集合或列表，我希望行为与`unmodifiableSet()`and一致`unmodifiableList()`。这将如何违反 hashCode/equals 合约？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-12T02:41:51.423

来自 JavaDoc for Collection：

> Object.equals 方法的一般约定规定 equals 必须是对称的（换句话说，a.equals(b) 当且仅当 b.equals(a) 时）。List.equals 和 Set.equals 的协定规定列表仅等于其他列表，并且集合与其他集合相同。因此，当将此集合与任何列表或集合进行比较时，既不实现 List 也不实现 Set 接口的集合类的自定义 equals 方法必须返回 false。（按照同样的逻辑，不可能编写一个同时正确实现 Set 和 List 接口的类。）

An`UnmodifiableList`是 an `UnmodifiableCollection`，但反过来也不一样——`UnmodifiableCollection`包裹 a`List`的an*不是*an `UnmodifiableList`。因此，如果将`UnmodifiableCollection`包装 List`a`的 an`UnmodifiableList`与包装相同 List的 an 进行比较`a`，则两个包装器不应该相等。如果您只是通过包装列表，它们将是平等的。

# c# - 使用进度 OpenEdge 4GL 中的 .NET Web 服务（数据集）

> ID：12851232
> 
> 赞同：0
> 
> 时间：2012-10-12T02:03:38.167
> 
> 标签：c#, .net, web-services, progress-4gl, openedge

我在 C# .net 中使用输入参数创建了 Web 服务：DataSet

另一方面，我需要从进度 OpenEdge 4GL 10.1（不是 10.2）使用这个网络服务

问题是 OpenEdge 中的数据集无法与 .net 中的数据集匹配。总是在结果中返回 0

我是 C# 程序员，所以对 porgress 没有深入的了解。我在进行中的论坛上进行了研究，但结果不佳。

有什么帮助吗？提前致谢。

*****代码* *** *******

 **//网络服务：C# .net

```
[webmethod]

public int getResult(DataSet ds)
{

  DataTable tbl = ds.Tables["datas"];

  int result=0;

  foreach (DataRow dr in tbl.Rows){ //only 1 record = 1 row

     result = Convert.toInt32(dr["field1"]); }

  return result;
} 
```

//进度 OpenEdge 10.1

--- 创建和填充临时表：field1 = 30 并且只有 1 条记录

--- 创建数据集并绑定到临时表

--- 连接到网络服务

--- 调用网络方法：

将变量结果定义为整数不撤消。

在 hPortType 中运行 getResult（输入数据集，输出结果）。

消息结果视图-作为警报框信息按钮确定。---> 结果总是 0

/ ***** ** ***** /

有人知道如何将正在进行的数据集“桥接”到 .net 数据集吗？

注意：如果从 .net 调用，此 Web 服务运行良好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T02:58:30.843

`DataSet`使用.NET 或任何其他特定于 .NET 的类型来发送到 Web 服务或从 Web 服务接收是一种不好的做法。.NET 以外的任何东西都没有理由理解这些类型。

顺便说一句，同样的事情与 Java 有关。某些版本的 Axis Web 服务基本上假定它们被 Java 代码使用，并且使用特定于 Java 的类型而不定义它们。没有很好地工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T08:15:12.023

对于 Web 服务，您应该使用 XML。那是标准化的沟通方式。

[http://en.wikipedia.org/wiki/Web_service](http://en.wikipedia.org/wiki/Web_service)**

# perl - Perl 数字排序：如何忽略前导字母字符

> ID：12851242
> 
> 赞同：2
> 
> 时间：2012-10-11T23:07:05.467
> 
> 标签：perl, sorting, arrays

我有一个像这样的 1,660 行数组：

```
...
H00504
H00085
H00181
H00500
H00103
H00007
H00890
H08793
H94316
H00217
... 
```

而且主角永远不会变。它总是“H”，然后是五位数字。但是当我在 Perl 中做我认为是数字排序的事情时，我得到了奇怪的结果。某些段按顺序排序，但随后会启动不同的段。这是排序后的一段：

```
...
H01578
H01579
H01580
H01581
H01582
H01583
H01584
H00536
H00537
H00538
H01585
H01586
H01587
H01588
H01589
H01590
... 
```

我正在尝试的是：

```
my @sorted_array = sort {$a <=> $b} @raw_array; 
```

但显然它不起作用。有谁知道为什么？

我应该补充一点，尽管这些值都以“H”开头，但仍有可能在未来我们可能会以其他字母开头的附加数据结束。这意味着删除 H，排序，然后替换 H，不是解决方案

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-12T02:19:32.397

如果你`use strict; use warnings;`按照你应该使用的方式使用，你会得到很多表单错误

```
Argument "H01578" isn't numeric in numeric comparison (<=>) 
```

你的元素都不是数字，所以它们都被认为是零。这就是 Perl 认为当前代码的结果已排序的原因。

* * *

如果要按字母排序，然后按数字排序（这与仅按数字排序相同，因为所有字母都相同）：

```
my @sorted_array = sort @raw_array; 
```

这是缩写

```
my @sorted_array = sort { $a cmp $b } @raw_array; 
```

如果您想按数字排序而不考虑前导字母，则可以改用以下内容：

```
my @sorted_array =
   sort { substr($a, 1) <=> substr($b, 1) }
    @raw_array; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-12T07:46:57.713

如果您想按初始字符作为主键，然后将数字作为辅助键进行排序，那么您可以使用[*Schwartzian 变换*](http://www.perlmonks.org/?node_id=9108)的变体，它在排序之前从所有数据中提取两个字段进行比较。

这个程序演示

```
use strict;
use warnings;

my @data = <DATA>;
chomp @data;

my @sorted = sort map $_->[0],
sort { $a->[1] cmp $b->[1] or $a->[2] <=> $b->[2] }
map [$_, /(.)(.+)/], @data;

print "$_\n" for @sorted;

__DATA__
A1180
B0802
B1284
C0899
C1455
C0765
A1207
A0909
C0921
C1060
A1067
B1486
A1268
B0772
C0595
B0734
A1004
A0607
A1323
B1181 
```

**输出**

```
A0607
A0909
A1004
A1067
A1180
A1207
A1268
A1323
B0734
B0772
B0802
B1181
B1284
B1486
C0595
C0765
C0899
C0921
C1060
C1455 
```

工具成功完成

您可能更喜欢不使用变换的替代方法。该程序具有相同的输出，但对于大型数据集运行速度会慢得多

```
my @sorted = sort {
  my @a = $a =~ /(.)(.+)/;
  my @b = $b =~ /(.)(.+)/;
  $a[0] cmp $b[0] or $a[1] <=> $b[1];
} @data; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-12T13:19:20.797

要忽略任何不是数字的内容，您还可以：

```
use strict;
use warnings;

my @sorted =    sort {
                        (my $x = $a) =~ s/\D//g;
                        (my $y = $b) =~ s/\D//g;
                        ($x?$x:0) <=> ($y?$y:0)
                } <DATA>;
print "$_" for @sorted;

__DATA__
a123
a/9999/gyu
b2
333
bbb
c888hh
0 
```

结果：

```
bbb
0
b2
a123
333
c888hh
a/9999/gyu 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T02:03:06.667

你想要这样的东西：

```
my @sorted_array = sort {substr($a, 1) <=> substr($b,1)} @raw_array; 
```

有关示例，请参见：http: [//ideone.com/trnfy 。](http://ideone.com/trnfy)

如果您使用标准排序，没有`{...}`, 那应该也可以。您当前的代码可能失败，因为所有比较都返回 0，因为您正在对字母数字数据进行数字比较。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-12T13:43:32.760

您可以使用以下方法避免 Schwartzian 变换和其他相关噪声`List::UtilsBy::sort_by`：

```
use List::UtilsBy qw( sort_by );

my @sorted_array = sort_by { substr($_, 1) } @raw_array; 
```

# grails - 使用 LDAP 对用户进行身份验证。Grails 和 Groovy

> ID：12851247
> 
> 赞同：0
> 
> 时间：2012-10-12T02:05:51.330
> 
> 标签：grails, ldap

我正在尝试使用 LDAP 作为系统中用户的一种身份验证形式。现在我有一个登录页面，在他们输入用户名和密码后。系统将用户名与数据库进行核对，然后将用户名与活动目录进行匹配，从而检查密码是否匹配。但是，我不确定如何开始实施。那么，有没有人可以通过链接和指南指导我开始以及如何完成这个特定的功能。

非常感谢你们:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T02:15:04.220

看看[spring-security-ldap 插件](http://grails.org/plugin/spring-security-ldap)

# android - 使用 contenteditable div 监听 webview 的变化

> ID：12851249
> 
> 赞同：2
> 
> 时间：2012-10-12T02:06:20.817
> 
> 标签：android, webview

在Android平台的WebView中，是否可以在编辑了一个标有contenteditable=true的div时进行监听？

如果不可能，我的下一个最佳选择是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T03:52:01.980

您是否拥有在 WebView 中加载的网页？

Javascript 运行在 WebView 可以和宿主 Android 应用交互（[见这个指南](http://developer.android.com/guide/webapps/webview.html#BindingJavaScript)），而且监听似乎可以用 javascript 完成（[见这个](https://stackoverflow.com/questions/6256342/trigger-an-event-when-contenteditable-is-changed)），所以如果你可以修改网页并添加一个回调到 Android java 代码然后就可以完成了。

# spring - 如何在弹簧表单输入标签中设置默认值

> ID：12851252
> 
> 赞同：1
> 
> 时间：2012-10-12T02:07:04.510
> 
> 标签：spring, jsp

我在我的 JSP 页面中使用弹簧表单输入标签。使用休眠映射文件映射属性

```
<td>Package<form:input path="commandObject[${loop.index}].name"/></td> 
```

我的数据库中有一些默认值。我想在用户呈现表单时显示默认值。并且对这些值的修改应保存为数据库中的新行。

我怎么能做到这一点！提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T02:14:40.363

在控制器中添加默认值并将其分配给 pojo 中的属性。

`private static final String alpha = "apple";`

`public String name = alpha;`

你的getter和setter方法照常！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T13:51:15.443

上面的答案是一种方法，如果你有永远不会改变的默认值，那么它会起作用。要从数据库中获取默认值，有一个业务层，我们在其中从数据库中检索默认值并将它们保存到列表中。使用列表在 Jsp 中显示它们，即使我们编辑和提交已编辑的值也会保存为新行而不是更新默认值。

# linux - 如何为在 linux 中的文件内搜索文本创建别名

> ID：12851253
> 
> 赞同：0
> 
> 时间：2012-10-12T02:07:06.450
> 
> 标签：linux, shell, grep

我想为递归搜索目录内的文本创建自定义别名。目前我用这个

```
grep -r "text to search" /var/www/sites 
```

我要先

1.  仅搜索特定文件，例如仅 html 、 php 文件。
2.  我也想要文件的行号
3.  我想使命令的别名像 `myalias` 这样从命令行我只使用这个

`myalias text-to-search (without quotes)`

这可能吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T02:09:27.940

把它放在你的 ~/.bashrc 中：

```
wwwgrep() { 
    find /var/www/sites -name '*.php' -o -name '*.html' -exec grep -Hn "$1" {} \;
} 
```

然后

```
wwwgrep <PATTERN> 
```

最后（刷新您的环境）

```
exec bash 
```

# iphone - Xcode 框架资源处理

> ID：12851254
> 
> 赞同：4
> 
> 时间：2012-10-12T02:07:14.430
> 
> 标签：iphone, xcode, frameworks, resources

我是 Xcode 框架的新手。刚刚制作了一个捆绑包用作其他项目的框架。我的问题是：如何使资源 exp: .xib、图像可供其他项目使用？我已经尝试在构建阶段复制捆绑资源，但我不知道如何检索它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T04:16:30.417

这有点棘手。我依赖于 Karl Stenerud[在这里找到](https://github.com/kstenerud/iOS-Universal-Framework)的一些出色的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T03:56:18.273

添加资源（xib和图像）将它们复制到项目文件夹并拖放到Xcode项目>支持文件（或您创建的任何文件夹）中，并在弹出窗口中检查将项目复制到目标组并检查添加到目标..

然后你可以在 Build Phase > copy bundle resources 中找到这些资源

**编辑**！你的意思是问这样的问题：在你的项目中哪里可以找到[这些 Facebook 框架的图像？](http://i.stack.imgur.com/gxDTi.png)您是说在复制捆绑资源中找不到它们吗？

# jquery - 提交后的Jquery Ajax功能明文

> ID：12851260
> 
> 赞同：1
> 
> 时间：2012-10-12T02:08:27.077
> 
> 标签：jquery, ajax

我使用 Jquery Ajax 功能登录。现在我要做的是在单击按钮提交后清除输入文本。

这是我的JS代码

```
$(document).ready(function()
    {
        $("#login").click(function()
        {
            var action = $("#login_form").attr('action');
            var form_data =
            {
                username: $("#username").val(),
                password: $("#password").val(),
                ajax_login: 1
            };

            $.ajax(
            {
                type: "POST",
                url: action,
                data: form_data,
                success: function(response)
                {
                    if(response == 'success')
                        window.location.replace("home");
                    else
                        $("#message").html("<div class='error_log'><p class='error'>Invalid username and/or password.</p></div>");  
                }
            });
            return false;
        });
    }); 
```

有人有建议吗？感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T02:10:34.203

你可以这样`$("#username").val('');`做`$("#password").val('');`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T02:15:35.137

您可以在`complete :`ajaxrequest 的回调中执行此操作。只需将空字符串传递给`.val()`. 一旦ajax请求完成，这个函数就会运行..

```
complete: function(){
     $("#username").val('');
     $("#password").val('');              
 } 
```

# php - 如何在连接表上使用 mysql_fetch_array，但列具有相同的名称

> ID：12851261
> 
> 赞同：6
> 
> 时间：2012-10-12T02:08:37.377
> 
> 标签：php, mysql, sql

> **可能重复：**
> [如何使用 PHP 从具有多个同名列的 MySQL 行中获取结果？](https://stackoverflow.com/questions/1416980/how-to-fetch-result-from-mysql-row-with-multiple-same-name-columns-with-php)

我有两个表，它们共享相似的列名。

查询是：

```
SELECT a.name,b.name
FROM tablea a 
JOIN tableb b ON a.id = b.id 
```

结果被放入一个数组中：

```
while ($row = mysql_fetch_array($results)){
   $aname = $row['name'];
} 
```

一旦我添加到第二个表中，我注意到它`$aname`正在使用 tableb 的数据。

**问题**（s）：如何存储两`name`列，`$row['a.name']`不起作用。我的猜测是我可能需要为查询中的每个结果加上别名。有什么建议么？*我应该同样避免在未来给出列名*吗？

* * *

`I know mysql_* is deprecated. Save your energy.`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T02:09:31.137

你的猜测是对的。您需要`ALIAS`为列创建一个，以便您可以唯一地获取它，

```
SELECT a.name Name1, b.name Name2
FROM tablea a 
JOIN tableb b ON a.id = b.id 
```

那么你现在可以打电话了

```
$row['Name1'] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-12T02:16:12.937

有一种方法。

[`mysql_field_table()`](http://www.php.net/manual/en/function.mysql-field-table.php)给定`$result`句柄和序号位置，将告诉您结果集字段的名称。结合[`mysql_field_name()`](http://www.php.net/manual/en/function.mysql-field-name.php)，这应该是您需要的一切：

```
// Fetch the table name and then the field name
$qualified_names = array();
for ($i = 0; $i < mysql_num_fields($result); ++$i) {
    $table = mysql_field_table($result, $i);
    $field = mysql_field_name($result, $i);
    array_push($qualified_names, "$table.$field");
} 
```

您可以将其包装到您自己的`mysql_fetch_qualified_array`函数中，例如，为您提供一个关联数组 keyed on `"table.field"`：

```
function mysql_fetch_qualified_array($result) {
  ...
  // caching $qualified_names is left as an exercise for the reader
  ...
  if ($row = mysql_fetch_row($result)) {
    $row = array_combine($qualified_names, $row);      
  }
  return $row;
} 
```

# android - Mono android：如何通过应用程序在其末尾调用带有“#”的号码？

> ID：12851264
> 
> 赞同：3
> 
> 时间：2012-10-12T02:08:47.443
> 
> 标签：android

当我尝试使用此代码进行充电命令时：

```
var callIntent = new Intent(Intent.ActionCall);
callIntent.SetData(Android.Net.Uri.Parse("tel:*1400*123456789#"));
StartActivity(callIntent); 
```

后面的“#”不拨，只是*1400*123456789部分不拨#？

我试图通过一个变量来实现它，但又失败了！请问有什么问题和解决办法吗？

谢谢 。

非常感谢，我在这里找到了解决方案： [http ://code.google.com/p/android/issues/detail?id=1285](http://code.google.com/p/android/issues/detail?id=1285)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-01T13:29:25.753

我认为你应该使用它：

```
var callIntent = new Intent(Intent.ActionCall);
callIntent.SetData(Android.Net.Uri.Parse("tel:*1400*123456789"+Android.Net.Uri.Encode("#")));
StartActivity(callIntent); 
```

# facebook - 如何通过电子邮件发送指向安装在业务页面上的 Facebook 应用程序的链接

> ID：12851266
> 
> 赞同：1
> 
> 时间：2012-10-12T02:09:23.953
> 
> 标签：facebook, facebook-like

当我通过电子邮件发送指向安装在我的 Facebook 业务页面上的应用程序的链接时，电子邮件收件人不会被重定向到 facebook 应用程序，除非他们登录到 facebook。如果此人单击电子邮件链接并且他们没有登录到 Facebook，他们将链接到 Facebook 主页以登录或设置帐户。

这是我通过电子邮件发送给我的 Facebook 应用程序的链接，大多数人不会被定向到该应用程序，而我确实希望他们能够看到 Facebook 应用程序，如果可能的话，即使他们当时没有登录 facebook .

[https://www.facebook.com/LuxuryVacationsIncome/app_483454071672592](https://www.facebook.com/LuxuryVacationsIncome/app_483454071672592)

我去过创建应用程序的公司的技术支持，但他们无法解决问题

# c# - 为什么 GridView 中的所有页面都显示与第一页相同的数据？

> ID：12851273
> 
> 赞同：1
> 
> 时间：2012-10-12T02:09:45.670
> 
> 标签：c#, asp.net, data-binding

在将 GridView 的 Allowpage 设置为 true 后，我使用 GridView 来显示 excel 文件中的数据。所有页面都显示与第一页相同的内容。感谢任何告诉我原因的人！

GrdiView 的 HTML 代码是：

```
<asp:GridView ID="GridView_NewStaff" runat="server" AutoGenerateColumns="False" 
 CellPadding="4" Font-Size="Small" ForeColor="#333333" AllowPaging="True" 
 AllowSorting="True" onpageindexchanging="GridView_NewStaff_PageIndexChanging" 
 PageSize="20">
 <pagersettings firstpagetext="First" lastpagetext="Last">
     Mode="NextPreviousFirstLast" NextPageText="Next" PageButtonCount="4" 
     PreviousPageText="Previous" />
     <columns>...... 
```

C#代码是：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        bindGridView();
    }
}

protected void Button_ReadFile_Click(object sender, EventArgs e)
{
    bindGridView();
}

public void bindGridView()
{
    if (FileUpload_StaffInfo.HasFile)
    {
        string InfoFile_Name = Server.MapPath(InfoFileDirectory) + FileUpload_StaffInfo.FileName;
        FileUpload_StaffInfo.SaveAs(InfoFile_Name);

        dataTable_Excel = new DataTable();

        if (InfoFile_Name.EndsWith(".xlsx"))//Read Excel2007-2010 format file
        {
            StaffExcelXML StaffNewXML = new StaffExcelXML();
        StaffNewXML.ExcelInput(InfoFile_Name, ref dataTable_Excel)
        }
        else if (InfoFile_Name.EndsWith(".xls"))//Read Excel1997-2003 format file
        {
            StaffXLS StaffNewXLS = new StaffXLS();
        StaffNewXLS.ExcelInput(InfoFile_Name, ref dataTable_Excel);
        }

        GridView_NewStaff.DataSource = dataTable_Excel;
        GridView_NewStaff.DataBind();
    }
}

protected void GridView_NewStaff_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
    GridView_NewStaff.PageIndex = e.NewPageIndex;
    bindGridView();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T02:37:22.267

改变

```
GridView_NewStaff.PageIndex = e.NewPageIndex;
bindGridView(); 
```

至

```
GridView_NewStaff.PageIndex = e.NewPageIndex;
GridView_NewStaff.DataBind(); 
```

为 GridView 分配新的 Page 索引后，只需重新绑定 GridView 控件。

# java - java浮点数计算错误的原理

> ID：12851276
> 
> 赞同：0
> 
> 时间：2012-10-12T02:10:19.070
> 
> 标签：java

> **可能重复：**
> [浮点不准确示例](https://stackoverflow.com/questions/2100490/floating-point-inaccuracy-examples)

首先，我为我糟糕的英语道歉。

我们都知道Java浮点数计算错误。如下：

```
System.out.println(0.0934 * 1000);
System.out.println(0.0935 * 1000);
System.out.println(0.0936 * 1000); 
```

结果是

```
93.39999999999999
93.5
93.60000000000001 
```

我们可以使用*BigDecimal*来解决这个问题。

**我想知道错误的原理。什么原因导致问题。**

谢谢。

# spring - jBPM 与 Spring 和 Hibernate 集成的示例项目

> ID：12851284
> 
> 赞同：12
> 
> 时间：2012-10-12T02:11:16.543
> 
> 标签：spring, hibernate, jbpm

任何人都可以向我推荐一些`jBPM,`该用途`Spring`的示例应用程序吗？`Hibernate?`

我是新手`jBPM`，需要获得一些关于它的参考应用程序。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-12T08:29:41.167

下面是示例应用程序：[一个示例应用程序，旨在为需要使用 jBPM 5、Spring 和 Hibernate 构建应用程序的开发人员提供基础](https://github.com/Nijhazer/jbpm-spring-quickstart)

此外，这对您来说可能很有趣：[JBPM-using-Spring-Hibernate-JSF-MySQL-Maven](https://community.jboss.org/wiki/JBPM-using-Spring-Hibernate-JSF-MySQL-Maven?_sscc=t)

# c# - 克隆扩展不起作用

> ID：12851286
> 
> 赞同：1
> 
> 时间：2012-10-12T02:11:23.407
> 
> 标签：c#

我在下面缺少什么？当我尝试**list.Clone()**克隆没有出现在列表中。

[https://stackoverflow.com/a/222640/139698](https://stackoverflow.com/a/222640/139698)

```
class Program
{
    static void Main(string[] args)
    {
        List<Customer> list = new List<Customer>();
        list.Clone() //There is no Clone method in the list
    }
}

public static class Extensions
{
    public static IList<T> Clone<T>(this IList<T> listToClone) where T : ICloneable
    {
        return listToClone.Select(item => (T)item.Clone()).ToList();
    }
}

public class Customer
{
    public string ContactName { get; set; }
    public string City { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T02:14:46.777

客户必须实施 ICloneable，因为您的通用条件说 T 必须实施 ICloneable。

`public class Customer : ICloneable`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T02:20:37.927

您将需要在类上实现`ICloneable`接口。`Customer`此外，由于已经为`IList<T>`where定义了扩展方法`T is ICloneable`，您可能希望使用以下语法

```
 IList<Customer> list = new List<Customer>();
        list.Clone(); 
```

如果不实现，`Clone()`扩展方法将不可见`Customer``ICloneable`

# java - 触发另一个 Spinner 的微调器

> ID：12851289
> 
> 赞同：0
> 
> 时间：2012-10-12T02:11:48.557
> 
> 标签：java, android, android-spinner

```
mySpinner.setOnItemSelectedListener(new OnItemSelectedListener() {
    @Override
    public void onItemSelected(AdapterView<?> parentView, View selectedItemView, int position, long id) {
        // my code here, but I don't know how..
    }
} 
```

我认为它会是这样的：

1.  获取 mySpinner 的选中项位置
2.  `switch(pos)`
3.  更新微调器条目？我不知道...

我不确定最后一步该怎么做。帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T03:30:41.250

以这种方式尝试

```
 car.setOnItemSelectedListener(new OnItemSelectedListener() {

        public void onItemSelected(AdapterView<?> arg0, View arg1,
                int arg2, long arg3) {
            itemSelected = arg2;
              // add items to the cardetails spinner's adapter using the itemselected  and refresh the adapter using nofifyDataSetChanged()
        }

        public void onNothingSelected(AdapterView<?> arg0) {

        }
    });
    cardetails.setOnItemSelectedListener(new OnItemSelectedListener() {

        public void onItemSelected(AdapterView<?> arg0, View arg1,
                int arg2, long arg3) {

        }

        public void onNothingSelected(AdapterView<?> arg0) {

        }
    }); 
```

这里 car 和 cardetails 是微调器，您需要刷新与汽车微调器相关的适配器，以便微调器也得到刷新

# javascript - setTimeout 和 setInterval 哪个更好？

> ID：12851291
> 
> 赞同：-1
> 
> 时间：2012-10-12T02:12:48.760
> 
> 标签：javascript

以下代码来自'JavaScript by Example Second Edition'，我认为下面的代码更好

```
function scroller() {
    str = str.substring(1, str.length) + str.substring(0, 1);
    document.title = str;
    window.status = str;
}
setInterval(scroller, 300); 
```

旧代码是递归的，会继续每0.3秒调用一次，直到程序结束，我认为旧代码可能会导致堆栈溢出，对吧？

```
<html>
<!-- This script is a modification of a free script found at
the JavaScript source.
Author: Asif Nasir (Asifnasir@yahoo.com)
-->
<head>
    <script type="text/javascript">
        var today = new Date();
        var year = today.getFullYear();
        var future = new Date("December 25, " + year);
        var diff = future.getTime() - today.getTime();
        // Number of milliseconds
        var days = Math.floor(diff / (1000 * 60 * 60 * 24));
        // Convert to days
        var str =
         "Only " + days + " shopping days left until Christmas!";
        function scroller() {
            str = str.substring(1, str.length) + str.substring(0, 1);
            document.title = str;
            window.status = str;
            setTimeout(scroller, 300); // Set the timer
        } 
    </script>
</head>
<body onload="scroller()">
    <b>
        <font color="green" size="4">
Get Dizzy. Watch the title bar and the status bar!!
<br />
<image src="christmasscene.bmp">
</font>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T02:18:39.583

看看这里：

[“setInterval”与“setTimeout”](https://stackoverflow.com/questions/2696692/setinterval-vs-settimeout)

> **setTimeout**在 timeout 之后运行代码/函数**一次**。
> 
> **setInterval****以间隔**运行代码/函数，它们之间的超时长度。

对于您正在做的事情，您应该使用 setInterval。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T02:20:46.077

`setInterval`如果您不太关心准确性，例如轮询要满足的某些条件，那就太好了。

`setTimeout`如果您想要一个一次性事件或需要调整调用之间的间隔，例如一个时钟，它应该尽可能接近下一整秒后更新。

两者都可以用于以大约指定的时间间隔连续运行的事件，都可以取消，都只在大约（尽快）指定的时间间隔运行。

顺便说一句，OP 中的第一个代码示例不应该导致堆栈溢出，尽管它写得不是很好。

# android - Android如何在sqlite中检索前5条记录和最后5条记录

> ID：12851292
> 
> 赞同：1
> 
> 时间：2012-10-12T02:13:00.197
> 
> 标签：android, sqlite

在Android中，我需要知道如何在mysql中**检索当前索引的前5条记录和最后5条记录？**

我只知道如何检索**当前索引的前 5 条记录或最后 5 条记录**。

获取当前索引的前 5 条记录

```
Select * from myTable Where myid < 10 order by myid DESC Limit 10 
```

获取当前索引的最后 5 条记录

```
Select * from myTable Where myid > 10 order by myid ASC Limit 10 
```

但我不知道如何结合这两个陈述。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T06:57:58.767

要组合具有相同列数的两个查询，请使用`UNION`：

```
Select * from (Select * from myTable Where myid < 10 order by myid DESC Limit 10)
Union All
Select * from (Select * from myTable Where myid > 10 order by myid ASC Limit 10) 
```

（double-`Select`是必要的，因为 SQLite 不支持`Limit`. 的直接子查询`Union`。）

如果您希望对整体结果进行排序，只需`Order by mid`在末尾附加即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T04:21:50.940

尝试这个：

```
SELECT *
FROM   myTable 
WHERE  myid BETWEEN currentIndex-5 AND currentIndex+5 AND
       myid <> currentIndex 
```

**编辑：**

我假设您的`mid`列包含按顺序排列的数据，例如 1、2、3、4、n。

# c++ - 模板的赋值运算符（成员函数）实现的正确语法

> ID：12851294
> 
> 赞同：1
> 
> 时间：2012-10-12T02:13:11.740
> 
> 标签：c++, templates, operator-overloading, assignment-operator

这是 .hpp 文件：

```
template<typename T>
LinkedQueue<T> operator=(const LinkedQueue<T> & lhs, const LinkedQueue<T> & rhs)
{
  m_data = rhs.m_data;
  m_next = rhs.m_next;
} 
```

该错误表明第一行必须是非静态成员函数。这是它所在的课程：

```
template<typename T>
class LinkedQueue:public AbstractQueue<T>
{
public:
  T m_data;
  LinkedQueue *m_next;

  LinkedQueue<T> operator=(const LinkedQueue<T> & rhs);
  LinkedQueue();
  void clear();
  void enqueue(T x);
  void dequeue();
  const T& front() const;
  bool isEmpty() const;

}; 
```

知道我做错了什么愚蠢的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T02:15:29.010

您应该在函数定义中添加一个类限定符，并删除未使用的`lhs`参数：

```
template<typename T>
LinkedQueue<T>& LinkedQueue::operator=(const LinkedQueue<T> & rhs)
//            ^--- & should be added to the declaration, too
{
    m_data = rhs.m_data;
    m_next = rhs.m_next;
    return *this;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T02:19:16.437

你应该这样写；

```
template<typename T>
class LinkedQueue:public AbstractQueue<T>
{
public:
  T m_data;
  LinkedQueue *m_next;

  LinkedQueue<T> & operator=(const LinkedQueue<T> & rhs)
  {
      if (this != &rhs)
      {
          m_data = rhs.m_data;
          m_next = rhs.m_next;
      }

      return *this;
  }
  LinkedQueue();
  void clear();
  void enqueue(T x);
  void dequeue();
  const T& front() const;
  bool isEmpty() const;

}; 
```

# tfs - 将顶级 TFS Scrum Bug 或 PBI 分配给用户的常见做法是什么？（与任务相比）

> ID：12851297
> 
> 赞同：2
> 
> 时间：2012-10-12T02:13:52.237
> 
> 标签：tfs

我没有发现将顶级错误或产品积压项目分配给个人有多大好处……因为每个人都有一组与之相关的任务，这些任务分配给个人。完成每项任务后，我将顶级项目标记为已完成。

我想知道将它们分配给用户有什么好处？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T20:02:33.783

但是，我想不出这对开发人员有什么好处。

**项目服务器集成**

有些人只将 PBI/UserStory 级别同步到 Project Server，因此将这些分配给人员对于使用项目的项目经理来说可能很有价值。

**所有者不是实干家**

我看到的另一件事是人们将 PBI 分配给负责使其保持最新状态的人，或者只是有最初想法的人。这样，如果对 PBI 有任何疑问，人们就知道该与谁交谈。

我个人也没有分配它们。

# colors - 识别图像中嘴部区域内的牙齿区域

> ID：12851299
> 
> 赞同：3
> 
> 时间：2012-10-12T02:14:15.220
> 
> 标签：colors, image-manipulation, detection

我正在尝试进行图像处理，其中将提示用户将嘴巴部分包含在图像中。一旦用户这样做，我的应用程序应该识别出可以识别牙齿的像素（颜色从白色到黄色不等），然后我只想照亮那些像素。有人可以指导我如何进行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T02:50:28.117

老实说，您的问题非常广泛，因为足够的答案将涉及大量领域。

不过，您尝试尝试的方法称为[Pattern Recognition](http://en.wikipedia.org/wiki/Pattern_recognition)。更具体地说，您的问题是针对图像分析的，主要涉及[模板匹配](http://en.wikipedia.org/wiki/Template_matching)：

> 模板匹配是数字图像处理中的一种技术，用于查找与模板图像匹配的图像的小部分。它可以在制造中用作质量控制的一部分、移动机器人的导航方式或检测图像边缘的方式。

**模板匹配页面有一个类似 C 语言的示例算法，它演示了您正在尝试做什么（识别图像中的特定颜色）。**

至于如何解决这个问题，一般来说，您必须加载图像，将其存储到数组中，然后尝试按照算法建议的方式对其进行操作：

> 对彩色图像执行模板匹配的一种方法是将像素分解为其颜色分量，并使用分别为每种颜色计算的绝对差之和 (SAD) 测量颜色模板和搜索图像之间的匹配质量。

当然，有许多不同语言的项目可以为您做到这一点。**我的建议是阅读更多关于该主题的内容，选择一种语言，并根据需要尝试使用库的解决方案。**

您可能会发现对您很有帮助的一本书是经典的[Phillips：](http://homepages.inf.ed.ac.uk/rbf/BOOKS/PHILLIPS/)即使您不想使用 C 语言，也可以使用 C 语言进行图像处理。为什么？因为它详细介绍了它们如何工作以及如何实现它们的许多算法细节。而且，它也是免费的。

# c# - 在 C# 中将文件写入 Android

> ID：12851303
> 
> 赞同：4
> 
> 时间：2012-10-12T02:14:40.363
> 
> 标签：c#, android, file

我正在用 C# 编写一个 Windows 窗体应用程序，我想将文件从我的 C:\ 驱动器上的目录复制到我的 Android 手机上的“Computer\SPH-D710\Phone\Music”目录中。我刚刚从 Windows 资源管理器复制并粘贴到这篇文章的那个音乐路径，但 C# 无法将其识别为有效目录，可能是因为没有“C:\”之类的。

可以将文件写入 Android 的 C# 命令是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T04:36:10.187

您的手机似乎已作为 MTP 设备（媒体传输协议）连接。它不像文件系统访问（USB 大容量存储）那么简单。阅读这些系列的博客，了解如何做到这一点，它不是一个简单的文件副本。

[https://docs.microsoft.com/en-us/archive/blogs/dimeby8/sending-mtp-commands-through-wpd-part-1-without-a-data-phase](https://docs.microsoft.com/en-us/archive/blogs/dimeby8/sending-mtp-commands-through-wpd-part-1-without-a-data-phase)

[https://docs.microsoft.com/en-us/archive/blogs/dimeby8/sending-mtp-commands-through-wpd-part-2-data-to-the-device](https://docs.microsoft.com/en-us/archive/blogs/dimeby8/sending-mtp-commands-through-wpd-part-2-data-to-the-device)

[https://docs.microsoft.com/en-us/archive/blogs/dimeby8/sending-mtp-commands-through-wpd-part-3-data-from-device](https://docs.microsoft.com/en-us/archive/blogs/dimeby8/sending-mtp-commands-through-wpd-part-3-data-from-device)

请注意，您将为此深入研究一些非托管代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T02:31:37.500

用于存储文件的 .NET 库并不真正关心它们将文件保存在哪里。您的 Android 设备被视为 USB 存储设备（从手机的角度来看，只要 USB 存储已打开！）。我建议您放置一些 C# 代码，以便我们可以在您正在运行的例程中发现错误，以便将文件实际保存到手机。

举个简单的例子——你的 C# 代码可能看起来像这样：

```
string filePath = @"G:\Music\MySong.mp3";
System.IO.File.WriteAllBytes(filePath, mp3FileContent); 
```

# python - python：为什么 IDLE 比终端慢？

> ID：12851313
> 
> 赞同：3
> 
> 时间：2012-10-12T02:16:02.743
> 
> 标签：python, terminal, comparison, python-idle

我刚刚编写了一个简单的 python 命令来检查 csv 文件中的一个大列表。csv 有 2 列，10K 行。当我将第二行输入到列表中并稍后打印列表时，IDLE 需要相当长的时间才能将其显示在终端（在 mac 下）迅速显示的位置。*顺便说一句，我在两台不同的机器上检查过——结果相同。

显然，没有人会在控制台上打印 10k 个项目，但一个明显比另一个快的想法让我想知道：为什么应该是 python 最好的朋友的 IDLE 这么慢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T02:31:25.973

大部分问题在于 IDLE 如何处理将文本打印到输出窗口。尝试注释掉该`print`语句，看看性能差距是否仍然存在。看到这个密切相关的线程：[Python：为什么 IDLE 这么慢？](https://stackoverflow.com/questions/2212722/python-why-is-idle-so-slow)

# c# - Windows 8 Metro - 在 C# 中的页面之间导航时出错

> ID：12851318
> 
> 赞同：0
> 
> 时间：2012-10-12T02:16:55.147
> 
> 标签：c#, windows, button, microsoft-metro

在 MainPage 上，我有一个按钮可以将我带到另一个页面。

```
private void button_clicked(object sender, Windows.UI.Xaml.RoutedEventArgs e)
{
     if (this.Frame != null)
     {
          this.Frame.Navigate(typeof(AnotherPage));
     }
} 
```

但是，它给了我这个错误：

错误 1“test.CreateAccountPage”不包含“button_createAccount_clicked”的定义，并且找不到接受“test.CreateAccountPage”类型的第一个参数的扩展方法“button_createAccount_clicked”（您是否缺少 using 指令或程序集引用？） C:\Users\Anggrian\Documents\Visual Studio 2012\Projects\test\test\CreateAccountPage.xaml 55 98

我向上帝发誓昨天成功了，现在我一无所知

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T02:31:30.830

尝试转到 C:\Users\Anggrian\Documents\Visual Studio 2012\Projects\test\test\CreateAccountPage.xaml 中的第 55 行并替换`button_createAccount_clicked`为`button_clicked`

# c# - 替换txt文件中的某个单词

> ID：12851319
> 
> 赞同：0
> 
> 时间：2012-10-12T02:16:58.647
> 
> 标签：c#

根据要求，我们将用户、密码和个人资料图片存储在 .txt 文件中。用户可以被重定向到个人资料修改页面，他们可以在其中更改密码和/或密码图片。

当用户单击“确定”时，我需要替换 .txt 文件中的密码和/或头像名称。

users.txt 文件的布局如下：

```
mike mike Avatar1
jessica123 123jessica Avatar4
mohd MoHd Avatar3
xiao AxiaoA Avatar2
anna abcANNAabc Avatar1 
```

在做了一些研究后，我尝试使用：

```
userFilePath = userFilePath.Replace(Session["password"].ToString(),
                                    passwordTextBox.Text); 
```

原始密码通过我用来在文件中查找原始文本的会话变量存储在登录时。

但这不起作用。我对 c# 很陌生。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T02:29:54.243

请注意，您只需更改相关行，许多用户可能具有相同的密码，因此您必须逐行读取文件，识别相关登录名，当然不要替换任何内容，因为登录名或头像也可以具有相同的值作为密码，但使用新信息重新创建该行，然后使用新的整个文本值保存文件。

只是针对这种需求的建议，最好使用关系数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T02:31:15.847

除了将信息存储在纯文本文件中并将密码保存为其他人已经提到的坏主意的明文之外，我认为最好避免在文件级别直接修改字符串。最好将其抽象为（列表）对象，然后修改对象并将其保存回磁盘。如果您仍想使用纯文本文件，您可以使用名为[FileHelpers的库轻松完成此操作，而无需重新发明轮子。](http://www.filehelpers.com/)

另外要考虑的事情是，如果您坚持将其保存在文本文件中，请切换到结构更好的文本文件，如 JSON 或 XML 格式。您不再需要使用上述库，因为 .NET 已经为这两者提供了反序列化器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T02:31:10.870

如果可能的话，您应该听取对您问题的评论的建议，而不是以这种方式这样做。

如果由于某种原因这是不可能的，那么这里是一个开始的地方。您希望在加载阶段将整个文件从文件系统加载到内存中，通常是在您的应用程序启动或第一次需要数据时。

一旦数据位于内存中的某个结构中，您就可以像更改 C# 中的任何对象一样进行更改。

完成对内存的更改后，您会将整个内容写回文件，覆盖旧文件。

所以你的问题是一个很大的问题，你如何从文件中读取数据？你如何在内存中创建一个数据结构来保存这个特定的数据集？以及如何将数据写回文件？我建议按照这个顺序一次处理一个。

哦，如果您没有数据库，但您可以更改文件格式，将其切换为 XML 或 JSON，然后将其从文件存储到内存并返回到文件的过程会容易得多。

# android - Android Gallery Image Adapter onItemClickListener 没有被调用等问题

> ID：12851320
> 
> 赞同：3
> 
> 时间：2012-10-12T02:17:07.913
> 
> 标签：android, android-gallery

我正在使用以下代码触发单击图库中的图像

```
 holder.imgPostImagesGallery.setOnItemClickListener(new AdapterView.OnItemClickListener() {

                    //handle clicks
                    @Override
                    public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
                        System.out.println("Iamge adapter clicked");
                        /*Show ImageViewerfragment*/
                        Intent intent = new Intent(getActivity(), ImagePagerActivity.class);
                        //Generate Image Array first
                        String[] urls=new String[1];
                        urls[0]=feedsTableList.get(position).post_content.images.get(position).toString();
                        intent.putExtra(Extra.IMAGES, urls);
                        intent.putExtra(Extra.IMAGE_POSITION, 0);
                        startActivity(intent);  
                    }                       
                }); 
```

图像适配器代码

```
public class ImageAdapter extends BaseAdapter {
    public ArrayList<String> images;
    private Context mContext;       
    public ImageAdapter(Context c,ArrayList<String> arrayImages) {
        mContext = c;
        images=arrayImages;
    }

    public int getCount() {
        return images.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }
    //http://www.edumobile.org/android/android-development/image-gallery-example-in-android/
    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView = new ImageView(mContext);
        imageView.setLayoutParams(new Gallery.LayoutParams(320, 320));          
        imageView.setBackgroundResource(R.drawable.black_button);
        imageLoader.displayImage(images.get(position), imageView, options);
        //Add tap listeners
        imageView.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

            }
        });
        return imageView;

    }

} 
```

图库工作正常，但单击/点击图像时没有任何反应。

而且，我似乎在画廊滚动方面遇到了问题，它似乎并不正确。滚动滞后，有时根本不滚动。我将它与 SlidingMenu 库一起使用。

**更新**：

正如 mukesh 指出的那样，我错过了 2 个点击事件。但是删除它们也无济于事；但添加我自己的 clicklistener 有帮助

```
//click listener for gallery
private class galleryPhotoClickListener implements OnItemClickListener{    
    private Context context;

    public galleryPhotoClickListener(Context context){
        this.context = context;
    }

    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position,
            long id) {
        Intent intent = new Intent(getActivity(), ImagePagerActivity.class);
        //Generate Image Array first
        String[] urls=(String[]) feedsTableList.get(position).post_content.images.toArray();
        urls[0]=feedsTableList.get(position).post_content.images.get(position).toString();
        intent.putExtra(Extra.IMAGES, urls);
        intent.putExtra(Extra.IMAGE_POSITION, 0);
        startActivity(intent);  

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T03:31:08.603

只使用一个 1 或 2

```
1\.  holder.imgPostImagesGallery.setOnItemClickListener(new AdapterView.OnItemClickListener() {

                    //handle clicks
                    @Override
                    public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
                        System.out.println("Iamge adapter clicked");
                        /*Show ImageViewerfragment*/
                        Intent intent = new Intent(getActivity(), ImagePagerActivity.class);
                        //Generate Image Array first
                        String[] urls=new String[1];
                        urls[0]=feedsTableList.get(position).post_content.images.get(position).toString();
                        intent.putExtra(Extra.IMAGES, urls);
                        intent.putExtra(Extra.IMAGE_POSITION, 0);
                        startActivity(intent);  
                    }                       
                });

    or

  2\. imageView.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub

                }
            }); 
```

# directx - 如何在 DirectX 11 中创建犹他茶壶？

> ID：12851325
> 
> 赞同：2
> 
> 时间：2012-10-12T02:17:43.250
> 
> 标签：directx, directx-11

在 DirectX 9 中，我们可以使用 D3DXCreateTeapot 函数来创建茶壶网格进行渲染，但是，D3D 11 似乎没有这个功能，D3D11 中有没有可以绘制茶壶的库或函数？我们通常需要一个通用的 3D 模型来执行一些图形效果，而茶壶总是默认的。

[犹他茶壶](http://en.wikipedia.org/wiki/Utah_teapot)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T11:39:50.230

DirectX 11 不再提供通用几何图形。

你可以看看这个项目，它有常见的几何图元（包括茶壶）和其他一些位：

[http://directxtk.codeplex.com/](http://directxtk.codeplex.com/)

# eclipse - sublime text - eclipse App Explorer 等价物

> ID：12851334
> 
> 赞同：1
> 
> 时间：2012-10-12T02:19:31.473
> 
> 标签：eclipse, sublimetext2

嗨，我想知道 Sublime Text 2 中是否有相当于 App Explorer 的功能。使用 eclipse 时，我使用 App Explorer 面板按文件名搜索。

我有一个文件命名约定，可以帮助我通过系统内的功能查找文件。所以说我想列出与注册过程相关的所有文件。我通过 App Explorer 搜索“regis”并获得相关文件的不错列表。这个过滤列表一直可用，直到我再次搜索。

我可以使用 Sublime Text 的 cmd+p 但更喜欢上面的，因为我可以看到文件夹层次结构等。本质上它只是文件夹列表上的文件名过滤器。

是否有任何插件可以给我类似的东西。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:46:09.167

不，据我所知，在 Sublime Text 2 中没有实现类似的功能。我建议在[Sublime 的 UserEcho 论坛上](http://sublimetext.userecho.com/)打开一个问题。

同时：

*   在 Sublime 的“GoTo Anything”面板中输入“regis”*会*调出你正在寻找的文件，并显示它们的路径（我意识到这并不能帮助你可视化层次结构，但它已经尽可能接近了）。

*   我使用了一个名为[SyncedSideBar的包 - 如果将](https://github.com/sobstel/SyncedSideBar)**打开**的文件添加到项目中，这至少会在侧栏中向您显示文件夹层次结构的可视化表示。

*   freewizard的[GoTo Folder](https://github.com/freewizard/SublimeGotoFolder)包可能会做一些类似于你正在寻找的东西，但我很难让它工作。也许你会取得更大的成功。

祝你好运！

# java - Ref值尚未初始化

> ID：12851336
> 
> 赞同：1
> 
> 时间：2012-10-12T02:19:36.653
> 
> 标签：java, google-app-engine, objectify

我收到此错误：

```
java.lang.IllegalStateException: Ref<?> value has not been initialized
    at com.googlecode.objectify.impl.ref.StdRef.get(StdRef.java:55)
    at com.mycomp.simplify.KeyValueVersion.getVersion(KeyValueVersion.java:59) 
```

尝试持久化此实体时：

```
public class KeyValueVersion {

        @Id
        private Long id;
        private Ref<Key> key;
        private Ref<Value> value;
        private Ref<Version> version;

        public KeyValueVersion() {

        }

        public KeyValueVersion(Key key, Value value, Version version) {
            setKey(key);
            setValue(value);
            setVersion(version);
        }

        public Key getKey() {
            return this.key.get();
        }
        public void setKey(Key key) {
            this.key = Ref.create(key.getKey(), key);
        }
        public Value getValue() {
            return this.value.get();
        }
        public void setValue(Value value) {
            this.value = Ref.create(value.getKey(), value); 
        }
        public Version getVersion() {
            return this.version.get();
        }
        public void setVersion(Version version) {
            this.version = Ref.create(version.getKey(), version); 
        }

        public Long getId() {
            return id;
        }

        public void setId(Long id) {
            this.id = id;
        }
    } 
```

这就是我坚持实体的方式：

```
public Version put(final Key key, final Value value) throws KeyException {
    final ExceptionWrapper ew = new ExceptionWrapper();
    Version v = ofy().transact(new Work<Version>() {
        @Override
        public Version run() {
            Version v = null;
            try {
                Version version = new Version(new Date().getTime());
                ofy().save().entity(key).now();
                ofy().save().entity(value).now();
                ofy().save().entity(version).now();
                com.googlecode.objectify.Key<KeyValueVersion> result = 
                        ofy().save().entity(new KeyValueVersion(key, value, version)).now();
                v = get(result).getVersion();
            } catch (EntityNotFoundException e) {
                ew.exception = new KeyPersistenceFailureException(key);
            } 
            return v;
        }
    }); 
    if(ew.exception != null) throw ew.exception;
    return v;
} 
```

这是运行这些代码的主要测试：

```
@Test
public void testCreateFetch() throws KeyException { 
    Value val = Value.createValue("John".getBytes());
    Key key = Key.createKey("uid:john:fname");
    Version ver = sfy.put(key, val); 

} 
```

*   的静态`createXxx`方法`Key`，`Value`并且`Version`只是创建这些类的新实例
*   该`put()`方法将实体保存到数据存储中，然后将它们传递到`KeyValueVersion`然后保存到数据存储中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T06:31:02.737

问题是您正在获取 KeyValueVersion 实体，然后尝试访问 Ref 的值。Objectify 默认情况下不加载引用，因此您尝试访问未初始化的 Ref。

我不太清楚您要做什么，但是如果您在 Ref 字段上添加 @Load，Objectify 会在您加载主实体时为您加载它们。

# android - 用于动画应用程序开发的 Android 手机的最佳配置是什么

> ID：12851339
> 
> 赞同：1
> 
> 时间：2012-10-12T02:20:06.023
> 
> 标签：android, resolution

在开发动画应用程序时，Android 手机（设备）的最佳配置是什么？

我们是否可以在 ldpi 或仅在 hdpi 和 xhdpi 分辨率上开发这些应用程序？

我们是否需要研究高端处理器？设备内存？

我们当前的 Android 应用程序有 800 多张图片，我们也在寻求压缩图片以防止内存泄漏。加载应用程序时，我们正在加载这 800 多张图片。但是我们为这个应用程序中的不同动画选择了大约 200 多张图像，例如跑步、哭泣、走路等。我们看到这个动画最初变得更快，但会变慢几秒钟，这会影响视频生成时间。所有图像都存储在设备上而不是服务器上。

我们可以从内存中清除其余未选择的图像吗？Android中图像压缩的最佳方法（或免费工具）是什么？

我们正在使用 r.drawable 选项，Android 将自动创建 ID 以映射到图像。

任何人都可以请帮忙。

谢谢

# android - 在多活动应用程序中实现 WakefulIntentService

> ID：12851340
> 
> 赞同：0
> 
> 时间：2012-10-12T02:20:14.220
> 
> 标签：android, commonsware-cwac

我有一个需要频繁轮询数据的应用程序。我有一个带有`TimerTask`实现的应用服务逻辑，但后来我被@Commonsware 转移到了[WakefulIntentService](https://github.com/commonsguy/cwac-wakeful)。

现在我的问题是我有多个活动屏幕来响应服务发出的广播意图。我如何确保对 scheduleAlarms 的调用只会被调用一次（或者我不必为此烦恼？）。实际的问题是 scheduleAlarms 的代码放置在一个超类的 onCreate 上，如果不是所有的活动都从该超类扩展，因此会导致安排多个警报。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:00:09.620

我不确定你想做什么，但这就是我所做的：

在某项活动中：

```
Calendar cal = Calendar.getInstance();
cal.add(Calendar.SECOND, 30);
Intent intent = new Intent(this, AlarmReceiver.class);
PendingIntent pendingIntent = PendingIntent.getBroadcast(this, 0, intent, 0);

AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), 30000, pendingIntent); 
```

这会设置一个警报，该警报每 30 秒触发一次 AlarmReceiver 类。

在 AlarmReceiver 我有这个：

```
package com.android.example;

import com.commonsware.cwac.wakeful.WakefulIntentService;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;

public class AlarmReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {

        Intent i = new Intent(context, AlarmService.class);
        WakefulIntentService.sendWakefulWork(context, i);

    }
} 
```

在 AlarmService 我有这个：

```
package com.android.example;

import android.content.Intent;
import com.commonsware.cwac.wakeful.WakefulIntentService;

public class AlarmService extends WakefulIntentService {

    public AlarmService() {
        super("AlarmService");
    }

    @Override
    protected void doWakefulWork(Intent arg0) {

        //DO WAKEFUL STUFF

    }
} 
```

我会告诉你什么：它有效！

我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T10:51:18.397

> 我有一个需要频繁轮询数据的应用程序。我有一个带有 TimerTask 实现的应用服务逻辑，但后来我被 @Commonsware 转移到了 WakefulIntentService。

`WakefulIntentService`专为我认为不频繁的间隔（最多每隔几分钟）而设计，与任何 UI 分离运行。听起来这不是您使用它的方式。

> 如何确保对 scheduleAlarms 的调用只会被调用一次

跟踪您何时调用它。

> 还是我不必为此烦恼？

这在一定程度上取决于时间表。

对于您针对特定时间的警报（例如，下周二下午 4 点），您可以盲目地重新安排它们，因为下周二下午 4 点不会改变。`PendingIntent`如果您每次都使用等效的，Android 将在用新警报替换旧警报的过程中取消旧警报。

对于定期警报（每 N 分钟/小时/天），您可以盲目地重新安排它们，但需要注意一点：除非您小心避免，否则您的日程安排会略有变化。假设您希望每天响一次闹钟。在最后一次闹钟响起 12 小时后，您将闹钟重新安排为每天再次响起一次。如果您想确保闹钟在另外 12 小时后仍然响起（以遵守您原来的时间表），您需要知道这是必需的，并将`setRepeating()`呼叫中的初始事件设置为正确的时间。

# python - 如何在另一个字符串之后返回一个子字符串？

> ID：12851343
> 
> 赞同：0
> 
> 时间：2012-10-12T02:20:42.503
> 
> 标签：python, string, substring

我有一个长字符串，我试图在它出现在另一个字符串之后返回一个字符串。例如，我首先在字符串中查找字符串 'zombiesattack'，然后查找名为 'title' 的字符串出现的第一个位置，并希望打印保存在 'title' 和 '/title' 之间的文本到另一个名为“titleOfVideo”的变量。我在这样做时遇到了一些困难。有什么建议吗？

# 存储在名为 data 的变量中的字符串

```
data= <updated>2012-10-10T19:20:55.000Z</updated>
<abc>zombiesattack</abc>
<category scheme="http://schemas.google.com/g/2005#kind" term="http://gdata.youtube.com/schemas/2007#video" />
<category scheme="http://gdata.youtube.com/schemas/2007/categories.cat" term="Sports" label="Sports" />
<title>NY Yankees: 6 Essential Pieces of Postseason Memorabilia</title> 
```

我想将“NY Yankees: 6 Essential Pieces of Postseason Memorabilia”保存到变量“titleOfVideo”中。

```
starting_point = data.find('zombiesattack')
new_string = data[starting_point:]
title_point = new_string.find('<title>')
print new_string[:title_point]

titleOfVideo = new_string[title_point:20] 
```

当我尝试这个并打印 titleOfVideo 时，我得到了一堆返回行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T02:32:38.277

对于这个特定的例子：

```
starting_point = data.find('zombiesattack')
new_string = data[starting_point:]
title_start = new_string.find('<title>')
title_end = new_string.find('</title>')
titleOfVideo = new_string[title_start + len('<title>'):title_end] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T02:35:38.400

请改用 XML 解析器，例如 ElementTree：

```
from xml.etree import ElementTree
# you need a valid xml string
data = '<root>' + data + '</root>'
etree = ElementTree.fromstring(data)
if etree.findtext('abd') == 'zombiesattack':
    titleOfVideo = etree.findtext('title') 
```

# javascript - Box2D Emscripten：box2d.clean.h是什么，如何成功生成？

> ID：12851351
> 
> 赞同：2
> 
> 时间：2012-10-12T02:22:39.017
> 
> 标签：javascript, c++, compilation, box2d, emscripten

我可能错过了一些简单的东西，但我无法弄清楚。

这是来自[makefile](https://github.com/kripken/box2d.js/blob/master/Makefile)：

```
box2d.clean.h:
    cpp -x c++ -DEM_NO_LIBCPP -IBox2D_v2.2.1 root.h > box2d.clean.h 
```

让我们看一下[root.h](https://github.com/kripken/box2d.js/blob/master/root.h)：

```
// Prevent some inclusions
#define NDEBUG

#ifdef EM_NO_LIBCPP
#define _FEATURES_H
#define _GLIBCXX_CMATH
#define _GLIBCXX_CXX_CONFIG_H
#define _CPP_TYPE_TRAITS_H
#define _EXT_TYPE_TRAITS
#define _GLIBCXX_NUMERIC_LIMITS
#define __GNUC_PREREQ(x, y) 0
#define _STL_RELOPS_H
#define _STL_PAIR_H
#define _FUNCTEXCEPT_H
#define _EXT_NUMERIC_TRAITS
#define _STL_ITERATOR_BASE_TYPES_H
#define _STL_ITERATOR_H
#endif

#include <Box2D/Box2D.h> 
```

好的。是的，我看到我们通过定义它们的包含保护来防止包含多个标题。像`<Features.h>`.

我的问题：

阻止包含这些标头的目的可能是什么？

应该给什么命令`cpp`起别名？在我的机器上，我看到了这个输出：

```
cpp -x c++ -DEM_NO_LIBCPP -IBox2D_v2.2.1 root.h > box2d.clean.h
i686-apple-darwin11-llvm-gcc-4.2: c: No such file or directory
i686-apple-darwin11-llvm-gcc-4.2: c++: No such file or directory
i686-apple-darwin11-llvm-gcc-4.2: warning: '-x -x' after last input file has no effect
i686-apple-darwin11-llvm-gcc-4.2: no input files 
```

为什么会`gcc`找`c`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T15:35:08.617

`cpp`我能够通过删除 和 之间的空格来解决该命令`-x`的问题`c++`。

`cpp -xc++ -DEM_NO_LIBCPP -IBox2D_v2.2.1 root.h > box2d.clean.h`

# matlab - MATLAB 热图

> ID：12851352
> 
> 赞同：13
> 
> 时间：2012-10-12T02:22:44.047
> 
> 标签：matlab, heatmap

我正在尝试使用 MATLAB 创建热图，但 MATLAB 程序中的默认函数对我来说没有任何意义。

[http://www.mathworks.com/help/bioinfo/ref/heatmap.html](http://www.mathworks.com/help/bioinfo/ref/heatmap.html)

有没有人可以先帮我贴标签，然后我可以自己阅读其他功能？或者是否有任何其他程序具有更用户友好的界面？

```
HeatMap(Data, ...'RowLabels', RowLabelsValue, ...) 
```

我有一个`81*2`矩阵数据集，我的标签是`81*1`x 轴和`1*2`y 轴的单元格。现在我可以成功导入 excel 数据并使用热图绘制数据，但是我很难在 HeatMap 函数中填写变量。

非常感谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-03T19:20:59.267

HeatMap 实际上并不是这个的标准函数，它来自 Bioinformatics Toolbox。绘制热图的简单方法可能如下：

```
 A = 1:50;          % matrix to draw
 colormap('hot');   % set colormap
 imagesc(A);        % draw image and scale colormap to values range
 colorbar;          % show color scale 
```

正如@natan 建议的那样，您可能希望先构建矩阵，然后使用`image`or进行绘制`imagesc`。此外，您可能希望在我的博客上看到文章，该文章表明[某些颜色集比其他颜色集更易于访问](https://dotnetbattlefield.taurit.pl/matlab-heatmap-colormap/)，例如灰度打印或色觉缺陷。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T15:29:46.057

我不确定您实际上要完成什么，但我认为您可能想要使用[colormap{}](http://www.mathworks.com/help/matlab/ref/colormap.html "颜色图（）")。如果您正在尝试创建经典的“[热图](http://en.wikipedia.org/wiki/Heat_map)”，那么颜色图就是您想要的功能。基本上，如果您有 x,y 位置和想要表示为颜色的 Z 值，这就是您的窍门。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-15T15:41:40.340

MATLAB [contourf](http://www.mathworks.com/help/matlab/ref/contourf.html)命令可能对您有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-05T07:19:59.117

您可以使用[Plotly MATLAB](https://plot.ly/api/matlab) API 制作热图。尝试这个：

```
r = plotly({struct('z',randn(50,50), 'type','heatmap')}) % => https://plot.ly/~matlab_example/18dos(['open ', r.url]) 
```

![这张热图](../Images/6375c53cffa2b1c872b0c8fa98eaf917.png)

[您可以在此处](http://undocumentedmatlab.com/blog/plotly-graphs)查看交互式版本和安装。

披露，我在 Plotly 团队。

# php - 用于监控许可证到期并在大约一个月前通知管理员的 php 代码

> ID：12851361
> 
> 赞同：1
> 
> 时间：2012-10-12T02:25:39.377
> 
> 标签：php, html

我需要一个 php 代码来监控不同注册工人的许可证的到期日期。此外，只要其中一个工作人员的许可证即将到期或已经过期，管理员就需要收到通知，以便他们向该工作人员发送电子邮件。

这是我到目前为止所做的代码..（但通知部分还没有在这里，我试图首先关注开始和到期日期。）谢谢！

```
<?php
session_start();

$connect = mysql_connect("localhost","root","") or die ("could'nt connect to db");
mysql_select_db("tesda") or die ("cant connect");
$table = 'exdates';

?>
<html>
<head>
<title>untitled</title>

<script type="text/javascript">
    window.onload = function(){
        new JsDatePick({
            useMode:2,
            target:"inputField",
            dateFormat:"%Y-%m-%d"
        });
    };
</script>
<script type="text/JavaScript">
<!--
function timedRefresh(timeoutPeriod) {
    setTimeout("location.reload(true);",timeoutPeriod);
}
//   -->
</script>

<body>
<?php
$start = $_POST['startdate'];
echo 'Date(license received): ';
echo date("m - d - Y".$start);

$monthAgo = date("m/ d /Y",strtotime('+3 years'));
echo ' your license will expire on: '.$monthAgo;

if(date($monthAgo)=='-1 month'){
echo 'Your License will expire in 1 month!';}
?>

</body>
</head>
</html> 
```

我希望在数据库中手动编码开始日期，但到期日期将基于添加三年..当我尝试这个时，开始日期与计算机日期相同，并添加了 3 年到期日期..但是，我的问题是当我尝试更改计算机的日期时，开始日期以及到期日期也发生了变化..如果每次这台计算机中的日历更改时它都继续更改，它将如何过期？我应该怎么办？谢谢！:)

如果它总是这样，它到底怎么会过期..拜托，我真的需要你的帮助..我自己继续编辑它，但我做不到..谢谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T02:53:38.587

您需要更改日期计算：

```
<?php
$start = $_POST['startdate'];
echo 'Date(license received): ';
echo date("m - d - Y".$start);

$monthAgo = date("m/ d /Y",strtotime($start.' +3 years'));
echo ' your license will expire on: '.$monthAgo;

if(strtotime($monthAgo)<=strtotime('-1 month')){
echo 'Your License will expire in 1 month!';}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T02:53:48.427

从您的问题看来，您不希望客户能够更改他们的计算机时间来更改他们的许可期限。如果是这种情况，那么您应该在 PHP 脚本中从您自己的服务器中获取日期，以检查他们的订阅时间。

您可以使用 cURL 或 file_get_contents 通过调用服务器上仅显示日期的页面来提取日期。

```
<?php
$date = file_get_contents("http://www.yoursite.com/datecheck/customer1234.php");
?> 
```

比较并输出您的信息。

# php - 将 Post var 发送到 Jquery 模式弹出窗口

> ID：12851364
> 
> 赞同：2
> 
> 时间：2012-10-12T02:25:55.513
> 
> 标签：php, jquery, html

我是 Jquery 的初学者，我尝试做一些简单的例子来练习，在这个例子中，我试图将 POST var 从 php 表单发送到我在互联网上找到的 Jquery 模式弹出窗口。

我的问题是，当我单击提交链接以发送我的 php 表单时，我无法将我的表单变量发送到我的模式弹出窗口，

在我的情况下，弹出窗口没有 var $name。

这是我的代码：

**[索引.php](http://pastebin.com/uKzeL5Hi)：**

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js"></script>
<link rel="stylesheet" type="text/css" href="test.css" />
<script type="text/javascript" src="script.js"></script>

<form method = "POST" id = "formm" name="form1" action="recep.php" > 

<input type="text" name="nom"/> <br>

<a href="#?w=500" rel="popup_name" class="poplight" name="nom" onclick="openwindow(this)";">test</a><br>

</form> 
```

**最后是我的[script.js](http://pastebin.com/5NBpY6nW)**：

```
$(document).ready(function() {

$('a.poplight[href^=#]').click(function() {
    var popID = $(this).attr('rel'); //Trouver la pop-up correspondante
    var popURL = $(this).attr('href'); //Retrouver la largeur dans le href

    //Récupérer les variables depuis le lien
    var query= popURL.split('?');
    var dim= query[1].split('&');
    var popWidth = dim[0].split('=')[1]; //La première valeur du lien

    $('#' + popID).fadeIn().css({
        'width': Number(popWidth)
    })
    .prepend('');

    var popMargTop = ($('#' + popID).height() + 80) / 2;
    var popMargLeft = ($('#' + popID).width() + 80) / 2;

    $('#' + popID).css({
        'margin-top' : -popMargTop,
        'margin-left' : -popMargLeft
    });

    $('body').append(''); 
    //Apparition du fond - .css({'filter' : 'alpha(opacity=80)'}) 
    $('#fade').css({'filter' : 'alpha(opacity=80)'}).fadeIn();

    return false;
});

$('a.close, #fade').live('click', function() { //Au clic sur le bouton ou sur le calque...
    $('#fade , .popup_block').fadeOut(function() {
        $('#fade, a.close').remove(); 
    });
    return false;
}); 

});
}); 
```

**[接收文件](http://pastebin.com/Qbd5araz)**

```
<div id="popup_name" class="popup_block">
    <h2>Developpez.com</h2>
    <p>Soh Tanaka est traduit sur dev.com.<?php  if (isset($_POST['nom'])) { $nom = $_POST['nom']; echo 'la var est'.$nom; } ?></p>
</div> 
```

我想我必须在我的 script.js 中添加 submit() 条件，因为当我点击我的链接 Jquery 时只选择 href 但他不提交表单。

任何想法 ？？:(

谢谢 ！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:46:32.223

看起来尝试发送表单但您没有提交它，并且您尝试在 recep.php 上获取的值位于未发送的锚点上！此外，输入和锚点的名称均为“nom”。单击锚点时还会调用两个函数。所以有很多事情要分开。

首先，您应该决定是否使用 jQuery 、javascript 或两者来调用您需要的任何函数。如果您使用的是 Jquery，则需要一种在页面加载时调用元素的方法，方法是使用

```
$('.whateverClass').click(function() { etc }); 
```

在这种情况下，我将使用类或 id 属性。如果您使用的是 onclick，您将调用一个 javascript 函数。在这种情况下，您应该将所需的所有参数作为数组传递

```
onclick="callTheFunction(this , '{put an array here with what you want?}')" 
```

所以这个锚点将位于表单的底部，但不会成为表单的一部分。没关系，因为您不想提交表单...您想从表单中获取所有 pars，然后使用 jQuery 或 javascript hhtp post/get 请求将值 ajax 到服务器。

既然你想使用 jQuery，做类似的事情

```
<input type="text" name="nameField" id="nameInput" /> <br>
<a href="#?w=500" rel="popup_name" id="popLight">test</a> <br>

<script>
$(document).ready(function() {

    $('.popLight').click(function() {

        //Get the form input value
        var nameInput = $('#nameInput').val(); 

        //Get the anchor attributes
        var href = $('#popLight').attr('href');

        //Do your stuff with the attr parameters, if you really need this here
        //...

        //Send your stuff to the server
        $.post("recep.php", { pars: "Your pars here"},
               function(receivedData) {
               //open whatever you want with the html from the server
                $('#whateverId').html('receivedData');
        });
    });
});
</script> 
```

要使用表单来检索值，只需 id 表单并从函数中调用它 var $input = $('#form :input').val();

# mysql - mySQL 借方贷方余额

> ID：12851366
> 
> 赞同：0
> 
> 时间：2012-10-12T02:26:05.773
> 
> 标签：mysql, sum

是否有可能有一个 mySQL 查询来获取这些字段旧余额（我的费用总和）、借方（我应该在这里输入当前日期相同 ID 的总费用）、贷方（在这些查询中不多）、新余额（与借方相同）。

现在，当一天结束时，新余额将添加到旧余额中，并为当前日期形成新余额。我有我的代码，但它不计算我以前的余额。

表：rf_expenses

```
--------------------------------------
id_rf_expenses   rf_expense_desc
--------------------------------------
1                    salary
2                    bonus
3                    transportation 
```

表：费用

```
-----------------------------------------------------------
id_expnses    id_rf_expenses     expense_amt   expense_date
------------------------------------------------------------
1                1                  100           current
2                1                  100           yesterday
3                2                   50           current
4                2                   50           current
5                3                  200           yesterday 
```

输出：

```
-----------------------------------------------------------
EXPENSE      OLD BALANCE    DEBIT     CREDIT   NEW BALANCE
-----------------------------------------------------------
SALARY           100         100        0          100          
BONUS             0          100        0          100
TRANSPO          200           0        0            0 
```

这将发生在当前日期的每个查询中。当前日期之前的任何日期都将汇总在旧余额中

```
SELECT 
    r.rf_expense_desc, 
    COALESCE(SUM(expense_amt), 0) - COALESCE(q1.amt2, 0) OLD, 
    COALESCE(q1.amt2, 0) AS NEW
FROM 
    rf_expenses r
LEFT JOIN 
    expenses e ON r.id_RF_expense = e.id_rf_expense
LEFT JOIN 
    (SELECT 
         SUM(expense_amt) amt2, id_expense, 
         rf_expenses.id_rf_expense
     FROM 
         rf_expenses
     LEFT JOIN 
         expenses ON rf_expenses.id_RF_expense = expenses.id_rf_expense
     WHERE 
         expense_date = CURDATE( ) 
     GROUP BY 
         rf_expense_desc, expense_date) q1 ON r.id_rf_expense = q1.id_rf_expense
GROUP BY 
    rf_expense_desc 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T06:45:45.833

嗨，我给出了两个查询：一个是日期类型列，另一个是字符串。

1 查询（使用您的示例数据）**[SQLFIDDLE 示例](http://sqlfiddle.com/#!2/5db95/10)**：

```
 SELECT 
rf.rf_expense_desc as EXPENSE      
,(SELECT 
  COALESCE(SUM(e.expense_amt),0)
  FROM expenses e
  WHERE e.id_rf_expenses= rf.id_rf_expenses
  AND expense_date != 'current'
 ) AS 'OLD BALANCE'
,(SELECT 
  COALESCE(SUM(e.expense_amt),0)
  FROM expenses e
  WHERE e.id_rf_expenses= rf.id_rf_expenses
  AND expense_date = 'current'
 ) AS 'DEBIT'
,0 AS CREDIT
,(SELECT 
  COALESCE(SUM(e.expense_amt),0)
  FROM expenses e
  WHERE e.id_rf_expenses= rf.id_rf_expenses
  AND expense_date = 'current'
 ) AS 'NEW BALANCE'
FROM 
rf_expenses rf 
```

2 查询（数据类型为日期）**[SQLFIddle 示例2](http://sqlfiddle.com/#!2/518a2/1)**：

```
SELECT 
rf.rf_expense_desc as EXPENSE      
,(SELECT 
  COALESCE(SUM(e.expense_amt),0)
  FROM expenses e
  WHERE e.id_rf_expenses= rf.id_rf_expenses
  AND expense_date != CURDATE()
 ) AS 'OLD BALANCE'
,(SELECT 
  COALESCE(SUM(e.expense_amt),0)
  FROM expenses e
  WHERE e.id_rf_expenses= rf.id_rf_expenses
  AND expense_date = CURDATE()
 ) AS 'DEBIT'
,0 AS CREDIT
,(SELECT 
  COALESCE(SUM(e.expense_amt),0)
  FROM expenses e
  WHERE e.id_rf_expenses= rf.id_rf_expenses
  AND expense_date = CURDATE()
 ) AS 'NEW BALANCE'
FROM 
rf_expenses rf 
```

结果：

```
|        EXPENSE | OLD BALANCE | DEBIT | CREDIT | NEW BALANCE |
---------------------------------------------------------------
|         salary |         100 |   100 |      0 |         100 |
|          bonus |           0 |   100 |      0 |         100 |
| transportation |         200 |     0 |      0 |           0 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T02:44:59.460

另一个例子说明为什么 mysql 应该强制所有 GROUP BY 子句的 SELECT 只包含 GROUP BY 子句中指定的列，或者由聚合函数包围。Mysql 将此错误称为“功能”。

我的意思是，看看你的两个 GROUP BY 的 SELECT 子句，包括内部查询和外部查询。您选择的列不在 GROUP BY 子句中，也没有被 SUM、AVG、COUNT 或其他聚合函数包围。如果你对行进行分组，并且你不告诉mysql如何“减少”组中的行，它只会随机取任何值。

例如，假设我们在名为“test”的表中有这些数据：

```
PARENTID     ID     VALUE
-------------------------
1            1      2.05
1            2      3.50
1            3      1.58
2            1      4.65
2            2      0.65 
```

我们查询：SELECT parentid, value FROM test GROUP BY parentid, value

好吧，我们还没有说如何处理 VALUE 列，例如 SUM，因此 mysql 将简单地获取组中的任何值，对于 PARENTID=1，我们可能会得到 2.05、3.50 或 1.58 中的任何一个......但不是组合很多。

所以这是正确的：

```
SELECT parentid, SUM(value) as total FROM test GROUP BY parentid, value; 
```

现在当 mysql 减少每个组时，我们得到正确的总和，我们的结果是：

```
PARENTID          VALUE
-------------------------
1                 7.13
2                 5.30 
```

因此，在您的示例中，您可能想要查询：

```
SELECT r.rf_expense_desc, expense_date,
    COALESCE( SUM( expense_amt ) , 0 ) - COALESCE( sum(q1.amt2), 0 ) OLD, COALESCE( sum(q1.amt2), 0 ) AS NEW
FROM rf_expenses r
LEFT JOIN expenses e ON r.id_RF_expense = e.id_rf_expense
LEFT JOIN (
    SELECT SUM( expense_amt ) amt2, count(id_expense) as counts
    FROM rf_expenses
    LEFT JOIN expenses ON rf_expenses.id_RF_expense = expenses.id_rf_expense
    WHERE expense_date = CURDATE( ) 
    GROUP BY rf_expense_desc, expense_date
) q1 ON r.id_rf_expense = q1.id_rf_expense
GROUP BY rf_expense_desc 
```

# html - 正则表达式替换每个中的最后一个空格 标记

> ID：12851369
> 
> 赞同：3
> 
> 时间：2012-10-12T02:26:09.803
> 
> 标签：html, regex

我正在寻求帮助来创建一个正则表达式来替换特定标记（例如`<p>`）中的所有最后一个空格`&nbsp;`。快速修复大量 html 文档中的所有寡妇。

例如;

```
 <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus suscipit
    dolor a felis blandit sodales. Donec lectus justo, convallis vitae euismod sit.
    Nullam et tristique&nbsp;dui.</p> 
    <p>Nullam accumsan pellentesque pretium. Morbi tempor egestas lectus, 
    a eleifend enim aliquet varius. Vivamus vitae semper&nbsp;tortor.</p> 
```

[我在http://www.petefreitag.com/item/580.cfm](http://www.petefreitag.com/item/580.cfm)找到了这个例子

```
ReReplace(text, " ([^ ]+\r?\n)", "&nbsp;\1", "ALL") 
```

但它将它添加到每个元素的每个最后一个空格。

也感谢任何关于如何改进我写这个问题的建议会很棒

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T02:41:41.130

这个问题比看起来要难一些，因为你可能有`<p>`没有单词的元素，只有一个单词，或者多个单词，或者在结束标记之前有很多空格`</p>`。您甚至可能在段落元素中嵌套了元素，从而使您*认为*可能是孤立词的内容根本不是孤立词。更复杂的是，在许多 HTML 版本中，结束标记`</p>`实际上是可选的。

由于这些原因，建议[使用 HTML 解析器，而不仅仅是使用 regex 处理您的 HTML 文件](https://stackoverflow.com/a/1732454/831878)。

仅当您知道所有`<p>`元素都是封闭的，并且元素内没有嵌套元素`<p>`，并且所有`<p>`元素都有多个单词时，您才能摆脱替换

```
(\S)\s+(\S+)\s*</p> 
```

和

```
\1&nbsp;\2</p> 
```

如果您想保留结束标记之前的间距（如果您愿意），可以将最后一个括号括起来`\s*`并在替换字符串中添加一个。`\3`

不过，在没有 HTML 解析器的情况下做这样的事情之前我会小心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T02:35:28.193

假设您的 html 格式正确（很少见），并且不知道您使用的是什么语言，这是一个一般性的答案：

```
Regex: " (?= *</p>)"
Replacement text: "&nbsp;" 
```

正则表达式匹配一个空格，但使用前瞻来断言匹配的空格后跟任意数量的 (0-n) 个空格，然后是您的目标标记。

# html - 无缓存 html 会停止服务器端缓存还是仅停止浏览器缓存？

> ID：12851372
> 
> 赞同：0
> 
> 时间：2012-10-12T02:26:28.420
> 
> 标签：html, caching, server-side

我有一个具有服务器端缓存的客户端，其中的内容在 3 天内过期。

所以客户端清除浏览器缓存并仍然从服务器获取旧内容。

元标记 no-cache 会阻止服务器缓存吗？还是只会停止客户端缓存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-26T14:17:27.330

最好的缓存控制方式只是服务器配置，也许你有一个代理，它也有一个缓存。

我对服务器（页面或 Web 服务器应用程序）配置感到满意，如下所示：

```
<meta http-equiv="cache-control" content="max-age=0" />
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="expires" content="0" />
<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
<meta http-equiv="pragma" content="no-cache" /> 
```

希望对你有帮助

# android-intent - 加载网页时处理后退按钮按下

> ID：12851373
> 
> 赞同：1
> 
> 时间：2012-10-12T02:26:32.583
> 
> 标签：android-intent

我在使用 android 的后退按钮时遇到问题，需要一些帮助。

我的应用程序有一个名为“A”的活动。从“A”开始，我开始了名为“B”的新活动，但没有完成“A”。从“B”开始，我开始新的意图来调用网络浏览器。当用户在网页加载未完成时按下后退按钮时，它会导致我的程序返回到活动“B”。但是我不想回到活动'B'，我想完成B并回到活动'A'。

有没有人有这种情况的解决方案？请帮我！非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T02:29:53.653

您可以覆盖以下方法

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if ((keyCode == KeyEvent.KEYCODE_BACK)) {
        Log.d(this.getClass().getName(), "back button pressed");
    }
    return super.onKeyDown(keyCode, event);
} 
```

# python - 在python中后台运行的超声波线程

> ID：12851374
> 
> 赞同：0
> 
> 时间：2012-10-12T02:26:47.037
> 
> 标签：python, multithreading, nxt-python

如何使用 nxt-python 2.2.2 中的超声波类创建一个连续检查障碍物的线程？我想以一种方式实现它，当我的机器人移动时，它也会在后台进程中检测到障碍物，一旦它检测到一个物体，它就会刹车并做其他事情

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T04:45:19.913

您使用了守护线程而不是普通线程。因为这与普通线程不同。我希望守护线程可以解决您的问题。

# c++ - C++ 如何将十六进制整数转换为字符串？

> ID：12851379
> 
> 赞同：-4
> 
> 时间：2012-10-12T02:27:58.030
> 
> 标签：c++

> **可能重复：**
> [如何在 C++ 中将数字转换为字符串，反之亦然](https://stackoverflow.com/questions/5290089/how-to-convert-a-number-to-string-and-vice-versa-in-c)

在 C++ 中，如何将十六进制整数转换为原始十六进制十进制值的字符串表示形式？

假设我们有一个整数，其十六进制表示为`a1a56`（十进制等于`662102`），您想将其转换为字符串“662102”

你会如何解决这个问题？

ps：我建议一个功能解决方案作为答案，请随时将其击落（如果可能，以礼貌的方式）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T02:31:20.840

您可以使用字符串流：

```
int x = 0xa1a56;
std::stringstream ss;
ss << x;
cout << ss.str(); 
```

或者，如果您更喜欢一个功能：

```
std::string convert_int(int n)
{
   std::stringstream ss;
   ss << n;
   return ss.str();
} 
```

编辑：确保你`#include <sstream>`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-12T02:32:18.520

您可以从字符串流中以十六进制读取数字，并将其以十进制形式写回不同的字符串流：

```
int x;
istringstream iss("a1a56");
iss >> hex >> x;
ostringstream oss;
oss << x;
string s(oss.str()); 
```

[链接到ideone。](http://ideone.com/1bleE)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-12T02:50:06.807

使用最新版本的 C++ 标准 (C++11) 执行此操作的最简单方法是使用以下`std::to_string`函数：

```
#include <iostream>
#include <string>

int main()
{
  /* Convert: */
  std::string s { std::to_string(0xa1a56) };

  /* Print to confirm correctness: */
  std::cout << s << std::endl;
  return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T02:31:47.300

```
std::string HexDec2String(int hexIn) {
  char hexString[4*sizeof(int)+1];
  // returns decimal value of hex
  sprintf(hexString,"%i", hexIn); 
  return std::string(hexString);
} 
```

# java - 这是一个合适的 Android 游戏循环吗？

> ID：12851381
> 
> 赞同：1
> 
> 时间：2012-10-12T02:28:04.447
> 
> 标签：java, android

我从我正在学习的书中抓住了这个。

```
public void run()
{
    // this is the method that gets called when the thread is started.

    // first we get the current time before the loop starts
    long startTime = System.currentTimeMillis();

    // start the animation loop
    while (running)
    {
        // we have to make sure that the surface has been created
        // if not we wait until it gets created
        if (!holder.getSurface ().isValid())
            continue;

        // get the time elapsed since the loop was started
        // this is important to achieve frame rate-independent movement,
        // otherwise on faster processors the animation will go too fast
        float timeElapsed = (System.currentTimeMillis () - startTime);

        // is it time to display the next frame?
        if (timeElapsed > FRAME_RATE)
        {
            // compute the next step in the animation
            update();

            // display the new frame
            display();

            // reset the start time
            startTime = System.currentTimeMillis();
        }
    }

    // run is over: thread dies
} 
```

它是否正确解释了延迟并且是最佳的？

我的意思是，如果视频不能每秒更新 60 次，那么 update() 会被称为每秒 60 次吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T02:48:10.293

> 如果视频不能每秒更新 60 次，update() 是否会被称为每秒 60 次？

答案是否定的。在每个游戏循环开始时，您计算自上次游戏循环以来的时间。您将其存储在“timeElapsed”中。

从这里，您将其与“FRAME_RATE”进行比较。“FRAME_RATE”是一个误导性的名称，因为在您的情况下，这不是您的帧速率。您需要 60 的帧速率。为了等待适当的时间，FRAME_RATE 应该是 1000（毫秒）/60（每秒帧数）。

现在，在每次迭代开始时，您都会记录经过的时间并测试是否是下一帧的时间。如果不是，则跳过执行任何实际处理或渲染，然后再次运行循环。

当经过的时间最终超过 FRAME_RATE（实际上是帧*延迟*）时，您执行处理并渲染帧。理想情况下，执行此操作所需的时间将少于您的帧延迟，从而允许您的下一次迭代按计划开始。只要是这种情况，update() 和 display() 将每秒被调用大约 60 次。

但是，如果渲染和处理帧所需的*时间*比您的帧延迟长，那么下一帧将在下一次迭代中处理，并且会*延迟*。在这种情况下，update() 和 display() 将被调用少于每秒 60 次。

# c - 为什么 printf 使用浮点数和整数格式说明符打印随机值

> ID：12851385
> 
> 赞同：4
> 
> 时间：2012-10-12T02:30:03.267
> 
> 标签：c, floating-point, x86-64

我在 64 位机器上写了一个简单的代码

```
int main() {
    printf("%d", 2.443);
} 
```

所以，这就是编译器的行为方式。它会将第二个参数识别为双精度，因此它将在堆栈上压入 8 个字节，或者可能只是在调用之间使用寄存器来访问变量。`%d`需要一个 4 字节的整数值，因此它会打印一些垃圾值。

有趣的是，每次我执行这个程序时，打印的值都会发生变化。那么发生了什么？我希望它每次都打印相同的垃圾值，而不是每次都打印不同的垃圾值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T02:36:04.613

当然，传递与格式不对应的参数是未定义的行为，因此语言无法告诉我们为什么输出会发生变化。我们必须查看实现、它产生的代码，以及可能的操作系统。

我的设置和你的不一样

> Linux 3.1.10-1.16-桌面 x86_64 GNU/Linux (openSuSE 12.1)

使用 gcc-4.6.2。但它足够相似，因此怀疑相同的机制是合理的。

查看生成的程序集（`-O3`，出于习惯），相关部分（`main`）是

```
.cfi_startproc
subq    $8, %rsp             # adjust stack pointer
.cfi_def_cfa_offset 16
movl    $.LC1, %edi          # move format string to edi
movl    $1, %eax             # move 1 to eax, seems to be the number of double arguments
movsd   .LC0(%rip), %xmm0    # move the double to the floating point register
call    printf
xorl    %eax, %eax           # clear eax (return 0)
addq    $8, %rsp             # adjust stack pointer
.cfi_def_cfa_offset 8
ret                          # return 
```

如果不是`double`，我通过了一个`int`，没有太大的变化，但这很重要

```
movl    $47, %esi            # move int to esi
movl    $.LC0, %edi          # format string
xorl    %eax, %eax           # clear eax
call    printf 
```

我查看了为传递给的参数类型和数量的许多变体生成的代码`printf`，并且始终如一地，第一个`double`（或提升的`float`）参数被传入`xmmN`, `N = 0, 1, 2`，并且整数（`int`, `char`, `long`，无论有无符号）被传入`esi`, `edx`, `ecx`, `r8d`,`r9d`然后是堆栈。

所以我冒险猜测，`printf`寻找 in 中宣布`int`的`esi`内容，并打印发生的任何事情。

`esi`当没有任何东西移入时，的内容是否可以以任何方式预测`main`，以及它们可能意味着什么，我不知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T23:41:29.717

这个答案试图解决一些变化的来源。这是 Daniel Fischer 的回答和一些评论的后续行动。

由于我不使用 Linux，我无法给出明确的答案。对于`printf`大型应用程序的后期，将有无数的潜在变化来源。这在早期的小型应用程序中，应该只有几个。

地址空间布局随机化 (ASLR) 就是其中之一：操作系统故意随机重新排列一些内存，以防止恶意软件知道要使用哪些地址。我不知道 Linux 3.4.4-2 是否有这个。

另一个是环境变量。你的 shell 环境变量被复制到它产生的进程中（并且可以通过`getenv`例程访问）。其中一些可能会自动更改，因此它们的值会略有不同。这不太可能直接影响`printf`尝试使用缺少的整数参数时看到的内容，但可能会产生级联效应。

可能有一个共享库加载器在`main`被调用之前或在`printf`被调用之前运行。例如，如果`printf`它在共享库中，而不是内置在可执行文件中，那么调用`printf`可能实际上会导致调用调用加载程序的存根例程。加载器查找共享库，找到包含的模块`printf`，将该模块加载到进程的地址空间，更改存根以便它`printf`在将来直接调用新加载的（而不是调用加载器），然后调用`printf`. 正如您可以想象的那样，这可能是一个相当广泛的过程，其中包括查找和读取磁盘上的文件（访问共享库和共享库的所有目录）。可以想象，系统上的某些缓存或文件操作会导致加载程序中的行为略有不同。

到目前为止，我赞成 ASLR 作为上述最有可能的候选人。后两者可能相当稳定；所涉及的值通常会偶尔改变，而不是经常改变。ASLR 每次都会改变，只需在寄存器中留下一个地址就足以解释这种`printf`行为。

这是一个实验：在初始之后`printf`，插入另一个`printf`具有此代码的：

```
printf("%d\n", 2.443);
int a;
printf("%p\n", (void *) &a); 
```

第二个 printf 打印 的地址`a`，该地址可能在堆栈上。运行程序两到三次，计算第一次打印`printf`的值和第二次打印的值之间的差值`printf`。（第二个`printf`可能以十六进制打印，因此将第一个更改为“%x”以使其也成为十六进制可能会很方便。）如果第二个打印的值`printf`因运行而异，那么您的程序正在经历 ASLR . 如果值在每次运行中发生变化，但它们之间的差异保持不变，那么第`printf`一次发生的值`printf`是程序初始化后遗留在进程中的某个地址。

如果地址`a`更改但差异不保持不变，您可以尝试更改`int a;`以`static int a;`查看将第一个值与地址空间的不同部分进行比较是否会产生更好的结果。

当然，这些对于编写可靠的程序都没有用。它只是关于程序加载和初始化如何工作的教育。

# android - 打开位于 Eclipse 子文件夹中的 Android 库

> ID：12851387
> 
> 赞同：1
> 
> 时间：2012-10-12T02:30:25.130
> 
> 标签：android

许多 Android 库都使用类似的结构进行分发，如下所示：

```
mycustomlib/
-->lib/ (where the "real" code lives)
---->src/
-->samples/
-->tests/ 
```

我想将库导入 Eclipse，但我无法导入整个`mycustomlib`文件夹，因为它没有`AndroidManifest.xml`文件（我想这就是原因）。我只能导入`lib`文件夹。显然有效，但 Eclipse 中的项目名称变为`lib`.

有什么方法可以`mycustomlib`在不弄乱树结构的情况下输入项目名称，以便我可以正常拉动 git 更改？

我想要这样做的原因：如果我保留一个通用名称作为`lib`项目名称，这会混淆同一工作区中多个项目的管理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T14:07:33.767

您可以在 Eclipse 中重命名项目（通过单击项目并按 F2）。

它将更改一个名为 Eclipse 的特定文件`.project`（它不会重命名文件夹）。由于很多项目没有这个文件或者不修改它，所以修改它是没有问题的。在最坏的情况下，只需手动合并文件中的任何更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T02:34:42.097

为什么必须全部导入`mycustomlib`，只需导入`lib`、`sample`修改并拉取到原始 git

# python - 尝试覆盖 __plus__ 函数时出现不支持的操作数错误

> ID：12851388
> 
> 赞同：0
> 
> 时间：2012-10-12T02:30:42.313
> 
> 标签：python, overwrite

我正在尝试在 Python 中学习 OOP，并制作以下​​代码来覆盖该`__plus__`方法

```
class Fraction(object):
    '''Define a fraction type'''
    def __init__(self, num=0, denom=1):
        '''Create a new Fraction with numerator num and denominator demon'''
        self.numerator = num
        if denom != 0:
            self.denominator = denom
        else:
            raise ZeroDivisionError

    def __plus__(self, f):
        num = self.numerator + f.numerator      
        denom = self.numerator + f.denominator
        return "{0}/{1}".format(num, denom)

f = Fraction(1, 6) 
```

print f + f # 我希望结果是 2/12

```
 File "<stdin>", line 1, in <module>
TypeError: unsupported operand type(s) for +: 'Fraction' 
```

但它给了我一个错误，我不知道如何解决这个错误，知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T02:38:10.583

您需要覆盖该`__add__`方法而不是`__plus__`. 只需尝试替换`__plus__`为`__add__`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T02:38:56.527

工作代码：

```
class Fraction(object):
    '''Define a fraction type'''
    def __init__(self, num=0, denom=1):
        '''Create a new Fraction with numerator num and denominator demon'''
        self.numerator = num
        if denom != 0:
            self.denominator = denom
        else:
            raise ZeroDivisionError

    def __add__(self, f):
        num = self.numerator + f.numerator      
        denom = self.denominator + f.denominator
        return "{0}/{1}".format(num, denom) 
```

请注意，我也修复了`denom = self.denominator + f.denominator`

# amazon-web-services - 新手安装问题：AWS/Tomcat 上的 Oracle JDK7

> ID：12851395
> 
> 赞同：0
> 
> 时间：2012-10-12T02:31:18.963
> 
> 标签：amazon-web-services, java

我正在尝试在我漂亮的新 AWS 服务器上从 Oracle 站点安装 JDK7 &

```
 sudo rpm -ivh ./jdk-7u7-linux-i586.rpm 
```

生产

```
Unpacking JAR files...
        rt.jar...
Error: Could not open input file: /usr/java/jdk1.7.0_07/jre/lib/rt.pack
        jsse.jar...
Error: Could not open input file: /usr/java/jdk1.7.0_07/jre/lib/jsse.pack
...etc... 
```

作为奖励问题，尝试使用新下载的 .rpm 文件重新安装会产生：

```
package jdk-2000:1.7.0_07-fcs.i586 is already installed 
```

这非常令人沮丧，因为显然它不是......真的......我认为。（我可能是错的）感谢您提供的任何帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T02:37:17.577

似乎包裹可能已损坏。在临时目录中，试试这个：

`rpm2cpio /path/to/jdk-7u7-linux-i586.rpm | cpio -vid`

并查看是否所有文件都已成功提取。对于您的奖金问题，请尝试将 --force 添加到`rpm`调用中？

# python - python中opencv2的矩阵转换

> ID：12851402
> 
> 赞同：1
> 
> 时间：2012-10-12T02:31:28.843
> 
> 标签：python, opencv

opencv 2 缺乏文档有点难以处理。我正在尝试使用卡尔曼滤波器来跟踪移动物体。我在这里查看了一个示例，但它使用的是 2.x 之前的版本：

[https://projects.developer.nokia.com/opencv/browser/opencv/opencv-2.3.1/samples/python/kalman.py](https://projects.developer.nokia.com/opencv/browser/opencv/opencv-2.3.1/samples/python/kalman.py)

我知道 opencv 2 的 python 绑定使用 numpy 矩阵。这与旧的实现有何不同？例如，在链接中，一个矩阵是这样创建的：

```
state = cv.CreateMat(2, 1, cv.CV_32FC1) 
```

但在 numpy 中，这似乎不正确：

```
state = numpy.zeros(shape=(2,1)) 
```

有些例子可以通过从 numpy 转换来创建一个 cv 矩阵，但我希望只使用 cv2 提供的函数。

另外，我在 opencv 2 中找不到某些功能的等价物：

```
cv.RandArr(...) 
```

`RandArr`cv2中是否有等效功能？我不太明白它是如何工作的，所以自己实现它需要一些时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T05:03:13.763

我也面临同样的问题。我无法`cv2.Kalman()`正常使用。但是由于 cv2 和 cv 非常兼容，所以我使用`cv.CreateKalman()`. 我认为这可能有用。[http://jayrambhia.wordpress.com/2012/07/26/kalman-filter/](http://jayrambhia.wordpress.com/2012/07/26/kalman-filter/)

# scala - 使用 Scala 2.10 反射查找方法参数（和类型）？

> ID：12851407
> 
> 赞同：6
> 
> 时间：2012-10-12T02:31:36.430
> 
> 标签：scala, reflection, scala-2.10

我（从[这里](https://stackoverflow.com/questions/12842729/finding-type-parameters-via-reflection-in-scala-2-10)）学会了使用提取器来获取 Scala 元数据。我还注意到`Universe.MethodTypeExtractor`：

> 用于创建和模式匹配语法的提取器类在 `MethodType(params, respte)`这里，params 是方法的参数符号的潜在空列表，restpe 是方法的结果类型。

伟大的！听起来像我想要的！（？）

但是如何获得`MethodType`？（为什么这是方法“类型”的提取器（方法是“类型”？）而不是方法“Def”或“Ref”？？）

```
scala> typeOf[List[Int]].member(newTermName("head"))
res2: reflect.runtime.universe.Symbol = method head

scala> res2 match { case MethodType(a, b) => println((a, b)) }
scala.MatchError: method head (of class scala.reflect.internal.Symbols$MethodSymbol) [...]

scala> res2.asType match { case MethodType(a, b) => println((a, b)) }
scala.ScalaReflectionException: method head is not a type [...]

scala> res2.asTerm match { case MethodType(a, b) => println((a, b)) }
scala.MatchError: method head (of class scala.reflect.internal.Symbols$MethodSymbol) [...]

scala> res2.asMethod match { case MethodType(a, b) => println((a, b)) }
scala.MatchError: method head (of class scala.reflect.internal.Symbols$MethodSymbol) [...] 
```

或者我完全是“找错了树”，可以这么说？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T08:25:05.010

`paramss`（这是一个 RC1 名称，在 M7 中它被命名为`params`）并且`returnType`是 MethodSymbol 的方法：

```
scala> import scala.reflect.runtime.universe._
import scala.reflect.runtime.universe._

scala> typeOf[List[Int]].member(newTermName("head"))
res2: reflect.runtime.universe.Symbol = method head

scala> res2.asMethod.paramss
res4: List[List[reflect.runtime.universe.Symbol]] = List()

scala> res2.asMethod.returnType
res5: reflect.runtime.universe.Type = A 
```

要获取方法的类型签名，您应该调用`typeSignature`定义在`Symbol`.

说到方法为什么是类型，这样说并不完全正确。有`DefDef`树、`MethodSymbol`符号和`MethodType`/`NullaryMethodType`类型——每个在编译器中都有自己的用途。很快我们将完成反射 API 的文档，因此希望事情会变得更加清晰。

# node.js - 在 express.js 中维护用户登录状态

> ID：12851408
> 
> 赞同：0
> 
> 时间：2012-10-12T02:31:40.283
> 
> 标签：node.js, session, login, express

我正在使用护照登录我的用户。当用户登录我的应用程序时，用户名将显示在标题中。

这是我的`header.jade`：

```
div#header_content
input(type='text',name='search',id='globle_search')
span#user_status
    if(req.isAuthenticated())
        a(class='user_menu_btn',href='home', target='_blank' )  req.user.username
        a(class='user_menu_btn',href='logout') Logout
    else
        a(id='login_btn',href='login',class='user_status_btn') login 
```

如果我运行该应用程序，我会收到一条错误消息：

```
 ReferenceError: F:\shopping\views\includes\header.jade:4
 req is not defined 
```

这是我的索引路线：

```
app.get('/',index.index);

exports.index = function(req, res){
  res.render('index', { title: 'Express' });
}; 
```

如何维护标题中的登录状态？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T03:12:06.680

要`req`在视图中访问，它必须是`locals`传递给视图引擎的对象的成员——默认情况下它不是。

```
// before: app.use(app.router);
app.use(function (req, res, next) {
    res.locals.req = req;
    next();
}); 
```

不过，既然`user`和`isAuthenticated`是您需要的`req`，您可以直接附加它们：

```
// before: app.use(app.router);
app.use(function (req, res, next) {
    res.locals({
        get user() { // as a getter to delay retrieval until `res.render()`
            return req.user;
        },

        isAuthenticated: function () {
            return req.user != null;
        }
    })

    next();
}); 
```

```
if isAuthenticated()
    // ...
    a(...) #{user.username}
else
    // ... 
```

请参阅[`res.locals`](http://expressjs.com/api.html#res.locals)和[`app.locals`](http://expressjs.com/api.html#app.locals)了解更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T04:54:15.237

中间件：

```
app.use(function (req, res, next) {
    if ( req.session.user ) {
      req.session.logged_in = true;
    }
    res.locals.sess = req.session;
    next();
}); 
```

路线：

```
exports.index = function(req, res){
  res.render('index', { title: 'Express' });
}; 
```

看法：

```
if(sess.logged_in)
    a(class='user_menu_btn',href='home', target='_blank' )  sess.user.username
    a(class='user_menu_btn',href='logout') Logout
else 
```

# c# - UnitTest .Net 与 Ajax 应用程序

> ID：12851409
> 
> 赞同：0
> 
> 时间：2012-10-12T02:31:45.920
> 
> 标签：c#, asp.net, unit-testing, testing, automated-tests

我需要进行一些单元测试或某种测试，这让我每次都能轻松地检查我的所有表单是否正常工作。

我正在使用 c# 在 .Net 中开发所有应用程序。但只有 HTML 控件不是单个 .Net 控件。

主要使用 jQuery Ajax 发布表单。

如何进行一些测试以帮助我进行所有验证。并且所有前端验证都运行良好，数据库输入运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T03:26:21.167

我认为你的问题具有误导性。单元测试仅用于测试单个代码单元。您正在尝试测试 UI 功能。有一个名为 selenium 的 firefox 插件，我认为它会帮助你实现你想要的。 [http://seleniumhq.org/docs/02_selenium_ide.html](http://seleniumhq.org/docs/02_selenium_ide.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T03:39:00.327

听起来您更多地是在谈论进行自动功能测试而不是单元测试以将所有这些方面组合到测试中。看看[Selenium Web Driver](http://nuget.org/packages/Selenium.WebDriver)作为一种驱动测试的机制。 这是在C# 中使用 Selenium[的示例。](https://stackoverflow.com/questions/6187863/sample-tutorial-of-using-selenium-2-0-web-driver-in-net)您可以将其与 Nunit 等测试框架结合使用，以断言您的测试是正确的。

# python - 在 Python App Engine API 中写入和读取 blobstore 文件以存储时间戳

> ID：12851419
> 
> 赞同：2
> 
> 时间：2012-10-12T02:33:25.893
> 
> 标签：python, google-app-engine, blobstore

我正在使用用于 Google App Engine 的 python API，我想要做的是从服务器加载一个文件列表，如果它已经超过一个时间间隔（例如 1 小时）。

为此，我尝试将执行的最后一个操作时间存储到一个文件中，并在下次读取它以了解与下一个请求的当前执行时间的区别，但后来我发现 GAE 不允许将文件写入磁盘，所以我不得不使用 blobstore。我试图将我已经拥有但使用 blobstore 函数的相同函数组合在一起，但即使创建了文件，每次我尝试读取它时都会收到错误消息：

```
FinalizationError: ApplicationError: 101 Blobkey not found. 
```

我不确定我在做什么是错的。我对 GAE 很陌生，不知道这是否是完成我需要做的事情的最佳方法，而且我在 GAE 的文档中找不到在同一脚本中读写文件的示例文件 API。

提前感谢您能给我的任何提示。

这是我的代码的摘要版本，get 和 set 函数与代码中的一样：

```
# imports...
from datetime import datetime as time
from google.appengine.api import files

# create file
last_request_file = files.blobstore.create()

def update_list(time_interval):
    # Get the time of the current request
    current_time = time.now()

    # Calculate timelapse between this an the last request
    last_request = get_last_request_time(last_request_file)
    elapsed_time = current_time - last_request

    # If more than an interval update proxy list
    if elapsed_time.total_seconds() >= time_interval:
        # Request new list from the server
        my_list = getList()

    # Update last_request time
    set_last_request(last_request_file)

    return my_ist

def get_last_request_time(file_name):
    request_time = None

    with files.open(file_name, 'r') as f:
        text_time = f.read()
        if text_time:
            request_time = time.strptime(text_time, '%Y-%m-%d %H:%M:%S')
        else: # file was empty
            request_time = time.min

    # Finalize to close the file.
    files.finalize(file_name)

    return request_time

def set_last_request_time(file_name):
    current_time = time.now()

    # Open the file and write to it
    with files.open(file_name, 'a') as f:
        f.write(time.strftime(current_time, '%Y-%m-%d %H:%M:%S')+'\n')

    # Finalize to close the file.
    files.finalize(file_name) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:05:14.463

第一：为什么不将信息存储在任务队列中。您可以每小时运行一个任务队列来完成您的工作（获取列表）。

第二：只有在创建文件并写入文件时才使用 finalize。但是您不能在文件完成后写入文件。要更新 blobstore 中的文件，您始终必须创建一个新文件。当您阅读文件时，您不必完成它。要读取文件，您必须使用 blobreader。请参阅：[https ://developers.google.com/appengine/docs/python/blobstore/blobreaderclass](https://developers.google.com/appengine/docs/python/blobstore/blobreaderclass)

# matrix - 计算矩阵零空间的渐近最快已知算法是什么？

> ID：12851422
> 
> 赞同：1
> 
> 时间：2012-10-12T02:34:23.040
> 
> 标签：matrix, theory

我知道高斯消除和 QR 分解都是 O(n^3)。有更好的吗？

我对理论上的原因很感兴趣 - 我实际上不会对此进行编码，因此近似值或*有时*更快的算法没有用。

# javascript - 返回两种颜色相互兼容程度的算法

> ID：12851423
> 
> 赞同：1
> 
> 时间：2012-10-12T02:34:38.537
> 
> 标签：javascript, html, colors

我在 a 中有一个`<p>`元素`<div>`。段落文本有两种可能的颜色：白色或黑色。这种颜色是在运行时随机选择的。背景 div 的颜色是在运行时从 1600 万种颜色中随机选择的。因为这两个过程都是随机的，所以有时相似的颜色最终会在一起，段落文本很难看到或根本看不到。

是否有一种算法可以将两种颜色相互比较并以百分比表示法返回一种颜色在另一种颜色之上的外观？

这个问题是在问两种颜色有多相似：[颜色逻辑算法](https://stackoverflow.com/questions/2103368/color-logic-algorithm)

我想知道一个人叠加在另一个人身上时的样子。例如，根据上面帖子中定义的函数，黄色和白色不是相似的颜色，但是当白色写在黄色上时，不容易看到文字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T02:41:10.973

这个网站应该有帮助：

[http://24ways.org/2010/calculating-color-contrast](http://24ways.org/2010/calculating-color-contrast)

根据它，使用此函数来确定在 bg 颜色上使用黑色还是白色：

```
function getContrastYIQ(hexcolor){
    var r = parseInt(hexcolor.substr(0,2),16);
    var g = parseInt(hexcolor.substr(2,2),16);
    var b = parseInt(hexcolor.substr(4,2),16);
    var yiq = ((r*299)+(g*587)+(b*114))/1000;
    return (yiq >= 128) ? 'black' : 'white';
} 
```

当然，您必须将颜色转换为其十六进制值才能使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T19:33:45.210

[sc-color 库](https://github.com/surfacecurve/sc-color)（*披露：我是作者*）有一个类似的内置函数，称为`contrastWhiteBlack()`.

这是一个[**JsFiddle 演示**](http://jsfiddle.net/bcronin/msvTW/4/)，用于在随机背景颜色上生成文本颜色。

核心代码如下所示：

```
// Parse, generate a contrast color, convert back to a color string
var textColor = sc_color([color string to parse]).contrastWhiteBlack().html(); 
```

# php - php中的天数差异

> ID：12851427
> 
> 赞同：2
> 
> 时间：2012-10-12T02:34:52.600
> 
> 标签：php, date, diff

所以我试图计算一个日期与另一个日期的偏移天数。目前我正在使用：

```
$now = new DateTime();
$dateToCompare = new DateTime("<filled from DB>");
$diff = $now->diff($dateToCompare);
echo $diff->format("%R%a"); 
```

我发现这是比较日期并给出相对于 24 小时期间的偏移量，而不是日历日。

例如，这些日期的日期偏移量为 0（我希望它为 1）：

> 2012-10-11 19:27:04 和 2012-10-12 06:50:00

我是否正确使用了这个功能？我希望这是 1 的偏移量；但是经过大量调试后，我发现这是我在日期偏移中实际看到的差异的根源。

（也按照 PHP 的建议设置时区）

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T02:43:38.707

尝试使用[DateTime::createFromFormat](http://php.net/manual/en/datetime.createfromformat.php)仅使用月、日和年来创建对象。

也许尝试以下未经测试的代码：

```
$now = DateTime::createFromFormat('Y-m-d', date('Y-m-d')); // Note that if no timestamp is given, it uses the current time instead of 12am
$dateToCompare = DateTime::createFromFormat('Y-m-d', "<filled from DB>"); //match format of db datetime
$diff = $now->diff($dateToCompare);
echo $diff->format("%R%a"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T03:15:06.053

如果您正在寻找一种简单的方法，您可以试试这个

```
$date1 = strtotime("2012-10-11 19:27:04");
$date2 = strtotime("2012-10-12 06:50:00");
$diff = ($date1-$date2);
echo date('j',$diff)." days"; 
```

输出为 31 天

[您可以在这里http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)用支持的日期格式字符替换“j”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T03:43:28.473

只需使用年、月和日期：

```
$now = strtotime(Date("Y-m-d", strtotime("2012-10-12 06:50:00")));
$pre = strtotime(Date("Y-m-d", strtotime("2012-10-11 19:27:04")));
var_dump(($now-$pre)/86400); 
```

在我的环境`DateTime`中不起作用。

# vb.net - Epub 标签搜索

> ID：12851428
> 
> 赞同：0
> 
> 时间：2012-10-12T02:34:55.800
> 
> 标签：vb.net, epub

任何人都知道如何阅读**Epub 文件**并能够搜索和定位标签？我正在使用 VB.Net，但我不知道如何阅读 EPub。

或者只是帮我解压缩或提取某个文件

这些是我的代码

```
Dim ZipToUnpack As String = txtPath.Text
Dim TargetDir As String = txtTXT.Text
Console.WriteLine("Extracting file {0} to {1}", ZipToUnpack, TargetDir)
Using zip1 As ZipFile = ZipFile.Read(ZipToUnpack)
'AddHandler zip1.ExtractProgress, AddressOf MyExtractProgress
Dim a As ZipEntry
For Each a In zip1
a.Extract(TargetDir, ExtractExistingFileAction.OverwriteSilently)
Next
MsgBox("Done")
getFiles()
End Using

For j As Integer = 0 To ListView1.Items.Count - 1
Dim k As StreamReader = New StreamReader(New FileStream(Path.Combine(ListView1.Items(j).Tag, ListView1.Items(j).Text), FileMode.Open, FileAccess.Read, FileShare.Read))
k.ReadLine() 
```

你能帮我下一步如何阅读所有的html并计算img标签吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T01:06:22.367

您将要采取的步骤，以与语言无关的方式：

1.  解压 .epub 文件

2.  阅读 META-INF/container.xml 文件，找到根文件标签。这为您提供了声明包内容的 .opf 文件的位置。（我将其称为 content.opf，但它可能有另一个名称。）

3.  读取并解析 content.opf（它也是 XML），并列出该`<manifest>`部分中的每个文件和路径。这是包中每个文件的列表。

4.  对于该清单列表中的每个 .xhtml 文件（即具有媒体类型“application/xhtml+xml”的文件），解析 HTML，查找`<img>`标签。

# c# - 正则表达式组字符串替换问题

> ID：12851433
> 
> 赞同：2
> 
> 时间：2012-10-12T02:35:56.297
> 
> 标签：c#, regex

目标字符串是`"A + A_RT + B*A+AA"`. 我想`A`用`B`和`B`替换`A`。但我不想替换`A_RT`to`B_RT`或`AA`to `BB`。预期的结果是`"B + A_RT + A*B+AA"`。我怎样才能在 C# 中做到这一点？谢谢。

目前我使用以下代码，但它将替换`A_RT`为`B_RT`...

```
IDictionary<string, string> map = new Dictionary<string, string>()
                                  {
                                      {"A","B"},
                                      {"B","A"},
                                  };

string str = "A + A_RT + B*A+AA";
var regex = new Regex(String.Join("|", map.Keys));
var newStr = regex.Replace(str, m => map[m.Value]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T03:23:35.887

我将正则表达式更改为`var regex = new Regex(@"\bA\b|\bB\b")`，然后它可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T10:14:44.383

利用`var regex = new Regex(String.Format("\\b[{0}]\\b",String.Join("", map.Keys)));`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T02:59:12.120

我不是特别擅长正则表达式模式，所以可能有更好的方法来做到这一点。但是图案

```
@"([a-zA-Z_]+)" 
```

能够获取所有变量标记作为匹配结果。

# nginx - 如何使用 nginx.conf 在基本授权中获取用户名/密码？

> ID：12851434
> 
> 赞同：3
> 
> 时间：2012-10-12T02:35:57.143
> 
> 标签：nginx, basic-authentication

有没有在基本授权中获取用户名/密码 nginx.conf 的功能？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-05-19T11:30:41.323

您可以使用标准变量**$remote_user** ，这意味着*基本身份验证提供的用户名*。

[http://nginx.org/en/docs/http/ngx_http_core_module.html#var_remote_user](http://nginx.org/en/docs/http/ngx_http_core_module.html#var_remote_user)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-10T15:08:36.587

使用 nginx 3rd-party 模块[FRiCKLE/ngx_coolkit](https://github.com/FRiCKLE/ngx_coolkit)，您可以使用它`$remote_passwd`来获取密码。和 nginx 核心有`$remote_user`.

# ios - 排查核心数据死锁？

> ID：12851436
> 
> 赞同：2
> 
> 时间：2012-10-12T02:36:07.467
> 
> 标签：ios, sqlite, core-data

我有一个 iOS 应用程序，它从 Web 服务中提取用户数据并将其保存到 sqlite 支持的核心数据存储中。虽然这也在进行中，但我正在获取用户头像的 url，并在每个图像的下载可用时将图像本地保存到核心数据中。

这些中的每一个都在自己的线程上执行，具有自己的托管对象上下文，但具有相同的共享持久存储协调器。

当只有几个项目被拉下时，这很有效，但是当我们接近 100 个左右的项目时，我在初始加载数据时经常出现死锁。当我暂停调试器时，我看到不同的线程通常都在等待 executeFetchRequest。

我在我的方案中打开了 sql 调试，并根据控制台输出获取完成，但线程永远不会继续。

我还可以使用或查看什么来检查这些死锁的原因或如何防止这些死锁发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T04:09:23.743

要回答您的确切问题：“我还可以使用或查看什么来检查这些死锁的原因或如何防止这些死锁发生？”，我只能用一些非常普遍的想法来回答，因为问题你正在接近很难：

*   从您认为可能发生锁定的任何地方添加 NSLog 语句。我发现 using`NSLog(@"%s ...YOUR DEBUG STATEMENT", __PRETTY_FUNCTION__)`可以帮助您准确识别正在调用哪个函数，以及从哪个队列执行它。

如果我们超越了可用工具的问题（基本上没有什么用处），那么我会留下一些关于如何调试您描述的系统的建议：

作为背景知识：我已经构建了平滑滚动的 UITableViews，其中包含 2000 多个动态下载和显示的可变高度单元格，其中包含绝对没有由于数据处理或绘图而导致的抖动或延迟的图像。该系统最初是使用 CoreData 设计的，但最终我们直接使用 SQLite 来解决您在多线程和并行性方面遇到的问题。我并不是在提倡切换到 SQLite——这是我们在内部做出的一个决定，目的是提高速度并减少本地数据库中的不一致性。我将此作为我回答的上下文。

我将首先仔细研究您对 Grand Central Dispatch 的使用。如果您使用任何 dispatch_sync 调用，请确保它们不会出现在阻塞操作线程的链中。我这样做最初是为了确保多个线程不会同时访问一个托管对象上下文，并且在调试几个小时后才发现问题。这些可能会偷偷摸摸，因为 dispatch_sync 调用可能在其他函数调用的函数中很深。

我最终确实使用了一个事务系统（非常 SQL-y），它为单个查询/更新动态创建了队列，这将确保一次不会发生太多操作。我还有一个完全不同的系统，它将使用单独的串行读取队列来快速读取数据库。如果可能，该队列的 MOC 将从其他 MOC 镜像。这很重，而且相对来说非常慢。由于系统主要在后台线程上处理，因此与用户隔离。

CoreData 通常很难多线程。SQLite 稍微简单一些，尽管您必须围绕它构建许多特定于应用程序的架构才能使其可用。

如果您想发布有关您的系统的更多详细信息，我可能会提供更具体的帮助。希望这有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T11:38:32.537

确保一起批量更改数据库。每次更改后无需调用 saveContext。相反，在每十几个更改之后保存在临时背景上下文中可能就足够了。

请参阅我的这篇文章关于一些指针： http: [//www.cocoanetics.com/2012/07/multi-context-coredata/](http://www.cocoanetics.com/2012/07/multi-context-coredata/)

# c++ - QString 到 const byte* 的转换

> ID：12851441
> 
> 赞同：0
> 
> 时间：2012-10-12T02:36:58.043
> 
> 标签：c++, qt, botan

我正在尝试使用 Botan 库创建几个 QStrings 的 SHA-256 哈希 - 一个密码和一个盐。我做了很多尝试，试图将连接的盐+密码转换为正确的类型，以便输入到 Botan 进程函数中。我试图在 Botan 中使用的类的文档可以在[botan sha-256 文档](http://botan.randombit.net/doxygen/classBotan_1_1SHA__256.html)中找到 我最近的尝试是

```
///
/// Computes salted data hash
///

QByteArray MyClass::HashData(QString salt, QString password)
{
    QString concatenated = salt+password;
    QByteArray input(concatenated.toLocal8Bit());
    Botan::SHA_256 sha;
    Botan::SecureVector<Botan::byte> saltedHash
            = sha.process(&input,input.count()-1);  // -1 to get rid of the \0
    return QByteArray(saltedHash);
} 
```

当我编译我得到一个错误：没有匹配函数调用'Botan::SHA_256::process(QByteArray*, int)'... 候选人是：/usr/include/botan-1.10/botan/buf_comp.h： 101：Botan::SecureVector Botan::Buffered_Computation::process(const byte*, size_t)

如何将 QString 或 QByteArray 转换或复制到 const byte* 中？

**编辑：** 在我发布问题后，我尝试了更多方法。下面附上了一个似乎可行的方法，但我对使用 reinterpret_cast 感到不舒服，因为它看起来可能会导致我在 c++ noob 状态下不知道的问题。

```
Botan::SecureVector<Botan::byte>  MyClass::HashData(QString salt, QString password)
{
    QString concatenated = salt+password;
    QByteArray buffer(concatenated.toLocal8Bit());
    unsigned char * input = reinterpret_cast< unsigned char*>(buffer.data());

    Botan::SHA_256 sha;
    Botan::SecureVector<Botan::byte> saltedHash
            = sha.process(input,buffer.count()-1);  // -1 to get rid of the \0
    return (saltedHash);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:02:09.660

有同样的问题：[QByteArray convert to/from unsigned char *](https://stackoverflow.com/questions/8939935/qbytearray-convert-to-from-unsigned-char)

但是你为什么不使用 reinterpret_cast，例如这样：

> ```
> ...
> QString salt = "salt";
> QString password = "password";
> QString concatenated = QString("%1%2").arg(salt).arg(password);
> unsigned char * input = (unsigned char *) concatenated. toLocal8Bit().data();
> printf("%s", input);
> ... 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T03:16:44.793

您可以使用以下方法。

```
const char * QByteArray::data() 
```

# objective-c - 如何在 iOS 编程中获取每个枚举？

> ID：12851442
> 
> 赞同：0
> 
> 时间：2012-10-12T02:36:59.210
> 
> 标签：objective-c, xcode, arrays, nsuserdefaults, enumerator

我目前正在创建我的 iPhone 应用程序的一部分，基本上有一个单元格列表（在表格视图中），它就像现有的苹果记事本一样。

我正在尝试使单元格的名称具有数组中字符串的名称。这就是我目前正在做的事情。

```
@interface ViewController ()
{
NSMutableArray *cameraArray;
NSMutableArray *notesArray;
NSMutableArray *voiceArray;
}
@end

@implementation ViewController
//@synthesize myTableView;
- (void)viewDidLoad
{
[super viewDidLoad];

NSUserDefaults *ud=[NSUserDefaults standardUserDefaults];
//[ud setObject:@"Archer" forKey:@"char1class"];
[ud synchronize];
NSString *key1;//[ud stringForKey:@"Key1"];
NSString *key2; //[ud stringForKey:@"Key1"];
NSString *key3; //[ud stringForKey:@"Key1"];

if([ud stringForKey:@"Key1"] == nil){
    key1 = @"Open Camera Slot";
}else{
    key1 = [ud stringForKey:@"key1"];
}

if([ud stringForKey:@"Key2"] == nil){
    key2 = @"Open Camera Slot";
}else{
    key2 = [ud stringForKey:@"key2"];
}

if([ud stringForKey:@"Key3"] == nil){
    key3 = @"Open Camera Slot";
}else{
    key3 = [ud stringForKey:@"key3"];
}

cameraArray = [[NSMutableArray alloc]initWithObjects:key1, key2, key3, nil];

}

//tableview datasource delegate methods
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
    return 1;
}
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return cameraArray.count;
}
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath     *)indexPath{

CustomCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];

if(cell == nil){
    cell = [[CustomCell alloc]initWithStyle:UITableViewCellStyleDefault     reuseIdentifier:@"Cell"];
}

NSEnumerator *enumerator = [cameraArray objectEnumerator];
id anObject;
NSString *cellName = nil;
while (anObject = [enumerator nextObject]) {
   cellName = anObject;
}
//static NSString *cellName = [cameraArray.objectAtIndex];
cell.textLabel.text = [NSString stringWithFormat:cellName];
return cell;

} 
```

所以我基本上是从 NSUserDefaults 中的键创建 cameraArray 中的字符串（我这样做只是为了测试目的，稍后用户将输入这些字符串）

我坚持的是枚举器很好地遍历数组，但只使用 tableView 中所有单元格的最后一个值（第三个值）。

所以如果有三个字符串，“第一”“第二”和“第三”所有三个单元格都说“第三”

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T03:03:48.733

这段代码有几个问题。'rdelmar' 在他的评论中发布了基本答案。我想我会走一些东西作为学习练习。

您在这里使用枚举器来遍历数组的值。有一个更简单的方法。请注意，您的代码不需要这样做。我指出这一点以供将来参考。

将枚举器、anObject、cellName 和 while 循环替换为：

```
for (NSString *cellName in cameraArray) {
    // Do something with cellName
} 
```

这是遍历 NSString 对象数组的所有值的一种更简单的方法。如果数组包含不同类型的对象，则将 NSString 替换为适当的类型。

接下来是您使用创建新字符串并结合使用 stringWithFormat:。在这种情况下都不需要。在您发布的代码中， cellName 已经是一个 NSString 引用。直接赋值就好了，比如：

```
cell.textLabel.text = cellName; 
```

无需创建新的 NSString 对象。并且您应该仅在实际具有字符串格式时才使用字符串格式。

希望有帮助。

# notepad++ - 如何在记事本++中备份快捷方式（热键）

> ID：12851449
> 
> 赞同：4
> 
> 时间：2012-10-12T02:37:31.080
> 
> 标签：notepad++

有谁知道如何在记事本++中备份快捷方式（热键）。当必须使用备份文件重新安装记事本时，这将非常有用。

请告诉我怎么做，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-17T03:09:09.613

它确实保存在文件夹中的xml文件“shortcuts.xml”中`%APPDATA%/Notepad++`

如果您备份 Notepad++，您可能需要备份以下 xml 文件：

*   **settings.xml** : 你的设置
*   **shortcuts.xml**：你的快捷方式
*   **userDefineLang.xml**：您定义的所有语言（尽管可以使用“定义您的语言”>“另存为...”直接从 Notepad++ 备份）

如果您使用 NppExec，您可能还需要考虑备份这些文件：`%APPDATA%/Notepad++/plugins/config/npes_saved.txt`和`NppExec.ini`（同一文件夹）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T02:49:41.417

快捷方式存储在 notepad++ 安装目录中名为`shortcuts.xml`.

在我的 Windows 7 系统上，登录用户不会影响此文件。我的本地副本存储在：

```
C:\Users\paddy\AppData\Roaming\Notepad++\shortcuts.xml 
```

该文件夹中还有其他设置，因此您可以备份整个内容。

我正在使用域登录，所以如果该文件夹没有帮助，只需在您的`AppData`文件夹中搜索“notepad++”。

# objective-c - UITextView，行号未对齐

> ID：12851450
> 
> 赞同：2
> 
> 时间：2012-10-12T02:38:02.640
> 
> 标签：objective-c, ios, nsstring, uitextview

我有一个 UITextView 用来显示文本。在旁边，我有一个 UITableView 用来显示行号。尝试将行号与文本行对齐时会出现问题。这是问题的截图：[https](https://www.dropbox.com/s/7sjqm4nrsqm6srh/Screen%20Shot%202012-10-11%20at%209.16.58%20PM.png) ://www.dropbox.com/s/7sjqm4nrsqm6srh/Screen%20Shot%202012-10-11%20at%209.16.58%20PM.png 例如第7行应该下移因为它不在新行的开头。我认为问题必须处理文本换行时的间距，但我不确定。

因此，对于 UITableView，我创建的单元格数量与文本行数相同。然后使用以下方法拉伸单元格，使其高度与每行文本相同：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
int i = indexPath.row;
if (i == 0) {
    return 10;
}

UIFont *font = _codeView.font;

NSArray *strings = [_codeView.text componentsSeparatedByString:@"\n"];
NSString *tempString = [strings objectAtIndex:i-1];

if (([strings objectAtIndex:i-1] == @"\n") | ([[strings objectAtIndex:i-1] length] == 0) ) {
    tempString = @"hi";
}

CGSize stringSize = [tempString sizeWithFont:font constrainedToSize:CGSizeMake(_codeView.bounds.size.width, 9999) lineBreakMode:NSLineBreakByWordWrapping];
CGFloat height = stringSize.height;

return height;
} 
```

_codeView 是我用来显示代码的 UITextView。显示行号的 UITableView 在顶部也有一个空白单元格，因此我可以将第一个单元格与行号与第一行文本对齐。

我尝试了多种使用间距的方法，但似乎都没有解决问题。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T02:51:58.037

我相信问题在于您传递给 sizeWithFont 的大小。您正在将宽度设置为 textView 的宽度。这实际上有点太宽了。文本视图实际上有一点边距。尝试从宽度中减去几个点。此外，您正在处理属性文本，而不是纯字符串。您应该查看计算 NSAttributedString 高度的方法。

您发布的代码中的最后一件事。您在每次调用 heightForRowAtIndexPath: 时拆分 _codeView.text：。那很糟。您应该这样做一次并保存字符串。这种方法被称为很多。那是很多冗余的字符串拆分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T02:45:22.953

我对你在问什么感到有点困惑。

您是说您有文本，然后是旁边的表格视图，并且您正在尝试将两者对齐吗？

# python - 为 Python 工作 sscanf（最好是 py3k）？

> ID：12851453
> 
> 赞同：1
> 
> 时间：2012-10-12T02:38:28.747
> 
> 标签：python, printf, scanf

我已经看到[了这个问题](https://stackoverflow.com/q/2175080/309483)，但是我遇到了[顶级解决方案](https://hkn.eecs.berkeley.edu/~dyoo/python/scanf/)的问题。例如：

```
>>> scanf.sscanf("\"test\"","\"%s\"")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "scanf.py", line 393, in sscanf
    return bscanf(CharacterBufferFromIterable(inputString), formatString)
  File "scanf.py", line 414, in bscanf
    return parser(buffer)
  File "scanf.py", line 577, in __call__
    raise IncompleteCaptureError(e, tuple(results))
scanf.IncompleteCaptureError: (FormatError('" != ',), ('test"',))
>>> 
```

我究竟做错了什么？这不应该工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:43:38.090

我包装[了解析模块](http://pypi.python.org/pypi/parse)：

```
from parse import parse
parse("\"%s\"".replace("%s","{}"), "\"test\"").fixed 
```

# c# - 将实体列的对象传递给方法

> ID：12851456
> 
> 赞同：0
> 
> 时间：2012-10-12T02:38:56.963
> 
> 标签：c#, generics

我在课堂上有一个方法，我写在下面： -

```
 public void Insert<EntityColumn>(int foreignKeyId, EntityColumn column,
        TList<xyz> entity, TransactionManager transactionManager)
{
    entity.ForEach (
                 pca =>
                 {
                     pca.GetType().GetProperty(column.ToString()).SetValue(pca, foreignKeyId, null);
                     pca.EntityState = EntityState.Added;
                     _provider.payment.Insert(transactionManager, pca);
                 }
            );
} 
```

现在我想从测试类中调用这个方法。代替 EntityColumn 列，我想发送对象的列名。这里的对象是我的表的表示。表名是 ClientData。说列是“InvoiceNo”。那么如何设置这个并传递给这个方法。请协助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T03:24:31.017

我目前无法访问我的开发人员工具，因此无法先进行测试。但是我认为，如果您更改为此，它将按照您的示例中所写的方式运行。

```
public void Insert<TableType>(int foreignKeyId, string columnName,
    TList<TableType> entity, TransactionManager transactionManager) {

    entity.ForEach(pca => {
        pca.GetType().GetProperty(columnName).SetValue(pca, foreignKeyId, null);
        pca.EntityState = EntityState.Added;
        _provider.payment.Insert(transactionManager, pca);
    });
} 
```

我不确定这是否能解决您的问题，但您会注意到您仅使用列变量作为字符串来表示您想要调用的属性的名称，该名称由 TableType 表示。我从未见过需要知道列类型的地方，但也许我没有看到更大的图景。

既然你告诉它你的实体 TList 的类型，你根本不应该使用反射，我承认我仍然不明白你想要做什么。

# unix - unix 文件系统上的绝对路径名是否需要以“/”开头？

> ID：12851459
> 
> 赞同：0
> 
> 时间：2012-10-12T02:39:34.713
> 
> 标签：unix

关于绝对路径名的其他限制是什么？

似乎唯一的限制是它必须以“/”开头，并且下面的 ascii 字符序列必须由每个用“/”分隔的 ascii 字符段组成。

注意：我试图找出将路径名映射到文件的函数的名称空间。

编辑：事实证明，对于我的家庭作业，我对限制的推理是正确的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T02:54:57.770

路径名的长度不能超过 PATH_MAX - 请参阅 /usr/include/limits.h 或 sysconf(3)。

文件的长度不能超过取决于文件系统的 NAME_MAX - 请参阅 fpathconf(3) 或[pathconf](http://pubs.opengroup.org/onlinepubs/000095399/functions/pathconf.html)。

绝对路径确实以“/”开头

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T02:47:30.333

简短的回答是它取决于使用的文件系统，但您可以从内核强制使用特定的字符集。

长版大部分没有太多限制，有些甚至可以让你在文件名中使用'/'或'\0'作为有效字符，但是在软件中处理它很疯狂，所以没有人真的使用该“功能”。例如，如果您映射一个 FAT 文件系统，您将被限制在合法的范围内（仅限 ascii）。我使用 ext4 和 reiserfs4，它们允许除 '/' 和 '\0' 之外的所有内容。我使用 utf-8 字符集，因此我可以使用名称中包含所有全局字符的文件名（我有一些带有日文或俄文名称的文件 - 主要是来自这些国家的音乐）。

# java - 从命令行读取文件名并在 main 方法之外使用它

> ID：12851462
> 
> 赞同：0
> 
> 时间：2012-10-12T02:41:05.280
> 
> 标签：java, console-application

我必须编写一个程序来计算文件中的行数，该文件是在启动程序时指定的：

```
java CountText textFile.txt 
```

在主要方法中，我使用此代码获取在 cmd 中输入的文件名：

```
if ( args.length > 0 ) {
    String file = args[0];
} 
```

在 main 方法之外，我想再次引用这个文件名：

```
public void Lines() throws Exception {      
    FileReader fr = new FileReader ( file ); 
```

找不到符号（我没有得到，因为主要方法是公共的和静态的？）。我觉得这是一个简单的解决方案，但我无法弄清楚。

编辑：由充满鳗鱼的气垫船（也是特拉维斯）解决。这是一个范围问题，可以通过参数将字符串传递给方法来解决。

```
public class CountText {
public static void main ( String args[] ) throws Exception {
    CountText count = new CountText();

    if ( args.length > 0 ) {
        String file = args[0];
        count.Lines( file );
        count.Words( file );
        count.Characters( file );
    }
}

public void Lines ( String file ) throws Exception {        
    FileReader fr = new FileReader ( file ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T02:47:21.753

您在这里遇到的是范围问题。您的变量是在主函数中定义的，因此另一个函数无法访问它。我们说变量文件是主函数的**本地变量。**

在 Lines 方法中使用文件变量的一种方法，以便它接受一个字符串参数，然后您可以将其传递给它。那看起来像

```
public void Lines( String fileName ) throws Exception {
    // rest of the code here
} 
```

那么你可以像这样调用该方法

```
if ( args.length > 0 ) {
    String file = args[0];
    Lines( file );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T02:55:07.417

main 方法是程序的入口点。

main 方法甚至可以在与包含程序逻辑的类不同的类中。

您必须为文件路径声明一个私有实例变量并将其传递给类的构造函数。

在 main 方法中，您创建类的一个实例。

```
public class SomeClass {

    private String filePath;

    // this is the constructor of the class
    public SomeClass(String filePath){
        this.filePath = filePath;
    }

    public void lines() throws Exception {      
        FileReader fr = new FileReader ( this.filePath );
        ...
        ...
    }

    public static void main(String[] args) {

        SomeClass o = new SomeClass(args[0]);

    }

} 
```

正如我之前所说，您甚至可以从 SomeClass 中删除 main 方法并将其移动到 MainClass：

```
public class MainClass{
    public static void main(String[] args) {

        SomeClass o = new SomeClass(args[0]);

    }
} 
```

而且你可以玩得更开心：你甚至可以在命令行中接收多个文件，多次实例化 SomeClass，然后批量处理每个文件，因为文件路径是一个实例变量，每个对象都是分开和不同的：

```
public class MainClass{
    public static void main(String[] args) {

        List<SomeClass> list = new ArrayList<SomeClass>();

        for(String s: args){
           list.add(new SomeClass(s));  // create an instansce for each filename in args
        }

        for(SomeClass o: list){
           o.lines();    // run method on each file
        }

    }
} 
```

这就是 OOP 的魔力！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T02:44:36.260

你应该在你的类中声明一个名为`file`type的字段`String`。

像这样的东西

```
public class SomeClass {

private static String file;

public static void main(String[] args) {
file = args[0];
}

} 
```

# ios - iOS GCD：主线程从主队列以外的队列中取出块？

> ID：12851466
> 
> 赞同：2
> 
> 时间：2012-10-12T02:41:38.107
> 
> 标签：ios, multithreading, grand-central-dispatch

我知道队列不是线程。队列是比 GCD 中的线程更高层次的概念。程序员只处理队列，让系统决定哪些线程执行块以获得最大效率。

而且我知道主队列绑定到主线程，这意味着如果我在主队列上放置一个块，只有主线程会出列并运行它。我的问题是：除了主队列之外，主线程是否有可能从队列（串行或并发）中出列块？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T19:57:07.863

问题：“主线程是否有可能从队列（串行或并发）除主队列之外的队列中取出阻塞？”

回答：“没有。”

如果 GCD 允许提交到全局并发队列的块在主线程上运行，那么这些块也可能执行阻塞 UI 的长时间运行的操作，这既不好，也违背了 GCD 自己的设计原则。它也不是如何工作的文档（如果您想**确切**了解 GCD 的工作原理，源代码始终是一个很好的参考，因为 GCD 也是开源的）。唯一可能在当前线程上执行块作为优化的时间是在 dispatch_sync() 情况下，因为很明显程序员不打算在该块之前返回当前线程，并且在它之前的任何排队块, 在任何情况下都完成并且阻塞当前线程是**预期的**行为，所以这并不奇怪。dispatch_async() 显然不是这样，因为该 API 显然需要异步行为。

最后，为了澄清该答案中的另一个混淆点，dispatch_queue_create() 不仅创建串行队列 - 它还可以用于创建并发队列，因此并发队列执行不是全局并发队列的唯一提供！请参阅第二个参数 - 它可以设置`DISPATCH_QUEUE_CONCURRENT`为创建并发队列（手册页有点过时，但 HeaderDoc 中`/usr/include/dispatch/queue.h`的权威性）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T03:19:05.997

如果您使用`dispatch_sync`. [的文档是`dispatch_sync`](http://developer.apple.com/library/ios/documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html#//apple_ref/doc/uid/TP40008079-CH2-SW17)这样说的：

> 作为一种优化，此函数在可能的情况下调用当前线程上的块。

所以如果你`dispatch_sync`在主线程上使用，它可能会在主线程上执行块。

# linux - Bash“source”命令返回错误的连接字符串

> ID：12851470
> 
> 赞同：0
> 
> 时间：2012-10-12T02:41:59.383
> 
> 标签：linux, bash, shell, centos, redhat

我有一个这样的配置文件：

```
//filename : stat.conf
LAS_SERVER="127.0.0.1"
LAS_PORT=3306
LAS_USER=root
LAS_PWD=root
LAS_DB=test
CONN_STR_LAS_DB="-h$LAS_SERVER -P$LAS_PORT -u$LAS_USER -p$LAS_PWD $LAS_DB" 
```

现在我运行这样的`source`命令：

```
$ source ./stat.conf

$ echo $CONN_STR_LAS_DB
testot.0.1 
```

你可以看到结果是错误的。不在我们的预料之中。

相反，如果我像这样在 shell 中运行命令，我可以获得正确的结果：

```
$ LAS_SERVER="127.0.0.1"
$ LAS_PORT=3306
$ LAS_USER=root
$ LAS_PWD=root
$ LAS_DB=test
$ CONN_STR_LAS_DB="-h$LAS_SERVER -P$LAS_PORT -u$LAS_USER -p$LAS_PWD $LAS_DB"
$ echo $CONN_STR_LAS_DB
-h127.0.0.1 -P3306 -uroot -proot test 
```

这是正确的结果。

所以，我的问题是：为什么我在使用 "source ./stat.conf" 时得到了错误的结果？

我在另一台电脑上测试了同样的操作，我可以得到正确的结果。有什么我错过了在我的电脑上配置的东西吗？

我的操作系统是 CentOS 5。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T02:46:41.857

您的配置文件具有 windows 样式的行尾 (\r\n)，而不是 unix 样式的 (只是 \n)。您可以使用 dos2unix 命令对其进行转换。然后，切换到不会创建带有奇怪行尾的文件的文本编辑器。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-12T02:54:05.327

我知道你的 shell 代码有什么问题。

那是环境变量的结果，你在shell脚本中声明的$CONN_STR_LAS_DB可以只存在于这个脚本的运行时间内，当然你不能在这个脚本之外回显$CONN_STR_LAS_DB。

解决这个问题的方法是“导出”你的变量，即

```
export $CONN_STR_LAS_DB 
```

在你的 shell 脚本中，这肯定是可以做到的！祝你好运！

# android - 保护数据库文件不被任何其他用户访问

> ID：12851472
> 
> 赞同：1
> 
> 时间：2012-10-12T02:42:14.950
> 
> 标签：android, database, security, file-permissions

我想知道我们是否可以通过密码保护来保护我们的数据库文件（.db）。有没有办法授予对`.db`文件的访问权限？因为我想应用不允许任何其他用户访问我的 .db 文件的机制，即使他/她得到了`.db`文件。

实际上，我正在准备一个备份实用程序应用程序，它可以备份联系人、短信、图库文件和应用程序。备份目的地保存在 SD 卡上。我已经成功完成了联系的第一部分。然后我想到了它的安全性，任何人都可以拿走我的SD卡，它可以窃取我的`.db`文件以获取我的联系方式。那么有什么办法可以防止这种情况发生吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:38:00.487

一般来说，如果您将文件存储在应用程序目录中（在手机上），除非设备已获得根目录，否则没有人可以访问该文件。如果您将文件放在 sd 卡上，则每个具有必要权限的应用程序都可以读取所有文件。

所以你需要加密文件。我不知道您是如何编写数据库的，但总的来说，在 java 中包装流很简单。因此，您可以简单地为您的 io 函数添加加密。这种用法的类是：用于加密的[CipherOutputStream和用于解密的](http://developer.android.com/reference/javax/crypto/CipherOutputStream.html)[CipherInputStream](http://developer.android.com/reference/javax/crypto/CipherInputStream.html)。

# java - 如何从soap Web服务接收JSONObject作为响应而不是android中的字符串

> ID：12851473
> 
> 赞同：1
> 
> 时间：2012-10-12T02:42:19.613
> 
> 标签：java, web-services, ksoap2

我有一个将 JSONObject 作为响应发送的 Web 服务，但在 Android 中，如果我收到 json 对象响应，则会发生异常：

```
Oct 12, 2012 7:36:16 AM org.apache.axis.Message writeTo
SEVERE: java.io.IOException:
AxisFault
 faultCode: {http://schemas.xmlsoap.org/soap/envelope/}Server.userException
 faultSubcode: 
 faultString: java.io.IOException: No serializer found for class org.json.JSONObject in registry org.apache.axis.encoding.TypeMappingDelegate@7275f5b7
 faultActor: 
 faultNode: 
 faultDetail: 
    {http://xml.apache.org/axis/}stackTrace:java.io.IOException: No serializer found for class org.json.JSONObject in registry org.apache.axis.encoding.TypeMappingDelegate@7275f5b7
    at org.apache.axis.encoding.SerializationContext.serializeActual(SerializationContext.java:1507)
    at org.apache.axis.encoding.SerializationContext.serialize(SerializationContext.java:980)
    at org.apache.axis.encoding.SerializationContext.serialize(SerializationContext.java:801)
    at org.apache.axis.message.RPCParam.serialize(RPCParam.java:208)
    at org.apache.axis.message.RPCElement.outputImpl(RPCElement.java:433)
    at org.apache.axis.message.MessageElement.output(MessageElement.java:1208)
    at org.apache.axis.message.SOAPBody.outputImpl(SOAPBody.java:139)
    at org.apache.axis.message.SOAPEnvelope.outputImpl(SOAPEnvelope.java:478)
    at org.apache.axis.message.MessageElement.output(MessageElement.java:1208)
    at org.apache.axis.SOAPPart.writeTo(SOAPPart.java:315)
    at org.apache.axis.SOAPPart.writeTo(SOAPPart.java:269)
    at org.apache.axis.Message.writeTo(Message.java:539)
    at org.apache.axis.transport.http.AxisServlet.sendResponse(AxisServlet.java:902)
    at org.apache.axis.transport.http.AxisServlet.doPost(AxisServlet.java:777)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at org.apache.axis.transport.http.AxisServletBase.service(AxisServletBase.java:327)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Unknown Source)

    {http://xml.apache.org/axis/}hostname:Kanmani-PC

java.io.IOException: No serializer found for class org.json.JSONObject in registry org.apache.axis.encoding.TypeMappingDelegate@7275f5b7
    at org.apache.axis.AxisFault.makeFault(AxisFault.java:101)
    at org.apache.axis.SOAPPart.writeTo(SOAPPart.java:317)
    at org.apache.axis.SOAPPart.writeTo(SOAPPart.java:269)
    at org.apache.axis.Message.writeTo(Message.java:539)
    at org.apache.axis.transport.http.AxisServlet.sendResponse(AxisServlet.java:902)
    at org.apache.axis.transport.http.AxisServlet.doPost(AxisServlet.java:777)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at org.apache.axis.transport.http.AxisServletBase.service(AxisServletBase.java:327)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.io.IOException: No serializer found for class org.json.JSONObject in registry org.apache.axis.encoding.TypeMappingDelegate@7275f5b7
    at org.apache.axis.encoding.SerializationContext.serializeActual(SerializationContext.java:1507)
    at org.apache.axis.encoding.SerializationContext.serialize(SerializationContext.java:980)
    at org.apache.axis.encoding.SerializationContext.serialize(SerializationContext.java:801)
    at org.apache.axis.message.RPCParam.serialize(RPCParam.java:208)
    at org.apache.axis.message.RPCElement.outputImpl(RPCElement.java:433)
    at org.apache.axis.message.MessageElement.output(MessageElement.java:1208)
    at org.apache.axis.message.SOAPBody.outputImpl(SOAPBody.java:139)
    at org.apache.axis.message.SOAPEnvelope.outputImpl(SOAPEnvelope.java:478)
    at org.apache.axis.message.MessageElement.output(MessageElement.java:1208)
    at org.apache.axis.SOAPPart.writeTo(SOAPPart.java:315)
    ... 19 more 
```

**谁能帮我知道是否可以在 Web 服务和 android 客户端之间发送和接收 JSONObject 而无需将 JSONObject 转换为字符串？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T03:40:47.533

> 谁能帮我知道是否可以在 Web 服务和 android 客户端之间发送和接收 JSONObject 而无需将 JSONObject 转换为字符串？

不，它不能。如果它不是作为字符串发送的，则它不是 JSON。（不包括通信中使用的任何压缩或加密）。

# restlet - 使用 xstream 和 jettison 将 JSON 发布到 Restlet 会导致“不支持的媒体类型”

> ID：12851474
> 
> 赞同：1
> 
> 时间：2012-10-12T02:42:21.953
> 
> 标签：restlet, restlet-2.0

我正在使用带有 xstream 和 jettison 扩展的 Restlet 2.1.0 的 jse 版本，这使我能够拥有这样声明的资源：

```
@Get("json")
public Customer retrieve(); 
```

这让我有一个客户端可以选择是获取 JSON 字符串还是获取 Customer 对象，而 xstream+jettison 进行序列化/反序列化。

我也有一个这样声明的资源方法：

```
@Post
public Customer store(Customer customer); 
```

我可以使用以下内容发布：

```
clientResource.post(customer, Customer.class); 
```

这一切似乎都很好。然而，最简单的情况是不起作用的一件事，即向 Post Restlet 资源发布 JSON 字符串。

当我尝试发布以下 JSON 字符串时：

```
{"com.redprairie.task.common.Customer":{"firstName":"George","lastName":"Shaw","birthDate":"1856-07-26 07:00:00.0 UTC","address":"Bibbs Hall Lane, Ayot St. Lawrence, AL6 9BX  United Kingdom"}} 
```

我得到这个堆栈跟踪：

```
<failure message="Unsupported Media Type (415) - Unsupported Media Type" type="org.restlet.resource.ResourceException">Unsupported Media Type (415) - Unsupported Media Type
    at org.restlet.resource.ClientResource.doError(ClientResource.java:612)
    at org.restlet.resource.ClientResource.handleInbound(ClientResource.java:1203)
    at org.restlet.resource.ClientResource.handle(ClientResource.java:1070)
    at org.restlet.resource.ClientResource.handle(ClientResource.java:1087)
    at org.restlet.resource.ClientResource.post(ClientResource.java:1438)
    at com.redprairie.task.common.rest.RestletResource.post(RestletResource.java:99)
    at com.redprairie.task.common.rest.ServerResourceTest.testPostMethodUsingJSON(ServerResourceTest.java:165) 
```

我猜我做错了一些简单的事情，但我不确定它是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T23:14:21.557

我能够解决我的问题。

我试图使用以下方法发布 JSON 字符串：

```
String jsonString = "{some valid json}";
clientResource.post(jsonString, MediaType.APPLICATION_JSON); 
```

那没有用。不确定为什么它不起作用，但按照以下方式进行操作：

```
Representation rep = new StringRepresentation(jsonString, MediaType.APPLICATION_JSON);
clientResource.post(rep); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T15:06:49.267

您是否在 POST 请求标头中指定[内容类型？](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.17)

# c# - MembershipCreateUserException - 提供的用户名无效

> ID：12851476
> 
> 赞同：7
> 
> 时间：2012-10-12T02:42:40.007
> 
> 标签：c#, asp.net, asp.net-membership, asp.net-mvc-4, dotnetopenauth

在这条线上我遇到了一个例外 -

```
OAuthWebSecurity.CreateOrUpdateAccount(provider, providerUserId, model.UserName); 
```

System.Web.Security.MembershipCreateUserException：提供的用户名无效。

进入这个的数据是

*   提供者 - “脸书”
*   providerUserId - “1321311387573991”
*   model.UserName - “马克思佩恩”

初始化工作正常使用

```
WebSecurity.InitializeDatabaseConnection("club", "User", "UserID", "UserName", autoCreateTables: true); 
```

我找不到任何例子说明为什么它说用户名无效？是否有一个标准来定义什么是正确的用户名？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-13T22:08:07.967

我同样在寻找对此的解释。我不确定我是否完全理解，但在实验、调试和观看 Intellitrace 事件之后，似乎 CreateOrUpdateAccount 正在创建或更新 OAuthMembership 表中的条目，其中只有 Provider、ProviderUserId 和 UserId，这由查询 [在我的情况下] 基于此唯一 UserName 的 UserProfile 表。这样，如果您调用 CreateOrUpdateAccount 时使用不同的提供者和 providerUserId，但用户名相同，则两个提供者登录都绑定到应用程序中的相同用户帐户。

在创建/更新相应的 OAuthMembership 记录之前，我必须添加一个 UserProfile。在 VS 模板中，它看起来像这样：

```
db.UserProfiles.Add(new UserProfile { UserName = model.UserName }); 
db.SaveChanges();

OAuthWebSecurity.CreateOrUpdateAccount(provider, providerUserId, model.UserName); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-28T20:20:25.270

我有同样的问题。我通过在 SimpleMembershipInitializer 和 UsersContext 类中指定正确的连接字符串来解决它。我正在使用 ASP.NET MVC4

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T10:00:59.043

可能是您已经在正在开发的另一个站点上以某人的身份登录 @ localhost。并且您使用同名身份验证 cookie（默认为 .aspxauth）。因此，当您调用 CreateOrUpdate 时，它​​会尝试将另一个凭据添加到您已经“注册”的配置文件中。但是失败了，因为它不在数据库中。

要解决此问题，您必须从浏览器中删除身份验证 cookie 并再次登录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T14:09:36.090

根据 MSDN ( [http://msdn.microsoft.com/en-us/library/82xx2e62.aspx](http://msdn.microsoft.com/en-us/library/82xx2e62.aspx) )，成员资格类不支持带有逗号或 null 的用户名，空格是可以的（非 ascii 字符也是如此）。

*如果 password 为空字符串或 null、**username 为空字符串或 null 或包含逗号 (,)**、passwordQuestion 不为 null 且为空字符串或 passwordAnswer 不为 null 且包含空字符串，则CreateUser 方法将返回 null .*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-12T19:01:33.710

对我来说，这个错误发生在我的种子覆盖中。正如 rgnever 指出的，用户名不存在是指 UserProfile 表。要修复它，必须先创建用户和帐户，然后再创建 OAuth。

所以，而不是我的种子覆盖只调用：

```
membership.CreateOrUpdateOAuthAccount(provider, providerid, providername); 
```

它现在调用：

```
membership.CreateUserAndAccount(providername, null);
membership.CreateOrUpdateOAuthAccount(provider, providerid, providername); 
```

注意：空密码意味着用户无法通过登录表单登录，因为提供的密码永远不会为空。我只使用 OAuth，所以这对我来说不是问题。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-12T05:24:10.817

用户名也不应该有像“Max Payne”这样的空格

# c# - 如何使 CQRS 适应项目？

> ID：12851479
> 
> 赞同：28
> 
> 时间：2012-10-12T02:42:57.107
> 
> 标签：c#, .net, asp.net-mvc-3, cqrs

我遇到了一个名为[CQRS（Command Query Responsibility Segregation）](http://martinfowler.com/bliki/CQRS.html)的新术语，它指出概念模型应该分为命令模型和查询模型，作为典型的 CRUD 模型，其中命令和查询发生在同一个模型中。文章包含所有理论信息。

我不明白我应该如何在使用 ASP.net MVC3、EF 4.3 和 jQuery 的项目中实现这一点。

有人可以建议我如何在我的项目中实际实施它吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-12T04:12:20.557

[CQRS Journey](http://msdn.microsoft.com/en-us/library/jj554200.aspx)是一个很好的起点。我还建议您[在 Channel9 上观看 A Journey into](http://channel9.msdn.com/Events/Patterns-Practices-Symposium-Online/Patterns-Practices-Symposium-Online-2012/A-Journey-into-CQRS) CQRS。

无论如何，学习 CQRS 最好的事情就是自己尝试一下。对我来说，我必须在大约 6 个月的时间里学习如何让它适应我的项目。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-30T16:00:08.540

这篇文章有详细的解释。 [cqrs 简介](http://www.codeproject.com/Articles/555855/Introduction-to-CQRS)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-18T06:51:55.867

在这里您可以找到带有 cqrs 的 asp.net mvc 的示例代码。[CQRS 与 MVC](http://www.adamtibi.net/06-2013/implementing-a-cqrs-based-architecture-with-mvc-and-document-db)。在此处查找更多视频[CQRS with ASP.NET MVC - A Year On](http://channel9.msdn.com/Events/aspConf/aspConf/CQRS-with-ASP-NET-MVC-A-Year-On)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-05T21:08:18.453

我想指出 Greg Young 自己的经典例子：[Simple CQRS example](https://github.com/gregoryyoung/m-r)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-10T20:29:57.027

看看Its.CQRS：[https](https://github.com/jonsequitur/Its.Cqrs) ://github.com/jonsequitur/Its.Cqrs ，它正在微软的生产中使用。

# javascript - 将毫秒添加到时钟时的 JavaScript 错误消息

> ID：12851481
> 
> 赞同：1
> 
> 时间：2012-10-12T02:43:20.690
> 
> 标签：javascript, html

我不断收到此错误消息：

> 未捕获的 SyntaxError：意外的标识符

向时钟添加毫秒时。我是从书本上抄下来的，所以不知道哪里出了问题。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN">

<html>
    <head>
        <title>Event Test</title>
    </head>

    <body>
        <h1>Event Test</h1>
        <script type="text/javascript">
            now = new Date();
            localtime = now.toString();
            utctime = now.toGMTString();
            document.write("<strong>Local time:</strong> " 
            + localtime + "<br/>");
            document.write("<strong>UTC time:</strong> " +
            utctime);
            hours = now.getHours();
            minutes = now.getMinutes();
            seconds = now.getSeconds();
            mil = now.getMilliseconds();
            document.write("<h1>");
            document.write(hours + ":" + minutes + ":" + seconds + ":" mil);
            document.write("</h1>");
        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T02:46:25.773

看起来你在`+`这里错过了一个：

```
 document.write(hours + ":" + minutes + ":" + seconds + ":" mil);
//--------------------------------------------------------^^^^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T02:51:57.037

你错过了一个 +

```
document.write(hours + ":" + minutes + ":" + seconds + ":" + mil); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T02:47:58.290

线

```
document.write(hours + ":" + minutes + ":" + seconds + ":" mil); 
```

应该读

```
document.write(hours + ":" + minutes + ":" + seconds + ":" + mil); 
```

之前有一个`+`缺失`mil`

# asp.net-mvc - 如何使用 MvcJqGrid 修改分页栏

> ID：12851484
> 
> 赞同：2
> 
> 时间：2012-10-12T02:43:51.580
> 
> 标签：asp.net-mvc, jqgrid, pagination, fluent-interface, mvcjqgrid

我刚开始使用 MvcJqGrid 库，真是太好了！

我有以下代码：

```
@(Html.Grid("jqgUserGrid")
    .SetUrl(@Url.Action("GetUsers"))
    .SetRequestType(MvcJqGrid.Enums.RequestType.Post)
    .AddColumn(new Column("ID")
        .SetLabel("ID")
        .SetSearch(false))
    .AddColumn(new Column("UserLogin")
        .SetLabel("User Login")
        .SetSearch(true))
    .SetHeight(300)
    .SetPager("jqgUserPager")
) 
```

这一切都很好，但我的寻呼机上没有任何添加/编辑/删除按钮。

我一直在寻找一些说明如何添加这些的文档，但什么也没看到。

我是否必须添加这些老式的 jQuery 方式，或者是否有一种流畅的方式来添加这些？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:31:44.613

我们没有在 MvcJqGrid 中包含编辑支持，恐怕您必须采用老式的 jquery 方式。

抱歉，我之前没有注意到你的问题。

**编辑** 最近，添加了对内联编辑的基本支持：http: [//mvcjqgrid.skaele.it/Home/Edit](http://mvcjqgrid.skaele.it/Home/Edit)

# mysql - mysql_init(NULL) 分段错误

> ID：12851488
> 
> 赞同：1
> 
> 时间：2012-10-12T02:44:25.933
> 
> 标签：mysql, c, segmentation-fault

我有以下功能：

```
int get_tcounter(char *meterType, int *error) {
    MYSQL *conn = mysql_init(NULL);
    get_connection(conn, DB_HOST, DB_USER, DB_PW, DB); 

    MYSQL_STMT *stmt = mysql_stmt_init(conn);
    if (!stmt) {
        log_to_console("Init stmt failed: %s\n", mysql_error(conn));
        exit(1);
    }
    prepare_stmt(conn, stmt, GET_TCOUNTER_SQL);

    MYSQL_BIND param[1], res[1];
    memset(param, 0, sizeof(param));
    memset(res, 0, sizeof(res));

    char *paramBuff;
    int tcBuff;
    my_bool isNullParam[] = {0}, isNullRes[] = {0};

    paramBuff = meterType;

    bind_string_param(&param[0], strlen(meterType), paramBuff, &isNullParam[0], (unsigned long *) 0);
    bind_result(&res[0], MYSQL_TYPE_LONG, (char *) &tcBuff, &isNullRes[0], (unsigned long *) 0);

    execute_statement(stmt, param, res);

    *error = TRUE;
    int ret = 0;
    if (!mysql_stmt_fetch(stmt)) {
        ret = tcBuff;
        *error = FALSE;
    }

    mysql_stmt_close(stmt);
    mysql_close(conn);

    return ret;
} 
```

我第一次执行该函数时，一切都按预期工作，但第二次，`mysql_init`行抛出分段错误。

这是核心转储：

```
Program terminated with signal 11, Segmentation fault.
#0  0x00007fe23ee22f08 in ?? () from /lib/x86_64-linux-gnu/libc.so.6
(gdb) down
Bottom (innermost) frame selected; you cannot go down.
(gdb) up
#1  0x00007fe23ee24536 in ?? () from /lib/x86_64-linux-gnu/libc.so.6
(gdb) up
#2  0x00007fe23ee270b5 in malloc () from /lib/x86_64-linux-gnu/libc.so.6
(gdb) up
#3  0x00007fe23fa951d2 in my_malloc () from /usr/lib/x86_64-linux-gnu/libmysqlclient.so.18
(gdb) up
#4  0x00007fe23fa788df in mysql_init () from /usr/lib/x86_64-linux-gnu/libmysqlclient.so.18
(gdb) up
#5  0x0000000000403ed4 in get_tcounter (meterType=0x24bcbd0 "M-9669-8", error=0x7fff6b57a8a8) at database/data_access.c:284
284     MYSQL *conn = mysql_init(NULL); 
```

奇怪的是，第一次调用`conn`是 init 之前的 0x0，但第二次是任意的 0x7fff... 地址。

将 NULL 分配给 conn 并在 init 之前释放 conn 无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T03:00:13.713

很有可能这是内存损坏，它在 MySQL 中设置了一些不良状态。尝试在 Valgrind 下运行它，看看是否存在某种双重`free`或无效访问。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-08-08T00:54:39.547

不要链接调试库（libmysqld.lib），我在win10+mysql5.6 5.7+vs2017上测试过，mysql_init总是返回NULL或者crash。您应该链接发布库（libmysql.lib）。

# sql - 将 9999-12-31 00:00:00.000 转换为 null 失败

> ID：12851492
> 
> 赞同：0
> 
> 时间：2012-10-12T02:44:42.797
> 
> 标签：sql, sql-server

此查询不起作用：

```
(CASE WHEN CONVERT(VARCHAR(8),Time,3) IN ('31/12/99') THEN 'NA' ELSE Time END) 
```

我明白了

> 从字符串转换日期和/或时间时转换失败

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T06:31:18.473

如果你真的*想要* `NULL`（而不是`'NA'`），那么你可能应该使用[`NULLIF`](http://msdn.microsoft.com/en-us/library/ms177562.aspx)

```
SELECT NULLIF(time,'99991231') 
```

~~我假设您的 SQL Server 配置了 2 位数的年份截止值，因此它将年份解释`99`为`1999`. 如果您有不同的一年`99`，请改变`1999`您的想法。~~

* * *

重新阅读你的标题后，你想使用 9999 年，而不是 1999 年（也不是 2099 年）——在这种情况下，你*真的*应该使用四位数的年份。

* * *

如果`time`可能有时间组件和日期，那么`CASE`可能是有保证的 - 但将比较作为`datetime`值而不是字符串进行比较仍然会更好：

```
CASE WHEN DATEADD(day,DATEDIFF(day,0,Time),0) = '99991231' THEN NULL ELSE Time END 
```

正如@KaR 指出的那样——如果你想要文本`'NA'`而不是`NULL`，那么你需要转换`Time`为字符串——`CASE` *表达式*只能有一个返回类型，如果它必须在 and 之间进行选择`datetime`，`varchar`它将选择前者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T03:04:46.680

问题是您的案例查询返回两种不同的类型，它们是：

*   'NA' 是 VarChar 和
*   [时间] 这是一个日期时间。

因此，要解决此问题，您应该将 [Time] 作为 VarChar 类型返回。

试试下面的代码：

```
CASE WHEN CONVERT(VARCHAR(8), [Time], 3) IN ('31/01/12') THEN 'NA' ELSE CONVERT(VARCHAR(8), [Time], 3) END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T06:48:24.973

试试下面的代码....

```
declare @t1 table(t1 DATETIME)
insert into @t1(t1)
select '9999-12-31 00:00' UNION ALL
select '01-04-2012 11:20' union all
select '9999-12-31 10:00' 
select case when dateadd(dd,datediff(dd,0,t1),0) not in('9999-12-31') then t1 end date from @t1 
```

# java - Android - 将 SerachableDictionary 示例合并到我的应用程序中

> ID：12851493
> 
> 赞同：1
> 
> 时间：2012-10-12T02:44:46.073
> 
> 标签：java, android, search, sample

我正在尝试将 SearchableDictionary 示例合并到我的应用程序中，以获得简单的词汇表搜索功能。如果您不熟悉 SearchableDictionary，请单击菜单中的搜索图标并输入您的搜索词。它会根据您的搜索建议项目，如果您单击 go 或在键盘上输入，它将拉出与搜索匹配的项目列表。选择一个项目将显示一个全屏定义。

我已经合并了这一点，它有一个例外，当我在几个字母后点击 go 或 enter 在键盘上时，程序强制关闭并且不会显示匹配项列表。所有其他方面都有效，它在输入术语时建议项目并单击项目将显示其定义。

这是错误发生时间的日志。我看到它发生在 SearchableDictionary.java 中，但无法查明错误。

tl;dr - 尝试列出可能的搜索匹配项时应用程序崩溃。

```
10-12 02:35:41.450: E/AndroidRuntime(524): FATAL EXCEPTION: main
10-12 02:35:41.450: E/AndroidRuntime(524): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.company.appname/com.company.appname.SearchableDictionary}: java.lang.NullPointerException
10-12 02:35:41.450: E/AndroidRuntime(524):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
10-12 02:35:41.450: E/AndroidRuntime(524):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
10-12 02:35:41.450: E/AndroidRuntime(524):  at android.app.ActivityThread.access$600(ActivityThread.java:122)
10-12 02:35:41.450: E/AndroidRuntime(524):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
10-12 02:35:41.450: E/AndroidRuntime(524):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-12 02:35:41.450: E/AndroidRuntime(524):  at android.os.Looper.loop(Looper.java:137)
10-12 02:35:41.450: E/AndroidRuntime(524):  at android.app.ActivityThread.main(ActivityThread.java:4340)
10-12 02:35:41.450: E/AndroidRuntime(524):  at java.lang.reflect.Method.invokeNative(Native Method)
10-12 02:35:41.450: E/AndroidRuntime(524):  at java.lang.reflect.Method.invoke(Method.java:511)
10-12 02:35:41.450: E/AndroidRuntime(524):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-12 02:35:41.450: E/AndroidRuntime(524):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-12 02:35:41.450: E/AndroidRuntime(524):  at dalvik.system.NativeStart.main(Native Method)
10-12 02:35:41.450: E/AndroidRuntime(524): Caused by: java.lang.NullPointerException
10-12 02:35:41.450: E/AndroidRuntime(524):  at com.company.appname.SearchableDictionary.showResults(SearchableDictionary.java:112)
10-12 02:35:41.450: E/AndroidRuntime(524):  at com.company.appname.SearchableDictionary.handleIntent(SearchableDictionary.java:78)
10-12 02:35:41.450: E/AndroidRuntime(524):  at com.company.appname.SearchableDictionary.onCreate(SearchableDictionary.java:56)
10-12 02:35:41.450: E/AndroidRuntime(524):  at android.app.Activity.performCreate(Activity.java:4465)
10-12 02:35:41.450: E/AndroidRuntime(524):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
10-12 02:35:41.450: E/AndroidRuntime(524):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
10-12 02:35:41.450: E/AndroidRuntime(524):  ... 11 more 
```

此外，这里是完整的 SearchableDictionary.java：

```
public class SearchableDictionary extends Activity {

private TextView mTextView;
private ListView mListView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.search);

    mTextView = (TextView) findViewById(R.id.text);
    mListView = (ListView) findViewById(R.id.list);

    handleIntent(getIntent());
}

@Override
protected void onNewIntent(Intent intent) {
    // Because this activity has set launchMode="singleTop", the system calls this method
    // to deliver the intent if this actvity is currently the foreground activity when
    // invoked again (when the user executes a search from this activity, we don't create
    // a new instance of this activity, so the system delivers the search intent here)
    handleIntent(intent);
}

private void handleIntent(Intent intent) {
    if (Intent.ACTION_VIEW.equals(intent.getAction())) {
        // handles a click on a search suggestion; launches activity to show word
        Intent wordIntent = new Intent(this, WordActivity.class);
        wordIntent.setData(intent.getData());
        startActivity(wordIntent);
        finish();
    } else if (Intent.ACTION_SEARCH.equals(intent.getAction())) {
        // handles a search query
        String query = intent.getStringExtra(SearchManager.QUERY);
        showResults(query);
    }
}

/**
 * Searches the dictionary and displays results for the given query.
 * @param query The search query
 */
private void showResults(String query) {

    Cursor cursor = managedQuery(DictionaryProvider.CONTENT_URI, null, null,
                            new String[] {query}, null);

    if (cursor == null) {
        // There are no results
        mTextView.setText(getString(R.string.no_results, new Object[] {query}));
    } else {
        // Display the number of results
        int count = cursor.getCount();
        String countString = getResources().getQuantityString(R.plurals.search_results,
                                count, new Object[] {count, query});
        mTextView.setText(countString);

        // Specify the columns we want to display in the result
        String[] from = new String[] { DictionaryDatabase.KEY_WORD,
                                       DictionaryDatabase.KEY_DEFINITION };

        // Specify the corresponding layout elements where we want the columns to go
        int[] to = new int[] { R.id.word,
                               R.id.definition };

        // Create a simple cursor adapter for the definitions and apply them to the ListView
        SimpleCursorAdapter words = new SimpleCursorAdapter(this,
                                      R.layout.result, cursor, from, to);
        mListView.setAdapter(words);

        // Define the on-click listener for the list items
        mListView.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                // Build the Intent used to open WordActivity with a specific word Uri
                Intent wordIntent = new Intent(getApplicationContext(), WordActivity.class);
                Uri data = Uri.withAppendedPath(DictionaryProvider.CONTENT_URI,
                                                String.valueOf(id));
                wordIntent.setData(data);
                startActivity(wordIntent);
            }
        });
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.options_menu, menu);

    SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
    SearchView searchView = (SearchView) menu.findItem(R.id.search).getActionView();
    searchView.setSearchableInfo(searchManager.getSearchableInfo(getComponentName()));
    searchView.setIconifiedByDefault(false);

    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    int itemId = item.getItemId();
    if (itemId == R.id.search) {
        onSearchRequested();
    } else if (itemId == R.id.atcMainSearch) {
        Intent atcGoHome = new Intent(SearchableDictionary.this,
                mymainactivity.class);
        startActivity(atcGoHome);
    } else if (itemId == R.id.atcHelpSearch) {
        Intent atcAboutWeb = new Intent(SearchableDictionary.this,
                atcAboutWeb.class);
        startActivity(atcAboutWeb);
    } 
    return true;
}

} 
```

感谢任何帮助的人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T22:57:20.603

一个简单且被忽视的错误导致了这个问题。在尝试合并此功能时，我没有使用所有布局，而是尝试引用不存在的布局。将布局添加到我的项目后，应用程序按预期运行。

# css - Wordpress 样式表未更新

> ID：12851494
> 
> 赞同：1
> 
> 时间：2012-10-12T02:44:51.473
> 
> 标签：css, wordpress

[我在http://bit.ly/SV663B](http://bit.ly/SV663B)有一个客户端网页，我已经接近完成我被告知要进行的样式更改。但是，由于某种原因，无论我通过 FTP 上传 css 多少次，我对样式表所做的更改都没有更新。

有问题的样式表是[http://www.antalvig.com/m7/wp-content/themes/felis/css/shortcodes.css](http://www.antalvig.com/m7/wp-content/themes/felis/css/shortcodes.css)。当我打开 Firebug 并检查样式表时，似乎后面有一个 ?ver=3.4.2 ，我检查了无数次，但没有检测到我添加的代码。一开始我以为是缓存，但是我查到现在已经7个小时了，我的代码还是没有更新。现在最奇怪的是，当我更改[http://www.antalvig.com/m7/wp-content/themes/felis/css/style.css](http://www.antalvig.com/m7/wp-content/themes/felis/css/style.css)并上传它时，更改会立即反映。

我猜问题出在 ?ver=3.4.2 上，但这当然不能解释为什么 style.css 会立即更新。我真的不知道如何更新最后的 css 更改。任何人都可以帮忙并给我一些建议吗？任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T04:12:06.530

好了朋友们，

对不起 - 原来我在大括号前有这个逗号，`.class, .someclass, .class2, {color:pink;}`这就是为什么它没有被浏览器拾取。复制粘贴时一定把它放在那里。

经验教训：当你失去注意力时（深夜，当我做上述事情时），永远不要在你的项目上工作，你会在某个地方搞砸，然后花几个小时想知道发生了什么。

不过，谢谢大家的回复——干杯。

# google-app-engine - GAE：是否迁移到ndb

> ID：12851496
> 
> 赞同：1
> 
> 时间：2012-10-12T02:44:59.643
> 
> 标签：google-app-engine, google-cloud-datastore

我知道 ndb 提供了许多改进常规数据库的功能，我希望最终利用这些新功能。

当前的 db 最终会包含 ndb 的功能，这样我就不需要迁移到 ndb 了吗？

或者，是否会弃用当前的数据库，以便我最终不得不迁移到 ndb？

如果是前者，那我可以耐心等待，但如果是后者，我宁愿早点结束迁移。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:49:44.973

我会认为 ndb 是当前 db 的继任者。因此，如果 ndb 的功能适合您的需求，我建议迁移到新方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T10:52:04.973

在迁移之前，请查看[DB vs NDB](https://docs.google.com/document/d/1AefylbadN456_Z7BZOpZEXDq8cR8LYu7QgI7bt5V0Iw/mobilebasic)

因为可能也需要一些编程更改。

# c# - 将数据读取到数组，然后填充到 C# 中的 ComboBox

> ID：12851497
> 
> 赞同：0
> 
> 时间：2012-10-12T02:45:00.593
> 
> 标签：c#, database, arrays, combobox, selecteditem

我在数据库中有用户数据（名称、用户名、图像），我需要在组合框中列出名称和 ID。When an item in the combo box is selected it should display a picture. 我创建了一个 User 和一个 UserDB 类。在我的用户类中，我有以下代码：

```
public class User
  {
    private String u_firstname;
    private String u_lastname;
    private String u_username = string.Empty;
    private Byte [] u_image;
    private Byte [] u_template;

    public User(OleDbDataReader dr)
    {            
        u_firstname = dr["USER_FIRST_NM"].ToString();
        u_lastname = dr["USER_LAST_NM"].ToString();
        u_username = dr["USER_NAME"].ToString();
        u_image = (Byte [])dr["USER_IMAGE"];
        u_template = (Byte [])dr["USER_TEMPLATE"];

    }
} 
```

在我的 UserDB 类中，我有以下代码：

```
public class UserDB
 {
    public static String workingDirectory = System.IO.Directory.GetCurrentDirectory();
    public static String dbProvider = "Microsoft.ACE.OLEDB.12.0";
    public static String dbName = "Users_DB.accdb";        
    public static String dbConnString = String.Format(@"Provider={0};Data Source={1}\Data\{2}", dbProvider, workingDirectory, dbName);

    public User[] usersInDatabaseList()
    {
        User u;
        List<User> clist = new List<User>();

        OleDbConnection cn = new OleDbConnection(dbConnString);

        String strSQL = "SELECT USER_FIRST_NM, USER_LAST_NM, USER_NAME, USER_IMAGE, USER_TEMPLATE FROM KF001_USERS";

        OleDbCommand cm = new OleDbCommand(strSQL, cn);
        OleDbDataReader dr;

        cn.Open();

        dr = cm.ExecuteReader(CommandBehavior.CloseConnection);

        while (dr.Read())
        {                
            u = new User(dr);
            clist.Add(u);
        }

        cn.Close();

        return clist.ToArray();
    }
} 
```

在我的 mainForm 上，我有以下用于组合框的方法：

```
public void FillDropDownList()
    {
        try
        {

            //int i;
            UserDB db = new UserDB();
            User[] userList = db.usersInDatabaseList();

            comboBoxUsersEnrolled.Items.AddRange(userList);
            comboBoxUsersEnrolled.DisplayMember = ?      
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
} 
```

我完全不知道如何让我的数据库值显示在组合框中。我也不确定如何在选择项目时显示图片。任何人都可以帮助或引导我朝着正确的方向前进。

所以我将 filldropdownlist 方法更改为以下内容：

```
 public void FillDropDownList()
    {

            UserDB db = new UserDB();
            User[] userList = db.cList();

            for (int i = 0; i < userList.Length; i++)
            {

                comboBoxUsersEnrolled.Items.Add(userList[i]);
                comboBoxUsersEnrolled.DisplayMember = "ComboName";

                if (comboBoxUsersEnrolled.SelectedIndex > 0 )
                {

                    byte[] pictureByteReader = (userList[i].UserImage);
                    MemoryStream ms = new MemoryStream(pictureByteReader);
                    Image picture = Image.FromStream(ms);
                    picBoxCapture.Image = picture;
                }

            }

    } 
```

我正在尝试添加到我的组合框，同时如果选择了该项目，则将图片发送到图片框。我的代码什么都不做。没有错误或任何东西。帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T02:51:08.523

你已经完成了大部分工作。

`DisplayMember`您已标记的`?`属性表示应用于在 ComboBox 中显示的属性。你的类没有任何属性——它只有字段——所以首先你要创建一个属性

```
public class User
{
    // all your existing fields

    public string Name
    {
        get
        {
            return this.u_username;
        }
    } 
```

然后您可以设置`DisplayMember = "Name";`使用 Name 作为显示属性。

使用图像需要更多工作 - 您需要在组合框中使用模板而不是字符串。尝试用谷歌搜索找到一个例子。

# google-apps-script - 在 Google Apps 脚本中阻止传入事件

> ID：12851499
> 
> 赞同：1
> 
> 时间：2012-10-12T02:45:13.110
> 
> 标签：google-apps-script

我设置了一个 Google Apps 脚本触发器来检查表单提交。但是，我想检查传入的事件值并确定是否应该将事件实际添加到电子表格中或忽略。

现在我正在做类似下面的事情来删除添加后的最后一行。

```
function onFormSubmit(e) {
    var sheet = SpreadsheetApp.getActiveSheet();
    if (e.values[2] < whatever) {
        sheet.deleteRow(sheet.getLastRow());
} 
```

然而，这种方法有时会失败，我认为是因为并发事件。

有一个更好的方法吗 ？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T05:23:23.737

您需要多快移除行？使用时间驱动的触发器定期清理工作表是否可行？

或者，使用表单提交触发器，您可以使用 e.range 清除（而不是删除）行，然后使用时间驱动的触发器清除空白行。

或者，使用表单提交触发器，您可以选择不接触原始数据提交，而是使用另一个工作表（或电子表格）来记录接受的 e.values [`appendRow()`](https://developers.google.com/apps-script/class_sheet#appendRow)，它以原子方式附加，绕过并发问题。

或者，您可以通过在另一个工作表中使用 FILTER 或 QUERY 公式来实现相同的目的，但这可能会对性能产生最大的影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T02:49:58.367

如果由于并发事件而失败，请查看[Lock 服务](https://developers.google.com/apps-script/service_lock)。

# jquery - 视差效果：滚动时使前景移动

> ID：12851501
> 
> 赞同：0
> 
> 时间：2012-10-12T02:45:21.267
> 
> 标签：jquery, css, parallax

我有一些图像，我想将它们垂直放置在页面上，作为一个信息图形。但是，我想将背景与前景元素分开，并产生一些视差效果，当您向下滚动时，前景（背景）元素会移动......

不知道如何最好地使用 jQuery 甚至 CSS3 来实现这一点......任何链接或示例将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T03:01:29.623

您可以使用[**jquery.parallax**](https://stephen.band/jparallax/)。

> jParallax 将节点转换为响应鼠标移动的绝对定位层。根据它们的尺寸，这些层以不同的速率移动，以一种视差的方式。

**截图**如下：

[![jQ视差](../Images/c4c69728cd4dc7ed98c5de03e1bb31d7.png)](https://i.stack.imgur.com/nAJQj.png)
[（来源：[stephband.info](http://stephband.info/jparallax/images/diagram.png)）]

**代码**也很小。

```
<ul>
    <li class="parallax-layer"></li>
    <li class="parallax-layer"></li>
</ul> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T07:17:00.137

除了上面的答案，还有更简单和更好的插件：

1.  [（几乎）静态背景](https://ianlunn.co.uk/plugins/jquery-parallax/)

    ![](../Images/c7bd1cc697c9b15a358f41aa43539d5a.png)

2.  [Curtain.js](https://web.archive.org/web/20170616193223/http://curtain.victorcoulon.fr:80/)

    [http://www.jquerythisplugin.com/wp-content/uploads/2012/03/curtain.jpg](http://www.jquerythisplugin.com/wp-content/uploads/2012/03/curtain.jpg)

3.  [恒星JS](https://markdalgleish.com/projects/stellar.js/demos/)

    [![](../Images/f857031d99045b387de0a3f4a618f48a.png)](https://i.stack.imgur.com/K8ob7.jpg)
    [（来源：[jquer.in](http://jquer.in/wp-content/uploads/2012/07/stellar-js.jpg)）]

4.  [滚动甲板](https://johnpolacek.github.io/scrolldeck.js/)

    ![](../Images/b3a84aef5e80f4d6bb27e20d25e8e6b8.png)

5.  [连环画](https://johnpolacek.github.io/scrollorama/)

    [![](../Images/3d8fd877ab811988d4f8f80bd75dddd4.png)](https://i.stack.imgur.com/qdyEx.png)
    [（来源：[romanliutikov.com](http://blog.romanliutikov.com/wp-content/uploads/2012/01/scrollorama.png)）]

6.  [视差滑块](https://tympanus.net/Tutorials/ParallaxSlider/)

    ![](../Images/ea9125836bf92022647b8547f456c9d7.png)

# radgridview - 如何根据奇数和偶数以编程方式为 radgrid 视图列着色

> ID：12851503
> 
> 赞同：0
> 
> 时间：2012-10-12T02:45:24.887
> 
> 标签：radgridview

我如何以编程方式将颜色分配给 Rad Grid 视图 sucn 奇数列获得一种颜色，偶数列获得另一种颜色，任何想法都可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:49:47.540

请尝试以下代码片段。

```
protected void RadGrid1_ItemDataBound(object sender, GridItemEventArgs e)
{
    if (e.Item is GridDataItem)
    {
        GridDataItem item = e.Item as GridDataItem;
        if (item.ItemIndex % 2 == 0)
        {
            item.BackColor = System.Drawing.Color.Red;
        }
    }
} 
```

# angularjs - angularjs Select with filter 过滤掉已经选中的选项

> ID：12851504
> 
> 赞同：2
> 
> 时间：2012-10-12T02:45:38.037
> 
> 标签：angularjs

我使用 ng-model 进行选择的代码工作正常，但过滤器除外。如果没有过滤器，它会显示已选择的选项的重复选项。所以我试图过滤掉下面代码中已经选择的选项。

但它不起作用..我做错了什么吗？请问有什么帮助吗？

```
<select ng-model="result.color">
<option ng-repeat="codes in obj.codes | filter:!result.color" value="{{codes.code}}">{{codes.code}}</option>
<option ng-selected>{{result.color}}</option>
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T02:59:55.960

`ng-selected`接受一个表达式。这就是我要做的：

```
 <option ng-repeat="codes in obj.codes" value="{{codes.code}}" ng-selected="result.color == codes.code"> 
```

* * *

== 编辑 ==

另一个更短的解决方案是使用`ng-options`.

```
<select ng-model="result.color" ng-options="c.code for c in obj.codes"></select> 
```

这是小提琴： http: [//plnkr.co/edit/oIysU5](http://plnkr.co/edit/oIysU5)

不确定初始值，因为我的小提琴似乎有效。

# c++ - 如何在 C++ 中使用或模拟后向断言？

> ID：12851509
> 
> 赞同：3
> 
> 时间：2012-10-12T02:46:33.637
> 
> 标签：c++, regex, visual-studio-2010, lookbehind

我正在寻找执行搜索，其中字符串（bar）没有立即被两个字符串（foo）或（boo）中的任何一个

例如

`foo=bar`不应该匹配

`foo=baz bar`应该匹配

`bar`应该匹配

`boo=bar`不应该匹配

我认为正则表达式背后的外观非常适合这一点。但是，当我尝试使用`(?<!`MSVC++ 进行查看时，我得到了一个未处理的异常

中是否支持断言？它在语法上有所不同吗？或者有人可以帮我写这个正则表达式或模仿行为吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T03:08:21.577

考虑使用 Boost.Regex 或 Boost.Xpressive。MSVC++ 10 的正则表达式实现不完整，而 Boost（对于 Regex 和 Xpressive）是完整的。两者都有其优点和缺点。

Xpressive 由于编译时正则表达式编译而速度更快，并且提供了更好的正则表达式语法检查，但它往往会创建*大量*符号，因此您正在查看至少几兆字节的增加调试信息。

正则表达式速度很快，并且不需要表达性地使用运算符来构建正则表达式。但是，它确实需要在库中进行链接。

存在其他可以执行 perl 正则表达式的 C++ 正则表达式引擎，但是使用 Boost 非常轻松，而且我没有遇到任何问题，无论我扔什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T03:14:44.260

没有多少正则表达式支持无限后瞻，但它们都支持无限前瞻。

您可以反转字符串，使用前瞻并再次反转。然而，这对于大字符串来说是昂贵的。

您也许可以使用有界的lookbehind。如果某些正则表达式知道其确切长度或最大长度，则它们支持向后查找。

您可能会在没有后视的情况下找到整个字符串，然后手动丢弃一些匹配项。如果重叠不是问题，您可以将后视更改为可选的捕获组，然后丢弃捕获组匹配的匹配项。当替换一个肯定的lookbehind 时，可选的捕获组不需要是可选的，也不需要捕获（也不是组）。

# css - 在调整大小时部分隐藏侧翼 div

> ID：12851515
> 
> 赞同：0
> 
> 时间：2012-10-12T02:47:40.593
> 
> 标签：css, html, screen-resolution

经过近一个小时的搜索和另一个小时的实验，我似乎无法找到如何在 CSS/HTML 中执行此操作。

给定下图，其中蓝色框是以固定像素宽度保存页面主要内容的 div，红色框是以固定像素宽度保存装饰的 div，黑线显示浏览器大小：

![带有 div 框的浏览器大小示例](../Images/dcac7c51ae6f211c5cacddcd224e1f62.png)

*   A -**没有**水平滚动条，因为没有隐藏任何内容。一切都以中心为中心。
*   B -**没有**水平滚动条，因为只有侧 div 被隐藏。主 div 居中。
*   C -**将**具有水平滚动条，因为现在主 div 无法适应页面。主 div 是中心，应该无法滚动查看侧面 div。

我想为页面添加额外的装饰，而不会对屏幕分辨率较小的用户或只是在调整窗口大小时造成伤害。主 div 将保存主要内容，因此用户应该能够滚动查看所有内容。另一方面，侧 div 仅用于装饰，因此浏览器不应基于它们滚动。我宁愿不将侧面 div 设置为背景图像，因为我希望在此之外增加自由度。

*看起来*这应该是可能的。是吗？我一直在玩溢出，但我什么也做不了。

（要清楚，这是关于水平居中/滚动，而不是垂直）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T02:57:32.390

你应该使用 CSS:`overflow: hidden;`来实现这个效果。有两个 div，一个更长，另一个具有流体宽度。

```
.parent {width: 90%; overflow: hidden;}
.parent .child {width: 1200px; margin: auto;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T06:06:21.423

使用百分比值来实现这一点

HTML

```
<div class="outer">
    <div class="d1"></div>
    <div class="d2"></div>
    <div class="d3"></div>
</div>​ 
```

CSS

```
.outer{wisth:100%;border:solid 1px black; padding:25px}
.d1{background:red; width:32%; height:60px; display:inline-block}
.d2{background:green; width:32%; height:60px; display:inline-block}
.d3{background:blue; width:32%; height:60px; display:inline-block} 
```

​<strong>[现场演示](http://jsfiddle.net/P8WLL/1/)

# c++ - 带有 std::vector<>.push_back(...) 的 Getter/Setter

> ID：12851516
> 
> 赞同：3
> 
> 时间：2012-10-12T02:47:47.130
> 
> 标签：c++, vector, std

由于某种原因，这不起作用。它编译文件，但在使用 getter 时不会将任何项目添加到此向量中。

例如

```
class class_name {

    public:
        inline std::vector<int> get_numbers() { return m_numbers; }    

    private:
        std::vector<int> m_numbers;
}

....

{
    class_name number_list;
    number_list.get_numbers().push_back(1);
} 
```

如果我直接这样做 (m_numbers.push_back(1)) 它可以工作，但如果我用吸气剂将它拉出来它不会添加任何东西。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-12T02:48:59.833

如果您打算修改它，请通过引用返回向量：

```
inline std::vector<int> &get_numbers() { return m_numbers; }  
                        ^ 
```

如果没有 & 号，则返回一个*副本。*

# android - 我可以用安卓设备读取 HID iClass 卡吗？

> ID：12851517
> 
> 赞同：9
> 
> 时间：2012-10-12T02:47:49.770
> 
> 标签：android, nfc

[是否可以使用高级 NFC API 指南](http://developer.android.com/guide/topics/connectivity/nfc/advanced-nfc.html)中描述的方法读取 HID iClass 卡？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T09:23:00.683

如果卡支持 NFC-V (ISO-15693) 技术，您应该能够与卡通信。

**更新：** iClass 卡使用与 ISO-15693 不同的协议。所以，我相信 android 设备不支持 iClass，在这篇文章中。

# python - PIL 的 GIF 动画处理是坏的还是我做错了？

> ID：12851523
> 
> 赞同：2
> 
> 时间：2012-10-12T02:49:00.853
> 
> 标签：python, python-imaging-library, animated-gif

> **可能重复：**
> [Python：将 GIF 帧转换为 PNG](https://stackoverflow.com/questions/4904940/python-converting-gif-frames-to-png)

我尝试使用 PIL 加载 GIF 动画的帧，但得到了有趣的结果。第一帧加载正常，但其余所有帧都包含错误数据。在我的原始图像上，它们看起来“变灰”，而在我在这里使用的测试图像中，它们看起来只是黑色。我猜这是由调色板索引直接用作每个组件的颜色值引起的。

我似乎得到了第一帧的正确数据，而其他帧的数据不正确。IE。如果我在不看第一帧的情况下寻找第二帧，我会得到该帧的正确数据。通过使用它，我可以通过在每一帧之间重新打开图像并在新打开的图像中寻找下一帧来解决这个问题。

这似乎只发生在我使用`im.convert()`, 即。当远离 GIF 的索引颜色模型时。即使在使用时也会触发它`im.copy()`，因此即使我只是在第一帧上使用它，第二帧在使用`im.convert()`.

这是 PIL 中的一个错误，还是我只是在做一些可怕的、可怕的错误？我的解决方法是一个非常丑陋的黑客，有没有更好的方法来解决这个问题？

这是一个说明问题的片段：（它将测试图像写入`rgb.gif`当前工作目录）

```
import binascii
import Image    

# Create the test image file
path = 'rgb.gif'
with file(path, 'wb') as f:
        f.write(binascii.a2b_base64('R0lGODlhCAAIAKEDAAAA//8AAAD/AP///yH'
            '/C05FVFNDQVBFMi4wAwEAAAAh+QQJZAADACwAAAAACAAIAAACC5yPiRHJvJ'
            '5rqqYCACH5BAlkAAMALAAAAAAIAAgAAAILnI+JIsm8nmuqpgIAIfkECWQAA'
            'wAsAAAAAAgACAAAAgucj4kAybyea6qmAgA7'
        ))

# Look at frame 0, then load frame 1
im = Image.open(path)
test1_frame0 = im.copy()
im.seek(1)
# im.convert() returns a new image but I'm using im.copy() to
# make it clear this shouldn't affect the original image
test1_frame1 = im.copy().convert('RGBA').tostring()

# Load frame 1 without looking at frame 0 first
im = Image.open(path)
im.seek(1)
test2_frame1 = im.copy().convert('RGBA').tostring()

# Result is not equal, ie. just doing im.copy() on the first frame
# alters the second frame    
print test1_frame1 == test2_frame1 
```

我正在使用 PIL 1.1.7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T02:57:29.847

就在我发布这个之后，我在侧边栏上注意到了[这个](https://stackoverflow.com/questions/4904940/python-converting-gif-frames-to-png)，所以显然这是一个错误。

# linux - Linux 程序集未打印到标准输出 - 屏幕

> ID：12851524
> 
> 赞同：2
> 
> 时间：2012-10-12T02:49:26.650
> 
> 标签：linux, assembly, x86, system-calls

对于我的生活，我无法弄清楚为什么这不会打印到屏幕上。不会崩溃或段错误，只是退出。是的，我是新人，事实上正在寻找一位导师，如果有人能提供帮助，将不胜感激。

```
; Hello World in nasm
;

; Intel Linux bt 2.6.39.4 #1 SMP x86_64 GNU/Linux
; NASM version 2.07
; ld 2.20.1-system.20100303
;
; Compile to 32bit with debugging symbols:
; nasm -g -f elf32 -F dwarf string-w.asm
; ld -g -melf_i386 -o string-w string-w.o
; file string-w.asm

[section .data]
    msg db      "Hello World",0xa,0x0
    len equ     $ - msg

[section .bss]

[section .text]

   global _start

_start:

    push dword len
    push dword msg
    push dword 1    ; Stdout
    mov eax,0x4     ; write
    int 0x80
    ret
    add esp,12      

    push    dword 0
    mov     eax, 0x1     ; exit
    int     0x80 
```

再次，非常感谢任何帮助，如果有人正在寻找学生，我已经准备好做志愿者了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T03:08:50.910

你仍然可以使用 int 0x80，你的问题是你用错了。您不将参数压入堆栈，而是在寄存器中传递参数。这些链接将显示哪些调用使用哪些寄存器： [Linux 系统调用表](http://www.informatik.htw-dresden.de/%7Ebeck/ASM/syscall_list.html) [Linux 系统调用参考](http://syscalls.kernelgrok.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T03:36:06.270

你所得到的看起来几乎像 BSD 代码 - BSD 将参数推送到堆栈上并使用 int 80h。Linux系统调用采用寄存器中的参数，ebx，ecx，edx（这就是你所需要的），esi，edi......甚至可能是ebp。您不需要`ret`或清理堆栈。

```
mov edx, len
mov ecx, msg
mov ebx, 1 ; file descriptor for stdout
mov eax, 4 ; sys_write call number (for 32-bit)
int 80h

mov ebx, 0 ; exit code
mov eax, 1 ; sys_exit call number
int 80h 
```

从 C 库调用`write()`（有些人声称更可取）......

```
; nasm -f elf32 myprog.asm
; ld -o myprog myprog.o -I/lib/ld-linux.so.2 -lc -melf_i386
global _start
extern write

section .data
     msg db "Hello World", 10
     len equ $ - msg

section .text
_start:
    push len
    push msg
    push 1
    call write
    add esp, 4 * 3

    mov ebx, 0
    mov eax, 1
    int 80h 
```

您必须以不同的方式链接它。你有正确的想法......事实上你有两个正确的想法，你只是把它们搞混了！:)

不要尝试`ret`从`_start`标签中提取 - 它不是被调用的，而是被跳转到的！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T03:04:40.410

好吧，基本上 int 0x80 已被弃用，请改用 SYSENTER。

[相关线程](https://stackoverflow.com/questions/9506353/how-to-invoke-a-system-call-via-sysenter-in-inline-assembly-x86-amd64-linux)，其中包含您正在尝试执行的操作的示例……尽管使用稍微不同的汇编语法编写。

这是很久以前的[http://articles.manugarg.com/systemcallinlinux2_6.html](http://articles.manugarg.com/systemcallinlinux2_6.html)

谷歌搜索 sysenter ...或 sysenter vs int 0x80。

# c# - 无法将类型“int”隐式转换为“bool”

> ID：12851526
> 
> 赞同：7
> 
> 时间：2012-10-12T02:49:35.137
> 
> 标签：c#

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-12T02:52:07.070

纠正这个：

```
if (userInput = mag.randomMagnifier()) 
```

到：

```
if (userInput == mag.randomMagnifier()) 
```

在这里，您在`if`语句中分配值，这是错误的。你必须检查条件，检查你必须使用的条件`"=="`。
`if`语句返回布尔值，并且因为您在此处分配值，所以它给出了错误。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-12T02:52:07.163

线

```
if (userInput = mag.randomMagnifier()) 
```

应该

```
if (userInput == mag.randomMagnifier()) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-12T02:54:22.067

你应该使用 == 而不是 = change: `Lif(userinput = mag.randommagnifier())` for

```
if(userinput == mag.randommagnifier()) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-12T02:54:31.233

if 语句总是包含一个计算结果为布尔值的表达式。你的线路

```
if (userInput = mag.randomMagnifier()) 
```

不是`bool`导致错误的原因。你可能是说

```
if (userInput == mag.randomMagnifier()) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-12T02:56:09.223

条件

```
userInput = mag.randomMagnifier() 
```

需要是

```
userInput == mag.randomMagnifier() 
```

您所拥有的是尝试分配 userInput 值，然后尝试将 int 转换为 bool。使用 C# 这是不可能的。

# python - 编写另一个脚本的 Python 脚本

> ID：12851527
> 
> 赞同：0
> 
> 时间：2012-10-12T02:49:37.290
> 
> 标签：python, math, installation, createfile

我已经环顾了一段时间，但仍然无法找到执行此操作的方法的答案。我已经制作了一些脚本来求解方程，现在正在寻找一种方法来编写脚本，该脚本将允许将步骤输入方程、变量的数量和名称等。我的想法是制作一个脚本来处理所有这些输入，然后编写另一个脚本，该脚本将询问方程中的数字并求解方程。关于如何编写第一个脚本以便创建第二个脚本的任何想法？

另外我忘了提到我希望保存较新的脚本以供以后使用/执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T02:57:32.687

与其编写创建另一个脚本的脚本，解决问题的更好方法是编写函数。

例如，第一个函数将读取变量的名称等，并将这些数据作为字典返回。

接下来，您将此字典传递给第二个函数，该函数将根据字典中存储的信息读取剩余的输入并返回另一个带有输入的字典。

然后，您可以使用返回的字典中的数据来求解方程。

# android - Android Google APIs 代码错误

> ID：12851531
> 
> 赞同：1
> 
> 时间：2012-10-12T02:50:17.593
> 
> 标签：android, google-maps, google-maps-api-3

我正在尝试实现一个提供用户位置的应用程序。我尝试了很多例子并且没有运气。最后我发现这个代码发布在stackoverflow（[谷歌地图上的当前位置](https://stackoverflow.com/questions/4141388/current-position-on-google-maps)）。但是我遇到了错误，我完全不知道。请有人可以帮助我。

这是代码..

```
public class MainActivity extends Activity {

public static final String TAG = "GoogleMapsActivity";
private MapView mapView;
private LocationManager locationManager;
Geocoder geocoder;
Location location;
LocationListener locationListener;
CountDownTimer locationtimer;
MapController mapController;
MapOverlay mapOverlay = new MapOverlay();

@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.activity_main);
    //setContentView(R.layout.googlemap);
   // initComponents();
    mapView=(MapView)findViewById(R.id.myGMap);
    mapView.setBuiltInZoomControls(true);
    mapView.setSatellite(true);
    mapController = mapView.getController();
    mapController.setZoom(16);
    locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
    if (locationManager == null) {
        Toast.makeText(MainActivity.this,
                "Location Manager Not Available", Toast.LENGTH_SHORT)
                .show();
        return;
    }
    location = locationManager
            .getLastKnownLocation(LocationManager.GPS_PROVIDER);
    if (location == null)
        location = locationManager
                .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
    if (location != null) {
        double lat = location.getLatitude();
        double lng = location.getLongitude();
        Toast.makeText(MainActivity.this,
                "Location Are" + lat + ":" + lng, Toast.LENGTH_SHORT)
                .show();
        GeoPoint point = new GeoPoint((int) (lat * 1E6), (int) (lng * 1E6));
        mapController.animateTo(point, new Message());
        mapOverlay.setPointToDraw(point);
        List<Overlay> listOfOverlays = mapView.getOverlays();
        listOfOverlays.clear();
        listOfOverlays.add(mapOverlay);
    }
    locationListener = new LocationListener() {
        public void onStatusChanged(String arg0, int arg1, Bundle arg2) {
        }

        public void onProviderEnabled(String arg0) {
        }

        public void onProviderDisabled(String arg0) {
        }

        public void onLocationChanged(Location l) {
            location = l;
            locationManager.removeUpdates(this);
            if (l.getLatitude() == 0 || l.getLongitude() == 0) {
            } else {
                double lat = l.getLatitude();
                double lng = l.getLongitude();
                Toast.makeText(MainActivity.this,
                        "Location Are" + lat + ":" + lng,
                        Toast.LENGTH_SHORT).show();
            }
        }
    };
    if (locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER))
        locationManager.requestLocationUpdates(
                LocationManager.GPS_PROVIDER, 1000, 10f, locationListener);
    locationManager.requestLocationUpdates(
            LocationManager.NETWORK_PROVIDER, 1000, 10f, locationListener);
    locationtimer = new CountDownTimer(30000, 5000) {
        @Override
        public void onTick(long millisUntilFinished) {
            if (location != null)
                locationtimer.cancel();
        }

        @Override
        public void onFinish() {
            if (location == null) {
            }
        }
    };
    locationtimer.start();
}

public MapView getMapView() {
    return this.mapView;
}

/* private void initComponents() {

    }*/

protected boolean isRouteDisplayed() {
    return false;
}

class MapOverlay extends Overlay {
    private GeoPoint pointToDraw;

    public void setPointToDraw(GeoPoint point) {
        pointToDraw = point;
    }

    public GeoPoint getPointToDraw() {
        return pointToDraw;
    }

    @Override
    public boolean draw(Canvas canvas, MapView mapView, boolean shadow,
            long when) {
        super.draw(canvas, mapView, shadow);

        Point screenPts = new Point();
        mapView.getProjection().toPixels(pointToDraw, screenPts);

        Bitmap bmp = BitmapFactory.decodeResource(getResources(),
                R.drawable.ic_action_search);
        canvas.drawBitmap(bmp, screenPts.x, screenPts.y - 24, null);
        return true;
    }
}

} 
```

这是我的 logcat 消息'''

```
10-12 08:08:15.931: E/AndroidRuntime(306): java.lang.RuntimeException: Unable to start activity   ComponentInfo{com.example.positioning4/com.example.positioning4.MainActivity}:  android.view.InflateException: Binary XML file line #6: Error inflating class com.google.android.maps.MapView

10-12 08:08:15.931: E/AndroidRuntime(306): Caused by: android.view.InflateException: Binary XML file line #6: Error inflating class com.google.android.maps.MapView 
```

这是我的 XML

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<com.google.android.maps.MapView
    android:id="@+id/myGMap"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:enabled="true"
    android:clickable="true"
    android:apiKey="0sLxxvkp8prR4adOMGAG9vsrukJSDiB93vRGN1g"
    /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T03:06:44.777

尝试从 MapActivity 扩展您的 MainActivity。

```
 public class MainActivity extends MapActivity {
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T02:57:47.867

添加 `<uses-library android:name="com.google.android.maps" />`

到你`AndroidManifest.xml` 的`application`标签下

**更新**

只是扩展`MapActivity`而不是`Activity`

# php - PHP 文件上传不接受 zip 文件

> ID：12851534
> 
> 赞同：0
> 
> 时间：2012-10-12T02:50:38.090
> 
> 标签：php, file, upload

我正在使用 PHP 处理将 .jpg、.gif、.jpeg、.png、.zip 和 .rar 文件上传到`upload/`目录的过程。只允许授权用户（具有给定密码）上传文件。我已经为文件夹`upload/`所有权`www-data:www-data`提供了适当的访问权限，所以这不是问题。

上传效果很好，只要我直接在服务器上通过网站上传，该服务器托管整个网站并且其 IP 与某个域相关联。如果我转到另一台计算机并尝试通过网站将 zip 文件上传到服务器，我会收到一条`Invalid file`消息，但没有任何内容被上传或存储在数据库中。这是我的代码：

```
$allowedExts = array("jpg", "jpeg", "gif", "png");
$extension = end(explode(".", $_FILES["fajl"]["name"]));
$allowedExts1 = array("zip", "rar");
$extension1 = end(explode(".", $_FILES["fajl"]["name"]));
if ((($_FILES["fajl"]["type"] == "image/gif")
    || ($_FILES["fajl"]["type"] == "image/jpeg")
|| ($_FILES["fajl"]["type"] == "image/png")
|| ($_FILES["fajl"]["type"] == "image/pjpeg"))
    && ($_FILES["fajl"]["size"] < 4000000)
    && in_array($extension, $allowedExts))
{
    if ($_FILES["fajl"]["error"] > 0)
    {
        echo "Return Code: " . $_FILES["fajl"]["error"] . "<br />";
    }
    else
    {
        echo "Upload: " . $_FILES["fajl"]["name"] . "<br />";
        echo "Type: " . $_FILES["fajl"]["type"] . "<br />";
        echo "Size: " . ($_FILES["fajl"]["size"] / 1024) . " KB<br />";
        echo "Temp file: " . $_FILES["fajl"]["tmp_name"] . "<br />";

        if (file_exists($_SERVER['DOCUMENT_ROOT'] . '/upload/slike/' . $nav . '/' . $_FILES["fajl"]["name"]))
        {
            echo $_FILES["fajl"]["name"] . " already exists. ";
        }
        else
        {
            move_uploaded_file($_FILES["fajl"]["tmp_name"], $_SERVER['DOCUMENT_ROOT'] . '/upload/slike/' . $nav . '/' . $_FILES["fajl"]["name"]);
            echo "Stored in: " . $_SERVER['DOCUMENT_ROOT'] . '/upload/slike/' . $nav . '/' . $_FILES["fajl"]["name"];
            $pomlokacijasl='/upload/slike/' . $nav . '/' . $_FILES["fajl"]["name"];
            $query22 = "INSERT INTO `slike` (navig, slik) VALUES ('$nav', '$pomlokacijasl')";
            $query22 = mysql_query($query22) or trigger_error ("Error in query: $query22\. ".mysql_error());
            mysql_free_result($query22);
        }
    }
}
else if ((($_FILES["fajl"]["type"] == "application/x-rar-compressed")
    || ($_FILES["fajl"]["type"] == "application/zip"))
    && ($_FILES["fajl"]["size"] < 25000000)
    && in_array($extension1, $allowedExts1)) 
{
    if ($_FILES["fajl"]["error"] > 0)
    {
        echo "Return Code: " . $_FILES["fajl"]["error"] . "<br />";
    }
    else
    {
        echo "Upload: " . $_FILES["fajl"]["name"] . "<br />";
        echo "Type: " . $_FILES["fajl"]["type"] . "<br />";
        echo "Size: " . ($_FILES["fajl"]["size"] / 1024) . " KB<br />";
        echo "Temp file: " . $_FILES["fajl"]["tmp_name"] . "<br />";

        if (file_exists($_SERVER['DOCUMENT_ROOT'] . '/upload/datoteke/' . $nav . '/' . $_FILES["fajl"]["name"]))
        {
            echo $_FILES["fajl"]["name"] . " already exists. ";
        }
        else
        {
            move_uploaded_file($_FILES["fajl"]["tmp_name"], $_SERVER['DOCUMENT_ROOT'] . '/upload/datoteke/' . $nav . '/' . $_FILES["fajl"]["name"]);
            echo "Stored in: " . $_SERVER['DOCUMENT_ROOT'] . '/upload/datoteke/' . $nav . '/' . $_FILES["fajl"]["name"];
            $pomlokacijadat='/upload/datoteke/' . $nav . '/' . $_FILES["fajl"]["name"];
            $query22 = "INSERT INTO `datoteke` (navig, dat) VALUES ('$nav', '$pomlokacijadat')";
            $query22 = mysql_query($query22) or trigger_error ("Error in query: $query22\. ".mysql_error());
            mysql_free_result($query22);
        }
    }
}
else
{
    echo "Invalid file";
} 
```

我该如何解决这个问题？追加`$_SERVER('DOCUMENT_ROOT')`工作`$_SERVER('SERVER_NAME')`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T04:00:09.300

您的 MIME 类型检查排除了 zip 文件的一些有效类型。它因浏览器而异，但最常见的类型是：

```
application/zip   
application/x-zip
application/octet-stream
application/x-zip-compressed 
```

您应该允许所有这些在您的检查。要匹配其余代码，请将其设置为：

```
$allowedCompressedTypes = array("application/x-rar-compressed", "application/zip", "application/x-zip", "application/octet-stream", "application/x-zip-compressed");

else if (in_array($_FILES["fajl"]["type"], $allowedCompressedTypes)
    && ($_FILES["fajl"]["size"] < 25000000)
    && in_array($extension1, $allowedExts1)) { 
```

# java - 在验证 JTextFields 是否具有大于 0 的数值后，在 java 中启用 JButtons？

> ID：12851535
> 
> 赞同：2
> 
> 时间：2012-10-12T02:50:43.030
> 
> 标签：java, swing, jtextfield, documentlistener, inputverifier

有两个按钮只有在所有字段中都存在有效数据时才启用，即数值和没有负数。你是怎么做到的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T02:53:24.063

我会考虑使用一个 DocumentListener 来监听 JTextFields 持有的文档。这个网站上有这类事情的例子（我知道，因为我写过一两个）。

例如，

```
import java.awt.Component;
import java.util.ArrayList;
import java.util.List;

import javax.swing.*;
import javax.swing.event.*;
import javax.swing.text.JTextComponent;

public class DocumentListenerFun extends JPanel {
   private static final int FIELD_COUNT = 5;
   private JTextField[] fields = new JTextField[FIELD_COUNT];
   private JButton fooBtn = new JButton("Foo");
   private JButton barBtn = new JButton("Bar");
   private MyFieldListener myFieldListener = new MyFieldListener();

   public DocumentListenerFun() {
      fooBtn.setEnabled(false);
      barBtn.setEnabled(false);
      for (int i = 0; i < fields.length; i++) {
         fields[i] = new JTextField(10);
         add(fields[i]);
         myFieldListener.addTextComponent(fields[i]);
      }
      myFieldListener.addComponentsToEnable(fooBtn);
      myFieldListener.addComponentsToEnable(barBtn);
      add(fooBtn);
      add(barBtn);
   }

   private static void createAndShowGui() {
      DocumentListenerFun mainPanel = new DocumentListenerFun();

      JFrame frame = new JFrame("DocumentListenerFun");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
}

class MyFieldListener {
   private List<JTextComponent> textComponents = new ArrayList<JTextComponent>();
   private List<Component> componentsToEnable = new ArrayList<Component>();
   private MyDocListener myDocListener = new MyDocListener(this);

   public void addTextComponent(JTextComponent textComponent) {
      textComponents.add(textComponent);
      textComponent.getDocument().addDocumentListener(myDocListener);
   }

   public void addComponentsToEnable(Component comp) {
      componentsToEnable.add(comp);
   }

   public void docsChanged() {
      boolean textVerified = true;
      for (JTextComponent textComp : textComponents) {
         String text = textComp.getText();
         textVerified &= verifyText(text);
      }

      for (Component comp : componentsToEnable) {
         comp.setEnabled(textVerified);
      }

   }

   private boolean verifyText(String text) {
      try {
         int value = Integer.parseInt(text.trim());
         if (value > 0) {
            return true;
         }
      } catch (NumberFormatException e) {
         return false;
      }
      return false;
   }
}

class MyDocListener implements DocumentListener {

   private MyFieldListener myFieldListener;

   public MyDocListener(MyFieldListener myFieldListener) {
      this.myFieldListener = myFieldListener;
   }

   @Override
   public void changedUpdate(DocumentEvent e) {
      myFieldListener.docsChanged();
   }

   @Override
   public void insertUpdate(DocumentEvent e) {
      myFieldListener.docsChanged();
   }

   @Override
   public void removeUpdate(DocumentEvent e) {
      myFieldListener.docsChanged();
   }

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-12T02:57:35.340

或者，考虑 的`shouldYieldFocus()`方法，在[此处](http://docs.oracle.com/javase/tutorial/uiswing/misc/focus.html#inputVerification)`InputVerifier`说明并在[此处](https://stackoverflow.com/a/2241997/230513)讨论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T02:56:40.910

在您的 JTextFields 中使用 Key 侦听器或使用 focuslost。

[http://www.java2s.com/Tutorial/Java/0240__Swing/ListeningtoJTextFieldEventswithanKeyListener.htm](http://docs.oracle.com/javase/tutorial/uiswing/events/focuslistener.html)

[http://docs.oracle.com/javase/tutorial/uiswing/events/focuslistener.html](http://docs.oracle.com/javase/tutorial/uiswing/events/focuslistener.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T02:59:43.447

如果您只是不想允许负值，那么您可以使用 DocumentFilter。

```
/**
 * REF: http://www.coderanch.com/t/345628/GUI/java/DocumentFilter
 */
public class NumericFilter extends DocumentFilter {

    @Override
    public void insertString(DocumentFilter.FilterBypass fb, int offset,
            String text, AttributeSet attr) throws BadLocationException {
        fb.insertString(offset, text.replaceAll("\\D", ""), attr);
    }

    // no need to override remove(): inherited version allows all removals  
    @Override
    public void replace(DocumentFilter.FilterBypass fb, int offset, int length,
            String text, AttributeSet attr) throws BadLocationException {
        fb.replace(offset, length, text.replaceAll("\\D", ""), attr);
    }
} 
```

然后使用

```
((AbstractDocument)(new JTextField).getDocument()).setDocumentFilter(new NumericFilter()); 
```

# c# - 如何处理 ASP.NET MVC 3 应用程序中的横切关注点？

> ID：12851549
> 
> 赞同：4
> 
> 时间：2012-10-12T02:53:03.390
> 
> 标签：c#, .net, asp.net-mvc, aop, cross-cutting-concerns

我有一个 ASP.NET MVC 3 Web 应用程序，其中包含各种组件/层，例如：

1.  网络
2.  服务（缓存、外部 API、云服务等）
3.  核心（领域逻辑、POCO 等）
4.  存储库（实体框架）

现在，当我在我的网站上做某事时（例如提交表单，也就是 POST）——在最坏的情况下，可能需要通知所有层。

现在，我*可以*将所有这些逻辑构建到我的控制器 HTTP POST 操作中，但它在逻辑上变得非常肥胖和沉重。

我曾尝试过使用发布者-订阅者模式 (AOP)，但到目前为止我还没有找到一个非常好的 .NET 实现，而且我也有人告诉我这对于 Web 应用程序来说不是一个好的做法。

任何人都可以在这里给我任何建议，还是我坚持这样的代码：

```
[HttpPost]
public ActionResult Do(Something model)
{
    _repository.Save(model); // this should be the only line IMO
    _service.DoSomething();
    _repository.DoSomethingElse();
    _domain.DoSomethingMore();
} 
```

我不是在这里谈论多线程或任何东西，而只是将责任从控制器上移开，并将其放在关心这些操作的组件上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T03:12:04.227

[**Faye**](http://faye.jcoglan.com/)是一个不错的**PubSub**脚本，它基于 Node.js 构建。它非常好，可以用于您的情况。[](http://faye.jcoglan.com/)

 **> **Faye**是一个基于**Bayeux**协议的发布订阅消息系统。**它为Node.js**和**Ruby**提供消息服务器，以及在服务器和所有主要 Web 浏览器中使用的客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T03:09:27.477

如果你还没有完全放弃 PubSub，你可以看看 RabbitMQ。 [http://www.rabbitmq.com/](http://www.rabbitmq.com/)

我不明白为什么它不是 Web 应用程序的“最佳实践”，无论如何，这些绝对值很少是正确的。**

# java - 将数字存储为最高值，而不是在 Java 中输入的其他数字

> ID：12851568
> 
> 赞同：0
> 
> 时间：2012-10-12T02:55:52.983
> 
> 标签：java, if-statement, for-loop, max

赋值指令是这样的：编写一个名为 evenSum 的方法，提示用户输入许多整数，并打印偶数的总和和偶数的最大值。您可以假设用户至少键入了一个非负偶数。除了最后一部分，我把所有的东西都写对了。

该部分正在确定具有最高值的数字，该数字也是偶数。因此，我将它放在 if 语句的主体中（数字 % 2 == 0）。如何计算最大数量？顺便说一句，我不能使用数组并且我已经尝试过 Math.max 但我不确定如何使用它来确定最大值。

```
public void evenSum()
{
int sumamount = 0;
int evenMax = 0;
int numberOfInputs = 0;
int numbers = 0;
Scanner in = new Scanner(System.in);

System.out.print("how many integers? ");
numberOfInputs = in.nextInt();

for(int i = 0; i < numberOfInputs; i++)
    {
        System.out.print("next integer? ");
        numbers = in.nextInt();

        if(numbers % 2 == 0)
            {
                sumamount += numbers;
                if(numbers > numbers)
                {
                    evenMax = numbers
                }
            }
            else
                numbers = 0;

    }

        System.out.print("even sum = ");
        System.out.println(sumamount);
        System.out.print("even max = ");
        System.out.println(evenMax);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T02:59:17.443

这条线是罪魁祸首：

```
if(numbers > numbers)
{
    evenMax = numbers
} 
```

条件应该是

```
if (evenMax < numbers) {
    evenMax = numbers;
} 
```

此外，最好将 evenMax 初始化为`-1`（奇数）并处理它的情况`-1`并适当地使用第一个输入（即第一个偶数输入）进行初始化。这将处理所有输入都是负偶数的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T02:59:26.163

在你的 for 循环中，更改：

```
if(numbers > numbers) 
```

到：

```
if(numbers > evenMax) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T03:00:41.043

```
 if(numbers > numbers) 
```

应该

```
if (numbers > evenMax) 
```

**还**

从`evenMax = 0`- 开始，如果输入的所有偶数都是负数，会发生什么？您可能需要一个明确的“未设置”标志。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T03:01:11.963

这是问题`if(numbers > numbers)`应该是`if (numbers > evenMax)`

# javascript - Javascript 定时安全保护垃圾邮件

> ID：12851572
> 
> 赞同：0
> 
> 时间：2012-10-12T02:56:56.583
> 
> 标签：javascript, time, timer

我想检测垃圾邮件是否攻击了我的联系表。这个想法是我想测试用户是否在页面加载至少 10 秒后点击提交按钮，然后表单不会发送到服务器，否则它是合格的。我想为此使用 JavaScript。步骤是：

*   当页面加载=>我得到开始时间
*   当用户点击提交按钮 => 我得到结束时间
*   然后我进行计算以获取访问者访问我的页面的持续时间
*   如果小于 10 秒，则不能提交表单，否则可以。

我试过这样编码：

```
<script type="text/javascript">
   function checkIfSpam( start ) {    // start if the starting time when the page loads
      var end = new Date().getTime() / 1000;  
      var total = end - start;
      if ( total < 10 ) {             // test if it's less than 10 seconds
        alert('You are a spam!');
      } else {
        alert('You are eligible!');
      }
   }
</script> 
```

问题是我怎样才能检测到传递给函数的开始时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T02:58:34.637

在该函数上方，以便它在页面加载时运行，添加以下内容：

```
var start = new Date().getTime() / 1000; 
```

然后你根本不需要传递开始时间。那对你有用吗？

# java - 如何使用struts在一页中加载两个数据表？

> ID：12851582
> 
> 赞同：0
> 
> 时间：2012-10-12T02:58:10.130
> 
> 标签：java, spring, hibernate, struts

我正在使用 struts 1.3 + spring 2.5 + hibernate 3。

我有两个表：类别和产品。

我使用标签逻辑从类别加载数据。

```
<logic:iterate id="cat" name="catList">
    <bean:write name="cat" property="catName" />
</logic:iterate> 
```

但是当我再次使用标签逻辑从同一页面中的产品加载数据时

```
<logic:iterate id="pro" name="proList">
    <bean:write name="pro" property="proName" />
</logic:iterate> 
```

它出错，并抛出异常：<<在任何范围内都找不到bean：“proList”>>

我该如何解决？我想在一页中从数据库中加载两个数据表。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T03:51:25.943

你的 Action 类应该有类似这样的代码，我认为你错过了在请求中添加 proList。

试试下面的代码

```
public ActionForward execute(ActionMapping mapping, ActionForm form, HttpServletRequest req, HttpServletResponse res) {           

     List<Category> catList = db.getCategory();           
     List<Product> proList = db.getProduct();           

     request.setAttribute("proList", proList);      
     request.setAttribute("catList ", catList );      
     return mapping.findForward("success");  
} 
```

# azure - 在 Windows Azure 中仅将 mysql 端口打开到前端机器

> ID：12851583
> 
> 赞同：0
> 
> 时间：2012-10-12T02:58:12.310
> 
> 标签：azure, azure-virtual-network

我的 Azure 部署中有两台虚拟机。第一个是我的前端 Web VM 实例，第二个是带有 mysql 数据库的 VM 实例。是否可以定义网络拓扑，以便只有我的前端实例可以连接到我的数据库实例？在实例上添加端点似乎向世界开放了端口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T05:12:20.223

如果将 VM 添加到虚拟网络，则无需在 MySQL 实例上添加端点，只需在防火墙上为该特定实例打开必要的端口即可。它不会暴露任何外部端点。

[我在此处](http://blogs.msdn.com/b/jimoneil/archive/2012/06/16/couchbase-on-azure-creating-a-virtual-network.aspx)和[此处](http://blogs.msdn.com/b/jimoneil/archive/2012/06/16/couchbase-on-azure-creating-virtual-machines.aspx)的几篇博文中介绍了涉及 Couchbase 的类似场景。

**编辑：**

对于处于当前预览阶段的 Linux VM，不支持使用虚拟网络。这样做的选项在门户中被阻止，但[可以通过 PowerShell cmdlet 实现](http://social.msdn.microsoft.com/Forums/en-US/WAVirtualMachinesforLinux/thread/9fac0acd-7d44-4061-8f39-46bbdb54b665/)。目前还不清楚这是否足以实现与 Windows VM 相同的结果。

# linker-errors - 对'print(int)'的未定义引用[链接器错误]

> ID：12851586
> 
> 赞同：2
> 
> 时间：2012-10-12T02:58:39.130
> 
> 标签：linker-errors

作业说：编写一个包含两个源文件的程序。第一个 (Main.c) 包含 main() 函数并给变量 ia 值。第二个源文件 (Print.c) 将 i 乘以 2 并打印它。Print.c 包含可以从 main() 调用的函数 print()。

在我尝试完成这项任务时，我创建了三个文件： main.cpp

```
#include <stdio.h>
#include "print.h"
using namespace std;

// Ex 1-5-3

// Global variable
int i = 2;

int main() {
    print(i);

    return 0;
} 
```

打印.cpp：

```
#include <stdio.h>
#include "print.h"
using namespace std;

// Ex 1-5-3

// Fetch global variable from main.cpp
extern int i;

void print(int i) {
    printf("%d", 2*i);
} 
```

打印.h：

```
#ifndef GLOBAL_H // head guards
#define GLOBAL_H

void print(int i);

#endif 
```

我编译了 print.cpp，当我尝试编译和运行 main.cpp 时，它说： [链接器错误] 未定义对 'print(int)' 的引用

为什么它不接受我在 print.cpp 中对 void print (int i) 的定义并通过标题 print.h 引用它？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T03:11:31.547

不确定你使用的是什么编译器，但我让它在 Linux/gcc 上工作：

```
$ gcc main.cpp print.cpp -o test
$ ./test 
$ 4 
$ 
```

# ruby-on-rails - 具有单个“has_one”模型的多个实例的 Rails 模型

> ID：12851588
> 
> 赞同：7
> 
> 时间：2012-10-12T02:58:55.933
> 
> 标签：ruby-on-rails, activerecord

我正在尝试制作一个包含同一类的两个不同“has_one”属性的rails模型。我觉得有一种更简单的方法可以做到这一点，但我现在想不出。

所以，假设我想在 Rails 中创建一个婚礼模型

```
class Wedding < ActiveRecord::Base
  has_one :groom, :class_name => 'Person'
  has_one :bride, :class_name => 'Person'
end

class Person < ActiveRecord::Base
  attr_accessible :wedding_id

  belongs_to :wedding
end 
```

我的目标是从婚礼对象访问新郎对象。（可以打电话`@wedding.groom.name`或其他什么）目前婚礼模型无法知道哪个“人”是新娘，哪个是新郎。

我应该使用单表继承吗？还是我应该使用外键？

有没有更好的方法来思考整个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-12T03:09:43.410

Your associations are backwards for the functionality that you want..

```
class Wedding < ActiveRecord::Base
  belongs_to :groom, :class_name => 'Person'
  belongs_to :bride, :class_name => 'Person'
end

class Person < ActiveRecord::Base
  has_many :weddings  # who has just one wedding now days???
end

Wedding.find(params[:id]).groom.name

Person.find(params[:id]).weddings.last  # hopefully first also  :) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T03:07:17.397

更改`Person`为`Participant`，并为其赋予一个`role`属性。然后你可以做

```
class Wedding < ActiveRecord::Base
  has_one :groom, :class_name => 'Participant', :condition => "role = 'groom'"
  has_one :bride, :class_name => 'Participant', :condition => "role = 'bride'"
end 
```

（当然，您需要使用 Participant 而不是 Person 没有技术原因；对我来说，Participant 在婚礼中扮演角色更有意义，而 Person 是更一般的事物。例如，如果您想添加其他角色，您可能有一个扮演伴娘角色的参与者，与另一个扮演餐饮服务者角色的参与者是同一个人。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T03:07:32.460

根据在域内处理它们的不同程度，您采用的方法可能没有任何问题。

如果“新郎”和“新娘”大多是通常被平等对待的命名约定，那么简单地建立`has_many :parties`关系并让`Person`模型确定哪个是新娘/新郎可能更明智。也许是这样的：

```
class Wedding < ActiveRecord::Base
  has_many :parties, :class_name => 'Person'

  # helper methods to access bride and groom where specifically needed
  def self.groom
    parties.where(party_type: Person::GROOM).first
  end

  def self.bride
    parties.where(party_type: Person::BRIDE).first
  end
end

class Person < ActiveRecord::Base
  attr_accessible :wedding_id, :party_type

  GROOM = 'Groom'
  BRIDE = 'Bride'

  belongs_to :wedding
end 
```

# android - 需要从 Android 中的 WCF WebService 接收数组字符串并在 ListView 中显示

> ID：12851589
> 
> 赞同：1
> 
> 时间：2012-10-12T02:58:59.223
> 
> 标签：android, wcf, web-services, crud

我真的需要你在 WCF Web 服务和 android 方面的帮助。WCF 网络服务示例：

```
 public String[] checkLogin(string userName, string password)
    {
        string[] result;
        result = new string[] { "One", "Two", "Three", "Four" };
        return result;
    } 
```

我需要在`ListView`（android 站点）中填充这个字符串数组值。有人有任何例子吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T03:15:14.393

带数组的 ListView

```
 [1]: http://www.ezzylearning.com/tutorial.aspx?tid=1763429
  [2]: http://android.vexedlogic.com/2011/04/02/android-lists-listactivity-and-listview-ii-%E2%80%93-custom-adapter-and-list-item-view/ 
```

# vsto - 在 Visual Studio 2012 中重新签署 ClickOnce 清单

> ID：12851593
> 
> 赞同：1
> 
> 时间：2012-10-12T02:59:31.283
> 
> 标签：vsto, clickonce, visual-studio-2012

我有一个[VSTO](http://en.wikipedia.org/wiki/Visual_Studio_Tools_for_Office)解决方案，它有一个修改清单文件的构建后事件[PowerShell](http://en.wikipedia.org/wiki/Windows_PowerShell)脚本。清单文件修改后，我使用[Mage](http://msdn.microsoft.com/en-us/library/acz3y3te%28v=vs.80%29.aspx)将其辞职。这一切都在 Visual Studio 2010 中运行良好，现在升级到 Visual Studio 2012 后，这不再有效。

我在 Microsoft 表单上发现了一些信息，这些信息没有说明 Visual Studio 2012 清单文件的加密已更改，这就是为什么辞职以[.NET](http://en.wikipedia.org/wiki/.NET_Framework) 4.0 为目标的文件不起作用的原因。不能将解决方案升级到 .NET 4.5，因为该程序适用于 Excel 2010。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T04:38:08.357

这有点令人困惑。我查阅了 Visual Studio 2012 文档并注意到`mage.exe`它指的是[**Windows SDK for Windows 7**](http://www.microsoft.com/en-us/download/details.aspx?id=8279)。有趣的是，Mage 包含在 Windows 8 SDK 工具中，但它现在位于文件夹中，`\bin\NETFX 4.0 Tools\`而不仅仅是 bin……所以我的后期构建事件指向了错误的 SDK 文件夹……

请参阅*[演练：手动部署 ClickOnce 应用程序](http://msdn.microsoft.com/en-us/library/xc3tc5xx.aspx)*(MSDN)。

# asp.net-mvc-4 - 登录表单中的防伪令牌

> ID：12851596
> 
> 赞同：1
> 
> 时间：2012-10-12T02:59:43.167
> 
> 标签：asp.net-mvc-4, csrf, antiforgerytoken

我阅读了几篇关于在表单中使用防伪令牌来防止 CSRF 攻击的文章。我了解攻击者可以使用单击链接、图像或其他任何内容的人的凭据来创建 http 请求获取或发布到这些表单。

在登录表单中使用防伪令牌有什么好处吗？考虑到攻击者想要将信息提交到需要进行身份验证的 html 表单，如果登录页面是要进行身份验证的入口点，那么攻击者有什么用处？

请注意，我使用的是 Asp.Net MVC 4。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T03:04:29.313

在登录页面上放置防伪令牌可以帮助缓解[登录 CSRF](http://en.wikipedia.org/wiki/Cross-site_request_forgery#Forging_login_requests)。简而言之，攻击者欺骗受害者使用*攻击者的凭据*登录，然后攻击者可以查看受害者对帐户所做的任何更改（例如输入信用卡信息）。

# sql - SQL Server 2005 Pivot 针对动态表插入到表中

> ID：12851603
> 
> 赞同：1
> 
> 时间：2012-10-12T03:00:41.183
> 
> 标签：sql, sql-server, pivot-table

我有一个创建动态表的查询，并创建假列和假行以填充 SSRS 报告中的网格。

```
Declare @FieldLogID as int
Set @FieldLogID = 1018;

With EmployeeActivity as
(
SELECT distinct *, row_number() over(order by Employee_EmployeeID)as row
 from
    (

Select Employee_EmployeeID,
Employee_FullName,
Injured_Today_Custom,
--Case when JobAccount_TrackingID like'zzz%' then Null else JobAccount_TrackingID end as 
JobAccount_TrackingID,
StartDateTime, 
StopDateTime, 
WorkHours
from 
(
Select row_number() over (partition by Employee_EmployeeID order by JobAccount_TrackingID) row,*
from 
(
SELECT DISTINCT
CustomizedFieldLogEmployee_1.Employee_EmployeeID, 
CustomizedFieldLogEmployee_1.Employee_FullName, 
NULL as Injured_Today_Custom, 
CustomizedFieldLogJobAccount_1.JobAccount_TrackingID, 
null as StartDateTime, 
null as StopDateTime, 
null as WorkHours
FROM
CustomizedAccount INNER JOIN CustomizedFieldLogJobAccount AS CustomizedFieldLogJobAccount_1 ON CustomizedAccount.AccountID = CustomizedFieldLogJobAccount_1.Account_AccountID 
RIGHT OUTER JOIN CustomizedFieldLogEmployee AS CustomizedFieldLogEmployee_1 ON CustomizedFieldLogJobAccount_1.FieldLog_FieldLogID = CustomizedFieldLogEmployee_1.FieldLog_FieldLogID
WHERE        
CustomizedFieldLogEmployee_1.FieldLog_FieldLogID = @FieldLogID 
AND 
CustomizedAccount.AppliesToEmployees = 1
Union
(Select 'aaaa01' EmployeeID,NULL,NULL,NULL,NULL,NULL,NULL
        union Select 'aaaa02',NULL,NULL,NULL,NULL,NULL,NULL
        union Select 'aaaa03',NULL,NULL,NULL,NULL,NULL,NULL
        union Select 'aaaa04',NULL,NULL,NULL,NULL,NULL,NULL
        union Select 'aaaa05',NULL,NULL,NULL,NULL,NULL,NULL)
Union
Select Distinct 
Employee_EmployeeID,
Employee_FullName,
null as Injured_Today_Custom,
fake_TrackingID,
null as StartDateTime, 
null as StopDateTime, 
null as WorkHours
FROM
CustomizedFieldLogEmployee
cross join
(
Select 'zzz01' fake_TrackingID
union Select 'zzz02' 
union Select 'zzz03' 
union Select 'zzz04' 
union Select 'zzz05' 
union Select 'zzz06' 
union Select 'zzz07' 
union Select 'zzz08' 
union Select 'zzz09' 
union Select 'zzz10' 
) a where FieldLog_FieldLogID = @FieldLogID
) b 
) c where Row<=9
--order by Employee_EmployeeID,JobAccount_TrackingID
)d
);

Select * from EmployeeActivity 
```

我现在需要把它转成表格。我尝试使用以下函数进行动态旋转，但是当我尝试运行它时，我收到一条错误消息

> *关键字 Exec 附近的语法不正确。*

代码：

```
create procedure dynamic_pivot
(
@select varchar(2000),
@PivotCol varchar(100), 
@Summaries varchar(100)
) as
declare @pivot varchar(max), @sql varchar(max)
select @select =replace(@select,'select ','select '+@PivotCol+' as pivot_col,')

create table #pivot_columns (pivot_column varchar(100))

Select @sql='select distinct pivot_col from ('+@select+') as t'

insert into #pivot_columns
exec(@sql)

select @pivot=coalesce(@pivot+',','')+'['+pivot_column+']'from #pivot_columns

select @sql=
'
    select * from 
    (
        '+@select+'
    ) as t 
    pivot 
    (
        '+@Summaries+' for pivot_col in ('+@pivot+')
    ) as p
'

exec(@sql) 
```

执行导致错误的 SQL：

```
EXEC dynamic_pivot
   'SELECT Employee_EmployeeID, Employee_FullName,StartDateTime from EmployeeActivity',
   'JobAccount_TrackingID',
   'Count(row)' 
```

现在我没有绑定到这个函数来旋转这些数据，但是阻止我执行标准旋转的一件事是，直到运行时我才会知道组成列的值。

这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T03:23:31.387

您的动态数据透视表正在处理实际表，而不是`COMMON TABLE EXPRESSION`（您使用`WITH`关键字定义的）。一个直接的解决方案是用 CTE 制作一个真实的表。

在顶部，添加

```
if object_id('tempdb..#EmployeeActivity') is not null
drop table #EmployeeActivity; 
```

在查询结束时，添加`into #EmployeeActivity`子句：

```
Select *
into #EmployeeActivity
from EmployeeActivity; 
```

您的动态支点应该起作用。注意：我认为`row`需要在选择列表中。

```
EXEC dynamic_pivot
'SELECT Employee_EmployeeID, Employee_FullName,StartDateTime,row from EmployeeActivity',
'JobAccount_TrackingID',
'Count(row)' 
```

# ide - Qt Creator - 相同的文件两次没有拆分

> ID：12851607
> 
> 赞同：1
> 
> 时间：2012-10-12T03:01:22.823
> 
> 标签：ide, qt-creator

是否可以在不在 Qt Creator 中创建拆分的情况下拥有同一文件的多个实例，例如在 Eclipse 中实现的“窗口->新编辑器”？经过一番搜索，我倾向于认为这是不可能的，但也许有人可以证明我错了？

通常我完全赞成拆分，但有时我在足够小的屏幕上工作，我宁愿通过额外的点击来一次查看更大区域的代码。

# android - Android：在自定义 TextView 类上添加背景

> ID：12851608
> 
> 赞同：2
> 
> 时间：2012-10-12T03:01:23.077
> 
> 标签：android, android-canvas, textview

我想有我的 TextView 类的背景，但我不知道如何。我尝试在类上使用 onDraw 方法，但它不起作用。

这是我的自定义 TextView 类的代码。

```
public class Balls extends TextView{

public Balls(Context context) {
    super(context);
    // TODO Auto-generated constructor stub
    this.setText("ball");
}

protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);

    Paint paint = new Paint();
    paint.setColor(Color.RED);
    canvas.drawCircle(50, 50,30, paint);
}} 
```

知道如何修复此代码吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T03:44:36.710

您可以通过以下方式设置背景，

```
public class Balls extends TextView{

    public Balls(Context context) {
        super(context);
        this.setText("ball");
        this.setBackgroundColor(R.drawable.imageName);
    }

    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        Paint paint = new Paint();
        paint.setColor(Color.RED);
        canvas.drawCircle(50, 50,30, paint);
    }
} 
```

我用了

```
 this.setBackgroundColor(R.drawable.imageName); 
```

在构造函数中设置背景图像。您也可以以相同的方式设置背景颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T03:15:31.657

尝试[setBackground](http://developer.android.com/reference/android/view/View.html#setBackground%28android.graphics.drawable.Drawable%29)或[setBackgroundResource](http://developer.android.com/reference/android/view/View.html#setBackgroundResource%28int%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T03:21:32.297

请参阅[Scale Drawable](http://developer.android.com/guide/topics/resources/drawable-resource.html#Scale)和[Shape Drawable](http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape)

# php - 如何在一组元素上基于类调用一组变量函数

> ID：12851611
> 
> 赞同：0
> 
> 时间：2012-10-12T03:01:27.193
> 
> 标签：php, javascript, jquery, html, raphael

我有以下html代码：

```
<i class="small ele class1"></i>
<i class="medium ele class1"></i>
<i class="large ele class1"></i>

<div class="clear"></div>

<i class="small ele class2"></i>
<i class="medium ele class2"></i>
<i class="large ele class2"></i>

<div class="clear"></div>

<i class="small ele class3"></i>
<i class="medium ele class3"></i>
<i class="large ele class3"></i>

<div class="clear"></div>

<i class="small ele class4"></i>
<i class="medium ele class4"></i>
<i class="large ele class4"></i>​ 
```

我的javascript看起来像这样：

```
var resize = function(face, s) {
    var bb = face.getBBox();
    console.log(bb);
    var w = bb.width;
    var h = bb.height;
    var max = w;
    if (h > max) {
        max = h;
    }
    var scale = s / max;
    var ox = -bb.x+((max-w)/2);
    var oy = -bb.y+((max-h)/2);

    console.log(s+' '+h+' '+bb.y);

    face.attr({
        "transform": "s" + scale + "," + scale + ",0,0" + "t" + ox + "," + oy 
    });

}

$('.ele').each(function() {
    var s = $(this).innerWidth();
    var paper = Raphael($(this)[0], s, s);

    var face = $(this).hasClass("class1") ? class1Generator(paper) : class4Generator(paper);

    /*switch (true) {
        case $(this).hasClass('class1'):
            class1Generator(paper);
        break;

        case $(this).hasClass('class2'):
            class2Generator(paper)  
            break;

        case $(this).hasClass('class3'):
            class3Generator(paper)    
            break;

        case $(this).hasClass('class4'):
            class4Generator(paper)
            break;
    }*/

    resize(face, s);

}); 
```

我的问题是，我怎样才能使这行代码更具可扩展性？我尝试使用开关，但是如果其中一个元素有一个类，下面的脚本将调用两个函数，但是如果我有 10 个类怎么办？我认为这不是我创建 jsFiddle [http://jsfiddle.net/7uUgz/6/的最佳解决方案](http://jsfiddle.net/7uUgz/6/)

```
 //var face = $(this).hasClass("awesome") ? awesomeGenerator(paper) : awfulGenerator(paper); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T03:25:34.807

[试试这个小提琴](http://jsfiddle.net/7uUgz/8/)

基本上它从'class#'中提取数字并调用适当的函数。

```
$('.ele').each(function() {
    var s = $(this).innerWidth();
    var paper = Raphael($(this)[0], s, s);
    var id = 0;

    var classList = $(this).attr('class').split(/\s+/);
    $.each(classList, function(index, item) {
        if (item.indexOf('class') != -1) {
            id = item.replace('class', '');
            console.log('id : ' + id);
        }
    });

    var face = eval('class' + id + 'Generator')(paper);
    resize(face, s);

}); 
```

而不是使用class1，class2 ...，您可以只使用数据属性并在需要调用函数时读取它..

就像是：

```
<i data-id="1" class="small ele class1"></i> 
```

你为什么要使用`<i>`元素？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T03:28:55.380

如果您想避免使用`eval()`，可以将一些自定义事件绑定到生成类。

```
$(".class1").bind("generate", function(paper)
{
  ...
});
$(".class2").bind("generate", function(paper)
{
  ...
});

$(".ele").trigger("generate"); 
```

# c++ - C++ 和 CRTP 模式实现和编译器困境

> ID：12851613
> 
> 赞同：6
> 
> 时间：2012-10-12T03:02:15.677
> 
> 标签：c++, templates, compiler-construction, crtp

我正在尝试编译以下代码，但似乎有一个我似乎无法解决的问题：

```
template <int x>
struct count_x
{
   enum { x_size = x };
};

template <typename y>
struct crtp_base
{
   typedef typename y::count_t count_t;
   crtp_base(const count_t&){}
};

template <int x>
struct derived : public crtp_base<derived<x> >
{
   typedef typename count_x<x> count_t;
   typedef crtp_base<derived<x> > base_t;
   derived(const count_t& c) : base_t(c){}
};

int main()
{
   derived<2> d((count_x<2>()));
   return 0;
} 
```

使用 clang 3.1 编译时，错误如下：

```
c:\clangllvm\code\example.cc:18:21: error: expected a qualified name after 'typename'
   typedef typename count_x<x> count_t;
                    ^
c:\clangllvm\code\example.cc:18:21: error: typedef name must be an identifier
   typedef typename count_x<x> count_t;
                    ^~~~~~~~~~
c:\clangllvm\code\example.cc:18:28: error: expected ';' at end of declaration list
   typedef typename count_x<x> count_t;
                           ^
                           ;
c:\clangllvm\code\example.cc:20:18: error: no template named 'count_t'; did you mean 'count_x'?
   derived(const count_t& c)
                 ^~~~~~~
                 count_x
c:\clangllvm\code\example.cc:2:8: note: 'count_x' declared here
struct count_x
       ^
c:\clangllvm\code\example.cc:20:18: error: use of class template count_x requires template arguments
   derived(const count_t& c)
                 ^
c:\clangllvm\code\example.cc:2:8: note: template is declared here
struct count_x
       ^
5 errors generated. 
```

我相信这与模板在编译时确定的方式以及它们是否在正确的时间被确定为类型有关。我也尝试添加“使用 base_t::count_t;”无济于事。除此之外，编译器产生的诊断让我真的迷失了方向。将不胜感激有关阅读此错误的内容的答案或建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T03:11:13.183

`count_x<x>`不是一个限定名称（它根本没有`::`！），所以它不能在前面加上`typename`.

修复此问题后，代码仍然会失败，因为在实例化 CRTP 基时，编译器还没有看到派生类型的嵌套 typedef。这个[另一个问题](https://stackoverflow.com/q/8113878/46642)显示了一些替代方案。

# database - oracle pl/sql 如何回调为参数创建的这个别名？

> ID：12851617
> 
> 赞同：0
> 
> 时间：2012-10-12T03:02:55.957
> 
> 标签：database, oracle, plsql, oraclereports

我有一个查询我正在做以向 oracle 报告显示记录。我需要作为选择的参数是，`class_code`但是当用户单击下拉值时，对他们来说有点混乱（这里很难解释），所以他们要求将`study_intake`and组合`class_code`成一个对他们来说很清楚的词。

现在我所做的是使用 AS 作为结合了两者的新列的别名，但我无法将其回调（因为它不是正确的语法）

这是我的查询示例：

```
SELECT DISTINCT STUDENT_ATTENDENTS.IC_PASSPORT, 
STUDENT_ATTENDENTS.NAME,
 STUDENT_ATTENDENTS.A_DATE, 
STUDENT_ATTENDENTS.A_TYPE, 
STUDENT_ATTENDENTS.ATTEN, 
TUTORIAL_CLASSES_MASTER.LECTURER_NAME, 
STUDENT_ATTENDENTS.COURSE_CODE, 
STUDENT_ATTENDENTS.SUBJECT_CODE, 
SUBJECT_MASTER_TABLE.CREDIT_POINT,
TUTORIAL_CLASSES_MASTER.STUDY_INTAKE || ' ' || STUDENT_ATTENDENTS.CLASS_CODE AS Study_Intake_Class_Code

FROM STUDENT_ATTENDENTS, TUTORIAL_CLASSES_MASTER, SUBJECT_MASTER_TABLE

WHERE Study_Intake_Class_Code = :CLASS_DODE
AND STUDENT_ATTENDENTS.SUBJECT_CODE = SUBJECT_MASTER_TABLE.SUBJECT_CODE
AND (STUDENT_ATTENDENTS.CLASS_CODE = TUTORIAL_CLASSES_MASTER.CLASS_CODE) 
```

该行将`WHERE Study_Intake_Class_Code = :CLASS_DODE`返回一个错误，即

> ORA-00904: "STUDY_INTAKE_CLASS_CODE": 标识符无效

我不能使用别名。我想出的一个想法是创建一个**视图**，但这使报告变得混乱并影响了所有公式（我没有创建原始报告）

如何调整此查询以使其正常工作？任何想法或其他查询方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T03:12:34.167

只需将原始查询部分放入其中，而不是别名......即，

```
WHERE TUTORIAL_CLASSES_MASTER.STUDY_INTAKE || ' ' || STUDENT_ATTENDENTS.CLASS_CODE = :CLASS_DODE 
```

# asp.net - 例如，如何在 XML 文件中制作类似 html 的代码，这样我就可以将内容加粗或加项目符号？

> ID：12851623
> 
> 赞同：0
> 
> 时间：2012-10-12T03:04:01.670
> 
> 标签：asp.net, xml, email

我在 .net 4 / c# 的论坛中有一些 XML 文件。特别是，English.XML 文件的一部分规定了电子邮件的输入，一旦客户获准使用论坛，该电子邮件就会发送给他们。

我现在知道您不能使用以下内容：

```
<b> or <ol><li> tags 
```

在 XML 文件中，因为当我尝试时，它不起作用。因此，如果我想使电子邮件中的文本以**粗体显示**，并且如果我想在**列表中添加项目符号**，**我将如何在 XML 文件中这样做**？如果我确实进行了更改，如果客户没有在他们的电子邮件程序中启用 html 电子邮件，有没有办法防止它看起来很奇怪？感谢您提供的任何指导！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T03:20:44.477

只要您可以将格式保持为有效的 XML 格式就可以了。例如

```
<b>Bold</b> 

<ol>
<li>Item 1</li>
<li>Item 2</li>
</ol> 
```

上述标记都是有效的 XML 和 HTML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T03:21:20.347

我建议将 css 与 XML 一起使用，请查看[CSS for XML 教程，](http://edutechwiki.unige.ch/en/CSS_for_XML_tutorial)这是关于在 XML 中应用样式表的足够公平的文档

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T03:57:13.073

如果你想在 XML 中包含一个 html 块，并且它的数据格式是 XML 不支持的，比如

```
<b> or <ol><li> tags 
```

您应该将该部分标记为字符数据（CDATA）。

当 XML 解析器遇到首字母`<![CDATA[`时，它会将后面的内容报告为字符，而不尝试将它们解释为元素或实体标记。字符引用在 CDATA 部分中不起作用。当遇到 concluding`]]>`时，解析器停止报告并返回正常解析。

```
<![CDATA[<b> or <ol><li> tags]]> 
```

这样，您可以保持邮件所需的 html 格式，并且仍然具有有效的 XML。

# printing - 从 Silverlight 检测以数据为中心的报告

> ID：12851625
> 
> 赞同：0
> 
> 时间：2012-10-12T03:04:08.420
> 
> 标签：printing, silverlight-5.0

我想知道 Cristal Reports 是否仍然是 VS 和 Silverlight/WPF 的一部分。

想象一下，使用 Silverlight 的打印 API 打印总帐余额或损益表，这将是一场考验。

它有休息，总计，余额等。

我可以使用什么来从 Silverlight/WPF 制作以数据为中心的报告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:57:47.767

No Crystal Reports is not part of VS.

For our reporting requirements within Silverlight apps we use SSRS and a third party report viewer control (http://www.perpetuumsoft.com/Silverlight-Viewer-for-Reporting-Services.aspx). Perpetuum also have a WPF version of the SSRS report viewer.

# java - 奇怪的异常：使用 getBoolean 时无法将 String 转换为 Boolean

> ID：12851626
> 
> 赞同：15
> 
> 时间：2012-10-12T03:04:10.357
> 
> 标签：java, android, exception, casting, sharedpreferences

我收到一个非常奇怪的错误。我有 2 个活动。在 我调用的每个活动中，我都在`SharedPreferences`使用`MODE_PRIVATE`（如果重要的话）`sp = getPreferences(MODE_PRIVATE);``onCreate()``sp.getBoolean(IntroActivity.SHOW_INTRO, true)`

在`IntroActivity`这工作正常。但是当我尝试主要活动时，我得到了这个

```
10-12 04:55:23.208: E/AndroidRuntime(11668): FATAL EXCEPTION: main
10-12 04:55:23.208: E/AndroidRuntime(11668): java.lang.ClassCastException: java.lang.String cannot be cast to java.lang.Boolean
10-12 04:55:23.208: E/AndroidRuntime(11668):    at android.app.SharedPreferencesImpl.getBoolean(SharedPreferencesImpl.java:242)
10-12 04:55:23.208: E/AndroidRuntime(11668):    at com.lablabla.parkme.ParkMeActivity$2.onClick(ParkMeActivity.java:194)
10-12 04:55:23.208: E/AndroidRuntime(11668):    at android.view.View.performClick(View.java:4084)
10-12 04:55:23.208: E/AndroidRuntime(11668):    at android.view.View$PerformClick.run(View.java:16966)
10-12 04:55:23.208: E/AndroidRuntime(11668):    at android.os.Handler.handleCallback(Handler.java:615)
10-12 04:55:23.208: E/AndroidRuntime(11668):    at android.os.Handler.dispatchMessage(Handler.java:92)
10-12 04:55:23.208: E/AndroidRuntime(11668):    at android.os.Looper.loop(Looper.java:137)
10-12 04:55:23.208: E/AndroidRuntime(11668):    at android.app.ActivityThread.main(ActivityThread.java:4745)
10-12 04:55:23.208: E/AndroidRuntime(11668):    at java.lang.reflect.Method.invokeNative(Native Method)
10-12 04:55:23.208: E/AndroidRuntime(11668):    at java.lang.reflect.Method.invoke(Method.java:511)
10-12 04:55:23.208: E/AndroidRuntime(11668):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-12 04:55:23.208: E/AndroidRuntime(11668):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-12 04:55:23.208: E/AndroidRuntime(11668):    at dalvik.system.NativeStart.main(Native Method) 
```

我确保我没有`String`用同一个键在中间的某个地方放一个

有任何想法吗？

谢谢！

编辑：一些代码：

```
//onCreate()
sp = getPreferences(MODE_PRIVATE);

// other method
boolean showIntro = sp.getBoolean(IntroActivity.SHOW_INTRO, true); // Exception is here
showIntroCheckBox.setChecked(showIntro); 
```

如果重要的话，抛出异常的代码在按钮的内部`onClick`

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-10-12T03:23:46.833

如果该键曾经有一个字符串，即使是偶然的，它也会保留在那里，直到您清除应用程序的数据或卸载。尝试卸载它，看看它是否仍然存在。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T03:24:39.890

异常发生在这个 Android 方法中：

```
public boolean getBoolean(String key, boolean defValue) {
    synchronized (this) {
        awaitLoadedLocked();
        Boolean v = (Boolean)mMap.get(key); // On this line
        return v != null ? v : defValue;
    }
} 
```

我能理解这个错误的唯一意义是您正在`IntroActivity.SHOW_INTRO`代码中的其他地方重用字符串的密钥。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T03:31:41.573

使用以下代码设置布尔值`SharedPreference`：

```
 SharedPreferences appSharedPrefs = PreferenceManager
            .getDefaultSharedPreferences(this.getApplicationContext());
    Editor prefsEditor = appSharedPrefs.edit();
    prefsEditor.putBoolean(IntroActivity.SHOW_INTRO, true);
    prefsEditor.commit(); 
```

`SharedPreference`并使用以下代码检索布尔值：

```
SharedPreferences appSharedPrefs = PreferenceManager
            .getDefaultSharedPreferences(this.getApplicationContext());
    boolean showIntro = appSharedPrefs.getBoolean(IntroActivity.SHOW_INTRO, true); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-12T03:22:17.117

我假设

```
sp.getBoolean(IntroActivity.SHOW_INTRO, true)// this line returns a String value. 
```

所以你可以这样做

```
boolean showIntro = Boolean.parseBoolean(sp.getBoolean(IntroActivity.SHOW_INTRO, true)); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-12T03:33:24.073

sp.getBoolean(IntroActivity.SHOW_INTRO, true)// 这一行返回一个字符串值。

所以你必须按照下面给出的做，

```
String flag=sp.getBoolean(IntroActivity.SHOW_INTRO, true);

if(flag.equalsIgnoreCase("true")){
    boolean showIntro = true;   
}else{
    boolean showIntro = false;
} 
```

试试这个，它肯定会奏效。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-03-30T08:57:56.063

这是每个人都会用 key 犯的常见错误，我猜 IntroActivity.SHOW_INTRO="xyz_key" 如果，你对另一个常量使用相同的“xyz_key”，就会发生这个错误，所以 key 的值应该是唯一的。快乐编码:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-10-13T10:09:53.420

当我错误地在 XML 文件中为两个首选项提供了**相同的** **键**时，得到了这个异常`android:key="your_key"`！

因此，仔细检查您的 settings.xml 可能会有所帮助。

# eclipse - 在 Eclipse Juno 上安装 Scala 时出错

> ID：12851628
> 
> 赞同：1
> 
> 时间：2012-10-12T03:04:34.090
> 
> 标签：eclipse, scala, eclipse-juno

我正在尝试通过更新站点 - Scala - [http://download.scala-ide.org/nightly-update-juno-master-2.10.x在 Eclipse Juno Release 1 上安装 Scala](http://download.scala-ide.org/nightly-update-juno-master-2.10.x)

但这会引发错误 -

```
> Cannot complete the install because one or more required items could
> not be found.   Software being installed: Scala IDE for Eclipse
> 2.1.0.nightly-2_10-201210081405-e0d2b95 (org.scala-ide.sdt.feature.feature.group
> 2.1.0.nightly-2_10-201210081405-e0d2b95)   Missing requirement: Scala IDE for Eclipse 2.1.0.nightly-2_10-201210081405-e0d2b95
> (org.scala-ide.sdt.feature.feature.group
> 2.1.0.nightly-2_10-201210081405-e0d2b95) requires 'org.eclipse.sdk 0.0.0' but it could not be found 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T06:23:49.923

juno (eclipse 4.2) 还没有完全支持。
来自[常见问题解答](http://scala-ide.org/docs/user/faq.html "常问问题")：*“Scala IDE 2.0 正式支持 Eclipse 3.6 (Helium) 和 Eclipse 3.7 (Indigo)。”*
正如 ScalaIDE 网站所说：您可以*“在野外行走”*并使用[Scala IDE 2.1.0 Milestone 2 for Eclipse 4.2 (Juno)](http://scala-ide.org/download/milestone.html "朱诺")。无论如何，我建议您使用 typesafe 制作的捆绑版本：[**在这里获取**](http://typesafe.com/stack/scala_ide_download "ScalaIDE")
恕我直言，它比 IDEA（两者都使用）要好得多，而且，*juno*存在一些效率问题。现在，我建议你坚持*靛蓝*......

# php - 返回本地文本而不从 PHP 脚本解析到 ajax 脚本

> ID：12851633
> 
> 赞同：2
> 
> 时间：2012-10-12T03:04:54.563
> 
> 标签：php, javascript, ajax, innerhtml, getelementbyid

您好我不知道如何通过 innerhtml 将完整的数据返回给对象 xmlhttprequest 的 responsetext，即无需解析。在清单 1 中，它可以工作。但是当我使用如下所示的清单 2 从 php 发送文本时，它不起作用。清单 3 显示了 php 脚本。输出是我看到返回是文本，而不是由 dygraph 函数处理提前谢谢。

```
Listing1:-
    xmlhttp.onreadystatechange=function()
     {
          if (xmlhttp.readyState==4 && xmlhttp.status==200)
      {
             z = new Dygraph(document.getElementById("showrealchart"),
                  "Batch,S1,S2,S3,S4,S5,S6,S7,S8,S9,S10,\n" +
"1, 3.65, 5.00, 4.53, 5.01, 10.50, 0.03, 9.05, 5.05, 5.22, 6.23\n"+
"7, 3.65, 5.03, 4.50, 5.02, 9.50, 0.05, 9.15, 5.55, 5.20, 6.23\n"+
"8, 3.67, 5.00, 4.53, 4.99, 9.00, 0.04, 9.30, 5.10, 2.30, 6.22\n"+
"12, 3.65, 5.04, 4.53, 4.99, 10.05, 0.35, 9.00, 5.23, 5.20, 6.21\n"+
"16, 3.66, 5.00, 4.50, 4.98, 10.50, 1.01, 9.01, 5.20, 5.10, 6.24\n"+
"18, 3.65, 5.02, 4.70, 5.00, 9.80, 0.45, 9.14, 5.63, 5.15, 6.23\n");
      }
     } 
```

现在我想以确切的形式返回数据。

```
Listing 2:-
xmlhttp.onreadystatechange=function()
        {
            if (xmlhttp.readyState==4 && xmlhttp.status==200)
            {
                z = new Dygraph
                document.getElementById("showrealchart").innerHTML=xmlhttp.responseText; 
```

和 PHP 脚本。

```
Listing 3;-
<?php
print '"Batch,S1,S2,S3,S4,S5,S6,S7,S8,S9,S10,\n" +
"1, 3.65, 5.00, 4.53, 5.01, 10.50, 0.03, 9.05, 5.05, 5.22, 6.23\n"+
"7, 3.65, 5.03, 4.50, 5.02, 9.50, 0.05, 9.15, 5.55, 5.20, 6.23\n"+
"8, 3.67, 5.00, 4.53, 4.99, 9.00, 0.04, 9.30, 5.10, 2.30, 6.22\n"+
"12, 3.65, 5.04, 4.53, 4.99, 10.05, 0.35, 9.00, 5.23, 5.20, 6.21\n"+
"16, 3.66, 5.00, 4.50, 4.98, 10.50, 1.01, 9.01, 5.20, 5.10, 6.24\n"+
"18, 3.65, 5.02, 4.70, 5.00, 9.80, 0.45, 9.14, 5.63, 5.15, 6.23\n";';
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T07:10:11.420

您正在返回一个字符串文字。这不起作用，因为您实际上会得到：

```
document.getElementById("showrealchart").innerHTML="\"Batch, ....\""; 
```

请注意引号是双引号。

如果您从 PHP 中删除引号，如下所示：

```
print 'Batch,S1,S2...\n1 3.65...\n'; 
```

您的 javascript 回调会将其作为要使用的字符串。

或者，如果您想要 PHP 中的长版本，您可以执行以下操作之一：

```
$res = print 'Batch,S1,S2...\n' .
       '1, 3.65, ...\n' .
       ....;
print $res; 
```

但也取决于您的客户端 Js 对数据的处理方式，您可能想要使用 \n 位，将所有这些作为 JSON 发送或执行其他任何操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T10:14:23.437

我不太清楚为什么您以不同的方式执行清单 1 和 2 中的代码。但我相信这就是你想要的。

清单 2。

```
var z = new Dygraph(document.getElementById("showrealchart"), xmlhttp.responseText); 
```

清单 3。

```
<?php
# ... is the rest of your data
echo <<<TXT
Batch,S1,S2,S3,S4,S5,S6,S7,S8,S9,S10
1, 3.65, 5.00, 4.53, 5.01, 10.50, 0.03, 9.05, 5.05, 5.22, 6.23
7, 3.65, 5.03, 4.50, 5.02, 9.50, 0.05, 9.15, 5.55, 5.20, 6.23
...
...
TXT;
?> 
```

# objective-c - 添加到 NSDictionary 时出错

> ID：12851635
> 
> 赞同：1
> 
> 时间：2012-10-12T03:05:09.240
> 
> 标签：objective-c, ios, cocoa

```
main_dict = [[NSDictionary alloc] init];
NSMutableArray *insert = [[NSMutableArray alloc] init];
[insert addObject:main_event];      
NSString *count = [NSString stringWithFormat:@"%i",total_count];
[main_dict setValue:insert forKey:count]; 
```

我初始化了 NSDictionary、main_dict 和 NSMustableArray、insert。然后我将 main_event 添加到插入数组中。最后将该数组添加到带有键值的字典中。

当我踏入时收到 SIG_ABRT 信号`[main_dict setValue:insert forKey:count];`

怎么了？我已经初始化了所有元素并具有值，但仍然是 SIG_ABRT。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T03:46:26.770

您需要将数据类型更改`main_dict`为可变类型。`NSDictionary`是不可变类型，您无法对其进行编辑。所以把它改成`main_dict = [[NSMutableDictionary alloc] init];`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T03:22:23.403

您不能修改 NSDictionary 类型的实例。只需更换

```
main_dict = [[NSDictionary alloc] init]; 
```

至

```
main_dict = [[NSMutableDictionary alloc] init]; 
```

将解决这个问题。

# spring - 如何在 Spring Security 中集成 JCaptcha

> ID：12851637
> 
> 赞同：4
> 
> 时间：2012-10-12T03:05:18.390
> 
> 标签：spring, maven, spring-security, weblogic, captcha

在开始回答之前，我知道有更简单、更容易的 ReCaptcha，但我不能使用它。生产服务器不在线。所以我们开始吧。

我在 maven Project 和 weblogic 上使用 Spring mvc 3 和 Spring Security 作为 Web 服务器（开发时的码头）。我会非常具体地介绍这一点。

在查看我的配置和文件之前，我想向您展示我的问题列表：

*   我在 JCaptcha 之前用相同的编码结构尝试过 ReCaptcha，它工作正常。
*   logger.debug 根本没有出现在 CaptchaCaptureFilter 类和/或 CaptchaVerifierFilter 类中（虽然它出现在 ArtajasaAuthenticationProvider 类中）。
*   我可以看到验证码图像，但无论答案是什么，它总是无效的。
*   在当前状态下，它在 jetty 和 weblogic 中都不起作用，但是如果我将自定义过滤器位置更改为下面的位置，它只在 jetty 中起作用。

    ```
    <custom-filter ref="captchaCaptureFilter" position="FIRST"/>
    <custom-filter ref="captchaVerifierFilter" after="FIRST"/> 
    ```

感谢观看，非常感谢您回答我的问题。以下是详细信息。

JCaptcha 的存储库是这个：

```
<repository>
        <id>sourceforge-releases</id>
        <name>Sourceforge Releases</name>
        <url>https://oss.sonatype.org/content/repositories/sourceforge-releases</url>
    </repository>

<dependency>
        <groupId>com.octo.captcha</groupId>
        <artifactId>jcaptcha-integration-simple-servlet</artifactId>
        <version>2.0-alpha-1</version>
    </dependency> 
```

以下是我在 .xml 文件中进行的一些配置：

web.xml

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/applicationContext.xml
        /WEB-INF/spring/spring-security.xml
    </param-value>
</context-param>
 <listener>
    <listener-class>org.springframework.security.web.session.HttpSessionEventPublisher</listener-class>
</listener>

<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>FORWARD</dispatcher>
    <dispatcher>REQUEST</dispatcher>
</filter-mapping>

<servlet>
    <servlet-name>jcaptcha</servlet-name>
    <servlet-class>com.octo.captcha.module.servlet.image.SimpleImageCaptchaServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>jcaptcha</servlet-name>
    <url-pattern>/jcaptcha.jpg</url-pattern>
</servlet-mapping> 
```

弹簧安全.xml

```
<http auto-config="true" use-expressions="true">
    <intercept-url pattern="/resources/**" access="permitAll()" />
    <intercept-url pattern="/jcaptcha.jpg" access="permitAll()" />
    <intercept-url pattern="/**" access="isAuthenticated()" />

    <form-login login-page="/session/login/" default-target-url="/"
                authentication-failure-url="/session/loginfailed/" />
    <logout logout-success-url="/session/logout/" />
    <access-denied-handler error-page="/session/403/" />

    <!--JCaptcha Filtering-->
    <custom-filter ref="captchaCaptureFilter" before="FORM_LOGIN_FILTER"/>
    <custom-filter ref="captchaVerifierFilter" after="FORM_LOGIN_FILTER"/>
    <anonymous />
</http>

<!-- For capturing CAPTCHA fields -->
<beans:bean id="captchaCaptureFilter" class="com.util.CaptchaCaptureFilter" />

<!-- For verifying CAPTCHA fields -->
<!-- Private key is assigned by the JCaptcha service -->
<beans:bean id="captchaVerifierFilter" class="com.util.CaptchaVerifierFilter"
      p:failureUrl="/session/loginfailed/"
      p:captchaCaptureFilter-ref="captchaCaptureFilter"/>

<beans:bean id="customAuthFilter" class="org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter">
    <beans:property name="sessionAuthenticationStrategy" ref="sas"/>
    <beans:property name="authenticationManager" ref="authenticationManager" />
    <beans:property name="allowSessionCreation" value="true" />
</beans:bean>

<beans:bean id="sas" class="org.springframework.security.web.authentication.session.ConcurrentSessionControlStrategy">
    <beans:constructor-arg name="sessionRegistry" ref="sessionRegistry"/>
    <beans:property name="maximumSessions" value="1" />
</beans:bean>

<beans:bean id="sessionRegistry" class="org.springframework.security.core.session.SessionRegistryImpl" />

<beans:bean id="userService" class="com.service.mybatis.UserManager" />

<beans:bean id="customAuthenticationProvider" class="com.util.ArtajasaAuthenticationProvider" />
<authentication-manager alias="authenticationManager">
    <authentication-provider ref="customAuthenticationProvider" />
</authentication-manager>

<beans:bean id="accessDeniedHandler" class="com.util.ThouShaltNoPass">
    <beans:property name="accessDeniedURL" value="/session/403/" />
</beans:bean> 
```

这些是java类：

ArtajasaAuthenticationProvider.java

```
public class ArtajasaAuthenticationProvider implements AuthenticationProvider {

@Autowired
private UserService userService;
private Logger logger = LoggerFactory.getLogger(ArtajasaAuthenticationProvider.class);

@Override
public Authentication authenticate(Authentication authentication) throws AuthenticationException {
    String username = String.valueOf(authentication.getPrincipal());
    String password = String.valueOf(authentication.getCredentials());
    logger.debug("Checking authentication for user {}", username);
    if (StringUtils.isBlank(username)
            || StringUtils.isBlank(password)) {
        throw new BadCredentialsException("No Username and/or Password Provided.");
    } else {
        Pengguna user = userService.select(username);
        if (user == null) {
            throw new BadCredentialsException("Invalid Username and/or Password.");
        }
        if (user.getPassword().equals(new PasswordUtil().generateHash(password, user.getSalt()))) {
            List<GrantedAuthority> authorityList = (List<GrantedAuthority>) userService.getAuthorities(user);
            return new UsernamePasswordAuthenticationToken(username, password, authorityList);
        } else {
            throw new BadCredentialsException("Invalid Username and/or Password.");
        }
    }
}

@Override
public boolean supports(Class<?> authentication) {
    return (UsernamePasswordAuthenticationToken.class.isAssignableFrom(authentication));
}
} 
```

CaptchaCaptureFilter.java

```
public class CaptchaCaptureFilter extends OncePerRequestFilter {

protected Logger logger = Logger.getLogger(CaptchaCaptureFilter.class);
private String userCaptchaResponse;
private HttpServletRequest request;

@Override
public void doFilterInternal(HttpServletRequest req, HttpServletResponse res,
                             FilterChain chain) throws IOException, ServletException {

    logger.debug("Captcha capture filter");

    // Assign values only when user has submitted a Captcha value.
    // Without this condition the values will be reset due to redirection
    // and CaptchaVerifierFilter will enter an infinite loop
    if (req.getParameter("jcaptcha") != null) {
        request = req;
        userCaptchaResponse = req.getParameter("jcaptcha");
    }

    logger.debug("userResponse: " + userCaptchaResponse);

    // Proceed with the remaining filters
    chain.doFilter(req, res);
}

public String getUserCaptchaResponse() {
    return userCaptchaResponse;
}

public void setUserCaptchaResponse(String userCaptchaResponse) {
    this.userCaptchaResponse = userCaptchaResponse;
}

public HttpServletRequest getRequest() {
    return request;
}

public void setRequest(HttpServletRequest request) {
    this.request = request;
}
} 
```

CaptchaVerifierFilter.java

```
public class CaptchaVerifierFilter extends OncePerRequestFilter {

protected Logger logger = Logger.getLogger(CaptchaVerifierFilter.class);
private String failureUrl;
private CaptchaCaptureFilter captchaCaptureFilter;

// Inspired by log output: AbstractAuthenticationProcessingFilter.java:unsuccessfulAuthentication:320)
// Delegating to authentication failure handlerorg.springframework.security.web.authentication.SimpleUrlAuthenticationFailureHandler@15d4273
private SimpleUrlAuthenticationFailureHandler failureHandler = new SimpleUrlAuthenticationFailureHandler();

@Override
public void doFilterInternal(HttpServletRequest req, HttpServletResponse res,
                             FilterChain chain) throws IOException, ServletException {

    logger.debug("Captcha verifier filter");
    logger.debug("userResponse: " + captchaCaptureFilter.getUserCaptchaResponse());

    // Assign values only when user has submitted a Captcha value
    if (captchaCaptureFilter.getUserCaptchaResponse() != null) {

        // Send HTTP request to validate user's Captcha
        boolean captchaPassed = SimpleImageCaptchaServlet.validateResponse(captchaCaptureFilter.getRequest(), captchaCaptureFilter.getUserCaptchaResponse());

        // Check if valid
        if (!captchaPassed) {
            logger.debug("Captcha is invalid!");

            // Redirect user to login page
            failureHandler.setDefaultFailureUrl(failureUrl);
            failureHandler.onAuthenticationFailure(req, res, new BadCredentialsException("Captcha invalid! " + captchaCaptureFilter.getRequest() + " " + captchaCaptureFilter.getUserCaptchaResponse()));

        } else {
            logger.debug("Captcha is valid!");
        }

        // Reset Captcha fields after processing
        // If this method is skipped, everytime we access a page
        // CaptchaVerifierFilter will infinitely send a request to the Google Captcha service!
        resetCaptchaFields();
    }

    // Proceed with the remaining filters
    chain.doFilter(req, res);
}

/**
 * Reset Captcha fields
 */
public void resetCaptchaFields() {
    captchaCaptureFilter.setUserCaptchaResponse(null);
}

public String getFailureUrl() {
    return failureUrl;
}

public void setFailureUrl(String failureUrl) {
    this.failureUrl = failureUrl;
}

public CaptchaCaptureFilter getCaptchaCaptureFilter() {
    return captchaCaptureFilter;
}

public void setCaptchaCaptureFilter(CaptchaCaptureFilter captchaCaptureFilter) {
    this.captchaCaptureFilter = captchaCaptureFilter;
}
} 
```

最后但并非最不重要的一点是 login.jsp

```
<%@ taglib prefix='c' uri='http://java.sun.com/jstl/core_rt' %>

<form id="login" name="f" action="<c:url value='/j_spring_security_check'/>" method="POST">
  <div class="container">

    <div class="content">
        <div class="row">
            <div class="login-form">
                <h3>Login</h3>
                <br />
                  <fieldset>
                       <div class="clearfix">
                            username: ecr
                            <input type="text" name='j_username' value='<c:if test="${not empty param.login_error}"><c:out value="${SPRING_SECURITY_LAST_USERNAME}"/></c:if>' placeholder="username@artajasa.co.id">
                       </div>
                       <div class="clearfix">
                           password: ecr123
                           <input type="password" name='j_password' placeholder="password">
                       </div>
                       <div class="clearfix">
                           <img src="../../jcaptcha.jpg" />
                           <br />
                           <input type="text" name="jcaptcha" placeholder="masukkan captcha" />
                       </div>
                       <br />
                       <button class="btn btn-primary" type="submit"><i class="icon-lock"></i> Sign in</button>
                   </fieldset>
            </div>
        </div>
    </div>
     <br />
     <c:if test="${not empty error}">
            <div class="alert alert-error">
            <button type="button" class="close" data-dismiss="alert"><i class="icon-remove"></i></button>
            Login Failed, try again.<br />
            <c:out value="${sessionScope['SPRING_SECURITY_LAST_EXCEPTION'].message}"/>
            </div>
          </c:if>
  </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T08:22:15.950

问题解决了！我找到了答案。所以我们毕竟不需要 CaptchaVerifierFilter。我在 AuthenticationProvider 中验证验证码。

这些是更改列表：

在 spring-security.xml 中，这个

```
<!--JCaptcha Filtering-->
<custom-filter ref="captchaCaptureFilter" before="FORM_LOGIN_FILTER"/>
<custom-filter ref="captchaVerifierFilter" after="FORM_LOGIN_FILTER"/> 
```

成为这个

```
<!--JCaptcha Filtering-->
<custom-filter ref="captchaCaptureFilter" before="FORM_LOGIN_FILTER"/> 
```

消除

```
<!-- For verifying CAPTCHA fields -->
<!-- Private key is assigned by the JCaptcha service -->
<beans:bean id="captchaVerifierFilter" class="com.util.CaptchaVerifierFilter"
  p:failureUrl="/session/loginfailed/"
  p:captchaCaptureFilter-ref="captchaCaptureFilter"/> 
```

并在此处验证验证码

```
<beans:bean id="customAuthenticationProvider" class="com.pusilkom.artajasa.ecr.backend.util.MyAuthenticationProvider"
            p:captchaCaptureFilter-ref="captchaCaptureFilter"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-19T05:37:13.063

我不确定这是否是正确的做法，但它对我来说非常有效。我创建了与您相同的类，过滤器类代码的更改很少，**security-context.xml**的更改也很小。

1.  我在 CaptchaCaptureFilter 中验证验证码，并将验证结果存储在变量 iscaptchaPassed 中，该变量是 CaptchaCaptureFilter 中的一个属性。除了 iscaptchaPassed，我还将响应存储为 captchaResponse，以便稍后在 CaptchaVerifierFilter 中检查它是否为空。

公共类 CaptchaCaptureFilter 扩展 OncePerRequestFilter {

```
private String captchaResponse;

private boolean iscaptchaPassed; 
```

//setter 和 getter

```
@Override
public void doFilterInternal(HttpServletRequest req, HttpServletResponse res,FilterChain chain) throws IOException, ServletException {

    logger.info("Captcha capture filter");

    String captcha_Response=req.getParameter("jcaptcha");
    logger.info("response captcha captured : " +captcha_Response);

    if(captcha_Response!=null)
    {
        iscaptchaPassed = SimpleImageCaptchaServlet.validateResponse(req, req.getParameter("jcaptcha"));
        captchaResponse=captcha_Response;
        logger.info("isCaptchaPassed value is "+iscaptchaPassed);
    }

    // Proceed with the remaining filters
    chain.doFilter(req, res);
} 
```

2.  读取 CaptchaVerifyFilter 中注入的 captchaCaptureFilter 的值并按以下方式处理。

公共类 CaptchaVerifierFilter 扩展 OncePerRequestFilter {

```
protected Logger logger = LoggerFactory.getLogger(Filter.class);

private CaptchaCaptureFilter captchaCaptureFilter;

private String failureUrl;

//getters and setters**strong text**

private SimpleUrlAuthenticationFailureHandler failureHandler = new SimpleUrlAuthenticationFailureHandler();

@Override
public void doFilterInternal(HttpServletRequest req, HttpServletResponse res,FilterChain chain) throws IOException, ServletException {

    //logger.info("Captcha verifier filter");
    boolean captchaPassed=captchaCaptureFilter.getIscaptchaPassed();
    String captchaResponse=captchaCaptureFilter.getCaptchaResponse();
    //logger.info("captcha captured :"+captchaResponse+" validation result of captcha : " +captchaPassed);

    if(captchaResponse!=null)
    {
        if(captchaPassed)
        {
            logger.info("Captcha is valid!");
        }
        else
        {
            logger.info("Captcha is invalid!");
            failureHandler.setDefaultFailureUrl(failureUrl);
            failureHandler.onAuthenticationFailure(req, res, new BadCredentialsException("Captcha invalid!"));
        }
        resetCaptchaFields();   
    }

    chain.doFilter(req, res);           
}

/** 
 * Reset Captcha fields
 */
public void resetCaptchaFields() {
    captchaCaptureFilter.setCaptchaResponse(null);
    captchaCaptureFilter.setIscaptchaPassed(false);;
} 
```

3.  在 security-context.xml 中更改以下内容。

安全性：自定义过滤器 ref="captchaCaptureFilter" before="FIRST"

安全性：custom-filter ref="captchaVerifierFilter" after="FORM_LOGIN_FILTER"

我在验证验证码的所有过滤器之前添加了 captchaCaptureFilter。验证结果在 UserNameAndPasswordAuthFilter 即**FORM_LOGIN_FILTER**之后使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-25T12:30:05.550

我尝试了另一种验证 JCaptcha 的方法，即在 Spring Security Authentication 之前。首先，JCaptcha 将得到验证，如果正确，控制将转到 Spring Security Authentication。我也没有在 security-context.xml 中添加 CaptchaCaptureFilter。

以下是我尝试过的。它工作正常。

```
public String login() {
    this.captchaPassed = false;

    // Check if captcha entered is correct. If yes then only proceed with
    // Spring Security Authentication
    this.captchaPassed = checkLoginCaptcha();

    if (captchaPassed) {
        boolean success = authenticationService.login(userName, password);

        if (success) {
            StringBuilder userNameBuilder = new StringBuilder();
            userNameBuilder.append(userName);
            FacesContext.getCurrentInstance().getExternalContext()
                    .getSessionMap()
                    .put("USER_NAME_PARAM", userNameBuilder.toString());
            return ApplicationConstants.HOME_PAGE;
        } else {
            this.message = "Wrong Username or Password Entered. Please LOGIN again.";
            this.userName = null;
            this.password = null;
            this.captchaString = null;

            return ApplicationConstants.LOGIN_PAGE;
        }
    } else {
        this.message = "Invalid captcha entered. Please LOGIN again.";
        return ApplicationConstants.LOGIN_PAGE;
    }
}

public boolean checkLoginCaptcha() {

    HttpServletRequest req = (HttpServletRequest) FacesContext
            .getCurrentInstance().getExternalContext().getRequest();
    String str = null;
    boolean flag = false;

    try {
        str = req.getParameter("loginForm:jcaptchaString");

        if (str != null) {
            flag = SimpleImageCaptchaServlet.validateResponse(req, str);
        }
    } catch (Exception e) {
        e.printStackTrace();
        flag = false;
    }

    return flag;
} 
```

# android - 重返游戏[Android]

> ID：12851639
> 
> 赞同：1
> 
> 时间：2012-10-12T03:05:55.523
> 
> 标签：android

我刚刚回到 Android 编程领域，需要一些关于我的旧项目的帮助。你能告诉我这段代码有什么问题吗，或者只是我的电脑坏了。无论如何它都会强制关闭。如果需要，将提供更多文件。

```
package org.example.knitcalc;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class Calc1 extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.Calc1);

        final TextView textview = (TextView)findViewById(R.id.textview); 
        final EditText op1 = (EditText)findViewById(R.id.Int1);
        final EditText op2 = (EditText)findViewById(R.id.Int2);
        final Button btnAdd = (Button)findViewById(R.id.addBox);

        btnAdd.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        int a, b;
        a = Integer.parseInt(op1.getText().toString());
        b = Integer.parseInt(op2.getText().toString());
        int sum = a + b;
        textview.setText(String.valueOf(sum));
        }
    });
    }
} 
```

[编辑]这是 .xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:background="@color/pcalc_back"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
<EditText
    android:id="@+id/Int1"
    android:width="110px" 
    android:layout_width="250dp"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:inputType="phone" />
<EditText
    android:id="@+id/Int2"
    android:width="110px" 
    android:layout_width="250dp"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:inputType="phone" />
<Button
    android:id="@+id/addBox"
    android:layout_gravity="center_vertical|center_horizontal|center"
    android:layout_height="wrap_content" 
    android:layout_width="200dp"
    android:gravity="center_vertical|center_horizontal"
    android:text="@string/add_label" />
<TextView 
    android:id="@+id/textview"
    android:layout_gravity="center"
    android:layout_height="wrap_content"
    android:layout_width="79dp"
    android:textSize="20sp" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T03:30:18.130

尝试将 res/layout/Calc1.xml 重命名为 res/layout/calc1.xml 并更改

```
setContentView(R.layout.Calc1); 
```

至

```
setContentView(R.layout.calc1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T03:27:20.920

我认为Tigger是错误的。您`OnClickListener`以无需在 Activity 中实现接口的方式定义了 。

根据堆栈跟踪（它会告诉您崩溃的原因），它可能是我认为的两件事之一：

`R.id.Int1`或者`R.id.Int2`不应该以大写字母开头。检查您的参考是否正确。

或者

`Integer.parseInt(op1.getText().toString())`无法将该值解析为 int 值。

# wpf - 从按钮 WPF 编辑样式元素

> ID：12851640
> 
> 赞同：0
> 
> 时间：2012-10-12T03:06:16.540
> 
> 标签：wpf, xaml, styles, resourcedictionary

我在资源字典中有以下样式

```
<Setter Property="Template">
    <Setter.Value>
        <ControlTemplate TargetType="Button">

            <Grid>
                <Rectangle Fill="#262626" Name="Normal"/>
                <Rectangle Fill="#3f3f41" Name="Hover" Visibility="Hidden"/>
                <Rectangle Fill="#007acc" Name="Pressed" Visibility="Hidden"/>

                <Image Name="Icon"/>
                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
            </Grid>

            <ControlTemplate.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter TargetName="Hover" Property="Visibility" Value="Visible"/>
                    <Setter TargetName="Pressed" Property="Visibility" Value="Hidden"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter TargetName="Pressed" Property="Visibility" Value="Visible"/>
                    <Setter TargetName="Hover" Property="Visibility" Value="Hidden"/>
                </Trigger>
            </ControlTemplate.Triggers>

        </ControlTemplate>
    </Setter.Value>
</Setter> 
```

我需要从我的按钮（在我的 MainWindow.xaml 中）更改名称为“图标”的图像的“源”

```
 <Button Style="{StaticResource ToolbarButton}">
            <Setter TargetName="Icon" Property="Source" Value=".png"/>
        </Button> 
```

但它给了我错误“源无法识别或不可访问”

如何从按钮更改名称为“图标”的图像的“来源”属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T03:57:16.100

WPF 控件实际上在行为中运行。按钮不具有图像。虽然按钮是一个内容控件，但您可以将任何内容放入按钮的内容中。

```
<Button>
<image ... />
</Button 
```

在上面的样式中，您可以使用：

```
 <Grid>
            <Rectangle Fill="#262626" Name="Normal"/>
            <Rectangle Fill="#3f3f41" Name="Hover" Visibility="Hidden"/>
            <Rectangle Fill="#007acc" Name="Pressed" Visibility="Hidden"/>

            <Image Name="Icon" Source="{TemplateBinding Tag}" />
            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
        </Grid>

        <ControlTemplate.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter TargetName="Hover" Property="Visibility" Value="Visible"/>
                <Setter TargetName="Pressed" Property="Visibility" Value="Hidden"/>
            </Trigger>
            <Trigger Property="IsPressed" Value="True">
                <Setter TargetName="Pressed" Property="Visibility" Value="Visible"/>
                <Setter TargetName="Hover" Property="Visibility" Value="Hidden"/>
            </Trigger>
        </ControlTemplate.Triggers>

    </ControlTemplate>
</Setter.Value> 
```

现在您可以在 Button 的 Tag 属性中指定 Source

但这不是正确的做法。您应该对支持控件行为的属性使用 TemplateBinding。就像 TemplateBinding 到背景一样，按钮支持它，而按钮不支持图像。

需要帮助请叫我。

# xamarin.ios - MonoTouch.Dialog 更改 DialogViewController 样式

> ID：12851655
> 
> 赞同：1
> 
> 时间：2012-10-12T03:09:19.917
> 
> 标签：xamarin.ios, styles, monotouch.dialog, dialogviewcontroller

这是否可以将新样式应用于已创建的`DialogViewController`？在我的一种观点中，我需要清除根并从分组视图更改为普通视图。

只是将样式设置为新的不会做任何事情，所以我不确定是否需要调用一些刷新方法，或者这根本不可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T03:11:40.477

发现查看 Monotouch.Dialog 代码，您需要调用 TableView.LoadView 才能发生这种情况。

# c++ - qt app.exec() 分段错误核心转储

> ID：12851662
> 
> 赞同：-2
> 
> 时间：2012-10-12T03:11:06.957
> 
> 标签：c++, qt, segmentation-fault

我在 QT 中编写了一个应用程序。该应用程序运行良好，但在退出时我得到一个

```
Segmentation fault (core dumped) 
```

我该如何解决这个分割问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:59:13.203

你应该发布一些代码，无论如何我猜如果你在那里做错了什么，它可能是析构函数中的东西。特别是如果您使用 malloc/new 的基本内容（即整数数组）分配内存等等......

# objective-c - 读取 xml 文件时使用 NULL 值代替 UILabel 和 UIButton 标题（Objective-C）

> ID：12851666
> 
> 赞同：0
> 
> 时间：2012-10-12T03:11:27.320
> 
> 标签：objective-c, ios, xml, ipad, nsxmlparser

我有一个`UILabel`并且`UIButton`在不同的页面中，我想从`xml`文件中读取它们的标题，但是我得到了`NULL`价值，在我的`XML parser`课堂上当我使用时`NSLOG`我有我的答案但是当我想设置它们时我有`NULL`，请你帮我实现这个?

提前致谢！

**我的 XML 解析器：**

```
- (Presentation1NameXML *) initXMLParser {

appDelegate = (testAppDelegate *)[[UIApplication sharedApplication] delegate];

return self;
}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName
namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName
attributes:(NSDictionary *)attributeDict {

if ([elementName isEqualToString:@"Presentation1Name"]) {
    appDelegate.books = [[NSMutableArray alloc] init];
    NSLog(@"The Prices Count");
}
else if ([elementName isEqualToString:@"Presentation"]) {
    presentation = [[Presentation alloc] init];
    presentation.pLabel = [attributeDict objectForKey:@"label"];
    NSLog(@"khengggg %@",presentation.pLabel);
//    }else if ([elementName isEqualToString:@"Slides"]){
//        slides = [[Slide alloc] init];
}

if([elementName isEqualToString:@"slide"]) {

            slid = [[Slide alloc] init];
            NSLog(@"Processing Element: %@", elementName);

            slid.index = [[attributeDict objectForKey:@"index"] integerValue];
           NSLog(@"Reading index value :%i", slid.index);

            slid.sLabel = [attributeDict objectForKey:@"label"];
            NSLog(@"Reading label value :%@", slid.sLabel);

            slid.identifier = [attributeDict objectForKey:@"identifier"];
        NSLog(@"Reading identifier value :%@", slid.identifier);

       }
      NSLog(@"Processing Element: %@", elementName);
    }

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string {

if(!currentElementValue)
    currentElementValue = [[NSMutableString alloc] initWithString:string];
else
    [currentElementValue appendString:string];

NSLog(@"Processing Value: %@", currentElementValue);

}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName
 namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {
if([elementName isEqualToString:@"Presentation1Name"]){
    return;

}

if([elementName isEqualToString:@"Presentation"]) {
    [appDelegate.books addObject:presentation];
    presentation = nil;

}

//    if ([elementName isEqualToString:@"Slides"]){
//        [appDelegate.books addObject:slides];
//        slides = nil;
//        return;
//    }

if ([elementName isEqualToString:@"slide"]){
    [appDelegate.books addObject:slid];
    slid = nil;

}else
    [presentation setValue:currentElementValue forKey:@"pLabel"];
    //[presentation setValue:currentElementValue forKey:elementName];
currentElementValue = nil;
} 
```

**我的标签代码：我得到（空）**

```
appDelegate = (testAppDelegate *)[[UIApplication sharedApplication] delegate];
label.textColor = [UIColor greenColor];
Presentation *p1 = [appDelegate.books objectAtIndex:0];
NSLog(@"aaaaaaaaa aaaa %@", p1);
label.text = p1.pLabel; 
```

**我的按钮代码：我得到（空）**

```
 UIButton *btn = [UIButton buttonWithType:UIButtonTypeCustom];
    Slide *s1 = [appDelegate.books objectAtIndex:0];
    NSLog(@" test %@", s1.sLabel); 
```

我的对象类演示[链接](http://pastebin.com/FhKdmvsB)

我的对象类幻灯片[链接](http://pastebin.com/BxFN6Ucz)

[我的 XML 文件](http://pastebin.com/LaA1BNNV)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T08:29:19.003

问题就在这里

```
if ([elementName isEqualToString:@"Presentation1Name"]) {
    appDelegate.books = [[NSMutableArray alloc] init];
    NSLog(@"The Prices Count");
} 
```

没有这样的标签 (Presentation1Name) 并且永远不会创建数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T06:27:35.227

If you want to check NULL values, you can use this code

```
[str isEqual:[NSNull null] 
```

This returns you if that value iS NULL from web services.

Hope this helps you!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T06:42:43.290

在函数 didStartElement 中修改你的代码，没有这个标签 'Presentation1Name'

```
if ([elementName isEqualToString:@"Presentation"]) {
    appDelegate.books = [[NSMutableArray alloc] init];
    NSLog(@"The Prices Count");
} 
```

并且在函数 didEndElement 中，您应该删除此行：

```
[presentation setValue:currentElementValue forKey:@"pLabel"]; 
```

还有一些内存泄漏，你应该在 addObject 之后释放

```
if([elementName isEqualToString:@"Presentation"]) {
    [appDelegate.books addObject:presentation];
    [presentation release];
    presentation = nil;

}
if ([elementName isEqualToString:@"slide"]){
    [appDelegate.books addObject:slid];
    [slid release];
    slid = nil;
} 
```

你应该发布希望它有帮助..

# undefined - TypeScript 'var' 是未定义的错误

> ID：12851675
> 
> 赞同：1
> 
> 时间：2012-10-12T03:12:48.657
> 
> 标签：undefined, typescript

我构建了一个控制台应用程序来查找我项目中的所有 *.ts 文件，然后使用 tsc.exe 编译它们。

一切正常，但是当我将 JavaScript 文件转换为 TypeScript 时，我最终遇到了以下错误：

ytsc.js(21053, 17) Microsoft JScipt 运行时错误：“窗口”未定义

每次我尝试扩展窗口时都会发生这种情况：

```
window['prop'] = "something"; 
```

我测试了代码，直到找到答案，这与我的代码无关......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T03:12:48.657

错误是我的构建工具。

我在调用 tsc.exe 时声明了 -e（执行）命令行选项：我这样做是因为我认为我可能会在模块中添加一些自动化测试代码。

错误原因：我的大部分代码都在函数中。但是，有几个地方我想扩展“窗口”（例如，如果旧浏览器中缺少内置函数，我正在填充这些调用）。填充窗口对象的代码在文件加载时运行：

```
if (window.fun == null) {
    window.fun = function(){...};
} 
```

无论如何，由于 -e 选项，tsc.exe 试图运行代码（在浏览器环境之外）。这导致了上述错误。

# function - 为函数/子程序动态创建 AutoHotkey 热键

> ID：12851677
> 
> 赞同：7
> 
> 时间：2012-10-12T03:12:51.187
> 
> 标签：function, dynamic, hotkeys, autohotkey, subroutine

AutoHotkey 命令`Hotkey`允许在运行时创建动态热键，但它的语法和文档似乎将其限制为内置或现有的标签/子例程，这使得它*不太*有用：

> 热键、键名 [、标签、选项]

有没有办法让它像普通的硬编码热键一样工作？例如：

```
#z::MsgBox foobar        ; Typical, hard-coded hotkey pops up a message-box

Hotkey, z, MsgBox foobar ; Nope; complains about missing label “MsgBox foobar” 
```

由于手册中的以下行，它看起来可能是可能的，但是尚不清楚它是如何工作的：

> 标签 - 可以使用普通标签和热键/热字符串标签。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-29T19:16:00.363

这是对 FakeRainBrigand 答案的改进。它的用法完全相同：

```
Hotkey("x", "Foo", "Bar") ; this defines:  x:: Foo("Bar") 
```

与原作的变化：

1.  **通过将处理程序子例程放入函数中来**防止意外自动执行。****

***   允许我通过将变量的范围从全局缩小到静态来**减少命名空间污染。**`hotkeys`

    *   **优化**：在热键定义时`fun`仅查找一次（使用）；`Func()`在调用时，对象查找通过拆分`hotkeys`为两个对象`funs`和`args`;减少了四到二。** 

 **`arg*`由于对象表示法和可变参数语法，这当然仍然依赖于 AutoHotKey 的 _L 版本。

```
Hotkey(hk, fun, arg*) {
    Static funs := {}, args := {}
    funs[hk] := Func(fun), args[hk] := arg
    Hotkey, %hk%, Hotkey_Handle
    Return
Hotkey_Handle:
    funs[A_ThisHotkey].(args[A_ThisHotkey]*)
    Return
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-13T17:13:22.257

在 AutoHotkey 中不可能完全按照您的意愿行事。这是我能想到的最接近的方式。

调用这个文件`Hotkeys.ahk`，把它放进去`My Documents/AutoHotkey/Lib`。或者创建一个名为 Lib 的文件夹，并将其放在与主脚本相同的目录中。

```
Hotkeys := {}

Hotkey(hk, fun, p*) {
    global hotkeys
    hotkeys[hk] := {}
    hotkeys[hk].fun := fun
    hotkeys[hk].p := p
    Hotkey, %hk%, HandleHotkey
}

HandleHotkey:
hotkeys[A_ThisHotkey].fun(hotkeys[A_ThisHotkey].p*)
return 
```

这是一个示例脚本，您可以使用它。

```
Hotkey("e", "msgbox", "foobar")

MsgBox(msg) {
    msgbox % msg
}

#Include <Hotkeys> 
```

第一个参数是热键，第二个是要调用的函数，之后的所有内容都传递给函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T08:25:19.327

这是你想要的？

```
#Persistent
#SingleInstance Force
#installKeybdHook

Hotkey, #z, MyLabel

MyLabel:
    MsgBox,OK
Return 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-04T18:01:29.483

使用较新的 ahk 版本，您现在可以使用函数作为标签参数。请参阅[https://www.autohotkey.com/docs/commands/Hotkey.htm](https://www.autohotkey.com/docs/commands/Hotkey.htm)**

# ruby-on-rails - 仅用于 url 链接的 Ruby 脚本

> ID：12851679
> 
> 赞同：0
> 
> 时间：2012-10-12T03:12:59.447
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

这是带有 url 链接的照片的 ruby​​ 脚本。

```
<%= if property.images[0] then
      link_to image_tag (property.images[0].image.url('350x263', :jpg)),                
      user_property_image_path(user, :id => property.images[0], :property_id => property),   

    end -%> 
```

脚本的哪一部分只会显示 url 链接而不显示照片？我试过这个不起作用：

```
<%= user_property_image_path(user, :id => property.images[0], :property_id => property), 

end -%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T03:37:24.760

*这将使用LINK TEXT HERE*的链接文本显示它：

```
<%= if property.images[0] then
      link_to 'LINK TEXT HERE',                
      user_property_image_path(user, :id => property.images[0], :property_id => property)    
    end -%> 
```

如果您希望它是作为链接文本的 URL，请尝试：

```
<% url = user_property_image_path(user, :id => property.images[0], :property_id => property) %>
<%= link_to( url, url ) if property.images[0] -%> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T07:54:45.670

这：

```
<% if property.images[0] %>
  <%= link_to user_property_image_path(user, :id => property.images[0], :property_id => property) do %>
    <%= image_tag (property.images[0].image.url('350x263', :jpg)) %>
  <% end %>
<% end %> 
```

达到与您的第一个示例相同的结果。HTML 锚标记需要内部内容，可以是文本，也可以是更多的 html 标记，如 img 标记。因此，呈现锚标记的 link_to 方法将接收内部文本作为其第一个参数，或者您可以将内部内容插入其块中，如上例所示，如果认为可链接的内容更复杂，这将派上用场.

总结一下，你不能只渲染链接。您需要向此链接添加内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T08:57:31.233

这只会呈现链接（没有图像，并且没有重复指定 URL 两次）：

```
<%= link_to( nil, user_property_image_path(user,
                                           :id => property.images[0],
                                           :property_id => property)) -%> 
```

（您可以将 nil 作为第一个参数传递，它只会链接生成的 URL。

# javascript - 正则表达式将字符匹配到括号中

> ID：12851680
> 
> 赞同：2
> 
> 时间：2012-10-12T03:13:04.727
> 
> 标签：javascript, regex

我正在尝试通过括号（）内的javascript字符串值导出。

有效的例子：

```
var a = "(test) (a b c)";
alert(a.match(/\([\s\S]+?\)/gi));//output: [(test),(a b c)] 
```

但在一些较旧的浏览器中，“？” 导致错误。

所以我这样做了：

```
var a = "(test) (a b c)";
alert(a.match(/\([A-Za-z0-9\-_\t\r\n\s]+\)/gi)); 
```

但是这种方式不支持外来字符。因此需要使用**\S**

我需要一个带有**\s\S**的解决方案，并且不使用**?** 信号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T03:20:52.250

这个比较容易

```
"(test) (a b c)".match(/\([^\)]+\)/gi); // output: ["(test)", "(a b c)"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T03:21:01.130

您可以匹配非`)`字符：

```
/\([^)]+\)/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T03:21:45.243

认为这会为你做，不是吗？

([^)]*)

[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)

# mysql - mysql 命令-禁用交互行为

> ID：12851682
> 
> 赞同：0
> 
> 时间：2012-10-12T03:13:35.463
> 
> 标签：mysql, login

我正在尝试通过 phpshell 登录到 mysql：

```
 mysql -u root -ppw 
```

然而，shell 在这个命令之后无限期地等待。如何禁用交互行为？

# wcf - 如何使用 WCF 在 .Net 4.5 中进行 STS 的示例

> ID：12851683
> 
> 赞同：2
> 
> 时间：2012-10-12T03:14:20.553
> 
> 标签：wcf, c#-4.0, asp.net-mvc-4, wif, sts-securitytokenservice

我正在寻找如何使用 WCF 在 .Net 4.5 中进行 STS 的示例。

所以场景是我有一个 MVC 4 Web 应用程序，我想编写一个 STS 来进行身份验证并获取将其数据存储在我们都知道和喜爱的传统 SqlMembershipProvider 数据库模式中的声明。

我猜 STS 可能是一个简单的 WCF 服务。

我用谷歌搜索，但只能找到显示当 WIF 与核心框架分离时如何执行所有这些操作的内容。即在嵌入.Net 4.5之前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:27:28.083

编写您的解决方案可能不像您预期​​的那么容易。看看[https://github.com/thinktecture/Thinktecture.IdentityServer.v2](https://github.com/thinktecture/Thinktecture.IdentityServer.v2)这是一个 .NET STS。我想在你的情况下使用它就足够了，而且它的开发非常活跃。

# asp.net - (ASP.NET) SQL 数据读取器返回 Null 值

> ID：12851684
> 
> 赞同：1
> 
> 时间：2012-10-12T03:14:29.357
> 
> 标签：asp.net, sql, datareader

我正在连接到数据库，然后使用 SQLDataReader 解析这些结果，然后将这些结果放入以后可以使用的变量中。问题是我所有的“results.items”都返回空值。然而，DataReader 在我调试时显示了正确的字段计数。

```
Private Sub GridView1_RowCommand(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewCommandEventArgs) Handles GridView1.RowCommand

    If e.CommandName = "editPost" Then
        'Remove DataGrid'''''''''
        GridView1.Visible = False
        '''''''''''''''''''''''''
        Dim index As Integer = Convert.ToInt32(e.CommandArgument)
        Dim row As GridViewRow = GridView1.Rows(index)
        Dim ID As String = GridView1.Rows(index).Cells(0).Text
        ''''''''''''''''''''''''''''''''''''''''CREATE Controls for Placeholder
        Dim editEditor As New CuteEditor.Editor
        Dim hiddenID As New HiddenField
        hiddenID.ID = "hiddenID"
        hiddenID.Value = ID
        editEditor.ID = "editEditor"
        Dim subjectTXT As New TextBox
        subjectTXT.ID = "editorSubject"
        Dim br As New Literal
        Dim submitChanges As New Button
        Dim sbjLabel As New Label
        submitChanges.ID = "submitChanges"
        submitChanges.Text = " Submit Changes "
        submitChanges.Height = 40
        submitChanges.Width = 300

        sbjLabel.Text = "Subject:   "

        '''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
        editEditor.AutoConfigure = CuteEditor.AutoConfigure.Simple
        br.Text = "<br/><br/>"
        plcEditor.Controls.Add(hiddenID)
        plcEditor.Controls.Add(sbjLabel)
        plcEditor.Controls.Add(subjectTXT)
        subjectTXT.Width = "100"
        subjectTXT.Height = "25"
        subjectTXT.CssClass = "editInput"
        plcEditor.Controls.Add(br)
        plcEditor.Controls.Add(editEditor)
        plcEditor.Controls.Add(br)
        plcEditor.Controls.Add(br)
        plcEditor.Controls.Add(submitChanges)
        submitChanges.OnClientClick = UpdatePost()
        '''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
        Dim connStr As String = ConfigurationManager.ConnectionStrings("oakfratnewsConnectionString").ConnectionString
        Dim nCon As New SqlConnection(connStr)
        Dim addCon As New SqlConnection(connStr)
        Dim addCom As New SqlCommand("SELECT * FROM [News] WHERE ([ID] = @ID)", addCon)
        addCom.Parameters.AddWithValue("@ID", ID)
        addCon.Open()
        addCom.ExecuteNonQuery()
        Dim results As SqlDataReader
        results = addCom.ExecuteReader
        While results.Read()
            Dim editText As String = results.Item("Content")
            Dim Subject As String = results.Item("Subject")
            editEditor.Text = editText
            subjectTXT.Text = Subject

        End While

    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T08:46:28.793

您从哪里获得 ID 值？"addCom.Parameters.AddWithValue("@ID", ID)"

删除“addCom.ExecuteNonQuery()”

为什么使用

Dim editText As String = 结果。**项目**（“内容”）

我在循环之前定义了变量，然后以这种方式读取它

```
Dim editText As String 
  While results.Read() 
      editText = results("Content")   ' without .items
     ...
 End While 
```

# python - Pythonic 构造数据结构的方法

> ID：12851688
> 
> 赞同：0
> 
> 时间：2012-10-12T03:15:06.410
> 
> 标签：python, dictionary

我已经实现了以下代码，它可以完美运行，没有任何问题。但是我不满意，因为它看起来不漂亮？最重要的是，我觉得它看起来不像 pythonic 的方式。

所以我想我会听取stackoverflow社区的建议。此方法从 sql 查询中获取其数据，该查询在另一种方法中返回字典并基于该字典中的数据，我正在执行模式匹配和计数过程。我想以 Pythonic 的方式执行此操作并返回更好的数据结构。

这是代码：

```
def getLaguageUserCount(self):
    bots = self.getBotUsers()
    user_template_dic = self.getEnglishTemplateUsers()
    print user_template_dic
    user_by_language = {}
    en1Users = []
    en2Users = []
    en3Users=[]
    en3Users=[]
    en4Users=[]
    en5Users=[]
    en_N_Users=[]
    en1 = 0
    en2 = 0
    en3 = 0
    en4 = 0
    en5 = 0
    enN = 0
    lang_regx = re.compile(r'User_en-([1-5n])', re.M|re.I)
    for userId, langCode in user_template_dic.iteritems():
        if userId not in bots:
            print 'printing key value'
            for item in langCode:
                item = item.replace('--','-')
                match_lang_obj = lang_regx.match(item)
                if match_lang_obj is not None:
                    if match_lang_obj.group(1) == '1':
                        en1 += 1
                        en1Users.append(userId)
                    if match_lang_obj.group(1) == '2':
                        en2 += 1
                        en2Users.append(userId)
                    if match_lang_obj.group(1) == '3':
                        en3 += 1
                        en3Users.append(userId)
                    if match_lang_obj.group(1) == '4':
                        en4 += 1
                        en4Users.append(userId)
                    if match_lang_obj.group(1) == '5':
                        en5 += 1
                        en5Users.append(userId)
                    if match_lang_obj.group(1) == 'N':
                        enN += 1
                        en_N_Users.append(userId)
                else:
                    print "Group didn't match our regex: " + item
        else:
            print userId + ' is a bot'
    language_count = {}
    user_by_language['en-1-users'] = en1Users
    user_by_language['en-2-users'] = en2Users
    user_by_language['en-3-users'] = en3Users
    user_by_language['en-4-users'] = en4Users
    user_by_language['en-5-users'] = en5Users
    user_by_language['en-N-users'] = en_N_Users
    user_by_language['en-1'] = en1
    user_by_language['en-2'] = en2
    user_by_language['en-3'] = en3
    user_by_language['en-4'] = en4
    user_by_language['en-5'] = en5
    user_by_language['en-n'] = enN
    return user_by_language 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T03:26:09.720

您可以避免所有这些列表并将数据直接添加到`user_by_language`字典中。

我将其定义为：

```
user_by_language = collections.defaultdict(list) 
```

匹配正则表达式后，只需执行以下操作：

```
user_by_language['en-%s-users' % match_lang_obj.group(1)].append(userId) 
```

最后，您获取这些元素的所有长度并将它们保存为`en-1`, `en-2`...

# vb.net - 将 MS Access 查询的结果获取到 VB.NET 中的文本框中

> ID：12851692
> 
> 赞同：1
> 
> 时间：2012-10-12T03:16:02.027
> 
> 标签：vb.net, ms-access, odbc

我在 MS Access 中有一个表，其中有一个名为 NameC 的列（使用 ODBC 连接到 MS Access）

我希望将以下查询的结果保存在 txtField

```
Dim query = "SELECT NameC FROM Table WHERE ClientID = " & Integer.Parse(clientID) 
```

如何在 VB.NET 中做到这一点？

我有一个`txtNameC.Text`领域

我目前正在查看一些示例代码，他们这样做了：

```
 Dim _consultationTable As DataTable
  Public Sub Load()
    Dim query = "SELECT * FROM Table WHERE ClientID = " & Integer.Parse(clientID)
    Me._consultationTable = DatabaseFunctions.GetDataTable(query)
    dvgInfo.Rows.Clear()
    For Each  dtRow In Me._consultationTable.Rows
        dvgInfo.Rows.Add()
        dvgInfo.Rows.Add(dvgInfo.RowCount-1).Cells("ColClientID").Value = dtRow("ClientId").ToString()
   Next 
```

但我不想填写表格 我只想将查询结果放入文本框中 我该怎么做？

我想做这样的事情，但只是返回一个值并将其保存到文本框中

```
Protected Sub BindData()  
   strSQL = "SELECT * FROM customer"  

   Dim dtReader As OdbcDataReader  
   objCmd = New OdbcCommand(strSQL, objConn)  
   dtReader = objCmd.ExecuteReader()  

   '*** BindData to GridView ***'  
   myGridView.DataSource = dtReader  
   myGridView.DataBind()  

   dtReader.Close()  
   dtReader = Nothing  
End Sub  

Protected Sub BindData()  
   strSQL = "SELECT SpecificValue FROM customer where x = y..."  

   Dim dtReader As OdbcDataReader  
   objCmd = New OdbcCommand(strSQL, objConn)  
   dtReader = objCmd.ExecuteReader()  

   '*** BindData to GridView ***'  
   myGridView.DataSource = dtReader  
   myGridView.DataBind()  

   dtReader.Close()  
   dtReader = Nothing  
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T03:27:44.557

使用`DataReader`.populate 数据读取器中数据库中的数据和数据读取器中的数据，您可以使用特定的值。
我不知道你的代码，这就是为什么我给出一个简单的例子。
这是一个例子。

```
imports System.Data.OleDb
Public Class Form1
    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        Dim connetionString As String
        Dim oledbCnn As OleDbConnection
        Dim oledbCmd As OleDbCommand
        Dim sql As String

        connetionString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=Your mdb filename;"
        sql = "Your SQL Statement Here like Select * from product"

        oledbCnn = New OleDbConnection(connetionString)
        Try
            oledbCnn.Open()
            oledbCmd = New OleDbCommand(sql, oledbCnn)
            Dim oledbReader As OleDbDataReader = oledbCmd.ExecuteReader()
            While oledbReader.Read
                MsgBox(oledbReader.Item(0) & "  -  " & oledbReader.Item(1) & "  -  " & oledbReader.Item(2))
            End While
            oledbReader.Close()
            oledbCmd.Dispose()
            oledbCnn.Close()
        Catch ex As Exception
            MsgBox("Can not open connection ! ")
        End Try
    End Sub
End Class 
```

# java - 如何比较六个整数变量并显示哪个更大

> ID：12851696
> 
> 赞同：-1
> 
> 时间：2012-10-12T03:16:44.153
> 
> 标签：java, android, int

在我的应用程序中，我有六个整数变量 (int)，我想比较它们并选择更大的一个，但我不知道该怎么做。请问你能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T03:27:08.000

```
 int numbers[] = new int[] {4,6,....};
      int max = numbers[0];
      for(int indx=1; indx<numbers.length; indx++){
         if(max< numbers[indx]){
             max = numbers[indx];
         }
      }
      System.out.println("max=="+max); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T03:20:22.933

```
 int max = array[0];
 for (int counter = 1; counter < array.length; counter++)
        {
             if (array[counter] > max)
             {
              max = array[counter];
             }
        }

    System.out.println("The maximum number is: " + max); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T03:26:36.710

这个你一定要试试

```
max=array[0];
 for (int counter = 1; counter < array.length; counter++)
{
     if (array[counter] > max)
     {
      max = array[counter];
     }
}

System.out.println("The maximum number is: " + max); 
```

它可以 100% 工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T03:27:17.593

编写一个简单的冒泡排序方法，然后选择最后一个能给你最大整数值的元素。

你可以在这里找到伪代码：[http ://en.wikipedia.org/wiki/Bubble_sort](http://en.wikipedia.org/wiki/Bubble_sort)

PS：只使用冒泡排序，因为你只有六个元素。否则不鼓励使用冒泡排序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T03:31:48.790

我认为您的任务有两种方案：

首先，您应该将这些数据放入一个数组中，这将使您的工作更轻松。

1.遍历所有数据并选择最大的一个

```
int biggest=-10000000;//this is just a compare tag
for(i=0;i<6;i++)
{
   if(array[i]>biggest)
       biggest=array[i];
}
printf("%d\n",biggest); 
```

2.排序这个数组，例如，将这些数据升序排列。

所以只需选择这个数组的最大索引作为最大值；

# android - 我的吐司不工作，奇怪

> ID：12851700
> 
> 赞同：-5
> 
> 时间：2012-10-12T03:17:08.383
> 
> 标签：android, toast

我的代码：

```
int LastSet = 2;

        if(LastSet == '2'){
            Toast.makeText(PrintName.this, "Jack Johnson", Toast.LENGTH_LONG).show();
        } 
```

我认为我使用了正确的语法和逻辑？什么都没有出现。。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T03:22:15.927

您没有在问题中指定哪个平台和编程语言（多个平台支持 toast 通知），所以我假设 Android 上的 Java。查看您发布的代码的前两行：

```
int LastSet = 2;

if (LastSet == '2') {
    // Do something
} 
```

您设置`LastSet`为 2，这是一个 int，然后您将其与字符“2”进行比较，这是一个完全不同的野兽。在 Java 中，您可以出于多种目的将字符视为 int（包括与 int 进行比较），但不要期望 Java 将 2 和 '2' 视为同一事物*，因为它们不是*. 数字 2 与用于表示数字 2 的字符不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T03:32:16.667

尝试这个：

```
int LastSet = 2;

if(LastSet == 2){
    Toast.makeText(this, "Jack Johnson", Toast.LENGTH_LONG).show();
} 
```

# jquery - “jQuery方式”用HTML和文本的混合替换一个文本节点？

> ID：12851702
> 
> 赞同：7
> 
> 时间：2012-10-12T03:17:13.923
> 
> 标签：jquery, dom-manipulation, replacewith

在我的网络浏览器用户脚本项目中，我只需要替换一个文本节点，而不会影响与文本相同的父节点下的其他 HTML 元素。我需要用多个节点替换它：

```
<div id="target"> foo / bar; baz<img src="/image.png"></div> 
```

需要变成：

```
<div id="target"> <a href="#">foo</a> / <a href="#">bar</a>; <a href="#">baz</a><img src="/image.png"></div> 
```

我知道 jQuery 对文本节点的支持并不多。我知道我可以使用直接 DOM 调用而不是 jQuery。而且我知道我可以做一些我不想改变`$('#target').html(`的新东西。另请注意，我想保留初始空间，这本身似乎很棘手。`+``)`

我想问这里的专家，**有没有最惯用的 jQuery 方法来做到这一点？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-12T04:01:00.963

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T03:40:07.033

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T03:26:17.817

试试这个..编辑版本

```
$('#target').html('<a href="#">mixed</a> text <a href="#">and</a> HTML' + $('#target').html()); 
```

# php - 从自己的网站邀请 Facebook 的朋友

> ID：12851704
> 
> 赞同：1
> 
> 时间：2012-10-12T03:17:22.730
> 
> 标签：php, javascript, html, facebook

当有人访问我的网页时，我想让他将访问过的网页分享到他的facebook朋友的墙上，以便其他人也可以点击共享链接来访问访问过的网页。条件：访问的网页应该出现在选定朋友的facebook墙上，我想抛出一个带有链接的用户ID，这样当有人点击facebook墙上的链接时，当他进入网页时，我可以识别谁确实通过他的用户 ID 共享了网页。

我确实尝试过：facebook 发送按钮、链接按钮、发送对话框和提要对话框，但不知何故，这些都不符合上述要求。非常感谢您的回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T12:50:55.260

这是你要找的东西吗？-> https://floating-headland-9554.herokuapp.com

我在页面上创建了一个邀请朋友按钮，以便我向我的 Facebook 发送请求以喜欢我的页面。

您可以查看源代码并获取我的代码，它全部集成了 javascript。

问候，woolei - facebook 应用顾问网站 - www.wootube.woolei.com

# asp.net - AD 用户认证

> ID：12851705
> 
> 赞同：7
> 
> 时间：2012-10-12T03:17:47.513
> 
> 标签：asp.net, exchangewebservices, exchange-server-2010

我正在尝试创建一个 ASP.NET (.NET 3.5) 网站以通过 Exchange Web 服务连接到我们的 Exchange 2010 服务器，当我定义要进行身份验证的用户名、密码和域时，我能够连接到 EWS，但我想，如果可能的话，不要在我的代码中包含登录详细信息。

在 IIS 中，我在我拥有的站点的 web.config 中为站点启用了集成 Windows 身份验证`<authentication mode="Windows"/>`。

以下代码是我一直在使用的代码：

```
svc.UseDefaultCredentials = True
svc.Credentials = New WebCredentials()
svc.Url = New Uri(svcURL) 
```

使用上面的代码，我收到了消息：

> 当以没有邮箱的帐户发出请求时，您必须为任何可分辨文件夹 Id 指定邮箱主 SMTP 地址。

当我尝试使用`svc.Credentials = CredentialCache.DefaultNetworkCredentials`（代替`svc.Credentials = New WebCredentials()`）时，我收到错误消息：

> 无法将“System.Net.SystemNetworkCredential”类型的对象转换为“Microsoft.Exchange.WebServices.Data.ExchangeCredentials”类型。

如前所述，唯一有效的方法是通过硬编码用户登录详细信息来定义要进行身份验证的用户凭据，我宁愿不这样做：`svc.Credentials = New WebCredentials("username","password","domain")`

是否有人能够使用 ASP.NET 网站中当前登录用户的凭据向 EWS 进行身份验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-19T15:30:01.850

默认情况下，无法将用户凭据从一台服务器（您托管 ASP.NET 站点的服务器）委托给另一台服务器（您的 Exchange 服务器）。这被称为“服务器跃点”，Windows 默认会阻止它作为安全措施。

您有几个选项可以解决此问题：

1.  **使用 Kerberos：** 启用 Kerberos 后，可以在使用 Windows 身份验证时在服务器之间委派用户凭据。我不知道如何设置 Kerberos 的确切细节，因为我只是一个不起眼的开发人员，但也许您的系统管理员可以帮助您。AFAIK，您需要设置您的 ASP.NET 服务器以允许用户委派。
2.  **设置 IIS 应用程序池的用户标识：**如果 Kerberos 不是一个选项，您可以更改运行 ASP.NET 站点的应用程序池的标识。首先在 IIS 管理器中定义一个新的应用程序池。然后转到该应用程序池的“高级设置”对话框，并将身份设置为允许访问您的 Exchange 服务器的域用户。有关应用程序池标识的更多信息：[http](http://technet.microsoft.com/en-us/library/cc771170(v=WS.10).aspx) ://technet.microsoft.com/en-us/library/cc771170(v=WS.10).aspx 。
3.  **设置 <identity> 元素：**如果由于某种原因无法更改应用程序池，您可以尝试使用 web.config 文件中的 <identity> 元素来模拟您的 ASP.NET 网站。ASP.NET 为您提供了将凭据存储在注册表中的选项，这样您就不必将它们直接放在 web.config 文件中。更多信息：http: [//msdn.microsoft.com/en-us/library/72wdk8cc (v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/72wdk8cc(v=vs.90).aspx)
4.  **Using the <appSettings> ellement and encryption:** The last option I can think of is to simply put the credentials in your web.config file as normal <appSettings> and then encrypt the entire <appSettings> section. You would then simply read the appSettings from your code using [the AppSettingsReader class](http://msdn.microsoft.com/en-us/library/system.configuration.appsettingsreader.aspx). .NET allows you to encrypt sections of the web.config file out of the box and you can read the settings without event noticing that the section is encrypted. .NET takes care of decrypting for you. More info here: [http://msdn.microsoft.com/en-us/library/zhhddkxy.aspx](http://msdn.microsoft.com/en-us/library/zhhddkxy.aspx)

# documentation - Doxygen 自定义元素和列表

> ID：12851706
> 
> 赞同：2
> 
> 时间：2012-10-12T03:17:59.850
> 
> 标签：documentation, doxygen, documentation-generation

**我想要达到的目标：**

我想在使用 Doxygen 生成的文档中列出某些内容（想想`todo`，在我的示例中它们是任意`Summons`的）。我想使用自定义项 ( `\summon`)，这样我就可以列出`Summons`文件中记录的所有内容，还可以生成一个页面，列出整个系统中的所有内容，按文件拆分。

（我只关心在这里生成 HTML 文档，而不是乳胶。）

这是一个例子：

在 Foo.c 的文档中（例如`foo_c.html`，或其他）：

传票：

*   召唤一只安哥拉山羊
*   召唤一只布尔山羊

在 Bar.c 的文档中：

传票：

*   召唤一头凶残的大象

在所有记录的召唤的其他文档页面中（例如`summons_global_list.c`，可从导航选项卡或类似选项卡访问）：

Foo.c：

*   召唤一只安哥拉山羊
*   召唤一只布尔山羊

酒吧.c：

*   召唤一头凶残的大象

* * *

**到目前为止我能做什么和不能做什么：**

使用 /xrefitem 别名 ( `ALIASES += "summon=\xrefitem req \"Summon\" \"Summons\" "`)，我可以获得`todo`样式列表。没关系。

然而...

```
/*!
 * ...other things go here..
 *
 * \summon an Angora goat
 */

 ...code here...

/*
 * \summon a Boer goat
 */ 
```

给了我两次列表标题，例如：

传票：

*   召唤一只安哥拉山羊

传票：

*   召唤一只布尔山羊

*我怎样才能解决这个问题？*

*我也很困惑如何获得一个按文件列出所有“召唤”的自定义页面。*

# drupal-views - Drupal 视图：按字段访问权限

> ID：12851708
> 
> 赞同：0
> 
> 时间：2012-10-12T03:18:26.147
> 
> 标签：drupal-views

我想对未登录的用户隐藏 Drupal 视图中的一个字段。对于使用 Access 设置的整个块来说，这很容易做到，但没有明显的方法可以按字段做到这一点.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T20:10:52.390

由于我无法选择性地隐藏部分块，因此我对匿名用户隐藏了整个块，然后创建了该块的副本，删除了注册用户字段，只有匿名用户才能查看。这并不理想，但它有效。

# axes - 在 Google SketchUp 中将原点更改为对象的中心（免费版）

> ID：12851712
> 
> 赞同：1
> 
> 时间：2012-10-12T03:18:55.403
> 
> 标签：axes, sketchup

如下图所示，我试图通过使用它的**Axes 工具**将原点移动到这个 3D 对象的边界框的中心。结果，似乎很难找到那个中心，因为没有自动捕捉来帮助我移动轴。我正在使用 Google SketchUp 8 的免费版本，并且我确实找到了一些方便的源代码，例如插件，可以在我没有的**Pro 版本**中为我执行此操作。

谁能告诉知道如何执行此操作以将原点设置为中心？

![尝试将原点从默认位置移动到对象的中心](../Images/b105d5e00da9a68535fdf5e8ae1d473c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:41:41.313

（你发现什么插件只在 Pro 中做到这一点？）

我碰巧有一个插件可以做到这一点：http: [//sketchucation.com/forums/viewtopic.php ?t=30508](http://sketchucation.com/forums/viewtopic.php?t=30508)

如果您想自己通过代码执行此操作，那么它的要点是：

1.  获取坐标轴新原点的点。`instance.bounds.center`
2.  获取从新原点到旧原点的向量。
3.  在组或组件的定义中，使用向量变换所有内容。
4.  对于属于定义的每个实例，应用逆变换。

# html - 为什么绝对位置在 ie 6 和 7 中不起作用

> ID：12851715
> 
> 赞同：0
> 
> 时间：2012-10-12T03:19:39.663
> 
> 标签：html, css

非常简单的html代码：

```
<div style="position: relative; width: 300px; height: 400px; background-color: red">
    <div style="position: absolute; top:2px;bottom:2px;left:2px;right:2px; background-color: gray">
        content
    </div>
</div> 
```

虽然我希望内部 div 将保留外部 div 内的所有位置（2px 边距）。

它在 ff/chrome/ie8 中有效，但在 ie 6 和 7 中无效。

问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T06:14:07.833

### 一条建议：

如果您只需要边距，则可以使用此代码，仅使用内部`DIV`：

```
<div style="background-color: gray; width: 296px; height: 396px; border: 2px solid red;">
    content
</div> 
```

如果不只是边框，请参阅下面的**IE Fix**解决方案。

### 很简单的答案：

您需要设置`width`和`height`！

```
<div style="position: relative; width: 300px; height: 400px; background-color: red">
    <div style="position: absolute; top:2px;bottom:2px;left:2px;right:2px; background-color: gray; width: 296px; height: 396px;">
        content
    </div>
</div> 
```

### 截屏：

![截屏](../Images/459b4accf4ab609b43ec2abe70ba86a6.png)

### 小提琴：http: [//jsbin.com/okibat/1](http://jsbin.com/okibat/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T03:32:00.113

问题在于`IE 6, 7`您不能将相反的方向放在同一个声明中。

例如

```
.absolute {
    top: 0;
    /* you can't put bottom: 0; here in IE since it the opposite */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T06:32:05.727

IE6 需要将 div 嵌套到另一个 div 中。只有这样你才能绝对定位内部 div……有时！如果我将我的 div 移动到 xhtml 的某些部分，它会按预期工作，但在某些地方它会从它周围的 div 继承某些东西（不在它里面）。我找不到任何合理的解释来解释为什么它在某些区域起作用而在其他区域不起作用，但我确实意识到无论它是什么，外部 div 都会吸收它并允许内部 div 正确定位。

创建一个 Css 类，如

```
.bor{ 
border:solid 1px #ccc;
padding:10px; margin:10px;
} 
```

然后将此css添加到内容

```
div id="wrapper" class="bor">

 <div id="header" class="bor">
    <div id="logo">Logo goes here</div>
    <div id="phone">9876543210</div>
 </div><!-- #header -->

 <div id="mainContent" class="bor">

    <div id="sidebar" class="bor"> 
```

# mysql - SQL SELECT * FROM datetime = CURDATE() 返回一个空结果集

> ID：12851716
> 
> 赞同：5
> 
> 时间：2012-10-12T03:19:42.387
> 
> 标签：mysql, sql, datetime

谁能告诉我我的错误在哪里？通过使用该查询，它应该返回一些数据具有 datetime = '2012-10-12' 的行，对吗？这是我的[参考](http://bugs.mysql.com/bug.php?id=37878)

我的日期时间列 = 'YYYY-MM-DD HH:MM:SS'，数据类型 = 日期时间。

我正在使用 XAMPP v1.8.0、MySQL v5.5.25a。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-12T03:20:51.640

尝试使用`CAST`_ `datetime`_`date``DATE()`

```
SELECT * 
FROM tableName
WHERE DATE(`datetime`) = DATE(CURDATE()) 
```

`YYYY-MM-DD HH:MM:SS`不等于`YYYY-MM-DD`

```
2012-01-01 12:12:12 is not equal to 2012-01-01 00:00:00 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-12T03:32:21.137

不要在你的列上使用函数，例如`DATE(datetime)`- mysql 不能使用你的索引。

使用范围几乎肯定会更好：

```
WHERE `datetime` between '2012-01-01 00:00:00' and '2012-01-01 23:59:59' 
```

或仅将 DATE 部分存储在单独的列中（基数较低，优化器会更好地处理）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-08T08:00:31.483

```
SELECT * FROM tableName WHERE DATE(datetime) = CURDATE() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-09T06:58:19.157

使用`DATE()`from mysql 将 TIMESTAMP 格式化为 DATE

`Select * FROM tablename WHERE DATE(colname) = CURDATE()`

# lucene - 我不想使用分析仪进行搜索，我该怎么办？

> ID：12851718
> 
> 赞同：0
> 
> 时间：2012-10-12T03:20:01.753
> 
> 标签：lucene, hibernate-search

我正在使用 Lucene+Hibernate Search，并选择 DefualtAnalyzer 作为分析器。但我不喜欢它，我只是希望输入的值可以准确匹配。例如，输入“我爱你”，会被解析为“[Ilo lov ove eyo you]”。

我只想我只想'我爱你'匹配'我爱你'，如果不是'我爱你'，你什么都找不到。

那么如何让它工作呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T05:13:29.410

像这样做：

```
 FullTextSession fullTextSession = Search.getFullTextSession(session);
    Transaction tx = fullTextSession.beginTransaction();
    Querybuilder builder=fullTextSession.getSearchFactory().
                           buildQueryBuilder().forEntity(persistentClass).get();
    Query luceneQuery=builder.keyword().
                        onField("fieldName").
                        ignoreAnalyzer().
                        matching(queryText).createQuery(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T08:22:11.967

如果您想在索引过程中关闭分析，您需要使用：

```
@Field.analyze(Analyze.NO) 
```

# mysql - mysql IO读取速度很慢

> ID：12851720
> 
> 赞同：1
> 
> 时间：2012-10-12T03:20:19.913
> 
> 标签：mysql, performance, io, innodb

我有一个非常简单的查询

```
select * from ap_statistic 
```

在我的服务器上运行。服务器具有相同的硬件和软件配置（CPU 8 核，内存：32G，操作系统：redhat 5.5，mysql 版本：5.1）并运行相同的应用程序。

在服务器 A 中，表的行数`ap_statistic`约为 22,512,379，在服务器 B 中，表的行数为 41,438,751。当然，服务器 A 上运行的查询比服务器 B 快，但奇怪的是服务器 B 上的查询速度极慢，需要 1 个多小时，而在服务器 A 上只需 10 分钟。

我使用一些工具监控系统状态，发现在服务器A中运行查询时，系统IO读取速度约为20~30M/s，但在服务器B中为2~3M/s。我试图清理 linux 缓存并重新启动 mysql 服务器，结果都是一样的。而且我尝试将DB从服务器B恢复到服务器A，所以服务器A中的查询非常非常慢并且io读取速度非常慢。我想知道为什么会这样？

# javascript - Objective-C 与 JavaScript 循环性能

> ID：12851723
> 
> 赞同：0
> 
> 时间：2012-10-12T03:20:25.400
> 
> 标签：javascript, objective-c, performance, loops, combinations

我有一个 PhoneGap 移动应用程序，我需要生成一组匹配组合。在 JavaScript 方面，当生成组合的数组变大时，代码很快就会挂起。所以，我想我会制作一个插件来生成组合，将 javascript 对象数组传递到本机端并在那里循环。

令我惊讶的是，以下代码在 150 毫秒 (JavaScript) 内执行，而在本机端 (Objective-C) 则需要约 1000 毫秒。

有谁知道加快这些执行时间的任何技巧？当玩家超过 10 人时，即团队数组的长度等于 252 时，它真的变慢了。上面提到的执行时间是针对 10 名玩家 / 252 支球队的。

这是 JavaScript 代码：

```
for (i = 0; i < GAME.teams.length; i += 1) {
            for (j = i + 1; j < GAME.teams.length; j += 1) {
                t1                  = GAME.teams[i];
                t2                  = GAME.teams[j];

                if ((t1.mask & t2.mask) === 0) {

                    GAME.matches.push({
                        Team1: t1,
                        Team2: t2
                    });
                }
            }
} 
```

...这是本机代码：

```
NSArray *teams = [[NSArray alloc] initWithArray: [options objectForKey:@"teams"]];
NSMutableArray *t = [[NSMutableArray alloc] init];
int mask_t1;
int mask_t2;

for (NSInteger i = 0; i < [teams count]; i++) {
        for (NSInteger j = i + 1; j < [teams count]; j++) {

            mask_t1     = [[[teams objectAtIndex:i] objectForKey:@"mask"] intValue];
            mask_t2     = [[[teams objectAtIndex:j] objectForKey:@"mask"] intValue];

            if ((mask_t1 & mask_t2) == 0) {
                [t insertObject:[teams objectAtIndex:i] atIndex:0];
                [t insertObject:[teams objectAtIndex:j] atIndex:1];
                /*
                NSArray *newCombination = [[NSArray alloc] initWithObjects:
                                           [teams objectAtIndex:i],
                                           [teams objectAtIndex:j],
                                           nil];
                */
                [combinations addObject:t];
            }
        }
} 
```

...有问题的数组（GAME.teams）如下所示：

```
{
    count = 2;
    full = 1;
    list =         (
                    {
            index = 0;
            mask = 1;
            name = A;
            score = 0;
        },
                    {
            index = 1;
            mask = 2;
            name = B;
            score = 0;
        }
    );
    mask = 3;
    name = A;
},
    {
    count = 2;
    full = 1;
    list =         (
                    {
            index = 0;
            mask = 1;
            name = A;
            score = 0;
        },
                    {
            index = 2;
            mask = 4;
            name = C;
            score = 0;
        }
    );
    mask = 5;
    name = A;
}, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T03:31:39.990

通常，当您遇到性能问题时，您应该使用 Time Profiler 工具来分析您的应用程序。

在这种情况下，我可以看到一些可能的问题。

首先，你在你的内部循环中这样做：

```
[t insertObject:[teams objectAtIndex:i] atIndex:0];
[t insertObject:[teams objectAtIndex:j] atIndex:1]; 
```

您只是在对象的开头插入越来越多的`t`对象。你永远不会清空它。我很确定这不是你想要的，它也可能是一个性能问题。

其次，您发送了大量不必要的消息。例如，您要提取掩码 O(N ² ) 次。您可以通过一次提取所有掩码来优化它。

```
NSArray *teams = [options objectForKey:@"teams"];
NSUInteger teamCount = teams.count;

int masks[teamCount];
for (NSUInteger i = 0; i < teamCount; ++i) {
    masks[i] = [[teams[i] objectForKey:@"mask"] intValue];
}

NSMutableArray *matches = [[NSMutableArray alloc] init];

for (NSUInteger i = 0; i < teamCount; ++i) {
    for (NSUInteger j = i + 1; j < teamCount; ++j) {
        if ((masks[i] & masks[j]) == 0) {
            [matches addObject:@[teams[i], teams[j]]];
        }
    }
} 
```

您仍在进行 O(N ² ) 次迭代，但每次迭代的工作量要少得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T03:34:40.577

需要注意的一件事是

```
[t insertObject:[teams objectAtIndex:i] atIndex:0]; 
```

导致`t`每次使用时都会移动所有元素。这可能会显着减慢速度，因为您在循环中执行了两次。使用它可能会更好`[t addObject: ...]`。

此外，`NSMutableArray`可能会不必要地调整大小。如果您大致知道它需要多大，则可以使用特定容量对其进行初始化：

```
NSMutableArray *t = [[NSMutableArray alloc] initWithCapacity: size]; 
```

# c# - 如何自动给按钮点击事件

> ID：12851741
> 
> 赞同：0
> 
> 时间：2012-10-12T03:22:15.137
> 
> 标签：c#

> **可能重复：**
> [从函数调用按钮 OnClick](https://stackoverflow.com/questions/5130584/calling-a-button-onclick-from-a-function)

我想自动执行按钮单击事件。我想要按钮单击事件的代码，而无需手动单击按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T04:18:40.947

我认为您正在寻找[Button.PerformClick()](http://msdn.microsoft.com/en-us/library/system.windows.forms.button.performclick.aspx)；

```
button1.PerformClick(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T04:49:18.650

我有两件事要说：

*   您应该修改您的应用程序以将 IObservables 用于事件，以便您可以模拟事件以进行更好的测试。
*   如果你想自动化 UI 交互，感谢[DataDink ，](https://stackoverflow.com/users/152062/datadink)[有一个 DLL](https://stackoverflow.com/a/1364684/402022)

# javascript - javascript new 关键字 - 返回在内部匿名函数中创建的新对象

> ID：12851743
> 
> 赞同：0
> 
> 时间：2012-10-12T03:22:22.340
> 
> 标签：javascript

我正在阅读一本关于 DOM 脚本的书，当他们谈论 Ajax 时，书中出现了以下函数。

```
function getHTTPObject() {

    if(typeof XMLHTTPRequest == "undefined")
        XMLHTTPRequest = function() {
           try { return new ActiveXObject("Msxml2.XMLHTTP.6.0");}
           catch(e) {}

           //several more fall through try/catch blocks attempting 
           //to create different XMLHTTP objects. 
           //If none succeed...

           return false;
        }

     return new XMLHTTPRequest();
} 
```

如果尝试在分配给 XMLHTTPRequest 的内部匿名函数中创建 ActiveXObject 时在 try/catch 块中使用了 new 关键字，为什么在 getHTTPObject() 的末尾返回 XMLHTTPRequest 的结果时再次使用 new 关键字？

似乎它正在返回一个新的新对象。

**编辑**

我大致了解代码的目的是什么，检查 XMLHTTPRequest 构造函数是否存在，如果不存在，则定义一个尝试生成 XMLHTTP ActiveXObjects 的构造函数。到目前为止，我和你在一起。

假设 XMLHTTPRequest 未定义。

XMLHTTPRequest 被分配了内部函数构造函数。

然后在 getHTTPRequest 的底部调用 XMLHTTPRequest。

在 XMLHTTPRequest 中，创建一个新的 ActiveXObject 并将其返回给调用者，在本例中为 getHTTPObject。现在 getHTTPObject 又将这个对象返回给它的调用者。但同样，为什么这条线：

```
return new XMLHTTPRequest() 
```

如果新的（即对象实例化）已经出现在 XMLHTTPRequest() 的定义/范围内的那个 try 块的代码中，是否需要那个新的？为什么不简单：

```
return XMLHTTPRequest() 
```

谢谢大家的回答。很有可能，甚至可能是我对 JS 构造函数语法的掌握不够强，这就是让我在这里绊倒的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T03:29:11.507

返回立即发生并退出代码块。这些回报中只有一个会受到打击。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T03:42:29.687

你误解了代码。

```
> function getHTTPObject() {
> 
>     if(typeof XMLHTTPRequest == "undefined")
>         XMLHTTPRequest = function() { 
```

如果标识符`XMLHTTPRequest`未定义，则分配以下函数。

```
>            try { return new ActiveXObject("Msxml2.XMLHTTP.6.0");}
>            catch(e) {}
> 
>            //several more fall through try/catch blocks attempting 
>            //to create different XMLHTTP objects. 
>            //If none succeed...
> 
>            return false;
>         } 
```

现在调用 XMLHttpRequest，它将是主机提供的函数或上面分配的函数。

```
>      return new XMLHTTPRequest(); } 
```

以上假设如果标识符 XMLHttpRequest 解析为 undefined 以外的其他内容，则它是可调用的并返回一个`XMLHttpRequest`实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T03:39:41.713

您提到的 try 块仅在 if 条件下执行

```
if(typeof XMLHTTPRequest == "undefined") 
```

成立的很好。如果不是，它直接到达方法末尾的return语句，`getHTTPObject()`然后返回新`XMLHTTPRequest`对象。

因此，返回新的`ActiveXObject`或新`XMLHTTPRequest`的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T03:42:18.233

内部构造函数不会在外部构造函数之前调用。相反，如果 XMLHTTPRequest 函数不存在，则首先定义它，*然后*将其作为构造函数调用。

它首先检查 XMLHTTPRequest 是否存在（无论是原生的，还是来自先前调用的。如果存在，则将其作为构造函数调用。如果不存在，则首先创建它。

这里的一个技巧是，如果构造函数返回一个对象，则该`new`对象不是被分配的对象，而是被返回的对象。通常，这会导致立即进行垃圾收集。一个聪明的解释器可能会意识到它根本不需要分配。这就是新创建的构造函数所做的 - 返回一个不同的对象。（见[http://www.gibdon.com/2008/08/javascript-constructor-return-value.html](http://www.gibdon.com/2008/08/javascript-constructor-return-value.html)）

创建的 XMLHTTPRequest 替换了浏览器的。浏览器自带的 XMLHTTPRequest 构造函数不能作为函数调用，需要作为构造函数调用，这也是为什么新创建的对象也必须作为构造函数调用的原因。

* * *

请注意，这通常由库或工具包（例如[jQuery](http://jquery.com)）来选择正确的 AJAX 对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T03:47:58.517

JavaScript 允许从其构造函数返回另一个对象；构造函数在这里定义：

```
XMLHTTPRequest = function() {
       try { return new ActiveXObject("Msxml2.XMLHTTP.6.0");} 
```

在成功的情况下，生成的对象将返回给作为构造函数调用的`new ActiveXObject("Msxml2.XMLHTTP.6.0")`任何调用者。`XMLHTTPRequest`

```
 return false; 
```

该语句将只返回一个空类型的对象，`XMLHTTPRequest`因为`false`它本身不是对象。

最后`getHTTPObject()`需要返回一个对象，而不仅仅是构造函数，这就是你看到`return new XMLHTTPRequest();`最后的原因。

另请参阅[ECMAScript 语言规范](http://bclary.com/2004/11/07/#a-13.2.2)中此行为的干版。

# ruby-on-rails - Windows - JRuby on Rails - ActionView::Template::Error 无效编码

> ID：12851746
> 
> 赞同：0
> 
> 时间：2012-10-12T03:22:29.673
> 
> 标签：ruby-on-rails, windows, ruby-on-rails-3, jruby

我想在带有 Rails 3.2 的 Windows 上尝试 jruby 1.7.0.RC2。我能够启动服务器，但每次我尝试访问需要 css (javascript_include_tag) 的页面时，都会收到以下错误：

```
invalid encoding in marshaling stream: I"co 
```

这是堆栈跟踪，如果有帮助的话：

```
ActionView::Template::Error (invalid encoding in marshaling stream: I"◄co):
    9:     = stylesheet_link_tag "application", :media => "all"
  app/views/layouts/application.html.haml:9:in `_app_views_layouts_application_h
tml_haml__357561048_13162'

  Rendered C:/jruby-1.7.0.RC2/lib/ruby/gems/shared/gems/actionpack-3.2.8/lib/act
ion_dispatch/middleware/templates/rescues/_trace.erb (7.0ms)
  Rendered C:/jruby-1.7.0.RC2/lib/ruby/gems/shared/gems/actionpack-3.2.8/lib/act
ion_dispatch/middleware/templates/rescues/_request_and_response.erb (6.0ms)
  Rendered C:/jruby-1.7.0.RC2/lib/ruby/gems/shared/gems/actionpack-3.2.8/lib/act
ion_dispatch/middleware/templates/rescues/template_error.erb within rescues/layo
ut (41.0ms) 
```

我的 application.css 只是默认资产管道的结果，没什么特别的。我什至在一个空的 application.css.scss 文件中遇到同样的错误......

Ruby MRI 1.9.2 和 1.9.3 一切正常。

我必须说，在编码方面，我一无所知。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T22:01:21.170

`rake tmp:clear`在项目根目录中运行为我解决了这个问题。jRuby 似乎不喜欢使用 MRI Ruby 的缓存文件。

# qt - qmake: 在 Makefile 中生成包含其他 Makefile

> ID：12851747
> 
> 赞同：5
> 
> 时间：2012-10-12T03:22:35.060
> 
> 标签：qt, makefile, qmake

有没有办法告诉 qmake 向 Makefile 添加一个包含指令以包含其他 Makefile。

我需要在生成的 Makefile 开头添加一行：

包括 custom.inc

也许只有一种方法可以将文本从 qmake 输出到 Makfile，但我找不到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-04-15T14:32:15.853

您可以使用未记录的`QMAKE_EXTRA_INCLUDES`变量，例如

`QMAKE_EXTRA_INCLUDES += /path/to/your/file.mk`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:11:49.973

I haven't found a way to include a Makefile, but I have had a similar problem where I wanted one file to contain a common set of build variables. The solution I came up with was to use the QMake command `include(filename.pro)` (see [QMake reference page](http://doc.qt.digia.com/4.8-snapshot/qmake-project-files.html#built-in-functions-and-control-flow)). This causes QMake to include another project file. In my case, that contained all of the common settings.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T15:55:46.717

您可以在 make 文件中定义一个新目标，然后告诉该目标做什么：

```
mytarget.target = .buildfile
mytarget.commands = make -f AnotherMakeFile
QMAKE_EXTRA_TARGETS += mytarget
PRE_TARGETDEPS += .buildfile 
```

最后 2 个语句将您的目标 .buildfile 添加到 Makefile 并将 mytarget 添加到 Qt 编译过程

在这里您可以获得更多信息：http: [//qt-project.org/doc/qt-4.8/qmake-environment-reference.html](http://qt-project.org/doc/qt-4.8/qmake-environment-reference.html)

# xamarin.android - MonoDroid 异步服务请求

> ID：12851748
> 
> 赞同：2
> 
> 时间：2012-10-12T03:22:43.620
> 
> 标签：xamarin.android, wcf-client

*   我认为我的问题与帖子[https://stackoverflow.com/questions/12526125/monodroid-wcf-request-response-of-2-asynch-requests-got-mixed](https://stackoverflow.com/questions/12526125/monodroid-wcf-request-response-of-2-asynch-requests-got-mixed)中描述的问题有关。如果是这样，问题是何时修复。MonoDroid 4.2.6 似乎仍然存在问题。

*   我的确切问题是这个。在主要操作中，我启动了 5 个异步服务请求。对一个服务的 4 个服务请求和对另一个服务的 1 个服务请求。在发送请求之前，我添加了 [ServiceName]Completed 事件侦听器。具有一次调用的服务的事件侦听器被触发，另外两个事件侦听器被触发，但它们被触发两次。第一次使用 .Result 等于 null，第二次使用有效的 .Result 对象。其他两个事件侦听器永远不会被触发。在服务端，我正确接收了所有 5 个请求，并且服务发回了所有响应。

*   隔离问题是相当困难的。环境中有两件事发生了变化。最后一个工作的版本在 Windows 7 上运行，使用 MonoDroid 4.2.4 和 VS2010 用于编译项目。

*   现在问题出现在 Windows 8 下，使用 MonoDroid 4.2.6 和 VS2012 编译项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:44:09.807

听起来这确实是 Mono 代码中的一个纯粹而简单的错误。

查看[https://bugzilla.xamarin.com/show_bug.cgi?id=7200](https://bugzilla.xamarin.com/show_bug.cgi?id=7200)它声称它现在在 6.0.2 的 Beta 通道中可用。

如果您仍然看到最初的问题，请通过 Bugzilla 联系 Xamarin - 如果需要，也可以通过 support@xamarin.com 联系 - 看起来他们很想解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T20:39:50.163

请尝试[适用于 Android 4.2.7 的 Mono](http://docs.xamarin.com/android/Releases/Mono_For_Android_4/Mono_for_Android_4.2.7)，它有许多相关的错误修复。

# vim - 如何在 vim 中不使用快捷方式使 javascriptcomplete 工作？

> ID：12851751
> 
> 赞同：2
> 
> 时间：2012-10-12T03:23:13.983
> 
> 标签：vim

正如我发现的那样，使用默认的omnicomplete函数的csscomplete和javascriptcomplete之间存在一些差异。在 css 文件中我输入“c”，然后建议菜单自动显示，我什至不使用快捷方式。

但是在我输入“d”的javascript文件中，菜单不显示，直到我输入“ctrl-x ctrl-o”。

我不想每次都输入快捷方式，如何使 javascript 与 csscomplete 具有相同的行为？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T07:07:34.673

通常，您必须键入 Ctrl-X Ctrl-O 才能调用 Omni 补全；您可能正在使用*AutoComplPop*插件来自动打开完成菜单。这个插件支持 Ruby、Python、Xml、HTML 和 CSS 的全向补全，但不支持 JavaScript。

基于现有的语言，将支持扩展到 JavaScript 可能并不太难。如果您对 Vimscript 感到满意，您可以自己尝试一下，然后向插件作者提交补丁。否则，您必须向作者寻求帮助。

或者，您可以重新考虑您的方法。比如我有反弹Ctrl+Space来触发omnicompletion：

```
inoremap <expr> <C-Space> pumvisible() ? '<C-n>' : '<C-x><C-o>' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T08:42:05.150

[如果 Ingo 是正确的并且您使用 AutoComplPop，您可能会对我在此处](https://github.com/romainl/dotvim/blob/master/bundle/autocomplpop/autoload/acp.vim#L130)、[此处](https://github.com/romainl/dotvim/blob/master/bundle/autocomplpop/plugin/acp.vim#L33)和[此处](https://github.com/romainl/dotvim/blob/master/bundle/autocomplpop/plugin/acp.vim#L92)对该插件所做的小改动感兴趣，以使其与 JavaScript（和 PHP）一起使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T14:32:17.707

我建议使用“neocomplcache”而不是“autocomplpop”。它还支持 javascript 自动补全，并且比 autocomplpop 具有更大的灵活性。你甚至可以让 neocomplcache 表现得像 autocomplpop。

在这里查看：[https](https://github.com/Shougo/neocomplcache) ://github.com/Shougo/neocomplcache 。

# javascript - 如何使链接恢复到正常（非活动）状态？

> ID：12851755
> 
> 赞同：0
> 
> 时间：2012-10-12T03:23:55.400
> 
> 标签：javascript, jquery, html, css

这个想法很简单：

1.  将悬停时的 li 背景颜色更改为一种颜色

    ```
    ul#menu li a:hover {...} 
    ```

2.  在鼠标按下时将其更改为其他颜色

    ```
    ul#menu li a:active {...} 
    ```

3.  如果链接既没有悬停也没有按下，则将颜色恢复为原始颜色（正常）

问题似乎是，如果用户拒绝了他的意图并让鼠标离开链接，则背景颜色就像被按下一样（即`a:active`）。

因此，即使用户释放鼠标按钮，链接看起来也处于“活动”状态并保持在其中。

**编辑**

这是我在海报的帮助下想出的，他们试图回答这个问题：请比较这些小提琴：

1.  [小提琴 - 按需要工作](http://jsfiddle.net/4PCLd/)
2.  [小提琴 - 在实际应用中工作](http://jsfiddle.net/RPRaZ/)

不同之处在于所需的小提琴没有`href`. 一旦`href`添加，链接就会开始表现出**不**希望的行为。他们都使用：

```
a:link {color:#FF0000;}      /* unvisited link */
a:visited {color:#FF0000;}  /* visited link */
a:hover {color:#FF00FF;}  /* mouse over link */
a:active {color:#0000FF;}  /* selected link */ 
```

尽管

1.  `<a>LINK</a>`
2.  `<a href="default.asp" target="_blank">LINK</a>`

当然我已经`href`在我的 html 中设置了，那么我怎样才能实现 Fiddle #1 行为呢？

所以，看起来只用 html 和 css 是不可能的。使用java脚本有什么解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T06:45:39.983

我从您的要求中了解到，我将其归功于 jsfiddle。

请查看**演示**

[http://jsfiddle.net/saorabhkr/Pzuwb/](http://jsfiddle.net/saorabhkr/Pzuwb/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T06:35:49.297

我已经尝试过了，所有的工作都很有魅力，你也需要访问链接的规则并将其设置为默认的未访问链接

[小提琴](http://jsfiddle.net/4PCLd/)

# oracle - Oracle中如何获取事务开始时间？

> ID：12851756
> 
> 赞同：0
> 
> 时间：2012-10-12T03:24:06.540
> 
> 标签：oracle, oracle10g, oracle11g

Oracle中如何获取事务开始时间？是否有这样的内置函数可用于查询？

更具体地说，我需要一个函数，我们称之为它`trans_begin_time()`，以这种方式使用：

```
UPDATE MYTABLE
SET batch_update_time = trans_begin_time()
WHERE some_criteria 
```

如果存在这样的功能，它将通过两种方式帮助我：

首先，我可以使用相同的日期值更新所有记录 - 请注意`sysdate`这不起作用，因为这是一个非常大的表，并且`sysdate`会给出不同的值。

其次，我可以在任何地方使用它，而无需`sysdate`事先存储值，然后在查询中使用它。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T04:01:05.707

```
11:43:20 SYSTEM@sandbox> create table test as select * from dual;         

Table created.                                                                 

Elapsed: 00:00:00.04                                                           
11:43:26 SYSTEM@sandbox> set transaction read write name 'test';          

Transaction set.                                                               

Elapsed: 00:00:00.00                                                           
11:43:35 SYSTEM@sandbox> insert into test values (1);                     

1 row created.                                                                 

Elapsed: 00:00:00.00                                                           
11:43:42 SYSTEM@sandbox> select name, start_time from v$transaction;      

NAME       START_TIME                                                          
---------- --------------------                                                
test       10/12/12 11:43:34                                                   

Elapsed: 00:00:00.01                                                           
11:43:47 SYSTEM@sandbox> commit;                                          

Commit complete.                                                               

Elapsed: 00:00:00.01                                                           
11:44:00 SYSTEM@sandbox> select name, start_time from v$transaction;      

no rows selected                                                               

Elapsed: 00:00:00.00                                                           
11:44:02 SYSTEM@sandbox> 
```

或者，对于每个会话：

```
11:59:15 SYSTEM@Sandbox> set transaction name 'test_by_addr';                           

Transaction set.                                                                             

Elapsed: 00:00:00.00                                                                         
11:59:18 SYSTEM@Sandbox> insert into test values(1);                                    

1 row created.                                                                               

Elapsed: 00:00:00.00                                                                         
11:59:21 SYSTEM@Sandbox> get xact                                                       
  1  select s.sid                                                                            
  2        ,s.serial#                                                                        
  3        ,s.username                                                                       
  4        ,s.status                                                                         
  5        ,t.name                                                                           
  6        ,t.start_time                                                                     
  7* from v$transaction t join v$session s on t.addr = s.taddr                               
11:59:27 SYSTEM@Sandbox> /                                                              

       SID    SERIAL# USERNAME                       STATUS   NAME       START_TIME          
---------- ---------- ------------------------------ -------- ---------- --------------------
        39       1015 SYSTEM                         ACTIVE   test_by_ad 10/12/12 11:59:17   
                                                              dr                             

Elapsed: 00:00:00.01                                                                         
11:59:30 SYSTEM@Sandbox> select SYS_CONTEXT('USERENV','SID') from dual;                 

SYS_CONTEXT('USERENV','SID')                                                                 
----------------------------
39                                                                                           

Elapsed: 00:00:00.01 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T08:08:52.597

您可以使用为单个会话返回相同日期的函数。

```
SQL> CREATE OR REPLACE PACKAGE pkg AS
  2     FUNCTION get_session_date RETURN DATE;
  3  END;
  4  /

Package created.

SQL> CREATE OR REPLACE PACKAGE BODY pkg AS
  2     g_date DATE;
  3     FUNCTION get_session_date RETURN DATE IS BEGIN RETURN g_date; END;
  4  BEGIN
  5     g_date := SYSDATE;
  6  END;
  7  /

Package body created.

SQL> SELECT to_char(pkg.get_session_date, 'dd/mm/yyyy hh24:mi:ss') FROM dual;

TO_CHAR(PKG.GET_SES
-------------------
12/10/2012 10:07:32

SQL> EXEC dbms_lock.sleep(10);

PL/SQL procedure successfully completed.

SQL> SELECT to_char(pkg.get_session_date, 'dd/mm/yyyy hh24:mi:ss') FROM dual;

TO_CHAR(PKG.GET_SES
-------------------
12/10/2012 10:07:32 
```

# web-services - 通过Tomcat在axis2 Web服务旁边部署网站的最佳方式？

> ID：12851763
> 
> 赞同：0
> 
> 时间：2012-10-12T03:25:10.597
> 
> 标签：web-services, tomcat, web-applications, axis2

我正在使用 Axis2（当前为 1.5.3）和 Tomcat（当前为 6.0.26）并且正在运行 Web 服务。我还想托管用于配置 Web 服务的 HTML 页面。

解决此问题的最佳方法是什么？我认为保持相同的上下文是关键，但也许不是。

我当前的发行版位于与此类似的文件夹结构下：Tomcat/webapps/mycompany 实际服务代码在这里：Tomcat/webapps/mycompany/WEB-INF/services/myService

在浏览器中，我可以通过以下方式访问我的 Web 服务：/mycompany/services/myService

我注意到我可以在这个路径中放置实际的 HTML 文件，而 Tomcat 确实会提供它们。

例如，如果我将“index.html”放在 Tomcat/webapps/mycompany 下，我可以导航到 /mycompany/index.html 并查看我的 html。

我想要做的是将此 HTML 附加到 JAR/类文件中，这些文件可以在与服务相同的上下文中与已经存在的服务类文件进行交互。因此，我可以让浏览器直接配置 Web 服务。

这可能吗，是否有教程或其他东西可以帮助我解决这个问题？请注意，我已经为这个特定的 Web 服务使用 Tomcat 和 Axis2 有一段时间了，但我之前从未真正使用 Tomcat 部署过 Web 应用程序/html。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T20:35:01.650

通过“配置服务”，举个例子：

该服务有一组数据集。
每个数据集都存在于一个单独的数据库中。该服务可以管理 0..n 个数据集。该服务必须配置为了解每个数据集。

这就是我正在配置的。我不想配置 Axis 本身或重新定义服务。

我想使用托管 Web 服务的同一 Tomcat 实例托管 HTML。它需要管理会话、具有登录功能、诸如此类的东西，并且必须能够实时配置 Web 服务。

从我正在阅读的内容来看，最好为 Web 应用程序模块可以从不同上下文调用的 Web 服务创建一个接口。

有没有更好的办法？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T09:54:43.620

首先，配置服务是什么意思。通常在 SOA 世界中，服务类似于接口。恕我直言，您可以只更改一项服务，因为他们是依赖您公开的服务的其他用户。

如果我想更改一项服务，我宁愿在弃用现有服务后引入新版本的服务。

您是在谈论将 QoS 应用于现有服务。那么这是有道理的。

无论如何，如果您想拥有一个带有axis2服务引擎的网络应用程序，这是可能的。如果您查看axis2 war 文件的内部，您会发现Axis2Servlet 的web.xml 条目。正是这个 servlet 为 Web 服务请求提供服务。

因此，您需要的是 Web 应用程序中的 Axis2Servlet 映射以及通常的 servlet 映射。使用 web-app 文件配置服务的可能方法的数量。一种选择是使用 Web 服务调用自身（通过身份验证）来配置它。

# azure - 如何将现有块 Blob 转换为 PageBlob

> ID：12851764
> 
> 赞同：6
> 
> 时间：2012-10-12T03:25:12.827
> 
> 标签：azure

我使用 CloudBerry 资源管理器将 VM（Iaas）磁盘文件复制到另一个存储。但是当我复制完之后，我发现新创建的 Blob 是一个 Block Blob，而不是一个 Page Blob。该工具没有复制源 blob 类型，即 Page Blob。无论如何要从块 Blob 转换为页 Blob？谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-12T03:44:57.537

不可以。一旦创建/上传了 blob，您就无法更改 blob 类型。不幸的是，您需要重新创建/重新上传 blob。不过我有些意外。您提到您将 blob 从一个存储帐户复制到另一个。Windows Azure 中的复制 Blob 操作（即从一个存储帐户到另一个）保留源 Blob 类型。这似乎是 CloudBerry 资源管理器中的一个错误。几天前我写了一篇关于将虚拟机从一个订阅移动到另一个订阅的博客文章（[http://gauravmantri.com/2012/07/04/how-to-move-windows-azure-virtual-machines-from-one- subscription-to-another/](http://gauravmantri.com/2012/07/04/how-to-move-windows-azure-virtual-machines-from-one-subscription-to-another/) )，它有一些示例代码和其他有用的信息，用于跨存储帐户复制 blob。你可能想看看那个。HTH。

# grails-plugin - Grails spring-security-ldap 插件不起作用

> ID：12851766
> 
> 赞同：1
> 
> 时间：2012-10-12T03:25:29.140
> 
> 标签：grails-plugin

我正在尝试将 Grails spring-security-ldap 插件用于我的 Grails 2.0.1 应用程序的 LDAP 身份验证。我按照这个插件的说明进行操作。现在如何启动登录页面？

我应该从 spring-secuity-core 插件运行 s2-quickstart 来生成用户/角色吗？

# jquery - 创建上标 jqeryui 按钮

> ID：12851767
> 
> 赞同：2
> 
> 时间：2012-10-12T03:25:29.423
> 
> 标签：jquery, jquery-ui, jquery-ui-button

我正在尝试在 jquery ui 按钮中复制文本中的上标图标。我已经尝试了几个组合，但一切都搞砸了按钮。它将在 buttonset() 中不正确地对齐。

css

```
.superscript{float: left; font-size:xx-small; vertical-align:top;} 
.floatleft{ float: left;} 
```

js

```
$("<a/>",{
href : "#",
html : '<span class="floatleft">x</span><span class="superscript">2</span>',
}).button(); 
```

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T03:27:08.630

为什么不直接使用 HTML`<sup>`标签而不是 span？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T03:31:10.280

在你的 CSS 中，如果你给`float: left;`它影响，`vertical-align: top;`因为，`vertical-align`只能给内联元素，当你`float`，它变成一个块级元素。

CSS 中的小改动。

```
.superscript {font-size: xx-small; vertical-align: top;} 
.floatleft {float: left;} 
```

### 那应该行得通。[小提琴](http://jsfiddle.net/UThnc/1/)。

# java - Java (Eclipse) 项目的安装程序设置

> ID：12851779
> 
> 赞同：2
> 
> 时间：2012-10-12T03:26:22.840
> 
> 标签：java, windows, linux, installation

目前我正在开发一个基于 Java 的项目，后端使用 MySQL 数据库。我需要为我的项目创建一个设置。哪个安装程序合适？我需要为**Windows 和 Linux 平台创建一个通用的安装程序设置。**

**附加：**我尝试过 InstallJammer，但它非常复杂，并且相关的论坛已关闭。

你会为我的项目推荐什么安装程序？请避免为我已经引用过的不同安装程序提供教程。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T03:42:01.403

创建一个文件夹结构，如

```
app
 |
 |-- lib
 |    `- <jar files>
 |
 |-- bin
 |    |- app.jar
 |    |- app.sh
 |    `- app.bat
 |
 `-- README 
```

你的 app.sh 看起来像

```
#you need to fix class path, a relative path will cause issue when running from a diff PWD
java -cp .:../lib/jar1.jar:../lib/jar2.jar -jar app.jar 
```

你的 app.bat 看起来像

```
#you need to fix class path, a relative path will cause issue when running from a diff PWD
java -cp .;../lib/jar1.jar;../lib/jar2.jar -jar app.jar 
```

要执行它，`cd bin`请根据您的系统运行 shell 或 bat 脚本。

# c# - 在 FileWatcher 中更改事件触发时

> ID：12851786
> 
> 赞同：0
> 
> 时间：2012-10-12T03:27:17.157
> 
> 标签：c#

我正在使用`FileWatcher`监视 xml 文件以跟踪更改。我只想在文件内容更改、文件重命名甚至删除时触发一些方法。

订阅`Changed`事件就够了？

我还需要订阅其他活动吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T03:41:59.267

为了监视您想要的所有操作，您必须监听所有事件：创建、更改、删​​除、更新。

这是示例：

```
public void init() {

    FileSystemWatcher watcher = new FileSystemWatcher();
    watcher.Path = "path/to/file";

    watcher.NotifyFilter = NotifyFilters.LastAccess
            | NotifyFilters.LastWrite | NotifyFilters.FileName
            | NotifyFilters.DirectoryName;
    // Only watch text files.
    watcher.Filter = "*.txt";

    // Add event handlers.
    watcher.Changed += new FileSystemEventHandler(OnChanged);
    watcher.Created += new FileSystemEventHandler(OnChanged);
    watcher.Deleted += new FileSystemEventHandler(OnChanged);
    watcher.Renamed += new RenamedEventHandler(OnRenamed);

    // Begin watching.
    watcher.EnableRaisingEvents = true;

}

// Define the event handlers.
private static void OnChanged(object source, FileSystemEventArgs e) {
    // Specify what is done when a file is changed, created, or deleted.        
}

private static void OnRenamed(object source, RenamedEventArgs e) {
    // Specify what is done when a file is renamed.     
} 
```

# python - 从字符串中删除数字

> ID：12851791
> 
> 赞同：164
> 
> 时间：2012-10-12T03:27:57.187
> 
> 标签：python, string

如何从字符串中删除数字？

* * *

## 回答 #1

> 赞同：243
> 
> 时间：2012-10-12T03:34:40.873

这对你的情况有用吗？

```
>>> s = '12abcd405'
>>> result = ''.join([i for i in s if not i.isdigit()])
>>> result
'abcd' 
```

这利用了列表推导，这里发生的事情类似于这个结构：

```
no_digits = []
# Iterate through the string, adding non-numbers to the no_digits list
for i in s:
    if not i.isdigit():
        no_digits.append(i)

# Now join all elements of the list with '', 
# which puts all of the characters together.
result = ''.join(no_digits) 
```

正如@AshwiniChaudhary 和@KirkStrauser 指出的那样，您实际上不需要在单行中使用括号，使括号内的部分成为生成器表达式（比列表理解更有效）。即使这不符合您的作业要求，您最终也应该阅读它:)：

```
>>> s = '12abcd405'
>>> result = ''.join(i for i in s if not i.isdigit())
>>> result
'abcd' 
```

* * *

## 回答 #2

> 赞同：115
> 
> 时间：2012-10-12T09:46:58.250

而且，只是把它混在一起，是经常被遗忘的`str.translate`，它比循环/正则表达式工作得快得多：

对于 Python 2：

```
from string import digits

s = 'abc123def456ghi789zero0'
res = s.translate(None, digits)
# 'abcdefghizero' 
```

对于 Python 3：

```
from string import digits

s = 'abc123def456ghi789zero0'
remove_digits = str.maketrans('', '', digits)
res = s.translate(remove_digits)
# 'abcdefghizero' 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-10-12T04:19:57.733

不确定您的老师是否允许您使用过滤器，但是...

```
filter(lambda x: x.isalpha(), "a1a2a3s3d4f5fg6h") 
```

返回-

```
'aaasdffgh' 
```

比循环更有效...

**例子：**

```
for i in range(10):
  a.replace(str(i),'') 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-12T03:44:09.227

那这个呢：

```
out_string = filter(lambda c: not c.isdigit(), in_string) 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-10-12T04:21:25.890

只有几个（其他人建议了其中一些）

方法一：

```
''.join(i for i in myStr if not i.isdigit()) 
```

方法二：

```
def removeDigits(s):
    answer = []
    for char in s:
        if not char.isdigit():
            answer.append(char)
    return ''.join(answer) 
```

方法三：

```
''.join(filter(lambda x: not x.isdigit(), mystr)) 
```

方法四：

```
nums = set(map(int, range(10)))
''.join(i for i in mystr if i not in nums) 
```

方法五：

```
''.join(i for i in mystr if ord(i) not in range(48, 58)) 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-10-12T04:09:32.413

说 st 是您未格式化的字符串，然后运行

```
st_nodigits=''.join(i for i in st if i.isalpha()) 
```

正如刚才提到的。但我猜你需要一些非常简单的东西，所以说**s**是你的字符串，而**st_res**是一个没有数字的字符串，那么这是你的代码

```
l = ['0','1','2','3','4','5','6','7','8','9']
st_res=""
for ch in s:
 if ch not in l:
  st_res+=ch 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-12T03:34:06.923

我很想使用正则表达式来实现这一点，但因为你只能使用列表、循环、函数等。

这是我想出的：

```
stringWithNumbers="I have 10 bananas for my 5 monkeys!"
stringWithoutNumbers=''.join(c if c not in map(str,range(0,10)) else "" for c in stringWithNumbers)
print(stringWithoutNumbers) #I have  bananas for my  monkeys! 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-12T03:34:49.267

如果我正确理解您的问题，一种方法是将字符串分解为字符，然后使用循环检查该字符串中的每个字符，无论它是字符串还是数字，然后如果字符串将其保存在变量中，然后循环一次完成后，显示给用户

# css - 为什么我不能减小此文本的行高？

> ID：12851792
> 
> 赞同：65
> 
> 时间：2012-10-12T03:28:15.207
> 
> 标签：css, em

[http://jsfiddle.net/mJxn4/](http://jsfiddle.net/mJxn4/)

`<em>`这很奇怪：我在标签中包含了几行文本。无论我做什么，将值降低`line-height`到 17px 以下都没有效果。我可以将它`line-height` *提高*到大于 17px 并且它会适用，但我不能让它低于 17px。

有问题的CSS是：

```
#others .item em {
    font-size: 13px;
    line-height: 17px;
} 
```

尝试将行高调整为更高和更低，并在每次更改后运行更新的小提琴，你会明白我的意思。

为什么会这样？`line-height`在 CSS 中的其他任何地方都指定了否，因此没有任何内容可以覆盖它。无论如何不可能是这样，因为我*在同一个 selector*`line-height`中调整up 和 down ，因此应用更高的值是没有意义的，但会覆盖更低的值。

 ** * *

## 回答 #1

> 赞同：107
> 
> 时间：2012-10-12T03:35:18.893

因为`em`标签是内联的，它的行高不能低于它的父级`div`。

例如，如果您将父级的 line-height 设置为 10px，那么您也可以将`em`tag 的 line-height 降低到 10px。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2017-06-19T11:49:44.260

为了让 line-height 属性起作用，div 的 display 属性应该等于 block

```
.app-button-label{
    line-height: 20px;
    display: block;
 } 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-04-28T05:17:18.230

我在移动视图中遇到了 div 的这个问题 - 行高太大，行高不起作用！我设法通过添加“显示：块”使其工作，根据此处[的建议：为什么 CSS 属性“行高”不能让我在 Chrome 中制作紧凑的行间距？](https://stackoverflow.com/questions/7424867/why-isnt-the-css-property-line-height-not-letting-me-make-really-tight-line-s)

希望这可以帮助其他人将来面临同样的问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T03:35:12.230

您似乎`normalized css`在 jsfiddle 中使用选项 -**这相当于重置 CSS 规则**- ala [http://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

您可以重置重置，也可以在确实需要时使用其他重置。

有关更多详细信息，请参见此处：

[http://sixrevisions.com/css/a-comprehensive-guide-to-css-resets/](http://sixrevisions.com/css/a-comprehensive-guide-to-css-resets/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T05:26:12.190

**最好的方法是使用 css 重置。**

**编写自己的或使用流行的，例如**

[http://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2015-03-25T12:52:02.467

最简单的方法是指定具有更高优先级的行高，例如你可以这样写： line-height: 14px !important;

如果它仍然不起作用，请在您想降低行高（内联 css）并放入正文 css 的地方设置高优先级。记住高优先级（！important;），因为它会覆盖任何其他未知的 css规则。

希望这可以帮助

艾哈迈德*

# rrdtool - 设置 RRD 删除粒度

> ID：12851795
> 
> 赞同：0
> 
> 时间：2012-10-12T03:28:54.493
> 
> 标签：rrdtool, munin

我们目前通过 munin 使用 RRDtool 来对我们的服务进行趋势分析。我们希望保留比目前更多的数据，也就是说，我们不希望在数据超过一周后删除插页式点。我找不到可以传递给 RRDtool 来执行此操作的标志。

我们知道这会增加存储要求，但我们想决定有多少数据太多，而不是为我们做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T14:21:08.843

您可以使用 rrdtool resize 来修改 RRA 的长度

# java - (Java) 使用嵌套循环

> ID：12851798
> 
> 赞同：1
> 
> 时间：2012-10-12T03:29:20.367
> 
> 标签：java, loops, for-loop

我的[分配指令](http://media.orvsd.org/FLVS/backup-ap_computer_science_a_v9_gs_-20120821-1900/course_files/flvs/educator_apcsa_v9_gs/module05/rtfmod05/5.05_AssignmentInstructionsDiceProbability.pdf)是“滚动” 2 个骰子并得到总和，然后根据用户想要掷骰子的次数找到总和出现的概率。我必须使用嵌套循环，并且我不能为每个骰子组合使用单独的循环（我还没有这样做）。我不允许在此作业中使用数组。

> 编写一个程序来模拟掷一对 11 面骰子，并确定掷骰子的每种可能组合的次数百分比。
> 
> 1.  在 Mod05 Assignments 文件夹中创建一个名为 5.05 Random Dice 的新项目。
> 2.  在新创建的项目文件夹中创建一个名为 DiceProbability 的类。
> 3.  要求用户输入掷骰子的次数。
> 4.  计算每个骰子组合的概率。（您可能想从更熟悉的六面骰子开始。）
> 5.  将结果整齐地打印在两列中

我需要帮助找出我放入第二个“for”循环的内容。很抱歉整数列表和 if 语句的混乱。代码未完成。

```
import java.util.Random;
import java.util.Scanner;
public class DiceProbability
{
public static void main(String[] args)
{
    Scanner in = new Scanner(System.in);
    Random randNum = new Random();

    int count2 = 0;
    int count3 = 0;
    int count4 = 0;
    int count5 = 0;
    int count6 = 0;
    int count7 = 0;
    int count8 = 0;
    int count9 = 0;
    int count10 = 0;
    int count11= 0;
    int count12= 0;
    int count13 = 0;
    int count14 = 0;
    int count15 = 0;
    int count16 = 0;
    int count17 = 0;
    int count18 = 0;
    int count19 = 0;
    int count20 = 0;
    int count21 = 0;
    int count22 = 0;
    int die1 = 0, die2 = 0;
    int rolls = 0;
    int actualDiceSum;
    double probabilityOfDice = 0.0;

    System.out.print("Number of Rolls: ");
    rolls = in.nextInt();

    for(int timesRolled = 0; timesRolled < rolls; timesRolled++)
        {
        die1 = randNum.nextInt(12);
        die2 = randNum.nextInt(12);
        actualDiceSum = die1 + die2;
        for()
        {
            if(actualDiceSum == 2){
            count2++;
            probabilityOfDice = count2 / rolls;
            }
            else if(actualDiceSum == 3){
            count3++;
            probabilityOfDice = count3 / rolls;
            }
            else if(actualDiceSum == 4){
            count4++;
            probabilityOfDice = count4 / rolls;
            }
            else if(actualDiceSum == 5){
            count5++;
            probabilityOfDice = count5 / rolls;
            }
            else if(actualDiceSum == 6){
            count6++;
            probabilityOfDice = count6 / rolls;
            }
            else if(actualDiceSum == 7){
            count7++;
            probabilityOfDice = count7 / rolls;
            }
            else if(actualDiceSum == 8){
            count8++;
            probabilityOfDice = count8 / rolls;
            }
            else if(actualDiceSum == 9){
            count9++;
            probabilityOfDice = count9 / rolls;
            }
            else if(actualDiceSum == 10){
            count10++;
            probabilityOfDice = count10 / rolls;
            }
            else if(actualDiceSum == 11){
            count11++;
            probabilityOfDice = count11 / rolls;
            }
            else if(actualDiceSum == 12){
            count12++;
            probabilityOfDice = count12 / rolls;
            }
            else if(actualDiceSum == 13){
            count13++;
            probabilityOfDice = count13 / rolls;
            }
            else if(actualDiceSum == 14){
            count14++;
            probabilityOfDice = count14 / rolls;
            }
            else if(actualDiceSum == 15){
            count15++;
            probabilityOfDice = count15 / rolls;
            }
            else if(actualDiceSum == 16){
            count16++;
            probabilityOfDice = count16 / rolls;
            }
            else if(actualDiceSum == 17){
            count17++;
            probabilityOfDice = count17 / rolls;
            }
            else if(actualDiceSum == 18){
            count18++;
            probabilityOfDice = count18 / rolls;
            }
            else if(actualDiceSum == 19){
            count19++;
            probabilityOfDice = count19 / rolls;
            }
            else if(actualDiceSum == 20){
            count20++;
            probabilityOfDice = count20 / rolls;
            }
            else if(actualDiceSum == 21){
            count21++;
            probabilityOfDice = count21 / rolls;
            }
            else if(actualDiceSum == 22){
            count22++;
            probabilityOfDice = count22 / rolls;
           }
        }
    }

    System.out.println("Sum of Dice \t\t Probability");
    System.out.println("2's\t\t" + probabilityOfDice + "%");
    System.out.println("3's\t\t" + probabilityOfDice + "%");
    System.out.println("4's\t\t" + probabilityOfDice + "%");
    System.out.println("5's\t\t" + probabilityOfDice + "%");
    System.out.println("6's\t\t" + probabilityOfDice + "%");
    System.out.println("7's\t\t" + probabilityOfDice + "%");
    System.out.println("8's\t\t" + probabilityOfDice + "%");
    System.out.println("9's\t\t" + probabilityOfDice + "%");
    System.out.println("10's\t\t" + probabilityOfDice + "%");
    System.out.println("11's\t\t" + probabilityOfDice + "%");
    System.out.println("12's\t\t" + probabilityOfDice + "%");
    System.out.println("13's\t\t" + probabilityOfDice + "%");
    System.out.println("14's\t\t" + probabilityOfDice + "%");
    System.out.println("15's\t\t" + probabilityOfDice + "%");
    System.out.println("16's\t\t" + probabilityOfDice + "%");
    System.out.println("17's\t\t" + probabilityOfDice + "%");
    System.out.println("18's\t\t" + probabilityOfDice + "%");
    System.out.println("19's\t\t" + probabilityOfDice + "%");
    System.out.println("20's\t\t" + probabilityOfDice + "%");
    System.out.println("21's\t\t" + probabilityOfDice + "%");
    System.out.println("22's\t\t" + probabilityOfDice + "%");
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T03:50:59.530

我认为您需要使用二维数组，如下所示：

```
int rolls = 0;
System.out.print("Number of Rolls: ");
rolls = in.nextInt();

int[][] numAndOccuranceCount= new int[11][2]; //sum will be between 2 -12

//initialize your array
for(int indx=0; indx<11;indx++){
   numAndOccuranceCount[indx] = new int[]{indx+2,0);
} 

for(int timesRolled = 0; timesRolled < rolls; timesRolled++){
    die1 = randNum.nextInt(12);
    die2 = randNum.nextInt(12);
    actualDiceSum = die1 + die2;

    for(int indx=0; indx<11;indx++){
       if(actualDiceSum == numAndOccuranceCount[i][0]){
          numAndOccuranceCount[indx][1] = numAndOccuranceCount[indx][1]+1;
          break;
       }
    }
 }

 double proabability = 0.0;
 //compute and print the probablity as below:
  for(int indx=0; indx<11;indx++){
     proabability = numAndOccuranceCount[indx][1]/rolls;
     System.out.println("Probability of "+ numAndOccuranceCount[indx][0] +" = "+proabability);
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T04:31:48.870

我对你的代码有一些评论。

根据说明，您总结 dice1 和 dice2 不是正确的方法，因为 1 + 5 = 2 + 4 = 3 + 3 但它们是不同的。所以我们必须根据组合而不是总和来计算可能性。

这是我的代码：

DTO类：

```
public class DiceCombination {
    private int dice1;
    private int dice2;

    public DiceCombination(int dice1, int dice2) {
        this.dice1 = dice1;
        this.dice2 = dice2;
    }
    /* (non-Javadoc)
     * @see java.lang.Object#toString()
     */
    @Override
    public String toString() {
        return "Combination of [dice " + dice1 + " and dice " + dice2 + "]";
    }
    /* (non-Javadoc)
     * @see java.lang.Object#hashCode()
     */
    @Override
    public int hashCode() {
    final int prime = 31;
    if(dice1 < dice2) {
        return prime*dice1 + dice2;
    }
    else {
        return prime*dice2 + dice1;
    }
}
    /* (non-Javadoc)
     * @see java.lang.Object#equals(java.lang.Object)
     */
    @Override
    public boolean equals(Object obj) {
        if (this == obj)
            return true;
        if (obj == null)
            return false;
        if (getClass() != obj.getClass())
            return false;
        DiceCombination other = (DiceCombination) obj;
        if ((dice1 == other.dice1 && dice2 == other.dice2) || (dice1 == other.dice2 && dice2 == other.dice1))
            return true;
        return false;
    }

} 
```

主类：

```
public class Posibility {

 public static void main(String[] args) {
    Map<DiceCombination,Integer> possibility = new HashMap<DiceCombination,Integer>();
    int dice1;
    int dice2;
    int roll = 400; // value here should be inputted from user, you may change any value you want
    Random randNum = new Random();

    for(int i = 0; i < roll; i ++) {
        dice1 = randNum.nextInt(12);
        dice2 = randNum.nextInt(12);
        DiceCombination dc = new DiceCombination(dice1, dice2);
        if(possibility.containsKey(dc)) {
            possibility.put(dc , possibility.get(dc) + 1); 
        }
        else {
            possibility.put(dc, 1);
        }
    }
    for(DiceCombination key : possibility.keySet()) {
        System.out.println("Result: " + key.toString() + " is " + ((double)possibility.get(key)/roll));
    }
 }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T04:50:42.397

我同意@Thinhbk 的观点，即这个问题在技术上是用组合而不是总和来表达的，但链接中的图片显示总和，所以我相信总和是意图。您编写的组合方法令人印象深刻，但对于似乎是 Java 入门课程的课程来说太高级了。我喜欢图片显示 IDE 是 BlueJ 的方式。带我回去。无论如何，赋值描述并没有指定内部 for 循环的需要。我看到@user1713336 的编辑在您的（user1713336's）第一个循环之前不允许使用数组，您可以添加：

```
int[] count = new int[23];
//0 is the default value for each
//int[22] is the 23rd value in the array 
```

您的整个内部 for 循环可以替换为：

```
count[actualDiceSum]++; 
```

然后在 for 循环中打印时，打印`count[i]/rolls*100`并从`int i`可能的最低值 2 开始。我怀疑你接下来会学习数组，所以我想展示它是如何完成的。

由于您不能使用数组，因此您的`countx = 0;`行就可以了。不要实时计算概率。这是不必要的，并且添加了许多代码行，只需跟踪每个值的滚动次数，因此：

```
if(actualDiceSum == 2)
    count2++;
else if(actualDiceSum == 3)
    count3++;
//etc 
```

`{}`请注意，如果只有一行代码与 if 或 while 语句相关联，如图所示，则不需要使用。然后以与以前相同的方式打印`count2/rolls*100`（乘以 100，因为图片显示的是百分比，而不是比率）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T04:52:22.800

好吧，根据我的说法，您不需要第二个 for 循环。每次掷骰子时，您都会计算总和并根据总和增加计数。

您需要使用单独的变量来计算每个总和的概率。

例如

```
Probability of count2 = (count2/number of rolls);
Probability of count3 = (count2/number of rolls); 
```

对计数概率使用单独的变量

试试这个代码

```
import java.util.Random;
import java.util.Scanner;
public class DiceProbability
{
public static void main(String[] args)
{
    Scanner in = new Scanner(System.in);
    Random randNum = new Random();
int count2 = 0;
int count3 = 0;
int count4 = 0;
int count5 = 0;
int count6 = 0;
int count7 = 0;
int count8 = 0;
int count9 = 0;
int count10 = 0;
int count11= 0;
int count12= 0;
int count13 = 0;
int count14 = 0;
int count15 = 0;
int count16 = 0;
int count17 = 0;
int count18 = 0;
int count19 = 0;
int count20 = 0;
int count21 = 0;
int count22 = 0;
int die1 = 0, die2 = 0;
int rolls = 0;
int actualDiceSum;
double probabilityOfDice = 0.0;

System.out.print("Number of Rolls: ");
rolls = in.nextInt();

for(int timesRolled = 0; timesRolled < rolls; timesRolled++)
    {
    die1 = randNum.nextInt(12);
    die2 = randNum.nextInt(12);
    actualDiceSum = die1 + die2;

        if(actualDiceSum == 2){
        count2++;

        }
        else if(actualDiceSum == 3){
        count3++;

        }
        else if(actualDiceSum == 4){
        count4++;

        }
        else if(actualDiceSum == 5){
        count5++;

        }
        else if(actualDiceSum == 6){
        count6++;

        }
        else if(actualDiceSum == 7){
        count7++;

        }
        else if(actualDiceSum == 8){
        count8++;

        }
        else if(actualDiceSum == 9){
        count9++;

        }
        else if(actualDiceSum == 10){
        count10++;

        }
        else if(actualDiceSum == 11){
        count11++;

        }
        else if(actualDiceSum == 12){
        count12++;

        }
        else if(actualDiceSum == 13){
        count13++;

        }
        else if(actualDiceSum == 14){
        count14++;

        }
        else if(actualDiceSum == 15){
        count15++;

        }
        else if(actualDiceSum == 16){
        count16++;

        }
        else if(actualDiceSum == 17){
        count17++;

        }
        else if(actualDiceSum == 18){
        count18++;

        }
        else if(actualDiceSum == 19){
        count19++;

        }
        else if(actualDiceSum == 20){
        count20++;

        }
        else if(actualDiceSum == 21){
        count21++;

        }
        else if(actualDiceSum == 22){
        count22++;

       }
    }
}

System.out.println("Sum of Dice \t\t Probability");
System.out.println("2's\t\t" + count2/rolls + "%");
System.out.println("3's\t\t" + count3/rolls + "%");
System.out.println("4's\t\t" + count4/rolls + "%");
System.out.println("5's\t\t" + count5/rolls + "%");
//and so on...
}
} 
```

# c++ - 函数的 C++ 显式实例化

> ID：12851803
> 
> 赞同：0
> 
> 时间：2012-10-12T03:30:15.373
> 
> 标签：c++, function, instantiation, explicit

我正在编写自己的库以获得乐趣，但我遇到了一个问题。这是我的代码。

```
#include "utility/memory.h"
using namespace libnate::utility;

template <class T>
void copy( T *src, T *dest, size_t size ) {
        for( size_t i = 0; i < size; ++i ) {
                dest[i] = src[i];
        }
}

template void copy( int *, int *, size_t );

template <class T>
size_t resize_array( T *&array, size_t internal_size ) {
        size_t nu_size = internal_size * 2 + 1;

        T *tmp_array = new T[nu_size];
        copy<T> ( array, tmp_array, internal_size );
        delete [] array;

        array = tmp_array;
        return nu_size;
}

template size_t resize_array( int *&, size_t ); 
```

G++ 在我的复制调用中抱怨某种模棱两可的调用。

这是输出。

```
njackson@glados:~/libnate$ make
cd src && make
make[1]: Entering directory `/home/njackson/libnate/src'
g++ -c -I../include memory.cpp  
memory.cpp: In function ‘size_t resize_array(T*&, size_t) [with T = int, size_t = unsigned int]’:
memory.cpp:25:46:   instantiated from here
memory.cpp:18:2: error: call of overloaded ‘copy(int*&, int*&, size_t&)’ is ambiguous
memory.cpp:18:2: note: candidates are:
memory.cpp:5:6: note: void copy(T*, T*, size_t) [with T = int, size_t = unsigned int]
../include/utility/memory.h:11:6: note: void libnate::utility::copy(T*, T*, size_t) [with T = int, size_t = unsigned int]
make[1]: *** [memory.o] Error 1
make[1]: Leaving directory `/home/njackson/libnate/src'
make: *** [_] Error 2 
```

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T03:42:23.007

从错误消息中可以清楚地看出，命名空间`libnate::utility`包含一个名为`copy`. 由于您正在定义自己`using namespace libnate::utility`的代码，并且在代码的开头有一个语句，因此您会遇到名称冲突。

我建议删除该`using namespace`声明。保留它可能会导致在您的代码中引入大量其他符号，将来可能会导致进一步的名称冲突。

如果您真的想保留该语句，请使用`::copy`引用您自己的复制功能版本，或者将其重命名为`mycopy`或类似的名称。

* * *

在单独的说明中，您对`copy`函数的显式实例化（无论如何都不会导致问题）实际上并不是必需的。`resize_array`使用您的`copy`函数，因此将自动导致所需的实例化。

# javascript - 更改自执行函数的上下文

> ID：12851805
> 
> 赞同：0
> 
> 时间：2012-10-12T03:30:30.303
> 
> 标签：javascript, singleton

此代码直接复制自：

[http://www.bennadel.com/blog/2264-Changing-The-Execution-Context-Of-Your-Self-Executing-Function-Blocks-In-JavaScript.htm](http://www.bennadel.com/blog/2264-Changing-The-Execution-Context-Of-Your-Self-Executing-Function-Blocks-In-JavaScript.htm)

```
// Set the singleton value to the return value of the self-
// executing function block.
var singleton = (function(){

    // Declare a private variable.
    var message = "Stop playing with your context!";

    this.getMessage = function(){

        return( message );

    };

    // Return this object reference.
    return( this );

}).call( {} );

// alert the singleton message.
alert( "Message:", singleton.getMessage()); 
```

我的想法是我可以使用它来更好地包含我的程序中的变量和函数。

但是，当我尝试在 JSfiddle 中运行代码时：

[http://jsfiddle.net/xSKHh/](http://jsfiddle.net/xSKHh/)

它不返回消息。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T03:34:48.317

您在警报中缺少一个加号而不是逗号。试试这样：

```
alert( "Message:" + singleton.getMessage()); 
```

# r - 如何告诉 R 从相关计算中删除异常值？

> ID：12851811
> 
> 赞同：5
> 
> 时间：2012-10-12T03:31:18.300
> 
> 标签：r, correlation, outliers

在计算相关性时，如何告诉 R 删除异常值？我从散点图中确定了一个潜在的异常值，并试图比较有无此值的相关性。这是介绍统计课程；我只是在使用这些数据来开始了解相关性和异常值。

我的数据如下所示：

```
"Australia" 35.2 31794.13
"Austria" 29.1 33699.6
"Canada" 32.6 33375.5
"CzechRepublic" 25.4 20538.5
"Denmark" 24.7 33972.62
... 
```

以此类推，26行数据。我试图找到第一个和第二个数字的相关性。

我*确实*读过这个[问题](https://stackoverflow.com/questions/4666590/remove-outliers-from-correlation-coefficient-calculation)，但是，我只是想删除一个点，而不是百分比。R中有一个命令可以做到这一点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T03:40:24.303

你不能用基本`cor()`功能做到这一点，但你可以

*   使用来自鲁棒统计包之一的相关函数，例如`robCov()`来自[鲁棒包](http://cran.r-package.org/package=robust)

*   使用`winsorize()`函数（例如来自[robustHD](http://cran.r-package.org/package=robustHD)的函数）来处理您的数据

这是第二种方法的快速示例：

```
R> set.seed(42)
R> x <- rnorm(100)
R> y <- rnorm(100)
R> cor(x,y)             # correlation of two unrelated series: almost zero
[1] 0.0312798 
```

我们用一个大的异常值“污染”了一个点：

```
R> x[50] <- y[50] <- 10
R> cor(x,y)             # bigger correlation due to one bad data point
[1] 0.534996 
```

所以让我们进行winsorize：

```
R> x <- robustHD::winsorize(x)
R> y <- robustHD::winsorize(y)
R> cor(x,y)
[1] 0.106519
R> 
```

我们又回到了一个相关性较低的衡量标准。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T03:51:40.463

如果您对两个向量应用相同的条件表达式，则可以排除该“点”。

```
cor( DF[2][ DF[2] > 100 ],   # items in 2nd column excluded based on their values
   DF[3][ DF[2] > 100 ] )  # items in 3rd col excluded based on the 2nd col values 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T12:59:10.183

将所有数据放在一个数据框中是有意义的，因此更容易处理。我总是喜欢通过在我的数据框中使用额外的列（在本例中为 B）来跟踪异常值。

```
df       <-  data.frame(A=c(1,2,3,4,5), B=c(T,T,T,F,T)) 
```

然后在进入良好的分析内容之前过滤掉我不想要的数据。

```
myFilter <-  with(df, B==T)
df[myFilter, ] 
```

这样，您就不会忘记异常值，并且可以按照您认为合适的方式管理它们。

编辑：

改进我上面的答案，您还可以使用条件来定义异常值。

```
df  <-  data.frame(A=c(1,2,15,1,2))
df$B<-  with(df, A > 2)
subset(df, B == F) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-12T10:05:20.517

在下文中，我从假设（我在您的字里行间读到）您已经从视觉上识别出单个异常值（即，从图表中）。从您有限的数据集中，根据它的值可能很容易识别该点。如果你有更多的数据点，你可以使用这样的东西。

```
tmp <- qqnorm(bi$bias.index)
qqline(bi$bias.index)
(X <- identify(tmp, , labels=rownames(bi)))
qqnorm(bi$bias.index[-X])
qqline(bi$bias.index[-X]) 
```

请注意，我只是复制了自己的代码，因为我无法使用您提供的示例代码。之前也检查`?identify`一下。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-13T22:36:24.883

您在这里得到了一些很棒且内容丰富的答案，但它们似乎是对更复杂问题的答案。如果我错了，请纠正我，但听起来你只想手动删除一个观察结果。指定其索引的负数将删除它。

假设您的数据框是 A，列是 V1 和 V2。

```
WithAus <- cor(A$V1,A$V2)
WithoutAus <- cor(A$V1[-1],a$V2[-1]) 
```

或者您可以删除多个索引。假设 1、5 和 20

```
ToRemove <- c(-1,-5,-20)
WithAus <- cor(A$V1,A$V2)
WithoutAus <- cor(A$V1[ToRemove],a$V2[ToRemove]) 
```

# logging - 如何在 Dart 中导入日志库？

> ID：12851815
> 
> 赞同：3
> 
> 时间：2012-10-12T03:31:42.597
> 
> 标签：logging, import, dart

如果我运行：

> ```
> #!/home/jim/dart/dart-sdk/bin/dart
> 
> #import('记录');
> 
> 记录器 log = new Logger('');
> 
> 无效的主要（）{
>     log.warn("你好，世界！\n");
> }
> ```

我得到：

> 无法打开文件：/home/jim/Code/dart/test/logging'file:///home/jim/Code/dart/test/test-log.dart'：错误：第 3 行 pos 1：库处理程序失败

我需要安装记录器库吗？我在哪里可以找到它？我如何导入它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T03:50:26.007

使用 pub，Dart 的包管理器。

在您的 pubspec.yaml 中，确保您在依赖项部分中有一行用于登录：

```
name: mylib
description: My Library
dependencies:
  logging: any 
```

然后`pub install`在编辑器（工具->Pub 安装）或命令行 ( `./dart/dart-sdk/bin/pub install`)中运行

`package:`然后您可以使用该方案导入日志记录：

```
import 'package:logging/logging.dart'; 
```

# .htaccess - 如何进行多次重定向

> ID：12851818
> 
> 赞同：2
> 
> 时间：2012-10-12T03:32:01.873
> 
> 标签：.htaccess, redirect, hyperlink

现在我正在更新我的网站，我想将所有链接更改为非扩展链接`example.com/test.php`，例如`example.com/test`. 我发现这个解决方案放在 .htaccess 文件中：

```
RewriteCond %{THE_REQUEST} ^GET\ /(([^/?]*/)*[^/?]+)\.php

RewriteRule ^.+\.php$ /%1 [L,R=301] 
```

但同时我需要对位于我网站较低级别的链接进行重定向，`example.com/level/test2.php`例如`example.com/test2.php`. 我应该在 .htaccess 中写什么来将我的文件从较低级别重定向到较高级别并同时删除 .php 扩展名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T03:59:45.440

您需要分开您的分组并反向引用第二个，而不是全部：

```
RewriteCond %{THE_REQUEST} ^GET\ /([^/?]*/)*([^/?]+)\.php
RewriteRule ^.+\.php$ /%2 [L,R=301] 
```

本质上，`/(([^/?]*/)*[^/?]+)\.php`改为`([^/?]*/)*([^/?]+)`，然后在规则的目标中`%1`改为。`%2`

# linux - 如何使用 TUI 制作 Linux 程序

> ID：12851824
> 
> 赞同：3
> 
> 时间：2012-10-12T03:32:30.007
> 
> 标签：linux, tui, text-based

我想制作一个带有基于[文本的用户界面](https://en.wikipedia.org/wiki/Text-based_user_interface)的 Linux 程序。解决此问题的最佳方法是什么？在搜索互联网后，我发现了 curses 和 ncurses 库。两者之间有什么区别，如果有的话，哪个更好（或者有更好的选择）？我更喜欢 C 但愿意使用其他语言。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T05:28:34.310

该`curses`库是一个旧的 ATT unix 东西，它的等效免费库是[ncurses](http://www.gnu.org/software/ncurses/)，可用于 Linux 和其他系统。

您还可以使用 GNU [readline](http://cnswww.cns.cwru.edu/php/chet/readline/rltop.html)库，特别是如果您想要一个单行但可编辑和可完成的界面。

# android - Android 通过 ksoap2 2.5.8 通过 Https 发送 SOAP 对象

> ID：12851825
> 
> 赞同：3
> 
> 时间：2012-10-12T03:32:44.133
> 
> 标签：android, soap, https, ksoap2

我第一次在这里发布问题，所以请不要介意我在这里的错误。

我目前正在制作一个从`.asmx`Web 服务获取和发送信息的 android 应用程序。`ksoap2`图书馆一切顺利，我正在使用`HttpTransportSE`它来调用网络服务。所以现在我要做的是使用**`HttpsTransportSE`**通过 Https 调用 Web 服务。我有**`java.security.cert.certpathvalidatorexception trustanchor for certpath not found`**例外。

我有服务器证书**`.pfx , .jks`和`.bks`** 格式。我的问题是我该怎么做才能让我**`HttpsTransportSE`**成功？我已经阅读了使用自定义的文章，`SSLSocketFactory`但仍然不确定如何在我的应用程序中实现它。

提前感谢您的任何建议/建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:35:08.550

您的 ksoap 库没有 HttpsTransportSE 类。您可以下载最新版本的 ksoap 库“ksoap2-android-assembly-2.6.5-jar-with-dependencies”。它内置了 HttpsTransportSE。

# clojure - 如何在只有 pom.xml 文件的项目中启动 clojure repl

> ID：12851826
> 
> 赞同：2
> 
> 时间：2012-10-12T03:32:50.113
> 
> 标签：clojure

在混合了 java 和 clojure 代码的项目中，例如[https://github.com/mikera/clisk](https://github.com/mikera/clisk)

如何启动 clojure repl 来测试代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T11:45:52.840

将[clojure maven 插件](https://github.com/talios/clojure-maven-plugin)添加到 pom.xml 中。然后`mvn compile`和`mvn clojure:repl`. 该项目的 Java 编译类将在类路径中可用，因此您可以从 REPL 中导入它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T04:29:45.953

您可以创建一个启动 nRepl 或常规 repl 的脚本。它需要知道将正确的东西放入类路径中。可能有一个 Maven 插件可以做到这一点，虽然我还没有听说过。

另一种选择是直接在您的应用程序中启动 repl 之类的东西。

您还可以对应用程序进行编程以重新加载代码和/或运行单元测试。我有一个 Clojure+Java 应用程序。我有使用某些系统属性启动时出现的菜单选项。菜单选项重置应用程序的状态并重新加载所有 Clojure 代码。还有一个菜单选项可以执行此操作，然后运行单元测试，它会弹出一个 JOptionPane 消息框来显示结果。

# osx-mountain-lion - vmc安装山狮问题

> ID：12851829
> 
> 赞同：0
> 
> 时间：2012-10-12T03:33:38.767
> 
> 标签：osx-mountain-lion, cloud-foundry, vmc

我开始使用 Cloudfoundry 但即使安装**vmc**我也无法做到，我试过了

```
sudo gem install vmc 
```

并且终端只是沉默，没有错误或报告或任何东西。

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T23:38:04.777

Right, updating the gem will work.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:01:46.967

尝试等待几分钟，具体取决于您的下载速度。

更改我的 vmc 版本时，我遇到了同样的问题。大概用了4分钟就没事了。

# regex - 流数据的高效（基本）正则表达式实现

> ID：12851837
> 
> 赞同：9
> 
> 时间：2012-10-12T03:34:47.393
> 
> 标签：regex, stream, dfa, nfa

我正在寻找一种对数据流进行操作的正则表达式匹配的实现——即，它有一个 API，允许用户一次传入一个字符并在字符流上找到匹配项时报告到目前为止看到。只需要非常基本（经典）的正则表达式，因此基于 DFA/NFA 的实现似乎非常适合该问题。

基于可以在单次线性扫描中使用 DFA/NFA 进行正则表达式匹配的事实，似乎应该可以实现流式处理。

要求：

*   在执行匹配之前，库不应*尝试*等到完整的字符串被读取。我真正拥有的数据是流式传输的；没有办法知道有多少数据会到达，不可能向前或向后搜索。

*   为几个特殊情况实现特定的流匹配不是一种选择，因为我事先不知道用户可能想要寻找什么模式。

*   语言：可从 C/C++ 使用

出于好奇，我的用例如下：我有一个在完整系统模拟器内拦截内存写入的系统，我想有一种方法来识别与正则表达式匹配的内存写入（例如，可以使用它来找到系统中将 URL 写入内存的点）。

我已经找到：

[在 Stream 上应用正则表达式？](https://stackoverflow.com/questions/1962220/apply-a-regex-on-stream)

[将正则表达式应用于 Java I/O 流](https://stackoverflow.com/questions/716927/applying-a-regular-expression-to-a-java-i-o-stream)

[Code Guru - 使用 .NET Framework 构建正则表达式流搜索](http://www.codeguru.com/csharp/csharp/cs_data/searching/article.php/c14689/Building-a-Regular-Expression-Stream-Search-with-the-NET-Framework.htm)

但是所有这些都试图先将流转换为字符串，然后再使用常用的正则表达式库。

我的另一个想法是修改[RE2 库](http://code.google.com/p/re2/)，但[根据作者的说法，](https://groups.google.com/d/msg/re2-dev/6M-nj-MFHMY/B1u8BwN44LgJ)它是围绕整个字符串同时在内存中的假设构建的。

如果没有可用的东西，那么我可以开始重新发明这个轮子以满足我自己的需求的不愉快的道路，但如果我可以避免它，我真的宁愿不这样做。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-28T18:32:44.743

我有你要找的东西：[https ://github.com/agentzh/sregex](https://github.com/agentzh/sregex) [http://agentzh.org/misc/slides/yapc-na-2013-sregex.pdf](http://agentzh.org/misc/slides/yapc-na-2013-sregex.pdf) ‎</p>

如果你知道 javascript（或想要一个 javascript 版本），我有一个练习可以让你使用现有的 RE 实现轻松地做到这一点：[https ://github.com/dhruvbird/regexp-js](https://github.com/dhruvbird/regexp-js)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-25T09:11:10.713

英特尔已经发布了完全符合需要的[hyperscan库。](https://github.com/01org/hyperscan)[这里](https://stackoverflow.com/a/37432420/1849861)是它的简要概述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T23:31:33.360

看看[Brian W. Kernighan 和 Rob Pike](http://cm.bell-labs.com/cm/cs/tpop/grep.c)的一个旧的 grep 实现。它们在缓冲区中处理文本流，并应用于简单的正则表达式规则，甚至不是 BRE。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T03:22:07.677

不幸的是，对此的“答案”是没有预先构建的库来执行此操作。相反，我选择了以下折衷方案：我实现了一个简单的字符串匹配器（不支持 RE），它使用每个流和每个搜索字符串的单个计数器来保持状态，该计数器跟踪在该流中匹配了多少个搜索字符串的字符。它随着每个正确的字符而增加，并在找到不匹配的字符时重置为零。这很快并且不需要太多的内存开销。

对于更复杂的搜索，我只是将所有流转储到磁盘，然后使用传统工具搜索它们。它非常慢，但幸运的是，我们的大多数用例都可以通过简单的字符串匹配来解决。

# jquery - 在 Ajax Jquery 函数中添加 if else 函数

> ID：12851839
> 
> 赞同：3
> 
> 时间：2012-10-12T03:34:58.207
> 
> 标签：jquery, ajax

是否可以像这样在我的 JS 中添加其他其他功能：？

如果响应==成功重定向到主页
如果响应==失败重定向到失败

```
$.ajax({
    type: "POST",
    url: action,
    data: form_data,
    success: function(response) {
        if (response == 'success') 
            window.location.replace("home");
        else 
            $("#message").html("<div class='error_log'><p class='error'>Invalid username and/or password.</p></div>");
    }
});​ 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-12T03:36:53.680

```
success: function(response) {
    if (response == 'success') 
        window.location.replace("home");
    else if (response == "failed") 
        window.location.replace("failed");
    else 
        $("#message").html("<div class='error_log'><p class='error'>Invalid username and/or password.</p></div>");
}​ 
```

或者你的意思是：

```
$.ajax({
    type: "POST",
    url: action,
    data: form_data,
    error: function() {
        window.location.replace("Failed");
    },
    success: function(response) {
        if (response == 'success') 
            window.location.replace("home");
        else 
            $("#message").html("<div class='error_log'><p class='error'>Invalid username and/or password.</p></div>");
    }
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T03:38:53.620

用这个：

```
$.ajax({
    type: "POST",
    url: action,
    data: form_data,
    success: function(response)
    {
        if (response == 'success')
            window.location.replace("home");
        else if (response == 'failure')
        {
            $("#message").html("<div class='error_log'><p class='error'>Invalid username and/or password.</p></div>");
            window.location.replace("failed");
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T03:45:30.570

你也可以做这样的事情

```
$.ajax( "example.php" )
   .done(function(msg) { 
      alert("success");
      if(msg == "success") ...
      else ... 
   })
   .fail(function() { alert("error"); }); 
```

请记住，这仅适用于 >jQuery-1.8

# python - 使用 Gtk.TreeDragSource.drag_data_get()

> ID：12851840
> 
> 赞同：0
> 
> 时间：2012-10-12T03:35:06.783
> 
> 标签：python, gtk, pygobject

我有一个简单的 Gtk.TreeView 和一个 Gtk.ListStore 作为模型的四列。我希望能够在 TreeView 中拖放行并跟踪发生的行插入、更改和删除，以便我可以实现撤消/重做以进行拖放操作。我正在使用 PyGObject 3 和 Python 3.2。

我认为使用 Gtk.TreeDragSource 和 Gtk.TreeDragDest 接口下的方法将完全适合我的需要，在我的 drag_data_get 处理程序中使用 Gtk.TreeDragSource.drag_data_get() 和在我的 drag_data_received 中使用 Gtk.TreeDragDest.drag_data_received() 或 Gtk.tree_get_row_drag_data()处理程序。基本上，我尝试过的看起来像这样：

```
def drag_data_get(self, tv, context, selection, target_id, time):
    treeselection = tv.get_selection()
    model, my_iter = treeselection.get_selected()
    path = model.get_path(my_iter)
    result = Gtk.TreeDragSource.drag_data_get(path, selection)

def drag_data_received(self, tv, context, x, y, selection,  info, time):
    result, model, row = Gtk.tree_get_row_drag_data(selection)
    my_iter = model.get_iter(row)
    data = [model.get_value(my_iter, i) for i in range(model.get_n_columns())]
    drop_info = tv.get_dest_row_at_pos(x, y)
    if drop_info:
        path, position = drop_info
        my_iter = model.get_iter(path)
        if (position == Gtk.TreeViewDropPosition.BEFORE
            or position == Gtk.TreeViewDropPosition.INTO_OR_BEFORE):
            model.insert_before(my_iter, [data])
        else:
            model.insert_after(my_iter, [data])
    else:
        model.append([data])    
    if context.get_actions() == Gdk.DragAction.MOVE|Gdk.DragAction.DEFAULT:
        context.finish(True, True, time)
    return 
```

这非常失败——当 Python 调用 Gtk.TreeDragSource.drag_data_get() 时，Python 崩溃并且我的程序窗口迅速消失。我什至没有到达 drag_data_received 处理程序。谁能给我一些示例代码来展示这些使用 TreeDragSource 和 TreeDragDest 接口的方法如何工作？非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T15:07:48.177

`Gtk.tree_set_row_drag_data(selection, model, path)`使用而不是`result = Gtk.TreeDragSource.drag_data_get(path, selection)` 因为您仍然使用它会不起作用`Gtk.tree_get_row_drag_data(selection)`吗？

# html - Ruby Slim - 您如何使用 rails 助手或变量定义元素的类？

> ID：12851843
> 
> 赞同：35
> 
> 时间：2012-10-12T03:35:40.060
> 
> 标签：html, css, ruby-on-rails, ruby-on-rails-3, slim-lang

在 rails slim (http://slim-lang.com/) 中，使用类名“sample”定义新 div 的语法如下：

```
 .sample
      = "Content goes here" 
```

这将创建：

```
 <div class="sample">
      Content goes here
 </div> 
```

我想根据rails的助手、变量或其他东西来定义一个div的类。例如，在rails中：

```
 <div class="sample #{@variable.name}">
   Content goes here
 </div> 
```

我不知道如何在苗条中做到这一点：

```
 .sample #what else goes here?
   Content goes here 
```

有谁知道怎么做？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-10-12T03:47:38.990

怎么样

```
div[class="sample #{@variable.name}"] 
```

甚至

```
div class=["sample", @variable.name] 
```

或者

```
.sample *{:class => [@variable1.name, @variable2.name]} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-05-08T17:34:12.487

您可以使用括号、花括号或仅使用空格

```
.first-class(class="second-class-#{ruby_call}")

.first-class *{class: "second-class-#{ruby_call}"}

.first-class class="second-class-#{ruby_call}" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-02T15:20:36.607

对于超薄模板，我一直在使用括号表示法。您可以使用等号 ("=") 在同一行添加其他内容，但请务必包含一个空格：

```
h1 class=("sample #{@variable.name}") = @variable.to_s 
```

# jquery - 事件处理程序 jQuery

> ID：12851845
> 
> 赞同：0
> 
> 时间：2012-10-12T03:35:47.147
> 
> 标签：jquery, events

我在下面有这段代码：

```
$("button").click(function(){
    $("button").off('click');  //detach click for the button below
} 
```

然后在`<body>`标签中我在下面有这个按钮

```
<button>PLAY ANIMATION</button> 
```

所以问题是我在哪里可以把这段代码放在下面？

```
$("button").bind('click'); // In other words I want to 
//reattach the click event that I just disabled at some later point 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T03:58:54.043

**工作演示** [http://jsfiddle.net/2NNGv/1/](http://jsfiddle.net/2NNGv/1/)

Also you can do `.is(":animated")` check!

[jQuery ajax, wait until beforeSend animation finishes](https://stackoverflow.com/questions/5212949/jquery-ajax-wait-until-beforesend-animation-finishes)

Hope it fits the cause `:)` and gives you idea!

**Sample code**

```
$("button").click(function() {

    $(this).prop('disabled', 'disabled');

    $('div').animate({
        marginLeft: "-200",
        marginTop: "-200",
        width: "400",
        height: "400"
        // Comment the line below to see difference
        ,
        opacity: 0.5
    }, 2000).animate({
        marginLeft: -150,
        marginTop: -150,
        width: 300,
        height: 300
        // Comment the line below to see difference
        ,
        opacity: 1
    }, 2000).show(function() {
        $("button").removeAttr('disabled');
    });

});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T03:54:20.183

用于`.promise()`等待动画完成，稍后附加点击事件。

看这里的例子：http: [//jsfiddle.net/RASG/gkveX/](http://jsfiddle.net/RASG/gkveX/)

> 返回一个 Promise 对象以观察绑定到集合的特定类型的所有操作（无论是否排队）都已完成。

此处的文档：http: [//api.jquery.com/promise/](http://api.jquery.com/promise/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T03:50:17.737

您是否尝试过绑定和取消绑定？

```
$('#foo').bind('click', function() {
  alert('The quick brown fox jumps over the lazy dog.');
});

// will NOT work
$('#foo').unbind('click', function() {
  alert('The quick brown fox jumps over the lazy dog.');
}); 
```

这是来源[http://api.jquery.com/unbind/](http://api.jquery.com/unbind/)

您可以绑定按钮，然后在动画期间取消绑定，然后再次绑定以启用点击事件。

# process - 上传到 Android Marketplace 时遇到问题 - “服务器无法处理您的 apk。再试一次。” 对这个问题有任何支持吗？

> ID：12851847
> 
> 赞同：2
> 
> 时间：2012-10-12T03:36:12.540
> 
> 标签：process, upload, apk

我尝试将新的 apk 文件上传到 Android 市场，但我继续收到以下错误。“服务器无法处理您的 apk。再试一次。”

这是一个持续存在的问题。我已经研究过这个问题，它似乎是一个常见问题，应该很容易解决。但消息“Android Marketplace 错误：“服务器无法处理您的 apk。再试一次。” 是神秘的，让我无处可去。

在所有其他市场，Apple、Barnes & Noble 和 Amazon，我可以直接与支持人员交谈并获得满意的答复。Android 市场就像狂野的西部，每个人都靠自己。

我已在 Google Groups 中发布此消息，但没有得到答复。似乎很多人都遇到了类似的问题并没有解决这个问题。以下是一些示例响应：

“祝你好运。你会需要它的。” “同样的问题 - 这已经持续了一年多，仍然没有解决” 有没有人遇到过这个问题并解决了？

我可以联系谁来解决这个问题？

我对如何解决这个问题没有更多的想法。

# c# - WebBrowser 控件在 C# 中第二次不起作用

> ID：12851849
> 
> 赞同：1
> 
> 时间：2012-10-12T03:36:25.413
> 
> 标签：c#, .net, web, controls

我有一个通过应用程序与网站交互的项目。

这个想法是，当我点击一个特定的 web 元素时，会出现第二个表单。它包含两个文本框，输入值并回车后，它将托盘值粘贴到网页上的托盘ID，然后按“+”按钮提交网页。它第一次起作用。但是，网页提交后。尽管我关闭了第二个表单并通过单击该 Web 元素再次打开它，但我不能再做同样的事情了。

调试时，系统确实实现了回车，并完成了其中的所有代码，包括将值粘贴到托盘ID中并单击“+”按钮。但是，它只是在第一次工作，在网络提交后它不再工作了

我不知道为什么？也许我在某些地方错了，我在 C# 编程方面没有太多经验。

这是它的图像

[http://i182.photobucket.com/albums/x38/DNK90/app_zpsd55a4065.jpg](http://i182.photobucket.com/albums/x38/DNK90/app_zpsd55a4065.jpg)

提交网页后，第二个表单仍然存在，所以我认为这可能是问题所在。

这是我的代码：

表格 1：我只是发布显示表格 2 并从网络获取元素的部分

```
private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
    {
        pallet_element = webBrowser1.Document.GetElementById("pallet_id");
        weighing_element = webBrowser1.Document.GetElementById("weighing_auto");
        add_new_element = webBrowser1.Document.GetElementById("btnNewWNR");
        no_Of_WNR = webBrowser1.Document.GetElementById("noOfWNR");

        if (no_Of_WNR != null)
        {
            // number of row
            int no = Convert.ToInt32(no_Of_WNR.GetAttribute("value"));
            // button that saves a row
            //save_element = webBrowser1.Document.GetElementById("btnSaveWNR" + no);
            // gross weight of a row
            gross_element = webBrowser1.Document.GetElementById("wnr_gross_weight_" + no);
        }

        if (pallet_element != null && weighing_element != null && add_new_element != null && gross_element != null)
        {
            frm2 = new Form2(pallet_element, weighing_element, add_new_element, gross_element);

            pallet_element.Click += new HtmlElementEventHandler(OpenWeigh);
        }            
    }

    public void OpenWeigh(object sender, HtmlElementEventArgs e)
    {            
        // setting the COM port connection
        frm2.SettingRS232(count);
        count++;
        frm2.ShowDialog();            
    } 
```

表格 2：

```
private void txtPallet_KeyPress(object sender, KeyPressEventArgs e)
    {           
        if (e.KeyChar == '\r')
        {
            if (this.pallet_element != null && this.weighing_element != null && add_new_element != null)
            {                    
                // althought the flow comming and get through of below rows
                // but nothing happened on the web after the first time run successfully

                // set value in the txtPallet into pallet_id
                this.pallet_element.InnerText = txtPallet.Text;
                this.weighing_element.InnerText = txtWeight.Text;
                add_new_element.InvokeMember("click");
                this.gross_element.InnerText = txtWeight.Text;                   
            }
        }
    } 
```

# ruby-on-rails - sprockets 是否缓存视图/erb 文件？

> ID：12851850
> 
> 赞同：0
> 
> 时间：2012-10-12T03:36:47.083
> 
> 标签：ruby-on-rails, asset-pipeline, sprockets

我在 s3 上部署我的所有资产，并在部署时预编译它们。理论上链轮在运行时不应该做任何事情。

但是，当我调试缓存时，我不断看到一些 sprockets 活动：缓存未命中：sprockets/dbc38e827b53b65e2f3840f004685b57 (0.7ms) 缓存命中：sprockets/bd37d101b41cff7ff25f3a3492a8cd6e (0.1ms)

有任何想法吗？

Rails 是否有可能使用 sprockets 来解析资产路径，并且每次解析新路径时都会缓存它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T06:31:48.320

确保在生产环境中禁用资产管道。在你的内部`production.rb`：

```
# Compress JavaScripts and CSS
config.assets.compress = true

# Don't fallback to asset pipeline if a precompiled asset is missed
config.assets.compile = false 
```

查看[Rails 资产管道指南](http://guides.rubyonrails.org/asset_pipeline.html#upgrading-from-old-versions-of-rails)`production.rb`中的示例。

# sql - 使用像素检测正方形

> ID：12851854
> 
> 赞同：0
> 
> 时间：2012-10-12T03:37:24.710
> 
> 标签：sql, postgresql, graphics, relational-algebra

那么这是一个有趣的问题。假设我在一个 sql db 上有一个表，其中填充了 x,y 坐标（正象限）并且每个都有一个颜色值，即模式看起来像`<x , y, color>`。任务是检测具有相同颜色的最大可能正方形。我已经尝试解决这个问题好几个小时了，但似乎无法解决这个问题。

我不是在寻找解决方案，而是在寻找提示。

请注意，这一切都必须发生在 SQL 中，主要使用各种连接、分组和聚合操作。一些示例代码会很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T03:50:26.360

假设您的问题空间很小，假设为 10x10（x 介于 1 和 10 之间），那么一种天真的方法：

1.  BotLeft：CROSS JOIN 两组 10 个数字（比如`Numbers`表格的子集），为您提供所有可能方块的左下角（100 分）
2.  TopRight: CROSS JOIN 相同的两组再次获得所有分数
3.  Squares：两者之间的 INNER JOIN，按 BotLeft 必须在左侧和 TopRight 下方的位置进行过滤
4.  给定所有可能的正方形，通过最终连接到 (x,y) 坐标落在正方形边界内的数据来测试每个正方形，例如`left <= x <= right`. 这会产生一个巨大的集合
5.  使用 GROUP BY（左下，右上）折叠前一组并测试分组子集中的不同颜色，例如`HAVING COUNT(DISTINCT color) = 1`。
6.  如果您的数据集没有完全填充，那么您还需要测试`COUNT`每个正方形中的像素数 = 找到的数据点数

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T04:27:32.847

如果你只要求角落是相同的颜色，你可以做

```
top left corner
join top right corner on equal x and color and greater y
join bottom left corner on equal y and color and greater x
join bottom right on equal x, y and color
order by (x1-x2)*(y1-x2) descending
limit 1 
```

当然，限制 1 不会对性能产生太大影响，因为无论如何它都必须生成所有正方形。

您可以（极大地）通过添加 (color,x,y) 和 (color,y,x) 索引来提高速度。执行计划很可能会结束：

```
(1) full scan for all top left corners
(2) dependent index scan for all top right corners
(3) dependent index scan for all bottom left corners
(4) dependent index scan for the bottom right corner expecting at most one match
(5) (partial) table sort of the entire set of squares (cannot use indexes) 
```

# c# - 限制下载文件大小 WebBrowser C# WINFORMS

> ID：12851855
> 
> 赞同：0
> 
> 时间：2012-10-12T03:37:39.653
> 
> 标签：c#, winforms, user-interface, browser, webbrowser-control

我正在用 WINFORMS C# 构建一个网络浏览器。我想将下载文件大小限制在 25mb 以下。有什么方法可以访问检测到下载时弹出的下载文件对话框字段。我应该改用 webclient 吗？请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T04:36:50.700

不容易，但您可以通过[实施自定义下载管理器来做到这一点](http://msdn.microsoft.com/en-us/library/aa753618%28v=vs.85%29.aspx)

示例实现在[The most complete C# Webbrowser wrapper control中完成](http://www.codeproject.com/Articles/18935/The-most-complete-C-Webbrowser-wrapper-control)

```
m_csexwbCOMLib.FileDownloadEx += new 
  ComUtilitiesLib._IUtilManEvents_FileDownloadExEventHandler(dl_FileDownloadEx);

void dl_FileDownloadEx(int dlUID, string sURL, string sFilename, 
     string sExt, string sFileSize, string sExtraHeaders, string sRedirURL, 
     ref bool SendProgressEvents, ref bool bStopDownload, ref string sPathToSave) 
```

# c# - 注册表 API 32 与 64 位，以及 VS2010 设置

> ID：12851856
> 
> 赞同：0
> 
> 时间：2012-10-12T03:37:40.937
> 
> 标签：c#, .net, c#-4.0, registry, installation

我们有一个 .net 4.0 应用程序，它使用了几个注册表项和一个 vs2010 设置和部署项目，它创建了这些键 @ setup

问题 - （默认）RegEdit 显示密钥存在，但 .net 代码在 OpenSubKey 上返回 null 且路径正确（包括 \ ）

事实证明，这是由于每个 [KB305097的 32 位和 64 位注册表](http://support.microsoft.com/kb/305097 "KB305097")

这需要代码，例如

```
RegistryKey someFunc()
{
    var r64o32 = RegistryKey.OpenBaseKey(Microsoft.Win32.RegistryHive.LocalMachine, 
                Environment.Is64BitOperatingSystem  ? RegistryView.Registry64 :    
           RegistryView.Registry32);

    return r64o32.OpenSubKey(regKey);
} 
```

但是我无法测试上面的代码，因为我没有可用的 32 位机器，但该应用程序也需要在 32 位机器上可用

所以寻求帮助 -

1.  上述方法对 64/32 位都正确吗？
2.  vs2010 安装项目创建的安装程序是否在基于机器的 64/32 注册表上安装定义的注册表项？
3.  还有其他问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T04:14:05.737

无论您如何编译应用程序，您都不需要在`RegistryView`使用时进行特殊的大小写，这要求注册表的特定视图`OpenBaseKey`

```
RegistryKey r = Microsoft.Win32.RegistryKey.OpenBaseKey(RegistryHive.LocalMachine, 
                                                        RegistryView.Registry64); 
```

还要记住，如果你在 32 位机器上，那么 OpenBaseKey 将回退到 Registry32

# algorithm - 以下算法的时间复杂度是多少？

> ID：12851857
> 
> 赞同：0
> 
> 时间：2012-10-12T03:37:41.967
> 
> 标签：algorithm, time-complexity

```
for (int i = 0; i < n; i++ ) {
    for (int j = 0; j < n; j++ {
        Simple Statement
    }
}
for (int k = 0; i < n; k++ {
    Simple Statement
    Simple Statement
    Simple Statement
    Simple Statement
    Simple Statement
}
    Simple Statement*25 
```

对于嵌套循环，我发现时间复杂度为 1 (for int i = 0) + n + 1 (for i < n) + n (for i++) * [ 1 (for int j = 0 ) + 1 + n (对于 j < n) + n (对于 j++) ] + n (对于简单语句)。这是 (1+n+1+n) *(1+1+n+n)+n = (2 + 2n)* (2+2n)+n = 4n^2 + 9n + 4。

对于以下循环，我发现时间复杂度为 1（对于 int k = 0）+ n + 1（对于 i < n）+ n（对于 k++）+ 5n（对于五个简单语句）。这是 1+n+1+n+5n = 7n+2。对于接下来的 25 个简单语句，我发现它们的时间复杂度为 25。

所以总时间复杂度是 4n^2 + 8n + 4 + 5n + 2 + 25 = 4n^2 + 16n + 31，但是，我的书说时间复杂度是 n^2 + 5n + 25。

我做错了什么？

编辑：现在很明显，这本书只讲述了简单语句的时间复杂*度*。我想现在我的问题是这样的（就像在标题中一样）：算法的时间复杂度是多少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T03:42:00.687

你的书只计算*被*`SimpleStatements`执行的人数。

# node.js - NodeJS 中的 HTTPS 请求

> ID：12851858
> 
> 赞同：54
> 
> 时间：2012-10-12T03:37:58.690
> 
> 标签：node.js, rest, https, openshift

我正在尝试编写一个 NodeJS 应用程序，它将使用 https 包中的请求方法与 OpenShift REST API 对话。这是代码：

```
var https = require('https');

var options = {
  host: 'openshift.redhat.com',
  port: 443,
  path: '/broker/rest/api',
  method: 'GET'
};

var req = https.request(options, function(res) {
  console.log(res.statusCode);
  res.on('data', function(d) {
    process.stdout.write(d);
  });
});
req.end();

req.on('error', function(e) {
  console.error(e);
}); 
```

但这给了我一个错误（返回状态代码 500）。当我在命令行上使用 curl 做同样的事情时，

```
curl -k -X GET https://openshift.redhat.com/broker/rest/api 
```

我从服务器得到正确的响应。

代码有什么问题吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-10-12T04:09:14.233

比较什么标头 curl 和 node 发送，我发现添加：

```
headers: {
    accept: '*/*'
} 
```

修复`options`它。

* * *

要查看 curl 发送的标头，您可以使用`-v`参数。
`curl -vIX GET https://openshift.redhat.com/broker/rest/api`

在节点中，就`console.log(req._headers)`在`req.end()`.

* * *

*快速提示：您可以使用`https.get()`, 而不是`https.request()`. 它会将方法设置为`GET`，并为您调用`req.end()`。*

# ios - Default-568h@2x.png 是不够的；无法点击屏幕底部

> ID：12851859
> 
> 赞同：3
> 
> 时间：2012-10-12T03:38:15.317
> 
> 标签：ios, iphone-5

> **可能重复：**
> [iphone 5 模拟器 - 无法点击屏幕底部？](https://stackoverflow.com/questions/12678864/iphone-5-simulator-cannot-click-on-bottom-of-screen)

我在我的项目中添加了一个 Default-568h@2x.png，导致信箱区域消失。但是，对于这个项目，我发现这还不够：我无法点击屏幕底部的任何像素，并且全屏动画会使该区域变黑。

信箱区域消失了，屏幕按预期扩大了：

![屏幕以正确的大小显示](../Images/73cd873d6e4803e071907361d079b69b.png)

我发现**前 960 像素以下的所有内容都无法点击**。此外，当动画正在进行时，我会在 960 像素下看到一个实心黑条，如下所示：

![全屏动画，显示无响应区域](../Images/402bcfdd1735137fa98e83f36a826d7d.png)

但是，当动画结束时，黑条再次消失。但是该区域仍然不可点击。

这个项目早于故事板，我无法升级它以使用这个版本的故事板。

有谁知道出了什么问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-12T03:46:39.497

当 UIWindow 具有旧的 3.5 英寸尺寸时，就会发生这种情况。（它也会使 UIActionSheets 显示在屏幕底部的上方）。

我仍然不确定发生了什么，但它似乎会发生，特别是如果 UIWindow 在 xib 中。

我们采取的修复它的步骤：

1.  从 xib 中删除 UIWindow（如果存在）。
2.  添加到 -application:didFinishLaunchingWithOptions:

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

或者，您可以将 xib 中 UIWindow 的 Simulated Metrics 大小设置为 4 英寸屏幕。即使在 3.5 英寸的屏幕上，这似乎也有效。

![UIWindow 的模拟指标设置为](../Images/2eab1f9db454b59b1c69cfc666f471d1.png)

# c++ - 通过返回指向地图的指针来访问地图c ++

> ID：12851860
> 
> 赞同：1
> 
> 时间：2012-10-12T03:38:21.840
> 
> 标签：c++, class, pointers, map

我正在尝试在一个类中创建一个函数，该函数返回一个指向映射的 const 指针。然后在另一个类中，我可以有一个函数，可以接受常量指针，声明迭代器，并将映射的内容复制到向量中。这个映射类到矢量类是练习的要求。我以前从未对映射做过 ptrs，而且我没有编译器喜欢的语法。这是我在 Map 中的函数声明：

```
class WordCount
{
    public:
        WordCount();
        ~WordCount();
        void word_insert(std::string clean_word);
        void print_all();
        const std::map<std::string, int> * get_map();

    private:
        std::map<std::string, int> m_word_counts;
        std::map<std::string, int>::iterator m_it;
        std::pair<std::map<std::string, int>::iterator, bool> m_ret; 
}; 
```

但是当我尝试这样定义函数（或我尝试过的许多变体）时，我得到一个转换错误。下面需要改变什么？

```
const map<string, int > * WordCount::get_map()
{
    const map<string, int > *ptr = m_word_counts;
    return ptr;
} 
```

--

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T03:41:49.853

我只会返回一个参考。

```
const map<string, int > & WordCount::get_map()
{
    const map<string, int > &ptr = m_word_counts;
    return ptr;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T03:41:10.577

```
const map<string, int > *ptr = &m_word_counts; 
```

# java - 为什么当我运行我的程序时，我总是在基于随机的模拟中得到相同的值

> ID：12851866
> 
> 赞同：-1
> 
> 时间：2012-10-12T03:39:08.453
> 
> 标签：java, random

我正在尝试为队列编写模拟，尽管我不明白为什么我总是在最后得到 0.0 减去请求的所有结果。这对我来说合乎逻辑，但我不太明白为什么它总是在 waitTime 变量修改中减去自己这是我的结果：服务数字 322 总等待时间 0.0 平均等待时间：0.0

我想知道为什么每次生成和运行程序时，我都没有得到真正的值。换句话说，它编译得很好，我只是没有看到我犯的错误

```
import java.util.*;

public class IndividualQueues {

final static int simulationTimeLimit = 3600;
final static double arrivalChance = 1.0/10;
final static int numberOfServers = 5;

public static void main(String[] args) {
    Queue queueArray[] = new Queue[numberOfServers];
    int[] serviceTime = new int[numberOfServers];
    Random checkArrival = new Random();
    double totalWaitTime = 0;
    int requests = 0;
    int serviceTimer = 0;
    int waitTime = 0;
    Queue <Integer> tempQueue = new Queue<Integer>();

      for (int i=0;i<numberOfServers;i++){
       queueArray[i]= tempQueue;
      }

   for(int seconds = 1;seconds<= simulationTimeLimit;seconds++) {
       if(seconds <= simulationTimeLimit) {
           if(checkArrival.nextDouble() <= arrivalChance) {
               requests++;
                       serviceTimer = checkArrival.nextInt(49) + 10;
                       int min = queueArray[0].size();
                       for(int i = 1;i<queueArray.length;i++) {
                           int temp = queueArray[i].size();
                           if(min >temp)
                           min = temp;
                       }
                       queueArray[min].enqueue(seconds);
                       serviceTime[min] = serviceTimer;
               }

               for(int j = 0;j<serviceTime.length;j++) {
                   if(serviceTime[j] >0) {
                       serviceTime[j]--;
                     //  System.out.println(serviceTime[j]);
                   }
                   else if(serviceTime[j]== 0 && queueArray[j].size() >0) {
                       System.out.println("You got here");
                       int dequeue = (Integer)queueArray[j].dequeue();
                       waitTime = seconds - dequeue;
                       totalWaitTime += waitTime;
                   }
               }

           }
   }
   System.out.println("Numbers Served " +requests);
   System.out.println("Total wait time " +totalWaitTime);
   System.out.println("Average wait time: " +(double)totalWaitTime/requests);
}

}

public class Queue<Item> {
private int N;         // number of elements on queue
private Node first;    // beginning of queue
private Node last;     // end of queue

// helper linked list class
private class Node {
    private Item item;
    private Node next;
}

/**
  * Create an empty queue.
  */
 public Queue() {
     first = null;
     last  = null;
     N = 0;
 }

/**
  * Is the queue empty?
  */
  public boolean isEmpty() {
      return first == null;
  }

 /**
  * Return the number of items in the queue.
  */
  public int size() {
     return N;
  }

 /**
   * Return the item least recently added to the queue.
   * @throws java.util.NoSuchElementException if queue is empty.
   */
  public Item peek() {
     if (isEmpty()) throw new NoSuchElementException("Queue underflow");
     return first.item;
   }

 /**
   * Add the item to the queue.
   */
  public void enqueue(Item item) {
      Node oldlast = last;
      last = new Node();
      last.item = item;
      last.next = null;
      if (isEmpty()) first = last;
      else           oldlast.next = last;
      N++;
  }

 /**
   * Remove and return the item on the queue least recently added.
   * @throws java.util.NoSuchElementException if queue is empty.
   */
  public Item dequeue() {
      if (isEmpty()) throw new NoSuchElementException("Queue underflow");
      Item item = first.item;
      first = first.next;
      N--;
      if (isEmpty()) last = null;   // to avoid loitering
      return item;
  }    

 /* *
   * Return string representation.
   */
  public String toString() {
      StringBuilder s = new StringBuilder();
      Node current = first;
      while (current != null)
      {
          s.append(current.item + " ");
          current = current.next;
    }
      return s.toString();
  }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T03:50:17.107

您对数组中的所有队列使用相同的队列

```
Queue <Integer> tempQueue = new Queue<Integer>();
for (int i=0;i<numberOfServers;i++){
    queueArray[i]= tempQueue;
} 
```

您应该在 for 循环中创建每个队列：

```
for (int i=0;i<numberOfServers;i++){
    //I don't know if this works
    //queueArray[i]= new Queue<Integer>();
    //LinkedList implements the Queue interface
    queueArray[i]= new LinkedList<Integer>();
} 
```

# backbone.js - 从backbone.js调用另一个函数获取成功

> ID：12851867
> 
> 赞同：1
> 
> 时间：2012-10-12T03:39:24.930
> 
> 标签：backbone.js

我试图在第一个函数中获取成功时调用另一个函数，但我不断收到未定义的错误。console.log('success') 正在工作。

在视图中：

```
secondFunction: function() {
  console.log('second function called');
},

someFunction: function() {
  someData.fetch({
    success: function(results) {
      console.log('success');
      this.secondFunction();
    }
  });
 }, 
```

当我这样做时很好，但我需要 secondFunction 等到第一个数据成功。

```
secondFunction: function() {
  console.log('second function called');
},

someFunction: function() {
  someData.fetch({
    success: function(results) {
      console.log('success');
    }
  });
  this.secondFunction();
 }, 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T04:01:55.070

尝试：

```
someFunction: function() {
  var self = this;
  someData.fetch({
    success: function(results) {
      console.log('success');
      self.secondFunction();
    }
  });
 }, 
```

注意使用**self**。请记住，您在回调函数中；-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-02T03:28:03.997

你必须绑定这个

`

```
someFunction: function() {
  someData.fetch({
    success: function(results) {
      console.log('success');
      this.secondFunction();
    }.bind(this)
  });
 }, 
```

`

# c# - 如何在非基于网络的应用程序中向 Google Analytics 发送请求

> ID：12851868
> 
> 赞同：3
> 
> 时间：2012-10-12T03:39:33.100
> 
> 标签：c#, winforms, google-analytics

我想在非基于 Web 的应用程序（基于 Windows 的应用程序）中向 Google 分析发送请求？我尝试了以下方法。

```
public string  trackingId = "UA-XXXXXXXX-2";

private void button1_Click(object sender, EventArgs e)
{
    string shopname = "ShopTestng";
    string pagename="Testing_MyApp";
    callAnalyticsmethod2(pagename, shopname);
}

private void callAnalyticsmethod2(string pageName, string shopname)
{
    // create hash code base on pc name 7 user name    
    string visitorId = GetUniqueUserId(); 
    if (string.IsNullOrEmpty(pageName))
        pageName = visitorId;

    string utmGifLocation = "http://www.google-analytics.com/__utm.gif";

    string GifUrl = "utmwv=4.9" +
        "&utmn=" + GetRandomNumber() +
        "&utmp=" + pageName +
        "&utmac=" + trackingId +
        "&utmcc=__utma%3D999.999.999.999.999.1%3B" +
        "&utmvid=" + visitorId;// + "?" +

    string shop = shopname.Replace(" ", "_");
    string addipara = GifUrl+"&utmr=http://" + shop;

    byte[] dataStream = Encoding.UTF8.GetBytes(addipara);

    string request = utmGifLocation;

    WebRequest webRequest = WebRequest.Create(request);
    webRequest.Method = "POST";
    webRequest.ContentType = "application/x-www-form-urlencoded";
    webRequest.ContentLength = dataStream.Length;
    Stream newStream = webRequest.GetRequestStream();
    // Send the data.
    newStream.Write(dataStream, 0, dataStream.Length);
    newStream.Close();
    WebResponse webResponse = webRequest.GetResponse();
    MessageBox.Show((((HttpWebResponse)webResponse).StatusDescription));

    newStream = webResponse.GetResponseStream();
    StreamReader reader = new StreamReader(newStream);
    string responseFromServer = reader.ReadToEnd();
    MessageBox.Show(responseFromServer);

    reader.Close();
    newStream.Close();
    webResponse.Close();
} 
```

根据上面的代码示例

```
MessageBox.Show((((HttpWebResponse)webResponse).StatusDescription)); 
```

行显示为“OK”。但是当我检查谷歌分析时，访问次数并没有增加。这是什么原因？我有什么遗漏或任何其他方式向分析发送请求吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T11:47:18.103

我从 SOF 找到了类似的答案（[原因是来自非 Web 应用程序的 Google Analytics 日志，](https://stackoverflow.com/questions/1846460/cause-google-analytics-log-from-non-web-application-eg-via-webclient)并根据我的场景进行了编辑。

```
 private void analyticsmethod4(string trackingId, string pagename)
    {
        Random rnd = new Random();

        long timestampFirstRun, timestampLastRun, timestampCurrentRun, numberOfRuns;

        // Get the first run time
        timestampFirstRun = DateTime.Now.Ticks;
        timestampLastRun = DateTime.Now.Ticks-5;
        timestampCurrentRun = 45;
        numberOfRuns = 2;

        // Some values we need
        string domainHash = "123456789"; // This can be calcualted for your domain online
        int uniqueVisitorId = rnd.Next(100000000, 999999999); // Random
        string source = "Shop";
        string medium = "medium123";
        string sessionNumber = "1";
        string campaignNumber = "1";
        string culture = Thread.CurrentThread.CurrentCulture.Name;
        string screenRes = Screen.PrimaryScreen.Bounds.Width + "x" + Screen.PrimaryScreen.Bounds.Height;

        string statsRequest = "http://www.google-analytics.com/__utm.gif" +
            "?utmwv=4.6.5" +
            "&utmn=" + rnd.Next(100000000, 999999999) +
        //  "&utmhn=hostname.mydomain.com" +
            "&utmcs=-" +
            "&utmsr=" + screenRes +
            "&utmsc=-" +
            "&utmul=" + culture +
            "&utmje=-" +
            "&utmfl=-" +
            "&utmdt=" + pagename +
            "&utmhid=1943799692" +
            "&utmr=0" +
            "&utmp=" + pagename +
            "&utmac=" +trackingId+ // Account number
            "&utmcc=" +
                "__utma%3D" + domainHash + "." + uniqueVisitorId + "." + timestampFirstRun + "." + timestampLastRun + "." + timestampCurrentRun + "." + numberOfRuns +
                "%3B%2B__utmz%3D" + domainHash + "." + timestampCurrentRun + "." + sessionNumber + "." + campaignNumber + ".utmcsr%3D" + source + "%7Cutmccn%3D(" + medium + ")%7Cutmcmd%3D" + medium + "%7Cutmcct%3D%2Fd31AaOM%3B";

        using (var client = new WebClient())
        {
            client.DownloadData(statsRequest);
            //Stream data = client.OpenRead(statsRequest);
            //StreamReader reader = new StreamReader(data);
            //string s = reader.ReadToEnd();
        }

    } 
```

**我找到了关于 -**

[谷歌分析桌面应用程序](http://tilr.blogspot.com/2012/10/google-analytics-use-google-analytics.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T05:57:36.383

**确保关闭导致分析不记录您自己的请求的过滤器。**

```
// Send a hit to Google Analytics
Random rnd = new Random();
int cookie = rnd.Next(10000000, 99999999);
string statsRequest = "http://www.google-analytics.com/__utm.gif" +
    "?utmwv=4.3" +
    "&utmn=" + rnd.Next(10000) + // Used only to stop browser caching
    "&utmhn=myhost.com" + // Hostname
    //"&utmhid=<random#>" +
    "&utmr=-" + // Referer
    "&utmp=/app/v0.4/DEBUG/Test" + // Requested page
    "&utmac=UA-654321-0" + // Google Analytics ID
    "&utmcc=__utma%3D" + cookie + "3B%2B__utmz%3D" + cookie + "%3B";

using (var client = new WebClient())
{
    client.DownloadData(statsRequest);
} 
```

# html - 黑莓触控板滚动问题

> ID：12851872
> 
> 赞同：0
> 
> 时间：2012-10-12T03:39:54.550
> 
> 标签：html, blackberry, blackberry-webworks

我在使用触控板滚动时遇到问题。下面是我在 WebWorks 焦点导航上尝试使用 pdf 的示例。

```
<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="initial-scale=1.0,width=device-width,user-    
scalable=no,target-densitydpi=device-dpi" />
<style>
.list
{
  width: 100%;
  display: block;
  text-decoration: none;
}
.list:hover
{
  background-color:red;
  color: white;
}
</style>
</head>
<body>
<a class="list" x-blackberry-focusable="true" href="http://www.rim.com">Link to RIM</a>
<a class="list" x-blackberry-focusable="true" href="http://www.blackberry.com">Link to 
BlackBerry</a> 
```

当我尝试使用触控板滚动时，没有任何反应。该链接应该以红色突出显示，但没有任何反应。我有我的 config.xml 并且在其中。

任何帮助/建议将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:17:56.273

您正在使用什么设备/操作系统版本进行测试？我使用运行 7.1.x 的 9900 在浏览器中尝试了上述代码，它按预期工作。

您使用的是哪个版本的 WebWorks SDK？

您是否将以下内容添加到 config.xml 中？

# android - android：将视图添加到膨胀视图

> ID：12851880
> 
> 赞同：2
> 
> 时间：2012-10-12T03:40:55.737
> 
> 标签：android, android-linearlayout, layout-inflater

我想从我的 res/layout 目录中扩充一个布局，并在我的活动类中添加一些视图。

我的布局 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_marginTop="30dip"
    android:layout_height="fill_parent" >

    <Button
        android:id="@+id/reg_button"
        style="@style/simple_button"
        android:onClick="clickButton"
        android:text="@string/reg_button" />

    <!--  I WANT TO PUT CONTENT HERE ! -->

</LinearLayout> 
```

在我的 java 代码中，我尝试扩展上述布局并添加一个带有按钮的线性布局。

```
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    mContext = getApplicationContext();

    //inflate xml
    LinearLayout mainLayout = (LinearLayout)     LayoutInflater.from(getBaseContext()).inflate(R.layout.regions_search, null);

    //Create a new LinearLayout
    LinearLayout newLinear = new LinearLayout(mContext);        
    newLinear.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));

    //create  a new Button
    Button test = new Button(mContext);
    test.setText("My button");

    //first , I add button to the LinearLayout
    newLinear.addView(test);

    //Then, I add layout to the inflated layout
    mainLayout.addView(newLinear);

    //display
    setContentView(mainLayout); 
```

但是 newLinear 视图（及其子视图）没有显示出来。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T04:18:27.220

在你的活动中使用它，

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // display
    setContentView(R.layout.activity_main);

    Context mContext = getApplicationContext();
    LinearLayout mainLayout = (LinearLayout) findViewById(R.id.regions_search);
    // Create a new LinearLayout
    LinearLayout newLinear = new LinearLayout(mContext);
    newLinear.setLayoutParams(new LinearLayout.LayoutParams(
            LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

    // create a new Button
    Button test = new Button(mContext);
    test.setText("My button");

    // first , I add button to the LinearLayout
    newLinear.addView(test);

    // Then, I add layout to the inflated layout
    mainLayout.addView(newLinear);
} 
```

并在你的xml文件（activity_main.xml）中写如下图，

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/regions_search"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_marginTop="30dip" 
android:orientation="vertical">

<Button
    android:id="@+id/reg_button"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:onClick="clickButton"
    android:text="RegButton" />

<!-- I WANT TO PUT CONTENT HERE ! -->

</LinearLayout> 
```

试试这个，它会 100% 工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T03:45:44.377

`LinearLayout`您可以尝试为新的和您添加的添加宽度和高度参数`Button`吗？创建视图时需要这些参数。

像这样。

`newLinear.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T03:52:43.380

test.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT,1f));

注释行

设置内容视图（主布局）；

# ruby - 通过 Homebrew 安装 apple-gcc42 时出现 Curl 错误 404

> ID：12851896
> 
> 赞同：3
> 
> 时间：2012-10-12T03:42:46.420
> 
> 标签：ruby, macos, terminal, rvm, homebrew

我正在按照这些说明[http://www.moncefbelyamani.com/how-to-install-xcode-homebrew-git-rvm-ruby-on-mac/#step-4](http://www.moncefbelyamani.com/how-to-install-xcode-homebrew-git-rvm-ruby-on-mac/#step-4)安装运行 Ruby 1.9 所需的工具.3 在 OS Mountain Lion 上使用 Rails 开发应用程序。

运行线路时

```
brew install autoconf automake apple-gcc42 
```

我明白了

```
curl: (22) The requested URL returned error: 404
Error: Download failed: http://r.research.att.com/tools/gcc-42-5666.3-darwin11.pkg 
```

在过去的十个小时里，我尝试了几次。有没有安装apple-gcc42的替代方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T23:17:51.433

根据另一个用户发布的问题，托管 gcc-42 软件包的 research.att.net 服务器正在停机，该用户正在安装另一个依赖于此下载的公式。只要给它时间。

我昨天晚上 10 点左右 GMT -5 开始收到此错误。

编辑：apple-gcc42 repo 中也报告了该问题：[https](https://github.com/Homebrew/homebrew-dupes/issues/101) ://github.com/Homebrew/homebrew-dupes/issues/101 ，看来最终答案是“等待”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-25T19:41:55.430

`brew install homebrew/versions/gcc48`根据[https://github.com/Homebrew/homebrew/wiki/Custom-GCC-and-cross-compilers](https://github.com/Homebrew/homebrew/wiki/Custom-GCC-and-cross-compilers)，[https://github.com/postmodern/ruby-install#ruby](https://github.com/postmodern/ruby-install#ruby)和[http://www.stok。 ca/blog/2014/08/10/building-ruby-1-8-7-p374-on-osx-mavericks-now-homebrew-has-dropped-apple-gcc42/](http://www.stok.ca/blog/2014/08/10/building-ruby-1-8-7-p374-on-osx-mavericks-now-homebrew-has-dropped-apple-gcc42/)

# java - 在android上多次绘制相同位图的优化？

> ID：12851897
> 
> 赞同：0
> 
> 时间：2012-10-12T03:42:47.263
> 
> 标签：java, android, opengl-es

我有使用平铺绘制的道路：

```
 float sizeW;
    float sizeH;
    if(isTopBottom())
    {
        sizeW = getWidth();
        sizeH = (sizeW / image.getWidth()) * image.getHeight();
    }
    else
    {
        sizeW = getHeight();
        sizeH = (sizeW / image.getWidth()) * image.getHeight();

    }

    int numTiles = isTopBottom() ? (int)Math.ceil(getHeight() / sizeH) :
        (int)Math.ceil(getWidth() / sizeW);

    for(int i = 0; i < numTiles; ++i)
    {
        if(isTopBottom())
        {
            c.drawRotatedScaledBitmap(
                    image,
                    getRect().left + (sizeW / 2.0f),
                    (getRect().top + (sizeH / 2.0f)) + (sizeH * i), 
                    sizeW, sizeH, 0.0f);
        }
        else
        {
            c.drawRotatedScaledBitmap(
                    image,
                    getRect().left + (sizeH / 2.0f) + (sizeH * i),
                    getRect().top + (sizeH / 2.0f), 
                    sizeW, sizeH, (float)Math.PI / 2.0f);
        }

    } 
```

我知道 OpenGL 讨厌纹理绑定。android 是否足够聪明，可以避免这些纹理绑定，或者有没有办法可以明确告诉它我一遍又一遍地绘制同一个位图？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T21:14:42.160

OpenGL 是一个状态机，所以一旦你调用了 bind()，就不需要再调用一个来绘制相同的纹理。

# django - Tastypie 文档生成

> ID：12851898
> 
> 赞同：14
> 
> 时间：2012-10-12T03:43:11.903
> 
> 标签：django, python-sphinx, tastypie, documentation-generation

我正在尝试使用自动文档工具为 Tastypie REST API 生成 API 文档。我尝试了 Tastytool，但它似乎没有显示 API 的结果参数，而是显示模型的列。然后我尝试了 Sphinx 似乎更有希望，因为 Tastypie 支持 Sphinx，但我找不到一个示例来显示在哪里以及如何在代码中为 API 放置注释，并将它们生成到文档中。

任何人都可以分享一些关于正确撰写评论并为基于 Tastypie 的 API 生成 Sphinx 文档的信息或示例？谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-28T15:39:36.800

您可能想看一下[sweetpie-swagger](https://github.com/concentricsky/django-tastypie-swagger)，它使用[Swagger](http://swagger.wordnik.com/)为您的[Tastypie](http://tastypieapi.org) API 生成 /doc/ 页面。

经过一些小的调整（我想这是由于美味派版本的差异，这是必要的），我已经取得了一些成功。

**编辑：**我认为必要的改编（由于 django 版本 < 1.4 和 sweetpie 版本 > 0.9.11）现在合并到了 sweetpie-swagger 的主线分支中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T23:02:20.837

还有[Django Tasty Docs](https://github.com/juanique/django-tastydocs)，它是[Tasty Tools的一部分](https://tastytools.readthedocs.org/en/latest/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T20:59:28.580

也许我完全错过了您的问题的重点，但是如果您只是尝试构建源代码分发附带的文档，那么 docs 目录中有一个 Makefile 可以执行必要的操作。您需要指定目标输出类型，例如 html、json、latex 等。我保留了 django、tastepie 和 slumber 文档的本地副本，因为我将这三者结合使用，并且我`make html`经常使用该选项.

如果我对您要完成的工作有误，也许我们可以澄清一下。

# python - 套接字编程python

> ID：12851908
> 
> 赞同：0
> 
> 时间：2012-10-12T03:44:15.740
> 
> 标签：python, sockets, input, udp, port

客户端如何对用户输入和从服务器接收到的数据做出反应？

我创建了一个 UDP 服务器，它可以处理多个客户端，并且可以对从每个客户端接收到的数据做出反应。到目前为止，客户端只对用户输入做出反应。

客户端是否有可能同时检查特定端口上的用户输入和数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T05:24:30.050

有多种方法可以使用多进程、多线程等来实现这一点。但最适合您的应用程序的是一个“多路复用”所有请求的进程，尽可能多地为每个请求提供服务。它的解决方案是所有编程语言都可用的select()、poll()、epoll()。[在这里](http://en.wikipedia.org/wiki/Select_%28Unix%29)和[这里](http://www.lowtek.com/sockets/select.html)阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T03:52:51.603

考虑使用线程。Python 线程受到限制；在解释器中一次只运行一个线程，但如果一个线程正在等待 I/O（或“睡眠”），那么其他线程可以运行。您仍然需要使用队列和信号量等。请参阅库中的“线程”模块。