# StackOverflow 问答 12873000-12873999

# javascript - 使用 javascript 将某些内容复制到剪贴板

> ID：12873002
> 
> 赞同：1
> 
> 时间：2012-10-13T12:14:30.257
> 
> 标签：javascript, jquery

> **可能重复：**
> [使用 jQuery 将文本复制到客户端的剪贴板](https://stackoverflow.com/questions/1539641/copy-text-to-the-clients-clipboard-using-jquery)

有没有可能从javascript代码向剪贴板添加一些东西（它将是字符串）？解决方案必须是 FF>3 IE>7 和 chrome 兼容

提前致谢

# c# - 使用repeater-asp.net c#读取和显示XML文件

> ID：12873005
> 
> 赞同：1
> 
> 时间：2012-10-13T12:15:57.467
> 
> 标签：c#, asp.net, xml, repeater

我需要你的帮助。我有这个 xml 文件，我需要使用中继器读取和显示它的表格。表格的标题列应该是一个按钮，如果单击该按钮，则应对该列的内容进行排序。

数据显示正常，但问题在于排序，当我单击其中一个按钮时，页面只是回发一个空白页面。

我究竟做错了什么？请纠正我。谢谢

这是aspx的代码

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default2.aspx.cs" Inherits="ex3.Default2" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <style type="text/css">
        .style1
        {
            width: 100%;
        }
    </style>
</head>
<body>
    <form id="form1" runat="server">

           <asp:Repeater ID="Repeater1" runat="server" 
      >
    <HeaderTemplate>

        <table>
            <tr>

                <th>   <asp:Button ID="btnEvent"  runat="server" Text="event" OnClick="btnEvent_Click" width="100%" EnableViewState="True"  CausesValidation="True" />
                </th>
                <th>   <asp:Button ID="btnDate" runat="server" Text="date" OnClick="btnDate_Click" width="100%" EnableViewState="True"  CausesValidation="True" />
                </th>

            </tr>
    </HeaderTemplate>

    <ItemTemplate>
        <tr>

            <td>
            <asp:Label ID="lbl1" runat="server" Text='<%# DataBinder.Eval(Container.DataItem, "title") %>'></asp:Label>
            </td>
            <td>
                <asp:Label ID="lbl2" runat="server" Text='<%# DataBinder.Eval(Container.DataItem, "pubDate") %>'></asp:Label>
            </td>

            </tr>
           </ItemTemplate>

    <FooterTemplate>
        </table>
    </FooterTemplate>
</asp:Repeater>

    </form>
</body>
</html> 
```

c#的代码：

```
 public partial class Default2 : System.Web.UI.Page
    {
        DataSet ds;
        protected void Page_Load(object sender, EventArgs e)
        {
            if (!IsPostBack)
            {
                ds = new DataSet();
                ds.ReadXml(@"http://www1.biu.ac.il/rss-event-eng.php");
                Repeater1.DataSource = ds;
                Repeater1.DataMember = ds.Tables[2].TableName;
                Repeater1.DataBind();
                form1.Controls.Add(Repeater1);
            }
        }
        protected void btnEvent_Click(object sender, EventArgs e)
        {

            DataSet ds = new DataSet();
            ds.ReadXml(@"http://www1.biu.ac.il/rss-event-eng.php");
            DataView dv = ds.Tables[2].DefaultView;
            dv.Sort = "title ASC";
            Repeater1.DataSource = dv;
            Repeater1.DataBind();

        }

        protected void btnDate_Click(object sender, EventArgs e)
        {
            DataSet ds = new DataSet();
            ds.ReadXml(@"http://www1.biu.ac.il/rss-event-eng.php");
            DataView dv = ds.Tables[2].DefaultView;
            dv.Sort = "pubDate ASC";
            Repeater1.DataSource = dv;
            Repeater1.DataBind();

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T12:30:08.867

在 Page_Load 中删除此字符串

```
form1.Controls.Add(Repeater1); 
```

# parallel-processing - Camel JMS 组件和并行处理

> ID：12873014
> 
> 赞同：3
> 
> 时间：2012-10-13T12:16:53.560
> 
> 标签：parallel-processing, jms, activemq, apache-camel

我有一个队列，其中有多条消息，所有消息都是独立的并且可以并行处理。

我见过一个多播路由器，它接收相同的消息并将其拆分到多个接收器，我想我还尝试了一些其他的，比如节流飞行路由策略、线程池配置文件等。

但是，我确实想要的是一个路由来封装多个并行 JMS 会话，我希望配置和一次性处理所有消息的总数。

我想说明我的一个假设，即带有 from 的单个路由将意味着单个会话而不是 n 个并行会话。如果我错了，请纠正我。

我的骆驼上下文看起来有点像这样：

```
<bean id="throttlePolicy" class="org.apache.camel.impl.ThrottlingInflightRoutePolicy">
    <!-- define the scope to be context scoped so we measure against total 
        inflight exchanges that means for both route1, route2 and route3 all together -->
    <property name="scope" value="Context" />
    <!-- when we hit > 20 inflight exchanges then kick in and suspend the routes -->
    <property name="maxInflightExchanges" value="20" />
    <!-- when we hit lower than 10% of the max = 2 then kick in and resume 
        the routes the default percentage is 70% but in this demo we want a low value -->
    <property name="resumePercentOfMax" value="10" />
    <!-- output throttling activity at WARN level -->
    <property name="loggingLevel" value="WARN" />
</bean>

<camelContext id="camel" errorHandlerRef="dlc"
    xmlns="http://camel.apache.org/schema/spring">

    <!-- this is the Dead Letter Channel error handler, where we send failed 
        message to a log endpoint -->
    <errorHandler id="dlc" type="DeadLetterChannel"
        deadLetterUri="jms:deadLetterQueue">
        <redeliveryPolicy retryAttemptedLogLevel="INFO"
            maximumRedeliveries="3" redeliveryDelay="250" backOffMultiplier="2"
            useExponentialBackOff="true" />
    </errorHandler>

    <route routePolicyRef="throttlePolicy">
        <from uri="jms:camel.design.md5InputQueue" />
        <transacted ref="required" />
        <process ref="basicProcessor" />
        <to uri="jms:camel.integrationTest.reply" />
    </route>
</camelContext> 
```

如您所见，我正在做的是计算源的 MD5。我希望这样做并将结果传输到回复队列中，并让所有这些都并行完成。

为了模拟这一点，我在基本处理器中设置了一个睡眠（一秒钟），我看到的是一个又一个消息的顺序处理，而不是并行处理。例如，如果有 10 条消息，则需要 10 秒，如果有 20 条消息，则需要 20 秒等。

我如何让它并行工作并进行所有 MD5 计算，比如在处理器中设置睡眠条件后，大约 2 秒内完成 10 条输入消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T20:47:47.550

只需设置[maxConcurrentConsumers](http://camel.apache.org/jms.html)属性以启用队列中的多个使用者线程...

```
<route routePolicyRef="throttlePolicy">
    <from uri="jms:camel.design.md5InputQueue?maxConcurrentConsumers=5" />
    <transacted ref="required" />
    <process ref="basicProcessor" />
    <to uri="jms:camel.integrationTest.reply" />
</route> 
```

# algorithm - 马尔可夫期望：英雄会花费多少石头？

> ID：12873016
> 
> 赞同：-3
> 
> 时间：2012-10-13T12:17:15.087
> 
> 标签：algorithm, math, markov

在游戏中，英雄有 100% 的概率从 0 级升到 1 级。

1级时，他有1/3的概率进入2级，1/3的概率进入0级，1/3的概率留在1级。

在2级时，他有1/9的概率获胜，4/9的概率进入1级，4/9的概率留在2级。

如果每一步（升级/降级/保持在同一级别）花费一石，那么英雄平均要支付多少石才能获胜？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T20:19:46.367

您可以按如下方式引入 3 个随机变量 A、B、C。

A：从 0 级到成功
的预期石子数量 B：从 1 级到成功
的预期石子数量 C：从 2 级到成功的预期石子数量

然后您可以制定以下等式：

A = 1 + B
B = 1 + 1/3 * A + 1/3 * B + 1/3 * C
C = 1 + 1/9 * 0 + 4/9 * B + 4/9 * C

然后，您可以求解 A、B 和 C。

# gcc - 在 JVM 上运行 GCC 和 binutils

> ID：12873019
> 
> 赞同：2
> 
> 时间：2012-10-13T12:17:45.960
> 
> 标签：gcc, jvm, cross-compiling, binutils

我想知道这是否是一种在 JVM 之上运行 GCC 编译器套件和 binutils 的方法，以便编译器生成 x86/ARM/MIPS 二进制文件作为其输出。这就像交叉编译，但主机系统将是 JVM 而不是本机主机系统。编译器的目标是 x86/ARM/MIPS/GCC 支持的任何东西。

这至少对需要为目标系统使用交叉编译器的嵌入式程序员是有益的。目前需要为主机系统构建 GCC，并为目标指令集 (ISA) 再次构建。如果 GCC 将在 JVM 上运行，那么无论是在 Linux、Windows、BSD、Unix 还是任何支持 JVM 的系统上运行，编译器都可以不加修改地运行。

这也可能有助于为各种主机系统移植 GCC 编译器套件，因为它只需要支持 JVM 作为运行环境。

有什么意见或想法吗？

# jquery - Jquery：忘记DOM结构，只用这个类找到下一个元素

> ID：12873027
> 
> 赞同：13
> 
> 时间：2012-10-13T12:18:27.320
> 
> 标签：jquery

我觉得以前有人问过这个问题，但每个海报的答案似乎都非常具体。

我正在寻找一种方法来识别给定元素并找到具有特定类的下一个元素。我不想处理 parent() 或 children() 因为我正在解析一个表，我不希望它停在一行的末尾甚至表本身的末尾（那里是两个并排的）。

有什么方法可以在整个页面中搜索元素的下一个实例？

背景信息：http: [//jsfiddle.net/HKkAa/2/](http://jsfiddle.net/HKkAa/2/)

我试图从突出显示的单元格开始遍历底部表格，并将“突出显示”类应用于每个单元格，直到我到达结束日期。我有一种方法可以计算何时到达结束日期，我只需要魔术方法来选择链接的下一个实例。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-13T12:39:02.863

**编辑**

对于任何有兴趣的人，我已经在这里对它进行了插件化：[https ://github.com/techfoobar/jquery-next-in-dom](https://github.com/techfoobar/jquery-next-in-dom)

* * *

如果您希望它完全通用并且能够满足所有/任何 DOM 结构，那么在 jQuery 中没有内置的方法来执行此操作。我曾经制定了一个简单的递归函数来做到这一点。它是这样的：

```
function nextInDOM(_selector, _subject) {
    var next = getNext(_subject);
    while(next.length != 0) {
        var found = searchFor(_selector, next);
        if(found != null) return found;
        next = getNext(next);
    }
    return null;
}
function getNext(_subject) {
    if(_subject.next().length > 0) return _subject.next();
    return getNext(_subject.parent());
}
function searchFor(_selector, _subject) {
    if(_subject.is(_selector)) return _subject;
    else {
        var found = null;
        _subject.children().each(function() {
            found = searchFor(_selector, $(this));
            if(found != null) return false;
        });
        return found;
    }
    return null; // will/should never get here
} 
```

你可以这样称呼它：

```
nextInDOM('selector-to-match', element-to-start-searching-from-but-not-inclusive); 
```

例如：

```
var nextInst = nextInDOM('.foo', $('#item')); 
```

无论 DOM 结构如何，都会为`.foo`您提供第一个匹配项`$('#item')`

在此处查看原始答案：[https ://stackoverflow.com/a/11560428/921204](https://stackoverflow.com/a/11560428/921204)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-22T16:02:36.920

以下代码允许您找到与选择器匹配的下一个元素，无论 DOM 结构如何。

```
$.fn.nextThrough = function(selector) {
    // Our reference will be the last element of the current set
    var $reference = $(this).last();
    // Add the reference element to the set the elements that match the selector
    var $set = $(selector).add($reference);
    // Find the reference position to the set
    var $pos = $set.index($reference);
    // Return an empty set if it is the last one
    if ($set.length == $pos) return $();
    // Return the next element to our reference
    return $set.eq($pos + 1);
}

// Usage example
$(':focus').nextThrough('input:visible').focus(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T12:26:06.487

假设您正在搜索类“.foo”。如果您愿意，可以将其包装在一个可重用的函数中。

```
var $yourelement;
(...)

var $allElements = $('.foo');
var $nextElement = $allElements[$.inArray($yourElement,$allElements)+1]; 
```

`$allElements[0]`如果是最后一个，这将返回`$yourElement`（使其成为循环列表）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T12:25:04.897

我会使用这样的递归函数：

```
function findNext($element, selector) {
    while ($element) {
        var ne = $element.find(selector);
        if (ne.length) return ne;
        ne = $element.next(selector);
        if (ne.length) return ne;
        $element = $element.parent();
        if ($element.length==0) return null;
        $element = $element.next();
        if ($element.is(selector)) return $element;
    }       
} 
```

它搜索 $element 旁边的第一个元素，如果需要，它会上升一个级别，然后再前进和潜水

[您可以在这里](http://jsfiddle.net/evQMZ/)测试它（打开控制台查看带有选择器的“下一个”元素）。

# c# - 如何将整个数组附加到C#中的字符串

> ID：12873028
> 
> 赞同：1
> 
> 时间：2012-10-13T12:18:30.757
> 
> 标签：c#, c++

我正在尝试将我用 C++ 制作的程序重新创建为 C# windows 窗体程序，我已经完成了大部分工作。有一件小事使程序无法正常工作。

我的程序是一个生物信息学程序，它允许用户输入 DNA 或 RNA 字符的字符串/序列，程序将其转换为相应的蛋白质/氨基酸，并为程序看到的每个密码子打印出一个氨基酸/蛋白质。因此，如果我输入“AAA GGG CCC”，它会打印出“赖氨酸甘氨酸脯氨酸”。

这是我在 C++ 版本中遇到问题的代码片段

```
for (i=0; i<numberOfCodons;i++)
{
    endIndex=beginIndex+3;
    codon="";
    {
        //here is where I'm having the trouble converting this to C# and have it cout the write
        //way                  
        codon.append(RNA.substr(beginIndex,endIndex-beginIndex));
    }
    for (k=0;k<64;k++)
    {
        if(codon==codons[k])
        {
             //here is where I'm having the trouble converting this to C# and have it cout the write way
             //like I metioned previously AAA GGG CCC couts Lysine Glycine Proline 
             protein.append(aminoAcids[k]);                
        }            
    }
    beginIndex+=3;
}
cout<<protein<<endl;
protein.clear(); 
```

到目前为止，这是我在 c# 中所拥有的

```
private void Tranlate_Click(object sender, EventArgs e)
{
    numberOfCodons = rnaLength / 3;
    beginIndex = 0;
    richTextBox2.AppendText("Total Number Of codons are: ");
    richTextBox2.AppendText(numberOfCodons.ToString());
    richTextBox2.AppendText("\n");
    for (i = 0; i < numberOfCodons; i++)
    {
        endIndex = beginIndex + 3;
        codon = "";                
        {
            // these are the two possible conversions of the C++ code that dont work at all for me******
            // codon.AppendText(RNA.Substring(beginIndex, endIndex - beginIndex));
            codon=(RNA.Substring(beginIndex, endIndex - beginIndex));
        }
        for (k = 0; k < 64; k++)
        {
            if (codon == codons[k])
            {
                //supposed to print out all the coresponding amino acids from the array and it will only print out one amino acid (Lysine)*******
                //protein.AppendText(aminoAcids[k]);
                protein = (aminoAcids[k]);
            }
        }
        beginIndex += 3;
    }
    richTextBox2.AppendText(protein);
    richTextBox2.AppendText("\n");
    //protein.clear();
} 
```

为什么会这样，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T12:30:49.217

尝试在循环中更改此行

```
protein = (aminoAcids[k]); 
```

至

```
protein += (aminoAcids[k]); 
```

C++ 版本循环 64 次并附加到字符串，C# 版本每次都重新初始化字符串，并以比较找到的最后一个匹配结束 `if (codon == codons[k])`。

密码子字符串也是
如此 这在每个循环中重新初始化它

```
codon=(RNA.Substring(beginIndex, endIndex - beginIndex)); 
```

但是，在这种情况下，我不确定构建单个字符串然后检查字符串数组是否正确`codons[k]`

PS。虽然他们对生成的代码没有影响，但我发现您对括号的自由使用有点分散注意力。你可以写`aminoAcids[k];`和`codon=RNA.Substring(beginIndex, endIndex - beginIndex);`。这（在我看来）更清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T13:02:19.470

您的代码非常适合在 C# 中广泛使用的 LINQ。如果我正确理解了逻辑，您可以编写如下内容：

```
richTextBox2.AppendText(string.Join("\n",
                                      Enumerable.Range(0, numberOfCodons)
                                        .Select(i => RNA.Substring(i * 3, i * 3 + 3))
                                        .Where(c => codons.Contains(c))
                                        .Select(c => aminoAcids[codons.IndexOf(c)])
                                        .ToArray())
                                    ); 
```

# python - HTML标签之间的硒

> ID：12873030
> 
> 赞同：2
> 
> 时间：2012-10-13T12:18:43.180
> 
> 标签：python, selenium, screen-scraping, beautifulsoup

获取由 Javascript 创建的页面中的所有 HTML 以传递给 BeautifulSoup 的最佳方法是什么？

我目前正在使用：

```
from selenium import webdriver
from selenium.common.exceptions import NoSuchElementException
from selenium.webdriver.common.keys import Keys

from BeautifulSoup import BeautifulSoup

browser = webdriver.Firefox()
browser.get("http://www.yahoo.co.uk")
html = browser.find_elements_by_id("html") 
```

但是“html”总是一个空列表。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T20:51:30.440

将页面源从 Selenium 传递给 Beautiful Soup 的正确方法是：

```
from selenium import webdriver
from selenium.common.exceptions import NoSuchElementException
from selenium.webdriver.common.keys import Keys

from BeautifulSoup import BeautifulSoup

browser = webdriver.Firefox()
browser.get("http://www.yahoo.co.uk")
html_source = browser.page_source
html = BeautifulSoup(html_source) 
```

这样，浏览器正在加载页面，提取完整的 html 源并将其传递给 BeautifulSoup。结果可以像任何其他 Beautiful Soup 对象一样被解析。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T13:43:33.540

你也可以使用类似的东西

```
html_source = browser.page_source 
```

这是一个 webdriver 提供的函数调用，正是为了收集完整的源代码或“获取页面中的所有 html”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-13T12:23:24.513

HTML 不是 id。它应该是这样的：

```
html = browser.find_elements_by_tag_name("html") 
```

因为 html 是一个标签。

您最初进行的搜索将返回 id 已设置为“html”的所有元素。将返回的元素示例：

```
<p id="html">Lorem ipsum</p> 
```

该元素的 id 是“html”，标签名称是“p”。

# c# - C# 中带有表单链接的树视图内容

> ID：12873032
> 
> 赞同：0
> 
> 时间：2012-10-13T12:18:51.347
> 
> 标签：c#

```
TreeNode node1 = new TreeNode("firstC");
TreeNode node2 = new TreeNode("secondC");
TreeNode[] array = new TreeNode[] {node1, node2};
TreeNode treeNode = TreeNode("Root",array);
treeView1.Nodes.Add(treeNode); 
```

我想给另一个表格的链接，当有人点击“firstC”时，它必须打开另一个表格。我看不到有关此的 TreeNode 构造函数。你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T12:25:14.293

你应该看看这些事件。最简单的方法是打开属性窗口并转到事件（Visual Studio 中的闪电图标）。然后双击内部`nodemouseclick`或类似的东西。然后会自动创建一个函数，您可以在其中打开表单。

在该函数中检查节点是否是该节点。

```
void treeView1_NodeMouseClick(object sender,  
    TreeNodeMouseClickEventArgs e)
{
    if( e.node.text == "firstC" )
    {
     // Open dialog
    }
} 
```

事件信息
[节点鼠标点击事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.treeview.nodemouseclick.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T12:26:35.573

```
 private void AddNodes()
    {
       TreeNode tn = new TreeNode() { Tag = Someform };
        //add nodes
        treeView1.NodeMouseClick += new TreeNodeMouseClickEventHandler(treeView1_NodeMouseClick);
    }
  void treeView1_NodeMouseClick(object sender, TreeNodeMouseClickEventArgs e)
    {
        (e.Node.Tag as Form).Show();
    } 
```

# jsp - 显示 HTTP 状态 500 - 当我运行 jsp 文件时

> ID：12873035
> 
> 赞同：0
> 
> 时间：2012-10-13T12:19:23.227
> 
> 标签：jsp, shell

我从另一个调用此代码的 jsp 代码获取 datetime1 ，datetime2，moteid 作为输入。这工作正常，脚本 1.sh 工作正常。当我运行此代码时，它显示 HTTP 状态 500 错误

```
<%@page import="java.io.BufferedReader"%>
<%@page import="java.io.InputStreamReader"%>
<%@page import="java.io.File"%>
<%@page import="java.util.Map"%>
<%@page import="com.sixpanview.fileReader"%>
<%@page import="java.util.Calendar"%>
<%@page import="java.text.SimpleDateFormat"%>
<%@page import="java.text.DateFormat"%>
<%@page contentType="text/html" pageEncoding="UTF-8"%>
    <!DOCTYPE html>
    <html>
        <head>
            <%  
                String id = request.getParameter("moteid");
                String[] temp = id.split(":");
                String moteid = temp[0];
                String datetime1 = temp[1];     
                String datetime2 = temp[2];
                String moteId = temp[3];
                    String sh = "sh";
                    String rep = "/root/NetBeansProjects/JavaApplication/web/1.sh";
                    String cpid = "\"" + moteid + "\"";
                    String mm = datetime1;
                    String nn = datetime2;
                    String kk = moteId;

                    String[] cmdarr = new String[]{sh, rep, moteid, mm, nn, kk};

                    File file=new File("/root/NetBeansProjects/JavaApplication/web");
                    ProcessBuilder pb = new ProcessBuilder(cmdarr);

                    pb.directory(file);
                    Process p = pb.start();
                    p.waitFor();

                           %>

       <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
                <title>JSP Page</title>
            </head>
            <body>
                <iframe src="report.pdf" width="100%" height="700px"/>

            </body>
        </html> 
```

它的显示

```
type Exception report

message

description The server encountered an internal error () that prevented it from fulfilling this request.

exception

org.apache.jasper.JasperException: An exception occurred processing JSP page /pdf1jsp.jsp at line 23

20:     <head>
21:         <%  
22:             String id = request.getParameter("moteid");
23:             String[] temp = id.split(":");
24:             String moteid = temp[0];
25:             String datetime1 = temp[1];     
26:             String datetime2 = temp[2];

Stacktrace:
    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:521)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:430)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)

root cause

java.lang.NullPointerException
    org.apache.jsp.pdf1jsp_jsp._jspService(pdf1jsp_jsp.java:80)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:388)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)

note The full stack trace of the root cause is available in the Apache Tomcat/6.0.35 logs. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T12:21:25.663

22: 字符串 id = request.getParameter("moteid");

这里 id 为空，这就是在第 23 行抛出 NPE 的原因：

String[] temp = id.split(":");

# android - 人人在android中的集成

> ID：12873037
> 
> 赞同：0
> 
> 时间：2012-10-13T12:19:37.117
> 
> 标签：android, integration

人人是chaina的一个著名的社交网络方面是否有任何示例或教程，如Facebook或Twitter集成，用于将我的android应用程序与人人集成。有人能帮我吗。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T08:03:08.077

我已经从[这里完成了我的人人集成](http://wiki.dev.renren.com/wiki/AndroidSDKCourse)

# spring-mvc - 使用 Twitter Bootstrap 表单字段而不是 Spring 表单

> ID：12873039
> 
> 赞同：2
> 
> 时间：2012-10-13T12:20:08.123
> 
> 标签：spring-mvc, twitter-bootstrap

Twitter Bootstrap 在我的应用程序中运行良好。但是，我该如何解决这部分问题。我想在 twitter bootstrap 输入字段中获取 path="name" 。

*弹簧形式*

```
<tr>
    <td>Product Name:</td>
    <td><form:input path="name" /></td> 
```

*推特引导*

```
<div class="controls">
    <input type="text" id="inputEmail" placeholder="Name" />
</div> 
```

累了这个。但是，给了我一个“未知标签”警告。

```
<form:input path="name" id="inputEmail" placeholder="Name" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T13:46:00.520

您是否尝试仅使用 bootstrap 来做 spring form:input 功能？我认为“路径”不会出现在生成的 html 中。它改用“名称”属性。

你有没有尝试过：

```
<input type="text" name="email" id="inputEmail"  /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T12:28:18.693

不要忘记添加

```
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form" %> 
```

在 JSP 文件的顶部。

有趣的链接：[使用 Spring 的表单标签库](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/view.html#view-jsp-formtaglib-configuration)

# java - 查找错误 - 不查找错误

> ID：12873045
> 
> 赞同：1
> 
> 时间：2012-10-13T12:20:46.503
> 
> 标签：java, eclipse, findbugs

我最近在 Eclipse 中设置了查找错误以查看它生成的报告。我已将所有设置设置为尽可能敏感。如果我创建一个写入文件的小型应用程序并且不关闭流它会拾取它，这一切都很好。

但是，使用一个已经编写的项目，我们没有几个错误，特别是在输出中，我们根本没有错误（就查找错误而言）

我想知道是否有人可以通过他们的版本运行它并报告我是否发现错误设置不正确，或者实际上它是否找不到错误？

```
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

public class SpellUtil {

    private final static String teenSpelling[] = {"Zero", "One", "Two", "Three",
        "Four", "Five", "Six", "Seven", "Eight", "Nine", "Ten", "Eleven",
        "Twelve", "Thirteen", "Fourteen", "Fifteen", "Sixteen",
        "Seventeen", "Eighteen", "Nineteen"};

    private final static String centSpelling[] = {"Twenty", "Thirty", "Forty",
        "Fifty", "Sixty", "Seventy", "Eighty", "Ninety"};

    private final static String suffixSpelling[] = {
        "", // Dummy! no level 0 (added for nicer indexing in code)
        "", // Nothing for level 1
        " Thousand, ", " Million, ", " Billion, ", " Trillion, ", " Quadrillion, ",
        " Quintillion, "};

    public static String spell(int number) {

        int rem, placeIndicator = 1;
        boolean isNegative = false;
        List<String> spelling = new ArrayList<String>();

        if (number < 0) {
            isNegative = true;
            number = Math.abs(number);
        }

        while (number > 0) {
            rem = number % 1000;
            number = number / 1000;

            spelling.add(suffixSpelling[placeIndicator]);

            try {
                spelling.add(spellBelow1000(rem));
            } catch (SpellingException e) {
                System.out.println(e.getMessage());
            }

            placeIndicator++;
        }

        StringBuilder sb = new StringBuilder();
        if (isNegative) sb.append("Minus ");
        for (int i = spelling.size() - 1; i >= 0; i--) {
            sb.append(spelling.get(i));
        }

        return sb.toString();
    }

    private static String spellBelow1000(int number) throws SpellingException {

        if (number < 0 || number >= 1000)
            throw new SpellingException("Expecting a number between 0 and 999: " + number);

        if (number < 20) {
            // if number is a teen,
            // find it in teen table and return its equivalent text (word).
            return teenSpelling[number];
        } else if (number < 100) {
            // otherwise, if it is a cent,
            // find the most (div) and least (rem) significant digits (MSD/LSD)
            int div = (int) number / 10;
            int rem = (int) number % 10;

            if (rem == 0) {
                // if LSD is zero, return the cent key word directly (like
                // fifty).
                return centSpelling[div-2];
            } else {
                // otherwise, return the text as cent-teen (like fifty-one)
                return centSpelling[div-2] + "-" + teenSpelling[rem];
            }
        } else {
            // otherwise, it is a mil;
            // find it's MSD and remaining cent.
            int div = number / 100;
            int rem = (int) number % 100;  // TODO will findbugs detect unnecessary (int)?

            // Prepare the mil prefix:
            String milText = teenSpelling[div] + " Hundred";

            // decide whether to append the cent tail or not.
            if (rem == 0) {
                // if it does have a non-zero cent, that's it.
                // return the mil prefix, for example three hundred:
                return milText;
            } else {
                // otherwise, spell the cent and append it to mil prefix.
                // (now, rem is a cent).
                // For example, three Hundred and Sixty-Four:
                return milText + " and " + spellBelow1000(rem);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T12:52:42.223

您期望在此行中找到错误：

```
int rem = (int) number % 100;  // TODO will findbugs detect unnecessary (int)? 
```

是错误的，因为`%`运算的结果通常不是整数。

在`C`and`C++`中，余数运算符只接受整数操作数，但*在 Java 中，它也接受浮点操作数。*这意味着诸如此类的语句`double x = 8.2 % 4;`在 Java 中非常有效，并且结果可能是非整数值。（`0.1999999999999993`在这种情况下）

请在[此处](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.17.3)查看 Java 语言规范。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T13:19:39.193

您似乎对 findbugs 配置有问题。我建议通过声纳使用 Findbugs。它更容易配置，并且您可以获得 checkstyle、pmd 以及用于管理和解决违规的系统。

[声纳 findbugs 页面](http://www.sonarsource.org/tag/findbugs/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T13:50:59.650

我认为问题在于您误解了 FindBugs 的功能及其功能。

基本上，FindBugs 解析每个类以生成解析树 - 程序结构的内存表示。然后尝试在树中找到与已知模式匹配的位置，这些模式表示不正确或有问题的编程。例如：

```
 if (someString == "42") {
        ....
    } 
```

FindBugs 很可能会告诉您使用 '==' 运算符比较字符串是错误的。它所做的是在类中查找运算符为“==”且其中一个或两个操作数为字符串的任何表达式节点。它将针对已编程检测和报告的大量模式重复此过程。有些会比这个更复杂，但基本上，FindBug 只是做结构模式匹配的一种形式。

FindBugs 没有也不能做的是了解您的程序实际上应该做什么。例如：

```
 public boolean isOdd(int arg) {
        return (arg % 2) == 0;
    } 
```

这对于任何了解简单数学的人来说显然是不正确的……但 FindBugs 不会注意到它。那是因为 FindBugs 不知道该方法实际上应该做什么。此外，它无法进行基本语义分析，以找出代码没有实现数学。

* * *

> 我这样做的原因是因为我需要演示查找错误，并且我需要一个应用程序来生成一些错误来展示它是如何工作的。

也许你需要作弊：

*   阅读 Findbugs 文档以了解它能够找到的内容。
*   编写一些带有您知道 Findbugs 可以为您找到的错误的“玩具”应用程序。

包括你知道它不会找到的例子也是值得的......这样你就可以解释 Findbugs 的局限性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T12:53:39.570

findbugs 所做的是寻找一些可能（并且很可能会）导致意外/不需要的行为的常见错误。大多数这些错误是技术性的或对 java 及其 API 的错误使用。可以在[此处](http://findbugs.sourceforge.net/bugDescriptions.html)找到所有 findbugs 检查的列表换句话说，如果您以正确的方式做了您不想要的事情，fin​​dbugs 不会检测到它。在您的代码中，我看不到 findbugs 会检测到的任何内容。您在评论中提到的不必要的演员表不是 findbugs 规则，因为它不会改变您的代码的行为。它更多是一种风格或效率错误，会被[checkstyle](http://checkstyle.sourceforge.net/)或[PMD](http://pmd.sourceforge.net/)等工具检测到。

# android - 调整大小后布局视图

> ID：12873048
> 
> 赞同：6
> 
> 时间：2012-10-13T12:21:08.487
> 
> 标签：android, hierarchyviewer

我正在创建一个显示经常变化的值的网格。因此，我使用了一个 TextView，它在其内容发生变化时自动调整大小（[Auto Scale TextView Text to Fit within Bounds](https://stackoverflow.com/questions/5033012/auto-scale-textview-text-to-fit-within-bounds)）。调整大小发生，但视图布局不正确

![调整大小后的布局](../Images/a6d7ed259468e9e003486115c4d052e1.png)

问题是，**当我使用 HierarchyViewer 检查活动时**，布局显示为我想要的。

![层次查看器后的布局](../Images/3b5fb04bb5b21f11092873b0353c26d0.png)

我的猜测是 HierarchyViewer 在视图上调用 requestLayout() 或 invalidate() ，但我尝试过没有成功。此代码在主活动中调用，但没有任何效果。

```
new Handler().postDelayed(new Runnable() {            
            @Override
            public void run() {
              getWindow().getDecorView().requestLayout();
              getWindow().getDecorView().invalidate();
            }
          }, 5000); 
```

我也尝试在调整大小后使视图无效。

TextView 的重力设置为中心，如果没有调整大小，它看起来没问题。

欢迎任何提示，在此先感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T19:58:05.773

我通过在 TextView 的父级之一中覆盖 onLayout 并使用在构造函数中创建的处理程序来解决它

```
public class CellView extends LinearLayout{
   public CellView(Context context) {
     super(context);

     mHandler = new Handler();

     View.inflate(context, R.layout.cellview, this);
  }

 @Override
  protected void onLayout(boolean changed, int left, int top, int right, int bottom) {
    if(changed){
      mHandler.post(new Runnable() {          
        @Override
        public void run() {
          requestLayout();
        }
      });
    }

   super.onLayout(changed, left, top, right, bottom);
  } 
```

我曾尝试在 TextView 的 onLayout 中调用 requestLayout，但它不起作用，我不知道为什么。这可能是因为值是通过观察者更新的，但 onTextChanged 侦听器应该发生在 UI 线程中。我希望它为别人服务

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T12:08:18.013

工作方式`requestLayout()`是，当在视图上调用时，它将在其自身及其所有子级上安排布局传递。每当视图对边距、填充或内容更改进行了移动或调整大小时，这都是可取的。

该方法的文档对于`getDecorView()`它到底给你什么不是很清楚。但是，根据[网站](http://developer.android.com/reference/android/view/Window.html#getDecorView%28%29)上的文档：

> 请注意，第一次调用此函数会“锁定”各种窗口特征，如 setContentView(View, android.view.ViewGroup.LayoutParams) 中所述。

这让我相信`getDecorView()`检索的视图有一些特别之处。您可能正在做的是使视图的布局永久化，因此当您`requestLayout()`通过时永远不会改变。

[这显然是获取整个活动的根视图的正确方法。](https://stackoverflow.com/questions/4486034/get-root-view-from-current-activity)

`requestLayout()`但是，出于效率原因，我建议您尽可能调用最低的孩子。就像我之前说的，它在一个视图和它的子视图上安排一个布局传递。如果您在最顶层的视图上进行布局传递，那么您实质上是在重建包括保留在原地的视图在内的所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T13:50:29.100

您可能需要使用[runOnUiThread在 UI 线程中运行计时器代码，如此](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)[处](https://stackoverflow.com/questions/10135353/when-may-we-need-to-use-runonuithread-in-android-applciation)所述。

# java - 如何在 Jtable 中搜索特定数据？

> ID：12873050
> 
> 赞同：0
> 
> 时间：2012-10-13T12:21:27.220
> 
> 标签：java, swing, jdbc, jtable, rowfilter

我有一个文本字段，它必须从 Jtable 中搜索特定记录。如何搜索表中的特定记录？已搜索的记录只会显示在表中。搜索后可以突出显示并将突出显示的记录的值放在 txtfield 或标签中。

```
private void txtsearchKeyReleased(java.awt.event.KeyEvent evt) {                                      
   try{
       String sql = "select * from customer where Customer_ID=?";
       pst=conn.prepareStatement(sql);
       pst.setString(1, txtsearch.getText());
       rs= pst.executeQuery();
       if(rs.next()){
           String add1 =rs.getString("Customer_ID");
           lblID.setText(add1);
           String add2 = rs.getString("First_Name");
           lblfname.setText(add2);
           String add3 = rs.getString("Last_Name");
           lbllname.setText(add3);
           String add4 = rs.getString("Birthdate");
           lblbirthdate.setText(add4);
           String add5 = rs.getString("Gender");
           lblgender.setText(add5);
           String add6 = rs.getString("Occupation");
           lbloccupation.setText(add6);
           String add7 = rs.getString("Address");
           lbladdress.setText(add7);
           String add8 = rs.getString("Email");
           lblemailadd.setText(add8);
           String add9 = rs.getString("Contact");
           lblcontact.setText(add9);
           String add10 = rs.getString("Status");
           lblstatus.setText(add10);
           String add11 = rs.getString("Income");
           lblincome.setText(add11);
           String add12 = rs.getString("Amount");
           lblamount.setText(add12);
           String add13 = rs.getString("Months");
           lblterm.setText(add13 +" months");
           String add14 = rs.getString("Interest");
           lblinterest.setText(add14);
           String add15 = rs.getString("Date_Applied");
           lblapplied.setText(add15);
           String add16 = rs.getString("Purpose");
           lblpurpose.setText(add16);
       }
   }
           catch(Exception e){
JOptionPane.showMessageDialog(null, e);    
}                                     
} 
```

它只搜索客户 ID。如果我搜索其他记录仍在表中。如果我搜索特定记录，我想要。搜索记录将显示在表格中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T12:30:49.063

*   看看[JTable 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

*   [关于排序和过滤](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting)，教程中的示例

*   为了获得更好的帮助，请尽快发布[SSCC](http://sscce.org/) E，因为您的代码演示了 JDBC 和 PreparedStatement，

*   您将[在 Swing 中遇到 Concurency](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)问题，Swing GUI 将是不负责任的（鼠标和按键事件），直到艰难而长期的运行`JDBC Statement`结束，（以这种形式，您的代码），

*   必须重定向`JDBC Statement to the BackGround Task, use`Runnable#Thread `or`SwingWorker`

*   `Swing GUI`必须在[事件调度线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)上完成所有更新

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-14T12:34:31.040

你应该在你的项目中添加这个 rs2xml.jar 的 jar/文件夹

String sql="Select * From Inventarizimi where Regjistrimi=?";
Class.forName("oracle.jdbc.driver.OracleDriver"); Connection con= (Connection) DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:XE","Inventarizimi"); PreparedStatement preStatement = con.prepareStatement(sql); preStatement.setString(1, txtRegjistrimi.getText()); ResultSet 结果 = preStatement.executeQuery();
table.setModel(DbUtils.resultSetToTableModel(result));

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T12:24:58.880

您对内部模型进行过滤，并使用过滤后的结果更新表模型。

# php - PHP mysql_query 事务不回滚

> ID：12873054
> 
> 赞同：0
> 
> 时间：2012-10-13T12:21:52.250
> 
> 标签：php, mysql, transactions

前段时间我编写了一个数据库类，我将它用于大多数项目，最近扩展了该类以处理事务。

下面的 Transaction 类似乎无法正常工作，服务器是 MySQL innoDB，我检查了事务在我的数据库上是否正常工作（使用 PHPMyAdmin）。所以这显然是我的代码错误或我的误解。

```
<?php

/**
 * Description of Database
 *
 * @author http://stackoverflow.com/users/820750/gerve
 */
class Database {

    private $connection;

    public function __construct($dbServer, $dbName, $dbUser, $dbPassword) {
        $this->connection = mysql_connect($dbServer, $dbUser, $dbPassword);
        mysql_select_db($dbName, $this->connection);
    }

    public function query($query, $die = true) {
        return new Query($query, $this->connection, $die);
    }

    public function escape($param) {
        return mysql_real_escape_string($param, $this->connection);
    }

    public function transaction() {
        return new Transaction($this->connection);
    }

}

class Query {

    private $query;
    public $count;
    public $countModified;
    public $queryString;

    public function __construct($query, $link_identifier, $die = true) {
        if($die){
            $this->query = mysql_query($query, $link_identifier) or die(mysql_error());
        }
        else{
            $this->query = mysql_query($query, $link_identifier);
        }

        $this->count = is_resource($this->query) ? mysql_num_rows($this->query) : 0;
        $this->countModified = mysql_affected_rows($link_identifier);

        $this->queryString = $query;
    }

    public function nextRow() {
        return mysql_fetch_object($this->query);
    }

    public function allRows() {
        $array = array();

        while($row = mysql_fetch_object($this->query)){
            $array[] = $row;
        }

        return $row;
    }

}

class Transaction {

    private $connection;
    private $isAlive;

    public function __construct($link_identifier) {
        $this->connection = $link_identifier;
        $this->query("BEGIN");
        $this->isAlive = true;
    }

    public function query($query) {
        if($this->isAlive){
            $q = new Query($query, $this->connection, false);
            if(mysql_error()){
                $this->rollBack();
                return false;
            }
            else{
                return $q;
            }
        }
    }

    public function rollBack() {
        if($this->isAlive){
            $this->query("ROLLBACK");
            $this->isAlive = false;
        }
    }

    public function commit() {
        if($this->isAlive){
            $this->query("COMMIT");
            $this->isAlive = false;
            return true;
        }
        else{
            return false;
        }
    }

}

?> 
```

**编辑 - 类的示例用法**

```
$DB = new Database(dbServer, dbName, dbUser, dbPassword);
$transaction = $DB->transaction();

$transaction->query("INSERT INTO myTable `c1`, `c2` VALUES('1', '2')"); //Works
$transaction->query("INSERT INTO jhsdjkag 5dafa 545"); //Fails
$transaction->query("INSERT INTO myTable2 `c1`, `c2` VALUES('3', '4')"); //Works

$transaction->commit(); 
```

上面的代码不应该向数据库中插入任何行，第二个查询失败了，所以没有一个应该成功。

我的问题是它不会回滚，无论查询失败，总是插入行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T12:28:25.993

尝试使用`START TRANSACTION`而不是`BEGIN`

顺便说一句`START TRANSACTION`，您可以使用`WITH CONSISTENT SNAPSHOT`：

> WITH CONSISTENT SNAPSHOT 选项为能够执行此操作的存储引擎启动[一致读取。](http://dev.mysql.com/doc/refman/5.5/en/glossary.html#glos_consistent_read)这仅适用于 InnoDB。

来源：[MySQL 文档](http://dev.mysql.com/doc/refman/5.5/en/commit.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:23:07.180

发现代码有错误，就在`__construct()`. 这很简单，我只更改了 1 行：

**从：**

```
public function __construct($link_identifier) {
    $this->connection = $link_identifier;
    $this->query("BEGIN");
    $this->isAlive = true;
} 
```

**到：**

```
public function __construct($link_identifier) {
    $this->connection = $link_identifier;
    $this->isAlive = true;
    $this->query("BEGIN");
} 
```

->isAlive 在第一个“BEGIN”查询之后设置，这意味着从未发送过 BEGIN。

# android - Android：如何将地图类用于地图功能？

> ID：12873055
> 
> 赞同：2
> 
> 时间：2012-10-13T12:22:26.273
> 
> 标签：android

我是安卓新手。我可以成功地在模拟器上获取地图，并且执行 setzoom、zoombuttons、annimateto 等主要功能的所有代码都写在 main.java 文件中。

```
 public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_google_map);

            map = (MapView)findViewById(R.id.mapview);
            map.setBuiltInZoomControls(true);

            control = map.getController();
        GeoPoint point = new GeoPoint(33660175, 73055513);
        control.animateTo(point);
        control.setZoom(15);

    } 
```

我的问题是，如果我可以在另一个类中编写它，那么如何通过在 main.java 类中使用类对象来获得所有功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T17:21:00.187

上面给出的代码是我的 main.java 类代码。现在我实际上想做那个 main.java 类用于显示地图活动，但地图功能

```
 map.setBuiltInZoomControls(true);

    control = map.getController();
    GeoPoint point = new GeoPoint(33660175, 73055513);
    control.animateTo(point);
    control.setZoom(15); 
```

这些函数是在其他类中编写的，并且通过在 main.java 文件中使用此类对象来使用这些功能，或者还可以放置或删除在另一个类中编写的标记代码，并使用该类的对象能够从地图中放置或删除标记。

# java - 在 JPanel 中绘制 JComponent

> ID：12873056
> 
> 赞同：2
> 
> 时间：2012-10-13T12:22:32.010
> 
> 标签：java, swing, graphics2d, jcomponent, null-layout-manager

我正在尝试在 JPanel 中显示 JComponent。我正在使用空布局，因为组件的位置可以在运行时更改，我必须控制它们。

但是下面的代码不起作用。只有当我明确调用“paintComponent”方法时，JComponent 才会在显示器上可见，我认为这不是一个好习惯。

我的 JComponent 类

```
public class MyIcon extends JComponent 
{
    private double xPos;
    private double yPos;
    private double radius = 30;

    public MyIcon(double xPos, double yPos)
    {
            this.xPos = xPos;
            this.yPos = yPos;
            this.setBounds((int)xPos, (int)yPos, (int)radius, (int)radius);
            this.setPreferredSize(new Dimension((int)radius, (int)radius ) );
    }

    public Dimension getPreferredSize()
    {
            return ( new Dimension( (int)radius, (int)radius ) );
    }

    public Dimension getMinimumSize() 
    {
            return new Dimension((int)radius, (int)radius);
    }

    public void paintComponent(Graphics g)
    {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g;
            g2d.setColor(Color.BLACK);
            g2d.drawOval( (int)xPos, (int)yPos, (int)radius, (int)radius);

            g2d.fillOval((int)xPos, (int)yPos, (int)radius, (int)radius);

            System.out.println("Icon.paintComponnet() called");
    }
} 
```

我的面板类

```
public class MyPanel extends JPanel
{
    private MyIcon myIcon;
    private Graphics2D graphics;
    private int width = 700;
    private int height = 500;

    public MyPanel()
    {
        myIcon = new MyIcon(20,30);
        init();
    }

    private void init()
    {
        setLayout(null);
        setBackground(Color.WHITE);
        setPreferredSize( new Dimension(width, height) );
        setBorder(BorderFactory.createLineBorder(Color.BLACK));
        add( myIcon );
        myIcon.repaint();       
    }

    public void paintComponent(Graphics g)
    {
        graphics = (Graphics2D) g;
        super.paintComponent(g);
        graphics.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
                RenderingHints.VALUE_ANTIALIAS_ON);

        System.out.println("MyPanel.paintComponnet() called");

        // why my Icon only gets painted if I explicitly call for it ?

        //myIcon.paintComponent(g);
    }
} 
```

我的框架类

```
public class Editor {

    public static void main(String[] args)
    {
        Editor editor = new Editor();
    }

    private MyPanel myPanel;
    private JFrame frame;
    private JToolBar toolBar;

    public Editor()
    {
        myPanel = new MyPanel();
        init();
    }

    private void init()
    {
        frame = new JFrame("Editor");
        Container content = frame.getContentPane();
        frame.setSize(800, 600);
        frame.setLayout(new BorderLayout(15,15));
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        content.add(myPanel,BorderLayout.WEST);

        frame.pack();
        frame.setVisible(true);
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T12:36:24.787

也许一个好的方法是 Icon 类不会扩展`JComponent`，而只是一个简单的对象。

然后，您将当前`Icon.paintComponent`必须重命名为类似的名称`drawIcon`，并直接从该方法调用该`drawIcon`方法`MyPanel.paintComponent`并将引用传递给 Graphics 对象。

这样您就不必担心使用空布局，并且您可以通过仅使用`Graphics(2d)`API 来控制显示图标的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T12:26:33.560

*   我[将对返回图标对象的类使用paintIcon（）](http://docs.oracle.com/javase/7/docs/api/javax/swing/Icon.html)

*   [公共无效paintIcon（组件c，图形g，int x，int y）{](http://docs.oracle.com/javase/7/docs/api/javax/swing/Icon.html#paintIcon%28java.awt.Component,%20java.awt.Graphics,%20int,%20int%29)

*   [例如](https://stackoverflow.com/a/12707482/714968)

# batch-file - 如果应用程序未运行，请检查并重新启动它

> ID：12873057
> 
> 赞同：0
> 
> 时间：2012-10-13T12:22:45.930
> 
> 标签：batch-file

我正在尝试将批处理文件放在一起放入所有用户的启动文件夹中。

我希望它每 5 秒检查一次以查看是否*`wswc.exe`*正在运行，如果它**什么也不做**，如果没有，则启动：

```
 c:\program files\vmware\vmware view\client\bin\wswc.exe 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T21:07:51.007

干得好

```
:LOOP
tasklist /nh /fi "imagename eq wswc.exe" | find /i "wswc.exe" >nul && echo It's running || start "" "c:\program files\vmware\vmware view\client\bin\wswc.exe"
ping 127.0.0.1 -n 6
goto :LOOP 
```

# c++ - 静态对象初始化器 C++

> ID：12873060
> 
> 赞同：3
> 
> 时间：2012-10-13T12:23:13.733
> 
> 标签：c++

> **可能重复：**
> [文件范围和静态浮点数](https://stackoverflow.com/questions/1706675/file-scope-and-static-floats)
> [什么是静态变量？](https://stackoverflow.com/questions/1995495/what-are-static-variables)

这是一本书的代码。

```
class X
{
   int i;
public:
   X(int ii = 0) : i(ii) {cout<<i<<endl;} // Default
   ~X() { cout << "X::~X()" << endl; }
};
void f()
{
  static X x1(47);
  static X x2; // Default constructor required
}

int main()
{
  f();

   return 0;
} 
```

我的问题是为什么我想像函数 f() 一样将对象声明为静态的？如果我没有将 x1 和 x2 声明为静态会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T12:26:20.927

第一次调用 f() 函数时，静态将被初始化（延迟加载）。如果它们没有被声明为静态，那么它们将是局部变量，并且每次调用函数 f() 时都会重新创建。

所有对 f() 的调用都将使用相同的 x1 和 x2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T12:51:23.853

对于此代码，它对程序的可观察行为没有影响。

更改`main`为调用`f`两次而不是仅调用一次，并观察差异——如果变量是`static`，则只创建一对`X`对象（第一次`f`被调用），而如果不是，`static`则每次创建一对对象称呼。

或者，`main`在调用`f`. 然后观察 with `static`，对象在打印*之后*`X`被销毁（静态对象一直存在到程序结束），而没有对象在打印*之前*被销毁（自动对象只存在直到退出它们的范围，在这种情况下是函数）。 *`main``static` *`main``f`**

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T12:28:36.043

和...之间的不同

```
int f()
{
      int i = 0;
      ++i;
      return i;
}

int f2()
{
     static int i = 0;
     ++i;
     return i;    
}

int main()
{
      for (int i = 0; i < 10; ++i) { cout << f1() << ' ' << f2() << endl; }
} 
```

是不是 f1 总是会创建一个新的局部变量 i 并将其设置为零然后递增它，而 f2 将创建一个`static`局部变量 i 并将其初始化为零**一次**，然后每次调用它都会从先前的调用值递增它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T12:29:15.637

下面是一些代码来测试函数中的静态对象是什么意思：

```
#include <iostream>

using namespace std;
class A {
  public:
   void increase() {
     static int b = 0;
     b++;
     cout << "A::increase: " << b << endl;
   }
};
int main() {
        A a;
        a.increase();
        a.increase();
        a.increase();
        return 0;
} 
```

输出是：

```
A::increase: 1
A::increase: 2
A::increase: 3 
```

注意 b 的值在函数调用之间保留吗？[这](http://ideone.com/7w2t6)是ideone上的示例，以便您可以使用它。**

# android - 我的数据没有记录在我的 android 应用程序的 SQLite DB 中

> ID：12873062
> 
> 赞同：0
> 
> 时间：2012-10-13T12:23:24.293
> 
> 标签：android, android-sqlite

好的，伙计们，在我之前，我搜索了论坛和许多其他人，但我似乎没有找到足够的答案，所以我想我可能会问，我创建了这个应用程序来组织一天，它的工作原理是这样的：-我有 2 个活动，一个是显示数据（在列表视图上），另一个只是用于插入，我用`startActivityForResult`函数打开了第二个活动，然后用`onActivityResult`功能我将它插入数据库。Eclipse 没有向我显示任何错误，LogCat 也没有，但数据似乎没有插入到 Db 中，所以我在插入数据时插入了一个 try-catch 方法来记录所做的事情，我总是得到数据的异常没有被记录。我是android新手，我认为我做的一切都不对。我发布了应用程序的所有代码，以便您对整个过程有一个概述，但问题（我认为）是创建数据库的地方，或者插入数据的地方，或者当我尝试获取数据从一个到另一个。但我不知道在哪里所以请帮忙！

MainActivity.java：

```
package com.example.dailyplanner;

import android.R.id;
import android.os.Bundle;
import android.app.Activity;
import android.app.ListActivity;
import android.content.Intent;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.util.Log;
import android.view.ContextMenu;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.view.ContextMenu.ContextMenuInfo;
import android.view.View.OnClickListener;
import android.view.View.OnCreateContextMenuListener;
import android.widget.Button;
import android.widget.ImageButton;
import android.widget.ListView;
import android.widget.Toast;

public class MainActivity extends ListActivity {

    private SQLiteDatabase db;
    Intent weather;     
    Intent i;
    String text;
    String date;
    String time;
    ListView lv;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        db = openOrCreateDatabase("MyDB", MODE_PRIVATE, null);
        db.execSQL("CREATE TABLE IF NOT EXISTS TaskTbl (Id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, text VARCHAR(250), time VARCHAR(20), date VARCHAR(20));");

        Button showBtn = (Button) findViewById(R.id.shTask);
        showBtn.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

            }
        });

        Button nTaskBtn = (Button) findViewById(R.id.nTask);
        nTaskBtn.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                Intent nTaskScreen = new Intent(getApplicationContext() new_task.class);

                startActivityForResult(nTaskScreen, 100);

            }
        });

        Button wthrBtn = (Button) findViewById(R.id.wthrBtn);
        registerForContextMenu(wthrBtn);

        lv = (ListView) findViewById(id.list);

    }

    @Override
    public void onCreateContextMenu(ContextMenu menu, View v,
        ContextMenuInfo menuInfo) {
        // TODO Auto-generated method stub
        super.onCreateContextMenu(menu, v, menuInfo);

        MenuInflater mi = getMenuInflater();
        mi.inflate(R.menu.cities, menu);

    }

    @Override
    public boolean onContextItemSelected(MenuItem item) {
        // TODO Auto-generated method stub
        return super.onContextItemSelected(item);

    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub
        super.onActivityResult(requestCode, resultCode, data);

        if(resultCode==100)
        {
            i = getIntent();        
        String text = i.getStringExtra("text");
            String date = i.getStringExtra("date");
            String time = i.getStringExtra("time");
                try{

                db.execSQL("INSERT INTO TaskTbl (text,time,date) VALUES("+text+", "+time+", "+date+");");        

                Log.d("db","data was recorded");
            }
            catch (Exception e)
            {
                Log.e("db", "data was not recorded");

            }

        }

    }
} 
```

新任务.java：

```
package com.example.dailyplanner;

import android.R.string;
import android.app.Activity;
import android.app.DatePickerDialog;
import android.app.Dialog;
import android.app.TimePickerDialog;
import android.content.Intent;
import android.net.UrlQuerySanitizer.ValueSanitizer;
import android.os.Bundle;
import android.renderscript.Sampler.Value;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.DatePicker;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.TimePicker;

public class new_task extends Activity {

    static final int TIME_DIALOG_ID=0;
    static final int DATE_DIALOG_ID=1;
    public TextView timeText;
    public TextView dateText;
    public EditText taskText;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.new_task);

        timeText = (TextView) findViewById(R.id.timeTxt);
        dateText = (TextView) findViewById(R.id.dateTxt);
        taskText = (EditText) findViewById(R.id.editText1);

        Button btnSave = (Button) findViewById(R.id.btnSave);
        btnSave.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                Intent i = new Intent(getApplicationContext(),     MainActivity.class);

                i.putExtra("date", dateText.getText().toString());
                i.putExtra("time", timeText.getText().toString());
                i.putExtra("text", taskText.getText().toString());

                setResult(100);

                finish();

            }
        });

        Button btnCancel = (Button) findViewById(R.id.btnCancel);
        btnCancel.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                finish();

            }
        });

    Button btnSetTime = (Button) findViewById(R.id.btnSetTime);
        btnSetTime.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                showDialog(TIME_DIALOG_ID);

            }
            });

        Button btnSetDate = (Button) findViewById(R.id.btnSetDate);
        btnSetDate.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                showDialog(DATE_DIALOG_ID);

            }
        });

    }

    TimePickerDialog.OnTimeSetListener mTimeSetListener = new     TimePickerDialog.OnTimeSetListener() {

                public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
                    timeText.setText(hourOfDay+":"+minute);
                    };

    };

    DatePickerDialog.OnDateSetListener mDateSetListener = new DatePickerDialog.OnDateSetListener() {

        public void onDateSet(DatePicker view, int year, int monthOfYear,
                int dayOfMonth) {

            dateText.setText(dayOfMonth+"."+monthOfYear+"."+year);

        }
    };

    protected Dialog onCreateDialog(int id){
        switch(id){

        case TIME_DIALOG_ID:
        return new TimePickerDialog(this, mTimeSetListener, 0, 0, true);

        case DATE_DIALOG_ID:
            return new DatePickerDialog(this, mDateSetListener, 2011, 1, 28);

        }
        return null;

    }

} 
```

这是 LogCat：

```
10-13 15:57:44.825: D/CLIPBOARD(9334): Hide Clipboard dialog at Starting input: finished by someone else... !
10-13 16:03:17.020: D/dalvikvm(10612): GC_FOR_ALLOC freed 135K, 4% free 12839K/13255K, paused 27ms
10-13 16:03:17.020: I/dalvikvm-heap(10612): Grow heap (frag case) to 13.069MB for 379472-byte allocation
10-13 16:03:17.075: D/dalvikvm(10612): GC_FOR_ALLOC freed <1K, 4% free 13209K/13639K, paused 55ms
10-13 16:03:17.115: D/AbsListView(10612): Get MotionRecognitionManager
10-13 16:03:17.305: D/CLIPBOARD(10612): Hide Clipboard dialog at Starting input: finished by someone else... !
10-13 16:03:21.740: D/dalvikvm(10612): GC_CONCURRENT freed 62K, 2% free 13626K/13895K, paused 3ms+2ms
10-13 16:03:21.790: D/dalvikvm(10612): GC_CONCURRENT freed 6K, 2% free 14073K/14343K, paused 2ms+2ms
10-13 16:03:21.825: D/AbsListView(10612): Get MotionRecognitionManager
10-13 16:03:21.875: D/dalvikvm(10612): GC_FOR_ALLOC freed 80K, 2% free 14324K/14599K, paused 13ms
10-13 16:03:23.130: D/dalvikvm(10612): GC_CONCURRENT freed 175K, 3% free 14678K/15047K, paused 2ms+4ms
10-13 16:03:28.910: D/AndroidRuntime(10612): Shutting down VM
10-13 16:03:28.910: W/dalvikvm(10612): threadid=1: thread exiting with uncaught exception (group=0x40c6f1f8)
10-13 16:03:28.915: E/AndroidRuntime(10612): FATAL EXCEPTION: main
10-13 16:03:28.915: E/AndroidRuntime(10612): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=100, result=100, data=null} to activity {com.example.dailyplanner/com.example.dailyplanner.MainActivity}: android.database.sqlite.SQLiteConstraintException: error code 19: constraint failed
10-13 16:03:28.915: E/AndroidRuntime(10612):    at android.app.ActivityThread.deliverResults(ActivityThread.java:2994)
10-13 16:03:28.915: E/AndroidRuntime(10612):    at android.app.ActivityThread.handleSendResult(ActivityThread.java:3037)
10-13 16:03:28.915: E/AndroidRuntime(10612):    at android.app.ActivityThread.access$1100(ActivityThread.java:128)
10-13 16:03:28.915: E/AndroidRuntime(10612):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1191)
10-13 16:03:28.915: E/AndroidRuntime(10612):    at android.os.Handler.dispatchMessage(Handler.java:99)
10-13 16:03:28.915: E/AndroidRuntime(10612):    at android.os.Looper.loop(Looper.java:137)
10-13 16:03:28.915: E/AndroidRuntime(10612):    at android.app.ActivityThread.main(ActivityThread.java:4514)
10-13 16:03:28.915: E/AndroidRuntime(10612):    at java.lang.reflect.Method.invokeNative(Native Method)
10-13 16:03:28.915: E/AndroidRuntime(10612):    at java.lang.reflect.Method.invoke(Method.java:511)
10-13 16:03:28.915: E/AndroidRuntime(10612):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
10-13 16:03:28.915: E/AndroidRuntime(10612):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
10-13 16:03:28.915: E/AndroidRuntime(10612):    at dalvik.system.NativeStart.main(Native Method)
10-13 16:03:28.915: E/AndroidRuntime(10612): Caused by: android.database.sqlite.SQLiteConstraintException: error code 19: constraint failed
10-13 16:03:28.915: E/AndroidRuntime(10612):    at android.database.sqlite.SQLiteStatement.native_execute(Native Method)
10-13 16:03:28.915: E/AndroidRuntime(10612):    at android.database.sqlite.SQLiteStatement.executeUpdateDelete(SQLiteStatement.java:92)
10-13 16:03:28.915: E/AndroidRuntime(10612):    at android.database.sqlite.SQLiteDatabase.executeSql(SQLiteDatabase.java:2020)
10-13 16:03:28.915: E/AndroidRuntime(10612):    at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1960)
10-13 16:03:28.915: E/AndroidRuntime(10612):    at com.example.dailyplanner.MainActivity.onActivityResult(MainActivity.java:182)
10-13 16:03:28.915: E/AndroidRuntime(10612):    at android.app.Activity.dispatchActivityResult(Activity.java:4746)
10-13 16:03:28.915: E/AndroidRuntime(10612):    at android.app.ActivityThread.deliverResults(ActivityThread.java:2990)
10-13 16:03:28.915: E/AndroidRuntime(10612):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T12:38:10.830

在询问异常时，您应该始终从 logcat 发布堆栈跟踪。

但是，我可以看到您的插入失败的原因。文本数据和日期应该用单引号分隔。

```
INSERT INTO foo VALUES (myTextData) 
```

将失败

```
INSERT INTO foo VALUES ('myTextData') 
```

将工作。

使用“'”+文字+“'”

```
db.execSQL("INSERT INTO TaskTbl (text,time,date) VALUES(" + "'" + text + "', '" + time + "', '" + date + "');"); 
```

在构建这样的字符串时，使用 IDE 编辑器中的语法颜色突出显示来检查引号是否在正确的位置。例如，在我的 IDE 中，字符串显示为绿色，标识符显示为黑色。

[编辑]

约束异常意味着您正在尝试添加重复的行。如果不允许重复，那么您应该相应地处理此异常。如果允许重复，则使用 _id 列作为主要列。我想您可能已经尝试过这样做，但您的 create 语句添加了一个名为“id”的列，而不是“_id”。如果实际上您打算使用“id”，那么您必须在 INSERT 中为该列使用唯一值，因为您已指定它是主键。

# git - 如何从 GitHub 存储库中清除分布在许多分支和提交中的 Java 工件？

> ID：12873063
> 
> 赞同：4
> 
> 时间：2012-10-13T12:23:31.403
> 
> 标签：git, github

回到过去，我不小心将大量 Java 工件（.war、.jar 和 .class）提交到我的 GitHub 存储库中。这导致大小膨胀到大约 100Mb。直到后来许多提交和分支合并我才注意到。

幸运的是，有很多关于这方面的信息，所以在无休止地浏览 StackOverflow、GitHub 和 Git 文档（谢谢大家！）之后，我终于设法将以下脚本放在一起：

```
#!/bin/bash          
echo "Removing history for *.war, *.jar, *.class files"

echo "Starting size"
git count-objects -v

echo "Removing history for *.war, *.jar, *.class files"
git filter-branch --force --index-filter 'git rm --cached --ignore-unmatch *.war' --prune-empty --tag-name-filter cat -- --all
git filter-branch --force --index-filter 'git rm --cached --ignore-unmatch *.jar' --prune-empty --tag-name-filter cat -- --all
git filter-branch --force --index-filter 'git rm --cached --ignore-unmatch *.class' --prune-empty --tag-name-filter cat -- --all

echo "Purging refs and garbage collection"
# Purge the backups 
rm -Rf .git/refs/original

# Force reflog to expire now (not in the default 30 days)
git reflog expire --expire=now --all

# Prune
git gc --prune=now

# Aggressive garbage collection
git gc --aggressive --prune=now

echo 
echo "Ending size (size-pack shows new size in Kb)"
git count-objects -v

# Can't do this in the script - it needs a human to be sure
echo
echo "Now use this command to force the changes into your remote repo (origin)"
echo 
echo git push --all origin --force 
```

这在本地运行得很好，我的 100Mb 存储库下降到大约 2Mb。然后我用

```
git push --all origin --force 
```

命令用我的本地更改覆盖 GitHub 存储库中的所有分支。一切顺利。为了检查我删除了本地仓库并从 GitHub 克隆的所有内容。这应该是 2Mb，但又是 100Mb。

那么，在所有这些漫无边际的事情之后，我哪里做错了？如何强制 GitHub 使用我的本地存储库及其已清除的历史记录？

**编辑以获取更多信息**

无法删除 GitHub 存储库，因为它周围有很多附加信息（问题、wiki、手表等）。对空的临时存储库执行此脚本可以正常工作 - 克隆的存储库为 2Mb。

问题仍然是为什么它不适用于主仓库。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T19:37:12.047

**都是因为叉子**

事实证明，如果有人在 GitHub 上 fork 你的 repo，那么他们会保留对其中条目的链接和引用。因此，除非每个持有分叉的人也在他们的 repo 上运行脚本，否则你的清除将不起作用。

# mysql - MySQL 查询日期范围

> ID：12873067
> 
> 赞同：2
> 
> 时间：2012-10-13T12:24:09.633
> 
> 标签：mysql, date, select, range

我用谷歌搜索但没有找到任何相关的东西。我有一个这样的 MySQL 表：

```
+++++++++++++++++++++++++++++++++++
| 房间号 | 日期 | 价格 |
+++++++++++++++++++++++++++++++++++
| 1 | 2012-10-10 | 10 |
| 1 | 2012-10-11 | 10 |
| 1 | 2012-10-12 | 10 |
| 1 | 2012-10-13 | 12 |
| 2 | 2012-10-10 | 15 |
| 2 | 2012-10-11 | 15 |
| 2 | 2012-10-12 | 15 |
| 2 | 2012-10-13 | 16 |
| 2 | 2012-10-14 | 16 |
| 2 | 2012-10-15 | 16 |
+++++++++++++++++++++++++++++++++++
```

我需要根据价格和 roomID 获取期间：

```
++++++++++++++++++++++++++++++++++++++++++++++++
| 房间号 | 来自 | 直到 | 价格 |
++++++++++++++++++++++++++++++++++++++++++++++++
| 1 | 2012-10-10 | 2012-10-12 | 10 |
| 1 | 2012-10-13 | 2012-10-13 | 12 |
| 2 | 2012-10-10 | 2012-10-12 | 15 |
| 2 | 2012-10-13 | 2012-10-15 | 16 |
++++++++++++++++++++++++++++++++++++++++++++++++
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T12:26:23.607

```
select roomid,
       min(date) as from,
       max(date) as till,
       price
from periods
group by price
order by price 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-13T12:31:27.630

您可以尝试使用以下查询：

```
SELECT roomid, MIN(date) AS `from`, MAX(date) AS `till`, price
FROM tableName
GROUP BY price
ORDER BY price 
```

# android - 不显示 Android SDK 的安装选项

> ID：12873068
> 
> 赞同：1
> 
> 时间：2012-10-13T12:24:20.350
> 
> 标签：android, android-install-apk, android-sdk-tools

我已经安装了 Android SDK，但没有正确安装，我无法在 Eclipse 中创建 Android 项目，所以我卸载并重新安装了 Android SDK 管理器，但我看不到所有选项。我现在正在看的窗口是这样的： ![在此处输入图像描述](../Images/1ac9f35ec479e8b3a50ead4ad76a2e9f.png)

注意：这是我使用 Android 的第一天，我想创建我的第一个“Hello world”示例，但不知道安装有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T12:47:01.150

[这里](https://stackoverflow.com/questions/11314359/android-sdk-manager-does-not-show-packages-to-be-installed)已经讨论过了。请查看此问题的答案

请享用 ：）

# iphone - iPhone应用程序的副作用

> ID：12873071
> 
> 赞同：0
> 
> 时间：2012-10-13T12:24:32.527
> 
> 标签：iphone, ios, testing, side-effects, black-box

有没有办法衡量 iphone 应用程序对其他应用程序性能的副作用？至少使用黑盒焦点。

关于这种方向的监控应用程序有什么建议吗？

我发现我的应用程序对其他应用程序一无所知，但我想衡量我的应用程序对其他应用程序的某种影响，或者在无法估计整体系统性能的情况下。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T12:31:51.683

在大多数情况下，当另一个应用程序处于前台时，您的应用程序将不会运行。允许您让应用程序在后台运行的原因很少。如果您的应用程序是其中之一，Instruments 为您提供了一种很好的方法来分析性能，不仅在您的应用程序上，而且在孔设备上。查看 WWDC2012 会议 235 个视频。它通过 Instruments 处理应用程序性能和分析。

# php - 如何在 symfony2 学说中优化这个实体？

> ID：12873073
> 
> 赞同：0
> 
> 时间：2012-10-13T12:24:51.853
> 
> 标签：php, database, symfony, doctrine

我有一个实体（布局模板），它最多有 10 个可配置的侧边栏，它们都是同一种实体类型的实例。

我现在的解决方案是这样放出来（下）

```
/**
* @var object BizTV\ContainerManagementBundle\Entity\Container
*  
* @ORM\ManyToOne(targetEntity="BizTV\ContainerManagementBundle\Entity\Container")
* @ORM\JoinColumn(name="sidebar1", referencedColumnName="id", nullable=true)
*/
protected $sidebar1;

/**
* @var object BizTV\ContainerManagementBundle\Entity\Container
*  
* @ORM\ManyToOne(targetEntity="BizTV\ContainerManagementBundle\Entity\Container")
* @ORM\JoinColumn(name="sidebar2", referencedColumnName="id", nullable=true)
*/
protected $sidebar2; 
```

但我意识到最好的方法是将它们存储在一个对象数组中（这也不会限制我在未来使用 10 个侧边栏）。如果有人能在这里指出我正确的方向。最难做的是我选择这 10 个实体的形式。我上面的方法是对十个属性中的每一个进行简单的下拉。

```
->add('sidebar1', 'entity', array(
        'label' => 'Choose sidebar ',
        'empty_value' => 'Not active',
        'class' => 'BizTVContainerManagementBundle:Container',
        'property' => 'select_label',
        'query_builder' => function(EntityRepository $er) use ($company) {
            return $er->createQueryBuilder('u')
                ->where('u.company = :company')
                ->setParameters( array('company' => $company) )
                ->orderBy('u.name', 'ASC');
            },
       ))
->add('sidebar2', 'entity', array(
        'label' => 'Choose sidebar ',
        'empty_value' => 'Not active',
        'class' => 'BizTVContainerManagementBundle:Container',
        'property' => 'select_label',
        'query_builder' => function(EntityRepository $er) use ($company) {
            return $er->createQueryBuilder('u')
                ->where('u.company = :company')
                ->setParameters( array('company' => $company) )
                ->orderBy('u.name', 'ASC');
            },
       )) 
```

再一次，我意识到这远非最好的方法，但作为 Symfony2 的新手，我真的不知道如何去做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T13:08:36.420

使用`Many to Many`关系，对于表单，使用“集合”字段类型：

[http://symfony.com/doc/master/cookbook/form/form_collections.html](http://symfony.com/doc/master/cookbook/form/form_collections.html)

# php - 使用 PHP 将实时 ID 添加到 BODY

> ID：12873083
> 
> 赞同：0
> 
> 时间：2012-10-13T12:26:17.600
> 
> 标签：php, document-body

我正在使用 php 代码：

```
<body id="<?php echo str_replace("index.php?","",(basename($_SERVER['REQUEST_URI'],".php"))); ?>"> 
```

和

```
<?php
    if(isset($_GET['start'])){
     include('includes/start.php');
    }else if(isset($_GET['help'])){
     include('includes/help.php');
    }else{
     include('includes/start.php');
    }
?> 
```

它工作得很好——在正文 ID 中将 index.php?help 切割为“帮助”，将 index.php?start 切割为“start”。但是当我在正文中输入 index.php 时，ID 是“index”而不是“start”。有没有办法告诉 index.php 包含 start.php 显示“开始”id body ID？

**更新**

它应该动态工作 - 正文 ID 是包含的 .php 文件的名称，类似于以下代码：

```
<?php 
   $page = str_replace(array( 'server_name', 'index', '?',  '/', '.php'), '', $_SERVER['REQUEST_URI']);
   $page = $page ? $page : 'start';
?>

<body id="<?php echo $page ?>"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T12:36:10.653

我不确定我能得到你 100% 但你可以试试

```
$id = $_SERVER['QUERY_STRING'];
$bodyID = $id;
switch ($id) {
    case "help" :

        include ('includes/help.php');
        break;
    default :
        $bodyID = "start";
        include ('includes/start.php');
        break;
}

printf("<body id=\"%s\"  >", $bodyID); 
```

如果您运行`index.php?help`它将包括`include ('includes/help.php');`并输出

```
<body id="help"  > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T12:36:50.877

最好改用这个：

```
<?php
    $ids = 'start,help,something';
    $ids = explode(',',$ids);
    $included = 0;
    foreach ($ids as $id) {
        if (isset($_GET[$id])) {
            include('includes/'.$id.'.php');
            $included = 1;
            break;
        }
    }
    if (!$included) include('includes/'.$ids[0].'.php');
?> 
```

然后：

```
<body id="<?php echo $id; ?>"> 
```

# php - 如何在drupal6的节点列表页面中呈现评论

> ID：12873086
> 
> 赞同：0
> 
> 时间：2012-10-13T12:26:23.570
> 
> 标签：php, drupal

我为列表节点创建了一个自定义模块，并使用以下代码呈现评论表单

```
print comment_render($node->nid); 
```

但它仅适用于第一个节点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T12:42:45.303

首先安装并配置“Comment goodness”模块 - 它允许您对评论进行排序以首先显示最新的。

然后在您的`template.php`创建中。

```
function THEME_preprocess_comment_wrapper(&$variables) {
  // Remove pager.  
  unset ($variables['content']['comments']['pager']);
  // Leave only latest comment.
  $last_comment_id = reset(element_children($variables['content']['comments']));
  $variables['content']['comments'] = array (
    $last_comment_id => $variables['content']['comments'][$last_comment_id]
  );
} 
```

# yii - Yii：如何显示相关表的相关表中的字段？

> ID：12873087
> 
> 赞同：2
> 
> 时间：2012-10-13T12:26:30.033
> 
> 标签：yii

抱歉...我的英语不好，所以我的问题可能完全不清楚。

我有这个表：组用户报告

关系： **组 1 -> N 个用户 1 -> N 个报告**

在报告的**管理视图**中，我使用的是**CGridView**。

我实际上能够显示用户名。...但是 show group.name 呢？

如何建立关系？如何设置 CDbCriteria ？

**我已经**在报告模型中有这种关系：

```
'user' => array(self::BELONGS_TO, 'Users', 'userId'), 
```

这在用户模型中

```
'group' => array(self::BELONGS_TO, 'Gruppi', 'groupId'), 
```

在报告模型中，我有这个：

```
$criteria=new CDbCriteria;
$criteria->with = array ('user'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T12:40:15.407

你应该能够得到`group.name`这样的（从报告的管理视图）：

```
user.group.name 
```

你目前的关系就可以了，你也不必使用任何标准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-09T13:18:23.273

你也可以这样使用：-

```
$criteria->with = array('user', 'user.group');
group.name 
```

该问题的另一种解决方案。（经测试）

# php - 在 PHP 中从 preg_replace 中运行函数

> ID：12873092
> 
> 赞同：1
> 
> 时间：2012-10-13T12:26:42.483
> 
> 标签：php

我有一个网站，它使用 PHP 脚本从 HTML 文件中加载一些数据并将其插入到链接中。到目前为止，它运行良好：

```
$html = preg_replace('/(\d+):(\d+),/', '<a href="index.php?par1=$1&amp;par2=$2">$1&#58;$2</a>,', $html); 
```

现在我想升级它以在链接中插入工具提示。数据是从数据库加载的，我有一个特殊的功能`loadTooltip($param1, $param2)`可以完成这项工作。问题是如何从内部调用函数`preg_replace()`。这是我拥有的代码，但它不会运行数据，只是显示带有参数的函数名称。这是代码：

```
$html = preg_replace('/(\d+):(\d+),/', '<a href="index.php?par1=$1&amp;par2=$2" titel="loadTooltip($1, $2)">$1&#58;$2</a>,', $html); 
```

那么，我怎样才能让它运行呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T12:31:00.257

您可以将[preg_replace_callback](http://php.net/manual/en/function.preg-replace-callback.php)用于该任务。

您可能需要稍微编辑一下函数的输出字符串。

# awk - awk 不使用 OFMT 和 $0 四舍五入

> ID：12873095
> 
> 赞同：4
> 
> 时间：2012-10-13T12:27:32.277
> 
> 标签：awk, gawk

我正在打印一个包含 100 列的数组，我希望所有列都有 2 位小数。我想使用 print $0 而不必单独指定所有列的格式。

OFMT 确实可以使用 0 美元：

```
echo '0.77767686 0.76555555 0.6667667 0.77878878' |awk '{CONVFMT="%.2g";OFMT="%.2g";print ($0+0);print ($0+0)"";print $0}' 
```

结果：

```
0.78
0.78
0.77767686 0.76555555 0.6667667 0.77878878 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-15T05:03:33.020

请注意，所有输入都被视为字符串，直到通过使用方式进行隐式转换。

`OFMT`用于将~~字符串转换为数字~~时打印数字，例如：

```
<<< 0.77767686 awk '{ print 0+$0 }' OFMT='%.2g' 
```

`CONVFMT`当数字显式转换为字符串时使用，例如：

```
<<< 0.77767686 awk '{ print "" 0+$0 }' CONVFMT='%.2g' 
```

两种情况下的输出：

```
0.78 
```

后者转换`$0`为数字，然后将其与空字符串连接。

为了为每一列实现这一点，我建议使用输入和输出记录分隔符的合理设置：

```
<<< '0.77767686 0.76555555 0.6667667 0.77878878' \
awk '{ print 0+$0 RT }' CONVFMT='%.2g' RS='[ \t\n]+' ORS='' 
```

请注意这两种转换，首先是一个数字，`0+$0`然后通过将其与 连接起来返回一个字符串`RT`。`RT`将设置为匹配的记录分隔符。请注意，这是 GNU awk 特定的，对于更便携的解决方案，请使用循环，例如：

```
<<< '0.77767686 0.76555555 0.6667667 0.77878878' \
awk '{ for (i=1; i<=NF; i++) $i+=0 } 1' CONVFMT='%.2g' 
```

两种情况下的输出：

```
0.78 0.77 0.67 0.78 
```

### 编辑 - 回复@BeeOnRope

@BeeOnRope 是正确的，`OFMT`在 print 函数调用时用作格式说明符`sprintf()`，而`CONVFMT`在其他转换中使用。这是一个说明差异的示例：

```
<<< 0.77767686 awk '{ n=0+$1; s=""n; print n, s }' OFMT='%.2g' CONVFMT='%.3g' 
```

输出：

```
0.78 0.778 
```

GNU awk 手册中的两个相关部分：

*   [https://www.gnu.org/software/gawk/manual/html_node/OFMT.html](https://www.gnu.org/software/gawk/manual/html_node/OFMT.html)
*   [https://www.gnu.org/software/gawk/manual/html_node/Strings-And-Numbers.html](https://www.gnu.org/software/gawk/manual/html_node/Strings-And-Numbers.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-13T12:34:05.080

为什么不使用`for`循环？

```
echo '0.77767686 0.76555555 0.6667667 0.77878878' |awk '{ for (i=1; i<=NF; i++) printf "%.2f\n", $i }' 
```

结果：

```
0.78
0.77
0.67
0.78 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T06:31:02.510

正如其他人所提到的，您需要将该字段视为一个数字才能进行转换。要结合其他一些想法，您可以尝试：

```
awk '{ for (i=1; i<=NF; i++) $i += 0; print }' 
```

这会将*每个*字段转换为一个数字。您可以使用`$7 += 0`等转换单个字段。您可以通过使用`if (match($i, ...))`一些正则表达式来仅选择您想要转换的数字来获得更好的结果。

# math - 如何执行粒子群优化

> ID：12873098
> 
> 赞同：-3
> 
> 时间：2012-10-13T12:27:38.660
> 
> 标签：math, optimization, computation, particles

我们被要求手动进行 5 或 6 次粒子群优化迭代以完成家庭作业，但我真的不明白怎么做，我们也没有得到任何示例。

有人可以为我完成第一次运行，以便我了解它是如何工作的吗？

每一步的解释都很棒。

考虑一个由三个粒子和 Vmax = 10 组成的粒子群优化系统的说明性示例。为了便于计算，我们将忽略 r1 和 r2 是随机数这一事实，并将它们固定为 0.5。解的空间是二维实值空间 R2，群体的当前状态如下：

*   粒子的位置：x1 = (5,5)；x2 = (8,3); x3 = (6,7);
*   个人最佳位置：x∗1 = (5,5)；x∗2 = (7,3)；x∗3 = (5,6)；
*   社会最佳位置：x∗ = (5,5)；
*   速度：v1 = (2,2)；v2 = (3,3); v3 = (4,4)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T13:10:00.853

“我真的不明白如何，我们没有得到任何例子”。让我对这句话加一点批评。如果您没有得到任何示例，则可能意味着您应该为自己寻找示例。你有没有把“粒子群优化”放到谷歌上，看看一些结果？你希望你学习中的所有东西都给你吗？

有许多资源可以解释粒子群优化的工作原理，例如[wikipedia](http://en.wikipedia.org/wiki/Particle_swarm_optimization)、[Google Scholar](http://scholar.google.at/scholar?q=particle+swarm+optimization&hl=en&oi=scholart)、[Scholarpedia](http://www.scholarpedia.org/article/Particle_swarm_optimization)或PSO的[专用网站。](http://www.swarmintelligence.org/)原始论文来自 Kennedy 和 Eberhart 1995，是学者搜索的最高结果。还有一些框架可以实现 PSO，您可以在其中查看它的工作原理，例如[HeuristicLab](http://dev.heuristiclab.com)。这是一个探索这个话题的机会。

# php - 相对路径作为php批处理脚本的参数

> ID：12873099
> 
> 赞同：1
> 
> 时间：2012-10-13T12:27:40.363
> 
> 标签：php, batch-file, path, absolute

我一直在谷歌搜索，试图找到我的问题的具体解决方案（如果有的话）......我有一个运行 php 命令的批处理脚本，然后运行一个 phpscript 将数据加载到 mysql 数据库

这是命令

```
set PHP = c:\xampp\php\php.exe
%PHP% -f c:/xampp/htdocs/xx/cron/export.php 
```

有没有办法我可以做

```
%PHP% -f xx/cron/export.php 
```

%PHP% 也一样，有没有一种方法可以省略绝对路径，这种设计/方法是一个糟糕的程序设计，我想确保我会实现正确的。

请帮助我如何正确实施。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T12:35:48.637

您可以尝试：

```
set PHP = cd c:\xampp\htdocs\ & c:\xampp\php\php.exe 
```

这将在 c:/xampp/htdocs 环境中执行 php.exe，因此`xx/cron/export.php`会找到该文件。

# c# - 只有在 Lucene.net 中搜索短语时才能找到完全匹配？

> ID：12873100
> 
> 赞同：4
> 
> 时间：2012-10-13T12:27:43.990
> 
> 标签：c#, lucene.net, phrase

我知道已经问过类似的问题，但我找不到任何适合我正在寻找的答案。

基本上，我想搜索短语并只返回仅具有该确切短语***而***不是部分匹配的匹配项。

例如，如果我搜索“This is”，则包含“This is a phrase”的文档不应**返回命中。**

举个例子：[Exact Phrase search using Lucene?](https://stackoverflow.com/questions/5527868/exact-phrase-search-using-lucene)

"foo bar" 不应返回命中，因为它只是部分匹配。我正在寻找的完整匹配将是“foo bar baz”。

这是代码，感谢 WhiteFang34 在上面的链接中发布此代码（我已简单地转换为 c#）：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Lucene.Net.QueryParsers;
using Lucene.Net.Search;
using Lucene.Net.Documents;
using Lucene.Net.Analysis.Standard;
using Lucene.Net.Analysis;
using Lucene.Net.Store;
using Lucene.Net.Index;

namespace LuceneStatic
{
    public static class LuceneStatic
    {
        public static void LucenePhraseQuery()
        {
            // setup Lucene to use an in-memory index
            Lucene.Net.Store.Directory directory = new RAMDirectory();
            Analyzer analyzer = new StandardAnalyzer(Lucene.Net.Util.Version.LUCENE_29);
            var mlf = Lucene.Net.Index.IndexWriter.MaxFieldLength.UNLIMITED;
            IndexWriter writer = new IndexWriter(directory, analyzer, true, mlf);

            // index a few documents
            writer.AddDocument(createDocument("1", "foo bar baz"));
            writer.AddDocument(createDocument("2", "red green blue"));
            writer.AddDocument(createDocument("3", "test foo bar test"));
            writer.Close();

            // search for documents that have "foo bar" in them
            String sentence = "foo bar";
            IndexSearcher searcher = new IndexSearcher(directory, true);
            PhraseQuery query = new PhraseQuery();
            string[] words = sentence.Split(' ');
            foreach (var word in words)
            {
                query.Add(new Term("contents", word));
            }

            // display search results
            List<string> results = new List<string>();
            TopDocs topDocs = searcher.Search(query, 10);
            foreach (ScoreDoc scoreDoc in topDocs.ScoreDocs)
            {
                Document doc = searcher.Doc(scoreDoc.doc);
                results.Add(doc.Get("contents"));
            }
        }

        private static Document createDocument(string id, string content)
        {
            Document doc = new Document();
            doc.Add(new Field("id", id, Field.Store.YES, Field.Index.NOT_ANALYZED));
            doc.Add(new Field("contents", content, Field.Store.YES, Field.Index.ANALYZED,
                    Field.TermVector.WITH_POSITIONS_OFFSETS));
            return doc;
        }
    }
} 
```

我已经使用不同的分析器和不同的方法来解决这个问题，但我无法获得所需的结果。我需要匹配完整的短语“foo bar baz”，但“foo bar”不应该**返回**任何命中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T20:14:04.023

`Field.Index.NOT_ANALYZED`创建字段时使用参数索引数据。这将导致整个值被索引为单个`Term`.

然后，您可以使用简单的 TermQuery 对其进行搜索。

[https://lucene.apache.org/core/old_versioned_docs/versions/3_0_1/api/all/org/apache/lucene/document/Field.Index.html#NOT_ANALYZED](https://lucene.apache.org/core/old_versioned_docs/versions/3_0_1/api/all/org/apache/lucene/document/Field.Index.html#NOT_ANALYZED)

# android - 尝试获取信息时出现 NullPointerException

> ID：12873103
> 
> 赞同：0
> 
> 时间：2012-10-13T12:28:12.537
> 
> 标签：android, nullpointerexception

我正在尝试做一个基本的游戏。我有名为 Ball.java 、 Scratch.java 和 Panel.java 的类

在面板中，我试图从 Ball.java 类中获取信息，但我得到 NullPointerException。我的代码中的错误在哪里？

在 Panel.java 中的此代码中获取异常

```
public Rect getBoundsBall(){
    return new Rect (top.getX(), top.getY(),top.getX()+ball.getWidth() ,top.getY()+ball.getHeight() );
} 
```

错误日志

```
10-13 12:57:28.746: E/AndroidRuntime(367): FATAL EXCEPTION: Thread-10
10-13 12:57:28.746: E/AndroidRuntime(367): java.lang.NullPointerException
10-13 12:57:28.746: E/AndroidRuntime(367):  at com.emredavarci.denemeler.Panel.getBoundsBall(Panel.java:44)
10-13 12:57:28.746: E/AndroidRuntime(367):  at com.emredavarci.denemeler.Panel.update(Panel.java:70)
10-13 12:57:28.746: E/AndroidRuntime(367):  at com.emredavarci.denemeler.TutorialThread.run(TutorialThread.java:30) 
```

面板.java

```
public class Panel extends SurfaceView implements SurfaceHolder.Callback {

    private TutorialThread _thread;

    Scratch raket=new Scratch();
    Ball top=new Ball();
    Bitmap ball;
    Bitmap _scratch;

    public Panel(Context context) {
        super(context);
        getHolder().addCallback(this);
        _thread = new TutorialThread(getHolder(), this); /
        setFocusable(true);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) { // to
        switch (event.getAction()){
           case MotionEvent.ACTION_MOVE: // 
           raket.setX((int)(event.getX()));
           break;
       }

       return true;

    }

    public Rect getBoundsBall(){
        return new Rect (top.getX(), top.getY(),top.getX()+ball.getWidth() ,top.getY()+ball.getHeight() );
    }

    public Rect getBoundsScratch(){
        return new Rect (raket.getX(), raket.getY(),raket.getX()+_scratch.getWidth() ,raket.getY()+_scratch.getHeight() );
    }

    public void update(){ /

        if((top.getX()<480) && (top.getX()>0)){
            top.setX(top.getX()+top.getxdirection());
            }
        if((top.getX()==480) || (top.getX()==0)){
            top.setxdirection(-1);
            top.setX(top.getX()+top.getxdirection());
        }
        if((top.getY()<780) && (top.getY()>0)){
            top.setY(top.getY()+top.getydirection());
            }
        if((top.getY()==780) || (top.getY()==0)){
            top.setydirection(-1);
            top.setY(top.getY()+top.getydirection());
        }

        Rect BallBounds = getBoundsBall();
        Rect ScratchBounds = getBoundsScratch();

        if( BallBounds.intersect(ScratchBounds)     ){              
            top.setydirection(-1); 
            //top.setY(top.getY()); !!!!
        }   

    }

    public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
        // TODO Auto-generated method stub
    }

    public void surfaceCreated(SurfaceHolder holder) {
         _thread.setRunning(true);
         _thread.start();
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
        // simply copied from sample application LunarLander:
        // we have to tell thread to shut down & wait for it to finish, or else
        // it might touch the Surface after we return and explode
        boolean retry = true;
        _thread.setRunning(false);
        while (retry) {
            try {
                _thread.join();
                retry = false;
            } catch (InterruptedException e) {
                // we will try it again and again...
            }
        }
    }

    @Override
    public void onDraw(Canvas canvas) {  
    _scratch = BitmapFactory.decodeResource(getResources(), R.drawable.red2);
    ball = BitmapFactory.decodeResource(getResources(), R.drawable.ball);
    canvas.drawColor(Color.BLACK);
    canvas.drawBitmap(_scratch, raket.getX() - (_scratch.getWidth() / 2), raket.getY() - (_scratch.getHeight() / 2), null);
    canvas.drawBitmap(ball, top.getX() - (ball.getWidth() / 2), top.getY() - (ball.getHeight() / 2), null);
    } 
```

}

Ball.java

```
public class Ball {

    private int x=100;          // the X coordinate
    private int y=100;          // the Y coordinate
    int xdirection=10;
    int ydirection=10;

    public Ball() {
        // TODO Auto-generated constructor stub
    }

    public int getX(){
        return x;
    }

    public int getY(){
        return y;
    }

    public void setX(int a){
        x=a;
    }

    public void setY(int b){
        y=b;
    }

    public int getxdirection(){
        return xdirection;
    }

    public int getydirection(){
        return ydirection;
    }

    public void setxdirection(int a){
         xdirection=xdirection*a;
    }

    public void setydirection(int b){
        ydirection=ydirection*b;
    }

    //while ile ball u hareket ettir
    //ball un koordinatlarını sakla

} 
```

Scratch.java

```
public class Scratch {

    private int x = 250; 
    private int y = 600;

    public Scratch() {
        // TODO Auto-generated constructor stub
    }

    public void setX(int a){
        x=a;
    }

    public void setY(int b){
        y=b;
    }

    public int getX(){
        return x;
    }

    public int getY(){
        return y;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T12:34:12.743

您缺少以下内容：

```
Ball top = new Ball(); 
```

即变量`top`没有被初始化，而是在`update`方法中使用。

此外，`ball`初始化. *_* `onDraw`谁知道`update`之前是否会被调用`onDraw`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T13:15:08.563

添加到@Rudolph 的答案中，您确定`Bitmap ball`已初始化吗？可以肯定的是，尝试记录`ball`为：

```
public Rect getBoundsBall(){
    log.v("ball",""+ball);
    return new Rect (top.getX(), top.getY(),top.getX()+ball.getWidth() ,top.getY()+ball.getHeight() );
} 
```

要么 要么`ball`是`top`罪魁祸首。找出哪个未初始化并相应地处理它。

# asp.net-mvc - 在 MVC 视图中添加内联条件语句

> ID：12873109
> 
> 赞同：1
> 
> 时间：2012-10-13T12:28:36.617
> 
> 标签：asp.net-mvc, razor

我正在尝试将一个类动态添加到 MVC**视图**中的 div ；在这种情况下`error`。我发现自己创建了一个**Razor** `If-Else`块，这意味着我的视图有很多重复的代码。我尝试了一些不同的 Razor 场景，但找不到有条件地附加新类的合理方法。任何人都可以建议一种避免重复代码并将视图决策保留在视图中的方法。

```
@if (ViewData.ModelState["Title"] != null && ViewData.ModelState["Title"].Errors.Any())
{
    <div class="select error">
        @Html.DropDownListWithTooltipFor(m => m.Title, Model.Titles, new { required = string.Empty, @class = "sel" })
    </div>
}
else
{
    <div class="select">
        @Html.DropDownListWithTooltipFor(m => m.Title, Model.Titles, new { required = string.Empty, @class = "sel" })
    </div>
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T12:34:52.463

试试这个：

```
 <div @(condition ? "class=select error" : "class = select">
 </div> 
```

Razor 将为您添加引号（class = "select error"）。这应该在 MVC3 中工作。另外，看看：[Conditional HTML Attributes using Razor MVC3](https://stackoverflow.com/questions/8061647/conditional-html-attributes-using-razor-mvc3) and [MVC3 - Conditionally add id element with Razor](https://stackoverflow.com/questions/7245774/mvc3-conditionally-add-id-element-with-razor)（实际上几乎是重复的）

[请注意Erik Porter](https://stackoverflow.com/users/405166/erik-porter)的回答：如果您可以使用 MVC4 做到这一点，那么还有一种更优雅的方式：

```
<div class="@yourClass" /> 
```

# javascript - 如何有条件地加载 JavaScript

> ID：12873111
> 
> 赞同：0
> 
> 时间：2012-10-13T12:29:11.267
> 
> 标签：javascript, razor

有没有办法在 ASP.Net Razor 视图中有条件地加载 JavaScript 参考文件？我的项目中有 15 个网页。它们指的是一组常见的库，例如 A、B、C、D。但是，有一个页面需要库 E 而不是 B。

如何编写标签，以便它只为该特定页面加载库 E？而且它不会为同一页面加载 B 吗？

如果我同时加载 E 和 B，则页面崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T12:37:04.190

您可以设置一些标志，例如

```
public ActionResult Index()
{
    ViewBag.Script = "B";
    return View();
} 
```

在你看来

```
if ((ViewBag.Script as string) == "B")
{
}
else
{
} 
```

* * *

你可以使用@section，但是你不能在 _Layout 中包含所有脚本

![在布局视图上渲染](../Images/c9d0edd82bc0069890cc1b553bf6d38b.png)

![视图部分](../Images/94d0a71575231cb3b864bab9a7706a82.png)

[ASP.NET MVC 3：带有 Razor 的布局和部分](http://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor.aspx)

# java - Java string.split() 正在抛出 ArrayIndexOutOfBoundsException

> ID：12873114
> 
> 赞同：0
> 
> 时间：2012-10-13T12:29:39.000
> 
> 标签：java, android, arrays, string, split

我正在尝试对字符串使用 split 方法。这会引发 ArrayOutOfBoundsException，我不知道为什么。我尝试了许多字符串和许多分隔符。

```
 String temp = "abcd&efgh&ijkl&mnop";
    String[] tempArr = temp.split("ijk"); 
```

这是错误日志：

```
10-13 12:20:30.619: E/AndroidRuntime(775): FATAL EXCEPTION: main
10-13 12:20:30.619: E/AndroidRuntime(775): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.lino/com.example.lino.LinesActivity}:    java.lang.ArrayIndexOutOfBoundsException
10-13 12:20:30.619: E/AndroidRuntime(775):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
10-13 12:20:30.619: E/AndroidRuntime(775):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
10-13 12:20:30.619: E/AndroidRuntime(775):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
10-13 12:20:30.619: E/AndroidRuntime(775):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
10-13 12:20:30.619: E/AndroidRuntime(775):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-13 12:20:30.619: E/AndroidRuntime(775):  at android.os.Looper.loop(Looper.java:123)
10-13 12:20:30.619: E/AndroidRuntime(775):  at android.app.ActivityThread.main(ActivityThread.java:3683)
10-13 12:20:30.619: E/AndroidRuntime(775):  at java.lang.reflect.Method.invokeNative(Native Method)
10-13 12:20:30.619: E/AndroidRuntime(775):  at java.lang.reflect.Method.invoke(Method.java:507)
10-13 12:20:30.619: E/AndroidRuntime(775):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
10-13 12:20:30.619: E/AndroidRuntime(775):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
10-13 12:20:30.619: E/AndroidRuntime(775):  at dalvik.system.NativeStart.main(Native Method)
10-13 12:20:30.619: E/AndroidRuntime(775): Caused by: java.lang.ArrayIndexOutOfBoundsException
10-13 12:20:30.619: E/AndroidRuntime(775):  at com.example.lino.LinesActivity.onCreate(LinesActivity.java:32)
10-13 12:20:30.619: E/AndroidRuntime(775):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-13 12:20:30.619: E/AndroidRuntime(775):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
10-13 12:20:30.619: E/AndroidRuntime(775):  ... 11 more 
```

## 编辑

这是整个班级：

```
 package com.example.lino;

    import java.lang.reflect.Array;
    import java.util.ArrayList;
    import java.util.List;

    import android.os.Bundle;
    import android.app.Activity;
    import android.util.TypedValue;
    import android.view.ViewGroup.LayoutParams;
    import android.widget.LinearLayout;
    import android.widget.TextView;

    public class LinesActivity extends Activity {

        TextView tvTitle;
        String bussinessId, bussinessTitle;
        String[] passedString;
        List<Line> linesList;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.lines_layout);

            tvTitle = (TextView) findViewById(R.id.tvMainTitle);

            Bundle passedBundle = getIntent().getExtras();
            passedString = passedBundle.getString("BussinessName").split(":");

            bussinessId = passedString[0];
            bussinessTitle = passedString[1]; // THIS IS LINE 32, BUT IT'S WORKING WELL

            tvTitle.setText(bussinessTitle);

            try {
                String temp = "abcd&efgh&ijkl&mnop";
                String[] tempArr = temp.split("ijk");

            } catch (Exception e) {
                e.printStackTrace();

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T12:38:52.940

跑步 ：

```
String temp = "abcd&efgh&ijkl&mnop";
String[] tempArr = temp.split("ijk");
System.out.println(Arrays.toString(tempArr)); 
```

我明白了

```
[abcd&efgh&, l&mnop] 
```

没有例外。

在我的编辑器中，第 32 行实际上显示为：

```
bussinessId = passedString[0]; 
```

这将表明第一个`String.split`：

```
passedString = passedBundle.getString("BussinessName").split(":"); 
```

不是你想要的。

检查 的内容，`passedBundle.getString("BussinessName")`看它是否包含`:`字符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T13:12:54.173

```
passedString = passedBundle.getString("BussinessName").split(":"); 
```

我猜你的`passedBundle.getString("BussinessName").split(":");`

正在返回，`only one element`您正在尝试`second`使用`passedString``bussinessTitle = passedString[1];`

`fetching`在打印元素之前，您的日志中`passedString array`的长度或`passedString`

```
System.out.println(passedString.length); 
```

并且在从传递的字符串数组中访问元素之前，最好设置一个条件

```
if(passedString.length>0)
{
bussinessId = passedString[0];
bussinessTitle = passedString[1]; 

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T12:39:35.977

您给出的代码不能抛出异常和崩溃。

我猜你忘记复制代码 LinesActivity 的第 32 行，如 logcat 中所述。

我很确定您正在阅读不存在的数组行：tempArr

# android - 如何在 Android 上制作我自己的安全 VOIP 应用程序？

> ID：12873116
> 
> 赞同：3
> 
> 时间：2012-10-13T12:29:54.667
> 
> 标签：android, security, voip

我想在呼叫数据进入 GSM 网络之前实现我自己的加密规则，即我想要比特形式的呼叫流，我将实现我自己的加密算法，然后发送到网络，我的应用程序在另一边（接收者端）将接收数据，解密并使其成为音频。我想知道是否可行，如果可行？我的意思是我想像 Airtel、Vodafone 等那样使用手机网络。

如果不可能，如果我可以使用互联网（2G 或 3G）做到这一点，这将有很大帮助？

在这方面的任何指导，我想要的只是方向。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T12:41:11.023

您可以使用 Adob​​e Flex 快速创建一个聊天应用程序，该应用程序将创建一个可以在 Android 上运行的 Adob​​e Air 应用程序（如果需要，还可以编译一个 iOS 版本）。Adobe Flex 的核心优势是发送音频（和视频）数据，开发人员只需很少的努力。

如果您希望对传输的数据进行加密，您可以使用 rtmps 协议将应用程序配置为使用 SSL。

此页面向您展示如何使用 Flex [http://coenraets.org/blog/2010/07/video-chat-for-android-in-30-lines-of-code/](http://coenraets.org/blog/2010/07/video-chat-for-android-in-30-lines-of-code/)创建一个简单的 Android 视频聊天应用程序-如果您特别不想要视频，则可以仅发送音频数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T03:56:52.957

在 Android 上，使用 GCM（或其他）网络的呼叫由您无法直接访问的基带处理器处理。您通过 rild（无线电接口层守护程序）与它交谈，它使用专有库与实际硬件交谈。所以在实践中你不能弄乱移动网络。

VOIP 应用程序将使用数据连接，您可以发送/接收几乎任何您想要的东西。如果您使用 SIP 等标准技术，则有多种方法可以将 TLS 用于通信通道，从而对流量进行加密。如果您正在创建自己的，您可能会通过使用 SSL 套接字来做类似的事情。

“如何”部分并不真正适合 SO 格式，因为它是非常开放的，并且取决于您决定如何实现它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T12:38:23.493

我无法想象为什么这是不可能的，因为网络只是在传递数据，我认为他们不在乎它是加密的还是未加密的——它只是一系列的 1 和 0。

至于如何，这超出了 Stack Exchange 的职权范围 - 如果您有特定问题，请使用代码发布它们。

您可以查看其他类似的问题：

*   [Android 上的基本加密](https://stackoverflow.com/questions/3565438/basic-encryption-on-android)
*   [https://stackoverflow.com/search?q=android+encryption](https://stackoverflow.com/search?q=android+encryption)

# sql - 触发器正在尝试插入重复键

> ID：12873118
> 
> 赞同：0
> 
> 时间：2012-10-13T12:30:13.977
> 
> 标签：sql, sql-server-2008

我有一个在插入时触发的触发器。此触发器插入另一个表。这是我的代码：

```
 SELECT @maxTeamId = 0
SELECT @maxTeamId = ISNULL(MAX(teamId), 0) from [dbo].[tblTeamslist]

--- Check if home team has already been inserted into the table.
SELECT @homeTeamId = -1
SELECT 
    @homeTeamId = teamId 
FROM 
    [dbo].[tblTeamslist] t
    JOIN inserted i
    ON t.teamName = i.hometeam
IF (@homeTeamId = -1) 
BEGIN
  SET IDENTITY_INSERT tblteamslist ON
    SELECT @homeTeamId = @maxTeamId + 1
    SELECT @maxTeamId = @maxTeamId + 1
    INSERT INTO [dbo].[tblTeamslist] (teamid,teamname) SELECT @homeTeamId, i.hometeam FROM inserted i
 SET IDENTITY_INSERT tblteamslist off
END

--- Check if away team has already been inserted into the table.
SELECT @awayTeamId = -1
SELECT 
    @awayTeamId = teamId 
FROM 
    [dbo].[tblTeamslist] t
    JOIN inserted i
    ON t.teamName = i.awayteam
IF (@awayTeamId = -1) 
BEGIN
  SET IDENTITY_INSERT tblteamslist ON
    SELECT @awayTeamId = @maxTeamId + 1
    SELECT @maxTeamId = @maxTeamId + 1
    INSERT INTO [dbo].[tblTeamslist]  (teamid,teamname) SELECT @awayTeamId, i.awayteam FROM inserted i
  SET IDENTITY_INSERT tblteamslist off
END 
```

正如您所意识到的，我正在尝试输入一个团队，如果 tblTeamsList 上不存在该团队。这是我收到“违反主键约束”PK_tblTeamsList“的错误。无法在对象“dbo.tblTeamsList”中插入重复键。重复键值为 (24).'。在代码中，我试图每次将 id 增加 +1。出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T17:38:50.030

有两种情况会发生此错误。1) 如果您在单个插入语句中插入多于一行，则触发器只会触发一次。在这种情况下，插入（如 Chris 所述）将包含多行。现在插入 tblTeamList 也将尝试插入多行 - 都具有相同的 teamid。

2) 如果其中两个插入同时发生，则它们可能都读取相同的@maxTeamId。如果发生这种情况，他们都会尝试使用相同的 teamid 将记录插入到 tblTeamList 中。

为了防止这两个问题，请使用桌子上的身份功能，而不是试图绕过它。

# puppet - 使用 Vagrant，为什么 puppet 配置比自定义打包盒更好？

> ID：12873128
> 
> 赞同：12
> 
> 时间：2012-10-13T12:31:41.470
> 
> 标签：puppet, vagrant

我正在创建一个虚拟机来模拟我们的生产 Web 服务器，以便我可以与新开发人员共享它，以使他们尽快加快速度。我已经阅读了 Vagrant 文档，但是我不明白使用通用基础盒并使用 Puppet 配置所有内容与打包一个包含所有已安装和配置的自定义盒的优势。我能想到的只有；

**使用 Puppet 与定制包装盒的优势**

*   易于让每个人都保持最新状态 - 能够将清单置于版本控制之下并共享存储库，以便其他开发人员可以简单地提取新更新并重新运行 puppet，即“流浪供应”。
*   环境记录在清单中。
*   能够使用在生产环境中定义的 puppet 模块来确保相同的环境。

**使用 Puppet vs 定制包装盒的缺点**

*   与简单地安装和配置自定义打包盒相比，编写清单需要更长的时间。
*   第一次使用 puppet 构建虚拟机比简单地下载一个自定义打包的盒子要花更长的时间。

我觉得我一定遗漏了一些重要的细节，你还能想出更多吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-15T11:31:34.370

**优点**：

由于依赖关系可能会随着时间而改变，从头开始构建一个新盒子将涉及手动删除软件包，或者扔掉盒子并重新手动重复安装过程。您显然可以使用 bash 或其他类型的脚本自动安装，但您会调用本机操作系统包管理器，这意味着它只能在您选择的操作系统上运行。换句话说，你被困在了;)

据我所知，Puppet（如 Chef）包含一种通用且与操作系统无关的软件包安装方式，这意味着清单可以在不同的操作系统上运行而无需修改。

此外，这些相同的脚本可用于配置生产机器，这意味着开发机器和生产机器实际上是相同的。

**缺点**：

当您可能不打算切换您的操作系统或生产环境时，必须学习另一种 DSL。您必须决定这些优势是否值得您花时间进行设置。就个人而言，我认为拥有一个抽象且可重复的包管理/配置策略将在未来为我节省大量时间，但是 YMMV。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-06T12:13:09.940

上面没有明确提到的一个很大的优点是您将（正确地）记录您的设置，并且您的文档将是实际设置 - 而不是（一次性）描述事情是/可能是如何打算的.

# ruby-on-rails - Rails：如何优化此操作

> ID：12873131
> 
> 赞同：0
> 
> 时间：2012-10-13T12:32:18.167
> 
> 标签：ruby-on-rails, ruby, optimization, methods

下面的操作会创建一个新评论。

*   一个用户有很多状态
*   一个状态有很多评论

怎样才能优化这个动作，以免`head 401 and return`重复多次。

```
def create
  @user = User.where(id: params[:user_id]).first
  if @user
    if current_user.friend_with?(@user) or current_user == @user
      @status = @user.statuses.where(id: params[:status_id]).first
      if @status
        @comment = @status.comments.build(params[:comment])
        @comment.owner = current_user
        if @comment.valid?
          @comment.save
          current_user.create_activity(:comment_status, @comment, @user)
        else
          head 401 and return
        end
      else
        head 401 and return
      end
    else
      head 401 and return
    end
  else
    head 401 and return
  end
end 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T12:59:31.653

您的代码中有很多过多的检查和分支，因此可以简化为：

```
def create
  success = false

  @user = User.find(params[:user_id])
  current_user_is_friend = current_user.friend_with?(@user) || current_user == @user

  if @user && current_user_is_friend && @status = @user.statuses.find(params[:status_id])
    @comment = @status.comments.build(params[:comment])
    @comment.owner = current_user
    if @comment.save
      current_user.create_activity(:comment_status, @comment, @user)
      success = true
    end
  end

  render(status: 401, content: '') unless success
end 
```

我做了几件事：

*   结合很多`if`条件，因为它们不需要分开。
*   更改`where(id: ...).first`为，`find(...)`因为它们是相同的。请注意，如果`find`失败，它将给出 404。不过，这可能更有意义（我认为确实如此）
*   不要`@comment.valid?`在之前调用`@comment.save`，因为如果对象无效则`save`返回。`false`
*   使用`||`而不是`or`布尔逻辑（[它们**不**一样](http://devblog.avdi.org/2010/08/02/using-and-and-or-in-ruby/)）。
*   使用`render(status: ..., content: '')`而不是`head ... and return`.
*   使用布尔变量来跟踪方法的成功。

我建议您尝试将其中的一些逻辑提取到模型中。例如，`User#friend_with`如果它传递了相同的用户，则应该可能只返回 true。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T14:10:56.033

你想什么时候回来`401`？

1.  未找到用户时
2.  当用户不是当前用户或不是该用户的朋友时
3.  未找到状态时
4.  未成功创建新评论时

您可以使用引发异常的方法，而不是使用这么多条件。当您这样做时，您可以使用所需的行为（渲染`401`）从异常中解救出来。

所以我对所列条件的建议是：

1.  使用`find!`而不是`where`然后`first`。
2.  `raise`一些东西，最好是自定义异常（`NotAFriendError`）
3.  同 1.，使用`find!`
4.  use `create!`，它等效于`new`and then如果验证失败`save!`，它将引发异常。`ActiveRecord::RecordInvalid`

结果如下：

```
def create
  begin
    @user = User.find!(params[:user_id])
    raise unless current_user.friend_with?(@user) || current_user == @user
    @status = @user.statuses.find!(params[:status_id])
    @comment = @status.comments.
      create!(params[:comment].merge(:owner => current_user))
  rescue ActiveRecord::RecordNotFound, ActiveRecord::RecordInvalid
    head 401
  end
  # everything went well, no exceptions were raised
  current_user.create_activity(:comment_status, @comment, @user)
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T12:36:50.823

```
def create
  @user = User.where(id: params[:user_id]).first
  if @user
    if current_user.friend_with?(@user) or current_user == @user
      @status = @user.statuses.where(id: params[:status_id]).first
      if @status
        @comment = @status.comments.build(params[:comment])
        @comment.owner = current_user
        if @comment.valid?
          @comment.save
          current_user.create_activity(:comment_status, @comment, @user)
          everythingOK = true
        end
      end
    end
  end
  head 401 and return unless everythingOK
end 
```

# c# - 如何从 C# 加载项中执行 MS Office/PowerPoint 中的自定义功能区控件的操作？

> ID：12873135
> 
> 赞同：2
> 
> 时间：2012-10-13T12:32:51.917
> 
> 标签：c#, ms-office, powerpoint, ribbon, ribbon-control

我目前正在使用 VSTO 编写 PowerPoint 2010 C# 加载项。我正在尝试通过我自己的 C# 插件中的自定义插件来执行许多功能区控件。

例如，要找到下面的控件并执行它的点击事件，我该怎么做呢？：

插入选项卡->“Addin X”组->“执行”按钮

我已经研究过使用辅助功能界面，但我完全不熟悉，并且会整天都在使用它。如果有人知道如何拼凑代码，我将不胜感激。

# apache - 如何 mod_rewrite 并保留查询字符串？

> ID：12873137
> 
> 赞同：36
> 
> 时间：2012-10-13T12:33:02.510
> 
> 标签：apache, .htaccess, mod-rewrite, query-string

我想 mod_rewrite 一个指向另一个页面的 URL，但我也希望保留添加的任何查询字符串。

```
RewriteEngine On

#enforce trailing slashes
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !#
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ http://localhost/siteroot/$1/ [L,R=301]

RewriteRule ^apps/([A-Za-z0-9-_]+)/?$ index.php&app=$1 
```

因此，如果用户访问`apps/app1/`，`index.php?app=app1`则显示。但是，我希望能够保留可选的查询字符串，以便访问`apps/app1/?variable=x`返回`index.php?app=app1&variable=x`.

什么 mod_rewrite 规则/条件会导致这种情况发生？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-10-13T12:40:34.043

您需要添加[`[QSA]`标志](http://httpd.apache.org/docs/2.2/en/rewrite/flags.html#flag_qsa)（“查询字符串追加”）

```
RewriteRule ^apps/([A-Za-z0-9-_]+)/?$ index.php&app=$1 [L,QSA] 
```

对于带有`[R]`标志的页面 301 重定向，而不是像这样的内部重写，查询字符串会自动附加。但是，您必须强制使用它`[QSA]`进行内部重写。

# django - South 不会迁移我的自定义字段

> ID：12873140
> 
> 赞同：1
> 
> 时间：2012-10-13T12:33:15.410
> 
> 标签：django, django-models, python-2.7, django-south, django-1.3

我有一个模型，它与自身有一个可以为空的外键关系（这个“自我”可以是任何具有这个外键的模型）。此外键是防止循环关系的自定义类。

调用`super()`中`__init__`包含`null=True`，`blank=True`因此需要包含在南方的检查规则中。这至少使*架构*迁移工作，但*迁移*仍然失败。

以下代码显示：自定义外键、检查规则和使用外键的模型。

```
# Foreign key
class ParentField(models.ForeignKey)
    def __init__(self, verbose_name=None, **kwargs):
        super(ParentField, self).__init__('self', verbose_name=verbose_name, null=True, blank=True, **kwargs)

    @staticmethod
    def checkcyclic(object, attr):
        '''Check for a cyclic relationship'''
        pass

# Introspection rules
add_introspection_rules([
    (
        [ParentField],
        [],
        {
            'null': ['null', {'default': True}],
            'blank': ['blank', {'default': True}],
        }
    )
], ["^test\.models\.fields\.ParentField"])

# Model
class Relation(Model):
    parent = ParentField(related_name='child_set') 
```

迁移会出现以下错误：

```
$ ./manage.py migrate
[..]
super(ParentField, self).__init__('self', verbose_name=verbose_name, null=True, blank=True, **kwargs)
TypeError: __init__() got multiple values for keyword argument 'to' 
```

我尝试添加如下规则，但没有任何改变。

```
'to': ['rel.to', {'default': 'test.models.Relation'}], 
```

谁能告诉我我做错了什么或任何解决方案的提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T13:35:36.097

最后，这个解决方案对我有用，感谢 googlegroups 的 Shai：

South，当它尝试构建您的自定义字段的实例时，会收集（使用规则）您班级的不同 kwargs 的值。其中之一是 `"to"`论点；您会在迁移代码中看到它。

然后，它获取它收集的值并将它们传递给构造函数。所以，实际上，你接到电话

```
fields.ParentField(related_name='set', to=orm['module.ModelClass']) 
```

但是，在您的内部`__init__`this 被翻译为

```
models.ForeignKey('self', related_name='set', to=orm['module.ModelClass']) 
```

所以参数有两个值`'to'`——第一个是位置 `'self'`。

至少，一种解决方案是对 null 和空白参数执行我建议的相同操作——将其添加到 kwargs 中，而不是直接添加到调用中。

```
kwargs.setdefault('to', 'self') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-30T03:53:33.920

我有类似的问题，但通过调用解决了它：`kwargs.pop('to', None)`。

但是，出现了下一个错误：

```
File "/.../django/db/models/fields/related.py", line 973, in resolve_related_fields
    to_field = (self.rel.to._meta.pk if to_field_name is None
AttributeError: 'str' object has no attribute '_meta' 
```

这是因为我将模型名称作为字符串而不是类实例传递。南方不支持。通过导入模型并使用它而不是字符串来修复。

下面的完整工作示例：

```
from django.db import models
from django.conf import settings

from django.db.models.loading import get_model

def _get_user_model():
    """Import django.contrib.auth.models.User or other model set in settings.AUTH_USER_MODEL"""
    model_name = getattr(settings, 'AUTH_USER_MODEL', 'auth.User')
    return get_model(*model_name.split('.', 1))

def _set_default_kwargs(kwargs):
    kwargs.setdefault('on_delete', models.SET_NULL)
    kwargs.setdefault('blank', True)
    kwargs.setdefault('null', True)
    kwargs.pop('to', None) # Remove kwargs['to'] parameter set by south migrations
    return kwargs

class ForeignKeyWithUser(models.ForeignKey):
    def __init__(self, **kwargs):
        kwargs = _set_default_kwargs(kwargs)
        User = _get_user_model()
        return super(ForeignKeyWithUser, self).__init__(User, **kwargs)

try:
    from south.modelsinspector import add_introspection_rules
    add_introspection_rules([], ["^toolkit\.models\.fields\.ForeignKeyWithUser"])
except ImportError:
    pass 
```

# c - “sizeof”对不完整类型“struct array[]”的无效应用

> ID：12873142
> 
> 赞同：8
> 
> 时间：2012-10-13T12:33:17.670
> 
> 标签：c, arrays, sizeof

我正在尝试通过将命令拆分为单独的文件来组织我的项目，以便于维护。我遇到的问题是尝试迭代在编译时定义的命令数组。我创建了一个简化的示例来重现我遇到的错误。

```
.
├── CMakeLists.txt
├── commands
│   ├── CMakeLists.txt
│   ├── command.c
│   ├── command.h
│   ├── help_command.c
│   └── help_command.h
└── main.c 
```

### ./CMakeLists.txt

```
PROJECT(COMMAND_EXAMPLE)

SET(SRCS main.c)
ADD_SUBDIRECTORY(commands)

ADD_EXECUTABLE(test ${SRCS}) 
```

### 命令/CMakeLists.txt

```
SET(SRCS ${SRCS} command.c help_command.c) 
```

### 命令/command.h

```
#ifndef COMMAND_H
#define COMMAND_H

struct command {
    char* name;
    int   (*init)(int argc, char** argv);
    int   (*exec)(void);
};

extern struct command command_table[];

#endif 
```

### 命令/command.c

```
#include "command.h"
#include "help_command.h"

struct command command_table[] = {
    {"help", help_init, help_exec},
}; 
```

### 命令/help_command.h

```
#ifndef HELP_COMMAND_H
#define HELP_COMMAND_H

int help_command_init(int argc, char** argv);
int help_command_exec(void);

#endif 
```

### 命令/help_command.c

```
#include "help_command.h"

int help_command_init(int argc, char** argv)
{
    return 0;
}

int help_command_exec(void)
{
    return 0;
} 
```

### ./main.c

```
#include <stdio.h>
#include "commands/command.h"

int main(int argc, char** argv)
{
    printf("num of commands: %d\n", sizeof(command_table) / sizeof(command_table[0]));
    return 0;
} 
```

如果你运行这个

```
mkdir build && cd build && cmake .. && make 
```

发生以下错误

```
path/to/main.c:6:40: error: invalid application of 'sizeof' to incomplete type 'struct command[]' 
```

`command_table`那么，如果我什至无法确定数组中的命令数量，我该如何迭代呢？

我意识到还有其他帖子存在同样的错误，但我现在花了一段时间试图弄清楚为什么这不起作用并继续失败：

*   [无效的应用大小到不完整类型与结构](https://stackoverflow.com/questions/8915230/invalid-application-of-sizeof-to-incomplete-type-with-a-struct)
*   [访问整数时对不完整类型 int 的无效应用](https://stackoverflow.com/questions/5240435/invalid-application-of-sizeof-to-incomplete-type-int-when-accessing-intege)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-13T12:43:03.100

为了你`sizeof(command_table)`的工作，它需要看到这个：

```
static struct command command_table[] = {
    {"help", help_init, help_exec},
}; 
```

但它只看到这个：

```
extern struct command command_table[]; 
```

看到它`sizeof()`永远无法弄清楚其中实际上有多少元素。

顺便说一句，还有一个问题。`static`使数组在所有其他模块中不可见。您必须删除它或解决它。

您的选择（删除后`static`）是：

1.  硬编码元素的数量，例如

    `extern struct command command_table[3];`

2.  定义一个额外的变量来保存元素的数量：

**命令/command.c**

```
#include "command.h"
#include "help_command.h"

struct command command_table[] = {
    {"help", help_init, help_exec},
};

size_t command_count = sizeof(command_table)/sizeof(command_table[0]); 
```

**命令/command.h**

```
...
extern struct command command_table[];
extern size_t command_count;
... 
```

然后你只需使用`command_count`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T12:38:50.253

在 中显式显示数组的元素数`commands/command.h`：

```
extern struct command command_table[3]; 
```

# java - 将数字分解为钞票

> ID：12873143
> 
> 赞同：-2
> 
> 时间：2012-10-13T12:33:25.257
> 
> 标签：java

在大学里进行了以下练习，但我无法理解最后一点。您如何将答案分解为音符。如果答案不能被 50 等除怎么办……我试过模数和数学课……

> 当地街角商店的老板卡什曼先生遇到了麻烦，因为他的员工给了错误的零钱。为了解决这个问题，他委托您创建一个程序，允许工作人员输入购物的总成本和客户支付的金额。然后程序应计算并输出有多少 50 欧元、20 欧元、10 欧元、5 欧元纸币，以及有多少 2 欧元和 1 欧元硬币作为找零给客户。Cashman 先生拒绝处理小硬币，因此尽管工作人员输入了购物成本的十进制值，但他将所有价格四舍五入到最接近的欧元，并且不理会 50c、20c、10c、5c、2c或 1c 硬币。
> 
> 按照 Mr Cashmans 的要求编写、编译和测试应用程序，并将类保存为 MakingChange.java

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T12:39:56.890

你有正确的模数方法，但也需要整数除法。让我们检查一下价值 164 欧元。

如果将 164 除以 50（使用整数除法），则得到 3。因此需要 3 张 50 欧元的钞票。

如果你计算出 164*模*50，你最终得到 14，这是你取出这三张 50 欧元钞票后剩下的值。这是您下一次迭代的起点，带有 20 欧元的钞票。

然后你就一直这样做，直到你用尽了所有的货币类型。

换句话说，伪代码可能类似于：

```
def workOutNotes (numEuros):
    left = numEuros
    //                               for 164:      numXXs   left
    num50s = int (left / 50); left = left % 50; //      3     14
    num20s = int (left / 20); left = left % 20; //      0     14
    num10s = int (left / 10); left = left % 10; //      1      4
    num5s  = int (left /  5); left = left %  5; //      0      4
    num2s  = int (left /  2); left = left %  2; //      2      0
    num1s  = left;                              //      0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T12:48:19.243

我为您准备了一段 C# 代码，它基本上将更改分解为越来越小的账单：

```
int changeAmount = 1300;
var bills = new int[] { 200, 100, 50, 20, 10, 5 };

var changeBills = new Dictionary<int, int>();
foreach(int bill in bills)
{
    changeBills.Add(bill, changeAmount / bill);
    changeAmount = changeAmount % bill;
} 
```

该代码削减了更改以适应账单，而不是购物量。但我认为让你添加这个逻辑是公平的。

# iphone - iOS 上关键 ClientState 警告的默认访问缓慢

> ID：12873144
> 
> 赞同：7
> 
> 时间：2012-10-13T12:33:31.723
> 
> 标签：iphone, ios, warnings

在测试我的 iOS 应用程序时，我收到“对关键 ClientState 的默认访问缓慢需要 0.034635 秒，容差为 0.020000”的警告 - 它似乎是间歇性发生的。我试图环顾四周，看看它是关于什么的，但我并不完全确定！任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T20:25:51.760

我最好的猜测是第一个 Viewcontroller 需要很长时间才能加载。

在向第一个视图控制器添加一个大背景 png 之前，我从未收到此消息，该控制器现在表现出相同的行为，但一直如此。取出png，我在5次加载时没有得到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T11:23:55.690

猜测与 depicus 相同：第一个 viewController 加载时间过长。

在我的情况下，应用程序首先从上次保存的 CoreData 填充 tableView。在该服务器告诉我授权已过期后，我立即开始重新验证，并且 facebook 登录视图出现在屏幕上 - 在 tableView 的顶部。

这是我得到那个错误。没有 facebook 登录，一切正常 == 足够快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-18T18:27:34.930

SMSidat - 我遇到了同样的问题，并且一直在寻找。我有一个 sqlite 数据库，在加载访问该数据库的 vc 时，它表示“默认值慢.....clientState 加载时间很长。

尝试从您的笔尖中删除自动布局。一旦我这样做了，不再有“缓慢的默认值......警告”！即使这是从 3 年前开始......希望它可以帮助某人。

这是一个链接到帮助我解决 [UIViewController 加载时间慢（ClientState 警告慢）的问题](https://stackoverflow.com/questions/14300381/slow-uiviewcontroller-load-time-slow-clientstate-warning)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-26T17:08:00.397

以我的经验，这是由于调用视图时加载视图所需的时间造成的。以我的情况为例。我有一个 TabBar 应用程序，在我的一个选项卡中它是一个画廊。我正在调用视图，但在视图中我正在获取主线程上的所有内容（大不，不）......显然，用户交互已经消失在窗口之外，应用程序将锁定直到完成。手机将花时间加载图像并呈现视图。一旦我对我的应用程序进行了多线程处理，并且在后台加载的图片不再发出警告。希望这会有所帮助，我不确定这个警告在下面是如何工作的，但是改变这个事情就摆脱了它。:)

# android - Android Horizo ntalScrollView 子宽度

> ID：12873145
> 
> 赞同：3
> 
> 时间：2012-10-13T12:33:59.470
> 
> 标签：android, width, children, horizontalscrollview

我有一个 Horizo​​ntalScrollView，其中包含一个包含一些自定义视图的 LinearLayout。现在，我通过这一行（在孩子的构造函数中）固定孩子的大小：

```
setLayoutParams(new LayoutParams(200, LayoutParams.FILL_PARENT)); 
```

我想做的是将组件的宽度设置为自身高度的 30%，而不是实际的 200px。但我仍然需要“FILL_PARENT”的高度。

当我覆盖 onMeasure 方法时，我尝试了：

```
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec)
{
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    System.out.println(widthMeasureSpec + "/" + heightMeasureSpec);
} 
```

但我得到了输出：

```
1073742024/1073742586 
```

所以看起来我在这里不能做很多事情，但我仍然没有很多信息:)

知道怎么做吗？

我准确地说我正在模拟器上进行测试（不知道这是否重要）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T12:40:36.797

你可以做一些事情，比如获取屏幕的尺寸

```
DisplayMetrics display = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics( display );
int screenW = display.widthPixels;
int screenH = display.heightPixels; 
```

并且如果您要取出 0.3 的组件的高度是整个屏幕的高度，则执行以下操作：

```
setLayoutParams(new LayoutParams((int)(screenH*0.3), LayoutParams.FILL_PARENT)); 
```

我可能误解了你的问题，我刚醒来:) 让我知道它是否有效或者你是否正在寻找其他东西

# html - CSS和HTML导航栏流利/刷新/反对主标题图像

> ID：12873148
> 
> 赞同：0
> 
> 时间：2012-10-13T12:34:07.723
> 
> 标签：html, css, dreamweaver, navbar

我遇到了一些麻烦！我相信一些非常简单的事情。然而它困扰着我。

我正在努力实现：

1) 导航栏是其上方主图像的宽度。

如果有人能为我解决这个问题，我将非常感激，这将是一个巨大的帮助。我对编码很陌生，这对我来说很难。

我已经尽我所能寻找答案，但到目前为止都失败了。

这是页面[http://i46.tinypic.com/w9a80i.jpg的图片](http://i46.tinypic.com/w9a80i.jpg)请原谅覆盖图形的白框，这很容易保护隐私等

CSS：

```
/* Reset */

html, body {
    padding:0;
    margin:0;
    }

a {
text-decoration: none;
}

ul, li {
    list-style-type: none;
}

img.floatLeft { 
    float: left; 
    margin: 4px; 
}
*
{
   margin:  0;
   padding: 0;
}

body {background-color:#F1F1F1; }

#outer { width: 900px; margin:auto;}

#wrapper { width: 900px; margin:0; background-color: #666; }

#list-nav { width: 700px; float: right;}

ul#list-nav li a {
 text-decoration:none;
 padding:5px 0;
 width: auto;
 background:#999;
 color:#eee;
 float: left;
}

ul#list-nav li a {
  text-align:center;
  border-left:1px solid #fff;
  width: 100px;
}

ul#list-nav li a:hover {
  background:#CCC;
  color:#ffff;
}

#content-fullwidth { width:100%; } 
```

HTML：

```
<!DOCTYPE HTML>

<html>

<head> 
<link href="css/styles.css" rel="stylesheet" type="text/css" media="screen">
<link href='http://fonts.googleapis.com/css?family=PT+Sans+Caption' rel='stylesheet' type='text/css'>
</head>

<body>

<div id="outer">

<div id="wrapper">
  <a href="main.html"><img src="css/Images/banner top.jpg"  /></a>

<div id="navbar">

  <ul id="list-nav">
  <li><a href="#">Home</a></li>
  <li><a href="#">About Us</a></li>
  <li><a href="#">Services</a></li>
  <li><a href="#">Products</a></li>
  <li><a href="#">Contact</a></li>  

</div>
  </div>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T13:07:45.693

我不确定我是否理解得很好，但我认为这就是你要找的。首先，您的导航是 700 像素大，您的图像和容器也是 900 像素。

使您`#list-nav : width:100%`的容器和图像一样大

那么其中的 5 个 li 必须是 ul 的 20%（因此它们具有相同的宽度）

`#list-nav li{display:inline-block;width:20%;float:left}`

[这是您修改后的代码](http://jsfiddle.net/audre7/Wfe9a/2/)

那是你想做的吗？您也可以使用 display:table-cell 技巧来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T13:41:46.833

删除#list-nav的宽度定义：`#list-nav{ /*width: 700px;*/ float: right;}`

并添加这个

```
ul#list-nav li {
    display:inline-block;
} 
```

# css - Normalize.css 文本字段超出容器

> ID：12873149
> 
> 赞同：0
> 
> 时间：2012-10-13T12:34:09.043
> 
> 标签：css, wordpress

我在我正在 Wordpress 中处理的一个小项目中使用 normalize.css，但是当我使用联系表单时，规范化导致文本字段跨越容器外部：

[http://notfilc.eu/wordpress/](http://notfilc.eu/wordpress/)

违规代码是：

```
button, input, select, textarea {
font-family: inherit;
font-size: 100%;
margin: 0;
} 
```

我可以将其从 normalize 中删除，但我想了解它为什么会消失，而我只是看不到它。HTML 非常大，因此很难实现减少的测试用例，但是如果有合理的答案，我愿意在之后制作它以供其他人学习。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T12:37:51.977

这是因为你在使用`size=40`

```
<input type="text" name="your-name" value="" class="wpcf7-form-control wpcf7-text wpcf7-validates-as-required" size="40" /> 
```

因此它溢出了..[**我的小提琴**](http://jsfiddle.net/6tdmy/)

尝试使用`size="30"`或更少，它会减少..

如果要限制字段中的字符，请使用`maxlength`

# java - Slick2D 使用 GameContainer.setDisplayMode(GameContainer.getScreenWidth(), GameContainer.getScreenHight(), true) 定位图像的最简单方法；

> ID：12873156
> 
> 赞同：0
> 
> 时间：2012-10-13T12:35:16.617
> 
> 标签：java, slick2d

我正在用 slick2D 制作游戏，我希望游戏根据正在使用的屏幕调整分辨率，所以当我初始化我的 AppGameContainer 时，我将其称为如下所示

```
AppGameContainer appgc;
try{
appgc = new AppGameContainer(appgc.getScreenWidth(), appgc.getScreenHeight(), true);

}catch.... 
```

所以我的问题是，当使用这种方法时，我是否必须使用 appgc.getScreenWidth() 和 appgc.getScreenWidth() 绘制对象并进行碰撞检测，例如，如果我想在屏幕中间绘制一个正方形，我必须这样做吗？是这样吗？

```
g.fillRect(appgc.getScreenWidth, appgc.getScreenHeight(), 50, 50); 
```

还是有一些更简单的方法可以解决这个问题，因为这可能会在以后与碰撞混淆，而不是仅仅 X 和 Y 轴？

提前感谢您提供任何有用的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:37:07.393

如果您想使用 fillRect 在屏幕中间绘制一个正方形，您必须这样做：

int square_width = 50 ; 整数 = 50 ;

```
g.fillRect((appgc.getScreenWidth+square_width)/2, (appgc.getScreenHeight+square_height)/2, square_width, square_height); 
```

确实有这个功能：

> fillRect(float x1，float y1，float width，float height)
> 
> *   x1 - 左上角的 x 坐标
> *   y1 - 左上角的 y 坐标
> *   width - 要填充的矩形的宽度
> *   height - 要填充的矩形的高度

# frameworks - 托管环境中的间歇性实体框架 3.4 错误（中等信任）

> ID：12873157
> 
> 赞同：1
> 
> 时间：2012-10-13T12:35:17.433
> 
> 标签：frameworks, entity

我有一个托管在中等信任环境（godaddy）中的应用程序。当我尝试使用该应用程序时，我遇到了定期发生的奇怪问题。

```
Request for the permission of type 'System.Security.Permissions.FileIOPermission, mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' failed. 
```

我已经阅读了许多其他关于在中等信任环境中运行的问题的帖子。我的问题真的是试图理解为什么它有时会起作用，有时我会收到上述信息。当错误发生时，它最终会自我纠正。显然，如果我回收修复的 IIS 也是如此。我希望他们是解决此问题的方法。

根据调用堆栈，它看起来与建立连接并尝试从我的程序集中加载 MetadataWorkspace 有关。我的 MetadataWorkspace 包含在我的 Web 应用程序的 App_Code 文件夹中。

部分调用栈：

```
System.Security.SecurityException: Request for the permission of type 'System.Security.Permissions.FileIOPermission, mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' failed.
at System.Security.CodeAccessSecurityEngine.Check(Object demand, StackCrawlMark& stackMark, Boolean isPermSet)
   at System.Security.CodeAccessPermission.Demand()
   at System.Reflection.Assembly.VerifyCodeBaseDiscovery(String codeBase)
   at System.Reflection.Assembly.GetName(Boolean copiedName)
   at System.Reflection.Assembly.GetName()
   at System.Data.Metadata.Edm.DefaultAssemblyResolver.AssemblyComparer`1.Equals(T x, T y)
   at System.Collections.Generic.HashSet`1.AddIfNotPresent(T value)
   at System.Collections.Generic.HashSet`1.Add(T item)
   at System.Data.Metadata.Edm.DefaultAssemblyResolver.GetAllDiscoverableAssemblies()
   at System.Data.Metadata.Edm.DefaultAssemblyResolver.GetWildcardAssemblies()
   at System.Data.Metadata.Edm.MetadataArtifactLoaderCompositeResource.LoadResources(String    assemblyName, String resourceName, ICollection`1 uriRegistry, MetadataArtifactAssemblyResolver   resolver)
   at System.Data.Metadata.Edm.MetadataArtifactLoaderCompositeResource.CreateResourceLoader(String path, ExtensionCheck extensionCheck, String validExtension, ICollection`1 uriRegistry, MetadataArtifactAssemblyResolver resolver)
   at System.Data.Metadata.Edm.MetadataArtifactLoader.Create(String path, ExtensionCheck extensionCheck, String validExtension, ICollection`1 uriRegistry, MetadataArtifactAssemblyResolver resolver)
   at System.Data.EntityClient.EntityConnection.SplitPaths(String paths)
   at System.Data.EntityClient.EntityConnection.GetMetadataWorkspace(Boolean initializeAllCollections)
   at System.Data.Objects.ObjectContext.RetrieveMetadataWorkspaceFromConnection()
   at System.Data.Objects.ObjectContext..ctor(EntityConnection connection, Boolean isConnectionConstructor)
   at System.Data.Objects.ObjectContext..ctor(String connectionString, String defaultContainerName) 
```

我有解决方法吗？

# c# - 并行继承：如何处理构造函数

> ID：12873158
> 
> 赞同：0
> 
> 时间：2012-10-13T12:35:33.863
> 
> 标签：c#, inheritance

我有两个对象的“谱系”：

1.  `Car`是一个基类`SportsCar`
2.  `Engine`是一个基类`SportsEngine`

`Car`的字段之一是,`engine`类型`Engine`。`SportsCar`覆盖它，而是有一个`engine`类型为`SportsEngine`.

的构造函数`Car`有：

```
public Car() {
    engine = new Engine();
} 
```

的构造函数`SportsCar`有：

```
public SportsCar() : base() {
    engine = new SportsEngine();
} 
```

这个想法是我有一个汽车类型的层次结构，每辆车都有一个合适的引擎（它决定了汽车功能的某些方面）。当我对汽车层次结构的某个点进行子类化时，我可以确定这辆车的发动机是否具有与现有汽车相同的马力、重量、燃料使用等，并使用现有发动机来填充该`engine`字段。如果我决定我要添加的新车应该有一个独特的引擎，那么我可以`Engine`继承层次结构来制作我的新引擎，然后我可以覆盖该`engine`字段并更改我的新车的构造函数以正确初始化它。

问题是，如果我正确理解 C#，当我创建一个新`B`的引擎实例时，将被初始化两次。严格来说，它并没有打破目前非常简单的情况。但是，会发生的是当我调用`new SportsCar()`它时，它会首先执行`engine = new Engine();`并且`engine = new SportsEngine();`.

从概念上讲，当一辆跑车被制造出来时，你不会放入通用引擎，立即将其拉出，然后放入运动引擎，这就是我认为代码最终会做的事情。

实际上，当第一个结果被丢弃时，为什么要进行两次构造函数调用？

我的解决方案是调用`virtual void CreateEngine() { engine = new Engine(); }`基础构造器，并且永远不要在儿童车中调用它。然后每辆车实现自己的`override void CreateEngine()`. 所以：

1.  这种方法有什么我没有看到的问题吗？
2.  显然在构造函数中调用虚方法是不好的。我的情况是个例外吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T12:42:30.470

在 C# 中，在构造函数中调用虚方法本身并不坏。如果您没有访问未初始化的字段，一切都很好。与 C++ 的方法相反，在构造函数中调用虚方法将调用实际对象的方法，而不是基础方法。（查看[这些](http://blogs.msdn.com/b/ericlippert/archive/2008/02/15/why-do-initializers-run-in-the-opposite-order-as-constructors-part-one.aspx) [文章](http://blogs.msdn.com/b/ericlippert/archive/2008/02/18/why-do-initializers-run-in-the-opposite-order-as-constructors-part-two.aspx)了解更多详情。）

我认为使用虚函数的方法没有任何问题；只是也许你需要一个特定于跑车的访问器来作为运动引擎。

关于让 SportsCar 声明 SportsEngine 字段的旧方法的另一个注意事项：新字段*不会*替换旧字段：您不能覆盖字段！所以你最终会得到一辆有两个引擎的汽车，这有点奇怪。只要`SportsEngine`是`Engine`，您就应该重用现有字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T12:45:01.563

正如 Vlad 指出的那样，在构造函数中调用虚函数本身并不坏。另一种选择是通过构造函数注入引擎。一种看待这个问题的方法——汽车本身是制造引擎还是有人把它放在那里？然后你会有：

```
public class Car {
    public Engine Engine { get; private set; }
    public Car(Engine engine) {
        Engine = engine;
    }
}
public class SportsCar: Car {
    public new SportsEngine Engine { 
        get { return (SportsEngine)base.Engine; } 
    }
    public SportsCar(SportsEngine engine): base(engine) {}
} 
```

然后，您还可以`CarFactory`按照 Chris 的回答中指出的那样构建您的汽车。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T12:48:12.847

构造子类时，如果超类（派生子类的类）是具体类（不是抽象类），则子类构造函数将调用超类的构造函数，以创建超类字段和方法创建子类的一部分。

在你的情况下，当你这样做时，`engine = new SportsEngine();`因为类引擎是一个具体的类，作为构造 SportEngine 派生类的一部分，引擎的构造函数也会被调用。

我的建议是让引擎成为一个抽象类（[C# 抽象类教程](http://csharp.net-tutorials.com/classes/abstract-classes/#.UHliI293hHQ)），然后从引擎抽象类 GenericEngine 和 SportsEngine 派生。您可以使用可变类型的引擎来保存这些派生类中的任何一个。

您可能还想从这篇关于[委托设计模式](http://en.wikipedia.org/wiki/Delegation_pattern)的文章开始。

# bash - 如何确保字符串之前正好有 2 个空格，之后有 0 个空格

> ID：12873165
> 
> 赞同：1
> 
> 时间：2012-10-13T12:36:44.163
> 
> 标签：bash

我得到一个可以有从零到多个前导和尾随空格的字符串。

我试图摆脱它们而没有很多hackery，但我的代码看起来很大。

如何以干净的方式做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T12:40:56.653

一样容易：

```
$ src="      some text          "

$ dst="  $(echo $src)" 

$ echo ":$dst:"
:  some text: 
```

`$(echo $src)`将摆脱所有周围的空间。比你简单地在它之前添加你需要多少空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T12:38:47.570

你怎么调出字符串？如果它是一个回声，你可以放

```
Echo "<2 spaces>". "string"; 
```

如果它是一个普通字符串，你只需在第一个 qoute 和字符串之间放置 2 个空格。

```
"<2spaces> string here" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T12:39:55.480

一种使用方式`GNU sed`：

```
sed 's/^[ \t]*/  /; s/[ \t]*$//' file.txt 
```

您可以将其应用于 bash 变量，如下所示：

```
echo "$string" | sed 's/^[ \t]*/  /; s/[ \t]*$//' 
```

并像这样保存它：

```
variable=$(echo "$string" | sed 's/^[ \t]*/  /; s/[ \t]*$//') 
```

解释：

第一次替换将删除所有前导空格并将其替换为两个空格。第二个替换将简单地从一行中删除所有滞后的空格。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-13T12:46:14.043

最简单的可能是使用外部进程。

```
value=$(echo "$value" | sed 's/^ *\(.*[^ ]\) *$/  \1/') 
```

如果您需要将一个空字符串转换为两个空格，则需要修改正则表达式；如果您不在 Linux 上，您的`sed`方言可能会略有不同。为了获得最大的可移植性，请切换到`awk`Perl，或者全部在 Bash 中完成。这有点复杂，但首先，`trailing=${value##*[! ]}`它包含任何尾随空格，你可以用`${value%$trailing}`, 修剪它们，前导空格也是如此。有关详细信息，请参阅 Bash 手册中有关变量替换的部分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-13T13:43:25.813

您可以使用正则表达式来匹配前导空格和尾随空格之间的所有内容。在`BASH_REMATCH`数组中找到匹配的文本（匹配第一个括号组的文本在元素 1 中）。

```
spcs='\ *'
text='.*[^ ]'
[[ $src =~ ^$spcs($text)$spcs$ ]]
dst="  ${BASH_REMATCH[1]}" 
```

# objective-c - 在我的 iphone 应用程序项目中使用指南针模式时，反向 MKMapView

> ID：12873173
> 
> 赞同：0
> 
> 时间：2012-10-13T12:37:33.430
> 
> 标签：objective-c, ios, mkmapview, cllocationmanager, compass-geolocation

我正在开发一个 iphone 应用程序，在该应用程序中，我在 MKMapView 的不同位置显示客户端停车位。现在我需要在 MKMapView 中使用指南针模式来显示特定方向（SE、SW、NE、NW）的客户端停车位，为此我运行下面的代码。

```
-(void)updateHeading:(CLHeading *) newHeading  
{ 

  NSLog(@"New magnetic heading: %f", newHeading.magneticHeading);
  NSLog(@"New true heading: %f", newHeading.trueHeading);

  double rotation = newHeading.magneticHeading * 3.14159/-180;

  [mapView setTransform:CGAffineTransformMakeRotation(-rotation)];

  [[mapView annotations] enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop)
 {
    MKAnnotationView * view = [mapView viewForAnnotation:obj];

    [view setTransform:CGAffineTransformMakeRotation(rotation)];

 }];  
} 
```

Everthing 在 MKMapView 中工作正常，但我的 MKMapView 以相反的顺序显示，当设备开始旋转时，我在 ios5 和 ios6 中也面临这个问题。注意：当我在美国测试这个应用程序时，地图显示正确，而我在我的位置（印度）测试应用程序时，地图变成了反向。

![MKMapView 显示反向地图，而设备开始旋转。](../Images/bbf381048bcd30f25996e115d6dc804c.png) `

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T23:33:59.647

地图是否打算在旋转时以用户为中心？如果是这样，您只需将 MKMapView 的 userTrackingMode 设置为 MKUserTrackingModeFollowWithHeading。

如果不是，那么请告诉我们您在磁性航向、真航向和旋转中看到的情况，当事情顺利和出错时。

# jquery - jqPlot，Y 轴刻度的字符名称

> ID：12873174
> 
> 赞同：3
> 
> 时间：2012-10-13T12:37:39.560
> 
> 标签：jquery, char, jqplot

这是我在 stackoverflow 上的第一个自问问题——这个网站已经帮助了我很多次。请谅解：）

我有 jqPlot 的问题，看起来很简单，但似乎并非如此。

我想在 Y 轴（刻度）上给出静态字符名称。Y 轴值来自 Y 轴上的实际高度。我想创建如下名称：值 1、值 2、值 3、值 4、值 5... 而不是（例如）1.5、3.0、4.5、7.0、100.0...

是否可以单独使用 jqPlot 配置。我看不到这样的选择，但也许有一个，我会感到羞愧:)。

预先感谢您的任何帮助。

（编辑）这是我使用的完整代码：

```
var plot2 = $.jqplot('chart2', [line_oczekiwana_srednia, line_sd_plus_1, line_sd_plus_2, line_sd_plus_3, line_sd_plus_4, line_sd_minus_1, line_sd_minus_2, line_sd_minus_3, line_sd_minus_4, line1, line_WEST4, ], {
    animate: true,
    title:'OLYMPUS LEVEL 1 0029 : Kontrola biochemii. Typ materiału: Surowica', 
    axes:{
      xaxis:{
        renderer:$.jqplot.DateAxisRenderer,
        tickOptions:{ 
          formatString:'%#d-%m-%y %#H:%M',
          angle: -30,
        },
        tickRenderer:$.jqplot.CanvasAxisTickRenderer,
        label:'Zakres czasu kontroli', 
        labelOptions:{
          fontFamily:'Helvetica',
          fontSize: '14pt'
        },
        labelRenderer: $.jqplot.CanvasAxisLabelRenderer
      },           
      yaxis:{
        numberTicks: 9,
        ticks:[3.6284,3.6863,3.7442,3.8021,3.8600,3.9179,3.9758,4.0337,4.0916],
        renderer:$.jqplot.LogAxisRenderer,
        tickOptions:{
          showGridline: false,
          **formatString:'SDx:%.1f',**
          labelPosition: 'middle', 
          angle:-0,
        },
        tickRenderer:$.jqplot.CanvasAxisTickRenderer,
        labelRenderer: $.jqplot.CanvasAxisLabelRenderer,
        labelOptions:{
            fontFamily:'Helvetica',
            fontSize: '14pt'
        },
        label:'Wartości (mmol/l)'
      },        
    },
    highlighter: {
      show: true,
      sizeAdjust: 12.5,
    },
    cursor: {
      show: true,
      zoom:true,
      dblClickReset:true,
      tooltipLocation:'sw'
    },        
    series:[
      {lineWidth:1, color: '#76a4e8', showMarker: false},
      {lineWidth:1, color: '#d8d8d8', showMarker: false},
      {lineWidth:1, color: '#d8d8d8', showMarker: false},
      {lineWidth:1, color: '#d8d8d8', showMarker: false},
      {lineWidth:1, color: '#d8d8d8', showMarker: false},
      {lineWidth:1, color: '#d8d8d8', showMarker: false},
      {lineWidth:1, color: '#d8d8d8', showMarker: false},
      {lineWidth:1, color: '#d8d8d8', showMarker: false},                                                            
      {lineWidth:1, color: '#d8d8d8', showMarker: false},
      {lineWidth:2, color: '#f4ad31', rendererOptions: {animation: {speed: 1500}}, markerOptions:{color: 'gray', style:'filledSquare'}},
      {showLine: false, color: 'red', markerOptions:{color: 'red', style:'filledSquare'}},
    ],
    legend:{
       renderer: jQuery.jqplot.EnhancedLegendRenderer,
       show: true,
       hideZeros: true,
       location: 'se',
       labels: ['Oczekiwana średnia (3.8600)', 'SD+1 (3.9179)', 'SD+2 (3.9758)', 'SD+3 (4.0337)', 'SD+4 (4.0916)', 'SD-1 (3.8021)', 'SD-2 (3.7442)', 'SD-3 (3.6863)', 'SD-4 (3.6284)', 'Wyniki kontroli (3.6284)', 'Reguła WEST4', ]
    }        

}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-13T16:53:56.237

您可以将刻度指定为[`[val, label]`](http://www.jqplot.com/docs/files/jqplot-core-js.html#Axis.ticks)对。请注意，它们必须正确订购。

```
$(document).ready(function(){
    var plot1 = $.jqplot ('chart1', [[3,7,1,4,6]],{
           axes: {
                yaxis: {
                    ticks: [[1,'-SD1'],[3,'-SD4'],[4,'MEAN'],[6,'SD1'],[7,'-SD3']]
                }
           }});
});​ 
```

![在此处输入图像描述](../Images/7e59bd5e79cbfbde80b61aadb34266b9.png)

[在这里](http://jsfiddle.net/x2gtL/1/)拉小提琴。

# objective-c - CoreData 按创建顺序排序

> ID：12873176
> 
> 赞同：1
> 
> 时间：2012-10-13T12:37:58.497
> 
> 标签：objective-c, ios, core-data

想知道，如果可能的话，我将如何按照创建顺序对 NSSet 中的实体进行排序。

我可以按某些属性对它们进行排序，但不知道如何按创建顺序排序。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T12:45:13.490

使用 Core Data 执行此操作的唯一方法是在中提供一个`creationDate`字段`Entity`并填写它。例如，您可以在实体本身中填充它`-willSave`，以便处理您的模型的控制器不必弄乱它。

# ruby - 将 twitter 拉取请求与另一个应用程序集成

> ID：12873177
> 
> 赞同：0
> 
> 时间：2012-10-13T12:37:59.697
> 
> 标签：ruby, api, web-applications, twitter

我是 webapps 的绝对新手，所以请原谅我的问题是否很幼稚或不符合标准。我被分配了一项任务来开发一个 web 应用程序，该应用程序使用特定的应用程序 API 将 twitter 拉取请求与另一个应用程序集成在一起。基本上我不知道这意味着什么。任何人都可以解释打算做什么，如果有任何此类网络应用程序的示例，如果有的话，将不胜感激，这样我就可以了解实际要做的事情.我打算用红宝石做这个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T15:33:31.957

:-)

让我们看看我是否可以在这里提供任何帮助。

有一个现有的应用程序。这个应用程序做了一些事情，并被广泛用于这一目的。你知道这个应用程序是做什么用的吗？

该应用程序有一个可以与之交互的 API。与应用程序的交互很可能包括 - 除其他外：

1.  向其中添加新信息的能力。
2.  删除其中一些现有信息的能力。
3.  能够更新其中的一些现有信息。
4.  从中查询某些信息的能力。

您的任务是编写一个将 twitter 拉取请求与此应用程序集成的 Web 应用程序。

[拉取请求](https://help.github.com/articles/using-pull-requests)是一个与 Git/Github 版本控制软件相关的术语，对于 twitter 并没有真正的意义。

看看这篇详细的博文：[使用 Ruby 和 Twitter 进行数据挖掘](http://www.ibm.com/developerworks/opensource/library/os-dataminingrubytwitter/index.html)- 可以让您更好地了解 twitter 集成的含义，以及如何使用 ruby​​ 将 twitter 与另一个应用程序集成。

希望以上所有内容都可以帮助您更清楚地了解需要做什么。或者至少要问给你任务的人一组问题。

祝你好运。

在一个稍微不相关的说明中，我强烈建议您阅读在线[Rails 教程书](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book)。它将有助于理解如何使用 Ruby on Rails 构建 Web 应用程序。它还将介绍在使用 Rails 时需要使用的所有工具，以及 Ruby/Rails 世界中的最佳实践。

# ios - 为什么 UITableViewCell 文本不左对齐？

> ID：12873182
> 
> 赞同：0
> 
> 时间：2012-10-13T12:38:42.283
> 
> 标签：ios, uitableview

为什么会这样：

```
 Profile *showProfile = [[Profile alloc] init];

    showProfile = [profileArray objectAtIndex:indexPath.row];

    if([[showProfile lastName] length] > 0){
       NSString *cellValue = [NSString stringWithFormat:@"%@ %@", [showProfile lastName], [showProfile firstName]];
       [[cell textLabel] setText:cellValue];

    } 
```

在 UITableViewCell 上而不是在左侧显示文本。我不能张贴图片给你看，但这让我很生气。文本似乎更居中。

但如果我这样做：

```
Profile *showProfile = [[Profile alloc] init];

        showProfile = [profileArray objectAtIndex:indexPath.row];

        if([[showProfile lastName] length] > 0){
           NSString *cellValue = @"This is aligned properly";
           [[cell textLabel] setText:cellValue];

        } 
```

文字很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T12:51:37.907

您确定您的姓氏前面没有任何空格吗？尝试像这样修剪字符串：

```
[[cell textLabel] setText:[cellValue stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]]]; 
```

另请注意，您当前分配了一个从未使用过的 Profile 对象！代替：

```
Profile *showProfile = [[Profile alloc] init];
showProfile = [profileArray objectAtIndex:indexPath.row]; 
```

只需使用这个：

```
Profile *showProfile = [profileArray objectAtIndex:indexPath.row]; 
```

否则，您总是首先创建一个您从不使用的新配置文件对象，这需要时间。

# javascript - Jquery DOM 元素到字符串

> ID：12873186
> 
> 赞同：-1
> 
> 时间：2012-10-13T12:38:58.287
> 
> 标签：javascript, jquery, dom

是否可以将 DOM 元素转换为字符串？基本上我需要这样的东西：

列表：

```
<div selector="HERE DOM ELEMENT" > Some element</div>
<div selector="HERE DOM ELEMENT 2" > Some element 2</div>
<div selector="HERE DOM ELEMENT 3" > Some element 3</div> 
```

当我点击一些选择器时，我希望它突出显示指定的 Dom 元素。

该列表由如下脚本生成：http: [//tinybug.smartbird.pl/example/index.html](http://tinybug.smartbird.pl/example/)。当我点击选择器列表时，它有时会选择错误的 Dom 元素。

有任何想法吗？

最好的祝福

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T12:54:48.787

您不能将 DOM 元素存储为字符串并稍后通过该字符串找到它们。您必须以某种方式识别这些元素，无论是通过 id、类，甚至是具有所有属性的标签名称，但您必须识别它们。这将帮助您在 jQuery 中使用该字符串。

我可以建议某种算法：

*   查找元素的 ID（如果有）并将其存储为字符串`#id_of_element`
*   否则找到元素的类名并使用标签名、类名和匹配元素列表中的索引存储元素，因为可能有多个元素具有相同的标签名和相同的类名
*   想一想可以针对您的问题的任何其他识别方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T13:17:12.937

**属性选择器**的值不是已经是字符串了吗？将特定**ID**放在其中的元素上怎么样？

```
<div class="selectable" selector="element_1">Click to select element 1</div>
<div class="selectable" selector="element_2">Click to select element 2</div>
<div class="selectable" selector="element_3">Click to select element 3</div>        

<div id="element_1">ELEMENT 1</div>
<div id="element_2">ELEMENT 2</div>
<div id="element_3">ELEMENT 3</div>

<script type="text/javascript">
    $("div.selectable").click(function(){
        var div_selector = $(this).attr("selector");                
        $('html').find("#"+div_selector).css("background-color", "#ddd");
    });
</script> 
```

# xtext - 如何使用 Xtext(M2M with Xtend) 和 GMF 创建图表？（初学者）

> ID：12873190
> 
> 赞同：2
> 
> 时间：2012-10-13T12:39:15.073
> 
> 标签：xtext, eclipse-gmf, xtend

我已经开始使用 Eclipse，但我还是个初学者。所以我想从这里得到一些帮助。我使用 Xtext 来阅读我的 DSL。然后我想用我已经用 GMF 定义的图表来展示实例。但是Xtext中的ecore(MFilesystem)和GMF中的ecore(Filesystem)是不同的。所以我使用 Xtend 来改变模型并创建一个 EObject(Filesystem)。但我不知道 GMF 如何使用 Xtent 的资源来创建图表。我在这里展示我的问题：

1：我在 xtext(Grammmar) 中定义了 ecore：

```
grammar org.xtext.Filesystem with org.eclipse.xtext.common.Terminals

 generate filesystem "http://www.xtext.org/Filesystem"

 MFilesystem:
(mfiles+=MFile | mfolder+=MFolder)* ;

 MFile:
'myfile' name=ID ';'
;

 MFolder:
'myfolder' name = ID ';'
; 
```

![http://i.stack.imgur.com/QrFrk.jpg](../Images/b31043279fa693cad76b00c0386cde51.png)

2：我在GMF中定义了ecore

![http://farm9.staticflickr.com/8048/8082263442_149b8e8b0f.jpg](../Images/7bb622b2bbb6d3e694627d4bf370129e.png)

![http://farm9.staticflickr.com/8336/8082305888_824c467570.jpg](../Images/e845891f8c26a0a40d2b9f4a2aa7234b.png)

3：我尝试运行 Xtext 的运行时

![http://farm9.staticflickr.com/8475/8082313936_d06206d838.jpg](../Images/54be74a9fcc844a69a64f4e59c56ad47.png)

并从我的 DSL 文件（test.filesystem）创建图表。

![http://farm9.staticflickr.com/8323/8082338379_f35894ba57_z.jpg](../Images/98164e2a6c371fbe00f1267f2367f3e7.png)

4：那我有这个问题

![http://farm9.staticflickr.com/8332/8082347529_3ca68fd520.jpg](../Images/41d88a98c955056d3bf79e5720ea2067.png)

5：所以我尝试使用 Xtend 在 Xtext 中更改我的模型

![http://farm9.staticflickr.com/8476/8082347146_dc220f9ca9.jpg](../Images/90ae8a49d9763723ebe6146c10ba06bc.png)

```
package org.xtext.generator

import org.eclipse.emf.ecore.resource.Resource

import org.eclipse.xtext.generator.IFileSystemAccess

import org.eclipse.xtext.generator.IGenerator

import org.gmf.filesystem.filesystem.Filesystem

import org.gmf.filesystem.filesystem.FilesystemFactory

import org.gmf.filesystem.filesystem.impl.FilesystemFactoryImpl

import org.xtext.filesystem.MFile

import org.xtext.filesystem.MFolder

class FilesystemGenerator implements IGenerator  {

    Filesystem myfilesystem

    FilesystemFactory myfilesystemFactory

    override void doGenerate(Resource resource, IFileSystemAccess fsa) {

        //TODO implement me

        val ast = resource.contents.get(0)

        myfilesystemFactory = new FilesystemFactoryImpl()

        myfilesystem = myfilesystemFactory.createFilesystem()

        val fi = myfilesystemFactory.createFile()

        var astFi = (ast.eContents.get(0)) as MFile

        fi.name = astFi.name

        val fo = myfilesystemFactory.createFolder()

        var astFo = (ast.eContents.get(1)) as MFolder

        fo.name = astFo.name

       }

} 
```

6：但它不起作用。我想，我做错了什么。所以我想知道，我怎样才能让 GMF`myfilesystem`用来创建图表。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T08:25:32.903

Xtext 指令

```
generate filesystem "http://www.xtext.org/Filesystem" 
```

生成一个新的元模型，而不是导入现有的元模型。相反，指定

```
import "platform:/resource/org.gmf.filesystem/model/filesystem.ecore" 
```

引用您的 GMF 编辑器正在使用的元模型。有关更多信息，请参阅[此帖子](http://blog.efftinge.de/2009/11/xtext-using-existing-ecore-models.html)。

# c# - 翻译实施

> ID：12873195
> 
> 赞同：2
> 
> 时间：2012-10-13T12:39:37.720
> 
> 标签：c#, user-interface, translate

我已经创建了`.resx`文件：`Translate.English.resx`并且`Translate.Romanian.resx`包含这样的字符串：

```
MainWindowTitle : English Value 
```

在罗马尼亚文件中：

```
MainWindowTitle : Valoarea in Romana. 
```

现在我的问题是：我如何强制程序解释这里的代码：

*   我有一个`string`叫`lang`，首先等于`en`。
*   我有`MainWindow.Text = Translate.English.MainWindowTitle`
*   现在我希望它更容易实现，所以除此之外：

    ```
    switch(lang){
        case "ro":
            MainWindow.Text = Translate.English.MainWindowTitle;
        break;

        case "en":
            MainWindow.Text = Translate.Romanian.MainWindowTitle;
        break;
    } 
    ```

所以，除此之外，我希望它是这样的：

```
 lang = "ro";
   MainWindow.Text = Translate.(lang value).MainWindowText 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T12:53:55.937

看看[这篇文章。](https://stackoverflow.com/questions/1142802/how-to-use-localization-in-c-sharp) 您必须将 resx 文件重命名为“translate.en.resx”和“translate.ro.resx”之类的名称。然后你可以做这样的事情：

```
CultureInfo.GetCultureInfo("en");
or
CultureInfo.GetCultureInfo("ro");
MainWindow.Text = translate.MainWindowText; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T15:20:47.533

楼上的人都是对的。除此之外，您还可以使用类似的方式实时更改语言。

```
private void RefreshResources(Control ctrl, ComponentResourceManager res)
{
   ctrl.SuspendLayout();
   res.ApplyResources(ctrl, ctrl.Name, CurrentLocale);
   foreach (Control control in ctrl.Controls)
      RefreshResources(control, res); // recursion
   ctrl.ResumeLayout(false);
} 
```

如果您想要一个完整的示例，请[在此处查看我的博客](http://codeuntil.blogspot.com.br/2012/06/localizable-forms-in-c-or-how-to.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T13:14:21.357

在您的项目中选择 Add New Item 和 Selected Resource Files。

取一个类似 String.resx、String.ro.resx、String.tr.resx、String.fr.resx 的名称。

**4 种不同语言的示例用法：**

```
 Console.WriteLine(Localize("name", "ro"));
  Console.WriteLine(Localize("name", "en"));
  Console.WriteLine(Localize("name", "fr"));
  Console.WriteLine(Localize("name", "tr"));

public static string Localize(string name, string languageCode)
{
  return Strings.ResourceManager.GetString(name, new CultureInfo(languageCode));
} 
```

# events - Ollydbg“ntdll 上的单步事件 - 按 shift+f8 以通过执行....”？

> ID：12873197
> 
> 赞同：7
> 
> 时间：2012-10-13T12:39:52.530
> 
> 标签：events, exception, ollydbg, ntdll

我有 olly 2 Beta，它运行良好，但它错过了 Olly 1 的一些旧功能，如调用堆栈窗口，而且它不适用于任何插件。所以我决定切换到 Olly 1.10。

问题是，每当我加载任何程序时，它都会显示“ntdll 上的单步事件 - 按 shift+f8 将执行传递给主程序”或类似的东西。当我按下组合键时，它显示“调试的应用程序无法处理执行”。我尝试将“00000000-FFFFFFFF”作为异常范围传递，并且厌倦了所有“忽略异常”选项，但应用程序崩溃了。

我正在运行 Windows 7 Ultimate 64 位。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-02T21:19:30.133

从此处下载最新的 OllyAdvanced 插件：[http](http://tuts4you.com/download.php?view.75) ://tuts4you.com/download.php?view.75 - 并在 Plugins->Olly Advanced->Additional Options 中启用“64 位兼容性修复”

如果这没有帮助，解决方法可能是不忽略异常并且不按 Shift+某事，而是在发生错误时按 F9。

# delphi - Delphi 脚本和 ASM

> ID：12873209
> 
> 赞同：1
> 
> 时间：2012-10-13T12:41:02.430
> 
> 标签：delphi, delphi-7, delphi-xe2, delphi-2010, delphi-xe

我试过

*   帕斯卡脚本
*   快速脚本
*   脚本工作室
*   IdScript 引擎

然而，没有一个支持内联 ASM。是否有一些库支持它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T12:54:19.060

AFAIK [DelphiWebScript aka DWScript](http://code.google.com/p/dwscript/)通过其语言扩展模块支持 ASM，特别是[dwsAsmLibModule](http://code.google.com/p/dwscript/source/browse/trunk/Libraries/asmLib/dwsAsmLibModule.pas)。

**更新**：找到了[Eric 的博客文章](http://delphitools.info/2010/11/18/basm-yes-we-can/)，他在其中描述了该功能。看起来您需要安装 NASM 才能在 DWScript 中使用 ASM 块。

# android - 将非本地化字符串添加到 Android 应用程序

> ID：12873211
> 
> 赞同：0
> 
> 时间：2012-10-13T12:41:12.503
> 
> 标签：android, xml, localization

我有一个应用程序，通过添加诸如`values`,等文件夹进行了一些本地化。在每个文件夹中`values-es`，`values-ru`我都有名为 strings.xml 的文件，猜猜看，字符串。其中一些需要使用所有语言，但有些只需要一种语言来满足应用程序的内部需求。但是，如果`values/strings.xml`此文件的其他版本中缺少其中的字符串，则会导致错误。我试图再添加一个文件

```
<resources>
    <string name="key">Value</string>
     ...
</resources> 
```

使用不同的名称，例如`values/additionalStrings`，但它没有用。所以我只是复制了所有文件中的所有字符串来修复应用程序。但是我怎样才能避免它并将一些额外的字符串存储在单独的 .xml 中？

问题的附加部分：另外，如果有可能（我猜是）存储更多信息，例如

```
 <resources>
        <customObject name="myName">
           text = "Value"
           extraField = 3.14
        </customObject >
         ...
 </resources> 
```

在自定义 xml 中并通过通常的方式获取它`R.filename.objectName.subFieldName`，那就太棒了。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T12:49:37.003

您要在此处存储的字符串类型不是 XML，因此尝试将它们存储在 XML 文件中实际上没有任何意义。Android 不会解析元素的内部内容并`R`根据它找到的内容在文件中创建常量。

另一种方法是将文件存储为纯文本或其他格式（如 JSON），然后将文件放入`raw`应用程序的文件夹中。然后，您可以使用[openRawResource()](http://developer.android.com/reference/android/content/res/Resources.html#openRawResource%28int%29)读取它，并根据需要对其进行解析。

# android - Android：使用 ViewPager 访问 Fragment 内的 Mapview

> ID：12873213
> 
> 赞同：4
> 
> 时间：2012-10-13T12:41:20.820
> 
> 标签：android, android-fragments, android-mapview, android-viewpager

我正在使用 View Pager 显示三个视图。

```
"Filter","Streets","Around" 
```

每个视图都由片段定义。

**我想要什么：** 我想在我的 FilterFragment 中使用 Mapview。

**我做了什么 ：**

我想在过滤器片段中使用 MapView 但无法成功运行。和获取日志分类错误：

`android.view.InflateException: Binary XML file line #33: Error inflating class com.google.android.maps.MapView`

我还在 Net 和 Stackoverflow 上搜索了有关此问题的信息，并找到了[LINK](https://stackoverflow.com/questions/5109336/mapview-in-a-fragment-honeycomb)和[LINK](https://stackoverflow.com/search?q=%5Bandroid%5D%20viewpager%20fragment%20mapview)，但由于我正在使用带有 ViewPager 的 Fragment，因此无法找到与我的问题相关的链接。

我把我的代码如下。

这是我的 MainViewPager.java 代码：

```
 package com.example.viewpageractivitydemo;

    import com.example.viewpageractivitydemo.viewpager.TitlePageIndicator;

    import android.os.Bundle;
    import android.support.v4.app.FragmentActivity;
    import android.support.v4.view.ViewPager;
    import android.util.Log;

    public class MainViewPager extends FragmentActivity {

        TestFragmentAdapter adapter;
        ViewPager pager;

        @Override
        protected void onCreate(Bundle arg0) {
            // TODO Auto-generated method stub
            super.onCreate(arg0);
            Log.i("MainViewPager","Inside Oncreate");
            setContentView(R.layout.mainviewpager);
            pager = (ViewPager) findViewById(R.id.pager);

            adapter = new TestTitleFragmentAdapter(getSupportFragmentManager());
            pager.setAdapter(adapter);

            TitlePageIndicator indicator = (TitlePageIndicator) findViewById(R.id.indicator);
            indicator.setViewPager(pager);
            pager.setCurrentItem(1);

        }

        @Override
        protected void onResume() {
            // TODO Auto-generated method stub
            super.onResume();

    //      pager.setCurrentItem(1);
        }

    } 
```

这是 TestFragmentAdapter.java 的代码

```
package com.example.viewpageractivitydemo;

import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.util.Log;

public class TestFragmentAdapter extends FragmentPagerAdapter {

    protected static final String[] CONTENT = new String[] { "Filter",
            "Streets", "Around" };
    public String TAG = "TestFragmentAdapter";
    private int mCount = CONTENT.length;

    public TestFragmentAdapter(FragmentManager fm) {
        super(fm);
        // TODO Auto-generated constructor stub
    }

    @Override
    public Fragment getItem(int position) {
        // TODO Auto-generated method stub
        Log.i(TAG, "Inside getItemMethod with position " + position);

        if (position == 0) {
            Log.i("TestFragmentAdapter","Inside if Condition");
            return FilterFragment.newInstance(position);
        } else if (position == 1) {
            return StreetsFragment.newInstance(position);
        } else if (position == 2) {
            return AroundFragment.newInstance(position);
        } else {
            return null;
        }
        // return MainFragment.newInstance(CONTENT[position % CONTENT.length]);

    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return mCount;
    }

    public void setCount(int count) {
        if (count > 0 && count <= 10) {
            mCount = count;
            notifyDataSetChanged();
        }
    }

} 
```

这是我的 FilterFragment.java 代码：

```
package com.example.viewpageractivitydemo;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class FilterFragment extends Fragment {

    /*
     * @Override protected Class<? extends Activity> getActivityClass() { //
     * TODO Auto-generated method stub return MyFilterActivity.class; }
     */

    public static Fragment newInstance(int position) {

        Log.i("FilterFragment","Inside New Instasnce");
        FilterFragment filterFragment = new FilterFragment();
        return filterFragment;

    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        Log.i("FilterFragment","Inside OcCreateView");
        View view = inflater.inflate(R.layout.filter, null);
        return view;
    }

} 
```

这是我的 filter.xml 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#C6CDD4"
    android:gravity="center"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="#93A4BA"
            android:gravity="center" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_margin="5dp"
                android:gravity="center"
                android:text="Where Am I"
                android:textColor="#ffffff"
                android:textSize="18dp"
                android:textStyle="bold" >
            </TextView>
        </LinearLayout>

        <com.google.android.maps.MapView
            android:id="@+id/whereami_mapview"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:apiKey="0-PaH6rk7RKrZSMd_lqdrZi6FazYyIlX5r6YFyA"
            android:clickable="true" />

        <!--
             <com.google.android.maps.MapView
            android:id="@+id/whereami_mapview"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:apiKey="0-PaH6rk7RKrZSMd_lqdrZi6FazYyIlX5r6YFyA" />

        -->
    </LinearLayout>

</LinearLayout> 
```

请任何人都可以建议我回答以解决我的问题。我在这上面花了很多时间。仍然对我的问题没有任何想法。提前谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T12:50:39.397

您可以使用`LocalActivityManager`在片段内托管 Activity。这是一个已弃用的类，但它提供了最简单的解决方案。

这是片段的代码（`MyFilterFragment`在您的代码中）。`YourMapActivity`是一项扩展的基本活动`MapActivity`。

```
public class MapFragment extends Fragment {
    private static final String KEY_STATE_BUNDLE = "localActivityManagerState";

    private LocalActivityManager mLocalActivityManager;

    protected LocalActivityManager getLocalActivityManager() {
        return mLocalActivityManager;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Bundle state = null;
        if (savedInstanceState != null) {
            state = savedInstanceState.getBundle(KEY_STATE_BUNDLE);
        }

        mLocalActivityManager = new LocalActivityManager(getActivity(), true);
        mLocalActivityManager.dispatchCreate(state);
    }

    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
            //This is where you specify you activity class
        Intent i = new Intent(getActivity(), YourMapActivity.class); 
        Window w = mLocalActivityManager.startActivity("tag", i); 
        View currentView=w.getDecorView(); 
        currentView.setVisibility(View.VISIBLE); 
        currentView.setFocusableInTouchMode(true); 
        ((ViewGroup) currentView).setDescendantFocusability(ViewGroup.FOCUS_AFTER_DESCENDANTS);
        return currentView;
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putBundle(KEY_STATE_BUNDLE,
                mLocalActivityManager.saveInstanceState());
    }

    @Override
    public void onResume() {
        super.onResume();
        mLocalActivityManager.dispatchResume();
    }

    @Override
    public void onPause() {
        super.onPause();
        mLocalActivityManager.dispatchPause(getActivity().isFinishing());
    }

    @Override
    public void onStop() {
        super.onStop();
        mLocalActivityManager.dispatchStop();
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        mLocalActivityManager.dispatchDestroy(getActivity().isFinishing());
    }
} 
```

* * *

**编辑：**自从发布这个答案以来，谷歌已经发布了谷歌地图 Android API，带有官方`MapFragment`类的片段支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T13:01:57.417

要使用 Google 地图，您必须扩展`MapActivity`，而您没有这样做。在文档中查看[此示例。](https://developers.google.com/maps/documentation/android/hello-mapview)本着可维护性的精神，我不会求助于使用过时功能的解决方案。

更可靠的解决方案是`MapActivity`从`FragmentActivity`. 如果您不希望或不需要与旧 Android 版本向后兼容，只需使用`MapActivity`而不是`FragmentActivity`，它应该已经包含`Fragment`在 Android 3.0 及更高版本中显示 s 所需的功能。

* * *

编辑：[这是一个为您完成的项目](https://github.com/petedoyle/android-support-v4-googlemaps)。

# jar - Java JDK .jar 归档工具替代品

> ID：12873221
> 
> 赞同：0
> 
> 时间：2012-10-13T12:42:44.210
> 
> 标签：jar, zip, cmd, java

> **可能重复：**
> [Java jar-Archive 工具 - 为包含内容的文件夹设置路径](https://stackoverflow.com/questions/12872936/java-jar-archive-tool-set-path-for-folder-with-content)

对于 CMD，JDK 的 jar.exe（用于归档和创建 .jar 文件）是否有任何替代方案？我想在使用我的小程序之前存档 .jar-Files 而无需用户安装 JDK。7zip 命令行不适用于 .jar 文件...

谢谢你， **数字克拉克**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T12:48:26.753

jar 文件是带有`.jar`文件扩展名的 zip 文件。任何 zip 工具都可以。

# android - 标签的 CSS 自定义变体在 Android 模拟器中不起作用

> ID：12873224
> 
> 赞同：0
> 
> 时间：2012-10-13T12:42:47.677
> 
> 标签：android, css, label

我在我的 tabris 应用程序中应用了一个样式表，其中包含一个标签的自定义变体。

1.  在应用程序的配置中注册样式表：application.addStyleSheet("org.eclipse.rap.rwt.theme.Default", "/theme/tourfinder.css");

2.  为标签添加自定义变体 titleLabel.setData( RWT.CUSTOM_VARIANT, "mylabel" );

3.  添加 css 资源，内容为：Label.mylabel { color: blue; 字体：32px Helvetica, Arial, Verdana, "Lucida Sans", sans-serif; }

在浏览器中，标签呈现良好（蓝色和大字体），但是当我使用 android 模拟器时，标签的自定义变体未应用。

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T10:23:48.237

在 Tabris 中，小部件的外观由运行应用程序的平台定义。这意味着在 Android 上，一个按钮看起来像一个 Android 按钮，而主题仅用于配置尺寸，但颜色等不能更改。

# javascript - JavaScript 按数组分组

> ID：12873228
> 
> 赞同：32
> 
> 时间：2012-10-13T12:43:14.853
> 
> 标签：javascript, arrays, grouping

> **可能重复：**
> [javascript 的 array_count_values 代替](https://stackoverflow.com/questions/5217136/array-count-values-for-javascript-instead)

假设我有一个简单的 JavaScript 数组，如下所示：

```
var array = ['Car', 'Car', 'Truck', 'Boat', 'Truck']; 
```

我想对每个进行分组和计数，所以我希望有一个键/值映射：

```
{
  Car   : 2,
  Truck : 2,
  Boat  : 1
} 
```

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-10-13T12:48:38.280

```
var arr = [ 'Car', 'Car', 'Truck', 'Boat', 'Truck' ];
var hist = {};
arr.map( function (a) { if (a in hist) hist[a] ++; else hist[a] = 1; } );
console.log(hist); 
```

结果是

```
{ Car: 2, Truck: 2, Boat: 1 } 
```

这也有效：

```
hist = arr.reduce( function (prev, item) { 
  if ( item in prev ) prev[item] ++; 
  else prev[item] = 1; 
  return prev; 
}, {} ); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-13T12:53:35.683

您可以遍历每个索引并将其保存在字典中，并在找到每个键时递增它。

```
count = {};
for(a in array){
  if(count[array[a]])count[array[a]]++;
  else count[array[a]]=1;
} 
```

输出将是：

```
Boat: 1
Car: 2
Truck: 2 
```

# android - 二进制 XML 文件第 44 行：膨胀类时出错

> ID：12873233
> 
> 赞同：0
> 
> 时间：2012-10-13T12:44:04.590
> 
> 标签：android, android-layout

我正在尝试将自定义按钮添加到我的 XML 我有一个线性布局和一个 RelativeLayout 里面。

当我使用 android:background="@drawable/WHATEVER" 它工作。但是当我添加@drawable 时，它​​会因`Binary XML file line #44: Error inflating class <unknown>`异常而崩溃。

问题仅适用于 RelativeLayout 按钮。

XML 文件：

```
<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:gravity="center_vertical">
    <Button
        android:id="@+id/blue_button"
        android:layout_width="75dp"
        android:layout_height="75dp"
        android:background="@color/blue" 
        android:onClick="checkSeqence"/>
    <Button
        android:id="@+id/changing_colors"
        android:layout_width="75dp"
        android:layout_height="75dp"
        android:background="@color/black"
        android:layout_centerInParent="true"
        android:clickable="false"
        />
    <Button
        android:id="@+id/yellow_button"
        android:layout_width="75dp"
        android:layout_height="75dp"
        android:layout_alignParentRight="true"
        android:background="@drawable/custom_button_yellow" 
        android:onClick="checkSeqence"/>

</RelativeLayout>   
 <Button
   android:id="@+id/green_button"
   android:layout_width="75dp"
   android:layout_height="75dp"
   android:layout_marginTop="120dp"
   android:background="@drawable/custom_button_green" 
   android:onClick="checkSeqence"/>
</LinearLayout> 
```

我如何使用可绘制对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:26:31.363

我不小心启动了动画列表 XML 而不是图层列表。将其更改为 layer-list 解决了问题

# java - Android 将 7.5 小时添加到特定日期

> ID：12873235
> 
> 赞同：0
> 
> 时间：2012-10-13T12:44:15.797
> 
> 标签：java, android

在我的 Android 应用程序中，我有 3 个用于 Hour/Minute/ 和 PM 或 AM 的微调器。我想在其中添加 7.5 小时以获得用户睡眠所需的时间。我的这个 android 应用程序是用户睡眠的计算器。例如，我想在早上 7:00 起床。到晚上 11:15，您现在应该睡觉了。请给我一些关于如何做到这一点的指导。我急需帮助。谢谢。感谢你的帮助。

像这样：

```
 /**
   * Get sleeping times corresponding to a local time
   * 
   * @param wakingTime
   *            time to wake up !
   * @return list of times one should go to bed to
   */

  public static Set<Date> getSleepingTimes(Date wakingTime) {

    Set<Date> result = new TreeSet<Date>();
    Calendar calendar = Calendar.getInstance();
    calendar.setTime( wakingTime );
    calendar.add( Calendar.MINUTE, -14 );
    calendar.add( Calendar.MINUTE, -( 2 * 90 ) );
    for ( int i = 3; i <= 6; i++ ) {
      calendar.add( Calendar.MINUTE, -90 );
      result.add( calendar.getTime() );
    }
    return result;

  } // end of getSleepingTimes method 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T13:18:16.550

```
public static Date getSleepingTimes(Date wakingTime) {

    Calendar calendar = Calendar.getInstance();
    calendar.setTime( wakingTime );
    calendar.add(Calendar.HOUR,-7);
    calendar.add(Calendar.MINUTE,-30);

    return calendar.getTime();

} 
```

但最好不要硬编码 7.5 小时。

```
public static Date getSleepingTimes(Date wakingTime, int hoursToSleep, int minutesToSleep) {

    Calendar calendar = Calendar.getInstance();
    calendar.setTime( wakingTime );
    calendar.add(Calendar.HOUR,-hoursToSleep);
    calendar.add(Calendar.MINUTE,-minutesToSleep);

    return calendar.getTime();

} 
```

像这样使用：

```
 getSleepingTime(wakingTime, 7, 30); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T12:54:18.103

您将使用[TimePicker](http://developer.android.com/reference/android/widget/TimePicker.html)组件。有方法

*   获取当前时间
*   获取当前分钟

和

*   设置当前小时
*   设置当前分钟

您可以使用它来添加额外的时间。

```
final TimePicker timePicker = (TimePicker) findViewById(R.id.a_time_picker);
int hour = timePicker.getCurrentHour();
int minute = timePicker.getCurrentMinute();
timePicker.setCurrentHour(hour + 7);
timePicker.setCurrentMinute(minute + 30); 
```

您必须自己解决 AM/PM 问题。

未来：请提供您正在开发的 Android SDK 级别。

# android - 如何使用 CommonWare 在 android 中获取位置？

> ID：12873236
> 
> 赞同：0
> 
> 时间：2012-10-13T12:44:15.927
> 
> 标签：android, geolocation, location, broadcastreceiver, android-service

有人可以分享一个使用Commonware jar library for android项目的工作代码。

我已经从 [https://github.com/alexbirkett/cwac-locpoll下载了代码](https://github.com/alexbirkett/cwac-locpoll)

我真的很喜欢及时获取位置的概念，但我无法使用这个库完成它......请帮助......

清单条目

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<receiver android:name="com.commonsware.cwac.locpoll.LocationPoller" />
<service android:name="com.commonsware.cwac.locpoll.LocationPollerService" /> 
```

活动中的代码

```
private void initLocationTracker()
    {
        try{
            alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);
            Intent intent = new Intent(this, LocationPoller.class);

            Bundle bundle = new Bundle();
            com.commonsware.cwac.locpoll.LocationPollerParameter locationPollerParameter =
                                                                        new LocationPollerParameter(bundle);

            locationPollerParameter.setIntentToBroadcastOnCompletion(new Intent(this, LocationReceiver.class));

            // try GPS connection now

            locationPollerParameter.setProviders(new String[]
                    {LocationManager.GPS_PROVIDER,LocationManager.NETWORK_PROVIDER});

            locationPollerParameter.setTimeout(60000);
            intent.putExtras(bundle);

            pendingIntent = PendingIntent.getBroadcast(this,0,intent,0);
            alarmManager.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP, SystemClock.elapsedRealtime(),PERIOD,pendingIntent);

            Toast
                    .makeText(this,
                            "Location polling every 30 minutes begun",
                            Toast.LENGTH_LONG)
                    .show();
        }
        catch (Exception e)
        {
            String s = e.getMessage();
        }
    } 
```

谢谢

**编辑：** 代码工作正常，但按预期执行，但我无法在 LocationReceiver 中接收广播。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T12:48:12.217

首先，这不是“Android 项目的通用 jar 库”。那是 Alex Birkett 的“Android 项目的通用 jar 库”的分支。

其次，正如[您链接到的网页上所述](https://github.com/alexbirkett/cwac-locpoll)：

> 在`demo/`子项目中，您将找到一个演示使用`LocationPoller`.

# java - Jetty LdapLoginModule：登录失败：所有模块都被忽略

> ID：12873237
> 
> 赞同：3
> 
> 时间：2012-10-13T12:44:17.627
> 
> 标签：java, security, web-applications, jetty, openldap

我在尝试提交登录表单时收到以下信息。有谁知道这是什么原因？谢谢。

```
2012-10-13 13:11:46.300:INFO:oejpjs.LdapLoginModule:Searching for users with filter: '(&(objectClass={0})({1}={2}))' from base dn: ou=people,dc=my-domain,dc=com
2012-10-13 13:11:46.307:INFO:oejpjs.LdapLoginModule:Found user?: true
2012-10-13 13:11:46.311:WARN:oejpj.JAASLoginService:
javax.security.auth.login.LoginException: Login Failure: all modules ignored
at javax.security.auth.login.LoginContext.invoke(LoginContext.java:921)
at javax.security.auth.login.LoginContext.access$000(LoginContext.java:186)
at javax.security.auth.login.LoginContext$4.run(LoginContext.java:683)
at java.security.AccessController.doPrivileged(Native Method)
at javax.security.auth.login.LoginContext.invokePriv(LoginContext.java:680)
at javax.security.auth.login.LoginContext.login(LoginContext.java:579)
at org.eclipse.jetty.plus.jaas.JAASLoginService.login(JAASLoginService.java:238)
at org.eclipse.jetty.security.authentication.FormAuthenticator.validateRequest(FormAuthenticator.java:209)
at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:491)
at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231)
at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1072)
at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:382)
at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:193)
at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1006)
at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)
at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:255)
at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:154)
at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)
at org.eclipse.jetty.server.Server.handle(Server.java:365)
at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:485)
at org.eclipse.jetty.server.AbstractHttpConnection.content(AbstractHttpConnection.java:937)
at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.content(AbstractHttpConnection.java:998)
at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:856)
at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:240)
at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:82)
at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:627)
at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:51)
at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)
at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)
at java.lang.Thread.run(Thread.java:680) 
```

FWIW 这是一些外围配置：

码头.xml：

```
<?xml version="1.0"?>
<Configure>
    <Call name="addBean">
        <Arg>
            <New class="org.eclipse.jetty.plus.jaas.JAASLoginService">
                <Set name="name">ldap</Set>
                <Set name="loginModuleName">ldaploginmodule</Set>
            </New>
        </Arg>
    </Call>
</Configure> 
```

ldap.conf：

```
ldaploginmodule {
    org.eclipse.jetty.plus.jaas.spi.LdapLoginModule required
    debug="true"
    contextFactory="com.sun.jndi.ldap.LdapCtxFactory"
    hostname="localhost"
    port="389"
    bindDn="cn=Manager,dc=my-domain,dc=com"
    bindPassword="secret"
    authenticationMethod="simple"
    forceBindingLogin="false"
    userBaseDn="ou=people,dc=my-domain,dc=com"
    userRdnAttribute="uid"
    userIdAttribute="uid"
    userPasswordAttribute="userPassword"
    userObjectClass="inetOrgPerson"
    roleBaseDn="ou=groups,dc=my-domain,dc=com"
    roleNameAttribute="cn"
    roleMemberAttribute="uniqueMember"
    roleObjectClass="groupOfUniqueNames";
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-04T07:22:07.613

我遇到了完全相同的问题。我在[这里](http://dev.eclipse.org/mhonarc/lists/jetty-users/msg00398.html)找到的解决方法是`forceBindingLogin`将.`"true"``ldap.conf`

我希望我对此有一个明确的解释:-(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T16:40:13.397

您是否完全按照此处的说明进行操作？

[http://wiki.eclipse.org/Jetty/Feature/JAAS](http://wiki.eclipse.org/Jetty/Feature/JAAS)

一个快速的区别是：

`<Set name="[L]oginModuleName">ldaploginmodule</Set>`

另外，您是否使用了指向文件实际位置的正确 cli 选项？

-Djava.security.auth.login.config=ldap.conf

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-19T04:55:50.027

创建系统用户并为 /content 文件夹分配所有权限后，它工作正常。

# qt - QGLFramebufferObject浮点纹理

> ID：12873244
> 
> 赞同：1
> 
> 时间：2012-10-13T12:45:14.207
> 
> 标签：qt, opengl, floating-point, fbo

我需要使用 GL_FLOAT 作为浮点计算的内部格式渲染到帧缓冲区对象。我知道如何使用本机 OpenGL 调用来实现这一点，例如：

```
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA32F, width, height,
             0, GL_RGBA, GL_FLOAT, NULL); 
```

为了使用[QPainter](http://qt-project.org/doc/qt-4.8/QPainter.html)渲染到 FBO，需要[QGLFramebufferObject](http://qt-project.org/doc/qt-4.8/qglframebufferobject.html)。但是，QGLFramebufferObject 不允许设置类型，只能设置纹理的内部格式和格式（在我的情况下用于颜色附件）。

**在 Qt 4.8 中，有没有办法在 QGLFramebufferObject 中使用浮点精度？**

我知道我可以以某种方式修补和重新编译 Qt，但这很麻烦而且不是很优雅。我还考虑编写自己的 FramebufferObject 类，但必须从 QPaintDevice 派生并提供自定义 QPaintEngine。这不是一个好的解决方案，因为 Qt 显然有一个绘图引擎，但它无法访问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T18:02:40.097

内部格式是*唯一*使纹理浮点的东西。例如：

```
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA8, width, height,
         0, GL_RGBA, GL_FLOAT, NULL); 
```

这*不是*浮点纹理。它是每个分量 8 位的无符号归一化纹理。因为那是什么[`GL_RGBA8`](http://www.opengl.org/wiki/Image_Format)意思。

所以只需将 的内部格式设置为`QGLFramebufferObject`可用的浮点格式之一。

# python - 模型表单中有多个字段时文件不上传

> ID：12873246
> 
> 赞同：0
> 
> 时间：2012-10-13T12:45:25.853
> 
> 标签：python, django, filefield

如果我的模型中有多个字段而不是文件字段，我将无法上传文件。我在页面上没有收到任何错误，但页面只是显示相同的页面而没有上传我的图像。

这是我的模型

```
class ImageUpload(models.Model):
   username = models.ForeignKey(User)
   imagefile = models.FileField(upload_to='pictures')
   isapproved = models.BooleanField()
   class Meta:
       db_table = u'imageupload'

   def __unicode__(self):
       return u'%s' % (self.imagefile) 
```

这是我的模型表格

```
class UploadImageForm(forms.ModelForm):
   def __init__(self,user, *args, **kwargs):
       super(UploadImageForm, self).__init__(*args, **kwargs)
       self.fields['username'] = forms.CharField(initial = user,
                                       widget = forms.TextInput(
                                     attrs = {'readonly':'readonly'}))
   class Meta:
       model = ImageUpload
       exclude = ('id', 'isapproved') 
```

这是我处理数据的观点。

```
def imageupload(request):
# Handle file upload
   if request.method == 'POST':
      list = ["jpeg", "jpg","JPG","JPEG","png","PNG"]
      format = imghdr.what(request.FILES['imagefile'])
      if format not in list:
          error = "Please upload a valid file format"
          form = UploadImageForm(request.user)
          return HttpResponseRedirect(reverse('myview.views.imageupload'))
      else:
          form = UploadImageForm(request.POST, request.FILES)
          if form.is_valid():
              newdoc = ImageUpload(imagefile = request.FILES['imagefile'])
              newdoc.save()
          return HttpResponseRedirect(reverse('myview.views.imageupload'))
  else:
      form = UploadImageForm(request.user) # A empty, unbound form
  documents = ImageUpload.objects.all()
  return render_to_response('imageupload.html',
       {'documents': documents, 'form': form,'media':settings.MEDIA_URL},
        context_instance=RequestContext(request)
   ) 
```

当我只使用模型表单中的文件字段时，它曾经正常工作。向模型添加更多字段后，它不会上传文件。有关如何解决此问题的任何建议？

提前致谢 `Vikram`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T01:19:40.760

只需在视图中添加一个 else 块以进行表单验证。我认为您的表格无效，您不只是在模板中打印任何错误。

```
if form.is_valid():
    newdoc = ImageUpload(imagefile = request.FILES['imagefile'])
    newdoc.save()
else:
    # do something visible here 
```

此外，如果您的表单有效，您可以只使用`form.save()`保存图像和相关数据而不是创建新`ImageUpload`对象。

此外，您的模型需要`User`保存对象。

# iphone - UISwipeGestureRecognizer 和 UIScrollView

> ID：12873247
> 
> 赞同：1
> 
> 时间：2012-10-13T12:45:32.017
> 
> 标签：iphone, ios, uiscrollview, uigesturerecognizer

我有一个垂直滚动视图（不能水平滚动），默认情况下我的标签栏是隐藏的。但是，您可以通过在屏幕底部区域向上滑动，将标签栏向上拉。（内容需要很大的垂直空间）我的困境：我希望能够检测到底部的向上滑动手势我的滚动视图区域，滚动视图没有向下滚动。所以我想在底部区域放置一个透明视图，只检测向上滑动。但这有一个问题，尽管该视图是透明的，但我的所有触摸事件都被该视图拦截并且不会转发到滚动视图。

是否可以只将点击转发到我的滚动视图，所以我仍然能够，例如，按下当前位于我的滚动视图底部区域的按钮？

我知道奇怪的问题，但我无法通过有效的解决方案找到类似的问题。

我的滚动视图代码：

```
scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 30, 320, self.view.frame.size.height - 50)];
scrollView.showsVerticalScrollIndicator = YES;
scrollView.tag = 0;
scrollView.backgroundColor = [UIColor clearColor];
scrollView.delegate = self;
scrollView.maximumZoomScale = 1.0;
scrollView.clipsToBounds = NO;
scrollView.minimumZoomScale = 1.0;
scrollView.scrollEnabled = YES;
scrollView.pagingEnabled = YES;
scrollview.contentSize = CGMakeSize(320, xxxx); 
```

我的透明视图代码：

```
UISwipeGestureRecognizer *swipeUp = [[UISwipeGestureRecognizer alloc]
                                      initWithTarget:self
                                      action:@selector(showTabBar)];
swipeUp.direction = UISwipeGestureRecognizerDirectionUp;
UIView *swipeLayer = [[swipeLayer alloc] initWithFrame:CGRectMake(30, self.view.frame.size.height - 80, 260, 40)];
[hideButtonSwipeActions addGestureRecognizer:swipeUp];
[hideButtonSwipeActions setBackgroundColor:[UIColor clearColor]];
//[hideButtonSwipeActions setUserInteractionEnabled:NO];

...
[swipeUp release]; 
```

非常感谢您的帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T22:56:48.057

您是否尝试将底部 UIView 的 userInteractionEnabled 属性设置为 NO？它仍然应该允许您的滑动识别器工作，但是它应该阻止视图吞下正常的触摸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-26T10:54:53.220

也许如果您使用触摸坐标（0,480）来跟踪视图底部？

# mysql - 分组后选择列最大值的条目

> ID：12873249
> 
> 赞同：0
> 
> 时间：2012-10-13T12:45:40.963
> 
> 标签：mysql, group-by

我目前得到这个查询：

```
SELECT 
    `users_sessions`.`userid` `users_sessions`.`lastActive` , `users`.`firstname`
FROM 
    `users_sessions` , `users`
WHERE 
    `users_sessions`.`lastActive` >= DATE_SUB( NOW( ) , INTERVAL 60 MINUTE )
AND 
    `users`.`uidNumber` = `users_sessions`.`userid` 
```

它选择`lastActive`最多 1 小时前的所有会话。现在，由于用户可以同时拥有多个会话，我只想选择具有最大`lastActive`价值的一个。

我知道我以某种方式必须使用`GROUP BY users_sessions.userid`然后选择最大的条目`lastActive`。

我怎样才能正确地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T13:03:45.930

只需选择**MAX( `users_sessions`. `lastActive`)**而不是**`users_sessions`. `lastActive`**并使用**GROUP BY `users`。`uidNumber`**. 它应该工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T12:49:27.997

```
SELECT 
    `users_sessions`.`userid`, `users_sessions`.`lastActive` , `users`.`firstname`
FROM 
    `users_sessions` , `users`
WHERE 
    `users_sessions`.`lastActive` >= DATE_SUB( NOW( ) , INTERVAL 60 MINUTE )
AND 
    `users`.`uidNumber` = `users_sessions`.`userid`
GROUP BY 
    `users_sessions`.`userid`, `users_sessions`.`lastActive` , `users`.`firstname`
HAVING
    `lastActive` = MAX(`lastActive`) 
```

# iphone - 加速嵌套的 For 循环？

> ID：12873250
> 
> 赞同：0
> 
> 时间：2012-10-13T12:45:42.437
> 
> 标签：iphone, objective-c, ipad, loops, nested

我有一堆循环可以在 plist 中为我找到正确的单词并将它们过滤掉。但是，它太慢了，plist 中总共有大约 2000 个单词。请参阅下面的代码，我需要加快速度，它会导致大约 2-3 秒的延迟！不知道我怎么能。

plist 由大约 200 个数组组成，每个数组有 10 个单词。所以我拿了 plist 的字典，`dict`. 然后遍历所有这些数组，直到找到我需要的单词。

```
for (int i = 0; i < [lang1Words count]; i++)
    {        
        NSString *errorWordLang1 = [lang1Words objectAtIndex:i];

        for (NSArray *a in [dict allValues])
        {
            for (NSString *s in a)
            {
                if ([errorWordLang1 isEqualToString:s])
                {
                    NSArray *temp = [dict allKeysForObject:a];
                    NSString *originLang1ArrayKey = [temp objectAtIndex:0];
                    NSArray *lang1Temp = [self getWordsArrayForKey:originLang1ArrayKey];
                    NSInteger index = [lang1Temp indexOfObject:errorWordLang1];
                    NSString *originLang2ArrayKey;
                    if ([languageKey isEqualToString:@"Latin"]) originLang2ArrayKey = [originLang1ArrayKey stringByReplacingOccurrencesOfString:@"Latin" withString:@"English"];
                    else if ([languageKey isEqualToString:@"English"]) originLang2ArrayKey = [originLang1ArrayKey stringByReplacingOccurrencesOfString:@"English" withString:@"Latin"];
                    NSArray *lang2Temp = [self getWordsArrayForKey:originLang2ArrayKey];
                    NSString *errorWordLang2 = [lang2Temp objectAtIndex:index];

                    if (errorWordLang2 == nil || errorWordLang1 == nil) break;

                    [orderedLang2Words addObject:errorWordLang2];
                    [orderedLang1Words addObject:errorWordLang1];
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T18:29:10.537

您应该使用 Instruments（特别是 Time Profile 工具）进行配置文件，然后发布保存的配置文件，我们可以查看并提供建议。没有分析器的优化就像用眼罩进行目标射击一样。

# ruby - 从哈希中获取值

> ID：12873254
> 
> 赞同：0
> 
> 时间：2012-10-13T12:46:43.887
> 
> 标签：ruby, jruby, trinidad-gem

我正在使用 gem `twitter_oauth`。我放入令牌，然后得到我的`access_token`. 现在我想访问这个哈希中的一些信息，但由于某种原因它不会让我这样做。我能做的最好的就是检查它：

```
access_token.inspect #=>
#<OAuth::AccessToken:0x72ca83b2 @params={:oauth_token=>"token (filtered of course)", "oauth_token"=>"token", :oauth_token_secret=>"secret", "oauth_token_secret"=>"secret", :user_id=>"id", "user_id"=>"id", :screen_name=>"Imnotanerd", "screen_name"=>"Imnotanerd"}, @response=#<Net::HTTPOK 200 OK readbody=true>, @consumer=#<OAuth::Consumer:0x6bb7645d @http_method=:post, @options={:signature_method=>"HMAC-SHA1", :request_token_path=>"/oauth/request_token", :authorize_path=>"/oauth/authenticate", :access_token_path=>"/oauth/access_token", :proxy=>nil, :scheme=>:header, :http_method=>:post, :oauth_version=>"1.0", :site=>"http://api.twitter.com", :request_endpoint=>nil}, @secret="secret", @http=#<Net::HTTP api.twitter.com:80 open=false>, @uri=#<URI::HTTP:0x384bc24e URL:http://api.twitter.com>, @key="key">, @token="token", @secret="secret"> 
```

我试图访问这样的值：

```
access_token[params]["user_id"] #gave up on this due to me reasoning that it's confusing params with the routing variable, params
access_token["params"]["user_id"]
access_token["consumer"]["secret"] 
```

所有这些都导致了内部服务器错误。报告错误时没有提供其他信息。

我正在使用 JRuby 1.7 RC2 和最新的 Trinidad Web 服务器。我也在 WEBrick 中尝试过这个，并且出现了同样的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T03:24:21.000

由于已经几个月了，我只是添加了上面@ionut-hulub 回答的官方答案，所以这个已经回答的问题不再出现而没有答案。

```
access_token.params[:user_id] 
```

# c# - 如何为 ListBox 中特定项目中的特定文本着色？

> ID：12873257
> 
> 赞同：1
> 
> 时间：2012-10-13T12:47:04.527
> 
> 标签：c#

我尝试了这段代码，但它不起作用：

```
private void LoadKeys(Dictionary<string,List<string>> dictionary, string FileName)
        {

               string line = System.String.Empty;
               using (StreamReader sr = new StreamReader(keywords))
               {
                   while ((line = sr.ReadLine()) != null)
                   {
                       string[] tokens = line.Split(',');
                       dictionary.Add(tokens[0], tokens.Skip(1).ToList());
                       listBox1.Items.Add(new MyListBoxItem(Color.Green, "Url: " + tokens[0] + " --- " + "Localy KeyWord: " + tokens[1]));
                   }
               }

        } 
```

现在类 MyListBoxItem：

```
public class MyListBoxItem 
        {
            public MyListBoxItem(Color c, string m)
            {
                ItemColor = c; Message = m;
            }
            public Color ItemColor
            {
                get;
                set;
            }
            public string Message
            {
                get;
                set;
            }
        } 
```

和 listBox1_DrawItem 事件：

```
private void listBox1_DrawItem(object sender, DrawItemEventArgs e)
        {
            MyListBoxItem item = listBox1.Items[e.Index] as MyListBoxItem;
            // Get the current item and cast it to MyListBoxItem
            if (item != null)
            {
                e.Graphics.DrawString( // Draw the appropriate text in the ListBox
                    item.Message, // The message linked to the item
                    listBox1.Font, // Take the font from the listbox
                    new SolidBrush(item.ItemColor), // Set the color
                    0, // X pixel coordinate
                    e.Index * listBox1.ItemHeight // Y pixel coordinate.  Multiply the index by the ItemHeight defined in the listbox.
                );
            }
            else
            {
                // The item isn't a MyListBoxItem, do something about it
            } 
        } 
```

在尝试使用颜色和绘制项目之前的 ListBox 中，我使用了这一行：

```
listBox1.Items.Add("Url: " + tokens[0] + " --- " + "Localy KeyWord: " + tokens[1]); 
```

结果例如： Url: [http://www.google.com](http://www.google.com) --- Localy KeyWord: google

现在，当尝试将这条线用绿色着色时，颜色仍然是黑色，而 listBox 中的文本现在是：

GatherLinks.Form1+MyListBoxItem 奇怪。

我想要做的是在listBox的第一行中着色Url：红色---蓝色和localykeyword：黄色第二行Url：绿色---红色和值例如蓝色的谷歌。

我该怎么做 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T13:03:34.900

您是否更改了列表框的 DrawMode 属性以允许所有者绘图？

```
listBox1.DrawMode = DrawMode.OwnerDrawFixed; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T13:39:28.877

我在我的一个项目中这样做。根据上面的交钥匙，我有以下几行：

```
 tasksListBox.DrawMode = DrawMode.OwnerDrawFixed;
  tasksListBox.DrawItem += listBox_DrawItem; 
```

在我的表单的初始化代码中。DrawItem 的代码处理诸如选择颜色之类的事情

```
private void listBox_DrawItem(object sender, DrawItemEventArgs e)
        {
            if (e.Index == -1)
            {
                return;
            }

            e.DrawBackground();
            Graphics g = e.Graphics;

            var selected = (e.State & DrawItemState.Selected) == DrawItemState.Selected;
            var lb = (ListBox)sender;

            if (selected)
            {
                g.FillRectangle(new SolidBrush(Color.DarkBlue), e.Bounds);
                g.DrawString(lb.Items[e.Index].ToString(), e.Font, new SolidBrush(Color.White), new PointF(e.Bounds.X, e.Bounds.Y));
                return;
            }

            var item = (ProjectToDoRecord)lb.Items[e.Index];
            var textColor = item.TrafficLight();
            g.FillRectangle(new SolidBrush(Color.White), e.Bounds);
            g.DrawString(lb.Items[e.Index].ToString(), e.Font, new SolidBrush(textColor), new PointF(e.Bounds.X, e.Bounds.Y));
        } 
```

绘制的每个项目的颜色由 textColor 确定。这设置为正在绘制的项目中定义的颜色。

# iphone - 设置 UISearchDisplayController 时显示的不透明 UIView 是否为可编辑属性？

> ID：12873258
> 
> 赞同：1
> 
> 时间：2012-10-13T12:47:24.470
> 
> 标签：iphone, objective-c, ios

当我使用半透明黑色将 a 设置`UISearchDisplayController`为活动时， UIView 会从 frame 开始在屏幕上显示动画。这个 UIView 是一个属性吗？如果是，它的名字是什么？我正在为与相关联的动画制作动画，并且需要更改动画的原点。`[mySearchDisplayController setActive:YES];``(0, 0, 0\. 0)``UISearchBar``UISearchDisplayController``UIView`

# java - LD_LIBRARY_PATH ignored on Android sometimes

> ID：12873261
> 
> 赞同：5
> 
> 时间：2012-10-13T12:47:51.497
> 
> 标签：java, android, android-ndk, shared-libraries, native

i have an android app which spawns many native executables dinamically linked with libraries i distribute with the package. To launch those binaries, i use the LD_LIBRARY_PATH environment variable to make them aware of the place to load the libraries from, but on some devices this doesn't work at all, the LD_LIBRARY_PATH is correctly updated but the binary fails to find the library anyway. This is not something i can reproduce because on my two devices ( Galaxy Nexus & Nexus 7 with stock roms ) it just works fine.

I tried many ways, for instance i spawn:

```
LD_LIBRARY_PATH=/my/package/custom/libs:$LD_LIBRARY_PATH && cd /binary/directory && ./binary 
```

And :

```
 String[] envp = { "LD_LIBRARY_PATH=" + libPath + ":$LD_LIBRARY_PATH" };

    Process process = Runtime.getRuntime().exec( "su", envp );

    writer = new DataOutputStream( process.getOutputStream() );
    reader = new BufferedReader( new InputStreamReader( process.getInputStream() ) );

    writer.writeBytes( "export LD_LIBRARY_PATH=" + libPath + ":$LD_LIBRARY_PATH\n" );
    writer.flush(); 
```

But on those devices nothing seemed to work ... so i'm starting to think that this is a kernel related issue, some kernels ( like mine ) use the LD_LIBRARY_PATH, other kernels don't ( simply ignore it, or they're using just the LD_LIBRARY_PATH that was set on application startup, therefore there's no way to change it at runtime ).

I also tried to use System.load but it didn't work, probably because those libs are not JNI ... is there something i could try before starting to think about using statically linked binaries ?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T12:47:58.200

Here is a simple wrapper I wrote about:

```
#include <android/log.h>
#include <dlfcn.h>
#include <stdio.h>
#include <string.h>

typedef int (*main_t)(int argc, char** argv);

static int help(const char* argv0)
{
    printf("%s: simple wrapper to work around LD_LIBRARY_PATH\n\n", argv0);
    printf("Args: executable, list all the libraries you need to load in dependency order, executable again, optional parameters\n");
    printf("example: %s /data/local/ttte /data/data/app/com.testwrapper/lib/ttt.so /data/local/ttte 12345\n", argv0);
    printf("Note: the executable should be built with CFLAGS=\"-fPIC -pie\", LDFLAGS=\"-rdynamic\"\n");

    return -1;
}

int main(int argc, char** argv)
{
    int rc, nlibs;
    void *dl_handle;

    if (argc < 2)
    {
        return help(argv[0]);
    }

    __android_log_print(ANDROID_LOG_DEBUG, "wrapper", "running '%s'", argv[1]);

    for (nlibs = 2; ; nlibs++)
    {
        if (nlibs >= argc)
        {
            return help(argv[0]);
        }

        __android_log_print(ANDROID_LOG_DEBUG, "wrapper", "loading '%s'", argv[nlibs]);
        dl_handle = dlopen(argv[nlibs], 0); // do not keep the handle, except for the last
        __android_log_print(ANDROID_LOG_DEBUG, "wrapper", "loaded '%s' -> %p", argv[nlibs], dl_handle);
        if (strcmp(argv[1], argv[nlibs]) == 0)
        {
            break;
        }
    }

    main_t pmain = (main_t)dlsym(dl_handle, "main");
    __android_log_print(ANDROID_LOG_DEBUG, "wrapper", "found '%s' -> %p", "main", pmain);
    rc = pmain(argc - nlibs, argv + nlibs);

//   we are exiting the process anyway, don't need to clean the handles actually

//   __android_log_print(3, "wrapper", "closing '%s'", argv[1]);
//   dlclose(dl_handle);

    return 0;
} 
```

To keep it readable, I drop most of error handling, unessential cleanup, and handling of special cases.

`Android.mk` for this executable:

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE    := wrapper
LOCAL_SRC_FILES := wrapper/main.c
LOCAL_LDLIBS    := -llog

include $(BUILD_EXECUTABLE) 
```

Note that you must take care of deployment: packaging this `wrapper` into the APK, extraction to some local path (never to USB storage or to `/sdcard`!), marking it as executable (`chmod 777`).

These are the additional parameters you must supply when you build the executables you run through the `wrapper`. If you use `ndk-build` to build them, it looks as follows:

```
LOCAL_C_FLAGS   += -fPIC -pie
LOCAL_LDFLAGS   += -rdynamic 
```

Note that you don't need to `chmod` for these executables anymore. Another trick: you can build the *secondary* executables into shared libraries, and the same wrapper will continue to work! This saves the trouble of deployment of these binaries. NDK and Android build will deliver them safely through libs/armeabi of the APK to your app's lib directory automagically.

**Update**

There seems to be a much easier solution, using the [**ProcessBuilder**](http://developer.android.com/reference/java/lang/ProcessBuilder.html) with modified environment: [https://stackoverflow.com/a/8962189/192373](https://stackoverflow.com/a/8962189/192373).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T04:17:14.540

This is not a kernel related issue, but an LD related issue: The loading of libraries is entirely in user mode, not kernel mode, so the kernel would have nothing to do with it. The kernel is only responsible for transferring control to ld, which loops over the DYNAMIC section of the ELF binary, loading any libraries, and figuring out what to do with environment variables like LD_PRELOAD and LD_PRELOAD.

The variables, however, can pose an inherent security risk: LD_LIBRARY_PATH enables you to put your own paths before the system defaults (/lib or - in Android, /system/lib). LD_PRELOAD is even worse, because it force loads (shoves) your library into the process, whether or not the process requested it - which can lead to injection of malicious code into a sensitive process. For this reason, this is not allowed on root Setuid processes. If you are in a root shell, however (i.e. on a rooted phone), most devices will allow it. The vendor might modify the LD, leading to your problems.

What you can do to work around:

*   Easiest: remount /system as read/write (mount -o remount /system), and copy your libraries to /system/lib. Will require rooted phone

*   Smartest: Statically link your libraries into your binary, while maintaing the other (system) libraries dynamic

Hope this helps,

TG

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T20:44:47.453

That's correct, you cannot rely on LD_LIBRARY_PATH on Android. You can use System.load() with any library, but this does not really help when you spawn child processes. You can use dlopen in your code, but usually it means that many lines of code must be rewritten.

A funny trick is to convert your executables into shared libraries, and load them from wrapper executables which would dlopen the libraries in dependency order.

It is highly recommended though to convert as many spawns as possible into in-process calls.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T03:47:33.737

I don't think the LD_LIBRARY_PATH will be ignored. The way you update the system environment is ok. The LD_LIBRARY_PATH will get updated under the root user.

The solution will not be able to work on some machine may have several causes:

1.  The Android app is always run under its own user id. It is not run under root privilege. If you only modify the system variable of the root user. The application may still cannot find the correct library path in its own envrionment.

2.  Even if you correctly updated the LD_LIBRARY_PATH when the application initialize itself, you still need to make sure the application's corresponding user id do have the access to read those libraries.

3.  Some vendor will modify the Android kernel for some security reasons. They may disable the loading of 3rd-party libraries from external storage or something like that.

# java - Ant：在一个文件中设置属性，在另一个文件中读取？

> ID：12873267
> 
> 赞同：0
> 
> 时间：2012-10-13T12:48:15.990
> 
> 标签：java, ant, ant-contrib

我有以下 Ant 构建文件`importer.xml`：

```
<project name="importer" basedir=".." default="build">
    <import file="imported.xml"/>

    <target name="build">
        <!-- Do some stuff... -->

        <property name="isRunningFromImporter" value="true"/>
        <antcall target="run-now"/>
    </target>
</project> 
```

还有另一个`imported.xml`使用 ant-contrib 任务的构建文件：

```
<project name="importer" basedir=".." default="build">
    <!-- Most of file omitted for brevity -->

    <target name="run-now">
        <if>
            <not-equals arg1="${isRunningFromImporter}" arg2="true"/>
            <then>
                <!--
                    This should only execute when the
                    isRunningFromImporter property is not true.
                -->
            </then>
        </if>
    </target>
</project> 
```

目标可以作为独立的`imported#run-now`Ant 任务运行，例如：

> ant -buildfile 导入的.xml 立即运行

在这种情况下，我不希望执行`<then>`子句/任务。但是，如果您运行与导入相同的任务`importer.xml`：

> ant -buildfile importer.xml 构建

然后我希望执行`<then>`子句/任务，但是，Ant 不允许我在一个文件中查看属性并在另一个文件中读取它。有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T13:09:44.597

默认情况下，它会执行您想要的操作。Antcall 的“inheritAll”属性设置为 true。

运行以下代码，显示属性的“true”实际上已设置。

```
<project name="importer" basedir=".." default="build">
    <import file="imported.xml"/>

    <target name="build">
        <!-- Do some stuff... -->

        <property name="isRunningFromImporter" value="true"/>
        <antcall target="run-now"/>
    </target>
</project>

<project name="importer" basedir="..">
    <!-- Most of file omitted for brevity -->

    <target name="run-now">

        <echo>${isRunningFromImporter}</echo>
    </target>
</project> 
```

我不熟悉`<not-equals arg1="${isRunningFromImporter}" arg2="true"/>`。我一直用它`<not><equals ...>`来代替。不等于从何而来？你确定问题不在那一行吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T13:19:41.537

您可以使用以下习惯用法自动确定特定构建文件是用户调用的主文件还是已导入：

```
<project name="projectA">
  <!-- set a property if this file is standalone, don't set it if imported -->
  <condition property="projectA.standalone">
    <equals arg1="${ant.file}" arg2="${ant.file.projectA}" />
  </condition>

  <target name="standalone-only" if="projectA.standalone">
    <echo>I am standalone</echo>
  </target>

  <target name="imported-only" unless="projectA.standalone">
    <echo>I have been imported</echo>
  </target>
</project> 
```

这里的技巧是隐式属性`ant.file`设置为在命令行上指定的*主*构建文件的路径（或在调用时隐式使用`build.xml`），但除此之外，Ant 将属性设置`ant.file.PROJECTNAME`为每个相关构建文件的路径（主要或进口）`<project name="PROJECTNAME">`。因此`${ant.file} == ${ant.file.PROJECTNAME}`当且仅当`PROJECTNAME`是顶级构建文件。

# javascript - I can't access to an variables my extension Firefox from iframe

> ID：12873272
> 
> 赞同：0
> 
> 时间：2012-10-13T12:49:02.683
> 
> 标签：javascript, firefox-addon

With the release of the new version of Firefox 16, my extension was to produce an error: "Permission denied to access property 'myVarExt'".

***browser.xul***

```
<?xml version="1.0"?>
<!DOCTYPE overlay SYSTEM "chrome://mynewext/locale/overlay.dtd">
<overlay id="mynewext-overlay"
         xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
         xmlns:svg="http://www.w3.org/2000/svg"
         xmlns:html="http://www.w3.org/1999/xhtml">
<script type="application/x-javascript;version=1.7" src="base.js"/>
<hbox id="browser">
    <splitter insertafter="sidebar-splitter"
              state="open"
              resizebefore="closest"
              resizeafter="closest"
              id="mynewext-splitter"
              hidden="true"/>
    <vbox id="mynewext-sidebar"
          insertafter="sidebar-splitter"
          width="308"
          minwidth="308"
          maxwidth="308"
          collapsed="true">
      <tabbox flex="1">
        <tabpanels id="mynewext-panels" flex="1">
          <iframe id="mynewext-dashboard" flex="1"/>
        </tabpanels>        
      </tabbox>
    </vbox>
  </hbox>
</overlay> 
```

The file *base.js* registered variables and function of the filling iframe:

***base.js***

```
...
var myVarExt='Good!'; //Is the same variable that was accessed
...
var xulContentPanel=_('dashboard');
xulContentPanel.contentDocument.location.href = 'resource://mynewext/html/bodyfirefox.xhtml';
... 
```

Access the variable *myVarExt* of iframe this way:

***bodyfirefox.xhtml***

```
<!DOCTYPE HTML><html xmlns="http://www.w3.org/1999/xhtml"><head>
    <title>myBar</title>
  </head>
<body><div id="testExtVar"></div></body>
<script type="text/javascript" >
var extVar=parent.myVarExt;
document.getElementById('testExtVar').innerHTML = extVar;
</script>
</html> 
```

In older versions of Firefox this appeal worked, and the new no. In what could be the problem?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:36:27.550

Problem solved.

1.  iframe not use *type="content"*
2.  transferred the contents of the *resource://* to ***chrome://*** (chrome has more priority than the resource).

Well and accordingly rewrote the way where paid to *resource* for *chrome*

# iphone - 具有多种效果的相机应用程序

> ID：12873275
> 
> 赞同：0
> 
> 时间：2012-10-13T12:49:35.117
> 
> 标签：iphone, objective-c, xcode, ios4, avfoundation

> **可能重复：**
> [如何在 iphone 相机应用程序中使用各种效果或滤镜](https://stackoverflow.com/questions/12813971/how-to-use-various-effect-or-filters-in-iphone-camera-application)

我想开发一个应用程序，我可以在其中集成多种效果，例如 photo Booth 软件（MAC 默认软件）我如何创建这些相机应用程序![在此处输入图像描述](../Images/f33840898705147230bd1fdaa896bbff.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T15:18:18.643

首先，您可以看看 Brad Larson 的出色 GPUImage 框架。 [https://github.com/BradLarson/GPUImage](https://github.com/BradLarson/GPUImage)

GPUImage 带有很多开箱即用的过滤器，但也提供了一个框架供您编写自己的过滤器。

# java - stud.java:112: case, default, or '}' 预期 case1:System.out.println("enter name,rollno and percenta ge");

> ID：12873278
> 
> 赞同：1
> 
> 时间：2012-10-13T12:50:16.590
> 
> 标签：java

```
switch(c)
    {
        case1:System.out.println("enter name,rollno and percentage");
            c=String.parseString(sc.readLine());
            roll=Integer.parseInt(sc.nextInt());
            per=Integer.parseInt(getNumber());
            addatbegin(c,roll,per);
            break; 
```

这些是从 110 到 117 的行，我不知道是什么错误，并且在我的开关盒中大约有 100 个这样的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T12:51:46.087

将值与值分开`case`：

```
case1: 
```

应该：

```
case 1: 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T12:52:21.383

`case1`应该是`case 1`你的语法不正确。

```
switch (c) {
    case 1:
        //Code here
        break;
    case 2:
        //Code here
        break;
    default:
        //Code here
        break;
    } 
```

我想你应该看看[Switch Statements](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html)

# c++ - 检查基类中派生模板类的相等性

> ID：12873279
> 
> 赞同：2
> 
> 时间：2012-10-13T12:50:22.160
> 
> 标签：c++, templates, function-pointers, member-pointers

这是我在这个平台上的第一个问题。如果有不清楚的地方或者我没有以适当的方式提问，我很抱歉。

下面的代码应该使用任何 C++11 编译器编译。我试图将其减少到最低限度。在此过程中，这段代码的意义可能会丢失，但应该仍然清楚的是，我正在尝试保留一个类列表和相应的成员函数，以便使用相同的参数调用它们：

```
#include <iostream>

class Base {
public:
  virtual void Call(int x) = 0;
};

template<class T> class Extended : public Base
{
  public:
  // Constructor.
  Extended(T* ptr, void (T::*memberFunction)(int)) : _ptr(ptr), _memberFunction(memberFunction) { }

  // Call function.
  void Call(int x) {
    (_ptr->*_memberFunction)(x);
  }

private:
  // Pointer to class T.
  T* _ptr;

  // Function pointer.
  void (T::*_memberFunction)(int);

};

class Test1 {
public:
  void Fun1(int x) { std::cout << "Hello " << x << std::endl; }
};

class Test2 {
public:
  void FunX(int x) { std::cout << (x * 2) << std::endl; }
};

class MyList {

 public:
 ~MyList() {
    for (auto it = _list.begin(); it != _list.end(); ++it) {
      delete (*it);
    }
  }

  template <class T> void Add(T* t, void (T::*memberFunction)(int)) {
    _list.push_back(new Extended<T>(t, memberFunction));
  }

  void CallAll(int g) {
    for (auto it = _list.begin(); it != _list.end(); ++it) {
        (*it)->Call(g);
    }
  }

private:
  std::list<Base*> _list;
};

int main() {
  MyList myList;
  Test1 test1;
  Test2 test2;
  myList.Add(&test1, &Test1::Fun1);
  myList.Add(&test2, &Test2::FunX);
  myList.CallAll(100);
} 
```

这很完美。我的问题是我不知道如何从列表中删除类和成员函数。此外，我不希望同一个类和成员函数被调用两次，这实际上是同一个问题。我需要检查两类 Base 是否相等。我可以提供一个虚函数，它给了我一个 void 指针。

```
virtual void* GetPtr() = 0; 
```

但这只会检查班级的平等性。我不知道如何检查此类的函数指针是否相等以及如何

```
template <class T> void MyList::Remove(T* t, void (T::*memberFunction)(int)) {

} 
```

必须看起来像。

有人知道问题的解决方案吗？或者这个检查是不可能的？

乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T13:08:21.520

将虚拟 isEqual 方法添加到 Base。

```
class Base {
public:
  virtual void Call(int x) = 0;
  virtual bool isEqual(const Base& other) = 0;
};

template<class T> class Extended : public Base
{

  public:
      virtual bool isEqual(const Base& other)
      {
         const Extended* otherPtr = dynamic_cast<const Extended*>(&other);
         return otherPtr != nullptr && otherPtr->_ptr == _ptr && otherPtr->_memberFunction == _memberFunction;
      }

}; 
```

并添加虚拟析构函数`Base`，否则你有内存泄漏，

并且不要在成员变量的开头使用 undescore `_ptr`- 如果必须在末尾使用：`ptr_`. 一些前导下划线保留给编译器。

# .htaccess - 将虚拟子域重写为子文件夹并保留原始 url

> ID：12873283
> 
> 赞同：1
> 
> 时间：2012-10-13T12:51:07.020
> 
> 标签：.htaccess, redirect, subdomain

我现在在网上搜索了几天，但没有找到任何回答我的问题的答案。这就是我想要做的：

我网站上的每个用户都会收到一个个人子域，例如[http://username.domain.com](http://username.domain.com)。当然，这是一个虚拟子域。

现在，我已经设置了通配符 DNS A 记录，打开 mod_rewrite 并实现：

当有人浏览 http://anysubdomain.domain.com 时，他们会被重定向到 http://www.domain.com/sub/index.php?var=anysubdomain。在 index.php 中有一个函数可以根据“var”变量（子域的名称）获取唯一信息。

我想做的是当有人浏览 http://anysubdomain.domain.com 时，他被重定向到 http://www.domain.com/sub/index.php?var=anysubdomain （就像现在一样）但是那原始 URL (http://anysubdomain.domain.com) 保存在浏览器栏中。所以看起来每个用户都有自己的子域。

这是我目前使用的 htaccess 文件：

```
RewriteEngine On 
Options +FollowSymlinks 

RewriteCond %{HTTP_HOST} !^www\.domain\.com
RewriteCond %{HTTP_HOST} !^static\.domain\.com
RewriteCond %{HTTP_HOST} ^(www\.)?(.+)\.domain.com$ [NC] 
RewriteRule ^(.*)$ http://www.domain.com/sub/index.php?username=%2 [L] 
```

如果没有，我希望一切都清楚：询问并提供更多信息！

提前致谢！

尤里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T04:21:56.377

只要您的所有子域和主域共享相同的文档根目录，您就可以`http://www.domain.com`从规则中删除该位：

```
RewriteCond %{HTTP_HOST} !^www\.domain\.com
RewriteCond %{HTTP_HOST} !^static\.domain\.com
RewriteCond %{HTTP_HOST} ^(www\.)?(.+)\.domain.com$ [NC] 
RewriteRule ^(.*)$ /sub/index.php?username=%2 [L] 
```

否则，您需要通过添加`P`标志来使用 mod_proxy：

```
RewriteCond %{HTTP_HOST} !^www\.domain\.com
RewriteCond %{HTTP_HOST} !^static\.domain\.com
RewriteCond %{HTTP_HOST} ^(www\.)?(.+)\.domain.com$ [NC] 
RewriteRule ^(.*)$ http://www.domain.com/sub/index.php?username=%2 [L,P] 
```

虽然第一种方式会更有效率。

# xaml - Windows 应用商店应用程序。用户控制

> ID：12873288
> 
> 赞同：0
> 
> 时间：2012-10-13T12:51:48.167
> 
> 标签：xaml, windows-8, windows-runtime

我有一个程序集，它有一个空白的用户控件，比如 TestControl。

当我从应用程序中的 Page 引用此控件时，XAML 设计器会产生此错误。

```
XAML parsing failed. 
```

引用了带有控件的程序集，包含了命名空间

```
xmlns:controls="using:Tfl.TestControl" 
```

设计器智能感知识别控件。

```
<controls:TestControl></controls:TestControl> 
```

应用程序构建成功，但不会运行。

那么，对于 Windows 应用商店应用程序，是否需要一些魔法才能从外部程序集中包含 UserControls？

# visual-studio-2008 - 支持 Visual Studio 2008 中新语言的参数信息工具提示

> ID：12873293
> 
> 赞同：2
> 
> 时间：2012-10-13T12:52:20.033
> 
> 标签：visual-studio-2008, parameters, tooltip

我正在尝试使用 Visual Studio SDK 支持一种新语言的智能感知。现在我正在研究参数信息工具提示。我面临的问题是，当我输入左括号时会显示工具提示，但当我开始输入参数时它会消失。我使用了 msdn 中提到的 StartParameters、NextParameter 和 EndParameters 方法，它们在内部调用 GetMethods 函数来获取参数值。这里我需要在调用这些函数之前启用触发器 ParameterStart、ParameterNext 和 ParameterEnd。当我输入参数时，我应该怎么做才能继续显示工具提示？

# sql-server-2005 - 创建复杂的存储过程以获取多表输出

> ID：12873313
> 
> 赞同：0
> 
> 时间：2012-10-13T12:55:03.530
> 
> 标签：sql-server-2005, stored-procedures, sql-server-2000, asp.net-4.0

我有产品目录，其中包含与产品相关的两个级别的类别和品牌。

表如：

产品 : ProductID | 类别ID | 品牌编号

类别：类别ID | 家长 ID | 图像（位）

我需要的是在浏览品牌页面时，我选择所有“父类别”，这些“父类别”是与已使用存储过程在该品牌下添加的产品相关联的类别的父类别......并确保获得图像列的值

# 我用了什么

```
CREATE PROCEDURE [dbo].[GetBrandProductsCats]
@iLanguageID int,
@iBrandID int
As
Begin
SELECT C.Image, C.CategoryID, C.ParentID,CD.Title, CD.Summary, BrandID = @iBrandID
FROM Categories C
    Join CategoryData CD on C.ParentID = CD.CategoryID
WHERE C.CategoryID in 
    (SELECT Products.CategoryID  
     FROM Products 
     WHERE Products.BrandID = @iBrandID)

End
GO 
```

这实际上有效，但图像列值不适用于父类别

有任何想法吗 ？希望你有一个原因我累了:)

谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T17:40:09.120

这是与我一起工作的代码：

# 对于 SQL 存储过程

```
CREATE PROCEDURE [dbo].[GetBrandProductsCats]
@iLanguageID int,
@iBrandID int
As
Begin
select C.CategoryID,C.ParentID, BrandID = @iBrandID, C.Image, CD.Title, CD.Summary from Categories C
Join CategoryData CD on C.CategoryID = CD.CategoryID
Join BrandsCategories BC on BC.CategoryID = C.CategoryID and  BC.BrandID = @iBrandID
Where C.ParentID=0 and C.Status=1 and CD.LanguageID=@iLanguageID
End
GO 
```

# 对于代码：

我使用存储中的父 ID 来获取产品猫及其图像，并为子猫创建了一个函数：

```
<asp:Repeater id="rpCats" runat="server" >
<ItemTemplate>
<a href="categories.aspx?pid=<%# DataBinder.Eval(Container.DataItem, "ParentID") %>&brandid=<%# DataBinder.Eval(Container.DataItem, "BrandID") %>"><%# DataBinder.Eval(Container.DataItem, "Title") %></a>
<%# DataBinder.Eval(Container.DataItem, "Summary") %>
<asp:Repeater id="rpSubCats" runat="server" DataSource='<%# GetSubCats(CInt(DataBinder.Eval(Container.DataItem, "ParentID")))%>'>
<ItemTemplate >
<a href='products.aspx?pid=<%# DataBinder.Eval(Container.DataItem, "ParentID") %>&cid=<%# DataBinder.Eval(Container.DataItem, "CategoryID") %>&brandid=<%# DataBinder.Eval(Container.DataItem, "BrandID") %>'><%# DataBinder.Eval(Container.DataItem, "Title") %></a>
</ItemTemplate>
</asp:Repeater>
<div id="tblPic" runat="server">
<asp:Image id="imgThumb" runat="server" Borderwidth="0" Width="70px"></asp:Image>
</div>
<asp:TextBox id="txtImage" runat="server" Visible="False" Text='<%# DataBinder.Eval(Container.DataItem, "Image") %>'></asp:TextBox>
<asp:TextBox id="txtID" runat="server" Visible="False" Text='<%# DataBinder.Eval(Container.DataItem, "ParentID") %>'></asp:TextBox>
</ItemTemplate>
</asp:Repeater> 
```

# 这是 GetSubCats 函数

```
Public Function GetSubCats(ByVal intParentID As Integer) As DataView
If Request("brandid") <> "" Then
Dim objDB As New ProductsDB
Dim dsSubCats As New DataSet
objDB.daGetBrandProductsSubCats.SelectCommand.Parameters("@iParentID").Value = intParentID
objDB.daGetBrandProductsSubCats.SelectCommand.Parameters("@iLanguageID").Value = System.Configuration.ConfigurationManager.AppSettings("LanguageID")
objDB.daGetBrandProductsSubCats.SelectCommand.Parameters("@iBrandID").Value = Request("brandid")
objDB.daGetBrandProductsSubCats.Fill(dsSubCats)
Dim dvSubCats As DataView = dsSubCats.Tables(0).DefaultView
GetSubCats = dvSubCats
End If
End Function 
```

谢谢大家，希望有帮助

# ios - iOS 通过应用内购买添加大量产品

> ID：12873314
> 
> 赞同：2
> 
> 时间：2012-10-13T12:55:04.720
> 
> 标签：ios, in-app-purchase

我正在为我的公司开发 iphone 应用程序，他们想使用应用内购买销售大量产品......

但问题是使用 iap，我们必须为每个产品添加一条应用商店记录，其中包含有关该产品的元数据及其价格，正如我之前所说，我们拥有大量数据。所以我正在考虑添加一些虚拟产品，每个产品都有不同的等级价格，当用户从我的商店购买产品时，我将此产品与应用商店中的一个虚拟产品映射（取决于价格tier)，然后我通过 SKMutableProduct.requestData 发送一个标识符，并在交易中接收它，以了解用户购买了哪种产品。

这样，如果我有数百万个价格为 5 个轮胎的产品，我可以只将 5 个产品添加到应用商店，但如果苹果会接受，我不会接受……那是正常的吗？你怎么看 ？如果不是，我能用大量产品做什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T13:47:09.877

Application Loader 提供了从平面文件批量上传 IAP 产品信息的能力。

转到 iTunes Connect->管理您的应用程序，然后滚动到底部并下载应用程序加载器（如果您还没有）并选择“查看指南”。您需要查看“从文件创建包”部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T13:16:12.727

不，这不正常，Apple 不允许这样做。在 iTunes Connect 中为每个产品创建一个条目很重要。如果用户恢复购买，您提议的方式将不起作用。

此外，非消耗性产品的性质是它们被购买一次并且永远拥有，这不适用于您的建议，因为您不能两次购买非消耗品。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-26T09:13:49.460

通过 OS X 上的应用程序加载器和 Google Play 开发者控制台中的 CSV 上传，您可以一次性上传多个应用内购买产品。为了简化流程，我制作了一个小工具来帮助您生成这些文件。如果您需要更多定制，它也是一个很好的起点，可以教您所有的来龙去脉。

您可以在这里查看全部内容：http: [//niklausgerber.typed.com/blog/an-easy-way-to-generate-batch-upload-files-for-in-app-purchase-items-for-itunes -connect-and-google-play-developer-console](http://niklausgerber.typed.com/blog/an-easy-way-to-generate-batch-upload-files-for-in-app-purchase-items-for-itunes-connect-and-google-play-developer-console)

# css - 使用 CSS 使 Button 缩小

> ID：12873318
> 
> 赞同：0
> 
> 时间：2012-10-13T12:55:27.313
> 
> 标签：css

我有一个按钮，我想给出被按下的外观，除了视觉方面，我想将按钮一直缩小 1px，并保持其位置。

我对此进行了多次尝试，但似乎无法理解。

有人帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T13:12:12.177

在这里，我制作了一个按钮，它可以提供**Press**效果，并且它会在不移动的情况下**缩小**一个像素。

[**我的小提琴**](http://jsfiddle.net/eytcN/1/)

HTML：

```
<input type="button" class="demo" value="Press Me" />​ 
```

CSS：

```
.demo {
   background: #f5f5f5; /* Old browsers */
   background: -moz-linear-gradient(top,  #f5f5f5 0%, #dddddd 100%); /* FF3.6+ */
   background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#f5f5f5), color-stop(100%,#dddddd)); /* Chrome,Safari4+ */
   background: -webkit-linear-gradient(top,  #f5f5f5 0%,#dddddd 100%); /* Chrome10+,Safari5.1+ */
   background: -o-linear-gradient(top,  #f5f5f5 0%,#dddddd 100%); /* Opera 11.10+ */
   background: -ms-linear-gradient(top,  #f5f5f5 0%,#dddddd 100%); /* IE10+ */
   background: linear-gradient(to bottom,  #f5f5f5 0%,#dddddd 100%); /* W3C */
   filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f5f5f5', endColorstr='#dddddd',GradientType=0 ); /* IE6-9 */
   border: 1px solid #dddddd;
   padding: 5px;
   font-size: 18px;
   margin: 20px;
   cursor: pointer;
}

.demo:active {
   background: #dddddd; /* Old browsers */
   background: -moz-linear-gradient(top,  #dddddd 0%, #f5f5f5 99%); /* FF3.6+ */
   background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#dddddd), color-stop(99%,#f5f5f5)); /* Chrome,Safari4+ */
   background: -webkit-linear-gradient(top,  #dddddd 0%,#f5f5f5 99%); /* Chrome10+,Safari5.1+ */
   background: -o-linear-gradient(top,  #dddddd 0%,#f5f5f5 99%); /* Opera 11.10+ */
   background: -ms-linear-gradient(top,  #dddddd 0%,#f5f5f5 99%); /* IE10+ */
   background: linear-gradient(to bottom,  #dddddd 0%,#f5f5f5 99%); /* W3C */
   filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#dddddd', endColorstr='#f5f5f5',GradientType=0 ); /* IE6-9 */
   border: 1px solid transparent;
} 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T13:15:46.547

我认为对于“按下”效果，您可能想要更改填充而不是大小！

像这样：

```
.MyButton {
    margin:10px 10px;    
    line-height:14px;
    font-size:14px;
    text-align:center;
    padding:3px 5px;
}

.MyButton:active {
    padding:3px 4px 3px 6px;
} 
```

**这里有一个[jsfiddle](http://jsfiddle.net/9vcNk/1/)。**我认为更改填充看起来比调整按钮大小更好，更不用说如果您调整按钮大小，您还可能会更改其周围元素的位置，这在页面上看起来很奇怪。

# php - PHP - 解决方法未定义的数组索引

> ID：12873321
> 
> 赞同：0
> 
> 时间：2012-10-13T12:55:55.073
> 
> 标签：php

我试图简单地将 +1 添加到这样的数组中

```
$game['teamA']['goals']++; 
```

但是它会给我一个关于未定义索引的错误。我猜那是因为`$game['teamA']['goals']`在我为其添加值之前没有设置。

但是没有办法解决这个问题吗？

我可以`$game['teamA']['goals'] = 0`在模拟开始时设置，但是我必须用任意球、点球、卡等来设置，并且为两支球队都这样做。没有其他方法可以做到这一点吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T13:01:05.167

我建议您按照您的建议进行“适当的初始化”。这会给你的程序添加一些代码，但每次更新都要检查它总是更好。最好做

```
$game = array( 'teamA' => array('goals'       => 0,
                                'freekicks'   => 0,
                                'penalties'   => 0,
                                // etc ...                       
                          ),
               'teamB' => array('goals'       => 0,
                                'freekicks'   => 0,
                                'penalties'   => 0,
                                // etc ...
                          )
        ); 
```

代替

```
if(isset($game['teamA']['goals']))
    $game['teamA']['goals']++;
else
    $game[teamA]['goals'] = 1; 
```

正确初始化变量并没有错——所有变量。甚至建议这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T13:01:25.633

您应该始终在使用变量之前对其进行初始化。一种方法是：

```
$game = array('teamA' => 
                  array(
                      'goals' => 0,
                      'freekicks' => 0,
                      'penalties' => 0,
                      ....
                  ),
              'teamB' =>
                  array(
                      'goals' => 0,
                      'freekicks' => 0,
                      'penalties' => 0,
                      ...
                  )
              ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T13:08:01.133

编写一个包装函数来设置值。

```
<?php

function increment(&$dict, $key1, $key2) {
  if (!isset($dict, $key1))
    $dict[$key1] = array();
  if (!isset($dict[$key1], $key2))
    $dict[$key1][$key2] = 1;
  else
    $dict[$key1][$key2] ++;
}

$game= array();
increment($game, "teamA", "goals");
var_dump( $game);
?> 
```

这实际上取决于您对*运行时*的期望；如果经常调用这些操作，最好在执行其他任何操作之前创建所有数组索引，例如[https://stackoverflow.com/a/12873359/1689451](https://stackoverflow.com/a/12873359/1689451)建议的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T12:59:01.123

你可以做一件事。在递增之前，检查数组是否存在，如果不存在，则创建一个！就如此容易。您可以使用名为 的内置函数[`isset()`](http://php.net/manual/en/function.isset.php)，该函数检查变量是否存在。

### 短途：

```
(isset($game['teamA']['goals']) ? $game['teamA']['goals']++ : $game['teamA']['goals'] = 1; 
```

### 或使用`if`条件：

```
if (isset($game['teamA']['goals'])
    $game['teamA']['goals']++;
else
    $game['teamA']['goals'] = 1; 
```

# windows-8 - 如何在 Metro UI（如任务管理器）中显示 Windows 8 桌面应用程序？

> ID：12873323
> 
> 赞同：4
> 
> 时间：2012-10-13T12:55:59.157
> 
> 标签：windows-8, microsoft-metro, taskmanager

最近我注意到 Windows 8 任务管理器可以显示在 Metro UI 中。

要求是您必须始终将其设置在顶部（通过“选项 -> 始终在顶部”菜单）。

设置永远在最上面后，你可以在桌面启动任务管理器，切换到Metro，你可以看到任务管理器显示在Metro中。

或者您可以直接在 Metro 中启动任务管理器（按 Ctrl+Shift+Esc 或 Ctrl+Alt+Delete）。

我只想知道如何在其他应用程序中实现这一点？如果其他桌面应用程序始终位于顶部，则它们不会有此行为。

Windows 8 任务管理器是一个特殊的应用程序吗？也许它是桌面应用程序和 Metro 应用程序的混合体？或者有一些隐藏的 Windows API 可以实现这一点？

我想知道如何做到这一点的原因是我想编写一个始终显示在 Metro 中的时钟小工具（在屏幕的一角）。因此，当我想知道时间时，我不必调出 Windows Charm（按 Win+C）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T13:32:05.407

有一种方法可以通过使用清单文件并做一些事情来做到这一点:)

如何 ？

1.  准备项目：

    *   `level=highestAvailable`使用和将清单文件添加到您的 UI 项目`uiAccess=true`
    *   mainWindow 应该有两个属性：`ShowInTaskbar`和`TopMost`启用。
2.  签署应用程序：构建您的项目。如果您此时尝试运行该应用程序，它将无法运行，因为您需要对其进行签名。请参阅[此链接](http://techsupt.winbatch.com/webcgi/webbatch.exe?techsupt/nftechsupt.web+WinBatch/Manifest+Manifest~Faqs.txt)了解如何操作。

3.  移动到受信任的位置：您需要将应用程序复制到受信任的位置： `C:\program files' 'C:\program files x86' or 'C:/Windows/system32`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T17:57:37.440

您不可能编写执行此操作的应用程序。任务管理器是一个具有特殊权限的应用程序，您无法将其授予其他应用程序。

# macos - Mono c# 控制台应用程序，使用 mkbundle 错误创建独立

> ID：12873326
> 
> 赞同：2
> 
> 时间：2012-10-13T12:56:17.777
> 
> 标签：macos, mono, console, mkbundle

尝试为控制台创建一个可以在 Linux 上运行的独立应用程序，工作环境在 Mac os x 10.7 上。

1.) 打开 Monodevelop 并创建新的解决方案，一个“C# 控制台项目”。2.) 构建应用程序，exe 将在 bin/Release 文件夹中创建 3.) 在 mac os x 打开终端，转到文件夹并键入： **mkbundle -o HelloTest HelloWorld.exe --deps**

这将发生：

```
OS is: Darwin
Sources: 1 Auto-dependencies: True
   embedding: /Users/fredrickbacker/Documents/Mono/HelloWorld/HelloWorld/bin/Release/HelloWorld.exe
   embedding: /Library/Frameworks/Mono.framework/Versions/2.10.9/lib/mono/4.0/mscorlib.dll
Compiling:
as -arch i386 -o temp.o temp.s 
cc -arch i386 -g -o HelloTest -Wall temp.c `pkg-config --cflags --libs mono-2`  temp.o
temp.c:2:39: error: mono/metadata/mono-config.h: No such file or directory
temp.c:3:36: error: mono/metadata/assembly.h: No such file or directory
temp.c:6: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘assembly_bundle_HelloWorld_exe’
temp.c:8: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘assembly_bundle_mscorlib_dll’
temp.c:10: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
temp.c:22: error: ‘NULL’ undeclared here (not in a function)
temp.c: In function ‘mono_mkbundle_init’:
temp.c:26: warning: implicit declaration of function ‘mono_register_bundled_assemblies’
temp.c:26: error: ‘bundled’ undeclared (first use in this function)
temp.c:26: error: (Each undeclared identifier is reported only once
temp.c:26: error: for each function it appears in.)
temp.c: In function ‘main’:
temp.c:118: warning: implicit declaration of function ‘mono_set_dirs’
[Fail] 
```

关于我做错了什么有什么建议吗？想要一个从 osx 开发的独立 linux 应用程序。拉我的头发几个小时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T12:58:50.253

您无法从 OSX 构建将在 Linux 平台上使用的二进制文件。请记住，**mkbundle**构建**本机**平台代码，而不是中间/JIT 可编译/MSIL 代码。

这并不能解决您在 OSX 上遇到的错误（我不知道出了什么问题），但是如果您希望您的应用程序在 Linux 上运行，请在 Linux 机器上安装 Mono 并从那里运行 mkbundle。

# php - 在 BUTTON 上保存表单数据单击进入数据库 + php + mysql

> ID：12873332
> 
> 赞同：0
> 
> 时间：2012-10-13T12:57:44.253
> 
> 标签：php, html, mysql

如何通过简单的按钮单击将表单数据保存到数据库中？并将数据存储到 BUTTON click 上的会话变量中？可能吗 ？我不想提交按钮。感谢您的建议。请尽快回复..我已经在谷歌上搜索了一整天，直到现在还没有得到任何解决方案。请回复我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T12:59:37.973

您可以为此使用 AJAX 或使用该`form.submit()`属性。 [http://www.javascript-coder.com/javascript-form/javascript-form-submit.phtml](http://www.javascript-coder.com/javascript-form/javascript-form-submit.phtml)

```
<form name="postForm" action="post.php">
Search: <input type='text' name='query' />
<button onclick="javascript: submitform();" value="Click me" />
</form>
<script type="text/javascript">
function submitform()
{
  document.postForm.submit();
}
</script> 
```

# iphone - 应用程序进入前台后 viewWillAppear 不再触发

> ID：12873334
> 
> 赞同：0
> 
> 时间：2012-10-13T12:57:49.503
> 
> 标签：iphone, objective-c, viewwillappear

当我在没有调用 viewWillAppear 之后进入前台时，谁能指导我如何在前台之后触发我的 viewWillAppear 方法

感谢提前

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T13:38:19.363

在任何应用程序中，当您的应用程序进入后台或进入前台时，您的 viewController 的委托方法将不会被调用，您的应用程序委托方法将被调用。

Apple 为每个应用程序委托方法提供了通知，您可以在 viewControllers 中实现它们，您可以在其中解决最小化和最大化应用程序的问题。

只需`UIApplicationWillResignActiveNotification`用于检测应用程序进入后台并使用`UIApplicationWillEnterForegroundNotification`或`UIApplicationDidBecomeActiveNotification`用于检测应用程序返回前台。

在适当的地方添加和删除这些通知，主要是`viewDidLoad`在`viewDidUnLoad`.

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T13:48:13.170

您可以在 appdelegate 的方法中找出哪个视图控制器位于顶部：

```
- (void)applicationWillEnterForeground:(UIApplication *)application{
    /* find out the top view controller as

    self.navigationController.visibleViewController
                 OR
    self.navigationController.topViewController
    and find out its kind using:
    [self.navigationController.visibleViewController isKindOfClass:[YourViewControllerClass Class]];
    */
} 
```

# gmail - Gmail 上下文小工具 - 自定义提取器和预设

> ID：12873338
> 
> 赞同：1
> 
> 时间：2012-10-13T12:58:09.020
> 
> 标签：gmail, gmail-contextual-gadgets

我正在将 AgileCRM 与 Google Apps 和上下文小工具集成。我能够相当快地破解 open-auth & gadget xml。但是，我对上下文小工具有疑问。

要求很简单——它需要获取发件人的电子邮件地址和姓名。

接下来，如果正文或主题中有任何电子邮件地址，它也需要获取它。

我发现我们不能提供多个预装提取器（输出是随机匹配的）并开始编写自定义提取器。我的提取器相当简单——它只获取 from_name、from_personal 和 from_subject。

```
<?xml version="1.0" encoding="UTF-8" ?>
<OpenCOBData id="Agile">
 <ExtractorSpec platform="gmail" language="en">
   <Response platform="gmail" format="cardgadget">
     <Output name="email_sender">{@__FROM_ADDRESS__}</Output>
     <Output name="email_name">{@__FROM_PERSONAL__}</Output>
     <Output name="email_subject">{@__SUBJECT__}</Output>
   </Response>
 </ExtractorSpec>
</OpenCOBData> 
```

没有问题。当与以下扩展一起使用时，它也能很好地工作。

```
<Extension id="FromEmailAddressExtractor" type="contextExtractor">
  <Name>Email ids in From</Name>
  <Url>623403448797:Agile</Url>
  <Triggers ref="AgileCRMGadget"/>
  <Scope ref="emailFrom"/>
   <Scope ref="emailName"/>
   <Scope ref="emailBody"/>
   <Scope ref="emailSubject"/>
   <Container name="mail"/>
</Extension> 
```

因此，我可以毫无问题地获取发件人的姓名和电子邮件。但是，当我现在尝试获取主题或正文中的电子邮件地址时，就会出现问题。

```
<Extension id="SubjectBodyEmailAddressExtractor" type="contextExtractor">
  <Name>Email ids in Subject or body</Name>
  <Url>google.com:EmailAddressExtractor</Url>
  <Param name="email" value=".*"/>
  <Triggers ref="AgileCRMGadget"/>
  <Scope ref="emailBody"/>
  <Scope ref="emailSubject"/>
  <Container name="mail"/>
</Extension> 
```

当我添加这个时，只有这个会触发小工具，我错过了发件人的电子邮件和姓名。它也可以单独工作，但两者都可以，只有这会触发小工具。

有没有办法让它同时适用于两者？在我看来，第一个触发的将触发小工具。

我可以有一个定制和预先确定的结果吗？如果是，请让我知道我是否在某个地方出错了。

谢谢。

# processor - 在多周期处理器中实现 MADD 指令

> ID：12873339
> 
> 赞同：2
> 
> 时间：2012-10-13T12:58:33.997
> 
> 标签：processor

我需要使用乘法器和 HI LO 寄存器修改此处显示的多周期处理器的数据路径[http://kujo.cs.pitt.edu/index.php/Image:Datapath.png](http://kujo.cs.pitt.edu/index.php/Image:Datapath.png)以使其能够执行指令

```
MADD rs,rt 
```

具有以下效果

```
HI,LO ← HI,LO + R[rs] × R[rt] 
```

乘法器在内部 64 位寄存器中形成乘积，结果以高 32 位半和低 32 位的形式获得。我无法定义此工作所需的控制信号并实际理解指令的执行方式。谁能帮我？

# jquery - jQuery Slider 类似微软一

> ID：12873345
> 
> 赞同：0
> 
> 时间：2012-10-13T12:59:17.937
> 
> 标签：jquery, slider, jquery-slider

我正在寻找一个 jquery 滑块脚本，看起来和感觉就像微软现在在他们的新网站上拥有的那样：`http://www.microsoft.com/en-us/default.aspx`

有人可以帮我提供链接吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T13:01:38.587

我想你的意思是[旋转木马](http://google.com/search?q=jquery+carousel)。请注意，它们对用户不友好，并且由于过度使用而通常被视为陈词滥调。Google 搜索的第一个结果是“32 个最佳 jQuery 轮播插件”，只是为了向您展示它是多么的过度使用。

# yii - 如何在具有两级 1-N 关系的 CGridView 列中进行排序和搜索？

> ID：12873347
> 
> 赞同：1
> 
> 时间：2012-10-13T12:59:26.473
> 
> 标签：yii, yii-relations

这个问题直接跟随[这个其他](https://stackoverflow.com/questions/12873087/yii-how-to-show-a-field-from-a-related-tables-related-table "我的另一个问题")

我有这个表：组、用户、报告

关系： **组 1 -> N 个用户 ** 和 ** 用户 1 -> N 个报告**

**我已经**在报告模型中有这种关系：

```
'user' => array(self::BELONGS_TO, 'Users', 'userId'), 
```

这在用户模型中

```
'group' => array(self::BELONGS_TO, 'Gruppi', 'groupId'), 
```

在报告模型中，我有这个：

```
$criteria=new CDbCriteria;
$criteria->with = array ('user'); 
```

在报告的**管理视图**中，我使用的是**CGridView**。

我使用 user.group.name 来显示组名，但是**如何搜索（通过 DropDown）和排序**！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T13:24:13.123

在管理员视图中，我使用的是 user.group.name 而不是 user.group.name

```
array (
        'name' => 'groupId',
        'value' => '$data->user->group->name',
        'filter' => Chtml::listData( Groups::model()->findAll() ,'id','name')
    ), 
```

在报告模型中，我添加了一个类字段

```
public $groupId; 
```

在报告规则中

```
 array('groupId','safe','on'=>'search'), 
```

在报告搜索中

```
....
$criteria->with = array ('user.group');
....
$criteria->compare('user.groupId',$this->groupId);
....
[in sort array]
'groupId'=>array(
            'asc' =>'group.name',
                'desc'=>'group.name DESC',
 ), 
```

通过这种方式，我可以按组名搜索和排序！

我希望这篇文章对某人有用

# android - 横向中的 MonoDroid 闪屏活动

> ID：12873360
> 
> 赞同：1
> 
> 时间：2012-10-13T13:01:28.317
> 
> 标签：android, xamarin.android, android-orientation

我在这里按照 Xamarin 的说明进行操作：http: [//docs.xamarin.com/android/tutorials/Creating_a_Splash_Screen](http://docs.xamarin.com/android/tutorials/Creating_a_Splash_Screen)

这很好用，但根本没有提到横向模式。我可以将我的初始图像旋转为纵向大小，以获得最佳效果，但它仍然不理想：初始图像随着它的消失和主要活动的启动而旋转。这是因为启动活动是纵向模式，而主要活动是横向模式。

我尝试将“screenOrientation = ScreenOrientation.Landscape”添加到启动活动的 Activity 属性，但这会导致启动屏幕不显示。

根据[这个](https://stackoverflow.com/questions/11957772/disable-default-animation-from-portrait-to-landscape)问题，不可能禁用旋转动画，所以我真的很想了解如何使这个初始启动活动以横向模式显示，或者其他一些可以达到相同结果的方法。下面是启动活动的代码，带有违规的 ScreenOrientation 参数。

```
[Activity(
    Label = "The App Name",
    Icon = "@drawable/icon", 
    MainLauncher = true, 
    Theme = "@style/Theme.Splash", 
    //ScreenOrientation = ScreenOrientation.Landscape,
    NoHistory = true)]
public class ActivitySplash : Activity
{
    protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);

        // Start our real activity
        StartActivity(typeof(ActivityMain));
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-03T07:13:08.010

您所要做的就是在 Resources 中创建一个名为 drawable-land 的文件夹。然后，将 Splash.png 放在那里。不需要额外的 c#。

盖伊

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-22T15:06:08.617

我在 Nexus 7 上也遇到过类似的问题，如果你`RequestedOrientation = ScreenOrientation.Landscape;`在上面提到的`OnCreate`方法中使用，屏幕将在几秒钟内以纵向显示。

我还尝试将所有设置都放在初始屏幕的 .axml 及其样式中，但没有效果。

我能够使其工作的唯一方法是`ScreenOrientation = ScreenOrientation.Landscape`在 Activity 注释中设置属性

```
[Activity(Label = "MySplashScreen", Theme = "@style/SplashTheme", NoHistory = true, MainLauncher = true, ScreenOrientation = ScreenOrientation.Landscape)]
    public class SplashScreenActivity : Activity
{
// your code goes here ...
} 
```

这是我让它正常工作的唯一方法。我认为您应该使用它并调查设置此属性时为什么不显示图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T12:43:01.883

尝试将以下行添加到您的初始屏幕活动中。

```
RequestedOrientation = Android.Content.PM.ScreenOrientation.Landscape; 
```

像这样：

```
[Activity(
    Label = "The App Name",
    Icon = "@drawable/icon", 
    MainLauncher = true, 
    Theme = "@style/Theme.Splash", 
    //ScreenOrientation = ScreenOrientation.Landscape,
    NoHistory = true)]
public class ActivitySplash : Activity
{
    protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);

        RequestedOrientation = Android.Content.PM.ScreenOrientation.Landscape;

        // Start our real activity
        StartActivity(typeof(ActivityMain));
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-07T21:33:45.447

我知道这篇文章很旧，但对于那些在这里登陆的人来说：使用 xml 布局，中间有一个图像。这是他们在此处显示的 Xamarin Splash Screen 演示中的操作方式： [Splash Screen Demo](https://developer.xamarin.com/guides/android/user_interface/creating_a_splash_screen/)

# mysql - 更新mysql数据库时出错

> ID：12873362
> 
> 赞同：0
> 
> 时间：2012-10-13T13:01:39.020
> 
> 标签：mysql, sql, security, phpmyadmin

```
UPDATE 
  `code_library_questions` 
SET 
  `answer` = 'value' 
WHERE 
  `sn` = 2; 
```

当值是一些文本时它工作正常。但是每当值包含一些 C 或 C++ 代码时，它都会给出以下错误消息

> 您无权访问此服务器上的 /phpmyadmin/tbl_replace.php。

为什么会这样？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T13:26:53.403

ModSecurity 规则很可能将插入的代码检测为可能的 SQL 注入。检查 /var/log/httpd/modsec_debug.log 文件，看看它到底在抱怨什么。您可能必须更改规则，但如果您这样做，请确保您的 MySQLAdmin 以其他方式保护访问。

# c++ - 嵌套类和可见范围的继承

> ID：12873363
> 
> 赞同：2
> 
> 时间：2012-10-13T13:01:39.410
> 
> 标签：c++, inheritance, nested-class

考虑以下代码：

```
namespace base {
class Base {
    protected:
        class Nested {
            protected:
                Base* base;

            public:
                Nested(Base* _base) : base( _base ){}

                virtual void test() {
                    base->foo();
                    /*
                     * hmm.. we can use protected methods
                     */
                    base->bar();
                }
        };

    protected:
        Nested* nested;

        void bar(){}

    public:
        void foo(){}

        virtual void test() {
            nested = new Nested(this);
            nested->test();
        }
};
};

namespace inherited {
class Base : public base::Base {
    public:
        Base()
            : base::Base() {}

    protected:
        class Nested : public base::Base::Nested {
            public:
                Nested( inherited::Base* base )
                    : base::Base::Nested( base ) {}

            public:
                virtual void test() {
                    base->foo();
                    /*
                     * hmm.. and now they are not accessible
                     */
                    // base->bar();
                }
        };

    public:
        virtual void test() {
            foo();
            bar();

            nested = new Nested(this);
            nested->test();
        }
};
}; 
```

我的问题是为什么我们可以访问 from 的受保护方法/属性，但无法访问`base::Base`from的相同方法/属性？`base::Base::Nested``inherited::Base``inherited::Base::Nested`

我唯一能想到的是这`base::Base`是一种*全局范围*，`base::Base::Nested`因此它们是可访问的。`inherited::Base`是一种*全局范围*，`inherited::Base::Nested`并且受保护的成员`base::Base`不可访问。但是，公共继承不应该改变可见性范围，并且我不清楚无法访问的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T13:47:52.563

问题似乎是存储指针的类型而不是访问权限。考虑一下：

```
class B {
protected:
  void bar();
};

class D : public B {
public:
  void call() {
    this->bar(); // works
    static_cast<B*>(this)->bar(); // does not work
  }
}; 
```

当您尝试`bar`通过存储在基址中的指针进行调用时，情况类似。

您可以通过降低基数来解决此问题，但我强烈反对。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T14:55:12.477

§11.4/1 对访问受保护成员有这样的说法（我强调了相关部分）：

**当非静态数据成员或非静态成员函数是其命名类 (11.2) 的受保护成员时，将应用第 11 节中所述之外的附加访问检查 如前所述，授予对受保护成员的访问权限是因为引用发生在某个类 C 的朋友或成员中。**如果访问要形成指向成员的指针 (5.3.1)，则嵌套名称说明符应表示 C 或从 C 派生的类。所有其他访问都涉及 (可能是隐式的）对象表达式（5.2.5）。**在这种情况下，对象表达式的类应为 C 或从 C 派生的类。**

这并不容易解释。值得庆幸的是，该标准提供了许多示例来说明含义，其中一个似乎正是您的情况（除非我误解了您的代码中的某些内容，这很有可能）：

*（注意，为了简单起见，我删除了示例中不相关的部分，并重命名了一些元素。）*

```
class B {
  protected:
  int i;
  static int j;
};

class D : public B {
  void mem(B*);
};

void D::mem(B* pb) {
  pb->i = 1;                // ill-formed
  i = 3;                    // OK (access through this)

  /* The following cases are not directly relevant: */
  B::i = 4;                 // OK (access through this, qualification ignored)
  int B::* pmi_B = &B::i;   // ill-formed
  int B::* pmi_B2 = &D::i;  // OK
  j = 5;                    // OK (because j refers to a static member)
  B::j = 6;                 // OK (because B::j refers to a static member)
} 
```

换句话说，在

```
pb->i = 1; 
```

成员`i`是通过`pb`指向基类的指针找到的，因此*命名类*是`B`. 但访问发生自`mem()`，它是 的成员`D`。`B`与 不同`D`，也不是从它派生的（虽然`D`是从 派生的`B`），所以不允许访问。

但在

```
i = 3 
```

该成员是通过 找到的`this`，因此命名类是`D`并且允许访问。

# c# - 解码base64加密字符串

> ID：12873370
> 
> 赞同：3
> 
> 时间：2012-10-13T13:02:38.613
> 
> 标签：c#, xml, zip, base64, unzip

这可能是一个非常本地化的问题，对社区的其他人没有用，但希望有人可以帮助我。

**我知道的**

我有一个 base64 编码的 ZIP，在一个字符串中，在一个 XML 元素内。

*该文件如下所示：*

```
<Document>
   <Content vesion="1"><!-- BASE64 STRING ---></Content>
</Document> 
```

**我想做的事**

解码字符串，然后解压缩。

**到目前为止我尝试过的（但失败了）**

*   解码 base64 字符串并将其放入带有 zip 扩展名的文件中

    ```
    public string DecodeFrom64(string encodedData)
    {

        byte[] encodedDataAsBytes

            = System.Convert.FromBase64String(encodedData);

        string returnValue =

           System.Text.Encoding.Unicode.GetString(encodedDataAsBytes);

        return returnValue;

    } 
    ```

*   尝试使用以下函数解压缩字符串：

    ```
    public static string DecompressString(string compressedText)
    {
        byte[] gZipBuffer = Convert.FromBase64String(compressedText);
        using (var memoryStream = new MemoryStream())
        {
            int dataLength = BitConverter.ToInt32(gZipBuffer, 0);
            memoryStream.Write(gZipBuffer, 4, gZipBuffer.Length - 4);

            var buffer = new byte[dataLength];

            memoryStream.Position = 0;
            using (var gZipStream = new GZipStream(memoryStream, CompressionMode.Decompress))
            {
                gZipStream.Read(buffer, 0, buffer.Length);
            }

            return Encoding.UTF8.GetString(buffer);
        }
    } 
    ```

**得到错误：**

> GZip 标头中的幻数不正确。确保您传递的是 GZip 流...

*   尝试使用以下函数解压缩字符串：

    ```
    public static string UnZipStr(string compressedText)
    {
        byte[] input = Convert.FromBase64String(compressedText);
        using (MemoryStream inputStream = new MemoryStream(input))
        {
            using (DeflateStream gzip =
              new DeflateStream(inputStream, CompressionMode.Decompress))
            {
                using (StreamReader reader =
                  new StreamReader(gzip, System.Text.Encoding.UTF8))
                {
                    return reader.ReadToEnd();
                }
            }
        }
    } 
    ```

**得到错误：**

> 块长度与其补码不匹配...

我向向我的客户发送此 XML 数据的人发送了一封邮件，但问题是他们的响应速度非常慢（3-4 周）。

所以我希望有人能指出我正确的方向。

我不能将文件附加到问题中，所以如果有人想看看它，我可以发送邮件或其他什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T15:29:23.270

正如哈罗德在评论中已经指出的那样，这都是错误的。在您的上一条评论（Jester）中，您澄清了 zip 文件首先被转换为字符串，然后该字符串被转换为 base64 字符串。由于这绝对没有意义（你为什么要这样做），我想你在那里出了点问题，实际上*意味着*文件被转换为 base64 字符串。例如，这是电子邮件的最佳实践，我最近一直在这样做，以通过 XMPP 中的 XML 传输文件。我的猜测是……

```
byte[] file = System.Convert.FromBase64String(encodedData);
File.WriteAllBytes(directoryToWriteTo+filename+".zip", file); 
```

... creates the file you're looking for. byte[] here already IS a zip file. As zip files can be messy to deal with (as you didn't really say what's in there), I would recommend saving these bytes to a file and try to open it with a zip-software like WinRar. If this worked and you can get the file contents out of the zip file, you could ask another question how to the the contents. I would also recommend using SharpZipLib.dll, because it's really the only solution I got working in reasonable time so far.

# ios - 使用可视格式语言在其父视图中居中视图

> ID：12873372
> 
> 赞同：161
> 
> 时间：2012-10-13T13:03:01.537
> 
> 标签：ios, layout, autolayout, visual-format-language

我刚开始学习 AutoLayout for iOS 并查看了 Visual Format Language。

这一切都很好，除了一件事：我只是无法在其超级视图中获得中心视图。
VFL 可以做到这一点，还是我需要自己手动创建约束？

* * *

## 回答 #1

> 赞同：232
> 
> 时间：2012-10-30T21:44:09.160

目前，不，看起来不可能*仅*使用VFL 在超级视图中居中。但是，使用单个 VFL 字符串和单个额外约束（每个轴）并不难：

视距：`"|-(>=20)-[view]-(>=20)-|"`

```
[NSLayoutConstraint constraintWithItem:view
                             attribute:NSLayoutAttributeCenterX
                             relatedBy:NSLayoutRelationEqual
                                toItem:view.superview
                             attribute:NSLayoutAttributeCenterX
                            multiplier:1.f constant:0.f]; 
```

有人会认为你可以简单地做到这一点（这是我最初看到这个问题时的想法和尝试）：

```
[NSLayoutConstraint constraintsWithVisualFormat:@"|-(>=20)-[view(==200)]-(>=20)-|"
                                 options: NSLayoutFormatAlignAllCenterX | NSLayoutFormatAlignAllCenterY
                                 metrics:nil
                                   views:@{@"view" : view}]; 
```

我尝试了上述的许多不同变体，试图将其弯曲到我的意愿，但这似乎不适用于超级视图，即使两个轴明确有两个单独的 VFL 字符串（`H:|V:`）。*然后，我*开始尝试准确地隔离选项何时应用于 VFL。它们似乎*不适*用于 VFL 中的超级视图，并且仅适用于 VFL 字符串中提到的任何显式视图（在某些情况下令人失望）。

我希望将来Apple添加某种新选项以使VFL选项考虑到superview，即使仅在VFL中除了superview之外只有一个显式视图时才这样做。另一种解决方案可能是传递到 VFL 中的另一个选项，该选项类似于：`NSLayoutFormatOptionIncludeSuperview`.

不用说，我在尝试回答这个问题时学到了很多关于 VFL 的知识。

* * *

## 回答 #2

> 赞同：139
> 
> 时间：2013-02-17T03:31:24.300

是的，可以使用 Visual Format Language 将视图置于其父视图的中心。垂直和水平。这是演示：

[https://github.com/evgenyneu/center-vfl](https://github.com/evgenyneu/center-vfl)

* * *

## 回答 #3

> 赞同：83
> 
> 时间：2013-11-08T09:10:14.237

我认为最好手动创建约束。

```
[superview addConstraint:
 [NSLayoutConstraint constraintWithItem:view
                              attribute:NSLayoutAttributeCenterX
                              relatedBy:NSLayoutRelationEqual
                                 toItem:superview
                              attribute:NSLayoutAttributeCenterX
                             multiplier:1
                               constant:0]];
[superview addConstraint:
 [NSLayoutConstraint constraintWithItem:view
                              attribute:NSLayoutAttributeCenterY
                              relatedBy:NSLayoutRelationEqual
                                 toItem:superview
                              attribute:NSLayoutAttributeCenterY
                             multiplier:1
                               constant:0]]; 
```

* * *

现在我们可以使用[NSLayoutAnchor](https://developer.apple.com/library/prerelease/ios/documentation/AppKit/Reference/NSLayoutAnchor_ClassReference/index.html#//apple_ref/doc/uid/TP40015406)以编程方式定义 AutoLayout：

（适用于 iOS 9.0 及更高版本）

```
view.centerXAnchor.constraint(equalTo: superview.centerXAnchor).isActive = true
view.centerYAnchor.constraint(equalTo: superview.centerYAnchor).isActive = true 
```

* * *

我建议使用[SnapKit](https://github.com/SnapKit/SnapKit)，它是一种 DSL，可以在 iOS 和 macOS 上轻松实现自动布局。

```
view.snp.makeConstraints({ $0.center.equalToSuperview() }) 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-01-31T22:14:25.977

绝对有可能做到这一点：

```
[NSLayoutConstraint constraintsWithVisualFormat:@"H:[view]-(<=1)-[subview]"
                                        options:NSLayoutFormatAlignAllCenterY
                                        metrics:nil
                                          views:NSDictionaryOfVariableBindings(view, subview)]; 
```

[从这里](https://github.com/evgenyneu/center-vfl)学到了这一点。 上面的代码显然是以 Y 为中心的子视图。

斯威夫特3：

```
 NSLayoutConstraint.constraints(withVisualFormat: "H:[view]-(<=1)-[subview]",
                                       options: .alignAllCenterY,
                                                       metrics: nil,
                                                       views: ["view":self, "subview":_spinnerView]) 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-09-13T13:08:41.313

添加下面的代码并将您的按钮放在屏幕的中心。绝对有可能。

```
[self.view addConstraints:[NSLayoutConstraint
                           constraintsWithVisualFormat:@"H:|-[button]-|"
                           options:NSLayoutFormatAlignAllCenterY
                           metrics:0
                           views:views]];

[self.view addConstraints:[NSLayoutConstraint
                           constraintsWithVisualFormat:@"V:|-[button]-|"
                           options:NSLayoutFormatAlignAllCenterX
                           metrics:0
                           views:views]]; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-29T09:12:55.510

我知道这不是您想要的，但您当然可以计算边距并使用它们来创建可视格式字符串；）

无论如何，没有。不幸的是，VFL 不可能“自动”地做到这一点——至少现在还没有。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-07-05T07:39:38.337

感谢@Evgenii 的回答，我在要点中创建了一个完整的示例：

[以自定义高度垂直居中红色方块](https://user-images.githubusercontent.com/4587819/27853665-2de59b02-6196-11e7-8e70-513e906cf057.png)

[https://gist.github.com/yallenh/9fc2104b719742ae51384ed95dcaf626](https://gist.github.com/yallenh/9fc2104b719742ae51384ed95dcaf626)

您可以通过使用 VFL（这不是很直观）或手动使用约束来垂直居中视图。顺便说一句，我不能在 VFL 中将 centerY 和 height 结合在一起，例如：

```
"H:[subView]-(<=1)-[followIcon(==customHeight)]" 
```

在当前解决方案中，VFL 约束是单独添加的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-11-12T11:58:01.063

要做的是在字典中声明superview。而不是使用`|`你使用`@{@"super": view.superview};`.

并且`NSLayoutFormatAlignAllCenterX`对于垂直和`NSLayoutFormatAlignAllCenterY`水平作为选项。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-03-21T13:58:08.937

您可以使用额外的视图。

```
NSDictionary *formats =
@{
  @"H:|[centerXView]|": @0,
  @"V:|[centerYView]|": @0,
  @"H:[centerYView(0)]-(>=0)-[yourView]": @(NSLayoutFormatAlignAllCenterY),
  @"V:[centerXView(0)]-(>=0)-[yourView]": @(NSLayoutFormatAlignAllCenterX),
};
NSDictionary *views = @{
  @"centerXView": centerXView, 
  @"centerYView": centerYView, 
  @"yourView": yourView,
};
 ^(NSString *format, NSNumber *options, BOOL *stop) {
     [superview addConstraints:
      [NSLayoutConstraint constraintsWithVisualFormat:format
                                              options:options.integerValue
                                              metrics:nil
                                                views:views]];
 }]; 
```

如果你想要它整洁，那么`centerXView.hidden = centerYView.hidden = YES;`。

PS：我不确定我是否可以将额外的视图称为“占位符”，因为英语是我的第二语言。如果有人能告诉我，将不胜感激。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-05-12T06:54:24.497

对于那些来这里寻求`Interface Builder`基于解决方案的人（谷歌在这里引导我），只需添加 const 宽度/高度约束，然后选择子视图 - >控制拖动到它的超级视图 - >选择“在超级视图中垂直/水平居中”。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-03-27T02:12:26.100

**@igor-muzyka在****Swift 2**中的回答：

```
NSLayoutConstraint.constraintsWithVisualFormat("H:[view]-(<=1)-[subview]", 
                                               options: .AlignAllCenterY,
                                               metrics: nil,
                                               views: ["view":view, "subview":subview]) 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-12-25T03:44:48.500

# 这是我的方法

```
//create a 100*100 rect in the center of superView
var consts = NSLayoutConstraint.constraints(withVisualFormat: "H:|-space-[myView]-space-|", options: [], metrics:["space":view.bounds.width/2-50], views:["myView":myView])

consts += NSLayoutConstraint.constraints(withVisualFormat: "V:|-space-[myView]-space-|", options: [], metrics: ["space":view.bounds.height/2-50], views: ["myView":myView]) 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2016-02-25T06:50:58.877

只需要说，你可以使用它而不是约束：

```
child.center = [parent convertPoint:parent.center fromView:parent.superview]; 
```

* * *

## 回答 #14

> 赞同：-3
> 
> 时间：2014-09-10T14:49:23.940

您可以在界面生成器中轻松完成此操作，而不是使用 VFL。在主情节提要中，按住 ctrl+单击要居中的视图。拖动到超级视图（按住 ctrl）并选择“Center X”或“Center Y”。无需代码。

# android - 在列表视图上执行自动完成后获取所选项目

> ID：12873374
> 
> 赞同：0
> 
> 时间：2012-10-13T13:03:27.530
> 
> 标签：android, drop-down-menu, autocompletetextview

我有一个 ListView，它具有使用数组适配器的自动完成功能，效果很好。我的问题是，当我在列表视图过滤后单击列表项时，我得到第一项的位置索引 0，第二项的位置索引 1，以此类推过滤列表中的项目（在 onlistitemclick 侦听器中获得的位置） .

如何在过滤之前获取所选项目相对于列表的位置索引？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T15:29:46.800

如果您发布代码（至少是设置适配器的片段）会更好。我假设你已经使用了类似下面的东西。

```
String[] items={"Item 1", "Item 2", "Item 3"};
public void onCreate(Bundle savedInstanceState)
{
super.onCreate(savedInstanceState)

setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,items));
} 
```

如果是这种情况，则可能无法设置标签和识别位置。如果您可以直接进行字符串验证而不是找到可以的位置。但是你说你有100多个项目。

因此，最好创建一个扩展 ArrayAdapter 或其他的自定义适配器。在该 CustomAdapter 中，在**getView(int position, View convertView, ViewGroup parent)**`textView.setText(String[position]);`方法中，您在每个视图（textView）的此设置标记之前和之后将每个项目设置为 TextView`textView.setTag(position);`

最后，您在活动类中设置自定义适配器`listView.setAdapter(customAdapter);`，这样您就必须`getTag()`找到即使在过滤项目后也不会改变的位置。让我们看看我是否可以在您发布代码后编辑我的答案，以防您不想接受我目前的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T13:07:52.423

当您膨胀视图时，为视图设置一个标签，该标签具有该项目在过滤之前在列表中的位置。

例子

```
view.setTag(originalPosition);    
view.setTag(resource_id, originalPosition); 
```

通过相对位置访问视图时，使用 view.getTag() 检索绝对位置

# php - 使用 PHP if() 匹配数组中的项目

> ID：12873383
> 
> 赞同：0
> 
> 时间：2012-10-13T13:05:50.020
> 
> 标签：php, arrays, find

我正在开发一个管理面板，如果 PDO 查询返回管理表中的所有管理员并且用户 ID 与管理员 ID 结果中的 1 个匹配，则代码将在其中显示不同。只有可以有无限数量的管理员，我不想为每个人编辑代码。

是否可以这样做（伪代码）：

`if($userid isfoundin $result['admin_user_id']{ -- admin code here }`

我还没有编写管理表，因为我想先了解更多信息，但是如果我循环浏览用户表并查找 id，`$query->fetchAll()`那么我会得到这个：

```
 array(30) { [0]=> array(2) { ["id"]=> string(1) "7" [0]=> string(1) "7" } [1]=> array(2) { ["id"]=> string(1) "6" [0]=> string(1) "6" } [2]=> array(2) { ["id"]=> string(1) "8" [0]=> string(1) "8" } [3]=> array(2) { ["id"]=> string(2) "31" [0]=> string(2) "31" } [4]=> array(2) { ["id"]=> string(2) "26" [0]=> string(2) "26" } [5]=> array(2) { ["id"]=> string(1) "4" [0]=> string(1) "4" } [6]=> array(2) { ["id"]=> string(2) "35" [0]=> string(2) "35" } [7]=> array(2) { ["id"]=> string(2) "21" [0]=> string(2) "21" } [8]=> array(2) { ["id"]=> string(2) "38" [0]=> string(2) "38" } [9]=> array(2) { ["id"]=> string(2) "24" [0]=> string(2) "24" } [10]=> array(2) { ["id"]=> string(2) "34" [0]=> string(2) "34" } [11]=> array(2) { ["id"]=> string(2) "20" [0]=> string(2) "20" } [12]=> array(2) { ["id"]=> string(2) "19" [0]=> string(2) "19" } [13]=> array(2) { ["id"]=> string(2) "23" [0]=> string(2) "23" } [14]=> array(2) { ["id"]=> string(2) "33" [0]=> string(2) "33" } [15]=> array(2) { ["id"]=> string(2) "28" [0]=> string(2) "28" } [16]=> array(2) { ["id"]=> string(1) "3" [0]=> string(1) "3" } [17]=> array(2) { ["id"]=> string(2) "15" [0]=> string(2) "15" } [18]=> array(2) { ["id"]=> string(1) "9" [0]=> string(1) "9" } [19]=> array(2) { ["id"]=> string(2) "25" [0]=> string(2) "25" } [20]=> array(2) { ["id"]=> string(1) "1" [0]=> string(1) "1" } [21]=> array(2) { ["id"]=> string(2) "32" [0]=> string(2) "32" } [22]=> array(2) { ["id"]=> string(1) "5" [0]=> string(1) "5" } [23]=> array(2) { ["id"]=> string(2) "18" [0]=> string(2) "18" } [24]=> array(2) { ["id"]=> string(2) "29" [0]=> string(2) "29" } [25]=> array(2) { ["id"]=> string(2) "27" [0]=> string(2) "27" } [26]=> array(2) { ["id"]=> string(2) "30" [0]=> string(2) "30" } [27]=> array(2) { ["id"]=> string(2) "22" [0]=> string(2) "22" } [28]=> array(2) { ["id"]=> string(2) "10" [0]=> string(2) "10" } [29]=> array(2) { ["id"]=> string(2) "36" [0]=> string(2) "36" } } 
```

这就是我现在正在尝试使用的东西

```
require_once $_SERVER['DOCUMENT_ROOT']."/resources/settings.php";
$query = $pdo->prepare("SELECT id FROM users");
$query->execute();
var_dump($query->fetchAll());
if (in_array($user['id'], $query->fetchAll())){
    echo $user['id'];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T13:06:43.387

### 是的，您可以使用[`in_array()`](http://php.net/manual/en/function.in-array.php)它。

我假设您有一组管理员用户。说，它是：

```
$adminUsers = array("admin", "administrator");
# Or by your code
$adminUsers = $result['admin_user_id']; 
```

现在代码部分是这样的：

```
if (in_array($userid, $adminUsers))
    // Admin code here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T13:07:02.267

我认为您正在寻找[`in_array()`](http://php.net/in-array)给定项目是否在数组中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T13:08:52.070

`in_array()`如果您只需要知道用户 ID 存在于您的阵列中，则应该使用。

但如果您确实需要对该项目的引用，请查看`array_search()` [http://au1.php.net/manual/en/function.array-search.php](http://au1.php.net/manual/en/function.array-search.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-13T13:26:30.547

与其遍历 admins 表中的所有用户，然后再进行另一个循环以查找特定用户是否存在，为什么不在查询本身中进行此检查呢？

例如：

```
$stmt = $mysqli->prepare("SELECT name,email FROM admins WHERE id=?");
$stmt->bind_param("d", $user_id);
$stmt->execute();
$stmt->bind_result($name, $email);

    if ($stmt->fetch()) {
        //The user with user_id exists in the admins table , show him the admin panel.
        //You can use $name and $email.
    }

$stmt->close(); 
```

# c# - 在物理设备上测试

> ID：12873384
> 
> 赞同：2
> 
> 时间：2012-10-13T13:05:58.527
> 
> 标签：c#, windows-phone-7

是否正确理解我必须支付 99 美元才能在物理设备上使用我的 Windows Phone 应用程序。我制作了一个小应用程序，我想在我的新手机上进行测试，它不是我计划发布的应用程序，所以我不会为了看到该应用程序在物理设备上运行而支付 99 美元。无论如何不支付 99 美元，并看到它在设备上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T13:14:34.603

对。'直到 2012 年 4 月，还有“雪佛龙”正式（由 MSFT 允许）解锁您的设备（仅用于在设备上进行测试/侧载，但不用于提交到市场），但该服务现已关闭。所以唯一的官方方式是 99 美元的 MSFt 订阅。

# jquery - jQuery Backstretch 问题

> ID：12873385
> 
> 赞同：0
> 
> 时间：2012-10-13T13:06:11.800
> 
> 标签：jquery, html

我正在尝试在我的网页上使用流行的 jQuery Backstretch 插件，但它根本不起作用。我复制并粘贴了与我在 Backstretch 站点的下载包中的示例 html 文件中看到的完全相同的代码，将链接源更改为它们在我的根文件夹中的实际位置，然后……什么都没有。

我在我的 html 页面底部调用我的脚本（就在 之前`</body>`）

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script src="js/jquery.backstretch.js"></script>
    <script>
        $.backstretch([
          "pot-holder.jpg",
          "coffee.jpg",
          "dome.jpg"
        ], {
            fade: 750,
            duration: 4000
        });
    </script>
<script src="js/jquery.fittext.js"></script>
<script>
$("#resize_text").fitText(0.8, { minFontSize: 42, maxFontSize: '75px' });
</script> 
```

（是的，我也在使用 FitText）。

知道有什么问题吗？页面上的其他任何地方都没有加载其他 jQuery 脚本……而且 HTML 内容应该无关紧要，因为 Backstretch 在`script`标签中发挥了他的魔力……对吗？

每次我尝试集成 Backstretch 时，它似乎都很复杂。也许我每次都忘记做某事..？

感谢您的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T13:13:20.927

我刚刚发现了问题。`background-image`我在我的css文件中使用了“ ”。我以为我可以将它用作后备，但看起来你不能同时使用 Backstretch 和`Background-image`!

# android - 当我使用数据库时，无法实例化活动

> ID：12873388
> 
> 赞同：0
> 
> 时间：2012-10-13T13:07:12.637
> 
> 标签：android

我正在使用这段代码，但我得到了一个运行时异常。我做了所有必要的努力和工作来消除这个错误。但这对我不起作用。我正在使用数据库处理程序。java和AndroidSpinnerFromSQLiteActivity.java类，我的xml是activity_databse_handler.xml。

```
public class AndroidSpinnerFromSQLiteActivity extends Activity implements OnItemSelectedListener {
// Spinner element
Spinner spinner;

// Add button
utton btnAdd;

// Input text
EditText inputLabel; 

@Override
   public void onCreate(Bundle savedInstanceState) { 
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_database_handler);
 // Spinner element
 spinner = (Spinner) findViewById(R.id.spinner);

  // add button
  btnAdd = (Button) findViewById(R.id.btn_add);

 // new label input field 
  inputLabel = (EditText) findViewById(R.id.input_label); 

 // Spinner click listener
   spinner.setOnItemSelectedListener(this);

 // Loading spinner data from database
 loadSpinnerData();

/**
* Add new label button click listener
* */
btnAdd.setOnClickListener(new View.OnClickListener() {

   @Override
   public void onClick(View arg0) {
    String label = inputLabel.getText().toString();

    if (label.trim().length() > 0) {
        // database handler
        DatabaseHandler db = new DatabaseHandler(getApplicationContext());

        // inserting new label into database
        db.insertLabel(label);

        // making input filed text to blank
        inputLabel.setText("");

        // Hiding the keyboard
        InputMethodManager imm = (InputMethodManager)   getSystemService(Context.INPUT_METHOD_SERVICE);
        imm.hideSoftInputFromWindow(inputLabel.getWindowToken(), 0);

        // loading spinner with newly added data
        loadSpinnerData();
    } else {
        Toast.makeText(getApplicationContext(), "Please enter label name",
                Toast.LENGTH_SHORT).show();
    }

   }
 });
  }

    /**
    * Function to load the spinner data from SQLite database
    * */
 public void loadSpinnerData() {
   // database handler
   DatabaseHandler db = new DatabaseHandler(getApplicationContext());

   // Spinner Drop down elements
   List<String> lables = db.getAllLabels();

   // Creating adapter for spinner
  ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,
    android.R.layout.simple_spinner_item, lables);

  // Drop down layout style - list view with radio button
  dataAdapter
    .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

 // attaching data adapter to spinner
   spinner.setAdapter(dataAdapter);
}

@Override
public void onItemSelected(AdapterView<?> parent, View view, int position,
long id) {
 // On selecting a spinner item
 String label = parent.getItemAtPosition(position).toString();

   // Showing selected spinner item
    Toast.makeText(parent.getContext(), "You selected: " + label,
    Toast.LENGTH_LONG).show();

   }

  @Override
public void onNothingSelected(AdapterView<?> arg0) {
    // TODO Auto-generated method stub

    }

   } 
```

==================================================== ==========================================

```
 public class DatabaseHandler extends SQLiteOpenHelper {

       public DatabaseHandler(Context context) {
         super(context, DATABASE_NAME, null, DATABASE_VERSION);
      }

      // Creating Tables
     @Override
     public void onCreate(SQLiteDatabase db) {
        try {
           // Category table create query
            String CREATE_CATEGORIES_TABLE = "CREATE TABLE " + TABLE_LABELS + "("+         KEY_ID + " INTEGER PRIMARY KEY," + KEY_NAME + " TEXT)";
           db.execSQL(CREATE_CATEGORIES_TABLE);
        }
        catch (Exception e) {
        // TODO: handle exception

        }
   }

// Upgrading database
 @Override 
  public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
  // Drop older table if existed
 db.execSQL("DROP TABLE IF EXISTS " + TABLE_LABELS);

   // Create tables again
  onCreate(db);
}

  /**
   * Inserting new lable into lables table
 * */ 
```

// 数据库版本 private static int DATABASE_VERSION = 1;

```
// Database Name
   private static  String DATABASE_NAME = "spinnerExample"; 
```

// 标签表名 private static String TABLE_LABELS = "labels";

```
// Labels Table Columns names
private static  String KEY_ID = "id";
private static  String KEY_NAME = "name";
 public void insertLabel(String label){
   SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put(KEY_NAME, label);

      // Inserting Row
    db.insert(TABLE_LABELS, null, values);
  db.close(); // Closing database connection
            }

* Getting all labels
 * returns list of labels
   * */
        public List<String> getAllLabels(){
        List<String> labels = new ArrayList<String>();

     // Select All Query
       String selectQuery = "SELECT  * FROM " + TABLE_LABELS;

       SQLiteDatabase db = this.getReadableDatabase();
      Cursor cursor = db.rawQuery(selectQuery, null); 

        // looping through all rows and adding to list
          if (cursor.moveToFirst()) {
           do {
        labels.add(cursor.getString(1));
         } while (cursor.moveToNext());
        }

         // closing connection
          cursor.close();
      db.close();

         // returning lables
       return labels;
         }

} 
```

==================================================== ==========================================

```
 <!-- Label --> 
```

```
 <!-- Input Text --> 
```

```
<!-- Add Button --> 
```

```
<!-- Select Label -->
  <TextView
   android:layout_width="fill_parent"
 android:layout_height="wrap_content"
  android:text="Select Label"
    android:padding="8dip" />

  <!-- Spinner Dropdown -->
   <Spinner
    android:id="@+id/spinner"
       android:layout_width="fill_parent"
  android:layout_height="wrap_content"
     android:prompt="@string/spinner_title"
   android:layout_marginTop="20dip"
   android:layout_marginLeft="8dip"
 android:layout_marginRight="8dip"
  />
    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T13:36:05.883

你不想要数据库的应用程序上下文，你想要活动上下文，所以你的调用应该是：

```
DatabaseHandler db = new DatabaseHandler(this); 
```

# html - 隐藏 H1 标签中的文本，但不隐藏图像

> ID：12873390
> 
> 赞同：4
> 
> 时间：2012-10-13T13:07:48.357
> 
> 标签：html, css, hide

我需要将文本隐藏在 H1 标签内。但不是图像。问题是我只能更改css而不是html

```
<h1>
<img src="img/headerimg.png" width="900" height="125"/>
Header 1 text
</h1> 
```

有没有办法只用css隐藏“Header 1 text”？我正在为大客户做这件事，他们只给了我对 css 文件的访问权限。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-13T13:12:32.757

给一个 0px 的字体大小

```
​h1{ font-size:0px }​ 
```

编辑：工作[样本](http://jsfiddle.net/qtX9n/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-13T13:10:32.533

将图像设置为背景`<h1>`，添加 CSS 属性使其与图像大小相同，并在标题上`<h1>`使用负号来删除文本。`text-indent`如果您也可以访问 html，那将是通常和理想的方式。

由于您只能访问 CSS，因此可以使用：

```
h1 {
    font-size: 0.1px; /* 0 gets disregarded by Internet Explorer, 0.1 gets interpreted right by every browser */
} 
```

小提琴：http: [//jsfiddle.net/VGgnD/](http://jsfiddle.net/VGgnD/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-13T13:10:52.090

### 您可以使用 CSS 执行此操作：

```
<h1>
    <img src="img/headerimg.png" width="900" height="125"/>
    Header 1 text
</h1> 
```

### CSS：

```
h1 {
    width: 900px;
    height: 125px;
    background: url("img/headerimg.png") no-repeat center center;
    text-indent: -99em;
} 
```

如果您只能访问 CSS，`display: none;`请`img`：

```
h1 img {display: none;} 
```

### 工作小提琴：http: [//jsfiddle.net/sJ8JD/](http://jsfiddle.net/sJ8JD/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-13T13:12:51.260

好吧，我唯一想到的是：

```
<h1 style="color: transparent; font-size: 0px; text-indent: -99em;">
<img src="http://pokit.org/get/img/18d5148ef77ef2a2d5d8193c1c8789e8.jpg" width="900" height="125"/>
Header 1 text
</h1> 
```

工作示例：

> [http://jsfiddle.net/VRQVs/2/](http://jsfiddle.net/VRQVs/2/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-13T13:10:55.447

设置`font-size: 1px !important;`和设置背景颜色为文本颜色

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-13T13:13:11.337

您可以尝试`position:absolute;`使文本不可见，它将位于页面之外。`-5000px`

```
h1 {
  margin-top:-5000px;
  position:absolute;
}
h1 img {
  position:absolute;
  margin-top:5000px;
} 
```

[例子](http://jsfiddle.net/2UeHD/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-13T13:17:34.227

它可以像将字体大小设置为 0px 一样简单

```
h1 {
   font-size: 0.1px;
} 
```

[http://jsfiddle.net/m5V2A/](http://jsfiddle.net/m5V2A/1/)

# git - Git 和红帽 Open Shift

> ID：12873392
> 
> 赞同：1
> 
> 时间：2012-10-13T13:07:53.950
> 
> 标签：git, clone

对于 RedHat Openshift，它具有以下用于克隆到本地主机的说明： git clone ssh://12272296@jimX-jimsapps.rhcloud.com/~/git/jimX.git/

我想要做的是在 c:/xampp/htdocs/rhos 中创建一个文件夹（在我的本地主机上）

所以我尝试：（打开命令提示符并坐在 C:) git clone ssh://12272296@jimX-jimsapps.rhcloud.com/~/git/xampp/htdocs/rhos.git/

我得到一个错误：致命：协议错误：错误的行长度字符：Inva

您是否必须在本地计算机上克隆成 jimX 形式的东西？

克隆到 c:/xampp/htdocs/rhos 的命令是什么？

谢谢，吉姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-05T10:14:19.677

这里的关键问题之一是所讨论项目的 Git 配置文件；问题是无法正确读取此文件以检索连接到存储库的必要信息。

您应该确保每行只有一个参数，并且没有杂散字符或空格。如果您确实在配置文件中发现了此类错误，那么此修复应该有助于缓解问题并允许您再次访问存储库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T20:57:08.910

Git [FAQ 提到](https://git.wiki.kernel.org/index.php/GitFaq#protocol_error%3a_bad_line_length_character)：

> 这可能意味着您在以命令模式登录 ssh 时有一些无关的字符、信息消息或其他内容。

要对此进行测试，请执行以下操作：

```
ssh ssh://12272296@jimX-jimsapps.rhcloud.com echo testing commands 
```

> 你应该只看到`testing commands`返回。
> 如果有任何其他字符，您应该检查您的 dot shell rc 文件以查找任何 echo 或其他可能产生输出的命令。

这也是这篇[博](http://www.bramschoenmakers.nl/node/303)文的结论：

> 啊！这是我解决问题所需的信息。
> 就我而言，问题实际上是我的and中有一个“ `echo`” ，这影响了协议。 删除回声解决了这个问题。`.bash_profile``.bashrc`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-05T13:01:01.100

我刚刚遇到了同样的问题。问题是您分配的外壳程序 oo-trap-user 执行以下检查：

```
# replace leading tilde (~) with user's home path
realpath = os.path.expanduser(thearg)
if not realpath.startswith(config['GEAR_BASE_DIR']):
    syslog.syslog("Invalid repository: not in openshift_root (%s) - %s: (%s)" %
                  (config['GEAR_BASE_DIR'], thearg, realpath))
    print "Invalid repository %s: not in application root" % thearg
    sys.exit(3) 
```

所以 git 存储库必须在 GEAR_BASE_DIR 中，这让你只剩下你的主目录。

调试，做某事`ssh yourmachine git-receive-pack /path/to/your/location`

# android - 使用 WAKE_LOCK 停止服务

> ID：12873395
> 
> 赞同：1
> 
> 时间：2012-10-13T13:08:04.313
> 
> 标签：android

我使用 WakeLock 在后台启动服务，下班后我停止服务并释放 WakeLock。但我不知道正确的顺序。它工作正常，但我总是得到错误：

```
10-13 14:48:23.320: A/PowerManager(20951): WakeLock finalized while still held: AppService 
```

以下是我的代码片段：

```
PowerManager pm = (PowerManager)getApplicationContext().getSystemService(Context.POWER_SERVICE);
WakeLock wl = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, TAG);

wl.acquire(); 
```

工作完成后，停止一切，但顺序是：

```
stopForeground(true);
wl.release();                   
stopSelf(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T13:33:54.983

您不需要调用 stopForeground，因为您在它之后立即调用 stopSelf。这可能是问题所在。没有看到你持有 Wakelock 对象的位置，这是我最好的猜测。不过，您在 stopSelf 之前调用 release 是正确的。

# php - Google Analytics API PHP - 获得前 5 个页面

> ID：12873402
> 
> 赞同：3
> 
> 时间：2012-10-13T13:09:33.023
> 
> 标签：php, google-analytics-api

我正在尝试找出如何从我的 Google Analytics Project API 中的 PHP 中获取前 5 个页面。到目前为止，我已经编写了以下代码，但它似乎不起作用 - 有什么想法吗？

```
 private function getTopPages($profileId) {

   $optParams = array(
      'sort' => 'ga:pageviews',
      'max-results' => '5');

   return $this->analytics->data_ga->get(
       'ga:' . $profileId,
       '2012-09-01',
       '2012-09-30',
       'ga:pagePath',
       $optParams);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-30T16:29:37.880

```
 private function getTopPages($profileId) {

        $optParams = array(
            'max-results' => 5,
            'dimensions' => 'ga:pageTitle,ga:pagePath',
            'sort' => '-ga:pageviews',
        );

   return $this->analytics->data_ga->get(
       'ga:' . $profileId,
       '2012-09-01',
       '2012-09-30',
       'ga:pageviews',
       $optParams);

} 
```

灵感来自：[http ://axiacore.com/blog/how-get-list-most-popular-pages-google-analytics-python/](http://axiacore.com/blog/how-get-list-most-popular-pages-google-analytics-python/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T13:25:56.530

我不知道 php 调用的细节，但我发现您的调用存在以下潜在问题：

*   您需要将排序指定为**降序**。默认情况下它可能是上升的。
*   您需要在某处将您的指标指定为**ga:pageviews**。虽然您在排序选项中有此选项，但您还需要为指标指定它。这是**ga:**参数吗？

我发现 [GA Explorer Tool 很有帮助](http://ga-dev-tools.appspot.com/explorer/)。

# php - Twitter OAuth：用户/搜索有效，但搜索/推文无效

> ID：12873409
> 
> 赞同：3
> 
> 时间：2012-10-13T13:10:17.233
> 
> 标签：php, search, twitter, twitter-search

我想在推特上搜索推文。它不工作。

```
$parameters = array('q' => 'oauth');
$result = $connection->get('search', $parameters); 
```

但是当我进行用户搜索时，它工作得很好。

```
$parameters = array('q' => 'oauth');
$result = $connection->get('users/search', $parameters); 
```

我也尝试了以下方法，但这也不起作用

```
$parameters = array('q' => 'oauth');
$result = $connection->get('search/tweets', $parameters); 
```

可能是什么原因？

错误信息

```
stdClass Object
(
    [errors] => Array
        (
            [0] => stdClass Object
                (
                    [message] => Sorry, that page does not exist
                    [code] => 34
                )

        )

) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T20:56:37.587

您似乎正在使用 Abraham Williams 的库[TwitterOAuth](https://github.com/abraham/twitteroauth)。

我知道这是一个老问题，但我刚刚遇到了与 OP 相同的问题，并且它可能会继续发生在其他任何人身上，因为显然这个库已经有一段时间没有更新了。

问题似乎是 Twitter 不再通过其 API 版本 1 接受请求。您必须按如下方式更改`$host`文件中的变量：`twitteroauth.php`

```
/* Set up the API root URL. */
//public $host = "https://api.twitter.com/1/";
public $host = "https://api.twitter.com/1.1/"; 
```

# java - 随机数不是随机的

> ID：12873410
> 
> 赞同：2
> 
> 时间：2012-10-13T13:10:25.727
> 
> 标签：java, random

我正在用 Java 制作一个需要骰子的游戏。攻击者有 3 个骰子，防御者有 2 个骰子。这是我将所有骰子的眼睛随机化的代码：

```
 if (attacker.getArmies() > 1)
            aDices[0] = random.nextInt(6) + 1;
        if (attacker.getArmies() > 2)
            aDices[1] = random.nextInt(6) + 1;
        if (attacker.getArmies() > 3)
            aDices[2] = random.nextInt(6) + 1;
        if (defencer.getArmies() > 0)
            dDices[0] = random.nextInt(6) + 1;
        if (defencer.getArmies() > 1)
            dDices[1] = random.nextInt(6) + 1; 
```

但是为什么“防御”骰子的数量大多高于“攻击”骰子呢？

我正在使用 java.util.Random 中的 Random 类

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T13:18:31.833

看到您使用完全相同的功能进行攻击和防御，攻击者的结果在结构上更高是根本不可能的。您可以尝试说服自己的是编写一个小函数，将骰子掷骰子 100 次作为攻击和防御并计算平均值。即使那样，仍然有可能在 100 次之后，攻击赢得 100 次，不太可能，但可能。这就是随机性的本质。

对于一些背景信息，这是一篇关于随机性的简短读物：

[http://engineering.mit.edu/live/news/1753-can-a-computer-generate-a-truly-random-number](http://engineering.mit.edu/live/news/1753-can-a-computer-generate-a-truly-random-number)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T13:33:30.190

看起来你展示的代码比原来的 Risk 给防御者更多的优势；

```
if (attacker.getArmies() > 1)          // 1 army will never roll the dice
    aDices[0] = random.nextInt(6) + 1; 
```

*   攻击者在每支军队（1-3）攻击时获得 1 次骰子。你给他0-2。这意味着单兵进攻永远不会成功。
*   防守者每防守一支军队（1-2）获得 1 次骰子。你给他1-2。

与最初的风险相比，这将使比赛更倾向于防守者，*所有这些都不会得到有偏见的随机数*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T13:15:19.090

也许您应该将 Random 类与 PC 时钟中的时间戳结合使用。它被称为随机化器的种子。

# javascript - 自写的toc jQuery函数：跳转到链接目标并显示对应的元素

> ID：12873412
> 
> 赞同：0
> 
> 时间：2012-10-13T13:10:42.593
> 
> 标签：javascript, jquery

我为 class=faqQuestion 的元素动态生成一个目录。
答案位于默认隐藏的 class=faqAnswer 元素中。
通过单击 class=faqQuestion 条目，它将显示为

```
$(this).next(".faqAnswer").slideToggle(300); 
```

一切都按预期工作。

我想要什么：通过单击目录链接，我将跳转到目标 faqQuestion 元素并显示相应的 faqAnweser 元素。

我生成目录的方式：

```
$(document).ready(function(){
  var url = window.location.pathname;
  $('<ol />').prependTo('#toc')
  $(".faqQuestion").each(function(i) {
    var current = $(this);
    current.attr("id", "entry" + i);
    $("#toc ol").append("<li class=\"faqToc\"><a id='link" + i + "' href='" + url + "#entry" +
      i + "' entry='" + current.attr("tagName") + "'>" + 
      current.html() + "</a></li>");
  }); 
```

这是我尝试过的，它将跳转到选定的 faqQuestion，但 faqAnswer 元素仍然隐藏。

```
 $(".faqToc").click(function(event){
  $(this).next(".faqAnswer").slideToggle(300);
  }); 
```

我的问题是这个——至少我是这么认为的——所以我尝试了类似的东西——导致“未定义”

```
 var url = $(this).prop("href");
    alert(url); 
```

尝试 attr 而不是 prop 返回也“未定义”。

你能指出我的问题吗？

我正在尝试改进我的 Javascript 和 jQuery 知识，所以我不想使用 toc 插件。

更新：HTML 看起来像这样：

```
<div id="toc">
<ol>
<li class="faqToc">
<a href="/faq/#entry0">...</a>
</li>
<li class="faqToc">
<a href="/faq/#entry1">...</a>
</li>
</div>

<p id="entry0" class="faqQuestion">...</p>
<div class="faqAnswer" style="display: none;">...</div>

<p id="entry1" class="faqQuestion">...</p>
<div class="faqAnswer" style="display: none;">...</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T13:34:00.023

一个非常简单的方法是使用该`index()`方法，因为 TOC 元素和问题/答案元素之间的关系是 1 对 1。

```
$(".faqToc").click(function(event){
  var index=$(this).index(); /* zero based index position of element within it's siblings*/
 /* toggle answer element with same index */
  $(".faqAnswer").eq(index).slideToggle(300);
}); 
```

jQuery API 参考：**[index()](http://api.jquery.com/index/)**

# ruby-on-rails - rails 节省页面持续时间和页面加载速度的最佳方法

> ID：12873415
> 
> 赞同：0
> 
> 时间：2012-10-13T13:10:59.057
> 
> 标签：ruby-on-rails, before-filter

嗨，我是 Rails 的初学者，我不擅长英语。所以如果有一些完全的废话，请理解..

我正在尝试记录每个页面的加载速度和页面持续时间。我在我的“页面”模型中创建了一个数据库“页面”和方法“保存页面”。为了保存在每个页面中，我在应用程序控制器中放置了“savepage”方法。

# 页面.rb

```
def self.savepage
    .
    .
    .
end 
```

# application_controller.rb

```
before_filter :dosave
def dosave
    Page.savepage
end 
```

这种格式..

我的问题是 1\. 我做得对吗？使用 before_filter 在加载过程的第一个过程中进行保存？2\. 加载页面中的所有内容后保存我应该使用什么？3\. 用户离开此页面后保存我应该使用什么？

我看到了before_destroy和after_filter，但我找不到它是什么......过滤器是什么意思......什么动作意味着破坏......提前谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T14:43:50.873

`before_filter`是在向控制器发出请求之前加载的第一件事。但是您的需求完全不同。从根本上过滤器使用布尔检查。如果某些方法为真，它将运行，否则它可能不会。此过滤器进一步扩展，我们将代码放入该过滤器中。（甚至有时它被认为是最佳实践）。

现在，`before_filter :dosave`可能是正确的**，但**它不是了解页面（UI）加载过程的真实方式。我建议您使用 javascript 调用或使用一些手动创建的辅助方法并将其放入视图`.erb`文件中。

可能这会让您感兴趣
[https://github.com/grosser/record_activities](https://github.com/grosser/record_activities)
[在 ROR 中记录用户活动](https://stackoverflow.com/questions/9835863/log-user-activities-in-ror)

> 什么行动意味着什么？

`Action Controller is the C in MVC. After routing has determined which controller to use for a request, your controller is responsible for making sense of the request and producing the appropriate output. Luckily, Action Controller does most of the groundwork for you and uses smart conventions to make this as straightforward as possible.`
来源： http: [//guides.rubyonrails.org/action_controller_overview.html](http://guides.rubyonrails.org/action_controller_overview.html) 我强烈建议您阅读上述文档。这对你来说是非常必要的，它涵盖了你在这里问的话题。` 还有一件事，

> 什么是行动破坏？

这只是一个动作方法，就像 new 一样。因为，rails 跟随`Convention over configuration`（以及它的开发者）所以他们放置了一些`delete` `destroy`或一些破坏的代码。这使事情变得简单，否则将需要更多配置，这违反了 Rails 策略。

# database-backups - Amazon RDS 备份是否足够，还是您也应该自己做？

> ID：12873416
> 
> 赞同：5
> 
> 时间：2012-10-13T13:11:02.727
> 
> 标签：database-backups, amazon-rds

我已经使用 Amazon RDS 一段时间了，并使用我自己的 mysqldump 备份例程来补充自动备份，该例程将 sql 转储复制到远程（不是 AWS）服务器。

但是，mysqldump 会导致服务器负载激增，并且通常会占用资源。如果可以的话，我想摆脱它。

据我所知，本机 RDS 自动备份例程似乎非常强大和可靠。我的（效率较低，管理密集型）冗余例程是必要的，还是我只是偏执？

FWIW，数据是关键任务，因为丢失所有（或大部分）数据将对组织造成灾难性影响。但是，丢失少量数据（例如，价值 5-10 分钟）不会太可怕。

谢谢。

# json - 更小的 JSON 格式

> ID：12873421
> 
> 赞同：2
> 
> 时间：2012-10-13T13:11:50.673
> 
> 标签：json, serialization, deserialization

我将开发一个推送服务器（HTML5 WebSocket/Polling），为了减小数据包的大小（以 JSON 格式呈现），我想对数据包做这样的事情：

```
[["id", "username", "password"], [1, "afshin", "123"], [2, "barak", "meme"]] 
```

而不是清晰的 JSON 格式，例如：

```
[{"id": 1, "username": "afshin", "password": "123"}, {"id": 2, "username": "barak", "password": "meme"}] 
```

确切地说，我想防止在每个对象中发送合同属性。

所以，我想知道是否有任何图书馆可以做到这一点（或类似的东西）？我在服务器上有 C#，在客户端上有 JavaScript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T14:02:46.197

[JSON DB](http://michaux.ca/articles/json-db-a-compressed-json-format)或[RJSON](http://www.cliws.com/e/06pogA9VwXylo_GknPEeFA/)应该正是您正在寻找的。您很可能必须自己实现序列化器/反序列化器（尽管 RJSON 已经在 J​​S 中实现）。

至于压缩纯 JSON，我认为您可以通过将所有数据包装在单个对象条目中来绕过“需要密钥”规则：

```
{"data" : [["id", "username", "password"], [1, "afshin", "123"], [2, "barak", "meme"]]} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T14:41:40.987

因此，除了反对手动压缩的所有论点之外，这将是一个解决方案：

```
var input = [{"id": 1, "username": "afshin", "password": "123"}, {"id": 2, "username": "barak", "password": "meme"}];

var keys = {}

input.map ( function (e) { Object.keys(e).map( function (k) { keys[k] = 1; })});

var output = [ Object.keys(keys) ] .concat( input.map( function (e) {
    return Object.keys(keys).map( function (k) { return e[k]; } );
} ) );

console.log(output); 
```

和 Node.js 产生：

```
[ [ 'id', 'username', 'password' ],
  [ 1, 'afshin', '123' ],
  [ 2, 'barak', 'meme' ] ] 
```

我真的不知道这是否适用于每个浏览器等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T13:24:10.413

通过删除名称-值对的名称，您将违反 JSON 语法规则。实际上，它不会是 JSON。您还可能会导致 JSON 客户端反序列化出现问题。您能否考虑减少姓名的长度：

```
[{"id": 1, "u": "afshin", "p": "123"}, {"id": 2, "u": "barak", "p": "meme"}] 
```

此 JSON 文档的大小与您在上面建议的大小相同。

# xcode - 如何在 xcode 4.5.1 中向 Localizable.strings 添加语言？

> ID：12873423
> 
> 赞同：1
> 
> 时间：2012-10-13T13:12:05.427
> 
> 标签：xcode, xcode4.5

> **可能重复：**
> [本地化 - 向 localizable.strings 文件添加其他语言](https://stackoverflow.com/questions/12069175/localization-add-additional-language-to-localizable-strings-file)
> [使用 Xcode 4.5 本地化 Localizable.strings](https://stackoverflow.com/questions/12546355/localize-localizable-strings-with-xcode-4-5)

在 4.5.1 中的 File Inspector 选项卡中，小“+”按钮似乎消失了

编辑：这不是重复的。我认为它从 Xcode 4.5 更改为 4.5.1 所以请重新打开。

# ruby-on-rails - Globalize3 - 尝试将翻译添加到现有模型时出现迁移错误

> ID：12873430
> 
> 赞同：3
> 
> 时间：2012-10-13T13:12:57.253
> 
> 标签：ruby-on-rails, internationalization, ruby-on-rails-3.2, globalize3

我正在尝试使用 Globalize3 作为一种简单的方法来为名为 EventCategory 的模型提供翻译。

不幸的是，当我通过 rake db:migrate 运行迁移时，出现以下错误：

```
==  AddTranslationsToEventCategory: migrating =================================
rake aborted!
An error has occurred, this and all later migrations canceled:

PG::Error: ERROR:  relation "translations" does not exist
LINE 4:              WHERE a.attrelid = '"translations"'::regclass
                                    ^
:             SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
              FROM pg_attribute a LEFT JOIN pg_attrdef d
                ON a.attrelid = d.adrelid AND a.attnum = d.adnum
             WHERE a.attrelid = '"translations"'::regclass
               AND a.attnum > 0 AND NOT a.attisdropped
             ORDER BY a.attnum

Tasks: TOP => db:migrate
(See full trace by running task with --trace) 
```

我已经开始在谷歌上搜索解决方案，并发现了这一点：[Relation "translations" does not exist after Migrating to Rails 3.2.1](https://stackoverflow.com/questions/9173499/relation-translations-does-not-exist-after-migrating-to-rails-3-2-1)

但它在我的情况下不起作用。

这是我的迁移：

```
class AddTranslationsToEventCategory < ActiveRecord::Migration
  def self.up
    EventCategory.create_translation_table!({
      :name => :string
    }, {
      :migrate_data => true
    })
  end

  def self.down
    EventCategory.drop_translation_table! :migrate_data => true
  end
end 
```

到目前为止，没有什么真正棘手的！我不明白为什么它不起作用。

我在运行 Mountain Lion 的 MacBookPro 上使用 Rails 3.2.8。Postgres 是数据库系统。我已将我的应用程序提交到 GitHub。请在这里找到它：[https ://github.com/lionelrudaz/myteam2](https://github.com/lionelrudaz/myteam2)

如果您需要更多信息，请与我们联系。

提前致谢！

干杯，

莱昂内尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T23:52:52.113

在 GitHub 上提交这个问题后，我终于得到了[Philip Arndt](https://github.com/parndt)的帮助，并且这个问题已经在 Globalize3 的 0.3.0 版本中得到修复。所以解决方案只是卸载 gemfile 并使用以下命令对其进行编辑：

```
gem 'globalize3', '>= 0.3.0' 
```

希望这可以帮助。

# python - 空闲连接超时

> ID：12873432
> 
> 赞同：0
> 
> 时间：2012-10-13T13:13:17.373
> 
> 标签：python, sockets, asyncore

我正在使用 asyncore 和 asynchat 模块来构建 SMTP 服务器（我使用 smtpd lib 中的代码来构建 SMTP 服务器），但我遇到了连接超时问题。当我打开与 SMTP 服务器的 telnet 连接并将其保留时，尽管没有发生数据交换，但连接已建立。我想设置超时，例如 30 秒，如果客户端没有任何内容，则关闭服务器的空闲连接（否则可能存在简单的 DOS 漏洞）。我搜索了一个解决方案，阅读了源代码和文档，但没有发现任何可用的东西。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T13:26:43.417

根据`asyncore` [文档](http://docs.python.org/library/asyncore.html)，`asyncore.loop()`有一个超时参数，默认为 30 秒。所以显然默认已经应该是 30 秒，你可以尝试使用它来满足你自己的需要。

> timeout 参数为适当的 select() 或 poll() 调用设置超时参数，以秒为单位；默认值为 30 秒。

* * *

好的，上面实际上是指`poll()`或`select()`超时而不是空闲超时。根据[此页面](http://bytes.com/topic/python/answers/726702-adding-idle-timeout-capabilities-asyncore)，您可以破解 asyncore 以支持这样的超时：

将以下块添加到您自己的块`asyncore.poll`之后的副本中`for fd in e:`...

```
#handle timeouts
rw = set(r) + set(w)
now = time.time()
for f in (i for i in rw if i in map):
    map[f].lastdata = now
    for j in (map[i] for i in map if i not in rw):
        if j.timeout+j.lastdata now:
            #timeout!
            j.handle_close() 
```

您将需要为每个实例初始化 .timeout 和 .lastdata 成员，但这不应该那么糟糕（对于不会超时的套接字，我实际上建议 1 小时或 1 天超时）。

# mysql - 如何在一个 mysql 查询中使用 1 个交叉连接和 2 个左连接？

> ID：12873435
> 
> 赞同：0
> 
> 时间：2012-10-13T13:13:27.647
> 
> 标签：mysql, join, left-join

如何在一个 MySQL 数据库查询中使用 1 个交叉连接和 2 个左连接（总和分组）？

以下工作，但计数结果是错误的（它返回`COUNT`- 相同的结果和错误的结果）。

```
SELECT 
    n_users.username, n_users.email,
    COUNT(n_messages.ads_id ) AS msg_cnt, 
    COUNT(`n_coversation`.user_id ) AS cnv_cnt,
    SUM(n_transaction.debit), SUM(n_transaction.credit) 

FROM 
    n_users JOIN (n_ads , n_messages) ON 
        (n_ads.user_id=n_users.id AND  n_messages.ads_id=n_ads.id )    
    LEFT JOIN n_coversation ON  (n_coversation.user_id=n_users.id) 
    LEFT JOIN n_transaction ON (n_transaction.user_id=n_users.id)

WHERE  
    n_users.id =5

GROUP BY 
    n_transaction.user_id 
```

# iphone - 在标签字符串中显示 NSMutableArray 大小

> ID：12873436
> 
> 赞同：1
> 
> 时间：2012-10-13T13:13:38.913
> 
> 标签：iphone, ios, nsmutablearray, return

我试图在我的主屏幕上的标签中显示`NSMutableArray`屏幕第一次加载时的大小，然后每次我点击添加按钮时，但我收到诸如“未使用表达式结果”之类的错误。我尝试了几个选项，但仍然没有成功...请告诉我您的意见，谢谢！:)

```
int arraySize;
NSMutableArray *arrRaceCars;

- (void)viewDidLoad
   {
[super viewDidLoad];
arrRaceCars = [[NSMutableArray alloc]init];
arraySize = [self numberOfObjectsInArray:arrRaceCars]; // call for a method that should return the number of objects in array

self.lblCarsCount.text = @"%d cars in the race", &arraySize;
}

// ...part of the Add button validation; in case that everything is OK, the code below should add an object to the array and change the display of number of cars in the array in the label

else
{
    self.carType = [segmentedSelectCar titleForSegmentAtIndex:segmentedSelectCar.selectedSegmentIndex];
    self.carName = self.txtCarName.text;
    self.carSpeed = [self.txtCarSpeed.text intValue];

    car* newCar = [[car alloc]initCarWithName:carName carType:carType carMaxSpeed:carSpeed];
    NSLog(@"Car type is: %@, Car name is: %@, Car speed is: %d", self.carType, self.carName, self.carSpeed);

    [arrRaceCars addObject:newCar];

    arraySize = [self numberOfObjectsInArray:arrRaceCars];

    self.lblCarsCount.text = @"%d cars in the race", &arraySize; // this is the problematic line      
    [self alertMessage:@"addNewCar" :@"Your car has been added!" :nil :@"OK" :nil];
}

// this is the method that should return the number of objects within the array 
-(int) numberOfObjectsInArray : (NSMutableArray*) arrayToCheck
  {
     return [arrayToCheck count];
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T13:22:33.170

代替

```
self.lblCarsCount.text = @"%d cars in the race", &arraySize; // this is the problematic line 
```

你应该使用：

```
self.lblCarsCount.text = [NSString stringWithFormat: @"%d cars in the race", [arrRaceCars count]] 
```

第一行代码编译，但编译器不知道你想用某种格式做一个字符串（“表达式结果未使用警告”），这就是为什么你应该把显式的“ `stringWithFormat`”方法调用放在那里。

# qt-creator - 强制 QtCreator 在构建时运行“qmake”

> ID：12873437
> 
> 赞同：9
> 
> 时间：2012-10-13T13:13:41.780
> 
> 标签：qt-creator, qmake

在我的一些项目中，我使用了一些在 .pro 文件中配置的预构建步骤。所以`qmake`只要它被激活就会执行这个步骤。

现在在 QtCreator 中，当我构建（以及完全重建整个项目时）时，它并不总是运行`qmake`，因为它试图变得聪明并优化它。它仅在 .pro 文件已更改时运行它，这会导致几个问题。

还有一个常见的问题是，当您在该文件上运行 qmake*后*创建一个从 QObject 继承的类时，它不会注意到它，因此*不会*在其上运行`moc`。`qmake`只需通过 QtCreator 中的“构建”菜单手动运行即可解决此类问题。但是如果我忘记了这一点，我有时会因为这个而得到的编译错误感到困惑，这真的很烦人。

**（如何）在构建项目时，我可以强制 QtCreator*始终执行此步骤吗？***

我曾考虑在项目配置中添加 qmake 作为*构建步骤*，但这似乎是解决此问题的肮脏技巧。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-01-01T21:55:13.073

另一个肮脏的 hack 但更灵活一点：在 Linux/Mac 上添加“touch yourprojectfile.pro”作为构建步骤或分配一个外部工具调用。像 touch "*.pro" 在你当前的项目工作目录中运行。当 pro 文件被更改（通过触摸模拟）时，执行 qmake。不是很干净，但是外部工具加上热键解决方案比在每个项目的构建步骤中添加 qmake 更灵活。

更新：我终于找到了一个完全令人满意的解决方案。在 pro 文件中添加：

```
 qmakeforce.target = dummy
  qmakeforce.commands = rm -f Makefile ##to force rerun of qmake
  qmakeforce.depends = FORCE
  PRE_TARGETDEPS += $$qmakeforce.target
  QMAKE_EXTRA_TARGETS += qmakeforce 
```

这会删除生成的 Makefile，从而强制 qmake 为每个构建重新运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T04:59:02.897

我认为您最好的选择是自定义您的 QtCreator。这可以通过为 QtCreator 编写插件来完成，或者您可以更改名为 Qt4ProjectManager 的插件的源代码，然后自己构建它。这可能很复杂，但是，可以是一个解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-03T23:27:29.530

我所做的是创建了一个显式调用 qmake 的 makefile。当然，这意味着我有两个 makefile，但是在我的项目文件中，我有

```
MAKEFILE = makefile_qt 
```

这意味着生成的 makefile 将具有该名称。

因此，对于我手动创建的 makefile，我有：

```
default: 
    qmake;
    ${MAKE} -f makefile_qt; 
```

然后，从 QtCreator 中，我只调用常规 make，它默认为 makefile。或者您可以保留 Qt 生成的 makefile 原样，只需调用 make -f makefile 来调用您手动创建的文件。我忘记了哪个优先，makefile 或 Makefile，我不确定它是否总是相同的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-20T10:53:47.813

我在我的 .pro 文件中使用以下代码。

```
QMAKE_CLEAN += ./Makefile 
```

这使得`qmake`只要执行干净就运行。

# css - 在没有宽度的浮动 div 中浮动子元素时，与 Chrome 和 Firefox 的渲染不同。

> ID：12873438
> 
> 赞同：3
> 
> 时间：2012-10-13T13:13:41.413
> 
> 标签：css, internet-explorer, firefox, google-chrome, cross-browser

我在这里设置了一个测试

[http://jsfiddle.net/WZyF7/11/](http://jsfiddle.net/WZyF7/11/)

Firefox 在如何计算宽度方面似乎与 Chrome 和 IE7-9 不同。它不是为内容提供所需的宽度，而是使 div 成为最宽的子元素。这在 FF 中垂直堆叠元素，而在其他浏览器中水平堆叠。

有没有办法让所有浏览器都以相同的方式处理这个问题，而无需为父元素设置宽度或使用 JS？有没有人知道这是如何跨浏览器计算的？（宽度：自动；？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:16:25.800

相关的规范位是[http://www.w3.org/TR/CSS21/visuren.html#floats](http://www.w3.org/TR/CSS21/visuren.html#floats)它说：

> 表格的边框框、块级替换元素或正常流中建立新块格式上下文的元素（例如具有“溢出”而不是“可见”的元素）不得与边缘框重叠any 浮动在与元素本身相同的块格式化上下文中。如有必要，实现应通过将其放置在任何先前的浮动下方来清除所述元素，但如果有足够的空间，可以将其放置在此类浮动附近。他们甚至可以使所述元素的边框比第 10.3.3 节定义的更窄。CSS2 没有定义 UA 何时可以将所述元素放在浮动旁边，或者所述元素可以变窄多少。

[http://www.w3.org/TR/CSS21/visudet.html#float-width](http://www.w3.org/TR/CSS21/visudet.html#float-width)中的部分说：

> 如果 'width' 计算为 'auto'，则使用的值是“shrink-to-fit”宽度。

和以下。请注意，此处重要的首选宽度的实际计算并未完全定义好。所以基本上，在这种情况下，每个规范的行为是未定义的。

无论如何，这里发生的情况是 Firefox`overflow: hidden`按照第 10.3.3 节为该块提供了它应该具有的宽度，然后将其清除到浮动之外，而 Chrome 和 IE 似乎采取了“他们可能会”的路径。特别是，它假设它会在计算父级的首选宽度时这样做。

综上所述，我认为 Firefox 的行为在这种特殊的狭窄情况下更正确：你的“容器”是 400px 宽。“父”有 20px 的水平填充。“浮动”是 300px 宽。“内容”有 20px 的水平填充。这为“内容”内的文本留下了 60 像素的宽度，但最长的单词（“可用...”）在我的字体中大约是 70 像素宽。例如，在 Chrome 中，“内容”与“浮动”相邻的唯一方法是因为“内容”的右侧填充完全消失了。如果你在这里给“父级”一个固定的宽度，Firefox 会做同样的事情......但是你是在强制一个宽度，而不是要求浏览器通过收缩包装算法选择一个合理的宽度，当然.

如果您希望它具有该宽度，您最好的选择是只给“父”一个特定的宽度，而不是依靠收缩包装来产生一个实际上对于内容来说太小的宽度。

# web-applications - 如果我去网站 X，是否有可能以某种方式检测我目前在我的系统上运行的应用程序和进程？

> ID：12873443
> 
> 赞同：0
> 
> 时间：2012-10-13T13:14:26.290
> 
> 标签：web-applications

如果我访问网站 X，是否可以通过 Java、Flush 或任何其他技术以某种方式检测我目前在系统上运行的应用程序和进程？

谢谢！

# iphone - 如何替换整个操作系统的默认字体

> ID：12873448
> 
> 赞同：0
> 
> 时间：2012-10-13T13:15:05.380
> 
> 标签：iphone, objective-c, ios, cocoa-touch, fonts

有没有办法让我的应用程序覆盖当前前台应用程序的当前字体？

我想到的是，无论哪个应用程序在前台，我的应用程序都能够在键盘上附加一个按钮，这会将字体切换为自定义字体，从而覆盖所有 ui 元素（标签、按钮、文本字段）的当前字体ETC。）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T13:20:29.883

您可以在 UIFont 上创建一个类别`systemFontWithName:size:`并`boldSystemFontWithName:size:`用您自己的字体替换和替换。但这可能会产生一些奇怪的副作用，因为即使 alertViews 和 actionSheets 也是使用该方法定制的。

编辑：当然这只适用于您自己的应用程序..您无法更改应用程序之外的任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T13:29:59.353

Apple 不允许您查找的内容。

不过，似乎可以为[越狱设备](http://colorkeyboard.9eye.net/faq)完成。很难说他们到底是怎么做的，但我猜他们插手了 Apple 为键盘提供的图像/颜色，并用他们的自定义图像/颜色替换了它们，使默认值无法恢复。

[这里](http://tiffanytan0622.blogspot.in/2011/05/how-to-change-iphone-keyboard-to-p-i-n.html)也有一篇关于它的博客。

# java - Java序列化空文件

> ID：12873453
> 
> 赞同：-2
> 
> 时间：2012-10-13T13:15:15.457
> 
> 标签：java, serialization, arraylist

我有一些java序列化代码。它编译并正常运行。但生成的文件是空的。下面是我的代码

参数是整数数组列表、字符串数组列表或整数数组列表数组列表

```
Model model = new Model(
    pennTreeTags,
    tagsCount,
    iOccurTable,
    fOccurTable,
    alVocab,
    aiVocabCount,
    wordTagTable,
    fWordTagProb
);

try 
{
    FileInputStream fileIn = new FileInputStream(argv[2]);
    ObjectInputStream in = new ObjectInputStream(fileIn);
    model = (Model) in.readObject();
    in.close();
    fileIn.close();
}
catch (EOFException ex) 
{ 
    //This exception will be caught when EOF is reached
    System.out.println("End of file reached.");
}
catch(IOException i)
{
    i.printStackTrace();
    return;
}
catch(ClassNotFoundException c)
{
    System.out.println("Model class not found");
    c.printStackTrace();
    return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T13:22:40.900

您没有向任何文件写入任何内容。您只是从文件中读取。如果要写入文件，请使用 *Output*Stream。

# objective-c - UIImageView 实现

> ID：12873455
> 
> 赞同：1
> 
> 时间：2012-10-13T13:15:28.423
> 
> 标签：objective-c, ios, xcode, uiimageview

我只是想知道这个非常简单的事情。您如何在情节提要中实现一个，一个，静态图像？到目前为止我尝试过的是让 ViewController.h

```
@property (strong, nonatomic) IBOutlet UIImageView *image; 
```

和 viewController.m 到

```
_imageArray = @[@"hemla.jpg"]; //Logo for some stuff, added in resources. 
image.image = [UIImage imageNamed:_imageArray[0]]; 
```

我要么把“0”放在最后，结果什么都没有（但应用程序正在运行），或者“1”表示“线程 1：信号 SIGABRT”错误。（编译后，在模拟器中启动应用时）

有没有更好的方法来实现图像，或者只是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T13:19:08.997

如果您使用情节提要，则根本不需要代码。只需在界面生成器中设置 imageView。您可以在那里设置图像名称。

如果你想在代码中这样做，你的代码是正确的，但可能在错误的地方，例如 init 方法。此时尚未创建 imageView。您应该`viewDidLoad:`在此之后使用或任何其他点。

# java - jmesa 将 html 呈现为文本

> ID：12873461
> 
> 赞同：0
> 
> 时间：2012-10-13T13:16:00.507
> 
> 标签：java, javascript, html, jmesa

我在 Java 中使用 jmesa 直接使用 tableModel.render() 来直接获取 HTML。我的结果列表中的一些 Web 对象包含 HTML - 例如：

```
class blah {
    String email;
    public String getEmailLink() {
      return "<a href='" + email + "</a>"
    }
} 
```

在我的 Java 代码中，我会这样做：

```
htmlRow.addColumn(new HtmlColumn("emailLink")); 
```

jmesa 将其呈现为文本。如何告诉 jmesa 将文本按原样呈现为文档中的 html？

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T20:02:46.237

使用[本教程中所示](http://code.google.com/p/jmesa/wiki/CustomCellRendererTutorial)的 HtmlCellRenderer 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T00:32:03.780

查看[JMesa 源代码](http://code.google.com/p/jmesa/source/browse/trunk/jmesa/src/org/jmesa/view/html/editor/HtmlCellEditor.java?r=2184)，`HtmlCellEditor`自动转义 HTML。

我还没有测试过，但你应该能够`HtmlCellEditor`用不同的类型覆盖默认值......例如准系统[`BasicCellEditor`](http://code.google.com/p/jmesa/source/browse/trunk/jmesa/src/org/jmesa/view/editor/BasicCellEditor.java?r=2184)。它不应该有太多额外的代码：

```
HtmlColumn emailLinkColumn = new HtmlColumn("emailLink");
emailLinkColumn.setCellEditor(new BasicCellEditor());
htmlRow.addColumn(emailLinkColumn); 
```

所有这一切的另一个选择是创建一个自定义 CellEditor 并让它`<a>`为您创建标签，而不是在您的 bean 中进行。 如果你想走这条路，[这个页面应该让你开始使用自定义 CellEditor。](http://code.google.com/p/jmesa/wiki/Editors)

顺便说一句，如果你只是在一个单元格内弄乱了一个值，覆盖/替换`CellEditor`可能就是你所需要的（`CellEditor`它类似于 a 的主体`<td>`）。 `CellRenderer`关注整个单元格（类似于 the`<td>`及其内容）。

# java - 如何将 JavaEE 后端与 Play 框架结合？

> ID：12873462
> 
> 赞同：0
> 
> 时间：2012-10-13T13:16:01.163
> 
> 标签：java, jakarta-ee, playframework, playframework-2.0

我正在创建一个新的 Web 应用程序，我在其中使用 JPA、EJB 和 JavaEE 的所有优点。但是，我过去一直在做一些 JSF（是的，最新版本），我个人不太喜欢。因此，我被介绍到 Play Framework，从我目前所读到的内容来看，它非常棒。现在我想将 Java EE 后端与 Play 框架一起使用。你会怎么做？为了使用 EJB 等，您需要一个 EJB 容器，而 Glassfish、JBoss 等服务器和 Play 框架提供的所有内容都使用 Netty（如果我是正确的）。那么，您将如何让这些技术相互交流呢？Web 服务 (REST)、RMI ...？

性能/延迟会非常高吗？我将让两台服务器在同一个 VPS 上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T13:33:14.713

AFAIK，您将有两个选择：

1.  使用可嵌入的 EJB 容器并在[Play 2.0 Global.onStart()](http://www.playframework.org/documentation/2.0.4/JavaGlobal)中启动它。它存在用于各种 Java EE 服务器（[JBoss](https://community.jboss.org/wiki/EJB31Embeddable)、[Glassfish](http://embedded-glassfish.java.net/)等）的这些容器
2.  使用从您的 Java EE 应用程序提供的 Web 服务，但它会添加一个新的“层”，并且应该会更慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T13:29:31.517

如果您使用的是 Play 1.x（我怀疑您会这样做，因为听起来您正在寻找使用 Java，而不是 Scala？），那么您可以使用[Play Spring Module](http://www.playframework.org/modules/spring)。

我个人没有在 Play 中使用这个模块，我坚持使用开箱即用的结构（它使用 JPA，顺便说一句）。

# node.js - 如何在 Node 中发送 OAuth 请求

> ID：12873463
> 
> 赞同：7
> 
> 时间：2012-10-13T13:16:02.773
> 
> 标签：node.js, oauth, module

我想访问 node.js 中的 WS REST API。我有`oauth_consumer_key`and the`oauth_token`和 API 端点。oauth_signature_method 是 HMAC-SHA1。

如何在 Node 中发送 OAuth 请求？

是否有生成请求标头的模块/库？我期望的是这样的功能：

```
var httprequest = createRequest(url, method, consumer_key, token); 
```

* * *

*   2012 年 10 月 14 日更新。添加解决方案。

我正在使用下面的代码。

```
var OAuth = require('oauth').OAuth;

consumer = new OAuth('http://term.ie/oauth/example/request_token.php',
                    'http://term.ie/oauth/example/access_token.php',
                    'key', 'secret', '1.0',
                    null, 'HMAC-SHA1');

// Get the request token                    
consumer.getOAuthRequestToken(function(err, oauth_token, oauth_token_secret, results ){
    console.log('==>Get the request token');
    console.log(arguments);
});

// Get the authorized access_token with the un-authorized one.
consumer.getOAuthAccessToken('requestkey', 'requestsecret', function (err, oauth_token, oauth_token_secret, results){
    console.log('==>Get the access token');
    console.log(arguments);
});

// Access the protected resource with access token
var url='http://term.ie/oauth/example/echo_api.php?method=foo&bar=baz';
consumer.get(url,'accesskey', 'accesssecret', function (err, data, response){
    console.log('==>Access the protected resource with access token');
    console.log(err);
    console.log(data);
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-13T17:31:23.897

我们使用[https://github.com/ciaranj/node-oauth](https://github.com/ciaranj/node-oauth)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-13T10:18:47.187

这更像是一个完整的节点 twitter 包，看起来精简且有用。 [https://npmjs.org/package/twitter](https://npmjs.org/package/twitter)

# php - 无法使用 ZF2 中的模块进行路由

> ID：12873465
> 
> 赞同：0
> 
> 时间：2012-10-13T13:16:27.763
> 
> 标签：php, zend-framework2, zend-framework-modules, zend-framework-routing

我创建了一个模块，它是 ZF2 文档中给出的专辑示例的基本副本，但是，使用新模块，我根本无法访问它 - 我总是收到 404 错误。我正在 ZF2 骨架上构建它。

我已经加载了三个模块：应用程序、前端和安全性。

Frontend 和 Security 是彼此重复的，但是，我已经彻底检查过并且没有引用旧代码（因为我确实复制了模块文件夹并重命名/重写了引用）。

该模块也加载在 application.config.php 中。

关于我所缺少的任何想法？

模块配置：

```
return array(
            'controllers' => array(
                    'invokables' => array(
                            'Security\Controller\Security' => 'Security\Controller\SecurityController',
                    ),
            ),

            'router' => array(
                    'routes' => array(
                            'security' => array(
                                    'type'    => 'segment',
                                    'options' => array(
                                            'route'    => '/security[/:action][/:id]',
                                            'constraints' => array(
                                                    'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                                                    'id'     => '[0-9]+',
                                            ),
                                            'defaults' => array(
                                                    'controller' => 'Security\Controller\Security',
                                                    'action'     => 'index',
                                            ),
                                    ),
                            ),
                    ),
            ),

            'view_manager' => array(
                    'template_path_stack' => array(
                            'security' => __DIR__ . '/../view',
                    ),
            ),
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T23:51:12.430

有几件事需要确保的是： -

你必须添加你的模块

*   application.config.php （你说你做到了。）
*   Security\Controller\Security 默认也必须相同（您已经拥有）
*   还有一件事是您的文件夹结构.... -

只是为了检查你有一个 /MODULE/src/ **MODULE** /Controller/CONTROLLER_FILE_NAME.php

我希望这有帮助..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T12:56:44.737

[在遵循骨架应用程序教程（入门：骨架应用程序](http://framework.zend.com/manual/2.0/en/user-guide/skeleton-application.html)）时，我遇到了同样的问题。每当我在浏览器中访问专辑网址时（`ZendSkeletonApplication/public/album`在我的情况下），我都会收到一个 404 错误页面，但没有详细说明我为什么会得到 404。我不清楚我如何能够确定我为什么是当我仔细检查了所有内容并且非常确定我正确复制和配置了专辑模块时，得到了 404。事实证明，我的路线（module.config.php）中缺少斜杠。例如，我有`'route' => 'album[/:action][/:id]'`而不是`'route' => '/album[/:action][/:id]'`.

`'Album\Controller\Albums'`我只能通过拼写错误（例如在 invokables 值中设置而不是）故意导致错误来弄清楚这一点`'Album\Controller\Album'`，这将导致显示堆栈跟踪，然后显示在请求中调用的 ZF2 类。我将继续拼写错误、测试，然后更正 module.config.php 的每个部分，直到我知道配置的哪一部分导致了错误。

我很确定这不是调试应用程序配置的最佳方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T21:22:27.263

我知道这是一个旧帖子。但是，要确保您在模块顶部目录（与 Module.php 文件相同的目录）中有另一件事是其中包含“”的“autoload_classmap.php”文件`<?php return array();?>`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-13T11:13:53.190

了解您的规则是否已正确添加到路由的简单提示，您可以检查任何工作模块内配置文件中的路由值，如下所示：

```
 $config         = $this->serviceLocator->get('config');
 var_dump($config); 
```

# apache - 使用 mod_rewrite 删除文件名并将正斜杠换成破折号

> ID：12873474
> 
> 赞同：0
> 
> 时间：2012-10-13T13:17:50.290
> 
> 标签：apache, mod-rewrite

我正在将我的博客从动态站点转移到静态站点。作为不破坏太多链接的一部分，我正在尝试学习 mod_rewrite 但无法使用以下 RewriteRule：

我的旧网址

```
/blog/index.cfm/2012/10/9/My-blog-post 
```

我的新网址

```
/blog/2012-10-09-My-blog-post.html 
```

到目前为止，我的 vhosts.conf 文件中有以下内容，但它不起作用

```
RewriteRule ([a-zA-Z0-9.]+)(/blog/index.cfm/)([0-9]+)(/)([0-9]+)(/)([0-9]+)(/)([a-zA-Z0-9-]+) $1/blog/$3-$5-$7.html 
```

任何帮助/指针都会很棒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T13:34:39.087

首先，您只需要括号（即捕获）您将在规则的 RHS 上使用的东西。但问题似乎是您只是将年、月和日复制到 RHS，而不是`My-blog-post`. 尝试这个：

```
RewriteRule ([a-zA-Z0-9.]+)/blog/index.cfm/([0-9]+)/([0-9]+)/([0-9]+)/([a-zA-Z0-9-]+) $1/blog/$2-$3-$4-$5.html 
```

# c++ - TCP recvfrom() 不存储“来自”

> ID：12873484
> 
> 赞同：2
> 
> 时间：2012-10-13T13:19:13.330
> 
> 标签：c++, tcp, ip-address, recv

我正在使用 TCP 制作一个服务器程序，我想获取我刚刚收到的消息的发件人的 IP 地址。这是我的代码：

```
case FD_READ:
{    //Incoming data; get ready to receive
    char buffer[DEFAULT_BUFLEN];
    int bytes_received; 
    memset(buffer, '\0', sizeof(buffer));

    struct sockaddr_in recvIn;
    int recv_length = sizeof(struct sockaddr);

    memset((void *)&recvIn, '\0', recv_length);

    bytes_received = recvfrom(wParam, buffer, DEFAULT_BUFLEN, 0, (struct sockaddr *)&recvIn, &recv_length);
    cout << inet_ntoa(recvIn.sin_addr) << "\n";

    break;
} 
```

所以我正在使用 Windows 消息来查看是否应该检查数据包。接收数据有效，我可以阅读它和一切。但 recvfrom 不会改变 recvIn 变量。因此，当我执行 cout << inet_ntoa(recvIn.sin_addr) << "\n" 时，它会写入 "0.0.0.0"。我用谷歌搜索了这个问题，大多数遇到这个问题的人都忘记了初始化recv_length。但我很确定我在这里做得对。谁能看到我做错了什么？还是我需要对正在发送的数据进行一些更改？传入的数据是否可能没有 IP 地址。这是我高度怀疑的，因为我使用的是 TCP。

谢谢你的时间，我希望我能解决这个问题！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T13:33:50.430

TCP 是一种面向连接的协议。`from`并且`fromlen`旨在与无连接协议（例如 UDP）一起使用。根据[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740120%28v=vs.85%29.aspx)，`recvfrom`忽略`from`和`fromlen`用于面向连接的套接字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T13:33:04.260

对于已连接的 TCP 套接字，您应该使用[getpeername()](http://linux.die.net/man/3/getpeername)来获取远程套接字的地址。

# batch-file - 从文件的绝对路径中提取目录路径和文件名

> ID：12873486
> 
> 赞同：0
> 
> 时间：2012-10-13T13:19:19.653
> 
> 标签：batch-file, directory, filepath

从一个目录开始，我想：

1.  递归查看每个子文件夹
2.  识别文件列表
3.  对这些文件应用更改
4.  返回起点并在剩余目录上重新执行 1 到 3

这是我通过 DOS 批处理文件进行的尝试：

```
 for /r . %%g in (*.pm) do (
  SET FILEPATH=??
  SET FILENAME=??
  SET CURRENT="%cd%"
  cd %FILEPATH%
  perl Perl_Script.pl %FILENAME%
  cd "%CURRENT"
   ) 
```

FILEPATH 和 FILENAME 应该设置为什么？

根据 Jakub 的回答，我将程序修改为：

```
 for /r . %%g in (*.pm) do (
  SET FILEPATH="%%~pg"
  SET FILENAME="%%~g"
  SET CURRENT="%cd%"
  cd %FILEPATH%
  perl Perl_Script.pl %FILENAME%
  cd %CURRENT%
   ) 
```

我可以从日志中确定 FILENAME 和 FILEPATH 正在接收正确的值，但出于某种深不可测的原因，%FILEPATH% 和 %FILENAME% 将始终设置为首先分配给这些变量的值。

谷歌搜索了几个小时后，我意识到有这个延迟扩展的概念。最后（经过一场艰苦的决斗），最终归结为：

```
 setlocal enabledelayedexpansion
 for /r . %%g in (*.pm) do (
  SET FILEPATH="%%~pg"
  SET FILENAME="%%~g"
  SET CURRENT="%cd%"
  cd !FILEPATH!
  perl Perl_Script.pl !FILENAME!
  cd %CURRENT%
   )
 endlocal 
```

奇迹般有效！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T13:41:10.527

这是一个详细说明如何将文件名拆分为单独的文件信息的[答案。](https://stackoverflow.com/a/3215539/1395993)在您的情况下，您需要`%%~ng`名称和`%%~pg`路径。

# ocr - tesseract 2.x - 同时使用多种字体

> ID：12873492
> 
> 赞同：1
> 
> 时间：2012-10-13T13:19:48.183
> 
> 标签：ocr, tesseract

我已经成功地训练了 tesseract 2.x 来识别一些特定的字体。但是，似乎我无法让 tesseract 同时识别所有这些字体 - 即源图像包含所有这些字体。目前，只有一组 tesseract 数据可以放入 tessdata 文件夹（即一组具有一种训练过的字体）。

我知道 tesseract 3.x 可以正确处理多种字体 - 但是，我无法升级，因为没有与 .NET 的良好绑定，它与 2.x 版的 .NET 绑定具有相同的功能。

另外，我想避免对每种字体多次进行所有预处理和 OCR 本身。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T14:11:00.903

对于 Tesseract 2.0x，一个语言数据包可以识别多种字体。您是否对训练文件进行了[聚类？](http://code.google.com/p/tesseract-ocr/wiki/TrainingTesseract2)

Tesseract 3.01 有几个出色的 .NET 包装器。查看其[附加](http://code.google.com/p/tesseract-ocr/wiki/AddOns)页面以获取更多信息。

# html - Sublime Text 2 更改表单标签的颜色：,, etc

Been trying but I'm having difficulty changing the color of specific HTML tags. I'm creating my own custom color scheme and I want all html form tags (input, textare

ID：12873497

赞同：0

时间：2012-10-13T13:21:07.560

标签：html, colors, sublimetext2

# c# - 读取和更改文件

> ID：12873498
> 
> 赞同：0
> 
> 时间：2012-10-13T13:21:15.060
> 
> 标签：c#, .net

我正在使用 C# 和 TextReader 类读取文件

```
TextReader reader = new StreamReader(stream);
string line;
while ((line = reader.ReadLine()) != null)
 {
   if (someCondition)
    {
      // I want to change "line" and save it into the file I'm reading from
    }
 } 
```

在代码中有一个问题：如何将更改的行保存到正在读取的文件中并继续阅读？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T13:31:24.047

快速而肮脏的解决方案是：

```
TextReader reader = new StreamReader(stream);
string line;
StringBuilder sb = new StringBuilder();
while ((line = reader.ReadLine()) != null)
{
    if (someCondition)
    {
       //Change variable line as you wish.
    }
    sb.Append(line);
 }

using (StreamWriter sw = new StreamWriter("filePath"))
{
    sw.Write(sb.ToString());
} 
```

或者

```
TextReader reader = new StreamReader(stream);
string line;
String newLines[];
int index = 0;
while ((line = reader.ReadLine()) != null)
{
   if (someCondition)
   {
      //Change variable line as you wish.
   }
   newLines[index] = line;
   index++;
}

using (StreamWriter sw = new StreamWriter("filePath"))
{
    foreach (string l in newLines)
    {
        sw.WriteLine(l);
    }
} 
```

如果内存太重要，你也可以试试这个：

```
TextReader reader = new StreamReader(stream);
string line;
while ((line = reader.ReadLine()) != null)
{
   if (someCondition)
   {
      //Change variable line as you wish.
   }
   using (StreamWriter sw = new StreamWriter("filePath"))
   {
       sw.WriteLine(line);
   }
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T13:31:51.320

最简单的事情是写一个新文件，然后在完成后，用新文件替换旧文件。这样，您只需写入一个文件。

如果您尝试在同一个文件中读/写，当您要插入的内容与其要替换的内容的大小不完全相同时，您将遇到问题。

文本文件没有什么神奇之处。它们只是表示文本编码中字符的字节流。文件中没有行的概念，只有换行符形式的分隔符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-13T13:31:58.447

一个非常简单的解决方案

```
void Main()
{
    var lines = File.ReadAllLines("D:\\temp\\file.txt");
    for(int x = 0; x < lines.Length; x++)
    {
        // Of course this is an example of the condtion
        // you should implement your checks
        if(lines[x].Contains("CONDITION"))
        {
            lines[x] = lines[x].Replace("CONDITION", "CONDITION2");
        }

    }
    File.WriteAllLines("D:\\temp\\file.txt", lines);
} 
```

缺点是内存线造成的内存使用，但是，如果我们保持在 50MB 左右，现代 PC 应该可以毫不费力地处理它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-13T13:32:17.007

如果文件不是太大，你应该简单地重写整个文件：

```
var lines = File.ReadAllLines(path)
                .Where(l => someCondition);
File.WriteAllLines(path, lines); 
```

# php - 用户注册后如何发送验证/确认电子邮件

> ID：12873499
> 
> 赞同：2
> 
> 时间：2012-10-13T13:21:55.417
> 
> 标签：php, email

我已经编写了有关向已注册用户发送验证邮件的代码！

但问题是当我在浏览器中运行 .php 文件时，它说，无法发送确认邮件。

有人告诉我，您需要一个服务器（域）来发送确认邮件，它不能使用 LOCALHOST 发送。

我可以从 LOCALHOST 发送确认邮件吗？反正 ？？

如果没有，那么告诉我在哪里可以获得**免费**域（用于测试），在那里我可以上传我的 .php 文件并发送确认邮件？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T15:38:16.043

如果您在家中从开发人员服务器运行脚本，您的[ISP 很可能会遇到阻塞端口 25](http://www.authsmtp.com/faqs/faq-4.html)的问题。

我建议您使用事务性电子邮件服务，例如：

*   [阿尔法邮件](http://comfirm.se/alpha-mail/)
*   邮资应用
*   山魈

为什么？

*   具有 HTTP API 支持（在端口 80/443 上运行，因此没有 ISP 阻塞）。即很容易从家里跑。
*   面向未来。您不必考虑托管您自己的 SMTP 基础设施。一旦您的发送量增加，就对其进行缩放。
*   您不必考虑交付。由于您发送的 IP 未列入白名单而被阻止，名单还在继续。
*   统计数据。让您跟踪总发送/点击/打开/退回。

如何？

由于我是 AlphaMail 背后的开发者之一，我当然推荐你使用它（但不仅因为我是它背后的开发者之一，还因为它很棒！:)）。而且由于您使用的是 PHP，因此很容易使用 AlphaMail PHP 客户端：

```
include_once("comfirm.alphamail.client/emailservice.class.php");

$email_service = AlphaMailEmailService::create()
    ->setServiceUrl("http://api.amail.io/v1")
    ->setApiToken("YOUR-ACCOUNT-API-TOKEN-HERE");

$person = new stdClass();
$person->userId = "1234";
$person->firstName = "John";
$person->lastName = "Doe";
$person->dateOfBirth = 1975;

$response = $email_service->queue(EmailMessagePayload::create()
    ->setProjectId(12345) // Your AlphaMail project (determines template, options, etc)
    ->setSender(new EmailContact("Sender Company Name", "from@example.com"))
    ->setReceiver(new EmailContact("Joe Doe", "to@example.org"))
    ->setBodyObject($person) // Any serializable object
); 
```

AlphaMail 的另一个优点是它将逻辑与设计分开。因此，您再也不必用丑陋的非标准（电子邮件）HTML 来膨胀您的代码了。一旦您需要更改内容，无需挖掘代码，只需登录 AlphaMail 仪表板并立即编辑您的模板。此外，模板是使用简单的模板语言[Comlang 构建](http://docs.amail.io/?section=comlang)的，因此它们具有高度的个性化。

```
<html>
    <body>
        <b>Name:</b> <# payload.firstName " " payload.lastName #><br>
        <b>Date of Birth:</b> <# payload.dateOfBirth #><br>

        <# if (payload.userId != null) { #>
            <a href="/sign-up">Sign Up Free!</a>
        <# } else { #>
            <a href="/login?id=<# payload.userId #>">Sign In</a>
        <# } #>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T13:44:38.060

您可以使用 sendmail 、 smtp 或其他一些服务，如 Amazon SES 。[Amazon Simple 电子邮件服务](http://aws.amazon.com/ses/) 免费提供沙盒功能（但您需要信用卡才能使用其服务），并且可以轻松配置到您的本地主机中。

# extjs - 在 Ext.Viewport 的锚布局面板中折叠嵌套的边框布局面板

> ID：12873500
> 
> 赞同：5
> 
> 时间：2012-10-13T13:22:02.143
> 
> 标签：extjs, extjs4, collapse, nested, border-layout

我开始学习 Ext 并遇到了这样的问题。我有一个带代码的视口

```
Ext.define('WIMM.view.Viewport', {
extend: 'Ext.container.Viewport',
autoScroll: true,
layout: 'anchor',
items: [
    {
        border: false,
        title: 'Header',
        layout: 'fit',
        xtype: 'container',
        html: 'Header block. We\'ll try to do this again'
    },{
        layout: 'border',
        items: [
            {
                collapsible: true,
                width: 240,
                title: 'Aside Column',
                region:'west',
                layout: 'fit',
                html: 'Aside widgets (news, balance, budget, goals) would be here.'
            },{
                title: 'Main Block',
                border: false,
                region:'center',
                layout: 'fit',
                html: 'Main block were tabPanel would be nested in.'
            }
        ]
    },{
        title: 'footer',
        xtype: 'container',
        layout: 'fit',
        html: 'Some information in footer (copyrights, disclaimer link)'
    }
]
}); 
```

但是带有边框布局的项目会缩小，并且该块的边框只有 1px 可见。拥有滚动条对我来说很重要，因此我不能对整个视口使用边框布局。请帮我解决这个问题

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T14:25:46.307

您必须使用边框布局设置面板的高度。

```
{
    layout: 'border',
    height: 100,
    items: [
        {
        collapsible: true,
        width: 240,
        title: 'Aside Column',
        region: 'west',
        layout: 'fit',
        html: 'Aside widgets (news, balance, budget, goals) would be here.'},
    {
        title: 'Main Block',
        border: false,
        region: 'center',
        layout: 'fit',
        html: 'Main block were tabPanel would be nested in.'}
    ]
} 
```

看看这个：http: [//jsfiddle.net/3CabN/4/](http://jsfiddle.net/3CabN/4/)

# computer-science - 电子科学基础设施和分布式计算基础设施有什么区别？

> ID：12873504
> 
> 赞同：0
> 
> 时间：2012-10-13T13:22:27.760
> 
> 标签：computer-science, distributed-computing, grid-computing

[eScience](http://en.wikipedia.org/wiki/E-Science)基础设施和网格计算或分布式计算基础设施有什么区别？他们的一些例子是什么。

我无法清楚地区分它们。是如何使用网格使其成为电子科学平台吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:22:55.817

eScience 基础设施是网格计算，它是分布式系统的应用。我想是一个子类别。

# c++ - 内存分配问题

> ID：12873506
> 
> 赞同：2
> 
> 时间：2012-10-13T13:22:35.623
> 
> 标签：c++, runtime-error

[这](http://ideone.com/Rl3RN)是我的[问题](http://www.spoj.pl/problems/M00PAIR/)代码。代码在我的 Code::blocks 上运行良好，但在 spoj 网站和 ideone.com 上运行良好。我收到运行时错误。我猜 spoj 服务器无法分配所需的内存量。请给一些建议。

[http://paste.ubuntu.com/1277109/](http://paste.ubuntu.com/1277109/)（我的代码）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T13:39:32.013

您的代码声明一个空字符串`s`，然后分配给它的元素......

```
...
string s,res;int c=0;
int sum,carry=0;
for(int i=m-1;i>=0;i--)
{
    sum=(a[i]-'0')*2+carry;
    s[c]=sum%10+'0';         // This is undefined behavior, s is empty
    carry=sum/10;
    c++;
}
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T23:55:39.610

这是您的问题的可能答案，[而](http://www.spoj.pl/problems/M00PAIR/)不是您的问题。

我猜这个问题具有算法风格，其目的是找到时间复杂度最小的解决方案（也许是线性时间解决方案）。对与最佳时间复杂度相关的问题进行一些预先准备是有帮助的。

所以我计算了几个时间步产生的模式（如下所示）：

```
step                                             pattern                         no. consecutive zero pairs

  1                                                01                                           0

  2                                               1001                                          1

  3                                             01101001                                        1

  4                                         1001011001101001                                    3

  5                                 01101001100101101001011001101001                            5

  6                 1001011001101001011010011001011001101001100101101001011001101001           11

  7                 0110100110010110100101100110100110010110011010010110100110010110           21
                    1001011001101001011010011001011001101001100101101001011001101001

  8                 1001011001101001011010011001011001101001100101101001011001101001           43
                    0110100110010110100101100110100110010110011010010110100110010110    
                    0110100110010110100101100110100110010110011010010110100110010110
                    1001011001101001011010011001011001101001100101101001011001101001

  9                 0110100110010110100101100110100110010110011010010110100110010110           85
                    1001011001101001011010011001011001101001100101101001011001101001
                    1001011001101001011010011001011001101001100101101001011001101001
                    0110100110010110100101100110100110010110011010010110100110010110
                    1001011001101001011010011001011001101001100101101001011001101001
                    0110100110010110100101100110100110010110011010010110100110010110
                    0110100110010110100101100110100110010110011010010110100110010110
                    1001011001101001011010011001011001101001100101101001011001101001 
```

产生上述模式的代码如下：

```
#include<iostream>
using namespace std;
main()
{
string s,t=""; 
s="paste pattern produced in a time-step here";
int i,l,n=0;
l=s.length();
cout <<"s.length - "<<l<<endl;
    for(i=0;i<l;i++)
    {
        if(s[i]=='0')
          {t+="10";}
        else
          {t+="01";}
    }
l*=2;
        for(i=0;i<l-1;i++)
        {
            if(t[i]=='0' && t[i+1]=='0')
            {
            n+=1;
            }
        }
cout <<"t - "<<t<<endl;
cout <<"no. of consecutive zero pairs - "<<n<<endl;
} 
```

下面列出了一些重要的观察结果：

1）每个时间步的字符数是上一步的两倍。

2）在前一个时间步中为组合**01**产生一对连续的零。

3）任何模式的后半部分将是其前半部分的**非**。

现在是有趣的部分。查看每个步骤产生的连续零对的数量。如果我们分配第一步的结果，假设 n 为零：

对于第 2 步，我们的结果为 n*2 + 1，其中 n 为 0。

对于第 3 步，我们的结果为 n*2 - 1，其中 n 为 1。

第 4 步的结果为 n*2 + 1，其中 n 为 1。

对于第 5 步，我们的结果为 n*2 - 1，其中 n 为 3。

或者通常我们的结果等于 n*2 - 1（对于奇数时间步），结果等于 n*2 + 1（对于偶数时间步）

这不会解决我们的问题，因为 n 是一个变量，我们需要找到一个数学公式，它将初始结果（对于时间步长 1）和任何时间步长的结果（例如 t）联系起来。

但我们有一个简单的出路。

看看数字 0,1,1,3,5,11,21,43,85....

它形成[Jacobsthal 序列](http://oeis.org/A001045)。

这是我们的解决方案。

1）遍历输入的数字并找出**最大值**。这需要 O(n) 时间。

2）创建一个雅各布斯塔尔数的查找表（LUT），直到**最大值**。这花费的时间不会超过 O(n)，因为您只需要前两个 Jacobsthal 数来获取当前 Jacobsthal 数。从 Jacobsthal 数的性质可以看出这一点。

3）这次再次遍历输入的数字，从LUT中输出对应的序列号。查表需要 O(1) 时间，n 个数字的总时间为 O(n)。

4)整个问题的时间复杂度为O(n)。

这种方法的一个优点是我们不必处理大字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T15:17:51.033

这只是@6502 答案的延伸。

看起来[ostringstream](http://www.cplusplus.com/reference/iostream/ostringstream/)很适合你想要的东西。

```
ostringstream oss;
string s,res;
int c=0;
int sum,carry=0;

for(int i=m-1;i>=0;i--)
{
    sum=(a[i]-'0')*2+carry;
    oss << (sum%10) << '0'; //Were you trying to concatenate a '0' as well?
    carry=sum/10;
}

s = oss.str(); 
```

# xcode - iOS本地通知自定义

> ID：12873511
> 
> 赞同：1
> 
> 时间：2012-10-13T13:23:02.190
> 
> 标签：xcode, uilocalnotification

> **可能重复：**
> [自定义警报的 UILocalNotification 重复间隔（周日、周一、周二、周三、周四、周五、周六）](https://stackoverflow.com/questions/6966365/uilocalnotification-repeat-interval-for-custom-alarm-sun-mon-tue-wed-thu-f)

我是 Xcode 的新手。我需要在我的应用程序中使用本地通知。本地通知具有属性 repeatinterval，它只能具有有限的值（每分钟、每小时、每天重复一次等）。但我需要让通知以更灵活的方式重复（例如：每天 3 次）。有没有办法做到这一点？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T13:35:25.157

大约一个月前，我自己对此进行了彻底的调查。您只能以单个`repeatInterval`时间间隔获得自动重复 - 每分钟，每小时或每天等。如果您想要任何更好的控制，您必须自己做。由于您希望每天收到三次通知，因此安排三个通知，分别为 8 小时、16 小时和 24 小时，每个通知一天重复一次。

# javacv - javacv：grabber.getFrameRate() 返回 0

> ID：12873513
> 
> 赞同：0
> 
> 时间：2012-10-13T13:23:07.100
> 
> 标签：javacv

我在我的项目中使用了 javacv 来处理 avi。视频显示速度比正常快，我想获得 fps 来设置视频的速度。但是grabber.getFrameRate（）返回0，与grabber.getLengthInFrames（）和grabber.getSampleRate（）一样，谁能告诉我为什么？下面的代码片段：

```
FrameGrabber grabber = new OpenCVFrameGrabber("sample.avi");
double fps=grabber.getFrameRate();
System.out.println(fps);
//int n=grabber.getLengthInFrames();
//int f=grabber.getSampleRate();
CvMemStorage storage = CvMemStorage.create();
grabber.start();
grabbedImage = grabber.grab();
while (frame.isVisible() && (grabbedImage = grabber.grab()) != null)
{
        BufferedImage bfimg = grabbedImage.getBufferedImage();        
        frame.showImage(bfimg);
        frame.waitKey((int)(1000/fps));            
        cvClearMemStorage(storage);
}
grabber.stop(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-09T07:06:16.293

您必须在 start() 之后调用；

也许你可以

```
FrameGrabber grabber = new OpenCVFrameGrabber("sample.avi");
grabber.start();
double fps=grabber.getFrameRate(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-16T05:11:50.123

我使用此代码录制 mp4 视频：

```
public static void main(String[] args) {
    IplImage image;
    CanvasFrame canvas = new CanvasFrame("Web Cam");
    try {
        OpenCVFrameGrabber grabber = new OpenCVFrameGrabber(0);
        grabber.start();
        IplImage grabbedImage = grabber.grab();

        canvas.setCanvasSize(grabbedImage.width(), grabbedImage.height());

        System.out.println("framerate = " + grabber.getFrameRate());
        grabber.setFrameRate(grabber.getFrameRate());
        FFmpegFrameRecorder recorder = new FFmpegFrameRecorder("c:/demo.mp4", 320, 240);

        recorder.setVideoCodec(13);
        recorder.setFormat("mp4");
        recorder.setPixelFormat(avutil.AV_PIX_FMT_YUV420P);
        recorder.setFrameRate(10);
        recorder.setVideoBitrate(5*1024);  

        recorder.start();
        System.out.println("framerate = " + grabber.getFrameRate());

        while (canvas.isVisible() && (grabbedImage = grabber.grab()) != null) {
            canvas.showImage(grabbedImage);
            recorder.record(grabbedImage);
        }

        recorder.stop();
        grabber.stop();
        canvas.dispose();
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-19T07:00:36.933

我在一个网络摄像头示例中尝试了这个并且它有效：

```
double time1,time2;

// your  loop

 while(....){

     time1=System.currentTimeMillis();   // add this first in the loop 

         //code here
          .
          .
          .
          .

     time2=System.currentTimeMillis();   //   add this at the end of the loop

System.out.println("framerate = " + 1/(((time2-time)/1000)%60))

} //end of loop 
```

如果发现带有网络摄像头代码的网络摄像头示例：http: [//opencvlover.blogspot.com/2012/05/accessing-webcam-using-javacv.html](http://opencvlover.blogspot.com/2012/05/accessing-webcam-using-javacv.html)

它看起来像这样：

```
IplImage img
while (...) {

     time1=System.currentTimeMillis();   // add this first in the loop 

   //inser grabed video fram to IplImage img
   img = grabber.grab();

          .
          .
          .
          .
     //Show video frame in canvas
     canvas.showImage(img);

 time2=System.currentTimeMillis();   //   add this at the end of the loop

System.out.println("framerate = " + 1/(((time2-time)/1000)%60))
} //end of loop
          .
          .              
          . 
```

# c - ']' 标记之前的预期表达式？

> ID：12873516
> 
> 赞同：0
> 
> 时间：2012-10-13T13:23:29.750
> 
> 标签：c

我有以下行，它将参数发送`args[]`到`length`一个名为`largest`.

```
 printf("Largest is: %d \n", largest(args[], length)); 
```

当我尝试运行它时，我收到以下错误：

`error: expected expression before ']' token`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T13:26:09.900

因为您需要在运算符方括号之间放置一个整数，否则不要指定方括号：

```
printf("Largest is: %d \n", largest(&args[0], length)); 
```

或者

```
printf("Largest is: %d \n", largest(args, length)); 
```

请记住，这`args[0]`与相同`*(args + 0)`但`args[]`会出错，因为它需要一个数字来求和...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T13:25:07.620

```
 printf("Largest is: %d \n", largest(args, length)); 
```

只需删除“[]”，因为 args 是一个指针，而这正是函数所期望的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T13:25:15.513

您可能只需要数组的指针，因此请传入`largest(args, length)`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-13T13:25:20.360

你不能传递这样的数组。您必须将指针传递给数组（第一项）：

```
printf("Largest is: %d \n", largest(args, length)); 
```

# xcode - Xcode 4.5 中的 ScrollView 错误

> ID：12873520
> 
> 赞同：1
> 
> 时间：2012-10-13T13:24:05.183
> 
> 标签：xcode, scrollview

要使我的滚动视图滚动，我需要选中“垂直反弹”框。但是当我做到这一点时，同时滚动页面。如果我不将手指放在屏幕上，页面会自动滚动回第一个状态。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T20:22:30.310

取消选中框垂直反弹并选中框反弹。在顶部右侧的 IB 的滚动视图部分，选中前三个框。显示垂直... 显示水平.... 启用滚动。

这应该够了吧。让我知道这个是否奏效。阿德里安

# mysql - mySQL DROP NOT NULL 不起作用

> ID：12873530
> 
> 赞同：-1
> 
> 时间：2012-10-13T13:25:14.267
> 
> 标签：mysql, django, mysql-error-1064

我正在阅读 django 的权威指南，并且有一行我必须告诉 mySQL 列可以具有空值。

本书使用这个

```
ALTER TABLE books_book ALTER COLUMN publication_date DROP NOT NULL; 
```

但是当我运行它时，我会收到以下消息：

> ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“NOT NULL”附近使用正确的语法

这是怎么回事 ？我是初学者，所以我无法轻松诊断 mySQL 错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T13:40:11.433

是的，这个语法是错误的。

如果您只想允许列有时包含空值，那么它已经是默认行为。

检查您的表定义是否禁止空值

```
show create table 
```

如果它没有默认行为，您将看到 UNIQUE 和/或 NOT NULL 约束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T13:51:23.690

您只能`DROP`与列名称、索引名称和约束名称一起使用，但不能与数据*条件*一起使用。我不认为`NOT NULL`是命名约束，因此是错误。

您不能使用`ALTER COLUMN`删除列的 NOT NULL 定义，而是删除`DROP DEFAULT`.

**例子**：

```
ALTER TABLE books_book ALTER COLUMN publication_date DROP DEFAULT;  
ALTER TABLE books_book ALTER COLUMN publication_date SET DEFAULT TODAY(); 
```

如果您要删除`NOT NULL`列上的定义，您应该使用`MODIFY`or`CHANGE`语法 with `ALTER TABLE`。

**例子**：

```
ALTER TABLE books_book MODIFY COLUMN publication_date DATE NULL;  
ALTER TABLE books_book CHANGE COLUMN publication_date new_name DATE NULL; 
```

**请参阅**：[***ALTER TABLE 语法***](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T13:47:28.630

最简约的正确语法是：

```
ALTER TABLE books_book ALTER COLUMN publication_date column_type NULL; 
```

将 column_type 替换为当前的 publication_date 类型，如果您对该列有任何其他说明符，您也应该添加这些说明符。顾名思义，假设它是一个日期：

```
ALTER TABLE books_book ALTER COLUMN publication_date DATE NULL; 
```

您可以看到如何使用 mysqldump 或通过导出表（或 @mbarthelemy 建议的那样`show create table books_book;`）从管理界面重新创建列，从那里获取创建列的语法并在 中使用它`alter table`，但将 NOT NULL 替换为 NULL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-06T10:31:45.263

这对于 MySQL 5.5 非常有效

`ALTER TABLE books_book CHANGE publication_date publication_date DATE;`

# c# - 如何检测 libgit2sharp 中的未决更改？

> ID：12873533
> 
> 赞同：21
> 
> 时间：2012-10-13T13:25:16.123
> 
> 标签：c#, .net, libgit2sharp

在 libgit2sharp [https://github.com/libgit2/libgit2sharp/](https://github.com/libgit2/libgit2sharp/)你如何检查挂起/未提交的更改？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2015-05-18T19:51:13.047

以下对我有用：

```
///DEPRECATED - see comment from @derptastic
public bool HasUncommittedChanges
{
    get
    {
        using (var repo = new Repository(repositoryRoot))
        {
            RepositoryStatus status = repo.RetrieveStatus();
            return status.IsDirty;
        }
    }
} 
```

感谢@Derptastic 提供指向[LibGit2Sharp Wiki的链接](https://github.com/libgit2/libgit2sharp/wiki/git-diff)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-11-18T08:47:42.130

以下代码行将提供文件名和该文件的状态。

```
foreach (var item in repo1.RetrieveStatus())
{
  Console.WriteLine(item.FilePath);
  Console.WriteLine(item.State);
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-13T13:32:13.500

您可以使用`repository.Diff.Compare()`.

```
 /// <summary>
    ///   Show changes between the working directory and the index.
    /// </summary>
    /// <param name = "paths">The list of paths (either files or directories) that should be compared.</param>
    /// <returns>A <see cref = "TreeChanges"/> containing the changes between the working directory and the index.</returns>
    public virtual TreeChanges Compare(IEnumerable<string> paths = null) 
```

根本不通过任何路径应该会给出所有更改。

# python - 如何运行 Python 项目？

> ID：12873542
> 
> 赞同：4
> 
> 时间：2012-10-13T13:26:04.030
> 
> 标签：python, python-idle

我已经在我的计算机上安装了 Enthought Python 发行版，但我不知道如何使用它。我有 PyLab 和 IDLE，但我想通过键入以下命令来运行 .py 文件：

> 蟒蛇文件名.py

我不知道在哪里写这个命令：IDLE、PyLab 或 Python.exe 或 Windows 命令提示符。当我在 IDLE 中执行此操作时，它会说：

> SyntaxError：无效的语法

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T13:27:35.687

*   打开命令提示符：同时按`⊞ Win` 和`R`，然后输入`cmd`并按`↵ Enter`
*   导航到您拥有“.py”文件的文件夹（用于`cd ..`返回一个文件夹或`cd folderName`进入`folderName`）
*   然后输入`python filename.py`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T13:32:59.507

实际上，运行 Python 文件的命令应该在命令提示符下运行。Python 应该在您的路径变量中以使其灵活工作。

将 python 文件夹添加到路径后，您可以在命令提示符的任何位置调用 python，否则只能在 python 安装文件夹中调用。

以下来自python网站：

> Windows 有一个用于更改环境变量的内置对话框（以下指南适用于 XP 经典视图）：右键单击您机器的图标（通常位于您的桌面上并称为“我的电脑”）并在此处选择属性。然后，打开高级选项卡并单击环境变量按钮。
> 
> 简而言之，您的路径是：
> 
> 我的电脑 ‣ 属性 ‣ 高级 ‣ 环境变量 在此对话框中，您可以添加或修改用户和系统变量。要更改系统变量，您需要不受限制地访问您的机器（即管理员权限）。
> 
> 将变量添加到环境的另一种方法是在命令提示符下使用 set 命令：
> 
> 设置 PYTHONPATH=%PYTHONPATH%;C:\My_python_lib

如果您通过我的电脑执行此操作，则在环境变量中查找名为 path 的行。给出 Python 安装文件夹的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-30T09:45:46.173

将 PYTHON 变量设置为指向 python.exe 的完整路径。

[![在此处输入图像描述](../Images/8684e0b43f767ab19ac8fc8e417ba619.png)](https://i.stack.imgur.com/zEte2.png)

然后在命令提示符控制台窗口中输入：

> C:\path_to_folder\ **python 文件名.py**

# drools - Drools Fusion 基于时间的滑动窗口和属性过滤器

> ID：12873546
> 
> 赞同：1
> 
> 时间：2012-10-13T13:26:28.117
> 
> 标签：drools, complex-event-processing, drools-fusion

我尝试在 Drools 5.4.0.Final 中使用滑动时间窗口，并给出以下官方文档片段：

```
StockTick() over window:time( 2m ) 
```

和

```
StockTick( company == "RHT" ) over window:length( 10 ) 
```

我在想混合形式是有效的：

```
StockTick( company == "RHT" ) over window:time( 2m ) 
```

但是，除非我弄错了，否则它的行为并不像预期的那样（即只考虑过去 2 分钟内发生的 RHT 股票报价）。我不明白结果的逻辑。

有人可以解释一下这个技巧吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:10:36.637

查看`drools-fusion-docs`章节`2.6.1\. Sliding Time Windows`有一个汇总示例。这是一个适合您需要的变体。

```
rule "At least one RHT in the last 2 minutes"
when
    Number( intValue > 0 ) from accumulate(
        $tick = StockTick( company == "RHT" ) over window:time( 2m ),
        count( $tick ) )
then
    // do something here
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:47:17.707

两个 Drools 版本会导致两种不同的行为（相同的单元测试）。所以我认为我的误解来自“windows”行为中的一个错误。这次我不能说得更具体了。

# c - 别名命令在 c 中的系统函数下不起作用

> ID：12873548
> 
> 赞同：0
> 
> 时间：2012-10-13T13:26:38.353
> 
> 标签：c, alias

我正在尝试使用 C 系统函数编写别名，这是代码

```
if (argc <= 3) {
    printf("Program Usage: ./executable alias > or < or >> or &\n");
}
else {
    if (strcmp(argv[1],"alias") == 0) {
        if (strcmp(argv[2], "redirect") == 0) {
            char y[] = "=\">\"";
            char *xs = strcat(argv[1], " ");
            char *x = strcat( xs, strcat(argv[3], y));
            printf("%s\n",x);
            int status = system(x);
            printf("%d\n", status);
        }
        else {
            printf("You've not entered proper symbol\n");
        }
    }
    else {
        printf("You've not entered the shell property as alias\n");
    }
} 
```

运行程序的一般方式是

```
./a.out alias redirect custom_alias_name 
```

此外，系统函数返回 0，但是当我使用 alias 命令检查时，它不显示当前别名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T13:36:20.770

这是因为，调用`system()`不会修改父环境的状态。程序在执行时继承父进程的环境。这个继承的环境副本对于子进程是本地的。一旦这个子进程存在，对这个本地环境的任何改变都会被丢弃。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-13T14:01:56.993

返回值是命令的状态，0表示成功，-1表示错误；在这种情况下 system() 返回 0！

# mysql - 父子同桌排序

> ID：12873554
> 
> 赞同：5
> 
> 时间：2012-10-13T13:27:27.767
> 
> 标签：mysql, sql

我有一张这样的桌子-

```
id  name        ordering    catid 
1   parent1         1         0
2   parent2         2         0
3   parent3         3         0
4   child11         1         1
5   child12         2         1
6   child21         1         2
7   child22         2         2
8   child31         1         3
9   child32         2         3 
```

我试图得到如下结果 -

```
id  name        ordering    catid 
1   parent1         1         0
4   child11         1         1
5   child12         2         1
2   parent2         2         0
6   child21         1         2
7   child22         2         2
3   parent3         3         0
8   child31         1         3
9   child32         2         3 
```

我想订购第一个`parent(catid=0)`而不是它的孩子而不是第二个父母和它的孩子。这有可能通过这些专栏实现期望的结果吗？我尝试加入但没有成功。当然，我没有正确地做到这一点。这是我尝试过的-

```
SELECT a.*,c.name AS category_title FROM table AS a 
LEFT JOIN table AS c ON c.id = a.catid 
ORDER BY c.ordering asc, a.ordering asc 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T13:39:44.137

此查询将`SELF JOIN`通过将第一个表中的记录与相应的父记录连接起来，对同一个表执行 a。如果父项存在，则 parentId 列将包含记录的父项 ID，否则将包含记录本身的 ID。然后按 parentId 和 ID 对结果进行排序，以便父项始终出现在给定的父项及其子项组的顶部。

```
SELECT
    m.id, 
    m.name, 
    m.catid, 
    m.ordering, 
    p.ordering,
    case 
        WHEN p.ordering IS NULL THEN m.ordering * 10
        ELSE m.ordering + p.ordering * 10
    END AS parentId
FROM
    MyTable m
    LEFT JOIN MyTable p
    ON m.catid = p.id
ORDER BY parentId 
```

结果如下：

```
1   parent1 0   1       10
4   child11 1   1   1   11
5   child12 1   2   1   12
2   parent2 0   2       20
6   child21 2   1   2   21
7   child22 2   2   2   22
3   parent3 0   3       30
8   child31 3   1   3   31
9   child32 3   2   3   32 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T14:03:55.480

这可能是我认为的一种实现方式，但不确定它会有多好。

*   *向名为weight*的表添加一个额外的属性。
*   如果任何行是子行，则该权重将为 (catid*maximum_id+ordeing) 否则权重将为 (ordering*maximum_id) [可以通过在两个条件下两次更改权重属性来完成]
*   现在选择您需要的并按*重量*排序。
*   从表中删除列*权重*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-11T15:52:51.993

使用 ID 计算实际上不起作用，如果您有足够的记录，您可能会溢出。

这个更好：

```
SELECT a.*,c.name AS category_title FROM table AS a 
LEFT JOIN table AS c ON c.id = a.catid 
ORDER BY 
case c.ordering when 0 then a.ordering else c.ordering, a.ordering 
```

# php - 为什么我收到 HTTP 400 错误请求错误？

> ID：12873555
> 
> 赞同：3
> 
> 时间：2012-10-13T13:27:33.493
> 
> 标签：php, http, curl, http-status-code-400

```
<?php
$url ="http://absolutesms.com/Sendsms.aspx?userid=userid&password=password&clientid=clientid&senderid=absolute&mobilenumber=919000024365&smsmessage=SingleMessage".$request;
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
$curl_scraped_page = curl_exec($ch);
curl_close($ch);
echo $curl_scraped_page;
?> 
```

运行此代码后，我得到`HTTP Error 400\. The request is badly formed`. 我应该怎么办？我尝试了其他网址，他们工作正常，唯一的问题是这个。如果我在浏览器中复制这个 url，它可以工作，但是当我把它放在 curl 中运行它时，它会给出错误 400。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-14T21:19:33.030

我经常看到这个。通常通过 urlencode() 运行请求来修复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T13:37:45.867

尝试使用 http_build_query 构建 URL，如下所示

```
$url = 'http://absolutesms.com/Sendsms.aspx?' . http_build_query(array(
    'userid' => $userid,
    'clientid' => $clientid,
///... continue
)); 
```

问题可能是由于`unescaped characters that have special meanings in URLs`.

`http_build_query`安全地为您逃脱它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T13:32:12.830

您`$request`在作业结束时附加到，`$url`但您没有向我们展示`$request`包含的内容。

`$request`以这种方式附加的值很可能使 URL 无效。

如果您要像这样附加，我希望至少`&`在硬编码的 URL 字符串的末尾看到 a `$request`（尽管正如@MichaelKrelin-hacker 指出的那样，这不太可能是这个特定错误的来源）。

# objective-c - 将所有 NSString 与 Core Data 进行比较

> ID：12873557
> 
> 赞同：-1
> 
> 时间：2012-10-13T13:27:37.433
> 
> 标签：objective-c, xcode, cocoa-touch, core-data, nsstring

在我的应用程序中是类别，类别中是包含信息的单元格。用户可以添加一个类别，并且在一个类别中用户可以添加一个带有信息的单元格。`UISwitch`您可以使用将 a设置`NSString`为`@"ON"`or的信息更改单元格的样式，`@"OFF"`并使用 if 语句检查 NSString 是否等于`@"ON"`or `@"OFF"`。这一切都保存在 Core Data 中。
现在，我希望当**所有**具有特定类别信息的单元格的类别单元格`NSString` `@"ON"`的样式发生变化时。**我可以更改样式，但是如果所有**`NSString`s 都等于 ，我不知道如何进行比较`@"ON"`。

谁能帮我？

**编辑：**
我使用两个实体（一个用于类别，一个用于包含信息的单元格）。在类别的实体中是一个带有名称的属性，`donelist`类型是一个字符串。在信息的实体中是一个带有名称的属性，`doneinfo`类型也是一个字符串。

如果类别中的所有信息都设置为 ，则目标是更改样式 (dequeueReusableCellWithIdentifier) `@"ON"`。我的意思是改变颜色的风格。我已经用标识符做到了这一点，但这不是大问题。问题是我不知道如何检查一个类别中的所有信息是否都已完成（NSString 设置为`@"ON"`）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T22:08:13.800

如果`cat`是*Category*对象并且是从*Category*到*Cell*`cells`的一对多关系，那么您可以使用“doninfo == ON”获取所有单元格**`cat`**

 **```
NSPredicate *onPredicate = [NSPredicate predicateWithFormat:@"doneinfo = 'ON'"];
NSSet *onCells = [cat.cells filteredSetUsingPredicate:onPredicate]; 
```

并且您可以测试该`cat`对象的所有单元格是否都“打开”

```
[cat.cells count] == [onCells count]; 
```

另一种选择是计算

```
NSSet *onOff = [cat.cells valueForKey:@"doneinfo"]; 
```

*   如果 的所有单元格`cat`都是“ON”，则这给出了一个恰好有 1 个元素“ON”的集合。
*   如果 的所有单元格`cat`都是“OFF”，则这给出了一个恰好有 1 个元素“OFF”的集合。
*   如果一些单元格是“ON”而一些是“OFF”，这会给出一个包含 2 个元素的集合。**

# c++ - 使用 cpp 中的 getline 在数组中输入空格分隔的数字

> ID：12873563
> 
> 赞同：1
> 
> 时间：2012-10-13T13:29:45.177
> 
> 标签：c++, string, syntax, getline

我一直在解决一个问题，我需要在 CPP 中的两个单独数组中的下一行中使用空格分隔的输入（<=10），然后是其他一组空格分隔的输入。为此，我在 cpp 中使用 getline 函数。我面临的问题是接受输入的最后一行。我无法弄清楚我面临什么问题。随着最后一行的到来，输出停止并等待我输入一些内容，然后它提供输出。这里是我的代码..

```
while(test--)
{

    int len[100];
    int pos[100];

    string a,b,code;
        // int t=1;

    cin>>code;

    cin.ignore();//ignores the next cin and waits till a is not input

    getline(cin,a);

  //  deque<char> code1;

   // code1.assign(code.begin(),code.end());

    int k=0;
    int t=a.length();
    for(int i=0;i<t/2+1;i++)//converts two n length arrays pos[] and len[] 
    {

        scanf("%d",&len[i]);

    while(a[k]==' ')
    {
        k++;

    }

            pos[i]=a[k]-48;
            k++;
               }

        //int c;} 
```

`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T13:42:25.223

您的代码令人困惑，看起来它不应该工作。您正在使用 cin/scanf 的阻塞输入，因此如果标准输入上没有准备好输入，它等待您是正常的。

这就是您尝试做的事情：

*   将该行读入一个名为`a`using的字符串`getline`。
*   `a`使用 将数据从数组中读取`scanf`。

然而，`scanf`并不是为此而生的。该`scanf`函数从键盘获取输入。我认为您想使用[sscanf](http://www.cplusplus.com/reference/clibrary/cstdio/sscanf/)从 string 输入值`a`。

但更好的是使用[stringstreams](http://www.cplusplus.com/reference/iostream/stringstream/)。

起初我以为你试图从命令行读取输入的长度，所以我建议这样做：

```
size_t arr_len;

cin >> arr_len;

if (cin.fail())
{
    cerr << "Input error getting length" << endl;
    exit(1);
}

int* len = new int[arr_len];
int* pos = new int[arr_len];

for (int count = 0; count < arr_len; count++)
{
    cin >> len[count];

    if (cin.fail())
    {
        cerr << "Input error on value number " << count << " of len" << endl;
        exit(1);
    }        
}

for (int count = 0; count < arr_len; count++)
{
    cin >> pos[count];

    if (cin.fail())
    {
        cerr << "Input error on value number " << count  << " of pos" << endl;
        exit(1);
    }
}

delete [] pos;
delete [] len; 
```

然后我更仔细地看了看。看起来这就是你想要做的。我正在使用`std::vector`而不是`int[]`，但如果你真的想要，改变它并不难。

```
string line;

getline(cin, line);

if (cin.fail())
{
    cout << "Failure reading first line" << endl;
    exit(1);
}

istringstream iss;

iss.str(line);

vector<int> len;

size_t elements = 0;

while (!iss.eof())
{
    int num;
    iss >> num;

    elements++;

    if (iss.fail())
    {
        cerr << "Error reading element number " << elements << " in len array" << endl;
    }

    len.push_back(num);
}

getline(cin, line);

if (cin.fail())
{
    cout << "Failure reading second line" << endl;
    exit(1);
}

iss.clear();
iss.str(line);

vector<int> pos;

elements = 0;

while (!iss.eof())
{
    int num;
    iss >> num;

    elements++;

    if (iss.fail())
    {
        cerr << "Error reading element number " << elements << " in pos array" << endl;
    }

    pos.push_back(num);
} 
```

# asp.net - 无法打开网站视觉工作室

> ID：12873567
> 
> 赞同：1
> 
> 时间：2012-10-13T13:30:13.950
> 
> 标签：asp.net, visual-studio-2010, web

我在 Visual Studio 2010 中创建了新网站（文件->创建->网站），然后尝试使用 Visual Studio 2010 在其他计算机上打开它，但是 VS 无法打开网站说“未加载解决方案中的一个或多个项目正确”并且输出窗口告诉：“website2（它是网站的名称）不存在”尽管存在。

有人知道这个的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T20:54:46.437

尝试以下，它可能会有所帮助。在您的第一台计算机上，打开项目，右键单击您的网站，然后单击打开包含文件夹。将您的网站从文件夹复制到新计算机。在第二台计算机上打开您的项目，删除未正确加载的网站，然后将现有项目添加到解决方案中。选择您刚刚从第一台计算机复制的网站。

# c - 具有子作用域的函数的堆栈帧结构

> ID：12873568
> 
> 赞同：4
> 
> 时间：2012-10-13T13:30:16.470
> 
> 标签：c, scope, stack-frame, storage-class-specifier

以下是代码，我将其作为参考，以了解`{}`函数中存在的子作用域（或）虚拟作用域（just）如何影响堆栈帧的结构。

```
#include <stdio.h>
int main()
{
   int main_scope=0; /*Scope and life time of the variable is throughout main*/

   {
     //From below two statements I assume that there
     //is no seperate "stack frame" created for just
     //braces {}.So we are free access (scope exists) and
     //modify (lifetime exists) the variable "main_scope"
     //anywhere within main

     main_scope++;
     printf("main_scope++:(%d)\n",main_scope);

    //I expected this statement to throw an error saying
    //"Multiple definition for "main_scope".But it isn't????

    int main_scope=2;
    printf("Value of redefined main_scope:(%d)\n",main_scope);

  }

  printf("Finally main_scope in %s:(%d)\n",__FUNCTION__,main_scope);
  return 0;
} 
```

### 样本输出

```
main_scope++:(1)
Value of redefined main_scope:(2)
Finally main_scope in main:(1) 
```

基于上述行为，我推测如下。

*   没有为范围创建堆栈帧`{}`。
*   通过这种方式`auto`，声明/定义的变量`main`和子范围内的变量`{}`共享相同的堆栈帧。
*   `main`因此，在函数内的任何地方（甚至在子范围内）都可以自由访问声明/定义的变量。
*   另一方面，在子作用域中声明/定义的变量在块外**失去了作用域**。但只要堆栈帧存在，它的生命周期就有效。

**问题：**如果上述几点是正确的，那么为什么在给出同一个变量的多个定义时代码没有失败，一个是 within `main`，另一个是 within `{}`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T13:41:59.623

硬件堆栈在这里无​​关紧要。对于函数入口处的所有局部变量，它只能增长一次，而在函数退出时只能收缩一次，或者每次定义新的局部变量时它可以增长和收缩，并在其封闭的 {} 离开时销毁。

相关的是变量的“可见性”。

```
int main_scope=0;

{
    main_scope++;
    printf("main_scope++:(%d)\n",main_scope);
    // the main_scope variable that was assigned 0 is the most recent
    // visible declaration of main_scope.

    int main_scope=2;
    // now, the previous declaration of main_scope is obscured by the new one,
    // and so, you're going to access the new one
    printf("Value of redefined main_scope:(%d)\n",main_scope);
}

printf("Finally main_scope in %s:(%d)\n",__FUNCTION__,main_scope);
// the previous scope inside {} is left, so, main_scope is going to be
// the one, to which we assigned 0 
```

在内部/子范围中定义与外部/超范围同名的对象是完全合法的。后者将在 {} 范围内被遮挡。

仅供参考，还有其他一些地方可能会出现变量定义，例如在`for(;;)`语句的第一个表达式中：`for (int i = 0; i < 10; i++) ...`. 该变量`i`仅在 for 的主体内可见，您也可以通过定义另一个来将其隐藏在那里`i`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T13:42:12.527

局部变量*隐藏*了外部变量`main_scope`。

```
int main()
{
    int i=1;
    {

      int i=2;
      printf("%d", i);
      /* Whenever you use i here, it's always the local one that's used. 
      The outer i is hidden by the local i. But the local i will be deallocated 
      once the scope exits.*/
    } 
} 
```

在 C 中是完全合法的。（请注意，这在 C++ 中是非法的！）

在您的示例中，肯定会为 inner 创建一个堆栈帧`main_scope`，但是一旦程序超出该内部范围，它将被释放。

# java - spring tx:advice 和 spring aop 切入点的区别

> ID：12873570
> 
> 赞同：7
> 
> 时间：2012-10-13T13:30:41.660
> 
> 标签：java, spring, hibernate

我是春天的新手，具有hibernate的工作知识。我的工作是使用 Spring 声明式方法来实现事务。感谢 Google，我在 Google 的帮助下成功地做到了。但无法清楚地理解我在 application-context.xml 中使用的术语。

1.

```
 <tx-advice>

</tx-advice> 
```

1.  ```
    <aop-config>
        // here is point cut were declared
    </aop-config> 
    ```

有人可以向我解释上述观点，同时我也试图从谷歌中理解它。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-13T19:27:05.627

由于您已经成功实施`spring transaction`，

我们可以通过`Spring`三种方式实现事务：

1.  **平台交易管理。**
2.  **[声明](http://static.springsource.org/spring/docs/2.0.x/reference/transaction.html#transaction-declarative)式事务管理。**
3.  **[程序](http://static.springsource.org/spring/docs/3.0.x/reference/transaction.html#transaction-programmatic)化事务管理。**

您实现的称为**通过 XML 的声明式事务管理**。

简而言之，您`transaction`通过 Spring 的[AOP](http://en.wikipedia.org/wiki/Aspect-oriented_programming)功能实现了。

将`tx:advice XML`配置与基于 XML 的 AOP 配置结合起来可以实现协同组合。例如，我们可以使用方法名称来自动确定我们想要在该方法上应用哪种事务。

**假设**我们要将事务应用于所有以 and 开头的方法`save`，`modify`例如`savePizza()`, `saveColdDrink()`, `modifyOrder()`, `modifyBill()`。对于这些，我们必须`advice`在我们的 xml 文件中定义：

```
<tx:advice id="txAdvice" >
  <tx:attributes>
    <tx:method name="save*" propagation="REQUIRED"/>
    <tx:method name="modify*" propagation="REQUIRED"/>
  </tx:attributes>
</tx:advice> 
```

我们的建议已经准备就绪，正如我们在上面所说的那样，我们只希望在以`save`or开头的方法上进行事务`modify`。现在我们将通过使用`pointcut`element of来说明哪些 bean 需要上述建议`aop-config`。例如，假设我们想将事务通知应用到`com.mytransaction.service`包内所有可用的类。

为此，我们必须在 xml 文件中添加以下行：

```
<aop:config>
  <aop:pointcut id="allServices"
    expression="execution(*com.mytransaction.service.*.*(..))"/>
  <aop:advisor advice-ref="txAdvice" pointcut-ref="allServices"/>
</aop:config> 
```

简而言之，`<tx:advice>`意思是我们要做什么或我们想要应用的交易行为。 `pointcut`里面的元素`<aop-config>`说我们要在哪里应用交易，比如说`<aop:advisor advice-ref="txAdvice" pointcut-ref="allServices"/>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T13:36:48.380

该`<tx:advice>`标记特定于[事务管理](http://static.springsource.org/spring/docs/3.0.x/reference/transaction.html)配置，而该`<aop:config>`标记通常可用于进行[面向方面的编程](http://static.springsource.org/spring/docs/3.0.x/reference/aop.html)。

[AOP](http://en.wikipedia.org/wiki/Aspect-oriented_programming)可以用于比事务更多的事情，例如日志记录或访问控制。此外，事务管理不一定必须使用 AOP 来实现，它只是通常在 Spring 中完成的方式（但 Spring 也支持[Programmatic Transaction Management](http://static.springsource.org/spring/docs/3.0.x/reference/transaction.html#transaction-programmatic)）。

# java - 按顺序合并图片

> ID：12873572
> 
> 赞同：1
> 
> 时间：2012-10-13T13:31:16.857
> 
> 标签：java, bufferedimage

我正在尝试制作某种地图制作工具，使用旧的 2D 风格的游戏，例如最终幻想 4。基本上，他们将所有东西都设置在网格中，网格上的每个正方形可能占用 16x16 或 32x32 像素。

我想从小事做起，先把主要的事情搞定。比如生成一张地图，比如说，128x128。这意味着，我应该能够为程序提供一个代表不同可用图块的数字数组，然后程序应该通过按照数组指定的方式放置图块来制作一张新图片（因此索引 0 中的那个将被放置在0,0 等）。

我计划完成后展示图片，但这应该很容易。

我一直在寻找解决方案，我能找到的只是将图片相互叠加（如相互叠加），而不是并排，所以任何人都可以指出我正确的方向吗？如果我不必依赖 3rd 方库，我会喜欢它，因为这更像是一种学习体验而不是实际应用:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T17:50:09.003

首先，将输出创建为`BufferedImage`您需要的大小。

BufferedImage image = new BufferedImage(width, height, imageType);

然后，`Graphics2D`从图像中获取对象并开始在结果图像中它们需要的位置绘制较小的图像：

```
Graphics2D g2 = image.createGraphics();
for (BufferedImage img : images) {
  g2.drawImage(img, x, y, null);
} 
```

然后，您可以将图像保存为所需的格式：jpg、png 或 gif。

```
ImageIO.write(image, "jpg", file); 
```

# jsf - Spring 3.1 MVC 项目中的 JSF 2.1 和 JSP/Tiles

> ID：12873577
> 
> 赞同：0
> 
> 时间：2012-10-13T13:31:52.223
> 
> 标签：jsf, spring-mvc, facelets, tiles

我有一个 Spring 3.1 MVC 应用程序，其中 JSP 作为主要的 View 技术，Apache Tiles 用于页面模板，jQuery 等。我最近有一个需要复杂的 UI 处理的需求，我觉得 JSF/Facelets 会是更好的选择。

现有应用程序在此流程中工作

```
HttpRequest > Spring MVC DispatcherServlet > Tiles > JSP 
```

我说的是 50 多个 JSP 页面中的几个 JSF 页面。我也想保留现有的瓷砖模板。

在此应用程序中使用 JSF 和其他 JSF 页面时，我有哪些选择？

在 Spring MVC 调度程序 Servlet 将请求委托给 JSF 支持 Bean 时，是否有任何可用的规定？预期流量将类似于：

```
HttpRequest > Spring MVC DispatcherServlet > Tiles > JSF/BackingBean 
```

# java - Google App EngineCode 在部署时有效，但在开发服务器中无效

> ID：12873582
> 
> 赞同：2
> 
> 时间：2012-10-13T13:32:20.147
> 
> 标签：java, google-app-engine, blobstore, javax.imageio

有人遇到过这种情况吗？这与在开发中工作和部署失败相反。

我的 Web 应用程序在 Deployment 上成功使用了 ImagesServiceImpl.getServingUrl()，但在开发服务器中却没有。

我在这里查看了部署环境所具有的开发环境配置中是否缺少某些内容： [https ://developers.google.com/appengine/docs/java/config/appconfig#About_appengine_web_xml](https://developers.google.com/appengine/docs/java/config/appconfig#About_appengine_web_xml)

还在这里查看：[https](https://developers.google.com/appengine/docs/java/images/overview#Development_Server) ://developers.google.com/appengine/docs/java/images/overview#Development_Server 。

当我运行给我带来麻烦的代码时，控制台中会发生以下情况：

```
Oct 13, 2012 8:40:33 AM com.google.appengine.api.images.dev.LocalImagesService init
WARNING: No image reader found for format "ico". An ImageIO plugin must be installed to use this format with the DevAppServer.
Oct 13, 2012 8:40:33 AM com.google.appengine.api.images.dev.LocalImagesService init
WARNING: No image reader found for format "tif". An ImageIO plugin must be installed to use this format with the DevAppServer.
Oct 13, 2012 8:40:33 AM com.google.appengine.api.images.dev.LocalImagesService init
WARNING: No image reader found for format "webp". An ImageIO plugin must be installed to use this format with the DevAppServer.
Oct 13, 2012 8:40:33 AM com.google.appengine.api.images.dev.LocalImagesService init
WARNING: No image writer found for format "webp". An ImageIO plugin must be installed to use this format with the DevAppServer.
Oct 13, 2012 8:40:34 AM com.google.apphosting.utils.jetty.JettyLogger warn
WARNING: /upload
java.lang.IllegalArgumentException: Failed to read image
    at com.google.appengine.api.images.ImagesServiceImpl.getServingUrl(ImagesServiceImpl.java:282) 
```

虽然我没有 webp、ico 和 tif 解码器插件，但这应该不是问题，因为我只处理 jpeg 图像。

这是代码的一部分：

```
 FileService fileService = FileServiceFactory.getFileService();
    AppEngineFile newBlob = fileService.createNewBlobFile("image/jpeg");

    // Create a new Blob file with mime-type "image/jpeg"

    byte[] buffer = new byte[4096]; // 4MB
    boolean lock = true;
    FileWriteChannel writeChannel = fileService.openWriteChannel(newBlob, lock);
    // increase the buffer size as you are reading from the 
    // input stream. Read the input stream into buffer
    for (int n; (n = stream.read(buffer)) != -1; ){ 
        writeChannel.write(ByteBuffer.wrap(buffer));
    } 
        stream.close();
        writeChannel.closeFinally();

BlobKey blobKey = fileService.getBlobKey(newBlob);
ImagesService imagesService = ImagesServiceFactory.getImagesService(); 
```

您可能会说，我使用较低级别的代码来接收来自用户的上传（而不是使用 getUploadUrl.

我在部署时的数据存储和我在开发中的数据存储之间的一个区别是，我在我的开发的数据存储中看到了**BlobFileIndex**实体类型。

感谢您的任何意见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T13:46:09.730

来自文档：Java 开发服务器使用 ImageIO 框架来模拟 Image 服务。不支持“手气不错”的照片增强功能。只有安装了合适的解码器插件后，才支持 WEBP 图像格式。例如，可以使用 Java VP8 解码器插件。

有没有安装最新的 1.7.2。开发服务器中的 getServingUrl 修复了一些问题。

# wordpress - wordpress中添加图片上传接口

> ID：12873583
> 
> 赞同：0
> 
> 时间：2012-10-13T13:32:45.670
> 
> 标签：wordpress, wordpress-theming

我正在研究wordpress。并且有这种要求，我需要在管理员面板中具有管理员权限，他可以在其中上传图像。此图像将在主题中的两个地方使用。

我试图弄清楚这一点，发现图像 url 可以存储在选项表中，并且可以在主题中用于检索图像。

但不确定如何在管理面板中为此提供界面。任何实现这一目标的想法都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T14:16:47.430

不能使用内置的[自定义页眉](http://codex.wordpress.org/Function_Reference/add_theme_support#Custom_Header)图像系统吗？我并不真正了解您的所有要求，但是如果您可以选择某些东西，则没有理由构建某些东西。:) 诚然，它被称为“标题”，但实际上并非必须如此。它出现在哪里完全取决于主题。如果这对您不起作用，那么您有一个相当复杂的项目，但您可能需要一个[主题选项页面](http://www.webdesignerdepot.com/2012/02/creating-a-custom-wordpress-theme-options-page/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T14:22:11.013

转到您的 wordpress 面板-> 插件：

安装插件名为：`Custom Upload`

或者您可以从以下网址下载：

[http://wordpress.org/extend/plugins/custom-upload/](http://wordpress.org/extend/plugins/custom-upload/)

一个简单的插件，可以在 wordpress 中上传任何类型的图像。

我认为您可以使用它来管理您的主题图像。

就是这样，祝你好运。

# maven-2 - 如何在我的本地仓库 Maven 中下载和安装 jar

> ID：12873586
> 
> 赞同：7
> 
> 时间：2012-10-13T13:33:13.267
> 
> 标签：maven-2

我正在尝试使用我在 tomcat 下的内部存储库下载一个 jar，然后将其安装到我的本地 maven 存储库。

jar 文件可以在`path:http://10.11.250.14/strepo/ext/JSErrorCollector-0.2.jar`.

我编辑了我`pom.xml`提供内部仓库的链接，并在其中添加了一个依赖项，`pom.xml`但 maven 无法下载 jar。

```
<repositories>
    <repository>
      <id>internal.repo</id>
      <url>http://10.11.250.14/strepo/ext/</url>
          </repository>
 </repositories>

  <dependencies>   

     <dependency>
        <groupId>org.JS</groupId>
        <artifactId>JSErrorCollector</artifactId>
        <version>0.2</version>
    </dependency> 
```

你能请任何人帮助我吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-13T13:44:33.383

不仅仅是 jar 只是为了做一个 Maven 仓库，还有一堆其他的东西需要被视为 Maven 仓库。从 URL 我认为它不是标准的 Maven 存储库布局。

所以你至少有两个选择：

1.  使用[Artifactory](http://sourceforge.net/projects/artifactory/)、[Nexus](http://www.sonatype.org/nexus/)或其他类似软件系统设置您自己的本地网络 Maven 存储库。
2.  下载文件并将其添加到本地计算机存储库。

对于选项 2，只需下载文件，然后按以下方式运行 Maven mvn 命令（假设文件在您的当前目录中）：

```
mvn install:install-file -Dfile=JSErrorCollector-0.2.jar -DgroupId=strepo.ext -DartifactId=JSErrorCollector -Dversion=0.2 -Dpackaging=jar 
```

之后，您可以参考使用：

```
<dependency>
    <groupId>strepo.ext</groupId>
    <artifactId>JSErrorCollector</artifactId>
    <version>0.2</version>
</dependency> 
```

# c# - .net 4.5 框架中用于图像编辑的命名空间

> ID：12873589
> 
> 赞同：2
> 
> 时间：2012-10-13T13:33:29.383
> 
> 标签：c#, .net, image, image-processing, .net-4.5

我知道`System.Drawing`并且`System.Windows.Media`

`DirectUI`但是我已经阅读了关于or的 .net 包装器的提及，`DirectX`并且在 .net 4.5 中可能有用于图像编辑的新命名空间

这是真的？.net 4.5 中是否有任何其他或新的图像编辑命名空间？

我不认为`System.Drawing`有利于我的需求，`System.Windows.Media`可能。一个多星期以来，我一直在尝试了解图像编辑的概述。我已经在网上搜索过。大多数信息是旧的或不清楚的。我需要对 .net 4.5 中内置的图像编辑当前命名空间有一个清晰的最新概述

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T14:27:54.980

我认为.net 4.5 中没有关于图像处理的任何（重大）更改。

我不确定您要操作哪种图像。

**如果您的图像不是照片并且您可以使用矢量图形**- 也许您应该阅读有关 SVG 操作的信息。它可能是渲染图表或图表的不错选择。

[使用可缩放矢量图形为 ASP.NET 构建灵活、轻量级的基于 XML 的图像（作者 Dennis Forbes 在 MSDN 杂志）](http://msdn.microsoft.com/en-us/magazine/cc164114.aspx)

**如果您想编辑照片或其他一些复杂的图像**- 您可以使用[AForge.NET](http://www.aforgenet.com/framework/features/)框架，这是一个开发良好且流行的库，具有 GPL/LGPL 许可证。

# mouseevent - window.onload 的 Onclick 事件处理程序不会触发

> ID：12873590
> 
> 赞同：1
> 
> 时间：2012-10-13T13:33:32.627
> 
> 标签：mouseevent

当单击具有类“链接”的元素时，我想调用函数“详细信息”。此代码不起作用：

```
window.onload = function () {
    document.getElementById("link").onclick = details;
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T13:36:00.693

`document.getElementById("link")`将选择带有`id`“链接”的元素，而不是带有“链接”的元素`class`。

根据您需要支持的浏览器，您可以`document.getElementsByClassName()`改用。（不适用于 IE8 或更低版本，但[适用于您可能关心的所有其他浏览器](http://caniuse.com/getelementsbyclassname)。）您必须将点击处理程序分配给返回的每个元素。

# r - 用 spplot 绘制两个 SpatialPolygonsDataFrame

> ID：12873591
> 
> 赞同：9
> 
> 时间：2012-10-13T13:33:39.883
> 
> 标签：r, spatial

我有一堆我在县级绘制的数据，[没有国界](https://stackoverflow.com/questions/12682212/how-to-get-spplot-lattice-to-not-draw-borders-around-polygons)。我想添加州界。我有一个状态 shapefile（多边形），但`spplot`似乎没有任何方法可以添加到以前的地图之上。有没有办法在不重写面板函数来获取两个 SPDF 的情况下做到这一点（这对于其他人可能遇到的问题似乎非常专业）？

这是一个可重现的示例：

```
library(sp)
Srs1 = Polygons(list(Polygon(cbind(c(2,4,4,1,2),c(2,3,5,4,2)))), "s1")
Srs2 = Polygons(list(Polygon(cbind(c(5,4,2,5),c(2,3,2,2)))), "s2")

county <- SpatialPolygonsDataFrame( SpatialPolygons(list(Srs1,Srs2)), 
                                  data.frame( z=1:2, row.names=c("s1","s2") ) )

SrsA <- Polygons(list(Polygon(cbind(c(3,5,5,1,3),c(3,4,6,5,3)))),"sA")
state <- SpatialPolygonsDataFrame( SpatialPolygons(list(SrsA)),
                                  data.frame( z=1,row.names="sA" ))

spplot( county, zcol="z",col=NA )
spplot( state, add=TRUE ) # Note the add=TRUE does nothing here, but that's the spirit of what I want to accomplish 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-13T15:39:52.353

要使用该`spplot`函数过度绘制，您可以使用`sp.layout`参数。例如，创建适当布局项的列表，例如

```
spCounty <- list("sp.polygons", county, col = NA)
spState <- list("sp.polygons", state) 
```

然后绘图，将上述列表项作为列表传递给`sp.layout`参数：

```
# spplot(county, zcol = "z", col = NA, sp.layout = list(spCounty, spState))
# actually, you only need to pass the second layout item to sp.layout
spplot(county, zcol = "z", col = NA, sp.layout = spState) 
```

如果两个空间 data.frame 不完全重叠，则 x 和 y 限制可能不正确。如有必要，您可以通过从`bbox(obj)`

例如，

```
theMin <- pmin(bbox(county)[,1], bbox(state)[,1])
theMax <- pmax(bbox(county)[,2], bbox(state)[,2])

spplot(county, zcol = "z", col = NA, sp.layout = spState,
  ylim = c(theMin[2], theMax[2]), xlim = c(theMin[1], theMax[1])) 
```

![在此处输入图像描述](../Images/084ffcfe45d592541b4b7a584015b312.png)

# c - 有向图的 C 输入

> ID：12873597
> 
> 赞同：0
> 
> 时间：2012-10-13T13:34:33.043
> 
> 标签：c, graph, input

我们被告知我们的输入文件将是一个简单的数字列表：

1 3 4

2 3

3 4

4 1 2

其中第一个数字是源节点，后面的数字是它的相邻节点。

我试图弄清楚如何最好地存储它。我想首先初始化一个“图形”，一个包含所有这些节点的数组。然后在逐行读取文件时，我会将根节点存储到图形数组中，然后用以下数字更新节点的 outlist（相邻节点），直到到达行尾，对每一行重复此操作，直到EOF。

但是我在如何初始化图表上苦苦挣扎，一旦达到大小，我是否只是假设某个大小和 realloc() ？我是否先读取文件并计算行数以找出大小，然后重新读取文件以存储节点？还有其他方法吗？

这是我的数据结构的代码：

```
int initialize (Graph *mygraph, int MaxSize) {
  mygraph->MaxSize = MaxSize;
  mygraph->table = (Node *)malloc(sizeof(Node) * MaxSize);
  return 0;
}

  int insert_node (Graph *mygraph, int n, char *name) {
  mygraph->table[n].name = strdup(name);
  mygraph->table[n].outdegree = 0;
  return 0;
}

  int insert_link (Graph *mygraph, int source, int target) {
  List *newList = (List *)malloc(sizeof(List));
  newList->index = target;
  newList->next = mygraph->table[source].outlist;
  mygraph->table[source].outlist = newList;
  return 0;
} 
```

所以在阅读文件时，

1.  我初始化图表。

2.  我读取了第一个数字，将其存储为新的图形节点。

3.  我阅读下一个数字，直到点击“\n”，并将它们存储为指向上述根节点的图形链接。

4.  我对每一行都这样做，直到达到 EOF。

如您所见，在读取整个文件之前，我不知道“MaxSize”是什么。

谢谢！如果我做了任何愚蠢的事情，我对 C 很陌生，很抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T13:37:33.567

您可以对`MaxSize`（例如 8）进行一些初步猜测，并在需要时使用 （可能通过`graph->MaxSize += graph->MaxSize/2`）增长数据`realloc`，或者只是通过`malloc`-ing 一个更大的新块，将旧块复制到里面，然后`free`-ing 那个旧块）。不要忘记检查任何`malloc`or `calloc`or`realloc`调用的成功结果，它们可能（很少）失败。

请注意，我不知道您的`Graph`和`Node`类型是如何声明的（只是猜测）。

我假设并猜测您已经声明了类似

```
 typedef struct node_st Node;
 typedef struct graph_st Graph;
 struct node_st {
    char*name; // strdup-ed
    unsigned outdegree;
 };
 struct graph_st {
   unsigned MaxSize;
   Node* table; //calloc-ed, of allocated size MaxSize
 }; 
```

因此，例如，您的`insert_node`功能可能是

```
void insert_node (Graph *mygraph, int n, char *name) {
  assert (mygraph != NULL);
  assert (n >= 0);
  assert (name != NULL && *name != (char)0);
  unsigned maxsize = mygraph->MaxSize;
  if (maxsize <= n) {
    unsigned newmaxsize = n + maxsize/2 + 1;
    Node* newtable = calloc (newmaxsize, sizeof(Node));
    if (!newtable) 
       perror("growing table in graph"), exit(EXIT_FAILURE);
    for (unsigned i=0; i<maxsize; i++) 
       newtable[i] = mygraph->table[i];
    free (mygraph->table);
    mygraph->table = newtable;
    mygraph->MaxSize = newmaxsize;
  };
  mygraph->table[n].name = strdup(name);
  mygraph->table[n].outdegree = 0;
} 
```

您可能不需要`insert_node`返回值（否则您不会总是返回 0）。所以我把它变成了一个`void`返回函数（即一个“程序”或“例程”）。

# android - android ftp 上传已停止错误

> ID：12873598
> 
> 赞同：3
> 
> 时间：2012-10-13T13:34:37.633
> 
> 标签：android, networking, upload, background, ftp

```
 class Asenkron extends AsyncTask<String,Integer,Long> 
    { 

        @Override
         protected Long doInBackground(String... aurl) 
        {
         FTPClient con=null; 
        try 
        { 
            con = new FTPClient(); 
            con.connect(aurl[0]); 

            if (con.login(aurl[1], aurl[2])) 
            { 
                con.enterLocalPassiveMode(); // important!
                 con.setFileType(http://FTP.BINARY_FILE_TYPE); 
                FileInputStream in = new FileInputStream(new File(aurl[3])); 
                boolean result = con.storeFile(aurl[3], in); 
                in.close(); 
                con.logout(); 
                con.disconnect();
             } 
        } 
        catch (Exception e) 
        {
            Toast.makeText(getApplicationContext(), e.toString(), Toast.LENGTH_LONG).show();
        }
        return null;
    }

    protected void onPostExecute(String result) {}
} 
```

**我正在使用这个类，如下所示。有按钮，当我单击按钮时，它应该在后台启动 FTP 上传过程，但我得到“程序已不幸停止”错误。** 假设 ftp 地址和用户名密码路径文件部分为真，并且我已经获得了互联网和网络权限...

```
 button1.setOnClickListener(new OnClickListener() 
    {
        public void onClick(View arg0) 
        {
            new Asenkron().execute("ftpaddress","username","pass","pathfileon telephone"); 
        }
   }); 
```

这是logcat，供您分析潜在错误并帮助我...

```
10-13 13:01:25.591: I/dalvikvm(633): threadid=3: reacting to signal 3
10-13 13:01:25.711: I/dalvikvm(633): Wrote stack traces to '/data/anr/traces.txt'
10-13 13:01:25.921: D/gralloc_goldfish(633): Emulator without GPU emulation detected.
10-13 13:01:31.441: W/dalvikvm(633): threadid=11: thread exiting with uncaught exception (group=0x409c01f8)
10-13 13:01:31.461: E/AndroidRuntime(633): FATAL EXCEPTION: AsyncTask #1
10-13 13:01:31.461: E/AndroidRuntime(633): java.lang.RuntimeException: An error occured while executing doInBackground()
10-13 13:01:31.461: E/AndroidRuntime(633):  at android.os.AsyncTask$3.done(AsyncTask.java:278)
10-13 13:01:31.461: E/AndroidRuntime(633):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
10-13 13:01:31.461: E/AndroidRuntime(633):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
10-13 13:01:31.461: E/AndroidRuntime(633):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
10-13 13:01:31.461: E/AndroidRuntime(633):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
10-13 13:01:31.461: E/AndroidRuntime(633):  at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
10-13 13:01:31.461: E/AndroidRuntime(633):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
10-13 13:01:31.461: E/AndroidRuntime(633):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
10-13 13:01:31.461: E/AndroidRuntime(633):  at java.lang.Thread.run(Thread.java:856)
10-13 13:01:31.461: E/AndroidRuntime(633): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
10-13 13:01:31.461: E/AndroidRuntime(633):  at android.os.Handler.<init>(Handler.java:121)
10-13 13:01:31.461: E/AndroidRuntime(633):  at android.widget.Toast$TN.<init>(Toast.java:317)
10-13 13:01:31.461: E/AndroidRuntime(633):  at android.widget.Toast.<init>(Toast.java:91)
10-13 13:01:31.461: E/AndroidRuntime(633):  at android.widget.Toast.makeText(Toast.java:233)
10-13 13:01:31.461: E/AndroidRuntime(633):  at com.example.ftpodak.ODAK$Asenkron.doInBackground(ODAK.java:74)
10-13 13:01:31.461: E/AndroidRuntime(633):  at com.example.ftpodak.ODAK$Asenkron.doInBackground(ODAK.java:1)
10-13 13:01:31.461: E/AndroidRuntime(633):  at android.os.AsyncTask$2.call(AsyncTask.java:264)
10-13 13:01:31.461: E/AndroidRuntime(633):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
10-13 13:01:31.461: E/AndroidRuntime(633):  ... 5 more 
```

* * *

顺便说一句，我像这样更改了相关代码；

代替

```
catch (Exception e) 
  {
   Toast.makeText(getApplicationContext(), e.toString(), Toast.LENGTH_LONG).show();
  } 
```

我用这段代码替换

```
catch (Exception e) 
  {
     HATA=e.toString();
  } 
```

我将代码添加到按钮

```
textview1.setText(HATA); 
```

所以我可以在 textview 上看到错误，它写的是“Android java.net.UnknownHostException: Host is unresolved”

但我知道 ftp 服务器是正确的，我从 AndFTP 应用程序检查了 ftp 服务器。使用相同的地址登录并传递信息 ftp 服务器正在工作。所以我认为问题出在我的代码中。任何帮助将不胜感激。任何可以帮助我的人我都可以让 teamviewer 分析问题是什么......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T15:35:00.313

您可以从这一行得到问题的提示：`Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()`. 您正在尝试从不是主线程的线程执行 UI 操作。所有 UI 更改都应从主线程执行。

注释掉这一行，它将起作用：

```
Toast.makeText(getApplicationContext(), e.toString(), Toast.LENGTH_LONG).show(); 
```

不是显示 toast 来通知用户异常，而是使用 a`boolean`告诉`Activity`子类（调用`async`任务）发生了异常并相应地显示一个 toast。

**编辑**-您正在使用的库可能无法完成这项工作，因此您可以转移到一个新库，例如[apache commons ftp](http://commons.apache.org/net/download_net.cgi)。请参阅[此博客](http://lavalatwork.blogspot.in/2010/09/using-apache-commons-ftp-library-in.html)以了解如何使用它。

**EDIT2-**如果 in `con.connect(aurl[0]);`,`aurl[0]`已经包含`http://***`，则必须删除`http://`，因为 ftp 客户端稍后会附加它（导致未知主机）。还要更改此行`con.setFileType(FTP.BINARY_FILE_TYPE);`（删除`http://`部分）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T10:50:03.583

我不知道，但让我们看看我的真实代码并评估；我的真实代码是这样的

new Asenkron().execute("ftp://liseacy:gokgok81@ftp.drivehq.com/","liseacy","gokgok81","/mnt/extSdCard/MUZIK/VERIBAK.TXT");

并且该 ftp 信息正确，因为我可以毫无问题地使用 ANDftp 应用程序上传文件...

我也试过下面的代码，它也没有奏效

new Asenkron().execute("liseacy:gokgok81@ftp.drivehq.com/","liseacy","gokgok81","/mnt/extSdCard/MUZIK/VERIBAK.TXT");

我试过这个也没有用；

new Asenkron().execute("ftp.drivehq.com/","liseacy","gokgok81","/mnt/extSdCard/MUZIK/VERIBAK.TXT");

# ruby-on-rails - Rails AR：为用户获取访问次数最多的房间

> ID：12873602
> 
> 赞同：0
> 
> 时间：2012-10-13T13:35:12.530
> 
> 标签：ruby-on-rails, database, activerecord

我有以下内容：

```
class Visit < ActiveRecord::Base
  attr_accessible :user, :room

  belongs_to :user
  belongs_to :room
end

class User < ActiveRecord::Base
  has_many :visited_rooms, through: :visits, source: :room
  has_many :visits
  ...
end 
```

如何返回特定用户访问次数最多的房间？我唯一想到的是： `user.visits.include(:room).order("count DESC")`

然后从每个访问实例中获取房间。难道没有办法只取房间而不需要访问吗？

类似的东西`user.visits.rooms`没有用...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T15:19:51.810

怎么样？

```
user.visited_rooms.includes(:visits).order('visits.count DESC') 
```

# c# - 从PC c#应用程序向手机发送消息

> ID：12873604
> 
> 赞同：0
> 
> 时间：2012-10-13T13:35:26.040
> 
> 标签：c#, android, windows, mobile, console

我想向连接到无线网络的每个用户发送消息。实际上，我希望用户在连接到无线路由器后立即在设备上收到一条消息。不要介意有问题的设备，无论是移动设备还是 PC。

这意味着，当有人连接到我的无线路由器时，我希望用户收到欢迎消息。我不想成为短信SMS，而且我不应该使用GSM网络，而是以AlertDialog之类的形式出现。

我想知道它是否甚至可以做到，而且它不是某种适用于 Android 的应用程序，但是否可以在没有应用程序的情况下做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T13:54:39.063

做一个多平台消息服务几乎是不可能的，它需要你了解大量的参数。在 windows上，直到 windows xp 之前，[网络发送](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/net_send.mspx?mfr=true)可用，从 xp 开始，你可以尝试使用[msg 命令行](http://www.cezeo.com/tips-and-tricks/msg-command/)，但这需要你拥有一个与这些程序交互的程序，以发送您的自定义通知。

至于 android 有 [通知](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)，但这需要用户安装一个应用程序，每当他连接到网络时都会监听，没有其他“发送”消息的方式。我想 iOs 的故事也是如此。

用户可以拥有大量的配置来连接到您的网络，并且拥有一个为每个平台发送自定义消息的界面将是一项非常疯狂的工作。可以有 Linux、Windows、Mac，不仅是想象一下那些操作系统的所有版本，然后也有所有的移动版本，所以我不认为消息传递或警报系统是一种可行的方式，因为没有通用的方式。

最好的做法是购买路由器，或设置您的路由器，每当有人连接到您的网络并尝试导航时，他们都会收到来自您路由器的自定义页面，这并不难，而且有很多路由器都是天生的。[否则，您可以使用nocat](http://nocat.net/)设置自定义网关，甚至可以使用登录系统，这样您就可以记录连接到网络的每个用户的日志

# javascript - 日期选择器不可用的日期从/到

> ID：12873605
> 
> 赞同：1
> 
> 时间：2012-10-13T13:35:49.707
> 
> 标签：javascript, jquery, jquery-ui

我在不可用日期和周末设置了一系列不可用日期。

大批：

```
<script type="text/javascript">//<![CDATA[
var unavailableDates = [];
{foreach $fixed.rows as $row}
    var row = {};
    row['date_from'] = "{$row.fixed_date_from.value}";
    row['date_until'] = "{$row.fixed_date_until.value}";
    row['name'] = "{$row.fixed_name.value} ({$row.fixed_type.value})";
    unavailableDates.push(row);
{/foreach}
//]]></script> 
```

Q1) 我如何为截止日期添加额外的支票。我已经得到它的工作，如下所示的开始日期？

Q2) 我可以改进代码以使用 in_array 而不是循环遍历每个日历日的每个日期吗？

```
var days = ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];
var unavailableDays = ["Saturday","Sunday"];

$("#.datePicker").datepicker($.extend(true, {}, $.initDatePickers.defaults, {
    beforeShowDay: function(date) {
        ymd = date.getFullYear() + "-" + ("0"+(date.getMonth()+1)).slice(-2) + "-" + ("0"+date.getDate()).slice(-2);
        day = new Date(ymd).getDay();
        result = null;

        // Check if date in unavailable array or weekend
        for(var i = 0; i < unavailableDates.length; i++){
            if ((ymd == unavailableDates[i].date_from) && $.inArray(days[day], unavailableDays) < 0) {
                return [false,"unavailable",unavailableDates[i].name];
            }
        }

        if(result){
            return result;
        } else {
            return [true, "available", ""];
        }
    } 
})); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T13:52:15.250

使用该`befreShowDay`选项来解析您的数据数组以确定日期是否可选

**[beforeShowDayType：函数（日期日期）](http://api.jqueryui.com/datepicker/#option-beforeShowDay)**

函数将日期作为参数，并且必须返回一个数组，其中 [0] 等于 true/false 指示此日期是否可选，[1](http://api.jqueryui.com/datepicker/#option-beforeShowDay)等于 CSS 类名称或默认表示为 ""，以及 [2]此日期的可选弹出工具提示。在显示之前，它会在日期选择器中的每一天被调用。

# xcode - xCode：从动态添加的子视图中激活 IBAction

> ID：12873620
> 
> 赞同：1
> 
> 时间：2012-10-13T13:37:00.337
> 
> 标签：xcode, uiview, uibutton

我有一个单独的 UIView 类，它构造一个包含 UIButton 的简单页脚栏。

```
 - (id)initWithFrame:(CGRect)frame
  {
    self = [super initWithFrame:CGRectMake(0, 410, 320, 50)];
    if (self) {
      int buttonHeight = self.frame.size.height;
      int buttonWidth = 70;
      int nextBtnPosX =0;
      int nextBtnPosY =0;

      self.backgroundColor =[UIColor colorWithRed:254.0/255.0 green:193.0/255.0 blue:32.0/255.0 alpha:1.0];
      [self sendSubviewToBack:self];
      UIButton *nextBtn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
      [nextBtn setTitle:@"Next" forState:UIControlStateNormal];
      nextBtn.frame = CGRectMake(nextBtnPosX, nextBtnPosY, buttonWidth, buttonHeight);
      [nextBtn addTarget:self.superview action:@selector(GoToNextPage) forControlEvents:UIControlEventTouchUpInside];   

      [self addSubview:nextBtn];

    }
    return self;
  } 
```

我有几个 ViewController，然后将上面的页脚视图类作为子视图添加到每个视图中。

```
 UIView *newFooter = [[theFooter alloc] init];
  [self.view addSubview:newFooter]; 
```

现在，页脚视图中的实际 UIButton 需要为其添加到的每个 viewController 设置不同的标记。

所以我认为最好将 IBAction 添加到实际的视图控制器，然后通过页脚视图调用它。

但这是我遇到问题的地方。如何调用父控制器从 addTarget 的页脚子视图中初始化 IBAction(GoToNextPage)？

将其全部包含在页脚子视图中并传入所需的目标是否会更容易，如果是这样，那将如何完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:45:40.163

这是您应该做什么的粗略概述。这就是你的 UIView 的头文件的样子

```
@protocol myViewControllerDelegate <NSObject>
@optional
- (void)didPushButton:(id)sender;
@end

@interface UIViewController : UITableViewController
{
    __unsafe_unretained id <myViewControllerDelegate> delegate;
}

@property (nonatomic, assign) id <myViewControllerDelegate> delegate;

@end 
```

请记住`@synthesize delegate;`在您的主文件中。

最后在您的主文件中，您将拥有一个接收 UIButton 操作的 IBAction。假设该动作名为 buttonPushed。

将该操作设置为：

```
- (IBAction)buttonPushed:(id)sender
{
    if (delegate)
        [delegate didPushButton:sender];
} 
```

最后请记住，您需要将委托设置给您正在使用此视图控制器的每个视图控制器。

```
UIView *newFooter = [[theFooter alloc] init];
[self.view addSubview:newFooter];
newFooter.delegate = self; 
```

# java - 命令行参数和命令行参数数组的长度

> ID：12873624
> 
> 赞同：0
> 
> 时间：2012-10-13T13:37:42.123
> 
> 标签：java, arrays, command-line-arguments

这是我得到的问题“编写一个程序来读取和显示 2 个命令行参数和命令行参数数组的长度”。

这是我在 Java 中的答案。这是正确的吗？

```
 int length = args.length;

        for(int i = 0;i<length; i++)
            {
            System.out.println(args[i]);
            }
System.out.println("Length is " + args.length);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T13:40:59.643

你应该只显示 2 个参数？

```
for(int i = 0; i< args.length && i < 2; i++)
{
  System.out.println(args[i]);
}
System.out.println("Length is " + args.length); 
```

# x86 - x86标志寄存器中的辅助进位和公共进位有什么区别？

> ID：12873631
> 
> 赞同：1
> 
> 时间：2012-10-13T13:38:38.370
> 
> 标签：x86, cpu-architecture, flags, cpu-registers

我想知道这个 x86 寄存器标志在 DOS/Windows 程序 Debug 中的含义：

辅助进位（`AC = 1`或`NA = 0`）

它与普通进位具有相同的含义吗？（`CY = 1`或`NC = 0`）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T14:51:58.920

当指令导致第 3 位进位或借位时，设置辅助进位标志。与 CY 相同，但用于字节中低半字节的高位。AC的缩写是old style，标志在Intel处理器手册中被命名为“AF”，是“Adjust Flag”的缩写。它被少数执行 BCD 计算调整的 x86 指令使用，例如 AAC（加法后的 Ascii 调整）和 DAA（加法后的十进制调整）。这些指令可以追溯到计算的石器时代，那时以 BCD 编码提供操作数仍然很普遍。它将十进制数字编码为半字节。就像十进制 99 在 BCD 中是 10011001。

在当时，处理器为涉及 BCD 的计算提供专门的硬件支持是很常见的。那是古老的历史，程序员习惯于用二进制编码数字。好吧，最重要的是编译器。值得注意的是，这些指令不再存在于 x64 指令集中。为更有用的 64 位特定操作码腾出空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-31T01:32:16.257

辅助进位标志`AF`监视 4 位（半字节）进位，而通用进位标志监视*操作数大小*`CF`的 MSB 的进位。如果使用 8 位寄存器，这可能是 8 位进位，例如，如果使用 16 位寄存器，则可能是 16 位进位，而当使用相应的寄存器时，这可能是 32 位或 64 位进位，例如，或分别。*`al``ah``ax``eax``rax`*

# nservicebus - NServicebus 没有任何持久性？

> ID：12873632
> 
> 赞同：1
> 
> 时间：2012-10-13T13:38:50.430
> 
> 标签：nservicebus

一个新手问题：如果我不使用 Sagas 或 pub/sub 模型，我是否需要任何带有 NServiceBus 的持久层？

默认持久化是 RavenDB，我想知道我是否只使用 NSB 而没有 RavenDB 或任何持久层？

旁注：目前我必须先运行 RavenDBServer.exe，然后才能使用 NserviceBus，所以如果我开始使用 NServiceBus，我不想依赖另一个在生产中运行的应用程序。这可能是我的安装问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T18:13:15.430

NServiceBus 仅使用持久性来存储 pub/sub 和 saga 状态的订阅。如果您不使用这些，则不需要 RavenDB 或任何其他实现。我相信默认情况下 NServiceBus.Core 二进制文件与 RavenDB DLL 捆绑在一起，但在您的情况下，生产中不需要它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T16:44:36.553

如果我理解正确，您还可以使用我认为在内存持久性中使用的 NServiceBus.Lite 配置文件。当您正在开发和尝试学习 NServiceBus 时，这是一个很好的方法。但是，我不确定您是否希望在生产中这样做。更好的做法是在数据库或文件系统中保留一些持久性，以确保在出现错误或应用程序重新启动的情况下应用程序的可靠性。

# android - Passing parameters from Android FragmentActivity to Fragment

> ID：12873635
> 
> 赞同：4
> 
> 时间：2012-10-13T13:39:02.153
> 
> 标签：android, parameters, fragment, android-fragmentactivity

When Im trying to pass a parameter from FragmentActivity to a Fragment it gives me null pointer exception in the getArguments() in the Fragment.

Here is my FragmentActivity Code

```
 public class IndexChartActivity extends FragmentActivity {
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            setContentView(R.layout.index_chart);

            IndexFragmentActivity indexFragment =   
 (IndexFragmentActivity)getSupportFragmentManager().findFragmentById(R.id.index_fragment);
            indexFragment.newInstance("ASPI");

        }

    } 
```

Here is the index_chart.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#FFFFFF"
    android:orientation="vertical" >

    <fragment
        android:id="@+id/header_fragment"
        android:name="com.lk.ignitionit.cse.util.HeaderFragmentActivity"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

    <fragment
        android:id="@+id/index_fragment"
        android:name="com.lk.ignitionit.cse.util.IndexFragmentActivity"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

    <fragment
        android:name="com.lk.ignitionit.cse.util.ChartFragmentActivity"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

and Here is the Fragment

```
public class IndexFragmentActivity extends Fragment {
    protected ImageView ivASPI;
    protected ImageView ivMPI;
    protected ImageView ivSP;
    protected TextView tvMain;
    protected TextView tvTop;
    protected TextView tvBottom;
    String response = null;
    String result = null;
    String []  resultArr = null;
    Bundle b = new Bundle();
    String indexType = null;
    int layout;
    IndexFragmentActivity f = null;

    public  IndexFragmentActivity newInstance(String index) {
        f = new IndexFragmentActivity();
        Bundle args = new Bundle();
        args.putString("indextype", index);
        f.setArguments(args);
        return f;
    }

    public String getSelectedIndex() {
        return f.getArguments().getString("indextype");
    }
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        if(getSelectedIndex().equals("ASPI")){
            layout = R.layout.aspi_header;
        }else if(getSelectedIndex().equals("MPI")){
            layout = R.layout.mpi_header;
        }else{
            layout = R.layout.sp_header;
        }
        View view = inflater.inflate(layout, container, false);

        tvMain = (TextView) view.findViewById(R.id.tv_main);
        tvTop = (TextView) view.findViewById(R.id.tv_top);
        tvBottom = (TextView) view.findViewById(R.id.tv_bottom);

        new ServiceAccess().execute("");

        tvMain.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                b.putString("type", "S&P SL20");
                Activity activity = getActivity();
                Intent intent = new Intent(activity, IndexChartActivity.class);
                intent.putExtras(b);
                startActivity(intent);  

            }
        });

        return view;
    }
} 
```

and Here is my ERROR

```
Caused by: java.lang.NullPointerException
at com.lk.ignitionit.cse.util.IndexFragmentActivity.getSelectedIndex(IndexFragmentActivity.java:69) 
```

I referred lots of stackoverflow questions relevant to this and tried the sample code given [http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html) as well. But still no luck

Really appreciate any feed back on this as this seems to be a very basic issue which I cannot figure out..

Thanks in Advance

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-13T15:35:12.340

1.  Get rid of `Activity` from the names of all classes that do not inherit from `Activity`. For example, `IndexFragmentActivity` is not an `Activity`.

2.  In `onCreate()` of your actual activity, you are calling `findFragmentById()` to retrieve a fragment, then calling `newInstance()` on that fragment. However, the fragment will not exist the first time `onCreate()` is called, and you will fail here with a `NullPointerException`. Please correctly handle this case.

3.  The method name `newInstance` in Java is most commonly associated with the [factory pattern](http://en.wikipedia.org/wiki/Factory_method_pattern), where `newInstance()` is a `static` method used in place of a public constructor to create instances of some class. Your `newInstance()` method is not `static`. This will cause confusion for those who come after you to maintain the code.

4.  You call `newInstance()` in `onCreate()`, create the new fragment instance, and then throw it away, which is a waste of time.

Hence, assuming that your original instance of your fragment (wherever it came from) does not have an arguments `Bundle` set, that would explain your `NullPointerException` in `getSelectedIndex()`.

> When Im trying to pass a parameter from FragmentActivity to a Fragment

To pass a parameter to a *newly created* fragment, using a `static` `newInstance()` method and the arguments `Bundle` to create the *new* fragment is perfectly reasonable.

To pass a parameter to a fragment that already exists, simply call some setter method on that fragment.

# javascript - 通过 Ajax 在 Jquery 框中加载 Twitter 框

> ID：12873636
> 
> 赞同：0
> 
> 时间：2012-10-13T13:39:07.457
> 
> 标签：javascript, jquery, html, ajax, twitter

我想使用（ajax？）在jquery中加载一个twitter弹出框

这是我的原始代码，它在新窗口中加载 Twitter 框：

```
function twitter_click() {
    var twtTitle = document.title;
    var twtUrl = location.href;
    var maxLength = 140 - (twtUrl.length + 1);
    if (twtTitle.length > maxLength) {
        twtTitle = twtTitle.substr(0, (maxLength - 3)) + '...';
    }
    var twtLink = 'http://twitter.com/home?status=' + encodeURIComponent(twtTitle + ' ' + twtUrl);
    window.open(twtLink,'','width=565, height=540');
} 
```

这是jquery弹出框的代码。

```
 function showUrlInDialog(url, options){
  options = options || {};
  var tag = $("<div></div>"); //This tag will the hold the dialog content.
  $.ajax({
    url: url,
    type: (options.type || 'GET'),
    beforeSend: options.beforeSend,
    error: options.error,
    complete: options.complete,
    success: function(data, textStatus, jqXHR) {
      if(typeof data == "object" && data.html) { //response is assumed to be JSON
        tag.html(data.html).dialog({modal: options.modal, title: data.title}).dialog('open');
      } else { //response is assumed to be HTML
        tag.html(data).dialog({modal: options.modal, title: options.title}).dialog('open');
      }
      $.isFunction(options.success) && (options.success)(data, textStatus, jqXHR);
    }
  });
}

<a href="#" onclick="showUrlInDialog('/feedback-form', {error: function() { alert('Could not load form') }}); return false;"><img src="twitter_button.jpg></a> 
```

我对编码一无所知，所以如果有人可以将这两个脚本结合起来，以便第一个脚本的 twitter 内容加载到 jquery 弹出脚本中，这将使我的一天变得愉快！谢谢。皮亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T13:59:40.973

从改变这个开始：

```
window.open(twtLink,'','width=565, height=540'); 
```

对此：

```
showUrlInDialog(twtLink, {error: function() { alert('Could not load form') }}); 
```

然后运行它，使用这个：

```
<a href="#" onclick="twitter_click()"><img src="twitter_button.jpg></a> 
```

# module - TypeScript 内部模块使用

> ID：12873638
> 
> 赞同：2
> 
> 时间：2012-10-13T13:39:15.687
> 
> 标签：module, typescript

我在 BMW.ts 中定义了一个名为 BMW 的类，如下所示：

```
///<reference path="../Thing.ts"/>

module Entities.Cars {

    import e = Entities;

    export class BMW extends Vehicle {

        public series: string;

         constructor ( model : string, series : string) {
            super("BMW", model)
            this.series = series;
        }

         drive() {
             alert("driving a bimmer is a different kind of feeling");
         }       

         toString() : string
         { 
             return this.getName() + " " + this.series + " " + this.getType();
         }
    }
} 
```

在另一个文件 Thing.ts 中，我将 Vehicle 和 Thing 类定义如下：

```
module Entities {

    // Class
    export class Thing {

        private _name: string;
        private _type: string;

        // Constructor
        constructor (public name: string, public type: string) {
            this._name = name;
            this._type = type;
         }

        getName(): string { return this._name; }
        setName(name: string) { this._name = name; }

        getType(): string { return this._type; }
        setType(name: string) {
            this._type = name;
        }

        toString() : string
        { 
            return "Entities.Thing";        
        }
    }

    export class Vehicle extends Thing {

        public cargoCapacity: number;
        public fuelType: string;
        public owner: string;

        constructor (make: string, model : string) {
            super(make, model)
        }

        drive() {
        }

        toString(): string {
            return "Entities.Vehicle";
        }
    }
} 
```

当我在引用 Thing 和 BMW TypeScript 文件后尝试执行以下代码时：

```
var car = new Entities.Cars.BMW("335i", "E90");
car.drive(); 
```

我收到以下错误“Microsoft JScript 运行时错误：无法获取属性‘BMW’的值：对象为空或未定义”的异常。为 BMW 生成的 Javascript 有错误。我上面的代码片段有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T15:13:46.967

`javascript`您的代码没有任何问题，因此您生成文件的导入顺序似乎是错误的。该规范说明了以下内容：

> 构成全局模块的源文件的初始化顺序最终取决于生成的 JavaScript 文件在运行时加载的顺序（例如，可能由引用生成的 JavaScript 文件的标签控制）。

我生成了一个文件`app.ts`如下：

```
///<reference path='Things.ts'/>
///<reference path='bmw/BMW.ts'/>
var car = new Entities.Cars.BMW("335i", "E90");
car.drive(); 
```

此时，您有两个选择：

1.  让编译器通过生成单个输出文件来确定执行文件的正确顺序

    `tsc --out app.js app.ts`

    然后你只需要 source `app.js`。

2.  手动指定正确的顺序。对我来说，以下是唯一有效且不会引发错误的顺序。

    ```
    <html>
        <head>
            <script src="Things.js"></script>
            <script src="bmw/BMW.js"></script>
            <script src="app.js"></script>
        </head>
        <body>
        </body>
    </html> 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T13:55:30.790

你的代码很好。

我的猜测是您没有正确地将脚本标签放置在您的 head 元素中（错误的顺序，或省略了一些）。

解决这个问题并且不必记住正确的声明顺序的最简单方法是通过设置 --out 选项使用来自 tsc 编译器的单个 .js 输出文件。

**编辑**：根据您正在处理的 js 场景（WSH、Web 应用程序或其他一些 js 环境），您需要以不同的方式链接 js 源文件。以 wsh 为例，您可以使用 FileSystemObject 读取源文件，然后对其进行评估。或者你可以使用 AMD ......

# c# - 如何使用 Monodevelop 和 C# 打印纯文本？

> ID：12873640
> 
> 赞同：2
> 
> 时间：2012-10-13T13:39:27.627
> 
> 标签：c#, macos, monodevelop

我在要打印的 TextView 中显示了一些文本。我已经在谷歌上搜索了 2 个完整小时。如果有人能帮我解决这个问题，你真的会让我开心。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T14:10:39.860

这是一个非常简单的示例（在 Windows 机器上测试）：

```
PrintDocument doc = new PrintDocument();
var printFont = new Font("Arial", 10);
doc.PrintPage += (s, ev) => {
        ev.Graphics.DrawString("Your text goes here",
                                printFont, 
                                Brushes.Black, 
                                ev.MarginBounds.Left,
                                ev.MarginBounds.Top);
        HasMorePages = false;
    };
doc.Print(); 
```

您必须添加`System.Drawing`对这两个`using`语句的引用：

```
using System.Drawing;
using System.Drawing.Printing; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T11:33:58.283

此页面上的代码很好地解释了如何做到这一点：http: [//www.mail-archive.com/gtk-sharp-list@lists.ximian.com/msg03762.html](http://www.mail-archive.com/gtk-sharp-list@lists.ximian.com/msg03762.html)

# android - Android/Eclipse：如何嵌入 .jar 文件？

> ID：12873643
> 
> 赞同：2
> 
> 时间：2012-10-13T13:39:36.400
> 
> 标签：android, eclipse, jar, embed, ksoap

我无法将库（在我的情况下为 ksoap）嵌入到我的项目中。运行时出现错误“找不到从方法...引用的类 'org.ksoap2.serialization.SoapObject'”。当然，这个类在 ksoap 库中可用，不用说我的代码中有相应的“import ...”行。我已经尝试以不同的方式嵌入它，我在 stackoverflow 和其他地方找到了这些方式。我通过属性 => 构建路径 => 添加外部 jar 并通过导入 jar、属性 => 构建路径 => 添加 jar 进行了尝试。它没有什么区别，其他库也一样。我还尝试选择 Google API 或 Android 作为构建目标 - 但是，它没有改变。

我正在使用 Eclipse Juno，该项目是一个 Android 2.2 项目。基本上，我一直在关注[http://www.youtube.com/watch?v=v9EowBVgwSo上的指南](http://www.youtube.com/watch?v=v9EowBVgwSo)

请参阅下面的代码和错误消息的完整列表。

```
package com.example.mytest;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import android.widget.TextView;

public class FirstScreen extends Activity {
    private static final String SOAP_ACTION = "http://tempuri.org/CelsiusToFahrenheit";
    private static final String METHOD_NAME = "CelsiusToFahrenheit";
    private static final String NAMESPACE = "http://tempuri.org";
    private static final String URL = "http://www.w3schools.com/webservices/tempconvert.asmx";
    TextView tv;        
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_first_screen);
        tv = (TextView)findViewById(R.id.textView01);
        tv.setText("Mein Test");

        SoapObject Request = new SoapObject(NAMESPACE, METHOD_NAME);
        Request.addProperty("Celsius", "32");

        SoapSerializationEnvelope soapEnvelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        soapEnvelope.dotNet = true;
        soapEnvelope.setOutputSoapObject(Request);

        HttpTransportSE aht = new HttpTransportSE(URL);

        try
        {
            aht.call(SOAP_ACTION, soapEnvelope);
            SoapPrimitive resultString = (SoapPrimitive) soapEnvelope.getResponse();
            tv.setText("Status: " + resultString);

        }
        catch(Exception e)
        {
            e.printStackTrace();
        }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_first_screen, menu);
        return true;
    }
} 
```

错误信息：

```
10-13 12:59:00.734: E/dalvikvm(6567): Could not find class 'org.ksoap2.serialization.SoapObject', referenced from method com.example.mytest.FirstScreen.onCreate
10-13 12:59:00.734: W/dalvikvm(6567): VFY: unable to resolve new-instance 501 (Lorg/ksoap2/serialization/SoapObject;) in Lcom/example/mytest/FirstScreen;
10-13 12:59:00.734: D/dalvikvm(6567): VFY: replacing opcode 0x22 at 0x0012
10-13 12:59:00.734: D/dalvikvm(6567): VFY: dead code 0x0014-005a in Lcom/example/mytest/FirstScreen;.onCreate (Landroid/os/Bundle;)V
10-13 12:59:00.875: D/AndroidRuntime(6567): Shutting down VM
10-13 12:59:00.875: W/dalvikvm(6567): threadid=1: thread exiting with uncaught exception (group=0x40015578)
10-13 12:59:00.875: E/AndroidRuntime(6567): FATAL EXCEPTION: main
10-13 12:59:00.875: E/AndroidRuntime(6567): java.lang.NoClassDefFoundError: org.ksoap2.serialization.SoapObject
10-13 12:59:00.875: E/AndroidRuntime(6567):     at com.example.mytest.FirstScreen.onCreate(FirstScreen.java:25)
10-13 12:59:00.875: E/AndroidRuntime(6567):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-13 12:59:00.875: E/AndroidRuntime(6567):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
10-13 12:59:00.875: E/AndroidRuntime(6567):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
10-13 12:59:00.875: E/AndroidRuntime(6567):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
10-13 12:59:00.875: E/AndroidRuntime(6567):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
10-13 12:59:00.875: E/AndroidRuntime(6567):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-13 12:59:00.875: E/AndroidRuntime(6567):     at android.os.Looper.loop(Looper.java:130)
10-13 12:59:00.875: E/AndroidRuntime(6567):     at android.app.ActivityThread.main(ActivityThread.java:3687)
10-13 12:59:00.875: E/AndroidRuntime(6567):     at java.lang.reflect.Method.invokeNative(Native Method)
10-13 12:59:00.875: E/AndroidRuntime(6567):     at java.lang.reflect.Method.invoke(Method.java:507)
10-13 12:59:00.875: E/AndroidRuntime(6567):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
10-13 12:59:00.875: E/AndroidRuntime(6567):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
10-13 12:59:00.875: E/AndroidRuntime(6567):     at dalvik.system.NativeStart.main(Native Method)
10-13 12:59:00.878: I/Process(6567): Sending signal. PID: 6567 SIG: 9
10-13 13:03:01.222: E/dalvikvm(6870): Could not find class 'org.ksoap2.serialization.SoapObject', referenced from method com.example.mytest.FirstScreen.onCreate
10-13 13:03:01.222: W/dalvikvm(6870): VFY: unable to resolve new-instance 33 (Lorg/ksoap2/serialization/SoapObject;) in Lcom/example/mytest/FirstScreen;
10-13 13:03:01.222: D/dalvikvm(6870): VFY: replacing opcode 0x22 at 0x0012
10-13 13:03:01.222: D/dalvikvm(6870): VFY: dead code 0x0014-005a in Lcom/example/mytest/FirstScreen;.onCreate (Landroid/os/Bundle;)V
10-13 13:03:01.472: D/AndroidRuntime(6870): Shutting down VM
10-13 13:03:01.472: W/dalvikvm(6870): threadid=1: thread exiting with uncaught exception (group=0x40015578)
10-13 13:03:01.519: E/AndroidRuntime(6870): FATAL EXCEPTION: main
10-13 13:03:01.519: E/AndroidRuntime(6870): java.lang.NoClassDefFoundError: org.ksoap2.serialization.SoapObject
10-13 13:03:01.519: E/AndroidRuntime(6870):     at com.example.mytest.FirstScreen.onCreate(FirstScreen.java:25)
10-13 13:03:01.519: E/AndroidRuntime(6870):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-13 13:03:01.519: E/AndroidRuntime(6870):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
10-13 13:03:01.519: E/AndroidRuntime(6870):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
10-13 13:03:01.519: E/AndroidRuntime(6870):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
10-13 13:03:01.519: E/AndroidRuntime(6870):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
10-13 13:03:01.519: E/AndroidRuntime(6870):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-13 13:03:01.519: E/AndroidRuntime(6870):     at android.os.Looper.loop(Looper.java:130)
10-13 13:03:01.519: E/AndroidRuntime(6870):     at android.app.ActivityThread.main(ActivityThread.java:3687)
10-13 13:03:01.519: E/AndroidRuntime(6870):     at java.lang.reflect.Method.invokeNative(Native Method)
10-13 13:03:01.519: E/AndroidRuntime(6870):     at java.lang.reflect.Method.invoke(Method.java:507)
10-13 13:03:01.519: E/AndroidRuntime(6870):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
10-13 13:03:01.519: E/AndroidRuntime(6870):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
10-13 13:03:01.519: E/AndroidRuntime(6870):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-07T20:32:12.450

（在问题编辑中回答。转换为社区 wiki 答案。请参阅[将问题的答案添加到问题本身时的适当操作是什么？](https://meta.stackoverflow.com/questions/267434/what-is-the-appropriate-action-when-the-answer-to-a-question-is-added-to-the-que)）

OP写道：

> 由于有关 libs 文件夹的提示，解决了该问题。
> 
> 感谢我收到的另一个提示，我能够找出问题所在。仅将库添加到 libs 文件夹是不够的 - 它还需要从该位置添加到构建路径（属性 => Java 构建路径 => 添加 Jars）。
> 
> 对于那些熟悉 Java/Android 开发的人来说，这可能是非常明显的——但我对这些东西完全陌生。谢谢您的帮助！

# php - 在没有主键或唯一字段的情况下替换 MySQL 中的现有记录或创建新记录

> ID：12873647
> 
> 赞同：3
> 
> 时间：2012-10-13T13:39:50.923
> 
> 标签：php, mysql

我正在使用 PHP，我需要在 MySQL 数据库中插入一条新记录，或者如果它存在，只需更新它。我阅读了他们建议使用`REPLACE`or的几个答案`INSERT...ON DUPLICATE KEY UPDATE`，但是如果我很好理解，这两个选项意味着使用唯一字段或主键（唯一的）。在我的例子中，MySQL 表的值类似于：

```
Timestamp            | Query1   | Query2   | Result
-------------------------------------------------------- 
2012-10-13 08:15:27  | American | Men      | here result

2012-10-13 08:15:23  | American | Men      | result2

2012-10-13 08:15:27  | American | Women    | other result

2012-10-13 08:15:27  | German   | Men      | here result 
```

因此我不能有主键或唯一字段，因为“query1”、“query2”和“Result”可以有相同的值（例如，我可以有多个包含“American”（query1）和“Men”（query2）字段的记录和不同的结果。

目前在 PHP 中我正在使用：

```
INSERT INTO results (Timestamp, Query1, Query2, Result) VALUES ('$current_timestamp', '$nationality', '$gender', '') 
```

它只是附加所有记录并创建一个巨大的数据库。但是我想要实现的是在整个组合 query1&query2&result 不存在的情况下添加一条新记录。否则我只想更新“时间戳”字段。

例如，如果我的 PHP 脚本产生以下数据：

```
Timestamp            | Query1   | Query2   | Result
2012-10-13 08:15:23  | American | Men      | result2 
```

并且数据库已经包含“American”&“Men”&“result2”的精确组合，那么只更新字段“timestamp”。否则，如果组合不同（例如“American”“Men”“result3），则将新记录添加到表中。

预先感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T13:43:50.527

即使没有`PRIMARY KEY`像典型`AUTO_INCREMENT`整数这样的单列，如果这三列是唯一的组合，您应该将它们定义为复合键。这不仅会保留唯一性，还会将它们作为一个单元强制索引。

```
CREATE TABLE results (
  `Timestamp` DATETIME NOT NULL,
  `Query1` VARCHAR() NOT NULL,
  `Query2` VARCHAR() NOT NULL,
  `Result` VARCHAR() NOT NULL,
  /* Composite key across three columns */
  PRIMARY KEY (`Query1`,`Query2`,`Result`)
); 
```

然后，您可以[`ON DUPLICATE KEY UPDATE`](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)在插入时使用以中止键违规插入并改为更新时间戳。

```
INSERT INTO results (
   Timestamp, 
   Query1, 
   Query2, 
   Result
) VALUES (
   '$current_timestamp', /* see note below about NOW() */
   '$nationality', 
   '$gender',
   ''
) ON DUPLICATE KEY UPDATE `Timestamp` = '$current_timestamp'; 
```

注意：我们假设 PHP 变量已经被正确转义。

注意 2：如果 的值`$current_timestamp`确实是当前时间戳而不是某个存储值，我建议使用 MySQL 的`NOW()`函数而不是传入 PHP 变量。

```
ON DUPLICATE KEY UPDATE `Timestamp` = NOW() 
```

`$current_timestamp`列表中的也是如此`VALUES()`......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T13:47:15.827

您可以使用像这样的条件插入：

```
INSERT INTO results (Timestamp, Query1, Query2, Result) 
SELECT '$current_timestamp', '$nationality', '$gender', '$result'
    FROM DUAL
    WHERE NOT EXISTS (SELECT * FROM results
                         WHERE Query1 = '$nationality' 
                           AND Query2 = '$gender'
                           AND Result = '$result') 
```

`dual`是 Oracle 最初引入的一种特殊的单列表

来源：[http ://en.wikipedia.org/wiki/DUAL_table](http://en.wikipedia.org/wiki/DUAL_table)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T13:47:52.803

您可以使用“WHERE NOT EXISTS”子句，如下所示：

```
INSERT INTO results (Timestamp, Query1, Query2, Result)
SELECT '$current_timestamp', '$nationality', '$gender', '$result'
FROM Dual
WHERE NOT EXISTS (SELECT * 
    FROM results 
    WHERE Query1 = '$nationality' 
    AND Query2 = '$gender'
    AND Result = '$result'
  ) 
```

这里 Dual 是一个存根/假表，您只能在 mysql 中使用它来使查询在语法上正确。

# java - Android 如何将字符串数组设置为单个文本视图

> ID：12873648
> 
> 赞同：5
> 
> 时间：2012-10-13T13:40:01.110
> 
> 标签：java, android

我想尝试将字符串数组设置为 textview 的文本。我怎样才能做到这一点？

以下是我到目前为止尝试过的：

```
String[] word = { "Pretty", "Cool", "Weird" };

tv.setText( word.length ); 
```

但它抛出了一些错误。我是 Android/Java 新手

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-13T13:46:16.097

`word.length`给你数组的长度，而不是内容。您的意思是将内容设置为`tv`. 您可以使用[`Arrays#toString`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#toString%28java.lang.Object%5B%5D%29)方法： -

```
String[] word = { "Pretty", "Cool", "Weird" };

// Prints [Pretty, Cool, Weird]
tv.setText(Arrays.toString(word));   

// Prints Pretty, Cool, Weird
tv.setText(Arrays.toString(word).replaceAll("\\[|\\]", "")); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-13T13:49:19.567

[TextView.setText()](http://developer.android.com/reference/android/widget/TextView.html#setText%28java.lang.CharSequence,%20android.widget.TextView.BufferType%29)将 a`CharSequence`作为第一个参数，因此如果`int`在`word.length`.

使用增强的 for 循环：

```
String[] word = { "Pretty", "Cool", "Weird" };
StringBuilder builder = new StringBuilder();
for (String s: word) {
    builder.append(s);
    builder.append(" ");
}

tv.setText(builder.toString().trim()); // .trim to remove the trailing space. 
```

或者从 Java 8 开始：

```
tv.setText(String.join(" ", word)); 
```

# ravendb - 将 1000000 个文档插入 RavenDB

> ID：12873650
> 
> 赞同：0
> 
> 时间：2012-10-13T13:40:06.277
> 
> 标签：ravendb

我想将 1000000 个文档插入 RavenDB。

```
class Program
{
        private static string serverName;
        private static string databaseName;

        private static DocumentStore documentstore;
        private static IDocumentSession _session;

        static void Main(string[] args)
        {

            Console.WriteLine("Start...");

            serverName = ConfigurationManager.AppSettings["ServerName"];
            databaseName = ConfigurationManager.AppSettings["Database"];

            documentstore = new DocumentStore { Url = serverName };
            documentstore.Initialize();

            Console.WriteLine("Initial Databse...");

            _session = documentstore.OpenSession(databaseName);

            for (int i = 0; i < 1000000; i++)
            {
                var person = new Person()    
                {
                    Fname = "Meysam" + i,
                    Lname = " Savameri" + i,
                    Bdate = DateTime.Now,
                    Salary = 6001 + i,
                    Address = "BITS provides one foreground and three background priority levels that" +
                              "you can use to prioritize transBfer jobs. Higher priority jobs preempt"+
                              "lower priority jobs. Jobs at the same priority level share transfer time,"+
                              "which prevents a large job from blocking small jobs in the transfer"+
                              "queue. Lower priority jobs do not receive transfer time until all the "+
                              "higher priority jobs are complete or in an error state. Background"+
                              "transfers are optimal because BITS uses idle network bandwidth to"+
                              "transfer the files. BITS increases or decreases the rate at which files "+
                              "are transferred based on the amount of idle network bandwidth that is"+
                              "available. If a network application begins to consume more bandwidth,"+
                              "BITS decreases its transfer rate to preserve the user's interactive"+
                              "experience. BITS supports multiple foreground jobs and one background"+
                              "transfer job at the same time.",
                    Email = "Meysam" + i + "@hotmail.com",
                };

                _session.Store(person);

                Console.ForegroundColor = ConsoleColor.Green;
                Console.WriteLine("Count:" + i);
                Console.ForegroundColor = ConsoleColor.White;
            }

            Console.WriteLine("Commit...");

            _session.SaveChanges();
            documentstore.Dispose();

            _session.Dispose();

            Console.WriteLine("Complete...");
            Console.ReadLine();
        }
    } 
```

但会话不保存更改，我收到一个错误：

> *mscorlib.dll 中出现“System.OutOfMemoryException”类型的未处理异常*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-13T17:48:00.487

[文档会话](http://ravendb.net/docs/client-api/basic-operations/understanding-session-object)旨在处理少量请求。相反，尝试分批插入 1024。之后，处理会话并创建一个新会话。你得到一个的原因`OutOfMemoryException`是因为文档会话缓存了所有组成对象以提供一个[工作单元](http://martinfowler.com/eaaCatalog/unitOfWork.html)，这就是为什么你应该在插入一个批次后处理会话。

一个巧妙的方法是使用[Batch linq 扩展](http://code.google.com/p/morelinq/source/browse/MoreLinq/Batch.cs)：

```
foreach (var batch in Enumerable.Range(1, 1000000)
 .Select(i => new Person { /* set properties */ })
 .Batch(1024))
{
 using (var session = documentstore.OpenSession())
 {
   foreach (var person in batch)
   {
     session.Store(person);
   }
   session.SaveChanges();
 }
} 
```

`Enumerable.Range`和的实现`Batch`都是惰性的，不会将所有对象都保存在内存中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-21T22:26:00.750

RavenDB 还有一个[批量 API](http://ravendb.net/docs/article-page/2.5/csharp/client-api/advanced/bulk-inserts)，无需额外的 LINQ 扩展即可执行类似的操作：

```
using (var bulkInsert = store.BulkInsert())
{
    for (int i = 0; i < 1000 * 1000; i++)
    {
        bulkInsert.Store(new User
            {
                Name = "Users #" + i
            });
    }
} 
```

Note`.SaveChanges()`不会被调用，并且会在达到批量大小（在`BulkInsert()`需要时定义）或被`bulkInsert`处理时调用。

# configuration-files - 使用 protobuf 作为文本配置文件

> ID：12873653
> 
> 赞同：3
> 
> 时间：2012-10-13T13:40:30.663
> 
> 标签：configuration-files, protocol-buffers

我最近遇到了一个非常大的关键任务项目，其中所有配置文件都是使用文本 protobuf 定义定义的。配置文件旨在供人类阅读和编辑。

例如

```
message ServerSettings {
  required int32 port = 3022;
  optional string name = "mywebserver";
} 
```

我个人觉得这很幽默。但它实际上是一种合理的保持简单的技术，还是明显的愚蠢？！

换句话说，这是否存在真正的、实际的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T14:52:35.623

如果那是格式的文本原型，那么......无论如何，我猜。如果它有效，那么它与任何其他序列化格式一样合理。

如果那是原始模式，那么它是非法的（= 之后的值是字段编号）。

Json 或 XML 可能更典型，但只要它有效，它就不是“愚蠢的”。所以最终的问题是：它有效吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-31T04:18:17.867

我认为这很聪明。我猜他们通过 protoc --encode 传递它来生成一个实际解析的二进制文件。

优点： 1\. 生成代码来解析配置 2\. 类型验证 3\. 与键/值相比更健壮的配置文件，因为它支持结构、联合、映射和数组 4\. 配置数据现在是可序列化的，这意味着它可以很容易地公开到 RPC 或 IPC 接口。

缺点： 1\. 映射/数组的语法可能有点冗长。2\. 如果您在内存限制严格的系统上，则需要在目标上安装 protoc 以及 libprotobuf.so。

# php - 正确的 mvc 概念，视图中的 php 代码很少

> ID：12873655
> 
> 赞同：0
> 
> 时间：2012-10-13T13:40:30.903
> 
> 标签：php, model-view-controller

我在 MVC 模式中有一个不明白的地方。请帮助理解。

例如，我们在数据库中有汽车表，我们想从表中获取并打印结果，但是如果找不到结果（0 行），在这种情况下打印：“我们没有结果”

这是`models.php`

```
class modesl {

function getCars () {

    $res = $this->db->query("SELECT names FROM cars");
    if ($res->num_rows == 0) {
        return "We dont have results";
    }
    else {
        return $res;
    }

}

} 
```

这是`views.php`

```
class views {

    function loadHTML ($resultFromCars) {
         require 'carspage.php';
    }

} 
```

这是`carspage.php`

```
<html>
<body>
<?php

    if (is_object($resultFromCars)) {
        while ($row = $resultFromCars->fetch_assoc()) {
            echo $row['names']."<br>";
        }
    }
    else {
        echo  $resultFromCars;
    }

?>
</body>
</html> 
```

这是`controllers.php`

```
class controllers {

    function generatePage () {  
        $model = new models();
        $resultFromCars = $model->getCars();

        $view = new views();
        $view->loadHTML($resultFromCars);
    }

} 
```

这可行，但据我所知，许多 php 代码（即 condition `if (is_object) { } else { }`）不是正确的 MVC。请告诉这个具体案例，为了获得正确的 MVC 概念，我的架构（大声笑）必须进行哪些更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T14:04:32.090

我喜欢 Havelock 提供的答案。

我会进一步调整这一点，确保您的模型已经以数组格式返回数据（如果没有找到，则返回 false）。因此，从结果集中提取数据的逻辑保留在模型中，它真正应该在的地方。

你的观点变得更加简单：

```
<?php

if (!empty($results)) {
  foreach ($results as $row) {
   echo $row['name'] . "<br />";
  }
} else {
    echo "Eh, Nothing found...";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T13:52:52.147

你似乎做得很好，只是一件小事需要改进。由于模型只是数据的包装器，因此您应该只返回数据（并且不返回包含错误/异常消息的字符串）。如果没有要返回的数据，则返回`FALSE`，就像在 PHP 中所做的那样。

```
class CarModel {

    function getCars () {

        $res = $this->db->query("SELECT names FROM cars");
        if ($res->num_rows == 0) {
            return FALSE; // if that happens, the function will stop execution here, so no "else" is needed
        }

        return $res;

    }

} 
```

在你看来

```
<?php

    if ($resultFromCars === FALSE && !empty($resultFromCars)) {
        echo "We don't have results";
    }
    else { // now you know it's not FALSE, so it must be an object, no need to check whether it is one
        while ($row = $resultFromCars->fetch_assoc()) {
            echo $row['names']."<br>";
        }
    }

?> 
```

# java - 如何将关键代码转换为 char 或 String 以在 TextView 上显示

> ID：12873657
> 
> 赞同：0
> 
> 时间：2012-10-13T13:40:51.277
> 
> 标签：java, android, keycode

> **可能重复：**
> [如何将键码转换为字符或字符串？](https://stackoverflow.com/questions/6571081/how-can-i-convert-a-key-code-into-a-char-or-string)

嘿，我对 Android 很陌生，不确定如何使用 getKeyCode。我有这个

```
public boolean onKeyDown(int keyCode, KeyEvent event)
{
    switch(keyCode)
    {
    case KeyEvent.KEYCODE_DPAD_RIGHT:
        Toast.makeText(getApplicationContext(), "Pressed DPAD Right Button",
        Toast.LENGTH_LONG).show();
        return true;
    case KeyEvent.KEYCODE_DPAD_LEFT:
            Toast.makeText(this, "Pressed DPAD Left Button",
            Toast.LENGTH_LONG).show();
            return true;
    }
    return super.onKeyDown(keyCode,event);
} 
```

但我想改变一个文本视图来说明按下了什么按钮。如何将 keyCode 传递给 setText 函数？我已经把它全部连接起来了，我只需要将 keyCode 变量放入

```
txt2.setText(Integer.toString(getKeyCode())); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T15:46:58.770

如果您想获得密钥的实际名称，可以执行以下操作：

```
int pressedKeyCode = event.getKeyCode();
Object pressedKeyCodeObject = new Integer(pressedKeyCode);
String pressedKeyText = KeyEvent.getKeyText((Integer)pressedKeyCodeObject); 
```

# android - SpannableString(Builder) 在 EditText 中不可选择

> ID：12873660
> 
> 赞同：0
> 
> 时间：2012-10-13T13:41:14.523
> 
> 标签：android

我创建了一个 EditText 并添加了一些包含格式的文本，如下面的代码所示：

```
 EditText richTextView = (EditText)findViewById(R.id.rich_text);

    // this is the text we'll be operating on  
    SpannableStringBuilder text = new SpannableStringBuilder("Lorem ipsum dolor sit amet");  

    // make "Lorem" (characters 0 to 5) red  
    text.setSpan(new ForegroundColorSpan(Color.RED), 0, 5, 0); 

    // make "ipsum" (characters 6 to 11) one and a half time bigger than the textbox  
    text.setSpan(new RelativeSizeSpan(1.5f), 6, 11, 0);  

    // make "dolor" (characters 12 to 17) display a toast message when touched  
    final Context context = this;  
    ClickableSpan clickableSpan = new ClickableSpan() {  
        @Override  
        public void onClick(View view) {  
            Toast.makeText(context, "dolor", Toast.LENGTH_LONG).show();  
        }  
    };  
    text.setSpan(clickableSpan, 12, 17, 0);  

    // make "sit" (characters 18 to 21) struck through  
    text.setSpan(new StrikethroughSpan(), 18, 21, 0);  

    // make "amet" (characters 22 to 26) twice as big, green and a link to this site.  
    // it's important to set the color after the URLSpan or the standard  
    // link color will override it.  
    text.setSpan(new RelativeSizeSpan(2f), 22, 26, 0);  
    text.setSpan(new ForegroundColorSpan(Color.GREEN), 22, 26, 0);  

    // make our ClickableSpans and URLSpans work  
    richTextView.setMovementMethod(LinkMovementMethod.getInstance());  

    // shove our styled text into the TextView          
    richTextView.setText(text, BufferType.EDITABLE); 
```

我的问题是运行程序时文本不可选择（在模拟器和我自己的设备上都试过）。如果我点击除“dolor”之外的任何单词，则不会出现光标，但如果我输入，它会从“Lorem”之前开始输入。但是，如果我单击“dolor”，它会选择单词并且我可以替换它（但我不能在没有替换的情况下输入）。

我无法选择单词的任何其他部分，也无法将光标放在我想要的位置（它甚至不显示）。

我想知道如何获得像使用普通文本而不是 SpannableString 或 SpannableStringBuilder 时出现的那些普通文本选择功能？（我都试过了）如果我使用纯文本，我可以选择任何单词的任何部分并从那里开始输入文本。

**Edit1** 文本选择在横向模式下有效，但在纵向模式下无效。所以代码在某种程度上是有效的......

**Edit2** 实际上，文本选择在我的手机上以横向模式工作，但在模拟器上却不行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T15:48:48.593

刚刚想通了。有问题的代码是`richTextView.setMovementMethod(LinkMovementMethod.getInstance());`

所以我只是删除了它。它使链接无响应，但我真的不需要链接，所以没关系。

以这种方式使用，`setMovementMethod`由于某种原因完全阻止了触摸事件的选择（我必须深入研究源以找出确切原因）。

*自我注意：在完全理解之前不要添加代码。*

# sql - 使用 LINQ-SQL ASP.NET MVC 将记录插入表连接

> ID：12873662
> 
> 赞同：0
> 
> 时间：2012-10-13T13:41:26.423
> 
> 标签：sql, asp.net-mvc, linq

嗨，我知道如何使用 ASP.NET MVC 将数据插入 MsSQL DB。

我正在使用（DBML）实体和 SQL-LINQ

我有 3 个表，其中 2 个与第一个加入

桌子

**用户**

身份证、姓名、姓氏、电子邮件

**车**

id , id_User , 型号 , 年份

**工作**

id ， id_User ， 位置

我使用此代码将数据添加到 SQL

```
DataUserDataContext data = new DataUserDataContext(); 
User u = new User();
u.Name= "John";
u.Surname= "Lock";
u.email = "someemail@email.com" 
data.Users.InsertOnSubmit(u);
p.SubmitChanges(); 
```

现在我的问题是：

考虑到我也应该填写 Car 和 Work 表，如何插入新记录？

使用之前的代码并获取 ID（如果我没记错的话，有办法获取最后一个实体）

使用此 id 将记录插入 Car 和 Work Table

有没有办法在一个独特的步骤中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T14:07:22.810

不要考虑 ID，而是考虑对象...将此代码放在 SubmitChanges() 之前...

```
u.Car = new Car() { model = 'honda', year = 2000 };
u.Work = new Work () { location = 'new york' }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T14:39:25.807

首先，您也可以使用它来将数据插入到用户表中，如下所示

```
DataUserDataContext data = new DataUserDataContext(); 
User u = new User();
u.Name= "John";
u.Surname= "Lock";
u.email = "someemail@email.com" 
data.Users.AddObject(u)
data.SubmitChanges(); 
```

你可以像这样从你的用户表中获取最后插入的 id

```
var UserID=  (from con in dbdata.Users
     select con).Max(x => x.UserID); 
```

您可以使用从 users 表中获取最后插入的 id

```
data.Users.OrderByDescending(u => u.UserId).FirstOrDefault() 
```

你可以使用这个 id 从你的汽车和工作台插入记录，就像这样

用于汽车桌

```
DataUserDataContext data = new DataUserDataContext(); 
Car objcar = new Car()
objcar.id_User = UserID;
objcar.model="hondacity";
objcar.year="2012";
data.Cars.AddObject(objcar);
data.SubmitChanges(); 
```

用于工作台

```
DataUserDataContext data = new DataUserDataContext(); 
Work objwork=new Work();
objwork.id_User =UserID;
objwork.Location="US";
data.Works.AddObject(objwork);
data.SubmitChanges(); 
```

我想这会对你有所帮助

# iphone - 如何在 Interface Builder 中创建一个以 UITableViewController 为根的 UINavigationController？

> ID：12873663
> 
> 赞同：0
> 
> 时间：2012-10-13T13:41:38.813
> 
> 标签：iphone, ios, xcode, xcode4, interface-builder

1）在我的应用程序委托中，我创建了作为导航控制器的根视图控制器：

```
self.navigationController = [[UINavigationController alloc] initWithNibName:@"RootNavigationController" bundle:nil];
self.window.rootViewController = self.navigationController; 
```

2) “RootNavigationController.xib”创建一个`UINavigationController`. 它还定义了一个根视图控制器，它是一个`CatsViewController : UITableViewController`. 有一个 CatsViewController 文件和一个带有 UITableViewController 根对象的“CatsViewController.xib”。就像您在此屏幕截图中看到的那样，我相应地设置了 NIB 名称：

![在此处输入图像描述](../Images/f021d57a04c37ea815e9b7b1a90547f1.png)

问题是，即使有 CatsViewController.xib 文件，Xcode 也不允许我从下拉列表中选择 CatsViewController。我希望我的 UINavigationController 的 XIB 创建一个 CatsViewController 的实例作为它的根，我想通过一个单独的 nib 文件配置这个根控制器。

Xcode 警告：

![在此处输入图像描述](../Images/d8bc128ad2192c30dbb8bcb534bfc8a6.png)

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T17:40:40.613

您收到的错误是由于`didFinishLaunchingWithOptions`AppDelegate 中的方法尝试初始化窗口而不仅仅是返回 YES。

还在您的代码中更改 RootNavigationController，例如：

```
self.navigationController = [[UINavigationController alloc] initWithNibName:@"RootNavigationController" bundle:nil]; 
```

将其更改为

```
self.navigationController = [[UINavigationController alloc] initWithNibName:@"CatsViewController" bundle:nil]; 
```

# sql - ALTER TABLE 语法 - 缺少 DIRECTORY 关键字

> ID：12873667
> 
> 赞同：16
> 
> 时间：2012-10-13T13:41:54.553
> 
> 标签：sql, oracle

我正在尝试通过使用 SQL 查询向其中添加两个新列来更改 Oracle 数据库中的表，如下所示：

```
ALTER TABLE Members 
      ADD annual_dues NUMBER(5,2) not null DEFAULT '52.50', 
      ADD payment_date DATE; 
```

在执行它时，我收到如下错误：

> SQL 错误：ORA-30649：缺少 DIRECTORY 关键字

我玩过它，但没有帮助。SQL 查询有什么问题？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-10-13T14:18:15.293

我认为你需要`NOT NULL`把`DEFAULT 52.50`：

```
ALTER TABLE Members 
   ADD ( annual_dues NUMBER(5,2) DEFAULT 52.50 NOT NULL
       , payment_date DATE ); 
```

# java - org.apache.catalina.core.StandardContext startInternal SEVERE：错误 listenerStart

> ID：12873674
> 
> 赞同：6
> 
> 时间：2012-10-13T13:42:37.237
> 
> 标签：java, eclipse, tomcat

只是尝试部署 Web 服务 war 文件，但无法使用 apache tomcat 7 进行部署。我尝试了示例 war 文件，只需从浏览器 localhost:8080/sample 访问它就可以正常工作，以确保我的 tomcat 配置正确。只是在 webapps/ 下复制战争并部署它，但相同的消息：描述请求的资源不可用。我想知道 Web 服务应用程序是否显示了另一种部署方式？？？这是 catalina.log 文件的内容：

```
 4:28:25 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Error listenerStart
4:28:25 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [/APP] startup failed due to previous errors
Oct 12, 2012 4:28:25 PM org.apache.catalina.startup.HostConfig deployDirectory 
```

任何想法 ？？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-17T15:39:54.190

我有一个类似的问题。catalina.out 记录了此日志消息

2013 年 4 月 17 日下午 5:14:46 org.apache.catalina.core.StandardContext 开始严重：错误 listenerStart

该错误是在服务器启动时引发异常时引起的。

要找出导致错误的原因，您应该查看**localhost.log**（与 catalina.out 在同一目录中）而不是 catalina.out，您应该能够看到导致错误的异常

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T15:45:32.073

您可以通过在您的 WEB-INF/classes 文件夹中添加一个包含以下内容的 logging.properties 文件来检查错误：

> org.apache.catalina.core.ContainerBase.[Catalina].level = 信息 org.apache.catalina.core.ContainerBase.[Catalina].handlers = java.util.logging.ConsoleHandler

# ios - UIButton setEnabled 不起作用

> ID：12873676
> 
> 赞同：0
> 
> 时间：2012-10-13T13:42:52.903
> 
> 标签：ios, uibutton, ios6, uicontrol

在 viewDidLoad 中，我检查两个 UITextField 是否具有有效输入（文本长度 > 0），然后设置 UIButton 的启用属性。使用调试器我发现

```
self.loginButton.enabled = YES; 
```

被执行，但是当我打印布尔值时

```
print self.loginButton.enabled 
```

我之前得到 NO（这没关系），但在执行语句之后也得到 NO。我还多次检查了 self 的 UIButton 属性是否使用 IBOutlet 连接到我的故事板中的 UIButton，就是这种情况。我还可以使用控制台打印 titleLabel 的文本。当我点击其中一个 UITextFields 并更改文本时

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string 
```

正在被调用，我将在那里再次检查文本。这里

```
self.loginButton.enabled = YES; 
```

似乎工作正常。使用 iOS 5 我没有任何问题，但我在此问题的文档中没有发现 iOS 6 的任何相关更改。

有任何想法吗？

编辑：问题是不同的。我在那个 UIViewController 中也有一个 UITableView，并且 tableView 比预期的要大（然后在 Storyboard 中设置更大）（直到知道我不知道为什么）并且似乎覆盖了 UIButton。在执行之前更改 UIButton 或 UITableView 的框架

```
self.loginButton.enabled = YES; 
```

作品。设置启用属性时可能会有延迟，因为打印布尔值仍然返回 NO。

```
NSLog(@"%i",self.loginButton.isEnabled);
self.loginButton.enabled = YES;
NSLog(@"%i",self.loginButton.isEnabled);

2012-10-13 16:11:43.460 [1524:c07] 1
2012-10-13 16:11:43.462 [1524:c07] 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T13:57:23.097

你在做`self.loginButton.enabled = YES;`吗`initWithNibName:`？当您执行此操作时，可能`self.loginButton`不会从 xib 初始化，这可以解释为什么它在`shouldChangeCharactersInRange`. 尝试打印`self.loginButton`以查看是否是这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T14:31:40.140

问题是 UITableView 正在从情节提要中声明的初始大小调整大小，因为自动调整大小，然后它覆盖了 UIButton 区域。并且按钮点击被解释为与 UITableView 的交互。更改 UIButton 框架、UITableView 框架或自动调整大小设置可以解决问题。

# c# - 用 Visual C# 播放视频

> ID：12873677
> 
> 赞同：0
> 
> 时间：2012-10-13T13:43:02.863
> 
> 标签：c#, visual-studio-2008

> **可能重复：**
> [如何使用 C# 播放视频文件？](https://stackoverflow.com/questions/2127445/how-can-i-play-video-files-using-c)

我需要制作一个表单来使用 Visual C# 播放视频，并且视频将在表单中播放

它应该有一个“播放”按钮和“停止”按钮

这个表格的正确代码是什么？

非常感谢您的关心..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T13:50:07.273

您可以使用 DirectX 来执行此操作。
首先，您需要下载 DirectX SDK，您可以在此处找到[http://msdn.microsoft.com/directx/sdk/](http://msdn.microsoft.com/directx/sdk/)
在您的 c# 项目中，添加对 Microsoft.DirectX.AudioVideoPlayback 的引用
然后您可以使用以下内容播放电影的代码

```
//create the video
Microsoft.DirectX.AudioVideoPlayback.Video video = new Microsoft.DirectX.AudioVideoPlayback.Video(fileName);
//set the System.Windows.Forms.Control to play it in (e.g a panel)
video.Owner = panel1;
//Play the video (put this in a buttons click event)
video.Play();
//Pause the video (put this in a buttons click event)
video.Pause();
//Stop the video (put this in a buttons click event)
video.Stop(); 
```

完成后，不要忘记在视频对象上调用 Dispose()。

# bash - 在 Bash 中转义 HTML 的捷径？

> ID：12873682
> 
> 赞同：45
> 
> 时间：2012-10-13T13:43:35.410
> 
> 标签：bash, html-entities

盒子里没有 Ruby/Python/Perl 等。

只有`bash`,`sed`和`awk`。

一种方法是用地图替换字符，但它变得乏味。

也许一些我不知道的内置功能？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-10-13T13:49:01.500

转义 HTML 实际上只涉及替换三个字符：`<`、`>`和`&`. 对于加分，您还可以替换`"`和`'`。所以，这不是一个长`sed`脚本：

```
sed 's/&/\&amp;/g; s/</\&lt;/g; s/>/\&gt;/g; s/"/\&quot;/g; s/'"'"'/\&#39;/g' 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-01-27T14:36:43.707

您可以使用`recode`实用程序：

```
 echo 'He said: "Not sure that - 2<1"' | recode ascii..html 
```

输出：

```
 He said: &quot;Not sure that - 2&lt;1&quot; 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-09-29T16:45:21.403

纯 bash，没有外部程序：

```
function htmlEscape () {
    local s
    s=${1//&/&amp;}
    s=${s//</&lt;}
    s=${s//>/&gt;}
    s=${s//'"'/&quot;}
    printf -- %s "$s"
} 
```

只是简单的字符串替换。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-06-07T09:04:47.153

or use xmlstar [Escape/Unescape special XML characters](http://xmlstar.sourceforge.net/doc/UG/xmlstarlet-ug.html#idm47077139540960):

```
$ echo '<abc&def>'| xml esc
&lt;abc&amp;def&gt; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-20T05:42:54.703

I'm using [jq](https://stedolan.github.io/jq/manual/):

```
$ echo "2 < 4 is 'TRUE'" | jq -Rr @html
2 &lt; 4 is &apos;TRUE&apos; 
```

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2015-03-07T12:51:15.913

之前的 sed 替换会破坏有效输出，例如

```
&lt; 
```

进入

```
&amp;lt; 
```

添加负前瞻，因此“&”仅更改为“&” 如果那个“&”后面没有跟“amp;” 修复：

```
sed 's/&(?!amp;)/\&amp;/g; s/</\&lt;/g; s/>/\&gt;/g; s/"/\&quot;/g; s/'"'"'/\&#39;/g' 
```

# javascript - jquery selectbox css - 尝试更改字体颜色无法按预期工作

> ID：12873696
> 
> 赞同：0
> 
> 时间：2012-10-13T13:45:26.563
> 
> 标签：javascript, jquery, css

我正在尝试更改 jquery 选择框插件中下拉框中的文本颜色。

您可能会考虑更改以下颜色：.sbOptions a:link、.sbOptions a:visited {} 和/或 .sbOptions a:hover、.sbOptions a:focus、.sbOptions a.sbFocus {}

会成功的，但令人惊讶的是它没有，我不知道为什么。我不知道这可能与javascript有关

这是小提琴

[http://jsfiddle.net/FQKax/38/](http://jsfiddle.net/FQKax/38/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T13:57:55.750

对我有用我试过

```
.sbOptions a:link, .sbOptions a:visited{
    color: #777;
    text-decoration: none;
}
.sbOptions a:hover,
.sbOptions a:focus,
.sbOptions a.sbFocus{
    color: #ddd;
} 
```

**[更新小提琴](http://jsfiddle.net/FQKax/43/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T13:53:13.727

试试这个

[http://jsfiddle.net/FQKax/39/](http://jsfiddle.net/FQKax/39/)

你可以`$(".sbSelector").css('color','Red');`用来改变颜色。

你也可以试试`$(".sbSelector").css('backgroundColor','#ee55ee');`

[http://jsfiddle.net/FQKax/44/](http://jsfiddle.net/FQKax/44/)

# ajax - Disqus 等服务如何克服 SOP？

> ID：12873700
> 
> 赞同：1
> 
> 时间：2012-10-13T13:45:44.773
> 
> 标签：ajax, same-origin-policy

对于像 Diqus 这样的外部 API 如何仅通过客户端代码克服相同的来源限制，我有点困惑。他们如何做到这一点？

谢谢

# adobe - Adobe Connect 中的报告批量对象

> ID：12873703
> 
> 赞同：0
> 
> 时间：2012-10-13T13:46:12.560
> 
> 标签：adobe, adobe-connect

我想获得服务器上的会议列表，但是当我执行[https://example.com/api/xml?action=report-bulk-objects&filter-type=meeting](https://example.com/api/xml?action=report-bulk-objects&filter-type=meeting)用我的连接域替换域时，我得到一个拒绝访问响应。我已登录到连接工作空间，并且我在管理员组中。这可能是什么原因？

回复：

```
<results>
    <status code="no-access" subcode="denied"/>
</results> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T01:58:13.813

如果您在管理员组中，登录并从登录的同一浏览器提交请求，这应该可以工作。您可以尝试将会话参数添加到您的请求（“&session= *breez123abc456def* ”）

该参数的值必须是连接服务器在您的已验证会话上设置的 BREEZESESSION cookie 的值。发现它的几种方法之一是使用 common-info API 方法：[https://connect.example.com/api/xml?action=common-info](https://connect.example.com/api/xml?action=common-info)它将位于 /results/common/cookie 元素中。

如果这仍然不起作用，请检查服务器上的 debug.log 以了解失败的请求；那里应该有额外的信息。

# android - GestureDetector 已弃用的问题

> ID：12873708
> 
> 赞同：31
> 
> 时间：2012-10-13T13:47:01.157
> 
> 标签：android, android-mapview, deprecated, android-maps

我有这个代码

```
itemizedOverlay = new MyItemizedOverlay(drawable,this);
itemizedOverlay.setGestureDetector(new GestureDetector(new MyGestureDetecor())); 
```

但在 Eclipse`new GestureDetector`中标记为*已弃用。*

我想避免使用不推荐使用的方法。

我该如何解决这个问题？

什么是非弃用形式？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-10-13T13:52:23.210

选择其他构造函数之一。上有[五个已定义的构造函数`GestureDetector`](http://developer.android.com/reference/android/view/GestureDetector.html)。两个——不包括 a`Context`作为第一个参数的——被标记为已弃用。您正在使用其中之一。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-10-13T13:54:31.023

只有两个已弃用的构造函数。如果您将上下文添加到[GestureDetector(context, listener)](http://developer.android.com/reference/android/view/GestureDetector.html#GestureDetector%28android.content.Context,%20android.view.GestureDetector.OnGestureListener%29)它不会被弃用。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2018-03-03T20:53:17.313

1尝试将上下文添加到您的方法中：`

itemizedOverlay = new MyItemizedOverlay(drawable,this); itemizedOverlay.setGestureDetector（上下文上下文新 GestureDetector（新 MyGestureDetecor（）））；`

2 如果您已经在方法中调用了类 Context，请尝试：

`itemizedOverlay = new MyItemizedOverlay(drawable,this); itemizedOverlay.setGestureDetector(new GestureDetector(context new MyGestureDetecor()));`

# javascript - jQuery标签云鼠标悬停停止它的移动

> ID：12873709
> 
> 赞同：0
> 
> 时间：2012-10-13T13:47:02.540
> 
> 标签：javascript, jquery

我有以下 jQuery 标签云效果的代码。当我加载页面时，它的菜单正在移动，但是当我将鼠标悬停在菜单上时，它也在移动。

当我将鼠标悬停在它上面时，如何停止它的移动？

**jQuery代码：**

```
$.fn.jcloud=function(settings)
{
jCloud={
    tags: new Array(),
    container_id: 'jcloud',
    radius: 100,
    size: 20,
    areal: 180,
    iterX: 0,
    iterY: 0,
    iterx: 1,
    itery: 1,
    step: 4,
    flats: 1,
    speed: 100,
    start_speed: 1,
    timer: 0,
    clock: 10,
    stop: true,
    splitX: 0,
    splitY: 0,
    colors: new Array(),
    init: function (elem,settings) {
        $(elem).css('display','none');

        var i=0;
        $(elem).find('li').each(function(){
            jCloud.tags[i]=$(this).html();
            i++;
        });

        if (typeof(settings) != 'undefined')
        {
            try {
                if (typeof(settings.container_id) != 'undefined')
                {
                    this.container_id=settings.container_id;
                }
                if (typeof(settings.radius) != 'undefined')
                {
                    this.radius=settings.radius;
                }
                if (typeof(settings.size) != 'undefined')
                {
                    this.size=settings.size;
                }
                if (typeof(settings.areal) != 'undefined')
                {
                    this.areal=settings.areal;
                }
                if (typeof(settings.step) != 'undefined')
                {
                    this.step=settings.step;
                }
                if (typeof(settings.flats) != 'undefined')
                {
                    this.flats=settings.flats;
                }
                if (typeof(settings.speed) != 'undefined')
                {
                    if (settings.speed < 1)
                    {
                        settings.speed=1;
                    }

                    this.speed=settings.speed;
                }
                if (typeof(settings.clock) != 'undefined')
                {
                    this.clock=settings.clock;
                }
                if (typeof(settings.splitX) != 'undefined')
                {
                    if (Math.abs(settings.splitX) < 2*this.radius)
                    {
                        this.splitX=settings.splitX;
                    }
                }
                if (typeof(settings.splitY) != 'undefined')
                {
                    if (Math.abs(settings.splitY) < 2*this.radius)
                    {
                        this.splitY=settings.splitY;
                    }
                }
                if (typeof(settings.colors) != 'undefined' && settings.colors 
instanceof Array)
                {
                    this.colors=settings.colors;
                }
            } catch (e) {}
        }

        $(elem).replaceWith('<div id="'+this.container_id+'"></div>');

        $('#'+this.container_id).css({
                    'position':'relative',
                    'width':this.radius*2,
                    'height':this.radius*2,
                    'overflow':'hidden',
                    'padding': '0px'
                    });

        $('#'+this.container_id).mousemove(function(e){
            var centerX=$(this).offset().left+jCloud.radius;
            var centerY=$(this).offset().top+jCloud.radius;

            jCloud.speed=jCloud.start_speed;
            jCloud.iterx=(centerX-e.pageX)/jCloud.radius;
            jCloud.itery=(centerY-e.pageY)/jCloud.radius;
        });

        $('#'+this.container_id).mouseover(function()
        {
            jCloud.stop=true, 0, 'rotate';
        });

        $('#'+this.container_id).mouseout(function()
        {
            jCloud.stop=false;
        });

        $('body').append('<div id="jcloud-buffer"></div>');
        $('#jcloud-buffer').css({
                    'display': 'none',
                    'padding': '0px',
                    'white-space': 'nowrap'
                });
    },
    render: function() {
        $('#'+this.container_id).empty();

        this.start_speed=this.speed;

        for (var j in this.tags)
        {
            this.draw(j);
        }

        this.cloud();
    },
    draw: function(id) {
        $('#jcloud-buffer').html('<div class="jtag" id="jtag-
'+id+'">'+this.tags[id]+'</div>');

        var taghtml=$('#jcloud-buffer').html();
        var width=$('#jcloud-buffer').width();
        var height=$('#jcloud-buffer').height();

        $('#'+this.container_id).append(taghtml);

        $('#jtag-'+id).attr('width',width);
        $('#jtag-'+id).attr('height',height);
    },
    cloud: function(iter,flat_iter,update) {
        var count=this.tags.length;
        var per_flat=Math.ceil(count/this.flats);
        var delta=Math.round(360/per_flat);
        var deg=0;
        var flat_deg=0;

        if (typeof(iter) != 'undefined')
        {
            deg=Math.floor(iter);
        }

        if (typeof(flat_iter) != 'undefined')
        {
            flat_deg=Math.floor(flat_iter);
        }

        var flat_offset=Math.floor(this.areal/(this.flats+1))/2+flat_deg;
        var flat_delta=Math.floor(this.areal/this.flats);

        var flat_co=0;
        for (var j in this.tags)
        {
            this.pos(deg,j,parseInt($('#jtag-'+j).attr('width')),parseInt($('#jtag-   
'+j).attr('height')),flat_offset,update);
            deg+=delta;

            flat_co++;

            if (flat_co>=per_flat)
            {
                flat_offset+=flat_delta;
                flat_co=0;
                deg+=flat_delta;
            }
        }
    },
    pos: function(degree,id,width,height,offset,update) {
        var radian=degree*Math.PI/180;
        var ell_offset=offset*Math.PI/180;
        var size_offset=0;

        var size=this.size+size_offset;

        var X=this.radius+Math.sin(radian)*this.radius*Math.cos(ell_offset)-width/2;
        var Y=this.radius-Math.cos(radian)*this.radius-height/2;

        size=(1+Math.cos(radian-1.57)*Math.sin(ell_offset))*size/2;

        if (size < 1)
        {
            size=1;
        }

        if (typeof(update) == 'undefined' || update==false)
        { 
            if (this.colors.length > 0)
            {
                for (var i in this.colors)
                {
                    if ((parseInt(id)+1) % (this.colors.length-i) == 0)
                    {
                        //$('#jtag-'+id).css('color',this.colors[this.colors.length-
i-1]);
                        //$('#jtag-
'+id).children('a').css('color',this.colors[this.colors.length-i-1]);

                        $('#jtag-
'+id).attr('style','color:'+this.colors[this.colors.length-i-1]+' !important');
                        $('#jtag-
'+id).children('a').attr('style','color:'+this.colors[this.colors.length-i-1]+' 
!important');
                        break;
                    }
                }
            }

            $('#jtag-'+id).css({
                'position':'absolute',
                'white-space': 'nowrap',
                'font-weight': 'normal'
            });
        }

        var opacity=1;
        opacity=(1+Math.cos(radian-1.57)*Math.sin(ell_offset))*opacity/2;

        if (opacity<.5)
        {
            opacity=.5;
        }

        if (this.splitX)
        {
            var offsetX=parseInt(this.splitX);
            if (id%2==0)
            {
                X-=offsetX;
            } else
            {
                X+=offsetX;
            }
        } 

        if (this.splitY)
        {
            var offsetY=parseInt(this.splitY);
            if (id%2==0)
            {
                Y-=offsetY;
            } else
            {
                Y+=offsetY;
            }
        } 

        $('#jtag-'+id).css({
                'left':Math.round(X),
                'top':Math.round(Y),
                'font-size':Math.floor(size)+'px',
                'opacity': opacity
            });

    },
    update: function() {
        this.timer++;

        var interval=Math.floor(.1/jCloud.speed);

        if (this.timer < interval)
        {
            return;
        }

        if (this.stop)
        {
            this.speed=this.speed-(this.speed*.1);
        }

        this.timer=1;

        if (this.iterX >= 360)
        {
            this.iterX=360-this.iterX;
        }

        if (this.iterY >= 360)
        {
            this.iterY=360-this.iterY;
        }

        this.iterX+=this.iterx;
        this.iterY+=this.itery;

        this.cloud(this.iterY,this.iterX,true);
    }
}

jCloud.init($(this),settings);

jCloud.render();

jCloudInterval=window.setInterval("jCloud.update()",jCloud.clock);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T13:56:00.257

在您的 JS 文件中`http://www.shibbir.byethost7.com/jcloud.js`：

```
$('#'+this.container_id).mouseover(function()
{
    jCloud.stop=false;
}); 
```

将其更改为：

```
$('#'+this.container_id).mouseover(function()
{
    jCloud.stop=true;
}); 
```

# c# - 检查 C# 中的任何条件编译符号

> ID：12873715
> 
> 赞同：3
> 
> 时间：2012-10-13T13:47:45.920
> 
> 标签：c#, compilation, conditional-statements

在 C# 中是否可以检查是否存在任何条件编译符号，而不仅仅是一个？

例如，

```
#if ANY_CONDITIONAL_COMPILATION_SYMBOL_IS_DEFINED
    MessageBox.Show( "Don't forget to remove the cc symbols before shipping.");
#else
    ... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T14:14:11.687

您可以使用`||`运算符：

```
#if (DEBUG || SOME_OTHER)
    MessageBox.Show(...)
#endif 
```

有关此预处理器符号的更多信息，请访问[MSDN](http://msdn.microsoft.com/en-us/library/4y6tbswk%28v=vs.71%29.aspx)。

> 您只能使用运算符 ==（相等）、!=（不等）来测试 true 或 false 。True 表示已定义符号。该语句 `#if DEBUG`的含义与 相同`#if (DEBUG == true)`。您可以使用运算符 && (and), || （或），和！(not) 评估是否已定义多个符号。您还可以使用括号对符号和运算符进行分组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T16:04:45.657

如果我正确理解了您的问题，那么您要确保交付给客户端的最终构建应该在没有任何条件编译参数的情况下构建。

条件编译参数被指定为切换到`csc`（C# 编译器）。构建团队可以维护一个清单（基本上是单独的配置），以便在构建解决方案时，不会使用条件编译参数来构建解决方案/项目。可以有一个单独的构建配置，用于内部测试。

我认为 C# 中没有一种方法可以枚举为项目定义的条件编译参数，因为 CC 参数基本上用于编译项目。一旦项目建成，它们就没有任何意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T13:50:44.147

你可以嵌套它们：

```
#if DEBUG
#if FOOBAR
    MessageBox.Show( "Don't forget to remove the cc symbols before shipping.");
#endif
#endif 
```

这需要同时设置 DEBUG 和 FOOBAR 才能显示消息。

没有办法检查*任何*符号，但您可以对您使用的所有符号执行此操作。

# c++ - 哪个代码更优化？

> ID：12873719
> 
> 赞同：-4
> 
> 时间：2012-10-13T13:48:09.567
> 
> 标签：c++, performance

```
// (1)
for (int iter = 1; iter <= VERTEX_SIZE; iter ++) {
    if (visit[iter]) continue;
    dfs(iter);
}

// (2)
for (int iter = 1; iter <= VERTEX_SIZE; iter ++) {
    if (!visit[iter]) {
        dfs(iter);
    }
} 
```

哪个代码更优化？我只是对此感到好奇。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T13:50:46.070

对于任何甚至是半体面的编译器，这根本不会产生影响。生成的机器代码将*完全相同*。如果您仍然想确定，请对其进行基准测试。

选择你认为最*易读*的那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T14:34:39.597

没有区别。选择你认为最好的那个。你用第一种方式编译的每一个程序，肯定也可以用第二种方式编译，而且运行时间是一样的。

**注意：**我会使用第二种方式；我认为它更具可读性，并且我见过的大多数 DFS 实现（在 C++ 和 pheudocode 中）都使用它。

# java - 如何使用实体外观按钮动画？

> ID：12873721
> 
> 赞同：1
> 
> 时间：2012-10-13T13:48:23.407
> 
> 标签：java, swing, look-and-feel, substance

我已经在我的 java 程序中安装了实质的外观和感觉，它可以工作。

但是我从 GitHub 下载了外观的测试文件，我看到他们在选择按钮和复选框时有自定义动画。

我很好奇如何在我的程序中为组件应用自定义动画。

# jquery - 我希望图像以特定的时间间隔自动淡入淡出，而不是单击

> ID：12873725
> 
> 赞同：1
> 
> 时间：2012-10-13T13:49:03.300
> 
> 标签：jquery, html, css

我在这里发布我的代码，我已经在点击功能上制作了图像 fadIn-fadeOut，但我希望它们以特定的时间间隔自动淡入淡出。那么我该如何实现呢，请帮帮我。

[http://jsfiddle.net/8jigarpatel/P4ANC/](http://jsfiddle.net/8jigarpatel/P4ANC/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T14:02:23.390

我前一阵子做过的事情。使用 2 个图像容器（以便您可以从一个图像淡入到另一个图像）：

```
var img2 = true;
var imgChangeDelay = 5;
var currentImg = 2;
var images = [
    'mainImg.jpg',
    'mainImg_6.jpg',
    'mainImg_2.jpg',
    'mainImg_3.jpg',
    'mainImg_7.jpg',
    'mainImg_8.jpg'
];

function switchImages() {
    if(img2) {
        img2 = false;
        $(".rightMainImage").css('background', 'url("/img/mainPhotos/'+images[currentImg]+'") no-repeat');
        $(".rightMainImage2").animate({opacity: 0}, 1000, function() {
            setTimeout("switchImages();", (imgChangeDelay*1000));
        });
    } else {
        img2 = true;
        $(".rightMainImage2").css('background', 'url("/img/mainPhotos/'+images[currentImg]+'") no-repeat');
        $(".rightMainImage2").animate({opacity: 1}, 1000, function() {
            setTimeout("switchImages();", (imgChangeDelay*1000));
        });
    }
    if(currentImg == (images.length - 1)) {
        currentImg = 0;
    } else {
        currentImg++;
    }
} 
```

在 HTML 中：

```
<div class="rightMainImage">
    <div class="rightMainImage2"></div>
</div> 
```

图像容器的样式：

```
.rightMainImage, .rightMainImage2 {
    width: 569px;
    float: right;
    height: 335px;
    background: url("/img/mainPhotos/mainImg.jpg") no-repeat;
    position: absolute;
    top: 0;
    left: 0;
} 
```

并且不要忘记将其添加到页面启动：

```
$(document).ready(function() {
    setTimeout("switchImages();", (imgChangeDelay*1000));
}); 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T13:53:49.493

使用此代码：

```
setTimeout(function(){
    fO();
}, 1000); 
```

### 小提琴：http: [//jsfiddle.net/P4ANC/5/](http://jsfiddle.net/P4ANC/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T15:07:50.360

在 JQuery 中，您可以使用动画链接和[.delay()](http://api.jquery.com/delay/)函数在fadeOut 和fadeIn 之间创建特定时间量的延迟。

一个简单的例子，延迟 1 秒，淡出一个 div，延迟 1 秒，然后再次淡入：

**Javascript：**

```
$('#myDiv').delay(1000).fadeOut(300).delay(1000).fadeIn(300); 
```

**HTML：**

```
<div id="myDiv" style="background-color: red; width:200px; height:200px;"></div> 
```

**Javascript V2：**

或者更高级一点，如果我们想在再次淡入之前将 div 的背景颜色更改为黄色。（这与您的情况类似，您想在图像元素再次淡入之前更改图片）

```
$('#myDiv').delay(1000).fadeOut(300, function() {
    $(this).css("background-color","yellow"); // set background to yellow before fading in
}).delay(1000).fadeIn(300); 
```

**Javascript V3：**

最后，还有一种制作动画循环的方法如下：

```
function start() {
    $('#myDiv').delay(1000)
               .fadeOut(300, function() {$(this).css("background-color","yellow");})
               .delay(1000)
               .fadeIn(300, start);
}
start(); 
```

我创建了一个名为 start 的函数，当动画停止时调用它以重新启动它。（当然它也被称为第一次启动它）

.
**你的例子：**

从您在 jsfiddle 上发布的代码中，类似这样的东西会起作用：（对不起，内联 javascript）

```
<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function(){

                var imgsrc = ["images/c1.png", "images/c2.png", "images/c3.png", "images/c4.png", "images/c5.png"];
                var imgnum = 0;

                function start() {
                    $('#cfifoimg').delay(1000).fadeOut(300, function() {
                        imgnum++;
                        if(imgnum>4) {imgnum=0;}
                        $(this).attr("src",imgsrc[imgnum]);
                    }).delay(1000).fadeIn(300, start);
                }
                start();

            });
        </script>
    </head>
    <body>
        <div id="cfifo">
            <img id="cfifoimg" src="images/c1.png"/>
        </div>
    </body>
</html> 
```

**重要提示：**并非所有 JQuery 函数都可以像这样链接 - 请参阅[http://api.jquery.com/delay/](http://api.jquery.com/delay/)了解更多信息

# wpf - WPF 动画插入 ItemsControl

> ID：12873729
> 
> 赞同：1
> 
> 时间：2012-10-13T13:49:38.853
> 
> 标签：wpf, xaml

之前我询问了项目控件插入的淡入、向下滚动动画（[Animate Insertions to ItemsControl](https://stackoverflow.com/questions/12654417/animate-insertions-to-itemscontrol)）。我让淡入工作，但我仍然对项目控制插入动画感到困惑。下面是一些“有点”有效的东西。

```
<Grid>
    <ScrollViewer>
        <ItemsControl Name="TimelineItems"
                      ItemsSource="{Binding Timeline}"
                      Style="{StaticResource TimelineStyle}"
                      ItemContainerStyle="{StaticResource TweetItemStyle}">
            <ItemsControl.RenderTransform>
                <TransformGroup>
                    <TranslateTransform />
                </TransformGroup>
            </ItemsControl.RenderTransform>
            <ItemsControl.Triggers>
                <EventTrigger RoutedEvent="FrameworkElement.SizeChanged">
                    <BeginStoryboard>
                        <Storyboard>
                            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="TimelineItems"
                                                           Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(TranslateTransform.Y)">
                                <EasingDoubleKeyFrame KeyTime="0"
                                                      Value="-50" />
                                <EasingDoubleKeyFrame KeyTime="0:0:0.5"
                                                      Value="0" />
                            </DoubleAnimationUsingKeyFrames>
                        </Storyboard>
                    </BeginStoryboard>
                </EventTrigger>
            </ItemsControl.Triggers>
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <Grid Name="MyGrid"
                          Background="{Binding TweetType, Converter={StaticResource tweetTypeConverter}}"
                          VerticalAlignment="Top"
                          HorizontalAlignment="Left">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Style="{StaticResource TweetImageColumnStyle}" />
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition />
                            <RowDefinition />
                            <RowDefinition />
                            <RowDefinition />
                        </Grid.RowDefinitions>
                        <Rectangle Grid.Column="0"
                                   Style="{StaticResource TweetImageStyle}">
                            <Rectangle.Fill>
                                <ImageBrush ImageSource="{Binding ProfileImageUrl}" />
                            </Rectangle.Fill>
                        </Rectangle>
                        <StackPanel Grid.Column="1">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0"
                                           Style="{StaticResource TweetNameStyle}"
                                           Text="{Binding Name}" />
                                <TextBlock Grid.Column="1"
                                           Style="{StaticResource TweetTimeStyle}"
                                           Text="{Binding TimeAgo}" />
                            </Grid>
                            <Controls:TextBlockMarkup Grid.Row="1"
                                                      Grid.Column="1"
                                                      Markup="{Binding MarkupText}"
                                                      Style="{StaticResource TweetStyle}" />
                        </StackPanel>
                        <Separator Grid.Row="2"
                                   Grid.ColumnSpan="2"
                                   Style="{StaticResource TweetSeparatorTop}" />
                        <Separator Grid.Row="3"
                                   Grid.ColumnSpan="2"
                                   Style="{StaticResource TweetSeparatorBottom}" />
                    </Grid>

                    <DataTemplate.Resources>
                        <Storyboard x:Key="ItemAnimation"
                                    AutoReverse="False">
                            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="MyGrid"
                                                           Storyboard.TargetProperty="(UIElement.Opacity)">
                                <EasingDoubleKeyFrame KeyTime="0"
                                                      Value="0" />
                                <EasingDoubleKeyFrame KeyTime="0:0:0.8"
                                                      Value="1" />
                            </DoubleAnimationUsingKeyFrames>
                        </Storyboard>
                    </DataTemplate.Resources>

                    <DataTemplate.Triggers>
                        <EventTrigger RoutedEvent="FrameworkElement.Loaded">
                            <BeginStoryboard Storyboard="{StaticResource ItemAnimation}" />
                        </EventTrigger>
                    </DataTemplate.Triggers>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </ScrollViewer>
</Grid> 
```

我说“有点”是因为列表被负偏移量偏移，然后动画到位。“定位动画”看起来很棒，但“跳转”到负偏移会破坏效果。

在 CSS 中，我会简单地为插入项的高度设置动画，但我还没有弄清楚如何在 WPF 中做到这一点。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T14:09:40.740

所以，我不知道所有细节，但我认为通常的方式（我是菜鸟，哈哈）是：

1.  将 FluidMove 行为添加到您的视觉集合
2.  插入具有较低宽度和高度的新对象，例如 1x1
3.  通过情节提要或手动 DoubleAnimation 将其设置为实际大小

# dynamic-programming - 总结一个玩家在两人游戏中可以拥有的所有可能值

> ID：12873730
> 
> 赞同：0
> 
> 时间：2012-10-13T13:49:45.670
> 
> 标签：dynamic-programming, memoization, expectations

这是一个经典游戏，两个玩家玩以下游戏：

一排有 n 种不同面额的硬币。在这个游戏中，玩家从极左或极右挑选硬币（他们盲目地从概率为 0.5 的任何极端中挑选，他们都是哑巴）。我只想计算开始游戏的玩家的预期总和。

为此，我想总结一下玩家可以拥有的所有可能的价值组合。我正在使用一个递归解决方案，它总结了所有可能的结果值，但它有重叠的子问题。我想让它变得高效，并想记住这些重叠的子问题。

我无法收集执行它的逻辑。请有人帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T18:12:20.257

想法是为每一行子间隔存储两个玩家的总和。

让`F(start, end)`表示第一个玩家在 interval 玩的可能总和`[start, end]`。类似的定义`S(start, end)`。我们可以用字典存储可能的总和，比如`{2: 0.25, 5: 0.25, 6: 0.5}`.

比递归成立：

```
F(start, end) = {row[end]  +sum: p/2,  for sum,p in S(start, end-1)} +
                {row[start]+sum: p/2,  for sum,p in S(start+1, end)}
S(start, end) = {sum: p/2, for sum,p in F(start, end-1)} +
                {sum: p/2, for sum,p in F(start+1, end)}
F(start, end) = {row[start]: 1} if start == end
S(start, end) = {} if start == end 
```

这可以通过增加间隔长度来计算：

```
for length = 0 to row_length-1:
  for start = 1 to row_length - length:
    calculate `F(start, start+length)` and `S(start, start+length)` 
```

字典`F(1, row_length)`和`S(1, row_length)`用于计算预期总和。

# iphone - 当 UIScrollView 中的标签文本发生更改时，UIScrollView 停止工作

> ID：12873731
> 
> 赞同：2
> 
> 时间：2012-10-13T13:49:54.400
> 
> 标签：iphone, objective-c, xcode, uiscrollview

这个问题困扰我很久了，希望stackoverflow能帮到你！

问题是

当我在 EnterNameText (UI TEXTFIELD) 中输入“Alan Shearer”时，标签会更改文本，但是 ScrollView 不再滚动到设置的内容大小，它会滚动一点，但没有接近设置的内容大小，在这种情况下高度为 2000 像素。

细节

1) Xcode 4.5.1

2) IOS 6

在我的 .xib 文件（ tinypic.com/view.php?pic=2h4yx3o&s=6 ）中，我有一个 UIScrollView（宽度为 320 像素，高度为 490 像素） UIScrollView 包含所有连接到视图 controller.h 的标签。

标签（所有标签都以相同的方式设置）：

```
 @property (strong, nonatomic) IBOutlet UILabel *AlanShearerLabel; 
```

我在 ViewController.h 中的 UIScrollView 看起来像这样：

```
 @property (strong, nonatomic) IBOutlet UIScrollView *scrollview; 
```

ViewController.m 中的 UIScrollView

```
 - (void)viewDidAppear:(BOOL)animated{[super viewDidAppear:animated]; self.scrollview.contentSize=CGSizeMake(320.0, 2000.0);  } 
```

一个名为 - (IBAction)CheckButton:(id)sender 的 IBAction

单击 CheckButton 时的操作：

```
//string 0

NSString *string0 = _EnterNameText.text;

//Alan Shearer

NSString *string1 =@"Alan Shearer";
NSString *string2 =@"Rank 1) Alan Shearer 260 Goals";
NSString *stringshearer =@"Shearer";

//Alan Shearer IF

if([string0 isEqualToString:string1]||
   [string0 isEqualToString:stringshearer])
{_AlanShearerLabel.text = string2;
    _AlanShearerLabel.textColor = [UIColor greenColor];
    _EnterNameText.text=@"";

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T17:14:03.853

要解决此问题，您必须确保在将滚动视图链接到 .h 文件之前定义滚动视图中的所有内容。例如，如果您在滚动视图中有 20 个标签，请确保这 20 个标签已连接到 .h 文件，设置正确的大小，放置在正确的位置。只有这样，您才能将滚动视图连接到 .h 文件并将滚动视图代码放在 viewDidAppear 而不是 viewdidload 中。

# visual-studio-2010 - 我是否需要花费 99 美元的开发者帐户来为我自己的 Windows Phone 开发应用程序？

> ID：12873734
> 
> 赞同：2
> 
> 时间：2012-10-13T13:50:15.233
> 
> 标签：visual-studio-2010, windows-phone-7.1, windows-phone

这不是关于编程的问题，但我希望我能得到答案。

**我是否需要花费 99 美元的开发者帐户来为我自己的 Windows Phone 开发应用程序？**

我已经知道手机已锁定，我只能从 Marketplace 安装应用程序。

有什么解决方法吗？我不想出售我的应用程序，我只需要（为我自己的**诺基亚 Lumia 800**）编写一些带有可编辑播放列表的音乐播放器，因为 OEM 播放器对我来说完全没用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T06:55:41.940

为了测试您手机上的任何应用程序，您需要通过在开发者帐户下注册来解锁它。如果您有`student`Dreamspark 帐户，则无需支付 99 美元。如果您没有它并且仍然想要解锁它，请在您拥有 Dev aaccount 的开发者朋友之一下注册它。

# ruby - 当它依赖于 bundler 来查找其依赖项时，如何使用二进制文件制作 gem？

> ID：12873735
> 
> 赞同：0
> 
> 时间：2012-10-13T13:50:21.153
> 
> 标签：ruby, rubygems, gem, bundler

我有一个 gem，它依赖于 Bundler 的 Gemfile 来查找它的依赖项（它们托管在 github:enterprise 上）。我希望它可用作库并提供二进制文件。

目前，如果我从自己的目录运行它，它可以作为二进制文件正常工作，二进制文件可以在其中加载捆绑的 gem。但是，如果我从不同的目录运行它，它将找不到依赖项（它们在自己的 rvm gemset 中）。我无法将它作为 gem 安装，因为 Rubygems 找不到依赖项（目前它们列在 .gemspec 中，然后告诉在 Gemfile 中的位置）。

我目前正在尝试`bundle package`，它将所有 gem 放在 vendor/cache 目录中。据我所知，这意味着我需要从 .gemspec 中删除依赖项，而是将依赖项删除到 Gemfile 中（因为 Rubygems 不应该安装它们，因为它们是供应商的）。这意味着使用此 gem 的任何代码都需要了解这些依赖项，并将它们添加到它们的 Gemspecs 中，但我同意。我认为如果我在构建时修改 .gemspec 以包含供应商的 gem，并且如果我可以管理加载路径以便二进制文件将供应商的 gem 设置在加载路径的前面，那么这可能会起作用，但是任何使用它的代码库不会将这些添加到加载路径中，因此它们将获得已安装的任何版本。

不幸的是，我不知道该怎么做（没有阅读所有的 gemspecs，反思他们`require_paths`将它们添加到 中`$LOAD_PATH`），我不确定这是处理这种情况的正确方法。

那么，当它需要 Bundler 来查找它的 gem 时，我如何制作一个可以用作 lib 或仅用于其二进制文件的 gem？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T14:45:48.120

如果您在自己的 github 企业实例中托管代码，那么拥有一个自定义 ruby​​gems 服务器可能是个好主意。然后，您可以将内部 gem 发布到该服务器，并让 bundler 从那里检索它们。

这应该是一个透明的工作流程，就像您在现实世界中运行您的二进制文件一样！

# ios - iOS App Store 促销代码是否可供多人使用，还是每个代码只能使用一个？

> ID：12873736
> 
> 赞同：0
> 
> 时间：2012-10-13T13:50:25.073
> 
> 标签：ios, app-store, promotion-code

是否可以生成一个可以被多个用户多次使用的促销代码，或者代码和特定用户之间是否存在一对一的映射？

我想做的是公开发布任何人都可以使用的单一代码。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T14:25:33.940

促销代码仅供使用一次。使用它的人正在购买您的应用程序，但没有向 Apple 支付任何费用。如果您愿意，您可以在有限的时间内将您的应用程序的价格降低为免费。

# sql - 如何克服sql查询中IN原因的限制

> ID：12873737
> 
> 赞同：2
> 
> 时间：2012-10-13T13:50:41.650
> 
> 标签：sql, sql-server, oracle

我写了一个 sql 查询，如：

```
select field1, field2 from table_name; 
```

问题是此查询将返回 100 万条记录/或超过 100k 条记录。我有一个目录，其中有包含 field1 的输入文件（大约 20,000 到 50,000 条记录）。这是我关心的主要数据。使用 perl 脚本，我从目录中提取。但是，如果我编写如下查询：

```
select field1 , field2 from table_name 
where field1 in (need to write a query to take field1 from directory); 
```

如果我使用 IN 原因，那么它有处理 1000 个条目的限制，那么我应该如何克服 IN 原因的限制？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T13:55:00.933

在任何 DBMS 中，我都会将它们插入到一个临时表中并执行一个`JOIN`来解决 IN 子句对列表大小的限制。

例如

```
CREATE TABLE #idList
(
    ID INT
)
INSERT INTO #idList VALUES(1)
INSERT INTO #idList VALUES(2)
INSERT INTO #idList VALUES(3)

SELECT * 
FROM 
    MyTable m 
    JOIN #idList AS t 
    ON m.id = t.id 
```

在 SQL Server 2005 中，在我们之前的一个项目中，我们曾经将这个作为查询另一个数据存储（lucene 索引）结果的值列表转换为 XML，并将其作为 XML 变量在 SQL 查询中传递，并将其转换为表使用`nodes()`XML 数据类型上的函数并使用该函数执行`JOIN`。

```
DECLARE @IdList XML
SELECT @idList = '
<Requests>
    <Request id="1" />
    <Request id="2" />
    <Request id="3" />
</Requests>'

SELECT * 
FROM 
    MyTable m 
    JOIN (
            SELECT id.value('(@id)[1]', 'INT') as 'id' 
            FROM @idList.nodes('/Requests/Request') as T(id)
         ) AS t 
    ON m.id = t.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T14:17:50.763

Vikdor 是对的，您不应该使用`IN()`子句来查询它，使用表来`JOIN`.

扩展他的答案，我会推荐以下方法：

1.  通过 Perl 获取所有输入文件的列表
2.  想一些聪明的方法来计算你的列表的哈希值，它是唯一的并且基于所有输入文件（我推荐文件名或类似文件）
3.  此哈希将用作存储输入文件名的表的名称（将其视为一个准临时表，一旦哈希更改就会被丢弃）
4.  `JOIN`该表返回正确的记录

对于第 2 步，您可以在实际需要查询时使用 cronjob 或计算（但这会延迟响应）。要做到这一点，您需要考虑添加/删除文件的可能性。

对于第 3 步，您需要一些逻辑，一旦当前哈希值与上次执行不同，就删除先前生成的表，然后重新创建以当前哈希命名的表。

对于准临时表名称，我会推荐一些类似的东西

```
input_files_XXX (.i.e. prefix_<hashvalue>) 
```

这使得更容易知道要删除哪些陈旧的表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T15:52:35.330

Oracle 明智的，使用临时表的最佳解决方案 - 没有索引不会给你太多的性能是使用嵌套表类型。

CREATE TYPE my_ntt 是 directory_rec 的表；

然后创建一个函数 f1，它返回一个 my_ntt 类型的变量并在查询中使用。

select field1 , field2 from table_name where field1 in table (cast (f1 as my_ntt));

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T14:16:05.653

您可以将 50'000 个 id 拆分为 50 个 1000 个 id 的列表，对每个这样的列表进行查询，然后在 perl 中收集结果集。

# optimization - cachegrind 计数不反映实际性能

> ID：12873742
> 
> 赞同：0
> 
> 时间：2012-10-13T13:51:09.407
> 
> 标签：optimization, valgrind, cachegrind

同一算法的两个版本在 valgrind/cachegrind 下产生不同的总指令获取计数和周期估计。差异约为 25%。然而，处理时间非常相似（cachegrind-slow 版本实际上更短）：

*   **版本 1：**

    ```
    Ir:     146,328,018,245
    CEst:   152,553,736,055
    timing: 17.93 s 
    ```

*   **版本 2：**

    ```
    Ir:     185,221,836,610
    CEst:   197,531,381,950
    timing: 17.53 s 
    ```

这种行为是预期的吗？我怎样才能更多地了解为什么版本 1 速度较慢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:46:54.750

我发现不一致是由于用于 cachegrind 运行和计时运行的不同编译器选项造成的。特别是，我为 cachegrind 运行禁用了函数内联（这样我可以获得有意义的每个函数计数）。

# erlang - Erlang：如何跟踪消息系统中的发件人？

> ID：12873747
> 
> 赞同：2
> 
> 时间：2012-10-13T13:51:51.657
> 
> 标签：erlang, messaging, pid

我是一个 erlang 新手，我正在尝试构建我的第一个消息传递应用程序。我的问题有 2 个部分

当我在终端上打开两个单独的 erlang 控制台而不指定 -sname 属性时，两个 erlang 控制台如何具有相同的进程 pid。它们实际上是相同的过程吗，如何？

```
 Terminal #1 
--------------

$> erl 

Erlang R15B01 (erts-5.9.1) [source] [smp:4:4] [async-threads:0] [hipe] [kernel-poll:false]
Eshell V5.9.1  (abort with ^G)
1> self().
0.31.0 

```

同样适用于 2 号航站楼

```
 Erlang R15B01 (erts-5.9.1) [source] [smp:4:4] [async-threads:0] [hipe] [kernel-poll:false]

Eshell V5.9.1  (abort with ^G)
1> self().
0.31.0 

```

两者如何在同一进程上运行。这些是 erlang 进程而不是本机进程吗？

如果我正在构建一个消息传递应用程序，并且我需要某种方法来跟踪每个用户发送的消息的信息。我尝试使用的基本设计是为每个用户创建一个新的聊天客户端。我生成了一个进程来跟踪接收消息的人，从而将他的昵称存储在那里。

同样，我创建了另一个模块，用于跟踪谁发送消息，但在这种情况下，我使用 self() Pid 来跟踪发件人。这发生在`chat_client_sender`模块中。

```
 -module(chat_client).
-export([start/0, stop/0, loop/1, login/3, logout/1, send_message/2]).
-define(SERVER, chat_client).

start() ->
    message_router:start(),
    chat_client_sender:start().

stop() ->
    message_router:stop(),
    chat_client_sender:stop().

login(Uid, Password, Nickname) ->
    io:format("~p My Pid", [self()]),
    Pid = spawn(chat_client, loop, [Nickname]),     
    case message_router:login(Uid, Password, Nickname, Pid) of
        {ok, logged_in} ->
            chat_client_sender:add_sender(self(), {Uid, Nickname}),
            {ok, logged_in};
        {error, invalid_uid_or_pwd} ->
            {error, invalid}
    end.

logout(Uid) ->
    case message_router:logout(Uid) of
        {ok, logged_out} ->
            {ok, logged_out};       
        ignored ->
            ignored;
        _Someshit ->
            io:format("Some Shit ~p", _Someshit)
    end.

send_message(ToUid, MessageBody) ->
    chat_client_sender:send_message(ToUid, MessageBody).

loop(Nickname) ->
    receive
        {print_msg, Messagebody, SenderNickname} ->
            io:format("~p: ~p to ~p~n", [SenderNickname, Messagebody, Nickname]),
            loop(Nickname);     
        stop -> 
            ok
    end. 

```

chat_client_sender 模块

```
 -module(chat_client_sender).
-export([start/0, stop/0, add_sender/2, loop/1, get_sender/1, send_message/2]).
-define(SERVER, chat_client_sender).

start() ->
    erlang:register(?SERVER, spawn(chat_client_sender, loop, [dict:new()])).

stop() ->
    ?SERVER ! stop.

add_sender(SenderPid, {Uid, Nickname}) ->
    io:format("Adding Sender ~p ~p ~p ~n", [SenderPid, Uid, Nickname]),
    ?SERVER ! {add_sender, SenderPid, {Uid, Nickname}}.

get_sender(SenderPid) ->
    ?SERVER ! {get_sender, SenderPid}.

send_message(ToUid, MessageBody) ->
    ?SERVER ! {send_msg, ToUid, MessageBody}.

loop(MemberPids) ->
    receive
        {add_sender, SenderPid, {Uid, Nickname}} ->
            case dict:find(SenderPid, MemberPids) of
                {ok, {Uid, Nickname}} ->    
                    io:format("Pid exists ~n"),             
                    loop(MemberPids);
                error ->
                    loop(dict:store(SenderPid, {Uid, Nickname}, MemberPids))
            end;
        {send_msg, ToUid, MessageBody, SenderPid} ->
            case get_sender(SenderPid, MemberPids) of
                {found, _Uid, Nickname} ->
                    message_router:send_message(ToUid, MessageBody, Nickname),
                    loop(MemberPids);
                not_found ->
                    not_found,
                    loop(MemberPids)
            end;
        {remove_sender, SenderPid} ->
            case get_sender(SenderPid, MemberPids) of
                {found, _Uid, _Nickname} ->
                    loop(dict:erase(SenderPid, MemberPids));
                not_found ->
                    ignored,
                    loop(MemberPids)
            end;
        {get_sender, SenderPid} ->
            case get_sender(SenderPid, MemberPids) of
                Any -> 
                    io:format("GET SENDER ~p~n", [Any])
            end,
            loop(MemberPids);
        stop ->
            ok
    end.

get_sender(SenderPid, MemberPids) ->
    case dict:find(SenderPid, MemberPids) of 
        {ok, {Uid, Nickname}} ->
            {found, {Uid, Nickname}};
        error ->
            not_found
    end. 

```

因此，我的应用程序开始`add_sender`在我的`loop`方法中的子句中失败，该子句存储来自`chat_client`.

这是一个例子

```
 chat_client:start().
true
9> chat_client_sender:add_sender(self(), {'sid@abc.com', 'sid'}).
Adding Sender  'sid@abc.com' sid 
{add_sender,,{'sid@abc.com',sid}}
10> chat_client_sender:add_sender(self(), {'sid1@abc.com', 'sid1'}).
Adding Sender  'sid1@abc.com' sid1 
{add_sender,,{'sid1@abc.com',sid1}}
11> 
=ERROR REPORT==== 13-Oct-2012::19:12:42 ===
Error in process  with exit value: {{case_clause,{ok,{'sid@abc.com',sid}}},[{chat_client_sender,loop,1,[{file,"chat_client_sender.erl"},{line,25}]}]} 

```

根据我的理解，它应该简单地继续模块中`{ok, {Uid, Nickname}}`子句的尾递归。`chat_client_sender`

```
 ...
    receive
        {add_sender, SenderPid, {Uid, Nickname}} ->
            case dict:find(SenderPid, MemberPids) of
                {ok, {Uid, Nickname}} ->    
                    io:format("Pid exists ~n"),             
                    loop(MemberPids);
                error ->
                    loop(dict:store(SenderPid, {Uid, Nickname}, MemberPids))
            end;
... 

```

我真的很感激一些帮助理解这里发生的事情。此外，如果您能查看我的代码并告诉我更多关于最佳实践和我可以做得更好的事情，我将非常感激。我的代码可在[goo.gl/yY4kR 获得](http://goo.gl/yY4kR)

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T17:27:46.577

第一个问题：

PID 的第一部分表示进程在其中运行的 erlang 节点，0 表示进程在本地节点中运行。现在，你得到的 PID 是 shell 的 PID，它只是 erlang 进程；例如，它可能会死亡（并自动重生）：

```
1> self().
<0.32.0>
2> [X] = [4,2].
** exception error: no match of right hand side value [4,2]
3> self().     
<0.35.0> 
```

第二个问题：

错误位于此处（顺便说一句，找到有问题的代码的最小部分非常有用，不仅在您自己进行调试时，而且在您发布问题时 - 通常更多人会在您需要的代码时提供帮助研究很小。而且，据我所知，SO 并不真正专注于代码审查）：

```
loop(MemberPids) ->
    receive
        {add_sender, SenderPid, {Uid, Nickname}} ->
            case dict:find(SenderPid, MemberPids) of
                {ok, {Uid, Nickname}} ->    
                    io:format("Pid exists ~n"),             
                    loop(MemberPids);
                error ->
                    loop(dict:store(SenderPid, {Uid, Nickname}, MemberPids))
            end
    end. 
```

因此，`loop/1`接收一种形式的消息`{add_sender, SPID, {UID, Nick}}`
当它接收到这样的消息时，它会在字典中搜索一条记录，该记录具有作为键`SPID` 的`error`值`{ok, {UID2, Nick2}}`。你`case`用来分开那些。
但是，当您尝试匹配`{ok, {UID2, Nick2}}`时，不要使用新变量；您使用旧的，已经实例化的变量`{UID, Nick}`，因此，如果它们不同，它将失败（因为没有 case 匹配的子句）。

所以，你可以做什么？由于您无论如何都不使用它们，因此您可以用下划线替换它们：

```
loop(MemberPids) ->
    receive
        {add_sender, SenderPid, {Uid, Nickname}} ->
            case dict:find(SenderPid, MemberPids) of
                {ok, {_, _}} ->    
                    io:format("Pid exists ~n"),             
                    loop(MemberPids);
                error ->
                    loop(dict:store(SenderPid, {Uid, Nickname}, MemberPids))
            end
    end. 
```

顺便说一句，由于您从不使用`Uid`或`Nickname`单独使用，您可以将元组替换`{Uid,Nickname}`为变量：

```
loop(MemberPids) ->
    receive
        {add_sender, SenderPid, Value} ->
            case dict:find(SenderPid, MemberPids) of
                {ok, _} ->    
                    io:format("Pid exists ~n"),             
                    loop(MemberPids);
                error ->
                    loop(dict:store(SenderPid, Value, MemberPids))
            end
    end. 
```

好吧，它不是完全等价的，因为如果字典返回一个类似的值，第一个版本将失败，`{ok, {a,b,c}}`但我真的不明白这个检查的意义。

此外，最好（至少在语义上）使用`dict:is_key/2`，因为您只想检查新元素是否已经存在。它也可以更快，具体取决于实现，因为它只需要查看键是否存在而不检索值；但是，我还没有测试过它，所以也许没有这样的优化。此外，对于一个小规模的项目，它可能没有任何区别。

但请注意，有一种特殊情况：如果您尝试添加具有相同 PID 和相同值的人（本质上是重新注册同一用户），该怎么办。当前的实现仍然给出相同的错误。根据您的规格，您可能想要更改它。

玩得开心！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-13T18:38:19.603

回答您的第一个问题：erlang 进程不是本机进程，而是“内部”进程。因此，当运行两个 erlang*节点*时，每个节点都有自己的一组进程。在这两种情况下，您调用的 shell 进程都`self()`具有相同的*pid*（进程标识符）。

没有隐含或内置的方式来确定谁发送了消息。标准方法是按照您的示例进行操作，并明确让消息包含发件人。我们发现这是最好的方法。

# c# - 如何从 OutSide try/catch 传递一些值到 Catch 方法

> ID：12873749
> 
> 赞同：0
> 
> 时间：2012-10-13T13:51:54.243
> 
> 标签：c#, visual-studio-2010, methods, parameters, try-catch

请查看以下示例代码：

```
try
{
      string str = MyMethod();
}
catch
{

}
public string MyMethod()
{
     CookieContainer cookieJar = new CookieContainer();
     ... -> Some Codes That Make An Exception
} 
```

如何将 cookieJar 传递给 Catch 方法？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T13:58:14.790

你做一个新的

```
public class CookieJarException : Exception
    {
        public CookieJar Jar {get; private set;}

        public CookieJarException(CookieJar a)
        {
            Jar = a;
        }

    } 
```

然后你

```
throw new CookieJarException(cookieJar); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T13:55:12.427

1.  通过使其成为全局变量。

2.  通过定义您自己的异常类，该类继承自`System.Exception`一个要保存的属性`cookieJar`。然后你会有一个`try/catch`in`MyMethod()`来捕获任何异常并引发它`CookieLovingException`，设置属性和`InnerException`.
    然后外部处理程序将`catch CookieLovingException ex`.

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-13T13:58:11.720

您可以在此处使用 finally 块。finally 总是被执行

```
 public string MyMethod()
        {
            CookieContainer cookieJar = new CookieContainer();
            try
            {

                // Some Codes That Make An Exception
                string str = MyMethod();
            }
            catch (Exception)
            {
                 if (cookieJar != null)
                {
                    // do whatever u want
                }
            }
            finally
            {
                if (cookieJar != null)
                {
                    // do whatever u want
                }
            }
        } 
```

# c - 在 c 语句中计算标记

> ID：12873757
> 
> 赞同：7
> 
> 时间：2012-10-13T13:52:46.273
> 
> 标签：c, token

以下 C 语句中的标记数。

```
printf("i = %d, &i = %x", i, &i); 
```

我认为这里有 12 个令牌。但我的回答是错误的。

谁能告诉我如何在上面的 C 语句中找到标记？

PS：我知道标记是编译器不会分解为组件元素的源程序文本。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-13T13:58:02.643

据我了解 C 代码解析，令牌是（总共 10 个）：

```
printf
(
"i = %d, &i = %x"
,
i
,
&
i
)
; 
```

我不计算空格，它通常没有意义，仅用作其他标记之间的分隔符，并且我不会将字符串文字分解成碎片，因为它本身就是一个完整的实体。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-13T13:58:55.593

这看起来很像学校作业或其他东西，但取决于空格是否计数：10 或 12（或 13，如果空格很重要并且有一个结束换行符）

```
'printf' '(' '"i = %d, &i = %x"' ',' 'i' ',' '&' 'i' ')' ';'
  1       2     3                4   5   6   7   8   9  10 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-12T14:06:37.160

是的，总共有 10 个标记。因为用引号表示的字符可以被词法分析器（LA）视为单个标记。这是 LA 的属性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-01T15:53:34.320

评论不算作记号。空格、换行符、制表符也不算作记号。所以，肯定有 10 个令牌。

# jenkins - 如何在詹金斯服务器上发布声纳结果，或者我们有声纳报告詹金斯插件

> ID：12873759
> 
> 赞同：14
> 
> 时间：2012-10-13T13:53:03.853
> 
> 标签：jenkins, sonarqube, jenkins-plugins

jenkins有一个[声纳插件](http://docs.sonarqube.org/display/SONAR/Jenkins+Plugin)，它触发 CI (jenkins) 内部的声纳构建，非常有用。

虽然现在我想在不跳转到声纳网站的情况下查看 jenkins 中的声纳结果，但如果我只想查看这项工作的一些关键数据，它会很有用。

它可能是 jenkins 中的声纳报告插件。

你有类似的需求吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-13T13:59:16.040

到目前为止，我使用的一种丑陋的解决方案是使用[Sonar Web API。](http://docs.sonarqube.org/display/DEV/Web+Service+API)

我在作业结束时添加一个`curl`命令（构建步骤）以获取所需的指标，例如

```
curl http://sonar.sh.cn.ao.ericsson.se//api/resources?metrics=qi-quality-index,coverage,test_success_density&resource=54936 --output sonar-result.xml 
```

然后我将其存档`sonar-result.xml`以使其在作业中可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-30T06:25:21.513

您可以尝试使用 Jenkins 的 Mashup Portlets 插件在 Jenkins Dashboard 中配置结果。

插件的 PFB URL。

网址：- [https://wiki.jenkins-ci.org/display/JENKINS/Mashup+Portlets](https://wiki.jenkins-ci.org/display/JENKINS/Mashup+Portlets)

# zend-framework - SQLSTATE[HY093]：无效的参数号：绑定变量的数量与 dotrine 和教义的令牌数量不匹配

> ID：12873764
> 
> 赞同：0
> 
> 时间：2012-10-13T13:53:55.550
> 
> 标签：zend-framework, doctrine

在我们的项目中有一个用来减少一本书的卖家数量的函数就是这个函数

```
class listab_Model_Books extends listab_Model_BaseBooks
{
    public function decreaseSeller($code)
    {
        $row = Doctrine_Query::create()
               ->from('listab_Model_Books b')
               ->where('b.code = ?',$code)
               ->fetchOne();
//            var_dump($row['seller']);
       $q = Doctrine_Query::create()
               ->from('listab_Model_Books b')
               ->set('b.seller = ?',$row['seller']-1)
               ->where('b.code = ?',$code)
               ->execute();
    }
} 
```

当我尝试使用此功能时，它给了我这个错误

```
SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens dotrine 
```

我究竟做错了什么 ：（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T14:07:33.270

**为正确性而**编辑。****

 **我相信“set”应该只与更新一起使用，如下所示：

```
Doctrine_Query::create()
->update('listab_Model_Books b')
->set('b.seller', '?', $row['seller']-1)
->where('b.code = ?',$code)
->execute(); 
```

如果您要尝试进行更新，则应使用“更新”子句。否则它将被视为选择。**

# html - 样式化“选择文件”按钮

> ID：12873765
> 
> 赞同：1
> 
> 时间：2012-10-13T13:53:59.060
> 
> 标签：html, css

有什么办法可以“屏蔽”“上传照片”按钮后面的“选择文件”按钮吗？所以当你点击漂亮的按钮时，它会打开文件浏览器？

谢谢

[http://jsfiddle.net/rUdf2/4/](http://jsfiddle.net/rUdf2/4/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T14:59:55.587

[http://jsfiddle.net/rUdf2/6/](http://jsfiddle.net/rUdf2/6/)

Essential part:

1.  Add an ID (or whatever "mark" that works) to the `<input type="file">` element;

2.  Add `display:none` to `div#upload-wrap` so that the `<input type="file">` is invisible;

3.  Add `onclick="document.getElementById('upload-field').click();"` to the "upload a photo" button.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T11:50:42.693

正如路人所说，你必须隐藏`<input type="file">`元素并使用 jquery（或 javascript）添加这个

```
$('#share-bottom button').click(function () {
        $('#upload-wrap-button').click();
    }); 
```

[http://jsfiddle.net/XnXeh/](http://jsfiddle.net/XnXeh/)

# facebook - 使用带有自定义 Facebook 分享按钮的元标记

> ID：12873766
> 
> 赞同：0
> 
> 时间：2012-10-13T13:54:13.537
> 
> 标签：facebook, facebook-graph-api, meta-tags

我正在使用我自己设计的 Facebook 分享按钮。

首先：我有一个标签如下：

```
<a href="http://www.facebook.com/sharer.php?u={$mainsite|escape:'url'}{$OBJECT->getURL()|urlencode}&amp;t={$OBJECT->getShareMessage()|escape}" onclick="window.open(this.href);return false;" class="btn-facebook"></a> 
```

'btn-facebook' 类调用我定制设计的背景图像。

其次，页面具有元标记，这些标记收集了一些开放的图形属性，如标题、页面图像……

我的问题是，当我点击这个 a-tag 时，我的 facebook 墙上确实有一条消息，但这条消息中没有显示任何标题或图像。有没有办法做到这一点 ？

顺便说一句，我知道我可以使用提要对话框，但是是否可以将后者耦合到 opne graph 元标记？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T14:44:04.877

事实上，我设法通过使用提要对话框进行了调试。这是使用它的方法：

```
http://www.facebook.com/dialog/feed?app_id=$app_id;link=$link
picture=$picture&name=$name&caption=$caption&description=$description 
```

[请参阅此处](http://developers.facebook.com/docs/reference/dialogs/feed/)的文档

# jquery - 在动态创建的文本框上显示日期选择器

> ID：12873773
> 
> 赞同：0
> 
> 时间：2012-10-13T13:55:15.750
> 
> 标签：jquery, html, datepicker

我正在尝试创建一个带有文本框的 div，我希望 datepicker 在其上显示日期。到目前为止，我能够使用文本框和日期选择器动态创建 div，但我无法在文本框上显示日期。我在这里做错了什么？

代码：

```
showdate(){
var newDateBoxdiv = $(document.createElement('div')).attr({ class:"EDate", id:"EDate"+i});
newDateBoxdiv.html('<input type="text" id="DisplayTextBox">');

addDateBox();

newDateBoxdiv.insertAfter('.EDate');
}

//Function called inside the above function
addDateBox(){
 $('.EDate').find('input[id^="DisplayTextBox"]').each(function () {

    $(this).datepicker({
        showOn: "button",
        buttonImage: "calendar.png",
        buttonImageOnly: true

    });
    $(this).datepicker({dateFormat: 'dd-M-y'});
    var dateFormat = $( this ).datepicker( "option", "dateFormat" );
    $(this).datepicker( "option", "dateFormat", 'dd-M-y' );

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T14:03:56.537

更新代码.. 我注意到您的代码有一些错误，包括 newDateBoxdiv 值。您的文本框 DisplayTextBox 也没有增加。试试这个。

```
showdate(){
  var edatenum = $('#increment').val();
  edateinc = "EDate"+edatenum; //increment the value of your div
  var displaytextbox = "DisplayTextBox"+edatenum; //of course you have to increment your textbox also
  $('#increment').val(""+(edatenum+1)); //increment the value of our hidden field
  var newDateBoxdiv = $('<div class="EDate" id="'+edateinc+'"> <input type="text" id="'+displaytextbox+'"></div>');
  newDateBoxdiv.insertAfter(".your_existing_box");  

     addDateBox(); //im not sure if this method already works?
}

<!-- outside of script -->
<input type='hidden' id='increment' value='1'> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-22T10:02:41.830

使用 .on()：

$( 选择器 ).live( 事件、数据、处理程序 ); // jQuery 1.3+

$( 文档 ).delegate( 选择器、事件、数据、处理程序 ); // jQuery 1.4.3+

$( 文档 ).on( 事件、选择器、数据、处理程序 ); // jQuery 1.7+

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T14:04:19.500

使用 .live()

[http://api.jquery.com/live/](http://api.jquery.com/live/)

# opencv - 对 cvSplit 函数的困惑

> ID：12873776
> 
> 赞同：2
> 
> 时间：2012-10-13T13:55:32.623
> 
> 标签：opencv

`cvSplit`使用函数的正确方法是什么？我看到了它的不同版本。应该是

```
cvSplit(oriImg, r,g,b, NULL);
```

或者

```
cvSplit(oriImg, b,g,r, NULL);
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T18:30:34.710

两者都可以，这取决于频道顺序。默认情况下，OpenCV 使用 BGR，所以在这种情况下它会是`cvSplit(oriImg, b,g,r, NULL);`，但您可以将其转换为 RGB，然后使用另一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T03:49:26.947

这与我开始使用 OpenCV 时的困惑完全一样。OpenCV 使用 BGR 而不是 RGB，所以你应该使用

cvSplit(img,b,g,r,NULL);

# iphone - 每 30 分钟执行一次选择器

> ID：12873783
> 
> 赞同：0
> 
> 时间：2012-10-13T13:56:27.753
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我正在使用特定的 API，需要刷新令牌才能使用它。

刷新此令牌后，它可以使用半小时，然后变为无效。然后我必须再次刷新它。我现在正在做的是在每个请求上刷新它，但它们发生得很快，在几秒钟或几分钟内，所以这可能不是最好的方法。

如果你能给我一些建议，那就太好了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T14:00:24.853

您总是可以将一些 ivar 或变量保存在一个对象中，该对象表示上次刷新令牌的时间，当请求进来时，检查`NSTimeInterval`从现在到设置该令牌的日期/时间之间的“”，然后提交一个新的如果时间大于 30 分钟，则请求令牌。

这样做的好处（与使用计时器相比）是在长时间不活动期间，您会根据需要请求新的 30 分钟令牌，而不是每 30 分钟应用程序处于活动状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T13:59:31.170

您可以使用 NSTimer；

```
[NSTimer timerWithTimeInterval:1800 target:self selector:@selector(refreshToken:) userInfo:nil repeats:YES]; 
```

# java - 在 Java 中解析 Javascript，Javascript 对象

> ID：12873786
> 
> 赞同：1
> 
> 时间：2012-10-13T13:56:55.297
> 
> 标签：java, javascript, rhino

我正在尝试使用 Java 中的 ScriptEngine 解析 Javascript 文件。我对执行脚本不感兴趣，只是解析它以获得一些值。

脚本文件由一系列具有这种结构的数组组成：

```
var array= new Array();
array[0]=new Array();
array[0]['point']=new Point2D(2.454,-8.33);
array[0]['name']='Object 1';
array[1]=new Array();
array[1]['point']=new Point2D(42.84, 3.53);
array[1]['name']='Object 2';

... 
```

Point2D 定义为：

```
function Point2D(x,y) {
this.x = x;
this.y = y;
} 
```

到目前为止，我已经使用以下代码解析了脚本：

```
ScriptEngineManager mgr = new ScriptEngineManager();
ScriptEngine se = mgr.getEngineByName("JavaScript");
try {
  se.eval(file);
  NativeArray array = (NativeArray)se.get("array");
  for(int i = 0; i < array.getLength(); i++){
    if(array.get(i)!=null){
      NativeArray elementArray = (NativeArray)array.get(i);
      System.out.println("Object: " + elementArray);
      System.out.println("name: " + elementArray.get("name", elementArray));
      System.out.println("point: " +  elementArray.get("point", elementArray));
    }
  }
}
catch (ScriptException e) {
      ....
} 
```

这给了我正确的名称，但我得到了 Point2D 项目的 Object 类的实例。由于它最初是一个 javascript 对象，我如何解析它以获得 x 和 y 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T14:39:43.887

好吧，感谢@Pointy，我找到了解决方案，我在 if 语句中注入了这段代码：

```
se.eval("var x = array[" + i + "]['point'].x; var y = array[" + i + "]['point'].y;", se.getBindings(ScriptContext.ENGINE_SCOPE)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T17:35:16.363

你可以这样做：

```
 NativeObject point;
    NativeArray elementArray;
    for(int i = 0; i < array.getLength(); i++){
        if(array.get(i)!=null){
            elementArray = (NativeArray)array.get(i);                
            System.out.println("name: " + elementArray.get("name", elementArray));
            point = (NativeObject) arrayFirstElement.get("point", arrayFirstElement);
            //System.out.println("point.x: " +  NativeObject.getProperty(point, "x"));
            //System.out.println("point.y: " +  NativeObject.getProperty(point, "y"));
            System.out.println("object point has: ");
            for ( Object propertyId : NativeObject.getPropertyIds(point)){
                System.out.println("property "+ propertyId + " has value " + NativeObject.getProperty(point, propertyId.toString()));
            } 
        }
    } 
```

但是看看这些教程：[1、2](http://www.ibm.com/developerworks/library/wa-aj-javaee/) [，](http://jee-bpel-soa.blogspot.com/2009/07/scripting-for-java-platform-javascript.html)你可能会得到一些新的想法:)

# android - 在 Android 中使用数据报的简单网络

> ID：12873787
> 
> 赞同：2
> 
> 时间：2012-10-13T13:57:01.827
> 
> 标签：android, android-networking

我正在尝试制作一个简单的应用程序。用户看到一个edittext ..在其中输入一些文本..然后按发送...然后笔记本电脑上的服务器收到该消息。

现在 NetworkOnMainThread 异常让我头疼......该应用程序在 2.3.3 中完美运行，因为当时没有 NetworkOnMainThread 异常之类的东西。

搜索了很多..两个解决方案是

1.  为网络创建新线程或
2.  异步任务。

我都试过了，没有任何结果。

尝试 1：使用单独的线程：

现在我能理解的是我必须启动一个单独的线程。行。我做到了。

以下是我的客户端代码。

```
EditText e ;
TextView tv;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    e= (EditText) findViewById(R.id.editText1);
    tv = (TextView) findViewById(R.id.textView1);
    Thread startNetworking = new Thread(new NetworkThread());
    startNetworking.start();
}

public void sendMessage(View v){
        if(NetworkThread.sendToClient(e.getText().toString()))
            tv.setText("Status : Successful");
        else
            tv.setText("Status : Unsuccessful");
} 
```

sendMessage 是我的发送按钮的 onClick 函数。我有另一个 JAVA 文件 NetworkThread.java....

这是一个代码：

```
public class NetworkThread implements Runnable{

static DatagramSocket socket;
static InetAddress add;
public void run() {
    try {
        socket = new DatagramSocket();
    } catch (SocketException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    try {
        add = InetAddress.getByName("192.168.1.12");
    } catch (UnknownHostException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}
public static boolean sendToClient(String message){
    DatagramPacket p = new DatagramPacket(message.getBytes(),message.getBytes().length,add,4444);
    try {
        socket.send(p);
        return true;
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        return false;
    }
}
} 
```

这仍然行不通。我首先想用尽第一次尝试，然后我将继续在这里询问 AsyncTask 以及我尝试过的内容。所以暂时请帮我完成这个简单的发送和接收字符串的任务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T14:14:37.503

不幸的是，`sendToClient()`在同一个类中定义`NetworkThread`并不意味着它将在您的网络特定线程上运行。该`sendToClient()`方法仍将在您的主 (UI) 线程上运行，因为它是从您的`onClick()`方法中调用的。UI 回调，例如`onClick()`，总是在 UI 线程上处理。

I would recommend using an `AsyncTask` as it enables you to send arbitrary data (such as your `message` parameter) to the background/network thread before it executes. Continuing to use `Runnable` and `Thread` will require extra machinery to synchronize the execution of your UI and network threads, and these challenges are handled behind the scenes by `AsyncTask`.

# java - JavaFX 2.2 javadoc？

> ID：12873790
> 
> 赞同：6
> 
> 时间：2012-10-13T13:57:25.047
> 
> 标签：java, eclipse, javadoc, javafx-2, javafx

我在 Windows 上安装了 JavaFX 2.2（与 Java 7 U7 捆绑在一起）并且我正在使用 Eclipse。我想将 javadoc 添加到 Eclipse，但在 JDK 文件夹中找不到它。

那么，JavaFX 2.2 的 javadoc 在哪里？（离线使用）

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-13T15:05:10.067

检查此页面： [http ://www.oracle.com/technetwork/java/javase/documentation/java-se-7-doc-download-435117.html](http://www.oracle.com/technetwork/java/javase/documentation/java-se-7-doc-download-435117.html)

单击接受许可协议后，您可以下载 *javafx-2_2_0-apidocs.zip*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T14:14:17.847

我记得绊倒了同样的问题。

我最终做的是[为 Java 6 安装 JavaFX，](http://www.oracle.com/technetwork/java/javase/downloads/javafxjdk6-1728173.html)它仍然包含 Javadoc。然后，我将 Javadoc 文件夹复制到某个地方并再次卸载了整个东西。在 Windows 上，该文件夹应位于类似`C:\Program Files\Oracle\JavaFX 2.2 SDK\docs\api`.

这不是一个很好的解决方案，但它确实有效。

# ios - 国家气象局 (NOAA) REST API 为预报参数返回 nil

> ID：12873792
> 
> 赞同：4
> 
> 时间：2012-10-13T13:57:55.593
> 
> 标签：ios, xml, weather, weather-api, noaa

我正在使用 NWS REST API 作为我正在制作的应用程序的天气服务。我最初不愿意使用 NWS，因为它的文档很糟糕，但我无法抗拒，因为它是完全免费提供的。

现在我正在尝试使用它，我遇到了一些困难。当请求多天时，最低温度会在几天内显示为零。

（编辑：当我更多地测试 API 时，我发现最低温度并不总是为零。它可以是最高温度或降水，它似乎完全随机。如果您想使用他们的网络界面，你可以在这里这样做：http: [//graphical.weather.gov/xml/sample_products/browser_interface/ndfdBrowserByDay.htm](http://graphical.weather.gov/xml/sample_products/browser_interface/ndfdBrowserByDay.htm)

在这里： http: [//graphical.weather.gov/xml/sample_products/browser_interface/ndfdXML.htm](http://graphical.weather.gov/xml/sample_products/browser_interface/ndfdXML.htm)）

以下是最低温度为空的请求示例：[http ://graphical.weather.gov/xml/sample_products/browser_interface/ndfdBrowserClientByDay.php?listLatLon=40.863235,-73.714780&format=24%20hourly&numDays=7](http://graphical.weather.gov/xml/sample_products/browser_interface/ndfdBrowserClientByDay.php?listLatLon=40.863235,-73.714780&format=24%20hourly&numDays=7)

令人惊讶的是，在他们的网站上，可以找到最低温度：http: //forecast.weather.gov/MapClick.php?textField1=40.83& [textField2=-73.70](http://forecast.weather.gov/MapClick.php?textField1=40.83&textField2=-73.70)

您会在“最低温度”下看到它填充了大约 5 个（有时更少，它是不一致的）空白字段，上面写着`<value xsi:nil="true"/>`

如果有人可以帮助我，我将不胜感激，使用 NWS API 有时会有点不知所措。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T07:12:39.687

根据我对文档的理解，[这里](http://www.weather.gov/mdl/XML/Design/MDL_XML_Design.doc)和[这里](http://graphical.weather.gov/xml/rest.php)的 nil 值只是表明数据不可用。

在不对 NOAA 的数据架构做出假设的情况下，可以想象通过 API 提供的信息可能与其网站显示的不同。

> 缺失值由空元素和 xsi:nil=”true” (R2.2.1) 表示。

返回的 Nil 值似乎涉及时间段。请注意这些请求中[1](http://graphical.weather.gov/xml/sample_products/browser_interface/ndfdBrowserClientByDay.php?listLatLon=40.863235,-73.714780&format=24+hourly&numDays=7)`time-layout`中的键（参见第 5.3.2 节）之间的区别：

*   [k-p24h-n7-1](http://graphical.weather.gov/xml/sample_products/browser_interface/ndfdBrowserClientByDay.php?listLatLon=40.863235,-73.714780&format=24+hourly&numDays=7)
*   [k-p24h-n6-1](http://graphical.weather.gov/xml/sample_products/browser_interface/ndfdBrowserClientByDay.php?lat=40.83&lon=-73.70&format=24+hourly&startDate=2012-10-24&numDays=7&Unit=e)

数据时间不同。

> ### `<layout-key>`元素
> 
> 密钥是使用以下约定派生的：
> 
> 1.  “k”代表键。
> 2.  “p24h”表示数据周期长度为 24 小时。
> 3.  “n7”表示数据次数为7。
> 4.  “1”是用于保持布局键唯一的序列号。

这里，`startDate`是因素。将其关闭需要更多时间，并且可能会导致某些请求的数据尚不可用。

根据文档：

> 您需要 NDFD 数据的开始日期。如果字符串为空，则假定开始日期是*数据库中最早的可用日期*。***仅当想要缩短要检索数据的时间窗口***（小于整个 7 天）时才需要此输入，例如，如果用户想要第 2-5 天的数据。

我没有遇到你提到的随机性。NOAA[的 Yahoo! 组论坛](http://tech.groups.yahoo.com/group/NDFD_SOAP_Service/)也许可以告诉你更多。

# http - 将摘要 HTTP 身份验证与 SSL 加密结合使用是否足够安全？

> ID：12873793
> 
> 赞同：1
> 
> 时间：2012-10-13T13:58:01.833
> 
> 标签：http, authentication, https, basic-authentication, digest-authentication

我正在设计一个移动应用程序，它应该通过**HTTPS**协议与远程服务器交互。这意味着系统将设法加密消息并使用**SSL**证书对通信进行保密。

好吧，我还想提供一种身份验证方法，以保护系统免受外部攻击，并使其只能由具有有效凭据的用户访问。我现在想知道*摘要 HTTP 身份验证*（[http://php.net/manual/en/features.http-auth.php](http://php.net/manual/en/features.http-auth.php)）是否是一个好主意。我猜是这样，特别是因为我认为应该没有特别的风险，因为这样我应该设法将加密和身份验证结合起来。

但是，我在某处读到，如果我使用 SSL，HTTP 基本身份验证就足够安全了。真的吗？你们怎么看？

大家有什么建议吗？

非常感谢！

# c++ - 未打印窗口名称

> ID：12873807
> 
> 赞同：0
> 
> 时间：2012-10-13T13:59:21.100
> 
> 标签：c++, c, windows, winapi

以下程序旨在打印具有焦点的窗口的名称或至少打印程序正在运行的命令提示符的名称。但它只打印一个字符，即`W`. 为什么会这样？我在哪里犯错了？

```
#include <Windows.h>
#include <stdio.h>

int main() {
 TCHAR title[500];
 int i=0;
 while(i<10) {
   GetWindowText(GetForegroundWindow(), title, 500);
   printf("%s\n",title);
   i++;
   system("pause");
 }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T14:06:12.747

我敢猜测它`TCHAR`会扩展到`wchar_t`或`short`支持 Unicode（更准确地说是 UTF-16），这就是问题的根源。

在 UTF16 中，字符“W”由 2 个字节表示：87（“W”的 ASCII 码）和 0。

如果您尝试使用常规打印以 'W' 开头的 UTF-16 字符串`printf()`，`printf()`则会将该 UTF-16 字符串重新解释为“W\0”并在“W”之后立即停止打印。

要打印`TCHAR`您应该使用的字符串[`_tprintf()`](http://msdn.microsoft.com/en-us/library/wc7014hz.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T14:12:21.007

因为它是 TCHAR，所以它可以是 ansi 或 unicode。使用 _tprintf 代替 printf

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T15:14:53.150

如果您想继续使用 ANSI 版本，请`printf`使用`GetWindowTextA`并替换`TCHAR`为，`char`因为 Windows 有 2 组适用于字符串的 API：

1) 使用 ANSI 字符串并将`char*`or`const char*`作为输入的版本 (A)。

2) 使用宽字符串并以`wchar_t*`or`const wchar_t*`作为输入的版本 (W)。由于这是该函数的本机版本，因此速度稍快，并且可以处理 Unicode 字符串。

由于`_UNICODE`在您的项目中定义，`TCHAR`将被映射到`wchar_t`并将`GetWindowText`被映射到`GetWindowTextW`，因此您使用`printf`窄字符串无法`wchar_t*`使用 '打印`%s`，您应该使用`_tprintf`或停止使用`TCHAR`并直接调用最匹配您的 API 版本需要（这里调用`GetWindowTextA`）例如你可以使用这个：

```
wchar_t title[500];
GetWindowTextW(GetForegroundWindow(), title, 500);
printf("%ls\n", title); 
```

# c++ - 如何使编译器不优化getter的返回值并使其保持不变

> ID：12873811
> 
> 赞同：1
> 
> 时间：2012-10-13T13:59:30.477
> 
> 标签：c++, visual-studio-2010, optimization, return-value

我有一个 C++ 类的小问题......
我有一个私人成员`bool clientConnected`。
和一个吸气剂`bool isClientConnected() {return clientConnected;}`

现在的问题是.. clientConnected 是从不同的线程设置的。

在主要我有一个循环

```
while (!x.isClientConnected())
{} 
```

现在如果我在调试配置中编译它。
一切正常......只要将clientConnected设置为true就退出。
但如果我在发布配置中编译它。
编译器将循环优化为它的常量。
并进行以下操作：

```
00141C01  cmp         al,bl  
00141C03  je          SDL_main+0A1h (141C01h) 
```

al 的值永远不会再更新。
所以它总是认为它是错误的。
我也尝试了易变的，相同的结果

如何在类中防止这种优化，以便在每次调用时更新值，而不必编写类似的东西

```
bool z = x.isClientConnected();
while (!z) { z = x.isClientConnected(); } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T14:08:46.740

对于踩踏问题，您需要使用线程同步，以保证从一个线程到另一个线程的更改传播。

C++11 对线程有一些直接支持，但我没有使用过。

如果您没有支持该功能的编译器，请尝试使用 Boost 线程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T14:12:50.317

`volatile` [http://msdn.microsoft.com/en-us/library/12a04hfd(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/12a04hfd(v=vs.80).aspx)看起来像是对您问题的简单回答：

> “声明为 volatile 的对象不会在某些优化中使用，因为它们的值可以随时更改。”

```
volatile bool clientConnected;
bool isClientConnected() const volatile {return clientConnected;} 
```

* * *

但是 - 你有循环占用 CPU：

```
while (!x.isClientConnected())
{} 
```

更好的是等待信号量：

```
x.waitForConnected();
void X::waitForConnected()
{
   WaitForSingleObject(m_connectedSemaphore, ,....);
} 
```

如何在 MS Windows 中创建/使用信号量请参阅：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms686946 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686946(v=vs.85).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T14:02:39.923

您可以通过在源文件中移动方法的实现来欺骗编译器，并强制它不被内联（查找编译器的特定语法）。

# objective-c - Objective-c 中函数 pow() 的奇怪行为

> ID：12873812
> 
> 赞同：0
> 
> 时间：2012-10-13T13:59:34.547
> 
> 标签：objective-c

我的应用程序中有 pow() 的愚蠢问题。这是代码：

```
double xf = 0.0153846154;

NSLog(@"%.10f", xf);
if (abs(xf) < (5.0 * pow(10.0, -9.0))) {
    NSLog(@"%.10f", 5.0 * pow(10.0, -9.0));
} 
```

但是如果我尝试这个比较是正确的：

```
if (abs(xf) >= pow(10.0, 10.0)) {
    NSLog(@"%f", pow(10.0, 10.0));
} 
```

我的日志是：

```
2012-10-13 15:45:24.587 myApp[22941:c07] 0.0153846154
2012-10-13 15:45:28.950 myApp[22941:c07] 0.0000000050 
```

有人可以解释一下为什么 0.0153846154 < 0.0000000050

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T14:08:54.713

[abs](http://linux.die.net/man/3/abs)是一个整数函数，因此`xf`被截断为`0`，因此函数结果为`0`，然后将其转换回以`0.0`进行比较。

您需要使用[fabs](http://linux.die.net/man/3/fabs)：

```
NSLog(@"%.10f", xf);
if (fabs(xf) < (5.0 * pow(10.0, -9.0))) {
    NSLog(@"%.10f", 5.0 * pow(10.0, -9.0));
} 
```

# google-chrome - Chrome 扩展程序中的多条消息

> ID：12873813
> 
> 赞同：2
> 
> 时间：2012-10-13T13:59:34.933
> 
> 标签：google-chrome, background, messaging, content-script

让我解释一下这个问题。我正在开发一个 chrome 扩展程序，但我遇到了一些功能。我需要在浏览器中获取 url 并从我的服务器中检索一些内容来更新 badgeText。

contentscript1.js

```
chrome.extension.sendMessage({method:"sendUrlInBrowser",urlinbrowser: location.href}, function(response) { }); 
```

contentscript2.js

```
chrome.extension.sendRequest({method: "getInfosUser"}, function(response) {
var url = location.href;
var id_user = response.id_user;
var default_friend_view_user = response.default_friend_view_user;

$.post("http://host/getNoteCount",
    {
        "url_note" : url

    },
    function (data)
    {
        var obj = $.parseJSON(data);
        var note_count = obj[0].note_count;
        chrome.extension.sendMessage({method:"sendNoteCount",note_count: not_count}, function(response) {

         });
    }
); }); 
```

背景.js

```
var urlinbrowser = "";var note_count = "";chrome.extension.onMessage.addListener(function(request, sender, sendResponse) {if(request.method== 'sendUrlInBrowser') urlinbrowser = request.urlinbrowser;else if(request.method== 'sendNoteCount') 
{
    note_count = request.note_count;
    console.log(note_count);
    chrome.browserAction.setBadgeText({text:""+note_count});
} });chrome.extension.onRequest.addListener(function(request, sender, sendResponse) {
if (request.method == "getInfosUser")
{
    var storage = chrome.storage.local;

    var items_to_retrieve = ['id_user','default_friend_view_user'];

    storage.get(items_to_retrieve, function(items) {
      var id_user = items.id_user;
      var default_friend_view_user = items.default_friend_view_user;

        if(items.id_user.replace(' ','')!='undefined') 
        {
            sendResponse({id_user: id_user,default_friend_view_user: default_friend_view_user});
        }
    });

 }
else
  sendResponse({}); // snub them.}); 
```

主要问题实际上是我需要将跨站点请求的结果发送回后台，所以它必须监听这两条消息（url + result）而且我绝对不能:(我很确定我不必使用 connect() 但如果它可以工作...而且我什至不确定我是否需要 2 个内容脚本。有人知道吗？谢谢...

# c# - 如何合并两个列表 并将结果分配给第三个列表 ?

> ID：12873819
> 
> 赞同：2
> 
> 时间：2012-10-13T14:00:05.780
> 
> 标签：c#, .net

我有 3 个 List<> 对象。

```
List<T> listA = new List<t>();
List<T> listB = new List<t>();
List<T> listC = new List<t>(); 
```

我需要联合 listA 和 ListB 并将其分配给 ListC：

```
List<T> listC = new ListA +ListB; 
```

我的问题是如何实现它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-13T14:06:21.203

```
 List<int> A = new List<int>();
    A.Add(1);
    A.Add(2);
    List<int> B = new List<int>();
    B.Add(3);
    B.Add(4);

    List<int> C = new List<int>();

    C = A.Union<int>(B).ToList<int>(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-13T14:02:45.807

使用[`AddRange`](http://msdn.microsoft.com/en-us/library/z883w3dc.aspx)：

```
List<T> listA = new List<t>();
List<T> listB = new List<t>();
List<T> listC = new List<t>();

listC.AddRange(listA);
listC.AddRange(listB); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-13T14:03:31.280

试试`AddRange()`这个： -

```
 listC.AddRange(listA);
    listC.AddRange(listB); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-13T14:02:43.170

有点取决于您的要求，但可能很简单

```
listC.AddRange(listA);
listC.AddRange(listB); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-13T14:02:45.773

```
listC.AddRange(listA);
listC.AddRange(listB); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-13T14:19:00.463

要么`AddRange`像其他人已经提到的那样使用，或者，如果你想像提到的那样结合两者，你需要提供一个`IEqualityComparer<T>`和使用[`Enumerable.Union`](http://msdn.microsoft.com/en-us/library/bb358407.aspx)：

```
List<Foo> third = first.Union(second, new FooComparer()).ToList(); 
```

这是一个示例实现：

```
public class FooComparer : IEqualityComparer<Foo>
{
    public bool Equals(Foo x, Foo y)
    {
        return x.Id == y.Id; // assuming that there's a value type like ID as key
    }

    public int GetHashCode(Foo obj)
    {
        return obj.Id.GetHashCode();
    }
} 
```

Union 仅返回唯一值。

# asp.net-mvc - 多个会员提供者，一个用户

> ID：12873822
> 
> 赞同：1
> 
> 时间：2012-10-13T14:00:59.643
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-membership, membership-provider

我正在学习 ASP.NET MVC 3 并尝试创建一个 Web 应用程序，用户可以在其中上传一些数据并对其进行管理。

这是我的问题：我需要将用户与数据库中的数据相关联，因此我需要用户拥有唯一的 ID。但是，用户需要能够从多个成员资格提供程序（sql 和 ldap）登录。所以我不能假设他们的 ProviderUserKey 是唯一的，也不能假设它是什么类型。

我需要某种方法将不同会员提供者提供的用户合并到一个用户类中，该用户类具有可在我的数据库中使用的唯一用户 ID。谁能给我一些关于如何做到这一点的指示？

我是 ASP.NET MVC 3 框架的新手，所以我不知道这样的东西是否已经存在。

E：我希望业务逻辑忽略用户的登录方式。这无关紧要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T14:24:29.927

他们的**ldap 电子邮件地址**可以提供一个很好的唯一标识符，我在类似的情况下使用过这个。

# extjs - ExtJS 视口面板

> ID：12873823
> 
> 赞同：0
> 
> 时间：2012-10-13T14:01:01.330
> 
> 标签：extjs, panel, viewport, collapsiblepanelextender

我在视口东部区域内有 EXTJS 面板，

```
var viewport = new Ext.Viewport({
    layout: 'border',
    id:'mainviewport',
    monitorResize:false,
    items: [{
        region: 'east',
        xtype: 'panel',
        id:'east-panel',
        header : false,
        headerAsText: false,
        title: 'east panel',
        collapsible: true,
        split: true,
        minSize: 305,
        maxSize: east_panel_width,
        margins: '53 0 0 0',
        cmargins:'53 0 0 0',
        collapsed: true,
        autoScroll: true,
        layout: 'fit',
        html:'<div id="abc" style="height:100%;overflow-x: hidden; overflow-y: auto;"></div>'
    }]
}); 
```

我不想要标题标题所以我给了属性**header: false, headerAsText: false**标题栏被隐藏了，但我想要这个可折叠选项。我怎样才能得到那个可折叠的功能。

是否可以仅隐藏标题文本和背景css，而不会破坏可折叠面板扩展器选项。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T06:31:28.787

即使使用**header: false, headerAsText: false**你在分隔栏的中间也有一个箭头。它用作面板的折叠控件。

# jquery - jQuery：预置 HTML 的正确语法

> ID：12873824
> 
> 赞同：0
> 
> 时间：2012-10-13T14:01:06.647
> 
> 标签：jquery

我是 jQuery 新手，我正在尝试添加一些 HTML。但是，我不断通过 DreamWeaver 收到语法错误。

这是我的代码：

```
 <script type='text/javascript'> 
      $(document).ready(function(){ 
      $(".contentpadded").prepend($unoslider);

      var $unoslider = $('
        <ul id="unoslider" class="unoslider">
            <li><img src="templates/{$template}/img/cloud-hosting.jpg" alt="" /></li>
            <li><img src="templates/{$template}/img/green-hosting.jpg" alt="" /></li>
            <li><img src="templates/{$template}/img/trusted-partners.jpg" alt="" /></li>
        </ul>
        '),
      });
   </script> 
```

我无法弄清楚它有什么问题。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T14:06:46.603

您应该连接字符串，还请注意您的代码中存在冗余`,`。

```
var $unoslider = $('<ul id="unoslider" class="unoslider">'+
                   '<li><img src="templates/{$template}/img/cloud-hosting.jpg" alt=""/></li>' +
                   '<li><img src="templates/{$template}/img/green-hosting.jpg" alt="" /></li>' +
                   '<li><img src="templates/{$template}/img/trusted-partners.jpg" alt="" /></li>' +
                   '</ul>');
$(".contentpadded").prepend($unoslider); 
```

请注意，您应该首先定义变量，然后附加它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T14:09:10.817

将其更改为：

```
 var $unoslider = '\
    <ul id="unoslider" class="unoslider">\
        <li><img src="templates/{$template}/img/cloud-hosting.jpg" alt="" /></li>\
        <li><img src="templates/{$template}/img/green-hosting.jpg" alt="" /></li>\
        <li><img src="templates/{$template}/img/trusted-partners.jpg" alt="" /></li>\
    </ul>\
    '; 
```

以及使用`prepend()`功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T14:15:34.617

演示：http: [//jsfiddle.net/hVjDq/](http://jsfiddle.net/hVjDq/)

有两个变化：1）你的字符串会出现语法错误，因为它没有用“+”连接。2）您正在添加未定义的变量，因此您需要在 html 变量准备好之后放置 prepend 语句。

更新了 js 代码：

```
You missed "+" for concatenation..

var $unoslider = $('<ul id="unoslider" class="unoslider">'+
               '<li><img src="templates/{$template}/img/cloud-hosting.jpg" alt=""/></li>' +
               '<li><img src="templates/{$template}/img/green-hosting.jpg" alt="" /></li>' +
               '<li><img src="templates/{$template}/img/trusted-partners.jpg" alt="" /></li>' +
               '</ul>');
$(".contentpadded").prepend($unoslider); 
```

# c - 应用程序接受以下形式的命令行参数：*argument 但不是形式参数* 或 *argument*

> ID：12873825
> 
> 赞同：1
> 
> 时间：2012-10-13T14:01:36.883
> 
> 标签：c, command-line-arguments

例如，如果我的程序名称是`test.c`

然后对于以下运行命令，`argc = 2`而不是`4`.

`$test abc pqr* *xyz*`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T14:07:08.383

尝试运行：

```
$ echo abc pqr* *xyz* 
```

你就会明白为什么你没有得到`argc`你期望的价值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T14:05:31.067

这可能是因为您的 shell / cmd.exe（没有给出具体细节！）使用`*`as 文件 glob。如果没有找到与 glob 匹配的文件，则结果将为空。

尝试像这样调用你的程序：

```
test abc 'pqr*' 'xyz' 
```

有关 globbing 的详细信息，请参阅[http://en.wikipedia.org/wiki/Glob_%28programming%29](http://en.wikipedia.org/wiki/Glob_%28programming%29)，有关转义 glob 的详细信息，请参阅您的 shell 手册。

# html - HTML5画布游戏玩家移动

> ID：12873826
> 
> 赞同：-2
> 
> 时间：2012-10-13T14:01:39.943
> 
> 标签：html, canvas

我正在研究用 HTML5 画布制作游戏。有没有人知道任何关于如何让玩家用箭头键在屏幕上移动的好网站或教程？我似乎找不到关于如何处理关键事件的像样的教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T15:16:33.650

这很好：

[http://impactjs.com/documentation/animations](http://impactjs.com/documentation/animations)

如何做动画的想法就在那里。

对于键盘事件：

[http://html5.litten.com/moving-shapes-on-the-html5-canvas-with-the-keyboard/](http://html5.litten.com/moving-shapes-on-the-html5-canvas-with-the-keyboard/)

# bash - 列出不包含某些文件的目录？

> ID：12873834
> 
> 赞同：3
> 
> 时间：2012-10-13T14:02:40.080
> 
> 标签：bash, shell, testing, wildcard

我使用这个命令在当前目录中查找所有包含 .mp3 的目录，并且只过滤掉了目录名称：

```
find . -iname "*.mp3" | sed -e 's!/[^/]*$!!' -e 's!^\./!!' | sort -u 
```

我现在想要相反的，但我发现它有点难。我不能只添加一个“！” 到 find 命令，因为它只会在打印时排除 .mp3，而不是查找不包含 .mp3 的目录。

我用谷歌搜索了这个并在 stackoverflow 和 unix.stackexchange.com 上进行了搜索。到目前为止，我已经尝试过这个脚本，它返回这个错误：

```
#!/bin/bash

find . -type d | while read dir
do
if [[! -f $dir/*.mp3 ]]
then
    echo $dir
fi
done 
```

/home/user/bin/try.sh: 第 5 行: [[!: command not found

```
#!/bin/bash

find . -type d | while read dir
do
if [! -f $dir/*.mp3 ]
then
    echo $dir
fi
done 
```

/home/user/bin/try.sh：第 5 行：[！：找不到命令

```
#!/bin/bash

find . -type d | while read dir
do
if [[! -f "$dir/*.mp3" ]]
then
    echo $dir
fi
done 
```

/home/user/bin/try.sh：第 5 行：[！：找不到命令

我认为这与 test 命令的多个参数有关。

由于我正在测试所有目录，因此变量将发生变化，并且我使用通配符作为文件名。

任何帮助深表感谢。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T14:07:16.310

```
[ "$(echo $dir/*.mp3)" = "$dir/*.mp3" ] 
```

应该管用。

或者只是在 '[' 和 '!' 之间添加一个空格

一种可能明显更快的方法是

```
if find "$dir" -name '*.mp3' -quit ; then
  : # there are mp3-files in there.
else
  ; # no mp3:s
fi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T16:34:30.747

好的，我通过使用计数器解决了我自己的答案。

我不知道它的效率如何，但它确实有效。我知道它可以做得更好。请随时批评。

```
find . -type d | while read dir
do
count=`ls -1 "$dir"/*.mp3 2>/dev/null | wc -l`
    if [ $count = 0 ]
    then
        echo $dir
    fi
done 
```

这将打印所有不包含 MP3 的目录。由于 find 命令递归地打印目录，它还显示子目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-30T16:48:26.260

我运行了一个脚本来自动下载我的 mp3 收藏的封面艺术。它在每个专辑的目录中放置一个名为“cover.jpg”的文件，它可以检索到它的艺术作品。我需要检查脚本失败的专辑——即哪些CD（目录）不包含名为cover.jpg 的文件。这是我的努力：

```
find . -maxdepth 1 -mindepth 1 -type d | while read dir; do [[ ! -f $dir/cover.jpg ]] && echo "$dir has no cover art"; done 
```

maxdepth 1 阻止 find 命令下降到我的 WD My Cloud NAS 服务器为每个专辑创建并放置默认通用光盘映像的隐藏目录。（这在下一次扫描期间被清除。）

编辑： cd 到 MP3 目录并从那里运行它，或者更改 . 在上面的命令中指向指向它的路径。

# javascript - 在鼠标移出时隐藏 ui 日期选择器

> ID：12873840
> 
> 赞同：1
> 
> 时间：2012-10-13T14:03:28.190
> 
> 标签：javascript, jquery, jquery-ui

我认为这不起作用，因为它在输入上执行鼠标移出。但是我将如何选择 datepicker 的当前实例来添加 hide 方法？

```
$("input.datePicker").datepicker().mouseout(function() {
    $(this).datepicker("hide");    
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T14:16:27.680

您需要将`datepicker`类本身定位为选择器：

```
$('.ui-datepicker').mouseleave(function(){
    $("input.datePicker").datepicker('hide').blur()

}); 
```

由于日期选择器是动态生成的，因此需要在小部件初始化后调用它。

工作演示：http: [//jsfiddle.net/nBmcY/2/](http://jsfiddle.net/nBmcY/2/)

编辑：还添加了输入的触发模糊，因此如果出现错误，用户可以立即单击相同的字段。

# codeigniter - Codeigniter 配置文件从模型或控制器更改

> ID：12873845
> 
> 赞同：2
> 
> 时间：2012-10-13T14:03:57.243
> 
> 标签：codeigniter, model, controller, config

我们如何从模型或控制器编辑配置文件详细信息...？我想根据用户的位置更改货币...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T14:07:37.197

来自 Codeigniter 用户指南 -[设置配置项](http://codeigniter.com/user_guide/libraries/config.html)

有了这个：

```
$this->config->set_item('item_name', 'item_value'); 
```

您可以即时更改配置项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-17T10:57:47.883

您可以将配置文件作为通用文件读取`*.txt`，然后解析并更改您需要的内容。例如，您想在File中更改`$config['is_admin_configured']`to的值。那么下面是这个例子。您可以对其进行修改以供进一步使用。`TRUE``config.php`

**例子**

```
$out = '';
$pattern = '$config[\'is_admin_configured\']';
$newValue = 'TRUE';
$filename = "application/config/config.php";
echo $filename;
if (file_exists($filename)) {
  $file = fopen($filename, 'r+');
  while (!feof($file)) {
    $line = fgets($file);
    if (strpos($line, $pattern) !== false) {
      $out .= $pattern . "=" .$newValue .";";
      echo $newValue;
    } else {
      $out .= $line;
    }
  }
  file_put_contents($filename, $out);
  fclose($file);
} else {
  echo ' File not found';
} 
```

# matlab - 使用 MATLAB 绘制地毯图

> ID：12873846
> 
> 赞同：0
> 
> 时间：2012-10-13T14:04:05.540
> 
> 标签：matlab

我必须用 MATLAB 创建一个[地毯图](http://en.wikipedia.org/wiki/Carpet_plot)（或光栅图）。该图表示一年中每小时的用电量。

在我的实际实现中，我有一个包含消耗值的 amxn 矩阵（m 是一天中的小时数，n 是一年中的天数）。为了获得地毯图，我使用了`surf`功能设置`view(0,-90)`。

问题是 MATLAB 用与围绕该“单元”的 4 个消耗值的插值相关的颜色表示表面的每个“单元”，而我需要表面的每个单元表示矩阵的单个值。

有没有办法用 MATLAB 获得我需要的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T14:07:22.030

`surf`用于制作 3 维曲面图。

您想要一个二维热图 - 尝试查看 和 的`help imagesc`输出`help image`。

# php - 为什么我收到重复键警告

> ID：12873847
> 
> 赞同：1
> 
> 时间：2012-10-13T14:04:11.450
> 
> 标签：php, sql, database, mysqli

我在下面有一个“问题”数据库表：

```
SessionId (PK)    QuestionId (PK)  QuestionContent

MUL                    1           What is 2+2 and 3+3?
MUL                    2           Name three things you will find in a car?
MUL                    3           What are the four seasons? 
```

以下是我在 mysqli 中收到的错误：

> 第 242 行 /.../ 中键 'PRIMARY' 的重复条目 'RZC-1'
> 
> 警告：mysqli_stmt::execute(): (23000/1062): /.../第 242 行中键 'PRIMARY' 的重复条目 'RZC-2'
> 
> 警告：mysqli_stmt::execute(): (23000/1062): /.../第 242 行中键 'PRIMARY' 的重复条目 'RZC-3'

为什么我收到关于重复条目的错误，因为我已经说明在问题表中，“SessionId”和“QuestionId”都是主键。我是否需要执行 SQL 语句来提及它们都是复合键？

下面是将值插入“问题”表的 mysqli 代码：

```
 var_dump($_POST);  

    $i = 0;
    $c = count($_POST['numQuestion']);

    for($i = 0;  $i < $c; $i++ ){

     $questionsql = "INSERT INTO Question (SessionId, QuestionId, QuestionContent) 
        VALUES (?, ?, ?)";

        $sessid =  $_SESSION['id'] . ($_SESSION['initial_count'] > 1 ? $_SESSION['sessionCount'] : '');

        if (!$insert = $mysqli->prepare($questionsql)) {
          // Handle errors with prepare operation here
        }

    $insert->bind_param("sis", $sessid, $id, $_POST['questionText'][$i]);

            $insert->execute();

            if ($insert->errno) {
              // Handle query error here
            }

            $insert->close();
} 
```

更新：

描述问题；

```
Field            Type          Null   Key  Default  Extra

SessionId        varchar(10)   NO     PRI  NULL
QuestionId       int(10)       NO     PRI  NULL
QuestionContent  varchar(5000) NO          NULL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T15:41:31.580

```
$i = 0;
$c = count($_POST['numQuestion']);

for($i = 0;  $i < $c; $i++ ){
.....
$insert->bind_param("sis", $sessid, $id, $_POST['questionText'][$i]); 
```

看起来对于相同的 $sessid, $id 您在循环中插入 $c 次行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T14:36:33.793

在create table语句中，需要声明复合主键：

```
create table question (
sessionid char,
questionid int,
questioncontent varchar,
primary key(sessionid, questionid)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T15:50:28.170

```
for($i = 0;  $i < $c; $i++ ){
    $questionsql = "INSERT INTO Question (SessionId, QuestionId, QuestionContent) 
                    VALUES (?, ?, ?)";

    $sessid =  $_SESSION['id'] . ($_SESSION['initial_count'] > 1 ? $_SESSION['sessionCount'] : '');

    if (!$insert = $mysqli->prepare($questionsql)) {
      // Handle errors with prepare operation here
    }

    $insert->bind_param("sis", $sessid, $id, $_POST['questionText'][$i]);
    $insert->execute();

    if ($insert->errno) {
       // Handle query error here
    }

    $insert->close();
} 
```

* * *

## 2个问题：

1.  您不止一次循环和执行相同的值。要么是新的`$id`，要么`$sessid`需要在循环内设置 - 或者你应该完全取消循环。

2.  你应该在循环之外设置你的 SQL 和 Prepare 语句——它们不会改变，而且你违背了 prepare 语句的目的。我的猜测是你放错了循环，只需要循环`bind_param()`and`execute()`语句

# java - 正则表达式替换=在java中的标签中的href属性之后

> ID：12873849
> 
> 赞同：2
> 
> 时间：2012-10-13T14:04:21.223
> 
> 标签：java, html, regex

我做了一个正则表达式来替换“a”标签中“href”之后的“=”：

```
output.replaceAll("(<a.*)href=(.*>)", "$1href" + replacemantstring+ "$2"); 
```

问题在于它只替换了最后一次出现的“=”在href ...

我做错了什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T14:08:07.193

您需要将通配符从*greedy* `.*`更改为*non-greedy* `.*?`。这将使您的正则表达式在第一次`href=`匹配时停止，因此也匹配以下出现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T14:10:25.310

如果要将参数中的链接替换`href`为`newURL`，请使用

```
output.replaceAll("(?i)(<a[^>]*?\\shref\\s*=)(['"]).*?\\2", "$1$2" + newURL + "$2"); 
```

* * *

**编辑：**如果你想在标签`=`后面替换，然后使用`href``<a>`

```
output.replaceAll("(?i)(<a[^>]*?\\shref\\s*)=", "$1" + replacement); 
```

# internet-explorer - IEObject.document 权限被拒绝错误 - 任何建议

> ID：12873852
> 
> 赞同：1
> 
> 时间：2012-10-13T14:04:50.630
> 
> 标签：internet-explorer, vba, excel, domdocument

我正在尝试使用 vba 自动化 Internet Explorer，下面是我的代码：

```
Sub go_IE()
Dim objIE As SHDocVw.InternetExplorer
Dim htmlColl As MSHTML.IHTMLElementCollection
Dim htmlInput As MSHTML.HTMLInputElement
Dim htmlDoc As MSHTML.HTMLDocument

Set objIE = New SHDocVw.InternetExplorer

objIE.Visible = True

objIE.Navigate "example.com/abc/home/" 'load web page google.com

While objIE.Busy
  DoEvents  'wait until IE is done loading page.
Wend

Set htmlDoc = objIE.Document 'htmlDoc now holds home page

Set htmlColl = htmlDoc.getElementsByTagName("button")

For Each htmlInput In htmlColl

                    If htmlInput.Type = "submit" Then
                        htmlInput.Click     ' click on the submit button
                    End If

Next htmlInput

While objIE.Busy
  DoEvents  'wait until IE is done loading page.
Wend

Set htmlDoc = objIE.Document

Set htmlColl = htmlDoc.getElementsByTagName("button")

For Each htmlInput In htmlColl

                    If htmlInput.Type = "submit" Then
                        htmlInput.Click     ' click on the submit button
                    End If

Next htmlInput

While objIE.Busy
  DoEvents  'wait until IE is done loading page.
Wend

objIE.Quit

End Sub 
```

一旦我点击主页并导航到下一页，下面的行没有给我任何东西：

`Set htmlDoc = objIE.Document`

它只是说权限被拒绝。

我做了很少的研究，发现这与同源政策有关。但是我检查了，点击主页中的提交按钮后，网址没有改变。

任何机构可以帮助我解决这个问题或任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-06T04:00:42.907

您可以考虑使用 xmlHTTP 对象而不是使用 IE。
HTTP 请求更简单，更快

下面是示例代码

```
Sub xmlHttp()

    Dim URl As String, lastRow As Long
    Dim xmlHttp As Object, html As Object, objResultDiv As Object, objH3 As Object, link As Object

    lastRow = Range("A" & Rows.Count).End(xlUp).Row

    For i = 2 To lastRow

        URl = "https://www.google.co.in/search?q=" & Cells(i, 1)

        Set xmlHttp = CreateObject("MSXML2.XMLHTTP")
        xmlHttp.Open "GET", URl, False
        xmlHttp.setRequestHeader "Content-Type", "text/xml"
        xmlHttp.send

        Set html = CreateObject("htmlfile")
        html.body.innerHTML = xmlHttp.ResponseText
        Set objResultDiv = html.getelementbyid("rso")
        Set objH3 = objResultDiv.getelementsbytagname("H3")(0)
        Set link = objH3.getelementsbytagname("a")(0)

        str_text = Replace(link.innerHTML, "<EM>", "")
        str_text = Replace(str_text, "</EM>", "")

        Cells(i, 2) = str_text
        Cells(i, 3) = link.href
    Next
End Sub 
```

![在此处输入图像描述](../Images/1a5f099ad969f3b82ca4c9d55df53baa.png)

HTH
**桑托什**

# assembly - 多个 CPU Fetch Execute 周期如何同步？

> ID：12873853
> 
> 赞同：1
> 
> 时间：2012-10-13T14:05:07.913
> 
> 标签：assembly, concurrency, operating-system, hardware

TSET 是不可分割的机器代码指令，它可以做几件事。考虑其逻辑如下：

```
TSET(X)
if (x == 0) {
    x = 1;
    return true;
} else
    return false; 
```

根据经典的操作系统教科书，它是线程同步所依赖的。信号量实现可能会使用它。因为它是不可分割的，所以即使在同一个 CPU 上发生不及时的线程切换时，它也可以用来保护临界区的入口。（我）已经很好地理解了它在*单个CPU 上的使用。*

这就是我缺乏硬件知识的地方：如果不同 CPU 上的两个竞争线程“同时”发出相同的 TSET(x) 怎么办。这让我问是否（以及如何）每个 CPU 的 fetch 执行周期是*同步*的。是不是 CPU1 上的一条指令发生，然后是 CPU2 上的一条指令，然后是 CPU1 上的一条指令？这是这样做的吗？我说得有道理吗？我回答了我自己的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T14:15:14.553

`x`这个魔法指令应该是原子的/不可分割的，IOW，在它与 0 比较的时间和它设置为 1 的时间之间应该没有什么可以改变的。

这是它的全部意义。如果你仔细阅读你的书，你会看到一些糟糕的竞争条件的例子，其中类似的代码（读取/比较+修改）由于非原子性而惨遭失败（有这样的词吗？）。

你自己想想。

如果这条指令不是原子的，并且由于不幸的调度而按此顺序执行了 2 个并发线程/进程，会发生什么？：

```
1: if (x==0)
2: if (x==0)
1: x=1, return true
2: x=1, return true 
```

两个线程/进程都会认为他们已经获得了对该锁变量`x`保护访问的某个对象的独占访问权。不好。

# c# - C# Groupby Linq 和 foreach

> ID：12873855
> 
> 赞同：29
> 
> 时间：2012-10-13T14:05:35.600
> 
> 标签：c#, linq

我需要一种更有效的方法来从我的数据组中生成多个文件。我使用一种`List<MyObject>`类型，我的对象有一些公共属性，我需要在其中对数据进行分组。

我听说过*Linq*，它听起来像是我可以使用的东西。但是我不知道该怎么做。

我需要为每个州生成一个文本文件，因此`MyObjects`按州对所有（人）进行分组，然后`foreach`对他们进行查看以构建 TEXT 文件。

```
void Main()
{

    List<MyObject>   lst = new List<MyObject>();
    lst.Add(new MyObject{ name = "bill", state = "nsw", url = "microsoft.com"});
    lst.Add(new MyObject{ name = "ted",  state = "vic", url = "apple.com"});
    lst.Add(new MyObject{ name = "jesse", state = "nsw", url = "google.com"});
    lst.Add(new MyObject{ name = "james", state = "qld", url = "toshiba.com"});

    string builder = "";
    foreach (MyObject item in myObjects)  {

        builder += item.name + "\r\n";
        builder += item.url + "\r\n" + "\r\n\r\n";

    }

and out to the `StreamWriter` will be the filenames by state. 
```

对于上述数据，我总共需要 3 个文件；

```
-nsw.txt
-vic.txt
-qld.txt 
```

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-10-13T14:17:29.513

大概是这样的吧？

```
 var groups = lst.GroupBy(x => x.state);

    foreach (var group in groups) 
    {
        using (var f = new StreamWriter(group.Key + ".txt"))
        {
            foreach (var item in group)
            {
                f.WriteLine(item.name);
                f.WriteLine(item.url);
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-13T14:11:44.030

你定义。可以在这里使用 LINQ。

```
lst.GroupBy(r=> r.state).ToList().ForEach(r=> {
        //state= r.Key
        //

        foreach (var v in r)
        {

        }
    }); 
```

关于linq的事情。如果您想知道如何在其中做某事。想想“我将如何在 SQL 中做到这一点”。关键字大部分是相同的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-13T14:15:45.667

您实际上可以使用 LINQ 生成整个内容：

```
var entryFormat = "{1}{0}{2}{0}{0}{0}";
var groupsToPrint = lst
   .GroupBy(p => p.state)
   .Select(g => new 
    {
       State = g.Key,
       // produce file content on-the-fly from group entries
       Content = string.Join("", g.Select(v => string.Format(entryFormat, 
           Environment.NewLine, v.name, v.url)))
    });

var fileNameFormat = "{0}.txt";
foreach (var entry in groupsToPrint)
{
    var fileName = string.Format(fileNameFormat, entry.State);
    File.WriteAllText(fileName, entry.Content);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T14:14:45.543

就像是...

```
string builderNsw = "";
foreach (MyObject item in lst.Where(o=>o.state == 'nsw'))  {

    builderNsw += item.name + "\r\n";
    builderNsw += item.url + "\r\n" + "\r\n\r\n";

} 
```

...但可能有很多方法可以实现这一目标。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-14T08:55:00.793

同上 - 逐组遍历组，也可以获得组名

```
 int itemCounter = 1;
    IEnumerable<DataRow> sequence = Datatables.AsEnumerable();

    var GroupedData = from d in sequence group d by d["panelName"];      // GroupedData is now of type IEnumerable<IGrouping<int, Document>>

    foreach (var GroupList in GroupedData) // GroupList = "document group", of type IGrouping<int, Document>
    {          
      bool chk = false;
      foreach (var Item in GroupList)
      {

        if (chk == false) // means when header is not inserted
        {
          var groupName = "Panel Name : " + Item["panelName"].ToString();

          chk = true;
        }
        var count = itemCounter.ToString();
        var itemRef = Item["reference"].ToString();

        itemCounter++;
      }
    } 
```

# facebook - 从 php 脚本发布到 facebook 页面

> ID：12873860
> 
> 赞同：2
> 
> 时间：2012-10-13T14:06:21.577
> 
> 标签：facebook, facebook-opengraph

我正在使用此代码发布到我的用户个人资料页面，发布到我的个人资料时效果很好（我在 $id 中设置了我的 Facebook 用户 ID），但是当我尝试发布到我的 Facebook 页面（不是我的个人资料页面) 我在 $id 中设置了 facebook 页面 id，然后脚本不再工作，我收到以下错误

```
{"error":{"message":"(#200) The user hasn't authorized the application to perform this action","type":"OAuthException","code":200}} 
```

这是我的代码

```
<?php
class Facebook
{
    /**
     * @var The page id to edit
     */
    private $id = '<FACEBOOKPAGEID>';

    /**
     * @var the page access token given to the application above
     */
    private $app_access_token = "<MYAPPACCESSTOKEN>";
    /**
     * @var The back-end service for page's wall
     */
    private $post_url = '';
    /**
     * Constructor, sets the url's
     */
    public function Facebook()
    {
        $this->post_url = 'https://graph.facebook.com/' . $this->id .'/feed';
    }
    /**
     * Manages the POST message to post an update on a page wall
     *
     * @param array $data
     * @return string the back-end response
     * @private
     */
    public function message($data)
    {
        // need token
        $data['access_token'] = $this->app_access_token;
        // init
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, $this->post_url);
        curl_setopt($ch, CURLOPT_POST, 1);
        curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        // execute and close
        $return = curl_exec($ch);
        curl_close($ch);
        // end

        return $return;
    }
}
$facebook = new Facebook();
echo "<pre>";
echo $facebook->message(array( 'message'     => 'Message',
                          'link'        => 'http://www.mylink.com/',
                          'picture'  => 'http://www.mylink.com/pic.jpg',
                          'description' => 'My description' ) );
echo "</pre>";

?> 
```

我正在使用 app_access_token 因为它不会改变，而且我不需要登录 facebook 就可以发布到我的 facebook 页面

关于为什么这适用于我的个人资料页面而不适用于我的 Facebook 页面的任何想法？

# android - 夏洛克片段中的 Android 选项卡和 achartengine 中的图表

> ID：12873861
> 
> 赞同：1
> 
> 时间：2012-10-13T14:06:31.677
> 
> 标签：android, actionbarsherlock, achartengine

我正在使用 achartengine 库来绘制图表，并使用 sherlock 库来在选项卡中滑动，但是当我从 tab1 切换到 tab2 并且 tab2 具有显示数据的饼图时。

当我从选项卡 1 滑动到选项卡 2（即从右到左）时，饼图设置在 .xml 布局中父级的中心，但我面临的问题是滑动时---->饼图图表也向左侧移动并从左侧切割，t 由于在饼图上启用了平移，我们可以移动它并在中心重新对齐。我希望我的饼图不应该移动到左侧，并且应该只在滑动时在中心对齐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T15:23:32.070

尝试执行以下操作以修复该行为。

```
mRenderer.setInScroll(true); 
```

# linux - 用破折号画一个线段

> ID：12873865
> 
> 赞同：0
> 
> 时间：2012-10-13T14:06:54.680
> 
> 标签：linux, graphics, drawing, lines

我需要为我正在编写的文档绘制一个带有破折号的水平线段。我需要以这种方式细分段长度：给定`l`，然后是段`n`的长度和每一步剩余长度的分数，第一个破折号应该`first=l/n`从左边开始，第二个在`1/n + (l-first)/n`等等（直到除法返回一个数小于一）

在不使用编程语言的情况下，我可以使用什么工具来自动绘制它？或者......什么脚本可以做到这一点？

我需要 png/jpg 中的图像作为最终结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T07:25:31.923

如果您需要以编程方式执行此操作，那么[徽标编程语言](http://en.wikipedia.org/wiki/Logo_%28programming_language%29)可能是您的工具。它也可以很容易地使用`LATEX`和`TikZ`打包完成，在这种情况下，您可以咨询[TEX-LATEX 站点](http://tex.stackexchange.com)，还可以查看[用于创建图像的库，](https://stackoverflow.com/questions/12887428/scala-library-for-image-creation)那里的所有答案都链接到有用的资源，这可能有点矫枉过正你需要什么，但会工作。如果不必以编程方式完成，您可以使用[Gimp](http://www.gimp.org)或[InkScape](http://inkscape.org)创建图像，但如果您需要创建许多这样的虚线，最好自动化该过程，我不知道这些工具是否有*批量操作*功能，如 Photoshop。

# cocos2d-iphone - 使用 CCAction 和 CCCallFunc/CCCallBlock 保持循环

> ID：12873866
> 
> 赞同：2
> 
> 时间：2012-10-13T14:07:05.233
> 
> 标签：cocos2d-iphone, automatic-ref-counting, retain

我正处于发布我的第一个游戏的最后阶段，在运行 Instruments:Leaks & Allocations 之后，我发现我的代码中有一个由保留周期引起的泄漏。我正在使用 Cocos2d 2.0，并使用 ARC 编译我的应用程序，我应该提到我在 ARC 之前启动了项目，并使用 Xcode 重构工具对其进行了转换。我的游戏每个屏幕都有几个动画对象，每个对象都有少量 (1-7) 动画“变体”该对象（即谷仓打开一次显示一匹马，另一次显示一匹斑马）。我有一个代表每个动画的类，以及每个变体的另一个类。该变体从一系列帧创建一个 CCAnimation，然后创建一个动作，该动作将在正确区域收到触摸事件时运行。此操作是导致我的保留周期的原因。

```
@interface AnimationVariant : NSObject
{
@private
    CCAction*  _action;
...
}
@property (readonly, nonatomic) CCAction* action;
...

-(void) setupActionWithMask:(int)mask
                     cycles:(int)cycles
                   hasScale:(bool)hasScale
                      scale:(float)scale
                masterScale:(float)master_scale
                  animationFrames:(NSArray*) frames
                   duration:(float)duration
                   andBlock:(VoidBlock)block;

@end 
```

在 setupActionWithMask 方法的实现中，我建立了一个 CCActions 的 NSMutableArray，actionList。CCActions 的顺序取决于 args，但通常看起来像这样：

```
[actionList addObject:[CCScaleTo actionWithDuration:0.0f scale:scale]];
[actionList addObject: [CCAnimate actionWithAnimation:animation] ];
[actionList addObject:[CCScaleTo actionWithDuration:0.0f scale:master_scale]];
[actionList addObject: [CCCallBlock actionWithBlock:block]]; 
```

我创建了这样的动作：

```
_action = [CCSequence actionMutableArray:actionList]; 
```

消费类创建一个 AnimationVariant 实例，设置它的属性，调用 setupActionWithMask，并传入一个它想要在动作完成时执行的块。当消费类想要播放动画变体时，它会这样做：

```
[self runAction: variant.action]; 
```

我尝试将 _action 声明为：

```
CCAction* __unsafe_unretained _action; 
```

这当然打破了保留周期，但是该操作被破坏了，并且在需要时不再存在（这是您所期望的，因为 __unsafe_unretained 不保留）。我知道 __weak 是推荐的解决方案，但由于我的目标是 iOS 4 及更高版本，我认为它不适合我。

我的代码中有另一个保留周期，就像这个一样，也是由保留（当然是自动使用 ARC）包含 CCCallFunc/CCCallBlock 的 CCSequence 引起的。我通过在需要时重新创建它来解决这个问题，在这种情况下我也可以这样做，但是这些动画在整个游戏中可能会触发几百次，所以我希望遵循推荐的 Cocos2d 最佳实践并保留动作。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T20:37:33.997

保留操作不是最佳做法。这甚至不是一个好习惯。尽管很多人强烈推荐它，但很不幸。

保留操作在许多情况下有效，但在其他情况下失败，导致对象泄漏。我猜你的情况可能就是其中之一。

由于您的目标是 iOS 4，因此您不能使用弱引用。但您可能应该重新考虑，除非您必须针对剩余的少数第一代和第二代设备。否则，请谷歌了解 iOS 5 的采用率。少数尚未更新的设备远低于合理的阈值，特别是如果您认为这些用户可能不再购买（许多）应用程序。

由于您的意思是 CCCallFunc，请确保您不使用它们并替换为 CCCallBlock。CCCallFunc 与 ARC 一起使用并不安全，尤其是当您必须 __bridge_transfer 将数据对象强制转换为 void* 时（也是不好的做法）。

总是有可能永远不会发生必要的桥接回原始对象，然后 ARC 没有机会清理该对象。使用 CCCallFunc，当您运行调用 func 操作但该操作在调用回调选择器之前停止时可能会发生这种情况，例如通过更改场景或停止操作/序列。

如果不遵循这条规则，Cocos2D 也容易出现保留循环：

*   任何节点都应该只保留另一个节点，它是它的子节点或孙子节点之一

在所有其他情况下（即节点保留（祖）父节点或兄弟节点），您必须确保在 -(void) 清理方法中将这些引用归零。在 -(void) dealloc 中这样做为时已晚，因为当存在保留周期时，对象永远不会到达 dealloc。

# ruby - Ruby 基类调用子类，就像在抽象类中一样

> ID：12873873
> 
> 赞同：2
> 
> 时间：2012-10-13T14:07:34.273
> 
> 标签：ruby, oop, inheritance

在 Java 中，我习惯于编写一个抽象类来完成一些设置工作，然后像这样委托给具体类：

```
public abstract class Base {
    public void process() {
        // do some setup
        //...

        // then call the concrete class
        doRealProcessing();
    }

    protected abstract void doRealProcessing();
}

public class Child extends Base {
    @Override
    protected void doRealProcessing() {
        // do the real processing
    } 
} 
```

我在 Ruby 中很难做到这一点，因为我没有抽象类或方法。我还读到“你不应该在 Ruby 中**需要**抽象类或方法，我应该停止尝试用 Ruby 编写 Java”。

我很想知道在 Ruby 中实现等价的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T14:11:58.470

欢迎使用动态类型语言！您可能对定义一些未在任何地方声明的函数感到紧张。不要担心。这很容易：

```
class Base
  def process
     # ...
     real_processing
  end

  def real_processing    # This method is optional!
    raise "real_processing not implemented in #{self.class.name}"
  end
end

class Child < Base
   def real_processing
     # ...
   end
end

b = Child.new
b.process 
```

**编辑：**这是您的另一个选择，它避免了需要有两个不同的方法名称：

```
class Base
  def process
    # ...
  end
end

class Child < Base
  def process
    # ...
    super   # calls the process method defined above in Base
    # ...
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T14:14:14.920

以下是在 Ruby 中执行模板模式的方法：

```
class Template
  def template_method
    perform_step1
    perform_step2
    #do some extra work
  end

  def perform_step1
    raise "must be implemented by a class"
  end

  def perform_step2
    raise "must be implemented by a class"
  end
end

class Implementation < Template
  def perform_step1
    #implementation goes here
  end

  def perform_step2
    #implementation goes here
  end
end 
```

[http://andymaleh.blogspot.com/2008/04/template-method-design-pattern-in-ruby.html](http://andymaleh.blogspot.com/2008/04/template-method-design-pattern-in-ruby.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T21:16:13.383

对于这个用例，您在 Ruby 中看不到太多这样的内容，因为模式

*   做一些家庭设置（例如连接到资源）
*   用它做一些真实的事情
*   拆解家务（fi close connection）

烘焙成普通方法：

```
# pseudocode:
def a_method(an_argument)
  # do some setup with an_argument
  yield(a_result)
  # do some teardown
end

# use like:
a_method(the_argument){|the_result| puts "real processing with #{the_result}"} 
```

# tomcat - org.apache.catalina.authenticator.SingleSignOn 阀门可移植性

> ID：12873877
> 
> 赞同：2
> 
> 时间：2012-10-13T14:08:10.807
> 
> 标签：tomcat, tomcat-valve

我正在考虑使用 tomcat`org.apache.catalina.authenticator.SingleSignOn`阀门进行单点登录，如此[处所述](http://tomcat.apache.org/tomcat-6.0-doc/config/host.html#Single_Sign_On)

如果我采用这种方法，如果我决定将我的应用程序从 tomcat 移动到另一个 Web 容器（例如 jboss、glassfish、weblogic 或 websphere），我需要对我的应用程序做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T00:00:43.953

好消息是 Tomcat 的 SSO 不应该要求您更改有关 web 应用程序的任何内容。这意味着你的 webapps 仍然是完全可移植的——至少是单独的。

如果您想迁移到 Websphere，则必须弄清楚如何使用该容器的 SSO 机制。

# iphone - 如何使用 MKmapview 添加“到此处的路线”功能？

> ID：12873878
> 
> 赞同：0
> 
> 时间：2012-10-13T14:08:09.930
> 
> 标签：iphone, ios, xcode, mkmapview

因此，我将我的应用程序设置为在按下按钮时搜索用户的位置。

```
-(IBAction)getLocation {
mapview.showsUserLocation = YES;} 
```

然后我在使用这个加载地图视图时也设置了一个地图注释到某个位置

```
- (void)viewDidLoad{
     [super viewDidLoad];
// Do any additional setup after loading the view.

     [mapview setMapType:MKMapTypeStandard];
     [mapview setZoomEnabled:YES];
     [mapview setScrollEnabled:YES];

     MKCoordinateRegion region = { {0.0, 0.0 }, {0.0, 0.0 } };
     region.center.latitude = 123;
     region.center.longitude = 123;
     region.span.longitudeDelta = 0.01f;
     region.span.latitudeDelta = 0.01f;
     [mapview setRegion:region animated:YES];

     NewClass *ann = [[NewClass alloc] init];
     ann.title = @"Place to go to";
     ann.subtitle = @"subtitle";
     ann.coordinate = region.center;
     [mapview addAnnotation:ann]; 
```

}

是否可以使用 MapKit 在我的注释中添加“到这里的路线”按钮？任何帮助都是极好的！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T14:57:25.173

要添加标注配件，您必须按照 Anna Karenina 的说明进行操作。

要绘制路线本身，您必须首先获取路线，有很多优秀的 API 可以为您提供两个给定点之间的路线，甚至允许您设置参数，例如您想要包含的路线类型。[Google Directions](https://developers.google.com/maps/documentation/directions/) API 在这方面给人留下了深刻的印象。你应该检查一下。

Then you have to draw the route itself with [`MKPolyline`](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKPolyline_class/Reference/Reference.html). You can check a [toy app](https://github.com/volonbolon/Directions) i put together a few months ago to show how to do this.

# artificial-intelligence - “蒙特卡洛树搜索”可以应用于像 Stratego 这样的“信息不完全的两人游戏”吗？

> ID：12873879
> 
> 赞同：5
> 
> 时间：2012-10-13T14:08:37.573
> 
> 标签：artificial-intelligence, minimax, alpha-beta-pruning

我想开发一个信息不完全的两人游戏——“Stratego”。

这场比赛“有点”像国际象棋，但最初我们对对手棋子的排名一无所知。当一个棋子攻击或被某个对手的棋子攻击时，他们的等级被揭示并且更高等级的棋子杀死/捕获更低等级的棋子。可以在[此处](http://en.wikipedia.org/wiki/Stratego)找到有关游戏的更多详细信息。

我做了一点研究。我读了 JA Stankiewicz 的“Stratego 中的对手建模”。但是我找不到有关如何开发游戏的完整教程。我曾成功开发过一款两人游戏——“黑白棋”，又名黑白棋，我熟悉 MINIMAX 算法和 alpha-beta 修剪。

我在某处发现蒙特卡洛树搜索也用于开发零和二人游戏。它可以用于像战略这样的游戏吗？我可以获得相同的完整教程吗？

任何其他不涉及蒙特卡洛树搜索的教程也很有用:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T21:58:21.617

我认为 MCTS 在 Stratego 中会遇到困难，因为初始传播函数非常大，而最好的游戏非常依赖于游戏的真实情况。也就是说，在最好的情况下，MCTS 会给你一个在你对手棋子的*所有可能*变化中统计上很好的游戏，但最好的下一步行动在很大程度上取决于他们选择了哪种特定变化。

我仍然对 MCTS 有深入的了解，但在我看来，MCTS 在涉及隐藏信息的多轮欺骗性游戏很重要的游戏中表现不佳（扑克，规范，但战略，我也会说）。在此类游戏中，您确实需要开发其他玩家情况/策略的模型，而 MCTS 本质上将为您提供与*所有*树统计相关的答案，而不仅仅是地面实况树。

MCTS 适用于涉及大量机会的游戏（西洋双陆棋和其他涉及骰子和许多纸牌游戏的棋盘游戏），在我看来，它是一种出色的通用解决方案，可以迅速应用于大量现代“欧式”棋盘游戏。（有趣的是，尽管它们涉及“欺骗性策略”，但它们通常涉及的隐藏信息相对较少。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T17:20:03.117

我不知道任何 MCTS 信息不完整，而且似乎需要对算法进行大量修改才能使其正常工作。

即使在每边只有十个棋子、只有两种棋子和只有一个“更强”棋子的非常受限类型的 Stratego 中，你仍然在玩十种可能的实际游戏中的一种。在一个完整的策略游戏中，由于起始位置的组合数量众多，而且看起来都很相似，因此不确定性要大得多。

似乎您还必须增强算法以捕获“显示的知识”，因为它发生了，例如，在我们的玩具示例中，每个碎片之间的相遇都会揭示一些关于敌人位置的信息。

尝试一下似乎很有趣，但最初只是针对一个非常受限的类似战略的问题，并且理解现成的 MCTS 是不够的，您必须仔细深入地考虑正确的扩展到算法。

# android - 如何在视图上方放置 Android ListView - 不占用全部空间

> ID：12873880
> 
> 赞同：4
> 
> 时间：2012-10-13T14:08:37.357
> 
> 标签：android, android-layout

为了允许用户提交评论，我有 2 个视图，垂直堆叠。一个 ListView 用于显示输入的评论和一个 LinearLayout 页脚，用于允许用户添加评论（基本上是一个 EditText 和一个按钮）。

页脚必须锚定到屏幕的底部，并且 ListView 必须位于其上方。它类似于您在添加评论时在 Android 版 Facebook 上看到的内容。

但是*我不希望 ListView 最初占用全部空间*- 我希望它只占用显示其行所需的空间，但能够在用户添加评论时*增长到*剩余空间 - 同时始终保持页脚布局上方。

我已经尝试过这里建议的 LinearLayout [Android: How can you align a button at the bottom and listview above?](https://stackoverflow.com/questions/4936553/android-how-can-you-align-a-button-at-the-bottom-and-listview-above)

但是，这会导致 ListView 占用页脚上方的所有空间 - 当只有几个评论时 - 所以它主要是空的并且看起来很奇怪。

我尝试了一个 RelativeLayout 父级，其中页脚使用`android:layout_alignParentBottom="true"`...定位在页脚上方的 ListView 使用`android:layout_above="@id/footerLayout"`强制与上述相同的行为（ListView 占用所有剩余空间）...删除它允许 ListView '增长' 但如果它变得太大，它会与页脚重叠。

干杯。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T14:47:41.527

我想这个解决方法会奏效！

```
<LinearLayout
    layout_width="MATCH_PARENT"
    layout_height="MATCH_PARENT"
    orientation="vertical">
    <LinearLayout
        layout_width="MATCH_PARENT"
        layout_height="0"
        android:weight="1"
        orientation="vertical">
        <YOURLIST
            layout_width="MATCH_PARENT"
            layout_height="wrap_content"
        />
    </LinearLayout>
    <YOURVIEW
         android:layout_width="MATCH_PARENT" 
         android:layout_height="WRAP_CONTENT" 
         android:weight="0"/>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T14:12:20.123

我想一种方法是使用`android:fillViewport`XML 中的属性。请参阅 Romain Guy 的这篇博文：[http ://www.curious-creature.org/2010/08/15/scrollviews-handy-trick/](http://www.curious-creature.org/2010/08/15/scrollviews-handy-trick/)

# asp.net-mvc - 大型视频文件的 MVC ActionResult

> ID：12873882
> 
> 赞同：5
> 
> 时间：2012-10-13T14:08:46.903
> 
> 标签：asp.net-mvc, video-streaming, actionresult

我正在为网站使用 ASP.NET MVC 4。该网站为我们的团队管理在线活动，并让注册用户可以访问在线材料、网络活动档案和教学视频。我已经构建了一个用于上传和管理视频的系统，现在我需要构建控制器操作来将视频文件发送到网页。我们使用 VideoJS 作为查看器，我现在对此非常满意。我们需要维护文件的安全性，因此仅将文件放在 Web 服务器上的某个位置似乎对我们不起作用。

我的主要问题是将文件返回给查看器的好方法是什么？我习惯使用 ActionResult 和 JSONResult 类，但它们似乎不太适合视频文件。这些文件可能非常大，有时高达 GB 或更多。我看到了 MVC FileResult 类、FileStreamResult 类和 FileContentResult 类。我应该使用哪一个以及在构建它时应该考虑哪些其他注意事项？

我感谢您的帮助。

道格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T11:10:55.023

您当然不应该将整个视频作为对观众的回应发送给观众，因为他们会等待一段时间才能下载。您需要将其流式传输给他们。我想您需要从控制器返回某种字节流。

像 YouTube 这样的地方通过 Flash 提供视频是有原因的——因为质量和速率可以很容易地控制，并且它提供了一定程度的复制保护（尽管它不是万无一失的）。我刚刚做了一个快速的谷歌搜索，发现了这个：

[http://www.longtailvideo.com/jw-player/download/](http://www.longtailvideo.com/jw-player/download/)

可能有用，但我个人不能保证！

显然，Razor 提供了自己的视频文件处理方式，您可能会觉得这很有用：

[http://www.asp.net/web-pages/tutorials/files,-images,-and-media/10-working-with-video](http://www.asp.net/web-pages/tutorials/files,-images,-and-media/10-working-with-video)

此外，HTML5 支持视频流（我相信你知道 VideoJS 使用它）：

[http://www.w3schools.com/html/html5_video.asp](http://www.w3schools.com/html/html5_video.asp)

# nhibernate - NHibernate 使用组件抛出强制转换异常

> ID：12873883
> 
> 赞同：2
> 
> 时间：2012-10-13T14:08:48.997
> 
> 标签：nhibernate, mapping

我正在使用 NHibernate，我与删除时的级联有一对多的关系。下面的映射。

```
<class name="Photo" table="photos">

  <id name="RoomId" column="room_id">
    <generator class="guid"/>
  </id>

  // omitted for brevity

  <component name="Data" class="PhotoData" lazy="true">
    <property name="Mime" column="mime"/>
    <property name="Data" column="data" length="2048000"/>
  </component>
</class>

<class name="Room" table="rooms">

  // omitted for brevity

  <bag name="Photos" lazy="false" fetch="join" cascade="delete" inverse="true">
    <key>
      <column name="room_id"/>
    </key>
    <one-to-many class="Photo"/>
  </bag>
</class> 
```

当我尝试删除房间时，出现以下异常

```
Unable to cast object of type 'System.Object' to type 'PhotoData' 
```

如果我从我的照片映射中删除该组件，我可以毫无问题地删除房间和所有照片。

有什么建议么？

更新：根据@nemesv 的评论

堆栈跟踪如下，没有内部异常。

```
at (Object , GetterCallback )
at NHibernate.Bytecode.Lightweight.AccessOptimizer.GetPropertyValues(Object target) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Bytecode\Lightweight\AccessOptimizer.cs:line 27
at NHibernate.Tuple.Component.PocoComponentTuplizer.GetPropertyValues(Object component) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Tuple\Component\PocoComponentTuplizer.cs:line 68
at NHibernate.Type.ComponentType.GetPropertyValues(Object component, ISessionImplementor session) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Type\ComponentType.cs:line 291
at NHibernate.Engine.ForeignKeys.Nullifier.NullifyTransientReferences(Object value, IType type) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Engine\ForeignKeys.cs:line 74
at NHibernate.Engine.ForeignKeys.Nullifier.NullifyTransientReferences(Object[] values, IType[] types) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Engine\ForeignKeys.cs:line 38
at NHibernate.Event.Default.DefaultDeleteEventListener.DeleteEntity(IEventSource session, Object entity, EntityEntry entityEntry, Boolean isCascadeDeleteEnabled, IEntityPersister persister, ISet transientEntities) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Event\Default\DefaultDeleteEventListener.cs:line 204
at NHibernate.Event.Default.DefaultDeleteEventListener.OnDelete(DeleteEvent event, ISet transientEntities) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Event\Default\DefaultDeleteEventListener.cs:line 111
at NHibernate.Impl.SessionImpl.FireDelete(DeleteEvent event, ISet transientEntities) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Impl\SessionImpl.cs:line 2478
at NHibernate.Impl.SessionImpl.Delete(String entityName, Object child, Boolean isCascadeDeleteEnabled, ISet transientEntities) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Impl\SessionImpl.cs:line 975
at NHibernate.Engine.CascadingAction.DeleteCascadingAction.Cascade(IEventSource session, Object child, String entityName, Object anything, Boolean isCascadeDeleteEnabled) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Engine\CascadingAction.cs:line 158
at NHibernate.Engine.Cascade.CascadeToOne(Object parent, Object child, IType type, CascadeStyle style, Object anything, Boolean isCascadeDeleteEnabled) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Engine\Cascade.cs:line 216
at NHibernate.Engine.Cascade.CascadeAssociation(Object parent, Object child, IType type, CascadeStyle style, Object anything, Boolean isCascadeDeleteEnabled) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Engine\Cascade.cs:line 181
at NHibernate.Engine.Cascade.CascadeProperty(Object parent, Object child, IType type, CascadeStyle style, Object anything, Boolean isCascadeDeleteEnabled) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Engine\Cascade.cs:line 148
at NHibernate.Engine.Cascade.CascadeCollectionElements(Object parent, Object child, CollectionType collectionType, CascadeStyle style, IType elemType, Object anything, Boolean isCascadeDeleteEnabled) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Engine\Cascade.cs:line 240
at NHibernate.Engine.Cascade.CascadeCollection(Object parent, Object child, CascadeStyle style, Object anything, CollectionType type) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Engine\Cascade.cs:line 201
at NHibernate.Engine.Cascade.CascadeAssociation(Object parent, Object child, IType type, CascadeStyle style, Object anything, Boolean isCascadeDeleteEnabled) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Engine\Cascade.cs:line 185
at NHibernate.Engine.Cascade.CascadeProperty(Object parent, Object child, IType type, CascadeStyle style, Object anything, Boolean isCascadeDeleteEnabled) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Engine\Cascade.cs:line 148
at NHibernate.Engine.Cascade.CascadeOn(IEntityPersister persister, Object parent, Object anything) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Engine\Cascade.cs:line 126
at NHibernate.Event.Default.DefaultDeleteEventListener.CascadeBeforeDelete(IEventSource session, IEntityPersister persister, Object entity, EntityEntry entityEntry, ISet transientEntities) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Event\Default\DefaultDeleteEventListener.cs:line 253
at NHibernate.Event.Default.DefaultDeleteEventListener.DeleteEntity(IEventSource session, Object entity, EntityEntry entityEntry, Boolean isCascadeDeleteEnabled, IEntityPersister persister, ISet transientEntities) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Event\Default\DefaultDeleteEventListener.cs:line 202
at NHibernate.Event.Default.DefaultDeleteEventListener.OnDelete(DeleteEvent event, ISet transientEntities) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Event\Default\DefaultDeleteEventListener.cs:line 111
at NHibernate.Event.Default.DefaultDeleteEventListener.OnDelete(DeleteEvent event) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Event\Default\DefaultDeleteEventListener.cs:line 30
at NHibernate.Impl.SessionImpl.FireDelete(DeleteEvent event) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Impl\SessionImpl.cs:line 2465
at NHibernate.Impl.SessionImpl.Delete(Object obj) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Impl\SessionImpl.cs:line 508
at DataAccess.Respository`1.<>c__DisplayClass7.<Delete>b__6(ISession s) in D:\svn\flatsharespa\DataAccess\Respository.cs:line 4 
```

# haskell - GHC 可以解包严格数据字段的枚举吗？

> ID：12873894
> 
> 赞同：13
> 
> 时间：2012-10-13T14:09:43.760
> 
> 标签：haskell, ghc

在对上[一个问题](https://stackoverflow.com/questions/12866291/are-newtypes-faster-than-enumerations "测试")的评论中，我声称：

> 我有另一个基准表明 ghc-7.4.1+llvm 对严格数据字段的枚举进行解包。

事实上，经过一些实验，我相信，至少在一些简单的情况下，使用枚举至少与使用新类型的 Word8 一样快，并且实际上可能更节省内存（因此在更实际的应用程序中更快） （或 Int），即使在数据类型的严格字段中使用。正如我在上一个问题中所说，我在更现实（但仍然很小）的环境中经历了类似的现象。

谁能指出一些有关 ghc/llvm 对枚举进行哪些优化的相关参考资料？特别是，它真的将枚举的内部标签解包在严格的数据字段上吗？汇编输出和分析结果似乎表明情况确实如此，但对我来说，核心级别没有任何迹象。任何见解将不胜感激。

还有一个问题：枚举是否*总是*至少与相应 Integral 的新类型一样有效，在哪里使用它们才有意义？（请注意，枚举的行为也可以像 Integrals 一样。）如果不是，那么（希望实际有用的）异常是什么？Daniel Fischer 在[他的回答](https://stackoverflow.com/questions/12866291/are-newtypes-faster-than-enumerations "测试")中建议，对多构造函数数据类型的严格字段进行枚举可能会阻止某些优化。但是，我未能在两个构造函数的情况下验证这一点。将它们放入大型多构造函数数据类型时可能会有所不同？

我也很好奇以下基准测试中到底发生了什么。在所有四种情况下，在堆中分配的字节数大致相同。但是，对于枚举，GC 实际上复制较少，与新类型相比，最大驻留数更小。

（实际上我真正的问题是，*当性能很重要时尝试将枚举转换为新类型是否值得？*但我认为更具体一点可能更有帮助。）

这个问题的一个可能的含义是：如果你在你的程序中使用大量的 Int，实际上在一些非常小的子集上有所不同，那么将它们更改为枚举（而不是未装箱的类型！）可能是一种表现增益（但要注意严格）。

这是基准测试的摘要，后面是基准代码和用于在您的系统上进行测试的便捷生成文件。

```
基准测试
平均值：11.09113 ns，lb 11.06140 ns，ub 11.17545 ns，ci 0.950
标准开发：234.6722 ps，lb 72.31532 ps，ub 490.1156 ps，ci 0.950

基准测试
平均值：11.54242 ns，lb 11.51789 ns，ub 11.59720 ns，ci 0.950
标准开发：178.8556 ps，lb 73.05290 ps，ub 309.0252 ps，ci 0.950

基准测试
平均值：11.74964 ns，lb 11.52543 ns，ub 12.50447 ns，ci 0.950
标准开发：1.803095 ns，lb 207.2720 ps，ub 4.029809 ns，ci 0.950

基准测试
平均值：11.89797 ns，lb 11.86266 ns，ub 11.99105 ns，ci 0.950
标准开发：269.5795 ps，lb 81.65093 ps，ub 533.8658 ps，ci 0.950

好的，所以枚举看起来至少不比新类型效率低
接下来，函数的堆配置文件
heapTest x = print $ head $ force $ reverse $ take 100000 $ iterate (force . succ') x

数据 D = A | 乙| C：
      在堆中分配了 10,892,604 字节
       GC 期间复制了 6,401,260 字节
       1,396,092 字节最大驻留（3 个样本）
          55,940 字节最大斜率
               6 MB 总内存正在使用（0 MB 由于碎片丢失）
  生产力占总用户的 47.8%，占总使用时间的 35.4%

新类型 E = E Word8：
      在堆中分配了 11,692,768 字节
       GC 期间复制了 8,909,632 个字节
       2,779,776 字节最大驻留（3 个样本）
          92,464 字节最大斜率
               7 MB 正在使用的总内存（0 MB 由于碎片而丢失）
  生产力占总用户的 36.9%，占总使用时间的 33.8%

数据 S = S !D:
      在堆中分配了 10,892,736 个字节
       GC 期间复制了 6,401,260 字节
       1,396,092 字节最大驻留（3 个样本）
          55,940 字节最大斜率
               6 MB 总内存正在使用（0 MB 由于碎片丢失）
  生产力占总用户的 48.7%，占总使用时间的 33.3%

数据 T = T {-# UNPACK #-} !E:
      在堆中分配了 11,692,968 字节
       GC 期间复制了 8,909,640 字节
       2,779,760 字节最大驻留（3 个样本）
          最大 92,536 字节斜率
               7 MB 正在使用的总内存（0 MB 由于碎片而丢失）
  生产力占总用户的 36.1%，占总使用时间的 31.6%

```

在两个构造函数的情况下可以获得类似的性能增益。

基准代码（另存为 EnumTest.hs）：

```
 {-# LANGUAGE CPP,MagicHash , BangPatterns ,GeneralizedNewtypeDeriving #-}
module Main(main,d,e,s,t,D(..),E(..),S(..),T(..))
where       
import GHC.Base  
import Data.List
import Data.Word
import Control.DeepSeq
import Criterion.Main

data    D = A | B | C  deriving(Eq,Ord,Show,Enum,Bounded)
newtype E = E Word8    deriving(Eq,Ord,Show,Enum)

data    S = S                !D deriving (Eq,Ord,Show) 
data    T = T {-# UNPACK #-} !E deriving (Eq,Ord,Show)

-- I assume the following definitions are all correct --- otherwise
-- the whole benchmark may be useless
instance NFData D where
  rnf !x         = ()
instance NFData E where
  rnf (E !x)     = ()
instance NFData S where
  rnf (S !x)     = ()
instance NFData T where
  rnf (T (E !x)) = ()  

instance Enum S where
  toEnum         = S . toEnum
  fromEnum (S x) = fromEnum x 
instance Enum T where
  toEnum         = T . toEnum
  fromEnum (T x) = fromEnum x 

instance Bounded E where
  minBound = E 0
  maxBound = E 2
instance Bounded S where
  minBound = S minBound
  maxBound = S maxBound
instance Bounded T where
  minBound = T minBound
  maxBound = T maxBound

succ' :: (Eq a,Enum a,Bounded a) => a -> a
succ' x | x == maxBound = minBound
          | otherwise        = succ x

-- Those numbers below are for easy browsing of the assembly code
d :: D -> Int#
d x = case x of
  A -> 1234#
  B -> 5678#
  C -> 9412#

e :: E -> Int#
e x = case x of     
  E 0 -> 1357#
  E 1 -> 2468#
  E _ -> 9914#

s :: S -> Int#
s x = case x of     
  S A -> 9876#
  S B -> 5432#
  S C -> 1097#

t :: T -> Int#
t x = case x of     
  T (E 0) -> 9630#
  T (E 1) -> 8529#
  T (E _) -> 7418#

benchmark :: IO ()
benchmark = defaultMain [ bench "d" $ whnf d' A
                        , bench "e" $ whnf e' (E 0)
                        , bench "s" $ whnf s' (S A) 
                        , bench "t" $ whnf t' (T (E 0))
                        ]
  where
    d' x = I# (d x)
    e' x = I# (e x)
    s' x = I# (s x)
    t' x = I# (t x)    

heapTest :: (NFData a,Show a,Eq a,Enum a,Bounded a) => a -> IO ()
heapTest x = print $ head $ force $ reverse $ take 100000 $ iterate (force . succ') x

main :: IO ()
main =    
#if   defined TEST_D
     heapTest (A :: D)
#elif defined TEST_E                
     heapTest (E 0 :: E)
#elif defined TEST_S
     heapTest (S A :: S)
#elif defined TEST_T                
     heapTest (T (E 0) :: T)
#else
     benchmark
#endif

-- A minor rant: 
-- For reliable statistics, I hope Criterion will run the code in *random order*,
-- at least for comparing functions with the same type. Elapsed times on my system are just too
-- noisy to conclude anything. 
```

用于基准测试的 makefile：

```
 GHC=/usr/bin/ghc
# If you dont't like the ATT syntax in the output assembly, use this: -fllvm -optlc --x86-asm-syntax=intel
GHC_DEBUG_FLAGS= -keep-s-file -keep-llvm-file  # -optlc --x86-asm-syntax=intel
GHCFLAGS=-O2 -funbox-strict-fields -rtsopts -fllvm -fwarn-missing-signatures
GHC_MAKE=$(GHC) --make $(GHCFLAGS)
GHC_PROF_MAKE=$(GHC)  -prof  -auto-all -caf-all --make $(GHCFLAGS)

all : benchmark enumtest_all

enumtest_d : EnumTest.hs
    $(GHC_MAKE) -o $@ $^ -DTEST_D

enumtest_e : EnumTest.hs
    $(GHC_MAKE) -o $@ $^ -DTEST_E

enumtest_s : EnumTest.hs
    $(GHC_MAKE) -o $@ $^ -DTEST_S

enumtest_t : EnumTest.hs
    $(GHC_MAKE) -o $@ $^ -DTEST_T

enumtest_all : enumtest_d enumtest_e enumtest_s enumtest_t
    for x in $^; do ./$$x +RTS -sstderr ;done

benchmark : EnumTest
    time ./$^

% : %.hs
    $(GHC_MAKE) -o $@ $^

%.core : %.hs
    $(GHC)  -S  $(GHCFLAGS)   $(GHC_DEBUG_FLAGS) -ddump-simpl -dsuppress-all -dsuppress-coercions -ddump-stranal $^ > $@

clean :
    rm *.hi *.o *.core *.s enumtest_? ; true 
```

非常感谢你！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-13T17:10:21.927

第一的

> Daniel Fischer 在他的回答中建议，对多构造函数数据类型的严格字段进行枚举可能会阻止某些优化。

你误解了。如果您有一个`C`类型的构造函数，无论该类型是否具有多个构造函数或只有一个，具有 type 的严格字段`T`，那么如果是围绕不可打包类型的新类型包装器`C ... !T ...`，则可以解压缩该严格字段，但不是`T`if`T`是一个枚举。原则上也应该可以解包类型值的构造函数标记`T`，但 GHC 只是不这样做（这可能是有原因的，它可能比我看到的更复杂）。然而，对于足够小的枚举类型，[Mikhail Gushenkov 提到](https://stackoverflow.com/a/12874148/1011995)的指针标记应该具有或多或少相同的效果（也许不完全一样）。

但是对于具有超过 3 或 7 个（对于 64 位字）构造函数的枚举类型，在某些情况下必须遵循指针，差异应该会显现出来。

二、简答

> 实际上我真正的问题是，*当性能很重要时，尝试将枚举转换为新类型是否值得？*

有时。

转换是否*会*真正提高性能以及提高多少，取决于您对这些值所做的事情。它还可能使您的程序变慢。它可能会使用更多内存（见下文）。

没有一般规则，每个案例都需要评估。有些模式 newtype-wrapped`Int`更快，有些模式更慢。一个典型的程序将包含两者的实例，并且必须找出哪个占主导地位。

* * *

现在到基准测试。

我冒昧地更改了基准测试中的参数，使用`C`代替`A`和`E 2`代替`E 0`. 结果是这些新类型的速度稍快一些：

```
warming up
estimating clock resolution...
mean is 1.549612 us (640001 iterations)
found 4506 outliers among 639999 samples (0.7%)
  3639 (0.6%) high severe
estimating cost of a clock call...
mean is 39.24624 ns (12 iterations)
found 2 outliers among 12 samples (16.7%)
  1 (8.3%) low mild
  1 (8.3%) high severe

benchmarking d
mean: 12.12989 ns, lb 12.01136 ns, ub 12.32002 ns, ci 0.950
std dev: 755.9999 ps, lb 529.5348 ps, ub 1.034185 ns, ci 0.950
found 17 outliers among 100 samples (17.0%)
  17 (17.0%) high severe
variance introduced by outliers: 59.503%
variance is severely inflated by outliers

benchmarking e
mean: 10.82692 ns, lb 10.73286 ns, ub 10.98045 ns, ci 0.950
std dev: 604.1786 ps, lb 416.5018 ps, ub 871.0923 ps, ci 0.950
found 10 outliers among 100 samples (10.0%)
  4 (4.0%) high mild
  6 (6.0%) high severe
variance introduced by outliers: 53.482%
variance is severely inflated by outliers

benchmarking s
mean: 13.18192 ns, lb 13.11898 ns, ub 13.25911 ns, ci 0.950
std dev: 354.1332 ps, lb 300.2860 ps, ub 406.2424 ps, ci 0.950
found 13 outliers among 100 samples (13.0%)
  13 (13.0%) high mild
variance introduced by outliers: 20.952%
variance is moderately inflated by outliers

benchmarking t
mean: 11.16461 ns, lb 11.02716 ns, ub 11.37018 ns, ci 0.950
std dev: 853.2152 ps, lb 602.5197 ps, ub 1.086899 ns, ci 0.950
found 14 outliers among 100 samples (14.0%)
  3 (3.0%) high mild
  11 (11.0%) high severe
variance introduced by outliers: 68.689%
variance is severely inflated by outliers 
```

因此，基准在这两种情况下都没有显着差异，总体结果取决于提供的论点。`B`分别。`E 1`，差异较小，但在我的运行中，新类型也在那里获胜。

但是请注意，`clock`调用的估计成本大约是其中任何一个的平均值的四倍，估计时钟分辨率超过 100 倍。我不相信这些结果是可靠的。考虑到我在系统上观察到的短期基准测试差异，我不相信任何运行时间少于 10 微秒的基准测试。我更喜欢运行更长时间的测试，因为结果更稳定并且产生的异常值更少。

关于

```
heapTest x = print $ head $ force $ reverse $ take 100000 $ iterate (force . succ') x 
```

不幸`iterate (force . succ')`的是，在构造列表时不会强制列表的元素，因此您会获得一个 thunk 列表（深度增加），反转该列表的初始段，*然后*强制列表元素。

因此，其中完成的大部分工作和分配是 thunk 和列表的构建，然后是 thunk 的评估。如果您通过在生成元素时强制元素来防止构建大型 thunk，您将获得更有意义的结果，

```
iterate' :: (a -> a) -> a -> [a]
iterate' f !a = a : iterate' f (f a) 
```

（爆炸模式 - WHNF - 足以完全评估所讨论类型的值）。

尽管如此，枚举变量和新类型变量之间的分配数字仍然存在明显且一致的差异，这也仍然存在于`iterate'`. 而且，如果不是反转初始段并采用其中`head`的那个，而是简单地采用`list !! index`，它变得更加令人印象深刻，因为其他数字（复制字节，最大驻留时间）然后很小。

原因是列表元素不能拆箱，所以列表单元格中包含指向元素值的指针，而枚举值是共享的（`A`整个程序中只有一个），所以这些指针都指向同一个对象，但整数不共享，因此每个列表单元都指向不同的对象。

分配的差异在您的系统上几乎正好是 800,000 字节，而在我的 1,600,000 上。

这就是 200,000 个单词所需要的，100,000 个`Word8`（或`Word`; `Int`，...）的分配需要（每个值，一个单词用于构造函数，一个用于 a `Word#`or `Int#`）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-13T14:41:49.100

在不查看编译器输出的情况下，我认为您的代码的新类型版本没有速度增加可能是由于指针标记。在 x86 上，GHC 在每个指针中保留 2 位用于有关指向闭包的信息。00 表示“未评估或未知”，其他 3 种情况对已评估构造函数的实际标记进行编码。此信息由垃圾收集器动态更新。由于您的测试数据类型中只有 3 个案例，它们总是适合标记位，因此模式匹配从不需要间接。尝试向您的数据类型添加更多案例，看看会发生什么。您可以在本文中找到有关动态指针标记的更多信息：

> [**使用动态指针标记更快的惰性**](http://research.microsoft.com/en-us/um/people/simonpj/papers/ptr-tag/index.htm)
> 
> Simon Marlow、Alexey Rodriguez Yakushev 和 Simon Peyton Jones，ICFP 2007。

# sql-server - 索引日期和时间列的正确方法

> ID：12873895
> 
> 赞同：4
> 
> 时间：2012-10-13T14:09:45.243
> 
> 标签：sql-server

我有一个具有以下结构的表：

```
create table MyTable (
   ID int identity,
   Whatever varchar(100),
   MyTime time(2) not null,
   MyDate date not null,
   MyDateTime AS (DATEADD(DAY, DATEDIFF(DAY, '19000101', [MyDate]), 
                          CAST([MyDate] AS DATETIME2(2))))
) 
```

计算列将日期和时间添加到单个 datetime2 字段中。大多数针对表的查询都有以下一个或多个子句：

```
... WHERE MyDate < @filter1 and MyDate > @filter2
... ORDER BY MyDate, MyTime
... ORDER BY MyDateTime 
```

简而言之，Date 通常用于过滤，而 full date-time 用于排序。现在提问：

1.  在这 3 个日期时间列上设置索引的最佳方法是什么？2个日期和时间分开，或者1个日期和1个复合日期时间，还是其他？这张表上发生了很多插入和更新，我想避免过度索引。
2.  当我写这个问题时，我注意到计算列定义又长又有点难看。我不久前从某个地方捡起它，忘记调查是否有更简单的方法。有没有更简单的方法可以将 date 和 time2 组合到 datetime2 中？简单的加法不起作用，我不确定是否应该避免转换为 varchar、组合和转换回。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T14:39:47.633

不幸的是，您没有提及您使用的是什么**版本的 SQL Server ....**

但是，如果您使用的是 SQL Server **2008 或更新版本**，您应该扭转这种局面：

你的桌子应该有

```
MyDateTime DATETIME 
```

然后将“唯一日期”列定义为

```
MyDate AS CAST(MyDateTime AS DATE) PERSISTED 
```

由于您将其设置为**持久化**，因此它与表数据一起存储（现在每次查询时都会计算），您现在可以轻松地对其进行索引。

同样适用于`MyTime`列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T14:48:41.720

将日期和时间放在两个单独的列中可能看起来很奇怪，但如果您的查询仅使用日期（和/或特别是仅使用时间部分），我认为这是一个有效的决定。您可以仅在日期或时间或（日期等）创建索引。

我不明白的是为什么你也有计算的日期时间列。也没有理由存储这个值。它可以在需要时轻松计算。

如果您需要按日期时间订购，您可以使用`ORDER BY MyDate, MyTime`. 对此有一个索引`(MyDate, MyTime)`应该没问题。范围日期时间查询也将使用该索引。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T14:48:53.383

答案不在您的索引中，而在您的查询中。

`DateTime`应该使用单个字段，或者即使`SmallDateTime`它提供了您的应用程序所需的日期范围和时间分辨率。

索引该列，然后使用如下查询：

```
 SELECT * FROM MyTable WHERE
    MyDate >= @startfilterdate
    AND MyDate < DATEADD(d, 1, @endfilterdate); 
```

通过`<`在结束过滤器上使用，它只包括该日期午夜之前某个时间的结果，即用户选择的“结束日期”之后的第二天。这比添加 23:59:59 更简单、更准确，尤其是因为存储的时间可以包括 23:59:59 和 00:00:00 之间的微秒。

在它们上使用持久列和索引是对服务器资源的浪费。

# ios - ACAccountCredential 和 Facebook 3.1 SDK

> ID：12873896
> 
> 赞同：1
> 
> 时间：2012-10-13T14:09:47.963
> 
> 标签：ios, facebook-ios-sdk, facebook-oauth

我正在使用 Facebook 3.1 SDK。基本上我正在寻找，Facebook 使用 Facebook 3.2 SDK 登录并通过`ACAccountCredential`.

但是 Facebook SDK 似乎仍然不支持所需的 OAuth 密钥。所以 OAuthToken 生成出错了，我得到了错误`ACErrorAccountAuthenticationFailed`。

如果我缺少任何东西来实现这一点，请告诉我。

# c++ - 代码块中的 OpenCv 问题

> ID：12873898
> 
> 赞同：-1
> 
> 时间：2012-10-13T14:10:17.463
> 
> 标签：c++, opencv, codeblocks

我遵循了在代码块中设置 OpenCv 的官方指南。我按照指南中的方式进行了所有操作。我成功编译了 opencv 示例的一个代码，但是当我运行时出现一个错误，即缺少一些 .dll。更准确地说是错误：应用程序无法启动，因为您的计算机中缺少libopencv_core242.dll..尝试重新安装应用程序...尴尬的是这个静态库存在于build->x64->mingw下的bin文件夹中-> bin .. 任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T14:34:12.423

尝试将 dll 复制到包含可执行文件的文件夹中。

对于“更清洁”的解决方案，已在此处回答（使用 libgcc）：[The program can't start because libgcc_s_dw2-1.dll is missing](https://stackoverflow.com/questions/4702732/the-program-cant-start-because-libgcc-s-dw2-1-dll-is-missing)

基本上，要么将包含 dll 的文件夹复制到 PATH ENV 中，要么尝试静态链接。

# facebook - Facebook like box 在调用 FB.init() 之前调用了错误 FB.getLoginStatus()

> ID：12873910
> 
> 赞同：7
> 
> 时间：2012-10-13T14:11:57.413
> 
> 标签：facebook, html, facebook-like, facebook-javascript-sdk

我在主页中使用模块“facebook like box”：

```
<div id="fb-root"></div>
<script>
    (function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/it_IT/all.js#xfbml=1";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
</script> 
```

我将此代码紧跟在`body`标记之后，并将其放在左侧：

```
<div class="fb-like-box fb-box-laterale" href="http://www.facebook.com/RistorantiRomaRisto.it" data-href="http://www.facebook.com/platform" data-width="190" data-height="380" data-show-faces="true" data-stream="false" data-header="true"></div> 
```

所有工作都已完成，但我在控制台中收到此错误：`FB.getLoginStatus() called before calling FB.init()`

我刚刚阅读了其他对话，其中我读到“您需要异步加载 api”并且我按照他们的说明进行操作，但没有结果。

我该如何解决？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-13T18:47:20.977

发生这种情况是因为您没有将 appId 添加到为 facebook 设置的 url。

在此处查看 Facebook 生成的完整代码：[https ://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)

如您所见，url 是这样写的：`//connect.facebook.net/fr_CA/all.js#xfbml=1&appId=YOUR_APP_ID`

这个 appId 的存在，将自动调用`FB.init()`基本的应用程序设置。但是当你删除它时，FB 并没有调用它的 init 函数，而是`.getLoginStatus()`直接调用。

因此，请为您的网站创建一个应用程序，并将应用程序 ID 添加到代码段以消除此错误。

希望这有帮助！

# android - 如何在单击按钮时注册或取消注册传感器事件侦听器？

> ID：12873911
> 
> 赞同：0
> 
> 时间：2012-10-13T14:12:07.893
> 
> 标签：android, android-sensors

我正在使用以下代码注册和注销 SensorEventListener。

```
 //Get the Toggle Button
         final ToggleButton tb=(ToggleButton) findViewById(R.id.activate);
         //Listener for ToggleButton
         tb.setOnClickListener(new View.OnClickListener() {

             public void onClick(View arg0) {
                 if(tb.isChecked()){
                    //Register the sensor
                     //smanager.
                     smanager.registerListener(this, smanager.getDefaultSensor.TYPE_LINEAR_ACCELERATION,SensorManager.SENSOR_DELAY_NORMAL);
                     Log.v(classname, "Sensor Listener Unregistered");
                 }
                 else{
                      //deRegister the Sensor
                     // Unregister the listener
                     smanager.unregisterListener(this);
                     Log.v(classname, "Sensor Listener Unregistered");

                 }
             }
         }); 
```

但我收到以下错误。

```
The method registerListener(SensorListener, Sensor, int) is not applicable for the arguments new View.onClickListener(),{},Sensor,int 
```

`onPause()`在活动的方法中编写相同的代码时，我没有收到此错误。有什么问题以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T14:21:12.010

`this`指的是`OnClickListener`而不是你的`Activity`.

将其更改为：

```
smanager.registerListener(YourActivityClass.this, smanager.getDefaultSensor.TYPE_LINEAR_ACCELERATION, SensorManager.SENSOR_DELAY_NORMAL); 
```

编辑以回答您的`context`评论：

`registerListener()`需要一个`SensorListener`. 根据你的

> 它适用于 onResume()

评论，我假设你`Activity`实现了`SensorListener`接口。上下文本身并没有实现它，因此你会得到同样的错误。

# ruby-on-rails - Rails：为视图创建变量的更好方法

> ID：12873917
> 
> 赞同：3
> 
> 时间：2012-10-13T14:12:22.917
> 
> 标签：ruby-on-rails, ruby, model, helper

我对 Ruby 和 Rails 完全陌生。目前，我正在使用辅助方法。如何在我的模型“用户”中编写与此相同的代码，以便从控制器和视图访问所有这些变量？

在帮助程序中以这种方式编写代码是 100% 功能性的：

```
module HomeHelper

  def init(user_id)
    @friends = Array.new    
    @followers = Array.new

    @user = User.find_by_id(user_id)    #Get User
    @friends = @user.users              #Get all his friends
                                        #
    @statuses = Array.new               #
    @friends.each do |friend|           #
      @statuses += friend.statuses      #Get all statuses for 'a' friend, then loop
    end                                 #
    @statuses += @user.statuses         #
    @statuses = @statuses.sort_by {|status| status.created_at}.reverse!

    @friendsof = Array.new
    @filtered_friendsof = Array.new

    @friends.each do |friend|
      @friendsof += friend.users
    end
    @friendsof.each do |friendof|
      unless (@friends.include?(friendof))
        if @user != friendof
          @filtered_friendsof << friendof
        end
      end
    end
  end

  @filtered_friendsof = @filtered_friendsof.uniq

end 
```

控制器

```
class HomeController < ApplicationController
  def index
    @user_id=3
  end   
end 
```

模型：

```
class User < ActiveRecord::Base
  has_many :statuses
  has_and_belongs_to_many(:users,
    :join_table => "user_connections",
    :foreign_key => "user1_id",
    :association_foreign_key => "user2_id")
  #has_many :user_connections
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T14:31:26.020

家庭控制器：

```
class HomeController < ApplicationController
  def index
    @user = User.find(3)
  end 
end 
```

用户型号：

```
class User < ActiveRecord::Base
  has_many :statuses
  has_and_belongs_to_many :friends,
    :class_name => 'User'
    :join_table => "user_connections",
    :foreign_key => "user1_id",
    :association_foreign_key => "user2_id"

  def combined_statuses
    (friends.map(&:statuses) + statuses).flatten.
      sort_by {|status| status.created_at}.reverse!
  end
end 
```

现在，您不需要辅助方法，在您的视图中您可以使用：

```
@user.friends # instead of @friends
@user.combined_statuses # instead of @statuses 
```

我会让你弄清楚其余的，但我希望你能大致了解将逻辑推入模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T15:13:16.373

大多数逻辑都属于`User`模型。没有其他东西需要实际进行这些计算，并且`User`模型可以访问所有相关部分。此外，还可以进行其他几项改进。我将尝试在下面添加评论以表明这些改进。

模型

```
class User < ActiveRecord::Base
  has_many :statuses
  has_and_belongs_to_many :friends,            # now you can just say user.friends
    :class_name => 'User',                     # makes more sense semantically    
    :join_table => "user_connections",
    :foreign_key => "user1_id",
    :association_foreign_key => "user2_id"

  def friends_statuses
    (friends.map(&:statuses).flatten + statuses).sort_by!(&:created_at).reverse
    # Ruby has many great methods for Arrays you should use.
    # You can often avoid instantiating variables like the empty Arrays you have.
  end

  def second_order_friends
    (friends.map(&:friends).flatten.uniq - friends) - [self]
  end
end 
```

控制器

```
class HomeController < ApplicationController
  def index
    user = User.find(7) # how do you decide which user you're displaying things for?
                        # this might be better off in 'show' rather than 'index'

    # here you can call all the methods you have for 'User', such as:
    # user.friends, user.statuses, user.friends_statuses, user.second_order_friends

    # to make things accessible in the view, you just need an @variable, e.g.:
    @friends = user.friends
    @latest_statuses = user.friends_statuses.first(10)
  end 
```

# magento - 更改属性 magento

> ID：12873918
> 
> 赞同：0
> 
> 时间：2012-10-13T14:12:24.320
> 
> 标签：magento

我为我的产品使用自定义属性，并且我正在编写我的脚本，该脚本获取属性并在更改它们的值之后。我已经选择了代码，但我不知道如何做代码，这会改变值。

```
<?php
    $mageFilename = 'app/Mage.php';
    require_once $mageFilename;
    Mage::app('default'); 
    $collection = Mage::getModel('catalog/product')->getCollection()
    ->addAttributeToFilter('manufacturer', '3')
    ->addAttributeToSelect('*'); 

    foreach ($collection as $product) {

      echo $product->getName();
      echo $product->getResource()->getAttribute('cena_balenia_czk')->getFrontend()->getValue($product);
      echo '-';
      echo $product->getResource()->getAttribute('czk')->getFrontend()->getValue($product);
      echo '<br>';
    }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T06:56:58.857

看看下面的代码：

```
<?php
    $mageFilename = 'app/Mage.php';
    require_once $mageFilename;
    Mage::app('default'); 
    $collection = Mage::getModel('catalog/product')->getCollection()
    ->addAttributeToFilter('manufacturer', '3')
    ->addAttributeToSelect('*'); 

    foreach ($collection as $product) {
        $product->setName('NEW PROUDUCT NAME');
        $product->setCenaBaleniaCzk(999);
        $product->setCzk('NEW Czk VALUE');

        $product->save(); // This line is extremely important to commit your changes
    }
?> 
```

# c++ - 为什么编译器允许缩小转换范围

> ID：12873919
> 
> 赞同：6
> 
> 时间：2012-10-13T14:12:26.443
> 
> 标签：c++, c++11

谁能向我解释一下，如果初始化程序可能导致信息丢失，为什么编译器允许初始化内置类型的变量？

例如 C++ Primer，第 5 版说，如果初始化程序可能导致信息丢失，编译器**不会**让我们列出内置类型的初始化变量。

`a`但我的编译器 gcc v 4.7.1在以下代码中成功初始化了变量：

```
long double ld = 3.1415926536; 
int a{ld}; 
```

只是警告：在 {} [-Wnarrowing] 内将 'ld' 从 'long double' 缩小到 'int' 的转换。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-13T14:28:03.827

初始化列表的特性之一是不允许缩小转换。但是语言定义不区分警告和错误；当代码格式错误时，它需要“诊断”，它被定义为来自一组实现定义的消息中的任何消息。警告满足此要求。这就是非标准扩展的机制：发出警告后，编译器可以自由地做它想做的任何事情，包括根据特定于实现的规则编译某些东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T14:17:07.817

您可以设置编译器标志以将所有警告标记为错误。在这种情况下，只有它会阻止你这样做。否则只会是警告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T14:23:09.973

这个问题最近出现了。使用 gcc-4.7 命令行开关打开所需的行为：

```
g++ -Werror=narrowing ... 
```

# java - 空指针异常修复 - 列表

> ID：12873923
> 
> 赞同：0
> 
> 时间：2012-10-13T14:14:08.677
> 
> 标签：java, list, nullpointerexception

```
 public void createGraph () {
    int oldFrom = -1;
    int oldTo = -1;
    for(int i = 0; i < edges.size(); i++) {
      EdgeI e = edges.get(i);
      int from = e.from;
      int to = e.to;
      VertexI v = vertices.get(from);
      if (from == oldFrom && to == oldTo){
        vertexWeight wic = v.neighbors.get(v.neighbors.size() - 1);
        wic.w++;
      }
      else {
        v.neighbors.add(new vertexWeight (to, 1));
        oldFrom = from;
        oldTo = to;
      }
    }
  } 
```

`neighbors`是`List`来自`VertexI`班级的公众。`w`是`vertexWeight`类的公共整数。`edges`是位于我的主要课程中的列表。我不断收到这行代码的空指针异常：

```
v.neighbors.add(new vertexWeight (to, 1)); 
```

尝试了大约 15 分钟，但我没有让它工作。我在搞什么鬼？

```
java.lang.NullPointerException
    at tester.createGraph(tester.java:60)
    at tester.main(tester.java:11)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at edu.rice.cs.drjava.model.compiler.JavacCompiler.runCommand(JavacCompiler.java:272) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T14:29:55.103

**简短的回答**

`v.neighbors`用`new ArrayList()`in初始化`vertices.get()`。

**长答案**

您的问题省略了一个关键信息：您如何初始化`neighbors`. 为什么这很重要？

请参阅：[什么是 NullPointerException，我该如何解决？](https://stackoverflow.com/q/218384/220060)

在你的情况下，我猜想在程序运行期间要么`v`或为空。`neighbors`例如`vertices.get(from)`可以返回 null 并且`v.neighbors`不起作用。或`neighbors`为空，并且`v.neighbors.add()`不起作用。

瞧。您承认您`neighbors`在初始化时设置为 null `VertexI`。

`new ArrayList()`解决方案是：使用而不是初始化`null`。

如果这是不可能的，或者由于某些其他原因您无法避免空指针，您可以像这样进行空指针检查：

```
if (v != null && v.neighbors != null) {
    v.neighbors.add(new vertexWeight (to, 1));
} 
```

`v`这意味着，如果或`neighbors`为空，则不要添加顶点。

但这是复杂且容易出错的。尽可能避免空指针更容易。有人会说，不惜一切代价避免它们！改为抛出异常或返回“空”对象，如`new ArrayList()`.

# php - 如何将 AJAX 结果传递回请求者页面

> ID：12873927
> 
> 赞同：0
> 
> 时间：2012-10-13T14:14:31.283
> 
> 标签：php, javascript, mysql, ajax

我已经看到一些片段试图解释这是如何完成的，但是我正在努力集成代码。正如您从我的代码和以前的问题中看到的那样，我是 AJAX 的新手，但发现它非常有益。

基本上，我正在为内部工作管理和问题跟踪创建一个小型票务系统。

到目前为止，我有一个下拉表单，您可以在其中选择用户并使用 AJAX 从 MySQL 返回用户资产。然后在主题标题上有一个复选框。（这将转移到资产，因为意识到某些用户可能拥有多个资产。）

我需要了解的是如何将 AJAX 结果中选择的资产传递回原始表单，以便在提交工单时记录资产。

下面的所有代码目前都没有经过清理，需要好好清理一下！

这是原始页面中的 AJAX 代码和表单：

```
<h3>Assign User</h3> 

<script type="text/javascript">
function showUser(str)
{
if (str=="")
  {
  document.getElementById("txtHint").innerHTML="";
  return;
  } 
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","./includes/submit-ticket-ajax-1.php?q="+str,true);
xmlhttp.send();
}
</script>

<select style="width:217px; height:20px !important;" name="company_staff_select" onchange="showUser(this.value)">

            <option value=""></option>';

      $o = "SELECT * FROM company_staff WHERE company_id = " . $company_id . " ORDER BY id DESC";
    $rs = mysql_query($o);
    $nr = mysql_num_rows($rs);
    for ($i=0; $i<$nr; $i++) {
    $r = mysql_fetch_array($rs);
$staff_id = $r['id'];

            echo '<option id="person" name="person" value="' . $staff_id . '">' . $r['firstname'] . ' ' . $r['lastname'] . '</option>';
}

echo '

</select>
<br />
<div id="txtHint"><b>Person info will be listed here.</b></div> 
```

这是AJAX调用的页面代码：

```
$q=$_GET["q"];

$sql="SELECT * FROM company_staff WHERE id = '$q'";

$result = mysql_query($sql);

$row = mysql_fetch_array($result);

$users_computer = $row['computer_id'];
$users_sim = $row['sim_id'];
$users_mobile = $row['mobile_id'];

$sql2="SELECT * FROM company_computers WHERE `id` = '$users_computer'";

$result2 = mysql_query($sql2);

$row2 = mysql_fetch_array($result2);

$sql3="SELECT * FROM company_sims WHERE id = '$users_sim'";

$result3 = mysql_query($sql3);

$row3 = mysql_fetch_array($result3);

$sql4="SELECT * FROM company_mobiles WHERE id = '$users_mobile'";

$result4 = mysql_query($sql4);

$row4 = mysql_fetch_array($result4);

echo '<br /><table border="1">
<tr>
<th>Firstname</th>
<th>Lastname</th>
<th>Email<input type="checkbox" name="email" value="' . $row['email'] . '"  /></th>
<th>Computer Name<input type="checkbox" name="comp" value="' . $row2['id'] . '"  /></th>
<th>Company Phone Number<input type="checkbox" name="sim" value="' . $row3['id'] . '"  /></th>
<th>Company Mobile<input type="checkbox" name="mobile" value="' . $row['id'] . '"  /></th>
</tr>';

  echo '<tr>
        <td>' . $row['firstname'] . '</td>
        <td>' . $row['lastname'] . '</td>
        <td>' . $row['email'] . '</td>
        <td>' . $row2['computer_name'] . '</td>
        <td>' . $row3['phone_number'] . '</td>
        <td>' . $row4['make'] . ' ' . $row4['model'] . '</td>

    </tr>

<tr>
<b>Please select the device this ticket is related to if any.</b>
</tr>

        ';

echo '</table>';

?> 
```

任何建议都将不胜感激，并且越分解，升值就越大！

亲切的问候，

n00bstacker

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T14:47:11.993

您可以使用 jQuery 更轻松地完成此操作。只需包含 jQuery 库：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>

<script>
    $('#idOfYourSelectBox').change(function(){
       var val = $(this).val();

       //post submits data via post
       $.post("./includes/submit-ticket-ajax-1.php", {"id" : val}, function(data){
          $('#txtHint').html(data); //the same as innerHTML in javascript
       });
       //you can also pass more data by adding items in the map:
       //{"id" : val, "name" : val2}
       //or simply serialize the form if you're submitting a form via ajax, this way you won't need to get the individual values for each field
    });
</script> 
```

`submit-ticket-ajax-1.php`数据通过提交`POST`。与提交表单时相同：

```
<form method="post"> 
```

唯一的区别是它在没有整页刷新的情况下执行此操作。

而且由于您通过提交数据，`POST`您还必须使用 `$_POST`PHP 访问它，就像您从普通 html 表单获取数据一样。

```
$id = $_POST['id']; 
```

然后你可以`$id`在你的查询中使用。当然，您必须验证它是否有效，并确保它已被清理以防止诸如 sql 注入之类的事情。

我还注意到您仍在使用原始`mysql api`的 php。如果您已阅读官方 php 文档[http://www.php.net/manual/en/intro.mysql.php](http://www.php.net/manual/en/intro.mysql.php) ，则不再推荐。您可以使用`PDO`或`MySQLi`利用[准备好的语句](http://php.net/manual/en/mysqli.prepare.php)来防止 sql 注入。

一些建议（我不是真正的专家，所以通过快速谷歌搜索来验证你正在学习的内容总是明智的）：

PHP 是一种模板语言，因此不是回显 html，而是仅回显 html 中的值：

```
<td><?php echo  $row['firstname']; ?></td> 
```

并不是：

```
echo '<tr>
        <td>' . $row['firstname'] . '</td> 
```

**更新：**

在您的原始代码中，您有以下内容：

```
xmlhttp.open("GET","./includes/submit-ticket-ajax-1.php?q="+str,true);
xmlhttp.send(); 
```

当您将其转换为 jquery 代码时，它将如下所示：

```
$.get("./includes/submit-ticket-ajax-1.php", {'q' : str}); 
```

然后在您的`submit-ticket-ajax-1.php`文件中，您正在访问通过 ajax 传递的值并在查询中使用它：

```
$q=$_GET["q"];
$sql="SELECT * FROM company_staff WHERE id = '$q'"; 
```

我不知何故迷路了，因为在那之后还有一堆查询。但我假设您正在利用该查询的结果来生成 html，即：

```
echo '<br /><table border="1">
<tr>
<th>Firstname</th>
<th>Lastname</th>
<th>Email<input type="checkbox" name="email" value="' . $row['email'] . '"  /></th>
<th>Computer Name<input type="checkbox" name="comp" value="' . $row2['id'] . '"  /></th>
<th>Company Phone Number<input type="checkbox" name="sim" value="' . $row3['id'] . '"  /></th>
<th>Company Mobile<input type="checkbox" name="mobile" value="' . $row['id'] . '"  /></th>
</tr>'; 
```

您是说要将数据从`submit-ticket-ajax-1.php`文件传递到您最初调用 ajax 的页面，对吗？这就是为什么您不需要其中包含表格和表单的 html。您需要将查询结果编码为 json，以便稍后在客户端由 javascript 解析。而且由于您有多个结果集，您可能希望将它们全部存储在这样的数组中，然后用于`json_encode`将其转换为 json 格式。

```
$data = array("row" => $row, "row2" => $row2);
echo json_encode($data); 
```

回到客户端代码。您现在必须调用`JSON.parse`将 json 字符串转换为 javascript 对象，以便可以使用 javascript 对其进行操作：

```
 $.post("./includes/submit-ticket-ajax-1.php", {"id" : val}, function(data){
      var json_data = JSON.parse(data); //convert to object
      //accessing the data that was passed
      var email = json_data['row']['email'];
      var row2_id = json_data['row2']['id'];

   }); 
```

现在您有了数据，您可以使用 javascript 将值提供给表单。我假设您在某处有一个隐藏的容器，并且您要提供值的表单位于该容器内：

```
<div style="display:none;"> 
```

在这种情况下，您所要做的就是将通过 ajax 获取的数据分配到以下表单中：

```
$('#email').val(email); 
```

但是当然你也可以做你最初做的事情，只需在 ajax 调用的页面上生成 html 并使用`$('#container').html(data)`.

这已经很长时间了，我真的希望我已经解释清楚了。但是，如果您还有其他问题，请随时提出。

# php - Ajax 请求等待时间

> ID：12873931
> 
> 赞同：0
> 
> 时间：2012-10-13T14:14:48.330
> 
> 标签：php, jquery, ajax, performance, firebug

我一直在从事一个需要我使用 Ajax 的项目。过去我用它创建项目没有问题，但这次每个请求至少需要 1 秒，这当然太长了。

我不能给你完整的代码，但我会尽可能多地分享。请求如下：

```
/* *
 * Update the navigation screen
 */
    function UpdateNavigation() {
         $.ajax({
            type: "POST",
            url: "application/controllers/LocationController.php",
            dataType: "json",
            data: "action=GetSurroundings",
            success: function(data){
                $("#direction-north").html((typeof data.north != 'undefined' ? data.north : "") + '</br> North');
                $("#direction-west").html((typeof data.west != 'undefined' ? data.west : "") + '</br> West');
                $("#direction-center").html((typeof data.center != 'undefined' ? data.center : "") + '</br> Center');
                $("#direction-east").html((typeof data.east != 'undefined' ? data.east : "") + '</br> East');
                $("#direction-south").html((typeof data.south != 'undefined' ? data.south : "") + '</br> South');
            }
        });
    }

/* *
 * Update the current location
 */
    $('#navigation-list :button').click(function(event) {
        if (event.target.id == "direction-center")
            return;

         $.ajax({
            type: "POST",
            url: "application/controllers/LocationController.php",
            data: "action=SetLocation&value=" + event.target.id,
            success: function() {
                UpdateNavigation();
            }
        });
    }); 
```

据我所知，这很好。稍微改变一下可能是个好主意，但据我所知，它不应该导致延迟。LocationController 文件相当大，但它针对不同情况使用了一个开关，因此实际执行的代码并没有那么大。

使用 FireBug 我发现第一个请求等待 1.01 秒，第二个请求等待 1.00 秒。我做了一些研究，人们告诉我，这可能是因为服务器太忙而无法正确处理您的请求，所以这就是为什么它需要这么长时间。但这似乎不太可能，因为代码和数据库是在本地托管的。请求也不应该有冲突，因为它们一次执行一个。

我在这里不知所措。我不知道如何开始调试这个问题。删除部分代码没有帮助，因为它要么完全停止执行，要么只需要 1 秒以上。这让我相信代码不是问题，尽管我可能是错的。

任何帮助将不胜感激！如果您需要更多信息，请随时询问。

编辑：更多的挖掘让我相信代码中的查询可能有问题？如果是这样，我正在使用以下（非常丑陋的）查询：

```
SELECT 
    character_location.block,
    character_location.location
FROM
    character_location
WHERE
    character_location.id = 1
LIMIT
    1

SELECT 
    zones.name,
    zones.location,
    zones.block
FROM
    zones
WHERE
    (
            `zones`.`location` = (".$getBlock['location']." - 1)
        AND
            zones.block = '".$playerBlock."'
    )
OR
    (
            `zones`.`location` = ".$getBlock['location']."
        AND
            zones.block = '".$playerBlock."'
    )
OR
    (
            `zones`.`location` = (".$getBlock['location']." + 1)
        AND
            zones.block = '".$playerBlock."'
    )
OR
    (
            `zones`.`location` = ".$getBlock['location']."
        AND
            zones.block = '".$playerBlockDown."'
    )
OR
    (
            `zones`.`location` = ".$getBlock['location']."
        AND
            zones.block = '".$playerBlockUp."'
    )
LIMIT
    5

UPDATE 
    character_location
SET
    character_location.block = '" . $targetBlock . "',
    `character_location`.`location` = " . $targetLocation . "
WHERE
    character_location.id = 1 
```

猜猜我认为哪一个可能导致问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T14:54:49.253

**如果您使用 PDO 进行连接。**

而不是`localhost`用作主机使用`127.0.0.1`

# ruby-on-rails - CarrierWave::RMagick resize_to_fit 后 PNG 图像质量的损失

> ID：12873936
> 
> 赞同：10
> 
> 时间：2012-10-13T14:15:38.087
> 
> 标签：ruby-on-rails, thumbnails, carrierwave, image-uploading, rmagick

我正在使用`CarrierWave::RMagick`为 Rails 应用程序创建图像的缩略图版本，并且我注意到图像缩小时质量下降。这在一定程度上是可以理解的，因为我们在缩小的图像中像素较少，因此质量较低，但我希望质量更好。我给你看一个例子：

![原来的](../Images/b87319d93f9bb2d13f13f3b489958ff4.png) ![Photoshop（双三次）](../Images/efedcbd41366e6b92454e7bb10dff35b.png) ![RMagick](../Images/878b38dcb5b8d9fc72925644563af910.png)

从左到右，第一个是原始的（100x105），第二个是Photoshop的Bicubic resize（95x100），第三个是RMagick的`resize_to_fit`（95x100）的结果。

对于此示例，原始图像仅比我想要的缩略图稍大，但我基本上强制每个缩略图最大为 100x100。我希望你能看到缩小图像之间的区别。将 Photoshop 的质量与 RMagick 的质量进行比较可能很愚蠢，但即使在 Chrome 中缩小以使图像更小也会产生更好质量的图像。

我基本上在 CarrierWave 上传器类中使用它：

```
 version :thumb do
    process :resize_to_fit => [100, 100]
  end 
```

关于如何提高图像质量的任何想法？或者是否有任何 RMagick 的替代品可以做得更好？

**编辑：**我试过[这个](https://github.com/jnicklas/carrierwave/wiki/How-to:-Specify-the-image-quality)，虽然没有任何区别。无论如何，我认为那是针对JPEG图像的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T14:10:55.100

该问题似乎在 imagemagick 库中，而不是特定于carrierwave 或 rmagick。

您可以在命令行中对此进行测试。这两个命令都使用 imagemagick 自己的命令产生与 rmagick 相同的模糊输出`mogrify`：

```
mogrify -resize 100x100 original.png
mogrify -resize 100x100 -quality 100 original.png 
```

[imagemagick 文档](http://www.imagemagick.org/Usage/resize/#adaptive-resize)建议该命令`-resize`（carrierwave 通过 rmagick 或 minimagick 使用）会为像我们在此处测试的那样的小更改创建模糊的结果，并且您最好使用该`-adaptive-resize`命令，但在我的快速测试中我不是能够产生更好的结果。

其他人使用 graphicsmagick 而不是 imagemagick[报告了更好的结果](https://github.com/minimagick/minimagick/issues/83)（这可能还需要从 rmagick 切换到 minimagick），但我没有对此进行测试。

# perl - 子内的 Perl 子

> ID：12873937
> 
> 赞同：6
> 
> 时间：2012-10-13T14:15:40.467
> 
> 标签：perl

我想在另一个子里面有一个子，

```
sub a {
    sub b {
    }
} 
```

我想`sub b`为每次调用创建一个新实例`sub a`。有没有办法在 Perl 中做到这一点？

当我运行上面的代码并打印 in 的地址时`sub b`，`sub a`我总是得到相同的`sub b`地址

```
sub a {
    print \&b;
    sub b{
    }
} 
```

[Perl Monks 上的这个链接](http://www.perlmonks.org/?node_id=801229)说我们可以这样做，但我总是看到相同的地址`sub b`。

有没有办法`sub b`为每次调用创建一个新实例`sub a`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-13T14:46:58.720

```
sub a {
    sub b{
    }
} 
```

基本上是一样的：

```
sub a {

}
sub b{
} 
```

因为命名子程序存在于符号表中，因此它们是全局的。您将需要返回对子例程的引用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-13T14:36:29.193

命名子程序只创建一次。您需要返回一个匿名子例程引用，如下所示：

```
sub a {
    my $counter = 1;
    return sub {
        return $counter++;
    }
}

my $c1 = a();
my $c2 = a();

# different references
print "c1 = $c1, c2 = $c2\n";

# each has a different counter
print "c1 ", $c1->(), "\n";
print "c1 ", $c1->(), "\n";
print "c2 ", $c2->(), "\n";
print "c2 ", $c2->(), "\n"; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-13T15:15:29.390

您可以创建对匿名子的引用：

```
#!/usr/bin/env perl
use strict;
use warnings;

sub a
{
    my($b) = @_;
    my $subref = sub { my($a) = @_; print "a = $a; b = $b\n"; return $a + $b; };
    &$subref(3);
    return $subref;
}

my $sub1 = a(10);
my $a10  = &$sub1(19);
my $sub2 = a(20);
my $a20  = &$sub2(20);
print "a10 = $a10; a20 = $a20; sub1 = $sub1; sub2 = $sub2\n"; 
```

样本输出：

```
a = 3; b = 10
a = 19; b = 10
a = 3; b = 20
a = 20; b = 20
a10 = 29; a20 = 40; sub1 = CODE(0x7ffc3c002eb8); sub2 = CODE(0x7ffc3c032eb8) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-13T17:02:31.460

```
sub a {
    my $b = sub {
    };
    print \&$b;
} 
```

或全局：

```
sub a {
    local *b = sub {
    };
    print \&b;
} 
```

# jpa - 如何使用 OpenJPA 遍历 WHERE 子句中的关系？

> ID：12873944
> 
> 赞同：2
> 
> 时间：2012-10-13T14:16:36.613
> 
> 标签：jpa, openjpa

我是 JPA 和 OpennJPA 的新手。我有两个实体**UserDmo**和**SupplierDmo**。每个供应商可以有多个用户，这种关系建立如下，

在**UserDmo**中，

```
Column(name="id_supplier")
private long idSupplier;

@ManyToOne(optional=true)
@JoinColumn(name="ID_SUPPLIER")
private SupplierDmo supplier; 
```

在这里，ID_SUPPLIER 列是由 SupplierDmo 的 ID 列引用的 FK。使用这两个实体，我尝试通过以下查询获得结果。

```
SELECT u.id, u.modifiedDate FROM UserDmo u JOIN u.idSupplier s WHERE s.id = 1 
```

但是我得到了错误消息：尝试从非实体变量“s”中查询字段“s.id”。也许您忘记使用 FROM 子句中的标识变量作为相关路径的前缀？

我真的很感谢你在这方面的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T14:44:11.453

尝试这样的事情：

```
SELECT u.id, u.modifiedDate FROM UserDmo u WHERE u.supplier.id = 1 
```

# ruby-on-rails - Rails 递归搜索助手

> ID：12873948
> 
> 赞同：0
> 
> 时间：2012-10-13T14:16:51.123
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

这种情况下有rails助手吗？

你有一个`Survey`，哪些`has_many`问题，哪些`has_many`答案。

```
s = Survey.first
s.answers # => Returns the answers of all the survey questions 
```

我不想在这里重新创建轮子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T14:26:53.890

它内置：

```
class Survey < ActiveRecord::Base
  has_many :questions
  has_many :answers, :through => :questions

  # ...
end 
```

就是这样。现在你可以打电话`survey.answers`，它会得到所有的答案。

[在此处](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)阅读`:through`选项（及其限制）

# java - HTTP 代理服务器 Java 错误

> ID：12873949
> 
> 赞同：0
> 
> 时间：2012-10-13T14:17:06.450
> 
> 标签：java, http, sockets, firefox, proxy

*   作为一项任务，我只能使用 ServerSocket 和 Socket 类。它也应该是单线程的。

我在 Java 中实现了一个 HTTP 代理服务器，首先它从客户端获取请求，然后推送到服务器，然后将响应推送回客户端。

# 问题

问题是，我已成功获取请求，将其发送到终端服务器并获得正确的 HTTP 响应。*我也可以在控制台中打印出响应*。**但是当我将响应发送到 clientServer.outputstream 时它卡住了。Firefox（请求使用，HTTP 1.0，没有请求保持活动状态）似乎永远加载并且没有任何显示，并且 Firefox 也没有从我的程序收到响应。**

# 我在调试时检查的内容

每次页面开始加载（FF 请求）时，总是有 2 个客户端套接字。第一个套接字**包含空请求**，第二个套接字**包含正确的请求**。我所期望的是只有一个来自 Firefox 的正确 HTTP 请求。这是一种奇怪的行为吗？

例子：

```
/0:0:0:0:0:0:0:1:65194
[null request]

/0:0:0:0:0:0:0:1:65195
GET http://www.microsoft.com/ HTTP/1.0
Host: www.microsoft.com
User-Agent: Mozilla/5.0 (Windows NT 6.2; WOW64; rv:15.0) Gecko/20100101 Firefox/15.0.1
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip, deflate
Connection: close
Proxy-Connection: close
Cookie: viewkey=lightweight; WT_FPC=id=269eb0e7618962f93a81347585923074:lv=1349229942007:ss=1349229580158; WT_NVR_RU=0=technet|msdn:1=:2=; omniID=c736269c_f430_4e9b_a42a_23a0c965c60a; MUID=212A1766CFE761423CD014BDCBE76158&TUID=1; MC1=GUID=08600fba7f5c5f409e67980d8a027593&HASH=ba0f&LV=20129&V=4&LU=1347643534618; A=I&I=AxUFAAAAAADGBwAA8ezRtqBBHjk3++mP1Bwj9w!!&V=4&CS=119EQ5002j10100; msdn=L=en-US 
```

# 代码

```
ServerSocket serverSocket;
try {
    serverSocket = new ServerSocket(60000);
    while (true) {
            clientSocket = serverSocket.accept();
            [...]
            // Extract request, and push to end-server
            // Fetch response from end-server to client, using flush() already
            // Close all input, output
            // Close all sockets
} catch {[...]} 
```

欢迎任何帮助，谢谢！

按要求提供完整代码，我使用 PrintWriter，但在此之前使用 Byte 没有区别（不关心效率）

```
import java.io.*;
import java.net.*;
import java.util.*;

public class Proxy {

    static String separator = System.getProperty("line.separator");

    public static void main(String args[]) {
        //int port = Integer.parseInt(args[0]); 
        start(60000);
    }

    public static void start(int port) {
        ServerSocket serverSocket;
        try {
            serverSocket = new ServerSocket(port);
            Socket clientSocket = null;
            while (true) {
                clientSocket = serverSocket.accept();

                System.out.println(clientSocket.getRemoteSocketAddress() + "\n" + clientSocket.getLocalSocketAddress() + "\n" + clientSocket.getInetAddress());

                BufferedReader inStreamFromClient = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));

                String inLine;
                Vector<String> clientRequestHeader = new Vector<String>();
                String rawRequest = "";

                while ((inLine = inStreamFromClient.readLine()) != null) {
                    if (!inLine.isEmpty()) {
                        clientRequestHeader.add(inLine);
                        rawRequest = rawRequest.concat(inLine + separator);
                    } else break;
                }

                while ((inLine = inStreamFromClient.readLine()) != null) 
                    rawRequest = rawRequest.concat(inLine + separator);

                System.out.println(rawRequest);

                if (!rawRequest.isEmpty()) {
                    handleRequest(clientSocket, clientRequestHeader, rawRequest);
                } else {
                    //clientSocket.close();
                                    // Not sure how to handle null request
                }

            }
        } catch (Exception e) {e.printStackTrace();}

    }

    public static void handleRequest(Socket clientSocket, Vector<String> clientRequestHeader, String rawRequest) {
        HTTPRequest request = new HTTPRequest(clientRequestHeader, rawRequest);
        try {
            //System.out.println(rawRequest);

            // Send request to end-server
            Socket endServerSocket = new Socket(request.getHost(), 80);

            PrintWriter outStreamToEndServer = new PrintWriter(new BufferedWriter(new OutputStreamWriter(endServerSocket.getOutputStream())));
            BufferedReader stringReader = new BufferedReader(new StringReader(rawRequest));
            String inLine;
            while ((inLine = stringReader.readLine())!= null) {
                outStreamToEndServer.println(inLine);
            }
            outStreamToEndServer.println();
            outStreamToEndServer.flush();

            // Read response header from end-server
            String responseHeader = "";
            BufferedReader inStreamFromEndServer = new BufferedReader(new InputStreamReader(endServerSocket.getInputStream())); 
            while (!(inLine = inStreamFromEndServer.readLine()).isEmpty()) {
                responseHeader = responseHeader.concat(inLine + separator);
            }

            // Send response header to client
            PrintWriter outStreamToClient = new PrintWriter(new BufferedWriter(new OutputStreamWriter(clientSocket.getOutputStream())));
            outStreamToClient.println(responseHeader);
            outStreamToClient.flush();

            // Send response body to client
            String responseBody = "";
            while ((inLine = inStreamFromEndServer.readLine()) != null) {
                responseBody = responseBody.concat(inLine + separator);
            }
            outStreamToClient.println(responseBody);
            outStreamToClient.flush();

            endServerSocket.shutdownInput();
            clientSocket.shutdownOutput();
            clientSocket.close();
            endServerSocket.close();

            //endServerSocket = null;
        } catch (Exception e) {
            e.printStackTrace();
        } 
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-24T09:28:17.267

首先，您不应该使用 PrintWriter 来传输数据，因为 HTTP 协议不是纯文本协议，主体可以包含一些原始数据，例如图像。

将您的响应传输代码替换为以下代码。

```
InputStream in = endServerSocket.getInputStream();
OutputStream out = clientSocket.getOutputStream();
byte[] buffer = new byte[1024];
int bytesRead;
while ((bytesRead = in.read(buffer)) != -1)
{
    out.write(buffer, 0, bytesRead);
}

in.close();
out.close(); 
```

第二点，你总是添加换行符

```
 static String separator = System.getProperty("line.separator"); 
```

这是系统特定的行分隔符。HTTP 为 HTTP 标头以及 http 标头和正文分隔定义了 ctrl 换行符，因此请更改此设置。

```
 static String separator = "\r\n"; 
```

通过此更改，您将获得对浏览器的响应。

最后一点，您还应该更改您的客户端请求读取代码，因为如果您想要发布一些数据，它并不总是有效。有时，这些数据将作为原始数据传输，例如文件上传。

祝你好运

# php - 将多个关联数组合并为单个关联数组数组

> ID：12873951
> 
> 赞同：1
> 
> 时间：2012-10-13T14:17:14.257
> 
> 标签：php, arrays, multidimensional-array

我有 4 个关联数组，如下所示：

```
$ids  = array(
      '0' => '7' ,
      '1' => '8' ,
      '2' => '9'
);
$names = array (
      '0' => 'Name 1' ,
      '1' => 'Name 2' ,
      '2' => 'another name'
);
$marks = array(
      '0' => '8' ,
      '1' => '5' ,
      '2' => '8'
);
§grade = array(
      '0' => '4' ,
      '1' => '2.5' ,
      '2' => '4'
); 
```

我想将它们“合并”到一个数组中，其中包含如下关联数组：

```
$data = array(
   array(
      'id' => '7' ,
      'name' => 'Name 1' ,
      'marks' => '8',
      'grade' => '4'
   ),
   array(
      'id' => '8' ,
      'name' => 'Name 2' ,
      'marks' => '5',
      'grade' => '2.5'
   ),
   array(
      'id' => '9' ,
      'name' => 'another name',
      'marks' => '8',
      'grade' => '4'
   )
); 
```

我是一名新的 PHP 开发人员，不知道如何实现这一点。您的帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T14:20:54.640

我相信这是你的阵列

```
$ids = array('0' => '7','1' => '8','2' => '9');
$names = array('0' => 'Name 1','1' => 'Name 2','2' => 'another name');
$marks = array('0' => '8','1' => '5','2' => '8');
$grade = array('0' => '4','1' => '2.5','2' => '4');

#New Keys
$keys = array("id","name","marks","grade"); 
```

**一个**。您可以使用`MultipleIterator`

```
$final = array();
$mi = new MultipleIterator();
$mi->attachIterator(new ArrayIterator($ids));
$mi->attachIterator(new ArrayIterator($names));
$mi->attachIterator(new ArrayIterator($marks));
$mi->attachIterator(new ArrayIterator($grade));

foreach ( $mi as $value ) {
    $final[] = array_combine($keys, $value);
}
var_dump($final); 
```

**乙**。您可以使用`array_map`

```
$final = array();
foreach ( array_map(null, $ids, $names, $marks, $grade) as $key => $value ) {
    $final[] = array_combine($keys, $value);
}
var_dump($final); 
```

输出

```
array
  0 => 
    array
      'id' => string '7' (length=1)
      'name' => string 'Name 1' (length=6)
      'marks' => string '8' (length=1)
      'grade' => string '4' (length=1)
  1 => 
    array
      'id' => string '8' (length=1)
      'name' => string 'Name 2' (length=6)
      'marks' => string '5' (length=1)
      'grade' => string '2.5' (length=3)
  2 => 
    array
      'id' => string '9' (length=1)
      'name' => string 'another name' (length=12)
      'marks' => string '8' (length=1)
      'grade' => string '4' (length=1) 
```

# java - 归并排序和java实现

> ID：12873952
> 
> 赞同：1
> 
> 时间：2012-10-13T14:17:16.543
> 
> 标签：java, algorithm

假设我想使用归并排序算法。JAVA 是否有实现归并排序算法的方法/函数？

还是我必须“手动”编码算法？

我根本不懂JAVA。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T14:21:52.473

是的，有[Arrays.sort (Object[])](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Arrays.html#sort%28java.lang.Object%5B%5D,%20java.util.Comparator%29)，有来自 OpenJDK的[源代码示例](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/Arrays.java#Arrays.mergeSort%28java.lang.Object%5B%5D%2Cjava.lang.Object%5B%5D%2Cint%2Cint%2Cint%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T14:22:36.067

你可以使用[Collections.sort()](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort%28java.util.List%29)

> 排序算法是经过修改的合并排序（如果低子列表中的最高元素小于高子列表中的最低元素，则忽略合并）。该算法提供有保证的 n log(n) 性能。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-13T14:19:47.313

不，没有开箱即用的合并排序。在“java mergesort”之后的一个简单的谷歌应该会给你很多有用的结果

# php - 从mysql数据库中检索特殊字符，php

> ID：12873953
> 
> 赞同：2
> 
> 时间：2012-10-13T14:17:17.963
> 
> 标签：php, mysql, database, encoding, mysqli

我已经将一些数据插入到 mysql 数据库中。设置 utf-8 cz。它看起来不错。 ![在此处输入图像描述](../Images/abb6cb1b0c96d30e81c411cf53a9cfd9.png)

但是当我从表中回显一行时，不会显示特殊字符。包括元 utf-8。 ![在此处输入图像描述](../Images/27d5f036c1df9eb6a117285582925a0d.png)

任何想法如何解决它？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T14:21:11.177

利用

```
mysql_set_charset('utf8'); 
```

在 PHP 中执行查询之前

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T14:43:28.177

也添加这个，以确保浏览器使用正确的编码读取您的页面：

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
```

# c# - 如何返回视频（flv）路径以在 flowplayer 中显示？

> ID：12873954
> 
> 赞同：3
> 
> 时间：2012-10-13T14:17:19.780
> 
> 标签：c#, sql, asp.net-mvc, video, flowplayer

我想将 flowplayer 集成到 ASP mvc 3 应用程序中。我正在使用 SQL Server 2008。数据库包含文件的路径以及存储在文件夹中的文件。我编写了能够将视频转换为 flv 的库。现在我想在页面中使用这个视频。

有谁知道如何实现它？

我找到了 flowplayer 示例代码。

[http://flowplayer.org/docs/](http://flowplayer.org/docs/)

但我正在寻找代码隐藏解决方案（C#）如何实现类似的东西（如何返回视频路径）。如果有人有一些代码，我将不胜感激。

请看一下。

```
 public string FindMusicByID(int musicID)
    {
        var pathh = from plik in _data.musicMusicTables
                    where plik.musicMusicID == musicID
                    select new PathToFile { PathFile = plik.musicMusicPath };
        return pathh.ToString();
    } 
```

这是我正在使用的 linq 部分代码。FindMusicByID(int musicID) 返回 .flv 文件的路径。我正在寻找如何将输出文件路径发送到网页。我想在 flowplayer 中使用这条路径。

`<div class="flowplayer" data-engine="flash"> <video src="some path"></video>`

Fox 示例这是我的输出路径 d:\file.flv

我想有必要将输出发送到 JavaScript。如何通过 ID 将路径插入 flowplayer？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:31:48.547

类似于以下内容：

```
public string FindMusicByID(int musicID)
    {
        var pathh= from plik in _data.musicMusicTables
                    where plik.musicMusicID == musicID
                    select new PathToFile { PathFile = plik.musicMusicPath };
var cd = new System.Net.Mime.ContentDisposition {
                FileName = "filename",
                Inline = false
            };
Response.AppendHeader("Content-Disposition", cd.ToString());
            return File(path, asset.AssetType.MimeType); 
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T14:54:01.173

我不确定您要什么，但如果您想知道如何`.flv`为您的播放器返回文件，您只需要使用此 mimetype`Action`进行返回：`FileStremResult``video/x-flv`

# php - 如何修复 codeIgniter 中的这个错误？

> ID：12873955
> 
> 赞同：0
> 
> 时间：2012-10-13T14:17:22.290
> 
> 标签：php, smarty, codeigniter-2

我正在将 codeIgniter 与 smarty 集成为视图，我收到此致命错误：无法在第 83 行访问受保护`CI_Output::$final_output`的`/CodeIgniter_2.1.0/application/libraries/smarty_parser.php`属性。

我在谷歌上搜索然后发现它是 `protected $final_output; // in CodeIgniter_2.1.0/system/core/Output.php line no. 37`

当我改为： `public $final_output; // working fine`

我担心的是更改 CodeIgniter 核心文件是否很好，或者将来会导致任何错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T15:03:14.073

Code Igniter, as other frameworks and libraries, should not be change manually, because you lost the posibility of doing updates to your system (If you update your system, public $final_output; will change to private $final_output; and you need to do the change again).

In this situation is only one change needed, but think that you change several more lines, will you remember all the changes to do it again?

My recomendation, open a issue in Code Igniter bug tracker [https://github.com/EllisLab/CodeIgniter/issues](https://github.com/EllisLab/CodeIgniter/issues) comment your situation and ask for help. If despite all, you need to do the change, write a patch file containing the change and put it in the same folder of the original file with a descriptive name. In this manner you can apply the patch every time you update your system.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T15:03:57.430

CodeIgniter 是开源的，因此如果您认为这是正确的做法，您可以根据需要对其进行修改。我一直在修改我的。将某些东西设为公共函数通常不会引起重大问题，但是您可以考虑单独保留现有的私有 final_output() 并在 Output.php 中创建一个新的公共函数，供 Smarty 访问。您可以将此作为核心的扩展。更多信息在[这里](http://codeigniter.com/user_guide/general/core_classes.html)。

# authentication - 验证失败后设计日志

> ID：12873957
> 
> 赞同：11
> 
> 时间：2012-10-13T14:17:25.850
> 
> 标签：authentication, devise, ruby-on-rails-3.2

当有人无法登录我的应用程序时，我需要写一个日志（以跟踪暴力尝试）。我还决定记录成功的身份验证。所以我创建了一个**SessionsController < Devise::SessionsController**并尝试像这样覆盖 session#create 方法：[https ://gist.github.com/3884693](https://gist.github.com/3884693)

第一部分工作得很好，但是当身份验证失败时，rails 会抛出某种异常并且永远不会到达 if 语句。所以我不知道该怎么办。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-13T21:30:59.513

[这个答案对以前的 SO 问题 - 设计：注册登录尝试](https://stackoverflow.com/a/11229064/429758)有答案。

> 设计控制器中的创建操作调用warden.authenticate!，它尝试使用提供的参数对用户进行身份验证。如果身份验证失败，则进行身份验证！将调用设计失败应用程序，然后运行 ​​SessionsController#new 操作。请注意，如果身份验证失败，您为创建操作设置的任何过滤器都不会运行。
> 
> 因此解决方案是在新操作之后添加一个过滤器，该过滤器检查 env["warden.options"] 的内容并采取适当的操作。

我尝试了这个建议，并且能够记录成功和失败的登录尝试。这是相关的控制器代码：

```
class SessionsController < Devise::SessionsController
  after_filter :log_failed_login, :only => :new

  def create
    super
    ::Rails.logger.info "\n***\nSuccessful login with email_id : #{request.filtered_parameters["user"]}\n***\n"
  end

  private
  def log_failed_login
    ::Rails.logger.info "\n***\nFailed login with email_id : #{request.filtered_parameters["user"]}\n***\n" if failed_login?
  end 

  def failed_login?
    (options = env["warden.options"]) && options[:action] == "unauthenticated"
  end 
end 
```

该日志包含以下条目：

## 成功登录

```
Started POST "/users/sign_in"
...
...
***
Successful login with email_id : {"email"=>...
***
...
...
Completed 302 Found 
```

## 对于失败的登录

```
Started POST "/users/sign_in"
...
...
Completed 401 Unauthorized 
Processing by SessionsController#new as HTML
...
...
***
Failed login with email_id : {"email"=>...
***
...
...
Completed 302 Found 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-08-18T12:12:47.110

[Prakash 的回答](https://stackoverflow.com/a/12877182/1067145)很有帮助，但依靠`SessionsController#new`作为副作用运行并不理想。我相信这更干净：

```
class LogAuthenticationFailure < Devise::FailureApp
  def respond
    if request.env.dig('warden.options', :action) == 'unauthenticated'
      Rails.logger.info('...')
    end
    super
  end
end

...

Devise.setup do |config|

config.warden do |manager|
  manager.failure_app = LogAuthenticationFailure
end 
```

* * *

如果您希望挂钩 Warden 的回调，请查看[Graeme 的回答](https://stackoverflow.com/a/33230548/1067145)（使用 Warden 实现设计）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-10-20T07:30:08.300

我有同样的问题，但无法使用，`"warden.options"`因为在我的情况下，这些问题在重定向到操作之前已被清除`sessions#new`。在研究了一些我认为太脆弱的替代方案后（因为它们涉及扩展一些 Devise 类和给现有方法起别名），我最终使用[了`Warden`](https://github.com/hassox/warden/wiki/Callbacks). 它对我来说效果更好，因为回调是在当前请求-响应周期内调用的，并且参数都保存在`env`对象中。

这些回调被命名并且似乎旨在解决此问题和相关问题。他们被记录在案！

Warden 支持以下回调`warden-1.2.3`：

*   `after_set_user`
*   **`after_authentication`** （用于记录成功登录）
*   `after_fetch`（别名`after_set_user`）
*   **`before_failure`**（用于记录失败的登录 - 下面的示例）
*   `after_failed_fetch`
*   `before_logout`
*   `on_request`

每个回调都直接在`Warden::Manager`类上设置。为了跟踪失败的身份验证尝试，我添加了这个：

```
Warden::Manager.before_failure do |env, opts|
  email = env["action_dispatch.request.request_parameters"][:user] &&
          env["action_dispatch.request.request_parameters"][:user][:email]
  # unfortunately, the User object has been lost by the time 
  # we get here; so we take a db hit because I care to see 
  # if the email matched a user account in our system
  user_exists = User.where(email: email).exists?

  if opts[:message] == :unconfirmed
    # this is a special case for me because I'm using :confirmable
    # the login was correct, but the user hasn't confirmed their 
    # email address yet
    ::Rails.logger.info "*** Login Failure: unconfirmed account access: #{email}"
  elsif opts[:action] == "unauthenticated"
    # "unauthenticated" indicates a login failure
    if !user_exists
      # bad email:
      # no user found by this email address
      ::Rails.logger.info "*** Login Failure: bad email address given: #{email}"
    else
      # the user exists in the db, must have been a bad password
      ::Rails.logger.info "*** Login Failure: email-password mismatch: #{email}"
    end
  end
end 
```

我希望您也可以使用`before_logout`回调来跟踪注销操作，但我还没有测试过。`prepend_`回调似乎也有变体。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-19T19:34:40.590

For logout logging, you need to catch the destroy event, so add the following to the Session controller (from the above answer):

```
before_filter :log_logout, :only => :destroy  #add this at the top with the other filters

def log_logout
     ::Rails.logger.info "*** Logging out : #{current_user.email} ***\n"  
end 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-07-05T14:30:45.227

我找到了另一种方法来执行此操作，例如，如果您想在登录失败时显示自定义消息。

在我的工作中，如果登录失败，我们会检查活动状态（自定义逻辑）并显示一条消息，无论登录是否正确。

在调试了一下并阅读了warden docs之后，我现在知道了： Warden 执行 a `throw(:warden, opts)`，因此，根据 ruby​​ 文档，`throw`必须在`catch`块内捕获 a 。

```
def create
  flash.clear
  login_result = catch(:warden) { super }
  return unless login_failed?(login_result)

  email = params[:user][:email]
  flash[:alert] = # here I call my service that calculates the message
  redirect_to new_user_session_path
end

def login_failed?(login_result)
  login_result.is_a?(Hash) && login_result.key?(:scope) && login_result.key?(:recall)
end 
```

抛出文档： [https ://ruby-doc.org/core-2.6.3/Kernel.html#method-i-throw](https://ruby-doc.org/core-2.6.3/Kernel.html#method-i-throw)

捕获文档： [https ://ruby-doc.org/core-2.6.3/Kernel.html#method-i-catch](https://ruby-doc.org/core-2.6.3/Kernel.html#method-i-catch)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-10T07:07:00.187

基于 Prakash Murty 的回答，我认为这个答案中的方法（[https://stackoverflow.com/a/34816998/891359](https://stackoverflow.com/a/34816998/891359)）是记录成功登录尝试的更简洁的方法。与调用 super 不同，Devise 提供了一种`yield`在视图呈现之前传递块的方法。

所以不要这样做：

```
class SessionsController < Devise::SessionsController
  def create
    super
    ::Rails.logger.info "\n***\nSuccessful login with email_id : #{request.filtered_parameters["user"]}\n***\n"
  end
end 
```

这样做更清洁：

```
class SessionsController < Devise::SessionsController
  def create
    super do |user|
      ::Rails.logger.info "\n***\nSuccessful login with email_id : #{user.email}\n***\n"
    end
  end
end 
```

# iphone - 在 didSelectRowAtIndexPath 中的单元格上找到精确的 UIImageView

> ID：12873959
> 
> 赞同：0
> 
> 时间：2012-10-13T14:17:32.890
> 
> 标签：iphone, objective-c, ios

在我的 cellForRowAtIndexPath

```
- (UITableViewCell*)tableView:(UITableView*)tableView cellForRowAtIndexPath:(NSIndexPath*)indexPath
{
//...do cell setup etc.

            UIImage *iconthumbNail = [UIImage imageNamed:@"icon.png"];
        UIImageView * iconimgView = [[UIImageView alloc] initWithFrame:CGRectMake(265, 34, 25, 25)];
        [iconimgView setImage:iconthumbNail];
        //imgView.image = thumbNail;
        [cell addSubview:iconimgView];
        [iconimgView release];
      // add a few more UIImageViews to the cell
    } 
```

那么在我的

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{    
[tableView deselectRowAtIndexPath:indexPath animated:NO];

UITableViewCell * theCell = [tableView cellForRowAtIndexPath:indexPath];

    for (UIView * b in cell.subviews)
{
    if ([b isKindOfClass:[UIImageView class]])
    {
        // how do I check that its 'iconImgView' so that I can change it?
    }
} 
```

So I add an UIImageView in my cellForRowAtIndexPath, then when that table cell is selected I want to change one of the images in the cell, 'iconImgView' but how do I identify this UIImageView from the other UIImageViews present in that cell?

非常感谢，-代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T14:24:15.273

`UIImageView`我不会使用这种方法，而是为您正在寻找的标签分配一个标签。

```
iconimgView.tag = 1; 
```

然后在`didSelectRowAtIndexPath`方法中，使用这个：

```
UIImageView *iconimgView = (UIImageView *)[cell viewWithTag:1]; 
```

如果你仍然想按照自己的方式做，你可以这样做：

```
if ([b isKindOfClass:[UIImageView class]]) {
    UIImageView *myView = (UIImageView *)b;
    if ([b.image isEqual:[UIImage imageNamed:@"yourImageName"]]) {
        // Do your stuff
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T14:41:05.947

如果您的唯一目标是更改所选单元格的图像，则可以更有效地完成此操作。您所要做的就是读/写单元格的 imageView 属性。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *theCell = [tableView cellForRowAtIndexPath:indexPath];
    [[theCell imageView] setImage:[UIImage imageNamed:@"someImage.jpg"]];//altering the existing image
    UIImageView *myImageView = theCell.imageView;//read the image property of the cell
    [tableView deselectRowAtIndexPath:indexPath animated:YES];
} 
```

# node.js - passport.js - facebook 策略注销问题

> ID：12873960
> 
> 赞同：5
> 
> 时间：2012-10-13T14:17:42.087
> 
> 标签：node.js, express, passport.js

[我正在尝试使用此登录示例](https://github.com/jaredhanson/passport-facebook/tree/master/examples/login)设置 facebook 身份验证。示例有效，但是当我注销并尝试再次登录时，护照会自动让我进入，而无需让我选择更改 facebook 用户。关于如何改变这种行为的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T23:44:36.113

默认情况下，如果您已经授权使用 Facebook 登录，后续的身份验证请求将自动进行，不会提示用户再次授权。可以通过三个选项来更改此行为：

### 1\. 让用户退出 Facebook

这是不可取的，因为您只想让用户退出您的应用程序，而不是完全退出 Facebook。

### 2\. 从您的 Facebook 应用程序中取消对用户的授权

这是你最好的选择。为此，请使用有效的 Facebook 访问令牌进行`HTTP DELETE`调用。[在https://developers.facebook.com/docs/reference/api/user/#permissions](https://developers.facebook.com/docs/reference/api/user/#permissions)`https://graph.facebook.com/me/permissions`阅读更多内容。

### 3.强制用户每次登录时重新认证

Facebook 支持一个`auth_type`参数，设置为 时会提示用户每次登录`reauthenticate`。[在https://developers.facebook.com/docs/howtos/login/client-side-re-auth/](https://developers.facebook.com/docs/howtos/login/client-side-re-auth/)阅读更多内容。

Passport.js 不支持开箱即用地传递此参数，因此您可能需要做一些修改才能使其在您的应用程序中工作，或者向 passport-facebook GitHub 项目提交拉取请求。

但是，您可以选择提示用户每次使用特定参数重新进行身份验证。工作但不推荐的方法如下：

```
FacebookStrategy.prototype.authorizationParams = function (options) {
  var params = {},
      display = options.display,
      auth_type = options.auth_type;
  if (display) params['display'] = display;
  if (auth_type) params['auth_type'] = auth_type;
  return params;
};
passport.use(new FacebookStrategy({
    clientID: FACEBOOK_APP_ID,
    clientSecret: FACEBOOK_APP_SECRET,
    callbackURL: "http://localhost:3000/auth/facebook/callback",
    auth_type: "reauthenticate"
  },
  function(accessToken, refreshToken, profile, done) {
    process.nextTick(function () {
      return done(null, profile);
    });
  }
)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-15T03:49:16.270

Facebook Passport 支持 auth_type，即使用户在浏览器上登录，它也会重定向用户以再次登录应用程序的 OAuth 令牌。要在 Facebook 上启用此重新登录行为，请使用以下代码

```
passport.authenticate('facebook', {authType: 'reauthenticate', callbackURL:... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T22:02:58.630

您也需要从 facebook 注销（或从您的设置列表中删除该应用程序）。否则，facebook 会记住用户（您）已接受登录您的应用程序并返回应用程序而不询问您任何内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-17T17:41:13.700

当查看选项时，值为 {} ，然后我在authorizationParams 中添加了字段**auth_type = "reauthenticate"**，而不是作为选项放在构造函数中或作为身份验证选项（*两者都不适用于我*）。

```
var fbStrategy = require('passport-facebook').Strategy;
fbStrategy.prototype.authorizationParams = function (options) {
var params = {};
params.auth_type = "reauthenticate";
// params.auth_nonce = hash.digest((new Date()).getTime());
// console.log(options,":options",params)
return params;
};
passport.use('facebook',new fbStrategy({
  clientID: process.env.clientID,
  clientSecret: process.env.clientSecret,
  callbackURL: yourcallbackURL,
   // this option to pass req
  passReqToCallback : true
},
  function (req, accessToken, refreshToken, profile, cb) {
    ......
 })); 
```

# c - C: IFS System() 漏洞

> ID：12873964
> 
> 赞同：5
> 
> 时间：2012-10-13T14:18:06.550
> 
> 标签：c, security, ifs

出于教育原因，我必须利用 C 代码

Programm先设置egid，再用`system("/usr/bin/...");`Command设置漏洞。

所以我在我的主目录中创建了一个“usr”可执行文件并将路径设置为主目录`PATH=$HOME:$PATH`

我想将bash中的IFS变量更改为/：`export IFS='/'`

不幸的是，当我调用 C 程序时：我的漏洞利用不起作用

有人能告诉我出了什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T14:25:22.020

将 IFS 作为程序调用的一部分添加到`system()`. 系统使用 执行代码`/usr/bin/sh -c`。所以你可以做类似于你在 shell 提示符下所做的事情。

```
system("export IFS='/'; /usr/bin/cmd"); 
```

请注意，一旦子进程终止，IFS 集将不再在父进程中可用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T18:55:36.647

我想我们在同一所大学学习，因为我目前面临同样的问题。我不想给你整个解决方案，因为那太容易了=）

您的 IFS 变量不会被忽略，但它不像您想象的那样工作。当您调用 C-Programm 时，shell 中有一个额外的输出，它指的是 lesspipe。使用[此链接](http://www.manpagez.com/man/1/lesspipe/) [和此德语链接](http://www.linux-community.de/Internal/Artikel/Print-Artikel/LinuxUser/2002/04/lesspipe)中的信息，您可以解决挑战1 ;)

# linq - 将对象写入表时超过 8060 字节 - Windows Phone 7.5

> ID：12873966
> 
> 赞同：2
> 
> 时间：2012-10-13T14:18:28.237
> 
> 标签：linq, windows-phone-7

当我尝试将新对象添加到本地数据库时，我有这种通信：

> 表定义或行大小超过最大行大小 8060 字节。

我的表具有以下结构：

```
[Table]
public class SomeClass
{
    [Column(IsPrimaryKey = true, IsDbGenerated = true, CanBeNull = false, AutoSync = AutoSync.OnInsert)]
    public int Id { get; set; }
    [Column]
    public string String1 { get; set; }
    [Column]
    public string String2 { get; set; }
    [Column]
    public string String3 { get; set; }
    [Column]
    public string String4 { get; set; }
} 
```

其中 3 个字符串（String2、String3、String4）将包含 2000-3000 个字符。当我尝试编写较小的数据（1000 到 1500 个字符之间）时，一切正常。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T14:31:22.447

SQL Server 将记录存储在页面中，页面为 8k，因此记录不能超过该大小（与 8k 的差异是管理日期）。

您需要将文本列定义更改为`text`、`ntext`或`varchar(max)`,`nvarchar(max)`以存储更长的文本。这些 blob 列不受页面大小的限制。

# c++ - C++ 链接器在查找 openssl MD4 函数时遇到问题

> ID：12873967
> 
> 赞同：1
> 
> 时间：2012-10-13T14:18:31.497
> 
> 标签：c++, c, linker, include

我有一个正在编写的程序，需要计算一些哈希值。我需要 SHA、MD、HMAC 算法。这就是我选择`openssl`作为解决方案的原因。

我的代码如下：

```
#include <openssl/md4.h>

void calc();

void calc(unsigned char* data, unsigned long len) {
  unsigned char* h = new unsigned char[128];
  MD4(data, len, h);
} 
```

编译器返回给我以下信息：

> myfile.cpp:(.text+0x3e): undefined reference to `MD4' collect2: ld returned 1 exit status

我简单地编译使用：

```
g++ myfile.cpp -o myapp.o 
```

在 Linux Fedora 下。

我从[这里](http://www.openssl.org/source/)`openssl`下载了库，并使用然后在下载的解压缩目录中编译了它们。我还在目录中复制了我下载的目录，以便编译器可以找到头文件，因为它在我的环境变量中。`./configure``make install``/usr/local/include``include``/usr/local/include``$PATH`

但是问题是链接器找不到该函数。我知道原因可能有两个：

*   编译器可以找到头文件但找不到实现。
*   有问题是因为`openssl`写在`C`not in 中`C++`。

我应该如何进行？谢谢

## 编辑1

我实际上改变了我的`openssl installation`.

我`openssl`再次安装，我可以看到它将所有内容放在`/usr/local/ssl`我可以找到的目录`/usr/local/ssl/include`和`/usr/local/ssl/lib`目录下。我将编译字符串更改为：

```
g++ -I/usr/local/ssl/include -L/usr/local/ssl/lib -lssl -lcrypto 
```

在我之前提到的目录中，我可以分别找到`/usr/local/ssl/include/openssl`包含所有标题的目录`/usr/local/ssl/lib/libssl.a`和`/usr/local/ssl/lib/libcrypto.a`库。

在我使用旧的编译命令进行此更改之前，编译器告诉我：`Cannot find -lssl`. 通过这些更改，现在它可以找到库和头文件，但`ld`总是以同样的方式失败：

> myfile.cpp:(.text+0x3e): undefined reference to `MD4' collect2: ld returned 1 exit status

有点失望。你怎么看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T14:23:34.953

链接反对`openssl`通常需要`-lssl`.

```
g++ -o myapp myfile.cpp -lssl 
```

顺便说一句，听起来您的安装可能有点不正确。

您不必在任何地方复制头文件。而且您可能还没有复制共享库。

编译应该是这样的：

```
./configure --prefix=/usr/local/openssl
make
make install 
```

然后你编译你的程序，如：

```
g++ -c -o myapp1.o myfile1.cpp -I/usr/local/openssl/include
g++ -c -o myapp2.o myfile2.cpp -I/usr/local/openssl/include
g++ -o myapp myapp1.o myapp2.o -I/usr/local/openssl/include -L/usr/local/openssl/lib -lssl -lcrypto 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T14:27:14.137

该错误是因为您在编译期间没有将程序链接到 openssl 库。

修复它

```
g++ myfile.cpp -o myapp.o -lssl 
```

请参阅[GCC 中的 OpenSSL 链接选项 -lssl 和 -lcrypto](https://stackoverflow.com/questions/8829670/openssl-link-options-lssl-and-lcrypto-in-gcc)

了解如何将程序链接到 openssl。

# java - 无法识别的图像文件格式 - UiBinder

> ID：12873970
> 
> 赞同：1
> 
> 时间：2012-10-13T14:19:01.217
> 
> 标签：java, gwt

当我输入时出现此错误

在我的 UiBinder 文件中，错误是：

```
[DEBUG] [MyGWT] - Rebinding com.mycomp.mygwt.client.Resources
    [DEBUG] [MyGWT] - Invoking generator com.google.gwt.resources.rebind.context.InlineClientBundleGenerator
        [DEBUG] [MyGWT] - Preparing method logo
            [TRACE] [MyGWT] - Adding image 'com.mycomp.mygwt.client.Resources.logo'
                [ERROR] [MyGWT] - Unrecognized image file format
        [ERROR] [MyGWT] - Generator 'com.google.gwt.resources.rebind.context.InlineClientBundleGenerator' threw an exception while rebinding 'com.mycomp.mygwt.client.Resources' 
```

路径中的图像文件是我在之前的 GWT 应用程序中使用的 PNG 文件。我真的不知道为什么 GWT 会抛出错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T17:33:34.410

某些版本的 Windows 上带有一些 PNG 文件的特定 JDK 似乎存在问题 - 尝试稍微修改图像或使用不同的 JDK 来解决此问题。

关于这个问题的更多细节和讨论：

*   在 GWT 问题跟踪器上报告[http://code.google.com/p/google-web-toolkit/issues/detail?id=5810](http://code.google.com/p/google-web-toolkit/issues/detail?id=5810)
*   关于 sencha.com 的讨论，包括有关似乎可以工作的 JVM 的详细信息[http://www.sencha.com/forum/showthread.php?161485-GXT-on-build-server](http://www.sencha.com/forum/showthread.php?161485-GXT-on-build-server)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T14:24:35.467

您是否使用 cvs 并将图像检查到此存储库中？

如果是，您应该检查文件类型是否设置为 hte png 后缀的二进制。否则 cvs 假定该文件是一个文本文件并可能损坏该文件。

# macos - 任何带有预定义文本热键 PASTE 的 Mac 文本编辑器可以加快编码速度？

> ID：12873973
> 
> 赞同：0
> 
> 时间：2012-10-13T14:19:32.493
> 
> 标签：macos, text-editor, textedit

在 Mac 上使用 TextEdit 编写 PHP。必须输入我一遍又一遍使用的相同代码行（`Ex: MyClass::myLocalizedString('Hello');`）总是很烦人。

任何人都知道一个有用的 Mac 编辑器，它可以通过允许我预定义字符串并将其绑定到热键组合来节省我的时间？

`Ex: Cmd+1 pastes the text MyClass::myLocalizedString('');`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T09:44:38.057

[Tincta Pro](http://mr-fridge.de/software/tincta)还具有带有快捷扩展的代码片段功能。

（免责声明：我是 Tincta 的开发者）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T14:50:27.397

我认为有很多选择。例如，您可以使用[Keyboard Maestro](http://www.keyboardmaestro.com)创建热键或使用[TextExpander](http://smilesoftware.com/TextExpander/)来创建短片段。我认为您也可以使用[Quicksilver](http://qsapp.com)创建它，但对此我不确定。

# css - 模拟“过滤器：阴影”行为以获得更好的浏览器支持

> ID：12873974
> 
> 赞同：0
> 
> 时间：2012-10-13T14:19:42.587
> 
> 标签：css, cross-browser, dropshadow

我有以下设计。

![卡片布局](../Images/4f17fdddf5e0acf34ec65a4e51d83e03.png)

以下是相同的标记。

```
<div class="card">
    <div class="card-bar">&nbsp;</div>
    <div class="card-content">
        <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo.</p>
    </div>
</div> 
```

以下是整个布局的 CSS。

```
.card {
    display: block;
    margin: auto;
    width: 500px;
    filter: drop-shadow(0px 1px 2px rgba(0,0,0,.5));
}
.card .card-bar {
    height: 60px;
    background: #F8F8F8;
    border-radius: 4px 4px 0px 4px;
}
.card .card-content {
    display: block;
    margin-top: -35px;
    width: 85%;
    float: right;
    padding: 5px 10px 5px 10px;
    background: #F8F8F8;
    border-radius: 0px 0px 4px 4px;
} 
```

使用`box-shadow`不会给出完全相同的外观（或者可能是我不知道如何制作），所以我使用了`filter: drop-shadow`属性。而且由于这个属性对[浏览器的支持非常有限](http://caniuse.com/#feat=css-filters)。我怎样才能用标准`box-shadow`属性来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T13:59:38.957

您可以使用伪元素来覆盖框阴影中的重叠......

```
.card-bar:after {
  content: '';
  position: absolute;
  top: 0;
  right: -3px;
  border-right: solid #f8f8f8 3px;
  height: 110%;
} 
```

在此处查看演示：http: [//jsfiddle.net/2SBBv/](http://jsfiddle.net/2SBBv/)

​</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T19:14:26.340

您可以在 Firefox 中使用 SVG 创建等效的投影，并为 IE 使用 DX 过滤器。我会将栏创建为 :before 生成的内容。

```
.shadowed {
-webkit-filter: drop-shadow(0px 1px 2px rgba(0,0,0,0.5));
filter: url(#drop-shadow);
-ms-filter: "progid:DXImageTransform.Microsoft.Dropshadow(OffX=0, OffY=1, 
Color='#444')";
filter: "progid:DXImageTransform.Microsoft.Dropshadow(OffX=0, OffY=1, 
Color='#444')";
}

<!-- HTML elements here -->

<svg height="0" xmlns="http://www.w3.org/2000/svg">
<filter id="drop-shadow">
<feGaussianBlur in="SourceAlpha" stdDeviation=".2"/>
<feOffset dx="0" dy="1" result="offsetblur"/>
<feFlood flood-color="rgba(0,0,0,0.5)"/>
<feComposite in2="offsetblur" operator="in"/>
<feMerge>
<feMergeNode/>
<feMergeNode in="SourceGraphic"/>
</feMerge>
</filter>
</svg> 
```

我最近写过这篇文章：[true drop-shadow 和 box-shadow 之间的一些比较](http://demosthenes.info/blog/598/boxshadow-property-vs-dropshadow-filter-a-complete-comparison)，以及[一篇关于我刚刚描述的技术的文章](http://demosthenes.info/blog/600/Creating-a-True-CrossBrowser-Drop-Shadow-Effect-With-CSS3-&-SVG)。

# python - 将python列表转换为numpy结构化数组时维护字符串

> ID：12873975
> 
> 赞同：4
> 
> 时间：2012-10-13T14:19:44.190
> 
> 标签：python, numpy

我有一个看起来像这样的数据结构：

```
data = [ ('a', 1.0, 2.0),
         ('b', 2.0, 4.0),
         ('c', 3.0, 6.0) ] 
```

我想使用 numpy 将其转换为结构化数组。但是，当我尝试以下操作时，我保留了浮点数，但我丢失了字符串信息：

```
import numpy
x = numpy.array(data, dtype=[('label', str), ('x', float), ('y', float)])
print x 
```

导致：

```
>>> [('', 1.0, 2.0) ('', 2.0, 4.0) ('', 3.0, 6.0)] 
```

谁能解释为什么会发生这种情况，以及我如何保留字符串信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T14:26:53.870

如果您打印出数组并仔细查看，您可以看到问题：

```
>>> numpy.array(data, dtype=[('label', str), ('x', float), ('y', float)])
array([('', 1.0, 2.0), ('', 2.0, 4.0), ('', 3.0, 6.0)], 
      dtype=[('label', '|S0'), ('x', '<f8'), ('y', '<f8')]) 
```

第一个字段的数据类型为`'|S0'`——*零宽度*字符串字段。使字符串字段更长——这是一个 2 字符的字符串字段：

```
>>> numpy.array(data, dtype=[('label', 'S2'), ('x', float), ('y', float)])
array([('a', 1.0, 2.0), ('b', 2.0, 4.0), ('c', 3.0, 6.0)], 
      dtype=[('label', '|S2'), ('x', '<f8'), ('y', '<f8')]) 
```

您也可以这样做，如此[处所述](http://docs.scipy.org/doc/numpy/reference/arrays.dtypes.html)：

```
>>> numpy.array(data, dtype=[('label', (str, 2)), ('x', float), ('y', float)])
array([('a', 1.0, 2.0), ('b', 2.0, 4.0), ('c', 3.0, 6.0)], 
      dtype=[('label', '|S2'), ('x', '<f8'), ('y', '<f8')]) 
```

# ios - CoreData - 在 ViewWillAppear 中获取关系以计算它

> ID：12873978
> 
> 赞同：0
> 
> 时间：2012-10-13T14:20:34.630
> 
> 标签：ios, xcode, core-data

不知道为什么这让我如此悲伤，但是，这里是：

我想要所有包含关系数据的 tableViewCells 上的徽章。我的应用程序的第一个视图使用 fetchedResultsController 用团队名称填充 tableViewCells。我希望徽章显示与每个团队相关的运动员人数。我正在尝试拉关系以在 viewWillAppear 方法中为每个团队计算它。我想做类似的事情：

```
Team *team = [fetchedResultsController objectAtIndexPath:indexPath];
NSString *counted = [team.athletes count]; 
```

但这在 ViewWillAppear 中不起作用，因为我没有声明的 indexPath 并且不知道该怎么做。这必须是最简单的事情之一，但每次我遇到它时都会让我陷入困境。

非常感谢任何和所有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T14:33:36.773

您应该这样做`tableView:cellForRowAtIndexPath:`（或者可能`configureCell:forIndexPath:`经常用于将获取的结果控制器与表视图结合起来）。

请注意，`[team.athletes count]`返回一个`int`，而不是一个`NSString`，所以你可能想要

```
NSString *counted = [NSString stringWithFormat:@"%d", [team.athletes count]]; 
```

# java - JIT 编译器和匿名内部类

> ID：12873982
> 
> 赞同：5
> 
> 时间：2012-10-13T14:21:02.227
> 
> 标签：java, optimization, compiler-construction

当我们使用框架或库时，匿名类的回调函数是一种常见的方法，因此了解 JIT 是否执行此类优化非常有用。

我想知道 JIT 编译器是否足够聪明，可以理解它们每次都会执行一些代码并编译成本机？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T14:42:19.190

与任何其他代码一样，JIT 编译器会在执行足够多的时间后对其进行编译和优化（默认情况下，Hotspot 服务器 VM 为 10000，客户端 VM 为 1500），因此 JIT 有足够的数据作为基础它的优化。

仅仅因为它是匿名的并不意味着它的处理方式有任何不同：它仍然是一个类，在编译期间生成了一个名称（MyClass$1）。

# haskell - 如何创建两个复杂数据结构的差异？

> ID：12873988
> 
> 赞同：18
> 
> 时间：2012-10-13T14:21:40.623
> 
> 标签：haskell, data-structures

### 问题说明：

我目前正在寻找一个优雅和/但有效的解决方案来解决我认为很常见的问题。考虑以下情况：

我定义了一个基于[BTree](http://en.wikipedia.org/wiki/Btree)的文件格式（以简化的方式），如下所示：

```
data FileTree = FileNode [Key] [FileOffset]
              | FileLeaf [Key] [Data] 
```

从文件中读取并将其写入惰性数据结构已实现并且工作正常。这将导致以下实例：

```
data MemTree = MemNode [Key] [MemTree]
             | MemLeaf [Key] [Data] 
```

现在我的目标是拥有一个通用函数`updateFile :: FilePath -> (MemTree -> MemTree) -> IO ()`，它将读入`FileTree`并将其转换为 MemTree，应用该`MemTree -> MemTree`函数并将更改写回树结构。问题是必须以某种方式保存 FileOffsets。

我有两种方法来解决这个问题。他们都缺乏优雅和/或效率：

### 方法 1：扩展 MemTree 以包含偏移量

这种方法扩展了 MemTree 以包含偏移量：

```
data MemTree = MemNode [Key] [(MemTree, Maybe FileOffset)]
             | MemNode [Key] [Data] 
```

然后 read 函数将读入`FileTree`并存储在参考`FileOffset`旁边`MemTree`。写入将检查引用是否已经具有关联的偏移量，如果有，则仅使用它。

*优点*：易于实现，无需开销即可找到偏移量

*缺点*：向负责将偏移量设置为的*用户*公开内部信息`Nothing`

### 方法 2：在二级结构中存储偏移量

解决这个问题的另一种方法是读入`FileTree`并创建一个`StableName.Map`保留在`FileOffsets`. 这样（如果我理解正确的语义）`StableName`应该可以在. 如果有条目，则节点是干净的，不必再次写入。`MemTree``StableName``StableName.Map`

*优点*：不向用户公开内部结构

*缺点*：涉及在地图中查找的开销

### 结论

这是我能想到的两种方法。第一个应该更高效，第二个更*悦目*。我希望您对我的想法发表评论，也许有人甚至有更好的方法？

### [编辑] 合理

我正在寻找这样的解决方案有两个原因：

一方面，您应该尝试使用类型系统在错误出现之前对其进行处理。前面提到的*用户*当然是系统下一层的设计者（即我）。通过处理纯树表示，某些类型的错误将不会发生。对文件中树的所有更改都应该在一个地方。这应该使推理更容易。

另一方面，我可以实现类似的东西`insert :: FilePath -> Key -> Value -> IO ()`并完成它。但是，当我通过更新树来保留（一种）日志时，我将失去一个非常好的特征。事务（即合并多个插入）只是在内存中的同一棵树上工作并将差异写回文件的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-26T04:18:34.487

我认为包[Data.Generic.Diff](https://hackage.haskell.org/package/gdiff-1.1/docs/Data-Generic-Diff.html)可能完全符合您的要求。它参考了某人的论文来了解它是如何工作的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T10:39:45.160

我是 Haskell 的新手，所以我不会显示代码，但希望我的解释可能有助于解决问题。

首先，为什么不只向用户公开 MemTree，因为这是他们将更新的内容，并且 FileTree 可以完全隐藏。这样，稍后，如果您想将其更改为访问数据库，例如，用户不会看到任何差异。

所以，既然 FileTree 是隐藏的，为什么不在你要更新的时候把它读进去，那么你就有了偏移量，所以更新，然后再次关闭文件。

保留偏移量的一个问题是它会阻止另一个程序对文件进行任何更改，在您的情况下这可能很好，但我认为一般来说这是一个糟糕的设计。

我看到的主要变化是 MemTree 不应该是懒惰的，因为文件不会保持打开状态。

# javascript - Javascript中异步调用的范围

> ID：12873990
> 
> 赞同：0
> 
> 时间：2012-10-13T14:22:03.073
> 
> 标签：javascript, jquery, oop, asynchronous, scope

我有以下代码用于定义一个类

```
var class1 = function () {
    this.classData = 'value1';
    this.func1 = function(callback) {
        $.ajax({
            'url': '/somewhere',
            'dataType': 'json',
            'type': 'POST',
            'data': {
                options: 'some text'
            },
            'success': function (data, textStatus, jqXHR) {
                callback(data); // <<<<<< THIS LINE
            }
        });
    };
}; 
```

然后我像这样打电话给班级

```
var obj1 = new class1();
obj1.func1(function (d) {
    this.classData = d;
}); 
```

但这似乎不起作用，因为在 sucess 函数内部，当在上面代码中标记的行调用回调函数时，它的`this`对象指向`window`而不是`obj1`值。

我在这里做错了什么，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T14:22:52.223

这实际上不是范围问题，而是上下文问题。`this`，当你的函数被调用时，是调用时函数的接收者，而不是对象`obj1`。

做这个 ：

```
var obj1 = new class1();
obj1.func1(function (d) {
    obj1.classData = d;
}); 
```

这是正确的方法。

如果您的回调都意味着将 class1 的实例作为接收者，您也可以这样做：

```
var class1 = function () {
    this.classData = 'value1';
    var _this = this;
    this.func1 = function(callback) {
        $.ajax({
            'url': '/somewhere',
            'dataType': 'json',
            'type': 'POST',
            'data': {
                options: 'some text'
            },
            'success': function (data, textStatus, jqXHR) {
                _this.callback(data); // note that I call the callback on the instance of obj1
            }
        });
    };
}; 
```

# c# - 从两个不同的列表创建一个列表

> ID：12873995
> 
> 赞同：0
> 
> 时间：2012-10-13T14:22:20.307
> 
> 标签：c#, asp.net, .net, drop-down-menu

我有两个清单。一份人员列表和一份组织列表。我想将这些列表相互添加并创建一个新列表，然后将此列表绑定到 DropDownList。值得注意的是，我想在这个列表中添加另一个属性，当我想从 DropDownList 中选择一个项目时，它给我这个项目是个人或组织。如何创建此列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T14:38:02.003

重读您的问题，也许您不应该使用 Zip（或者也许有比我即将发布的更好的方法）。

创建一个可以包含两者的单独类，让它标记它是一个人还是一个组织，然后构建一个列表：

```
public class PersonOrganizationEntry
{
    public Person Person { get; private set; }
    public Organization Organization { get; private set; }

    public PersonOrganizationType Type { get; private set; }

    public PersonOrganizationEntry(Person person)
    {
        this.Person = person;
        this.Type = PersonOrganizationType.Person;
    }

    public PersonOrganizationEntry(Organization organization)
    {
        this.Organization = organization;
        this.Type = PersonOrganizationType.Organization;
    }
}

public enum PersonOrganizationType
{
    Person,
    Organization
} 
```

然后将您的列表与这种新类型合并在一起：

```
var persons = new List<Person>()
{
    new Person(),
    new Person(),
    new Person()
};

var organizations = new List<Organization>()
{
    new Organization(),
    new Organization()
};

var mergedEntries = 
        persons.Select(p => new PersonOrganizationEntry(p))
    .Concat(
        organizations.Select(o => new PersonOrganizationEntry(o))
    ).ToList(); 
```

然后你可以将你的下拉列表绑定到这个`PersonOrganizationEntry`. 每个“Person”条目都会有一个分配给条目`Person`字段的实例，并且`Type`将是`PersonOrganizationType.Person`. 组织反之亦然。

# php - 如何提高 url 参数中文本的安全性：.php?parameter=text

> ID：12873996
> 
> 赞同：0
> 
> 时间：2012-10-13T14:22:24.253
> 
> 标签：php, security, url, parameters

此 url 包含一个带有文本的参数：

> my-page.php ?id_article=1&alias=article-name

改写后的结果是：

> 1-文章名称.php

对于 id_article 参数，我做了这个安全性：

```
if (isset($_GET[id_article] && $_GET[article] != null && $_GET[id_article] >= 1 && $_GET[id_article] <= 4 && (int) $_GET[id_article]) 
```

我可以为接受文本的别名参数做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T14:32:19.483

首先，别名是否从数据库中获取？

例如：

```
my-page.php ?id_article=1&alias=article-name 
```

改写后的结果是：

```
1-article-name.php 
```

我的问题是：你要显示什么`1-article-name.php`，内容是从 mysql 数据库中获取的吗？

如果是这样，只需用于[`mysql_real_escape_string`](http://php.net/manual/fr/function.mysql-real-escape-string.php)清理别名。

当然，首先别名不能为空：

```
if(!empty($_GET['alias'])){} 
```

然后使用[`mysql_real_escape_string`](http://php.net/manual/fr/function.mysql-real-escape-string.php)

不要认为: `$_GET`, `$_POST`, `$_COOKIE`, 等是安全的。

如果您在某些针对 MySql 的 SQL 中嵌入字符串，请使用[`mysql_real_escape_string`](http://php.net/manual/fr/function.mysql-real-escape-string.php)函数来清理您的变量，为此您必须使用 MySql 的函数转义字符串：

使用[`htmlspecialchars`](http://php.net/manual/function.htmlspecialchars.php)如果您在 HTML 标记中嵌入字符串，则必须使用 htmlspecialchars 对其进行转义。这意味着每个 echo 或 print 语句都应该使用 htmlspecialchars。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T14:42:13.510

在大多数情况下，无需对路线进行消毒，只需检查您的预期即可。

```
<?php 
//id_article (Not empty and is numeric and lower then or equals 4)
if(!empty($_GET['id_article']) && is_numeric($_GET['id_article']) && $_GET['id_article'] <= 4){}

//alias (Not empty)
if(!empty($_GET['alias'])){}
?> 
```

**笔记：**

如果您正在决定路由是否是选定的文件，例如：`./some_path/1-article-name.php`那么您至少应该使用 basename() 并检查文件是否存在。

如果您要针对数据库查询字符串，您应该使用 sql 转义参数或使用 PDO 或 mysqli 和准备好的语句。

# php - JQuery 和 PHP 日期的区别

> ID：12873999
> 
> 赞同：0
> 
> 时间：2012-10-13T14:22:51.127
> 
> 标签：php, jquery

我正在使用 jquery 日期选择器，并通过 php date('YmD') 函数设置日期。他们都给今天不同的日期。Jquery 选择器使用比 php date() 提前一天的日期填充字段。这是jquery的功能。我需要 jquery 来显示今天与 php 相同的日期。

```
<script type="text/javascript" charset="utf-8">
        var $j = jQuery.noConflict();                   
         $j(function()
            {

                // initialise the "Select date" link
                $j('#date-pick')
                    .datePicker(
                        // associate the link with a date picker
                        {
                            createButton:false,
                            startDate: '01/01/1970',
                            endDate: (new Date()).asString()
                            //endDate:<?php echo date('y-m-d'); ?>
                        }
                    ).bind(
                        // when the link is clicked display the date picker
                        'click',
                        function()
                        {
                            updateSelects($j(this).dpGetSelected()[0]);
                            $j(this).dpDisplay();
                            return false;
                        }
                    ).bind(
                        // when a date is selected update the SELECTs
                        'dateSelected',
                        function(e, selectedDate, $td, state)
                        {
                            updateSelects(selectedDate);
                        }
                    ).bind(
                        'dpClosed',
                        function(e, selected)
                        {
                            updateSelects(selected[0]);
                        }
                    ).val(new Date().asString()).trigger('change');

                var updateSelects = function (selectedDate)
                {
                    var selectedDate = new Date(selectedDate);
                    if(selectedDate != "Invalid Date")
                    {
                    $j('#d').val(selectedDate.getDate());
                    $j('#m').val(selectedDate.getMonth()+1);
                    $j('#y').val(selectedDate.getFullYear());
                    }
                }
                // listen for when the selects are changed and update the picker

                // default the position of the selects to today
                var today = new Date();
                updateSelects(today.getTime());

            });
        </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T14:35:34.143

jQuery 使用客户端计算机的日期，而 php 使用服务器的日期。如果您没有在 php.ini 中设置默认时区，它们基本上是不同的。看看这个： http: [//php.net/manual/en/function.date-default-timezone-set.php](http://php.net/manual/en/function.date-default-timezone-set.php)

您可以在位于 PHP 主目录的 php.ini 文件中设置默认时区（例如 PHP5.4）

至于在 datepicker 中使用服务器的日期：

一个快速的谷歌搜索让我知道：[如何在 jquery datepicker 中显示服务器端日期？](https://stackoverflow.com/questions/5037861/how-to-display-server-side-dates-in-jquery-datepicker) 基本上他们所做的是根据当前时间戳创建一个新日期：

```
$timestamp = strtotime("2012-08-02");

minDate: new Date('<?php echo $timestamp; ?>'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T14:40:01.937

不要相信客户的日期和时间

这些值可以随意更改。

只是在建议时使用它们。

除了 Javascript 还可以增强用户体验（即使其更具交互性）。但是在一天结束时，您将不得不拿起您未验证的部分并验证您从客户端获得的数据