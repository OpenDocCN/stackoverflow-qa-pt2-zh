# StackOverflow 问答 15157000-15157999

# ajax - 如何检测使用 AJAX 的网站何时完全加载？

> ID：15157002
> 
> 赞同：1
> 
> 时间：2013-03-01T11:47:11.210
> 
> 标签：ajax, delphi, webbrowser-control, twebbrowser

对于不使用 AJAX 的网站，我使用`OnDocumentComplete`事件来了解页面加载何时完成。

我的问题是，如何检测使用 AJAX 请求的网站何时准备就绪（例如，当使用 AJAX 获取某些搜索结果的网站完成工作时）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T09:22:31.203

好的，这是我自己开发的一个技巧。

1-在您的 html 页面中创建一个 div 并将其文本设置为“false”。

2-在您的服务器端在返回代码的末尾放置一个 javascript。例如，您的网站在 ajax 调用时返回以下文本。

一个 b c d e

因此，在此文本之后放置一个 javascript 代码，将 div 的文本从“false”更改为“true”

所以将会发生的是，一旦您收到来自 ajax 调用的所有数据，您还将收到 javascript 代码，并且该代码将运行并设置 div 的值。

因此，一旦收到所有数据，您就会在页面中看到指标 div。你会知道你已经收到了所有的数据。您也可以在完成数据后以类似的方式运行函数。

# javascript - 如何使用带有 SpringMVC 的 AngularJS 异步加载数据？

> ID：15157008
> 
> 赞同：2
> 
> 时间：2013-03-01T11:47:29.357
> 
> 标签：javascript, jquery, spring, spring-mvc, angularjs

我是 AngularJS 的新手，一直想知道处理以下情况的最佳方法：

**1.**我需要显示过去 30 天的数据行。（默认选项）

**我是怎么做的：**当页面加载时，Spring 控制器将列表放入模型属性中。

```
@RequestMapping(value="/show/data", method = RequestMethod.GET)
    public String getDataPage(ModelMap model) {
        //cropped for brevity
        List<Data> dataList = dataService.getData(fromDate, toDate);
        model.addAttribute("dataList ", dataList );

        return "data-page";
    } 
```

在 JSP 中，我使用 EL 标记循环遍历列表并以表格形式向用户显示数据

```
<c:forEach var="currentData" items="${dataList}">
    <tr>
        <td>${currentData.name}</td>
        <td>${currentData.address}</td>
        <td>${currentData.email}</td>
        <td>${currentData.phone}</td>
    </tr>
</c:forEach> 
```

1.  用户可以选择日期范围并根据所选范围（例如今天、昨天、上周、上个月、自定义范围），显示的数据应该更新。

**我是怎么做的：**我正在使用 Bootstrap-Daterangepicker ( [https://github.com/dangrossman/bootstrap-daterangepicker](https://github.com/dangrossman/bootstrap-daterangepicker) ) 来显示标记。它为我提供了一个回调函数。

```
$('#reportrange').daterangepicker(options, callback); 
```

例如`$('#reportrange').daterangepicker(options, function(startDate, endDate){});`

如果没有 AngularJS，这将是一团糟。我可以调用 jQuery ajax，然后获取一个列表，然后在 jQuery 中处理 DOM 元素。但这很混乱。

我如何在这种情况下包含 AngularJS 以使我的生活更轻松。（而且代码不那么干净）请帮忙。我被困住了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T13:07:47.693

您必须使用 Angular [$http 服务](http://docs.angularjs.org/api/ng.%24http)。为了更好的抽象，您应该使用[$resource service](http://docs.angularjs.org/api/ngResource.%24resource)。

```
var mod = angular.module('my-app', ['ngResource']);

function Controller($scope, $resource) {
  var User = $resource('http://serveraddress/users?from=:from&to=:to', null, {
      getAll: {method: 'JSONP', isArray: true}
    });

  $scope.changeDate = function(fromDate, toDate) {
    $scope.users = User.getAll({from: fromDate, to: toDate});
  };

  $scope.users = User.getAll();
} 
```

```
<html ng-app="my-app">
<div ng-controller="Controller">
  <input type="text" my-date-picker="changeDate($startDate, $endDate)" />
  <table>
    <tr ng-repeat="user in users">
      <td>{{user.name}}</td>
      <td>{{user.address}}</td>
    </tr>
  </table>
</div>
</html> 
```

为了适应 DateSelector，您希望创建一个指令来封装其要求。最简单的一个是：

```
mod.directive('myDatePicker', function () {
    return {
    restrict: 'A',
        link: function (scope, element, attr) {
            $(element).daterangepicker({}, function (startDate, endDate) {
                scope.$eval(attr.myDatePicker, {$startDate: startDate, $endDate: endDate});
            });
        }
    };
}); 
```

无需担心同步问题。由于 $resource 是基于[promises](http://docs.angularjs.org/api/ng.%24q)的，它会在数据准备好时自动绑定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-12T08:39:43.883

你应该这样做：

SpringMVC 控制器：

```
@RequestMapping(value="/load/{page}", method = RequestMethod.POST)  
public @ResponseBody String getCars(@PathVariable int page){  
            //remember that toString() has been overridden  
            return cars.getSubList(page*NUM_CARS, (page+1)*NUM_CARS).toString();  
} 
```

AngularJS 控制器：

```
function carsCtrl($scope, $http){  
    //when the user enters in the site the 3 cars are loaded through SpringMVC  
    //by default AngularJS cars is empty  
    $scope.cars = [];  

    //that is the way for bindding 'click' event to a AngularJS function  
    //javascript cannot know the context, so we give it as a parameter  
    $scope.load = function(context){  
       //Asynchronous request, if you know jQuery, this one works like $.ajax  
       $http({  
              url: context+'/load/'+page,  
              method: "POST",  
              headers: {'Content-Type': 'application/x-www-form-urlencoded'}  
       }).success(function (data, status, headers, config) {  
              //data contains the model which is send it by the Spring controller in JSON format  
              //$scope.cars.push is the way to add new cars into $scope.cars array  
              for(i=0; i< data.carList.length; i++)  
                 $scope.cars.push(data.carList[i]);  

              page++; //updating the page  
              page%=5; //our bean contains 15 cars, 3 cars par page = 5 pages, so page 5=0  

        }).error(function (data, status, headers, config) {  
              alert(status);  
        });             
    }  
} 
```

看法

```
<!-- Activating AngularJS in the entire document-->  
<html ng-app>  
    <head>  
        <!-- Adding AngularJS and our controller -->  
        <title>Luigi's world MVC bananas</title>  
        <link href="css/style.css" rel="stylesheet">  
        <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.4/angular.min.js"></script>  
        <script src="js/controller.js"></script><!-- our controller -->  
    </head>  
    <!-- Activating carsCtrl in the body -->  
    <body ng-controller="carsCtrl">  

         <div class="carsFrame">  

               <!-- AngularJS manages cars injection after have loaded the 3 first-->  
               <!-- We use ng-src instead src because src doesn't work in elements generated by AngularJS  -->  
               <div ng-repeat="car in cars" class="carsFrame">  
                   <img ng-src="{{car.src}}"/>  
                   <h1>{{car.name}}</h1>  
               </div>  
         </div>  

         <div id="button_container">  
               <!-- ng-click binds click event with AngularJS' $scope-->  
               <!-- Load function is implemented in the controller -->  
               <!-- As I said in the controller javascript cannot know the context, so we give it as a parameter-->  
               <button type="button" class="btn btn-xlarge btn-primary" ng-click="load('${pageContext.request.contextPath}')">3 more...</button>  
         </div>  
    </body>  
</html> 
```

完整的例子在[这里](http://www.luigisworld.com/2013/12/combining-springmvc-with-angularjs.html#more)

# objective-c - 应用程序试图以模态方式呈现一个活动控制器：UIImagePickerController

> ID：15157009
> 
> 赞同：5
> 
> 时间：2013-03-01T11:47:30.240
> 
> 标签：objective-c, ios5, ios6, uiimagepickercontroller, presentmodalviewcontroller

我为此挣扎了两天，并相信这是我应该寻求帮助的时刻。在我搜索 SOF 一段时间后，没有任何答案可以解决我的问题。这是我的申请...

在申请中，

*   设备是 iPad，iOS 6
*   RootViewController 是 NavigationController
*   TopViewController 是 TabBarController
*   在这个 TabBarController 中，我从导航栏的右栏按钮展示了一个 popoverController
*   在呈现弹出框时，有一个按钮允许用户通过获取新图像或从现有图像中选择图像。
*   为了选择新的，我展示了 ViewController UIImagePickerController 以允许用户使用 divice 相机拍照。**presentModalViewController:animated:**如果 iOS < 6，并且**presentViewController:animated:completion:**对于 iOS > 6
*   我还在演示之前隐藏状态栏
*   要从现有照片中进行选择，我会**使用 PresentPopoverFromBarButtonItem:permitArrowDirections:animated:**
*   PopoverViewController 也被 A TabBarController 引用

这是问题

*   如果用户尝试先选择新的 UIImagePickerController 将始终失败，但出现异常**“应用程序试图以模态方式呈现活动控制器 <[试图呈现的视图控制器的名称]>”**
*   **但是**，如果用户尝试从相机胶卷中选择一次图像，然后尝试再次拍摄新的图像，它不会失败。

这是我尝试过的

*   从 RootViewController 呈现
*   从 TopViewController (TabBarController) 呈现
*   从 popoverViewController 本身呈现
*   从 TabBarController 的选项卡呈现
*   在演示之前隐藏 popoverViewController
*   来自 popoverViewController 中的 textField 的 resignFirstResponder

这是我正在使用的当前代码

```
// PopoverViewController, presented by a tab in TabBarController
- (IBAction)takePhoto:(id)sender {
    [self.delegate takePhotoWithDeviceCamera];
}

// A Tab in TabBarController, delegate of popoverViewController
- (void)takePhotoWithCamera {
    [[UIApplication sharedApplication] setStatusBarHidden:YES];
    if ([UIDevice OSVersion] < 6.0) {
        [self presentModalViewController:cameraPicker animated:YES];
    } else {
        [self presentViewController:cameraPicker animated:YES completion:nil];
    }
} 
```

知道什么会导致这个错误吗？欢迎任何建议。谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-07-31T07:51:59.950

遇到了和你一样的麻烦，最后根据@CainaSouza 的回答得到了解决方案。我一直在使用 Xamarin.iOS，所以我会用 C# 来回答，但它可以很容易地翻译成 Objective-C。

我使用与@CainaSouza 相同的代码来调用控制器：

```
UIApplication.SharedApplication.KeyWindow.RootViewController.PresentViewController (customController, true, null); 
```

然后我将以下代码添加到我的自定义中`RootViewController`：

```
public override void PresentViewController (UIViewController viewControllerToPresent, bool animated, Action completionHandler)
{
    if (PresentedViewController != viewControllerToPresent) {
        base.PresentViewController (viewControllerToPresent, animated, completionHandler);
    }
} 
```

诀窍是检查你之前是否没有展示过那个 UIViewController。

我知道这是一个老问题，但希望它对某人有所帮助。:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T08:11:15.930

在 popoverController 中显示 imagePicker 控制器（在 iPad 的情况下）。这不会给你那个错误。

```
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
UIPopoverController *popover = [[UIPopoverController alloc] initWithContentViewController:picker];
[popover presentPopoverFromRect:self.selectedImageView.bounds inView:self.selectedImageView permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
self.popOver = popover;
} 
else {
[self presentModalViewController:picker animated:YES];
} 
```

此致。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T12:17:26.500

你试过这样呈现吗？

```
[self.view.window.rootViewController presentModalViewController:cameraPicker animated:YES]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T18:17:59.610

我的猜测是 cameraPicker 实例没有正确分配/释放。尝试在您的 - (void)takePhotoWithCamera 方法中创建 cameraPicker，而不是依赖先前创建的实例。您将在回调方法中获得选择器实例的句柄......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-23T11:00:11.223

我遇到了同样的问题 - 我希望用户使用全屏视图拍照（即调用 presentViewController 并传递 UIImagePickerController 控制器实例）并从弹出框中选择现有照片（我使用 initWithContentViewController 将其与弹出框相关联）。我为相机和弹出框重用了相同的 UIImagePickerController 实例，如果我在打开弹出框之前尝试运行相机，它会抛出相同的异常。

结果我导致了一个问题，我的解决方案只是拥有两个 UIImagePickerController 实例 - 一个用于相机（我从主视图中呈现），另一个用于弹出窗口。到目前为止它有效。:-)

不确定它是否仍然适用于原始海报，但希望它能帮助遇到此讨论的其他人。

# django - 从一个函数 Django 在两个模板上渲染数据

> ID：15157012
> 
> 赞同：1
> 
> 时间：2013-03-01T11:47:39.353
> 
> 标签：django, function, templates, render

嗨，我需要从一个函数在两个模板上 **呈现数据，我的代码是**

```
def stylepoints(request):
        a=Product.objects.all()[:3] 
        cursor = connection.cursor()
        try:        
                cursor.execute("SELECT facebook_id,name FROM django_facebook_facebookuser WHERE user_id  = %s ORDER BY RAND() LIMIT 1",[request.user.id])
        except Exception as e:        
                return HttpResponse("error in fetching Friends")
        rows_affected=cursor.rowcount
        if rows_affected > 0:
                row1 = cursor.fetchall()
                row12 = row1[0]
        else:
                row12 = ''
        value = request.user.id
        cursor12 = connection.cursor()
        cursor12.execute("SELECT Distinct email FROM myaccount_invitation WHERE reference_id = %s AND status  = 1 AND invitation_type = 2",[value])
        friend = cursor12.fetchall()
        if friend:
                friends = friend[0]
        return render_to_response('swf.html',{'a':a,'userf':row12,'friendshow':friend} , context_instance=RequestContext(request)) 
```

像这样我已经将数据发送到一个模板名称

> swf.html

但我还需要将数据发送到另一个模板，例如

> swf2.html

请告诉我我可以将数据渲染到两个模板吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:04:16.520

```
def view1(request):
    template_name='swf1.html'
    return stylepoints(request, template_name)

def view2(request):
    template_name='swf2.html'
    return stylepoints(request, template_name)

def stylepoints(request, template_name):
        a=Product.objects.all()[:3] 
        cursor = connection.cursor()
        try:        
                cursor.execute("SELECT facebook_id,name FROM django_facebook_facebookuser WHERE user_id  = %s ORDER BY RAND() LIMIT 1",[request.user.id])
        except Exception as e:        
                return HttpResponse("error in fetching Friends")
        rows_affected=cursor.rowcount
        if rows_affected > 0:
                row1 = cursor.fetchall()
                row12 = row1[0]
        else:
                row12 = ''
        value = request.user.id
        cursor12 = connection.cursor()
        cursor12.execute("SELECT Distinct email FROM myaccount_invitation WHERE reference_id = %s AND status  = 1 AND invitation_type = 2",[value])
        friend = cursor12.fetchall()
        if friend:
                friends = friend[0]
        return render_to_response(template_name,{'a':a,'userf':row12,'friendshow':friend} , context_instance=RequestContext(request)) 
```

# nginx - Nginx 动态代理

> ID：15157020
> 
> 赞同：0
> 
> 时间：2013-03-01T11:48:08.047
> 
> 标签：nginx

嗨，我想为 nginx 设置一个动态代理..

```
location /X/Y{
    proxy_pass   http://X:Y;
    proxy_redirect          off;
    proxy_next_upstream     error timeout invalid_header http_500;
    proxy_connect_timeout   1;
    } 
```

现在当用户提出请求时

"' [http://com.mypc/com.test/8181](http://com.mypc/com.test/8181) " nginx 需要将其重定向到 " [http://com.test:8181](http://com.test:8181) "

请帮助我，以便我可以解决问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-13T08:11:51.507

您可能需要编写 nginx 负载平衡器模块。 `ngx_http_upstream_ip_hash_module.c`做类似的事情，所以你可能想从它开始。

Nginx 模块编写指南：[http ://www.evanmiller.org/nginx-modules-guide.html](http://www.evanmiller.org/nginx-modules-guide.html)

# javascript - 使用 jquery 查找值是否存在于 javascript 对象中

> ID：15157025
> 
> 赞同：0
> 
> 时间：2013-03-01T11:48:12.983
> 
> 标签：javascript, jquery

我正在尝试确定一个对象是否包含特定值，以便我可以确保不会多次附加我要查找的值并防止递归。

我已经尝试了很多方法，但无法让它们中的任何一个起作用：

```
data = [
  {val:'xxx',txt:'yyy'},
  {val:'yyy',txt:'aaa'},
  {val:'bbb',txt:'ccc'}
];

console.log(jQuery.grep(data, function(obj){
    return obj.txt === "ccc";
}));
$.map(data, function(el) { 
    if(el.txt === 'ccc') 
        console.log('found')
}); 
```

这可以用 map() grep() 或 inArray() 来完成，还是我真的必须遍历整个数组来寻找值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T11:50:19.053

`data`是一个包含多个对象的数组，因此您需要指定要查看的数组的索引：

```
data[0].val === 'xxx';
data[1].val === 'yyy';
data[2].txt === 'ccc'; 
```

* * *

作为对您的功能的更新，有什么问题`$.each`？无论如何，您都在使用 map 或 grep 进行循环，因此您不妨诚实点：P 您也可以使用循环`for`，但我正在举例，`$.each`因为它与您当前的代码几乎相同。

```
$.each(data, function(el) { 
  if(el.txt === 'ccc') 
    console.log('found')
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:50:30.047

您将不得不迭代整个数组，因为它是一个对象数组，并且比较对象是通过引用而不是值来完成的。

```
for (var i = 0; i < data.length; i++){
    if (data[i].val == 'something')
        doSomething();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T11:51:08.197

如果您希望自己避免所有这些计算，有一个**实用插件 underscore.js**，它有很多帮助。

您正在寻找的帮助者之一[http://underscorejs.org/#contains](http://underscorejs.org/#contains)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T11:53:07.960

```
var stExist=$.inArray(reqelement, dataArray) 
```

# node.js - 在backbonejs中引导我的应用程序时感到困惑

> ID：15157026
> 
> 赞同：0
> 
> 时间：2013-03-01T11:48:19.790
> 
> 标签：node.js, mongodb, rest, backbone.js

我在codeigniter phil sturgeon REST API中有一个工作应用程序，带有backbone.js、underscore.js和require.js

需要在后端使用 mongodb 和 node.js。我已经为此构建了一个有效的 REST API。现在我对如何迁移我的整个项目以使用这个 API 一无所知。我在 Windows 上使用 XAMPP 来服务 apache。那么既然现在我不需要使用xamp，我如何确定文件系统的结构呢？

什么文件会去那里？我如何引导我的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:15:24.170

Node.js 带有一个应用程序服务器。

您需要在某个端口（例如 localhost:3000）上运行您的应用程序服务器。

有多种方法可以解决这个问题：

### Application Server 也是 Web 服务器。

这意味着您的应用程序服务器位于端口 80。这并不是真正的最佳解决方案，因为应用程序服务器不是静态资产的理想选择。我认为也存在一些安全问题，但需要阅读。

### 设置 Web 服务器并将请求转发到应用程序服务器

在这里，您将设置一个 Web 服务器。apache 是一个 Web 服务器，但对于 nginx，它最适合 node.js 应用程序。因此，您在端口 80 上运行 Web 服务器并将所有请求转发到您的应用程序服务器端口（例如 3000）。您以某种方式设置 nginx，以便对于静态资产（图像、javascript、css 等），它不会打扰应用程序服务器，而只是直接从文件系统提供文件。

### 在 node.js 中设置代理服务器

看看[Bounce](http://substack.net/posts/5bd18d)不确定它在生产设置中的表现如何，但评论很好。但它在服务静态资产方面遇到了缓慢的问题。

# sql-server - 创建多个实例并添加为链接服务器

> ID：15157028
> 
> 赞同：2
> 
> 时间：2013-03-01T11:48:22.610
> 
> 标签：sql-server, sql-server-2008

我是 sql 服务器的新手。

我在安装 SQL Server 2008 期间创建了一个默认实例。然后我向其中添加了 2 个实例。是否可以将这些实例作为链接服务器添加到默认实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:53:14.137

是的，只需将它们添加为正常方式的链接服务器

有关添加链接服务器的信息

[http://www.jensbits.com/2010/11/10/create-linked-server-sql-server-2008/](http://www.jensbits.com/2010/11/10/create-linked-server-sql-server-2008/)

使用 t-sql 添加链接服务器

[http://technet.microsoft.com/en-us/library/ms190479.aspx](http://technet.microsoft.com/en-us/library/ms190479.aspx)

# android - 警报对话框未在android中显示

> ID：15157030
> 
> 赞同：0
> 
> 时间：2013-03-01T11:48:35.983
> 
> 标签：android, android-alertdialog

我有主要活动和一个简单的类。主要活动有对话框方法，我从另一个类调用此方法

主要活动-

```
public class WishareActivity extends Activity

 {

   public void onCreate(Bundle savedInstanceState)
  {
      super.onCreate(savedInstanceState);

      setContentView(R.layout.main);

   activity=this;

  //handler to call alertmsg()method

    alerthandler= new Handler() {
        public  void handleMessage(Message msg){

            alertmsg();
        } 
    }; 

      layouthandler= new Handler() {
        public  void handleMessage(Message msg){

            setContentView(R.layout .main);
        } 
    }; 

}

    //method to show the dialog box

   public static  void alertmsg()
{
     AlertDialog.Builder alert = new AlertDialog.Builder(WishareActivity.activity);

    alert.setTitle("Confirm");
    alert.setMessage("abc");

    alert.setPositiveButton("OK", new DialogInterface.OnClickListener() {

        public void onClick(DialogInterface dialog, int which)
        {

            dialog.dismiss();
        }
    });

    alert.setNegativeButton("Deny", new DialogInterface.OnClickListener() {

        public void onClick(DialogInterface dialog, int which) {

            dialog.dismiss();
        }
    });

    Log.d("abc","alert alert");
    AlertDialog s=alert.create();
    s.setOnDismissListener(new DialogInterface.OnDismissListener() { 
        public void onDismiss( DialogInterface dialog) { 

        }
    });

     Log.d("abc1","alert alert");

  alert.show();
 Log.d("abc1","alert alert alert");
    return;

} 
```

连接类

```
public class connect implements Runnable
{

 public void run()
    {

         WishareActivity.layouthandler.sendEmptyMessage(0);
         WishareActivity.alerthandler.sendEmptyMessage(0);
    }
} 
```

在 Logcat 中它的显示

```
 abc : alert alert
  abc1: alert alert
  abc1 :alert alert alert 
```

根据日志，该方法被正确调用，但没有显示对话框。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:06:23.080

尝试这个：

你像这样创建没有静态的方法

```
public void alertmsg(); 
```

因为类是不支持静态的。它在下面显示此错误

```
 Cannot use this in a static context 
```

我相信这会奏效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:57:32.937

更改您的警报对话框方法

```
public static  void alertmsg() 
```

对此

```
public static  void alertmsg(Context context) 
```

像这样使用这个上下文变量

```
 AlertDialog.Builder alert = new AlertDialog.Builder(context); 
```

并且在使用这种方法时这样做

```
WishareActivity.alertmsg(someactivity.this); // here someactivity will be the activity name where you are calling alert method 
```

您的对话框将工作得很好。

# java - 从 url 获取表格行文本

> ID：15157031
> 
> 赞同：1
> 
> 时间：2013-03-01T11:48:37.070
> 
> 标签：java, android, jsoup

我正在使用 Jsoup 从表格单元格中提取文本。但我得到`null`错误。我想在`<p>`每个`<td>`. 我该怎么做？

```
Document doc = Jsoup.connect("URL").get(); //this is where Null error is thrown - but the URL is valid
     Element table = doc.select("table").first();
            Iterator<Element> iterator = table.select("td").iterator();
            while(iterator.hasNext())
            {
                Log.e("CellText", iterator.next().text());
            } 
```

HTML：

```
 <table border="0" cellspacing="0" cellpadding="0" width="400">
          <tr>
            <td width="100">
              <p><strong>Text1</strong></p>
            </td>
            <td width="200">
              <p>Text2</p>
            </td>
          </tr>
         <tr>... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:20:05.503

也在一个简单的 java 项目中测试了你的代码 --> 有效

1.  您的网址是否以 开头`http://`？
2.  您是否在 中运行您的代码[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)？
3.  你的安卓系统会阻止互联网访问吗？
4.  请发布*堆栈跟踪*或有关异常的*更多信息*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T09:32:39.580

我将代码放在 AsyncTask 中，现在它可以工作了。

# node.js - Podio API addItem 调用

> ID：15157037
> 
> 赞同：2
> 
> 时间：2013-03-01T11:48:44.787
> 
> 标签：node.js, api, podio

我正在尝试在 nodejs 模块中实现[https://developers.podio.com/doc/items/add-new-item-22362](https://developers.podio.com/doc/items/add-new-item-22362) Podio API addItem 调用。这是代码：

```
var _makeRequest = function(type, url, params, cb) {
  var headers = {};
  if(_isAuthenticated) {
    headers.Authorization = 'OAuth2 ' + _access_token ;
  }
  console.log(url,params);
  _request({method: type, url: url, json: true, form: params, headers: headers},function (error, response, body) {
    if(!error && response.statusCode == 200) {
      cb.call(this,body);
    } else {
      console.log('Error occured while launching a request to Podio: ' + error + '; body: ' + JSON.stringify (body));
    }
  });
}

exports.addItem = function(app_id, field_values, cb) {
  _makeRequest('POST', _baseUrl + "/item/app/" + app_id + '/',{fields: {'title': 'fgdsfgdsf'}},function(response) {
    cb.call(this,response);
  }); 
```

它返回以下错误：

```
{"error_propagate":false,"error_parameters":{},"error_detail":null,"error_description":"No matching operation could be found. No body was given.","error":"not_found"} 
```

应用程序中只需要“title”属性 - 我在 Podio GUI 中检查过。我还尝试从我发布到的 url 中删除尾部斜杠，然后发生类似的错误，但在错误描述中找不到 URL 消息。

我将设置一个代理来捕获原始请求，但也许有人只是看到代码中的错误？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:21:25.727

没关系，我找到了解决方案。问题是 addItem 调用是我的第一个“真正的”-API 方法实现，主体中带有 JSON 参数。以前的调用是 authentication 和 getApp，它是 GET 并且没有任何参数。

问题是 Podio 支持 POST 键值对进行身份验证，但不支持所有调用，我试图对所有调用使用单个 _makeRequest() 方法，包括 auth 和 real-API 调用。

看起来我需要为 auth 实现一个，为所有 API 调用实现一个。

无论如何，如果有人需要在节点上调用 addItem 的工作概念证明，那就是（假设您事先有一个身份验证令牌）

```
_request({method: 'POST', url: "https://api.podio.com/item/app/" + app_id + '/', headers: headers, body: JSON.stringify({fields: {'title': 'gdfgdsfgds'}})},function(error, response, body) {
  console.log(body);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-24T10:27:00.987

*   您应该将内容类型设置为 application/json
*   将正文作为字符串化的 json 发送。

    ```
    const getHeaders = async () => {
      const headers = {
        Accept: 'application/json',
        'Content-Type': 'application/json; charset=utf-8',
      };

      const token = "YOUR APP TOKEN HERE";
      headers.Authorization = `Bearer ${token}`;

      return headers;
    }

    const createItem = async (data) => {
        const uri = `https://api.podio.com/item/app/${APP_ID}/`;
        const payload = {
            fields: {
              [data.FIELD_ID]: [data.FIELD_VALUE],
            },
        };
        const response = await fetch(uri, {
            method: 'POST',
            headers: await getHeaders(),
            body: JSON.stringify(payload),
        });

        const newItem = await response.json(); 
        return newItem;
    } 
    ```

# ajax - Spring MVC - 通用 HTTP 处理程序

> ID：15157039
> 
> 赞同：1
> 
> 时间：2013-03-01T11:48:49.797
> 
> 标签：ajax, spring, model-view-controller, servlets, resources

已经搜索并没有找到一个决定性的答案。

我试图通过我的调度程序 servlet 路由所有 http 请求，然后路由到特定的控制器。最终我希望能够通过中心点处理资源、AJAX 和另一个请求。

我目前有 url 映射 /* 来执行此操作。我的控制器使用 @RequestMapping("/[My resource].*") 来捕获我的 .htm 请求。不幸的是，Spring 似乎使用 RequestDispactcher.forward 从 InternalResourceViewResolver 解析 .jsp，然后再次访问前端控制器并最终导致 404 错误。

我的问题是，我是否能够设置一个通用的 catch all 来处理除常规视图请求之外的任何 HTTP 请求？

HTTP 处理程序必须能够将请求传递到其他服务器并解析内部和外部资源，例如图像、css 等。

问候，安迪

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:09:38.203

一个更好的主意是将 servlet-mapping 更改为`DispatcherServlet`to`/`而不是`/*`，这是因为`/*`使所有请求都到达此 servlet，而不是像您为 jsp forwards 找到的那样，尽管有一个 JSPServlet 映射jsps，`/`另一方面，映射将默认为仅当未找到请求路径的特定映射时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:36:49.137

将应用 servlet 映射到 web.xml 中的 /。如下图所示。

```
<servlet-mapping>
    <servlet-name>appServlet</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

要解析其他资源，请在调度程序 servlet xml 中添加以下标记。这里的资源是包含js、css、图像的文件夹。它存储在 Maven Web 应用程序结构中的 Webcontent 文件夹下。根据您的项目结构更改它。

```
<resources mapping="/resources/**" location="/resources/" /> 
```

试试这个。

# emacs - emacs：打开我当前光标位置指向的文件

> ID：15157040
> 
> 赞同：1
> 
> 时间：2013-03-01T11:48:55.927
> 
> 标签：emacs, cursor

我想知道emacs是否有一个命令可以打开光标指向的文件。例如：我有一个包含以下文本的 ASCII 文件：

```
source ../scripts/setup.tcl 
```

`../scripts/setup.tcl`当我当前的光标位置位于文件的一个字符上时，我想要一个打开文件的命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:19:45.280

```
(global-set-key (kbd "C-x C-f") 'ffap) 
```

# javascript - 应用 .patch 文件？（jquery-ui 文件的补丁）

> ID：15157041
> 
> 赞同：0
> 
> 时间：2013-03-01T11:48:55.887
> 
> 标签：javascript, jquery, diff, patch

我找到了一个 .patch 文件，可以解决我在使用 jQuery-ui 时遇到的问题。但是，在谷歌上搜索了很长时间之后，我找不到任何好的答案。（我之前没有处理过 .patch 文件）。

[如果有帮助，您可以在此处](https://forum.jquery.com/viewFile.do?fileId=14737000002031675&forumGroupId=14737000000003003 "这里")获取补丁文件以进行检查。

我知道我可能必须降级我的 jQuery-ui 才能让它工作，因为补丁是从 2011 年开始的。

提前致谢。

*   肯·B。

**编辑**我找到了解决问题的另一种方法。**解决了**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:56:40.213

你需要一个`patch`可执行文件。通常，如果您在 Linux 或 Mac OS 上工作，我猜您会拥有这个。（[关于 patch 的 Wikipedia 文章](http://en.wikipedia.org/wiki/Patch_%28Unix%29)，实际上包含一些很好的用法示例）。

在命令行中，在与要修补的文件位于同一文件夹中时，键入：

```
patch < path/to/your/file.patch 
```

其中`path/to/your/file.patch`原因是要修补 jQuery-UI 源的文件的路径。

# javascript - 如何限制只调用一次焦点

> ID：15157042
> 
> 赞同：1
> 
> 时间：2013-03-01T11:48:57.930
> 
> 标签：javascript, ajax, xmlhttprequest, textinput

我有一个文本输入，用于在数据库中进行一些搜索：

```
<input type="text" ... onkeyup="searchProducts(event);" onfocus="searchProducts(event); ... 
```

问题是当我`onfocus`在这个输入中它不断调用`searchProducts`函数时，这就是问题所在。
我只想在输入获得焦点时执行此操作。也许我应该改用别的东西`onfocus`？

我使用干净的**JavaScript**没有**JQuery**。

# jsf-2 - Sessionscope 对应用程序性能有什么影响吗？

> ID：15157044
> 
> 赞同：0
> 
> 时间：2013-03-01T11:49:04.390
> 
> 标签：jsf-2, primefaces

在我的许多 bean 类中，我使用了会话范围。我只是想知道它是否会导致任何性能问题，例如服务器开销、内存问题等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T12:18:58.910

滥用会话范围和放置应该只存在于视图或请求中的 bean 不是一个好主意，至少有两个原因：

1.  **用户体验**- 因为用户会看到一些旧数据保留在他在该会话期间访问的页面上，这在大多数情况下是不良行为（几乎总是当您输入一些输入离开页面并返回该页面时，您希望该数据被重置但你会看到旧数据）
2.  **内存消耗**——很明显，会话范围的 bean 将与会话存在一样长，并且它们会占用一些内存。这可能不是真正巨大的内存消耗，但它可能很重要，尤其是当会话旧时（例如几个小时）。在这种情况下，会话数据在此期间会更大

我不必说任何新内容，您应该会看到更多链接：

*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope)
*   [托管 bean 范围](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#ManagedBeanScopes)

我只想为另一个答案添加注释。只要在您的浏览器中启用 cookie，HTTP 请求的大小就不会增加。会话仅保留在服务器上，客户端仅添加`JSESSIONID`了保留当前会话 ID 的 cookie。

# javascript - 对于 iFrame，onload 功能在 Chrome 中不起作用

> ID：15157049
> 
> 赞同：1
> 
> 时间：2013-03-01T11:49:19.570
> 
> 标签：javascript, google-chrome, iframe, extjs, onload

我有一个 onload 事件，它检测 iFrame 是否已完成加载。它在 FF 中运行良好，但在 Chrome 或 IE 中没有任何想法？

```
<html>
<head>
    <title>Iframe onload event</title>
    <link rel="stylesheet" type="text/css" href="../../ext-4.2.0-beta/resources/css/ext-all.css">
    <script type="text/javascript" src="../../ext-4.2.0-beta/ext-all-debug.js"></script>
</head>
<body>
    <script type="text/javascript">
    Ext.onReady(function(){
        //create a button
        Ext.create('Ext.button.Button',{
            text: 'Open Iframe',
            handler: function(){
                //try to get a reference to an already existing iframe
                var dlIframe = Ext.get('CSMREP_DOWNLOAD_IFRAME');

                //destroy the iframe if already exists
                if(dlIframe){
                    dlIframe.destroy();
                }

                var mask = Ext.getBody().mask('iframe loading...');

                //add an iframe to download the report
                var iframe = Ext.DomHelper.append(Ext.getBody(),
                '<iframe id="CSMREP_DOWNLOAD_IFRAME" src="iframe.php" style="display:none;"></iframe>');

                iframe.onload = function(){
                    Ext.getBody().unmask();
                };
            },
            renderTo: Ext.getBody()
        });
    });
    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:22:24.800

你为什么不做这样的事情：[http](http://ext4all.com/post/detect-iframe-load-event) ://ext4all.com/post/detect-iframe-load-event ？这样你就可以只使用 ExtJS 监听器了。

# matlab - Zoidberg曲线，无法达到“zoidberg”解决方案

> ID：15157055
> 
> 赞同：31
> 
> 时间：2013-03-01T11:49:34.710
> 
> 标签：matlab, math

我试图在 Matlab 中绘制[Zoidberg 曲线](http://www.wolframalpha.com/input/?i=zoidberg%20curve&dataset)只是为了好玩。

我只是复制了那里显示的方程式并定义了`sgn`and`theta`函数，但我无法实现 Zoidberg 图，而是得到了这个： ![在此处输入图像描述](../Images/b5404c7020ed7be701265c4b18fec9b5.png)

但我应该得到这个：

![在此处输入图像描述](../Images/613fb5fa9e3cdf8356fbf24881f03326.png)

这是我的代码：

sgn函数：

```
function result=sgn(in)

if in<0
    result=-1;
else
    result=1;
end

end 
```

θ函数

```
function result=theta(in)

if in<0
    result=0;
else
    if in==0
        result=0.5;
    else 
        result=1;
    end
end 
end 
```

主要的：

```
clc;clear;
t=0:0.0001:76*pi;
x=((4619/60*sin(t+11/7)+109/8*sin(2*t+11/7)+9/7*sin(3*t+11/7)+89/15*sin(4*t+11/7)+5/11*sin(5*t+11/7)-9839/41)*theta(75*pi-t)*theta(t-71*pi)+(-179/8*sin(11/7-2*t)+2101/20*sin(t+11/7)+5/6*sin(3*t+23/5)+65/9*sin(4*t+33/7)+33/8*sin(5*t+8/5)-698/9)*theta(71*pi-t)*theta(t-67*pi)+(952/15*sin(t+11/7)+116/21*sin(2*t+19/12)+26/5*sin(3*t+11/7)+11/9*sin(4*t+11/7)+25/11*sin(5*t+11/7)+3071/10)*theta(67*pi-t)*theta(t-63*pi)+(-4/11*sin(17/11-4*t)+657/13*sin(t+33/7)+29/11*sin(2*t+47/10)+17/6*sin(3*t+14/9)+2/13*sin(5*t+22/13)+15/8*sin(6*t+33/7)+16/11*sin(7*t+47/10)+5/3*sin(8*t+47/10)+24/13*sin(9*t+33/7)+9/11*sin(10*t+47/10)+6/5*sin(11*t+47/10)+17/18*sin(12*t+47/10)+4/9*sin(13*t+75/16)+1163/3)*theta(63*pi-t)*theta(t-59*pi)+(-11/13*sin(11/7-6*t)-17/10*sin(11/7-4*t)+261/7*sin(t+11/7)+17/3*sin(2*t+33/7)+44/19*sin(3*t+11/7)+7/9*sin(5*t+14/9)+259/3)*theta(59*pi-t)*theta(t-55*pi)+(-9/11*sin(26/17-23*t)-287/9*sin(11/7-5*t)-271/9*sin(17/11-3*t)+1551/13*sin(t+17/11)+685/8*sin(2*t+17/11)+535/11*sin(4*t+14/9)+311/11*sin(6*t+14/9)+1141/60*sin(7*t+61/13)+19/9*sin(8*t+21/11)+55/8*sin(9*t+77/17)+239/12*sin(10*t+9/2)+7/9*sin(11*t+69/16)+59/6*sin(12*t+13/10)+73/24*sin(13*t+13/11)+17/12*sin(14*t+47/11)+11/16*sin(15*t+22/5)+17/6*sin(16*t+4/3)+7/11*sin(17*t+17/13)+17/9*sin(18*t+11/9)+7/4*sin(19*t+7/5)+5/4*sin(20*t+53/12)+50/13*sin(21*t+12/11)+103/13*sin(22*t+8/7)+13/5*sin(24*t+29/7)+1/2*sin(25*t+16/5)+31/16*sin(26*t+13/3)+8/7*sin(27*t+33/8)+17/14*sin(28*t+123/31)+22/9*sin(29*t+30/7)+2/3*sin(30*t+48/13)+19/12*sin(31*t+89/22)+18/11*sin(32*t+46/11)+417/8)*theta(55*pi-t)*theta(t-51*pi)+(-2/7*sin(14/9-10*t)-9/13*sin(14/9-8*t)-224/11*sin(11/7-3*t)+197/11*sin(t+11/7)+139/14*sin(2*t+11/7)+17/12*sin(4*t+47/10)+43/12*sin(5*t+33/7)+2/5*sin(6*t+47/10)+28/19*sin(7*t+47/10)+34/33*sin(9*t+47/10)+1/4*sin(11*t+14/3)+6/19*sin(12*t+19/12)-955/8)*theta(51*pi-t)*theta(t-47*pi)+(-149/28*sin(11/7-5*t)-65/6*sin(11/7-3*t)-641/12*sin(11/7-t)+265/9*sin(2*t+11/7)+37/5*sin(4*t+11/7)+7931/15)*theta(47*pi-t)*theta(t-43*pi)+(1810/9*sin(t+11/7)+1904/5*sin(2*t+11/7)+481/24*sin(3*t+61/13)+181/30*sin(4*t+11/7)+277/10*sin(5*t+19/12)+292/11*sin(6*t+19/12)+25/7*sin(7*t+47/10)+38/5*sin(8*t+8/5)+74/11*sin(9*t+8/5)+75/13*sin(10*t+8/5)+18/11*sin(11*t+19/12)+3109/13)*theta(43*pi-t)*theta(t-39*pi)+(-19/9*sin(11/7-12*t)-21/8*sin(11/7-10*t)-1/11*sin(17/11-8*t)-32/19*sin(14/9-6*t)+4137/22*sin(t+11/7)+177/14*sin(2*t+33/7)+173/14*sin(3*t+11/7)+3/2*sin(4*t+19/12)+5/8*sin(5*t+14/9)+21/8*sin(7*t+11/7)+19/10*sin(9*t+11/7)+41/15*sin(11*t+11/7)+2104/3)*theta(39*pi-t)*theta(t-35*pi)+(-5/6*sin(17/12-11*t)-7/15*sin(5/12-10*t)-32/13*sin(7/13-3*t)-139/7*sin(2/7-2*t)+2224/15*sin(t+9/10)+103/10*sin(4*t+23/5)+45/44*sin(5*t+7/3)+35/9*sin(6*t+23/8)+21/10*sin(7*t+25/11)+10/11*sin(8*t+4/5)+23/15*sin(9*t+5/7)+4/5*sin(12*t+9/2)+1339/11)*theta(35*pi-t)*theta(t-31*pi)+(1069/6*sin(t+18/13)+643/28*sin(2*t+11/7)+255/16*sin(3*t+11/15)+247/29*sin(4*t+45/13)+53/6*sin(5*t+9/11)+14/29*sin(6*t+31/7)+21/5*sin(7*t+19/7)+53/20*sin(8*t+3/14)+24/13*sin(9*t+24/11)+sin(10*t+27/14)+7/8*sin(11*t+11/9)+1/3*sin(12*t+7/4)+4512/25)*theta(31*pi-t)*theta(t-27*pi)+(-73/8*sin(1/9-11*t)-101/7*sin(7/8-3*t)+3221/13*sin(t+4/5)+389/8*sin(2*t+36/11)+368/11*sin(4*t+80/27)+107/4*sin(5*t+1/4)+29/2*sin(6*t+13/4)+237/19*sin(7*t+1/6)+263/17*sin(8*t+10/3)+79/9*sin(9*t+5/14)+68/9*sin(10*t+67/22)+43/5*sin(12*t+29/9)-3139/7)*theta(27*pi-t)*theta(t-23*pi)+(-7/9*sin(9/10-17*t)-22/13*sin(86/85-11*t)-43/10*sin(1/33-7*t)-64/7*sin(2/9-5*t)-19/10*sin(7/10-4*t)+2327/9*sin(t+19/5)+46*sin(2*t+7/4)+52/7*sin(3*t+31/9)+44/13*sin(6*t+17/11)+35/13*sin(8*t+23/8)+45/17*sin(9*t+9/2)+35/17*sin(10*t+34/9)+17/10*sin(12*t+17/8)+3/5*sin(13*t+41/10)+15/13*sin(14*t+41/14)+10/19*sin(15*t+139/35)+7/9*sin(16*t+24/11)+7/8*sin(18*t+3/5)+9/8*sin(19*t+6/7)+7/9*sin(20*t+25/14)+17/18*sin(21*t+7/11)+9/8*sin(22*t+22/15)+3/7*sin(23*t+11/4)+7/12*sin(24*t+26/9)+3/14*sin(25*t+26/7)+12/25*sin(26*t+62/25)+7/11*sin(27*t+64/15)+1/4*sin(28*t+95/24)+7/20*sin(29*t+3)+4/9*sin(30*t+14/5)+1/9*sin(31*t+4)+1/11*sin(32*t+9/11)+3/13*sin(33*t+8/5)+1/8*sin(34*t+20/11)+2/5*sin(35*t+2/7)-16257/22)*theta(23*pi-t)*theta(t-19*pi)+(-3/8*sin(2/7-5*t)-51/19*sin(1/28-3*t)-34/7*sin(3/8-2*t)+20/9*sin(t+155/52)+16/17*sin(4*t+25/7)+4/9*sin(6*t+24/7)+3/10*sin(7*t+3/7)+3/11*sin(8*t+41/11)+2/11*sin(9*t+9/19)+1/8*sin(10*t+389/97)+1/6*sin(11*t+2/7)+1/6*sin(12*t+47/16)+5910/19)*theta(19*pi-t)*theta(t-15*pi)+(-4/15*sin(12/23-7*t)+24/7*sin(t+21/8)+15/4*sin(2*t+3/2)+31/9*sin(3*t+7/5)+8/5*sin(4*t+25/7)+13/17*sin(5*t+1/4)+2/3*sin(6*t+46/15)+5/13*sin(8*t+3)+3/7*sin(9*t+2/5)+3/10*sin(10*t+53/15)+2/7*sin(11*t+2/5)+1/3*sin(12*t+25/7)+109/2)*theta(15*pi-t)*theta(t-11*pi)+(-53/14*sin(18/13-4*t)+592/7*sin(t+21/10)+107/27*sin(2*t+17/4)+29/13*sin(3*t+41/11)+859/12)*theta(11*pi-t)*theta(t-7*pi)+(287/3*sin(t+19/9)+16/5*sin(2*t+43/13)+57/10*sin(3*t+21/8)+33/17*sin(4*t+31/7)+1877/6)*theta(7*pi-t)*theta(t-3*pi)+(-5/8*sin(2/3-15*t)-17/8*sin(11/10-12*t)-11/6*sin(9/13-9*t)-507/10*sin(2/9-3*t)-69/13*sin(41/27-2*t)+1813/5*sin(t+11/3)+63/13*sin(4*t+25/8)+63/4*sin(5*t+23/5)+122/11*sin(6*t+49/16)+32/7*sin(7*t+19/9)+37/8*sin(8*t+12/7)+20/9*sin(10*t+17/8)+43/17*sin(11*t+1/69)+31/14*sin(13*t+21/5)+5/3*sin(14*t+32/11)+66/65*sin(16*t+53/14)+760/3)*theta(3*pi-t)*theta(t+pi))*theta(sqrt(sgn(sin(t/2))));
y=((-13/5*sin(11/7-5*t)-51/8*sin(11/7-3*t)-28*sin(11/7-t)+97/6*sin(2*t+11/7)+124/25*sin(4*t+11/7)-7811/8)*theta(75*pi-t)*theta(t-71*pi)+(-76/7*sin(13/9-4*t)-69/4*sin(43/29-3*t)-50*sin(17/11-2*t)+229/12*sin(t+17/11)+13/8*sin(5*t+4/5)-2538/7)*theta(71*pi-t)*theta(t-67*pi)+(-17/4*sin(11/7-3*t)-217/11*sin(11/7-t)+79/7*sin(2*t+11/7)+11/6*sin(4*t+11/7)+15/14*sin(5*t+33/7)-79/6)*theta(67*pi-t)*theta(t-63*pi)+(-164/9*sin(11/7-2*t)+845/12*sin(t+11/7)+7/8*sin(3*t+18/11)+89/10*sin(4*t+33/7)+34/23*sin(5*t+47/10)+105/26*sin(6*t+33/7)+8/11*sin(7*t+14/9)+1/8*sin(8*t+17/11)+25/12*sin(9*t+11/7)+13/9*sin(10*t+11/7)+33/16*sin(11*t+14/9)+13/27*sin(12*t+14/9)+2/3*sin(13*t+14/9)+2671/13)*theta(63*pi-t)*theta(t-59*pi)+(-64/65*sin(14/9-6*t)-25/9*sin(14/9-5*t)-34/9*sin(14/9-4*t)-57/14*sin(14/9-3*t)-19/14*sin(11/7-2*t)+21/2*sin(t+11/7)+3133/11)*theta(59*pi-t)*theta(t-55*pi)+(-25/24*sin(23/15-27*t)-5/14*sin(14/11-25*t)-2/3*sin(16/11-17*t)-55/9*sin(40/27-8*t)-352/13*sin(14/9-5*t)-1519/38*sin(14/9-3*t)+3329/32*sin(t+47/10)+297/4*sin(2*t+14/9)+1939/38*sin(4*t+14/9)+239/9*sin(6*t+32/21)+34/9*sin(7*t+19/15)+107/6*sin(9*t+10/7)+271/10*sin(10*t+40/9)+693/13*sin(11*t+86/19)+160/7*sin(12*t+13/9)+289/16*sin(13*t+7/6)+385/48*sin(14*t+9/7)+44/9*sin(15*t+5/4)+41/11*sin(16*t+13/10)+12/13*sin(18*t+12/5)+46/9*sin(19*t+40/9)+10/9*sin(20*t+38/25)+46/31*sin(21*t+75/16)+37/16*sin(22*t+41/10)+35/11*sin(23*t+43/10)+10/13*sin(24*t+63/16)+2/3*sin(26*t+47/13)+19/7*sin(28*t+6/5)+13/10*sin(29*t+59/13)+3/2*sin(30*t+4/3)+11/10*sin(31*t+5/7)+17/13*sin(32*t+15/4)-11101/75)*theta(55*pi-t)*theta(t-51*pi)+(-3/10*sin(14/9-12*t)-29/12*sin(11/7-6*t)-38/9*sin(11/7-4*t)-59/8*sin(11/7-t)+183/7*sin(2*t+11/7)+125/13*sin(3*t+11/7)+31/16*sin(5*t+19/12)+4/9*sin(7*t+11/7)+3/13*sin(8*t+47/10)+64/63*sin(9*t+14/9)+3/13*sin(10*t+33/7)+1/2*sin(11*t+19/12)-11360/13)*theta(51*pi-t)*theta(t-47*pi)+(-60/11*sin(11/7-4*t)-528/31*sin(11/7-3*t)-661/55*sin(11/7-2*t)-623/3*sin(11/7-t)+39/8*sin(5*t+33/7)-5871/8)*theta(47*pi-t)*theta(t-43*pi)+(-43/13*sin(14/9-11*t)-45/8*sin(11/7-9*t)-41/15*sin(14/9-8*t)-57/11*sin(14/9-7*t)-157/6*sin(11/7-5*t)-1813/6*sin(11/7-t)+1997/15*sin(2*t+11/7)+89/6*sin(3*t+47/10)+19/6*sin(4*t+23/15)+191/8*sin(6*t+11/7)+191/17*sin(10*t+19/12)-7307/9)*theta(43*pi-t)*theta(t-39*pi)+(-15/8*sin(11/7-12*t)-72/73*sin(14/9-11*t)-19/9*sin(11/7-10*t)-35/11*sin(11/7-9*t)-7/11*sin(14/9-8*t)-60/11*sin(11/7-7*t)-191/13*sin(11/7-5*t)-184/5*sin(11/7-3*t)-109/10*sin(11/7-2*t)-609/2*sin(11/7-t)+1/6*sin(4*t+5/4)+11/5*sin(6*t+47/10)-6582/11)*theta(39*pi-t)*theta(t-35*pi)+(-11/15*sin(6/7-9*t)-47/13*sin(26/25-5*t)-67/27*sin(13/12-4*t)-633/8*sin(3/10-t)+251/7*sin(2*t+9/8)+123/8*sin(3*t+64/15)+23/8*sin(6*t+22/13)+26/9*sin(7*t+23/6)+14/9*sin(8*t+3/5)+19/12*sin(10*t+9/7)+25/19*sin(11*t+13/3)+11/17*sin(12*t+7/12)-5757/11)*theta(35*pi-t)*theta(t-31*pi)+(-50/3*sin(3/4-3*t)+263/10*sin(t+83/28)+669/13*sin(2*t+11/5)+17*sin(4*t+13/7)+67/11*sin(5*t+19/8)+11/3*sin(6*t+1/12)+38/17*sin(7*t+9/5)+51/14*sin(8*t+5/3)+49/25*sin(9*t+41/10)+17/12*sin(10*t+7/12)+53/54*sin(11*t+24/7)+5/7*sin(12*t+7/4)-10661/26)*theta(31*pi-t)*theta(t-27*pi)+(-127/10*sin(16/17-7*t)-119/9*sin(11/9-5*t)-1191/4*sin(1/3-t)+735/11*sin(2*t+2/9)+287/8*sin(3*t+61/16)+504/19*sin(4*t+17/9)+73/9*sin(6*t+9/5)+62/7*sin(8*t+14/5)+32/5*sin(9*t+1/6)+7/2*sin(10*t+19/7)+19/7*sin(11*t+1/44)+167/56*sin(12*t+51/14)-12878/17)*theta(27*pi-t)*theta(t-23*pi)+(-5/12*sin(14/15-32*t)-1/18*sin(17/13-31*t)-23/11*sin(1/6-19*t)-11/9*sin(38/25-18*t)-243/61*sin(25/17-8*t)-35/9*sin(11/21-7*t)-87/7*sin(4/5-6*t)-2249/15*sin(1/10-2*t)+1997/10*sin(t+23/12)+725/13*sin(3*t+1)+67/8*sin(4*t+9/4)+216/11*sin(5*t+23/5)+18/11*sin(9*t+32/31)+48/13*sin(10*t+19/8)+211/35*sin(11*t+16/5)+36/13*sin(12*t+64/15)+30/29*sin(13*t+8/13)+20/11*sin(14*t+28/13)+11/17*sin(15*t+37/16)+5/8*sin(16*t+23/14)+4/7*sin(17*t+14/9)+91/45*sin(20*t+14/27)+47/31*sin(21*t+8/5)+6/7*sin(22*t+29/15)+8/9*sin(23*t+53/20)+13/10*sin(24*t+89/30)+8/9*sin(25*t+39/10)+7/20*sin(26*t+97/24)+4/9*sin(27*t+18/13)+7/8*sin(28*t+45/14)+2/7*sin(29*t+42/13)+3/11*sin(30*t+22/5)+8/17*sin(33*t+4/11)+5/9*sin(34*t+18/13)+3/14*sin(35*t+12/5)-3384/11)*theta(23*pi-t)*theta(t-19*pi)+(-1/38*sin(2/11-7*t)-35/11*sin(9/14-t)+341/85*sin(2*t+25/14)+34/11*sin(3*t+22/21)+42/43*sin(4*t+223/56)+14/15*sin(5*t+3/4)+12/23*sin(6*t+7/2)+1/7*sin(8*t+4)+2/11*sin(9*t+9/8)+2/11*sin(10*t+73/29)+1/7*sin(11*t+1/4)+2/11*sin(12*t+74/25)+2961/20)*theta(19*pi-t)*theta(t-15*pi)+(-3/11*sin(13/25-12*t)-1/3*sin(15/29-10*t)-1/9*sin(4/3-8*t)-16/9*sin(12/13-4*t)+35/18*sin(t+89/19)+33/8*sin(2*t+49/16)+43/14*sin(3*t+33/13)+3/10*sin(5*t+26/11)+3/10*sin(6*t+4/11)+9/17*sin(7*t+94/27)+1/5*sin(9*t+35/11)+1/4*sin(11*t+20/7)+2917/15)*theta(15*pi-t)*theta(t-11*pi)+(949/15*sin(t+11/3)+63/11*sin(2*t+19/9)+26/7*sin(3*t+22/5)+7/8*sin(4*t+28/13)+3715/23)*theta(11*pi-t)*theta(t-7*pi)+(658/9*sin(t+107/27)+57/10*sin(2*t+9/5)+56/13*sin(3*t+38/9)+7/6*sin(4*t+10/11)+1681/16)*theta(7*pi-t)*theta(t-3*pi)+(-9/11*sin(13/10-16*t)-14/15*sin(2/7-15*t)-12/7*sin(3/8-12*t)-29/6*sin(5/11-8*t)-80/9*sin(5/14-4*t)+3076/7*sin(t+12/5)+343/18*sin(2*t+13/3)+230/17*sin(3*t+31/8)+21/4*sin(5*t+53/21)+23/10*sin(6*t+1/5)+27/7*sin(7*t+5/12)+60/17*sin(9*t+38/9)+11/8*sin(10*t+49/16)+10/7*sin(11*t+2/3)+4/7*sin(13*t+18/5)+17/12*sin(14*t+9/7)+598/9)*theta(3*pi-t)*theta(t+pi))*theta(sqrt(sgn(sin(t/2))));

plot(x,y); 
```

我改变了情节的点数，现在它有**230 万**点，但情节不是 Zoiberg。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-01T13:18:55.173

我不确定这是否是最终解决方案，但它很接近：

首先你的功能都是错误的。您需要数组的值，而不是元素的值。

二、使用matlab符号函数。

最后，不要忘记在 theta 前面添加点运算符。

```
function main
clc;clear;
t=0:0.0001:(76*pi);
x=((4619/60*sin(t+11/7)+109/8*sin(2*t+11/7)+9/7*sin(3*t+11/7)+89/15*sin(4*t+11/7)+5/11*sin(5*t+11/7)-9839/41).*theta(75*pi-t).*theta(t-71*pi)+(-179/8*sin(11/7-2*t)+2101/20*sin(t+11/7)+5/6*sin(3*t+23/5)+65/9*sin(4*t+33/7)+33/8*sin(5*t+8/5)-698/9).*theta(71*pi-t).*theta(t-67*pi)+(952/15*sin(t+11/7)+116/21*sin(2*t+19/12)+26/5*sin(3*t+11/7)+11/9*sin(4*t+11/7)+25/11*sin(5*t+11/7)+3071/10).*theta(67*pi-t).*theta(t-63*pi)+(-4/11*sin(17/11-4*t)+657/13*sin(t+33/7)+29/11*sin(2*t+47/10)+17/6*sin(3*t+14/9)+2/13*sin(5*t+22/13)+15/8*sin(6*t+33/7)+16/11*sin(7*t+47/10)+5/3*sin(8*t+47/10)+24/13*sin(9*t+33/7)+9/11*sin(10*t+47/10)+6/5*sin(11*t+47/10)+17/18*sin(12*t+47/10)+4/9*sin(13*t+75/16)+1163/3).*theta(63*pi-t).*theta(t-59*pi)+(-11/13*sin(11/7-6*t)-17/10*sin(11/7-4*t)+261/7*sin(t+11/7)+17/3*sin(2*t+33/7)+44/19*sin(3*t+11/7)+7/9*sin(5*t+14/9)+259/3).*theta(59*pi-t).*theta(t-55*pi)+(-9/11*sin(26/17-23*t)-287/9*sin(11/7-5*t)-271/9*sin(17/11-3*t)+1551/13*sin(t+17/11)+685/8*sin(2*t+17/11)+535/11*sin(4*t+14/9)+311/11*sin(6*t+14/9)+1141/60*sin(7*t+61/13)+19/9*sin(8*t+21/11)+55/8*sin(9*t+77/17)+239/12*sin(10*t+9/2)+7/9*sin(11*t+69/16)+59/6*sin(12*t+13/10)+73/24*sin(13*t+13/11)+17/12*sin(14*t+47/11)+11/16*sin(15*t+22/5)+17/6*sin(16*t+4/3)+7/11*sin(17*t+17/13)+17/9*sin(18*t+11/9)+7/4*sin(19*t+7/5)+5/4*sin(20*t+53/12)+50/13*sin(21*t+12/11)+103/13*sin(22*t+8/7)+13/5*sin(24*t+29/7)+1/2*sin(25*t+16/5)+31/16*sin(26*t+13/3)+8/7*sin(27*t+33/8)+17/14*sin(28*t+123/31)+22/9*sin(29*t+30/7)+2/3*sin(30*t+48/13)+19/12*sin(31*t+89/22)+18/11*sin(32*t+46/11)+417/8).*theta(55*pi-t).*theta(t-51*pi)+(-2/7*sin(14/9-10*t)-9/13*sin(14/9-8*t)-224/11*sin(11/7-3*t)+197/11*sin(t+11/7)+139/14*sin(2*t+11/7)+17/12*sin(4*t+47/10)+43/12*sin(5*t+33/7)+2/5*sin(6*t+47/10)+28/19*sin(7*t+47/10)+34/33*sin(9*t+47/10)+1/4*sin(11*t+14/3)+6/19*sin(12*t+19/12)-955/8).*theta(51*pi-t).*theta(t-47*pi)+(-149/28*sin(11/7-5*t)-65/6*sin(11/7-3*t)-641/12*sin(11/7-t)+265/9*sin(2*t+11/7)+37/5*sin(4*t+11/7)+7931/15).*theta(47*pi-t).*theta(t-43*pi)+(1810/9*sin(t+11/7)+1904/5*sin(2*t+11/7)+481/24*sin(3*t+61/13)+181/30*sin(4*t+11/7)+277/10*sin(5*t+19/12)+292/11*sin(6*t+19/12)+25/7*sin(7*t+47/10)+38/5*sin(8*t+8/5)+74/11*sin(9*t+8/5)+75/13*sin(10*t+8/5)+18/11*sin(11*t+19/12)+3109/13).*theta(43*pi-t).*theta(t-39*pi)+(-19/9*sin(11/7-12*t)-21/8*sin(11/7-10*t)-1/11*sin(17/11-8*t)-32/19*sin(14/9-6*t)+4137/22*sin(t+11/7)+177/14*sin(2*t+33/7)+173/14*sin(3*t+11/7)+3/2*sin(4*t+19/12)+5/8*sin(5*t+14/9)+21/8*sin(7*t+11/7)+19/10*sin(9*t+11/7)+41/15*sin(11*t+11/7)+2104/3).*theta(39*pi-t).*theta(t-35*pi)+(-5/6*sin(17/12-11*t)-7/15*sin(5/12-10*t)-32/13*sin(7/13-3*t)-139/7*sin(2/7-2*t)+2224/15*sin(t+9/10)+103/10*sin(4*t+23/5)+45/44*sin(5*t+7/3)+35/9*sin(6*t+23/8)+21/10*sin(7*t+25/11)+10/11*sin(8*t+4/5)+23/15*sin(9*t+5/7)+4/5*sin(12*t+9/2)+1339/11).*theta(35*pi-t).*theta(t-31*pi)+(1069/6*sin(t+18/13)+643/28*sin(2*t+11/7)+255/16*sin(3*t+11/15)+247/29*sin(4*t+45/13)+53/6*sin(5*t+9/11)+14/29*sin(6*t+31/7)+21/5*sin(7*t+19/7)+53/20*sin(8*t+3/14)+24/13*sin(9*t+24/11)+sin(10*t+27/14)+7/8*sin(11*t+11/9)+1/3*sin(12*t+7/4)+4512/25).*theta(31*pi-t).*theta(t-27*pi)+(-73/8*sin(1/9-11*t)-101/7*sin(7/8-3*t)+3221/13*sin(t+4/5)+389/8*sin(2*t+36/11)+368/11*sin(4*t+80/27)+107/4*sin(5*t+1/4)+29/2*sin(6*t+13/4)+237/19*sin(7*t+1/6)+263/17*sin(8*t+10/3)+79/9*sin(9*t+5/14)+68/9*sin(10*t+67/22)+43/5*sin(12*t+29/9)-3139/7).*theta(27*pi-t).*theta(t-23*pi)+(-7/9*sin(9/10-17*t)-22/13*sin(86/85-11*t)-43/10*sin(1/33-7*t)-64/7*sin(2/9-5*t)-19/10*sin(7/10-4*t)+2327/9*sin(t+19/5)+46*sin(2*t+7/4)+52/7*sin(3*t+31/9)+44/13*sin(6*t+17/11)+35/13*sin(8*t+23/8)+45/17*sin(9*t+9/2)+35/17*sin(10*t+34/9)+17/10*sin(12*t+17/8)+3/5*sin(13*t+41/10)+15/13*sin(14*t+41/14)+10/19*sin(15*t+139/35)+7/9*sin(16*t+24/11)+7/8*sin(18*t+3/5)+9/8*sin(19*t+6/7)+7/9*sin(20*t+25/14)+17/18*sin(21*t+7/11)+9/8*sin(22*t+22/15)+3/7*sin(23*t+11/4)+7/12*sin(24*t+26/9)+3/14*sin(25*t+26/7)+12/25*sin(26*t+62/25)+7/11*sin(27*t+64/15)+1/4*sin(28*t+95/24)+7/20*sin(29*t+3)+4/9*sin(30*t+14/5)+1/9*sin(31*t+4)+1/11*sin(32*t+9/11)+3/13*sin(33*t+8/5)+1/8*sin(34*t+20/11)+2/5*sin(35*t+2/7)-16257/22).*theta(23*pi-t).*theta(t-19*pi)+(-3/8*sin(2/7-5*t)-51/19*sin(1/28-3*t)-34/7*sin(3/8-2*t)+20/9*sin(t+155/52)+16/17*sin(4*t+25/7)+4/9*sin(6*t+24/7)+3/10*sin(7*t+3/7)+3/11*sin(8*t+41/11)+2/11*sin(9*t+9/19)+1/8*sin(10*t+389/97)+1/6*sin(11*t+2/7)+1/6*sin(12*t+47/16)+5910/19).*theta(19*pi-t).*theta(t-15*pi)+(-4/15*sin(12/23-7*t)+24/7*sin(t+21/8)+15/4*sin(2*t+3/2)+31/9*sin(3*t+7/5)+8/5*sin(4*t+25/7)+13/17*sin(5*t+1/4)+2/3*sin(6*t+46/15)+5/13*sin(8*t+3)+3/7*sin(9*t+2/5)+3/10*sin(10*t+53/15)+2/7*sin(11*t+2/5)+1/3*sin(12*t+25/7)+109/2).*theta(15*pi-t).*theta(t-11*pi)+(-53/14*sin(18/13-4*t)+592/7*sin(t+21/10)+107/27*sin(2*t+17/4)+29/13*sin(3*t+41/11)+859/12).*theta(11*pi-t).*theta(t-7*pi)+(287/3*sin(t+19/9)+16/5*sin(2*t+43/13)+57/10*sin(3*t+21/8)+33/17*sin(4*t+31/7)+1877/6).*theta(7*pi-t).*theta(t-3*pi)+(-5/8*sin(2/3-15*t)-17/8*sin(11/10-12*t)-11/6*sin(9/13-9*t)-507/10*sin(2/9-3*t)-69/13*sin(41/27-2*t)+1813/5*sin(t+11/3)+63/13*sin(4*t+25/8)+63/4*sin(5*t+23/5)+122/11*sin(6*t+49/16)+32/7*sin(7*t+19/9)+37/8*sin(8*t+12/7)+20/9*sin(10*t+17/8)+43/17*sin(11*t+1/69)+31/14*sin(13*t+21/5)+5/3*sin(14*t+32/11)+66/65*sin(16*t+53/14)+760/3).*theta(3*pi-t).*theta(t+pi)).*theta(sqrt(sign(sin(t/2))));
y=((-13/5*sin(11/7-5*t)-51/8*sin(11/7-3*t)-28*sin(11/7-t)+97/6*sin(2*t+11/7)+124/25*sin(4*t+11/7)-7811/8).*theta(75*pi-t).*theta(t-71*pi)+(-76/7*sin(13/9-4*t)-69/4*sin(43/29-3*t)-50*sin(17/11-2*t)+229/12*sin(t+17/11)+13/8*sin(5*t+4/5)-2538/7).*theta(71*pi-t).*theta(t-67*pi)+(-17/4*sin(11/7-3*t)-217/11*sin(11/7-t)+79/7*sin(2*t+11/7)+11/6*sin(4*t+11/7)+15/14*sin(5*t+33/7)-79/6).*theta(67*pi-t).*theta(t-63*pi)+(-164/9*sin(11/7-2*t)+845/12*sin(t+11/7)+7/8*sin(3*t+18/11)+89/10*sin(4*t+33/7)+34/23*sin(5*t+47/10)+105/26*sin(6*t+33/7)+8/11*sin(7*t+14/9)+1/8*sin(8*t+17/11)+25/12*sin(9*t+11/7)+13/9*sin(10*t+11/7)+33/16*sin(11*t+14/9)+13/27*sin(12*t+14/9)+2/3*sin(13*t+14/9)+2671/13).*theta(63*pi-t).*theta(t-59*pi)+(-64/65*sin(14/9-6*t)-25/9*sin(14/9-5*t)-34/9*sin(14/9-4*t)-57/14*sin(14/9-3*t)-19/14*sin(11/7-2*t)+21/2*sin(t+11/7)+3133/11).*theta(59*pi-t).*theta(t-55*pi)+(-25/24*sin(23/15-27*t)-5/14*sin(14/11-25*t)-2/3*sin(16/11-17*t)-55/9*sin(40/27-8*t)-352/13*sin(14/9-5*t)-1519/38*sin(14/9-3*t)+3329/32*sin(t+47/10)+297/4*sin(2*t+14/9)+1939/38*sin(4*t+14/9)+239/9*sin(6*t+32/21)+34/9*sin(7*t+19/15)+107/6*sin(9*t+10/7)+271/10*sin(10*t+40/9)+693/13*sin(11*t+86/19)+160/7*sin(12*t+13/9)+289/16*sin(13*t+7/6)+385/48*sin(14*t+9/7)+44/9*sin(15*t+5/4)+41/11*sin(16*t+13/10)+12/13*sin(18*t+12/5)+46/9*sin(19*t+40/9)+10/9*sin(20*t+38/25)+46/31*sin(21*t+75/16)+37/16*sin(22*t+41/10)+35/11*sin(23*t+43/10)+10/13*sin(24*t+63/16)+2/3*sin(26*t+47/13)+19/7*sin(28*t+6/5)+13/10*sin(29*t+59/13)+3/2*sin(30*t+4/3)+11/10*sin(31*t+5/7)+17/13*sin(32*t+15/4)-11101/75).*theta(55*pi-t).*theta(t-51*pi)+(-3/10*sin(14/9-12*t)-29/12*sin(11/7-6*t)-38/9*sin(11/7-4*t)-59/8*sin(11/7-t)+183/7*sin(2*t+11/7)+125/13*sin(3*t+11/7)+31/16*sin(5*t+19/12)+4/9*sin(7*t+11/7)+3/13*sin(8*t+47/10)+64/63*sin(9*t+14/9)+3/13*sin(10*t+33/7)+1/2*sin(11*t+19/12)-11360/13).*theta(51*pi-t).*theta(t-47*pi)+(-60/11*sin(11/7-4*t)-528/31*sin(11/7-3*t)-661/55*sin(11/7-2*t)-623/3*sin(11/7-t)+39/8*sin(5*t+33/7)-5871/8).*theta(47*pi-t).*theta(t-43*pi)+(-43/13*sin(14/9-11*t)-45/8*sin(11/7-9*t)-41/15*sin(14/9-8*t)-57/11*sin(14/9-7*t)-157/6*sin(11/7-5*t)-1813/6*sin(11/7-t)+1997/15*sin(2*t+11/7)+89/6*sin(3*t+47/10)+19/6*sin(4*t+23/15)+191/8*sin(6*t+11/7)+191/17*sin(10*t+19/12)-7307/9).*theta(43*pi-t).*theta(t-39*pi)+(-15/8*sin(11/7-12*t)-72/73*sin(14/9-11*t)-19/9*sin(11/7-10*t)-35/11*sin(11/7-9*t)-7/11*sin(14/9-8*t)-60/11*sin(11/7-7*t)-191/13*sin(11/7-5*t)-184/5*sin(11/7-3*t)-109/10*sin(11/7-2*t)-609/2*sin(11/7-t)+1/6*sin(4*t+5/4)+11/5*sin(6*t+47/10)-6582/11).*theta(39*pi-t).*theta(t-35*pi)+(-11/15*sin(6/7-9*t)-47/13*sin(26/25-5*t)-67/27*sin(13/12-4*t)-633/8*sin(3/10-t)+251/7*sin(2*t+9/8)+123/8*sin(3*t+64/15)+23/8*sin(6*t+22/13)+26/9*sin(7*t+23/6)+14/9*sin(8*t+3/5)+19/12*sin(10*t+9/7)+25/19*sin(11*t+13/3)+11/17*sin(12*t+7/12)-5757/11).*theta(35*pi-t).*theta(t-31*pi)+(-50/3*sin(3/4-3*t)+263/10*sin(t+83/28)+669/13*sin(2*t+11/5)+17*sin(4*t+13/7)+67/11*sin(5*t+19/8)+11/3*sin(6*t+1/12)+38/17*sin(7*t+9/5)+51/14*sin(8*t+5/3)+49/25*sin(9*t+41/10)+17/12*sin(10*t+7/12)+53/54*sin(11*t+24/7)+5/7*sin(12*t+7/4)-10661/26).*theta(31*pi-t).*theta(t-27*pi)+(-127/10*sin(16/17-7*t)-119/9*sin(11/9-5*t)-1191/4*sin(1/3-t)+735/11*sin(2*t+2/9)+287/8*sin(3*t+61/16)+504/19*sin(4*t+17/9)+73/9*sin(6*t+9/5)+62/7*sin(8*t+14/5)+32/5*sin(9*t+1/6)+7/2*sin(10*t+19/7)+19/7*sin(11*t+1/44)+167/56*sin(12*t+51/14)-12878/17).*theta(27*pi-t).*theta(t-23*pi)+(-5/12*sin(14/15-32*t)-1/18*sin(17/13-31*t)-23/11*sin(1/6-19*t)-11/9*sin(38/25-18*t)-243/61*sin(25/17-8*t)-35/9*sin(11/21-7*t)-87/7*sin(4/5-6*t)-2249/15*sin(1/10-2*t)+1997/10*sin(t+23/12)+725/13*sin(3*t+1)+67/8*sin(4*t+9/4)+216/11*sin(5*t+23/5)+18/11*sin(9*t+32/31)+48/13*sin(10*t+19/8)+211/35*sin(11*t+16/5)+36/13*sin(12*t+64/15)+30/29*sin(13*t+8/13)+20/11*sin(14*t+28/13)+11/17*sin(15*t+37/16)+5/8*sin(16*t+23/14)+4/7*sin(17*t+14/9)+91/45*sin(20*t+14/27)+47/31*sin(21*t+8/5)+6/7*sin(22*t+29/15)+8/9*sin(23*t+53/20)+13/10*sin(24*t+89/30)+8/9*sin(25*t+39/10)+7/20*sin(26*t+97/24)+4/9*sin(27*t+18/13)+7/8*sin(28*t+45/14)+2/7*sin(29*t+42/13)+3/11*sin(30*t+22/5)+8/17*sin(33*t+4/11)+5/9*sin(34*t+18/13)+3/14*sin(35*t+12/5)-3384/11).*theta(23*pi-t).*theta(t-19*pi)+(-1/38*sin(2/11-7*t)-35/11*sin(9/14-t)+341/85*sin(2*t+25/14)+34/11*sin(3*t+22/21)+42/43*sin(4*t+223/56)+14/15*sin(5*t+3/4)+12/23*sin(6*t+7/2)+1/7*sin(8*t+4)+2/11*sin(9*t+9/8)+2/11*sin(10*t+73/29)+1/7*sin(11*t+1/4)+2/11*sin(12*t+74/25)+2961/20).*theta(19*pi-t).*theta(t-15*pi)+(-3/11*sin(13/25-12*t)-1/3*sin(15/29-10*t)-1/9*sin(4/3-8*t)-16/9*sin(12/13-4*t)+35/18*sin(t+89/19)+33/8*sin(2*t+49/16)+43/14*sin(3*t+33/13)+3/10*sin(5*t+26/11)+3/10*sin(6*t+4/11)+9/17*sin(7*t+94/27)+1/5*sin(9*t+35/11)+1/4*sin(11*t+20/7)+2917/15).*theta(15*pi-t).*theta(t-11*pi)+(949/15*sin(t+11/3)+63/11*sin(2*t+19/9)+26/7*sin(3*t+22/5)+7/8*sin(4*t+28/13)+3715/23).*theta(11*pi-t).*theta(t-7*pi)+(658/9*sin(t+107/27)+57/10*sin(2*t+9/5)+56/13*sin(3*t+38/9)+7/6*sin(4*t+10/11)+1681/16).*theta(7*pi-t).*theta(t-3*pi)+(-9/11*sin(13/10-16*t)-14/15*sin(2/7-15*t)-12/7*sin(3/8-12*t)-29/6*sin(5/11-8*t)-80/9*sin(5/14-4*t)+3076/7*sin(t+12/5)+343/18*sin(2*t+13/3)+230/17*sin(3*t+31/8)+21/4*sin(5*t+53/21)+23/10*sin(6*t+1/5)+27/7*sin(7*t+5/12)+60/17*sin(9*t+38/9)+11/8*sin(10*t+49/16)+10/7*sin(11*t+2/3)+4/7*sin(13*t+18/5)+17/12*sin(14*t+9/7)+598/9).*theta(3*pi-t).*theta(t+pi)).*theta(sqrt(sign(sin(t/2))));

plot(x,y,'.');
end

% function result=sign(in)
% 
% if in<0
%     result=-1;
% else
%     result=1;
% end
% 
% end

function result=theta(in)

result = (in>0);
end 
```

![在此处输入图像描述](../Images/6ec51bf11bf3f13ff7c3f402ebf8dc87.png)

编辑：在绘图功能中使用点来删除丑陋的线条

# server - 与远程服务器的 PLC 数据通信

> ID：15157058
> 
> 赞同：0
> 
> 时间：2013-03-01T11:49:49.123
> 
> 标签：server, communication, plc

如何与 PLC 交互以向远程服务器 (PC) 发送和接收数据。

例如，具有 PLC 并希望通过无线通信与放置在房间附近的服务器进行交互的机器人。

数据必须随时移动。PLC将数据发送到服务器，服务器必须将数据的计算结果发送回PLC。

* * *

点评：我的PLC品牌是台达，但是型号还没选。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T09:46:12.957

一个常见的场景是制造商为 PLC 提供了一个 OPC 服务器。知道型号后，您应该查看他们的网站。然后，您只需创建一个 OPC 客户端即可。

一个好的开始方法是获得一个免费的 OPC 服务器模拟器，比如[Matrikon](http://www.matrikonopc.com/products/opc-desktop-tools/index.aspx#2)的那个。它不需要任何硬件。[OPC](http://www.opcfoundation.org)是一个标准接口（尽管制造商之间通常存在一些细微差异） - 如果您可以让您的客户端与测试服务器一起使用，您可能可以让它与 PLC 一起使用。

# selenium - 如果我正在使用 selenium web 驱动程序制作测试用例并且不能使用 selinium IDE，我还能如何使用它。？

> ID：15157063
> 
> 赞同：1
> 
> 时间：2013-03-01T11:49:52.860
> 
> 标签：selenium, ide, testcase

我不能使用 selenium IDE，因为我不允许使用 firefox。我需要测试的网站没有每个标签的 ID。所以我什至不能使用它。我的问题是，我还能如何使用定位器对象？这就是 selinium.click 或 selinium.clickAt 中的参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T12:08:17.687

还有很多其他方法[http://docs.seleniumhq.org/docs/03_webdriver.jsp#selenium-webdriver-api-commands-and-operations](http://docs.seleniumhq.org/docs/03_webdriver.jsp#selenium-webdriver-api-commands-and-operations)

就像 IDE 一样；按 CSS、按 xPath、按名称、按类...

```
driver.findElements(By.xpath("//input")); 
```

# ios - 更改 AVQueuePlayer 的项目

> ID：15157069
> 
> 赞同：0
> 
> 时间：2013-03-01T11:50:05.790
> 
> 标签：ios, xcode

我正在尝试使用`AVQueuePlayer`流式传输播放列表并希望能够从`UITableView`显示列表中的项目中选择歌曲。

每次选择一个项目时，我都尝试重新加载播放器，但我得到了`An AVPlayerItem cannot be associated with more than one instance of AVPlayer`

`itemArray`是完整的项目列表。表项的索引`clicked = playIndex.`

```
 [player removeAllItems];
    player=nil;
    NSMutableArray *currentItemArray = [NSMutableArray arrayWithArray:itemArray];
    for(int i=0;i<playingIndex; i++)
    {
        [currentItemArray removeObjectAtIndex:0];
    }

        player = [[AVQueuePlayer alloc] initWithItems:currentItemArray];
[player play] 
```

*另外，有没有更好的方法可以在不迭代的情况下删除这些对象？我无法弄清楚 removeObjectsAtIndexes

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:24:35.093

我不明白你的问题到底是什么，但你想做的是`[player insertItem:afterItem:]`用来动态修改播放列表。同样，用于`removeItem`从播放列表中动态删除项目。

从数组中删除对象直到`playingIndex`：

```
[currentItemArray removeObjectsInRange:NSMakeRange(0,playingIndex)]; 
```

# python - Tastypie 嵌套资源 - cached_obj_get() 正好需要 2 个参数（给定 1 个）

> ID：15157071
> 
> 赞同：7
> 
> 时间：2013-03-01T11:50:16.253
> 
> 标签：python, django, python-2.7, tastypie

我正在尝试使用此处的示例：http: [//django-tastypie.readthedocs.org/en/latest/cookbook.html#nested-resources](http://django-tastypie.readthedocs.org/en/latest/cookbook.html#nested-resources)

出于某种原因，我得到：

> cached_obj_get() 正好需要 2 个参数（给定 1 个）

即使我清楚地用 2 个参数调用它（就像前面提到的例子一样。这是我的代码：

```
def prepend_urls(self):
    return [
        url(r"^(?P<resource_name>%s)/(?P<pk>\w[\w/-]*)/feed%s$" % (self._meta.resource_name, trailing_slash()), self.wrap_view('get_feed'), name="api_get_feed"),
]

def get_feed(self, request, **kwargs):
    try:
        obj = self.cached_obj_get(request=request, **self.remove_api_resource_names(kwargs)) 
    except ObjectDoesNotExist:
        return HttpGone()
    except MultipleObjectsReturned:
        return HttpMultipleChoices("More than one resource is found at this URI.")

    feed_resource = FeedItemResource()
    return feed_resource.get_list(request, p_id=obj.id) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-01T14:05:03.750

很抱歉造成混淆 - 有一个[API 更改以改进授权](https://github.com/toastdriven/django-tastypie/commit/d850758b088761a00f60a474f5b2d683dc1ec3c0)，它更改了来自的签名[`cached_obj_get`](https://github.com/toastdriven/django-tastypie/blob/v0.9.12/tastypie/resources.py#L1103)：

```
def cached_obj_get(self, request=None, **kwargs): 
```

到

```
def cached_obj_get(self, bundle, **kwargs): 
```

这种变化在未来是一致的——如果你需要这个`request`对象，它可以作为`bundle.request`——但显然需要更新文档。

您可以使用以下命令构建捆绑对象：

```
basic_bundle = self.build_bundle(request=request) 
```

然后将其用作参数`cached_obj_get`（以[`Resource.get_detail`源代码](https://github.com/toastdriven/django-tastypie/blob/v0.9.12/tastypie/resources.py#L1276)为例）：

```
obj = self.cached_obj_get(bundle=basic_bundle, **self.remove_api_resource_names(kwargs)) 
```

如果您不熟悉 Python 的对象模型，另一个令人困惑的方面是方法总是接收至少一个参数，因为第一个位置参数始终是[对象实例，或者`self`](http://docs.python.org/2/tutorial/classes.html#method-objects)关键字参数不包含在该计数中，因此“1 给定”意味着该方法仅在期望and时才收到`self`位置参数。`self``bundle`

# javascript - 使用 Javascript 将表格插入 IFRAME

> ID：15157072
> 
> 赞同：0
> 
> 时间：2013-03-01T11:50:15.513
> 
> 标签：javascript, html, iframe, html-table

当我单击一个按钮时，我试图在 iframe 中插入一个表格，但在方法 "pasteHTML" 中出现错误。这是我写的代码：

```
<html>
  <body>
   <input type = "button" onClick="setContent()" value="getContent"></input>
    <iframe id = "iframe" border="0" >
    </iframe>

  <script type="text/javascript">
   var iframe = document.getElementById('iframe');
    iframe.contentDocument.designMode = "on";

    function setContent()
   {

       var iframe = document.getElementById('iframe');
       var str = "<table><tr><td>dushyanth</td></tr></table>";
       var sel = iframe.document.selection.createRange();
       sel.pasteHTML(str);
       sel.select();

   }

  </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:05:07.237

你有必要只使用java脚本吗？. 这也可以使用其他方式来实现，例如在 java 脚本函数中使用 .load() 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:23:48.627

```
<html>
<head>
  <script type="text/javascript">

    function setContent()   {
      $('divId').load('another.html')
   }

  </script>
</head>
<body>
 <input type = "button" onClick="setContent()" value="getContent"/>
  <div id="divId"></div>
</body>

</html> 
```

另一个.html

```
<table>
<tr>
<td>xyz</td>
</tr>
</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T13:03:21.637

如果您想使用 iframe，请使用以下代码，

```
<html>
<head>
  <script type="text/javascript">

    function setContent()   {
      $('divId').load('iframepage.html')
   }

  </script>
</head>
<body>
 <input type = "button" onClick="setContent()" value="getContent"/>
  <div id="divId"></div>
</body>

</html> 
```

iframepage.html

```
 <html>
 <body>
<iframe width="500px" height="400" src="anotherpage.html"></iframe>
 </body>    
</html> 
```

另一个页面.html

```
<table>
<tr>
<td>xyz</td>
</tr>
</table> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T05:41:08.337

尝试这个：

```
var ifr = document.getElementById('iframe');
ifr.src='javascript:"<table><tr><td>dushyanth</td></tr></table>"'; 
```

现场演示：http: [//jsfiddle.net/3Efva/](http://jsfiddle.net/3Efva/)

# java - 在黑莓中解析 JSON 对象时出错

> ID：15157073
> 
> 赞同：-2
> 
> 时间：2013-03-01T11:50:16.720
> 
> 标签：java, php, json, blackberry

我的php如下：

```
<?php
$str = '{
"name": "10.000000,106.000000",
"Status": {
"code": 200,
"request": "geocode"
 },
   "Apps": [ {
"Thread1": 1,
"Thread2": 1   
"Thread3": 1
"Thread4": 1
"Thread5": 1
"Thread6": 1
"Thread7": 1
} ]
}';
echo $str;
?> 
```

当我尝试获取“Ap​​ps”数组时，出现以下异常：

```
Exception: Expected a ',' or '}' at character 165 of {
"name": "10.000000,106.000000",
"Status": {
"code": 200,
"request": "geocode"
},
"Apps": [ {
 "Thread1": 1,
 "Thread2": 1   
"Thread3": 1
"Thread4": 1
"Thread5": 1
"Thread6": 1
"Thread7": 1
} ]
} 
```

任何人都可以帮助/指出我在指定 JSONArray 时出错的地方吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:53:17.243

“ThreadX”后没有逗号：1？

检查这个：http: [//jsonlint.com/](http://jsonlint.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:54:56.037

看来您忘记了 THREAD2 ... THREAD6 语句后面的逗号，

只需使用[http://jsonlint.com/](http://jsonlint.com/)进行验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T11:55:06.570

尝试：在线程 2 之后忘记了`,`……依此类推。

```
<?php
$str = '{
"name": "10.000000,106.000000",
"Status": {
"code": 200,
"request": "geocode"
 },
   "Apps": [ {
"Thread1": 1,
"Thread2": 1,   
"Thread3": 1,
"Thread4": 1,
"Thread5": 1,
"Thread6": 1,
"Thread7": 1
} ]
}';

$arr = json_decode($str);

echo "<pre>";
print_r($arr);

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T12:06:43.057

您不应该使用字符串手动创建 JSON。这是一个坏主意，因为您可以轻松破坏 JSON 格式（正如您所拥有的那样），并且您需要确保正确转义引号。相反，您应该在 PHP 结构中构建数据，然后使用它`json_encode()`来创建实际的 JSON 字符串：

```
$array = array(
    'name' => '10.000000,106.000000',
    'Status' => array(
        'code' => 200,
        'request' => 'geocode'
    ),
    'Apps' => array(
        array(
            'Thread1' => 1,
            'Thread2' => 1,
            'Thread3' => 1,
            'Thread4' => 1,
            'Thread5' => 1,
            'Thread6' => 1,
            'Thread7' => 1
        )
    )
);

echo json_encode($array); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T12:07:29.450

```
<?php

$str = '{
"name": "10.000000,106.000000",
"Status": {
"code": 200,
"request": "geocode"
 },
   "Apps": [ {
"Thread1": 1,
"Thread2": 1,   
"Thread3": 1,
"Thread4": 1,
"Thread5": 1,
"Thread6": 1,
"Thread7": 1
} ]
}';
echo "<pre>";
print_r(json_decode($str,true));
echo "<pre/>"; 
?> 
```

输出 ：

```
Array
(
    [name] => 10.000000,106.000000
    [Status] => Array
        (
            [code] => 200
            [request] => geocode
        )

    [Apps] => Array
        (
            [0] => Array
                (
                    [Thread1] => 1
                    [Thread2] => 1
                    [Thread3] => 1
                    [Thread4] => 1
                    [Thread5] => 1
                    [Thread6] => 1
                    [Thread7] => 1
                )

        )

) 
```

# webrtc - 编辑本地流

> ID：15157078
> 
> 赞同：2
> 
> 时间：2013-03-01T11:50:34.587
> 
> 标签：webrtc, getusermedia

有没有办法在通过 peerConnection() 将本地视频流“localStream”发送到另一个对等点之前对其进行编辑？

```
navigator.getUserMedia({video: true, audio: true}, function(localMediaStream) {
var video = document.querySelector('video');

//How do I say edit a few pixes in the localMediaSttream before 
//using peerConnection() to    send it to another peer?
 }, onFailSoHard); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T12:26:45.667

*以下是明天的一些假设！*

你可以得到UserMedia。在视频元素中渲染流。使用 MediaSource API，获取缓冲区；操纵他们。做你想做的！

然后从该“视频”元素中捕获流。

如果 MediaSource API 本身像 WebAudio API 一样为我们生成流，那就太好了。

好吧，您可以像这样附加流（在对音频/视频轨道应用一些影响之后）：

```
peer.addStream ( new webkitStream (
    yourStream.audioTracks || yourStream.getAudioTracks(), 
    yourStream.videoTracks || yourStream.getVideoTracks() 
)); 
```

# c++ - 应用安全算法

> ID：15157081
> 
> 赞同：0
> 
> 时间：2013-03-01T11:50:39.363
> 
> 标签：c++, security

我在一些应用程序中发现了非常有趣的安全程序。安全敏感函数列表以散列/加密状态存储（在本例中为 Ruby Block Cipher Mark 5）。这些条目的列表是使用 ID、大小、哈希键和指向带有代码数据的区域的指针构建的）。

runCryptedFunc 找到这个函数，为其分配内存，复制和解密它，运行然后清理。

在其他地方，我发现了类似的情况，即通过将存储的 HASH 与当前运行的代码进行比较来检查一堆函数是否修改。在调试断点或补丁的情况下 - 所有代码崩溃。

我的问题：

他们如何收集散列/加密函数内容并将其放入二进制文件中？这些日期（出于安全原因肯定）不是从其他地方的文件中加载的。

如何从二进制函数创建 HASH 并将其放入二进制中？

# android - 为什么Android软键盘隐藏了最底部的TextView？

> ID：15157082
> 
> 赞同：3
> 
> 时间：2013-03-01T11:50:43.237
> 
> 标签：android

这是我的 Fragment 的布局文件。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <!-- android:fillViewport="true" -->

    <EditText
        android:id="@+id/chatDispWindow"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:layout_above="@+id/chatTypeWindow"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="9dp"
        android:layout_marginRight="6dp"
        android:background="@color/background_color"
        android:clickable="false"
        android:cursorVisible="false"
        android:focusable="false"
        android:focusableInTouchMode="false"
        android:gravity="bottom"
        android:inputType="textMultiLine|textLongMessage|textNoSuggestions"
        android:scrollHorizontally="true" />
    <!-- android:hint="@string/groupChatDispMsg" -->

    <ImageButton
        android:id="@+id/sendBtn"
        android:layout_width="52dp"
        android:layout_height="46dp"
        android:layout_above="@+id/chatStatusWindow"
        android:layout_alignBottom="@+id/chatTypeWindow"
        android:layout_alignParentRight="true"
        android:layout_marginBottom="-3dp"
        android:layout_marginLeft="4dp"
        android:background="@drawable/send_chatbtn_selector"
        android:contentDescription="@string/sendLbl" />

    <EditText
        android:id="@+id/chatTypeWindow"
        android:layout_width="match_parent"
        android:layout_height="45dp"
        android:layout_above="@+id/chatStatusWindow"
        android:layout_alignParentLeft="true"
        android:layout_marginLeft="6dp"
        android:layout_toLeftOf="@+id/sendBtn"
        android:background="@drawable/editbox_selector"
        android:imeActionId="@+id/sendChatImeBtn"
        android:imeActionLabel="@string/sendLbl"
        android:imeOptions="actionSend"
        android:inputType="textMultiLine"
        android:minHeight="45dp" />
    <!-- android:hint="@string/chatWindowMsg" -->

    <TextView
        android:id="@+id/chatStatusWindow"
        android:layout_width="match_parent"
        android:layout_height="15dp"
        android:layout_alignParentBottom="true"
        android:layout_marginBottom="3dp"
        android:layout_marginLeft="9dp" />
    <!-- android:text="@string/chatStatusMsg" -->

</RelativeLayout> 
```

这是应用程序现在的行为......

![默认视图](../Images/707219a3dea1efc48885468dfb637838.png) ![Ui 当用户点击 EditText](../Images/090058f6544714de3665b5bf51c242a0.png)

问题是键盘隐藏了屏幕最底部的 TextView，**即使键盘正在显示，我怎样才能使它可见？**

我试过使用`android:windowSoftInputMode="adjustResize"`但它不起作用。请帮忙，

**编辑** 在进一步挖掘之后，我知道如果我删除全屏主题然后`android:windowSoftInputMode="adjustResize`完美工作。如何使用 FullScreen Theme 获得它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:02:27.420

在您的活动下的清单文件中尝试这个

```
android:windowSoftInputMode="adjustPan" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T12:37:43.007

我使用并从此活动中`android:windowSoftInputMode="adjustResize"`删除了它，因为我发现它是一个[已知](https://code.google.com/p/android/issues/detail?id=5497)的 android 问题。他们声称它已解决，但至少不是在我测试我的代码的设备上。`full screen theme`

我希望这个答案对将来访问此线程的人有用，并且可以节省他们的时间和精力。谢谢大家，

# windows-8 - 在 Metro 应用程序中实现 3D 对象的半透明

> ID：15157083
> 
> 赞同：1
> 
> 时间：2013-03-01T11:50:43.293
> 
> 标签：windows-8, 3d, windows-store-apps, direct3d11, translucency

我正在为 Windows Store（Metro 应用程序）开发一个 3D 项目，并使用 Visual Studio 2012 Express for Windows 8 和 Blender 来创建 3D 对象。我正在导入一个 3D 对象的 fbx 网格文件（使用 Visual Studio Starter Kit），并且我希望该对象的某些部分是半透明的（50% 的不透明度）。我在 3D 对象上使用 Lambert 着色器尝试了 3 个 png 纹理，以下是我得到的结果：

1) 不透明度：100% 对象外观：不透明

2) 不透明度：0% 对象外观：透明

3）不透明度：50% 物体外观：不透明（同100%）

我想实现半透明，但即使使用 50% 的纹理不透明度，我也无法获得我想要的。请建议我一些解决方案。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-27T18:00:19.480

Visual Studio Starter Kit 主要是 VS 导出器的简化演示。它不支持混合状态，因此更改材质设置不会有任何作用。

您可能会更幸运地使用[DirectX Tool Kit](http://go.microsoft.com/fwlink/?LinkId=248929)对 CMO 的模型支持，它可以更好地控制 alpha 混合的使用。

# android - CSS 文本在 Android 设备中垂直滚动时水平移动

> ID：15157085
> 
> 赞同：1
> 
> 时间：2013-03-01T11:51:03.907
> 
> 标签：android, css, scroll

我正在开发一个网站，该网站在其他 div 中包含文本内容（使用 xml 加载）。我遇到的问题是当文本非常广泛并且我垂直滚动时，文本也会像振动一样水平移动（虽然overflow-x：隐藏）。

仅当我在 pc / mac 中的 Android 设备上检查它在所有浏览器中正常工作时才会发生这种情况。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-13T07:10:40.763

尝试对`-webkit-backface-visibility: hidden`文本内部容器和`position:relative`外部容器使用属性

# asp.net-mvc-4 - 如何将一个区域重定向到另一个区域

> ID：15157086
> 
> 赞同：0
> 
> 时间：2013-03-01T11:51:05.637
> 
> 标签：asp.net-mvc-4

我的 MVC4 项目中有两个控制器。一个控制器的默认控制器名称为`Login`. 另一个控制器在区域 .area 名称称为`HR`.inside 控制器名称称为`AddNewHire`。在 AddNewHire 里面我写了`AddNewEmployee`方法。

在登录控制器中我有一种方法。那个名字是 LoginButton

在我写的 LoginButton 方法里面

```
return RedirectToAction("AddNewEmployee","AddNewHire",new {area="HR"}); 
```

我得到错误喜欢

```
 Description: HTTP 404\. The resource you are looking for (or one of its dependencies) could have been removed, had its name changed, or is temporarily unavailable.  Please review the following URL and make sure that it is spelled correctly. 
```

请求的 URL：/AddNewHireController/AddNewEmployee

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:58:45.170

尝试使用`RedirectToRoute`而不是`RedirectToAction`. 您需要做的是定义一条路线。看看这个 MSDN 链接（演练：使用[多个项目创建 ASP.NET MVC 区域应用程序](http://msdn.microsoft.com/en-us/library/ee307987%28VS.100%29.aspx#registering_routes_in_account_and_store_areas)

# asp.net - 网页的asp.net路由映射

> ID：15157087
> 
> 赞同：0
> 
> 时间：2013-03-01T11:51:06.117
> 
> 标签：asp.net, .net, web-applications, routes, routetable

我需要在 asp.net Web 应用程序中实现路由映射。有很多教程告诉如何在 mvc 中做到这一点。但我需要在网页中进行。

我已经成功地为父域完成了它。我的网站也处理假域名（通配符 dns），我也需要映射子域的路由。

[http://mysite.com/login](http://mysite.com/login)映射到[http://mysite.com/default.aspx](http://mysite.com/default.aspx)

但是，现在我想将[http://login.mysite.com](http://login.mysite.com)映射到[http://login.mysite.com/login.aspx](http://login.mysite.com/login.aspx) 并将[http://signup.mysite.com/](http://signup.mysite.com/)映射到[http://signup.mysite。 com/signup.aspx](http://signup.mysite.com/signup.aspx)

知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-21T01:54:11.430

你确定你需要路由吗？看来您只是想要可以由 IIS 或 web.config 处理的重定向。

如果你真的需要路由，关于 MVC 和 web 表单都有很多文章，只需搜索即可。在 MVC 中，您使用 RouteConfig.cs 文件来执行此操作，而在 Web 表单中，您通过 Global.asax.cs 文件（或从 global.asax.cs 引用的一些帮助程序）执行此操作。基本上，在 Web 表单中，您可以将路线添加到`RouteTable.Routes`集合中。

代码看起来像这样（未经测试）：

```
routes.MapPageRoute("",
"login",
"~/default.aspx"); 
```

以下是一些可以帮助您开始路由的链接：

1.  [演练：在 Web 窗体应用程序中使用 ASP.NET 路由](http://msdn.microsoft.com/en-us/library/vstudio/dd329551%28v=vs.100%29.aspx)
2.  [RouteTable.Routes 属性](http://msdn.microsoft.com/en-us/library/system.web.routing.routetable.routes%28v=vs.110%29.aspx)

# mysql - mysql每天计算两个日期/时间之间的秒数

> ID：15157090
> 
> 赞同：29
> 
> 时间：2013-03-01T11:51:25.850
> 
> 标签：mysql

我有这张表，但我无法从这张表中计算每一天的秒数：

```
id  from            to
---------------------------------------------------
1   2013-01-31 23:50:00 2013-02-02 09:00:00
2   2013-02-05 11:21:12 2013-02-08 01:01:01
3   2013-02-08 17:33:44 2013-02-08 18:22:55
4   2013-02-12 01:40:12 2013-02-12 02:00:59
5   2013-02-28 01:40:12 2013-03-02 02:00:59 
```

现在，我需要在 2 月的 from 和 to 之间的每一天获得秒数。所以对于 2 月 1 日 - x 秒、2 月 2 日 - y 秒、2 月 3 日 - 0 秒等。知道我该怎么做吗？非常感谢。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-03-01T11:53:48.350

在 MySQL 中使用[TIMESTAMPDIFF ：](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timestampdiff)

```
SELECT TIMESTAMPDIFF(SECOND,from,to); 
```

例子：

```
SELECT TIMESTAMPDIFF(SECOND,'2016-01-01 00:00:00','2016-01-11 00:00:00'); -- 864000
SELECT TIMESTAMPDIFF(MINUTE,'2016-01-01 00:00:00','2016-01-11 00:00:00'); -- 14400
SELECT TIMESTAMPDIFF(HOUR,'2016-01-01 00:00:00','2016-01-11 00:00:00'); -- 240
SELECT TIMESTAMPDIFF(DAY,'2016-01-01 00:00:00','2016-01-11 00:00:00'); -- 10 
```

# linux - ssl_peek 是如何工作的？ssl_peek 的行为是否与 recv_msg 的 MSG_PEEK 相同

> ID：15157092
> 
> 赞同：0
> 
> 时间：2013-03-01T11:51:26.787
> 
> 标签：linux, network-programming, openssl

ssl_peek 是如何工作的？ssl_peek 的行为是否与 MSG_PEEK 标志的行为相同？我只想读取有效负载的几个字节，并需要基于此做出决定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:56:34.530

不，不一样。它要求已收到完整的 SSL 消息，其中包含应用程序数据，并且已被解密。在一般情况下，这不会是真的，当它是真的时，它会启动解密和 MAC 检查过程。因此，与 MSG_PEEK 相比，它返回​​任何数据的可能性更小，并且执行成本更高。

# sql - 仅选择本月部分的时差（以分钟为单位）

> ID：15157105
> 
> 赞同：1
> 
> 时间：2013-03-01T11:52:12.000
> 
> 标签：sql, sql-server-2008-r2

无法弄清楚我做错了什么：

我有一个表，其中包含开始时间和结束时间列，我试图仅计算本月部分的时间总和（以分钟为单位）。

例如。开始日期：27-02-13 结束日期：03-03-13

总分钟数= 5760 仅三月的分钟数：4320

这是我的查询，但它不能正常工作，我试图添加一个 where 子句来回顾过去两个月的过去时间条目。我究竟做错了什么？

```
SELECT 
isnull((Sum(DATEDIFF(minute, 
CASE when datetime5 < dateadd(mm,datediff(mm,0,GetDate()), 0)
THEN dateadd(mm,datediff(mm,0,GetDate()), 0)
ELSE datetime5 END,
CASE when datetime6 > dateadd(mm,datediff(mm,0,GetDate())+1, 0)
THEN dateadd(mm,datediff(mm,0,GetDate())+1, 0)
ELSE datetime6 END))/60.0),0 )
as Minutes , 0 
FROM AllUserData 
WHERE tp_ListID in (select tp_ID from Lists where tp_Title = 'D1 Downtime')
and datetime5 >=dateadd(mm,datediff(mm,0,GetDate())-2, 0); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:12:16.103

选择在本月初之后结束的所有记录。

然后，可以使用以下内容（伪代码）获得本月每条记录的部分：

```
end - max(start,start_of_this_month) 
```

以该期间的开始或本月的开始为准，以较晚者为准。

我认为这应该可以帮助您简化查询。这是基本思想（又是伪代码，因为我不知道 SQL Server 日期操作的细微差别）。

```
select sum(elapsed_time) from (
        select end - max(start,start_of_this_month) as elapsed_time
            from your table
            where end > start_of_this_month
    ) time_periods 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:51:21.473

请参阅此[SQL Fiddle](http://sqlfiddle.com/#!3/d17fe/13)。

```
with month_start_finish (month_start, month_finish) as 
(
  -- here you get the beginning of the current month and the next month
  -- needed for filters and calculations
  select 
    dateadd(month, datediff(month, 0, getdate()), 0),
    dateadd(month, datediff(month, 0, getdate()) + 1, 0)  
)
select start_date, finish_date,
  -- here you calculate your minutes
  datediff(minute, 
           case when start_date > month_start then start_date else month_start end,
           case when finish_date < month_finish then finish_date else month_finish end
          ) as minutes_in_this_month
from test, month_start_finish
where start_date < month_finish -- here you remove any periods that
and finish_date > month_start   -- are not related to the current month 
```

请注意即使期限超过一个月，它也可以正常工作。

# c++ - 如何在 Code::Blocks 上启用 SSE/SSE2？

> ID：15157110
> 
> 赞同：0
> 
> 时间：2013-03-01T11:52:31.680
> 
> 标签：c++, mingw, codeblocks, bulletphysics

所以我试图编译一些代码（具体来说是子弹物理演示），然后出现了一个错误，说 SSE 和 SSE2 没有启用。我检查了 Code::Blocks 中的编译器标志，并且 SSE/SSE2 不在那里。我试图将标志放在“其他选项”中（-msse，-msse2），但没有奏效。

然后我在 stackoverflow 上看到了一个帖子，上面说尝试“-march=native”，我做到了。那也没有用。

我正在使用 G++ (MinGW) 进行编译，并且我在 Windows 7 x64 上。

如果这意味着什么，则该项目正在使用自定义生成文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:08:56.120

要完成这项工作，您需要`march`设置支持 SSE2 的东西（比如 Pentium4 或 Core2，在您的情况下，“native”也可能会这样做，因为您在 x86_64 上运行，但我从未使用过“native”）**和**通过启用 SSE2 `-msse2`。

**但是：**由于您使用自定义 makefile，您必须*在您的 makefile 中执行此操作，* ~~或者您必须使用环境变量~~（忘记环境变量，我刚刚看过，似乎您可以通过这些控制几乎所有内容，除了目标/优化选项）。

Code::Blocks 在您从项目文件编译时设置编译器选项，但在使用自定义 makefile 时不设置。使用自定义 makefile，假设您知道自己在做什么，并且 makefile“工作正常”。
换一种说法，你可以设置任何你喜欢的选项，只要你使用定制的makefile，它们就不会产生任何影响。

# layout - SSRS 中的表未对齐

> ID：15157112
> 
> 赞同：3
> 
> 时间：2013-03-01T11:52:35.290
> 
> 标签：layout, reporting-services, alignment, report

我有一些并排显示的表格。但是我很难在渲染视图中对齐它们。当我导出它时，它看起来又不一样了！

除了一些极端的试验和错误之外，有没有更简单的方法可以正确对齐它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T12:45:45.857

在 Reporting Services 中控制布局的最佳方法是使用**Rectangles**。

在您的示例中，您可以尝试将表格移动到**Rectangle**对象中。

这会影响报表呈现，因为报表将首先呈现矩形内的对象相对于彼此，然后呈现并相对于矩形放置其他对象，即忽略矩形内的对象并将它们视为一个整体。

每种不同的导出媒体都有自己的挑战，因此 Reporting Services 有时会在不同媒体中为同一份报告给出不同的结果也就不足为奇了。这种方法只是减少了渲染时做出的决定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-01T22:07:54.610

我使用了属性窗口并设置了我想要垂直对齐的每个对象的位置高度属性。

# c - const关键字的位置

> ID：15157113
> 
> 赞同：9
> 
> 时间：2013-03-01T11:52:36.040
> 
> 标签：c

C中以下三个指针声明有什么区别：

```
void * const myPointer1;
void const *myPointer2;
const void *myPointer3; 
```

以及使用哪一个来防止：

```
myPointer = somethingElse; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-01T11:58:35.417

从右到左阅读规则：

```
void * const myPointer1; 
```

myPointer1 是`const`指向`void`.

```
void const *myPointer2; 
```

myPointer2 是指向 a 的指针`const` `void`。

```
const void *myPointer3; 
```

myPointer3 是指向 a 的指针`void` `const`。

结论：

*   `myPointer1`就是你要找的——它是一个`const`指针，所以它的值不能被修改
*   `myPointer2`并且`myPointer3`是同一件事
*   `myPointer2`并且`myPointer3`有点毫无意义——取消引用 a`void*`没有意义

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T11:58:05.080

在某些地方，您可以将`const`声明放在前面`const`：

```
const int * x;  // pointer to constant int 
```

您*总是*可以在声明为 const 的任何内容`const` *之后*放置：

```
int const * x;       // pointer to constant int
int * const x;       // constant pointer to int
int const * const x; // constant pointer to constant int 
```

因此，我个人的建议*总是*有`const`尾随，因为这是唯一可以始终遵守的“规则”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T11:54:13.467

*   `myPointer1`是指向 的`const`指针`void`。
*   `mypointer2`并且`myPointer3`都是指向`const void`.

`myPointer2`和声明之间的区别`myPointer3`只是风格问题。

注意：`const void`这里的意思是指出的数据是`const`。例如，与`void`from无关。`int main(void)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T12:01:51.493

1.  `void * const myPointer1;`= 将 myPointer1 声明为**指向 void 的 const 指针**
2.  `void const *myPointer2;`= 将 myPointer3 声明为**指向 void const的指针**
3.  `const void *myPointer3;`= 将 myPointer3 声明为**指向 const void的指针**

每当有这样的疑问时，您可以使用:: [cdecl.org](http://cdecl.org/)

您应该尝试**myPointer1**以避免您解释的情况，因为它是`const pointer`.

# php - 优化的 mySQL 表索引结构，可以更快地选择大量日常数据

> ID：15157114
> 
> 赞同：0
> 
> 时间：2013-03-01T11:52:37.550
> 
> 标签：php, mysql, optimization, select

我想知道在 mySQL 表中布置数据的最佳格式，以便可以以最快的方式查询它以收集一组每日值以供 php 进一步使用。

到目前为止，我已经这样布置了表格：

```
item_id    price_date     price_amount
      1    2000-03-01             22.4
      2    2000-03-01            19.23
      3    2000-03-01             13.4
      4    2000-03-01            14.95
      1    2000-03-02             22.5
      2    2000-03-02            19.42
      3    2000-03-02             13.4
      4    2000-03-02            13.95 
```

将 item_id 定义为索引。

另外，我正在使用：

```
"SELECT DISTINCT price_date FROM table_name" 
```

获取包含唯一日期列表的数组。

此外，循环内的代码部分（以及我的优化问题的重点）当前编写为：

```
"SELECT price_amount FROM table_name WHERE item_id = 1 ORDER BY price_date" 
```

这第二个“SELECT”语句实际上是在一个循环中，我在其中选择/存储数组中请求的每个 item_id 的每日价格。

所有当前都在正常运行并从 mySQL 中正确提取数据，但是，上面列出的“SELECT”语句每次运行大约需要 4-5 秒才能完成，并且在循环 100 多个产品以创建摘要时，加起来一个非常低效/缓慢的信息系统。

有没有更有效的方法可以构建 mySQL 表和/或 SELECT 语句以更快地检索结果？也许在不同的列上定义不同的索引？我已使用 EXPLAIN 命令返回每个查询的信息，但不确定如何使用 EXPLAIN 信息来提高查询效率。

提前感谢任何可以提供帮助的 mySQL 向导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:07:36.953

**单列索引**

> 我在用：
> 
> ```
>  "SELECT DISTINCT price_date FROM table_name" 
> ```
> 
> 获取包含唯一日期列表的数组。

如果为`price_date`列创建索引，则可以更有效地执行此查询：

```
ALTER TABLE table_name ADD INDEX price_idx (price_date); 
```

**多列索引**

> 此外，循环内的代码部分（以及我的优化问题的重点）当前编写为：
> 
> ```
>  "SELECT price_amount FROM table_name WHERE item_id = 1 ORDER BY price_date" 
> ```

对于第二个查询，您应该创建一个涵盖 the`item_id`和`price_date`列的索引：

```
 ALTER TABLE table_name ADD INDEX item_price_idx (item_id, price_date); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-12T09:49:55.080

我知道这有点晚了，但我偶然发现了这一点，并认为我会把我的想法融入其中。

使用得当的索引对于加速查询非常有帮助（解释显示了一些非常棒的结果，围绕哪些索引被选择 - 如果有的话 - 用于特定查询）。然而，高效的 PHP 将提供更多帮助。

在您的情况下，您没有显示 PHP，但看起来您提供了日期列表，然后循环查找该日期中的所有项目以获取价格。执行以下操作会更有效：

选择 item_id, price_amount from table_name where price_date= order by item_id, price_amount

在 price_date、item_id、price_amount 上有一个索引（最好是唯一索引）

然后，您将通过生成的 SQL 进行单个循环，而不是具有多个 SQL 连接的循环（如果您的 SQL 服务器与 PHP 框分开，则尤其如此，因为外部网络连接可能会产生开销）。

单个查询需要 4-5 秒，但速度非常慢（至少是 100 倍），因此它表明存在问题（非常大的表，没有可使用的键）或磁盘问题（可能）。

# android - ANDROID/SQLite 搜索记录

> ID：15157115
> 
> 赞同：1
> 
> 时间：2013-03-01T11:52:39.437
> 
> 标签：android, sqlite, checkbox

我正在开发一个症状检查器应用程序。我的应用程序有一个`listview`带复选框（来自`android.R.layout.simple_list_item_multiple_choice`）。

在检查以下症状并单击**完成**按钮后，应用程序应显示用户可能遇到的情况。信息已经存储在我预先填充的`SQLite`数据库中。有关您的信息，请参阅此屏幕截图：

![在此处输入图像描述](../Images/9e43af2d7ff3ce04cc7e8a7ccc555e49.png)

这是我到目前为止所拥有的：（**Symbols.java**）

```
 public void onClick(View v) {
    // TODO Auto-generated method stub

    /*Intent i = new Intent(this, SymptomsResult.class);
    startActivity(i);
    finish();*/

    dbHelper = new DBHelper(this);
      dbHelper.openDataBase();

      String c = dbHelper.getData();

    String selected = "";
    int cntChoice = lv.getCount();

    SparseBooleanArray sparseBooleanArray = lv.getCheckedItemPositions();

    for(int i = 0; i < cntChoice; i++){

        if(sparseBooleanArray.get(i)) {
            selected += lv.getItemAtPosition(i).toString() + "\n";
        }

    }

    c.equals(selected);

    dbHelper.close();

    Toast.makeText(this, selected, Toast.LENGTH_LONG).show();       

} 
```

**DBHelper.java**

```
 public class DBHelper extends SQLiteOpenHelper{

//The Android's default system path of your application database.
private static String DB_PATH = "/data/data/com.fps.myheartfirst/databases/";
private static String DB_NAME = "mhfDB";
private static String KEY_CONDITIONS = "conditions";
private static String KEY_SYMPTOMS = "symptoms";
private static String DB_TABLE = "tblSymptoms";
private SQLiteDatabase myDataBase; 
private final Context myContext;

/**
 * Constructor
 * Takes and keeps a reference of the passed context in order to access to the application assets and resources.
 * @param context
 */

public DBHelper(Context context) {
    super(context, DB_NAME, null, 1);
    this.myContext = context;
}   

/**
 * Creates a empty database on the system and rewrites it with your own database.
 * */

public void createDataBase() throws IOException{

    boolean dbExist = checkDataBase();

    myDataBase = null;

     if (dbExist) {
            // do nothing - database already exist
        } else {

            // By calling this method and empty database will be created into
            // the default system path

            myDataBase = this.getReadableDatabase(); 
            myDataBase.close();

        try {
            copyDataBase(); 
        } catch (IOException e) {
            throw new Error("Error copying database");
        }
    }
}

/**
 * Check if the database already exist to avoid re-copying the file each time you open the application.
 * @return true if it exists, false if it doesn't
 */

private boolean checkDataBase(){
    SQLiteDatabase checkDB = null;
    try{
        String myPath = DB_PATH + DB_NAME;
        checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);
    }catch(SQLiteException e){
        //database doesn't exist yet.
    }
    if(checkDB != null){
        checkDB.close();
    }

    return checkDB != null ? true : false;
}

/**
 * Copies your database from your local assets-folder to the just created empty database in the
 * system folder, from where it can be accessed and handled.
 * This is done by transfering bytestream.
 * */

private void copyDataBase() throws IOException{

    //Open your local db as the input stream
    InputStream myInput = myContext.getAssets().open(DB_NAME);

    // Path to the just created empty db
    String outFileName = DB_PATH + DB_NAME;

    //Open the empty db as the output stream
    OutputStream myOutput = new FileOutputStream(outFileName);

    //transfer bytes from the inputfile to the outputfile
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer))>0){
        myOutput.write(buffer, 0, length);
    }

    //Close the streams
    myOutput.flush();
    myOutput.close();
    myInput.close();

}

public void openDataBase() throws SQLException{
    //Open the database
    String myPath = DB_PATH + DB_NAME;
    myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.NO_LOCALIZED_COLLATORS | SQLiteDatabase.OPEN_READONLY);
}

@Override
public synchronized void close() {
    if(myDataBase != null)
        myDataBase.close();
    super.close();
}

@Override
public void onCreate(SQLiteDatabase db) {
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
}

public String getData() {

    String search = "";

    Cursor c = myDataBase.rawQuery("SELECT " + KEY_CONDITIONS + " FROM " + DB_TABLE + 
            " WHERE " + KEY_SYMPTOMS + " = '" 
    + search + "'", null);
            //new String[] { name }, null, null, null);

    int iRow = c.getColumnIndex(KEY_CONDITIONS);

    for(c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
        search = search + c.getString(iRow);
    }

    return search;

} 
```

我的问题是，如何为我的症状类放置字符串查询？我对数据库编程有点陌生，所以请原谅。

我相信在这一行中，我必须说些什么：

```
 c.equals(selected);

    dbHelper.close();

    Toast.makeText(this, selected, Toast.LENGTH_LONG).show(); 
```

因此，将向用户显示 toast 以查看可能的条件。这里有人知道如何做到这一点吗？我会很感激你的帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:16:22.353

```
public String getData( String search) {

 Cursor c = myDataBase.query("SELECT " + KEY_CONDITIONS + " FROM " + DB_TABLE + 
        " WHERE " + KEY_SYMPTOMS + " = '" 
+ search + "'", null);

Cursor c = myDataBase.query(DB_TABLE ,KEY_SYMPTOMS+ " = ?",new String[]{search},null,null,null);

int iRow = c.getColumnIndex(KEY_CONDITIONS);

for(c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
    search = search + c.getString(iRow);
}

return search;

} 
```

将搜索词传递给`getData()`方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:17:09.883

更改**getData**方法，如下所示 -

```
public String getData(String [] symptoms) {
    String search = null;
    Cursor c = myDataBase.query(DB_TABLE, new String [] {KEY_CONDITIONS}, KEY_SYMPTOMS + "= ? ", symptoms, null, null, null);

    c.moveToFirst();

    while (c.isAfterLast() == false) {
        search = "" + c.getString(0);
        c.moveToNext();
    }

    return search;

} 
```

在**症状**类中 - 将**onClick**更改为 -

```
public void onClick(View v) {

    ArrayList<String> alSymptoms = new ArrayList<String>();

    dbHelper = new DBHelper(this);

    try {

        dbHelper.createDataBase();

    } catch (IOException ioe) {

        throw new Error("Unable to create database");

    }

    try {

        dbHelper.openDataBase();

    } catch (SQLException sqle) {

        throw sqle;

    }

    String selected = "";

    int cntChoice = lv.getCount();

    SparseBooleanArray sparseBooleanArray = lv.getCheckedItemPositions();

    for (int i = 0; i < cntChoice; i++) {

        if (sparseBooleanArray.get(i)) {

            //Log.i("Selected", lv.getItemAtPosition(i).toString());
            //selected += lv.getItemAtPosition(i).toString() + "\n";
            alSymptoms.add(lv.getItemAtPosition(i).toString());
        }

    }
    String [] symptoms = alSymptoms.toArray(new String[alSymptoms.size()]);

    String c = dbHelper.getData(symptoms);

    Toast.makeText(this, c, Toast.LENGTH_LONG).show();

    dbHelper.close();
} 
```

# android - 未在 SQLite 中创建数据库

> ID：15157116
> 
> 赞同：1
> 
> 时间：2013-03-01T11:52:43.370
> 
> 标签：android, sqliteopenhelper, sqlite

我构建了一个相同的应用程序，它从用户那里获取数据。我试图将数据保存到 SQLite 数据库中。当我运行该应用程序时，界面似乎运行良好。但是当我点击“保存”按钮时，应用程序通过给出错误“不幸的是应用程序已关闭”而关闭。不知道原因。我检查了数据库是否创建，发现它没有创建。

这是我的 MainActivity 类。

```
public class WaterReadingMainActivity extends Activity 
{

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);     
    setContentView(R.layout.activity_main);

    final RelativeLayout mainLayout=(RelativeLayout)findViewById(R.id.mainLayout);
    mainLayout.startAnimation(AnimationUtils.loadAnimation(this, android.R.anim.slide_out_right));
    final LinearLayout readingLayout=(LinearLayout)findViewById(R.id.waterReading);
    readingLayout.startAnimation(AnimationUtils.loadAnimation(this, android.R.anim.slide_out_right));
    final LinearLayout pastDatePickerLayout=(LinearLayout)findViewById(R.id.PastDatePickerLayout);
    pastDatePickerLayout.startAnimation(AnimationUtils.loadAnimation(this, android.R.anim.slide_out_right));
    readingLayout.setVisibility(View.GONE);
    pastDatePickerLayout.setVisibility(View.GONE);

    Button AddWaterReading=(Button)findViewById(R.id.AddWaterReading);    //click on + button.
    AddWaterReading.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            readingLayout.setVisibility(View.VISIBLE);
            mainLayout.setVisibility(View.GONE);
            TextView txtgetCurrentDate=(TextView)findViewById(R.id.currentDate);
            final Calendar c=Calendar.getInstance();
            txtgetCurrentDate.setText((c.get(Calendar.MONTH)+1)+"/"+c.get(Calendar.DATE)+"/"+c.get(Calendar.YEAR));  

        }
    });

    TextView getPastDate=(TextView)findViewById(R.id.getDate);
    getPastDate.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            readingLayout.setVisibility(View.GONE);
            pastDatePickerLayout.setVisibility(View.VISIBLE);                           
        }
    });

    Button savePastDate=(Button)findViewById(R.id.savePastDate);
    savePastDate.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            pastDatePickerLayout.setVisibility(View.GONE);
            readingLayout.setVisibility(View.VISIBLE);

            DatePicker getPastDatepicker=(DatePicker)findViewById(R.id.getPastDate);
                int YY=getPastDatepicker.getYear();
                int MM=getPastDatepicker.getMonth();
                int DD=getPastDatepicker.getDayOfMonth();
                TextView getPastDate=(TextView)findViewById(R.id.getDate);  
                getPastDate.setText((MM+1)+"/"+DD+"/"+YY);
        }
    });

    Button saveWaterReadingToDB=(Button)findViewById(R.id.saveWaterReading);
    saveWaterReadingToDB.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            readingLayout.setVisibility(View.GONE);
             mainLayout.setVisibility(View.VISIBLE);    

             TextView getPastDate=(TextView)findViewById(R.id.getDate);
             TextView txtgetCurrentDate=(TextView)findViewById(R.id.currentDate);
             TextView txtgetWaterReading=(TextView)findViewById(R.id.water_Reading);

             SQLiteDatabase DB;
             SQLiteOpenHelper helper = null;
             DB=helper.getWritableDatabase();

             String pastDate=getPastDate.getText().toString().trim();
             String currentDate=txtgetCurrentDate.getText().toString().trim();
             String waterReading=txtgetWaterReading.getText().toString().trim();

             ContentValues values=new ContentValues();
             values.put(CreateDB.COLUMN_NAME_READING_MODE,"Water");
             values.put(CreateDB.COLUMN_NAME_PASTDATETIME, pastDate);
             values.put(CreateDB.COLUMN_NAME_CURRENTDATETIME, currentDate);
             values.put(CreateDB.COLUMN_NAME_READINGVALUE, waterReading);

             DB.insert(CreateDB.TABLE_NAME, null, values);
             Toast.makeText(getApplicationContext(), "Added", Toast.LENGTH_LONG).show();
             DB.close();
             helper.close();                 
        }
    });

  } 
  } 
```

和 CreateDB 类，

```
 public abstract class CreateDB extends SQLiteOpenHelper
    {       
    private static final String DATABASE_NAME="WaterElectricityReading.db";
    public static final String TABLE_NAME="Reading";
    public static final String COLUMN_NAME_READING_ID="_Id";
    public static final String COLUMN_NAME_READING_MODE="ReadingMode";
    public static final String COLUMN_NAME_PASTDATETIME="PastDateTime";
    public static final String COLUMN_NAME_CURRENTDATETIME="CurrentDateTime";
    public static final String COLUMN_NAME_READINGVALUE="ReadingValue";
    private static final int DATABASE_VERSION = 1;

    public CreateDB(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);

    }

    public void onCreate(SQLiteDatabase DB){

        final String CREATE_TABLE="create table if not exists"+ TABLE_NAME + "("+ COLUMN_NAME_READING_ID +"integer primary key autoincrement,"
                +COLUMN_NAME_READING_MODE+"text not null,"+COLUMN_NAME_PASTDATETIME+"date not null,"+COLUMN_NAME_CURRENTDATETIME
                +"date not null,"+COLUMN_NAME_READINGVALUE+"integer not null"+");";
        DB.execSQL(CREATE_TABLE);                           

    }                   
} 
```

这是我的堆栈跟踪，

```
03-01 11:47:49.912: E/Trace(3010): error opening trace file: No such file or directory (2)
03-01 11:47:50.942: D/dalvikvm(3010): GREF has increased to 201
03-01 11:47:50.961: D/gralloc_goldfish(3010): Emulator without GPU emulation detected.
03-01 11:47:51.282: I/Choreographer(3010): Skipped 174 frames!  The application may be doing too much work on its main thread.
03-01 11:47:51.312: D/dalvikvm(3010): GC_CONCURRENT freed 149K, 9% free 3661K/3988K, paused 76ms+31ms, total 312ms
03-01 11:48:07.402: I/Choreographer(3010): Skipped 40 frames!  The application may be doing too much work on its main thread.
03-01 11:48:08.782: I/Choreographer(3010): Skipped 33 frames!  The application may be doing too much work on its main thread.
03-01 11:48:08.812: I/Choreographer(3010): Skipped 34 frames!  The application may be doing too much work on its main thread.
03-01 11:48:08.902: I/Choreographer(3010): Skipped 41 frames!  The application may be doing too much work on its main thread.
03-01 11:48:08.952: I/Choreographer(3010): Skipped 34 frames!  The application may be doing too much work on its main thread.
03-01 11:48:09.102: I/Choreographer(3010): Skipped 37 frames!  The application may be doing too much work on its main thread.
03-01 11:48:09.153: I/Choreographer(3010): Skipped 38 frames!  The application may be doing too much work on its main thread.
03-01 11:48:09.192: I/Choreographer(3010): Skipped 30 frames!  The application may be doing too much work on its main thread.
03-01 11:48:09.283: I/Choreographer(3010): Skipped 32 frames!  The application may be doing too much work on its main thread.
03-01 11:48:10.482: I/Choreographer(3010): Skipped 64 frames!  The application may be doing too much work on its main thread.
03-01 11:48:11.023: I/Choreographer(3010): Skipped 85 frames!  The application may be doing too much work on its main thread.
03-01 11:48:11.142: I/Choreographer(3010): Skipped 100 frames!  The application may be doing too much work on its main thread.
03-01 11:48:11.705: I/Choreographer(3010): Skipped 65 frames!  The application may be doing too much work on its main thread.
03-01 11:48:13.252: D/AndroidRuntime(3010): Shutting down VM
03-01 11:48:13.252: W/dalvikvm(3010): threadid=1: thread exiting with uncaught exception (group=0x2bd39930)
03-01 11:48:13.272: E/AndroidRuntime(3010): FATAL EXCEPTION: main
03-01 11:48:13.272: E/AndroidRuntime(3010): java.lang.NullPointerException
03-01 11:48:13.272: E/AndroidRuntime(3010):     at com.example.mysamplewaterreadingapp.WaterReadingMainActivity$4.onClick(WaterReadingMainActivity.java:96)
03-01 11:48:13.272: E/AndroidRuntime(3010):     at android.view.View.performClick(View.java:4202)
03-01 11:48:13.272: E/AndroidRuntime(3010):     at android.view.View$PerformClick.run(View.java:17340)
03-01 11:48:13.272: E/AndroidRuntime(3010):     at android.os.Handler.handleCallback(Handler.java:725)
03-01 11:48:13.272: E/AndroidRuntime(3010):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-01 11:48:13.272: E/AndroidRuntime(3010):     at android.os.Looper.loop(Looper.java:137)
03-01 11:48:13.272: E/AndroidRuntime(3010):     at android.app.ActivityThread.main(ActivityThread.java:5039)
03-01 11:48:13.272: E/AndroidRuntime(3010):     at java.lang.reflect.Method.invokeNative(Native Method)
03-01 11:48:13.272: E/AndroidRuntime(3010):     at java.lang.reflect.Method.invoke(Method.java:511)
03-01 11:48:13.272: E/AndroidRuntime(3010):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-01 11:48:13.272: E/AndroidRuntime(3010):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-01 11:48:13.272: E/AndroidRuntime(3010):     at dalvik.system.NativeStart.main(Native Method)
03-01 11:48:17.203: I/Process(3010): Sending signal. PID: 3010 SIG: 9 
```

我的 activity_main.xml 文件，

```
 <?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/sampleLayoutExample"
  android:orientation="vertical"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent" >

  <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
   xmlns:tools="http://schemas.android.com/tools"
   android:layout_width="match_parent"
   android:layout_height="match_parent"
   tools:context=".MainActivity" 
   android:id="@+id/mainLayout">

  <TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/AddWaterReading"
    android:layout_alignParentLeft="true"
    android:layout_marginLeft="24dp"
    android:text="@string/Water_Reading"
    android:textAppearance="?android:attr/textAppearanceLarge" />

  <TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/textView2"
    android:layout_below="@+id/AddWaterReading"
    android:layout_marginTop="28dp"
    android:text="@string/Electricity_Reading"
    android:textAppearance="?android:attr/textAppearanceLarge" />

  <Button
    android:id="@+id/button3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/textView1"
    android:layout_alignLeft="@+id/AddWaterReading"
    android:text="@string/Add_Electricity_Reading" />

  <Button
    android:id="@+id/AddWaterReading"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="30dp"
    android:layout_marginTop="40dp"
    android:layout_toRightOf="@+id/textView1"
    android:text="@string/Add_Water_Reading" />

   <Button
    android:id="@+id/AddElectricityReading"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/textView1"
    android:layout_marginLeft="15dp"
    android:layout_toRightOf="@+id/AddWaterReading"
    android:text="@string/btnWater_View" />

   <Button
    android:id="@+id/button4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/button3"
    android:layout_alignBottom="@+id/button3"
    android:layout_alignLeft="@+id/AddElectricityReading"
    android:text="@string/btnElectricity_View" />

 </RelativeLayout>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:orientation="vertical" 
   android:id="@+id/waterReading">

   <TextView
    android:id="@+id/getDate"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/get_Date"
    android:textAppearance="?android:attr/textAppearanceLarge" />

  <EditText
    android:id="@+id/currentDate"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:ems="10"
    android:inputType="date" >

    <requestFocus />
 </EditText>

  <EditText
    android:id="@+id/water_Reading"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:ems="10"
    android:inputType="number" />

  <Button
    android:id="@+id/saveWaterReading"
    android:layout_width="206dp"
    android:layout_height="wrap_content"
    android:text="@string/Save_Reading" />

 </LinearLayout>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" 
    android:id="@+id/PastDatePickerLayout">

  <DatePicker
    android:id="@+id/getPastDate"
    android:layout_width="374dp"
    android:layout_height="wrap_content" 
    android:calendarViewShown="false"/>

  <Button
    android:id="@+id/savePastDate"
    android:layout_width="316dp"
    android:layout_height="wrap_content"
    android:layout_gravity="bottom"
    android:text="@string/Save_Date" />

  </LinearLayout>
  </RelativeLayout> 
```

我是android的新手。请任何人帮助我解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:57:48.350

这里有问题：

```
 SQLiteDatabase DB;
      SQLiteOpenHelper helper = null;
      DB=helper.getWritableDatabase(); 
```

应该是这样的：

```
 SQLiteOpenHelper mDbHelper = new SQLiteOpenHelper(this);
SQLiteDatabase DB= mDbHelper.getWritableDatabase(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:54:37.093

你的 create 语句是错误的，试试这个：

```
public void onCreate(SQLiteDatabase DB){

    final String CREATE_TABLE="create table if not exists "+ TABLE_NAME + "("+ COLUMN_NAME_READING_ID +" integer primary key autoincrement,"
            +COLUMN_NAME_READING_MODE+" text not null,"+COLUMN_NAME_PASTDATETIME+" date not null,"+COLUMN_NAME_CURRENTDATETIME
            +" date not null,"+COLUMN_NAME_READINGVALUE+" integer not null"+");";
    DB.execSQL(CREATE_TABLE);                           

} 
```

您必须在列定义后插入空格。

您的 SQLiteHelper 实施错误。看看那个教程[Vogela SQLite](http://www.vogella.com/articles/AndroidSQLite/article.html)

**您无法启动界面（只有 Chuck Norris 可以这样做！）。**

此外，您无法启动抽象类 CreateDB。看看教程。这很棒。

# playframework - 玩 ！Framework 2.1 无法下载 Mailer Plugin

> ID：15157122
> 
> 赞同：1
> 
> 时间：2013-03-01T11:53:08.803
> 
> 标签：playframework, playframework-2.1

构建我的 Play 时！2.1 应用程序没有下载Mailer Plugin；

> [com.typesafe#play-plugins-mailer_2.10;2.0.4：未找到]

我遵循了本自述文件中的所有步骤：[https](https://github.com/typesafehub/play-plugins/tree/master/mailer) ://github.com/typesafehub/play-plugins/tree/master/mailer ！

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T14:10:52.977

我建议将此依赖项与 Play 2.1.0 一起使用

```
"com.typesafe" %% "play-plugins-mailer" % "2.1.0" 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-01T12:19:47.453

将以下依赖项添加到您的 build.scala 文件中，而不是链接`play-plugin-mailer`中提到的依赖项：`github`

```
 "com.typesafe" % "play-plugins-mailer_2.9.1" % "2.0.4" 
```

下一个：

*   添加`1500:com.typesafe.plugin.CommonsMailerPlugin`到您的`conf/play.plugins`
*   添加`"import com.typesafe.plugin.*;"`到您要从中发送邮件的班级。

# php - 未发送来自 XAMPP 上 PHP 的邮件

> ID：15157123
> 
> 赞同：0
> 
> 时间：2013-03-01T11:53:10.300
> 
> 标签：php, email, xampp

如何从网站发送邮件..？我在我的静态网站上使用 html 和 php，但它没有通过 xamp 服务器发送邮件......我的 php 代码是

```
 <?php
     $to = "my@domain.com";
     $subject = "Test mail";
     $message = "Hello! This is a simple email message.";
     $from = "from@domain.com";
     $headers = "From:" . $from;
     mail($to,$subject,$message,$headers);
     echo "Mail Sent.";
 ?> 
```

但它没有发送电子邮件..

谁能帮我..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:02:42.937

您更有可能尝试使用本地计算机发送邮件。您可以尝试以下方法：

1.  打开`php.ini`. 您应该知道它的位置，因为它取决于您正在运行的特定服务器。
2.  搜索文件中调用的`SMTP`属性`php.ini`。一般都能找到线`SMTP=localhost`。将 localhost 更改为 ISP 的 smtp 服务器名称。并且，还有一个名为的属性`smtp_port`应该设置为`25`. 例如在您的 php.ini 文件中：

    ```
    SMTP = smtp.mylink.com.np
    smtp_port = 25 
    ```

3.  重新启动 apache 服务器，以便重新加载 PHP 模块和属性。

4.  现在尝试使用该`mail()`功能发送邮件

    ```
    mail("you@yourdomain.com","test subject","test body"); 
    ```

# php - 三列 - 使用 SQL 获取 MAX

> ID：15157126
> 
> 赞同：12
> 
> 时间：2013-03-01T11:53:22.993
> 
> 标签：php, mysql, sql

我有表：

评分：

```
id | one | two | three
1  | 12  | 3   | 7
2  | 11  | 30  | 3
3  | 8   | 14  | 4 
```

如何从这些字段（一、二、三）中获取 SQL MAX 值？对于此示例，这是**30**。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-01T11:57:27.293

在 MySQL 中，您可以使用[GREATEST](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_greatest)函数：

```
SELECT  MAX(GREATEST(one, two, three))
FROM    T; 
```

**[SQL Fiddle 示例](http://www.sqlfiddle.com/#!2/5b116/4)**

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-01T11:58:46.227

```
SELECT MAX(field) FROM (
    SELECT one AS field FROM table
    UNION 
    SELECT two AS field FROM table
    UNION 
    SELECT three AS field FROM table
) AS t 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-01T11:59:22.860

```
select GREATEST(max(one), max(two), max(three)) as maximum 
from table; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-01T11:57:16.437

您可以像这样*取消透视*数据：

```
select max(value)
from
(
  select id, 'one' col, one value
  from yourtable
  union all
  select id, 'two' col, two value
  from yourtable
  union all
  select id, 'three' col, three value
  from yourtable
) src 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/46495/1)。

或者你可以使用这样的东西：

```
SELECT max(data)
FROM 
(
  SELECT 
    CASE s.col
      WHEN 'one' THEN one
      WHEN 'two' THEN two
      WHEN 'three' THEN three
    END AS DATA
  FROM yourtable t
  CROSS JOIN 
  (
    SELECT 'one' AS col
    UNION ALL SELECT 'two'
    UNION ALL SELECT 'three'
  ) s
) s 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/46495/3)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-01T11:57:59.067

试试这个查询

```
SELECT tempTable.id, tempTable.max(val) 
FROM (SELECT id, max(one) AS val
      FROM tbl 
      UNION 
      SELECT id, max(two) AS val
      FROM tbl 
      UNION 
      SELECT id, max(three) AS val
      FROM tbl
) AS tempTable; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-01T12:00:16.173

您可以使用`case`声明

```
SELECT
    CASE
        WHEN one >= two AND one >= three THEN one
        WHEN two >= one AND two >= three THEN two
        WHEN three >= one AND three >= two THEN three
        ELSE one
    END AS MaxVal 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-01T11:58:42.480

```
select max( if( one > two, if( one > three, one, three ), if( two > three, two, three ) )
  from Rating 
```

# c# - Membership.GetUser - 表 + 字段

> ID：15157127
> 
> 赞同：5
> 
> 时间：2013-03-01T11:53:35.620
> 
> 标签：c#, asp.net

当我使用：

```
Membership.GetUser(User.Identity.Name) 
```

当我使用像这样的“标准 asp.net 成员资格提供程序表”时，有谁知道 User.Identity.Name 对应于哪个表和字段：

```
aspnet_Membership
aspnet_Users 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T12:31:46.210

`aspnet_Membership`它从表中检索记录

请阅读有关*SqlMembershipProvider 使用的存储过程的*更多信息，该部分在[Membership Providers](http://msdn.microsoft.com/en-us/library/aa478949.aspx)下描述了哪个方法访问哪个表。

# wcf-binding - 在 WCF 中实现 SSL 加密

> ID：15157129
> 
> 赞同：0
> 
> 时间：2013-03-01T11:53:38.693
> 
> 标签：wcf-binding, wcf-security

在 WCF .svc 文件中使用 SSL 需要进行哪些配置更改。在同一方面进行了很多谷歌搜索，并通过配置端点和服务行为尝试了所有可能的方法，但最终导致端点未找到错误或 404 错误。请建议我是否遗漏任何东西。随附的是 web.config 文件。提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:57:00.093

如果您只需要加密，那么[HTTP 传输安全](http://msdn.microsoft.com/en-us/library/ms734679.aspx)将是您的解决方案。

请注意，您还需要由受信任的机构（例如 VeriSign）提供的 SSL 证书。

# c - C中的以下声明有什么区别？

> ID：15157133
> 
> 赞同：2
> 
> 时间：2013-03-01T11:53:49.753
> 
> 标签：c, pointers, declaration

这两个声明有什么区别：

```
char (*ptr)[N]; 
```

对比

```
char ptr[][N]; 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T12:00:08.827

**（一）** 申报

```
char (*ptr)[N]; 
```

`ptr`以下代码`pointer to char array of size N` 将帮助您了解如何使用它：

```
#include<stdio.h>
#define N 10
int main(){
 char array[N] = "yourname?";
 char (*ptr)[N] = &array;
 int i=0;
 while((*ptr)[i])
  printf("%c",(*ptr)[i++]);
} 
```

输出：

```
yourname? 
```

请参阅：[键盘](http://codepad.org/28PEJAUN)

**(2.A)**

无效表达式在哪里`char ptr[][N];`给出错误：`array size missing in 'ptr'`。

但是`char ptr[][2] = {2,3,4,5};`是一个有效的声明，它是 2D 字符数组。下面的例子：

```
int ptr[][3] = {{1,2,3,4,5}, {5,6,7,8,9}, {6,5,4,3,2}}; 
```

创建一个*3 行和 5 个列的 int 数组*。[Codepade-示例](http://codepad.org/l5z4DFTe)

**(2.B)** 函数参数的特殊情况！

作为函数参数`char ptr[][N];`是一个有效的表达式。这意味着`ptr`可以指向 a `2D char array of N columns`。

示例：读取输出中的注释

```
#include <stdio.h>
int fun(char arr[][5]){
  printf("sizeof arr is %d bytes\n", (int)sizeof arr);
}
int main(void) {
  char arr[][6] = {{'a','b'}, {'c','d'}, {'d','e'}};
  printf("sizeof arr is %d bytes\n", (int)sizeof arr);
  printf("number of elements: %d\n", (int)(sizeof arr/sizeof arr[0]));
  fun(arr);
  return 0;
} 
```

输出：

```
sizeof arr is 6 bytes   // 6 byte an Array 2*3 = 6
number of elements: 3   // 3 rows
sizeof arr is 4 bytes   // pointer of char 4 bytes 
```

要查看正在运行的示例：[codepad](http://codepad.org/D9XARiTX)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T12:06:30.520

首先是将**ptr声明为指向char数组N的指针**
其次将**ptr声明为char数组N的数组**

请参考[链接](http://cdecl.org/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T12:04:49.343

第一个声明一个指向 N 长数组的指针，另一个声明一个二元数组。注意：它们*可以*用来实现类似的功能，但它们的含义不一样！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T12:22:33.073

1.ptr 是指向大小为 N 的字符数组的指针 2.ptr 看起来像一个二维数组，但没有提供行数。在二维数组中，行数和列数都是强制性的，因为编译器将决定应该有多少字节按（行数*列数*数据类型大小）分配给数组。此声明可以正常工作，如下所示：

```
char[][2]={
           {'a','b'}
          }; 
```

因为这里编译器会看到并理解只有一行。或者当二维数组作为函数参数传递时，列数（第二维）必须强制提供，传递行数在函数中不是强制性的定义。

# php - php xpath 根据两个属性的值（编辑）及其父属性选择节点

> ID：15157134
> 
> 赞同：0
> 
> 时间：2013-03-01T11:53:55.820
> 
> 标签：php, xpath, simplexml

xpath 1.0 - 我不得不改变方法，因为 XML 已经改变。

我需要拉

```
t-Attribute FROM the <d>-node WHERE its 
    raw-Attribute = 10 
    AND its parent-node's <scale> gender-Attribute = "*" OR "m" 
    AND the age-Attribute = "*" OR "39-59"  

<scales>
    <scale id="1" gender="*" age="*">
        <d scid="hi" raw="10" t="76" />
        <d scid="pn" raw="12" t="80" />
    </scale>
    <scale id="2" gender="m" age="*">
        <d scid="hi" raw="8" t="79" />
        <d scid="pn" raw="2" t="50" />
    </scale>
    <scale id="3" gender="*" age="19-39">
        <d scid="hi" raw="0" t="48" />
        <d scid="pn" raw="10" t="49" />
    </scale>
</scales> 
```

对于我最初的目标，Passerby 的解决方案就像一个魅力，但我不知道如何解决额外的任务......

```
$result=$xml->xpath('//scale[@gender="*" or @gender="m"][@age="*" or @age="39-59"]'); 
```

这是我最初的任务...

我想从 xml 中选择两个属性包含特定值的节点。我使用的是 simplexml，所以 xpath 必须是 1.0。

XML 片段：

```
<scales>
    <scale id="1" gender="*" age="*">
        <d>5</d>
        <d>9</d>
    </scale>
    <scale id="2" gender="m" age="*">
        <d>3</d>
        <d>0</d>
    </scale>
    <scale id="3" gender="*" age="19-39">
        <d>12</d>
        <d>19</d>
    </scale>
</scales> 
```

现在，我想选择所有`<scale>`具有...

```
(gender="*" OR gender="m") AND (age="*" OR age="39-59") 
```

在我的例子中，那些 id=1 和 id=2

我知道如何使用 1 个属性来做到这一点，但没有 OR / AND 条件......

```
$scales=$xml->xpath("//scale[@gender='m']"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:02:16.360

尝试

```
//scale[@gender="*" or @gender="m"][@age="*" or @age="39-59"] 
```

[现场演示](http://3v4l.org/mXbg3)

```
$str=<<<XML
<scales>
    <scale id="1" gender="*" age="*">
        <d>5</d>
        <d>9</d>
    </scale>
    <scale id="2" gender="m" age="*">
        <d>3</d>
        <d>0</d>
    </scale>
    <scale id="3" gender="*" age="19-39">
        <d>12</d>
        <d>19</d>
    </scale>
</scales>
XML;
$xml=simplexml_load_string($str);
$result=$xml->xpath('//scale[@gender="*" or @gender="m"][@age="*" or @age="39-59"]');
foreach($result as $node)
{
    echo $node->attributes()->id."\n";
} 
```

# ios - 如何在 iOS 中将文本视图与 UITextField 插座连接？

> ID：15157135
> 
> 赞同：0
> 
> 时间：2013-03-01T11:53:57.117
> 
> 标签：ios, textview, customization, textfield, outlet

我有一个问题真的让我发疯。

几个月前，我开始开发一个 iphone 应用程序，我需要一个多行文本字段，以便用户可以写一些评论。最后，因为当时我找不到解决方案，我找到了一个解决方案，如何使用默认为多行的文本视图。在我的项目中，我似乎已将此文本视图与 UITextField 插座连接起来。

现在我正在尝试使我的应用程序通用，所以我为 iPad 版本创建了一个新的 .xib 文件。

但是，似乎不可能将我创建的文本视图与我与 iphone .xib 一起使用的 UITextField 插座连接起来。

我真的很想在这里记住我最初是如何将这两者联系起来的。我记得我实现了一些委托方法来自定义 Text View 以作为 Text Field 工作，而且我的 iPad Text View 的所有属性似乎与 iPhone 版本的属性相同。但是我无法将它与插座连接。

有谁知道，我在这里缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:00:50.240

不可能连接`UITextView`到`UITextField`. 没有解决方案或调整可以用来改变`UITextView`行为`UITextField`。您最好使用一些第三方库并在您的项目中使用它。我仍然对你在 iPhone 项目中的表现感到惊讶。您能否分享一些您在 iPhone 中的代码，以便更好地理解您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:02:06.710

插座只能连接相同的类型，并且它们指向相同类型的对象并且它们有`1-to-1`关系，您也不能将一个插座连接到多个对象。

您可能已将您命名`UITextView`为 as`UITextView *textField` 或其他名称，您需要将您的`UITextField`插座连接到您的类中相应的 textField，您无法连接`UITextField`到`UITextView`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T12:17:27.997

看来毕竟是可能的。。

我尝试了不可想象的，它奏效了..

我从我的 text View 创建了一个新的插座，一个 UITextView 插座，然后......我刚刚将 UITextView 重命名为 UITextField 并且工作正常。我在这个插座中连接了两个 textView（iPhone.xib 和 iPad.xib）并且它工作..（我在将它们重命名为 UITextField 插座之前连接了它们，因为之后你无法连接它们）

# wcf - 在一台服务器上工作时出现错误“此服务的安全设置需要'匿名'身份验证...”

> ID：15157138
> 
> 赞同：0
> 
> 时间：2013-03-01T11:54:07.520
> 
> 标签：wcf, wcf-security

我知道这个错误已经讨论过很多次，但我找不到任何与我相关的答案，所以我再试一次。

基本上，我有一个 WCF 服务，我已将它部署到我们的一台服务器上，它与 Windows 身份验证一起工作得很好。但是，当我将同一台服务器移动到另一台服务器时，出现以下错误

“此服务的安全设置需要‘匿名’身份验证，但托管此服务的 IIS 应用程序未启用它”

我检查了绑定，它们似乎配置得很好。它们如下

> ```
>  <bindings>
>         <basicHttpBinding>
>             <binding name="basicHttpBindingConfig">
>                 <security mode="TransportCredentialOnly">
>                     <transport clientCredentialType="Windows"/>
>                 </security>
>             </binding>
>         </basicHttpBinding>
>     </bindings> 
> ```

我还比较了两台服务器上的 machine.config 和 applicationHost.config 文件，它们看起来很相似。

任何指针/帮助将不胜感激。

问候，

哈米德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:24:21.373

通过在服务器上修复 .Net 4.5 得到了解决。

作为背景，我不得不从 IIS 服务器中删除某些功能，并且必须在其上运行 aspnet_regiis -i 以重新注册 ASP.Net。

我收到了上述错误。重新安装 .Net Framework 4.5 修复了它。

# iphone - iOS - 其他视图中的视图

> ID：15157152
> 
> 赞同：0
> 
> 时间：2013-03-01T11:54:42.063
> 
> 标签：iphone, ios, objective-c, xcode, cocoa-touch

正如我多次告诉过你的，我是 iOS 开发的新手。

我已经了解了一些关于视图、视图控制器、视图层次结构和类似的东西，我正在考虑一件事。

`quartz2D`假设我想使用一些选项卡部分、一些表格部分、使用上下文菜单（这些部分（更改画布中的某些内容会导致表格中的某些更改，通过画布上的上下文菜单编辑某些值会导致在选项卡窗格中绘制图表等等......）。

问题是，如果将所有视图放在一个屏幕上并在视图控制器内的视图控制器内的视图控制器内有一些视图控制器是有效的......

假设我必须在整个应用程序工作流程中一次呈现所有视图，我应该如何管理所有特定视图（使用控制器）？

```
/* PS. I'm new to StackOver as well, so let me know if such basic and not concrete questions like that one, are unwelcome */ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T12:10:06.883

你不能在`ViewController`里面添加`ViewController`，你有一个视图控制器，你可以在上面`View`添加`SubViews`按钮、标签等。

`subViews`您可以通过 get进行迭代`self.view.subViews` 如果您有一个复杂的视图，请使其`CustomView`继承自`UIView`，以使代码可读且组织良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:04:44.087

```
 UIView *v1 = [[UIView alloc] initWithFrame:CGRectMake(20, 20, 270, 400)];
    v1.backgroundColor = [UIColor redColor];

    UIView *innerView = [[UIView alloc] initWithFrame:CGRectMake(10, 20, 240, 370)];
    innerView.backgroundColor = [UIColor greenColor];
    [v1 addSubview:innerView];

    [self.view addSubview:v1];

    for (UIView *subview in self.view.subviews)
    {
        //You can get all subView object that You added
    } 
```

# asp.net - MapHubs 不映射集线器并在 X 应用程序中返回错误

> ID：15157153
> 
> 赞同：2
> 
> 时间：2013-03-01T11:54:44.633
> 
> 标签：asp.net, signalr, signalr-hub

我正在尝试使用 WebSite 实现最简单的示例（[https://github.com/SignalR/SignalR/wiki/QuickStart-Hubs](https://github.com/SignalR/SignalR/wiki/QuickStart-Hubs)）（我一直在尝试 WebForms 但遗憾的是结果相同）

在`Monitor.cs`

```
using System;
using System.Web;
using Microsoft.AspNet.SignalR;
using Microsoft.AspNet.SignalR.Hubs;

[HubName("chat")]
public class Chat : Hub {
    public void Send(string message) {
        // Call the addMessage method on all clients            
        Clients.All.addMessage(message);
        }
    } 
```

在`Global.asax`

```
<%@ Application Language="C#" %>

<%@ Import Namespace="System" %>
<%@ Import Namespace="System.Web.Routing" %>

<script runat="server">

    void Application_Start(object sender, EventArgs e) 
    {
        // Code that runs on application startup
        RouteTable.Routes.MapHubs();
    } 
```

在`Default.aspx`

```
<%@ Page Title="Monitor" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
    CodeFile="Monitor.aspx.cs" Inherits="Monitor" %>

<asp:Content ID="MonitorHeaderContent" runat="server" ContentPlaceHolderID="HeadContent">

    <script type="text/javascript" src="Scripts/jquery-1.6.4.min.js"></script>

    <script src="Scripts/jquery.signalR-1.0.0.min.js" type="text/javascript"></script>
    <script src="/signalr/hubs" type="text/javascript"></script>
    <script type="text/javascript">
        $(function () {
            // Proxy created on the fly          
            var chat = $.connection.chat;
            // Declare a function on the chat hub so the server can invoke it          
            chat.client.addMessage = function (message) {
                $('#messages').append('<li>' + message + '</li>');
            };
            // Start the connection
            $.connection.hub.start().done(function () {
                $("#broadcast").click(function () {
                    // Call the chat method on the server
                    chat.server.send($('#msg').val());
                });
            });
        });
    </script>

</asp:Content>

<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">

    <input type="text" id="msg" />
    <input type="button" id="broadcast" value="broadcast" />
    <ul id="messages">
</asp:Content> 
```

它不起作用，当我点击`/signalr/hubs`我得到

```
 <span><h1>Server Error in 'XXX' Application.<hr width=100% size=1 color=silver></h1>
    <h2> <i>HTTP Error 404 - Not Found.</i> </h2></span> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T18:59:13.377

如果 /signalr/hubs 以 404 响应，则您对`RouteTable.Routes.MapHubs();`. 要么它没有被调用，要么有另一个路由添加到第`RouteTable`一个匹配 /signalr/hubs 但随后以 404 响应的路由。

SignalR Faq 的“为什么信号器/集线器返回 404 或为什么我得到 'myhub' 未定义”[对此](https://github.com/SignalR/SignalR/wiki/Faq)进行了讨论。如果仍然有问题，则需要[调试](http://haacked.com/archive/2008/03/13/url-routing-debugger.aspx)路由。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T01:02:09.693

对于 WebSite，在 Default.aspx 中，使用：

```
<script src="signalr/hubs" type="text/javascript"></script> 
```

我还更新了[https://github.com/SignalR/SignalR/wiki/QuickStart-Hubs](https://github.com/SignalR/SignalR/wiki/QuickStart-Hubs)中的示例。

# java - FTPClient（commons net）下载和注销不起作用

> ID：15157154
> 
> 赞同：1
> 
> 时间：2013-03-01T11:54:48.817
> 
> 标签：java, android, apache-commons-net

我为我的英语道歉。

1.  我使用以下代码将文件从 ftp 主机下载到平板电脑。当我使用 Wi-Fi 时，一切正常。但是当我尝试使用移动互联网下载文件时，下载会停止，但并非总是如此，有时会正常完成。我发现停止总是在“retrieveFile”或“注销”，程序到了这些命令就没有继续下去了，只是站着，数据传输的图标不闪烁，停止随机发生。我尝试使用不同的移动运营商，但没有区别。可能是什么原因？

2.  还有一个问题，但不是那么重要，我还没有找到如何获取文件大小，并使用了我的决定，也许还有另一种获取文件大小的方法？

    private void downloadFile(final String url, final String Message, final String Message2, final Uri uri) { final ProgressDialog progressDialog = new ProgressDialog(this); new AsyncTask() { 私有异常 m_error = null;

    ```
     @Override
           protected void onPreExecute() {
            progressDialog.setMessage(Message);
            progressDialog.setCancelable(true);             
            progressDialog.setMax(100);
            progressDialog
              .setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);             
            progressDialog.show();
           }

           @Override
           protected File doInBackground(String... params) {         
                     FileOutputStream fos = null;                        
                     File file = null;
                     FTPClient client = null;                       
                          try{  
                           client = new FTPClient();
                           client.connect(ftp_host,Integer.parseInt(ftp_port));
                           client.login(ftp_user, ftp_password);
                           client.enterLocalPassiveMode();
                           client.setFileType(FTP.BINARY_FILE_TYPE);
                           String stat = "";
                           if (url.equals("MobiTrade.apk")){
                               client.changeWorkingDirectory("/var/srv/home/user/mobitrade/update/");}
                        file = new File(Environment.getExternalStorageDirectory(),                     
                                   "/MobiTrade/update/MobiTrade.apk");}
                               stat = client.getStatus("/var/srv/home/user/mobitrade/update/MobiTrade.apk");                                                                   
                           else {   
                               client.changeWorkingDirectory("/var/srv/home/user/mobitrade/"+number+"/out/");
                               file = new File(Environment.getExternalStorageDirectory(),
                                   "/MobiTrade/in/"+url);
                        if (url.equals("message.csv")) file.delete();                               
                               stat = client.getStatus("/var/srv/home/user/mobitrade/"+number+"/out/"+url);                                                                
                         } 

                           final Integer FileSize;
                           if (stat.length() >= 64) {
                    stat = stat.substring(49,64);
                    stat = stat.trim();
                    FileSize = Integer.parseInt(stat);
                    }                                                   
                          else {
                    FileSize = 0;
                    }

                           fos = new FileOutputStream(file);

                           CountingOutputStream cos = new CountingOutputStream(fos){                                   
                               protected void beforeWrite(int n){
                                        super.beforeWrite(n);
                                        publishProgress(getCount(), FileSize);
                               }
                           };                              

                           if (url.equals("MobiTrade.apk")){
                               client.retrieveFile("/var/srv/home/user/mobitrade/update/MobiTrade.apk", cos);
                                }   
                           else {       
                               client.retrieveFile("/var/srv/home/user/mobitrade/"+number+"/out/"+url, cos);
                                }           
                       if (url.equals("message.csv")){
                           client.deleteFile("/var/srv/home/user/mobitrade/"+number+"/out/"+url);                                  
                       }            

                           client.logout();                             

                    }
                          catch (Exception e){
                           e.printStackTrace();
                          }
                             finally{
                                  try{
                                   if (fos != null) fos.close();
                                   if (client.isConnected()) {
                                        client.disconnect();
                                    }
                                  }
                                  catch (IOException e){
                                   e.printStackTrace();
                                  }
                             }
                          return file;
                    }

           protected void onProgressUpdate(Integer... values) {
            progressDialog
              .setProgress((int) ((values[0] / (float) values[1]) * 100));
           };

           @Override
           protected void onPostExecute(File result) {
            if (m_error != null) {
             m_error.printStackTrace();
             return;
            }
            progressDialog.hide();
            if (url.equals("settings.csv"))
                ProcessSettings(url);
            else if (url.equals("MobiTrade.apk"))
                ProcessUpdate();
            else
                ProcessData(url, Message2, uri);
           }
          }.execute(url);
         } 
    ```

任何帮助都是不言而喻的。

# cassandra - 复制命令在 Cassandra 中不起作用

> ID：15157161
> 
> 赞同：2
> 
> 时间：2013-03-01T11:55:08.440
> 
> 标签：cassandra

我无法在 cassandra 中运行 COPY 命令。这是我正在使用的 ColumnFamily

```
CREATE TABLE ap_perf_sample_data_tbl(
ap_mac varchar,
ap_proto int,
stime int,
ap_active_status int,
bytes_from_dev int,
bytes_to_dev int,
location_id int,
num_assocs int,
num_data_pkts int,
num_retry_pkts int,
throughput_from_ap int,
throughput_to_ap int,
throughput_total_ap int,
time_spent_on_channel int,
time_util_by_ap int,
PRIMARY KEY ((ap_mac, ap_proto), stime) 
```

我正在尝试在 cqlsh 中使用 COPY 命令，如下所示：

> cqlsh:performance_data>从' **/tmp****复制ap_perf_sample_data_tbl**（ap_mac、ap_proto、stime、location_id、num_data_pkts、num_retry_pkts、num_assocs、time_util_by_ap、time_spent_on_channel、throughput_to_ap、throughput_from_ap、throughput_total_ap、bytes_to_dev、bytes_from_dev、ap_active_status）；**错误请求：int 类型的 ap_proto 的 STRING 常量 (1) 无效，**正在记录 #0（第 1 行）处中止导入。 先前插入的值仍然存在。在 0.008 秒内导入 0 行。 cqlsh:performance_data>
> 
>  ****“/tmp/top”的内容****

 ***** * *

> 00:00:01:00:01:00,1,1359532800,1,6002166,312781,10,845100,9045000,259143,241011,52835,186318,5413799,10 00:00:02:00:02:00 ,1,1359532800,2,6002166,312781,10,845100,9045000,259143,241011,52835,186318,5413799,10 00:00:03:00:03:00,1,1359532800,3,600276 10,845100,9045000,259143,241011,52835,186318,5413799,10 00:00:04:00:04:00,1,1359532800,4,6002166,312781,10,845100,348001,2591 ,186318,5413799,10

* * *

以下是版本信息。

> [root@localhost ~]# cqlsh 在 localhost:9160 连接到测试集群。[cqlsh 2.3.0 | 卡桑德拉 1.2.2 | CQL 规范 3.0.0 | Thrift 协议 19.35.0] 使用 HELP 寻求帮助。

任何有关为什么会发生这种情况的线索将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T08:00:21.340

在 1.2.2 Cassandra 中针对此问题提交了 Bug#5305。****

# ios - iOS：-dynamic 未指定以下标志无效：-sectcreate

> ID：15157162
> 
> 赞同：3
> 
> 时间：2013-03-01T11:55:09.910
> 
> 标签：ios, xcode, linker, llvm, libtool-xcode

我的目标是构建一个包含捆绑资源的静态 iOS 库。几年前我在 OS X 上成功地做到了这一点，但我在这里遇到了一个问题。

我正在使用链接器标志添加我的资源：

```
OTHER_LDFLAGS = -sectcreate __DATA __FOO resouces/foo.bin 
```

Xcode 4.6 libtool 给了我错误：

```
libtool: -dynamic not specified the following flags are invalid: -sectcreate __DATA __FOO resouces/foo.bin 
```

我在这里看到了类似的问题，但总是与 -ObjC 标志结合使用。这些天 -sectcreate 需要 -dynamic 标志吗？我做错了吗？

谢谢

亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-24T19:47:37.113

您不能在静态库中包含资源。由于 iOS 不支持共享库，因此您将不得不忍受这个限制。引用[文档](https://developer.apple.com/library/ios/technotes/iOSStaticLibraries/Articles/configuration.html) “静态库不能直接包含资源，但静态库项目可以提供应用程序可以引用并包含在其复制捆绑资源阶段的资源。”

# extjs - 如何为 Ext.NET 中的每个 TreePanel 节点关联/检索自定义数据

> ID：15157172
> 
> 赞同：1
> 
> 时间：2013-03-01T11:55:33.947
> 
> 标签：extjs, ext.net, treepanel

我想为我的 TreePanel 中的每个节点关联自定义数据。然后我将在客户端使用它。

服务器端看起来像：

```
 Ext.Net.Node root = new Node {Text = "Dummy Form"};
        root.AttributesObject = new { nodeType = "Form" };

        Ext.Net.Node section01 = new Node { Text = "Section 01" };
        section01.AttributesObject = new { nodeType = "Section" }; 
```

**如何在客户端访问此*AttributesObject ？***

客户端看起来像：

```
 .Listeners(l =>
    {
       l.ItemClick.Handler = "myClickHandler(item,record,node,index,e)";
    } 
```

我尝试了以下方法：

*   item.nodeType
*   记录.nodeType
*   节点.nodeType
*   记录.数据.节点类型

以上都不适合我，他们每个人都返回“未定义”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:26:50.460

*记录。**raw** .[attributeFieldName]*可用于访问数据客户端。

对于如下定义的点击处理程序：

```
.Listeners(l =>
    {
       l.ItemClick.Handler = "myClickHandler(item,record,node,index,e)";
    } 
```

在服务器端设置属性：

```
section01.AttributesObject = new { nodeType = "Section" }; 
```

在客户端访问自定义设置属性：

```
function myClickHandler(item, record, node, index, e) {

    var nodeType = record.raw.nodeType;
    console.log(nodeType); //prints "Section"

} 
```

# vim - Textile Tables 的编辑器或 Js 扩展

> ID：15157174
> 
> 赞同：1
> 
> 时间：2013-03-01T11:55:39.320
> 
> 标签：vim, sublimetext2, redmine, textile

有没有类似的东西：

[https://github.com/vkocubinsky/SublimeTableEditor](https://github.com/vkocubinsky/SublimeTableEditor)

我必须用纺织品（Redmine）写很多表格，我希望它们的格式很漂亮

```
|_. Header1 |
| row1      |
| row2      | 
```

而不是那个丑陋的：

```
|_. Header1|
|row1|
|row2| 
```

特别是当我想创建更复杂的表时：

```
|_. Header1 |_. Header2 |
|/2\. two lines row1| one|
|two|
|/2\. two lines row2| one|
|two| 
```

它应该是这样的：

```
|_. Header1         |_. Header2 |
|/2\. two lines row1 | one       |
                    | two       |
|/2\. two lines row2 | one       |
                    | two       | 
```

我正在寻找用于 SublimeText/VIM/Notepad++ 或 JS 扩展的东西，以在文本文件中正确格式化表格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T11:46:30.900

前几天我整理了一些东西来帮助我解决这个问题，并为纺织表格添加了输出格式。

[http://joecullin.com/data_converter/](http://joecullin.com/data_converter/)

您必须选择 Redmine 表作为输出格式。每次我想在 redmine 中创建表格时，我仍然使用这个工具。即使对于小型表格，它也比手动输入降价更容易。现在我可以很容易地从 Excel 中粘贴数据，然后将结果粘贴到 Redmine。

我的代码中仍然存在一些问题，但如果我有一张大桌子，它可以让我快速找到一个好的起点。然后我可以手动解决问题。如果您正在考虑编写自己的 javascript，您可能会将该代码视为灵感。

# visual-studio - dnn filepickeruploader 控件

> ID：15157175
> 
> 赞同：2
> 
> 时间：2013-03-01T11:55:39.703
> 
> 标签：visual-studio, dotnetnuke, dotnetnuke-module

我正在为 DotNetNuke 7 开发一个模块。我希望能够为目录中的条目上传缩略图。在我的模块的编辑视图中管理位置控制并上传和选择文件但是当我构建项目时出现以下错误：

> C:\dnn\dotnetnuke\DesktopModules\EventCatalog\Edit.ascx.designer.cs(103,38,103,41)：错误 CS0234：命名空间 'DotNetNuke' 中不存在类型或命名空间名称 'Web'（您是否缺少装配参考？）

另外我不知道如何在后端获取所选文件以将 url 保存到数据库。当我输入控件的 ID 时，VS 会识别它，但智能感知没有提供任何线索作为可能的选项。

谁能告诉我如何解决上述错误，如果可能的话，请向我指出此控件的概述/教程。已经做了相当多的谷歌搜索，但没有找到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:17:36.297

好吧，首先，您可能需要将对 DotNetNuke.Web 的程序集引用添加到您的项目中。一旦那里，它可能也会帮助你缺乏智能。

看起来您与所选 URL 交互的主要方式是通过`FileID`属性。控件本身将管理将文件保存到选定的文件`FolderPath`（用户可以更改也可以不更改）。

但是，您是对的，没有很好的资源来说明如何使用该控件。最好的“教程”可能是通过 DotNetNuke 核心代码查看核心如何使用控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T08:55:04.843

内置的 dnn 上传控件是专门为将文件上传到 dnn 文件系统而设计的——但老实说，它很难使用。

它对您要对文件执行的操作做了很多假设，并且作为其过程的一部分，它会自动在 dnn 文件系统索引中注册新文件。

对于缩略图上传或任何此类花哨的东西，它也不是真正的理想选择——因为它没有文件大小管理或缩放和裁剪的能力——它已经被承诺过几次，但迄今为止还没有实现。

最重要的是，当涉及到实际存储上传文件的位置时，它有自己的想法 - 这意味着您最好查看可以更轻松控制的第 3 方上传器。

FWIW - 每个 dnn 安装都会安装完整版的 Telerik asyn 上传库 - 您需要手动设置它，但这并不难。

`<dnn:DnnAsyncUpload></dnn:DnnAsyncUpload>`是标记的基本结构，其功能等同于`<telerik:RadAsyncUpload></telerik:RadAsyncUpload>`

它记录在这里[http://www.telerik.com/help/aspnet-ajax/asyncupload-overview.html](http://www.telerik.com/help/aspnet-ajax/asyncupload-overview.html)

说了这么多，如果您确实想坚持使用 dnn 文件选择器 - 此代码也可以让您找到 dnn 上传文件的文件对象。

```
String thisURL = "";
String thisPHYSICAL = "";
Int32 itest001 = thisControl001.FileID;
if ( itest001 > 0 )
{
    var thisFILE = (DotNetNuke.Services.FileSystem.FileInfo)FileManager.Instance.GetFile(itest001);
    thisURL = FileManager.Instance.GetUrl(thisFILE );
    thisPHYSICAL = thisURL.PhysicalPath;
} 
```

`thisURL`将包含相对于您的网站域的 url `thisPHYSICAL`将包含文件在您的服务器上的物理位置。

# opencv - 如何使用 OpenCV 在白色背景上打印彩色文本

> ID：15157179
> 
> 赞同：0
> 
> 时间：2013-03-01T11:55:49.420
> 
> 标签：opencv

我可以在 OpenCV 中使用 printext 在白色背景文本上打印彩色前景吗？

我试过：

```
putText(frame, "Male", centerPrint,FONT_HERSHEY_COMPLEX_SMALL, 0.8,cvScalar(255, 0, 0), 1, CV_AA); 
```

但它会在透明背景上打印蓝色文本。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:22:34.670

颜色是 bgr，而不是 rgb（所以红色是 (0,0,255)）。而且你不能改变背景。（除非你之前用bg颜色画了一个填充的矩形）

# android - 使用 ant 构建时验证错误，从 Eclipse 构建时确定

> ID：15157185
> 
> 赞同：1
> 
> 时间：2013-03-01T11:56:06.310
> 
> 标签：android, eclipse, adt, javac, verifyerror

我的 Android 的 java 项目有几个配置。以前我切换它们并手动从 Eclipse 构建 apk，但最近我开发了几个 ant 任务以使我的生活更轻松：我启动 cmd 文件并构建所有配置（每次更改配置变量，移动资源，修改清单， ETC。）。

**但是今天我发现ant（它使用javac）用android工作流（我的build.xml包括${sdk.dir}/tools/ant/build.xml）编译的代码与Eclipse中ADT工具生成的代码不同.** 差异是致命的。

在编译阶段 javac 声称某些文件包含 BOM，并且一个类太大（对于许多静态数组）。我已经将所有文件转换为 utf8 w/o bom，将大类分成两个，javac 没有更多问题。很容易。

但是，如果我在 4.0.x 设备或模拟器上启动 ant-made apk（在 1.6、2.2、4.1、4.2 上工作），它会在运行时强制关闭并说：

```
03-01 09:15:16.247: W/dalvikvm(1993): VFY: register1 v3 type 17, wanted 18
03-01 09:15:16.247: W/dalvikvm(1993): VFY:  rejecting opcode 0xc8 at 0x0023
03-01 09:15:16.247: W/dalvikvm(1993): VFY:  rejected Lcom/myproj/MySomeClass;.doThing (I)V
03-01 09:15:16.247: W/dalvikvm(1993): Verifier rejected class Lcom/myproj/MySomeClass;
03-01 09:15:16.247: W/System.err(1993): java.lang.VerifyError: com/myproj/MySomeClass
...
<stack here>
... 
```

但是 eclipse-adt-made apk 在 4.0.x 上运行得很好！此外 - 我从未在编译时看到关于 utf bom 或类大小的 adt 声明。

所以我认为我们应该在 ant build 中使用其他东西而不是 javac。但是谷歌在它的 build.xml 中完全使用了 javac。**使用 ant 构建时，我们如何使用 ADT 编译器而不是 javac？**

当然，我仍然可以在 eclipse 中构建，但是 ant 脚本在我花费 20 分钟时花费 1 分钟，并且在更改 cfg vars 时它永远不会犯愚蠢的错误（它们之间存在一些依赖关系）。

提前致谢！

UPDT：我怀疑它与我使用的 java 版本有某种联系。Ant 使用 1.7 x86 jdk 执行，而 eclipse 使用 jdk1.6.0_26 x64。有人说 Dalvik dex 不理解一些 java 1.7 字节码，但我应该检查一下。

UPDT1：不，我已经删除了所有 jdk，然后安装了 jdk 1.6.0_41 x86 和 x64，设置 eclipse 使用 1.6.0_41 x64 并将 JAVA_PATH 设置为 jdk 1.6.0_41 x86。同样的事情-在eclipse中编译的apk（Android工具->导出签名的apk）可以工作，ant-compiled apk说VerifyError。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T00:12:41.827

认为我已经解决了这个问题。

我花了几个小时切换 java 版本，重新定义默认的 google ant 任务，尝试从几个 jdk 中独立启动不同的 javac 来编译我的类。在过去的五年里，我从来没有使用控制台工具编译过 java，所以这既困难又令人困惑。我对任何 javac 都没有运气，同样的验证错误。

然后我阅读了Eclipse和Android的文档，发现当我们在eclipse中构建apk时，ADT使用Eclipse的JDT（Eclipse Compiler for Java）而不是javac将java代码编译成类，然后使用dx工具制作dalvik代码。所以我们需要启动 JDT 而不是正常的 -compile ant 任务，对吗？不，实际上一切都更容易。正如经常发生的那样，我从头开始，但是一旦我明白我需要这个编译工具，我就走对了。

Eclipse Compiler for Java (JDT ECJ) 是比实际的 javac 更智能的工具。对我来说这是一个带有大量参数的新工具，但 JDT 提供了非常酷的[ant javac 适配器](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.user/tasks/task-ant_javac_adapter.htm)，我们可以在 javac ant 任务中使用它 - 设置“build.compiler”属性，然后启动正常的 android ant -compile 任务：

```
<property name="build.compiler" value="org.eclipse.jdt.core.JDTCompilerAdapter" />

<javac encoding="${java.encoding}" source="1.6" target="1.6" debug="true" extdirs=""
                   includeantruntime="false" destdir="${out.classes.absolute.dir}"
                   bootclasspathref="project.target.class.path"
                   verbose="${verbose}" classpathref="project.javac.classpath"
                   fork="${need.javac.fork}" >
    <src path="${source.absolute.dir}" />
    <src path="${gen.absolute.dir}" />
    <compilerarg line="${java.compilerargs}" />
</javac> 
```

但除非您有 ecj.jar，否则这将不起作用。而且eclipse中没有这样的文件！继续调查我发现 Eclipse Compiler for Java 可以单独[下载](http://download.eclipse.org/eclipse/downloads/drops4/R-4.2.2-201302041200/winPlatform.php#EclipseSDK)。要完成这项工作，您需要将此 jar 复制到 ant/lib 文件夹。但奇怪的是 - ecj 4.2.2 编译的代码具有相同的验证问题。幸运的是，我尝试了 ecj 3.5.1 - 它奏效了！但是我不满意 - 我仍然不能说为什么 ecj 4.2.2 没有帮助，而 3.5.1 有帮助。如果我升级 eclipse 并且它会编译坏类怎么办？我比较了字节码——它的差别非常小（由 jd-gui 反编译），所以我认为问题出在生成的类文件中。我想知道到底是什么，但我什至无法想象要寻找什么。

无论如何，还有更多。当您查看 eclipse/plugins 文件夹时，您会看到一个名为“org.eclipse.jdt.core_3.6.2.v_A76_R36x.jar”的文件。它在内部保存 jdtCompilerAdapter.jar 文件（因为 jar 是一个 zip 存档）。如果将其复制到 ant/lib，然后复制 org.eclipse.jdt.core_xxxxxx.jar 文件本身，您将获得与当前 eclipse 版本完全相同的编译器！瞧！通过这种方式，您可以确定如果 eclipse 编写了一个“好”的代码 - ant 也可以。

* * *

**所以最后一切都导致了两个简单的步骤：**

1.  将 org.eclipse.jdt.core_xxxxxx.jar 和 jdtCompilerAdapter.jar 从其中复制到您的 ant/lib 文件夹。

2.  将以下内容添加到您的 project.properties 文件中：

    *   java.target=1.6
    *   java.source=1.6
    *   build.compiler=org.eclipse.jdt.core.JDTCompilerAdapter

就这样！

***但是，如果您知道为什么来自 eclipse juno 包（4.2.2）的 ecj 无法编译正确的代码，我想听听！***

# scala - 有没有办法在 Scala 中指定类型参数的子集，推断其余的？

> ID：15157193
> 
> 赞同：9
> 
> 时间：2013-03-01T11:56:41.937
> 
> 标签：scala, type-inference

我有一个看起来像这样的类：

```
class X[A <: Throwable, B, C](b: B, c: C) 
```

可以推断出 A、B 和 C，所以我可以将其实例化为：

```
val x = new X(3, 4) 
```

这给了我一个 X[Nothing, Int, Int] - 通常是我想要的。

但我有时想将 A 指定为 Nothing（比如 AssertionError）。在不指定 B 和 C 的情况下这是否可能。我想象的语法如下：

```
val x = new X[AssertionError](3, 4)
val x = new X[AssertionError, _, _](3, 4)
val x = new X[AssertionError,,](3, 4) 
```

但显然这不起作用。

是否有一些语法，或者我可以通过某种方式获得相同的结果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T12:29:35.540

我主要关心的是在使用时使这变得容易（我不希望必须为每次使用定义新类型，因为异常类型通常不同）。我发现我可以使用伴随对象来工厂化中间工厂：

```
class X[A <: Throwable, B, C](b: B, c: C) {
}

trait XFactory[A <: Throwable] {
  def apply[B, C](b: B, c: C): X[A, B, C]
}

object X {
  def apply[A <: Throwable: Manifest](): XFactory[A] = {
    new XFactory[A] {
      override def apply[B, C](b: B, c: C): X[A, B, C] = {
        new X(b, c)
      }
    }
  }
}

val x = X[AssertionError].apply(3,3) 
```

我能看到的唯一缺点是你必须拼出“申请”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T14:20:19.370

Here is my solution:

```
scala> class X[A <: Throwable, B, C](b: B, c: C)
defined class X

scala> class Builder[A <: Throwable] {
     |   def apply[B, C](b: B, c: C) = new X[A,B,C](b,c)
     | }
defined class Builder

scala> def X[A <: Throwable]: Builder[A] = new Builder[A]
X: [A <: Throwable]=> Builder[A]

scala> val x = X[AssertionError](3, 4)
x: X[AssertionError,Int,Int] = X@2fc709 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-01T12:20:20.927

您可以定义一个类型别名，其中您的第一个类型参数固定为`AssertionError`：

```
scala> class X[A <: Throwable, B, C](b: B, c: C)
defined class X

scala> type XAssertionError[B, C] = X[AssertionError, B, C]
defined type alias XAssertionError

scala> val x = new XAssertionError(3,4)
x: X[java.lang.AssertionError,Int,Int] = X@22fe135d 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-01T12:18:53.973

如果您不害怕简洁的硬核语法，您可能需要为此使用[类型 lamdas](https://stackoverflow.com/questions/8736164/what-are-type-lambdas-in-scala-and-what-are-their-benefits)：

```
Welcome to Scala version 2.10.0-20121205-235900-18481cef9b (OpenJDK 64-Bit Server VM, Java 1.7.0_15).
Type in expressions to have them evaluated.
Type :help for more information.

scala> case class X[A <: Throwable, B, C](b: B, c: C)
defined class X

scala> type P[A,B] = ({type l[a,b] = X[AssertionError, a, b]})#l[A,B]
defined type alias P

scala> val x = new P(1,2)
x: X[AssertionError,Int,Int] = X(1,2) 
```

尽管如此，正如 Frank S. Thomas 建议的那样，定义类型别名是一种方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-01T15:53:44.640

您可以只定义一个带有默认参数的构造函数。

```
scala> class X[A <: Throwable, B, C](b: B, c: C, clz:Class[_ <: A] = classOf[Nothing])
defined class X

scala> new X(1,2)
res0: X[Nothing,Int,Int] = X@16de4e1

scala> new X(1,2, classOf[AssertionError])
res1: X[AssertionError,Int,Int] = X@1e41869 
```

# actionscript-3 - 从flex3中的自定义按钮调用放大和缩小上下文菜单

> ID：15157194
> 
> 赞同：10
> 
> 时间：2013-03-01T11:56:50.510
> 
> 标签：actionscript-3, apache-flex, flex3, flashdevelop

我想从 adobe flex 应用程序中的自定义按钮调用上下文菜单的放大和缩小功能。

代码如下：

```
onZoomInButtonClick()
{
this.contextMenu.customItems.zoom.doIn();
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T22:20:46.320

（至少据我所知）您无法通过代码访问 Flash 播放器放大/缩小命令。

您可以通过在文档类中执行以下操作来伪造它（舞台下最顶层的显示对象）

```
stage.addEventListener(MouseEvent.MOUSE_WHEEL,mouseWheel,true,2); //listen on the capture phase of the event and give a higher priority than default so it reacts before your grid

function mouseWheel(e:MouseEvent):void {
    if(!e.ctrlKey) return; //Ctrl has to be pressed or we ignore the wheel

    e.stopImmediatePropagation(); //this stops the event from firing on anything else, like your data grid

    var tmpScale:Number = scaleX + (e.delta > 0 ? .2 : -.2); //lets zoom in/out in incriments of 20% (.1)

    if(tmpScale < 1){ //if the scale is less than one now, lets keep it at 1
        tmpScale = 1;
        this.scaleX = 1;
        this.x = 0;
        this.scaleY = 1;
        this.y = 0;
        return;
    }

    if(tmpScale > 4){ //lets set the max to 4
        tmpScale = 4;
    }

    scaleAroundMouse(this,tmpScale);

}

function scaleAroundMouse(objectToScale:DisplayObject, scaleAmount:Number, bounds:Rectangle = null):void {
    // scaling will be done relatively
    var relScaleX:Number = scaleAmount / objectToScale.scaleX;
    var relScaleY:Number = scaleAmount / objectToScale.scaleY;
    // map vector to centre point within parent scope

    var scalePoint:Point = objectToScale.localToGlobal( new Point(objectToScale.mouseX, objectToScale.mouseY));
    scalePoint = objectToScale.parent.globalToLocal( scalePoint );
    // current registered postion AB
    var AB:Point = new Point( objectToScale.x, objectToScale.y );
    // CB = AB - scalePoint, objectToScale vector that will scale as it runs from the centre
    var CB:Point = AB.subtract( scalePoint );
    CB.x *= relScaleX;
    CB.y *= relScaleY;
    // recaulate AB, objectToScale will be the adjusted position for the clip
    AB = scalePoint.add( CB );
    // set actual properties

    if(bounds){
     var limits:Rectangle = new Rectangle(
        bounds.x + (bounds.width - (objectToScale.width * relScaleX)),
        bounds.y + (bounds.height - (objectToScale.height * relScaleY)),
        (objectToScale.width * relScaleX) - bounds.width,
        (objectToScale.height * relScaleY) - bounds.height
     );

     if(AB.x < limits.x) AB.x = limits.x;
     if(AB.x > limits.x + limits.width) AB.x = limits.x + limits.width;
     if(AB.y < limits.y) AB.y = limits.y;
     if(AB.y > limits.y + limits.height) AB.y = limits.y + limits.height;       
    }

    objectToScale.scaleX = scaleAmount;
    objectToScale.scaleY = scaleAmount;
    objectToScale.x = AB.x;
    objectToScale.y = AB.y;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T08:09:32.723

好的，advancedatagrid 可能会监听键盘事件，当 ctrl 键按下时 - 监听鼠标滚轮事件并更改比例，请参见示例：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
        <fx:Script>
            <![CDATA[

                protected function doMouseWheel(evt:MouseEvent):void 
                {
                    scaleX = scaleY += evt.delta * 0.1;
                }

                protected function adg_keyDownHandler(event:KeyboardEvent):void
                {
                    if (event.ctrlKey)
                    {
                        systemManager.addEventListener(MouseEvent.MOUSE_WHEEL, doMouseWheel);
                    }
                }

                protected function adg_keyUpHandler(event:KeyboardEvent):void
                {
                    if (!event.ctrlKey)
                    {
                        systemManager.removeEventListener(MouseEvent.MOUSE_WHEEL, doMouseWheel);
                    }
                }

            ]]>
        </fx:Script>    

        <mx:AdvancedDataGrid id="adg" keyDown="adg_keyDownHandler(event)" keyUp="adg_keyUpHandler(event)"
                             horizontalCenter="0" verticalCenter="0">
            <mx:columns>
                <mx:AdvancedDataGridColumn dataField="@label"/>
                <mx:AdvancedDataGridColumn dataField="@data" />
            </mx:columns>
            <mx:dataProvider>
                <s:XMLListCollection id="dp">
                    <s:source>
                        <fx:XMLList>
                            <product label="Product 1" data="3" />
                            <product label="Product 2" data="1" />
                            <product label="Product 3" data="4" />
                            <product label="Product 4" data="1" />
                            <product label="Product 5" data="5" />
                            <product label="Product 6" data="9" />
                        </fx:XMLList>
                    </s:source>
                </s:XMLListCollection>
            </mx:dataProvider>
        </mx:AdvancedDataGrid>

    </s:Application> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T07:35:17.167

为了放大/缩小矢量图形，您可以统一更改其`scaleX`和`scaleY`属性。Flash 的矢量渲染器会为您绘制正确的图片。为了放大位图而不是获得像素化输出，您必须将其转换为矢量图形对象，如下所示：

```
var sh:Shape=new Shape();
sh.graphics.beginBitmapFill(yourBitmap);
sh.graphics.lineStyle(0,0,0); // to not have border lines
sh.graphics.drawRect(0,0,yourBitmap.width,yourBitmap.height);
sh.graphics.endFill(); 
```

然后调整`scaleX`和`scaleY`那个形状会产生你想要的插值输出。

# jsp - 使用带有单个提交按钮的 iframe 提交多个表单

> ID：15157195
> 
> 赞同：1
> 
> 时间：2013-03-01T11:56:50.963
> 
> 标签：jsp, iframe

我正在使用 spring mvc 框架开发应用程序。我有一个要求，我应该能够从单个 jsp 页面提交多个表单。为此，我使用了多个 iframe，每个 iframe 将包含一个表单。现在的问题是如何只使用一个提交按钮一次提交位于不同 iframe（但相同的父 jsp 页面）中的所有表单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:19:35.177

I think the only way to accomplish what you want would be to use JavaScript to suck in all the various iFrame form data into one form and submit that. If you were going the other way (trying to post from the parent frame to the child), I think you can use the target attribute on the form element to determine which frame to load the results to.

# c++ - 是否可以在编译时检测到以下分配？

> ID：15157198
> 
> 赞同：2
> 
> 时间：2013-03-01T11:57:07.340
> 
> 标签：c++, templates, c++11

所以我有以下情况，为长示例道歉，但它应该正确编译：

```
#include <tuple>
#include <functional>
#include <iostream>

#include <boost/mpl/fold.hpp>
#include <boost/mpl/push_front.hpp>
#include <boost/mpl/vector.hpp>

namespace mpl = boost::mpl;

namespace aux
{
template <typename ...Args>
struct to_vector
{ };

template <typename T, typename ...Args>
struct to_vector<T, Args...>
{ typedef typename mpl::push_front<typename to_vector<Args...>::type, T>::type type; };

template <typename T>
struct to_vector<T>
{ typedef typename mpl::vector<T> type; };

template <>
struct to_vector<>
{ typedef typename mpl::vector<> type; };

template <typename Dest, typename T>
struct tuple_adder
{
  typedef decltype(std::tuple_cat(std::declval<Dest>(), std::make_tuple(std::declval<T>()))) type;
};

}

struct foo
{
  struct storage
  { };

  template <typename T>
  struct placeholder : storage
  {
    placeholder(T&& t) : content(t)
    { }

    T content;
  };

  storage* data;

  template <typename ...Args>
  foo(Args&&... args)
  : data()
  {
    typedef typename mpl::fold<
      typename aux::to_vector<Args...>::type,
      std::tuple<>,
      aux::tuple_adder<mpl::_1, mpl::_2>
    >::type tuple_type;
    // Instantiate the tuple
    data = new placeholder<tuple_type>(std::make_tuple(std::forward<Args>(args)...));
  }

  template <typename ...Args>
  void set(Args&&... args)
  {
    typedef typename mpl::fold<
      typename aux::to_vector<Args...>::type,
      std::tuple<>,
      aux::tuple_adder<mpl::_1, mpl::_2>
    >::type tuple_type;

    auto tp = static_cast<placeholder<tuple_type>*>(data);
    *tp = std::make_tuple(std::forward<Args>(args)...);
  }
};

int main()
{
  foo f(1, 2., std::string("Hello"));

  f.set(4, 3., std::string("Bar"));

  f.set(3., std::string("Bar"), 3.);
} 
```

这个想法很简单，`foo`利用类型擦除来存储`tuple`通过构造函数构造的 a。那么限制应该`set`是只有在从可变参数列表生成的与持有的元组匹配的情况下才允许`tuple`（不幸的是，它的类型已被删除。）

现在我可以在运行时使用 来检测这一点`typeid()`，但是，我想知道是否有一种方法可以在编译时进行相同的检测。唯一的限制是`foo`不能被模板化，并且`variant`因为我想允许`foo`在必要时使用字段构造（所有在编译时指定......）

我担心答案是这是不可能的（由于类型擦除），但是我希望有一些想法来实现这个功能......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T12:00:04.680

编译时类型系统的要点在于它限制了对类型值的允许操作。如果两个对象是同一类型，则它们承认相同的允许操作。

所以不，编译器无法知道你想要允许什么，因为你已经消除了区别。

# jquery - 单击不会触发写入外部 jQuery 文件的事件

> ID：15157202
> 
> 赞同：1
> 
> 时间：2013-03-01T11:57:20.010
> 
> 标签：jquery

html文件：

```
<html>
    <head>
    </head>  
    <body>
        <script src="jquery.min.js"></script>
        <script src="popup.js"></script>
        <div id="clickem">click me</div>
    </body>
</html> 
```

popup.js：

```
$("#clickem").click(function() {
    alert("I was clicked.");
}); 
```

嗯...所以当我这样做时，什么都没有发生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T11:58:23.447

```
$(document).ready(function(){
 $("#clickem").click(function() {
     alert("I was clicked.");
 });
}); 
```

将您的代码包装在`document.ready`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T11:58:35.553

使用 DOM 就绪事件：

```
$(function(){
    $("#clickem").click(function() {
        alert("I was clicked.");
    });
}); 
```

`<div id="clickem">click me</div>`查询 DOM 时尚未呈现。
当您向 jQuery“构造函数”发送一个函数时，它将在 DOM 准备好时执行它。

`$( function() { });`相当于`$(document).ready( function() { });`。
所以，两者都可以使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T12:03:17.577

绑定单击事件时，#clickem 不存在于 DOM 中。用于`.on()`将事件绑定到其中的任何`current or future`元素`document`。在这种情况下，您不需要使用`$(document).ready()`.

**popup.js**

```
var onClickEm = function() {
    alert("I was clicked.");
};

$(document).on('click', '#clickem', onClickEm); 
```

另一种选择是推迟加载 javascript 文件。

```
<html>
    <head>
    </head>  
    <body>
        <script src="jquery.min.js"></script>
        <script src="popup.js" defer></script>
        <div id="clickem">click me</div>
    </body>
</html> 
```

`Defer`, 如果存在，则指定在页面完成解析时执行脚本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T11:59:32.200

> 什么都没有发生

因为在 DOM 元素准备好之前调用了 click 事件。因此它将无法找到带有 id 的元素`clickem`。在准备好的函数中调用你的脚本

```
$(function(){
   $("#clickem").click(function() {
     alert("I was clicked.");
   });
}); 
```

这将在 DOM 准备好后调用您的脚本，以便单击事件现在能够找到该元素并因此向它发出警报..

总是建议您在准备好的函数中编写脚本...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T11:59:49.320

您需要对准备好的文档设置操作

```
$(document).ready(function(){
 $("#clickem").click(function() {
    alert("I was clicked.");
 });
}) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-01T12:00:09.040

这很可能是因为您的`popup.js`文件在 DOM 完成加载元素之前正在运行。

因此，选择器的单击事件处理程序`#clickem`不会找到任何项目。

通过将事件处理程序包装在[`$(document).ready()`](http://api.jquery.com/ready/)函数中，这将确保 DOM 已完成加载：

```
$(document).ready(function(){
   $("#clickem").click(function() {
       alert("I was clicked.");
   });
}); 
```

***现场演示：http:** [//jsfiddle.net/XfFu8/](http://jsfiddle.net/XfFu8/)*

# asp.net-mvc-3 - 不确定 Directory.CreateDirectory() 是如何工作的

> ID：15157203
> 
> 赞同：0
> 
> 时间：2013-03-01T11:57:24.157
> 
> 标签：asp.net-mvc-3

我的控制器中有这段代码：

```
public ActionResult Upload(ScormUploadViewModel model)
{
  if (ModelState.IsValid)
  {
    if (model.ScormPackageFile != null)
    {
      string zipCurFile = model.ScormPackageFile.FileName;
      string destinationDirectoryName = Path.GetFullPath(zipCurFile);
      //.GetFileNameWithoutExtension(zipCurFile);
      Directory.CreateDirectory(destinationDirectoryName);
    }
   }
 } 
```

我通过视图上传了一个 zip 文件，然后需要将其解压缩到与 zipfilename 同名的文件夹中的相同位置

文件是：C:\TFSPreview\Zinc\Web\Project\ScormPackages\Windows 8 Training SkyDrive - Spanish.zip

我需要在 C:\TFSPreview\Zinc\Web\Project\ScormPackages\ 中创建一个文件夹，名称为：Windows 8 Training SkyDrive - Spanish

因此有：C:\TFSPreview\Zinc\Web\Project\ScormPackages\Windows 8 Training SkyDrive - Spanish\

并在此文件夹中解压缩 C:\TFSPreview\Zinc\Web\Project\ScormPackages\Windows 8 Training SkyDrive - Spanish.zip 中包含的所有文件

所以我的问题是： CreateDirectory() 会在 C:\TFSPreview\Zinc\Web\Project\ScormPackages\ 中创建文件夹 Windows 8 Training SkyDrive - Spanish 还是会尝试在 c:? 中创建文件夹？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T12:00:51.873

它会在里面创建目录`C:\TFSPreview\Zinc\Web\Project\ScormPackages\`。[事实上](http://msdn.microsoft.com/en-us/library/54a0at6s.aspx)，如果它们不存在，它将创建该路径中的*所有目录：*

> 除非它们已经存在或路径的某些部分无效，否则会创建路径中指定的任何和所有目录。path 参数指定目录路径，而不是文件路径。如果目录已存在，则此方法不会创建新目录，但会返回现有目录的 DirectoryInfo 对象。

但是，此代码有一个错误：`destinationDirectoryName`不是目录的路径，而是目标目录中*文件的路径。*所以你应该做的是

```
// zipCurFile = C:\...\ScormPackages\Windows 8 Training SkyDrive - Spanish.zip
// Path.GetDirectoryName gives "C:\...\ScormPackages"
// Path.GetFileName gives "Windows 8 Training SkyDrive - Spanish"
// Path.Combine on these two gives you the correct target

Directory.CreateDirectory(
    Path.Combine(
        Path.GetDirectoryName(zipCurFile), Path.GetFileName(zipCurFile)); 
```

# nginx - 在 Nginx 服务器上使用 init_get() 从 php 脚本中读取 PHP_VALUE 总是返回 php.ini 默认值

> ID：15157206
> 
> 赞同：1
> 
> 时间：2013-03-01T11:57:27.330
> 
> 标签：nginx, overriding, php

我知道，这不是与编程问题直接相关的问题，但我理解它与**程序员常用的规则软件工具**相匹配，因为我的开发环境依赖于这个工作软件。我在 Nginx 论坛的 Nginx Wiki 中找不到任何有用的信息，所以我希望在这个专业的平台上找到答案。由于这里还有许多其他与 Nginx 相关的问题，我想，这可能不是一个离题的问题。我来自 Apache 背景，正在尝试将我的服务器迁移到 Nginx。在我网站的配置文件中，我定义了一些 fastcgi 值来覆盖 php.ini 文件，我想保持不变，如下所示：

```
fastcgi_param PHP_VALUE "post_max_size = 15M";
fastcgi_param PHP_VALUE "upload_max_filesize = 5M"; 
```

还有几个。现在我想知道，我怎样才能从我的 PHP 脚本中得到它们。与 Apache 一样，使用 ini_get() 不起作用，或者返回 php.ini 默认值。我在 Nginx 文档和网络上搜索了答案，但找不到答案。

有人会告诉我，如何实现这一点，好吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T16:14:00.293

要在 nginx 上声明多个 php_value，您应该将这些值组合在一个`fastcgi_param PHP_VALUE`指令中，如下所示。否则，只有最后一个被传递给 php-fpm 进程。

```
location ~ \.php$ {
    [...]
    fastcgi_param PHP_VALUE "
        post_max_size=15M
        upload_max_filesize=5M
        ";
    [...]
} 
```

我相信这就是为什么你会看到默认值或在 php.ini 中设置的值，如果你尝试过的话`ini_get("post_max_size")`。

# html - z-index 固定 IE7

> ID：15157211
> 
> 赞同：0
> 
> 时间：2013-03-01T11:57:41.350
> 
> 标签：html, css, position, z-index

我在 IE7 中遇到了全尺寸背景的问题。这是CSS代码：

```
#passepartout {
  height:100%;
  position:relative;
  display:block;
}
#supersize {
  top:0;
  left:0;
  position:fixed;
  z-index: -1;
}
#supersize img,
#supersize a {
  width:100%;
  height:100%;
  display:none;
}
#supersize .activeslide,
#supersize .activeslide img {
  display:inline;
} 
```

我也使用 MooTools 脚本设置背景全尺寸：[MooSizer](http://mtness.net/demos/moosizer/)。但在 IE7 中，背景位于其他内容的前面。

有人知道解决方案吗？

# mysql - 如何从 restfb 获取 utf8 编码的文本

> ID：15157214
> 
> 赞同：0
> 
> 时间：2013-03-01T11:57:49.200
> 
> 标签：mysql, encoding, utf-8, multilingual, restfb

我正在尝试使用 RestFB 从 facebook 页面获取所有帖子和评论。一切正常，但是当我尝试获取具有特定字符的俄语页面时，将结果存储在 mysql 中，每一行都有一些`?`，我知道编码不好。

所以：

我的表字符集编码是`utf8_general_ci`.

从 RestFB 我以这种方式从页面获取提要：

```
Connection<Post> pagePosts = facebookClient.fetchConnection(page+"/feed", Post.class,Parameter.with("message", "utf8")); 
```

但存储在 db 中的每条评论总是类似于：

```
Liels paldies Amerikas Tirdzniec?bas pal?tai un m?su burv?gajiem viesiem par br?niš??go pas?kumu! 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:18:53.420

我的问题是在`jdbc`连接..

以这种方式解决：

```
jdbc:mysql://server/database?characterEncoding=UTF-8&useUnicode=true 
```

# c# - 内联 If 语句 - 短路

> ID：15157215
> 
> 赞同：5
> 
> 时间：2013-03-01T11:57:57.673
> 
> 标签：c#, if-statement, inline, short-circuiting

据我了解和阅读，您可以在 if 语句（&& 或 ||）中使用短路，以使第二个条件不触发。如果您希望这两个条件都触发，您将使用单个操作数（& 或 |）。

所以说我是否有如下的内联 if 语句：

```
var test = (MyObject != null || string.IsNullOrEmpty(MyObject.Property)) ? string.Empty : MyObject.Property; 
```

如果 MyObject 为空，这将引发`object reference`错误，我认为这不应该，因为我正在使用短路。有人可以解释一下吗。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-01T11:58:56.623

你使用了错误的条件。这部分：

```
MyObject != null || string.IsNullOrEmpty(MyObject.Property) 
```

应该：

```
MyObject == null || string.IsNullOrEmpty(MyObject.Property) 
```

an 的 RHS`||`仅在左手为*false*时执行。您希望它仅在*不*`MyObject`为空时执行。

 *编辑：如果你真的想要这个`MyObject != null`部分，你可以将整个事情更改为：

```
var test = MyObject != null && !string.IsNullOrEmpty(MyObject.Property)
       ? MyObject.Property : ""; 
```

不过，请注意条件运算符的第二个和第三个操作数的反转。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T11:59:47.920

你应该有一个 == 而不是一个 !=

```
var test = (MyObject == null || string.IsNullOrEmpty(MyObject.Property) ? string.Empty : MyObject.Property 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T11:59:54.230

试试这个：

```
var test = (MyObject == null || string.IsNullOrEmpty(MyObject.Property)
             ? string.Empty : MyObject.Property 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-01T12:00:08.430

```
MyObject != null || string.IsNullOrEmpty(MyObject.Property) 
```

你在这里说。

如果我的对象不为空。或 string.IsNullOrEmpty(MyObject.Property)

这意味着如果 MyObject 为空，他将尝试执行第二部分。

```
MyObject == null || string.IsNullOrEmpty(MyObject.Property) 
```

这不会抛出空异常

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-01T12:00:10.673

发生这种情况是因为`MyObject`是`null`，因此第一个条件是，`false`因此必须评估第二部分以了解整个条件。将行更改为：

```
MyObject != null && string.IsNullOrEmpty(MyObject.Property) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-01T12:08:17.110

您应该更喜欢可读性而不是行数，例如：

```
string prop = string.Empty;
if(MyObject != null && MyObject.Property != null)
    prop = MyObject.Property; 
```

（您的例外原因已经在其他答案中解释过）*

# mysql - MySQL varchar 索引长度

> ID：15157227
> 
> 赞同：39
> 
> 时间：2013-03-01T11:58:40.870
> 
> 标签：mysql, indexing, varchar

我有一张这样的桌子：

```
CREATE TABLE `products` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(512) NOT NULL,
  `description` text,
  PRIMARY KEY (`id`),
) ENGINE=InnoDB AUTO_INCREMENT=38 DEFAULT CHARSET=utf8; 
```

和一个这样的：

```
CREATE TABLE `product_variants` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `product_id` int(11) unsigned NOT NULL,
  `product_code` varchar(255) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `product_code` (`product_code`),
  KEY `product_variant_product_fk` (`product_id`),
  CONSTRAINT `product_variant_product_fk` FOREIGN KEY (`product_id`) REFERENCES `products` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1037 DEFAULT CHARSET=utf8; 
```

和这样的 SQL 语句

```
SELECT p.id AS id, p.name AS name, p.description AS description, pv.id AS product_variant_id, pv.product_code AS product_code
FROM products p
INNER JOIN product_variants pv ON pv.product_id = p.id
ORDER BY p.name ASC
LIMIT 300 OFFSET 0; 
```

如果我解释给我这个：

```
+----+-------------+-------+------+----------------------------+----------------------------+---------+---------+--------+----------------+
| id | select_type | table | type | possible_keys              | key                        | key_len | ref     | rows   | Extra          |
+----+-------------+-------+------+----------------------------+----------------------------+---------+---------+--------+----------------+
|  1 | SIMPLE      | p     | ALL  | PRIMARY                    | NULL                       | NULL    | NULL    | 993658 | Using filesort |
|  1 | SIMPLE      | pv    | ref  | product_variant_product_fk | product_variant_product_fk | 4       | db.p.id |      1 |                |
+----+-------------+-------+------+----------------------------+----------------------------+---------+---------+--------+----------------+
2 rows in set (0.00 sec) 
```

对于一百万行，这非常慢。我尝试在 products.name 上添加索引：

```
ALTER TABLE products ADD INDEX `product_name_idx` (name(512)); 
```

这给出了这个：

```
mysql> show indexes from products;
+----------+------------+------------------+--------------+-----------------+-----------+-------------+----------+--------+------+------------+---------+---------------+
| Table    | Non_unique | Key_name         | Seq_in_index | Column_name     | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment | Index_comment |
+----------+------------+------------------+--------------+-----------------+-----------+-------------+----------+--------+------+------------+---------+---------------+
| products |          0 | PRIMARY          |            1 | id              | A         |      993658 |     NULL | NULL   |      | BTREE      |         |               |
| products |          1 | product_manf_fk  |            1 | manufacturer_id | A         |          18 |     NULL | NULL   | YES  | BTREE      |         |               |
| products |          1 | product_name_idx |            1 | name            | A         |         201 |      255 | NULL   |      | BTREE      |         |               |
+----------+------------+------------------+--------------+-----------------+-----------+-------------+----------+--------+------+------------+---------+---------------+
3 rows in set (0.00 sec) 
```

我认为 Sub_part 列显示了索引中的前缀（以字节为单位），如[本页](http://dev.mysql.com/doc/refman/5.5/en/show-index.html)所述。

当我重新解释查询时，我得到：

```
+----+-------------+-------+------+----------------------------+----------------------------+---------+---------+--------+----------------+
| id | select_type | table | type | possible_keys              | key                        | key_len | ref     | rows   | Extra          |
+----+-------------+-------+------+----------------------------+----------------------------+---------+---------+--------+----------------+
|  1 | SIMPLE      | p     | ALL  | PRIMARY                    | NULL                       | NULL    | NULL    | 993658 | Using filesort |
|  1 | SIMPLE      | pv    | ref  | product_variant_product_fk | product_variant_product_fk | 4       | db.p.id |      1 |                |
+----+-------------+-------+------+----------------------------+----------------------------+---------+---------+--------+----------------+
2 rows in set (0.00 sec) 
```

看起来新索引没有被使用。如 [本页](http://dev.mysql.com/doc/refman/5.5/en/order-by-optimization.html)所述，如果索引是前缀索引，则不会使用索引进行排序。事实上，如果我截断数据：

```
alter table products modify `name`  varchar(255) not null; 
```

解释给出：

```
+----+-------------+-------+-------+----------------------------+----------------------------+---------+----------------------------------------------+------+-------+
| id | select_type | table | type  | possible_keys              | key                        | key_len | ref                                          | rows | Extra |
+----+-------------+-------+-------+----------------------------+----------------------------+---------+----------------------------------------------+------+-------+
|  1 | SIMPLE      | p     | index | PRIMARY                    | product_name_idx           | 767     | NULL                                         |  300 |       |
|  1 | SIMPLE      | pv    | ref   | product_variant_product_fk | product_variant_product_fk | 4       | oh_2c98c233_69fe_4f06_ad0d_fe6f85a5beac.p.id |    1 |       |
+----+-------------+-------+-------+----------------------------+----------------------------+---------+----------------------------------------------+------+-------+ 
```

我认为支持这一点。但是，它在[此页面上](http://dev.mysql.com/doc/refman/5.5/en/create-index.html)说 InnoDB 表最多可以有 767 字节的索引。如果长度以字节为单位，为什么它拒绝超过 255？如果是字符，它如何决定每个 UTF-8 字符的长度？只是假设3？

另外，我正在使用这个版本的 MySQL：

```
mysql> select version();
+------------+
| version()  |
+------------+
| 5.5.27-log |
+------------+
1 row in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-05-10T02:02:41.330

2021 年 9 月编辑：我已经使用 MySQL 8.0 几年了，所以这里有一些更新的信息。

MySQL 手册现在有[一个](https://dev.mysql.com/doc/refman/8.0/en/charset-unicode-conversion.html)关于`utf8mb3`（目前也称为`utf8`）和`utf8mb4`. `utf8mb3` [已弃用，](https://dev.mysql.com/doc/refman/8.0/en/charset-unicode-utf8mb3.html)最终将被删除；并且当它被删除时，它的当前别名 ,`utf8`将`utf8mb4`改为引用。

使用 deprecated`utf8mb3`时，您可以在索引中存储最多 255 个字符，而使用或行格式`utf8mb4`时，最多可以存储 191个字符。`COMPACT``REDUNDANT`

使用`COMPRESSED`or`DYNAMIC`行格式，索引键前缀最多可以是 3072 字节。使用它们，您最多可以为 1024 个字符`utf8mb3`和 768 个字符建立索引`utf8mb4`。

*下面是我之前的回答，它解释了您可以索引的字符*数与*字节*数背后的一些逻辑。

* * *

由于我的研究，我必须修改我的答案。我最初发布了这个（引用自己）：

> 我相信答案是您无法知道索引中有多少个字符，因为您无法知道您的字符将有多少字节（除非您采取措施排除多字节字符）。

我不确定，但它可能仍然是正确的，但不是我想的那样。

以下是正确答案：

**MySQL 假设每个 utf8 字符 3 个字节。255 个字符是您可以为每列指定的最大索引大小，因为 256x3=768，这打破了 767 字节的限制。**

如果您不指定索引大小，MySQL 会选择最大大小（即每列 255）。UNIQUE 约束不能放在长度大于 255 的 utf8 列上，因为唯一索引必须包含整个单元格值。但是可以使用常规索引 - 它只会索引前 255 个字符（或前 767 个字节？）。这就是对我来说仍然有些神秘的地方。

The MySTERY：我可以理解为什么 MySQL 假设每个字符 3 个字节，为了安全，否则 UNIQUE 约束可能会被破坏。但是文档似乎暗示索引实际上是以字节为单位的，而不是字符。因此，假设您在 varchar(25 **6** ) 列上放置了一个 25 **5** char（765 字节）索引。如果您存储的字符都是 ASCII、1 字节字符，如 AZ、az、0-9，那么您可以将整个列放入 767 字节索引中。看起来这就是实际发生的事情。

 **以下是我原始答案中有关字符、字节等的更多信息。

* * *

根据[wikipedia](http://en.wikipedia.org/wiki/UTF-8)，UTF-8 字符的长度可以是 1、2、3 或 4 个字节。但是，根据[这个 mysql 文档](http://dev.mysql.com/doc/refman/5.5/en/innodb-restrictions.html)，最大字符大小为 3 个字节，因此任何超过 255 个字符的列索引索引都可能达到该字节限制。但据我了解，可能不会。如果您的大部分字符都在 ASCII 范围内，那么您的平均字符大小将接近 1 个字节。例如，如果您的平均字符大小为 1.3 字节（大部分为 1 字节，但有大量 2-3 字节字符），那么您可以指定索引为 767/1.3

因此，如果您主要存储 1 字节字符，您的实际字符限制将更像：767 / 1.3 = 590。但事实证明这不是它的工作方式。255 个字符是限制。

如[本 MySQL 文档](http://dev.mysql.com/doc/refman/5.5/en/create-index.html)中所述，

> 前缀限制以字节为单位，而 CREATE INDEX 语句中的前缀长度被解释为非二进制数据类型（CHAR、VARCHAR、TEXT）的字符数。在为使用多字节字符集的列指定前缀长度时，请考虑到这一点。

似乎 MySQL 建议人们像我刚刚所做的那样进行计算/猜测，以确定您的 varchar 列的密钥大小。但实际上您*不能*为 utf8 列指定大于 255 的索引。

最后，如果你再次参考我的第二个链接，还有这个：

> 当启用 innodb_large_prefix 配置选项时，对于使用 DYNAMIC 和 COMPRESSED 行格式的 InnoDB 表，此长度限制会提高到 3072 字节。

因此，如果您愿意，似乎可以通过一些调整获得更大的索引。只需确保行格式是动态的或压缩的。在这种情况下，您可能可以指定 1023 或 1024 个字符的索引。

* * *

顺便说一句，事实证明您可以使用 [utf8mb4 字符集][4] 存储 4 字节字符。utf8 字符集显然只存储 ["plane 0" characters][5]。

编辑：

我只是尝试在带有 tinyint(1) 列的 varchar(511) 列上创建复合索引，并收到错误消息，指出最大索引大小为 767 字节。这让我相信 MySQL 假设 utf8 字符集列将包含每个字符 3 个字节（最大值），并允许您最多使用 255 个字符。但也许这仅适用于复合索引。当我发现更多时，我会更新我的答案。但现在我将其保留为编辑。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-15T06:38:19.700

InnoDB 表的限制

**警告**

不要将 mysql 数据库中的 MySQL 系统表从 MyISAM 转换为 InnoDB 表。这是不受支持的操作。如果这样做，MySQL 不会重新启动，直到您从备份中恢复旧系统表或使用 mysql_install_db 程序重新生成它们。

**警告**

将 InnoDB 配置为使用 NFS 卷上的数据文件或日志文件不是一个好主意。否则，这些文件可能会被其他进程锁定，从而无法供 MySQL 使用。

**最大值和最小值**

1.  一个表最多可以包含 1000 列。
2.  一个表最多可以包含 64 个二级索引。
3.  默认情况下，单列索引的索引键最长可达 767 字节。相同的长度限制适用于任何索引键前缀。例如，您可能会在 TEXT 或 VARCHAR 列上的列前缀索引超过 255 个字符时达到此限制，假设是 UTF-8 字符集并且每个字符最多 3 个字节。当启用 innodb_large_prefix 配置选项时，对于使用 DYNAMIC 和 COMPRESSED 行格式的 InnoDB 表，此长度限制会提高到 3072 字节。
4.  如果您指定的索引前缀长度大于允许的最大值，则长度会静默减少到最大长度。在 MySQL 5.6 及更高版本中，指定大于最大长度的索引前缀长度会产生错误。

启用 innodb_large_prefix 时，尝试为 REDUNDANT 或 COMPACT 表创建键长度大于 3072 的索引前缀会导致 ER_INDEX_COLUMN_TOO_LONG 错误。

InnoDB 内部最大密钥长度为 3500 字节，但 MySQL 本身将其限制为 3072 字节。此限制适用于多列索引中组合索引键的长度。

除可变长度列（VARBINARY、VARCHAR、BLOB 和 TEXT）外，最大行长度略小于数据库页面的一半。也就是说，最大行长度约为 8000 字节。LONGBLOB 和 LONGTEXT 列必须小于 4GB，总行长（包括 BLOB 和 TEXT 列）必须小于 4GB。

参考： [InnoDB 限制](https://dev.mysql.com/doc/refman/5.5/en/innodb-restrictions.html "InnoDB 限制")**

# c# - 如何告诉 Ninject 不要注入我的构造函数参数之一？

> ID：15157229
> 
> 赞同：3
> 
> 时间：2013-03-01T11:58:44.977
> 
> 标签：c#, asp.net-mvc-4, ninject

如果我有以下情况：

```
public MyClass(IServiceOne serviceOne, IServiceTwo serviceTwo, IServiceThree serviceThree = null)
{
  this.serviceOne = serviceOne;
  this.serviceTwo = serviceTwo;
  this.serviceThree = serviceThree ?? new ServiceThree("some-info");
} 
```

如何告诉 Ninject 绑定前两个参数，而不是 IServiceThree 类型的参数？这甚至可能吗？

我希望 serviceThree 作为构造函数参数的原因是为了可测试性 - 我需要能够从我的测试中注入一个模拟。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T12:07:07.340

如果您不打算使用构造函数注入，那么您不妨将其从构造函数参数列表中删除，并按照您的操作方式手动初始化它。换句话说，只需传递两个参数而不是三个。

更新：你可以做的是注入`null`价值。据我记得，您必须执行以下操作：

```
_kernel.Settings.AllowNullInjection = true; 
```

然后，您可以删除第三个参数的绑定（如果存在）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-06T20:05:07.117

为了可测试性，您需要模拟您希望表现为 null 的接口（在调用其方法时什么也不做）并作为构造函数参数传递。

您的做法是错误的，您将测试代码依赖项添加到生产代码中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-03T14:55:16.517

您可以通过如下配置绑定来避免`AllowNullInjection`全局设置，同时仅在绑定存在时才注入参数：

```
Kernel.Bind<IMyClass>()
      .To<MyClass>()
      .WithConstructorArgument(typeof(IServiceThree), c => c.Kernel.TryGet<IServiceThree>()); 
```

# java - 使用 ksop2 如何将大文件发送到 Web 服务

> ID：15157233
> 
> 赞同：6
> 
> 时间：2013-03-01T11:58:56.863
> 
> 标签：java, android, ksoap2, android-ksoap2

我有应用程序从我设备上的专用路径中选择文件并将其发送到服务器。

我正在使用 ksoap2 lib 调用 .NET webservice 将我的文件发送到服务器。我正在使用 Base 64 编码。

我可以发送最大大小为 1MB 的文件（不加密）和 850Kb 的加密文件。我使用的加密算法是 3DES。

如果我尝试发送大于上述大小的文件，我会收到以下错误：原因：org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:121) 处的 java.lang.OutOfMemoryError

我的测试环境：具有 API 级别 8、Android 2.2 和 SDCard 内存 512 MB 的 Android 模拟器

是我错过了什么吗？在这种情况下使用 BLOB 可以帮助我吗

有没有办法发送更大的文件？我听说过发送数据块，但对此一无所知。任何链接或示例代码都会有帮助。

使用以下代码获取文件数据：此处 url = 文件存储位置

`public byte[] getFileData( String vURL){ instream = new FileInputStream(vURL); size = (int) vURL.length();
fileContent = new byte[size]; instream.read(fileContent); }`

使用以下代码对数据进行编码：

```
byte[] res = Utilities.getFileData(file);
String mdata = android.util.Base64.encodeToString(res,                                android.util.Base64.DEFAULT); 
```

调用服务器端 Web 服务并将数据发送到服务器

```
SoapObject request = new SoapObject(nameSpace, methodName);

if (fileData != null && !fileData.equals("")) {
      request.addProperty("vBLOBData", fileData);
}
   SoapSerializationEnvelope envelope = getEnvelope(request);
   HttpTransportSE ht = new HttpTransportSE(url); // ,3000
   ht.debug = true;
   ht.call(soapAction, envelope);
  response = (envelope.getResponse()).toString(); 
```

无法发送超过 1 MB 的文件数据。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:22:04.803

我不知道您要达到什么目的，但是为什么不将文件分成几部分并将每个部分单独发送到一个循环中，或者`android background service`使用一个每 x 秒发送一个部分的计时器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:14:02.013

如果压缩没有帮助 - 如上一篇文章所述 - 您可能必须自己对消息进行分段。

[分割](https://stackoverflow.com/questions/3581243/read-a-segment-of-a-file-in-java-android)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T13:17:43.047

使用GZip Zipping算法从移动端压缩大文件；从服务器使用相同的解压缩。

另外使用 MultipartEntity 可以帮助上传大文件内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T02:59:46.217

尝试在发送之前将缓冲区设置为 1024，这与缓冲区大小和内存的限制有关

# oracle - 插入和删除比较的回滚时间

> ID：15157236
> 
> 赞同：1
> 
> 时间：2013-03-01T11:59:00.137
> 
> 标签：oracle, oracle11g, rdbms

关于 Oracle RDBMS，哪个回滚更快？

Rollback1 : 插入 1000000 条记录然后回滚

或者

Rollback2 : 删除 1000000 条记录然后回滚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:21:48.107

您可以使用以下方法找出查询完成的百分比：

```
SELECT SESSION_ID, percent_complete, estimated_completion_time
FROM SYS.DM_EXEC_REUQESTS 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-01T12:55:25.580

要回答这个问题，我们应该知道 Oracle 如何在内部处理插入和删除操作。我知道当你插入一些东西时，它会插入内存，然后当你提交时。Oracle 写入磁盘。

对于删除操作，我发现了这个：[http](http://www.dba-oracle.com/t_oracle_soft_logical_deletes.htm) ://www.dba-oracle.com/t_oracle_soft_logical_deletes.htm 所以它通常在逻辑上删除，并且在可能时它会实时删除。

现在我们应该谈谈回滚，当您回滚插入时，您会从内存中清除行并清除重做日志。听起来很简单。当您回滚删除时（如果 Oracle 实时删除了行），它应该去重做日志，读取，然后将删除的行插入回数据库。

因此，如果我是正确且合乎逻辑的，回滚删除操作应该比回滚插入花费更多时间。

此外，如果您使用条件删除，删除过程应该比单独插入需要更多时间。

*PS顺便谢谢你的问题，这很有趣，让我对Oracle内部进行了一些研究。*

# java - 无法在 Google Cloud Endpoints 的 Endpoint 类中创建多个方法

> ID：15157237
> 
> 赞同：2
> 
> 时间：2013-03-01T11:59:02.407
> 
> 标签：java, google-app-engine, google-cloud-endpoints

我一直在尝试在我生成的 Endpoint 类中创建一些新方法，但我发现了这种奇怪的行为：我可以向生成的类添加一个方法，但我不能添加其中两个，无论我添加两个中的哪一个。这是我生成的类的代码，我在其中为两个添加的方法添加了代码：

```
 package it.raffaele.bills;

import java.util.HashMap;
import java.util.LinkedList;
import java.util.List;

import javax.annotation.Nullable;
import javax.inject.Named;
import javax.jdo.PersistenceManager;
import javax.jdo.Query;
import javax.persistence.EntityExistsException;
import javax.persistence.EntityNotFoundException;

import com.google.api.server.spi.config.Api;
import com.google.api.server.spi.response.CollectionResponse;
import com.google.appengine.api.datastore.Cursor;
import com.google.appengine.datanucleus.query.JDOCursorHelper;

@Api(name = "utenteendpoint")
public class UtenteEndpoint {

    /**
     * This method lists all the entities inserted in datastore.
     * It uses HTTP GET method and paging support.
     *
     * @return A CollectionResponse class containing the list of all entities
     * persisted and a cursor to the next page.
     */
    @SuppressWarnings({ "unchecked", "unused" })
    public CollectionResponse<Utente> listUtente(
            @Nullable @Named("cursor") String cursorString,
            @Nullable @Named("limit") Integer limit) {

        PersistenceManager mgr = null;
        Cursor cursor = null;
        List<Utente> execute = null;

        try {
            mgr = getPersistenceManager();
            Query query = mgr.newQuery(Utente.class);
            if (cursorString != null && cursorString != "") {
                cursor = Cursor.fromWebSafeString(cursorString);
                HashMap<String, Object> extensionMap = new HashMap<String, Object>();
                extensionMap.put(JDOCursorHelper.CURSOR_EXTENSION, cursor);
                query.setExtensions(extensionMap);
            }

            if (limit != null) {
                query.setRange(0, limit);
            }

            execute = (List<Utente>) query.execute();
            cursor = JDOCursorHelper.getCursor(execute);
            if (cursor != null)
                cursorString = cursor.toWebSafeString();

            // Tight loop for fetching all entities from datastore and accomodate
            // for lazy fetch.
            for (Utente obj : execute)
                ;
        } finally {
            mgr.close();
        }

        return CollectionResponse.<Utente> builder().setItems(execute)
                .setNextPageToken(cursorString).build();
    }

    /**
     * This method gets the entity having primary key id. It uses HTTP GET method.
     *
     * @param id the primary key of the java bean.
     * @return The entity with primary key id.
     */
    public Utente getUtente(@Named("id") Long id) {
        PersistenceManager mgr = getPersistenceManager();
        Utente utente = null;
        try {
            utente = mgr.getObjectById(Utente.class, id);
        } finally {
            mgr.close();
        }
        return utente;
    }

    /**
     * This inserts a new entity into App Engine datastore. If the entity already
     * exists in the datastore, an exception is thrown.
     * It uses HTTP POST method.
     *
     * @param utente the entity to be inserted.
     * @return The inserted entity.
     */
    public Utente insertUtente(Utente utente) {
        PersistenceManager mgr = getPersistenceManager();
        try {
            if (containsUtente(utente)) {
                throw new EntityExistsException("Object already exists");
            }
            mgr.makePersistent(utente);
        } finally {
            mgr.close();
        }
        return utente;
    }

    /**
     * This method is used for updating an existing entity. If the entity does not
     * exist in the datastore, an exception is thrown.
     * It uses HTTP PUT method.
     *
     * @param utente the entity to be updated.
     * @return The updated entity.
     */
    public Utente updateUtente(Utente utente) {
        PersistenceManager mgr = getPersistenceManager();
        try {
            if (!containsUtente(utente)) {
                throw new EntityNotFoundException("Object does not exist");
            }
            mgr.makePersistent(utente);
        } finally {
            mgr.close();
        }
        return utente;
    }

    /**
     * This method removes the entity with primary key id.
     * It uses HTTP DELETE method.
     *
     * @param id the primary key of the entity to be deleted.
     * @return The deleted entity.
     */
    public Utente removeUtente(@Named("id") Long id) {
        PersistenceManager mgr = getPersistenceManager();
        Utente utente = null;
        try {
            utente = mgr.getObjectById(Utente.class, id);
            mgr.deletePersistent(utente);
        } finally {
            mgr.close();
        }
        return utente;
    }

/********************************ADDED CODE*********************************************/

     @SuppressWarnings({"cast", "unchecked"})
        public List<Bill> getUserBillsByTag(@Named("tag") String tag){
         PersistenceManager mgr = getPersistenceManager();
            Utente utente = null;
            List<Bill> list = new LinkedList<Bill>();
            try {
                Query q = mgr.newQuery(Utente.class);
                q.setFilter("nfcID == '" + tag +"'");
                List<Utente> utenti = (List<Utente>) q.execute();
                if (!utenti.isEmpty()){
                    for (Utente u : utenti){
                        list.addAll(u.getBollettini());
                        break;  //fake loop.
                    }

                }else{
                    //handle error

                }

            } finally {
                mgr.close();
            }
            return list;

        }

     @SuppressWarnings({"cast", "unchecked"})
    public List<Bill> getUserBills(@Named("id") Long id){
         Utente utente = getUtente(id);
         System.out.println(utente);
        List<Bill> list = utente.getBollettini();
        return list;
    }

/*******************************************************************************/       

    private boolean containsUtente(Utente utente) {
        PersistenceManager mgr = getPersistenceManager();
        boolean contains = true;
        try {
            mgr.getObjectById(Utente.class, utente.getId());
        } catch (javax.jdo.JDOObjectNotFoundException ex) {
            contains = false;
        } finally {
            mgr.close();
        }
        return contains;
    }

    private static PersistenceManager getPersistenceManager() {
        return PMF.get().getPersistenceManager();
    }

} 
```

你知道如何帮助我吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T21:15:26.600

您的方法具有相同的 api 描述 ( `path="utenteendpoint/{param}"`)。给其中一个不同的路径：

```
@ApiMethod(path="utenteendpoint/tag/{tag}/")
public List<Bill> getUserBillsByTag(@Named("tag") String tag) { ... }

@ApiMethod(path="utenteendpoint/user/{id}/")
public List<Bill> getUserBills(@Named("id") Long id) { ... } 
```

# php - Android：使用 SSL/HTTPS 与 PHP 连接到数据库并使用 POST/GET

> ID：15157238
> 
> 赞同：2
> 
> 时间：2013-03-01T11:59:06.417
> 
> 标签：php, android, mysql, ssl, https

我曾经使用 HTTP 连接到 mysql 的 php，现在我被要求使用 HTTPS，因为它更安全。但我尝试了太多方法，但无法让平板电脑发布或获取任何信息，我制作了一个自签名证书并添加到本地计算机受信任区域，所以我不会被问到它未验证我是否要继续，我尝试通过浏览器连接，它工作正常并打印了我需要的所有信息，但不是通过应用程序。我附上了我之前需要更改为 HTTPS 的 HTTP 代码。需要一些帮助来将此连接更改为 HTTPS。

```
 httpclient = new DefaultHttpClient();
    httppost = new HttpPost ("http://xx.xx.xx.xx/E-MENU/login.php");        
    username = etUser.getText().toString();
    password = etPass.getText().toString();
    password = md5(SHA1(password));

try{
    nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("username", username));
    nameValuePairs.add(new BasicNameValuePair("password", password));
    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
    response = httpclient.execute(httppost);

if(response.getStatusLine().getStatusCode() == 200){
    entity = response.getEntity();
        if (entity!= null){

InputStream instream = entity.getContent();
JSONObject jsonResponse = new JSONObject (convertStreamToString(instream)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:04:13.213

```
Log.e("body", body);
            HttpClient httpclient = getNewHttpClient();

            HttpPost httppost = new HttpPost("https://www.demo.com/login.php");

             nameValuePairs = new ArrayList<NameValuePair>();
nameValuePairs.add(new BasicNameValuePair("username", username));
nameValuePairs.add(new BasicNameValuePair("password", password));
httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

            httppost.setEntity(entity);
            response = httpclient.execute(httppost);;

            Log.e("response", response.getStatusLine().toString());
            String aaa = response.getStatusLine().toString();
            Toast.makeText(getApplicationContext(), "Content :"+ aaa, Toast.LENGTH_LONG).show();
            HttpEntity entity1 = response.getEntity();
            is = entity1.getContent();

                //Toast.makeText(getApplicationContext(), "Content :"+ (CharSequence) is, Toast.LENGTH_LONG).show();

        }catch(Exception e){
            Log.e("log_tag", "Error in http connection "+e.toString());
        }

public HttpClient getNewHttpClient() {
        try {
            KeyStore trustStore = KeyStore.getInstance(KeyStore
                    .getDefaultType());
            trustStore.load(null, null);

            SSLSocketFactory sf = new MySSLSocketFactory(trustStore);
            sf.setHostnameVerifier(SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);

            HttpParams params = new BasicHttpParams();
            HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);
            HttpProtocolParams.setContentCharset(params, HTTP.UTF_8);

            SchemeRegistry registry = new SchemeRegistry();
            registry.register(new Scheme("http", PlainSocketFactory
                    .getSocketFactory(), 80));
            registry.register(new Scheme("https", sf, 443));

            ClientConnectionManager ccm = new ThreadSafeClientConnManager(
                    params, registry);

            return new DefaultHttpClient(ccm, params);
        } catch (Exception e) {
            return new DefaultHttpClient();
        }
    } 
```

**MySSLSocketFactory.java**

```
public class MySSLSocketFactory extends SSLSocketFactory {
    SSLContext sslContext = SSLContext.getInstance("TLS");

    public MySSLSocketFactory(KeyStore truststore) throws NoSuchAlgorithmException, KeyManagementException, KeyStoreException, UnrecoverableKeyException {
        super(truststore);

        TrustManager tm = new X509TrustManager() {
            public void checkClientTrusted(X509Certificate[] chain, String authType) throws CertificateException {
            }

            public void checkServerTrusted(X509Certificate[] chain, String authType) throws CertificateException {
            }

            public X509Certificate[] getAcceptedIssuers() {
                return null;
            }
        };

        sslContext.init(null, new TrustManager[] { tm }, null);
    }

    @Override
    public Socket createSocket(Socket socket, String host, int port, boolean autoClose) throws IOException, UnknownHostException {
        return sslContext.getSocketFactory().createSocket(socket, host, port, autoClose);
    }

    @Override
    public Socket createSocket() throws IOException {
        return sslContext.getSocketFactory().createSocket();
    }
} 
```

**如果您在 4.0 以上工作，请在代码中添加此内容**

```
 StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
         StrictMode.setThreadPolicy(policy); 
```

# javascript - 如果禁用了javascript，jquery同位素的后备？

> ID：15157241
> 
> 赞同：5
> 
> 时间：2013-03-01T11:59:18.800
> 
> 标签：javascript, jquery, html, css, jquery-isotope

*如果禁用 JavaScript，是否有 jQuery 同位素的后备方案？*

假设如果我在那里使用 fitColumns 属性，如果 JavaScript 被禁用，是否会回退到该布局样式，就像你在 d [new myspace](http://new.myspace.com)中所拥有的那样。
出现在您的 myspace 主页上的初始帖子将被正确设置样式，但当您进一步滚动时不会加载其他帖子。
什么样的 CSS 结构或后备方法可以用于这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T08:53:35.353

如果 JavaScript 被禁用，并且如果你想保持元素的位置很好，就像 jQuery Isotope 正在做它的工作一样，那么你只能依赖 CSS。这意味着您必须按照您想要的顺序手动定位这些元素。

如果您对此感到满意，请按照以下步骤开始：

1.  将类名放在 Isotope 元素的主包装上，例如`off`. 例如： `<div id="isotope-container" class="isotope off">`
2.  开始手动定位您的元素，并将`.off`其作为选择器之一。例如： `.isotope.off .isotope-element-1 { position:absolute; top: 10px; left: 10px; }` `.isotope.off .isotope-element-2 { position:absolute; top: 10px; left: 100px; }`
3.  然后在您写有所有其他内容的通用 jquery 文件上，检查`.off`类是否存在，如果存在，请将其删除。例如：`if($('#isotope-container.isotope').hasClass('off')){ $('#isotope-container.isotope').removeClass('off'); }`

# android - Phonegap - 本地存储不工作 - Android

> ID：15157245
> 
> 赞同：5
> 
> 时间：2013-03-01T11:59:39.870
> 
> 标签：android, cordova, local-storage

我正在使用本地存储在页面之间传递值以创建滚动效果（用户单击链接并根据 ID 滚动到页面的特定部分）

我以前使用 cookie，但似乎在 Android 上不起作用，我读到支持本地存储，所以切换到那个。它在浏览器中工作得很好，但是一旦它被打包为本机应用程序，我就失去了所有功能？API声明应该支持它，有什么想法吗？

这是我的代码：

基本网址：

```
var storage = window.localStorage;
$("a.scroll_link").click(function(event) {
    event.preventDefault();
    var value = $(this).attr("id");

        storage.setItem("key",value);

    console.log(value);

    window.location=$(this).attr("href");
}); 
```

接收网址：

```
$(function () { 

var value = window.localStorage.getItem("key");

if (value != "" && value != "undefined" && value != null) {
    var storage = window.localStorage;
    storage.setItem("key",value);
    var scroll_type = "";

    if ($.browser.webkit) {
        scroll_type = "body";
    } else {
        scroll_type = "html";
    }

    $(scroll_type)
        .stop()
        .animate({
        //get top-position of target-element and set it as scroll target
        scrollTop: ($("#" + value).offset().top - 25)
        //scrolldelay: 1.5 seconds
    }, {
        duration: 1500,
        complete: function () {
            storage.removeItem("key");
        },
    });
  }
}); 
```

该代码在浏览器中运行良好，只是不是本机，有什么想法吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T13:30:33.553

使用 document.addEventListener("deviceready", onDeviceReady, false) 而不是 $(function(){...}

[http://docs.phonegap.com/en/2.5.0/cordova_events_events.md.html#deviceready](http://docs.phonegap.com/en/2.5.0/cordova_events_events.md.html#deviceready)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-27T09:07:17.323

我想补充一点，cordova.js 的 2.6.0 版本存在一个错误，导致 localStorage 无法在 Android 上运行：

[https://issues.apache.org/jira/browse/CB-3063](https://issues.apache.org/jira/browse/CB-3063)

在 2.5.0 版本上它可以完美运行，并且已经在 2.7.0 rc 上修复。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T00:58:45.777

1.很高兴知道你解决了你的第一个问题。正如 gmh04 所说，我认为您应该将 init 事件替换为“deviceready”，该事件在应用程序开始运行时触发。

2.你的意思是window.localStorage.getItem("key")在接收URL中返回null？我没有遇到你描述的问题。但是，您可以尝试将接收 url 的代码移动到基本 url 的同一页面。我已经尝试了很多次，并且非常确定 localStorage 将在同一页面中工作。

# actionscript-3 - 有谁知道为什么我的对象池在我处理对象后无法工作？

> ID：15157246
> 
> 赞同：0
> 
> 时间：2013-03-01T11:59:41.217
> 
> 标签：actionscript-3, flash, pool

在尝试优化我的游戏后，我从明显的对象池开始。我使用 max_growth 等跟随更复杂的一个，然后继续一个简单的，但我一直遇到同样的问题。现在经过 40 多个小时的在线搜索并向一位比我了解更多关于 flash 的朋友寻求帮助后，我已经放弃并决定来这里。下面的代码包括一些 # 仅供参考，我已经在我的评论中留下了我尝试过但也没有奏效的东西。

我的 Cpool 课

```
package  {
    import flash.display.DisplayObject;

    public class CPool 
    {
        public var counter:int;
        private var pool:Array;

        //public function CPool(type:class, len:int)
        public function CPool()
        {
            pool = new Array();
            counter = 10;
            //counter=len;

            //var i:int=len;
            var i:int = 10;
            while (--i > -1)
                //pool[i] = new type();
                pool[i] = new Condor();
        };

        public function getCondor():Condor
        {
            trace(counter);
            //trace (pool.length);
            if (counter > 0)
            {
                return pool[--counter];
             }
             else
             {
                 var cde = new Condor();
                 return cde;
              }
        };

        public function disposeCondor(disposedCondor:Condor):void {

            pool[counter++] = disposedCondor;
    //pool.unshift(disposedCondor);     #10
         };
    }
} 
```

你可以看到这是一个简单的，只使用 get 和 dispose。我在下面的逻辑类中的代码指的是池。

```
public var cpool:CPool;

cpool = new CPool();   //(in the constructor)

else if (whichBird ==12)
{
    bird = cpool.getCondor() as Condor;
}  //  (in the addBird section)

private function checkBirdsOnScreen():void 
{
    for (var i:int = 0; i < birdArray.length; i++)
    {
        var dg = birdArray[i];
        if (birdArray[i].x < -100 )
        {
            dg.parent.removeChild(dg);
            birdArray.splice(i, 1);
            //hc.destroyCondor();                #9
            //tr cpool.disposeCondor(dg);        #1
            //birdArray[i].destroyCondor();     #2
        }
    }
} 
```

最后是我在秃鹰类中的破坏鸟功能

```
public function destroyCondor():void
{
    //removeChild(oldCondor);  #5           
    //ConPool.disposeCondor(oldCondor); #4
    //this.x=390 #3
//ConPool.disposeCondor(this);
    parent.removeChild(this); //remove object from stage
    removeEventListener(Event.ENTER_FRAME, CondorLoop); 
} 
```

正如你所看到的，我已经尝试了所有我能想到的方法来让它发挥作用。代码从池中的 10 只秃鹰开始，当它们离开屏幕时，它们会离开，池中的跟踪计数器显示池正在下降，当它变为 0 时，它会创建新的秃鹰。现在这种方式可以使用，或者当我使用 destroyCondor 时，除非我删除一些评论。当我在 dispose condor 中删除 //tr 然后它适用于前 2 个 condor，计数器变为 9，然后是 9，然后是 10 并保持在 10，问题是它不再在屏幕上显示，没有错误但它停止工作。顺便说一句，我也尝试过跟踪（pool.length），但我一直在下降 10 秒。

我也试过 #1 和 2 没有效果。我最接近的是#10，池中的 unshift 语句。这实际上看起来很有效，计数器下降到 9，当它们离开屏幕时又回到 10，就像将它们放回池中一样，但是当 10 过去时，它们就完全停止了，甚至绕过了新的 condor 语句。正如您从评论中看到的那样，我真的已经尝试了所有我能想到的东西，甚至从更高级的池化到这个简化版本，但仍然一无所获。现在超过 40 小时，熬夜到凌晨 4 点，因为我对无法解决这个问题感到非常沮丧，我什至还没有完成位图缓存。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:42:51.703

如果您需要在遍历数组时更改数组，请执行向后遍历。

```
for (var i:int=birdArray.length-1;i>=0;i--) {...} 
```

这消除了空指针问题、丢失元素（如果您也遇到这种情况）和临时数组的需要。

# spring - intercept-url pattern /** 导致 404 错误

> ID：15157250
> 
> 赞同：12
> 
> 时间：2013-03-01T11:59:48.727
> 
> 标签：spring, spring-security

我已经在这里、google 和 springsource 进行了搜索，但找不到适合我的解决方案。我有以下 spring-security.xml 并且当我使用该模式时

`<intercept-url pattern="/**" access="hasRole('ROLE_USER')" />`

当它重定向到登录页面时，这给了我一个 404 错误。但是，如果我使用，这不会发生

`<intercept-url pattern="/index*" access="hasRole('ROLE_USER')" />`

但显然这并不能保护应用程序的其余部分。

我确定这是我忽略的简单问题，但我能找到的最接近的是[这个堆栈溢出问题](https://stackoverflow.com/questions/2760011/spring-security-3-0-intercept-url-all-pages-require-authentication-but-one)，我已经将其合并到下面的 xml 文件中，但仍然存在同样的问题。我已经尝试过了，`use-expressions="true"`并且尝试过切换`intercept-url`' （我不是 100%，但我相当确定该`/**`模式应该是最后一个，因为我相信 url 的匹配顺序与声明的顺序相同）

任何建议/帮助都会很棒

**弹簧安全.xml**

```
<beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/security
    http://www.springframework.org/schema/security/spring-security-3.0.3.xsd">

    <http auto-config="true" use-expressions="true">
        <intercept-url pattern="/login" filters="none" access="permitAll" />
        <intercept-url pattern="/**" access="hasRole('ROLE_USER')" />
        <form-login login-page="/login" default-target-url="/welcome"
            authentication-failure-url="/loginfailed" />
        <logout logout-success-url="/logout" />
    </http>

    <authentication-manager>
      <authentication-provider>
        <user-service>
            <user name="username" password="password" authorities="ROLE_USER" />
        </user-service>
      </authentication-provider>
    </authentication-manager>

</beans:beans> 
```

## 更新

以防万一这是我使用 Spring 和 Spring security 3.0.4.RELEASE 的一个因素

## 回答

听从 Kris 的建议，我改变了

```
<intercept-url pattern="/login" filters="none" access="permitAll" /> 
```

到：

```
<intercept-url pattern="/login" access="IS_AUTHENTICATED_ANONYMOUSLY" /> 
```

由于异常，这导致了 500 错误

```
 SpelEvaluationException: EL1008E:(pos 0): Field or property
     'IS_AUTHENTICATED_ANONYMOUSLY' cannot be found on object of 
type'org.springframework.security.web.access.expression.WebSecurityExpressionRoot 
```

我通过更改`IS_AUTHENTICATED_ANONYMOUSLY`来解决了这个问题`isAnonymous()`

```
<intercept-url pattern="/login" access="isAnonymous()" /> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-10-30T19:05:14.517

为了完整起见，这是*需要*更改为`isAnonymous()`.

该`<http>`元素有一个`use-expressions`默认为的属性`true`。在默认情况下，您需要使用“安全表达式”而不是角色名称。如果您希望在`access=`声明中仅使用角色名称，则需要关闭表达式

```
<http use-expressions="false"> ... </http> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-05-14T18:06:10.320

添加一个`AnonymousAuthenticationFilter`到堆栈和一个`AnonymousAuthenticationProvider`. 如果您使用该`IS_AUTHENTICATED_ANONYMOUSLY`属性，则为必需。 [春季证券](http://docs.spring.io/spring-security/site/docs/4.0.0.M1/reference/htmlsingle/#nsa-global-method-security)

或`isAnonymous()`改用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-01T12:23:47.007

改变这个`<intercept-url pattern="/login" filters="none" access="permitAll" />`

到

```
<intercept-url pattern="/login" access="IS_AUTHENTICATED_ANONYMOUSLY" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T12:12:50.267

配置对我来说看起来不错。难道`/login`页面实际上不存在？第二个配置（带有`/index*`）可能只起作用，因为那时您发出的请求没有被拦截，因此没有被重新定向到不存在的`/login`页面。如果配置有问题，Spring Security 会响应 403 而不是 404。

`/login`如果url 有效，请在没有配置任何 Spring Security 的情况下仔细检查。

# css - Google Chrome 中的 CSS 浮动错误

> ID：15157253
> 
> 赞同：29
> 
> 时间：2013-03-01T12:00:04.043
> 
> 标签：css, google-chrome, css-float

我在最新版本的 Chrome (25.0.1364.97 m) 中遇到了一个奇怪的问题。我在一个浮动的、已清除的容器内有一组 div，它们都以相同的宽度向左浮动。

在 Firefox、IE 和旧版本的 Chrome 中，所有框并排放置，但在最新版本的 Chrome 中，第一个 div 位于其他 div 之上，如下所示：

![在此处输入图像描述](../Images/851f57879b763e4009561cb039c0eb33.png)

它似乎只在窗口最大化和第一次加载时发生，如果我刷新页面它会自行排序，但如果我使用 Ctrl + F5 进行硬刷新，它会再次发生

的HTML：

```
<div id="top">
    <h1>Words</h1>
</div>
<div id="wrapper">
    <div class="box">Words</div>
    <div class="box">Words</div>
    <div class="box">Words</div>
    <div class="box">Words</div>
</div> 
```

CSS：

```
#wrapper {clear:both;float:left;margin-top:20px;width:500px}
.box {float:left;width:100px;border:1px solid #000;margin-right:20px} 
```

我在这里做了一个小提琴：http: [//jsfiddle.net/GZHWR/3/](http://jsfiddle.net/GZHWR/3/)

这是最新 Chrome 中的错误吗？

编辑：我知道这可以通过将填充应用于#wrapper 元素而不是 margin-top 来解决，但我们管理着大约 140 个站点，因此去更改每个站点的 CSS 是不切实际的

编辑2：我想我需要澄清我的问题。**我不是在问如何解决这个问题**。我已经知道了。我想知道为什么会发生这种行为？为什么渲染引擎会这样渲染标记/css？这是正确的行为吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-08T10:02:36.893

这似乎是一个错误。`clear`在包装元素上应用时会出现问题。当您删除 时`clear`，错误就消失了。

根据有关该属性的[W3C 规范：](http://www.w3.org/TR/CSS2/visuren.html#propdef-clear)`clear`

> 此属性指示元素框的哪些边可能不与较早的浮动框相邻。'clear' 属性**不考虑元素本身**或其他块格式上下文中的浮动。

所以它不应该影响孩子的漂浮行为。我在 Chrome 上提交了关于此问题的错误报告。

更新：从评论中的链接，*kjtocool*在 2013 年 3月 30 日提到：

> 看来此问题已在版本 26.0.1410.43 中得到纠正

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-01T12:03:09.737

你为什么不使用

```
display: inline-block; 
```

而不是`float: left`.box？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-06T08:49:21.123

尝试 ：

```
#wrapper {
  display:inline;
}
.box{
  vertical-align:top;
} 
```

我在“喜欢”工具栏上遇到了同样的问题，在这段代码之后，它就可以工作了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T09:43:12.200

`clear:both`从是的删除`#wrapper` 它的工作原理............

[http://jsfiddle.net/GZHWR/20/](http://jsfiddle.net/GZHWR/20/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T02:48:14.250

试试这个：

CSS：

```
 .clearfix {
      *zoom: 1;
    }

    .clearfix:before,
    .clearfix:after {
      display: table;
      line-height: 0;
      content: "";
    }

    .clearfix:after {
      clear: both;
    } 
```

html:

```
<div id="wrapper" class="clearfix">
    <div class="box">Words</div>
    <div class="box">Words</div>
    <div class="box">Words</div>
    <div class="box">Words</div>
</div> 
```

消除

```
clear:both; 
```

来自#wrapper

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-07T06:13:32.543

从#wrapper 中删除 clear:both 如果您仍然遇到问题，请在最后一个 div 之后应用 clear:both

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-08T10:14:24.897

删除 clear:both;float:left; 形成#wrapper

当你想要 div nex raw 时，clear:both 是必需的。

# django - django 脆表单：在表单中嵌套表单集

> ID：15157262
> 
> 赞同：15
> 
> 时间：2013-03-01T12:00:15.710
> 
> 标签：django, django-forms, django-crispy-forms

我有一个 django [Formset](https://docs.djangoproject.com/en/dev/topics/forms/formsets/)，我想在另一个表单的中间进行布局。我正在使用[django-crispy-forms](https://django-crispy-forms.readthedocs.org)在父表单中设置布局`__init__`：

```
from crispy_forms.helper import FormHelper
from crispy_forms.layout import Submit, Layout, Field, Div
def __init__(self, *args, **kwargs):
    self.helper = FormHelper()
    self.helper.layout = Layout(
        Div(
            Div(Field('foo'), css_class='span3'),
            Div(Field('bar'), css_class='span4'),
            css_class='row'
            ),
        Field('baz', css_class='span1'),
            ...
            )
    self.helper.add_input(Submit('submit', 'Submit', css_class='btn btn-primary offset4')) 
```

`{% crispy %}`我的模板只是使用标签呈现表单。

我想知道我应该如何合并表单集。我应该在上面的 init 函数中实例化它吗？我如何在那里引用它？

网上还有[其他表单和表单集组合的示例](http://stellarchariot.com/blog/2011/02/dynamically-add-form-to-formset-using-javascript-and-django/)，它们依次呈现一个又一个渲染，但我想知道我是否可以更好地控制它们如何与脆皮的布局结合在一起。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-02-26T21:40:10.467

我在不修改 Crispy Forms 的情况下解决了这个问题，方法是创建一个呈现表单集的新字段类型：

```
from crispy_forms.layout import LayoutObject, TEMPLATE_PACK

class Formset(LayoutObject):
    """
    Layout object. It renders an entire formset, as though it were a Field.

    Example::

    Formset("attached_files_formset")
    """

    template = "%s/formset.html" % TEMPLATE_PACK

    def __init__(self, formset_name_in_context, template=None):
        self.formset_name_in_context = formset_name_in_context

        # crispy_forms/layout.py:302 requires us to have a fields property
        self.fields = []

        # Overrides class variable with an instance level variable
        if template:
            self.template = template

    def render(self, form, form_style, context, template_pack=TEMPLATE_PACK):
        formset = context[self.formset_name_in_context]
        return render_to_string(self.template, Context({'wrapper': self,
            'formset': formset})) 
```

它需要一个模板来呈现表单集，这使您可以准确控制它的呈现方式：

```
{% load crispy_forms_tags %}

<div class="formset">
    {% crispy formset %}
    <input type="button" name="add" value="Add another" />
</div> 
```

您可以使用它在布局中嵌入表单集，就像任何其他 Crispy 布局元素一样：

```
self.helper.layout = Layout(
    MultiField(
        "Education",
        Formset('education'),
    ), 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-04-21T18:30:06.977

[qris](https://stackoverflow.com/users/648162/qris)对先前答案的轻微修改。

此更新（由[Alejandro](https://stackoverflow.com/users/4595270/alejandro)建议）将允许我们的自定义**Formset** *布局对象*使用[FormHelper](http://django-crispy-forms.readthedocs.io/en/latest/form_helper.html)对象来控制表单集字段的呈现方式。

```
from crispy_forms.layout import LayoutObject

from django.template.loader import render_to_string

class Formset(LayoutObject):
    """ 
    Renders an entire formset, as though it were a Field.
    Accepts the names (as a string) of formset and helper as they
    are defined in the context

    Examples:
        Formset('contact_formset')
        Formset('contact_formset', 'contact_formset_helper')
    """

    template = "forms/formset.html"

    def __init__(self, formset_context_name, helper_context_name=None,
                 template=None, label=None):

        self.formset_context_name = formset_context_name
        self.helper_context_name = helper_context_name

        # crispy_forms/layout.py:302 requires us to have a fields property
        self.fields = []

        # Overrides class variable with an instance level variable
        if template:
            self.template = template

    def render(self, form, form_style, context, **kwargs):
        formset = context.get(self.formset_context_name)
        helper = context.get(self.helper_context_name)
        # closes form prematurely if this isn't explicitly stated
        if helper:
            helper.form_tag = False

        context.update({'formset': formset, 'helper': helper})
        return render_to_string(self.template, context.flatten()) 
```

模板（用于渲染表单集）：

```
{% load crispy_forms_tags %}

<div class="formset">
  {% if helper %}
    {% crispy formset helper %}
  {% else %}
    {{ formset|crispy }}
  {% endif %}
</div> 
```

现在它可以在任何布局中使用，就像任何其他清晰的表单布局对象一样。

```
self.helper.layout = Layout(
    Div(
        Field('my_field'),
        Formset('my_formset'),
        Button('Add New', 'add-extra-formset-fields'),
    ),
)

# or with a helper
self.helper.layout = Layout(
    Div(
        Field('my_field'),
        Formset('my_formset', 'my_formset_helper'),
        Button('Add New', 'add-extra-formset-fields'),
    ),
) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-05-12T12:49:31.090

脆皮形式目前不支持此功能。您唯一的选择是使用`|as_crispy_field`过滤器（尚未记录，抱歉）。

我已经开始为`{% crispy %}`标签和功能分支开发此功能，这一切都在这里解释：[https ://github.com/maraujop/django-crispy-forms/issues/144](https://github.com/maraujop/django-crispy-forms/issues/144)

我正在寻找反馈，所以如果您仍然感兴趣，请随时发布。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-21T02:23:06.583

基于上述解决方案 Formset(LayoutObject)，您将结合 django-dynamic-formset &crispy。在我的订单页面上，我有：

*   订单部分第 1 部分
*   带有动态添加表单的订单内联表单集
*   订单的第 N 部分

现在简单明了，ModelForms 是：

```
class OrderTestForm(forms.ModelForm):
def __init__(self, *args, **kwargs):
    super(OrderTestForm, self).__init__(*args, **kwargs)
    self.helper = FormHelper(self)
    self.helper.form_tag = True
    self.helper.html5_required = True
    self.helper.form_action = 'test_main'
    self.helper.layout = Layout(
        'product_norms', #section 1
        'reference_other', #section 1
        # rest of the section 1 fields
        Formset('samples', 'helper'), # inline dynamic forms
        'checkbox_is_required' # start of section N
        # other order sections fields
    )
    self.helper.add_input(Submit("submit", "Save order")) 
```

表单集助手布局：

```
class SamplesFormSetHelper(FormHelper):
def __init__(self, *args, **kwargs):
    super(SamplesFormSetHelper, self).__init__(*args, **kwargs)
    self.form_method = 'post'
    self.html5_required = True
    self.layout = Layout(
        Fieldset('',
        'description',
        'product', # foreign key
        'DELETE', # delete django-dynamic-formset
        css_class="formset_row"), # add-rows 
    )
    self.form_tag = False
    self.render_required_fields = False 
```

添加/删除内联，使用表单集操作保存订单按预期工作。

# mysql - 通过 Google Script 中的 jdbc 连接发送多个 mysql 指令

> ID：15157266
> 
> 赞同：1
> 
> 时间：2013-03-01T12:00:18.053
> 
> 标签：mysql, jdbc, google-apps-script, google-cloud-sql

我想在一行中从 Google Apps 脚本向 Google Cloud SQL 数据库发送多个查询。例如 ：

```
insert into table_name (field_name) values ("prout");
select last_insert_id() 
```

但由于某种原因，我无法让它工作。API 是否仅限于一次查询？这很痛苦，因为发送查询需要时间。一次发送几件东西会更有效率。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:27:30.363

您可能无法同时发送多个查询的原因是因为每个语句将具有不同的返回值。例如，“insert”语句将为您提供一个整数，指示有多少行受到影响（希望是 1！）。“选择”语句将返回给您一组对象。

您可以使用[addBatch](https://developers.google.com/apps-script/class_jdbcpreparedstatement#addBatch)执行批处理命令，但它们必须都是相同类型的查询（例如，很多“插入”）。

# python - 无法使用 c 调用 python 引用 Py_Initialize

> ID：15157273
> 
> 赞同：1
> 
> 时间：2013-03-01T12:01:07.647
> 
> 标签：python, python-2.7, python-c-extension

我想用 ac 程序调用一个 python 程序，

操作系统：ubuntu 12.10 x64 python2.7.3

C代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <python2.7/Python.h>

int main(int argc, char** argv)
{
    printf("Hello world!\n");
    Py_Initialize();
    Py_SetProgramName("c_python");
    PyRun_SimpleString("print \"Hello world,Python!\"\n");
    Py_Finalize();
    exit(0);
} 
```

编译外壳：

```
gcc -I/usr/include/python2.7 -L/usr/lib/python2.7 -Wall -fPIC c_python.c -o c_pyton

/tmp/cciuHgrf.o：in ‘main’：
c_python.c:(.text+0x1c)：reference undefined ‘Py_Initialize’
c_python.c:(.text+0x28)：reference undefined ‘Py_SetProgramName’
c_python.c:(.text+0x3e)：reference undefined ‘Py_Finalize’
collect2: error： ld return 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T12:02:58.620

您需要将 Python 解释器链接到您的可执行文件：`-lpython`.

# arrays - 数组显示顺序

> ID：15157275
> 
> 赞同：0
> 
> 时间：2013-03-01T12:01:16.680
> 
> 标签：arrays, arraylist, nsmutablearray

```
a=Array.new 
a=[1,2,3,4,5]
puts a 
```

然后输出将是`1,2,3,4,5`，但我想显示`a[1]`到`a[0]` （`2,3,4,5,1`）。

是否有任何内置方法可以按上述顺序显示？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:04:03.183

恐怕没有内置方法可以按您想要的顺序显示它 - 您必须自定义/实现自己的 toString （或类似）方法/实用程序才能实现数组元素的任意显示

# c# - C#属性，获取标记属性值的简单方法

> ID：15157280
> 
> 赞同：2
> 
> 时间：2013-03-01T12:01:40.900
> 
> 标签：c#

我想做一个属性类。每个带有属性标签的属性都会调用一个函数。在这些函数中，我需要属性的值和类型。自 4.5 以来，有一些新的不错的功能。

是否真的有必要在整个程序集中查看具有这些属性标记的所有属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:05:32.883

根据这篇[MSDN 文章](http://msdn.microsoft.com/en-us/library/ms171868.aspx)，.NET 4.5 中没有新的周边属性 - 所以您过去一直在做的事情仍然需要完成。但是，新的一件事是托管可扩展性框架 (MEF)，它可以帮助您在某些情况下摆脱归因。

解释这超出了这个问题的范围。

但这里有一个关于 MEF的[非常详细的链接。](http://msdn.microsoft.com/en-us/library/dd460648.aspx)

# cassandra - 禁用提交日志是否安全？

> ID：15157290
> 
> 赞同：1
> 
> 时间：2013-03-01T12:02:13.467
> 
> 标签：cassandra

如果我们使用复制，禁用提交日志是否安全？当一个节点发生故障时，通常是由于硬盘故障，因此在该提交日志中不会帮助我们提高持久性，但复制会。为什么我们在使用复制时甚至需要提交日志？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:10:34.563

如果没有提交日志，存储在副本上的内存表中的数据可能需要很长时间（可能是无限的，但实际上通常是几分钟）才能写入磁盘。这意味着，在该窗口内，您可能会丢失写入。例如，如果您的数据中心断电，您可能会丢失所有副本上最后几分钟的所有写入。提交日志（默认情况下）每 10 秒同步一次，因此如果同时发生故障，您最多会丢失 10 秒的数据。

但是，如果您使用多数据中心复制，那么要丢失数据，您将需要跨数据中心同时发生故障。

这是一种权衡：提交日志没有复制保护，以防止单个节点崩溃或发生非破坏性故障。通过在单个 DC 中进行复制，它可以防止整个 DC 故障，例如电源故障。通过多 DC 中的复制，它可以防止相关故障。您可以根据启用提交日志的成本与丢失最近写入的成本来决定需要多大的弹性。

# jquery - jQuery 插件（或类似插件）将文本 Google 着色为与 Google 徽标相同的颜色

> ID：15157292
> 
> 赞同：-2
> 
> 时间：2013-03-01T12:02:16.807
> 
> 标签：jquery, css, jquery-plugins, target

我正在寻找一个 jQuery 插件或类似的东西，它将改变单词“Google”的每个字母的颜色以匹配 Google 徽标的颜色。

因此，例如，如果我有以下标记：

```
<span>Google AdWords</span> 
```

我想更改单词`Google`，使每个字母的颜色与 Google 徽标的颜色相同，即蓝色、红色、黄色、蓝色、黄色、红色。

我知道这是一个很小的问题，但我原以为会有一个 jQuery Highlight 版本在那里我可以定位字符串“Google”，它可以完成这项工作，但我无法在任何地方找到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T12:14:15.377

试试这个：

**CSS**

```
.blue{color:blue;}
.red{color:red;}
.yellow{color:yellow;}
.green{color:green;}
span{font-size:30px;} 
```

**脚本**

```
var txt=$('span').text();
txt=txt.replace('Google','<span class="blue">G</span><span class="red">o</span><span class="yellow">o</span><span class="blue">g</span><span class="green">l</span><span class="red">e</span>');

 $('span').html(txt); 
```

小提琴[http://jsfiddle.net/3DRaT/](http://jsfiddle.net/3DRaT/)

# ruby-on-rails - 如何提高拥有欧洲用户群的 Heroku 托管应用程序的性能？

> ID：15157296
> 
> 赞同：1
> 
> 时间：2013-03-01T12:02:33.263
> 
> 标签：ruby-on-rails, performance, heroku, amazon-web-services

我有一个由 Heroku 托管的 Rails 3.2 应用程序。我在英国，大多数应用程序的用户都在欧洲。目前，鉴于该应用程序位于美国地区，性能还有很多不足之处。

**在仍然使用 Heroku 托管的同时，我可以做些什么来提高欧洲用户的性能，还是我需要寻找位于欧洲地区的替代主机？**

编辑：问题不在于应用程序。这是请求页面和请求到达应用程序之间的延迟。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T08:45:07.713

截至昨天（2013-04-24）这个问题的简单答案是`heroku create --region eu`

在博客上阅读更多信息：[https ://blog.heroku.com/archives/2013/4/24/europe-region](https://blog.heroku.com/archives/2013/4/24/europe-region)

迁移现有应用程序：[https ://devcenter.heroku.com/articles/app-migration#fork-application](https://devcenter.heroku.com/articles/app-migration#fork-application)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:46:38.043

如果您在空闲堆栈上，请使用此提示来防止您的测功机空转和旋转（并且必须重新旋转）：

[防止 Heroku 空转的简单方法？](https://stackoverflow.com/questions/5480337/easy-way-to-prevent-heroku-idling)

找出哪些页面对性能的负面影响最大，看看您是否可以使用这些缓存策略中的任何一种来减轻负载：

[https://devcenter.heroku.com/articles/caching-strategies](https://devcenter.heroku.com/articles/caching-strategies)

确定可以在后台运行的进程，以便您可以更快地返回请求。Resque 和 Redis：

[https://devcenter.heroku.com/articles/queuing-ruby-resque](https://devcenter.heroku.com/articles/queuing-ruby-resque)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T01:59:47.473

你看过：

*   减少页面大小/对象数量 - 无论您制作网站的速度有多快，如果页面很大
*   添加 CDN - 将静态内容移近用户可显着提高这些资产的性能（它对您的网站的影响程度，取决于您拥有多少静态数据）
*   yslow 或类似的各种其他性能调整
*   任播 DNS - 体面的 DNS 服务可以产生微小但明显的差异

我花了一些时间在 Octopress/Heroku 上优化我的网站，并将其写下来（[http://www.damon.io/blog/2013/01/10/improving-octopress-jekyll-site-performance-DNS-hosting-CDN /](http://www.damon.io/blog/2013/01/10/improving-octopress-jekyll-site-performance-DNS-hosting-CDN/) ) 有一些 CDN 和 DNS 的比较，您可能会觉得有趣。

当然，我不能说这与您的网站有多相关，但希望这里有一些对您有用的东西。

# php - PHP：is_array 在不应该返回 false 时

> ID：15157298
> 
> 赞同：3
> 
> 时间：2013-03-01T12:02:40.483
> 
> 标签：php, arrays, conditional-statements

我有这个简单的一行代码：

```
$thisUserName = is_array($user) ? $user->name : $user; 
```

在这里,`$thisUserName`是给的`$user`, 意味着条件`is_array`返回假, 即使`print_r`表明那`$user`是一个数组。

任何想法，任何人？

谢谢。

PS。我尝试将其更改为`echo is_array($user) ? 'yes' : 'no'`，但它没有回应。

编辑：

print_r($user) 给出

```
stdClass Object
(
    [id] => 169
    [name] => Cedric
    [username] => pulpfiction
    [email] => xxx@gmail.com
    [password] => c22601b4ed1ac11a80955d6c0eeb1933
    [password_clear] => 
    [usertype] => Registered
    [block] => 0
    [sendEmail] => 0
    [gid] => 18
    [registerDate] => 2013-01-30 11:12:10
    [lastvisitDate] => 2013-02-24 19:45:45
    [activation] => 
    [params] => 

    [aid] => 1
    [guest] => 0
) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-01T12:06:10.870

`$user`是一个对象而不是一个数组。`print_r()`仍然会输出它看起来很漂亮，但是如果您仔细查看输出，您会发现并非所有内容都会显示为数组，它会列出对象。你应该使用[is_object()](http://us3.php.net/is_object)

```
$thisUserName = is_object($user) ? $user->name : $user; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T12:07:31.003

`is_array()`检查变量是否为数组。

但是，紧随其后的代码是`$user->name`，这意味着您实际上期望它是一个对象。`is_array()`不会为对象返回 true。

如果你想测试它是否是一个对象，你可以使用[`is_object()`](http://us3.php.net/is_object)而不是`is_array()`.

但是，最好检查它是否是您期望的类型的对象，在这种情况下您可以使用[`instanceof`](http://www.php.net/manual/en/language.operators.type.php#language.operators.type)例如：

```
$thisUserName = ($user instanceof myUserClass) ? $user->name : $user 
```

（显然，'myUserClass' 是您的用户类的类名）

希望有帮助。

[编辑]

在一个好的系统中，应该知道任何给定对象所期望的类名，并使用`instanceof`它来验证它。

但是，如果您不知道期望的类名，那么`is_object()`就足够了。

`get_class()`（您可以使用;找出对象的类`get_class`名`intanceof`; 坚持下去`is_object()`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T12:25:00.160

如果您使用的是 object ，那么试试这个例子

```
 <?php
    $user->name='my_name';
    echo (is_object($user)) ?$user->name:$user;
    ?> 
```

//结果：my_name

# python - 如何判断 Cement2 中是否指定了字符串类型的选项

> ID：15157302
> 
> 赞同：2
> 
> 时间：2013-03-01T12:03:00.397
> 
> 标签：python, command-line-arguments

我正在使用 python 的 Cement2 库来解析命令行参数：

```
app.args.add_argument('-f', '--foo', action='store', metavar='STR',
                      help='the notorious foo option') 
```

完整的代码示例可以在这里找到：[http ://cement.readthedocs.org/en/1.9.2/dev/quickstart/#getting-warmer](http://cement.readthedocs.org/en/1.9.2/dev/quickstart/#getting-warmer)

所以这里*-f*是一个字符串选项，我想要的是它可以区分：

1.  -f 未提供
2.  -F
3.  -f "富"

但在这里我无法分辨 1 和 2 之间的区别 --- 捕获的值都是`arg.foo == None`.

关于如何区分前两种情况的任何想法？

谢谢。

# android - 无法评价我的应用

> ID：15157303
> 
> 赞同：3
> 
> 时间：2013-03-01T12:03:01.383
> 
> 标签：android, google-play

我在`rate`我的应用程序中使用以下类。但是每次我这样做时，它都会显示“未找到请求的项目”。但链接 < play.google.com/store/apps/details?id=com.xxx.xxx > 在浏览器中完美运行。为什么它在这里不起作用？

我注意到的另一件事是，如果我将包名称更改为与其他应用程序相同的名称，它就可以工作。上传以前的版本时是否有可能遗漏了什么？

```
public class apprater {
private final static String APP_TITLE = "abcd";
private final static String APP_PNAME = "com.xxx.xxx";

private final static int DAYS_UNTIL_PROMPT = 3;
private final static int LAUNCHES_UNTIL_PROMPT = 7;

public static void app_launched(Context mContext) {
    SharedPreferences prefs = mContext.getSharedPreferences("apprater", 0);
    if (prefs.getBoolean("dontshowagain", false)) { return ; }

    SharedPreferences.Editor editor = prefs.edit();

    // Increment launch counter
    long launch_count = prefs.getLong("launch_count", 0) + 1;
    editor.putLong("launch_count", launch_count);

    // Get date of first launch
    Long date_firstLaunch = prefs.getLong("date_firstlaunch", 0);
    if (date_firstLaunch == 0) {
        date_firstLaunch = System.currentTimeMillis();
        editor.putLong("date_firstlaunch", date_firstLaunch);
    }

    // Wait at least n days before opening
    if (launch_count >= LAUNCHES_UNTIL_PROMPT) {
        if (System.currentTimeMillis() >= date_firstLaunch + 
                (DAYS_UNTIL_PROMPT * 24 * 60 * 60 * 1000)) {
            showRateDialog(mContext, editor);
        }
    }

    editor.commit();
}   

public static void showRateDialog(final Context mContext, final SharedPreferences.Editor editor) {
    final Dialog dialog = new Dialog(mContext);
    dialog.setTitle("Rate " + APP_TITLE);

    LinearLayout ll = new LinearLayout(mContext);
    ll.setOrientation(LinearLayout.VERTICAL);

    TextView tv = new TextView(mContext);
    tv.setText("If you enjoy using " + APP_TITLE + ", please take a moment to rate it. Thanks for your support!");
    tv.setWidth(240);
    tv.setPadding(4, 0, 4, 10);
    ll.addView(tv);

    Button b1 = new Button(mContext);
    b1.setText("Rate " + APP_TITLE);
    b1.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            mContext.startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("market://details?id=" + APP_PNAME)));
            System.out.println("eeeeeeeeeeeee: "+APP_PNAME);
            dialog.dismiss();
        }
    });        
    ll.addView(b1);

    Button b2 = new Button(mContext);
    b2.setText("Remind me later");
    b2.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            dialog.dismiss();
        }
    });
    ll.addView(b2);

    Button b3 = new Button(mContext);
    b3.setText("No, thanks");
    b3.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            if (editor != null) {
                editor.putBoolean("dontshowagain", true);
                editor.commit();
            }
            dialog.dismiss();
        }
    });
    ll.addView(b3);

    dialog.setContentView(ll);        
    dialog.show();        
}
} 
```

这就是我现在使用的：

```
public void onClick(View v) {
                final String appName = APP_PNAME;

                try 
                {
                    mContext.startActivity(new Intent(Intent.ACTION_VIEW,Uri.parse("market://details?id=com.xxx.xxx")));

                }
               catch (android.content.ActivityNotFoundException anfe) 
                {                           
                   mContext.startActivity(new Intent(Intent.ACTION_VIEW,Uri.parse("http://play.google.com/store/apps/details?id=com.xxx.xxx")));
                }

               // mContext.startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("market://details?id=" + APP_PNAME)));

                dialog.dismiss();
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:07:42.487

试试这个

```
final String appName = getPackageName();

    try 
    {
         startActivity(new Intent(Intent.ACTION_VIEW,Uri.parse("market://details?id="+ appName)));                      
    }
   catch (android.content.ActivityNotFoundException anfe) 
    {                           
         startActivity(new Intent(Intent.ACTION_VIEW,Uri.parse("http://play.google.com/store/apps/details?id="+ appName)));
    } 
```

# javascript - 在jquery中为鼠标悬停动画div的外观

> ID：15157304
> 
> 赞同：1
> 
> 时间：2013-03-01T12:03:03.137
> 
> 标签：javascript, jquery

我想在鼠标悬停时为 div 设置动画。我只是不知道如何让它慢慢淡入/出现（我认为我们必须使用 .animate 函数或类似的东西）

```
$("#logo").mouseover(function() { $("#nav").css('visibility','visible'); }); 
```

将不胜感激任何帮助:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T12:04:43.140

```
$("#logo").mouseover(function() { $("#nav").fadeIn("slow"); }); 
```

确保您的 CSS 具有 #nav 的样式`display:none;`

参考[http://api.jquery.com/fadeIn/](http://api.jquery.com/fadeIn/)

[**示例演示**](http://jsfiddle.net/refhat/trhJe/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T12:05:23.163

尝试这个：

```
$("#logo").mouseover(function() { 
    $("#nav").fadeIn('slow'); 
}); 
```

参考网站[http://api.jquery.com/fadeIn/](http://api.jquery.com/fadeIn/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T12:06:36.220

您可以使用`fadeIn/fadeOut`方法或`fadeToggle`自动淡入或淡出的方法。每个方法都允许一个`duration`参数来设置动画时间，但也有更多的参数来修改淡入淡出。

Look at the API for [fadeToggle](http://api.jquery.com/fadeToggle/) to see the whole functionality (and how to use) :) . ([fadeIn API](http://api.jquery.com/fadeIn/), [fadeOut API](http://api.jquery.com/fadeOut/)).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T12:05:16.273

使用 fadeIn [()](http://api.jquery.com/fadeIn/) ...试试这个。

```
$("#nav").hide();
$("#logo").mouseover(function() { $("#nav").fadeIn(600)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T12:16:30.247

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Sample</title>
<script src="js/jquery-1.7.1.js"></script>
<script>
$(document).ready(function(){
$("#logo").mouseover(function() { $('div:hidden:first').fadeIn('slow', function() {
// Animation complete
alert("complete")
}); });
});

</script>
<style>
#nav{display:none}
</style>
</head>

<body>
<div id="logo">Click Me</div>
<div id="nav" style="background:#CCC">sample</div>
</body>
</html> 
```

# visual-studio-2010 - Nuget：将文件添加到消费项目？

> ID：15157306
> 
> 赞同：2
> 
> 时间：2013-03-01T12:03:10.877
> 
> 标签：visual-studio-2010, intellisense, nuget

我想将 XSD 文件添加到 Nuget 包。当项目安装 Nuget 包时，该文件应包含在项目中，以便在项目的 app.config 文件中允许 Intellisense。

我可以很好地将 XSD 添加到 Nuget 包中，但我不知道如何使其显示在使用依赖项的项目中。

这可以做到吗？

FWIW 在项目的 app.config 文件中注入了一些额外的部分（通过 Nuget 的[“转换”功能](http://docs.nuget.org/docs/creating-packages/configuration-file-and-source-code-transformations#Configuration_File_Transformations)）。XSD 为这些额外的部分提供 Intellisense，Visual Studio 会自动选择项目（甚至解决方案）中包含的与 XML 元素声明的命名空间相匹配的 XSD 架构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:46:12.943

Nuget 可以选择运行自定义安装 Powershell 脚本，以获取对正在安装包的项目的引用。

详细信息： http:
[//docs.nuget.org/docs/creating-packages/creating-and-publishing-a-package#Automatically_Running_PowerShell_Scripts_During_Package_Installation_and_Removal](http://docs.nuget.org/docs/creating-packages/creating-and-publishing-a-package#Automatically_Running_PowerShell_Scripts_During_Package_Installation_and_Removal)

以下是一些使用示例： http:
[//www.codeproject.com/Articles/209522/PowerShell-Script-Examples-for-NuGet-Packages](http://www.codeproject.com/Articles/209522/PowerShell-Script-Examples-for-NuGet-Packages)

# django - 缓存 Django 评论列表

> ID：15157307
> 
> 赞同：1
> 
> 时间：2013-03-01T12:03:15.523
> 
> 标签：django, django-comments

我有[一个使用标准 Django 注释的站点](http://www.pepysdiary.com/)（嗯，它的一个子类，但基本相同）。我想缓存在每个页面上呈现的评论列表，因为这是一个相当大而缓慢的查询。但是，虽然我知道如何缓存单个查询集，但我看不出如何最好地为评论应用程序做这件事。

看起来这些评论列表的查询集是在[templatetag](https://github.com/django/django/blob/stable/1.5.x/django/contrib/comments/templatetags/comments.py#L71)[中生成的`BaseCommentNode`](https://github.com/django/django/blob/stable/1.5.x/django/contrib/comments/templatetags/comments.py#L71)。所以我看不到一个简单的方法来查看是否有该 QS 的缓存版本并返回它，如果有的话......我很好地缓存这个查询的最佳方法是什么？

（我还在为所有已注销的用户缓存每个页面，有效期为 5 分钟，但我*认为*我的网站会从缓存这样的查询中受益更长的时间。）

# android - Android 谷歌翻译 API

> ID：15157319
> 
> 赞同：6
> 
> 时间：2013-03-01T12:03:56.203
> 
> 标签：android, google-api, translate

我在通过翻译 API 从 Google 接收翻译时遇到问题。有人知道出了什么问题吗？谢谢！

注意：它已经工作了一段时间，但可能在 5 个月前它停止工作了。

```
@Override
public void onClick(View v) {
    GoogleAPI.setHttpReferrer("http://code.google.com/p/google-api-translate-java/");
    GoogleAPI.setKey("xxx");

    try {
        tv_answer.setText(Translate.DEFAULT.execute(tv_source.getText().toString(), Language.CZECH, Language.ENGLISH));
    } catch (GoogleAPIException e) {
        e.printStackTrace();
    }
} 
```

收到错误：

```
com.google.api.GoogleAPIException: java.lang.Exception: [google-api-translate-java] Error retrieving translation. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T20:17:33.563

此问题仅在使用此 api 客户端时出现在 android 上。我相信这是因为这个 api 客户端是旧的和/或写得不好。

您可以尝试从[此处](https://github.com/richmidwinter/google-api-translate-java)获取源代码并自己解决问题，或者直接从 Java 使用 GET 和 HttpURLConnection 使用 api，然后它们会解析 JSON。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:13:17.107

Google Translate API 是一项付费服务​​。

**笔记：**

（[https://developers.google.com/translate/v2/getting_started](https://developers.google.com/translate/v2/getting_started)）

# c# - DateTime.MinValue 和 SqlDateTime 溢出

> ID：15157328
> 
> 赞同：72
> 
> 时间：2013-03-01T12:04:15.197
> 
> 标签：c#, sql-server, datetime

我不想验证`txtBirthDate`，所以我想传入`DateTime.MinValue`数据库。

我的代码：

```
 if (txtBirthDate.Text == string.Empty)
    objinfo.BirthDate = DateTime.MinValue;
 else
     objinfo.BirthDate =  DateTime.Parse(txtBirthDate.Text); 
```

`DateTime.MinValue`返回`Date = {1/1/0001 12:00:00 AM}`

我收到一个 SQL 错误：

> SqlDateTime 溢出。必须介于 1753 年 1 月 1 日上午 12:00:00 和 9999 年 12 月 31 日晚上 11:59:59 之间。

我理解但我不明白为什么 `DateTime.MinValue`返回无法插入数据库的无效日期时间。如何处理这种情况？

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2013-03-01T12:26:55.987

非常简单，避免使用`DateTime.MinValue`use`System.Data.SqlTypes.SqlDateTime.MinValue`代替。

* * *

## 回答 #2

> 赞同：98
> 
> 时间：2013-03-01T12:06:34.053

基本上，不要`DateTime.MinValue`用来表示缺失值。您*不能*在 SQL Server DateTime 字段中使用`DateTime.MinValue`，因为 SQL Server 的最小值为 1753 的开头。

相反，将您的`BirthDate`属性设置为`Nullable<DateTime>`(aka `DateTime?`)，并`null`在您没有​​值时将其设置为。还要确保您的数据库字段可以为空。然后你只需要确保它`null`最终成为`NULL`数据库中的一个值。具体如何操作将取决于您的数据访问权限，而您没有告诉我们任何相关信息。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-12-10T18:39:02.927

虽然这是一个老问题，但另一种解决方案是使用 datetime2 作为数据库列。 [MSDN 链接](http://msdn.microsoft.com/en-us/library/bb677335.aspx)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-10-03T14:48:02.127

嗯...获取 SQL 最小日期非常简单

```
DateTime sqlMinDateAsNetDateTime = System.Data.SqlTypes.SqlDateTime.MinValue.Value; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-01T12:34:59.163

> 这是你可以做的。虽然有很多方法可以实现它。

```
DateTime? d = null;    
if (txtBirthDate.Text == string.Empty)
    objinfo.BirthDate = d;
else
    objinfo.BirthDate =  DateTime.Parse(txtBirthDate.Text); 
```

> 注意：这仅在您的数据库日期时间列是 Allow Null 时才有效。否则，您可以为 DateTime d 定义标准最小值。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-09-02T10:27:34.897

我正在使用这个函数来尝试解析

```
public static bool TryParseSqlDateTime(string someval, DateTimeFormatInfo dateTimeFormats, out DateTime tryDate)
    {
        bool valid = false;
        tryDate = (DateTime)System.Data.SqlTypes.SqlDateTime.MinValue;
        System.Data.SqlTypes.SqlDateTime sdt;
        if (DateTime.TryParse(someval, dateTimeFormats, DateTimeStyles.None, out tryDate))
        {
            try
            {
                sdt = new System.Data.SqlTypes.SqlDateTime(tryDate);
                valid = true;
            }
            catch (System.Data.SqlTypes.SqlTypeException ex)
            {

            }
        }

        return valid;
    } 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-03-01T12:08:26.790

来自 MSDN：

> 从 1753 年 1 月 1 日到 9999 年 12 月 31 日的日期和时间数据，精度为 1300 秒，即 3.33 毫秒。值四舍五入到 0.000、0.003 或 0.007 毫秒的增量。存储为两个 4 字节整数。前 4 个字节存储基准日期 1900 年 1 月 1 日之前或之后的天数。基准日期是系统的参考日期。不允许使用早于 1753 年 1 月 1 日的日期时间值。其他 4 个字节存储一天中的时间，表示为午夜后的毫秒数。秒的有效范围为 0–59。

SQL 对 DateTime 值使用与 C# 不同的系统。

您可以使用您的 MinValue 作为标记值 - 如果它是 MinValue - 将 null 传递给您的对象（并将日期存储为可为空的 DB 中）。

```
if(date == dateTime.Minvalue)
    objinfo.BirthDate = null; 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-03-01T12:16:21.170

简单地说，**不要**用作`DateTime.MinVaue`默认值。

有几个不同`MinValues`的，取决于你所处的环境。

我曾经有一个项目，我正在实施一个 Windows CE 项目，我使用的是框架`DateTime.MinValue`（0001 年）、数据库`MinValue`（1753 年）和 UI 控件`DateTimePicker`（我认为是 1970 年）。因此，至少有**3 个不同的 MinValues**会导致奇怪的行为和意外的结果。（而且我相信甚至还有第四个（！）版本，我只是不记得它来自哪里。）。

使用**可为空的数据库字段**并将您的值更改为 a `Nullable<DateTime>`。如果您的代码中**没有有效值，那么数据库中****也不**应该有值。:-)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-01-11T16:02:42.250

如果您使用 DATETIME2，您可能会发现必须将参数专门作为 DATETIME2 传递，否则它可能有助于将其转换为 DATETIME 并遇到同样的问题。

```
command.Parameters.Add("@FirstRegistration",SqlDbType.DateTime2).Value = installation.FirstRegistration; 
```

* * *

## 回答 #10

> 赞同：-7
> 
> 时间：2013-03-01T12:13:40.857

使用扩展

```
public static class DateTimeExtensions
{
    public static DateTime MinValue(this DateTime sqlDateTime)
    {
        return new DateTime(1900, 01, 01, 00, 00, 00);
    }
}

DateTime date = DateTime.Now;
Console.WriteLine("Minvalue is {0} ", date.MinValue().ToShortDateString()); 
```

# javascript - 这个 Javascript 函数工厂增加了什么价值？

> ID：15157331
> 
> 赞同：5
> 
> 时间：2013-03-01T12:04:18.737
> 
> 标签：javascript, functional-programming

我偶然发现了这段代码，当外部函数不接受任何参数时，我真的没有看到返回函数的必要性？

```
var percent = (function() {
    var fmt = d3.format(".2f");
    return function(n) { return fmt(n) + "%"; };
})() 
```

我错过了什么还是可以重写为：

```
var percent = function(n) {
    return d3.format(".2f")(n) + "%";
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T12:07:31.950

它可以，但是你`d3.format(".2f")`每次都打电话而不是只打电话一次。根据函数正在做什么以及调用它的频率，这可能会增加额外的性能开销。

随着 IIEF（立即*调用的函数表达式*）返回闭包，您可以“缓存” .`fmt``percent`

# python - 根据在另一个列表中的标签从列表中选择元素

> ID：15157332
> 
> 赞同：9
> 
> 时间：2013-03-01T12:04:27.107
> 
> 标签：python, list

我有两个列表 Lx 和 Ly，Lx 中的每个元素在 Ly 中都有一个对应的标签。例子：

```
Lx = [[1,2,5], [5,2,7], [7,0,4], [9,2,0], [1,8,5], [3,4,5], [3,2,7], [2,9,7]]
Ly = [A, C, A, B, A, B, C, C] 
```

如何轻松获得一个列表/标签，其中列表的元素是 Lx 中在 Ly 具有相同标签的元素？那是：

```
[[1,2,5], [7,0,4], [1,8,5]]
[[5,2,7], [3,2,7], [2,9,7]]
[[9,2,0], [3,4,5]] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T12:07:17.783

```
Lx = [[1,2,5], [5,2,7], [7,0,4], [9,2,0], [1,8,5], [3,4,5], [3,2,7], [2,9,7]]
Ly = ['A', 'C', 'A', 'B', 'A', 'B', 'C', 'C']
d = {}
for x,y in zip(Lx,Ly):
    d.setdefault(y, []).append(x) 
```

`d`就是现在：

```
{'A': [[1, 2, 5], [7, 0, 4], [1, 8, 5]],
 'B': [[9, 2, 0], [3, 4, 5]],
 'C': [[5, 2, 7], [3, 2, 7], [2, 9, 7]]} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T12:07:45.233

以下内容将使您非常接近：

```
from collections import defaultdict

Lx = [[1,2,5], [5,2,7], [7,0,4], [9,2,0], [1,8,5], [3,4,5], [3,2,7], [2,9,7]]
Ly = ['A', 'C', 'A', 'B', 'A', 'B', 'C', 'C']

d = defaultdict(list)
for x, y in zip(Lx, Ly):
  d[y].append(x)
d = dict(d)

print(d) 
```

这产生

```
{'A': [[1, 2, 5], [7, 0, 4], [1, 8, 5]], 'C': [[5, 2, 7], [3, 2, 7], [2, 9, 7]], 'B': [[9, 2, 0], [3, 4, 5]]} 
```

# video - 如何将存储在资源中的视频保存到相机胶卷？

> ID：15157338
> 
> 赞同：0
> 
> 时间：2013-03-01T12:04:34.980
> 
> 标签：video, camera, media-player, avfoundation

我正在使用下面的代码播放电影，但想知道当用户按下按钮时，是否有办法将我保存在应用程序中的电影文件保存到设备的相机胶卷中。

```
NSString *moviePath = [[[NSBundle mainBundle] resourcePath]
  stringByAppendingPathComponent:@"video.m­p4"];
MPMoviePlayerController *moviePlayer = [[MPMoviePlayerController alloc]
initWithContentURL:[NSURL fileURLWithPath:moviePath]];

moviePlayer.movieControlMode = MPMovieControlModeDefault;

[[NSNotificationCenter defaultCenter] addObserver:self 
selector:@selector(movieFinishedCallback­:) 
name:MPMoviePlayerPlaybackDidFinishNotif­ication object:moviePlayer]; 

[moviePlayer play]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T17:11:30.577

很简单，看看这个其他问题的答案，

[将应用内视频保存到相机胶卷？](https://stackoverflow.com/questions/10407401/save-in-app-video-to-camera-roll)

你会使用：`UISaveVideoAtPathToSavedPhotosAlbum`

# stored-procedures - 从 Firebird 2.1 上的视图访问存储过程

> ID：15157344
> 
> 赞同：0
> 
> 时间：2013-03-01T12:05:04.150
> 
> 标签：stored-procedures, view, firebird, firebird2.1

我有这个查询供查看：

```
SELECT BATCH, BS.FIELD1, BS.FIELD2 
from BATCHES 
left join P_BATCH_SUMMARY(BATCH) BS on 1=1 
```

它适用于 Firebird 2.5，但不适用于 Firebird 2.1。是否可以使用 FB2.1 绕过此限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T19:43:26.540

鉴于[在 Firebird 2.5 中引入了在](https://www.firebirdsql.org/file/documentation/release_notes/html/en/2_5/rnfb25-ddl.html#rnfb25-ddl-createview)视图中引用可选存储过程的事实，您唯一的选择是：

1.  升级到火鸟 2.5
2.  将此视图替换为等效的可选存储过程
3.  用查询本身替换此视图的用法

# laravel - 在 Laravel 3 中加载 PSR-0 不兼容的库

> ID：15157345
> 
> 赞同：1
> 
> 时间：2013-03-01T12:05:07.160
> 
> 标签：laravel, laravel-3, psr-0

我需要在 Laravel 中使用不符合 PSR-0 的旧库。

它由几个文件和目录组成，里面有很多“require”、“include”和“require_once”的东西。因此，我尝试将其放入“库/子文件夹”并自动加载入口脚本，但它破坏了框架，并且我不断收到“找不到类'Laravel\Response'”错误。我找不到这个错误的原因，但我猜它以某种方式破坏了 Laravel 的自动加载系统。

如何解决这个问题？我怎样才能加载这种库并保持工作正常？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T08:04:20.797

如果其他人在使用 Laximo API 和 Laravel 时遇到同样的问题，只需使用 nusoap 而不是 nusoap_utf8 类。

# system.reactive - RX PropertyChanged GroupBy 死锁

> ID：15157347
> 
> 赞同：0
> 
> 时间：2013-03-01T12:05:08.860
> 
> 标签：system.reactive, inotifypropertychanged

我正在尝试使用 Reactive Extensions 来限制 PropertyChanged 通知。有使用 GroupBy 执行此操作的示例，但为每个 PropertyName 创建一个订阅。

我想为所有属性处理 PropertyChanged 事件，并且我需要为每个 PropertyName 限制这些事件。

这是我到目前为止所拥有的，但它会导致死锁。

```
ValuesPropertyChanged = Observable.FromEventPattern<PropertyChangedEventArgs>(value, "PropertyChanged")
    .GroupBy(o => o.EventArgs.PropertyName)
    .First()
    .Throttle(TimeSpan.FromSeconds(2))
    .Subscribe(args => HandlePropertyChanged(args.EventArgs.PropertyName)); 
```

死锁发生在对 .First() 的调用中。

如果我将该行更改为：

```
.Select(o => o.First()) 
```

我也试过

```
.Select(o => o.FirstAsync()) 
```

[此处](http://www.introtorx.com/content/v1.0.10621.0/07_Aggregation.html#GroupBy)GroupBy 的示例看起来非常简洁，但我无法将这些示例转换为我的解决方案。

为什么这会导致死锁，我应该怎么做才能使它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:25:50.153

我*想*这可能是你所追求的：

```
// assume MyObj : INotifyPropertyChanged, naturally
var value = new MyObj();

Action<string> HandlePropertyChanged = 
    name => Console.WriteLine("Got a change for name:" + name);

// The query
var valuesPropertyChanged = 
    // create from event stream
    from propChange in Observable.FromEventPattern<PropertyChangedEventArgs>(
             value, 
             "PropertyChanged")            
    // group events by property name
    group propChange by propChange.EventArgs.PropertyName into batchByName
    // Throttle the resulting batch
    from throttledByName in batchByName.Throttle(TimeSpan.FromSeconds(1))
    // then select each item of the "throttled output"
    select throttledByName;

valuesPropertyChanged.Subscribe(args => 
    HandlePropertyChanged(args.EventArgs.PropertyName));

for(int i=0;i<10;i++) 
{ 
    value.Value1 = i.ToString(); 
    value.Value2 = (i-1).ToString();
} 
```

输出：

```
Got a change for name:Value2
Got a change for name:Value1 
```

* * *

这是相同的，但具有扩展方法：

```
var valuesPropertyChanged =
    Observable.FromEventPattern<PropertyChangedEventArgs>(
                _vm,
                "PropertyChanged")
                .GroupBy(propchange => propchange.EventArgs.PropertyName)
                .Select(o => o.Throttle(TimeSpan.FromSeconds(1)))
                .Merge(); 
```

# php - 在 PHP 中使用 curl 下载文件

> ID：15157350
> 
> 赞同：-5
> 
> 时间：2013-03-01T12:05:22.360
> 
> 标签：php, curl, download

我有一个脚本，可以登录 Pacer.gov，然后显示几个破产法院电子案件归档系统的链接。

我有一组单独的脚本来处理我们从这些系统下载的原始数据文本文件，但必须先将它们上传到我的应用程序。

而不是所有这些下载和上传，我想知道是否有可能让我的 PHP 以某种方式拦截这个下载？

我很难把头绕在 cURL 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:32:08.540

我不确定你的问题是什么。如果您只是不知道如何使用 CURL - 这里有示例：

```
$oCurl = curl_init(); // initialize curl object

$url = 'http://domain.com/page';

curl_setopt($oCurl, CURLOPT_URL, $url); // set URL

$siteContent = curl_exec($oCurl); // you will get HTML or other file contents here 
```

# jvm - JNI 什么时候决定可以释放内存？

> ID：15157352
> 
> 赞同：2
> 
> 时间：2013-03-01T12:05:32.460
> 
> 标签：jvm, java-native-interface

当我将直接 ByteBuffer 返回给 JNI 时，它可以被 JVM/GC 回收多长时间？

假设我有这样的功能：

```
void* func()
{
  [ ... ]
  jobject result = env->CallStaticObjectMethod(testClass, doSomethingMethod);
  void* pointerToMemory = env->GetDirectBufferAddress(result);
  return pointerToMemory;

} 
```

JVM 不可能知道我要使用它多久`pointerToMemory`，对吧？如果我想暂时保留该地址和相应的内存怎么办？

假设我想绕过这个问题并将一个字节 [] 从 Java 返回到 JNI，如下所示：

```
ByteBuffer buf;
byte[] b = new byte[1000];
buf = ByteBuffer.wrap(b);
buf.order(ByteOrder.BIG_ENDIAN); 

return buf.array(); 
```

然后像上面一样做，我存储一个指向那个字节[]的指针，并想保留它一段时间。JVM 如何/何时/为什么会在 Java 的支持字节 [] 之后出现？

```
void* function()
{
  jbyteArray byteArr = (jbytearray)env->CallStaticObjectMethod(testClass, doSomethingMethod);
  jbyte *b= env->GetByteArrayElements(byteArr, 0);  
  return b;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:13:38.513

简短的回答是：如果函数实现了本机方法，则一旦返回，指针就会无效。

为避免这种情况，您应该为您打算在返回后保持有效的所有对象获取全局引用。有关详细信息，请参阅有关[本地和全局参考](http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/design.html#wp1242)的文档。

要更好地了解 JNI 如何管理来自本机代码的引用，请参阅[PushLocalFrame/PopLocalFrame 上的文档](http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/functions.html#push_local_frame)。

# jquery - 如何使用 $.ajax() 中的更多选项扩展 $.post()

> ID：15157354
> 
> 赞同：0
> 
> 时间：2013-03-01T12:05:37.463
> 
> 标签：jquery, ajax, http-post, extend

是否可以扩展 jQuery`$.post()`辅助函数的属性和选项。

我有时需要添加更多的属性`$.post()`，喜欢`async, beforeSend, contentType, context, crossDomain, error, global, headers, ifModified, mimeType, timeout, etc`但我避免使用`$.ajax()`，因为我太习惯使用`$.post()`，因为我的习惯。

* * *

**编辑：**是否可以覆盖/覆盖整个辅助插件/功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:34:54.713

这是添加您自己的参数的函数，它也会更新 get 方法。但是你可以清楚地看到它只是包装 $.ajax

（直接取自 jQuery 源代码）

```
jQuery.each( [ "get", "post" ], function( i, method ) {
    jQuery[ method ] = function( url, data, callback, type ) {
        // shift arguments if data argument was omitted
        if ( jQuery.isFunction( data ) ) {
            type = type || callback;
            callback = data;
            data = undefined;
        }

        return jQuery.ajax({
            type: method,
            url: url,
            data: data,
            success: callback,
            dataType: type
        });
    };
}); 
```

编辑 - 示例修改代码所有参数都是必需的

```
jQuery.each( [ "myPost" ], function( i, method ) {
    jQuery[ method ] = function( url, data, callback, type, errorCallback ) {
        return jQuery.ajax({
            type: method,
            url: url,
            data: data,
            success: callback,
            dataType: type,
            error: errorCallback
        });
    };
}); 
```

# winapi - Win32 上的证书验证功能

> ID：15157356
> 
> 赞同：2
> 
> 时间：2013-03-01T12:05:56.160
> 
> 标签：winapi, ssl, https

我正在寻找需要进行的函数调用序列，以验证作为 https 连接的一部分生成的证书，我遇到了[这个](http://msdn.microsoft.com/en-us/library/windows/desktop/aa382038%28v=vs.85%29.aspx)。我很好奇 MS 提供的 API 是否对证书进行主机名验证。还是由开发人员决定？

# single-sign-on - 打开 SSO Fedlet for .Net 更改主文件夹

> ID：15157357
> 
> 赞同：0
> 
> 时间：2013-03-01T12:05:58.403
> 
> 标签：single-sign-on

我有一个使用 Oracle 的 Fedlet 的 ASP.Net 应用程序。一切正常，但我想将配置从 App_Data 文件夹移动到 App_Data\Fedlet，因为我们所有的配置和扩展都位于 App_Data 中（在整齐组织的子文件夹中）。

我检查了 Fedlet.dll.config 文件，但找不到任何重新配置​​文件夹的方法，但如果有任何地方可以更改它，我猜那是更改它的地方。

任何指针都会非常感激，因为我一直在寻找几个小时

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T21:18:30.810

由于我在网上没有找到任何关于此的答案，而且我设法猜到了我的方法，我决定在这里发布答案，以供我自己和其他人将来参考。

如果您将网页放入子文件夹（例如 /pages/），那么只需将 app_data 文件夹放入新文件夹（例如 /pages/app_data/）

# c#-4.0 - 无法使用 C# 将 html 标记中的 \" 替换为 "

> ID：15157363
> 
> 赞同：0
> 
> 时间：2013-03-01T12:06:07.937
> 
> 标签：c#-4.0

我想用 C# 替换 a 。我无法使用 Regex.Replace 函数作为 follos 来实现这一点

正则表达式.Replace(html, "\\"", "\"");

再次执行此命令会产生原始输出

任何人都已经遇到过这样的问题，任何帮助将不胜感激。

问候，甘尼桑

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-01T12:30:13.977

首先`"\\""`会产生编译器错误，因为您只是转义一个反斜杠而不是引号。

您在这里使用了 2 种转义机制，一种来自 c# 编译器，另一种来自 regex 解释器。

意思是：

当您将此 C# 字符串作为 regex: 提供时`"\\\""`，编译后会有一个类似于 that 的字符串`\"`，然后由 regex 引擎解释，该引擎也`\`用作转义字符。因此正则表达式将转义`"`，因此您的代码将替换`"`为`"`

因此，如果您现在使用`"\\\\\""`，首先 c# 编译器将使用`\\"`它，然后正则表达式引擎将`\"`使用它（两者都`\`用作转义字符）

现在 c# 有一个很好的小功能，可以让这样的字符串更容易编写。

如果你`@`在你的字符串之前添加一个，`\`将不再是转义字符，但现在你必须`"`用`""`

这意味着`"\\\""`==`@"\"""`和`"\\\\\""`==`@"\\"""`

所以你可以写`Regex.Replace(html,@"\\""","\"")` 哪个更容易阅读`Regex.Replace(html,"\\\\\","\"")`

我想我这次做对了：D

# android - 连接到本地服务器上运行的 GCM 服务器

> ID：15157365
> 
> 赞同：5
> 
> 时间：2013-03-01T12:06:12.597
> 
> 标签：android, android-emulator, google-cloud-messaging

我正在使用 Google Cloud Messaging (GCM) 处理推送通知。我可以按照[本教程](http://androidv5.wordpress.com/2012/08/15/how-to-implement-google-cloud-messaging/)设置服务器和客户端。

该服务器在 Apache Tomcat6.0 (localhost) 和 Google APIs（API 级别 17）上的 Android 模拟器上运行。我有一个发件人 ID 和 API 密钥。从模拟器运行时，我收到一条成功的设备连接消息。此后不久，从服务器发送消息时显示以下错误。

```
com.google.android.gcm.server.InvalidRequestException: HTTP Status Code: 401()
com.google.android.gcm.server.Sender.sendNoRetry(Sender.java:211)
com.google.android.gcm.server.Sender.send(Sender.java:125)
com.google.android.gcm.demo.server.SendAllMessagesServlet.doPost(SendAllMessagesServlet.java:83)
javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

从其他帖子中，我了解到错误的 API 密钥是罪魁祸首。但就我而言，我确保我使用的是 API 控制台中的正确控制台。

顺便说一句，当我运行模拟器时，我看到一条消息“将 regId 发送到服务器”。什么是注册ID？它与发件人ID不同；看起来像一个编码的。

有什么突破吗？

**编辑**

问题终于解决了！Ant 未正确构建 WAR 文件。因此 API 密钥几乎不会更新。发现这个错误真是一场噩梦。感谢大家的投入！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T12:56:03.133

我建议您阅读 GCM 指南：

[适用于 Android 的 GCM 指南](http://developer.android.com/google/gcm/index.html)

发件人 ID 是一个常量，将用于 GCM 和您的服务器之间的通信。当您的手机注册到他的服务时，regsitratiomID (regID) 由 GCM 服务管理。

更好的定义：http: [//developer.android.com/google/gcm/gcm.html](http://developer.android.com/google/gcm/gcm.html)

发件人ID：

> 您从 API 控制台获取的项目编号，如入门中所述。发送者 ID 在注册过程中用于识别允许向设备发送消息的 Android 应用程序。

注册号：

> GCM 服务器发给 Android 应用程序的 ID，允许其接收消息。一旦 Android 应用程序拥有注册 ID，它就会将其发送到第 3 方应用程序服务器，该服务器使用它来识别已注册以接收给定 Android 应用程序消息的每个设备。换句话说，注册 ID 与运行在特定设备上的特定 Android 应用程序相关联。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-26T07:59:36.703

您尝试用于发送邮件的发件人帐户无法通过身份验证。可能的原因有：

1.  授权标头丢失或语法无效。
2.  作为密钥发送的项目编号无效。
3.  密钥有效但 GCM 服务已禁用。
4.  请求来自未在服务器密钥 IP 中列入白名单的服务器。

检查您在 Authorization 标头中发送的令牌是否是与您的项目关联的正确 API 密钥。您可以通过运行以下命令检查 API 密钥的有效性：

```
 api_key=YOUR_API_KEY

 curl --header "Authorization: key=$api_key" --header Content-Type:"application/json" https://android.googleapis.com/gcm/send  -d "{\"registration_ids\":[\"ABC\"]}" 
```

如果您想确认注册 ID 的有效性，可以将“ABC”替换为注册 ID。当 HTTP 状态码为 401 时发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T12:52:12.200

Sender ID 是您在 Google 控制台下创建的项目编号。

**注册号**

当您的应用程序注册到 GCM 时，它会获得注册 ID。为了传递消息，GCM 将使用此注册 ID 来识别您的设备 + 您的应用程序。您的 android 应用程序应将此注册 ID 发送到您的服务器，以便当服务器要向您发送消息时，它可以用注册 ID 标记它，因此 GCM 可以将其传递到正确的设备和正确的应用程序。

诊断注册ID是否成功与服务器共享（Get/Post），除非您不会收到任何消息。

# jquery - 如何验证样式 =display:none 的字段？

> ID：15157367
> 
> 赞同：1
> 
> 时间：2013-03-01T12:06:17.530
> 
> 标签：jquery, twitter-bootstrap, jquery-validate, hidden-field

我有一个带有 display:none 属性的字段。就像，当用户单击“是”单选按钮时，将出现文件上传字段，并且也会对文件上传进行验证。在这种情况下，我使用了**ignore[]**来制作该验证有效，但发生的情况是，即使我单击“否”，也会进行文件上传验证。

这是我的代码

```
 <li >
   <p>
    <label for="rad">radio label:
    </label><br>
    <input type="radio" name="rad" value="yes" style="width:20px">&nbsp; Yes&nbsp;&nbsp;</input>
    <input type="radio" name="rad" value="no" style="width:20px">&nbsp; No</input><br/>
    <label for="rad" class="error" style="display:none">This field is required</label>
   </p>
    <p>
        <input type="file" name="fupl" style="display:none;margin-top:10px" id="fup"/>
        <label for="fupl" class="error" style="display:none;color:red">This field is required</label>
    </p>
</li>
<br>
<li>
    <label>checkbox label
    </label><br><br>
    <input type="checkbox" name="cb" value="tick" style="width:20px">&nbsp;&nbsp;<small>checkbox field<small></input>
    <br>
    <label for="fee" class="error" style="display:none">This field is required</label>
</li>
<br>
<li>
<input type="submit" class="button" value="SUBMIT" style="float:right"/>
</li>
<script>
        $(document).ready(function()
        {
        $("input[type='radio']").change(function(){
        if($(this).val()=="yes")
        {
        $("#fup").show();
        }
        else
        {
        $("#fup").hide();
        }
        });
        });
    </script> 
```

这是我的jQuery

```
 $('#form').validate({
    ignore :[],
     rules: {   
        fupl: {
            required: true,
            accept:'docx|doc'
            },
        cb:
            {
            required:true
            }
         }
         }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:18:21.987

您可以在更改功能中添加文件上传规则，而不是将它们始终保留在其中：

```
var fuplRules = {
    required: true,
    accept: 'docx|doc'
};

$("input[type='radio']").change(function () {
    if ($(this).val() == "yes") {
        $("#fup").show().rules('add', fuplRules);
    } else {
        $("#fup").hide().rules('remove');
    }
}); 
```

或者，您可以保持现在的设置，只需`required: true`将`required: 'input[name="rad"][value="yes"]:checked'`. 这使用所需规则的[依赖表达式](http://docs.jquery.com/Plugins/Validation/Methods/required#dependency-expression)版本。

工作示例#1：http: [//jsfiddle.net/ryleyb/WFKfq/](http://jsfiddle.net/ryleyb/WFKfq/)

工作示例#2：http: [//jsfiddle.net/ryleyb/WFKfq/1/](http://jsfiddle.net/ryleyb/WFKfq/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:11:18.973

在您的验证脚本中使用`fup`而不是。`fup1`

# c# - 将 C# 连接到 SQL Server Compact 数据库

> ID：15157368
> 
> 赞同：6
> 
> 时间：2013-03-01T12:06:20.330
> 
> 标签：c#, sql, sql-server-ce

嗨，我正在尝试将 SQL Server 紧凑型数据库连接到我的程序，我想要一个从数据库中删除所有条目的按钮，当我按下所述按钮时，程序会引发异常并给出以下错误消息“与网络相关的或与 SQL Server 建立连接时发生特定于实例的错误。找不到服务器或无法访问该服务器。请验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供程序：SQL 网络接口，错误： 26 - 定位服务器/指定实例时出错）”

请帮忙？=]

对不起，代码在下面=]

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Data.SqlClient;
using System.Data.SqlServerCe;

namespace Booking_system_Final
{
    public partial class PendingJobs : Form
    {
        SqlConnection sc = new SqlConnection("Data Source=C:\\Users\\Administrator\\My Documents\\BMS_Data.sdf");
        public PendingJobs()
        {
            InitializeComponent();
        }

        private void PendingJobs_Load(object sender, EventArgs e)
        {
            // TODO: This line of code loads data into the 'bMSDataSet.Bookings' table. You can move, or remove it, as needed.
            this.bookingsTableAdapter.Fill(this.bMSDataSet.Bookings);
            // TODO: This line of code loads data into the 'bMS_DataDataSet1.Bookings' table. You can move, or remove it, as needed.

        }

        private void button1_Click(object sender, EventArgs e)
        {
            sc.Open();
            SqlCommand cmd = new SqlCommand("DELETE FROM Bookings");
            cmd.Connection = sc;
            cmd.ExecuteNonQuery();
            sc.Close();
            MessageBox.Show("Database Cleared");

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-01T19:13:19.153

尝试使用`SqlCeConnection`class 而不是`SqlConnection`：

```
SqlCeConnection sqlConnection1 = new SqlCeConnection();
sqlConnection1.ConnectionString = "Data Source = C:\\Users\\Administrator\\My Documents\\BMS_Data.sdf;Persist Security Info=False"; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-01T13:40:00.670

如果要连接到 SQL Server Compact，请使用 SqlCeConnection、SqlCeCommand 等。添加对 SQL Server Compact ADO.NET 提供程序 System.Data.SqlServerCe.dll 的引用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T12:26:40.180

看看这篇博客文章：[SQL SERVER – FIX : ERROR : (provider: Named Pipes Provider, error: 40 – Could not open a connection to SQL Server)](http://blog.sqlauthority.com/2009/05/21/sql-server-fix-error-provider-named-pipes-provider-error-40-could-not-open-a-connection-to-sql-server-microsoft-sql-server-error/)

这将逐步完成您可能需要做的事情：

简而言之：

> 1.  SQL Server 应该已启动并正在运行。
> 2.  在 SQL Server 配置中启用 TCP/IP
> 3.  在 Windows 防火墙中打开端口
> 4.  启用远程连接
> 5.  启用 SQL Server 浏览器服务
> 6.  在防火墙中创建 sqlbrowser.exe 的异常
> 7.  重新创建别名

关于每个步骤的位置和操作，您将在文章中找到更深入的信息。

您可能还想查看[SQL Server Compact 的连接字符串](http://connectionstrings.com/sql-server-ce)。在那里，您可以找到可以尝试使用的连接字符串的其他变体。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T13:03:28.957

您似乎使用了错误的连接字符串。（或者文件路径错误）。查看[http://www.connectionstrings.com/sql-server-ce](http://www.connectionstrings.com/sql-server-ce)了解连接字符串选项。

# c# - c# net2.0 Console App 在一个字符串中合并参数

> ID：15157370
> 
> 赞同：2
> 
> 时间：2013-03-01T12:06:23.977
> 
> 标签：c#, c#-2.0

我有一个控制台应用程序，它接收可变数量的参数。我需要删除第一个元素（args [0]）并将所有其他元素合并为一个字符串。

我如何在 .NET 2.0 中做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T12:09:05.583

```
string result = string.Join(" ", args, 1, args.Count-1); 
```

这将连接除第一个以外的所有参数，并用空格分隔它们。

请参阅[http://msdn.microsoft.com/en-us/library/tk0xe5h0.aspx](http://msdn.microsoft.com/en-us/library/tk0xe5h0.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:13:41.757

您可以执行以下操作：

如果您需要分隔符：

```
string delim = "%";
string merge = args[1];

for (int i = 2; i < args.Length; i++)
{
    merge = delim + args[i];
} 
```

如果您不需要分隔符：

```
args[0] = "";
string merge = String.Join("", args); 
```

# xml - XSLT——计算元素内的属性

> ID：15157372
> 
> 赞同：1
> 
> 时间：2013-03-01T12:06:26.130
> 
> 标签：xml, xslt

我有类似的 XML

```
<BOXHEAD>
  <COLHEAD H="1">Item</COLHEAD>
  <COLHEAD H="2">Cost</COLHEAD>
  <COLHEAD H="3">Direct</COLHEAD>
  <COLHEAD H="3">In-Direct</COLHEAD>
  <COLHEAD H="2">Revenue</COLHEAD>
  <COLHEAD H="3">1989</COLHEAD>
  <COLHEAD H="3">1990</COLHEAD>
</BOXHEAD> 
```

我尝试过类似的方法来转换为 HTML COLSPAN：

```
<xsl:if test="@H=2">
    <xsl:variable name="descendants" select="following-sibling::COLHEAD[@H = 3]"/>
    <xsl:variable name="number_of_columns_under_this" select="count($descendants)"/>
    <xsl:if test="$number_of_columns_under_this &gt; 1">
        <xsl:attribute name="colspan">
            <xsl:value-of select="$number_of_columns_under_this"/>
        </xsl:attribute>
    </xsl:if>
</xsl:if> 
```

期望的结果：“成本”列应该出现，`colspan="2"`但当然会`count()`选择块中的所有四个`@H="3"`。我正在尝试将那个古老的 SGML 变成一个 HTML 表格。所需的输出与此类似：

```
<table>
<tbody>
<tr>
    <td colspan="1" rowspan="2">Item</td>
    <td colspan="2" rowspan="1">Cost</td>
    <td colspan="2" rowspan="1">Revenue</td>
</tr>
<tr>
    <td>Direct</td>
    <td>In-Direct</td>
    <td>1989</td>
    <td>1990</td>
</tr>
</tbody>
</table> 
```

事实证明，计算行跨度和列跨度对我来说很困难。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T12:17:59.903

你可以使用这样的技巧

```
<xsl:variable name="descendants"
    select="following-sibling::COLHEAD[@H = 3]
       [generate-id((preceding-sibling::COLHEAD[@H=2])[last()])
         = generate-id(current())]"/> 
```

这将选择所有与我们当前正在查看的*最近*前同级的`COLHEAD[@H=3]`元素。*`@H=2`*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T14:04:05.917

如果您使用的是 XSLT 2.0，您可能应该为此使用位置分组，例如`<xsl:for-each-group group-starting-with="[@H='2']>`. 但如果不确切知道您想要什么输出，就很难为您提供更多细节。*

# iphone - iphone中没有选择多个图像

> ID：15157376
> 
> 赞同：0
> 
> 时间：2013-03-01T12:06:37.377
> 
> 标签：iphone, ios

我是 iPhone 编程的新手。使用下面的代码，我在缩略图中显示图像。在那里我们可以选择多个图像，也可以选择和取消选择图像。选择一些图像后，它会在下一个视图中显示所选图像。为此，我使用了另一种方法。但问题是它在缩略图中显示图像但如果我选择任何图像意味着它显示了一些异常。任何机构都可以告诉我如何解决这个问题吗？

```
- (void)viewDidLoad
{   
    self.title=@"All Images";
        mImageSelected=[[NSMutableArray alloc]init];
    self.view.backgroundColor=[UIColor whiteColor];
    mFirst=[[UIImageView alloc]initWithImage:[UIImage imageNamed:@"one.jpg"]];
    mFirst.frame=CGRectMake(10, 10, 60, 50);

    UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] 
                                         initWithTarget:self 
                                         action:@selector(actionHandleTapOnImageView:)];
    mFirst.userInteractionEnabled = YES;
    [mFirst addGestureRecognizer:singleTap];
    [self.view addSubview:mFirst];
    msSec=[[UIImageView alloc]initWithImage:[UIImage imageNamed:@"two.jpg"]];
    msSec.frame=CGRectMake(80, 10, 60, 50);
    UITapGestureRecognizer *secsingleTap = [[UITapGestureRecognizer alloc] 
                                         initWithTarget:self 
                                            action:@selector(actionHandleTapOnImageView:)];
    msSec.userInteractionEnabled = YES;
    [msSec addGestureRecognizer:secsingleTap];

    [self.view addSubview:msSec];
    mThird=[[UIImageView alloc]initWithImage:[UIImage imageNamed:@"three.jpg"]];
    mThird.frame=CGRectMake(150, 10, 60, 50);
    UITapGestureRecognizer *trdsingleTap = [[UITapGestureRecognizer alloc] 
                                            initWithTarget:self 
                                            action:@selector(actionHandleTapOnImageView:)];
    mThird.userInteractionEnabled = YES;
    [mThird addGestureRecognizer:trdsingleTap];

    [self.view addSubview:mThird];
    m4th=[[UIImageView alloc]initWithImage:[UIImage imageNamed:@"four.jpg"]];
    m4th.frame=CGRectMake(220, 10, 60, 50);
    UITapGestureRecognizer *frthsingleTap = [[UITapGestureRecognizer alloc] 
                                            initWithTarget:self 
                                             action:@selector(actionHandleTapOnImageView:)];

    m4th.userInteractionEnabled = YES;
    [m4th addGestureRecognizer:frthsingleTap];
    [self.view addSubview:m4th];
    m5th=[[UIImageView alloc]initWithImage:[UIImage imageNamed:@"five.jpg"]];
    m5th.frame=CGRectMake(10, 70, 60, 50);
    UITapGestureRecognizer *fifthsingleTap = [[UITapGestureRecognizer alloc] 
                                             initWithTarget:self 
                                              action:@selector(actionHandleTapOnImageView:)];

    m5th.userInteractionEnabled = YES;
    [m5th addGestureRecognizer:fifthsingleTap];
    [self.view addSubview:m5th];
    UIButton *theSshowButton=[[UIButton alloc]init];
    theSshowButton.frame=CGRectMake(100, 300, 100, 30);
    theSshowButton.layer.borderWidth=2;
    theSshowButton.layer.borderColor=[UIColor purpleColor].CGColor;
    theSshowButton.layer.cornerRadius=5;
    theSshowButton.backgroundColor=[UIColor greenColor];
    [theSshowButton setTitle:@"Show" forState:UIControlStateNormal];
    [theSshowButton setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
    [theSshowButton addTarget:self action:@selector(show) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:theSshowButton];

    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}
-(void)actionHandleTapOnImageView:(UITapGestureRecognizer *) in_ImageSenderTap
{ 
if (in_ImageSenderTap.view.tag ==0 )
  {

     mTick=[[UIImageView alloc]initWithImage:[UIImage imageNamed: @"mark.jpg"]];
     mTick.frame=CGRectMake(0, 0, in_ImageSenderTap.view.frame.size.width*0.3,  in_ImageSenderTap.view.frame.size.height*0.4);

      [mImageSelected addObject:[in_ImageSenderTap.view accessibilityIdentifier]];

        [in_ImageSenderTap.view addSubview:mTick];

      in_ImageSenderTap.view.tag=1;
    }
       else
    {
    for (UIView *subviews in in_ImageSenderTap.view.subviews)
        {

            UIImageView *theSubview=(UIImageView*)subviews;

            [theSubview removeFromSuperview];
            [mImageSelected removeObjectIdenticalTo:[in_ImageSenderTap.view accessibilityIdentifier]];

        }
        in_ImageSenderTap.view.tag=0;
    }

} 
```

像这样它表现出一些期望。

```
2013-03-01 12:01:21.332 ImageStuf[588:11303] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[__NSArrayM insertObject:atIndex:]: object cannot be nil'
*** First throw call stack:
(0x159a012 0x12a7e7e 0x154db6a 0x154da20 0x37e0 0x4b685a 0x4b599b 0x4b70df 0x4b9d2d 0x4b9cac 0x4b1a28 0x21e972 0x21ee53 0x1fcd4a 0x1ee698 0x25fcdf9 0x25fcad0 0x150fbf5 0x150f962 0x1540bb6 0x153ff44 0x153fe1b 0x25fb7e3 0x25fb668 0x1ebffc 0x1cd2 0x1c05 0x1)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

如果我在此方法中在代码下方评论 `-(void)actionHandleTapOnImageView:(UITapGestureRecognizer *) in_ImageSenderTap`意味着它工作正常，但它没有将图像存储在数组中。任何人都可以告诉我如何解决这个问题，谢谢 Aslam

```
[mImageSelected addObject:[in_ImageSenderTap.view accessibilityIdentifier]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:13:55.370

您尝试将 nil 插入 NSArray，因此引发了异常。您应该检查要插入的元素。

我认为您可以使用[ALAssetLibrary](http://developer.apple.com/library/ios/#documentation/AssetsLibrary/Reference/ALAssetsLibrary_Class/Reference/Reference.html)来选择多个图像：

```
[_assetsLibrary enumerateGroupsWithTypes:ALAssetsGroupAll usingBlock:^(ALAssetsGroup *group, BOOL *stop) {
    if (group) {
        [self.groupArray addObject:group];
    }
} failureBlock:^(NSError *error) {
    NSLog(@"Group not found!\n");
}]; 
```

* * *

```
- (void)getImages
{
    if (!self.assetsArray) {
        _assetsArray = [[NSMutableArray alloc] init];
    }

    if (!self.assetsLibrary) {
        _assetsLibrary = [[ALAssetsLibrary alloc] init];
    }

    @autoreleasepool {
        [self.assetsGroup enumerateAssetsUsingBlock:^(ALAsset *result, NSUInteger index, BOOL *stop) {
            if (result) {
                TTAsset *ttAsset = [[TTAsset alloc] initWithAsset:result];
                [self.assetsArray addObject:ttAsset];
                [ttAsset release], ttAsset = nil;
            }
        }];
    }

    [self.tableView reloadData];
} 
```

* * *

之后，您可以使用 ALAsset 的 thumbnail 属性。

[ELCImagePickerController](https://github.com/elc/ELCImagePickerController)是一个很好的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:13:38.280

对于多项选择，您可以使用[PSTCollectionView](https://github.com/steipete/PSTCollectionView)。这样一个很棒的库，这将在 iOS 5 中作为 gridView 工作，在 iOS6 之上它作为 UICollectionView 工作。

一切顺利！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T13:04:44.490

首先`accessibilityIdentifier`，当您可以添加缩略图本身时，为什么还要麻烦插入数组呢？这将确保您不添加`nil`，这是导致崩溃的原因。您没有设置`accessibilityIdentifier`缩略图。

其次，为什么要创建 5 个实例`UITapGestureRecognizer`？只需在您使用相同的实例时`addGestureRecognizer:`，就不需要它的 5 个版本。

# ember.js - ComputedProperty 未更新

> ID：15157380
> 
> 赞同：1
> 
> 时间：2013-03-01T12:06:44.880
> 
> 标签：ember.js

我有这个测试应用程序，每次单击应用程序视图时都应该打印“过滤”和“更改”，因为调用了计算属性。但是，只有在使用空数组更新属性时才会触发属性绑定：

```
window.App = Ember.Application.create({
  Settings: Ember.Object.create({
    filter: []
  }),

  ApplicationView: Ember.View.extend({
    click: function(event) {
      filter = App.get('Settings.filter');
      console.dir(filter);
      if (App.get('Room.filtered')) {
        filter = filter.filter(function(item) {
          return item != App.get('Room.name');
        });
      } else {
        filter.push(App.get('Room.name'));
      }
      App.set('Settings.filter', filter);
    }
  })
});

Room = Ember.Object.extend({
 name: "test",
 _filterer: function() {
   console.dir("changed");
 }.observes('filtered'),
 filtered: function() {
   console.dir("filtered");
   filter = App.get('Settings.filter');
   for (var i = 0; i < filter.length; i++) {
     if (filter[i] == this.get('name')) return true;
   }
   return false;
 }.property('App.Settings.filter', 'name').volatile()
});

App.Room = Room.create();

setTimeout(function() {App.set('Settings.filter', ['test']); }, 3000); 
```

这是 jsbin：http: [//jsbin.com/edolol/2/edit](http://jsbin.com/edolol/2/edit)

为什么只有在将 Setting 设置为空数组时才触发属性绑定？为什么在超时手动执行时会触发？

# 更新

这是一个有效的 jsbin：http: [//jsbin.com/edolol/11/edit](http://jsbin.com/edolol/11/edit)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T13:39:37.350

当您要从数组中添加/删除项而不更改整个数组时，您需要通知计算属性以观察数组中的项，而不仅仅是数组本身：

语法是：

```
function() {
}.property('App.settings.filter.@each') 
```

它使用的原因`setTimeout`是因为您要替换整个数组而不是其中的项目。

我修复了你的 jsbin：http: [//jsbin.com/edolol/10/edit](http://jsbin.com/edolol/10/edit)

我修复了一些其他的小东西，比如`filter.push`现在`filter.pushObject`（使用 Ember 的[`MutableArray`](http://emberjs.com/api/classes/Ember.MutableArray.html)）。

更改过滤器数组 ( `filter = filter.filter()`) 后，您需要将新`filter`变量设置为属性：`App.set('Settings.filter', filter);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:38:12.510

问题是我习惯于`.push()`添加`App.Settings.filter`和`.filter()`删除它。第一种方法不会创建新数组，后者会。这就是为什么从该数组中删除有效但不添加的原因。

我认为使用`Ember.ArrayProxy`和观察者`.@each`会起作用。但那是我不知道的。这个小问题可以通过创建一个新数组来解决。

```
filter = App.get('Settings.filter').slice(0); 
```

# javascript - 从中检索选定的 url 路径

> ID：15157387
> 
> 赞同：0
> 
> 时间：2013-03-01T12:07:14.897
> 
> 标签：javascript, jquery, html

我使用普通文件类型我只想知道如何检索我尝试执行 .val() 函数的选定文件路径，但在这种情况下，我只能归档文件名而不是文件存储在我的整个位置本地机器可以请任何人帮助我解决这些问题....

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:13:37.250

您不能这样做，因为：这是所有浏览器中的安全功能。

客户端上的完整路径对您不可用。浏览器充当中介，允许用户选择文件，并将内容发送到服务器，但绝不允许页面知道任何超过它绝对必须知道的信息。

# python - 带有多个文本框的框架中的 Tkinter 滚动条

> ID：15157388
> 
> 赞同：0
> 
> 时间：2013-03-01T12:07:15.293
> 
> 标签：python, python-2.7, tkinter, scrollbar

**问题**

我怎样才能有一个滚动条来移动整个 Tkinter 框架？*注意：*我使用的是 Python 2.7.3。

**代码和解释**

我有这个代码来定义滚动条

```
 scrollbar = Scrollbar(soeg)
        scrollbar.pack(side=RIGHT, fill="y") 
```

这段代码用于定义文本框

```
 h = 0
        s = 0
        for i in dom_nodup:

            abc = dom_nodup[h]
            text = Text(soeg, bg="brown", fg="white", height="10", width="60")          
            text.insert(INSERT, "%s \n" % abc[0])
            text.insert(END, "%s \n\n\n" % abc[1])
            text.pack()
            h += 1  
            s += 1 
```

为每个文本实体创建一个新的文本框，以便以后更轻松地进行概述（计划有一个按钮来显示/隐藏输入）。

滚动条存在但不起作用

![图片](../Images/f05d0385e6ca1a5acde83800e11e5893.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:27:29.677

我建议您使用`ScrolledText`小部件。它会*自动*为每个文本小部件添加一个滚动条，并具有与`Text`. 下面是一个简短的例子来说明如何做到这一点。

```
from Tkinter import * #Import the Tkinter module
from ScrolledText import ScrolledText #import the scrolled text module
message = "I \n am \n scroll \n able. \n\n\n\n\n\n Yes I am!"
class Application(Frame): #Create a frame for the widgets

    def __init__(self, master):  #initialize the grid and widgets
        Frame.__init__(self,master)
        self.grid()
        self.widgets()
    def widgets(self):
        self.mytext = ScrolledText(self, width = 10) #Creates the widget
        self.mytext.grid() #Places it

root = Tk()
root.title("My Text Example")
#make my screen dimensions work

root.geometry("500x1000")
app = Application(root)

root.mainloop() 
```

有关更多信息，请参阅[Tkinterbook](http://effbot.org/tkinterbook/)和[这个问题](https://stackoverflow.com/questions/13832720/python-tkinter-scrollbar-and-text-field)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:48:05.627

要使滚动条正常工作，您必须做两件事：您必须告诉它要滚动哪个可滚动小部件，并且您必须告诉可滚动小部件要根据当前位置更新哪个滚动条。

```
scrollbar.configure(command=text.yview)
text.configure(yscrollcommand=scrollbar.set) 
```

# java - 避免安全警报“您要运行此应用程序吗？” 对于 JWS 应用程序

> ID：15157397
> 
> 赞同：4
> 
> 时间：2013-03-01T12:07:31.760
> 
> 标签：java, security, netbeans, jnlp, java-web-start

我们有一个 Java 应用程序，它使用 RxTx 来更新我们游戏机的固件。为了避免用户通过 WebStart 在我们的网站上启动 Java 应用程序时出现安全警报，我们购买了一个受信任的证书并使用该证书对应用程序进行签名。所有检查都表明它已成功签名，如果我在我的 Mac(OS X 10.6.8) 上使用 Java 1.6.0_41 通过 Safari 启动应用程序，它就会启动而没有任何抱怨。

但是，如果我在 Windows 8 机器上使用 IE9 启动它，我会收到一条警报，说“你想运行这个应用程序吗？这个应用程序将以不受限制的访问权限运行，这可能会使你的计算机和个人信息处于危险之中。只有在你信任发布者。此应用程序的数字签名已过期。更多信息”。

如果我点击更多信息，我会得到“此应用程序将在运行时不受限制地访问您计算机上的个人文件和其他设施（网络摄像头、麦克风）。

尽管应用程序具有数字签名，但应用程序的关联文件 (JNLP) 却没有。数字签名可确保文件来自供应商并且未被更改。

[数字签名是使用受信任的证书生成的。”我试图找到一个解决方案如何不收到此消息并认为我需要做的是签署 JNLP 文件（即按照此处](https://www.servoy.com/forum/viewtopic.php?f=6&t=15329#p82360)指出的将其复制到 jar 中）但是什么我找不到如何让 NetBeans 做到这一点！我使用的是 NetBeans 6.9.1。任何人都知道如何做到这一点，是否足以签署 JNLP？

为了验证文件是否正确签名，我执行了以下操作：

```
jarsigner -verify -certs -verbose OribooDesktopClient.jar 

    6396 Thu Feb 28 17:14:14 CET 2013 META-INF/MANIFEST.MF
    6354 Thu Feb 28 17:14:14 CET 2013 META-INF/MOVINTOF.SF
    1843 Thu Feb 28 17:14:14 CET 2013 META-INF/MOVINTOF.RSA
       0 Thu Feb 28 17:07:28 CET 2013 META-INF/
       0 Thu Feb 28 17:07:26 CET 2013 oribooDesktopClient/
       0 Thu Feb 28 17:07:26 CET 2013 oribooDesktopClient/resources/
       0 Thu Feb 28 17:07:26 CET 2013 oribooDesktopClient/resources/busyicons/
sm      3912 Thu Feb 28 17:07:26 CET 2013 oribooDesktopClient/BBDatabase.class

  X.509, CN=Movinto fun AB, O=Movinto fun AB, STREET=?rev?gen 138, L=?re, ST=J?mtland, OID.2.5.4.17=83013, C=SE
  [certificate is valid from 2/28/13 1:00 AM to 3/1/14 12:59 AM]

sm      2497 Thu Feb 28 17:07:26 CET 2013 oribooDesktopClient/Binary.class

  X.509, CN=Movinto fun AB, O=Movinto fun AB, STREET=?rev?gen 138, L=?re, ST=J?mtland, OID.2.5.4.17=83013, C=SE
  [certificate is valid from 2/28/13 1:00 AM to 3/1/14 12:59 AM]
.... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T12:14:57.813

重要的部分是：

> 此应用程序的数字签名已过期。

有关详细信息，请参阅[Java 安全性对话框](https://stackoverflow.com/q/12986333/418556)的外观，但您应该期待以下内容：

![过期证书](../Images/81d22010148df7139940c0d093c2a1b1.png)

要删除“过期”消息，答案是更新证书并再次签署罐子。该对话框仍将显示大意的文字：

> 此应用程序将以不受限制的访问权限运行，这可能会使您的计算机和个人信息面临风险。仅当您信任发布者时才运行此应用程序。

然而，差异将是：

*   “始终信任”将默认为 true。
*   带有感叹号的黄色菱形将更改为更友好的东西。
*   “数字签名已过期”消息以及左下方的黄色盾牌图像将不存在。

# c# - 将 Visual Studio 解决方案的构建顺序输出到文本文件

> ID：15157400
> 
> 赞同：8
> 
> 时间：2013-03-01T12:07:44.927
> 
> 标签：c#, visual-studio, msbuild

有没有办法通过命令行将构建顺序输出到文本文件？

解释一下：我们使用多个源分支，每个分支都有 100 多个项目的大型解决方案。我需要编写构建脚本来从命令行构建这些解决方案。然后，我们可以在分支上定制解决方案，使其仅包含团队正在处理的项目的项目参考。这应该会大大增加解决方案的加载时间并减轻开发人员和我的挫败感，我希望 :)

我将继续寻找，也许会考虑使用 C# 和 VS 提供的 API。我们正在使用 2012 更新 1。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T15:12:44.603

这是 Visual Studio 插件项目的理想选择。

1.  创建一个新的**Visual Studio 加载项**项目。
2.  在项目创建向导中，确保在**选择加载项选项**步骤中选择以下配置（其他步骤并不重要，我假设您将使用 C#）：

![在此处输入图像描述](../Images/31b0d5fadabd662ba1ba1671d653c4d7.png)

2.  在*Connect.cs*文件中，添加以下字段：

    ```
    private BuildEvents _buildEvents;
    private Events _events;
    private bool buildEventConnected = false; 
    ```

3.  并相应地添加/修改这些方法：

    ```
    public void OnConnection(object application, ext_ConnectMode connectMode, object addInInst, ref Array custom)
    {
        _applicationObject = (DTE2)application;
        _addInInstance = (AddIn)addInInst;
        _events = _applicationObject.Events;
        _buildEvents = _events.BuildEvents;

        if (connectMode != ext_ConnectMode.ext_cm_UISetup && !buildEventConnected)
        {
            _buildEvents.OnBuildDone +=
                new _dispBuildEvents_OnBuildDoneEventHandler(BuildEvents_OnBuildDone);
            buildEventConnected = true;
        }
    }

    private void BuildEvents_OnBuildDone(vsBuildScope Scope, vsBuildAction Action)
    {
        const string BUILD_OUTPUT_PANE_GUID = "{1BD8A850-02D1-11D1-BEE7-00A0C913D1F8}";
        TextDocument txtOutput = default(TextDocument);
        TextSelection txtSelection = default(TextSelection);
        Window vsWindow = default(Window);
        vsWindow = _applicationObject.Windows.Item(EnvDTE.Constants.vsWindowKindOutput);
        OutputWindow vsOutputWindow = default(OutputWindow);
        OutputWindowPane objBuildOutputWindowPane = default(OutputWindowPane);
        vsOutputWindow = (OutputWindow)vsWindow.Object;
        foreach (OutputWindowPane objOutputWindowPane in vsOutputWindow.OutputWindowPanes)
        {
            if (objOutputWindowPane.Guid.ToUpper() == BUILD_OUTPUT_PANE_GUID)
            {
                objBuildOutputWindowPane = objOutputWindowPane;
                break;
            }
        }
        txtOutput = objBuildOutputWindowPane.TextDocument;
        txtSelection = txtOutput.Selection;
        txtSelection.StartOfDocument(false);
        txtSelection.EndOfDocument(true);
        objBuildOutputWindowPane.OutputString(System.DateTime.Now.ToString());
        txtSelection = txtOutput.Selection;
        var solutionDir = System.IO.Path.GetDirectoryName(_applicationObject.Solution.FullName);
        System.IO.File.WriteAllText(solutionDir + "\\build_output.log", txtSelection.Text);
    }

    public void OnDisconnection(ext_DisconnectMode disconnectMode, ref Array custom)
    {
        if (buildEventConnected)
        {
            _buildEvents.OnBuildDone -= new _dispBuildEvents_OnBuildDoneEventHandler(BuildEvents_OnBuildDone);
            buildEventConnected = false;
        }
    } 
    ```

就是这样，在每次构建时，您都会将输出发送到`build_output.log`解决方案文件夹中的文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-10-09T09:15:31.253

快速的方法是做一个“干净的解决方案”，这样你就可以在构建日志中看到倒序。

# liferay-6 - Liferay 与支柱弹簧休眠

> ID：15157402
> 
> 赞同：0
> 
> 时间：2013-03-01T12:07:49.530
> 
> 标签：liferay-6

我正在使用 Liferay 6.2.0 并使用 Struts2 + spring 3.5 和 hibernate 3 框架创建一个 portlet

没有什么可让我担心的。

但是，每当我在 Liferay 中部署我的 portlet 时，就会发生以下错误。它对我没有害处。我的 portlet 可以按照我的喜好工作。

但我想删除以下错误：

> 11:51:39,745 错误 [http-bio-8080-exec-12][GZipFilter:81] java.lang.ClassCastException：java.math.BigInteger 无法转换为 java.lang.String java.lang.ClassCastException：java. math.BigInteger 无法在 com.liferay.portal.servlet.BrowserSnifferImpl.getUserAgent(BrowserSnifferImpl.java:357) 处转换​​为 java.lang.String

…………………………………………………………………………

> 11:51:39,745 错误 [http-bio-8080-exec-21][GZipFilter:81] java.lang.ClassCastException：java.math.BigInteger 无法转换为 java.lang.String java.lang.ClassCastException：java. math.BigInteger 不能在 com.liferay.portal.servlet.BrowserSnifferImpl.isMozilla(BrowserSnifferImpl.java:216) 的 com.liferay.portal.servlet.BrowserSnifferImpl.getUserAgent(BrowserSnifferImpl.java:357) 处转换​​为 java.lang.String在 com.liferay.portal.servlet.BrowserSnifferImpl.isFirefox(BrowserSnifferImpl.java:140)

为什么会出现这个错误？？？？

# javascript - 如何在 jQuery 中使用数据属性？

> ID：15157403
> 
> 赞同：2
> 
> 时间：2013-03-01T12:07:50.383
> 
> 标签：javascript, jquery, html, select, attributes

我的 jQuery 选择 value 属性。如何更改我的 jQuery 以选择数据属性“data-price”？

HTML：

```
<span id="priceToSwap3"">$238</span>

<select id="trapsize">
 <option data-price="238">item1</option>
 <option data-price="288">item2</option>
</select>

<select id="trapfabric">
 <option data-price="0">item3</option>
 <option data-price="20">item4</option>
</select> 
```

jQuery：

```
$('#trapfabric, #trapsize').on('change', function() {
  var $selected = $('#trapfabric, #trapsize').children(":selected");

  sum = parseInt($('#trapsize').val()) + parseInt($('#trapfabric').val());
  $('#priceToSwap3').html('$' + sum
    );
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T12:10:32.953

获取数据属性`$(el).data('price')`

```
var sum = $('#trapsize option:selected').data('price') + $('#trapfabric option:selected').data('price'); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/aYXfM/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T12:10:19.257

试试这个

```
 $('#trapsize option:selected').data('price'); 
```

使用您的代码

```
$('#trapfabric, #trapsize').on('change', function() {
  sum = parseInt($('#trapsize option:selected').data('price')) + parseInt($('#trapfabric option:selected').data('price'));
  $('#priceToSwap3').html('$' + sum); 
}); 
```

[这里的](http://jsfiddle.net/bipen/rN58S/2/)例子小提琴

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T12:10:15.750

`$('option').attr('data-price');`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T12:11:26.187

```
attr("data-price"); 
```

或者

```
data("price"); 
```

后者是优选的方式。

* * *

在您的代码中，它将是：

```
sum = parseInt($('#trapsize option:selected').data('price')) + parseInt($('#trapfabric option:selected').data('price')); 
```

* * *

更多关于`data()` [这里](http://api.jquery.com/data/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T12:11:33.107

尝试：

```
 $('#trapsize option:selected').data('price');  

 $('#trapfabric option:selected').data('price'); 
```

你的功能应该是；

```
$('#trapfabric, #trapsize').on('change', function() {
   sum = parseInt($('#trapsize option:selected').data('price')) + parseInt($('#trapfabric option:selected').data('price'));
   $('#priceToSwap3').html('$' + sum);
}) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-01T12:11:33.177

您可以使用 jquery **attr**

```
$("your dom").attr("data-price") 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-10-14T05:49:37.707

甚至您可以根据属性获取和设置值

```
$("[data-price=238]").attr("data-price", 0); 
```

# iphone - 设备上的 iphone EXC_BAD_ACCESS (SIGBUS)

> ID：15157411
> 
> 赞同：0
> 
> 时间：2013-03-01T12:08:28.200
> 
> 标签：iphone, xcode, exc-bad-access, jailbreak

好吧，我采用了最初在[这里](http://code.google.com/p/iphone-wireless/wiki/Stumbler) 和后来[在这里](http://blog.guvenergokce.com/iphone-wireless-scanner-ios5/170/)制作的 iOS stumbler 应用程序， 并添加了一大堆功能，例如按用户定义的时间间隔进行实时扫描等。好吧，除了实际扫描到观点。由于该工具的性质，它只能在越狱手机上运行，​​因此也不能真正在模拟器上运行（好吧，我用它来测试 GUI 和其他东西，但不是实际扫描。）我的问题是扫描仪有通常运行 3-4 分钟，我得到一个`EXC_BAD_ACCESS(code=2, address=0x....)` 我已经阅读了有关使用僵尸等的各种线程，并且我在设置下启用了它，但无济于事。我当前的设置是：xcode 4.6 在 iphone 4 5.1.1 和 4s 6.1.1 以及另一个朋友在 4s 5.1.1 上运行，结果相同。

除了我自己调用的日志外，没有控制台输出，这表明在扫描循环结束后，某些原因导致了崩溃。这是扫描循环：

```
-(void)collectData{
if([[RefresherSingleton sharedRefresher].refresh isEqualToString:@"NO"]){
    return;
}
LogInfo(@"Current ESSID:%@",ESSID);
network=[self getNetwork:ESSID];
NSNumber *RSSI=[network objectForKey:@"RSSI"];
NSNumber *noise=[network objectForKey:@"NOISE"];
NSString *time=[dateFormatter stringFromDate:[NSDate date]];
if(!RSSI)
    RSSI=[NSNumber numberWithInt:666];
if(!noise)
    noise=[NSNumber numberWithInt:666];
if(!time)
    time=@"";
NSDictionary *data = [[NSDictionary alloc] initWithObjectsAndKeys:time,@"Time",RSSI, @"RSSI", noise, @"Noise",BSSID,@"BSSID",channel,@"Channel", nil];
[[DataCollection sharedDataCollection].dataCollection addObject:data];
LogInfo(@"%@",data);
//pass the data directly to processData
[self processData];

int delay=[[NSUserDefaults standardUserDefaults] stringForKey:@"interval_preference"].integerValue;
LogInfo(@"Delay set to %d",delay);
if(delay>1)
    [self performSelector:@selector(collectData) withObject:nil afterDelay:delay-1];
else
    [self performSelector:@selector(collectData) withObject:nil afterDelay:0];
LogInfo(@"About to loop");
[[NSRunLoop currentRunLoop] run];
LogInfo(@"Should have looped");

} 
```

我在代码等上使用ARC。循环运行了很长一段时间，然后就崩溃了。关于如何缩小范围的任何建议？这也是iphone崩溃日志：

```
Incident Identifier: D76B253D-4151-4B59-8C67-3D31D8189CD2  
CrashReporter Key:   0703081b8fe87291ddb896a2ba4e4dfc51a354d4  
Hardware Model:      iPhone3,1  
Process:         WifiTool [4957]  
Path:            /Applications/WifiTool.app/WifiTool  
Identifier:      WifiTool  
Version:         ??? (???)  
Code Type:       ARM (Native)  
Parent Process:  launchd [1]  

Date/Time:       2013-03-01 19:09:45.494 +0900  
OS Version:      iPhone OS 5.1.1 (9B206)  
Report Version:  104  

Exception Type:  EXC_BAD_ACCESS (SIGBUS)  
Exception Codes: KERN_PROTECTION_FAILURE at 0x002bc464  
Crashed Thread:  3  

Thread 0 name:  Dispatch queue: com.apple.main-thread  
Thread 0:  
0   libsystem_kernel.dylib          0x31a00004 mach_msg_trap + 20  
1   libsystem_kernel.dylib          0x31a001fa mach_msg + 50  
2   CoreFoundation                  0x3782d3ec __CFRunLoopServiceMachPort + 120  
3   CoreFoundation                  0x3782c0ea __CFRunLoopRun + 818  
4   CoreFoundation                  0x377af49e CFRunLoopRunSpecific + 294  
5   CoreFoundation                  0x377af366 CFRunLoopRunInMode + 98  
6   GraphicsServices                0x33f6e432 GSEventRunModal + 130  
7   UIKit                           0x3155bcce UIApplicationMain + 1074  
8   WifiTool                        0x000d4862 0xd3000 + 6242  
9   WifiTool                        0x000d47e8 0xd3000 + 6120  

Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager  
Thread 1:  
0   libsystem_kernel.dylib          0x31a003a8 kevent + 24  
1   libdispatch.dylib               0x30985ea4 _dispatch_mgr_invoke + 708  
2   libdispatch.dylib               0x30985bc2 _dispatch_mgr_thread + 30  

Thread 2 name:  WebThread  
Thread 2:  
0   libsystem_kernel.dylib          0x31a00004 mach_msg_trap + 20  
1   libsystem_kernel.dylib          0x31a001fa mach_msg + 50  
2   CoreFoundation                  0x3782d3ec __CFRunLoopServiceMachPort + 120  
3   CoreFoundation                  0x3782c124 __CFRunLoopRun + 876  
4   CoreFoundation                  0x377af49e CFRunLoopRunSpecific + 294  
5   CoreFoundation                  0x377af366 CFRunLoopRunInMode + 98  
6   WebCore                         0x33158c9c _ZL12RunWebThreadPv + 396  
7   libsystem_c.dylib               0x340ce72e _pthread_start + 314  
8   libsystem_c.dylib               0x340ce5e8 thread_start + 0  

Thread 3 Crashed:  
0   CoreGraphics                        0x352bf554 argb32_mark + 80  
1   libRIP.A.dylib                  0x37b3e22a ripl_BltGlyph + 3358  
2   libRIP.A.dylib                  0x37b33ab2 ripc_DrawGlyphs + 1862  
3   CoreGraphics                    0x352bb342 CGContextDelegateDrawGlyphs + 38  
4   CoreGraphics                    0x352bb12a draw_glyphs + 390  
5   CoreGraphics                    0x352badfa CGContextShowGlyphsWithAdvances + 374  
6   WebCore                         0x330b46a0   _ZN7WebCoreL22showGlyphsWithAdvancesERKNS_10FloatPointEPKNS_14SimpleFontDataEP9CGContextPKtPK6CGSizem + 1912
7   WebCore                         0x330b3e04 WebCore::Font::drawGlyphs(WebCore::GraphicsContext*, WebCore::SimpleFontData const*, WebCore::GlyphBuffer const&, int, int, WebCore::FloatPoint const&, bool) const + 1072
8   WebCore                         0x330b369a WebCore::Font::drawSimpleText(WebCore::GraphicsContext*, WebCore::TextRun const&, WebCore::FloatPoint const&, int, int) const + 342
9   WebCore                         0x330b3518 WebCore::Font::drawText(WebCore::GraphicsContext*, WebCore::TextRun const&, WebCore::FloatPoint const&, int, int) const + 128
10  WebKit                          0x35ddb294 _ZL11drawAtPointPKtiRKN7WebCore10FloatPointERKNS1_4FontEPNS1_15GraphicsContextEbPNS1_10BidiStatusEi + 204
11  WebKit                          0x35ddb5e0 -[NSString(WebStringDrawing) __web_drawAtPoint:forWidth:withFont:ellipsis:letterSpacing:includeEmoji:measureOnly:renderedStringOut:drawUnderline:] + 776
12  WebKit                          0x35d54d90 -[NSString(WebStringDrawing) __web_drawAtPoint:forWidth:withFont:ellipsis:letterSpacing:includeEmoji:measureOnly:renderedStringOut:] + 84
13  WebKit                          0x35d54d2c -[NSString(WebStringDrawing) __web_drawAtPoint:forWidth:withFont:ellipsis:letterSpacing:includeEmoji:measureOnly:] + 76
14  WebKit                          0x35d54cd0 -[NSString(WebStringDrawing) _web_drawAtPoint:forWidth:withFont:ellipsis:letterSpacing:includeEmoji:] + 72
15  UIKit                           0x3153dace -[NSString(UIStringDrawing) drawAtPoint:forWidth:withFont:lineBreakMode:letterSpacing:includeEmoji:] + 154
16  UIKit                           0x3153d454 -[UILabel _drawTextInRect:baselineCalculationOnly:] + 1848
17  UIKit                           0x3153c3de -[UILabel drawTextInRect:] + 374
18  UIKit                           0x3153c25e -[UILabel drawRect:] + 66
19  UIKit                           0x3153c15e -[UIView(CALayerDelegate) drawLayer:inContext:] + 270
20  QuartzCore                      0x379834de -[CALayer drawInContext:] + 110
21  QuartzCore                      0x37982b38 CABackingStoreUpdate_ + 1776
22  QuartzCore                      0x3798232e CA::Layer::display_() + 950
23  QuartzCore                      0x37981f5a CA::Layer::display() + 122
24  QuartzCore                      0x37981e9c CA::Layer::display_if_needed(CA::Transaction*) + 168
25  QuartzCore                      0x37981844 CA::Context::commit_transaction(CA::Transaction*) + 228
26  QuartzCore                      0x37981578 CA::Transaction::commit() + 308
27  QuartzCore                      0x379794b2 CA::Transaction::observer_callback(__CFRunLoopObserver*, unsigned long, void*) + 50
28  CoreFoundation                  0x3782db14 __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 12
29  CoreFoundation                  0x3782bd50 __CFRunLoopDoObservers + 252
30  CoreFoundation                  0x3782c0aa __CFRunLoopRun + 754
31  CoreFoundation                  0x377af49e CFRunLoopRunSpecific + 294
32  CoreFoundation                  0x377af366 CFRunLoopRunInMode + 98
33  Foundation                      0x38033b6e -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 250
34  Foundation                      0x3804d51c -[NSRunLoop(NSRunLoop) run] + 72
35  WifiTool                        0x000d65a2 0xd3000 + 13730
36  Foundation                      0x380ca92c __NSFireDelayedPerform + 408
37  CoreFoundation                  0x3782da2c __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 8
38  CoreFoundation                  0x3782d692 __CFRunLoopDoTimer + 358
39  CoreFoundation                  0x3782c268 __CFRunLoopRun + 1200
40  CoreFoundation                  0x377af49e CFRunLoopRunSpecific + 294
41  CoreFoundation                  0x377af366 CFRunLoopRunInMode + 98
42  Foundation                      0x38033b6e -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 250
43  Foundation                      0x3804d51c -[NSRunLoop(NSRunLoop) run] + 72
44  WifiTool                        0x000d65a2 0xd3000 + 13730
45  Foundation                      0x380ca92c __NSFireDelayedPerform + 408
46  CoreFoundation                  0x3782da2c __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 8
47  CoreFoundation                  0x3782d692 __CFRunLoopDoTimer + 358
48  CoreFoundation                  0x3782c268 __CFRunLoopRun + 1200
49  CoreFoundation                  0x377af49e CFRunLoopRunSpecific + 294
50  CoreFoundation                  0x377af366 CFRunLoopRunInMode + 98
51  Foundation                      0x38033b6e -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 250
52  Foundation                      0x3804d51c -[NSRunLoop(NSRunLoop) run] + 72
53  WifiTool                        0x000d65a2 0xd3000 + 13730
54  Foundation                      0x380ca92c __NSFireDelayedPerform + 408
55  CoreFoundation                  0x3782da2c __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 8
56  CoreFoundation                  0x3782d692 __CFRunLoopDoTimer + 358
57  CoreFoundation                  0x3782c268 __CFRunLoopRun + 1200
58  CoreFoundation                  0x377af49e CFRunLoopRunSpecific + 294
59  CoreFoundation                  0x377af366 CFRunLoopRunInMode + 98
60  Foundation                      0x38033b6e -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 250
61  Foundation                      0x3804d51c -[NSRunLoop(NSRunLoop) run] + 72
62  WifiTool                        0x000d65a2 0xd3000 + 13730
63  Foundation                      0x380ca92c __NSFireDelayedPerform + 408
64  CoreFoundation                  0x3782da2c __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 8
65  CoreFoundation                  0x3782d692 __CFRunLoopDoTimer + 358
66  CoreFoundation                  0x3782c268 __CFRunLoopRun + 1200
67  CoreFoundation                  0x377af49e CFRunLoopRunSpecific + 294
68  CoreFoundation                  0x377af366 CFRunLoopRunInMode + 98
69  Foundation                      0x38033b6e -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 250
70  Foundation                      0x3804d51c -[NSRunLoop(NSRunLoop) run] + 72
71  WifiTool                        0x000d65a2 0xd3000 + 13730
72  Foundation                      0x380ca92c __NSFireDelayedPerform + 408
73  CoreFoundation                  0x3782da2c __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 8
74  CoreFoundation                  0x3782d692 __CFRunLoopDoTimer + 358
75  CoreFoundation                  0x3782c268 __CFRunLoopRun + 1200
76  CoreFoundation                  0x377af49e CFRunLoopRunSpecific + 294
77  CoreFoundation                  0x377af366 CFRunLoopRunInMode + 98
78  Foundation                      0x38033b6e -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 250
79  Foundation                      0x3804d51c -[NSRunLoop(NSRunLoop) run] + 72
80  WifiTool                        0x000d65a2 0xd3000 + 13730
81  Foundation                      0x380ca92c __NSFireDelayedPerform + 408
82  CoreFoundation                  0x3782da2c __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 8
83  CoreFoundation                  0x3782d692 __CFRunLoopDoTimer + 358
84  CoreFoundation                  0x3782c268 __CFRunLoopRun + 1200
85  CoreFoundation                  0x377af49e CFRunLoopRunSpecific + 294
86  CoreFoundation                  0x377af366 CFRunLoopRunInMode + 98
87  Foundation                      0x38033b6e -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 250
88  Foundation                      0x3804d51c -[NSRunLoop(NSRunLoop) run] + 72
89  WifiTool                        0x000d65a2 0xd3000 + 13730
90  Foundation                      0x380ca92c __NSFireDelayedPerform + 408
91  CoreFoundation                  0x3782da2c __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 8
92  CoreFoundation                  0x3782d692 __CFRunLoopDoTimer + 358
93  CoreFoundation                  0x3782c268 __CFRunLoopRun + 1200
94  CoreFoundation                  0x377af49e CFRunLoopRunSpecific + 294
95  CoreFoundation                  0x377af366 CFRunLoopRunInMode + 98
96  Foundation                      0x38033b6e -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 250
97  Foundation                      0x3804d51c -[NSRunLoop(NSRunLoop) run] + 72
98  WifiTool                        0x000d65a2 0xd3000 + 13730
99  Foundation                      0x380ca92c __NSFireDelayedPerform + 408
100 CoreFoundation                  0x3782da2c __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 8
101 CoreFoundation                  0x3782d692 __CFRunLoopDoTimer + 358
102 CoreFoundation                  0x3782c268 __CFRunLoopRun + 1200
103 CoreFoundation                  0x377af49e CFRunLoopRunSpecific + 294
104 CoreFoundation                  0x377af366 CFRunLoopRunInMode + 98
105 Foundation                      0x38033b6e -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 250
106 Foundation                      0x3804d51c -[NSRunLoop(NSRunLoop) run] + 72
107 WifiTool                        0x000d65a2 0xd3000 + 13730
108 Foundation                      0x380ca92c __NSFireDelayedPerform + 408
109 CoreFoundation                  0x3782da2c __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 8
110 CoreFoundation                  0x3782d692 __CFRunLoopDoTimer + 358
111 CoreFoundation                  0x3782c268 __CFRunLoopRun + 1200
112 CoreFoundation                  0x377af49e CFRunLoopRunSpecific + 294
113 CoreFoundation                  0x377af366 CFRunLoopRunInMode + 98
114 Foundation                      0x38033b6e -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 250
115 Foundation                      0x3804d51c -[NSRunLoop(NSRunLoop) run] + 72
116 WifiTool                        0x000d65a2 0xd3000 + 13730
117 Foundation                      0x380ca92c __NSFireDelayedPerform + 408
118 CoreFoundation                  0x3782da2c __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 8
119 CoreFoundation                  0x3782d692 __CFRunLoopDoTimer + 358
120 CoreFoundation                  0x3782c268 __CFRunLoopRun + 1200
121 CoreFoundation                  0x377af49e CFRunLoopRunSpecific + 294
122 CoreFoundation                  0x377af366 CFRunLoopRunInMode + 98
123 Foundation                      0x38033b6e -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 250
124 Foundation                      0x3804d51c -[NSRunLoop(NSRunLoop) run] + 72
125 WifiTool                        0x000d65a2 0xd3000 + 13730
126 Foundation                      0x380ca92c __NSFireDelayedPerform + 408
127 CoreFoundation                  0x3782da2c __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 8
128 CoreFoundation                  0x3782d692 __CFRunLoopDoTimer + 358
129 CoreFoundation                  0x3782c268 __CFRunLoopRun + 1200
130 CoreFoundation                  0x377af49e CFRunLoopRunSpecific + 294
131 CoreFoundation                  0x377af366 CFRunLoopRunInMode + 98
132 Foundation                      0x38033b6e -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 250
133 Foundation                      0x3804d51c -[NSRunLoop(NSRunLoop) run] + 72
134 WifiTool                        0x000d65a2 0xd3000 + 13730
135 Foundation                      0x380ca92c __NSFireDelayedPerform + 408
136 CoreFoundation                  0x3782da2c __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 8
137 CoreFoundation                  0x3782d692 __CFRunLoopDoTimer + 358
138 CoreFoundation                  0x3782c268 __CFRunLoopRun + 1200
139 CoreFoundation                  0x377af49e CFRunLoopRunSpecific + 294
140 CoreFoundation                  0x377af366 CFRunLoopRunInMode + 98
141 Foundation                      0x38033b6e -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 250
142 Foundation                      0x3804d51c -[NSRunLoop(NSRunLoop) run] + 72
143 WifiTool                        0x000d65a2 0xd3000 + 13730
144 Foundation                      0x380ca92c __NSFireDelayedPerform + 408
145 CoreFoundation                  0x3782da2c __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 8
146 CoreFoundation                  0x3782d692 __CFRunLoopDoTimer + 358
147 CoreFoundation                  0x3782c268 __CFRunLoopRun + 1200
148 CoreFoundation                  0x377af49e CFRunLoopRunSpecific + 294
149 CoreFoundation                  0x377af366 CFRunLoopRunInMode + 98
150 Foundation                      0x38033b6e -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 250
151 Foundation                      0x3804d51c -[NSRunLoop(NSRunLoop) run] + 72
152 WifiTool                        0x000d65a2 0xd3000 + 13730
153 Foundation                      0x380ca92c __NSFireDelayedPerform + 408
154 CoreFoundation                  0x3782da2c __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 8
155 CoreFoundation                  0x3782d692 __CFRunLoopDoTimer + 358
156 CoreFoundation                  0x3782c268 __CFRunLoopRun + 1200
157 CoreFoundation                  0x377af49e CFRunLoopRunSpecific + 294
158 CoreFoundation                  0x377af366 CFRunLoopRunInMode + 98
159 Foundation                      0x38033b6e -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 250
160 Foundation                      0x3804d51c -[NSRunLoop(NSRunLoop) run] + 72
161 WifiTool                        0x000d65a2 0xd3000 + 13730
162 Foundation                      0x380ca92c __NSFireDelayedPerform + 408
163 CoreFoundation                  0x3782da2c __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 8
164 CoreFoundation                  0x3782d692 __CFRunLoopDoTimer + 358
165 CoreFoundation                  0x3782c268 __CFRunLoopRun + 1200
166 CoreFoundation                  0x377af49e CFRunLoopRunSpecific + 294
167 CoreFoundation                  0x377af366 CFRunLoopRunInMode + 98
168 Foundation                      0x38033b6e -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 250
169 Foundation                      0x3804d51c -[NSRunLoop(NSRunLoop) run] + 72
170 WifiTool                        0x000d65a2 0xd3000 + 13730
171 Foundation                      0x380ca92c __NSFireDelayedPerform + 408
172 CoreFoundation                  0x3782da2c __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 8
173 CoreFoundation                  0x3782d692 __CFRunLoopDoTimer + 358
174 CoreFoundation                  0x3782c268 __CFRunLoopRun + 1200
175 CoreFoundation                  0x377af49e CFRunLoopRunSpecific + 294
176 CoreFoundation                  0x377af366 CFRunLoopRunInMode + 98
177 Foundation                      0x38033b6e -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 250
178 Foundation                      0x3804d51c -[NSRunLoop(NSRunLoop) run] + 72
179 WifiTool                        0x000d65a2 0xd3000 + 13730
180 Foundation                      0x380ca92c __NSFireDelayedPerform + 408
181 CoreFoundation                  0x3782da2c __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 8
182 CoreFoundation                  0x3782d692 __CFRunLoopDoTimer + 358
183 CoreFoundation                  0x3782c268 __CFRunLoopRun + 1200
184 CoreFoundation                  0x377af49e CFRunLoopRunSpecific + 294
185 CoreFoundation                  0x377af366 CFRunLoopRunInMode + 98
186 Foundation                      0x38033b6e -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 250
187 Foundation                      0x3804d51c -[NSRunLoop(NSRunLoop) run] + 72
188 WifiTool                        0x000d65a2 0xd3000 + 13730
189 Foundation                      0x380ca92c __NSFireDelayedPerform + 408
190 CoreFoundation                  0x3782da2c __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 8
191 CoreFoundation                  0x3782d692 __CFRunLoopDoTimer + 358
192 CoreFoundation                  0x3782c268 __CFRunLoopRun + 1200
193 CoreFoundation                  0x377af49e CFRunLoopRunSpecific + 294
194 CoreFoundation                  0x377af366 CFRunLoopRunInMode + 98
195 Foundation                      0x38033b6e -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 250
196 Foundation                      0x3804d51c -[NSRunLoop(NSRunLoop) run] + 72
197 WifiTool                        0x000d65a2 0xd3000 + 13730
198 Foundation                      0x380ca92c __NSFireDelayedPerform + 408
199 CoreFoundation                  0x3782da2c __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 8
200 CoreFoundation                  0x3782d692 __CFRunLoopDoTimer + 358
201 CoreFoundation                  0x3782c268 __CFRunLoopRun + 1200
202 CoreFoundation                  0x377af49e CFRunLoopRunSpecific + 294
203 CoreFoundation                  0x377af366 CFRunLoopRunInMode + 98
204 Foundation                      0x38033b6e -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 250
205 Foundation                      0x3804d51c -[NSRunLoop(NSRunLoop) run] + 72
206 WifiTool                        0x000d65a2 0xd3000 + 13730
207 Foundation                      0x380ca92c __NSFireDelayedPerform + 408
208 CoreFoundation                  0x3782da2c __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 8
209 CoreFoundation                  0x3782d692 __CFRunLoopDoTimer + 358
210 CoreFoundation                  0x3782c268 __CFRunLoopRun + 1200
211 CoreFoundation                  0x377af49e CFRunLoopRunSpecific + 294
212 CoreFoundation                  0x377af366 CFRunLoopRunInMode + 98
213 Foundation                      0x38033b6e -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 250
214 Foundation                      0x3804d51c -[NSRunLoop(NSRunLoop) run] + 72
215 WifiTool                        0x000d65a2 0xd3000 + 13730
216 Foundation                      0x380ca92c __NSFireDelayedPerform + 408
217 CoreFoundation                  0x3782da2c __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 8
218 CoreFoundation                  0x3782d692 __CFRunLoopDoTimer + 358
219 CoreFoundation                  0x3782c268 __CFRunLoopRun + 1200
220 CoreFoundation                  0x377af49e CFRunLoopRunSpecific + 294
221 CoreFoundation                  0x377af366 CFRunLoopRunInMode + 98
222 Foundation                      0x38033b6e -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 250
223 Foundation                      0x3804d51c -[NSRunLoop(NSRunLoop) run] + 72
224 WifiTool                        0x000d65a2 0xd3000 + 13730
225 Foundation                      0x380ca92c __NSFireDelayedPerform + 408
226 CoreFoundation                  0x3782da2c __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 8
227 CoreFoundation                  0x3782d692 __CFRunLoopDoTimer + 358
228 CoreFoundation                  0x3782c268 __CFRunLoopRun + 1200
229 CoreFoundation                  0x377af49e CFRunLoopRunSpecific + 294
230 CoreFoundation                  0x377af366 CFRunLoopRunInMode + 98
231 Foundation                      0x38033b6e -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 250
232 Foundation                      0x3804d51c -[NSRunLoop(NSRunLoop) run] + 72
233 WifiTool                        0x000d65a2 0xd3000 + 13730
234 Foundation                      0x380ca92c __NSFireDelayedPerform + 408
235 CoreFoundation                  0x3782da2c __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 8
236 CoreFoundation                  0x3782d692 __CFRunLoopDoTimer + 358
237 CoreFoundation                  0x3782c268 __CFRunLoopRun + 1200
238 CoreFoundation                  0x377af49e CFRunLoopRunSpecific + 294
239 CoreFoundation                  0x377af366 CFRunLoopRunInMode + 98
240 Foundation                      0x38033b6e -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 250
241 Foundation                      0x3804d51c -[NSRunLoop(NSRunLoop) run] + 72
242 WifiTool                        0x000d65a2 0xd3000 + 13730
243 Foundation                      0x380ca92c __NSFireDelayedPerform + 408
244 CoreFoundation                  0x3782da2c __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 8
245 CoreFoundation                  0x3782d692 __CFRunLoopDoTimer + 358
246 CoreFoundation                  0x3782c268 __CFRunLoopRun + 1200
247 CoreFoundation                  0x377af49e CFRunLoopRunSpecific + 294
248 CoreFoundation                  0x377af366 CFRunLoopRunInMode + 98
249 Foundation                      0x38033b6e -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 250
250 Foundation                      0x3804d51c -[NSRunLoop(NSRunLoop) run] + 72
251 WifiTool                        0x000d65a2 0xd3000 + 13730
252 Foundation                      0x380ca92c __NSFireDelayedPerform + 408
253 CoreFoundation                  0x3782da2c __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 8
254 CoreFoundation                  0x3782d692 __CFRunLoopDoTimer + 358
255 CoreFoundation                  0x3782c268 __CFRunLoopRun + 1200
256 CoreFoundation                  0x377af49e CFRunLoopRunSpecific + 294
257 CoreFoundation                  0x377af366 CFRunLoopRunInMode + 98
258 Foundation                      0x38033b6e -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 250
259 Foundation                      0x3804d51c -[NSRunLoop(NSRunLoop) run] + 72
260 WifiTool                        0x000d65a2 0xd3000 + 13730
261 Foundation                      0x380ca92c __NSFireDelayedPerform + 408
262 CoreFoundation                  0x3782da2c __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 8

Thread 3 crashed with ARM Thread State:
    r0: 0x3f474030    r1: 0x0000000b      r2: 0x00010402      r3: 0x00000000
    r4: 0x00000001    r5: 0x1d024448      r6: 0x1d024448      r7: 0x002bd4fc
    r8: 0x1d02449c    r9: 0x0000001c     r10: 0x1c5e6030     r11: 0x1c5e6074
    ip: 0x00345020    sp: 0x002bc428      lr: 0x00000000      pc: 0x352bf554
  cpsr: 0x40000030

Binary Images:
   0xd3000 -   0x106fff +WifiTool armv7  <5c6af73f9cba3746a645c602ba08b3b3> /Applications/WifiTool.app/WifiTool 
```

我不得不从日志中剪掉很多，因为它太长了，但如果需要我会链接它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:20:37.047

看起来可能是堆栈溢出；你已经发生了无限（间接）递归。`[[NSRunLoop currentRunLoop] run];`正在调用您的方法，该方法调用`[[NSRunLoop currentRunLoop] run];`等。尝试`[[NSRunLoop currentRunLoop] run];`从您的方法中删除对的调用。（只需在方法结束时返回，无论如何它都会返回到运行循环。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T02:32:55.807

一旦我更改为使用 GCD 调用而不是使用递归的循环，应用程序就一直很稳定:) 这是我使用的：一旦按下开始按钮，从 GUI 中 `dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^(void){ [[ScannerSingleton sharedScanner]scanCurrentNetwork]; });` 调用扫描方法，该方法一直运行直到按下停止按钮:)

一旦我修复了这个问题并在应用程序的其他几个区域实施了 GCD，它就会变得更加流畅：D

# c# - 如何阻止bing地图平移坐标绑定？

> ID：15157415
> 
> 赞同：0
> 
> 时间：2013-03-01T12:08:47.773
> 
> 标签：c#, windows-phone-7, c#-4.0, bing-maps

我`bing maps components`在 C# for WP7 中使用我的自定义图块。
我覆盖`Microsoft.Phone.Controls.Maps.TileSource`，一切正常，我可以使用我的瓷砖。

但是，因为没有全世界，我只想限制泛在一个城市范围内？

用`MapDragEventArgs`查堵锅是正确的？？

```
private void map_MapPan(object sender, MapDragEventArgs e)
{
  Map m = (Map)sender;
  // something...?
} 
```

...或者我需要覆盖其他东西？在这种情况下，我需要覆盖什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:08:06.527

我没有在 Windows phone 7 上使用 Bing 地图，因此仅根据文档，我会执行以下操作：

1.  始终初始化地图，使其视图边界矩形位于您定义的图块区域内。
2.  绑定到 ViewChangeStart 事件。（或 ViewChangeOnFrame，您必须试验并确定使用哪个）
3.  ViewChangeStart 的内部处理程序，检查 TargetBoundingRectangle 是否正确落在您的图块覆盖区域之外。
4.  如果 TargetBoundingRectangle 不在您的覆盖范围内，请想办法取消视图更改或手动将边界矩形设置回之前的有效状态。

假设一切都像我期望的那样工作，这应该将用户地图导航限制在您的有限区域，并避免在用户导航后视图“捕捉”回到其他地方的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:02:20.543

您可以轻松做的最好的方法是使用 ViewChangeEnd 事件并将地图设置回您的覆盖区域。

请参阅 MSDN 参考来执行此操作：

[http://msdn.microsoft.com/en-us/library/microsoft.phone.controls.maps.core.mapcore.viewchangeend(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/microsoft.phone.controls.maps.core.mapcore.viewchangeend(v=vs.92).aspx)

# android - AndroidDriver 节点是否必须与集线器在同一台机器上？

> ID：15157418
> 
> 赞同：2
> 
> 时间：2013-03-01T12:09:00.127
> 
> 标签：android, selenium-webdriver, selenium-grid

按照说明设置[AndroidDriver](https://code.google.com/p/selenium/wiki/AndroidDriver)（页面似乎暂时关闭）时，尚不完全清楚驱动程序如何连接到集线器以及我是否可以将其连接到远程集线器。

在 Android 模拟器/设备上安装 Web 驱动程序后，有以下说明：

> 您可以在调试模式下启动应用程序，该模式具有更详细的日志，方法是：
> 
> $./adb -s shell am start -a android.intent.action.MAIN -n org.openqa.selenium.android.app/.MainActivity -e debug true 现在我们需要设置端口转发以便转发来自主机到模拟器。在终端类型中：
> 
> $./adb -s 转发 tcp:8080 tcp:8080
> 
> 这将使 android 服务器在 localhost:8080/wd/hub 从主机可用。您现在已准备好运行测试。让我们看一些代码。

但是如果想让服务器在 remoteHub:8080/wd/hub 上可用呢？

我可以将我的`AndroidDriver`节点连接到远程集线器吗？还是它必须与集线器在同一台机器上或连接到同一台机器上？

**编辑**：如果我尝试将我的 AndroidDriver 指向远程集线器：

```
AndroidDriver androidDriver = new AndroidDriver(new Uri("remote...:4444/wd/hub"));
Drivers.Add(androidDriver); 
```

我得到以下信息`InvalidOperationException`：

> 转发新会话时出错找不到：{platform=ANDROID, browserName=android, rotatable=true, takesScreenshot=true, version=}

# java - 如何读取文本文件并将其显示在 netbeans JTextArea 中？

> ID：15157424
> 
> 赞同：1
> 
> 时间：2013-03-01T12:09:05.640
> 
> 标签：java, swing, netbeans, jtextarea

我在一个 Netbeans GUI 项目中工作。我要做的就是从路径中读取一个文本文件并将其显示在`JTextArea`使用 Netbeans 中。我怎样才能做到这一点？

仅使用文件路径有什么简单的方法吗？

可以说我希望在单击按钮后完成此操作..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T12:14:50.853

*   阅读有关[如何使用文本区域的Oracles 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/textarea.html)

*   使用[JTextArea.read(Reader in, Object desc) 抛出 IOException](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/JTextComponent.html#read%28java.io.Reader,%20java.lang.Object%29)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T12:16:17.253

请参阅[`JTextComponent.read(Reader,Object)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/JTextComponent.html#read%28java.io.Reader,%20java.lang.Object%29)几乎是“单线解决方案”。

# c# - 正则表达式模式匹配文件名

> ID：15157428
> 
> 赞同：1
> 
> 时间：2013-03-01T12:09:14.780
> 
> 标签：c#, regex

我有一个必须如下所示的文件名：

```
A123456_B123456_v1.10_File Name.xml 
```

我试图创建一个正则表达式模式，它应该验证文件名是否匹配。

模式是：

```
Regex regex = new Regex("A(\\d{6})_B(\\d{6})_v(\\d{1,3}\\.\\d{1,2})_(\\*?).xml"); 
```

它不工作。

你能帮我解决这个问题吗？

**工作示例**

```
string fileName = "A545656_B958432_v12.8_Upload 1.xml";

Regex.IsMatch("A(\\d{6})_B(\\d{6})_v(\\d{1,3}\\.\\d{1,2})_(.*?)\\.xml", fileName) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:18:15.203

我相信这个正则表达式应该可以工作：

```
"A\\d{6}_B\\d{6}_v\\d{1,3}\\.\\d{1,2}_.*?\\.xml" 
```

圆括号不是必需的（尽管您可以将它们保留原样），该`(\\*?)`部分是错误的，因为它匹配`A123456_B123456_v1.10_*`or `A123456_B123456_v1.10_`，但不是`A123456_B123456_v1.10_File Name`，而是`.xml`应该匹配`\\.xml`，因为您想要`.`匹配文字，而不仅仅是任何字符。

带圆括号的版本

```
"A(\\d{6})_B(\\d{6})_v(\\d{1,3}\\.\\d{1,2})_(.*?)\\.xml" 
```

仅当您想检索其中匹配的任何内容时才需要。

**编辑：**

您的正则表达式不起作用的原因是您使用`Regex.IsMatch`错误。根据[MSDN](http://msdn.microsoft.com/en-us/library/sdx2bds0.aspx)，它是 Regex.IsMatch(input, pattern)

```
Regex.IsMatch("A(\\d{6})_B(\\d{6})_v(\\d{1,3}\\.\\d{1,2})_(.*?)\\.xml", fileName) // instead of this
Regex.IsMatch(fileName, "A(\\d{6})_B(\\d{6})_v(\\d{1,3}\\.\\d{1,2})_(.*?)\\.xml") // do this instead 
```

既然你在做

```
Regex regex = new Regex("A(\\d{6})_B(\\d{6})_v(\\d{1,3}\\.\\d{1,2})_(.*?)\\.xml"); 
```

你为什么不使用它？

```
if (regex.IsMatch(fileName))
    // do stuff 
```

**编辑2：**

您可以使用逐字字符使您的正则表达式更易于阅读，而不是使用双重转义`@`

```
Regex regex = new Regex(@"A(\d{6})_B(\d{6})_v(\d{1,3}\.\d{1,2})_(.*?)\.xml"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:24:29.863

有比这更干净的方法，但它会起作用。

```
private void textBox1_TextChanged(object sender, EventArgs e)
        {

        string Reg = "^[A]{1}[0-9]{6}[_]{1}[B]{1}[0-9]{6}[_]{1}[v]{1}[1]{1}[.]{1}[1]{1}[0]{1}[_]*";

        if (Regex.IsMatch(textBox1.Text, Reg))
        {
            textBox1.BackColor = Color.Green;
            textBox1.ForeColor = Color.White;
        }
        else
        {
            textBox1.BackColor = Color.White;
            textBox1.ForeColor = Color.Black;
        }
    } 
```

# php - 在 wordpress 中写入 custom.css

> ID：15157431
> 
> 赞同：0
> 
> 时间：2013-03-01T12:09:20.537
> 
> 标签：php, wordpress

我是 Wordpress 的新手。我的博客有一个名为的主题`canvas`，我有一个`wp-content/themes/canvas/custom.css`. 我希望能够通过 wp-admin 写入该文件。怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T12:14:58.143

转到 WP 管理面板中的外观 > 编辑器。选择此项，您的 CSS 文件应显示如下：

![在此处输入图像描述](../Images/06291fd7a5ebe0e4eef0c5c294553257.png)

# opencv - 在opencv中向下移动图像的一部分（剪切和粘贴）

> ID：15157433
> 
> 赞同：0
> 
> 时间：2013-03-01T12:09:24.110
> 
> 标签：opencv, image-processing, computer-vision

我有一部分图像，我想将它向下移动 25 个像素，如图所示。

![在此处输入图像描述](../Images/f0336fe63294c92345759f492ebd1811.png)

我有要向下移动的区域的**掩码。**总图像大小不应改变。因此，操作是剪切和粘贴。我切割的区域可以用 0 或 255 填充。

平台是 C++

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T13:10:12.767

创建两个子图像：第一个`sub1`围绕要移动的图案，第二个`sub2`大小相同`sub1`，围绕目标。复制`sub1`到`sub2`然后填充`sub1`黑色或白色。您显然需要使用与两个子图像相同大小的蒙版。

这是伪代码，以说明这个想法：

```
cv::Mat YourImage;
cv::Mat YourMask;
std::vector<cv::Point> YourPatternContour;

cv::Rect sub1ROI = cv::boundingRect(YourPatternContour);
cv::Mat sub1 = YourImage(sub1ROI);
cv::Mat mask = YourMask(sub1ROI);

cv::Rect sub2ROI = sub1ROI + cv::Point(25,25);
cv::Mat sub2 = YourImage(sub2ROI);

sub1.copyTo(sub2, mask);
sub1.set(0, mask); 
```

# javascript - 在javascript中获取插入符号位置之前的最后一个字符

> ID：15157435
> 
> 赞同：15
> 
> 时间：2013-03-01T12:09:33.887
> 
> 标签：javascript, jquery, autocomplete, contenteditable, caret

我即将在我的**contenteditable div**中实现 Facebook 的集成，如果我给出 '$' 和一些像 'a' 这样的字符，我需要一个自动建议，它应该在我的插入符号位置附近弹出。

我需要知道如何在 IE 和其他浏览器的 JavaScript 中找出插入符号位置之前的最后一个字符。我可以访问 Jquery 库。

```
(function($) {
    $.fn.getCursorPosition = function() {
        var input = this.get(0);
        if (!input) return; // No (input) element found
        if ('selectionStart' in input) {
            // Standard-compliant browsers
            return input.selectionStart;
        } else if (document.selection) {
            // IE
            input.focus();
            var sel = document.selection.createRange();
            var selLen = document.selection.createRange().text.length;
            sel.moveStart('character', -input.value.length);
            return sel.text.length - selLen;
        }
    }
})(jQuery);

eg.
var caretPosition = $("#contenteditablediv").getCursorPosition();
var lastchar = getchar(caretposition -1);??? 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-01T12:27:32.390

这是如何执行此操作的示例。它创建一个范围，该范围从可编辑元素的开头开始并在插入符号之前立即结束，获取范围的文本并返回该范围的最后一个字符。

演示：http: [//jsfiddle.net/MH5xX/](http://jsfiddle.net/MH5xX/)

```
function getCharacterPrecedingCaret(containerEl) {
    var precedingChar = "", sel, range, precedingRange;
    if (window.getSelection) {
        sel = window.getSelection();
        if (sel.rangeCount > 0) {
            range = sel.getRangeAt(0).cloneRange();
            range.collapse(true);
            range.setStart(containerEl, 0);
            precedingChar = range.toString().slice(-1);
        }
    } else if ( (sel = document.selection) && sel.type != "Control") {
        range = sel.createRange();
        precedingRange = range.duplicate();
        precedingRange.moveToElementText(containerEl);
        precedingRange.setEndPoint("EndToStart", range);
        precedingChar = precedingRange.text.slice(-1);
    }
    return precedingChar;
}

var editableEl = document.getElementById("editable");
var precedingCharEl = document.getElementById("precedingChar");

function reportCharacterPrecedingCaret() {
    precedingCharEl.innerHTML = "Character preceding caret: " + getCharacterPrecedingCaret(editableEl);
}

editableEl.onmouseup = editableEl.onkeyup = reportCharacterPrecedingCaret;
```

```
<div contenteditable="true" id="editable">Here is some text. Please put the caret somewhere in here.</div>
<div id="precedingChar" style="font-weight: bold"></div>
```

# android - 为什么android在使用小于12sp的尺寸时会发出警告？

> ID：15157439
> 
> 赞同：20
> 
> 时间：2013-03-01T12:09:51.057
> 
> 标签：android, android-layout, textfield, font-size

好吧，我正在为 7 英寸平板电脑开发应用程序，尤其是为 nexus 7 开发应用程序，并且在 XML 布局文件中，我收到警告

**避免使用小于 12sp 的尺寸：11sp**

如果我将任何 textField 的大小设置为小于 12sp ？

我正在添加屏幕截图以更清楚地说明问题

![在此处输入图像描述](../Images/594ed7ac34f6c62806df76de38d85477.png)

![在此处输入图像描述](../Images/ecd85bbeaba93de45309abacb66aadfd.png)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-01T13:38:01.687

对于默认字体缩放，1sp = 1dip = 1/160"。11sp 的高度大约是 1/15 英寸，非常小。

这是一个 Lint 错误。您可以覆盖它 - 按`<Ctrl>-<1>`，快速修复列表菜单应该让您能够抑制消息。

但是，如果您尝试 12sp，您可能会发现它也非常小，并且无论如何您都想要更大的字体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-19T07:16:14.320

您可以使用**`tools:ignore="SmallSp"`**忽略该警告

```
<TextView
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:singleLine="false"
    android:text="NileshRathod"
    android:textSize="8sp"
    tools:ignore="SmallSp"/> 
```

# php - 如何将日期选择器的当前日期设置为文本框值

> ID：15157442
> 
> 赞同：0
> 
> 时间：2013-03-01T12:10:03.443
> 
> 标签：php, javascript, datepicker

我正在开发酒店预订应用程序。我使用了 2 个日期选择器来选择入住和退房日期。

但是现在我希望我的第一个日期选择器的当前值默认显示在该文本框中，并且第二个日期选择器的另一个文本框在 2 天后的日期之前填充...

就像这些日期选择器一样......

[http://www.yatra.com/hotels.html](http://www.yatra.com/hotels.html)

任何人都可以建议我，如何做到这一点？

我使用了相同的日期选择器，如链接所示。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:11:56.017

您可以设置这样的日期（如果日期选择器已初始化）

```
$('#your-selector')
    .datepicker('setDate',new Date()); 
```

未初始化的日期选择器使用：

```
$('#your-selector')
    .datepicker().datepicker('setDate',new Date()); 
```

在 2 天前创建一个日期......制作这个：

```
var today = new Date();
var twoDaysBefore = new Date();
twoDaysBefore.setDate(today.getDate()-2); 
```

并设置日期

```
$('#your-selector')
    .datepicker('setDate', twoDaysBefore); 
```

如果您多次需要此算法，您可以创建一个函数：

```
var getDate = function(daysDelta) {
    var d = new Date();
    (d.setDate(d.getDate()+daysDelta));
    return  d;
}

console.log(getDate(-3)) 
```

如果没有 jQuery（谢谢），请像这样格式化您的日期对象：

```
var d = getDate(-2);
var yyyy = d.getFullYear().toString();
var mm = (d.getMonth()+1).toString();
var dd  = d.getDate().toString();
var dateAsString =  yyyy + "-" + (mm[1]?mm:"0"+mm[0]) + "-" + (dd[1]?dd:"0"+1);
document.getElementById('id').setAttribute('value', dateAsString); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:15:41.193

今天的日期

```
$("#date_pick").datepicker('setDate', new Date()); 
```

2 天后的日期

```
var nextDate = new Date(new Date().getTime() + 48 * 60 * 60 * 1000);
$("#date_pick2").datepicker('setDate', nextDate); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T12:18:00.400

试试这个代码

```
 $('first').datepicker({

 onSelect: function(){
 var start = $('first').val();

 var date = new Date(start);
 var d = date.getDate();
 var m = date.getMonth();
 var y = date.getFullYear();
 var edate= new Date(y, m, d+2);

 $('second').val(edate);
}
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T12:13:23.950

如果 datepicker1 是您的 datepicker id 而 datepicker2 是第二个，那么

```
$("#datepicker1").val(new date());

var date2 = $('datepicker1').datepicker('getDate', '+2d'); 
date2.setDate(date2.getDate()+1); 

$("#datepicker2").val(date2); 
```

# performance - 转置数组以使用按列操作是否有益？

> ID：15157445
> 
> 赞同：5
> 
> 时间：2013-03-01T12:10:05.467
> 
> 标签：performance, r, multidimensional-array, fortran, transpose

假设我们正在使用一种以列优先顺序存储数组的语言。还假设我们有一个使用二维数组作为参数的函数，并返回它。我想知道您是否可以声称在调用函数时转置此数组通常是（或不是）有益的，以便使用按列操作而不是按行操作，或者转置是否否定了列操作的好处？

例如，在 RI 中有一个名为 ts 的对象，`y`它具有维度`n x p`，即我有`p`长度的时间序列`n`。

我需要`y`在 Fortran 中进行一些计算，其中我有两个具有以下结构的循环：

```
do i = 1, n
  do j= 1, p
   !just an example, some row-wise operations  on `y`
   x(i,j) = a*y(i,j) 
   D = ddot(m,y(i,1:p),1,b,1) 
   ! ...
  end do
end do 
```

由于 Fortran（与 R 一样）使用按列存储，因此最好使用`p x n`数组进行计算。所以而不是

```
out<-.Fortran("something",y=array(y,dim(y)),x=array(0,dim(y)))
ynew<-out$out$y
x<-out$out$x 
```

我可以使用

```
out<-.Fortran("something2",y=t(array(y,dim(y))),x=array(0,dim(y)[2:1]))
ynew<-t(out$out$y)
x<-t(out$out$x) 
```

Fortran 子程序`something2`类似于

```
do i = 1, n
  do j= 1, p
   !just an example, some column-wise operations  on `y`
   x(j,i) = a*y(j,i) 
   D = ddot(m,y(1:p,i),1,b,1) 
   ! ...
  end do
end do 
```

方法的选择是否总是取决于尺寸`n`，`p`或者是否可以说一种方法在计算速度和/或内存要求方面更好？在我的应用程序`n`中通常比 大得多`p`，在大多数情况下是 1 到 10。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T14:49:08.357

更多评论，购买我想添加一些代码：在老派 f77 下，您基本上将被迫使用第二种方法

```
y(1:p,i) 
```

只是一个指向 y(1,i) 的指针，后面的 p 值在内存中是连续的。

第一个构造

```
y(i,1:p) 
```

是内存中间隔的值列表，因此似乎需要制作数据的副本以传递给子例程。我说这似乎是因为我不知道现代优化编译器如何处理这些事情。我倾向于认为充其量是洗个澡，最坏的情况是这可能真的很痛。想象一个如此大的数组，您需要进行页面交换才能访问整个向量。

最后，回答这个问题的唯一方法就是自己测试

----------edit 做了一些测试并证实了我的预感：传递行`y(i,1:p)`确实会花费你而不是传递列`y(1:p,i)`。我使用了一个几乎没有任何区别的子程序。我对任何真正的子程序的猜测都是可以忽略不计的。

顺便说一句（也许这有助于理解发生了什么）在列中传递所有其他值

`y(1:p:2,i)`比传递整列花费更长的时间（数量级），而传递一行中的每个其他值将时间减少一半，而不是传递整行。

（使用 gfortran 12 ..）

# knockout.js - 两个选择列表共享相同的值绑定，更新缓慢

> ID：15157449
> 
> 赞同：3
> 
> 时间：2013-03-01T12:10:10.557
> 
> 标签：knockout.js

我有两个选择列表绑定到包含相同数据的不同排序的可观察数组。这两个选择列表值绑定到同一个 observableArray。

**HTML**

```
 <select id="countriesAZ" data-bind="value: selectedCountry, options: countriesAZ, optionsText: 'Name', optionsValue: 'Id',  optionsCaption: 'Countries a - z'"></select>

  <select id="countriesByDistance" data-bind="value: selectedCountry, options: countriesDist, optionsText: 'Name', optionsValue: 'Id',  optionsCaption: 'Countries by distance'"></select> 
```

**JS**

```
var myVM = function() {
    var self = this;
    this.countriesAZ = ko.observableArray([{"Id":1,"Name":"Scotland"},{"Id":2,"Name":"England"},{"Id":3,"Name":"Wales"},{"Id":4,"Name":"N. Ireland"}]);
    this.countriesDist = ko.observableArray([{"Id":1,"Name":"Scotland"},{"Id":2,"Name":"England"},{"Id":3,"Name":"Wales"},{"Id":4,"Name":"N. Ireland"}]);
    this.selectedCountry = ko.observableArray();
}

window.viewModel = new myVM();
ko.applyBindings(viewModel); 
```

在[这个小提琴](http://jsfiddle.net/sHatN/1/)中，一切似乎都运行良好并且反应迅速，但是，实际数组大约有 1000 个项目，并且在更改其中一个选择时会有延迟。

我试图限制值绑定，但似乎没有什么不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T02:56:08.997

在使用绑定生成的大量选项`options`同时使用绑定时，您将遇到性能问题`value`。Ryan Niemeyer的[这篇博客文章](http://www.knockmeout.net/2012/06/knockoutjs-performance-gotcha-3-all-bindings.html)很好地描述了这个问题。他还解释了解决此问题的多种方法。

不过，最简单的修复可能是使用我的[Freedom 插件](https://github.com/mbest/knockout-freedom)来修复底层的 Knockout 错误。这是包含 Freedom 插件的示例：http: [//jsfiddle.net/mbest/sHatN/3/](http://jsfiddle.net/mbest/sHatN/3/)

# arangodb - 如何使用 ArangoDB 和 PHP 遍历图

> ID：15157455
> 
> 赞同：6
> 
> 时间：2013-03-01T12:10:27.290
> 
> 标签：arangodb, arangodb-php

ArangoDB 提供文档和边作为生成图的低级方式。

假设我们已经建立了一个带有一些顶点和边的图。该图表示顶点之间的关系。

v2 是 v1 的孩子
v3 是 v2 的孩子
v4 是 v3 的孩子
v5 是 v1的孩子
v6 是 v5 的孩子

我们希望能够查询：

1.  从 v4 到 v1 的路径
2.  v1的所有后代
3.  v1的孩子们
4.  v4的所有祖先
5.  v4的父母

如何在 PHP 中做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-01T12:10:27.290

这样做的方法是使用 AQL（ArangoDB 查询语言）查询 ArangoDB。

在 AQL 中有一些用于处理图形的命令。使用 PHP，我们必须创建一个带有查询的语句并执行它。

附加的代码使用 TRAVERSAL 函数来为问题中提到的查询提供结果。

该脚本设置一个文档和一个边集合，用顶点和连接边填充它，最后进行查询以提供结果。

它可以按原样执行并将打印出所有结果。

```
<?php

namespace triagens\ArangoDb;

    // use this and change it to the path to autoload.php of the arangodb-php client if you're using the client standalone...
    // require __DIR__ . '/../vendor/triagens/ArangoDb/autoload.php';

// ...or use this and change it to the path to autoload.php in the vendor directory if you're using Composer/Packagist
require __DIR__ . '/../vendor/autoload.php';

// This function will provide us with our pre-configured connection options.
function getConnectionOptions()
{
    $traceFunc = function ($type, $data) {
        print "TRACE FOR " . $type . PHP_EOL;
    };

    return array(
        ConnectionOptions::OPTION_ENDPOINT      => 'tcp://localhost:8529/',
        // endpoint to connect to
        ConnectionOptions::OPTION_CONNECTION    => 'Close',
        // can use either 'Close' (one-time connections) or 'Keep-Alive' (re-used connections)
        ConnectionOptions::OPTION_AUTH_TYPE     => 'Basic',
        // use basic authorization
        /*
        ConnectionOptions::OPTION_AUTH_USER       => '',                      // user for basic authorization
        ConnectionOptions::OPTION_AUTH_PASSWD     => '',                      // password for basic authorization
        ConnectionOptions::OPTION_PORT            => 8529,                    // port to connect to (deprecated, should use endpoint instead)
        ConnectionOptions::OPTION_HOST            => "localhost",             // host to connect to (deprecated, should use endpoint instead)
        */
        ConnectionOptions::OPTION_TIMEOUT       => 5,
        // timeout in seconds
        //ConnectionOptions::OPTION_TRACE           => $traceFunc,              // tracer function, can be used for debugging
        ConnectionOptions::OPTION_CREATE        => false,
        // do not create unknown collections automatically
        ConnectionOptions::OPTION_UPDATE_POLICY => UpdatePolicy::LAST,
        // last update wins
    );
}

// This function tries to create vertices and edges for the example
function setupVerticesAndEdges($connection, $vertexCollection, $edgeCollection)
{

echo "We are creating 6 vertices...<br> ";
    //create example documents for the vertices
    $nameV1     = 'v1';
    $documentV1 = Document::createFromArray(
        array('name' => $nameV1, '_key' => $nameV1)
    );
    $nameV2     = 'v2';
    $documentV2 = Document::createFromArray(
        array('name' => $nameV2, '_key' => $nameV2)
    );
    $nameV3     = 'v3';
    $documentV3 = Document::createFromArray(
        array('name' => $nameV3, '_key' => $nameV3)
    );
    $nameV4     = 'v4';
    $documentV4 = Document::createFromArray(
        array('name' => $nameV4, '_key' => $nameV4)
    );
    $nameV5     = 'v5';
    $documentV5 = Document::createFromArray(
        array('name' => $nameV5, '_key' => $nameV5)
    );
    $nameV6     = 'v6';
    $documentV6 = Document::createFromArray(
        array('name' => $nameV6, '_key' => $nameV6)
    );

    echo "We are creating 5 edges...<br> ";
    //create example documents for the edges
    $nameE1     = 'e1';
    $documentE1 = Edge::createFromArray(
        array('name' => $nameE1, 'label' => 'child_of')
    );
    $nameE2     = 'e2';
    $documentE2 = Edge::createFromArray(
        array('name' => $nameE2, 'label' => 'child_of')
    );
    $nameE3     = 'e3';
    $documentE3 = Edge::createFromArray(
        array('name' => $nameE3, 'label' => 'child_of')
    );
    $nameE4     = 'e4';
    $documentE4 = Edge::createFromArray(
        array('name' => $nameE4, 'label' => 'child_of')
    );
    $nameE5     = 'e5';
    $documentE5 = Edge::createFromArray(
        array('name' => $nameE5, 'label' => 'child_of')
    );

    // Get instances of the vertice- and edgehandlers
    $documentHandler = new DocumentHandler($connection);
    $edgeHandler     = new EdgeHandler($connection);

    // Save the vertices
    try {
        // query the given $collectionId by example using the previously declared $exampleDocument array
        $result['v'][] = $documentHandler->save($vertexCollection, $documentV1);
        $result['v'][] = $documentHandler->save($vertexCollection, $documentV2);
        $result['v'][] = $documentHandler->save($vertexCollection, $documentV3);
        $result['v'][] = $documentHandler->save($vertexCollection, $documentV4);
        $result['v'][] = $documentHandler->save($vertexCollection, $documentV5);
        $result['v'][] = $documentHandler->save($vertexCollection, $documentV6);
    } catch (Exception $e) {
            // any other error
            echo ('An error occured. Exception: ' . $e);
    }

    // Save the edges
    try {
        echo "$nameV2 is a child of $nameV1<br> ";
        $result['e'][] = $edgeHandler->saveEdge(
            $edgeCollection,
            $vertexCollection . '/' . $nameV2,
            $vertexCollection . '/' . $nameV1,
            $documentE1,
            $options = array()
        );
        echo "$nameV3 is a child of $nameV2<br> ";
        $result['e'][] = $edgeHandler->saveEdge(
            $edgeCollection,
            $vertexCollection . '/' . $nameV3,
            $vertexCollection . '/' . $nameV2,
            $documentE2,
            $options = array()
        );
        echo "$nameV4 is a child of $nameV3<br> ";
        $result['e'][] = $edgeHandler->saveEdge(
            $edgeCollection,
            $vertexCollection . '/' . $nameV4,
            $vertexCollection . '/' . $nameV3,
            $documentE3,
            $options = array()
        );
        echo "$nameV5 is a child of $nameV1<br> ";
        $result['e'][] = $edgeHandler->saveEdge(
            $edgeCollection,
            $vertexCollection . '/' . $nameV5,
            $vertexCollection . '/' . $nameV1,
            $documentE4,
            $options = array()
        );
        echo "$nameV6 is a child of $nameV5<br> ";
        $result['e'][] = $edgeHandler->saveEdge(
            $edgeCollection,
            $vertexCollection . '/' . $nameV6,
            $vertexCollection . '/' . $nameV5,
            $documentE5,
            $options = array()
        );
        echo "<font style='font-family: monospace;'>";
        echo "$nameV1<br> ";
        echo "+ $nameV2<br> ";
        echo "|  + $nameV3<br> ";
        echo "|  |  + $nameV4<br> ";
        echo "+ $nameV5<br> ";
        echo "+ $nameV5<br> ";
        echo "|  + $nameV6<br> ";
        echo "</font>";

        // return the result;
        return $result;
    } catch (Exception $e) {
            // any other error
            echo ('An error occured. Exception: ' . $e);
    }
}

// helper function that takes the connection and the query to execute.
function doAQLQuery($connection, $query)
{
    // query through AQL

    $statement = new \triagens\ArangoDb\Statement($connection, array(
                                                                    "query"     => '',
                                                                    "count"     => true,
                                                                    "batchSize" => 1000,
                                                                    "_sanitize" => true,
                                                               ));
    $statement->setQuery($query);
    $cursor = $statement->execute();

    $result = $cursor->getAll();

    return $result;
}

// AQL query example functions

// Function that gets all paths from vertex v4 to v1
function getPathFromV4ToV1($connection)
{
    $query = 'FOR p IN PATHS(vertices_20130301_01, edges_20130301_01, "outbound")
  FILTER p.source._id == "vertices_20130301_01/v4" && p.destination._id == "vertices_20130301_01/v1"
  RETURN p';

    $result = doAQLQuery($connection, $query);

    return $result;
}

// Function that gets the paths to all descendants of v1

function getPathToAllDescendantsOfV1($connection)
{
    $query = 'FOR p IN TRAVERSAL(vertices_20130301_01, edges_20130301_01, "vertices_20130301_01/v1", "inbound", {
  strategy: "depthfirst",
  minDepth:1,
  paths: true,
  followEdges: [ { label: "child_of" } ]

})
RETURN p
';

    $result = doAQLQuery($connection, $query);

    return $result;
}

// Function that gets the paths to all children of v1
function getPathToChildrenOfV1($connection)
{
    $query = 'FOR p IN TRAVERSAL(vertices_20130301_01, edges_20130301_01, "vertices_20130301_01/v1", "inbound", {
  strategy: "depthfirst",
  maxDepth: 1,
  minDepth:1,
  paths: true,
  followEdges: [ { label: "child_of" } ]

})
RETURN p
';

    $result = doAQLQuery($connection, $query);

    return $result;
}

// Function that gets the paths to all parents of v4
function getPathToParentsOfV4($connection)
{
    $query = 'FOR p IN TRAVERSAL(vertices_20130301_01, edges_20130301_01, "vertices_20130301_01/v4", "outbound", {
  strategy: "depthfirst",
  maxDepth: 1,
  minDepth:1,
  paths: true,
  followEdges: [ { label: "child_of" } ]

})
RETURN p
';

    $result = doAQLQuery($connection, $query);

    return $result;
}

// Function that gets the paths to all ancestor of v4
function getPathToAllAncestorsOfV4($connection)
{
    $query = 'FOR p IN TRAVERSAL(vertices_20130301_01, edges_20130301_01, "vertices_20130301_01/v4", "outbound", {
  strategy: "depthfirst",
  minDepth:1,
  paths: true,
  followEdges: [ { label: "child_of" } ]

})
RETURN p
';

    $result = doAQLQuery($connection, $query);

    return $result;
}

// Function that drops collections given
function dropCollections($connection, $collections)
{
    // register a collection handler to work with the 'users' collection
    $collectionHandler = new CollectionHandler($connection);
    echo "dropping collections...";
    try {
        foreach ($collections as $collection) {
            $collectionHandler->drop($collection);
        }
        echo "dropped.<br>";
    } catch (Exception $e) {
        die ('Could not drop collection. Exception: ' . $e . '<br>');
    }
}

// *********************************************************************************************************************
// Start example code

// register the connection to ArangoDB
$connection = new Connection(getConnectionOptions());

// register a collection handler to work with the 'users' collection
$collectionHandler = new CollectionHandler($connection);

// assign the collection names...
$vertexCollection = 'vertices_20130301_01';
$edgeCollection   = 'edges_20130301_01';

// finally drop the collections...
// remark this line if you want to drop the collections by hand.
dropCollections($connection, array($vertexCollection, $edgeCollection));

// create the vertices and edges collections...
// remark those lines if you want to create the collection by hand.
echo "creating the '$vertexCollection' vertex collection...";
try {
    $collection = new Collection();
    $collection->setName($vertexCollection);
    $collectionHandler->create($collection);
    echo "created.<br>";
} catch (Exception $e) {
    echo ('Could not create collection. Exception: ' . $e . '<br>');
}

echo "creating the '$edgeCollection' edge collection...";
try {
    $collection = new Collection();
    $collection->setName($edgeCollection);
    $collection->setType(3);
    $collectionHandler->create($collection);
    echo "created.<br>";
} catch (Exception $e) {
    echo ('Could not create collection. Exception: ' . $e . '<br>');
}

// setup our vertices and edges....
echo "trying to setup our vertices and edges... <br>";
$result = setupVerticesAndEdges($connection, $vertexCollection, $edgeCollection);

// AQL Examples

// get the path from vertex v4 to v1
$result = getPathFromV4ToV1($connection);
echo "<br>*****************************************<br>";
echo "get all paths from vertex v4 to v1<br>";
echo "<br>*****************************************<br>";
var_dump($result);

// get the paths to all descendants of v1
$result = getPathToAllDescendantsOfV1($connection);
echo "<br>*****************************************<br>";
echo "get the paths to all descendants of v1<br>";
echo "<br>*****************************************<br>";
var_dump($result);

//get the paths to all children of v1
$result = getPathToChildrenOfV1($connection);
echo "<br>*****************************************<br>";
echo "get the paths to all children of v1<br>";
echo "<br>*****************************************<br>";
var_dump($result);

// get the paths to all ancestors of v4
$result = getPathToAllAncestorsOfV4($connection);
echo "<br>*****************************************<br>";
echo "get the paths to all ancestors of v4<br>";
echo "<br>*****************************************<br>";
var_dump($result);

//get all paths to all parents of v4
$result = getPathToParentsOfV4($connection);
echo "<br>*****************************************<br>";
echo "get all paths to all parents of v4<br>";
echo "<br>*****************************************<br>";
var_dump($result); 
```

# teradata - 在 FastExport 脚本中获取特殊字符

> ID：15157458
> 
> 赞同：1
> 
> 时间：2013-03-01T12:10:32.787
> 
> 标签：teradata

```
 sel cast(trim(Env) as char(6)) ,
    cast (trim(Databasename) as char(30)) from DB.Top_Space_Consumer; 
```

我通过快速导出并以以下格式获取数据来运行查询。

```
%^@^@PKPTD DB1
%^@^@PKPTD DB2
%^@^@CLPTD DB3
%^@^@PKPTD DB4 
```

我想要以下格式的数据。

```
PKPTD DB1
PKPTD DB2
CLPTD DB3
PKPTD DB4 
```

由于表格的大小是“大”几千兆字节，我无法使用文本编辑器打开它以删除字符。

**问题是：** 为了不获得这个“额外字符”，我应该在脚本中进行哪些更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T21:03:31.340

我猜你的导出格式是 FASTLOAD 或 BINARY。FastExport 将两个二进制字节的数据附加到每条记录的开头。

过去为了解决这个问题，我将字段与选择的分隔符连接在一起，并将数据类型转换为字符，然后将记录转换为固定长度。这确实意味着末尾有尾随空白，但是在将数据加载到下一个环境时可以很容易地考虑到这一点。然后您可以将导出格式更改为 TEXT，二进制数据将不会附加到记录的开头。

# java - 为什么 JEthereal 中 jpcap.JpcapCaptor 类中的 getDeviceList() 方法是本机的？

> ID：15157459
> 
> 赞同：0
> 
> 时间：2013-03-01T12:10:33.567
> 
> 标签：java, packet-capture, jpcap, native-methods

我最近下载了该`JEthereal.jar`文件以捕获我的互联网连接上的数据包流量，`JEthereal`并对其进行研究。它可以很好地从文件中读取数据包，`.pcap`但是在尝试捕获数据包时，它给了我一条消息：

> “没有找到设备。这可能意味着您安装了JPcap，但没有安装libpcap / WinPcap。请按照网站上的说明进行安装。大约需要15秒，非常值得。”

所以我下载了它的源代码并在 Eclipse 中打开它，因为我已经安装了`WinPcap`.

在浏览代码时，我来到了应该发现网络设备的部分。包中类的静态方法`getDeviceList()`，它应该返回一个类型为 的网络设备数组。以下是它在网上给出的声明：`JpcapCaptor``jpcap``NetworkInterface`

```
public static NetworkInterface[] getDeviceList() 
```

但是，在我下载的源代码中，该方法没有正文，并且已声明`native`即

```
public static native NetworkInterface[] getDeviceList(); 
```

我现在应该怎么做才能识别我的设备？在网上和这个门户上搜索时，我知道`jpcap.dll`我的 system32 文件夹中应该存在一个文件（我使用的是 Windows7），我应该`WinPcap`为此安装。我已经安装了，system32文件夹`WinPcap`中没有`jpcap.dll`文件。另外，我想我应该将 system32 添加到我的 PATH 变量中，我还没有这样做，因为那里没有`jpcap.dll`。

提前谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T19:37:57.470

如果“在网上和这个门户网站上搜索时，我知道`jpcap.dll`我的 system32 文件夹中应该存在一个文件（我使用的是 Windows7），我应该`WinPcap`为此安装。”，那么，俗话说，[有人*错了*在互联网上](http://xkcd.com/386/)。

`jpcap.dll`不是WinPcap*的*一部分，您无需*安装*WinPcap 即可获得它。您需要安装 Keita Fujii 的 Jpcap（他似乎不再使用它，并且 JEthereal 站点为其链接的站点不再存在，但 JEthereal 站点有一些本地下载链接，有些人创建了自己的分支它）。

 *你有安装任何版本的 Jpcap 吗？如果是这样，你是从哪里得到的？它可能是不适用于 JEthereal 的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T23:17:40.217

> 为什么 JEthereal 中 jpcap.JpcapCaptor 类中的 getDeviceList() 方法是本机的？

因为`getDeviceList()`是作为本机 (C/C++) 代码实现的。

> 在尝试捕获数据包时，它给了我一条消息，上面写着：“找不到设备......”
> 
> 我正在使用 Windows7

触摸。从 Windows Vista（它是第一个实现类似 root 的 pretensions 的 Windows）开始，您需要以**管理员**身份运行 jpcap 。这必须**至少**在系统重新启动后第一次运行 jpcap 时完成（以便授权 winpcap 库访问网络资源）。

来自[jpcap 常见问题](http://www.eden.rutgers.edu/%7Emuscarim/jpcap/faq.html)

> **问：我无法获取网络接口列表或无法捕获任何数据包。为什么？**
> 
> 这可能是因为您没有运行基于 Jpcap 的应用程序所需的管理权限。
> 
> 在 Windows 2000/XP 上，您的帐户应该在管理员组中。
> 
> 在 Windows Vista 上，即使您的帐户在管理员组中，您仍然需要使用“以管理员身份运行”选项。要使用该选项，请右键单击应用程序图标，然后选择“以管理员身份运行”。如果您的应用程序是基于命令行的，您需要使用“以管理员身份运行”选项打开命令提示符，并在该命令提示符中运行您的应用程序。*

# copying - 将 IplImage 的一部分复制到另一个 IplImage 中（相同大小是源）

> ID：15157461
> 
> 赞同：1
> 
> 时间：2013-03-01T12:10:40.723
> 
> 标签：copying, iplimage, roi

我有一组蒙版图像，每次我在相机上识别出先前已知的场景时都需要使用它们。所有掩码图像均为 IplImage 格式。在某些情况下，例如，相机已经平移到稍微不同但附近的位置。这意味着如果我在当前场景的中间某处进行模板匹配，我将能够识别场景中模板在该场景中的一些偏移量。我需要做的就是使用这些变化来调整蒙版图像 ROI，以便可以根据模板匹配适当地覆盖它们。我知道有一些功能，例如：

```
cvSetImageROI(Iplimage* img, CvRect roi)
cvResetImageROI(IplImage* img); 
```

我可以用它来设置裁剪/取消裁剪我的图像。但是，它并没有按我预期的方式退出。如果有人可以提出替代方案或我做错了什么，甚至是我没有想到的，我将不胜感激！

**我还必须指出，我需要始终保持图像大小相同。唯一不同的是图像中实际感兴趣的区域。我可能可以使用零/一填充来覆盖未使用的区域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T22:00:33.067

我相信不复制太多原始图像的解决方案是：

```
// Make a new IplImage
IplImage* img_src_cpy = cvCreateImage(cvGetSize(img_src), img_src->depth, img_src->nChannels);

// Crop Original Image without changing the ROI
for(int rows = roi.y; rows < roi.height; rows++) {
    for(int cols = roi.x; rows < roi.width; cols++) {        
        img_src_cpy->imageData[(rows-roi.y)*img_src_cpy->widthStep + (cols-roi.x)] = img_src[rows*img_src + cols];
    }
{

//Now copy everything to the original image OR simply return the new image if calling from a function
cvCopy(img_src_cpy, img_src); // OR return img_src_cpy; 
```

我自己尝试了代码，它对我来说也足够快（对于 332 x 332 灰度图像在大约 1 毫秒内执行）

# java - 无法实例化类对象的类型（Java）

> ID：15157462
> 
> 赞同：2
> 
> 时间：2013-03-01T12:10:46.877
> 
> 标签：java, class, object, constructor

这是我收到错误的代码（在“新”之后的第二个“杀手”处）。

```
String[] classes = new String[5];

kills[0] = "Brian Moser";
kills[1] = "James Doakes";
kills[2] = "Lila Tourney";
kills[3] = "Miguel Prado";

Killer morgan = new Killer("Dexter", 
                   "Morgan", 
                   kills,
                   4.0,
                   "Arthur Mitchell",
                   3,
                   false); 
```

这给我带来了很多麻烦，因为我看不出为什么这个声明应该基于我的 Killer 构造函数起作用。

这是杀手级：

```
import java.util.*;

public abstract class Killer{

public String firstName; 
public String lastName;
private String[] killList;
private double score;
private String nemesis;
private int accidents;
public boolean caught;

public Killer(String firstName, 
            String lastName, 
            String[] killList, 
            double score,
            String nemesis, 
            int accidents, 
            boolean caught) 
{
                this.firstName = firstName;
                this.lastName = lastName;
                for(int i = 0; i < 5; i++)
                    this.killList[i] = killList[i];
                this.score = score;
                this.nemesis = nemesis;
                this.accidents = accidents;
                this.caught = caught;
} //end constructor 
```

我知道这可能有一个简单的解决方案，但到目前为止，我还没有看到它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-01-06T05:01:27.343

以下是关于抽象类的几个要点

1.  抽象类是声明为抽象的类。
2.  它可能包括也可能不包括抽象方法。
3.  抽象类不能被**实例化**，但它们可以被子类化
4.  抽象类不包含任何构造函数

在您的情况下，有一个抽象类声明为**public abstract class Killer**，因为它的声明定义它是**public**的**抽象类**，命名为**Killer**，所以前面说过**Abstract 类不能被实例化**，因此您需要对其进行子类化或删除 abstract 关键字以获取其实例以供进一步[阅读 oracle 文档抽象类](http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T12:13:43.937

我们不能实例化抽象类。它是抽象类的特点。这里很抽象。

# json - 通过给定的url在windows phone 7中解析json

> ID：15157465
> 
> 赞同：-1
> 
> 时间：2013-03-01T12:11:00.753
> 
> 标签：json, windows-phone-7, parsing

请帮助我，如何在 windows phone 7 中使用给定 URL 解析 json 从示例 URL [http://api.geonames.org/citiesJSON?north=44.1&south=-9.9&east=-22.4&west=55.2&lang=中清楚地解释de&username=demo](http://api.geonames.org/citiesJSON?north=44.1&south=-9.9&east=-22.4&west=55.2&lang=de&username=demo)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:53:31.700

这是一个示例： http: [//www.codeproject.com/Articles/546430/Parse-JSON-to-Csharp-in-WinRT-Silverlight-WPF-Wind](http://www.codeproject.com/Articles/546430/Parse-JSON-to-Csharp-in-WinRT-Silverlight-WPF-Wind) 不适用于您的 URL，但它是一般解释。

# mysql - 一组 ID 的单个更新最后一行条目 - MySQL

> ID：15157470
> 
> 赞同：1
> 
> 时间：2013-03-01T12:11:30.027
> 
> 标签：mysql, sql-update

我想使用 对历史表中的一组 Id 执行更新`IN(1,2,3)`。当然，表中同一个 id 的条目不止一个。对于每个 id，更新应该只在最后一个历史条目中执行。

有没有办法通过一次更新来执行此操作？

```
UPDATE table SET fk_something = 123 WHERE id_something IN (1,2,3) AND ...? 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:09:00.527

如果您有一个列来确定最后日期是什么，那么您可以使用`UPDATE`类似于这样的子查询：

```
update yourtable t1
inner join
(
  select max(updated_at) MaxDate, id_something
  from yourtable 
  group by id_something
) t2
  on t1.id_something = t2.id_something
  and t1.updated_at = t2.MaxDate
set t1.fk_something = 123
where t1.id_something IN (1,2,3) 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/b56b3/1)。

这使用子查询来获取`max(updated_at)`每个`id_something`. 然后将这些行连接到您的表中，以确保您更新最新的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:01:28.930

是的：

```
 UPDATE yourtable 
 SET fk_something = 123 
 WHERE id_something=1
 ORDER BY datecreated DESC
 LIMIT 0,1
 ;
 UPDATE yourtable 
 SET fk_something = 123 
 WHERE id_something=2
 ORDER BY datecreated DESC
 LIMIT 0,1
 ;
 ... 
```

只需将其包装在一个程序中即可简化。（请注意，如果您将 CSV 列表作为参数传递，则需要使用准备/执行）

# mysql - 用于绘图的 SQL 查询

> ID：15157471
> 
> 赞同：2
> 
> 时间：2013-03-01T12:11:30.203
> 
> 标签：mysql, sql

所以我有一个数据挖掘程序，它记录大量视频流的收视率数据。流不是 24/7。该应用程序每 60 秒检查一次每个流的统计信息。

我有 2 个表，一个“数据”表，其中包含时间戳、流名称和当前查看器的列。仅当流处于实时状态时才会添加记录。另一个表是总计表，它包含时间戳、总收视率和直播的流数。

我要做的是生成一个特定时期内选定数量的流的收视率图表。

目前我一直在这样做以获得总数：

```
SELECT DATE_FORMAT(FROM_UNIXTIME(timestamp), "%k:%i") as time, viewers FROM
`tftv_totals` WHERE timestamp BETWEEN <START> and <END> 
```

然后，如果我想要单独的流，我会为每个流执行此操作并在 excel 中手动组合：

```
SELECT timestamp, viewers FROM `tftv_data` 
WHERE timestamp
    name = <Stream Name>
    BETWEEN <Start> and <End> 
```

我想知道是否有任何方法可以产生如下输出：

```
+------------+---------+---------+---------+
| 时间戳 | 流1 | 流2 | 流3 |
+------------+---------+---------+---------+
| 1361962826 | 2 | 3 | 0 |
| 1361962886 | 3 | 4 | 0 |
| 1361962946 | 4 | 8 | 0 |
+------------+---------+---------+---------+

```

关键是stream3一直处于离线状态。

我可以在 PHP 中做到这一点，但为了方便起见，我希望将它保留在 SQL 中，并希望有一种比几个嵌套循环更有效的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:16:09.143

也许是这样的：

```
SELECT
    timestamp,
    SUM(CASE WHEN tftv_data.name='stream1' THEN tftfv_data.viewers ELSE 0 END) AS stream1,
    SUM(CASE WHEN tftv_data.name='stream2' THEN tftfv_data.viewers ELSE 0 END) AS stream2,
    SUM(CASE WHEN tftv_data.name='stream3' THEN tftfv_data.viewers ELSE 0 END) AS stream3
FROM
    tftv_data
GROUP BY
    timestamp 
```

# ruby - 在 ruby 循环中将对象添加到数组将最新对象持久保存到所有数组项

> ID：15157475
> 
> 赞同：0
> 
> 时间：2013-03-01T12:11:40.033
> 
> 标签：ruby, arrays, object

以下代码演示了一个 ruby​​ (1.8.7) for 循环，其中从 excel 读取的列和标题保存为对象（对象属性：标题=字符串，内容=字符串数组）。当我阅读几列时，我想将它们保存为对象数组。

问题是每个循环在增加数组“矩阵”并成功存储新对象的同时，似乎用最新的对象覆盖了矩阵数组的先前元素。当我遍历完成的数组时，我只得到同一个对象的 x 个实例。

```
 column_count = count_columns(worksheet)
  row_count = count_rows(worksheet)

  matrix = Array.new
  #i don't think header needs to be an array in the below loop, but anyway...
  header = Array.new
  contents = Array.new

  for column in 0..column_count - 1
    header[column] = worksheet.Cells(1, column + 2).Value
    for row in 0..row_count
      contents[row] = worksheet.Cells(row + 2, column + 2).Value
    end
    matrix[column] = Worksheet_Column.new(header[column], contents)
  end

  #looping after the array was created puts the same information in each iteration
  for column in 0..matrix.length - 1
    puts "loop = #{column}"

    puts matrix[column]
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:51:26.517

好吧，我仍然没有看到允许内容向后写入的基本错误，但是注意到问题发生在内容而不是标题上，这个解决方案已经成功。

```
for column in 0..column_count - 1
  contents[column] = Array.new
  header[column] = worksheet.Cells(1, column + 2).Value
  for row in 0..row_count
    contents[column][row] = worksheet.Cells(row + 2, column + 2).Value
  end
  matrix[column] = Worksheet_Column.new(header[column], contents[column])
end 
```

# c# - 如何从 MyControl(Button) 获取按钮文本？

> ID：15157476
> 
> 赞同：-6
> 
> 时间：2013-03-01T12:11:40.457
> 
> 标签：c#, get, controls, set

我有个问题。

**用户控制**

```
Button : UserControl
...
public string naz
{ get { return this.button1.Text; } }
... 
```

在我的表格上我可以做到这一点

```
if(button0.naz == "1"){ MessageBox.Show("My Text"); }
if(button1.naz == "1"){ MessageBox.Show("My Text"); }
if(button2.naz == "1"){ MessageBox.Show("My Text"); } 
```

但是当我尝试以下时`.naz`无法识别。

```
for(int i=0;i<=60;i++)
{
    if(this.Controls["button" + i.ToString()).naz == "1")
    {
        MessageBox.Show("My Text"); 
    }  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:17:04.690

您需要将控件转换为用户控件的类型。如果你的班级真的被叫`Button`了，那么像这样

```
var myButton = this.Controls["button" + i] as Button;
if(myButton != null && myButton.naz == "1")
... 
```

# c# - 打印排序数组

> ID：15157477
> 
> 赞同：-1
> 
> 时间：2013-03-01T12:11:50.983
> 
> 标签：c#, arrays, list, sorting, loops

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace SkihopperOpgave
{
class Program
{
    static void Main(string[] args)
    {
        string deltagerNavn = " ";
        int hopLængde = 0;
        string[] deltager = new string[5];
        int[] hopLængder = new int[5];
        string[] pladsNumre = new string[5] { "1\. ", "2\. ", "3\. ", "4\. ", "5\. " };

        for (int i = 0; i < deltager.Length; i++)
        {
            Console.Write("Indtast deltagernavn: ");
            deltager[i] = Console.ReadLine();

            Console.Write("Indtast hoplængde for deltager: ");
            hopLængder[i] = Convert.ToInt32(Console.ReadLine());

            for (int j = hopLængder.Length-1; j>0; j--) //Bubblesort
            {
                for (int k = 0; k < j; k++)
                {
                    int b = hopLængder[k];
                    hopLængder[k] = hopLængder[k+1];
                    hopLængder[k+1] = b;
                }
            }
            for (int s = 0; s < deltager.Length; s++)
            {
                Console.WriteLine(pladsNumre[s] + hopLængder[s] + deltager[s]);
            }

        }

    }
}
} 
```

我正在尝试创建一个程序，通过对跳跃距离（hoplængde）进行排序，打印出滑雪者的排序列表（deltagere）。发生的情况是用户首先输入跳台滑雪者的名字，然后输入跳跃距离。然后程序应该以这种格式打印出一个排序列表：1\. 80 John (Newline) 2\. 45 Mark... 等等。

每次用户输入滑雪跳线时，应打印列表，所有距离按降序排序。我已经为跳台滑雪者的名称及其距离创建了一个数组，但是我在如何将`int`数组中的第一个元素与字符串数组中的第一个元素连接起来以及如何在每次迭代中正确排序时遇到了麻烦. 我尝试为这项工作创建一个冒泡排序，但我得到了错误的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:25:02.600

看看静态方法 Array.Sort() 的重载——它可以做你想做的事。

您还应该阅读有关 SortedList<> 类的信息 - 它可能是您的任务的更好选择，并使用已发布的评论（由 Fischerman）来声明实体类。

我认为这对家庭作业来说已经足够了=）

# python - 创建多个 sqlite 数据库

> ID：15157478
> 
> 赞同：0
> 
> 时间：2013-03-01T12:11:51.773
> 
> 标签：python, django, sqlite, mongoengine

我有使用 MongoDB 和 Mongoengine 的 Django 应用程序。我需要创建几个 sqlite 数据库。每个 SQLite 数据库都与某个 MondoDB 集合的所有文档之一相关联（例如 MainDocument）。SQLite 复制了一些依赖于 MainDocument 的具有一对多关系的集合文档。所以... MainDocument 上的文档数是 1074！我需要创建 1074 个不同名称的 sqlite 数据库。我用 django orm 填充一个默认的 sqlite 数据库，然后用其他名称复制它，然后截断所有表并重新开始另一个文档。这需要很长时间。如何更快地做到这一点？django orm 可以在不配置 1074 数据库路由器的情况下使用吗？

我试过使用 ramfs，但它仍然很慢。

# android - 如何在 SQLite DB 中执行容错名称搜索

> ID：15157483
> 
> 赞同：1
> 
> 时间：2013-03-01T12:12:09.120
> 
> 标签：android, sqlite, search, android-sqlite

我有一个有 4 列的数据库，

```
|ID|CATEGORY|NAME|NATION| 
```

并且有一个简单的搜索方法，`SELECT WHERE NAME LIKE SEARCHKEYWORD`返回搜索项，但这不是很实用，因为关键字必须与名称相同才能找到某些内容。

如何执行更有效的搜索，容忍关键字和存储项目之间的微小差异？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:19:44.163

使用此查询来选择您输入的内容

```
SELECT * FROM DBNAME WHERE NAME LIKE '%SEARCHKEYWORD%' 
```

或使用首字母

```
SELECT * FROM DBNAME WHERE NAME LIKE 'SEARCHKEYWORD%' 
```

从最后

```
SELECT * FROM DBNAME WHERE NAME LIKE '%SEARCHKEYWORD' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T13:36:48.227

使用： `SELECT * FROM DBNAME WHERE lower(NAME) LIKE '%SEARCHKEYWORD%'` 并且始终将 SEARCHKEYWORD 设为小写。

# css - CSS 问题 - 无法制作 出现内联

> ID：15157485
> 
> 赞同：0
> 
> 时间：2013-03-01T12:12:20.690
> 
> 标签：css, html

我有以下 HTML：

```
@using (Html.BeginForm("Create", "BicycleSellerListing", FormMethod.Post, new { enctype = "multipart/form-data" })) {
    @Html.ValidationSummary(true)

    <fieldset style="margin:5px;">
        <legend>List a Bicycle for Sale</legend>

        <div style="display: inline">
            <div style="display: inline">
                @Html.LabelFor(model => model.BicycleManfacturer)
            </div>
            <div style="display: inline">
                @Html.DropDownList("ManufacturerList")
            </div>

            <div style="display: inline">
                @Html.LabelFor(model => model.BicycleType)
            </div>
            <div style="display: inline">
                @Html.DropDownList("TypeList")
            </div>

            <div style="display: inline">
                @Html.LabelFor(model => model.BicycleModel)
            </div>
            <div style="display: inline">
                @Html.EditorFor(model => model.BicycleModel)
                @Html.ValidationMessageFor(model => model.BicycleModel)
            </div>
 ....
 .... 
```

我无法使标签和编辑字段彼此相邻（通过使用内联）。编辑字段始终显示在标签下方。有谁知道我可能做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:27:51.797

内联样式意味着如果空间允许，则 div 将内联对齐。现在在父 div 上你没有给出任何宽度。所以它会根据它的Child占用空间。现在让我们假设第一个孩子被插入。父 div 将占用它的子空间。现在你想插入另一个孩子。即使下一个 Child 具有内联显示，它也不会在其兄弟姐妹旁边找到任何空间，因为兄弟姐妹和父 div 占用相同的空间。因此它将在下一行呈现。尝试这样做：

```
@using (Html.BeginForm("Create", "BicycleSellerListing", FormMethod.Post, new { enctype = "multipart/form-data" })) {
    @Html.ValidationSummary(true)

<fieldset style="margin:5px;">
    <legend>List a Bicycle for Sale</legend>

    <div style="display: inline; width: 1000px;">
        <div style="display: inline">
            @Html.LabelFor(model => model.BicycleManfacturer)
        </div>
        <div style="display: inline">
            @Html.DropDownList("ManufacturerList")
        </div>

... 
```

# c# - 将参数从视图页面的 HTML 表单传递到控制器

> ID：15157491
> 
> 赞同：0
> 
> 时间：2013-03-01T12:12:43.453
> 
> 标签：c#, html, asp.net-mvc

我在 MVC 中工作。我有一个视图，说 view1，它由一个 HTML 表单组成，如下所示：

```
 <form action='/Exercise/Exercise4_SubmitForm' method="post">
    Name: <input type="text" name="name" /><br />
    Emp: <input type="text" name="id" /><br />
    DateofBirth: <input type="text" name="Dateofbirth" /><br />
    Age: <input type="text" name="age" /><br />
    .
    so on
    .
    .
    <input type="submit" name="submit" value="Save" />
    </form> 
```

我有 17 个文本框，上面只提到了 4 个。

现在 mvc 动作方法必须是

```
 public ActionResult Exercise4(string name, string code, string age, string dateofBirth,...)
    {
      //my code here
    } 
```

我的问题是，有什么方法可以让我不必在上面给出的 mvc 操作方法中指定每个 17 个参数。因为下次可能有 70 个参数，所以指定每个参数是非常繁琐的工作。“我不想使用 HTML Helpers。”

请帮助我！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T12:20:43.723

创建模型

```
public class YourModel
{
    public string name {get;set;}
    public string code {get;set;}
    public string age {get;set;}
    public string date {get;set;}
    .
    .
    .
} 
```

然后，在视图的顶部放置

```
@model Namespace.YourModel 
```

之后切换所有输入

```
@Html.EditorFor(m => m.name)
@Html.EditorFor(m => m.code)
@Html.EditorFor(m => m.age)
@Html.EditorFor(m => m.date) 
```

如果您不确定如何执行最后一部分，请创建一个新视图并选中创建强类型视图并从组合框中选择您的模型。还根据您的需要选择脚手架模板。那是一个插入、编辑、删除、列出的表格吗？

接收 Post 的操作将改为接收您的模型

```
public ActionResult Exercise4(YourModel model)
    {
      //my code here
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:19:44.830

如果我是你，我会先看看： [http ://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-5](http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-5)

事实是，表单中的字段必须是模型的一部分（您使用的是 MVC 对吗？），然后帖子将包含您的模型。

# c# - 内部实际发生的事情

> ID：15157497
> 
> 赞同：-3
> 
> 时间：2013-03-01T12:13:06.663
> 
> 标签：c#

我在代码中有这三个 linse

```
int i = 5;
object a = i;
i += 1; 
```

我在想 a 的值也将是 6，但它是 5。

实际发生了什么请清除它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T12:18:18.473

值类型是副本。

> 基于值类型的变量直接包含值。 **将一个值类型变量分配给另一个会复制包含的值**。这与引用类型变量的赋值不同，后者复制对对象的引用而不是对象本身。

[**值类型**（C# 参考）](http://msdn.microsoft.com/en-us/library/s1ax56ch.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T12:17:37.610

当你这样做

```
object a = i; 
```

整数`i`被“装箱”（另请参见[装箱和拆箱（C# 参考指南）](http://msdn.microsoft.com/en-us/library/yz2be5wk.aspx)），并将 COPY`i`放入框中。因此，更改原始`i`文件不会对 产生影响`a`，这就是为什么您在检查时看到它没有变化的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T12:48:09.610

赋值运算符的工作原理取决于您是在复制**值**还是**引用**类型。基本类型和结构，如 int，是值类型，而对象是引用类型。

当你这样做时：

```
int i = 5;
object a = i;
i += 1; 
```

您将 5 的值复制到堆栈并将其标记为 i。然后，在堆上创建对象a，并将对它的引用放在堆栈上，并将i的值复制到对象a中。然后， i 加一 - 堆上对象 a 的内容没有改变。

这是一个不同的示例，可能会使差异更加清晰：

```
class test{
        static void Main(string[] args)
        {
            Value i = new Value(5);
            Value a = i;
            i.number += 1;
            Console.WriteLine(i.number);
            Console.WriteLine(a.number);
        }
 }
 public class Value
 {
        public Value(int x){number = x;}
        public int number { set; get; }
 } 
```

本例中的两个对象都将打印 6 作为 number 的值，因为 a 现在是对 i 的引用。如果您不确定一个对象是否是对另一个对象的引用，您始终可以使用 ReferenceEquals() 方法。

# python - 请求库：cx_Freeze 后缺少 SSL 握手证书文件

> ID：15157502
> 
> 赞同：10
> 
> 时间：2013-03-01T12:13:24.877
> 
> 标签：python, python-requests, cx-freeze

我正在使用 requests 库的 python 3.3 中构建一个应用程序。当我尝试使用 SSL 连接获取 URL 时，我想使用 verify = true 来验证它。这在运行我的 python 脚本时非常有效。

当我冻结相同的脚本时，它会崩溃。它遗漏了一些东西，我真的不知道如何将它集成到我的冻结应用程序中。

我收到以下错误（这也会触发其他错误，但我不会在此处发布它们）：

```
Traceback (most recent call last):
File "C:\Python33-32\lib\site-packages\requests\packages\urllib3\connectionpool.py", line 422, in urlopen
body=body, headers=headers)
File "C:\Python33-32\lib\site-packages\requests\packages\urllib3\connectionpool.py", line 274, in _make_request
conn.request(method, url, **httplib_request_kw)
File "C:\Python33-32\lib\http\client.py", line 1049, in request
self._send_request(method, url, body, headers)
File "C:\Python33-32\lib\http\client.py", line 1087, in _send_request
self.endheaders(body)
File "C:\Python33-32\lib\http\client.py", line 1045, in endheaders
self._send_output(message_body)
File "C:\Python33-32\lib\http\client.py", line 890, in _send_output
self.send(msg)
File "C:\Python33-32\lib\http\client.py", line 828, in send
self.connect()
File "C:\Python33-32\lib\site-packages\requests\packages\urllib3\connectionpool.py", line 105, in connect
ssl_version=self.ssl_version)
File "C:\Python33-32\lib\site-packages\requests\packages\urllib3\util.py", line 281, in ssl_wrap_socket
context.load_verify_locations(ca_certs)
FileNotFoundError: [Errno 2] No such file or directory 
```

似乎缺少 ca_certs 。requests 库中有一个名为 cacert.pem 的文件，但我不知道这是否是丢失的文件以及如何导入它，因为它似乎没有集成到我最终的冻结包中。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-05T12:54:15.213

查看请求源，您似乎可以将`cacert.pem`文件的路径传递为`verify=path`，而不是`verify=True`. 因此，您无需修改​​请求即可使其正常工作。

您可以传递文件的路径以包含在`include-files`cx_Freeze 选项 ( [docs](http://cx_freeze.readthedocs.org/en/latest/distutils.html#build-exe) ) 的参数中。你可以从请求中找到路径，所以这样的东西应该在`setup.py`你用来冻结它的时候起作用：

```
import requests.certs
build_exe_options = {"include_files":[(requests.certs.where(),'cacert.pem')]}

#... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-09T15:47:25.247

正如[Thomas K](https://stackoverflow.com/users/434217/thomas-k)所说，如果启用验证，则需要包含*CA证书文件。*

但是，我发现，至少对我来说，`requests`会寻找`[INSTALL PATH]\library.zip\cacert.pem`哪个会失败。

我通过复制`cacert.pem`所描述的来解决它

```
import requests.certs
build_exe_options = {"include_files":[(requests.certs.where(),'cacert.pem')]}

#... 
```

并在执行请求时直接指定其路径：

```
requests.get(..., verify = '[INSTALL PATH]\cacert.pem') 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-08-11T09:14:23.273

您还可以使用环境变量“REQUESTS_CA_BUNDLE”（如[http://docs.python-requests.org/en/latest/user/advanced/#ssl-cert-verification](http://docs.python-requests.org/en/latest/user/advanced/#ssl-cert-verification)所述）

这比更正您的所有请求要简单得多：

```
os.environ["REQUESTS_CA_BUNDLE"] = os.path.join(os.getcwd(), "cacert.pem") 
```

# javascript - Eclipse JavaScript 格式化程序疯狂（即：填充过多）

> ID：15157504
> 
> 赞同：6
> 
> 时间：2013-03-01T12:13:27.137
> 
> 标签：javascript, eclipse, code-formatting

我很难让我的 JavaScript 很好地格式化日食。在第一个示例中，它的行为符合预期（不是第二个 url 的长度）：

![表现良好](../Images/f8fdf9a134fe827004b6b26cc971c4e4.png)

每当我有一个较长的 url 时，eclipse 就会疯狂地格式化我的代码，并且到处都有额外的填充，如下例所示：

![表现不好](../Images/1cd16c45ffd8e0757988b9fbce825035.png)

为什么 JavaScript 格式化程序会有这样的行为，我该如何解决？

（以防万一：我没有安装任何格式化插件，我只是使用 Eclipse Juno 自带的默认插件）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-24T08:32:19.397

该问题可以通过访问解决

```
Preferences > JavaScript > Code Style > Formatter 
```

这些是步骤：

1.  创建一个新配置文件（因为您无法编辑内置配置文件），如果您还没有，然后单击`Edit...`。
2.  打开`Line Wrapping`选项卡。
3.  在该`Maximum line width`字段中，输入**9999**。
4.  单击`Apply`和`Ok`。

对于超过 9999 个字符的代码行，问题再次出现，但我可以忍受。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-02T03:26:53.553

示例中的长 url 会影响 "$.ajax(..." 和 "$(function()..."。

至于“$(function()...”，设置在 Preferences/JavaScript/Code Style/Formatter/Line Wrapping/Function Calls/Arguments. 'Do not wrap' 可用。

至于“$.ajax(...”，它类似于 Java 格式化程序中的“合格调用”。(Preferences/Java/Code Style/Formatter/Line Wrapping/Function Calls) 不幸的是，JSDT 没有这方面的 UI。 （首选项/JavaScript/代码样式/格式化程序/换行/函数调用）

这是 JSDT 1.4.1(WTP R3.4.1) 的一个技巧。

1.  启动 Eclipse
2.  打开首选项/JavaScript/代码样式/格式化程序
3.  点击“新建”
4.  根据需要输入配置文件名称，在列表框中选择'Eclipse [built-in]'（或JavaScript Conventions），取消选中'Open the edit dialog now'（无需编辑），然后单击'OK'
5.  关闭首选项并退出 Eclipse
6.  使用文本编辑器打开以下文件
    `workspace/.metadata/.plugins/org.eclipse.core.runtime/.settings/org.eclipse.wst.jsdt.core.prefs`
7.  找到以下行并将 16 替换为 0
    `org.eclipse.wst.jsdt.core.formatter.alignment_for_selector_in_method_invocation=16`
8.  保存
9.  启动 Eclipse

（因为你有自己的个人资料，也许 1-5 是不必要的）

当您在首选项中编辑格式化程序设置时，此 hack 将被恢复。- （为防止覆盖，您需要做的就是导出格式化程序配置文件，编辑 XML 并将 'org.eclipse.wst.jsdt.core.formatter.alignment_for_selector_in_method_invocation' 更改为 0。现在再次保存并重新导入。此更改是永恒的。

我认为这不能满足您的需求，我猜最好使用其他格式化程序（第 3 方插件）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T23:41:22.240

我找到了一个临时解决方案：

1.  去 `Window -> Preferences -> JavaScript -> Code Style -> Formatter`

2.  将活动配置文件设置为 JavaScript 约定。

3.  点击`Edit`

4.  在`Indentation`选项卡中，设置`Tab policy`为**Spaces only**。

5.  将`Indentation size`和都设置`Tab size`为**3**。

6.  由于您无法覆盖默认配置文件，请更改配置文件名称并保存。

7.  按`Ctrl`+ `Shift`+`F`并享受。

**注意：**我不喜欢有 3 个空格，我更喜欢我的旧 4 个空格，但这是一个临时解决方案，直到有人找到更好的方法来解决这个问题。我只是想分享。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-26T15:27:14.657

这是我发现的：在“换行>函数调用”中，将底部的“缩进策略”设置为“缩进一个”。这会创建没有过多空格（或制表符）的缩进。我没有用你的确切代码尝试过，但我也看到过类似的问题。

# linux - 与在启动时运行的脚本不同的结果

> ID：15157506
> 
> 赞同：0
> 
> 时间：2013-03-01T12:13:35.123
> 
> 标签：linux, install4j

我想在继续安装之前检测计算机上是否安装了某些库，但我无法使其正常工作。

我有以下 shell 脚本：

```
#!/bin/bash

verify_distro(){
CHECK_IF_PACKAGE=`dpkg -s ia32-libs`
result=`echo $?`
echo ${result}
if [ ${result} == 0 ]; then
    echo "ia32-libs installed"
    return 0
else
    echo "not installed"
    return 1
fi
}

verify_distro 
```

如果我安装了 ia32-libs 并在控制台中手动运行它，然后执行`echo $?`查看输出，我会得到 0 退出代码，因为一切都已正确安装。

我将此脚本设置为在安装的启动阶段运行，就在请求权限步骤之后，并将其设置为等待终止和输出流。为了让我能够停止安装程序，我还将失败策略设置为“作为用户是在失败时重试还是退出”。

问题是，尽管安装了软件包，脚本仍然失败，安装程序会询问是继续还是退出。

我不确定如何解决此问题，因此如果不满足某些先决条件，我可以停止安装程序。或者有没有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:22:29.800

尝试消除检查其他脚本输出的无用代码行：

```
#!/bin/bash

verify_distro(){

    dpkg -s ia32-libs > /dev/null

    if [ $? == 0 ]; then
        echo "ia32-libs installed"
        return 0
    else
        echo "not installed"
        return 1
    fi

}

verify_distro 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T19:02:37.733

在启动时运行此脚本时，您并没有确切说明错误是什么。可能是您的 shell 的 PATH 尚未初始化，在这种情况下，脚本将无法找到“dpkg”可执行文件。如果事实上这就是问题所在，指定 dpkg 的完整路径，例如“/usr/bin/dpkg -s ia32-libs”将解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T14:54:23.653

将脚本文件添加到 Installer->Custom Code & Resource，然后指定

```
${installer:sys.resourceDir}/scriptName.sh 
```

对于“可执行”属性或“运行可执行文件或批处理文件”操作。

这也适用于“启动”节点。

# git - 更改权限后 Git 无法推送

> ID：15157516
> 
> 赞同：2
> 
> 时间：2013-03-01T12:13:45.437
> 
> 标签：git, ubuntu, gitolite

我一直在使用 git+gitolite+redmine 安装很长时间没有问题。当我在 Windows 上开发时，服务器在 ubuntu 上运行，并使用 rsa 密钥将数据推送到服务器进行登录。

我遇到的唯一小问题是 redmine 存储库浏览器给了我 404 错误。所以今天我决定在我的 git 用户主页上使用 'chmod 777' 来解决这个问题。那行得通，但是...

现在我不能从我的 Windows 电脑推送到我的服务器（也不能拉）。

我已将 .ssh 目录的访问权限改回“600”。我还缺少什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T12:31:29.580

为了使 ssh 正常工作，您需要确保 .ssh 和任何父目录的“组”或“世界”都没有目录可写。

`.ssh`本身应该在 700 中，并且 authorized_keys 在`600`：请参阅“ [Git SSH authentication](https://stackoverflow.com/questions/13425811/git-ssh-authentication/13428529#13428529) ”。

`777`on homedir 将立即中断 ssh，因为 ssh 守护进程将拒绝访问`~/.ssh/authorized_keys`，因为部分路径（这里是 homedir）可能被组或其他人更改。

# href - 下载文件，斜杠问题

> ID：15157520
> 
> 赞同：1
> 
> 时间：2013-03-01T12:14:05.937
> 
> 标签：href

我用它来下载 PDF：

```
echo '<a href= "' .$lineDetails[0]. '"> file </a>' 
```

当我单击`file`时，文件不会下载，因为锚点 href 是 `http://www.pas.com/\\admin\mypdffile.pdf`

如何将链接格式化为`http://www.pas.com//admin/mypdffile.pdf`正斜杠。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T12:41:50.553

发生这种情况是因为`$lineDetails[0]`提供了文件的 Windows 样式路径。您必须以某种方式将路径中的反斜杠替换为普通斜杠。

**编辑 - 希望你不介意哈斯特**

使用[str-replace](http://php.net/manual/en/function.str-replace.php)执行此操作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T12:44:05.043

用来`str_replace`替换它们。代码将是：

```
echo '<a href= "' . str_replace('\\', '/', $lineDetails[0]) . '"> file </a>'; 
```

# git - git 日志摘要

> ID：15157523
> 
> 赞同：7
> 
> 时间：2013-03-01T12:07:28.170
> 
> 标签：git, logging

我是 git 新手，我正在尝试完成以下任务：我想打印一个简短的摘要，列出提交的标题、作者、时间戳（可选），以及添加/删除/更新的数量。

我所做的是我使用`git log --shortstat --oneline`它，它*几乎*达到了我的要求，只是它缺少提交更改的作者。我可以稍微调整命令以显示作者吗？

P/S：这是我从上面的命令中得到的，我希望它也能显示给作者。

```
2d2b0b9 Commit#1 **[Authors]**    
 2 files changed, 8 insertions(+), 7 deletions(-)
e90dc73 Commit#2 **[Authors]**    
 2 files changed, 20 insertions(+), 12 deletions(-) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-01T12:17:46.013

看看`git log --pretty=format:<format string>`，[这里有一个很好的解释](http://git-scm.com/book/en/Git-Basics-Viewing-the-Commit-History)。

例如

```
git log --pretty=format:"%h - %an (%ae): %s" --shortstat 
```

将为您提供哈希 ( `%h`)、作者姓名和电子邮件 ( `%an`, `%ae`) 以及主题 ( `%s`)，然后是`--shortstat`行

# mysql - 一些 sql 查询来获取没有关系的数据

> ID：15157526
> 
> 赞同：-1
> 
> 时间：2013-03-01T12:14:17.167
> 
> 标签：mysql, sql

有三个表'users'，'groups''users_groups'用户和组表之间的关系是多对多的，users_groups 存储该关系。

```
 users        users_groups                             groups
 -id (pk)     -user_id(fk references users)            -id (pk)
 -username    -group_id (fk references groups)         -name
 -password 
```

数据：

```
users
1\. abc
2\. admin
3\. user
4\. tester

Groups
1\. testgroup
2\. newgroup

Users_groups
group_id    user_id
   1           1
   1           2 
```

假设我们在第 1 组（测试组）页面上。我想获取所有不属于该组的用户。我怎样才能做到这一点？如果可能的话，我想用一个 sql 查询来执行这个

更新

```
SELECT u.username, g.name
FROM users u
LEFT JOIN groups_users ug ON u.id = ug.user_id
LEFT JOIN groups g ON g.id = ug.group_id
WHERE g.id !=1 OR g.id IS NULL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:20:05.377

```
SELECT u.username FROM
users u
LEFT JOIN
    users_groups ug ON u.id = ug.user_id,
    groups g ON g.group_id = ug.group_id

WHERE g.name != 'testgroup'
GROUP BY u.username 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:11:50.183

这是一个简单的查询：

```
select u.*
from users u
where u.id not in (select user_id from user_groups ug where group_id = 1) 
```

如果您想按名称而不是编号引用：

```
select u.*
from users u
where u.id not in (select user_id
                   from user_groups ug join
                        groups g
                        on ug.group_id = g.id
                   where g.name = 'testgroup'
                  ) 
```

# google-maps - 在谷歌地图中计算两个火车站的路线距离

> ID：15157528
> 
> 赞同：2
> 
> 时间：2013-03-01T12:14:18.693
> 
> 标签：google-maps, google-maps-api-3, driving-directions

我知道使用 Google API，可以计算两点之间的路线距离，但是我看到的大多数示例是方向服务计算汽车/步行/自行车路线上的距离。

从代码中可以得到两个大城市在铁路上的距离（代码如下），但我也想得到 16 个段的距离，它们是两个大城市之间的小站。如何？

```
 var directionsService = new google.maps.DirectionsService();
 var directionsDisplay = new google.maps.DirectionsRenderer(rendererOptions);
 directionsDisplay.setMap(map);

 var request = {
       origin: 'Chester', 
       destination: 'Liverpool',
       travelMode: google.maps.TravelMode.TRANSIT,
       unitSystem:google.maps.UnitSystem.METRIC
 };

 directionsService.route(request, function(response, status) {
   if (status == google.maps.DirectionsStatus.OK) {

   ////////////////////////////////////////////////////////////////////////////
     directionsDisplay.setDirections(response);
    var path = response.routes[0].overview_path;
    var legs = response.routes[0].legs;
    for (i=0;i<legs.length;i++) {
      var steps = legs[i].steps;
      for (j=0;j<steps.length;j++) {

        var transitMode = steps[j].travel_mode;

        if (transitMode == "TRANSIT") {
                var vehicle = steps[j].transit.line.vehicle.type;
                if (vehicle == "HEAVY_RAIL") {          
                  var nextSegment = steps[j].path;

          console.log('segment   '+nextSegment.length);
          for (k=0;k<nextSegment.length;k++) {
         console.log(nextSegment[k].hb+"     "+nextSegment[k].ib);
             route_polyline.getPath().push(nextSegment[k]);
          }

                  console.log('rail');                       
                }
        }
      }
    }
    route_polyline.setMap(map);
   }
 }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T17:05:22.663

您是否需要车站之间的最短距离而不是行驶距离？如果是这样，您需要一个火车站数据库并使用[**Haversine**](http://rosettacode.org/wiki/Haversine_formula)公式来计算它。我有一个[**演示**](http://daviestrachan.co.uk/maps/stationmap8a.php)，它使用它来查找某个位置半径内的火车站。这可以修改以满足您的要求

# php - PHPUnit setUp 函数中分配的对象实例在测试函数中变为非对象

> ID：15157544
> 
> 赞同：0
> 
> 时间：2013-03-01T12:15:22.760
> 
> 标签：php, unit-testing, testing, phpunit, fatal-error

我有一个类 DummyClass，它使用构造函数在创建对象实例时存储一个值：

```
class DummyClass
{
    private $foo = '';

    function __construct($foobar)
    {
        $this->foo = $foobar;
    }

    public function getFoo() { return $foo; }
} 
```

然后我有一个测试类DummyTest，它使用setUp() 来构造一个DummyClass 的实例。然后，在 test__construct() 中，它断言它自己的属性 $foo 和从 DummyClass 实例返回的变量相等：

```
require_once 'DummyClass.php';

class DummyTest extends PHPUnit_Framework_TestCase
{
    public $instance = NULL;
    public $foo;

    public function setUp()
    {
        $foo = 'bar';
        $this->instance = new DummyClass($foo);
    }

    public function test__construct()
    {
        $foobar = $instance->getFoo();
        $this->assertEquals($foobar, $foo);
    }

} 
```

但是，当我在 phpunit 中运行测试时，出现错误：

> 致命错误：在第 16 行的 C:\wamp\www\DummyTest.php 中的非对象上调用成员函数 getFoo()

为什么 $instance 不是 test__construct() 中的对象，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:21:21.537

您可以使用 访问类的对象`this`。检查这个，

```
public function test__construct()
{
    //$foobar = $instance->getFoo(); 
    $foobar = $this->instance->getFoo(); 
    $this->assertEquals($foobar, $foo);
} 
```

# java - 在 JSON 对象 Android 中更改 Name() 的值

> ID：15157546
> 
> 赞同：0
> 
> 时间：2013-03-01T12:15:24.723
> 
> 标签：java, android, json

嗨，我有一个`JSONObject`我已经变成了一个`Array`循环遍历该数组的变量，以查看它是否存在，如果不创建一个我需要然后将其写回数组，然后返回到`JSON Object`我目前已经得到但不能的继承人帽子中不太清楚如何将值写回 a `JSON Object`？

```
public static void updateLocalDataWithObject(Context activityContext, JSONObject fullNetworkDataFromFile) throws JSONException{

             JSONObject fullNetworkfile = fullNetworkDataFromFile.getJSONObject("data");
             JSONObject tempUserDict = fullNetworkfile.getJSONObject("user");
             String user_pref_club = tempUserDict.getString("primary_club_id");
             Log.v("globals", "3.)user_pref_club = " + user_pref_club);
             JSONObject userClubsDict = fullNetworkfile.getJSONObject("user_clubs");
             Log.v("globals", "userClubsDict = " + userClubsDict);

             if(userClubsDict.length()!= 0){

                 JSONArray userClubsDictKeys = new JSONArray();          
                 userClubsDictKeys=userClubsDict.names();

                 ArrayList<String> stringArray = new ArrayList<String>();
                 for(int i = 0, count = userClubsDictKeys.length(); i< count; i++)
                 {
                     try {
                         JSONObject jsonObject = userClubsDictKeys.getJSONObject(i);
                         stringArray.add(jsonObject.toString());
                     }
                     catch (JSONException e) {
                         e.printStackTrace();
                     }
                 }

                 for(String myString : stringArray){
                     Log.v("globals", "myString = " + myString);

                 }

                 Log.v("globals", "ARRAY userClubsDictKeys = " + userClubsDictKeys);
                 String clubID = userClubsDictKeys.getString(0);
                 Log.v("globals", "clubID = " + clubID);

                 if(user_pref_club =="" || (userClubsDictKeys.getString(0) == null)) user_pref_club = clubID; 
```

继承人什么被注销。我无法显示完整的数据，因为它很敏感，并且已被指示不要发布它。但我想做的是将 clubID 的值写入 JSONArray 中的新键值对，然后返回 JSONObject

```
03-01 12:00:51.269: V/globals(1085): ARRAY userClubsDictKeys = ["6496","16885"]
03-01 12:00:51.269: V/globals(1085): clubID = 6496

             } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T12:35:59.517

如果我理解正确，您想将值添加到 JSONArray/JSONObject。

要向 JSONArray 添加值，请使用

```
JSONArray json = new JSONArray();
json.put(<value>); 
```

-或者-

```
json.put(<index>, <value>); 
```

要将值添加到 JSONObject 使用

```
JSONObject json = new JSONObject();
json.put("<key>", <value>); 
```

# java - 具有相同 ATR 的差异智能卡

> ID：15157550
> 
> 赞同：0
> 
> 时间：2013-03-01T12:15:29.703
> 
> 标签：java, smartcard, javacard

在 Java 程序中，我需要区分两个相同的 Javacard 和 GlobalPlatform 智能卡（当然，具有相同的 ATR）。我需要在建立任何安全通道之前这样做，那么有没有办法知道卡中安装的小程序的帮助而不使用 GET STATUS 命令？我可以更改一张卡的 ATR 的历史字节吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T23:15:24.747

您可以使用 SELECT by NAME APDU 来尝试可能的 AID。否则，不，您不能在没有向卡管理器验证的情况下请求小程序 AID。

请注意，您可以将 AID 缩短为 5 个字节（RID），卡管理器应选择具有以相同 RID 开头的实例 AID 的小程序。

# java - 使用 Apache BeanUtils 从 Java 中的 Map 填充子对象

> ID：15157552
> 
> 赞同：0
> 
> 时间：2013-03-01T12:15:31.833
> 
> 标签：java, apache-commons-beanutils

我正在使用`org.apache.commons.beanutils.BeanUtils.populate()`从 HashMap 填充 Java bean。

java bean 有一个未填充的子对象。例如。假设我的 Map 包含一个键“xyz”，并且在 Java bean 中，子对象具有属性“xyz”，我想从 Map 中填充该属性但不填充。

需要一些帮助。

# ruby-on-rails - 为 Ruby Net::HTTP.start 中的服务调用设置 read_timeout

> ID：15157553
> 
> 赞同：12
> 
> 时间：2013-03-01T12:15:33.883
> 
> 标签：ruby-on-rails, ruby

我想在我的 ruby​​ 代码中覆盖服务调用的默认超时。我打开连接如下。

```
res = Net::HTTP.start(@@task_url.host, @@task_url.port) do |http|
    http.get("/tasks/#{task_id}")
end 
```

我尝试如下设置 read_timeout 时间，但随后在我的代码中出现 NoMethodError 异常。

```
res = Net::HTTP.start(@@task_url.host, @@task_url.port)
res.read_timeout = 10
res do |http|
    http.get("/tasks/#{task_id}")
end 
```

建议我应该如何设置 read_timeout。我希望在全局某个地方设置 read_timeout，以便我可以通过 Net::HTTPP.start() 将该超时用于我的所有服务调用

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-01T12:51:23.693

如果你使用**Ruby 1.8**，你必须使用`Net::HTTP.new`：

```
http = Net::HTTP.new(host, port)
http.read_timeout = 10

response = http.get("/")    
# or intead of above line if you need block
# http.start do
#   response = http.get("/")
# end 
```

如果您查看 的[源代码](http://www.ruby-doc.org/stdlib-1.8.7/libdoc/net/http/rdoc/Net/HTTP.html#method-c-start)，`Net::HTTP.start`您会发现它`::start`只是`::new`用`#start`方法调用：

```
# File net/http.rb, line 439
def HTTP.start(address, port = nil, p_addr = nil, p_port = nil, p_user = nil, p_pass = nil, &block) # :yield: +http+
  new(address, port, p_addr, p_port, p_user, p_pass).start(&block)
end 
```

* * *

**>= 红宝石 1.9**

您可以在[opt 参数](http://www.ruby-doc.org/stdlib-2.0/libdoc/net/http/rdoc/Net/HTTP.html#method-c-start)中设置 read_timeout ： `start(address, ..., opt, &block)`

像这样：

```
res = Net::HTTP.start(host, port, :read_timeout => 10) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T12:42:00.753

你可以使用[`open`](http://www.ruby-doc.org/stdlib-2.0/libdoc/open-uri/rdoc/OpenURI/OpenRead.html)from `OpenURI`。此方法有一个`:read_timeout`选项。我不知道如何全局设置该选项，但您可以将其包装在设置此选项的自定义函数中。

```
require 'open-uri'
module NetCustom

  def open_url(url, &task)
     open(url, :read_timeout => 20) do |file|
       yield file.read
     end
  end

end 
```

用法：

```
class Foo
  include NetCustom

  def bar
    open_url('http://example.org/tasks/') do |content|
      # Handle page text content
    end
  end
end 
```

# c# - 有没有比 Convert.ChangeType 感觉更笨拙的解决方案来从 HashTable 中获取值

> ID：15157555
> 
> 赞同：1
> 
> 时间：2013-03-01T12:15:41.840
> 
> 标签：c#, generics, .net-4.0

我正在将一些 .NET 1.1 代码重构为更易于维护的 .NET 4.0 代码，并了解对代码进行全面检修的效果。

当前代码的很大一部分依赖于[HashTable](http://msdn.microsoft.com/en-us/library/system.collections.hashtable.aspx)实例，这些实例基本上是一种属性包，包含简单值类型的值，如 int/double/single 和 string。

周围是大量的复制/粘贴代码进行转换，其中相当多的地方是“几乎”包含错误的副本。

因此，我对`LoadValue`如下功能的计划。

应用程序中的逻辑假定字符串永远不会为空，并且总是被修剪。
在我下面的方法中，基于[Convert.ChangeType](http://msdn.microsoft.com/en-us/library/system.convert.changetype.aspx)，这个解决方案感觉“笨拙”，所以：

*   有没有更笨拙的方法来做到这一点？
*   我是否在这种方法中忽略了任何明显的事情？

    ```
    /// <summary>
    /// Centralize all the null/value behaviour for converting properties in bags to business object properties.
    /// </summary>
    /// <typeparam name="T">type to get; can be simple value type (int, double, etc) or string</typeparam>
    /// <param name="properties">HashTable to get property from</param>
    /// <param name="propertyName">name of property to get</param>
    /// <returns>default(T) if property does not have value, otherwise Trimmed value for string, or value for other types.</returns>
    protected T LoadValue<T>(Hashtable properties, string propertyName)
    {
        T result;
        bool haveValue = properties[propertyName] != null;
        Type genericType = typeof(T);
        Type stringType = typeof(string);
        if (genericType.IsSubclassOf(stringType))
        {
            string stringResult;
            if (haveValue)
                stringResult = ((string)properties[propertyName]).Trim();
            else
                stringResult = string.Empty;
            result = (T)Convert.ChangeType(stringResult, genericType); //(T)(stringResult);
        }
        else
        {
            if (haveValue)
                result = ((T)properties[propertyName]);
            else
                result = default(T);
        }
        return result;
    } 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:23:24.477

因为`System.String`是`sealed`，表达式

```
genericType.IsSubclassOf(stringType) 
```

是相同的

```
genericType==stringType 
```

因此，您不需要调用`Convert.ChangeType`: 您可以`T`通过转换为 来转换`object`，如下所示：

```
object stringResult; // Note the change of type to "object"
if (haveValue)
    stringResult = ((string)properties[propertyName]).Trim();
else
    stringResult = string.Empty;
result = (T)stringResult; // It is allowed to cast object to generic T 
```

# git - Git 裸存储库已签出主分支？

> ID：15157561
> 
> 赞同：2
> 
> 时间：2013-03-01T12:16:03.343
> 
> 标签：git, git-remote, git-bare, git-config

我很确定以前有人问过这个问题，但我似乎没有找到它。很抱歉，如果它是重复的。

我有一个裸存储库，可以将其称为 project_x.git，如果我们检查它说的配置文件

```
[core]
repositoryformatversion = 0
filemode = false
bare = true
symlinks = false
ignorecase = true
hideDotFiles = dotGitOnly 
```

所以它肯定是正确的，bare = true。现在我正在尝试用清理版本替换 master 。

```
$ git push origin :master
remote: Updating references: 100% (1/1)
To http://gitrepo.local/git/project_x.git
! [remote rejected] master (branch is currently checked out)
error: failed to push some refs to 'http://gitrepo.local/git/project_x.git' 
```

我正在使用 gitblit 顺便说一句，这不是实际的服务器 url。

这个回复让我很困惑，我怎么能在我的裸仓库上有一个结帐分支？谁在那个分支上工作:)，没有意义。要么配置明智，要么 gitblit 惹恼了我。我不明白？

怎么了？

~~顺便说一句，如果我尝试相同的消息~~

```
git push -f , 
```

编辑：这可行，但您不能像我之前尝试的那样删除分支。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T12:27:13.330

`git clone <url>`裸 repo 上有一个 HEAD 集，它实际上指向当你不带参数运行时检出的分支。

据我所知，你不能删除远程 HEAD 分支，所以如果你想删除主分支，你必须推送第二个分支，将你的 HEAD 移动到该分支，然后在 master 中推送一个空分支：

本地：

```
git branch mybranch
git push origin mybranch 
```

在裸回购：

```
git symbolic-ref HEAD refs/heads/mybranch 
```

本地：

```
git push origin :master 
```

当然，`master`如果你愿意，你可以推送另一个你调用的分支，并将 HEAD 移回它。

```
git push origin newbranch:master
git symbolic-ref HEAD refs/heads/master #(on bare repo) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:27:28.987

似乎您的本地存储库正在/正在跟踪远程源/主分支。你已经检查了本地主人。

```
git push origin :master 
```

... 表示您正在删除远程跟踪分支，但是当您在本地签出相同的分支时会失败。我认为您必须签出另一个本地分支才能删除远程分支。

如果您想使用远程裸存储库“重新开始”，我会（在远程存储库上）做一个新的

```
git init --bare 
```

...然后将您的本地主机推送到该位置，然后将其设置为上游。

```
git push origin master -u 
```

# asp.net-mvc-3 - mvc3，从 Razor 视图中的下拉列表中获取名称和值？

> ID：15157563
> 
> 赞同：0
> 
> 时间：2013-03-01T12:16:05.273
> 
> 标签：asp.net-mvc-3, razor

我想从 MVC3 Razor 视图的下拉列表框中获取“名称”和“值”。请问最好的方法是什么？

剃刀代码：

```
 <div class="editor-label">
             @Html.LabelFor(model => model.Occupation)
        </div>
        <div class="editor-field">
            @Html.DropDownListFor(model => model.Occupation.PK, Model.GetLUV("Occupation",Model.Occupation.PK))
         </div> 
```

结果 HTML：

```
 <div class="editor-label">
             <label for="Occupation">Occupation</label>
        </div>
        <div class="editor-field">

            <select id="Occupation_PK" name="Occupation.PK"><option value="17">IT</option>
              <option value="18">Accountant</option>
              <option selected="selected" value="19">Solicitor</option>
            </select>
            <span class="field-validation-valid" data-valmsg-for="Occupation" data-valmsg- replace="true"></span>
        </div> 
```

IE 我想存储 PK=17 和 Occupation="IT"，而不仅仅是 PK=17。我将它持久化为 XML。

我最初的想法是添加一个隐藏字段，然后使用某种形式的 javascript 在运行时填充它。我相信我需要额外的字段来确保 modelbiding 可以选择它来填充 XML。

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:23:07.013

恶意用户可以在其浏览器上编辑下拉列表的内容，从而允许他们在您的数据库中存储他们喜欢的任何职业值。这是不可取的。

当表单被回发时，您可能希望在服务器端进行查找。查找服务将获取一个 id（在本例中为 17）并返回一个字符串（'IT'）。那么用户就不能恶意玩弄这个值了。

# android - Android：堆栈溢出就像标签输入

> ID：15157565
> 
> 赞同：1
> 
> 时间：2013-03-01T12:16:06.650
> 
> 标签：android, android-edittext

我想在 Android 中创建一个 EditView，类似于标签输入系统在 Stack Overflow 上的工作方式，当您必须为输入指定标签时，即在我的情况下输入空格键（逗号）后，输入文本的样式即类似于 Stack Overflow 的方式溢出标签出现。我是 android 和 Java 的新手，希望能提供任何指导/帮助/代码示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T12:26:53.967

在布局的水平滚动视图中添加水平线性布局。使用您的 EditText 注册 Text Watcher 并监视输入。在覆盖方法 onTextchanged() 检查输入的字符是空格还是逗号，在水平线性布局中添加按钮，并将空格或逗号之前的前一个单词作为按钮文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T13:36:12.610

我发现我想做的事情之前已经被stackoveflow社区询问和回答了。[您可以在Contact Bubble EditText](https://stackoverflow.com/questions/10812316/contact-bubble-edittext/10864568#10864568)以及[Android Labels or Bubbles in EditText](https://stackoverflow.com/questions/8090711/android-labels-or-bubbles-in-edittext)找到答案

# mysql - 我尝试在 sql 中创建这个函数

> ID：15157568
> 
> 赞同：0
> 
> 时间：2013-03-01T12:16:13.510
> 
> 标签：mysql, sql, database

这给出错误：

> #1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 'TABLE where studentid=id) 附近使用的正确语法；IF(@sid = 'INDIAN') THEN SET @data:= (s' 在第 6 行

```
 CREATE FUNCTION `dbu_application`.`atudentfee` (id int,code varchar(255))
    RETURNS int(11)

    BEGIN
    SET @sid := (SELECT TYPE FROM TABLE where studentid=id);
    IF(@sid = 'INDIAN') THEN
    SET @data:= (select data from table2 where progcode='code');
    ELSE set $data:=0;
    END IF;
    RETURN @data;
   END$$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:19:10.473

`TABLE`是 MySQL 中的保留字。您不能将其用作实际表格的名称，除非您将其放在反引号中

```
SELECT TYPE FROM `TABLE` where studentid=id 
```

# c# - 用我自己的替换父类事件

> ID：15157575
> 
> 赞同：4
> 
> 时间：2013-03-01T12:16:34.837
> 
> 标签：c#

我想实现一个新版本`TextBox`，我们称之为它只会在每三次文本更改后`FunkyTextBox`引发事件。`TextChanged`

如果我只想为此引发另一个事件，我们称之为它`FunkyTextChanged`，实现很简单：

```
class FunkyTextBox : TextBox
{
    int counter = 0;
    int MAX_CHANGES = 3;
    public event EventHandler FunkyTextChanged;

    public FunkyTextBox()
    {
        this.TextChanged += (s, e) =>
        {
            if (++counter < MAX_CHANGES)
                return;
            counter = 0;
            if (FunkyTextChanged != null)
                FunkyTextChanged(this, null);
        };
    }
} 
```

但是这种方法有一个缺点 - 用户会假设使用`TextChanged`，这是在单次更改后引发的父版本并且不会考虑订阅`FunkyTextChanged`事件。

是否可以为此使用`TextChanged`事件？以某种方式向用户隐藏父母的 TextChnaged`FunkyTextBox`并用它自己的替换它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T12:45:35.817

我会选择类似的东西：

```
 class FunkyTextBox : TextBox
    {
        int counter = 0;
        int MAX_CHANGES = 3;

        public FunkyTextBox()
        {
        }

        protected override void OnTextChanged(EventArgs e)
        {
            if (++counter < MAX_CHANGES)
                return;
            counter = 0;
            base.OnTextChanged(e);
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T12:21:54.313

`OnTextChanged`只需用您的实现覆盖受保护的方法。

```
protected override void OnTextChanged(TextChangedEventArgs e){
  // your code here
} 
```

由于此方法是虚拟的，如果您使用自定义文本框，则应调用此方法。

有关WinForms， 请参见[此处，有关 WPF，请参见](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.textboxbase.ontextchanged.aspx)[此处](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.textboxbase.ontextchanged.aspx)。

# sql - 日期列的 SQL 查询优化

> ID：15157577
> 
> 赞同：0
> 
> 时间：2013-03-01T12:16:45.367
> 
> 标签：sql, query-optimization

我有一个从不更新且很少插入的表。我需要优化此表以快速查询日期列和 nvachar(32)。

我正在将索引添加到表中，我不确定将日期列拆分为单独的列是否对性能最好，例如年、月和日的单独列，或者只是保留日期列。

查询基本上将在 nvarchar 列和年列上，或者可能包括年、月和日。

我实际上要做的是在姓氏列和日期列上运行 SOUNDEX 子句

例如：

```
SELECT DISTINCT [Surname]
FROM [dbo].[sometable]
WHERE YEAR(Datecolumn) = 2011 AND SOUNDEX(Surname) = SOUNDEX('smith') 
```

什么对性能最好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T12:24:42.780

如果这就是您要执行过滤器的方式，那么索引是无用的，因为您正在将函数应用于这些列。对于`DateColumn`你可以做的

```
DateColumn >= '20110101' AND DateColumn < 20120101 
```

如果确实需要，您还可以使用年份和月份创建计算列，并在这些列上创建索引。对于`Surname`我认为没有太多工作要做的专栏，`SOUNDEX`搜索会很慢，并且不会像您使用它那样使用索引。您仍然可以考虑使用`SOUNDEX`应用于 的函数的结果创建一个持久计算列，`Surname`在该列上创建一个索引并使用计算列进行过滤。这应该会加快您的查询速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:25:57.553

对于日期时间列，您可以将 where 子句用作：

```
WHERE DateColumn BETWEEN '01/01/2011'  AND '01/01/2012' 
```

但是，如果您要对 where 子句索引中的列进行任何操作，则毫无用处。我能提供的是将预先计算的 Surname 的 SOUNDEX 值存储在单独的列中

# perl - perl stat() 不适用于带有特殊字符的文件名

> ID：15157578
> 
> 赞同：1
> 
> 时间：2013-03-01T12:16:45.970
> 
> 标签：perl, stat

如果文件名具有像“@”这样的字符，perl 的 stat() 似乎不起作用。

```
-rw-r--r-- 1 root root 0 Mar  1 17:33 /tmp/mark@er.txt 
```

使用的 Perl 命令：

```
#perl -e 'my $modtime = (stat("/tmp/mark@er.txt"))[9]|| die "$!"'
  No such file or directory at -e line 1. 
```

谁能帮助如何为 stat() 转义这些字符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T12:23:40.070

`perl`在那里“看到”一个`@er`数组，所以你正在`stat`ing `/tmp/mark.txt`。试试这个：

```
perl -e 'my $modtime = (stat("/tmp/mark\@er.txt"))[9] || die "$!"' 
```

或者您可以使用非插值单引号`q()`(thanks amon)

```
perl -e 'my $modtime = (stat(q(/tmp/mark@er.txt)))[9] || die "$!"' 
```

# javascript - 带有 html 元素的 Raphael SVG/vml z 索引

> ID：15157581
> 
> 赞同：0
> 
> 时间：2013-03-01T12:16:52.447
> 
> 标签：javascript, html, svg, raphael, vml

我有一个 div 绝对定位的 html 容器。这些 div 具有在它们之间绘制 raphael svg/vml 箭头的单击事件 - 但是，如果我使 raphael 出现在带有 z 索引的 html 顶部，我将无法再单击 html div，如果我将它留在 html 后面我看不到箭头。

有没有办法在 HTML 顶部显示我的箭头，但仍然可以单击下面的 html？

我有一种感觉没有办法做到这一点，最好的解决方案是在 raphael 中创建我的 div 元素。谁能帮忙？

我需要该解决方案在所有浏览器中工作，包括 IE6 及更高版本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T15:20:45.337

是的，正如@Duopixel 所建议的，转换为对象是最简单的解决方案。我想您也可以使 s 透明并将它们放在首位。

如果 div 包含多行文本，则需要手动插入换行符。如果是这种情况，您可能会考虑使用多个画布。您可以保持 div 原样，并在它们之间插入更多 div，每个 div 都包含自己的 Raphael 对象，用于在框之间绘制箭头。虽然大多数 Raphael 示例都涉及页面宽度的大矩形画布，但这不是必需的。

# java - 获取按指定列排序的 HibernateGridDataSource 的有效方法

> ID：15157582
> 
> 赞同：0
> 
> 时间：2013-03-01T12:16:55.303
> 
> 标签：java, hibernate, tapestry

在页面上显示表格内容的常见用法`HibernateGridDataSource`只是简单的方法：

```
public GridDataSource getList() {
    return new HibernateGridDataSource(session, Foo.class);
} 
```

我想知道，让这个数据源按指定列预排序的有效和美观的方法是什么？例如，让它成为类的`date`领域`Foo`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:36:11.010

好吧，我为自己找到了决定。任何其他更方便的方法也将不胜感激。

```
 return new HibernateGridDataSource(session, Foo.class) {
        @Override
        protected void applyAdditionalConstraints(Criteria crit) {
            crit.addOrder(Order.desc("date"));
        }
    }; 
```

# javascript - 我得到自动化服务器无法在 IE 中创建对象

> ID：15157583
> 
> 赞同：0
> 
> 时间：2013-03-01T12:16:55.987
> 
> 标签：javascript, internet-explorer, dojo, activex

1.  plugin = new ActiveXObject('Crusher.Plugin');
2.  var strVersion = plugin.Version();

在第 1 行出现错误。在创建活动 X 对象时。

我尝试了 IE9 浏览器设置（自定义级别），但我在编码部分需要这个，即任何解决问题或可以更改 IE 中的活动 x 设置的 javascript 或 dojo 将非常明显。

谢谢，

迪帕克

# java - 如何使用应用引擎图像服务将图像转换为字节 []？

> ID：15157589
> 
> 赞同：2
> 
> 时间：2013-03-01T12:17:14.670
> 
> 标签：java, image, google-app-engine

我正在尝试使用 App 引擎的图像服务，但我陷入了以下困境：

可以在网站上找到的示例如下：

```
import com.google.appengine.api.images.Image;
import com.google.appengine.api.images.ImagesService;
import com.google.appengine.api.images.ImagesServiceFactory;
import com.google.appengine.api.images.Transform;

// ...
        byte[] oldImageData;  // ...

        ImagesService imagesService = ImagesServiceFactory.getImagesService();

        Image oldImage = ImagesServiceFactory.makeImage(oldImageData);
        Transform resize = ImagesServiceFactory.makeResize(200, 300);

        Image newImage = imagesService.applyTransform(resize, oldImage);

        byte[] newImageData = newImage.getImageData(); 
```

这非常简单。我的问题是如何在将图像提供给图像服务之前将其转换为字节数组。我试图在我的电脑上本地使用该服务，而应用引擎不支持 java.awt.image 包。所以我不知道如何从图像中创建一个字节数组，反之亦然。任何人都可以帮助我吗？

谢谢

# c++ - C++11 垃圾收集器 - 为什么和如何

> ID：15157591
> 
> 赞同：42
> 
> 时间：2013-03-01T12:17:17.657
> 
> 标签：c++, c++11, garbage-collection

在[C++11 的语言特性列表中](http://gcc.gnu.org/projects/cxx0x.html)有：

> 对垃圾收集和基于可达性的泄漏检测的最小支持

（但它似乎没有在 GCC 和 Clang 中实现。）

为什么标准委员会引入了这种垃圾收集 C++ 语言特性？

C++ 真的需要 GC 吗？RAII 不是这么优秀的模式吗（可以统一用于内存和非内存资源，如套接字、文件、纹理......）？

GC 会破坏使用 RAII 的 C++ 代码模式的一致性吗？

有人说 GC 可以派上用场来打破循环依赖关系，但是`weak_ptr`为此目的使用智能指针不就可以了吗？

如果抛出异常会发生什么？如何修改堆栈展开语义以考虑 GC？

`IDisposable`还会引入类似C# 的模式吗？

而且，假设C++中引入了GC，指针语法会不会不一样？`^`例如，在 C++/CLI 或 C++/CX 扩展中，我们会不会有一些类似帽子的“指针” ？应该有一种方法可以区分普通的原始指针和“托管”指针，对吧？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-03-01T12:22:12.177

该提案没有引入垃圾收集器 -*如果实现选择*，它只是在某些情况下允许它。该标准只会将这些情况描述为导致未定义的行为。在这样做时，它放宽了实现的要求，为垃圾收集器提供了最小的余地。

[提案](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2670.htm)中给出的简单示例考虑了当您将指针指向动态分配的对象时，将其与另一个值进行异或，从而隐藏指针值，然后恢复原始指针值以通过它访问对象。在 C++11 之前，这将非常好，并且仍然可以使用。然而，现在这样的操作可能（见下一段）被认为是未定义的行为，这意味着实现*可以*对所指向的对象进行垃圾收集。

该标准规定，实现可以具有*宽松的指针安全性*，在这种情况下行为与以前一样，或者具有*严格的指针安全性*，这允许引入垃圾收集器。

> 实现可能*放宽了指针安全性*，在这种情况下，指针值的有效性不取决于它是否是安全派生的指针值。或者，实现可能具有*严格的指针安全性*，在这种情况下，不是安全派生的指针值的指针值是无效的指针值，除非引用的完整对象具有动态存储持续时间并且之前已被声明为可访问（20.6.4 ）。[...]实现定义了实现是否具有宽松或严格的指针安全性。

如果指针值指向动态分配的对象并且没有发生任何有趣的事情（在 §3.7.4.3 中更具体地定义），则指针值是安全派生的指针值。

如果您的实现具有严格的指针安全性，但您仍想对指针进行上述有趣的业务而不引入未定义的行为，则可以将指针声明`p`为可访问，如下所示：

```
declare_reachable(p); 
```

`<memory>`此函数与相关函数（如 、 和 ）一起`undeclare_reachable`定义`declare_no_pointers`在标题中`undeclare_no_pointers`。您还可以使用`get_pointer_safety`.

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-03-01T12:26:24.397

来自 Bjarne Stroustrup：

> 实际上，我所说的类似于“当（不是如果）自动垃圾收集成为 C++ 的一部分时，它将是可选的”。

[http://www.stroustrup.com/slashdot_interview.html](http://www.stroustrup.com/slashdot_interview.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-08T12:22:24.833

有一个建议从标准中删除此 GC 支持：

[http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2020/p2186r0.html](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2020/p2186r0.html)

并且有一个 C++ GC（Boehm）： [https ://www.hboehm.info/gc/](https://www.hboehm.info/gc/)

# javascript - java script/jquery中的语法错误第29行

> ID：15157595
> 
> 赞同：0
> 
> 时间：2013-03-01T12:17:29.383
> 
> 标签：javascript, jquery

我刚刚开始学习一些 java script/jquery。我的函数可能完全错误，但我什至无法编译它来检查它。（使用 firefox firebug 调试器）我查看了与我正在尝试编写的代码类似的其他代码，并且似乎无法解决这个语法错误，甚至看它是否会接近。如果有人可以帮助我解决这个问题，我将不胜感激！这是我的代码。

JavaScript 文档：

```
$(document).ready(function () {

    jQuery.fn.timer = function () {
        var $quote = $('#quote').children;
        var i = ('$quote p').css('display', ':visible');
        $quote.eq(i).animate({
            opacity: 0
        }, 300).css('display', ':none');

        if (i > $quote.length) {
            i = 0;
            $quote.eq(i).css('display', ':visible').animate({
                opacity: 100
            }, 300);

        } else {
            $quote.eq(i + 1).css('display', ':visible').animate({
                opacity: 100
            }, 300);
        }

        window.setInterval(function () {
            $('#quote').timer();
        }, 5000);

    });
})(); (edit) 
```

编辑：对不起，“：”是论坛上的错字，真的有一个“；” 在最后。我尝试多次更改该区域的代码，但仍然遇到相同的语法错误。第 29 行是我的编辑上方的行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T12:19:27.927

该行`var i = ('$quote p').css('display', ':visible');`似乎`$`在零件之前缺少 a `('$quote p')`。

**编辑**

那条线也应该是`$('#quote p')`？

**编辑编辑**

此外，正如 DCoder 在评论中所说，最后一个字符应该是 a`;`而不是 a `:`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-01T12:33:53.637

我认为你是缺少括号的问题。请查看以下代码是否对您有帮助

```
$(document).ready(function () {

jQuery.fn.timer = function () {
    var $quote = $('#quote').children;
    var i = ('$quote p').css('display', ':visible');
    $quote.eq(i).animate({
        opacity: 0
    }, 300).css('display', ':none');

    if (i > $quote.length) {
        i = 0;
        $quote.eq(i).css('display', ':visible').animate({
            opacity: 100
        }, 300);

    } else {
        $quote.eq(i + 1).css('display', ':visible').animate({
            opacity: 100
        }, 300);
    }

    window.setInterval(function () {
        $('#quote').timer();
    }, 5000);

 }; 
```

});

# delphi - 如何访问具有相同名称的父属性

> ID：15157596
> 
> 赞同：0
> 
> 时间：2013-03-01T12:17:30.090
> 
> 标签：delphi, inheritance, properties, setter

我需要在表单的 FormStyle 属性更改之前进行一些处理，但 TForm.SetFormStyle （属性设置器）是私有的，有没有办法覆盖该属性但仍然可以访问父类属性？

```
TMyForm = class(TForm)
private
  procedure MySetFormStyle(Style: TFormStyle);
public
  property FormStyle: TFormStyle read Parent.FormStyle write MySetFormStyle;
end;

TMyForm.MySetFormStyle(Style: TFormStyle);
begin
  if Parent.FormStyle <> Style then
    DoSomething;

  Parent.FormStyle := Style; 
end; 
```

我用的是delphi 2010

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T12:20:41.163

这会创建一个新属性，而不是覆盖现有属性。事实上，不可能覆盖属性。如果`SetFormStyle`是虚拟的，那么您可以覆盖设置器。

您可以访问继承的属性。像这样：

```
type
  TMyForm = class(TForm)
  private
    function GetFormStyle: TFormStyle;
    procedure SetFormStyle(Value: TFormStyle);
  public
    property FormStyle: TFormStyle read GetFormStyle write SetFormStyle;
  end;

function TMyForm.GetFormStyle: TFormStyle;
begin
  Result := inherited FormStyle;
end;

procedure TMyForm.SetFormStyle(Value: TFormStyle);
begin
  if Value <> FormStyle then
  begin
    DoSomething;
    inherited FormStyle := Value; 
  end;
end; 
```

这样做的问题是您的属性不会取代`TForm`.dfm 文件中的属性。读取 .dfm 文件时，`FormStyle`指的是`TForm`属性。如果您有对`TMyForm`.

所以，虽然上面的代码会编译，但我不希望它会解决你的问题。我已经回答了如何从派生类访问继承属性的直接问题，但我认为我没有解决您的实际问题。

我的直觉是您提出的设计和上面的代码是一个坏主意。由于修改表单样式会导致重新创建窗口，也许您真正需要的是覆盖`CreateParams`或`CreateWnd`.

# javascript - 在javascript中将本地时区转换为GMT

> ID：15157597
> 
> 赞同：0
> 
> 时间：2013-03-01T12:17:31.853
> 
> 标签：javascript

我正在尝试将 HST 格式的日期对象转换为标准格式。但是日期对象返回 NaN。

```
completeByTimestamp="1/25/2013 5:15 PM HST";
var completByTmUTC= (new Date(completeByTimestamp)).toUTCString(); 
```

# java - 为什么在android上使用opencv时会出现蓝色效果？

> ID：15157604
> 
> 赞同：1
> 
> 时间：2013-03-01T12:17:51.397
> 
> 标签：java, android, opencv, mat

我的英语不好）我正在使用 opencv v2.4.2

```
Bitmap bitmap = BitmapFactory.decodeFile(mDefaultPath + name_s + type);
Bitmap mBitmap = bitmap.copy(Bitmap.Config.ARGB_8888, false); 

Mat s_image = new Mat(); 
Utils.bitmapToMat(mBitmap,s_image);
Mat rgb0 = new Mat();
Mat o_image = new Mat();
MatOfKeyPoint points = new MatOfKeyPoint();

FeatureDetector surf0 = FeatureDetector.create(FeatureDetector.ORB);
surf0.detect(s_image, points);

Log.d(TAG, "Sum of keypoints "+points.toList().size());

Imgproc.cvtColor(s_image, rgb0, Imgproc.COLOR_RGBA2RGB);
Features2d.drawKeypoints(rgb0, points, rgb0);

Imgproc.cvtColor(rgb0, o_image, Imgproc.COLOR_RGB2RGBA);

Utils.matToBitmap(o_image, mBitmap);
Highgui.imwrite(mDefaultPath + name_o + type, o_image); 
```

进行此操作后，我在屏幕上（在 ImageView 上）获得了正常图像，但是在 sdcard 上的文件中，我获得了具有蓝色效果的图像，我认为将位图转换为地图或将 rgba 转换为 rgb 并返回

你能帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T12:20:30.453

`imwrite`函数需要传递图像中通道的 BGR 顺序。

# php - 从 JS 对象打印指定值

> ID：15157606
> 
> 赞同：0
> 
> 时间：2013-03-01T12:17:58.433
> 
> 标签：php, jquery, json, ldap

我的 php 脚本中有一个 ldap_search 函数。我从登录的用户那里获得了一些用户信息。我将其编码为 json 并为这些信息设置了一个 cookie。在我的 js 中，我使用 jquery 函数 parseJSON 从 cookie 创建一个 js 对象。现在我想在字段中打印用户名。我怎样才能让它工作？

**编辑：我想处理来自 js 的输出。**

![Chrome 控制台日志](../Images/ab8f811157e1df3b7eebffdb3171db10.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:20:55.077

简单的，

console.log(object[0].givename[0]);

# c# - 比较数据集值

> ID：15157609
> 
> 赞同：2
> 
> 时间：2013-03-01T12:18:02.363
> 
> 标签：c#, winforms

在 winform 中，我试图将返回的数据集值与定义的值进行比较，但出现以下错误。

![Visual Studio 错误](../Images/92ab921317726f47b0f860a61e629dc5.png)

在下面的代码中，我将字符串从列表框传递给 GetStock 方法

```
public bool checkStock()
        {
            foreach (var listBoxItem in listBox1.Items)
            {
                if (Convert.ToInt32(GetStock(listBoxItem.ToString())) == 0)
                {
                    MessageBox.Show(listBoxItem.ToString() + " not in Stock!. Please delete the item before proceeding");
                    return false;
                }
            }
            return true;
        } 
```

GetStock() 的代码

```
 public DataSet GetStock(string product)
        {
            DataSet dataSet = new DataSet();
            OleDbConnection oleConn = new OleDbConnection(connString);

            try
            {
                oleConn.Open();
                string sql = "SELECT [Quantity] FROM [Product] WHERE [Product Name]='" + product + "'";
                OleDbDataAdapter dataAdapter = new OleDbDataAdapter(sql, oleConn);
                dataAdapter.Fill(dataSet, "Product");
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.ToString());
            }
            finally
            {
                oleConn.Close();
            }
            if (dataSet.Tables["Product"].Rows.Count <= 0)
                return null;

            return dataSet;
        }

    }
} 
```

在数据库中，“数量”是字符串格式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T12:21:14.743

`GetStock`返回 a`DataSet`但您将其传递给`Convert.ToInt32`：

```
if (Convert.ToInt32(GetStock(listBoxItem.ToString())) == 0) 
```

你可能想要这样的东西：

```
int stockCount = GetStockQuantity(listBoxItem.ToString());
if (stockCount == 0)
{
    MessageBox.Show(listBoxItem.ToString() + " not in Stock!. Please delete the item before proceeding");
} 
```

这是修改后的方法（注意我使用的是参数）

```
public int GetStockQuantity(string product)
{
    int quantity = 0;
    string sql = "SELECT TOP 1 [Quantity] FROM [Product] WHERE [Product Name] = ?";
    using(var oleConn = new OleDbConnection(connString))
    using(var cmd = new OleDbCommand(sql , oleConn))
    {
        cmd.Parameters.AddWithValue("?", product);
        try
        {
            oleConn.Open();
            object obj_quantity = cmd.ExecuteScalar();
            if(obj_quantity != null)
                // "In database the "Quantity" is in string format." 
                // Change it to int if possible
                int.Parse((string)obj_quantity);
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.ToString());
        }
    }
    return quantity;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T12:22:54.593

该`GetStock`方法返回 a `DataSet`，但您需要实际`int`值。试试这个：

```
Convert.ToInt32(GetStock(listBoxItem.ToString()).Tables["Product"].Rows[0]["Quantity"]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T12:25:19.250

试试这种方式：

```
var count = GetStock(listBoxItem.ToString());

if (count > 0)
{
  //TODO: other stuff
}
else
{
   MessageBox.Show(listBoxItem.ToString() + " not in Stock!. Please delete the item before proceeding");
} 
```

# c# - 我应该使用什么控件来显示不同的内容？

> ID：15157613
> 
> 赞同：0
> 
> 时间：2013-03-01T12:18:20.897
> 
> 标签：c#, silverlight, windows-phone-7, user-controls

我需要在我的 Windows Phone 应用程序中显示内容。它是文本、图像、音频、视频等。每个`Item`都有作者姓名和图像，以及`List<>`内容（不同的计数）。我需要展示它。我现在有一个解决方案 -`TemplateSelector`使用`Lisbox`or `LLS`。但是内容的组合> 30，和30个模板-大约有2000行代码，我认为这是一个糟糕的解决方案。我尝试制作通用控件，其中包括内容的所有容器（控件），并且仅填充其中的那些内容`Item`（空容器刚刚最小化），但性能非常糟糕（每个`DataTemplate`控件都有 10-11 个控件）。一个控制的解决方案很好，但我需要一个好的性能。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:46:07.003

我在 Windows Phone 中显示不同的图钉时遇到了同样的问题。我做了一个用户控件并在代码隐藏中设置了一个特定的模板：

```
public partial class Map : UserControl
{
    public Map()
    {
        InitializeComponent();
        this.Loaded += Map_Loaded;
    }

    void Map_Loaded(object sender, RoutedEventArgs e)
    {
        (this.DataContext as MyViewModel).LoadingItemsCompleted += OnLoadingItemsCompleted;
    }

    private void OnLoadingItemsCompleted(object sender, EventArgs eventArgs)
    {
        // Don't care about thats
        ObservableCollection<DependencyObject> children = Microsoft.Phone.Maps.Toolkit.MapExtensions.GetChildren(map);
        MapItemsControl itemsControl = children.FirstOrDefault(x => x.GetType() == typeof(MapItemsControl)) as MapItemsControl;

        // Here !
        foreach (GeolocalizableModel item in (this.DataContext as MyViewModel).Items)
        {
            Pushpin pushpin = new Pushpin();
            switch (item.PushpinTemplate)
            {
                case Server.PushpinTemplate.First:
                    pushpin.Template = this.Resources["firstPushpinTemplate"] as ControlTemplate;
                    break;
                case Server.PushpinTemplate.Second:
                    pushpin.Template = this.Resources["secondPushpinTemplate"] as ControlTemplate;
                    break;
                case Server.PushpinTemplate.Third:
                    pushpin.Template = this.Resources["thirdPushpinTemplate"] as ControlTemplate;
                    break;
                default:
                    if (PushpinTemplate != null) pushpin.Template = PushpinTemplate;
                    break;
            }

            pushpin.Content = item.PushpinContent;
            pushpin.GeoCoordinate = item.Location;
            itemsControl.Items.Add(pushpin);
        }
    }

    public ControlTemplate PushpinTemplate
    {
        get { return (ControlTemplate)GetValue(PushpinTemplateProperty); }
        set { SetValue(PushpinTemplateProperty, value); }
    }

    // Using a DependencyProperty as the backing store for PushpinTemplate.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty PushpinTemplateProperty =
        DependencyProperty.Register("PushpinTemplate", typeof(ControlTemplate), typeof(Map), new PropertyMetadata(null));
} 
```

模板在 UserControl 中定义。

# php - SOAP 错误日志，有什么问题？

> ID：15157616
> 
> 赞同：0
> 
> 时间：2013-03-01T12:18:29.880
> 
> 标签：php, soap

X-Powered-By：PHP/5.3.21 内容类型：text/html

**致命错误**：未捕获的 SoapFault 异常：[WSDL] SOAP-ERROR：解析 WSDL：无法从“ [http://fakeurl.com/index.php/api/v2_soap/?wsdl](http://fakeurl.com/index.php/api/v2_soap/?wsdl) ”加载：末尾的额外内容/home/alvinn/public_html/fakeurl.com/api_details/price_update_cron_job/126_last_price_update.php:7 中的文档 堆栈跟踪：#0 /home/alvinn/public_html/fakeurl.com/api_details/price_update_cron_job/126_last_price_update.php(7)：SoapClient ->SoapClient('http:///fakeur...') #1 {main}在第**7**行的**/home/alvinn/public_html/fakeurl.com/api_details/price_update_cron_job/126_last_price_update.php中抛出**

 **这是第 6 行的内容： $host = "fakeurl.com/index.php";

这是第 7 行的内容： $proxy = new SoapClient("http://".$host."/api/v2_soap/?wsdl"); //肥皂句柄

有人知道这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:23:41.887

这只是一个疯狂的猜测，`$host`应该是一个主机，设置如下

```
$host = "fakeurl.com"; 
```

但除此之外，为什么不将 "http://".$host."/api/v2_soap/?wsdl" 下载到您的浏览器并发布*查看页面源代码*的输出。**

# html - 使用css的动态左列和固定右列宽度div

> ID：15157620
> 
> 赞同：1
> 
> 时间：2013-03-01T12:18:40.960
> 
> 标签：html, css, dynamic, width

我确信这已经得到了很多回答，但我能找到的只是需要左侧固定列和右侧动态列的解决方案。我的情况有所不同，因为我需要左侧的动态列，右侧的固定列。

我有这样的工作，但是一旦我尝试在左侧（动态大小）列内建立额外的列，它就会下降到右侧（固定宽度）列的下方并填充页面的整个宽度。

我真正需要的是动态列永远不会侵入固定的右列。

此外，我需要在左侧动态列中再设置一组 3 列，其中左右列是固定的，但中心使用 100% 的可用剩余空间（在上述左侧动态列内）。

简而言之，我需要页面上的两列，它们之间使用 100% 的页面宽度，右侧列是固定宽度。在左列内，我还需要将忽略外部固定列的固定列和动态列。

在下面的示例代码中，带有黑色边框的 div 应该粘在页面的右侧并固定宽度。带有红色边框的 div 在页面上不应比带有黑色边框的 div 更靠右，带有绿色和橙色边框的 div 应该是红色边框的整个宽度。带有绿色边框的 div 中的中心 div 应使用绿色边框 div 左右列之间的所有可用空间。

我已经把我的代码放在下面

```
<div id="Wrapper" style="width: 100%;">
<div id="Container">

    <div id="right" style="border: solid 10px black; width: 300px; margin-left: 50px; float: right;">
        Fixed right hand column
    </div>

    <div id="left"  style="border: solid 10px red;">
        <div>
            <div style="border: solid 10px green; float: left;">
                <div style="border: solid 1px black; text-align: center; width: 150px; margin-right: 10px; float: left;">
                    Left
                </div>
                <div style="border: solid 1px black; text-align: center; width: 150px; margin-left: 10px; float: right;">
                    Right
                </div>
                <div style="border: solid 1px black; text-align: center; width: 100%;">
                    Centre
                </div>
            </div>
            <div style="clear: both;"></div>
            <div style="border: solid 10px orange;">
                <asp:Panel runat="server" ID="DynamicWidthPanelForLeftColumn" BackColor="#6699ff" Height="250px">
                    This panel should use just the left column but instead uses the entire width of the page.
                </asp:Panel>
            </div>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T12:22:56.783

从`float:left`#left 的内部 div 中删除并`display:table-cell`为左右 div 添加。

```
<div style="border: solid 10px green; display:table-cell">
....
</div> 
```

**[演示](http://jsfiddle.net/2r269/3/)**

# iphone - 我可以去掉 iPhone 键盘的最后一行或更改某些键的功能吗？

> ID：15157622
> 
> 赞同：1
> 
> 时间：2013-03-01T12:18:44.013
> 
> 标签：iphone, ios, objective-c, keyboard

我正在开发我的第一个 iphone 应用程序，它是一个文字游戏，我想知道是否有人可以告诉我是否有使用苹果键盘但更改某些键的方法。苹果键盘的最后一行在我计划的应用程序中是多余的，只是占用了屏幕空间。我需要一个完成按钮而不是换档按钮（在第三行）。无论如何要更改键并摆脱键盘上的键。我知道 Apple 不喜欢“自定义”键盘，但我可以自定义一两个键而不会弄乱键盘的全部功能。如果我能摆脱一条如果不能的话会很棒的线，我可以用空格键替换“提示”按钮吗？

如果不允许我向键盘添加自定义键（如提示按钮），我可以去掉 iPhone 键盘的最后一行或更改某些键的功能吗？

我对这些东西不太了解，我对它很陌生，所以提前感谢您的帮助:)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:21:47.930

**不，您无法更改 Apple 键盘按键功能系统**，但您可以通过以下方式更改键盘类型

```
typedef enum {
    UIKeyboardTypeDefault,                // Default type for the current input method.
    UIKeyboardTypeASCIICapable,           // Displays a keyboard which can enter ASCII characters, non-ASCII keyboards remain active
    UIKeyboardTypeNumbersAndPunctuation,  // Numbers and assorted punctuation.
    UIKeyboardTypeURL,                    // A type optimized for URL entry (shows . / .com prominently).
    UIKeyboardTypeNumberPad,              // A number pad (0-9). Suitable for PIN entry.
    UIKeyboardTypePhonePad,               // A phone pad (1-9, *, 0, #, with letters under the numbers).
    UIKeyboardTypeNamePhonePad,           // A type optimized for entering a person's name or phone number.
    UIKeyboardTypeEmailAddress,           // A type optimized for multiple email address entry (shows space @ . prominently).

    UIKeyboardTypeAlphabet = UIKeyboardTypeASCIICapable, // Deprecated

} UIKeyboardType; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:20:57.573

您不能更改任何键的功能。但是您可以覆盖在键盘上方，并且可以实现更多功能。

一切顺利 ！！！

# facebook - Facebook sharer.php 忽略图像

> ID：15157623
> 
> 赞同：3
> 
> 时间：2013-03-01T12:18:48.270
> 
> 标签：facebook, share, facebook-sharer

通过 facebook 的 sharer.php 共享网站资料时遇到问题

使用标准代码打开窗口：

```
url = "http://www.facebook.com/sharer.php?s=100&p[title]=" + encodeURIComponent(title) + "&p[summary]=" + encodeURIComponent(description) + "&p[url]=" + encodeURIComponent(url) + "&p[images][0]=" + encodeURIComponent(image) + "&nocache=" + randomString(8);
window.open(url, '', 'toolbar=0,status=0,width=626,height=436'); 
```

其中 p[images][0] 具有正确的图像 url。

完整的 URL 示例：[CLICKCLAC](http://www.facebook.com/sharer/sharer.php?s=100&p%5Btitle%5D=WonderfulTitle&p%5Bsummary%5D=WonderfulSummary&p%5Burl%5D=https://www.agenda.travel&p%5Bimages%5D%5B0%5D=http://agenda.travel/i/welcome-slide-1.png&nocache=lWttRCIw)

正如您在 Firebug 中看到的，DOM 树中有正确的图像，但它有“hidden_​​elem”类挂起。任何想法如何使它工作，朋友？

或者如何在 iframe 窗口中启动我的 js：D

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-01T12:55:18.850

这可能会有所帮助： [https ://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/)

我得到了你的链接和图片来显示： [https ://www.facebook.com/dialog/feed?app_id=458358780877780&link=https://www.agenda.travel&picture=http://agenda.travel/i/welcome -slide-1.png&name=Wonderful%20Title&caption=Wonderful%20Caption&description=Wonderful%20description&redirect_uri=https://mighty-lowlands-6381.herokuapp.com/](https://www.facebook.com/dialog/feed?app_id=458358780877780&link=https://www.agenda.travel&picture=http://agenda.travel/i/welcome-slide-1.png&name=Wonderful%20Title&caption=Wonderful%20Caption&description=Wonderful%20description&redirect_uri=https://mighty-lowlands-6381.herokuapp.com/)

你需要一个应用程序 ID 才能工作，我听说 sharer.php 已被弃用，这就是现在要走的路。

App 将为此提供两个参数：APP_ID 和 REDIRECT_URI 将针对它进行验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T12:33:00.397

如果可能的话，我建议在 head 中使用元标记（og：image）作为缩略图而不是共享链接属性

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-21T05:09:55.730

我有同样的问题，facebook不显示小图像，我发送更大的图像并且它有效

# jquery - IE6 和 IE7 不支持 Jquery

> ID：15157625
> 
> 赞同：-2
> 
> 时间：2013-03-01T12:18:54.747
> 
> 标签：jquery, internet-explorer

我正在使用插件**jquery-1.4.1.js**和**jquery-1.4.1.min.js**。

我有这样的功能

```
$(document).ready(function () {
            $('#DropDownList1').change(function () {
                alert('changed');
            });
        }); 
```

这在 Firefox 和 chrome 中运行良好。但在 IE6 IE7 中不起作用。但我知道 IE 支持 Activexobjects 的一件事。有没有办法将 jquery 对象转换为 Activexobjects。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:29:26.830

我认为您将 jQuery 包括在内两次。jquery-1.4.1.js 和 jquery-1.4.1.min.js 本质上应该相同，jquery-1.4.1.min.js 是代码的压缩版本。尝试摆脱一个版本，您应该在家。

# mysql - 是否有支持按部分键进行索引的 RDBMS。看里面

> ID：15157629
> 
> 赞同：0
> 
> 时间：2013-03-01T12:19:00.377
> 
> 标签：mysql, key, rdbms, partial

说，我有一个带有索引的表`(field1,field2,field3)`。我使用 执行查询`WHERE field2 = A AND field3 = B`。在这种情况下，MySQL 不会使用提到的密钥。所以，问题是：是否有一个 RDBMS 会使用这个索引？我的意思是 - 有效地使用它？

PS 请不要告诉我在表格中添加额外的键。我只想知道支持上述功能的 RDBMS（如果有的话）。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:24:17.023

~~所以我不确定你为什么认为 MySQL 不支持这种行为——确实`EXPLAIN`告诉你 othewise？~~ （对不起，我看错了问题）

你是对的：来自[MySQL docs](http://dev.mysql.com/doc/refman/5.5/en/multiple-column-indexes.html) on multiple-key index：

> 如果列不构成索引的最左前缀，则 MySQL 无法使用索引执行查找。假设您有此处显示的 SELECT 语句：
> 
> SELECT * FROM tbl_name WHERE col2=val2 AND col3=val3;
> 
> 如果 (col1, col2, col3) 上存在索引，则上述查询确实涉及索引列，因为 (col2, col3) 不是 (col1, col2, col3) 的最左侧前缀。

如果您反对添加另一个索引（如其他人所建议的那样），我对 MySQL 的唯一建议可能是创建 2 个单列索引并尝试从更新版本的 MySQL 中可用的索引合并优化中受益。这是否更有效取决于这些单独索引的基数，以及查询负载的其余部分是什么样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:29:32.613

对明显问题的最明智的答案似乎是创建另一个索引。

```
create index on table_name (field2, field3); 
```

如果 MySQL 的优化器决定不将该索引用于您描述的查询，我会感到惊讶。

# javascript - 在不同浏览器中检测 localStorage v sessionStorage 对象

> ID：15157631
> 
> 赞同：3
> 
> 时间：2013-03-01T12:19:07.323
> 
> 标签：javascript, internet-explorer, dojo, cross-browser, local-storage

我正在编写一个能够使用 localStorage 或 sessionStorage 的 Javascript 类。对此的选择是在类实例的基础上完成的。

我在这个类中有一个方法，它接收存储对象作为参数并根据存储类型（即本地 v 会话）运行一个操作。

例如。

```
function myMethod(store){
    // store: object storageObject
    //        The storage object being used (either
    //        sessionStorage or localStorage).

    if(store === sessionStorage){
        return sessionAction(store)
    }else if(store === localStorage){
        return localAction(store)
    }

    return null;
} 
```

这在 Internet Explorer 8 中不起作用，产生错误：“*类不支持自动化*”。它似乎在其他浏览器中运行良好。

我试图获取对象类型（通过**Object.prototype.toString.call( *store* )**）并对此进行测试，但 IE8 总是为此报告 [object Object]。我设法从 Stackoverflow 问题的答案中取得了一些进展：[Weird IE8 internal [[ class ]] attribute behavior](https://stackoverflow.com/questions/9872067/weird-ie8-internal-class-attribute-behavior)。这个解决方法在 IE 中给了我 [object Storage]。

但是，我仍然无法检测到不同的存储类型。是否有一种简单的方法可以在跨浏览器工作的两种类型之间进行检测？

我可以重写它，这样就不必将类型作为参数提供给方法。但是，我宁愿通过允许用户简单地提供存储对象来降低 API 的简单性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T19:32:36.447

您可以对 IE8 代码分支（受[Modernizr启发）](http://modernizr.com/)*采取积极*措施：

**比较存储：**

```
function storagesEqual(testStorage, webStorage) {
    try {
        return testStorage === webStorage;
    } catch (ex) {
        // IE8 code branch
        var testKey = "storage-test";
        var testValue = (new Date()).valueOf().toString();
        var result = false;

        try {
            webStorage.setItem(testKey, testValue);
            if(testStorage[testKey] === testValue) {
                webStorage.removeItem(testKey);
                result = true;
            }
        } finally {
            return result;
        }
    }
} 
```

**识别存储类型：**

```
function storageType(store) {

    var STORAGE_LOCAL = 'local';
    var STORAGE_SESSION = 'session';
    var STORAGE_UNKNOWN = 'unknown';

    var localStorage = window.localStorage;
    var sessionStorage = window.sessionStorage;

    if(storagesEqual(store, localStorage)) return STORAGE_LOCAL;
    if(storagesEqual(store, sessionStorage)) return STORAGE_SESSION;
    return STORAGE_UNKNOWN;
} 
```

# java - 从正在运行的应用程序窗口获取像素颜色 - JAVA

> ID：15157634
> 
> 赞同：2
> 
> 时间：2013-03-01T12:19:13.253
> 
> 标签：java, colors, window, jmonkeyengine

我正在使用`jMonkeyEngin`e 处理 JAVA 中的应用程序。如果应用程序正在运行，我需要在给定坐标处获取像素颜色。我的应用扩展了`SimpleAplication`. 机器人不工作，应用程序窗口小于屏幕。我在 SDK 中没有找到类似 , 或类似功能的东西`getColorBuffer()`，`getColor()`那么`getPixel()`还有`Java`其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T18:30:01.830

尝试从帧缓冲区中读取此信息。您可以通过添加via
来获得渲染结果（包含结果的帧缓冲区）。`SceneProcessor``ViewPort.addProcessor()`

# r - 比较两个数据帧并在R中更改一个数据帧

> ID：15157636
> 
> 赞同：0
> 
> 时间：2013-03-01T12:19:25.580
> 
> 标签：r, dataframe

在 R 中，我有 2 个数据帧“df1”和“df2”。它们如下：

```
> df1
   date        value
1  1980-12-10       5
2  1980-12-11       5
3  1980-12-12       5
4  1980-12-13       5
5  1980-12-14       5

>df2
   date        value
1  1980-12-10       15
2  1980-12-11       2
3  1980-12-12       23
4  1980-12-13       44
5  1980-12-14       434
6  1980-12-15       242
7  1980-12-16       22
8  1980-12-17       82
9  1980-12-18       723
10 1980-12-19       72 
```

我想改变“df2”。仅当 df1 与 df2 具有相同的日期时，df2 才必须包含这些值。实际上我需要以下输出：

```
>df2
   date        value
1  1980-12-10       15
2  1980-12-11       2
3  1980-12-12       23
4  1980-12-13       44
5  1980-12-14       434 
```

在R中可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T12:24:39.593

您可以只使用子集和`%in%`：

```
df2[df2$date%in%df1$date,]
        date value
1 1980-12-10    15
2 1980-12-11     2
3 1980-12-12    23
4 1980-12-13    44
5 1980-12-14   434 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T12:24:38.673

```
# read in both data frames
df1 <-
    read.table( h = TRUE , text = "date        value
    1980-12-10       5
    1980-12-11       5
    1980-12-12       5
    1980-12-13       5
    1980-12-14       5")

df2 <-
    read.table( h = TRUE , text = "date        value
    1980-12-10       15
    1980-12-11       2
    1980-12-12       23
    1980-12-13       44
    1980-12-14       434
    1980-12-15       242
    1980-12-16       22
    1980-12-17       82
    1980-12-18       723
    1980-12-19       72")

# merge df1 and df2, only keeping the date column from df1
# but note no comma, which maintains the `class` of df1,
# allowing the merge to work appropriately
merge( df1[ 'date' ] , df2 )

# and if you wanted to overwrite df2 with the new results:
df2 <- merge( df1[ 'date' ] , df2 ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T12:37:46.537

您可以使用`sqldf`, 来执行 SQL INNER JOIN(R merge)，例如：

```
library(sqldf)
sqldf('SELECT df2.*
       FROM df2
       INNER JOIN df1
       ON df1.date = df2.date')
        date value
1 1980-12-10    15
2 1980-12-11     2
3 1980-12-12    23
4 1980-12-13    44
5 1980-12-14   434 
```

# android - Android 将数据库导出到 SD 卡 - 空文件

> ID：15157641
> 
> 赞同：3
> 
> 时间：2013-03-01T12:19:36.823
> 
> 标签：android, android-sqlite, android-sdcard

我使用以下[示例](https://stackoverflow.com/questions/2814213/making-a-database-backup-to-sdcard-on-android)将我的数据库导出到 SD 卡。我可以在 SD 卡上创建文件，但是内容是空的。我已经检查过我可以从我的数据库文件中读取数据并且可以写入 SD 源。

在我的转移方法中发现了一个异常，但消息是`null`

日志猫没有显示有关异常的任何进一步信息。

任何想法为什么数据没有被传输到目标文件？

```
public boolean transferFile(File src, File dest){
        boolean flag = false;
        FileChannel inChannel=null;;
        FileChannel outChannel=null;
        if(!dest.canWrite()){
            Log.d(TAG, "unable to write to: " + dest.getPath());
                return false;
        }

        try{
            inChannel = new FileInputStream(src).getChannel();
            outChannel = new FileInputStream(dest).getChannel();
            inChannel.transferTo(0, inChannel.size(), outChannel);
            //outChannel.transferFrom(inChannel, 0, inChannel.size());
            flag = true;

            if(inChannel !=null){
                inChannel.close();
            }
            if(outChannel !=null){
                outChannel.close();
            }
        } catch (IOException e){
            Log.d(TAG, "Unable to transfer file IOException: " + e.getMessage());
        } catch (Exception e){
            Log.d(TAG, "Unable to transfer file Exception: " + e.getMessage());
        }
        return flag;
    } 
```

堆栈跟踪：

```
transferFile() Unable to transfer file Exception: java.nio.channels.NonWritableChannelException
at java.nio.FileChannelImpl.checkWritable(FileChannelImpl.java:85)
at java.nio.FileChannelImpl.transferTo(FileChannelImpl.java:399)
at com.test.activity.TestActivity$ExportDBTask.transferFile(TestActivity.java:250)
at com.test.activity.TestActivity$ExportDBTask.doInBackground(TestActivity.java:187)
at com.test.activity.TestActivity$ExportDBTask.doInBackground(TestActivity.java:1)
at android.os.AsyncTask$2.call(AsyncTask.java:287)
at java.util.concurrent.FutureTask.run(FutureTask.java:234)
at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
at java.lang.Thread.run(Thread.java:856) 
```

TestActivity.java:250对应inChannel.transferTo(0, inChannel.size(), outChannel);

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T14:13:49.843

这是我用来根据时间将数据库保存到我的应用程序中的 SD 卡的示例，因为有时出于多种原因（至少在我的情况下），您需要拥有不同的数据库副本：

```
 File sd = Environment.getExternalStorageDirectory();
   File data = Environment.getDataDirectory();

   Calendar c = Calendar.getInstance();
   int year = c.get(Calendar.YEAR);
   int month = c.get(Calendar.MONTH) + 1;
   int day = c.get(Calendar.DAY_OF_MONTH);
   int hours = c.get(Calendar.HOUR);
   int minute = c.get(Calendar.MINUTE);
   int second =  c.get(Calendar.SECOND);

   String currentDBPath = "/data/your.package.name/databases/database.sqlite";
   String backUpSystemData = "myDatabase-" + year + "-" + month + "-" + day + "-" + hours + "-" + minute + "-" + second + ".sqlite";
   File currentDB = new File(data, currentDBPath);
   File path = new File(sd + "/.MyDatabase/Database/");
   if(!path.exists()){
       path.mkdirs();
   }
   File backupDB = new File(path, backUpSystemData);
   FileChannel src = new FileInputStream(currentDB).getChannel();
   FileChannel dst = new FileOutputStream(backupDB).getChannel();
   dst.transferFrom(src, 0, src.size());
   src.close();
   dst.close(); 
```

关于您使用 FileInputStream 作为目标 in 的代码`outChannel`，请尝试更改它，`outChannel = new FileOutputStream(dest).getChannel();`以便您可以实际写入流。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T14:17:30.140

Ah, found the issue.

```
outChannel = new FileInputStream(dest).getChannel(); 
```

This should be:

```
outChannel = new FileOutputStream(dest).getChannel(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T14:35:41.590

你的手机里有存储卡吗？

否则，如果您的手机中存在存储卡，请检查它是否已安装？

还有另一种可能性是你没有权限在你的 sdcard 中写入文件..

希望这会帮助你。

您在代码中做错了。inChannel = new FileInputStream(src).getChannel(); outChannel = new FileInputStream(dest).getChannel();

这是为了阅读目的而不是为了写作目的。需要将其更改为 FileoutputSream。

# php - 我从curel获得多个Json Object，需要将其转换为PHP

> ID：15157644
> 
> 赞同：1
> 
> 时间：2013-03-01T12:19:46.537
> 
> 标签：php, curl, json

运行 curl 后，我得到一个 json 对象列表，我需要将其转换为 PHP 数组。当我使用 json_decode 它返回一个 NULL 值。然后我使用 Json 验证器检查 json 结果，然后它在 json 中显示错误。

这是 CUrl 代码

```
 $ch = curl_init();
    curl_setopt_array($ch, array(
        CURLOPT_URL => $stream_url,
        CURLOPT_ENCODING => "gzip",
        CURLOPT_FOLLOWLOCATION => true,
        CURLOPT_HTTPAUTH => CURLAUTH_BASIC,
       // CURLOPT_TIMEOUT => 120,
        CURLOPT_USERPWD => $user . ":" . $pass,
        CURLOPT_WRITEFUNCTION => "print_out_data",
        CURLOPT_RETURNTRANSFER => true,
        CURLOPT_VERBOSE => true // uncomment for curl verbosity

    ));

    $running = null;

    $mh = curl_multi_init();
    curl_multi_add_handle($mh, $ch);

    // the event loop
     $listarray= array();

    do {
        curl_multi_select($mh, 1); // wait for activity
        curl_multi_exec($mh, $running); // perform activity
        $content = curl_multi_getcontent($ch);

    } while ($running > 0);

    curl_multi_remove_handle($mh, $ch);
    curl_multi_close($ch);

    $new = json_decode($content,true)

    print_r($new); 
```

这是我打印 $content 时得到的 Json 结果

```
{"id":"tag:search.twitter.com,2005:307097936616116227","objectType":"activity","actor":{"objectType":"person","id":"id:twitter.com:111054522","link":"http://www.twitter.com/Adobe_Care","displayName":"Adobe Customer Care","postedTime":"2010-02-03T17:16:58.000Z","image":"http://a0.twimg.com/profile_images/2649331561/0a1bbf035e7e66164b2514470a6a6a00_normal.png","summary":"Official Customer Support account for Adobe | \r\nTweeting M-F 1a-5p PST | Have feedback? http://bit.ly/socialfbs | Need additional help? http://forums.adobe.com","links":[{"href":null,"rel":"me"}],"friendsCount":1508,"followersCount":9235,"listedCount":353,"statusesCount":16807,"twitterTimeZone":"Eastern Time (US & Canada)","verified":true,"utcOffset":"-18000","preferredUsername":"Adobe_Care","languages":["en"]},"verb":"post","postedTime":"2013-02-28T12:00:28.000Z","generator":{"displayName":"Sprout Social","link":"http://sproutsocial.com"},"provider":{"objectType":"service","displayName":"Twitter","link":"http://www.twitter.com"},"link":"http://twitter.com/Adobe_Care/statuses/307097936616116227","body":"@maconnolly888 AdobeTV has some great tutorials - http://t.co/1BEJBLOGJG Thanks, ^Bev","object":{"objectType":"note","id":"object:search.twitter.com,2005:307097936616116227","summary":"@maconnolly888 AdobeTV has some great tutorials - http://t.co/1BEJBLOGJG Thanks, ^Bev","link":"http://twitter.com/Adobe_Care/statuses/307097936616116227","postedTime":"2013-02-28T12:00:28.000Z"},"inReplyTo":{"link":"http://twitter.com/maconnolly888/statuses/306915834578751488"},"twitter_entities":{"hashtags":[],"urls":[{"url":"http://t.co/1BEJBLOGJG","expanded_url":"http://adobe.ly/YIz8Eg","display_url":"adobe.ly/YIz8Eg","indices":[50,72]}],"user_mentions":[{"screen_name":"maconnolly888","name":"martin connolly","id":17490272,"id_str":"17490272","indices":[0,14]}]},"retweetCount":0,"gnip":{"matching_rules":[{"value":"from:111054522","tag":null}],"urls":[{"url":"http://t.co/1BEJBLOGJG","expanded_url":"http://tv.adobe.com/show/learn-creative-cloud/"}],"klout_score":60,"language":{"value":"en"}}} {"id":"tag:search.twitter.com,2005:307098755235184640","objectType":"activity","actor":{"objectType":"person","id":"id:twitter.com:74614502","link":"http://www.twitter.com/TheNextWebAsia","displayName":"TheNextWeb Asia","postedTime":"2009-09-16T01:13:07.000Z","image":"http://a0.twimg.com/profile_images/1108109662/tnwasia_twitter_normal.png","summary":"Part of @thenextweb family here you will find the latest tech news from Asia. Updates from @jonrussell and @beijingdou","links":[{"href":"http://thenextweb.com/asia","rel":"me"}],"friendsCount":1123,"followersCount":4734,"listedCount":327,"statusesCount":2520,"twitterTimeZone":"Bangkok","verified":false,"utcOffset":"25200","preferredUsername":"TheNextWebAsia","languages":["en"],"location":{"objectType":"place","displayName":"Asia"}},"verb":"post","postedTime":"2013-02-28T12:03:43.000Z","generator":{"displayName":"TwitPublisher","link":"http://wordpress.org/extend/plugins/twitter-publisher/"},"provider":{"objectType":"service","displayName":"Twitter","link":"http://www.twitter.com"},"link":"http://twitter.com/TheNextWebAsia/statuses/307098755235184640","body":"Tencent focuses on Indonesia with local joint venture to promote its WeChat mobile app http://t.co/UggpJQHzPa by @jonrussell","object":{"objectType":"note","id":"object:search.twitter.com,2005:307098755235184640","summary":"Tencent focuses on Indonesia with local joint venture to promote its WeChat mobile app http://t.co/UggpJQHzPa by @jonrussell","link":"http://twitter.com/TheNextWebAsia/statuses/307098755235184640","postedTime":"2013-02-28T12:03:43.000Z"},"twitter_entities":{"hashtags":[],"urls":[{"url":"http://t.co/UggpJQHzPa","expanded_url":"http://tnw.to/r1kJ","display_url":"tnw.to/r1kJ","indices":[87,109]}],"user_mentions":[{"screen_name":"jonrussell","name":"Jon Russell","id":6132422,"id_str":"6132422","indices":[113,124]}]},"retweetCount":0,"gnip":{"matching_rules":[{"value":"from:74614502","tag":null}],"urls":[{"url":"http://t.co/UggpJQHzPa","expanded_url":"http://thenextweb.com/asia/2013/02/28/tencent-focuses-on-indonesia-with-local-joint-venture-to-promote-its-wechat-mobile-app/?utm_source=Twitter&utm_content=Tencent+focuses+on+Indonesia+with+local+joint+venture+to+promote+its+WeChat+mobile+app&utm_campaign=social+media&awesm=tnw.to_r1kJ&utm_medium=Twitter+Publisher"}],"klout_score":57,"language":{"value":"en"}}} {"id":"tag:search.twitter.com,2005:307099167946313728","objectType":"activity","actor":{"objectType":"person","id":"id:twitter.com:31175695","link":"http://www.twitter.com/ProntoForms","displayName":"ProntoForms","postedTime":"2009-04-14T17:36:42.000Z","image":"http://a0.twimg.com/profile_images/1606516105/ProntoAppIcon-200x200_normal.png","summary":"ProntoForms is a simple to use mobile forms app for iPhones, Blackberry, Android, and Windows Mobile devices. Try it today!","links":[{"href":"http://www.prontoforms.com","rel":"me"}],"friendsCount":459,"followersCount":369,"listedCount":3,"statusesCount":1576,"twitterTimeZone":"Eastern Time (US & Canada)","verified":false,"utcOffset":"-18000","preferredUsername":"ProntoForms","languages":["en"],"location":{"objectType":"place","displayName":"Ottawa, Canada"}},"verb":"post","postedTime":"2013-02-28T12:05:21.000Z","generator":{"displayName":"HootSuite","link":"http://www.hootsuite.com"},"provider":{"objectType":"service","displayName":"Twitter","link":"http://www.twitter.com"},"link":"http://twitter.com/ProntoForms/statuses/307099167946313728","body":"Thanks for following @jennzmitchell","object":{"objectType":"note","id":"object:search.twitter.com,2005:307099167946313728","summary":"Thanks for following @jennzmitchell","link":"http://twitter.com/ProntoForms/statuses/307099167946313728","postedTime":"2013-02-28T12:05:21.000Z"},"twitter_entities":{"hashtags":[],"urls":[],"user_mentions":[{"screen_name":"jennzmitchell","name":"Jennifer Mitchell","id":210779450,"id_str":"210779450","indices":[21,35]}]},"retweetCount":0,"gnip":{"matching_rules":[{"value":"from:31175695","tag":null}],"klout_score":40,"language":{"value":"en"}}} 
```

# php - 无法在服务器上运行简单的 PHP 文件

> ID：15157648
> 
> 赞同：-2
> 
> 时间：2013-03-01T12:20:01.520
> 
> 标签：php

您好已在服务器上上传了一个 PHP 文件。例如，使用浏览器访问该 URL 时

```
mysite.com/test.php 
```

我看到 PHP 文件的代码（内容）并且脚本似乎没有运行。

服务器是 F5 BIG-IP Apache

你能指出我可能是什么错误吗？

```
<?php

$url = rawurldecode($_GET['proxy_url']);
$cb = ! empty($_GET['callback']) ? $_GET['callback'] : null;

if(preg_match('#xxx\.xxx\.com/xxx/#', $url)){
    $url = preg_replace('#http\://xxx\.xxx\.com/xxx/#', '', $url);
}

if(! preg_match('#^https?:#', $url)){
    $url = preg_replace('#^[\.\/]+#', '', $url);

    if(!file_exists($url)){
        echo 'File not found';
        die(0);
    }
}

if(preg_match('#\.xml$#', $url)){
    header('Content-type: text/xml');
}

$file = file_get_contents($url);

if($cb){
    header('Content-type: application/javascript');
    echo $cb.'('.$file.');';

}else{
    echo $file;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:30:10.500

关闭 php 标签并检查服务器是否支持 php

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:30:36.810

您的服务器未设置为解析 PHP 脚本，请检查它是否安装了 PHP

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T12:30:39.027

你安装PHP了吗？- 如果是，请执行以下操作：

1.  从尝试一个简单的脚本开始 - 称它为 info.php：

2.  确保（假设是 Apache）你已经配置了 Web 服务器 - 请参阅[http://php.net/manual/en/install.php](http://php.net/manual/en/install.php)

如果这一切正常，那么脚本就有问题。

# search - Solr 4.0存储和搜索Profile的Normalize数据

> ID：15157650
> 
> 赞同：5
> 
> 时间：2013-03-01T12:20:04.723
> 
> 标签：search, solr, indexing, search-engine

我正在评估 Solr 4.0 和 Elastic Search 0.20.5 用于链接类型搜索，并想知道如何存储用户配置文件的规范化数据，这可以使用嵌套文档在弹性搜索中轻松实现。

例如
**人 Json**

```
{
    first_name: abc,
    last_name: xyz,
    school: [{
      name: some school,
      degree: x-Degree,
      startDate:12-02-2009
   },
   {
      name: some school2,
      degree: x-Degree-2,
      startDate:12-02-2012
   }
   ]

} 
```

我想搜索用户的学校名称、学位和目前正在学习的类似于linkedin搜索，

在 Solr 中索引和搜索它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T04:39:02.797

不幸的是，Solr 无法像 elasticsearch 那样定义嵌套文档。

在 Solr 的案例中，答案是使用`multiValued`模拟平面文档中所需信息的字段。就我个人而言，我发现这是非常有限的，特别是因为分组的细节（对象）可能是分开的，但这是 Solr 的方式。正如 arun 的引用链接所建议的，您可以使用动态字段来解决此问题（例如，`school_name_1`与`school_degree_1`和`school_name_2`with`school_degree_2`链接），但与弹性搜索的灵活性相比，这是一个更大的麻烦。

如果您的文档是 XML 格式的，那么您可以使用[`XPathEntityProcessor`](http://wiki.apache.org/solr/DataImportHandler#Configuration_in_data-config.xml-1)自动展平它。也许更不幸的是，我不知道有任何 JSON 处理器执行类似的操作。

您将需要一个类似于以下内容的架构：

```
<field name="first_name" indexed="true" />
<field name="last_name" indexed="true" />
<field name="school_name" multiValued="true" indexed="true" />
<field name="school_degree" multiValued="true" indexed="true" />
<field name="school_start_date" multiValued="true" indexed="true" /> 
```

不要忘记结束日期。您可能还想考虑学生可以拥有多个学位，尽管这可以通过简单地在学校加倍来解决，或者在同一起始年将学位设置为数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T09:47:53.730

我相信你可以达到你想要的。有许多字段类型和社区插件。唯一的问题是很难找到好的文档。

您显然可以选择@pickypg 建议的多值字段。当您尝试在一个查询中按 school_name 和 school_degree 进行搜索时，就会出现此问题。结果将不正确。

我正在为略有不同的问题做的是使用`PointType`类：

```
<fieldType name="range" class="solr.PointType" dimension="1" subFieldType="double" />

<field name="cat_lr" type="range" indexed="true" stored="true" multiValued="true"/> 
```

它允许我每个文档有多个范围。我像这样插入它们：

```
cat_lr=2,5 
```

我像这样寻找它们：

```
+cat_lr:[1 TO 10] 
```

我希望这对您的问题有所帮助。祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T06:25:47.293

**索引**应该使用**多值**字段完成

```
<field name="first_name" indexed="true" />
<field name="last_name" indexed="true" />
<field name="school_name" multiValued="true" indexed="true" />
<field name="school_degree" multiValued="true" indexed="true" />
<field name="school_start_date" multiValued="true" indexed="true" /> 
```

**搜索**，像 school_name 这样的单个字段搜索将像普通字段搜索一样简单，但是在多个嵌套字段上搜索应该区别对待，

将 SpanTermQueries 与 FiledMaskingSpanQuery 结合并将它们放入 SpanNearQuery 允许搜索学校位置的交叉点，并正确找到包含指定项目（school_name:some school and school_degree:x-Degree）的 Person：

```
SpanNearQuery(
    SpanTermQuery("school_name", "some school”),
    FieldMaskingSpanQuery(
               SpanTermQuery("school_degree", "x-Degree"),
               “school_name”
    ), -1, false
) 
```

[参考](http://blog.griddynamics.com/2011/07/solr-experience-search-parent-child.html)

# jquery - jQuery 未定义且 Object [object Object] 在 OSClass 中没有方法 'fancybox'

> ID：15157652
> 
> 赞同：2
> 
> 时间：2013-03-01T12:20:15.673
> 
> 标签：jquery, osclass

我正在使用 OSClass。当转到`http://localhost/osclass/index.php?page=item&id=2`页面时，会出现以下错误。

```
Uncaught ReferenceError: jQuery is not defined 
(anonymous function) 

Uncaught TypeError: Object [object Object] has no method 'fancybox' 
(anonymous function)
o 
p.fireWith 
e.extend.ready 
c.addEventListener.B 

Uncaught TypeError: Cannot call method 'create' of undefined
(anonymous function) 
```

在那个文件中，我的 js 是，

```
osc_register_script('fancybox', osc_current_web_theme_js_url('fancybox/jquery.fancybox.js'));

osc_enqueue_script('fancybox');
osc_enqueue_script('jquery-validate');

osc_enqueue_style('fancybox', osc_current_web_theme_js_url('fancybox/jquery.fancybox.css')); 
```

和

```
 <script type="text/javascript">
        $(document).ready(function(){
            $("a[rel=image_group]").fancybox({
                openEffect : 'none',
                closeEffect : 'none',
                nextEffect : 'fade',
                prevEffect : 'fade',
                loop : false,
                helpers : {
                        title : {
                                type : 'inside'
                        }
                }
            });
        });
    </script> 
```

我的问题在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:26:45.763

我今天早上修好了，这是提交：[https ://github.com/osclass/Osclass/commit/cd9f75080f42d681be2e6bce709269073c0bcec2](https://github.com/osclass/Osclass/commit/cd9f75080f42d681be2e6bce709269073c0bcec2)

问题是fancybox的依赖没有设置

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T05:19:32.357

当抛出错误的脚本尝试使用它时，不会加载 jQuery。第一个错误都源于 jQuery 未定义。

jQuery 需要在其他可能依赖它的**东西**之前被加载。

由于您正在使用这些函数来加载您需要放置的东西，因此在任何其他可能需要 jQuery 的 javascript 之前：

```
osc_register_script('jquery', osc_assets_url('path/to/jquery.js'));
osc_enqueue_script('jquery'); 
```

通过查看与您正在使用的内容相关的其他一些代码，您可能还可以使用以下代码（这取决于您的其余代码......我只是把它扔掉，因为您并没有真正向我们展示... enqueue 函数可能是更好的选择）：

```
<script type="text/javascript" src="<?php echo osc_current_web_theme_js_url('jquery.js') ; ?>"></script> 
```

# kinect - Kinect 语音识别

> ID：15157655
> 
> 赞同：1
> 
> 时间：2013-03-01T12:20:23.367
> 
> 标签：kinect, speech

以 Kinect SDK 的示例为模型

```
private static RecognizerInfo GetKinectRecognizer()
    {
        foreach (RecognizerInfo recognizer in SpeechRecognitionEngine.InstalledRecognizers())
        {
            string value;
            recognizer.AdditionalInfo.TryGetValue("Kinect", out value);
            if ("True".Equals(value, StringComparison.OrdinalIgnoreCase) && "en-US".Equals(recognizer.Culture.Name, StringComparison.OrdinalIgnoreCase))
            {
                return recognizer;
            }
        }

        return null;
    } 
```

在窗口加载

```
RecognizerInfo ri = GetKinectRecognizer();

        if (null != ri)
        {

            this.speechEngine = new SpeechRecognitionEngine(ri.Id);

             var directions = new Choices();
             directions.Add(new SemanticResultValue("forward", "FORWARD"));
             directions.Add(new SemanticResultValue("backward", "BACKWARD"));
             directions.Add(new SemanticResultValue("turn left", "LEFT"));
             directions.Add(new SemanticResultValue("turn right", "RIGHT"));

             var gb = new GrammarBuilder { Culture = ri.Culture };
             gb.Append(directions);

             var g = new Grammar(gb);

            speechEngine.SpeechRecognized += SpeechRecognized;
            speechEngine.SpeechRecognitionRejected += SpeechRejected;

            speechEngine.SetInputToAudioStream(
            kinect.AudioSource.Start(), new SpeechAudioFormatInfo(EncodingFormat.Pcm, 16000, 16, 1, 32000, 2, null));
            speechEngine.RecognizeAsync(RecognizeMode.Multiple);
        } 
```

错误：

> Microsoft.Speech.dll 中出现“System.InvalidOperationException”类型的未处理异常
> 
> 附加信息：在进行识别之前，必须至少加载一种语法。

我能做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T19:58:28.290

我有同样的错误。ri 为空，您的计算机中没有安装语言包。即使你已经安装了它们，它也找不到它们。你需要做的就是卸载所有东西、kinect sdk、驱动程序、运行时、工具包、微软语音 x64/x86 和语言包。然后按此顺序再次安装所有内容：

第 1：KINECT SDK（它附带您需要的所有其他东西，如驱动程序） 第 2：Microsoft Speech 第 3：语言包

我正在使用 kinect sdk 1.5，我在 4 天内遇到了同样的问题，直到微软的某个人告诉我这可能是一个可能的解决方案，而且确实如此。

问候！卡罗来纳

# linux - 在 Linux 中的特定行向文件添加文本

> ID：15157659
> 
> 赞同：49
> 
> 时间：2013-03-01T12:20:40.670
> 
> 标签：linux, text-processing

我想添加一个特定的行，假设`avatar`以文件开头`MakeFile`并且`avatar`应该添加到文件的第 15 行的文件。

这是向文件添加文本的方法：

```
echo 'avatar' >> MakeFile.websvc 
```

这就是我认为如何向以 MakeFile 开头的文件添加文本的方法：

```
echo 'avatar' >> *MakeFile. 
```

但我无法将此行添加到文件的第 15 行。

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-03-01T12:33:11.317

你可以使用`sed`来解决这个问题：

```
sed "15i avatar" Makefile.txt 
```

或使用`-i`选项保存对文件所做的更改。

```
sed -i "15i avatar" Makefile.txt 
```

要更改以 start 开头的所有文件`Makefile`：

```
sed "15i avatar" Makefile* 
```

注意：在上面`15`是您感兴趣的放置文本的行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T12:39:30.977

使用 sed ：

```
sed -i '15i\avatar\' Makefile* 
```

其中 -i 选项表示就地发生转换（例如，当您要处理多个文件时，这很有用）。

此外，在您的问题中，*MakeFile 代表“所有以 MakeFile 结尾的文件”，而“所有以 MakeFile 开头的文件”将表示为 MakeFile*。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-09-11T22:11:04.990

如果您需要将字符串和行号选项传递给脚本，请尝试以下操作：

```
perl -i -slpe 'print $s if $. == $n; $. = 0 if eof' -- -n=15 -s="avatar" Makefile* 
```

`-i`编辑输入文件，不做备份复制
`$.`是行号

这是基于我[使用 sed 或 awk 在特定行号处插入一行的](https://stackoverflow.com/questions/6537490/insert-a-line-at-specific-line-number-with-sed-or-awk/32513340)解决方案，其中包含其他几种将选项传递给 Perl 的方法，以及对命令行选项的解释。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-10-28T04:10:16.973

如果你想要一个更便携的版本，你可以使用`ex`，它可以在*任何**Nix 系统上工作。（它[由 POSIX 指定。](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/ex.html)）目前给出的 Sed 命令依赖于 GNU Sed。

要在当前目录中名称以“Makefile.”开头的每个文件的第 15 行插入只包含“avatar”的行，请使用：

```
for f in MakeFile.*; do printf '%s\n' 15i 'avatar' . x | ex "$f"; done 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-01T12:33:21.147

```
perl -pi -e 'if($.==14){s/\n/\navatar\n/g}if(eof){$.=0}' MakeFile* 
```

# php - 如何从 php cli 回显退格键？

> ID：15157666
> 
> 赞同：10
> 
> 时间：2013-03-01T12:21:11.107
> 
> 标签：php, bash, command-line-interface

这个问题：[https ://askubuntu.com/questions/16149/overwrite-previous-output-in-bash-instead-of-appending-it](https://askubuntu.com/questions/16149/overwrite-previous-output-in-bash-instead-of-appending-it)

解释如何以 bash 脚本的形式进行倒计时。我想做同样的事情，但我需要用 PHP 来做。有没有办法回显退格？

例如

```
echo "Counting down 60\n";
sleep(1);
echo "\b\b\b59\n";
sleep(1);
echo "\b\b\b58\n"; 
```

但是， echo "\b" 没有做任何事情。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-01T12:58:48.313

从[字符串 - 双引号](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.double)，没有`\b`识别为转义序列。您可以使用[ASCII](http://en.wikipedia.org/wiki/ASCII)退格十六进制或八进制代码

```
$bs = "\x08";
echo "Counting down 60";
sleep(1);
echo "$bs$bs59";
sleep(1);
echo "$bs$bs58"; 
```

或一直循环到零

```
$bs = "\x08";
for ($i = 59; $i >= 0; --$i) {
    sleep(1);
    printf("$bs$bs%2d", $i);
} 
```

您也必须省略换行符`\n`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-01T12:28:04.033

退格字符对应 ASCII 字符代码 8，因此您可以使用 PHP 的[`char()`](http://php.net/manual/en/function.chr.php)函数将其输出。

前任。如果您执行以下操作：

```
echo 'Hello, world!' . chr(8); 
```

结果输出是：

```
Hello, world 
```

# php - 将数组拆分为子数组

> ID：15157668
> 
> 赞同：-4
> 
> 时间：2013-03-01T12:21:14.917
> 
> 标签：php, arrays

我有一组手机号码，它包含 9000 个号码，有时甚至更多。

我想将此数组拆分为子数组，每个数组应该只有 3000 个数字并将它们传递给一个函数：

```
function sendSMS($mobilenumbers){

//some code here

} 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T12:23:57.870

尝试这个 ：

```
$aray_number = your input array;
$array       = array_chunk($aray_number,3000); 
```

参考： http: [//php.net/manual/en/function.array-chunk.php](http://php.net/manual/en/function.array-chunk.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T12:25:55.787

```
<?php 

    $array_of_numbers = array(0,1,2,3,4,5,6,7,8);
    $smaller_array_of_numbers = array_chunk($array_of_numbers, 3000);

    foreach($smaller_array_of_numbers as $smaller_array){
        sendSMS($smaller_array);
    }

?> 
```

函数[array_chunk](http://php.net/manual/en/function.array-chunk.php)是这里的关键。

这将`array_chunk`用于将数组拆分为更小的数组，然后使用一个简单的 foreach 循环，它将围绕这些更小的数组进行循环并将它们发送到`sendSMS`函数。

# javascript - Marionette Collection View，获取集合不会触发事件

> ID：15157669
> 
> 赞同：5
> 
> 时间：2013-03-01T12:21:19.370
> 
> 标签：javascript, backbone.js, view, collections, marionette

我有一个问题：我的`CollectionView`没有渲染我的`ItemViews`. 我将集合从布局传递到集合视图。我正在获取集合`CollectionView`：

在布局中：

```
 // Create a a collection for the view
    this.articles = new Articles(null, {
        organizationId : this.model.organizationId,
        projectId : this.model.id
    });

    var articlesView = new ArticleCollectionView({ collection : this.articles});
    this.articlesRegion.show(articlesView); 
```

在集合视图中：

```
define([
    'marionette',
    'templates',
    'i18n!nls/projectDashboard',
    'views/projectDashboard/ArticleItem'
], function (Marionette, templates, msg, ArticleItemView) {

    return Marionette.CollectionView.extend({

        initialize : function () {
            this.listenTo(this.collection, "reset", this.render);
            this.collection.fetch();
        },

        itemView : ArticleItemView

    });

}); 
```

在项目视图中：

```
define([
    'marionette',
    'templates',
    'models/Article'
],
function (Marionette, templates, Article) {

    return Marionette.ItemView.extend({

        initialize : function () {
            console.log('itemviewrender');
        },

        template : templates.projectDashboard.articleItem
    });

}); 
```

一般的设置是有效的。我找到了一种方法来完成这项工作：在布局中获取集合并`CollectionView`在成功回调的区域中显示。

但是在 collectionView 上为集合添加侦听器失败。命令式和声明式侦听器不会触发任何事件，例如

```
this.collection.on('reset', this.render, this); 
```

或者

```
collectionEvents : {
  'reset' : 'render'
} 
```

如果集合被提取，我只想用它的项目视图重新呈现集合视图。我确定我错过了一些东西。任何帮助表示赞赏！

更新：我发现了一些有趣的事情：我已经说过，如果我在布局中获取集合并在成功回调上创建 collectionView，它就可以工作。有趣的是：如果我通过获取的集合，侦听器也会工作。我通过再次调用`this.collection.fetch()`来触发它们。`initialize`然后重新渲染工作。它必须是布局中的集合传递周围的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-10T22:29:32.917

您想使用 collectionEvents

这是 Marionette Docs 中的一个示例

```
 Marionette.CollectionView.extend({
   collectionEvents: {
    "sync": "render"
   }
 }); 
```

在示例中，当集合已从后端完全填充时，将触发渲染

[模型事件和集合事件](http://marionettejs.com/docs/marionette.compositeview.html#modelevents-and-collectionevents)

# maps - WP8：在地图控件中获取标签位置

> ID：15157673
> 
> 赞同：2
> 
> 时间：2013-03-01T12:21:23.490
> 
> 标签：maps, windows-phone-8

对于 Microsoft.Phone.Maps 控件，当用户点击地图时，如何获取点击的位置（地理坐标？）？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:36:13.750

使用 Tap 事件处理程序，并使用 GestureEventArgument 获取屏幕位置。请参阅[Windows Phone 8 中的地图点击事件/鼠标按下事件？](https://stackoverflow.com/questions/13716289/map-tap-event-mouse-down-event-in-windows-phone-8)

现在您有了屏幕位置，使用 Map.ConvertViewportPointToGeoCoordinate。[http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.maps.controls.map.convertviewportpointtogeocoordinate](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.maps.controls.map.convertviewportpointtogeocoordinate)

# asp.net - 使用 Web 服务和 Web 方法避免回发

> ID：15157676
> 
> 赞同：1
> 
> 时间：2013-03-01T12:21:36.733
> 
> 标签：asp.net, ajax

我正在处理一个 ERP 项目。我想避免页面中的所有回发。我决定使用网络服务或网络方法来避免这些回发问题。我看到的另一个优点 - 也可以通过 javascript 获取元素的内部 html 内容。

我没有在我的页面中使用任何第三方控件。**有什么更好的方法来创建没有回发的页面并使 UI 如此吸引人。Telrik 控件是否可用于此目的？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:53:26.330

这些是我目前所知道的方法：

基本假设：您正在使用 ASP.NET Web 表单。

1.  [您正在使用的](http://jquery-with-asp.net/2011/07/jquery-ui-autocomplete-with-asp-net/)那个（我假设）。（这很好 AFAIK。）[更多细节在这里..](http://www.packtpub.com/article/making-ajax-calls-using-jquery)

2.  将页面包装在更新面板中。（请[谨慎](http://www.nerdswithlives.com/2008/12/updatepanel-slow-performance-ajax.html)使用。如果页面很重，可能会出现性能开销。[请自行决定。](http://encosia.com/why-aspnet-ajax-updatepanels-are-dangerous/)）

3.  另一方面，Telerik 控件是一个相当不错的工具集，如果您可以为此付出一些钱。（我的拙见。）

# java - Java REST - JQuery 多部分/表单数据文件上传的正确参数？

> ID：15157677
> 
> 赞同：0
> 
> 时间：2013-03-01T12:21:46.807
> 
> 标签：java, rest, jersey, resteasy

我们在 Safari 5.x 的网站文件上传功能中遇到了问题。

JQuery 通常将文件作为分配了正确内容类型（例如 image/png）的文件发送到 REST 服务，但是对于 Safari 5.x，它似乎只能将其作为“multipart/form-data”发送

我尝试通过 Jersey 和 RestEasy 添加新的端点来接受这个，但我没有成功。

我相信问题只是我无法确定参数应该是什么。无论我尝试什么，它似乎都会导致 415 响应。

客户端发送的请求（我无法控制）如下所示： 注意：它只是一个文件，但它似乎支持多个文件。

**标题**

```
Accept:application/json, text/javascript, */*; q=0.01
Content-Type:multipart/form-data; boundary=----WebKitFormBoundary15QUDazCkPkvqWTQ
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/534.57.2 (KHTML, like Gecko) Version/5.1.7 Safari/534.57.2 
```

**有效载荷**

```
------WebKitFormBoundary15QUDazCkPkvqWTQ
Content-Disposition: form-data; name="files[]"; filename="myFile.png"
Content-Type: image/png

------WebKitFormBoundary15QUDazCkPkvqWTQ-- 
```

我在 API 端尝试了以下两种方法：

**球衣**

```
@POST
@Path("/upload")
@Consumes(MediaType.MULTIPART_FORM_DATA)
public Response uploadMultipart(FormDataMultiPart multiPart) throws IOException{ 

    List<FormDataBodyPart> fields = multiPart.getFields("files");        
    for(FormDataBodyPart field : fields){
        InputStream inputStream = field.getValueAs(InputStream.class);
    }

    // respond...
} 
```

**高枕无忧**

```
@POST
@Path("/upload")
@Consumes(MediaType.MULTIPART_FORM_DATA)
public Response uploadMultipart(@MultipartForm UploadForm form) {

    System.out.println(form.getFile().length);
    System.out.println(form.getName());

    //respond...
}

public class UploadForm {

    private String name;
    private File file;  /// Have tried various Objects & Arrays here - all with no success;

    @FormParam("filename")
    public void setName(String name) {
        this.name = name;
    }

    public String getName() {
        return name;
    }

    @FormParam("files")
    public void setFile(File file) {
        this.file = file;
    }

    public File[] getFile() {
        return file;
    }
} 
```

有人可以指出我做错了什么吗？我宁愿坚持使用泽西岛，但对目前任何可行的解决方案感到高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:35:06.550

我使用泽西岛，但我从未尝试使用 @MultipartForm UploadForm 表单

我的参数是：

```
@Context final HttpServletRequest request 
```

您可以以这种方式使用它（但这对您的使用来说可能有点矫枉过正）：

```
final ServletFileUpload upload = new ServletFileUpload();
final FileItemIterator iter = upload.getItemIterator(request);

 while (iter.hasNext()) {
        //You should have only one element, but you may have several as multipart content
        final FileItemStream item = iter.next();

        final String name = item.getFieldName();
        final InputStream stream = item.openStream();
        //... and here you've got your inputstream
} 
```

# jquery - jQuery 验证插件，按名称分组输入元素

> ID：15157680
> 
> 赞同：1
> 
> 时间：2013-03-01T12:21:48.507
> 
> 标签：jquery, jquery-validate

我的插件在我的一半表单中正常工作，但我也有多个具有相同名称的表单元素，如下所示：

```
 <tr class="orderItems">
                  <td><input type="text" name="code[]" class="codeRowForm" value="" /></td>
                  <td>
                      <select class="selectProductOrders" name="selectProductOrders[]">
                         <option value="default" disabled selected>Select a product</option> 
                     </select>
                  </td>
                  <td><input type="number" pattern="[0-9]*" name="rsp[]" class="rsp" value="" /></td>
                  <td><input type="number" pattern="[0-9]*" name="trade[]" class="trade" value="" /></td>
                  <td><input type="number" pattern="[0-9]*" name="discount[]" class="discount" value="0" /></td>
                  <td><input type="number" pattern="[0-9]*" name="qty[]" class="qty" value="" /></td>
                  <td><input type="number" pattern="[0-9]*" name="cost[]" class="cost" value="" /></td>
                  <td class="deleteOrderRow"><a onclick="return false;" href="#"><img class="addRemoveOrderButton" src="img/deleteOrderRow.png" /></a></td>
              </tr> 
```

`<tr>`根据用户决定在表单中拥有多少订单项，这会重复多次。因此，如果每行中的名称都相同（例如`name=code[]`），我将如何使用插件应用 jQuery 表单验证：[docs.jquery.com/Plugins/Validation/validate](http://docs.jquery.com/Plugins/Validation/validate)？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T16:24:44.700

如果每个`name`属性都是唯一的，例如`code[4]`,`code[9]`等，您可以通过将名称用括号括在引号中来进行验证。

[请参阅文档：“具有复杂名称（括号、点）的字段”](http://docs.jquery.com/Plugins/Validation/Reference#Fields_with_complex_names_.28brackets.2C_dots.29)

```
$(document).ready(function () {

    $('#myform').validate({ // initialize the plugin
        // your other options,
        rules: {
            'code[1]': {
                // rules
            },
            'code[2]': {
                // rules
            }
        }
    });

}); 
```

**演示：http: [//jsfiddle.net/TKeEc/](http://jsfiddle.net/TKeEc/)**

您还可以根据`name`. 将相同的规则分配给包含`code`在 中的所有字段`name`，例如`code[4]`，`code[9]`等。

```
$('[name*="code"]').each(function() {
    $(this).rules('add', {
        required: true,
        // other rules
        messages: {  // optional custom messages
            // custom messages
        }
    });
}); 
```

**演示：http: [//jsfiddle.net/TKeEc/1/](http://jsfiddle.net/TKeEc/1/)**

**否则**，如果您有多个字段都包含完全相同的`name`属性，则此插件将无法运行。如果您不能`input`唯一地定位特定对象，您就不能合理地期望任何 JavaScript 验证都能正常工作。破碎：http: [//jsfiddle.net/4ZV9D/](http://jsfiddle.net/4ZV9D/)

# c# - .CompareTo(object value) 方法是否有任何已知的实现实际上返回小于 -1 或大于 1 的值？

> ID：15157683
> 
> 赞同：4
> 
> 时间：2013-03-01T12:21:57.980
> 
> 标签：c#, .net, clr

我想知道，因为 MSDN 文档说以下内容：

> 小于零：此实例小于值。
> 
> 零：此实例等于值。
> 
> 大于零：此实例大于值。

**如果您只想比较一个值是小于、等于还是大于，为什么不直接使用 -1、0 和 1？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T12:25:10.000

这个问题可能很宽泛，但*我*至少知道我的公司正在使用许多这样的实现，因为我写了它们：

```
public int CompareTo(Student other)
{
  return this.Grade - student.Grade;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T12:25:10.770

这里有两件事需要考虑。

1.  记录了什么
2.  实施了什么

实际的实现目前可能总是返回 -1、0 或 1，而不是其他任何值。请注意，我尚未对此进行验证。

但是，文档指定使用负值和正值是合法的，而不仅仅是 -1 和 +1。

这意味着要使用 编写健壮的代码`.CompareTo`，您需要处理负值和正值，而不仅仅是 -1 和 +1。

请注意，这并不意味着您不能从您自己的 实现中*返回*-1 和 +1 `CompareTo`，但您还需要为任何其他值做好准备。

为简单起见，在某些情况下，实现可能只是返回从另一个值中减去一个值的结果，因此您将得到不是 -1 或 +1 的结果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T12:29:07.577

如果您将查看`CompareTo`诸如 , 等类型的实现`Byte`，`Int16`您将看到

```
public int CompareTo(short value)
{
    return (this - value);
} 
```

`Int32`或`Int64`比较没有以相同的方式实现。更新：正如@ORMapper 所注意到的，因为算术溢出。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T12:29:06.287

据我了解，有很多（特别是用户定义的）。MSDN 是非特定的，因为您不应该依赖它，CompareTo 产生的值并不重要，只要它有效。例如`int`，通过减去它们来比较两个 s 是最快的。

一个真实的例子，这个程序打印`88`.

```
static void Main(string[] args)
{
    Int16 a = 100;
    Int16 b = 12;
    Console.WriteLine(a.CompareTo(b));
} 
```

在做这个小调查时，我发现一开始似乎有点奇怪。`Int16`( `short`) 使用此方法，但`Int32`( `int`) 不使用并返回`-1`, `0`, `1`。这可能是因为我们正在使用小于返回类型 ( `Int32`) 的整数，其中最小值减去最大值将适合。

# windows - 如何从公司代理后面的 github 克隆

> ID：15157685
> 
> 赞同：9
> 
> 时间：2013-03-01T12:22:08.300
> 
> 标签：windows, git, github

我支持一个非常烦人的公司代理：

1.  实际使用的代理地址由脚本确定
2.  它需要身份验证
3.  它使用 HTTPS*替换*网页的证书

在这种情况下如何成功克隆 github 存储库？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-01T12:22:08.300

1.  第一个问题与 git 无关——更多的是它是能够实际配置代理的必要步骤。
    可以在控制面板 -> Internet 选项 -> 连接 -> LAN 设置中找到 Windows 计算机上的代理配置。
    如果勾选“使用自动配置脚本”，首先需要下载指定文件并打开。我得到一个包含一个小脚本的文件。它看起来像这样：

    ```
    function FindProxyForURL(url, host)
    {
        var myip = myIpAddress();
        var hostip = dnsResolve(host);
        if (isInNet(hostip,"192.168.0.0","255.255.0.0"))
            return "DIRECT";
        if (isInNet(hostip,"xyz.abc.0.0","255.255.0.0"))
            return PROXY special-proxy:8080;
        return "PROXY default-proxy:8080";
    } 
    ```

    因此，就我而言，要使用的代理是`default-proxy:8080`.

2.  要真正让 git 使用代理，我必须使用`git config --global http.proxy http://<domain>\<username>:<password>@default-proxy:8080`.

    这样做的明显缺点是您的域密码将以纯文本形式存储在硬盘上。

    其他设置不起作用，尽管不同的消息来源声称它们应该起作用。那些是：

    1.  设置环境变量`https_proxy`或`http_proxy``http://<domain>\<username>:<password>@default-proxy:8080`
    2.  将全局 git config 设置为该值：`git config --global https.proxy http://<domain>\<username>:<password>@default-proxy:8080`
    3.  将环境变量设置`http_proxy`为`http://<domain>\<username>:<password>@default-proxy:8080`
3.  要解决第三个问题，最简单的方法是通过设置环境变量来忽略证书错误 - 代理返回的证书无论如何都不值得：

    ```
    set GIT_SSL_NO_VERIFY=true 
    ```

* * *

要不在 git 配置中存储普通密码，您可以使用本地代理，例如[cntlm](http://sourceforge.net/projects/cntlm)。

它允许存储密码哈希。要获取哈希，请使用以下命令：

```
cntlm.exe -H -d <domain> -u <username> 
```

之后，系统将提示您输入密码。结果将是一个包含三个散列的列表，其中`PassNTLMv2`最有可能是本场景中的相关散列。`Password`将cntlm.ini 中的行替换为输出中的行，包括该`PassNTLMv2`部分。

显然，您现在必须配置 git 以使用此本地代理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T13:18:48.353

如果您还想对 github 进行写访问，则必须能够通过代理获得对 github 的 ssh 访问权限。为此，您可以使用`corkscrew`.

简而言之，这就是您执行此操作的方法：
首先解压缩[corkscrew](http://www.agroman.net/corkscrew/)
然后创建一个文件，`~/.ssh/proxy_auth`其中包含`<proxy_username>:<proxy_password>`
现在告诉 ssh 使用 corkscrew`github.com`通过代理访问，方法是将以下内容添加到`~/.ssh/config`：

```
host github.com
    port 22
    proxycommand corkscrew <proxy_ip_address> <proxy_port> %h %p ~/.ssh/myauth 
```

现在测试 ssh 是否可以通过`ssh -T git@github.com`. 如果这可行，`git:/`协议也应该能够通过代理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-23T15:27:26.393

如果您不想每次尝试在公司代理服务器后面克隆某些东西时都设置代理，请尝试在您的主目录中查找“ *.bashrc* ”文件并进行设置。从下次开始，您将不必手动设置它。

如果您的代理服务器设置如下：

```
Server: myproxyserver
Port: 8080
Username: mydomain\myusername
Password: mypassword 
```

在 .bashrc 文件中，设置以下内容：

```
set HTTP_PROXY="http://mydomain\\myusername:mypassword@myproxyserver:8080"
export HTTP_PROXY="http://mydomain\\myusername:mypassword@myproxyserver:8080"
set HTTPS_PROXY="http://mydomain\\myusername:mypassword@myproxyserver:8080"
export HTTPS_PROXY="http://mydomain\\myusername:mypassword@myproxyserver:8080" 
```

# ios - UISlider - 适用于 0.0 到 1.0 卷 - iOS XCODE

> ID：15157686
> 
> 赞同：0
> 
> 时间：2013-03-01T12:22:08.720
> 
> 标签：ios, objective-c, avfoundation, uislider

我有一个 UISlider，我想用它来管理使用 AVAudioPlayer 的音量级别

我发现的问题是，值设置在 0 和 1 之间。它只记录 0 或 1。

但是，我希望它能够将 0.1、0.2、0.3 等之间的变量确认到 1.0，这样我就可以使用这个值来调整游戏声音。

有谁知道我该怎么做？

我目前有...

```
- (void)viewDidLoad
[super viewDidLoad];
// Do any additional setup after loading the view from its nib.
[slider setValue:[[NSUserDefaults standardUserDefaults] floatForKey:@"sliderValue"]];

(void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

-(IBAction)slidetheslider {
[[NSUserDefaults standardUserDefaults] setFloat:[slider value] forKey:@"sliderValue"];
    GameSounds = slider.value;
    NSLog (@"Volume Level %d", GameSounds); 
```

在下一个 VC 上，我重新加载保存的值....

```
GameVolume = [[NSUserDefaults standardUserDefaults] floatForKey:@"sliderValue"];
NSLog (@"Volume Slider %d", GameVolume); 
```

此后，我使用 GameVolume 作为音量的参考。

问题是如果我尝试 0.0 到 1.0，它只会给我一个 0 或 1。

如果我尝试 0 - 100 然后将 GameVolume 更改为此...

`GameVolume = [[NSUserDefaults standardUserDefaults] floatForKey:@"sliderValue"]/100; NSLog (@"Volume Slider %d", GameVolume);`

它仍然只给我一个 0 或 1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:27:37.197

设置 minimumValue 和 maximumValue 属性。它们默认为 0.0 和 1.0，但是是浮点数，可以设置为您喜欢的任何值。

这是文档： [UISlider 的 Apple 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UISlider_Class/Reference/Reference.html)

如果您只读取 0 和 1 的值，您可能使用了不正确的类型。请发布相关代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:39:28.740

您可以使用一个数学选项。将最大值和最小值设置为 0 到 100，当您需要一个值时，将当前滑块值除以 100

最小值：0 最大值：100

```
-(float)getValueOfSlider:(CGFloat)sliderValue
{
    return sliderValue/100;
}

-(float)setSliderValue:(float)inputValue
{
    return inputValue*100;
} 
```

# jquery - $.ajax() 访问 done() 中发送的值

> ID：15157693
> 
> 赞同：4
> 
> 时间：2013-03-01T12:22:39.427
> 
> 标签：jquery, ajax

想象一下：

```
$('#blah').on('click', function(){
    var cat_id = $(this).attr('id');
    $.ajax({
        // stuff...
        data: {cat_id: cat_id}, // <--------------------
        // stuff...
    }).done(function(){
        alert(cat_id); // <-------------------- not defined...
    });
}); 
```

如您所知，jQuery 已经弃用了之前的使用类型，`$.ajax`新的模式看起来像上面那样，在上面的`done()`函数代码中，我如何访问`cat_id`？在 done() 函数`$(this)`中不再被识别，`cat_id`也......

在引入 jQuery 之前`done()`，我们可以很容易地访问到发送的数据，因为我们正在使用`success:`，并且我们仍然可以通过 ajax 函数访问发送的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:39:51.360

我无法复制您所写的行为，但是如果您需要在 done 函数中访问 jQuery(this)，您可以执行以下操作：

```
$('#blah').on('click', function(){
    var cat_id = $(this).attr('id');
    var $self = $(this);
    $.ajax({
        // stuff...
        data: {cat_id: cat_id}, 
        // stuff...
    }).done(function(){
        alert($self.attr('id')); 
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T12:44:01.063

在您的示例中，您仍然可以在 done 函数中访问 c​​at_id ，因为它仍在范围内。如果您需要访问 $(this) ，则需要将其绑定到 done 回调，如下所示：

```
$('#blah').on('click', function(){
    var cat_id = $(this).attr('id');
    $.ajax({
        // stuff...
        data: {cat_id: cat_id}, // <--------------------
        // stuff...
    }).done(function(){
        alert(cat_id); // alerts 'blah'
        alert($(this).attr('id')); // also alerts 'blah'
    }.bind(this)); // NOTICE THIS
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T12:37:45.613

虽然这可能是一种解决方法，但你可以这样做......

将 cat_id 存储在**$(this).data("catId")**中，然后轻松访问它......因此您可以轻松地相应地处理多个事件。

快乐编码:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T12:42:18.360

您可以尝试使用闭包的力量，这应该有效：

```
var cat_id = $(this).attr('id');
var done_handler = function(){
        alert(cat_id);
};
    $.ajax({
        // stuff...
        data: {cat_id: cat_id}, // <--------------------
        // stuff...
    }).done(done_handler); 
```

# batch-file - 多次复制文件夹及其内容，然后重命名它们

> ID：15157699
> 
> 赞同：3
> 
> 时间：2013-03-01T12:22:59.650
> 
> 标签：batch-file, copy, directory, rename

我正在为 Windows 7 寻找一个简单的批处理脚本，以从目标复制文件夹及其内容，并将其粘贴到另一个目标，x 次，并使用增量名称。

例子：

给定一个文件夹 C:\Folder。我想将它复制到这个文件夹中：C:\Destination 7 次，名称不同，所以结果如下所示（在 C:\Destination 内）：

副本1

复制2

副本3

.

.

副本7

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T14:10:17.247

```
for /l %%A in (1,1,7) do @xcopy "C:\Folder" "C:\Destination\Copy%%A" /i 
```

查看[`for /?`](http://technet.microsoft.com/en-us/library/bb490909.aspx)和[`xcopy /?`](http://technet.microsoft.com/en-us/library/bb491035.aspx)获取所有选项和帮助。

* * *

要在命令行上运行它，请确保使用 %A 而不是 %%A。

> 使用 %variable 从命令提示符执行 for。使用 %%variable 在批处理文件中执行 for 命令。变量区分大小写并且必须用 alpha 值表示，例如 %A、%B 或 %C。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-29T08:27:28.777

这就是您需要的：[用于增量备份的 Windows 批处理脚本](http://www.codearsenal.net/2015/10/windows-batch-script-incremental-backup.html)

```
@echo off
set source=c:\temp\test\1
set dest_path=c:\temp\test\2\
pushd %dest_path%
setlocal enableDelayedExpansion
set "dest_folder_name=Backup"
set "n=0"
for /f "delims=" %%F in 
(
   '2^>nul dir /b /ad "%dest_folder_name%*."^|findstr /xri "%dest_folder_name%[0-9]*"'
) 
do (
  set "name=%%F"
  set "name=!name:*%dest_folder_name%=!"
  if !name! gtr !n! set "n=!name!"
)
set /a n+=1
set final_destination="%dest_path%%dest_folder_name%%n%"
md %final_destination%
robocopy %source% %final_destination% /E /R:3 /W:10 /FFT /NP /NDL
popd
@echo on 
```

# iphone - 如何将ios音频上传到服务器？

> ID：15157703
> 
> 赞同：-1
> 
> 时间：2013-03-01T12:23:10.270
> 
> 标签：iphone, ios, audio, mpmediapickercontroller

我试图将音频文件上传到服务器。我在列表音频中使用了 MPMedia Picker 视图，当我要选择要上传到服务器（http）的音频时，我该怎么做。任何人都可以提供任何示例教程或示例代码。

我试过以下代码。

```
- (IBAction)openMediaPicker:(id)sender {
    MPMediaPickerController *mediaPicker = [[MPMediaPickerController alloc] initWithMediaTypes:MPMediaTypeMusic];
    mediaPicker.delegate = self;
    mediaPicker.allowsPickingMultipleItems = YES; // this is the default   
    [self presentModalViewController:mediaPicker animated:YES];
    [mediaPicker release];
}

- (IBAction)volumeSliderChanged:(id)sender {
    self.musicPlayer.volume = self.volumeSlider.value;
}

#pragma mark MPMediaPickerController delegate methods

- (void)mediaPicker: (MPMediaPickerController *)mediaPicker didPickMediaItems:(MPMediaItemCollection *)mediaItemCollection {
    // We need to dismiss the picker
    [self dismissModalViewControllerAnimated:YES];

    // Assign the selected item(s) to the music player and start playback.
    [self.musicPlayer stop];
    [self.musicPlayer setQueueWithItemCollection:mediaItemCollection];
    [self.musicPlayer play];
}

- (void)mediaPickerDidCancel:(MPMediaPickerController *)mediaPicker {
    // User did not select anything
    // We need to dismiss the picker
    [self dismissModalViewControllerAnimated:YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:28:47.807

从 mediaItemCollection.items 数组的某个索引初始化 MPMediaItem 对象：

**MPMediaItem *anItem = (MPMediaItem *)[mediaItemCollection.items objectAtIndex: row];**

然后调用 -valueForProperty: 方法：

**NSURL *assetURL = [anItem valueForProperty: MPMediaItemPropertyAssetURL];**

您可以从此处描述的 MPMediaItem 获得其他属性：http: [//developer.apple.com/library/ios/#DOCUMENTATION/MediaPlayer/Reference/MPMediaItem_ClassReference/Reference/Reference.html](http://developer.apple.com/library/ios/#DOCUMENTATION/MediaPlayer/Reference/MPMediaItem_ClassReference/Reference/Reference.html)

在“通用媒体项目属性键”下查看

希望这可以帮助！塔姆斯

使用 ASIHTTPRequest 上传如下音频文件，

```
NSURL *audiourl = [NSURL URLWithString:@"Your Url"];
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:audiourl];
NSData *postData = [NSData dataWithContentsOfURL:SoundPath];
//SoundPath is your audio url path of NSDocumentDirectory.
[request addData:postData withFileName:@"myAudio.caf" andContentType:@"audio/caf" forKey:@"company_audio"];
[request setDelegate:self];
[request startSynchronous]; 
```

这样您就可以轻松地在服务器上上传音频文件。

# c# - DataSource.InsertParameters.Add("UserId", UserGUID.ToString()); 对象引用未设置为对象错误的实例

> ID：15157704
> 
> 赞同：0
> 
> 时间：2013-03-01T12:23:14.540
> 
> 标签：c#, asp.net, database

我一直在按照教程在此处的“创建用户向导”中创建其他字段：

[http://www.4guysfromrolla.com/articles/070506-1.aspx#postadlink](http://www.4guysfromrolla.com/articles/070506-1.aspx#postadlink)

我收到一个错误，即 Object reference not set to an instance on an object on my line DataSource.InsertParameters.Add("UserId", UserGUID.ToString());

我的 ASP 代码是这样的：

```
 <asp:CreateUserWizard ID="CreateUserWizard1" runat="server" oncreateduser="CreateUserWizard1_CreatedUser">
    <WizardSteps>
        <asp:CreateUserWizardStep ID="CreateUserWizardStep1" runat="server">
            <ContentTemplate>
                <table>
                    <tr>
                        <td class="text-center" colspan="2">
                            Sign Up for Your New Account
                        </td>
                    </tr>
                    <tr>
                        <td class="text-right">
                            <asp:Label ID="UserNameLabel" runat="server" AssociatedControlID="UserName">User Name:</asp:Label>
                        </td>
                        <td>
                            <asp:TextBox ID="UserName" runat="server"></asp:TextBox>
                            <asp:RequiredFieldValidator ID="UserNameRequired" runat="server" ControlToValidate="UserName"
                                ErrorMessage="User Name is required." ToolTip="User Name is required." ValidationGroup="CreateUserWizard1">*</asp:RequiredFieldValidator>
                        </td>
                    </tr>
                    <tr>
                        <td class="text-right">
                            <asp:Label ID="PasswordLabel" runat="server" AssociatedControlID="Password">Password:</asp:Label>
                        </td>
                        <td>
                            <asp:TextBox ID="Password" runat="server" TextMode="Password"></asp:TextBox>
                            <asp:RequiredFieldValidator ID="PasswordRequired" runat="server" ControlToValidate="Password"
                                ErrorMessage="Password is required." ToolTip="Password is required." ValidationGroup="CreateUserWizard1">*</asp:RequiredFieldValidator>
                        </td>
                    </tr>
                    <tr>
                        <td class="text-right">
                            <asp:Label ID="ConfirmPasswordLabel" runat="server" AssociatedControlID="ConfirmPassword">Confirm Password:</asp:Label>
                        </td>
                        <td>
                            <asp:TextBox ID="ConfirmPassword" runat="server" TextMode="Password"></asp:TextBox>
                            <asp:RequiredFieldValidator ID="ConfirmPasswordRequired" runat="server" ControlToValidate="ConfirmPassword"
                                ErrorMessage="Confirm Password is required." ToolTip="Confirm Password is required."
                                ValidationGroup="CreateUserWizard1">*</asp:RequiredFieldValidator>
                        </td>
                        <td class="text-center">
                            <asp:CompareValidator ID="PasswordCompare" runat="server" ControlToCompare="Password"
                                ControlToValidate="ConfirmPassword" Display="Dynamic" ErrorMessage="The Password and Confirmation Password must match."
                                ValidationGroup="CreateUserWizard1"></asp:CompareValidator>
                        </td>
                    </tr>
                    <tr>
                        <td class="text-right">
                            <asp:Label ID="EmailLabel" runat="server" AssociatedControlID="Email">E-mail:</asp:Label>
                        </td>
                        <td>
                            <asp:TextBox ID="Email" runat="server"></asp:TextBox>
                            <asp:RequiredFieldValidator ID="EmailRequired" runat="server" ControlToValidate="Email"
                                ErrorMessage="E-mail is required." ToolTip="E-mail is required." ValidationGroup="CreateUserWizard1">*</asp:RequiredFieldValidator>
                        </td>
                    </tr>
                    <tr>
                        <td class="text-right">
                            <asp:Label ID="ManagerFirstNameLabel" runat="server" AssociatedControlID="ManagerFirstName">First Name:</asp:Label>
                        </td>
                        <td>
                            <asp:TextBox ID="ManagerFirstName" runat="server"></asp:TextBox>
                            <asp:RequiredFieldValidator ID="ManagerFirstNameRequired" runat="server" ControlToValidate="ManagerFirstName"
                                ErrorMessage="First Name is required." ToolTip="First Name is required." ValidationGroup="CreateUserWizard1">*</asp:RequiredFieldValidator>
                        </td>
                    </tr>
                    <tr>
                        <td class="text-right">
                            <asp:Label ID="ManagerSurnameLabel" runat="server" AssociatedControlID="ManagerSurname">Surname:</asp:Label>
                        </td>
                        <td>
                            <asp:TextBox ID="ManagerSurname" runat="server"></asp:TextBox>
                            <asp:RequiredFieldValidator ID="ManagerSurnamRequired" runat="server" ControlToValidate="ManagerSurname"
                                ErrorMessage="Surname is required." ToolTip="Surname is required." ValidationGroup="CreateUserWizard1">*</asp:RequiredFieldValidator>
                        </td>
                    </tr>
                    <tr>
                        <td class="text-right">
                            <asp:Label ID="TeamNameLabel" runat="server" AssociatedControlID="TeamName">Team Name:</asp:Label>
                        </td>
                        <td>
                            <asp:TextBox ID="TeamName" runat="server"></asp:TextBox>
                            <asp:RequiredFieldValidator ID="TeamNameRequired" runat="server" ControlToValidate="TeamName"
                                ErrorMessage="Team Name is required." ToolTip="Team Name is required." ValidationGroup="CreateUserWizard1">*</asp:RequiredFieldValidator>
                        </td>
                    </tr>
                    <tr>
                        <td class="text-right">
                            <asp:Label ID="TeamStadiumLabel" runat="server" AssociatedControlID="TeamStadium">Team Stadium Name:</asp:Label>
                        </td>
                        <td>
                            <asp:TextBox ID="TeamStadium" runat="server"></asp:TextBox>
                            <asp:RequiredFieldValidator ID="TeamStadiumRequired" runat="server" ControlToValidate="TeamStadium"
                                ErrorMessage="Team Stadium Name is required." ToolTip="Team Stadium Name is required."
                                ValidationGroup="CreateUserWizard1">*</asp:RequiredFieldValidator>
                        </td>
                    </tr>
                    </tr>
                    <tr>
                        <td class="text-right">
                            <asp:Label ID="RecieveReminderLabel" runat="server" AssociatedControlID="RecieveReminder">Recieve Reminder Email:</asp:Label>
                        </td>
                        <td>
                            <asp:CheckBox ID="RecieveReminder" runat="server" />
                        </td>
                    </tr>
                    <tr>
                        <td class="text-right">
                            <asp:Label ID="RecieveSummaryLabel" runat="server" AssociatedControlID="RecieveSummary">Recieve Summary Email:</asp:Label>
                        </td>
                        <td>
                            <asp:CheckBox ID="RecieveSummary" runat="server" />
                        </td>
                    </tr>
                    <tr>
                        <td class="text-center" colspan="2" style="color: Red;">
                            <asp:Literal ID="ErrorMessage" runat="server" EnableViewState="False"></asp:Literal>
                        </td>
                    </tr>
                    <tr>
                        <td class="text-center" colspan="2" style="color: Red;">
                            <asp:Literal ID="Literal1" runat="server" EnableViewState="False"></asp:Literal>
                        </td>
                    </tr>
                </table>
            </ContentTemplate>
        </asp:CreateUserWizardStep>
        <asp:CompleteWizardStep ID="CompleteWizardStep1" runat="server" />
    </WizardSteps>
</asp:CreateUserWizard>

<asp:SqlDataSource ID="InsertAdditionalUserDetails" runat="server" ConnectionString="<%$ ConnectionStrings:RaiseFantasyLeagueConnectionString %>"
    InsertCommand="INSERT INTO [UserDetails] ([UserId], [ManagerFirstName], [ManagerSurname], [TeamName], [TeamStadium], [RecieveReminder], [RecieveSummary]) VALUES (@UserId, @ManagerFirstName, @ManagerSurname, @TeamName, @TeamStadium, @RecieveReminder, @RecieveSummary)" ProviderName="System.Data.SqlClient">
    <InsertParameters>
        <asp:ControlParameter Name="ManagerFirstName" Type="String" ControlID="ManagerFirstName" PropertyName="Text" />
        <asp:ControlParameter Name="ManagerSurname" Type="String" ControlID="ManagerSurname" PropertyName="Text" />
        <asp:ControlParameter Name="TeamName" Type="String" ControlID="TeamName" PropertyName="Text" />
        <asp:ControlParameter Name="TeamStadium" Type="String" ControlID="TeamStadium" PropertyName="Text" />
        <asp:ControlParameter Name= "RecieveReminder" Type="Boolean" ControlID="RecieveReminder" PropertyName="Checked" />
        <asp:ControlParameter Name= "RecieveSummary" Type="Boolean" ControlID="RecieveSummary" PropertyName="Checked" />
    </InsertParameters>
</asp:SqlDataSource> 
```

而C#代码是这样的

```
 protected void CreateUserWizard1_CreatedUser(object sender, EventArgs e)
    {
        TextBox UserNameTextBox = (TextBox)CreateUserWizardStep1.ContentTemplateContainer.FindControl("UserName");
        SqlDataSource DataSource = (SqlDataSource)CreateUserWizardStep1.ContentTemplateContainer.FindControl("InsertAdditionalUserDetails");

        MembershipUser User = Membership.GetUser(UserNameTextBox.Text);

        if (User != null)
        {
            object UserGUID = User.ProviderUserKey;
            DataSource.InsertParameters.Add("UserId", UserGUID.ToString());
            DataSource.Insert();
        }
    } 
```

任何帮助，将不胜感激 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T20:24:42.930

我认为这将解决您的问题

```
protected void CreateUserWizard1_CreatedUser(object sender, EventArgs e)
{
    MembershipUser User = Membership.GetUser(CreateUserWizard1.UserName);
    object userGUID = User.ProviderUserKey;
    TextBox firstname = (TextBox)CreateUserWizard1.CreateUserStep.ContentTemplateContainer.FindControl("FirstName");
    TextBox lastname = (TextBox)CreateUserWizard1.CreateUserStep.ContentTemplateContainer.FindControl("LastName");
    TextBox companyname = (TextBox)CreateUserWizard1.CreateUserStep.ContentTemplateContainer.FindControl("CompanyName");
    TextBox address1 = (TextBox)CreateUserWizard1.CreateUserStep.ContentTemplateContainer.FindControl("Address1");
    TextBox address2 = (TextBox)CreateUserWizard1.CreateUserStep.ContentTemplateContainer.FindControl("Address2");
    TextBox city = (TextBox)CreateUserWizard1.CreateUserStep.ContentTemplateContainer.FindControl("City");
    DropDownList state = (DropDownList)CreateUserWizard1.CreateUserStep.ContentTemplateContainer.FindControl("State");
    TextBox zip = (TextBox)CreateUserWizard1.CreateUserStep.ContentTemplateContainer.FindControl("Zip");
    TextBox phone_number = (TextBox)CreateUserWizard1.CreateUserStep.ContentTemplateContainer.FindControl("Phone");
    TextBox email_address = (TextBox)CreateUserWizard1.CreateUserStep.ContentTemplateContainer.FindControl("Email");

    SqlDataSource1.InsertParameters.Add("userid", userGUID.ToString());
    SqlDataSource1.InsertParameters.Add("firstname", firstname.Text);
    SqlDataSource1.InsertParameters.Add("lastname", lastname.Text);
    SqlDataSource1.InsertParameters.Add("companyname", companyname.Text);
    SqlDataSource1.InsertParameters.Add("address1", address1.Text);
    SqlDataSource1.InsertParameters.Add("address2", address2.Text);
    SqlDataSource1.InsertParameters.Add("city", city.Text);
    SqlDataSource1.InsertParameters.Add("state", state.SelectedValue);
    SqlDataSource1.InsertParameters.Add("zip", zip.Text);
    SqlDataSource1.InsertParameters.Add("phone_number", phone_number.Text);
    SqlDataSource1.InsertParameters.Add("email_address", email_address.Text);
    SqlDataSource1.Insert();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:41:22.800

您的“DataSource”或“UserGUID”为 NULL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T12:42:20.723

你得到这个错误是因为你试图将对象转换为字符串。试试这个它可能对你有帮助

而不是对象使用 var **var user**

# oop - 共享重要实例而不耦合

> ID：15157707
> 
> 赞同：0
> 
> 时间：2013-03-01T12:23:25.100
> 
> 标签：oop, coupling, cohesion

假设您正在编写一个“更大”的应用程序，并且您想在类中记录某些错误。现在几乎每个班级都需要访问 Logger。

一个简单的解决方案如下（PHP，但这没关系）：

```
class SomeClass {
  public function someMethod() {
    // stuff ...
    Logger::log("something happened");
    // stuff ...
  }
} 
```

这种方法的问题是它使每个使用 Logger 的类都依赖它，并且你不能简单地在没有 Logger 的其他项目中使用相同的类。它是紧密耦合的。如果不更改`SomeClass`.

上述方法的“小”升级如下：

```
class SomeClass {

  private $logger;

  public function __construct(/* stuff */) {
    $this->logger = LoggerFactory::getLogger();
  }

  public function someMethod() {
    // stuff ...
    $this->logger->log("something happened");
    // stuff ...
  }
} 
```

这并不能真正解决问题，因为`SomeClass`现在只依赖于`LoggerFactory`并且它与它紧密耦合。这样做的好处是，它`LoggerFactory`现在可以返回该类的不同实例`Logger`。因此，如果您想更改记录消息的方式，则无需更改`SomeClass`.

另一种方法是使用依赖注入：

```
class SomeClass {

  private $logger;

  public function __construct(Logger $logger, /* stuff */) {
    $this->logger = $logger;
  }

  public function someMethod() {
    // stuff ...
    $this->logger->log("something happened");
    // stuff ...
  }
} 
```

现在这不`SomeClass`与任何特定的类耦合。它只需要一个实现`Logger`接口的类。但是我遇到的问题是，`Logger`每当您创建一个对象时，您都需要将一个实例传递给构造函数。

```
$object = new Position($this->logger, $x, $y); 
```

我遇到的另一个问题是，Logger 并不是真正的`Position`类的一部分，例如`$x`and `$y`。它只是一个实用程序。

你如何最好地处理这种情况？在这种情况下，耦合和内聚之间的最佳折衷是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:29:26.850

[AOP](http://en.wikipedia.org/wiki/Aspect-oriented_programming)是一个很棒的工具，它可以让您将日志记录与业务逻辑分开。

使用 AOP 的最常见场景之一是日志记录，因此可能值得一看。

您可以分析是否有任何适合您需求的框架，看看它是如何运行的。

在[这个链接](http://www.sharpcrafters.com/solutions/logging)上，您可以查看如何使用[postsharp](http://www.sharpcrafters.com/)实现日志记录，这是一个 C# AOP 框架

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T13:10:51.273

您的方法是正确的，并且回答了控制原理的反转。但是，正如您所说，**记录器是应用程序的横切关注点**，与 Position 实体无关。换句话说：这纯粹是技术性的，我们不想知道它。

我在这里看到两个选项：

1）您通过某种管理器类引用所有记录器，并在类级别使用您需要的记录器。此 LoggingManager 必须为解决方案中需要日志记录功能的所有类所知。在使用外部日志框架（例如：Log4Net）时，我经常这样做。

2）或者您可以在运行时从提供所需记录器的更高实体（服务）请求记录器。使用依赖注入框架或面向方面编程风格的类配置会从类本身中移除对 Logger 类型（或工厂）的选择。

不幸的是，我并不精通 PHP，所以我无法为您提供代码示例。但我确实在 C# 中找到了这个 AOP 的好例子：http: [//visualstudiomagazine.com/articles/2011/05/12/wccsp_aspect-orientation-programming.aspx](http://visualstudiomagazine.com/articles/2011/05/12/wccsp_aspect-oriented-programming.aspx)

# actionscript-3 - 使用 Spark Datagrid selectionChange 和 Keyboard Array

> ID：15157712
> 
> 赞同：0
> 
> 时间：2013-03-01T12:23:30.383
> 
> 标签：actionscript-3, datagrid, event-handling, flex4, selectionchanged

我有一个带有 selectionChange 事件侦听器的 Spark DataGrid。侦听 dataGrid 的函数检查新选择的行是否具有与加载的伙伴不同的 partner_id。如果不同，它会调用服务器 (PHP) 并请求具有给定 ID 的合作伙伴。我的问题是，如果用户使用箭头键盘在 dataGrid 中导航，则更改发生得太快，并且在某个给定时刻，调用无法检索合作伙伴对象，该对象最终为空（比显示错误的合作伙伴要好)，但对我来说仍然是个问题，因为发生这种情况后，永远不会加载新的伙伴。有没有办法在拨打电话之前等待几毫秒，看看用户是否会再次更改它或任何其他解决方法？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T17:07:45.663

我建议你尝试另一种方法。您不应避免从服务器加载新信息。您可以加载它并保存以备将来需要。如果您等待来自服务器的响应，这不是一个好方法，因为响应时间可能会有所不同，有时会很长。

因此，我认为您可以通过过滤非常快速的用户操作来尝试忽略新请求。您可以使用计时器来执行此操作。比如说，您将记录之间的最短切换时间定义为 300 毫秒。只需启动一个计时器并等待，它可以停止，直到用户再次更改选择。

下面是一个简单的代码来演示这种方式：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" 
           minWidth="955" minHeight="600" creationComplete="init()">
<fx:Script>
    <![CDATA[
        import mx.collections.ArrayCollection;
        import org.osmf.events.TimeEvent;
        import spark.events.GridSelectionEvent;

        [Bindable]private var collection:ArrayCollection = new ArrayCollection([
            {field01:"field01", field02:"field02"},
            {field01:"field01", field02:"field02"},
            {field01:"field01", field02:"field02"},
            {field01:"field01", field02:"field02"},
            {field01:"field01", field02:"field02"},
            {field01:"field01", field02:"field02"},
            {field01:"field01", field02:"field02"},
            {field01:"field01", field02:"field02"}
        ]);

        private var delay:Number = 300;
        private var timer:Timer = new Timer(delay, 1);

        private function init():void
        {
            timer.addEventListener(TimerEvent.TIMER, onTimer);
        }

        private function onTimer(event:TimerEvent):void
        {
            processCurrentSelection();
        }

        protected function onSelectionChange(event:GridSelectionEvent):void
        {
            timer.stop();
            timer.start();
        }

        private function processCurrentSelection():void
        {
            taCurrentIndex.text += dgMain.selectedIndex.toString() + String.fromCharCode(13);
        }
    ]]>
</fx:Script>

<s:HGroup x="10" y="10" height="240">
    <s:DataGrid 
        id="dgMain" 
        width="300" height="100%" 
        dataProvider="{collection}" 
        selectionChange="onSelectionChange(event)">

        <s:columns>
            <s:ArrayList>   
                <s:GridColumn dataField="field01" headerText="Field 1"/>
                <s:GridColumn dataField="field02" headerText="Field 2" width="100"/>
            </s:ArrayList>                  
        </s:columns>                
    </s:DataGrid>

    <s:VGroup width="200" height="100%">
        <s:Label text="Current Index:"/>
        <s:TextArea id="taCurrentIndex" width="100%" height="100%"/>
    </s:VGroup>

</s:HGroup>
</s:Application> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:15:17.390

我仍在接受其他解决方案，为我做这项工作的一个可能的解决方案是事件`selectionChanging()`与`event.preventDefault()`. 我向 selectionChanging() 添加了一个函数作为侦听器，在该函数中我检查是否有来自服务器的调用正在处理，如果有，我调用 event.preventDefault() 不允许用户向下或向上移动选择. 当服务器响应并且用户尝试再次更改选择时，它会正常运行并进行另一个调用。长话短说，每次更改选择时，都会调用服务器并“阻止”更改网格，当服务器响应时，网格会被释放。

# c - 是否可以在没有 root 访问权限的情况下在 linux 上使用 packet_mmap？

> ID：15157717
> 
> 赞同：7
> 
> 时间：2013-03-01T12:23:42.143
> 
> 标签：c, linux, linux-kernel, udp, packet-capture

Linux[有一个功能](http://www.mjmwired.net/kernel/Documentation/networking/packet_mmap.txt)，可以通过在内核和用户之间映射一个共享缓冲区来有效地捕获网络数据包。我正在尝试以不需要 root 访问权限的方式使用此接口（因为我没有它）。

通常 packet_mmap 用于直接查看网络上的所有数据包，这需要 root 访问权限。我的应用程序只需要使用标准的 linux UDP 套接字接口。我希望使用 packet_mmap 纯粹是为了提高效率——现在系统调用占用了我 50% 以上的 CPU 周期。

有没有办法配置 packet_mmap 以便可以从用户空间使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T13:40:21.687

虽然这并不能真正回答问题（因为它专门针对 packet_mmap），但鉴于您的参数：

1.  接收 UDP 数据包
2.  想减少系统调用，别无他法。
3.  愿意使用 Linux 特有的功能，但没有 root 用户
4.  packet_mmap 的功能并不是真正需要或不需要的。

我建议您完全忘记 packet_mmap 并查看[`recvmmsg`](http://man7.org/linux/man-pages/man2/recvmmsg.2.html)（注意拼写，而不是拼写错误）。

`recvmmsg`不需要特殊的权限，它非常直观（没有晦涩的东西，它的工作原理就像`readv`），它可以让您在一次调用中接收许多数据包，从而大大减少系统调用开销。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T19:21:39.513

查看 Linux 内核 Git 存储库，似乎`PF_INET`套接字和`PF_INET6`套接字都不支持内存映射访问，所以如果通过

> 我的应用程序只需要使用标准的 linux UDP 套接字接口。我希望使用 packet_mmap 纯粹是为了提高效率——现在系统调用占用了我 50% 以上的 CPU 周期。

您的意思是您想对普通的 UDP 或 TCP 套接字使用内存映射访问，不幸的是，您不能。这同样适用于原始 IP 套接字。

`PF_PACKET`套接字*确实*支持内存映射访问，但它们需要提升的权限，*无论您是否使用内存映射访问*。它们*不是*插座的替代品`PF_INET`；`PF_INET6`它们是一种读写链路层数据包的机制，所以如果你想在它们上面运行普通的互联网应用程序，祝你好运：

1.  您必须自己重新实现 IP 和您正在使用的任何传输协议（UDP、TCP 等）；
2.  您将不得不以某种方式阻止*内核的*IP 和传输协议栈处理这些数据包；

你*真的*不想尝试这样做。

（请注意，“提升权限”并不一定是指“root 权限”；`CAP_NET_RAW`权限应该足够了。但是，正如我所指出的，如果您尝试替换常规套接字访问，则不想使用`PF_PACKET`套接字。）

# google-chrome - 在 Chrome 上配置 Selenium - Capybara

> ID：15157718
> 
> 赞同：4
> 
> 时间：2013-03-01T12:23:42.860
> 
> 标签：google-chrome, selenium, capybara, configure

在使用 Capybara 进行测试时，我使用 Chrome 作为我的默认用户。我想要做的是配置该 chrome 实例，使其不建议在登录页面上记住用户名和密码。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:02:10.073

我认为您应该自定义[Chrome 的配置文件](https://code.google.com/p/selenium/wiki/RubyBindings#Chrome)：

尝试设置`extensions.password_manager_enabled`为false：

```
Capybara.register_driver :chrome do |app|
  profile = Selenium::WebDriver::Chrome::Profile.new
  profile['extensions.password_manager_enabled'] = false
  Capybara::Selenium::Driver.new(app, :browser => :chrome, profile: profile)
end 
```

如果它不起作用，请查看其他 Chrome 首选项和开关。

# xslt - XSLT 1.0：生成祖先菜单层次结构

> ID：15157723
> 
> 赞同：1
> 
> 时间：2013-03-01T12:23:50.707
> 
> 标签：xslt, xslt-1.0

这应该很简单！我有一个包含菜单层次结构的 XML 文档：

```
<?xml version="1.0" encoding="utf-8"?>
<menu page_id="18" language="en-GB">
    <item id="1" child_of="0">
        <menu_order>1</menu_order>
        <title><![CDATA[Home]]></title>
    </item>
    <item id="18" child_of="0">
        <title><![CDATA[Page One]]></title>
        <submenu child_of="18">
            <item id="20" child_of="18">
                <title><![CDATA[Sub Menu One]]></title>
                <submenu child_of="20">
                    <item id="26" child_of="20">
                        <title><![CDATA[SubMenu 1-1]]></title>
                    </item>
                    <item id="27" child_of="20">
                        <title><![CDATA[SubMenu 1-2]]></title>
                    </item>
                </submenu>
            </item>
            <item id="21" child_of="18">
                <title><![CDATA[Sub Menu Two]]></title>
                <submenu child_of="21">
                    <item id="28" child_of="21">
                        <title><![CDATA[SubMenu 2-1]]></title>
                    </item>
                    <item id="29" child_of="21">
                        <title><![CDATA[SubMenu 2-2]]></title>
                        <submenu child_of="29">
                            <item id="32" child_of="29">
                                <title><![CDATA[SubMenu 2-2-1]]></title>
                            </item>
                            <item id="33" child_of="29">
                                <title><![CDATA[SubMenu 2-2-2]]></title>
                            </item>
                        </submenu>
                    </item>
                    <item id="30" child_of="21">
                        <title><![CDATA[SubMenu 2-3]]></title>
                    </item>
                    <item id="31" child_of="21">
                        <title><![CDATA[SubMenu 2-4]]></title>
                    </item>
                </submenu>
            </item>
            <item id="22" child_of="18">
                <title><![CDATA[Sub Menu Three]]></title>
            </item>
        </submenu>
    </item>
    <item id="19" child_of="0">
        <title><![CDATA[Page Two]]></title>
    </item>
</menu> 
```

我需要将其转换为一个 HTML 列表，其中 (1) 如果活动/单击的菜单项有一个子菜单，它会在其下方显示子菜单（仅菜单的子项）。例如，单击 item id = "18" 应该给我这个：

```
<ul>
    <li id="1">Home</li>
    <li id="18">Page One
        <ul>
            <li id="20">Sub Menu One</li>
            <li id="21">Sub Menu Two</li>
            <li id="22">Sub Menu Three</li>
        </ul>
    </li>
    <li id="19">Page Two</li>
</ul> 
```

或者 (2) 如果活动菜单项有祖先，它会在结构中呈现其所有直接同级和祖先。例如，单击 item id="33" 应该给我这个：

```
<ul>
    <li id="1">Home</li>
    <li id="18">Page One<ul>
            <li id="20">Sub Menu One</li>
            <li id="21">Sub Menu Two<ul>
                    <li id="28">SubMenu 2-1</li>
                    <li id="29">SubMenu 2-2
                        <ul>
                            <li id="32">SubMenu 2-2-1</li>
                            <li id="33">SubMenu 2-2-2</li>
                        </ul>
                    </li>
                    <li id="30">SubMenu 2-3</li>
                    <li id="31">SubMenu 2-4</li>
                </ul>
            </li>
            <li id="22">Sub Menu Three</li>
        </ul>
    </li>
    <li id="19">Page Two</li>
</ul> 
```

我的问题是我的 XSL 样式表生成了一个包含两个祖先子菜单的列表！请帮忙......我已经在这几个小时了！这是我的 XSLT：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output indent="yes"/>
    <!-- The DOM ID of the active menu item -->
    <xsl:param name="activeItemID"/>

    <xsl:template match="text()">
        <xsl:apply-templates/>
    </xsl:template>

    <xsl:template match="menu">
        <ul>
            <xsl:choose>
                <xsl:when test="//item[@id = $activeItemID]/@child_of = '0'">
                    <xsl:choose>
                        <xsl:when test="//submenu[@child_of = $activeItemID]/node()">
                            <xsl:apply-templates
                                select="//item[@child_of = '0'] | //submenu[@child_of = $activeItemID]"/>
                        </xsl:when>
                        <xsl:otherwise>
                            <xsl:apply-templates select="//item[@child_of = '0']"/>
                        </xsl:otherwise>
                    </xsl:choose>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:choose>
                        <xsl:when test="//submenu[@child_of = $activeItemID]/node()">
                            <xsl:apply-templates
                                select="//item[@child_of = '0'] | //submenu[@child_of = $activeItemID]/ancestor-or-self::submenu/item"
                            />
                        </xsl:when>
                        <xsl:otherwise>
                            <xsl:apply-templates
                                select="//item[@child_of = '0'] | //item[@id = $activeItemID]/ancestor-or-self::submenu"
                            />
                        </xsl:otherwise>
                    </xsl:choose>
                </xsl:otherwise>
            </xsl:choose>
        </ul>
    </xsl:template>

    <xsl:template match="item">
        <li>
            <xsl:value-of select="title" disable-output-escaping="no"/>
            <xsl:apply-templates select="submenu[@child_of = $activeItemID]"/>
        </li>
    </xsl:template>

    <xsl:template match="submenu">
        <ul>
            <xsl:apply-templates select="item[@child_of = $activeItemID]">
                <xsl:sort select="menu_order" data-type="number"/>
            </xsl:apply-templates>
        </ul>
    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T13:33:01.510

这个 XSLT 应该做你想做的事情：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="yes"/>
  <!-- The DOM ID of the active menu item -->
  <xsl:param name="activeItemID" />

  <xsl:template match="menu | submenu">
    <ul>
      <xsl:apply-templates select="item" />
    </ul>
  </xsl:template>

  <xsl:template match="item">
    <li id="{@id}">
      <xsl:value-of select="title" />
      <xsl:apply-templates select="submenu[..//@id = $activeItemID]"/>
    </li>
  </xsl:template>
</xsl:stylesheet> 
```

在参数值为 18 的示例输入上运行时，它会产生：

```
<ul>
  <li id="1">Home</li>
  <li id="18">
    Page One<ul>
      <li id="20">Sub Menu One</li>
      <li id="21">Sub Menu Two</li>
      <li id="22">Sub Menu Three</li>
    </ul>
  </li>
  <li id="19">Page Two</li>
</ul> 
```

当使用参数值为 33 运行时，它会产生：

```
<ul>
  <li id="1">Home</li>
  <li id="18">
    Page One<ul>
      <li id="20">Sub Menu One</li>
      <li id="21">
        Sub Menu Two<ul>
          <li id="28">SubMenu 2-1</li>
          <li id="29">
            SubMenu 2-2<ul>
              <li id="32">SubMenu 2-2-1</li>
              <li id="33">SubMenu 2-2-2</li>
            </ul>
          </li>
          <li id="30">SubMenu 2-3</li>
          <li id="31">SubMenu 2-4</li>
        </ul>
      </li>
      <li id="22">Sub Menu Three</li>
    </ul>
  </li>
  <li id="19">Page Two</li>
</ul> 
```

您的 XSLT 有一些排序逻辑，但用于排序的元素似乎只出现在源 XML 中的一个位置。那是你想用的东西吗？`menu_order`为了简单起见，您是否省略了源 XML 中的大部分元素？

# php - ubuntu 12.04 无法使用 php 的 shell_exec 函数传输参数

> ID：15157736
> 
> 赞同：0
> 
> 时间：2013-03-01T12:24:35.443
> 
> 标签：php, parameters, ubuntu-12.04, shell-exec

在 ubuntu 10.4 服务器上。 `test.php`

```
$id="0.1";
$cmd=". ~/test.sh ".$id; 
shell_exec($cmd); 
```

测试.sh

```
echo "$1" >> a.txt
echo "count:$#" >> a.txt 
```

运行后`php test.php,a.txt`显示：

```
0.1
count:1 
```

在 ubuntu 12.04 服务器上`a.txt`显示：

```
(nothing display)
count:0 
```

所以任何人都知道使用php传输参数时ubuntu 12.04和ubuntu 10.4之间的区别`shell_exec function`

# sql - SQL 案例子查询计数

> ID：15157741
> 
> 赞同：1
> 
> 时间：2013-03-01T12:24:45.303
> 
> 标签：sql, count, case

我有 2 col 的桌子：

```
UID    NAME
-----------
111    AAA
222    BBB 
```

客户将输入名称，我必须检索具有相应值的 UID。如果名称不会出现在行中，它必须检索 000，而不是像没有行一样。

我正在尝试编写这样的查询：

```
SELECT  
   CASE UID 
      WHEN Count(*) = 0 THEN '000'
      ELSE UID 
   END
FROM table1   
WHERE NAME ='XXX' 
```

请在这方面帮助我。提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:08:53.243

如果 UID 是整数，则需要考虑强制转换：

```
select coalesce(cast(max(uid) as char(3)), '000')
from table1
where name = 'XXX' 
```

强制转换旨在成为 UID 的类型，在您的示例中似乎是 char(3)。

当没有匹配的行时，该`max()`函数返回 NULL。将`coalesce()`其转换为您正在寻找的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:31:23.513

尝试这个

```
select case
           when max(id) is null then
            0
           else
            max(id)
       end
  from table1
 where name = 'b' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T12:33:54.480

你有错误，以防万一

```
SELECT case when count(UID) = 0 THEN '000' ELSE UID end FROM table1 where name = 'XXX' 
```

sqlfiddle：[http ://www.sqlfiddle.com/#!2/257ea/1](http://www.sqlfiddle.com/#!2/257ea/1)

# bash - bash 回显字符串 >> 文件不起作用

> ID：15157742
> 
> 赞同：0
> 
> 时间：2013-03-01T12:24:48.283
> 
> 标签：bash, echo, io-redirection

我写了以下脚本：

```
在 `find 中查找文件名。-name '*'.cpp | grep $IN_REGEX | grep -v $OUT_REGEX`
做
    echo "输出文件为 $OUTPUT_FILE"
    count=`git log --pretty=format: --name-only $filename | grep -v ^$ | 厕所-l`
    echo "$count $filename" >> $OUTPUT_FILE
完毕

```

但是没有任何东西被写入输出文件。

请注意：

1.  我已经设置了 OUTPUT_FILE、IN_REGEX 和 OUT_REGEX 的值。
2.  循环内的代码正在执行。我用 sh -x 调用检查了这一点。
3.  当我删除 >> $OUTPUT_FILE 时，我得到了输出。
4.  我在脚本中尝试了触摸 $OUTPUT_FILE 并且工作正常。

有人可以在这里指出我的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:53:18.313

这行代码

```
for filename in `find . -name '*'.cpp 
```

是一个![在此处输入图像描述](../Images/4dc716b6a026df3828b2b91f1a8c1fb7.png)

（文件名中的空格中断）

你应该这样做：

```
while IFS= read -r file; do
    echo "Output file is $OUTPUT_FILE"
    count=$(git log --pretty=format: --name-only "$file" | grep -v '^$' | wc -l)
    echo "$count    $file" >> "$OUTPUT_FILE"      
done < <(find . -name '*.cpp' | grep "$IN_REGEX" | grep -v "$OUT_REGEX") 
```

为此，请确保其中`$OUTPUT_FILE`有路径。

# json - 在 node.js 中解析 JSON

> ID：15157743
> 
> 赞同：0
> 
> 时间：2013-03-01T12:24:50.203
> 
> 标签：json, node.js, parsing

我将如何解析 node.js 中的以下 JSON 以提取 temp 和 city 的值

```
{
"message":"",
"cod":"200",
"type":"base",
"calctime":"",
"units":"internal",
"count":1,
"list":
    [
        {"id":2823368,
        "coord":{"lat":47.666672,"lon":9.6},
        "name":"London",
        "main":{"temp":275.79,"pressure":1020,"humidity":74,"temp_min":272.59,"temp_max":281.48},
        "dt":1362137169,
        "date":"2013-03-01 11:26:09",
        "wind":{"speed":1.5,"deg":0},
        "clouds":{"all":90},
        "weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],
        "sys":{"country":"DE","population":18135},
        "url":"http:\/\/openweathermap.org\/city\/2823368"
        }
        ]
} 
```

我通过以下方式获得上述 JSON：

```
var response = JSON.parse(body);

console.log(response); 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:25:30.667

使用以下获取临时和城市（来自 url 的城市）或使用名称

```
var temp = response.list[0].main.temp,
url = response.list[0].url,
city = url.split('/')[3],
name = response.list[0].name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:27:44.870

```
var temp = response.list[0].main.temp;
var city = response.list[0].name; 
```

至于“城市”，我不确定您在寻找什么，因为您的输入中没有该名称的键，但我猜了一下。

# ant - ANT 脚本中的 XJC 任务显示“使用类自定义”

> ID：15157744
> 
> 赞同：5
> 
> 时间：2013-03-01T12:24:59.857
> 
> 标签：ant, jaxb

在 SNotification.xsd 上运行 XJC 任务时，两个 XSD（SNotification.xsd，CDataModel.xsd）正在生成相同的类。它显示的错误是：

```
A class/interface with the same name "com.att.mre.ecrupr.atlas.jms.MarketInfo" is already in use. Use a class customization to resolve this conflict.
      [xjc]   line 214 of file:/C:/Documents%20and%20Settings/rkar4749/workspace/ECRUPR_1306/AtlasEventsListener/xsd/Atlas/Container/Public/SubscriberNotification.xsd
      [xjc] [ERROR] (Relevant to above error) another "MarketInfo" is generated from here.
      [xjc]   line 22368 of file:/C:/Documents%20and%20Settings/rkar4749/workspace/ECRUPR_1306/AtlasEventsListener/xsd/Common/Types/Public/CingularDataModel.xsd
      [xjc] [ERROR] Two declarations cause a collision in the ObjectFactory class.
      [xjc]   line 22368 of file:/C:/Documents%20and%20Settings/rkar4749/workspace/ECRUPR_1306/AtlasEventsListener/xsd/Common/Types/Public/CingularDataModel.xsd
      [xjc] [ERROR] (Related to above error) This is the other declaration.   
      [xjc]   line 214 of file:/C:/Documents%20and%20Settings/rkar4749/workspace/ECRUPR_1306/AtlasEventsListener/xsd/Atlas/Container/Public/SubscriberNotification.xsd
      [xjc] failure in the XJC task. Use the Ant -verbose switch for more details 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-10-30T16:01:15.620

我有同样的问题并从终端运行以下命令并解决了

```
xjc -XautoNameResolution your.xsd 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:11:52.473

您可以使用外部绑定文件重命名生成的类之一。

**例子**

*   [JAXB：如何在 XSD 中指定 attr 类型时更改 XJC 生成的类名称？](https://stackoverflow.com/questions/4793637/jaxb-how-to-change-xjc-generated-classes-names-when-attr-type-is-specified-in-x/4793999#4793999)

# c# - 使用 LDAP 连接到 Active Directory 的连接字符串

> ID：15157746
> 
> 赞同：4
> 
> 时间：2013-03-01T12:25:02.050
> 
> 标签：c#, asp.net, asp.net-mvc, active-directory, ldap

我的系统管理员给了我这个：

域：capp.net 用户：capp\dhr2

通行证：admin@12345

连接字符串是什么？

我对 adfs 非常陌生。所以我尝试了这个：

```
<add name="ADConnectionString"
      connectionString="LDAP://capp.net/CN=dhr,DC=capp,DC=net"  />

<authentication mode="Forms">
  <forms name=".ADAuthCookie" timeout="43200"/>
</authentication>
<authorization>
</authorization>

<membership>
  <providers>
    <clear/>

    <add name="MyADMembershipProvider"
     type="System.Web.Security.ActiveDirectoryMembershipProvider"
     connectionUsername="cn=dhr2"
     connectionPassword="admin@12345"
    connectionStringName="ADConnectionString"/>

  </providers>
</membership> 
```

我总是收到此错误：无法与服务器建立安全连接

我对连接字符串做错了。我只是不知道如何解决它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T13:07:31.823

每当我从 .net 访问 AD 时，我都会执行以下操作：

```
var directoryEntry = new DirectoryEntry("LDAP://capp.net");
directoryEntry.Username = "capp\dhr2";
directoryEntry.Password = "admin@12345"; 
```

然后您可以使用 DirectorySearcher 查询“AD”。

```
var directorySearcher = new DirectorySearcher(directoryEntry); 
```

...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T09:13:07.527

感谢大家的帮助和支持。在我的情况下，正确的地址是：

LDAP://192.168.0.146/CN=USERS,DC=capp,DC=net

一开始我没有意识到的是，我试图连接到与当前域不同的域中的 Active Directory。所以IP地址是缺失的部分。感谢 Luis 的一百万，他意识到域有问题。

并感谢 Shadow Walker 更详细地解释了 ldap 连接字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T13:46:32.917

我们发现这样做最能确保您拥有正确的参数：

使用 LDAP 连接到 AD 的困难部分通常是[确定要登录的用户的 FDN。](http://ldapwiki.willeke.com/wiki/LDAP%20and%20Active%20Directory) 如果您知道用户的 samAccountName，您可以使用以下方法找到它：

```
dsquery user -samid jim
"CN=Jim Willeke,CN=Users,DC=mad,DC=willeke,DC=com" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T00:04:36.473

对于 Active Directory，ldap 连接字符串可以采用以下形式：

**协议：//域DNS地址**

其中协议可以是**ldap://**或**ldaps://**，具体取决于是使用标准连接还是 SSL 连接。在迁移到 SSL/TLS 之前，您应该始终使用标准连接进行故障排除，以避免此时出现证书问题。

domaindnsaddress 是您的域的 DNS 可解析地址 - 在您的情况下为 capp.net 。

一些编程语言，如 php，不需要 ldap:// 前缀来执行连接操作。您也可以尝试在没有它的情况下进行连接。

登录的用户名可以有多种形式。最常见的是：

*   NetBIOS 域名\samaccountname ( **CAPP\dhr2** - 注意反斜杠)

*   用户名 ( **dhr2@capp.net** )

*   samaccountname@domaindnsname ( **dhr2@capp.net** )

您可以在此处阅读 Microsoft 关于您的登录名可能形式的大量信息：
[MSDN - 简单身份验证](http://msdn.microsoft.com/en-us/library/cc223499.aspx)

密码不需要任何特殊处理 - 只需对您的 ldap 服务器执行标准绑定操作，您就应该通过身份验证。
请注意，我故意**不**包含任何示例代码，因为您的问题是关于连接字符串，而不是关于使用 C# 库连接到 ldap。

# python - 我在哪里向基本矩阵添加比例因子以产生真实世界的翻译值

> ID：15157756
> 
> 赞同：1
> 
> 时间：2013-03-01T12:25:36.097
> 
> 标签：python, opencv, image-processing

我正在使用 OpenCV 和 python，并希望获得两个相机之间的真实世界转换。我正在使用一个正在移动的校准相机。我已经完成了特征匹配、通过 RANSAC 计算 F 和计算 E。为了获得相机之间的平移，我想我可以使用：`w, u, vt = cv2.SVDecomp`然后我的 t 向量可以是：`t = u[:,2]`示例输出是：

`[[ -1.16399893 9.78967574 1.40910252]
[ -7.79802049 -0.26646268 -13.85252956]
[ -2.67690676 13.89538682 0.19209676]]`

向量：`[ 0.81586158 0.0750399 -0.57335756]`

我想我理解翻译是如何不在现实世界中的，所以如果我想要一个真实世界的翻译，我需要以某种方式提供这种比例。如果我确实知道相机之间的距离，我可以通过乘法将它直接应用于我的 t 向量吗？我想我在这里遗漏了一些东西......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T20:13:59.577

看起来答案是“是”。

如果相机之间的距离是 2m，那么得到的真实世界平移将是这个值和 t 向量的乘积：

```
dist = 2
t = [ 0.81586158 0.0750399 -0.57335756]
tworld = 2 * t

print tworld 
[ 1.63172316  0.1500798  -1.14671512] 
```

当然，这里要记住的是，虽然现在平移是在现实世界的单位中，但它仍然在摄像机 1 的摄像机坐标系中。所以这意味着我的第二个摄像头位于右侧 1.63172316m，向上 0.1500798m，位于摄像头一后面 -1.14671512。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-04-14T14:08:36.850

我有同样的问题。我认为单目相机可能需要一个已知 3D 坐标的对象。这可能会有所帮助。

# objective-c - 将实例方法作为函数指针传递给 C 库

> ID：15157759
> 
> 赞同：17
> 
> 时间：2013-03-01T12:25:47.243
> 
> 标签：objective-c, c, function-pointers

我正在编写一个使用 C 库的 Objective-C 应用程序。我目前面临的问题是 C 库有一个结构，其中一些字段是后来用作回调的函数指针。如何将 Objective-C 实例方法转换为函数指针并将其传递给库？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-01T12:34:42.037

您需要在 Objective-C 类实现文件中提供 C 回调函数，并且这仅在回调能够使用某种*上下文*指针时才有效。

所以想象一下 C 回调签名是这样的：

```
void myCallback(void *context, int someOtherInfo); 
```

然后在 Objective-C 类实现文件中，您需要使用该回调跳回到您的 Objective-C 类（使用*上下文*指针作为要调用的类的实例）：

```
// Forward declaration of C callback function
static void theCallbackFunction(void *context, int someOtherInfo);

// Private Methods
@interface MyClass ()
- (void)_callbackWithInfo:(int)someOtherInfo;
@end

@implementation MyClass

- (void)methodToSetupCallback
{
    // Call function to set the callback function, passing it a "context"
    setCallbackFunction(theCallbackFunction, self);
    ...
}

- (void)_callbackWithInfo:(int)someOtherInfo
{
    NSLog(@"Some info: %d", someOtherInfo);
}

@end

static void theCallbackFunction(void *context, int someOtherInfo)
{
    MyClass *object = (MyClass *)context;
    [object _callbackWithInfo:someOtherInfo];
} 
```

如果您的 C 回调函数不接受某种*上下文*信息，则：

1.  它坏了，应该修复/报告为错误。
2.  您将需要依赖在全局、静态、范围内存储*指向自身*的指针，以供 C 回调函数使用。这会将 的实例数限制`MyClass`为一个！

# c# - 处理静态列表

> ID：15157764
> 
> 赞同：0
> 
> 时间：2013-03-01T12:26:02.780
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我创建了一个权限对象，该对象存储 userId、用户所在的组和用户的权限。这是公开课

我还需要一个静态对象来存储这些权限对象的列表，如果管理更改权限中的任何内容，所有更改都会立即应用于每个登录的用户

我有一些问题：

1.  我应该在第一个用户登录时创建这个静态对象，还是应该使用一种机制在第一个用户登录之前创建该列表（例如，当我们在 IIS 上启动我们的应用程序时）？
2.  注销时删除特定用户的项目列表是否容易？

这是一项系统要求，即权限设置在管理员进行更改后立即生效。

**编辑1：**

```
public class permissionTemp
{
    public static Guid userGuid        { get; set; }
    public static string[] grupos      { get; set; }
    public static string[] permissoes  { get; set; }
}

public static class security
{
    public List<permissionTemp> userPermissionSet { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T12:36:35.527

考虑一个单例，所以你不用担心创建时间：

单身人士：

```
public class Permission
{
   private Permission()
   { }      

   private static Permission _instance = null;
   public static Permission Instance
   {
      get
      {
         if(_instance == null)
         {
            _instance = new Permission();
         }
         return _instance
      }
} 
```

现在您可以访问同一个实例

```
Permission.Instance 
```

该对象是在第一次访问时创建的。因此，在私有构造函数中，您可以添加代码以读取数据库的权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T14:02:12.457

1.  您可以使用 global.asax 中的 Application_Start 方法在网站第一次启动时运行一些代码。这将在处理第一个请求之前运行。
2.  您可以使用 global.asax 中的 Session_End 方法从列表中删除该项目。您也可以在执行 FormsAuthentication.SignOut 的同时执行此操作（如果您使用表单身份验证）。

注意：我会使用一些锁定机制来防止多个同时访问列表。存储列表的另一个位置是 WebCache。这被所有用户使用，所以如果它被 x 人更新，下一次从 y 读取的将是更新的版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T12:37:15.470

首先，我建议避免创建静态对象来存储此类感知信息，并且如果任何用户在未单击“注销”的情况下关闭浏览器，则不会为该特定用户删除对象。

尽管如此，如果您需要这样做以满足您的要求，您可以在应用程序第一次启动时在 Global.asax 文件的 Applciation Start Event 中的该对象中创建它。

# python - 注销成功后重定向django内置注销视图

> ID：15157771
> 
> 赞同：5
> 
> 时间：2013-03-01T12:26:33.717
> 
> 标签：python, django, redirect, view, logout

我正在使用 django 构建登录和注销页面，以下是我的代码

**网址.py**

```
from django.conf.urls.defaults import *
from django.conf import settings
from django.core.urlresolvers import reverse

urlpatterns = patterns('',
             url(r'^$', 'learn_django.views.home_page'),          
             url(r'^login/$', 'learn_django.views.login'),
             url(r'^logout/$', 'django.contrib.auth.views.logout', {'template_name': 'logout.html'}),
) 
```

**视图.py**

```
from django.shortcuts import render_to_response
from django.template import RequestContext
from django.contrib.auth import authenticate, login as main_login, logout as main_logout

def home_page(request):
    return render_to_response("home_page.html")

def login(request):
    .....
    .....
    return render_to_response("login.html") 
```

**注销.html**

```
{% extends 'base.html' %}
{% block title %}Logout Page{% endblock %}
{% block body %}
  <div>
    <p style='color:#092E20;font-size:25px;font-weight:bold;padding-top:20px;padding-left:15px;'>
         You have been successfully logged out......
    </p>
    <p>Redirecting to login page.....</p> 
  </div>      
{% endblock %} 
```

所以在上面的代码中，我将有一个登录网址，它将显示一个登录表单并在成功登录后重定向到另一个网址，这工作正常

此外，我将有一个我正在使用 django 的注销 url `built-in logout view`，通过为其提供一个模板，该模板`logout.html`也可以正常工作，并在我单击注销 url 时成功显示上述 html 代码

所以现在我想在显示注销页面后重定向到登录页面（一段时间后......）。我的意思是首先注销视图应该呈现`logout.html`代码，然后应该重定向到登录页面....

任何人都可以让我知道如何在渲染 logout.html 后重定向到登录 html 页面......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-01T12:30:54.770

您可以使用[`setTimeout()`](https://developer.mozilla.org/en/window.setTimeout)函数在指定的时间后重定向到另一个页面。

```
{% block extrahead %}{{ block.super }}
    <script type="text/javascript">
        setTimeout(function() {
            window.location.href = "/login/";
        }, 2000);
    </script>
{% endblock %} 
```

之后添加这个`{% block title %}Logout Page{% endblock %}`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-01T12:34:12.843

把它放在你的 logout.html 中

```
<script>
    function redirect(){
       window.location.href = "supply_url_here";
    }

    setTimeout(redirect, 2000); //2000 is equivalent to 2 seconds
</script> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-01T12:44:37.213

作为 javascript 重定向的替代方案，您还可以执行 HTTP Refresh Header：

```
# in views.py
from django.contrib.auth import logout as main_logout

def logout(*args, **kwargs):
    resp = main_logout(*args, **kwargs)
    resp['Refresh'] = '3;URL=/account/login/' # redirects after 3 seconds to /account/login
    return resp 
```

根据需要修改您的 urls.py。

这样做的好处是，即使禁用了 javascript，它也可以工作。缺点是*事实上*它只是标准头，HTTP标准中没有规定。

# regex - 单个正则表达式不适用于三种不同的模式

> ID：15157778
> 
> 赞同：0
> 
> 时间：2013-03-01T12:26:58.367
> 
> 标签：regex, perl

我需要一个最佳的正则表达式来匹配文本文件中的所有这三种类型的文本。

1.  [真假]
2.  [4,5,6,7]
3.  [2-15]

我正在尝试以下不起作用的正则表达式匹配

```
m/([0-9A-Fa-fx,]+)\s*[-~,]\s*([0-9A-Fa-fx,]+)/) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T12:47:14.867

```
/
   (?(DEFINE)
      (?<WORD> [a-zA-Z]+ )
      (?<NUM>  [0-9]+ )
   )

   \[ \s*
   (?: (?&WORD) (?: \s* , \s* (?&WORD) )+
   |   (?&NUM) (?: \s* , \s* (?&NUM) )+
   |   (?&NUM) \s* - \s* (?&NUM)
   )
   \s* \]
/x 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T12:30:30.780

`4-7`是 的子集`2-15`。此正则表达式应捕获它们：

```
/TRUE|FALSE|[2-9]|1[0-5]/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T15:22:45.683

一个quick'n'dirty测试程序：

```
#!/usr/bin/env perl

use strict;
use warnings;

for my $line (<DATA>) {

    chomp $line;
    print "$line: ";

    if ($line =~ /
            ^                                   # beginning of the string
            \[                                  # a literal opening sq. bracket
            (                                   # alternatives:
                  (TRUE|FALSE) (,(TRUE|FALSE))*     # one or more thruth words
                | (\d+) (,\d+)*                     # one or more numbers
                | (\d+) - (\d+)                     # a range of numbers
            )                                   # end of alternatives
            \]                                  # a literal closing sq. bracket
            $                                   # end of the string
        /x) {

        print "match\n";
    }
    else {
        print "no match\n";
    }
}

__DATA__
[TRUE]
foo
[FALSE,TRUE,FALSE]
[FALSE,TRUE,]
[42,FALSE]
[17,42,666]
bar
[17-42]
[17,42-666] 
```

输出：

```
[TRUE]: match
foo: no match
[FALSE,TRUE,FALSE]: match
[FALSE,TRUE,]: no match
[42,FALSE]: no match
[17,42,666]: match
bar: no match
[17-42]: match
[17,42-666]: no match 
```

# maven - maven-replacer-plugin 和多个文件

> ID：15157779
> 
> 赞同：14
> 
> 时间：2013-03-01T12:27:00.253
> 
> 标签：maven, maven-replacer-plugin

我编写了一个 Java Web 应用程序，在其中我在构建时将 URL 替换为静态内容以添加版本信息，主要用于缓存。

比如`href="myapp/css/default.min.css"`变成`href="myapp-0.2.8/css/default.min.css"`

我正在使用 maven maven-replacer-plugin 并且对于一个文件来说一切正常：

## 工作示例

使用文件标签进行单个文件替换。

```
 <plugin>
      <groupId>com.google.code.maven-replacer-plugin</groupId>
      <artifactId>replacer</artifactId>
      <version>1.5.2</version>
      <executions>
        <execution>
          <phase>prepare-package</phase>
          <goals>
            <goal>replace</goal>
          </goals>
        </execution>
      </executions>
      <configuration>
       <ignoreMissingFile>false</ignoreMissingFile>
       <file>${project.build.directory}/myApp/index.jsp</file>
        <replacements>
          <replacement>
            <token>%PROJECT_VERSION%</token>
            <value>${project.version}</value>
          </replacement>
        </replacements>
      </configuration>
    </plugin> 
```

Maven 调试输出为工作示例显示了这一点。

```
 [DEBUG] Configuring mojo 'com.google.code.maven-replacer-plugin:replacer:1.5.2:replace' with basic configurator -->
    [DEBUG]   (s) basedir = .
    [DEBUG]   (s) commentsEnabled = true
    [DEBUG]   (s) encoding = UTF-8
    [DEBUG]   (s) file = /Users/phisch/Development/MyApp/Workspace/MyApp-WebApp/target/myApp/index.jsp
    [DEBUG]   (s) ignoreErrors = false
    [DEBUG]   (s) ignoreMissingFile = false
    [DEBUG]   (s) preserveDir = true
    [DEBUG]   (s) quiet = false
    [DEBUG]   (s) token = %PROJECT_VERSION%
    [DEBUG]   (s) value = 0.3
    [DEBUG]   (s) replacements = [com.google.code.maven_replacer_plugin.Replacement@3bccdcbd]
    [DEBUG]   (s) skip = false
    [DEBUG]   (s) unescape = false
    [DEBUG] -- end configuration --
    [DEBUG] Replacement run on /Users/phisch/Development/MyApp/Workspace/MyApp-WebApp/target/myApp/index.jsp and writing to /Users/phisch/Development/MyApp/Workspace/MyApp-WebApp/target/myApp/index.jsp with encoding UTF-8
    [INFO] Replacement run on 1 file. 
```

## 不工作的例子

根据[使用指南](https://code.google.com/p/maven-replacer-plugin/wiki/UsageGuide)，我应该能够使用多个文件`includes:include`

但是下面的 pom.xml 配置什么都不做（注意第 15 行开始的 include-Tags）

```
 <plugin>
      <groupId>com.google.code.maven-replacer-plugin</groupId>
      <artifactId>replacer</artifactId>
      <version>1.5.2</version>
      <executions>
        <execution>
          <phase>prepare-package</phase>
          <goals>
            <goal>replace</goal>
          </goals>
        </execution>
      </executions>
      <configuration>
        <ignoreMissingFile>false</ignoreMissingFile>
        <includes>
          <include>${project.build.directory}/myApp/index.jsp</include>
        </includes>
        <replacements>
          <replacement>
            <token>%PROJECT_VERSION%</token>
            <value>${project.version}</value>
          </replacement>
        </replacements>
      </configuration>
    </plugin> 
```

调试输出如下。文件存在。

```
 DEBUG] Configuring mojo 'com.google.code.maven-replacer-plugin:replacer:1.5.2:replace' with basic configurator -->
    [DEBUG]   (s) basedir = .
    [DEBUG]   (s) commentsEnabled = true
    [DEBUG]   (s) encoding = UTF-8
    [DEBUG]   (s) ignoreErrors = false
    [DEBUG]   (s) ignoreMissingFile = false
    [DEBUG]   (s) includes = [/Users/phisch/Development/MyApp/Workspace/MyApp-WebApp/target/myApp/index.jsp]
    [DEBUG]   (s) preserveDir = true
    [DEBUG]   (s) quiet = false
    [DEBUG]   (s) token = %PROJECT_VERSION%
    [DEBUG]   (s) value = 0.3
    [DEBUG]   (s) token = %MyApp_PROJECT_VERSION%
    [DEBUG]   (s) value = 0.3 (Build: 20130301-1130)
    [DEBUG]   (s) replacements = [com.google.code.maven_replacer_plugin.Replacement@235d4338, com.google.code.maven_replacer_plugin.Replacement@3fe823ab]
    [DEBUG]   (s) skip = false
    [DEBUG]   (s) unescape = false
    [DEBUG] -- end configuration --
    [INFO] Replacement run on 0 file. 
```

如何替换多个文件中的相同标记/值对？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-06-25T07:23:55.927

The `includes` tag works with version 1.5.2 as well, you just have to specify the `basedir` tag before `includes`, and put the filepath (excluding the filename) as the `basedir` value and just the filename as the `include` tag value. So in your case something like this should work:

```
<plugin>
      <groupId>com.google.code.maven-replacer-plugin</groupId>
      <artifactId>replacer</artifactId>
      <version>1.5.2</version>
      <executions>
        <execution>
          <phase>prepare-package</phase>
          <goals>
            <goal>replace</goal>
          </goals>
        </execution>
      </executions>
      <configuration>
        <basedir>${project.build.directory}/myApp</basedir>
        <includes>
          <include>index.jsp</include>
        </includes>
        <replacements>
          <replacement>
            <token>%PROJECT_VERSION%</token>
            <value>${project.version}</value>
          </replacement>
        </replacements>
      </configuration>
    </plugin> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-02T13:04:41.557

This seems to be a bug in the latest 1.5.2 Version.

As soon as I change the version on bugfix level down to 1.5.1, the *Not Working Example* works just as expected and all tokens are replaced by their values.

```
<plugin>
  <groupId>com.google.code.maven-replacer-plugin</groupId>
  <artifactId>replacer</artifactId>
  <version>1.5.1</version>
  <executions>
    <execution>
      <phase>prepare-package</phase>
      <goals>
        <goal>replace</goal>
      </goals>
    </execution>
  </executions>
  <configuration>
    <includes>
      <include>${project.build.directory}/myApp/index.jsp</include>
    </includes>
    <replacements>
      <replacement>
        <token>%PROJECT_VERSION%</token>
        <value>${project.version}</value>
      </replacement>
    </replacements>
  </configuration>
</plugin> 
```

I also removed the ignoreMissingFile as suggested by ben.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-01T12:35:36.243

From the [maven-replacer-plugin doc](https://code.google.com/p/maven-replacer-plugin/wiki/UsageGuide) :

> *ignoreMissingFile*: Set to true to not fail build if the file is not found. First checks if file exists and exits without attempting to replace anything. **Only usable with file parameter.**

So I suggest to remove this parameter when using the `<includes>`

**EDIT**: use maven-replacer-plugin version 1.5.1 since version 1.5.2 seems buggy regarding this feature (thanks to phisch for this precision)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-07-30T12:18:52.533

The solution for the plugin version 1.5.2 by [mk7](https://stackoverflow.com/questions/15157779/maven-replacer-plugin-and-multiple-files/24402571#24402571) works for me. I added a basedir-Tag (i didn't had one) before the include-Tag in the plugin configuration.

```
<basedir>${basedir}</basedir> 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-04-12T09:19:57.770

I had the same problem with 1.5.2 and reverted to

```
<filesToinclude>file1, file2</filesToInclude> 
```

however I can imagine one would not like to add a dozen files manually...

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-03-24T21:39:38.487

I used the plugin in version 1.5.3 and all works fine

```
 <plugin>
            <groupId>com.google.code.maven-replacer-plugin</groupId>
            <artifactId>replacer</artifactId>
            <version>1.5.3</version>
            <executions>
                <execution>
                    <phase>prepare-package</phase>
                    <goals>
                        <goal>replace</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <basedir>ENTER_YOUR_BASEDIR</basedir>
                <includes>
                    <include>**/*.js</include>
                </includes>
                <replacements>
                    <replacement>
                        <token>WHAT_TO_REPLACE</token>
                        <value>VALUE</value>
                    </replacement>
                </replacements>
            </configuration>
        </plugin> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-22T09:47:00.923

I tried all answers here but no one worked for me. I manage to work around this issue by making multiple "single replacement" executions of the plugin

```
<plugin>
            <groupId>com.google.code.maven-replacer-plugin</groupId>
            <artifactId>replacer</artifactId>
            <inherited>false</inherited>
            <executions>
                <execution>
                    <id>replace-xxx.properties</id>
                    <phase>install</phase>
                    <goals>
                        <goal>replace</goal>
                    </goals>
                    <inherited>false</inherited>
                    <configuration>
                        <file>target/xxx.properties</file>
                        <replacements>
                            <replacement>
                                <token>$${dev.mail.server.address}</token>
                                <value>xxx</value>
                            </replacement>
                            <replacement>
                                <token>$${dev.mail.server.port}</token>
                                <value>yyyy</value>
                            </replacement>
                            <replacement>
                                <token>${dev.</token>
                                <value>${</value>
                            </replacement>
                        </replacements>
                        <regex>false</regex>
                    </configuration>
                </execution>
                <execution>
                    <id>replace-zzz-config.properties</id>
                    <phase>install</phase>
                    <goals>
                        <goal>replace</goal>
                    </goals>
                    <inherited>false</inherited>
                    <configuration>
                        <file>target/zzz-config.properties</file>
                        <replacements>
                            <replacement>
                                <token>$${dev.hazelcast.client.group.name}</token>
                                <value>ttt</value>
                            </replacement>
                            <replacement>
                                <token>${dev.</token>
                                <value>${</value>
                            </replacement>
                        </replacements>
                        <regex>false</regex>
                    </configuration>
                </execution>
                <execution>
                    <id>replace-aaa-security.properties</id>
                    <phase>install</phase>
                    <goals>
                        <goal>replace</goal>
                    </goals>
                    <inherited>false</inherited>
                    <configuration>
                        <file>target/aaa-security.properties</file>
                        <replacements>
                            <replacement>
                                <token>${dev.</token>
                                <value>${</value>
                            </replacement>
                        </replacements>
                        <regex>false</regex>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

# opencl - 对 OpenCL 驱动程序和软件感到困惑

> ID：15157796
> 
> 赞同：1
> 
> 时间：2013-03-01T12:27:55.860
> 
> 标签：opencl

我是 OpenCL 的新手。我有一台戴尔 XPS 1645 笔记本电脑，它配备 ATI Mobility Radeon HD 4670 显卡和英特尔 CPU。我看到 AMD 的软件不支持我的显卡使用 OpenCL，但在 Khronos 网站上，我的显卡被视为支持 OpenCL。那么，我必须做什么才能开始 OpenCL 编程？另外，我可以使用 AMD 的 OpenCL 软件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T02:50:43.337

看起来您有一台装有 Windows 7 的笔记本电脑、一个具有 4 核和超线程的 Intel Core i7 CPU？

OpenCL 可以在 CPU 和 GPU 上运行。使用此模型将无法将 GPU 用作 OpenCL 设备，但您仍可以将 CPU 用作 OpenCL 设备。

因此，请从 Intel 或 AMD 或两者下载 OpenCL SDK。安装它并尝试示例。

您将更改对 clGetDeviceIds( .... ) 的调用

以便指定的设备类型始终为 CL_DEVICE_TYPE_CPU

# javascript - 非常向后兼容。每个功能

> ID：15157799
> 
> 赞同：0
> 
> 时间：2013-03-01T12:28:22.923
> 
> 标签：javascript, rhino, ecma262

我正在数组上实现 .every 函数。我在一个旧的 javascript 引擎环境中，下面的函数并没有让编译器太高兴（Rhino）。JavaScript 的版本是 ECMA 262 标准 JavaScript 1.5。

但是，Mozilla 提供的使**.ever**向后兼容的代码似乎在引擎中不起作用，所以我试图实现一个更简单、功能更少的版本。因此，我想了解脚本是如何工作的，以便进行所需的调整。

我的问题; 我怎样才能实现一个极不复杂的下面的版本，它可以保证与 JS 1.5 一起工作？

```
if (!Array.prototype.every)
{
    Array.prototype.every = function(fun /*, thisp */)
    {
        "use strict";

         if (this == null)
             throw new TypeError();

         var t = Object(this);
         var len = t.length >>> 0;
         if (typeof fun != "function")
             throw new TypeError();

         var thisp = arguments[1];
         for (var i = 0; i < len; i++)
         {
             if (i in t && !fun.call(thisp, t[i], i, t))
             return false;
         }

         return true;
    };
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:40:43.507

该函数适用于 JS 1.5。当我修复这些问题时，我遇到了其他问题。

当然有点尴尬，但由于这个问题，我做了一些很好的研究，在其他方面帮助了我！

# c# - 4个圆的交点

> ID：15157800
> 
> 赞同：3
> 
> 时间：2013-03-01T12:28:24.887
> 
> 标签：c#, math

我试图找到 4 个圆圈的交叉区域。有什么方法可以计算吗？我需要它以便我可以在满足四个圆的交点的区域中找到最小点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:55:49.003

我将为每个圆定义一个 GraphicPath，并依次生成相交区域。

# android - 防止应用升级时数据丢失

> ID：15157804
> 
> 赞同：1
> 
> 时间：2013-03-01T12:28:40.170
> 
> 标签：android, mdm

我们开发了一个 Android 应用程序，并通过 MDM（移动设备管理，Soti Mobi 控制）推送新的安装和更新。发送的更新会在没有用户确认的情况下静默升级应用程序。因此，如果用户正在使用应用程序，则会自动停止、升级和从头开始启动，因此用户会丢失他们应该发送到服务器的重要更改。

是否可以在 mobi 控件中配置更新并提示用户（类似于我们手动升级到较新版本的 APK 时出现的情况）？

或者

我可以覆盖任何将在升级事件中调用的生命周期方法，并且如果用户的更改可用，我想中止更新吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T00:04:34.907

Android MDM 协议（称为[Device Admin](http://developer.android.com/guide/topics/admin/device-admin.html)）没有用于安装/卸载/升级应用程序的 API。

因此，推动升级不是内置的 Android 功能，而是 Soti Mobicontrol 应用程序的一个功能。我认为，用这个问题与他们联系是有意义的。

# html - TD 宽度不改变 CSS HTML

> ID：15157807
> 
> 赞同：1
> 
> 时间：2013-03-01T12:28:46.550
> 
> 标签：html, css, html-table, tablecolumn

我有一张桌子，第一行 4 项（一个 tr，4 td），第二行 1 项（另一个 tr，1 td）

我希望第二行项目居中对齐，所以我希望底行的 td 宽度为 100% 以填充 tr，但它不起作用。这是我当前的代码：

```
<table style="width:100%;">
<tbody><tr>
<td style="padding:20px 5px 5px 5px; text-align:center;">
<div style="height:75px; width:75px; border-color:#8AAEA4; border-style:solid; border-width:2px; display: block; margin-left:auto; margin-right:auto;">
<img height="75px" width="75px" src="/images/icons/default.jpg"></div><form style="display:inline; margin:0; padding:0; " action="/dashboard/shop_window/" method="post" onsubmit="return confirm('Are you sure?');">
<input type="hidden" name="action" value="tcd.profile.delete.shop.window.item">
<input type="hidden" name="item_id" value="">
<input class="add_to_sw" style="cursor: pointer; cursor: hand; background-color:#FFF;" type="submit" value="Delete">
</form>
</td>
<td style="padding:20px 5px 5px 5px; text-align:center;">
<div style="height:75px; width:75px; border-color:#8AAEA4; border-style:solid; border-width:2px; display: block; margin-left:auto; margin-right:auto;">
<img height="75px" width="75px" src="/images/icons/default.jpg"></div><form style="display:inline; margin:0; padding:0; " action="/dashboard/shop_window/" method="post" onsubmit="return confirm('Are you sure?');">
<input type="hidden" name="action" value="tcd.profile.delete.shop.window.item">
<input type="hidden" name="item_id" value="">
<input class="add_to_sw" style="cursor: pointer; cursor: hand; background-color:#FFF;" type="submit" value="Delete">
</form>
</td>
<td style="padding:20px 5px 5px 5px; text-align:center;">
<div style="height:75px; width:75px; border-color:#8AAEA4; border-style:solid; border-width:2px; display: block; margin-left:auto; margin-right:auto;">
<img height="75px" width="75px" src="/images/icons/default.jpg"></div><form style="display:inline; margin:0; padding:0; " action="/dashboard/shop_window/" method="post" onsubmit="return confirm('Are you sure?');">
<input type="hidden" name="action" value="tcd.profile.delete.shop.window.item">
<input type="hidden" name="item_id" value="">
<input class="add_to_sw" style="cursor: pointer; cursor: hand; background-color:#FFF;" type="submit" value="Delete">
</form>
</td>

<td style="padding:20px 5px 5px 5px; text-align:center;">
<div style="height:75px; width:75px; border-color:#8AAEA4; border-style:solid; border-width:2px; display: block; margin-left:auto; margin-right:auto;">
<img height="75px" width="75px" src="/images/icons/default.jpg"></div><form style="display:inline; margin:0; padding:0; " action="/dashboard/shop_window/" method="post" onsubmit="return confirm('Are you sure?');">
<input type="hidden" name="action" value="tcd.profile.delete.shop.window.item">
<input type="hidden" name="item_id" value="">
<input class="add_to_sw" style="cursor: pointer; cursor: hand; background-color:#FFF;" type="submit" value="Delete">
</form>
</td>
</tr>
<tr>
<td style="background-color: #FF0000; width:inherit; padding:10px 5px 5px 5px; text-align:center;">
<div style="height:75px; width:75px; border-color:#8AAEA4; border-style:solid; border-width:2px; display: block; margin-left:auto; margin-right:auto;">
<img height="75px" width="75px" src="/images/icons/default.jpg"></div><form style="display:inline; margin:0; padding:0; " action="/dashboard/shop_window/" method="post" onsubmit="return confirm('Are you sure?');">
<input type="hidden" name="action" value="tcd.profile.delete.shop.window.item">
<input type="hidden" name="item_id" value="">
<input class="add_to_sw" style="cursor: pointer; cursor: hand; background-color:#FFF;" type="submit" value="Delete">
</form></td>    
</tr>
</tbody></table> 
```

谁能看到我做错了什么？

这是jsfiddle：[JSFIDDLE](http://jsfiddle.net/UqPXw/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:32:13.303

最简单的方法是将`colspan`属性/属性添加到`td`标签。像这样：

```
<td style="background-color: #FF0000; width:inherit; padding:10px 5px 5px 5px; text-align:center;" colspan="4"> 
```

[更新](http://jsfiddle.net/UqPXw/1/)了小提琴链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T12:32:27.930

您需要添加`colspan="4"`到最后`td`：

```
<td colspan="4" style="background-color: #FF0000; width:inherit; padding:10px 5px 5px 5px; text-align:center;"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T13:26:29.757

查看您的代码， colspan 只会在特定时间解决。如果您将另一个项目放在第二行中，则需要在第二行中为两个单元格使用 colspan="2"。

一个好的解决方案是使用表格的 div、span 和 css。

# php - 每天由服务器在 PHP 上自动进行 url 查询？

> ID：15157814
> 
> 赞同：-1
> 
> 时间：2013-03-01T12:29:11.050
> 
> 标签：php, url

我想问一下Server on php是否可以每天自动发送一个url查询？

例如：每天自动转到

“ [http://www.--------.com/](http://www.--------.com/) ????”

没有任何人点击它，只是通过服务器或其他东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T12:30:38.173

使用`cron jobs` 或`schedule tasks`

参考： http: [//livecronjobs.com/how-to-set-cronjobs-using-php](http://livecronjobs.com/how-to-set-cronjobs-using-php)
[如何通过 PHP 脚本设置 cron 作业](https://stackoverflow.com/questions/5134952/how-can-i-set-cron-job-through-php-script)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:30:44.533

*nix 服务器的[cron](https://help.ubuntu.com/community/CronHowto)

[windows任务调度](http://support.microsoft.com/kb/308569)器

# jquery - 是否可以在 jQuery 中处理和过滤 JSON 响应？

> ID：15157817
> 
> 赞同：1
> 
> 时间：2013-03-01T12:29:26.763
> 
> 标签：jquery, ajax, error-handling

是否可以在执行or`jQuery.ajax()`之前处理来自服务器的 JSON 响应？`complete``error`

或者让我扩展这个问题：

在处理 JSON 数据（每个响应属性）时，判断`$.ajax()`它是一个`success`和`complete`AJAX 请求，还是一个`error`，所以`$.ajax({error: function() {} });`执行？

* * *

**示例伪代码：**

```
$.ajax({
    url: 'script.php',
    type: 'POST',
    data: {some: 'data-1'},
    dataType: 'json',
    process: function(data) {
        if(data.success == true && (data.data.length > 0)) {
            this.success = true;
        } else {
            this.success = false;
        }
    },
    success: function() {
        if( this.success == true ) {
            // it was a success
        }
    },
    error: function() {
        if( this.success == false ) {
            alert('there was an error');
        }
    }
}); 
```

为什么你可能会问？因为我想在任何地方都使用单一的`$.ajax()`语法，并且只`$.ajax({ process: function(data) {} });`应该不时更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:22:23.213

ajax 事件有全局事件处理程序：

```
$(document).ajaxComplete() //called when Ajax requests complete
$(document).ajaxError() //called when Ajax requests complete with an error
$(document).ajaxSend() //executed before an Ajax request is sent
$(document).ajaxStart() //called when the first Ajax request begins
$(document).ajaxStop() //called when all Ajax requests have completed
$(document).ajaxSuccess() 
//function to be executed whenever an Ajax request completes successfully 
```

以及ajax设置：

```
$(document).ajaxSetup({
    url: 'script.php',
    type: 'POST',
    data: '{}',
    dataType: 'json'
}); 
```

然后你可以打电话：

```
 $.ajax({ data: myData }); 
```

它使用了以上所有内容

这是一个使用 asp.net 的示例，它发回 .d 属性并将其转换为您需要的 JSON：

```
$(document).ajaxSetup({
    data: "{}",
    dataType: "json",
    type: "POST",
    contentType: "application/json",
    converters: {
        "json jsond": function(msg) {
            return msg.hasOwnProperty('d') ? msg.d : msg;
        }
    },
    error: function(xhr, textStatus, errorThrown) {
        var errorMessage = "Ajax error: " + this.url
             + " : " + textStatus + " : " + errorThrown 
             + " : " + xhr.statusText + " : " + xhr.status;
        alert(errorMessage);
        if (xhr.status != "0" || errorThrown != "abort") {
            alert(errorMessage);
        }
    }
}); 
```

注意：此转换器在成功或完成之前执行 - 所以我“认为”这就是您要问的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:36:25.143

是的

```
function setDefaultPoint(){
    var officeId =  $('#clientTrip_officeId').val();

    $.ajax({
        url:"${createLink(controller:'clientTrip',action:'setDefaultPoint')}",
        dataType: "json",
        data: { officeId: officeId },
        success: function(data) {
            console.log(data.defaultPoint.id, data.defaultPoint.name);
            console.log(data.company.id, data.company.name);
        }

    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T13:10:36.310

简单的答案是否定的，除非您想编写自己的 JSON 解析器。

使用标准 jQuery 功能，AJAX 成功和错误处理程序将分别响应成功/不成功的数据检索而触发，而不考虑数据的正确性，除了它是格式良好的 JSON。

数据只提供给成功处理程序，所以如果你想过滤它，你必须在其中进行。

好消息是，您可以在您自己的控制下获得您寻求的那种操作`$.Deferred()`，在两个处理程序中的任何一个处理程序中，根据您选择的任何条件来解决/拒绝该操作。这通常在返回 Deferred 承诺的函数内完成。

代码将是这样的：

```
function getData() {
    var dfrd = $.Deferred();
    $.ajax({
        url: 'script.php',
        type: 'POST',
        data: {some: 'data-1'},
        dataType: 'json'
    }).done(function(data, textStatus, jqXHR) {
        if(data.success == true && (data.data.length > 0)) {
            dfrd.resolve(data, textStatus, jqXHR);
        } else {
            dfrd.reject(jqXHR, "client-side error", "data.success==false and/or data.data.length==0");
        }
    }).fail(dfrd.reject);
    return dfrd.promise();
} 
```

因此，该函数执行您需要的额外检查，并且返回的 Promise 模拟 jqXHR 的完成/失败特征。

给返回的承诺提供 jqXHR 的全部功能需要更多的思考 - 例如。`.abort()`方法。

# sqlite - 在约束中指定列的上下文

> ID：15157821
> 
> 赞同：0
> 
> 时间：2013-03-01T12:29:28.473
> 
> 标签：sqlite, python-3.x

我正在使用 sqlite3。我希望能够做出一个约束，以确保日期范围不与现有日期范围重叠。如果它们确实重叠，只要 foobarId 不一样就可以了。我的问题是如何在下面给出的示例代码中指定上下文（我已经使用前缀`query.`来尝试显示上下文）？我什至不确定这是否有效，我猜这在我的 python 代码而不是我的 sql 代码中更合适，但我想知道它是否可能。

**示例代码**

```
cursor.execute("""CREATE TABLE foobar (
    foobarId INT,
    dateFrom DATE,
    dateTo DATE,
    CONSTRAINT valid CHECK ((SELECT * FROM foobar WHERE (query.dateFrom < dateFrom < query.dateTo OR query.dateFrom < dateTo < query.dateTo) AND foobarId = query.foobarId) IS NULL)
)""") 
```

**示例数据**

```
foobarid    dateFrom    dateTo   
1           2013.03.01  2013.03.04   
1           2013.03.04  2013.03.06   
2           2013.03.05  2013.03.07   
3           2013.03.03  2013.03.05
1           2013.03.05  2013.03.07 Invalid 
```

任何帮助将非常感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:03:45.213

[文档](http://www.sqlite.org/lang_createtable.html#ckconst)说：

> CHECK 约束的表达式可能不包含子查询。

因此，您必须注册一个要从`CHECK`表达式调用的用户定义函数，或者只需在插入数据的代码中进行检查。

* * *

在约束之外，在一般情况下，同一个表的多个实例将使用别名进行区分：

```
SELECT child.id, parent.id
FROM person AS child
JOIN person AS parent ON child.parentId = parent.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:05:21.907

您不能`SELECT`在检查约束中使用 a ；来自[文档](http://www.sqlite.org/lang_createtable.html#constraints)：*CHECK 约束的表达式可能不包含子查询。*

这意味着您无法使用 CHECK 约束做您想做的事情，而您必须*在*(Python) 代码中执行此操作。

# ios - 什么是适用于 iOS 应用程序的 Amazon 服务（db+REST webservices）

> ID：15157826
> 
> 赞同：0
> 
> 时间：2013-03-01T12:29:45.987
> 
> 标签：ios, amazon-web-services, amazon-s3

我会制作一个与 REST WebService 交互然后与远程数据库交互的移动应用程序。我无法估计几次后我能拥有多少用户，所以我会制定一个可扩展的解决方案。该应用程序应该提供一些休息服务来发布和获取数据以及持续运行的推送通知服务。我最初的想法是Java App + MySQL db....但我不知道是否有更好的可扩展方式。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:52:07.583

根据您所说，我认为您需要 AWS 中的两项服务：**EC2**和**RDS**。

在**EC2**中，您将拥有可以放置 API 的所有服务器。出于可扩展性的考虑，我建议您将服务器放在 LoadBalancer（**ELB**服务）之后，并设置自动扩展以在需要时添加和删除实例。您还可以拥有一个 EC2 实例来处理您的通知发送（一个守护程序）和另一个实例（或同一个）用于您的后端工作（从源下载数据）。

当然，对于数据库，您应该使用**RDS**。您只需要创建一个数据库，并配置安全性（谁可以访问它），您就可以使用它！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T20:46:18.523

只是添加另一个扩展性很好的选项：[Amazon Elastic Beanstalk](http://aws.amazon.com/elasticbeanstalk/)。总之：您将拥有完整的 Java 堆栈（Amazon Linux + Tomcat）、弹性存储（在 S3 上）以及可选的 RDS 实例（运行 MySQL，这将非常适合您的需求）。Amazon 负责扩展（VM 数量等）、设置负载均衡器和 RDS 实例。您应该只部署您的 .war 文件、数据库架构和数据并设置权限。

在我看来，最容易入手的是/maintain/scale/。它是一种 PaaS，与使用 EC2+RDS 不同，后者是 IaaS。

# asp.net - 无法检测到 CheckBox 的状态

> ID：15157832
> 
> 赞同：1
> 
> 时间：2013-03-01T12:30:23.503
> 
> 标签：asp.net, mysql, vb.net

我在检测复选框的状态时遇到问题。我有一个带有复选框的网格视图。广告我需要从选定的行中检索某个值以将其传递给查询。

但问题是当我遍历 GridView 行时，我无法确定选择了哪个复选框，哪个没有。该过程根本不输入此条件语句：

```
Dim chk As CheckBox  
 ....
        chk = CType(rowItem.Cells(0).FindControl("CheckBox1"), CheckBox)
        If chk.Checked Then
            Primaryid &= GridView1.DataKeys(rowItem.RowIndex)("account_id").ToString()
        End If 
```

我也尝试过这种类型的条件语句。但它也不起作用：

```
Dim Chkb As CheckBox = (CType(gvr.FindControl("CheckBox1"), CheckBox))
        If Chkb IsNot Nothing AndAlso Chkb.Checked Then
            Primaryid = gvr.Cells(0).Text
        End If 
```

这是触发执行的按钮的 VB 后端代码的功能：

```
Protected Sub RegBtn_Click(ByVal sender As Object, ByVal e As EventArgs) Handles RegBtn.Click
    Dim Primaryid As String = "Initial stage"
    Dim chk As CheckBox  

    For Each rowItem As GridViewRow In GridView1.Rows
        chk = CType(rowItem.Cells(0).FindControl("CheckBox1"), CheckBox)
        If chk.Checked Then
            Primaryid &= GridView1.DataKeys(rowItem.RowIndex)("account_id").ToString()
        End If
    Next

    Dim exmess As String = "alert('" & Primaryid & "')"
    Page.ClientScript.RegisterStartupScript(Me.GetType(), "ErrorAlert", exmess, True)

End Sub 
```

这就是我填充 GridView 的方式：

```
 Dim StrQwery As String = "SELECT account_id, account_name bla bla bla"       
        Dim smd As MySqlCommand
        smd = New MySqlCommand(StrQwery, myconn)
        smd.CommandType = CommandType.Text

        Dim da As New MySqlDataAdapter(smd)
        Dim cb As New MySqlCommandBuilder(da)
        Dim ds As New DataSet()
        da.Fill(ds)

        GridView1.DataSource = ds.Tables(0)
        GridView1.DataBind() 
```

这是前面部分的网格视图的代码：

```
 <asp:GridView ID="GridView1" runat="server"  CellPadding="4" ForeColor="#333333" 
        GridLines="None" Width="1500px">
        <Columns>

                    <asp:TemplateField >
                        <ItemTemplate>
                    <asp:CheckBox ID="CheckBox1" runat="server" textAlign="right"  /> 
                        </ItemTemplate>

                    </asp:TemplateField>

          </Columns>
        <AlternatingRowStyle BackColor="White" />
        <EditRowStyle BackColor="#2461BF" />
        <FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
        <HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
        <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
        <RowStyle BackColor="#EFF3FB" />
        <SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" />
        <SortedAscendingCellStyle BackColor="#F5F7FB" />
        <SortedAscendingHeaderStyle BackColor="#6D95E1" />
        <SortedDescendingCellStyle BackColor="#E9EBEF" />
        <SortedDescendingHeaderStyle BackColor="#4870BE" />
    </asp:GridView> 
```

我真的不明白我做错了什么以及我应该改变什么来达到结果。如果您能帮助我，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:18:25.453

嗨，在按钮单击操作中尝试此代码

```
 For Each rowItem As GridViewRow In GridView1.Rows
    If rowItem.RowType = DataControlRowType.DataRow Then
        Dim chk As CheckBox = TryCast(rowItem.FindControl("CheckBox1"), CheckBox)
        Dim lbl As Label = TryCast(rowItem.FindControl("primarylbl"), Label)

        Dim Primaryid As String = Nothing
        If chk.Checked Then
            Primaryid += lbl.Text
        End If
    End If
Next 
```

它会起作用的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:33:49.450

在这个循环中

```
 For Each rowItem As GridViewRow In GridView1.Rows
    chk = CType(rowItem.Cells(0).FindControl("CheckBox1"), CheckBox)
    If chk.Checked Then
        Primaryid &= GridView1.DataKeys(rowItem.RowIndex)("account_id").ToString()
    End If
Next 
```

从改变

```
 chk = CType(rowItem.Cells(0).FindControl("CheckBox1"), CheckBox) 
```

至

```
 chk = CType(rowItem.FindControl("CheckBox1"), CheckBox) 
```

这也是不可能的

```
Dim Chkb As CheckBox = (CType(gvr.FindControl("CheckBox1"), CheckBox)) 
```

试试这个

```
Dim Chkb As CheckBox = (CType(rowItem.FindControl("CheckBox1"), CheckBox)) 
```

# wif - 使用会话身份验证模块 (SAM) 时如何更新声明

> ID：15157841
> 
> 赞同：3
> 
> 时间：2013-03-01T12:30:56.767
> 
> 标签：wif, claims-based-identity

我正在使用会话身份验证模块将用户声明存储在身份验证 cookie 中。

在用户登录时更新用户声明的推荐方法是什么？例如，如果他们更新了他们的个人资料（名字/姓氏）并且我们想要更新相关的声明。

我不想在发生这种情况时将用户注销，所以`DeleteSessionTokenCookie`不是一种选择。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T15:36:40.693

使用 SAM.WriteSessionTokenToCookie 设置新的会话 cookie。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T11:01:13.683

Leastprivilege 的答案是正确的。

但是为了回应 Vijay V 的评论，这里是关于如何在向您的声明主体添加新声明后更新 cookie 的示例代码：

```
var sam = FederatedAuthentication.SessionAuthenticationModule;
if (sam != null)
{
    var token = new SessionSecurityToken(claimsPrincipal);
    sam.WriteSessionTokenToCookie(token);
} 
```

从[这里](https://stackoverflow.com/q/13674391)提取代码。

# jqplot - 即使在设置 numberColumns 后，JQPlot Legend 也不会在多列中显示：3

> ID：15157842
> 
> 赞同：2
> 
> 时间：2013-03-01T12:31:01.013
> 
> 标签：jqplot, legend

我想在多列和一行中显示图例，但即使在图例 rendererOptions 中设置这些属性后，它也不会改变，并且只显示在一列中。这是我正在使用的代码：

```
 $(document).ready(function () {
    var obj = JSON.parse("[[65,68],[88,59],[78,68],[68,69],[88,88],[75,66]]");
            $.jqplot.config.enablePlugins = true;
            plot2 = $.jqplot('chart1', obj, {
                animate: true,
                seriesDefaults: {
                    renderer: $.jqplot.BarRenderer,
                    rendererOptions: {
                        barWidth: 25,
                        barPadding: 2,
                        shadow: false,
                    },
                    pointLabels: {
                        show: true,
                    }
                },
                series: [
                 { label: 'English' },
                 { label: 'Hindi' },
                 { label: 'Maths' },
                 { label: 'Science' },
                 { label: 'Computers' },
                 { label: 'History' }
                ],

                seriesColors: ['#C0504D', '#1F497D', '#4BACC6', '#8064A2', '#9BBB59', '#F79646', '#948A54'],
                grid: {
                    backgroundColor: "#FFFFFF",
                    gridLineColor: '#000000',
                    drawBorder: false,
                    shadow: false,
                    gridLineWidth: 0.5
                },
                legend: {

                    show: true,

                    location:'s![enter image description here][1]',
                    placement: 'outsideGrid',
                    shrinkGrid: true,
                    rendererOptions: {
                        numberColumns: 3,
                        numberRows : 1
                    }
                },
                axes: {
                    xaxis: {
                        renderer: $.jqplot.CategoryAxisRenderer,
                        tickRenderer: $.jqplot.CanvasAxisTickRenderer,
                        ticks: ['FA 1', 'FA 2'],
                        tickOptions: {
                            angle: -90,
                            textColor: "#000000",
                            showGridline: true
                        },
                    },
                    yaxis: {
                        min: '0',
                        max: '100',
                        renderer: $.jqplot.CanvasAxisTickRenderer,
                        rendererOptions: { tickRenderer: $.jqplot.CanvasAxisTickRenderer },
                        ticks: [10, 20, 30, 40, 50, 60, 70, 80, 90, 100],
                        tickOptions: {
                            textColor: "#000000",
                            showGridline: true,
                            formatString: "%d"
                        }
                    }

                }
            });

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T02:49:48.617

`renderer: $.jqplot.EnhancedLegendRenderer`在图例选项中设置

[**JSFIDDLE**](http://jsfiddle.net/JWhmQ/1507/)

**代码**

```
$(document).ready(function () {
    var obj = JSON.parse("[[65,68],[88,59],[78,68],[68,69],[88,88],[75,66]]");
            $.jqplot.config.enablePlugins = true;
            plot2 = $.jqplot('chart1', obj, {
                animate: true,
                seriesDefaults: {
                    renderer: $.jqplot.BarRenderer,
                    rendererOptions: {
                        barWidth: 25,
                        barPadding: 2,
                        shadow: false,
                    },
                    pointLabels: {
                        show: true,
                    }
                },
                series: [
                 { label: 'English' },
                 { label: 'Hindi' },
                 { label: 'Maths' },
                 { label: 'Science' },
                 { label: 'Computers' },
                 { label: 'History' }
                ],

                seriesColors: ['#C0504D', '#1F497D', '#4BACC6', '#8064A2', '#9BBB59', '#F79646', '#948A54'],
                grid: {
                    backgroundColor: "#FFFFFF",
                    gridLineColor: '#000000',
                    drawBorder: false,
                    shadow: false,
                    gridLineWidth: 0.5
                },
                legend: {
                     renderer: $.jqplot.EnhancedLegendRenderer, 
                    show: true,

                    location:'s![enter image description here][2]',
                    placement: 'outsideGrid',
                    shrinkGrid: true,
                    rendererOptions: {
                                numberRows : 1
                    }
                },
                axes: {
                    xaxis: {
                        renderer: $.jqplot.CategoryAxisRenderer,
                        tickRenderer: $.jqplot.CanvasAxisTickRenderer,
                        ticks: ['FA 1', 'FA 2'],
                        tickOptions: {
                            angle: -90,
                            textColor: "#000000",
                            showGridline: true
                        },
                    },
                    yaxis: {
                        min: '0',
                        max: '100',
                        renderer: $.jqplot.CanvasAxisTickRenderer,
                        rendererOptions: { tickRenderer: $.jqplot.CanvasAxisTickRenderer },
                        ticks: [10, 20, 30, 40, 50, 60, 70, 80, 90, 100],
                        tickOptions: {
                            textColor: "#000000",
                            showGridline: true,
                            formatString: "%d"
                        }
                    }

                }
            });

}); 
```

如果你设置 `numberColumns : 1`的图例看起来像这样[**FIDDLE**](http://jsfiddle.net/JWhmQ/1508/) 它只会显示前 3 个系列

# python - 中间人 - 代理 - 太慢了

> ID：15157844
> 
> 赞同：0
> 
> 时间：2013-03-01T12:31:16.373
> 
> 标签：python, soap, proxy

我在 Python 中开发了一个简单的透明代理脚本，可以更改服务器-客户端流量中的字符串。
[Source Here](http://yabahaus.blogspot.pt/2011/02/outlook-2010-talking-to-exchange-2000.html)
它与 SMTP 一起使用，现在我已将其更改为其他应用程序。
我的问题是，在它更改了第一个定义的字符串后，我需要它停止处理消息，只将它们传递给正确的主机。
或者......如果有任何其他软件可以做到这一点，那就太好了。
并不是说我不相信自己的代码，而是经过良好测试并且性能更好的东西会很棒。
另外，请记住，原始代码将处理很少的流量，只有几封电子邮件，而这个新代码将处理很多，在主机之间和多个客户端之间传递的几条 SOAP 消息。
它正在工作，但是，我时不时地在客户端应用程序中收到“服务器断开连接”消息。
（对不起我糟糕的英语，如果需要会更新帖子，以便更好地理解）

# android - 平板电脑横向右侧的 Jquerymobile 垂直白线

> ID：15157847
> 
> 赞同：0
> 
> 时间：2013-03-01T12:31:25.150
> 
> 标签：android, cordova, jquery-mobile, tablet

我有一个 jquery mobile + phonegap android 应用程序的问题。我正在使用 jquerymobile 1.3.0 和 phonegap 2.4.0。该应用程序在手机（纵向或横向）上运行良好，问题出现在横向模式下的平板电脑上。在右侧，每页上都会出现一条白线。我试图隐藏将其添加到 Phonegap Activity 的滚动条（如论坛中所建议的那样）：

```
// Disable scrollbars 
super.appView.setVerticalScrollBarEnabled(false);
super.appView.setHorizontalScrollBarEnabled(false);

// Scrollbar Overlay Content
super.appView.setScrollBarStyle(View.SCROLLBARS_OUTSIDE_OVERLAY); 
```

它不起作用，我认为这不是滚动条问题，因为它只出现在平板电脑（模拟器和设备）上并且只出现在横向模式下。

这是一个屏幕截图：![设备截图](../Images/9f6f304a1ac99fbaf7c1b7b0ba0010e0.png)

有时就像页眉和页脚没有覆盖整个页面宽度，有时垂直线是白色的（不是背景颜色）。

[设备图像](https://i1304.photobucket.com/albums/s524/utnapishtim2/device-2013-03-01-132322_zps51673e95.png)

# android - Android列表视图显示按钮可见和不可见？

> ID：15157849
> 
> 赞同：0
> 
> 时间：2013-03-01T12:31:34.473
> 
> 标签：android, android-listview

我是 Android 开发人员。我在 json parser 中使用。我必须将所有数据存储在数组列表中。问题是什么意味着我得到了自定义 ID。他们给出了 0 和 1 值传递。当我得到 0 时表示添加按钮可见，否则 1 将进入表示自定义按钮可见。如何检查它在 get View 方法中。

我添加了 Array List 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:52:30.640

只需使用如下条件

```
if (yourvalue.equals("0")
{ 

button.setVisibility(View.VISIBLE);
}
else
{

button.setVisibility(View.GONE);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T15:32:03.280

在 get view 方法中使用以下代码：

```
button.setVisibility((value==0)?View.VISIBLE:View.GONE); 
```

# php - 从 Wordpress 中的邮件表单发送的邮件中的奇怪信件

> ID：15157852
> 
> 赞同：0
> 
> 时间：2013-03-01T12:31:44.333
> 
> 标签：php, wordpress, wordpress-theming

我需要更改这边使用的邮件表单的字符集：[http ://www.erik-dalsgaard.dk/kontakt/](http://www.erik-dalsgaard.dk/kontakt/)

我需要包括这些字母：Æ、æ、Ø、ø、Å、å

现在它发送邮件时输出的字母是 Ã†, Ã~,Ã 而不是上面的字母。

邮件表单的 php 是：

```
<?php

/*
Template Name: Contact
*/

get_header(); ?>

<?php 

//If the form is submitted
if(isset($_POST['submitted'])) {

    //Check to make sure that the name field is not empty
    if(trim($_POST['contactName']) === '') {
        $nameError = 'You forgot to enter your name.';
        $hasError = true;
    } else {
        $name = trim($_POST['contactName']);
    }

    //Check to make sure sure that a valid email address is submitted
    if(trim($_POST['email']) === '')  {
        $emailError = 'You forgot to enter your email address.';
        $hasError = true;
    } else if (!eregi("^[A-Z0-9._%-]+@[A-Z0-9._%-]+\.[A-Z]{2,4}$", trim($_POST['email']))) {
        $emailError = 'You entered an invalid email address.';
        $hasError = true;
    } else {
        $email = trim($_POST['email']);
    }

    //Check to make sure comments were entered  
    if(trim($_POST['comments']) === '') {
        $commentError = 'You forgot to enter your comments.';
        $hasError = true;
    } else {
        if(function_exists('stripslashes')) {
            $comments = stripslashes(trim($_POST['comments']));
        } else {
            $comments = trim($_POST['comments']);
        }
    }

    //If there is no error, send the email
    if(!isset($hasError)) {

        $emailTo = get_option_tree('pr_contact_email');
        $subject = 'Henvendelse fra hjemmeside fra '.$name;
        $msubject = trim($_POST['subject']);
        $body = "Navn: $name \n\nE-Mail: $email \n\nEmne: $msubject \n\nBesked: $comments";
        $headers = 'From: Besked fra hjemmeside <'.$emailTo.'>' . "\r\n" . 'Reply-To: ' . $email;

        mail($emailTo, $subject, $body, $headers);

        $emailSent = true;

    }
}
?>
<?php get_header(); ?>

<div class="inner custom_content"> 

    <div class="content  <?php global_template(content); ?>"> 

        <?php if (have_posts()) : while (have_posts()) : the_post(); ?>                    

        <?php if(the_content()){ ?>
        <div class="divider"></div>
        <?php } ?>

        <?php endwhile; endif; ?>

    <?php if(isset($emailSent) && $emailSent == true) { ?>

    <div class="form-success"> 
        <?php echo get_option_tree('pr_form_success'); ?>  
    </div>

    <?php } else { ?>

    <div class="form-success"> 
        <?php echo get_option_tree('pr_form_success'); ?> 
    </div>

        <form action="<?php the_permalink(); ?>" id="contactForm" class="big_form" method="post" accept-charset="UTF-8">

            <ul class="forms">
                <li>
                    <label for="contactName">Navn: *</label>
                    <input type="text" name="contactName" id="contactName" value="<?php if(isset($_POST['contactName'])) echo $_POST['contactName'];?>" class="requiredField <?php if($nameError != '') { ?>hightlight<?php } ?>" />

                </li>

                <li><label for="email"><?php tr_translate(email); ?>: *</label>
                    <input type="text" name="email" id="email" value="<?php if(isset($_POST['email']))  echo $_POST['email'];?>" class="requiredField email <?php if($emailError != '') { ?>hightlight<?php } ?>" />                    

                </li>

                <li><label for="subject">Emne:</label>
                    <input type="text" name="subject" id="subject" value="<?php if(isset($_POST['subject']))  echo $_POST['subject'];?>" />                 

                </li>

                <li class="textarea"><label for="commentsText">Besked: *</label>
                    <textarea name="comments" id="commentsText" rows="8" cols="60" class="requiredField <?php if($commentError != '') { ?>hightlight<?php } ?>"><?php if(isset($_POST['comments'])) { if(function_exists('stripslashes')) { echo stripslashes($_POST['comments']); } else { echo $_POST['comments']; } } ?></textarea>
                </li>               
                <li class="buttons">
                    <input type="hidden" name="submitted" id="submitted" value="true" />
                    <button type="submit" class="button light"><?php tr_translate(submit_contact); ?></button>
                    <div class="loading"></div>
                </li>
            </ul>
        </form>

    </div><!-- .content End --> 
    <!-- Content End -->    

<?php } ?>

<?php global_template(sidebar); ?> 

<?php get_footer(); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:03:49.367

有更多地方可能会出现此问题，但首先验证是否：
1\. MySQL 5 不支持完整的 UTF-8 字符
2\. 电子邮件客户端/主机不支持完整的 UTF-8 字符

很容易验证如果您在那里检测到此问题，请检查您的网站/您的数据库，然后您可能会尝试使用[此插件](http://wordpress.org/extend/plugins/full-utf-8/)或搜索类似的插件。

不好的部分是问题可能来自电子邮件客户端（例如：thunderbird 或 Outlook），甚至来自电子邮件主机。我遇到了一些语言特定字符的问题，这些字符在 yahoo 和 gmail webmail 中都显示得很好，但在任何圆形立方体主机中都没有。我最终用“正常”的角色替换了我的角色。（我还没有尝试过 ubove 插件）。
检查它说它重新编码字符的插件，所以它应该可以解决问题。
问候。

# xslt - Is it possible to add an attribute to literal result elements?

> ID：15157855
> 
> 赞同：1
> 
> 时间：2013-03-01T12:31:50.990
> 
> 标签：xslt

I have a big set of XSLT templates that generate `<div>` elements with assorted content. Matches look like these:

```
<xsl:template match="block[@name = 'block_blah']">
    <div>
       blah
       <div>foooo</div>
    </div>
</xsl:template>

<xsl:template match="block[@name = 'block2']">
    <div>
       <div>xyz</div>
       abc
    </div>
</xsl:template> 
```

I need to add an attribute to every first level `<div>`. So the output will become:

```
 <div data-blockname="block_blah">
       blah
       <div>foooo</div>
    </div>

    <div data-blockname="block2">
       <div>xyz</div>
       abc
    </div> 
```

Do I have to insert `data-blockname="{@name}"` manually in every case? Or is there a way to inject it globally?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:46:59.187

There is no way to do this "globally" as you say, but there are ways to restructure your XSLT and avoid repetition, like this:

```
<xsl:template match="block[@name]">
    <div name="{@name}">
      <xsl:apply-templates select="." mode="content" />
    </div>
<xsl:template>

<xsl:template match="block[@name = 'block_blah']" mode="content">
       blah
       <div>foooo</div>
</xsl:template>

<xsl:template match="block[@name = 'block2']" mode="content">
       <div>xyz</div>
       abc
</xsl:template> 
```

# jquery - 文件读取ajax调用浏览器兼容性

> ID：15157858
> 
> 赞同：0
> 
> 时间：2013-03-01T12:32:06.630
> 
> 标签：jquery, html, ajax, cross-browser

我正在尝试在给定的代码下运行。它在**IE 浏览器**中正常工作，但在其他浏览器中无法正常工作。

```
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.6.4 /jquery.min.js'></script>

<script type="text/javascript">
$(document).ready(function(){
 $("#button1").click(function(){

    alert("1");     
        $.ajax({url:"file://///30.170.12.75/Shared/a.html"
        ,success:function(result) {$("#div1").html(result);}
        ,error: function(result) {alert("2");}
         });
  });
});
<script> 
```

据我所知，jquery api 也为我们提供了浏览器兼容性，但它不适用于任何其他浏览器。

请让我知道原因，以便将来我会照顾他们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T12:37:18.467

您正在使用`file://`协议，如果源文档不是具有该协议的服务器，则大多数浏览器都不允许访问此`file://`协议。

对于 ajax 请求，如果目标协议是`file://`协议，大多数浏览器都会阻止请求。但是，IE 似乎并没有这样的行为，仍然允许请求完成。

如果您使用的是 Chrome，则可以通过使用`--allow-file-access-from-files`标志启动 Chrome 来更改此设置。

（是真的存在`file://`还是不存在`http://`或其他事情？）

# c# - 依赖注入 - 我应该注入“实用程序类”吗

> ID：15157861
> 
> 赞同：1
> 
> 时间：2013-03-01T12:32:14.360
> 
> 标签：c#, serialization, language-agnostic, dependency-injection

我正在审查现有代码，并且有一个“bean”类：

```
[Serializable]
public class MyData {
 string S {get;set;}
 int I {get;set;}
 //bla bla bla
 private IStringConverter sc;
 public MyData(IStringConverter sc){this.sc=sc}
} 
```

我认为在模型类中注入实用程序类/处理程序或其他任何东西是完全错误的，原因有两个：1）这会阻止序列化 2）为什么？模型类不应该有行为。

你同意？（我应该改变这样写的课程吗？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T12:42:06.410

您可以改为创建一个在 DTO 实例上运行并注入其依赖项的新服务。这样，您就可以从 DTO 中获得行为，并且一切都变得干净了。良好的建筑契合度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T12:40:48.267

将服务注入 DTO 可能不是最好的主意 :)

我会考虑使用将服务作为参数的扩展方法。

通过这种方式，“行为”与 DTO 分离，序列化不是问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T12:51:21.097

扩展方法可能是要走的路，但我认为这有点像让你的逻辑成为编译时单例，如果它永远不会改变，那很好。

所以我会尝试这样的事情，因为从字面上看，一切都是基于合同和可注射的

```
public class Poco
{
    public int Foo;
    public int Bar;
}

public class PocoUtility : IPocoUtility
{
    private IService _service; 
    public PocoUtility(IService service)
    {   
        _service = service;
    }

    public Result DoSomethingWithPoco(Poco poco)
    {
        return _service.Convert(poco);
    }
}

public class SomethingThatUsesAPoco
{
    private IPocoUtility _logicForSomething;

    public SomethingThatUsesAPoco(IPocoFactory pocoFactory,  IPocoUtility logicForSomething)
    {
        _poco = pocoFactory.CreateInstance();  
    }

    public Result DoIt()
    {
        return _logicForSomething.DoSomethingWithPoco(_poco);
    }
} 
```

# c - 用于编译和生成 C 文件输出的 Shell 脚本文件

> ID：15157865
> 
> 赞同：3
> 
> 时间：2013-03-01T12:32:24.767
> 
> 标签：c, unix, gcc, g++

我编写了这个 .sh 文件来编译任何 c 源文件，这样当我运行它时，它会询问文件名，gcc 会编译它，然后运行可执行文件 a.out。

但是当 .c 文件中存在错误时，这将无法正常工作。它还表明 a.out 不存在。我不希望出现此错误消息（a.out 不存在），而只想打印为 .c 文件生成的错误消息。

这是脚本..

```
echo `clear`
echo enter file name
read FILE
gcc $FILE
./a.out
echo -e '\n' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T12:36:11.720

如果你在 shell 脚本中启用 abort-on-error，生活会轻松很多：

```
#!/bin/sh
set -eu # makes your program exit on error or unbound variable
# ...your code here... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T12:49:53.343

使用内置规则作为脚本的替代方案，您可能希望将其`make`用作手工脚本的替代方案。要编译`file.c`并运行生成的可执行文件，您需要做的就是：

```
make file && ./file 
```

如果您不知道，我强烈建议您看一下该`make`实用程序，因为它会大大简化您的工作。没有它，管理一个文件项目以外的任何东西都会变得非常讨厌。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T12:35:06.190

您可以链接编译和执行命令：

```
echo `clear`
echo enter file name
read FILE
gcc $FILE && ./a.out
echo -e '\n' 
```

在这里，如果 gcc 失败，shell 将删除 ./a.out 命令。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T12:41:15.870

您也可以用双引号保护文件名：

```
#! /bin/bash
clear
echo -n "Enter file name: "
read FILE
gcc -Wall -W "$FILE" && ./a.out
echo 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-11T20:33:56.137

我希望这就是你正在寻找的它只需要这个命令：

> ./compile executableName myCProgram.c -lm

您可以将更多 C 文件放在彼此前面，并在行尾添加更多库，并且 executableName 不需要 .exe

```
#!/bin/bash
args="$@"
quant=$#

#Copies in case you need the -lm(math library) params
biblio=${args#*-}
#grabs all params except the first one which should be the name of the executable
firstCommand=${*:2:${#args}}
#Remove the "-lm -lc" from firstCommand
firstCommand=${firstCommand%%-*}

printf "\nEXECUTING: gcc -W -Wall -c $firstCommand\n"

#Creates the object file ".o"
gcc -W -Wall -c $firstCommand

#Convert the files names from example.c to example.o
args=${args//.c/.o}
printf "\nEXECUTING: gcc -o $args\n\n"

#Creates the executable
gcc -o $args

printf "\n**Now execute comand: ./$1  **\n\n" 
```

# cassandra - 卡桑德拉时间戳

> ID：15157867
> 
> 赞同：1
> 
> 时间：2013-03-01T12:32:25.960
> 
> 标签：cassandra, unix-timestamp

当我在“message_sent _at”中插入任何数字（如“12”或“15”）时，我想在以下示例中的插入命令中询问时间戳格式，我发现时间戳字段的所有值都是相同的值：1970- 01-01 02:00 埃及标准时间。

样本：

```
CREATE TABLE chat (
  id1 int,
  id2 int,
  message_sent_at timestamp,
  message text,
  primary key ((id1, id2), message_sent_at)
 ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:03:27.453

时间戳类型的单位是自纪元 (1/1/1970 00:00:00 UTC) 以来的毫秒数。输入 12 表示午夜后 12 毫秒，因此当以该格式显示时，将四舍五入到您打印的时间（在您的时区）。

您可以从此处的日期创建时间戳：[http](http://www.epochconverter.com/) ://www.epochconverter.com/ 。

# html - 如何使用 HTML5 或 Phonegap 存储 40.000 张图像？

> ID：15157869
> 
> 赞同：6
> 
> 时间：2013-03-01T12:32:31.707
> 
> 标签：html, cordova, offline-caching, html5-appcache

我已经搜索了很长时间，以寻找一种在 HTML5 中存储大量图像的方法，或者访问它们存储在本地并显示它们。

该应用程序是一个产品订购和目录，就像一个电子商务网站，但对于批量订单，而不是最终客户，每个图像都是一个产品，这就是为什么需要有 40k 个图像的原因。需求来自于要求销售人员可以离线模式使用平板电脑数天、数周，并且只有在他连接或想要同步时才与 ERP 同步。

每个销售人员都有一个专用的 Android 平板电脑 Tegra3 Quad-Core，32Gb 用于应用程序。但该应用程序还支持桌面上的 iPad 和 Chrome。

但是，我面临以下限制：

1.  离线使用 html5（应用程序缓存） - 这在 iOS 设备中被限制为 50Mb，并且难以管理清单文件。
2.  使用带有 base64 编码图像的 webSQL 数据库。相同的大小限制 (50Mb)。
3.  将 localCache 与 base64 一起使用，再次限制大小（5 到 10Mb）。
4.  将我的 HTML5 应用程序转换为使用 PhoneGap File API，但随后我失去了对 Windows PC 的桌面支持，并且在 Web 服务方面遇到了一些问题。

所以也许我错过了另一种方法来做到这一点？

有没有一种 HTML5 方法来存储大量图像以供离线查看？移动设备不支持 FileSystem API，并且能够在移动设备上运行是一个强烈的要求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T10:16:29.123

[Phonegap 自己的文件系统 API 实现](http://docs.phonegap.com/en/2.5.0/cordova_file_file.md.html#File)不应该在移动设备上工作吗？我的意思是这就是为什么首先创建Phonegap。

> 直接来自 FileReader 的 Cordova API 文档：
> 
> 支持的平台
> 
> *   安卓
> *   BlackBerry WebWorks（OS 5.0 及更高版本）
> *   **iOS**
> *   Windows Phone 7 和 8
> *   视窗 8

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T23:20:19.333

该解决方案将使用 File API 将 HTML5 应用程序的一个端口传递给 phoneGap 应用程序。

HTML5 不同的实现是这个决定的原因。由于 AppCache 在大多数移动浏览器中非常有限，并且缺乏对 FileSystem API 的支持。您只能在移动浏览器上存储 16-52Mb 的事实是 HTML5 Web 应用程序需要大量本地存储数据（可离线使用）的限制因素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T13:33:52.600

随机的，精灵表？只会制作一个文件，并将请求最小化

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T21:35:57.230

运行只能接受本地连接的本地网络服务器怎么样？在 Apache 中，配置文件中的“允许来自 127.0.0.1”之类的内容应该可以解决问题。使用本地网络服务器可以让您避开任何 HTML 限制。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T09:40:53.330

您可以简单地将其存储在您的 sqlite 数据库中。您可以在产品详细信息表中再添加一个字段（列）。

您可以以 BLOB 格式或 base64 格式存储图像。（在您的数据库中）。

使用phoneGap，您可以轻松访问您的数据库和数据库中的不同表。

为了提高性能并节省带宽：您可以做的是应用延迟加载图像。每当您下载新图像时，只需将其存储到数据库中即可。

这样您就可以避免 I/O 操作，而且如果您使用 MVC，那么在您的产品详细信息对象（模态类）中，您也将拥有图像对象。

希望这个建议对你有用:)

# node.js - 如何快速访问和提供静态文件

> ID：15157870
> 
> 赞同：0
> 
> 时间：2013-03-01T12:32:43.230
> 
> 标签：node.js, express

我有一个这样的 server.js：

```
var express = require('express');
var app=express();
app.get('/',function(req,res){
res.send(index.html); //this is stupid

});
app.listen(3000); 
```

我的索引文件与 server.js 位于同一目录中

请指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:34:16.540

你看过他们的文档吗？FAQ 中提到了静态文件服务，例如：[http ://expressjs.com/faq.html](http://expressjs.com/faq.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T14:38:29.333

写这个：

```
app.use(express.static(__dirname + '/public')); 
```

将所有公共静态文件放在 /public 文件夹中

# arcgis - WMS 服务未添加到 Silverlight 中的地图

> ID：15157871
> 
> 赞同：2
> 
> 时间：2013-03-01T12:32:45.907
> 
> 标签：arcgis, wms

我在 ArcGIS Server 10 上创建了一个 MapService 并启用了 WMS 功能并编写了一个代码来在我的 Silverlight 4 地图应用程序上添加这个 WMS 服务，但它没有添加服务，地图不可见，但是当我添加 WMS url在 ArcMAP 我可以查看地图 请评论我在这里缺少什么？代码在这里

```
ESRI.ArcGIS.Client.Toolkit.DataSources.WmsLayer newLayer = 
    new ESRI.ArcGIS.Client.Toolkit.DataSources.WmsLayer();
newLayer.Url = "http://server1.com/arcgis/services/merged_soi1/MapServer/WMSServer";
newLayer.ID = "newLayer1";
newLayer.SkipGetCapabilities = true;
MyMap.Layers.Add(newLayer); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:09:36.300

尝试指定地图图层。WMS 允许多个图层，因此即使您只有一个图层，您也可能需要指定名称。例如，新泽西州在这里提供了一个 WMS：

[http://njwebmap.state.nj.us/njimagery](http://njwebmap.state.nj.us/njimagery)

将 URL 放入 ArcCatalog 中，您将看到十几层左右。但是如果你尝试用你的代码将它添加到 SL 中，SL 将不知道要使用哪个层。所以你必须这样写：

[http://njwebmap.state.nj.us/njimagery?layers=Natural2010](http://njwebmap.state.nj.us/njimagery?layers=Natural2010)

这让你得到了 2010 Orthos。

祝你好运。

厄尼

# xml - 如何在 XSL 中获取数组长度？

> ID：15157872
> 
> 赞同：0
> 
> 时间：2013-03-01T12:32:49.227
> 
> 标签：xml, xslt, apache-fop

我需要显示表格，如果数组有元素，还有另一个块，如果数组为空？我现在只有 for-each。我的数组有“项目”名称。

```
<some table header code...>
<xsl:for-each select="items/item">
    <some row code...>
</xsl:for-each> 
```

我想要另一个变体，像这样，但采用 XSL 风格：

```
<xsl:if list is empty>
    <block> There is no elements!!! </block>
<xsl:else>
    <table code>
</xsl:if> 
```

我该怎么做？我需要 if for FOP（pdf 生成器）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T12:40:47.190

你可以这样做：

```
<xsl:choose>
   <xsl:when test="items/item">
       <xsl:for-each select="items/item">
            <some row code...>
       </xsl:for-each>
   </xsl:when>
   <xsl:otherwise>
       <block>  ... </block>
   </xsl:otherwise>
</xsl:choose> 
```

但这将是一个更好的方法：

```
<xsl:apply-templates select="items[not(item)] | items/item" />

...

<xsl:template match="items">
   <block> ... </block>
</xsl:template>

<xsl:template match="item">
   <!-- Row code -->
</xsl:template> 
```

# ruby-on-rails - 即使使用 rvm 重新安装后也无法加载 openssl

> ID：15157874
> 
> 赞同：2
> 
> 时间：2013-03-01T12:32:53.790
> 
> 标签：ruby-on-rails, openssl, rvm

所以我基本上明白了：

```
/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/net/https.rb:22:in `require': cannot load such file -- openssl (LoadError)
    from /.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/net/https.rb:22:in `<top (required)>'
    from /.rvm/gems/ruby-1.9.3-p392/gems/activeresource-3.2.12/lib/active_resource/connection.rb:4:in `require'
    from /.rvm/gems/ruby-1.9.3-p392/gems/activeresource-3.2.12/lib/active_resource/connection.rb:4:in `<top (required)>'
    from /.rvm/gems/ruby-1.9.3-p392/gems/activeresource-3.2.12/lib/active_resource/base.rb:15:in `require'
    from /.rvm/gems/ruby-1.9.3-p392/gems/activeresource-3.2.12/lib/active_resource/base.rb:15:in `<top (required)>'
    from /.rvm/gems/ruby-1.9.3-p392/gems/cached_resource-2.3.3/lib/cached_resource.rb:15:in `<top (required)>'
    from /.rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.0/lib/bundler/runtime.rb:72:in `require'
    from /.rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.0/lib/bundler/runtime.rb:72:in `block (2 levels) in require'
    from /.rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.0/lib/bundler/runtime.rb:70:in `each'
    from /.rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.0/lib/bundler/runtime.rb:70:in `block in require'
    from /.rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.0/lib/bundler/runtime.rb:59:in `each'
    from /.rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.0/lib/bundler/runtime.rb:59:in `require'
    from /.rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.0/lib/bundler.rb:132:in `require'
    from /.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.12/lib/rails/commands.rb:53:in `require'
    from /.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.12/lib/rails/commands.rb:53:in `block in <top (required)>'
    from /.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.12/lib/rails/commands.rb:50:in `tap'
    from /.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.12/lib/rails/commands.rb:50:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

即使在这样做之后：

```
$ rvm pkg install openssl
$ rvm remove 1.9.3
$ rvm install 1.9.3 --with-openssl-dir=$HOME/.rvm/usr 
```

我的`.zhsrc`文件中也有这个：

```
[[ -s $HOME/.rvm/scripts/rvm ]] && source $HOME/.rvm/scripts/rvm 
```

当我在我的项目目录上尝试 tuse any `rails`or command 时会发生这种情况。`rake`我尝试了很多东西，我仍然找不到通过它的方法。

任何帮助将非常感激。提前致谢。

# php - HTML 列表到 CSV

> ID：15157876
> 
> 赞同：3
> 
> 时间：2013-03-01T12:33:03.053
> 
> 标签：php, excel, csv, html-lists

我有一个多级列表，示例如下：

```
<ul>       
    <li>Test column 01
        <ul>       
            <li>Test column 02
                <ul>       
                    <li>Test column 03
                        <ul>       
                            <li>Test column 04
                                <ul>       
                                    <li>Test column 05</li>
                                    <li>Test column 05</li>
                                    <li>Test column 05</li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>
    </li>
</ul> 
```

我想运行一些将列表输出为 csv 文件的 php 代码，格式如下：

```
Test column 01
,Test column 02
,,Test column 03
,,,Test column 04
,,,,Test column 05
,,,,Test column 05
,,,,Test column 05 
```

基本上，我希望能够通过一些 php 代码运行一个 html 列表（具有无限数量的级别），并输出一个可以在 excel 中打开的 csv 文件，并在列中保留列表级别。

如果我能找到某种方法为每个列表项添加一个类，具体取决于它的级别，所以第一级列表项得到一个级别 1 的类，第二级，一个级别 2 的类等，那么它应该是相当简单的找到和更换其余的。

非常感谢任何想法/帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T13:35:01.370

这适用于您的示例 HTML：

```
$dom = new DOMDocument;
$dom->preserveWhiteSpace = false;
$dom->loadHTML($html);

foreach ($dom->getElementsByTagName('li') as $li) {   // #1
  printf(
      '%s%s%s', 
      str_repeat(',', get_depth($li)),                // #2
      trim($li->childNodes->item(0)->nodeValue),      // #3
      PHP_EOL
  );
}

function get_depth(DOMElement $element)
{
    $depth = -1;
    while (                                           // #4
        $element->parentNode->tagName === 'li' || 
        $element->parentNode->tagName === 'ul'
    ) {
        if ($element->parentNode->tagName === 'ul') { // #5
            $depth++;
        }
        $element = $element->parentNode;
    }
    return $depth;
} 
```

你可以[在这里看到演示](http://eval.in/11349)。

标记说明：

1.  我们获取标记中的所有 LI 元素，而不考虑它们的位置。如果您只想获取特定的 UL 块，请使用包含起始 UL 元素的 DOMElement 中的 getElementsByTagName。我把它留给你来弄清楚如何做到这一点。
2.  我们为每个计算的深度添加一个逗号。深度等于当前 LI 元素上方的 UL 元素数量
3.  我们只获取 LI 元素的第一个子节点，假设它是您想要的文本节点。如果您的实际标记不仅仅包含文本节点和潜在的 UL 元素，您需要调整它以仅包含您想要的文本内容。我们正在修剪文本结果以删除当 LI 元素中有子 UL 元素时它将具有的换行符。
4.  为了获得深度，我们向上遍历 DOM 树，直到没有更多的 LI 或 UL 元素。
5.  由于我们希望在初始 LI 之上的每个 UL 元素有一个逗号，因此我们只在 parentNode 是 UL 元素时将 +1 添加到 $depth

# c# - 有关 C# Dispose 工作原理的更多信息

> ID：15157877
> 
> 赞同：1
> 
> 时间：2013-03-01T12:33:06.063
> 
> 标签：c#, garbage-collection

在试图理解 IDisposable 时，我有几个问题大多数答案都没有明确说明。

1.  如果我们在一个对象上调用 dispose，那是在那个时候释放这个对象还是只释放我们想要清理的类成员，并且整个对象稍后会被 GC 销毁。

2.  我们在 dispose 方法中抑制 finalizer 后，GC 是否还会清理所有我们在 dispose 中没有清理的类成员？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T12:35:06.403

一旦对它的所有引用都消失了，就会以非确定性的方式对对象进行垃圾收集。 来自 MSDN 的[垃圾收集：](http://msdn.microsoft.com/en-us/library/ms973837.aspx) [Garabge 收集基础](http://msdn.microsoft.com/en-us/library/ee787088.aspx)

> 当下列条件之一为真时，就会发生垃圾收集：
> 
> 1.  系统物理内存不足。
> 2.  托管堆上分配的对象使用的内存超过了可接受的阈值。这意味着已超过托管堆上可接受的内存使用量的阈值。随着流程的运行，此阈值会不断调整。
> 
> GC.Collect 方法被调用。在几乎所有情况下，您都不必调用此方法，因为垃圾收集器会持续运行。此方法主要用于特殊情况和测试。

1.  [垃圾收集何时使用](http://www.bluebytesoftware.com/blog/2005/04/08/DGUpdateDisposeFinalizationAndResourceManagement.aspx)
2.  [了解对象生命周期](http://mr-ponna.com/Article/21/Understanding-Object-Lifetime/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T12:40:51.923

首先，关于这个主题有很多重复的问题。如果真的没有其他答案明确回答您的问题，那么它们就是这样，但我希望这将作为重复关闭。

首先，`Dispose`只是一种方法，一种普通的方法。它根本不处理垃圾收集。

那么 Dispose 是做什么的呢？它应该用于清理非托管资源，例如文件句柄、窗口句柄等。.NET 垃圾收集器不知道的事情。

所以回答问题 1：“是的”，当你调用`Dispose`一个对象时，它会被放置在那里。类上没有设置标记以指示稍后进行清理。

由于 Dispose 不处理 Garbage Collection，因此您可以在 dispose 后轻松保留对对象的引用，并且不会被垃圾回收。垃圾回收仅在不再引用该对象时发生。即使您没有调用`Dispose`对象，这也可能发生，但不会发生*，因为*您调用`Dispose`了对象。

第二个问题：当 GC 在通过终结器循环后收集对象时，GC 将清理对象 + 它引用的任何不再有任何引用的对象（除了来自您的对象的引用）。这发生*在某个时候*，也不一定是同时发生的。

抑制终结器只是确保 GC 不会做不必要的工作，通过说“当你找到这个对象并确定它有资格收集时，继续收集它，我已经处理了'终结' 清理所以你不必“。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T12:54:35.787

首先也是最重要的，您需要了解处理对象和垃圾收集对象是[**完全**不同的事情](https://stackoverflow.com/questions/339063/what-is-the-difference-between-using-idisposable-vs-a-destructor-in-c)——确保不要混淆两者！

1.  如果我们在一个对象上调用 dispose，**唯一**发生的事情就是该[`Dispose`](http://msdn.microsoft.com/en-gb/library/system.idisposable.dispose.aspx)方法被调用。可能是该`Dispose`方法然后继续调用[`GC.SuppressFinalize`](http://msdn.microsoft.com/en-gb/library/system.gc.suppressfinalize.aspx)，但是它可能根本不做任何事情*-*它完全取决于实现。

2.  当我们调用时`GC.SuppressFinalize`，**唯一**发生的事情是它要求 GC 在收集对象时不要调用对象终结器（*几乎*就像对象一开始没有终结器一样）。

碰巧的是，一个常见的模式是让具有终结器的对象也实现`IDisposable`，以便可以确定性地清理非托管资源 - 如果发生这种情况，则 GC 不需要调用终结器，因为在当我们调用终结器时，已经执行了终结器`Dispose`——调用`GC.SuppressFinalize`只是对 GC 的友好提示，它实际上并不需要调用终结器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T12:40:40.807

1) 当您对一个对象调用 dispose 时，所发生的一切就是运行其 Dispose() 方法中的代码。这段代码当然可以为它的一个或多个字段调用 Dispose()，但这不是必须的。

它也可以调用基类' `Dispose(true)`，如果有的话（通过`base.Dispose()`），但那是使用 Dispose Idiom; `Dispose(bool)`不是`IDisposable`界面的一部分。

2) 仅针对调用 SuppressFinalize() 的特定对象抑制终结器。它不会影响任何其他对象（包括调用 SuppressFinalize() 的对象的字段所持有的任何对象）。

# mysql - MYSQL GROUP BY 多个派生表？

> ID：15157878
> 
> 赞同：2
> 
> 时间：2013-03-01T12:33:08.887
> 
> 标签：mysql

我有这个查询，它基于一些与`INNER JOIN`.

目前我有一个`WHERE`条款，它一次提取一个 id。但是我怎样才能让它列出*所有*的ID呢？

我`GROUP BY`在不同的地方尝试过，但无法弄清楚。

到目前为止，我的查询如下：

```
SELECT 
equipment_id, 
service_duration,
available_duration,
(available_duration / service_duration)*100 AS availability
FROM (
SELECT
SUM(service_end_time - service_start_time) AS service_duration
FROM(   
    SELECT equipment_id, 
    (CASE  
    END) AS service_start_time,
    (CASE  
    END) AS service_end_time
FROM t1 
WHERE equipment_id = 'EX123' 
  )AS A
) AS B
JOIN(
SELECT equipment_id, 
       SUM(available_end_time - available_start_time) AS available_duration
FROM (
    SELECT equipment_id,  
    (CASE 
    END) AS available_start_time,
    (CASE       
    END) AS available_end_time
FROM t2 
WHERE equipment_id = 'EX123'
  ) AS C
) AS D
ON equipment_id=D.equipment_id 
```

我想要做的是`WHERE`用 a 替换子句`GROUP BY`以列出所有 id 或类似的，但是让它工作超出了我的技能水平......非常感谢任何帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T12:51:53.230

试试下面：

```
 SELECT 
    equipment_id, service_duration, available_duration,
    (available_duration / service_duration)*100 AS availability
    FROM 
    (
            SELECT equipment_id,
            SUM(service_end_time - service_start_time) AS service_duration
            FROM
            (   
                    SELECT equipment_id, 
                        (CASE ... END) AS service_start_time,
                        (CASE  ...  END) AS service_end_time
                    FROM t1         
            ) AS A
            GROUP BY equipment_id
    ) AS B
    JOIN
    (
            SELECT equipment_id, 
            SUM(available_end_time - available_start_time) AS available_duration
            FROM 
            (
                SELECT equipment_id,  
                (CASE ... END) AS available_start_time,
                (CASE ... END) AS available_end_time
                FROM t2         
            ) AS C
            GROUP BY equipment_id
    ) AS D
    ON equipment_id=D.equipment_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T13:19:08.313

试试这个（用你的字段名替换我的字段名）：

```
SELECT 
    a.emp_id, 
    service_duration,
    available_duration 

FROM 
    (
        SELECT 
            emp_id,
            SUM(service_end_time - service_start_time) AS service_duration

        FROM 
            data 

        GROUP BY 
            emp_id 
    ) a

    JOIN
    (
        SELECT 
            emp_id, 
            SUM(available_end_time - available_start_time) AS available_duration

        FROM 
            data 

        GROUP BY
            emp_id
    ) b 
    ON a.emp_id = b.emp_id 

GROUP BY
    a.emp_id 
```

# dynamics-crm-2011 - 获取 XML 以获取没有特定实体的任何关联记录的所有记录

> ID：15157879
> 
> 赞同：1
> 
> 时间：2013-03-01T12:33:09.840
> 
> 标签：dynamics-crm-2011

此 Advanced Find Fetch XML 检索具有关联服务活动的所有案例：

```
<fetch version="1.0" output-format="xml-platform" mapping="logical" distinct="true">
    <entity name="incident">
        <attribute name="title" />
        <attribute name="ticketnumber" />
        <attribute name="createdon" />
        <attribute name="incidentid" />
        <order attribute="title" descending="false" />
        <link-entity name="serviceappointment" from="wl_serviceactivitiesid" to="incidentid" alias="aa">
        </link-entity>
</entity> 
```

什么是 Fetch XML 或 View 逻辑来显示所有**没有**关联服务活动的案例。可以有一个*not*之前：

```
<link-entity> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:42:29.137

我认为这可能有效：

基本上，它对 serviceappointment 进行外部连接，然后排除任何具有主键的项目。

```
<fetch version="1.0" output-format="xml-platform" mapping="logical" distinct="true">
    <entity name="incident">
        <attribute name="title" />
        <attribute name="ticketnumber" />
        <attribute name="createdon" />
        <attribute name="incidentid" />
        <order attribute="title" descending="false" />
        <link-entity name="serviceappointment" from="wl_serviceactivitiesid" to="incidentid" alias="aa" link-type="outer">
            <filter type="and">
                <condition attribute="wl_serviceactivitiesid" operator="null" />
            </filter>
        </link-entity>
</entity> 
```

# scala - Scala：更新类字段值

> ID：15157883
> 
> 赞同：0
> 
> 时间：2013-03-01T12:33:27.660
> 
> 标签：scala, field, immutability

我有：

```
case class One(someParam: String) {
private val _defaultTimeout = readFromConfig("defaultTimeout")
val timeout: Timeout = akka.util.Timeout(_defaultTimeout seconds)
val info: Option[Info] = Await.result(someSmartService.getInformationForSomething(someParam)), timeout.duration)
} 
```

我正在构建一项服务，它将隐藏（加密）一些敏感数据。我正在这样做：

```
def encrypt(oldOne: One): One = {
  val encryptedSomeParam = EncryptService.getHash(oldOne.someParam)
  val encryptedInfo = encryptInfo(oldOne.info)
  // what to do with that? ^^
  one.copy(someParam = encryptedSomeParam)
} 
```

另外，我需要在第一类的“信息”字段中加密一些数据。问题是它是一个 val，我不能重新分配一个 val 的值。有没有简单的方法可以做到这一点？现在我正在考虑将其更改为 var，但我认为这不是最好的方法。另外，我不能像这样从一开始就将加密数据写入该值：

```
val info: Option[Info] = EncryptionService.encrypt(someSmartService.getInformationForSomething(someParam)) 
```

由于此字段用于我需要不加密字段的其他地方。我想在对象持久化到数据库之前加密敏感数据。

有任何想法吗？

提前致谢！

编辑：我知道，这看起来是一个糟糕的设计，所以如果有人对如何处理它有更好的想法，我期待着收到你的来信:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T12:44:28.623

为什么不做`info`一个案例类论点呢？

```
case class One(someParam: String, info: Option[Info]) 
```

`info`您可以通过定义伴随对象来实现默认值

```
object One {
  def apply(someParam: String): One = One(someParam, someSmartService.getInformationForSomething(someParam))
} 
```

这将允许您使用`One`s 如下：

```
One("foo")
One("foo", Some(...))
One(encryptedSomeParam, encryptedInfo)
One("plaintext").copy(someParam = encryptedSomeParam, info = encryptedInfo) 
```

**编辑1：懒惰的信息**

案例类不能有惰性 val 参数，即既不`info: => Option[String]`也`lazy val info: Option[String]`不允许作为参数类型。

不过，您可以创建`info`一个无参数函数

```
case class One(someParam: String, info: () => Option[String])

object One {
  def apply(someParam: String): One = One(someParam, () => Some(someParam))
} 
```

然后将其用作

```
One("hi", () => Some("foo"))
println(One("hi", () => None).info()) 
```

这显然是不理想的，因为在不破坏代码客户端代码的情况下不可能引入这些更改。欢迎更好的解决方案。

**编辑 2：懒惰的信息，没有案例类**

如果您不坚持`One`成为案例类（例如，因为您确实需要`copy`），则可以使用具有惰性值和伴随对象的常规类以方便使用：

```
class One(_someParam: String, _info: => Option[String]) {
  val someParam = _someParam
  lazy val info = _info
}

object One {
  def apply(someParam: String): One = new One(someParam, Await.result(...))
  def apply(someParam: String, info: => Option[String]): One = new One(someParam, info)
  def unapply(one: One) = Some((one.someParam, one.info))
} 
```

# android - 平板电脑和手机的支持资源

> ID：15157886
> 
> 赞同：6
> 
> 时间：2013-03-01T12:33:39.397
> 
> 标签：android, mobile, tablet, android-resources

我需要支持 bith mdpi、hdpi 和 xhdpi 手机以及 7' 和 10' 平板电脑的应用程序我不得不承认我有点迷路了。

到目前为止，我只做了平板电脑版本，我所做的是：

*   一个名为“布局”的文件夹
*   3 个不同的文件夹，名为“drawable-sw600dp”、“drawable-sw800dp”和“drawable-sw1200”，包含 600px 大、800px 大和 1200px 大的图像。

我的印象是我搞砸了，我应该创建标准的“drawable-mdpi”、“drawable-hdpi”和“drawable-xhdpi”文件夹。

但如果我这样做：

*   我必须将平板电脑的图像放在哪个文件夹中？只有xhdpi？
*   平板电脑的图像应该有多大（以 px 为单位）？
*   手机的图像应该有多大？
*   最后但并非最不重要的一点：如何命名“布局”文件夹才能为手机和平板电脑提供不同的版本？

我已经阅读了 1000 遍 Android 推荐，但我仍然感到困惑......

**编辑 1**

[Android网站上](http://developer.android.com/guide/practices/screens_support.html#ConfigurationExamples)的这一段回答了我的问题“如何必须命名“布局”文件夹才能为手机和平板电脑提供不同的版本？”

**编辑 2**

关于可绘制文件夹，对于手机，很明显我必须以这种方式创建 3 个文件夹：

*   drawable-mdpi 包含 320 像素宽度的图像
*   drawable-hdpi 包含 480 像素宽度的图像
*   drawable-xhdpi 包含 720px 宽度的图像

仍然是如何命名支持平板电脑的不同可绘制文件夹的问题。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-05T15:34:47.710

所以这将是我的答案。

布局 -> 2 个文件夹：

*   移动设备的“布局”（或“layout-sw320dp”）
*   平板电脑的“layout-sw600dp”

Drawables -> 5 个文件夹：

*   用于手机的“drawable-mdpi”，包含 320 像素宽度的图像
*   用于手机的“drawable-hdpi”，包含 480 像素宽度的图像
*   用于手机的“drawable-xhdpi”，包含 720 像素宽度的图像
*   "drawable-sw600dp" 用于 7 英寸平板电脑，包含 600 像素宽度的图像
*   "drawable-sw720dp" 用于 10 英寸平板电脑，包含 720 像素宽度的图像

欢迎任何比这更好的回应！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T12:43:33.327

因为很少使用 LDPI，所以你应该为手机制作 3 种不同尺寸的图像。

假设您有一个 50x50 DP 的图像。

MDPI = 50x50PX

HDPI = 75x75PX (x1.5)

XHDPI = 100x100PX (x2.0)

您可以创建更多文件夹，例如：`drawable-xlarge-xhdpi`并将`drawable-xlarge-hdpi`平板电脑所需的图像放入其中。我相信 xlarge 是 10 英寸的？所以你最终可能会得到大约 9 种不同的尺寸。3 用于移动，3 用于 7' 和 3 用于 10'。**平板电脑也有像素密度！**

在 Eclipse 中右键单击您的项目 -> 新建 -> 其他 -> Android XML 文件

然后你选择 Drawable 作为资源类型来制作例如可绘制的文件夹。

下面是它的外观截图。真的很有用！

另请参阅[按像素密度排列的显示器列表](http://en.wikipedia.org/wiki/List_of_displays_by_pixel_density)

![在此处输入图像描述](../Images/5d13edcd0973701188314f8161d720b1.png)

使用它，您可以创建如下所示的文件夹。large 是 7 英尺，xlarge 是 10 英尺（我认为）。

> /res/drawable-large-mdpi
> 
> **/res/drawable-large-hdpi**
> 
> /res/drawable-large-xhdpi
> 
> /res/drawable-xlarge-mdpi
> 
> /res/drawable-xlarge-hdpi
> 
> /res/drawable-xlarge-xhdpi

7 英寸 Android 平板电脑是 HDPI 和大尺寸。

[查看此处](http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources)的表格并阅读有关 large/xlarge/small 等的信息。

# dynamics-crm-2011 - 如何按查找实体的字段对视图中的项目进行排序？

> ID：15157894
> 
> 赞同：5
> 
> 时间：2013-03-01T12:33:55.930
> 
> 标签：dynamics-crm-2011, dynamics-crm, dynamics-crm-online

有什么方法可以对代表相关实体字段的列进行排序？

例如，案例包含一个查找字段 - 联系人。在视图中，我添加了联系人的全名和电子邮件。鉴于这两列的标题不可点击（未启用排序）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:43:48.117

不可以。不能对引用实体的字段进行排序。如果你真的需要这个，你必须构建一个自定义视图（html 页面）或者例如一个报告

# c# - 实体框架插入 FK 存在的地方

> ID：15157895
> 
> 赞同：2
> 
> 时间：2013-03-01T12:33:56.660
> 
> 标签：c#, entity-framework

我需要一些帮助，这应该是相当简单的过程。有人可以解释一下我需要做什么来做这个插入吗？

InspectionPremiseTypeID 对 InspectionPremiseType.ID 有一个 fk 但是，我总是在需要的地方传递一个 int 值。(int)inspectionPremiseType 是存在于 InspectionPremiseType 表中的 int 值。

```
 efInspection newInspection = new efInspection();

        newInspection.Created = DateTime.Now;
        newInspection.CreatedBy = "Web";
        newInspection.ReturnHeaderID = ReturnID;
        newInspection.InspectionPremiseTypeID = (int)inspectionPremiseType;
        newInspection.PrePlanned = intPrePlanned;
        newInspection.FollowingComplaint = intComplaint;
        newInspection.FollowUp = intFollowUp;

        try
        {
            entities.AddToefInspections(newInspection);
            entities.SaveChanges();
        } 
```

当它运行时我得到这个错误

**“dbEntities.efInspections”中的实体参与“FK_Inspection_InspectionPremiseType”关系。找到 0 个相关的“efInspectionPremiseType”。1 'efInspectionPremiseType' 是预期的。**

我也试过这个

```
newInspection.InspectionPremiseTypeID = 
            entities.efInspectionPremiseTypes.Where(t => t.ID == (int)inspectionPremiseType).FirstOrDefault().ID; 
```

但得到这个错误（这是可以理解的）

**无法创建“闭包类型”类型的常量值。此上下文仅支持原始类型（“例如 Int32、String 和 Guid”）。**

# inno-setup - TasksList - 如何将 TasksList 移动到其他 WizardForm 页面并保留其内容？

> ID：15157897
> 
> 赞同：1
> 
> 时间：2013-03-01T12:34:05.237
> 
> 标签：inno-setup, wizard, custom-pages

当我尝试更改`TasksList`'s`Parent`时，我得到一个空列表作为结果。

```
WizardForm.TasksList.Parent := WizardForm.DirEdit.Parent;
WizardForm.TasksList.Top := WizardForm.DirEdit.Top + WizardForm.DirEdit.Height + ScaleY(8);
WizardForm.TasksList.Left := WizardForm.DirEdit.Left;
WizardForm.TasksList.Height := ScaleY(100); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T13:01:33.093

另一种解决方案是为任务创建自己的复选框：

```
[Icons]
Name: "{group}\{#MyAppName1}"; Filename: "{app}\{#MyAppName1}\{#MyAppExeName}"; WorkingDir: "{app}\{#MyAppName1}"; Check: menuicons; Components: G3EE;
Name: "{group}\{#MyAppName2}"; Filename: "{app}\{#MyAppName2}\{#MyAppExeName2}"; WorkingDir: "{app}\{#MyAppName2}"; Check: menuicons; Components: G3ZBEE;
Name: "{commondesktop}\{#MyAppName2}"; Filename: "{app}\{#MyAppName2}\{#MyAppExeName2}"; WorkingDir: "{app}\{#MyAppName2}"; Check: desktopicon; Components: G3ZBEE;
Name: "{userappdata}\Microsoft\Internet Explorer\Quick Launch\{#MyAppName2}"; Filename: "{app}\{#MyAppName2}\{#MyAppExeName2}"; WorkingDir: "{app}\{#MyAppName2}"; Check: quicklaunchicon; Components: G3ZBEE;

[Code]
Var
DesktopIconCheckBox: TCheckBox;
StartMenuCheckBox: TCheckBox;
QuickStartCheckBox: TCheckBox;

function desktopicon(): Boolean;
begin
    Result := DesktopIconCheckBox.Checked;
end;

function menuicons(): Boolean;
begin
    Result := StartMenuCheckBox.Checked;
end;

function quicklaunchicon(): Boolean;
begin
  if GetWindowsVersion < $06000000 then  begin
      Result := QuickStartCheckBox.Checked;
  end;
end;

procedure InitializeWizard();
var
  ItemsGap: Integer;
 begin
    ItemsGap := WizardForm.DirBrowseButton.Left - (WizardForm.DirEdit.Left + WizardForm.DirEdit.Width);
    DesktopIconCheckBox := TCheckBox.Create(WizardForm.DirEdit.Owner);
    DesktopIconCheckBox.Visible := true;
    DesktopIconCheckBox.Checked := true;
    StartMenuCheckBox := TCheckBox.Create(WizardForm.DirEdit.Owner);
    StartMenuCheckBox.Visible := true;
    StartMenuCheckBox.Checked := true;
  if GetWindowsVersion < $06000000 then  begin
      QuickStartCheckBox := TCheckBox.Create(WizardForm.DirEdit.Owner);
    QuickStartCheckBox.Visible := true;
      QuickStartCheckBox.Checked := false;  
end;
    if true then
    begin
    DesktopIconCheckBox.Top := WizardForm.DirEdit.Top + WizardForm.DirEdit.Height + ItemsGap / 2;
    DesktopIconCheckBox.Width := WizardForm.DirEdit.Width;
        DesktopIconCheckBox.Caption := ExpandConstant('{cm:CreateDesktopIcon}');
        DesktopIconCheckBox.Parent := WizardForm.DirEdit.Parent;
        StartMenuCheckBox.Top := DesktopIconCheckBox.Top + DesktopIconCheckBox.Height + ItemsGap / 2;
    StartMenuCheckBox.Width := WizardForm.DirEdit.Width;
        StartMenuCheckBox.Caption := ExpandConstant('{cm:MenuStartIcons}');
        StartMenuCheckBox.Parent := WizardForm.DirEdit.Parent;
      if GetWindowsVersion < $06000000 then  begin
            QuickStartCheckBox.Top := StartMenuCheckBox.Top + StartMenuCheckBox.Height + ItemsGap / 2;
        QuickStartCheckBox.Width := WizardForm.DirEdit.Width;
            QuickStartCheckBox.Caption := ExpandConstant('{cm:CreateQuickLaunchIcon}');//SetupMessage(msgNoProgramGroupCheck2);
            QuickStartCheckBox.Parent := WizardForm.DirEdit.Parent;  
      end;
    end;
end; 
```

# objective-c - 如何从沙盒应用程序在 Console.app 中显示应用程序日志

> ID：15157898
> 
> 赞同：1
> 
> 时间：2013-03-01T12:34:07.260
> 
> 标签：objective-c, macos, cocoa, osx-mountain-lion, sandbox

在沙盒中，应用程序将日志文件写入其自己的容器中的位置，例如 (~/Library/Containers/com.apple.Notes/Data/Library/Logs/Notes)。

我需要控制台应用程序默认显示我的应用程序日志。

请让我知道如何实现

# c# - 从强类型数据集中获取一个元素

> ID：15157900
> 
> 赞同：1
> 
> 时间：2013-03-01T12:34:11.110
> 
> 标签：c#, ado.net, dataset, strongly-typed-dataset

我今天刚学会使用强类型数据集和存储过程，一切进展顺利，除了一个小问题。考虑到数据表有只有一列有一行。这是我到目前为止所拥有的：

```
var bookCountAdapter = new CountBooksTableAdapter();
var bookCountDataTable = new BooksAndCategoriesDataSet.CountBooksDataTable();
bookCountAdapter.Fill(bookCountDataTable);
int totalNumberOfBooks = 0;

foreach (BooksAndCategoriesDataSet.CountBooksRow row in bookCountDataTable) {
     totalNumberOfBooks = row.TotalNumberOfBooks;
}

return totalNumberOfBooks; 
```

数据集使用的存储过程是：

```
CREATE PROCEDURE [dbo].[CountBooks]
AS

SELECT COUNT(*) FROM Books 
```

现在我的当前代码工作得很好。问题是我没有看到迭代的原因，`bookCountDataTable`因为我只有一个 int 类型的元素，我只想检索它。

有没有办法通过编写类似这样的东西来获得该元素：

```
bookCountDataTable.TotalNumberOfBooks 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T12:36:54.023

> 因为我只有一个 int 类型的元素，我只想检索它。

使用索引访问它，然后像：

```
return bookCountDataTable[0].TotalNumberOfBooks 
```

但是您**应该在之前检查表的行数**。

从您的 foreach 循环看来，如果那里有多行，那么最后一个`TotalNumberofBooks`将被返回。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T12:37:37.160

我相信你可以做这样的事情：

```
if(bookCountDataTable.Rows.Count > 0)
{
     totalNumberOfBooks = Convert.ToInt32(bookCountDataTable.Rows[0]["TotalNumberOfBooks"]);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T12:38:37.030

如果你确定你会有一个元素，你可以做这样的事情

```
int totalNumberOfBooks = bookCountDataTable[0].TotalNumberOfBooks; 
```

在任何情况下，您都不应该使用数据集来检索单个值。有更好的方法可以做到这一点[`SqlCommand.ExecuteScalar`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)

即使在您键入的数据集上，您也可以使用设计视图上的向导来创建返回单个值的查询。

# debugging - 他们的半自动工具是否可以帮助生成最少的测试用例，类似于 git bisect？

> ID：15157903
> 
> 赞同：2
> 
> 时间：2013-03-01T12:34:15.990
> 
> 标签：debugging, testing, automation

一个例子：你有一个大型复杂网页，它以某种方式被破坏，比如说一个按钮在它应该是不可点击的时候是不可点击的，并且曾经是。您可以使用 git bisect 找出它*何时*崩溃，但我很好奇可以帮助您找出它*为什么*崩溃的工具。图像在大量提交后损坏，或者您可能只有一个没有版本历史记录的网页。

通常要调试这样的事情，您需要通过以下过程将大型复杂页面减少为最小的测试用例：

第 1 步：从代码中随机删除一些内容，导致：

a) 错误仍然存​​在，但代码现在比以前小 b) 错误不存在，代码现在比以前小 c) 错误不明确，即它对功能/错误很重要，并且不能删除所以放回去

第 2 步：冲洗并重复，直到代码更改变得越来越小，直到无法删除任何其他内容并且您拥有最小的测试用例。

无论是随机删除内容，都需要至少从表面上了解域，例如仅删除完整的 css 选择器，或仅删除匹配的 html 标签对，否则几乎所有修改都会模棱两可并回滚，因此不切实际。

那么在任何问题领域中是否存在这样的工具？我会想象这样的事情：

```
 > reduce file.html
 Removed 10 html elements, does it (w)ork, (n)ot work or (c)an't tell?: w
 Removed 4 html elements, does it (w)ork, (n)ot work or (c)an't tell?: c
 Removed 5 css rules, does it (w)ork, (n)ot work or (c)an't tell?: n
 Removed 3 html elements, does it (w)ork, (n)ot work or (c)an't tell?: w
 Removed 2 html attributes, does it (w)ork, (n)ot work or (c)an't tell?: c
 Removed 2 css declaration, does it (w)ork, (n)ot work or (c)an't tell?: a
 Removed 1 html element, does it (w)ork, (n)ot work or (c)an't tell?: n
 Removed 1 text node, does it (w)ork, (n)ot work or (c)an't tell?: n
 Can't reduce anymore, reduced case is found: file.html.reduced 
```

该过程可以调整每个步骤中的减少水平，因此如果它得到很多（c），它可以尝试每次进行较小的更改，如果它一直在工作或不工作，它可能会增加到更大更残酷的削减。

而不是作为提示，您可以通过某种自动方式来测试它处于 3 个条件中的哪一个。

那么这样的事情是否存在于任何问题领域？是否有任何通用框架来构建类似的东西，您可以将新类型的文件/域插入其中？

# internet-explorer - IPv6 地址在 internet explorer-10 websocket 中给出语法错误

> ID：15157910
> 
> 赞同：4
> 
> 时间：2013-03-01T12:34:52.657
> 
> 标签：internet-explorer, websocket, ipv6

我从服务器获取 ipv6 地址。然后我正在为 websocket 创建 url。我的网址看起来像

> ws://[xxxx:xxxx:xxxx:xxxx::xxxx:xxxx]:(十进制端口)

其中 x(0-f in hexadecimal) 此网址在 chrome 和 firefox 中运行良好。但是在 ie 10 中它给出了语法错误。任何人都可以告诉：-

1.  -Ipv6 支持 ie -10
2.  - 如果它支持支持 ipv6 需要做的额外工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-17T17:26:32.743

这个问题可以通过使用“UNC 路径名中的文字 IPv6 地址”来解决。 [http://en.wikipedia.org/wiki/IPv6_address](http://en.wikipedia.org/wiki/IPv6_address)

# c - C - 无法在 Ubuntu 上静态链接到 OpenSSL

> ID：15157920
> 
> 赞同：2
> 
> 时间：2013-03-01T12:35:11.573
> 
> 标签：c, ubuntu, openssl, arm, cross-compiling

按照[此处](https://stackoverflow.com/questions/3153114/how-do-i-install-and-build-against-openssl-1-0-0-on-ubuntu)给出的说明，我从[此处](http://www.openssl.org/source/openssl-1.0.1e.tar.gz)下载了最新版本的 OpenSSL (openssl-1.0.1e.tar.gz)并将其安装在 Ubuntu v12.10（32 位）上。

我在 Eclipse CDT (v1.2.0.201212170456) 中有一个 C 项目，它静态链接到以下两个 .a 文件：

*   主页/usr/local/ssl/lib/libcrypto.a
*   主页/usr/local/ssl/lib/libssl.a

但是，当我构建项目时，会出现以下错误：

```
/home/tashimaya/Applications/CodeSourcery/bin/../lib/gcc/arm-none-linux-gnueabi/4.4.1/../../../../arm-none-linux-gnueabi/bin/ld: skipping incompatible /usr/local/ssl/lib/libssl.a when searching for -lssl
/home/tashimaya/Applications/CodeSourcery/bin/../lib/gcc/arm-none-linux-gnueabi/4.4.1/../../../../arm-none-linux-gnueabi/bin/ld: cannot find –lssl 
```

我的工具链是 CodeSourcery (Sourcery G++ Lite 2010q1-202)，适用于 32 位操作系统。

我究竟做错了什么？

我正在使用的编译器命令行：

```
arm-none-linux-gnueabi-gcc -I"/path to my/include" -O0 -g3 -Wall -c -fmessage-length=0 -v -MMD -MP -MF"main.d" -MT"main.d" -o "main.o" "../main.c" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T14:41:00.187

您已经在 Ubuntu 32 位机器（假设 x86）上安装了 OpenSSL，但正在尝试将其链接到 ARM 二进制文件：

*   `/home/tashimaya/Applications/CodeSourcery/bin/../lib/gcc/arm-none-linux-gnueabi`: 你的 ARM 工具链
*   `/usr/local/ssl/lib/libssl.a`：一个 32 位 x86 版本的 OpenSSL

您必须使用 ARM 工具链（即：）为 ARM 交叉编译 OpenSSL `arm-none-linux-gnueabi-gcc`，然后才能将其链接到 ARM 二进制文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:57:01.733

它说 /usr/local/ssl/lib/libssl.a 不是预期的大小。尝试对其进行**文件**检查以检查您是否以 32 位或 64 位版本编译它。并检查您如何编译自己的程序。如果两者都匹配，则链接器 (ld) 会很好地链接它。

如果您将程序编译为 64 位并将其与 32 位的 libssl.a 链接，这将不起作用

例子：

文件 a.out

```
/* kind ofoutput */ a.out: Mach-O 64-bit executable x86_64 
```

[http://unixhelp.ed.ac.uk/CGI/man-cgi?file](http://unixhelp.ed.ac.uk/CGI/man-cgi?file)

# c# - 数据库锁Sqlite多线程

> ID：15157921
> 
> 赞同：3
> 
> 时间：2013-03-01T12:35:12.580
> 
> 标签：c#, database, visual-studio, sqlite

我正在使用 SQLite 数据库编写 C# 应用程序，我收到消息：`Database Locked(5)`有时在我的输出日志中。我不希望这种情况发生，我知道对我的数据库执行的多个操作给了我这个例外。

**问题：**

有没有办法查看 SQLiteDatabase 是否正忙于处理其他查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T12:43:33.013

如果您正在创建一个多线程应用程序，那么拥有您所要求的知识不会解决任何问题。它们可能会使它们出现的频率降低，但有时您会看到与以前相同的问题。

为什么？因为从你问“你被锁了吗？”的那一刻起 在您说“在那种情况下，让我锁定您做某事”的那一刻，另一个线程可能已经跳入并锁定了它。

除非您超时，否则我会处理异常并确定每种情况下要做什么。

此外，由于 SQLite 本质上是一个单用户（而不是个人用户，而是“使用数据库的东西”中的用户）数据库，您可能会认为这不会成为该工作的错误工具。

# c# - 这有效率吗？

> ID：15157929
> 
> 赞同：2
> 
> 时间：2013-03-01T12:36:00.257
> 
> 标签：c#, asp.net, string, performance

```
foreach (SessionTeacher sessionTeacher in sessionTeachers)
{
   Person person = EMS.PWDAL.DALHelper.GetPersonByID(sessionTeacher.PersonID);
   ltrlSpeakers.Text += person.Name1 + ", ";
} 
```

这里`ltrlSpeakers.Text`会有类似“abc，def”的东西，这是我必须删除的额外逗号和空格。

```
// removing extra comma and space

ltrlSpeakers.Text = ltrlSpeakers.Text.ToString().Remove(ltrlSpeakers.Text.ToString().Length - 2, 2); 
```

它工作正常，但有没有更好更有效的简单方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T12:38:10.273

像这样的东西：

```
var personNames = sessionTeachers.Select(
      st => EMS.PWDAL.DALHelper.GetPersonByID(st.PersonID).Name1);
ltrlSpeakers.Text = string.Join(", ", personNames); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T12:39:02.083

尝试使用 LINQ：

```
string result = string.Join(",",
(from t in sessionTeachers select EMS.PWDAL.DALHelper.GetPersonByID(t.PersonID).Name1)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T12:37:19.807

请改用内置的[String.Join](http://msdn.microsoft.com/en-us/library/57a79xd0.aspx)方法。

```
ltrlSpeakers.Text = string.Join(
    ", ", 
    sessionTeachers.Select(z => z.EMS.PWDAL.DALHelper.GetPersonByID(z.PersonID).Name1); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T12:40:51.540

试试这样：

```
 ltrlSpeakers.Text = 
        String.Join(", ",
            sessionTeachers
                .Select(teacher => EMS.PWDAL.DALHelper.GetPersonByID(teacher.PersonID).Name1)
                .ToArray()
        ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T13:02:25.200

最好的方法是 ltrlSpeakers.Text = String.Join(", ", sessionTeachers .Select(teacher => EMS.PWDAL.DALHelper.GetPersonByID(teacher.PersonID).Name1) .ToArray() ); ltrlSpeakers.Text = ltrlSpeakers.Text.trimend(',')

# c# - 用 RichTextBox 中的空格链接到文件的路径？

> ID：15157930
> 
> 赞同：3
> 
> 时间：2013-03-01T12:36:00.547
> 
> 标签：c#, winforms, hyperlink, path, richtextbox

我有 VS2010，C#。我在表单中使用 RichTextBox。我将 DectectUrls 属性设置为 True。我设置了一个 LinkClicked 事件。

我想打开这样的文件链接：**file://C:\Documents and Settings...** 或**file://C:\Program Files (x86)...**

它不适用于带有空格的路径。

源代码：

```
rtbLog.SelectionFont = fnormal;
rtbLog.AppendText("\t. Open Path" + "file://" + PathAbsScript + "\n\n");

// DetectUrls set to true
// launch any http:// or mailto: links clicked in the body of the rich text box
private void rtbLog_LinkClicked(object sender, LinkClickedEventArgs e)
{
   try
   {
      System.Diagnostics.Process.Start(e.LinkText);
   }
   catch (Exception) {}
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-08T07:13:29.277

您可以使用 UNICODE 不间断空格字符 (U+00A0)，而不是使用 %20（某些用户可能会觉得“难看”）。例如：

```
String fileName = "File name with spaces.txt";
FileInfo fi = new FileInfo(fileName);

// Replace any ' ' characters with unicode non-breaking space characters:
richTextBox.AppendText("file://" + fi.FullName.Replace(' ', (char)160)); 
```

然后在富文本框的链接单击处理程序中，您将执行以下操作：

```
private void richTextBox_LinkClicked(object sender, LinkClickedEventArgs e)
{
    // Replace any unicode non-break space characters with ' ' characters:
    string linkText = e.LinkText.Replace((char)160, ' ');

    // For some reason rich text boxes strip off the 
    // trailing ')' character for URL's which end in a 
    // ')' character, so if we had a '(' opening bracket
    // but no ')' closing bracket, we'll assume there was
    // meant to be one at the end and add it back on. This 
    // problem is commonly encountered with wikipedia links!

    if((linkText.IndexOf('(') > -1) && (linkText.IndexOf(')') == -1))
        linkText += ")";

    System.Diagnostics.Process.Start(linkText);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T12:42:53.477

您应该用双引号将路径括起来，例如：

```
"file://c:\path with spaces\..." 
```

要将双引号添加到字符串，您必须使用转义序列`\"`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T12:48:41.147

转到该特定文件夹并授予写入权限或从该文件夹的属性中共享它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T13:00:14.730

最后，我使用了一个替换（“”，“%20”）

```
// http://social.msdn.microsoft.com/Forums/eu/Vsexpressvb/thread/addc7b0e-e1fd-43f4-b19c-65a5d88f739c
var rutaScript = DatosDeEjecucion.PathAbsScript;
if (rutaScript.Contains(" ")) rutaScript = "file://" + Path.GetDirectoryName(DatosDeEjecucion.PathAbsScript).Replace(" ", "%20");
rtbLog.AppendText(". Abrir ubicación: " + rutaScript + "\n\n"); 
```

LinkClicked 事件的代码：

```
private void rtbLog_LinkClicked(object sender, LinkClickedEventArgs e)
{
            try
            {
                var link = e.LinkText.Replace("%20", " ");
                System.Diagnostics.Process.Start(link);
            }
            catch (Exception)
            {
            }
} 
```

# spring - 是否可以在 Spring 中自动装配 bean 名称？

> ID：15157931
> 
> 赞同：0
> 
> 时间：2013-03-01T12:36:04.697
> 
> 标签：spring, spring-ioc

是否可以使用注释而不是使用`BeanNameAware`接口在 Spring 中自动装配 bean 名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:31:22.297

不可能开箱即用，您可以创建自己的注解`@BeanNameInjected`并注册自己的[BeanPostProcessor](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/beans/factory/config/BeanPostProcessor.html)来处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T07:19:19.140

您可以使用 @Autowired 注释 bean setter 方法。

```
public class SimpleMovieLister {

private MovieFinder movieFinder;

@Autowired
public void setMovieFinder(MovieFinder movieFinder) {
    this.movieFinder = movieFinder;
 }

  // ...
} 
```

# magento-1.7 - 在我的帐户中编辑文件 Magento CE

> ID：15157935
> 
> 赞同：2
> 
> 时间：2013-03-01T12:36:12.033
> 
> 标签：magento-1.7

您好我正在使用 Magento CE 1.7.2 我正在尝试编辑客户“我的帐户”页面我找不到要编辑的文件以更改以下内容的布局和设计：我的帐户：帐户仪表板（让这个工作编辑customer/account/dashboard.phtml) 账户信息（试过的 customer/account/dashboard/info.phtml 没用） 地址簿（试过的 customer/account/dashboard/address.phtml 没用） 我的订单（不知道）时事通讯订阅（尝试过的客户/帐户/仪表板/newsletter.phtml 无效）

我要编辑哪些文件？请显示目录....谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:47:20.977

告诉你确切的路径就像“给你一条鱼”。相反，我会“教你如何钓鱼”。

在 Magento 中登录到您的管理面板。前往“系统”>“配置”。在左侧菜单的底部，您会找到“开发者”链接。前往此链接，然后在给定页面的左上角，在“当前配置范围”下的下拉框中选择一个网站。

打开“调试”部分并将“模板路径提示”设置为“是”。在前端重新加载您的客户页面。多田！您现在可以看到您必须编辑的每个文件在哪里以更改 Magento 中的任何内容。

# jquery - 带有 Jquery 的 MVC 中的图像库

> ID：15157938
> 
> 赞同：0
> 
> 时间：2013-03-01T12:36:15.877
> 
> 标签：jquery, asp.net-mvc, jquery-plugins

我是 MVC 的新手。我们需要在 MVC 中实现图片库显示。现在我还没有开始实施部分。

用户将上传图像，我们将显示为上传图像的画廊。要求是向用户显示图像列表。

初始阶段我们只是在讨论什么以及如何实现。因此，认为你们对此会有更好的想法并分享建议。

请分享链接和一些使用 Jquery 在 MVC 中实现的最佳和简单的方法

谢谢，秘鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:07:14.537

try this one nice image galary with jquery [http://blueimp.github.com/jQuery-Image-Gallery/](http://blueimp.github.com/jQuery-Image-Gallery/)

# php - 创建一个由 php 代码呈现的 html 组成的 json 变量？

> ID：15157940
> 
> 赞同：0
> 
> 时间：2013-03-01T12:36:21.223
> 
> 标签：php, jquery, html, ajax, json

我目前正在学习如何利用 ajax 将信息发布到外部页面和 jquery，然后根据对发布信息的处理来刷新页面上的特定元素。我正在使用 bootstrap-ajax 插件开始使用它，一切都按预期工作。但是，我认为必须有更好的方法或实践来创建服务器端 html，然后是我正在使用的方法。

这是 ajax 插件的工作原理：

1.  您从一个初始 php 页面开始，并定义将由 ajax 插件处理的表单以及一旦表单中的数据发布后您想要替换或刷新的 div。

2.  该插件使用 ajax 将数据提交到指定页面，然后该页面会响应一个包含 {'divToReplace'=>'renderedHTMLusedForReplacement'} 的 json 编码变量

我当前的工作流程包括为将要更新的 div 创建初始 php 代码，通常如下所示：

```
<div id="<?php echo $itemID; ?>" class="<?php echo $thisDivClass; ?>">
   <div class="span5">
       <h4><?php echo $innerTitle;?></h4>
           .......
           .......... 
```

然后，我必须复制和修改该 div 的代码并创建一个附加函数来处理 php，然后将 html 保存到如下变量中：

```
$divHtml='<div id="'.$itemID.'" class="'.$thisDivClass.'">
             <div class="span5">
                 <h4>'.$innerTitle.'</h4>'; 
```

不用说我不得不用大量的代码来做这件事，而且似乎必须有一种更好的方法来以某种方式呈现原始代码并将 html 保存到变量中，而无需复制和修改整个集合的代码。我对 ajax、jquery 和 json 相当陌生，而且我在 php 上的水平略高于新手，所以我很可能在这个过程中完全错误或遗漏了一些非常基本的东西。

任何帮助、建议或建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:51:25.857

[根据文档](https://github.com/eldarion/bootstrap-ajax)，看起来该插件确实允许您指定 HTML 片段而不是整个 div。如果您发布的片段确实代表了您正在做的事情，那么看起来 div 的*结构*没有改变，但*内容*却改变了。

因此，至少根据您发布的内容，您可能只需将一些键/值对交给插件，其中包含您想要更改的 div 部分的选择器以及您想要去那里的新内容。这至少应该使您不必重新创建整个 div。

我会说，根据我的经验，当您刚开始使用 AJAX 和 jQuery 并且对基础知识还不熟悉时，使用这些插件有时会*更*令人困惑并且可能会产生*更多的工作。*`$.ajax()`尝试使用普通的 jQuery请求来完成你想要的事情实际上可能会变得更容易、更省时（而且对你更有利） 。至少您会花时间学习适用于几乎所有项目的基础知识，而不是尝试学习如何使用某人的插件。但是，与往常一样，您的里程可能会有所不同。

# visual-studio - 单元测试中的混合模式 DLL - Visual Studio 质量工具

> ID：15157941
> 
> 赞同：0
> 
> 时间：2013-03-01T12:36:23.193
> 
> 标签：visual-studio, unit-testing

我正面临出现以下错误的情况：

解决方案是在 app.config 中设置：

```
 <startup useLegacyV2RuntimeActivationPolicy="true">
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
  </startup> 
```

我已将其放入 app.config 文件中，但目前我正在运行单元测试。我已将其添加到测试库配置文件中，但 Visual Studio 单元测试工具似乎忽略了此设置并仍然抛出错误。

为了让质量工具在运行测试时实际使用此设置，我需要如何或在哪里设置它？

# php - KO 3.2 - 需要关于 ajax 设计的建议

> ID：15157944
> 
> 赞同：0
> 
> 时间：2013-03-01T12:36:34.083
> 
> 标签：php, jquery, ajax, validation, kohana

我正在使用 ajax 通过 kohana 路由调用控制器。在此控制器内部，我验证表单的所有字段，并将有关未通过验证的字段的数据保存到属性中。

我想做的下一件事是对同一个控制器进行第二次 ajax 调用，检索这个属性，然后用它做一些动作。

但是，在第二次调用中，该属性显然是空的。

有没有办法解决这个问题？没有在第一个 ajax 调用中回显属性？

编辑。

```
$("#form").validate({
   rules {
      remote: "ajax_file.php"
   }
   messages {
      // I want to get information from ajax call above here
   }
}); 
```

jQuery：1.9.0

在第一个块（规则）中，我必须回显 TRUE 或 FALSE - 这就是为什么我不能回显有关失败字段的信息。

在 ajax_file.php 中，我正在收集有关失败字段的数据，我必须在下面进行第二次 ajax 调用（消息）并在第二个 .php 文件中处理这些数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T00:02:49.833

据我了解，您想验证一个字段，对吗？为什么不使用 kohana 类 'Validate' (Validate::factory($_POST)) 和您希望的任何规则来验证控制器中的字段......然后将结果返回到表单。

PS在您的情况下，您可以在第一次调用完成后执行第二次ajax调用，使用ajax成功选项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T03:36:59.673

避免提出两个请求...您可以在一个请求下进行...

在你的控制器中

```
public function action_ajaxmethod(){

  // do some validation code here
  // every error will be stored in
  // **err** variable

  if(!empty(err)) die(json_encode("success" => false, "errors" => err));
  else die(json_encode("success" => true));
} 
```

在你的 js 中

```
$.ajax({
  url: 'ajaxmethod',
  data: {data: data},
  type: 'POST',
  dataType: 'json',
  success: function(result){
    if(result['success']==true){
      // do some actions
    }
    else{
      // do some actions
    }
  }
}); 
```

希望这可以帮助...

# domain-driven-design - 用非递归股票系统建模

> ID：15157947
> 
> 赞同：1
> 
> 时间：2013-03-01T12:36:36.580
> 
> 标签：domain-driven-design

我正在尝试对一个业务领域进行建模，该领域产生实际上具有复杂递归股票系统的股票。

1.  库存可以在项目级别进行唯一标记，或者；
2.  库存可以在盒子级别进行唯一标记（包含许多无法识别的物品），或者；
3.  可以在托盘级别标记库存（包含许多无法识别的盒子），或者；
4.  库存可以被唯一地标记，然后包含在上面的级别中，即在一个独特的盒子中的独特项目。或直接放置在独特托盘上的独特物品。

这就是我的想法，但是我不确定“QuantityOfUnidetifyableInners”，但我不知道有什么更好的方法来建模一个可能唯一标识它的实体的系统，所以任何建议都将不胜感激，或者是否有人可以看到解决问题的替代方法。

```
/// <summary>
/// ValueObject
/// </summary>
public sealed class StockIdentity
{
    private readonly string _serial;

    public StockIdentity(string serial)
    {
        _serial = serial;
    }

    public string Serial { get { return _serial; } }

    //...equals contract
}

/// <summary>
/// Entity
/// </summary>
public sealed class StockItem
{
    public StockIdentity Id { get; set; }
    public int QuantityOfNonIdentifiableInners { get; set; }
    public StockItem[] Identifiable { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-11T07:06:11.893

这是一个想法：为什么需要这个数量？它在你的领域模型中甚至是必要的，还是只是属于你的读取模型的东西？

如果是，我会假设数量是您需要验证所有物品是否仍然存在的东西，所以我假设您会称它为

```
 ItemCount 
```

我认为领域专家不会说诸如“嘿，对于每个标签，我们都有一定数量的不可识别的内部”之类的话，而可能会说诸如“稍后，我们对项目进行计数以确保所有内容都存在”之类的话。

领域专家往往非常——甚至太多——意识到他们所说的话，当他们知道他们的话将被用作实现软件的基线时，他们往往会说得更正式。

你问一个附带问题的那一刻，他们通常不再关心他们的正式语言，然后他们开始说他们“真正的”领域语言；它以一种非常微妙的方式发生，有时很难注意到，但这通常是价值所在的部分。

YMMV。

# c++ - 通过 USB 从控制器获取结果失败

> ID：15157948
> 
> 赞同：-1
> 
> 时间：2013-03-01T12:36:36.937
> 
> 标签：c++, controller

我试图用 C++ 编写一个程序，让我的计算机与一个 trinamic steprockerboard 通信。他们已经提供了一个示例文件，让您上路。这很完美，但真的很简单。

现在我想从 USB 设备读取结果，他们为此做了一个函数：

```
 //Read the result that is returned by the module
    //Parameters: Handle: handle of the serial port, as returned by OpenRS232
    //Address: pointer to variable to hold the reply address returned by the module 
    // Status: pointer to variable to hold the status returned by the module (100 means okay)
    //Value: pointer to variable to hold the value returned by the module
prototype:
   UCHAR GetResult(HANDLE Handle, UCHAR *Address, UCHAR *Status, int *Value) 
```

现在我写了以下内容：

```
 UCHAR* adr;
            UCHAR* stat;
            int* val;

         SendCmd(RS232Handle, 1, TMCL_MVP, 0, 0, -3200); // move to next position 
         SendCmd(RS232Handle,1, TMCL_GAP, 8, 0, 0); // tell motor to look if position is reached
         GetResult(RS232Handle,adr,stat,val); //ask for the result, value must give a 1 if so 
         printf("results from USB device:   adr=%d, stat=%d, val=%d\n", adr, stat, val); 
```

但是当我运行程序并尝试此选项时，程序会崩溃。

有没有人知道可能导致问题的原因？（我提供的代码只是我的程序的一部分，整个代码可以在下面找到。我并不是要你阅读整个代码，问题应该在上面，但仅供有兴趣的人使用，其余的我也放了在这里）

```
// TMCLTest.cpp : Show how to communicate with a TMCM module in TMCL
//

#include "stdafx.h"
#include <iostream>

//Opcodes of all TMCL commands that can be used in direct mode
#define TMCL_ROR 1
#define TMCL_ROL 2
#define TMCL_MST 3
#define TMCL_MVP 4
#define TMCL_SAP 5
#define TMCL_GAP 6
#define TMCL_STAP 7 
```

`enter code here`#define TMCL_RSAP 8 `enter code here`#define TMCL_SGP 9 #define TMCL_GGP 10 #define TMCL_STGP 11 #define TMCL_RSGP 12 #define TMCL_RFS 13 #define TMCL_SIO 14 #define TMCL_GIO 15 #define TMCL_SCO 30 #define TMCL_GCO 31 #define TMCL_CCO

```
//Opcodes of TMCL control functions (to be used to run or abort a TMCL program in the module)
#define TMCL_APPL_STOP 128
#define TMCL_APPL_RUN 129
#define TMCL_APPL_RESET 131

//Options for MVP commandds
#define MVP_ABS 0
#define MVP_REL 1
#define MVP_COORD 2

//Options for RFS command
#define RFS_START 0
#define RFS_STOP 1
#define RFS_STATUS 2

#define FALSE 0
#define TRUE 1

//Result codes for GetResult
#define TMCL_RESULT_OK 0
#define TMCL_RESULT_NOT_READY 1
#define TMCL_RESULT_CHECKSUM_ERROR 2

//Open serial interface
//Usage: ComHandle=OpenRS232("COM1", CBR_9600)
HANDLE OpenRS232(const char* ComName, DWORD BaudRate)
{
HANDLE ComHandle;
DCB CommDCB;
COMMTIMEOUTS CommTimeouts;

ComHandle=CreateFile(ComName, GENERIC_READ|GENERIC_WRITE, 0, NULL, OPEN_EXISTING,                 FILE_ATTRIBUTE_NORMAL, NULL);
if(GetLastError()!=ERROR_SUCCESS) return INVALID_HANDLE_VALUE;
else
{
    GetCommState(ComHandle, &CommDCB);

    CommDCB.BaudRate=BaudRate;
    CommDCB.Parity=NOPARITY;
    CommDCB.StopBits=ONESTOPBIT;
    CommDCB.ByteSize=8;

    CommDCB.fBinary=1;  //Binary Mode only
    CommDCB.fParity=0;
    CommDCB.fOutxCtsFlow=0;
    CommDCB.fOutxDsrFlow=0;
    CommDCB.fDtrControl=0;
    CommDCB.fDsrSensitivity=0;
    CommDCB.fTXContinueOnXoff=0;
    CommDCB.fOutX=0;
    CommDCB.fInX=0;
    CommDCB.fErrorChar=0;
    CommDCB.fNull=0;
    CommDCB.fRtsControl=RTS_CONTROL_TOGGLE;
    CommDCB.fAbortOnError=0;

    SetCommState(ComHandle, &CommDCB);

    //Set buffer size
    SetupComm(ComHandle, 100, 100);

//Set up timeout values (very important, as otherwise the program will be very slow)
    GetCommTimeouts(ComHandle, &CommTimeouts);

    CommTimeouts.ReadIntervalTimeout=MAXDWORD;
    CommTimeouts.ReadTotalTimeoutMultiplier=0;
    CommTimeouts.ReadTotalTimeoutConstant=0;

    SetCommTimeouts(ComHandle, &CommTimeouts);

    return ComHandle;
  }
}

//Close the serial port
//Usage: CloseRS232(ComHandle);
void CloseRS232(HANDLE Handle)
{
CloseHandle(Handle);
}

//Send a binary TMCL command
//e.g.  SendCmd(ComHandle, 1, TMCL_MVP, MVP_ABS, 1, 50000);   will be MVP ABS, 1, 50000 for module with address 1
//Parameters: Handle: Handle of the serial port (returned by OpenRS232).
//            Address: address of the module (factory default is 1).
//            Command: the TMCL command (see the constants at the begiining of this file)
//            Type:    the "Type" parameter of the TMCL command (set to 0 if unused)
//            Motor:   the motor number (set to 0 if unused)
//            Value:   the "Value" parameter (depending on the command, set to 0 if unused)
void SendCmd(HANDLE Handle, UCHAR Address, UCHAR Command, UCHAR Type, UCHAR Motor, INT Value)
{
UCHAR TxBuffer[9];
DWORD BytesWritten;
int i;

TxBuffer[0]=Address;
TxBuffer[1]=Command;
TxBuffer[2]=Type;
TxBuffer[3]=Motor;
TxBuffer[4]=Value >> 24;
TxBuffer[5]=Value >> 16;
TxBuffer[6]=Value >> 8;
TxBuffer[7]=Value & 0xff;
TxBuffer[8]=0;
for(i=0; i<8; i++)
    TxBuffer[8]+=TxBuffer[i];

//Send the datagram
WriteFile(Handle, TxBuffer, 9, &BytesWritten, NULL);
}

//Read the result that is returned by the module
//Parameters: Handle: handle of the serial port, as returned by OpenRS232
//            Address: pointer to variable to hold the reply address returned by the module
//            Status: pointer to variable to hold the status returned by the module (100 means okay)
//            Value: pointer to variable to hold the value returned by the module
//Return value: TMCL_RESULT_OK: result has been read without errors
//              TMCL_RESULT_NOT_READY: not enough bytes read so far (try again)
//              TMCL_RESULT_CHECKSUM_ERROR: checksum of reply packet wrong
UCHAR GetResult(HANDLE Handle, UCHAR *Address, UCHAR *Status, int *Value)
{
UCHAR RxBuffer[9], Checksum;
DWORD Errors, BytesRead;
COMSTAT ComStat;
int i;

//Check if enough bytes can be read
ClearCommError(Handle, &Errors, &ComStat);
if(ComStat.cbInQue>8)
{
    //Receive
    ReadFile(Handle, RxBuffer, 9, &BytesRead, NULL);

    Checksum=0;
    for(i=0; i<8; i++)
        Checksum+=RxBuffer[i];

    if(Checksum!=RxBuffer[8]) return TMCL_RESULT_CHECKSUM_ERROR;

    *Address=RxBuffer[0];
    *Status=RxBuffer[2];
    *Value=(RxBuffer[4] << 24) | (RxBuffer[5] << 16) | (RxBuffer[6] << 8) | RxBuffer[7];
} else return TMCL_RESULT_NOT_READY;

return TMCL_RESULT_OK;
}

int main(int argc, char* argv[])
{
int i;
int Type, Motor, Velocity, Position,ref1;
UCHAR Address, Status;
int Value, Timeout;

HANDLE RS232Handle;

RS232Handle=OpenRS232("COM3", 9600);

// set parameters
SendCmd(RS232Handle, 1, TMCL_SAP, 140, 0, 5); //SAP 140, 0, 5              // set             microsteps to 32 (32 additional steps per step of 1.8 degr.)
//SAP 4, 0, 500              //set max vel.
//SAP 5, 0, 100              //set max acc.
//SAP 6, 0, 255              //set abs. max current to  2.8 ampere 
```

//SAP 7, 0, 50 //设置待机电流 ((50/250)*2.8A)

```
printf("VPI Test Setup\n \n" );
do
{
    printf("1 - Rotate clockwise (10 rotations)\n");
    printf("2 - Rotate counter-clockwise (10 rotations)\n");
    printf("3 - Stop motor\n");
    printf("4 - Start test (First 100 rotations clockwise, \n then 100 rotations counter clockwise)\n");

    printf("\n99 - End\n");

    scanf("%d", &i);
    switch(i)
    {
        case 1:
            SendCmd(RS232Handle, 1, TMCL_MVP, 0, 0, 32000); //ABS(4th parameter) = 0
            break;

        case 2:
            SendCmd(RS232Handle, 1, TMCL_MVP, 0, 0, -32000); //ABS(4th parameter) = 0
            break;

        case 3:
            SendCmd(RS232Handle, 1, TMCL_MST, 0, 0, 0);
            break;

        case 4:
//SendCmd(RS232Handle, 1, TMCL_RFS,0,0,0);
            printf("Test started \n" );

            //UCHAR done;
            UCHAR* adr;
            UCHAR* stat;
            int* val;

            //SendCmd(RS232Handle, 1, TMCL_SAP, 193, 1, 2); //SAP 193,1,2
           SendCmd(RS232Handle, 1, TMCL_MVP, 0, 0, -3200); //ABS(4th parameter) = 0
           SendCmd(RS232Handle,1, TMCL_GAP, 8, 0, 0);
           GetResult(RS232Handle,adr,stat,val);
           printf("results from USB device:   adr=%d, stat=%d, val=%d\n", adr, stat, val);
           //CHAR GetResult(HANDLE Handle, UCHAR *Address, UCHAR *Status, int *Value)

          // if(done != 2)
          // {
          //       printf("rotation backwards started \n");
           //      SendCmd(RS232Handle, 1, TMCL_MVP, 0, 0, 3200);
          // }

          // }

            break;
    }
SendCmd(RS232Handle, 1, TMCL_ROL, 0, Motor, Velocity);
SendCmd(RS232Handle, 1, TMCL_ROL, 0, Motor, Velocity);
    if(i==1 || i==2 || i==3 || i==4)
    {
        Address=0;
        Status=0;
        Value=0;
        Timeout=GetTickCount();
        while(GetResult(RS232Handle, &Address, &Status, &Value)             ==TMCL_RESULT_NOT_READY && abs(GetTickCount()-Timeout)<1000);
        printf("Result: Address=%d, Status=%d, Value=%d\n", Address, Status, Value);
    }
}
while(i!=99);

CloseRS232(RS232Handle);

return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:42:41.483

地址、状态和值应指向有效变量。因此，您的代码应类似于：

```
UCHAR adr;
UCHAR stat;
int val;

GetResult(RS232Handle,&adr,&stat,&val); 
```

现在发生的情况是您的变量（adr、stat 和 val）未初始化，因此它们指向内存中的随机位置。当您将这些变量传递给 GetResult 时，它会尝试写入这些随机位置。

# c - CUnit 测试生成错误

> ID：15157949
> 
> 赞同：2
> 
> 时间：2013-03-01T12:36:42.033
> 
> 标签：c, cunit

这是我第一次测试 C 程序。我有这个我想测试的头文件：

```
#ifndef CALCULATOR_HELPER_H
#define CALCULATOR_HELPER_H
#endif

    int add(int num1, int num2) {
        return num1 + num2;
    } 
```

我正在使用框架 CUnit 来测试它。我正在使用 Netbeans 作为 IDE。以下是代码。

```
#include <stdio.h>
#include <stdlib.h>
#include "CUnit/Basic.h"
#include "calculator_helper.h"

/*
 * CUnit Test Suite
 */

int init_suite(void) {
    return 0;
}

int clean_suite(void) {
    return 0;
}

/* IMPORTANT PART: */

void testAdd() {
    int num1 = 2;
    int num2 = 2;
    int result = add(num1, num2);
    if (result == 4) {
        CU_ASSERT(0);
    }
}

int main() {
    CU_pSuite pSuite = NULL;

    /* Initialize the CUnit test registry */
    if (CUE_SUCCESS != CU_initialize_registry())
        return CU_get_error();

    /* Add a suite to the registry */
    pSuite = CU_add_suite("newcunittest", init_suite, clean_suite);
    if (NULL == pSuite) {
        CU_cleanup_registry();
        return CU_get_error();
    }

    /* Add the tests to the suite */
    if ((NULL == CU_add_test(pSuite, "testAdd", testAdd))) {
        CU_cleanup_registry();
        return CU_get_error();
    }

    /* Run all tests using the CUnit Basic interface */
    CU_basic_set_mode(CU_BRM_VERBOSE);
    CU_basic_run_tests();
    CU_cleanup_registry();
    return CU_get_error();
} 
```

**问题**

当我构建测试时，我得到了 BUILD TESTS FAILED。更具体地说，我明白了：

```
在函数“添加”中：NetBeans/Calculator/calculator_helper.h:12：
'add' 的多重定义
构建/调试/GNU-Linux-x86/tests/tests/newcunittest.o:NetBeans/Calculator/./calculator_helper.h:12：
首先在这里定义 collect2: error: ld returned 1 exit status

```

谁能告诉我为什么我会收到这个错误。我尝试在谷歌上搜索，但没有找到运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T12:39:59.483

> 我有这个我想测试的头文件：

您正在头文件中*定义*一个函数：

```
int add(int num1, int num2) {
    return num1 + num2;
} 
```

*在标题中*声明它：**

 *```
#ifndef CALCULATOR_HELPER_H
#define CALCULATOR_HELPER_H

int add(int num1, int num2);

#endif      /* the endif goes at the end of the file */ 
```

...并在源文件中*定义它：*

```
#include "helper.h"

int add(int num1, int num2) {
    return num1 + num2;
} 
```

推荐阅读：

*   [理解 C 中的头文件和源文件](https://stackoverflow.com/questions/5904530/understanding-header-and-source-files-in-c)
*   维基百科：[#include 守卫的使用](http://en.wikipedia.org/wiki/Include_guard#Use_of_.23include_guards)
*   维基百科：[头文件](http://en.wikipedia.org/wiki/Header_file)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T12:37:58.040

这：

```
#ifndef CALCULATOR_HELPER_H
#define CALCULATOR_HELPER_H
#endif 
```

是一个“包含守卫”。但它做错了：你的代码应该在#endif 之前，而不是之后。

额外提示：不要在代码中使用“助手”这个词——总有一个更好的。就像在这种情况下，您可以调用它`CALCULATOR_MATH_H`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T16:26:20.723

链接器告诉您“添加”有两种定义。忽略其他回复提出的有效点一分钟，您的代码构建良好，因为它在 Ubuntu 12.04.2 上使用 gcc 在命令行上。我这样构建它并没有看到任何警告（已将 libcunit.a 安装到 /usr/local/lib）：

```
gcc -Wall -c testsuite.c
gcc testsuite.o -L/usr/local/lib -lcunit -static -o testsuite 
```

它运行了，正如你所期望的那样失败：

```
...
Suite: newcunittest
  Test: testAdd ...FAILED
    1\. testsuite.c:25  - 0
... 
```

在这种情况下，您的问题似乎是由 Netbeans 中的某些东西也定义了“添加”函数引起的，或者您的构建内容比您发布的更多，其他文件包括“calculator_helper.h”，这将导致您的函数被由于其损坏的包含保护，包含并定义了两次。

您可能还想更改测试的样式，以便它断言它期望为真。当 add() 做正确的事情时，您当前的测试未通过断言，这不是大多数人所期望的！试试这个：

```
void testAdd() {
    int num1 = 2;
    int num2 = 2;
    int result = add(num1, num2);
    CU_ASSERT(result == 4);
} 
```*

# html - 在 IE 中删除 HTML5 属性 type="number" 的最佳方法

> ID：15157957
> 
> 赞同：0
> 
> 时间：2013-03-01T12:36:53.923
> 
> 标签：html, internet-explorer, modernizr

删除 type="number" 的最佳方法是什么

```
<input id="s" data-bind="value: s" style="width: 30px" type="number"/> 
```

从 IE 浏览器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T14:19:46.190

无需这样做，它将在 IE 中向后兼容，因为回退到`type="text"`

# iphone - 如何在所有视图控制器中调用一种方法？

> ID：15157959
> 
> 赞同：0
> 
> 时间：2013-03-01T12:37:05.733
> 
> 标签：iphone, ios, objective-c, xcode, cocoa-touch

如何在所有视图控制器中调用一种方法？

viewcontroller1 中的一种方法，例如，

```
- (void)doSearch
{
   NSLog(@"Search..!");
} 
```

我想`doSearch`从 viewcontroller2、viewcontroller3、viewcontroller4、viewcontroller5 等调用方法。

这该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:39:00.043

您可以在单独的类中声明它并在所有视图控制器中实例化该类，或者您可以在您的视图控制器中定义此方法`AppDelegate`并调用所有视图控制器。您可以通过像这样获取它的实例来访问 ViewControllers 中的 AppDelegate

```
self.appDelegate=(AppDelegate*)[[UIApplication sharedApplication]delegate]; 
```

最后像这样调用方法

```
[self.appDelegate doSearch]; 
```

通常，最好将通过应用程序共享的所有方法或数据声明在单独的类中并使用此类。我通常`singelton`在我的应用程序中使用 Object 类，在其中定义所有共享数据，最后在所有类中访问

这是singelton类的例子

我的数据.h

```
@interface MyData : NSObject

+(MyData*)getInstance;
-(void)search;

@end 
```

我的数据

```
#import "MyData.h"

@implementation MyData

static MyData *instance =nil;

+(MyData *)getInstance
{

    @synchronized(self)
    {
    if(instance==nil)
        {

        instance= [[MyData alloc]init];
        }
    }
    return instance;
}

-(void)search {
    NSLog(@"search");
}

@end 
```

终于在你的`viewController`

```
 MyData *myData=[MyData getInstance];
  [myData search]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:44:03.350

将所有控制器放在一个`NSArray *`中，假设它被称为`controllerArray`。

然后你可以让所有控制器执行选择器：

```
[controllerArray makeObjectsPerformSelector:@selector(doSearch)]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T12:45:54.477

您可以在 中声明此方法`AppDelegate.h`。像

```
- (void)doSearch; 
```

`AppDelegate.m`并以类似的方式实现它

```
- (void)doSearch
{
    //Your Search Logic
} 
```

然后，创建`AppDelegate`实例

```
appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate]; 
```

使您的项目`.pch`文件如下所示：

```
#ifdef __OBJC__

    #import <Foundation/Foundation.h>
    #import <UIKit/UIKit.h>

    #import "AppDelegate.h"
    AppDelegate *appDelegate;

#endif 
```

现在，从 Any `ViewController`，您可以调用如下方法：

```
[appDelegate doSearch]; 
```

快乐编码。

**注意：**`AppDelegate`就我个人而言，我避免在Class中进行这种实现。我使用单例对象模式来实现这种目的。但是，Given 是最快的方法。

***_* __ *_* __ *_* __ *_* _EDIT_ *_* __ *_* __ *_* __ *_* _**

添加类型的新类文件`NSObject`：命名它`CommonMethod`（或任何你想要的）

在`CommonMethod.h`

```
@interface CommonMethods : NSObject
+ (CommonMethods *)sharedObject;
+ (void)doSearch; 
```

在`CommonMethod.m`

```
#import "CommonMethods.h"

@implementation CommonMethods

+ (CommonMethods *)sharedObject 
{
    static dispatch_once_t once;
    static CommonMethods *sharedObject;
    dispatch_once(&once, ^ { sharedObject = [[CommonMethods alloc] init]; });
    return sharedObject;
}

+ (BOOL)doSearch
{
    // Your Search Logic.
} 
```

现在，添加`#import "CommonMethods.h"`到您的项目`.pch`文件中。

你们都准备好了……！！！

方法调用（在您的任何 viewController 中）： `[CommonMethods doSearch];`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T12:47:45.563

将您的方法添加到`AppDelegate.m`文件中

```
- (void)doSearch
{
   NSLog(@"Search..!");
} 
```

并添加`#import "AppDelegate.h"`您`UIViewController`要调用的内容：

您可以通过以下方式调用方法，

```
AppDelegate *del = (AppDelegate *)[[UIApplication sharedApplication] delegate];
[del performSelector:@selector(doSearch) withObject:nil afterDelay:0]; 
```

从任何`UIViewController`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T12:48:01.030

您可能想阅读以下教程

[Objective C 中的全局函数和变量](http://sree.cc/iphone/global-functions-and-variables-in-objective-c)

或者您可以在 appDelegate 类中创建可以通过所有应用程序访问的方法。例如，在您的**AppDelegate.h**中，您已声明此方法如下：

```
-(void)myMethod; 
```

在您的**AppDelegate.m**中，您将其定义为：

```
-(void)myMethod
{
    NSLog(@"myMethod is getting called");
} 
```

从任何其他类（Master 或 Detail 等），您可以通过以下方式访问 myMethod：

```
#import "AppDelegate.h"

AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
[appDelegate myMethod]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-01T12:49:04.530

最好的方法是制作一个单独的头文件，使这个方法成为一个类方法，你可以通过导入类在项目的任何地方调用它。你可以将这个类包含到你的 pch 文件中，这样就可以避免从所有 VC 中导入

```
class.h

+ (void)doSearch
{
   NSLog(@"Search..!");
} 
```

在视图控制器中

```
#import "class.h"

-(void)someMethod
{
    [class doSearch];
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-01T12:50:14.057

制作`AbstractViewController`并在其中添加所有常见行为或方法的最佳方法。Any `ViewController`will 继承自 Abstract 并且可以调用任何常用 Method

# python - 如何将 Python 函数定义（仅此而已）与 RegEx 匹配？

> ID：15157962
> 
> 赞同：3
> 
> 时间：2013-03-01T12:37:15.513
> 
> 标签：python, regex

我正在尝试在 Python 中使用 RegEx 来解析函数定义，而不是其他任何东西。我一直遇到问题。RegEx 是在这里使用的正确工具吗？

IE

```
def foo():
  print bar
-- Matches --

a = 2
def foo():
  print bar
-- Doesn't match as there's code above the def --

def foo():
  print bar
a = 2
-- Doesn't match as there's code below the def -- 
```

我试图解析的字符串的一个例子是`"def isPalindrome(x):\n return x == x[::-1]"`. 但实际上可能包含高于或低于 def 本身的行。

我必须使用什么正则表达式来实现这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T12:40:45.577

不，正则表达式不是这项工作的正确工具。这类似于人们拼命地试图用正则表达式解析 HTML。这些语言不规则。因此，您无法解决您将遇到的所有怪癖。

使用内置[解析器模块](http://docs.python.org/2/library/parser.html)，构建解析树，检查定义节点并使用它们。[`ast`使用该模块](http://docs.python.org/2/library/ast.html)会更好，因为它使用起来更方便。一个例子：

```
import ast

mdef = 'def foo(x): return 2*x'
a = ast.parse(mdef)
definitions = [n for n in ast.walk(a) if type(n) == ast.FunctionDef] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T13:28:33.780

```
reg = re.compile('((^ *)def \w+\(.*?\): *\r?\n'
                 '(?: *\r?\n)*'
                 '\\2( +)[^ ].*\r?\n'
                 '(?: *\r?\n)*'
                 '(\\2\\3.*\r?\n(?: *\r?\n)*)*)',
                 re.MULTILINE) 
```

**编辑**

```
import re
script = '''
def foo():
  print bar

a = 2
def foot():
  print bar

b = 10
"""
opopo =457
def foor(x):

  print bar
  print x + 10
  def g(u):
    print

  def h(rt,o):
    assert(rt==12)
a = 2
class AZERT(object):
   pass
"""

b = 10
def tabulae(x):

\tprint bar
\tprint x + 10
\tdef g(u):
\t\tprint

\tdef h(rt,o):
\t\tassert(rt==12)
a = 2

class Z:
    def inzide(x):

      print baracuda
      print x + 10
      def gululu(u):
        print

      def hortense(rt,o):
        assert(rt==12)

def oneline(x): return 2*x

def scroutchibi(h%,n():245sqfg srot b#

''' 
```

.

```
reg = re.compile('((?:^[ \t]*)def \w+\(.*\): *(?=.*?[^ \t\n]).*\r?\n)'
                 '|'
                 '((^[ \t]*)def \w+\(.*\): *\r?\n'
                 '(?:[ \t]*\r?\n)*'
                 '\\3([ \t]+)[^ \t].*\r?\n'
                 '(?:[ \t]*\r?\n)*'
                 '(\\3\\4.*\r?\n(?: *\r?\n)*)*)',
                 re.MULTILINE)

regcom = re.compile('("""|\'\'\')(.+?)\\1',re.DOTALL)

avoided_spans = [ma.span(2) for ma in regcom.finditer(script)]

print 'eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee'
for ma in  reg.finditer(script):
    print ma.group(),
    print '--------------------'
    print repr(ma.group())
    print
    try:
        exec(ma.group().strip())
    except:
        print "   isn't a valid definition of a function"
    am,bm = ma.span()
    if any(a<=am<=bm<=b for a,b in avoided_spans):
        print '   is a commented definition function' 

    print 'eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee' 
```

结果

```
eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
def foo():
  print bar

--------------------
'def foo():\n  print bar\n\n'

eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
def foot():
  print bar

--------------------
'def foot():\n  print bar\n\n'

eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
def foor(x):

  print bar
  print x + 10
  def g(u):
    print

  def h(rt,o):
    assert(rt==12)
--------------------
'def foor(x):\n\n\n  print bar\n  print x + 10\n  def g(u):\n    print\n\n  def h(rt,o):\n    assert(rt==12)\n'

   is a commented definition function
eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
def tabulae(x):

    print bar
    print x + 10
    def g(u):
        print

    def h(rt,o):
        assert(rt==12)
--------------------
'def tabulae(x):\n\n\n\tprint bar\n\tprint x + 10\n\tdef g(u):\n\t\tprint\n\n\tdef h(rt,o):\n\t\tassert(rt==12)\n'

eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
    def inzide(x):

      print baracuda
      print x + 10
      def gululu(u):
        print

      def hortense(rt,o):
        assert(rt==12)

--------------------
'    def inzide(x):\n\n\n      print baracuda\n      print x + 10\n      def gululu(u):\n        print\n\n      def hortense(rt,o):\n        assert(rt==12)\n\n\n\n'

eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
def oneline(x): return 2*x
--------------------
'def oneline(x): return 2*x\n'

eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
def scroutchibi(h%,n():245sqfg srot b#
--------------------
'def scroutchibi(h%,n():245sqfg srot b#\n'

   isn't a valid definition of a function
eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee 
```

# jquery - 格式化数组中的文本？

> ID：15157966
> 
> 赞同：2
> 
> 时间：2013-03-01T12:37:19.510
> 
> 标签：jquery, arrays

我有一个带有自动完成功能的基本文本框，其中列出了彩虹的颜色，但我想更改它，以便当您选择一种颜色时，它会以该颜色出现（即，红色这个词是红色的）但我不能弄清楚怎么做。

继承人的代码：

```
<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>jQuery UI Autocomplete - Default functionality</title>
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
 <link rel="stylesheet" href="/resources/demos/style.css" />
  <script>
      $(function () {
          var colours = [
          "red",
          "orange",
          "yellow",
          "green",
          "blue",
          "indigo",
          "violet",
          ]

          $("#rainbow1").autocomplete({            
              source: colours
          });
      });

  </script>
</head>
<body>

<div class="ui-widget">
  <label for="rainbow1" style="color:red">Rainbow1: </label>
  <input type="text"  id="rainbow1" /> </br>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:51:16.363

看到这个：http: [//jsfiddle.net/gkxe4/1/](http://jsfiddle.net/gkxe4/1/)

```
 $(function () {
     var colours = [
         "red",
         "orange",
         "yellow",
         "green",
         "blue",
         "indigo",
         "violet", ];

     $("#rainbow1").autocomplete({
         source: colours,
         open: function (event, ui) {
             $(".ui-autocomplete li > a").each(function () {
                $(this).css('color', $(this).text());
             });
         },
         select: function (event, ui) {
             alert(ui.item.value);
             $("#rainbow1").css("color", ui.item.value);
         },
         search: function () {
             $(this).css('color', '');
         }
     });
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:44:28.047

```
you can do this on blur event....

$("#rainbow1").blur(function() {
 $(this).css('background',$(this).val());
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T12:44:42.250

基本示例：

```
$("#rainbow1").autocomplete({
    source: colours,
    select: function(event, ui) {
        $(this).css('color', ui.item.value);
    },
    search: function() {
        $(this).css('color', '')
    }
}); 
```

您需要使用自动完成的[选择](http://api.jqueryui.com/autocomplete/#event-select)和`search`选项。

[http://jsfiddle.net/dfsq/eSzyV/](http://jsfiddle.net/dfsq/eSzyV/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T12:51:43.703

您的自动完成声明应包含`select`属性。这样，您可以在用户选择项目时更改颜色。

```
$("#rainbow1").autocomplete({
    source: colours,
    select: function(event, ui) {
        $("#rainbow1").css("color", ui.item.label);
    }
}); 
```

[在此处](http://jsfiddle.net/qSFdd/)查看演示。

文档[在这里](http://docs.jquery.com/UI/API/1.8/Autocomplete)。

# ios - SLComposeViewController 问题，当应用权限被禁用时

> ID：15157982
> 
> 赞同：0
> 
> 时间：2013-03-01T12:37:58.417
> 
> 标签：ios, facebook, access-token, facebook-access-token, slcomposeviewcontroller

正在使用 SLComposeViewController 将文章发布到 facebook 墙上。当在设备设置中关闭 facebook 的应用权限时，SLComposeViewController 仍然可以通过将文章发布到 facebook 墙上来工作。这是 SDK 问题吗？

```
 SLComposeViewController *facebookViewController=[SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];

    if([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook])
    {
        SLComposeViewControllerCompletionHandler __block completionHandler=^(SLComposeViewControllerResult result)
        {

            [facebookViewController dismissViewControllerAnimated:YES completion:nil];

            switch(result){
                case SLComposeViewControllerResultCancelled:
                default:
                {
                    [[[UIAlertView alloc] initWithTitle:@"Facebook"
                                                message:@"Action Cancelled"
                                               delegate:nil
                                      cancelButtonTitle:@"OK"
                                      otherButtonTitles:nil]
                     show];

                    [self dismissView];

                }
                    break;
                case SLComposeViewControllerResultDone:
                {
                    [[[UIAlertView alloc] initWithTitle:@"Facebook"
                                                message:@"Posted to Facebook successfully"
                                               delegate:nil
                                      cancelButtonTitle:@"OK"
                                      otherButtonTitles:nil]
                     show];

                    [self dismissView];

                }
                    break;
            }};

        [facebookViewController addImage:_shareImage];
        [facebookViewController setInitialText:_shareTitle];
        [facebookViewController addURL:_shareLink];
        [facebookViewController setCompletionHandler:completionHandler];

        [self.dashboard presentViewController:facebookViewController animated:YES completion:nil];

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T11:05:13.837

我自己找到了答案。检查下面的代码

```
 if(SYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO(@"6.0"))
    {
        ACAccountStore *accountStore=[[ACAccountStore alloc]init];
        ACAccountType * facebookAccountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];

        // At first, we only ask for the basic read permission
        NSArray * permissions = @[@"publish_stream"];

        NSDictionary * dict = @{ACFacebookAppIdKey : @"facebook_appid", ACFacebookPermissionsKey : permissions, ACFacebookAudienceKey : ACFacebookAudienceEveryone};

        [accountStore requestAccessToAccountsWithType:facebookAccountType options:dict completion:^(BOOL granted, NSError *error) {
            if (granted && error == nil)
            {

        SLComposeViewController *facebookViewController=[SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];
            SLComposeViewControllerCompletionHandler __block completionHandler=^(SLComposeViewControllerResult result)
            {

                [facebookViewController dismissViewControllerAnimated:YES completion:nil];

                switch(result){
                    case SLComposeViewControllerResultCancelled:
                    default:
                    {
                        [self dismissView];

                    }
                        break;
                    case SLComposeViewControllerResultDone:
                    {
                        [[[UIAlertView alloc] initWithTitle:@"Facebook"
                                                    message:@"Posted to Facebook successfully"
                                                   delegate:nil
                                          cancelButtonTitle:@"OK"
                                          otherButtonTitles:nil]
                         show];

                        [self dismissView];

                    }
                        break;
                }};

            [facebookViewController addImage:_shareImage];
            [facebookViewController setInitialText:_shareTitle];
            [facebookViewController addURL:_shareLink];
            [facebookViewController setCompletionHandler:completionHandler];

            [self.dashboard presentViewController:facebookViewController animated:YES completion:nil];
            }
                else
                {
                    dispatch_async(dispatch_get_main_queue(), ^{
                        [self dismissView];
                        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"" message: @"App Permissions disabled in facebook settings."
                                                                       delegate:nil cancelButtonTitle:@"OK" otherButtonTitles: nil];
                        [alert show];

                    });
                 }
            }]; 
```

# java - 我想每帧调用一次 glBegin 和 glEnd

> ID：15157985
> 
> 赞同：0
> 
> 时间：2013-03-01T12:38:07.850
> 
> 标签：java, opengl, lwjgl

如标题所示，我希望每帧/更新只能调用一次 glBegin 和 glEnd ，因为我听说过并且正在经历，如果每次更新多次调用它，它会大大减慢。

这是我的渲染功能代码：

```
GL11.glTranslatef(0, 0, -10);
    int x = 0;

    while (x < World.BLOCKS_WIDTH - 1) {
        int y = 0;
        while (y < World.BLOCKS_HEIGHT - 1) {

            if( x * World.BLOCK_SIZE  <= Display.getHeight() ||  y * World.BLOCK_SIZE <= 
                Display.getWidth() ||  x * World.BLOCK_SIZE >= 0 || 
                y * World.BLOCK_SIZE >= 0 ) {

            blocks.b[data.blocks[x][y]].draw(x + Main.PosX, y + Main.PosY);

            }

            y++;
        }
        x++;

} 
```

任何帮助表示赞赏。

这是我的块类：

```
GL11.glPushMatrix();
    GL11.glTranslatef(Xa * World.BLOCK_SIZE, Ya * World.BLOCK_SIZE, 0);
    //GL11.glRotatef(0, 0, 1, 0);
    //GL11.glRotatef(0, 1, 0, 0);

    Texture.bind();

        GL11.glBegin(GL11.GL_QUADS);
        GL11.glColor3f(1f, 1f, 1f);
        //GL11.glNormal3f(0, 0, 1);
        GL11.glTexCoord2f(0, 0);
        GL11.glVertex2f(0, 0);
        GL11.glTexCoord2f(0, 1);
        GL11.glVertex2f(0, S);
        GL11.glTexCoord2f(1, 1);
        GL11.glVertex2f(S, S);
        GL11.glTexCoord2f(1, 0);
        GL11.glVertex2f(S, 0);
        GL11.glEnd();

        GL11.glPopMatrix();

} 
```

PS。我可以理解一点纯OpenGL。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T12:47:34.033

减速不是由于glBegin…glEnd，而是glNormal、glTexCoord、…glVertex调用的数量巨大。这称为即时模式，自 OpenGL-1.1 发布以来就已经过时，支持顶点数组。那是15年前的事了。

请使用顶点数组，最好与顶点缓冲区对象结合使用；这就是真正的性能改进的来源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T08:44:57.620

立即模式发送绘制调用已在每一帧渲染，您无需尝试这样做。我建议您了解顶点缓冲区对象，它们将相似的顶点组合在一起并每帧将它们发送到 GPU 一次，并且可以进行修改。它们使用浮动缓冲区进行存储，是渲染对象的新方法。对于 LWJGL 教程，在 youtube 上搜索 TheCodingUniverse 并查找他的 Advanced Rendering 视频，它将向您展示如何使用 VBO。

# php - 上传表单：可以上传纯文本 .txt 文档，但不能上传 .docx 或 PDF...？

> ID：15157986
> 
> 赞同：0
> 
> 时间：2013-03-01T12:38:08.740
> 
> 标签：php, forms, file-upload

感谢有这个机会提问。我已广泛搜索答案，但找不到。我希望你们能提供一些关于为什么会出现这个问题的见解。

难题：我设置了一个表单来上传文档，以便我网站的访问者可以提交文章以供审查。该表单曾经适用于所有指定的文件扩展名，docx、.txt、PDF 等。但是，如果有人尝试上传除 .txt 以外的任何其他格式（奇怪的是，这些格式正常）。我检查了主机提供商，错误日志中没有记录任何内容。

以下是相关代码：

```
function saveUploadedFile() {
$allowedExts = array("pdf", "txt", "doc", "docx", "dot");
$extension = end(explode(".", $_FILES["cFile"]["name"]));

if (   (($_FILES["file"]["type"] == "application/pdf")
        || ($_FILES["cFile"]["type"] == "application/plain")
        || ($_FILES["cFile"]["type"] == "text/plain")
        || ($_FILES["cFile"]["type"] == "application/msword"))
        && in_array($extension, $allowedExts)) {

    if ($_FILES["cFile"]["error"] > 0) {
        return '';
    } else {
        $fileName = $_FILES["cFile"]["name"];
        return $fileName;
    }
}

return '';
}

// Write for us form
    else if (isset($_FILES['cFile']['name'])) {
        if ((isset($_POST['cName']) && !empty($_POST['cName']))
                && (isset($_POST['cEmail']) && !empty($_POST['cEmail']) &&     isValidEmail($_POST['cEmail']))
                && (isset($_POST['cMessage']) && !empty($_POST['cMessage']))
                && !empty($_FILES['cFile']['name'])) {

            $cName = $_POST['cName'];
            $cEmail = $_POST['cEmail'];
            $cMessage = $_POST['cMessage'];
            $fileName = saveUploadedFile();

            if ($fileName != '') {
                $to = 'contact@REMOVED.com';
                $subject = 'Article';
                $msg = 'Author: ' . $cName . "\n" . 'Message: ' . $cMessage;

                $fileSize = $_FILES['cFile']['size'];
                $handle = fopen($_FILES['cFile']['tmp_name'], 'r');
                $content = fread($handle, $fileSize);
                fclose($handle);

                $content = chunk_split(base64_encode($content));
                $uid = md5(uniqid(time()));

                $headers = "From: " . $cName . " <" . $cEmail . ">
MIME-Version: 1.0
Content-Type: multipart/mixed; boundary=\"" . $uid . "\" 

This is a multi-part message in MIME format. 
--" . $uid . "
Content-Type: application/octet-stream; name=\"" . $fileName . "\"
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename=\"" . $fileName . "\"

" . $content . "

--" . $uid . "
Content-type:text/plain; charset=iso-8859-1 
" . $msg . "
--" . $uid . "--";

                if (!@mail($to, $subject, $msg, $headers)) {
                    echo '<p class="failed validation">The e-mail could not be sent.     Please try again later</p>';
                } else {
                    echo '<p class="success validation">Your message has been sent</p>';
                }
            } else {
                echo '<p class="failed validation">Your file could not be uploaded.  Please make sure that you attached one of the following types of files: a plain text file, a MS Word document, a PDF file or a zip file</p>';
            }
        } else {
             echo '<p class="failed validation">Your file could not be uploaded.  Please make sure you have completed all required fields and that you have provided a valid email address.</p>';
        }
    } 
```

这是出现的错误消息：“您的文件无法上传。请确保您附加了以下类型的文件之一：纯文本文件、MS Word 文档、PDF 文件或 zip 文件”

为什么此代码将接受 .txt 文件而不接受 .docx 或 PDF？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:38:07.183

我认为你应该编辑你的代码如下：

```
if (in_array($extension, $allowedExts)) {
    if ($_FILES["cFile"]["error"] > 0) {
        return '';
    } else {
        $fileName = $_FILES["cFile"]["name"];
        return $fileName;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:44:35.357

我在某处读到 ["type"] 效果不佳。我建议删除那部分代码。

# php - 用于更新表格的 HTML 下拉列表

> ID：15157989
> 
> 赞同：1
> 
> 时间：2013-03-01T12:38:26.907
> 
> 标签：php, html

我正在尝试做的事情可能是不可能的，但我得出的结论是我正在追赶我的尾巴。我创建了以下 php 来填充带有表演列表的下拉列表：

```
echo '<select id="tunelist" name="tunelist" >'; 
$link = mysql_connect('localhost', 'setlist', 'music');
$query = mysql_query("SHOW DATABASES");
while ($row = mysql_fetch_assoc($query)) {
   echo '<option value="'.$row['Database'].'">'.$row['Database'].'</option>';
}
echo '</Select>'; 
```

做出选择后，我想在下拉列表下方的表格中显示来自所选数据库的信息。有人对如何实现这一点有任何建议吗？

谢谢，

罗兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:46:49.810

你不能在 PHP 中做到这一点，你必须使用 JavaScript/jQuery 来做到这一点，并使用像 AJAX 这样的技术。

您应该使用 jQuery 创建另一个带有 id 的 div`selected-div`和类似的东西：

```
$("#tunelist").select(function(e) {
    // fill the div here
    $("#selected-div").text("You selected: "+$(this).val())
}); 
```

你可以在这里查看 jQuery：[http ://www.jquery.com/](http://www.jquery.com/)

# xslt - 在 XPath 和 XSLT 中使用前置轴时出现问题

> ID：15157990
> 
> 赞同：1
> 
> 时间：2013-03-01T12:38:26.763
> 
> 标签：xslt, xpath

我正在学习 XSLT 2.0 和 XPath。在创建示例时，我遇到了 XPath 中可用的前一个轴并创建了以下示例。

请找到以下用作输入的 order.xml 文件。

```
 <?xml version="1.0" encoding="utf-8" standalone="yes"?>
    <Order id="12345">
    <Item>
        <ItemId>007</ItemId>
        <ItemName>iPhone 5</ItemName>
        <Price>500</Price>
        <Quantity>1</Quantity>
    </Item>
    <Item>
        <ItemId>456</ItemId>
        <ItemName>Ipad</ItemName>
        <Price>600</Price>
        <Quantity>2</Quantity>
    </Item>
    <Item>
        <ItemId>7864567</ItemId>
        <ItemName>Personal Development Book</ItemName>  
        <Price>10</Price>
        <Quantity>10</Quantity>
    </Item>
    <Item>
        <ItemId>123</ItemId>
        <ItemName>Java Book</ItemName>
        <Price>20</Price>
        <Quantity>12</Quantity>
    </Item>
</Order> 
```

请找到以下用于转换上述 XML 的 XSLT testaxis.xsl 文件。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:template match="/">
     <xsl:value-of select="count(/Order/Item[ItemName='Ipad']/ItemName/preceding::*)" />
</xsl:template> 
```

转换后的输出为 **6**

如果我没记错的话，这里的上下文节点低于一个。

```
<ItemName>Ipad</ItemName> 
```

如果我们计算上下文节点之前的所有节点，则计数为**5**。现在提出问题，为什么在输出中将节点数显示为**6**？

如果我误解了什么，请告诉我

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:53:38.097

您对哪个节点是上下文节点是正确的，并且该节点*确实*有 6 个前面的元素：

*   第一个`<Item>`元素。
*   里面的四个要素。
*   `<ItemId>`上下文节点之前的元素。

那是六个。您可以通过执行以下操作来验证这一点：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text" />
 <xsl:template match="/">
   <xsl:for-each select="/Order/Item[ItemName='Ipad']/ItemName/preceding::*">
     <xsl:value-of select="concat(name(), '&#xA;')" />
  </xsl:for-each>
 </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T13:58:47.210

前面的元素是下面用“*”标记的元素

```
<*Item>
    <*ItemId>007</ItemId>
    <*ItemName>iPhone 5</ItemName>
    <*Price>500</Price>
    <*Quantity>1</Quantity>
</Item>
<Item>
    <*ItemId>456</ItemId> 
```

你会看到有六个。

# javascript - Ajax 不调用控制器方法

> ID：15157994
> 
> 赞同：0
> 
> 时间：2013-03-01T12:39:01.413
> 
> 标签：javascript, jquery, ajax, spring, spring-mvc

我是阿贾克斯的新手。我正在尝试调用我的控制器方法，但从 Ajax 调用而不是调用我给出的 url.. 这里我的控制器方法和我的 jsp 文件中的 ajax 调用..

```
@RequestMapping(value = "/getdata", method = RequestMethod.POST)
public @ResponseBody String add(@RequestParam(value="userDetailObject", required=true) User_Details u,Model model) {
    System.out.println("In the controller method..");
    String result=null;
                result="From controller :"+u.getEmail();
                System.out.println("at controller .."+result);
    return result;
} 
```

我的 Ajax 是

```
//script type="text/javascript" src="../jquery-1.4.4.js"

var jq = jQuery.noConflict();

        function getData() {
            alert("hello");
            // get the form values
        var email = $('#email').val();
        //  var education = $('#education').val();
            $.ajax({
                type : 'POST',
                dataType: 'json',
                url : "/SpringDemoSts/getdata",
                data : 'email=' + email,
                success : function(response) {
                    // we have the response
                    //$('#info').html(response);
                    $('#email').val(response);
                    //$('#education').val('');
                },
                error : function(e) {
                    alert('Error: ' + e);
                }
            });
        }
/script 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:47:22.870

ajax 中定义的 url：

```
/SpringDemoSts/getdata 
```

与显示的请求映射中的不同

```
/getdata 
```

并且参数称为 userDetailObject 并且您的 ajax 调用错误地定义了数据，您使用请求参数样式作为数据。实际上，您需要 json/a 普通原语或字符串。

# ruby - 从同一数组的另一个元素中减去一个数组的元素

> ID：15157996
> 
> 赞同：1
> 
> 时间：2013-03-01T12:39:03.147
> 
> 标签：ruby, arrays, subtraction

`time`我有一个包含浮点值的数组（ ）。我想减去这个数组的元素并将结果存储在另一个数组中并进一步打印它。我尝试了以下方法：

```
time=Array.new

time=open("/home/sakshi/Desktop/test/PACKET-WISE_DETAILS/pkt_time.tsv", &:read)

time.each do |i|
  puts time[i+1]-time[i]
end 
```

但我收到此错误：

```
'in `+': can't convert Fixnum into String (TypeError) ' error. 
```

我也尝试用`while`循环重写上面的代码，但这也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:42:20.853

这是因为您正在向对象（即 id）添加整数值，试试这个

```
time = Array.new

time = open("/home/sakshi/Desktop/test/PACKET-WISE_DETAILS/pkt_time.tsv", &:read)

time.each_with_index do |i,index|

 puts time[index+1]-time[index] if index < time.size #to avoid overflow when reaches the end

end 
```

# python - 安装 askbot 后 Django 应用程序未运行

> ID：15157997
> 
> 赞同：1
> 
> 时间：2013-03-01T12:39:09.043
> 
> 标签：python, django, askbot

在安装 askbot 之前，该应用程序运行良好。我检查了他们的文档并将 askbot 安装为可插入的应用程序。而且我还合并了设置和网址。现在论坛部分（askbot 应用程序）工作正常，但包括索引在内的其他部分已经崩溃。

错误如下：

```
 AttributeError at /
    'Template' object has no attribute 'nodelist'
    Request Method: GET
    Request URL:    http://localhost:8000/
    Django Version: 1.3.7
    Exception Type: AttributeError
    Exception Value:    
    'Template' object has no attribute 'nodelist'
    Exception Location: /home/djangouser/Documents/djprojs/qnet/dj1.3/local/lib/python2.7/site-packages/django/template/loader_tags.py in render, line 116
    Python Executable:  /home/djangouser/Documents/djprojs/qnet/dj1.3/bin/python
    Python Version: 2.7.3
    Python Path:    
    ['/home/djangouser/Documents/Workspace/Qnet/Qnet',
     '/home/djangouser/Documents/djprojs/qnet/dj1.3/local/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg',
     '/home/djangouser/Documents/Workspace/Qnet',
     '/home/djangouser/Documents/Workspace/Qnet/Qnet/peer',
     '/home/djangouser/Documents/Workspace/Qnet/Qnet',
     '/home/djangouser/Documents/djprojs/qnet/dj1.3/lib/python2.7/site-packages/stdimage',
     '/home/djangouser/Documents/djprojs/qnet/dj1.3/local/lib/python2.7/site-packages/pip-1.2.1-py2.7.egg',
     '/usr/share/eclipse/plugins/org.python.pydev_2.7.0.2012080220/pysrc/pydev_sitecustomize',
     '/home/djangouser/Documents/djprojs/qnet/dj1.3/lib/python2.7',
     '/home/djangouser/Documents/djprojs/qnet/dj1.3/lib/python2.7/plat-linux2',
     '/home/djangouser/Documents/djprojs/qnet/dj1.3/lib/python2.7/lib-tk',
     '/home/djangouser/Documents/djprojs/qnet/dj1.3/lib/python2.7/lib-old',
     '/home/djangouser/Documents/djprojs/qnet/dj1.3/lib/python2.7/lib-dynload',
     '/usr/lib/python2.7',
     '/usr/lib/python2.7/plat-linux2',
     '/usr/lib/python2.7/lib-tk',
     '/home/djangouser/Documents/djprojs/qnet/dj1.3/local/lib/python2.7/site-packages',
     '/home/djangouser/Documents/Workspace/sampleproj/sampleproj',
     '/home/djangouser/Documents/djprojs/qnet/dj1.3/local/lib/python2.7/site-packages/PIL',
     '/home/djangouser/Documents/djprojs/qnet/dj1.3/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg',
     '/home/djangouser/Documents/djprojs/qnet/dj1.3/lib/python2.7/plat-linux2',
     '/home/djangouser/Documents/djprojs/qnet/dj1.3/lib/python2.7/lib-tk',
     '/home/djangouser/Documents/djprojs/qnet/dj1.3/lib/python2.7/lib-old',
     '/home/djangouser/Documents/djprojs/qnet/dj1.3/local/lib/python2.7/site-packages/askbot/deps']
    Server time:    Fri, 1 Mar 2013 05:44:14 -0600 
```

回溯如下

```
 Environment:

    Request Method: GET
    Request URL: http://localhost:8000/

    Django Version: 1.3.7
    Python Version: 2.7.3
    Installed Applications:
    ['longerusername',
    'django.contrib.auth',
    'django.contrib.admin',
    'pagination',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.staticfiles',
    'django.contrib.messages',
    'django.contrib.humanize',
    'django.contrib.sitemaps',
    'askbot',
    'south',
    'askbot.deps.livesettings',
    'keyedcache',
    'robots',
    'django_countries',
    'djcelery',
    'djkombu',
    'followit',
    'tinymce',
    'group_messaging',
    'postman',
    'peer']
    Installed Middleware:
    ('django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'pagination.middleware.PaginationMiddleware',
    'askbot.middleware.anon_user.ConnectToSessionMessagesMiddleware',
    'askbot.middleware.forum_mode.ForumModeMiddleware',
    'askbot.middleware.cancel.CancelActionMiddleware',
    'django.middleware.transaction.TransactionMiddleware',
    'askbot.middleware.view_log.ViewLogMiddleware',
    'askbot.middleware.spaceless.SpacelessMiddleware')

    Traceback:
    File "/home/djangouser/Documents/djprojs/qnet/dj1.3/local/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
    111\.                         response = callback(request, *callback_args, **callback_kwargs)
    File "/home/djangouser/Documents/Workspace/Qnet/Qnet/peer/views.py" in index
    71\.     return render_to_response('index.html', context_instance=RequestContext(request))
    File "/home/djangouser/Documents/djprojs/qnet/dj1.3/local/lib/python2.7/site-packages/django/shortcuts/__init__.py" in render_to_response
    20\.     return HttpResponse(loader.render_to_string(*args, **kwargs), **httpresponse_kwargs)
    File "/home/djangouser/Documents/djprojs/qnet/dj1.3/local/lib/python2.7/site-packages/django/template/loader.py" in render_to_string
    188\.         return t.render(context_instance)
    File "/home/djangouser/Documents/djprojs/qnet/dj1.3/local/lib/python2.7/site-packages/django/template/base.py" in render
    123\.             return self._render(context)
    File "/home/djangouser/Documents/djprojs/qnet/dj1.3/local/lib/python2.7/site-packages/django/template/base.py" in _render
    117\.         return self.nodelist.render(context)
    File "/home/djangouser/Documents/djprojs/qnet/dj1.3/local/lib/python2.7/site-packages/django/template/base.py" in render
    744\.                 bits.append(self.render_node(node, context))
    File "/home/djangouser/Documents/djprojs/qnet/dj1.3/local/lib/python2.7/site-packages/django/template/base.py" in render_node
    757\.         return node.render(context)
    File "/home/djangouser/Documents/djprojs/qnet/dj1.3/local/lib/python2.7/site-packages/django/template/loader_tags.py" in render
    116\.         for node in compiled_parent.nodelist:

    Exception Type: AttributeError at /
    Exception Value: 'Template' object has no attribute 'nodelist' 
```

settings.py 的内容是#QNET 项目的Django 设置。

```
 ###FOR ASKBOT
    import os.path
    import logging
    import sys
    import askbot
    import site

    #this line is added so that we can import pre-packaged askbot dependencies
    ASKBOT_ROOT = os.path.abspath(os.path.dirname(askbot.__file__))
    site.addsitedir(os.path.join(ASKBOT_ROOT, 'deps'))
    INTERNAL_IPS = ('127.0.0.1',)
    ###END ASKBOT

    DEBUG = True
    TEMPLATE_DEBUG = False;#keep false when debugging jinja2 templates

    ADMINS = (
        # ('', ''),
        )

    MANAGERS = ADMINS

    DATABASES = {
    'default': {
            'ENGINE': 'django.db.backends.postgresql_psycopg2', # Add 'postgresql_psycopg2', 'postgresql', 'mysql', 'sqlite3' or 'oracle'.
            'NAME': 'qnetfinal',                      # Or path to database file if using sqlite3.
            'USER': 'django',                      # Not used with sqlite3.
            'PASSWORD': 'djangodb',                  # Not used with sqlite3.
            'HOST': '127.0.0.1',                      # Set to empty string for localhost. Not used with sqlite3.
            'PORT': '5432',                      # Set to empty string for default. Not used with sqlite3.
            }
            }

    ###FOR ASKBOT
    #outgoing mail server settings
    SERVER_EMAIL = ''
    DEFAULT_FROM_EMAIL = ''
    EMAIL_HOST_USER = ''
    EMAIL_HOST_PASSWORD = ''
    EMAIL_SUBJECT_PREFIX = ''
    EMAIL_HOST=''
    EMAIL_PORT=''
    EMAIL_USE_TLS=False
    EMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend'

    #incoming mail settings
    #after filling out these settings - please
    #go to the site's live settings and enable the feature
    #"Email settings" -> "allow asking by email"
    #
    #   WARNING: command post_emailed_questions DELETES all 
    #            emails from the mailbox each time
    #            do not use your personal mail box here!!!
    #
    IMAP_HOST = ''
    IMAP_HOST_USER = ''
    IMAP_HOST_PASSWORD = ''
    IMAP_PORT = ''
    IMAP_USE_TLS = False
    ###END ASKBOT

    # Hosts/domain names that are valid for this site; required if DEBUG is False
    # See https://docs.djangoproject.com/en/1.3/ref/settings/#allowed-hosts
    ALLOWED_HOSTS = []

    # Local time zone for this installation. Choices can be found here:
    # http://en.wikipedia.org/wiki/List_of_tz_zones_by_name
    # although not all choices may be available on all operating systems.
    # On Unix systems, a value of None will cause Django to use the same
    # timezone as the operating system.
    # If running in a Windows environment this must be set to the same as your
    # system time zone.
    TIME_ZONE = 'America/Chicago'

    # Language code for this installation. All choices can be found here:
    # http://www.i18nguy.com/unicode/language-identifiers.html
    LANGUAGE_CODE = 'en-us'

    SITE_ID = 1

    # If you set this to False, Django will make some optimizations so as not
    # to load the internationalization machinery.
    USE_I18N = True

    # If you set this to False, Django will not format dates, numbers and
    # calendars according to the current locale
    USE_L10N = True

    # Absolute filesystem path to the directory that will hold user-uploaded files.
    # Example: "/home/media/media.lawrence.com/media/"
    MEDIA_ROOT = '/home/djangouser/Desktop/QNET/media'

    # URL that handles the media served from MEDIA_ROOT. Make sure to use a
    # trailing slash.
    # Examples: "http://media.lawrence.com/media/", "http://example.com/media/"
    MEDIA_URL = '/media/'

    # Absolute path to the directory static files should be collected to.
    # Don't put anything in this directory yourself; store your static files
    # in apps' "static/" subdirectories and in STATICFILES_DIRS.
    # Example: "/home/media/media.lawrence.com/static/"
    STATIC_ROOT = '/home/djangouser/Desktop/QNET/static/'

    # URL prefix for static files.
    # Example: "http://media.lawrence.com/static/"
    STATIC_URL = '/static/'

    ###FOR ASKBOT
    PROJECT_ROOT = os.path.dirname(__file__)
    ###END ASKBOT

    # URL prefix for admin static files -- CSS, JavaScript and images.
    # Make sure to use a trailing slash.
    # Examples: "http://foo.com/static/admin/", "/static/admin/".
    ADMIN_MEDIA_PREFIX = '/static/admin/'

    # Additional locations of static files
    STATICFILES_DIRS = (
        '/home/djangouser/Desktop/QNET/static/site/',
    ###FOR ASKBOT
    ('default/media', os.path.join(ASKBOT_ROOT, 'media')),
    os.path.join(PROJECT_ROOT, "static"),
    ###END ASKBOT
        # Put strings here, like "/home/html/static" or "C:/www/django/static".
        # Always use forward slashes, even on Windows.
        # Don't forget to use absolute paths, not relative paths.
        )

    # List of finder classes that know how to find static files in
    # various locations.
    STATICFILES_FINDERS = (
        'django.contrib.staticfiles.finders.FileSystemFinder',
        'django.contrib.staticfiles.finders.AppDirectoriesFinder',
    #    'django.contrib.staticfiles.finders.DefaultStorageFinder',
    )

    # Make this unique, and don't share it with anybody.
    SECRET_KEY = '+zme3dsnpuq^j$(mjlm3p$2&^p0np$(z8$_kr)n841z@32ny6+'

    # List of callables that know how to import templates from various sources.
    TEMPLATE_LOADERS = (
    ###FOR ASKBOT
    'askbot.skins.loaders.Loader',
    ###END ASKBOT
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
    #     'django.template.loaders.eggs.Loader',
    )

    MIDDLEWARE_CLASSES = (
        'django.contrib.sessions.middleware.SessionMiddleware',
        'django.middleware.common.CommonMiddleware',
        'django.contrib.auth.middleware.AuthenticationMiddleware',
        'django.middleware.csrf.CsrfViewMiddleware',
        'django.contrib.messages.middleware.MessageMiddleware',
        'pagination.middleware.PaginationMiddleware',
    ###FOR ASKBOT
        #below is askbot stuff for this tuple
        'askbot.middleware.anon_user.ConnectToSessionMessagesMiddleware',
        'askbot.middleware.forum_mode.ForumModeMiddleware',
        'askbot.middleware.cancel.CancelActionMiddleware',
        'django.middleware.transaction.TransactionMiddleware',
        #'debug_toolbar.middleware.DebugToolbarMiddleware',
        'askbot.middleware.view_log.ViewLogMiddleware',
        'askbot.middleware.spaceless.SpacelessMiddleware',
    ###END ASKBOT

    )

    ROOT_URLCONF = 'QNET.urls'

    ###FOR ASKBOT
    #UPLOAD SETTINGS
    FILE_UPLOAD_TEMP_DIR = os.path.join(
        os.path.dirname(__file__), 
        'tmp'
        ).replace('\\','/')

    FILE_UPLOAD_HANDLERS = (
        'django.core.files.uploadhandler.MemoryFileUploadHandler',
        'django.core.files.uploadhandler.TemporaryFileUploadHandler',
        )
    ASKBOT_ALLOWED_UPLOAD_FILE_TYPES = ('.jpg', '.jpeg', '.gif', '.bmp', '.png', '.tiff')
    ASKBOT_MAX_UPLOAD_FILE_SIZE = 1024 * 1024 #result in bytes
    DEFAULT_FILE_STORAGE = 'django.core.files.storage.FileSystemStorage'

    #ASKBOT_EXTRA_SKINS_DIR = #path to your private skin collection
    #take a look here http://askbot.org/en/question/207/

    TEMPLATE_CONTEXT_PROCESSORS= (
    #    'django.contrib.auth.context_processors.auth',
    'django.core.context_processors.debug',
    #    'django.core.context_processors.i18n',
    'django.core.context_processors.media',
    'django.core.context_processors.request',
    'postman.context_processors.inbox',
    'askbot.context.application_settings',
        #'django.core.context_processors.i18n',
        'askbot.user_messages.context_processors.user_messages',#must be before auth
        'django.core.context_processors.auth', #this is required for the admin app
        'django.core.context_processors.csrf', #necessary for csrf protection

        )

    TEMPLATE_DIRS = (
        '/home/djangouser/Desktop/QNET/templates'
        # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
        # Always use forward slashes, even on Windows.
        # Don't forget to use absolute paths, not relative paths.
        )

    # to provide our get_profile()
    AUTH_PROFILE_MODULE='Humans.Human'

    ###Login decorator
    LOGIN_URL='/login/'

    #LOGIN_REDIRECT_URL='/profile/'

    ### Postman moderation
    POSTMAN_AUTO_MODERATE_AS = True

    INSTALLED_APPS = (
    ###FOR ASKBOT
    'longerusername',
    ###END ASKBOT
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
        # Uncomment the next line to enable the admin:
        'django.contrib.admin',
        'pagination',
    ###FOR ASKBOT
        #all of these are needed for the askbot
        # Uncomment the next line to enable the admin:
        'django.contrib.humanize',
        'django.contrib.sitemaps',
        #'debug_toolbar',
        #Optional, to enable haystack search
        #'haystack',
        'askbot',
    #    'askbot.deps.django_authopenid',
        #'askbot.importers.stackexchange', #se loader
        'south',
        'askbot.deps.livesettings',
        'keyedcache',
        'robots',
        'django_countries',
        'djcelery',
        'djkombu',
        'followit',
        'tinymce',
        'group_messaging',
        #'avatar',#experimental use git clone git://github.com/ericflo/django-avatar.git$
    ###END ASKBOT
    #    'south',
    'postman',
    'Humans',
    'mptt',
    'easy_thumbnails',
    'filer',
    #    'ajax_select',
        # Uncomment the next line to enable admin documentation:
        # 'django.contrib.admindocs',
        )

    ####FOR ASKBOT
    #setup memcached for production use!
    #see http://docs.djangoproject.com/en/1.1/topics/cache/ for details
    CACHE_BACKEND = 'locmem://'
    #needed for django-keyedcache
    CACHE_TIMEOUT = 6000
    #sets a special timeout for livesettings if you want to make them different
    LIVESETTINGS_CACHE_TIMEOUT = CACHE_TIMEOUT
    CACHE_PREFIX = 'askbot' #make this unique
    CACHE_MIDDLEWARE_ANONYMOUS_ONLY = True
    #If you use memcache you may want to uncomment the following line to enable memcached based sessions
    #SESSION_ENGINE = 'django.contrib.sessions.backends.cached_db'

    AUTHENTICATION_BACKENDS = (
        'django.contrib.auth.backends.ModelBackend',
    #    'askbot.deps.django_authopenid.backends.AuthBackend',
    )

    ##logging settings
    #LOG_FILENAME = 'askbot.log'
    #logging.basicConfig(
    #    filename=os.path.join(os.path.dirname(__file__), 'log', LOG_FILENAME),
    #    level=logging.CRITICAL,
    #    format='%(pathname)s TIME: %(asctime)s MSG: %(filename)s:%(funcName)s:%(lineno)d %(message)s',
    #)
    #
    ############################
    ##
    ##   this will allow running your forum with url like http://site.com/forum
    ##
    ##   ASKBOT_URL = 'forums/'
    ##
    ASKBOT_URL = 'forums/' #no leading slash, default = '' empty string
    ASKBOT_TRANSLATE_URL = True #translate specific URLs
    _ = lambda v:v #fake translation function for the login url
    #LOGIN_URL = '/%s%s%s' % (ASKBOT_URL,_('account/'),_('signin/'))
    LOGIN_REDIRECT_URL = ASKBOT_URL #adjust, if needed
    #note - it is important that upload dir url is NOT translated!!!
    #also, this url must not have the leading slash
    ALLOW_UNICODE_SLUGS = False
    ASKBOT_USE_STACKEXCHANGE_URLS = False #mimic url scheme of stackexchange

    #Celery Settings
    BROKER_TRANSPORT = "djkombu.transport.DatabaseTransport"
    CELERY_ALWAYS_EAGER = True

    import djcelery
    djcelery.setup_loader()
    DOMAIN_NAME = ''

    CSRF_COOKIE_NAME = '_csrf'
    #https://docs.djangoproject.com/en/1.3/ref/contrib/csrf/
    #CSRF_COOKIE_DOMAIN = DOMAIN_NAME

    #STATIC_ROOT = os.path.join(PROJECT_ROOT, "static")
    #STATICFILES_DIRS = (
    #    ('default/media', os.path.join(ASKBOT_ROOT, 'media')),
    #)

    RECAPTCHA_USE_SSL = True

    #HAYSTACK_SETTINGS
    ENABLE_HAYSTACK_SEARCH = False
    HAYSTACK_SITECONF = 'askbot.search.haystack'
    #more information
    #http://django-haystack.readthedocs.org/en/v1.2.7/settings.html
    HAYSTACK_SEARCH_ENGINE = 'simple'

    TINYMCE_COMPRESSOR = True
    TINYMCE_SPELLCHECKER = False
    TINYMCE_JS_ROOT = os.path.join(STATIC_ROOT, 'default/media/js/tinymce/')
    TINYMCE_URL = STATIC_URL + 'default/media/js/tinymce/'
    TINYMCE_DEFAULT_CONFIG = {
    'plugins': 'askbot_imageuploader,askbot_attachment',
    'convert_urls': False,
    'theme': 'advanced',
    'content_css': STATIC_URL + 'default/media/style/tinymce/content.css',
    'force_br_newlines': True,
    'force_p_newlines': False,
    'forced_root_block': '',
    'mode' : 'textareas',
    'oninit': "function(){ tinyMCE.activeEditor.setContent(askbot['data']['editorContent'] || ''); }",
    'plugins': 'askbot_imageuploader,askbot_attachment',
    'theme_advanced_toolbar_location' : 'top',
    'theme_advanced_toolbar_align': 'left',
    'theme_advanced_buttons1': 'bold,italic,underline,|,bullist,numlist,|,undo,redo,|,link,unlink,askbot_imageuploader,askbot_attachment',
    'theme_advanced_buttons2': '',
    'theme_advanced_buttons3' : '',
    'theme_advanced_path': False,
    'theme_advanced_resizing': True,
    'theme_advanced_resize_horizontal': False,
    'theme_advanced_statusbar_location': 'bottom',
    'width': '723',
    'height': '250'
    }

    #delayed notifications, time in seconds, 15 mins by default
    NOTIFICATION_DELAY_TIME = 60 * 15 

    GROUP_MESSAGING = {
    'BASE_URL_GETTER_FUNCTION': 'askbot.models.user_get_profile_url',
    'BASE_URL_PARAMS': {'section': 'messages', 'sort': 'inbox'}
    }

    ###END ASKBOT

    # A sample logging configuration. The only tangible logging
    # performed by this configuration is to send an email to
    # the site admins on every HTTP 500 error.
    # See http://docs.djangoproject.com/en/dev/topics/logging for
    # more details on how to customize your logging configuration.
    LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'handlers': {
    'mail_admins': {
    'level': 'ERROR',
    'class': 'django.utils.log.AdminEmailHandler'
    }
    },
    'loggers': {
    'django.request': {
    'handlers': ['mail_admins'],
    'level': 'ERROR',
    'propagate': True,
    },
    }
    } 
```

urls.py 的内容是

```
 from django.conf.urls.defaults import patterns, include, url
    from django.conf import settings
    from django.conf.urls.defaults import handler404
    from django.conf.urls.defaults import handler500
    from django.conf.urls.defaults import include
    from django.conf.urls.defaults import patterns
    from django.conf.urls.defaults import url
    from django.conf import settings
    from django.contrib import admin

    import admin_auth

    admin.autodiscover()

    if getattr(settings, 'ASKBOT_MULTILINGUAL', False) == True:
        from django.conf.urls.i18n import i18n_patterns
        urlpatterns = i18n_patterns('',
            (r'%s' % settings.ASKBOT_URL, include('askbot.urls'))
            )
    else:
        urlpatterns = patterns('',
            (r'%s' % settings.ASKBOT_URL, include('askbot.urls'))
            )

        urlpatterns += patterns('',
            (r'^admin/', include(admin.site.urls)),
        #(r'^cache/', include('keyedcache.urls')), - broken views disable for now
        (r'^settings/', include('askbot.deps.livesettings.urls')),
        (r'^followit/', include('followit.urls')),
        (r'^tinymce/', include('tinymce.urls')),
        (r'^robots.txt$', include('robots.urls')),
        url( # TODO: replace with django.conf.urls.static ?
            r'^%s(?P<path>.*)$' % settings.MEDIA_URL[1:], 
            'django.views.static.serve',
            {'document_root': settings.MEDIA_ROOT.replace('\\','/')},
            ),
        url(r'^register/', 'Humans.views.HumansRegistration'),
        url(r'^$', 'Humans.views.index'),
        url(r'^messages/', include('postman.urls')),
        url(r'^logout/', 'Humans.views.LogoutRequest'),
        url(r'^login/', 'Humans.views.LoginRequest'),
        )

        if 'rosetta' in settings.INSTALLED_APPS:
            urlpatterns += patterns('',
                url(r'^rosetta/', include('rosetta.urls')),
        ) 
```

请帮我解决一下这个。我尝试了很多谷歌搜索，但没有用。而且我也无法在 askbot 论坛上发布这个，因为我的业力很低。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T15:02:14.187

Askbot 使用 Jinja2 模板，您的 'index.html' 模板（我猜它是 Django 模板）可能扩展了 askbot 的“基础”模板 - Jinja2 模板。

似乎该错误不是模板解析错误，而是API错误。当顶级模板和基础模板都找到并正确解析时，可能会发生这种情况，但由于模板引擎的内部 api 不兼容，它们无法放在一起。

也许解决方案是创建基本模板的 Django 版本并将其放在不同的目录中。

当部分项目使用 Django 模板时，Askbot 确实可以工作 - 例如 - 我们的 /settings/ url 映射到`livesettings`应用程序，该应用程序使用 Django 模板并且两者都可以正常工作，但它们使用不同的基本模板。

对于快速测试 - 创建一个简单的基本模板并将其用于`index.html`.