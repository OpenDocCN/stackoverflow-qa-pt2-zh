# StackOverflow 问答 16178000-16178999

# c#-4.0 - 没有从团队基础 Orchard 获得所有更改（内容项、导航）

> ID：16178003
> 
> 赞同：0
> 
> 时间：2013-04-23T19:53:47.020
> 
> 标签：c#-4.0, tfs, orchardcms

通过团队基础服务器在我的笔记本电脑上检索项目时，我似乎无法从仪表板创建任何与管理员相关的内容。

例如，导航或内容类型/项目未显示。例如，我的自定义主题和所有其他模块都已正确集成。

所有这些内容项位于何处，为什么没有正确提交到团队基础服务器？

谢谢。

# php - How do I show content only if logged in

> ID：16178004
> 
> 赞同：-2
> 
> 时间：2013-04-23T19:53:55.487
> 
> 标签：php, session, login

Our website uses online software from a company called the [DecoNetwork](http://www.deconetwork.com). It allows our customers to log in and keep track of their orders yadda yadda. I was able to use their code for a login form and use it on our custom website.

```
 <form action="http://cheapcustomtees.deco-apparel.com/user/login?mobi=0" method="post">             
    <input type="hidden" name="_pc_session_id" value="7eb5d16ed18b074967ee0cf333d24417"/>
    <input type="hidden" name="_pc_skey" value="wynkunatrixikuquunetycyxomynkozatrivozichardaru"/>
        Login: &nbsp;<input type="textbox" name="user[login]"/> &nbsp; &nbsp; 
        Password: &nbsp;<input type="password" name="user[password]"/>
        Remember me: &nbsp;<input type="checkbox" name="remember_me" value="1" checked="true" class="auto" />       
        <input type="submit" value="Login" class="bigbutton" style="font-size:10pt; font-family:Museo700; cursor:pointer;" />
    </form> 
```

If possible, I would like to display content based on if the user is logged in or out. If logged out, show the login form. Otherwise, show something else.

Is something like this possible with someone else's sessions? If so, can you give me an example as I am still new with PHP?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:17:23.373

除非已设置，否则永远不可能使用会话或 3rd 方网站的 cookie。

理论上有几个漏洞可以让你这样做，例如..

*   跨站点脚本（“XSS”）

不管它是完全非法的事实，你仍然需要用 cURL 做很多花哨的功夫来检查你通过 XSS 窃取的 cookie 是否是有效的、活跃的。您还必须幸运的是，用户使用的浏览器不会阻止反射型 XSS；假设你没有一个持久的。

此外，即使您设法获得了 cookie，您仍然必须幸运的是，第三方的会话管理不是基于 IP 地址的。

除了漏洞或已设置为进行奇怪类型授权的网站之外，这是不可能的，也不应该是可能的（这将构成严重的安全威胁）。

如果您不想存储用户的任何敏感信息，例如密码，那么最接近您想到的是 OpenID。

# android - 如果在 2 个微调器中选择了两个项目，则必须以可绘制的形式显示图像

> ID：16178006
> 
> 赞同：0
> 
> 时间：2013-04-23T19:54:00.457
> 
> 标签：android, spinner

这里添加了 2 个微调器。如果我选择特定的 item1 和 item2，则必须显示特定的图像。例如，如果选择了“Gujarat”和“Gandhinagr”，则必须显示图像 abc.png。请帮帮我。

```
 public class MainActivity extends Activity implements OnItemSelectedListener {

private String[] INDIAN_STATE = { "Gujarat", "Andra Pradesh",
        "Arunachal Pradesh", "Assam", "Bihar", "Chhattisgarh", "Goa",
        "Haryana", "Himachal Pradesh", "Jammu and Kashmir", "Jharkhand",
        "Karnataka", "Kerala", "Madya Pradesh", "Maharashtra", "Manipur",
        "Meghalaya", "Mizoram", "Nagaland", "Orissa", "Punjab",
        "Rajasthan", "Sikkim", "Tamil Nadu", "Tripura", "Uttaranchal",
        "Uttar Pradesh", "West Bengal" };

private String[] INDIAN_STATE_CAPITAL = { "Gandhinagar", "Hyderabad",
        "Itangar", "Dispur", "Patna", "Raipur", "Panaji", "Chandigarh",
        "Shimla", "Srinagar and Jammu", "Ranchi", "Bangalore",
        "Thiruvananthapuram", "Bhopal", "Mumbai", "Imphal", "Shillong",
        "Aizawi", "Kohima", "Bhubaneshwar", "Chandigarh", "Jaipur",
        "Gangtok", "Chennai", "Agartala", "Dehradun", "Lucknow", "Kolkata"       };

Spinner spinnerState, spinnerCapital;
TextView tvState, tvCapital;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    System.out.println(INDIAN_STATE.length);
    System.out.println(INDIAN_STATE_CAPITAL.length);

    tvState = (TextView) findViewById(R.id.mystate);
    tvCapital = (TextView) findViewById(R.id.mystatescapital);

    spinnerState = (Spinner) findViewById(R.id.spinnerstate);
    spinnerCapital = (Spinner) findViewById(R.id.spinnercapital);

    ArrayAdapter<String> adapter_state = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, INDIAN_STATE);
    adapter_state
            .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinnerState.setAdapter(adapter_state);

    ArrayAdapter<String> adapter_state_capital = new ArrayAdapter<String>(
            this, android.R.layout.simple_spinner_item,
            INDIAN_STATE_CAPITAL);
    adapter_state_capital
            .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinnerCapital.setAdapter(adapter_state_capital);

    spinnerState.setOnItemSelectedListener(this);
    spinnerCapital.setOnItemSelectedListener(this);
}

public void onItemSelected(AdapterView<?> parent, View view, int position,
        long id) {

    spinnerState.setSelection(position);
    spinnerCapital.setSelection(position);

    String myState = (String) spinnerState.getSelectedItem();
    String myStatesCapital = (String) spinnerCapital.getSelectedItem();

    tvState.setText("My State is " + myState);
    tvCapital.setText("My State is " + myState + ".And its Capital is "
            + myStatesCapital);

}

public void onNothingSelected(AdapterView<?> parent) {

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:26:41.367

看看文档：http: [//developer.android.com/guide/topics/ui/controls/spinner.html](http://developer.android.com/guide/topics/ui/controls/spinner.html)

我将假设每个州可以有多个首都 - 否则，您根本不需要首都旋转器。

首先，根据上述微调器文档，摆脱

```
spinnerState.setSelection(position);
spinnerCapital.setSelection(position);

String myState = (String) spinnerState.getSelectedItem();
String myStatesCapital = (String) spinnerCapital.getSelectedItem(); 
```

并使用

```
parent.getItemAtPosition(pos) 
```

然后，添加对您将用于显示照片的方法的调用。这是一些伪代码

```
private Drawable getSelectedImage(String state, String capital){

    // Compare your selections here
    if(state.equals("Foo"){
        if(capital.equals("Bar"){
              //get and set appropriate image here
              int imageResource = R.drawable.foo_bar;
              return getResources().getDrawable(imageResource);
        }
    }
} 
```

确保将您的图像文件添加到适当的可绘制文件夹中。

# javascript - Using onmouseover and setInterval to rapidly change the font family

> ID：16178012
> 
> 赞同：0
> 
> 时间：2013-04-23T19:54:20.873
> 
> 标签：javascript, fonts, onmouseover, onmouseout

I want to do this with all the navigation menu links on my site. (I know, it sounds crazy, but I thought I'd give it a try and see if it looks cool) I already have a site that uses css and onhover to change the color of the links in the navigation menu when the mouse hovers over it. But I want to make the font also rapidly change font face until the mouseout event. So, here is the script section that I have in the head section.

```
<script>
var changeVar;
var font = "Impact";

changeText() {
    if font == "Impact" {
         document.getElementById("tops").style.fontFamily="courier";
         font = "Courier";
    }
    else
         document.getElementById("tops").style.fontFamily="impact";
         font = "Impact";
    }
}
</script> 
```

And here is the navigation link I'm using to test it.

```
<li><a href="tops.html" id="tops" onmouseover="changeVar=setInterval('changeText()', 10);" onmouseout="clearTimeout(changeVar)">Tops</a></li> 
```

Even though I put that stuff in there, the page does exactly the same thing it did before I put the JavaScript in there. The JavaScript just isn't working at all. Why doesn't it work?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:11:56.537

这是你想要做的吗？

```
a.navlinkOff {
    font-family: Arial !important;
}
a.navlinkOver1 {
    font-family: Courier !important;
}
a.navlinkOver2 {
    font-family: Impact !important;
}

<a id="navlink1" href="#" class="navlinkOff">Resource 1</a>
<br />
<a id="navlink2" href="#" class="navlinkOff">Resource 2</a>
<br />
<a id="navlink3" href="#" class="navlinkOff">Resource 3</a>
<br />
<a id="navlink4" href="#" class="navlinkOff">Resource 4</a>
<br />
<a id="navlink5" href="#" class="navlinkOff">Resource 5</a>
<br />

var navlinks = document.querySelectorAll("[id^=navlink]");
var delay = 250; // milliseconds
var fired = false;
var id = {};

function defaultClass(evt) {
    evt.target.className = "navlinkOff";
    clearInterval(id[evt.target.id]);
    fired = false;
}

function changeClass(evt) {
    if (evt.target.className === "navlinkOver1") {
        evt.target.className = "navlinkOver2";
    } else {
        evt.target.className = "navlinkOver1";
    }

    if (fired) {
        return;
    }

    fired = true;
    id[evt.target.id] = setInterval(function () {
        changeClass(evt);
    }, delay);
}

Array.prototype.forEach.call(navlinks, function (navlink) {
    navlink.addEventListener("mouseout", defaultClass, false);
    navlink.addEventListener("mouseover", changeClass, false);
}); 
```

在[jsfiddle上](http://jsfiddle.net/Xotic750/Ca273/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T20:02:15.497

[更新] 现场演示：http: [//jsfiddle.net/ffHqe/](http://jsfiddle.net/ffHqe/)

看来您的 changeText 函数出现了错误：

```
function changeText() {
if font == "Impact" {
     document.getElementById("tops").style.fontFamily="courier";
     font = "Courier";
}
else {
     document.getElementById("tops").style.fontFamily="impact";
     font = "Impact";
}
} 
```

# preg-replace - preg 替换删除第一个数字中的 0 直到找到 1-9

> ID：16178013
> 
> 赞同：-1
> 
> 时间：2013-04-23T19:54:32.900
> 
> 标签：preg-replace

我对这个号码有问题 000000000480000.00

如何删除 000000000

变成 480000.00

我需要 php 和 preg-replace 函数。请帮忙

谢谢之前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:04:06.197

尝试

```
preg_replace('(^0+)', '' , '000000000480000.00'); 
```

# php - 如何运行需要 root 的 perl 脚本？

> ID：16178015
> 
> 赞同：1
> 
> 时间：2013-04-23T19:54:40.207
> 
> 标签：php, ssh, root, sudo, phpseclib

我需要使用来自另一台计算机或同一台计算机的 ssh 从 php 执行位于 /root/scripts/ 的 perl 脚本。问题是我只是不知道如何让 php 登录到 root 帐户以仅执行该文件。

作为用户 $ 我无法访问 /root/scripts/，所以我无法使用 excec 或 system 调用它。我曾尝试使用 ssh 登录 sudo su，但当我输入密码时，它会挂起。

我把代码留在这里：

```
<?php
include('Net/SSH2.php');

$ssh = new Net_SSH2('IP');
if (!$ssh->login('user', 'password')) {
exit('Login Failed');
}else{
echo ("login suscess");
}
echo $ssh->read(']$');

echo $ssh->write("sudo su\n");

echo $ssh->read('user:');
//the code normally runs if I dont write the lines below

$ssh->write('password\n');//here I try to get ssh the root pass but php wont respond after this
echo $ssh->read('user]#');//normally this would work to show the root prompt  but I don't know what happens

?> 
```

我希望你能在这里帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T19:58:27.007

通常你会告诉 sudo 网络服务器用户可以执行脚本而无需使用密码进行身份验证。您必须在中添加如下所示的行`/etc/sudoers`：

```
www-data ALL=(ALL:ALL) NOPASSWD: /root/scripts/script.pl 
```

这将使 www-data 用户`script.pl`无需输入密码即可通过 sudo 执行。

然后使用 PHP 从 PHP 执行脚本

```
exec('sudo /root/scripts/script.pl'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T16:26:23.660

1.  回显 $ssh->write() 调用实际上并没有多大作用。

2.  sudo 需要密码。这是 phpseclib 网站上如何处理该问题的示例：http: [//phpseclib.sourceforge.net/ssh/examples.html#sudo](http://phpseclib.sourceforge.net/ssh/examples.html#sudo)

# android - 我的列表活动无法打开

> ID：16178017
> 
> 赞同：0
> 
> 时间：2013-04-23T19:54:43.573
> 
> 标签：android

基本上，我的 boidae 列表活动不会从我的 serpente 列表活动中打开。我不知道为什么，但如果你能帮助我，我确实有日志猫和代码。谢谢你。

我的日志猫：

```
04-23 19:49:28.327: W/System.err(958): java.lang.ClassNotFoundException: com.xeecros.reptilekeeperBoidae
04-23 19:49:28.327: W/System.err(958):  at java.lang.Class.classForName(Native Method)
04-23 19:49:28.366: W/System.err(958):  at java.lang.Class.forName(Class.java:217)
04-23 19:49:28.366: W/System.err(958):  at java.lang.Class.forName(Class.java:172)
04-23 19:49:28.366: W/System.err(958):  at com.xeecros.reptilekeeper.Serpentes.onListItemClick(Serpentes.java:28)
04-23 19:49:28.366: W/System.err(958):  at android.app.ListActivity$2.onItemClick(ListActivity.java:319)
04-23 19:49:28.366: W/System.err(958):  at android.widget.AdapterView.performItemClick(AdapterView.java:298)
04-23 19:49:28.366: W/System.err(958):  at android.widget.AbsListView.performItemClick(AbsListView.java:1100)
04-23 19:49:28.366: W/System.err(958):  at android.widget.AbsListView$PerformClick.run(AbsListView.java:2749)
04-23 19:49:28.376: W/System.err(958):  at android.widget.AbsListView$1.run(AbsListView.java:3423)
04-23 19:49:28.376: W/System.err(958):  at android.os.Handler.handleCallback(Handler.java:725)
04-23 19:49:28.376: W/System.err(958):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-23 19:49:28.376: W/System.err(958):  at android.os.Looper.loop(Looper.java:137)
04-23 19:49:28.376: W/System.err(958):  at android.app.ActivityThread.main(ActivityThread.java:5041)
04-23 19:49:28.387: W/System.err(958):  at java.lang.reflect.Method.invokeNative(Native Method)
04-23 19:49:28.387: W/System.err(958):  at java.lang.reflect.Method.invoke(Method.java:511)
04-23 19:49:28.387: W/System.err(958):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-23 19:49:28.387: W/System.err(958):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-23 19:49:28.396: W/System.err(958):  at dalvik.system.NativeStart.main(Native Method)
04-23 19:49:28.396: W/System.err(958): Caused by: java.lang.NoClassDefFoundError: com/xeecros/reptilekeeperBoidae
04-23 19:49:28.396: W/System.err(958):  ... 18 more
04-23 19:49:28.406: W/System.err(958): Caused by: java.lang.ClassNotFoundException: Didn't find class "com.xeecros.reptilekeeperBoidae" on path: /data/app/com.xeecros.reptilekeeper-1.apk
04-23 19:49:28.406: W/System.err(958):  at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:65)
04-23 19:49:28.406: W/System.err(958):  at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
04-23 19:49:28.406: W/System.err(958):  at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
04-23 19:49:28.416: W/System.err(958):  ... 18 more 
```

我的博科班：

```
/*
 * This class is a list to contain
 * all of the classes for the individual species.
 */

package com.xeecros.reptilekeeper;

import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class Boidae extends ListActivity {

    String boaspecies[] = {"Charina bottae"};

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setListAdapter(new ArrayAdapter<String>(Boidae.this,
                android.R.layout.simple_list_item_1, boaspecies));
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {

        super.onListItemClick(l, v, position, id);
        String localposm = boaspecies[position];
        try{
            Class ourclass = Class.forName("com.xeecros.reptilekeeper" + localposm);
            Intent bintent = new Intent(Boidae.this, ourclass);
            startActivity(bintent);
            }catch (ClassNotFoundException e){
                e.printStackTrace();
            }
    }

} 
```

我的蛇类：

```
package com.xeecros.reptilekeeper;

import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class Serpentes extends ListActivity {

    String snakefam[] = {"Boidae", "Colubridae",
            "Elapidae", "Pythonidae", "Viperidae"};
    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setListAdapter(new ArrayAdapter<String>(Serpentes.this,
                android.R.layout.simple_list_item_1, snakefam));
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {

        super.onListItemClick(l, v, position, id);
        String localposm = snakefam[position];
        try{
        Class ourclass = Class.forName("com.xeecros.reptilekeeper" + localposm);
        Intent sintent = new Intent(Serpentes.this, ourclass);
        startActivity(sintent);
        }catch (ClassNotFoundException e){
            e.printStackTrace();
        }
    }

} 
```

另外，我还有另一个问题：我如何更改列表的外观，因为我不能使用 xml，因为它是一个 ArrayAdapter。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T19:56:51.970

更改以下行

```
Class ourclass = Class.forName("com.xeecros.reptilekeeper" + localposm); 
```

通过把这个代替

```
Class ourclass = Class.forName("com.xeecros.reptilekeeper." + localposm); 
```

注意 . 正如错误日志所暗示的那样缺失：

```
ClassNotFoundException: com.xeecros.reptilekeeperBoidae 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T20:01:01.150

看看这个（在*Boidae*类中）：

```
String boaspecies[] = {"Charina bottae"};
....
String localposm = boaspecies[position];
...
Class ourclass = Class.forName("com.xeecros.reptilekeeper" + localposm); 
```

这是行不通的，因为*Charina bottae*不能是类名。

最后你错过了点（在*Boidae*和*Serpentes*类中）：

```
Class ourclass = Class.forName("com.xeecros.reptilekeeper." + localposm); 
```

干杯!

# jsf - 使用由 JS 填充的 selectOneMenu 在 JSF 和 Seam 中设置字符串

> ID：16178019
> 
> 赞同：2
> 
> 时间：2013-04-23T19:54:49.017
> 
> 标签：jsf, seam

我有一个从 selectonemenu 设置的字符串。菜单中的值取决于另一个菜单中的选择，并使用 JavaScript 填充。前端一切正常（菜单适当更新等），但是当我们提交更改时，没有设置字符串。菜单有一个转换器，并且正在调用 getAsObject。有人知道为什么没有设置字符串吗？

编辑.jspx

```
<h:selectOneMenu value="#{detectorInstance.type}" converter="detectorConverter" onchange="updateSubTypes(this, '#{applicationName}')">
    <s:selectItems value="#{detectors.detectors}" var="detectorSelection" label="#{detectorSelection.name}" noSelectionLabel="Unknown"/>
</h:selectOneMenu>    
<a4j:outputPanel id="detectorSubType">
    <h:selectOneMenu value="#{detectorInstance.detectorSubType}" converter="detectorSubTypeConverter"/>
</a4j:outputPanel> 
```

DetectorSubTypeConverter.java

```
@Name("detectorSubTypeConverter")
@BypassInterceptors
@org.jboss.seam.annotations.faces.Converter
public class DetectorSubTypeConverter implements Converter {
    public Object getAsObject(final FacesContext facesContext, final UIComponent uiComponent, final String identifier) {
        return identifier;
    }

    public String getAsString(final FacesContext facesContext, final UIComponent uiComponent, final Object o) {
        return o.toString();
    }
} 
```

探测器.js

```
function updateSubTypes(typeSelect, appName) {
    var jsonRoot = appName + "/services/rest/detectors/detectors";

    jQuery.getJSON(jsonRoot, function(data) {
        var subTypes = getSubTypes(typeSelect, data);
        var subTypeSelect = typeSelect.next().firstChild;
        subTypeSelect.options.length = 0;
        for (var i = 0; i < subTypes.length; i++) {
            subTypeSelect.options[i] = new Option(subTypes[i], subTypes[i], false, false);
        }
    });
}

function getSubTypes(typeSelect, detectors) {
    var selection = typeSelect.options[typeSelect.selectedIndex].text;
    var subtypes = new Array();
    for (var i = 0; i < detectors.length; i++) {
        var uuid = detectors[i]['detector']['name'];
        if (selection == uuid) {
            for (var j = 0; j < detectors[i]['detector']['subtypes'].length; j++) {
                subtypes[j] = detectors[i]['detector']['subtypes'][j]['name'];
            }
        }
    }

    return subtypes;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T04:28:44.263

我不认为通过 JS 为 selectOneMenu 填充项目是使用 Seam/JSF 的正确方法。原因是当您显示带有项目列表的下拉列表时，Seam/JSF 将出于安全原因检查提交的值是否在列表中。

正确的方法是：

*   处理第一个下拉列表的 onchange 事件并重新计算服务器上第二个下拉列表的项目
*   然后重新渲染第二个下拉列表

思路如下：

```
<h:selectOneMenu value="#{detectorInstance.type}" converter="detectorConverter" onchange="updateSubTypes(this, '#{applicationName}')">
    <s:selectItems value="#{detectors.detectors}" var="detectorSelection" label="#{detectorSelection.name}" noSelectionLabel="Unknown"/>
    <a4j:ajax event="click" execute="@this" render="detectorSubType" 
        listener="#{detectorInstance.onTypeChange}"/>
</h:selectOneMenu>
<a4j:outputPanel id="detectorSubType">
    <h:selectOneMenu value="#{detectorInstance.detectorSubType}" converter="detectorSubTypeConverter">
        <f:selectItem value="#{detectorInstance.types}" />
    </h:selectOneMenu>
</a4j:outputPanel> 
```

第二个下拉列表的项目来自`detectorInstance.types`。在`detectorInstance.onTypeChange`中，您重新计算`detectorInstance.types`然后重新渲染它`render="detectorSubType"`

# java - Uninitialized object leaked to another thread despite no code explicitly leaking it?

> ID：16178020
> 
> 赞同：4
> 
> 时间：2013-04-23T19:54:51.963
> 
> 标签：java, concurrency, initialization, memory-visibility

Let's see this simple Java program:

```
import java.util.*;

class A {
    static B b;
    static class B {
        int x;
        B(int x) {
            this.x = x;
        }
    }
    public static void main(String[] args) {
        new Thread() {
            void f(B q) {
                int x = q.x;
                if (x != 1) {
                    System.out.println(x);
                    System.exit(1);
                }
            }
            @Override
            public void run() {
                while (b == null);
                while (true) f(b);
            }
        }.start();
        for (int x = 0;;x++)
            b = new B(Math.max(x%2,1));
    }
} 
```

**Main thread**

The main thread creates an instance of `B` with `x` set to 1, then writes that instance to the static field `A.b`. It repeats this action forever.

**Polling thread**

The spawned thread polls until it finds that `A.b.x` is not 1.

**?!?**

Half the time it goes in an infinite loop as expected, but half the time I get this output:

```
$ java A
0 
```

Why is the polling thread able to see a `B` that has `x` not set to 1?

* * *

`x%2` instead of just `x` is here simply because the issue is reproducible with it.

* * *

I'm running openjdk 6 on linux x64.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-24T11:02:50.177

这是我的想法：因为**b 不是 final**，编译器可以随意重新排序操作，对吧？所以这基本上是一个重新排序问题，因此是一个*不安全的发布问题*将变量标记为最终将解决问题。

或多或少，它与[Java 内存模型文档](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.5-110)中提供的示例相同。

真正的问题是这怎么可能。我也可以在这里推测（因为我不知道编译器将如何重新排序），但可能在写入 x 之前，对 B 的引用已写入主内存（其他线程可见）。在这两个操作之间发生读取，因此零值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T20:24:09.480

通常，围绕并发的考虑集中在状态的错误更改或死锁上。但是来自不同线程的状态可见性同样重要。现代计算机中有很多地方可以缓存状态。在寄存器中，处理器上的 L1 缓存，处理器和内存之间的 L2 缓存等。JIT 编译器和 Java 内存模型旨在尽可能或合法地利用缓存，因为它可以加快速度。

它还可以产生意想不到的和违反直觉的结果。我相信这种情况正在发生。

创建 B 的实例时，实例变量 x 在被设置为传递给构造函数的任何值之前被短暂设置为 0。在本例中为 1。如果另一个线程尝试读取 x 的值，即使 x 已经设置为 1，它也可能看到值 0。它可能看到的是一个陈旧的缓存值。

为了确保看到 x 的最新值，您可以做几件事。您可以使 x 易失性，或者您可以通过 B 实例上的同步来保护 x 的读取（例如，通过添加一个`synchronized getX()`方法）。您甚至可以将 x 从 int 更改为 a `java.util.concurrent.atomic.AtomicInteger`。

但到目前为止，纠正问题的最简单方法是使 x 最终化。无论如何，它在 B 的生命周期内永远不会改变。Java 对 final 字段做了特殊的保证，其中之一是在构造函数完成后，构造函数中设置的 final 字段将对任何其他线程可见。也就是说，没有其他线程会看到该字段的陈旧值。

使字段不可变还有许多其他好处，但这是一个很好的好处。

另请参阅Jeremy Manson 的[原子性、可见性和排序](http://jeremymanson.blogspot.com/2007/08/atomicity-visibility-and-ordering.html)。特别是他说的部分：

> （注意：当我在这篇文章中说同步时，我实际上并不是指锁定。我指的是在 Java 中保证可见性或顺序的任何东西。这可以包括 final 和 volatile 字段，以及类初始化和线程启动和连接等等其他好东西。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T20:09:01.500

在我看来，Bx 上可能存在竞争条件，因此在 B 的构造函数中的 this.x = x 之前可能存在 Bx 已创建且 Bx=0 的瞬间。这一系列事件将类似于：

```
B is created (x defaults to 0) -> Constructor is ran -> this.x = x 
```

您的线程在创建后但在构造函数运行之前的某个时间访问 Bx。但是，我无法在本地重现该问题。

# jquery - IE9 simple click/scroll issue

> ID：16178024
> 
> 赞同：1
> 
> 时间：2013-04-23T19:55:03.610
> 
> 标签：jquery, windows, internet-explorer, internet-explorer-9

Personally, I am not experiencing this issue (Windows 7 with native IE9) but another computer is. Possibly Windows 7 but definitely IE9\. Initially, the scroll buttons do not work on their machine. If they change their document and browser renderer to IE8 or IE7 if works fine then. If they change it back to IE9, it works. If they close out of the tab and reopen it fresh, it doesn't work again. Their console log is empty except for a syntax error deep within jQuery 1.4 which appears in all browsers and which I THINK is benign.

So my question is, can anyone replicate the issue or can find any reason why this is happening? Code and link to follow:

[http://www.friedmanllp.com/home2.php](http://www.friedmanllp.com/home2.php)

```
<div style="float:left; padding:0; width:20px !important; height:310px !important; text-align:left;">
    <div id="scroll_up" style="cursor:pointer;"><img style="margin:10px 0 270px 0;" src="images/arrow_up.png" /></div>
    <div id="scroll_down" style="cursor:pointer;"><img src="images/arrow_down.png" /></div>
</div>

$(function() {
    var ele   = $('#scroller');
    var speed = 25, scroll = 5, scrolling;

    $('#scroll_up').click(function() {
        //console.log("Up");
        // Scroll the element up

        var topPos = $('#scroller').scrollTop();
        console.log(topPos);    
        $("#scroller").animate({
            scrollTop: topPos - 200
        }, 800);
    });

    $('#scroll_down').click(function() {
        //console.log("Down");
        // Scroll the element down

        var topPos = $('#scroller').scrollTop();
        console.log(topPos);    
        $("#scroller").animate({
            scrollTop: topPos + 200
        }, 800);
    });

    $('#scroll_up, #scroll_down').bind({
        click: function(e) {
            // Prevent the default click action
            e.preventDefault();
        },
        mouseleave: function() {
            if (scrolling) {
                window.clearInterval(scrolling);
                scrolling = false;
            }
        }
    });
}); 
```

* * *

* * *

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T20:00:34.477

您应该尝试删除（或注释掉）代码中的任何 console.log() 引用。

如果没有开发人员工具，打开 IE 会因为控制台不存在而出现问题。使用开发人员工具打开控制台确实存在，因此不会引发错误。我曾经花了很长时间尝试调试类似的问题:)

# c# - 滚动到底部列表框时加载更多数据 Silverlight 不是 WP7

> ID：16178027
> 
> 赞同：2
> 
> 时间：2013-04-23T19:55:07.137
> 
> 标签：c#, .net, silverlight, web-applications, listbox

我想要一个 listBox 来填充项目。当用户滚动到底部时`listBox`，`listBox`应该加载更多项目。

在 WP7 中有大量的教程可以做到这一点，但我还没有找到在 Silverlight 网络应用程序中做到这一点的任何可靠的东西。

在尝试不同的事情时，我设法创建了一种方法，可以在用户滚动到 ListBox 底部时显示一条消息。这更像是一个概念证明，而不是最终实现：

```
ScrollViewer scrollViewer = new ScrollViewer();
var childScrollViewer = VisualTreeHelper.GetChild(this, 0);
        if (childScrollViewer is ScrollViewer)
            scrollViewer = (ScrollViewer)childScrollViewer;

if (scrollViewer.VerticalOffset >= scrollViewer.ScrollableHeight)
            MessageBox.Show("You're at the bottom!"); 
```

我目前正在从 ListBox 的`MouseWheel`事件中调用此方法。这种方法并不理想，因为它不考虑用户单击滚动条并将其向下拖动。这个实现也很糟糕，因为当用户滚动到列表框的顶部**或**底部时会显示消息。

这里有一些不错的 WP7 教程，我发现我希望可以在 Silverlight 网络应用程序中实现：

*   [这是我无法使用的 WP7 教程](http://danielvaughan.orpius.com/post/Scroll-Based-Data-Loading-in-Windows-Phone-7.aspx)
*   [这个看起来很有希望，但描述得不好，而且并没有真正起作用](http://www.manas.com.ar/spalladino/2008/07/02/paging-in-data-bound-listbox-in-silverlight/)
*   [这是我无法使用的另一个 WP7 教程](http://www.codeproject.com/Articles/150166/Loading-Data-when-the-User-Scrolls-to-the-End-of-a)

我只需要指出正确的方向。无论是教程，还是我可以了解的概念，都可以解决问题，或者任何其他可以帮助我在 Silverlight Web 应用程序中实现这一点的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T14:36:39.767

[这个](http://www.wintellect.com/blogs/jlikness/making-the-scrollviewer-talk-in-silverlight-4)教程救了我的命。这就是我最终做的事情：

我的`ListBox`：

```
<ListBox x:Name="lstEventHistory"
            Grid.Row="1"
            d:DataContext="{d:DesignData /SampleData/AssetLifeCycleSampleData.xaml}"
            Background="Transparent"
            BorderBrush="#FFD4D4D6"
            BorderThickness="0"
            ItemsSource="{Binding Source={StaticResource eventsViewSource}}"
            Loaded="initScrollViewerMonitor"
            ScrollViewer.VerticalScrollBarVisibility="Auto" /> 
```

此方法由`ListBox`的`Loaded`事件调用，并将自定义绑定附加`ScrollViewer`到`ListBox`. 此绑定将检查`ScrollViwer`'`VerticalOffset`属性中的更改：

```
private void initScrollViewerMonitor(object sender, EventArgs e)
    {   
           //get the ScrollViewer from the ListBox
           scrollViewer = lstEventHistory.GetScrollHost();

            //attach to custom binding to check if ScrollViewer verticalOffset property has changed
            var binding = new Binding("VerticalOffset") { Source = scrollViewer };
            var offsetChangeListener = DependencyProperty.RegisterAttached(
                "ListenerOffset",
                typeof(object),
                typeof(UserControl),
                new PropertyMetadata(OnScrollChanged));
            scrollViewer.SetBinding(offsetChangeListener, binding);
    } 
```

最后，只要有更改，就会调用此方法`VerticalOffset`

```
public void OnScrollChanged(DependencyObject sender, DependencyPropertyChangedEventArgs e)
    {
        //We have to check if the values are 0.0 because they are both set to this when the scrollviewer loads
        if ((scrollViewer.ScrollableHeight <= scrollViewer.VerticalOffset)
            && (scrollViewer.ScrollableHeight != 0.0 && scrollViewer.VerticalOffset != 0.0))
        {
            //The ScrollBar is at the bottom, load more results.
        }
    } 
```

# c# - 以编程方式访问 LongListSelector DataTemplate 控件

> ID：16178030
> 
> 赞同：0
> 
> 时间：2013-04-23T19:55:17.493
> 
> 标签：c#, xaml, windows-phone-8

我的目标是 Windows Phone 8，我想访问我`StackPanel`命名的 ListHeaderStackPanel，它位于`LongListSelector` `DataTemplate`. 我的代码如下所示

```
<DataTemplate x:Key="ListHeader">
    <Grid HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,10,0,0">
        <StackPanel x:Name="ListHeaderStackPanel" HorizontalAlignment="Left" Height="8" VerticalAlignment="Top" Width="8">
        </StackPanel>
    </Grid>
</DataTemplate> 
```

这可能吗？我试过使用`FindName`没有运气，只是从代码中使用 ListHeaderStackPanel 是行不通的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:05:09.863

我使用了`VisualTreeHelper`第一条评论中建议的keyboardP来找到`StackPanel`.

> 您可以尝试使用 VisualTreeHelper 类来遍历可视树。这里有一个通用实现可以帮助stackoverflow.com/a/5191681/187697

# javascript - 如何阻止谷歌地图呈现方向？

> ID：16178033
> 
> 赞同：0
> 
> 时间：2013-04-23T19:55:28.993
> 
> 标签：javascript, jquery, google-maps

我正在创建一个函数来接受一个点数组并将它们作为一条路线显示在地图上。

```
function __RenderRoute(map, points, lineColor, DrawResult, i, callback, waitTime) {
    var tmpPoints = points.slice(i, i + 9);
    if (tmpPoints.length > 1) {
        var request = {
            origin: tmpPoints.shift().location,
            destination: tmpPoints.pop().location,
            waypoints: tmpPoints,
            travelMode: google.maps.TravelMode.DRIVING
        };
    }
    var directionsService = new google.maps.DirectionsService();
    directionsService.route(request, function (result, status) {
        if (status == google.maps.DirectionsStatus.OK) {
            var directionsDisplay = new google.maps.DirectionsRenderer({
                draggable: false,
                markerOptions: {
                    visible: false
                },
                polylineOptions: {
                    clickable: true,
                    strokeColor: lineColor,
                    strokeOpacity: .6,
                    strokeWeight: 6,
                    zIndex: 5
                },
                preserveViewport: true
            });
            directionsDisplay.setMap(map);
            directionsDisplay.setDirections(result);
            DrawResult.directionDisplays.push(directionsDisplay);
        } else {
            console.log(status);
            console.log("Wait " + waitTime + " miliseconds.");
            setTimeout(function () { __RenderRoute(map, points, lineColor, DrawResult, i, callback, waitTime * 2) }, waitTime);
            return;
        }
        DrawResult.directionResults.push(result);
        if (i + 9 < points.length) {
            __RenderRoute(map, points, lineColor, DrawResult, i + 8, callback, 350);
        } else {
            if (callback != null) {
                callback();
            }
            DrawResult.completed = true;
        }
    });
} 
```

但是，由于我的数组总是包含大量的点（通常超过 100 个），因此很难重复调用该函数，因为地图只会冻结以等待先前的请求完成。有没有办法阻止谷歌地图渲染路线，或者在等待再次调用时停止回调函数本身？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T02:09:42.250

不太确定谷歌是否会允许他们的 8 个航点限制如此简单地被克服，但就这样吧。

我已修改`__RenderRoute()`为：

*   构建一个复合路线对象，包含所有方向Service.route 段的数据，这样......可以为整个路线调用一次
*   返回一个 Promise，它在所有递归完成时被解决，或者被拒绝并带有有意义的错误消息。

主要功能`__RenderRoute()`：

```
function __RenderRoute(points, i, waitTime, dfrd, errorObj) {//<<<<< Now called with a reduced number of parameters
    dfrd = dfrd || $.Deferred();
    errorObj = errorObj || {
        count: 0,
        threshold: 5//adjust as necessary
    };
    var tmpPoints = points.slice(i, i + 9);
    if (tmpPoints.length < 2) {
        if (i == 0) {//top level call
            dfrd.reject("Not enough points");
            return dfrd.promise();
        }
        else { return; }
    }
    var request = {
        origin: tmpPoints.shift().location,
        destination: tmpPoints.pop().location,
        waypoints: tmpPoints,
        travelMode: google.maps.TravelMode.DRIVING
    };
    var route = new RouteResult();//Custom object that allows successive directionsService.route results to be componded into a single route.
    var directionsService = new google.maps.DirectionsService();
    directionsService.route(request, function (result, status) {
        if (status == google.maps.DirectionsStatus.OK) {
            route.add(result);//Hopefully magic happens here.
            if(i + 9 < points.length) {
                __RenderRoute(points, i+8, 350, dfrd, errorObj);
            } else {
                dfrd.resolve(route);//<<<<< Resolve the jQuery Deferred object
            }
        } else {
            console.log("google.maps.DirectionsService status = " + status);
            if(++errorObj.count < errorObj.threshold) {
                console.log("Wait " + waitTime + " miliseconds.");
                setTimeout(function() {
                    __RenderRoute(points, i, waitTime*2, dfrd, errorObj);
                }, waitTime);
            }
            else {
                dfrd.reject('Error threshold (' + errorObj.threshold + ') exceeded'); //Reject the jQuery Deferred object
            }
        }
    });
    return dfrd;
} 
```

在合适的范围内定义`directionsDisplay`：

```
//I think a DirectionsRenderer is reusable. If so `directionsDisplay` needs to be constructed only once as below. If not, then move this block inside foo().
var directionsDisplay = new google.maps.DirectionsRenderer({
    draggable: false,
    markerOptions: {
        visible: false
    },
    polylineOptions: {
        clickable: true,
        strokeColor: '#99F',//adjust as desired
        strokeOpacity: .6,
        strokeWeight: 6,
        zIndex: 5
    },
    preserveViewport: true
});
directionsDisplay.setMap(map);//Assumed to be defined elsewhere 
```

在合适的范围内定义`RouteResult()`：

```
/*
 * RouteResult is a utility class that will (hopefully)
 * allow several routes to be compounded into one.
 * Based on information here :
 * - https://developers.google.com/maps/documentation/javascript/directions
 * -
 * This is experimental and untested.
 */
function RouteResult() {
    var r = {
        legs: [],
        waypoint_order: [],
        overview_path: [],
        copyrights: [],
        warnings: [],
        bounds : new google.maps.LatLngBounds()//initially empty LatLngBounds obj
    };
    this.add = function (result) {
        r.legs = r.legs.concat(result.legs);
        r.waypoint_order = r.waypoint_order.concat(result.waypoint_order);
        r.overview_path = r.overview_path.concat(result.overview_path);
        r.copyrights = r.copyrights.concat(result.copyrights);
        r.warnings = r.warnings.concat(result.warnings);

        r.bounds = r.bounds.union(result.bounds);//???
        //or possibly just
        //r.bounds.union(result.bounds);//???
    };
    this.get = function() { return r; };
} 
```

然后，调用`__RenderRoute()`，如下：

```
//foo() is an assumed function from which __RenderRoute() is called.
function foo() {
    ...
    //__RenderRoute returns a Promise, allowing `.done()` and `.fail()` to be chained.
    __RenderRoute(points, 0, 350).done(function(route) {
        directionsDisplay.setDirections(route.get());//route is a custom object. .get() returns the actuual route. 
        //You can safely call __RenderRoute() again here, eg. with `setTimeout(foo, delay)`.
    }).fail(function(errMessage) {
        console.log(errMessage);
    });
    ...
} 
```

*   请参阅代码中的注释。
*   未经测试，因此可能需要调试。
*   如果它不起作用，也许它会给你一些想法。

# c++ - C++：如何将 char 数组转换为通用类型 T 的缓冲区

> ID：16178036
> 
> 赞同：0
> 
> 时间：2013-04-23T19:55:58.030
> 
> 标签：c++, arrays, templates, buffer

我的任务是在模​​板中为通用类型 T 创建一个缓冲区。我得到了一个分配的字符数组，我应该在不使用 STL 的情况下将其转换为缓冲区。

我对其中的一些还很陌生，我不知道如何获取该内存并将其转换为 T 数组（知道类型 T 占用了多少空间）。我试过弄乱地址，但这似乎不起作用。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:59:17.283

要在原始内存和对象之间进行转换，您需要以*放置*形式*构造*对象，这与`new`操作符一样。除非您正在编写专用的容器类，否则这通常不是您应该做的事情，但方法如下：

 *```
char memory[sizeof(T) * 10];           // gives pointers to raw memory
T * objects[10];                       // stores pointers to objects

for (unsigned int i = 0; i != 10; ++i)
{
    objects[i] = new (memory + i * sizeof(T)) T;      // even better: "::new"
} 
```

然后删除：

```
for (unsigned int i = 0; i != 10; ++i)
{
    objects[i]->~T();
} 
```

这在各种方面仍然是非常错误和糟糕的，但这是一个开始。

不要这样做。

（这有两个问题：a）您需要保证内存的适当对齐。b）您需要考虑如果任何构造函数`T`抛出异常会发生什么。）*

# ms-access - 在访问 vba 中抑制已取消的记录会产生错误

> ID：16178040
> 
> 赞同：1
> 
> 时间：2013-04-23T19:56:09.813
> 
> 标签：ms-access, vba, ms-access-2007

我对我的问题束手无策。我有一张有正数和负数的表。在将两者拆分为单独的表后，我想使用负数的表从使用 vba 的正数的表中删除记录的第一个实例。下面是我的代码：

```
Public Sub Suppress_Offset()
Dim MYSQL As String
Dim MYSQL2 As String
Dim rst As DAO.Recordset
Dim rst2 As DAO.Recordset
Dim i As Long
Dim db As DAO.Database

MYSQL2 = "select * From Negative where [QUANTITY]<0"

Set db = CurrentDb()
Set rst = db.OpenRecordset(MYSQL2)

    If Not rst.EOF Then
        rst.MoveFirst
        Do Until rst.EOF
            MYSQL = ""
                MYSQL = MYSQL & "SELECT top 1 *" & vbCrLf
                MYSQL = MYSQL & "FROM Positive " & vbCrLf
                MYSQL = MYSQL & "Where [Unique ID] = "" & rst![Unique ID]) & "" [ACCOUNT #] = " & rst![ACCOUNT #] & " [MRN]= " & rst![MRN] & vbCrLf
                MYSQL = MYSQL & " [PATIENT NAME] = """ & CStr(rst![PATIENT NAME]) & vbCrLf
                MYSQL = MYSQL & " [CPT CODE]=""" & CStr(rst![CPT CODE]) & vbCrLf
                MYSQL = MYSQL & " [DATE OF SERVICE]=" & rst![DATE OF SERVICE] & vbCrLf
                MYSQL = MYSQL & " [ENTRY DATE] = " & rst![ENTRY DATE] & vbCrLf
                MYSQL = MYSQL & " [ATTENDING MD] =" & rst![ATTENDING MD] & vbCrLf
                MYSQL = MYSQL & " [ATTENDING MD NAME] = """ & CStr(rst![ATTENDING MD NAME]) & vbCrLf
                MYSQL = MYSQL & " [DISCHARGE FLOOR] = """ & CStr(rst![DISCHARGE FLOOR]) & vbCrLf
                MYSQL = MYSQL & " [DCFL DESC] = """ & CStr(rst![DCFL DESC]) & vbCrLf
                MYSQL = MYSQL & " [INOUT CODE] = """ & CStr(rst![INOUT CODE]) & vbCrLf
                MYSQL = MYSQL & " [FKEY] = """ & CStr(rst![FKEY]) & vbCrLf
                MYSQL = MYSQL & " [DISCHARGE DEPT] = """ & CStr(rst![DISCHARGE DEPT]) & vbCrLf
                MYSQL = MYSQL & " [DCDP DESC] = """ & CStr(rst![DCDP DESC]) & vbCrLf
                MYSQL = MYSQL & " [FAC/PRO] = """ & CStr(rst![FAC/PRO]) & vbCrLf
                MYSQL = MYSQL & " [QUANTITY]>0 and [QUANTITY]>= " & CStr(-rst![QUANTITY])

                Debug.Print TypeName(MYSQL), MYSQL

                Set rst2 = db.OpenRecordset(MYSQL)
                If Not rst2.EOF Then
                    rst2.Edit
                    rst2![QUANTITY] = rst2![QUANTITY] + rst![QUANTITY]
                    rst2.Update

                    rst.Edit
                    rst![QUANTITY] = 0
                    rst.Update
                End If
                rst2.Close
            rst.MoveNext
        Loop
    End If
        rst.Close
End Sub 
```

谁能看到为什么我在以下位置收到运行时错误 13：Set rst2 = db.OpenRecordset(MYSQL)

请帮忙！谢谢

输出 SQL：

```
String        SELECT top 1 *
FROM Positive 
Where [Unique ID] = " & rst![Unique ID]) & " [ACCOUNT #] = ########## [MRN]= #######
[PATIENT NAME] = "DOE, BANKSY
[CPT CODE]="#####
[DATE OF SERVICE]=########
[ENTRY DATE] = ########
[ATTENDING MD] =XXXX
[ATTENDING MD NAME] = "BACON, KEVIN
[DISCHARGE FLOOR] = "XXXX
[DCFL DESC] = "RESEARCH/DEVELOPMENT
[INOUT CODE] = "X
[FKEY] = "X-XXXXXXXXXXX
[DISCHARGE DEPT] = "XXXX
[DCDP DESC] = "XXXXXXXX
[FAC/PRO] = "X
[QUANTITY]>0 and [QUANTITY]>= 1
String        SELECT top 1 *
FROM Positive 
Where [Unique ID] = " & rst![Unique ID]) & " [ACCOUNT #] = ########## [MRN]= #######
[PATIENT NAME] = "DOE, BANKSY
[CPT CODE]="#####
[DATE OF SERVICE]=########
[ENTRY DATE] = ########
[ATTENDING MD] =XXXX
[ATTENDING MD NAME] = "BACON, KEVIN
[DISCHARGE FLOOR] = "XXXX
[DCFL DESC] = "RESEARCH/DEVELOPMENT
[INOUT CODE] = "X
[FKEY] = "X-XXXXXXXXXXX
[DISCHARGE DEPT] = "XXXX
[DCDP DESC] = "XXXXXXXX
[FAC/PRO] = "X
[QUANTITY]>0 and [QUANTITY]>= 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T20:45:57.803

很难从您的代码中分辨出来，但这里有一些建议。

*   不要使用 + 进行连接。正确的运算符是 &。+ 通常会起作用，但有时它喜欢添加。
*   如果该字段不是字符串，请不要将变量转换为字符串并将其用引号引起来。保持原样。
*   拥有超长的代码行使得以后编辑或调试变得更加困难。分开来。可能是这样的：

    var1 = ""
    var1 = var1 & "SELECT * " & vbCrLf
    var1 = var1 & "FROM orders " & vbCrLf
    var1 = var1 & "WHERE shipcity = "" & me!txtshipcity & "" "

字符串也可以用单引号引起来。这有时更容易。

按照这些步骤，我敢打赌你会发现你的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T21:34:33.603

在代码`MYSQL`尝试将其与`OpenRecordset`.

```
Debug.Print TypeName(MYSQL), MYSQL
Set rst2 = db.OpenRecordset(MYSQL) 
```

您可以`Debug.Print`在立即窗口中看到输出；`Ctrl`和+一起去那里`g`

我的预感是它`MYSQL`不包含你所期望的。根据变量的构建方式，它甚至可以是 Null 而不是字符串。

它可能是 Null 的原因是因为`MYSQL`声明如下：

```
Dim MYSQL, MYSQL2 As String 
```

您可能期望这两个变量都将被声明`AS String`。但是，只有`MYSQL2`字符串。 `MYSQL`是变体。因此该声明与此具有相同的效果：

```
Dim MYSQL As Variant, MYSQL2 As String 
```

由于`MYSQL`打算保存一条 SQL 语句，因此声明它`AS String`不允许它包含 Null。

```
Dim MYSQL As String, MYSQL2 As String 
```

请注意，当您声明记录集变量时，您会遇到类似的问题。

```
Dim rst, rst2 As DAO.Recordset ' rst will be Variant 
```

但是，我认为该声明不会导致眼前的问题。不过，在其他情况下，类似的事情可能会导致不受欢迎的意外。

# asp.net - Check all checkboxes when main checkbox is checked and vice-versa in asp.net

> ID：16178041
> 
> 赞同：1
> 
> 时间：2013-04-23T19:56:17.173
> 
> 标签：asp.net, vb.net, checkbox

I have created many checkboxes in asp.net using vb.net programmatically I want to check all the checkboxes when main checkbox is checked. Main checkbox is created in page_Load event. But its CheckChanged event is not firing

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:59:06.057

设置`AutoPostBack="true"`为您的复选框。

```
<asp:CheckBox id="chk" runat="server" AutoPostBack="true" OnCheckedChanged="chk_checkedChanged"/> 
```

# java - Is there a speed limit on JLists?

> ID：16178047
> 
> 赞同：0
> 
> 时间：2013-04-23T19:56:44.690
> 
> 标签：java, swing, jlist, event-dispatch-thread

I'm baffled. With extensive testing I can confirm that if I add objects faster than y to the DefaultListModel connected to the JList, the JList dissapears.

Here's what I'm doing:

```
JPanel pane = new JPanel(new BorderLayout());
JList<LogMessage> messageList = new JList<LogMessage>(dataModel.getMessageList());
pane.add(messageList , BorderLayout.CENTER);

//add pane to JFrame etc. 
```

After initializing the GUI I add 100 LogMessages to the DefaultListModel. What's strange is that everything works if I do Thread.sleep(10); between each of the 100 new LogMessages. If I don't - the JList vanishes.

I tried to export as a runnable jar and run it - the problem was gone. I still need to be able to run run my programs from eclipse though.

What could be causing this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T20:28:29.723

所有 Swing 组件都只能在 the`Event Dispatch Thread`或 the上访问`EDT`。如果不是，那么你就违反了摆动线程原则，你可能会遇到像你得到的那样的奇怪错误。

`Runnable`要发布要排队在 EDT 上运行的任务（即 a ），请使用`SwingUtilities.invokeLater`

# vim - Clang plugin issue

> ID：16178053
> 
> 赞同：4
> 
> 时间：2013-04-23T19:57:00.483
> 
> 标签：vim, clang, clang-complete

I have installed the plugin [clang_complete](https://github.com/Rip-Rip/clang_complete). I put these settings in my .vimrc:

```
 let g:clang_use_library      = 1
   let g:clang_auto_select      = 0
   let g:clang_complete_auto    = 1
   let g:clang_complete_copen   = 1
   let g:clang_complete_macros  = 1
   let g:clang_complete_patters = 1
   set completeopt=menu,longest

   let g:clang_library_path = '/usr/lib/clang'
   "let g:clang_library_path = '/usr/lib/llvm-2.9'

   let g:clang_auto_user_options = "-I/usr/include/c++/4.6, .clang_complete"
   let g:clang_snippets = 1
   let g:clang_snippets_engine = 'clang_complete' 
```

Every time when I open the .cpp file I have got the following error message:

```
Error detected while processing function <SNR>15_ClangCompleteInit..LoadUserOptions:
line   20:
E121: Undefined variable: getopts#
Loading libclang failed, falling back to clang executable.  Are you sure '/usr/bin/clang' contains libclang? 
```

vim is compiled with the python feature. So vim --version is gets:

```
VIM - Vi IMproved 7.3 (2010 Aug 15, compiled Feb 28 2012 13:50:08)
Included patches: 1-154

 ... +python -python3 ...  

Compilation: gcc -c -I. -Iproto -DHAVE_CONFIG_H -DFEAT_GUI_ATHENA     -Wall -g -O2 -D_FORTIFY_SOURCE=1     -I/usr/include/tcl8.5  -D_REENTRANT=1  -D_THREAD_SAFE=1  -D_LARGEFILE64_SOURCE=1  
Linking: gcc   -L. -Wl,-Bsymbolic-functions -rdynamic -Wl,-export-dynamic  -Wl,-E  -Wl,-Bsymbolic-functions -Wl,--as-needed -o vim -lXaw -lXmu -lXext -lXt -lSM -lICE -lXpm -lXt -lX11 -lXdmcp -lSM -lICE -ldl -lm -ltinfo -lnsl  -lselinux  -lacl -lattr -lgpm -ldl  -L/usr/lib -llua5.1  -Wl,-E  -fstack-protector -L/usr/local/lib  -L/usr/lib/perl/5.12/CORE -lperl -ldl -lm -lpthread -lcrypt -L/usr/lib/python2.7/config -lpython2.7 -lpthread -ldl -lutil -lm -Xlinker -export-dynamic -Wl,-O1 -Wl,-Bsymbolic-functions  -L/usr/lib -ltcl8.5 -ldl -lpthread -lieee -lm -lruby1.8 -lpthread -lrt -ldl -lcrypt -lm 
```

Can anybody help to resolve the problem?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-10T05:24:54.367

你这里有两个问题。

1.  您提供的值`g:clang_auto_user_options`无效。clang_complete 文档中提到的“路径”并不意味着路径应该写在选项字符串中；它指的是使用 Vim 的内置`'path'`选项来提供`-I`标志列表。

    改用`set g:clang_user_options = "-I/usr/include/c++/4.6"`它，它会直接传递给 clang。

    *旁白：*出现`getopts#`错误是因为 clang_complete 尝试将您的`-I...`字符串解释为选项源函数名称的一部分。（`{anything}`文档中的子句。）`-`in`getopts#-I/usr/include/c++/4.6#getops()`不是有效的 Vimscript 函数字符，因此它在那里被截断。

2.  clang_complete 期望`g:clang_library_path`您指定的目录包含`libclang.dylib`or`libclang.so`直接在其中（例如`/usr/lib/clang/libclang.so`，在您的情况下）。

    并非所有 clang 发行版都提供 libclang 共享库，因此您可能需要自己编译它。

# django - How to set display text filter in django-admin list_display?

> ID：16178055
> 
> 赞同：0
> 
> 时间：2013-04-23T19:57:13.517
> 
> 标签：django, django-admin

I have a field that contains markdown. When I display it in my templates I can just put in `{{activity.activity_notes|markdown}}` to get it to format correctly. When it shows up in the Django admin, though, it is unfiltered and doesn't look nice.

I wrote a custom function to return compiled markdown, but when outputting it in Django admin it shows the literal html, tags and all. Is there a way I can set the output filter for a field in the Django admin interface?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T20:15:18.893

只需将`get_markedown_activity_notes`方法添加到您的模型并在管理员中使用`list_display` 该方法将如下所示

```
from django.contrib.markup.templatetags import markdown

class Activity(models.Model):
    ...
    def get_markedown_activity_notes(self):
        return markdown(self.activity_notes)

#in admin.py

class ActivityAdmin(admin.ModelAdmin):
      list_display = ('id','get_markedown_activity_notes',) 
```

有关更多用例，请参阅[文档](https://docs.djangoproject.com/en/1.5/ref/contrib/admin/#django.contrib.admin.ModelAdmin.list_display)

# css - DIVs, height and float

> ID：16178057
> 
> 赞同：6
> 
> 时间：2013-04-23T19:57:18.983
> 
> 标签：css, html

I have float red divs on blue div like on picture ![enter image description here](https://i.stack.imgur.com/d4BN2.jpg)

```
<div class="blue">
  <div style="height: 40px; float: left"></div>
  <div style="height: 40px; float: left"></div>
  <div style="height: 40px; float: left"></div>

  <div style="height: 40px; float: left"></div>
  <div style="height: 40px; float: left"></div>
  <div style="height: 40px; float: left"></div>
</div> 
```

I want to do, so blue div have height on red DIVs. When I remove float it's OK.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T19:59:23.070

您需要添加 display:table-cell; 或溢出：隐藏；到你的蓝色 div。这将为父母提供其孩子的高度。

[**演示**](http://jsfiddle.net/ueAK5/2/)

像这样：

```
.blue{
   overflow:hidden;
   //or
   //display:table-cell;
} 
```

旁注 - 您的 div 在浮动时需要一个宽度。

您还可以选择使您的 div 带有蓝色类浮动。但这可能会导致您的文档中出现一些不需要的行为（如果 div 不应该浮动）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T20:00:25.237

只需浮动蓝色 div：

```
.blue{
   float: left;
} 
```

然后它将扩展以达到其子项的高度。

**如果浮动不是一个选项**，我会设置`display`为`inline-block`使其行为方式与浮动元素相同。

```
.blue{
   display: inline-block;
} 
```

参考：[https ://developer.mozilla.org/en-US/docs/CSS/display](https://developer.mozilla.org/en-US/docs/CSS/display)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T20:19:31.240

这是一个非常常见的问题，称为“clearfix”问题。更多信息可以在这里找到（例如）：[Div rendering wrong in Firefox](https://stackoverflow.com/questions/15797667/div-rendering-incorrectly-in-firefox/15798326#15798326)

简而言之，您应该`.clearfix`向父（蓝色）div 添加一个类，如下所示：

```
.clearfix {
  *zoom: 1;
}
.clearfix:before,
.clearfix:after {
    display: table;
    content: "";
    line-height: 0;
  }
&:after {
    clear: both;
} 
```

这个是从 Twitter Bootsrap “借来的”，但是那里有很多替代品。对于它为什么以及如何工作，我建议使用谷歌搜索“clearfix”。

请注意，还有其他“修复”，例如使用`inline blocks`、添加`overflow: hidden`甚至显示为`table-cell`. 尽管它们可能在某些情况下工作，但它们几乎都有其他副作用，或者不是完全跨浏览器，因此应谨慎使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-04T17:51:34.890

另一个在所有浏览器选项中不兼容但不需要 float:left 的选项

```
.blue{
    background-color:blue;
    overflow:hidden;
    width: 140px;
    display: flex;
    justify-content: space-around;
    flex-wrap: wrap;
}

.blue div{
    background-color:red;
    margin: 2.5px 0 2.5px 0;
    width:40px;
}
```

```
<div class="blue">
  <div style="height: 40px;"></div>
  <div style="height: 40px;"></div>
  <div style="height: 40px;"></div>

  <div style="height: 40px;"></div>
  <div style="height: 40px;"></div>
  <div style="height: 40px;"></div>
</div>
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T20:32:50.653

如果你需要一些干净和更有活力的东西，试试这个：

```
<div class="blue">
<div>
    <div></div>
    <div></div>
    <div></div>
</div>
<div>
    <div></div>
    <div></div>
    <div></div>
</div> 
```

和这个：

```
.blue {background-color: blue;text-align: center;display: inline-block;padding: 5px;}
.blue > div > div {background-color: red; width:100px; height: 50px; margin: 10px;display: inline-block;} 
```

[jsfiddle 上的示例](http://jsfiddle.net/j5dy7/)

# c++ - How to handle RoutedEvents in WinRT Popup

> ID：16178058
> 
> 赞同：0
> 
> 时间：2013-04-23T19:57:28.700
> 
> 标签：c++, xaml, windows-runtime, routed-events

I am playing a Little with Windows 8 and building Windows Store Apps. Currently I am trying to create a popup. I want to tap on a button on a (primitive) user control which is hosted as the `Child` of a `Windows::UI::Xaml::Controls::Primitives::Popup`.
When I tapped on the button I want to do something and eventually close the popup. As I read [here](http://msdn.microsoft.com/en-us/library/windows/apps/Hh758286.aspx)

* * *

Routed events outside the visual tree

... If you want to handle routed events from a Popup or ToolTip, place the handlers on specific UI elements that are within the Popup or ToolTip and not the Popup or ToolTip elements themselves. Don't rely on routing inside any compositing that is performed for Popup or ToolTip content. This is because event routing for routed events works only along the main visual tree. ...

* * *

I then created an ugly solution as to pass the popup (as parent) to my custom control.

```
void Rotate::MainPage::Image1_RightTapped_1(Platform::Object^ sender, Windows::UI::Xaml::Input::RightTappedRoutedEventArgs^ e)
{
    Popup^ popup = ref new Popup();
    ImagePopup^ popupchild = ref new ImagePopup(popup); //pass parent's reference to child 
    popupchild->Tapped += ref new TappedEventHandler(PopupButtonClick);
    popup->SetValue(Canvas::LeftProperty, 100);
    popup->SetValue(Canvas::TopProperty, 100);
    popup->Child = popupchild;
    popup->IsOpen = true;
}

void PopupButtonClick(Platform::Object^ sender, Windows::UI::Xaml::Input::TappedRoutedEventArgs^ e){
    ImagePopup^ imgPop = static_cast<ImagePopup^>(sender);
    if(imgPop != nullptr){
        imgPop->CloseParent();
        e->Handled = true;
    }
    e->Handled = false;
} 
```

Is there any other way around? Thank you.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T23:41:55.780

您可以将弹出窗口放在 UserControl 的根目录中，如下所示：

```
<UserControl
    x:Class="App15.MyUserControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:App15"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    d:DesignHeight="300"
    d:DesignWidth="400">

    <Grid>
        <Popup
            x:Name="popup"
            IsOpen="True">
            <Button
                Content="Close"
                Click="Button_Click" />
        </Popup>
    </Grid>
</UserControl> 
```

然后从 UserControl 中隐藏它：

```
void App15::MyUserControl::Button_Click(Platform::Object^ sender, Windows::UI::Xaml::RoutedEventArgs^ e)
{
    popup->IsOpen = false;
} 
```

这并不是一个更好的方法，只是不同。我认为您可能应该使用`HorizontalOffset`而不是`Canvas.Left`定位，并且通常最好使弹出窗口成为某个面板的子项，以通过`TextBox`弹出窗口中托管的控件来获得正确的布局更新和软键盘行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T20:23:43.523

在命名空间`Windows::UI::Popups`中有一个`PopupMenu`-class，它提供了我需要的东西。它创建一个类似于经典桌面应用程序中的上下文菜单的弹出窗口。

首先，简单地使用创建一个新对象

```
Windows::UI::Popups::PopupMenu^ popupmenu = ref new Windows::UI::Popups::PopupMenu(); 
```

然后，使用最多六个项目填充弹出窗口

```
popupmenu->Commands->Append(ref new Windows::UI::Popups::UICommand("Do Something",
[this](IUICommand^ command){
//your action here
})); 
```

最终，使用您指定的弹出`UIElement`窗口

```
popupmenu->ShowAsync(Windows::Foundation::Point(xArg, yArg)); 
```

该文档可在[MSDN](http://msdn.microsoft.com/en-us/library/windows/apps/br208693.aspx)上找到（虽然很差）。可以从 [这里](http://code.msdn.microsoft.com/windowsapps/Context-menu-sample-40840351/)获得一个示例项目。

# android - EditText input filter causing repeating letters

> ID：16178059
> 
> 赞同：5
> 
> 时间：2013-04-23T19:57:30.113
> 
> 标签：android, android-edittext, android-input-filter

I have been limiting the input to my edittext like this;

```
InputFilter filter = new InputFilter() { 
        public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {
            String output = "";
            for (int i = start; i < end; i++) {
                if (source.charAt(i)!='~'&&source.charAt(i)!='/') {
                    output += source.charAt(i); 
                }
            } 
            return output;
        }
    }; 
```

But anyone who has used this method will know that it causes repeating characters when it is mixed with auto correct and the backspace key. To solve this I removed the auto correct bar from the keyboard like this;

```
Edittect.setInputType(InputType.TYPE_TEXT_FLAG_NO_SUGGESTIONS); 
```

Now this works fine on the stock android keyboard, but the problem is on alternative keyboards(from Google play) it does not disable the auto correct, and so therefore I run into the problem of repeating characters again. Has anyone encountered this/know how to solve it?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T06:08:55.557

编辑 - 这不太管用。在某些设备上（似乎大多数三星），重复字母问题又回来了——只是稍微少了一点。

我强烈**建议**找到一种不同的方法来限制输入，因为输入过滤器目前存在一些严重的问题。

我建议如下：

*   使用`android:digits`xml 属性
*   需要时检查edittext的内容，而不是输入时
*   您可以使用文本观察器，但我发现这无效 - 如果您找到使用文本观察器的有效解决方案，请告诉我。

我发现了问题 - 这就是我最后使用的

```
InputFilter() {
@Override
public CharSequence filter(CharSequence source, int start, int end,
        Spanned dest, int dstart, int dend) {

    if (source instanceof SpannableStringBuilder) {
        SpannableStringBuilder sourceAsSpannableBuilder = (SpannableStringBuilder)source;
        for (int i = end - 1; i >= start; i--) { 
            char currentChar = source.charAt(i);
             if (currentChar=='/' || currentChar=='~') {    
                 sourceAsSpannableBuilder.delete(i, i+1);
             }     
        }
        return source;
    } else {
        StringBuilder filteredStringBuilder = new StringBuilder();
        for (int i = 0; i < end; i++) { 
            char currentChar = source.charAt(i);
            if (currentChar != '~'|| currentChar != '/') {    
                filteredStringBuilder.append(currentChar);
            }     
        }
        return filteredStringBuilder.toString();
    }
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-10T06:19:38.140

`EditText`在您的**XML**中使用它来解决此问题：

```
android:inputType="textFilter" 
```

# c++ - 'this' 指针如何用作成员函数的参数

> ID：16178061
> 
> 赞同：1
> 
> 时间：2013-04-23T19:57:38.917
> 
> 标签：c++

我有这个简单的课程

```
class foo {
public:
  void func() const;
  void func2();
};

void foo::func() const {}
void foo::func2() {}

int main() {
  const foo f;
  f.func();
  f.func2();
} 
```

当我尝试编译时，我收到此消息：

> 错误：将 'const foo' 作为 'void foo::func2()' 的 'this' 参数传递会丢弃限定符 [-fpermissive]

我了解 const 对象的非常量成员的使用，我的问题是“this”指针如何用作 func2 的参数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T19:59:45.900

`void foo::func2()`是非常量，这意味着它可能会改变对象。因此，编译器不允许您为 const 对象调用它。即使您实际上并没有更改`func2`' 的实现中的任何内容。`this`是任何非静态成员函数的隐式参数。这就是它如何知道它被调用的确切对象的方式。

# 9.3.2 this指针[class.this]

> 1 在非静态 (9.3) 成员函数的主体中，关键字 this 是一个纯右值表达式，其值是调用该函数的对象的地址。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T20:04:06.407

您将看到 C++ 定义方式的产物。成员函数会自动为每个函数添加一个隐藏`this`参数。如果对象是，`const`那么指针也是`const`如此，并且非常量成员函数必须接收非常量`this`指针。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-23T20:03:47.477

成员函数的实例参数是*隐式*的。也就是说，它从来不是函数声明的一部分，但它仍然存在。

请记住，（非静态）成员函数不是函数。你不能只*打电话给*他们。*相反，您必须始终在实例*对象上调用它们。这个实例对象隐含地是成员函数的一个参数，但从未拼写出来。它可以通过`this`表达式在函数内部使用。

如果隐式实例参数绑定到一个常量对象，那么类型`this`是`T const *`，并且只有符合 as 的成员函数才能`const`被调用。类似地`volatile`，对于将隐式实例参数绑定到右值引用也有类似的规则。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-23T19:59:42.207

您不能`func2`在 const object 上调用非常量函数`f`。

因为你的问题是：

> 指针如何`this`用作 func2 的参数

[以下是从IBM C++ 文档](http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=/com.ibm.xlcpp8l.doc/language/ref/cplr035.htm)中引用的一些信息：此指针：

> 关键字`this`标识一种特殊类型的指针。假设您创建了一个名为`x`class的对象`A`，并且 class`A`有一个非静态成员函数`f()`。如果调用该函数，主体中`x.f()`的关键字存储的地址。您不能声明 this 指针或对其进行赋值。`this``f()``x`
> 
> `static`成员函数没有指针`this`。
> 
> 类类型`this`的成员函数的指针的类型 `X`是`X* const`。如果使用 `const`限定符声明成员函数，则该成员函数的指针类型为`this`class 。`X``const X* const`
> 
> `const this`指针只能与 一起使用`const member functions`。类的数据成员将在该函数中保持不变。该函数仍然能够更改值，但需 `const_cast`要这样做：
> 
> ```
> void foo::p() const{    
>     member = 1;                       // illegal    
>     const_cast <int&> (member) = 1;   // a bad practice but legal 
> } 
> ```
> 
> 更好的技术是声明成员可变

.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-23T20:04:00.583

在 OOP 中（通常），编译器将所有实例方法静默转换为静态函数，并添加指向包含实例状态（即）的结构的指针`this`作为隐藏的第一个参数。

所以这：

```
class Foo
{
    private:
        Int32 _bar;

    public:
        void Add(Int32 x)
        {
            this->_bar += x;
        }
};

void Main()
{
    Foo foo;
    foo.Add(3);
} 
```

实际上是这样实现的：

```
struct Foo {
    Int32 _bar;
}

static void Foo_Add(Foo *thisPtr, Int32 x)
{
    thisPtr->_bar += x;
}

void Main()
{
    Foo foo;
    Foo_Add( &foo, 3 );
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-23T20:00:27.297

您的成员函数 func2() 应该是 const。看[这里](http://www.learncpp.com/cpp-tutorial/810-const-class-objects-and-member-functions/)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-23T20:05:23.587

In the actual code as run on the computer, the code for `func2` needs to know which instance of `foo` to look at/do things to. So it is passed a pointer (`this`) to the instance.

# c# - 通过 C#(Microsoft.Office.Interop.MSProject) 在 MS Project 中更改特定 taskID 的值

> ID：16178073
> 
> 赞同：0
> 
> 时间：2013-04-23T19:58:40.900
> 
> 标签：c#, interop, ms-project

我正在尝试在 MS Project 中编辑任务。我想使用 dateTimePicker 中的单个日期更新“StartDate”列中的特定任务（多个任务）。我正在使用 Microsoft.Office.Interop.MSProject 但我似乎找不到正确的方法，该`ActiveProject.Tasks.Add()`方法不会更新任务，它只是在指定的 taskID 处添加另一个任务。我也尝试过替换方法...这是我尝试过的：

```
 public static void editTask(string taskName, DateTime startDate, int taskID)
        {
            ApplicationClass msProj = new ApplicationClass();
            msProj.Visible = true;
            Task addTask = msProj.ActiveProject.Tasks.Add(taskName,taskID);
            addTask.Start = startDate;
        }

        private void button5_Click(object sender, EventArgs e) //Writes to date where names are selected.
        {
                    for (int x = 0; x <= checkedListBox1.CheckedItems.Count - 1; x++)
                    {
                        foreach (var item in checkedListBox1.SelectedItems)
                        {
                            msProj.Replace(Name,Type.Missing,checkedListBox1.SelectedItem,dateTimePicker1.Text,true,true,false,PjField.pjResourceName,PjComparison.pjCompareEquals);
                            //editTask(checkedListBox1.CheckedItems[x].ToString(), DateTime.Parse(dateTimePicker1.Text));
                        }
                    }
        } 
```

我正在使用 VS 2010 和 Office Project 2010

如果您需要有关如何或我想做什么的更多信息，请问我。请原谅我上面的代码，它被编辑和改变了很多，这些互操作的东西让我的大脑皱了起来......

我在 MSProject 的 Office.Interop 上找不到太多信息。请，任何链接或帮助将不胜感激。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T10:26:21.480

问题是这样解决的：

```
private void button5_Click(object sender, EventArgs e) //Writes to date where names are selected.
    {
        ApplicationClass msProj = new ApplicationClass();
        int i = 0;
        foreach (Task t in msProj.ActiveProject.Tasks)
        {
            if (i < checkedListBox1.CheckedItems.Count)
            {
                if (t.ID == int.Parse(checkedListBox1.CheckedItems[i].ToString()))
                {
                    t.Start = DateTime.Parse(dateTimePicker1.Text);
                    i++;
                }
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-07-02T08:35:46.943

您可以使用：

```
Task yourTask = project.Tasks.get_UniqueID(UniqueId) 
```

它将返回任务的对象，该对象具有给定的`UniqueId`. 因此，它是一种寻找具有特定`UniqueId`. `UniqueId`的类型`int`。现在您可以更改任务中的数据。

```
yourTask.Start = DateTime.Parse(dateTimePicker1.Text) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-30T10:25:19.713

对于编辑任务，您可以在任务中循环并随时更改。但请确保格式。举个例子，task.name 是字符串，大部分都是对象，所以你必须转换它们。这样使用：

```
 ApplicationClass projectApp = new ApplicationClass();                
            projectApp.FileOpen("C:\\test.mpp", false, Missing.Value, Missing.Value,  Missing.Value,Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value,PjPoolOpen.pjPoolReadWrite, Missing.Value, Missing.Value, Missing.Value, Missing.Value);

            // Get the active project
            Project proj = projectApp.ActiveProject;
            foreach (Task task in proj.Tasks)
                {
                                try
                                {
                                    Object per = "25";//any data you want to change
                                    task.PhysicalPercentComplete = per;
                                }
                                catch
                                {

                                }
                }//foreach 
```

最后你应该关闭所有东西并保存它们：

```
 projectApp.FileSaveAs("c:\\sample.mpp", PjFileFormat.pjMPP, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing);
            projectApp.FileCloseAll(PjSaveType.pjSave); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-23T05:34:36.663

如果您的任务版本非常大，则值得创建一个字典，例如：`tasksDictionary<id, counter>`在程序的开头，然后在每个版本中，只需调用如下内容：`project.Tasks[tasksDictionary[id]].field = newValue`.

# java - JVM SafePointStatistics - 任何人都可以帮助解释它

> ID：16178074
> 
> 赞同：7
> 
> 时间：2013-04-23T19:58:43.997
> 
> 标签：java, performance, garbage-collection, jvm, locking

在启用 时`+XX:PrintSafePointStatistics`，我看到`stdout`以下格式的转储。任何人都可以帮我解释列名或`JVM`正确解释这一点的指南吗？`JVM`规范指南似乎根本没有涵盖标题的含义及其解释。

```
@400000005175823c18c9d534 16762.525: GenCollectForAllocation          [     973          0              0    ]      [     0     0     0     5    53    ]  0
@400000005175823c18c9f08c 16762.586: CMS_Initial_Mark                 [     973          0              1    ]      [     0     0     0     4    24    ]  0
@400000005175823c18ca0414 16774.619: GenCollectForAllocation          [     975          0              0    ]      [     0     0     0     5    77    ]  0
@400000005175823c18ca0be4 16777.387: CMS_Final_Remark                 [     975          0              0    ]      [     0     0     0     5    18    ]  0
@400000005175823c18ca273c 16786.080: GenCollectForAllocation          [     974          0              1    ]      [     0     0     0     5     0    ]  0
@400000005175823c18ca2f0c          vmop                    [threads: total initially_running wait_to_block]    [time: spin block sync cleanup vmop] page_trap_count
@400000005175823c18ca3eac 16786.086: GenCollectFull                   [     974          0              2    ]      [     0     0     0     4    89    ]  0
@400000005175823c18ca5a04 16798.393: GenCollectForAllocation          [     974          1              1    ]      [     2     0     3     5    57    ]  1
@400000005175823c18ca69a4 16811.539: GenCollectForAllocation          [     975          2              1    ]      [     1     0     1     5    61    ]  1
@400000005175823c18ca7944 16824.551: GenCollectForAllocation          [     973          5              5    ]      [    14     0    15     5     0    ]  5
@400000005175823c18ca88e4 16824.572: GenCollectForAllocation          [     973          1              0    ]      [     0     0     0     4    60    ]  0
@400000005175823c18ca9884 16824.639: GenCollectFull                   [     973          0              4    ]      [     0     0     0     5    49    ]  0
@400000005175823c18caa054 16837.516: GenCollectForAllocation          [     973          2              2    ]      [     3     0     3     5    31    ]  2
@400000005175823c18cab7c4 16840.902: BulkRevokeBias                   [     974          0              0    ]      [     0     0     0     5     6    ]  0
@400000005175823c18cacf34 16848.729: GenCollectForAllocation          [     973          3              4    ]      [     4     0     5     4    55    ]  3
@400000005175823c18cad704 16848.795: CMS_Initial_Mark                 [     973          0              2    ]      [     0     0     0     4    24    ]  0
@400000005175823c18caf25c 16853.969: GenCollectForAllocation          [     976          1              2    ]      [     2     0     3     5    92    ]  1
@400000005175823c18cafa2c 16863.975: CMS_Final_Remark                 [     977          0              0    ]      [     0     0     0     5   352    ]  0
@400000005175823c18cb1584 16867.770: GenCollectForAllocation          [     976          0              0    ]      [     0     0     0     5   114    ]  0
@400000005175823c18cb290c 16881.496: GenCollectForAllocation          [     976          3              2    ]      [     4     0     4     5    60    ]  2
@400000005175823c18cb30dc 16891.580: RevokeBias                       [     976          0              0    ]      [     0     0     0     5     0    ]  0
@400000005175823c18cb4c34 16893.035: GenCollectForAllocation          [     976          1              1    ]      [    10     0    11     4    58    ]  1
@400000005175823c18cb5fbc 16904.123: GenCollectForAllocation          [     976          2              2    ]      [     5     0     5     5    65    ]  2
@400000005175823c18cb678c 16911.201: no vm operation                  [     975          0              0    ]      [     0     0     0     5     0    ]  0
@400000005175823c18cb82e4 16916.963: GenCollectForAllocation          [     973          0              0    ]      [     0     0     0     5    56    ]  0
@400000005175823c18cb966c 16927.307: GenCollectForAllocation          [     973          0              0    ]      [     0     0     0     4     0    ]  0
@400000005175823c18cba60c 16927.312: GenCollectForAllocation          [     973          1              1    ]      [     0     0     0     4    54    ]  0
@400000005175823c18cbb1c4 16927.373: CMS_Initial_Mark                 [     973          0              7    ]      [     0     0     0     5    25    ]  0
@400000005175823c18cbc934 16927.984: BulkRevokeBias                   [     975          1              0    ]      [     0     0     0     5     7    ]  0
@400000005175823c18cbe0a4 16938.088: GenCollectForAllocation          [     975          0              0    ]      [     0     0     0     5     0    ]  0
@400000005175823c18cbe874 16938.096: GenCollectForAllocation          [     975          0              1    ]      [     0     0     0     4    77    ]  0
@400000005175823c18cc0f84 16938.178: GenCollectFull                   [     975          1              4    ]      [     0     0     0     4    76    ]  0
@400000005175823c18cc136c 16941.404: CMS_Final_Remark                 [     975          0              0    ]      [     0     0     0     5    17    ]  0
@400000005175823c18cc230c 16948.600: GenCollectForAllocation          [     975          0              0    ]      [     0     0     0     5    33    ]  0
@400000005175823c18cc2ec4 16959.957: GenCollectForAllocation          [     975          1              1    ]      [     5     0     5     5    56    ]  1
@400000005175823c18cc4a1c 16969.805: GenCollectForAllocation          [     975          1              2    ]      [    11     0    12     5    55    ]  1
@400000005175823c18cc55d4          vmop                    [threads: total initially_running wait_to_block]    [time: spin block sync cleanup vmop] page_trap_count
@400000005175823c18cc618c 16969.879: CMS_Initial_Mark                 [     975          1              3    ]      [     0     0     0     4    22    ]  0
@400000005175823c18cc712c 16981.455: GenCollectForAllocation          [     976          1              1    ]      [     8     0     8     4    76    ]  1
@400000005175823c18cc80cc 16984.811: CMS_Final_Remark                 [     976          1              1    ]      [     2     0     3     5    23    ]  1
@400000005175823c18cc983c 16992.365: GenCollectForAllocation          [     975          5              5    ]      [    23     0    23     4    95    ]  5
@400000005175823c18cca3f4 17005.029: GenCollectForAllocation          [     975          0              0    ]      [     0     0     0     5    55    ]  0
@400000005175823c18ccbb64 17013.074: BulkRevokeBias                   [     976          0              0    ]      [     0     0     0     4     8    ]  0
@400000005175823c18ccc71c 17015.502: GenCollectForAllocation          [     975          0              0    ]      [     0     0     0     5    57    ]  0
@400000005175823c18ccde8c 17025.293: GenCollectForAllocation          [     975          0              0    ]      [     0     0     0     5    52    ]  0
@400000005175823c18ccf214 17034.678: GenCollectForAllocation          [     973          3              3    ]      [    15     0    16     4    45    ]  3
@400000005175823c18ccfdcc 17045.910: GenCollectForAllocation          [     973          0              0    ]      [     0     0     0     5    54    ]  0
@400000005175823c18cd153c 17056.883: GenCollectForAllocation          [     973          1              2    ]      [     1     0     1     5     0    ]  1 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T22:07:49.803

我在 Java Performance book 中找到了一个简短的解释：

> 每行包含自 VM 启动安全点操作以来发生的时间、VM 操作的类型、VM 中当前活动的线程数、当前线程数、当前初始运行的线程数、当前等待阻塞的线程数、数量线程花费在旋转上的时间（毫秒）、线程花费阻塞的时间（毫秒）、线程同步花费的时间（毫秒）、线程花费的时间（毫秒）、VM 操作花费的时间（毫秒）以及页面陷阱的数量。
> 
> 在输出的末尾打印一个摘要，总结不同安全点操作的数量以及以毫秒为单位的最大同步时间以及花费最长时间的安全点操作。
> 
> 对于强调低延迟并希望将延迟事件与由于安全点操作导致的 HotSpot VM 引起的延迟相关联的应用程序很有用。

另见`-XX:+PrintGCApplicationStoppedTime`和`-XX+PrintGCApplicationConcurrentTime`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T20:02:35.847

在 PrintSafepointStatistics 上试试[这个页面](http://mail.openjdk.java.net/pipermail/hotspot-gc-use/2011-August/000897.html)。我认为通过进一步的研究，您会发现对此有用的东西。

# grails - Grails 1.3.7 -Where's the build.xml?

> ID：16178075
> 
> 赞同：1
> 
> 时间：2013-04-23T19:58:48.137
> 
> 标签：grails, ant, ivy

This is Grails 1.3.7, and not Grails 2.x. Very important because there are all sorts of nice features in Grails 2.x that would really help us out, but don't seem to be available in this version. The developer is attempting to upgrade, but it might take a while.

Straight to the heart of the issue. We build with Jenkins and Ivy. We have our grails app using our local Maven repository, but it uses the default `$HOME/.ivy/cache` for the cache. We need some way to redefine it.

We found this tidbit in the 1.3.7 documentation which seems to give us what we may need:

> ## 4.5 Ant and Maven
> 
> [...]
> 
> ### Ant Integration
> 
> When you create a Grails application via the create-app command, ***Grails automatically creates an Apache Ant build.xml file for you*** containing the following targets:

Sounds great. However, when I run `grails create-app foo`, I could not find a `build.xml` file in my `foo` project.

Is there something I need to do in order to create this `build.xml` that the documentation isn't telling me?

And, yes. I know about `grails.dependency.cache.dir`, but that's not introduced to Release 2.0.4.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T03:42:10.727

您可以尝试使用该命令`grails integrate-with --ant`来生成`build.xml`. [在此处](http://grails.org/doc/1.3.7/ref/Command%20Line/integrate-with.html)找到特定于 Grails 1.3.7 的详细信息。

# html - Removing blue outline/border from image anchor IE

> ID：16178078
> 
> 赞同：26
> 
> 时间：2013-04-23T19:58:59.750
> 
> 标签：html, internet-explorer, outline

To start off, I don't even know what this is. I tried `text-decoration: none`, `border: none`, `outline: 0`, and nothing seems to work? My CSS file is working all right, so it's not that?

Here's a picture: [http://i38.tinypic.com/rbgv3k.jpg](http://i38.tinypic.com/rbgv3k.jpg)

```
<div id="links">
  <span id="user"><a id="link" href="register.php"><img src="images/user.png"/></a></span>
  <span id="follow"><a id="link" href="https://twitter.com/itsybitsycom"><img src="images/follow.png"/></a></span>
  <span id="about"><a id="link" href="about.html"><img src="images/about.png"/></a></span>
  <span id="stats"><a id="link" href="profile.php"><img src="images/stats.png"/></a></span>
</div> 
```

CSS

```
#link {
  text-decoration:none;
  border:0;
  outline:none;
} 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-23T20:05:51.897

try adding following to your CSS

```
img{ border:0 } 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-23T20:05:41.217

IE adds a border around images if they’re the child of an anchor. You can remove this by setting the border to none:

```
a img {
      border: none;
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-09-12T09:04:31.423

```
a{
    outline: none !important;
 } 
```

为我工作。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-23T20:05:25.710

You need to add the CSS to the image, not to the link. Instead of `#link`, you need to use `#link img` as the selector.

Then `border:none;` should work for you.

```
#link img {
    border: none;
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-08-22T06:36:29.977

```
#link img a
 {
 border:0;
 outline:none;
 } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-23T20:01:03.093

你应该可以用这个 CSS 做到这一点：

```
border-style: none; 
```

# php - 如何防止 null 在 Internet Explorer 中显示？

> ID：16178079
> 
> 赞同：0
> 
> 时间：2013-04-23T19:59:01.573
> 
> 标签：php, javascript, html, null, echo

以下是我的 php 页面的一部分，其中我根据天气显示一个变量，或者它是否具有值。这在 Firefox 和 Chrome 中运行良好，但在 Internet Explorer 中，当变量没有值而不是像 FF 或 Chrome 中那样为空白时，会显示“null”。有没有办法来解决这个问题？

```
<tr>
 <td>Track</td>
 <td><?php echo $trackResult. '&acute;<br/>';
    if($trackResultOne != NULL){ echo $trackResultOne."&acute;<br/>";}
    if($trackResultTwo != NULL){ echo $trackResultTwo."&acute;";}
    ?></td>
</tr> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-12-03T19:01:44.877

不幸的是，您将需要使用 IF 的 ELSE 部分来检索空白 ('')，IE 会自动将真正的 null 转换为字符串 'null'。

问候，

巴勃罗

# java - 如何将信息从我的 Overridden ActionListener 方法发送到 Java 中的 main 方法？

> ID：16178080
> 
> 赞同：0
> 
> 时间：2013-04-23T19:59:03.937
> 
> 标签：java, swing, actionlistener, overriding

基本上，我是一个新手，正在创建一个程序，它给出问题、随机化正确答案的索引，然后在 JFrame 中显示问题。我可以轻松地执行添加到此 ActionListener 方法的任何任务：

```
@Override
    public void actionPerformed(ActionEvent e) {
        if (e.getActionCommand().equals("1")) {
            System.out.println("whatever");
            JOptionPane.showMessageDialog(null, "correct!", 
                "", JOptionPane.PLAIN_MESSAGE);
        } else {
        JOptionPane.showMessageDialog(null, "wrong!", 
                "", JOptionPane.PLAIN_MESSAGE);
    }
} 
```

程序从 main 方法中给出的 setActionCommand 获取“1”，但我希望 Listener 返回到 main 方法，当单击正确的单选按钮时，也会显示下一个问题。主要方法如下：

```
while (therearestillquestionsleft) { /* do everything */ } 
```

所以我需要程序在循环中等待，直到点击正确的答案。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:45:10.280

正如其他人所指出的，在循环中等待不是处理等待 Java 中的 GUI 用户输入的方法。

您可以改为重新设计您的程序，使其看起来像这样：

```
public static void main(String args[]) {
    // [...]
    nextQuestion();
}

public static void nextQuestion() {
    if (questionsLeft) {
        // "do everything", i.e. show next question
    }
} 
```

然后，您可以简单地`nextQuestion()`从您的`ActionListener`.

# java - Convert Java loop to Scala

> ID：16178083
> 
> 赞同：3
> 
> 时间：2013-04-23T19:59:15.833
> 
> 标签：java, scala

I'm attempting to convert a Selection sort from Java to Scala and im unsure how to convert this loop to Scala :

```
for (int j = i + 1; j < N; j++) 
```

Here is a larger Java code sample and its Scala equivalent :

Java :

```
sort(Comparable[] a)
{
int N = a.length;
for (int i = 0; i < N; i++)
{
   int min = i
   for (int j = i + 1; j < N; j++)
} 
```

Scala :

```
 def sort(a : Array[Ordered[Any]]) = {
    var N = a.length

    for (i <- 0 until N) {
        var min = i

        for(j <- until j < N){

        }
    }

  } 
```

How do I convert the inner loop to Scala ?

```
for (int j = i + 1; j < N; j++) 
```

I dont know how to do assignment while iterating...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T20:02:48.657

干得好：

```
def sort(a : Array[Ordered[Any]]) = {
    val N = a.length

    for (i <- 0 until N) {
        var min = i

        for(j <- i + 1 until N){

        }
    }

  } 
```

此外，在 Scala 中，您可以在内部定义值以进行理解，并将多个块合并为一个：

```
def sort(a : Array[Ordered[Any]]) = {
        val n = a.length

        for(i <- 0 until n; min = i; j <- i + 1 until n) { // min here is val, not var
          // do something with i, j and min
        }
} 
```

有时，这可能会导致代码更清晰

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T20:10:33.353

不幸的是，Scala 的循环标准非常慢（尤其是旧版本）。

另一种选择是经典的 while 循环，即使它不是很清楚：

```
 def sort(a : Array[Ordered[Any]]) = {
    val N = a.length

    var i = 0;
    while (i < N) {
        var min = i

        var j = i + 1;
        while (j < N) {
          j += 1;
        }
        i += 1;
    }

} 
```

或尾递归函数：

```
 def sort(a : Array[Ordered[Any]]) = {
    val N = a.length

    def l1(i: Int){
      def l2(j: Int, min: Int){
        if (j < N) 
          l2(j+1, min)
      }
      if (i < N) {
         l2(i+1, i);
         l1(i+1);
      }
    }
} 
```

或者 spire 的 cfor：

```
 def sort(a : Array[Ordered[Any]]) = {
    val N = a.length

    cfor(0)(_ < N, _ + 1) { i => 
        var min = i
        cfor(i+1)(_ < N, _ + 1) { j => 
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T00:56:16.907

使用 for 循环（不完全是功能/惯用的 scala 方式）进行迭代将非常类似于 java 代码。这会让你度过难关。

```
def sort(a: Array[Comparable]) {
  val N = a.length
  for (
    i <- 0 until N;
    min = i;
    j <- (i + 1) until N
  ) {
    // more code..
  }
} 
```

这是您的Java代码供参考：

```
sort(Comparable[] a)
{
int N = a.length;
for (int i = 0; i < N; i++)
{
   int min = i
   for (int j = i + 1; j < N; j++)
} 
```

# python - 轴隐藏的标记

> ID：16178085
> 
> 赞同：1
> 
> 时间：2013-04-23T19:59:16.940
> 
> 标签：python, matplotlib, markers

我必须绘制的一些数据具有坐标，例如 (20, **0** )、(10, **0** ) 等......基本上一些点属于 x 轴。

问题是，这些点被轴隐藏了；即标记位于线的后面，因此无法正确看到。

这是我的图的一个例子：http: [//i.stack.imgur.com/FNcob.png](http://i.stack.imgur.com/FNcob.png)

有人有解决这个问题的想法吗？我没主意了……

谢谢。

维克多

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T20:27:41.870

默认情况下，Matplotlib“捕捉”绘图限制为“整体”（2、5、10、100 等的因子）数字。这通常意味着您的数据可能会出现在绘图的边界上。

`ax.margins`允许您在计算绘图的自动缩放之前添加填充因子。这是避免绘图边界上的点问题的快速方法。

作为问题的一个简单示例：

```
import matplotlib.pyplot as plt

x, y = [0, 10, 20], [10, 0, 0]
fig, ax = plt.subplots()
ax.plot(x, y, 'ko')
plt.show() 
```

![在此处输入图像描述](https://i.stack.imgur.com/4WOVy.png)

还有一个简单的解决方案：

```
import matplotlib.pyplot as plt

x, y = [0, 10, 20], [10, 0, 0]
fig, ax = plt.subplots()
ax.plot(x, y, 'ko')

# Pad by 5% of the data range before autoscaling:
ax.margins(0.05)

plt.show() 
```

![在此处输入图像描述](https://i.stack.imgur.com/PSqMH.png)

# c#-4.0 - 来自 C#/.NET 的 MQ 统计信息监控

> ID：16178088
> 
> 赞同：3
> 
> 时间：2013-04-23T19:59:24.127
> 
> 标签：c#-4.0, ibm-mq

我们与之交易 MQ 数据的供应商之一有一个显示以下内容的监视器：

![在此处输入图像描述](https://i.stack.imgur.com/10Zrt.jpg)

我自己编写了一个 C# 监视器，它每 x 分钟拍摄一次队列深度的快照，但我想知道如何获取入队和出队的消息数。在我看来，这两个统计数据具有不同的性质。对我来说，队列深度是在给定的时间点。上面的报告实际上显示了 5 分钟时间段的“高 Q 深度”。

有人可以指出 C#/.NET MQ API 指南中有关如何收集这些统计信息的内容吗？如果没有，有什么技巧或工具可以获得这些统计数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T05:23:12.940

MQ .NET 在命名空间下对 PCF 有未记录的“支持” `IBM.WMQ.PCF`。有类`PCFAgent, PCFMessage`之类的。这些可用于读取 PCF 消息。

对于静态监控，您可以在队列上打开“队列静态”。如此处所述[，](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.doc/mo13370_.htm)队列静态消息包括诸如从队列中放置或检索的消息数量之类的信息。

示例代码：此代码向队列管理器查询名称为 Q1 的队列。

```
 public void InquireQmgr()
    {
        try
        {
            PCFMessageAgent messageAgent = new PCFMessageAgent("QM");

            PCFMessage pcfMsg = new PCFMessage(MQC.MQCMD_INQUIRE_Q);
            pcfMsg.AddParameter(MQC.MQCA_Q_NAME, "Q1");

            PCFMessage[] pcfResponse = messageAgent.Send(pcfMsg);
            int pcfResponseLen = pcfResponse.Length;

            for (int pcfResponseIdx = 0; pcfResponseIdx < pcfResponseLen; pcfResponseIdx++) 
            {
                PCFParameter [] parameters = pcfResponse[pcfResponseIdx].GetParameters();
                foreach(PCFParameter pm in parameters)
                {
                    Console.WriteLine(pm.Parameter +  " - " + pm.GetValue());
                }           
            }
            messageAgent.Disconnect();
        }
        catch(MQException ex)
        {
            Console.Write(ex);
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T23:55:23.937

您看到的显示使用（名称不佳）[重置队列统计](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.doc/pc13860_.htm)信息PCF 命令。我将其称为 WMQ 的“量子命令”，因为观察值的行为会改变值。

我看到 .Net 手册将 PCF 的值记录为消息格式。但是我对 .Net 类并不是很熟悉，也不知道它们是否原生支持 PCF，或者您是否必须拼凑一些东西。（也许沙市会回应。）

因为查询队列统计信息会将它们重置为零，所以如果不止一件事情在进行这些查询，您会得到不可预测的结果。我通常推荐的是让后台任务执行查询并保存数据。然后表示层查询数据库以获取统计信息，而不是直接查询 QMgr。

# arrays - 我将如何创建一个包含多个精灵并将它们定位在屏幕上的数组？

> ID：16178089
> 
> 赞同：0
> 
> 时间：2013-04-23T19:59:29.380
> 
> 标签：arrays, scala, arraylist, foreach

我正在使用 Scala 和 FANG (fangengine.org) 制作一个版本的砖块断路器/突破。我想要 3 排砖，每排有 8 块砖。我将如何创建一个可以容纳所有这些积木的阵列，然后我将如何将积木放置在屏幕上？

我能够创建一个砖，但我不知道如何制作多个并将它们放入一个数组中：

```
 var brick: RectangleSprite = new RectangleSprite(2,1) 
```

(2,1) 是矩形的大小比。

定位可以用for循环完成吗？我该怎么做？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:31:47.423

```
val bricks = for(i<-0 until 10) yield new RectangleSprite(i,i) 
```

# api - 不幸的是，Google Maps API Demos 已停止 - Google Maps Android API v2

> ID：16178099
> 
> 赞同：0
> 
> 时间：2013-04-23T20:00:02.827
> 
> 标签：api, android-maps-v2

我对 Google Maps Android API v2 有疑问。每次我尝试在设备甚至模拟器上打开应用程序时，都会显示此消息

**不幸的是，Google Maps API Demos 已停止**

我制作了一个视频来解释我所做的每一个步骤

[www.youtube.com/watch?v=WUmlu3CNOSo](http://www.youtube.com/watch?v=WUmlu3CNOSo)

实际上我在互联网上尝试了很多教程，我也尝试根据[谷歌的说明](https://developers.google.com/maps/documentation/android/start)自己编码，这是在 Eclipse 上显示的错误

[www.ahmadssb.com/ttv2541/com.example.mapdemo.txt](http://www.ahmadssb.com/ttv2541/com.example.mapdemo.txt)

请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-22T12:51:02.410

简单的回答：

将您的“订单和导出”列表（[项目]属性，Java构建路径）更改为以下顺序；src, gen, Android XXX, Android Dependencies, [你可能拥有的任何外部库]。保留 src 和 gen 检查。尝试检查或取消检查其他人，直到它起作用。

背景：

我在上个月左右开始出现这些类型的错误，因此可能与新版本的 ADT 或其他东西有关。经过大量挖掘后，我糊里糊涂地找到了解决错误的答案。

ClassDefNotFound 错误是因为 Eclipse 没有使用您的 APK 导出库，因此在设备上运行时，它们不存在。要解决此问题，请确保检查正确的内容以便将它们导出。不幸的是，这一步也让我感到困惑，所以我只能说用不同的组合检查每一个。

我遇到的下一个错误类似于 Multiple Dex 文件。我猜有一些冲突，因为我检查了 Android Google APIs 4.2.2 和 Android 依赖项。我假设有两个方法或类的实例，它不知道使用哪个。取消选中 Android Dependencies 解决了它。

希望这对您有所帮助，我已经浪费了一天的时间，所以希望它可以节省其他人的时间！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T07:35:51.303

我也是，

但是，我解决了

code.google.com/apis/console/#project:xxxxxx > 服务 > 检查 Google Play Android Developer API

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-28T01:26:26.390

如果您转到属性 -> Java 构建路径 -> 订购和导出，是否检查了“android-support-v4.jar”？

# command-line - Tectia 命令行 - 根据上传/修改日期从服务器下载文件

> ID：16178100
> 
> 赞同：2
> 
> 时间：2013-04-23T20:00:13.187
> 
> 标签：command-line, vbscript, download, sftp

我的服务器机器有一个 Unix 操作系统。我可以使用 Tectia 的 scpg3 命令行将文件从我的 Unix 服务器下载到本地（Windows）机器。现在，我只想复制那些在特定日期上传（修改日期）的文件。

我在我的 VBScript 中使用 scpg3 的以下命令从服务器文件夹下载文件。它正在复制所有文件，但现在我想复制特定日期的文件。

```
Set oFTPScriptFSO = CreateObject("Scripting.FileSystemObject")

ioFTPScriptShell.Run "%comspec% /c scpg3 " & sUsername & "@" & remoteServer & ":" & sRemotePath & " " & strDirectory, 1, TRUE 
```

珍惜你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:41:03.323

我不认为`scpg3`可以做到这一点。

如果您使用`scpg3`SFTP 协议，则可以改用[WinSCP](https://winscp.net/)：

```
ioFTPScriptShell.Run "%comspec% /c winscp.com /command ""option batch abort""" _
  & " ""option confirm off""" _
  & " ""open sftp://" & sUsername & "@" & remoteServer & """" _
  & " ""get -filemask=*>=2013-04-23<2013-04-24 " & sRemotePath _
  & " " & strDirectory & """", 1, TRUE 
```

注意命令的`-filemask=*>=2013-04-23<2013-04-24`开关`get`。

有关详细信息，请参阅：
[https ://winscp.net/eng/docs/guide_automation](https://winscp.net/eng/docs/guide_automation)
[https://winscp.net/eng/docs/file_mask#size_time](https://winscp.net/eng/docs/file_mask#size_time)

或者，您可以考虑直接从您的 VBScript 中使用 WinSCP .NET/COM 库：
[https ://winscp.net/eng/docs/library](https://winscp.net/eng/docs/library)
[https://winscp.net/eng/docs/library_com_wsh](https://winscp.net/eng/docs/library_com_wsh)

*（我是WinSCP的作者）*

# android - Android：具有比例宽度的对话框

> ID：16178112
> 
> 赞同：0
> 
> 时间：2013-04-23T20:01:21.153
> 
> 标签：android, dialog

如何在 Android（基于表格布局）中创建一个宽度与屏幕宽度成比例的对话框（例如 60%）？下面的代码占据了屏幕的所有宽度。

```
 <?xml version="1.0" encoding="utf-8"?>
    <TableLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content">
        <TableRow
                android:layout_width="fill_parent"
                android:layout_height="fill_parent">
            <ImageView
                    android:id="@+id/image"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_margin="5dp"/>
            <TextView
                    android:id="@+id/text"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:textColor="#FFF"
                    android:layout_margin="5dp"/>
        </TableRow>
        <TableRow
                android:layout_width="fill_parent"
                android:layout_height="fill_parent">
            <Button
                    android:id="@+id/dialogButtonOK"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:text="Ok"
                    android:gravity="center"
                    android:layout_below="@+id/text"
                    android:layout_span="2"/>
        </TableRow>
    </TableLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:05:51.863

as far as i know it isn't possible but maybe this might work; in your activity try to access your xml layout- TableLayout tl=(TableLayout)findViewById(...) and try to get your devices screen width

```
Display display = getWindowManager().getDefaultDisplay(); 
int width=display.getWidth(); 
```

and then set some value based on that width via

```
rl.setLayoutParams(new LayoutParams(width*0.7,LayoutParams.WRAP_CONTENT(or something else) )); 
```

# c# - .Net 实体框架到 CSV

> ID：16178114
> 
> 赞同：2
> 
> 时间：2013-04-23T20:01:29.620
> 
> 标签：c#, linq, entity-framework-5, export-to-csv

我正在使用最新的实体框架和 DBContext。我有一个要转换为逗号分隔值的结果集。我在 VB [DataTable to CSV](http://consciouscipher.wordpress.com/2012/07/09/166/) extract 中对 DataTables 做了类似的事情。我有 QuoteName 方法工作。我还得到了使用 foreach 工作的 GetCSV 方法的派生。问题是它比 DataTable 的可比较代码慢很多。所以我希望有人能提出一些建议。

```
 public static string GetCSV(this IQueryable entity)
    {
        if (entity == null)
        {
            throw new ArgumentNullException("entity");
        }
        Type T = entity.ElementType;
        var props = T.GetProperties(BindingFlags.Public | BindingFlags.Instance);
        string s = string.Empty;
        int iCols = props.Count();

        try
        {
            s += string.Join(",", (from int ii in Enumerable.Range(0, iCols)
                                   select props[ii].Name.QuoteName("[]")).ToArray());
            s += Environment.NewLine;
            foreach (var dr in entity)
            {
                s += string.Join(",", (from int ii in Enumerable.Range(0, iCols)
                                       select
                                           props[ii].GetValue(dr)
                                                    .ToString()
                                                    .QuoteName("\"\"", ",")).ToArray());
                s += Environment.NewLine;
            }
            s = s.TrimEnd(new char[] { (char)0x0A, (char)0x0D });
        }
        catch (Exception)
        {

            throw;
        }
        return s;
    } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-23T20:19:56.793

查看 nuget 包 CsvHelper ( [http://nuget.org/packages/CsvHelper/](http://nuget.org/packages/CsvHelper/) )。

[这是来自https://github.com/JoshClose/CsvHelper/wiki/Basics](https://github.com/JoshClose/CsvHelper/wiki/Basics)的使用示例

```
using (var csv = new CsvWriter( new StreamWriter( "Actors.csv" ) )) 
{
    csv.WriteRecords( actorsList );
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T20:14:15.670

不要使用字符串来创建文件。尝试使用 StringBuilder 类 ( [http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx) )

字符串是不可变的对象——也就是说，一旦创建了字符串，就无法更改。每次更改字符串（例如连接它）时，实际上都是在创建一个全新的字符串。在这里使用字符串是非常低效的。

相反，创建一个 stringbuilder 对象：

```
StringBuilder builder = new StringBuilder();

builder.Append("my data"); 
```

最后，只需调用

```
builder.ToString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T13:35:25.863

在这方面我得到了我弟弟的一些帮助。他说也要使用 StringBuilder 。

这是代码答案：

```
 /// <summary>
    /// Quotes a string using the following rules:
    /// <list>
    /// <listheader>Rules</listheader>
    /// <item>if the string is not quoted and the string contains the separator string</item>
    /// <item>if the string is not quoted and the string begins or ends with a space</item>
    /// <item>if the string is not quoted and the string contains CrLf</item>
    /// </list>
    /// </summary>
    /// <param name="s">String to be quoted</param>
    /// <param name="quote">
    /// <list>
    /// <listheader>quote characters</listheader>
    /// <item>if len = 0 then double quotes assumed</item>
    /// <item>if len = 1 then quote string is doubled for left and right quote characters</item>
    /// <item>else first character is left quote, second character is right quote</item>
    /// </list>
    /// </param>
    /// <param name="sep">separator string to check against</param>
    /// <returns></returns>
    /// <remarks></remarks>
    public static string QuoteName(this string s, string quote = null, string sep = ",")
    {
        quote = quote == null ? "" : quote;
        switch (quote.Length)
        {
            case 0:
                quote = "\"\"";
                break;
            case 1:
                quote += quote;
                break;
        }
        // Fields with embedded sep are quoted
        if ((!s.StartsWith(quote.Substring(0, 1))) && (!s.EndsWith(quote.Substring(1, 1))))
            if (s.Contains(sep))
                s = quote.Substring(0, 1) + s + quote.Substring(1, 1);
        // Fields with leading or trailing blanks are quoted
        if ((!s.StartsWith(quote.Substring(0, 1))) && (!s.EndsWith(quote.Substring(1, 1))))
            if (s.StartsWith(" ") || s.EndsWith(" "))
                s = quote.Substring(0, 1) + s + quote.Substring(1, 1);
        // Fields with embedded CrLF are quoted
        if ((!s.StartsWith(quote.Substring(0, 1))) && (!s.EndsWith(quote.Substring(1, 1))))
            if (s.Contains(System.Environment.NewLine))
                s = quote.Substring(0, 1) + s + quote.Substring(1, 1);
        return s;
    }

    public static string GetCSV(this IQueryable entity)
    {
        if (entity == null)
        {
            throw new ArgumentNullException("entity");
        }
        Type T = entity.ElementType;
        var props = T.GetProperties(BindingFlags.Public | BindingFlags.Instance);
        var sb = new StringBuilder();
        int iCols = props.Count();

        try
        {
            sb.Append(string.Join(",", Enumerable.Range(0, iCols).Cast<int>().
                Select(ii => props[ii].Name.QuoteName("[]")).ToArray()));

            foreach (var dr in entity)
            {
                sb.AppendLine();
                sb.Append(string.Join(",", Enumerable.Range(0, iCols).Cast<int>().
                    Select(ii => props[ii].GetValue(dr).
                        ToString().QuoteName("\"\"", ",")).ToArray()));
            }
        }
        catch (Exception ex)
        {

            throw;
        }
        return sb.ToString();
    }
} 
```

我希望这对其他人有帮助。

# java - Java EE“等待”概念

> ID：16178118
> 
> 赞同：0
> 
> 时间：2013-04-23T20:01:33.690
> 
> 标签：java, multithreading, jakarta-ee, glassfish

需要“等待”数据的 ejb 的最佳解决方案是什么？我有一个 ejb 去检查数据库表中的一些数据，如果数据不存在，它需要等待 x 秒并再次检查。我知道在 Java EE 规范中不建议使用 Thread.sleep/Thread.wait 和此类操作。然而，这个问题必须有一个现实的解决方案。其他一些阅读建议您必须启动计时器或其他东西，但是我确实需要阻止请求调用，直到该数据可用，这消除了计划或计时器解决方案。还有其他想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T20:09:19.783

您可以使用 EJB Timer 来执行此操作，但老实说，“轮询”数据是一种资源浪费。更好的方法是使用 JMS。您是否让数据的生产者将数据放入数据库中，然后将消息放入队列中。消息和数据库写入都将在同一个事务中一起提交。之后您所做的就是在 JMS 队列上设置一个侦听器，该侦听器在消息到达时触发。就这样，不需要“轮询”。

如果您需要具体示例，请告诉我，我可以稍微扩展一下答案。

# python - 使用 Python 求解具有矢量系数的非线性 ODE 方程组

> ID：16178125
> 
> 赞同：0
> 
> 时间：2013-04-23T20:01:42.450
> 
> 标签：python, math, system, ode, newtons-method

我需要为 y 解决下一个系统：

```
y''(x) + k(x)y'(x)(y(x)**3/4)+(y'(x)**1/4)=0 
```

是这样的：

```
i=1: y''(1) + k(1)y'(1)(y(1)**3/4)+(y'(1)**1/4)=0 

i=2: y''(2) + k(2)y'(2)(y(2)**3/4)+(y'(2)**1/4)=0

 .... 

i=N: y''(N) + k(N)y'(N)(y(N)**3/4)+(y'(N)**1/4)=0 
```

我基于两个脚本编写了一个 Python 程序。一个主程序和第二个 newton-jacobian 脚本，因为我使用的是牛顿迭代法，导致这个问题在 u 和 u' 处有 2 个边界条件

现在，我可以解决下一个问题：

```
y''(x) + k*y'(x)(y(x)**3/4)+(y'(x)**1/4)=0 , 
```

仅当 k=常数时！

在我的问题中，k 取决于 x，在程序中计算，有 N 个值。

有谁知道或可以建议一种方法来解决我插入 k 的上述非线性系统，并且我尝试在第二个牛顿求解器脚本中调用 k_function()，但我没有成功。它不承认它。

任何解决非线性方程模拟系统的人的建议都将受到欢迎！

# javascript - 如何从复杂对象中获取价值

> ID：16178131
> 
> 赞同：0
> 
> 时间：2013-04-23T20:01:57.950
> 
> 标签：javascript, loops

我正在尝试迭代`p`并选择一个网址

```
p = {
     "photos":[
         {"alt_sizes":[{"url":"img1.png"}]},
         {"alt_sizes":[{"url":"img2.png"}]}
     ]
} 
```

什么是最有效的获取方式`"url"`？

**编辑**：`"photos"`可以有两个以上的值，所以我需要*迭代*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T20:05:07.807

试试这个：

```
function forloop(){
    var arr = p.photos, url , array_of_urls = [];
    for(var i=0; i < arr.length; i++){
       url = arr[i].alt_sizes[0]['url'];
      array_of_urls .push(url);
    }
    console.log(array_of_urls, url)
    return url;
  }

var bigString = "something"+forloop()+"something"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T20:07:37.797

也可以使用 ECMAScript 5`forEach`而无需额外的库。

```
var urls = []
p.photos.forEach(function(e) {
    urls.push(e.alt_sizes[0]['url']);
});
console.log(urls); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-23T20:06:05.860

使用 $.each。一个[例子](http://jsfiddle.net/chauhangs/H9e7P/2/)

```
 $.each( obj, function( key, value ) {
 alert( key + ": " + value );

  if(typeof(value)=="object")
  {
    $.each( value, function( key, value ) {
         alert( key + ": " + value );
      });
  }
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-23T20:11:11.247

```
// loop through all properties of `p` (assuming that there might be other objects besides
// `photos` that might have the `url` property we are looking for)
for(i in p){
  // ensure the property is not on the prototype
  if (p.hasOwnProperty(i)) {
    // loop through the array
    for(j = p[i].length; j--;){
      // check that the `url` property is there
      if(typeof p[i][j].alt_sizes[0].url != "undefined"){
        // do something with the url propert - in this case, log to console
        console.log(p[i][j].alt_sizes[0].url)
      }
    }
  }
} 
```

# jax-ws - 如何删除从 wsimport 生成的标签请求？

> ID：16178137
> 
> 赞同：0
> 
> 时间：2013-04-23T20:02:14.973
> 
> 标签：jax-ws, wsimport

我需要从 wsimport 生成的请求中删除一个标签。在 SOAP UI 中，我有这个 xml 请求（我评论了这个标签以便它工作</get:l7OrderId-->）：

```
<get:GetFAOpenBalanceRequest>
     <get:ar7AccountIDInfoDt>
        <get:accountId>700001142</get:accountId>
        <!--Optional:-->
        <!--get:l7OrderId></get:l7OrderId-->
     </get:ar7AccountIDInfoDt>
  </get:GetFAOpenBalanceRequest> 
```

那么，我如何评论这个标签`<!--get:l7OrderId></get:l7OrderId-->`和`jax-ws`客户`wsimport`端？没有这个标签，这项服务对我有用。

谢谢你的帮助

# java - 带有 Tomcat7 的 Eclipse Juno Java EE IDE - ClassNotFoundException

> ID：16178146
> 
> 赞同：0
> 
> 时间：2013-04-23T20:02:45.937
> 
> 标签：java, jsp, tomcat7, buildpath

我安装并运行了一个 webapp，但每次尝试使用 JDBC 连接连接到 MySQL 数据库时，我都会收到 CLASSnotFOUNDexception。

mysql-java-connector jar 位于我的 WEB-INF/classes 以及 WEB-INF/lib 文件夹中。它也在 Eclipse 的构建路径上，但不知何故，jar 没有被部署。我也尝试将 jar 单独添加到构建路径中。我被困在这里好久了。

有人可以指导我如何部署 jar 吗？

这是我用来连接数据库的部分代码。

```
public class JdbcConnection {
    public Connection connection;

    public JdbcConnection(){
        String serverLocation = "";
        String db = "";
        String user = "";
        String password = "";

        try{
            InputStream in = JdbcConnection.class.getResourceAsStream("/props/database.properties") ;
            Properties props = new Properties();
            props.load(in);
            serverLocation = props.getProperty("serverLocation");
            db = props.getProperty("db");
            user = props.getProperty("user");
            password = props.getProperty("password");
            System.out.println(password + user + db + serverLocation);
           } 
        catch(Exception e){
            System.out.println("error" + e);
           }     

        createConnection(serverLocation, db, user, password);
    }

    public JdbcConnection(String serverLocation, String db, String user, String password){
        createConnection(serverLocation, db, user, password);
    } 
```

这是控制台中出现的错误。java.lang.ClassNotFoundException: com/mysql/jdbc/Driver

这是创建连接方法

```
public void createConnection (String serverLocation, String db, String user, String password){
    //register driver
    try {
        Class.forName("com.mysql.jdbc.Driver").newInstance();
    } catch (InstantiationException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } catch (IllegalAccessException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } catch (ClassNotFoundException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
    //              hostName = "jdbc:mysql://" + serverLocation+"/"+db+"?autoReconnect=true";
    String hostName = "jdbc:mysql://" + serverLocation+"/"+db+"?autoReconnect=true&useUnicode=yes&characterEncoding=UTF-8";
    try {
        connection = DriverManager.getConnection(hostName,user,password);
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:32:04.667

Tomcat 6.x 及更高版本要求您将所有 JDBC 驱动程序 JAR 放在其 /lib 目录中。

从 WEB-INF/classes 中删除它（无论如何，它在那里没有好处）和 WEB-INF/lib，重新部署你的 WAR，你将能够进入下一个错误。

相信我，你仍然做错了。如果你做得好，它会起作用。

我建议修改这个类并在没有 Eclipse 或 Tomcat 的情况下连接到 MySQL。如果你能做到这一点，就向上移动一步。

```
package persistence;

import java.sql.*;
import java.util.*;

/**
 * util.DatabaseUtils
 * User: Michael
 * Date: Aug 17, 2010
 * Time: 7:58:02 PM
 */
public class DatabaseUtils {
/*
    private static final String DEFAULT_DRIVER = "oracle.jdbc.driver.OracleDriver";
    private static final String DEFAULT_URL = "jdbc:oracle:thin:@host:1521:database";
    private static final String DEFAULT_USERNAME = "username";
    private static final String DEFAULT_PASSWORD = "password";
*/
/*
    private static final String DEFAULT_DRIVER = "org.postgresql.Driver";
    private static final String DEFAULT_URL = "jdbc:postgresql://localhost:5432/party";
    private static final String DEFAULT_USERNAME = "pgsuper";
    private static final String DEFAULT_PASSWORD = "pgsuper";
*/
    private static final String DEFAULT_DRIVER = "com.mysql.jdbc.Driver";
    private static final String DEFAULT_URL = "jdbc:mysql://localhost:3306/party";
    private static final String DEFAULT_USERNAME = "party";
    private static final String DEFAULT_PASSWORD = "party";

    public static void main(String[] args) {
        long begTime = System.currentTimeMillis();

        String driver = ((args.length > 0) ? args[0] : DEFAULT_DRIVER);
        String url = ((args.length > 1) ? args[1] : DEFAULT_URL);
        String username = ((args.length > 2) ? args[2] : DEFAULT_USERNAME);
        String password = ((args.length > 3) ? args[3] : DEFAULT_PASSWORD);

        Connection connection = null;

        try {
            connection = createConnection(driver, url, username, password);
            DatabaseMetaData meta = connection.getMetaData();
            System.out.println(meta.getDatabaseProductName());
            System.out.println(meta.getDatabaseProductVersion());

            String sqlQuery = "SELECT PERSON_ID, FIRST_NAME, LAST_NAME FROM PERSON ORDER BY LAST_NAME";
            System.out.println("before insert: " + query(connection, sqlQuery, Collections.EMPTY_LIST));

            connection.setAutoCommit(false);
            String sqlUpdate = "INSERT INTO PERSON(FIRST_NAME, LAST_NAME) VALUES(?,?)";
            List parameters = Arrays.asList("Foo", "Bar");
            int numRowsUpdated = update(connection, sqlUpdate, parameters);
            connection.commit();

            System.out.println("# rows inserted: " + numRowsUpdated);
            System.out.println("after insert: " + query(connection, sqlQuery, Collections.EMPTY_LIST));
        } catch (Exception e) {
            rollback(connection);
            e.printStackTrace();
        } finally {
            close(connection);
            long endTime = System.currentTimeMillis();
            System.out.println("wall time: " + (endTime - begTime) + " ms");
        }
    }

    public static Connection createConnection(String driver, String url, String username, String password) throws ClassNotFoundException, SQLException {
        Class.forName(driver);
        if ((username == null) || (password == null) || (username.trim().length() == 0) || (password.trim().length() == 0)) {
            return DriverManager.getConnection(url);
        } else {
            return DriverManager.getConnection(url, username, password);
        }
    }

    public static void close(Connection connection) {
        try {
            if (connection != null) {
                connection.close();
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    public static void close(Statement st) {
        try {
            if (st != null) {
                st.close();
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    public static void close(ResultSet rs) {
        try {
            if (rs != null) {
                rs.close();
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    public static void rollback(Connection connection) {
        try {
            if (connection != null) {
                connection.rollback();
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    public static List<Map<String, Object>> map(ResultSet rs) throws SQLException {
        List<Map<String, Object>> results = new ArrayList<Map<String, Object>>();
        try {
            if (rs != null) {
                ResultSetMetaData meta = rs.getMetaData();
                int numColumns = meta.getColumnCount();
                while (rs.next()) {
                    Map<String, Object> row = new HashMap<String, Object>();
                    for (int i = 1; i <= numColumns; ++i) {
                        String name = meta.getColumnName(i);
                        Object value = rs.getObject(i);
                        row.put(name, value);
                    }
                    results.add(row);
                }
            }
        } finally {
            close(rs);
        }
        return results;
    }

    public static List<Map<String, Object>> query(Connection connection, String sql, List<Object> parameters) throws SQLException {
        List<Map<String, Object>> results = null;
        PreparedStatement ps = null;
        ResultSet rs = null;
        try {
            ps = connection.prepareStatement(sql);

            int i = 0;
            for (Object parameter : parameters) {
                ps.setObject(++i, parameter);
            }
            rs = ps.executeQuery();
            results = map(rs);
        } finally {
            close(rs);
            close(ps);
        }
        return results;
    }

    public static int update(Connection connection, String sql, List<Object> parameters) throws SQLException {
        int numRowsUpdated = 0;
        PreparedStatement ps = null;
        try {
            ps = connection.prepareStatement(sql);

            int i = 0;
            for (Object parameter : parameters) {
                ps.setObject(++i, parameter);
            }
            numRowsUpdated = ps.executeUpdate();
        } finally {
            close(ps);
        }
        return numRowsUpdated;
    }
} 
```

# c# - 似乎无法从 kinect 打开音频流

> ID：16178150
> 
> 赞同：0
> 
> 时间：2013-04-23T20:02:57.743
> 
> 标签：c#, xna, kinect

我在访问 kinect 的音频流以在我的项目中用于语音控制时遇到问题。到目前为止，我还没有收到音频流的响应。我正在使用安装了最新的 kinect sdk 包的 xna。

我正在使用的代码来自 sdk 中使用 xna 中的语音控制的示例，但在控制台应用程序中。

没有触发任何侦听器事件，我认为这是由于某些原因导致音频流未启动？

任何帮助，将不胜感激。

这段代码在`InitializeKinect()`我的程序部分：

```
 // Obtain the KinectAudioSource to do audio capture
        KinectAudioSource source = kinectSensor.AudioSource;
        source.EchoCancellationMode = EchoCancellationMode.None; // No AEC for this sample
        source.AutomaticGainControlEnabled = false; // Important to turn this off for speech recognition
        source.Start();
        RecognizerInfo ri = GetKinectRecognizer();

        if (ri == null)
        {
            lol = "Could not find Kinect speech recognizer. Please refer to the sample requirements";
        }

        lol = "Using: {0}"+ ri.Name;

        // NOTE: Need to wait 4 seconds for device to be ready right after initialization

        using (var sre = new SpeechRecognitionEngine(ri.Id))
        {
            var colors = new Choices();
            colors.Add("Kinect");
            colors.Add("test center ");
            colors.Add("left");
            colors.Add("right");
            colors.Add("indirect controls");
            colors.Add("gesture control");
            colors.Add("exit application");

            var gb = new GrammarBuilder { Culture = ri.Culture };

            // Specify the culture to match the recognizer in case we are running in a different culture.                                 
            gb.Append(colors);

            // Create the actual Grammar instance, and then load it into the speech recognizer.
            var g = new Grammar(gb);
            sre.LoadGrammar(g);
            sre.SpeechHypothesized += new EventHandler<SpeechHypothesizedEventArgs>(sre_SpeechHypothesized);
            sre.SpeechRecognized += new EventHandler<SpeechRecognizedEventArgs>(sre_SpeechRecognized);
            sre.SpeechRecognitionRejected += new EventHandler<SpeechRecognitionRejectedEventArgs>(sre_SpeechRecognitionRejected);

            using (Stream s = source.Start())
            {

                sre.SetInputToAudioStream(
                    s, new SpeechAudioFormatInfo(EncodingFormat.Pcm, 16000, 16, 1, 32000, 2, null));
                sre.RecognizeAsync(RecognizeMode.Multiple);
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:12:16.067

这可能是你的问题。

```
using (var sre = new SpeechRecognitionEngine(ri.Id))
{
} 
```

当`using`到达块的末尾时，`sre`关闭。识别是异步的，因此该`using`块几乎会立即关闭。相反，尝试这样做，看看它是否有效。

```
var sre = new SpeechRecognitionEngine(ri.Id)
//... 
```

然后`sre.Dispose()`在更合适的时间打电话。

# c++ - C++：有很多对象

> ID：16178152
> 
> 赞同：2
> 
> 时间：2013-04-23T20:03:09.543
> 
> 标签：c++, class, object

所以，我有一个关于 C++ 的问题。假设我有一个游戏的敌人类。我希望能够（理论上）在我的游戏中拥有无限数量的敌人。所以我必须有每个类的多个实例，并且我需要能够分别访问这些实例。我是否必须拥有一个具有无限空间的敌人对象数组，并且我会使用 new 和 delete 运算符来创建和删除数组中的敌人？那么我需要一个变量来保存敌人的数量，对吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T20:05:15.610

使用`std::vector`. 它将根据需要自动分配更多内存。

标准库中还有其他容器会在需要时自动分配内存，例如`std::list`，`std::set`或`std::map`. 这些容器可能更适合特殊情况，但`std::vector`通常是最佳选择。这一切都取决于实施细节。

你可以像这样使用它：

```
#include <vector>

struct Enemy {
    //...
}

std::vector<Enemy> v;

Enemy e1, e2;
v.push_back(e1);
v.push_back(e2);

std::cout << "First enemy in vector: " << v[0]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T20:13:26.770

已经回答了什么样的数据结构的答案：

标准::向量

这还没有从游戏编程的角度得到解答，所以就这样吧。

如果您使用像 Vector 这样的数据结构而不考虑要存储的对象数量，您将很快遇到问题。

大多数游戏循环都会更新数组中的每个“角色”对象。如果您担心“无限”角色，您可能不想在游戏的更新功能中更新每个角色。

如果您只有几个字符或可管理的数量，那么 Vector 就可以了。

但是，如果您要拥有一个包含数百或数千个字符的世界。Vector 不再是您想要使用的数据结构。

在这种情况下，您将更适合称为四叉树（2d）或八叉树（3d）的东西。这些数据结构的解释超出了这个答案的范围。只要知道它们在游戏方面会更有效率。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T20:05:53.057

您可能想使用标准库中的容器。最好的开始可能是来自标准库的[vector 。](http://www.cplusplus.com/reference/vector/vector/)它就像一个数组，但会根据您添加到其中的项目数进行扩展。这样你就不会浪费任何空间。

根据您的具体要求，还有其他具有不同性能特征的容器。但是向量通常是一个很好的起点。[这](https://stackoverflow.com/questions/10699265/how-can-i-efficiently-select-a-standard-library-container-in-c11)是挑选标准容器的一个很好的参考。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T20:06:27.770

在 C++ 中，`std::vector<>`是用于动态调整大小数组的数据结构。我将从敌人的向量开始。

```
class Enemy { ... };

std::vector< Enemy > enemyCollection; 
```

`vector`数据结构将为您处理内存管理。请参阅[http://www.cplusplus.com/reference/vector/vector/](http://www.cplusplus.com/reference/vector/vector/)以供参考。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-23T20:06:32.400

这就是我们在 C++ 中使用容器的原因：vector、list、deque 和许多更专业的容器（例如 map、关联容器）。

它们能够根据需要增长和缩小，您可以轻松添加和删除项目。您使用哪一个取决于您的确切需求（查找复杂性、随机访问、插入复杂性......）。

正如其他人所提到的，如果您不习惯标准容器，向量可能是一个不错的起点，并且随着时间的推移，您将学会为正确的工作选择正确的容器。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-23T21:35:54.383

> 我是否必须拥有一组具有无限空间的敌方对象？

我会说这很可能是个**坏**主意。根据这些“敌人”的设计和性质，您可能不需要一直将所有这些“敌人”的所有数据都保存在内存中……当内存不足时，您的游戏会发生什么？

每个敌人的物体真的需要完整的物体吗？看一下享元设计模式。我猜你并不真的需要一次拥有所有这些。

与单个敌人字面上对应的敌人类实例的概念可能是您错误的地方。

其他潜在模式包括代理和原型。

> 我会使用 new 和 delete 运算符来创建和删除数组中的敌人吗？

取决于您的实施。如果你 malloc/new 你必须释放/删除。这是微不足道的，与您放入对象的容器无关，而是取决于创建过程。

请记住，如果您在游戏中并且必须不断调用 malloc/new 来创建敌人，那么您的游戏性能将会很糟糕。每次您将前往操作系统的系统调用，一次只能授予一个线程，如果一次在不同的线程上发生一堆，您将获得很多延迟，这可能对您而言可能或可能无关紧要；给出上下文我会假设这对你来说**并不**重要，但为了其他人，我还是提到了它。我建议弄清楚你大概需要多少内存并事先获得所需的所有内存，如果你用完了，请求两倍的内存......但这是关于内存管理的一个完全独立的话题......这实际上与您的数据结构和构造范式几乎没有关系。

> 那么我需要一个变量来保存敌人的数量，对吗？

取决于您如何存储它们。如果您使用的是 c-array，那么您是在管理自己。大多数正式容器都有相当有效的方法来获取它们的大小。但两者之间可能有一些警告。

但是，鉴于您要问这个问题，我认为您真的应该从直接的实现细节和代码行中退后一步，看看您正在组合的更高级别的架构，这些架构似乎没有经过深思熟虑或理解。“开始就要考虑如何结束”

任何人都不可能以有价值的方式以当前形式明确回答您的问题。看来您真正的问题是：

1.  什么是容器，它们是如何工作的？
2.  管理这些大量敌人的有效范例是什么（认真从四人组的设计模式中查找 FlyWeight）
3.  我应该如何构建我的数据结构？

关于 1：这个网站上有大量关于数据结构的问题/答案，还有大量关于现有数据结构的书籍和文档。STL 提供了几十个，Boost 也是如此。我不打算在这里重复。

关于 2\. 正如我所说，您需要查看众所周知的模式来解决这个问题。我在上面给出了一些建议。如果没有更多信息，这是我可以提供的最普遍有用的信息，可能对其他人有用。

关于 3\. 如果您坚持使用离散项，我认为您可能应该考虑使用工厂方法或抽象工厂或类似的东西，这样您就不必在处理内存分配失败并且无法实例化时乱扔代码敌人。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-23T20:05:47.640

只需使用 std::vector; 它是一个*无限*边界的动态数组。

# rspec - 在命名空间中存根类

> ID：16178155
> 
> 赞同：0
> 
> 时间：2013-04-23T20:03:24.207
> 
> 标签：rspec

我有以下控制器规格，现在可以正常工作：

```
# This top part is a hack
module MyModule
  class MyOAuthClient < OAuthClient
    def token_is_valid?(options)
      true
    end
  end 
end

# Here's the actual spec
describe MyModule::OAuthController do
  describe "GET callback" do
    it "works fine when token is valid" do
      post :callback, use_route: :my_module
      expect(response.code).to eq("200")
    end 
  end 
end 
```

我想要做的是用存根替换我规范中的猴子补丁。我该怎么做呢？

[rspec-mocks 文档](https://github.com/rspec/rspec-mocks)显示了不在命名空间下的存根类的示例，但您似乎不能只将这些示例应用于命名空间类并使其工作。

我已经尝试过某些事情，但我不想用我不正确的猜测来影响人们的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:28:11.237

原来我在追求`any_instance`：

```
MyModule::OAuthClient.any_instance.stub(:token_is_valid?) { true } 
```

# php - 单击不同类别时如何更改和显示选择计数查询的结果？

> ID：16178159
> 
> 赞同：0
> 
> 时间：2013-04-23T20:03:43.173
> 
> 标签：php, mysql, database, select, count

单击不同类别时如何更改和显示选择计数查询的结果？我有查询，这对我有用，并给了我结果每个类别中有多少添加的项目。

`counting results`但是当我点击每个类别时我想改变？

**计数查询**

```
<?php  
$querycount=mysql_query("SELECT COUNT(*) AS count FROM products GROUP BY cid") 
or die ("Product Count Query");
$rowcount=mysql_fetch_array($querycount);
echo $rowcount['count']?> 
```

**例如我想要这样**

mysql数据库中有两个类别

```
1) Jeans  // when i click on jeans it should be display  (10 items) 
2) Shirts // when i click on shirts it should be display (20 items) 
```

`results`现在当类别页面更改时我该如何更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:07:19.557

如果我理解正确并且您想获得一个类别的计数，请在您的 sql 语句中添加一个 where 子句，例如

```
SELECT COUNT(*) AS count FROM products 
WHERE cid=123 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T20:30:18.427

也不确定我是否理解你。您是否尝试过 SELECT 您想要的类别。

如在

```
$sql= SELECT * FROM products WHERE category = jeans/shirts

$result =  mysql_query($sql) or die ('fail'); 
```

然后将该结果放入行数组中。并计算行数。

```
$num_rows = mysql_num_rows($result); 
```

如果你想要一个你点击的链接，你可以使用：

```
<a href="index.php?category=jeans">Jeans</a>

<a href="index.php?category=shirts">shirts</a> 
```

errr 那么您必须将查询更改为：

```
$category = $_GET['category'];

$sql= SELECT * FROM products WHERE category = '$category' 
```

哦，当然：

```
echo $num_rows; 
```

不要在代码上 100% 引用我，我最近转换`PDO`并有点忘记了旧`mysql`方法。您还需要做的事情。

# c - Parsing a string in C

> ID：16178161
> 
> 赞同：2
> 
> 时间：2013-04-23T20:03:58.087
> 
> 标签：c, string, parsing

I want to parse a string and do some checks on the last character of the string. For example:

```
char *name = "angela";

int i;
for(i = 0; i <= strlen(name); i++) {
    if(name[i] == 'a' && i == strlen(name)) {
        *do something here*;
     }
} 
```

I tried this but nothing happens. Why won't this work?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-23T20:05:01.830

Change:

```
for(i = 0; i <= strlen(name); i++) {
    if(name[i] == 'a' && i == strlen(name)) { 
```

to:

```
for(i = 0; i < strlen(name); i++) {
    if(name[i] == 'a' && i == strlen(name) - 1) { 
```

Reason: the first character in a C string, `s`, has index 0, and the last character has index `strlen(s) - 1`, for a total of `strlen(s)` characters.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T20:22:10.127

您可以像这样检查字符串的最后一个字符（无需使用循环）：

```
char *name = "angela";
if(strlen(name)>0)//do the check below only if the string is not empty
if(name[strlen(name)-1]=='a')
{
    //do something here
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-23T20:08:58.673

函数 strlen 返回一个字符串的实际长度，而不是它的最后一个索引。在您的示例“angela”中，strlen 将返回 6，但此字符数组的最后一个索引是 5。所以您必须使用：

```
if(name[i] == 'a' && i == strlen(name) -1) 
```

# shell - bc command not scaling numbers to decimal places

> ID：16178174
> 
> 赞同：2
> 
> 时间：2013-04-23T20:04:40.190
> 
> 标签：shell, bc

I am trying to scale my number calculation to one decimal place (with all applicable rounding) using the `bc` command in linux. This is my test expression:

`echo "scale 1; 90 - 70.333" | bc`

However, I end up with 3 decimal places:

`19.667` is the result.

Any idea how to use `bc` properly to do this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T20:10:59.663

而不是使用

```
echo "scale 1; 90 - 70.333" | bc 
```

尝试使用

```
echo "scale 1; 90 - 70.333/1" | bc 
```

这可能会奏效。

# java - Amazon AWS creating EBS(Elastic block storage) through Java API

> ID：16178175
> 
> 赞同：3
> 
> 时间：2013-04-23T20:04:40.460
> 
> 标签：java, amazon-web-services, amazon-ec2

I am trying to find a way to create a new EBS and attach it to a running instance pro grammatically through the AWSJavaSDK. I see ways to do this with command line tools and with rest based calls but no way through the SDK proper.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T20:10:36.587

您应该能够使用[createVolume](http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/ec2/AmazonEC2Client.html#createVolume%28com.amazonaws.services.ec2.model.CreateVolumeRequest%29)来创建项目。这看起来会返回一个[CreateVolumeResult](http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/ec2/model/CreateVolumeResult.html)，它里面有一个`Volume`对象。

然后，您将从调用中`Volume`返回并使用匹配的[AttachVolumeRequest进行](http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/ec2/AmazonEC2Client.html#attachVolume%28com.amazonaws.services.ec2.model.AttachVolumeRequest%29)[attachVolume](http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/ec2/model/AttachVolumeRequest.html)。`createVolume`

这一切都是在您创建 AWS`AmazonEC2Client`对象之一之后完成的：[文档都是从这里提取的。](http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/index.html)

代码的工作流程可能看起来像这样（注意：使用了伪代码，可能还有更多的部分要挂钩，但工作流程应该看起来像这样）

```
AWSCredentials credentials = new AWSCredentials();
AmazonEC2Client client = new AmazonEC2Client(credentials);
CreateVolumeResult request = new  CreateVolumeRequest(java.lang.Integer size,
                       java.lang.String availabilityZone);
CreateVolumeResponse volumeResponse = client.createVolume(request);
AttachVolumeRequest attachRequest = new AttachVolumeRequest(volumeResponse.getVolume().getVolumeId(),  java.lang.String instanceId, java.lang.String device);
client.attachVolume(attachRequest); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-18T10:19:14.090

请参考以下代码以使用 java API 创建 EBS 卷。

```
public void createVolume(String instanceId){
    System.out.println("Creating the volume begins...");
    CreateVolumeRequest  creq = new CreateVolumeRequest(50, "us-west-2a");
    CreateVolumeResult cres =  ec2.createVolume(creq);

     // Create the list of tags we want to create
    System.out.println("Setting the tags to the volume...");
    ArrayList<Tag> instanceTags = new ArrayList<Tag>();
    instanceTags.add(new Tag("Name","Sachin"));
    CreateTagsRequest createTagsRequest = new CreateTagsRequest().withTags(instanceTags).withResources(cres.getVolume().getVolumeId());
    ec2.createTags(createTagsRequest);
    System.out.println("Attaching the volume to the instance....");
    AttachVolumeRequest areq = new AttachVolumeRequest(cres.getVolume().getVolumeId(),instanceId, "/dev/sdh");
    AttachVolumeResult ares = ec2.attachVolume(areq);
    System.out.println("Creating the volume ends...");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T20:10:42.893

使用`CreateVolumeRequest`api 中的对象创建您的请求，并按照[此处](http://docs.aws.amazon.com/AWSEC2/latest/APIReference/ApiReference-query-CreateVolume.html)`CreateVolumeResponce`的说明在返回的对象中查看结果

# report - Phpunit Code Coverage - 0 Files Analysed when including File with Function in it in Test

> ID：16178189
> 
> 赞同：0
> 
> 时间：2013-04-23T20:05:30.283
> 
> 标签：report, phpunit, code-coverage

I am getting a weird result when trying to create a code coverage report of my test.

I call this:

```
phpunit --coverage-html report tests/JSONTest.php 
```

And get this:

```
PHPUnit 3.6.12 by Sebastian Bergmann.
.
Time: 0 seconds, Memory: 6.75Mb
OK (1 test, 1 assertion)
Generating code coverage report in HTML format ... done 
```

My test looks like this:

```
<?php

require_once dirname(__FILE__) . "/../include/includeAllNecessaryFiles.php";

class JSONTest extends PHPUnit_Framework_TestCase {
    public function testBla() {
        $this->assertEquals("hallo", "hallo");
    }
} 
```

The file includeAllNecessaryFiles.php has this content:

```
<?php
include '/usr/share/php/PHPUnit/Framework/TestCase.php';

function something(){

} 
```

The report lists all directories of the php-files that have been used, but doesn't list any files. It displays a 100% coverage, 0 of 0 lines have been covered.

When I throw this out:

```
function something(){

} 
```

The report works properly and shows exactly how many lines the test covers.

Does anybody have an idea?

Thanks in advance!

Ben

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T18:50:48.483

我发现代码覆盖率报告并不总是 100% 准确。可能有很多原因。我曾经问过 Derick Rethans（Xdebug 的创建者）这个问题。他告诉我，同时使用 Zend Debugger 和 Xdebug（我倾向于这样做）已经知道可以减少行数。

我知道这没有多大帮助，但我只是想让你知道这是一个已知问题。

# windows - How can I have the Anthill Pro agent launch apps in the foreground

> ID：16178191
> 
> 赞同：0
> 
> 时间：2013-04-23T20:05:39.033
> 
> 标签：windows, agent, anthill

When the Anthill Pro 3.8 agent is run as a service under Windows XP, the "Shell" step (of type Builder) executes commands in the background (for lack of a better term - what I mean is that the GUI-based application is launched but not displayed on the screen, though its process can be seen in the task manager).

If I try to manually execute the same command to launch the application from the command line (simply the process's path and name), I don't have any problems. If I stop the Anthill Agent service and launch the agent manually so that the agent is running in the foreground, I also don't have an issue with the application displaying on the screen.

So I believe this is an Anthill Pro configuration issue, but I'm not familiar enough to know what the issue could be or where to look.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:32:15.410

以 LocalSystem 用户身份运行代理，然后配置 shell 步骤以模拟用户帐户

# c# - 如何制作一个可以从 C# 中的任何线程更改任何文本框的文本属性的方法？

> ID：16178192
> 
> 赞同：1
> 
> 时间：2013-04-23T20:05:38.923
> 
> 标签：c#, multithreading, invoke

我不是一个真正优秀的 C# 程序员。我习惯了 C 但不习惯 C#。

我知道从 UI 线程以外的线程我们无法更改文本框和标签的属性。

因此，在尝试了几种不同的方法之后，我一直在使用这种方法：

```
 item.Invoke(new EventHandler(delegate
            {
                item.Text = text;
            })); 
```

然后在写了一些代码之后，我发现每次都这样做很无聊而且效率低下，所以我做了一个方法：

```
static void change_text_from_different_thread(TextBox item, string text)
        {
            item.Invoke(new EventHandler(delegate
            {
                item.Text = text;
            }));

        } 
```

然后我尝试在我的线程中使用它，问题是我无法从线程发送 TextBox。

假设这是我的线程：

```
{

change_text_from_different_thread(textbox1,"Hi");

} 
```

然后我得到这个错误：

> 非静态字段、方法或属性需要对象引用

那么你能告诉我如何传递文本框吗？顺便说一句，我的调用方法有可能是错误的或非常危险的，但我找不到更简单的方法。如果真的很糟糕，请告诉我。如果没问题，也请告诉我。如果通过使用另一种方法，事情变得更好更容易，请也告诉我。

这是我第一次问问题，如果我错过了一些东西，对不起。非常感谢。

这是我的方法：

```
static void gyro_self_check_thread_function()
{
//lab lab
} 
```

这就是我创建线程并启动它的方式：

```
private void Gyro_self_check_button_Click(object sender, EventArgs e)
        {

            Gyro_self_check_status_label.Text = "Status: Checking....";
            gyro_self_testing_groupBox.Update();
            _serialPort.Write(Protocal_Values.gyro_self_checking_request, 0, 2);

            Thread gyro_self_check_thread = new Thread(gyro_self_check_thread_function);
            gyro_self_check_thread.Start();

            //Thread gyro_self_check_thread = new Thread(gyro_self_check_thread);
            //gyro_self_check_thread.Start();

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:09:59.133

看起来您的线程方法也是静态的，而 textbox1 是一个非静态字段，因此无法从静态方法访问它。

如果是这种情况，那么您可以使您的线程方法非静态并且它应该编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T20:15:51.740

正如另一位发表评论的那样，这可能是静态访问与非静态访问的问题。为了缓解这个问题，您可以将其编写为 TextBox 上的扩展方法：

```
static class ExtensionMethods
{
     static void change_text_from_different_thread(this TextBox item, string text)
     {
         item.Invoke(new EventHandler(delegate
             {
                 item.Text = text;
             }));

     }
} 
```

然后你这样称呼它：

```
textbox1.change_text_from_different_thread("Hi"); 
```

# sql - 如何处理逻辑复杂、字段多的数据集？

> ID：16178194
> 
> 赞同：0
> 
> 时间：2013-04-23T20:05:46.377
> 
> 标签：sql, ssrs-2008, reporting-services

我有一个数据集，`dataset1`它有大约 20 个字段。**（尚未实现）**

假设出于这个问题的目的，它只有 4 个字段：

```
field1, field2, field3, field4 
```

我希望我的报告像这样显示所有字段：

```
field1[1], field2[1], field3[1], field4[1]
field1[2], field2[2]. field3[2], field4[2]
etc 
```

因为我会有复杂的逻辑和大量的字段，我可以闯入吗`dataset1`？在哪里：`dataset1``dataset2`

```
dataset1=
field1, field2 
```

和

```
dataset2=
field3, field4 
```

并像这样显示报告中的字段

```
dataset1.field1[1], dataset1.field2[1], dataset2.field3[1], dataset2.field4[1]
dataset1.field1[2], dataset1.field2[2], dataset2.field3[2], dataset2.field4[2] 
```

如何处理具有复杂逻辑和大量字段的数据集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:53:34.000

您可以将数据集分成两个单独的表。但是，您需要一个键来组合它们。. . `1`和在你的`2`例子中。

在这种情况下，查询将类似于：

```
select d1.field1, d1.field2, d2.field3, d2.field4
from dataset1 d1 join
     dataset2 d2
     on d1.id = d2.id  -- or whatever the field is for connecting them 
```

你也可以做相反的事情。也就是将所有数据保存在一个表中，然后创建视图，例如：

```
create view dataset1 as
    select field1, field2
    from dataset; 
```

我不想再猜测你为什么要这样做。列式数据库单独存储每一列（就像在单独的表中一样），尽管它们具有高度优化的机制来重新组合它们。

# javascript - server side validation in asp.net

> ID：16178199
> 
> 赞同：0
> 
> 时间：2013-04-23T20:05:51.673
> 
> 标签：javascript, asp.net, validation

In asp.net, we have validations for textboxes but these validations are client side using javascript. If a user disables javascript in their browser and visit my website, validations will not work.

Does anybody have another idea?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T20:09:29.737

您是正确的，因为您不能仅依赖客户端验证。就我个人而言，我会将我的时间投入到一个万能的解决方案上。我真的很喜欢[Data Annotations](http://msdn.microsoft.com/en-us/library/dd901590%28v=vs.95%29.aspx)，因为它会执行服务器端验证以及自动生成客户端。非常可配置和实施，只需将属性添加到您的类。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T20:09:46.410

这就是[Page.Validate](http://msdn.microsoft.com/en-us/library/0ke7bxeh.aspx)方法，更重要的是[Page.IsValid](http://msdn.microsoft.com/en-IN/library/system.web.ui.page.isvalid.aspx)属性的用武之地。

你可以在服务器端做这样的事情

```
 if (Page.IsValid)
 {
   // your code
 } 
```

`CausesValidation`Validate 方法由属性设置为 true的控件自动触发。

[这](http://weblogs.asp.net/rajbk/archive/2007/03/15/page-isvalid-and-validate.aspx)是对此的简要说明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T20:10:47.847

客户端的验证改善了用户体验（他们获得了问题区域的即时反馈），但服务器端的验证对于保持数据清洁来说才是真正重要的。在大多数情况下，您通常需要进行这两种类型的验证。

# symfony - Symfony Error 500 when create query by find() or findlALL()

> ID：16178205
> 
> 赞同：0
> 
> 时间：2013-04-23T20:06:12.747
> 
> 标签：symfony, doctrine-orm

When I execute this query I get correct result

```
 $entity = $em->getRepository('SurgeryPatientBundle:Visits')
                 ->countDoctorVisits(13, '2013-03-01', '2013-05-30'); 
```

But If look like this

```
$entity = $em->getRepository('SurgeryPatientBundle:Visits')->findAll(); 
```

I get Error 500, **/var/log/mysql.err is** empty also `/var/log/mysql.log`

What and how I should show ? And how fixed this

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-04-24T13:58:02.670

我有同样的问题，这是教义缓存中的错误。仔细检查您的缓存目录和所有子目录是否具有 755 权限

更具体地说，它无法在 app\cache\dev\doctrine\orm\Proxies 目录中写入其中一个代理文件...手动创建它也有效（要获得文件名，请查看日志文件）

# c++ - Using the appearance of a file as a trigger

> ID：16178207
> 
> 赞同：0
> 
> 时间：2013-04-23T20:06:23.850
> 
> 标签：c++, arduino

I am trying to figure out a way to interface between an arduino-controlled system, and a software that will automatically create files in a certain filepath over time.

I don't need arduino to read the file, or extract anything from the file, only become aware of the file coming into existence (from the other software) and trigger the already programmed sequences.

If anyone has any ideas on how I can accomplish this (or if you need any clarification), please let me know.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T22:10:15.813

我假设您不是编写创建文件的软件的人。在这种情况下，请查看[ReadDirectoryChangesW](http://msdn.microsoft.com/en-us/library/aa365465%28VS.85%29.aspx)。每当您检索目录中的更改时，只需向 arduino 发送一条串行消息并触发序列。

# android - Android Yahoo 和 Hotmail 客户端不附加图像

> ID：16178213
> 
> 赞同：0
> 
> 时间：2013-04-23T20:06:42.260
> 
> 标签：android, email

这段代码非常适合 GMail 客户端，但对于 Yahoo 和 Hotmail，它只显示消息，而不是附件。

```
Intent emailIntent = new Intent(Intent.ACTION_SENDTO, Uri.fromParts("mailto", address, null));
emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, subject);
emailIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse(uriString));
c.startActivity(Intent.createChooser(emailIntent, title)); 
```

# javascript - VB.NET MessageBox 使用代码隐藏变量@OnClick

> ID：16178214
> 
> 赞同：0
> 
> 时间：2013-04-23T20:06:47.777
> 
> 标签：javascript, asp.net, vb.net, visual-studio, visual-web-developer

我有以下过程，当单击选择按钮时，会从单击选择按钮的 GridView 中的行中返回多个值。这些值存储为变量。此过程作为代码背后 (VB) 的一部分执行。我想将变量 BodyOfEmail 传递给非代码隐藏（aspx）页面并创建一个列出值的弹出窗口。我想我遇到的主要问题是如何将弹出消息链接到这个 onclick 过程。

```
Public BodyOfEmail As String

Protected Sub GridView2_SelectedIndexChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles GridView2.SelectedIndexChanged, GridView1.SelectedIndexChanged
  Dim Number, BodyOfEmail, FullName As String
  Dim RowValue As Double

  RowValue = GridView1.SelectedDataKey.Value - 1
  Number = GridView1.Rows(RowValue).Cells(5).Text.ToString
  FullName = GridView1.Rows(RowValue).Cells(25).Text.ToString
  BodyOfEmail = Number & " " & FullName
End Sub 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:14:09.820

您不能混合和匹配客户端和服务器代码。它是javascript或VB。您可以使用 registerscript 方法在页面呈现时动态生成 javascript，并且您可以使用 ajax 从客户端上的服务器发送/获取数据。

# transactions - Is there a way to check locks granted by a transaction

> ID：16178217
> 
> 赞同：2
> 
> 时间：2013-04-23T20:06:54.450
> 
> 标签：transactions, sql-server-2008-r2

I am very new to SQL. I am using SQL Server 2008 R2\. I have following issues;

**(1)**

A transaction has started but its commit point is not reached.

```
UPDATE Student 
SET subject = 'Technology' 
WHERE subjectCode = 'tech'; 
```

When this is executing what type of locking is having full table/row??

**(2)**

Is there is a way to get locks held by a transaction?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T20:41:11.653

答案（1）：

如果事务没有被任何预先存在的锁阻塞，那么`Student`表中所有带有 a 的行`subjectCode = 'tech'`现在都将拥有一个`(X)`（独占）锁。

在页面和表级别，将有`(IX)`（意图排他）锁 - 表明在“层次结构”（表 -> 页面 -> 行）的更下方的某个地方存在排他锁。

如果您要更新超过 5000 行，则**锁升级**将启动，并且 SQL Server 已将 5000 多个单独的行级排他锁替换为单个表级排他锁。这意味着基本上没有人可以对那张桌子做任何事情。

对于您的问题 (2) -[请参阅其他 SO question 的答案](https://stackoverflow.com/questions/7139561/best-way-to-find-sql-locks-in-sql-server-2008)。

# haskell - Why is this minimal Gtk2Hs program leaking memory

> ID：16178219
> 
> 赞同：3
> 
> 时间：2013-04-23T20:07:04.023
> 
> 标签：haskell, gtk, gtk2hs

Using GHC 7.4.2 and GtkHs 0.12.4, on Win32 and Win64, this program takes more and more memory, consuming approximately 2Mb/sec on my machine. I am simply trying to make an animation using Gtk (this is why I invalidate the window so it gets redrawn immediately).

I tried to profile the memory usage with the RTS options, but this memory is not visible.

What is going on ?

```
import Graphics.UI.Gtk

main :: IO ()
main = do
    initGUI
    window <- windowNew
    onDestroy window mainQuit
    onExpose window (\_ -> widgetQueueDraw window >> return True)
    widgetShowAll window
    mainGUI 
```

-- Edit: I am using the version of Gtk found [here](http://www.gtk.org/download/win32.php) which happens to be 2.24.10

-- Edit2: So, using an external timer instead of requesting `widgetQueueDraw` from the expose event fixes the problem. It will do for now, but I don't understand why. I have used this approach in several languages with several GUI framework (invalidating a GUI control in the paint event). Usually, calling the invalidate just sets a flag that gets read next time the GUI thread kicks in. It ends-up in the GUI thread redrawing the control each frame, but that is actually what I want here. It looks like a but in Gtk2Hs.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T14:16:20.203

我认为你的程序进入了一个循环。当窗口接收到暴露事件（即请求重绘自身）时，您不进行任何绘图。相反，你强制它重绘自己，这反过来会发出一个暴露事件，等等。您必须将问题分成两部分。您应该设置一个计时器，该计时器调用一个准备动画下一步的函数，并调用`widgetQueueDraw`将场景渲染到窗口上。实际渲染应该作为对窗口暴露事件的反应。

# php - 使用 PHP 读取 .txt 文件并将信息存储到变量中

> ID：16178220
> 
> 赞同：1
> 
> 时间：2013-04-23T20:07:08.080
> 
> 标签：php, text

我有两个`.txt`文件需要阅读。两个文件的内容如下

> 日志.txt

```
2013/04/20 01:08:11 
```

和

> 数据.txt

```
MANUFACTURER: SISYSTEM
MODELNAME: DX1
BIRTHDATE: 19710108
SEX: M 
```

对于 log.txt，我需要存储第一行的日期并将其保存到 mySQL 数据库中。

对于 data.txt 我需要将每一行的信息存储到变量中。IE：

```
$manufacturer = SISYSTEM;
$modelname = DX1;
$birthdate =  19710108;
$sex = M; 
```

对于 log.txt，我可以简单地使用 fget 读取第一行并将其存储到一个变量中。但是，对于 data.text，我无法弄清楚如何在循环中存储多个变量。到目前为止，这是我所拥有的，但我不知道每次通过 while 循环时如何将值分配给新变量。任何帮助表示赞赏！

```
<?PHP

$file_handle = fopen("data.txt", "r");

while (!feof($file_handle) ) {

   $line_of_text = fgets($file_handle);
   $parts = explode(':', trim($line_of_text) );

}

fclose($file_handle);

?> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T20:12:31.153

为什么在变量中需要它们？关联数组（“map”）是更简洁的方法

```
$result = array();
  // Your loop -->
  $parts = array_map('trim', explode(':', $line_of_text, 2)));
  $result[$parts[0]] = $parts[1]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T20:09:59.427

使用变量变量： http: [//php.net/manual/en/language.variables.variable.php](http://php.net/manual/en/language.variables.variable.php)

在您的 while 循环中使用：

```
$line_of_text = fgets($file_handle);
$parts = explode(':', trim($line_of_text), 2);
${strtolower($parts[0])} = trim($parts[1]); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-23T20:19:04.133

在`while`循环内，您可以比较该行以查看必须分配的变量：[PHP: strcmp - Manual](https://www.php.net/manual/en/function.strcmp.php)

```
<?php
$file_handle = fopen("data.txt", "r");

while (!feof($file_handle) ) {

  $line_of_text = fgets($file_handle);
  $parts = explode(':', trim($line_of_text) );
  if (strcmp($parts[0], "MANUFACTURER")==0)
      $MANUFACTURER = trim($parts[1]);
  if (strcmp($parts[0], "MODELNAME")==0)
     $MODELNAME = trim($parts[1]);
  [...]
  else
     echo "I haven't recognised that: ".$parts[0];
}

fclose($file_handle);
?> 
```

可能你可以使用一个`switch`语句

```
<?php
$file_handle = fopen("data.txt", "r");

while (!feof($file_handle) ) {

  $line_of_text = fgets($file_handle);
  $parts = explode(':', trim($line_of_text) );
  switch($parts[0])
  case 'MANUFACTUREER':
      $manufactureer = $parts[1];
      break;
  case 'MODELNAME':
      $modelname = $parts[1];
      break;
  [...]
}

fclose($file_handle);
?> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-23T20:40:46.353

注意：我不知道如何将值分配给新变量

您可以使用[数组](http://php.net/manual/en/language.types.array.php)。

我假设您刚刚提供了每个文件中内容的示例 - 这些模式可能会重复。在我回答你的问题之前，我认为重要的是你应该知道在文本文件中维护数据是一个*非常*糟糕的主意或很多原因。

以第二个文件为例，您有两种选择如何在 PHP 中管理这些数据 - 将您的数据视为一个表：

```
manufctr  model   birthdate   sex
SISYSTEM  DX1     19710108    M
SISYSTEM  DX2     19710305    F
... 
```

您可以将每一行存储在一个数组中，也可以将每一列存储在一个数组中。生成的数组集本身可以存储在数组中。

你如何加载和解析数据取决于数据结构的一致性（每个条目是否总是这种格式，或者它可能有额外/缺失的属性）。是否将数据读入行或列取决于数据在文件中的存储方式以及您接下来打算对数据执行的操作。

```
$read=array();
while (true) {
   $record=array();
   for($x=0; $x<4; $x++) {
      $line_of_text = fgets($file_handle);
      list($k, $v) = explode(':', $line_of_text );
      $record[strtolower(trim($k))]=trim($v);
   }
   $read[]=$record;
   if (feof($file_handle) break;
} 
```

# ruby - Ramaze 是否有类似“之前/之后”的 Sinatra 钩子？

> ID：16178221
> 
> 赞同：1
> 
> 时间：2013-04-23T20:07:08.837
> 
> 标签：ruby, ramaze

想知道 Ramaze 是否有像 Sinatra 这样的钩子。有人知道吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T20:36:31.093

他们的[文档](http://ramaze.net/documentation/Innate/Helper/Aspect/SingletonMethods.html)告诉您确实如此。例如：

```
before(:index, :other) do
    puts 'Executed before specific actions only.'
end

after(:index, :other) do
    puts 'Executed after specific actions only.'
end 
```

# symfony - 教义时间戳扩展不持久

> ID：16178227
> 
> 赞同：4
> 
> 时间：2013-04-23T20:07:25.247
> 
> 标签：symfony, doctrine-orm, doctrine, symfony-2.1

我为我的 symfony 学说设置了 Doctrine 时间戳，其他实体正在按他们应该的方式处理这个问题，但根本没有设置任何日期。

```
 use Doctrine\ORM\Mapping as ORM;
    use Gedmo\Mapping\Annotation as Gedmo;
    use Digital\UserBundle\Entity\User;

    /**
     * ChallengeScore
     *
     * @ORM\Table(name="app_challenges_scores")
     * @ORM\InheritanceType("JOINED")
     * @ORM\DiscriminatorColumn(name="type", type="string")
     * @ORM\DiscriminatorMap({"race" = "Digital\ApplicationBundle\Entity\Race\ChallengeScore", "individual" = "ChallengeScore"})
     * @ORM\Entity(repositoryClass="Digital\ApplicationBundle\EntityRepository\ChallengeScoreRepository")
     */
    class ChallengeScore

    /**
     * @var \DateTime
     *
     * @ORM\Column(name="date_added", type="datetime")
     * @Gedmo\Timestampable(on="create")
     */
    private $date_added;

    /**
     * @var \DateTime
     *
     * @ORM\Column(name="date_modified", type="datetime")
     * @Gedmo\Timestampable(on="update")
     */
    private $date_modified;

    /**
     * Set date_added
     *
     * @param \DateTime $dateAdded
     *
     * @return self
     */
    public function setDateAdded($dateAdded)
    {
        $this->date_added = $dateAdded;

        return $this;
    }

    /**
     * Get date_added
     *
     * @return \DateTime
     */
    public function getDateAdded()
    {
        return $this->date_added;
    }

    /**
     * Set date_modified
     *
     * @param \DateTime $dateModified
     *
     * @return self
     */
    public function setDateModified($dateModified)
    {
        $this->date_modified = $dateModified;

        return $this;
    }

    /**
     * Get date_modified
     *
     * @return \DateTime
     */
    public function getDateModified()
    {
        return $this->date_modified;
    }
} 
```

我在想这个配置定义了继承可能存在问题......有人能发现问题吗？

没有错误只是 00000 持续到 db （所以什么都没有）

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-05-06T11:03:08.233

不要忘记将以下内容添加到您的 app/config/services.yml 中：

```
services:
    gedmo.listener.timestampable:
        class: Gedmo\Timestampable\TimestampableListener
        tags:
            - { name: doctrine.event_subscriber, connection: default }
        calls:
            - [ setAnnotationReader, [ '@annotation_reader' ] ] 
```

如果触发事件以在数据库中更新/创建实体，它基本上会“侦听”它并设置日期。

我希望这解决了这个问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T04:52:04.163

在[`DoctrineExtensions`](https://github.com/l3pp4rd/DoctrineExtensions/blob/master/doc/timestampable.md)示例中

可以看到成员没有`setters`，`timestampable`所以只删除`setDateAdded()`和`setDateModified()`方法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-25T10:17:51.133

我从实体类中删除了设置器并将以下代码添加到`services.yml`：

```
gedmo.listener.timestampable:
    class: Gedmo\Timestampable\TimestampableListener
    tags:
        - { name: doctrine.event_subscriber, connection: default }
    calls:
        - [ setAnnotationReader, [ @annotation_reader ] ]. 
```

它对我来说很好。

# iphone - 如何停止 UIPickerView 的可重用性

> ID：16178236
> 
> 赞同：0
> 
> 时间：2013-04-23T20:08:23.997
> 
> 标签：iphone, ios, uipickerview, uipickerviewcontroller

我正在开发自定义 PickerView，我在选择器中有两个组件（小时、分钟），我已将分钟组件中的“0”设为灰色且不可选择，除了行被重用外，一切正常。 .. 我的 Minutes 组件以灰色字体显示“0”（这是我想要的），但如果您滚动选择器，我会看到“7、14、21 .....”全部都是灰色字体！！这是我的代码

```
enter code here
- (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view
{

if(component == HOURS) {
        NSString *s = [self.arrayOfHours objectAtIndex:row];
        return [pickerView viewForShadedLabelWithText:s ofSize:20 forComponent:0 rightAlignedAt:52 reusingView:view];

    } else if (component == MINUTES) {
            NSString *s = [self.arrayOfMinutes objectAtIndex:row];
            return [pickerView viewForShadedLabelWithText:s ofSize:20 forComponent:1 rightAlignedAt:52 reusingView:view];
    }
    else return 0;
}

  - (UIView *)viewForShadedLabelWithText:(NSString *)title ofSize:(CGFloat)pointSize forComponent:(NSInteger)component rightAlignedAt:(CGFloat)offset reusingView:(UIView *)view {

//.........................    

    label = [self shadedLabelWithText:title ofSize:pointSize :component];

//..........................
 }

  - (UILabel *)shadedLabelWithText:(NSString *)label ofSize:(CGFloat)pointSize :(NSInteger)component 
{    

    UILabel *labelView = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, size.width, size.height)];

    labelView.text = label;

    if([label isEqual:@"0"] && component == 1) {

        labelView.textColor = [UIColor grayColor];
    }

    return labelView;
    } 
```

1 - 有人可以帮我避免选择器视图重用行吗？

2 - 如何使选择器视图以圆形/圆形显示行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T02:54:55.657

这是给您带来麻烦的代码：

```
if([label isEqual:@"0"] && component == 1) {
    labelView.textColor = [UIColor grayColor];
} 
```

你的问题是，由于行被重用，当你将一行设置为灰色时，它会离开堆栈，它会在*某个*时候回来。当它回来时，它的标签颜色*仍然*是灰色的。

所以，**代码应该改成这样**：

```
if([label isEqual:@"0"] && component == 1) {
    labelView.textColor = [UIColor grayColor];
} else
{
    labelView.textColor = [UIColor blackColor]; // Or whatever color it normally is.
} 
```

对于有关使其循环的问题，您可以将行数设置为一些疯狂的数字，例如`10000`（用户永远不会滚动浏览的数字）。然后将选取器的位置设置为 10K 的中间。然后，您将需要一个数组，其中包含要在“永无止境”选择器中显示的所有值。

然后，您将使用模运算符 ( **`%`**) 检查数组除以`count`当前行的余数。例如：

```
-(UIView *)somePickerWantsViewForRow:(int)row
{
    ...
    NSString *titleForRow = [self.someArray objectAtIndex:(self.someArray.count % row)];
    pickerRow.titleLabel.text = titleForRow;
} 
```

在此示例中，`someArray`可能是`('cat','dog','farmer','pizza')`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T04:08:54.923

我刚刚发现了“重用行”的问题，就像在下面的方法中用“nil”替换“view”一样简单。

return [pickerView viewForShadedLabelWithText:s ofSize:20 forComponent:1 rightAlignedAt:52 reusingView: **nil** ];

我花了几个小时才弄清楚这一点……哇，难怪我喜欢编程！:)

# c# - 不在右键菜单中运行 Pex

> ID：16178238
> 
> 赞同：2
> 
> 时间：2013-04-23T20:08:41.413
> 
> 标签：c#, visual-studio-2010, pex

Microsoft Visual Studio 2010 版本 10.0.40219.1 SP1Rel Microsoft .NET Framework 版本 4.0.30319 SP1Rel

安装版本：终极版

Microsoft Moles 1.0.0.0 用于 Visual Studio 的 Moles 生成器

我正在使用 MS Pex/Moles 进行一些研究/工作，并下载了 Pex/Moles 的 0.94.0.0 版本。安装完成，没有任何错误。

我正在浏览其中包含的一些文档，其中之一是 Microsoft Code Contracts 和 Microsoft Pex 入门。我遇到了练习 1 的问题。当我在我的方法中右键单击时，文档说我应该看到一个 Run Pex 选项，但我没有该选项。事实上，我在右键菜单或其他任何地方都没有 Pex 的任何选项。

我在关闭 VS 的情况下运行安装程序，我也没有为 Pex 添加参考（我确实有它，但它没有给我运行 Pex 的选项）。

作为一家公司，我们还没有转向 Vs2012，所以这不是一个选择。

更新：我刚刚下载了以下内容： [http](http://research.microsoft.com/en-us/downloads/d2279651-851f-4d7a-bf05-16fd7eb26559/default.aspx) : //research.microsoft.com/en-us/downloads/d2279651-851f-4d7a-bf05-16fd7eb26559/default.aspx 这是“Pex - .NET 的自动白盒测试”（32 bit)' 即使我有一台 64 位机器。我安装然后再次打开我的 VS2010 并尝试。我确实可以选择运行 Pex 和运行 Pex 探索。我不确定原始下载是否没有要安装，或者我是否需要单独安装。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T15:49:10.393

我刚刚下载了以下内容：[http](http://research.microsoft.com/en-us/downloads/d2279651-851f-4d7a-bf05-16fd7eb26559/default.aspx) : //research.microsoft.com/en-us/downloads/d2279651-851f-4d7a-bf05-16fd7eb26559/default.aspx 这是“Pex - .NET 的自动白盒测试（32 位） ' 即使我有一台 64 位机器。我安装然后再次打开我的 VS2010 并尝试。我确实可以选择运行 Pex 和运行 Pex 探索。我不确定原始下载是否没有要安装，或者我是否需要单独安装。

# node.js - 在 Forever 下运行的 NodeJS 上优雅地关闭 UNIX-socket 服务器

> ID：16178239
> 
> 赞同：19
> 
> 时间：2013-04-23T20:08:42.077
> 
> 标签：node.js, unix-socket, forever

我有一个 NodeJS 应用程序，它设置了一个 UNIX 套接字来公开一些进程间通信通道（某种监视的东西）。UNIX-socket 文件放置在`os.tmpdir()`文件夹（即`/tmp/app-monitor.sock`）中。

```
var net = require('net');
var server = net.createServer(...);
server.listen('/tmp/app-monitor.sock', ...); 
```

我使用信号处理（SIGINT、SITERM 等）来优雅地关闭我的服务器并删除一个套接字文件。

```
function shutdown() {
    server.close(); // socket file is automatically removed here
    process.exit();
}

process.on('SIGINT', shutdown);
// and so on 
```

我的应用程序正在运行`forever start ...`以监控它的生命周期。

我的命令有问题`forever restartall`。当永远这样做`restartall`时，它使用 a`SIGKILL`来终止所有子进程。`SIGKILL`无法由进程处理，因此我的应用程序在没有任何关闭程序的情况下死亡。

问题是使用时未删除的套接字文件`SIGKILL`。子进程重启后，新服务器无法启动，因为`listen`调用会`EADDRINUSE`报错。

我无法在应用程序启动过程中删除现有的套接字文件，因为'我不知道它是真正工作的套接字还是以前不干净关闭的一些痕迹。

所以，问题是......处理这种情况的更好方法是什么（SIGKILL 和 UNIX-socket 服务器）？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-05-11T23:26:42.717

正如其他人所提到的，您无法对 SIGKILL 做出任何回应，这通常是为什么`forever`（以及其他所有人）不应该使用 SIGKILL，除非在极端情况下。所以你能做的最好的就是在另一个过程中清理。

我建议你在开始时清理。当你得到 时`EADDRINUSE`，尝试连接到套接字。如果套接字连接成功，则另一个服务器正在运行，因此该实例应该退出。如果连接失败，则可以安全地取消链接套接字文件并创建一个新文件。

```
var fs = require('fs');
var net = require('net');
var server = net.createServer(function(c) { //'connection' listener
    console.log('server connected');
    c.on('end', function() {
        console.log('server disconnected');
    });
    c.write('hello\r\n');
    c.pipe(c);
});

server.on('error', function (e) {
    if (e.code == 'EADDRINUSE') {
        var clientSocket = new net.Socket();
        clientSocket.on('error', function(e) { // handle error trying to talk to server
            if (e.code == 'ECONNREFUSED') {  // No other server listening
                fs.unlinkSync('/tmp/app-monitor.sock');
                server.listen('/tmp/app-monitor.sock', function() { //'listening' listener
                    console.log('server recovered');
                });
            }
        });
        clientSocket.connect({path: '/tmp/app-monitor.sock'}, function() { 
            console.log('Server running, giving up...');
            process.exit();
        });
    }
});

server.listen('/tmp/app-monitor.sock', function() { //'listening' listener
    console.log('server bound');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-07T21:26:15.620

你应该能够使用 SIGTERM 做你想做的事： `process.on('SIGTERM', shutdown)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-07T23:32:01.303

```
server.on('error', function (e) {
  if (e.code == 'EADDRINUSE') {
    console.log('Address in use, retrying...');
    setTimeout(function () {
      server.close();
      server.listen(PORT, HOST);
    }, 1000);
  }
}); 
```

[http://nodejs.org/api/net.html#net_server_listen_port_host_backlog_callback](http://nodejs.org/api/net.html#net_server_listen_port_host_backlog_callback)

**UPD**

你不能处理 SIGKILL，那么你必须清理套接字手册

这个例子永远可以正常工作

```
var fs = require('fs');
var net = require('net');
var server = net.createServer(function(c) {});
server.listen('./app-monitor.sock', function() {
  console.log('server bound');
});

server.on('error', function (e) {
  if (e.code == 'EADDRINUSE') {
    console.log('Address in use, retrying...');
    setTimeout(function () {
      fs.unlink('./app-monitor.sock');
    }, 1000);
  }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-08T19:56:39.947

由于您无法处理`SIGKILL`并且您想永远使用（使用`SIGKILL`），您将不得不使用解决方法。

例如，首先发送一个信号来关闭你的服务器，然后永远重启：

```
kill -s SIGUSR1 $pid
# $pid contains the pid of your node process, or use
# killall -SIGUSR1 node

sleep 2
forever restart test.js 
```

在您的 js 中处理 SIGUSR1：

```
process.on('SIGUSR1', gracefullyShutdownMyServer); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-09T13:56:33.830

你必须选择

1.  将 SIGKILL 更改为永远监视器中的另一个信号以在应用程序中处理
2.  在这种情况下，使用 fs.unlink 处理您的应用程序
3.  永远停止使用

# angularjs - 将 ng-options 绑定到远程 JSON 数据？

> ID：16178243
> 
> 赞同：1
> 
> 时间：2013-04-23T20:08:53.640
> 
> 标签：angularjs

使用 AngularJS，我想将选择选项绑定到远程数据源，同时跳过对中间字段的需求。我不确定这是可能的。

例如，我理想的 HTML 是：

```
<select ng-model="city" ng-options="obj for obj in getCities(state).data"></select> 
```

对我范围的 getCities 的调用采用状态值（绑定在模型的其他位置）并使用 $http.get 进行远程调用以获取城市列表。

在我的场景中，会有多个选择由同一个控制器管理，因此没有一个地方可以存储每组返回的数据，我也不知道何时执行查询。

我正在寻找有关如何执行此操作的建议。我不能只从 getCities 返回一个 $http 承诺，因为它会被重复调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:26:38.943

我误解了您在我上面的评论中到底在问什么。您可以使用一种后期绑定方法来解决这个问题。您`ngOption`应该像往常一样查看您的模型，并且您的承诺回调应该修改您的控制器的范围。

小提琴：http: [//jsfiddle.net/XaC8e/1/](http://jsfiddle.net/XaC8e/1/)

HTML

```
<div ng-app="test" ng-controller="test">
    <select ng-model="state1" ng-options="s for s in states" ng-change="loadNewCities(state1);">
    </select>
    <br/>
    <select ng-model="city1" ng-options="c for c in cities[state1]">
    </select>
    <br/>
    <br/>
    <select ng-model="state2" ng-options="s for s in states" ng-change="loadNewCities(state2);">
    </select>
    <br/>
    <select ng-model="city2" ng-options="c for c in cities[state2]">
    </select>
    <br/>
    <br/>
    <select ng-model="state3" ng-options="s for s in states" ng-change="loadNewCities(state3);">
    </select>
    <br/>
    <select ng-model="city3" ng-options="c for c in cities[state3]">
    </select>
    <br/>
    <br/>

    1: {{city1}}, {{state1}}
    <br/>
    2: {{city2}}, {{state2}}
    <br/>
    3: {{city3}}, {{state3}}
</div> 
```

JavaScript：

```
angular.module('test', [])
.controller('test', function ($scope) {
    $scope.states = ['ca', 'ny', 'va'];
    $scope.cities = {
        'ca': ['san diego', 'san francisco']
    };

    $scope.loadNewCities = function (s) {
        if (typeof $scope.cities[s] !== 'undefined') {
            // don't load if we already have cities
            return;
        }
        // TODO call a service here, run the $scope.$apply in the callback
        if (s == 'ny') {
            setTimeout(function () {
                // faking a callback
                $scope.$apply(function () {
                    $scope.cities[s] = ['nyc', 'buffalo'];
                });
            }, 200);
        }
        if (s == 'va') {
            setTimeout(function () {
                // faking a callback
                $scope.$apply(function () {
                    $scope.cities[s] = ['richmond', 'chesapeake'];
                });
            }, 200);
        }
    };    
}); 
```

# javascript - 树布局的预先确定的 x 和 y 值

> ID：16178244
> 
> 赞同：0
> 
> 时间：2013-04-23T20:08:56.780
> 
> 标签：javascript, d3.js

我有一个简单的树布局示例，我希望将源节点和目标节点设置为值

数据是这样的：

```
 var Data = {"name" : "A", "info" : "tst", "childrens" : [
      {"name" : "A1", x:100, y:100 },
      {"name" : "A2", x:50, y:400 },
      {"name" : "A3", x:50, y:100 },
      {"name" : "A311", x:350, y:120 },
      {"name" : "A312", x:250, y:170 },
      {"name" : "A312", x:175, y:200 }

    ]}; 
```

如您所见，我已经为每个节点定义了 x 和 y 值，以将它们定位在我想要的位置。

但是，它似乎对布局没有任何影响。

我试图将投影更改为：

```
 translate(" + d.x + "," + d.y + ")" 
```

我也尝试更改节点变量，但它似乎与我在投影上更改它具有相同的效果。

我想知道是否可以使用 treelayout 设置位置，但这是不允许的。

另外，我希望使用 svg.symbol，而不是使用 svg:circle：

```
 node.append("path")
       .attr("d", d3.svg.symbol().type(circle))
       .attr("transform", "translate(0,0)") 
```

然而，相反，它只显示线条，没有文字 - 不明白为什么。

所以基本上我试图定位孩子和我选择的根。

任何帮助或建议将不胜感激。 [http://jsfiddle.net/3twUr/2/](http://jsfiddle.net/3twUr/2/)

编辑：

var line = d3.svg.diagonal().data(data).enter()

```
 .source({x: d.x, y: d.y})
    .target({x: d.x, y: d.y});

    svg.append("path")
        .attr("fill", "none")
        .attr("stroke", "black")
        .attr("d", line);

     var pos = [{source: "A" ,target: 'A1'},
                {source: "A" , target: 'A2'} ]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:57:57.877

树布局（以及大多数其他布局）的重点在于它为您确定节点的位置。您尝试做的事情完全不受支持。

鉴于您已经有了节点位置，听起来简单地将符号和线条放置在您想要的位置会容易得多。也就是说，像

```
svg.selectAll("circle").data(Data.childrens)
   .enter()
   .append("circle")
   .attr("cx", function(d) { return d.x; })
   .attr("cy", function(d) { return d.y; }); 
```

同样对于链接，您需要自己计算。听起来您想将父节点链接到它们的子节点，所以这将相对简单。

这种方法还具有您可以自由使用所需的任何节点/链接样式的优点。

# android - 与以下用于 android 的 java 代码等效的 xml 是什么？

> ID：16178247
> 
> 赞同：0
> 
> 时间：2013-04-23T20:09:07.940
> 
> 标签：android

我正在尝试通过 xml 来实现这一点，但尝试失败的次数太多。我尝试创建两个按钮并通过 ViewId 调用它们，但由于它们是自定义按钮，因此它们不会显示在 UI 上。我该怎么办？

```
 LinearLayout ll = new LinearLayout(this);
            recButton = new CustomRecordButton(this);
            ll.addView(recButton,
                new LinearLayout.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT,ViewGroup.LayoutParams.WRAP_CONTENT,0));
            playButton = new CustomPlayButton(this);
            ll.addView(playButton, new LinearLayout.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT,0));
            setContentView(ll); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:15:57.857

这是一种可能的方法

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:app="http://schemas.android.com/apk/res-auto
android:layout_width="fill_parent"
android:layout_height="48dp"
android:orientation="horizontal" >

<package.to.my.CustomPlayButton
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"/>

<package.to.my.CustomPlayButton
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"/>

</LinearLayout> 
```

# drupal-6 - 如何在drupal 6的添加内容页面中放置两个cck字段

> ID：16178249
> 
> 赞同：0
> 
> 时间：2013-04-23T20:09:13.643
> 
> 标签：drupal-6, cck

我在 Drupal 6 中创建了一个内容类型。

我想将输入字段添加到数字和选择（下拉）字段以获取年/月。它们应该在添加内容页面中彼此相邻。

用户通过在文本输入中键入 3 并从下拉列表中选择月份来输入例如 3 个月。但我不知道我可以在 Druapl 6 中使用 CCK 做到这一点。

如果我添加两个字段，它们将与它们的标签一起显示，但我希望它们彼此相邻，它们之间没有任何标签。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:31:10.217

嘿，您可以使用“CCK 3.0 模块”并将字段组合在一起，这是最简单的解决方案，但不幸的是您将拥有标签。“ [http://drupal.org/project/cck](http://drupal.org/project/cck) ”。

或者另一种解决方案是使用他们的小部件制作您自己的自定义 cck 字段，这里的链接可以帮助您... [http://www.lullabot.com/blog/articles/creating-custom-cck-fields](http://www.lullabot.com/blog/articles/creating-custom-cck-fields)

[http://darcynorman.net/2008/05/02/creating-a-custom-compound-field-for-cck/](http://darcynorman.net/2008/05/02/creating-a-custom-compound-field-for-cck/)

# android - 未调用 RadioButton OnCheckChanged

> ID：16178251
> 
> 赞同：0
> 
> 时间：2013-04-23T20:09:14.020
> 
> 标签：android, expandablelistview, radio-group

从我的`MainView`( `ExpandableListView`) 我得到`RadioButton`defined `child_row.xml`，我设置了监听器，但`OnCheckChanged`没有被调用。如果我移动`RadioButton`到 currentview，它会被调用。

我怎样才能解决这个问题？

我有 ....

1.  mainListView.xml //可扩展列表视图

2.  group_row.xml //文本视图

3.  child_row.xml //有自定义radioButton

→

```
 public class Main_ListView extends Activity implements OnCheckedChangeListener{ 
 public void onCreate(Bundle savedInstanceState) {
 try{
         super.onCreate(savedInstanceState);
         setContentView(R.layout.mainListView);

      ExpandableListView elv = (ExpandableListView) findViewById(R.id.expandableListView1);
      SimpleExpandableListAdapter expListAdapter =
                new SimpleExpandableListAdapter(
                        getApplicationContext(),
                        createGroupList(),              // Creating group List.
                        R.layout.group_row,             // Group item layout XML.
                        new String[] { "Group Item" },  // the key of group item.
                        new int[] { R.id.row_name },    // ID of each group item.-Data under the key goes into this TextView.
                        createChildList(),              // childData describes second-level entries.
                        R.layout.child_row,             // Layout for sub-level entries(second level).
                        new String[] {"Sub Item"},      // Keys in childData maps to display.
                        new int[] { R.id.grp_child}     // Data under the keys above go into these TextViews.
                    );
                elv.setAdapter(expListAdapter);       // setting the adapter in the list.

        }catch(Exception e){
               System.out.println("Errrr +++ " + e.getMessage());
        }

    final LayoutInflater factory = getLayoutInflater();
    final View childview = factory.inflate(R.layout.child_row, null);

    answersGroup = (SegmentedRadioGroup) childview.findViewById(R.id.answersGroup);
    if(answersGroup != null)
       answersGroup.setOnCheckedChangeListener(this);

}
@Override   
public void onCheckedChanged(RadioGroup group, int checkedId) {
    if (group == answersGroup) {
        if (checkedId == R.id.radio0) {
            mToast.setText("One");
            mToast.show();
        } else if (checkedId == R.id.radio1) {
            mToast.setText("Two");
            mToast.show();
        } else if (checkedId == R.id.radio2) {
            mToast.setText("Three");
            mToast.show();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:11:33.433

您没有提供您使用的完整代码。如果您稍后将该膨胀的*childView*添加到`Activity`的布局中，那么您应该提供主布局以查看您是否没有以某种方式阻止`CheckBox`. 如果您只是膨胀布局，那么您不会得到选中的事件是正常的，因为*childView*在屏幕上没有可以操作的位置。

从您的代码的外观看来，您似乎想`CheckBox`为`ExpandableListView`. 如果这是您想要的，那么这是一个不正确的尝试，这样做的方法是为您的`ExpandableListView`. 有很多关于构建自定义适配器和设置子元素侦听器的教程（和这里的问题）。

# asp.net - 删除 ASP.Net 子菜单上的白色背景

> ID：16178260
> 
> 赞同：2
> 
> 时间：2013-04-23T20:09:58.770
> 
> 标签：asp.net, background

我正在创建一个导航菜单，并且我 (1) 正在努力删除选择子菜单时出现的白色背景。我已经搜索了高低，我尝试创建并将 z-index = 1000 的类添加到动态菜单样式以及简单地将背景设置为透明。您在子菜单后面看到的渐变是需要的，但不是所有的空白。另外，我希望整个菜单直接在部门标题下下拉。如果可能，请帮助我。几天来，我一直在寻找解决方案，并且访问了其他几个站点。如果可能的话，我希望使用 CSS 或 ASP.NET 控件的属性以编程方式解决这个问题。

参考：使用 .Net 4 语言 = VB 软件：Visual Studio Professional

问题图片：http: [//i1332.photobucket.com/albums/w601/OfficialMsRae/Menu_zps7051ce8a.png](http://i1332.photobucket.com/albums/w601/OfficialMsRae/Menu_zps7051ce8a.png)

这是我的 ASP.Net 代码：

```
<asp:Content ID="Content4" ContentPlaceHolderID="NavigationContentPlaceHolder" runat="server">
<form runat="server">
<div id="NavBarDiv">
    <asp:Menu runat="server" 
        CssClass="NavBar"
        DataSourceID="SiteMapDataSource"  
        MaximumDynamicDisplayLevels="4" 
        StaticEnableDefaultPopOutImage="false" 
        staticdisplaylevels="1"
        staticsubmenuindent="10" 
        target="_blank" 
        Font-Names="Calibri"  
        EnableViewState="false" 
        IncludeStyleBlock="false" 
        Orientation="Horizontal"
        BorderStyle="Solid"
        Borderwidth="1px">
        <LevelMenuItemStyles>
            <asp:MenuItemStyle CssClass="level1"/>
            <asp:MenuItemStyle CssClass="level2"/>
            <asp:MenuItemStyle CssClass="level3"/>
        </LevelMenuItemStyles>
        <StaticHoverStyle BackColor="Transparent" />

        <%--             <StaticSelectedStyle BackColor="White" BorderColor="Gray" BorderWidth="2px" />
        <StaticSelectedStyle BackColor="Black" />
        <StaticMenuItemStyle HorizontalPadding="5px" VerticalPadding="2px" />
        <DynamicHoverStyle BorderStyle="Double" BorderWidth="2px" BorderColor="Gray" />
        <DynamicMenuStyle BackColor="none" />
        <DynamicSelectedStyle BackColor="#000000" BorderStyle="Double" />

        <StaticHoverStyle BackColor="#000000" ForeColor="White" />--%>

    </asp:Menu>
    <asp:SiteMapDataSource ID="SiteMapDataSource" ShowStartingNode="false" runat="server" />
</div> 
```

这是我的样式表的链接： [https ://www.dropbox.com/s/rx8dr05gf6psxvm/Styles.css](https://www.dropbox.com/s/rx8dr05gf6psxvm/Styles.css)

任何帮助表示赞赏。如果我需要提供更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T04:12:50.767

我相信发生这种情况的原因是因为背景渐变只覆盖了文本的宽度。例如：

```
|[AR Dashboard]  |
|[AR Performance]| 
```

AR 性能更长，使盒子更大。你需要做的是给每个菜单项（AR Dashborad 和 AR Performance）一个固定的宽度，例如：

```
.menuItem {
    width: 100px;
    backgroundcolor: yourgradient;
} 
```

之后，它们应该看起来像你想要的：

```
|[AR Dashboard]||||
|[AR Performance]|| 
```

# protocol-buffers - 是否可以使用 protobuf 解析非 protobuf 消息？

> ID：16178263
> 
> 赞同：1
> 
> 时间：2013-04-23T20:10:01.227
> 
> 标签：protocol-buffers, protobuf-net

我正在做一个项目，我们使用协议缓冲区来创建和解析我们的一些消息（protobuf-net）。这太优雅了，我想使用相同的反序列化方法来解析来自外部非 protobuf 生成源的其他消息。这可能吗？

我想可以将所有 .proto 字段指定为固定大小（即不像变量整数）。那么问题是您是否可以用其他幻数或第 3 方协议使用的任何标头替换 protobuf 标头。

如果这有点令人困惑，一个例子可能会有所启发：假设您购买了一个暴露以太网端口的精美烤面包机。它支持专有但有据可查的协议。您可以使用 protobuf 在吐司上刻上心形图案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T05:55:26.897

目前，否：该库与 protobuf 线规范绑定；它不支持非 protobuf 数据。

在某种程度上，这有点像问：“可以`XmlSerializer`读/写 json 吗？”。老实说，这不是我要看的东西。

# java - 远程服务器上的 Maven Web 应用程序：缺少 html 文件

> ID：16178264
> 
> 赞同：0
> 
> 时间：2013-04-23T20:10:07.520
> 
> 标签：java, maven, tomcat, spark-java

我有一个使用 Spark 框架的 Java/Maven Web 应用程序，我正在尝试使用 Cargo 插件将其部署到远程 Tomcat 服务器。我从来没有使用 Java 做过这个，而且我很难处理静态文件。我的爆炸战争的目录结构是：

应用程序名称

-- 元信息

- 上市

---- 图像.jpg

---- html

------ 索引.html

-- 网络信息

当我使用以下代码时：

```
return "<html><body><img src='/app-name/public/image.jpg' /></body></html>"; 
```

我能够很好地渲染图像。我还可以通过访问 domain.com:8080/app-name/public/image.jpg 和 domain.com:8080/app-name/public/html/Index.html 来访问图像和 html 文件但是，当我尝试使用...呈现html

```
// location of the file on the server...
file = "/app-name/public/html" + file;
// location of the file on localhost
//file = "public/html/" + file;
BufferedReader buffer = new BufferedReader(new FileReader(file)); 
```

我遇到了 FileNotFoundException。它在 localhost 上运行良好（渲染功能也可以）。我只是在远程服务器上找不到 Index.html 文件。

对于那些熟悉[Spark](http://www.sparkjava.com/readme.html#title10)的人来说，你知道那里并没有太多的例子。我一边走一边编，我希望通过展示我走在正确轨道上的形象来做到这一点。有人有什么建议吗？我怀疑这一定是一个类路径问题，但我现在对此感到困惑。我只展示了最相关的片段；如果需要，我可以发布更多！

编辑：例外是：

```
java.io.FileNotFoundException: /app-name/public/html/Index.html (No such file or directory)
    at java.io.FileInputStream.open(Native Method)
    at java.io.FileInputStream.<init>(FileInputStream.java:138)
    at java.io.FileInputStream.<init>(FileInputStream.java:97)
    at java.io.FileReader.<init>(FileReader.java:58)
    at com.render.Render.parseFile(Render.java:35)
    at com.render.Render.render(Render.java:23)
    at com.main.Main$1.handle(Main.java:41)
    at spark.webserver.MatcherFilter.doFilter(MatcherFilter.java:136)
    at spark.servlet.SparkFilter.doFilter(SparkFilter.java:98)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:24:37.030

首先，您不能依赖相对路径。您不知道您正在执行的 JVM 选择设置当前工作目录的位置。

此外，servlet 规范不允许您直接访问文件，并且您不能依赖于战争的爆发。这些资源的自然位置是在 Classpath 上并作为资源读取。

# android - 尽管调用了 show()，但 ProgressDialog 未显示

> ID：16178268
> 
> 赞同：0
> 
> 时间：2013-04-23T20:10:31.207
> 
> 标签：android, progress-bar, show

我有一个奇怪的问题，正在创建一个对话框并调用“show()”，但在我的活动中不可见......

问题是它通过调用“show”，我在调试器中看到它，但什么都没有......

这是代码：

```
 protected void initializeSpinners() {
    spnPlayLists = (Spinner) findViewById(R.id.spnLists);
    spnProviders = (Spinner) findViewById(R.id.spnProvider);
    spnProviders.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> _spinner, View _parent,
                int _pos, long _id) {
            if (_spinner == spnProviders) {
                String[] playListsId = core.getAllPlayListsFrom(_pos);
                int items = playListsId.length;
                **showProgressDialog(items);**
                String[] playListsNames = new String[items];
                String[] playListsThumbs = new String[items];
                playLists = new PlayList[items];
                for (int i = 0; i < items; i++) {
                    String id = playListsId[i];
                    PlayList playList = core.getPlayList(id, true);
                    playLists[i] = playList;
                    playListsNames[i] = playList.title;
                    playListsThumbs[i] = playList.thumb;
                    handle.sendEmptyMessage(i);
                }
                loadPlayLists(playListsNames, playListsThumbs);
                myPd_bar.dismiss();
            }
        }

        @Override
        public void onNothingSelected(AdapterView<?> _arg0) {
        }

    });

    ProvidersArrayAdapter providersAdapter = new ProvidersArrayAdapter(this);
    spnProviders.setAdapter(providersAdapter);
} 
```

和调用的函数：

```
 private void showProgressDialog(int _items) {
    handle = new Handler() {
        @Override
        public void handleMessage(Message msg) {
            super.handleMessage(msg);
            myPd_bar.setProgress(msg.what + 1);
        }
    };

    myPd_bar = new ProgressDialog(Intro.this);
    myPd_bar.setMessage("Loading....");
    myPd_bar.setTitle("Please Wait..");
    myPd_bar.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
    myPd_bar.setProgress(0);
    myPd_bar.setMax(_items);
    **myPd_bar.show();**
} 
```

我在做什么坏事……？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:20:20.787

您的对话框可能在它出现之前就被关闭了。基本上，您的循环时间不够长，无法显示视图。

您是否尝试过注释掉解雇行并查看它是否出现？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T17:58:55.467

终于我意识到了。我将活动线程放在微调器中，因此在完成之前它不会显示任何内容！

这是我的解决方案，使用异步任务（正确地，我在播放列表加载和阻塞时使用它们很糟糕）

```
protected void setupDialog() {
    handle = new Handler() {
        @Override
        public void handleMessage(Message msg) {
            super.handleMessage(msg);
            if (msg.what < 0){
                loadPlayLists(playListsNames, playListsThumbs);
                myPd_bar.dismiss();
            } else {
                myPd_bar.setProgress(msg.what + 1);
            }
        }
    };

    myPd_bar = new ProgressDialog(Intro.this);
    myPd_bar.setMessage(WAIT_MESSAGE);
    myPd_bar.setTitle(WAIT_TITLE);
    myPd_bar.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
    myPd_bar.setProgress(0);
}

protected void initializeSpinners() {
    spnPlayLists = (Spinner) findViewById(R.id.spnLists);
    spnProviders = (Spinner) findViewById(R.id.spnProvider);
    spnProviders.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> _spinner, View _parent,
                int _pos, long _id) {
            if (_spinner == spnProviders) {
                String[] playListsId = core.getAllPlayListsFrom(_pos);
                int items = playListsId.length;
                myPd_bar.setMax(items);
                myPd_bar.show();
                new AsyncTask<String[], Integer, Long>(){

                    @Override
                    protected Long doInBackground(String[]... _playListsId) {
                        int items = _playListsId[0].length;
                        playListsNames = new String[items];
                        playListsThumbs = new String[items];
                        playLists = new PlayList[items];
                        for (int i = 0; i < items; i++) {
                            String id = _playListsId[0][i];
                            PlayList playList = core.getPlayList(id, true);
                            playLists[i] = playList;
                            playListsNames[i] = playList.title;
                            playListsThumbs[i] = playList.thumb;
                            publishProgress(i);
                        }
                        return null;
                    }

                    @Override
                    protected void onProgressUpdate(Integer... _progress) {
                        handle.sendEmptyMessage(_progress[0]);
                     }

                    @Override
                    protected void onPostExecute(Long _result) {
                        handle.sendEmptyMessage(-1);
                     }
                }.execute(playListsId);
            }
        }

        @Override
        public void onNothingSelected(AdapterView<?> _arg0) {
        }

    });

    ProvidersArrayAdapter providersAdapter = new ProvidersArrayAdapter(this);
    spnProviders.setAdapter(providersAdapter);
} 
```

# linux - 1and1 和简单的 htaccess 重定向失败

> ID：16178271
> 
> 赞同：-1
> 
> 时间：2013-04-23T20:10:35.907
> 
> 标签：linux, .htaccess, cloud, web-hosting

我们需要在 1 和 1 linux 主机上创建一个非常简单的 htaccess 文件，它将任何对“localfile.html”的请求重定向到与 htaccess 文件位于同一目录中的“localfile.php”。显示来自 localfile.php 的内容和 URL（文件名） localfile.html （仅设法使 1 和 1 htaccess 作为域 A 到域 B 的完整重定向工作，而不是我们需要的，并且 1 和 1 显然不提供支持脚本..)

代码是：我试过= RewriteEngine on RewriteRule ^localfile.html$ localfile.php [L] = 得到 404

更新：您可以使用 1and1 htaccess 文件执行的操作有限制

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:16:31.223

不确定我是否正确理解了这个问题。将 URL 路径重写`localfile.html`为`localfile.php`

```
RewriteEngine on
RewriteRule ^localfile.html$ localfile.php [L] 
```

如果要重定向，请添加[`R`](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_r)标志

```
RewriteRule ^localfile.html$ localfile.php [R,L] 
```

# sql-server - 使用控制器和代理将负载测试结果存储在数据库中

> ID：16178277
> 
> 赞同：0
> 
> 时间：2013-04-23T20:10:51.870
> 
> 标签：sql-server, load-testing

我有一个负载测试解决方案，其中包含一个负载测试和一个 Web 测试。我创建了负载测试解决方案所在的代理和设置了 SQL 服务器的控制器。所以我使用控制器将负载测试结果存储在数据库中。在运行测试用例时，我面临以下问题 -

**无法打开负载测试结果数据库。检查由测试控制器（或本地机器）的连接字符串指定的负载测试结果数据库是否指定了包含负载测试模式且当前可用的数据库。有关详细信息，请参阅 Visual Studio 帮助主题“关于负载测试结果存储”。连接错误是：尝试创建负载测试结果存储库架构时发生错误：要创建数据库“LoadTest2010”，您的用户帐户必须具有 SQL Server“sysadmin”角色或同时具有“serveradmin”和“dbcreator”角色**

注意 - 对于我的两个同事来说，相同的解决方案运行良好。所以我认为这与权限有关。我已经匹配了我和我的同事在控制器、代理、数据库上共享的权限，它们完全一样。

我被阻止了两天，如果有人能花一些时间帮助我，那就太好了。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T15:31:51.167

负载测试存储库在控制器级别配置。因此，如果其他人可以进行负载测试，则配置是可以的。

也许，您没有在测试中使用远程测试控制器（仅限本地测试）。您应该在 VS 中创建远程测试设置并指定远程测试控制器。

![在此处输入图像描述](https://i.stack.imgur.com/i1zHa.png)

# assembly - 如何使用 .intel_syntax 指定标签引用？

> ID：16178278
> 
> 赞同：0
> 
> 时间：2013-04-23T20:10:53.540
> 
> 标签：assembly, x86, gnu-assembler

我在尝试使用 .intel_syntax 正确组装某些 x86 指令时遇到了一些非常大的问题，使用 -m32 编译（即 32 位模式）。如果我有这样的代码：

```
 #define STACK_SIZE                      0x4000

    .att_syntax
    movl    $(stack + STACK_SIZE), %esp

    .comm   stack, STACK_SIZE 
```

...一切皆好。反编译后的输出如下所示（首先是 AT&T 语法，然后是 Intel 语法）。

```
100010:       bc 70 5a 10 00          mov    $0x105a70,%esp
100010:       bc 70 5a 10 00          mov    esp,0x105a70 
```

*但是*，如果我像这样更改我的代码（我觉得“应该”工作）：

```
 .intel_syntax noprefix
    mov     esp, stack + STACK_SIZE 
```

...我得到了这个输出：

```
100010:       8b 25 70 5a 10 00       mov    0x105a70,%esp
100010:       8b 25 70 5a 10 00       mov    esp,DWORD PTR ds:0x105a70 
```

显然，这是错误的；我不是要**取消引用**堆栈标签，而是创建对它的引用。

目前，我的解决方法是对文件的某些部分使用 AT&T 语法，对其余部分使用 Intel 语法。这感觉就像一个杂牌。不幸的是，关于 GAS Intel 模式的信息感觉有点稀疏；[此页面](http://www.lxhp.in-berlin.de/lhpas86.html#SEC245)提供了一些提示，但没有任何帮助。

提前谢谢了。如果我有足够的声望给你赏金，我会的。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T22:10:09.920

这似乎是对的。你是对的，没有太多的信息`.intel_syntax`。我写信给我在源代码中找到的一个女孩，询问是否有任何文档。她回答说没有，她只是对他们从英特尔那里得到的一些东西进行了逆向工程。我浏览了源代码，发现`offset flat:`（当时）这是必需的——冒号也是强制性的！现在，简单`offset`的似乎工作......并且可能还有更多可用的文档（？）。

我应该认为 Nasm 可以使用相同的工具链......不是吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T20:20:13.260

找到了！

我发现我必须这样写我的代码：

```
 mov     esp, offset stack + STACK_SIZE 
```

这感觉很愚蠢；我相信[NASM](http://www.nasm.us/)不会强迫我这样做。但是，我更喜欢在这个项目中使用 GAS 以避免构建它所需的工具链。如果有人想进一步阐述这个问题（例如确认或拒绝我的这个建议），请这样做，阅读你的想法也会很有趣。

（Egor Skriptunoff 在[这个问题](https://stackoverflow.com/questions/16121173/why-does-switching-from-att-to-intel-syntax-make-this-tutorial-segfault-using-g)上的评论让我明白应该如何使用 GAS 来完成。）

# windows - 从网络摄像头捕获时出现镜像

> ID：16178284
> 
> 赞同：0
> 
> 时间：2013-04-23T20:11:32.983
> 
> 标签：windows, video, webcam, directshow, image-capture

我正在使用基于[http://msdn.microsoft.com/en-us/library/windows/desktop/dd407288(v=vs.85).aspx#example_code示例的代码从网络摄像头捕获图像](http://msdn.microsoft.com/en-us/library/windows/desktop/dd407288(v=vs.85).aspx#example_code)

它工作正常，除了一件奇怪的事情：图像沿其 x 轴镜像，意味着它是自上而下的（但没有旋转 180 度）。

那么这怎么会发生呢？是否有可能导致这种行为的 DirectShow 选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:43:46.007

RGB 帧通常具有相反的行顺序，从下到上。规则是：

*   RGB 像素格式
    *   `BITMAPINFOHEADER::biHeight`> 0 - 自下而上的行
    *   `BITMAPINFOHEADER::biHeight`< 0 - 从上到下的行
*   YUV 像素格式
    *   无论从`BITMAPINFOHEADER::biHeight`符号（正负都有效） - 从上到下的行

虽然正值和负值`biHeight`都是有效的，但负值的传播和支持较少。许多过滤器只会拒绝具有负值的格式。

# jquery - Jquery - 查找单选按钮的值并更改另一个元素的 css

> ID：16178287
> 
> 赞同：0
> 
> 时间：2013-04-23T20:11:48.233
> 
> 标签：jquery

我有一个单选按钮组

```
<input type="radio" name="Q1" value="Yes />
<input type="radio" name="Q1" value="No /> 
```

我也有 2 个 div

```
<div id="Q4" style="display:none"> Some content</div>
<div id="Q5" style="display:none"> Some content</div> 
```

这就是我想使用 Jquery 做的事情

如果有人单击值为 Yes 的单选按钮 - 将 div id=Q4 设置为 display:block。如果有人单击值为 No 的单选按钮 - 将 div id=Q4 设置为 display:none 并设置 div id=Q5 display:block

我一直在尝试，但不是很成功。我在 jQuery 中使用了警报来尝试了解我做错了什么。谁能帮忙

```
$('input[type="radio"]').click(function(){
var userClick= $('input:radio[name=Q1]:checked').val();
switch(userClick){
  case 'Yes':
alert('Number1');
   case 'No':
     alert('Number2');    
  }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:15:12.803

你可以做

```
$('input[type="radio"]').change(function(){
    var value = this.value;

    if (value === "Yes") {
        $("#Q4").css("display", "block");
        $("#Q5").css("display", "none");
    }
    else {
        $("#Q5").css("display", "block");
        $("#Q4").css("display", "none");
    }
}); 
```

这是一个很好的工作演示：http: [//jsfiddle.net/byvvx/](http://jsfiddle.net/byvvx/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T20:18:07.587

您可以使用复选框的**名称**属性`change`在单选按钮上使用事件处理程序并处理显示。像这样的东西：

 **```
$("input[@name='Q1']").change(function(){
    var selected = this.value;

    if (selected === "Yes") {
        $("#Q5").css("display", "none");
        $("#Q4").css("display", "block");            
    }
    else {
        $("#Q4").css("display", "none");
        $("#Q5").css("display", "block");   
    }
}); 
```

并且复选框中缺少值末尾的双引号。希望这只是问题中的一个 ty[o。否则请更正。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T20:21:18.973

嘿，您可以使用 jQuery 的 show() 和 hide() 方法来显示您的 div。

尝试这样的事情：

```
$(document).ready(function() {
    $('input[type="radio"]').click(function(){
        var userClick= $('input:radio[name=Q1]:checked').val();

        if(userClick === "Yes") {
            $("#Q4").show();
            $("#Q5").hide();
        } else if(userClick === "No") {
            $("#Q5").show();
            $("#Q4").hide();
        }
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T20:23:41.730

这是一种简单的方法来执行您所描述的操作：

```
$('input[name=Q1]').click(function () {
    $('#Q4,#Q5').hide();
    if ($(this).val() == "Yes") $('#Q4').show();
    if ($(this).val() == "No") $('#Q5').show();
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/hPhmK/)****

# javascript - 动态地将可点击的行添加到表中

> ID：16178290
> 
> 赞同：1
> 
> 时间：2013-04-23T20:11:54.933
> 
> 标签：javascript, jquery

我正在尝试使用可点击的 JavaScript 将行添加到 HTML 中的表中。

这是我的代码：

HTML：

```
<table border="1" id="example" style="cursor: pointer;">
    <tr>
        <th>1</th>
        <th>2</th>
        <th>3</th>
        <th>4</th>
    </tr>
</table> 
```

JavaScript：

```
//clicked function
$('#example').find('tr').click( function(){
    alert('You clicked row '+ ($(this).index()) );
});

//add new row
var x=document.getElementById('example');
var new_row = x.rows[0].cloneNode(true);                      
new_row.cells[0].innerHTML = "hello";
x.appendChild( new_row ); 
```

问题是新添加的行是可点击的，但不会通过 clicked 函数来获取警报。

有谁知道为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T20:26:46.450

> 问题是新添加的行是可点击的，但不会通过 clicked 函数来获取警报。
> 
> 有谁知道为什么？

当您执行 click 事件到`tr`元素的初始绑定时，该事件仅绑定到当时`tr`存在于 DOM 中的元素。

这就是默认情况下事件绑定的工作方式。您只能绑定当前在 DOM 中的内容。

但是，使用 jQuery 1.7+ 的[**on()**](http://api.jquery.com/on)或 jQuery 1.6- 的[**delegate()**](http://api.jquery.com/delegate)方法，您可以将事件与委托绑定。

这允许您将事件绑定到您实际要将事件委托给的元素的最近的静态父元素。

我假设表本身是最接近的静态父元素，这意味着它始终存在并且您动态添加的只是`tr`元素。

在使用`on()`jQuery 1.7+ 时使用看起来类似于：

```
$('#example').on('click', 'tr', function(){
    alert('You clicked row '+ ($(this).index()) );
}); 
```

在使用`delegate()`jQuery 1.6- 时使用看起来与此类似：

```
$('#example').delegate('tr', 'click' , function(){
    alert('You clicked row '+ ($(this).index()) );
}); 
```

这将做的是将事件绑定到 id of 的元素，`example`但将点击委托给`tr`该元素内的任何点击。由于每次都委托事件，因此也将包括其中任何新添加`tr`的元素。`#example`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T20:17:56.147

试试这个：以下代码将处理动态添加的行。

```
//clicked function
$('#example').on('click', 'tr', function(){
    alert('You clicked row '+ ($(this).index()) );
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T20:18:23.273

您正在将 click 事件绑定到 document.ready。病房之后添加的新元素不会共享此绑定。

Yu 可以通过使用来实现你所追求的 `.on()`

```
$("body").on("click", "#example tr", function(event){
  alert('You clicked row '+ ($(this).index()) );
}); 
```

[演示](http://jsfiddle.net/eHR4q/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T20:33:51.893

这是你想要达到的目标吗？

```
<table border="1" id="example" style="cursor: pointer;">
    <thead>
        <tr>
            <th>1</th>
            <th>2</th>
            <th>3</th>
            <th>4</th>
        </tr>
    </thead>
    <tbody id="addHere"></tbody>
</table>

var addHere = document.getElementById("addHere");
var newTr;
var newTd;

function clicked(evt) {
    alert("clicked tr: " + evt.target.parentNode.id);
}

for (var i = 1; i < 11; i += 1) {
    newTr = document.createElement("tr");
    newTr.id = "row" + i;
    newTr.addEventListener("click", clicked, false);

    for (j = 1; j < 5; j += 1) {
        newTd = document.createElement("td");
        newTd.textContent = j;
        newTr.appendChild(newTd);
    }

    addHere.appendChild(newTr);
} 
```

在[jsfiddle上](http://jsfiddle.net/Xotic750/sn7Cr/)

在您的代码中，您似乎正在寻找行，然后将事件绑定到您找到的任何行。

然后继续使用[Node.cloneNode添加行](https://developer.mozilla.org/en-US/docs/DOM/Node.cloneNode)

> 克隆一个节点会复制它的所有属性和它们的值，包括内在（在线）监听器。它不会复制使用 addEventListener() 添加的事件侦听器或分配给元素属性的事件侦听器（例如 node.onclick = fn）。

所以没有事件处理程序绑定到任何这些新添加的元素。

处理此问题的另一种方法是使用[jquery 委托事件处理程序方法 (on)](http://api.jquery.com/on/)

> 当提供选择器时，事件处理程序被称为委托。当事件直接发生在绑定元素上时，不会调用处理程序，而只会调用与选择器匹配的后代（内部元素）。jQuery 将事件从事件目标冒泡到附加处理程序的元素（即，从最里面到最外面的元素），并为沿着该路径匹配选择器的任何元素运行处理程序。

并执行以下操作。

```
var addHere = document.getElementById("addHere");
var newTr;
var newTd;

function clicked(evt) {
    alert("clicked tr: " + evt.target.parentNode.id);
}

$(document).on("click", "#addHere tr", clicked);

for (var i = 1; i < 11; i += 1) {
    newTr = document.createElement("tr");
    newTr.id = "row" + i;

    for (j = 1; j < 5; j += 1) {
        newTd = document.createElement("td");
        newTd.textContent = j;
        newTr.appendChild(newTd);
    }

    addHere.appendChild(newTr);
} 
```

在[jsfiddle上](http://jsfiddle.net/Xotic750/3NsB7/)

# groovy - opennlp.groovy 有 NullPointerException

> ID：16178297
> 
> 赞同：0
> 
> 时间：2013-04-23T20:12:19.013
> 
> 标签：groovy, opennlp

我正在尝试从 GitHub 获取以下代码片段，以便我可以在 Groovy 脚本中使用 OpenNLP 工具。

[（来自https://gist.github.com/nagaimasato/1178725](https://gist.github.com/nagaimasato/1178725)的 OpenNLP 类）

```
#!/usr/bin/env groovy
@Grapes(
    @Grab(
      group='org.apache.opennlp',
      module='opennlp-tools',
      version='1.5.3'
    )
  )

import opennlp.tools.tokenize.*
import opennlp.tools.postag.*

OpenNLP nlp = new OpenNLP()

def tokens = nlp.workTokenize("Hello world")
println tokens

class OpenNLP {
    static TokenizerModel tokenizerModel
    static POSModel posModel
    static {
        def classLoader = OpenNLP.class.classLoader
        classLoader.getResource('opennlp/en-token.bin').withInputStream {
            tokenizerModel = new TokenizerModel(it)
        }
        classLoader.getResource('opennlp/en-pos-maxent.bin').withInputStream {
            posModel = new POSModel(it)
        }
    }

    Tokenizer tokenizer
    POSTagger tagger

    OpenNLP() {
        tokenizer = new TokenizerME(tokenizerModel)
        tagger = new POSTaggerME(posModel)
    }

    List workTokenize(String text) {
        return tokenizer.tokenize(text)
    }

    List posTag(List tokens) {
        return [tokens, tagger.tag(tokens)].transpose() 
    }
} 
```

尝试运行脚本时出现以下错误：

```
Caught: java.lang.ExceptionInInitializerError
java.lang.ExceptionInInitializerError
    at Greetings.class$(Greetings.groovy)
    at Greetings.$get$$class$OpenNLP(Greetings.groovy)
    at Greetings.run(Greetings.groovy:13)
Caused by: java.lang.NullPointerException: Cannot invoke method withInputStream() on null object
    at OpenNLP.<clinit>(Greetings.groovy:25)
    ... 3 more 
```

我在正确的位置有 en-token.bin 和 en-pos-maxent.bin 以便脚本找到，但是当我打印它时 classLoader.getResource("opennlp/en-token.bin") 确实为空。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-21T02:57:32.970

确保`en-token.bin`和`en-pos-maxent.bin`文件位于名为的目录`opennlp`中，并且类路径包含`opennlp`.

请注意，`./`当您执行 Groovy 脚本时，它包含在类路径中，因此如果您的`opennlp`目录与 Groovy 脚本位于同一目录中，并且您在该目录中时还调用了 Groovy 脚本，它应该可以工作（至少它可以工作）为了我）。但是，如果您在当前不在该目录中时执行脚本（例如，通过使用类似 的路径`path/to/script.groovy`），它将无法工作。在这种情况下，您可以使用 调用它`groovy -cp path/to path/to/script.groovy`，从而`opennlp`手动将目录的父目录放入类路径中。

# c# - Skype API System.IndexOutOfRangeException C#

> ID：16178306
> 
> 赞同：0
> 
> 时间：2013-04-23T20:13:05.743
> 
> 标签：c#, arrays, api, cmd, skype

所以我看到了一个程序，用c#编码。我不断收到错误。System.IndexOutOfRangeException 是主要的，它发生在“args [0]”。这是代码：

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;

    namespace Skype4COMUserProfile
    {
        class Program
        {
            private static SKYPE4COMLib.Skype skype = new SKYPE4COMLib.Skype();

            [STAThread]
            static void Main(string[] args)
            {
                if (!skype.Client.IsRunning)
                {
                    Environment.Exit(1);
                }
                    skype.Client.OpenUserInfoDialog(args[0]);
            }
        }
    } 
```

如果有人能告诉我如何解决这个问题，我将不胜感激。先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T20:14:49.333

`args`好吧，如果为空，那将失败。大概您打算通过指定用户名或类似名称来启动程序。

您可以随时检查：

```
if (args.Length == 0)
{
    // Show an error dialog here
    return;
} 
```

# android - 我需要等到活动完成才能继续，但只是有时

> ID：16178313
> 
> 赞同：0
> 
> 时间：2013-04-23T20:13:32.897
> 
> 标签：android, android-intent, android-activity

我的应用程序首先`InitActivity`检查登录状态，`LoginActivity`然后在继续执行某些逻辑之前进行相应的调用。

我知道我可以使用`startAcivityForResult()`and`onActivityResult()`来确保`LoginActivity`在做之前完成`doSomeMainLogic()`，但是我的`if`检查在其中抛出了一条曲线。如果我这样做：

```
public class InitActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        if (!userIsLoggedIn) {
            Intent intent = new Intent("com.example.myapp.LOGINACTIVITY");
            startActivityForResult(intent,1);
        }
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (requestCode == 1) {
            if (resultCode == RESULT_OK) {
                doSomeMainLogic();
            }
        }
    }

} 
```

`doSomeMainLogic()`如果用户已经登录，我该如何开火？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:15:37.840

```
public class InitActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        if (!userIsLoggedIn) {
            Intent intent = new Intent("com.example.myapp.LOGINACTIVITY");
            startActivityForResult(intent,1);
        }
        else {
            doSomeMainLogic();  // this part is added
        }
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (requestCode == 1) {
            if (resultCode == RESULT_OK) {
                doSomeMainLogic();
            }
        }
    }

} 
```

# sql - 这可以清理或浓缩吗？

> ID：16178315
> 
> 赞同：1
> 
> 时间：2013-04-23T20:13:40.067
> 
> 标签：sql, tsql

我想用一个`CASE`语句来清理一些，现在它运行大约 10 秒。希望将其压缩以及冗余代码调用。想知道是否有比`CASE`.

有 3 个独立的代码块。除了根据队列中的天数分配颜色之外，每个块都做几乎完全相同的事情。

绿色 少于 1 天。黄色任何大于 1 天但小于 3 天的东西。红色超过 3 天。

```
select m.number, 'status1', 'Green', datediff(day, (select max(datechanged) from statushistory where accountid = m.number), getdate())
from master m with (nolock)
inner join customer c with (nolock) on m.customer = c.customer
where m.status = 'status1'
and datediff(day, (select max(sh.datechanged) from statushistory sh where accountid = m.number), getdate()) <= 1
and qlevel < 998
and (m.desk not like 'ATY%')
and (isnull(m.link,0) = 0 or m.linkdriver = 1)
and m.desk not in ('param1','param2','param3','param4','param5','param6','param7','param8','param9','param10','param11','param12')

select m.number, 'status1', 'Yellow', datediff(day, (select max(datechanged) from statushistory where accountid = m.number), getdate())
from master m with (nolock)
inner join customer c with (nolock) on m.customer = c.customer
where m.status = 'status1'
and datediff(day, (select max(sh.datechanged) from statushistory sh where accountid = m.number), getdate()) between 1 and 2
and qlevel < 998
and (m.desk not like 'ATY%')
and (isnull(m.link,0) = 0 or m.linkdriver = 1)
and m.desk not in ('param1','param2','param3','param4','param5','param6','param7','param8','param9','param10','param11','param12')

select m.number, 'status1', 'Red', datediff(day, (select max(datechanged) from statushistory where accountid = m.number), getdate())
from master m with (nolock)
inner join customer c with (nolock) on m.customer = c.customer
where m.status = 'status1'
and datediff(day, (select max(sh.datechanged) from statushistory sh where accountid = m.number), getdate()) >= 3
and qlevel < 998
and (m.desk not like 'ATY%')
and (isnull(m.link,0) = 0 or m.linkdriver = 1)
and m.desk not in ('param1','param2','param3','param4','param5','param6','param7','param8','param9','param10','param11','param12') 
```

编辑#1

```
select m.number, 'status1', 
CASE 
    WHEN datediff(day, (select max(sh.datechanged) from statushistory sh where accountid = m.number), getdate()) <= 1 THEN 'Green'
    WHEN datediff(day, (select max(sh.datechanged) from statushistory sh where accountid = m.number), getdate()) between 1 and 3 THEN 'Yellow'
    WHEN datediff(day, (select max(sh.datechanged) from statushistory sh where accountid = m.number), getdate()) > 3 THEN 'Red'
END
, datediff(day, (select max(datechanged) from statushistory where accountid = m.number), getdate())
from master m with (nolock)
inner join customer c with (nolock) on m.customer = c.customer
where m.status = 'status1'
--and datediff(day, (select max(sh.datechanged) from statushistory sh where accountid = m.number), getdate()) <= 1
and qlevel < 998
and (m.desk not like 'ATY%')
and (isnull(m.link,0) = 0 or m.linkdriver = 1)
and m.desk not in ('param','param','param','param','param','param','param','param','param','param','param','param') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:47:12.050

```
with cte as (
    select 
        m.number, 
        m.status, 
        days = datediff(day, (select max(datechanged) from statushistory where accountid = m.number), getdate())
    from 
        master m with (nolock)
        inner join customer c with (nolock) on m.customer = c.customer
    where 
        m.status = 'status1'
        and d between 1 and 2
        and qlevel < 998
        and (m.desk not like 'ATY%')
        and (isnull(m.link,0) = 0 or m.linkdriver = 1)
        and m.desk not in ('param1','param2','param3','param4','param5','param6','param7','param8','param9','param10','param11','param12')

), colorThresholds as (
    select color = 'Green', minDays = null, maxDays = 1 union
    select 'Yellow', 2, 3 union
    select 'Red', 4, null
)

/* now apply the color thresholds */
select
    c.*,
    ct.color
from
    cte c
    /* outer join in case the thresholds don't cover all ranges */
    left outer join colorThresholds ct on
        (ct.minDays is null or c.days >= ct.minDays)
        and (ct.maxDays is null or c.days <= ct.maxDays) 
```

# sql - where not exists 子句 sql

> ID：16178317
> 
> 赞同：0
> 
> 时间：2013-04-23T20:13:51.910
> 
> 标签：sql, not-exists

所以我试图列出至少在一个班级但不属于一个小组的学生。我的代码显示 0 个结果，但应该有两个。我的 where 子句有问题。我可以让它显示学生参加一门或多门课程，但不能让它显示那些也不属于任何小组的学生。我的 where 子句有问题。我有 3 个相关的表。持有学生姓名和ID的Student，持有学生ID和组ID的Member of，持有组ID的studentgroup。

代码：

```
select student.lastname
from student inner join enrolled on enrolled.studentid = student.sid
where not exists(
select *
from studentgroup inner join memberof on memberof.groupid = studentgroup.gid 
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:18:40.267

如果将 where 子句从 更改`where not exists`为`where not in`怎么办？就像是

```
where student.id not in (select distinct student_id from member_of) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T20:19:35.533

您没有任何条件说明学生将如何与学生组关联。因此，`EXISTS`总是返回 true，但您想查看`EXISTS`返回 false 的行。

您可以`WHERE`在子查询中添加 以将学生与组关联。

```
SELECT student.lastname
FROM student INNER JOIN enrolled ON enrolled.studentid = student.sid
WHERE NOT exists(
SELECT *
FROM studentgroup INNER JOIN memberof ON memberof.groupid = studentgroup.gid
WHERE student.sid = memberof.studentid
) 
```

# visual-c++ - 打开 CV：IplImage 未定义

> ID：16178318
> 
> 赞同：0
> 
> 时间：2013-04-23T20:13:52.787
> 
> 标签：visual-c++, opencv, computer-vision, iplimage

我是开放式简历的新手。我想显示一张图片。这是我的代码：

```
#include "stdafx.h"
#include <cv.h>
#include <cvaux.h>
#include <highgui.h>

int main( int argc, char** argv ) {
    IplImage* img = cvLoadImage( "C:\Users\Cagin\Desktop\New.jpg" );
    cvNamedWindow( “Example1”, CV_WINDOW_AUTOSIZE );
    cvShowImage( “Example1”, img );
    cvWaitKey(0);
    cvReleaseImage( &img );
    cvDestroyWindow( “Example1” );
} 
```

就像不识别打开的 cv lib。您可以在我的解决方案窗口下方看到：

![在此处输入图像描述](https://i.stack.imgur.com/ZN532.png)

正如我之前所说，我对开放式简历很陌生。我的错误在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T21:23:55.680

你在这里处理一些遗留的 C 代码，你是故意这样做的吗？在最新版本下，这对您有用：

```
using namespace cv;
int main(int argc, char** argv) {
  Mat img = imread("C:\Users\Cagin\Desktop\New.jpg");
  namedWindow("Example1", CV_WINDOW_AUTOSIZE);
  imshow("Example1", img);
  waitKey(0);
} 
```

如果这不起作用，则意味着您没有正确配置 Visual Studio。尝试按照此处的说明操作：http: [//jepsonsblog.blogspot.com/2012/07/installation-guide-opencv-24-with.html](http://jepsonsblog.blogspot.com/2012/07/installation-guide-opencv-24-with.html)

# powershell - PowerShell 保存标准输出并显示标准输出

> ID：16178319
> 
> 赞同：1
> 
> 时间：2013-04-23T20:13:57.817
> 
> 标签：powershell

我正在使用 PowerShell 启动一个名为 GoodSync 的应用程序来为我执行备份。在该过程结束时，我将结果通过电子邮件发送给我。我还喜欢（有时）观察 PowerShell 窗口以密切关注它，并在处理过程中观察备份的状态。由于我的代码现在就在，stdout 将控制台，仅此而已。

**我的问题：**是否可以让标准输出进入控制台，并将其保存到变量中以供以后处理？

您可以看到我正在尝试使用 $output 变量，但无济于事。这是 $output 返回的错误：

```
You cannot call a method on a null-valued expression.
At GoodSync.ps1:119 char:42
+     $output = $proc.StandardOutput.ReadToEnd <<<< ()
    + CategoryInfo          : InvalidOperation: (ReadToEnd:String) [], Runtime
   Exception
    + FullyQualifiedErrorId : InvokeMethodOnNull

You cannot call a method on a null-valued expression.
At GoodSync.ps1:120 char:42
+     $output += $proc.StandardError.ReadToEnd <<<< ()
    + CategoryInfo          : InvalidOperation: (ReadToEnd:String) [], Runtime
   Exception
    + FullyQualifiedErrorId : InvokeMethodOnNull 
```

这是我的代码：

（并且从你们那里的所有大师那里变得有点主动，是的，我正在用这段代码做很多事情来输出到文件和标准输出，这样我就可以关注所有事情。这部分只是整个部分的一个片段文件。）

```
###############################
## Call the GoodSync process ##
###############################

# This is the section taken from http://stackoverflow.com/questions/8925323
# This is a known working section. However, right now I don't know how to save the stdout to variable and insert into email log file.
$procInfo = New-Object System.Diagnostics.ProcessStartInfo
$procInfo.FileName = "C:\Program Files\Siber Systems\GoodSync\gsync.exe"
$procInfo.UseShellExecute = $false
$procInfo.Arguments = '/progress=yes /exit sync MyBackupJobName'
$proc = New-Object System.Diagnostics.Process
$proc.StartInfo = $procInfo
$proc.Start() | Out-Host
(Get-Date -format T) + " - Loaded gsync.exe. Backup process running. Please stand by..." | Tee-Object -Variable RoboLog
$RoboLog >> $myLogFile
"" | Tee-Object -Variable RoboLog
$RoboLog >> $myLogFile
$proc.WaitForExit()
(Get-Date -format T) + " - Backup complete and gsync.exe has exited." | Tee-Object -Variable RoboLog
$RoboLog >> $myLogFile
"" | Tee-Object -Variable RoboLog
$RoboLog >> $myLogFile

# Now we take the exit code, write it to console and log file, and begin to build our email report. 
if ($proc.ExitCode -eq 0) { 
    "Success: GoodSync Reported: Analyze or Sync Successfully Completed." | Tee-Object -Variable RoboLog
    $RoboLog >> $myLogFile
    $subject = $RoboLog
    "" | Tee-Object -Variable RoboLog
    $RoboLog >> $myLogFile
} elseif ($proc.ExitCode -eq 1) {
    "Failure: GoodSync Error: Analyze had Terminal Errors. Did gsync.exe close abruptly?" | Tee-Object -Variable RoboLog
    $RoboLog >> $myLogFile
    $subject = $RoboLog
    "" | Tee-Object -Variable RoboLog
    $RoboLog >> $myLogFile
} elseif ($proc.ExitCode -eq 2) {
    "Failure: GoodSync Error: Sync had Terminal Errors. Did gsync.exe close abruptly?" | Tee-Object -Variable RoboLog
    $RoboLog >> $myLogFile
    $subject = $RoboLog
    "" | Tee-Object -Variable RoboLog
    $RoboLog >> $myLogFile
} else { 
    "Failure: GoodSync Error: General Error. Check log file." | Tee-Object -Variable RoboLog
    $RoboLog >> $myLogFile
    $subject = $RoboLog
    "" | Tee-Object -Variable RoboLog
    $RoboLog >> $myLogFile
}

# Grab the stdout and stderr to a variable
$output = $proc.StandardOutput.ReadToEnd()
$output += $proc.StandardError.ReadToEnd()
# The ReadToEnd() makes everything 1 long string, so we break it up by carriage return, and filter
$output -split "`n"
# Write to log file for email capture
$output >> $myLogFile

"" | Tee-Object -Variable RoboLog
$RoboLog >> $myLogFile

#---------------------------------------------------------------------------------------------------
# GoodSync backup jobs are now complete.
#--------------------------------------------------------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T20:29:58.173

`$proc.StandardOutput.ReadToEnd`( )的错误`You cannot call a method on a null-valued expression.`是因为您需要在`ProcessStartInfo`对象上设置这些属性：

```
$procInfo.RedirectStandardError = $true
$procInfo.RedirectStandardOutput = $true 
```

注意 - 设置这些时，控制台上*不会*显示输出。

这是一种将输出存储在变量中并将其显示在控制台上的方法`Tee-Object`：

```
& ping.exe localhost -n 1 | Tee-Object -Variable output
$output 
```

顺便说一句-您可以打开开关`$LASTEXITCODE`-例如

```
switch ($LASTEXITCODE) {
    0 {'good'}
    1 {'bad'}
    2 {'ugly'}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T20:34:23.690

为什么不将其作为后台作业运行？然后，您可以使用 Receive-Job 来获取输出（如果您使用 -Keep，则可以任意多次，并使用它做任何您想做的事情。

# c# - 使用来自 vmmap 的私有数据地址，我如何找出其中的内容？

> ID：16178320
> 
> 赞同：1
> 
> 时间：2013-04-23T20:14:03.510
> 
> 标签：c#, .net, windows, memory, vmmap

![在此处输入图像描述](https://i.stack.imgur.com/llRLG.png)

我有一个 Windows 进程，它的虚拟大小对于它的功能来说太大了（26gb） 我使用 VMMap 来绘制内存的布局方式，并且我已经获得了私有数据的地址，该地址显示为保留.

我如何查看里面的内容？有没有可能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-01-02T00:40:38.563

这是一个 64 位进程，您看到的不是异常，也不是内存泄漏的结果。

在 64 位窗口上，每个 64 位进程最多可以分配 128TB 的虚拟内存。这只是保留的内存，并不意味着它是已提交的内存。保留内存不由实际内存备份。

你可以在这里阅读更多：http: [//blogs.microsoft.co.il/sasha/2016/01/05/windows-process-memory-usage-demystified/](http://blogs.microsoft.co.il/sasha/2016/01/05/windows-process-memory-usage-demystified/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-23T20:17:46.880

此应用程序可能正在泄漏内存。如果是这样，那么内存消耗将随着时间无限增长。

如果您是开发人员，那么您可以使用内存分析器来找出应用程序没有释放哪些对象以及谁持有它们。

# json - 如何在 dojo 小部件中使用 json 成员对象

> ID：16178322
> 
> 赞同：1
> 
> 时间：2013-04-23T20:14:12.553
> 
> 标签：json, dojo, widget

我正在迭代一个格式是这样的json

```
request("js/my/data/sample.json", {
    handleAs: "json"
}).then(function (jsonResults) {
    arrayUtil.forEach(jsonResults.LinksMap, function (List) {
        arrayUtil.forEach(List.LinksMap.entry, function (Ientry) {
            var widget = new support(Ientry.Link).placeAt(authorContainer);
        });
    });
}); 
```

小部件 HTML 模板看起来像

```
 <div><span  title="${title}">${title}</span></div> <br />
 <div><span title="${description}">${description}</span></div> <br />
 <a class="info" title="${title}" href="${url}">${title}</a><br /> 
```

我想使用 json 中提供的对象 linkType 在小部件的 html 模板中使用不同的类，所以如果它 linkType 是“信息”，那么使用

```
 <a class="info" title="${title}" href="${url}">${title}</a><br /> 
```

如果是新闻，请使用

```
 <a class="news" title="${title}" href="${url}">${title}</a><br /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T20:27:43.570

此修改模板的组合：

```
<div><span  title="${Link.title}">${Link.title}</span></div> <br />
<div><span title="${Link.description}">${Link.description}</span></div> <br />
<a class="${className}" title="${Link.title}" href="${Link.url}">${Link.title}</a><br /> 
```

这个修改后的代码应该可以解决问题：

```
request("js/my/data/sample.json", {
handleAs: "json"}).then(function(jsonResults){  arrayUtil.forEach(jsonResults.LinksMap, function(List){arrayUtil.forEach(List.LinksMap.entry, function(Ientry){

  if('information' === Ientry.linkType) Ientry.className = 'info';
  else if('news link' === Ientry.linkType) Ientry.className = 'news';
  var widget = new support(Ientry).placeAt(authorContainer);

});});}); 
```

* * *

但更好的想法是`postCreate`在您的小部件中实现一个方法，该方法能够在构建后和显示之前以您喜欢的任何方式修改小部件。

请参阅[本指南](http://dojotoolkit.org/documentation/tutorials/1.6/recipes/custom_widget/)并在那里搜索*postCreate*。

# mysql - 如何在动态 SQL 脚本中使用稀疏列

> ID：16178324
> 
> 赞同：1
> 
> 时间：2013-04-23T20:14:18.433
> 
> 标签：mysql, sql, pivot-table, entity-attribute-value

我使用下面的 DYNAMIC SQL SCRIPT 来转换表

> (1,AttributeName1,Attributevalue1)
> (1,AttributeName2,Attributevalue2)
> (2,AttributeName1,Attributevalue1)
> (2,AttributeName2,Attributevalue2)
> 。
> .
> .
> (11113,属性名称2,属性值2)

将表格转换为以下格式

> (Datapoint,AttributeName1,AttributeName2,............AttributeNamen)
> (1,AttributeValue1,AttributeValue2,............ ....)
> (2,AttributeValue1,AttributeValue2,........)
> 。
> .
> .
> (11113,属性值1,属性值2,............)

==============动态 SQL 脚本=================

```
SET @sql = NULL;<br/>
SELECT<br/>
  GROUP_CONCAT(DISTINCT<br/>
    CONCAT(<br/>
      'max(CASE WHEN AttributeName = ''',<br/>
      AttributeName,<br/>
      ''' THEN AttributeValue END) AS `',
      AttributeName, '`'<br/>
    )<br/>
  ) INTO @sql<br/>
FROM yourtable;<br/>
<br/>

SET @sql <br/>
  = CONCAT('SELECT datapoint, ', @sql, ' <br/>
           from yourtable<br/>
           group by datapoint');<br/>

PREPARE stmt FROM @sql;<br/>
EXECUTE stmt;<br/>
DEALLOCATE PREPARE stmt;<br/> 
```

问题：我的 SQL 列数限制用完了。我知道我必须使用 SPARSE 列（因为我的表有很多 NULL 值）。

知道如何在上面的 SQL 脚本中使用 SPARSE 列吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:55:02.087

在这种情况下，我建议获取所有在数据库中组织的数据，并将结果后处理到 PHP 哈希数组中。这是一个伪代码示例，但我不知道您使用的是哪个 PHP API for MySQL：

```
$sql = "SELECT datapoint, AttributeName, AttributeValue FROM yourtable";

/* execute $sql */

$data = array();
while (/* $row = fetch one row */) {
  $data[$row["datapoint"]][$row["AttributeName"]] = $row["AttributeValue"];
} 
```

现在你有一个用于稀疏数据的散列数组数组 $data。

* * *

回复您的评论：

好吧，够公平的。如果您只想在 MySQL 中执行此操作，那么我上面的建议是不相关的。

您可能遇到了 GROUP_CONCAT() 生成的字符串长度的限制。group-concat 字符串的默认限制是 1024 字节。您的列是长表达式，每个至少有字符。因此，一个组连接字符串中最多可以有 15 个这样的表达式。

该 group-concat 字符串长度限制可以通过变量[`group_concat_max_len`](http://dev.mysql.com/doc/refman/5.6/en/server-system-variables.html#sysvar_group_concat_max_len). 您最多可以将其配置为 2 ^(32) -1 或 2 ^(64) -1 字节。

```
mysql> SET group_concat_max_len = 1024*1024*1024; /* 1GB */
mysql> SELECT GROUP_CONCAT(...) ... INTO @sql; 
```

然后，当您将该 @sql 字符串准备到查询中时，它将有很多列，但 IIRC 查询中列的限制为 4096。如果您超过了，我会感到惊讶。

# java - 转换数组列表 到 java.util.List

> ID：16178327
> 
> 赞同：8
> 
> 时间：2013-04-23T20:14:25.540
> 
> 标签：java, arrays, gwt, arraylist

我很难理解一个概念。我正在尝试将 a 转换`ArrayList<String>`为`List`（或`List<String>`），但我一直遇到强制转换异常。是的，我看到了将字符串数组转换为列表的代码，但我觉得这是一个不同的场景。我的相关代码在这里，请注意声明是因为我正在使用 GWT，因此必须将一些东西声明为静态和最终的......

```
private static List<String> values;
Ioma.dataservice.getPendingOrders(new AsyncCallback<ArrayList<Order>>(){
    @Override
    public void onFailure(Throwable caught) {
        // TODO Auto-generated method stub
    }
    @Override
    public void onSuccess(ArrayList<Order> result) {
        ArrayList<String> orderNumbers = new ArrayList<String>();               
        //problem here, cannot cast arraylist<string> to list string for some reason? idk. SO it maybe?
        for(int i=0;i<result.size();i++){
            System.out.println("ordernumber: " + result.get(i).getOrderNumber());
            System.out.println("arraysize: " + result.size());
            orderNumbers.add(Integer.toString(result.get(i).getOrderNumber()));                 
        }
        for (int i=0; i<orderNumbers.size();i++){
            values.add(orderNumbers.get(i));
        }
        cellList.setRowData(values);
    }

}); 
```

基本上我正在尝试创建一个需要 List 作为输入的 cellList。我从数据库查询中获取订单的arrayList，然后遍历以提取订单号，然后将其放入arrayList，然后我想将其转换为List 以在cellList 中使用。有人可以解释为什么我不能这样做以及正确的方法应该是什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-23T20:18:02.783

我不明白你遇到的问题，因为 an`ArrayList`实现了`List`一个`List`接口。

您可以更改此行

```
ArrayList<String> orderNumbers = new ArrayList<String>(); 
```

至：

```
List<String> orderNumbers = new ArrayList<String>(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-23T20:16:18.373

An`ArrayList<anything>`已经是 a `List<anything>`，因为`ArrayList`实现了`List`接口。不需要铸造。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T20:17:07.707

`java.util.List`是一个接口，并且`ArrayList<E>`已经实现了它，你不必强制转换任何东西

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T20:28:51.437

An`ArrayList`是 a `List`，所以我不确定会发生什么。不过，我确实有一个怀疑。查看文件顶部的导入。也许您在文件顶部有一行：

```
import java.awt.List; 
```

我已经告诉我的 IDE 不要将`java.awt.List`其用作`List`. 但是，您仍然编写了太多代码。考虑 Java 的`foreach`循环：

```
@Override
public void onSuccess(ArrayList<Order> result) {
    List<String> orderNumbers = new ArrayList<String>();               
    for (Order order: result) {
        orderNumbers.add(Integer.toString(order.getOrderNumber()));                 
    }
    values.addAll(orderNumbers);
    cellList.setRowData(values);
} 
```

但是您根本不需要 orderNumbers 变量。只需使用 values.add 而不是 orderNumbers.add。然后，你为什么要使用 a`List<String>`呢？你能在 a`List<Integer>`中生存并避免转换吗？

哎呀——你正在使用 GWT。Google 是否仍然建议程序员不要使用接口，这样它就不必在 Java 中生成每个具体的实现？

# php - div类中表格的输出

> ID：16178328
> 
> 赞同：0
> 
> 时间：2013-04-23T20:14:30.007
> 
> 标签：php, class, html, output

```
$resultSet = mysql_query("SELECT * FROM news ORDER BY id DESC LIMIT 7");
$product_count = mysql_num_rows($resultSet);
   if($product_count >0){

    while( mysql_fetch_array($resultSet)){
        $id= $row["id"];
        $cat= $row["categories"];
        $title= $row["title"];
        $image= $row["image"];
        $txt= $row["txt"];
        $res= $row["resource"];

        }
   }
     else  
        { echo'site is under maintaince ';}

       echo " <div class=\"row-fluid\">

     <div class=\"span6 post no-margin-left\">
      <figure>
       <img src=\"$image\" alt=\"Thumbnail 1\" />
       <div class=\"cat-name\">
        <span class=\"base\">'$cat'</span>
        <span class=\"arrow\"></span>
       </div>
      </figure>
      <div class=\"text\">
       <h2><a href=\"single_post.html\" title=\"$title\">'$title'</a></h2>
       <p>$txt</p>
       <div class=\"meta\">By <a href=\"$res\">' $res'</a>&nbsp;&nbsp;|&nbsp;&nbsp;'$date'&nbsp;&nbsp;|&nbsp;&nbsp;<a href=\"single_post.html\">15 comments</a></div>
      </div>
     </div>

       </div>";
   ?> 
```

该代码未显示表的输出结果。你能告诉我我做错了什么吗？我想在 div 类中显示输出。我的分页工作正常，但没有正确显示输出。你能指导我吗？我真的会很感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:28:15.557

```
while( mysql_fetch_array($resultSet)){
        $id= $row["id"];
        $cat= $row["categories"];
        $title= $row["title"];
        $image= $row["image"];
        $txt= $row["txt"];
        $res= $row["resource"];

        }
   } 
```

lopp 中的 $row 在哪里？但是，要填充所有结果，您需要在循环内打印，否则您将无法迭代它们

# c++ - C++ 中的线程控制台应用程序

> ID：16178332
> 
> 赞同：0
> 
> 时间：2013-04-23T20:14:42.353
> 
> 标签：c++, multithreading

我使用 (HANDLE)_beginthreadex() 创建了一个 C++ Windows 控制台应用程序，其中使用 x 处理程序线程控制了 1000 个工作线程。

最初我认为 1000 个处理程序线程会导致最快的时间，但经过测试我发现使用 100 个处理程序线程会导致最快的时间。测试在四核英特尔 i7 处理器（支持超线程）上进行

我不确定要写什么，因为我的推理为什么线程数会导致最佳性能。由于我的处理器只能同时处理 8 个线程，我会认为 8 会是最好的性能。

我正在写一份关于应用程序的小报告，并且必须确定导致最佳性能的线程数并解释为什么会这样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T20:20:35.240

理想情况下，您希望一次拥有 8个*活动*线程。8 通常不是理想的数字有很多原因，但可以肯定的是，您的线程中的工作不受 CPU 限制。如果在这种情况下线程太少，您会浪费时间，而太多线程当然会导致过度争用——并可能导致过多的上下文切换。

# c# - 在 Gstreamer (C#) 中使用管道播放音频

> ID：16178333
> 
> 赞同：1
> 
> 时间：2013-04-23T20:14:42.727
> 
> 标签：c#, audio, media, gstreamer, pipeline

我一直在为 GStreamer 苦苦挣扎，因为我找不到任何 C# 示例/教程。

据我所知，Gstreamer 使用管道进行解码，然后能够将例如歌曲发送到扬声器，但我尝试了以下方法，但没有成功：

```
 Gst.Element pipeline;
        string path = @"some_path.mp3";
        string command = "filesrc location=" + path + " ! oggdemux ! vorbisdec ! audioconvert ! gconfaudiosink";
        pipeline = Gst.Parse.Launch(command);
        pipeline.SetState(Gst.State.Playing); 
```

但是，它会在 Gst.Parse.Launch 行中引发异常

有谁知道任何好的应用程序示例，和/或实际上可以发布一些代码，这样我就可以开始习惯这个库了吗？另外，如果您能告诉我上面的代码有什么问题，我将不胜感激

事不宜迟，问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T05:46:45.163

只需将您的命令字符串更改为“filesrc location=”+ path+“！decodebin2！gconfaudiosink”，应该可以。

附带说明一下，您应该在命令行上使用 gst-launch 工具来检查您的管道是否正常工作并对其进行调试。还可以使用 gst-inspect 查找系统上可用的插件以及它们的功能。

# c# - 在代码隐藏中更改 li 类

> ID：16178334
> 
> 赞同：1
> 
> 时间：2013-04-23T20:14:44.463
> 
> 标签：c#, asp.net, webforms

有没有办法从 C# 代码隐藏向 HTML li 标签添加/删除类？例如，这是我的代码。

```
<li>
    <asp:Panel ID="pnlClipboardEbulletin" runat="server">
    <a href="/eBulletin.aspx"><asp:Label ID="lblClipboardEbulletin" runat="server" /></a>
    </asp:Panel>
 </li> 
 <li class="noborder">
     <asp:Panel ID="pnlClipboard" runat="server">
     <a href="/displayMyList.aspx"><img src="../Images/Clipboard.jpg" alt="Clipboard" /></a>
     <asp:HyperLink runat="server" ID="lnkClipboard" Text="Clipboard" NavigateUrl="~/displayMyList.aspx"></asp:HyperLink>
     </asp:Panel>
 </li> 
```

在代码隐藏中，我必须根据其他数据切换 pnlClipboard 的可见性。如果pnlClipboard = false，我想将第一个li的class设置为class="noborder"

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T20:19:05.163

为您的 li 标签提供`runat="server"`属性和 id。

```
<li runat="server" id="myli"> 
```

现在在您的代码中，您可以像使用任何控件一样使用它

```
myli.Attributes["class"] = "myClass"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T20:26:18.353

首先添加 runat="server" 和 ID 属性

*   您将能够从代码隐藏中访问它

    标记：

    ```
    <li runat="server" id="firstItem">
        <asp:Panel ID="pnlClipboardEbulletin" runat="server"> 
    ```

    代码隐藏：

    ```
    firstItem.Attributes["class"] = "noborder"; 
    ```

# php - 在 mySql 中连接多个表

> ID：16178338
> 
> 赞同：1
> 
> 时间：2013-04-23T20:14:50.790
> 
> 标签：php, mysql, database

请大家帮助我了解我的代码的语法

```
<?php
    $detail = mysql_query("SELECT O.geoLocation, O.vehicleId, O.date, OL.oCodeDescription, V.vMake, V.vModel, V.colour
                            FROM offense O, offenselist OL, vehicle V 
                            WHERE OL.oCode = O.offenseListId AND O.offenderNatId =  '$id' AND V.vehicleReg = O.vehicleId");

    while($db_field = mysql_fetch_assoc($detail)){
        $geo = $db_field['O.geoLocation'];
        $vid = $db_field['O.vehicleId'];
        $date = $db_field['O.date'];
        $offense = $db_field['OL.oCodeDescription'];                                                    
        $make = $db_field['V.vMake'];
        $model = $db_field['V.vModel'];
        $colour = $db_field['V.colour'];
        echo"   <tr><td>Date:</td><td>$date</td></tr>
                <tr><td>Offense</td><td>$offense</td></tr>
                <tr><td>Scene Location:</td><td>$geo</td></tr>
                <tr><td>Vehicle Registration No.:</td><td>$vid</td></tr>                                                        
                <tr><td>Vehicle Description:</td><td>$colour $make $model</td></tr>
                <tr><td colspan='2'>&nbsp;</td></tr>
                <tr><td colspan='2'>&nbsp;</td></tr>";

    }
?> 
```

它返回此错误之一：

未定义索引：第 142 行 C:\wamp\www\eroad\view.php 中的 O.geoLocation

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:29:53.690

您需要加入两个表之间共有的 ID，例如：

```
$detail = mysql_query(
    "SELECT O.geoLocation, O.vehicleId, O.date, OL.oCodeDescription, V.vMake, V.vModel, V.colour
    FROM offense O 
    INNER JOIN offenselist OL 
        ON O.offenseListId = OL.oCode
    INNER JOIN vehicle V 
        ON O.vehicleId = V.vehicleReg
    WHERE O.offenderNatId = '$id'" 
); 
```

应该做的伎俩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T20:40:31.613

我想你只需要输入`$db_field['geoLocation'];`而不是`$db_field['O.geoLocation'];`

# php - 在数据库中插入反斜杠

> ID：16178341
> 
> 赞同：0
> 
> 时间：2013-04-23T20:15:01.040
> 
> 标签：php, mysql

我有这个查询

```
 VALUES ('$name', 'img\\" . $image['name'] . "', '$category') 
```

它用于上传图像，我需要上传图像位置，因此需要 img\imagename.jpg

我正在为如何为 img\ 插入反斜杠而苦苦挣扎，因为一个会导致错误，并且由于某种原因双重输入 none 到数据库中。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T20:16:43.593

使用准备好的/参数化的查询。这样您就不必担心自己转义数据，并且免受 SQL 注入攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T20:33:02.483

这是您应该有的查询：

```
VALUES (:name, :img_name, :category) 
```

然后，[使用 PDO](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)和[SQL 占位符](http://bobby-tables.com/php)，您可以将值绑定到查询中的每个插入点，以确保正确转义。

# php - 在 ubuntu 12.10 的 htdocs 中看不到图像？

> ID：16178342
> 
> 赞同：0
> 
> 时间：2013-04-23T20:15:03.243
> 
> 标签：php, image, ubuntu, htdocs

我正在使用 Ubuntu 12.10，最近安装了 xampp 1.8.1。我的问题是：无法显示来自服务器的图像，如下图所示： ![图片未显示](https://i.stack.imgur.com/fGxXN.png)

看这里是在我的地址栏中我使用**localhost/madeTemplet/basicTemplet/templet03.html**并且我想在**Unsung** hero文本之后显示图像，但它只显示了一些链接而不是任何图像。

我将以下代码用于图像::

```
<div class="sideBlock unSung">
   <h4>Unsung heroes...</h4>
<a href="#"> <img src="_images/1_full.jpg" alt="Midnight Run" width="99" height="135" /> </a>

<a href="#"><img src="_images/2d7y3ki.jpg" alt="Wyatt Earp" width="99" height="135" /></a>
</div> 
```

但是当我使用以下内容时：

![显示图像](https://i.stack.imgur.com/Dypf6.png)

看这里是在我的地址栏中我使用**file:///opt/lampp/htdocs/madeTemplet/basicTemplet/templet03.html**并且图像显示在**无名英雄**文本之后。

检查访问图像所在目录的权限后，我在终端窗口中获​​得此文本::

```
 sabbir@sabbir-pc:/opt/lampp/htdocs/madeTemplet/basicTemplet/_images$ ls -l
  total 300
 -rw------- 1 sabbir sabbir 204067 Feb 24  2010 1_full.jpg
 -rw------- 1 sabbir sabbir  75789 Nov 13  2009 2d7y3ki.jpg
 -rw------- 1 sabbir sabbir  23692 Apr 21  2010 6AB32AE44600435B9DE0FB5EBA24A912.gif 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T20:16:28.530

您可能正在使用`file:///`路径来处理 HTML 页面中的图像。不要那样做；使用与服务页面相同的协议和主机名，即。`http://localhost`.

出于安全原因，对本地 ( `file://`) 路径的访问通常在浏览器内部受到限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-02T23:59:06.480

好像您没有更改信息的权限。因此，您必须更改该文件夹的权限。你可以做如下所示::

```
1) **cd **

2) **cd /opt/lampp/htdocs**

3) **chmod 777 * -R** 
```

# android - 如何更改列表活动列表的默认外观？

> ID：16178344
> 
> 赞同：-1
> 
> 时间：2013-04-23T20:15:12.533
> 
> 标签：android

我创建了一个列表活动类并制作了一个数组适配器。但是，我将如何更改它在运行时生成的列表的外观。比如我如何改变颜色、风格等。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:24:08.670

`styles.xml`您可以在文件夹中创建一个`values`然后执行类似的操作

```
<!-- ListView -->
<style name="List_Item" parent="@android:style/Widget.ListView">
    <item name="android:background">@drawable/list_item_bg</item>  // if you have a drawable you want to use
    //add whatever other attributes you want
</style> 
```

然后在 xml 中用你的`ListView`delcare 你的风格

```
 <ListView 
    android:id="@+id/listID"
    android:layout_width="match_parent"  
    android:layout_height="wrap_content"
    android:layout_below="@+id/search_plate"
    style="@style/List_Item"/>    //here you implement your style 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T20:22:53.243

您可以为[ListView](http://developer.android.com/reference/android/widget/ListView.html)或 ListView 中的任何 View使用[Theme & Styles](http://developer.android.com/guide/topics/ui/themes.html)和 xml 属性

# c# - Imgur API 版本 3 上传示例？

> ID：16178350
> 
> 赞同：4
> 
> 时间：2013-04-23T20:15:26.387
> 
> 标签：c#, post, httpresponse, image-uploading, imgur

我正在尝试将此功能添加到我正在开发的 C# Windows 应用程序中，用于将图像上传到 Imgur。

不幸的是，它必须是 Imgur，因为该站点是必需的。

问题是我能找到的任何 C# 示例代码都是旧的，并且似乎不适用于他们的版本 3 API。

所以我想知道是否有该领域的专业人士可以帮助我。

我更喜欢使用 OAuth 上传，而不是匿名选项，但如果需要，后者可以用作示例。

编辑：

我特别不明白的一部分是如何在保留*在*桌面应用程序中的同时进行授权步骤。授权步骤需要打开一个网页，询问用户是否允许应用程序使用他们的数据。

如何为基于桌面的应用程序执行此操作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-30T18:39:36.637

在开始之前，您需要注册您的应用程序以接收客户端 ID 和客户端密码。猜猜你已经意识到了。详细信息可以在官方[Imgur API 文档](https://api.imgur.com/oauth2)中找到。

关于身份验证，您是对的，用户必须访问网页并在那里获取并授权您的应用程序。您可以在应用程序中嵌入一些 Webbrowser 控件，也可以简单地指示用户浏览网页。

这是一些未经测试的代码，只需稍加修改即可使用。

```
class Program
    {
        const string ClientId = "abcdef123";
        const string ClientSecret = "Secret";

        static void Main(string[] args)
        {
            string Pin = GetPin(ClientId, ClientSecret);
            string Tokens = GetToken(ClientId, ClientSecret, Pin);

            // Updoad Images or whatever :)
        }

        public static string GetPin(string clientId, string clientSecret)
        {
            string OAuthUrlTemplate = "https://api.imgur.com/oauth2/authorize?client_id={0}&response_type={1}&state={2}";
            string RequestUrl = String.Format(OAuthUrlTemplate, clientId, "pin", "whatever");
            string Pin = String.Empty;

            // Promt the user to browse to that URL or show the Webpage in your application
            // ... 

            return Pin;
        }

        public static ImgurToken GetToken(string clientId, string clientSecret, string pin)
        {
            string Url = "https://api.imgur.com/oauth2/token/";
            string DataTemplate = "client_id={0}&client_secret={1}&grant_type=pin&pin={2}";
            string Data = String.Format(DataTemplate, clientId, clientSecret, pin);

            using(WebClient Client = new WebClient())
            {
                string ApiResponse = Client.UploadString(Url, Data);

                // Use some random JSON Parser, you´ll get access_token and refresh_token
                var Deserializer = new JavaScriptSerializer();
                var Response = Deserializer.DeserializeObject(ApiResponse) as Dictionary<string, object>;

                return new ImgurToken()
                {
                    AccessToken = Convert.ToString(Response["access_token"]),
                    RefreshToken = Convert.ToString(Response["refresh_token"])
                };
            }
        }
    }

    public class ImgurToken
    {
        public string AccessToken { get; set; }
        public string RefreshToken { get; set; }
    } 
```

# algorithm - 为每个输入重现相同数字的功能

> ID：16178353
> 
> 赞同：0
> 
> 时间：2013-04-23T20:15:29.637
> 
> 标签：algorithm, math

假设您有一些由 2 列和 10 亿行组成的数据，例如：

```
0,0
1,0
2,3
3,2
etc 
```

我想创建一个函数，如果给定来自第一列的输入，它将始终给出第 2 列中的内容，以便它将值从第一列映射到第二列，就像它在数据中出现的方式一样。

第 1 列从 0 到 1E9 连续（十亿）

第 2 列只能是 {0,1,2,3}

我不想只将数据存储在数组中。我想要可以计算此地图的代码。

有任何想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T20:22:13.877

如果键很密集，一维数组应该没问题，其中 weights[key] = weight

否则，如果键是稀疏的，则诸如字典之类的查找结构将起作用。

不确定您是否还需要关于随机部分的帮助，但累积总和和 rand(sum(weights)) 将随机选择权重较大的数字。

为清晰起见编辑权重是数组

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T15:59:50.803

假设@munch1324 是正确的，问题是：

给定 1000 个数据点的集合，动态生成与数据集匹配的函数。

那么是的，我认为这是可能的。但是，如果您的目标是让函数更紧凑地表示数据收集，那么我认为您不走运。

这里有两种可能性：

[分段定义函数](http://en.wikipedia.org/wiki/Piecewise)

```
int function foo(int x)
{
  if (x==0) return 0;
  if (x==1) return 0;
  if (x==2) return 3;
  if (x==3) return 4;
  ...
} 
```

[多项式插值](http://en.wikipedia.org/wiki/Polynomial_interpolation)

可以拟合 N 个数据点以精确匹配 N-1 次多项式。

给定 1000 个数据点的集合，使用您最喜欢的方法求解 999 度多项式的 1000 个系数。

你得到的函数将是：

```
int[] c; // Array of 1000 polynomial coefficients that you solved for when given the data collection
...
int function foo(int x)
{
  return c[999]*x^999 + c[998]*x^998 + ... + c[1]*x + c[0];
} 
```

这有明显的问题，因为您要存储 1000 个系数，并且会遇到将 x 值提高到如此高的幂的数值问题。

如果您正在寻找更高级的东西，[拉格朗日多项式](http://en.wikipedia.org/wiki/Lagrange_polynomial)将为您提供适合所有数据点的最小次数多项式。

# java - 使用 ArrayList 作为构造函数的参数

> ID：16178355
> 
> 赞同：-1
> 
> 时间：2013-04-23T20:15:32.637
> 
> 标签：java, constructor, arraylist

我正在尝试为一个接受 ArrayList （包含整数）作为其参数之一的类编写一个构造函数。稍后实例化此类时，我将传递一个适当的、预先填充的值列表，因此我不想在构造函数中创建一个空列表。

不幸的是，当我尝试编译下面的代码时，Java 吐出五个错误，都与第 23 行（我的构造函数的函数定义）有关。任何意见，将不胜感激：

```
/*
 * SumGenerator
 * 
 * @author James Scholes
*/

import java.util.ArrayList;
import java.util.Random;

public class SumGenerator
{
    // Some initial variables
    public int timesTable;
    public int multiple;

    /*
     * Constructor
     * 
     * @param timesTable(int): The times table to use for sum generation
     * @param limit(int): The highest multiple to use in sum generation
     * @param previousMultiples(ArrayList<Integer>): The previously used multiples to avoid sum duplication
    */
    public SumGenerator(int timesTable, int limit = 10, ArrayList<Integer> previousMultiples)
    {
        this.timesTable = timesTable;
        Random randomGenerator = new Random();

        // Create a list to store our multiples
        ArrayList<Integer> multiples = new ArrayList<Integer>();
        // and add our multiples to it, only if 
        // they haven't been used before
        for(int i = timesTable; i <= limit; i++)
        {
            if(previousMultiples.contains(i))
            {
                continue;
            }
            else
            {
                multiples.add(i);
            }
        }

        this.multiple = multiples.get(randomGenerator.nextInt(multiples.size()));
    }

}

SumGenerator.java:23: error: ')' expected
    public SumGenerator(int timesTable, int limit = 10, ArrayList<Integer> previousMultiples)
                                                 ^
SumGenerator.java:23: error: illegal start of type
    public SumGenerator(int timesTable, int limit = 10, ArrayList<Integer> previousMultiples)
                                                    ^
SumGenerator.java:23: error: <identifier> expected
    public SumGenerator(int timesTable, int limit = 10, ArrayList<Integer> previousMultiples)
                                                      ^
SumGenerator.java:23: error: ';' expected
    public SumGenerator(int timesTable, int limit = 10, ArrayList<Integer> previousMultiples)
                                                       ^
SumGenerator.java:23: error: <identifier> expected
    public SumGenerator(int timesTable, int limit = 10, ArrayList<Integer> previousMultiples)
                                                                                            ^
5 errors 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T20:16:56.017

Java 不支持默认参数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-23T20:17:17.723

您不能为 Java 中的参数提供默认值：`int limit = 10`. 要解决此问题，请提供重载的构造函数。一个没有`limit`并将为另一个提供默认值。

```
public SumGenerator(int timesTable, ArrayList<Integer> previousMultiples)
{
    this(timesTable, 10, previousMultiples);
}

public SumGenerator(int timesTable, int limit, ArrayList<Integer> previousMultiples)
{
    // Your constructor here.
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T20:17:17.390

```
public SumGenerator(int timesTable, int limit = 10, ArrayList<Integer> previousMultiples) 
```

删除`= 10`in `int limit = 10`。Java 不支持构造函数或方法参数的默认值。

# java - GAE 应用程序在本地工作，而不是在 appengine 上（远程复制）

> ID：16178359
> 
> 赞同：0
> 
> 时间：2013-04-23T20:15:39.740
> 
> 标签：java, google-app-engine, namespaces, google-cloud-datastore, multi-tenant

我使用 servlet 并使用数据存储和命名空间 api 编写了一个 Web 应用程序。

这在我的本地主机上效果很好，但从不将数据存储在已部署的副本上。

我遵循 java 文档的多租户以及另一个参考，以便我可以读取 xml 并将其存储在 BigTable 中。

使类持久化：

```
`@PersistenceCapable(identityType = IdentityType.APPLICATION)
public class Layout {

    @PrimaryKey
    @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
    private Key key;

    private String id;' 
```

存储数据：

```
`customerKey = KeyFactory.createKey(Layout.class.getSimpleName(), layout.getId());
            layout.setKey(customerKey);` 
```

现在让它持久化......

```
`pm = XMLImportPersistenceManagerFactory.get().getPersistenceManager();
            SAXParser saxParser = factory.newSAXParser();
            saxParser.parse(new InputSource(_URL_STRINGS), this);` 
```

然后关闭它...

```
pm.close() 
```

该代码在我的本地主机中运行良好。我可以在 appengine 上看到它不起作用。servlet 运行，但从未存储任何数据。

如果你点击 url，它会说 Layouts Created，我会在日志中看到 200，但没有数据。这告诉我 servlet 正在运行。这是我的应用程序：[http ://layoutimporter.appspot.com/CreateLayout?namespace=boston](http://layoutimporter.appspot.com/CreateLayout?namespace=boston)

一些关闭细节。我写了一个命名空间过滤器来根据查询字符串中的参数设置命名空间。

我正在运行一个预热 servlet 来初始化 PersistenceManagerFactory 以避免加载请求 = 1。

关于这个的任何想法。我已经用尽了我的资源，并且正在与“哎呀，我找不到你的种类......”等相关的所有相同线程中进行假脱机。

我尝试删除已部署的副本并启动新的已部署副本。我尝试还原已部署的副本。没有喜悦。当我在本地副本上保存命名空间和数据后，我可以输出命名空间和数据，但永远不会在远程副本上打印。这是一个真正的笨蛋！

谢谢！

..\温迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:55:05.533

我解决了这个问题

1）删除缓存在我的应用程序库中的jdo 1.5库（我已经切换到v2，但它们仍然存在。我删除它们的方法是启动一个新项目并复制我的代码。

这在本地揭示了一些问题，例如，现在我的本地主机中抛出了一个异常，指示我启用 xg 事务......

2) 将以下内容添加到 jdoconfig.xml ...

3）我正在使用交易。

我不完全理解解决方案，因为事务只是持久化布局类型的对象集合。我很高兴它有效。

现在，根据命名空间，数据被保存在生产（远程）副本以及我的本地主机上。

# php - 编译 PHP5.4 “检查 libxml 构建是否有效......否”

> ID：16178360
> 
> 赞同：0
> 
> 时间：2013-04-23T20:15:43.293
> 
> 标签：php

我是 Linux 用户（Fuduntu 2013.2 Distro）我在我的电脑上安装了 XAMPP，因为我想创建一个基于 joomla 的社交网络。问题是 XAMPP 在他们的 PHP 中默认禁用 zip，所以我下载了 PHP 5.4.14 的源代码并尝试使用相同的参数安装它，只添加“--enable zip”但它给了我一个错误。

这是我的句子：

```
./configure --prefix=/opt/lampp --with-apxs2=/opt/lampp/bin/apxs --with-config-file-path=/opt/lampp/etc --with-mysql=mysqlnd --enable-inline-optimization --disable-debug --enable-bcmath --enable-calendar --enable-ctype --enable-ftp --enable-gd-native-ttf --enable-magic-quotes --enable-shmop --disable-sigchild --enable-sysvsem --enable-sysvshm --enable-wddx --with-gdbm=/opt/lampp --with-jpeg-dir=/opt/lampp --with-png-dir=/opt/lampp --with-freetype-dir=/opt/lampp --with-zlib=yes --with-zlib-dir=/opt/lampp --with-openssl=/opt/lampp --with-xsl=/opt/lampp --with-ldap=/opt/lampp --with-gd --with-imap-ssl --with-imap=/opt/lampp --with-gettext=/opt/lampp --with-mssql=/opt/lampp --with-sybase-ct=/opt/lampp --with-interbase=shared,/opt/interbase --with-mysql-sock=/opt/lampp/var/mysql/mysql.sock --with-oci8=shared,instantclient,/opt/lampp/lib/instantclient --with-mcrypt=/opt/lampp --with-mhash=/opt/lampp --enable-sockets --enable-mbstring=all --with-curl=/opt/lampp --enable-mbregex --enable-zend-multibyte --enable-exif --with-bz2=/opt/lampp --with-sqlite=shared,/opt/lampp --with-sqlite3=/opt/lampp --with-libxml-dir=/opt/lampp --enable-soap --enable-pcntl --with-mysqli=mysqlnd --with-pgsql=shared,/opt/lampp/postgresql --with-iconv --with-pdo-mysql=mysqlnd --with-pdo-pgsql=/opt/lampp/postgresql --with-pdo-sqlite --enable-intl --with-icu-dir=/opt/lampp --enable-fileinfo --enable-phar --enable-zip 
```

这是输出：

```
configure: WARNING: unrecognized options: --enable-magic-quotes, --enable-zend-multibyte, --with-sqlite
checking for grep that handles long lines and -e... /bin/grep
checking for egrep... /bin/grep -E
checking for a sed that does not truncate output... /bin/sed
checking build system type... x86_64-unknown-linux-gnu
checking host system type... x86_64-unknown-linux-gnu
checking target system type... x86_64-unknown-linux-gnu
checking for cc... cc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... no
checking for suffix of executables... 
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking how to run the C preprocessor... cc -E
checking for icc... no
checking for suncc... no
checking whether cc understands -c and -o together... yes
checking how to run the C preprocessor... cc -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking minix/config.h usability... no
checking minix/config.h presence... no
checking for minix/config.h... no
checking whether it is safe to define __EXTENSIONS__... yes
checking whether ln -s works... yes
checking for system library directory... lib
checking whether to enable runpaths... yes
checking if compiler supports -R... no
checking if compiler supports -Wl,-rpath,... yes
checking for gawk... gawk
checking for bison... no
checking for byacc... no
checking for bison version... invalid
configure: WARNING: bison versions supported for regeneration of the Zend/PHP parsers: 1.28 1.35 1.75 1.875 2.0 2.1 2.2 2.3 2.4 2.4.1 2.4.2 2.4.3 2.5 2.5.1 2.6 2.6.1 2.6.2 (found: none).
checking for re2c... no
configure: WARNING: You will need re2c 0.13.4 or later if you want to regenerate PHP parsers.
checking whether to enable computed goto gcc extension with re2c... no
checking whether to force non-PIC code in shared modules... no
checking whether /dev/urandom exists... yes
checking for pthreads_cflags... -pthread
checking for pthreads_lib... 

Configuring SAPI modules
checking for AOLserver support... no
checking for Apache 1.x module support via DSO through APXS... no
checking for Apache 1.x module support... no
checking whether to enable Apache charset compatibility option... no
checking for Apache 2.0 filter-module support via DSO through APXS... no
checking for Apache 2.0 handler-module support via DSO through APXS... yes
checking for Apache 1.x (hooks) module support via DSO through APXS... no
checking for Apache 1.x (hooks) module support... no
checking whether to enable Apache charset compatibility option... no
checking for Caudium support... no
checking for CLI build... yes
checking for Continuity support... no
checking for embedded SAPI library support... no
checking for FPM build... no
checking for Zeus ISAPI support... no
checking for LiteSpeed support... no
checking for Milter support... no
checking for NSAPI support... no
checking for PHTTPD support... no
checking for Pi3Web support... no
checking whether Roxen module is build using ZTS... no
checking for Roxen/Pike support... 
checking for thttpd... no
checking for TUX... no
checking for webjames... no
checking for CGI build... yes
checking for socklen_t in sys/socket.h... yes
checking for sun_len in sys/un.h... no
checking whether cross-process locking is required by accept()... no
checking for chosen SAPI module... apache2handler
checking for executable SAPI binaries...  cli cgi

Running system checks
checking for sendmail... /usr/sbin/sendmail
checking whether system uses EBCDIC... no
checking whether byte ordering is bigendian... no
checking whether writing to stdout works... This is the test message -- yes
checking for socket... yes
checking for socketpair... yes
checking for htonl... yes
checking for gethostname... yes
checking for gethostbyaddr... yes
checking for yp_get_default_domain... no
checking for __yp_get_default_domain... no
checking for yp_get_default_domain in -lnsl... yes
checking for dlopen... no
checking for __dlopen... no
checking for dlopen in -ldl... yes
checking for sin in -lm... yes
checking for inet_aton... yes
checking for ANSI C header files... (cached) yes
checking for dirent.h that defines DIR... yes
checking for library containing opendir... none required
checking for inttypes.h... (cached) yes
checking for stdint.h... (cached) yes
checking for dirent.h... yes
checking for ApplicationServices/ApplicationServices.h... no
checking for sys/param.h... yes
checking for sys/types.h... (cached) yes
checking for sys/time.h... yes
checking for netinet/in.h... yes
checking for alloca.h... yes
checking for arpa/inet.h... yes
checking for arpa/nameser.h... yes
checking for assert.h... yes
checking for crypt.h... yes
checking for dns.h... no
checking for fcntl.h... yes
checking for grp.h... yes
checking for ieeefp.h... no
checking for langinfo.h... yes
checking for limits.h... yes
checking for locale.h... yes
checking for monetary.h... yes
checking for netdb.h... yes
checking for pwd.h... yes
checking for resolv.h... yes
checking for signal.h... yes
checking for stdarg.h... yes
checking for stdlib.h... (cached) yes
checking for string.h... (cached) yes
checking for syslog.h... yes
checking for sysexits.h... yes
checking for sys/ioctl.h... yes
checking for sys/file.h... yes
checking for sys/mman.h... yes
checking for sys/mount.h... yes
checking for sys/poll.h... yes
checking for sys/resource.h... yes
checking for sys/select.h... yes
checking for sys/socket.h... yes
checking for sys/stat.h... (cached) yes
checking for sys/statfs.h... yes
checking for sys/statvfs.h... yes
checking for sys/vfs.h... yes
checking for sys/sysexits.h... no
checking for sys/varargs.h... no
checking for sys/wait.h... yes
checking for sys/loadavg.h... no
checking for termios.h... yes
checking for unistd.h... (cached) yes
checking for unix.h... no
checking for utime.h... yes
checking for sys/utsname.h... yes
checking for sys/ipc.h... yes
checking for dlfcn.h... yes
checking for assert.h... (cached) yes
checking for fopencookie... yes
checking for broken getcwd... no
checking for broken libc stdio... yes
checking whether struct tm is in sys/time.h or time.h... time.h
checking for struct tm.tm_zone... yes
checking for missing declarations of reentrant functions... done
checking for fclose declaration... ok
checking for tm_gmtoff in struct tm... yes
checking for struct flock... yes
checking for socklen_t... yes
checking size of size_t... 8
checking size of long long... 8
checking size of long long int... 8
checking size of long... 8
checking size of int... 4
checking size of intmax_t... 8
checking size of ssize_t... 8
checking size of ptrdiff_t... 8
checking for struct stat.st_blksize... yes
checking for struct stat.st_blocks... yes
checking for struct stat.st_rdev... yes
checking for size_t... yes
checking for uid_t in sys/types.h... yes
checking for struct sockaddr_storage... yes
checking for field sa_len in struct sockaddr... no
checking for IPv6 support... yes
checking for vprintf... yes
checking for _doprnt... no
checking for alphasort... yes
checking for asctime_r... yes
checking for chroot... yes
checking for ctime_r... yes
checking for cuserid... yes
checking for crypt... no
checking for flock... yes
checking for ftok... yes
checking for funopen... no
checking for gai_strerror... yes
checking for gcvt... yes
checking for getloadavg... yes
checking for getlogin... yes
checking for getprotobyname... yes
checking for getprotobynumber... yes
checking for getservbyname... yes
checking for getservbyport... yes
checking for gethostname... (cached) yes
checking for getrusage... yes
checking for gettimeofday... yes
checking for gmtime_r... yes
checking for getpwnam_r... yes
checking for getgrnam_r... yes
checking for getpwuid_r... yes
checking for grantpt... yes
checking for inet_ntoa... yes
checking for inet_ntop... yes
checking for inet_pton... yes
checking for isascii... yes
checking for link... yes
checking for localtime_r... yes
checking for lockf... yes
checking for lchown... yes
checking for lrand48... yes
checking for memcpy... yes
checking for memmove... yes
checking for mkstemp... yes
checking for mmap... yes
checking for nl_langinfo... yes
checking for perror... yes
checking for poll... yes
checking for ptsname... yes
checking for putenv... yes
checking for realpath... yes
checking for random... yes
checking for rand_r... yes
checking for scandir... yes
checking for setitimer... yes
checking for setlocale... yes
checking for localeconv... yes
checking for setenv... yes
checking for setpgid... yes
checking for setsockopt... yes
checking for setvbuf... yes
checking for shutdown... yes
checking for sin... yes
checking for snprintf... yes
checking for srand48... yes
checking for srandom... yes
checking for statfs... yes
checking for statvfs... yes
checking for std_syslog... no
checking for strcasecmp... yes
checking for strcoll... yes
checking for strdup... yes
checking for strerror... yes
checking for strftime... yes
checking for strnlen... yes
checking for strptime... yes
checking for strstr... yes
checking for strtok_r... yes
checking for symlink... yes
checking for tempnam... yes
checking for tzset... yes
checking for unlockpt... yes
checking for unsetenv... yes
checking for usleep... yes
checking for utime... yes
checking for vsnprintf... yes
checking for vasprintf... yes
checking for asprintf... yes
checking for nanosleep... yes
checking for nanosleep in -lrt... yes
checking for getaddrinfo... yes
checking for __sync_fetch_and_add... yes
checking for strlcat... no
checking for strlcpy... no
checking for getopt... yes
checking for utime.h... (cached) yes
checking whether utime accepts a null argument... yes
checking for working alloca.h... yes
checking for alloca... yes
checking for declared timezone... yes
checking for type of reentrant time-related functions... POSIX
checking for readdir_r... yes
checking for type of readdir_r... POSIX
checking for in_addr_t... yes
checking for crypt_r... no

General settings
checking whether to include gcov symbols... no
checking whether to include debugging symbols... no
checking layout of installed files... PHP
checking path to configuration file... /opt/lampp/etc
checking where to scan for configuration files... 
checking whether to enable PHP's own SIGCHLD handler... no
checking whether to explicitly link against libgcc... no
checking whether to enable short tags by default... yes
checking whether to enable dmalloc... no
checking whether to enable IPv6 support... yes
checking whether to enable DTrace support... no
checking how big to make fd sets... using system default

Configuring extensions
checking size of long... (cached) 8
checking size of int... (cached) 4
checking for int32_t... yes
checking for uint32_t... yes
checking for sys/types.h... (cached) yes
checking for inttypes.h... (cached) yes
checking for stdint.h... (cached) yes
checking for string.h... (cached) yes
checking for stdlib.h... (cached) yes
checking for strtoll... yes
checking for atoll... yes
checking for strftime... (cached) yes
checking which regex library to use... php
checking whether to enable LIBXML support... yes
checking libxml2 install dir... /opt/lampp
checking for xml2-config path... /opt/lampp/bin/xml2-config
checking whether libxml build works... no
configure: error: build test failed.  Please check the config.log for details. 
```

首先，我不明白为什么我会得到那些第一个“无法识别的选项：--enable-magic-quotes、--enable-zend-multibyte、--with-sqlite”

无论如何，这里是 config.log 以获得更多详细信息：

[http://www.mediafire.com/view/?x1vqg1vhyzt46sg](http://www.mediafire.com/view/?x1vqg1vhyzt46sg)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T21:29:47.860

*   [Magic Quotes 在 5.3 中被移除](http://php.net/manual/en/security.magicquotes.php)。
*   sqlite => --with-sqlite3
*   --enable-zend-multibyte 应该可以工作，但我认为你不需要它。它所做的只是[检测脚本是否为 unicode](https://serverfault.com/a/145430)

通常编译错误是由于缺少库（libxml2-dev、libxml2 等）或 ./configure 行中的路径不正确造成的。查看您的配置行，它看起来像是在 /opt/lammp.xml 中寻找 libxml。你确定你的xml库放在那里吗？如果您从包管理器中安装了库，则它们应该放在 /usr/lib 中，在这种情况下，您*不需要*指定库路径，除非您将其放置在默认位置以外的其他位置。

就个人而言，我只编译我需要的东西。您可能不需要使用 XAMMP 编译的所有默认值。

# perl - 有没有办法用 __PACKAGE__-> 在同一个模块中设置继承？

> ID：16178361
> 
> 赞同：-1
> 
> 时间：2013-04-23T20:15:43.933
> 
> 标签：perl, class, inheritance, constructor, dbi

例如，我想在启动时存储 dbi 连接的数据，这样我就不必通过对象对其进行初始化，他们是否可以在同一个包中执行此操作？

通过我的对象初始化将是：

```
my $obj = foo->new;
my $dbh = $obj->connect('dbi', 'user', 'pw'); 
```

但我想在启动时将它存储到我可以使用的地方

```
my $obj = foo->new;
my $blah = $obj->selectall_arrayref(...);

package foo; 

use strict; 
use warnings;  

__PACKAGE__->connect('dbi', 'user', 'pw');    

sub new {   
 my $class = shift;   
 my $self  = {};   
 bless ($self, $class);   
 return $self; 
}   

 sub connect {   
  my $class = shift;   
  my $self  = ref $class || $class;   
  return $self->(@_);     # Is this possible? 
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T21:14:53.193

子类化 DBI 类并不是很简单，只需[阅读文档](https://metacpan.org/module/DBI#Subclassing-the-DBI)即可。其他方式可能是声明一个[代理对象，并在](https://metacpan.org/module/Class%3a%3aProxy)[AUTOLOAD](http://perldoc.perl.org/perlsub.html#Autoloading)的帮助下调用包装的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T03:15:33.117

使用代理对象的替代方法是简单地将 DBI 组合到您的类中。

```
package foo;    
use DBI;

sub new {   
    my $class = shift;
    my $self  = {DBH => DBI->connect(@_)};   
    bless ($self, $class);   
    return $self; 
}

# defer method call to DBH
sub selectall_arrayref {shift->{DBH}->selectall_arrayref(@_)}

package main;    
my $obj = foo->new('dbi:...', 'user', 'password');
my $blah = $obj->selectall_arrayref(...); 
```

# asp-classic - CDO 组件偶尔挂起

> ID：16178365
> 
> 赞同：0
> 
> 时间：2013-04-23T20:15:55.123
> 
> 标签：asp-classic, cdo.message

我有一个使用大量电子邮件向客户确认操作的网站。随着网站的增长，从页面生成的电子邮件数量也在增长。

最近，我们开始看到该网站（或至少任何正在发送电子邮件的人）挂起一两分钟。我会把它归结为网络问题，但办公室里的人一直在提出它，所以我已经调查过了。事实证明，虽然电子邮件在 95% 的情况下都正常，但有时电子邮件发送似乎会挂起一段时间，然后这会挂起跟踪发送邮件的任何其他人。就好像 CDO 只是冻结并阻止队列中的任何人。

我已经通过在调用 CDO 之前立即编写数据库记录来证明这一点。发送并在之后立即更新其上的结束时间字段......之前的记录有 99% 的时间存在，但不时有之后的记录NULL 日期/时间，因此永远不会调用更新。

CDO 似乎没有日志。

该代码是正确的，因为它在故障前后都可以工作。有任何想法吗？

编辑：刚刚意识到同时从两台不同的 PC 使用电子邮件模块时会发生错误。我们正在谈论一个从我们的客户发送运输确认的模块。使用条形码扫描仪，我们将订单号和运输号扫描到应用程序中，然后 javascript 函数重定向到 ASP 页面，详细信息将包含在 QueryString 中的电子邮件中。

如果有人发现它相关，很高兴发布代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T07:34:44.960

可能是其中一个电子邮件地址不是真实的电子邮件地址，或者一个电子邮件地址未经您的邮件服务授权？

我问这个是因为我在 IIS 中为第一次运行设置站点时总是会遇到这样的错误。大多数情况下，不允许本地主机（邮件服务器）为该用户或域中继。但是，通过已配置并启用或至少允许从您的 Web 服务器中继的邮件服务器进行路由通常可以解决问题。

# javascript - D3.js 设置初始缩放级别

> ID：16178366
> 
> 赞同：37
> 
> 时间：2013-04-23T20:15:56.140
> 
> 标签：javascript, d3.js, zooming

我设置了几个图表来放大容器，效果很好。但是，在初始加载时，缩放级别太接近了。有没有一种方法可以设置初始缩放级别以避免必须先缩小？我熟悉该`.scale()`方法，但没有任何运气来实施它。这是要走的路还是我错过了什么？

这是我迄今为止与缩放有关的内容：

```
var margin = {top: 20, right: 120, bottom: 20, left: 120},
    width = 50000 - margin.right - margin.left,
    height = 120000 - margin.top - margin.bottom;

var x = d3.scale.linear()
    .domain([0, width])
    .range([0, width]);

var y = d3.scale.linear()
    .domain([0, height])
    .range([height, 0]);

var tree = d3.layout.tree()
    .size([height, width])
    .separation(function(a, b) { return (a.parent == b.parent ? 1 : 2) / a.depth; });

var diagonal = d3.svg.diagonal()
    .projection(function(d) { return [d.x, d.y]; });

function zoom(d) {        
  svg.attr("transform",
      "translate(" + d3.event.translate + ")"+ " scale(" + d3.event.scale + ")");
}

var svg = d3.select("body").append("svg")
    .attr("width", width + margin.right + margin.left)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")")
    .attr("pointer-events", "all")
    .call(d3.behavior.zoom()
        .x(x)
        .y(y)
        .scaleExtent([0,8])
        .on("zoom", zoom))
        .append('g');

svg.append('rect')
    .attr('width', width*5)
    .attr('height', height)
    .attr('border-radius', '20')
    .attr('fill', 'sienna'); 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2016-11-17T18:37:00.330

> # D3v4 答案

如果您在这里寻找相同但使用 D3 v4，

```
var zoom = d3.zoom().on("zoom", function(){
    svg.attr("transform", d3.event.transform);
});

vis = svg.append("svg:svg")
     .attr("width", width)
     .attr("height", height)
     .call(zoom) // here
     .call(zoom.transform, d3.zoomIdentity.translate(100, 50).scale(0.5))
     .append("svg:g")
     .attr("transform","translate(100,50) scale(.5,.5)"); 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-06-11T19:30:28.897

我终于通过将**初始**变换和缩放行为设置为相同的值来实现这一点。

```
var zoom = d3.behavior.zoom().translate([100,50]).scale(.5);

vis = svg.append("svg:svg")
     .attr("width", width)
     .attr("height", height)
     .call(zoom.on("zoom",zooming))
           .append("svg:g")
           .attr("transform","translate(100,50)scale(.5,.5)"); 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2017-09-26T23:29:32.200

*适用于 d3.js **v4***

这类似于[davcs86 的 answer](https://stackoverflow.com/questions/16178366/d3-js-set-initial-zoom-level/40662571#40662571)，但它重用了初始变换并实现了缩放功能。

```
// Initial transform to apply
var transform = d3.zoomIdentity.translate(200, 0).scale(1);
var zoom = d3.zoom().on("zoom", handleZoom);

var svg = d3.select("body")
  .append('svg')
  .attr('width', 800)
  .attr('height', 300)
  .style("background", "red")
  .call(zoom)                       // Adds zoom functionality
  .call(zoom.transform, transform); // Calls/inits handleZoom

var zoomable = svg
  .append("g")
  .attr("class", "zoomable")
  .attr("transform", transform);    // Applies initial transform

var circles = zoomable.append('circle')
  .attr("id", "circles")
  .attr("cx", 100)
  .attr("cy", 100)
  .attr('r', 20);

function handleZoom(){
  if (zoomable) {
    zoomable.attr("transform", d3.event.transform);
  }
}; 
```

实际操作：[jsbin 链接](http://jsbin.com/yoxeqopoco/3/edit?html,output)

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2014-06-30T22:54:55.787

将此答案添加为已接受答案的附录，以防任何人仍有问题：

让这很容易理解的事情是看[这里](https://web.archive.org/web/20140706172458/http://truongtx.me/2014/03/13/working-with-zoom-behavior-in-d3js-and-some-notes)

话虽如此，我设置了三个变量：

缩放、缩放宽度和缩放高度

scale 是您希望缩放的初始比例，然后

zoomWidth 和 zoomHeight 定义如下：

```
zoomWidth = (width-scale*width)/2
zoomHeight = (height-scale*height)/2 
```

其中 width 和 height 是“vis” svg 元素的宽度和高度

然后将上面的翻译修改为：

```
.attr("transform", "translate("+zoomWidth+","+zoomHeight+") scale("+scale+")") 
```

以及缩放功能：

```
d3.behavior.zoom().translate([zoomWidth,zoomHeight]).scale(scale) 
```

这样做可以有效地确保您的元素在加载可视化时被缩放和居中。

让我知道这是否对您有帮助！干杯。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-04-12T09:55:29.470

我正在使用 d3 和 react 并且对初始缩放不起作用感到非常沮丧。

我在这里尝试了解决方案，但没有一个有效，而是使用初始比例因子和位置，然后根据这些比例因子和位置更新缩放功能

```
const initialScale = 3;
const initialTranslate = [
  width * (1 - initialScale) / 2,
  height * (1 - initialScale) / 2,
];

const container = svg
  .append('g')
  .attr(
    'transform',
    `translate(${initialTranslate[0]}, ${initialTranslate[1]})scale(${initialScale})`
  ); 
```

缩放功能看起来像这样

```
svg.call(
  zoom().on('zoom', () => {
    const transformation = getEvent().transform;
    let {x, y, k} = transformation;
    x += initialTranslate[0];
    y += initialTranslate[1];
    k *= initialScale;

    container.attr('transform', `translate(${x}, ${y})scale(${k})`);
  })
); 
```

如果您注意到`getEvent()`as 函数，那是因为`d3-selection`在我的情况下导入事件 from 不起作用。所以我不得不做

```
const getEvent = () => require('d3-selection').event; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-03-17T12:35:21.937

## D3JS 6 个答案

假设您希望初始位置和比例分别为`x`, 。`y``scale`

```
const zoom = d3.zoom();

const svg = d3.select("#containerId")
    .append("svg")
    .attr("width", width)
    .attr("height", height)
    .call(zoom.transform, d3.zoomIdentity.translate(x, y).scale(scale)
    .call(zoom.on('zoom', (event) => {
        svg.attr('transform', event.transform);
     }))
    .append("g")
    .attr('transform', `translate(${x}, ${y})scale(${k})`); 
```

`.call(zoom.transform, d3.zoomIdentity.translate(x, y).scale(scale)`确保在触发缩放事件时，`event.transform`变量会考虑平移和缩放。紧随其后的行处理缩放，而最后一行用于在“启动”时应用平移和缩放一次。

# geocoding - google-geocoding 响应的结果和地址组件为空类型数组。期待“前提”

> ID：16178370
> 
> 赞同：1
> 
> 时间：2013-04-23T20:16:04.270
> 
> 标签：geocoding, google-geocoding-api

最近我的代码收到了一个结果，其中包含一个地理编码结果，但结果和建筑物的 address_component 都有一个空的“类型”数组。

阅读文档后，我预计“类型 []”将填充“前提”或类似的东西。从文档：

```
The types[] array indicates the type of the returned result. This array contains a set of one or more tags identifying the type of feature returned in the result. 
```

此输入间接来自外部来源，因此在这种情况下，我不能简单地省略建筑物名称或以其他方式轻松修改我的请求。

这是 API wrt 建筑物/场所中的错误吗？或者这有点无证，但仍然有效/预期？

地理编码的地址是：“Barclay Tower 10 Barclay Street, New York”

```
http://maps.googleapis.com/maps/api/geocode/json?sensor=false&address=Barclay+Tower+10+Barclay+Street%2C+New+York 
```

回应是：

```
{"status": "OK",
 "results": [{..
  "address_components": [
      "address_components": [{
          "long_name": "Barclay Tower",
          "short_name": "Barclay Tower",
          "types": []
        },
        ...
 "formatted_address": "Barclay Tower, 10 Barclay Street, New York, NY 10007, USA",
 "types": []
 }]
} 
```

# multithreading - Qt (4.8) 使用 AutoConnection 行为调用插槽的最简单方法

> ID：16178371
> 
> 赞同：-2
> 
> 时间：2013-04-23T20:16:06.123
> 
> 标签：multithreading, qt, signals, qobject, slot

我有这样的事情：

```
class Thing : public QObject {
  ...
  public slots:
    void doSomething ();
  ...
}; 
```

然后我有一个管理事物的对象，如下所示：

```
class ManyThings : public QObject { 
  ...
  public: 
    void makeThingDoSomething (int thingIndex);
  private:
    QVector<Thing *> things_;
  ...
}; 
```

我的问题是：ManyThing 集合中的事物分散在几个不同的线程中。我想让 makeThingDoSomething(int) 调用 things_[thingIndex]->doSomething() 插槽，就好像插槽是从与 Qt::AutoConnection 连接的信号中调用的一样。本质上是这样，但如果 Thing 与调用者位于不同的线程上，则使用 Qt 的排队机制：

```
void ManyThings::makeThingDoSomething (int thingIndex) {
  // i want to do this AutoConnection style, not direct:
  things_[thingIndex]->doSomething();
  // doesn't *need* to block for completion
} 
```

最简单的设置方法是什么？我可以在 ManyThings 中发出信号并将其连接到 Thing 的每个插槽，但随后发出该信号将调用每个 Thing 上的插槽，而不仅仅是特定的插槽。有什么方法可以轻松设置连接，以便我可以根据传递给信号的索引参数将相同的信号连接到不同对象的插槽，或者其他什么？或者以某种方式使用 Qt 的信号/槽机制调用槽，而无需实际创建信号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:40:28.247

尝试使用[`QMetaObject::invokeMethod`](http://qt-project.org/doc/qt-4.8/qmetaobject.html#invokeMethod)：

```
void ManyThings::makeThingDoSomething(int thingIndex) {
   QMetaObject::invokeMethod(things_[thingIndex], "doSomething", 
                             Qt::AutoConnection);
} 
```

请注意，`doSomething`如果您使用这种方法，可能必须保留一个插槽。

# php - 从第一个字符中删除双 0 直到找到第一个数字

> ID：16178379
> 
> 赞同：0
> 
> 时间：2013-04-23T20:16:32.540
> 
> 标签：php, preg-replace

我对这些数字有疑问：

> 000000000480000.00
> 
> 000000001300000.00
> 
> 000000000300500.00
> 
> 000004000300500.00

如何删除重复的 0，直到发现第一个数字 1-9 变为：

> 480000.00
> 
> 1300000.00
> 
> 300500.00
> 
> 4000300500.00

我需要一个`preg_replace()`PHP 函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:18:23.757

```
$number = preg_replace("#^0{0,}#", "", $number); 
```

这将从字符串中删除所有第一个零。

还有一个解决方案`ltrim()`：

```
$number = ltrim($number, '0'); 
```

# css - CSS：在悬停时减轻元素

> ID：16178382
> 
> 赞同：57
> 
> 时间：2013-04-23T20:16:49.627
> 
> 标签：css, opacity, rgba, hsl

假设一个元素处于 100% 的饱和度、不透明度等状态......当它悬停时，我怎样才能让它的**背景变得稍微亮一些？**

用例是我允许用户将鼠标悬停在页面上的任何元素上。我不想四处确定每种颜色的不透明度为 80%。

一种方法是更改​​，`opacity: 0.4`但我只想更改背景。

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2014-09-27T11:02:35.920

这是很久以前的事了，但你可以这样做：

```
.element {
    background-color: red;
}
.element:hover {
    box-shadow: inset 0 0 100px 100px rgba(255, 255, 255, 0.1);
} 
```

您可以将 100px 更改为您想要的数字。我拿了一个大的来覆盖整个元素。

这不是一个非常漂亮的解决方案，但它有效！

这里是一个例子：http: [//jsfiddle.net/6nkh3u7k/5/](http://jsfiddle.net/6nkh3u7k/5/)

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2016-11-30T18:50:19.913

这是一个简单的方法：

```
.myElement:hover {
  filter: brightness(150%);
} 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2019-08-27T15:28:23.573

我使用[box-shadow](https://developer.mozilla.org/en-US/docs/Web/CSS/box-shadowhadow)属性来控制背景颜色的亮度，通过放置一个半透明的覆盖

例子：

```
.btn {

  background-color: #0077dd;

  display: inline-flex;
  align-content: center;
  padding: 1em 2em;
  border-radius: 5px;
  color: white;
  font-size: 18px;
  margin: 0.5em;
  cursor: pointer;
}

.btn.brighten:hover {
  box-shadow: inset 0 0 0 10em rgba(255, 255, 255, 0.3);
}

.btn.darken:hover {
  box-shadow: inset 0em 0em 0em 10em rgba(0, 0, 0, 0.3);
}
```

```
<span class="btn brighten">Brighten on Hover</span>
<span class="btn darken">Darken on Hover</span>
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-04-23T20:22:09.353

您应该使用 RGBa 方法 ( `background-color:rgba(R,G,B,alpha);`) 来执行此操作：

```
.element{
    background-color:rgba(0,0,0,1); /*where 1 stands for 100% opacity*/
} 
.element:hover{
    background-color:rgba(0,0,0,0.5); /*where 0.5 stands for 50% opacity*/
} 
```

[**小提琴**](http://jsfiddle.net/yrg3v/)

如果你强烈需要让它在 IE8 或更低版本中工作，它是这样来的：

```
.element:hover{
background: transparent;
-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#7F000000,endColorstr=#7F000000)"; /* IE8 */
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#7F000000,endColorstr=#7F000000);   /* IE6 & 7 */
      zoom: 1;
} 
```

请注意，`startColorstr`和`endColorstr`值是这样构建的`#AARRGGBB`（其中 AA 是 Alpha 通道），如果您不希望从一种颜色到另一种颜色的渐变效果，则必须相同。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-04-23T20:28:47.007

我会使用`:after`伪元素而不是传统的背景。它在 IE8 中受支持，而在哪里`rgba()`不支持。

HTML：

```
<div class="hoverme">
    <p>Lorem ipsem gimme a dollar!</p>
</div> 
```

CSS：

```
.hoverme {
    position: relative;
}
.hoverme:after {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
    background-color: #fff;
    z-index: -1;
}

.hoverme:hover:after {
    background-color: #ddd;
} 
```

或类似的东西。

[http://caniuse.com/#search=%3Aafter](http://caniuse.com/#search=%3Aafter)

要获得更平滑的结果，请添加 CSS3 过渡：

```
.hoverme:after {
  -webkit-transition: all 0.3s ease-out;  /* Chrome 1-25, Safari 3.2+ */
     -moz-transition: all 0.3s ease-out;  /* Firefox 4-15 */
       -o-transition: all 0.3s ease-out;  /* Opera 10.50–12.00 */
          transition: all 0.3s ease-out;  /* Chrome 26, Firefox 16+, IE 10+, Opera 12.10+ */
} 
```

上一个片段是从[http://css3please.com复制和粘贴的](http://css3please.com)

[http://jsfiddle.net/ghodmode/6sE9E/](http://jsfiddle.net/ghodmode/6sE9E/)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-04-23T21:05:36.423

您可以仅使用 CSS 来执行此操作，`filter: brightness();`但目前仅在 WebKit 浏览器中受支持。见[http://jsfiddle.net/jSyK7/](http://jsfiddle.net/jSyK7/)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-04-23T20:34:31.173

您想`background-color`在不使用不透明度的情况下更改悬停的任何元素的亮度。**很遗憾。如果不`background-color`为悬停设置特定值，我认为这是不可能的。**

> 用例是我允许用户将鼠标悬停在页面上的任何元素上。我不想四处确定每种颜色的不透明度为 80%。

我可以想到一种替代方法，但它需要在整个元素上覆盖一个半透明的 PNG 覆盖，这也将覆盖元素的任何内容。从而无法解决您的问题。

相关问题：[按百分比 CSS (Javascript) 将颜色动态更改为更亮或更暗](https://stackoverflow.com/questions/1625681/dynamically-change-color-to-lighter-or-darker-by-percentage-css-javascript)

# javascript - 使用 Javascript 优化性能的框架

> ID：16178384
> 
> 赞同：-2
> 
> 时间：2013-04-23T20:16:54.720
> 
> 标签：javascript, performance

这是一种不寻常的情况，所以请原谅我的奇怪标题。我一直在研究优化用于操作服务器数据的 HTML 界面。所有数据都通过 REST 服务传递，并且现有的 jQuery 方法可用于拉取和提交数据。

问题在于，由于用于动画和操作屏幕的大量 Javascript 代码，所有这些都运行得很慢。显然我可以在一定程度上优化 javascript 代码，但是界面太慢了，我想知道是否还有其他框架我应该考虑利用。我没有能力利用任何服务器端，如 PHP。

如果没有其他框架，我计划将大部分代码移至 jQuery 以提高可读性并利用其他人在那里所做的优化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:31:43.193

请看一下AngularJS。它是一个专门为数据驱动的网站设计的框架（由 Google 提供）。它建立在 jQuery 之上。它提供了一个 $resource 服务，可用于为您的网站开发您自己的 REST 客户端。其目的是通过抽象较低级别的 HTTP 调用来增强代码的可读性和性能。

你也可以看看 Dojo，但它有一个巨大的学习曲线。

# mysql - 如何仅获取可用产品尺寸的列表？

> ID：16178392
> 
> 赞同：0
> 
> 时间：2013-04-23T20:17:20.150
> 
> 标签：mysql

我有两个表**Sizes_description**（衣服尺寸）和**库存**数量。我想知道有哪些尺寸的库存。如果我尝试以下查询，我还会得到没有库存的尺寸。

* * *

```
| SIZES_DESCRIPTION   |
-----------------------
id  size1 size2 size3 
-----------------------
1      M      L     X  
2     40     42    43  
-----------------------

-----------------------------
| STOCK                     |
-----------------------------
id  sizeId qty1 qty2 qty3
-----------------------------
1     2       0    5    0
2     1      42   43    0
----------------------------- 
```

如果我尝试以下方法，我也会得到没有库存的尺寸

```
select s.size1,s.size2,s.size3 from SIZES_DESCRIPTION as s, stock as stock WHERE s.id=stock.sizeId AND (stock.qty1>0 OR stock.qty2>0 OR qty3>0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T22:16:58.710

```
Select sd.size1
From sizes_description sd
INNER JOIN Stock s On
sd.id = s.sizeId
Where s.qty1 > 0

UNION ALL

Select sd.size2
From sizes_description sd
INNER JOIN Stock s On
sd.id = s.sizeId
Where s.qty2 > 0

UNION ALL

Select sd.size3
From sizes_description sd
INNER JOIN Stock s On
sd.id = s.sizeId
Where s.qty3 > 0 
```

# visual-studio-2008 - C# DataGridView 无法编辑

> ID：16178407
> 
> 赞同：0
> 
> 时间：2013-04-23T20:17:55.803
> 
> 标签：visual-studio-2008, datagridview

我有一个 DataGridView 控件，其数据源在运行时设置为 LINQ 对象。数据按预期显示。但是，当我尝试编辑数据时，什么也没有发生。在填充网格后，我在代码中添加了行，以查看网格第一行和第一列的内容。我惊讶地发现第一列的只读属性设置为 True，即使它在设计器中设置为 False。为什么是这样？这是在运行时将控件连接到 LINQ 对象的结果吗？

这是一个 C# windows 窗体应用程序，使用 MS Visual Studio 2008 开发

罗伯

# sql-server-2008 - 在 CRM 中将自定义报告从开发转移到生产

> ID：16178409
> 
> 赞同：0
> 
> 时间：2013-04-23T20:17:56.893
> 
> 标签：sql-server-2008, dynamics-crm-2011, reporting-services

我将 CRM 开发实例中的自定义构建报告移至生产环境，但在运行时遇到错误。

CRM 开发实例位于服务器上。我有一个 SQL Server，我在其中创建了报告 (BIDS)。我将 .RDL 文件从 SQL Server 复制到本地驱动器。我将报告上传到生产，但遇到以下错误：

> 无法显示报告 (rsProcessingAborted)，参数无效。

一些附加信息：

*   数据来源：Microsoft SQL Server(SQL Client)
*   服务器名称：“我的服务器名称”
*   Windows 身份验证
*   数据库：“我的数据库”

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T21:29:00.917

如果这仍然是您的问题，请尝试此处的建议：

[http://nishantrana.wordpress.com/2011/05/26/reporting-error-report-cannot-be-displayed-rsprocessingaborted/comment-page-1/](http://nishantrana.wordpress.com/2011/05/26/reporting-error-report-cannot-be-displayed-rsprocessingaborted/comment-page-1/)

它为我解决了这个问题。

# ruby-on-rails - Hartl 的 rails 教程在本地完美完成。Heroku 坚持“我们很抱歉，但出了点问题。”

> ID：16178416
> 
> 赞同：2
> 
> 时间：2013-04-23T20:18:33.757
> 
> 标签：ruby-on-rails, ruby, heroku, railstutorial.org

我是 Ruby on Rails 的新手（完全是编程新手），这是我关于堆栈溢出的第一篇文章。我要提前感谢大家，因为我从以前的帖子中学到了很多东西。

我完成了 Micheal Hartl Ruby on Rails 教程，但无法让它在 Heroku 上成功启动，即使它在本地运行完美。

我做了以下事情：

> git 推送
> 
> git push heroku 大师
> 
> heroku pg：重置数据库
> 
> heroku 运行 rake db:migrate
> 
> heroku 运行 rake db：填充

（我也这样做了，没有 heroku 重新启动，结果相同）

当我执行命令时出现问题：heroku run rake db:populate

这是我的heroku日志

```
2013-04-23T18:27:42.388610+00:00 heroku[web.1]: Error R12 (Exit timeout) -> At least one process failed to exit within 10 seconds of SIGTERM
2013-04-23T18:27:42.388610+00:00 heroku[web.1]: Stopping remaining processes with SIGKILL
2013-04-23T18:27:44.355310+00:00 heroku[web.1]: Process exited with status 137
2013-04-23T18:27:50.065370+00:00 app[web.1]: Processing by SessionsController#new as HTML
2013-04-23T18:27:50.062379+00:00 app[web.1]: Started GET "/signin" for 75.68.91.34 at 2013-04-23 18:27:50 +0000
2013-04-23T18:27:50.091947+00:00 app[web.1]:   Rendered sessions/new.html.erb within layouts/application (24.8ms)
2013-04-23T18:27:50.093017+00:00 app[web.1]:   Rendered layouts/_shim.html.erb (0.0ms)
2013-04-23T18:27:50.095496+00:00 app[web.1]:   Rendered layouts/_header.html.erb (2.2ms)
2013-04-23T18:27:50.096137+00:00 app[web.1]: Completed 200 OK in 31ms (Views: 29.2ms | ActiveRecord: 1.0ms)
2013-04-23T18:27:50.095966+00:00 app[web.1]:   Rendered layouts/_footer.html.erb (0.3ms)
2013-04-23T18:27:50.102068+00:00 heroku[router]: at=info method=GET path=/signin host=polar-wildwood-1990.herokuapp.com fwd="75.68.91.34" dyno=web.1 connect=2ms service=48ms status=200 bytes=2144
2013-04-23T18:27:52.271911+00:00 app[web.1]: Started GET "/help" for 75.68.91.34 at 2013-04-23 18:27:52 +0000
2013-04-23T18:27:52.275101+00:00 app[web.1]: Processing by StaticPagesController#help as HTML
2013-04-23T18:27:52.276587+00:00 app[web.1]:   Rendered static_pages/help.html.erb within layouts/application (0.3ms)
2013-04-23T18:27:52.277601+00:00 app[web.1]:   Rendered layouts/_shim.html.erb (0.0ms)
2013-04-23T18:27:52.281995+00:00 app[web.1]:   Rendered layouts/_header.html.erb (4.1ms)
2013-04-23T18:27:52.283227+00:00 app[web.1]:   Rendered layouts/_footer.html.erb (0.8ms)
2013-04-23T18:27:52.284385+00:00 app[web.1]: Completed 200 OK in 9ms (Views: 7.2ms | ActiveRecord: 1.4ms)
2013-04-23T18:27:52.291644+00:00 heroku[router]: at=info method=GET path=/help host=polar-wildwood-1990.herokuapp.com fwd="75.68.91.34" dyno=web.1 connect=2ms service=21ms status=200 bytes=1639
2013-04-23T18:27:53.244364+00:00 heroku[router]: at=info method=GET path=/ host=polar-wildwood-1990.herokuapp.com fwd="75.68.91.34" dyno=web.1 connect=2ms service=18ms status=304 bytes=0
2013-04-23T18:27:53.227078+00:00 app[web.1]: Started GET "/" for 75.68.91.34 at 2013-04-23 18:27:53 +0000
2013-04-23T18:27:53.230685+00:00 app[web.1]: Processing by StaticPagesController#home as HTML
2013-04-23T18:27:53.233227+00:00 app[web.1]:   Rendered static_pages/home.html.erb within layouts/application (0.6ms)
2013-04-23T18:27:53.234925+00:00 app[web.1]:   Rendered layouts/_header.html.erb (0.8ms)
2013-04-23T18:27:53.234029+00:00 app[web.1]:   Rendered layouts/_shim.html.erb (0.0ms)
2013-04-23T18:27:53.235301+00:00 app[web.1]:   Rendered layouts/_footer.html.erb (0.3ms)
2013-04-23T18:27:53.235416+00:00 app[web.1]: Completed 200 OK in 5ms (Views: 3.2ms | ActiveRecord: 1.0ms)
2013-04-23T18:27:54.503953+00:00 app[web.1]: Started GET "/signin" for 75.68.91.34 at 2013-04-23 18:27:54 +0000
2013-04-23T18:27:54.506797+00:00 app[web.1]: Processing by SessionsController#new as HTML
2013-04-23T18:27:54.509530+00:00 app[web.1]:   Rendered layouts/_shim.html.erb (0.0ms)
2013-04-23T18:27:54.508584+00:00 app[web.1]:   Rendered sessions/new.html.erb within layouts/application (1.3ms)
2013-04-23T18:27:54.511848+00:00 app[web.1]:   Rendered layouts/_header.html.erb (2.1ms)
2013-04-23T18:27:54.512476+00:00 app[web.1]:   Rendered layouts/_footer.html.erb (0.3ms)
2013-04-23T18:27:54.512701+00:00 app[web.1]: Completed 200 OK in 6ms (Views: 4.7ms | ActiveRecord: 1.0ms)
2013-04-23T18:27:54.522049+00:00 heroku[router]: at=info method=GET path=/signin host=polar-wildwood-1990.herokuapp.com fwd="75.68.91.34" dyno=web.1 connect=2ms service=16ms status=304 bytes=0
2013-04-23T18:28:02.210398+00:00 app[web.1]: Started GET "/" for 75.68.91.34 at 2013-04-23 18:28:02 +0000
2013-04-23T18:28:02.212290+00:00 app[web.1]: Processing by StaticPagesController#home as HTML
2013-04-23T18:28:02.214616+00:00 app[web.1]:   Rendered static_pages/home.html.erb within layouts/application (0.6ms)
2013-04-23T18:28:02.215472+00:00 app[web.1]:   Rendered layouts/_shim.html.erb (0.0ms)
2013-04-23T18:28:02.216369+00:00 app[web.1]:   Rendered layouts/_header.html.erb (0.8ms)
2013-04-23T18:28:02.216867+00:00 app[web.1]: Completed 200 OK in 5ms (Views: 3.2ms | ActiveRecord: 0.9ms)
2013-04-23T18:28:02.216742+00:00 app[web.1]:   Rendered layouts/_footer.html.erb (0.3ms)
2013-04-23T18:28:02.224795+00:00 heroku[router]: at=info method=GET path=/ host=polar-wildwood-1990.herokuapp.com fwd="75.68.91.34" dyno=web.1 connect=2ms service=15ms status=304 bytes=0
2013-04-23T18:28:03.312964+00:00 app[web.1]: Started GET "/signup" for 75.68.91.34 at 2013-04-23 18:28:03 +0000
2013-04-23T18:28:03.320889+00:00 app[web.1]: Processing by UsersController#new as HTML
2013-04-23T18:28:03.330931+00:00 app[web.1]:   Rendered shared/_error_messages.html.erb (0.3ms)
2013-04-23T18:28:03.332690+00:00 app[web.1]:   Rendered users/new.html.erb within layouts/application (4.5ms)
2013-04-23T18:28:03.333486+00:00 app[web.1]:   Rendered layouts/_shim.html.erb (0.0ms)
2013-04-23T18:28:03.335702+00:00 app[web.1]:   Rendered layouts/_header.html.erb (2.1ms)
2013-04-23T18:28:03.336140+00:00 app[web.1]:   Rendered layouts/_footer.html.erb (0.3ms)
2013-04-23T18:28:03.336258+00:00 app[web.1]: Completed 200 OK in 15ms (Views: 8.2ms | ActiveRecord: 1.0ms)
2013-04-23T18:28:03.343166+00:00 heroku[router]: at=info method=GET path=/signup host=polar-wildwood-1990.herokuapp.com fwd="75.68.91.34" dyno=web.1 connect=2ms service=31ms status=200 bytes=2403
2013-04-23T18:28:23.175897+00:00 app[web.1]: Processing by UsersController#create as HTML
2013-04-23T18:28:23.172784+00:00 app[web.1]: Started POST "/users" for 75.68.91.34 at 2013-04-23 18:28:23 +0000
2013-04-23T18:28:23.175897+00:00 app[web.1]:   Parameters: {"utf8"=>"✓&quot;, "authenticity_token"=>"rdA4wrQvQhEhejI6uTXYg2YZpa5sl7gkYeabVJZQmFA=", "user"=>{"name"=>"Dana Bouchard", "email"=>"dbouchard138@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create my account"}
2013-04-23T18:28:23.429861+00:00 app[web.1]: Redirected to https://polar-wildwood-1990.herokuapp.com/users/1
2013-04-23T18:28:23.433167+00:00 app[web.1]: Completed 302 Found in 256ms (ActiveRecord: 21.6ms)
2013-04-23T18:28:23.449918+00:00 heroku[router]: at=info method=POST path=/users host=polar-wildwood-1990.herokuapp.com fwd="75.68.91.34" dyno=web.1 connect=3ms service=315ms status=302 bytes=115
2013-04-23T18:28:23.497155+00:00 app[web.1]:   Parameters: {"id"=>"1"}
2013-04-23T18:28:23.490244+00:00 app[web.1]: Started GET "/users/1" for 75.68.91.34 at 2013-04-23 18:28:23 +0000
2013-04-23T18:28:23.496980+00:00 app[web.1]: Processing by UsersController#show as HTML
2013-04-23T18:28:23.722402+00:00 app[web.1]:   Rendered shared/_stats.html.erb (54.1ms)
2013-04-23T18:28:23.787319+00:00 app[web.1]:   Rendered users/show.html.erb within layouts/application (120.1ms)
2013-04-23T18:28:23.787319+00:00 app[web.1]: Completed 500 Internal Server Error in 290ms
2013-04-23T18:28:23.789034+00:00 app[web.1]: ActionView::Template::Error (PGError: ERROR:  relation "microposts" does not exist
2013-04-23T18:28:23.789034+00:00 app[web.1]:
2013-04-23T18:28:23.789034+00:00 app[web.1]: LINE 5:              WHERE a.attrelid = '"microposts"'::regclass
2013-04-23T18:28:23.789034+00:00 app[web.1]:                                         ^
2013-04-23T18:28:23.789034+00:00 app[web.1]: :             SELECT a.attname, format_type(a.atttypid, a.atttypmod),
2013-04-23T18:28:23.789034+00:00 app[web.1]:                      pg_get_expr(d.adbin, d.adrelid), a.attnotnull, a.atttypid, a.atttypmod
2013-04-23T18:28:23.789034+00:00 app[web.1]:               FROM pg_attribute a LEFT JOIN pg_attrdef d
2013-04-23T18:28:23.789034+00:00 app[web.1]:                 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
2013-04-23T18:28:23.789034+00:00 app[web.1]:
 WHERE a.attrelid = '"microposts"'::regclass
2013-04-23T18:28:23.789293+00:00 app[web.1]: ):
2013-04-23T18:28:23.789293+00:00 app[web.1]:              ORDER BY a.attnum
2013-04-23T18:28:23.789293+00:00 app[web.1]:     15:     <%= render 'follow_form' if signed_in? %>
2013-04-23T18:28:23.789034+00:00 app[web.1]:                AND a.attnum > 0 AND NOT a.attisdropped
2013-04-23T18:28:23.789293+00:00 app[web.1]:     13:   </aside>
2013-04-23T18:28:23.789293+00:00 app[web.1]:     14:   <div class="span8">
2013-04-23T18:28:23.800620+00:00 heroku[router]: at=info method=GET path=/users/1 host=polar-wildwood-1990.herokuapp.com fwd="75.68.91.34" dyno=web.1 connect=2ms service=313ms status=500 bytes=643
2013-04-23T18:28:23.789293+00:00 app[web.1]:     16:     <% if @user.microposts.any? %>
2013-04-23T18:28:23.789293+00:00 app[web.1]:     17:       <h3>Microposts (<%= @user.microposts.count %>)</h3>
2013-04-23T18:28:23.789293+00:00 app[web.1]:     18:       <ol class="microposts">
2013-04-23T18:28:23.789293+00:00 app[web.1]:     19:         <%= render @microposts %>
2013-04-23T18:28:23.789293+00:00 app[web.1]:   app/views/users/show.html.erb:16:in `_app_views_users_show_html_erb__4534392174835113617_69860797342160'
2013-04-23T18:28:23.789517+00:00 app[web.1]:
2013-04-23T18:28:23.789517+00:00 app[web.1]:
2013-04-23T18:28:38.118917+00:00 heroku[api]: Starting process with command `bundle exec rake db:populate` by dbouchard138@gmail.com
2013-04-23T18:28:40.122057+00:00 heroku[run.9072]: Awaiting client
2013-04-23T18:28:40.141935+00:00 heroku[run.9072]: Starting process with command `bundle exec rake db:populate`
2013-04-23T18:28:41.013463+00:00 heroku[run.9072]: State changed from starting to up
2013-04-23T18:29:06.377140+00:00 heroku[run.9072]: Process exited with status 1
2013-04-23T18:29:06.395386+00:00 heroku[run.9072]: State changed from up to complete
2013-04-23T19:31:08.418618+00:00 heroku[web.1]: Idling
2013-04-23T19:31:11.275801+00:00 heroku[web.1]: Stopping all processes with SIGTERM
2013-04-23T19:31:12.010696+00:00 app[web.1]:    /usr/local/lib/ruby/1.9.1/webrick/server.rb:90:in `select'
2013-04-23T19:31:12.010696+00:00 app[web.1]: [2013-04-23 19:31:12] ERROR SignalException: SIGTERM
2013-04-23T19:31:22.107373+00:00 heroku[web.1]: Error R12 (Exit timeout) -> At least one process failed to exit within 10 seconds of SIGTERM
2013-04-23T19:31:22.107928+00:00 heroku[web.1]: Stopping remaining processes with SIGKILL
2013-04-23T19:31:23.892161+00:00 heroku[web.1]: State changed from up to down
2013-04-23T19:31:23.878809+00:00 heroku[web.1]: Process exited with status 137 
```

这可能很容易解决，我认为以下是罪魁祸首，但我无法弄清楚为什么或如何找到问题。

```
2013-04-23T18:28:23.789034+00:00 app[web.1]: ActionView::Template::Error (PGError: ERROR:  relation "microposts" does not exist
2013-04-23T18:28:23.789034+00:00 app[web.1]:
2013-04-23T18:28:23.789034+00:00 app[web.1]: LINE 5:              WHERE a.attrelid = '"microposts"'::regclass
2013-04-23T18:28:23.789034+00:00 app[web.1]:                                         ^
2013-04-23T18:28:23.789034+00:00 app[web.1]: :             SELECT a.attname, format_type(a.atttypid, a.atttypmod),
2013-04-23T18:28:23.789034+00:00 app[web.1]:                      pg_get_expr(d.adbin, d.adrelid), a.attnotnull, a.atttypid, a.atttypmod
2013-04-23T18:28:23.789034+00:00 app[web.1]:               FROM pg_attribute a LEFT JOIN pg_attrdef d
2013-04-23T18:28:23.789034+00:00 app[web.1]:                 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
2013-04-23T18:28:23.789034+00:00 app[web.1]:
 WHERE a.attrelid = '"microposts"'::regclass
2013-04-23T18:28:23.789293+00:00 app[web.1]: ):
2013-04-23T18:28:23.789293+00:00 app[web.1]:              ORDER BY a.attnum
2013-04-23T18:28:23.789293+00:00 app[web.1]:     15:     <%= render 'follow_form' if signed_in? %>
2013-04-23T18:28:23.789034+00:00 app[web.1]:                AND a.attnum > 0 AND NOT a.attisdropped
2013-04-23T18:28:23.789293+00:00 app[web.1]:     13:   </aside>
2013-04-23T18:28:23.789293+00:00 app[web.1]:     14:   <div class="span8">
2013-04-23T18:28:23.800620+00:00 heroku[router]: at=info method=GET path=/users/1 host=polar-wildwood-1990.herokuapp.com fwd="75.68.91.34" dyno=web.1 connect=2ms service=313ms status=500 bytes=643
2013-04-23T18:28:23.789293+00:00 app[web.1]:     16:     <% if @user.microposts.any? %>
2013-04-23T18:28:23.789293+00:00 app[web.1]:     17:       <h3>Microposts (<%= @user.microposts.count %>)</h3>
2013-04-23T18:28:23.789293+00:00 app[web.1]:     18:       <ol class="microposts">
2013-04-23T18:28:23.789293+00:00 app[web.1]:     19:         <%= render @microposts %>
2013-04-23T18:28:23.789293+00:00 app[web.1]:   app/views/users/show.html.erb:16:in `_app_views_users_show_html_erb__4534392174835113617_69860797342160' 
```

请帮助，如果您需要更多信息，请告诉我。先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T20:20:29.240

在我看来，您没有将架构加载到您的 heroku 数据库中。部署后执行此操作会发生什么：

```
heroku run rake db:schema:load 
```

请注意，有时如果您正在加载具有已建立架构的新应用程序，则运行所有迁移并不是使数据库达到您想要的状态的最佳方法 - 您应该`rake db:schema:load`改用。让我知道这是否使您的数据库正确。

运行它后，您可以使用`heroku run console`然后执行控制台命令，例如`User.all`确保它知道`users`表存在等。

不要忘记在加载架构或运行`db:migrate`. 对于heroku，那就是：`heroku restart`

# html - 更靠右的是另一种分辨率 (HTML)

> ID：16178417
> 
> 赞同：0
> 
> 时间：2013-04-23T20:18:37.103
> 
> 标签：html

首先，请不要讨厌...我在 HTML 方面有自己的弱点，所以这是一个问题。

无论如何......当我用另一种分辨率预览我的网站时......它变得不同了，我无法找出问题所在:(

*这是我希望它始终看起来的样子*

[https://imageshack.us/scaled/large/22/97049008.png](https://imageshack.us/scaled/large/22/97049008.png)

*这是分辨率为 1440x900 的显示器的外观*

[https://imageshack.us/scaled/large/38/25030712.png](https://imageshack.us/scaled/large/38/25030712.png)

**这是我的代码**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="icon" href="icon.ico" type="image/ico" />
<title>
THU | TheHardUploader</title>
</head>
<style>
    body{
        margin: 0px auto;
        background-image:url(aa.jpg);
        background-position: center;
        background-attachment:fixed;
        background-repeat: no-repeat;
        }
    #main{
        margin: 0px auto;
    }
.banner{
    height: 210px;
    margin-top: 35px;
    background-color: black;
    -khtml-opacity:.50; 
 -moz-opacity:.50; 
 -ms-filter:”alpha(opacity=50)”;
  filter:alpha(opacity=50);
  filter: progid:DXImageTransform.Microsoft.Alpha(opacity=0.5);
  opacity:.50; 
}

.logo{
position: absolute;
margin-top: -280px;
margin-left: 350px;
}

.recordsbild{
    float: left;
    margin: auto;
    margin-left: 500px;
    position:absolute;
    margin-top: -200px;
}

.line{
    position:absolute;
    height: 180px;
    width: 10px;
    background-color: white;
    margin-top: -195px;
    margin-left: 1200px;
}
.musikstil{
    position:absolute;
    font-family: "Arial Rounded MT Bold";
    font-size: 20px;
    margin-left: 670px;
    margin-top:-50px;

}

.musikstil a{
    text-decoration: none;
     transition: opacity .35s ease-in-out;
     -moz-transition: opacity .35s ease-in-out;
    -webkit-transition: opacity .35s ease-in-out;
    color: white;
}

.musikstil a:hover{
    opacity: 0.2;
}

.menu{
    position:absolute;
    width: 120px;
         opacity: 1.0;

 transition: opacity .25s ease-in-out;
   -moz-transition: opacity .25s ease-in-out;
   -webkit-transition: opacity .25s ease-in-out;
    margin: auto;
    margin-top: -190px;
    margin-left: 1280px;
}

.menu a{
    color: white;
    font-family:"Arial Rounded MT Bold";
    text-decoration:none;
    font-size: 20px;
    position:absolute;
     transition: opacity .35s ease-in-out;
     -moz-transition: opacity .35s ease-in-out;
    -webkit-transition: opacity .35s ease-in-out;
}
.dub{
    color:white;
}

.hard{
    color: #009cff;

}
.glitch{
    color: #744eac;

}
.chill{
    color: #bc0096;
}

.menulogos{
    position:absolute;
    margin-left: 1140px;
    margin-top: -215px;
}
.shop{
    margin-top: 10px;
}
.promoting{
    margin-top: 45px;
}
.about{
    margin-top: 37px;
}
.artists{
    margin-top: 30px;
}
.release{
    margin-top:20px;
}

.menu a:hover{
    opacity: 0.2;
}
.bannerwrap{

} 
```

```
<body>
    <div id="main">
    <div class="bannerwrap">
      <div class="banner">    
      </div>
      <div class="logo">
         <img src="nylogo.png" />
      </div>
      <div class="recordsbild">
        <img src="records.png" />
      </div>
      <div class="musikstil">
        <a href="#"> Dubstep &#11; |</a> 
        <a href="#"> &#11; Hardstyle &#11; |</a>
        <a href="#"> &#11; Glitch Hop &#11; |</a> 
        <a href="#"> &#11; Chillstep</a>
      </div>
      <div class="line">
      </div>
      <div class="menulogos">
        <img src="menulogo.png" />
      </div>
      <div class="menu">
        <a href="#" class='contact'> Contact Us </a>
        </br>
        <a href="#" class='shop'> Shop </a>
        </br>
        <a href="#" class='release'> Releases </a>
        </br>
        <a href="#" class='artists'> Artists </a>
        </br>
        <a href="#" class='about'> About Us </a>
        </br>
        <a href="#" class='promoting'> Promoting </a>
      </div> 
      </div>
    </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:21:48.430

如果您不进行一些响应，则需要在 HTML 上强制执行宽度。我建议您编写 HTML/CSS，期望视口大小约为 1280 像素。

# java - 循环遍历 Cayenne performQuery() 结果时出现意外值

> ID：16178420
> 
> 赞同：1
> 
> 时间：2013-04-23T20:18:46.320
> 
> 标签：java, foreach

此方法使用 Cayenne SelectQuery 返回员工对象列表

```
List<Employee> getEmployees() {
  ...
  return getObjectContext().performQuery(query);
} 
```

现在，我正在遍历结果

```
List<Employee> employees = getEmployees();

// test loop 1
for (Employee employee : employees) {
  //print out employee name
}

for (Employee employee : employees) {
  //print out employee name
  if (matchesSomeCondition) {
    employees.remove(employee);
  }
}

// test loop 2
for (Employee employee : employees) {
  //print out employee name
} 
```

在测试循环 1 中，它将显示例如：

```
-John Smith
-Jane Doe
-Roger Wilco 
```

在实际的删除循环中，它会省略一些人：

```
-John Smith
-Roger Wilco 
```

然后在测试循环 2 中，它会输出所有人：

```
-John Smith
-Jane Doe
-Roger Wilco 
```

当我将删除循环更改为：

```
List<Employee> badEmployees = new ArrayList<Employee>();
for (Employee employee : employees) {
  //print out employee name
  if (matchesSomeCondition) {
    badEmployees.add(employee);
  }
}
employee.removeAll(badEmployees); 
```

然后循环工作正常。我只是不明白为什么我在第一个示例中没有收到错误或异常。更奇怪的是为什么每个测试循环的结果都不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:47:39.290

Java`for-each`循环不是为操作`List`它所迭代的而设计的。您需要访问`Iterator`才能删除当前元素。循环隐藏了迭代器`for-each`，所以你不能调用`remove()`.

因此，您选择的方法是唯一的方法（使用 a `for-each`）。

[你可以在这里](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)阅读更多关于它的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-14T16:18:34.057

我只是在看我的老问题，发现这个问题仍然没有答案。

删除员工触发了 Cayenne 中的回调，该回调又将员工添加回列表。

# python - 我需要转换一个列表；这将通过输入提供，因此它将成为一个字符串；回到列表中

> ID：16178421
> 
> 赞同：1
> 
> 时间：2013-04-23T20:18:46.943
> 
> 标签：python, string, list, eval, undefined

正如线程标题中所说。
我还尝试将`eval()`这些列表用于我将要输入的列表，但这些列表包含字符串元素和其他（子？）列表，例如：

```
[Pacific, [-45,30,25], [120,59, 15]] 
```

当提供这样的输入时`eval()`，对于纯数字列表的响应非常好，但是当应用于字符串时，会`NameError`为这些字符串元素发送回 a，表示它们未定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:21:59.643

你需要在引号内输入你的字符串，即

```
["Pacific", [-45,30,25], [120,59, 15]] 
```

当你输入它时`Pacific`，python的`eval()`函数将寻找一个名为的变量`Pacific`，因此你得到了 NameError

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-16T18:42:52.170

您的原始输入字符串是完全有效的[YAML](http://en.wikipedia.org/wiki/YAML)字符串，这是一种安全、强大且 - 至少在我看来 - 序列化和反序列化数据结构的简单方法。为了读取（或保存）YAML 字符串，您可能需要获取 PyYAML：

```
sudo pip install pyyaml 
```

然后，您可以完美地运行以下代码，以便将数据读入 Python：

```
from yaml import load
pacific = load('[Pacific, [-45,30,25], [120,59, 15]]') 
```

# json - 从电子表格更新 mongodb

> ID：16178423
> 
> 赞同：0
> 
> 时间：2013-04-23T20:18:51.603
> 
> 标签：json, mongodb

我有一个 Google 文档电子表格

和

```
key        number
-----      ---------
abc        111
foo        222
... 
```

我想从 Google Docs 中获取这些数据，并更新 MongoDB 中的现有数据。

在 MongoDB 中查找 (key: 'abc') 并使用数字更新：111，foreach 行的最佳方法是什么？

似乎我需要以某种方式将其导出为 JSON，然后运行一些 JS 将使用新数字更新每个键。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:58:48.467

将数据从 Google Docs 导出到 CSV 文件。

```
gdocs.csv 
```

创建一个描述 CSV 文件的文件 - CSV 文件中的每个字段一行。`gdocsFields.txt`可能看起来像这样：

```
key
number 
```

将数据导入到临时集合中的 mongo 实例中，例如`temp`：

```
mongoimport --type csv -c temp --fieldFile gdocsFields.txt < gdocs.csv 
```

现在更新您的实时集合，例如`live`使用来自 mongo 控制台的查询。看看这个例子，它还为您创建了导入的数据以进行测试。它直接粘贴到`mongo`控制台：

```
db.temp.drop();
db.live.drop();

db.temp.insert({key:'abc', number:111});
db.temp.insert({key:'foo', number:222});
db.temp.insert({key:'xxx', number:333});
db.temp.insert({key:'yyy', number:444});
db.temp.insert({key:'zzz', number:555});

db.live.insert({key:'abc', number:100});
db.live.insert({key:'foo', number:200});
db.live.insert({key:'xxx', number:300});
db.live.insert({key:'yyy', number:400});
db.live.insert({key:'zzz', number:500});

// Update every record
var keys = db.temp.find();
keys.forEach(function(doc){
    db.live.update(
        { key:doc.key },
        { $set: {number:doc.number} },
        { upsert: true }
    );
    print(doc.key);
});

// Print out the live collection
var keys = db.live.find();
keys.forEach(function(doc){
    print(doc.key + " is now: " + doc.number);
}); 
```

不是最有效的方法，但应该很容易遵循这个过程。

# jquery - 在鼠标悬停时替换图像并同时将其向左移动

> ID：16178424
> 
> 赞同：1
> 
> 时间：2013-04-23T20:18:53.993
> 
> 标签：jquery, css

我的页面中有一张图片。我想要做的是当任何人悬停在该图像上时，我想将图像缓慢移动到其左侧，同时将图像替换为另一个图像。在鼠标移出时，我想将以前的图像恢复到以前的位置。

我尝试使用以下代码，`:hover`但它的替换速度非常快，并且图像向左移动得不够。

请查看[演示](http://jsfiddle.net/chPrK/7/)

您能告诉我如何使用 Jquery 或 CSS 来实现这一点吗？

```
<div class="fb-button"><a target="_blank" href="#"></a></div> 
```

CSS

```
.fb-button a{
background-image:url(http://i33.tinypic.com/20svqkh.png); 
}

.fb-button a:hover{

background-image:url(http://i36.tinypic.com/n2b978.png); // replacement
}

.fb-button a, .twt-button a, .in-button a, .youtube-button a {
width: 34px;
height: 33px;
}

.fb-button a, .twt-button a, .in-button a, .youtube-button a {
display: block;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T20:37:32.217

您不需要为此使用 Javascript。

只需使用负边距和过渡。

```
.fb-button a{
    background-image:url(http://i33.tinypic.com/20svqkh.png);
    /*transition*/
    -webkit-transition:margin 1s, background-image 1s;
       -moz-transition:margin 1s, background-image 1s;
         -o-transition:margin 1s, background-image 1s;
            transition:margin 1s, background-image 1s;
}
.fb-button a:hover{
    background-image:url(http://i36.tinypic.com/n2b978.png);
    margin-left:-0.5em;
} 
```

[http://jsfiddle.net/chPrK/6/](http://jsfiddle.net/chPrK/6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T20:37:33.253

我不确定您向左移动的确切含义，但是您可以在使用 transition-duration 属性交换图像时实现这一点以及更长的持续时间。在下面的演示中，我将其设置为 2 秒。在悬停时，我设置了一个右边距来移动图像：

```
.fb-button a{
background-image:url(http://i33.tinypic.com/20svqkh.png);
    -webkit-transition-duration: 2s;
    -moz-transition-duration: 2s;
    -o-transition-duration: 2s;
    transition-duration: 2s;
}

.fb-button a:hover{

    background-image:url(http://i36.tinypic.com/n2b978.png);
    margin-right: 3px;
} 
```

[http://jsfiddle.net/chPrK/5/](http://jsfiddle.net/chPrK/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T20:30:28.253

您不能使用相同的对象淡出一个背景并淡入另一个背景。我建议使用这样的单独对象：

```
<div class="fb-button">
    <a target="_blank" href="https://www.facebook.com/bkashlimited">
        <div class="fader1 fader"></div>
        <div class="fader2 fader"></div>
    </a>
</div> 
```

而且，这个jQuery：

```
$(".fb-button").hover(function() {
    $(this).find(".fader1").fadeOut();
    $(this).find(".fader2").fadeIn();
}, function() {
    $(this).find(".fader2").fadeOut();
    $(this).find(".fader1").fadeIn();
}); 
```

而且，这个CSS：

```
.fb-button {
    position: relative;
}

.fader {
    width: 34px;
    height: 33px;
    position: absolute;
}

.fb-button .fader1 {
    background-image:url(http://i33.tinypic.com/20svqkh.png);
}

.fb-button .fader2 {
    background-image:url(http://i36.tinypic.com/n2b978.png);
    display: none;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T20:34:59.367

尝试这个：

```
.fb-button a{
    background-image:url(http://i33.tinypic.com/20svqkh.png);
    -webkit-transition: all 1s ease-in-out;
    left: 100px;
    position: relative;
}

.fb-button a:hover{
    position: relative;
    left: 50px;
    background-image:url(http://i36.tinypic.com/n2b978.png);
} 
```

这里的警告是该`transition`属性仍然是实验性的，因此它上面有供应商特定的前缀。

不同的浏览器使用不同的前缀。例如：

*   歌剧使用：`-o-transition`

*   火狐使用：`-moz-transition`

*   谷歌浏览器使用上面显示的：`-webkit-transition`

这些实现了常规的新功能，但现在不符合标准，尽管它们可能很快会出现，但不能*保证*将来会出现。

# php - 获取所有路线，Laravel 4

> ID：16178426
> 
> 赞同：9
> 
> 时间：2013-04-23T20:18:59.633
> 
> 标签：php, routing, laravel, laravel-4

我现在想要的只是使用一个控制器来处理我的 laravel 4 应用程序的每个请求。问题是 stackoverflow 或其他地方的解决方案都不适合我。

这就是我目前拥有的：

```
Route::any('(.*)', function(){
  return View::make('hello');
}); 
```

现在，当浏览到页面时，我每次都会收到错误消息：

```
Symfony \ Component \ HttpKernel \ Exception \ NotFoundHttpException 
```

希望有人可以帮助我！

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-04-24T01:03:56.800

正则表达式被设置为要求，而不是直接在路由中。

```
Route::any('{all}', function($uri)
{
    return View::make('hello');
})->where('all', '.*'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-23T15:14:49.050

```
Route::group(array('prefix' => '/', 'before' => 'MAKEYOUROWNFILTER'), function()
{

    // your routers after the / ....
}); 
```

// 在 filters.php 中

```
Route::filter('MAKEYOUROWNFILTER', function()
{

    // do stuff or just
    return View::make('hello');

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-08T07:07:49.217

扩展#Jason Lewis 的回答以重定向到根页面：

```
Route::any('{all}', function($uri)
{
    return Redirect::to('/');
})->where('all', '.*'); 
```

# html - 具有 id 和外部 css 样式表的表将无法工作或格式化

> ID：16178427
> 
> 赞同：-1
> 
> 时间：2013-04-23T20:19:00.437
> 
> 标签：html, css

我有一个表格，我正在尝试使用我的外部样式表进行格式化。我想为整个表格添加一些填充，并且可能特定于文本对齐方式。该页面是：

它在特色车辆部分下。

这是我的CSS：

```
table#featured{
text-align: center;
}

table#featured img{ 
border: none;
}

table#featured td{
border: solid #FFFFFF 3px;
} 
```

html:

```
<table id="featured">
    <tr>
        <td>
            <img src='/3/scripts/image_view.php/1_1.jpg?width=100&amp;image=/3/images/autos/1_1.jpg' alt='' />
            <br />127 Mazda RX7
            <br />12000.00
        </td>
    </tr>
</table> 
```

在我上传它并查看 style.css 文件后，css 不存在。这让我疯狂。任何帮助是极大的赞赏。

乔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T20:29:27.493

你可以这样写css

```
#featured td{
text-align: center;
padding :5px;
}

#featured td{
border: solid #FFFFFF 3px;
}

#featured td img{
border: none;
} 
```

并且显然将外部样式表链接到主 html 页面.. :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T20:27:13.420

检查外部 css 文件的链接。

```
<link rel="stylesheet" type="text/css" href="mystyle.css"> 
```

确保将 ../ 添加到 mystyle.css 中，这将上升一个文件夹。

# c++ - c++ 使用运算符读取 >>

> ID：16178428
> 
> 赞同：-4
> 
> 时间：2013-04-23T20:19:02.543
> 
> 标签：c++, overriding, operator-keyword

我有一堂课

```
class BigNumber{
public:
    int digits[100];

    BigNumber();
    friend istream& operator>>(istream& is, BigNumber& dt);
}; 
```

我想使用运算符 >> 从流中读取一个数字，并将每个数字放入数字数组中。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T22:44:19.730

```
`
istream& operator >> (istream& is, BigNumber& dt)
{
    string s;
    is>>s;
    for(int i = 0; i < s.length(); i++)
    {
        dt = 10*dt + s[i];
    }
    return is;
}
` 
```

您可以添加一些尝试捕获块以确保他输入数字或其他内容，但我认为它运作良好实际上我希望它运作良好，我希望它会有所帮助

# c# - 理解枚举 - 用作常量

> ID：16178429
> 
> 赞同：2
> 
> 时间：2013-04-23T20:19:02.900 标签 + jQuery .clone() =?
> 
> 标签：c#, entity-framework, enums

所以我尝试使用枚举，可能是错误的方式，因为我来自 PHP。在 C# 中，我有一个全局类：

```
public static class GlobalTypes
{
    public enum assignmentType { SERV = "SERV", PROD = "PROD", PER = "PER", }
} 
```

从那里我试图通过执行以下操作与实体进行交互：

```
 public static IEnumerable<Person> getAllAgents(int id)
    {
        using (var db = new LocAppContext())
        {
            var person = (from p in db.Person
                          join la in db.LocationAssignment on p.id equals la.value
                          where la.locationID == id && la.type == GlobalTypes.assignmentType.PER
                          select p).ToList();

            return person;
        }

    } 
```

但我收到错误：

> 运算符“==”不能应用于“字符串”和“LocApp.Helpers.Classes.LocationAssignments.GlobalTypes.assignmentType”类型的操作数

发生在

```
la.type == GlobalTypes.assignmentType.PER 
```

我的逻辑，这是来自 php，是我想要一个全局常量，我可以在任何地方调用以在调用时“回显”该常量的值，因此常量值可以更改，但我不必更改它一百万个地方。

想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T20:25:36.827

如果你想要常量字符串，那么不要使用枚举。枚举用于整数类型。只需使用常量：

```
public static class MyClass
{
    public const string PROD = "PROD";
    public const string DEV = "DEV";
}

// elsewhere...
la.type == MyClass.PROD; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T20:26:24.190

快速回答：

```
public enum assignmentType { SERV, PROD, PER } 
```

并在比较中（假设 la.type 返回一个字符串）：

```
where la.locationID == id && la.type == GlobalTypes.assignmentType.PER.ToString() 
```

# ruby - Ruby：使用键/值数组设置新哈希

> ID：16178432
> 
> 赞同：4
> 
> 时间：2013-04-23T20:19:06.137
> 
> 标签：ruby, syntax

（--工作人员删除了问题--）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T20:28:13.087

*这是类方法和实例方法之间区别的一个例子吗？*

确切地。

*但是为什么可以将其缩短为 just `Hash[*order]`？*

Ruby 解释`some_object[]`为对名为`[]`on的方法的调用`some_object`。这对于哈希来说并不特殊，您可以`[]`在自己的任何类中实现方法并使用该语法。

*有人可以解释这里发生了什么，以及是否有其他方法可以将数组中的值添加到哈希中？*

`Hash[*order]`调用`Hash#[]`创建新哈希的类方法 ( )。 `o.[](*order)`由于您无法调用`new`它的相同原因不起作用：`{}.new`没有任何意义。您不能在类的实例上调用类方法。

您可以添加值`merge`：

```
o = Hash.new
o.merge(Hash[*order]) 
```

`o = {*order}`不起作用，因为`{}`它是 Hash 文字的语法，并且放在`*order`那里没有意义。

`Hash(*order)`是[Kernel#Hash](http://ruby-doc.org/core-2.0/Kernel.html#method-i-Hash)，一种只需要一个参数的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T20:26:22.650

当您编写时，`Hash(*order)`您实际上是在调用模块中的`Hash`方法`Kernel`，这与调用类`[]`中的方法不同`Hash`。请参阅[文档](http://ruby-doc.org/core-2.0/Kernel.html#method-i-Hash)以`Kernel#Hash`了解那里发生了什么。

# assembly - 查看除寄存器以外的堆栈内容

> ID：16178435
> 
> 赞同：2
> 
> 时间：2013-04-23T20:19:15.117
> 
> 标签：assembly, gdb

我只是想知道如何使用 GDB 查看 8(%rsp) 的内容。根据我在谷歌搜索几个 gdb 指南后发现的几个来源，当我尝试查看寄存器 rsp 的内容时，我可以使用这个命令：

```
print/d $rsp 
```

将打印 $rsp 的地址。但是，当我尝试：

```
print/d 8($rsp) 
```

我遇到了分段错误。当我尝试时：

```
print/d *$rsp+8 
```

它说我无法取消引用通用指针。我也尝试使用：

```
x/8d $rsp 
```

但是，我认为此命令将查看 rsp 下方而不是 rsp 上方的 8 个数字。我对吗？我要查看8($rsp)的内容的唯一原因，有一个汇编语句：

```
cmp    0x8(%rsp),%eax 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T20:29:55.707

事实上，您非常接近解决方案。正确的语法是简单的`print /d *($rsp+8)`or `x /x $rsp+8`。

# c# - 无需挂起其他控件的 WinForms 验证

> ID：16178436
> 
> 赞同：3
> 
> 时间：2013-04-23T20:19:17.130
> 
> 标签：c#, .net, winforms, .net-4.5

所以，我在WinForms中遇到了这个问题，至少我认为这是一个问题，我不知道如何解决它。

基本上，当我为控件实现`Validating`事件处理程序`CancelEventArgs.Cancel`时，当控件验证失败时，我将其设置为 true。示例代码：

```
private void NameTextBox_Validating(object sender, CancelEventArgs e) {
    // Assume Cool Validation Logic.
    //
    // ...
    var isValid = false;
    if (!isValid) {
        e.Cancel = true;

        // Set an Error Provider Message.
        //
        // ...
    }
} 
```

这会导致整个 UI 挂起。我无法选择任何其他控件、最小化父窗体窗口或事件退出父窗体窗口。所以我发现了一个类似的问题，其答案建议`FormClosing`为父表单实现一个事件处理程序并在`FormClosingEventArgs.Cancel`那里设置为 false。

问题是，只要我的控件无效，就永远不会调用该事件处理程序。我有一种感觉，这可能与我的控制层次结构有关，尽管我不是 100% 确定。如果这有帮助，那就是：

```
-- Parent Form

---- Custom User Control

------ Text Box Control (<-- Causes Hang) 
```

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T23:03:03.627

我找到了一个非常简单的解决方案，我真的很沮丧，因为我浪费了这么多小时的时间来敲击键盘。

只需将父容器的`ContainerControl.AutoValidate`属性设置为即可`EnableAllowFocusChange`解决问题。在这种情况下，“父容器”是指实际容纳输入控件的容器。

如果您有一个控件层次结构，您还可以将`ContainerControl.AutoValidate`属性`Inherit`设置为 并将最外层容器设置为`EnableAllowFocusChange`。

希望这对将来的某人有所帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-23T21:03:46.047

您可以使用 async/await 或 BackgroundWorker 来处理 UI 线程之外的验证：

```
// in your init code...
textbox.TextChanged+=(s,e)=>Validate();

// and this is the Validation worker
BackgroundWorker validateWorker = null;
bool isValid = false;

private void Validate(){ 
  if (validateWorker != null){
    validateWorker.CancelAsync();
  }
  isValid = false;
  string validateValue = textbox.Text;

  BackgroundWorker localCopy = validateWorker = new BackgroundWorker(); 
  validateWorker.WorkerSupportsCancellation = true;
  validateWorker.DoWork+=(s,e)=>{
    if (CoolValidationAssumed(validateValue) && !localCopy.CancellationPending)
       isValid = true;
  };
  validateWorker.RunWorkerCompleted += (s, e) =>{
     if (!localCopy.CancellationPending && !isValid)
       textbox.Color = Colors.Red;
  }
  validationWorker.RunWorkerAsync();
} 
```

# javascript - 输入文本/收音机的 Jquery 值未定义

> ID：16178437
> 
> 赞同：0
> 
> 时间：2013-04-23T20:19:17.400
> 
> 标签：javascript, jquery, html, object, undefined

我的页面上有多个链接，当您单击时，会有一个 div，其中根据您单击的链接显示测验。测验使用 ajax 显示。测验由多个 div 组成，如下所示：

```
<div class="displayquiz-particularquestion-container1" > ... </div>
<div class="displayquiz-particularquestion-container2" > ... </div>
...................................................................
<div class="displayquiz-particularquestion-containern" > ... </div> 
```

哪里`n`是问题的总数，因此是 div 的总数。每个 div 包含一个文本形式的问题，为了回答问题，每个 div 包含一个文本输入标签或多个单选按钮。您将答案写在具有输入标签的那些上，并在带有单选按钮的那些上检查答案。

现在，我希望能够遍历所有这些 div（这就是我给它们唯一的类名的原因）并检查它们是否包含文本输入标签或单选按钮，并获取文本输入标签的值或分别选中的单选按钮。

到目前为止，我的代码看起来像这样。注意：`check-answers-button`是用户按下以检查他们在测验中的答案的按钮标签的 ID。基本上所有的问题都已经显示并且用户回答了，所以现在我需要挑选答案。该`displayTo`对象还表示主 div，其中包含所有包含问题的 div。

```
$(document).on('click','#check-answers-button',function(evt){
    evt.preventDefault();

    // ------ Get the class of the last question container and extract the number from it so as to know how
    //           many questions to loop through

    var numberOfQuestionsClass = displayTo.find('[class*="displayquiz-particularquestion-container"]:last').attr('class');
    var numberOfQuestions = '';

    for(var y = numberOfQuestionsClass.length - 1 ; y > 0; y-- )
        if(!isNaN(numberOfQuestionsClass[y])) numberOfQuestions += numberOfQuestionsClass[y];
        else break;

    // ------ The 'numberOfQuestions' variable now contains the number of questions

    // ------ 'questionsObjectData' will contain all the questions and thier respective answers
    questionsObjectData = {};

    // ------ Loop through all the questions and get the answers
    for(x = 1; x <= numberOfQuestions; x++){
        var question = displayTo.find('.displayquiz-particularquestion-container' + x);

        questionsObjectData['question' + x] = {};

        // ------ Check if the question has a written answer
        if(question.find('input[name=written-answer]').val() === undefined){

            // ------ The question is an option question, get the checked radio button and add it
            //           to the 'questionsObjectData' object

            questionsObjectData['question' + x]['answer'] = question.find('input[name=written-answer]').val();

        }else{

            // ------ The question has a written answer, get the content of the input text field and add it
            //           to the 'questionsObjectData' object

            questionsObjectData['question' + x]['answer'] = question.find('input[type="radio"]:checked').val();

        }
    }

    console.log(questionsObjectData);

}); 
```

`console.log(questionsObjectData);`到目前为止，我使用它来查看我的数据内容。问题是`answer`主对象内的每个“问题”对象的属性`questionsObjectData`都是未定义的。无论问题是否有文本标签或单选按钮，如果文本标签为空或未选中单选按钮，总是`undefined`为什么会这样？我需要提供 HTML 代码吗？

# c# - 缺少发布参数

> ID：16178438
> 
> 赞同：0
> 
> 时间：2013-04-23T20:19:18.697
> 
> 标签：c#, asp.net, post

因此，我将一些参数发布到 .NET 网站。该网站需要身份验证，因此它将用户重定向到登录页面。如果 action 包含登录页面，则 post 参数通过，但如果 action 不包含登录页面，则 post 参数不通过。

```
<form action="http://localhost:54060/mywebsite/" method="post">
    BAC: <input type="text" name="partnerID" /> <br />
    <input type="submit" name="submitBtn" value="Login" />
    <input type="hidden" name="partnerType" value="test" />
    <input type="hidden" name="userID" value="test" />
    <input type="hidden" name="firstname" value="test" />
    <input type="hidden" name="lastname" value="test" />
</form> 
```

我正在捕获 Session_Start Global asax 页面事件中的 post 参数，并使用以下方法拉取它们：`this.Request.Params["partnerID"]`. 如果像上面那样进行调用，则它为空，但如果登录页面包含在操作中，则包含参数。

注意：该表格位于 1 个网站中，并且正在提交到另一个网站。它们位于不同的服务器上。我无法控制提交表单（并将其提交到 iframe）的网站。我确实可以控制接收表单提交的 .NET 网站。

为什么当表单提交到网站而不是提交到页面时，这些参数没有通过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T21:15:11.523

方法`Session_Start`只执行一次：当您的会话开始时；）因此，下次您访问同一页面（或任何页面）时，该方法将不会执行，因为您已经拥有会话。当您从页面回发时`Session_Start`将不会执行，因为它在页面呈现时执行，如果那是您的第一页。

如果您确实必须处理 Global.asax 中提交的值，请使用`Application_BeginRequest`. 但是，我认为应该以其他方式完成，即让您的表单始终提交到您处理传入的值的特定页面。

# java - XSD：为文本节点属性指定名称

> ID：16178445
> 
> 赞同：2
> 
> 时间：2013-04-23T20:19:47.397
> 
> 标签：java, jaxb, xsd, xjc

我正在使用 XML 模式和 xjc 来生成 java 类。我想定义一个如下所示的 XML 结构：

```
<unicorn color="white" superpower="transmogrification">Sparklemallow</unicorn> 
```

具体来说，它具有属性和文本节点。我可以这样定义：

```
<xs:complexType name="unicorn">
  <xs:simpleContent>
    <xs:extension base="xs:string">
      <xs:attribute name="color" type="xs:string"/>
      <xs:attribute name="superpower" type="xs:string"/>
    </xs:extension>
  </xs:simpleContent>
</xs:complexType> 
```

当我生成一个Java类时，`value`默认调用文本节点所代表的属性：

```
public class Unicorn implements Serializable
{
    protected String value; //want to rename this
    protected String color;
    protected String superpower;

    ...

    public void setValue(String value) {
        this.value = value;
    }

    public boolean isSetValue() {
        return (this.value!= null);
    }
} 
```

我想将文本节点属性重命名为语义上更合适的名称——在本例中为`name`. 有没有办法指定这个属性的名称应该是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T20:19:47.397

我可以通过在 xs:complexType 节点下添加注释来更改此属性的名称：

```
<xs:complexType name="unicorn">
  <xs:annotation>
    <xs:appinfo>
      <jaxb:property name="name"/> <!-- your property name here -->
    </xs:appinfo>
  </xs:annotation>
  <xs:simpleContent>
    <xs:extension base="xs:string">
      <xs:attribute name="color" type="xs:ID"/>
      <xs:attribute name="superpower" type="xs:string"/>
    </xs:extension>
  </xs:simpleContent>
</xs:complexType> 
```

# google-drive-api - 如何使用 Realtime API 构建和使用协作数据模型？

> ID：16178447
> 
> 赞同：2
> 
> 时间：2013-04-23T20:19:49.387
> 
> 标签：google-drive-api, google-drive-realtime-api

我尝试按照[构建协作数据模型](https://developers.google.com/drive/realtime/build-model)中描述的步骤进行操作，最终得到以下代码：

```
function onLoad(doc){
  var Book = function(){};

  var model = doc.getModel();
  gapi.drive.realtime.custom.registerType(Book, 'Book');
  Book.prototype.title = gapi.drive.realtime.custom.collaborativeField('title');
  Book.prototype.author = gapi.drive.realtime.custom.collaborativeField('author');
  Book.prototype.isbn = gapi.drive.realtime.custom.collaborativeField('isbn');
  Book.prototype.isCheckedOut = gapi.drive.realtime.custom.collaborativeField('isCheckedOut');
  Book.prototype.reviews = gapi.drive.realtime.custom.collaborativeField('reviews');
  var book = model.create('Book');
  model.getRoot().set('book', book);
  book.addEventListener(gapi.drive.realtime.EventType.OBJECT_CHANGED, function(e){console.log(e);});
  book.title = 'Moby Dick';
  book.author = 'Melville, Herman';
  book.isbn = '978-1470178192';
  book.isCheckedOut = false;
} 
```

不幸的是，执行此操作时，执行时出现以下错误`var book = model.create('Book');`：

> 未捕获的 java.lang.IllegalArgumentException：未知类型名称 Book
> 
> Drive Realtime API 错误：invalid_compound_operation：在同步块结束时打开复合操作 - 您是否忘记调用 endCompoundOperation()？

我想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T22:51:04.773

您需要在加载文档之前注册自定义类型。

这里有三个不同的部分：

*   加载之前：注册自定义类型。
*   在初始化时：每个文档只发生一次。在这里，您要初始化每个文档应具有的数据模型。
*   加载文件时：每次加载都会发生一次。这是您要设置事件侦听器等的地方。

将您的功能分成这三个部分，它应该可以工作。

# javascript - 在 Node.js 中处理下一个事件

> ID：16178451
> 
> 赞同：0
> 
> 时间：2013-04-23T20:20:06.597
> 
> 标签：javascript, node.js, callback, eventqueue

对于每个请求可能需要一两秒钟的应用程序，是否可以在事件循环的每次迭代中只处理一段操作代码？例如：

```
function foo()
{
    ...operative code...
    ...start processing the next event here...
    ...continue with foo() here....
} 
```

会是这样吗？

```
function foo()
{
    ...operative code...
    process.nextTick(function() {
        ...continue with foo() here...
    });
} 
```

如果这是这样做的方法，Node 会自动开始处理队列中的下一个事件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:23:50.383

如果时间花在 IO 上，node 的非阻塞模型会自动处理并发。

如果它没有花费在 IO 中，那么您使用 process.nextTick 来推迟代码的执行是正确的，以便其他请求有待处理的更改。这是一个很好的写法：

[http://howtonode.org/understanding-process-next-tick](http://howtonode.org/understanding-process-next-tick)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T21:04:21.750

您的假设是正确的，您应该将工作划分为更小的执行块，并使用`process.nextTick`. 需要在下一个订单号执行的所有其他计划事件将在您的所需执行块之前处理。

# c++ - 凭据提供程序的自定义 GUI

> ID：16178452
> 
> 赞同：3
> 
> 时间：2013-04-23T20:20:09.980
> 
> 标签：c++, .net, login, credential-providers

我围绕 OpenCV/EmguCV 设计了一个面部识别算法（还没有被打败！）

现在，我显然想用它来登录我的电脑。看来，最好的方法是实现一个自定义凭据提供程序（如 Windows 8 提供的图片锁）。但据我所知，凭证提供者无法定义自定义 GUI（我需要的），不得不将字段定义为 LoginUI 以呈现其 UI。

但我见过具有自定义 UI（图片锁定、商业生物识别等）的凭据提供程序。我错过了什么吗？有没有一些无证的方法可以做到这一点？还是我真的对凭证提供者一无所知？

默认情况下，我是 .NET 程序员，但我不介意将我的算法转换为 C++（应该不难，因为它是 OpenCV）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-12-09T10:35:45.737

如果您制作凭据提供程序，则可以在 common.h 文件中定义自定义 UI。

这个用户界面将是有限的，而且很痛苦，但这是我知道的唯一方法。您可以在实现 ICredentialProviderCredential2 的类的 Initialize() 方法中进行额外的初始化；

您可以稍后像这样更新字段：

```
hr = _pCredProvCredentialEvents->SetFieldString(this, SFI_LARGE_TEXT, L"New text"); 
```

您也可以像这样弹出窗口：

```
HWND hwndOwner = NULL;
_pCredProvCredentialEvents->OnCreatingWindow(&hwndOwner);
::MessageBox(hwndOwner, L"The text of the new window", L"new window title", MB_ICONWARNING); 
```

如果你想要一个好的起点 tis repo 非常有用： [https ://github.com/DavidWeiss2/windows-Credential-Provider-library](https://github.com/DavidWeiss2/windows-Credential-Provider-library)

# c# - 如何在winform中制作不同的形状，就像我们在油漆中绘画一样？

> ID：16178453
> 
> 赞同：1
> 
> 时间：2013-04-23T20:20:10.280
> 
> 标签：c#, winforms

我正在尝试以窗口形式绘制不同的形状，就像我们在油漆中绘制一样。我想要这样的场景，比如用户单击矩形按钮，然后在应该绘制的表单上绘制一个矩形，绘制手绘形状的情况也是如此。以下是我的代码：

```
 {
        bool shouldPaint = false;
        int initialX;
        int initialY;
        bool rectButton = false;
        bool freeButton = false;
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_MouseDown(object sender, MouseEventArgs e)
        {
            shouldPaint = true;
            initialX = e.X;
            initialY = e.Y;
        }

        private void Form1_MouseUp(object sender, MouseEventArgs e)
        {
            shouldPaint = false;
        }
        if ( (rectButton==true) && (shouldPaint))
            {
                //
                this.Invalidate();
              this.Refresh();
                System.Drawing.Pen pen1 = new          System.Drawing.Pen(System.Drawing.Color.Black);
                Graphics painter = CreateGraphics();
int width = e.X - initialX, height = e.Y - initialY;
                Rectangle rect = new Rectangle(initialX, initialY, width * Math.Sign(width), height * Math.Sign(height));
                painter.DrawRectangle(pen1, rect);

            }
            else if ((freeButton == true) && (shouldPaint))
            {
                //this.Refresh();
              //  this.Invalidate();
                Graphics painter = CreateGraphics();

                painter.FillEllipse(new SolidBrush(Color.Black), e.X, e.Y, 4, 4); 
```

我面临两个问题；第一个是我能够向前绘制我的矩形，但是当我尝试向后绘制它时它不起作用。其次，当我单击手绘按钮时，它会在表单上以手绘形状绘制，但是当我第一次单击矩形按钮然后单击手绘按钮时，它不会绘制任何手绘形状。我是初学者，所以请温柔并帮助我:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-15T22:41:55.760

不要发送 initialX 和 initialY 作为 nstarting 坐标，而是发送：

```
int minX = Math.Min((int)initX, (int)e.X);
 int minY = Math.Min((int)initY, (int)e.Y);
Rectangle rect = new Rectangle(minX,minY width * Math.Sign(width), height * Math.Sign(height)); 
```

# udp - 在什么情况下可以改变 UDP 数据包的顺序？

> ID：16178457
> 
> 赞同：1
> 
> 时间：2013-04-23T20:20:26.573
> 
> 标签：udp, multicast

我正在编写应用程序，而不是需要按特定顺序接收 UDP 多播数据包。我试图了解何时以及为什么我可以以错误的顺序接收数据包。因为知道这种情况的可能性有多大意味着我的系统架构。

假设主机 A 将两个 seqNum = 1 和 seqNum = 2 的数据包一一发送给主机 B。

是否保证目标主机 B 会以相同的顺序接收这些数据包？

1.  A 和 B 是同一台机器，即我们在 localhost 上运行测试。
2.  A 和 B 在同一个本地网络中（彼此相距一跳）
3.  A 和 B 在不同的网络中，但路由中没有多路径，即只有一个可能的路由。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T21:57:34.997

不，它永远不能保证 B 会收到任何数据包，更不用说它接收它们的顺序了。在情况 #1 中，很有可能，但不是 100%。其他两种情况都具有不交付或乱序交付的非平凡概率。

网络元素可能会丢弃数据包或无序发送数据包的原因有很多。最常见的原因是队列溢出。许多 IP 实现都有最大数量的数据包，它们将等待处理。如果他们收到另一个数据包（来自另一台机器或同一台机器上的代码），他们通常会丢弃它。由于多台机器尝试同时在线路上传输，数据包甚至可能被连接机器的线路丢弃或延迟。发生这种情况时，任何数据包都不会通过，发送机器可能会或可能不会尝试重新传输。

与往常一样，如果顺序和成功很重要，请使用 TCP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-06T10:43:01.510

交换机或路由器或任何具有队列和大量链接的网络设备可能会以不同的顺序发送数据包 - 数据包（即使具有所有相同的 MAC/IP 标头）可能最终进入不同的队列，这些队列可能以不同的模式转发，甚至更容易 - 链路聚合（etherchannel/ethernet trunk/bonding with or w/out LACP）甚至普通路由都可以通过不同的路径发送数据包

# java - Java - 在 JavaDB 中将图像存储为 Blob

> ID：16178464
> 
> 赞同：2
> 
> 时间：2013-04-23T20:20:49.123
> 
> 标签：java, image, jdbc, blob, javadb

我正在尝试将图像插入数据库，但得到以下信息：

java.sql.SQLDataException：试图从“java.io.InputStream(ASCII)”类型的数据值中获取“BLOB”类型的数据值。

我在数据库中使用 blob。

这是我进行插入的方式：

```
package javaapplication16;
import com.sun.rowset.CachedRowSetImpl;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.sql.SQLException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.sql.rowset.CachedRowSet;

public class JavaApplication16 {

    public static void main(String[] args) throws FileNotFoundException {
        try {
            String driver = "org.apache.derby.jdbc.EmbeddedDriver";
            try {
                try {
                    Class.forName(driver).newInstance();
                } catch (InstantiationException ex) {
                    Logger.getLogger(JavaApplication16.class.getName()).log(Level.SEVERE, null, ex);
                } catch (IllegalAccessException ex) {
                    Logger.getLogger(JavaApplication16.class.getName()).log(Level.SEVERE, null, ex);
                }
            } catch (ClassNotFoundException ex) {
                Logger.getLogger(JavaApplication16.class.getName()).log(Level.SEVERE, null, ex);
            }

            CachedRowSet crs = null;
            crs = new CachedRowSetImpl();
            crs.setUrl("jdbc:derby:derbyDB; create = true");
            crs.setUsername("x");
            crs.setPassword("x");
            crs.setCommand("drop table tbl");
            crs.execute();
            crs.setCommand("CREATE TABLE tbl (ID blob)");
            crs.execute();
            File f = new File("/images/exam_gif_to_png.gif");
            crs.setCommand("insert into tbl (id) values (?)");
            FileInputStream fin = new FileInputStream(f);
            crs.setBinaryStream(1, fin, (int) f.length());
            crs.execute();
        } catch (SQLException ex) {
            Logger.getLogger(JavaApplication16.class.getName()).log(Level.SEVERE, null, ex);
        }

    }
} 
```

顺便说一句，关于仅存储图像的路径，问题是我希望用户能够向我发送图像并将它们存储在一个文件中，我不确定如何准确解决拥有多个图像的问题使用相同的名称，重命名会是一个好的简单的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:33:25.510

尝试这个：

```
File f = new File(imagePath);
FileInputStream fin = new FileInputStream(f);
crs.setBinaryStream(5, fin, (int) f.length()); 
```

编辑---编辑

尝试这个：

我认为您的问题是您没有传播更改。

`acceptChanges()`在每个命令后调用。

```
crs.setCommand("drop table tbl");
crs.execute();
crs.acceptChanges();

crs.setCommand("CREATE TABLE tbl (ID blob)");
crs.execute();
crs.acceptChanges();

crs.setBinaryStream(1, fin, (int) f.length());
crs.execute();
crs.acceptChanges(); 
```

# asp.net-mvc - ASP.NET MVC 创建和编辑一对多关系无效模型状态

> ID：16178465
> 
> 赞同：0
> 
> 时间：2013-04-23T20:20:50.170
> 
> 标签：asp.net-mvc, entity-framework, ef-code-first, one-to-many, modelstate

为什么 ModelState.IsValid 在使用帖子存储一对多数据时返回“false”。我正在使用 ViewModel 和 EditorTemplate 来显示这些数据以供编辑。就我而言，测试（一个）-问题（很多）。如果仅存储测试模型状态是有效的，但是如果我将问题与测试一起存储，模型状态就会变得无效......到处寻找信息，但不明白为什么这是无效的。由于许多教程显示这是映射一对多关系的方式，为什么我不能以这种方式发布数据？

模型

```
public class Test
{
   public Test()
   {
      this.Questions = new List<Question>();
   }
//some excluded for brevity

    [Required]
    public string Name { get; set; }

    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int Id { get; set; }

    [Required]
    public DateTime TestDate { get; set; }

    public int TestTypeId { get; set; }

    public virtual ICollection<Question> Questions { get; set; }
    public virtual Type Type { get; set; }
   }
}

public class Question
{
   [Key]
   [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int QuestionID { get; set; }

    public int TestID { get; set; }

    public string Question { get; set; }

    public virtual Test Test { get; set; }
} 
```

ViewModel（使用视图模型，因为它有助于从存储在数据库中的数据生成下拉列表）

```
 public class TestData
{
    public Test Test { get; set; }
    public Question Question { get; set; }
    public IEnumerable<TestType> TestTypes { get; set; }
    public List<string> Questions { get; set; }
} 
```

问题编辑器模板

```
@model Project.Models.CustomQuestion
<div>
 @Html.HiddenFor(a => a.QuestionID)
 @Html.HiddenFor(a => a.TestID)
 @Html.HiddenFor(a => a.Test)
 @Html.EditorFor(a => a.Question)
</div> 
```

查看（用于编辑）

```
@model  Project.ViewModels.TestData

@using (Html.BeginForm()) {
@Html.AntiForgeryToken()
@Html.ValidationSummary(true)

<fieldset>
    <legend>Event</legend>

    @Html.HiddenFor(a => a.Test.Id)

    <div class="editor-field">
        @Html.EditorFor(model => model.Test.Name
    </div>

    <div class="editor-field">
        @Html.EditorFor(model => model.Test.TestDate)
    </div>

    <div>
        @Html.DropDownListFor(model => model.Test.TestTypeId, new SelectList(Model.TestTypes, "Id", "Name"))
    </div>

    <div class="editor-field">
        if 5 questions are stored 5 textboxes with questions will appear
        @Html.EditorFor(model => model.Test.Questions)
    </div>

    <p>
        <input type="submit" value="Save" />
    </p>
</fieldset>
} 
```

控制器

```
 public ActionResult Edit(int id = 0)
    {

       var viewModel = new ViewModels.TestData
       {
          Test = db.Tests.Find(id),
          TestTypes = db.TestTypes
       };
           return View(viewModel);
    }

    [HttpPost]
    public ActionResult Edit(TestData testData)
    {

       if (ModelState.IsValid) //returns "false" if testData.Event.Questions > 0
       {
          db.Entry(testtData).State = EntityState.Modified;
          db.SaveChanges();
          return RedirectToAction("Index");
       }

       return View(testData);
     } 
```

# php - 寻找五月第三个星期日的脚本

> ID：16178467
> 
> 赞同：0
> 
> 时间：2013-04-23T20:21:02.680
> 
> 标签：php, date

我正在寻找一个 PHP 例程来查找我们每年的家庭团聚日期，这样我就不必继续在日历上手动查找 ip 并每年在网站上输入它。

日期是五月第三个星期日之前的星期六。

我进行了搜索，但没有找到关于如何在指定月份中找到第三个星期日的答案。我只发现了一些关于如何找到本月第一个太阳的东西。不同的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T20:26:10.180

您可以使用`strtotime()`相对[日期格式](http://www.php.net/manual/en/datetime.formats.relative.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T20:27:31.123

你可以使用内置的 php strtotime

```
<?php
$s = 'Monday, September 28, 2009';
$time = strtotime($s);
$start = strtotime('last sunday, 12pm', $time);
$end = strtotime('next saturday, 11:59am', $time);
$format = 'l, F j, Y g:i A';
$start_day = date($format, $start);
$end_day = date($format, $end);
header('Content-Type: text/plain');
echo "Input: $s\nOutput: $start_day - $end_day";
?> 
```

所以实际上你可以使用 3 次“下周日”，而每次更新`$time`到新的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T20:28:13.337

我认为应该这样做：

```
$time = strtotime('may 1 +3 sunday'); 
```

[编辑] 哎呀，忘了回去一天：

```
$time = strtotime('may 1 +3 sunday -1 day'); 
```

[Edit2] 循环播放，每年：

```
for ($year = 2013; $year <= 2020; $year++) {
    echo date('r', strtotime("may $year +3 sunday -1 day")), "\n";
} 
```

输出：

```
Sat, 18 May 2013 00:00:00 -0400
Sat, 17 May 2014 00:00:00 -0400
Sat, 16 May 2015 00:00:00 -0400
Sat, 14 May 2016 00:00:00 -0400
Sat, 20 May 2017 00:00:00 -0400
Sat, 19 May 2018 00:00:00 -0400
Sat, 18 May 2019 00:00:00 -0400
Sat, 16 May 2020 00:00:00 -0400 
```

# java - 如何在 StaggeredGridView 中使用 OnItemClickListener？

> ID：16178468
> 
> 赞同：0
> 
> 时间：2013-04-23T20:21:08.893
> 
> 标签：java, android

我已经从这里下载了 StaggeredGridView 库和演示： [https ://github.com/maurycyw/StaggeredGridViewDemo](https://github.com/maurycyw/StaggeredGridViewDemo) [https://github.com/maurycyw/StaggeredGridView](https://github.com/maurycyw/StaggeredGridView)

它在 StaggeredGridView 库中实现其 onItemClickLister。我一直在尝试使用它，但我的应用程序不断崩溃。这是我的代码。

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.AdapterView;
import android.widget.Toast;
import com.origamilabs.library.views.StaggeredGridView;
import com.origamilabs.library.views.StaggeredGridView.OnItemClickListener;

public class MainActivity extends Activity implements OnItemClickListener {

StaggeredAdapter adapter;

public String urls[] = {

"http://farm9.staticflickr.com/8462/8005636463_0cb4ea6be2.jpg",
        "http://farm8.staticflickr.com/7232/6913504132_a0fce67a0e_c.jpg",
        "http://farm5.staticflickr.com/4133/5096108108_df62764fcc_b.jpg",
        "http://farm5.staticflickr.com/4074/4789681330_2e30dfcacb_b.jpg",
        "http://farm9.staticflickr.com/8208/8219397252_a04e2184b2.jpg",
        "http://farm9.staticflickr.com/8483/8218023445_02037c8fda.jpg",
        "http://farm9.staticflickr.com/8335/8144074340_38a4c622ab.jpg",
        "http://farm9.staticflickr.com/8060/8173387478_a117990661.jpg",
        "http://farm9.staticflickr.com/8056/8144042175_28c3564cd3.jpg",
        "http://farm9.staticflickr.com/8183/8088373701_c9281fc202.jpg",
        "http://farm9.staticflickr.com/8185/8081514424_270630b7a5.jpg",
        "http://farm9.staticflickr.com/8462/8005636463_0cb4ea6be2.jpg",
        "http://farm9.staticflickr.com/8306/7987149886_6535bf7055.jpg",
        "http://farm9.staticflickr.com/8444/7947923460_18ffdce3a5.jpg",
        "http://farm9.staticflickr.com/8182/7941954368_3c88ba4a28.jpg",
        "http://farm9.staticflickr.com/8304/7832284992_244762c43d.jpg",
        "http://farm9.staticflickr.com/8163/7709112696_3c7149a90a.jpg",
        "http://farm8.staticflickr.com/7127/7675112872_e92b1dbe35.jpg",
        "http://farm8.staticflickr.com/7111/7429651528_a23ebb0b8c.jpg",
        "http://farm9.staticflickr.com/8288/7525381378_aa2917fa0e.jpg",
        "http://farm6.staticflickr.com/5336/7384863678_5ef87814fe.jpg",
        "http://farm8.staticflickr.com/7102/7179457127_36e1cbaab7.jpg",
        "http://farm8.staticflickr.com/7086/7238812536_1334d78c05.jpg",
        "http://farm8.staticflickr.com/7243/7193236466_33a37765a4.jpg",
        "http://farm8.staticflickr.com/7251/7059629417_e0e96a4c46.jpg",
        "http://farm8.staticflickr.com/7084/6885444694_6272874cfc.jpg" };

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    StaggeredGridView gridView = (StaggeredGridView) this
            .findViewById(R.id.staggeredGridView1);

    int margin = getResources().getDimensionPixelSize(R.dimen.margin);
    gridView.setItemMargin(margin);
    gridView.setPadding(margin, 0, margin, 0);
    StaggeredAdapter adapter = new StaggeredAdapter(MainActivity.this,
            R.id.imageView1, urls);
    gridView.setAdapter(adapter);
    adapter.notifyDataSetChanged();

    gridView.setOnItemClickListener(this);

} 
```

这是 onItemClick 方法：

```
@Override
public void onItemClick(StaggeredGridView parent, View view, int position,
        long id) {

    String item = adapter.getItem(position).toString();
    Toast.makeText(MainActivity.this, "You have chose: "+ item, Toast.LENGTH_LONG).show();

} 
```

# python - Numpy 以 MATLAB 一半的速度运行

> ID：16178471
> 
> 赞同：13
> 
> 时间：2013-04-23T20:21:29.377
> 
> 标签：python, performance, matlab, numpy, atlas

我一直在将 MATLAB 代码移植到 Python 上，经过大量工作后，我有了一些可以工作的东西。然而，缺点是 Python 运行我的代码比 MATLAB 慢。我知道使用优化的 ATLAS 库会加快速度，但实际上实现这一点让我感到困惑。这是发生了什么：

我开始一个没有安装 BLAS 的 ipython 会话：

```
import numpy.distutils.system_info as sysinfo
import time
In [11]: sysinfo.get_info('atlas')
Out[11]: {}

timeit( eig(randn(1E2,1E2)) )
100 loops, best of 3: 13.4 ms per loop 
```

Matlab 中相同的代码运行速度是原来的两倍

```
tic,eig(randn(1E2));toc*1000
    6.5650 
```

我从 Ubuntu 存储库安装未优化的 ATAS deb。重新启动 ipython，现在我得到：

```
In [2]: sysinfo.get_info('atlas')
 ...
Out[2]: 
{'define_macros': [('ATLAS_INFO', '"\\"3.8.4\\""')],
 'include_dirs': ['/usr/include/atlas'],
 'language': 'f77',
 'libraries': ['lapack', 'f77blas', 'cblas', 'atlas'],
 'library_dirs': ['/usr/lib/atlas-base/atlas', '/usr/lib/atlas-base']} 
```

和测试代码：

```
In [4]: timeit( eig(randn(1E2,1E2)) )
100 loops, best of 3: 16.8 ms per loop 
```

所以没有更快。如果有什么慢一点。但我还没有切换到优化的 BLAS。我遵循这些说明：[http](http://danielnouri.org/notes/category/python/) ://danielnouri.org/notes/category/python/我构建库并用这些覆盖非优化版本。我重新启动 ipython 但没有任何变化：

```
In [4]: timeit( eig(randn(1E2,1E2)) )
100 loops, best of 3: 15.3 ms per loop 
```

难道不能比这更好吗？在这个简单的例子中，MATLAB 的速度仍然是原来的两倍。在我在傅里叶域中进行图像配准的实际示例中，Matlab 等效项比 Python 版本快 4 到 5 倍。有没有人设法让 Numpy 以 MATLAB 的速度工作？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-23T20:48:01.927

## 简单的例子

Numpy 正在计算特征向量和特征值，因此大约需要两倍的时间，这与您的减速一致（`np.linalg.eigvals`仅用于计算特征值）。

最后，`np.linalg.eig`是一个围绕 dgeev 的小包装器，并且可能在使用 MKL 的 Matlab 中发生同样的事情。

要在线性代数中获得几乎相同的速度，您可以针对 MKL 或 OpenBLAS 构建 Numpy。[Continuum](https://store.continuum.io/cshop/accelerate)或[Enthought](https://www.enthought.com/products/canopy/faq/)提供了一些商业优惠（可能对学者免费）。您也可以获取 MKL 并[自己](http://software.intel.com/en-us/articles/numpy-scipy-with-mkl)构建 Numpy 。

## 真实世界的例子

慢 4 倍似乎太多了（我已经在 Numpy 中重写了一些 Matlab 代码，并且两个程序都以非常相似的方式执行）。考虑到最近的 Matlab 版本带有一个简单的 JIT，因此循环并不像通常的 Python 实现那么糟糕。如果你正在做很多 FFT，你可以从使用[FFTW 包装器](https://stackoverflow.com/questions/6365623/improving-fft-performance-in-python)中受益（[pyFFTW](http://hgomersall.github.io/pyFFTW/)看起来不错，但我没有使用它）。

# c++ - 显示openGL后删除文本

> ID：16178475
> 
> 赞同：0
> 
> 时间：2013-04-23T20:21:43.600
> 
> 标签：c++, opengl, text

我正在用 C++ 和 OpenGL 编写一个 3D 游戏。

我想做的是当玩家与物体碰撞时，屏幕上会出现一小段文字，然后几秒钟后消失。

我知道如何在碰撞时将文本本身绘制到屏幕上。我的问题是几秒钟后我不知道如何删除文本。

我目前正在使用此功能将文本绘制到屏幕上：

```
void Gui::drawStrokeText(_In_ const string& p_string, _In_ int p_x, _In_ int p_y, _In_ int p_z)
 {
  glPushMatrix();
  glTranslatef(p_x, p_y, p_z);
  glScalef(0.25f, -0.25f, p_z);
  glColor4f(200/255.f, 200/255.f, 200/255.f, 128/255.f);

  for (int i = 0; i < p_string.size(); ++i)
  {
      glutStrokeCharacter(GLUT_STROKE_ROMAN , p_string[i]);
  }
  glPopMatrix();
 } 
```

所以要澄清从屏幕上删除文本的更好方法是什么？

整个班级可以在[这里找到](http://codeviewer.org/view/code:3245)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T21:27:47.007

显然，您必须有某种计时器来检查您是否必须在此帧中绘制某些东西（主循环中的一个步骤）或时间已到并且您必须隐藏它（等于根本不绘制）。

这是一个快速（伪）代码示例（可能包含错误！看方法，而不是语法）：

```
Timer* g_Timer; // timer, for example wrapped std::chrono or Windows QueryPerformanceCounter()
Renderer* g_Renderer;

int main()
{
    ...
    while( running ) // main loop
    {
        ...
        g_Timer->Tick(); // calculate delta time, FPS, etc.
        g_Renderer->RenderOneFrame();
        ...
    }
    ...
}

class GameObject
{
public:
    void ShowText( const std::wstring& text, const float currentTime, const float showDuration )
    {
        hideTextTime = currentTime + showDuration;
        collisionText = text;
    }

    float WhenWeMustHideText() const { return hideTextTime; }
    std::wstring GetCollisionText() const { return collisionText; }
private:
    float hideTextTime;
    std::wstring collisionText;

};

void RenderOneFrame()
{
    ...
    float time = g_Timer->GetTime(); // time elapsed since game start in milliseconds
    float dt = g_Timer->GetDelta(); // time elapsed since previous frame in milliseconds
    ...

    for(int i = 0; i < numObjects; ++i)
    {
        // check collision somehow
        if( object[i]->HasCollision() )
        {
            object->ShowText( L"Boom!", time , 5000.0f );
        }

        // check if we must draw text or just forget to do this ("hide")
        if ( time <= object[i]->WhenWeMustHideText() )
        {
            g_Renderer->DrawText(object[i]->GetCollisionText(), object[i]->GetPosition() + offset);
        }
        ...
    }
    ...
} 
```

希望能帮助到你！

# java - JSTL 错误延迟值

> ID：16178477
> 
> 赞同：1
> 
> 时间：2013-04-23T20:21:47.240
> 
> 标签：java, tomcat, spring-mvc

当我运行我的战争时，我在 Tomcat 6.0.29 中收到以下错误：

```
TagLibraryInfoImpl createAttribute  
WARNING: Unknown element (deferred-value) in attribute 
```

在 jsp 中，当它评估这段代码时：

```
<c:if test='${pageContext["request"].userPrincipal.principal.enabled eq false}'> 
```

我已经用谷歌搜索并检查了我是否使用了正确的依赖项。

```
<dependency>
    <groupId>org.apache.tomcat</groupId>
    <artifactId>servlet-api</artifactId>
    <version>${apache.tomcat}</version>
    <scope>provided</scope>
</dependency>

<dependency>
    <groupId>taglibs</groupId>
    <artifactId>standard</artifactId>
    <version>1.1.2</version>
</dependency>

<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>jstl</artifactId>
    <version>1.2</version>
</dependency> 
```

根据我的 JSP 版本（web.xml）

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
              http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
        version="2.5" xmlns="http://java.sun.com/xml/ns/javaee">

...
</web-app> 
```

它在我尝试过的每个 Tomcat 6 实例中都失败了，但是在使用 maven“tomcat:run”（使用相同的 6.0.29 版本）时它可以工作

# python - 使用 Beautiful Soup 制作爬虫，索引 url 的问题

> ID：16178478
> 
> 赞同：1
> 
> 时间：2013-04-23T20:21:47.503
> 
> 标签：python, indexing, beautifulsoup, web-crawler

所以我正在尝试为搜索引擎制作爬虫。我的代码大部分是完整的。它的工作方式是：

*   使用 BeautifulSoup 打开页面，
*   将 url 和 docID 保存到索引（在这种情况下只是一个文本文件），
*   获取一些干净的文本并将其保存到文本文件中，
*   从页面中获取所有 url，如果它还没有在索引中，则将它们添加到页面列表中。

我遇到的问题是，有时它会多次索引网址。

我做的一个示例运行是使用初始的`pages = ["http://www.ece.udel.edu"]`. 在输出文件中，每一行都包含一个 docID 和一个 url。这个格式是`docID url\n`. 这将在对结果进行排名时引起问题，因为虽然它应该对这些结果进行相同的排名，但我将有多个相同的页面（每个页面都有不同的 docID）被排名。

这是我到目前为止的代码。我试图彻底评论它以使其更容易理解。

```
def cleanText(soup):
    #remove all unnecessary tags & punctuation leaving text of all lowercase letters & words
    texts = soup.findAll(text=True)
    visible_elements=[]
    for elem in texts:
        if elem.parent.name in ['style', 'script', '[document]', 'head', 'title']:
            visible_elements.append('')
        elem = elem.encode('utf-8','replace')
        result = re.sub('<!--.*-->|\r|\n', '', str(elem), flags=re.DOTALL)
        result = re.sub('\s{2,}|&nbsp;', ' ', result)
        visible_elements.append(result)
    visible_text = ' '.join(visible_elements)
    visible_text = re.sub('[^0-9a-zA-Z]+', ' ', visible_text)
    visible_text = visible_text.lower()
    return visible_text

def naming(pagename, pathToOutput):
    #used to create filename to save output text file
    cantBeInFilename = ("/", "\\",":","*","?","<",">","|")
    for k in range(len(cantBeInFilename)):
        pagename = pagename.replace(cantBeInFilename[k], "-")
    filename = "\\".join((pathToOutput, pagename))
    filename = ".".join((filename, "txt"))
    return filename

def crawl(pages, pathToOutput, pathToLinks):
    depth = len(pages)
    docID = 1
    for i in range(depth): #for each link on the page
        newpages=set() #create an empty set for gathered pages
        for page in pages: #each page in pages, initially atleast 1
            linksText = open(pathToLinks, 'a') #open a file
            linksText.write(str(docID) + " "); #write a docID to identify page
            docID = docID + 1 #increment docID
            linksText.write(str(page) + '\n') #append link into end of file
            linksText.close() #close file to update
            try:
                c = urllib2.urlopen(page) #open the page
                print ("Opening " + page)
            except:
                print ("Could not open " + page)
                continue
            soup = BeautifulSoup(c.read())
            clean_text = cleanText(soup)
            #get all links off page
            links = soup.findAll('a')
            #write web page to text file in pathToOutput directory
            filename = naming(page, pathToOutput)
            f = open(filename, 'w')
            f.write(clean_text)
            f.close()
            depth = 0
            for link in links:
                if('href' in dict(link.attrs)):
                    #set depth equal to the # of links in the pages
                    depth = depth+1
                    url = urljoin(page, link['href'])
                    #remove unnecessary portions of url
                    if url.find("'") != -1:
                        continue
                    url = url.split('#')[0]
                    #get each line (each link) from linksText
                    linksText = open(pathToLinks, 'r')
                    lines = linksText.readlines()
                    linksText.close()
                    #remove docIDs just to have 
                    for j in range(len(lines)):
                        lines[j-1] = lines[j-1].split()[1]
                    #FOR ALL LINKS
                    if url[0:4] == "http":
                        #check to see if the url ends with a /, if so remove it
                        if url[len(url)-1]=="/":
                            url = url[0:len(url)-1]
                        #check to see if the url is already in links
                        present = 0
                        for line in lines:
                            if (url == line):
                                present = 1
                            else:
                                present = 0
                        #if the url isn't present, add to pages to be cycled through
                        if (present == 0):
                            print ("Indexing " + url)
                            newpages.add(url)
                #add newpages to pages
                for newpage in newpages:
                    pages.append(newpage)
                newpages = set()
            #remove already read page from pages
            pages.remove(page) 
```

我会附上我已经从中获得的输出，但我刚开始在网站上发布问题，不能发布超过两个链接的问题:(对不起，如果这很长，令人困惑，而且只是简单没有意义

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T05:03:18.690

此代码段没有按照您的想法执行

```
present = 0
for line in lines:
    if (url == line):
        present = 1
    else:
        present = 0
#if the url isn't present, add to pages to be cycled through
if (present == 0):
    print ("Indexing " + url)
    newpages.add(url) 
```

`present = 1`仅当匹配在字符串的最后一项上时才会离开。一个更简单的测试方法是：

```
#if the url isn't present, add to pages to be cycled through
if url not in lines:
    print ("Indexing " + url)
    newpages.add(url) 
```

你可能还需要改变

```
#get each line (each link) from linksText
linksText = open(pathToLinks, 'r')
lines = linksText.readlines()
linksText.close() 
```

进入

```
#get each line (each link) from linksText
linksText = open(pathToLinks, 'r')
lines = linksText.read().split('\n')
linksText.close() 
```

这样每个`line`in`lines`都不会以`\n`

# android - 当我尝试从自动完成文本中获取文本（）时，Android 程序崩溃

> ID：16178481
> 
> 赞同：0
> 
> 时间：2013-04-23T20:21:53.393
> 
> 标签：android, gettext, autocompletetextview

我正在尝试构建一个允许您输入文本的 android 应用程序，然后将文本传输到主屏幕。它允许我毫无问题地构建自动完成功能，但是每当我尝试调用 getText() 函数时，整个程序都会崩溃。任何帮助将不胜感激，谢谢

```
 public class TeamFragment extends DialogFragment {
TextView team1, team2, score1, score2;

    AutoCompleteTextView team1input;

public TeamFragment(View t1, View t2, View s1, View s2) {
    team1=(TextView) t1;
    team2=(TextView) t2;
    score1=(TextView) s1;
    score2=(TextView) s2;
}

public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.team_score_layout, container);
    //mEditText = (EditText) view.findViewById(R.id.txt_your_name);
    getDialog().setTitle("Enter Team Name");
    Button b = (Button) view.findViewById(R.id.teamButton);

    b.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            team1input=(AutoCompleteTextView) v.findViewById(R.id.autoCompleteTeam1);
            team1input.getText();         //crashes here
            team1.setText("hi");
            dismiss();
        }
    });
    return view;
}

} 
```

这是logCat，我似乎得到了一个空指针异常。

```
04-23 13:12:33.628: E/AndroidRuntime(902): FATAL EXCEPTION: main
04-23 13:12:33.628: E/AndroidRuntime(902): java.lang.NullPointerException
04-23 13:12:33.628: E/AndroidRuntime(902):  at com.example.ucsb.cs.cs185.dimberman.nba.TeamFragment$1.onClick(TeamFragment.java:42)
04-23 13:12:33.628: E/AndroidRuntime(902):  at android.view.View.performClick(View.java:2485)
04-23 13:12:33.628: E/AndroidRuntime(902):  at android.view.View$PerformClick.run(View.java:9080)
04-23 13:12:33.628: E/AndroidRuntime(902):  at android.os.Handler.handleCallback(Handler.java:587)
04-23 13:12:33.628: E/AndroidRuntime(902):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-23 13:12:33.628: E/AndroidRuntime(902):  at android.os.Looper.loop(Looper.java:123)
04-23 13:12:33.628: E/AndroidRuntime(902):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-23 13:12:33.628: E/AndroidRuntime(902):  at java.lang.reflect.Method.invokeNative(Native Method)
04-23 13:12:33.628: E/AndroidRuntime(902):  at java.lang.reflect.Method.invoke(Method.java:507)
04-23 13:12:33.628: E/AndroidRuntime(902):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-23 13:12:33.628: E/AndroidRuntime(902):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-23 13:12:33.628: E/AndroidRuntime(902):  at dalvik.system.NativeStart.main(Native Method) 
```

`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T20:30:38.220

`team1input = (AutoCompleteTextView) view.findViewById(R.id.autoCompleteTeam1)`在方法中使用`onCreateView()`并删除方法中类似的行`onClick()`。

（假设您在布局文件中定义了`AutoCompleteTextView`with `autoCompleteTeam1`id 。）`team_score_layout.xml`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T21:10:11.430

当您在视图类下调用 findViewById() 时，它会找到该类的子视图。

当 onClick 被触发时，`View v`传入`onClick()`的是按钮。如果您尝试检索的 AutoCompleteView 不是该按钮的子项，则调用`v.findViewById()`将为您提供`NullPointerException`，因为该视图在按钮的子项树下不存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T21:30:27.537

只需更换

```
 team1input=(AutoCompleteTextView) v.findViewById(R.id.autoCompleteTeam1); 
```

和

```
 team1input=(AutoCompleteTextView) view.findViewById(R.id.autoCompleteTeam1); 
```

# objective-c - ARC 调用非 ARC 非自动释放方法

> ID：16178482
> 
> 赞同：0
> 
> 时间：2013-04-23T20:21:56.177
> 
> 标签：objective-c, automatic-ref-counting

我有一个使用 ARC 的程序并调用一些非 ARC 的库方法。

非 ARC 库：

```
-(NSMutableData*) bar{
    return [[NSMutableData alloc] initWithLength:100];
} 
```

弧计划：

```
- (void)foo
{
    NSMutableData* data = [d bar];
}
// Data is leaked 
```

是否可以在不更改库方法以返回自动释放对象的情况下避免数据泄露？

当我在非 ARC 代码中使用这个库时，我曾经调用数据释放，从而避免泄漏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T20:25:36.407

怎么样

```
-(NSMutableData*) bar
{
    return [[[NSMutableData alloc] initWithLength:100] autorelease];
} 
```

# windows-8 - ie10 windows 8 桌面 html 文件认为我在本地 Intranet

> ID：16178485
> 
> 赞同：0
> 
> 时间：2013-04-23T20:22:00.167
> 
> 标签：windows-8, internet-explorer-10

我只是在 Windows 8 非 Metro 界面上将一个 html 文件拖到 IE10 中，并且浏览器提示器说明了有关本地 Intranet 的内容。如何禁止这种情况发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T04:43:50.267

IE 的安全策略表明本地文件将被视为本地 Intranet 区域的一部分，这可以通过 IE 的安全设置进行更改，请参见[此处](https://superuser.com/questions/149068/how-to-add-a-local-file-to-trusted-zone-in-ie8)。

# javascript - 之后如何关闭自定义表单并强制行为？

> ID：16178487
> 
> 赞同：0
> 
> 时间：2013-04-23T20:22:07.927
> 
> 标签：javascript, sharepoint, sharepoint-2010, customization, sharepoint-workflow

我一直在为一个问题苦苦挣扎一段时间，并希望有人可以阐明一些可能的解决方案。

我目前有一个 SharePoint 2010 列表中项目的自定义创建表单。我需要找到一种方法来完全保存项目并关闭表单，然后启动 Nintex 工作流程或使用一些自定义功能在另一个列表中创建一个项目，其中包含当前项目的一些字段。

当前的问题是，在此列表上创建项目时触发的工作流必须在表单完全关闭之前自行关闭。这意味着，如果服务器花费大量时间来启动工作流，我的表单会在关闭之前闲置一段时间。

**简短版本：** 我需要能够保存项目并关闭表单，然后启动一些功能，该功能将使用该项目的信息在单独的列表中创建一个项目。

有没有人想出办法解决这个问题？如果有帮助，我也知道如何使用 JavaScript 而不是 Nintex 在列表中创建项目。如果有其他方法可以解决这个问题，我不需要使用工作流。感谢您的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:06:34.963

在 SharePoint 列表中添加自定义事件的最佳方式是使用事件接收器。

在添加新项目时引发事件 ItemAdding。您将能够与此列表中的其他列表进行交互。

[与视觉工作室的第一步](http://msdn.microsoft.com/en-us/library/gg252010%28v=office.14%29.aspx)

[SharePoint 2010 的所有事件接收器](http://msdn.microsoft.com/en-us/library/ff408183%28v=office.14%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T00:24:19.183

我相信 Nintex 2010 项目创建工作流是由异步事件处理程序触发的。这意味着它会在您的自定义创建页面完成保存项目后触发。我可能错了，稍后我会得到 Nintex 的确认。

您始终可以编写一个异步事件处理程序来启动您的自定义操作或您的 Nintex 工作流程，而不是依赖于自动启动工作流程。无论哪种情况，它都会在您的项目创建后运行。

这种方法虽然需要编码。如果您不是开发人员。那么也许您需要关注为什么您的创建表单需要这么长时间才能关闭。保存项目后是否尝试调出列表视图？

# symfony - Symfony2 - 如何通过表单上传 hasMany 附件

> ID：16178491
> 
> 赞同：0
> 
> 时间：2013-04-23T20:22:18.617
> 
> 标签：symfony, doctrine-orm

我有一个关于上传的 symfony2 问题。我正在使用学说并有两个实体，第一个称为“问题”，有许多附件，第二个称为“附件”。我正在使用动态数据解决方案，使人们能够在“问题”表单上上传许多附件，并为每个上传的内容指定一个标题。当我保存“问题”时，相关的附件行也被保存，但只有标题:(实际上传的文件从未被“上传”方法捕获。我正在关注 symfony2 食谱教程，想知道我是否错过了一步? 我有点迷茫，在我的学习曲线上很早，不知道如何调试这个问题。

我的附件实体如下：

```
namespace WebConfection\ServiceDeskBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Doctrine\Common\Collections\ArrayCollection;
use Symfony\Component\Validator\Constraints as Assert;
use Symfony\Component\HttpFoundation\File\UploadedFile;

/**
 * @ORM\Table(name="webconfection_servicedesk_attachment")
 * @ORM\Entity(repositoryClass="WebConfection\ServiceDeskBundle\Repository\AttachmentRepository")
 * @ORM\HasLifecycleCallbacks()
 */
class Attachment
{

    private $temp;

    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
     protected $id;

    /**
     * @ORM\Column(type="string", length=150)
     */
    protected $title;    

    /**
     * @ORM\Column(type="string", length=255, nullable=true)
     */
    protected $path;

    /**
     * @Assert\File(maxSize="6000000")
     */
    private $file;

    /**
     * @ORM\Column(type="datetime")
     */
    protected $created;

    /**
     * @ORM\Column(type="datetime")
     */
    protected $updated;

    /**
     * @ORM\ManyToOne(targetEntity="Issue", inversedBy="attachments")
     * @ORM\JoinColumn(name="issue_id", referencedColumnName="id")
     */
    protected $issue;

    /**
     * Constructor
     */
    public function __construct()
    {

        $this->setCreated(new \DateTime());
        $this->setUpdated(new \DateTime());
    }    

    /**
     * Sets file.
     *
     * @param UploadedFile $file
     */
    public function setFile(UploadedFile $file = null)
    {
        $this->file = $file;
        // check if we have an old image path
        if (is_file($this->getAbsolutePath())) {
           // store the old name to delete after the update
           $this->temp = $this->getAbsolutePath();
        } else {
            $this->path = 'initial';
        }
    }

    /**
     * @ORM\PrePersist()
     * @ORM\PreUpdate()
     */
    public function preUpload()
    {
        if (null !== $this->getFile()) {
            $this->path = $this->getFile()->guessExtension();
        }
    }

    /**
     * @ORM\PostPersist()
     * @ORM\PostUpdate()
     */
    public function upload()
    {
        if (null === $this->getFile()) {
            return;
        }

        // check if we have an old image
        if (isset($this->temp)) {
            // delete the old image
            unlink($this->temp);
            // clear the temp image path
            $this->temp = null;
        }

        // you must throw an exception here if the file cannot be moved
        // so that the entity is not persisted to the database
        // which the UploadedFile move() method does
        $this->getFile()->move(
            $this->getUploadRootDir(),
            $this->id.'.'.$this->getFile()->guessExtension()
        );

        $this->setFile(null);
    }

    /**
     * @ORM\PreRemove()
     */
    public function storeFilenameForRemove()
    {
        $this->temp = $this->getAbsolutePath();
    }

    /**
     * @ORM\PostRemove()
     */
    public function removeUpload()
    {
        if (isset($this->temp)) {
            unlink($this->temp);
        }
    }

    public function getAbsolutePath()
    {
        return null === $this->path
            ? null
            : $this->getUploadRootDir().'/'.$this->id.'.'.$this->path;
    }

    /**
     * Get file.
     *
     * @return UploadedFile
     */
    public function getFile()
    {
        return $this->file;
    }

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set title
     *
     * @param string $title
     * @return Attachment
     */
    public function setTitle($title)
    {
        $this->title = $title;

        return $this;
    }

    /**
     * Get title
     *
     * @return string 
     */
    public function getTitle()
    {
        return $this->title;
    }

    /**
     * Set created
     *
     * @param \DateTime $created
     * @return Attachment
     */
    public function setCreated($created)
    {
        $this->created = $created;

        return $this;
    }

    /**
     * Get created
     *
     * @return \DateTime 
     */
    public function getCreated()
    {
        return $this->created;
    }

    /**
     * Set updated
     *
     * @param \DateTime $updated
     * @return Attachment
     */
    public function setUpdated($updated)
    {
        $this->updated = $updated;

        return $this;
    }

    /**
     * Get updated
     *
     * @return \DateTime 
     */
    public function getUpdated()
    {
        return $this->updated;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T20:40:32.637

我有一个类似的问题，这就是我解决它的方法。

[http://blog.icod.de/2013/04/17/symfony2-file-upload-with-related-entities/](http://blog.icod.de/2013/04/17/symfony2-file-upload-with-related-entities/)

不要介意我对 symfony2 的咆哮和愤怒，我有时需要在某个地方发泄；）

它可能不是您问题的具体答案，但也许会对您有所帮助

我正在控制器中进行移动，我当然可以将此功能移动到实体，但是嗯，它可以工作，我只需要上传一次功能，这会减少内存使用量，而不是在实体中使用它。

高温高压

# c# - 更多关于 GUI 的问题

> ID：16178492
> 
> 赞同：-1
> 
> 时间：2013-04-23T20:22:20.993
> 
> 标签：c#, user-interface

我正在为学校做作业，我有点迷茫。GUI 应该有一个文本输入框，您可以在其中输入 SAT 分数，然后它将该分数转换为 ACT 分数并将该 ACT 分数显示到一个文本框中，然后在另一个文本框中说明该分数是否足够高。

根据 SAT 是否属于这些数字，将 SAT 分数转换为 ACT 分数。我不明白如何编写它来找出 SAT 输入分数在 ACT 方面的位置并将其显示到该文本框......

```
 SAT score > 1600    = ACT score 37 (high enough)
    SAT score from 1560-1590    = ACT score 36 (high enough)
    SAT score from 1510-1550    = ACT score 35 (high enough)
    SAT score from 1460-1500    = ACT score 34 (high enough)
    SAT score from 1410-1450    = ACT score 33 (too low)
    SAT score from 1360-1400    = ACT score 32 (too low)
    SAT score < 1350    = ACT score 31 (too low) 
```

此外，我们必须编写一个 try/catch 来确保输入的是整数而不是其他任何内容。那部分我理解。

到目前为止，这是我的代码，没有任何错误。

```
 private void convertButton_Click(object sender, EventArgs e)
    {

        try
        {
            double satscore;
            satscore = Convert.ToDouble(satScoreTextBox.Text);
        }
        catch
        {
            MessageBox.Show("Invalid input, value must be numeric");
            satScoreTextBox.Focus();
            satScoreTextBox.SelectAll();
        }

    }

    private void exitButton_Click(object sender, EventArgs e)
    {
        this.Close();
    }

} 
```

}

谢谢，任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:37:26.733

```
private void convertButton_Click(object sender, EventArgs e)
{
    try
    {
        String message="";
        double satscore;
        int actscore=0;
        satscore =Double.Parse(satScoreTextBox.Text);
        if(satscore>1600)
        {
            actscore=37;
            message="ACT score "+actscore+" (high enough)";
        }
        else if(satscore>=1560&&satscore<=1590)
        {
            actscore=36;
            message="ACT score "+actscore+" (high enough)";
        }
        else if(satscore>=1510&&satscore<=1550)
        {
            actscore=35;
            message="ACT score "+actscore+" (high enough)";
        }
        else if(satscore>=1460&&satscore<=1500)
        {
            actscore=34;
            message="ACT score "+actscore+" (high enough)";
        }
        else if(satscore>=1410&&satscore<=1450)
        {
            actscore=33;
            message="ACT score "+actscore+" (too low)";
        }
        else if(satscore>=1360&&satscore<=1400)
        {
            actscore=32;
            message="ACT score "+actscore+" (too low)";
        }
        else
        {
            actscore=31;
            message="ACT score "+actscore+" (too low)";
        }
    }
    catch
    {
        MessageBox.Show("Invalid input, value must be numeric");
        satScoreTextBox.Focus();
        satScoreTextBox.SelectAll();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T20:43:24.337

为什么不为此使用一些 if 语句？（另外，你以为你说的是​​整数吗？你为什么使用双精度数？）我认为你下次在问这样的问题之前应该做更多的研究......

```
 private void convertButton(object sender, EventArgs e)
 {
     try
        {
            int satScore;
            satScore = Int32.Parse(satScoreTextBox.Text);
            checkSatScore(satScore);
        }
        catch
        {
            MessageBox.Show("Invalid input, value must be numeric");
            satScoreTextBox.Focus();
            satScoreTextBox.SelectAll();
        }
 }

 private void checkSatScore(int satScore)
 {
     int actScore;

     if(satScore > 1600)
         actScore = 37;
     else if (satScore > 1560)
         actScore = 36;
     else if (satScore > 1510)
         actScore = 35;
     else if (satScore > 1460)
         actScore = 34;
     else if (satScore > 1410)
         actScore = 33;
     else if (satScore > 1360)
         actScore = 32;
     else
         actScore = 31

     if(actScore > 33)
         satScoreTextBox.Text = "ACT Score " + actScore + "(high enough)";
     else
         satScoreTextBox.Text = "ACT Score " + actScore + "(too low)";

 } 
```

# angularjs - 在 Angularjs 模板中应用动态过滤器

> ID：16178493
> 
> 赞同：2
> 
> 时间：2013-04-23T20:22:23.083
> 
> 标签：angularjs, angularjs-ng-repeat

我正在根据用户定义的列定义构建一个表，如下所示：

[http://jsfiddle.net/waylon999/2RvmW/1/](http://jsfiddle.net/waylon999/2RvmW/1/)

您会注意到我无法应用的列中有一个过滤器字段。我试过了：

```
{{ getItem(data, col.keyword) | col.filter }} 
```

在 chrome 中出现以下错误： Unknown provider: col.filterFilterProvider <- col.filterFilter

我还尝试修改 getItem 方法来构建过滤器字符串，但它最终只是渲染了

```
| uppercase 
```

作为文本，附加到文本中。所以我得到如下输出：

福 | 大写

有没有办法可以应用这个过滤器来构建表格？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2014-09-08T07:30:47.787

这将起作用

```
<tr ng-repeat='data in myData'>
   <td ng-repeat='col in columns'> {{data[col.keyword] | uppercase}}</td>
</tr> 
```

有一个愉快的发展日！

[jsfiddle](http://jsfiddle.net/2RvmW/5/)

# c# - Word 自动化服务器端不工作

> ID：16178494
> 
> 赞同：1
> 
> 时间：2013-04-23T20:22:35.490
> 
> 标签：c#, asp.net, iis, ms-word, office-interop

前言：是的，我知道微软不建议这样做。但是，此服务器在严格限制的 VLAN 中面向内部。

目标是自动生成我无法使用 Office XML 正确格式化的特定类型的报告。Microsoft 不建议这样做的原因之一是用户帐户必须是交互式的（即不是 ASPNET）。因此，如果我将应用程序池标识设置为以用户身份运行，我将不再收到 COM 错误，但 Word 仍然无法使用以下测试代码打开：

```
//Just checking if Word can be accessed
Word.Application app = new Word.Application();
app.Visible = true; 
```

我没有收到任何错误，但 Word 无法打开。当我在使用 Visual Studio 调试的开发机器上使用它时，这很有效，但是在部署时在我的测试机器上我什么也没得到。任何提示将非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T20:25:11.653

即使应用程序池在用户帐户下运行，也不意味着它是交互式的并且可以访问您的桌面。您可以检查正在运行的进程列表以了解 Word 是否存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T20:26:10.740

*如您所知：在“类似服务器的场景”（IIS/ASP.NET 是一种特殊的场景）中，MS 不支持 Office 互操作/自动化...参见[KB257757](https://support.microsoft.com/en-us/kb/257757)*

您的选项包括几个库（免费和商业） - 例如：

*   [MS OpenXML SDK](http://www.microsoft.com/download/en/details.aspx?id=5124)（免费）
*   [Aspose.Words](http://www.aspose.com/categories/.net-components/aspose.words-for-.net/default.aspx)（商业）

由于 Windows Vista 已经引入了一些更改来阻止任何 Windows 服务（IIS 只是一些特殊的服务）执行任何“类似桌面”的操作 - 这是由于安全问题......要解决这种情况，您需要规避那些MS实施的安全措施-我绝对不推荐...

# input - 在 vb6 中绘制具有两个轴的折线图

> ID：16178496
> 
> 赞同：0
> 
> 时间：2013-04-23T20:22:41.653
> 
> 标签：input, vb6, charts

我想从 VB6 中的两个数组中绘制折线图，​​例如

```
x(1 to 3) =1,2,3
y(1 to 3) =1,2,3 
```

... 轴包含值 x=1,2,3 和 y=1,2,3。

我只知道这个命令：

```
picture1.line(x1,y1)-(x2,y2) 
```

...但是这些没有任何轴选项来标记等。我得到了一个图表，但没有轴 - 只是一条带有相应所选点斜率的线。

请给我代码来命名轴，或任何其他更好的方式在 VB6 中生成图表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T22:27:18.643

使用 VB6，您可以利用 Form 和 PictureBox 控件的自动缩放功能。

将 PictureBox“Picture1”添加到您的窗体中，并将​​ LineX 和 LineY 两个 Line 控件*放入*PictureBox。这些将形成轴。添加以下代码：

```
Option Explicit

Private Sub DrawLines(x() As Single, y() As Single)

    Dim nIndex As Long

    ' Ensure x() and y() are the same size.
    If UBound(x) <> UBound(y) Then
        Err.Raise 1000, , "x() and y() are different sizes"
    End If

    ' First line:
    If UBound(x) < 2 Then
        Exit Sub
    End If

    ' Draw line between first two coordinates.
    Picture1.Line (x(1), y(1))-(x(2), y(2))

    ' Subsequent lines:
    For nIndex = 3 To UBound(x)
        ' Draw line to next coordinate.
        Picture1.Line -(x(nIndex), y(nIndex))
    Next nIndex

End Sub

Private Sub Form_Load()

    SetupPictureBox Picture1

End Sub

Private Sub Picture1_Paint()

    Dim x(1 To 4) As Single
    Dim y(1 To 4) As Single

    x(1) = 15!
    y(1) = 15!

    x(2) = 45!
    y(2) = 45!

    x(3) = 15!
    y(3) = 45!

    x(4) = 15!
    y(4) = 15!

    DrawLines x(), y()

End Sub

Private Sub SetupPictureBox(ByRef pct As PictureBox)

    ' Set up coordinates for picture box.
    pct.ScaleLeft = -100
    pct.ScaleTop = -100
    pct.ScaleWidth = 200
    pct.ScaleHeight = 200

    ' Set up coordinates for the X axis.
    LineX.X1 = -100
    LineX.X2 = 100
    LineX.Y1 = 0
    LineX.Y2 = 0

    ' Set up coordinates for the Y axis.
    LineY.X1 = 0
    LineY.X2 = 0
    LineY.Y1 = -100
    LineY.Y2 = 100

End Sub 
```

请注意，两个轴会自动绘制自己。三角形的绘制代码包含在 PictureBox 的 Paint 事件中。

# php - 是否可以通过不同的服务器路由 cURL 请求？

> ID：16178500
> 
> 赞同：0
> 
> 时间：2013-04-23T20:23:01.350
> 
> 标签：php, curl

我正在使用 WAMPServer 在我的计算机上进行开发，但我使用的一项服务将我的实时服务器（Linux、CENTOS、Apache）IP 地址列入白名单，因此我需要让某些 cURL 请求通过我的实时服务器而不是直接发出从我的电脑。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:25:43.753

最好的办法是使您的应用程序的一部分可配置。如果您正在调用自己的 Web 服务，请使这些 URL 可配置，以便您的生产服务器和开发服务器都可以使用单独的 URL。

另一种常见的方法是更改`hosts`​​文件条目，以便在连接到特定主机名时，您可以覆盖该主机的网络地址。不过我不推荐这种方法，因为很容易忘记您已覆盖的内容以及未覆盖的内容。

# javascript - 仅在 JavaScript 中的 setInterval() 内从下拉列表中获取小时分钟值以进行初始化

> ID：16178504
> 
> 赞同：1
> 
> 时间：2013-04-23T20:23:20.820
> 
> 标签：javascript, jquery, css

我有时钟旋转，分针和时针需要设置在特定的角度。这个角度我从两个下拉一个用于时针和另一个用于分钟。但问题是当我从下拉列表中获取价值时

```
var f = document.getElementById("minute3r");
var currentMinute = f.options[f.selectedIndex].value ; 
```

两个时钟指针卡在一个地方。我想从下拉列表中获取小时和分钟的初始值，但仅一次，之后我想为这两个变量添加时间，以便时钟指针像真正的时钟一样旋转。这是我的代码

```
 setInterval( function() {
          var f = document.getElementById("minute3r");
          var currentMinute = f.options[f.selectedIndex].value ;
          mins=currentMinute;
          var mdegree = mins * 6;
          var mrotate = "rotate(" + mdegree + "deg)";

          $("#min").css({"-moz-transform" : mrotate, "-webkit-transform" : mrotate});

          }, 1000 ); 
```

`mintute3r`我的下拉菜单在哪里

```
<select id="minute3r" onchange="disableFunc2()">
        </select> 
```

我试着把

```
var f = document.getElementById("minute3r");
var currentMinute = f.options[f.selectedIndex].value ; 
```

`setInterval()`在分针之外，根本不旋转到所需的位置。

如何从下拉列表中获取小时分钟值仅用于初始化。请帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T20:29:04.563

您需要获取当前分钟一次，然后在每次调用 setInterval 时递增它。要在“时钟”滴答作响时更新当前分钟，您可以清除间隔并重新开始。

确保将您的时间间隔设置为 60 秒（60000 毫秒），否则您的分针将变成秒针 :)

```
var interval = -1;
$('#minute3r').on('change', function() {
    var currentMinute = $(this).val(); //get current value

    clearInterval(interval); //stop previous "ticking" of clock
    interval = setInterval( function() {
        var mdegree = currentMinute * 6;
        var mrotate = "rotate(" + mdegree + "deg)";

        $("#min").css({"-moz-transform" : mrotate, "-webkit-transform" : mrotate});

        currentMinute = (currentMinute + 1) % 60; //increment currentMinute, but keep it < 60

        //you'll also need to include your hour handling here, i.e., if currentMinute == 0, then update hour hand

    }, 60000 );
}); 
```

# python - Python：为文件夹中的所有文件设置元类

> ID：16178519
> 
> 赞同：9
> 
> 时间：2013-04-23T20:24:39.407
> 
> 标签：python, package, project, environment-variables, metaclass

我编写了一个元类，用于在我的 python 项目中进行日志记录。它使每个班级自动记录所有活动。唯一的问题是我不想进入每个文件并且必须添加：

```
__metaclass__ = myMeta 
```

有没有办法在顶级文件夹中设置元类，以便下面的所有文件都使用该元类？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T20:27:34.757

不可以，您只能为每个类或每个模块指定元类。您不能为整个包设置它。

在 Python 3.1 及更高版本中，您*可以*拦截`builtins.__build_class__`钩子并以编程方式插入元类，请参阅[在 Python 运行之前覆盖默认的 type() 元类](https://stackoverflow.com/questions/15293172/overriding-the-default-type-metaclass-before-python-runs/15392133#15392133)。

在 Python 2.7 中，您可以替换`__builtins__.object`为使用您的元类的子类。就像`builtins.__build_class__`钩子一样，这是*高级骇客*，破坏你的代码就像让你的元类无处不在。

通过替换[模块](https://docs.python.org/2/library/__builtin__.html)`object`上的引用来做到这一点：[`__builtin__`](https://docs.python.org/2/library/__builtin__.html)

```
import __builtin__

class MetaClass(type):
    def __new__(mcls, name, *args):
        # do something in the metaclass
        return super(MetaClass, mcls).__new__(mcls, name, *args)

orig_object = __builtin__.orig_object

class metaobject(orig_object):
    __metaclass__ = MetaClass

def enable():
    # *replace* object with one that uses your metaclass
    __builtin__.object = metaobject

def disable():
    __builtin__.object = orig_object 
```

在导入你的包之前运行`enable()`它，所有新样式的类（那些*可以*支持元类的）都会有你的元类。请注意，当您的包导入代码时，此行为现在将传播到**所有**尚未加载的 Python 代码，包括标准库。您可能想使用：

```
enable()
import package
disable() 
```

来限制效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-09T17:31:27.080

这是一个简单的技术。只需使用*子*类中的属性对*类*本身进行子类化。`__metaclass__`这个过程可以自动化。

实用程序.py

```
class A(object):
    def __init__(self, first, second):
        self.first = first
        self.second = second

    def __str__(self):
        return '{} {}'.format(self.first, self.second) 
```

主文件

```
from datetime import datetime
from util import A

def meta(*args):
    cls = type(*args)
    setattr(cls, 'created', datetime.now().ctime())
    return cls

try:
    print(A.created)
except AttributeError as e:
    print(e)

class A(A):
    __metaclass__ = meta

print(A.created, str(A('Michael', 'Jackson'))) 
```

测试;

```
$ python main.py 
type object 'A' has no attribute 'created'
('Wed Mar  9 22:58:16 2016', 'Michael Jackson') 
```

# c# - 在 c# 中检测 EventClass 审计登录/注销

> ID：16178521
> 
> 赞同：1
> 
> 时间：2013-04-23T20:24:50.140
> 
> 标签：c#, sql, sql-server, sql-server-profiler, audit-logging

当用户在 SQL SERVER 中登录和注销时，我需要监视应用程序，因为有时应用程序会意外记录，我需要知道，因为我审核了登录和注销。当我使用 SQL Server Profiler 时，EventClass 列出现“Audit Login”和“Audit Logout”。有没有办法在 C# 中获取那些 SQL Server Profiler 事件？

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T02:03:45.010

您需要创建一个服务器端跟踪来捕获感兴趣的事件和列。您可以在探查器中创建它并将其保存为创建脚本。

您的 c# 程序可以使用 fn_trace_gettable() 系统函数查询跟踪。

您需要特别注意跟踪定义中翻转文件的设置。填满磁盘驱动器通常不是一件好事。

# perl - 如何运行“构建 installdeps”来安装缺少的先决条件

> ID：16178522
> 
> 赞同：4
> 
> 时间：2013-04-23T20:24:54.653
> 
> 标签：perl, cpan, bioperl

尝试运行 Build.PL 文件并获得以下错误消息：

```
Checking prerequisites...
  build_requires:
    !  Test::Most is not installed
  recommends:
    *  HTML::TableExtract is not installed
    *  Math::Random is not installed
    *  YAML is not installed

ERRORS/WARNINGS FOUND IN PREREQUISITES.  You may wish to install the versions
of the modules indicated above before proceeding with this installation

Run 'Build installdeps' to install missing prerequisites. 
```

但是当我运行时：

```
perl Build installdeps 
```

我得到：

```
Can't open perl script "Build": No such file or directory 
```

有人知道我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T02:09:25.043

`Build`是运行后生成的脚本`perl Build.PL`。你可以在没有 Perl 的情况下执行它。

赶紧跑：

```
Build installdeps 
```

或者（取决于您的操作系统）：

```
./Build installdeps 
```

# maven - 如果两个不同的 jar 具有相同的包名称，则 Maven 编译错误

> ID：16178524
> 
> 赞同：0
> 
> 时间：2013-04-23T20:24:59.590
> 
> 标签：maven

我有两个不同的罐子 asource.jar 和 btest.jar。btest.jar 有一个 com.foo.test 类，用于测试 asource.jar 中的 com.foo.source 类。

当我尝试对 btest.jar 运行**mvn clean install**时，我收到编译错误，指出类 com.foo.source.java 不存在。我分析并得出结论，maven 正在 btest.jar 的 com.foo 包中搜索 source.java 并没有找到它失败。它甚至不会尝试在 asource.jar 中类似名称的包中搜索类。

maven exclude 等在这里不起作用，因为我没有什么可以排除的。有没有办法让 Maven 在多个 jar 中递归搜索相同的包名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:32:01.590

您必须将您的 asource 模块添加为 btest 模块的依赖项

```
<project [...]>
 <groupId>com.foo</groupId>
 <artifactId>btest</artifactId>
 <version>1.0-SNAPSHOT</version>
 <packaging>jar</packaging>

 [...]
 <dependencies>
   <dependency>
    <groupId>com.foo</groupId>
    <artifactId>asource</artifactId>
    <version>1.0-SNAPSHOT</version>
  </dependency>
 </dependencies> 
```

# database - 带有列表的休眠列

> ID：16178530
> 
> 赞同：0
> 
> 时间：2013-04-23T20:25:27.250
> 
> 标签：database, spring, hibernate

我想创建一个可以存储值列表的休眠表。我正在做类似的事情：

```
@Column(name = "userHobbies")
@ElementCollection(targetClass = String.class)
@CollectionTable(schema = "school", name = "hobby", joinColumns = @JoinColumn(name = "id"))
private List<String> userHobbies= null; 
```

在用户表中，我没有看到“userHobbies”列。虽然它是空的，但创建了一个表爱好。任何人都可以就如何处理这种情况提出一些建议吗？

编辑：

向有兴趣的用户插入新记录的代码：

```
ArrayList<String> hobbies= new ArrayList<String>();
hobbies.add(football);
hobbies.add(soccer);

User user = new User();
user.setName("ben");
user.setEmail("XYZ@gmail.com");
user.setUserHobbies(hobbies);

getDAO().makePersistent(user); 
```

除了 userHobbies 所有其他字段都正确保存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:33:25.063

这就是预期的结果。`@CollectionTable`用于指定存储列表中每个元素的表的名称 ( `name = "hobby"`)。`joinColumns`用于指定在此爱好表中用于存储对其拥有用户的引用的列的名称。并且`@Column`用于指定在爱好表中保存元素值（爱好名称）的列的名称。

所以你最终会得到这个，非常类似于 OneToMany 映射：

```
Table user:
ID (primary key), name, ...

Table hobby:
ID (foreign key referencing user.ID), userHobbies 
```

我会将列命名为“hobby”或“hobbyName”而不是“userHobbies”，因为它包含一个单一的爱好。

# django - 如何使用 Django Rest Framework 和每个帐户（不是用户）的 API 密钥？

> ID：16178531
> 
> 赞同：2
> 
> 时间：2013-04-23T20:25:28.350
> 
> 标签：django, django-rest-framework, tastypie

对于 Django，tastepie 和 django-rest-framework 似乎都专注于每个用户的 API 身份验证/授权/节流。我想公开一个每个帐户的 API，其中一个帐户可能有多个用户管理它。解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T21:26:21.617

django-rest-framework 可以实现这一点。您不必限制用户，这些是选项。您可以对多个用户可以访问的一个帐户（用户名和密码）进行**基本身份验证。**

您有**自定义身份验证**将任何方式的选项。摘要身份验证等等。

# html - 如何用css选择第n个孩子？

> ID：16178537
> 
> 赞同：2
> 
> 时间：2013-04-23T20:25:45.343
> 
> 标签：html, css, css-selectors

鉴于以下 HTML 和 CSS，我想使用`nth-child`伪类突出显示列表中的第二个元素。我将如何更改以下内容以实现此目的？

小提琴：http: [//jsfiddle.net/jeljeljel/DHKj5/](http://jsfiddle.net/jeljeljel/DHKj5/)

**HTML**

```
<div id="topdiv">
    <div class="middlediv">
        <div>A</div>
        <div>B</div>
        <div>C</div>
    </div>
</div> 
```

**CSS**

```
.topdiv > div:nth-child(n+2) {
    font-weight:bold;
    font-color:red;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T20:27:20.587

`[Demo](http://jsfiddle.net/4N4Py/)`

```
#topdiv .middlediv > div:nth-child(2) {
    font-weight:bold;
    color:red;
} 
```

您需要使用`#`for id 和`.`for class

只是为了解释`n+2`将选择第二个元素之后的所有兄弟姐妹。也`>`将只选择匹配选择器的直接子代。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T20:28:09.947

您通过 选择 ID`#`并通过 选择类`.`。您可以简单地将`nth-child()`索引（从零开始）传递给它以选择您需要的元素，在您的情况下 2

```
#topdiv .middlediv > div:nth-child(2) {
    font-weight:bold;
    color:red;
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/DHKj5/8/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T20:27:29.253

单程：

```
#topdiv > .middlediv div:nth-child(2) {
color: olive;
} 
```

[http://jsfiddle.net/DHKj5/4/](http://jsfiddle.net/DHKj5/4/)

`.topdiv > div:nth-child(n+2)`

不起作用，因为您尝试设置样式的后代 div 不是子代，而是*孙*代，`#topdiv`并且您还在`.`根 div 上使用了 a 而不是`#`（旨在定位元素 ID）

更多信息：[http ://www.w3.org/TR/css3-selectors/#nth-child-pseudo](http://www.w3.org/TR/css3-selectors/#nth-child-pseudo)

# sql - 在 sql 查询中添加 & 符号

> ID：16178539
> 
> 赞同：-1
> 
> 时间：2013-04-23T20:25:49.940
> 
> 标签：sql, sql-server

我有一个广告商表，正在尝试匹配来自用户查询字符串的数据。我们有广告商，例如 D&G，我想知道如何编写 sql 以使其成为有效搜索？我正在使用 LIKE 但似乎无法使任何工作或通过谷歌找到一个体面的答案，那么我该怎么做呢？我尝试了如下双引号和行：

```
AND (UPPER(als.SearchString) LIKE UPPER('"D&G%"')) 
```

谢谢

好的，所以我的帖子受到质疑！这是我的总 WHERE 子句：

```
WHERE     (a.CountryCodes & 3 > 0) AND (na.PubDate BETWEEN '4/22/2001' AND '4/22/2013') AND (UPPER(als.SearchString) LIKE UPPER('D%') ESCAPE '\') 
```

显然，“&”已被删除，这将返回 419 个结果，包括“D&G Communications Group”等实体。但是，一旦我尝试在 LIKE 子句中实现“D\&”，我就没有返回任何记录。我非常愿意接受我遗漏了一些东西，并且非常乐意指出这一点:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:28:54.713

尝试这个 ：

```
set ESCAPE \
AND (UPPER(als.SearchString) LIKE UPPER('"D\&B%"')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T20:29:38.710

你可以用 || 连接它 或设置定义关闭

来源：[https ://forums.oracle.com/forums/thread.jspa?threadID=466604](https://forums.oracle.com/forums/thread.jspa?threadID=466604)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T20:34:11.223

添加`ESCAPE`到条件的末尾并在`LIKE`条件中使用该字符。

```
AND (UPPER(als.SearchString) LIKE UPPER('"D\&G%"')) ESCAPE '\' 
```

# laravel - Laravel 4，查看带参数的作曲家？

> ID：16178549
> 
> 赞同：5
> 
> 时间：2013-04-23T20:26:26.277
> 
> 标签：laravel, laravel-4

假设我有这个：

```
//controllers/BlogController.php
$data["post"] = $post = Blog::recent_post();
$data["posts_related"] = Blog::posts_related($post->category_id,5);
return View::make('blog.home', $data);

//views/sidebars/related.blade.php
@foreach($posts_related as $r)
<p>{{ $r->name }}</p>
@endforeach

//views/blog/home.blade.php
@include('sidebars.related') 
```

我的问题是，我该如何转移：

```
$data["posts_related"] = Blog::posts_related($post->category_id,5); 
```

对于视图作曲家，因为似乎我无法将参数传递给视图作曲家，但我不能确定。

我很感激任何帮助！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-08-20T22:13:45.650

在 View Composer 中，您可以检索传递给 View 的数据。

```
View::composer('sidebars.related', function($view)
{
   //$data contains category_id
   $viewdata= $view->getData();

   //Retrive based on category_id
   $posts_related = Blog::posts_related($viewdata['category_id'],5);

   //pass related post to view
   $view->with('posts_related', $posts_related);
}); 
```

现在您可以在任何地方使用：

```
 View::make('sidebars.related')->with(array('category_id' => 6)); 
```

# google-drive-api - 如何使用 Drive API 有选择地访问电子表格的子集？

> ID：16178556
> 
> 赞同：1
> 
> 时间：2013-04-23T20:26:49.437
> 
> 标签：google-drive-api, google-spreadsheet-api

是否可以使用 Drive API 对大型电子表格进行选择性操作？我们正在处理一些巨大的电子表格，这些电子表格可能有几十个标签，大小可能有几兆字节。

鉴于旧的 gdata API 已被弃用，有没有办法使用 Drive API 处理大型电子表格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T00:31:36.933

1) 使用 gdata 样式 API（非弃用位）。选择性读/写很容易，但插入就不那么容易了。插入行/列要求您使用代码向下/向右移动所有其他单元格（更新所有单元格引用）。

2) 谷歌电子表格的最大单元格为 400,000，最大大小为 20MB。[http://support.google.com/drive/bin/answer.py?hl=en&answer=37603](http://support.google.com/drive/bin/answer.py?hl=en&answer=37603)

3) 也看看 Google-apps-script，虽然，我的拙见，它有点慢，对最终用户/非程序员不太友好，它确实有高质量的文档和丰富的功能。

# generics - groovy 泛型：在超类上调用方法。类型擦除

> ID：16178557
> 
> 赞同：1
> 
> 时间：2013-04-23T20:26:51.370
> 
> 标签：generics, groovy, super, type-erasure

我不明白为什么以下 Groovy 代码无法编译

```
@groovy.transform.CompileStatic
class GenericTest<T extends String> extends TreeSet<T> {

    public boolean add2(T key) {
        return super.add(key)
    }
} 
```

它告诉我

> [静态类型检查] - 无法使用参数 [java.lang.String] 调用 java.util.TreeSet#add(java.lang.Object )

我知道它一定与类型擦除有关，但我无法弄清楚。

类似的java代码编译没有问题

```
import java.util.TreeSet;

public class GenericTest2<T extends String> extends TreeSet<T> {

    public boolean add2(T val){
        return super.add(val);
    }
} 
```

# android - 使用 Android NDK 为 armeabi 编译错误指令“锁定”

> ID：16178558
> 
> 赞同：0
> 
> 时间：2013-04-23T20:26:59.310
> 
> 标签：android, android-ndk

我有一个应用程序，其中包含一个最初为 Android NDK 版本 3 编译的库。该应用程序被搁置了一段时间，现在我正尝试在最新（Windows 64 位 r8e）版本的 NDK 上恢复它。我已经修复了大部分的小问题，但是我在为 armeabi 编译时遇到了问题。具体来说，我收到“错误指令‘锁定’”错误。通过一些搜索，我发现这个程序集对 arm 无效——事实上，如果我将 APP_ABI 设置为 x86，它编译得很好——但我不明白为什么它会生成看起来像 x86 的代码，如果我选择了要构建的 arm，特别是因为在 r3 下，arm 代码可以从相同的 .cpp 文件生成。谢谢。

应用程序.mk

```
APP_STL          := stlport_static
APP_MODULES      := DM
APP_CPPFLAGS     := -w -g
APP_ABI          := armeabi

include $(call all-subdir-makefiles) 
```

安卓.mk

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

# STLPORT_BASE  := $(NDK_WRAPPERS_BASE)/stlport
LOCAL_CFLAGS    += -D__NEW__ \
                   -DANDROID \
                   -DOS_ANDROID

LOCAL_LDLIBS    += -L$(SYSROOT)/usr/lib \
                   -ldl \
                   -lGLESv1_CM \
                   -lEGL \
                   -llog

LOCAL_MODULE    := DM
LOCAL_SRC_FILES := \
    sample/test/Test.cpp 
```

输出

```
ndk-build.cmd V=1
"Compile++ thumb : DM <= Test.cpp
D:/Projects/testProj/android-ndk-r8e/toolchains/arm-linux-androideabi-4.6/prebuilt/windows-x86_64/bin/arm-linux-androideabi-g++ -MMD -MP -MF ./obj/local/armeabi/objs/sample/test/Test.o.d -fpic -ffunction-sections -funwind-tables -fstack-protector -no-canonical-prefixes -march=armv5te -mtune=xscale -msoft-float -fno-exceptions -fno-rtti -mthumb -Os -g -DNDEBUG -fomit-frame-pointer -fno-strict-aliasing -finline-limit=64 -ID:/Projects/testProj/android-ndk-r8e/sources/cxx-stl/stlport/stlport -ID:/Projects/testProj/android-ndk-r8e/sources/cxx-stl//gabi++/include -DANDROID -D__NEW__ -DANDROID -DOS_ANDROID -Wa,--noexecstack  -frtti   -w -g  -ID:/Projects/testProj/android-ndk-r8e/platforms/android-9/arch-arm/usr/include -c  jni/sample/test/Test.cpp -o ./obj/local/armeabi/objs/sample/test/Test.o
C:\Temp\ccIqfvxp.s: Assembler messages:
C:\Temp\ccIqfvxp.s:474: Error: bad instruction `lock'
C:\Temp\ccIqfvxp.s:474: Error: immediate expression requires a # prefix -- `add
r3,[r0,#4]'
C:\Temp\ccIqfvxp.s:531: Error: bad instruction `lock'
C:\Temp\ccIqfvxp.s:531: Error: immediate expression requires a # prefix -- `add
r3,[r4,#4]'
make: *** [obj/local/armeabi/objs/sample/test/Test.o] Error 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:42:10.520

事实证明，有人偷走了一些我不知道的 x86 汇编代码。我能够#ifdef 这个了，现在它在 arm 上工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-18T11:24:48.617

最近在 x86 构建机器上为 arm 的 debian 构建遇到了类似的问题。特别是 qt 库。项目是使用 chroot 中的标准[debian 工具构建的（](https://wiki.debian.org/BuildingTutorial)[此处](https://wiki.archlinux.org/index.php/Chroo)和`man -k chroot`详细信息）。

./debian/control 文件是构建过程的重要组成部分，其中包括以下字段：

```
Build-Depends:
...
Depends: 
```

这是一个简单的例子：

```
Source: file-mon                                                                                                                                                                                                                                                                                                             
Section: non-free/embedded
Priority: extra
Maintainer: Dmytro Poliarush
Build-Depends: libqtcore4:armhf, libqt4-dev:armhf
Standards-Version: 3.9.d
X-Python-Version: >= 2.6 
X-Python3-Version: >= 3.2 
Homepage: http://www.harmonicinc.com

Package: file-mon
Architecture: any
Depends: libqtcore4:armhf
Description:  Mainly for running tests. 
```

如果没有明确指定 Build-Depends 中的架构，例如`libqt4-dev:armhf`debian 脚本，则在准备 chroot 来构建项目时，请执行`apt-get install libqt4-dev`. 在这种情况下，至少在 x86 上，架构默认为`amd64`. 并引发汇编错误：

```
...
make[1]: Entering directory '/home/dpoliaru/Documents/test/file-mon'
arm-linux-gnueabihf-g++ -g -O2 -fstack-protector-strong -Wformat -Werror=format-security -Wall --std=c++14 -I /usr/include/qt4/ -I /usr/include/qt4/QtCore/ -DNDEBUG  -D_FORTIFY_SOURCE=2 -Wl,-z,relro -L /usr/lib/arm-linux-gnueabihf/libQtCore.so.4  file-mon.cpp   -o file-mon
/tmp/cckjHuQp.s: Assembler messages:
/tmp/cckjHuQp.s:53: Error: bad instruction `lock'
/tmp/cckjHuQp.s:54: Error: bad instruction `decl [r3]'
/tmp/cckjHuQp.s:55: Error: bad instruction `setne r2'
<builtin>: recipe for target 'file-mon' failed
make[1]: *** [file-mon] Error 1
make[1]: Leaving directory '/home/dpoliaru/Documents/test/file-mon'
dh_auto_build: make -j1 returned exit code 2
debian/rules:22: recipe for target 'build' failed
make: *** [build] Error 2
dpkg-buildpackage: error: debian/rules build gave error exit status 2
... 
```

这基本上意味着，该汇编程序制作并尝试将一些 x86 插入 armhf exec。指定显式架构`libqt4-dev:armhf`，需要构建工具来安装所有必需的头文件，用于 armhf 的库。

# php - 独立于数据库的 SOAP 接口 + 用 PHP 完成的 MVC 前端 - 需要建议

> ID：16178561
> 
> 赞同：0
> 
> 时间：2013-04-23T20:27:12.730
> 
> 标签：php, api, model-view-controller, soap, orm

我目前正在研究一个新项目，该项目涉及具有数据库独立接口（或尽可能独立 - 如 PDO），然后能够添加前端，可能使用类似 CodeIgniter 的东西，但应该可以使用其他前端，如 Windows GUI 或其他任何东西。

我正在考虑将 PHP SOAP 与 PDO 一起使用来放置数据库函数。这是一个好方法吗？有哪些陷阱？有没有人做过类似的事情，你有什么建议？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T21:02:55.600

根据您的描述，我了解到您正在查看以下设置：

*   一个基于 PHP SOAP 和 PDO 的应用程序，用于处理可作为服务或通过 API 访问的数据库操作，
*   Codeigniter / Windows GUI / 作为前端的任何其他东西，可以与数据库操作系统进行通信。

如果这就是您所追求的，那么这是系统中非常好的职责分离。它允许您在所有级别上保持应用程序/数据库独立于前端，这将使各种客户端的实现更加容易。它将基本上成为典型的服务器-客户端设置。

**网络性能和可扩展性**

您要考虑的最重要的事情是您将要处理的流量和可扩展性。如果您正在查看不在本地、快速延迟系统内的客户端-服务器通信，那么让客户端向服务器应用程序发送请求将在很大程度上占用大量资源。我的假设是，与本地系统调用相反，通信将主要通过某种互联网协议（可能是 HTTP）进行。它显然要慢得多且资源繁重。除非您的特定项目需要通过 Internet 进行通信（例如将移动应用程序作为客户端之一），否则我强烈建议在同一操作系统内或通过某种快速延迟网络来组织客户端-服务器通信。

**代码性能**

根据从客户端到服务器的调用量有多大，您可能需要一个非标准的 PHP 解决方案。使用 PHP 处理 Web 应用程序最常见的方法是让 Web 服务器（如 Apache）正确处理 HTTP 请求，然后将控制权传递给 PHP 以进一步处理请求（然后再次由 Web 服务器发送响应）。对于您的情况，最大的缺点是 Web 服务器（在大多数情况下）必须为每个客户端调用引导 PHP 解释器和数据库操作系统的所有源代码。从某个扩展点开始，这可能是一个大问题，并且会显着影响项目的成本。需要对服务器端应用程序进行适当的基准测试。如果您正在寻找一个足够大以关心此类问题的应用程序，您可能需要实现一个独立的 PHP 应用程序，该应用程序可以侦听特定端口，从而变成功能齐全的独立服务器应用程序。此解决方案不允许您利用常见的 Web 服务器，但允许您创建一个仅引导一次并随时准备处理客户端请求的应用程序。

**设计**

从设计的角度来看，要记住的最重要的事情是始终牢记哪个应用程序是服务器，哪个应用程序是客户端。对于系统的每个功能，您都需要确保正确的部分承担责任。不要在服务器端实现任何特定于客户端的格式或操作。您很可能希望以最原始的形式从服务器发送数据，并让客户端应用程序根据需要对其进行处理。唯一的例外是当处理部分的需求如此之大以至于客户端无法处理它时。移动设备的大量数据和客户端可能就是这种情况。在这种情况下，引入某种桥接子系统/应用程序会很聪明，

我希望这将帮助您对解决方案做出正确的决定。

# python - 如何在 Python 中识别“NoSuchObject”？

> ID：16178565
> 
> 赞同：2
> 
> 时间：2013-04-23T20:27:15.583
> 
> 标签：python, python-3.x, pysnmp

我目前正在开发基于 PySnmp 的 Python 3 (Python 3.1.3) 中的 SNMP 模块，以便轻松地从其他程序发送 GET/WALK SNMP 查询。这主要是为了娱乐/学习。

查询现有 OID 时，我得到一个元组，例如：

```
(ObjectName(1.3.6.1.2.1.1.7.0), Integer(72)) 
```

我可以使用“for”结构阅读。

但是，当查询一个不存在的 OID（这是我为单元测试所做的）时，我得到：

```
(ObjectName(2.3.4.5.6.7.8), NoSuchObject('b''')) 
```

如何区分元组的第二个元素是整数/字符串/（其他？）的“正常”情况和第二个元素是 'NoSuchObject' 的“错误”情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T05:53:31.097

另一种方法是匹配 ASN.1 类型的 noSuchObject 和 SNMP 响应 var-bind 元组的值部分：

```
>>> from pysnmp.proto import rfc1905
>>> rfc1905.noSuchObject.isSameTypeWith(rfc1905.noSuchObject)
True
>>> rfc1905.noSuchObject.isSameTypeWith(rfc1905.noSuchInstance)
False
>>> rfc1905.noSuchObject.isSameTypeWith(varBind[1]) # varBind from SNMP response
False 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T20:35:04.297

像这里[确定一个对象的类型？](https://stackoverflow.com/questions/2225038/python-determine-the-type-of-an-object)

```
type(your_tuple[1]) == NoSuchObject 
```

或者

```
isinstance(your_tuple[1], NoSuchObject) 
```

# python - 如何从另一个类调用一个类的方法？

> ID：16178566
> 
> 赞同：0
> 
> 时间：2013-04-23T20:27:19.633
> 
> 标签：python, oop, class

我想从另一个类调用一个类的方法。我想做这样的事情。

```
class A:
    def meth(self):
        B.meth1()

class B:
    def meth1(self):
        pass

a = A()
a.meth() 
```

我收到以下错误：

```
TypeError: unbound method meth1() must be called with B instance as first argument (got nothing instead) 
```

我究竟做错了什么？

**更新：**

上面的例子可能有点模糊。这就是我真正打算做的事情：

```
class A:
    def meth(self, data):
        if data[0] == '/':
            B.handleCOMMAND(data)

class B:
    def handleCOMMAND(self, data):
        """
        Some code to handle some command.
        """ 
```

**更新 2：**

```
class A:
    def meth(self, data):
        if data[0] == '/':
            B.handleCOMMAND(data)

class B:
    def __init__(self):
        self.state = 'CHAT'

    def handleCOMMAND(self, data):
        if data.strip().split()[1] == 'send':
             self.state == 'RECV-FILE' 
```

我面临的主要问题是：

'self.state' 是 B 类中的一个实例变量。根据 A 类的 'data' meth() 获取的内容，需要调用 B 类的 handleCOMMAND，这应该会改变 'self.state' 的值

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T20:33:27.557

除非您有实例可以调用它，否则您不能调用实例方法。

如果不知道你的设计目标是什么，就不可能告诉你实例应该来自哪里，但是有两种特别常见的模式。

首先，该方法可能将`B`实例作为参数。例如：

```
class A:
    def meth(self, b):
        b.meth1()

class B:
    def meth1(self):
        pass

a = A()
b = B()
a.meth(b) 
```

为了使这个更具体，想象这`A`是一个`Car`，并且`B`是一个`TollRoad`，并且`my_car.drive(my_road)`必须调用`my_road.pay_toll()`。

* * *

或者，每个`A`实例都可以拥有一个`B`实例作为成员。例如：

```
class A:
    def __init__(self, b):
        self.b = b
    def meth(self):
        self.b.meth1()

class B:
    def meth1(self):
        pass

b = B()   
a = A(b)
a.meth() 
```

为了使这一点更具体，想象一下它`A`是一个`Car`再次，`B`是一个服务中心，`my_car.schedule_service()`需要调用`my_car.service_center.get_next_appointment()`.

* * *

作为后者的变体，每个`B`实例都可以是实例的一种整体，由`A`实例自动构建`A`。例如：

```
class A:
    def __init__(self):
        self.b = B()
    def meth(self):
        self.b.meth1()

class B:
    def meth1(self):
        pass

a = A()
a.meth() 
```

对于这个，想象那又`A`是一个`Car`，并且`B`是一个`Engine`。因此，`my_car.drive()`开始调用`my_car.engine.start()`. 但是，与 a 不同的是`ServiceCenter`，它是一个独立存在并被许多汽车使用的东西，an`Engine`仅由它所属的汽车使用，因此没有充分的理由单独创建引擎并将其传递给汽车（除非您正在为汽车工厂建模）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T20:33:52.613

B 被用作静态类。

```
class A:
    def meth(self):
        B.meth1()

class B:
    @staticmethod
    def meth1():
        pass

a = A()
a.meth() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T20:32:33.477

这里 B.meth1 是一个*实例方法*，您正试图将它用作*类方法*。您可以将 B.meth1 重新定义为类方法：

```
class B:
  @classmethod
  def meth1(cls):
    pass 
```

或者，您可以通过实例化 B 类将其作为实例方法调用：

```
class A:
    def meth(self):
        B().meth1() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T20:29:53.677

```
class A:
    def meth(self):
        "create instance of B class"
        b = B()
        b.meth1() 
```

您也可以将 B.meth1() 声明为静态：

```
class B:
    @staticmethod
    def meth1():
        pass 
```

然后你可以这样称呼它：

```
class A:
    def meth(self):
        "create instance of B class"
        B.meth1() 
```

# php - mysqli_fetch_array() 什么也不检索

> ID：16178569
> 
> 赞同：0
> 
> 时间：2013-04-23T20:27:29.617
> 
> 标签：php, mysql, sql, mysqli

我有一个简单的数据库表“帐户”，其中包含 3 个条目：“用户”、“通行证”和“ID”。ID 为整数。

我正在尝试从表中检索 ID 并将其存储到 $_SESSION['id'] 中，但我没有运气。

这是代码：

```
session_start();  

// Checks to see if the input account is valid
$result = mysqli_query($con,"SELECT * FROM accounts 
 WHERE user='$_POST[user]'
 AND pass='$_POST[pass]'");

//Check to see if account exists
if(!mysqli_fetch_array($result))
  {
    $_SESSION['loggedin'] = false;
  }
else
  {
    $_SESSION['loggedin'] = true;
    $_SESSION['user'] = $_POST['user'];
    $id = mysqli_fetch_array($result);
    $_SESSION['id'] = $id['ID'];
    echo $_SESSION['id'];
  }

 //header('Location: index1.php/');

?> 
```

回声 $_SESSION['id'] 没有任何内容。我试图回显 $id['ID'] 本身，但它也不起作用。

在我的 index1.php 页面上，我确实设法用相同的代码检索信息，除了 $result 不使用 select 语句的 WHERE 和 AND 子句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:32:09.010

似乎您正在获取数据两次：一次在`if`语句中，一次在`else`. 考虑使用这个：

```
//Check to see if account exists
if($id!=mysqli_fetch_array($result))
  {
    $_SESSION['loggedin'] = false;
  }
else
  {
    $_SESSION['loggedin'] = true;
    $_SESSION['user'] = $_POST['user'];
    $_SESSION['id'] = $id['ID'];
    echo $_SESSION['id'];
  } 
```

或这个：

```
//Check to see if account exists
if(!$result)
  {
    $_SESSION['loggedin'] = false;
  }
else
  {
    $_SESSION['loggedin'] = true;
    $_SESSION['user'] = $_POST['user'];
    $id = mysqli_fetch_array($result);
    $_SESSION['id'] = $id['ID'];
    echo $_SESSION['id'];
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T20:32:39.583

您实际上是在获取前两行（每次调用`mysqli_fetch_array()`都会为您获取一行结果），这可能不是您想要的。只需获取一次并重用结果：

```
// ...

//Check to see if account exists
$row = mysqli_fetch_array($result);
if(!$row)
  {
    $_SESSION['loggedin'] = false;
  }
else
  {
    $_SESSION['loggedin'] = true;
    $_SESSION['user'] = $_POST['user'];
    $_SESSION['id'] = $row['ID'];
    echo $_SESSION['id'];
  }
// ... 
```

^(正如评论中提到的，您的代码对 SQL 注入是开放的。阅读准备好的语句以防止这种情况或手动清理变量（不推荐！）。)

# regex - 正则表达式匹配文件中单词之前的所有换行符

> ID：16178572
> 
> 赞同：0
> 
> 时间：2013-04-23T20:27:39.893
> 
> 标签：regex

好吧，我放弃了。我有一个替代方案，但我很好奇以下是否可行。

我有一个在 doctyoe 声明之前有换行符的 htm 文件。见下文

```
 linefeed and spaces here
 linefeed and spaces here
 <!DOCTYPE html> 
```

所以我需要一个正则表达式，它可以在 doctype 声明之前一次性选择所有换行符和/或空格。

任何人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:38:54.953

以下正则表达式应捕获该文本：

```
(?i)(?s)^(.*?)<!DOCTYPE html> 
```

声明前的所有文本`DOCTYPE`将在第 1 组中可用。

# php - 用 PHP 在服务器上处理 Excel 公式

> ID：16178577
> 
> 赞同：1
> 
> 时间：2013-04-23T20:27:54.127
> 
> 标签：php, performance, concurrency, phpexcel

我有一个相当复杂的电子表格公式。现在我正在使用 PHPExcel 将电子表格加载到内存中，并将公式输入的单元格值设置为来自前端表单（使用 ajax）的值，获取计算结果并将其发送回客户端。

这是最好的方法吗？还是应该将公式转换为纯php？

如果这是一个好的方法，我担心并发和内存使用。

电子表格不是那么大，少于 1000 个单元格。如何计算服务器上的并发阈值（人们单击前端的计算）和内存使用量？

在平衡性能的同时，我可以采取哪些步骤来优化此算法（例如缓存）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:40:01.230

作为对大量并发用户的 ajax 请求，您将遇到问题，因为这些 http 请求没有持久性，因此您需要为每个请求加载电子表格文件。它所保证的是每个请求都使用自己的电子表格副本独立运行，因此单个用户的请求不会影响任何其他用户的请求。

另一个极端是把所有的 Excel 逻辑都用 PHP 重写。您没有说明电子表格公式的复杂性，因此很难判断这将是多么复杂的任务。

第三种选择是只使用 PHPExcel 的计算引擎，直接输入表单值和公式。这消除了每个请求加载电子表格文件的时间和内存开销，因此可能是最简单和最有效的选择。您可以在 PHP 发行版的 /Tests 目录中的 Quadratic2.php 示例文件中找到一个示例。

# craftyjs - 如何使用 Craftyjs 通过鼠标交互使动画精灵移动？

> ID：16178580
> 
> 赞同：3
> 
> 时间：2013-04-23T20:28:00.620
> 
> 标签：craftyjs

我有一个使用 Craftyjs 编写的 HTML5 画布游戏。我使用箭头键可以正常进行键盘交互，但在添加鼠标交互时遇到问题。精灵确实会随着鼠标轻微移动，但与使用箭头键的方式不同，当它碰到另一个组件时，它似乎会崩溃。我在组件中添加了一个函数来处理不起作用的鼠标交互，因此它被注释掉了。这是我的精灵组件的代码；

```
// This is the Angel Character
Crafty.c('Angel', {
    init: function() {
        this.requires('Actor, Fourway, Mouse, Collision, player_sprite, SpriteAnimation')
        .fourway(2)
        .stopOnSolids()
        // This deals with destroying the sins on collision.
        .onHit('Lust', this.killSin)
        .onHit('Greed', this.killSin)
        .onHit('Sloth', this.killSin)
        .onHit('Wrath', this.killSin)
        .onHit('Glutton', this.killSin)
        .onHit('Envy', this.killSin)
        .onHit('Pride', this.killSin)

        // This defines the animations.
        .animate('AngelUp', 0, 0, 2)
        .animate('AngelLeft', 0, 1, 2)
        .animate('AngelRight', 0, 2, 2)
        .animate('AngelDown', 0, 3, 2);

    // This deals with keyboard interaction.
    var animation_speed = 4;
    this.bind('NewDirection', function(data) {
        if (data.x > 0 || data.realX > this._x) {
            this.animate('AngelRight', animation_speed, -1);
        } else if (data.x < 0) {
            this.animate('AngelLeft', animation_speed, -1);
        } else if (data.y > 0) {
            this.animate('AngelDown', animation_speed, -1);
        } else if (data.y < 0) {
            this.animate('AngelUp', animation_speed, -1);
        } else {
            this.stop();
        }
    });

    // This deals with mouse interaction. 
    /*this.bind('NewDirection', function(data) {
        if (data.x > this.x) {
            this.animate('AngelRight', animation_speed, -1);
        } else if (data.x < this.x) {
            this.animate('AngelLeft', animation_speed, -1);
        } else if (data.y > this.y) {
            this.animate('AngelDown', animation_speed, -1);
        } else if (data.y < this.y) {
            this.animate('AngelUp', animation_speed, -1);
        } else {
            this.stop();
        }
    });*/
},

// Registers a stop-movement function to be called when
//  this entity hits an entity with the "Solid" component
stopOnSolids: function() {
    this.onHit('Solid', this.stopMovement);

    return this;
},

// Stops the movement
stopMovement: function() {
    this._speed = 0;
    if (this._movement) {
        this.x -= this._movement.x;
        this.y -= this._movement.y;
    }
},

// Deals with the angel finding a sin.
killSin: function(data) {
    sin = data[0].obj;
    Crafty("Score").each(function () { 
            this.text("Score: " + ++score),
            this.text("Score: " + ++score),
            this.text("Score: " + ++score),
            this.text("Score: " + ++score),
            this.text("Score: " + ++score),
            this.text("Score: " + ++score),
            this.text("Score: " + ++score),
            this.text("Score: " + ++score),
            this.text("Score: " + ++score),
            this.text("Score: " + ++score) });
    Crafty.audio.play('kill');
    sin.kill();
}
}); 
```

这是天使在场景中实例化的代码。我向它添加了一个绑定函数来尝试使鼠标交互工作，但这不能正常工作。

```
// This places the angel on the grid.
this.player = Crafty.e('2D, Canvas, Angel, Mouse')
                .at(5, 5)
                .bind('MouseMove', function(e) {
                this.x = e.offsetX || e.layerX;
                this.y = e.offsetY || e.layerY;
                }) 
```

这是游戏的链接；

[http://users.aber.ac.uk/rig6/achievement_unlocked/index.html](http://users.aber.ac.uk/rig6/achievement_unlocked/index.html)

我已经尝试了所有方法，但在网上找不到对此有帮助的示例。请问有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-30T13:18:34.617

我发现使用 Crafty 绑定到鼠标/触摸的最佳方法是创建一个 Canvas 范围的元素，然后绑定到该元素。创建一个接受鼠标和触摸事件的 Canvas 范围的实体。请注意，Crafty 通过相同的逻辑路由鼠标和触摸。此示例绑定到移动/悬停。

```
Crafty.e("mouseTracking, 2D, Mouse, Touch, Canvas")
          .attr({ w:320, h:480, x:0, y:0 })
          .bind("MouseMove", function(e) 
          {
                console.log("MouseDown:"+ Crafty.mousePos.x +", "+ Crafty.mousePos.y);
                var hero = = Crafty("hero"); //get hero
                hero.x = Crafty.mousePos.x;
                hero.y = Crafty.mousePos.y;

            }); 
```

现在，实体“英雄”将跟随鼠标悬停和手指触摸屏幕。您可能想改为绑定到“MouseDown”并处理一些逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-24T09:35:26.880

您应该使用该[`addEvent`](http://craftyjs.com/api/Crafty-addEvent.html)方法将回调绑定到`Crafty.stage.elem`元素上的鼠标事件。

```
Crafty.addEvent(this, Crafty.stage.elem, 'mousedown', function(e) {
  console.log('mousedown at (' + e.clientX + ', ' + e.clientY + ')');
});

Crafty.addEvent(this, Crafty.stage.elem, 'mousemove', function(e) {
  var relative = Crafty.DOM.translate(e.clientX, e.clientY);
  console.log('mousemove at (' + relative.x + ', ' + relative.y + ')');
  this.player.x = relative.x;
  this.player.y = relative.y;
}.bind(this)); 
```

该方法由`Mouse`组件内部使用，参见[https://github.com/craftyjs/Crafty/blob/develop/src/controls.js#L324-329](https://github.com/craftyjs/Crafty/blob/develop/src/controls.js#L324-329)

另请参阅[https://groups.google.com/d/msg/craftyjs/6IBnhVe_NIE/hK3vPXP9TxsJ](https://groups.google.com/d/msg/craftyjs/6IBnhVe_NIE/hK3vPXP9TxsJ)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-26T03:52:37.947

以 Dan 所说的为基础，这是一个在移动设备和我的触摸屏笔记本电脑上运行良好的示例

```
<html>
  <head></head>
  <body>
    <div id="game"></div>
    <script type="text/javascript" src="lib/crafty.js"></script>
    <script>
      // When the DOM has loaded

        // Height and Width
        var WIDTH = 500, HEIGHT = 320;
        // Initialize Crafty
        Crafty.init(WIDTH, HEIGHT);
        // Background
        Crafty.background("black");

        Crafty.e("mouseTracking, 2D, Mouse, Touch, Canvas")
          .attr({ w:500, h:320, x:0, y:0 })
          .bind("MouseMove", function(e) 
          {
                console.log("MouseDown:"+ Crafty.mousePos.x +", "+ Crafty.mousePos.y);
                // when you touch on the canvas redraw the player
                player.x = Crafty.mousePos.x;
                player.y = Crafty.mousePos.y;

            });  

        // Create a player entity
        var player = Crafty.e();
        // Add some components to the entity
        player.addComponent("2D, DOM");
        //set where your player starts
        player.attr({
         x : 10,
         y : 10,
         w : 50,
         h : 50
         });

        player.addComponent("Color").color("red");
        //add mouse component for mouse events
    </script>
  </body>
</html> 
```

# asp.net - Radwindow 下拉选择 indexchange

> ID：16178581
> 
> 赞同：-1
> 
> 时间：2013-04-23T20:28:04.113
> 
> 标签：asp.net, telerik, popup

当用户在 Telerik radcombobox 中选择特定项目时，我试图获得一个带有文本框和按钮的弹出窗口（Rad Window）。

如果有人遇到此要求，请建议一些提示/telerik 示例。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:04:03.447

好的，终于想通了，我们在 ddl 选择上得到 radwindow，如下所示

```
if (ddl.SelectedValue.ToString() == "n/a")
    {

        string script = "function f(){$find(\"" + RadWindow1.ClientID + "\").show();   Sys.Application.remove_load(f);}Sys.Application.add_load(f);";
        ScriptManager.RegisterStartupScript(Page, Page.GetType(), "key", script, true);
    } 
```

# jquery - JQuery toggleClass 和 slideToggle - toggleClass 的行为不正确

> ID：16178591
> 
> 赞同：0
> 
> 时间：2013-04-23T20:28:19.993
> 
> 标签：jquery, html, css

这是我真正想要发生的事情：

页面加载时首先显示 div 当用户点击“向上箭头”时，箭头切换为“向下箭头”并隐藏 div。当用户单击“向下箭头”时，将显示 div。

但是，虽然我确实在页面加载时页面正确显示了 div，但是当用户单击“向上箭头”时，它会一直保持到用户再次单击它为止。

我有以下代码：

```
 $(document).ready(function(){

   $('.show_hide').click(function(){
      $(".slidingDiv").slideToggle('slow',function() {
         $('#arrow-down1').toggleClass('arrow-down1', $(this).is(':visible')); /* display the down arrow */
         $('#arrow-down2').toggleClass('arrow-down2', $(this).is(':visible')); /* display the down arrow */
         $('#arrow-up1').toggleClass('showhide', $(this).is(':visible')); /* hides the up arrow */
         $('#arrow-up2').toggleClass('showhide', $(this).is(':visible'));    /* hides the up arrow */           

   }); /* slidingDiv Toggle */      
  }); /* show_hide click function */
}); 
```

[你可以在http://jsfiddle.net/jdYX6/7/](http://jsfiddle.net/jdYX6/7/)看到这个

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T21:57:17.857

您的代码太复杂了，这使任务感到困惑。

这是我认为可以达到预期效果的版本：

HTML

```
<a href="#" id="handle" class="down">v</a>
<div id="dialog" class="open">
    <p>Lorem Ipsem...</p>
</div> 
```

JavaScript

```
$(document).ready(function () {
    $("#handle").click(function (e) {
        e.preventDefault();
        $(this).toggleClass("up down");
        $("#dialog").slideToggle();
    });
}); 
```

CSS

```
a#handle {
    display: block;
    float: left;
    font-size: 3em;
    color: gray;
    text-decoration: none;
    width: 1em;
    height: 1em;
    line-height: 1em;
    text-align: center;
    font-family: sans-serif;
}
a:active, a:focus {
    outline-style: none;
}
a.up {
    -webkit-transform: rotate(-180deg);
    -moz-transform: rotate(-180deg);
    -ms-transform: rotate(-180deg);
    -o-transform: rotate(-180deg);
    transform: rotate(-180deg);
}
div#dialog {
    background-color: #eef;
    border-radius: 5px;
    float: left;
    padding: 2em;
} 
```

[http://jsfiddle.net/ghodmode/GamDn/2/](http://jsfiddle.net/ghodmode/GamDn/2/)

# c# - 通过属性（反）序列化期间控制枚举值格式

> ID：16178593
> 
> 赞同：3
> 
> 时间：2013-04-23T20:28:28.713
> 
> 标签：c#, serialization, json.net

## 问题

假设我有一个枚举代表某事或其他：

```
public enum ResultState
{
    Found,
    Deleted,
    NotFound
} 
```

在我的序列化 json 中，我希望将这些值分别序列化为`"found"`或。（注意：这*不是*camelCase，而是完全自定义的字符串！）`"gone"``"not_found"`

 ***我正在使用 JSON.NET**

## 迄今为止的故事

我的一切工作几乎正确 - 枚举通过 全局转换为字符串`StringEnumConverter`，但是我无法终生看到如何实现与上述类似的东西。

我最初的想法是将`JsonProperty(...)`属性应用于相关的枚举值，但这似乎不起作用！

## 潜在的解决方案？

我能想到完成这项工作的唯一方法是编写我自己的`JsonConverter`继承自`StringEnumConverter`，但使用一些额外的魔法来处理`JsonName`我要创建的新属性。

正如你可能想象的那样，我不喜欢这个想法。

**我想知道你们这些优秀的人是否可以提出一个更简单的替代方案？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-23T20:37:40.433

碰巧的是，我把整个事情想多了。

我利用了`EnumMember`from 的属性`System.Runtime.Serialization`，效果很好。

这是我的完整性新枚举：

```
public enum QueryResultState
{
    [EnumMember(Value="found")]
    Found,

    [EnumMember(Value="gone")]
    Deleted,

    [EnumMember(Value="not_found")]
    NotFound
} 
```

不要忘记`StringEnumConverter`在调用时包含`JsonConvert.Serialize(...)`，因为 JSON.NET 默认将 Enums 序列化为 Integers：

```
JsonConvert.SerializeObject(someObjectWithAnEnum, new StringEnumConverter()); 
```*

# algorithm - 霍夫曼代码 - 压缩

> ID：16178598
> 
> 赞同：2
> 
> 时间：2013-04-23T20:28:40.607
> 
> 标签：algorithm

根据霍夫曼编码主题，我听说过诸如压缩因子之类的东西，或者只是简单的压缩。我记得公式：

```
compression = ( Linput - Loutput ) / Linput 
```

但是，这就是我所知道的全部，我找不到任何关于该公式的最小信息。

如果你看过这个，那是什么意思？那些 Linput 和 Loutput 变量是什么？这里的压缩是什么？

不要偷懒，我发现压缩与以不同方式制作霍夫曼树有关，因此我可以获得不同的字母代码字长度。但这实际上是我所知道的。

编辑。抱歉，我错误地将其标记为 c++。旧习惯很难改掉：P

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T20:32:48.337

Linput 和 Loutput 是输入和输出数据的长度。您给出的公式通过将长度之间的差异除以原始长度来计算压缩方法的有效性。

示例：当您将一个 100 字节的字符串减少到 80 字节时，压缩因子为`(100-80)/100`= `20/100`= 0.2，其中数字越大越好。

# asp.net - asp.net gridview 的代码隐藏更新

> ID：16178601
> 
> 赞同：0
> 
> 时间：2013-04-23T20:28:49.903
> 
> 标签：asp.net, sql, gridview

我有一个 GridView，它由代码隐藏代码更新，通过在 TextBox 中输入文本并为按钮计时来更新 SQL 源。一直在寻找更新SQL源码后如何更新GridView，没有找到答案。我的按钮单击和 SQL 源代码更改的代码是：

```
protected void btnSubmit_Click(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
         sqlSource.InsertParameters["x"].DefaultValue = User.Identity.Name.ToString();
         sqlSource.InsertParameters["y"].DefaultValue = ((TextBox)this.FindControl("abc")).Text;
         sqlSource.InsertParameters["z"].DefaultValue = DateTime.Now.ToString();
         sqlSource.Insert(); 
    }
} 
```

我应该向这个函数添加什么，以便在按下按钮时更新 GridView？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T20:56:04.130

ASP.NET 上的按钮单击需要始终回发。您编写代码就像页面加载事件一样。

并从代码编写中绑定gridview。

gridview1.datasource = sqlSource;
gridview1.Databind();

# css - 如何为 html UL 列表启用水平滚动条

> ID：16178607
> 
> 赞同：1
> 
> 时间：2013-04-23T20:29:25.527
> 
> 标签：css

我的列表中有以下 CSS。我可以看到水平滚动条，但它被禁用了。如何启用它？

```
 .li {
  position: absolute;
  z-index: 10; 
  list-style: none; 
  margin: 0;
  padding: 2px; 
  max-height: 20em; 
  overflow-y: scroll;
  overflow-x: scroll;

  }

 .ul {
   margin: 0;
   padding: 0 4px;
   border-radius: 2px;
   max-width: 10em;

   white-space: nowrap;
   color: black;
   cursor: pointer; 

   } 
```

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:37:26.093

您的滚动条实际上​​是`disabled`因为您的内容没有在容器中溢出。当您有更多内容在父容器中溢出时。它会自动工作（将启用滚动）

```
li {
  position: relative;
  z-index: 10; 
  list-style: none; 
  margin: 0;
  padding: 2px; 
  max-height: 50px; 
  overflow-y: scroll;
  overflow-x: scroll;
  } 
```

[JS 小提琴演示](http://jsfiddle.net/sachinyadav/DHKj5/12/)

PS：您也可以使用`overflow:auto`which 仅当您的内容在父容器中溢出时才显示滚动条。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T20:37:35.283

你为什么写“.li”和“.ul”？除非这些是列表元素的类名，否则它们应该只是“li”和“ul”（不带句点），或者是各自“li”和“ul”元素的类名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T20:38:59.023

首先UL的高度必须大于UL的尺寸。

所以你可以这样做

.li {
位置：绝对；
宽度：10px；
z 指数：10；
列表样式：无；
边距：0；
填充：2px；
最大高度：20em；
溢出-x：滚动；

}

并且内容大小必须大于10px。然后您可以查看scrool。

# ruby-on-rails - 哈希包含方法和/或嵌套属性

> ID：16178611
> 
> 赞同：0
> 
> 时间：2013-04-23T20:29:35.863
> 
> 标签：ruby-on-rails, ruby

在创建类似于使用时的哈希时是否可以包含方法或嵌套属性`to_json`？

使用 to_json 时，我可以包含 published_events 方法和一些嵌套方法：

```
render :json => @venue.to_json(:include => {:published_events => {:methods => :to_param, :include => :occurrences}}) 
```

在创建类似项目的哈希时可以这样做吗？

```
@area_attractions = Venue.find(:all, :conditions => ['attraction = ? AND featured = ?', true, true], :limit => 8)

hash = { :main => @main_features, :local_hotspots => @local_hotspots, :area_attractions => @area_attractions } 
```

编辑：我最终还是将这个散列渲染为 JSON：

```
render :json => hash.to_json 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:39:39.083

Finder 方法返回数组，而不是哈希。尝试这个：

```
hash = { :main => @main_features, 
         :local_hotspots => @local_hotspots, 
         :area_attractions => Hash[*@area_attractions] } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T20:48:10.963

当调用 to_json 时，哈希中的项目可以/仍将包含方法

```
 render :json => hash.to_json(:methods => [:image_url, :to_param, :thumb_url]) 
```

# javascript - 使用 UIWebView 运行内置 javascript

> ID：16178614
> 
> 赞同：0
> 
> 时间：2013-04-23T20:29:45.517
> 
> 标签：javascript, objective-c, uiwebview

目前，我正在开发一个应用程序，它可以从对 Web 服务的调用中接收代表 HTML 文件的字符串。然后，该字符串将被加载到 UIWebView 并显示给用户。我看到的问题是 UIWebView 没有执行通常会在表单加载时触发的 javascript/jquery（在这种情况下，执行诸如隐藏表单的某些部分直到选择某些单选按钮）。

```
-(id) initWithString:(NSString *)HTML{
{
    _html = HTML;
    _htmlView = [[UIWevView alloc] initWithFrame:self.view.bounds];
    [_htmlView setDelegate:self]
    [_htmlView loadHTMLString:_html baseURL:nil];
    [self.view addSubview:_htmlView];
    return self;
} 
```

对此问题的任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:32:33.903

使用此方法

```
- (NSString *)stringByEvaluatingJavaScriptFromString:(NSString *)script 
```

参考[这里](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIWebView_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T20:46:20.950

搜索并比较我得到的 html 与其他一些实际上可以使用 javascript 的文件，我注意到我们用来拉下文件的服务正在将 html 中的符号转换为它们的转义格式（例如 & == &） . 一旦我解析了这些，代码运行良好，javascript 正常触发。

# java - java程序中的错误

> ID：16178621
> 
> 赞同：4
> 
> 时间：2013-04-23T20:30:01.203
> 
> 标签：java

我正在尝试编写这个 java 程序来添加、删除数组列表中的项目。这是我编码的：

```
import java.io.*;
import java.util.Scanner;

class abc
{
    ArrayList<Int> nums = new ArrayList<Int>();
    Scanner in = new Scanner(System.in);
    int opt = 0; 

    public void addItem(int i) // add item to list
    {
        nums.add(i);
    }

    public void addItem(int i, int pos) // add item to specific position in list 
    {
        nums.add(pos,i);
    }

    public void delItem(int pos) // delete item at specific position in list 
    {
        nums.remove(pos);
    }   

    public void delItem() // clear all items in list 
    {
        nums.clear();
    }       

    public void showItems()
    {
        for(int i = 0; i < nums.length ; i++)
        {
            System.out.println("nums[" + i + "] : " + nums[i]);
        }
    }

    public void menu()
    {
        System.out.println("==MENU==");
        System.out.println("1) Add an item");
        System.out.println("2) Add an item to specific position");
        System.out.println("3) Delete an item at specific position");
        System.out.println("4) Clear all items in list");
        System.out.println("5) Exit \n\n");
        System.out.println("Choose an option");
        opt = in.nextInt();
        execute();
    }

    public void execute()
    {
        if(opt == 1)
        {
            System.out.println("Enter a value: ");
            int a = in.nextInt();
            addItem(a);
            System.out.println("Item added");
        }
        else if(opt == 2)
        {
            System.out.println("Enter a value: ");
            int a = in.nextInt();
            System.out.println("Enter a position: ");
            int b = in.nextInt();
            addItem(a,b);
            System.out.println("Item added");
        }
        else if(opt == 3)
        {
            System.out.println("Enter a position: ");
            int a = in.nextInt();
            delItem(a);
            System.out.println("Item deleted");
        }
        else if(opt == 4)
        {
            delItem();
            System.out.println("All Items deleted");
        }
    }
}

class pList
{
    public void static main(String args[])
    {
        abc a = new abc();
        while(true)
        {
            a.menu();
            if(a.opt == 5)
            {
                break;
            }
            else if(a.opt > 5)
            {
                a.menu();
            }
        }
    }
} 
```

这是我收到的错误：

```
C:\Users\Dummy\Desktop\Java>javac pList.java
pList.java:87: error: <identifier> expected
        public void static main(String args[])
                   ^
pList.java:87: error: '(' expected
        public void static main(String args[])
                    ^
pList.java:87: error: invalid method declaration; return type required
        public void static main(String args[])
                           ^
3 errors

C:\Users\Dummy\Desktop\Java> 
```

请让我知道如何解决这个问题以及我在哪里犯了错误。提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T20:32:29.697

改变这个：

```
 public void static main(String args[]) 
```

到

```
 public static void main(String args[]) 
```

您还需要`import java.util.ArrayList;`使用列表。而且您的列表不能是类型`<int>`，必须是`<Integer>`。int 是一个数字；Integer 是可以引用包含数字的对象的指针。[在这里](http://illegalargumentexception.blogspot.com.ar/2008/08/java-int-versus-integer.html)阅读差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T20:34:38.723

您希望您的返回类型在标识符*之后：*

```
public static void main(String args[]) 
```

此外，你有泛型`Int`，你希望那些是`Integer`？您正在将原语添加到 ArrayList 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T18:55:39.450

如果您是学习程序员，您应该使用 NetBeans 您也必须使用 main 方法的返回类型，因为它的返回类型设置为 void

# json - 以错误的方式将 Set 序列化为 JSON

> ID：16178630
> 
> 赞同：1
> 
> 时间：2013-04-23T20:30:25.520
> 
> 标签：json, map, set

我有一个想要序列化为 JSON 的数据类型。数据类型包含一组整数。由于项目中的其他限制，使用 JSON 以外的任何东西（例如，YAML）都会很痛苦，我真的想要 O(1) 查找。

我突然想到，我可以在这里执行一个肮脏的小技巧，只使用一个 JSON 对象，每个键/值对中的值都有虚拟对象：

```
{"1": null, "45": null, "-93": null} 
```

但我在简短的在线搜索中没有看到这方面的先例。好的，这很可怕，是的，它在浪费内存，但它似乎可以提供我想要的东西，而无需编写一些愚蠢的包装器。我在搜索时不会立即遇到这种情况，这一事实让我怀疑我遗漏了一些东西。

那么，**除了我上面提到的丑陋和记忆愚蠢之外，还有其他理由可以避免这种情况吗？** （当然，我理所当然地认为目标语言中对象类型的底层实现对键有 O(1) 检查）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-20T18:06:32.730

鉴于缺少另一种集合数据类型，将对象用作集合似乎完全合理。如果我是你，我会毫无愧疚地使用你提出的对象方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T15:15:14.753

JSON 是一种“轻量级数据交换格式”，而不是查询数据结构。如果您要传输大量数据，那么一个简单的数字数组将占用比您上面提到的 JSON 少得多的空间。然后你可以将它转换成你以后需要的任何数据结构，它不需要符合 JSON 规范。使用您的键/值对格式传输较大文件的时间可能远远超过之后转换结构的时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T21:17:37.770

你可以把它们放在一个排序的数组中，并使用这个 underscore.js 函数进行二进制搜索： [http ://underscorejs.org/#indexOf](http://underscorejs.org/#indexOf)

例子：

```
var array = [1, 45, -93, 20, 17];
var sorted = array.sort();

alert(_.indexOf(sorted, 17, true) >= 0)
alert(_.indexOf(sorted, 18, true) >= 0) 
```

你也可以做你最初的想法，但你不需要把它写成 JSON。您不需要使用字符串作为键，您可以只使用数字作为键。我不知道哪种方式更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T15:42:21.217

在写这个问题时我没有想到的一件事是将数字转换为字符串并可能在查找时散列它的费用。当然，这仍然是集合大小的*O(1)*，但我认为在所有这些字符串操作加起来小于*O(log(n))*二进制文件之前， *n*必须相当大搜索整数数组。

# php - 使日期以与标准 MySQL ymd 不同的格式显示

> ID：16178632
> 
> 赞同：0
> 
> 时间：2013-04-23T20:30:29.230
> 
> 标签：php, mysql

我在 MySQL 表中有一个“日期”字段 - 它的结构是“日期”。当我回显它时，它显示为标准的年月日，例如 2013-04-23。如何更改 PHP 以将其显示为日-月-年，最好使用显示的月份名称，例如 2013 年 4 月 23 日。

这是查询

```
$sql = 'SELECT headline, story, date, name
FROM tpf_news
INNER JOIN tpf_parks ON tpf_news.park_id = tpf_parks.park_id ORDER BY date DESC' ;
$result = $pdo->query($sql); 
```

这是 foreach 循环

```
foreach ($result as $row)
{
$news[] = array(
'headline' => $row['headline'],
'story' => $row['story'],
'date' => $row['date'],
'name' => $row['name']
);
} 
```

这是当前用于显示日期的 PHP 代码。

```
<?php echo $new['name'] , ' ', $new['date']; ?> 
```

我该如何去做呢？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T20:32:37.683

使用 MySQL 的[`DATE_FORMAT()`](https://dev.mysql.com/doc/refman/4.1/en/date-and-time-functions.html#function_date-format)函数来格式化查询中的日期：

```
SELECT
    DATE_FORMAT(date, "$e-%M-%Y") AS date 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T20:32:19.583

MySQL 可以使用 DATE_FORMAT() 为您完成这项工作

[https://dev.mysql.com/doc/refman/4.1/en/date-and-time-functions.html#function_date-format](https://dev.mysql.com/doc/refman/4.1/en/date-and-time-functions.html#function_date-format)

```
DATE_FORMAT( date , '%d-%M-%Y' ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T20:32:37.590

这是如何在 PHP 中执行此操作，其他建议可能会更好，因为它们直接在 MySQL 中执行。取决于你想要什么我猜。

$fixed_date = date('dFY',strtotime($new['date']));

应该这样做。

# tfs - 敏捷中故事点的下拉列表

> ID：16178633
> 
> 赞同：0
> 
> 时间：2013-04-23T20:30:30.350
> 
> 标签：tfs, agile

我正在尝试将下拉列表添加到故事点；显然这没有发生。我有一些问题：

1.  它是否像预定义的那样，因为它不允许我更改现有的？

2.  我创建了一个新字段作为“MyStory Point”并有下拉菜单，它工作得很好，它是否与现有的 Story Point 一样工作，或者我是否还需要对其他一些文件进行更改。

我的新领域是：

```
<FIELD name="MyStory Points" refname="My.Points" type="String" reportable="dimension">
        <HELPTEXT>The size of work estimated for implementing this user story</HELPTEXT>
<ALLOWEDVALUES expanditems="true">
         <LISTITEM value="1" /> 
        <LISTITEM value="2" /> 
        <LISTITEM value="3" /> 
        <LISTITEM value="5" />
        <LISTITEM value="8" />
        <LISTITEM value="13" />
        <LISTITEM value="21" />
        </ALLOWEDVALUES>
      </FIELD> 
```

然后在`<control>`标签下：

```
<Control FieldName="My.Points" Type="FieldControl" Label="MyStory Points:" LabelPosition="Left" /> 
```

这个对吗？？这对故事点有用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:51:31.483

如果您愿意，您可以这样做，但任何引用旧字段的现成报告都会中断。如果您有任何自定义（例如自定义报告、自定义仓库适配器、自定义多维数据集等），它们也可能会损坏。

可能更好的方法是保留原始字段但不要在表单上显示它（通过更改 CONTROL 就像您所做的那样）。然后确保每当您的新字段更改值时，它都会被复制到旧字段中。这样，旧字段仍然存在，因此依赖它的报告或其他部分都不会中断。像这样的东西：

```
<FIELD name="Story Points" refname="Microsoft.VSTS.Scheduling.StoryPoints" type="Double" reportable="measure">
    <WHENCHANGED field="My.Points">
        <COPY>My.Points</COPY>
    </WHENCHANGED>
</FIELD> 
```

# jquery - 在 Texfield、Textarea 上使用 val('any text') 时，jQuery 是否对特殊字符进行编码？

> ID：16178634
> 
> 赞同：1
> 
> 时间：2013-04-23T20:30:32.683
> 
> 标签：jquery, textarea, textfield, encode, htmlspecialchars

我对 jQuerys`val`函数感到困惑。似乎它在设置值时对 html 特殊字符进行了编码，但 jQuerys 文档没有说明任何内容。

这是 jQuery 的功能还是内部浏览器功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:38:15.060

[jsFiddle 演示](http://jsfiddle.net/HUm9s/1/)

`.val`不，当在文本区域或文本输入字段上设置值时，jQuery 不会编码 html 特殊字符。

```
$("#d").val("&nbsp;!@#$%^&*()_+-=<>,./:';¿█");
$("#t").val("&nbsp;!@#$%^&*()_+-=<>,./:';¿█"); 
```

# django - apache服务器在Django项目中找不到静态文件

> ID：16178636
> 
> 赞同：5
> 
> 时间：2013-04-23T20:30:39.940
> 
> 标签：django, apache, mod-python, django-staticfiles, django-static

我正在尝试使用 mod_python 在 apache 服务器上上传我的代码。我已经尝试了很多，但服务器无法访问我的静态文件（我所有的图像、js 和 css）。这是我的虚拟主机设置：

```
<VirtualHost *:80>
ServerName mysite.com
ServerAlias www.mysite.com
Alias /static/ /home/mysite/products/static/
#
RewriteEngine on
RewriteCond %{HTTP_HOST} ^www\.mysite\.com
RewriteRule (.*) http://mysite.com$1 [R=301,L] 
#
DocumentRoot /home
<Directory /home/mysite/>
    SetHandler mod_python
    PythonHandler mod_python.publisher
    PythonDebug On
</Directory>
<Directory />
    Options FollowSymLinks
    AllowOverride None
</Directory>

ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
<Directory "/usr/lib/cgi-bin">
    AllowOverride None
    Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
    Order allow,deny
    Allow from all
</Directory>

ErrorLog /var/log/apache2/error.log

# Possible values include: debug, info, notice, warn, error, crit,
# alert, emerg.
LogLevel warn

CustomLog /var/log/apache2/access.log combined

</VirtualHost> 
```

我的访问日志：

```
"GET /giftproducts/static/js/top.js HTTP/1.1" 404 1487 "http://xxx.xxx.xx.xxx/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_3) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.65 Safari/537.31"
xxx.xxx.xx.xxx - - [23/Apr/2013:15:09:52 -0500] "GET /giftproducts/static/css/index.css HTTP/1.1" 404 1486 "http://xxx.xxx.xx.xxx/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_3) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.65 Safari/537.31" 
```

（未找到 404 页 - 为什么！？）

设置.py：

```
import os
import sys
path = os.path.abspath(os.path.join(os.path.dirname(__file__)))
MEDIA_ROOT = path + '/products/media/'
MEDIA_URL = '/media/'

PROJECT_ROOT = path
STATIC_ROOT = path + '/products/static/'
STATIC_URL = '/products/static/'

STATICFILES_DIRS = (
    path,

)

STATICFILES_FINDERS = (
'django.contrib.staticfiles.finders.FileSystemFinder',
'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
)
TEMPLATE_DIRS = (
path + '/products/templates',
) #this works, since it is loading the html 
```

尝试给出“/static/x”和“{{ STATIC_URL }}x”之类的路径，但没有任何效果。

对此的任何帮助都会很棒。谢谢。

更新：除了下面的 Glyn 建议之外，我将这些行添加到我的 urls.py 中，然后它就起作用了。

```
if settings.DEBUG:
urlpatterns += patterns('',
 (r'^static/(?P<path>.*)$', 'django.views.static.serve',         
 {'document_root': settings.STATIC_ROOT}),
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T20:52:46.950

**1）**您是否在虚拟主机中正确设置了静态文件？我没有看到他们...

IE

```
 Alias /media/ /products/static
    Alias /static/ /products/static

    <Directory /products/static>
        Order allow,deny
        Allow from all
    </Directory> 
```

**2）**在您的模板中**始终使用** `{{ STATIC_URL }}`检索静态文件，这是最佳实践。

**3）**添加`django.contrib.staticfiles`并运行`collectstatic` [管理命令](https://docs.djangoproject.com/en/dev/howto/static-files/)

# sql - 使用 RODBC 的参数化查询

> ID：16178640
> 
> 赞同：10
> 
> 时间：2013-04-23T20:31:08.743
> 
> 标签：sql, r, rodbc

我在 R 中有一个变量，我想将它传递给数据库。在阅读 Google 结果时，我*可以*像许多人建议的那样使用`paste`，但由于 SQL 注入漏洞，这是不安全的。我宁愿喜欢这样的东西：

```
x <- 42
sqlQuery(db, 'SELECT Id, Name FROM People WHERE Age > ?;', bind=c(x)) 
```

是否可以在 RODBC 中使用参数化查询？如果没有，是否有支持它们的替代库？

我正在使用 SQL Server、RODBC 1.3-6 和 R 3.0.0。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-03-28T05:35:34.113

Mateusz Zoltak`RODBCext`在 2014 年编写了 package（基于 Brian Ripley 和 Michael Lapsley 的工作）：

```
conn = odbcConnect('MyDataSource')

sqlPrepare(conn, "SELECT * FROM myTable WHERE column = ?")
sqlExecute(conn, 'myValue')
sqlFetchMore(conn) 
```

来源：[http ://cran.r-project.org/web/packages/RODBCext/vignettes/Parameterized_SQL_queries.html](http://cran.r-project.org/web/packages/RODBCext/vignettes/Parameterized_SQL_queries.html)

# c# - 在 IEnumerable 中聚合一系列连续的块

> ID：16178641
> 
> 赞同：1
> 
> 时间：2013-04-23T20:31:17.063
> 
> 标签：c#, ienumerable, aggregate

**过于简单，做作的问题**

我有一个可枚举的实例，它可以包含一系列连续的元素，以及与它们相互分散的一些其他元素。一个简单的例子

```
var items = new[]
            {"1","1","1","1","1","varX","1","1","1","1","varY","1","1"}; 
```

如您所见，字符串`1`被重复，然后不时出现其他内容（非常容易识别）。假设我想以一种形成可枚举的方式聚合

```
var aggregated = new[]
          { "11111", "varX", "1111", "varY","11"}; 
```

这显然只是“所有 1 的连接”，然后是“var”，然后是下一组 1 的连接。等等

不要太在意字符串的细节；将“1”视为 object 的实例，将`Word`“var”视为 object 的实例`Variable`。现在我想将`Word`' 连接在一起（造一个句子）并以不同的方式处理`Variable`'

我将如何使用 LINQ 或简单的老式 foreach 编写该聚合？

**稍微简化，同样的问题**

我有一个可枚举的“令牌”列表。只有 2 种类型的令牌，都继承自基础令牌：

```
public abstract class Token{}
public class WordToken : Token {}
public class VariableToken : Token {} 
```

字符串：

> 你好世界{varX}你好吗{varY}再见

将由我的代码标记为以下可枚举

```
 var tokens = new[]
    { 
       WordToken, 
       WordToken, 
       VariableToken,  
       WordToken,  
       WordToken,  
       WordToken,  
       VariableToken,  
       WordToken
    }; 
```

我想把它变成

```
var newList = new [] 
    {
       FragmentToken, 
       VariableToken,  
       FragmentToken,  
       VariableToken,  
       FragmentToken
     }; 
```

`FragmentToken`刚刚连接在一起的所有单词在哪里

一个明显的第一步是聚合原始列表以使

```
var step = new[]
    { 
          new[]{WordToken, WordToken}, 
          new[]{VariableToken},
          new[]{ WordToken, WordToken, WordToken}, 
          new[]{VariableToken}, 
          new[]{WordToken}
    }; 
```

然后我可以轻松地完成下一步，但我无法理解如何到达第一步。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T21:50:38.120

这接近您想要的解决方案吗？

```
public abstract class Token : IComparable
{
    public int CompareTo(object obj)
    {
        if (obj == null)
        {
            return -1;
        }
        return GetType().FullName.CompareTo(obj.GetType().FullName);
    }
}
public class WordToken : Token { }
public class VariableToken : Token { }

public static class ListExtensions
{
    public static IEnumerable<IEnumerable<TEntity>> JoinRepeatedValues<TEntity>(this IEnumerable<TEntity> collection)
        where TEntity : IComparable
    {
        var joinedRepeatedValuesCollection = new List<List<TEntity>>();
        var lastValue = default(TEntity);
        foreach (var item in collection)
        {
            if (item.CompareTo(lastValue) != 0)
            {
                joinedRepeatedValuesCollection.Add(new List<TEntity> { item });
            }
            else
            {
                var lastAddedValue = joinedRepeatedValuesCollection.Last();
                lastAddedValue.Add(item);
            }
            lastValue = item;
        }
        return joinedRepeatedValuesCollection;
    }

}
class Program
{
    static void Main(string[] args)
    {
        var tokens = new Token[]
                            {
                                new WordToken(),
                                new WordToken(),
                                new VariableToken(),
                                new WordToken(),
                                new WordToken(),
                                new WordToken(),
                                new VariableToken(),
                                new WordToken()
                            };

        var joinedValues = tokens.JoinRepeatedValues();
        var items = new[] { "1", "1", "1", "1", "1", "varX", "1", "1", "1", "1", "varY", "1", "1" }.JoinRepeatedValues();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T21:17:32.437

好吧，根据我对这个问题的理解，这是一个尝试

```
var initialList;//whatever this contains...

List<List<Object>> retList = new List<List<Object>>();

Type storedType = null;

foreach(Object thing in initialList)
{//we treat this like a simple array of objects, because we DONT know what's in it.
    if(storedType != null)
    {
        if(storedType.Equals(thing.GetType())
            instanceList.Add(thing);
        else
        {//add instanceList to the master return, then re-set stored type and the 
         //list and add the current thing to the new list
            retList.Add(instanceList);
            storedType = thing.GetType();
            instanceList = new List<Object>();
            instanceList.Add(thing);
        }
    }
    else
    {//should be First run only
        storedType = thing.GetType();
        instanceList.Add(thing);
    }
}
return retList; 
```

**补充说明：**

如果所有对象都应该相同，`Type`则不要检查类型，而是检查并存储值，但基本算法保持不变。此外，您可以使用内容的确切类型而不是`Object`，如果您要检查值，这是相当必要的..

============================================

不知道如何使用 linq 执行此操作，同时仍保持当前项目顺序。如果这不重要，Linq 的`OfType<>`方法将是要走的路，根据类型过滤列表。不幸的是，您不能在类型规范中为此使用变量，因此您需要提前知道可能在 initialList 中的所有类型的严格列表。

# java - 如何处理 Flickr 异常

> ID：16178643
> 
> 赞同：0
> 
> 时间：2013-04-23T20:31:25.010
> 
> 标签：java, file, exception, flickr

我有一个从 Flickr 网站爬取的图像 ID 列表

我需要得到它的位置（纬度和经度）

这是我的代码

```
File source = //images id 
File target = // images location

Scanner scanner = null;
PrintStream pStream =null;
String apiKey = //;
Flickr flick = new Flickr(apiKey);

PhotosInterface photosInterface=    flick.getPhotosInterface();
try {
    scanner= new Scanner(source);
    pStream= new PrintStream(target);       
    while (scanner.hasNext())
    {       
        String line = scanner.nextLine();       
        if (photosInterface.getPhoto(line).getGeoData()!=null)
        {
            pStream.println(Float.toString(photosInterface.getPhoto(line).getGeoData().getLatitude())+"\t"+Float.toString(photosInterface.getPhoto(line).getGeoData().getLongitude()));
        }
        else pStream.println("null");
    }           
    System.out.println(lineNumber);
}
catch (Exception e) {
}

} 
```

在这种情况下，我想执行这条指令

```
pStream.println("null"); 
```

的情况下：

图片不可用（FlickrException）

或图像未与 GeoData 关联

这个怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T21:30:16.447

我猜你需要包围`FlickrException`在一个`try {..} catch`块中抛出 a 的调用。

例如，如果在没有可用图像时`photosInterface.getPhoto(line)`抛出 a ，则：`FlickrException`

```
while (scanner.hasNext())
{       
    String line = scanner.nextLine();       
    try {
        if (photosInterface.getPhoto(line).getGeoData()!=null)
        {
            pStream.println(Float.toString(photosInterface.getPhoto(line).getGeoData().getLatitude())+"\t"+Float.toString(photosInterface.getPhoto(line).getGeoData().getLongitude()));
        }
        else pStream.println("null");
    } catch (FlickrException fe) {
        // You may need to check something about the exception
        // here in case it can be thrown for a different reason
        // than images are not available 
        pStream.println("null");
    }
}           
System.out.println(lineNumber); 
```

# c# - 在 Visual Studio 2012 上禁用/替换 CLI？（C＃）

> ID：16178644
> 
> 赞同：1
> 
> 时间：2013-04-23T20:31:30.880
> 
> 标签：c#, visual-studio, command-line-interface

我最近一直在做一些初学者级别的 C#，我喜欢新的 Visual Studio 等等，但是是否可以让我的程序输出（`Console`例如，使用 时）出现在报告错误的小文本区域而不是单独的命令行界面？在 Eclipse 和 NetBeans 中，这可以通过 Java 实现。

我不是特别喜欢每次我想测试一条新线路时出现的 CLI。我想知道是否有一个选项可以让输出出现在同一个窗口的底部，就像在 NetBeans 中一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T20:35:01.053

这是一种解决方法，因为我不知道在 Visual Studio 中有一个设置来实现这一点，但是您可以用[Debug.WriteLine](http://msdn.microsoft.com/en-us/library/system.diagnostics.debug.writeline.aspx)替换（或编写一个方法） Console.WriteLine 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T20:37:41.227

不，在使用 Visual Studio 时，编写控制台程序总是会分配一个新窗口。但是，您可以在输出窗口中显示消息，请查看[Debug.WriteLine](http://msdn.microsoft.com/en-us/library/system.diagnostics.debug.writeline.aspx)。

如果我有很多消息要输出，我通常会写一个小的实用方法。

```
using System;
using System.Diagnostics;

class Program {
    static void Main() {
        WriteLine("Hello");
        WriteLine("The number is {0}", 42);
    }

    static void WriteLine(string format, params object[] args) {
        string message = String.Format(format, args);
        Console.WriteLine(message);
        Debug.WriteLine(message);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T20:43:08.377

在另一个 StackOverflow 问题中已经很好地回答了这个问题。这是它的链接： [redirect-console-to-visual-studio-debug-output-window-in-app-config](https://stackoverflow.com/questions/1407974/redirect-console-to-visual-studio-debug-output-window-in-app-config)

# jquery - 如何一次将所选项目附加到 Kendo MultiSelect 一个项目？

> ID：16178645
> 
> 赞同：0
> 
> 时间：2013-04-23T20:31:34.953
> 
> 标签：jquery, model-view-controller, telerik, kendo-ui, multi-select

我在 Kendo UI 版本 2013.1.319 中使用新的 Kendo Multi Select Control。我正在尝试一次添加一个选定的项目，但我很挣扎。

我的标记：

```
 <input style="width: 100%; margin-top: 15px;" id="selectedFilters" /> 
```

我的脚本：

```
 var filterMultiSelect = $('#selectedFilters').kendoMultiSelect({
                        dataSource: data,
                        dataTextField: 'name',
                        dataValueField: 'value',
                        filter: 'contains',
                        placeholder: "No Filters Selected.",
                        delay: 0,
                        minLength: 2,
                        highlightFirst: true,
                        ignoreCase: true,
                        change: function () {
                            applyFilters();
                        }
                    }).data("kendoMultiSelect"); 
```

附加项目的脚本：

```
newlySelectedFilters.forEach(function (dataItem) {
                        var filters = filterMultiSelect.value();
                        var temp = $.merge($.merge([], filters), [dataItem]);
                        temp = $.unique(temp);
                        filterMultiSelect.value(temp);
                    }); 
```

这是一个说明问题的[jsFiddle项目。](http://jsfiddle.net/rodneyhickman/nDmjt/2/)

我究竟做错了什么？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T16:58:24.217

好的，如果你发现同样的问题。剑道帮我填了[表格](http://www.kendoui.com/forums.aspx/ui/multi-select/how-to-append-a-selected-item-.aspx?actionMode=editPost&postId=69ad806e-9aae-631b-85d4-ff000054ddc5)。他们创建了以下[jsFiddle](http://www.kendoui.com/forums.aspx/ui/multi-select/how-to-append-a-selected-item-.aspx?actionMode=editPost&postId=69ad806e-9aae-631b-85d4-ff000054ddc5)。看小提琴。如果要将选定的值附加到已选定的值，则使用 .slice() 方法。

解决方案是：

```
// Remove previous selected Filters. (This was undocumented method. I got from Kendo)
multiSelect.dataSource.filter({});

// Set the new filters
filterMultiSelect.value(newlySelectedFilters); 
```

以这种方式重置过滤器解决了我的问题。

# angularjs - 如何使 angular-ui 引导手风琴组在 html5mode 中工作

> ID：16178648
> 
> 赞同：0
> 
> 时间：2013-04-23T20:31:45.317
> 
> 标签：angularjs, angular-ui, angularjs-routing

如果我在我的配置模块中将 html5mode 启用为 true，则打开手风琴组的“超链接”会将 url 重新路由回基本 url。不仅手风琴组不打开，而且您被重新路由。当未启用 html5mode 时，我的手风琴组工作正常。

是否有一个简单的解决方法，或者我将不得不深入研究 angularjs-ui 源代码？还是我只是对 html5mode 不走运？我的手风琴代码非常简单：

```
<accordion close-others='true'>
<accordion-group ng-repeat='trip in retrieved.iss' heading='ISS:  {{trip.date}}'>
    <p class='deleteItem' ng-click='deleteItem(trip.uniqueCount)'>X</p>
    <p><span class='btn-group ' data-toggle='buttons-checkbox'>
        <button type='button' class='btn btn-primary small-btn' ng-model='individualRadioModel' btn-radio="'Mine'">Mine</button>
        <button type='button' class='btn btn-primary small-btn' ng-model='individualRadioModel' btn-radio="'All'">All</button>
        </span></p>
    <p ng-repeat='student in trip.studentList | matchStudents:individualRadioModel'>{{student}}</p>
</accordion-group> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T20:56:33.307

答案是不要使用旧版本的 Angularjs。问题出在 1.0.4 上。移动到 1.0.6 或更高版本，问题就消失了。

不要像我这样的老顽固。更新你的图书馆，孩子们。

# list - haskell中元素的索引

> ID：16178650
> 
> 赞同：0
> 
> 时间：2013-04-23T20:31:51.880
> 
> 标签：list, haskell

我有这两个列表`[@,a,@,b,c,@,@,@,(de),@,@,@,f,g,@,h]`，`["","","+","","","?","|","","","","","*","","","|",""]`我想通过使用`scanl or map`函数来覆盖第二个列表，并在第一个列表中提取它前面的元素。这两个列表具有不同类型的元素。

例如，如果第二个列表中的元素是`/= ""`然后提取第一个列表中它后面的元素（例如 for for `+`to get `a`， for `? -> c`，`*->(de)` `|->g`），我想要。

我尝试过这样的事情

```
map(\x-> if x /= "" then l2 !! (((elemIndices x l1)!!0)-1) else Epsilon)l1 
```

where `l1 is ["","","+","","","?","|","","","","","*","","","|",""]`and `l2 is [@,a,@,b,c,@,@,@,(de),@,@,@,f,g,@,h]`but 它不起作用，而且`@ = Epsilon`and 它来自`data Reg = Epsilon | Literal Char | Or Reg Reg | Then Reg Reg | Star Reg deriving Eq`.

有人能帮我吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T21:00:44.137

我想你想要类似的东西

```
combinedList = zip secondList (Epsilon : firstList) 
```

然后查找“？” 你只需`lookup "?" combinedList`做得到`Just (Literal 'c')`。

（您显然可以尝试抓取索引，但对于此处描述的情况来说似乎有点迂回。）

# javascript - 在Javascript中将foreignObject附加到SVG

> ID：16178653
> 
> 赞同：3
> 
> 时间：2013-04-23T20:32:05.900
> 
> 标签：javascript, dom, svg

我有一个 ID 为“graphe”的 SVG 元素。我想在这个元素上附加一个包含段落的 foreignObject。我读到有必要在这个对象中有一个“身体”（这是真的吗？）。在所有情况下，这段代码都不起作用：

```
foreign = document.createElementNS('http://www.w3.org/2000/svg', "foreignObject");
foreign.setAttributeNS('http://www.w3.org/2000/svg', 'x', 250);
foreign.setAttributeNS('http://www.w3.org/2000/svg', 'y', 100);
foreign.setAttributeNS('http://www.w3.org/2000/svg', 'width', 500);
foreign.setAttributeNS('http://www.w3.org/2000/svg', 'height', 150);

body = document.createElement("body");
body.setAttribute('xmlns', 'http://www.w3.org/1999/xhtml');

texte = document.createElement("p");
texte.textContent = "EXAMPLE";

foreign.appendChild(body);
body.appendChild(texte);
document.getElementById("graphe").appendChild(foreign); 
```

我不明白为什么。当我在 Chrome 中打开 DOM Inspector 时，我可以看到一切都在这里。但什么都没有显示。当我直接在源代码中重新复制对象的 DOM Inspector 代码时，我会在页面上看到我的对象。

[编辑] JSFiddle 演示：http: [//jsfiddle.net/uwZja/](http://jsfiddle.net/uwZja/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T09:11:39.827

永远不要将 svg 命名空间用于 svg 中的属性。

改变：

```
foreign.setAttributeNS('http://www.w3.org/2000/svg', ... 
```

至：

```
foreign.setAttributeNS(null, ... 
```

或者：

```
foreign.setAttribute("x", ... 
```

此外这部分：

```
body.setAttribute('xmlns', 'http://www.w3.org/1999/xhtml'); 
```

除非您想将文档序列化为字符串，否则它是相当无用的。它没有任何影响，创建的元素类型是在你调用时决定的`createElement/createElementNS`。它没有改变。

# javascript - 打字效果 - 添加回车和闪烁光标

> ID：16178658
> 
> 赞同：2
> 
> 时间：2013-04-23T20:32:23.693
> 
> 标签：javascript

我一直在使用[TheZillion](http://thezillion.wordpress.com/2012/02/27/javascript-typing-effect/)提供的一个简单的打字效果脚本。

```
<html>    
    <head>
        <title>Typing Effect - by Zillion</title>
        <script type='text/javascript'>
            var index = 0;
            var text = 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque tincidunt, nulla at tempus tristique, nisl leo molestie est, ut vestibulum mauris mauris a odio. Sed at massa vitae ipsum venenatis porta. Integer iaculis pretium tempus. Donec viverra sollicitudin velit non gravida. Phasellus sit amet tortor odio. Vivamus lectus nisl, suscipit porttitor bibendum ut, tristique quis dui. Vestibulum non eros leo. Maecenas tincidunt semper turpis, a tristique purus pretium sit amet. Praesent nec neque tortor.Donec suscipit tristique ante quis molestie. Phasellus ac lacus non felis faucibus dictum vitae ac ipsum. Sed pharetra nulla sodales nulla porta imperdiet. Quisque pretium hendrerit laoreet.';
            // Here you can put in the text you want to make it type.
            function type() {
                document.getElementById('screen').innerHTML += text.charAt(index);
                index += 1;
                var t = setTimeout('type()', 100);
                // The time taken for each character here is 100ms. You can change it if you want.
            }
        </script>
    </head>

    <body onload='type()'>
        <!-- And here, you create the container in which you display the typed text -->
        <div id='screen'></div>
    </body>
</html> 
```

我想在`var text`字符串中添加回车符。
目前没有`"\n", "\r",`识别 Unicode 表示或 HTML 标记。

我还想在`var text`字符串中输入的字母之前添加一个闪烁的光标。

任何帮助将不胜感激。

这是[**jsFiddle中的代码**](http://jsfiddle.net/N4Fs9/)

# ruby-on-rails - 上传到 S3 时，Carrierwave 对 PDF 进行下采样

> ID：16178661
> 
> 赞同：2
> 
> 时间：2013-04-23T20:32:30.437
> 
> 标签：ruby-on-rails, imagemagick, carrierwave

我正在使用 CarrierWave 上传文件（carrierwave 0.6.2，Rails 3.2.3）。在开发中，文件保存在本地，在生产中，它们使用 Fog 保存到 S3。

当 PDF 在生产中上传时，它似乎被 imagemagick 重新采样并且质量降低。此外，文件大小大幅增加。

该站点托管在 Heroku 上，因此使用 CarrierWave Backgrounder 在后台完成图像处理。

在模型上，我有各种版本调用，但只有在上传的文件是图像时才会触发所有版本：

```
version :thumb, :if => :image? do
    process :resize_to_fill => [200, 200]
end

def image?(new_file)
    new_file.content_type.include? 'image'
end 
```

我已经检查过了，它似乎没有将 PDF 视为图像（该类型被检测为应用程序/pdf）。

当我检查我的 mac 上的文件时，看起来上传的版本（从 S3 获取）已被 ImageMagic 重新编码，这表明它没有被视为非图像文件。

有没有办法告诉 CarrierWave 避免对 PDF 进行任何图像处理？

在此先感谢菲尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-09T19:09:06.547

我能够自己解决这个问题。似乎所有上传文件都调用了旨在纠正图像方向和去除 EXIF 数据的回调，而不仅仅是 PDF。

# c# - 如何解决错过“如果”的问题

> ID：16178663
> 
> 赞同：-5
> 
> 时间：2013-04-23T20:32:33.513
> 
> 标签：c#, if-statement, skip

'life' 以 12 开头，'randomNumberhit' 是随机数 1,2 或 3；'randomNumberhit' 已从 'life' 中删除，但当我尝试识别 'life' 为 0、-1 或 -2 时，它不起作用。

```
int life = 12;
...
Random randomhit = new Random();
int randomNumberhit = randomhit.Next(1, 4);
...
life = life - randomNumberhit;
Console.WriteLine(life);
if (life == 0)
{
Console.Writeline("end 0");
}
if (life == -1)
{
Console.Writeline("end -1");
}
if (life == -2)
{
Console.Writeline("end -2");
} 
```

即使“生命”是 0、-1 或 -2，它也不遵循路径，任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:45:56.060

的价值是`randomNumberhit`多少？它似乎是一个介于 1 和 4 之间的数字。假设您有最大的随机值，即 3。12 - 3 > 0，这就是为什么您的 if 语句永远不会评估为真的原因。

另外，请阅读[MSDN：Random.Next](http://msdn.microsoft.com/en-us/library/2dx6wyd4.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T20:44:33.297

如果喜欢上面的评论，我会使用 if/else。但是你不能只使用吗？

```
 if (life <= 0) 
```

# javascript - 如何检查鼠标点击事件是模拟的还是原生的？（非jQuery方式）

> ID：16178675
> 
> 赞同：4
> 
> 时间：2013-04-23T20:32:59.853
> 
> 标签：javascript, dom-events

使用 jQuery 很容易。使用纯 JavaScript 不是，至少要找出方法并不容易。`if (event.clientX && event.clientY) { ... }`提供某种检测，但不是 100% 准确。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T21:13:43.280

有*一种*方法，但恕我直言，这是很有争议的。尝试这个：

```
HTMLElement.prototype.dispatchEvent = (function(dispev) {
    return function(event) {
        // Do your stuff
        dispev.call(this, event);
    };
})(HTMLElement.prototype.dispatchEvent); 
```

有了这个，您可以在`dispatchEvent`调度以编程方式生成的事件时捕获每个调用。当然，这会稍微减慢调度速度，但除非您尝试触发*大量*事件，否则这应该不是问题。

在 IE8 中，您必须替换`Element.prototype.fireEvent`，而在 IE7 及更低版本中，您无法对此做任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-23T09:44:25.493

[Event.isTrusted](https://developer.mozilla.org/en-US/docs/Web/API/Event/isTrusted)可以使用到令人满意的水平。

# c# - C# 解决方案中的一个项目缺少 Intellisense

> ID：16178681
> 
> 赞同：0
> 
> 时间：2013-04-23T20:33:26.697
> 
> 标签：c#, visual-studio-2012, intellisense, silverlight-5.0

它曾经可以工作，然后在编译后的一天智能感知消失了。当我点击 Ctrl + Space 时，它​​会显示所有相关的系统方法和变量，但我没有写任何内容。即使在对象浏览器下，项目的容器下面也有零个命名空间。选项中也选中了所有相应的复选框。也删除了SUO文件。卸载和重新加载项目不起作用。

没有想法。想法？

需要注意的一件事是，我在试用结束后卸载了 Resharper。但我想假设这会破坏每个项目，而不仅仅是一个。此外，中断的项目是解决方案中唯一的 Silverlight 项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T21:04:44.480

尝试使用工具/导入和导出设置/并选择重置所有设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T21:05:01.013

去

```
Tools->Options->Text Editor->C# (or All Languages)->General 
```

并在右侧窗格中启用`Auto List Members`和。`Parameter Information`

# hbase - HBase 行键设计

> ID：16178683
> 
> 赞同：2
> 
> 时间：2013-04-23T20:33:28.290
> 
> 标签：hbase

我在 Hbase 中创建了以下 Schema，

```
create 'test','lg'

put 'test','row1','lg:htype','get'
put 'test','row1','lg:ip','192.168.12.123' 
put 'test','row1','lg:stat','success' 
```

对于这个 Schema，我想创建一个 rowkey。我的问题是如何在 hBase shell 中创建行键。

使用上述模式，我创建了列族。如何使用 hbase shell 定义行键。或者我需要像定义列族一样定义行键。如果是这样，HBase 如何区分它是列族成员，而该字段是行键。

我想将我的行键作为用户 ID 和时间戳的组合键。所以请让我知道如何通过 shell 在 hbase 中创建复合行键。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T21:12:19.967

在这种情况下，“row1”是您的行键。没有设计时指定行键的方法，因为对于 HBase，它们只是字节数组。要做任何比这更有趣的事情，您需要在应用程序代码（Java、ruby 脚本等）中完成。

如果您想以预先定义行键结构的方式与 HBase 交互，您可以尝试 Phoenix，HBase 上的开源 SQL“皮肤”：

[https://github.com/forcedotcom/Phoenix](https://github.com/forcedotcom/Phoenix)

（完全披露：Phoenix 项目最初是由我的雇主 Salesforce 创建的。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T09:35:48.940

正如 Ian 所说，您不需要“创建”行键，无论您写什么作为行键都将是行键，它只是一个字节数组，所以任何事情都会发生。

您仍然需要仔细考虑什么是适合您的行键。当你这样做时，你需要考虑你为你的数据计划的访问模式和 hbase 表的结构方式，例如键在磁盘上按字典顺序排序，每个存储的值都有一个时间戳，限定符被分组到列族等.

# javascript - 如何 click() 只点击 DIV，不包含 DIV？

> ID：16178686
> 
> 赞同：2
> 
> 时间：2013-04-23T20:33:32.473
> 
> 标签：javascript, jquery, html

```
<div id="firstDiv" style="width:1000px;height:600px;">
    <div id="secondDiv" style="width:200px;height:200px;"></div>
</div> 
```

两个 DIV 都有 click() 事件。当我单击 secondDiv 时，也会触发 firstDiv 的单击事件（我猜这是逻辑，因为我也在 firstDiv 的边界内单击）。但是，我只想触发 DIV 的单击事件，我实际上在单击时将鼠标悬停在该 DIV 上。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-23T20:35:32.900

在内部 div 添加：

```
$('#secondDiv').click(function(e){e.stopPropagation();}); 
```

[`.stopPropagation()`](http://api.jquery.com/event.stopPropagation/)将防止点击事件从内部 div 冒泡到父 div 或任何其他祖先。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-23T20:36:12.620

默认情况下，DOM 元素会冒泡事件。您可以使用 stopPropagation 停止

```
$('#secondDiv').on('click', function(e){
    e.stopPropagation();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T20:36:56.873

你可以这样做 -

```
$('#secondDiv').click(function(event) {
    // do your stuff
    return false;
 }); 
```

`return false;`相当于`event.stopPropagation()`和`event.preventDefault()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T20:37:44.967

您需要使用[`event.stopPropagation()`](http://api.jquery.com/event.stopPropagation/)它来防止事件冒泡到父元素（在您的情况下）。看起来很有希望，`preventDefault`但它实际上阻止了默认操作 - 没有冒泡。

```
$("#firstDiv").click(function() {
  alert("Div One");
});

$("#secondDiv").click(function(e) {
  e.stopPropagation();
  alert("Div Two");
}); 
```

两者的演示在[这里](http://jsfiddle.net/ATmTe/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T20:37:10.190

你可以用`event.stopPropagation()`这个冒泡。像这样的东西：

```
$("secondDiv").click(function(event) {
  event.stopPropagation();
   //Write your logic here
}); 
```

有关这方面的更多信息，请参阅[此处的文档](http://api.jquery.com/event.stopPropagation/)

# javascript - 基于单击的导航链接激活 jquery tabber

> ID：16178690
> 
> 赞同：0
> 
> 时间：2013-04-23T20:33:43.013
> 
> 标签：javascript, jquery

我的网站有一个带有 id 的导航`#nav`。我想根据单击的导航列表激活选项卡。导航`#nav`有一个像这样的html： -

```
 <ul id ="nav">
    <li><a href="#tab1">Fred</a></li>
    <li><a href="#tab2">Thom</a></li>
    <li><a href="#tab3">Kay</a></li>
</ul> 
```

当从导航中单击 Fred 时，我想在具有这样的 html 的 tabber 上激活它

```
 <ul class="tabs">                                        
         <li><a href="#tab1">Fred</a></li>                                      
         <li><a href="#tab2">Thom</a></li>    
         <li><a href="#tab3">Kay</a></li>       
</ul> 
```

和标签内容是这样的： -

```
<div id="tab1" class="tab_content">Lorem</div>
<div id="tab2" class="tab_content">Ipsum</div>
<div id="tab3" class="tab_content">Dolor</div> 
```

所以我写了下面这行jquery

```
$("#nav li").click(function() {

         var hash = location.hash;
          var sel = $("ul.tabs li a[href='" + hash + "'], ul#tabs li a[href='" + hash + "']");

    if (sel.length) { 

        sel.addClass("active").parent().addClass("active"); //Activate tab

        $(hash).show();
    } 
```

它不起作用！以及如何将 onclick 事件绑定到它？对不起，我对 jquery 很陌生。我在这个网站上看到过以前的例子，当我尝试使用时它不起作用。那么有人可以修改我的代码/帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:51:23.683

您的 jquery 不是问题 - 它是您的 HTML。您在 click 函数中使用 location.hash ，但您的 nav ul 实际上并没有哈希值。尝试改变这个：

```
<ul id ="nav">
    <li><a href="tab1">Fred</a></li>
    <li><a href="tab2">Thom</a></li>
    <li><a href="tab3">Kay</a></li>
</ul> 
```

对此：

```
<ul id ="nav">
    <li><a href="#tab1">Fred</a></li>
    <li><a href="#tab2">Thom</a></li>
    <li><a href="#tab3">Kay</a></li>
</ul> 
```

# django - 找不到与 Django ForeignKey 问题相关的类

> ID：16178693
> 
> 赞同：8
> 
> 时间：2013-04-23T20:33:56.880
> 
> 标签：django, django-models, foreign-keys

我在名为“Activity”的类下的模型中创建了以下 ForeignKey 字段

```
related_workoutrecord = models.ForeignKey(WorkoutRecord, null=True, blank=True) 
```

ForeignKey 与一个名为 WorkoutRecord 的类相关，该类应允许为空。

添加此列后，我运行 South 并收到以下错误消息：

```
NameError: name 'WorkoutRecord' is not defined 
```

有什么想法吗？我已经确认“WorkoutRecord”是我模型中的一个类。

我是否需要将 WorkoutRecord 写为字符串（带引号），例如：

```
related_workoutrecord = models.ForeignKey('WorkoutRecord', null=True, blank=True) 
```

我很感激反馈

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-23T20:42:24.113

根据我的评论，确保“ **Activity** ”类可以访问“ **WorkoutRecord** ”类。

该错误意味着它所说的 WorkoutRecord 未在您的 Activity 类中定义。

首先检查这两件事：

1）你导入了吗？

2) WorkoutRecord 是在 Activity 之前定义的吗？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-23T20:41:34.430

WorkoutRecord 类必须在 Activity 类之前（即上面）定义，以便使用不带引号的类的引用。如果类之间存在循环引用，那么使用带引号的字符串版本将有助于获得对稍后在代码中定义的类的惰性引用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-23T20:42:58.710

你有两个选择：

1.  您可以从它所在的任何模块导入`WorkoutRecord`模型（这是标准的 python 方法）

    ```
    from myapp.models import WorkoutRecord
    related_workoutrecord = models.ForeignKey(WorkoutRecord, null=True, blank=True) 
    ```

    使用这种方法，有时您可能会遇到循环导入的情况，因此有另一种选择：

2.  您可以使用字符串作为 a 的第一个参数，`ForeignKey`或者`ManytoManyField`指定您希望与之建立关系的模型。这是一个 django 功能。如果您查看有关[关系](https://docs.djangoproject.com/en/dev/ref/models/fields/#foreignkey)[的文档`ForeignKey`](https://docs.djangoproject.com/en/dev/ref/models/fields/#foreignkey)，它会说：

    > 如果需要在尚未定义的模型上创建关系，可以使用模型的名称，而不是模型对象本身：

    这意味着如果模型尚未定义，但位于同一模块中（即它位于当前代码下方），您可以使用引号中的模型名称：`'WorkoutRecord'`，但如果模型在另一个应用程序/模块中，您可以还指定为字符串：`'myapp.WorkoutRecord'`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-23T20:40:16.017

使用`'yourapp.Model'`格式。

```
foo = models.ForeignKey('yourapp.WorkoutRecord', null=True, blank=True) 
```

带引号。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-02T17:55:30.063

如果您在一个应用程序中有两个类名，请确保在它对我有用的引用类的名称周围添加单引号 ''。

```
class foreignClass(models.Model):
    category_id = models.ForeignKey('Product_categories', on_delete=models.CASCADE) 
```

# ios - 单击 UIBarButtonItem 时显示 UIDatePicker 及其工具栏

> ID：16178697
> 
> 赞同：1
> 
> 时间：2013-04-23T20:34:20.233
> 
> 标签：ios, uibarbuttonitem, uidatepicker

在我的应用程序的 ViewController 中，我有 3 个不同的项目：

```
@property (weak, nonatomic) IBOutlet UIBarButtonItem *dateSelect;
@property (weak, nonatomic) IBOutlet UIToolbar *dateToolbar;
@property (weak, nonatomic) IBOutlet UIDatePicker *datePicker; 
```

这 3 个项目也在我的故事板文件中定义。

当我单击 dataSelect UIBarButtonItem 时，我需要能够显示 datePicker 和 dateToolbar。

在以前的项目中，我使用 UITextField 的 inputView 显示了 dataPicker 及其工具栏（带有“确定”和“取消”按钮）

```
self.date.inputView = self.datePicker;
self.date.inputAccessoryView = self.dateToolbar; 
```

由于 UIBarButtonItem 没有任何 inputView 属性，有没有类似的方法呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T22:48:19.603

我认为您应该设置 UIBarButtonItem 的目标操作来创建选择器

```
-(void) createPicker {
    datePicker = [[UIPickerView alloc] init];
    datePicker.frame = CGRectMake(0, 200, 320, 240);
    datePicker.delegate = self;
    datePicker.dataSource = self;
    datePicker.showsSelectionIndicator = YES;

    [self.view addSubview:datePicker];
    if(!_isToolBarShow) {
    _isToolBarShow = YES;
    toolDismiss.frame = CGRectMake(0, 160, 320, 40);
    }
} 
```

要删除，您可以对 OK/Cancel 按钮执行目标操作

```
- (IBAction) dismissKeyBoardBtnAction:(id)sender {

    if (datePicker != nil) {
        [datePicker removeFromSuperview];
        [datePicker release];
        datePicker = nil;
                _isToolBarShow = NO;
        toolDismiss.frame = CGRectMake(0, 480, toolDismiss.frame.size.width, toolDismiss.frame.size.height);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T20:40:51.933

我建议的方法是定义一个带有选择器和工具栏的视图控制器并将其显示在弹出窗口中，因此在按钮按下动作本身中，您可以通过显示此弹出窗口来显示/添加值

解雇和传递此方法中的值将需要代表。这是一种可重用的方式

# c++ - 实现两个依赖类（类的前向声明）

> ID：16178701
> 
> 赞同：2
> 
> 时间：2013-04-23T20:34:31.460
> 
> 标签：c++, error-handling

我在实现两个在定义和实现中相互使用的类时遇到问题。我的意思是他们都相互依赖。

他们来了：

课堂课程：

```
class Course {
        int courseId;
        int maxSignedStudents;
        int numOfStudentsSigned;
        AVLTree<Student*> signedStudents;
        Queue<Student*> waitingQueue;
    public:
        Course(int courseId, int size);
        int getFreeSpots() {                    
            return maxSignedStudents - numOfStudentsSigned;
        }
        void addStudent(Student* newStudent);
        int getId();    //TODO: Added this func
        void removeFromSignedStudents(int studentId);

        class CourseIsFull: std::exception {};

    }; 
```

班级学生：

```
class Student {
    int id;
    AVLTree<Course*> signedCourses; 
                                        //and not "Course"
    AVLTree<QueueNode<Student*>* > waitingCourses;
public:
    Student(int studentId);
    int getId();                    
    void addSignedCourse(Course* newCourse); 
    void addToWaitingCourses(int courseId, QueueNode<Student*>* newCourse); 
    Course* getSignedCourse(int courseId);
    void removeFromSignedCourses(int courseId);

}; 
```

现在我在 Course.h 中添加了一个前向声明，如下所示：

```
class Student; 
```

课程中有一些函数使用学生的函数，反之亦然。因此，我收到一个前向声明错误说：前向声明'class Student'

**我如何实现这两个类，以便它们从我定义每个类的那一刻起就相互了解并且不会出错..**

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T20:40:52.797

这应该可以正常工作。在 course.h 你可以转发声明`class Student;`，在 student.h 你可以转发声明`class Course;`。您指定的错误只有在您实际定义类然后声明它时才会发生，这可能是您包含文件的顺序的结果。确保任何前向声明都在包含实际定义之前（这`#include`只不过是一种“内联添加”文字其他文件的奇特方式），并且错误将消失。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-23T20:49:06.217

看到你有两个选择

1 制作两个 cpp 文件和两个头文件，每个文件都包含一个类定义及其在 cpp 文件中的成员函数定义，并且在每个 .cpp 文件中都包含它们各自的文件

在其中一个头文件中包含其他类的头文件。

在主函数文件中包含上一步中前一个类的头文件

2 或将所有内容保存在一个文件中

但是就在类定义之前，例如声明第二个类

类FirstHello；

类 SecondHello { 类 DEF };

类 Firsthello { 类定义 };

# java - 子类不继承所有方法

> ID：16178703
> 
> 赞同：1
> 
> 时间：2013-04-23T20:34:47.983
> 
> 标签：java, class, inheritance, subclass, super

我有一个名为“帐户”的课程：

```
import java.util.Date;

public class Account {

    public int id = 0; //Declare default id as 0
    public double balance = 0; //Declare default balance as 0
    public double annualInterestRate = 0; //Declare default annual interest rate as 0
    public Date dateCreated = new Date(); //Declare date

    //No argument constructor for Account
    public Account() {
    id = 0;
    balance = 0.0;
    annualInterestRate = 0.0;
    }   

    //Constructor that accepts ID, Balance, and Annual Interest Rate
    public Account(int newID, double newBalance, double newAnnualInterestRate) {
    id = newID;
    balance = newBalance;
    annualInterestRate = newAnnualInterestRate;
    }  

    //Get ID
    public int getId() {
        return id;
    }

    //Set ID
    public void setId(int id) {
        this.id = id;
    }

    //Get Balance
    public double getBalance() {
        return balance;
    }

    //Set Balance
    public void setBalance(double balance) {
        this.balance = balance;
    }

    //Get Annual Interest Rate
    public double getAnnualInterestRate() {
        return annualInterestRate;
    }

    //Set Annual Interest Rate
    public void setAnnualInterestRate(double annualInterestRate) {
        this.annualInterestRate = annualInterestRate;
    }

    //Get Date Created
    public Date getDateCreated() {
        return dateCreated;
    }

    //Withdraw method
    double withdraw(double amount) {
    return balance -= amount;
    }

    //Deposit method 
    double deposit(double amount) {
    return balance += amount;
    }

    //Interest rate method
    double getMonthlyInterestRate() {
    return (balance * annualInterestRate) / 12;
   }

} //End Account class 
```

然后我创建了两个不同的子类“PreferredCustomer”和“CommercialCustomer”。这两个类应该继承主“Account”类的所有方法（存款、取款、月利率以及所有 getter 和 setter）。与子类别的唯一区别是它们具有预先确定的利率。

```
public class PreferredCustomer extends Account {

    public double annualInterestRate;

    public PreferredCustomer() {
    }

    public PreferredCustomer(int id, double balance) {
    super();
    this.annualInterestRate = .04;
    }

} //end PreferredCustomer Class 
```

我有一种感觉，我目前的设置方式并不准确。测试时，提款和存款方法有效，但尽管输入了 20,000 美元的起始余额，它仍然将起始余额设置为 0 美元，并且不计算利率。

我正在测试这个类：

```
public class TestingAccountClass {

public static void main(String[] args) {

    //Create accounts
    CommercialCustomer myCommercialCustomerAccount = new CommercialCustomer(1124, 
          20000.00);

   //Invoking deposit method from account class
   myCommercialCustomerAccount.deposit(3000.00);

   //Display account balance, monthly interest, and date created
   System.out.println("\n\n----Commercial Account---");
   System.out.println("Account Created On: "
       + myCommercialCustomerAccount.getDateCreated());
   System.out.printf("Balance: $%.2f", myCommercialCustomerAccount.getBalance());
   System.out.printf("\nMonthly Interest: $%.2f"
       ,myCommercialCustomerAccount.getMonthlyInterestRate()); 
```

当以这种方式测试该类时，deposit 方法有效，但 account 类中的任何其他方法（除了取款）似乎都在工作。任何意见，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T20:38:18.827

你做：

```
CommercialCustomer myCommercialCustomerAccount = new CommercialCustomer(1124, 20000.00); 
```

然而，

```
public PreferredCustomer(int id, double balance) {
    super();
    this.annualInterestRate = .04;
} 
```

你不会对天平做任何事情！

您也许可以将其更改为：

```
public PreferredCustomer(int id, double balance) {
    super();
    this.balance = balance;
    this.annualInterestRate = .04;
} 
```

但是你会写`balance`两次。

此外，让两个具有相同名称的变量（基础 vs 子）-> 是一个坏主意`annualInterestRate`。

编辑 ------------------------------ 编辑

我会推荐这样的东西：

```
public Account() {
    this(0, 0d, 0d);
}  

public Account(int id, double balance, double interestRate) {
    this.id = id;
    this.balance = balance;
    this.annualInterestRate = interestRate;
}   

public PreferredCustomer(int id, double balance) {
    super(id, balance, 0.04d);
} 
```

EDIT2 ------------------------------ EDIT2

这是错误的。你正在做整数除法。

```
return (balance * annualInterestRate) / 12; 
```

改成这样：

```
return (balance * annualInterestRate) / 12d; 
```

或这个：

```
return (balance * annualInterestRate) / 12.0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T20:37:58.800

`PreferredCustomer`没有设置平衡的机制；您忽略了`balance`构造函数参数。您没有直接分配`balance`实例变量，也没有调用超类构造函数。所以余额为0。

在`PreferredCustomer`构造函数中，要么调用设置余额的超类构造函数，要么在构造函数本身中设置它，或者调用`setBalance`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T20:40:16.300

我认为问题出在此处：

```
public PreferredCustomer(int id, double balance) {
    super();
    this.annualInterestRate = .04;
    } 
```

你不应该在 super() 调用中放一些东西吗？（默认值）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-23T20:45:30.377

警报！

首先，您永远不要公开您的非最终成员变量。我差点心脏病发作。

当你输入

```
this.foo 
```

范围继续向上爬上固有树，直到找到可访问的成员。所以 this-->super-->super.super-->super.super.super --... 等等

我可以告诉你如何在语法上解决你的问题，或者告诉你如何做得更好。

我选择后者。

声明一个

```
public abstract double getAnnualInterestRate(); 
```

在你的基类中

然后改变你的 getMonthlyInterestRate 的实现（调用这个新方法）

```
 //Interest rate method
    double getMonthlyInterestRate() {
    return (balance * getAnnualInterestRate()) / 12;
   } 
```

在您的子类中简单地实现这个抽象方法并返回您的利率。

这将允许您以多态方式改变速率并使您的实现面向未来。函数可以做任何事情来产生它们的返回值，其中成员变量只是一些数据，仅此而已

并且，请将您的所有成员变量设为私有

# ruby-on-rails - Rails 有很多和属于

> ID：16178707
> 
> 赞同：0
> 
> 时间：2013-04-23T20:35:00.227
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rubygems

我正在构建一个日常交易应用程序来更好地学习 Ruby on Rails。

在 M. Hartly 教程中，我理解了模型的概念及其关系（一个微博属于_一个用户，一个用户拥有_许多微博）。

但是，我不确定如何在我的日常交易项目中将其付诸实践。

我决定为具有两种不同权限的用户创建一个模型：

*   可以创建/更新/编辑/删除交易的管理员用户

*   可以查看交易的标准用户，如果他们发现一个有趣的人参与交易

两个用户都进入用户数据库

我还决定建立一个交易模型并进入交易数据库所以我理解得很好：

*   一个 admin_user has_many 交易

*   交易属于 admin_user

*   standard_user 有很多交易（他确实可以参与很多交易）

*   并且交易不属于standard_user，所以我不能在这里说什么。

我理解正确了吗？可以根据用户的权限类型定义与模型对象的不同关系（在这种情况下：交易）

PS：我想我会用 cancan gem 将用户分开，以赋予他们不同的权利

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T21:06:01.427

您所描述的最大问题是standard_user `has_many :deals`，但交易不属于standard_user；它们可能同时被许多标准用户使用。这意味着交易不能`belong_to`是标准用户，因为您的交易表中不能有`standard_user_id`列（因为您需要任意多列来处理可能参与的任意多用户）。

为了有这样的多对多关系，您需要一个链接表。这是在 Rails 中实现此目的的一种方法：

```
class DealParticipation < ActiveRecord:Base
  #This means the deal_participations table has a standard_user_id key
  belongs_to :standard_user
  #This means the deal_participations table has a deal_id key
  belongs_to :deal

  #... more logic goes here ...
end 
```

现在您的标准用户看起来像：

```
class StandardUser < ActiveRecord::Base
  has_many :deal_participations
  has_many :deals, :through => :deal_participations
  # ... more logic goes here ...
end 
```

您的交易类别如下所示：

```
class Deal < ActiveRecord::Base
  has_many :deal_participations
  has_many :standard_users, :through => :deal_participations
  belongs_to :admin_user
  #... more logic goes here ...
end 
```

然后，您将需要三个表：一个 for `deals`、一个 for`deal_participations`和一个 for `standard_users`（加上管理员用户的东西）。

根据您的需要，您可能还想尝试使用单表继承 (STI) 来使用户和管理员用户从一个公共基类派生。[您可以在此处](http://api.rubyonrails.org/classes/ActiveRecord/Base.html)阅读有关 STI的更多信息。

我希望这会有所帮助！享受 Rails 入门吧！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T21:15:46.860

假设每笔交易都与单个 admin_user 相关联，那么我认为您的前三个项目符号是正确的。但是，对于第四个项目符号，您可以使用 has_many :through 或 has_and_belongs_to_many 来建模 standard_user 和 deal 之间的关系，如本[Rails 指南](http://guides.rubyonrails.org/association_basics.html)中所述。在后一种情况下，standard_user 与交易的 has_many 关系将更改为 has_and_belongs_to_many。

至于使用 User 子类来定义关系，是的，您可以这样做，但请参阅[http://guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)了解有关此方法的一般讨论。

皮特

# javascript - d3js为条形图创建图例

> ID：16178710
> 
> 赞同：4
> 
> 时间：2013-04-23T20:35:11.620
> 
> 标签：javascript, d3.js, bar-chart, legend

我的条形图有几个问题。当前的问题是试图创建一个图例。图例应为*全局*和*本地*（蓝色和绿色）。目前，图例生成 5 个框 - 其中 2 个是彩色的。我假设它正在遍历我的数据集并为每组列生成框。我不想要这个。

格式化图例后，我希望能够使其具有交互性。因此，如果他们只想查看*global*，则取消选择*local*，图表会动态更新。我知道我需要对其进行调整并创建一个函数来更新数据、域等。

但在开始这条路之前，我想让传奇正确地填充。但是，如果传奇解决方案能沿着这条路走下去，我将不胜感激。

[**我有一个可以玩的小提琴**](http://jsfiddle.net/enigmarm/juY5E/6/)。

数据源

```
var colors =    {0: ["Local", "#377EB8"],
             1: ["Global", "#4DAF4A"]};

var dataset = [
            {"keyword": "payday loans", "global": 1400000, "local": 673000, "cpc": "14.11"},
            {"keyword": "title loans", "global": 165000, "local": 160000, "cpc": "12.53" },
            {"keyword": "personal loans", "global": 550000, "local": 301000, "cpc": "6.14"},
            {"keyword": "online personal loans", "global": 15400, "local": 12900, "cpc": "5.84"},
            {"keyword": "online title loans", "global": 111600, "local": 11500, "cpc": "11.74"}
        ]; 
```

标签代码

```
var legend = svg.append("g")
    .attr("class", "legend")
    //.attr("x", w - 65)
    //.attr("y", 50)
    .attr("height", 100)
    .attr("width", 100)
    .attr('transform', 'translate(-20,50)');

legend.selectAll('rect')
    .data(dataset)
    .enter()
    .append("rect")
    .attr("x", w - 65)
    .attr("y", function(d, i) {
        return i * 20;
    })
    .attr("width", 10)
    .attr("height", 10)
    .style("fill", function(d) {
        var color = colors[dataset.indexOf(d)][1];
        return color;
    });

legend.selectAll('text')
    .data(dataset)
    .enter()
    .append("text")
    .attr("x", w - 52)
    .attr("y", function(d, i) {
        return i * 20 + 9;
    })
    .text(function(d) {
        var text = colors[dataset.indexOf(d)][0];
        return text;
    }); 
```

我知道我的*Colors*数组/对象可能不是最有效的方法。因此，如果它对解决方案有帮助，我愿意调整它。另外，我更喜欢它是一个水平列表而不是垂直列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T21:18:12.877

您需要使用`colors`而不是`dataset`作为`.data()`图例的参数。为了使它工作，`colors`必须是一个数组而不是一个对象：

```
var colors = [ ["Local", "#377EB8"],
               ["Global", "#4DAF4A"] ]; 
```

创建图例的代码就变成了：

```
var legendRect = legend.selectAll('rect').data(colors);

legendRect.enter()
    .append("rect")
    .attr("x", w - 65)
    .attr("width", 10)
    .attr("height", 10);

legendRect
    .attr("y", function(d, i) {
        return i * 20;
    })
    .style("fill", function(d) {
        return d[1];
    });

var legendText = legend.selectAll('text').data(colors);

legendText.enter()
    .append("text")
    .attr("x", w - 52);

legendText
    .attr("y", function(d, i) {
        return i * 20 + 9;
    })
    .text(function(d) {
        return d[0];
    }); 
```

Cf[更新的小提琴](http://jsfiddle.net/juY5E/7/)。

# php - 在 laravel 4 上有 1 个用户的 2 个数据库

> ID：16178720
> 
> 赞同：0
> 
> 时间：2013-04-23T20:35:45.503
> 
> 标签：php, mysql, laravel, laravel-4

我目前在我自己的自定义非 laravel 网站上使用 laravel 3 数据库类，但我在 laravel 4 上重建站点。我有 2 个网站共享包含`product`表的相同数据库，然后每个站点都有自己的数据库用于站点特定表喜欢`orders`。

这是我目前与 laravel 3 数据库类一起使用的内容。

```
/**
* /database/connection.php
* Prepend database names onto tables.
*/
private function prepend_database_names($sql)
{
    $tables = array('product', 'product_brand'); // etc...

    if (is_array($tables))
    {   
        foreach($tables as $table)
        {
            $sql = preg_replace("/`$table`/", 'shared_db.`'.$table.'`', $sql);
        }   
    }

    return $sql;
}

// This is put inside the execute function

protected function execute($sql, $bindings = array())
{
    // other code...

    $sql = $this->prepend_database_names($sql);

    // other code...
} 
```

**我想做类似的事情，但不编辑供应商文件夹中的任何文件。** 除非有人知道更好的方法。

我在这方面的知识不多。也许扩展 L4 数据库类并将共享数据库中的表名列表存储到 L4`config/database.php`文件中？

**编辑：**

下面是一个查询示例。这很好用，因为我`shared.`在产品之前添加了，但我不想每次使用共享数据库中的表时都必须这样做。

```
DB::table('searches')
    ->join('shared.product', 'product.id', '=', 'searches.product_id')
    ->get(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:46:44.423

您可以尝试在 Laravel 3 中运行的 Phill Sparks 的这个[解决方案。](http://forums.laravel.io/viewtopic.php?pid=6386#p6386)

在 Laravel 4 中，您可以在 app/config/database.php 中编辑您的连接

```
// app/config/database.php
'default' => 'first',
'connections' => array(
    'first' => array(
        'driver'   => 'mysql',
        'host'     => 'localhost',
        'database' => 'database1',
        'username' => 'root',
        'password' => '',
        'charset'  => 'utf8',
        'collation' => 'utf8_unicode_ci',
        'prefix'   => '',
    ),
   'second' => array(
        'driver'   => 'mysql',
        'host'     => 'localhost',
        'database' => 'database1',
        'username' => 'root',
        'password' => '',
        'charset'  => 'utf8',
        'collation' => 'utf8_unicode_ci',
        'prefix'   => '',
    ) 
```

# deployment - 尝试使用 leiningen 部署到 Archiva... 失败

> ID：16178721
> 
> 赞同：0
> 
> 时间：2013-04-23T20:35:47.530
> 
> 标签：deployment, clojure, leiningen

我一直在尝试将项目从 leiningen 部署到本地档案实例。

我的 project.clj 设置正确（我认为）

```
 :repositories  ^:replace [["snapshots" {:url  "http://localhost:8080/archiva/repository/snapshots"}]
                 ["releases" {:url "http://localhost:8080/archiva/repository/internal"}]] 
```

当我运行“lein deploy snapshots”时，出现以下错误。没有开始尝试跟踪代码，有人知道这里出了什么问题吗？

```
java.lang.UnsupportedOperationException: nth not supported on this type: Character
    at clojure.lang.RT.nthFrom(RT.java:846)
    at clojure.lang.RT.nth(RT.java:796)
    at leiningen.core.user$resolve_credential.invoke(user.clj:67)
    at clojure.lang.AFn.applyToHelper(AFn.java:167)
    at clojure.lang.AFn.applyTo(AFn.java:151)
    at clojure.core$apply.invoke(core.clj:603)
    at clojure.core$partial$fn__4070.doInvoke(core.clj:2343)
    at clojure.lang.RestFn.invoke(RestFn.java:421)
    at clojure.core.protocols$fn__5888.invoke(protocols.clj:105)
    at clojure.core.protocols$fn__5854$G__5849__5863.invoke(protocols.clj:19)
    at clojure.core.protocols$seq_reduce.invoke(protocols.clj:31)
    at clojure.core.protocols$fn__5879.invoke(protocols.clj:42)
    at clojure.core.protocols$fn__5828$G__5823__5841.invoke(protocols.clj:13)
    at clojure.core$reduce.invoke(core.clj:6030)
    at leiningen.core.user$resolve_credentials.invoke(user.clj:93)
    at leiningen.core.classpath$add_repo_auth.invoke(classpath.clj:85)
    at leiningen.deploy$repo_for.invoke(deploy.clj:40)
    at leiningen.deploy$deploy.invoke(deploy.clj:84)
    at clojure.lang.Var.invoke(Var.java:419)
    at clojure.lang.AFn.applyToHelper(AFn.java:163)
    at clojure.lang.Var.applyTo(Var.java:532)
    at clojure.core$apply.invoke(core.clj:603)
    at leiningen.core.main$resolve_task$fn__1602.doInvoke(main.clj:132)
    at clojure.lang.RestFn.applyTo(RestFn.java:139)
    at clojure.lang.AFunction$1.doInvoke(AFunction.java:29)
    at clojure.lang.RestFn.applyTo(RestFn.java:137)
    at clojure.core$apply.invoke(core.clj:603)
    at leiningen.core.main$apply_task.invoke(main.clj:167)
    at leiningen.core.main$_main$fn__1661.invoke(main.clj:236)
    at leiningen.core.main$_main.doInvoke(main.clj:221)
    at clojure.lang.RestFn.invoke(RestFn.java:421)
    at clojure.lang.Var.invoke(Var.java:419)
    at clojure.lang.AFn.applyToHelper(AFn.java:163)
    at clojure.lang.Var.applyTo(Var.java:532)
    at clojure.core$apply.invoke(core.clj:601)
    at clojure.main$main_opt.invoke(main.clj:324)
    at clojure.main$main.doInvoke(main.clj:427)
    at clojure.lang.RestFn.invoke(RestFn.java:457)
    at clojure.lang.Var.invoke(Var.java:427)
    at clojure.lang.AFn.applyToHelper(AFn.java:172)
    at clojure.lang.Var.applyTo(Var.java:532)
    at clojure.main.main(main.java:37) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:56:20.140

当您尝试将 lein2 :repositoris 格式与 leiningen 1.x 一起使用时，会发生此错误。可能还有其他原因。

对于 lein2，格式为：

```
:repositories [["java.net" "http://download.java.net/maven/2"]
               ["sonatype" {:url "http://oss.sonatype.org/content/repositories/releases"]] 
```

（来自[示例 project.clj](https://github.com/technomancy/leiningen/blob/stable/sample.project.clj)）

对于 lein1，格式为：

```
:repositories {"java.net" "http://download.java.net/maven/2"
               "sonatype" {:url "http://oss.sonatype.org/content/repositories/releases"}} 
```

# jquery - jQuery 从左到右隐藏/显示 div

> ID：16178723
> 
> 赞同：-1
> 
> 时间：2013-04-23T20:35:59.207
> 
> 标签：jquery

所以我一直在寻找一个简单的 jQuery 解决方案来从左到右切换 div 标签的滑动动作。

这是我正在向上/向下滑动的工作：

```
<script type="text/javascript">
    var $x = jQuery.noConflict();
    $x(document).ready(function() {
    // hides the slickbox as soon as the DOM is ready
      $x('#slickbox').hide();

    $x.fn.fadeToggle = function(speed, easing, callback) { 
       return this.animate({opacity: 'toggle'}, speed, easing, callback); 
    }; 
    $x("#slick-toggle").click(function () { 
                    $x("#slickbox").fadeToggle({ 
        speed:200,
        easing : "swing" 
      }) 
    $x(this).text($x(this).text() == 'Show Distributor Filters' ? 'Hide Distributor  Filters' : 'Show Distributor  Filters');
    return false;
            }); 
    });

    </script> 
```

但是当我尝试像下面看到的代码那样使用调整它时，它就不起作用了：

```
<script type="text/javascript">
var $x = jQuery.noConflict();
 $x("#clicky").click(function(){
    if($x("#slide").is(':visible'))
      {
  $x("#slide").animate({ width: 'hide' }); 
      }
      else
      {
        $x("#slide").animate({ width: 'show' }); 
      }
});
</script> 
```

我希望有人能看到我的缺陷......谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T21:11:08.927

作为替代您也可以
尝试这个[JQUERY 上下滑动小部件](http://jqueryui.com/accordion) 非常简单易懂..

# wpf - 清除 ListView：索引超出了数组的范围

> ID：16178724
> 
> 赞同：1
> 
> 时间：2013-04-23T20:36:03.637
> 
> 标签：wpf, vb.net, listview

我在一些应该非常简单的事情上遇到了一些麻烦。I can't clear my list view when there is an item selected.

```
ItemListView.Items.Clear()

For i As Integer = SExp.Length - 1 To 0 Step -1
    Dim MyItem As New ListViewItem
    MyItem.Content = SExp(i).dtDateTime.ToString
    ItemListView.Items.Add(MyItem)
Next

ItemListView.SelectedItem = 0 
```

该代码是按钮调用中代码的一部分——它清除列表视图中的任何内容并使用结构中的日期重新填充列表视图。

It works great when nothing is selected, but I get the "Index was outside the bounds of the array" error when something is selected.

我已经尝试了很多事情，包括使用 for 循环一个接一个地删除 listivew 中的每个项目——当它命中所选项目时出现错误。我也尝试取消选择该项目然后清除，但我也无法做到这一点。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:47:26.857

终于明白了。当我清除列表视图时，我有一个 SelectionChanged 事件正在触发，并且该事件无法处理“-1”的索引（无选择）。由于我在 SelectionChanged 事件中没有断点，因此我没有意识到错误实际上是在那里引发的。

感谢您的建议！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T06:10:12.970

```
ItemListView.SelectedItem = 0 
```

您没有“0”项，您添加了日期时间。将其更改为

```
ItemListView.SelectedIndex = 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T11:52:12.907

尝试一下。

```
DataSource = null;
DataBind(); 
```

# javascript - ApyCom JavaScript jQuery 菜单 - 如何显示当前选择的导航元素？

> ID：16178728
> 
> 赞同：0
> 
> 时间：2013-04-23T20:36:12.700
> 
> 标签：javascript, jquery, html, navigation

我正在使用 ApyCom 的 jQuery 导航菜单。它工作正常，除非当我单击不同的导航元素时，我希望该导航元素保持突出显示以告诉用户他们在哪个页面上。奇怪的是，如果我将`href`实际页面（例如 Contact.aspx）中的值替换为`#`，则所选元素保持突出显示（当然，我无法导航到 Contact.aspx，因为它只有一个`#`）。只有当我用`#`实际页面替换时才会发生这种时髦。这是 Default.aspx 页面的屏幕截图：

![在此处输入图像描述](https://i.stack.imgur.com/0Xduj.jpg)

现在这里是 Contact.aspx 页面的图片（联系我们）：

![在此处输入图像描述](https://i.stack.imgur.com/JahjX.jpg)

请注意，“主页”仍然突出显示。这是我的 Contact.aspx 页面的菜单标记：

```
 <div id="menu">
                <ul class="menu">
                    <li><a href="Default.aspx" class="parent"><span>Home</span></a>
                    </li>
                    <li><a href="#" class="parent"><span>Services</span></a>
                        <div>
                            <ul>
                                <li><a href="#" class="parent"><span>Sub Item 1</span></a>
                                    <div>
                                        <ul>
                                            <li><a href="#"><span>Sub Item 1.1</span></a></li>
                                            <li><a href="#"><span>Sub Item 1.2</span></a></li>
                                        </ul>
                                    </div>
                                </li>
                                <li><a href="#" class="parent"><span>Sub Item 2</span></a>
                                    <div>
                                        <ul>
                                            <li><a href="#"><span>Sub Item 2.1</span></a></li>
                                            <li><a href="#"><span>Sub Item 2.2</span></a></li>
                                        </ul>
                                    </div>
                                </li>
                                <li><a href="#"><span>Sub Item 3</span></a></li>
                                <li><a href="#"><span>Sub Item 4</span></a></li>
                                <li><a href="#"><span>Sub Item 5</span></a></li>
                                <li><a href="#"><span>Sub Item 6</span></a></li>
                                <li><a href="#"><span>Sub Item 7</span></a></li>
                            </ul>
                        </div>
                    </li>
                    <li><a href="About.aspx"><span>About Us</span></a></li>
                    <li class="last"><a href="Contact.aspx"><span>Contact Us</span></a></li>
                </ul>
            </div> 
```

我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:47:54.790

我不得不穿上`class="current"`我的`<li>`物品。这解决了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-21T19:08:32.263

`class="current"`在`<li>`将不起作用。

而不是`class="current"`，您需要放入`class="active"`您的`<li>`部分。

下面是示例：

```
<li class="active"> 
```

# javascript - 在 Javascript 中动态执行 xquery 并将结果存储在 JS 变量中

> ID：16178737
> 
> 赞同：0
> 
> 时间：2013-04-23T20:36:49.687
> 
> 标签：javascript, xml, xquery

这是我想要做的：

**动态执行包含在 Javascript 变量示例中的 XQUERY**

```
var myxquery = For Channels.Channel

where Channel/availability = yes

And Channels.Channel/Label = 'CNN'

Return  EXIST(Channels.Channel/Id)';

var xmltoparse= '<channel>
<available>yes</available>
<label>CNN</label>
</channel>
<channel>
<available>yes</available>
<label>BBC</label>
</channel>' 
```

这意味着`myxquery`对 var xmltoparse 执行 var 并将 xquery 的结果存储在另一个 var 中。

可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T05:22:56.557

如果您正在寻找在例如 web 浏览器中运行 XQuery 客户端，我建议您查看名为 XQIB（浏览器中的 XQuery）的基于 mxquery 的解决方案：

[http://www.xqib.org/](http://www.xqib.org/)

据我所知，它允许从 XQuery 调用 JavaScript 函数，反之亦然。

如果在浏览器中运行 XML 标准客户端的想法吸引您，您可能还对 Saxon-CE 感兴趣：

[http://www.saxonica.com/ce/index.xml](http://www.saxonica.com/ce/index.xml)

根据您实际尝试实现的目标，使用 XForms 对您来说可能也很有趣。它允许在您的页面中保存（XML）数据模型，并应用各种动态评估。有一些客户端实现，其中 XSLTForms 是一个相当不错的实现：

[http://www.agencexml.com/xsltforms](http://www.agencexml.com/xsltforms)

！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T20:46:46.163

是的，通过使用`eval()`. 但这会使您的 Web 服务暴露于注入攻击（这种特定的模式将使它变得非常容易）。这就是为什么通常不推荐它的原因。

但是，如果您仍然需要这样做，您可以创建一个 XQY 端点，该端点将字符串作为参数，然后将该字符串的值传递给`eval()`. 调用的确切方式`eval()`将根据您的 XQuery 处理器而有所不同，因为规范中没有定义它。即：在 eXist 中，它是`util:eval()`; 在 MarkLogic 中是`xdmp:eval()`; 等等

如果您必须使用此模式，则使用一切必要的手段来锁定它：强身份验证、限制执行 . 的用户的能力`eval`，甚至可能在执行之前检查字符串。

# printing - IE8 无法正确打印渲染图形

> ID：16178740
> 
> 赞同：1
> 
> 时间：2013-04-23T20:36:57.803
> 
> 标签：printing, internet-explorer-8

我的团队一直在寻找解决此问题的方法。我们有一个应用程序可以动态创建带有流的图表（图形）。它还在“swinlane”中显示形状，这基本上是由带有边框和背景颜色的 div 包围的对象。一切看起来都很棒。我们遇到的问题是尝试打印此视图时。

我们只是使用现有的 html（变量名 printContent）。我们打开一个单独的窗口并调用 print：

* * *

```
var pw = window.open('', 'View', 'width=900,height=600');
pw.document.open();
pw.document.write('<html><head></head><body>' + printContent + '</body></html>');
pw.document.close();
pw.focus();
pw.print();
pw.close(); 
```

* * *

内容实际上在新窗口中看起来是正确的。打印机打印时，顶部的“swinlane”不显示边框或背景。其余正常。

我们尝试在文件->页面设置中检查“打印背景颜色和图像”，但没有效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T16:55:02.007

我又回到了这个问题。我不确定这是这个问题的确切答案，但它解决了我的问题。

我的任务是让我们的查看器的在线版本可以离线工作。这是我偶然发现一个可能的解决方案的地方。我（认为）部分问题原来是正在呈现的新窗口和自动打开打印功能之间的时间问题。当打印功能打开时，它似乎抓取了渲染到新窗口的内容。

我决定我必须选择：

1.  不要使用打印功能并允许用户使用菜单栏。
2.  我添加了以下代码来使用 setTimeout：

    ```
    var fnTimeout = function () {
        setTimeout(function () {

            if (window.document.readyState == "complete") {
                window.focus();
                window.print();
            }
            else {
                fnTimeout();
            }
        }, 500);
    };

    fnTimeout(); 
    ```

# java - 相机意图，无法将照片保存到外部存储

> ID：16178743
> 
> 赞同：2
> 
> 时间：2013-04-23T20:37:04.827
> 
> 标签：java, android, android-intent, camera

我正在尝试通过 Intent 调用相机并将用户拍摄的照片保存到 SD 卡中。我正在窃取 Google 的大部分代码，但他们保存照片的示例对我不起作用。

这是我到目前为止的代码：

```
public void takePhoto (View view) {
    // create Intent to take a picture and return control to the calling application
    Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);

    fileUri = getOutputMediaFileUri(MEDIA_TYPE_IMAGE); // create a file to save the image
    intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri); // set the image file name

    // start the image capture Intent
    startActivityForResult(intent, CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE);

}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE) {
        if (resultCode == RESULT_OK) {
            if (data!=null) {
            // Image captured and saved to fileUri specified in the Intent
            Toast.makeText(this, "Image saved to:\n" +
                     data.getData(), Toast.LENGTH_LONG).show();
            }
        } else if (resultCode == RESULT_CANCELED) {
            // User cancelled the image capture
        } else {
            // Image capture failed, advise user
        }
    }
} 
```

从那里，按下一个按钮，将用户带到相机，然后他们在那里拍照并确认。确认后，应用程序返回上一个活动，但使用此代码时，没有迹象表明照片已保存在设备上的任何位置：

```
public static final int MEDIA_TYPE_IMAGE = 1;
public static final int MEDIA_TYPE_VIDEO = 2;

/** Create a file Uri for saving an image or video */
private static Uri getOutputMediaFileUri(int type){
      return Uri.fromFile(getOutputMediaFile(type));
}

/** Create a File for saving an image or video */
private static File getOutputMediaFile(int type){
    // To be safe, you should check that the SDCard is mounted
    // using Environment.getExternalStorageState() before doing this.

    File mediaStorageDir = new File(Environment.getExternalStoragePublicDirectory(
              Environment.DIRECTORY_PICTURES), "MyCameraApp");
    // This location works best if you want the created images to be shared
    // between applications and persist after your app has been uninstalled.

    // Create the storage directory if it does not exist
    if (! mediaStorageDir.exists()){
        if (! mediaStorageDir.mkdirs()){
            Log.d("MyCameraApp", "failed to create directory");
            return null;
        }
    }

    // Create a media file name
    String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date(type));
    File mediaFile;
    if (type == MEDIA_TYPE_IMAGE){
        mediaFile = new File(mediaStorageDir.getPath() + File.separator +
        "IMG_"+ timeStamp + ".jpg");
    } else if(type == MEDIA_TYPE_VIDEO) {
        mediaFile = new File(mediaStorageDir.getPath() + File.separator +
        "VID_"+ timeStamp + ".mp4");
    } else {
        return null;
    }

    return mediaFile;
} 
```

我有权编写外部存储，不确定我在这里缺少什么。它是我放置代码的地方吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T22:49:42.660

到目前为止有几点：

1.  你应该从你的`new Date()`句子中删除论点：

    `String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());`或者你最终会在 1970 年代约会

2.  当您像`intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri);`在告诉 Intent 一样调用 Intent 时，您希望文件出现在某个路径上。该代码使

    `if (data!=null) { // Image captured and saved to fileUri specified in the Intent Toast.makeText(this, "Image saved to:\n" + data.getData(), Toast.LENGTH_LONG).show(); }`不必要的（数据将始终为空）。

您的文件是否出现在我们已经在您的日志中看到的路径中还有待观察，但它应该出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T20:58:50.833

您是否设置了以下[AndroidManifest](http://developer.android.com/guide/topics/manifest/manifest-intro.html)权限？

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# java - 不要更新 JTable

> ID：16178747
> 
> 赞同：3
> 
> 时间：2013-04-23T20:37:22.110
> 
> 标签：java, swing, linked-list, jtable, abstracttablemodel

我找到了更新数据的示例，但它使用了 DefaultTableModel。当我创建自己的 TableModel 和自己的数据类时，当我将数据添加到 JTable 中时，它不会更新。

如何向我的 TableModel 添加侦听器？

这是我的代码：

```
package by;
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.util.LinkedList;

import javax.swing.AbstractAction;
import javax.swing.Box;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;
import javax.swing.event.TableModelEvent;
import javax.swing.event.TableModelListener;
import javax.swing.table.AbstractTableModel;
public class DialogEg {
   private static void createAndShowGui() {
      MainWin mainPanel = new MainWin();
      JFrame frame = new JFrame("DialogEg");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }
   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
}
class MainWin extends JPanel {
   private String[] COL_NAMES = { "Last Name", "First Name" };
   //private DefaultTableModel model = new DefaultTableModel(COL_NAMES, 0);
   private MyTableModel model = new MyTableModel();
   private JTextField lastNameField = new JTextField(15);
   private JTextField firstNameField = new JTextField(15);

   public MainWin() {
      final JPanel dataPanel = new JPanel();
      dataPanel.add(new JLabel("Last Name:"));
      dataPanel.add(lastNameField);
      dataPanel.add(Box.createHorizontalStrut(15));
      dataPanel.add(new JLabel("First Name:"));
      dataPanel.add(firstNameField);
      JPanel btnPanel = new JPanel();
      btnPanel.add(new JButton(new AbstractAction("Add Name") {
         @Override
         public void actionPerformed(ActionEvent arg0) {
            lastNameField.setText("");
            firstNameField.setText("");
            int result = JOptionPane.showConfirmDialog(MainWin.this, dataPanel,
                  "Enter Name", JOptionPane.OK_CANCEL_OPTION, JOptionPane.PLAIN_MESSAGE);
            if (result == JOptionPane.OK_OPTION) {
               String lastName = lastNameField.getText();
               String firstName = firstNameField.getText();
               Object[] dataRow = new String[] { lastName, firstName };
               //model.addRow(dataRow);
               Person person = new Person();
               person.setFirstName(firstName);
               person.setLastName(lastName);
               model.addElement(person);
               model.fireTableDataChanged();
            }
         }
      }));
      setLayout(new BorderLayout());
      JTable jtable = new JTable(model);
      //new JTable(model)
      jtable.setModel(model);
      add(new JScrollPane(jtable), BorderLayout.CENTER);
      add(btnPanel, BorderLayout.SOUTH);
   }
}
class MyTableModel extends AbstractTableModel {
    private String[] columnNames = {
            "Last name",
            "First name"
    };
    //private LinkedList<Person> data = new LinkedList<Person>();
    private LinkedList<Person> data = new LinkedList<Person>();
    public int getColumnCount() {
        return columnNames.length;
    }
    public int getRowCount() {
        return data.size();
    }
    public String getColumnName(int col) {
        return columnNames[col];
    }
    public Object getValueAt(int row,int col) {
        switch(col) {
        case 0: {
            return data.get(col).getLastName();
        }
        case 1: {
            return data.get(col).getFirstName();
        }
        default:
            return "";
        }
    }
    public void addElement(Person person) {
        data.add(person);
    }
    public void fireTableDataChanged() {

    }
}
class Person {
    String last_name;
    String first_name;
    public Person() {
    }
    public void setLastName(String l_name) {
        last_name = l_name;
    }
    public void setFirstName(String f_name) {
        first_name = f_name;
    }
    public String getLastName() {
        return last_name;
    }
    public String getFirstName() {
        return first_name;
    }
} 
```

**编辑2**

这里我使用方法addElement：

```
 public void actionPerformed(ActionEvent arg0) {
    lastNameField.setText("");
    firstNameField.setText("");
    int result = JOptionPane.showConfirmDialog(MainWin.this, dataPanel,
          "Enter Name", JOptionPane.OK_CANCEL_OPTION, JOptionPane.PLAIN_MESSAGE);
    if (result == JOptionPane.OK_OPTION) {
       String lastName = lastNameField.getText();
       String firstName = firstNameField.getText();

       Person person = new Person();
       person.setFirstName(firstName);
       person.setLastName(lastName);
       //here i use add element 
       model.addElement(person);
    }
 } 
```

有我的表模型：

```
class MyTableModel extends AbstractTableModel {
    private String[] columnNames = {
            "Last name",
            "First name"
    };
    //private LinkedList<Person> data = new LinkedList<Person>();
    private LinkedList<Person> data = new LinkedList<Person>();
    public int getColumnCount() {
        return columnNames.length;
    }
    public int getRowCount() {
        return data.size();
    }
    public String getColumnName(int col) {
        return columnNames[col];
    }
    public Object getValueAt(int row,int col) {
        switch(col) {
        case 0: {
            return data.get(col).getLastName();
        }
        case 1: {
            return data.get(col).getFirstName();
        }
        default:
            return "";
        }
    }

    public void addElement(Person person) {
        int firstRow = data.size() - 1;
        int lastRow = firstRow;
        fireTableRowsInserted(firstRow, lastRow);
    }
} 
```

当我添加任何信息时，它没有更新。我必须把这个方法放在jtable中进行正确的数据更新吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T20:41:43.727

你正在做两件非常危险的事情：

*   您正在覆盖`fireTableDataChanged()`并给它一个空的方法体，从而绕过了超级方法包含的所有魔法，并使其本质上是一个毫无价值的方法，
*   并且您`fireXXXChanged()`在更改模型数据后不会调用任何方法。

我建议你做完全相反的事情：

*   不要覆盖`fireTableDataChanged()`
*   `fireXXX()`更改数据时调用方法。

例如：

```
public void addElement(Person person) {
   data.add(person);
   int firstRow = data.size() - 1;
   int lastRow = firstRow;
   fireTableRowsInserted(firstRow, lastRow);
}

// public void fireTableDataChanged() {
//
// } 
```

顺便说一句：为什么要向 JTable 或其 TableModel 添加侦听器？

**编辑 2**
你说：

> 我认为我必须实现其中一种 firexxx 方法。

您的类扩展 AbstractTableModel 类而不是实现 TableModel 接口的原因是为了获得 AbstractTableModel 类必须提供的所有好处，包括它的`fireXXX(...)`方法。它们已经连接以通知任何使用该模型的 JTables 数据已更改。如果您覆盖它们，特别是如果您覆盖它们并且不调用任何超级方法，那么您已经破坏了这个有用的代码，它将不再起作用。

> 至于 LinkedList，我想尝试使用另一个集合（在所有示例中都没有数组）。

由于您通常希望以随机方式访问数据，因此我认为您会从 ArrayList 中获得更多收益。无论如何，collection 变量可能应该是 List 接口类型，以便您可以根据需要更改 collection 对象的数据类型。

> 我不明白为什么当我使用你的实现时它不起作用。

如果您说某事“不起作用”并且您没有解释它如何或为什么不起作用，您可能会看到什么错误，并且没有显示您的代码实现，您会束缚我们的手并阻止我们能够为您提供帮助有效。如果您需要我们的帮助，请考虑向我们提供足够的信息，以便我们了解您的问题。这将包括向我们展示对您的代码所做的任何更改、显示任何编译错误或异常消息，以及详细描述您的问题的细节。

**编辑 3**
在您最近的代码迭代中，您的 addElement 方法执行所有操作，但*添加一个元素*！

```
public void addElement(Person person) {
    int firstRow = data.size() - 1;
    int lastRow = firstRow;
    fireTableRowsInserted(firstRow, lastRow);
} 
```

在上面的方法中，您没有向 LinkedList 添加任何内容！

# c# - 无法访问 Chrome

> ID：16178753
> 
> 赞同：4
> 
> 时间：2013-04-23T20:37:38.517
> 
> 标签：c#, google-chrome, selenium

运行单元测试时，我收到以下错误消息。谁能告诉我是什么原因造成的以及如何解决？

> 错误：无法访问 chrome
> 
> （驱动程序信息：> chromedriver=0.7,platform=Windows NT 6.1 x86）（警告：服务器未提供任何堆栈跟踪信息）
> 
> 命令持续时间或超时：21.58 秒

# c++ - 'if' 带有模板参数或 SFINAE 是首选？

> ID：16178756
> 
> 赞同：23
> 
> 时间：2013-04-23T20:37:40.943
> 
> 标签：c++, templates, c++11, sfinae

首选是这样的：

```
template<typename T>
bool isNotZero(const T &a)
{
    if (std::is_floating_point<T>::value) return abs(a) > std::numeric_limits<T>::epsilon();
    else return a;
} 
```

或这个：？

```
template<typename T>
std::enable_if<std::is_floating_point<T>::value, bool>::type
isNotZero(const T &a) { return abs(a) > std::numeric_limits<T>::epsilon(); }

template<typename T>
std::enable_if<std::is_integral<T>::value, bool>::type
isNotZero(const T &a) { return a; } 
```

我通常使用第一种类型来避免许多版本的功能。

我相信它是完全一样的。

第一个版本在操作码阶段优化，第二个版本在模板实例化阶段。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-23T20:50:32.877

> 我相信它是完全一样的。

我不会说*完全*一样。

在第一个版本中，您使用的是**在运行时**评估的条件语句，但决定执行哪个分支的条件可以（并且是）**在编译时**决定。

因此，无论输入的类型是什么，您的两个分支都必须编译并且将被编译，即使我们在编译时知道其中只有一个会被执行而另一个会死 - 我希望编译器会在这里发出警告。

**在第二种情况下，您只编译**（当然，执行）**适合 input 类型的内容**。在我看来，这使得第二种方法更胜一筹。

现在，即使在这种特殊情况下，您选择哪种方法可能没有区别，由编译时条件决定的条件执行应该通过编译时构造来表示 - SFINAE 和模板重载，而`if`应该用于条件这取决于系统的运行时状态。

例如，如果条件的两个分支包含仅在执行相应分支时才编译的代码，则第一种方法是不可能的。考虑这两种类型：

```
struct X
{
    X(int) { }
};

struct Y
{
    Y() { }
}; 
```

以及以下功能模板：

```
template<typename T>
T foo(const T &a)
{
    if (std::is_constructible<T, int>::value)
    {
        return T(42);
    }
    else
    {
        return T();
    }
} 
```

现在以下调用都不合法：

```
foo(X()); // ERROR! X is not default-constructible
foo(Y()); // ERROR! Y is not constructible from an int 
```

仅此一项就表明，一般来说，**处理编译时条件执行的适当工具是模板重载 + SFINAE**（或可能涉及类模板特化的等效结构）。

当然，有一些*退化*的案例（比如这个）允许你使用其他工具，但是如果我们正在寻找概念上正确的设计指南，我相信这里有一个明显的赢家。

如果 C++ 中存在类似的东西，事情当然会有所不同[**`static if`**](http://channel9.msdn.com/Events/GoingNative/GoingNative-2012/Static-If-I-Had-a-Hammer)，但目前情况并非如此——甚至在不久的将来似乎也不会。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T20:55:13.927

目前，我更喜欢使用 SFINAE。使用 SFINAE 不需要任何优化，因为您明确允许根据情况仅调用其中一个函数。没有优化可以简单地执行，因为将在运行时调用适当的函数而无需做出决定。

使用`if`条件语句使程序有责任在运行时做出决定。当然，这*可以*优化掉，但可能不会。无论针对特定模板参数实际执行哪个分支，都可能导致编译两个分支。这意味着对于任何给定的模板参数，每个分支中的代码必须在语法和语义上正确。

也许有一天我们会有一个[`static if`](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3329.pdf)，它可以让你把`if`语句写成编译时条件，但目前对此有一些[强烈的感受](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3613.pdf)：

> 最近为 C++ 提出的`static if`特性从根本上来说是有缺陷的，它的采用对于该语言来说将是一场灾难。

但是，在不久的将来（目标是围绕 C++14 发布）我们可能会遇到一些[限制](http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2013/n3580.pdf)（又名概念精简版），这将允许您编写如下函数：

```
template<Floating_point T>
bool isNotZero(const T &a) { return abs(a) > std::numeric_limits<T>::epsilon(); }

template<Integral T>
bool isNotZero(const T &a) { return a; } 
```

这相当于写：

```
template<typename T>
  requires Floating_point<T>()
bool isNotZero(const T &a) { return abs(a) > std::numeric_limits<T>::epsilon(); }

template<typename T>
  requires Integral<T>()
bool isNotZero(const T &a) { return a; } 
```

`Floating_point`and`Integral`约束只是其模板参数的`constexpr`谓词，在编译时检查并参与重载决议。这将是编写这样一组函数的首选方式。

# java - RegEx - 如何仅在有其他字符时才允许空格

> ID：16178759
> 
> 赞同：0
> 
> 时间：2013-04-23T20:37:48.713
> 
> 标签：java, regex

我有以下正则表达式：

`(\\+)([\\w\\d]+)(=)(.+)`

这应该允许：

+[字符][数字]=[全部]

第二部分（在“=”之后）不应允许存在空白字符，除非有数字或单词字符。

我似乎无法做到这一点。如何构建这样的 RegEx。

编辑：

以下是有效示例：

```
+Valid123=Valid123
+123Valid=Valid 123
+Valid=This is Valid 14
+Valid=(This is Valid) 
```

我的问题是如何避免这种情况：

无效=空格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T21:01:55.617

1.  `\w`代表“单词字符”，通常`[A-Za-z0-9_]`你不需要`\d`在你的类中添加。
2.  > ...不允许出现空白字符，除非有数字或单词字符。

    尝试这种方式 ...= `(\\s*\\w+)+`, ->`\\s*\\w+`将只接受具有`zero or more whitespaces at start`和`1 or more characters at end`喜欢的字符串`"a"`, `" ab"`, `" c"`. `(\\s*\\w+)+`将使正则表达式接受 1 个或多个此类令牌。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T21:23:11.293

以下正则表达式应该适合您：

```
^(\\+)(\\w+)(=)(\\s*\\S+\\s*)+$ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T20:48:13.977

试试这个：`^\+[\w\d]+=(\S+.*)$`。

这与您的第一部分匹配，但关键在 . 之后的部分`=`。它需要至少一个非空格后跟任何内容（允许在非空格的初始匹配后使用空格），因此`+word123= testing`会在`+word123=testing 123`通过的地方失败。如果第一个字符。之后`=`是空格，是不允许的。如果第一个字符。不是空格，它应该在事后允许空格和其他任何东西。

如果您需要更改 之后的初始单词/数字/等之后的`=`内容，您只需在 a 中插入一组更复杂的规则来`()`代替`.`in `(\S+.*)`。

测试可以在[这里](http://rubular.com/r/w2FcroyIGl)看到。您可能需要稍微调整一下（转义 java 斜杠等）。

# ruby - Ruby：用反斜杠解析字符串

> ID：16178760
> 
> 赞同：0
> 
> 时间：2013-04-23T20:37:50.963
> 
> 标签：ruby, ruby-on-rails-3

```
string = "{:name=>\"2012 Honda Civic EX-L\", :price=>\"23100\", :dealer_name=>\"T AND T HOND\", :dealer_website=>\"http://autocatch.com/dealer/t-and-t-honda/index.htm\", :phone=>\"(888) 364-1858\", :ad=>\"1167269\", :stock=>\" 2120054N\", :year=>\"2012\", :make=>\"Honda\", :model=>\"Model Civic\", :trim=>\"EXL\", :mileage=>\"4629\", :body_style=>\"Coupe\", :transmission=>\"Automatic\", :ext_colour=>\"White\", :int_colour=>\"Grey\", :doors=>\"2Door\", :passengers=>\"Passengers \", :drive_train=>\"Front Wheel Drive\", :engine=>\"1.80\", :cylinders=>\"4Cylinder\", :fuel_type=>\"Type Gas\", :certified=>\"\", :e_tested=>\"\"}\n" 
```

我该如何解析它？它一直给我错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:44:32.590

使用**ruby​​-2.0.0-p0**：

```
string = "{:name=>\"2012 Honda Civic EX-L\", :price=>\"23100\", :dealer_name=>\"T AND T HOND\", :dealer_website=>\"http://autocatch.com/dealer/t-and-t-honda/index.htm\", :phone=>\"(888) 364-1858\", :ad=>\"1167269\", :stock=>\" 2120054N\", :year=>\"2012\", :make=>\"Honda\", :model=>\"Model Civic\", :trim=>\"EXL\", :mileage=>\"4629\", :body_style=>\"Coupe\", :transmission=>\"Automatic\", :ext_colour=>\"White\", :int_colour=>\"Grey\", :doors=>\"2Door\", :passengers=>\"Passengers \", :drive_train=>\"Front Wheel Drive\", :engine=>\"1.80\", :cylinders=>\"4Cylinder\", :fuel_type=>\"Type Gas\", :certified=>\"\", :e_tested=>\"\"}\n"
hash = eval(string)
hash[:name] # => "2012 Honda Civic EX-L" 
```

你到底得到了什么错误？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T20:39:16.760

反斜杠只是转义引号；它们实际上不在*字符串*中。至于`eval`解析它，如果它来自受信任的来源，请使用并让 Ruby 解析它。

# ios - 提升 UIToolbar 上的图标

> ID：16178764
> 
> 赞同：0
> 
> 时间：2013-04-23T20:37:57.383
> 
> 标签：ios, objective-c, cocoa-touch, uitoolbar

`UIToolbar`s 通常将它们的图标垂直居中。我想让他们的图标部分在栏外。看图片：

![在此处输入图像描述](https://i.stack.imgur.com/oXfSc.png)

是否可以控制按钮 Y 位置，覆盖`UIToolbar`默认位置？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T00:20:22.333

如果要使用`UIToolbar`不能`UIButton`直接加s，必须用`UIBarButtonItem`s。

为什么不只是将 a`UIView`作为按钮的容器，然后在按钮后面添加背景图像或另一个带有绿色的视图？

# javascript - 如何重新使用变量

> ID：16178773
> 
> 赞同：1
> 
> 时间：2013-04-23T20:38:28.480
> 
> 标签：javascript, jquery

我对 Jquery 和 Javascript 很陌生。我尝试在网站上搜索我的问题的答案，但我不确定我是否使用正确的术语来找到我的答案。如果已经有答案，我将不胜感激该链接，以便我查看它。

我的问题：我正在使用 HTML、CSS、Jquery 和 Javascript 构建一个移动应用程序。这是一款交互式 CYOA 类型的游戏/应用程序。我使用以下函数让玩家输入他们的名字：

```
<script> //to get player's name and use through out the game
function playerName ()
{
    var x;
    var player=prompt("Please enter your name");
if (player!=null)
    {
    x= " " + player + ", Please wait while the system updates your work orders";
    document.getElementById("logon").innerHTML=x;
    }
}
</script> 
```

我想要做的是能够在整个游戏中放置用户的名字。但是我不确定一旦玩家最初在提示框中输入了他们的名字，我该怎么做。

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T20:43:56.583

为您的整个应用程序创建一个全局命名空间，并在其中放置任何相关值。

```
var MyApp = {};

MyApp.playerName = function () {
    var x;
    MyApp.player=prompt("Please enter your name");
    if (MyApp.player!=null) {
        x= " " + MyApp.player + ", Please wait while the system updates your work orders";
        document.getElementById("logon").innerHTML=x;
    }
} 
```

您需要更改对`playerName()`to的调用`MyApp.playerName()`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T20:41:53.613

我建议像下面这样简单，只要`player`变量是在任何函数之外定义的（这里是，因为值是从函数返回的）它将具有全局范围（您也可以通过省略`var`关键字，这使得变量全局作用域*而不管它*是在哪里定义的）：

```
function playerName(){
    var name = prompt('What is your name?'),
        x;
    if (player) {
        x = " " + name + ", Please wait while the system updates your work orders";
        document.getElementById("logon").innerHTML=x;
    }
    return name;
}
var player = playerName; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T20:40:09.527

我关闭建议这一点，但你可以使`player`变量全局。

```
var player;

function playerName () {
    var x;
    player=prompt("Please enter your name");
    if (player!=null) {
        x= " " + player + ", Please wait while the system updates your work orders";
        document.getElementById("logon").innerHTML=x;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T20:42:03.743

您可以通过这样的范围界定它来避免使其成为全球性的：

```
(function() {
    var player;
    function playerName ()
    {
        var x;
        player=prompt("Please enter your name");
        if (player!=null)
        {
            x = " " + player + ", Please wait while the system updates your work orders";
            document.getElementById("logon").innerHTML=x;
        }
    }   
})(); 
```

现在，您在最外层函数声明（但不是全局）内编写的任何代码都可以访问 player 变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T20:44:18.213

在窗口级别定义全局变量通常是在 jQuery 中执行此操作的方法 - 在本例中为“window.player”。虽然从技术上讲，您可以通过简单地省略“var”来使其全局化，但不建议这样做。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-23T20:51:13.143

为了在其他函数和您的脚本中使用变量 x，您可以将其设为全局变量，要在函数内部创建变量全局变量，您可以尝试以下操作：

```
<script>
function foo() {
    window.newGlobalVariable = 'moo';
}
</script> 
```

例如在您的代码中：

```
<script> //to get player's name and use through out the game
function playerName (){

    widnow.x;
    widnow.player=prompt("Please enter your name");
   if (player!=null){
       x= " " + player + ", Please wait while the system updates your work orders";
       document.getElementById("logon").innerHTML=x;
   }
}
</script> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-23T20:41:47.683

在函数外部创建一个 gloval 变量：

```
var player=''; 
```

然后你可以从一个函数中设置它：

```
function myFunction(){ player='new name'; } 
```

或阅读：

```
function myOtherFunction(){ console.log(player) } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-23T20:42:45.297

您面临的是[变量范围](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals#Variable_scope)。变量仅在`{}`声明它的块中可见（想想大括号）。

但是，您也可以访问已经在外部范围内的其他变量，例如`window`. 举个例子：

```
alert(foo); // undeclared
alert(window.bar); // undeclared--so far...

function foo(){
  var foo = "foo";
  window.bar = "bar";

  alert(foo); // works -- "foo";
  alert(window.bar); works -- "bar";
}

alert(foo); // undeclared
alert(window.bar); // undeclared (still, haven't called foo() yet)

foo();
alert(window.bar); // "bar" (now it works) 
```

这也适用于函数名称和您可能拥有的任何其他类型的引用，但是，在这种情况下，您可以从函数返回一个值并避免使用全局变量。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-23T20:48:00.170

`player`也许制作一个对象就足够了，如下所示：

```
var player = {}; 
```

将它放在您的应用程序中，在任何其他功能之外。然后，当您需要在播放器上设置一个值时，例如，他/她的名字，将其放入函数中：

```
player.name = prompt("Please enter your name"); 
```

这样，您就可以访问这些数据，但您不必使用全局变量，这些变量是在没有`var`关键字的情况下创建的，并且被广泛认为是非常糟糕的形式。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2013-04-23T20:54:37.253

另一种解决方案（当然不是最好的）是创建`playerName`函数的属性。这会在不污染全局范围的情况下公开它。只是在 JS 中演示函数作为对象的功能。

```
function playerName ()
{
    var x;
    var player=prompt("Please enter your name");
    if (player!=null)
    {
        x= " " + player + ", Please wait while the system updates your work orders";
        document.getElementById("logon").innerHTML=x;
    }
    playerName.player = player;
} 
```

# c# - 通用转换问题

> ID：16178774
> 
> 赞同：1
> 
> 时间：2013-04-23T20:38:34.753
> 
> 标签：c#, design-patterns, generics

我正在尝试设计一种模式来协调多个操作。每个操作都会接受一个参数并传递一个结果。该结果可能会或可能不会被以下操作使用。**这是设计的简化版本**，但是如果您将其复制/粘贴到控制台项目上，它将“工作”（有一个我无法修复的编译错误）。

**错误**

> 类型“ConsoleApplication1.InternalDebit”不能用作泛型类型或方法“ConsoleApplication1.Orchestrator.Add(T1)”中的类型参数“T1”。没有从“ConsoleApplication1.InternalDebit”到“ConsoleApplication1.Operation”的隐式引用转换。c:\projects\BCP\BaseMvc\ConsoleApplication1\ConsoleApplication1\Program.cs 17 13 ConsoleApplication1

```
namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            var internalDebit = new InternalDebit<InternalDebitParameter, InterbankCreditParameter>(new InternalDebitParameter() { Id = 1 });

            var orchestrator = new Orchestrator();

            // error here!
            orchestrator.Add(internalDebit);
        }
    }

    public interface IParameter
    {
    }

    public interface IResult
    {
    }

    public interface IReversible
    {
        void Reverse();
    }

    public interface IOperation<T, R>
        where T : class, IParameter
        where R : class, IResult
    {
        Type ParameterType { get; }

        Type ResultType { get; }

        T Parameter { get; set; }

        R Execute(T parameter);
    }

    public abstract class Operation<T, R> : IOperation<T, R>
        where T : class, IParameter
        where R : class, IResult
    {
        public virtual R Execute(T parameter)
        {
            this.Parameter = parameter;
            return default(R);
        }

        public Type ParameterType
        {
            get { return typeof(T); }
        }

        public Type ResultType
        {
            get { return typeof(R); }
        }

        public T Parameter { get; set; }

        public Operation(T parameter)
        {
            this.Parameter = parameter;
        }
    }

    public class InternalDebitParameter : IParameter
    {
        public int Id { get; set; }
    }

    public class InterbankCreditParameter : IParameter, IResult
    {
        public int Id { get; set; }
    }

    public class InternalDebit<T, R> : Operation<T, R>
        where T : class, IParameter
        where R : class, IResult
    {
        public InternalDebit(T parameter)
            : base(parameter)
        {
        }

        public override R Execute(T parameter)
        {
            return new InterbankCreditParameter() { Id = 2 } as R;
        }
    }

    public class Orchestrator
    {
        public List<Operation<IParameter, IResult>> Operations { get; private set; }

        public List<IParameter> Parameters { get; private set; }

        public void Add<T1>(T1 t) where T1 : Operation<IParameter, IResult>
        {
            this.Operations.Add(t);
        }

        public void SetUpParameters(params IParameter[] parameters)
        {
            this.Parameters = new List<IParameter>();

            parameters.ToList().ForEach(s => this.Parameters.Add(s));
        }

        public void Play()
        {
            IParameter generalResult = null;

            foreach (var instrument in this.Operations)
            {
                var parameter = this.Parameters.FirstOrDefault(s => s.GetType() == instrument.ParameterType);

                if (parameter == null)
                {
                    IResult actualResult = null;

                    if (generalResult != null)
                    {
                        try
                        {
                            actualResult = instrument.Execute(generalResult);
                        }
                        catch (Exception ex)
                        {
                            if (instrument is IReversible)
                                ((IReversible)instrument).Reverse();
                            else
                                throw;
                            break;
                        }
                        finally
                        {
                            if (actualResult is IParameter)
                                generalResult = (IParameter)actualResult;
                        }
                    }
                    else
                    {
                        throw new Exception("Orchetrator missconfiguration.");
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:54:49.073

您将泛型带入 C++ 模板功能的范围太广了。在给出错误的行上，您正在隐式创建函数：

```
 public void Add(InternalDebit<InternalDebitParameter, InterbankCreditParameter>); 
```

正如声明的那样，这个类继承自：

```
 Operation<InternalDebitParameter, InterbankCreditParameter> 
```

然而，通用要求指出 T1 应该是 type `Operation<IParameter, IResult>`，但事实并非如此，即使两个参数都从正确的类型继承，因为不允许多态性。

您在这里尝试实现的目标对于泛型（实际上是 C++ 中的模板）本质上是不可能的，因为您指定的方式太多，并且指定了永远无法满足的继承要求。您需要记住，泛型在某种程度上只是用少量代码编写许多类的一种奢侈的简写方式，它们不会突然引入递归多态性。

长话短说，重写代码以使用继承和基类，而不是依赖泛型。我怀疑您的整个模式在没有单一泛型的情况下是可能的，并且类型安全。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T11:10:08.123

如果你玩一点协方差/逆变，你可能会做一些类似于你所追求的事情。或者无论如何，编译器会更准确地告诉您您尝试执行的操作不是类型安全的。

**第一步**：您收到的错误表明`There is no implicit reference conversion from 'InternalDebit<InternalDebitParameter,InterbankCreditParameter>' to 'Operation<IParameter,IResult>'`.

因此，自从`InternalDebit`implements以来`IOperation`，您可以做的第一件事就是使`IOperation`协变，尝试将其定义为：

```
public interface IOperation<out T, out R> 
```

这意味着 type 的变量`IOperation<IParameter,IResult>`会很乐意接受 type 的值`Operation<InternalDebitParameter,InterbankCreditParameter>`，这更接近您想要的值。然后，您`Add`的方法签名将被限制`IOperation`为`Operation`

```
public void Add<T1>(T1 t) where T1 : IOperation<IParameter, IResult> 
```

编译器告诉我们出了点问题：

```
Invalid variance: The type parameter 'T' must be invariantly valid on 'IOperation<T,R>.Parameter'. 'T' is covariant.

Invalid variance: The type parameter 'T' must be contravariantly valid on 'IOperation<T,R>.Execute(T)'. 'T' is covariant. 
```

这是为什么这段代码不健全的第一个迹象。协变参数只能在函数的“出路”（即作为返回类型）中使用，而不能作为“入”参数。

**第二步**使 IOperation 协变。这可能会很痛苦，并且会更改您的代码，因为这意味着将 Execute 更改为不接受 T 类型的参数。

```
public interface IOperation<out T, out R>
    where T : class, IParameter
    where R : class, IResult
{
    Type ParameterType { get; }

    Type ResultType { get; }

    T Parameter { get; /*set;*/ } //can't allow the interface to set T 

    // R Execute(T parameter); // can't have an Execute with T as a parameter
    R Execute(); // you can however inject T in the constructor of the
                 // inherited class and call Execute without parameters    
} 
```

**第三步**你现在得到一个新的错误：

```
The best overloaded method match for 'System.Collections.Generic.List<Operation<IParameter,IResult>>.Add(Operation<IParameter,IResult>)' has some invalid arguments 
```

这又是一个协方差问题。列表不是协变的，您不能将 t 添加到列表中。我真的不知道该建议什么，因为我不想完全改变你的代码的意图（特别是因为我不能说我完全理解它......）你可能会在这个答案中找到一些有用的东西，因为实例：

[协方差和 IList](https://stackoverflow.com/questions/5832094/covariance-and-ilist)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T15:56:09.490

好的，为了这篇文章的完整性，我将向您展示我最终是如何使这个工作的。它可以更好，我仍然愿意接受建议。不幸的是，我不得不从这项任务中继续前进，它已经被推迟了。

**[我将发布并编辑此答案，以便在代码审查](https://codereview.stackexchange.com/)**网站上跟进。

在控制台应用程序中复制/粘贴，这是一个功能齐全的代码示例。

```
class Program
    {
        static void Main(string[] args)
        {
            var transferenceInfo = new InterbankTranferenceInfo();

            var orchestrator = new Orchestrator(new InternalDebitOperation(transferenceInfo),
                                                new InterbankCreditOperation(),
                                                new CommissionOperation());

            orchestrator.Run();
        }
    }

    public class InterbankTranferenceInfo : IParameter
    {
        public bool InternalDebitDone { get; set; }

        public bool InterbankCreditDone { get; set; }

        public bool CommissionDone { get; set; }
    }

    public class InternalDebitOperation : Operation<InterbankTranferenceInfo>, IOperation<InterbankTranferenceInfo>
    {
        public InternalDebitOperation(InterbankTranferenceInfo parameter)
            : base(parameter)
        {
        }

        public override InterbankTranferenceInfo Execute()
        {
            return new InterbankTranferenceInfo() { InternalDebitDone = true };
        }
    }

    public class InterbankCreditOperation : Operation<InterbankTranferenceInfo>, IOperation<InterbankTranferenceInfo>
    {
        public override InterbankTranferenceInfo Execute()
        {
            Parameter.InterbankCreditDone = true;

            return Parameter;
        }
    }

    public class CommissionOperation : Operation<InterbankTranferenceInfo>, IReversible, IOperation<InterbankTranferenceInfo>
    {
        public override InterbankTranferenceInfo Execute()
        {
            Parameter.CommissionDone = true;

            // Uncomment this code to test Reverse operation.
            // throw new Exception("Test exception, it should trigger Reverse() method.");

            return Parameter;
        }

        public void Reverse()
        {
            Parameter.CommissionDone = false;
        }
    }

    public enum OperationStatus
    {
        Done,
        Pending,
        Reversed
    }

    public interface IParameter
    {
    }

    public interface IReversible
    {
        void Reverse();
    }

    public interface IOperation<out T> : IInternalOperation<T>  where T : IParameter
    {
    }

    public interface IInternalOperation<out T> : IExecutableOperation<T>
    {
        bool GetParameterFromParentOperation { get; }

        OperationStatus Status { get; set; }

        IParameter Execute(IParameter parameter);      
    }

    public interface IExecutableOperation<out T>
    {
        T Execute();
    }

    //[System.Diagnostics.DebuggerStepThroughAttribute()]
    public abstract class Operation<T> : IInternalOperation<T> where T : IParameter
    {
        public T Parameter { get; private set; }

        public bool GetParameterFromParentOperation { get { return this.Parameter == null; } }

        public OperationStatus Status { get; set; }

        public Operation()
        {
            Status = OperationStatus.Pending;
        }

        public Operation(IParameter parameter)
        {
            Status = OperationStatus.Pending;
            this.Parameter = (T)parameter;
        }

        public abstract T Execute();

        public virtual IParameter Execute(IParameter parameter)
        {
            this.Parameter = (T)parameter;
            return this.Execute();
        }
    }

    public class Orchestrator
    {
        public List<IOperation<IParameter>> Operations { get; private set; }

        public Orchestrator(params IOperation<IParameter>[] operations) 
        {
            this.Operations = new List<IOperation<IParameter>>();

            foreach (var item in operations)
            {
                this.Operations.Add((IOperation<IParameter>)item);
            }
        }

        public IParameter Run()
        {
            IParameter previousOperationResult = null;

            foreach (var operation in this.Operations)
            {
                try
                {
                    if (operation.GetParameterFromParentOperation)
                        previousOperationResult = operation.Execute(previousOperationResult);
                    else
                        previousOperationResult = operation.Execute();

                    operation.Status = OperationStatus.Done;
                }
                catch (Exception)
                {
                    foreach (var o in this.Operations)
                    {
                        if (o is IReversible)
                        {
                            ((IReversible)o).Reverse();
                            o.Status = OperationStatus.Reversed;
                        }
                        else
                            throw;
                    }
                    break;
                }
            }

            return previousOperationResult;
        }
    } 
```

* * *

## 编辑

**[代码审查帖子](https://codereview.stackexchange.com/questions/25435/sequential-execution-orchestrator-pattern)**

# android - TextView Marquee 未显示“..”

> ID：16178776
> 
> 赞同：0
> 
> 时间：2013-04-23T20:38:49.837
> 
> 标签：android, textview, size, marquee

我已经尝试了很多解决方案，maxLine、maxLenght、marqueeAlwaysShowing、带选框的椭圆形..可聚焦的东西..我不能让它工作。

我删除了所有额外的 XML 以使其正常工作，这就是我所拥有的：

```
 <LinearLayout
        android:id="@+id/promptDefine"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/counterDefinitionName"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:clickable="true"
            android:onClick="nameCounting"
            android:text="@string/nameIt"
            android:textColor="@color/count_item_to_be_defined"

         />

    </LinearLayout> 
```

那么，我应该在 textview 中添加什么以将文本限制为 10 个字符？但如果它们更多，只需在末尾插入“...”。我已经尝试过一些事情，例如：

```
 android:singleLine="true"
    android:ellipsize="marquee" 
    android:marqueeRepeatLimit="marquee_forever" 
```

并没有工作，提前谢谢！

**编辑：**

也许它的 Clickable 特性属性搞砸了这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T21:06:59.770

这三个点仅在 textView 没有足够的字符空间时显示。

在你的情况下，只需设置一个固定宽度并设置单行。那么它应该可以工作。

```
<TextView android:id="@+id/counterDefinitionName"
            android:layout_width="30dp"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:clickable="true"
            android:onClick="nameCounting"
            android:text="@string/nameIt"
            android:singleLine="true"
            android:textColor="@color/count_item_to_be_defined" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T21:04:28.430

不可“点击”，将其设为“选中”

# ruby-on-rails - Rails 对关联进行部分枚举非常慢

> ID：16178777
> 
> 赞同：0
> 
> 时间：2013-04-23T20:38:51.083
> 
> 标签：ruby-on-rails, performance, partial-views

我基本上有一个 Document 模型，它有_many Pages，我有一个视图，我需要枚举一堆文档（例如 300）并为每个页面制作一个按钮。（我想使用 DataTables jQuery 插件进行分页客户端，以便表格可以排序和搜索）。问题是，如果我尝试枚举每个文档中每个页面的所有按钮，则渲染时间超过 10 秒，这只是没有用。

快速进行这种嵌套集合渲染有什么“技巧”吗？我是否应该只缓存每个文档的片段（一旦创建它们就不会发生太大变化）？或者这对于 Rails 部分来说只是一个糟糕的情况，我最好的选择是在 DataTables 中进行一些客户端渲染作为分页的一部分？

编辑：我已经包含了关联，所以我没有 N+1 查询问题，这不是问题。我尝试了缓存，现在看来这可能是我的解决方案，因为这个索引页面经常在每添加几个文档之间重新加载，所以它永远不必重建所有部分的完整缓存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T15:27:36.617

对缓存的迫切需求似乎是一种代码味道。代替猜测，您是否尝试过分析？（例如[http://hiltmon.com/blog/2012/02/27/quick-and-dirty-rails-performance-profiling/](http://hiltmon.com/blog/2012/02/27/quick-and-dirty-rails-performance-profiling/)）

```
gem 'ruby-prof' 
```

定义分析器：

```
# /lib/development_profiler.rb

class DevelopmentProfiler
  def self.prof(file_name)

    RubyProf.start
    yield
    results = RubyProf.stop

    # Print a flat profile to text
    File.open "#{Rails.root}/tmp/performance/#{file_name}-graph.html", 'w' do |file|
      RubyProf::GraphHtmlPrinter.new(results).print(file)
    end

    File.open "#{Rails.root}/tmp/performance/#{file_name}-flat.txt", 'w' do |file|
      # RubyProf::FlatPrinter.new(results).print(file)
      RubyProf::FlatPrinterWithLineNumbers.new(results).print(file)
    end

    File.open "#{Rails.root}/tmp/performance/#{file_name}-stack.html", 'w' do |file|
      RubyProf::CallStackPrinter.new(results).print(file)
    end
  end
end 
```

用...包装您的视图逻辑

```
DevelopmentProfiler::prof("render-profiling") do
  # Your slow code here
end 
```

* * *

**编辑 - 一个额外的想法**：因为你的模型数据不太可能改变，一次吃渲染成本可能会更好。您可以在 after_save 回调中静态生成整个呈现的页面。然后只需为后续请求提供该单个文件。

虽然如果向更传统的缓存收费不是很大的不便，但这可能比它的价值更麻烦。

# coldfusion - 单独转储时未定义的数据库列 - ColdFusion

> ID：16178779
> 
> 赞同：0
> 
> 时间：2013-04-23T20:38:52.427
> 
> 标签：coldfusion, coldfusion-9

我有一个查询，`DATE - ID - NAME - NOTE - TIME`当我使用转储它时返回`<cfdump var="#q_data#">`

我试图`DATE`通过使用只转储值，`<cfdump var="q_data.date">`但它返回`Element DATE is undefined in DATA.`

这是我的代码：

```
<cfspreadsheet action="read" src="#directory#\#q_oBandDirectory.name#" query="q_data" headerrow="1"  excludeHeaderRow = "true"   columns = "1-5"  >

<cfdump var="#q_data.date#"> <-- Does not work
<cfdump var="#q_data.ID#"> <--- Works as it should
<cfdump var="#q_data.NAME#"> <--- Works as it should 
```

由于查询是从电子表格标签创建的，在这种情况下我需要做些什么特别的事情吗？

# c# - 为什么涉及 MSDTC？

> ID：16178784
> 
> 赞同：0
> 
> 时间：2013-04-23T20:39:02.383
> 
> 标签：c#, sql-server-2008, transactions, msdtc

据我所知，MSDTC 仅在以下情况下参与：

*   您正在查询链接到另一台服务器的事务中的视图/表。

*   您在单个 TransactionScope 中使用两个 SqlConnections（或 NHibernate 使用的任何东西）

*   您正在 TransactionScope 中征用另一个事务组件（如 MSMQ 或事务文件系统）。

*   其他情况未提及。

如果我禁用 MSDTC 并运行以下代码，我会收到（服务器“服务器”上的 MSDTC 不可用）错误。

```
public bool Add(PurchaseOrderInfo purchaseOrderInfo)
{
    using (TransactionScope ts = new TransactionScope())
    {
        using (SqlConnection Cnn = new SqlConnection(SqlHelper.ConnStr))
        {
            Cnn.Open();

                try
                {
                    using (SqlDataReader rdr = SqlHelper.ExecuteReader(/*Tr*/Cnn, "spPurchaseOrderAdd", purchaseOrderInfo.ExpectedShipment.ShipmentID, purchaseOrderInfo.CreateDate, purchaseOrderInfo.CustomerNotes, purchaseOrderInfo.Status, purchaseOrderInfo.PurchaseOrderNumber))
                    {
                        if (rdr.Read())
                            FillPurchaseOrderInfo(rdr, ref purchaseOrderInfo, GettingDepthEnum.Level_0);
                        else
                        {
                            return false;
                        }
                    }

                    foreach (PurchaseOrderDetailInfo detailInfo in purchaseOrderInfo.Details)
                    {
                        throw new Exception("Test");
                        //if (!AddPurchaseOrderDetail(Tr, purchaseOrderInfo, detailInfo))
                        {
                            //Tr.Rollback();
                            return false;
                        }
                    }

                    return true;
                }
                catch (Exception ex)
                {
                    throw ex;
                }
                ts.Complete();
            }
        }
    } 
```

我错过了什么吗？

**更新**：存储过程包含一个简单的插入语句：

```
INSERT INTO tblPurchaseOrder
(ShipmentID, CreateDate, CustomerNotes, PurchaseOrderState, PurchaseOrderNumber, LastActivityDate)
VALUES
(@ShipmentID, @CreateDate, @CustomerNotes, @PurchaseOrderState, @PurchaseOrderNumber, GETDATE());

--Step 2: return row that INSERTED to Client Computer.
SELECT dbo.viwGetPurchaseOrderWeight.Weight,* FROM tblPurchaseOrder LEFT OUTER JOIN viwGetPurchaseOrderWeight ON viwGetPurchaseOrderWeight.PurchaseOrderID =  tblPurchaseOrder.PurchaseOrderID WHERE (tblPurchaseOrder.PurchaseOrderID = Scope_Identity()); 
```

**UPDATE2：** 关闭 MSDTC 时，执行到此行时抛出异常：

```
using (SqlDataReader rdr = SqlHelper.ExecuteReader(/*Tr*/Cnn, "spPurchaseOrderAdd", purchaseOrderInfo.ExpectedShipment.ShipmentID, purchaseOrderInfo.CreateDate, purchaseOrderInfo.CustomerNotes, purchaseOrderInfo.Status, purchaseOrderInfo.PurchaseOrderNumber)) 
```

这意味着后续行无效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T20:57:57.923

只要确保不再打开连接，

```
using (TransactionScope transactionScope = new TransactionScope()) {
    using (SqlConnection connection = new SqlConnection(connectionString)) {
    connection.Open();
    connection.Close();
    connection.Open(); // escalates to DTC
      }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T11:58:34.800

根据您的堆栈跟踪帖子，EntLib 类正在打开另一个连接。我们需要将其从交易中排除。将您的调用包装`ExecuteReader`在抑制事务范围内：

```
SqlDataReader rdr;
using (var tsSuppress = new TransactionScope(TransactionScopeOption.Suppress))
    rdr = SqlHelper.ExecuteReader(...) 
```

这将暂时设置`Transaction.Current`为 null，以便新连接不会接收事务。

作为旁注，堆栈跟踪使我们能够找到问题的根本原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T10:22:13.963

检查堆栈跟踪后，似乎 SQLHelper 类正在打开一个连接以从数据库中获取存储过程所需参数的列表：

```
 at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj)
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlDataReader.ConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.TdsParser.TdsExecuteTransactionManagerRequest(Byte[] buffer, TransactionManagerRequestType request, String transactionName, TransactionManagerIsolationLevel isoLevel, Int32 timeout, SqlInternalTransaction transaction, TdsParserStateObject stateObj, Boolean isDelegateControlRequest)
   at System.Data.SqlClient.TdsParser.GetDTCAddress(Int32 timeout, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlInternalConnectionTds.GetDTCAddress()
   at System.Data.SqlClient.SqlInternalConnection.EnlistNonNull(Transaction tx)
   at System.Data.SqlClient.SqlInternalConnection.Enlist(Transaction tx)
   at System.Data.SqlClient.SqlInternalConnectionTds.Activate(Transaction transaction)
   at System.Data.ProviderBase.DbConnectionInternal.ActivateConnection(Transaction transaction)
   at System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject)
   at System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection)
   at System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.ApplicationBlocks.Data.SqlHelperParameterCache.DiscoverSpParameterSet(SqlConnection connection, String spName, Boolean includeReturnValueParameter)
   at Microsoft.ApplicationBlocks.Data.SqlHelperParameterCache.GetSpParameterSetInternal(SqlConnection connection, String spName, Boolean includeReturnValueParameter)
   at Microsoft.ApplicationBlocks.Data.SqlHelperParameterCache.GetSpParameterSet(SqlConnection connection, String spName, Boolean includeReturnValueParameter)
   at Microsoft.ApplicationBlocks.Data.SqlHelperParameterCache.GetSpParameterSet(SqlConnection connection, String spName)
   at Microsoft.ApplicationBlocks.Data.SqlHelper.ExecuteReader(SqlConnection connection, String spName, Object[] parameterValues)
   at AlefTextileProduction.SQLServerDAL.PurchaseOrder.Add(PurchaseOrderInfo purchaseOrderInfo) 
```

我正在尝试解决这个问题！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T12:09:02.080

在查看`SQLHelper`它的代码时，如果您使用实例的重载`ExecuteReader`而`SqlParameter`不仅仅是参数值，那么您将保存`SQLHelper`尝试找出哪些参数映射到什么值的步骤 - 从而节省第二次行程到数据库和第二次连接以及将您的事务提升到 MSDTC。

根据[我正在查看的代码](http://icodesnip.com/snippet/vbnet/sqlhelper-microsoft-application-blocks-for-net-code-snippets)，这是您可能应该调用的方法：

```
Public Overloads Shared Function ExecuteReader(ByVal connectionString As String, _
                 ByVal commandType As CommandType, _
                 ByVal commandText As String, _
                 ByVal ParamArray commandParameters() As SqlParameter) As SqlDataReader 
```

如果这不起作用，那么我建议你推出自己的 DAL。:)

希望这可以帮助。

# java - 在方法中定义的类上使用 Gson 会返回 null

> ID：16178791
> 
> 赞同：1
> 
> 时间：2013-04-23T20:39:29.987
> 
> 标签：java, json, class, null, gson

我有一个类，我只需要一种方法..所以我在方法中声明了它。

现在，当我尝试使用 gson 将对象从此类转换为 json 时，我得到空值。

我的代码是这样的：

```
private Response performGetClientDetails(HashMap<String, Object> requestMap) {

        class ClientDetails {
            String id;
            String name;
            String lastName;
            int accoundId;

            public ClientDetails(String id, String name, String lastName, int accoundId) {
                this.id = id;
                this.name = name;
                this.lastName = lastName;
                this.accoundId = accoundId;
            }
        }

        ClientDetails clientDetails = new ClientDetails(client.getId(), client.getFirstName(), client.getLastName(), client.getAccount().getId());
        Gson gson = new Gson();
        return new Response(true, gson.toJson(clientDetails));
    } 
```

返回`null`的是：`gson.toJson(clientDetails)`..它应该返回一个json字符串。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T21:03:07.917

根据[GSON 文档](https://sites.google.com/site/gson/gson-user-guide#TOC-Nested-Classes-including-Inner-Classes-)：

" *`Gson can not deserialize {"b":"abc"} into an instance of B since the class B is an inner class. if it was defined as static class B then Gson would have been able to deserialize the string. Another solution is to write a custom instance creator for B.`*"

```
public class InstanceCreatorForB implements InstanceCreator<A.B> {
  private final A a;
  public InstanceCreatorForB(A a)  {
    this.a = a;
  }
  public A.B createInstance(Type type) {
    return a.new B();
  }
} 
```

*`The above is possible, but not recommended.`*

由于您使用的是非静态内部类，因此 Gson 将无法序列化该对象。

您可以尝试不推荐的第二种解决方案，用于您的案例或简单地`ClientDetails`自行声明该类，这将正常工作。

# java - 构造复杂的java方法

> ID：16178798
> 
> 赞同：1
> 
> 时间：2013-04-23T20:40:17.583
> 
> 标签：java, eclipse, performance, algorithm, architecture

谁能告诉我如何控制 java 的执行顺序，同时仍以简化、易于维护的结构组织代码？

我正在用java编写一个相当复杂的算法。一种方法长达数百行，以至于为了微调算法而隔离代码的关键部分变得过于劳动密集。为了简化代码，我确定了可以解析为单个变量的代码的每个部分，并将这些部分中的每个部分移到它们自己的方法中，然后从以前复杂的方法中调用这些方法。这很好，因为它使代码可读，并且更容易维护。

问题是现在我收到一些错误，表明调用方法在一些早期方法返回它们的值之前继续执行后续代码。

这是代码中的示例：

```
void myMethod(Double numb){  
    double first = new getFirst(numb);  
    double second = new getSecond(numb);  
    double third = new getThird(numb);  
    double anAside = new getAnAside(first, second, third);  
    double fourth = new getFourth(numb);  
} 
```

`getFourth(numb)`出现的错误消息与我`System.out.println()`在 Eclipse 控制台中获得结果表明它`getFirst(numb)`仍在运行时同时发生的事情有关。当我拥有 , , , 和 within 的所有内容时`getFirst(numb)`，`getSecond(numb)`我`getThird(numb)`并`getAnAside(first,second,third)`没有`getFourth(numb)`得到`myMethod(numb)`相同的证据表明代码块乱序运行。（因为它们没有子方法，所以代码都在一个长块中。）但是，代码很难阅读。如何对`myMethod(numb)`上面进行更改，以便在继续下一个方法之前必须完全返回每个方法，以便我仍然可以拥有易于阅读的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:48:23.527

尝试在每个方法之间刷新 System.out，如下所示：

```
void myMethod(Double numb)
{  
    double first = new getFirst(numb);
    System.out.flush();
    double second = new getSecond(numb);
    System.out.flush();
    double third = new getThird(numb);
    System.out.flush();
    double anAside = new getAnAside(first, second, third);
    System.out.flush();
    double fourth = new getFourth(numb);  
} 
```

As Matt B mentions, if you are only using one thread then it is probably something faulty with your logging.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T20:51:10.457

I usually find that in terms of program structure, algorithms are never as complicated as people make them out to be. All you have to do is talk it out and write as you go. Say my fridge needs milk so that I need an algorithm to go get milk in the store:

```
public Milk goGetMilk(){
    getMoney();
    getCarKey();
    driveToStore();
    findMilk();
    buyMilk();
    driveBack();
    putMilkInFridge();
} 
```

Then each nested method can in turn be broken into chuncks until I have a complete program.

As far as order of execution goes, if you have one thread: it's impossible to have racing conditions. If you are using multiple threads, you need to synchronize shared resources and rendezvous points.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T23:05:09.083

This is a bit of guesswork, but I have known IDEs to display stdout output in the wrong order. I suggest you eliminate this first (even if it is unlikely), either by running Java from a proper terminal or writing the logs to disk.

# java - 休眠保存集合

> ID：16178810
> 
> 赞同：0
> 
> 时间：2013-04-23T20:41:33.590
> 
> 标签：java, hibernate

所以我写了一个测试应用程序。我想在每个收集的类中保存集合。每个收集到的类都有一个唯一的数据列表。我无法保存数据类。

我收到的错误错误：违反参照完整性约束：“FK2EEFAAF2485486：PUBLIC.DATA FOREIGN KEY(NUMBER) REFERENCES PUBLIC.COLLECTED(KEY) (4)”；SQL 语句：插入数据（数字，数据）值（null，？）[23506-170]

主班

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package hibernatecollectiontest;

import java.util.ArrayList;
import java.util.List;
import org.hibernate.Criteria;
import org.hibernate.Session;

/**
 *
 * @author ivan
 */
public class HibernateCollectionTest {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) 
    {
        Session session = Util.getSessionFactory().openSession();
        Collected temp = new Collected();
        temp.setDescription("test");
        List<Data> local= new ArrayList<>(); 
        for(int i=0;i<5;i++)
        {
            Data test = new Data();
            test.setData("Data"+i);
            local.add(test);
        }
        temp.setDatas(local);
        session.beginTransaction();
        session.save(temp);
        session.getTransaction().commit();
        Criteria crit = session.createCriteria(Collected.class);
        List<Collected> dump =crit.list();
        for(int i = 0 ; i < dump.size();i++)
        {
            System.out.println(dump.get(i).getKey()+"  key "+dump.get(i).getDescription() +"  describe ");
            System.out.println("Size of collection is "+dump.get(i).getDatas().size());
            for(int n=0;n<dump.get(i).getDatas().size();n++)
            {
                System.out.println(dump.get(i).getDatas().get(n).getData());
            }
        }
        //session.flush();
    }
} 
```

持久类：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package hibernatecollectiontest;

import java.util.ArrayList;
import java.util.List;

/**
 *
 * @author ivan
 */
public class Collected 
{
    private String description;
    private int key;
    private List<Data> datas = new ArrayList<>();

    /**
     * @return the description
     */
    public String getDescription() {
        return description;
    }

    /**
     * @param description the description to set
     */
    public void setDescription(String description) {
        this.description = description;
    }

    /**
     * @return the key
     */
    public int getKey() {
        return key;
    }

    /**
     * @param key the key to set
     */
    public void setKey(int key) {
        this.key = key;
    }

    /**
     * @return the datas
     */
    public List<Data> getDatas() {
        return datas;
    }

    /**
     * @param datas the datas to set
     */
    public void setDatas(List<Data> datas) {
        this.datas = datas;
    }

} 
```

集合内的数据类：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package hibernatecollectiontest;

/**
 *
 * @author ivan
 */
public class Data 
{
    private int number;
    private String data;

    /**
     * @return the number
     */
    public int getNumber() {
        return number;
    }

    /**
     * @param number the number to set
     */
    public void setNumber(int number) {
        this.number = number;
    }

    /**
     * @return the data
     */
    public String getData() {
        return data;
    }

    /**
     * @param data the data to set
     */
    public void setData(String data) {
        this.data = data;
    }
} 
```

休眠映射：

```
 <!DOCTYPE hibernate-configuration PUBLIC
"-//Hibernate/Hibernate Configuration DTD//EN"
"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
<session-factory>
<property name="hibernate.connection.driver_class">org.h2.Driver</property>
<property name="hibernate.connection.url">
jdbc:h2:testdatabase
</property>
<property name="hibernate.connection.username">root</property>
<property name="hibernate.connection.password">root</property>
<property name="hibernate.connection.autocommit">true</property>
<property name="show_sql">true</property>
<property name="dialect">org.hibernate.dialect.H2Dialect</property>
<property name="hibernate.hbm2ddl.auto">update</property>
<!-- Mapping files -->
<mapping resource="Collected.hbm.xml"/>
<mapping resource="Data.hbm.xml"/>
</session-factory>
</hibernate-configuration> 
```

数据.hbm

```
<!DOCTYPE hibernate-mapping PUBLIC
"-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping package="hibernatecollectiontest">
<class name="Data" table="data">
<id name="number" column="number" type="java.lang.Integer">
<generator class="native"/>
</id>
<property column="data" name="data" type="java.lang.String"/>
</class>
</hibernate-mapping> 
```

采集到.hbm

```
<!DOCTYPE hibernate-mapping PUBLIC
"-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping package="hibernatecollectiontest">
<class name="Collected" table="collected">
<id name="key" column="key" type="java.lang.Integer">
<generator class="native"/>
</id>
<property column="description" name="description" type="java.lang.String"/>
<list name="datas" table="data" lazy="false" cascade="all">
<key column="number"/>
<list-index column="sortOrder"/>
<one-to-many class="hibernatecollectiontest.Data"/>
</list>
</class>
</hibernate-mapping> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T21:08:47.513

首先，

交易未提交。,

```
 //session.getTransaction().commit(); 
```

上面的行在代码库中被注释，

# javascript - 使用 JQuery 更改 facebook 插件

> ID：16178816
> 
> 赞同：0
> 
> 时间：2013-04-23T20:41:53.250
> 
> 标签：javascript, jquery, facebook, html, plugins

是否可以使用 Jquery 删除“Like box”facebook 插件顶部的“like”按钮？

我从 Facebook 导入了点赞框，我想删除这个点赞按钮，但 Facebook 不希望我删除它。所以我虽然可以用 JQuery 删除它。

我发现支持这个按钮的块和它的文本是在一个类'pam'和'clearfix'里面

所以我尝试用这些代码行隐藏它，但它不想改变

```
$('.pam').css("display", "none");
$('.pam').hide(); 
```

任何人都知道如何隐藏这个？

（使用 HTML5 方法导入，但如果我需要更改，什么都可以）

- 另外，如果您知道如何更改文本颜色（帖子标题颜色），我会非常感谢所有这些信息！

感谢所有愿意帮助我的人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T23:55:17.663

无法直接更改 Facebook 的社交小部件。由于浏览器的同源策略，您无法使用 javascript 跨域访问 iframe。 [http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)

您可以采取的唯一 hack-ish 方法是将 iframe 从您的 DOM 中偏移以隐藏小部件的顶部，或者通过 css 在更高的 z-index 层上覆盖顶部的东西。尽管这对 Facebook 的政策不太友好，但只是为了警告。

# c++ - 处理了异常，但被捕获后程序被中止

> ID：16178818
> 
> 赞同：0
> 
> 时间：2013-04-23T20:42:00.837
> 
> 标签：c++, exception, metaprogramming

我正在编写一个基于表达式模板（元编程）的 C++ 库。

我有一个`Matrix`类，我还实现了一个`SubMatrix`类来提取矩阵的一部分。我已经为赋值`=`运算符设置了异常处理，以处理赋值具有不同操作数大小的情况，现在我正在为子矩阵索引与原始矩阵不匹配的情况下的子矩阵提取设置异常处理. 我已验证分配的异常处理`=`工作正常。

提取的语法`SubMatrix`如下

```
B=SubMatrix(A,a,b,c,d); 
```

它具有以下 Matlab 等价物

```
B=A(a:b,c:d); 
```

当我尝试

```
Matrix<double>      A_H(3,4);
Matrix<double>      B_H(3,2);
try { B_H = SubMatrix(A_H,0,1,1,2); } catch(exception &e) { cout << e.what() << endl; return; } 
```

的正确异常`SubMatrix`被捕获，但程序随后立即中止。我已经验证了正确的异常是通过添加一个`getch();`to 来粗暴地冻结视频输出`try-catch`，即

```
try { B_H = SubMatrix(A_H,0,1,1,2); } catch(exception &e) { cout << e.what() << endl; getch(); return; } 
```

有人有解释吗？`SubMatrix`的异常处理和分配的异常处理之间是否有任何“干扰” `=`？预先感谢您的任何帮助。

**编辑 - 捕获异常的功能**

```
template<class T> 
Expr<SubMatrixExpr<const T*,T>,T> SubMatrix(const Matrix<T>&v,const int a,const int b,const int c,const int d) 
{   if((a >= 0) && (a < v.GetRows()) && (a <= b) && (b >= 0) && (b < v.GetRows()) && 
       (c >= 0) && (c < v.GetColumns()) && (c <= d) && (d >= 0) && (d < v.GetColumns())) 
    { 
        typedef SubMatrixExpr<const T*,T> SExpr; 
        return Expr<SExpr,T>(SExpr(v.GetDataPointer(),v.GetRows(),v.GetColumns(),a,b,c,d),b-a+1,d-c+1); 
    } else {    char* str0 = "************************************\n"; 
                char* str1 = "* CPU SubMatrix indices must match *\n"; 
                char* str2 = "Matrix size: "; 
                char* str3 = "SubMatrix indices (a,b,c,d): "; 
                char* catString = (char*) malloc(2*strlen(str0)+strlen(str1)+strlen(str2)+strlen(str3)+50*sizeof(char)); 
                sprintf(catString, "%s%s%s\n%s%i x %i\n%s(%i,%i,%i,%i)\n",str0,str1,str0,str2,v.GetRows(),v.GetColumns(),str3,a,b,c,d); 
                throw  GenericError(catString,__FILE__,__LINE__); 
            } 
} 
```

**编辑 - 异常处理类**

```
#define Error_msg_1 "Error in file"
#define Double_new_line "\n\n"
#define Error_msg_2 "on line"

class LibraryException: public std::exception
{
    private:
        const char *message_;
        const char *file_;
        int line_;
    protected:
        LibraryException(const char *message, const char* file, int line): message_(message), file_(file), line_(line) {}
    public:
        int get_line() const { return line_; }
        const char* get_file() const { return file_; }
        virtual const char* what() const throw() 
        {
            char buf[20];
            sprintf(buf, "%d", line_);

            char* catString = (char*) malloc(strlen(Error_msg_1)+strlen(Double_new_line)+strlen(file_)+strlen(Double_new_line)+strlen(Error_msg_2)+strlen(buf)+strlen(message_));
            sprintf(catString, "%s \n\n%s\n\n%s %s\n\n%s", Error_msg_1,file_,Error_msg_2,buf,message_);
            return catString; }
};

class GenericError: public LibraryException
{
public:
    GenericError(const char *message, const char* file, int line) :
    LibraryException(message, file, line) {}
}; 
```

**编辑 - MALLOC 和虚拟功能**

从帖子[malloc() 和虚函数到底有什么问题？](https://stackoverflow.com/questions/5311548/what-exactly-is-the-problem-with-malloc-and-virtual-functions)，就出现了`malloc`在虚函数中使用的问题。无论如何，我也尝试过使用`new`，但问题仍然存在，我已经检查过我无法在`virtual`函数中动态分配任何东西。此外，这个问题是“间歇性的”，有时会发生，有时不会。最后，我用这样的静态分配解决了这个问题

```
 virtual const char* what() const throw() 
        {
            char buf[20];
            sprintf(buf, "%d", line_);

            char catString[2048];
            sprintf(catString, "%s \n\n%s\n\n%s %s\n\n%s", Error_msg_1,file_,Error_msg_2,buf,message_);
            return &catString[0]; }
        }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T21:32:15.920

```
char* catString = (char*) malloc(strlen(Error_msg_1)+strlen(Double_new_line)+strlen(file_)+strlen(Double_new_line)+strlen(Error_msg_2)+strlen(buf)+strlen(message_)); 
```

这里分配的内存不足，因为除了所有字符串之外，格式字符串还包含空格 \ns 和终端零。虽然 Double_new_line 被计算为 \n\n 空格和终端零仍然存在。
还有为什么使用`malloc`而不是`new`？甚至更好`std::string`？由于我看不到任何空闲，这将导致内存泄漏。

# php - 用于将大型文件文件夹分类为基于日期的子文件夹的 PHP 脚本

> ID：16178820
> 
> 赞同：0
> 
> 时间：2013-04-23T20:42:06.807
> 
> 标签：php, linux, file

我有大量来自 PBX 系统的通话记录，我需要将它们分类到更易于管理的文件夹中。

作为一个 linux 菜鸟，我将如何搜索指定的文件夹并根据文件的日期将其移动到文件夹层次结构中。

示例我有 2013/04/23 作为文件夹结构。

然后我有日期为的文件

20130403-blah283.mp3 20130403-blah284.mp3 20130403-blah285.mp3 20130403-blah286.mp3 20130403-blah287.mp3

等任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:55:38.837

这可能会给你一个起点：

1.  获取文件
2.  遍历文件
3.  创建新目录/文件名
4.  如果 ! 存在则创建目录
5.  复制文件
6.  删除旧文件

模型：

```
<?php
$base_path = "/PATH_TO_FILES/";
//$files = glob($base_path."*.mp3");
$files = array('20130403-blah283.mp3','20130403-blah284.mp3','20130403-blah285.mp3','20130403-blah286.mp3','20130403-blah287.mp3'); // for testing

foreach($files as $file){
    $pieces = explode("-",$file);
    $new_filename = $pieces[1];
    $timestamp = $pieces[0];
    $directory = substr($timestamp,0,4)."/".substr($timestamp,4,2)."/".substr($timestamp,6)."/";
    if(!is_dir($base_path.$directory)){
        mkdir($directory,0777);
    }
    copy($base_path.$file,$base_path.$directory.$new_filename);
    //unlink($base_path.$directory.$new_filename); // DELETES OLD FILE ONLY UNCOMMENT WHEN YOUR READY!
} 
```

# asp.net-mvc - MVC 4 应用程序在部署时给出 404

> ID：16178821
> 
> 赞同：7
> 
> 时间：2013-04-23T20:42:19.843
> 
> 标签：asp.net-mvc, web-deployment

我有一个使用 .NET 4.5 的 ASP.NET MVC 4 项目，我正在尝试使用 Visual Studio 2012 发布到 IIS 7.0。当我在 IIS Express 中调试应用程序时，一切正常。当我将它发布到服务器时，MVC 请求返回 404。我在网站上有几个 aspx 页面，它们都工作正常。下面是我的路由方案。它是样板代码：

```
routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

routes.MapRoute(
    name: "Default",
    url: "{controller}/{action}/{id}",
    defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

谢谢。

**编辑：**

我得到了它！我必须`system.webServer`在我的中添加以下内容`web.config`：

```
<modules runAllManagedModulesForAllRequests="true"/> 
```

谁能告诉我这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T21:14:54.653

```
<modules runAllManagedModulesForAllRequests="true"/> 
```

参考：[这里](http://blog.kurtschindler.net/app_offline-htm-gotchas-with-asp-net-mvc/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-27T05:26:49.713

此参考可能会有所帮助：

[https://www.iis.net/configreference/system.webserver/modules](https://www.iis.net/configreference/system.webserver/modules)

“以前必须将 runAllManagedModulesForAllRequests 设置为 true 以支持路由。但是，一旦使用 Service Pack 更新了 IIS 7，在使用 ASP.NET 路由时，runAllManagedModulesForAllRequests 的值可以设置为 false 或省略。”

（显然安装 IIS 或 Windows 服务包需要首先仔细考虑）

# c# - 从 MVC 中的 CheckBox 检查值中过滤 LINQ

> ID：16178826
> 
> 赞同：1
> 
> 时间：2013-04-23T20:42:37.077
> 
> 标签：c#, asp.net-mvc, linq, entity-framework

我有一个包含三个复选框的表单，比如：

```
@Html.CheckBox("Active", true)
@Html.CheckBox("Closed", false)
@Html.CheckBox("Finalized", false) 
```

...以及映射到这些默认值的控制器（也许这不是最好的方法）

```
public ActionResult TempView(bool Active = false, bool Closed = false, bool Finalized = false)
    { .... } 
```

...然后是一个按钮来应用过滤器以产生一些 AJAX 魔法，并从表中选择某些属性在过滤器的检查值中。

我无处可去，除了一堆`If Active is checked, WHERE Property = Active, Or If Closed is checked, WHERE Property = Closed [...]`

LINQ 中是否有一个简单的实现来使用许多布尔值来做到这一点？用户可以同时选择所有三个框（不仅仅是一个或另一个）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T18:54:47.480

为了解决这个问题，我创建了一个新类型`SummaryFilterInfo`，它看起来像这样：

```
public class SummaryFilterInfo
{
    public List<State> States { get; set; }
    public List<State> StateSelection { get; set; }

    public SummaryFilterInfo()
    {
        var stateList = new StateList();
        States = new List<State>();
        StateSelection = stateList.GetAllStates();
    }
} 
```

然后我`StateSelection`用来填充一个 CheckBox 数组，其名称如下：

```
SummaryFilterInfo_States[0] 
```

我的控制器定义如下所示：

```
public ActionResult Index(SummaryFilterInfo summaryFilterInfo)
    {
        ...
        var filtered = all
                       .Where(e => summaryFilterInfo.States.Contains(e.State)).ToList()
    } 
```

# c# - 当我们有多个命名空间时如何在 xml 中查找元素值

> ID：16178828
> 
> 赞同：-1
> 
> 时间：2013-04-23T20:42:42.973
> 
> 标签：c#, xml, linq-to-xml, xelement

我想获取元素*rsm:CIIHExchangedDocument/ram:ID*的值 但是我有多个命名空间和空值的问题（我不知道请求的元素是否存在）

可以这样实现：

```
XElement invoice = XElement.Load(invoiceStream);
XNamespace rsm = invoice.GetNamespaceOfPrefix("rsm");
XNamespace ram = invoice.GetNamespaceOfPrefix("ram");
if ((invoice.Element(rsm + "CIIHExchangedDocument")) != null)
{
    if (invoice.Element(rsm + "CIIHExchangedDocument").Element(ram + "ID") != null)
    {
        string id = invoice.Element(rsm + "CIIHExchangedDocument").Element(ram + "ID").Value;
    }
} 
```

但我认为使用 xPath 会更好地满足我的需求。我想做这样的事情：

```
invoice.XPathSelectElement("rsm:CIIHExchangedDocument/ram:ID"): 
```

我需要在文档中检索很多不同深度的元素，并且我有很多命名空间。

实现这一目标的最简单方法是什么？执行速度对我来说也很重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T21:18:38.897

我相信您正在寻找的是 XPathNavigator 类。可以在此处找到如何使用的示例[XpathNaivigator](http://support.microsoft.com/kb/308333)

# grails - Grails Ajax 渲染到 GSP

> ID：16178835
> 
> 赞同：2
> 
> 时间：2013-04-23T20:43:29.647
> 
> 标签：grails, gsp

我正在尝试使用“渲染”在我的视图中使用 gsp 表单填充 div。下面是我的控制器中的代码。当我在视图中触发它时，它什么也不返回（空白）。但是，如果我将下面的代码更改为使用普通表单元素（等），它确实会显示它们......关于如何纠正这个问题的任何想法？

```
render("""
<g:form name="editCommentForm" action="saveComments"> 
<g:textArea name="comments" value="comment" /> 
<g:submitToRemote update="editComments" />
</g:form>""" ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T21:16:37.140

你可以创建一个模板并渲染它，或者[使用 groovyPagesTemplateEngine](http://mrhaki.blogspot.com.br/2010/05/grails-goodness-use-gsp-template-engine.html)。

# transactions - 继承业务逻辑的最佳实践

> ID：16178836
> 
> 赞同：0
> 
> 时间：2013-04-23T20:43:35.150
> 
> 标签：transactions, three-tier

我正在构建一个三层应用程序，例如 DAL、BLL、UI 层。DAL 公开一个 EF 包装器（UnitOfWork 和通用存储库模式）。

BLL 组件是具有一些基本业务逻辑规则的 DAL 包装器。本质上，BLL 公开了一个带有虚拟 CRUD 和验证方法的 BusinessObjectBase 类（T 是 POCO 类），然后是一个 BusinessTransactionBase 来协调一个以上的 CRUD 操作。

**您可以将 BLL 组件视为一种 ObjectContext Wrapper：BusinessObject = ObjectSet，每个实体都有业务逻辑。BusinessTransaction = ObjectContext 以及其他一些最小逻辑**

此外，我的组件的主要目标是为不同的项目提供一组基本逻辑。今天我可以使用我的程序集来构建一个关于 MusicStore 的应用程序，明天我可以构建一个关于文档管理的应用程序，但我总是想使用我的基础组件 (BLL)

简单的片段：

```
 public class BusinessObjectBase<T> where T : class 
    {
        // protected IUnitOfWork ?

        public virtual void Insert(T item)
        {
            // my default company logic rule..
            if(this.Validate(item))
            {
                IUnitOfWork.GetRepository<T>().AddEntity<T>();
                IUnitOfWork.Save();
            }
        }

        public virtual void Edit(T item)
        {
            // my default company logic rule..
        }

        public virtual bool Validate(T item)
        {
            // my default company logic rule..
            return true;
        }
    }

    public class BusinessTransactionBase
    {
        // protected IUnitOfWork ?
        public void BeingTransaction()
        {
            // ... Notify at all BusinessObjectBase to skip IUniOfWork.Save call
        }

        public void Commit()
        {
            this.IUnitOfWork.Save();
        }

        public BusinessObjectBase<T> GetBusinessObject<T>() where T : class
        {
            // How can I create an instance via reflection of an inherited class
            // without to know ctor parameters?
        }

    } 
```

好吧，我有两个问题：

1) 如何确保在 GetBusinessObject 方法上正确构建 BusinessObjectBase？我应该从我的基类中构建一个继承对象，并且我不知道任何 ctor 参数。

2) 如何确保 IUnitOfWork 在 BusinessTransactionBase 和 BusinessObjectBase 类之间共享？我必须这样做，因为我已经说过，BusinessObjectBase 和 BusinessTransactionBase 是紧密相关的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T08:58:40.397

我想已经解决了。我已经创建了一个具有标准逻辑的密封业务类，例如我的公司需要我。它只是一个带有一些逻辑的 IRepository 包装器。然后，我创建了一个可继承的业务事务类，它是一个简单的 UnotOfWork 模式。

该类公开了一个带有事件参数的受保护事件，该事件参数是关于需要从某个 UI 或类似内容加载哪个业务对象，因此从业务事务类继承的业务对象可以利用此事件来注入其自己的“业务规则”。BusinessRule 是一个简单的接口，其中包含关于“GetDataRequired”和“SavingDataRequired”的方法，每次执行 CRUD 操作时我都会在我的 BusinessObject 基类中调用它们。

就这样。它工作正常。

# marionette - Marionette 嵌套的 CompositeViews 和更改事件要么不触发，要么反向发生

> ID：16178838
> 
> 赞同：1
> 
> 时间：2013-04-23T20:43:36.083
> 
> 标签：marionette

**tl；博士 [http://jsfiddle.net/fRTBU/2/](http://jsfiddle.net/fRTBU/2/)**

有一个木偶应用程序，我正在显示棒球城市列表。

```
window.teams = new MyApp.Models.TeamCollection([
        { League : "AL", City : "Boston"  , TeamId : 1 },
        { League : "AL", City : "Chicago" , TeamId : 2 },
        { League : "NL", City : "Chicago" , TeamId : 3 }
        ]); 
```

我想要一份按联赛划分的城市列表。

就像是 ：

```
<table>
<tr>
   <td> 
     <h2>AL</h2>
     <ul>
        <li>Boston 1 </li>
        <li>Chicago 2</li>
     </ul>
   </td>
</tr>
<tr>
   <td> 
     <h2>NL</h2>
     <ul>
        <li>Chicago 3 </li>
     </ul>
   </td>
</tr>
</table> 
```

我可以让它渲染。

但是当我尝试添加一个新团队时（用于扩展：P）

```
window.teams.push(new MyApp.Models.Team({ League : "NL", 
                                            City : "Washington", 
                                          TeamId : 4 })); 
```

集合更改事件不会触发（在 JSFiddle 中）

[http://jsfiddle.net/fRTBU/2/](http://jsfiddle.net/fRTBU/2/)

```
collectionEvents: {
    "reset": "myFunc"  ,
    "change" : "myFunc", 
    "add" : "myFunc"
},
myFunc: function () {
    Logger('myFunc');
    var grid = window.teams.groupBy(function (row) {
        return row.get("League");
    });
    this.collection = new Backbone.Collection(_.toArray(grid));
} 
```

或在我的应用程序中（周围有更多逻辑）

```
ReferenceError: TeamId is not defined 
```

主要应用结构

```
MyApp.Models.Team = Backbone.Model.extend({
    idAttribute: 'TeamId'
});

MyApp.Models.TeamCollection = Backbone.Collection.extend({
    model: MyApp.Models.Team
});

MyApp.Views.ListItemView = Backbone.Marionette.ItemView.extend({
    tagName: 'tr',
    template : '#row-template'
});

MyApp.Views.ListCompositeView = Backbone.Marionette.CompositeView.extend({
    itemView: MyApp.Views.ListItemView,
    template: "#list-template",
    itemViewContainer: "ul",
    initialize: function () {
        this.collection = new Backbone.Collection(
                                  _.toArray(this.model.attributes));
    },
    onRender: function () {
        $(this.$el).find("h2.ListHead")
                   .html(this.collection.models[0].get('League'));
    }
});

MyApp.Views.TableView = Backbone.Marionette.CompositeView.extend({
    itemView: MyApp.Views.ListCompositeView,
    tagName: "table",
    itemViewContainer: "tbody",
    template: "#table-template",
    initialize : function () {
       this.myFunc();
    },
    collectionEvents: {
        "reset": "myFunc"  ,
        "change" : "myFunc", 
        "add" : "myFunc"
    },
    myFunc: function () {
        Logger('myFunc');
        var grid = window.teams.groupBy(function (row) {
            return row.get("League");
        });
        this.collection = new Backbone.Collection(_.toArray(grid));
    }
}); 
```

当我说它们正在反向发生时，它看起来好像`MyApp.Views.ListItemView`得到了一个集合并`MyApp.Views.ListCompositeView`得到了一个模型。

**JsFiddle 再次链接 [http://jsfiddle.net/fRTBU/2/](http://jsfiddle.net/fRTBU/2/)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T23:16:27.670

好的，这里有几个问题。您的事件未在 中触发的原因是，当您将其集合替换`TableView`为时，您破坏了与集合的事件绑定——此时它的集合不再是.`window.teams``this.collection = new Backbone.Collection(_.toArray(grid));``window.teams`

另一个问题是您试图显示数据，就好像它被建模为：

```
Leagues
   |______League
   |         |______Team
   |         |______Team
   |
   |______League
             |______Team
             |______Team
             |______Team 
```

...但是您的数据的结构如下：

```
 Teams
   |______Team
   |______Team
   |______Team 
```

一种解决方案是让 a`TeamCollection`接受`{ League : "AL", City : "Boston" , TeamId : 1 }`格式中的数据，并将更改事件绑定到更新`LeagueTeamsCollection`每个联赛的函数，并使用该集合作为 2 个视图类的基础： a`CompositeView`和 an `ItemView`。

# ios - 当我想调整它的大小时，我的 PanGestureRecognizer 不会移动

> ID：16178841
> 
> 赞同：1
> 
> 时间：2013-04-23T20:44:03.407
> 
> 标签：ios, xcode, core-animation, uigesturerecognizer, uipangesturerecognizer

我有一个 UIPanGestureRecognizer。它工作正常。我做了一个 if 语句，所以当有人触摸图片时，它会是 alpha 0.7，并且会大 1.5 倍。alpha 工作正常，但是当我输入 CAAffineTransformMakeScale 方法时，我的图像不会移动。

这是我的代码：

```
- (IBAction)Bloemen:(UIPanGestureRecognizer *)recognizer {

    CGPoint translation = [recognizer translationInView:self.view];
    recognizer.view.center = CGPointMake(recognizer.view.center.x + translation.x,
                                     recognizer.view.center.y + translation.y);
    [recognizer setTranslation:CGPointMake(0, 0) inView:self.view];

     if (UIGestureRecognizerStateBegan)
    {
        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDelay:0.1];
        [UIView setAnimationDuration:0.4];

        bloemen.alpha = 0.7f;
        bloemen.transform = CGAffineTransformMakeScale(1.5,1.5);

        [UIView commitAnimations];
     }
    if (UIGestureRecognizerStateEnded) {
        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDelay:0.1];
        [UIView setAnimationDuration:0.1];

        bloemen.alpha = 1.0f;
        bloemen.transform = CGAffineTransformIdentity;

       [UIView commitAnimations];
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T22:05:41.480

关键问题是您的`if`陈述没有检查`state`财产。它应该是：

```
if (recognizer.state == UIGestureRecognizerStateBegan)
{
    // began code here
}
else if (recognizer.state == UIGestureRecognizerStateEnded)
{
    // ended code here
} 
```

另请注意，此手势识别器仅在您关闭自动布局时才有效。如果您使用自动布局，则必须更改约束。

* * *

如果您原谅风格上的观察，我也可能倾向于建议：

*   使用基于块的动画；

*   如果不需要，不要引用非局部变量（即引用`recognizer.view`而不是`bloemen`），这样可以更轻松地重用此处理程序来拖放`UIView`您选择添加此手势的各种对象；和

*   使用标准命名约定，以小写字母开头的方法名称并遵循`verbNoun`约定。

这些都不是关键的，请根据需要使用或忽略，但这展示了一些最佳实践：

```
- (void)handlePan:(UIPanGestureRecognizer *)recognizer
{    
    CGPoint translation = [recognizer translationInView:self.view];
    recognizer.view.center = CGPointMake(recognizer.view.center.x + translation.x,
                                         recognizer.view.center.y + translation.y);
    [recognizer setTranslation:CGPointMake(0, 0) inView:self.view];

    if (recognizer.state == UIGestureRecognizerStateBegan)
    {
        [UIView animateWithDuration:0.4
                              delay:0.0  // you had 0.1, but seems worthwhile to give immediate feedback
                            options:0
                         animations:^{
                             recognizer.view.alpha = 0.7f;
                             recognizer.view.transform = CGAffineTransformMakeScale(1.5,1.5);
                         }
                         completion:nil];
    }
    if (recognizer.state == UIGestureRecognizerStateEnded)
    {
        [UIView animateWithDuration:0.1
                              delay:0.0  // you had 0.1, but seems worthwhile to give immediate feedback
                            options:0
                         animations:^{
                             recognizer.view.alpha = 1.0f;
                             recognizer.view.transform = CGAffineTransformIdentity;
                         }
                         completion:nil];
    }
} 
```

# ruby-on-rails - 为模型实例对象创建属性的最佳方式

> ID：16178842
> 
> 赞同：1
> 
> 时间：2013-04-23T20:44:05.210
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, model

我正在为 iPhone 应用程序的后端构建 Rails 服务器。Rails 将 JSON 发送到前端，我发现自己正在做这样的事情。

```
@user = User.find(1)

@user["status"] = "Some cool status"

render :json => @user.to_json 
```

在我的 rspec 测试中，我得到

```
DEPRECATION WARNING: You're trying to create an attribute `status'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. 
```

当向将发送到 iPhone 的对象写入键值同样容易时，我发现很难找到合适的替代方案。

我的问题是，除了弃用之外，我正在尝试做的事情以及我的代码特别“错误”的地方有哪些可行的替代方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:58:55.803

您可以将`User`对象转换为哈希，然后将其他键混合到它：

```
class User
    def to_hash
        hash = {}
        instance_variables.each {|var| hash[var.to_s.delete("@")] = instance_variable_get(var) }
        hash
    end
end 
```

在你的控制器中：

```
user = User.find(1)

user = user.to_hash

user[:status] = "Some cool status"

render :json => user.to_json 
```

PS。`@user`无论如何，在渲染 json 时不需要使用实例变量，局部`user`变量就足够了。

# iphone - NSPredicate 不会在第一次启动时执行

> ID：16178847
> 
> 赞同：0
> 
> 时间：2013-04-23T20:44:32.387
> 
> 标签：iphone, ios, core-data, restkit, nspredicate

我已经获取了很多论坛，但仍然没有找到关于我遇到的问题的答案。

我从某个 URL 加载数据。我收到的项目包含我在 tableView 中显示对象时依赖的“已删除”属性。

```
- (void)loadData
{
    [self showLoadingIndicatorView];
    [[RKObjectManager sharedManager] getObjectsAtPath:@"/api/news/index.json"
                                           parameters:@{@"auth_token" : [BMWConstants authToken]}
                                              success:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {
                                                  RKLogInfo(@"Load complete: Table should refresh...");
                                                  [super hideLoadingIndicatorView];
                                              } failure:^(RKObjectRequestOperation *operation, NSError *error) {
                                                  RKLogError(@"Load failed with error: %@", error);
                                                  [BMWSuperViewController showGhostAlert:error];
                                                  [super hideLoadingIndicatorView];
                                              }];

} 
```

我用谓词创建了一个获取结果控制器

```
(NSFetchedResultsController*)fetchedResultsController
{
if (_fetchedResultsController != nil)
{
return _fetchedResultsController;
}

NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"News"];
[fetchRequest setPredicate:[NSPredicate predicateWithFormat:@"deleted = NO OR deleted = NIL"]];
NSSortDescriptor *descriptor = [NSSortDescriptor sortDescriptorWithKey:@"createdAt" ascending:NO];
fetchRequest.sortDescriptors = @[descriptor];
[fetchRequest setFetchBatchSize:10];
NSError *error = nil;

_fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
managedObjectContext:[RKManagedObjectStore defaultStore].mainQueueManagedObjectContext
sectionNameKeyPath:nil
cacheName:nil];
[self.fetchedResultsController setDelegate:self];
BOOL fetchSuccessful = [self.fetchedResultsController performFetch:&error];
if (! fetchSuccessful) {
[BMWCenterViewController showGhostAlert:error];
}
return _fetchedResultsController;
}

[fetchRequest setPredicate:[NSPredicate predicateWithFormat:@"deleted = NO OR deleted = NIL"]]; 
```

正如您从这里看到的，谓词设置得很好。

在应用程序的第二次启动时一切正常，但在第一次启动时，它只是给了我从 JSON 接收到的所有对象，而忽略了我的谓词。当我在 cellForRowAtIndexPath 中记录对象时，该属性存在。

你能帮我解决这个问题吗？

# google-maps-api-3 - 如何显示墨西哥或美国等其他国家的州

> ID：16178850
> 
> 赞同：0
> 
> 时间：2013-04-23T20:44:41.153
> 
> 标签：google-maps-api-3

知道如何或是否可以显示墨西哥或其他国家（即智利）的州，并绘制州边界，并使用谷歌地图显示州名。？美国地图默认显示每个州。

我需要做某种覆盖吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T21:12:42.043

您需要从第三方获取轮廓，然后将它们绘制为叠加层。

我相信您可以在美国使用的一种来源是**[TIGER](http://www.census.gov/geo/maps-data/data/tiger.html)**。

*来自这个问题：**[谷歌是如何得到地图上邮政编码的大纲的？](https://stackoverflow.com/questions/9886500/how-did-google-get-the-outline-for-postcodes-on-maps)**

编辑：我还读到您可以使用[OpenStreetMap API](http://www.openstreetmap.org/)来获取轮廓。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T23:50:07.320

状态轮廓在 FusionTables 中的自然地球数据集中也可用，并且可以使用 FusionTablesLayer 覆盖：

[墨西哥](http://www.geocodezip.com/geoxml3_test/v3_FusionTables_query_sidebarF_local.html?country=Mexico)

[智利](http://www.geocodezip.com/geoxml3_test/v3_FusionTables_query_sidebarF_local.html?country=Chile)

# oracle - 使用输出变量动态调用 PL/SQL 过程

> ID：16178851
> 
> 赞同：3
> 
> 时间：2013-04-23T20:44:44.560
> 
> 标签：oracle, plsql, oracle10g

我正在尝试使用动态 sql 来执行一个过程并检索输出参数：

```
v_sql := 'BEGIN ' || p_procname || '(''' || p_input1 || ''', ''' || p_input2 || ''', v_output1); END;';
DBMS_OUTPUT.PUT_LINE(v_sql);
EXECUTE IMMEDIATE v_sql; 
```

我`v_output1`声明了变量，但收到以下错误消息：

```
PLS-00201: identifier 'V_ISSUE' must be declared 
```

如果我用 dbms_ouput 替换上述代码，则该过程有效`v_sql`，因此在过程方面没问题，问题在于我尝试动态调用它的方式。

我不知道我正在尝试做的事情是否会以这种方式工作。有没有办法通过动态 SQL 从这个过程调用中检索输出参数？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-23T21:00:29.510

不要使用字符串连接将参数传递给动态 SQL。这完全被认为是一种不好的做法，不仅对 Oracle 而言。

这很糟糕，但主要的失败点是在动态 SQL 字符串中使用局部变量的名称，因为它在引入该变量的代码块之外的任何地方都不可见。

您的代码应如下所示：

```
declare 
  v_sql varchar2(4000);
  p_procname varchar2(100);
  p_input1 number;
  p_input2 number;
  v_output1 number;   
begin

  v_sql := 'begin ' || p_procname || '(:p_input1, :p_input2, :v_output); end;';

  execute immediate v_sql 
  using in p_input1, in p_input2, out v_output1;

end; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T20:54:28.117

[在这里](https://docs.oracle.com/cd/B12037_01/appdev.101/b10807/11_dynam.htm#CACDDACH)找到我的答案。

```
v_sql := 'BEGIN ' || p_procname || '(:a, :b, :c); END;';

EXECUTE IMMEDIATE v_sql
USING IN p_input1, IN p_input2, OUT v_output1; 
```

# nginx - nginx 与 websocket 和 https 内容在同一个 url

> ID：16178860
> 
> 赞同：3
> 
> 时间：2013-04-23T20:45:10.157
> 
> 标签：nginx, websocket, config

我的服务器在 https 中提供根 url：

*   文件，休息资源
*   网络套接字

我希望我的配置支持 websocket，但它不起作用。

我使用支持 websocket 代理的 nginx 1.3.16。

这是我的 nginx 配置的一部分：

```
 map $http_upgrade $connection_upgrade {
        default upgrade;
        ''      close;
    }

server {
    listen 443 default ssl;
    server_name localhost;

    ssl                        on;
    ssl_certificate        ssl/server.crt;
    ssl_certificate_key  ssl/server.key;

    ssl_protocols        SSLv3 TLSv1 TLSv1.1 TLSv1.2;
    ssl_ciphers RC4:HIGH:!aNULL:!MD5;
        ssl_prefer_server_ciphers on;
        keepalive_timeout    60;
    ssl_session_cache    shared:SSL:10m;
        ssl_session_timeout  10m;

    ### We want full access to SSL via backend ###
        location / {
        proxy_pass http://localhost:8080;       

            ### force timeouts if one of backend is died ##
                proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504;

            ### Set headers ####
                    proxy_set_header        Accept-Encoding   "";
                proxy_set_header        Host            $host;
                proxy_set_header        X-Real-IP       $remote_addr;
                proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;

            ### Most PHP, Python, Rails, Java App can use this header ###
            #proxy_set_header X-Forwarded-Proto https;##
            #This is better##
                proxy_set_header        X-Forwarded-Proto $scheme;
            add_header              Front-End-Https   on;

        ### By default we don't want to redirect it ####
            proxy_redirect     off;
      }
    location /writever/chat {
        proxy_pass http://localhost:8080/writever/chat;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
    }
} 
```

这是我在 nginx 中看到的错误：

```
2013/04/23 22:41:52 [error] 17011#0: *2093 upstream timed out (110: Connection timed out) while reading response header from upstream, client: 127.0.0.1, server: localhost, request: "GET /writever/chat?X-Atmosphere-tracking-id=0&X-Atmosphere-Framework=1.0.12&X-Atmosphere-Transport=websocket&X-Cache-Date=0&Content-Type=application/json&X-atmo-protocol=true HTTP/1.1", upstream: "http://127.0.0.1:8080/writever/chat?X-Atmosphere-tracking-id=0&X-Atmosphere-Framework=1.0.12&X-Atmosphere-Transport=websocket&X-Cache-Date=0&Content-Type=application/json&X-atmo-protocol=true", host: "localhost" 
```

我不确定这两个位置是否可以一起工作，如果顺序很重要，因为“/”包含/writever/chat。

任何帮助将不胜感激。

* * *

**更新：**我有以前的 nginx 版本的遗骸。清洁后，一切似乎都正常。所以我会保留这个配置，直到我发现问题或更好的东西。我会让你知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T20:11:25.893

如上所述，我的问题是 nginx 安装不正确。

彻底卸载任何版本 < 1.3.13-（执行 sudo updatedb；找到​​ nginx 以确保），然后安装新版本。

目前你必须手动完成（还没有 apt-get）：

```
sudo apt-get install build-essential libssl-dev zlib1g-dev 
```

**聚合酶链反应**

```
cd ~/src #make this if it doesn't exist
wget ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre/pcre-8.30.tar.gz
tar -xzvf pcre-8.30.tar.gz
cd pcre-8.3X/
./configure # /usr/local is the default so no need to prefix
make
sudo make install
sudo ldconfig # this is important otherwise nginx will compile but fail to load 
```

**nginx**

```
wget http://nginx.org/download/nginx-1.4.0.tar.gz   -> check for latest version on nginx website
tar -xvzf nginx-1.4.0.tar.gz
cd nginx-1.4.0

./configure --with-http_flv_module \
--with-http_ssl_module \
--with-http_gzip_static_module

make
sudo make install (uninstall previous version if nginx before) 
```

[资源](https://jamiecurle.co.uk/blog/compiling-nginx-ubuntu/)

# emacs - 是否有 emacs 只读 cline？

> ID：16178862
> 
> 赞同：0
> 
> 时间：2013-04-23T20:45:15.027
> 
> 标签：emacs, readonly

是否有一个 emacs 选项可以从命令行只读文件？
我正在寻找类似的东西`vim -R filename`。
最好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:48:44.543

```
emacs FILE --eval '(setq buffer-read-only t)' 
```

[https://superuser.com/questions/204236/how-can-i-open-a-file-read-only-from-command-line-with-emacs-vi-vim](https://superuser.com/questions/204236/how-can-i-open-a-file-read-only-from-command-line-with-emacs-vi-vim)

# c - 无法通过教程草图从 arduino mega 将数据上传到 Cosm

> ID：16178873
> 
> 赞同：3
> 
> 时间：2013-04-23T20:46:02.467
> 
> 标签：c, upload, arduino, cosm, xively

我无法通过以太网屏蔽从我的 Arduino Mega 上传数据到 Cosm。我尝试了其中一个教程示例 ( [`DatastreamUpload.ino`](https://github.com/cosm/cosm-arduino/blob/master/examples/DatastreamUpload/DatastreamUpload.ino))。我使用了 Cosm 在注册时提供给我的 API 密钥和 feed ID，并将`init()`函数更改为使用静态 IP 地址，如下所示：

```
 byte mac[] = {0x90, 0xA2, 0xDA, 0x0D, 0xD3, 0x45 };
    IPAddress ip(192,168,0, 110);
    IPAddress gateway(192,168,0, 1);
    IPAddress subnet(255, 255, 255, 0); 
```

然后：

```
 Ethernet.begin(mac, ip, gateway, subnet); 
```

这是串行监视器的输出：

```
读取传感器值 452.00
上传到 Cosm
cosmclient.put 返回 -1

读取传感器值 451.00
上传到 Cosm
cosmclient.put 返回 -1

读取传感器值 378.00
上传到 Cosm
cosmclient.put 返回 -3

读取传感器值 352.00
上传到 Cosm
cosmclient.put 返回 -3

```

有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:02:26.253

不出所料，你链接到的 ino 看起来 100% 洁净，我很难看到与我使用的不同的东西。

作为预防措施，我会输入 int ret=0; 在循环的开始

我知道您只有一个传感器，但建议您仔细将其识别为 sensorId0

我有一个缓冲区

`const int bufferSize = 100; char bufferValue[bufferSize]; CosmDatastream datastreams[] = { CosmDatastream(sensorId0, strlen(sensorId0), DATASTREAM_FLOAT),`

完整的瓶子于去年 10 月在 cosm 论坛上发布。

我不使用那个 ip、网关和子网的东西。大概是把水搅浑了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T21:51:14.717

目前缺乏这方面的文档，需要查看源代码才能找到。这些错误代码定义[`HttpClient.h`](https://github.com/amcewen/HttpClient/blob/master/HttpClient.h)如下：

```
// The end of the headers has been reached.  This consumes the '\n'
static const int HTTP_SUCCESS =0;
// Could not connect to the server
static const int HTTP_ERROR_CONNECTION_FAILED =-1;
// This call was made when the HttpClient class wasn't expecting it
// to be called.  Usually indicates your code is using the class
// incorrectly
static const int HTTP_ERROR_API =-2;
// Spent too long waiting for a reply
static const int HTTP_ERROR_TIMED_OUT =-3;
// The response from the server is invalid, is it definitely an HTTP
// server?
static const int HTTP_ERROR_INVALID_RESPONSE =-4; 
```

# c - C：函数的隐式声明

> ID：16178876
> 
> 赞同：18
> 
> 时间：2013-04-23T20:46:35.600
> 
> 标签：c, sockets, implicit-declaration

我正在执行一项任务，我们正在开发自己的 RPC 客户端。在编译我的服务器部分时，我收到以下警告：

```
implicit declaration of function 'read'
implicit declaration of function 'write' 
```

我知道如果我要在我的 main 之后创建一个函数，我通常会收到此警告，例如：

```
int main() {
    doSomething();
}

void doSomething() {
    ...
} 
```

在上述情况下，它应该抱怨我创建的函数“doSomething”。

那么为什么我的编译器会抱怨一个系统调用是隐式声明的，当它出现在一个在 main 之前声明的函数中时？下面是出现系统调用的函数。

```
void Open(int connfd) {
/*Get message size*/
unsigned char temp[4] = { 0 };
int n = read(connfd, temp, 4);
if(n < 0) {/*On error*/
    perror("Read error");
    exit(1);
}/*End if*/
unsigned int msgSize = temp[0] +
    (temp[1] * 256) + 
    (temp[2] * 256 * 2) + 
    (temp[3] * 256 * 3);
printf("msgSize = %d\n", msgSize);

/*Allocate memory for message*/
char * msg = malloc(msgSize);
if(msg == NULL) {
    perror("Allocation error");
    exit(1);
}/*End if*/
msg = memset(msg, 0, msgSize);

/*Read entire message from client*/
n = read(connfd, msg, msgSize);
if(n < 0) {/*On error*/
    perror("Read error");
    exit(1);
}/*End if*/

/*Extract pathname from message - NULL terminated*/
char * pathname = malloc(strlen(msg) + 1);
if(pathname == NULL) {
    perror("Allocation error");
    exit(1);
}/*End if*/
pathname = memset(pathname, 0, strlen(msg) + 1);
pathname = memcpy(pathname, msg, strlen(msg));

/*Extract flags from message*/
int i;
for(i = 0; i < sizeof(int); i++) {
    temp[i] = msg[strlen(pathname) + 1 + i];
}/*End for i*/
unsigned int flags = temp[0] + 
    (temp[1] * 256) + 
    (temp[2] * 256 * 2) + 
    (temp[3] * 256 * 3);

/*Extract mode from message*/
for(i = 0; i < sizeof(mode_t); i++) {
    temp[i] = msg[strlen(pathname) + 1 + sizeof(int) + 1 + i];
}/*End for i*/
mode_t mode = temp[0] + 
    (temp[1] * 256) + 
    (temp[2] * 256 * 2) + 
    (temp[3] * 256 * 3);

free(msg);/*Free msg since it is no longer needed*/

/*Open pathname*/
umask(0);
int fd = open(pathname, flags, mode);

free(pathname);/*Free pathname since it is no longer needed*/

/*Prepare response*/
char * response = malloc(sizeof(int) * 2);
if(response == NULL) {
    perror("Allocation error");
    exit(1);
}/*End if*/
response = memset(response, 0, sizeof(int) * 2);

/*Build return message*/
memcpy(&response[0], &fd, sizeof(fd));
memcpy(&response[4], &errno, sizeof(fd));

/*Can't guarante socket will accept all we try to write, cope*/
int num, put;
int left = sizeof(int) * 2; put = 0;
while(left > 0) {
    if((num = write(connfd, response + put, left)) < 0) {
        perror("inet_wstream: write");
        exit(1);
    } else {
        left -= num;
        put += num;
    }/*End else*/
}/*End while*/

free(response);/*Free response since it is no longer needed*/

return;
}/*End Open*/ 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-04-23T20:48:03.320

在您的程序中添加`#include <unistd.h>`包含指令。

`read`和`write`函数是在其中声明的`unistd.h`，您需要先声明函数才能调用它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T20:56:07.393

*隐式函数声明*是编译器第一次看到用作函数调用的那些（与首先看到原型或函数定义的那些相反）。

“系统调用”也不例外，因为 C 标准没有区分“普通函数”和“系统调用”。您可能忘记包含提供原型 ( `unistd.h`) 的相关标题。

# c# - 根据数据改变风格

> ID：16178877
> 
> 赞同：1
> 
> 时间：2013-04-23T20:46:38.520
> 
> 标签：c#, wpf, xaml, mvvm, datatemplate

考虑下面的 XAML =>

```
 <fluent:Ribbon x:Name="MenuRibbon"
                       Title="title"
                       SnapsToDevicePixels="True">
        <fluent:RibbonTabItem x:Name="Home"
                                  Header="Home">
            <fluent:RibbonGroupBox Header="Project">
                <fluent:InRibbonGallery MinItemsInRow="3"
                                            MaxItemsInRow="6"
                                            Width="300"
                                            ItemWidth="64"
                                            ItemHeight="56"
                                            ItemsSource="{Binding Projects}">
                    <fluent:InRibbonGallery.ItemTemplate>
                        <DataTemplate>
                            <DockPanel>
                                <Border BorderBrush="{x:Null}"  Height="56">

                                    <TextBlock VerticalAlignment="Center" HorizontalAlignment="Center" DockPanel.Dock="Bottom"
                                               Text="{Binding Name}">
                                    </TextBlock>
                                </Border>
                            </DockPanel>
                        </DataTemplate>
                    </fluent:InRibbonGallery.ItemTemplate>
                </fluent:InRibbonGallery>
            </fluent:RibbonGroupBox>
        </fluent:RibbonTabItem>
    </fluent:Ribbon> 
```

我已经将项目的 ObservableColleciton 绑定到 InRibbonGallery ，并且 ViewModel 中存在一个项目实例（ActiveProject）。
在 DataTemplate 中定义的 TextBlock，用于显示项目对象的名称。
如何更改包含 Active Project 的 TextBlock 的颜色？
视图模型：

```
public class ViewModel : ViewModelBase
{
    private ObservableCollection<Project> _projects;

    public ViewModel()
    {
        Projects = new ObservableCollection<Project>(new List<Project>
                                                         {
                                                             new Project {Id = "0", Name = "Project1"},
                                                             new Project {Id = "1", Name = "Project2"},
                                                             new Project {Id = "2", Name = "Project3"}
                                                         });
        Project = Projects[0];
    }

    public ObservableCollection<Project> Projects
    {
        get { return _projects; }
        set
        {
            _projects = value;
            RaisePropertyChanged(() => Projects);
        }
    }

    public Project Project { get; set; }
}

public class Project : ObservableObject
{
    private string _id;
    private string _name;

    public string Name

    {
        get { return _name; }
        set
        {
            _name = value;
            RaisePropertyChanged(() => Name);
        }
    }

    public string Id
    {
        get { return _id; }
        set
        {
            _id = value;
            RaisePropertyChanged(() => Id);
        }
    }
} 
```

项目文件位于[此处](https://dl.dropboxusercontent.com/u/54490657/Stackoverflow/WpfApplication1.zip)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T21:15:40.297

您可以通过结合使用 a`MultiBinding`和 a`DataTrigger`来获得更好的结果。

所以你的 xaml 看起来像：

```
<Window.Resources>
  <vm:ViewModel x:Key="ViewModel" />
  <vm:ActiveProjectCheckConverter x:Key="ActiveProjectCheckConverter" />
</Window.Resources>
...
<TextBlock HorizontalAlignment="Center"
            VerticalAlignment="Center"
            DockPanel.Dock="Bottom"
            Text="{Binding Name}">
  <TextBlock.Style>
    <Style TargetType="{x:Type TextBlock}">
      <Setter Property="Background"
              Value="Transparent" />
      <Style.Triggers>
        <DataTrigger Value="True">
          <DataTrigger.Binding>
            <MultiBinding Converter="{StaticResource ActiveProjectCheckConverter}">
              <Binding Path="Name" />
              <Binding Path="DataContext.ActiveProject.Name"
                        RelativeSource="{RelativeSource FindAncestor,
                                                        AncestorType={x:Type fluent:InRibbonGallery}}" />
            </MultiBinding>
          </DataTrigger.Binding>
          <Setter Property="Background">
            <Setter.Value>
              <LinearGradientBrush StartPoint="1,0">
                <GradientStop Offset="0.0"
                              Color="#00FFFFFF" />
                <GradientStop Offset="1.1"
                              Color="#FFFFFFFF" />
              </LinearGradientBrush>
            </Setter.Value>
          </Setter>
        </DataTrigger>
      </Style.Triggers>
    </Style>
  </TextBlock.Style>
</TextBlock> 
```

和你的转换器：

```
public class ActiveProjectCheckConverter : IMultiValueConverter {
  public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture) {
    string first = values[0] as string;
    string second = values[1] as string;
    return !string.IsNullOrEmpty(first) && !string.IsNullOrEmpty(second) && first == second;
  }

  public object[] ConvertBack(object value, Type[] targetTypes, object parameter, CultureInfo culture) {
    throw new NotImplementedException();
  }
} 
```

现在我又做了一个更改，您的 ViewModel 中的 Project 对象，如果您希望对它的更改反映在 View 中，您需要自己实现 INPC。所以我确实更新了它并将其重命名为`ActiveProject`

```
private Project _activeProject;

public Project ActiveProject {
  get {
    return _activeProject;
  }
  set {
    if (value == _activeProject)
      return;
    _activeProject = value;
    RaisePropertyChanged(() => ActiveProject);
  }
} 
```

**更新**

您可以在以下位置找到上述更新：[Dropbox-Link](https://www.dropbox.com/s/h786xuzfftef2uv/WpfApplication1.rar)

# mysql - MySQL SUBSTRING 使用查询的长度和位置值与检索后的编程语言子字符串

> ID：16178878
> 
> 赞同：0
> 
> 时间：2013-04-23T20:46:42.533
> 
> 标签：mysql, substring, multiple-select-query

我正在访问一个 chado 结构化的 mysql 数据库。我通过基因产品搜索，对于这个例子，产品是“双功能 GDP-岩藻糖合成酶：GDP-4-dehydro-6-deoxy-D-甘露糖差向异构酶和 GDP-4-dehydro-6-L-deoxygalactose reductase”。

然后，我可以使用 JOIN 语句来查找该基因所在的程序集及其坐标。下面的 SQL 语句是有效的，将返回程序集的序列（不仅仅是基因的序列），以及感兴趣的基因在程序集上的开始和停止位置。

```
SELECT f.uniquename AS protein_accession, product.value AS protein_name, srcfeature.residues AS residue_sequence, srcassembly.name AS source_type, location.fmin AS location_min, location.fmax AS location_max, location.strand
FROM feature f
JOIN cvterm polypeptide ON f.type_id=polypeptide.cvterm_id
JOIN featureprop product ON f.feature_id=product.feature_id
JOIN cvterm productprop ON product.type_id=productprop.cvterm_id
JOIN featureloc location ON f.feature_id=location.feature_id
JOIN feature srcfeature ON location.srcfeature_id=srcfeature.feature_id
JOIN cvterm srcassembly ON srcfeature.type_id=srcassembly.cvterm_id
WHERE polypeptide.name = 'polypeptide'
AND productprop.name = 'gene_product_name'
AND product.value LIKE '%bifunctional GDP-fucose synthetase: GDP-4-dehydro-6-deoxy-D-mannose epimerase and GDP-4-dehydro-6-L-deoxygalactose reductase%'; 
```

组装顺序非常长，我绝对不需要全部。使用 MySQL 的 SUBSTRING 方法提取我需要的部分以保存检索整个序列，还是在检索后使用编程语言的 substring 方法更好？下面的查询是我尝试使用在查询位置和长度期间获得的值的 SUBSTRING 方法。它不起作用，我的猜测是它需要多个 SELECT 语句才能工作。SQL 变得非常丑陋，我什至不确定最终的工作结果会更好。

**您的想法是，使用 SQL SUBSTRING 执行此操作更好，还是仅使用编程语言和子字符串方法来显示我想要的内容，即使我已经检索了整个内容？**

```
SELECT f.uniquename AS protein_accession, product.value AS protein_name, SUBSTRING(srcfeature.residues AS residue_sequence, location_min, location_max - location_min), srcassembly.name AS source_type, location.fmin AS location_min, location.fmax AS location_max, location.strand
FROM feature f
JOIN cvterm polypeptide ON f.type_id=polypeptide.cvterm_id
JOIN featureprop product ON f.feature_id=product.feature_id
JOIN cvterm productprop ON product.type_id=productprop.cvterm_id
JOIN featureloc location ON f.feature_id=location.feature_id
JOIN feature srcfeature ON location.srcfeature_id=srcfeature.feature_id
JOIN cvterm srcassembly ON srcfeature.type_id=srcassembly.cvterm_id
WHERE polypeptide.name = 'polypeptide'
AND productprop.name = 'gene_product_name'
AND product.value LIKE '%bifunctional GDP-fucose synthetase: GDP-4-dehydro-6-deoxy-D-mannose epimerase and GDP-4-dehydro-6-L-deoxygalactose reductase%'; 
```

**编辑** 这是一个不同基因（较短名称）的示例结果。我省略了查询序列中的部分，因为该部分有数千个字符长。我必须正确使用此处显示的 location_min 和 location_max 的值来 SUBSTRING。

```
+-------------------+---------------------------------------------------+-------------+--------------+--------------+--------+
| protein_accession | protein_name                                      | source_type | location_min | location_max | strand |
+-------------------+---------------------------------------------------+-------------+--------------+--------------+--------+
| ECDH10B_0026      | bifunctional riboflavin kinase and FAD synthetase | assembly    |        21406 |        22348 |      1 |
+-------------------+---------------------------------------------------+-------------+--------------+--------------+--------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:57:50.657

你`as`来错地方了。它需要在结束括号之后进行`substring()`：

```
SELECT f.uniquename AS protein_accession, product.value AS protein_name,
       SUBSTRING(srcfeature.residues, location_min, location_max - location_min)  AS residue_sequence,
       srcassembly.name AS source_type, location.fmin AS location_min, location.fmax AS location_max, location.strand
FROM feature f
JOIN cvterm polypeptide ON f.type_id=polypeptide.cvterm_id
JOIN featureprop product ON f.feature_id=product.feature_id
JOIN cvterm productprop ON product.type_id=productprop.cvterm_id
JOIN featureloc location ON f.feature_id=location.feature_id
JOIN feature srcfeature ON location.srcfeature_id=srcfeature.feature_id
JOIN cvterm srcassembly ON srcfeature.type_id=srcassembly.cvterm_id
WHERE polypeptide.name = 'polypeptide'
AND productprop.name = 'gene_product_name'
AND product.value LIKE '%bifunctional GDP-fucose synthetase: GDP-4-dehydro-6-deoxy-D-mannose epimerase and GDP-4-dehydro-6-L-deoxygalactose reductase%'; 
```

至于您的另一个问题，我认为在查询中提取所需的数据比将不必要的数据传回应用程序更有意义。这节省了通信开销。另外，如果数据库使用多个线程/处理器，它就有机会并行运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T20:56:08.793

如果这样的事情对你有用：

```
SELECT f.uniquename AS protein_accession, 
       product.value AS protein_name, 
       SUBSTRING(
                   srcfeature.residues, 
                   patindex('%SOMPATTERN%',srcfeature.residues), 
                   LEN(srcfeature.residues) - patindex('%SOMPATTERN%',srcfeature.residues)
                ) AS residue_sequence, 
      srcassembly.name AS source_type, 
```

然后在 SQL 中尝试。如果没有，请使用应用程序编程语言。

# django - Django：如何检索管理员中为 pre_save 信号中的模型定义的额外字段？

> ID：16178881
> 
> 赞同：1
> 
> 时间：2013-04-23T20:46:54.820
> 
> 标签：django, django-models, django-forms, django-admin

我通过添加额外字段重载了模型的管理表单

```
class MyModelAdminForm(forms.ModelForm):
    password = forms.CharField(widget=forms.PasswordInput(), required=False)

    class Meta:
        model = MyModel 
```

模型中不存在密码字段，我不希望它自动存储。我想在 pre_save 方法中检索此表单字段的值：

```
@receiver(pre_save, sender=Member)
def my_pre_save_method(sender, **kwargs):
    ... 
```

其实我没有找到找回它的方法。

这可能吗 ？如何 ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T03:09:21.547

`pre_save`从模型中调用`save`，它在表单级别上工作。该字段`password`不是模型字段，因此在模型实例上将不可用，因此您无法在`pre_save`.

因此，您只能使用 检索视图中的 is `cleaned_data`，然后以您想要的某种方式使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T21:04:15.870

我不完全明白你在这里问什么。

无论如何，您的问题过于笼统，无法完整回答。作为概述，您仅在**视图中“传递”****干净**的表单数据，即当您创建该对象的实例时。在您的情况下，这将是“会员”。

 **我建议您从[教程](https://docs.djangoproject.com/en/dev/intro/tutorial01/)开始学习 Django 。老实说，他们确实有帮助。**

# java - 从服务器捕获“已取消”事件

> ID：16178885
> 
> 赞同：0
> 
> 时间：2013-04-23T20:47:28.863
> 
> 标签：java, javascript, spring-roo

我有一个非常愚蠢的页面，它使用 Java 作为服务器。该页面当前允许用户上传一个 excel 文件，服务器会通过它进行解析。

现在的诀窍是，当文件中存在错误（无效的数据类型等）时，我正在重新创建一个突出显示错误行的 excel 文件并将其返回给浏览器。

如果出现的错误不仅仅是一行（比如他们上传了一个非 excel 文件），我会将它们重定向到“你的错误”页面。

问题是，我想在文件上传和处理时给用户一个简单的加载微调器。我已经尝试了几个 jQuery 插件，但是当文件返回时 javascript 没有捕获任何东西。chrome 调试器的网络选项卡显示 POST 已“取消”。我认为这是因为我的服务器没有返回重定向，而是返回了一个文档：

```
if (hasErrors) {
    log.debug("Errors were found, returning workbook");
    try {
        response.setHeader("Content-disposition", "attachment; filename=errorBook.xlsx");
        ServletOutputStream outputStream = response.getOutputStream();
        errorBook.write(outputStream);
        outputStream.flush();
        return null;
    } catch (Exception e) {
        log.error("Unable to write to the output stream", e);
    }
}
log.debug("No errors found in workbook upload");
return "redirect:/uploadfiles/" + encodeUrlPathSegment(uf.getId().toString(), httpServletRequest); 
```

我在服务器端使用 SpringRoo，它使用瓷砖等。当我返回一个文件时，请注意“return null”。我无法返回任何东西，因为它抱怨输出流已经被写入。

有没有其他人遇到过这样的问题？这是一个奇怪的情况吗？javascript有没有办法捕捉“服务器已取消表单发布”？

编辑：这是我现在使用的 jQuery。自从我最初发布以来，情况发生了变化，但问题仍然存在。我现在正在使用 fileupload 插件，发现当我强制 iFrame 时，文件下载但没有调用 done/fail/always 回调。

```
$("#uploadFile").fileupload({
    forceIframeTransport : true
})
    .bind("fileuploadsubmit", function(e, data) {
                    console.log("submitting");
    })
    .bind("fileuploaddone", function(e, data) {
        console.log("success!");
    })
    .bind("fileuploadfail", function(e, data) {
        console.log("Fail");
    })
    .bind("fileuploadalways", function(e, data) {
                    console.log("always");
    }); 
```

如果我删除了 force iframe，则会触发回调，但不会下载文档。实际上，在这种情况下，数据包含文件对象的字符串（只是一小部分字节）。

# javascript - html 选择菜单以提交 URL 操作

> ID：16178886
> 
> 赞同：0
> 
> 时间：2013-04-23T20:47:38.333
> 
> 标签：javascript, html

我正在尝试编写如下选项菜单：

```
<form>
  <select>
   <option value="1">1</option>
   <option value="2">2</option>
   <option value="3">3</option>
   <option value="4">4</option>
  </select>
 <input type="submit" value="Submit">
</form> 
```

我想要做的是让每个选项代表一个特定的 URL 操作，并且提交输入将执行访问所选选项的 URL（在新选项卡中，如 target="_blank"）的操作。

```
1 = http://one.example.net
2 = http://two.example.net
3 = http://three.example.net
4 = http://four.example.net 
```

我不知道是否需要任何类型的编程来将所选选项设置为提交输入的操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:55:17.237

像这样 - 给选择一个 ID 并将其添加到头部。无需对 html 进行其他更改

```
var URLs = ["",
  "http://one.example.net",
  "http://two.example.net",
  "http://three.example.net",
  "http://four.example.net"
]
window.onload=function() {
  document.getElementById("select1").onchange=function() {
    var URL = URLs[this.selectedIdex];
    if (URL) location=URL;       
  }
} 
```

或者像这样，因为你想要一个新标签 - 浏览器喜欢点击打开新窗口

给表单一个 ID 并添加`target="_blank"`到它

```
window.onload=function() {
  document.getElementById("form1").onsubmit=function() {
    var URL = URLs[this.selectedIdex];
    if (URL) {
      this.action=URL;      
      return true;
    }
    return false;// don't submit  
  }
} 
```

要在 php 中执行此操作，请提交具有 target="_blank" 的表单并将数组放在服务器上并执行

```
header("location:".$urls[$_GET["select"]]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T20:52:44.620

```
<head>
  <script>
    var urls = [
      /* [0] */ 'http://one.example.net',
      /* [1] */ 'http://two.example.net',
      /* [2] */ 'http://three.example.net',
      /* [3] */'http://four.example.net'
    ];
    function goToURL(s){
      // get selected index and subtract one to get the array's index
      var index = parseInt(s.options[s.selectedIndex].value, 10) - 1; 

      // verify a url exists for th eoption, and if so navigate to it
      urls[index] && window.location = urls[index];
    }
  </script>
</head> 
```

然后添加`onchange="goToURL(this);"`到`<select>`标签中。

快速而肮脏的例子：http: [//jsfiddle.net/Vfamc/](http://jsfiddle.net/Vfamc/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T20:53:19.110

你可以用 jQuery 来做到这一点......

```
$("form").submit(function () {
    var selectVal = $('select').val();
    var url = '';
    if(selectVal == 1) url = 'http://one.example.net';
    else if(selectVal == 2) url = 'http://two.example.net';
    else if(selectVal == 3) url = 'http://three.example.net';
    else if(selectVal == 4) url = 'http://four.example.net';

    if(url != '')
    {
        window.open(url, '_blank');
    }
}); 
```

小提琴：http: [//jsfiddle.net/3cWQP/](http://jsfiddle.net/3cWQP/)

# iis - 用于 ODBC 驱动程序的经典 ASP Microsoft OLE DB 提供程序错误“80004005”

> ID：16178890
> 
> 赞同：1
> 
> 时间：2013-04-23T20:47:52.053
> 
> 标签：iis, asp-classic, odbc, database-connection

我正在将应用程序从 IIS 6 迁移到 IIS 7.5，并且遇到了最奇怪的问题：

```
Microsoft OLE DB Provider for ODBC Drivers error '80004005' 

[Microsoft][ODBC Driver Manager] Data source name not found and no default driver specified 

/Complaints/Login.asp, line 175 
```

这是第 175 行附近的代码：

```
 myConn = getDatabaseConnection()
  set rs = Server.CreateObject("ADODB.Recordset")
  strSQL = "SELECT * FROM Users WHERE lower(Login) = lower('" & uId & "') and Active = 1"
  rs.Open strSQL, myConn, 3, 3 
```

这里没有什么特别的...

这是数据库方法：

```
function getDatabaseConnection()

    Dim strConnection

        strConnection = "Driver={SQL Server};Server=server.domain.com;Database=cc;uid=acc;pwd=xxx;"

    Set GetDatabaseConnection = Server.CreateObject("ADODB.Connection")
    GetDatabaseConnection.CommandTimeout = 60
    GetDatabaseConnection.ConnectionTimeout = 60
    GetDatabaseConnection.CursorLocation = 3

    GetDatabaseConnection.Open strConnection

end function 
```

这似乎适用于在同一应用程序池（.NET 1.1）中运行的类似经典 asp 应用程序

我尝试过：复制粘贴其他应用程序的代码，使用连接字符串代替 db 方法（当然抛出 500），更改应用程序池，谷歌，作为另一个踢它在 IIS 6 服务器上运行良好。

我查看了[用于 ODBC 驱动程序错误“80004005”的 OLE DB 提供程序](https://stackoverflow.com/questions/14280517/ole-db-provider-for-odbc-drivers-error-80004005)，并且我的连接字符串似乎正确，并且我的 ASP.NET 1.1 应用程序池只能在 32 位模式下运行。在以前的服务器上设置的 DSN 不相关任何一个。

我的应用程序在域 A 上的 IIS 5 和域 A 上的 IIS 6 上工作，但是这个 7.5 服务器在域 B 上。因此我使用的是 FQDN。不过，我还没有进行任何其他特定于域的更改。系统采用上述方法对用户进行认证。

编辑：也试过

```
strConnection = "dsn=my32bitdsn;uid=xxx;pwd=xxx;" 
```

我继承了这段代码，并且非常喜欢经典的 ASP，有人可以帮忙吗？

更新代码：

```
 Dim strConnection, oConn
  'get status 
  set rs = Server.CreateObject("ADODB.Recordset")
  strSQL = "SELECT * FROM Users WHERE lower(Login) = lower('" & uId & "') and Active = 1"
  'rs.Open strSQL, myConn, 3, 3

   strConnection = "Driver={SQL Server};Server=server.domain.com;Database=cc;uid=acc;pwd=xxx;"
  Set oConn = Server.CreateObject("ADODB.Connection")
    oConn.CommandTimeout = 60
    oConn.ConnectionTimeout = 60
    oConn.CursorLocation = 3
    oConn.Open strConnection
  Set rs = oConn.Execute(strSQL) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:40:19.373

可能只是表面上的改变，但也可能解决这个问题：

```
Function getDatabaseConnection()
    Dim strConnection, oConn
    strConnection = "Driver={SQL Server};Server=server.domain.com;Database=cc;uid=acc;pwd=xxx;"

    Set oConn = Server.CreateObject("ADODB.Connection")
    oConn.CommandTimeout = 60
    oConn.ConnectionTimeout = 60
    oConn.CursorLocation = 3
    oConn.Open strConnection

    Set getDatabaseConnection = oConn
End Function 
```

我一直害怕直接使用函数名会导致不需要的调用或奇怪的结果，所以习惯了上述方式。

第二件事是您通过没有“设置”将连接分配为非对象，这也可能导致奇怪和意外的问题。将行更改为：

```
Set myConn = getDatabaseConnection() 
```

希望以上之一将解决这个奇怪的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T16:24:41.370

我不确定你是否已经解决了这个错误，但如果你想尝试让它抛出一个可读的错误，你可以试试这个作为连接字符串的一部分。

1.  您的连接字符串说数据库服务器是 server.domain.com 还是您只是将其放置在那里以替换您的公司信息？

2.  试试这个：

    ```
    dim cn
    Set cn=Server.CreateObject("ADODB.Connection")
    cn.ConnectionString="Provider=SQLOLEDB.1;Persist Security Info=True;User ID=sa;Initial Catalog=dbName;Data Source=(local) or computername;PWD=;Password=yourpassword;"
    on error resume next
    cn.Open
    if err.number <> 0 then response.Write(err.description) 
    on error goto 0 
    ```

# matlab - 为 Matlab 编译 MEX 文件时如何忽略“mexopts.sh”？

> ID：16178891
> 
> 赞同：3
> 
> 时间：2013-04-23T20:47:53.260
> 
> 标签：matlab, mex

`-f`命令行参数`mex`允许指定`mexopts.sh`我们希望使用的位置。但是有没有办法告诉 Matlab 忽略`mexopts.sh`？为了编译特定的 MEX 文件，我需要`CC`在`CFLAGS`调用`mex`. 已经给出的值`mexopts.sh`会导致冲突并导致`mex`失败。

谢谢！

# c++ - 从地图中擦除时出现奇怪的段错误

> ID：16178898
> 
> 赞同：1
> 
> 时间：2013-04-23T20:48:09.977
> 
> 标签：c++

我有以下代码：

```
//update it in the map
      std::map<std::string, std::string>::iterator it;
      for(it = spreadsheets.at(i).cells.begin(); it != spreadsheets.at(i).cells.end(); ++it)
      {
        if(it->first == change.first)
        {
          if(change.second == "")
          {
            spreadsheets.at(i).cells.erase(change.first);
          }
          else
          {
          it->second = change.second;
          }
        }
      } 
```

上面的代码**在我的 mac 上完美**运行，但是当我**在 linux 计算机上运行时，**它会抛出一个 seg 错误`spreadsheets.at(i).cells.erase(change.first);`

知道是什么导致了这个错误吗？我试过改成`erase(change.first)`，`erase(it)`但我仍然遇到段错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T20:54:52.933

从以下文档`std::map::erase`：

> 对已擦除元素的引用和迭代器无效。其他引用和迭代器不受影响。

你的循环仍在继续，你增加你的（现在无效的）迭代器。

修复：以另一种方式增加您的迭代器，例如：

```
std::map<std::string, std::string>::iterator it;
for (it = spreadsheets.at(i).cells.begin(); it != spreadsheets.at(i).cells.end();/*NOTE: no increment here*/)
{
  if (it->first == change.first)
  {
    if (change.second == "")
    {
      it = spreadsheets.at(i).cells.erase(it); // C++11 only
      // in both C++03 and C++11:  spreadsheets.at(i).cells.erase(it++);
    }
    else
    {
      it->second = change.second;
      ++it;
    }
  }
  else
    ++it;
} 
```

或者为了避免由于众多执行路径而造成的混淆（同样的混淆让我`else`在第一次尝试时忘记了最后一个）：只需复制迭代器，递增原始迭代器，然后使用副本。在您的情况下，这可能看起来有点矫枉过正，但对于更复杂的循环，这有时是保持理智的唯一方法。;)

```
std::map<std::string, std::string>::iterator it;
for (it = spreadsheets.at(i).cells.begin(); it != spreadsheets.at(i).cells.end();/*NOTE: no increment here*/)
{
  std::map<std::string, std::string>::iterator this_it = it++;
  if (this_it->first == change.first)
  {
    if (change.second == "")
    {
      spreadsheets.at(i).cells.erase(this_it);
    }
    else
    {
      this_it->second = change.second;
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T20:51:57.513

因为当您从容器中擦除时，您的迭代器不再有效，但您的循环仍在继续。

您可以将循环更改为：

```
std::map<std::string, std::string>::iterator it = spreadsheets.at(i).cells.begin();
while (it != spreadsheets.at(i).cells.end())
{
  if(it->first == change.first)
  {
    if(change.second == "")
    {
      spreadsheets.at(i).cells.erase(it++);  //Post increment returns a copy pointing at the current element, while it already points to the next element and thus stays valid after erase
    }
    else
    {
      it->second = change.second;
      ++it;
    }
  }
  else
    ++it;
} 
```

现在我想起来了，为什么要用迭代器指向的对的第一个元素来擦除，即：

```
spreadsheets.at(i).cells.erase(change.first); 
```

代替

```
spreadsheets.at(i).cells.erase(it); 
```

它的效率较低，因为必须进行另一次查找。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T20:53:20.247

从映射中删除指向该元素的元素后，该元素将失效。从而`spreadsheets.at(i).cells.erase(change.first);`使`it`无效。请参阅[迭代器无效规则](https://stackoverflow.com/questions/6438086/iterator-invalidation-rules)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-02T09:47:38.163

对已擦除元素的引用和迭代器无效。

```
//update it in the map
std::map<std::string, std::string>::iterator it;
for(it = spreadsheets.at(i).cells.begin(); it != spreadsheets.at(i).cells.end(); ++it)
{
    if(it->first == change.first)
    {
        if(change.second == "")
        {
            spreadsheets.at(i).cells.erase(it--);
        }
        else
        {
            it->second = change.second;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T20:52:24.827

目前，您`spreadsheets.at(i).cells.erase(change.first);`在 std::map 中执行迭代器（在当前 change.first 键处）无效。因此，当您这样做时`it++`，这是未定义的行为。

cf[迭代器失效](https://stackoverflow.com/questions/4114503/rules-for-iterator-invalidation)规则，了解有关标准容器中迭代器失效的规则

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-23T20:56:40.653

在擦除之前增加迭代器。为什么它没有发生在 Mac 上？谁知道..不同的操作系统，不同的行为。

[所以](https://stackoverflow.com/questions/263945/what-happens-if-you-call-erase-on-a-map-element-while-iterating-from-begin-to)

# jquery - jQuery 下划线作为函数的第一个参数

> ID：16178899
> 
> 赞同：2
> 
> 时间：2013-04-23T20:48:10.083
> 
> 标签：jquery

我有以下代码片段：

标记：

```
<tr name="tr3" id="tr3">
    <td>
        <input type="text" class="common_cls" name="dt[]" id="dt1"> 
    </td>
    <td>
        <input type="hidden" name="fn[]" id="fn1">
        <span id="sp1"><a href="#" id="ah1">choose file</a><span>
        <input type="file" name="fff[]" id="ff">
        <input type="text" style="display:none">
    </td>
</tr>'; 
```

JAVASCRIPT

```
$(document).on('click', '#add_row', function() {
    var row = $("table#DocTable tr:eq(3)");
    row.clone(true)
        .show()
        .find("a, input, span").each(function() {
            $(this)
                .val('')
                .attr('id', function(_, id) {
                    var newcnt = id + count;
                    return id + count;
                });
        })
        .end()
        .appendTo("table");
    count++; 
```

一年多前我写了这篇文章，我在有问题的地方得到了帮助。

下划线作为 .attr 方法中调用的函数的第一个参数的目的是什么？

该功能究竟是如何工作的？它只是用递增的数字替换 current in `id`all`a`和tags 吗？`span``input`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T20:49:54.470

下划线通常用作未命名变量的占位符。基本上，如果您不打算使用该变量，则无需为其查找名称，因此您只需使用下划线即可。

不要与 i18n 下划线函数或[underscore.js](http://underscorejs.org/)混淆。

**PS**：我不确定这种做法是从哪里来的，但我第一次看到下划线被用于某些东西是在我学习 Prolog 的时候（这`_`实际上意味着“任何值”之类的东西）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T20:51:20.467

在这种情况下，当前元素的索引存储在`_`中。该函数所做的只是使用该元素的 id + count 更新每个元素的属性。如果您改为命名它，`index`或者`i`您可能已经猜到它包含索引..

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-18T16:08:47.853

这个答案有很多方面，分散在评论和其他答案中。因此，我将尝试在下面合并它们：

首先，在上述代码中，下划线参数的使用如下：-

```
$(this).val('').attr('id', function(_, id) { return id + i }); 
```

从[这里](http://api.jquery.com/attr/#attr-attributeName-function)`attr`的函数的 jQuery 文档中，存在一个重载形式is 。在这种形式中被描述为`attr``.attr( attributeName, function )``function`

> 类型：函数（整数索引，字符串属性）

因此，它需要两个参数。但是，在我们的代码中，我们只需要`id`，它恰好是第二个参数。

现在，由于 JS 处理函数参数的方式，我们不能将其写为`function(id)`，因为 JS 会映射`id`到`index`（预期的第一个参数`function`）。因此，我们编写的函数需要有两个参数。

在这里，一个标准的约定开始发挥作用。[正如这里](https://stackoverflow.com/a/32198002/2869791)提到的，

> 下划线字符 (_) 用作指示未使用的函数参数的标准方式。

然而，这只是一个惯例，而不是一个规则。我们可以将未使用的参数命名为`index`或`unused`同样。那是，

```
$(this).val('').attr('id', function(unused, id) { return id + i }); 
```

将是一个有效的等价物。

因此，这种使用 _ 代替未使用参数的用法可以用于任何其他具有类似覆盖形式的 jQuery 函数。例如，在[这个](https://stackoverflow.com/a/36694281/2869791)答案中，我们可以看到下划线在调用中的用法`$.text()`。只是为了确认，有一个重写的形式，它接受一个带有两个参数的函数，如此[处](http://api.jquery.com/text/#text-function)`$.text()`所示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T20:51:29.243

嗯，这只能由作者来回答。`_`函数的第一个参数的名称。

根据我可以看到的代码，我猜测由于该`_`变量根本没有在函数中使用，因此该函数中不需要第一个参数，因此它被“存根”`_`而不是随机姓名。

# php - 如何使用 PyroCMS 在 PHP 中的 if else 中调用插件

> ID：16178903
> 
> 赞同：0
> 
> 时间：2013-04-23T20:48:31.917
> 
> 标签：php, pyrocms

例子

```
<?php
if ($a > $b) {
    {{ graph:top_coders_one }}
} elseif ($a == $b) {
    {{ graph:daily_commits_two }}
} else {
    {{ graph:commit_stream_two }}
}
?> 
```

我的插件功能在 php if/else 中不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T21:02:36.930

```
{{ if a > b }}
  {{ graph:top_coders_one }}
{{ else }}
  {{ graph:top_coders_two }}
{{ endif }} 
```

不带`<?php`标签试试

# php - 需要页面等待 php 完成

> ID：16178909
> 
> 赞同：1
> 
> 时间：2013-04-23T20:48:47.707
> 
> 标签：php, mysql, http

简单的问题，但我似乎无法找到答案。

我的 php 代码需要很长时间才能处理，因为我正在从大型数据库生成报告。我编写了一个 html 表以在网页中显示结果，但是在我的 php 代码完成之前页面加载（并被发送到客户端），因为所有表值都是空的。我在 phpMyAdmin 上运行查询，它可以工作，但只需要很长时间。想法？除了在网页中查看报告之外，还有其他方法可以以表格格式显示报告吗？我可以让网页等到代码完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T21:05:31.560

有几种方法

一个正在使用

```
ob_start();
// processing
ob_flush();
flush(); 
```

接下来是添加分页，也就是限制结果大小。

`SELECT * FROM table LIMIT 0,10`

`SELECT * FROM table LIMIT 10,10`

`SELECT * FROM table LIMIT 20,10`

当然这一切都取决于你的代码，没有看到你的代码，只能猜测可能是什么原因

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T21:07:29.763

> 我可以让网页等到代码完成吗？

编写实现异步数据库调用的 PHP 代码真的*非常*困难——如果 PHP 脚本在 MySQL 脚本之前完成，则需要这样做。只需更改去掉 PHP 代码中的所有异步处理程序，并使 MySQL 调用阻塞，它不会在查询完成之前退出 - 但我非常怀疑这就是你的代码真正在做什么。

> 但是页面加载（并被发送给客户端）

这也很困惑——如果你正在生成HTML，那么在 HTML 发送到客户端*之后页面会被加载——而不是之前。*

> 简单的问题

不，不是——它很困惑！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T21:59:56.523

**审慎之道**

至少我推荐的一种正确方法是，根据用户的请求，将作业添加到由后台进程处理的队列中，例如，从 cron 运行的 PHP 命令行脚本工作。在此过程中，您可以通过网页上的 AJAX 调用定期向服务器请求作业状态，显示进度（如果可以），并在作业完成后向用户显示结果。由于命令行 PHP 脚本没有时间限制，因此您不必担心超时。

另一种方式是在 37signals 的 Highrise 中实现的方式——他们接受添加工作的请求，但显示一个页面，上面写着“它准备好时就准备好了”，当它准备好时，他们向用户发送一封电子邮件说“这是你的文件，来这里下载。”

**快速修复**

回答“我可以让网页等到代码完成吗？”的问题。– 有一个[`set_time_limit()`](http://php.net/manual/en/function.set-time-limit.php)功能可以完全满足您的需求。

# c# - 文件名、目录名或卷标语法不正确 - 映射共享网络驱动器 (ASP.NET MVC3 C#)

> ID：16178913
> 
> 赞同：2
> 
> 时间：2013-04-23T20:49:07.187
> 
> 标签：c#, iis

您好，我正在尝试将文件复制到共享网络，但我继续收到错误消息`The filename, directory name, or volume label syntax is incorrect`。有人可以抓住我做错了什么。我的应用程序也在使用 ASP.NET MVC3 运行，谢谢！

**复制代码**

```
File.Copy(@path, @Properties.Settings.Default.SharedMappedOutput); 
```

* * *

*路径是一个参数：* `C:\log\12345.pdf`
*Properties.Settings.Default.SharedMappedOutput Path:* `\\vfler_xx\evl_xx\VT\`。

我想要完成的事情：我想将文件从`Path`（文件名）复制到`SharedMappedOutput`（目录）

* * *

额外的信息

*   视窗服务器 2008 R2
*   IIS 7.5
*   ASP.NET MVC3 C#

* * *

**编辑**
我在@Steve 的帮助下更改了我的代码，但现在它说我无权访问我没有指定的路径。

```
String dest_path = Properties.Settings.Default.SharedMappedOutput;
File.Copy(@path, Path.Combine(dest_path, Path.GetFileName(path))); 
```

**错误**
`Access to the path 'c:\windows\system32\insetsrv\12345.pdf' is denied` 我没有指定这个路径，我不确定它为什么要访问这个路径。

链接到新问题 [https://stackoverflow.com/questions/16179585/iis-acccess-to-the-path-c-windows-system32-inetsrv-12345-pdf-is-denied](https://stackoverflow.com/questions/16179585/iis-acccess-to-the-path-c-windows-system32-inetsrv-12345-pdf-is-denied)

* * *

谢谢你。如果问题中有任何问题或误解，请告诉我。再次提前感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T20:52:16.037

File.Copy 不会将一个目录复制到另一个目录，而只是一个文件名。

您`c:\log`似乎只是一个目录的名称，正如[MSDN 上的文档](http://msdn.microsoft.com/en-us/library/c6cfw35a.aspx)所述，这不起作用

要复制源路径中的所有文件，您可以这样写

```
string destPath = Properties.Settings.Default.SharedMappedOutput;
foreach (string aFile in Directory.GetFiles(path, "*.*"))
     File.Copy(aFile, Path.Combine(destPath, Path.GetFileName(aFile))); 
```

**编辑** 看到关于真实源名称的评论，那么答案仍然部分有效，因为目标也应该是文件名而不是目录。所以答案变成了

```
string sourceFile = @"C:\log\12345.pdf";
string destPath = Properties.Settings.Default.SharedMappedOutput;
File.Copy(sourceFile, Path.Combine(destPath, Path.GetFileName(sourceFile))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T20:55:56.060

如果我没记错的话，这与使用 UNC 路径有关。将共享映射为映射驱动器，它将像魅力一样工作。

这是将 unc 路径映射到映射驱动器的示例。 [http://www.codeproject.com/Articles/6847/Map-Network-Drive-API](http://www.codeproject.com/Articles/6847/Map-Network-Drive-API)

# javascript - 样式加载内容 jquerymobile

> ID：16178916
> 
> 赞同：1
> 
> 时间：2013-04-23T20:49:30.673
> 
> 标签：javascript, asp.net, jquery-mobile

我正在使用 jquery mobile 1.3 处理 asp.net 页面 我正在使用 vb 生成 asp.net 复选框和标签控件。然后我使用java脚本将asp标签转换为标签。所有代码看起来都很好，但我的控件不是样式（jquerymobile）。所以在我的页面加载和我得到的java脚本之后。

```
<input id="ContentPlaceHolder1_chkbox2" type="checkbox"name="ctl00$ContentPlaceHolder1$chkbox2">
<label for="ContentPlaceHolder1_chkbox2">YES</label> 
```

但没有设置为 jquery 移动复选框的样式我如何设置动态控件的样式。

> 我试过了：

```
$('#page1').trigger('create');`
$('#page1').page(); 
```

没有任何工作。请帮助谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T21:09:43.070

## 更新的答案

`type=checkbox`更改or的文本`type=radio`：

```
$('label[for=name]').find('span.ui-btn-text').text('New Text'); 
```

**[演示](http://jsfiddle.net/Palestinian/Pauph/)**包括：

*   更改文本
*   添加/创建新复选框，使用`.checkboxradio().trigger('create');`
*   动态“选中/取消选中”复选框，使用`.prop('check', true);`和`.checkboxradio('refresh);`

* * *

以这种方式刷新复选框或单选按钮

```
$('[type=checkbox]').checkboxradio('refresh') 
```

# c - C - 在没有头文件的多个文件中构造

> ID：16178917
> 
> 赞同：3
> 
> 时间：2013-04-23T20:49:33.583
> 
> 标签：c, data-structures, struct

我正在做一个大学项目，`C`其中要求非常严格，因为我不允许包含任何其他文件或修改任何头文件。

我目前正在尝试实现一个链接列表来存储一些记录，我需要它跨越两个`.c`文件。目前要使用全局变量，我一直在声明变量`file1.c`，然后在`file2.c`using `extern`. 但是我如何对结构执行此操作，因为我总是将它添加到`.h`文件中？

干杯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T20:50:48.567

将头文件中的内容放在每个源文件中。

很难辨别为什么*有人*会提出这样的要求。这就像被要求在没有任何金属工具的情况下建造木结构房屋。知道它可能想教什么吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T21:02:09.393

对你的程序设置这样的限制似乎很愚蠢，但我怀疑你的老师正试图让你实现*封装*。

你真的需要在两个文件中都使用结构吗？尝试拥有一个处理该结构的 .c 文件，并将对该结构的操作公开为函数调用。

例如：您可能决定让 file2.c 处理该结构。在任何函数之前，在任何`#include`语句之后声明 file2.c 中的结构 - 换句话说，如果你有一个头文件，你将在其中包含头文件。

然后，如果您需要从 file1.c 访问结构，请调用 file2.c 中的函数来为您完成这项工作。

尽量避免使用全局变量，而是传递参数。链表的一个典型全局变量可能是头（或锚）指针。您可以将其作为`static`file2.c 中的全局（或处理链接列表的任何一个）并将其隐藏 -​​ 应该不需要共享。

一旦链表上的所有操作都封装在一个文件中，它就变得独立于用户代码，并且可以在其他程序中使用。

# powershell - PowerShell Get-DiskUsage CmdLet：如何从不同的驱动器/目录列出？

> ID：16178919
> 
> 赞同：1
> 
> 时间：2013-04-23T20:49:43.457
> 
> 标签：powershell, powershell-3.0

我是 PowerShell 的相对新手，想了解更多关于函数、CmdLet 和人类可读值的信息。通常是为了学习新事物，看看别人做得很好。

所以我去找了一个[Get-DiskUsage](http://poshcode.org/3905) CmdLet 的源代码。

我可以 。将其输入 PowerShell，然后调用该函数。

不知何故，无论我如何称呼它，它总是使用当前目录来获取结果。

我错过了什么，它不会采用给定的 -Path 参数？

```
PS D:\bin> . .\DiskUsage.ps1
PS D:\bin> Get-DiskUsage -Path D:\ -h

Size Folder
---- ------
405M

PS D:\bin> Get-DiskUsage -Path C:\ -h

Size Folder
---- ------
405M

PS D:\bin> C:
PS C:\> Get-DiskUsage -Path C:\ -h

Size Folder
---- ------
 18G

PS C:\> 
```

脚本输出不正确，因为这是[SysInternals](http://technet.microsoft.com/en-us/sysinternals) DiskUsage 工具[du](http://technet.microsoft.com/en-us/sysinternals/bb896651.aspx)显示的内容：

```
D:\bin>du C:\

Du v1.4 - report directory disk usage
Copyright (C) 2005-2011 Mark Russinovich
Sysinternals - www.sysinternals.com

Files:        93367
Directories:  22541
Size:         21.817.875.778 bytes
Size on disk: 22.127.992.832 bytes

D:\bin>du D:\

Du v1.4 - report directory disk usage
Copyright (C) 2005-2011 Mark Russinovich
Sysinternals - www.sysinternals.com

Files:        132832
Directories:  15125
Size:         130.137.231.457 bytes
Size on disk: 54.992.396.288 bytes

D:\bin>du D:\bin

Du v1.4 - report directory disk usage
Copyright (C) 2005-2011 Mark Russinovich
Sysinternals - www.sysinternals.com

Files:        3118
Directories:  222
Size:         424.866.944 bytes
Size on disk: 288.858.112 bytes 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T00:52:38.623

```
Get-DiscUsage C:\ # NOT RECOMMENDED

Get-DiskUsage -Path C:\Users\JBennett\SkyDrive\WindowsPowershell\Scripts\IO\

Size Folder
---- ------
223424B C:\Users\JBennett\SkyDrive\WindowsPowershell\Scripts\IO\DU 
```

无论哪种方式都对我有用（如您所说，在第一次点源脚本之后）。

我不得不说，我不会使用它......它正在使用 PowerShell 进行递归目录扫描，生成（数千个）DirectoryInfo 对象，然后在每个文件夹上进行另一个递归目录扫描，创建一个新对象并汇总属性... 与 du.exe 相比，它非常慢，并且会消耗大量内存和 IO

## 稍微好一点的方法

当您希望递归地获取树中每个文件夹的大小时，算法上正确的方法不涉及 Get-ChildItem 上的 -Recurse 标志。你可能会做这样的事情：

```
function Get-Size {
  #.Synopsis
  #  Calculate the size of a folder on disk
  #.Description
  #  Recursively calculate the size of a folder on disk,
  #  outputting it's size, and that of all it's children,
  #  and optionally, all of their children
  param(
    [string]$root,
    # Show the size for each descendant recursively (otherwise, only immediate children)
    [switch]$recurse
  )
  # Get the full canonical FileSystem path:
  $root = Convert-Path $root

  $size = 0
  $files = 0
  $folders = 0

  $items = Get-ChildItem $root
  foreach($item in $items) {
    if($item.PSIsContainer) {
      # Call myself recursively to calculate subfolder size
      # Since we're streaming output as we go, 
      #   we only use the last output of a recursive call
      #   because that's the summary object
      if($recurse) {
        Get-Size $item.FullName | Tee-Object -Variable subItems
        $subItem = $subItems[-1]
      } else {
        $subItem = Get-Size $item.FullName | Select -Last 1
      }

      # The (recursive) size of all subfolders gets added
      $size += $subItem.Size
      $folders += $subItem.Folders + 1
      $files += $subItem.Files
      Write-Output $subItem
    } else {
      $files += 1
      $size += $item.Length
    }
  }

  # in PS3, use the CustomObject trick to control the output order
  if($PSVersionTable.PSVersion -ge "3.0") {
    [PSCustomObject]@{ 
      Folders = $folders
      Files = $Files
      Size = $size
      Name = $root
    }
  } else {
    New-Object PSObject -Property @{ 
      Folders = $folders
      Files = $Files
      Size = $size
      Name = $root
    }
  }
} 
```

这样，您就不会多次列出任何内容。不利的一面是您必须自己添加所有内容，因为您不能只使用 Measure-Object。

OP 中引用的脚本实际上列出了每个项目，无论它有多深。也就是说，如果文件位于 C:\Users\Jaykul\Documents\WindowsPowerShell\Scripts ... 中，它将显示在`gci -recurse`每个父文件夹中 - 如果您在根目录上调用脚本，则会出现五次。

当然，您仍在为每个文件创建一个 FileInfo，为每个目录创建一个 DirectoryInfo，加上我在脚本中手动创建的摘要 PSObject，所以即使这*几乎*与 du.exe 一样快，它也会有更多对记忆的影响。

然而，这是 PowerShell 中固​​有的权衡：做事更容易……因为我们有很重的对象。我们很乐意用易用性换取内存，有时甚至会影响性能。也就是说：是的，du.exe 会更快，但它是一个必须有人为一个目的而专门编写的一招一式的小马。如果您只想运行它并读取输出，这仍然是最好的方法。但是如果你想在脚本中使用它的输出，它会产生你必须解析的文本输出，而且很难收集这些信息作为整体仪表板式监控脚本输出的一部分......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-19T19:29:32.763

我喜欢 Jaykul 的回答，但它在 PS 2.0 中有一个错误，当目录为空时会返回错误的答案。我还对其进行了修改，以支持强制开关和深度开关，而不是递归，类似于原始的 Get-DiskUsage 脚本。

```
function Get-Size {
    #.Synopsis
    #  Calculate the size of a folder on disk
    #.Description
    #  Recursively calculate the size of a folder on disk,
    #  outputting it's size, and that of all it's children,
    #  and optionally, all of their children
    param(
        [string]$root=$PWD,
        # Show the size for each descendant recursively (otherwise, only immediate children)
        [Int]$Depth=1,
        [Switch]$Force
    )
    # Get the full canonical FileSystem path:
    $root = Convert-Path $root
    $DetailDepth = $Depth - 1
    $size = 0
    $files = 0
    $folders = 0
    $items = Get-ChildItem $root -Force:$Force
    foreach($item in $items) {
        if($item.PSIsContainer) {

            # Clear subItem in case the directory is empty.
            $subItem = @{ Folders = 0
                Files = 0
                Size = 0
                Name = $item.FullName }

            # Call myself recursively to calculate subfolder size
            # Since we're streaming output as we go, 
            #   we only use the last output of a recursive call
            #   because that's the summary object
            if($DetailDepth -ge 1) {
                Get-Size $item.FullName -Depth $DetailDepth -Force:$Force | Tee-Object -Variable subItems
                if($subItems.GetType().FullName -eq "System.Management.Automation.PSCustomObject") {
                    $subItem = $subItems
                } else {
                    $subItem = $subItems[-1]
                }
            } else {

                $subItem = Get-Size $item.FullName -Force:$Force | Select -Last 1
            }
            # The (recursive) size of all subfolders gets added
            $size += $subItem.Size
            $folders += $subItem.Folders + 1
            $files += $subItem.Files
            # avoid duplication by letting the parent report the summary values, except at the lowest detail depth
            if( $DetailDepth -lt 1) { 
                Write-Output $subItem
            }
        } else {
            $files += 1
            $size += $item.Length
        }
    }

    # in PS3, use the CustomObject trick to control the output order
    if($PSVersionTable.PSVersion -ge "3.0") {
        [PSCustomObject]@{ 
            Folders = $folders
            Files = $files
            Size = $size
            Name = $root
        }
    } else {
        New-Object PSObject -Property @{ 
            Folders = $folders
            Files = $files
            Size = $size
            Name = $root
        } 
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-23T04:55:36.397

我是 Get-DiskUsage 脚本的创建者。老实说，我不知道为什么它不为您选择 -Path 。对我来说很好。真的很奇怪。快速提问 - 您是否尝试将路径输入为 D: 而不是 D:\？

@Jaykul - 非常好的替代方法。我必须承认，我不知道在 recusion 中使用递归对内存的影响。我总是将缓慢归因于 $results 在所有其他计算完成之前不会输出这一事实。我进行递归然后再次进行递归的原因很简单 - 第一次递归列出了根路径中的所有文件夹（将创建列表），第二个我注意到我需要，因为如果我不这样做，结果将是一个大小并不总是准确的

# asp.net - javascript post 500 服务器内部错误

> ID：16178921
> 
> 赞同：0
> 
> 时间：2013-04-23T20:50:04.613
> 
> 标签：asp.net, ajax, webmethod

我正在使用 ajax 和 web 方法，当我执行此代码时出现一个错误，说 post POST 500 (Internal Server Error) 但此路径存在！！！

这段代码是我此刻正在使用的

```
function fnSendID() {

        $.ajax({
            type: "POST",
            url: "GMap.aspx/SendCommands",
            data: '{IDMobile: "'+$("#<%=Ddl_MobileCustomer.ClientID%>").val()+'"}',
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (response) {

                console.log("Entro : " + response.d);
            },
            failure: function (response) {
                console.log("Fallo : " + response.d);
            }
        });

<WebMethod()> _
    Public Shared Function SendCommands(ByVal IDMobile As String) As String
        'iIDMobile = GetMobileID(iIDMobile)
        Dim sResponse As String = IDMobile + "Buenas"
        Return sResponse
    End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:51:27.687

500 表示您访问的路径在服务器端导致错误，而不是路径不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T22:38:54.827

调试代码并在 Dim sResponse As String = IDMobile + "Buenas" 处设置断点。它到达这里了吗？退货前有什么异常吗？

# c++ - 用户提供可以在 LLVM Pass 中解析的 LLVM 指令集的干净方式

> ID：16178922
> 
> 赞同：0
> 
> 时间：2013-04-23T20:50:18.057
> 
> 标签：c++, parsing, llvm, static-analysis

我正在使用 LLVM 执行静态分析`opt`（即 LLVM Pass）。为了执行此分析，用户向我提供了一个文本文件，其中列出了一些指标和一些关于它们的统计信息。我还需要用户将这些指标中的每一个映射到一组 LLVM 指令。因此，以下可以是示例输入文件：

```
<name 1>.attribute_a = 12  
<name 2>.attribute_a = 11 
<name 3>.attribute_a = 0.6  

<name 1>.instructions = Alloca,Load,Fence  
<name 2>.instructions = ZExt,SExt  
<name 3>.instructions = Shl,Xor,Add,FAdd,Invoke 
```

等等。解析属性已经完成，我有一个映射，它从每个度量的名称指向与其相关的数据结构。我现在想做的是解析指令并将指令集添加到该数据结构中。

我认为将输入文件中的指令表示为操作码对用户和我自己来说都是最方便的，因此我们可以使用以下内容代替上面的内容：

```
<name 1>.attribute_a = 12   

<name 1>.instructions = 26,27,30 
```

但我不完全确定。在文本文件中表示输入数据的最佳方式是什么，以及在完成后实际解析数据的最佳方式是什么？我想我最终会使用类似`std::set<unsigned>`的东西来表示数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:59:54.853

只要您在文本文件中的实体与实际的 LLVM IR 指令之间存在一对一的映射，我认为这并不重要。指令名称可能更具可读性，因此您可以解析为`std::set<std::string>`. 请注意，您可以`llvm::Instruction`将`getOpcodeName`其与从文件中读取的文本名称进行比较。

# jquery - jQuery 索引 Iframe 内容

> ID：16178924
> 
> 赞同：0
> 
> 时间：2013-04-23T20:50:30.787
> 
> 标签：jquery, iframe, indexing

我有这段代码会提醒元素的索引位置：

```
var qq = $('li').index('*');
alert(qq); 
```

问题是它`li`在 iframe 中。我想我必须做类似的事情：

```
 var qq = $('iframe').contents().find('li').index('*');
    alert(qq); 
```

但它不起作用。它给我`-1`作为不好的索引。

# maven - 有没有办法查看 Central 中的哪些工件取决于给定的工件？

> ID：16178926
> 
> 赞同：1
> 
> 时间：2013-04-23T20:50:36.863
> 
> 标签：maven

我很好奇是否有一种方法，给定 Maven Central 中的工件，可以在 Central 中找到所有其他工件，将其声明为依赖项。我似乎无法通过搜索界面或 Sonatype 存储库查看器找到方法。

# gnuplot - 如何使用gnuplot做条件图

> ID：16178928
> 
> 赞同：0
> 
> 时间：2013-04-23T20:50:49.363
> 
> 标签：gnuplot

我是 gnuplot 的新手，很难弄清楚如何进行条件绘图。

我有一个数据文件，我想绘制第一列和第二列的数据以生成折线图，保存到 JPEG/PNG 文件。

测试.txt

```
1 9.9999 0
2 9.9999 0
3 9.9999 1
4 5.6000 0
5 3.4000 0
6 9.9999 1 
```

我想要做的是从这个数据文件中绘制第 1 列和第 2 列，当第 2 列的值为 9.9999 时，然后将值设置为 0。这意味着每当 9.9999 发生时，它在图表中显示为 0。

这是我正在使用的代码，但似乎不起作用。

```
plot 'test.txt'  using 1:($2==9.99999?0:$2) with linespoint title 'test' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T23:20:12.087

你的语法是正确的。[（有关更多信息，请参阅gnuplot 手册](http://www.gnuplot.info/docs_4.6/gnuplot.pdf)的 'Operators pp.28-30 。）

正如@andyras 提到的，检查您是否有正确的值进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:30:19.363

除了您要比较的数字不正确之外，比较浮点数的相等性通常是有问题的。

想想类似的东西

```
 plot 'test.txt'  using 1:(abs($2-9.9999)<0.1?0:$2) with linespoint title 'test' 
```

# php - 来自 PHP，如何在 HTML li 元素中制作 jQuery 按钮

> ID：16178929
> 
> 赞同：-2
> 
> 时间：2013-04-23T20:50:53.980
> 
> 标签：php, jquery-ui

我有一个 PHP 脚本，它查询数据库并将行作为 li 元素返回到 jQuery 对话框中的 div。它通过在 PHP while 循环中构建一个数组来处理查询行响应。到目前为止，一切都很好。它在一个 id=dialogResponse 的 div 中显示 Dialog 内的一组行。它是下面数组指令的前两部分（2 行代码）。顺便说一句，它只是 li 元素 - 没有 ul。

现在，我想在每个 li 响应中放置一个 jQuery 按钮，让用户可以选择停用/暂停该发布。我对此很陌生，我无法让按钮出现或任何工作。我收到一条内部服务器错误消息，所以我无法判断它是选择器问题、php 语法还是其他问题。

如何在每个 li 的末尾获得一个 jQuery 按钮，该按钮将成为对数据库中该行执行操作的函数的触发点？event.preventDefault 是未来函数的占位符，它将在选定的 streetAddress 和 city 上执行 MySQL UPDATE。这是代码。

```
$messages[] = "<li> 
$storedStreetAddress, $storedCity  
"<script type="text/javascript"> $(function() { $( "#dialogResponse li")
.button( label: Pause posting).click(function( event ) event.preventDefault();});});
</script>"
</li>"; 
```

请具体一点，代码有很大帮助。在这方面，我没有很好地遵循一般说明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:34:42.887

为什么`<script>`必须用 PHP 打印？为什么不将它包含在 JS 文件中？对于按钮，为什么不在每个按钮中创建一个标准的 HTML [或任何你喜欢的]，`<li>`并让 jQuery 将它们作为操作的目标？- 您将需要一个`<a>`, `<input>`,`<button>`等`.button()`

# java - 有没有办法在字符值之前停止正则表达式并在该字符之后启动另一个正则表达式？

> ID：16178931
> 
> 赞同：2
> 
> 时间：2013-04-23T20:51:11.757
> 
> 标签：java, regex

我正在尝试删除诸如`a-z`or `*`、`/`、`+`、`-`等字符之前的数字，然后删除该字符之后但在不同字符之前的任何数字。这就是我所拥有的。

```
 s= s.replaceAll("(\\d+)", "");
    s= s.replace("*", r.toString()); 
```

`s`我需要读取的字符串在哪里，并且`r`是操作的结果。

`*`是任意的。它可以是任何字符。前面提到过

这样做的问题是它删除了字符串中的每个数字。

如果我要使用以下输入迭代一次：

```
 26 + 4 - 2 
```

程序返回这个：

```
 30 - 
```

它删除所有三个数字，然后将“+”替换为 30。

我想将其更改为类似于此（一次迭代）：

```
 26 + 4 - 2 
```

第一个 RegEx 将删除第一组数字

```
 + 4 - 2 
```

第二个将删除运算符之后的数字，但在下一个运算符之前

```
 + - 2 
```

下一条语句将用表达式的结果替换运算符

```
 30 - 2 
```

对于正弦、余弦等其他函数的问题，我也希望如此。

*注意：正弦是'a'*

*“sin pi”与“a pi”相同*

一次迭代后，它应该看起来像

```
 a pi + 2

    a + 2

    0 + 2 
```

这是代码示例。

这是乘法“案例”

```
 case '*':
                    {
                        int m = n + 1;
                        while (m < result.length){
                            if (result[m] != '*' && result[m] != '/' && result[m] != '+' && result[m] != '-'){ //checks the item to see if it is numeric
                                char ch2 = result[m]; //makes the number a character
                                number3 += new String(new char[]{ch2}); //combines the character into a string. For example: '2' + '3' = "23".
                                ++m;}
                            else {
                                    break;
                                }}
                        resultNumber = (Double.parseDouble(number2) * Double.parseDouble(number3)); //"number2" holds the value of the numbers before the operator. Example: This number ----> "3" '*' "23"
                        equation = equation.replaceAll("(\\d+)", "");  //  <---- Line I pulled out earlier that I want to change.
                        equation = equation.replace("*", resultNumber.toString()); // <----- Line I pulled out earlier
                        result = equation.toCharArray();
                        number3 = ""; //erases any number held
                        number2 = ""; //erases any number held
                        ++n;
                        break;
                    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:06:26.270

我将首先建议两种替代方法，然后按现状回答您的问题。

# 没有正则表达式可能会更好

我对你的申请有很多疑问。一个合适的[分词器（词法分析器）](http://en.wikipedia.org/wiki/Lexical_analysis)和一个非常简单的[解析器](http://en.wikipedia.org/wiki/Parsing#Programming_languages)可能会比你的代码做得更好，并给出更清晰的错误消息。

# 匹配所有操作数

即使您要使用正则表达式，一次匹配两个操作数可能更有意义。即匹配`(\d+)\s*\*\s*(\d+)` 以匹配恰好两个数字的乘法。您可以首先搜索匹配项，然后从捕获组中提取操作数，然后计算结果值，最后将包含结果的子字符串粘合在一起：

```
// Multiplication of unparenthesized integers
Pattern p = Pattern.compile("(\\d+)\\s*\\*\\s*(\\d+)");
Matcher m = p.matcher(s);
while (m.find()) {
  int a = Integer.parseInt(m.group(1));
  int b = Integer.parseInt(m.group(2));
  s = s.substring(0, m.start(1)) + (a*b) + s.substring(m.end(2));
  m.reset(s);
} 
```

# 按照标题中的措辞回答问题

关于您问题的确切表述：

> 有没有办法在字符值之前停止正则表达式并在该字符之后启动另一个正则表达式？

如果您希望正则表达式在输入中的给定字符之后不匹配，您可以通过否定的后视断言来实现。同样，要仅在给定字符之后匹配，您可以使用肯定的后视断言。

因此，从 in 开始的正则表达式`(?<!\*.*)`只会匹配第一次出现的`'*'`，而从 in 开始的正则表达式`(?<=\*.*)`只会在第一次出现该字符后匹配。两者都必须使用`DOTALL`或以更复杂的形式（如`(?<!\*(?:\n|.*)*)`.

但是要确保这些匹配符合您的想法可能会非常棘手。

# c - sinf()、cosf() 和 sin()、cos() 之间的任何性能差异

> ID：16178932
> 
> 赞同：5
> 
> 时间：2013-04-23T20:51:12.197
> 
> 标签：c, compiler-optimization

我的代码主要适用于单精度浮点数。对超越函数的调用经常发生。现在，我正在使用 sin()、cos()、sqrt() 等——接受和返回的函数`double`。当它只为 x87 编译时，我知道单精度和双精度之间没有区别。我在 Agner Fog 的优化指南中读到，但是使用 SSE 指令的这些函数的软件版本对于单精度浮点数来说更快。

我的问题是编译器在遇到以下情况时是否会自动使用更快的函数：

```
float x = 1.23;
float y = sin(x); 
```

还是舍入规则排除了这种优化？

只需进行搜索和替换并查看是否有任何性能提升就很容易了。麻烦的是我还需要指向这些函数的指针。在 MSVC 中，sinf()、cosf() 和友元是内联函数。因此，使用它们需要一些体操。在努力之前，我想知道它是否值得。

除了 MSVC，我还针对 gcc。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T21:00:38.857

调用时确实不需要演员表`sin`。`<tgmath.h>`事实上，如果您使用C99 附带的标头，则会适得其反。这为您提供了类型通用宏，这些宏将根据您的参数选择正确的函数，而不是不幸的是目标类型。因此，如果您使用该标头（不确定这是否适用于 MS）

```
float x = 1.23;
float y = sin(x); 
```

会自动`sinf`在引擎盖下使用。

# ruby-on-rails - Heroku 错误代码 H10，以状态 1 退出

> ID：16178935
> 
> 赞同：0
> 
> 时间：2013-04-23T20:51:14.290
> 
> 标签：ruby-on-rails, ruby, heroku, gem

任何人都可以对下面的heroku日志有所了解吗？我已经为 heroku 部署了一个 rails 应用程序，但我无法弄清楚它为什么会一直崩溃。我已更新 gems 文件以包含 Ruby 版本 (1.8.7)。

我是 Rails/Ruby 的新手，所以我不确定在这个问题中还需要提供什么。

```
$ heroku logs
?[36m2013-04-23T20:25:24.670813+00:00 app[web.1]:?[0m       create  config/locales
?[36m2013-04-23T20:25:24.671180+00:00 app[web.1]:?[0m       create  public/javascripts
?[36m2013-04-23T20:25:24.671180+00:00 app[web.1]:?[0m       create  log
?[36m2013-04-23T20:25:24.670813+00:00 app[web.1]:?[0m       create  doc
?[36m2013-04-23T20:25:24.670813+00:00 app[web.1]:?[0m       create  db
?[36m2013-04-23T20:25:24.671180+00:00 app[web.1]:?[0m       create  lib
?[36m2013-04-23T20:25:24.671180+00:00 app[web.1]:?[0m       create  script/performance
?[36m2013-04-23T20:25:24.670813+00:00 app[web.1]:?[0m       create  app/controllers
?[36m2013-04-23T20:25:24.671180+00:00 app[web.1]:?[0m       create  public/images
?[36m2013-04-23T20:25:24.671405+00:00 app[web.1]:?[0m       create  test/performance
?[36m2013-04-23T20:25:24.671180+00:00 app[web.1]:?[0m       create  lib/tasks
?[36m2013-04-23T20:25:24.671180+00:00 app[web.1]:?[0m       create  public/stylesheets
?[36m2013-04-23T20:25:24.671405+00:00 app[web.1]:?[0m       create  test/unit
?[36m2013-04-23T20:25:24.671405+00:00 app[web.1]:?[0m       create  vendor
?[36m2013-04-23T20:25:24.671405+00:00 app[web.1]:?[0m       create  vendor/plugins
?[36m2013-04-23T20:25:24.671405+00:00 app[web.1]:?[0m       create  tmp/sessions
?[36m2013-04-23T20:25:24.671405+00:00 app[web.1]:?[0m       create  tmp/sockets
?[36m2013-04-23T20:25:24.671180+00:00 app[web.1]:?[0m       create  test/fixtures
?[36m2013-04-23T20:25:24.671180+00:00 app[web.1]:?[0m       create  test/integration
?[36m2013-04-23T20:25:24.671180+00:00 app[web.1]:?[0m       create  test/functional
?[36m2013-04-23T20:25:24.671405+00:00 app[web.1]:?[0m       create  Rakefile
?[36m2013-04-23T20:25:24.671405+00:00 app[web.1]:?[0m       create  tmp/pids
?[36m2013-04-23T20:25:24.671405+00:00 app[web.1]:?[0m       create  README
?[36m2013-04-23T20:25:24.671405+00:00 app[web.1]:?[0m       create  tmp/cache
?[36m2013-04-23T20:25:24.671625+00:00 app[web.1]:?[0m       create  config/routes.rb
?[36m2013-04-23T20:25:24.671625+00:00 app[web.1]:?[0m       create  config/initializers/backtrace_silencers.rb
?[36m2013-04-23T20:25:24.671625+00:00 app[web.1]:?[0m       create  app/controllers/application_controller.rb
?[36m2013-04-23T20:25:24.671625+00:00 app[web.1]:?[0m       create  config/initializers/inflections.rb
?[36m2013-04-23T20:25:24.671625+00:00 app[web.1]:?[0m       create  config/initializers/mime_types.rb
?[36m2013-04-23T20:25:24.671625+00:00 app[web.1]:?[0m       create  config/initializers/new_rails_defaults.rb
?[36m2013-04-23T20:25:24.671625+00:00 app[web.1]:?[0m       create  app/helpers/application_helper.rb
?[36m2013-04-23T20:25:24.671625+00:00 app[web.1]:?[0m       create  config/database.yml
?[36m2013-04-23T20:25:24.671625+00:00 app[web.1]:?[0m       create  config/locales/en.yml
?[36m2013-04-23T20:25:24.671625+00:00 app[web.1]:?[0m       create  config/initializers/session_store.rb
?[36m2013-04-23T20:25:24.671852+00:00 app[web.1]:?[0m       create  config/environment.rb
?[36m2013-04-23T20:25:24.671852+00:00 app[web.1]:?[0m       create  config/environments/development.rb
?[36m2013-04-23T20:25:24.671852+00:00 app[web.1]:?[0m       create  config/boot.rb
?[36m2013-04-23T20:25:24.671852+00:00 app[web.1]:?[0m       create  script/dbconsole
?[36m2013-04-23T20:25:24.671852+00:00 app[web.1]:?[0m       create  config/environments/production.rb
?[36m2013-04-23T20:25:24.671852+00:00 app[web.1]:?[0m       create  config/environments/test.rb
?[36m2013-04-23T20:25:24.672077+00:00 app[web.1]:?[0m       create  test/performance/browsing_test.rb
?[36m2013-04-23T20:25:24.672077+00:00 app[web.1]:?[0m       create  test/test_helper.rb
?[36m2013-04-23T20:25:24.671852+00:00 app[web.1]:?[0m       create  script/about
?[36m2013-04-23T20:25:24.672077+00:00 app[web.1]:?[0m       create  public/404.html
?[36m2013-04-23T20:25:24.672292+00:00 app[web.1]:?[0m       create  public/images/rails.png
?[36m2013-04-23T20:25:24.672292+00:00 app[web.1]:?[0m       create  public/robots.txt
?[36m2013-04-23T20:25:24.672292+00:00 app[web.1]:?[0m       create  public/javascripts/controls.js
?[36m2013-04-23T20:25:24.672292+00:00 app[web.1]:?[0m       create  public/javascripts/effects.js
?[36m2013-04-23T20:25:24.672292+00:00 app[web.1]:?[0m       create  public/javascripts/application.js
?[36m2013-04-23T20:25:24.672077+00:00 app[web.1]:?[0m       create  script/runner
?[36m2013-04-23T20:25:24.672292+00:00 app[web.1]:?[0m       create  public/javascripts/dragdrop.js
?[36m2013-04-23T20:25:24.672077+00:00 app[web.1]:?[0m       create  public/422.html
?[36m2013-04-23T20:25:24.672292+00:00 app[web.1]:?[0m       create  public/javascripts/prototype.js
?[36m2013-04-23T20:25:24.672501+00:00 app[web.1]:?[0m       create  log/server.log
?[36m2013-04-23T20:25:24.671852+00:00 app[web.1]:?[0m       create  script/destroy
?[36m2013-04-23T20:25:24.672077+00:00 app[web.1]:?[0m       create  script/plugin
?[36m2013-04-23T20:25:24.672501+00:00 app[web.1]:?[0m       create  log/development.log
?[36m2013-04-23T20:25:24.672077+00:00 app[web.1]:?[0m       create  script/performance/profiler
?[36m2013-04-23T20:25:24.672292+00:00 app[web.1]:?[0m       create  public/favicon.ico
?[36m2013-04-23T20:25:24.672501+00:00 app[web.1]:?[0m       create  log/production.log
?[36m2013-04-23T20:25:24.671852+00:00 app[web.1]:?[0m       create  script/generate
?[36m2013-04-23T20:25:24.672077+00:00 app[web.1]:?[0m       create  public/500.html
?[36m2013-04-23T20:25:24.672501+00:00 app[web.1]:?[0m       create  log/test.log
?[36m2013-04-23T20:25:24.671852+00:00 app[web.1]:?[0m       create  script/console
?[36m2013-04-23T20:25:24.672292+00:00 app[web.1]:?[0m       create  public/index.html
?[36m2013-04-23T20:25:24.672077+00:00 app[web.1]:?[0m       create  script/server
?[36m2013-04-23T20:25:24.672077+00:00 app[web.1]:?[0m       create  script/performance/benchmarker
?[36m2013-04-23T20:25:24.672292+00:00 app[web.1]:?[0m       create  doc/README_FOR_APP
?[36m2013-04-23T20:25:26.009476+00:00 heroku[web.1]:?[0m Process exited with status 0
?[36m2013-04-23T20:25:26.023526+00:00 heroku[web.1]:?[0m State changed from starting to crashed
?[33m2013-04-23T20:28:26.349480+00:00 heroku[slugc]:?[0m Slug compilation started
?[32m2013-04-23T20:30:14.365781+00:00 heroku[api]:?[0m Release v13 created by support@quba.co.uk
?[32m2013-04-23T20:30:14.416565+00:00 heroku[api]:?[0m Deploy 0cb45cf by support@quba.co.uk
?[36m2013-04-23T20:30:14.502652+00:00 heroku[web.1]:?[0m State changed from crashed to starting
?[33m2013-04-23T20:30:15.173619+00:00 heroku[slugc]:?[0m Slug compilation finished
?[36m2013-04-23T20:30:17.673654+00:00 heroku[web.1]:?[0m Starting process with command `bundle exec rails server -p 37117`
?[36m2013-04-23T20:30:23.040260+00:00 app[web.1]:?[0m   from /app/vendor/bundle/ruby/1.8/gems/activesupport-2.3.2/lib/active_support.rb:56
?[36m2013-04-23T20:30:23.040260+00:00 app[web.1]:?[0m   from /app/vendor/bundle/ruby/1.8/gems/rails-2.3.2/bin/../lib/rails_generator.rb:28
?[36m2013-04-23T20:30:23.040260+00:00 app[web.1]:?[0m /app/vendor/bundle/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:55: unin
itialized constant ActiveSupport::Dependencies::Mutex (NameError)
?[36m2013-04-23T20:30:23.040260+00:00 app[web.1]:?[0m   from /app/vendor/bundle/ruby/1.8/gems/rails-2.3.2/bin/../lib/rails_generator.rb:28:in `require
'
?[36m2013-04-23T20:30:23.040260+00:00 app[web.1]:?[0m   from /app/vendor/bundle/ruby/1.8/bin/rails:23:in `load'
?[36m2013-04-23T20:30:23.040260+00:00 app[web.1]:?[0m   from /app/vendor/bundle/ruby/1.8/bin/rails:23
?[36m2013-04-23T20:30:23.040260+00:00 app[web.1]:?[0m   from /app/vendor/bundle/ruby/1.8/gems/rails-2.3.2/bin/rails:14
?[36m2013-04-23T20:30:23.040260+00:00 app[web.1]:?[0m   from /app/vendor/bundle/ruby/1.8/gems/activesupport-2.3.2/lib/active_support.rb:56:in `require
'
?[36m2013-04-23T20:30:23.040260+00:00 app[web.1]:?[0m   from /app/vendor/bundle/ruby/1.8/gems/rails-2.3.2/bin/rails:14:in `require'
?[36m2013-04-23T20:30:25.327139+00:00 heroku[web.1]:?[0m Process exited with status 1
?[36m2013-04-23T20:30:25.338958+00:00 heroku[web.1]:?[0m State changed from starting to crashed
?[35m2013-04-23T20:31:00.363764+00:00 heroku[router]:?[0m at=error code=H10 desc="App crashed" method=GET path=/ host=[APPNAME].herokuapp.com fw
d="81.23.51.18" dyno= connect= service= status=503 bytes=
?[36m2013-04-23T20:33:27.934787+00:00 heroku[web.1]:?[0m State changed from crashed to starting
?[36m2013-04-23T20:33:30.123025+00:00 heroku[web.1]:?[0m Starting process with command `bundle exec rails server -p 26457`
?[36m2013-04-23T20:33:31.440611+00:00 app[web.1]:?[0m /app/vendor/bundle/ruby/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:55: unin
itialized constant ActiveSupport::Dependencies::Mutex (NameError)
?[36m2013-04-23T20:33:31.440919+00:00 app[web.1]:?[0m   from /app/vendor/bundle/ruby/1.8/gems/activesupport-2.3.2/lib/active_support.rb:56
?[36m2013-04-23T20:33:31.440999+00:00 app[web.1]:?[0m   from /app/vendor/bundle/ruby/1.8/gems/rails-2.3.2/bin/../lib/rails_generator.rb:28:in `require
'
?[36m2013-04-23T20:33:31.441077+00:00 app[web.1]:?[0m   from /app/vendor/bundle/ruby/1.8/gems/rails-2.3.2/bin/../lib/rails_generator.rb:28
?[36m2013-04-23T20:33:31.441156+00:00 app[web.1]:?[0m   from /app/vendor/bundle/ruby/1.8/gems/rails-2.3.2/bin/rails:14:in `require'
?[36m2013-04-23T20:33:31.441234+00:00 app[web.1]:?[0m   from /app/vendor/bundle/ruby/1.8/gems/rails-2.3.2/bin/rails:14
?[36m2013-04-23T20:33:31.441341+00:00 app[web.1]:?[0m   from /app/vendor/bundle/ruby/1.8/bin/rails:23:in `load'
?[36m2013-04-23T20:33:31.441423+00:00 app[web.1]:?[0m   from /app/vendor/bundle/ruby/1.8/bin/rails:23
?[36m2013-04-23T20:33:31.440812+00:00 app[web.1]:?[0m   from /app/vendor/bundle/ruby/1.8/gems/activesupport-2.3.2/lib/active_support.rb:56:in `require
'
?[36m2013-04-23T20:33:32.797256+00:00 heroku[web.1]:?[0m Process exited with status 1
?[36m2013-04-23T20:33:32.809865+00:00 heroku[web.1]:?[0m State changed from starting to crashed 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T21:09:04.217

与您使用的 Rails 版本相比，当您使用的 RubyGems 版本太新时，会出现错误“未初始化的常量 ActiveSupport::Dependencies::Mutex”。但是 Heroku 控制它的版本，所以你有点卡在这里。看起来您在 Ruby 1.8.7 上使用的是非常旧的 Rails 版本，它已经接近生命的尽头。

# jquery - 从 webmethod 访问 ASP 控件

> ID：16178938
> 
> 赞同：0
> 
> 时间：2013-04-23T20:51:19.607
> 
> 标签：jquery, asp.net, ajax, vb.net

我继承了一些查询 webmethod 并返回字符串的 ASP 2.0 webforms 代码，它的简化版本是

代码背后

```
<System.Web.Services.WebMethod()> _
Public Function StockLevel() as String
    return "120"
End Sub 
```

.aspx 页面

```
function GetStockLevel() {
$.ajax({
    type: 'POST',
    url: 'Stock.aspx/StockLevel',
    // data: '{ }',
    contentType: 'application/json; charset=utf-8',
    dataType: 'text',
    success: function (data) {
    alert(data);
    }
});
} 
```

该页面上有一个 asp 标签控件，例如 asp:Label id="stockLabel" runat="server"

目前，当我尝试修改 StockLevel 函数以将标签文本设置为 120 时，它将字符串 120 返回到 jquery 调用中并显示警报，例如

```
stockLabel.Text = "120" 
```

我得到了智能感知，但它似乎没有更新页面上的值，我想这是由于 AJAX 的性质（在这种情况下，我应该只使用 ajax 调用的返回值来设置标签的值。 )，此时可能未加载控件或存在范围问题。这个对吗？我想知道为什么会发生这种情况，这是我应该期望的正确行为还是我做错了什么并且标签应该更新为正确的值？

任何指示或建议都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:54:59.537

我相信 ASP 标签会呈现为跨度，您应该能够像这样更改它：

```
success: function (data) {
    $("#<%=stockLabel.ClientID %>").text(data);
} 
```

至于从 web 方法访问页面控件，您是不允许的。这篇文章比我做得更好：[Access ASP.NET control from static [WebMethod] (JS ajax call)](https://stackoverflow.com/questions/2133194/access-asp-net-control-from-static-webmethod-js-ajax-call)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T20:57:25.610

当您通过 AJAX 调用 web 方法时，您不能这样做。

如果您通过 AJAX 进行调用，您将无法访问您的 Web 表单控件，因为您实际上并没有请求该页面，您只是在调用该方法。

相反，您应该使用 jQuery 找到标签并通过 Javascript 更新它：

```
function GetStockLevel() {
$.ajax({
    type: 'POST',
    url: 'Stock.aspx/StockLevel',
    // data: '{ }',
    contentType: 'application/json; charset=utf-8',
    dataType: 'text',
    success: function (data) {
        $("#<%=stockLabel.ClientID %>").text(data);  // this only works if the javascript is in your .aspx-file
    }
});
} 
```

如果脚本不在您的 .aspx 中，您需要找到另一种在客户端上查找节点的方法（例如，通过使用特定类）。

# c++ - 指针和参考，房间“有”键

> ID：16178939
> 
> 赞同：-1
> 
> 时间：2013-04-23T20:51:19.697
> 
> 标签：c++, pointers

我基本上想说，如果当前房间包含我在下面分配的钥匙，那么告诉用户，房间有钥匙，其余的我会弄清楚。

```
int main()
{

    Room mainHall;
    Room sittingRoom;

    mainHall.setNorthExit(&sittingRoom);
    mainHall.setEastExit(&playRoom);

    mainHall.setDescription("The main hall has 2 exits, one to the north, one to the east");
    mainHall.setName("Main Hall");

    sittingRoom.setEastExit(&kitchen);
    sittingRoom.setSouthExit(&mainHall);

    sittingRoom.setDescription("The sitting room has 2 exits, one to the east and one to the south");
    sittingRoom.setName("Sitting Room");

    string userInput;

    Room* currentRoom;
    currentRoom = &mainHall;

    Keys& key1 = playRoom.getKey();
    key1.setName("Sitting Room");

    Keys& key2 = sittingRoom.getKey();
    key2.setName("Play Room");

    if(////need code here) ///I want it to be something like...if(currentRoom "has a key"
    {
        string takeKey;
        cout << "There is still a key in this room, would you like to take it? " << endl;
        cin >> takeKey;
        if(takeKey == "yes")
        {
               //Havent assigned anything yet
        }
    } 
```

这只是我的 keye 类的 cpp 文件，以防万一你需要它

```
#include"Keys.h"
#include<iostream>

Keys::Keys()
{
    name = "";
}

Keys::Keys(string nameParam)
{
    name = nameParam;
}

void Keys::setName(string nameParam)
{
    name = nameParam;
}

string Keys::getName() const
{
    return name;
}

void Keys::setKey(string keyParam)
{
    key = keyParam;
}

string Keys::getKey() const
{
    return key;
} 
```

以及我的房间类中的getter方法

```
Keys& Room::getKey()
{
    return key;
} 
```

我会很感激任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T21:14:41.207

房间类上的“HasKey()”方法怎么样，然后使用

```
if( sittingRoom.HasKey()) { ... } 
```

在房间类中使用布尔值来确定房间是否有钥匙。

# c++ - 为 QtConcurrent::mapped 中的每个线程使用独立资源

> ID：16178943
> 
> 赞同：0
> 
> 时间：2013-04-23T20:51:25.023
> 
> 标签：c++, qt

我正在通过 QtConcurrent::mapped 处理一堆重数据（其中 1000 个或更多）

```
 auto result = QtConcurrent::mapped(image_id, std::bind<std::pair<QString, QImage>>(&mainWindow::process_image_impl, this, ph::_1)); 
```

代替

```
void process_image_impl(int image_id)
{
  //.......lots of codes

  {
    QMutexLocker locker(&mutex);
    morphology.close(image, image); //I don't want to lock this operation
  }

  //lots of codes
} 
```

我想做类似的事情

```
void process_image_impl(int image_id)
{
  //.......lots of codes

    morphology[thread_id].close(image, image); //I don't want to lock this operation

  //lots of codes
} 
```

在函数 process_image_impl 中，我调用了一个名为“morphology”的类，我不想在处理图像时锁定“morphology”类，但是如果我不锁定它可能会导致未定义的行为。而不是锁定过程中，我想把“morphology”类放在一个容器中，根据QThreadPool中的线程调用每个“morphology”，这可能吗？或者您有其他建议吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-05T00:25:41.893

## 如果形态只需要在一个线程内访问

```
QThreadStorage<Morphology> morphology;

void process_image_impl(int image_id) {
  //lots of codes
  if (!morphology.hasLocalData()) morphology.setLocalData(Morphology());
  morphology.localData().close(image, image);
  //lots of codes
} 
```

## 如果还需要在线程之外访问形态

```
template <class T>
class ThreadSafeStack: private QStack<T*> {
  QMutex mutex;
public:
  T* pop() {
    QMutexLocker locker(&mutex);
    return !isEmpty() ? QStack::pop() : new T;
  }

  void push(T* &t) {
    QMutexLocker locker(&mutex);
    QStack::push(t);
  }
};

ThreadSafeStack<Morphology> stack;

void process_image_impl(int image_id) {
  //lots of codes
  Morphology *morphology = stack.pop();
  morphology->close(image, image);
  stack.push(morphology);
  //lots of codes
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T22:34:13.223

多线程是可能的解决方案之一，具体取决于您的“形态”类将被调用多少次以及您将使用什么操作系统来运行您的代码以及您将使用什么处理器等等。以上所有内容都会影响您的代码在运行时的性能，这取决于您的期望。如果您想采用多线程方法，您只需创建一个指向“形态”类的指针和另一个指向“QThread”的指针，然后使用“moveToThread(&thread)”将其移动到线程。例如检查这个链接：[如何在 Qt 中实际和正确地实现多线程](http://qt-project.org/doc/qt-5.0/qtcore/qthread.html)

如果您希望程序响应并且不被锁定在处理中，那么多线程也是一种方法

# assembly - MIPS 汇编中的 GCD

> ID：16178945
> 
> 赞同：-1
> 
> 时间：2013-04-23T20:51:27.493
> 
> 标签：assembly, mips, mips32, mips64

我无法让此代码 100% 正确工作。如果用户输入一个较大的数字作为第一个数字，那么程序会给出正确的最大公分母。

但是，如果首先输入较小的数字，则将较小的数字作为 GCD 返回。

我一直试图弄清楚这几个小时无济于事。请有人帮忙！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T21:05:24.877

`$a0`好吧，`$a1`如果第二个输入项大于第一个，您可以轻松交换寄存器。例如：

```
move $a1, $v0       # store input in $a1   -> this is your code    
# Here goes the test & swap code, just before your original base label

bge $a0, $a1, noswap
move $a1, $a0   # Swap $a0 and $a1
move $a0, $v0   # if the second item is greater than the first one
noswap:

# Here continues your code
base: 
```

# android - 给定android上所需的长度和宽度，选择最佳图片尺寸的最佳方法是什么

> ID：16178948
> 
> 赞同：2
> 
> 时间：2013-04-23T20:51:31.137
> 
> 标签：android, camera

我想用一个接近给定宽度和高度的安卓相机拍照。

前任。1024 x 768

鉴于不同的安卓相机支持不同的照片拍摄尺寸。

# java - 执行 HttpServletResponse.sendRedirect 时删除查询参数

> ID：16178953
> 
> 赞同：1
> 
> 时间：2013-04-23T20:52:03.137
> 
> 标签：java, tomcat, servlets

当我使用 sendRedirect 函数重定向时，我看到原始查询参数已添加到 URL。

我怎样才能避免它并从重定向的 URL 中删除查询参数？

我的代码是：

```
response.sendRedirect(ApplicationUtils.getServerConfig().homePageLink);

return; 
```

# java - 无效的转义序列（有效的是 \b \t \n \f \r \" \' \ ）

> ID：16178955
> 
> 赞同：9
> 
> 时间：2013-04-23T20:52:08.323
> 
> 标签：java, regex

java中的正则表达式有问题。

当我尝试使用这个正则表达式时：

```
 ^(?:(?:([01]?\d|2[0-3]):)?([0-5]?\d):)?([0-5]?\d)$ 
```

我收到以下错误

```
"Invalid escape sequence (valid ones are \b \t \n \f \r \" \' \ )" 
```

我不知道如何处理该错误。我已经尝试将反斜杠加倍，但是没有用。我希望有人可以帮助我。

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-23T20:55:15.070

这应该工作`^(?:(?:([01]?\\d|2[0-3]):)?([0-5]?\\d):)?([0-5]?\\d)$`

原因是错误消息中列出的符号具有特殊含义，但`\d`不是那些为 using 定义的特殊符号之一，这意味着您必须对其进行转义（通过在符号前面`\`添加额外的符号）。`\`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-23T20:57:42.463

每当您在 Java 中编写正则表达式时，请记住对`\`定义正则表达式的字符串中使用的字符进行转义。换句话说，如果你的正则表达式包含一个`\`，那么你必须写两个`\\`。例如，您的代码应如下所示：

```
^(?:(?:([01]?\\d|2[0-3]):)?([0-5]?\\d):)?([0-5]?\\d)$ 
```

你为什么问？因为在 Java 的字符串中，`\`是用于表示特殊字符（例如：制表符、换行符等）的转义字符，如果字符串包含 a`\`那么它本身必须被转义，方法是`\`在它前面添加另一个。因此，`\\`。

作为记录，[这里](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.6)是列出有效转义字符及其含义的 Java 语言规范页面，请注意最后一个：

```
\b  backspace
\t  horizontal tab
\n  linefeed
\f  form feed
\r  carriage return
\"  double quote
\'  single quote
\\  backslash 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-08T05:02:09.237

您可以将 notepad++ 与 find / 一起使用并替换为 //

# arrays - 如何使用 NumPy 数组索引从 2D 数组中选择 2 列以从中选择唯一值？

> ID：16178956
> 
> 赞同：2
> 
> 时间：2013-04-23T20:52:13.653
> 
> 标签：arrays, numpy

这可能是一个非常愚蠢的问题，但我已经搜索并无法在任何地方找到答案（可能是因为这个问题太愚蠢了）。

我有一个`2D` `NumPy`包含多列的数组。我想识别or列`unique`中的元素，而不是其余列中的元素：`1st``2nd`

```
array([['A', 'B', '3', '4'],
       ['C', 'D', '3', '5']], 
      dtype='|S1') 
```

使用`np.unique`将在数组中获得唯一值，我可以像这样索引单个列：

```
np.unique(example_array[:,0])
Out[16]: 
array(['A', 'C'], 
      dtype='|S1') 
```

我怎样才能索引它，以便我可以找到 in`[;,0]`和 in 中的所有唯一值`[:,1]`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T20:55:00.273

在第二个维度上也使用`:2`切片，以包含多个列。

```
np.unique(example_array[:,:2])
Out[]: 
array(['A', 'B', 'C', 'D'], 
      dtype='|S1') 
```

# python - NDB .order 返回空结果

> ID：16178967
> 
> 赞同：3
> 
> 时间：2013-04-23T20:53:15.530
> 
> 标签：python, google-app-engine, app-engine-ndb, bigtable

我的数据库中有两个连接的实体。我们称它们为 A 和 B。我在内存中有一个 A 的实例（我们称他为 a），以下查询当前有效：

```
B.query(B.parent == a.key).fetch(limit=None) 
```

但是以下代码返回一个空集，即使在开发模式下自动创建索引：

```
B.query(B.parent == a.key).order(B.foo, B.bar).fetch(limit=None) 
```

我已经尝试了所有我能想到的组合，我完全被难住了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-03T15:07:24.330

原来有问题的字段是由以前的开发人员作为 TextProperty 制作的，这些字段不可索引，因此不可搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T21:56:37.187

这就是你想要的：

```
B.query(ancestor=a.key) 
```

我不相信您发布的任何片段都将起作用。

# php - 如何使用 AWS API 处理 PHP 中的日期和时区

> ID：16178972
> 
> 赞同：1
> 
> 时间：2013-04-23T20:53:50.127
> 
> 标签：php, amazon-web-services

我正在使用 AWS PHP 开发工具包，亚马逊的 API 在下面返回这个时间戳。

```
2013-04-23T13:18:00Z 
```

他们给我的时间戳似乎已经在我的时区。由于它没有指定它是哪个时区，我想它被假定为我的当地时间。ISO 8601 的 wiki 站点还声明...

> 如果没有给出带有时间表示的 UTC 关系信息，则假定时间为本地时间。

但是当我尝试像[这样](http://phpfiddle.org/main/code/zph-ys4)在 PHP 中使用它时，它会将它转换为我的本地时区。PHP 的 strtotime 页面这样说...

> 此函数的每个参数都使用默认时区，除非在该参数中指定了时区。

我的问题是，如果 strtotime 已经在我的时区中，为什么要将其转换为我的时区？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T21:43:11.137

亚马逊返回的日期末尾的“Z”表示它是 UTC。您将需要转换时区以使其本地化。您可以通过执行以下操作来做到这一点：

```
<?php

$date = new DateTime('2013-04-23T13:18:00Z'); // Z = UTC
echo $date->format('H') . PHP_EOL;
//> 13
$date->setTimezone(new DateTimeZone('America/Los_Angeles')); // -0700
echo $date->format('H') . PHP_EOL;
//> 06 
```

**更新：**阅读所有评论以获取完整解决方案。

# node.js - 是否有 productionDependencies，比如节点中有 devDependencies？

> ID：16178974
> 
> 赞同：0
> 
> 时间：2013-04-23T20:53:55.020
> 
> 标签：node.js, npm

我看到有一个 devDependencies 仅用于在开发服务器上安装软件包。仅在生产服务器上安装软件包是否存在这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T21:05:23.490

不，没有`productionDependencies`package.json 属性。要打开/关闭 的安装`devDependencies`，您可以使用`NODE_ENV`环境变量。[在这里](https://npmjs.org/doc/config.html#production) 查看更多。

如果这还不够，您当然可以为 npm 定义一些自定义脚本来安装特定于生产的依赖项。npm 支持[自定义脚本](https://npmjs.org/doc/scripts.html)，您可以在此处阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T01:49:51.197

您可以通过执行跳过安装开发依赖项`npm install --production`

您也可以通过将**NODE_ENV**环境设置为生产来实现相同的目的

# javascript - Nivo Slider Captions 在 IE7,8 中透明

> ID：16178975
> 
> 赞同：0
> 
> 时间：2013-04-23T20:53:59.800
> 
> 标签：javascript, jquery, nivo-slider

出于某种原因，Nivo 滑块的标题在 Internet Explorer 7 和 8 中无法正常工作。文本显示（我可以突出显示），但它似乎是完全透明的。

网址：[http ://www.weblinxinc.com/beta/sssa/index.htm](http://www.weblinxinc.com/beta/sssa/index.htm)

我试过的都没有修复它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T21:13:39.007

在你的 nivo-slider.css 文件中，你有`alpha(opacity=8)`for `.nivo-caption`，你想要`alpha(opacity=80)`

# facebook - 为 CMS 编写 Facebook“状态共享”功能

> ID：16178976
> 
> 赞同：1
> 
> 时间：2013-04-23T20:53:59.970
> 
> 标签：facebook, wordpress, drupal, content-management-system, facebook-opengraph

我正在为 CMS 开发一些新功能，但我无法找到有关 Facebook 如何与其他网站交互的信息。如果存在交钥匙解决方案，我很想听听它们，但我基本上只是在寻找有关这些东西如何在幕后工作的文档的指针。包括`php`、`wordpress`和`drupal`因为这些是我正在使用的基础技术，但也欢迎使用其他平台解决方案。

当您将 URL 粘贴到 Facebook 的“您的想法”框中时，Facebook 将自动获取简短的页面描述以及可能的缩略图列表。如果有视频，它通常会自动生成嵌入视频所需的 HTML。我还看到了一些功能，您可以链接到企业的主要网站，但随后会被提示“喜欢”他们的 Facebook 页面。

作为一个独立的网站所有者，我怎样才能让我的页面以这种方式对 Facebook 做出反应。例如，在[以下页面](http://impliedcrosswalk.org/home/2013/2/2/walk-on-the-esplanade-january-2013)（链接到个人网站）上，我有四个图像。但是，如果我将该 URL 放入 Facebook 状态更新中，则这些图像没有缩略图。

此外，虽然我已经推断出通知框的几个功能，但我很好奇是否还有其他我不知道的功能。

同样，虽然交钥匙解决方案和现有插件很有趣，但我真正想要的是我需要在自己的页面中嵌入什么样的元数据，或者我需要对 Facebook 请求做出哪些特殊响应。换句话说，我如何对网站进行编程以正确响应 Facebook。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T22:06:31.630

基本上，您根据开放图元标记将该信息传达给用户。从中，Facebook 可以确定它是什么类型的网站。它是关于一本书、一些音乐或一些商业品牌，还是可能有一个链接到它的 FB 页面？查看此文档以了解有关图形对象的一般概念 - [https://developers.facebook.com/docs/opengraph/using-objects/](https://developers.facebook.com/docs/opengraph/using-objects/)

具体到用作缩略图的图像，它是用`og:image`元标记指定的。需要注意的重要一点是，FB 会将其缓存约 24 小时，因此如果它没有出现，请不要担心。您可以使用此工具检查实时获取的值 - [https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)

Facebook 也碰巧在这方面有很多错误，所以它可能需要很长时间才能开始出现。如果它选择了调试工具，那么您在代码级别就可以了。您对此无能为力。

我碰巧知道了这一点，因为我为此编写了一个小型 WordPress 插件，男孩我知道曾经收到的支持请求。[http://wordpress.org/extend/plugins/facebook-like-thumbnail/](http://wordpress.org/extend/plugins/facebook-like-thumbnail/)

现在对于您问题的第三部分，即使这是仅通过元标记指定的，就像您的网站上有主要视频内容一样，并且当有人在状态框中放置链接时，您希望它嵌入到 Facebook 中，所以为此链接有代码示例[http://garethhooper.com/articles/social-media/45-integration/166-how-to-embed-your-own-videos-on-facebook-using-the-facebook-like-and-分享按钮.html](http://garethhooper.com/articles/social-media/45-integration/166-how-to-embed-your-own-videos-on-facebook-using-the-facebook-like-and-share-buttons.html)

希望这能让你走上正轨，让你领先:)

# c# - 在 DOCX 文件上使用 OpenXML 的常量 NullReference 异常

> ID：16178977
> 
> 赞同：0
> 
> 时间：2013-04-23T20:54:03.083
> 
> 标签：c#, xml-parsing, openxml, nullreferenceexception, docx

我正在尝试解析一个冗长的文件并删除我不想要的部分。从研究看来，OpenXml SDK 是操作和搜索单词 doc 的最简单参考。不幸的是，它并不总是一致的，因为我`NullReferenceExceptions`在尝试将节点分配给运行对象时不断得到。本质上，我的程序应该遍历 docx 文件并找到标签 (ver 1)，然后删除它和结束标签 (/ver 1) 之间的所有内容。这似乎只适用于某些部分，因为我得到了其他部分`NullReferenceException`，我觉得这与 MS Word 使用的凌乱格式有关，但我不知道。

如果有人可以帮助我欣赏它，这是特定部分的代码。

```
IEnumerable<OpenXmlElement> elem = main.Document.Body.Descendants().ToList();
foreach (OpenXmlElement elems in elem)
{
   if (elems is Text && elems.InnerText == s_Ver1)// s_Ver1 = "(Ver 1)"
   {
      Run run = (Run)elems.Parent;
      Paragraph p = (Paragraph)run.Parent;
      p.RemoveAllChildren();
      p.Remove();

      foreach (OpenXmlElement endelems in elem)
      {
         if (endelems is Text && elems.InnerText == e_Ver1)//e_Ver1 = "(/Ver1)"
         {
            run = (Run)endelems.Parent;
            p = (Paragraph)run.Parent;
            p.Remove();
            break;
         }

         else
         {
            Run d_Run = (Run)endelems.Parent;
            Paragraph d_p = (Paragraph)d_Run.Parent;
            d_p.RemoveAllChildren();
            d_p.Remove();*/

            try
            {
               endelems.Remove();
            }

            catch(Exception err)
            {
               MessageBox.Show(err.ToString());
            }
          }
       }
    }
} 
```

编辑

尝试在代码中使用（在 endelems.remove() 周围）

```
 System.InvalidOperationException: The Parent of this element is Null
 //it also says line 141 but I'm not sure how to get line numbering in vs2010 
```

尝试捕获整个事物的错误

```
 System.NullReferenceException: Object reference not set to an instance of an object
 //line 114 which would be Paragraph p = (Paragraph)run.Parent; line 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T14:04:35.750

我不太确定你想在这里做什么，但是......

你从 body 中得到一个静态的子列表。

您迭代可能已删除的孩子。然后调用 remove 一个已经被删除的孩子`RemoveAllChildren()`。

更不用说这个错误的逻辑了。

```
if (endelems is Text && elems.InnerText == e_Ver1)//e_Ver1 = "(/Ver1)"
{
    ...
else
{
    Run d_Run = (Run)endelems.Parent;
} 
```

在 else 子句中，endelems 可能不会有一个为 a 的父级`Run`，因为它可能不是一个`Text`元素。

--- 编辑 --- 伪代码

```
IEnumerable<Text> elems = wd.MainDocumentPart.Document.Body.Descendants<Text>();
foreach (Text elem in elems) 
{

    if(elem.InnerText.Equals("Ver 1"))
    {
        IEnumerable<OpenXmlElement> afterelems = elem.ElementsAfter();
        foreach(OpenXmlElement openelem in afterelems)
        {
            if(openelem is Text && ((Text)openelem).InnerText.Equals("Ver 2"))
            {
                break;
            } else if(openelem is Text) {
                openelem.Remove();
            }
        }
        break;
    }

}

foreach (Run run in wd.MainDocumentPart.Document.Body.Descendants<Run>().Where(run => run.Descendants<Text>().Count() == 0 && run.Descendants<Break>().Count() == 0))
{
    run.Remove();
}

foreach (Paragraph par in wd.MainDocumentPart.Document.Body.Descendants<Paragraph>().Where(par => par.Descendants<Run>().Count() == 0 && par.Descendants<Table>().Count() == 0))
{
    par.Remove();
} 
```

# c++ - 在图像上提升 grid_graph 和图形切割

> ID：16178978
> 
> 赞同：3
> 
> 时间：2013-04-23T20:54:15.410
> 
> 标签：c++, boost

我正在尝试使用 Boost Graph Library 在 2D 图像上使用图形切割。我的目标是将每个像素表示为具有 4 个浮动边缘的节点（在边界上更少）。邻域像素的边缘将具有取决于梯度或强度或其他东西的值。

为此，我尝试使用 boost::grid_graph 和 boost::boykov_kolmogorov_max_flow()，但没有成功。文档说 grid_graph 模型“顶点列表”、“边缘列表”和“入射图”，这是 boykov_kolmogorov_max_flow 的要求，所以我认为它应该可以工作。

这是我的代码：

```
const unsigned int D = 2;
typedef boost::grid_graph<D> Graph;
typedef boost::graph_traits<Graph>::vertex_descriptor VertexDescriptor;

boost::array<unsigned int, D> lengths = { { 3, 3 } };
Graph graph(lengths, false);

// Add edge's value between pixels

VertexDescriptor s, t; // Should be initialized, I know.
float flow = boost::boykov_kolmogorov_max_flow(graph, s, t);
// error C2039: 'edge_property_type' is not a member of 'boost::grid_graph<Dimensions>' 
```

我知道 s 和 t 应该被初始化，但我只希望程序编译。是否可以将 grid_graph 与 boykov_kolmogorov_max_flow 一起使用？如果是这样，怎么做？如果不是，那么我想我不得不使用更通用（可能更慢）的 boost::adjacency_list？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T19:05:34.660

您对另一个答案的问题可能是由旧版本的 Visual Studio 引起的（它的代码在 Visual Studio 2012 Express/g++ 4.8.0 和 boost 1.53.0 中运行良好）。如果该问题是您的编译器的唯一问题，则可以通过创建另一个类似于使用`capacity`. 所需的更改用`//ADDED`和标记`//CHANGED`。

```
#include <iostream>

#include <boost/graph/grid_graph.hpp>
#include <boost/graph/boykov_kolmogorov_max_flow.hpp>
#include <boost/graph/iteration_macros.hpp>

int main()
{

    const unsigned int D = 2;
    typedef boost::grid_graph<D> Graph;
    typedef boost::graph_traits<Graph>::vertex_descriptor VertexDescriptor;
    typedef boost::graph_traits<Graph>::edge_descriptor EdgeDescriptor;//ADDED
    typedef boost::graph_traits<Graph>::vertices_size_type VertexIndex;
    typedef boost::graph_traits<Graph>::edges_size_type EdgeIndex;

    boost::array<std::size_t, D> lengths = { { 3, 3 } };
    Graph graph(lengths, false);

    float pixel_intensity[]={10.0f,15.0f,25.0f,
                            5.0f,220.0f,240.0f,
                            12.0f,15.0,230.0f};
    std::vector<int> groups(num_vertices(graph));
    std::vector<float> residual_capacity(num_edges(graph)); //this needs to be initialized to 0
    std::vector<float> capacity(num_edges(graph)); //this is initialized below, I believe the capacities of an edge and its reverse should be equal, but I'm not sure
    std::vector<EdgeDescriptor> reverse_edges(num_edges(graph));//ADDED

    BGL_FORALL_EDGES(e,graph,Graph)
    {
        VertexDescriptor src = source(e,graph);
        VertexDescriptor tgt = target(e,graph);
        VertexIndex source_idx = get(boost::vertex_index,graph,src);
        VertexIndex target_idx = get(boost::vertex_index,graph,tgt);
        EdgeIndex edge_idx = get(boost::edge_index,graph,e);

        capacity[edge_idx] = 255.0f - fabs(pixel_intensity[source_idx]-pixel_intensity[target_idx]); //you should change this to your "gradiant or intensity or something"

        reverse_edges[edge_idx]=edge(tgt,src,graph).first;//ADDED
    }

    VertexDescriptor s=vertex(0,graph), t=vertex(8,graph); 

    //in the boykov_kolmogorov_max_flow header it says that you should use this overload with an explicit color property map parameter if you are interested in finding the minimum cut
    boykov_kolmogorov_max_flow(graph,
        make_iterator_property_map(&capacity[0], get(boost::edge_index, graph)), 
        make_iterator_property_map(&residual_capacity[0], get(boost::edge_index, graph)),
        make_iterator_property_map(&reverse_edges[0], get(boost::edge_index, graph)), //CHANGED
        make_iterator_property_map(&groups[0], get(boost::vertex_index, graph)),
        get(boost::vertex_index, graph),
        s,
        t
    );

   for(size_t index=0; index < groups.size(); ++index)
   {
        if((index%lengths[0]==0)&&index)
            std::cout << std::endl;
        std::cout << groups[index] << " ";
   }

   return 0;
} 
```

[在 Coliru 上工作。](http://coliru.stacked-crooked.com/view?id=5dfb6672edbad279a31cf2e6949141a7-50d9cfc8a1d350e7409e81e87c2653ba)

PS：Boost.Graph 文档未能阐明的一件事是，其中描述的概念要求适用于您明确传递每个参数的情况。一些默认参数可能会引入更多要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T13:31:00.643

```
#include <iostream>

#include <boost/graph/grid_graph.hpp>
#include <boost/graph/boykov_kolmogorov_max_flow.hpp>
#include <boost/graph/iteration_macros.hpp>

int main()
{

    const unsigned int D = 2;
    typedef boost::grid_graph<D> Graph;
    typedef boost::graph_traits<Graph>::vertex_descriptor VertexDescriptor;
    typedef boost::graph_traits<Graph>::vertices_size_type VertexIndex;
    typedef boost::graph_traits<Graph>::edges_size_type EdgeIndex;

    boost::array<unsigned int, D> lengths = { { 3, 3 } };
    Graph graph(lengths, false);

    float pixel_intensity[]={10.0f,15.0f,25.0f,
                            5.0f,220.0f,240.0f,
                            12.0f,15.0,230.0f};
    std::vector<int> groups(num_vertices(graph));
    std::vector<float> residual_capacity(num_edges(graph)); //this needs to be initialized to 0
    std::vector<float> capacity(num_edges(graph)); //this is initialized below, I believe the capacities of an edge and its reverse should be equal, but I'm not sure

    BGL_FORALL_EDGES(e,graph,Graph)
    {
        VertexDescriptor src = source(e,graph);
        VertexDescriptor tgt = target(e,graph);
        VertexIndex source_idx = get(boost::vertex_index,graph,src);
        VertexIndex target_idx = get(boost::vertex_index,graph,tgt);
        EdgeIndex edge_idx = get(boost::edge_index,graph,e);
        capacity[edge_idx] = 255.0f - fabs(pixel_intensity[source_idx]-pixel_intensity[target_idx]); //you should change this to your "gradiant or intensity or something"
    }

    VertexDescriptor s=vertex(0,graph), t=vertex(8,graph); 

    //in the boykov_kolmogorov_max_flow header it says that you should use this overload with an explicit color property map parameter if you are interested in finding the minimum cut
    boykov_kolmogorov_max_flow(graph,
        make_iterator_property_map(&capacity[0], get(boost::edge_index, graph)), 
        make_iterator_property_map(&residual_capacity[0], get(boost::edge_index, graph)),
        get(boost::edge_reverse, graph),
        make_iterator_property_map(&groups[0], get(boost::vertex_index, graph)),
        get(boost::vertex_index, graph),
        s,
        t
    );

   for(size_t index=0; index < groups.size(); ++index)
   {
        if((index%lengths[0]==0)&&index)
            std::cout << std::endl;
        std::cout << groups[index] << " ";
   }

   return 0;
} 
```

# datagridview - DataGridView：编辑后如何将记录更新到数据库

> ID：16178982
> 
> 赞同：0
> 
> 时间：2013-04-23T20:54:27.130
> 
> 标签：datagridview, bindingsource

我正在使用通过 BindingSource 和 DataSet 连接到数据库的 DataGridView。我希望当用户完成编辑一行并离开该行时，程序可以将当前行更新到数据库中。我在哪里可以放置我的更新代码？（在哪个班级和哪个活动中？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:58:27.510

您可以添加 OnRowUpdated/OnRowUpdating

# mysql - MySQL外键约束错误插入事务

> ID：16178984
> 
> 赞同：0
> 
> 时间：2013-04-23T20:54:28.773
> 
> 标签：mysql, stored-procedures, foreign-keys, innodb

在事务期间将值插入关联表时出现此错误：

`Cannot add or update a child row: a foreign key constraint fails (dev.genre, CONSTRAINT fk_Genre_EntityType1 FOREIGN KEY (idEntityType) REFERENCES entitytype (idEntityType) ON DELETE NO ACTION ON UPDATE NO ACTION)`

以下是描述使用的表的架构部分：

![在此处输入图像描述](https://i.stack.imgur.com/e4IIk.png)

这是`genre`表的创建语句：

```
-- -----------------------------------------------------
-- Table `dev`.`Genre`
-- -----------------------------------------------------

CREATE  TABLE IF NOT EXISTS `dev`.`Genre` (
  `idGenre` INT NOT NULL ,
  `Name` VARCHAR(45) NULL COMMENT 'musique, spectacle, expo' ,
  `idEntityType` INT NOT NULL ,
  `idStyle` INT NOT NULL ,
  PRIMARY KEY (`idGenre`, `idEntityType`, `idStyle`) ,
  INDEX `fk_Genre_EntityType1_idx` (`idEntityType` ASC) ,
  INDEX `fk_Genre_Style1_idx` (`idStyle` ASC) ,
  CONSTRAINT `fk_Genre_EntityType1`
    FOREIGN KEY (`idEntityType` )
    REFERENCES `dev`.`EntityType` (`idEntityType` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Genre_Style1`
    FOREIGN KEY (`idStyle` )
    REFERENCES `dev`.`Style` (`idStyle` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB; 
```

继续，`Genre`表格引用`EntityType`和`Style`，仅此而已。

当我尝试创建一个新`Style`的然后在`Genre`表中添加一个关联时会发生错误。

一切都在交易中，我所做的是：

*   在`Style`表格中创建新样式
*   获取创建样式的id
*   在表中插入一个关联，`genre`这就是我收到错误的时候。

我在网上搜索了很长时间，但我发现的唯一内容是这个 SO 帖子：[在 MySQL 中，我可以将引用完整性检查推迟到提交之前](https://stackoverflow.com/questions/5014700/in-mysql-can-i-defer-referential-integrity-checks-until-commit)

我不确定这就是这里的内容，因为错误发生在事务期间未更改的表上（`EntityType`）。还是我错过了什么？

有人可以解释一下我出现此错误的原因吗？（我被困在这里）

此外，如果它真的与我之前提到的 SO 帖子有关，是否有一种“干净”的方式来进行这种插入而不编写我自己的回滚机制？

感谢您的回答

**编辑**

插入新样式的第一个查询是：

```
CREATE PROCEDURE `Entity_CreateStyle`
(
    IN p_name varchar(45),
    OUT op_idStyle int(11)
)
BEGIN
    insert into Style(idParentStyle, Name, IsValidated)
    values(null, p_name, 0);

    SET op_idStyle = LAST_INSERT_ID();
END 
```

下一个，产生错误：

```
CREATE PROCEDURE `Entity_AssociateStyleWithEntityType`
(
    IN p_idGenre int(11),
    IN p_Name varchar(45),
    IN p_idEntityType int(11),
    IN p_idStyle int(11)
)
BEGIN
    insert into Genre(idGenre, Name, idEntityType, idStyle)
    values(p_idGenre, p_Name, p_idEntityType, p_idStyle);
END 
```

两者实际上都是我们使用 MySQL.Net 连接器从 C# 调用的存储过程

来自`p_idEntityType`模型（MVC），我检查了它的值是否正确并且存在于`EntityType`表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T00:14:58.793

错误信息很清楚：entitytype 是由流派引用的。这意味着 entitytype 中的所有行都必须在流派中匹配，否则无法插入。当genre.entitytype = entitytype.entitytype 时存在匹配。

# json.net - json.net 反序列化具有字典属性以及其他属性的对象

> ID：16178985
> 
> 赞同：0
> 
> 时间：2013-04-23T20:54:35.230
> 
> 标签：json.net

我有一个表示以下对象类型的 JSON 字符串：

```
public partial class Address
{
    public Address()

    public string Country { get; set; }
    public string StreetNo { get; set; }
    public string City { get; set; }
    public string Zip { get; set; }
    public string Complement { get; set; }
    public Nullable<int> Latitude { get; set; }
    public Nullable<int> Longitude { get; set; }
    public Nullable<int> Altitude { get; set; }
    public string Url { get; set; }
    public System.DateTime LastModified { get; set; }
    public byte[] Version { get; set; }
    public string StateCode { get; set; }
    public string Street { get; set; }
    public string RecordStatus { get; set; }
    public int UserId { get; set; }
    public int AddressId { get; set; }
    public Dictionary<string, object> OriginalValues { get; set; }
} 
```

我正在尝试创建一个 JsonConverter 以将 JSON 字符串反序列化为上述对象。我被困在要添加到我的转换器中以在我的代码中创建字典的问题上。到目前为止，转换器的代码如下所示：

```
 public class AddressConverter : JsonConverter
{

    public override bool CanConvert(Type objectType)
    {
        var temp = objectType == typeof(Address);
        return temp;
    }

    public override object ReadJson(JsonReader reader, Type objectType
        , object existingValue, JsonSerializer serializer)
    {
        var obj = JObject.Load(reader);

        var model = new Address();

        model.Country = Convert.ToString(((JValue)obj["Country"]).Value);
        model.StreetNo = Convert.ToString(((JValue)obj["StreetNo"]).Value);
        model.City = Convert.ToString(((JValue)obj["City"]).Value);
        model.Zip = Convert.ToString(((JValue)obj["Zip"]).Value);
        model.Complement = Convert.ToString(((JValue)obj["Complement"]).Value);
        model.Latitude = Convert.ToInt32(((JValue)obj["Latitude"]).Value);
        model.Longitude = Convert.ToInt32(((JValue)obj["Longitude"]).Value);
        model.Altitude = Convert.ToInt32(((JValue)obj["Altitude"]).Value);
        model.Url = Convert.ToString(((JValue)obj["Url"]).Value);
        model.LastModified = Convert.ToDateTime(((JValue)obj["LastModified"]).Value);
        model.StateCode = Convert.ToString((((JValue)obj["Country"]).Value));
        model.Street = Convert.ToString(((JValue)obj["StateCode"]).Value);
        model.RecordStatus = Convert.ToString(((JValue)obj["RecordStatus"]).Value);
        model.UserId = Convert.ToInt32(((JValue)obj["UserId"]).Value);
        model.AddressId = Convert.ToInt32(((JValue)obj["AddressId"]).Value);

        var encodedString = ((JValue) obj["Version"]).Value.ToString();
        model.Version = Convert.FromBase64String(encodedString); 
```

// 在此处添加字典代码

```
 return model;
    }

    public override bool CanWrite
    {
        get
        {
            return false;
        }
    }
    public override void WriteJson(JsonWriter writer, object value
        , JsonSerializer serializer)
    {
        serializer.Serialize(writer, value);
        throw new NotImplementedException();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:31:41.393

我不知道你想用这个自定义转换器实现什么。但这就是你想要的。

```
// Dictionary code here
model.OriginalValues = (Dictionary<string, object>)JsonConvert.DeserializeObject(obj["OriginalValues"].ToString(), typeof(Dictionary<string, object>)); 
```

# r - 如何将值“汇总”到后续记录中？

> ID：16178990
> 
> 赞同：2
> 
> 时间：2013-04-23T20:54:49.053
> 
> 标签：r

我有一个如下所示的数据集 (x)：

```
 DATE  WEEKDAY      A          B           C            D
 2011-02-04   Friday      113        67         109           72
 2011-02-05 Saturday        1         0           0            1
 2011-02-06   Sunday        9         5           0            0
 2011-02-07   Monday      154        48          85           60 
```

字符串（x）：

```
'data.frame':   4 obs. of  6 variables:
 $ DATE   : Date, format: "2011-02-04" "2011-02-05" "2011-02-06" "2011-02-07"
 $ WEEKDAY: Factor w/ 7 levels "Friday","Monday",..: 1 3 4 2
 $ A      : num  113 1 9 154
 $ B      : num  67 0 5 48
 $ C      : num  109 0 0 85
 $ D      : num  72 1 0 60 
```

周二 - 周六的值不会改变，但我希望周日是周六和周日的总和，周一是周六、周日和周一的总和。

我尝试将周六和周日的日期分别转换为 date + 2 和 date + 1，然后按日期汇总，但我丢失了周末记录。

对于我的示例，正​​确的结果如下：

```
 DATE  WEEKDAY      A          B           C            D
 2011-02-04   Friday      113        67         109           72
 2011-02-05 Saturday        1         0           0            1
 2011-02-06   Sunday       10         5           0            1
 2011-02-07   Monday      164        53          85           61 
```

**如何将周末值汇总到第二天？**

三周的数据：

```
 DATE   WEEKDAY   A   B   C   D
1  2011-01-02    Sunday   2   1   0   0
2  2011-01-03    Monday 153  51   7   1
3  2011-01-04   Tuesday 182 103  13   5
4  2011-01-05 Wednesday 192 102  14  12
5  2011-01-06  Thursday 160  67  50  20
6  2011-01-07    Friday 154  96  50  39
7  2011-01-09    Sunday   0   0   0   1
8  2011-01-10    Monday 195  94  48  39
9  2011-01-11   Tuesday 206  72  71  38
10 2011-01-12 Wednesday 232  94  96  52
11 2011-01-13  Thursday 178 113  93  52
12 2011-01-14    Friday 173  97  68  56
13 2011-01-15  Saturday   2   0   1   0
14 2011-01-17    Monday 170  91  66  52
15 2011-01-18   Tuesday 176  76  70  78
16 2011-01-19 Wednesday 164 159 117  37
17 2011-01-20  Thursday 198  87  95 111
18 2011-01-21    Friday 213  86  89  90
19 2011-01-24    Monday 195  73 102  52
20 2011-01-25   Tuesday 193 108 116  70
21 2011-01-26 Wednesday 193 102 118  63 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T21:33:58.757

由于您提供了小数据，因此我无法在更大的数据上对此进行测试。但这个想法是这样的。我会使用`data.table`，因为我发现它在这里非常有效。

### 编码：

```
require(data.table) 
my_days <- c("Saturday", "Sunday", "Monday")
dt <- data.table(df)
dt[, `:=`(DATE = as.Date(DATE))]
setkey(dt, "DATE")
dt[WEEKDAY %in% my_days, `:=`(A = cumsum(A), B = cumsum(B), 
            C = cumsum(C), D = cumsum(D)), by = format(DATE-1, "%W")] 
```

### 想法：

*   首先，使用（第 4 行）将`DATE`Column 更改为实际`Date`类型。`as.Date`
*   `DATE`其次，通过将键列设置`dt`为`DATE`（第 5 行）确保列按列排序。
*   现在，最后一行（第 6 行）是所有魔法发生的地方，也是最棘手的：
    *   表达式的第一部分仅用 days =`WEEKDAY %in% my_days,`对 dt 进行子集化。`data.table``Sat, Sun or Mon`
    *   同一行的最后一部分，`by = format(DATE-1, "%W")`按数据所属的周对数据进行子集化。在这里，由于`Monday`是下周，只需将*当前 Date*减去 1 即可得到周数。这将按 将日期分组`Week`，其中，星期二到星期一应该是同一周。
    *   中间的表达式`':='(A = ... , D = ...)`计算`cumsum`并仅通过引用替换每个分组的那些值。

* * *

对于您发布的新数据，我得到了这个结果。让我知道这*不是*你想要的。

```
#           DATE   WEEKDAY   A   B   C   D
#  1: 2011-01-02    Sunday   2   1   0   0
#  2: 2011-01-03    Monday 155  52   7   1
#  3: 2011-01-04   Tuesday 182 103  13   5
#  4: 2011-01-05 Wednesday 192 102  14  12
#  5: 2011-01-06  Thursday 160  67  50  20
#  6: 2011-01-07    Friday 154  96  50  39
#  7: 2011-01-09    Sunday   0   0   0   1
#  8: 2011-01-10    Monday 195  94  48  40
#  9: 2011-01-11   Tuesday 206  72  71  38
# 10: 2011-01-12 Wednesday 232  94  96  52
# 11: 2011-01-13  Thursday 178 113  93  52
# 12: 2011-01-14    Friday 173  97  68  56
# 13: 2011-01-15  Saturday   2   0   1   0
# 14: 2011-01-17    Monday 172  91  67  52
# 15: 2011-01-18   Tuesday 176  76  70  78
# 16: 2011-01-19 Wednesday 164 159 117  37
# 17: 2011-01-20  Thursday 198  87  95 111
# 18: 2011-01-21    Friday 213  86  89  90
# 19: 2011-01-24    Monday 195  73 102  52
# 20: 2011-01-25   Tuesday 193 108 116  70
# 21: 2011-01-26 Wednesday 193 102 118  63
#           DATE   WEEKDAY   A   B   C   D 
```

# spine.js - 在 SpineJS 中，当我们已经有了“扩展”时，@extend 的目的是什么

> ID：16178995
> 
> 赞同：0
> 
> 时间：2013-04-23T20:55:07.000
> 
> 标签：spine.js

咖啡脚本“扩展”和“@extend”有什么区别？Extend 用于继承，@extend 用于混合，但你只能得到一个可以混合的对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T04:48:32.223

@extend 不是为了继承，它是关于一个 mixin - 允许从另一个对象添加成员而无需继承

# ios - 通过单击添加错误数字的按钮向变量添加 +1

> ID：16178998
> 
> 赞同：1
> 
> 时间：2013-04-23T20:55:08.760
> 
> 标签：ios, objective-c, nsinteger

我对 Objective-c 很陌生，可能真的很容易解决，但在任何地方都找不到答案....

每次用户单击按钮时，我都尝试向变量添加 +1，但不是添加 +1，而是添加 +4

```
- (IBAction)addNewSet:(UIButton *)sender {
    NSLog(@"%i",_sliderTag);
    _sliderTag += 1;
   NSLog(@"ADD NEW    %i",_sliderTag);
} 
```

`_sliderTag`已经是`NSInteger`：

```
@property (nonatomic,assign) NSInteger* sliderTag; 
```

执行添加后的第一个`NSLog`打印`0`和第二个打印`4`。谁能解释为什么？它旨在打印`0`第一个，因为该变量的目的是作为设置标签的计数器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T20:58:26.077

听起来像是`_sliderTag`一个指向大小为 4 字节的类型的指针。将 1 加到一个指针上会增加它所指向的类型的大小。以下是说明差异的两个示例：

```
NSInteger foo = 0;
foo += 1;
NSLog(@"result: foo = %d", foo);    // result: foo = 1

NSInteger *bar = 0;                 // note the '*'
bar += 1;
NSLog(@"result: bar = %d", bar);    // result: bar = 4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T20:58:48.477

首先，确保 _sliderTag 是 int 或 Integer 或 int 而不是 Integer* 或 int*，其次，不要使用 %i 打印它，而是使用 %d

# ruby-on-rails - 一个用户 has_many :reviews 两次

> ID：16178999
> 
> 赞同：0
> 
> 时间：2013-04-23T20:55:11.333
> 
> 标签：ruby-on-rails

我想我必须为我的 Rails 应用程序建立一个自引用关联（好吧，在阅读评论后，我猜它不是自引用的，但命名问题仍然存在），但我不知道应该如何设置它起来（即使在观看了有关该概念的 Railscast 之后）。在我的应用中，一个用户可以写另一个用户的评论。因此，用户 has_many :reviews 意味着他们写了很多评论。我已经在下面编码了......

```
User.rb

has_many :reviews  (a user can review many professionals)

Review.rb

belongs_to :user 
```

在我正在做的迁移中

```
rails g resource Review user_id:integer review:text 
```

我的问题是，既然我已经说过， User.rb has_many :reviews 和 Review.rb belongs_to :review 用于进行评论的用户，我将如何为正在审查的用户添加关联？另外，我会在迁移中添加什么以包含要审核的用户的 ID？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T21:02:26.723

您的`reviews`表实际上是一个多对多表，其中两个键都指向该`users`表。

首先，您需要确定键名；我建议使用“作者”和“主题”，因为“审稿人”和“审稿人”可能会造成混淆。

你会这样设置你的模型：

```
class User
  has_many :authored_reviews, class_name: "Review", foreign_key: "author_id"

class Review    
  belongs_to :author, class_name: "User"
  belongs_to :subject, class_name: "User" 
```

我认为您缺少的部分是您想查看您的用户评论了谁？为此，您需要将另一个添加`has_many`到您的 User 模型中并指定另一个`foreign_key`. 最难的部分是名字；措辞将是“用户是许多评论的主题”，但“reference_reviews”可能就足够了。我想我可能会简单地选择“评论”：

```
class User
  # Reviews this user has written
  has_many :authored_reviews, class_name: "Review"

  # Reviews others have written about this user
  has_many :reviews, class_name: "Review", foreign_key: "subject_id" 
```

另一种策略可能是将评论视为消息，并将您的关联称为`sent_reviews`and `received_reviews`、 or`written_reviews`和`received_reviews`。命名可能很困难，但重要的是要使其合理正确。这是编写可维护软件的重要组成部分。

要为`reviews`表生成迁移，请使用外键`references`代替`integer`，这将为您设置`_id`后缀和索引：

```
$ rails g model Review author:references subject:references 
```

这会给你`author_id`和`subject_id`专栏。