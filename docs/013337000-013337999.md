# StackOverflow 问答 13337000-13337999

# java - 在 gwt google-visualization 中带有注释文本的 ComboChart

> ID：13337000
> 
> 赞同：1
> 
> 时间：2012-11-12T00:33:49.277
> 
> 标签：java, gwt, google-visualization, gwt-visualization

我正在使用[gwt-visualization](http://code.google.com/p/gwt-google-apis/downloads/detail?name=gwt-visualization-1.1.2.zip&can=2&q=)（围绕[Chart Tools](https://developers.google.com/chart/)的包装器）。我有一个包含两个条形图（堆叠）和一个折线图的 ComboChart，我想在某些行中添加一个`annotation`和。`annotationText`

是这样定义的`DataTable`：

```
private DataTable buildData() {

    DataTable data = DataTable.create();
    data.addColumn(ColumnType.STRING, "Day");
    data.addColumn(ColumnType.NUMBER, "Domain");
    data.addColumn(ColumnType.NUMBER, "Domain (Source 1)");
    data.addColumn(ColumnType.NUMBER, "Domain (Source 2)");

    addAnnotationColumn(data);

    return data;
}

private native void addAnnotationColumn(DataTable data) /*-{
    data.addColumn({
        type : 'string',
        role : 'annotation'
    });
    data.addColumn({
        type : 'string',
        role : 'annotationText'
    });
}-*/; 
```

然后图表选项...

```
private ComboChart.Options createComboOptions(String title) {
    ComboChart.Options options = ComboChart.createComboOptions();
    Series line = Series.create();
    line.setType(Type.LINE);
    options.setSeries(0, line);

    Series bars1 = Series.create();
    bars1.setType(Type.BARS);
    options.setSeries(1, bars1);

    Series bars2 = Series.create();
    bars2.setType(Type.BARS);
    options.setSeries(2, bars2);

    options.setIsStacked(true);
    return options;
} 
```

结果是这样的： ![结果](../Images/bc3c5785d193408397db7d611c7f79e3.png)

我需要的是为**行系列中的某些行添加注释**，或者换句话说**如何在 ComboChart 中设置角色**，但我似乎找不到任何关于如何在 gwt 中执行此操作的文档（甚至如何执行它在 ComboChart 中的纯 JS 中）。帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T09:49:11.480

关于谷歌图表中角色的文档可以在[这里](https://developers.google.com/chart/interactive/docs/roles)找到。

要添加实际的注释，您可以使用内置的 GWT 函数 ( `setValue()`) 类似的东西：

```
private DataTable buildData() {

    DataTable data = DataTable.create();
    data.addColumn(ColumnType.STRING, "Day");
    data.addColumn(ColumnType.NUMBER, "Domain");
    data.addColumn(ColumnType.NUMBER, "Domain (Source 1)");
    data.addColumn(ColumnType.NUMBER, "Domain (Source 2)");

    addAnnotationColumn(data);

    for (int i =0;i<dataLength;i++) {
        data.addRow();
        data.setValue(i,0,'DAY');
        data.setValue(i,1,DOMAIN);
        data.setValue(i,2,DOMAIN_SOURCE1); 
        data.setValue(i,3,DOMAIN_SOURCE2);
        data.setValue(i,4,ANNOTATION);
        data.setValue(i,5,ANNOTATION_TEXT);
    }

    return data;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T18:35:18.860

事实证明，ComboChart 将 annotation/annotationText 列添加到图表上创建的最后一个系列 - 这意味着角色被添加到条形图中，它不支持 ComboChart 中的注释。

然而，折线图支持它们 - 所以“肮脏的修复”是让线系列成为图中的最后一个：

```
private ComboChart.Options createComboOptions(String title) {
    ComboChart.Options options = ComboChart.createComboOptions();

    Series bars1 = Series.create();
    bars1.setType(Type.BARS);
    options.setSeries(0, bars1);

    Series bars2 = Series.create();
    bars2.setType(Type.BARS);
    options.setSeries(1, bars2);

    Series line = Series.create();
    line.setType(Type.LINE);
    options.setSeries(2, line);

    options.setIsStacked(true);
    return options;
} 
```

# android - 如何在android中保存裁剪的图像而不是返回裁剪数据？

> ID：13337006
> 
> 赞同：1
> 
> 时间：2012-11-12T00:34:31.113
> 
> 标签：android, android-image

我有一个应用程序，我可以让用户选择画廊图像或用相机拍照，然后我给他裁剪它的选项。

现在，当用户裁剪图像时，Gallery 裁剪器返回裁剪部分的 ByteArray，是否可以传递一个参数要求 Gallery 裁剪器将输出保存到文件（就像我开始意图在摄像头）

例如：

这是我使用的裁剪代码：

```
// Initialize intent
Intent intent = new Intent("com.android.camera.action.CROP");
// set data type to be sent
intent.setType("image/*");

// get croppers available in the phone
List<ResolveInfo> list = getPackageManager().queryIntentActivities( intent, 0 );
int size = list.size();
// handle the case if there's no cropper in the phone
if (size == 0) {
    Toast.makeText(this, "Can not find image crop app", Toast.LENGTH_SHORT).show();
    return;
} else {

// now this is the case if cropper exists
// initialize the Uri for the captures or gallery image

    Uri imageUri = Uri.fromFile(new File(mCurrentPhotoPath));

    // Send the Uri path to the cropper intent
    intent.setData(imageUri); 
    intent.putExtra("outputX", 200);
    intent.putExtra("outputY", 200);
    intent.putExtra("aspectX", 1);
    intent.putExtra("aspectY", 1);         
    intent.putExtra("scale", true);
    // Here's my attempt to ask the intent to save output data as file
    File f = null;
    // Here I initialize empty file 
    try{
            // This returns the file created
        f = setUpCroppedFile();
        mCurrentThumbPath = f.getAbsolutePath();            
        intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(f));            
        intent.putExtra("output", Uri.fromFile(f));         
    }
    catch(IOException e){
        e.printStackTrace();
    }
    // --------------------------------------------------------------------
    // -----------> When changing this to false it worked <----------------
    // --------------------------------------------------------------------        
    intent.putExtra("return-data", true);
    // --------------------------------------------------------------------
    // --------------------------------------------------------------------

    // If there's only 1 Cropper in the phone (e.g. Gallery )
    if (size == 1) {
            // get the cropper intent found
            Intent i        = new Intent(intent);
            ResolveInfo res = list.get(0);

            i.setComponent( new ComponentName(res.activityInfo.packageName, res.activityInfo.name));

            startActivityForResult(i, CROPPED_PHOTO);
    }

   // Please ignore the case if there are more . . I know how to handle it 
```

**更新：问题已解决，我想我会把它留在这里，以防其他人发现它有用（请参阅上面代码中的大注释）**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T00:50:36.287

此代码是修改后的代码，它可以工作：

```
// Initialize intent
Intent intent = new Intent("com.android.camera.action.CROP");
// set data type to be sent
intent.setType("image/*");

// get croppers available in the phone
List<ResolveInfo> list = getPackageManager().queryIntentActivities( intent, 0 );
int size = list.size();
// handle the case if there's no cropper in the phone
if (size == 0) {
    Toast.makeText(this, "Can not find image crop app", Toast.LENGTH_SHORT).show();
    return;
} else {

// now this is the case if cropper exists
// initialize the Uri for the captures or gallery image

    Uri imageUri = Uri.fromFile(new File(mCurrentPhotoPath));

    // Send the Uri path to the cropper intent
    intent.setData(imageUri); 
    intent.putExtra("outputX", 200);
    intent.putExtra("outputY", 200);
    intent.putExtra("aspectX", 1);
    intent.putExtra("aspectY", 1);         
    intent.putExtra("scale", true);
    // Here's my attempt to ask the intent to save output data as file
    File f = null;
    // Here I initialize empty file 
    try{
            // This returns the file created
        f = setUpCroppedFile();
        mCurrentThumbPath = f.getAbsolutePath();            
        intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(f));            
        intent.putExtra("output", Uri.fromFile(f));         
    }
    catch(IOException e){
        e.printStackTrace();
    }
    // --------------------------------------------------------------------
    // -----------> When changing this to false it worked <----------------
    // --------------------------------------------------------------------        
    intent.putExtra("return-data", false);
    // --------------------------------------------------------------------
    // --------------------------------------------------------------------

    // If there's only 1 Cropper in the phone (e.g. Gallery )
    if (size == 1) {
            // get the cropper intent found
            Intent i        = new Intent(intent);
            ResolveInfo res = list.get(0);

            i.setComponent( new ComponentName(res.activityInfo.packageName, res.activityInfo.name));

            startActivityForResult(i, CROPPED_PHOTO);
    }

   // Please ignore the case if there are more . . I know how to handle it 
```

# android - 我可以显示一个迷你屏幕吗？

> ID：13337011
> 
> 赞同：0
> 
> 时间：2012-11-12T00:35:29.143
> 
> 标签：android, android-layout

我正在制作一个安卓测试游戏。在玩游戏的时候，用户可以打开一个小屏幕写一些用户需要记住的东西，然后关闭小屏幕继续玩游戏。我怎样才能制作这个迷你屏幕？我尝试了这种方法，但它不像我需要的方法。

```
public class CustomActivityTransitionActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
}

public void onClickNext(View view) {
    Intent intent = new Intent(this, SecondActivity.class);
    startActivityForResult(intent, 500);
    overridePendingTransition(R.anim.slide_in_right, R.anim.slide_out_left);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    overridePendingTransition(R.anim.slide_in_left, R.anim.slide_out_right);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T01:24:40.207

您可以创建弹出窗口或使用 alertDialog 并在其中添加您需要的任何自定义布局

# update-statement - 从日程表更新台球排名表的语句

> ID：13337016
> 
> 赞同：1
> 
> 时间：2012-11-12T00:36:51.283
> 
> 标签：update-statement

我有两张表，我正试图从我的日程表结果中获取我的台球排名表的更新语句。所以我不必手动进行，一场锦标赛通常有 60 个 ganes，我将这基于两张桌子的 Tourn_ID 和 TeamID。在日程表中 TeamID = Team_A_ID 或 Team_B_ID，具体取决于团队是否被指定为 Team_A 或 Team_B 如果 GMFinal = 是我想更新该 TOURN_ID 的台球排名，并且 TeamID Total 是台球排名表将计算（获胜次数 * 3 + #of Losses * 0 + # of Ties +1) =Total Points 任何帮助或建议都会非常有用。

这是我的表结构

## -- 表的表结构`SCOREBOARD_TOURNAMENTSS`

如果不存在则创建表`SCOREBOARD_TOURNAMENTSS`（ `ID`int(11) NOT NULL auto_increment, `TOURN_ID`varchar(255) NOT NULL, `TEAM_A_ID`varchar(255) NOT NULL, `TEAM_A`varchar(255) NOT NULL, `TEAM_A_SCORE`int(11) NOT NULL default '0', `TEAM_B_ID`varchar(255) NOT NULL, `TEAM_B`varchar(255) NOT NULL, `TEAM_B_SCORE`int(11) NOT NULL 默认 '0', `GAMETYPE`varchar(255) NOT NULL, `POOL`varchar(255) NOT NULL, `MF`varchar(11) NOT NULL, `GYMNAME`varchar(255) NOT NULL, `TIME`varchar （255）NOT NULL， `DATE`varchar（255）NOT NULL， `DAY`varchar（255）NOT NULL， `Updated`时间戳NOT NULL默认CURRENT_TIMESTAMP更新CURRENT_TIMESTAMP， `GMFinal`varchar（3）NOT NULL默认'YES'， `VideoURL`varchar(100) 默认 '-', PRIMARY KEY ( `ID`) ) ENGINE=MyISAM DEFAULT CHARSET=latin1 AUTO_INCREMENT=1260 ;

## -- 表的表结构`SCOREBOARD_POOL_STANDINGS`

如果不存在则创建表`SCOREBOARD_POOL_STANDINGS`（ `ID`int(11) NOT NULL auto_increment, `TOURN_ID`varchar(255) NOT NULL default 'MI2009', `TEAM_ID`varchar(255) NOT NULL, `TEAMS`varchar(255) NOT NULL, `MF`varchar(255) NOT NULL, `POOL`varchar(255)非空， `TOTAL`整数（11）非空， `WON`整数（11）非空， `LOST`整数（11）非空， `TIED`整数（11）非空， `FOR`整数（11）非空， `AGAINST`整数（11）非空， `GD`整数（11）非NULL, `PLAYOFFSEED`varchar(255) NOT NULL, PRIMARY KEY ( `ID`) ) ENGINE=MyISAM DEFAULT CHARSET=latin1 AUTO_INCREMENT=384 ;

# python - gitpython 创建 zip 存档

> ID：13337018
> 
> 赞同：4
> 
> 时间：2012-11-12T00:37:16.040
> 
> 标签：python, git, gitpython

如何使用 gitpython 创建存档，我尝试了以下创建文件但无法打开它的方法，**它告诉我读取存档时出错，存档似乎无效或损坏**

```
from git import *
repo = Repo(repo_path)
assert repo.bare == False
repo.archive(open("repo.tar",'w')) 
```

我想创建一个 zip 文件，所以我尝试了这个，但在这里它创建了一个空的 zip 文件（repo 的路径是正确的，因为当我使用 repo.clone 时，它​​会克隆所有内容）

```
repo.archive(open("repo.zip",'w'), format="zip") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T12:12:09.460

您需要将文件作为二进制文件打开（添加`b`到`mode`参数中）并在完成后关闭它。对您的示例进行以下修改使其正常工作：

```
from git import Repo

repo = Repo(repo_path)
assert not repo.bare
with open('repo.zip', 'wb') as archive_file:
    repo.archive(archive_file, format='zip') 
```

# .net - System.ConsoleKeyInfo.Key 是虚拟键码吗？

> ID：13337021
> 
> 赞同：0
> 
> 时间：2012-11-12T00:37:35.723
> 
> 标签：.net, windows-console

我正在实现我自己的[PSHostRawUserInterface](http://msdn.microsoft.com/en-us/library/system.management.automation.host.pshostrawuserinterface%28v=vs.85%29.aspx)版本。我想实现[PSHostRawUserInterface.ReadKey()](http://msdn.microsoft.com/en-us/library/system.management.automation.host.pshostuserinterface.prompt%28v=vs.85%29.aspx)，因此我需要将[System.Management.Automation.Host.KeyInfo.VirtualKeyCode](http://msdn.microsoft.com/en-us/library/system.management.automation.host.keyinfo.virtualkeycode%28v=vs.85%29.aspx)映射到[System.ConsoleKeyInfo.Key](http://msdn.microsoft.com/en-us/library/system.consolekeyinfo.key.aspx)。

我可以将 System.ConsoleKeyInfo.Key 转换为 int，我只是不知道这是否真的是 VirtualKeyCode。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T04:34:05.660

我*想*我前段时间对此进行了测试，答案是“是的，但是”。请参阅下面的注意事项。[您可以通过编写一个程序来测试该答案，该程序输出所有ConsoleKey](http://msdn.microsoft.com/en-us/library/system.consolekey.aspx)值的整数值并将它们与[Virtual Key Codes](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375731%28v=vs.85%29.aspx)进行比较。

但请注意，这`ConsoleKeyInfo.Key`只是关键，没有修饰符。虚拟键码是包含修饰符（Shift、Control、Alt）的位图值。使用`ConsoleKeyInfo`，修饰符存储在`Modifiers`属性中。

或者，您可以将`ConsoleKey`枚举的值与[Keys](http://msdn.microsoft.com/en-us/library/system.windows.forms.keys.aspx)枚举的值进行比较，这明确表示这些值对应于虚拟键代码。

# javascript - 主干获取如何构建模型或集合？

> ID：13337024
> 
> 赞同：1
> 
> 时间：2012-11-12T00:38:07.333
> 
> 标签：javascript, backbone.js, fetch

在许多主干示例中，我看到了带有`mymodel.fetch()`or`mycollection.fetch()`的代码，并且大多数代码没有使用成功回调来从响应中构造模型/集合。我正在填写，就像我错过了有关 fetch 如何从结果中创建模型实例的信息。这是怎么发生的？

编辑

1.  在某些情况下，模型与返回的 json 结构不同，需要映射模型属性。例如，模型属性是 'name' 和 'age' 但返回的 json 是：{n_name:'dan', props: {age: 12, address: '此数据不相关'}}。需要将返回的 json 映射到模型。我该怎么做？这种情况是否迫使我使用成功回调？

2.  有时模型包含与其他模型或集合的关系。例如，具有 AddressModel 类型的属性和名为 People 的人员集合的 HouseModel。我希望 fetch 在构造 AddressModel 时创建一个模型，并在构造 People 时创建一个人员集合。我该怎么做？我应该为此使用成功还是有其他方法/解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T00:39:35.453

模型的实例已经“构建”好了。这就是你所呼吁`fetch()`的。

否则，正在发生的事情是响应 JSON 被用于将每个键值对分配为该模型实例的属性。对于集合，它正在根据响应创建新模型。

所以本质上：

```
// This line instantiates a new model
var model = new MyApp.Models.ModelThing();
// This line loads the model's attributes from the database
model.fetch(); 
```

如果您对这一切究竟是如何发生的感兴趣，请查看`Backbone.sync`方法。这就是 AJAX 请求的实际作用，并触发处理响应的大多数回调。

可以传递给 fetch 的成功和错误回调纯粹是可选的，用于清理失败的加载或向用户发出加载发生的信号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T01:00:17.510

这是您可能从中得到的一个示例。我建议您从成功回调函数中操作和使用更新的模型，因为这是异步方法，它可能是您之后可以实际使用模型的唯一方法。

```
var MyModel = new Todo({id: Number(item)});
MyModel.fetch({success:function(){
        var todo = new updateView({model: dModel });
        todo.render();  
}}); 
```

模型已经使用获取的数据构建，但在成功回调中使用该填充模型。

编辑：

对于您的第一个问题：您需要查看[model.parse](http://documentcloud.github.com/backbone/#Model-parse)或 collection.parse 的文档，以便您可以为后端响应自定义主干提取。这样做相当容易：

```
var Collection = Backbone.Collection.extend({

    parse: function(data){return data.objects;} 

}); 
```

对于你的另一个问题，我不太明白你想要做什么。但我认为它应该非常简单。你可以用两种方式来做。只是不要尝试在同一个函数（绑定事件和成功回调之外）中单独使用构造和获取的集合，因为由于异步获取，您可能一无所获。

# java - 在哪里放置 onBackPressed

> ID：13337028
> 
> 赞同：1
> 
> 时间：2012-11-12T00:38:32.990
> 
> 标签：java, android, eclipse, back-button, back

我尝试使用以下命令配置后退按钮：

```
Public void onBackPressed(){return;} 
```

但它什么也没做（我也尝试了 super.onBack ......并完成了）。我的应用程序是一个业余应用程序，基于： Onclik X 按钮：“english”，因此它向您显示英语活动。还有 100 多个活动。

```
 package com.example.speakcat;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;

public class MainActivity extends Activity {
    @Override
    public void onBackPressed() {
        super.onBackPressed();
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    public void english(View view)
    {
        setContentView(R.layout.activity_english);
    } 
```

onBackPressed 是否放置得当？因为在这里它什么也做不了。我希望你能帮助我，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T08:20:27.997

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {

    if ( keyCode == KeyEvent.KEYCODE_BACK) {
        Log.d("CDA", "onKeyDown Called");
       onBackPressed();
      return true;
    }

    return super.onKeyDown(keyCode, event);
}
public void onBackPressed() {
    Intent myIntent = new Intent(YourActivity.this, SecondActivity.class);//goto whichever activity you want by clearing top of stack.
    myIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);// clear top of stack
    startActivity(myIntent);
    finish();
    return;
 } 
```

如果您想返回之前的活动，您可以调用完成。如果您有活动 A 并且您导航到 B。A 转到后台。它在活动堆栈上。活动 B 完成后从堆栈中弹出，活动 A 进入前台。[http://developer.android.com/guide/components/tasks-and-back-stack.html](http://developer.android.com/guide/components/tasks-and-back-stack.html)。看看这个链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T00:50:10.130

完成您当前的活动，将自动进入上一个活动

```
@Override
public void onBackPressed() 
{
    finish();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T00:43:21.747

您必须使用调用覆盖该方法`super`。如果您的想法是返回到以前的`Activity`.

```
@Override
public void onBackPressed() {
    super.onBackPressed();
} 
```

# ubuntu - 在 Ubuntu 12.04 上安装 Hadoop 的问题

> ID：13337034
> 
> 赞同：0
> 
> 时间：2012-11-12T00:39:53.970
> 
> 标签：ubuntu, hadoop, mapreduce, hdfs

我刚刚设置了一个新的 Ubuntu 12.04 VM（Virtualbox）并想在其上测试 Hadoop。我正在关注本指南：[http ://hadoop.apache.org/docs/r0.20.2/quickstart.html](http://hadoop.apache.org/docs/r0.20.2/quickstart.html)

我认为我在 java 安装和 JAVA_HOME 路径上做错了......现在 bin/hadoop 总是只返回“找不到命令”

我必须在哪里提取 hadoop 文件夹？

我需要先设置 SSH 吗？SSHD呢？

安装正确的 java 版本的命令是什么？

我必须在 hadoop-env.sh 文件中输入什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T12:33:25.817

我使用了这个很棒的教程。唯一的改变是我安装了一个默认的 Java6 ...

[Michael Noll Hadoop 设置教程](http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-single-node-cluster/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T05:48:15.177

*   运行 hadoop 时出现的“command not found”错误应该与 JAVA_HOME 无关。我相信您没有从 hadoop 主目录运行此命令（另一种选择是将hadoop/bin*的完整路径添加到您的 PATH 中）。*

*   您可以在任何您喜欢的地方提取 hadoop 文件夹

*   对于 hadoop-env.sh，您应该将 JAVA_HOME 变量设置为指向您的 Java 安装主目录，例如`export JAVA_HOME=/home/jdk1.6.0/` *更改此路径以反映您的环境*

*   您将需要 SSH 和 SSHD，特别是如果您将在分布式或伪分布式环境中运行 Hadoop。

*   [Hadoop 需要 Java 1.6+，只需从这里](http://www.oracle.com/technetwork/java/javase/downloads/jdk7u9-downloads-1859576.html)下载 jdk-7u9-linux-i586.tar.gz并按照[安装指南](http://docs.oracle.com/javase/7/docs/webnotes/install/linux/linux-jdk.html)进行操作（它应该只需要解压缩即可）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-13T12:48:27.927

**安装 Hadoop Hive Scoop 和 PIG**

按照步骤安装上述应用程序。注意：不需要额外的用户，您可以在现有系统上工作。

1.  下载 Haddop 2.7.1、PIG、Sqoop、Hive

    ```
     http://www.us.apache.org/dist/hadoop/common/hadoop-2.7.1/hadoop-2.7.1.tar.gz   

     http://www.us.apache.org/dist/pig/pig-0.13.0/pig-0.13.0.tar.gz      

     http://www.us.apache.org/dist/sqoop/1.4.6/ sqoop-1.4.6.bin__hadoop-2.0.4-alpha.tar.gz   

     http://www.eu.apache.org/dist/hive/hive-1.2.1/apache-hive-1.2.1-bin.tar.gz 
    ```

2.  在文件夹中提取说 /home/mypc/hadoop-soft --> cd hadoop-soft

    ```
    hive -->  /home/mypc/hadoop-soft/hive
    sqoop --> /home/mypc/hadoop-soft/sqoop
    pig   --> /home/mypc/hadoop-soft/pig
    hadoop --> /home/mypc/hadoop-soft/hadoop 
    ```

确保您没有在这些文件夹中创建任何子文件夹，并且能够看到相应的 bin 文件夹。

3.  现在让我们将这些文件夹移动到 /usr/lib

    ```
     sudo mkdir /usr/lib/hadoop

     sudo mv sqoop/ /usr/lib/hadoop/
     sudo mv pig/ /usr/lib/hadoop/
     sudo mv hive/ /usr/lib/hadoop/
     sudo mv hadoop-2.6/ /usr/lib/hadoop/ 
    ```

4.  编辑 .bashrc 文件以添加路径：在文件末尾添加以下行

    删除 Java_path 状态，如果有的话，因为我们在这里更新它。

    检查 Java 是否已安装并存在于下面提到的位置。如果是那么很好，如果不是那么你需要谷歌安装java n ubuntu

    ```
     sudo gedit ~/.bashrc 
    ```

将以下行添加到 .bashrc 的末尾

```
 export JAVA_HOME=/usr/lib/jvm/java-7-openjdk-amd64
     export HADOOP_HOME=/usr/lib/hadoop/hadoop-2.6
     export HIVE_HOME=/usr/lib/hadoop/hive
     export PIG_HOME=/usr/lib/hadoop/pig
     export SQOOP_HOME=/usr/lib/hadoop/sqoop

    export HADOOP_MAPRED_HOME=/usr/lib/hadoop/hadoop
    export HADOOP_COMMON_HOME=/usr/lib/hadoop/hadoop
    export HADOOP_HDFS_HOME=/usr/lib/hadoop/hadoop
    export HADOOP_YARN_HOME=/usr/lib/hadoop/hadoop  
    export HADOOP_CONF_DIR=/usr/lib/hadoop/hadoop/etc/hadoop

    export PATH=$PATH:$JAVA_HOME/bin:$HADOOP_HOME/bin::$PIG_HOME/bin:$HIVE_HOME/bin:$SQOOP_HOME/bin 
```

5.  保存此文件并关闭它。现在您可能想要运行它以反映更新。

    ```
    source ~/.bashrc 
    ```

6.创建两个目录namenode和datanode

```
cd /usr/lib
sudo mkdir hdfs
cd hdfs
sudo mkdir namenode
sudo mkdir datanode
sudo chmod 777 -R namenode
sudo chmod 777 -R datanode 
```

7.  转到 $HADOOP_HOME 并编辑一些文件。

    ```
    cd $HADOOP_HOME
    cd etc/hadoop/ 
    ```

    A. sudo gedit yarn-site.xml : 在 <configuration> </configuration> 里面添加这些行

    ```
    <property>
    <name>yarn.nodemanager.aux-services</name>
    <value>mapreduce_shuffle</value>
    </property>
    <property>
    <name>yarn.nodemanager.aux-services.mapreduce.shuffle.class</name>
    <value>org.apache.hadoop.mapred.ShuffleHandler</value>
    </property> 
    ```

    *   保存文件并关闭

    B. sudo gedit core-site.xml : 在 <configuration> </configuration> 里面添加这些行

    ```
    <property>
    <name>fs.default.name</name>
    <value>hdfs://localhost:9000</value>
    </property> 
    ```

    *   保存文件并关闭。

C. sudo gedit hdfs-site.xml ：在 <~configuration> <~/configuration> 中添加这些行

```
 <property>
    <name>dfs.replication</name>
    <value>1</value>
    </property>
    <property>
    <name>dfs.namenode.name.dir</name>
    <value>file:/usr/lib/hdfs/namenode</value>
    </property>
    <property>
    <name>dfs.datanode.data.dir</name>
    <value>file:/usr/lib/hdfs/datanode</value>
    </property> 
```

*   保存文件并关闭

D. sudo gedit mapred-site.xml ：添加这些行

```
 <?xml version="1.0"?>
      <configuration>
        <property>
            <name>mapreduce.framework.name</name>
            <value>yarn</value>
     </property> 
    </configuration> 
```

注意：这将是一个新文件。- 保存并关闭。

8.  格式化名称节点 `hdfs namenode -format`

9.  转到 /usr/lib/hdfs 并创建启动和停止脚本

    ```
    cd /usr/lib/hdfs
    sudo mkdir scripts
    sudo chmod 777 -R scripts
    cd scripts
    sudo gedit hadoopstart.sh 
    ```

写下这些行

```
 /usr/lib/hadoop/hadoop-2.6/sbin/hadoop-daemon.sh start namenode
    /usr/lib/hadoop/hadoop-2.6/sbin/hadoop-daemon.sh start datanode
    /usr/lib/hadoop/hadoop-2.6/sbin/yarn-daemon.sh start resourcemanager
    /usr/lib/hadoop/hadoop-2.6/sbin/yarn-daemon.sh start nodemanager
    /usr/lib/hadoop/hadoop-2.6/sbin/mr-jobhistory-daemon.sh start historyserver 
```

*   保存并关闭。

    ```
    sudo gedit hadoopstop.sh 
    ```

写下这些行

```
 /usr/lib/hadoop/hadoop-2.6/sbin/hadoop-daemon.sh stop namenode
    /usr/lib/hadoop/hadoop-2.6/sbin/hadoop-daemon.sh stop datanode
    /usr/lib/hadoop/hadoop-2.6/sbin/yarn-daemon.sh stop resourcemanager
    /usr/lib/hadoop/hadoop-2.6/sbin/yarn-daemon.sh stop nodemanager
    /usr/lib/hadoop/hadoop-2.6/sbin/mr-jobhistory-daemon.sh stop historyserver 
```

- 保存并关闭它。

10.  运行这些文件以在本地模式下启动和停止 hadoop

开始

```
 sh /usr/lib/hdfs/scripts/hadoopstart.sh 
```

停止

```
 sh /usr/lib/hdfs/scripts/hadoopstop.sh 
```

11.  检查 hadoop 是否正在运行：运行启动脚本后

    ```
    hadoop version
    hadoopp fs -ls /

    Open http://localhost:50070 to see if name node is running. 
    ```

12.  使用：在终端上运行各种服务

    ```
    Pig
    sqoop
    hive 
    ```

# javascript - 鼠标输入 JavaScript 不工作

> ID：13337039
> 
> 赞同：0
> 
> 时间：2012-11-12T00:40:45.963
> 
> 标签：javascript, css

嗨，我有这段代码，但它不起作用，我不明白为什么

```
$('#thumbs > li').mouseenter(function() {
    $(this).find("div").fadeIn();
}).mouseleave(function(){
     $(this).find("div").fadeOut();
});
​ 
```

这是整个事情[http://jsfiddle.net/8Q24N/](http://jsfiddle.net/8Q24N/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T00:47:15.887

你可能想要这个

```
$(document).ready(function(){
    $('#thumbs > li').mouseenter(function() {
        $(this).find("div").fadeIn();
    }).mouseleave(function(){
         $(this).find("div").fadeOut();
    });
});​ 
```

将代码包裹在里面`$(document).ready(function(){...})`

[**演示**](http://jsfiddle.net/heera/8Q24N/4/)。

# ajax - 使用ajax发送http请求并等待

> ID：13337040
> 
> 赞同：0
> 
> 时间：2012-11-12T00:40:52.697
> 
> 标签：ajax, curl, webserver

我正在尝试使用 AJAX 向我的服务器发出 HTTP 请求，但在我的服务器中将有两个 curl 请求。

其中一个会更快，我可以只向前端发送一个 JSON，当我有另一个响应时发送另一个 JSON？我如何通过 AJAX 捕获第一个和第二个 JSON？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T22:43:51.380

基本上，Ajax 中的第一个 A 用于异步，因此触发两个不同的请求并期望它们并行运行是默认设置。每个调用都会有一个回调处理程序，如果两个请求都已完成，它可以检查页面上的某些状态对象。所以魔术需要在回调处理程序中发生。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T09:31:27.673

> 只有一个请求（通过 AJAX 触发），但对该请求有两个响应（来自服务器）。是否可以？

不，那是不可能的。HTTP 是一种请求-响应协议。每个请求都会得到一个响应。您的页面用户不需要知道已发送多个请求。他们不会注意到的。

您*可以*在服务器端修复它。您的服务器端应该获取这两个请求，等待它们完成，然后从这两个请求中组合一个答案。该组合答案可以发送给客户端。这样，客户端和服务器之间就有一个请求-响应，而您的服务器和第 3 方之间有两个请求-响应。

澄清一下，这是你将得到的：

```
 browser          server            3rd party
          request
   |---------------->|
   |                 | proxy
   |                 |       req1
   |                 |----------------->| 
   |                 |<-----------------|
   |                 |       req2
   |                 |----------------->|
   |     response    |<-----------------|
   |<----------------| 
```

我最初的假设是你想做：

```
 browser          server            3rd party
          request
   |---------------->|
   |                 | proxy
   |                 |       req1
   |                 |----------------->| 
   |      response   |<-----------------|
   |<----------------|
   |                 |
   |      request    |
   |---------------->|
   |                 |       req2
   |                 |----------------->|
   |     response    |<-----------------|
   |<----------------| 
```

其中（取决于您的要求）*可能*被压缩为：

```
 browser          3rd party
          request
   |---------------->|
   |      response   |
   |<----------------|
   |                 
   |      request    
   |---------------->|
   |     response    |
   |<----------------| 
```

这可能会容易得多。

(Started typing this as a comment to your comment on my last answer, but it gets a little complex, so that's why I'm making it a separate answer, sorry about that.)

# javascript - 常量 setInterval 如何影响页面功能（它是否会减慢响应时间或削弱用户命令等）？

> ID：13337042
> 
> 赞同：0
> 
> 时间：2012-11-12T00:40:58.103
> 
> 标签：javascript, setinterval

我有一个运行 onload 的 setInterval 函数，用户一直在我的网站上。基本上它所做的是逐步扫描 window.innerWidth 和 window.outerWidth 之间的差异（也就是它检测用户是否以 100% 缩放以外的方式查看网站），并对其进行补偿，因为我需要一个固定对象缩小时居中对齐，但放大时左对齐。现在该功能每 250 毫秒运行一次。我要问的是，这对网页有什么影响，如果有的话？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T01:11:33.733

您应该阅读一篇名为[How JavaScript Timers Work](http://ejohn.org/blog/how-javascript-timers-work/)的文章。基本上，所有的 js 代码都在一个事件循环中运行，所有的事件处理程序都排队，并*尽快*执行：

> 为了理解定时器是如何在内部工作的，有一个重要的概念需要探索：定时器延迟是不能保证的。由于浏览器中的所有 JavaScript 都在单个线程上执行，因此异步事件（例如鼠标单击和计时器）仅在执行过程中有空缺时才会运行。

有时甚至可能不执行计时器处理程序；有些情况下超时过期两次，但解释器只有一次机会运行处理程序，丢弃另一个排队的事件。

真的，阅读那篇文章，这是值得的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T00:58:37.187

如果您仅每四分之一秒运行一次，它“不应该”产生太大影响。我说不应该是因为我不确切知道它在 a) 决定是否需要调整和 b) 进行上述调整。

也就是说，这听起来像是为事件而不是轮询而设计的情况。也许你应该看看`window.onresize`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T01:39:50.363

如果*[您的其他问题](https://stackoverflow.com/users/1760745/user1760745?tab=questions)*中的某些答复充分回答了您的问题，出于礼貌，您应该接受它们作为模态答案。

此外，您的`setInterval`运行间隔为 250 毫秒。如果您的函数完成执行的时间超过 250 毫秒，那么可能会导致它们连续运行，从而降低用户计算机的速度。

@ime-vidas 给出了一种更好的方法，它将您的函数排队，以便在前一个函数结束后运行延迟。

# mysql - 在 Solr 中索引代表货币的小数的最佳方法是什么？

> ID：13337049
> 
> 赞同：2
> 
> 时间：2012-11-12T00:42:11.010
> 
> 标签：mysql, solr, dih, solr4

我在 MySQL 表中有一个十进制列，它代表钱。我想使用数据导入处理程序将这些数据导入 Solr。我不确定存储这些数据的最佳方式是什么。我想到了这些选项：

浮动：会引入不准确性。

字符串：会使搜索范围变得困难。

Int：将要求每个数字在被索引之前乘以 100，并在检索时除以 100。

货币：Solr 4.0 的新功能。此字段类型是否合适，还是用于货币转换？

我正在使用 Solr 4.0.0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T01:20:49.497

基于Solr Wiki 上[CurrencyField定义中的信息。](https://wiki.apache.org/solr/CurrencyField)此字段类型听起来像是适合您的解决方案。它提供货币转换，但前提是您应该选择使用该功能。请注意，此字段类型尚不支持按范围分面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T22:11:29.200

正如 Paige 所建议的，`CurrencyField`是使用的适当字段。

但是，如果您需要按范围分面，则可以使用第二个浮点字段，indexed=true，stored=false，并使用[copyfield](https://wiki.apache.org/solr/SchemaXml#Copy_Fields)从原始字段复制到浮点字段。然后，您可以将这个不准确的浮点字段用于按范围查询的分面，并将原始货币字段用于其他所有内容。

# objective-c - 错误：解析器错误，从 iPhone 应用程序发布到 node.js 服务器时发生解析的 1448 个字节中的 0 个

> ID：13337056
> 
> 赞同：3
> 
> 时间：2012-11-12T00:43:48.890
> 
> 标签：objective-c, node.js

我正在尝试将图像和随附的元数据从 iPhone 应用程序发布到运行 Nodejs 和 Express 的服务器。当我使用 REST 客户端从浏览器执行帖子时，我的服务器代码工作正常。但是，从 Objective C 代码执行的相同帖子会导致服务器上出现以下错误。有人能发现我做错了什么吗？我的研究表明，Express 中的强大库对编码和边界很挑剔。我尝试了解决方法（例如不使用 UTF8），但问题仍然存在。我的研究进一步表明，如果您忘记命名请求中的某个字段，则可能会出现此问题。这似乎也不是问题。

```
Error: parser error, 0 of 1448 bytes parsed
at IncomingForm.write (/home/ec2-user/babel-match-server/node_modules/express/node_modules/connect/node_modules/formidable/lib/incoming_form.js:145:17)
at IncomingMessage.<anonymous> (/home/ec2-user/babel-match-server/node_modules/express/node_modules/connect/node_modules/formidable/lib/incoming_form.js:95:12)
at IncomingMessage.emit (events.js:67:17)
at HTTPParser.onBody (http.js:115:23)
at Socket.ondata (http.js:1387:22)
at TCP.onread (net.js:354:27) 
```

这是我执行 HTTP Post 的 Objective C 代码：

```
-(void) postImageToServer:(NSString *)imageFileName andImage:(NSData *)image {

NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

NSString *user = [defaults objectForKey:@"babelMatchUser"];
NSString *lang = [defaults objectForKey:@"learnLanguage"];

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:@"http://myserver.compute-1.amazonaws.com:3000/image?"]];
[request setHTTPMethod:@"POST"];
NSString *boundary = [[NSProcessInfo processInfo] globallyUniqueString];
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
[request addValue:contentType forHTTPHeaderField: @"Content-Type"];

NSMutableData *body = [NSMutableData data];

// file
[body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSASCIIStringEncoding]];
[body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"image\"; filename=\"%@\"\r\n", imageFileName] dataUsingEncoding:NSASCIIStringEncoding]];
[body appendData:[@"Content-Type: application/octet-stream\r\n\r\n" dataUsingEncoding:NSASCIIStringEncoding]];
[body appendData:[NSData dataWithData:image]];
[body appendData:[@"\r\n" dataUsingEncoding:NSASCIIStringEncoding]];

// length
[body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSASCIIStringEncoding]];
[body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"size\"\r\n\r\n"] dataUsingEncoding:NSASCIIStringEncoding]];
[body appendData:[[NSString stringWithFormat:@"%i",image.length] dataUsingEncoding:NSASCIIStringEncoding]];
[body appendData:[@"\r\n" dataUsingEncoding:NSASCIIStringEncoding]];

// image name
[body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSASCIIStringEncoding]];
[body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"imageFileName\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithString:imageFileName] dataUsingEncoding:NSASCIIStringEncoding]];
[body appendData:[@"\r\n" dataUsingEncoding:NSASCIIStringEncoding]];

// language
[body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSASCIIStringEncoding]];
[body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"userLanguagePref\"\r\n\r\n"] dataUsingEncoding:NSASCIIStringEncoding]];
[body appendData:[[NSString stringWithString:lang] dataUsingEncoding:NSASCIIStringEncoding]];
[body appendData:[@"\r\n" dataUsingEncoding:NSASCIIStringEncoding]];

// user
[body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSASCIIStringEncoding]];
[body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"user\"\r\n\r\n"] dataUsingEncoding:NSASCIIStringEncoding]];
[body appendData:[[NSString stringWithString:user] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[@"\r\n" dataUsingEncoding:NSASCIIStringEncoding]];

// close form
[body appendData:[[NSString stringWithFormat:@"--%@--\r\n", boundary] dataUsingEncoding:NSASCIIStringEncoding]];

// set request body
[request setHTTPBody:body];

//bon voyage
[NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
} 
```

在服务器上，我使用以下代码处理帖子：

```
 } else if (req.method == 'POST') {
    // Check body.length for flood attack or faulty client
    var imageFileName = req.body.imageFileName; //imageFileName must match actual file name or app will crash
    var user = req.body.user;
    var usrLanguagePref = req.body.userLanguagePref;
    //model.saveImageMetaData(imageFileName, user, usrLanguagePref);
    if (req.files) {

        var image = req.files.image;
        var tempPath = image.path;
        var originalImage = image.name;
        var newImage = originalImage.split('.', 1) + '_150x150.' + originalImage.split('.')[1];
        var s3Headers = {
            'Content-Type': image.type,
                'x-amz-acl': 'public-read'
        };
        var dst;

        model.saveImageData(tempPath, originalImage, s3Headers, function () {
            var src = tempPath;
            dst = path.dirname(tempPath) + "/" + newImage;
            model.resizeImage(src, dst, function () {
                model.saveImageData(dst, newImage, s3Headers, function () {
                    res.send(200);
                });
            });
        });

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T03:21:30.630

几个建议。

1.  我认为长度必须在帖子中的文件数据之前。
2.  您能否提供实际从 objc 发送的 POST 数据的链接或示例？这将有助于解决数据格式的问题。

# python - 除非我先腌制/取消腌制，否则 drawContours 的数据类型错误

> ID：13337058
> 
> 赞同：9
> 
> 时间：2012-11-12T00:44:29.160
> 
> 标签：python, opencv

我在 Windows 上的 python 2.7.3 上使用 opencv 2.4.3 遇到了一个有趣的错误。尝试使用 drawContours 时，我会收到“TypeError：不支持轮廓数据类型 = 5”错误，除非我先腌制/取消腌制轮廓。

这不起作用（我得到“TypeError：contours data type = 5 is not supported”）：

```
noBg = cv2.blur(src, (5,5))
noBg = cv2.inRange(noBg, np.array([80, 0, 200], np.uint8), np.array([255, 50, 255], np.uint8)) 
noBg = np.invert(noBg)
contours, hierarchy = cv2.findContours(noBg, cv2.RETR_LIST, cv2.CHAIN_APPROX_SIMPLE)
cv2.drawContours(src, contours, -1, (0,255,0), 3) 
```

但这确实有效：

```
noBg = cv2.blur(src, (5,5))
noBg = cv2.inRange(noBg, np.array([80, 0, 200], np.uint8), np.array([255, 50, 255], np.uint8)) 
noBg = np.invert(noBg)
contours, hierarchy = cv2.findContours(noBg, cv2.RETR_LIST, cv2.CHAIN_APPROX_SIMPLE)

tmp = cPickle.dumps(contours)    
contours = cPickle.loads(tmp)

cv2.drawContours(src, contours, -1, (0,255,0), 3) 
```

有没有其他人看到过这种行为，或者我错过了什么明显的东西？我是 python/opencv 的新手，所以很可能就是这种情况。

**编辑：**刚刚在我的 Mac 上进行了测试，两种情况都可以正常工作。也许只是一个Windows问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T11:02:48.960

如果您降级到 opencv 2.4.2，这将起作用。这似乎是两周前刚刚发布的 2.4.3 的一个错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T23:02:06.597

在使用 findContours 和 convexHull 的轮廓时，我在获得 OpenCV 2.4.3 后遇到了同样的问题。由于我不想降级，将轮廓数组元素转换为 int 可以暂时解决问题。

```
contours, _ = cv2.findContours(noBg,cv2.RETR_LIST ,cv2.CHAIN_APPROX_SIMPLE,offset = (0,0))
hull_contour = cv2.convexHull(contours[0].astype('int')) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-02T13:39:39.230

我在绘制折线时遇到了类似的问题。它需要 32 位整数。

我将要点投射到 uint32：

```
use_points = np.uint32(original_points) 
```

问题是它需要 32 位的有符号整数，而不是无符号整数。这是代码中的一个微妙之处，所以很难找到，但后来这奏效了：

```
use_points = np.int32(original_points) 
```

只是使用`np.int32`而不是`np.uint32`

# regex - 用于列出特定文件类型并写入文件的 Bash 脚本？

> ID：13337059
> 
> 赞同：0
> 
> 时间：2012-11-12T00:44:34.127
> 
> 标签：regex, bash, grep, ls

刚从 bash 开始，我在让这个脚本工作时遇到了一些麻烦。我希望它列出目录的内容并仅将某些文件类型输出到`.txt`.

到目前为止，我在尝试仅列出时得到的一个示例`.pdf`，文件如下`.txt`，`.doc`只是想知道我哪里出错了？

```
#!/bin/bash
ls -a | grep -vi '*.(pdf|txt|doc)$' $1 > contents.txt 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T01:40:48.427

顺便说一句，你可以在没有`grep`和正则表达式的情况下做到这一点，即

```
ls -a *.{pdf,txt,doc} > contents.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T00:53:43.963

你错过了在你的正则表达式中转义一些字符，看看这个：

```
#!/bin/bash
ls -a | grep -i '.*\.\(pdf\|txt\|doc\)$' $1 > contents.txt 
```

另外，从命令中删除`-v`选项，因为它指示`grep`传递那些与正则表达式**不匹配的条目**

如果您不想转义正则表达式字符，请考虑`egrep`改用

# user-interface - 创建我自己的连接图表表 JavaFx

> ID：13337062
> 
> 赞同：1
> 
> 时间：2012-11-12T00:44:48.830
> 
> 标签：user-interface, javafx, charts, components

因此，经过近两个星期的尝试来解决我的问题后，我现在决定制作自己的`JavaFX`组件。

这个想法是创建一个与现有图表（如折线图和条形图）相连的表格。

由于我对`JavaFX`（我已经进行了大约 1 个月左右）还很陌生，所以在开始这样的项目之前，我有几个问题：

首先，它可以做到吗？在回答之前，我想向您展示我的目标的示例：

![在此处输入图像描述](../Images/f4244321dbd62b746e91109f8c99cdbe.png)

这张图片取自 Java 插件，`JFreeChart`在 x 轴上有一个连接表。

我的目标不一定是图表和表格必须 100% 连接，如图所示，但是非常重要的是，每个点/条等下方都有一个带有数据信息的连接表格。

具有连接表的条形图示例如下图所示：

![在此处输入图像描述](../Images/9b381ee0a1ab414b7e9e557724011bfe.png)

既然我已经有了图表（内置图表`JavaFX`），你们认为这会有多难的工作？还有可能吗？

我也很想听听你们是否对如何创建此组件或如何实际创建组件有任何建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T23:00:37.713

这是一个示例解决方案，炸药在上，鸭子在下。

![带表格的折线图](../Images/9936f5277c1e6f53f8f562827ca93e40.png)

```
import java.util.Random;
import javafx.application.Application;
import javafx.beans.property.*;
import javafx.beans.value.ObservableValue;
import javafx.collections.ObservableList;
import javafx.geometry.*;
import javafx.scene.*;
import javafx.scene.chart.*;
import javafx.scene.chart.XYChart.Data;
import javafx.scene.chart.XYChart.Series;
import javafx.scene.control.*;
import javafx.scene.control.TableColumn.CellDataFeatures;
import javafx.scene.layout.*;
import javafx.stage.Stage;
import javafx.util.Callback;

// http://stackoverflow.com/questions/13337062/creating-my-own-connected-chart-table-javafx
public class TabulatedLineChartWithLegend extends Application {
  private final static String MONTHS[] = { "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec" };

  @Override public void start(Stage stage) {
    stage.setTitle("Line Chart With Attached Tabulated Data");

    final CategoryAxis xAxis = new CategoryAxis();
    xAxis.setTickLength(0);
    final NumberAxis yAxis = new NumberAxis();

    final LineChart<String, Number> lineChart = new LineChart(xAxis, yAxis);
    lineChart.setStyle("-fx-padding: 0;");
    lineChart.setLegendVisible(false);
    lineChart.setTitle("Stock Monitoring, 2010");
    lineChart.getData().addAll(createSeries("ACME Explosives"), createSeries("DUCK Rubber Ducks"));

    VBox vbox = new VBox(5);
    vbox.getChildren().addAll(lineChart, createTableView(lineChart));
    vbox.setAlignment(Pos.TOP_LEFT);
    vbox.setMinWidth(500);
    VBox.setMargin(lineChart, new Insets(0,0,0,114));

    HBox layout = new HBox();
    layout.getChildren().add(vbox);
    HBox.setHgrow(vbox, Priority.ALWAYS);

    Scene scene = new Scene(layout, 700, 500);
    stage.setScene(scene);
    stage.show();
  }

  private Series createSeries(String name) {
    XYChart.Series series = new XYChart.Series();
    series.setName(name);
    final ObservableList data = series.getData();
    final DataGenerator generator = new DataGenerator();
    for (String month: MONTHS) {
      data.add(generator.createDataItem(month));
    }

    return series;
  }

  private TableView createTableView(final LineChart<String, Number> chart) {
    TableView<XYChart.Series<String,Number>> table = new TableView();

    if (!chart.getData().isEmpty()) {
      TableColumn legendCol = new TableColumn("Legend");
      legendCol.setResizable(false);
      legendCol.setCellValueFactory(
        new Callback<CellDataFeatures<XYChart.Series<String,Number>, String>, ObservableValue<XYChart.Series<String,Number>>>() {
          @Override public ObservableValue<Series<String, Number>> call(CellDataFeatures<Series<String, Number>, String> param) {
            return new SimpleObjectProperty(param.getValue());
          }
        }  
      );
      legendCol.setCellFactory(new Callback<TableColumn<XYChart.Series<String,Number>,Series<String, Number>>,TableCell<XYChart.Series<String,Number>,Series<String, Number>>>() {
        @Override public TableCell<Series<String, Number>, Series<String, Number>> call(TableColumn<Series<String, Number>, Series<String, Number>> param) {
          return new TableCell<Series<String, Number>, Series<String, Number>>() {
            @Override protected void updateItem(Series<String, Number> series, boolean empty) {
              super.updateItem(series, empty);
              if (series != null) {
                setText(series.getName());
                setGraphic(createSymbol(series, chart.getData().indexOf(series)));
              }  
            }
          };
        }
      });
      table.getColumns().add(legendCol);

      final ObservableList<Data<String, Number>> firstSeriesData = chart.getData().get(0).getData();
      for (final Data<String, Number> item: firstSeriesData) {
        TableColumn col = new TableColumn(item.getXValue());
        col.setSortable(false);
        col.setResizable(false);
        col.prefWidthProperty().bind(chart.getXAxis().widthProperty().divide(firstSeriesData.size()));
        col.setCellValueFactory(
          new Callback<CellDataFeatures<XYChart.Series<String,Number>, String>, ObservableValue<Number>>() {
            @Override public ObservableValue<Number> call(CellDataFeatures<XYChart.Series<String,Number>, String> param) {
              for (Data<String, Number> curItem: param.getValue().getData()) {
                if (curItem.getXValue().equals(item.getXValue())) {
                  return curItem.YValueProperty();
                }
              }

              return null;
            }
          }  
        );
        table.getColumns().add(col);
      }

      for (XYChart.Series<String,Number> series: chart.getData()) {
        table.getItems().add(series);
      }  

      table.setEditable(false);
      table.setFocusTraversable(false);
    }  

    table.setTranslateY(-30);
    table.setPrefHeight(88);
    table.setStyle("-fx-box-border: transparent; -fx-focus-color: transparent; -fx-padding: 0 9 0 9;");

    return table;
  }

  private Node createSymbol(Series<String, Number> series, int seriesIndex) {
    Node symbol = new StackPane();
    symbol.getStyleClass().setAll(
      "chart-line-symbol", 
      "series" + seriesIndex,
      "default-color" + (seriesIndex % 8)
    );
    return symbol;
  }  

  public static void main(String[] args) { launch(args); }
}

// generates random chart data.
class DataGenerator {
  private static final Random random = new Random();
  private int delta = 0;
  private int trend = random.nextInt(4) - 1;
  public Data createDataItem(String month) {
    return new XYChart.Data(month, genDataVal());
  }
  private int genDataVal() {
    delta += trend;
    return random.nextInt(20) + 15 + delta;
  }
} 
```

# c# - AutoMapper 实例版本的嵌套映射

> ID：13337063
> 
> 赞同：1
> 
> 时间：2012-11-12T00:44:52.080
> 
> 标签：c#, serialization, automapper

我正在尝试将嵌套映射与 AutoMapper 一起使用，使用映射器的实例版本——但它似乎不起作用。

这是我正在使用的两个模型：

```
public class User
{
    [Key]
    public string Email { get; set; }
    public string Hash { get; set; }
    public string Salt { get; set; }
    public string Name { get; set; }

    public virtual ICollection<TaskTime> TaskTimes { get; set; }
    public virtual ICollection<Role> Roles { get; set; }
    public virtual ICollection<HistoricalEstimation> HistoricalEstimations { get; set; }
}

public class TaskTime
{
    public int Id { get; set; }
    public User User { get; set; }
    public Task Task { get; set; }
    public TimeSpan Duration { get; set; }
    public DateTime Date { get; set; }
} 
```

我正在使用这段代码来映射它们：

```
public static class UserViewConfiguration
{
    private static ConfigurationStore configuration;
    public static MappingEngine Engine { get; private set; }

    static UserViewConfiguration()
    {
        configuration = new ConfigurationStore(new TypeMapFactory(), MapperRegistry.AllMappers());
        Engine = new MappingEngine(configuration);

        configuration.CreateMap<User, UserFull>();
        configuration.CreateMap<TaskTime, UserTaskTime>();
        /* snip... */

        configuration.AssertConfigurationIsValid();
    }
} 
```

在这些视图模型上：

```
public class UserFull
{
    public string Email { get; set; }
    public string Name { get; set; }

    public virtual ICollection<TaskTime> TaskTimes { get; set; }
}

public class UserTaskTime
{
    public int Id { get; set; }
    public Task Task { get; set; }
    public TimeSpan Duration { get; set; }
    public DateTime Date { get; set; }
} 
```

问题是， a`User`包含 a `TaskTime`，而 a`TaskTime`包含 a `User`。这个循环需要存在，因为有几种不同的方式可以访问每个项目，具体取决于您最初要求的对象（这就是我使用 AutoMapper 实例版本的原因）。我正在序列化这些以通过 ASP.NET MVC API 应用程序发送它们，因此周期是一个大问题。

我已经阅读[了使用 AutoMapper 使用嵌套映射的示例](https://github.com/AutoMapper/AutoMapper/wiki/Nested-mappings)，并且据我所知，我做得对。但是使用上面的映射，我在`User`path上得到一个自引用循环错误`[0].TaskTimes[0].User.TaskTimes`。如果我注释掉 的`TaskTimes`属性`UserFull`，我不会收到错误，所以我知道`User->UserFull`映射正在工作——但由于某种原因，`TaskTime->UserTaskTime`它不起作用。

我能做些什么？

编辑：我的映射是这样的：

```
// GET api/Users
public IEnumerable<UserFull> GetUsers()
{
    //var query = SelectUsers(db.Users.ToList());
    return UserViewConfiguration.Engine.Map<IEnumerable<UserFull>>(db.Users);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T02:19:10.037

假设您有一个错字，并且 UserFull 应该有一个 UserTaskTime 的集合而不是 TaskTime 的集合，这些快速测试工作：

```
[TestFixture]
public class MappingTests2
{
    [Test]
    public void AutoMapper_Configuration_IsValid()
    {
        UserViewConfiguration.Configure();
        Mapper.AssertConfigurationIsValid();
    }

    [Test]
    public void AutoMapper_MapsAsExpected()
    {
        UserViewConfiguration.Configure();
        Mapper.AssertConfigurationIsValid();

        var user = new User
            {
                Email = "user1@email.com",
                Hash = "1234Hash",
                Name = "user1",
                Salt = "1234Salt",
                TaskTimes =
                    new Collection<TaskTime>
                        {
                            new TaskTime
                                { Date = new DateTime(2012, 11, 01), Duration = new TimeSpan(0, 20, 1), Id = 1 },
                            new TaskTime
                                { Date = new DateTime(2012, 11, 02), Duration = new TimeSpan(0, 20, 2), Id = 2 }
                        }
            };

        foreach (var taskTime in user.TaskTimes)
        {
            taskTime.User = user;
        }

        var userView = Mapper.Map<User, UserFull>(user);

        Assert.That(userView, Is.Not.Null);
        Assert.That(userView.Email, Is.EqualTo("user1@email.com"));
        Assert.That(userView.Name, Is.EqualTo("user1"));
        Assert.That(userView.TaskTimes, Is.Not.Null);
        Assert.That(userView.TaskTimes.Count, Is.EqualTo(2));
        var tt = userView.TaskTimes.FirstOrDefault(x => x.Id == 1);
        Assert.That(tt, Is.Not.Null);
        Assert.That(tt.Id, Is.EqualTo(1));
        Assert.That(tt.Date, Is.EqualTo(new DateTime(2012, 11, 01)));
        Assert.That(tt.Duration, Is.EqualTo(new TimeSpan(0, 20, 1)));
    }
} 
```

请注意，对于上述内容，我将映射转换回使用静态方法：

```
public static void Configure()
{
    Mapper.CreateMap<User, UserFull>();
    Mapper.CreateMap<TaskTime, UserTaskTime>();

    Mapper.AssertConfigurationIsValid();
} 
```

如果您确实打算将其用作TaskTime，我会再看一下。

# asp.net-mvc - 声明复合键

> ID：13337064
> 
> 赞同：1
> 
> 时间：2012-11-12T00:45:28.617
> 
> 标签：asp.net-mvc

我遇到了一个问题，我试图从数据库中的表中列出、编辑、创建或删除数据。当我这样做时出现此错误：

> 传递的主键值的数量必须与实体上定义的主键值的数量相匹配。

我的问题是有一个复合键，但我不知道如何在我的模型中声明它。我进行了一些搜索，发现的任何内容都包括添加`[Key, Column(Order = 0)]`，但是每当我尝试添加列部分时，它会声明 Column 不属于命名空间。我已经`using System.ComponentModel.DataAnnotations;`声明了。

这是我需要复合键的模型之一：

DateID、TimeID、ContactID 都构成主键

ContactID, CountyNameID, CountyStateIS 都是外键

```
public System.DateTime DateID { get; set; }
public System.TimeSpan TimeID { get; set; }
public int ContactID { get; set; }
public string CountyNameID { get; set; }
public string CountyStateID { get; set; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T01:14:14.127

Column 属性位于**System.ComponentModel.DataAnnotations.Schema**命名空间中。

如果您使用的是 Visual Studio，则可以按住**CTRL + 。**如果您有对程序集的引用，Visual Studio 将建议命名空间。

希望能帮助到你！

# html - ASP.Net mvc 表单抛弃了我的 CSS

> ID：13337069
> 
> 赞同：2
> 
> 时间：2012-11-12T00:46:01.007
> 
> 标签：html, css, asp.net-mvc

在谷歌上找不到类似的东西......所以我需要一些帮助。

当我有 css 格式以使我的表单按我想要的方式时，它会在我的页面上显示得很好，没有问题。

但...

当我将实际表单放入以下内容时......它会丢失 css 格式。

```
@using (Html.BeginForm()) 
{
    @Html.AntiForgeryToken()
    @Html.ValidationSummary()

    <FORM HTML HERE>
} 
```

任何人都可能知道这里有什么问题？

提前致谢。

HTML：

```
 <form class="form-signin">
    <h2 class="form-signin-heading">Please sign in</h2>
    <input type="text" class="input-block-level" placeholder="Email address">
    <input type="password" class="input-block-level" placeholder="Password">
    <label class="checkbox">
      <input type="checkbox" value="remember-me"> Remember me
    </label>
    <button class="btn btn-large btn-primary" type="submit">Sign in</button>
  </form> 
```

CSS：

```
.form-signin {
    max-width: 300px;
    padding: 19px 29px 29px;
    margin: 0 auto 20px;
    background-color: #fff;
    border: 1px solid #e5e5e5;
    -webkit-border-radius: 5px;
       -moz-border-radius: 5px;
            border-radius: 5px;
    -webkit-box-shadow: 0 1px 2px rgba(0,0,0,.05);
       -moz-box-shadow: 0 1px 2px rgba(0,0,0,.05);
            box-shadow: 0 1px 2px rgba(0,0,0,.05);
  }
  .form-signin .form-signin-heading,
  .form-signin .checkbox {
    margin-bottom: 10px;
  }
  .form-signin input[type="text"],
  .form-signin input[type="password"] {
    font-size: 16px;
    height: auto;
    margin-bottom: 15px;
    padding: 7px 9px;
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T01:23:50.943

`@using (Html.BeginForm())`呈现为一个`<form>`元素。

因此，由于您试图在表单中嵌套表单，`<form>`因此浏览器会忽略第二个表单（请参阅这篇文章：[https](https://stackoverflow.com/a/555970/971693) ://stackoverflow.com/a/555970/971693 ）。

创建表单时，您必须通过您的课程：

```
@Html.BeginForm({Action}, {controler}, FormMethod.Post, new { @class = "Class" }) 
```

# c++ - 使用 if else 和 switch

> ID：13337071
> 
> 赞同：0
> 
> 时间：2012-11-12T00:46:31.283
> 
> 标签：c++

```
#include <iostream>
#include <conio.h>

using namespace std;

int main()
{
    int n;
    char ans, cont;
    ans = 'y';

    while (true){
        if (ans == 'y' || ans == 'Y'){
            cout << "Enter a price:" << endl;
            cin >> n;
            n++;

            cout << "do you want to continue? y/n" <<endl;
            cin >> ans;

            switch (n) {
                //Vat Prices
                case 1:
                    if (n<300)
                        cout << "You have to pay" << endl << n *  1.1 << "  $" << endl <<endl;
                    break;

                case 2:
                    if (n==300)
                        cout << "You have to pay" << endl << (n * 1.05) * 1.1 << "  $" << endl <<endl;
                    break;

                case 3:
                    if (n>=301 && n <= 500)
                        cout << "You have to pay" << endl << (n * 1.1) * 1.1 << "  $" << endl <<endl;
                    break;

                case 4:
                    if (n>= 501 && n <= 1000)
                        cout << "You have to pay" << endl << (n * 1.2)*1.1 << "  $" << endl <<endl;

                case 5:
                    if (n>1000)
                        cout << "You have to pay" << endl << (n * 1.3)* 1.1 << "  $" << endl <<endl;
                    break;
            }
        }
    }
    return 0;
} 
```

如果我把`n`程序不会通过开关，一个小时前它工作正常，我不知道发生了什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T00:54:15.967

您的缩进也对您没有任何帮助。那个 switch 语句并没有像你想象的那样做。当你做这样的事情时：

```
switch (n) {
case 1:
   //do stuff
   break;
case 2:
   //do stuff
   break
default:
   //do stuff
} 
```

上述情况中的 1 和 2 是您打开的 n 的值，即当 时`n == 1`，它将执行第一种情况；什么时候`n == 2`做第二种情况；否则它将执行默认块。

遵循带有`if`语句的案例并没有完成 switch 尚未为您做的任何事情。1 有效，因为当`n == 1`条件`n < 300`自动为真时。但是所有其他情况都依赖于 n 为 1、2、3、4 或 5，因此，这些其他测试都无法通过。

你真正想要的是：

```
if (n < 300) {
    // do stuff
} else if (n == 300) {
    // do stuff
} else if (n > 300) {
    // do stuff
} etc... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T00:50:23.850

这不是开关的工作方式。由于您根据范围做出决策，因此您只需要一个简单的 if/else if/else 链。有关如何使用开关的更多信息，请阅读[此](http://www.cplusplus.com/doc/tutorial/control/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T00:52:28.757

你可能想把 cout << "do you want to continue? y/n" <> ans;

在`while`循环结束时。

此外，我还建议只是说

```
while (ans == 'y' || ans == 'Y') 
```

然而，最大的问题是你的`switch`陈述只有在 n==1 时才有效。摆脱整个`switch`语句，只使用`if`s.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T00:54:55.223

只有当输入的价格为 时，您的`switch`声明才会成立`1, 2, 3, 4 or 5`。开关无法按照您尝试使用的方式工作，最好使用`if-else`控制结构。

```
if(n<300)
  cout << "You have to pay" << endl << n *  1.1 << "  $" << endl <<endl;
else if(n==300)
  cout << "You have to pay" << endl << (n * 1.05) * 1.1 << "  $" << endl <<endl;
else if(n <= 500)
  cout << "You have to pay" << endl << (n * 1.1) * 1.1 << "  $" << endl <<endl;
else if (<= 1000)
  cout << "You have to pay" << endl << (n * 1.2)*1.1 << "  $" << endl <<endl;
else
  cout << "You have to pay" << endl << (n * 1.3)* 1.1 << "  $" << endl <<endl; 
```

此外，您只是在`n`每次循环时覆盖您的变量。然后将其增加 1, `n++`。这没有多大意义。

# c# - 按日期范围 asp.net mvc3 从视图中将数据库数据导出到 csv

> ID：13337076
> 
> 赞同：2
> 
> 时间：2012-11-12T00:47:03.727
> 
> 标签：c#, asp.net, asp.net-mvc-3, frameworks, entity

我正在尝试找到一种从我的数据库中导出数据并将其保存为 .csv 文件的方法。理想情况下，用户将能够在视图上选择一个日期范围，该日期范围将显示要导出的数据，然后用户可以单击“导出为 CSV”链接。我已经进行了很多搜索，但没有找到足够具体的内容来帮助我逐步完成整个过程。任何帮助都会很棒。

我想从此数据库模型中导出数据...

```
{
public class InspectionInfo
{
    [Key]
    public int InspectionId { get; set; }
    [DisplayName("Date Submitted")]
    [DataType(DataType.Date)]
    //  [Required]
    public DateTime Submitted { get; set; }
    [DataType(DataType.MultilineText)]
    [MaxLength(1000)]
    //  [Required]
    public string Comments { get; set; }

    // [Required]
    public Contact Contact { get; set; }
    [ForeignKey("Contact")]
    public Int32 ContactId { get; set; }

    [MaxLength(100)]
    public String OtherContact { get; set; } 
```

我也有搜索服务，只是难以实施

```
public SearchResults SearchInspections(SearchRequest request)
    {
        using (var db = new InspectionEntities())
        {
            var results = db.InspectionInfos
                .Where( i=> 
                        (
                            (null == request.StartDate || i.Submitted >=   request.StartDate.Value) &&
                            (null == request.EndDate || i.Submitted <= request.EndDate.Value)
                        )

            )
            .OrderBy(i=>i.Submitted)
            .Skip(request.PageSize*request.PageIndex).Take(request.PageSize);

            return new SearchResults{
                TotalResults=results.Count(),
                PageIndex=request.PageIndex,
                Inspections=results.ToList(),
                SearchRequest=request
        };

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T00:56:12.123

您可以在控制器操作中构建 CSV 输出并将其直接返回到浏览器，如下所示：

```
public ActionResult DownloadAsCsv(DateTime? start, DateTime? finish)
{
    // I guess you would use your SearchInspections instead of the following
    // but don't understand it well enough to be sure:

    IEnumerable<MyRowClass> rows = GetRelevantRows(start, finish);

    StringBuilder csv = new StringBuilder();
    foreach (MyRowClass row in rows)
    {
        // Take care to properly escape cells with embedded " or ,
        // The following is simplified by not doing that for brevity:
        csv.Append(row.PropertyA).Append(',').Append(row.PropertyB);
        csv.AppendLine();
    }

    var data = Encoding.UTF8.GetBytes(csv.ToString());
    string filename = "YourDesiredFileName.csv";
    return File(data, "text/csv", filename);
} 
```

# html - 如何使用 css 边框创建像素完美分隔线

> ID：13337077
> 
> 赞同：0
> 
> 时间：2012-11-12T00:47:08.253
> 
> 标签：html, css, divider

我有一个背景为黑色的菜单和背景为灰色的子菜单。

现在我想在它们之间有一个像素完美的分隔线。

但我不知道应该使用什么边框颜色来获得像素完美分隔符。谁能帮我？

这是html代码

```
<!DOCTYPE html>
<html>
<body>
<div class="mainnav">
    <p> This is main nav </p>
</div>
<div class="subnav">
     <p> This is sub nav </p>
</div> 
</body>
</html> 
```

这是我的CSS

```
.mainnav {
width:100%;
    height:60px;
    background-color:#000000;
    color:#ffffff;
    text-align:center;
}
.mainnav p {
padding-top:20px; 
}
.subnav p {
padding-top:10px; 
}
.subnav {
width:100%;
    height:45px;
    background-color:#333;
    color:#ffffff;
    text-align:center;
} 
```

​</p>

这是我的jsfiddle。

[http://jsfiddle.net/ruUgk/](http://jsfiddle.net/ruUgk/)

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T00:51:47.193

添加底部边框`.mainnav`

```
.mainnav {
    border-bottom:1px solid #fff;
} 
```

[http://jsfiddle.net/ruUgk/1/](http://jsfiddle.net/ruUgk/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T00:50:23.263

我认为您不需要任何像素完美的分隔符！它是好的。无论如何，我不认为这个网站是针对这类问题的，你应该在这里有一个技术问题，而不是关于如何让事情看起来不错的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T01:07:51.293

我将在它们之间添加一条虚线

将以下行添加到 mainnav css

```
border-bottom:1px dotted #fff; 
```

在 JSFiddle 上检查这个

```
http://jsfiddle.net/ruUgk/2/ 
```

# c - 斐波那契数列计算器的问题

> ID：13337079
> 
> 赞同：2
> 
> 时间：2012-11-12T00:47:16.470
> 
> 标签：c

```
#include <stdio.h>
#include <math.h>

int main(){

    int N,  k, l, F0,serial_position_of_N,num_of_seqs_tested,sign;

    printf("please insert a number:\n");
    fflush(stdout);
    scanf("%u", &N);

    //if N=0
    if( N == 0 ){
        printf("%d is the %dth item of the sequence F1 = F0 = %d.\n
            %d sequences were checked.\n", 0, 2, 0, 1);
            return 0;
    }

    //checks if N is odd or even
    if( N % 2 == 0 ){
        printf("N is and even number....\n\n");
        fflush(stdout);

      //if N is even
      for( F0 = 1; F0 + F0 > fabs( N ); ++F0, ++num_of_seqs_tested ){
          int pos;

          if( fabs( N ) == F0 ){
              pos = 2;
              break;
          }

          for( k = F0, l = F0, pos = 2; k+l > fabs( N ); k = l, l = k + l, pos++ ){
              if(k+l == fabs(N)){
          pos++;
          sign = 1;
          break;
          }
      }

      if( sign == 1 ){
          serial_position_of_N = pos;
          break;
      }
    }

    //if N is Odd
    else{
        printf( "N is and odd number....\n\n" );
        fflush( stdout );
        for( F0 = 1; F0 + F0 > fabs( N ); F0= F0 + 2, ++num_of_seqs_tested){
            int pos;

        if( fabs( N ) == F0 ){
            pos = 2;
            break;
        }

        for( k = F0, l = F0, pos = 2; k+l>fabs(N); k = l, l = k+l, pos++ ){

            if( k + l == fabs( N ) ){
                pos++;
                break;
            }

        }

        if( k+l == fabs( N ) ){
            serial_position_of_N = pos;
            break;
            }
        }
    }

//if N is negetive
    if( N < 0 ){
        printf("%d is the %dth item of the sequence F1 = F0 = %d.\n%d sequences were checked.\n", N, serial_position_of_N, (-1)*F0, num_of_seqs_tested);
        fflush(stdout);
    }

    //other
    printf( "%d is the %dth item of the sequence F1 = F0 = %d.\n%d sequences were checked.\n", N, serial_position_of_N, F0, num_of_seqs_tested );
    fflush(stdout);
    return 0;
} 
```

==========================================

此代码用于斐波那契 - 检查第 N 个数字属于哪个斐波那契数列。

不用说我有问题 - 我把 8 作为输入，这是输出：

8 是序列 F1 = F0 = 1 的第 4201440 项。检查了 4201534 个序列。

顺便说一句 - 我在笔记本电脑上运行 windows 7 64 位，并运行 eclipse c/c++

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:41:37.283

你不会初始化你的变量，特别`num_of_seqs_tested`是`serial_position_of_N`在没有初始化的情况下使用。

```
scanf("%u", &N); 
```

不正确，因为它`N`是有符号的`int`（如果您输入非负数`<= INT_MAX`，它可能仍然有效）。如果输入8，就会执行代码路径

```
if( N % 2 == 0 ){
    printf("N is and even number....\n\n");
    fflush(stdout);

  //if N is even
  for( F0 = 1; F0 + F0 > fabs( N ); ++F0, ++num_of_seqs_tested ){ 
```

并且因为`1 + 1 < 8`，循环将永远不会运行。您可能打算使用`<`而不是`>`.

但是请注意，

```
for( k = F0, l = F0, pos = 2; k+l > fabs( N ); k = l, l = k + l, pos++ ){ 
```

不会产生任何类似于斐波那契数列的东西，在循环中的第一次更新之后，您将拥有不变量`l = 2*k`（直到`l`溢出）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T01:13:38.150

您的代码令人困惑，请尝试使其更简单。你的另一件事是*，*你有以下条件`F0+F0>fabs(N)`，这意味着你正在为每个*迭代*计算`fab(N)`，这是非常低效/冗余的。只需`int x = fab(N)`在循环之前 make ，并加上循环条件`F0+F0 > x`，同样可以应用于`F0+F0.`

如果`fibonacci`函数接收到`N`，计算斐波那契并（同时）验证实际项是否等于您的值，那会更好。像这样的东西：

```
int fibonacci(int n)
{
  int a = 0,b = 1, sum;
  int n_th = 1;
  int find = 0;
  int erro = 0; 
  while(!find && !erro)         // Search until it is find or a erro occurs.
  {
    if(a == n) find = 1;           // we find it;
    else if ( a > n) erro = 1;     // this means that N do not belong to fibonacci
    else n_th++;                   // increment the position of the term
    sum = a + b;                   // sum = the previous 2 terms
    a = b;                         // a takes the value of the actual term
    b = sum;                       // b becomes the next term
  }
  if(erro) return 0;               // Means that N do not belong to fibonacci.
  else return n_th;                // Gives the position.
} 
```

# mysql - MySQL 如果行存在则更新，否则插入

> ID：13337082
> 
> 赞同：3
> 
> 时间：2012-11-12T00:49:04.487
> 
> 标签：mysql

```
INSERT INTO GameScoreTotal (
    `GameName`
    , `OverallScore`
    , `GraphicsScore`
    , `StoryScore`
    , `GameplayScore`
    , `TimeScore`
    )
VALUES (
    'HomeFront'
    , '1'
    , '1'
    , '1'
    , '1'
    , '5'
    )
WHERE GameName = 'HomeFront'
    ON DUPLICATE KEY

UPDATE OverallScoreTotal = OverallScoreTotal + '1'
    , GraphicsTotal = GraphicsTotal + '1'
    , StoryTotal = StoryTotal + '1'
    , GameplayTotal = GameplayTotal + '1'
    , TimeTotal = TimeTotal + '1'
    , RatingCount = RatingCount + 1; 
```

我正在尝试更新 GameScoreTotal 如果我们有其他内容，请插入。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T00:52:05.530

*   您需要在`GameName`名称上定义键，（*应该使用唯一键或主键*）
*   `WHERE`从插入语句中删除子句

询问，

```
INSERT INTO GameScoreTotal ( `GameName` , `OverallScore` , `GraphicsScore`
                           , `StoryScore` , `GameplayScore`  , `TimeScore` )
VALUES ( 'HomeFront' , 1  , 1 , 1 , 1 , 5 )
    ON DUPLICATE KEY
UPDATE OverallScoreTotal = OverallScoreTotal + 1
     , GraphicsTotal = GraphicsTotal + 1
     , StoryTotal = StoryTotal + 1
     , GameplayTotal = GameplayTotal + 1
     , TimeTotal = TimeTotal + 1
     , RatingCount = RatingCount + 1; 
```

来源

*   [**INSERT ... ON DUPLICATE KEY UPDATE**语法](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T00:50:54.937

查找`REPLACE INTO`而不是`INSERT INTO`.

# java - 使用 jaxb/java 在 xml 中排列元素

> ID：13337085
> 
> 赞同：3
> 
> 时间：2012-11-12T00:49:13.413
> 
> 标签：java, xml, jaxb

如何从以下位置重新排列我的 xml 元素：

```
- <course>
  - <CourseType>
    - <GroupIndex>
         <index>1</index> 
         <professor>James</professor> 
      </GroupIndex>
      <classType>Lecture</classType> 
    </CourseType>
  <courseCode>3000</courseCode> 
 </course> 
```

至：

```
- <course>
    <courseCode>3000</courseCode>
  - <CourseType>
      <classType>Lecture</classType>
    - <GroupIndex>
         <index>1</index> 
         <professor>James</professor> 
      </GroupIndex> 
    </CourseType> 
 </course> 
```

这是关于如何安排它们，使无法扩展的元素始终位于可以扩展的元素之上。

我在 java 中使用 JAXB 编组来转换我的对象以生成 xml 文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T01:08:20.780

在你正在解组的类中使用proporder应该有助于解决这个问题

例如

```
@XmlType(propOrder = {
        "courseCode",
        "CourseType"
    }) 
```

注意：使用 propOrder 时，对象中的所有元素都必须添加到 propOrder。

# scala - NetBeans + Scala + Maven

> ID：13337089
> 
> 赞同：3
> 
> 时间：2012-11-12T00:49:44.853
> 
> 标签：scala, maven, netbeans, sbt

我是 Scala 新手，对 Java 比较陌生。我似乎无法在 Scala 中使用 IDE。我正在使用纯文本编辑器并使用 sbt，效果很好。但我想要代码提示，并让 IDE 通过在 maven 中搜索类来帮助我解析类。

我有用于 NetBeans 的 Scala 插件，但它使用 ant。代码提示有效，但它不像使用 java/maven 那样为我解析类。

有没有办法使用 Maven 或 SBT 将 NetBeans 与 Scala 一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T08:39:39.273

我不是 NetBeans 用户，但我想使用 maven 设置对其进行测试，对我来说，它与以下 pom 文件配合得很好。

它使用[ScalaTest](http://www.scalatest.org/)进行单元测试。

我刚刚通过选择`Open project...`并指向 pom 文件加载了这个项目。

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

    <modelVersion>4.0.0</modelVersion>

    <groupId>com.stackoverflow.Q13337089</groupId>
    <artifactId>scala</artifactId>
    <version>1.0-SNAPSHOT</version>

    <name>${project.artifactId}-${project.version}</name>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <scala.version>2.9.2</scala.version>
    </properties>

    <dependencies>
        <dependency>
            <groupId>org.scala-lang</groupId>
            <artifactId>scala-library</artifactId>
            <version>${scala.version}</version>
        </dependency>
        <dependency>
            <groupId>org.scalatest</groupId>
            <artifactId>scalatest_2.9.2</artifactId>
            <version>2.0.M4</version>
            <scope>test</scope>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.scala-tools</groupId>
                <artifactId>maven-scala-plugin</artifactId>
                <version>2.15.2</version>
                <executions>
                    <execution>
                        <id>scala-compile</id>
                        <goals>
                            <goal>compile</goal>
                            <goal>testCompile</goal>
                        </goals>
                        <configuration>
                            <args>
                                <arg>-make:transitive</arg>
                                <arg>-dependencyfile</arg>
                                <arg>${project.build.directory}/.scala_dependencies</arg>
                            </args>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <version>2.7.2</version>
                <executions>
                    <execution>
                        <id>default-test</id>
                        <!-- Disable the default-test by putting it in phase none -->
                        <phase>none</phase>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.scalatest</groupId>
                <artifactId>scalatest-maven-plugin</artifactId>
                <version>1.0-M2</version>
                <configuration>
                    <reportsDirectory>${project.build.directory}/surefire-reports</reportsDirectory>
                    <junitxml>.</junitxml>
                    <filereports>WDF TestSuite.txt</filereports>
                    <stdout>W</stdout> <!-- Skip coloring output -->
                </configuration>
                <executions>
                    <execution>
                        <id>scala-test</id>
                        <goals>
                            <goal>test</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</project> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T10:37:48.577

[https://github.com/dcaoyuan/nbscala#readme](https://github.com/dcaoyuan/nbscala#readme)应该在一些实例中包含将 scala 支持与 maven 项目桥接的代码。netbeans 模块在源代码中，不确定它是否在某个地方作为二进制文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-13T20:52:29.880

这对我有用。 **首先** 安装 netbeans > 7.4 **第二次从**[netbeans 插件网站](http://plugins.netbeans.org/plugin/54162/nbscala-1-6-3-1)安装 scala 插件按照说明添加插件。 **第三个**创建一个Maven项目。新项目-> Maven-> 来自原型的项目。然后选择“scala archetype simple”，然后选择“Next”和“finish”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T07:11:21.390

我在 Scala IDE 和 eclipse 上玩得更好。如果您只是想让一个项目顺利进行，那么这确实是您所需要的。

现在还有一个用于 eclipse 的 sbt 插件（虽然我没有使用它，因为 sbt 的 eclipse 插件可以很好地生成 eclipse 项目文件）。

如果您想从 sbt 构建文件进入 eclipse，那么我可以告诉您，我使用 Lift 进行 webapp 开发（从 sbt 构建模板开始），并且我根据这些说明进行了设置，包括将其集成到 eclipse ：

[http://scala-ide.org/docs/tutorials/lift24scalaide20/index.html](http://scala-ide.org/docs/tutorials/lift24scalaide20/index.html)

实际上，[顶级教程](http://scala-ide.org/docs/tutorials/index.html)目录包含使用 Scala IDE 进行 Play、Android 开发和其他操作的说明。

# django - 使用中间件覆盖 Django 身份验证

> ID：13337091
> 
> 赞同：7
> 
> 时间：2012-11-12T00:49:53.100
> 
> 标签：django, authentication, django-middleware

我有一个 Django 网站和一个 MyBB 论坛，我想在它们之间共享身份验证。我的网站曾经是一个留言板；然后我在 Django 中构建了其他一些部分，MyBB 和 Django 都在同一个域上运行。我建立了一个系统，在注册后（在论坛上），每个用户都会获得两个用户：一个 Django 用户和一个 MyBB 用户。用户使用论坛登录，所以需要Django读取MyBB的cookies并将对应的Django账号设置为登录用户。

我可以用中间件做到这一点吗？该中间件将读取 MyBB 的 cookie（其中包含 MyBB 用户的 id）并设置`request.user`为相应的 Django 用户。我是 Django 新手，我不确定在中间件中设置`request.user`（或调用`authenticate`）是否是一个好主意（或者是否有更好的方法）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-15T23:18:19.253

如果存储在 MyBB cookie 中的 user_id 代表 Django 数据库中的同一用户，那么您可以使用默认的 Django 后端直接从该 id 获取用户对象。如果这些 ID 不匹配，您需要自定义后端来获取 Django 用户对象。要从 MyBB cookie 中获取用户 ID 并根据它更新用户，您需要有一个自定义的身份验证中间件。

**中间件**

主要思想是获取用户对象（基于您的身份验证逻辑）并将其分配给 request.user。这是一个示例（未测试）。

```
from django.contrib import auth

class MyBBMiddleware:
    def process_request(self, request):
        user_cookie_name = "session_key"
        if user_cookie_name not in request.COOKIES:
            # log user out if you want
            return 
        id = request.COOKIES.get(user_cookie_name)
        # this will find the right backend
        user = auth.authenticate(id) 
        request.user = user
        # if you want to persist this user with Django cookie do the following
        #auth.login(request, user) 
```

请记住，对于发送到您的 Django 站点的每个请求，都会调用此方法。为了性能，您可以缓存用户和/或做一个惰性对象技巧，[EXAMPLE](https://github.com/dkukral/everyblock/blob/master/ebpub/ebpub/accounts/middleware.py)。

**后端**

如果您需要编写自己的逻辑来获取用户对象和验证用户，您可以执行以下操作。

```
class MyBBCookieBackend(object):
    def authenticate(self, user_id):
        return self.get_user(user_id)
    def get_user(self, user_id):
        # if user_id is not the same in Django and MyBB tables, 
        #  you need some logic to relate them and fetch Django user
        try:
            #TODO your custom logic
            user = User.objects.get(id=user_id)
            return user
        except User.DoesNotExist:
            return None 
```

您需要在站点设置文件中添加自定义后端和中间件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-12T05:13:55.550

我认为正确的做法是结合中间件和[Django 身份验证后端](https://docs.djangoproject.com/en/1.2/topics/auth/#other-authentication-sources)。

`authenticate()`您的中间件将使用可能的用户 ID 作为关键字参数来调用后端。您的身份验证后端将依次调用相应的`authenticate()`方法并返回一个用户对象。

```
class MiddlewareTracker:
 def process_request(self, request):
    id = request.COOKIES.get('logged_in_id') 
    authenticate(user_id = id)
    return None

class ForumAuthBackend(object):

    def authenticate(self, *args, **kwargs):
        id = kwargs.get('user_id')
        return User.objects.get(id = id)

    def get_user(self, user_id):
        return User.objects.get(id = user_id) 
```

我还建议通过此[https://docs.djangoproject.com/en/1.2/topics/auth/](https://docs.djangoproject.com/en/1.2/topics/auth/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T00:54:57.320

尝试处理 `request.session`。`request`object 作为第一个参数出现。有关会话的更多详细信息：[https ://docs.djangoproject.com/en/dev/topics/http/sessions/](https://docs.djangoproject.com/en/dev/topics/http/sessions/)

您绝对可以使用中间件做到这一点：有关中间件的更多信息：[https ://docs.djangoproject.com/en/dev/topics/http/middleware/](https://docs.djangoproject.com/en/dev/topics/http/middleware/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-25T14:04:01.223

我相信最好使用`process_view`而不是`process_request`因为进程视图具有以下信息：

1.  要求
2.  要调用的函数
3.  传递的参数

* * *

```
process_view(request, view_func, view_args, view_kwargs):
    if not request.user.is_authenticated():
        return HttpResponseRedirect(settings.LOGIN_URL)
    return None 
```

这使它更加灵活，因为我们也有功能`information(view_func)`。因此，我们也可以使用以下方法将其限制为某些功能：

```
view_func.__name_ 
```

它给出了函数名称。

# simulation - 如何管理未初始化的输入信号

> ID：13337093
> 
> 赞同：1
> 
> 时间：2012-11-12T00:50:20.413
> 
> 标签：simulation, vhdl, modelsim, hardware-design

我想知道您对如何测试和管理“U”、“X”、“-”、...的组件的输入信号的看法

例如，如果我希望所有无效输入的输出为“X”，其中输入的至少一位不是“0”或“1”：

```
entity foo is
    port (
        signal inp : std_logic_vector(7 downto 0);
        signal outp: std_logic );
end entity foo;

architecture bar of foo is
begin
    process(inp)
        if (inp < "11001010") then
            outp <= '1';
        else
            outp <= '0';
        end if;
    end process;
end architecture bar; 
```

这样，测试默认为假。

如何测试输入的一般方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T01:07:38.733

`Is_X`从[`std_logic_1164`](http://standards.ieee.org/downloads/1076/1076.2-1996/std_logic_1164.vhdl);使用 `true`如果您`std_logic_vector`包含“U”、“X”、“Z”、“W”、“-”中的任何一个，它将返回。

`Is_X`将始终`false`在综合期间返回（例如，您可以使用它`Is_X('W')`来测试您是在模拟还是在综合中。）

# php - PHP：一个框架的系统目录

> ID：13337109
> 
> 赞同：1
> 
> 时间：2012-11-12T00:52:12.670
> 
> 标签：php, frameworks, directory-structure

多个项目（应用程序）使用的框架的一个系统目录是一个好主意吗？或者每个应用程序应该有一个系统文件夹？

只更新一个基础会更容易，但也许它们是这种技术的劣势而不是优势？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T01:08:05.877

为每个项目设置一个单独的文件夹是一种更好的方法，因为如果您更新公共框架目录，则必须确保所有项目都运行良好。但是，如果您为每个项目使用一个框架文件夹，您可以一个一个地更新您的所有项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T01:20:42.813

这取决于您的更新。在你的框架上。如果您在每个项目的基础上编辑框架，那么显然您不希望在您的中央框架中进行所有这些编辑。

但是，如果您所做的只是编辑取决于您的框架的应用程序，或者您只是对适用于大多数项目的框架进行一些小的调整，我想拥有一个框架文件夹就可以了。

重要的是您可以轻松地将所需的环境复制到生产/部署中，并且您最终不会得到一个为多个项目编辑的框架，因此您无法理解它。

# chef-infra - 获取recipe中厨师搜索返回的节点IP地址

> ID：13337110
> 
> 赞同：8
> 
> 时间：2012-11-12T00:52:15.860
> 
> 标签：chef-infra, chef-recipe

如何获取厨师食谱（红宝石）中节点搜索返回的 IP 地址。

```
dbnodes = search(:node, "role:Db")
Chef::Log.info(dbnodes.first["ipaddress"]) # nil 
```

几周前，此代码从搜索 API 返回了第一个实例的 IP。

版本：厨师：10.14.2

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-12T06:19:13.973

我猜你是 Ruby 的新手。如果是这样，欢迎！

Chef`search()`函数返回一个 Chef 节点数组，您正在使用该`first`方法获取该数组的头部。要访问其他节点的 IP 地址，请使用常规数组运算符：

```
dbnodes = search(:node, "role:Db")
dbnodes.each do |node|
  Chef::Log.info("#{node["name"]} has IP address #{node["ipaddress"]}")
end 
```

这应该为您提供所需的信息。

# json - 从 Gmail 邮件过滤器自定义 Pushover 通知

> ID：13337114
> 
> 赞同：0
> 
> 时间：2012-11-12T00:53:21.960
> 
> 标签：json, api, filter, gmail, push

我目前正在使用 Gmail 过滤器将特定电子邮件转发到 Pushover 通知服务，然后该服务会向我的 iPhone 发送包含消息内容的通知。

我的问题是我只关心电子邮件中的一行（它是一个班次警报通知），每次都是一样的。有没有一种好方法可以在通知服务中发送此行？我需要设置某种“中间人”来编辑邮件的内容，然后再将其发送到 Pushover，因为 Gmail 和 Pushover 都无法编辑内容。有任何想法吗？

非常感谢！

艾略特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T02:28:43.960

我最终使用了我的网络主机的 cpanel 转发到程序功能来创建一个 PHP 管道来修剪消息并使用 CURL 将其发送到 Pushover 的服务！

# jquery - 基本 jQuery - 无法让 hover() 定位特定元素

> ID：13337115
> 
> 赞同：1
> 
> 时间：2012-11-12T00:53:31.343
> 
> 标签：jquery, this, each

我有一系列项目：

[http://imgur.com/ZWKI4](http://imgur.com/ZWKI4)

每个项目的结构如下：

```
 <div class="span3 item">
          <img class="itemImage" src="assets/img/bure.jpg">
          <div class="itemDescription">
            <p><span class="itemDescLabel">Title:</span> <script>document.write(title);</script></p>
            <p><span class="itemDescLabel">Price:</span> <script>document.write(price);</script></p>
            <p><span class="itemDescLabel">Source:</span> <script>document.write(source);</script></p>
          </div><!-- /itemDescription-->
        </div> <!-- /item--> 
```

这个想法是，当我将鼠标悬停在一个上时，应该显示它的描述。

当前发生的情况是，当我将鼠标悬停在一个上时，会显示所有项目的描述。

发生这种情况是因为我正在像这样应用悬停：

```
 $(document).ready(function() {
        $('.item').hover(
          function() {
          $('.itemDescription').show();
            }, 
          function() {
          $('.itemDescription').hide();
        });//end hover    
      });//end ready 
```

我试过这样做：

```
 $(document).ready(function() {
    $('.item').hover(
      function() {
      $(this).next('.itemDescription').show();
        }, 
        function() {
      $(this).next('.itemDescription').hide();
    });//end hover 
  });//end ready 
```

还有这个：

```
 $(document).ready(function() {
    $('.item').each(function() {
      $(this).hover(
        function() {
      $(this).next('.itemDescription').show();
        }, 
        function() {
      $(this).next('.itemDescription').hide();
      });//end hover
    });//end each
  });//end ready 
```

两种方法都没有奏效。

我究竟做错了什么？我知道我可以给每个项目一个不同的 ID，但应该有一个更简单的方法来做到这一点......

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T00:55:22.970

您可以使用`$(selector, context)`或`find`方法。

```
$(document).ready(function() {
    $('.item').hover(function() {
        $('.itemDescription', this).show();
        // $(this).find('.itemDescription').show();
    }, function() {
        $('.itemDescription', this).hide();
    });
}); 
```

`next`选择下一个兄弟元素，在您的标记`itemDescription`中是`item`元素的后代，而不是兄弟。

也可以使用`toggle`方法。

```
$('.item').hover(function() {
    $('.itemDescription', this).toggle();
}); 
```

[http://jsfiddle.net/pvFN9/](http://jsfiddle.net/pvFN9/)

# php - 从同一行的数据库中获取数据

> ID：13337117
> 
> 赞同：1
> 
> 时间：2012-11-12T00:54:13.607
> 
> 标签：php, sql, sql-server, database

我在这样的表上有一个数字列表：

n | 标题--- | 内容
1 | 第 1 页 | 第一页内容
2 | 第2页| 第二页内容

我想从数字中获取标题和内容，例如：

```
if (1) {
    echo Title;
    echo Content;
} 
```

并得到：

Page1 - 第一页内容

我连接到数据库后的代码是：

```
$page = 1;
$rows = mysql_fetch_array(mysql_query("SELECT * FROM $tbl_name"));
// Retrieve data from database 
$sql="SELECT * FROM $tbl_name";
$result=mysql_query($sql);
//check data
while($page == mysql_fetch_array($result)){
    $head = $rows['Title'];
    $content = $rows['Content'];
} 
```

这不是很好，但我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T01:00:06.780

当您进行 SELECT * FROM 查询时，它会返回一个信息数组，如果您了解数组的外观，您可以从中提取信息。

尝试

```
$page = 1;
$rows = mysql_fetch_array(mysql_query("SELECT * FROM $tbl_name"));
// Retrieve data from database 
$sql="SELECT * FROM $tbl_name";
$result=mysql_query($sql);

echo "<pre>";
print_r($result);
echo "</pre>"; 
```

自己查看数组，然后您将看到该数组包含表中列标题的名称，因此您的下一位应该是

```
while($page == mysql_fetch_array($result)){
    $head = $rows['Title'];
    $content = $rows['Content'];
} 
```

而不是标题+内容；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T01:06:42.253

你用过

```
while($page == mysql_fetch_array($result)){
    $head = $rows['Header'];
    $content = $rows['Content'];
} 
```

你应该使用

```
while ($page = mysql_fetch_array($result)) {
    $head = $page['Title']; // get Title field
    $content = $page['Content']; // get Content field
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T18:52:50.607

我发现了怎么做..

```
$result = mysql_query("SELECT COUNT(*) FROM `pages` WHERE `Page` = '$page' ");
if (mysql_result($result, 0, 0) > 0) {
   $head = mysql_result(mysql_query("SELECT `Header` FROM `pages` WHERE `Page` = '$page' "), 0, 'Header');
   $content = mysql_result(mysql_query("SELECT `Content` FROM `pages` WHERE `Page` = '$page' "), 0, 'Content');
}
echo $head;
echo $content; 
```

这会从 Page = $page 所在的行获取 Header 和 Content。

对不起，如果你错过了理解这个问题。

# java - 如何获取数据传输到的组件的价值？

> ID：13337119
> 
> 赞同：0
> 
> 时间：2012-11-12T00:54:31.753
> 
> 标签：java, swing, drag-and-drop, layout-manager, null-layout-manager

当您将一个 jlabel(B) 拖到另一个上时，我正在使用传输处理程序将文本从一个 jlabel (A) 传输到另一个。我将 B 上的文本更改为 A 的文本，但是有没有办法在将文本放在上面之前识别 B 的文本是什么？

这就是改变文本的地方，相当简单。但我只想在某些条件下更改 B 的文本 public void mousePressed(MouseEvent e) { JComponent comp = (JComponent)e.getSource();

```
 TransferHandler handler = comp.getTransferHandler();
            System.out.println(e.toString());

            handler.exportAsDrag(comp, e, TransferHandler.MOVE);

            //repaint();

        } 
```

所以我尝试覆盖导入数据。它的作用是我有两张卡片（JLabels），一开始它们以空布局出现在它们的起始位置，所以如果将一张卡片拖到另一张卡片上，底部卡片会回到它的起始位置，这就是home1 和 home2 代表。那行得通，但是我希望文本更改为顶部卡片的文本，但这不起作用，那么有没有办法获取您拖到的 jlabel 的值？

```
TransferHandler transfer = new TransferHandler("text"){
            JComponent sourced;
            Transferable datad;
            @Override
            protected void exportDone(JComponent source, Transferable data, int action) {
                if (action == MOVE){
                    ((JLabel) source).setText("");
                    sourced = source;
                    datad = data;
                }
            }

            @Override
            public int getSourceActions(JComponent c) {
                return COPY | MOVE;
            }

            @Override
            public boolean importData(JComponent comp, Transferable t)
            {
                if( !((JLabel)comp).getText().equals(""))
                {

                    String text = ((JLabel)comp).getText();
                    if(text.equals(String.valueOf(card1)) )
                    {
                        card1.setBounds(home1);
                        card1.setVisible(true);
                    }
                    if(text.equals(String.valueOf(card2)) )
                    {
                        card2.setBounds(home2);
                        card2.setVisible(true);
                    }

                }
                return true;
            }
        }; 
```

完整代码在这里[http://pastebin.com/4mxkQY30](http://pastebin.com/4mxkQY30)

# android - 表格包含多行，每一行都有textview和button share，如何识别每一行的组件？

> ID：13337123
> 
> 赞同：0
> 
> 时间：2012-11-12T00:55:17.057
> 
> 标签：android

我正在创建从 db 获取文本的 android 应用程序，并将它们显示为表格，其中行数取决于该 db 上的文本数每个文本将显示在行上，旁边有一个共享按钮

我创建了 2 个布局，1 个用于我的表格，另一个用于每行现在我用函数 addtablerow 填充每一行，但是如何识别每个按钮的确切行？

因为只有最后一个按钮效果很好，其他按钮没有动作？？我想创建按钮数组，但总是在创建时崩溃！

有关更多详细信息，这是我的代码

activity_main.xml

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

android:layout_height="wrap_content"
android:layout_width="fill_parent" >
<TableLayout
    android:id="@+id/my_table"
    android:layout_height="fill_parent"
    android:layout_width="fill_parent"
    android:stretchColumns="1"
    android:shrinkColumns="1"/>
</ScrollView> 
```

table_row_item.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<TableRow xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="?android:attr/listPreferredItemHeight"
android:focusable="true"
android:focusableInTouchMode="false"
android:clickable="true"
android:background="@android:drawable/list_selector_background">

<TextView
    android:id="@+id/cell"

/>
 <Button
    android:id="@+id/button1"
    android:layout_width="7dp"
    android:layout_height="77dp"
    android:text="Button" />
</TableRow> 
```

MainActivity.java

```
package com.example.tabletest.test;
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.TableLayout;
import android.widget.TableRow;
import android.widget.TextView;

public class MainActivity extends Activity {
public int i;
public Button btn;
public TextView tv;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    i=1; //just for test , but later i will get position of data on db
    addTableRow();
    i=2;
    addTableRow();

    btn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            int j=btn.getId();
            Intent sharingIntent = new Intent(
                    android.content.Intent.ACTION_SEND);
            sharingIntent.setType("text/plain");
            String shareBody = "this is"+j;
            sharingIntent
                    .putExtra(android.content.Intent.EXTRA_TEXT,     shareBody);
            startActivity(Intent.createChooser(sharingIntent, "Share via: "));
        }

    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
private void addTableRow() {
    final TableLayout table = (TableLayout) findViewById(R.id.my_table);
    final TableRow tr = (TableRow) getLayoutInflater().inflate(R.layout.table_row_item, null);

    // fill cell txt
    tv = (TextView) tr.findViewById(R.id.cell);
    tv.setText("This is row"+i);
    table.addView(tr);

    btn=(Button) tr.findViewById(R.id.button1);
    btn.setId(i);

    registerForContextMenu(tr);
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T03:34:20.817

首先，我认为从它的声音来看，您可能希望使用[列表视图](http://developer.android.com/guide/topics/ui/layout/listview.html)而不是表格布局，但这并不是真正的问题。

主要问题是 btn 和 tv 不应该是活动的全球成员。最后一个按钮起作用的原因是因为您正在重新初始化按钮 btn，使其与新按钮相同。因此，最后一个是唯一真正有效的。我的建议是让这些本地实例变量像这样：

```
private void addTableRow() {
final TableLayout table = (TableLayout) findViewById(R.id.my_table);
final TableRow tr = (TableRow) getLayoutInflater().inflate(R.layout.table_row_item, null);

// fill cell txt
TextView tv = (TextView) tr.findViewById(R.id.cell);
tv.setText("This is row"+i);
table.addView(tr);

Button btn=(Button) tr.findViewById(R.id.button1);
btn.setId(i);

registerForContextMenu(tr); 
```

}

然后，为了跟踪每一行中的内容，我将创建一个类来保存您的数据。这是一个例子：

```
public class myRow{
    String text;
    int id;
    //any other data you want to track
} 
```

然后，在您的活动中，创建这些对象的数组列表（来自您的数据库）。当有人单击数组列表中的一项时，您只需检索列表中的该元素，并根据该元素执行操作。

如果您在列表视图上仍然需要更多帮助，或者这不起作用，请告诉我，我会提供帮助！

# node.js - 在 node.js 中使用带有路由的 socket.io

> ID：13337126
> 
> 赞同：0
> 
> 时间：2012-11-12T00:56:40.500
> 
> 标签：node.js, socket.io

我在路由中使用 socket.io 时遇到问题。

在我的 app.js 中。我已经指定了我的路线。

```
app.get('/', routes.index); 
```

我的路线有一个 index.js 文件

```
exports.index = function(req, res){
    res.render('index', { title: 'Example Title' });
    io.sockets.on('connection', function(socket){
    ...
    });
}); 
```

但是，我在 index.js 中不断收到错误“ReferenceError：io is not defined”。我需要将 io 对象传递到每个路由中还是在每个路由中都需要 socket.io？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:39:15.367

我将向您展示如何在我的应用程序中使用 socket.io，尽管我不确定这是否是这方面的最佳实践。

在我的 app.js 中，我有以下几行：

```
var io = require('socket.io').listen(server, { log: false });
routeRegistrar.init(app, io); 
```

`routeRegistrar`是一个辅助功能，我简单地使用它来遍历每个控制器并注册其路由，请参阅：

```
var fs = require('fs');

var controllersFolder = "controllers";
var controllersFolderPath = __dirname + '/../' + controllersFolder + "/";

module.exports.init = function(app, io){
    fs.readdirSync(controllersFolderPath).forEach(function(controllerName){
        require(controllersFolderPath + controllerName).init(app, io);
    }); 
}; 
```

请注意，我将`io`var 传播到每个控制器，因此每个控制器都可以使用它！在控制器中，我有以下内容：

```
var sockets; //see that this variable becomes global to the controller
module.exports.init = function(app, io) {
    app.get("/chat", chat);

    sockets = io.sockets;
    sockets.on('connection', function(socket) {
        //do any cool stuff here
    });
};

function chat(){
    //sockets is available here, at the route level - so do more cool stuff here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-08T17:41:24.993

是的，您可以在您的路线中使用 socket.io。您收到错误“ReferenceError: io is not defined”，因为 io 未定义大声笑。您需要包含“var io = require('socket.io').listen(server)。这将在 app.js 中完美运行，因为在快速应用程序中，服务器被定义为“vas server = createServer(app)”您在应用程序中传递的位置。但是，为了在 routes/index.js 文件中声明服务器，您需要创建一个“全局服务器”，您可以从节点项目中的任何文件访问它。为此，我建议您创建一个 confg.json 文件，并创建一个 config.js 文件。

您的 config.json 文件应如下所示：

```
{
    "all": {
        "redis": {
            "port": 6379
          , "host": "127.0.0.1"
        }
    }
  , "development": {
        "env": "development"
      , "db": "mongodb://...development"
    }
  , "staging": {
        "env": "staging"
      , "db": "mongodb://...staging"
      , "redis": {
            "pass": ""
        }

    }
  , "production": {
        "env": "production"
      , "db": "mongodb://...production"
      , "redis": {
            "pass": ""
        }
    }
} 
```

您的 config.js 文件应如下所示：

```
var env = process.env.NODE_ENV || 'development'
  , core = require('./config.json')

var merge = function (target, source) {
  for (var k in source) {
    if (typeof target[k] === 'object' && typeof source[k] === 'object')
      merge(target[k], source[k])
    else
      target[k] = source[k]
  }
}

module.exports = function (app) {
  global.config = {}

  merge(global.config, core.all)
  merge(global.config, core[env])

  global.config.app = {
      key: app.key
    , port: process.env.PORT || app.port
    , base: app.base
  }

  merge(global.config, app[env])
}

Now in app.js
require('./config')({
    key: 'pinpoint'
  , port: 3000
  , base: '/'
  , development: {
        app: {
            url: 'localhost:3000'
        }
    }
  , staging: {
        app: {
            url: 'localhost:3020'
        }
    }
})

var express = module.exports.express = require('express')
var bodyParser = require('body-parser');
var http = require('http');
var app = module.exports.app = express();
global.appserver = http.createServer(app);
var router = express.Router();
... 
```

您现在已经成功创建了一个全局服务器，您可以在“routes/index.js”中访问它

Soooo 现在在你的 index.js 文件中你可以这样做：

```
global.io = require('socket.io').listen(global.appserver, { log:true});

io.sockets.on('connection', function(socket){
    console.log("#### socket.io connected. Port 3000"); 
    socket.on("scrape request", function(data) {
        console.log("in here");
        console.log(data);
    })
}) 
```

您不能在“连接时”功能中进行路由。但是，您可以执行 get/post 调用，该调用调用 get/post 调用之外的函数，该函数发出或接收数据。希望这可以帮助。

# java - 什么是方法调用的返回类型？

> ID：13337128
> 
> 赞同：1
> 
> 时间：2012-11-12T00:56:53.537
> 
> 标签：java, distributed, distributed-transactions, proxy-classes

我在 Java ( `InvocationHandler`) 中使用代理模式，在代理类（实现`InvocationHandler`）中为远程对象实现锁管理器。我正在调用远程对象（此处：）`flighRMConnection`：

```
if (method.getName().toLowerCase().contains("query")){
    lm.Lock(Thread.currentThread(), READ);
} else {
    lm.Lock(Thread.currentThread(), WRITE)
}               
method.invoke(flightRMConnection, args); 
```

如何检查调用返回的值？（可能有不同类型的结果）

谢谢，阿里安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T01:08:15.800

好吧，静态返回类型[`invoke`](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Method.html#invoke%28java.lang.Object,%20java.lang.Object...%29)自然是`Object`. 如果要确定调用返回的实例的动态类型，可以调用[`getClass()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#getClass%28%29)它以获取[`Class`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html)表示其类型的对象。

如果您需要检查其内容，您可以使用`Class`（请参阅[`getDeclaredFields()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getDeclaredFields%28%29)等）进行进一步反射。如果对象可能扩展了一个已知的类或接口，您也可以检查它`instanceof`然后强制转换它。

哦，不要忘记`null`在你调用任何东西之前确保返回的对象不是。

# xml - SQL Server Parse XML 空属性

> ID：13337129
> 
> 赞同：1
> 
> 时间：2012-11-12T00:57:00.467
> 
> 标签：xml, sql-server-2008, tsql, xquery

我正在尝试通过 TSQL 在 sql server 2008 中解析/分解 XML，其中一个节点具有以下格式的空白属性，没有指定值。我似乎无法检索该值，并且它抛弃了所有其他值（移动列？）

这是 tsql 代码和错误的图片：

```
declare @doc nvarchar(4000)

set @doc = ' 
<Objects>
  <Object>
    <Property Name="Path">some path</Property>
    <Property Name="InstanceName">some instance</Property>
    <Property Name="result1">0.390630000000003</Property>
    <Property Name="result2">63345649697265</Property>
  </Object>
  <Object>
    <Property Name="Path">another path</Property>
    <Property Name="InstanceName" />
    <Property Name="result1">100</Property>
    <Property Name="result2">1002</Property>
  </Object>
 </Objects>
'
  SELECT 
 item.ref.value('(Property/text())[1]', 'nvarchar(128)') AS Path, 
 item.ref.value('(Property/text())[2]', 'nvarchar(128)') AS InstanceName,
 item.ref.value('(Property/text())[3]', 'nvarchar(128)') AS result1,
 item.ref.value('(Property/text())[4]', 'nvarchar(128)') AS result2
  FROM (SELECT CAST(@doc AS XML) AS feedXml) feeds(feedXml) 
   CROSS APPLY feedXml.nodes('/Objects/Object') AS item(ref) 
```

当您运行查询时，请注意 InstanceName 列填充了另一列中的值，而不是空白、空或 null。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T06:02:25.450

您需要`<Property>`通过使用`Name`属性来引用这些元素 - 而不仅仅是索引！

尝试这个：

```
SELECT
    item.ref.value('(Property[@Name="Path"]/text())[1]', 'nvarchar(128)') AS Path,
    item.ref.value('(Property[@Name="InstanceName"]/text())[1]', 'nvarchar(128)') AS InstanceName,
    item.ref.value('(Property[@Name="result1"]/text())[1]', 'nvarchar(128)') AS result1,
    item.ref.value('(Property[@Name="result2"]/text())[1]', 'nvarchar(128)') AS result2
FROM 
    (SELECT CAST(@doc AS XML) AS feedXml) feeds(feedXml) 
CROSS APPLY 
    feedXml.nodes('/Objects/Object') AS item(ref) 
```

有了这个，你应该得到你的第二`InstanceName`个`NULL`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T06:32:31.340

在括号内指定您想要的节点，这`[4]`意味着您想要第四行。您使用的 XPath 表达式`Property/text()`意味着它`'(Property/text())[4]'`会给您**第四个文本值**。您的第二个对象只有三个文本值，这就是您的值关闭的原因。
相反，您可以指定您想要来自第四个属性节点的第一个文本值`'(Property[4]/text())[1]'`。

完整查询可能如下所示：

```
SELECT 
 item.ref.value('(Property[1]/text())[1]', 'nvarchar(128)') AS Path, 
 item.ref.value('(Property[2]/text())[1]', 'nvarchar(128)') AS InstanceName,
 item.ref.value('(Property[3]/text())[1]', 'nvarchar(128)') AS result1,
 item.ref.value('(Property[4]/text())[1]', 'nvarchar(128)') AS result2
  FROM (SELECT CAST(@doc AS XML) AS feedXml) feeds(feedXml) 
   CROSS APPLY feedXml.nodes('/Objects/Object') AS item(ref) 
```

如果您缺少属性节点或节点的顺序不一致，上述操作当然仍然会失败。在这种情况下，您应该使用[marc_s 提供](https://stackoverflow.com/a/13339041/569436)的查询。

# ruby-on-rails - wget下载的文件名

> ID：13337131
> 
> 赞同：2
> 
> 时间：2012-11-12T00:57:30.177
> 
> 标签：ruby-on-rails, wget

我正在使用 Rails 控制器。我调用一个`wget`命令`system(wget ...)`，我想要一个指示下载文件的文件名的变量。

例如，对于`wget google.com`、 或`wget www.google.com`、 或`wget www.google.com/`、 或`wget http://www.google.com`，返回的名称应该是`index.html`。

对于`example.com/firstpage.html`，返回名称应该是`firstpage.html`。

如您所见，我不能简单地在最后一个反斜杠后去掉名称。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T01:23:45.247

正则表达式可以做到！

处理您使用正则表达式获得的字符串以查找最后一个 / 之后的所有内容

```
@url= 'http://example.com/firstpage.html'
@file = @url.scan(/[^\/]*$/i)

puts @file  #firstpage.html 
```

此正则表达式还处理多个正斜杠，因此它也可以处理长 URL。

[**键盘示例和**](http://codepad.org/Khi1Sy3Y)**[测试 ruby​​ 正则表达式](http://rubular.com/r/34gYgG6SZa)**的好地方

# javascript - 使用 HTML5 的多个线性视频

> ID：13337133
> 
> 赞同：2
> 
> 时间：2012-11-12T00:57:52.223
> 
> 标签：javascript, html

我设法在上一个剪辑之后播放了一个剪辑，但是在第二个剪辑结束后如何添加更多内容？是否可以将视频列表分配给数组并创建“if”语句？连续播放 2 个以上视频的最佳方式是什么？非常感谢。

```
var myVideo = _V_("vid1");

function onComplete1(){

    var video2 = document.getElementsByTagName('video')[0];
    var videoPlaying = video2.currentSrc;
    var ext = videoPlaying.substr(videoPlaying.lastIndexOf("."));

    video2.src = '2'+ext;

    myVideo.load();
    myVideo.play(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T04:03:29.617

没有视频供我测试，但你可以考虑这个：

```
(function(){
  var seq=["1.ogg","2.ogg"/* more */];
  var pos=0;
  var video=document.getElementsByTagName("video")[0];
  function onComplete() {
    if(pos>=seq.length) pos=-1; //if you want to loop
    if(pos>=seq.length) return; //if you don't want to loop
    video.src=seq[++pos];
    video.load();
    video.play();
  }
  video.onended=onComplete;
  video.src=seq[pos];
  video.load();
  video.play();
})(); 
```

# objective-c - 在 NSStrings 中搜索的代码建议

> ID：13337137
> 
> 赞同：1
> 
> 时间：2012-11-12T00:59:01.220
> 
> 标签：objective-c

我用带有字典的 plist 数组填充我的应用程序。字典中键“新鲜度”的值是捆绑图像的名称，用于显示饮料的新鲜度，“level1.png”、“level2.png”、“level3.png”、“level4.png” ”、“level5.png”、“level6.png”或“level7.png”。

我添加了一个 UIStepper，因此用户可以像这样指定饮料的最小和最大新鲜度：

```
- (void)viewDidLoad
{
[super viewDidLoad];
minImageView.image = [UIImage imageNamed:@"level1.png"];
maxImageView.image = [UIImage imageNamed:@"level7.png"];
}

- (IBAction)minStepperValueChanged:(id)sender {
double stepperValue = minStepper.value;
minImageView.image = [UIImage imageNamed:[NSString stringWithFormat:@"level%.f.png", stepperValue]];
maxStepper.minimumValue = minStepper.value;
minStepper.maximumValue = maxStepper.value;
minLabel.text = [NSString stringWithFormat:@"From level %.f", stepperValue];
}

- (IBAction)maxStepperValueChanged:(id)sender {
double stepperValue = maxStepper.value;
maxImageView.image = [UIImage imageNamed:[NSString stringWithFormat:@"level%.f.png", stepperValue]];
maxStepper.minimumValue = minStepper.value;
minStepper.maximumValue = maxStepper.value;
maxLabel.text = [NSString stringWithFormat:@"To level %.f", stepperValue];
} 
```

当`searchButtonPressed`被调用时，猜猜我想要发生什么。将具有正确新鲜度级别的对象添加`allObjectsArray`到`searchResultsArray`。有什么建议可以像这样过滤代码吗？

我正在考虑使用`levelsArray`具有所有级别图像路径的可变数组，然后从`levelsArray`when中删除低于最小值或高于最大值的对象`searchButtonPressed`。

然后将与该数组的剩余对象之一匹配的字典添加到`searchResultsArray`. 但是我在这方面已经扭曲了我的大脑，我真的需要一些帮助。非常感谢！

**编辑：**

我已经这样做了：

```
-(IBAction)searchButtonPressed:(id)sender{

for(double i=otherCriteriasViewController.minStepper.value;i>1;i--) {
    [otherCriteriasViewController.levelsArray removeObject:[NSString stringWithFormat:@"level%.f.png", i-1]];
}

for(double ii=otherCriteriasViewController.maxStepper.value;ii<7;ii++) {
    [otherCriteriasViewController.levelsArray removeObject:[NSString stringWithFormat:@"level%.f.png", ii+1]];
} 
```

现在我想添加所有包含levelsArray 对象之一的对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T01:29:45.693

如果我理解正确，您要解决的问题是根据每个字典中的键过滤字典数组。

您可以使用 an`NSPredicate`来执行此操作。

假设您有一个名为“allItems”的 NSArray，并且数组中的每个对象都是包含键“Freshness”的字典。

假设您想要所有新鲜度为 2 的项目。

```
NSArray *filtered = [allItems filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"(Freshness == %@)", @"level2.png"]]; 
```

您还可以使用 NSPredicates 进行大于和小于比较。这只是一个平等的例子。

# php - 将 HTML 与数据库条目连接起来？

> ID：13337139
> 
> 赞同：0
> 
> 时间：2012-11-12T00:59:38.133
> 
> 标签：php, postgresql, concatenation

嘿 Stack Overflowians，

我有一个 PHP 的初学者问题，我没有太多的运气搜索，所以我想我会问。

问题是我过去的帖子略有改动，您可以通过我的个人资料（因为它是我唯一的个人资料）找到该帖子，我试图在循环中从数据库中打印数据，但也试图将 HTML 包装在它周围。

在我的示例中，我试图在我的数据库中打印测试行，该测试行恰好是 KO278 的样式代码，这样除了打印样式代码之外，它还会在 img src 中打印它，所以那个 img项目也被打印了，但到目前为止我运气不佳。

我想也许一些连接可能会起作用，因为我没有太多使用它，但我尝试它并没有给我太多结果，但也许我的格式可能会关闭？

不管怎样，我希望你能把我对准正确的方向。

谢谢！

另外，在旁注中，我在考虑是否有可能出现每种颜色的小图像（jpg，因为它们更像是图案）代替颜色的单词，但我不知道我怎么能把它联系起来。

有些产品既有混合颜色（它们的不同 jpg 交叉）或多达 8 种颜色，所以我不知道如何解释这么多的可变性，除非我的数据库中有一堆字段，这似乎不是很有效. 这并不重要，但如果有人对我如何解决这个问题有任何建议，那就太好了？

```
<?php

$sql = "SELECT * FROM mc16koruproducts where collection = 'womens' order by ref";
    $result = pg_exec($sql);
    $nrows = pg_numrows($result);
    #print $nrows;
    $items = pg_fetch_all($result);
    #print_r($items);

    $type = '';

    for ($i=0; $i<$nrows; $i++) {
    if($items[$i]['type']!=$type)
    {
        print "<h2>";
        print $items[$i]['type'];
        print "</h2>";
        $city = $items[$i]['city'];
    }

    print "<div id='info-holder'>";
        print "<div id='img'>";
        print "<img src='products/";
            print $items[$i]['style'];
        print ".jpg />";
    print "</div>";
    print "<div id='style'>";
        print "Style ";
        print $items[$i]['style'];
    print "</div>"; 
    print "<div id='desc'>";
        print $items[$i]['desc'];
    print "</div>";
    print "<div id='size'>";
        print "Sizes: ";
        print $items[$i]['size'];
    print "</div>";
    print "<div id='colour'>";
        print "Colours Available: ";
        print $items[$i]['colour'];
    print "</div>";
    print "<br />";
    print "<br />";
    print "</div>";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T01:27:59.683

我认为问题可能是您在 .jpg 之后缺少单引号

```
print "<img src='products/";
print $items[$i]['style'];
print ".jpg />"; 
```

应该

```
print "<img src='products/";
print $items[$i]['style'];
print ".jpg' />"; 
```

我希望这会有所帮助。如果不只是让我知道，我会更深入地挖掘。

# python - 运行斐波那契数列的奇怪输出

> ID：13337140
> 
> 赞同：2
> 
> 时间：2012-11-12T00:59:46.993
> 
> 标签：python, command-line-arguments, fibonacci

全新使用 python，需要帮助弄清楚为什么我的命令行会吐出大量的数字字符串，而不是我传入的 var 的 fib 序列。这是我到目前为止所拥有的：

```
import sys

def fib(n):
    a, b = 0, 1
    while a < n:
        print a
        a, b = b, a+b

if __name__ == "__main__":
    fib(sys.argv[1]) 
```

现在，在我做 sys.argv[1] 或 [1:] 之前，我能够在 n 中放入一个序列，直到我想要的数字。即，如果我输入 n 作为 12，我会得到 0,1,1,3,5,8，这是正确的。但是我不能让它工作。我在 def fib(n): as print n 之后做了一个打印语句。它会返回我的 sys.argv 通行证。

我哪里错了？谢谢你的时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T01:02:13.370

不要忘记将输入参数（字符串）转换为整数类型：

```
fib(int(sys.argv[1])) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T01:05:50.677

试试`fib(int(sys.argv[1]))`，可能是这个问题，但我没试过。

# c# - RaisePropertyChange WPF C#

> ID：13337141
> 
> 赞同：0
> 
> 时间：2012-11-12T01:00:05.940
> 
> 标签：c#, wpf

为什么 RaisePropertyChange 在内部不起作用

```
public partial class MainWindow : Window
{
        private string _searchString;
        public string SearchString
        {
            get { return _searchString; }
            set
            {
                _searchString = value;
                RaisePropertyChanged(() => SearchPersonEHistroy);
            }
        }
} 
```

它给出错误**“当前上下文中不存在 RaisePropertyChanged”**

但是当我尝试这样使用时：

```
public partial class MainWindow : Window
{
        public MainWindow()
        {
            InitializeComponent();
            this.DataContext = new MainViewModel();
        }

        public class MainViewModel : NotificationObject
        {
            private string _searchString;
            public string SearchString
            {
                get { return _searchString; }
                set
                {
                    _searchString = value;
                    RaisePropertyChanged(() => SearchPersonEHistroy);
                }
            }
        }

} 
```

他们之间有什么区别？或者我们在**公共部分类 MainWindow: Window**中是否有任何 RaisePropertyChange 转换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T01:03:08.777

`RaisePropertyChanged()`由`NotificationObject`类定义，而不是`Window`.

既然`Window`已经是 a `DependencyObject`，您应该将其`SearchString`属性设为[依赖属性](http://msdn.microsoft.com/en-us/library/system.windows.dependencyproperty.aspx)，这将允许您将其与`SearchString`View Model 的属性绑定。

# ruby - Ruby 数学：从较大的数字范围中取一个数字并计算它在较小范围内的位置

> ID：13337143
> 
> 赞同：1
> 
> 时间：2012-11-12T01:00:07.320
> 
> 标签：ruby, arrays, math, hash, map

假设我有一个 key => number 值的排序哈希，如下所示：

```
h = { "sebastian" => 0.04, "joshua" => 0.1, "alli" => 0.2, "oliver" = >0.2,  
    ... 
    "wendi" => 1.9, "esther" => 2.1, "mauricio" => 2.6, "fred" => 3.9 } 
```

在此哈希中，最小值为 0.04，最大值为 3.9。（在其他散列中，这可能完全不同，例如 3..90、1.5..900 等）

现在我有一个有序数组，如下所示：

```
a = ["lowest", "lower", "low", "normal", "high", "higher", "highest"] 
```

给定散列中的任何一个值，例如 1.9，我如何确定该值落在数组中描述的范围内的哪个位置？

（请原谅这里的 Ruby 和数学新手！）

谢谢！

**更新 1：**

为不清楚的问题道歉。仍在试图弄清楚如何描述这一点。

这是我目前如何解决可能有帮助的问题的概念示例。

```
scores = { "sebastian" => 0.04, "joshua" => 0.1, "alli" => 0.2, "oliver" => 0.2, 
           "wendi" => 1.9, "esther" => 2.1, "mauricio" => 2.6, "fred" => 3.9 }
adjectives = ["lowest", "lower", "low", "average", "high", "higher", "higher"]

scores.each_pair do |student, score|
    adj_idx = case score
        when 3.35..4 then 6
        when 2.8..3.34 then 5
        when 2.25..2.7 then 4
        when 1.7..2.24 then 3
        when 1.15..1.6 then 2
        when 0.6..1.16 then 1
        else 0
    end
    puts "#{student} score was in the #{adjectives[adj_idx]}."
end 
```

**所以我的问题是：**给定一系列可能不同的学生分数（例如，分数可能是 GPA 0.0..4.0，或考试分数 0..110），以及一系列可能也不同的“形容词”（例如，“更高”和“较低”可能会被删除），有没有一种方法可以将分数映射到形容词，而无需像我上面所做的那样“手动”构建每个案例。

再次感谢！

**更新 2：**

感谢你的帮助。我想我已经得到了以下解决方案。关键公式是这样的：

**adj_idx = ( (adjectives.size - 1) * ( (score - min_score).to_f / (max_score - min_score).to_f ) ).round**

```
min_score = scores.values.min
max_score = scores.values.max

scores.each_pair do |student, score|
    adj_idx = ( (adjectives.size - 1) * ((score - min_score).to_f / (max_score - min_score).to_f)  ).round
    puts "#{student} score was in the #{adjectives[adj_idx]} range."
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T09:08:24.747

如果您希望将值范围*线性*划分为大小相等的子范围，这应该可以为您解决问题：

```
min = scores.values.min
max = scores.values.max
nsub = adjectives.size
tresholds = (1..nsub).map do |n|
  min + (max - min) * (n / nsub.to_f)
end

scores.each_pair do |student, score|
  adj_index = tresholds.index {|t| t >= score }
  puts "#{student} score was in the #{adjectives[adj_idx]}."
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T01:28:16.653

您需要自己定义什么是`lowest`等`lower`

```
rankings = {0.04         => 'lowest',
            (0.05..1.00) => 'lower',
            (1.01..1.50) => 'low',
            (1.51..2.50) => 'normal',
            (2.51..2.90) => 'high',
            (2.91..3.89) => 'higher',
            3.90         => 'highest',
           } 
```

然后你可以这样做：

```
puts rankings.detect { |range, ranking| range === h['joshua'] }.last
#=> lower 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T01:17:32.173

您可以定义具有范围的数组：

```
a = [["lowest",(0.01..0.09), ["lower",(0.1..0.9)], ...] 
```

然后遍历您的哈希并分配文字范围：

```
h.each do |key,value|
  literal_range = a.find { |(literal,range)| range.include?(value) }.first
  h[key] = literal_range if literal_range
end 
```

结果将是这样的：

```
{ "sebastian" => 'lowest', "joshua" => 'lower', ... } 
```

这个问题不是很清楚，所以我做了一些猜测，但我认为它会给你一些思考。

# java - 将字符串的特定部分解码和编码为 X'es？

> ID：13337145
> 
> 赞同：0
> 
> 时间：2012-11-12T01:00:21.170
> 
> 标签：java

我必须完成一个标准如下的程序：

*   从*Code*类创建的对象有一个参数：（字符串代码）
*   *Code*类有两个方法：hide(int p1, int p2) 和recover(int p1, int p2)。
*   隐藏将 p1 到 p2 索引范围内的所有字符替换为“XXXX...”
*   恢复会将所有 X 替换为原始文本。

我完全不知道如何处理这个问题。我尝试了多种方法，但我总是过于复杂并让自己感到困惑。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T01:07:26.240

您可以使用[StringBuilder](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuilder.html)类及其方法 replace

# c++ - 将文件读入由类项组成的向量中

> ID：13337146
> 
> 赞同：2
> 
> 时间：2012-11-12T01:00:30.813
> 
> 标签：c++

假设我有一个文件

```
ID  Name    Month   Actual Quantity     Desired Quantity    Cost 
2   pepsi             1                        1                3.3
3   pepsi             2                        3                5.3 
```

我如何将其读入一个名为`vector<Item> items`; 其中 Item 是一个由列表中列出的名称组成的类。我对所有这些都有一个 set() 方法，但是我将如何读取每个值中的一个并将其设置为例如 setID() 及其值，如果它为空，则将值设置为 -1。到目前为止我所拥有的只是一个基本文件打开

```
char file_name[81];
  cout<<"Enter a file to open (ex: file.txt): ";
  cin.ignore();
  flush(stdin);
  cin.getline(file_name, 81);
  ifstream input(file_name); 
```

我应该使用 istringstream 还是什么？

更新：

```
 char file_name[81];
  cout<<"Enter a file to open (ex: file.txt): ";
  cin.ignore();
  cin.getline(file_name, 81);
  ifstream input(file_name);
  string line;
  getline(input,line);
  while (getline(input,line)){ 
```

但是我收到一个错误：语句无法解析行重载函数的地址：`ifstream input(file_name)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T01:05:28.350

我会做的他们的方式是开始编写一个合适的输入运算符：

```
std::istream& operator>> (std::istream& in, Item& item) {
    ...
} 
```

一旦这个操作符就位，你就可以使用如下方式读取文件：

```
std::vector<Item> items;
input.ignore(std::numeric_limits<std::streamsize>::max(), '\n');
std::copy(std::istream_iterator<Item>(input), std::istream_iterator<Item>(),
          std::back_inserter(items)); 
```

# xhtml - XHTML 十六进制颜色要求？

> ID：13337153
> 
> 赞同：0
> 
> 时间：2012-11-12T01:02:06.423
> 
> 标签：xhtml

我最近一直在尝试完全理解 XHTML，我主要了解到事物必须是封闭的、全长的和小写的。我一直都在做这些事情，因为这似乎是一种很好的做法，所以我基本上只需要记住 DOCTYPE 标签。但是，我想知道这些相同的原则是否适用于十六进制颜色。例如，`#fff`可以接受三字符代码，例如 吗？大写代码，例如`#FBACFF`，会违反“无大写`<TAG>`”规则吗？对我来说，使用 6 个字符的大写似乎更干净，但这是否符合 XHTML？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T01:04:56.963

颜色，正如您在问题中表示的那样，是属性*值*，不是标签，不是元素，不是属性名称，因此它们的大写（或缺少大写）与 XHTML 文档的有效性无关。您可以在这里自由地代表您喜欢的颜色。

# node.js - Mongoose - (MongoDB) 中不同集合的相同模式

> ID：13337155
> 
> 赞同：18
> 
> 时间：2012-11-12T01:02:19.187
> 
> 标签：node.js, mongodb, mongoose

我正在创建一个应用程序（Express+MongoDB+Mongoose），其中文档自然地按组聚集。对数据库的每个查询只需要访问单个组中的文档。所以我认为为了性能起见，将每个组分成自己的集合是个好主意。

现在，我将为这些集合中的每一个使用相同的模式，因为它们将存储相同类型的文档。我曾经有一个 Model 对象，因为我曾经将所有东西都放在一个集合中，但现在我需要多个 Model，每组一个。

在每个请求（使用共享模式）上创建一个新的模型对象是个好主意还是这太昂贵了？在这种情况下，什么是好的架构决策？

我能想到的最好方法是在第一次有集合请求时创建一个模型，然后将模型缓存在字典中以便快速访问。

我想最好的方法取决于为每个请求创建一个新模型对象的成本。

谢谢！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-12T01:31:42.107

Mongoose 已经缓存了模型，您可以将相同的模式对象用于多个模型/集合。因此，只需使用如下代码（在启动时）创建您的模型集：

```
var mongoose = require('mongoose');
var Schema = mongoose.Schema;
var schema = new Schema({...});
var model1 = mongoose.model('model1', schema);
var model2 = mongoose.model('model2', schema); 
```

如果您不想传递`model1`,模型实例，您可以根据需要通过调用处理程序`model2`来查找它们。`mongoose.model('model1');`

# templates - joomla 2.5 修改后端组件

> ID：13337156
> 
> 赞同：2
> 
> 时间：2012-11-12T01:02:40.093
> 
> 标签：templates, joomla, overriding, custom-backend

我想做下一件事：

我正在开发一个 Joomla 网站，该网站具有显示一些图像的背景。

我想要的是根据显示的网站部分显示不同的图像，例如：

主页：../images/img1.jpg ../images/img2.jpg

关于我们：../images/img3.jpg ../images/img4.jpg

我想在后端的“编辑菜单项”布局上使用某种覆盖来添加一些新字段，在其中选择我希望该部分显示的图片，然后在模板上将这些文件输出为 HTML。

有没有办法做到这一点？

或者也许有更简单的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T02:46:49.413

这不是您应该使用 Joomla 编写代码的东西，因为有多种方法可以使用模板样式变体（在 2.5+ 中）或各种扩展来执行此操作。

多年来，当我们需要一个简单的解决方案并且它适用于 1.5->2.5 时，我们使用了“[菜单依赖项”扩展。](http://extensions.joomla.org/extensions/style-a-design/templating/5465)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T01:40:40.170

如果我明白你的问题

```
<?php
$menu = &JSite::getMenu();
$menuItem = $menu->getActive();

print_r($menuItem);
?> 
```

根据您所在的菜单，您可以输出 CSS。如果您有任何问题，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T04:52:06.367

我同意使用模板样式。

复制您的模板并将背景图像的新参数添加到 template.xml。然后添加代码以将图像插入到模板的 index.php 中。

然后为您要使用的每个图像制作一个样式。

将适当的样式分配给适当的菜单项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T05:38:20.280

这可能对你有帮助......

首先，您必须在`administrator/components/com_menus/models/forms/item.xml`

**例子**

```
<field name="your_fieldname" type="media"
                label="fieldname"
                description="Give your field description" /> 
```

将此行添加到`administrator/components/com_menus/views/item/tmpl/edit.php`

```
<li><?php echo $this->form->getLabel('your_fieldname'); ?>
<?php echo $this->form->getInput('your_fieldname'); ?></li> 
```

添加一个字段`yourtableprefix_menu`，字段名称必须是您的字段名称。

**添加**

在文件中`includes/menu.php`，函数 load()

在以下行中添加您的字段名

```
$query->select('m.id, m.menutype, m.title, m.alias, m.path AS route, m.link, m.type, m.level, m.language,m.our_image'); 
```

我被添加了`m.our_image`，像这样你可以添加你的字段名

在`index.php`文件中

```
$menu = &JSite::getMenu();
$menuItem = $menu->getActive();
print_r($menuItem); 
echo $menuItem->your_fieldname; //for get the particular value 
```

# javascript - 如何使用 history.pushstate 中的第一个参数

> ID：13337157
> 
> 赞同：4
> 
> 时间：2012-11-12T01:02:43.597
> 
> 标签：javascript, html5-history

在阅读[https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)并玩弄 history.api 之后，我想知道如何在

```
history.pushState(stateObj, title, url); 
```

我知道 stateObj 是一个 js 对象，所以是这样的：

```
{
  par1 : 'par1',
  par2 : 2
} 
```

但是我必须如何使用它？什么方法让我有可能在以后检索这个对象。

我也知道现在不使用标题，我必须使用自己的 javascript 方法来更改页面的标题。我对吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T01:07:11.340

这非常简单：您所要做的就是：

```
history.pushState({
  par1 : 'par1',
  par2 : 2
}, '', 'url'); 
```

要得到这个对象，你必须做

```
var tmp = history.state; 
```

tmp 将等于

```
{
    par1 : 'par1',
    par2 : 2
} 
```

关于第二个问题。据我所知 - 你是对的。例如，您可以在该对象中发送您的标题，这是您在第一个问题中提出的问题。

# javascript - 将正则表达式替换匹配传递给函数

> ID：13337161
> 
> 赞同：0
> 
> 时间：2012-11-12T01:03:42.553
> 
> 标签：javascript

我想添加一个带有类的跨度标签，以在与正则表达式匹配的字符串中的内容周围使用 css 进行样式设置，并且在一组接受的值中。

例如，`/fo./`我想变成`barfoobarfoafoc`一个正则表达式

```
bar<span class = "stylename">foo</span>bar<span class = "stylename">foa</span>foc 
```

如果 foo 和 foa 都在接受的字符串集中，但 foc 不在。

我玩过 String.replace()，但我找不到将匹配的内容放入验证函数的方法所以我尝试了：

```
output = output.replace(/fo./g,isAcceptedValue("$&")); 
```

但是传递给replace的参数只是“$&”而不是匹配的字符串。这可能并不令人惊讶。有没有办法使用替换功能来做到这一点？还是我必须手动获取每个正则表达式返回并从匹配开始替换子字符串以及所有这些？我希望在替换期间有一种方法可以做到这一点，这样代码就可以清楚地知道它在做什么，而且我不必处理计算子字符串。

# algorithm - 在最大堆中查找元素

> ID：13337162
> 
> 赞同：2
> 
> 时间：2012-11-12T01:03:52.843
> 
> 标签：algorithm, data-structures, max-heap

我有一个使用数组存储元素的 MaxPQ 堆。我可以使用什么算法在堆中查找给定元素？我当前使用的算法从索引 1 开始遍历数组，直到添加到堆中的元素数。该算法的复杂度为 O(N)，是否有复杂度为 O(logN) 的算法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T01:21:48.313

如果您*只有*一个表示堆（最小值或最大值）的数组，那么恐怕找不到最坏情况的对数算法，因为从树的顶部开始您将无法分辨一般要搜索哪个子树。如果您的根是 100，它的子节点是 90 和 80，而您正在寻找 5，那么您必须（通常）探索这两条路径。

现在，如果您保留一个辅助数据结构来跟踪您的键数组中的位置，您*可以*进行恒定时间查找。[我在http://eclipse.wells.edu/badams/courses/cs322/notes/topics/tools/heap.html](http://eclipse.wells.edu/badams/courses/cs322/notes/topics/tools/heap.html)找到了以下描述

> 要查找任意元素，它有助于维护一个附加数组，该数组由节点名称索引并由它们在堆中的位置（指针或索引号）作为键。这使得任意节点的查找在恒定时间内工作，并且维护数组中的数据只需要每个冒泡操作的固定步数，因此不会改变 heapify up 或 down 的渐近时间。

同样，仅考虑堆，您的最坏情况将是线性的，尽管如果您遍历堆并进行一些修剪，您可能会在实践中获得一点加速。

# php - 带有 PHP 变量的 MySQL 查询

> ID：13337163
> 
> 赞同：-2
> 
> 时间：2012-11-12T01:03:54.523
> 
> 标签：php, mysql

```
A)$getDetails = mysql_query("SELECT * FROM `OnlineRequests` WHERE `OSR_CODE`='".$code."'");

B)$getDetails = mysql_query("SELECT * FROM `OnlineRequests` WHERE `OSR_CODE`='oooqhqxrcglm3jn6xd2lseq43nb3cq'"); 
```

这是PHP。B 有效，但 A 无效。为什么？语法错误？我觉得我已经尝试了所有可能的...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T01:09:57.690

当我执行我不使用的 MySQL 查询时，我`OSR_CODE=".$random_variable."` 只`OSR_CODE='$random_variable'`使用与包含引号相对的引号，看看是否有效。只是一个建议，对我有用。

编辑：尝试`$getDetails = mysql_query("SELECT * FROM`OnlineRequests `WHERE`OSR_CODE `='.$code.'");` ??

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-12T01:08:39.253

要使 A 起作用，请使用

```
$getDetails = mysql_query("SELECT * FROM `OnlineRequests` WHERE `OSR_CODE`=\"$code\""); 
```

问题是单引号。

# actionscript-3 - Flash CS5旋转动画？

> ID：13337166
> 
> 赞同：0
> 
> 时间：2012-11-12T01:04:04.100
> 
> 标签：actionscript-3, rotation, movieclip, flash-cs5, tween

谁能告诉我如何在 Flash CS5 中为对象进行旋转补间？我有一个图像，我设置了注册点，我希望它沿着注册点旋转。我在第 50 帧左右创建了一个关键帧，将对象旋转 180 度，然后单击“创建补间动画”。然后我使用 AS3 首先使用“mc.stop()”停止补间，然后在单击按钮时使用“mc.play()”开始播放。但是，根本没有动画。它所做的只是 49 帧什么都不做，然后在第 50 帧它闪烁到旋转 1/24 秒...?? 旋转补间与过渡补间的工作方式是否不同（从 A 点移动到 B 点）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T03:33:54.643

1.  在第 50 帧处插入帧

    ![插入框架](../Images/a9fcf7ace666d214da8fc3de29b1f0c2.png)

2.  放置符号

    ![地方符号](../Images/dca9db9dbcef33bb8a37c47c9f6b09ff.png)

3.  在时间轴上创建补间动画

    ![创建补间动画](../Images/a3728e91c7688a4f2d60df2b8cfc093d.png)

4.  将播放头前进到第 50 帧并将符号定位到所需的结束旋转

    ![位置符号](../Images/0a4240f1d4a4a9a896df7776374afe4f.png)

5.  擦洗时间轴上的播放头，观察每一帧动画的步骤

    ![擦洗播放头](../Images/1e0d4387c869d132943b7559428091f1.png)

6.  要在按下按钮时进行补间，请添加一个动作层和一个带有按钮的层

    ![层数](../Images/42d6b8477390ecc2bf5ca4df00bc0e64.png)

7.  如果按钮的实例名称为`button`，请在操作中输入以下代码

    ```
    import flash.events.MouseEvent;

    stop();

    button.addEventListener(MouseEvent.CLICK, buttonClickHandler);

    function buttonClickHandler(event:MouseEvent):void
    {
        play();
    } 
    ```

现在，按下按钮后，补间播放一次。

# java - 如何储存 在java中以排序形式配对

> ID：13337167
> 
> 赞同：1
> 
> 时间：2012-11-12T01:04:26.393
> 
> 标签：java

我想以形式存储 200 对。无论如何我可以在插入时根据值对它们进行排序吗？无论如何这可以在java中完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T01:11:49.207

普通的 HashMap 是无序的，不能排序。

此外，据我所知，没有一种数据结构能够根据不再存在的对象状态进行排序。

您需要做的是创建第二个数据结构，以根据插入时的值按顺序保存值。（甚至假设在插入阶段没有更改任何值......因为如果它们是你将根本无法订购它们。）

或者，您可以将 HashMap 的值集提取到列表中，然后对其进行排序。但是（显然）您不能根据不再存在的状态对值进行排序。

* * *

另外：您的数据结构要求接近于描述“棘手”的问题；即不存在合理解决方案的一种。这可能是因为您错误地陈述了它们，或者它们可能是真实的。无论哪种方式，这可能表明您需要重新考虑您在此处尝试解决的更大问题的整个方法。

# php - 使用 Li3 为 MongoDB 设置安全 => 'majority'

> ID：13337169
> 
> 赞同：2
> 
> 时间：2012-11-12T01:04:31.673
> 
> 标签：php, mongodb, lithium

我正在使用 PHP 锂框架。有没有办法通过配置设置安全 => '多数'。

我正在使用 mongodb 复制，并希望确保在驱动程序返回成功之前将数据写入大多数副本集成员。

我正在使用 PHP 5.3 和 MongoDB 2.2.x

谢谢高塔姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T06:28:17.550

这不是您问题的直接答案，但您可以在数据库中设置默认行为。

```
 cfg = rs.conf()
 cfg.settings = {}
 cfg.settings.getLastErrorDefaults = {w: "majority", j: true}
 rs.reconfig(cfg) 
```

在 Lithium 中，您应该可以使用过滤器来做到这一点：

```
 Connections::get('default')->applyFilter(array('create', 'update', 'delete'), function($self, $params, $chain){
     $params['options']['safe'] = true;
      return $chain->next($self, $params, $chain);
}); 
```

或者直接在查询中：

```
if (MyModel::update($query, $conditions, array(‘safe’ => true))) {
    // success
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T15:31:03.997

我们对此有一个[开放的拉取请求](https://github.com/UnionOfRAD/lithium/pull/670)，可让您添加`'safe' => true`到您的数据库配置中。很快就会合并。

否则，Nils 发布的解决方案应该会很好用。

# c++ - 确定 PyObject* 是否为 PyLongDoubleScalarObject (numpy)

> ID：13337173
> 
> 赞同：3
> 
> 时间：2012-11-12T01:05:26.167
> 
> 标签：c++, python, numpy, boost-python

给定`PyObject*`C++ 中的 a 如何确定它是否是`PyLongDoubleScalarObject`?

`PyLongDoubleScalarObject`是对应的 numpy 类来存储 128 位浮点数 ( `long double`)，定义在`numpy/arrayscalars.h`.

using`dynamic_cast`不能作为`PyObject*`非多态的。当我查看如何执行与 for 相对应的操作时`dynamic_cast`，`PyObject`我大多会找到使用诸如 之类的函数的提示`PyLong_Check`，但我没有找到类似`PyLongDouble_Check`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T02:58:42.720

`isinstance`等效于 Python函数的 C API是`PyObject_TypeCheck`，因此您可以执行以下操作：

```
if (PyObject_TypeCheck(obj, typeobject)) {
     /* obj matches the given type */
} 
```

或者，如果要检查对象的确切类型而不接受子类型，则可以直接检查类型：

```
if (Py_TYPE(obj) == typeobject) {
    /* obj is an instance of the given type and not a subclass */
} 
```

请注意，您需要在 Python 级别传递表示类型的对象，而不是定义实例布局的 C 结构。查看 numpy 标头，看起来您所追求的类型对象可能是`&PyLongDoubleArrType_Type`.

# python - Tkinter 画布对同一图像表现不同

> ID：13337179
> 
> 赞同：0
> 
> 时间：2012-11-12T01:06:01.787
> 
> 标签：python, tkinter

我有这段代码可以显示两个画布内一个文件中的两个图像。由于某种原因，第一张图片没有填满整个画布，右侧和底部大约有 3 个像素的空间。但是第二张图片很好地填满了它的画布。我使用非常相似的代码来显示这两个图像。这是代码 -

```
 self.frame1=Frame(self.root,width=self.width,height=self.height)
    self.frame1.grid(row=0,column=0,rowspan=10,padx=20)
    self.canvas1=Canvas(self.frame1,bg='LIGHT GREY',width=self.width,height=self.height)        
    self.canvas1.pack(side=LEFT,expand=True,fill=BOTH,padx=0,pady=0)
    self.tkpi = ImageTk.PhotoImage(self.imageorg)
    self.label_imageorg = self.canvas1.create_image(0,0,image=self.tkpi,anchor=NW)

    self.frame=Frame(self.root,width=self.width,height=self.height)
    self.frame.grid(row=0,column=1,rowspan=10)
    self.canvas2=Canvas(self.frame,bg='#FFFFFF',width=self.width,height=self.height,\
        scrollregion=(0,0,self.width,self.height))
    self.vbar=Scrollbar(self.frame,orient=VERTICAL)
    self.vbar.pack(side=RIGHT,fill=Y)
    self.vbar.config(command=self.canvas2.yview)
    self.canvas2.config(yscrollcommand=self.vbar.set)
    self.canvas2.pack(side=LEFT,expand=True,fill=BOTH)
    self.tkpi2 = ImageTk.PhotoImage(self.history[0])
    self.label_imagemod = self.canvas2.create_image(0,0,image=self.tkpi2,anchor=NW) 
```

为什么可能是它的原因？有人知道吗？PS：self.history[0] 只是 self.imageorg 的一个副本。（用PIL复制方法复制）

# linux - 奥术 Emacs 问题

> ID：13337181
> 
> 赞同：3
> 
> 时间：2012-11-12T01:06:18.987
> 
> 标签：linux, emacs, editor

我的 emacs 设置有一些问题。我还是个新手，但这些东西似乎比平常更神秘。我用

1.  tmux 1.3-1
2.  在 bash 4.1.5(1)-release
3.  在 Linux 上，ubuntu 2.6.35-22-generic
4.  在 vmware 来宾（VMWare Fusion，版本 5.0.1 (825449)）中。

而且我发现这些命令根本没有接受我设置的 emacs。

*   `C-a`：不会带我到行首吗？
*   `C-M-S-v`：向下导航其他窗口；你如何向上导航其他窗口？
*   `C-x``r``y`：这不会选择视觉块（或矩形，在 emacs 中）

我也在尝试配置这些，但似乎无处可去。

*   减少线条高亮
*   输入长行时没有硬换行（自动换行）

我的**~/.emacs.d/init.el**非常简单。

 ````
(require 'package)
(add-to-list 'package-archives
             '("marmalade" . "http://marmalade-repo.org/packages/"))
(package-initialize) 
```

任何见解表示赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T07:29:27.720

*   `C-a`：不会带我到行首吗？

您可能正在运行内部`screen`或其他可能需要`C-a`. 如果`C-a`在同一终端会话中运行的 bash 中也无法工作，那就是你的问题。如果没有，请键入`C-h c C-a`以查看 Emacs 如何解释`C-a`. 要解决它，要么绑定`move-beginning-of-line`到 Emacs 中的不同键，要么将终端多路复用器的命令键重新绑定到`C-a`.

*   `C-M-S-v`：向下导航其他窗口；你如何向上导航其他窗口？

通常`C-M-v`绑定到`scroll-other-window`和`C-M-S-v`到`scroll-other-window-down`（在 Emacs 命令名称中滚动“向下”和“向上”的含义有些违反直觉）。在终端下，无法区分控制键和移动控制键，因此您`C-M-S-v`可能会调用与 , 相同的`C-M-v`命令`scroll-other-window`。同样，这很容易使用`C-h c`.

*   `C-x r y`：这不会选择视觉块（或矩形，在 emacs 中）

`C-x r y` [将最后一个被杀死的矩形拉入缓冲区](http://www.gnu.org/software/emacs/manual/html_node/emacs/Rectangles.html)，它与选择的外观无关。

*   输入长行时没有硬换行（自动换行）

要禁用换行，请添加`(setq-default truncate-lines t)`到您的 init 文件中。`

# c - 为什么 gcc4 不展开这个循环？

> ID：13337182
> 
> 赞同：1
> 
> 时间：2012-11-12T01:06:24.513
> 
> 标签：c, optimization, gcc, gcc4, loop-unrolling

在`gcc 4.4.6`文档中指出：

> ```
> -funroll-all-loops:
> Unroll all loops, even if their number of iterations is uncertain 
> when the loop isentered. 
> ```

我正在编译这段代码：

```
int unroll(){
  int i = 0;
  int array[1000];
  do {
    use(i,array);
    i++;
  }while(i<1000);
  return(0);
}

void use(int i, int *array){
   int x = i*5;
   array[i] = x;
} 
```

...一次有`funroll-all-loops`优化，一次没有：

```
OPT = -funroll-all-loops
NOOPT = -O0 
```

然后我`diff`用来比较每个的汇编代码（使用生成`-S -fverbose-asm`）。

生成的代码是相同的。

尝试将循环更改为 a `do while`; 调整循环计数器（最多 100 个）；更改循环体内的语句。

我会错过什么？为什么这个循环没有展开？

**更新**

[Nikos C](https://stackoverflow.com/users/856199/nikos-c)`--param max-unroll-times=N`建议使用其中 N 是上限来提高循环注册参数。虽然这是一个明智的建议，但它并没有改变行为。我还将循环迭代降低到只有 10 次。还更新了代码以实际“做”某事，没有任何变化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T02:02:20.303

因为您在“OPT”案例中禁用了所有其他优化，所以您告诉编译器展开所有循环，然后拒绝他这样做的方法，例如循环归纳等。尝试

```
NOOPT = -O2
OPT = -O2 -funroll-all-loops 
```

如果我翻译片段（稍微更改为外部函数以避免任何内联和死代码消除）

```
void use(int i, int *array);

int unroll(){
  int i = 0;
  int array[1000];
  do {
    use(i,array);
    i++;
  }while(i<1000);
  return(0);
} 
```

，`gcc -O2 -funroll-all-loops test.c -o test2.o -c`生成的目标代码展开八次：

```
 0000000000000000 <unroll>:
  0:   53                      push   %rbx
  1:   31 db                   xor    %ebx,%ebx
  3:   48 81 ec a0 0f 00 00    sub    $0xfa0,%rsp
  a:   66 0f 1f 44 00 00       nopw   0x0(%rax,%rax,1)
  10:   89 df                   mov    %ebx,%edi
  12:   48 89 e6                mov    %rsp,%rsi
  15:   e8 00 00 00 00          callq  1a <unroll+0x1a>
  1a:   8d 7b 01                lea    0x1(%rbx),%edi
  1d:   48 89 e6                mov    %rsp,%rsi
  20:   e8 00 00 00 00          callq  25 <unroll+0x25>
  25:   8d 7b 02                lea    0x2(%rbx),%edi
  28:   48 89 e6                mov    %rsp,%rsi
  2b:   e8 00 00 00 00          callq  30 <unroll+0x30>
  30:   8d 7b 03                lea    0x3(%rbx),%edi
  33:   48 89 e6                mov    %rsp,%rsi
  36:   e8 00 00 00 00          callq  3b <unroll+0x3b>
  3b:   8d 7b 04                lea    0x4(%rbx),%edi
  3e:   48 89 e6                mov    %rsp,%rsi
  41:   e8 00 00 00 00          callq  46 <unroll+0x46>
  46:   8d 7b 05                lea    0x5(%rbx),%edi
  49:   48 89 e6                mov    %rsp,%rsi
  4c:   e8 00 00 00 00          callq  51 <unroll+0x51>
  51:   8d 7b 06                lea    0x6(%rbx),%edi
  54:   48 89 e6                mov    %rsp,%rsi
  57:   e8 00 00 00 00          callq  5c <unroll+0x5c>
  5c:   8d 7b 07                lea    0x7(%rbx),%edi
  5f:   48 89 e6                mov    %rsp,%rsi
  62:   83 c3 08                add    $0x8,%ebx
  65:   e8 00 00 00 00          callq  6a <unroll+0x6a>
  6a:   81 fb e8 03 00 00       cmp    $0x3e8,%ebx
  70:   75 9e                   jne    10 <unroll+0x10>
  72:   48 81 c4 a0 0f 00 00    add    $0xfa0,%rsp
  79:   31 c0                   xor    %eax,%eax
  7b:   5b                      pop    %rbx
  7c:   c3                      retq 
```

# ruby-on-rails-3 - 使用 Poltergeist PhantomJS Capybara 驱动程序设置 Cookie

> ID：13337183
> 
> 赞同：2
> 
> 时间：2012-11-12T01:06:38.983
> 
> 标签：ruby-on-rails-3, cookies, capybara, phantomjs, poltergeist

我在尝试使用 Poltergeist gem 设置 cookie 时遇到了问题，并且通过阅读 Poltergeist gem 上的已关闭问题，这似乎是我的用户错误问题，但我现在已经花了一整天的时间来尝试正确设置cookie，我似乎无法正确设置。

注意：此测试在 selenium 中运行良好，但由于 selenium 的运行时间问题，我想使用 poltergeist。

我正在处理的应用程序正在使用“_location”cookie 来确定一些整体设置，并且我需要在我第一次访问应用程序中的任何页面时访问该 cookie。否则，我会收到一个 javascript 错误，以查找由于未设置位置而未设置的值。

[Poltergeist gem 的自述文件](https://github.com/jonleighton/poltergeist)显示了 cookie 的以下用法

操作 cookie

以下方法用于检查和操作 cookie：

`page.driver.cookies`- 当前页面可访问的 cookie 哈希。键是 cookie 名称。这些值是 Cookie 对象，具有以下方法：`name`, `value`, `domain`, `path`, `secure?`, `httponly?`, `expires`.

`page.driver.set_cookie(name, value, options = {})`- 设置一个cookie。选项哈希可以采用以下键：`:domain`, `:path`, `:secure`, `:httponly`, `:expires`. `:expires`应该是一个时间对象。

`page.driver.remove_cookie(name)`- 删除 cookie

-- 规格/spec_helper.rb

```
Capybara.register_driver :poltergeist do |app|
  Capybara::Poltergeist::Driver.new(app, :debug => true)
end

Capybara.javascript_driver = :poltergeist 
```

--views/admin/article/new.html.haml

```
= link_to_function "test js", '$(this).html("js works")' 
```

-- 规格/请求/article_products_spec.rb

```
require 'spec_helper'

describe "Associating Articles with Products and Product Categories" do

  before (:all) do
    @user = create(:user, role: "admin")
    5.times { create(:product_category) }
    @product_categories = ProductCategory.all
    @product_categories.each do |pc|
      4.times { create(:product, product_category: pc) }
    end
  end

  before (:each) do
    visit new_user_session_path
    page.driver.set_cookie("_location", "US")
    page.driver.cookies
    fill_in "Username Or Email", with: @user.email
    fill_in "Password", with: @user.password
    click_button "Sign In"
    visit new_admin_article_path
  end

  it "supports js", :js => true do
    click_link "test js"
    page.should have_content("js works")
  end

end 
```

测试响应

```
{"name"=>"visit", "args"=>["http://127.0.0.1:64554/users/sign_in"]}
{"error"=>{"name"=>"Poltergeist.JavascriptError", "args"=>[[{"message"=>"TypeError: 'null' is not an object (evaluating 'response.custentitydefault_shipping_location')", "stack"=>"TypeError: 'null' is not an object (evaluating 'response.custentitydefault_shipping_location')\n    at http://127.0.0.1:64554/assets/non_deferred.js:12338\n    at http://127.0.0.1:64554/assets/non_deferred.js:1076\n    at http://127.0.0.1:64554/assets/non_deferred.js:1194\n    at http://127.0.0.1:64554/assets/non_deferred.js:7539 in done\n    at http://127.0.0.1:64554/assets/non_deferred.js:8325"}]]}}
{"name"=>"reset", "args"=>[]}
{"response"=>true}
F

Failures:

  1) Associating Articles with Products and Product Categories supports js
     Failure/Error: visit new_user_session_path
     Capybara::Poltergeist::JavascriptError:
       One or more errors were raised in the Javascript code on the page:

       TypeError: 'null' is not an object (evaluating 'response.custentitydefault_shipping_location')
           at http://127.0.0.1:64554/assets/non_deferred.js:12338
           at http://127.0.0.1:64554/assets/non_deferred.js:1076
           at http://127.0.0.1:64554/assets/non_deferred.js:1194
           at http://127.0.0.1:64554/assets/non_deferred.js:7539 in done
           at http://127.0.0.1:64554/assets/non_deferred.js:8325
     # ./spec/requests/article_products_spec.rb:15:in `block (2 levels) in <top (required)>'
     # ./spec/support/vcr.rb:14:in `block (2 levels) in <top (required)>' 
```

由于这个失败，我想也许我应该在访问页面之前设置 cookie，但是当我在 Capybara 脚本中使用“访问”之前使用 page.driver.set_cookie 命令时，它实际上并没有设置任何东西. 从这个修改后的代码块和这个结果集可以看出。

-- 规格/请求/article_products_spec.rb

```
describe "Associating Articles with Products and Product Categories" do

  before (:all) do
    @user = create(:user, role: "admin")
    5.times { create(:product_category) }
    @product_categories = ProductCategory.all
    @product_categories.each do |pc|
      4.times { create(:product, product_category: pc) }
    end
  end

  before (:each) do
    page.driver.set_cookie("_location", "US")
    page.driver.cookies
    visit new_user_session_path
    fill_in "Username Or Email", with: @user.email
    fill_in "Password", with: @user.password
    click_button "Sign In"
    visit new_admin_article_path
  end

  it "supports js", :js => true do
    click_link "test js"
    page.should have_content("js works")
  end
end 
```

测试响应

```
{"name"=>"set_cookie", "args"=>[{:name=>"_location", :value=>"US", :domain=>"127.0.0.1"}]}
{"response"=>true}
{"name"=>"cookies", "args"=>[]}
{"response"=>[]}
{"name"=>"visit", "args"=>["http://127.0.0.1:64090/users/sign_in"]}
{"error"=>{"name"=>"Poltergeist.JavascriptError", "args"=>[[{"message"=>"TypeError: 'null' is not an object (evaluating 'response.custentitydefault_shipping_location')", "stack"=>"TypeError: 'null' is not an object (evaluating 'response.custentitydefault_shipping_location')\n    at http://127.0.0.1:64090/assets/non_deferred.js:12338\n    at http://127.0.0.1:64090/assets/non_deferred.js:1076\n    at http://127.0.0.1:64090/assets/non_deferred.js:1194\n    at http://127.0.0.1:64090/assets/non_deferred.js:7539 in done\n    at http://127.0.0.1:64090/assets/non_deferred.js:8325"}]]}}
{"name"=>"reset", "args"=>[]}
{"response"=>true}
F

Failures:

  1) Associating Articles with Products and Product Categories supports js
     Failure/Error: visit new_user_session_path
     Capybara::Poltergeist::JavascriptError:
       One or more errors were raised in the Javascript code on the page:

       TypeError: 'null' is not an object (evaluating 'response.custentitydefault_shipping_location')
           at http://127.0.0.1:64554/assets/non_deferred.js:12338
           at http://127.0.0.1:64554/assets/non_deferred.js:1076
           at http://127.0.0.1:64554/assets/non_deferred.js:1194
           at http://127.0.0.1:64554/assets/non_deferred.js:7539 in done
           at http://127.0.0.1:64554/assets/non_deferred.js:8325
     # ./spec/requests/article_products_spec.rb:15:in `block (2 levels) in <top (required)>'
     # ./spec/support/vcr.rb:14:in `block (2 levels) in <top (required)>' 
```

我还尝试使用外部 cookie 文件将 phantomjs_options 块传递给 poltergeist 驱动程序。这实际上似乎让我走得更远，但我最终得到了一个空 cookie_jar。您可以在下面看到此尝试：

--spec/spec_helper.rb

```
 Capybara.register_driver :poltergeist do |app|
    Capybara::Poltergeist::Driver.new(app, [phantomjs_options: [--cookies-file="#{::Rails.root}/spec/requests/cookies.txt"]] )
  end

  Capybara.javascript_driver = :poltergeist 
```

--cookies.txt

```
phantom.addCookie({
    'name':     '_location',
    'value':    'US',
    'domain':   'localhost',
    'expires':  (new Date()).getTime() + 3600
}); 
```

测试响应 F

```
Failures:

  1) Associating Articles with Products and Product Categories supports js
     Failure/Error: visit new_user_session_path
     NoMethodError:
       undefined method `cookie_jar' for nil:NilClass
     # ./spec/requests/article_products_spec.rb:15:in `block (2 levels) in <top (required)>'
     # ./spec/support/vcr.rb:14:in `block (2 levels) in <top (required)>'

Finished in 2.42 seconds
1 example, 1 failure 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-12T16:59:50.043

我相信您为 Poltergeist 指定选项的尝试与 PhantomJS 的选项混淆了。您的注册块应如下所示：

```
Capybara.register_driver :poltergeist do |app|
  Capybara::Poltergeist::Driver.new(app, :phantomjs_options => ["--cookies-file=#{::Rails.root}/spec/requests/cookies.txt"])
end 
```

希望有帮助。

# joomla - Joomla 2.5！无法使用类别字段

> ID：13337186
> 
> 赞同：0
> 
> 时间：2012-11-12T01:06:41.987
> 
> 标签：joomla, field, joomla2.5, categories, joomla-extensions

我正在开发一个组件，我想添加一个字段来选择一个类别。我按照本教程[添加类别](http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Adding_categories)：

```
<field
        name="catid"
        type="category"
        extension="com_mycom"
        class="inputbox"
        default=""
        label="JCATEGORY" 
        description="JFIELD_CATEGORY_DESC"
        required="true"
/> 
```

但我只得到一个空列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T08:28:22.970

它看起来是正确的，但是您是否添加了任何类别？

这是您可以在几分钟内使用 Joomla 组件创建器 BTW 构建的东西。[http://www.notwebdesign.com/joomla-component-creator/](http://www.notwebdesign.com/joomla-component-creator/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T14:11:08.670

您的代码完全没有问题。但是，如果您指的是 Joomla 文章所属的类别，那么您需要更改`extension="com_mycom"`为`extension="com_content"`

# android - 如何从 Google Play 音乐访问媒体？

> ID：13337191
> 
> 赞同：2
> 
> 时间：2012-11-12T01:07:26.487
> 
> 标签：android, android-contentprovider

**我使用内容提供者 URI content://com.google.android.music.MusicContent/audio**和以下代码获取条目列表（在设备上和离线） ：

```
String[] proj = { MediaStore.Audio.AudioColumns.TITLE, MediaStore.Audio.Media.ARTIST, MediaStore.Audio.Media._ID };
Uri gMusicUri = Uri.parse("content://com.google.android.music.MusicContent/audio");
Ln.d("onCreate(): XX gMusicUri = %s", gMusicUri);
Cursor cursor = getApplicationContext().getContentResolver().query(gMusicUri, proj, null, null, null);
if (cursor == null) {
    // query failed, handle error.
    Ln.w("onCreate(): XX cursor is null, query failed");
} else if (!cursor.moveToFirst()) {
    // no media on the device
    Ln.w("onCreate(): XX cursor cannot move to 1st element, no media on device");
} else {
    int idColumn = cursor.getColumnIndex(MediaStore.Audio.Media._ID);
    int titleColumn = cursor.getColumnIndex(MediaStore.Audio.Media.TITLE);
    int artistColumn = cursor.getColumnIndex(MediaStore.Audio.Media.ARTIST);
    do {
       long id = cursor.getLong(idColumn);
       String title = cursor.getString(titleColumn);
       String artist = cursor.getString(artistColumn);
       // ...process entry...
        Ln.i("onCreate(): XX id = %d, title = %s, artist = %s", id, title, artist);
    } while (cursor.moveToNext());
}
cursor.close(); 
```

我需要流媒体，想知道这是否可能？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T23:00:51.053

我的[非官方 Google Music api](https://github.com/simon-weber/Unofficial-Google-Music-API)通过使用与网站相同的调用来做到这一点：目前，这是`https://play.google.com/music/play`. `songid`是相关参数。响应模式在[这里](https://github.com/simon-weber/Unofficial-Google-Music-API/blob/26f6efb193aec4ff3fdf1f26c705eff3e1b3c303/gmusicapi/protocol.py#L647)。

如果您使用的是 Android，则可以通过使用`AccountManager`Google 音乐`sj`服务来简化身份验证过程。

这是另一种可能更简单的方法：[http](http://dpogue.ca/gmusic.html) ://dpogue.ca/gmusic.html 。我没有写这个，所以我不确定它是否是最新的。

如果您最终弄清楚如何从该 uri 流式传输，请创建一个答案 - 我很想知道！

# java - 模拟器上的 Android SD 卡写入失败并出现 IOException EROFS（只读文件系统），具有正确的权限

> ID：13337196
> 
> 赞同：2
> 
> 时间：2012-11-12T01:08:01.420
> 
> 标签：java, android, android-emulator, sd-card

我的 android 应用程序无法将文件写入 AVD 的 SD 卡，代码如下：

```
 File root = Environment.getExternalStorageDirectory();

    Log.w("sdcard", "root.canWrite() = " + root.canWrite());

    try {           
        File myFile = new File(root + File.pathSeparator + "mysdfile.txt");
        myFile.createNewFile();
        FileOutputStream fOut = new FileOutputStream(myFile);
        OutputStreamWriter myOutWriter = new OutputStreamWriter(fOut);
        myOutWriter.append("testing testing 123");
        myOutWriter.close();
        fOut.close();
    } catch (IOException e) {
        Log.w("ExternalStorage", "Error writing", e);
    } 
```

`root.canWrite()`返回 true，则引发此异常：

```
java.io.IOException: open failed: EROFS (Read-only file system) 
```

清单文件具有 WRITE_EXTERNAL_STORAGE 权限（清单的直接子级）：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

我还尝试使用以下方法在 AVD shell 中重新安装 SD 卡：

```
mount -o remount rw /mnt/sdcard 
```

……但无济于事。AVD 还设置了“SD 卡支持”标志。不知道从这里做什么，有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T06:02:54.283

从 Honeycomb 开始，Android 设备默认不允许第三方应用写入外部可移动存储。您可以通过启动 adb shell 来检查这一点，转到 /system/etc/permissions/platform.xml，然后查找以下行：

```
<permission name="android.permission.WRITE_EXTERNAL_STORAGE" >
    <group gid="sdcard_rw" />
</permission> 
```

第三方应用程序不属于“sdcard_rw”组，而是属于“media_rw”。如果您的手机已root（您的模拟器应该是），您可以修改platform.xml文件以添加另一个具有此权限的组。它应该如下所示：

```
<permission name="android.permission.WRITE_EXTERNAL_STORAGE" >
    <group gid="sdcard_rw" />
    <group gid="media_rw" />
</permission> 
```

一些手机上仍然有 SD 卡插槽的制造商（我知道三星有）自己修复了这个问题，但即使是 Nexus 7 或 GNex 默认也没有修复这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T04:10:23.020

对任何感兴趣的人来说，问题是我制作了一个 sdcard.iso 映像，并让 eclipse 将其作为 -sdcard 命令行参数传递给 AVD。无论出于何种原因，该图像都是只读的。通过清除命令行参数并编辑 AVD 以使用大小为 512mb 的新 sd 卡而不是文件来解决此问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T10:09:55.220

就我而言，我对斜线有误。在eclipse中指定“附加模拟器命令行选项”时

实际上应该是 -sdcard C:/Kamal/sdcard/emulator_sdcard

我把 -sdcard C:\Kamal\sdcard\emulator_sdcard

然后在重新启动 Eclipse & Emulator 后它就可以工作了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-15T11:31:08.233

> `try {`
> 
> ```
>  InputStream inputStream2 = openFileInput("database.sqlite3");
>               File outFile =new File(Environment.getExternalStorageDirectory(), "database15.sqlite3");
>               outFile.createNewFile();
>               OutputStream out= new FileOutputStream(outFile);
>               byte[] buf = new byte[1024];
>               int len;
>               while((len = inputStream2.read(buf))> 0)
>               {
>                   out.write(buf);
>               }
>               out.close();
>               Toast.makeText(getBaseContext(),getFilesDir().toString()+"Done", Toast.LENGTH_LONG).show();
>       } catch (FileNotFoundException ex) {
>           Toast.makeText(getBaseContext(),"file not found", Toast.LENGTH_LONG).show();
>       } catch (IOException e) {
>           Toast.makeText(getBaseContext(),e.getMessage(), Toast.LENGTH_LONG).show();
>       } 
> ```

# javascript - 如何在 Javascript 中重新启动嵌入的声音？

> ID：13337197
> 
> 赞同：5
> 
> 时间：2012-11-12T01:08:01.650
> 
> 标签：javascript, html, audio, embed, restart

我目前正在用 Javascript 制作游戏，但是在尝试射击时，射击声音不会重新开始。我的 HTML 如下所示：

```
<embed id="playerShot" src="resources/sounds/ump45shot.mp3" hidden="true" autostart="false"loop="false" volume="20"> 
```

我的 Javascript 函数是

```
function shoot() {
document.getElementById("playerShot").Play();
} 
```

有没有办法在再次播放之前重新启动声音？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:23:43.967

如果您使用 JavaScript 制作游戏，我建议您选择 JavaScript 到 HTML 来加载和操作您的资源，例如声音和图形。您可以阅读本文以开始使用 Web 音频 API：[http](http://www.html5rocks.com/en/tutorials/webaudio/intro/) ://www.html5rocks.com/en/tutorials/webaudio/intro/ 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T07:27:36.213

这是你要找的吗？

```
<button onclick="playSfx('resources/sounds/ump45shot.mp3');">PLAY</button>

<!--Script-->

<script>
    function playSfx(filename){
    var snd = new Audio(filename);
    snd.play();
}

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T07:03:45.880

我建议您使用该`<audio>`元素，我认为它比嵌入标签更适合您的需求。[https://developer.mozilla.org/en-US/docs/HTML/Element/Audio](https://developer.mozilla.org/en-US/docs/HTML/Element/Audio)

要倒带`<audio>`标签：`document.getElementById('iamanaudioelement').currentTime = 0`

（旁注：并非所有浏览器都支持 mp3`<audio>`元素。如果您打算让 Firefox 用户玩您的游戏，您应该检测浏览器是否支持 MP3 支持，例如[Modernizr](http://modernizr.com/)，并酌情创建 ogg 或 mp3 音频标签。）

# sql - 在 Magento 中实现 SQL 函数 have()

> ID：13337207
> 
> 赞同：3
> 
> 时间：2012-11-12T01:08:51.670
> 
> 标签：sql, function, magento, having

我需要在 Magento 中“拥有”一个 SQL 函数。据我所知，没有功能。

所以我尝试在集合类中实现它

```
 public function addAttributeHaving($attribute)
 {
      $this->getSelect()->having($attribute); 
      return $this;
 } 
```

当我使用这个功能时

```
 $collectionHotel->addAttributeToSort($order, $dir)
                 ->addAttributeHaving('MIN(`apptha_booking_room_types`.`room_price_per_night`) >= '.$lowestprice)
                ->addAttributeHaving('MIN(`apptha_booking_room_types`.`room_price_per_night`) <= '.$highestprice); 
```

输出查询很好：

```
SELECT 
    `e` . *,
    MIN(`apptha_booking_room_types`.room_price_per_night) AS `lowestprice`,
    IF(at_status.value_id > 0,
        at_status.value,
        at_status_default.value) AS `status`,
    IF(at_apptha_hotel_period_to.value_id > 0,
        at_apptha_hotel_period_to.value,
        at_apptha_hotel_period_to_default.value) AS `apptha_hotel_period_to`,
    `price_index`.`price`,
    `price_index`.`tax_class_id`,
    `price_index`.`final_price`,
    IF(price_index.tier_price IS NOT NULL,
        LEAST(price_index.min_price,
                price_index.tier_price),
        price_index.min_price) AS `minimal_price`,
    `price_index`.`min_price`,
    `price_index`.`max_price`,
    `price_index`.`tier_price`
FROM
    `catalog_product_entity` AS `e`
        LEFT JOIN
    `apptha_booking_room_types` ON (apptha_booking_room_types.entity_id = e.entity_id)
        INNER JOIN
    `catalog_product_entity_int` AS `at_status_default` ON (`at_status_default`.`entity_id` = `e`.`entity_id`)
        AND (`at_status_default`.`attribute_id` = '89')
        AND `at_status_default`.`store_id` = 0
        LEFT JOIN
    `catalog_product_entity_int` AS `at_status` ON (`at_status`.`entity_id` = `e`.`entity_id`)
        AND (`at_status`.`attribute_id` = '89')
        AND (`at_status`.`store_id` = 1)
        INNER JOIN
    `catalog_product_entity_datetime` AS `at_apptha_hotel_period_to_default` ON (`at_apptha_hotel_period_to_default`.`entity_id` = `e`.`entity_id`)
        AND (`at_apptha_hotel_period_to_default`.`attribute_id` = '168')
        AND `at_apptha_hotel_period_to_default`.`store_id` = 0
        LEFT JOIN
    `catalog_product_entity_datetime` AS `at_apptha_hotel_period_to` ON (`at_apptha_hotel_period_to`.`entity_id` = `e`.`entity_id`)
        AND (`at_apptha_hotel_period_to`.`attribute_id` = '168')
        AND (`at_apptha_hotel_period_to`.`store_id` = 1)
        INNER JOIN
    `catalog_product_index_price` AS `price_index` ON price_index.entity_id = e.entity_id
        AND price_index.website_id = '1'
        AND price_index.customer_group_id = 0
WHERE
    (`e`.`type_id` = 'hotel')
        AND (IF(at_status.value_id > 0,
        at_status.value,
        at_status_default.value) = '1')
        AND (IF(at_apptha_hotel_period_to.value_id > 0,
        at_apptha_hotel_period_to.value,
        at_apptha_hotel_period_to_default.value) >= '2012-11-09')
GROUP BY `e`.`entity_id`
HAVING (MIN(`apptha_booking_room_types`.`room_price_per_night`) >= 0)
    AND (MIN(`apptha_booking_room_types`.`room_price_per_night`) <= 999999999)
ORDER BY `lowestprice` asc 
```

当我在 MySQL 中执行这个查询时，输出很好。

但是当我尝试使用

```
 $collectionHotel->load(); 
```

出现此错误：

> SQLSTATE [42S22]：未找到列：1054 未知列 'apptha_booking_room_types.room_price_per_night' 在“有子句”中</p>

我尽我所能，但我还不能解决这个问题。任何人都可以帮忙吗？

或者，是否有更好的方法来实现 have() 函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T01:17:04.170

我相信到目前为止，这是magento的一个错误......好吧......我的问题通过使用一些技巧解决了......但不要使用这种方法，因为尽管输出查询很好，但magento总是说未知列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-22T16:40:54.500

不幸的是，这是 Magento 中的一个错误。我遇到了同样的问题，最后创建了第二个数据库模型类，只是为了检索管理区域网格显示的数据。

在第二个 Collection.php 文件的构造方法中，我最终使用直接 DB 查询创建了一个 mysql VIEW，从原始表中选择数据（带有 group by 子句）以临时缓存结果。

在构造方法中：

```
 $resource = Mage::getSingleton('core/resource');
            $writeConnection = $resource->getConnection('core_write');

            $sql = "
                   CREATE OR REPLACE VIEW your_temp_view_name AS
                   SELECT SUM(column_name) as column_name
                   FROM original_table_name
                   WHERE ...
                   GROUP BY customer_id
            ";

            $writeConnection->query($sql); 
```

因为数据已经分组并且已经执行了聚合函数，所以您可以使用普通的 addAttributeToFilter 方法来过滤数据。

这有点hacky，但它在这种情况下有效。根据数据量和同时使用的用户数量，它可能有效，也可能无效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T01:31:40.613

尝试对数据库手动运行 sql 并更改此行

```
....
HAVING (MIN(`apptha_booking_room_types`.`room_price_per_night`) >= 0)
   AND (MIN(`apptha_booking_room_types`.`room_price_per_night`) <= 999999999) 
```

至

```
.....
HAVING (`lowestprice` >= 0)
   AND (`lowestprice` <= 999999999) 
```

如果上面的代码工作，然后尝试改变这个

```
->addAttributeHaving('`lowestprice` >= '.$lowestprice)
->addAttributeHaving('`lowestprice` <= '.$highestprice); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-11T07:09:13.297

编写有和顺序子句的另一种方法

```
$product_log_data = Mage::getModel('customtabs/productlog')->getCollection();
 $product_log_data->getSelect()->having(
            "rowNumber = 1" );
 $product_log_data->getSelect()->order(
            "rowNumber" ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-01T18:03:37.637

首先`$countSelect->reset(Zend_Db_Select::HAVING);`意味着它将`HAVING`从您的收藏中重置。这意味着它将删除 having 子句。它不是你想要的。您可能希望将其添加到集合中（`app/code/core/Mage/Catalog/Model/Resource/Product/Collection.php->_getSelectCountSql()`此处。）

但罪魁祸首是文件`getSize()`中存在的方法`lib/Varien/Data/Collection/Db.php`。

> 我尝试了互联网上几乎所有可用的解决方案，但没有一个对我有用。

现在我做了以下。

```
public function getSize()
{
    if (is_null($this->_totalRecords)) {
        //$sql = $this->getSelectCountSql();
        $sql = $this->getSelect();
        $this->_totalRecords = count($this->getConnection()->fetchAll($sql, $this->_bindParams));
    }
    return intval($this->_totalRecords);
} 
```

检查我什至没有使用`getSelectCountSql()`. 我只是在阅读整个**SQL QUERY**并**获取所有数据**并**返回它的计数**。就这样。

# windows - 没有代理的路由ip

> ID：13337208
> 
> 赞同：0
> 
> 时间：2012-11-12T01:08:57.080
> 
> 标签：windows, sockets, proxy, routing, ip

我的目标是保存 windows 用户生成的所有 ip 地址和 url，并将它们保存到本地 sql server 中。

我不能使用代理和浏览器界面。我还有什么其他选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T01:26:29.543

如果可以处理流量，运行嗅探器似乎是一个不错的选择。

# mysql - 这真的是一个如此复杂的查询还是服务器很慢？

> ID：13337212
> 
> 赞同：0
> 
> 时间：2012-11-12T01:09:18.203
> 
> 标签：mysql

最近在这些表中插入了很多行，现在查询超时：

```
SELECT * FROM eng
WHERE english IN (SELECT eng FROM `eng-jap`)
ORDER BY lastmodified DESC 
```

表 eng-jap 有大约 25,000 行，这里有一些统计数据：

```
Format          dynamic
Collation       utf8_general_ci
Rows            24,960
Row length ø    316
Row size ø      328 B
Next Autoindex  26,468
Type    Usage
Data    7,724.0 KiB
Index   264.0 KiB
Total   7,988.0 KiB 
```

对于表 eng：

```
Format          dynamic
Collation       utf8_general_ci
Rows            23,691
Row length ø    105
Row size ø      117 B
Next Autoindex  24,771
Type    Usage
Data    2,451.4 KiB
Index   260.0 KiB
Total   2,711.4 KiB 
```

只需从表中选择 * 获取（查询耗时 0.0002 秒）对于任一表

我简直不敢相信像这样一个非常简单的子查询，每个表中有几个 k 需要超过我设置的 160 秒超时，然后超时......

我希望它就像我的桌子上的一个设置那样。还是mysql真的不能做这样的查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T01:15:34.817

它必须将一个表中的所有元素与另一个表中的所有元素交叉引用。

也许这可能会更好：

```
SELECT `eng`.* FROM `eng`
JOIN `eng-jap` ON `eng`.`english` = `eng-jap`.`eng`
ORDER BY `eng`.`lastmodified` DESC 
```

还要确保您定义了合适的索引。这将有助于加快查询速度。

# c++ - 在 C++ 中的函数之间传递变量

> ID：13337214
> 
> 赞同：1
> 
> 时间：2012-11-12T01:09:32.400
> 
> 标签：c++

我的任务是输入和读取（）几个双变量并将它们存储在向量中，然后函数计算（）应该计算存储在向量中的所有变量的总和及其平均值。我已经修复了这些功能，它们运行良好。问题在于最终函数 print() .. 该函数应该打印出结果 - 'sum' 和 'average' 变量。但是我的 print() 代码无法正常工作并打印出错误的数字。这是我的代码：

```
#include <iomanip>
#include <cstdlib>
#include <iostream>
#include <vector> 
using namespace std;

vector<double> read(){//this function works fine
    cout << "Write some numbers with space between them?" << endl;
    double numz;
    vector<double> myvector;
    do {
    cin >> numz;
    myvector.push_back (numz);
    } while (numz);
    return myvector;
}  

void compute(double average, double sum, vector<double> &myvector){//this function works fine
//if i put cout in this function it calculates correctly
    vector<double>::iterator it;
    for ( it=myvector.begin() ; it < myvector.end()-1; it++ ){
    sum += *it;
    }
    average = sum/myvector.size();

}

void print(double average, double sum){//this is printing out wrong numbers
    cout.precision(2); 
    cout << sum << endl;
    cout << fixed  << average << endl;
}

int main (){
    vector<double> myvector = read();
    double average;
    double sum;
    compute(average, sum, myvector);
    print(average, sum);//this is printing out wrong numbers

    system("pause");
  return 0;
} 
```

在此先感谢您的帮助，我知道我的问题在于函数之间的变量传递，但是我花了一整天的时间调试和阅读教程，但没有任何运气。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T01:11:39.390

只需在函数声明中的变量前面添加 & ，它就会传递对变量的引用！

```
void compute(double& average, double& sum, vector<double> &myvector) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T01:14:59.563

您忘记了计算函数声明中的引用运算符 (&)：没有它， main() 函数中的变量将不会被修改：写

```
void compute(double &average, double &sum, vector<double> &myvector){//this function works fine 
```

而不是你写的，它应该工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T02:23:22.880

你的程序有几个缺陷：

1.  也许更好的声明`compute`改为：

    ```
    void compute(const vector<double> &myvector, double &average, double &sum); 
    ```

    传递 a`const vector<double>&`使其在函数中不可修改，并采用 的引用`average/sum`使得更改传入参数成为可能，请参阅此处的“形式参数”和“实际参数”的更多[内容](https://stackoverflow.com/questions/3176310/difference-between-parameter-and-argument)。

2.  你最好将函数声明`read`为：

    ```
    void read(vector<double>& myVector); 
    ```

    `read`因为这将避免在函数返回时复制向量。

# c - 为什么使用 fsync() 将写入刷新到磁盘会加快访问速度？

> ID：13337215
> 
> 赞同：1
> 
> 时间：2012-11-12T01:09:40.600
> 
> 标签：c, performance, fsync

我们需要一个应用程序来尽可能地保证当它报告一条记录时，它确实是持久的。我知道要做到这一点，你使用`fsync(fd)`. 然而，出于某种奇怪的原因，使用 fsync() 似乎加快了写入磁盘的代码，而不是像预期的那样减慢它。

一些示例测试代码返回以下结果：

```
no sync() seconds:0.013388   writes per second:0.000001 
   sync() seconds:0.006268   writes per second:0.000002 
```

下面是产生这些结果的代码：

```
#include <stdio.h>
#include <fcntl.h>
#include <time.h>
#include <unistd.h>

void withSync() {
    int f = open( "/tmp/t8" , O_RDWR | O_CREAT );
    lseek (f, 0, SEEK_SET );
    int records = 10*1000;
    clock_t ustart = clock();
    for(int i = 0; i < records; i++) {
        write(f, "012345678901234567890123456789" , 30);
        fsync(f);
    }
    clock_t uend = clock();
    close (f);
    printf("   sync() seconds:%lf   writes per second:%lf\n", ((double)(uend-ustart))/(CLOCKS_PER_SEC), ((double)records)/((double)(uend-ustart))/(CLOCKS_PER_SEC));
}

void withoutSync() {
    int f = open( "/tmp/t10" , O_RDWR | O_CREAT );
    lseek (f, 0, SEEK_SET );
    int records = 10*1000;
    clock_t ustart = clock();
    for(int i = 0; i < records; i++) {
        write(f, "012345678901234567890123456789" , 30 );
    }
    clock_t uend = clock();
    close (f);
    printf("no sync() seconds:%lf   writes per second:%lf \n", ((double)(uend-ustart))/(CLOCKS_PER_SEC), ((double)records)/((double)(uend-ustart))/(CLOCKS_PER_SEC));
}

int main(int argc, const char * argv[])
{
    withoutSync();
    withSync();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T04:00:10.447

问题在于您尝试对 I/O 写入计时的方式。从语义上讲，您希望测量I/O 记录写入之间*的挂钟时间*，但您使用的是 C 库函数`clock`，它测量 CPU 执行时间而不是经过的总时间。`clock_gettime`与时钟选择一起使用，`CLOCK_MONOTONIC`或者，理想情况下，`CLOCK_MONOTONIC_RAW`（后者是 Linux 扩展）。

您没有收集调用之间经过的总时间`clock`：您正在收集您的进程旋转 CPU 周期的时间量的估计值。您的磁盘 I/O（特别是对`write`和的调用`fsync`）正在阻塞，这意味着这些系统调用中的每一个都由内核代表您处理，并且不会在您的进程上下文中消耗 CPU。因此，您需要测量*挂钟时间*的实际差异，这听起来是现实世界中经过的总时间，超出了您的测试程序过程的范围。事实上，你关心的根本不是 CPU 时间`fsync`。大多数 I/O 操作的执行时间不会由内核甚至 CPU 处理；这将是由于磁盘控制器。

此外，小记录大小也可以作为基准。这是同步 I/O 的常见用例（例如，为事务日志写入元数据）。要获得较大记录大小的时序稳定性，只需显着增加每个计时器间隔和平均/摊销的循环迭代次数。这将准确地模拟同步写入和刷新的小阻塞记录的成本。

请考虑`fdatasync`提高性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T03:06:17.170

非常感谢您的意见，谢谢！建议将测试增加到更多事务的评论是正确的。当使用大量事务时`fsync()`，似乎确实有所作为。至少在 OS/X 10.8 上：

1.  当写入不增加文件大小时，`fsync()`完成写入所需的时间加倍。
2.  当写入确实增加了文件大小时，`fsync()`速度会明显变慢。

# c# - linq 反向分组

> ID：13337217
> 
> 赞同：0
> 
> 时间：2012-11-12T01:09:58.887
> 
> 标签：c#, linq, grouping

我有以下代码：

```
 var groups =
          from w in wordsAndFec
          group w by  w.Value;
      foreach (var group in groups)..... 
```

在上面的代码中 w.Value 是一个 int 并且代码稍后会将组添加到一个字符串中。但是我还需要颠倒顺序，以便代码按最高值到最低值而不是从最低到最高值分组。

需要做什么的非工作示例：

```
from w in wordsAndFec
group w by w.value orderby reverse; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T01:12:27.490

`orderby`接受一个值进行排序：

```
group w by w.value into g
orderby g.Key descending
select g; 
```

# php - 如何在 HTML 代码中的特定位置打印？

> ID：13337227
> 
> 赞同：1
> 
> 时间：2012-11-12T01:11:53.217
> 
> 标签：php

我有一个这样的 PHP 代码：

```
<?php
  if($condition) {myFunction();};
?>
<html>
  <head>
  </head>
<body>
Some HTML code
<?php
  function myFunction() {
     print "Print some new code";  
  };
?>
</body>
</html> 
```

当调用 myFunction 时，新代码将打印在第一个 html 标记之前。
我怎样才能改变这种行为并打印，比如说，在“一些 HTML 代码”之后。
谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T01:14:31.783

您必须调用要打印的函数，而不是在那里定义它。

```
<?php
  function myFunction() {
     print "Print some new code";  
  };
?>
<html>
  <head>
  </head>
<body>
Some HTML code
<?php
  if($condition) {myFunction();};
?>
</body>
</html> 
```

--编辑--评论

检查两个地方的条件，或者分离你的逻辑和内容

```
<?php
  function myFunction() {
     return "Print some new code";  
  }
  $somecontent = '';
  $morecontent = '';
  if($condition) {
      $somecontent = myFunction();
  }
  else{
      $morecontent = 'some more content';
  }
?>
<html>
  <head>
  </head>
<body>
<?php
    echo $morecontent;
?>
Some HTML code
<?php
    echo $somecontent;
?>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T01:16:46.150

当语句返回 true 时，该函数正在运行，因此它会打印“Print some new code”；在那里。

为了在 body 标记中获取新代码，请在其中添加 if 语句。

同样，如果您将函数移到呈现的 HTML 之外（如下所示），那么它会将标记与逻辑分开。

```
<?php
function myFunction() {
  print "Print some new code";  
};
?>
<html>
  <head>
  </head>
  <body>
    Some HTML code
    <?php
      if($condition) {myFunction();};
    ?>
  </body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T01:23:42.083

使用函数时应该记住两件事。

1-首先定义它

```
<?php
    function function_name () {
       // do something
    } 
```

2-其次调用它

```
function_name(); 
```

记住函数会返回它在你调用它的地方，而不是你定义它的地方。因此，在您的情况下，当您反转游戏时，结果也会反转。

这是补救措施：

```
<?php
  function myFunction() {
    return "Print some new code";  
};
?>
<html>
  <head>
  </head>
<body>
Some HTML code
<?php

if ($condition) {
    echo myFunction();
}

</body>
</html> 
```

# c# - NLog 兼容 common.logging

> ID：13337228
> 
> 赞同：2
> 
> 时间：2012-11-12T01:12:04.810
> 
> 标签：c#, visual-studio-2008, nlog

在现有的 C# 2008 应用程序中，我想使用 nLog 开源来实现其日志记录功能。在这个应用程序中， common.logging 包装器已经被使用。因此，您能告诉我 nLog 是否与 common.logging 兼容吗？如果是这样，您能否告诉我和/或指出如何让这两个功能相互配合的参考资料？如果 nLog 与 common.logging 不兼容，你能告诉我还有哪些开源 .net 日志工具与 common.logging 兼容吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T02:05:08.860

根据其网站，[Common.Logging同时支持 NLog 1.0 和 2.0。](http://netcommon.sourceforge.net/)

# android - 如何将此 TextView 放置到此 Activity 上？

> ID：13337233
> 
> 赞同：0
> 
> 时间：2012-11-12T01:12:58.143
> 
> 标签：android, android-layout

我有一个活动，我显然有一个布局。布局的背景是一张图片，TextView 的放置需要在一个精确的位置。当我将 TextView 放置在任何布局中时，位置不会像我预期的那样随着背景图像的缩放而改变。

如何让 TextView 根据屏幕大小进行缩放？

最简单的解决方案将被接受。

![巴特讲话泡泡](../Images/8584a922c9213970fa0386308cf05fa4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T01:33:57.860

您的问题有点含糊，但假设您的目标是“将 TextView 放在上图中的对话气泡上”，您可能还有一些工作要做。您可以尝试使用边距等来使其在语音图像上精确放置，但这将非常棘手，并且可能永远不会完全按照您的意愿工作。您最简单的选择是执行以下操作

1.  使用 Photoshop、Paint 或几乎任何编辑程序来剪切 Bart 和对话气泡并将它们保存为单独的图像。
2.  使用将背景颜色设置为 black 的 RelativeLayout `android:background="@android:color/black"`。
3.  使用 Bart 的图形放置一个 ImageView，并在其上设置以下属性：`android:layout_alignParentLeft="true"`、`android:layout_alignParentBottom="true"`和 `android:id="@id/img_bart"。
4.  放置一个 TextView，将背景设置为使用语音气泡图像（`android:background="@drawable/img_speech"`或任何您称之为语音气泡图像），将其设置为显示在 Bart 的右侧`android:layout_toRightOf="@id/img_bart"`，然后将其捕捉到顶部（`android:layout_alignParentTop="true"`- 这可能会导致高屏幕出现问题但是），或通过`android:layout_alignParentBottom="true"`和以适当的量捕捉到底部偏移量`android:layout_marginBottom="150dp"`，修改 150 以使其相对于 Bart 出现在正确的高度。

我知道这是一项相当大的工作，不幸的是，Android 布局通常是这样，尤其是在您希望以适当的方式将不同的元素粘在一起的情况下，例如气泡。

您可以查看的另一件事是 AbsoluteLayout，它允许您将子元素放置在*确切的*位置 - 但是强烈建议不要这样做，因为它不能很好地扩展到不同的屏幕尺寸，并且 AbsoluteLayout 类本身已被弃用并且一直存在很久。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T01:38:15.167

最好的方法是，如果它们还没有，则从中创建 2 个图像。一个是巴特，另一个是讲话泡泡。为每个图像创建 ImageViews，将 Bart 设置在左下角，将对话气泡设置在右上角。然后，您可以将 TextView 创建为 size:wrap_content，并将其拉伸到气泡的大小。然后将 TextView 的重力设置为中心，您将能够让所有文本在对话气泡内居中。

# opengl - OpenGL，在基于图块的游戏中缩小

> ID：13337234
> 
> 赞同：1
> 
> 时间：2012-11-12T01:13:17.147
> 
> 标签：opengl, 2d, zooming

如果您有一个基于 2D 瓷砖的游戏，并且您希望允许玩家缩小（并看到更多的世界），您将如何实现它？

通常我只会渲染在游戏的 glOrtho 视图中可见的图块，但如果我允许缩放，那么浮点精度会严重破坏试图让所有东西对齐（相信我这比听起来要困难得多）。是渲染整个世界的正确解决方案，并让 OpenGL 处理不渲染不可见内容的担忧吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:20:16.670

您可以通过发送来渲染稍大的区域，这肯定会适合您的视图，但还不够大。

您的问题没有提到您的 2D 是否允许相机旋转。可见区域可以表示为瓦片空间中的边界矩形：

```
Width_In_Tiles := RoundUp(View_Width_In_Px / Single_Tile_Width_In_Px * Zoom);
Left_Margin := Center_Of_View - RoundUp(Width_In_Tiles / 2);
Right_Margin := Center_Of_View + RoundUp(Width_In_Tiles / 2);

//same for vertical axis

//Naive example
for K := Top_Margin to Bottom_Margin do
  for I := Left_Margin to Right_Margin do
    RenderTilesAndObjects(I, K); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T07:16:31.423

我会将瓦片渲染为纹理，然后使用比屏幕大一瓦片宽度的四边形渲染整个场景。将该四边形转换为您的全局位置，以瓷砖宽度为模。然后opengl的内置纹理过滤将处理抖动。这也具有潜在的速度优势。无需在每一帧渲染屏幕上的所有图块，您只需沿着纹理的周边渲染新可见的图块，并且偶尔（当屏幕边缘穿过图块边界时）您必须blit 纹理的内容。

对于缩放，您可以使用类似的想法，但使用 mipmapping。

# visual-studio-2012 - IE 10 对 VS2012 太不耐烦了

> ID：13337238
> 
> 赞同：1
> 
> 时间：2012-11-12T01:13:42.083
> 
> 标签：visual-studio-2012, internet-explorer-10

我的新开发机器正在运行带有 IE 10 的 64 位 Windows 8。

当我开始使用 VS 2012 和 IIS Express 作为 Web 服务器来调试 Web 应用程序时，IE 10 很快就会报告

```
This page can't be displayed
 o Make sure the web address http://localhost:9999 is correct 
```

刷新 IE 10 会调出我正在尝试调试的页面。在我的较旧（且速度较慢）的 Win 7 / VS 2012 / IE 9 安装程序调试相同代码时，这从来都不是问题。它是始终可重复的。

有没有我可以调整的设置来指示 IE 10 再等一两秒让 VS 2012 服务`http://localhost:9999`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T00:38:38.953

注册表中有一个`ReceiveTimeout`设置。对我来说，它设置为 10000 毫秒（10 秒）。

将该值更改为所需的毫秒数。

> HKEY_CURRENT_USER\SOFTWARE\Microsoft\Windows\CurrentVersion\Internet Settings\ReceiveTimeout

[http://support.microsoft.com/kb/181050?wa=wsignin1.0](http://support.microsoft.com/kb/181050?wa=wsignin1.0)

# c - realloc：下一个大小无效

> ID：13337241
> 
> 赞同：1
> 
> 时间：2012-11-12T01:14:20.747
> 
> 标签：c, file-io

这个问题肯定与[此](https://stackoverflow.com/questions/2532425/read-line-from-file-without-knowing-the-line-length)相关，它的答案是我基于我的功能。

```
char *get_next_line(FILE *fp) {
char ch = 0;
int CUR_MAX = 4095;
char *buffer = (char*) malloc(sizeof(char) * CUR_MAX); // allocate buffer.
char *temp = (char*) malloc(sizeof(char) * CUR_MAX); // allocate buffer.
int count = 0;
int length = 0;

while ((ch != '\n')) {
  if (ch == '\377') { return NULL; }
  if(count ==CUR_MAX) {
    CUR_MAX *= 2;
    count = 0;
    if ((temp = realloc(buffer, CUR_MAX)) != NULL) {
      buffer = temp;
      free(temp);
    }
  }
  ch = getc(fp);
  buffer[length] = ch;
  length++;
  count++;
} 
```

出于某种原因，在读取非常大的字符串时，我会遇到：
**检测到 glibc - realloc() 下一个大小无效。**

我在这里缺少什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T01:25:41.670

当你：

```
free(temp); 
```

`buffer`也被释放，因为：

```
buffer = temp; 
```

所以稍后你会尝试：

```
realloc(buffer, CUR_MAX) 
```

它无法工作，因为`buffer`已通过 . 间接释放`temp`。您不能`realloc()`释放指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T01:20:40.347

我相信您正在访问分配/重新分配区域之外的内存。

不设置`count = 0`在您的 while 外观中应该可以解决此问题。

* * *

尝试并详细说明...

开始公式时：

```
count = 0
length = 0
CUR_MAX = 4095 
```

这些将递增，直到达到 4095。一旦达到 4095，我们将拥有：

```
count = 0
length = 4096
CUR_MAX = 8190 
```

然后我们将递增直到计数为 8190。在那之前不久，我们有：

```
count = 8100
length = 12196
CUR_MAX = 8190 
```

您的数组长度仅为 8190，但您正在取消引用`buffer[12196]`，这是一个无效的索引。

* * *

*此外，您可能想处理`else`when 的情况`temp == NULL`。这可能可以通过一个`assert`或一个大的旧故障来处理。不要`free(temp)`在你成功的一面。这释放了您刚刚尝试分配的内存。并导致您的新分段错误。*

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-02T22:43:46.800

`realloc(buffer, CUR_MAX))`返回指向 void 的指针。

我相信正确的说法是`(char *)realloc(buffer, CUR_MAX))`

# matlab - 如何在matlab中计算图像检索时间

> ID：13337243
> 
> 赞同：0
> 
> 时间：2012-11-12T01:14:33.847
> 
> 标签：matlab, time

我正在研究图像检索系统，为了评估 CBIR 的性能，我们应该计算检索时间。我使用了内置函数 tic 和 toc 函数；我看到它每次运行都给了我不同的时间，并且我看到它总结了从运行到运行的时间。我做了很多尝试计算每次检索的检索时间，例如我保存了检索时间（这意味着toc 包含）在一个变量中说 timeR=toc，然后我 timeR=0 用于下一次检索...

```
timeR=o;
tic;

% image retrieval process

toc;

timR=toc; 
```

仍然我得到不同的时间..请任何人帮助我如何计算每个查询图像的检索时间，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T20:23:39.320

有时，检索代码对每个图像的执行略有不同。为了更好地了解您的运行时间，我建议您使用 Matlab 的分析工具。

```
 profile clear;
 profile on; 
 % your code here
 profile off;
 profile viewer; 
```

使用分析器，您可以查看代码中需要时间的内容。

此外，在您的代码片段中，您调用`toc`了两次，这可能会导致您遇到一些奇怪的行为。

对于更具体的措施，您可以尝试

```
rTimes = zeros(1, numMethods);
% prepare images and what ever you need ...
for imi = 1:numImages
    % read test image ...
    tic;
    % use your method for ret.
    rTimes(1) = rTimes(1) + toc; % add this run time to your counter

    tic;
    % here you run method 2 that you want to compare to...
    rTimes(2) = rTimes(2) + toc; % add run time for method 2

    % do the same for all methods ...

    tic;
    % run the numMethods-th method
    rTimes(numMethods) = rTimes(numMethods) + toc;
end
% now rTimes hold the running times (overall) for all methods over all test images. 
```

# c# - 使用 HttpClient 连接到 9gag

> ID：13337254
> 
> 赞同：1
> 
> 时间：2012-11-12T01:18:20.273
> 
> 标签：c#, .net, httpclient

我想为 9gag 做一个 Windows 商店应用程序。我使用 HttpClient

我想连接用户，以便他能够喜欢/不喜欢。因此，我使用数据向 9gag/login 发出 POST 请求，但它失败了。一位同事在 JavaScript 中做了类似的事情，并且成功了……

```
 private async void connect()
    {

        try
        {
            string result;

            HttpResponseMessage response = await httpClient.GetAsync(url + "login/");
            response.EnsureSuccessStatusCode();

            result = await response.Content.ReadAsStringAsync();
            string key = takeKey(result);

            var values = new Dictionary<string, string> { { "csrftoken", key }, { "username", username }, { "password", password } };
            //Header of the http request
            HttpContent header = new FormUrlEncodedContent(values);
            response = await httpClient.PostAsync(url + "login/", header);
            response.EnsureSuccessStatusCode();

            result = await response.Content.ReadAsStringAsync();
            string test = response.IsSuccessStatusCode.ToString();
        }
        catch (HttpRequestException hre)
        {
            string test = "";
        }
        catch (Exception ex)
        {
            // For debugging
            string test = "";
        }

    } 
```

我尝试了不同的方法来放置 HTTPContent.... 它是其中之一... url 的值是“http://9gag.com/”，所以当我在最后放置一个断点时。当我看到结果并在浏览器上尝试时，我收到错误：“请重试”。如果密码错误，我会收到错误消息：“错误的组合用户/密码 blablabla”。

那么，有什么想法吗？......我什么也没找到......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T10:16:13.550

这是因为 .Net 框架中的一个错误，不能很好地处理 cookie。

如果您有 chrome 或安装了 firebug 插件的 firefox，或者您有其他方法可以在浏览器中读取 cookie，我会解释。

您从 9gag 获得的 cookie 列表大部分时间都用于域“.9gag.com”，除了 1，名为 ts1，这个对于登录至关重要，但不适用于域“.9gag.com”但是对于“9gag.com”，由于 .Net 中的错误，不会存储 ts1 cookie。

在这里，您有一个小解决方法，但是我不确定这是否完全稳定，

```
 Cookie cookie = new Cookie();

        cookie.Domain = "9gag.com";

        cookie.Name = "ts1";

        cookie.Value = "VALUEOFTHISCOOKIE";

        this._Cookies.Add(new Uri("http://9gag.com"), cookie); 
```

在上面的代码中，您必须将“VALUEOFTHISCOOKIE”替换为浏览器中的 cookie 值（在我的例子中：fb221d618c89577cf59c7ce5fd300c5b43e4259f）。

这对我有用，如果登录正确，我会收到 302 响应代码。

# ios - 雪碧没有添加到场景中？

> ID：13337256
> 
> 赞同：0
> 
> 时间：2012-11-12T01:18:45.703
> 
> 标签：ios, cocos2d-iphone, ccsprite, addchild

我有一个奇怪的问题。

在我的游戏中，我在第一关的场景中添加了一个“目标，如下所示：

```
//Adds the "targets" or in this case falling objects, to the scene and spawns/moves them
-(void)addTarget {
CCSprite *target = [CCSprite spriteWithFile:@"bankercatch.png"
                                       rect:CGRectMake(0, 0, 21, 40)];

target.tag = 1;

[_targets addObject:target];

// Determine where to spawn the target along the X axis
CGSize winSize = [[CCDirector sharedDirector] winSize];
int minX = target.contentSize.width/2;
int maxX = winSize.width - target.contentSize.width/2;
int rangeX = maxX - minX;
int actualX = (arc4random() % rangeX) + minX;//Randomizes the place it will spawn on X-Axis

// Create the target slightly off-screen along the top edge,
// and along a random position along the X axis as calculated above
target.position = ccp(actualX, winSize.height + (target.contentSize.height/2));
[self addChild:target];

// Determine speed of the target
int minDuration = 3.0;
int maxDuration = 5.0;
int rangeDuration = maxDuration - minDuration;
int actualDuration = (arc4random() % rangeDuration) + minDuration;//Speed is randomized between 2 and 5

// Create the actions
id actionMove = [CCMoveTo actionWithDuration:actualDuration
                                    position:ccp(actualX, -target.contentSize.height/2)];
id actionMoveDone = [CCCallFuncN actionWithTarget:self
                                         selector:@selector(spriteMoveFinished:)];
[target runAction:[CCSequence actions:actionMove, actionMoveDone, nil]];

} 
```

这一切都很好，直到我想让那个“目标”在它下降时有一个动画。所以我要做的是在init中创建batchNodes和whatnot

```
[[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile: @"DuckSpriteSheet_default.plist"];

    CCSpriteBatchNode *spriteSheet = [CCSpriteBatchNode batchNodeWithFile:@"DuckSpriteSheet_default.png"];
    [self addChild:spriteSheet];
NSMutableArray *fallAnimFrames = [NSMutableArray array];
    for(int i = 1; i <=4; ++i) {
        [walkAnimFrames addObject: [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName: [NSString stringWithFormat:@"duckling%d.png", i]]];

    }

    CCAnimation *fallAnim = [CCAnimation animationWithFrames:fallAnimFrames delay:0.1f];
    self.Duckling = [CCSprite spriteWithSpriteFrameName:@"duckling1.png"];
    _Duckling.position = ccp(winSize.width*1.5, winSize.height*1.5);
    self.fallAction = [CCRepeatForever actionWithAction:[CCAnimate actionWithAnimation:fallAnim restoreOriginalFrame:NO]];
    //[_Banker runAction:_WalkAction];
    [spriteSheet addChild:_Duckling]; 
```

然后我尝试将我的 -AddTarget 方法更改为如下所示：

```
//Adds the "targets" or in this case falling objects, to the scene and spawns/moves them
-(void)addTarget {
//CCSprite *target = [CCSprite spriteWithFile:@"bankercatch.png"
//                                       rect:CGRectMake(0, 0, 21, 40)];
_Duckling.tag = 1;

[_targets addObject:_Duckling];
[_Duckling runAction:_fallAction];
// Determine where to spawn the target along the X axis
CGSize winSize = [[CCDirector sharedDirector] winSize];
int minX = _Duckling.contentSize.width/2;
int maxX = winSize.width - _Duckling.contentSize.width/2;
int rangeX = maxX - minX;
int actualX = (arc4random() % rangeX) + minX;//Randomizes the place it will spawn on X-Axis
NSLog(@"About to add Duckling to self");
// Create the target slightly off-screen along the top edge,
// and along a random position along the X axis as calculated above
_Duckling.position = ccp(actualX, winSize.height + (_Duckling.contentSize.height/2));
[self addChild:_Duckling];//PROBLEM HERE ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
NSLog(@"Added _Duckling to self");
// Determine speed of the target
int minDuration = 3.0;
int maxDuration = 5.0;
int rangeDuration = maxDuration - minDuration;
int actualDuration = (arc4random() % rangeDuration) + minDuration;//Speed is randomized between 2 and 5

// Create the actions
id actionMove = [CCMoveTo actionWithDuration:actualDuration
                                    position:ccp(actualX, -_Duckling.contentSize.height/2)];
id actionMoveDone = [CCCallFuncN actionWithTarget:self
                                         selector:@selector(spriteMoveFinished:)];
[_Duckling runAction:[CCSequence actions:actionMove, actionMoveDone, nil]];

} 
```

我通过使用 NSLogs 来找到问题所在的行来评论问题所在。我得到错误

```
Assertion failure in -[DuckL1Layer addChild:z:tag:], /Users/tyler_reynold/Desktop/Programming/Games/Catch It/Catch It/libs/cocos2d/CCNode.m:388 
```

不是在启动时，而是在 AddTarget 运行时（它在 CCScheduleTimer 上运行）。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T05:08:43.693

由于 cocos2d 是开源的，你可以在它的代码中看到实际的 assert 行。我假设您尝试添加到`self`已经添加到另一个父级的精灵。在这种情况下，它是您的 `CCSpriteBatchNode`实例。如果您尝试将 CCNode 的子类添加到某个父级，而它已经有父级，则任何 CCNode 的子类都将导致断言失败。

# php - array_unique 忽略 0

> ID：13337257
> 
> 赞同：1
> 
> 时间：2012-11-12T01:18:55.657
> 
> 标签：php, floating-point, zero, array-unique

我有一组花车。

当我使用 array_unique 时，如果我有一个 0 值，它将被排除在结果之外。

这是正确的，还是有办法解决这个问题？使它包含 0 的正确语法是什么。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T01:22:58.540

array_unique 函数在比较之前默认将数组的元素类型转换为字符串。

您可能想尝试：

```
array_unique($array, SORT_NUMERIC); 
```

或者

```
array_unique($array, SORT_REGULAR); 
```

[http://php.net/manual/en/function.array-unique.php](http://php.net/manual/en/function.array-unique.php)

# java - 为什么这个正则表达式不起作用？

> ID：13337262
> 
> 赞同：1
> 
> 时间：2012-11-12T01:20:44.713
> 
> 标签：java, regex

我有一个看起来像的正则表达式`\D*(\d*).*`。它的目的是获取它可以找到的第一个数字并将其存储在第一个捕获组中。但是，当我给它输入一个字符串时`testing123`，它不匹配它！这让我困惑了一段时间；为什么不匹配？

Java代码：

```
String s = "testing123"
Pattern p = Pattern.compile("\\D*(\\d*).*");
Matcher m = p.matcher(s);
//m did not match anything 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T01:28:00.683

我认为您`Matcher`错误地使用了该对象：调用

```
if (m.find()) {
    System.out.println(m.group(1));
} 
```

印刷`123`

（[链接到ideone](http://ideone.com/9Ucvjf)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T01:36:55.140

### 简化您的正则表达式

你的表达是：

> \D*(\d*).*

这表示：

1.  零个或多个字符（数字除外）...
2.  后跟零个或多个数字...
3.  后跟零个或多个字符。

除了任何语法问题外，这似乎是一个不必要的复杂化。要匹配一行上的数字，为什么不直接捕获数字呢？例如：

```
\d+ 
```

或者，如果您想确保在单词边界的末尾只有数字，例如：

```
\d+\b 
```

与任何 PCRE 兼容的引擎都可以正常工作。在 Java 中，这始终将“123”放入`group(0)`而不需要捕获子表达式。

# vba - VBA中的分组行

> ID：13337267
> 
> 赞同：8
> 
> 时间：2012-11-12T01:20:59.000
> 
> 标签：vba, excel

我有下面的代码似乎不起作用。本质上，`rngList`是指 Excel 中定义的名称范围，大约 500 行长，每`n`行都有文本（500 行中大约有 32 行有文本）。我正在尝试转到非空白单元格（通过模仿`ctrl + down`Excel 中的命令）。

我正在检查它们是否为空白，如果它们是我想对该单元格进行分组。如果它不是空白的，我想检查左边的单元格，如果它是 0，我也想把它分组。我现在拥有的代码实际上是在尝试执行此操作，但我收到以下错误：

`Group Method of Range Class Failed`

然后它继续突出显示以下行：

`Selection.Rows.Group`

编辑：假设我不想对空白行进行分组，而是对其中包含 1 的行进行分组。这样 crtl + down 实际上会转到该单元格而不是最后一行。

非常感谢你的帮助！

代码如下：

```
rngList.Cells(1).Select
    i = 0

    Do While i < 32
        i = i + 1
        If Selection.Value = "" Then
            Selection.Rows.Group
        Else
            Selection.End(xlToLeft).Select
                If Selection.Value <> 0 Then
                    Selection.Rows.ClearOutline
                End If
        End If
        Selection.End(xlToRight).Select
        Selection.End(xlDown).Select

    Loop 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-19T20:58:21.400

尽管这篇文章的年代久远，但我想我会为任何可能偶然发现它的人投入两分钱。我希望我能正确理解你的问题。这是我收集的内容：

**目标**：对于感兴趣列中的每一行，根据标准对行进行分组。

**标准**：只有`rows in the group`那些没有值（空白、空、空）或有一个值并且有一个值为 0 的相邻单元格（直接在左边）。唯一`rows not in the group`的是那些*不是*空白的并且有一个*不*为0 的相邻单元格。

以下是一些示例数据：

> **注意：** Range`B1:B12`构成了命名的 range `rngList`，就像 OP 所说的那样。

**运行宏前的数据：**

![在此处输入图像描述](../Images/2015072121e947e7656ed224384787d9.png)

**运行宏后的数据 - 分组未折叠：**

![在此处输入图像描述](../Images/8f24b97edcb9636d82534206eb86af37.png)

**运行宏后的数据 - 分组折叠：**

![在此处输入图像描述](../Images/a8e2899f75eab2d1007f93154f4c63ae.png)

**处理这个的代码：**

要使此代码工作：在 VBE（Visual Basic 编辑器）中，打开包含要分组的数据的工作表（也包含命名的 range `rngList`）并粘贴此代码，然后运行宏。

注意：添加注释是为了更详细地解释某些部分，尽管我相信代码本身是以可以解释自身的方式编写的（例如，变量名是有意义的，逻辑是有意义的）。

```
Public Sub GroupCells()
    Dim myRange As Range
    Dim rowCount As Integer, currentRow As Integer
    Dim firstBlankRow As Integer, lastBlankRow As Integer
    Dim currentRowValue As String
    Dim neighborColumnValue As String

    'select range based on given named range
    Set myRange = Range("rngList")
    rowCount = Cells(Rows.Count, myRange.Column).End(xlUp).Row

    firstBlankRow = 0
    lastBlankRow = 0
    'for every row in the range
    For currentRow = 1 To rowCount
        currentRowValue = Cells(currentRow, myRange.Column).Value
        neighborColumnValue = Cells(currentRow, myRange.Column - 1).Value

        If (IsEmpty(currentRowValue) Or currentRowValue = "") Then
            'if cell is blank and firstBlankRow hasn't been assigned yet
            If firstBlankRow = 0 Then
                firstBlankRow = currentRow
            End If
        ElseIf Not (IsEmpty(currentRowValue) Or currentRowValue = "") Then
            'if the cell is not blank and its neighbor's (to the left) value is 0,
            'and firstBlankRow hasn't been assigned, then this is the firstBlankRow
            'to consider for grouping
            If neighborColumnValue = 0 And firstBlankRow = 0 Then
                firstBlankRow = currentRow
            ElseIf neighborColumnValue <> 0 And firstBlankRow <> 0 Then
                'if firstBlankRow is assigned and this row has a value with a neighbor
                'who isn't 0, then the cell one row above this one is to be considered
                'the lastBlankRow to include in the grouping
                lastBlankRow = currentRow - 1
            End If
        End If

        'if first AND last blank rows have been assigned, then create a group
        'then reset the first/lastBlankRow values to 0 and begin searching for next
        'grouping
        If firstBlankRow <> 0 And lastBlankRow <> 0 Then
            Range(Cells(firstBlankRow, myRange.Column), Cells(lastBlankRow, myRange.Column)).EntireRow.Select
            Selection.Group
            firstBlankRow = 0
            lastBlankRow = 0
        End If
    Next
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-20T01:31:29.183

我使用 Sam 的代码进行分组而不使用 A 列。我认为其他人会发现它很有用。

```
Sub Group_Jobs()

Dim myRange As Range
Dim rowCount As Integer, currentRow As Integer
Dim firstBlankRow As Integer, lastBlankRow As Integer
Dim currentRowValue As String
Dim nextRowValue As String

Application.ScreenUpdating = False 'Stop screen updating while grouping

'select range based on given named range
Set myRange = Range("A1:A1000")
rowCount = Cells(Rows.Count, myRange.Column).End(xlUp).Row

firstBlankRow = 0
lastBlankRow = 0

'for every row in the range
For currentRow = 1 To rowCount
    currentRowValue = Cells(currentRow, myRange.Column).Value
    nextRowValue = Cells(currentRow + 1, myRange.Column).Value

'Assign firstBlankRow & lastBlankRow
    'if currentRowValue = NotBlank(Job#) And nextRowValue = NotBlank(Job#) Then Skip
    'if currentRowValue = Blank          And nextRowValue = Blank          Then Skip
    'if currentRowValue = NotBlank(Job#) And nextRowValue = Blank          Then is firstBlankRow
    'if currentRowValue = Blank          And nextRowValue = NotBlank(Job#) Then is lastBlankRow
    If Not (currentRowValue = "" Or currentRowValue = "") Then
        If (IsEmpty(nextRowValue) Or nextRowValue = "") Then
            firstBlankRow = currentRow + 1
        End If
    ElseIf (IsEmpty(currentRowValue) Or currentRowValue = "") Then
        If Not (IsEmpty(nextRowValue) Or nextRowValue = "") Then
            If firstBlankRow <> 0 Then
                lastBlankRow = currentRow
            End If
        End If
    End If
    Debug.Print "Row " & currentRow; ": firstBlankRow: " & firstBlankRow; ", lastBlankRow: " & lastBlankRow

'Group firstBlankRow & lastBlankRow
    'if first & last blank rows have been assigned, create a group
    If firstBlankRow <> 0 And lastBlankRow <> 0 Then
        'Debug.Print "Row: " & currentRow; ", Outline Level: " & ActiveSheet.Rows(currentRow).OutlineLevel
        If Not ActiveSheet.Rows(currentRow).OutlineLevel > 1 Then 'Ignore if last row is already grouped
            Range(Cells(firstBlankRow, myRange.Column), Cells(lastBlankRow, myRange.Column)).EntireRow.Select
            Selection.Group
        End If
        firstBlankRow = 0: lastBlankRow = 0 'reset the first/lastBlankRow values to 0
    End If
Next

Application.ScreenUpdating = True 'Start screen updating as macro is complete
End Sub 
```

# jquery - 更改文本字段值时触发 Jquery 验证

> ID：13337269
> 
> 赞同：1
> 
> 时间：2012-11-12T01:21:32.350
> 
> 标签：jquery, jquery-validate

有没有办法（不编辑插件）交换 keyup 或 blur 以进行更改，以便在用户键入/删除某些内容时仍然可以触发验证。

就我而言，我有诸如日期时间选择器之类的东西，某些字段会根据其他字段自动更改其值。当它的值改变时（没有 keyup 或模糊，因为它的值是由其他字段设置的）错误消息应该是干净的。

所以，我必须在每个页面中手动触发，或者有没有其他方法可以做到这一点。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T01:27:36.160

您不能交换这些行为，但您可以做的是创建一个用于验证该字段的函数，然后将该函数绑定到不同的事件，以便它始终触发您需要的验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T04:36:43.197

如果您想做类似的事情，那么您必须在选择日期后验证该字段（日期时间选择器），就像下面的一样

```
//check after your date is selected
$("yourform").validate().element( "your datetime picker field" ); 
```

上面的东西对你有用

# html - 边距：自动不居中？

> ID：13337280
> 
> 赞同：2
> 
> 时间：2012-11-12T01:24:00.223
> 
> 标签：html, css

我正在尝试将 div 居中放在文档上，它可以水平工作，但不能垂直工作：

```
width: 950px;
height: 630px;
background: #FFFFFF;
margin: auto; 
```

不应该`margin: auto`把它放在它所在的任何地方（在这种情况下是页面本身）的中心吗？我曾经有一个解决方法，但我无法让它工作。知道我做错了什么也很好，所以我可以停止这样做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T01:29:01.557

`margin: auto`不垂直对齐元素。

如果你必须支持旧版浏览器，你必须为你的 div 定义一个固定的高度：

```
div {
    position: relative;
    top: 50%;
    width: 750px;
    height: 500px; /* sample. adjust as needed */
    margin: -250px auto 0; /* half the height */
} 
```

这是小提琴：http: [//jsfiddle.net/2qmVX/](http://jsfiddle.net/2qmVX/)

* * *

如果您不关心 IE8 及以下版本，这将允许您保持流体高度：

```
div {
    position: relative;
    top: 50%;
    margin: auto;
    transform: translateY(-50%);
    /* add prefixed versions... */
} 
```

这是小提琴： http: [//jsfiddle.net/VMaVM/](http://jsfiddle.net/VMaVM/)（记住：仅限现代浏览器）。

* * *

**更新：**正如@FabrícioMatté 所指出的，您还必须对`html`&`body`元素应用 100% 的高度：

```
html, body {
    height: 100%;
} 
```

请参阅上面的演示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T01:29:02.533

正确的垂直居中是 CSS3 尚未涵盖的内容。

幸运的是，在您的情况下，由于您有固定的高度，您可以操纵`top`/`left`属性并使用负数`margin-top`并`margin-left`通过定位获得所需的行为`absolute`：

```
background: #FFFFFF;
width: 950px;
height: 630px;
top: 50%;
left: 50%;
margin: -315px 0 0 -425px; /*top is negative half of height, same for width*/
position: absolute; 
```

[**演示**](http://jsfiddle.net/d2CpS/4/show/)/[来源](http://jsfiddle.net/d2CpS/4/)

请注意，负边距在小于`div`.

* * *

这是使用表格的稍微更hackish的方式。基本思想是CSS 属性在应用于表格时与旧属性`vertical-align:middle`具有相同的效果。`valign="center"`所以 HTML 看起来像这样：

```
<table class="vcenter"><tr><td>
    <div id="myDiv">This is a centered div</div>
</td></tr></table> 
```

和CSS：

```
.vcenter {
    vertical-align: middle;
    width: 100%;
    height: 100%;
}
#myDiv {
    background: #FFF;
    width: 950px;
    height: 630px;
    margin: 0 auto;
}
html, body { height: 100%; } 
```

[**演示**](http://jsfiddle.net/sMd34/show/)/[来源](http://jsfiddle.net/sMd34/)

这种方法的优点是它完全跨浏览器——在 IE6 及更高版本、Firefox、Chrome、Opera 和 Safari 上进行了测试。尽管它应该可以工作，但我没有在移动浏览器上进行测试。它也没有小分辨率的滚动问题。我在我的一个生产站点中将这个 hack 用于居中模式。

# html - CSS 半/半背景

> ID：13337282
> 
> 赞同：3
> 
> 时间：2012-11-12T01:24:06.837
> 
> 标签：html, css, background

我到处寻找这个问题的答案。我有一个设计，我正在尝试使用 div 和 css 进行编码。图像的上半部分有一个渐变，从左到右呈不同的颜色。我发现的问题是我可以做到一半一半，并且我最终能够使图像居中，但其中一部分隐藏在背景之下。

(http://pretty-senshi.com/final-final.html) <-- 到目前为止的设计样本

[http://pretty-senshi.com/original.png](http://pretty-senshi.com/original.png) <-- 原始设计

[http://pretty-senshi.com/gradient.png](http://pretty-senshi.com/gradient.png) <-- 只需要在 X 轴上重复的背景渐变。

```
<html> <LINK href="style.css" type=text/css rel=stylesheet> </head> 
<body bgcolor="#FFFFFF" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<div id="container"><div id="rightHalf">

    </div><center><img src="images/Final-Final_02.png" id="picture"></center>
    <div id="header2">

    </div>

    </div>
    </div></div> 
```

CSS是：

```
@charset "UTF-8";
/* CSS Document */
body {background: url(images/final-final_01.png);
background-repeat:repeat-x;}
div#container {
width:100%;}
picture {z-index: 999;}

#rightHalf {
background: url(images/final-final_03.png);

background-repeat:repeat-x;
width: 50%;
position: absolute;
right: 0px;
height: 100%;
z-index: 1;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T02:57:49.527

我想使用 z-index = -1 作为#rightHalf 将解决问题。

# objective-c - 将整数存储为实例变量

> ID：13337283
> 
> 赞同：0
> 
> 时间：2012-11-12T01:24:36.290
> 
> 标签：objective-c, ios, uitableview, uiwebview

我非常接近这个。基本上我要做的是为我的 UIWebView 返回单元格的高度。我在我的 NSLOG 上打印了正确的高度。现在的问题是我需要在那个高度之外制作一个变量。到目前为止还没有运气。这是我现在所拥有的。

```
- (void)webViewDidFinishLoad:(UIWebView *)webView {
_descriptionWebView.frame = CGRectMake(_descriptionWebView.frame.origin.x, _descriptionWebView.frame.origin.y, _descriptionWebView.frame.size.width, 1);
CGSize fittingSize = [_descriptionWebView sizeThatFits:CGSizeZero];
_descriptionWebView.frame = CGRectMake(_descriptionWebView.frame.origin.x, _descriptionWebView.frame.origin.y, _descriptionWebView.frame.size.width, fittingSize.height);

NSLog(@" Fitting Size is : %f", fittingSize.height);
} 
```

它打印出将在 UIWebView（在 UITableViewCell 内）中显示的每篇文章的完美尺寸。我的主要问题是如何返回该高度 -

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
if (indexPath.section == SectionHeaderTitle) {

    // Regular
    return 54;

} else {

    return 612;
}
} 
```

我尝试使用 NSNumber、NSInteger、CGFloat、CGRect、CGSize 来制作一个 FittingSize 的实例变量......基本上我得到了“不兼容的结果类型”。

最终我想要的是`return fittingSize.height;`

到那里有什么帮助吗？非常感谢您提前。希望我没有遗漏任何东西！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T01:39:17.597

CGSize.height 是一个 CGFloat。你从哪里得到“不兼容的结果类型”？

您应该能够`CGFloat fittingHeight;`在您的界面中声明一个 CGFLoat 变量，然后在您的 -webViewDidFinishLoad 中分配它：

```
- (void)webViewDidFinishLoad:(UIWebView *)webView {
_descriptionWebView.frame = CGRectMake(_descriptionWebView.frame.origin.x, _descriptionWebView.frame.origin.y, _descriptionWebView.frame.size.width, 1);
CGSize fittingSize = [_descriptionWebView sizeThatFits:CGSizeZero];
_descriptionWebView.frame = CGRectMake(_descriptionWebView.frame.origin.x, _descriptionWebView.frame.origin.y, _descriptionWebView.frame.size.width, fittingSize.height);

fittingHeight = fittingSize.height;
} 
```

然后在`-tableView:heightForRowAtIndexPath:`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T08:40:17.480

创建一个 CGFloat 类型的类级变量并在

```
 - (void)webViewDidFinishLoad:(UIWebView *)webView
    {
      //Get the value of fittingsize.height
    } 
```

将fittingsize.height 的值保存在该变量中并在该变量中使用该变量

```
 -tableView:heightForRowAtIndexPath:indexpath
    {
      //Use the value stored of the CGFloat variable above
    } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-12T02:24:42.120

像这样强制将其转换为 CGFloat：

```
return (CGFloat)(fittingSize.height); 
```

# google-app-engine - 查询 KeyProperty 的父/祖先

> ID：13337286
> 
> 赞同：2
> 
> 时间：2012-11-12T01:25:15.017
> 
> 标签：google-app-engine, app-engine-ndb

是否可以根据 KeyProperty 的祖先（父级）进行查询？

EG，类似于以下内容：

```
class Foo(ndb.Model):
    bar = ndb.KeyProperty()

Foo.query().filter(Foo.bar.parent == some_key) 
```

也就是说，我想找到所有具有 bar 键的 foo，其中 bar 键的父级是 some_key。

如果可能的话，我想避免将其父级存储`bar`为单独的键属性。基本上我想对 KeyProperty 进行祖先查询，但如果可能的话，我看不到你怎么能做到这一点。

我当前的解决方案是使用 ComputedProperty 提取 bar 的父级并将其存储为单独的字段。这可行，但似乎没有必要，因为我已经将父键存储为栏键的一部分。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T03:16:03.363

是的，这称为祖先查询：

```
Foo.query(ancestor=some_key) 
```

更新：

在评论中进行对话后，我们清除了所需的结果。只有当相关属性被索引时，查询才会起作用。您可以通过使用计算属性并查询其值来索引父母。由于`.parent()`将返回一个密钥，这应该不是问题：

```
class Foo(ndb.Model):
  bar = ndb.KeyProperty()
  bar_parent = ndb.ComputedProperty(lambda self: self.bar.parent())

Foo.query(Foo.bar_parent == some_key) 
```

# javascript - expressjs：从父目录发送文件

> ID：13337288
> 
> 赞同：8
> 
> 时间：2012-11-12T01:25:21.827
> 
> 标签：javascript, express, sendfile

我想使用 expressjs 的 sendfile 从脚本文件的父目录发送文件。我试图做的是：

```
app.get('/', function(req, res){
    res.sendfile('../../index.html');
}); 
```

我收到一个禁止错误，因为显然 sendfile 不信任路径遍历。到目前为止，我一直无法弄清楚如何更改通过 sendfile 发送的文件的目录。有什么提示吗？

编辑：发布这个时我有点累，事实上它很容易。我会把它留在这里，以防其他人偶然发现。sendfile 有一个选项参数，可让您这样做，如下所示：

```
app.get( '/', function( req, res ){
    res.sendfile('index.html', { root: "../../"});
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-03-11T21:08:21.397

You have to mention root as the second parameter of `sendfile()`.

For example:

```
app.get('/:dir/:file', function(req, res) {
  var dir = req.params.dir,
      file = req.params.file;

  res.sendfile(dir + '/' + file, {'root': '../'});
}); 
```

You can find more details here: [https://github.com/visionmedia/express/issues/1465](https://github.com/visionmedia/express/issues/1465)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T16:05:29.810

你需要使用`express.static`.

假设您设置了以下目录：

```
/app
   /buried
       /deep
           server.js
   /public
       index.html 
```

那么你应该有以下 Express 配置：

```
var express = require('express');
var server = express.createServer();
server.configure(function(){
    server.use(express.static(__dirname + '../../public'));
});
server.listen(3000); 
```

`res.sendfile`用于将文件“细粒度”传输到客户端。[例如，请参阅 API 文档](http://expressjs.com/api.html#res.sendfile)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-12T07:26:53.617

父文件夹：-app -routes.js -index.html 在上述情况下，将以下代码添加到 routes.js 以从父目录发送文件。

```
var path=require("path") //assuming express is installed 

app.get('/', function(req, res){
res.sendFile(path.join(__dirname + '/../index.html'));
}); 
```

# c - 我的 getLine 实现只在第一次工作

> ID：13337292
> 
> 赞同：3
> 
> 时间：2012-11-12T01:26:30.093
> 
> 标签：c, getline

我有一个包含三行文本的 .txt 文件。

```
12345
67
890 
```

我正在尝试使用我的 getLine 函数将每一行读入一个字符数组，然后打印出数组：

```
int main()
{
    char line_1[100];
    char line_2[100];
    char line_3[100];

    getLine(line_1,50);
    getLine(line_2,50);
    getLine(line_3,50);

    int c;
    int i=0;

    while((c=line_1[i++]) != EOF){
        putchar(c);
    }

    i=0;
    while((c=line_2[i++]) != EOF){
        putchar(c);
    }
    i=0;
    while((c=line_3[i++]) != EOF){
        putchar(c);
    }   
} 
```

然而，这输出

```
12345
íOÌ@C@À'¡67
N¿'¡890 
```

随着乱码每次都在变化。我的getLine实现如下

```
int getLine(char line[], int size)//get a line of length size from stdin
{
    int i=0;
    int c=0;

    while(((c=getchar()) !=EOF) && (c!='\n') && i<size)
    {
        line[i++]=c;
    }

    if(c=='\n') line[i++] =c;
    line[i]='\0';
    return i;

} 
```

有谁知道可能出了什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T08:06:20.707

该`getLine`功能正常工作，但打印循环是垃圾输出的原因。

你打印输出

```
while((c=line_1[i++]) != EOF){
    putchar(c);
} 
```

but`EOF`不是字符，当然也不是字符串终止符。

您应该将循环更改为

```
while((c=line_1[i++]) != '\0'){
    putchar(c);
} 
```

或者

```
printf("%s", line_1); 
```

或者

```
fputs(line_1, stdout); 
```

# shell - 获取 curl 的输出并发送到第二个 curl 命令

> ID：13337293
> 
> 赞同：0
> 
> 时间：2012-11-12T01:26:31.467
> 
> 标签：shell, variables, curl, grep

```
curl -s http://meet97263421.adobeconnect.com/api/xml?action=common-info | \
grep -oP '(?<=<cookie>).*?(?=</cookie>)|(?<=account-id=").*?(?=")' 2>&1\ 
```

上面的 curl/grep 命令返回以下数据：

```
na3breezswp8yf3s5fghdgn4
1013353222 
```

如何将这两个输出发送到第二个 curl 命令：

```
curl "https://meet97263421.adobeconnect.com/api/xml?\
action=login&login=USERNAME&password=PASSWORD&account-id=[$1]&session=[$0]" 
```

我正在使用`[$1]`和`[$0]`作为占位符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T02:51:14.503

也许这有帮助：

```
#!/bin/bash

OUT=$(curl -s http://meet97263421.adobeconnect.com/api/xml?action=common-info \
| grep -oP '(?<=<cookie>).*?(?=</cookie>)|(?<=account-id=").*?(?=")')

# echo $OUT && echo 

Session=$(cut -f1 -d' ' <<< $OUT)
AccountID=$(cut -f2 -d' ' <<< $OUT)

curl "https://meet97263421.adobeconnect.com/api/xml?action=login&login=USERNAME&password=PASSWORD&account-id=$AccountID&session=$Session"

# or 

curl "https://meet97263421.adobeconnect.com/api/xml?action=login&login=USERNAME&password=PASSWORD&account-id=`cut -f2 -d' ' <<< $OUT`&session=`cut -f1 -d' ' <<< $OUT`" 
```

# mysql - 即使值为空也显示结果

> ID：13337294
> 
> 赞同：2
> 
> 时间：2012-11-12T01:27:13.247
> 
> 标签：mysql

```
Select CH.id, CH.studentId, ST.name, CH.recordId, RC.name 
from checklist CH, student ST, record RC
Where CH.studentId=ST.id and CH.recordId=RC.id 
```

以上是使用mysql的查询。上面查询的问题是当 CH.recordId 的值为 null 时，它不会显示任何结果。现在我的问题是即使 CH.recordId 为空，如何显示结果？在 mysql 结果选项卡中，CH.recordId 和 RC.name 列将为空。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T01:36:13.370

使用显式连接语法，以便您可以进行[左连接](http://www.w3schools.com/sql/sql_join_left.asp)：

```
select CH.id, CH.studentId, ST.name, CH.recordId, RC.name
from checklist CH
join student ST
  on ST.id = CH.studentId
left join record RC
  on RC.id = CH.recordId 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T01:36:26.483

`LEFT JOIN`表而不是`INNER JOIN`, 并使用新的 SQL-92 语法，如下所示：

```
SELECT CH.id, CH.studentId, ST.name, CH.recordId, RC.name 
FROM checklist CH
LEFT JOIN student ST ON CH.StudentId = ST.id
LEFT JOIN record RC ON CH.recordId = RC.id 
```

# matlab - 如何在 Matlab 中创建稀疏数组？

> ID：13337295
> 
> 赞同：0
> 
> 时间：2012-11-12T01:27:17.857
> 
> 标签：matlab

> **可能重复：**
> [Matlab 3d-matrix](https://stackoverflow.com/questions/12643279/matlab-3d-matrix)

有一种方法可以使用 sparse 命令在 matlab 中创建稀疏矩阵。但是我想创建一个稀疏*数组*，一个3维数组，这可能吗？

我找不到任何关于它的东西，所有出现的都是稀疏矩阵。

# java - 在 Java 中，有没有更优雅的方法从字符串的 ArrayList 中删除重复的字符串？

> ID：13337296
> 
> 赞同：6
> 
> 时间：2012-11-12T01:27:19.343
> 
> 标签：java, string, for-loop, arraylist

所以，长话短说，我有一个 Java 家庭作业，需要以各种方式操作一个长的 ArrayList 字符串（我们正在做一些事情，比如显示单词的组合，在 ArrayList 中添加和删除，没什么特别的）。我注意到一些提供的 ArrayLists 有重复的条目（并且重复项对于此作业不是必需的），所以我从老师那里得到了通过删除重复条目来清理数据的好方法。这是我想出的：

```
private static ArrayList<String> KillDups(ArrayList<String> ListOfStrings) {  

    for (int i = 0 ; i < ListOfStrings.size(); i++) {
        for (int j = i + 1; j < ListOfStrings.size(); j++) {
            //don't start on the same word or you'll eliminate it.
            if ( ListOfStrings.get(i).toString().equalsIgnoreCase( ListOfStrings.get(j).toString() )  ) {
                ListOfStrings.remove(j);//if they are the same, DITCH ONE.
                j = j -1; //removing the word basically changes the index, so swing down one.
            }                                
        }
    }
    return ListOfStrings;
} 
```

这对我的任务来说很好，但我怀疑它在现实世界中是否非常有用。有没有办法在比较过程中忽略空格和特殊字符？一般有没有更清洁的方法来处理这个问题（可能没有嵌套的 For 循环）？还有一个我不知道该问的问题吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-12T01:30:42.187

是的。它可以在 1（优雅）行中完成：

```
List<String> noDups = new ArrayList<String>(new LinkedHashSet<String>(list)); 
```

中间[`Set`](http://docs.oracle.com/javase/7/docs/api/java/util/Set.html)确保没有重复。选择的[`LinkedHashSet`](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashSet.html)实现`Set`是为了保留列表的顺序。

此外，在风格说明上：

*   使用以小写字母开头的名称命名您的方法和参数
*   在指定方法签名时总是引用抽象的（ie `List`）而不是具体的（ie ）`ArrayList`

你的整个方法是：

```
private static List<String> killDups(List<String> list) {
    return new ArrayList<String>(new LinkedHashSet<String>(list));
} 
```

对于额外的[布朗尼点](http://en.wikipedia.org/wiki/Brownie_points)，使该方法具有通用性，因此它适用于*任何*类型`List`：

```
private static <T> List<T> killDups(List<T> list) {
    return new ArrayList<T>(new LinkedHashSet<T>(list));
} 
```

如果您想忽略某些字符，我会为此创建一个类并列出这些字符。[`hashCode()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode())和方法都[`equals()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals(java.lang.Object))依赖于[`HashSets`](http://docs.oracle.com/javase/7/docs/api/java/util/HashSet.html)删除重复：

```
public class MungedString {
    // simplified code
    String s;

    public boolean equals(Object o) {
        // implement how you want to compare them here
    }

    public int hashCode() {
        // keep this consistent with equals()
    }
} 
```

然后

```
List<MungedString> list;
List<MungedString> noDupList = killDups(list); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T01:33:55.080

考虑使用`Set`

对于最简单的情况，即直接比较字符串， using`Hashset`是您想要做的：

```
Set<String> mySet = new HashSet<String>();

mySet.addAll(aListWithDuplciatedStrings); 
```

然后，里面的内容`mySet`将是唯一的字符串集。

对于忽略案例比较，这是我留给你的作业。看`TreeSet`和`Comparator`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T01:38:12.527

首先，你可以用一个漂亮的单线来做到这一点`Set`：

```
private static ArrayList<String> KillDups(ArrayList<String> ListOfStrings) {
    return new ArrayList(new LinkedHashSet(ListOfStrings));
} 
```

这将删除所有重复项。带有循环的第二个选项是将它们添加到一个新的`List`：

```
private static ArrayList<String> KillDups(ArrayList<String> ListOfStrings) {
    ArrayList<String> newList = new ArrayList<String>();
    for(String s : ListOfStrings) {
        if(!newList.contains(s)) {
            newList.add(s);
        }
    }
    return newList
} 
```

至于自定义比较。我相信有一套可以让你提供一个比较器，但我现在不记得了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T01:32:17.043

您可以使用[HashSet](http://docs.oracle.com/javase/7/docs/api/java/util/HashSet.html)而不是 ArrayList。它是一个自动丢弃重复项的容器。确定插入的项目是否是重复项是一个常数时间操作，无论集合有多大。因此，将您的 ArrayList 转换为 HashSet 并返回将删除所有重复项。

缺点是 HashSet 的顺序是不可预测的，因此当维护顺序很重要时，请改用[LinkedHashSet](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashSet.html)（这会慢一些）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-30T09:40:56.480

```
public static void removeDuplicateString(String input) {
    String value1 = manikandan;
    String value2 = manikandan;
    String finalValue = "";
    int count = 0;
    char char1;
    char char2 = 0;
    for (int i = 0; i < value1.length(); i++) {
        flag = 0;
        char1 = value1.charAt(i);
        for (int j = 0; j < value2.length(); j++) {
            char2 = value2.charAt(j);
            if (char1 == char2) {
                count++;
            }
        }

        if (count > 1) {
            finalValue=finalValue+char1;
            i=i+(count-1);
        } else {
            finalValue = finalValue + char1;
        }
        count = 0;
    }
    System.out.println(finalValue);
} 
```

}

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-30T09:28:45.890

```
import java.awt.Toolkit;
import java.util.Scanner;

class duplicate {

 public static void main(String[] args) {  

    Scanner kb = new Scanner(System. in );
    System.out.println("Entre String");
    String string = kb.nextLine();

    int length = string.length();
    if(length < 2) {
        System.out.println(string);
        return;
    }

    System.out.print(string.charAt(0));
    for (int i = 1; i < length; i++) {
        if (string.charAt(i) != string.charAt(i - 1)) {
            System.out.print(string.charAt(i));
          } 
    }
}
} 
```

# macos - 如何使用 Applescript 获取菜单项列表？

> ID：13337298
> 
> 赞同：11
> 
> 时间：2012-11-12T01:27:28.217
> 
> 标签：macos, applescript

有什么方法可以获取菜单标题下的所有菜单项列表，例如AppleScript`File`或`Edit`AppleScript？

我发现了一些相关的问题，但没有什么确切的。谷歌也没有运气。

我正在尝试获取在 Photoshop`Window`菜单中打开了哪些文件的列表，并找出哪个文件有复选标记。

[![截图-with-shadow.png](../Images/257c48fde21fd884e4417379de428151.png)](https://i.stack.imgur.com/nrgIY.png)

我想我可以通过使用类似“[在 Applescript 中，如何确定菜单项是否被选中/聚焦？](https://stackoverflow.com/questions/69030/in-applescript-how-can-i-find-out-if-a-menu-item-is-selected-focused) ”和 Accessibility Inspector 之类的东西来完成第二部分，因为它有`AXMenuItemMarkChar`

[![截图-with-shadow.png](../Images/6be1890cb5ad00b4481bdaaa17369b5b.png)](https://i.stack.imgur.com/7SzCs.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-12T01:38:47.430

我没有 Photoshop，但这适用于 Illustrator：

```
activate application "Adobe Illustrator"
tell application "System Events"
    tell process "Adobe Illustrator CS5.1"
        set xxx to name of every menu item of menu 1 of menu bar item "Window" of menu bar 1
    end tell
end tell 
```

要获取属性，您可以使用：

```
activate application "Adobe Illustrator"
tell application "System Events"
    tell process "Adobe Illustrator CS5.1"
        set xxx to value of attribute "AXMenuItemMarkChar" of menu item "tools" of menu 1 of menu bar item "Window" of menu bar 1
    end tell
end tell 
```

零场景：

```
activate application "Adobe Illustrator"
tell application "System Events"
    tell process "Adobe Illustrator CS5.1"
        set xxx to value of attribute "AXMenuItemMarkChar" of menu item "Brushes" of menu 1 of menu bar item "Window" of menu bar 1
        try
            xxx
        on error
            -- insert your code
            beep 2
        end try
    end tell
end tell 
```

# c++ - 测试连通图

> ID：13337300
> 
> 赞同：3
> 
> 时间：2012-11-12T01:27:46.253
> 
> 标签：c++, algorithm, data-structures

我已经实现了一个联合查找算法，该算法查找并连接一个无向图，其顶点由整数表示。我想知道是否有人有任何伪代码或关于如何查看组件是否“连接”的想法，即有一条从一个节点到另一个节点的路径。例如，我有以下顶点：

7（源顶点）、9（目的顶点）和8（源顶点）、7（目的顶点）都是连通的。但是，像 3（源顶点）、5（目标顶点）之类的东西不会连接到前一组组件。谁能指导我正确的方向或给我一个如何测试的想法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T01:58:42.277

[听起来好像您的图形是有向的，在这种情况下 union-find 对连通性并没有真正的帮助（如果我没记错的话，它通常用于确定Kruskal 算法](http://en.wikipedia.org/wiki/Kruskal%27s_algorithm)中的最小生成树，但这是针对无向图的）。如果您的图碰巧是无向的，您可以使用[Union-Find](http://en.wikipedia.org/wiki/Union-find)使用对所有节点的两次遍历来确定所有连接的组件：

1.  对于每个节点联合该节点与它具有边缘的所有节点。
2.  对于每个节点，找到代表节点并检查它是否被报告。如果不是，请报告并放入，例如，放入 a `std::set<T>`（用于`T`识别代表的类型）。

使用像 DFS 这样的搜索算法实际上可能更容易：

1.  对于每个节点，检查它是否已经被访问过。
2.  如果它没有被访问，它是一个新的连接组件的一部分：在节点上启动一个 DFS 并标记由此找到的每个节点（您也可以将遇到的所有节点报告为连接组件的一部分）。

该算法的优点是它也是 O(n)（在每个连接的组件仅由一个节点组成的最坏情况下，另一种算法是 O(n log n)）。两种算法都不能优雅地处理有向图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T01:31:41.170

是的，您所做的只是测试两个节点是否具有相同的根。如果在构建图形时使用路径压缩，结果会非常快。

* * *

> 我认为这是因为我正试图将其合并到 Kruskal 算法的实现中。在找到所有连接的组件后，我想对输出进行排序，以表示每个不相交集合中的每个不相交集合。很抱歉打扰您，但如果可能的话，您是否有任何伪代码来解释您的意思？

这些集合已经由一个公共根节点标识。 **完成所有 unions**后，每个唯一集合将有一个根。因此，您然后运行每个节点并调用`Find`它。这个怎么样：

```
typedef std::list< Node* > TNodeList;
typedef std::map< Node*, TNodeList > TSetMap;

TSetMap mysets;

// Assuming you have nodes stored in the list type I declared above...
for( TNodeList::iterator n = nodes.begin(); n != nodes.end(); n++ )
{
    Node *thisnode = *n;
    Node *rootnode = Find(thisnode);

    // Add to list for root.  Using the [] operator on map will create a new
    // list if none exists for that node.
    mysets[rootnode].push_back(thisnode);
} 
```

现在你有了一张包含所有集合作为单独列表的地图，你可以做你喜欢的...

```
std::cout << "Number of disjoint sets: " << mysets.size() << std::endl;
int count = 0;

for( TSetMap::iterator s = mysets.begin(); s != mysets.end(); s++ )
{
    TNodeList & nl = s->second;
    std::cout << "Set " << ++count << " contains " << nl.size() << " nodes\n";
} 
```

为了使所有这些调用`Find`高效，您应该在`Union`函数中实现路径压缩。

# events - Windows 8 应用程序异步事件

> ID：13337301
> 
> 赞同：1
> 
> 时间：2012-11-12T01:27:59.000
> 
> 标签：events, asynchronous, windows-8, .net-4.5

我在 Visual Studio 2012 Ultimate 中使用 .NET 4.5 开发了一个 Windows 8 应用程序。

我遇到的问题是，如果我可以在代码中说 TextBox 的文本值，则 OnChanged 事件会以一种不可预测的方式被触发，并且 OnChanged 事件处理程序中的代码会在我不希望它时被触发。

例如

在 OnChanged 事件处理程序中，当用户更改 TextBox 中的文本时，我可能有一些代码将应用程序状态更新为“正在编辑..”。但是，如果我自己在代码中更改文本，我不希望更改状态。

所以我创建了一个名为“更新”的全局变量，它控制 OnChanged 事件中的代码是否可以运行。

我将更新设置为真，然后将文本框文本属性设置为某个值并将更新变量设置为假。问题是，在我将 Updating 变量设置为 false 导致事件处理程序中的代码被触发后，TextBox 的 OnChanged 事件似乎被触发了。

我想这与 Win 8 应用程序的异步特性有关。

有谁知道我该如何解决这个问题？有关此行为的一些背景信息也会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T10:51:12.963

为什么不在更新文本之前删除事件处理程序并在之后添加它？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T18:00:27.843

我有同样的行为，不知道如何解决它。我还有一个全局变量 IsUpdating，它是在以编程方式更新 textbox.Text 期间设置的，旨在退出 TextChanged 事件。但正如上面提到的阿迪。这些事件在离开更新方法后触发，因此 IsUpdating 被重置为 false。结果事件完全执行并且我的修改标志被设置。

此问题已向应用热线报告，希望很快得到解决。

# extjs - 当 Windows 窗体显示失去焦点时，ExtJS 3.4

> ID：13337305
> 
> 赞同：1
> 
> 时间：2012-11-12T01:28:11.053
> 
> 标签：extjs, focus, show, extjs3

我将 ExtJS 3.4 与 Ext.Window 和 textfield 一起使用

当 textfield keyup -> ExtWindowsVar.isVisible() false 然后 ExtWindowsVar.show()

但是文本字段失去了焦点，所以我使用 setfocus 并且效果很好

当我输入韩语 '가' 时出现问题，但它的工作方式如下 'ㄱ' -> LostFocus -> SetFocus -> 'ㅏ' 结果是 'ㄱ ㅏ'

# javascript - this.name 复选框 onClick 返回未定义且什么都没有？

> ID：13337314
> 
> 赞同：0
> 
> 时间：2012-11-12T01:29:32.347
> 
> 标签：javascript, checkbox

我有一个函数，当用户选中一个获取值、名称和 iframe 页面的复选框时，它会调用该函数，然后将这些信息连接起来并将其推送到数组中。这是功能。

```
parent.genL = new Array();
 function repGenChk() {
 var chkN = this.name;
 var chkV = this.value;
 var chkP = parent.document.getElementById("selOpt").selectedIndex;
 var chkArr = chkN+":"+chkV+":"+chkP;
 parent.genL.push(chkArr);
 alert(parent.genL[parent.genL]);
} 
```

我遇到的问题是当它发出警报时，所有数组项都是这样的，“：undefined：X” X 是页码。对于推送到数组的每个项目，它应该看起来像这样，“3041：3041：3,1002：1002：1,10294：10294：10 ...”等等。它唯一得到的是 iframe 页面 id（在 chkP 变量中调用的 selOpt 变量。）。我假设我处理“这个”错误，但我不确定我是如何处理错误的？一个示例复选框看起来像这样......

```
<input type="checkbox" onclick="repGenChk();" value="9059" name="9059"> 
```

所以我希望它的工作方式是，用户通过单击复选框选择感兴趣的缩略图，复选框函数执行将“x：x：x”项推送到数组，稍后在 iframe 页面之间进行多次检查后，一些其他的东西得到完成了该信息。

非常欢迎任何和所有信息、提示、想法和建设性批评！非常感谢您对 StackOverflow 社区的帮助！

:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T03:41:27.057

我认为您需要将“this”传递给repGenChk()。实际上，您没有向 repGenChk() 传递任何内容，因此 this.name 和 this.value 在 repGenChk 函数中是未定义的。

对于输入标签：

```
<input type="checkbox" onclick="repGenChk(this);" value="9059" name="9059"> 
```

对于 repGenChk 函数：

```
parent.genL = new Array();
function repGenChk(obj) {
    var chkN = obj.name;
    var chkV = obj.value;
    var chkP = parent.document.getElementById("selOpt").selectedIndex;
    var chkArr = chkN+":"+chkV+":"+chkP;
    parent.genL.push(chkArr);
    alert(parent.genL[parent.genL]);
} 
```

# javascript - 如何在 javascript 中使用 div 类文本？

> ID：13337318
> 
> 赞同：0
> 
> 时间：2012-11-12T01:30:05.593
> 
> 标签：javascript, html

到目前为止，我能够从图像中检索替代文本，但我也试图从 div 类中检索文本以根据图像显示。这是我用来检索替代文本的脚本

> ```
>  var title = $i.attr( 'alt' );
>         $('#title').text( title ); 
> ```

现在如何替换 .attr 是 .div 吗？我是 JavaScript 新手。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T01:58:00.420

如果您正在寻找的是能够获取和设置 div 的类：

从您的 div 中获取课程：

```
var myClass = $('#title').attr('class'); 
```

设置类（假设您只想为 div 设置一个类）

```
$('#title').attr("class","someClassYouWantToSet"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T03:56:32.060

有几种方法可以做到这一点，这取决于您是否还想要 div 中的所有样式。

```
<div id="subject"><span>Hello</span> world!</div>​

var text = $('#subject').text(); //Will return only the text with #subject
var html = $('#subject').html(); //Will return all tags. eg <span></span> 
```

[小提琴展示它的工作原理](http://jsfiddle.net/TqpgR/)

[.text() 上的文档](http://api.jquery.com/text/)

[.html() 上的文档](http://api.jquery.com/html/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T01:54:26.403

你可以`innerHTML`这样使用：

```
var myTextDiv = document.getElementById('divID');
console.log(myTextDiv.innerHTML)
​ 
```

或者使用 jQuery：

```
console.log( $('divID').innerHTML ) 
```

现场观看：http: [//jsfiddle.net/scMXx/3/](http://jsfiddle.net/scMXx/3/)

# mef - 使用 MEF 导入 IronPython 或其他 DLR 语言导出的组件？

> ID：13337319
> 
> 赞同：3
> 
> 时间：2012-11-12T01:30:07.353
> 
> 标签：mef, ironpython

是否可以将 IronPython 类声明为“导出”，从而将它们添加到主机 C# 应用程序可以导入的 MEF 目录中？

我真的找不到任何具体的例子，只是猜测。

以下是我手动加载实现 .NET 接口的 Python 类的方法：

[https://github.com/versionone/VersionOne.SDK.Experimental](https://github.com/versionone/VersionOne.SDK.Experimental)

我希望能够像在 C# 中那样将属性放在 python 类上。（或等效的东西）

有没有人试过这个？

谢谢，乔什

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T21:25:47.640

对于那些感兴趣的人，我在 GitHub 上找到了一个项目，它已经做到了这一点，但有点耦合到项目中。经作者批准，我创建了一个新的存储库[IronPythonMef](https://github.com/JogoShugh/IronPythonMef)和一个[NuGet 包](https://www.nuget.org/packages/IronPythonMef)。

在 GitHub 上[的这个线程](https://github.com/brunomlopes/ILoveLucene/commit/38d2892e629c3498eb66b04ef4ba1a989e036ddb#commitcomment-2140962)中有额外的讨论。

这是它如何工作的示例：

**首先，在 C# 中声明的接口：**

```
namespace IronPythonMef.Tests.Example.Operations
{
    public interface IOperation
    {
        object Execute(params object[] args);
        string Name { get; }
        string Usage { get; }
    }
} 
```

**在 C# 中导出该接口的实现：**

```
[Export(typeof(IOperation))]
public class Power : IOperation
{
    public object Execute(params object[] args)
    {
        if (args.Length < 2)
        {
            throw new ArgumentException(Usage, "args");
        }

        var x = Convert.ToDouble(args[0]);
        var y = Convert.ToDouble(args[1]);

        return Math.Pow(x, y);
    }

    public string Name
    {
        get { return "pow"; }
    }

    public string Usage
    {
        get { return "pow n, y -- calculates n to the y power"; }
    }
} 
```

**并且，IronPython 中 IOperation 的实现：**

```
@export(IOperation)
class Fibonacci(IOperation):
    def Execute(self, n):
        n = int(n)
        if n == 0:
            return 0
        elif n == 1:
            return 1
        else:
            return self.Execute(n-1) + self.Execute(n-2)

    @property
    def Name(self):
        return "fib"

    @property
    def Usage(self):
        return "fib n -- calculates the nth Fibonacci number" 
```

下面是一个从 C# 和 IronPython 导入这些操作并执行它们的类的测试用例：

```
[TestFixture]
public class MathWizardTests
{
    [Test]
    public void runs_script_with_operations_from_both_csharp_and_python()
    {
        var mathWiz = new MathWizard();

        new CompositionHelper().ComposeWithTypesExportedFromPythonAndCSharp(
            mathWiz,
            "Operations.Python.py",
            typeof(IOperation));

        const string mathScript =
@"fib 6
fac 6
abs -99
pow 2 4
";
        var results = mathWiz.ExecuteScript(mathScript).ToList();

        Assert.AreEqual(8, results[0]);
        Assert.AreEqual(720, results[1]);
        Assert.AreEqual(99f, results[2]);
        Assert.AreEqual(16m, results[3]);
    }
} 
```

# algorithm - 欧几里得算法解决 RR' - NN' = 1\. 使用蒙哥马利算法进行模幂运算以在 python 或 Petite Chez 方案中实现费马检验

> ID：13337320
> 
> 赞同：5
> 
> 时间：2012-11-12T01:30:08.703
> 
> 标签：algorithm, scheme, modular, exponentiation, chez-scheme

这是我使用 Scheme 教授的入门编程课程中的个人挑战，但我对 Python 示例同样满意。

我已经在方案中实现了模幂的二进制方法，如下所示：

```
(define (pow base expo modu)
  (if (zero? expo)
      1
      (if (even? expo)
          (mod (expt (pow base (/ expo 2) modu) 2) modu)
          (mod (* base (pow base (sub1 expo) modu)) modu)))) 
```

这是必要的，因为 Chez Scheme 没有任何类似于 python 的 pow (base expo modu) 的实现。

现在我正在尝试实现解决模乘的蒙哥马利方法。例如，我有：

```
Trying to solve:
    (a * b) % N
N = 79
a = 61
b = 5
R = 100
a' = (61 * 100) % 79 = 17
b' = (5 * 100) % 79 = 26
RR' - NN' = 1 
```

我试图了解如何解决 RR' - NN' = 1。我意识到 R' 的答案应该是 64 而 N' 应该是 81，但不明白如何使用欧几里得算法来得到这个答案.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T01:24:22.500

扩展欧几里得算法是：

```
(define (euclid x y)
  (let loop ((a 1) (b 0) (g x) (u 0) (v 1) (w y))
    (if (zero? w) (values a b g)
      (let ((q (quotient g w)))
        (loop u v w (- a (* q u)) (- b (* q v)) (- g (* q w))))))) 
```

因此，在你的例子中，

```
> (euclid 79 100)
19
-15
1 
```

[您可以在我的博客](http://programmingpraxis.com/2009/07/07/modular-arithmetic/)上阅读更多内容。

# nested - Doctrine 1.2 中的嵌套条件语句

> ID：13337323
> 
> 赞同：1
> 
> 时间：2012-11-12T01:31:03.433
> 
> 标签：nested, doctrine-1.2, multiple-conditions

我正在使用一个使用 Doctrine 1.2 的遗留系统。我正在尝试创建一个具有多个嵌套条件的查询，如下所示：

```
SELECT DISTINCT u.*
FROM Users AS u
INNER JOIN Workplaces AS w ON u.workplaceId = w.id
INNER JOIN Municipalities AS m ON u.municipalityId = m.id
INNER JOIN Prefectures AS p ON m.prefectureId = p.id
INNER JOIN Regions AS r ON p.regionId = p.regionId
WHERE (
    (w.shortName = 'ES' AND m.id IN (:esMunicipalityIdArray))
    OR
    (w.shortName = 'JHS' AND m.id IN (:jhsMunicipalityIdArray))
    OR
    (w.shortName = 'ES' AND p.id IN (:esPrefectureIdArray))
    OR
    (w.shortName = 'JHS' AND p.id IN (:jhsPrefectureIDArray))
    OR
    (w.shortName = 'ES' AND r.id IN (:esRegionIdArray))
    OR
    (w.shortName = 'JHS' AND r.id IN (:jhsRegionIdArray))
) 
```

基本上，这里的目标是获取直辖市、县（如州或省）或地区用户的所有姓名（和电子邮件地址）。用户可以选择一个地区（包含许多都道府县）的所有用户，或者一个都道府县的所有用户，或者选定的市镇的用户。这样，您可以微调谁会收到发送给用户的特定电子邮件。是的，这是相当细粒度的，是的，它可能有点矫枉过正，但是，嘿，我喜欢这个挑战。

无论如何，我将如何在 Doctrine 1.2 中执行此操作？我不知道如何去做这样的嵌套和/或语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:46:10.547

使用 DQL，以下语句将是：

```
$query = Doctrine_Query::create()
         ->distinct(true)
         ->from("Users u")
         ->innerJoin("u.Workplaces w on u.workplaceId = w.id)
         ->innerJoin("u.Municipalities m on u.workplaceId = m.id)
         ->innerJoin("m.Prefectures p on m.workplaceId = p.id)
         ->innerJoin("p.Regions r on p.workplaceId = r.id)
         ->Where("w.shortName = 'ES' and m.id in ($esMunicipalityIdArray))
         ->orWhere("w.shortName = 'JHS' and m.id in ($jhsMunicipalityIdArray))
         ->orWhere("w.shortName = 'ES' and p.id in ($esPrefectureIdArray))
         ->orWhere("w.shortName = 'JHS' and p.id in ($jhsPrefectureIdArray))
         ->orWhere("w.shortName = 'ES' and r.id in ($esRegionIdArray))
         ->orWhere("w.shortName = 'JHS' and r.id in ($jhsRegionIdArray)); 
```

# ajax - 使用 Ajax 向控制器发送数据 - MVC 3 razor

> ID：13337336
> 
> 赞同：0
> 
> 时间：2012-11-12T01:32:47.300
> 
> 标签：ajax, asp.net-mvc-3, razor

我有一组在页面中动态更改的 PartialView。PartialView 使用 ajax 加载下一个，依此类推。其中一个有 20 个输入的形式，目前我只发送一个输入，但我怎样才能发送其余的输入？我在这个部分视图中有这个：

```
var shipping= $("input[name='shipping']:checked").val()
    $.ajax(
      {
          url: '/Home/Payment',
          type: "POST",
          data: { 'shipping': shipping},
          success: function (data) {
              $("#cart").html(data);

          }
      }); 
```

这在控制器中：

```
public ActionResult Payment(string shipping)
    {
        **do stuff*
        return PartialView("NextPartialView");
    } 
```

控制器接收表单的每个输入，但正如我之前所说的，其中有 20 个。有没有办法使用另一种技术发送数据来保持代码的清洁和可读性？

我是 MVC 和 razor 的新手

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T01:47:24.920

使用 JSON 模型绑定。 [这篇文章](http://mazharkaunain.blogspot.com/2011/03/aspnet-mvc-3-built-in-json-model.html)可以帮助您了解图片。

简而言之，创建属性名称匹配模型的 javascript 对象。将其发送给控制器，它将被绑定。另外，请注意，数字最好作为字符串发送（[看看这个](https://stackoverflow.com/a/8968207/551322)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T02:03:29.003

将您的项目放在表单中并序列化表单并发送到操作方法。

```
@model YourSomeViewModel
@using(Html.Beginform())
{
  FirstName :   @Html.TextBoxFor(x=>x.FirstName)
  LastName:   @Html.TextBoxFor(x=>x.LastName)
  Location :   @Html.TextBoxFor(x=>x.Location)
  Is Available to hire @Html.CheckBoxFor(x=x.IsAvailable)
  <input type="submit" id="btnSubmit" />
} 
```

现在在你的脚本中

```
$(function(){
  $("#btnSubmit").click(function(e){
    $.post("@Url.Action("Save","YourControllerName")", 
                          $(this).closest("form").serialize(), function(data){
            //do something with the response
    });    
  });  
}); 
```

现在您的操作方法参数将成为您的视图模型类。Mvc 模型绑定会将发布（序列化）的表单数据映射到您的视图模型类的实例。

```
[HttpPost]
public ActionResult Save(YourSomeViewModel model)
{
   //check model properties now

  //saved and respond /redirect
} 
```

# c++ - 函数重载类设计

> ID：13337337
> 
> 赞同：0
> 
> 时间：2012-11-12T01:33:10.663
> 
> 标签：c++, overloading, default-arguments

我的程序有一个 Car 和 CarManager 类，看起来类似于以下内容：

```
#include <list>

class Car
{
public:
    void Draw() { Draw(m_opacity); }
    void Draw(float opacity)
    {
    }

private:
    float m_opacity;
};

class CarManager
{
public:
    //Draw cars using their m_opacity member
    void DrawCars() 
    { 
        for(auto i = m_cars.begin(); i != m_cars.end(); i++)
            i->Draw();
    }

    //Draw cars using opacity argument
    void DrawCars(float opacity)
    {
        for(auto i = m_cars.begin(); i != m_cars.end(); i++)
            i->Draw(opacity);
    }

private:
    std::list<Car> m_cars;
}

MyApplication::OnRender()
{
    CarManager* pCarManager = GetCarManager();

    //If this condition is met, I want all cars to be drawn with 0.5 opacity.
    if(condition)
        pCarManager->DrawCars(0.5f);

    //Otherwise, draw cars using their m_opacity value.     
    else
        pCarManager->DrawCars();
} 
```

C++ 不允许将非静态成员用作默认参数，因此我重载了绘图函数。如果未提供参数，则将使用类成员调用函数的重载版本。

每辆车都有一个用于渲染的 m_opacity 成员。但是，在某些情况下，我想为我希望所有汽车使用的不透明度指定一个值。在这些情况下，我希望忽略 m_opacity 以支持我提供的值。

在此示例中，CarManager::DrawCars() 中的渲染代码相当小，因此通过对 Car::Draw() 的不同调用重复相同的代码并不是什么大问题。但是在我的实际程序中，重复所有相同的代码是不切实际的。

这开始变得混乱了。有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T01:53:07.997

一种简单的方法是使用魔法值：

```
#include <list>

class Car
{
public:
    static float noOpacity() { return -1; }

    void Draw(float opacity)
    {
        if (opacity==noOpacity()) {
            opacity = m_opacity;
        }
        // etc.
    }

private:
    float m_opacity;
};

class CarManager
{
public:
    //Draw cars using optional opacity argument
    void DrawCars(float opacity = Car::noOpacity(); )
    {
        for(auto i = m_cars.begin(); i != m_cars.end(); i++)
            i->Draw(opacity);
    }

private:
    std::list<Car> m_cars;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T02:19:28.780

有几种方法可以解决这个问题：

1.  正如另一个答案中指出的那样，您可以使用特殊值来指示应该使用默认值。如果数据类型支持明显的特殊值，这可能是正确的解决方案，但它不适用于所有类型，并且实际上相对难以维护。我在生产代码中看到了“不可能”值最终成为可能的情况，从而导致未定义的行为（例如，债券的收益率被认为始终为正，但事实证明债券的收益率可能为负）。
2.  使用`optional<T>`基本上将 a`T`与对象是否实际存在的指示捆绑在一起处理一个特殊值。如果选择确实是二进制的（使用传递的不透明度或对象的不透明度），这可以工作：默认值将使用`optional<T>`指示可选参数不存在，否则将使用其值。
3.  一个更具可扩展性的版本是传递一个函数，该函数通过在对象上调用它来确定对象的不透明度`Car`：`std::function<double(Car const&)>`. 默认值是获取`Car`'s opacity 的函数，但也可以是其他函数，包括始终返回一个常量。

Since the third option is a bit more obscure I'll provide an example below (which assumes that the `Car` has a member function `opacity()` returning the `Car`'s opacity):

```
void Car::Draw(std::function<double(Car const&)> getOpacity
                     = std::mem_fn(&Car::opacity)) {
    opacity = getOpacity(*this);
    // ...
} 
```

It is now easy to pass in other function objects somehow copying the opacity:

```
double ConstantOpacity(Car const&, double value) { return value; }
double ComputeOpacity(Car const& c, double value) { return (c.opacity() + value) / 2; }

Car* car = ...;
car->Draw(std::bind(&Car::opacity, _1));        // use the car's opacity
car->Draw(std::bind(&ConstantOpacity, _1, 0.5); // use opacity 0.5
car->Draw(std::bind(&ComputeOpacity, _1, 0.5);  // average of the car's opacity and 0.5 
```

# scala - 在 Scala 中按名称调用与按值调用，需要澄清

> ID：13337338
> 
> 赞同：250
> 
> 时间：2012-11-12T01:33:14.820
> 
> 标签：scala

据我了解，在 Scala 中，可以调用一个函数

*   按价值或
*   按名字

例如，给定以下声明，我们是否知道函数将如何被调用？

宣言：

```
def  f (x:Int, y:Int) = x; 
```

称呼

```
f (1,2)
f (23+55,5)
f (12+3, 44*11) 
```

请问有什么规则吗？

* * *

## 回答 #1

> 赞同：569
> 
> 时间：2012-11-12T01:40:20.580

您给出的示例仅使用按值调用，因此我将给出一个新的、更简单的示例来显示差异。

首先，假设我们有一个带有副作用的函数。这个函数打印出一些东西然后返回一个`Int`.

```
def something() = {
  println("calling something")
  1 // return value
} 
```

现在我们将定义两个函数，它们接受`Int`完全相同的参数，除了一个以按值调用样式 ( `x: Int`) 接收参数，另一个以按名称调用样式 ( `x: => Int`) 接收参数。

```
def callByValue(x: Int) = {
  println("x1=" + x)
  println("x2=" + x)
}

def callByName(x: => Int) = {
  println("x1=" + x)
  println("x2=" + x)
} 
```

现在，当我们使用副作用函数调用它们时会发生什么？

```
scala> callByValue(something())
calling something
x1=1
x2=1

scala> callByName(something())
calling something
x1=1
calling something
x2=1 
```

所以你可以看到，在按值调用的版本中，传入的函数调用 ( ) 的副作用`something()`只发生了一次。然而，在点名版本中，副作用发生了两次。

这是因为按值调用函数在调用函数之前计算传入表达式的值，因此每次都访问*相同的值。*相反，按名称调用函数在每次访问时*重新计算传入的表达式的值。*

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2013-07-27T19:27:19.727

下面是 Martin Odersky 的一个例子：

```
def test (x:Int, y: Int)= x*x 
```

我们想要检查评估策略并确定在这些条件下哪个更快（更少步骤）：

```
test (2,3) 
```

按值调用：test(2,3) -> 2*2 -> 4
按名称调用：test(2,3) -> 2*2 -> 4
这里以相同的步数达到结果。

```
test (3+4,8) 
```

按值调用：test (7,8) -> 7*7 -> 49
按名称调用：(3+4) *(3+4) -> 7* (3+4)-> 7*7 ->49
这里调用按价值计算更快。

```
test (7,2*4) 
```

按值调用：test(7,8) -> 7*7 -> 49
按名称调用：7 * 7 -> 49
这里按名称调用更快

```
test (3+4, 2*4) 
```

按值调用：test(7,2*4) -> test(7, 8) -> 7*7 -> 49
按名称调用：(3+4) *(3+4) -> 7* (3+4) -> 7*7 -> 49
在相同的步骤内达到结果。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-11-12T01:45:49.283

在您的示例中，所有参数都将在函数中调用**之前**进行评估，因为您只是*通过 value*定义它们。如果要按*名称定义参数，*则应传递代码块：

```
def f(x: => Int, y:Int) = x 
```

这样，在函数中调用参数**之前**`x`，不会对参数进行评估。

 **这里的这篇[小文章](http://www.tutorialspoint.com/scala/functions_call_by_name.htm)也很好地解释了这一点。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-10-30T05:42:46.127

为了在上述评论中重复@Ben 的观点，我认为最好将“按名称调用”视为语法糖。解析器只是将表达式包装在匿名函数中，以便以后可以在使用它们时调用它们。

实际上，而不是定义

```
def callByName(x: => Int) = {
  println("x1=" + x)
  println("x2=" + x)
} 
```

并运行：

```
scala> callByName(something())
calling something
x1=1
calling something
x2=1 
```

你也可以写：

```
def callAlsoByName(x: () => Int) = {
  println("x1=" + x())
  println("x2=" + x())
} 
```

并按如下方式运行它以获得相同的效果：

```
callAlsoByName(() => {something()})

calling something
x1=1
calling something
x2=1 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-10-09T11:52:55.990

**我将尝试通过一个简单的用例来解释，而不是仅仅提供一个例子**

想象一下，你想构建一个**“nagger 应用程序”**，它会在你上次被唠叨后每次唠叨你。

**检查以下实现：**

```
object main  {

    def main(args: Array[String]) {

        def onTime(time: Long) {
            while(time != time) println("Time to Nag!")
            println("no nags for you!")
        }

        def onRealtime(time: => Long) {
            while(time != time) println("Realtime Nagging executed!")
        }

        onTime(System.nanoTime())
        onRealtime(System.nanoTime())
    }
} 
```

***在上述实现中，nagger 仅在按名称传递时才起作用，原因是，当按值传递时，它将被重新使用，因此不会重新评估该值，而当按名称传递时，每个值都会重新评估访问变量的时间***

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-02-25T11:04:52.557

通常，函数的参数是按值参数；也就是说，参数的值是在传递给函数之前确定的。但是，如果我们需要编写一个函数，该函数接受一个表达式作为参数，在我们的函数中调用它之前我们不想计算它呢？对于这种情况，Scala 提供了按名称调用的参数。

按名称调用机制将代码块传递给被调用者，每次被调用者访问参数时，都会执行代码块并计算值。

```
object Test {
def main(args: Array[String]) {
    delayed(time());
}

def time() = {
  println("Getting time in nano seconds")
  System.nanoTime
}
def delayed( t: => Long ) = {
  println("In delayed method")
  println("Param: " + t)
  t
}
} 
```

```
1\. C:/>scalac Test.scala
 2\. 斯卡拉测试
 3.延迟法
 4.以纳秒为单位获取时间
 5\. 参数：81303808765843
 6.以纳秒为单位获取时间

```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-04-19T09:15:53.843

正如我所假设的，`call-by-value`上面讨论的函数只将值传递给函数。根据`Martin Odersky`它是一种评估策略，Scala 遵循在函数评估中起重要作用。但是，让它变得简单`call-by-name`。就像将函数作为参数传递给方法一样，也称为`Higher-Order-Functions`. 当方法访问传递参数的值时，它调用传递函数的实现。如下：

根据@dhg 示例，首先将方法创建为：

```
def something() = {
 println("calling something")
 1 // return value
} 
```

此函数包含一个`println`语句并返回一个整数值。创建函数，其参数为`call-by-name`：

```
def callByName(x: => Int) = {
 println("x1=" + x)
 println("x2=" + x)
} 
```

这个函数参数，定义了一个匿名函数，它返回一个整数值。其中`x`包含`0`传递参数但返回`int`值的函数定义，并且我们的`something`函数包含相同的签名。当我们调用函数时，我们将函数作为参数传递给`callByName`. 但是在`call-by-value`它只将整数值传递给函数的情况下。我们调用函数如下：

```
scala> callByName(something())
 calling something
 x1=1
 calling something
 x2=1 
```

在这个我们的`something`方法调用了两次，因为当我们访问方法中的值时，它调用了方法的`x`定义。`callByName``something`

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-07-30T19:24:52.157

按值调用是一般用例，正如这里的许多答案所解释的那样。

> **Call-by-name**将代码块传递给调用者，每次调用者访问参数时，都会执行代码块并计算值。

我将尝试通过以下用例以更简单的方式演示按名称调用

***示例 1：***

按名称调用的简单示例/用例如下函数，它将函数作为参数并给出经过的时间。

```
 /**
   * Executes some code block and prints to stdout the 
time taken to execute   the block 
for interactive testing and debugging.
   */
  def time[T](f: => T): T = {
    val start = System.nanoTime()
    val ret = f
    val end = System.nanoTime()

    println(s"Time taken: ${(end - start) / 1000 / 1000} ms")

    ret
  } 
```

***示例 2：***

[apache spark（带有scala）使用按名称调用的方式使用日志记录，请参阅`Logging`特征](https://github.com/apache/spark/blob/master/core/src/main/scala/org/apache/spark/internal/Logging.scala) ，其中它***懒惰地评估***是否`log.isInfoEnabled`从下面的方法。

```
protected def logInfo(msg: => String) {
     if (log.isInfoEnabled) log.info(msg)
 } 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-02-10T12:11:43.427

在**按值调用**中，表达式的值是在函数调用时预先计算的，并且该特定值作为参数传递给相应的函数。整个函数将使用相同的值。

而在**按名称调用中**，表达式本身作为参数传递给函数，并且仅在调用该特定参数时才在函数内部计算。

通过以下示例可以更好地理解 Scala 中按名称调用和按值调用之间的区别：

**代码片段**

```
object CallbyExample extends App {

  // function definition of call by value
  def CallbyValue(x: Long): Unit = {
    println("The current system time via CBV: " + x);
    println("The current system time via CBV " + x);
  }

  // function definition of call by name
  def CallbyName(x: => Long): Unit = {
    println("The current system time via CBN: " + x);
    println("The current system time via CBN: " + x);
  }

  // function call
  CallbyValue(System.nanoTime());
  println("\n")
  CallbyName(System.nanoTime());
} 
```

**输出**

```
The current system time via CBV: 1153969332591521
The current system time via CBV 1153969332591521

The current system time via CBN: 1153969336749571
The current system time via CBN: 1153969336856589 
```

在上面的代码片段中，对于函数调用**CallbyValue(System.nanoTime())**，系统纳秒时间是预先计算的，并且该预先计算的值已通过参数传递给函数调用。

但是在**CallbyName(System.nanoTime())**函数调用中，表达式“System.nanoTime())”本身作为参数传递给函数调用，并且在函数内部使用该参数时计算该表达式的值.

请注意 CallbyName 函数的函数定义，其中有一个**=>**符号分隔参数**x**及其数据类型。那里的特定符号表示该函数是按名称类型调用的。

换句话说，按值调用函数参数在进入函数之前被评估一次，但按名称调用函数参数仅在需要时才在函数内部进行评估。

希望这可以帮助！

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-12-27T18:00:55.370

这是我编写的一个快速示例，以帮助我目前正在学习 Scala 课程的同事。我认为有趣的是，Martin 并没有使用前面讲授的 && 问题答案作为示例。无论如何，我希望这会有所帮助。

```
val start = Instant.now().toEpochMilli

val calc = (x: Boolean) => {
    Thread.sleep(3000)
    x
}

def callByValue(x: Boolean, y: Boolean): Boolean = {
    if (!x) x else y
}

def callByName(x: Boolean, y: => Boolean): Boolean = {
    if (!x) x else y
}

new Thread(() => {
    println("========================")
    println("Call by Value " + callByValue(false, calc(true)))
    println("Time " + (Instant.now().toEpochMilli - start) + "ms")
    println("========================")
}).start()

new Thread(() => {
    println("========================")
    println("Call by Name " + callByName(false, calc(true)))
    println("Time " + (Instant.now().toEpochMilli - start) + "ms")
    println("========================")
}).start()

Thread.sleep(5000) 
```

代码的输出将如下所示：

```
========================
Call by Name false
Time 64ms
========================
Call by Value false
Time 3068ms
======================== 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-01-11T22:05:13.690

参数通常是按值传递的，这意味着它们将在被替换到函数体之前被评估。

您可以在定义函数时使用双箭头强制按名称调用参数。

```
// first parameter will be call by value, second call by name, using `=>`
def returnOne(x: Int, y: => Int): Int = 1

// to demonstrate the benefits of call by name, create an infinite recursion
def loop(x: Int): Int = loop(x)

// will return one, since `loop(2)` is passed by name so no evaluated
returnOne(2, loop(2))

// will not terminate, since loop(2) will evaluate. 
returnOne(loop(2), 2) // -> returnOne(loop(2), 2) -> returnOne(loop(2), 2) -> ... 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-07-13T06:05:48.230

互联网上已经有很多关于这个问题的奇妙答案。我将编写我收集的关于该主题的几个解释和示例的汇编，以防万一有人觉得它有帮助

**介绍**

**按值调用 (CBV)**

通常，函数的参数是按值调用的参数；也就是说，在评估函数本身之前，从左到右评估参数以确定它们的值

```
def first(a: Int, b: Int): Int = a
first(3 + 4, 5 + 6) // will be reduced to first(7, 5 + 6), then first(7, 11), and then 7 
```

**点名呼叫 (CBN)**

但是，如果我们需要编写一个函数，该函数接受一个表达式作为参数，在我们的函数中调用它之前我们不会对其进行评估呢？对于这种情况，Scala 提供了按名称调用的参数。这意味着参数按原样传递给函数，并且在替换后进行评估

```
def first1(a: Int, b: => Int): Int = a
first1(3 + 4, 5 + 6) // will be reduced to (3 + 4) and then to 7 
```

按名称调用机制将代码块传递给调用，每次调用访问参数时，都会执行代码块并计算值。在以下示例中，延迟打印一条消息，表明已输入该方法。接下来，延迟打印一条带有其值的消息。最后，延迟返回 't'：

```
 object Demo {
       def main(args: Array[String]) {
            delayed(time());
       }
    def time() = {
          println("Getting time in nano seconds")
          System.nanoTime
       }
       def delayed( t: => Long ) = {
          println("In delayed method")
          println("Param: " + t)
       }
    } 
```

> 在延迟方法
> 中以纳秒为单位获取时间
> 参数：2027245119786400

**每种情况的优缺点**

**CBN：** +更频繁地终止 * 检查以下终止上方 * + 如果相应的参数在函数体的评估中未使用，则不会评估函数参数 - 它更慢，它创建更多类（意味着程序需要加载时间更长）并且它消耗更多内存。

**CBV：** + 它通常比 CBN 效率高出指数级，因为它避免了这种按名称调用所需要的参数表达式的重复重新计算。它只对每个函数参数进行一次评估 + 它在命令式效果和副作用方面表现得更好，因为您往往会更好地了解何时评估表达式。- 它可能会在其参数评估期间导致循环 * 在终止上方检查以下 *

*如果不能保证终止怎么办？*

- 如果表达式 e 的 CBV 评估终止，则 e 的 CBN 评估也终止 - 另一个方向不正确

非终止示例

```
def first(x:Int, y:Int)=x 
```

首先考虑表达式（1，循环）

CBN: first(1,loop) → 1 CBV: first(1,loop) → 减少这个表达式的参数。由于 one 是一个循环，因此它会无限地减少参数。它不会终止

**每种情况下的行为差异**

让我们定义一个方法测试，它将是

```
Def test(x:Int, y:Int) = x * x  //for call-by-value
Def test(x: => Int, y: => Int) = x * x  //for call-by-name 
```

**案例1测试（2,3）**

```
test(2,3)   →  2*2 → 4 
```

由于我们从已经评估的参数开始，因此按值调用和按名称调用的步骤数量相同

**案例2测试(3+4,8)**

```
call-by-value: test(3+4,8) → test(7,8) → 7 * 7 → 49
call-by-name: (3+4)*(3+4) → 7 * (3+4) → 7 * 7 → 49 
```

在这种情况下，按值调用执行的步骤更少

**Case3 测试(7, 2*4)**

```
call-by-value: test(7, 2*4) → test(7,8) → 7 * 7 → 49
call-by-name: (7)*(7) → 49 
```

我们避免对第二个参数进行不必要的计算

**Case4 测试(3+4, 2*4)**

```
call-by-value: test(7, 2*4) → test(7,8) → 7 * 7 → 49
call-by-name: (3+4)*(3+4) → 7*(3+4) → 7*7 →  49 
```

*不同的方法*

首先，假设我们有一个带有副作用的函数。这个函数打印出一些东西然后返回一个 Int。

```
def something() = {
  println("calling something")
  1 // return value
} 
```

现在我们将定义两个函数，它们接受完全相同的 Int 参数，除了一个以按值调用样式 (x: Int) 和另一个以按名称调用样式 (x: => 诠释）。

```
def callByValue(x: Int) = {
  println("x1=" + x)
  println("x2=" + x)
}
def callByName(x: => Int) = {
  println("x1=" + x)
  println("x2=" + x)
} 
```

现在，当我们使用副作用函数调用它们时会发生什么？

```
scala> callByValue(something())
calling something
x1=1
x2=1
scala> callByName(something())
calling something
x1=1
calling something
x2=1 
```

所以你可以看到，在按值调用的版本中，传入的函数调用（something()）的副作用只发生了一次。然而，在点名版本中，副作用发生了两次。

这是因为按值调用函数在调用函数之前计算传入表达式的值，因此每次都访问相同的值。但是，按名称调用函数每次访问时都会重新计算传入表达式的值。

**最好使用 CALL-BY-NAME 的示例**

来自：[https ://stackoverflow.com/a/19036068/1773841](https://stackoverflow.com/a/19036068/1773841)

简单的性能示例：日志记录。

让我们想象一个这样的界面：

```
trait Logger {
  def info(msg: => String)
  def warn(msg: => String)
  def error(msg: => String)
} 
```

然后像这样使用：

```
logger.info("Time spent on X: " + computeTimeSpent) 
```

如果 info 方法不执行任何操作（例如，日志级别配置为高于此级别），则永远不会调用 computeTimeSpent，从而节省时间。这种情况在记录器中经常发生，人们经常看到字符串操作相对于正在记录的任务而言可能是昂贵的。

正确性示例：逻辑运算符。

你可能见过这样的代码：

```
if (ref != null && ref.isSomething) 
```

想象一下，你会像这样声明 && 方法：

```
trait Boolean {
  def &&(other: Boolean): Boolean
} 
```

然后，每当 ref 为 null 时，您都会收到错误消息，因为 isSomething 将在传递给 && 之前在 null 引用上调用。因此，实际的声明是：

```
trait Boolean {
  def &&(other: => Boolean): Boolean =
    if (this) this else other
} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-12-28T08:54:28.180

通过一个示例应该可以帮助您更好地理解差异。

让我们定义一个返回当前时间的简单函数：

```
def getTime = System.currentTimeMillis 
```

现在我们将通过**name**定义一个函数，它打印两次延迟一秒：

```
def getTimeByName(f: => Long) = { println(f); Thread.sleep(1000); println(f)} 
```

一个按**价值计算**：

```
def getTimeByValue(f: Long) = { println(f); Thread.sleep(1000); println(f)} 
```

现在让我们调用每个：

```
getTimeByName(getTime)
// prints:
// 1514451008323
// 1514451009325

getTimeByValue(getTime)
// prints:
// 1514451024846
// 1514451024846 
```

结果应该解释差异。该片段可[在此处](https://gist.github.com/MarounMaroun/0e2738bfa0a0923ddbe9d3d600ca5d92)获得。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-09-11T06:42:03.177

`CallByName`使用时`callByValue`调用，遇到语句时调用。

例如：-

我有一个无限循环，即如果您执行此功能，我们将永远不会得到`scala`提示。

```
scala> def loop(x:Int) :Int = loop(x-1)
loop: (x: Int)Int 
```

`callByName`函数将上述方法作为`loop`参数，并且从不在其体内使用。

```
scala> def callByName(x:Int,y: => Int)=x
callByName: (x: Int, y: => Int)Int 
```

在执行`callByName`方法时，我们没有发现任何问题（我们得到`scala`提示），因为我们没有在函数内部使用循环`callByName`函数。

```
scala> callByName(1,loop(10))
res1: Int = 1
scala> 
```

一个`callByValue`函数将上述`loop`方法作为参数，因为函数或表达式的结果在执行外部函数之前通过`loop`递归执行的函数进行评估，我们永远不会得到`scala`提示。

```
scala> def callByValue(x:Int,y:Int) = x
callByValue: (x: Int, y: Int)Int

scala> callByValue(1,loop(1)) 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-06-07T20:17:27.760

看到这个：

```
 object NameVsVal extends App {

  def mul(x: Int, y: => Int) : Int = {
    println("mul")
    x * y
  }
  def add(x: Int, y: Int): Int = {
    println("add")
    x + y
  }
  println(mul(3, add(2, 1)))
} 
```

y: => Int 是按名称调用的。按名称作为调用传递的是 add(2, 1)。这将被懒惰地评估。因此控制台上的输出将是“mul”，然后是“add”，尽管似乎首先调用了 add。按名称调用类似于传递函数指针。
现在从 y: => Int 更改为 y: Int。控制台将显示“add”后跟“mul”！常用的评价方式。

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2020-12-11T09:38:09.540

Scala 变量评估在这里更好地解释了[https://sudarshankasar.medium.com/evaluation-rules-in-scala-1ed988776ae8](https://sudarshankasar.medium.com/evaluation-rules-in-scala-1ed988776ae8)

```
def main(args: Array[String]): Unit = {
//valVarDeclaration 2
println("****starting the app***") // ****starting the app***
val defVarDeclarationCall1 = defVarDeclaration // defVarDeclaration 1
val defVarDeclarationCall2 = defVarDeclaration // defVarDeclaration 1

val valVarDeclarationCall1 = valVarDeclaration //
val valVarDeclarationCall2 = valVarDeclaration //

val lazyValVarDeclarationCall1 = lazyValVarDeclaration // lazyValVarDeclaration 3
val lazyValVarDeclarationCall2 = lazyValVarDeclaration //

callByValue({
  println("passing the value "+ 10)
  10
}) // passing the value 10
   // call by value example
  // 10

callByName({
  println("passing the value "+ 20)
  20
}) // call by name example
  // passing the value 20
  // 20
  }

  def defVarDeclaration = {
println("defVarDeclaration " + 1)
1
  }

  val valVarDeclaration = {
println("valVarDeclaration " + 2)
2
  }

  lazy val lazyValVarDeclaration = {
println("lazyValVarDeclaration " + 3)
3
  }

  def callByValue(x: Int): Unit = {
println("call by value example ")
println(x)
  }

  def callByName(x: => Int): Unit = {
println("call by name example ")
println(x)
  }
```

* * *

## 回答 #17

> 赞同：-2
> 
> 时间：2016-08-02T11:48:03.737

我认为这里的所有答案都没有正确的理由：

在按值调用中，参数只计算一次：

```
def f(x : Int, y :Int) = x

// following the substitution model

f(12 + 3, 4 * 11)
f(15, 4194304)
15 
```

您可以在上面看到所有参数都被评估是否需要，通常`call-by-value`可以很快但并不总是像这种情况下那样。

如果评估策略是，`call-by-name`那么分解将是：

```
f(12 + 3, 4 * 11)
12 + 3
15 
```

正如您在上面看到的，我们从不需要评估`4 * 11`，因此节省了一些计算，这有时可能是有益的。**

# php - ajax 新手...通过 php 从模式窗口发送电子邮件的问题

> ID：13337340
> 
> 赞同：1
> 
> 时间：2012-11-12T01:33:42.347
> 
> 标签：php, jquery, ajax

我没有使用很多 AJAX，并且有点沮丧。在我的小页面上，当用户按下按钮时，会打开一个模式表单，并提示输入电子邮件、名字、姓氏和电话号码。我正在尝试使用 ajax 将此信息传递给“sendmessage.php”文件，但有些东西不起作用。

**HTML：**

```
<!--hidden inline form-->
     <div id="inlineForm">
         <h3>Estimate Request</h3>
         <form id="estimateForm" action="#" method="post" name="estimateForm">
             <label for="formFirstName">First Name:</label>
             <input id="formFirstName" type="text" name="formFirstName"><br />
             <label for="formLastName">Last Name:</label>
             <input id="formLastName" type="text" name="formLastName"><br />
             <label for="formPhone">Phone:</label>
             <input id="formPhone" type="text" name="formPhone" placeholder="(###)###-####"><br />
             <label for="formEmail">Email:</label>
             <input id="formEmail" type="email" name="formEmail" placeholder="example@example.com"><br />
             <button id="formSendButton">Send</button>
        </form>
    </div><!--end of inlineForm div--> 
```

**Javascript/AJAX：**

```
 $("#formSendButton").on("click", function(){
        var emailVal = $("#formEmail").val();
        var firstNameVal = $("#formFirstName").val();
        var lastNameVal = $("#formLastName").val();
        var phoneVal = $("#formPhone").val();
        var validEmail = validateEmail(emailVal);
        var validPhone = validatePhone(phoneVal);
        var data = $("#estimateForm").serialize();
          ///////    A bunch of checks to ensure proper values //////
    if(validEmail == true && lastNameVal.length >= 3 && firstNameVal.length >= 3 && validPhone == true){
        $("#estimateForm").css("padding-bottom","23px");
        $("#formSendButton").replaceWith("<em>sending...</em>");
        $.ajax({
            type: 'POST',
            url: 'sendmessage.php',
            data: data,
            success: function(data) {
            if(data == "true") {
                $("#estimateForm").fadeOut("fast", function(){
                $(this).before("<strong>Success!</strong>");
                setTimeout("$.fancybox.close()", 1000);
            });
        }
    }
    });
  }
}) 
```

最后，

**PHP：**

```
<?php
$sendto   = "trevorjames39@gmail.com";
$usermail = $_POST['formEmail'];
$firstName = $_POST['formFirstName'];
$lastName = $_POST['formLastName'];
$phone = $_POST['formPhone'];
$subject  = "Request for Quote";
$headers  = "From: " . strip_tags($usermail) . "\r\n";
$headers .= "Reply-To: ". strip_tags($usermail) . "\r\n";
$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: text/html;charset=utf-8 \r\n";

$msg  = "<html><body style='font-family:Arial,sans-serif;'>";
$msg .= "<h2 style='font-weight:bold;border-bottom:1px dotted #ccc;'>Request for Quote</h2>\r\n";
$msg .= "<p><strong>Customer First Name:</strong>-----".$firstName."</p>\r\n";
$msg .= "<p><strong>Customer Last Name:</strong>------".$lastName."</p>\r\n";
$msg .= "<p><strong>Customer Phone Number:</strong>---".$phone."</p>\r\n";
$msg .= "<p><strong>Customer Email address:</strong>--".$usermail."</p>\r\n";
$msg .= "</body></html>";

if(mail($sendto, $subject, $msg, $headers)) {
    echo "true";
} else {
    echo "false";
}

?> 
```

我对php有功能性的了解，但是ajax ....

此外，这主要是从我在[这里找到的教程中挑选出来的](http://designwoop.com/2012/07/tutorial-coding-a-jquery-popup-modal-contact-form/)

感谢任何花时间看这个的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T22:20:52.287

您的默认表单操作实际上正在启动。我认为您需要通过执行以下操作来禁用它：

```
 onsubmit="return false;" 
```

或者，您可以命名您的（当前匿名 onclick）函数并进行表单操作

```
action="javascript:yourFunction()" 
```

另外：我假设 validateEmail 和 validatePhone 是在您的代码中定义的。

# android - 制作只有图像而没有背景的Android图标？

> ID：13337343
> 
> 赞同：1
> 
> 时间：2012-11-12T01:34:08.750
> 
> 标签：android, image, icons

[http://i.imgur.com/TjNrI.png?1](http://i.imgur.com/TjNrI.png?1) {图标的图像}

正如您在图片中看到的，电话图标中有一个灰色的轮廓。如何摆脱该背景（灰色）并仅将图像作为我的骗局。

```
 <ImageButton
      android:id="@+id/imageButton1"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:src="@drawable/phone" /> 
```

这是我已经拥有的。

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T01:38:57.487

尝试：

```
<ImageButton
  android:id="@+id/imageButton1"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:src="@drawable/phone"
  android:background="@null" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T03:58:02.187

ImageButtons 周围总是有边框，只需将 ImageButton 替换为 ImageView 即可解决此问题。在 TmageButton 上工作的所有类和方法都将在 ImageView 上工作，如 OnClickListeners 等。

```
 <ImageView
  android:id="@+id/imageView1"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:src="@drawable/phone" /> 
```

# php - foreach 两个数组，用其他项替换一个项

> ID：13337345
> 
> 赞同：0
> 
> 时间：2012-11-12T01:34:28.100
> 
> 标签：php, arrays, multidimensional-array, foreach, preg-match-all

假设我有两个从 pre_gmatch 得到的数组：

```
preg_match_all('#<div class="cloud_flow_big">(.*?)</div>#is', $mystring, $names, PREG_SET_ORDER);
preg_match_all('#<div class="bgframe(.*?)</div></div>#is', $mystring, $numbers, PREG_SET_ORDER); 
```

获取数组中的项目计数始终相同。所以这是了解发生了什么的代码，并且在第一个数组的所有项目中都有一个重复的单词（在这种情况下这个单词是**数字**）：

```
foreach ($names as $key => $name) {
    $i++;
$nameclean = str_replace ("number", $numbers[$key], $names[$key]);
echo $nameclean;
} 
```

那么如何foreach第一个数组，但结果是将第一个数组中的所需单词替换为数组2中的所需项。示例：数组$names中的第一项中的单词**编号**应替换为数组$numbers中的第一项

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T04:28:11.217

让我们稍微简化一下并将 preg_match 排除在等式之外。我们将从两个单独的数组开始。

```
$numbers = array(
  "I like having number eyes.",
  "there are number days in a week,",
  "A car normally has number wheels.",
);

$names = array( "two", "seven", "four"); 
```

使用 foreach 回答您的问题，您可以执行以下操作

```
$i = 0;
foreach ($numbers as $number) {
  $numbers[$i] = str_replace ("number", $names[$i], $number);
  $i++;
} 
```

然而，这在 for 循环中会更好地工作

```
for ($i = 0; $i < count($numbers); $i++) {
  $numbers[$i] = str_replace ("number", $names[$i], $numbers[$i]);
} 
```

这两个的结果是

```
Array
(
    [0] => I like having two eyes.
    [1] => there are seven days in a week,
    [2] => A car normally has four wheels.
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T04:45:34.123

也许调用 first **array_replace ()**用第二个数组中的值替换第一个数组的值会做你想要的。

希望这可以帮助。

# python - Python 无法从 phi 创建 mpf

> ID：13337346
> 
> 赞同：3
> 
> 时间：2012-11-12T01:34:36.087
> 
> 标签：python, sympy, mpf

在修复上一个问题（[Python AttributeError:cos](https://stackoverflow.com/questions/13336048/python-attributeerrorcos)）中的导入并使用 sympy 更改一点函数之后：

```
from sympy import *
from sympy import Symbol
from sympy.solvers import nsolve

# Symbols
theta = Symbol('theta')
phi = Symbol('phi')
phi0 = Symbol('phi0')
H0 = Symbol('H0')
# Constants
a = 0.05 
b = 0.05**2/(8*pi*1e-7)
c = 0.001/(4*pi*1e-7)
phi0 = 60*pi/180 
H0 = -0.03/(4*pi*1e-7)
def m(theta,phi):
    return Matrix([[sin(theta)*cos(phi), sin(theta)*cos(phi), cos(phi)]])
def h(phi0):
    return Matrix([[cos(phi0), sin(phi0), 0]])
def k(theta,phi,phi0):
    return m(theta,phi).dot(h(phi0))
def F(theta,phi,phi0,H0): 
    return -(a*H0)*k(theta,phi,phi0)+b*(cos(theta)**2)+c*(sin(2*theta)**2)+sin(theta)**4*sin(2*phi)**2
def F_phi(theta,phi,phi0,H0):
    return simplify(diff(F(theta,phi,phi0,H0),phi))
def G(phi):
    return F_phi(pi/2,phi,phi0,H0)
solution = nsolve(G(phi), phi)
print solution 
```

我得到这个回溯：

```
Traceback (most recent call last):
File "Test.py", line 31, in <module>
solution = nsolve(G(phi), phi)
File "/usr/lib64/python2.7/site-packages/sympy/solvers/solvers.py", line 2050, in nsolve
return findroot(f, x0, **kwargs)
File "/usr/lib64/python2.7/site-packages/mpmath/calculus/optimization.py", line 908, in findroot
x0 = [ctx.convert(x0)]
File "/usr/lib64/python2.7/site-packages/mpmath/ctx_mp_python.py", line 662, in convert
return ctx._convert_fallback(x, strings)
File "/usr/lib64/python2.7/site-packages/mpmath/ctx_mp.py", line 561, in _convert_fallback
raise TypeError("cannot create mpf from " + repr(x))
TypeError: cannot create mpf from phi 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T06:36:30.910

的第二个参数`nsolve`应该是初始猜测，而不是符号。从文档字符串

```
Solve a nonlinear equation system numerically::

    nsolve(f, [args,] x0, modules=['mpmath'], **kwargs)

f is a vector function of symbolic expressions representing the system.
args are the variables. If there is only one variable, this argument can
be omitted.
x0 is a starting vector close to a solution. 
```

所以你想要类似`nsolve(G(phi), 0)`or`nsolve(G(phi), 3)`等​​的东西（取决于你想要什么解决方案）。

# c - 查找 pcap.h 和链接的问题

> ID：13337349
> 
> 赞同：8
> 
> 时间：2012-11-12T01:34:42.867
> 
> 标签：c, linux, fedora, libpcap

我正在开发 Fedora 17，我想用 libpcap 编程。问题是我的计算机没有找到 pcap.h，因为我已经安装了 libpcap 和 libpcap-devel，这真的很奇怪。我相信使用该库的我的站上也可以使用wireshark 和snort。所以当我用...编译我的代码时

```
#include <pcap.h>
... Code 
```

并使用 gcc my_file.c -lpcap，我得到编译器错误说......找不到 pcap.h。奇怪的是我在 /libraries/ 目录中看到了我的 libpcap.so 文件。我弄完了 ..

yum 安装 libpcap 和 yum 安装 libpcap-devel

我不知道 Fedora 为什么要这样对我。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-10-11T10:43:17.557

您的库可能丢失，安装并链接它

```
yum install libpcap-devel 
```

在你的makefile中添加：

```
-L/usr/lib -lpcap 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-12T02:03:08.903

尝试

```
~$ whereis pcap 
```

然后正如mata所说

```
gcc -lpcap -I{path} file.c 
```

`{path}`给您的路径在哪里`whereis`，您将选择末尾带有 pcap.h 子字符串的路径（没有 pcap.h 部分）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-12T01:40:34.680

您必须指定安装标头的文件夹，例如：

```
gcc -I/usr/include/pcap my_file.c -lpcap 
```

尝试`locate pcap.h`找到与`-I`交换机一起使用的正确目录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-27T11:45:14.073

要在 C++ 中执行程序：

对于 c++ 程序

```
 g++ program_name.cpp -lpcap 
```

# asp.net-mvc - ASP.NET 路由不包含控制器名称的 URL

> ID：13337350
> 
> 赞同：1
> 
> 时间：2012-11-12T01:34:48.017
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我想指向以下网址：

```
http://myweburl/Wheel/466/Direction/903/Highlight/7 
```

对于控制器动作：

```
public ActionResult Index(int wheel, int direction, int highlight) 
```

在控制器上，`VehicleController`我仍然希望将我的主页/索引保留为站点的根 url。所以如果有人进入

```
http://myweburl/ 
```

他们将被定向到`Home/Index`我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T03:03:57.323

只需将以下路由添加为默认路由（主页/索引）上方的路由

```
routes.MapRoute(
    name: "WheelRoute",
    url: "Wheel/{wheel}/Direction/{direction}/Highlight/{highlight}",
    defaults: new { controller = "VehicleController", action = "Index" }
 ); 
```

# php - 图像突出显示

> ID：13337353
> 
> 赞同：0
> 
> 时间：2012-11-12T01:35:16.197
> 
> 标签：php, javascript, jquery

Bergi（堆栈溢出用户）非常慷慨地帮助我想出了一个使用 jQuery 进行图像交换的解决方案。它现在在悬停时交换，但我想让它在您当前的子站点上保持突出显示（例如，我点击“漫画”页面，“漫画”保持突出显示）。那可能吗？谢谢！

```
 <script type="text/javascript">
        var images = {
            "comicssubsite": [
                "./images/SiteDesign/Comics_subsites_hover.png",
                "./images/SiteDesign/Comics_subsites.png"
            ],
            "artworksubsite": [
                "./images/SiteDesign/Artwork_subsites_hover.png",
                "./images/SiteDesign/Artwork_subsites.png"
            ],
            "aboutsubsite": [
                "./images/SiteDesign/About_subsites_hover.png",
                "./images/SiteDesign/About_subsites.png"
            ],
            "blog": [
                "./images/SiteDesign/Blog_othersites_hover.png",
                "./images/SiteDesign/Blog_othersites.png"
            ],
            "facebook": [
                "./images/SiteDesign/Facebook_othersites_hover.png",
                "./images/SiteDesign/Facebook_othersites.png"
            ]
        };

        jQuery(document).ready(function($) {
            $("#comicssubsite, #artworksubsite, #aboutsubsite, #blog, #facebook").hover(function(e) {
                 // mouseover handler
                 if (this.id in images) // check for key in map
                     this.src = images[this.id][0];
            }, function(e) {
                 // mouseout handler
                 if (this.id in images)
                     this.src = images[this.id][1];
            });
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T02:02:33.257

Zotal Toth 的答案应该有效，但是您应该考虑像这样更改鼠标处理程序，除非您希望图像变回来，一旦用户将鼠标悬停在它上面：

```
// mouseout handler
var section = document.location.href.split("/")[url.split("/").length-1].split(".")[0];
if (this.id in images) {
   if this.id != section
       this.src = images[this.id][1];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T01:58:01.347

以下假设您的页面名为`comicssubsite.*`等`artworksubsite.*`：

```
var url = window.location.href;

for (key in images) {
    if ( url.indexOf( key ) > -1 ) {
        alert(key);

        // highlight your menu item
        $( "#" + key ).attr( "src", images[key][0] );
    }
} 
```

# ruby - Ruby 字母数字检查

> ID：13337354
> 
> 赞同：7
> 
> 时间：2012-11-12T01:35:44.080
> 
> 标签：ruby, regex

我想检查`foo`Ruby 中的变量是否为非空和字母数字。我知道我可以遍历每个字符并检查，但这是更好的方法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-12T01:48:49.247

### 使用 Unicode 或 POSIX 字符类

要验证字符串是否仅匹配字母数字文本，您可以使用锚定字符类。例如：

```
# Use the Unicode class.
'foo' =~ /\A\p{Alnum}+\z/

# Use the POSIX class.
'foo' =~ /\A[[:alnum:]]+\z/ 
```

### 锚定是必不可少的

锚定你的表达的重要性怎么强调都不为过。如果没有锚定，以下情况*也是*正确的：

```
"\nfoo" =~ /\p{Alnum}+/
"!foo!" =~ /\p{Alnum}+/ 
```

这不太可能是您所期望的。

# parameters - Lisp：为什么说我只给函数一个参数？

> ID：13337356
> 
> 赞同：-1
> 
> 时间：2012-11-12T01:36:14.873
> 
> 标签：parameters, lisp

编码：

```
(defun len (x count)
  (cond ((null x) ())
        (t (+ count 1)
           (len (cdr x))))) 
```

我尝试使用 (len '(abc) 0) 调用此函数，但我收到一条错误消息，指出我只发送函数一个参数，它需要两个参数。

我究竟做错了什么？我特别困惑，因为我使用完全相同的代码运行了一次函数而没有错误，但后来它决定它不想再工作了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T02:17:51.980

具有`(len '(a b c) 0)`正确数量的参数，但是您在函数内部的递归调用`(len (cdr x))`, 没有。它缺少计数的第二个参数。

在相关说明中，您正在计算`(+ count 1)`，但没有对计算结果做任何事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T14:23:07.017

增加@sepp2k 的答案，您想要做的是将递增`count`的作为第二个参数传递给`len`，并且还返回`count`而不是`NIL`空参数：

```
(defun len (x &optional (count 0))
  (if x 
      (len (cdr x) (1+ count))
      count)) 
```

# data-structures - 哈希树有什么用？

> ID：13337364
> 
> 赞同：7
> 
> 时间：2012-11-12T01:37:05.093
> 
> 标签：data-structures, hash

我在 Wikipedia 上阅读了有关[哈希树](https://en.wikipedia.org/wiki/Hash_tree)的信息，但我不明白这种结构的好处或目的——它们似乎需要更多的哈希，而不仅仅是每片叶子一个，而没有大量使用额外的哈希。

例如，维基百科上的用例是它们用于验证 P2P 系统中接收到的数据。但是，为什么这比在没有树结构的情况下对块编号及其哈希进行一对一映射要好呢？

有人可以解释一下哈希树如何以及为什么有用吗？

提前致谢，

摩西

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-12T01:53:09.027

1.  哈希树可以并行计算。如果您有两个数据块要散列，则可以使用两个处理器以两倍的速度计算散列。这仅在您的哈希速度低于您的 IO 速度时才有效，这不太可能。

2.  哈希树可以从单个块的哈希计算，或者从正确对齐的较大部分的哈希计算。这个很重要。

例如，如果我想向您发送一个文件，我可以将其分成 1 MiB 的块，然后将每个块及其 SHA-256 哈希发送给您。如果任何单个块的哈希不正确，那么您可以再次请求该块。最后，我可以对文件的树形哈希进行签名并将签名的哈希发送给您。您可以通过散列每个块散列（您已经验证）来验证散列，这比重新散列整个文件要快得多。

### 为什么使用树哈希？

每当您想要计算文件的一部分和整个文件的哈希时，树哈希都是有利的。使用像 SHA-256 这样的常规哈希，您必须分别对文件块和整个文件进行哈希处理。如果文件为 8 GiB，这可能需要相当长的时间。使用树哈希，因为块的哈希用于计算文件的哈希，所以计算两个哈希都不需要额外的工作。

### 树哈希有多少额外的工作？

计算树哈希的“额外工作”实际上是最少的。是的，它确实需要计算额外的哈希值——但只需要 O(1) 额外的工作。如果您的块大小为 1 MiB，那么如果您的文件为 1 MiB 或更小，那么额外的工作量大约为零。随着数据大小的增加，每个数据块的额外工作量将接近两个哈希值中的 1 个额外哈希值——对于 SHA-256，每 1 MiB 数据最多只对核心进行两次额外评估（一次为输入哈希，一次用于填充）。那不是很多。

# php - 将mysql行变成列

> ID：13337366
> 
> 赞同：1
> 
> 时间：2012-11-12T01:37:42.710
> 
> 标签：php, mysql, sql

我有一个包含状态列的表，状态是 1-8 之间的数字。

我可以使用查询

```
SELECT status, COUNT(id) AS total 
FROM cart_orders 
GROUP BY status; 
```

要获得如下所示的结果：

```
status | total
1      | 10
2      | 15
3      | 8
4      | 51
5      | 65 
... 
```

但这意味着每次我需要数据时，我都必须这样做：

```
$status = array(1 => null, 2 => null, 3 => null, 4 => null, 
                5 => null, 6 => null, 7 => null, 8 => null);

foreach($rows as $row){
    $status[$row['status']] = $row['total'];
} 
```

其中，虽然不是很多代码，但我想避免这样做，

我想要的是修改查询，所以我最终得到一个如下所示的单行：

```
1  | 2  | 3  | 4  | 5   
10 | 15 | 8  | 51 | 65 ... 
```

所以我可以去，例如`$row['4']`

我能想到的唯一方法是将每一列作为一个子查询，我宁愿使用代码而不是有 8 个子查询。另一种选择是自行加入表格 7 次，但假设这也不理想？

我还能怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T01:44:09.407

您要求做的事情称为“枢轴查询”，遗憾的是 MySQL 本身不支持该查询。您必须做的是单独指定每一行，如下所示：

```
SELECT
   SUM(IF (status = 1, total, 0)) AS '1'
   ... 
```

..但这非常冗长——特别是如果你有很多列。我认为你的 PHP 比它需要的更详细一点，因为你不需要提前声明数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T01:43:51.157

这不是您要更改的查询，而是您如何显示从中获得的信息。尝试这样的事情

```
// insert code to whatever defines your $rows variable

$string1 = "<tr>";
$string2 = "<tr>";
foreach($rows as $row) {
  $string1 .= "<td>" . $row['status'] . "</td>";
  $string2 .= "<td>" . $row['total'] . "</td>";
}
$string1 .= "</tr>\n";
$string2 .= "</tr>\n";

echo "<table border=\"1\">\n";
echo $string1;
echo $string2;
echo "</table>"; 
```

# python - 电子邮件查找器（网络）

> ID：13337367
> 
> 赞同：0
> 
> 时间：2012-11-12T01:37:53.220
> 
> 标签：python, email

此应用程序将在网站上运行并查找所有电子邮件并将其返回。

```
def testEmails(url):
    'Test the emails() function'
    email = ''
    content = urlopen(url).read().decode()
    pattern='[A-Za-z0-9_.]+\@[A-Za-z0-9_.]+\.'
    for attr in content:
        if attr[0] == 'href':
           print(attr)
           email+='{} '.format(attr)
    emails = re.findall(pattern,email)
    return emails 
```

我一直收到一个空白字符串有人知道为什么吗？

编辑：

这是我当前的代码：

```
def emails(content):
'return list of email addresses contained in string content'
    email = []
    content = urlopen(url).read().decode()
    pattern='[A-Za-z0-9_.]+\@[A-Za-z0-9_.]+\....'
    email.append(re.findall(pattern,content))
    print(email) 
```

但由于某种原因，我得到：

```
[['somePERSON@university.ca"']] 
```

代替 ：

```
['somePERSON@university.ca'] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T01:54:20.680

`urlopen().read().decode()`返回一个 Unicode 字符串。所以循环遍历它会遍历单个字符。不是您要查找的 HTML 属性。您应该使用 HTMLParser 来提取属性，或者在整个文档上运行 re.findall（更粗略，但也会以纯文本形式提取电子邮件地址）。

# java - XStream 上的等效 DROP_ROOT_MODE 用于 XML 转换

> ID：13337368
> 
> 赞同：0
> 
> 时间：2012-11-12T01:37:56.027
> 
> 标签：java, xml-parsing, marshalling, xstream, document-root

我怀疑是否可以使用 XStream 忽略转换表单 Object to XML 上的 xml 根元素，或者是否有任何方法可以将根元素替换为其他元素，我的意思是：

我有一个函数可以将自定义运行时创建的对象解析为 XML，例如：

```
public static String entityToXML(GenericResponseObject entity) {
    XStream xstream = new XStream(new StaxDriver());

    xstream.autodetectAnnotations(true);
    xstream.registerConverter(new GenericResponseAttributeConverter());
    String xml = xstream.toXML(entity);

    return xml;
} 
```

为此，我弄得一团糟：

我有 GenericResponseObject 和 GenericResponseAttribute 类，想法是在运行时拥有一个具有尽可能多的自定义属性的对象：

```
@XStreamAlias("objectResult")
public class GenericResponseObject {

    @XStreamAlias("attributes")
    @XStreamImplicit
    private ArrayList<GenericResponseAttribute> attributes;

    public GenericResponseObject() {
        this.attributes = new ArrayList();
    }

    public void addAttribute(String name, Object value) {
        this.attributes.add(new GenericResponseAttribute(name, value));
    }
} 
```

以及 GenericResponseAttribute 类：

```
@XStreamAlias("attribute")
public class GenericResponseAttribute {

    private String name;
    private Object value;

    public GenericResponseAttribute(String name, Object value) {
        this.name = name;
        this.value = value;
    }

    public String getName() {
        return this.name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public Object getValue() {
        return this.value;
    }

    public void setValue(Object value) {
        this.value = value;
    }
} 
```

正如您所读到的，每个类都有其用于别名和隐式列表的 XStream 注释，因此，让我向您展示我为 GenericResponseAttribute 类制作的自定义转换器：

```
public class GenericResponseAttributeConverter implements Converter {

    @Override
    public boolean canConvert(Class type) {
        return type.equals(GenericResponseAttribute.class);
    }

    @Override
    public void marshal(Object o, HierarchicalStreamWriter writer, MarshallingContext mc) {
        GenericResponseAttribute value = (GenericResponseAttribute)o;
        writer.startNode(value.getName());
        mc.convertAnother(value.getValue());
        writer.endNode();
    }

    @Override
    public Object unmarshal(HierarchicalStreamReader reader, UnmarshallingContext uc) {
        throw new UnsupportedOperationException("Not supported yet.");
    }
} 
```

因此，如果我在运行时构建一个 GenericResponseObject，并使用我的静态方法将其解析为 XML，则 K 会得到如下内容：

```
response = new GenericResponseObject();
response.addAttribute("user", "alex");
response.addAttribute("otherAtt", "TEST");
System.out.println(XMLUtil.entityToXML(response)); 
```

println() 函数的结果是：

```
<objectResult>
    <attribute>
        <user>hugo</user>
    </attribute>
    <attribute>
        <otherAtt>TEST</otherAtt>
    </attribute>
</objectResult> 
```

这几乎是我想要的，但我真的需要省略 GenericResponseAttribute 类上的根元素，重要的是要说对于我上面显示的根节点，总是只存在一个节点，属性名称与属性值的内容。因此，如果我删除当前元素，它将始终是一个根元素，例如，我需要的 previos XML 的结果是：

```
<objectResult>
    <user>hugo</user>
    <otherAtt>TEST</otherAtt>
</objectResult> 
```

我的需求非常基本，但我不知道如何正确处理，我已经搜索过，似乎 HierarchicalStreamWriter 类中没有像 deletRootNode() 或 replaceRootNode() 这样的方法，也没有 @XStreamNoRoot 或 @XStreamMakeRoot 注释我可以在 GenericResponseAttribute 中使用，所以，这就是我在这里问的原因，如果你知道如何做到这一点，请帮助我。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T17:22:45.153

当我在将对象解析为 XML 后最终使用字符串替换时，我的意思是：

```
public static String entityToXML(Object entity) {
    XStream xstream = new XStream(new StaxDriver());

    xstream.autodetectAnnotations(true);
    xstream.registerConverter(new GenericResponseAttributeConverter());
    String xml = xstream.toXML(entity);

    xml = xml.replace("<attribute>", "");
    xml = xml.replace("</attribute>", "");

    return xml;
} 
```

但是，这不是一个很酷的解决方案，如果您有另一个解决方案，请告诉我。

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-22T10:27:49.243

我提出的解决方案是基于对类结构的修改，因为我找不到动态改变字段的方法，我认为这不是一个好习惯。实际上，xml 结构必须始终相同，但您可以跳过一些在 POJO 中将它们设置为 null 的字段

在我的解决方案中，我更改了问题的两个类别，最后有一个示例说明如何将 xml 映射到相应的对象并编辑添加额外属性的对象，然后将其映射到具有新属性的 xml 字符串

这是我的解决方案：

```
 @XStreamAlias("attribute")
    class GenericResponseAttribute {

        @XStreamAlias("user")
        private String user;

        @XStreamAlias("otherAtt")
        private String otherAtt;

        public GenericResponseAttribute(String user, String otherAttr) {
            super();
            this.user = user;
            this.otherAtt = otherAttr;
        }

    }

    @XStreamAlias("objectResult")
    class GenericResponseObject {

        @XStreamAlias("attributes")
        @XStreamImplicit
        private ArrayList<GenericResponseAttribute> attributes;

        public GenericResponseObject() {
            this.attributes = new ArrayList<>();
        }

        public void addAttribute(String name, String otherAttr) {
            this.attributes.add(new GenericResponseAttribute(name, otherAttr));
        }
    }

    String xml=""+
            "<objectResult>"+
            "   <attribute>"+
            "       <user>hugo</user>"+
            "   </attribute>"+
            "   <attribute>"+
            "       <otherAtt>TEST</otherAtt>"+
            "   </attribute>"+
            "</objectResult>";

    XStream stream=new XStream();
    XStream.setupDefaultSecurity(stream);
    stream.autodetectAnnotations(true);
    stream.addPermission(AnyTypePermission.ANY);
    stream.autodetectAnnotations(true);
    stream.allowTypes(new Class[] {GenericResponseObject.class});
    stream.addImplicitCollection(GenericResponseObject.class, "attributes", GenericResponseAttribute.class);
    stream.alias("objectResult", GenericResponseObject.class);
    GenericResponseObject obj = (GenericResponseObject) stream.fromXML(xml);
    obj.addAttribute("another", "3");
    String xml2 = stream.toXML(obj);
    System.out.println(xml2); 
```

# windows-8 - 从辅助角色调用 Windows Azure 移动服务

> ID：13337378
> 
> 赞同：0
> 
> 时间：2012-11-12T01:39:25.670
> 
> 标签：windows-8

我在 Windows Azure 中有一个工作进程，我想知道是否可以从服务器上的工作进程调用 Windows Azure 移动服务。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T20:16:54.357

不确定你是否还在寻找这个，但我找到了一个可以工作的 REST API 参考（虽然我还没有使用它）。 [http://msdn.microsoft.com/en-us/library/windowsazure/jj710108.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/jj710108.aspx)

# objective-c - 使用 iCarousel 切换到另一个视图

> ID：13337380
> 
> 赞同：0
> 
> 时间：2012-11-12T01:39:54.873
> 
> 标签：objective-c, ios, icarousel

我是 iOS 开发新手，在使用封面流组件的 iCarousel 实现时导航到另一个视图时遇到了一些问题。

我能够创建轮播并在其上放置按钮。我还可以与此按钮交互并调用特定方法来执行某些代码。我的问题是单击此按钮时我试图导航到另一个视图。我已经使用情节提要制作了一个应用程序，并且可以毫无问题地浏览视图，但是在这种情况下，所有按钮都显示在情节提要画布中，因此我能够使用 UI 使用**- ( void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender**方法。iCarousel 并非如此。这些按钮是通过代码创建的，不会显示在画布 UI 中。

我已经创建了一个导航控制器并将 iCarousel 放置在其中。但是现在我需要在单击 iCarousel 按钮时导航到另一个视图。

单击按钮时我正在调用此方法：

```
- (void)buttonTapped:(UIButton *)sender
{
    NSInteger index = [carousel indexOfItemViewOrSubview:sender];
    switch(index) {
        case 0:
            break;
        case 1:
            break;
    }
} 
```

有一种方法可以手动创建 iCarousel 视图和按下按钮时显示的新视图之间的交互序列吗？

PS：我正在寻找类似的东西一段时间，但我没有找到任何对我有帮助的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T22:46:04.313

我找到了解决方案。我在源视图和目标视图之间创建了一个 segue，然后在按钮操作方法中，我调用了`[self performSegueWithIdentifier:@"SegueID" sender:self];`

# java - 将 Struts2 操作限制为仅发布方法

> ID：13337383
> 
> 赞同：3
> 
> 时间：2012-11-12T01:40:24.520
> 
> 标签：java, struts2

我们如何限制 Struts2 Action 只为`Post`方法工作？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-12T02:03:10.170

你为什么要这样做？

除了这里是你如何做到这一点......

```
//Following has not been tested
package com.quaternion.interceptor;

import com.opensymphony.xwork2.Action;
import com.opensymphony.xwork2.ActionInvocation;
import com.opensymphony.xwork2.interceptor.AbstractInterceptor;
import javax.servlet.http.HttpServletRequest;
import org.apache.struts2.ServletActionContext;

public class PostOnlyInterceptor  extends AbstractInterceptor {
    @Override
    public String intercept(ActionInvocation ai) throws Exception {
        HttpServletRequest request = ServletActionContext.getRequest();
        if (!request.getMethod().equals("POST")){
            return Action.ERROR;
        }
        return ai.invoke();
    }  
} 
```

然后为特定包构建一个拦截器堆栈，并将您的操作放入该包中或使用注释将您的操作与使用 ParentPackage 注释的包关联。

# wpf - WPF放大和缩小时如何保持元素大小？

> ID：13337386
> 
> 赞同：2
> 
> 时间：2012-11-12T01:40:44.193
> 
> 标签：wpf, size, zooming, element, fixed

我面临保持元素的相同宽度和高度但在缩放时改变位置的问题。就像用大头针缩放地图一样，当您缩放时，地图会被放大，但大头针会保持相对位置，大小不变。谁能知道如何实现它？

# git - 多个 git 拉入一个包含多个存储库的文件夹

> ID：13337388
> 
> 赞同：19
> 
> 时间：2012-11-12T01:41:23.613
> 
> 标签：git, shell, github

我正在使用 ubuntu，并且我有一个文件夹 gitrepos，其中包含来自 github 的多个 git repos 的许多克隆。

我想要一个脚本，它可以自动在我的所有存储库中执行 git pull。

说

```
[gitrepos]
  [repo1]
  [repo2]
  [repo3]
    ... 
```

我想要一个脚本从所有 repo 中执行 git pull
注意 repo 名称不同。

有任何可用的 shell 或 py 脚本吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-13T15:15:47.867

看看[mr](http://joeyh.name/code/mr/)，一个正是为此而设计的工具。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-12T02:10:54.867

这行得通：

来自 ~/gitrepos：

```
for REPO in `ls`; do (cd "$REPO"; git pull); done; 
```

从任何地方：

```
for REPO in "`find ~/gitrepos -maxdepth 0 -type d`"; do (cd "$REPO"; git pull); done; 
```

# javascript - Socket.io 没有流式传输到多个连接

> ID：13337389
> 
> 赞同：2
> 
> 时间：2012-11-12T01:41:24.133
> 
> 标签：javascript, node.js, express, socket.io

我正在尝试将推文流式传输到客户端并且一切正常，只要只有一个连接。如果我在浏览器的一个选项卡中流式传输推文并在新选项卡中打开页面，第一个选项卡将停止接收新推文，只有第二个选项卡会接收它们。

服务器代码。

```
io.sockets.on('connection', function (socket) {

  var twitter = require('ntwitter'),
  util = require('util'),
  twit = new twitter({
    consumer_key: '',
    consumer_secret: '',
    access_token_key: '',
    access_token_secret: ''
  });

 twit.stream('statuses/filter', {'locations':'-124.46, 24.31, -66.57, 49.23'}, 
    function(stream) {
       stream.on('data', function (data) {
         data.geo  ? socket.emit('twitter', data) : ''
    });
 }); 
```

客户端代码：

```
var socket = io.connect()

socket.on('twitter', function (data) {

    //Do really awesome things.

}); 
```

我究竟做错了什么？它必须很简单。我无法想象它很难支持多个连接。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T01:44:40.430

尝试更改`socket.emit`为`sockets.emit`：

```
io.sockets.on('connection', function (socket) {

  var twitter = require('ntwitter'),
  util = require('util'),
  twit = new twitter({
    consumer_key: '',
    consumer_secret: '',
    access_token_key: '',
    access_token_secret: ''
  });

 twit.stream('statuses/filter', {'locations':'-124.46, 24.31, -66.57, 49.23'}, 
    function(stream) {
       stream.on('data', function (data) {
         data.geo  ? sockets.emit('twitter', data) : ''
    });
 }); 
```

或者如果这不起作用，添加`socket.broadcast.emit`如下`socket.emit`所示：

```
io.sockets.on('connection', function (socket) {

  var twitter = require('ntwitter'),
  util = require('util'),
  twit = new twitter({
    consumer_key: '',
    consumer_secret: '',
    access_token_key: '',
    access_token_secret: ''
  });

 twit.stream('statuses/filter', {'locations':'-124.46, 24.31, -66.57, 49.23'}, 
    function(stream) {
       stream.on('data', function (data) {
         data.geo  ? socket.emit('twitter', data) : ''
         data.geo  ? socket.broadcast.emit('twitter', data) : ''
    });
 }); 
```

# xna - DrawUserIndexedPrimitives 用于单独的网格

> ID：13337390
> 
> 赞同：4
> 
> 时间：2012-11-12T01:42:04.330
> 
> 标签：xna, c#-3.0, xna-3.0

这是一个菜鸟问题，但我进行了广泛搜索，但找不到答案。

我有两个单独的网格需要在同一个窗口中绘制，都使用 DrawUserIndexedPrimitives。我正在使用两个具有自己的视图和投影矩阵的 BasicEffect 实例。

然而，当这些被渲染时，有一条线将两者连接在一起。XNA 认为它们是同一个网格的一部分。我是否需要为每个实例使用单独的 GraphicsDeviceManager 实例？好像不对啊。。

```
protected override void Draw(GameTime gameTime)
{
    GraphicsDevice.Clear(Color.CornflowerBlue);
    GraphicsDevice.VertexDeclaration = declaration;

    effect.Begin();
    effect.View = view;

    foreach (EffectPass pass in effect.CurrentTechnique.Passes)
    {
        pass.Begin();
        GraphicsDevice.DrawUserIndexedPrimitives<VertexPositionNormalTexture>(PrimitiveType.TriangleList, positions1, 0, positions1.Length, index1, 0, index1.Length / 3);
        pass.End();
    }

    effect.End();

    effect2.Begin();
    effect2.View = view2;

    foreach (EffectPass pass in effect2.CurrentTechnique.Passes)
    {
        pass.Begin();
        GraphicsDevice.DrawUserIndexedPrimitives<VertexPositionNormalTexture>(PrimitiveType.TriangleList, positions2, 0, positions2.Length, index2, 0, index2.Length / 3);
        pass.End();
    }

    effect2.End();

    base.Draw(gameTime);
} 
```

位置 1 中的最后一个三角形连接到位置 2 中的第一个三角形。

谢谢你提供的所有帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:46:00.610

ZOMG！我知道了..

看起来 XNA 只将索引作为从零开始的（即使大多数坐标系统都是从一开始的），我有这样的事情：

```
int[] index1 = new int[] { 1, 2, 3, ..., n }; 
```

并将其更改为此解决了问题：

```
int[] index1 = new int[] { 0, 1, 2, ..., n - 1 }; 
```

# ruby-on-rails - 有什么简单的方法可以更改 Rails 应用程序中的 PID 和日志位置吗？

> ID：13337394
> 
> 赞同：0
> 
> 时间：2012-11-12T01:42:57.357
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我需要更改 PID 文件的默认位置并将其设置在 /var/run 并将日志写入 /var/logs，是否有任何简单的方法可以使用 rails 来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T01:49:51.947

哦找到了。。

```
sudo rails s --pid=/var/run/rails.pid --log=/var/log/rails.log 
```

# html - 导航栏链接的鼠标悬停/悬停事件

> ID：13337395
> 
> 赞同：-1
> 
> 时间：2012-11-12T01:43:01.367
> 
> 标签：html, css, hover, html-lists, onmouseover

我有一个导航栏，其中包含指向网站其他页面的链接的图像。我正在尝试为列表中的链接获得鼠标悬停或悬停效果。基本上，当用户将鼠标悬停在链接上单击时，我希望显示的每个按钮都有不同的图像。（如果需要 jquery 或 java，那很好！） HTML 是：

```
<body>
 <div id="container"  style="images/logo.png">
 <p id="logo"><img class="project14"src="images/NavBar-01.png"></a></p>

    <ul id="nav">
        <li id=><a href="work.html"><img src="images/NavBar-02.png"></a></li>
        <li id=><a href="about.html"><img src="images/NavBar-03.png"></a></li>
        <li id=><a href="resume.html"><img src="images/NavBar-04.png"></a></li>
    </ul> 
```

我拥有的 CSS 是：

```
ul#nav {
    width: 956px; list-style: none; overflow: hidden; margin: -117px 0 60px 0;
}

ul#nav li {
    width: 145px; height: 109px; float: right;
    } 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T01:53:06.287

这是一个纯 CSS 教程，可以让您走上正确的道路：

[http://css-tricks.com/css-menu-with-rollover-images/](http://css-tricks.com/css-menu-with-rollover-images/)

编辑以回应您的评论“可以将 URL 用于我桌面上的文件夹中而不是网络上的图像吗？”

假设你有这个文件夹结构：

```
/project
     /css
         your-css-file.css

     /images
         NavBar.png 
```

您的 css 可以像这样轻松引用`NavBar.png`图像：

```
background-image: url('../images/NavBar.png'); 
```

基本上，这`..`意味着“从当前位置向上一级”，所以`/css`你会“成为” `/project`- 然后它会寻找`/images`图像。

正确的文件夹结构实际上是任何项目的良好起点 - 上面的示例将在您的本地计算机和主机上运行。绝对链接（指定完整路径的链接，例如`file:///C:/Documents%20and%20Settings/your-user-name/Desktop/NavBar.png`）不是最佳方法，因为它们不像相对 url 那样灵活 - 但是您问题的最终答案是“是”，您可以链接到桌面上的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T02:00:24.430

在 jQuery 中：

```
$('#nav li').mouseenter(function() {
  $(this).find("img").attr("src","/path/to/new/image_hover.extension");
});

$('#nav li').mouseout(function() {
  $(this).find("img").attr("src","/path/to/old/image.extension");
}); 
```

# ios - 从 actionscript 类 (FlexMobile) 中推送导航器视图

> ID：13337397
> 
> 赞同：1
> 
> 时间：2012-11-12T01:43:31.190
> 
> 标签：ios, apache-flex, mobile, actionscript

这次我需要从 actionscript itemRenderer 中更改移动应用程序的视图。我无权访问 navigator.push(view) 功能，所以我卡住了。我应该向应用程序发送一个事件来做到这一点吗？感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T02:00:45.963

从渲染器调度事件；并确保它起泡。您可能希望调度包含来自渲染器的数据的自定义事件。在视图中侦听该事件并在侦听器中进行相关更改。

# java - Java 状态设计模式/“子状态”

> ID：13337398
> 
> 赞同：3
> 
> 时间：2012-11-12T01:43:42.187
> 
> 标签：java, oop, design-patterns, state-pattern

我正在用 Java 编写代码，我使用像这个例子这样的状态设计模式：http: [//onjavahell.blogspot.fr/2009/05/simple-example-of-state-design-pattern.html](http://onjavahell.blogspot.fr/2009/05/simple-example-of-state-design-pattern.html)

但是我得到的 UML 是这样的：

```
+---------+        +---------+ 
| Context |--------|  State  |
+---------+        +---------+ 
                        |
               +----------------+
               |                |
          +---------+       +---------+
          | State 1 |       | State 2 |
          +---------+       +---------+
               |
       +----------------+
       |                |
  +----------+       +----------+
  | State 1A |       | State 1B |
  +----------+       +----------+ 
```

我有“子状态”。怎么能打码？我应该制作抽象类`State 1`还是有其他方法？搜索我没有找到任何这样的例子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T01:51:01.063

“子状态”是什么意思？在状态模式中，没有任何东西可以被视为“子状态”。“状态”代表实体的状态。每个状态都是一个状态。除非您对您要达到的目标给出合理的解释，否则我相信您的想法是不正确的。

只要所有状态共享相同的基类/接口，它就可以工作。你可能在状态之间有继承关系，它仍然可以工作，它与状态模式无关。而且，即使你有继承关系，它们仍然是“状态”，而不是“子状态”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T13:08:08.630

与往常一样，如果没有有关您尝试建模的域的更多信息，就很难说。但是，您可能会发现主要情况：

*   你的状态是不相交的，并响应[IS-A](http://en.wikipedia.org/wiki/Liskov_substitution_principle)原则（[在这里](http://c2.com/cgi/wiki?LiskovSubstitutionPrinciple)你可以找到更详细的信息和关于它的讨论）。在这种情况下`State1A`，并且`State1B`可以作为`State1`.
*   您的状态可以组合，因此在`State1`选项 A 和 B 中以及在选项 A 和 B 中是有意义`State2`的。虽然不是常见的情况，但有时会发生这种情况，这意味着您的对象实际上具有两种类型的状态。如何处理这在很大程度上取决于状态之间的交互；如果它们是独立的，那么您可以将它们建模为单独的层次结构。如果它们依赖于它们的行为，那么`State`该类又可以具有内部状态`A`和`B`.

正如我所说，第二种情况很少见，但在某些设计中会发生。

高温高压

# javascript - 递归地（或迭代地）用 d3.js 创建一个嵌套的 html 表？

> ID：13337402
> 
> 赞同：13
> 
> 时间：2012-11-12T01:44:07.163
> 
> 标签：javascript, html, d3.js

我有一组嵌套的 JSON 结构，它们的深度不同，而且到处都有不同的键集：

```
[
    {
        "name":"bob",
        "salary":10000,
        "friends":[
            {
                "name": "sarah",
                "salary":10000
            },
            {
                "name": "bill",
                "salary":5000
            }
        ]
    },
    {
        "name":"marge",
        "salary":10000,
        "friends":[
            {
                "name": "rhonda",
                "salary":10000
            },
            {
                "name": "mike",
                "salary":5000,
                "hobbies":[
                    {
                        "name":"surfing",
                        "frequency":10
                    },
                    {
                        "name":"surfing",
                        "frequency":15
                    }
                ]
            }
        ]
    },
    {
        "name":"joe",
        "salary":10000,
        "friends":[
            {
                "name": "harry",
                "salary":10000
            },
            {
                "name": "sally",
                "salary":5000
            }
        ]
    }
] 
```

我想使用 D3 将其呈现为嵌套的 html 表。例如，朋友列将有表格显示行中引用的个人的朋友的姓名和薪水。有时其中一个表会有另一个级别的子表。

我想这样做的方法是递归地创建表。我编写了一个 python 程序，它采用这样的 JSON 结构，并在表中呈现表，最简单的方法是递归。我在 d3.js 文档中看到有一个`.each()`东西你可以调用，我确信这是我需要的，我只需要一点点提升（[https://github.com/mbostock/d3/wiki/Selections#维基每个](https://github.com/mbostock/d3/wiki/Selections#wiki-each "d3 api 每个")）。

那么在 D3 中有没有很好的方法来做到这一点？我发现了这个很好的示例，用于将二维数据矩阵呈现为表格[创建链接到 csv 文件的表格](https://stackoverflow.com/questions/9268645/d3-creating-a-table-linked-to-a-csv-file)。通过该教程，我能够将这个数据结构的最外层呈现为一个表格，但我被困在如何根据需要递归地进入各个级别，截至目前它们在表格中显示为“对象”因为我没有将它们与普通字符串和数字区别对待。

我还发现了与我的问题类似的另一个问题/答案，但我真的不太了解 javascript，无法了解递归发生的位置/方式，并重新调整解决方案以满足我的需求：[如何处理数据在 D3 中嵌套多个级别？](https://stackoverflow.com/questions/13291858/how-do-i-process-data-that-is-nested-multiple-levels-in-d3). 任何关于递归或迭代处理嵌套树（如 D3 中的 JSON 数据结构）的教程的建议或指针将不胜感激！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-16T07:16:41.013

递归函数可能是个好方法。请参阅下面的代码以了解一种可能的实现方式（假设您的数据存储在 中`jdata`）。请参阅代码中的注释以获取一些解释，并查看此 Gist 以获取实时版本：[http ://bl.ocks.org/4085017](http://bl.ocks.org/4085017)

```
d3.select("body").selectAll("table")
    .data([jdata])
  .enter().append("table")
    .call(recurse);

function recurse(sel) {
  // sel is a d3.selection of one or more empty tables
  sel.each(function(d) {
    // d is an array of objects
    var colnames,
        tds,
        table = d3.select(this);

    // obtain column names by gathering unique key names in all 1st level objects
    // following method emulates a set by using the keys of a d3.map()
    colnames = d                                                     // array of objects
        .reduce(function(p,c) { return p.concat(d3.keys(c)); }, [])  // array with all keynames
        .reduce(function(p,c) { return (p.set(c,0), p); }, d3.map()) // map with unique keynames as keys
        .keys();                                                     // array with unique keynames (arb. order)

    // colnames array is in arbitrary order
    // sort colnames here if required

    // create header row using standard 1D data join and enter()
    table.append("thead").append("tr").selectAll("th")
        .data(colnames)
      .enter().append("th")
        .text(function(d) { return d; });

    // create the table cells by using nested 2D data join and enter()
    // see also http://bost.ocks.org/mike/nest/
    tds = table.append("tbody").selectAll("tr")
        .data(d)                            // each row gets one object
      .enter().append("tr").selectAll("td")
        .data(function(d) {                 // each cell gets one value
          return colnames.map(function(k) { // for each colname (i.e. key) find the corresponding value
            return d[k] || "";              // use empty string if key doesn't exist for that object
          });
        })
      .enter().append("td");

    // cell contents depends on the data bound to the cell
    // fill with text if data is not an Array  
    tds.filter(function(d) { return !(d instanceof Array); })
        .text(function(d) { return d; });
    // fill with a new table if data is an Array
    tds.filter(function(d) { return (d instanceof Array); })
        .append("table")
        .call(recurse);
  });    
} 
```

# c - void osSleep(tU32 ticks) - 它是如何工作的（微控制器中的计时器）？

> ID：13337404
> 
> 赞同：2
> 
> 时间：2012-11-12T01:44:36.977
> 
> 标签：c, timer, microcontroller, gpio

我有一个用 C 语言编写的微控制器代码。根据我的例子，我使用函数“ `void osSleep(tU32 ticks)`”来停止程序一段时间。不幸的是，我不知道它是如何工作的以及它对我的微控制器有什么作用（哪些引脚、状态等设置为什么值）。

我已经找到了 setBuzzer() 函数，因为我有它的来源：

```
void setBuzzer(tBool on)
{
  if (TRUE == on)
    IOCLR = BUZZER_PIN;
  else
    IOSET = BUZZER_PIN;
} 
```

所以 GPIO 端口设置为 1 或 0 用于与蜂鸣器相关的 PIN（BUZZER_PIN = 0x00002000）。蜂鸣器有一个引脚，所以我可以启用和禁用它（高电压和低电压）。

我想对 osSleep() 进行类似的分析，但奇怪的是，我在整个代码中找不到它的实现，只有声明：

```
void osSleep(tU32 ticks); 
```

也许该功能在某个库中。无论如何，我想知道它在较低级别上是如何工作的（例如，当我调用它时，定时器会发生什么，执行什么指令 - 就像在蜂鸣器示例中一样）。

*此外， Embedded Artists的文档中只有一个名为***“Pre-emptive Operating System v 1.4.0”**的代码的高级简短定义。

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T02:00:26.557

> 不幸的是，我不知道它是如何工作的以及它对我的微控制器有什么作用

如果无法访问源代码，则无法确定。尝试使用反汇编程序（例如 GNU 的`binutils`has `objdump`）来了解实际的`osSleep`作用。

很可能，它正在等待一个信号量，该信号量将被计时器滴答 ISR 切换（直接或间接）。不过，您的问题很有趣-文档只提到“此函数使进程在指定的滴答数内进入睡眠状态”。但如果没有可用的运行，它肯定可以将整个 uC 置于低功耗模式。*

# android - 如何在 android Emulator 中使用网络位置模拟 gps？

> ID：13337405
> 
> 赞同：1
> 
> 时间：2012-11-12T01:44:37.570
> 
> 标签：android, testing, location

我已经使用 gps 位置和成功进行了测试。但现在我想使用网络位置进行测试。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T01:48:15.860

如果您使用的是 eclipse 和 AVD 模拟器，请执行以下操作：

```
Window -> Show View -> Other
Android -> Emulator Control 
```

这将在 IDE 中打开一个选项卡，该选项卡将为您提供与正在运行的模拟器交互的所有控件。

# jquery - div 的标题 - 从底部滑入 - 滑出到底部

> ID：13337407
> 
> 赞同：1
> 
> 时间：2012-11-12T01:45:41.590
> 
> 标签：jquery, animation, slide

我有以下内容：

```
<div class="one-third">
    <div class="inside">
        <h4><strong>How much can you save?</strong></h4>
        <p>testing</p>
        <p>testing</p>
        <p>testing</p>
        <p>testing</p>
    </div>
    <div class="caption">caption here</div>
</div> 
```

我希望能够在悬停期间从底部滑入标题（div 标题），并在未悬停时滑出底部。我已经从这里和那里查看了一些来源，但似乎无法做到正确。在这种情况下，主容器（三分之一）不调整大小也很重要。标题应该在其中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T02:51:20.583

**[演示](http://jsfiddle.net/MPn84/3/)**——像这样的东西？

使用 CSS3 `transition-duration`( [W3Schools](http://www.w3schools.com/css3/css3_transitions.asp) ) 创建动画。

*更新：*

**[演示](http://jsfiddle.net/MPn84/4/)**——所以你在寻找烤面包机的效果？

*更新 2：*

**[DEMO](http://jsfiddle.net/MPn84/5/)** — 使用 jQuery`.animate()`来制作动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T22:45:56.950

这就是我最终得到的。它涵盖了我需要的所有内容......翻转时吐司显示在底部，翻转时整个 div 是一个链接，您也可以在其中包含链接。“动画”仅适用于 FF，但我是故意这样做的，因为我的 div 使用圆角……无论出于何种原因，吐司都不会跟随溢出：隐藏，因此它的角不圆。

```
 <div class="one-third">
            <div class="inside">
                <a href="#"></a>
                <h4><strong>How much can you save?</strong></h4>
                <p>testing</p>
                <p>testing</p>
                <p><a class="link" href="#">testing</a></p>
                <p>testing</p>
                <span class="toast">Learn more about one</span>
            </div>
        </div> 
```

CSS：

```
.one-third{
border:1px solid #d8d8d8;
margin:0 9px;
-moz-border-radius: 6px;
-webkit-border-radius: 6px;
border-radius: 6px;
background:#ffffff;
text-align:center;
position:relative;
overflow:hidden;
cursor: pointer;

}

.one-third:hover{ 
background: #eeeeee;
}

.one-third .inside{
padding:10px;
}

.one-third a{ /*entire div link*/
position:absolute; 
width:100%;
height:100%;
top:0;
left: 0;
/* edit: added z-index */
z-index: 1;
}

.one-third a.link { /*links on top of box*/
position:relative;
z-index:2;
}

.one-third .inside .toast {
background: rgb(71, 71, 71); /* Fall-back for browsers that don't support rgba */
background: rgba(0, 0, 0, .7);
display: block;
position: absolute;
left: 0;
width: 100%;
bottom: -30px;
line-height:30px;
color: #fff;
font-size:14px;
text-align: center;
transition: all 0.1s linear 0s; /*no moz, webkit, or o because radius is needed and won't scroll right*/    
-moz-border-radius: 0 0 6px 6px;
-webkit-border-radius: 0 0 6px 6px;
border-radius: 0 0 6px 6px;
}

.one-third:hover .toast {
bottom: 0;
} 
```

# html - 在不覆盖字体的情况下更改超链接颜色

> ID：13337420
> 
> 赞同：1
> 
> 时间：2012-11-12T01:48:01.247
> 
> 标签：html

我目前正在使用这个 ccs：

```
 /* A Free Design by Bryant Smith (bryantsmith.com) */

html, body {
text-align: center;
}
p {text-align: left;}

body {
    margin: 0;
    padding: 0;
    background: #333333 url(images/img01.gif) repeat-x;
    text-align: justify;
    font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
    font-size: 13px;
    color: #666666;
    background-color:#252F33;
}
*
{
  margin: 0 auto 0 auto;
 text-align:left;}

#header {
    position:relative;
    width: 680px;
    height:99px;
    margin-left:29px;
    margin-right:21px;
    background: url(header.png) no-repeat;
}

#page
{
  margin: 0 auto 0 auto; 
  display: table; 
  height: 100%;  
  position: relative; 
  overflow: hidden; 
  background: #252F33 url(background.png) repeat-y;
  width: 730px;
}

.title
{
position:relative;
left:30px;
top:22px;
text-align:left;
font-family:Georgia, "Times New Roman", Times, serif;
font-size:32px;
font-weight:normal;
color:#252F33;
}

.subText
{
position:relative;
left:62px;
top:26px;
text-align:left;
font-family:Georgia, "Times New Roman", Times, serif;
font-size:12px;
font-weight:bold;
color:#CEEAEE;
}

.articleTitle
{
text-align:left;
padding-left:25px;
padding-top:10px;
padding-bottom:10px;
color: #2C4969;
font-family:Verdana, Arial, Helvetica, sans-serif;
font-size:24px;
font-weight:bold;
}

.articleContent
{
width:auto;
position:relative;
padding-left:50px;
padding-right:75px;
color:#101214;
text-align:left;
font-family:Arial, Helvetica, sans-serif;
line-height:18px;
}

.rightLinks
{
width: 102px;
font-size:11px;
font-weight:bold;
line-height:21px;
height:auto;
margin-right:-3px;
background-image:url(links_branch.png);
background-repeat:no-repeat;
text-align:right;
float:right;
}

.rightLinks a:hover
{
color:#667765;
}

.rightLinks .linkTitle
{
font-size:13px;
font-weight:bold;
margin-top:27px;
margin-bottom:32px;
margin-right:5px;
}

#bar
{
    position:relative;
    width: 680px;
    height:57px;
    margin-left:29px;
    margin-right:21px;
    background: url(bar.png) no-repeat;
}

.menuLink
{
    height:36px;
    width: 120px;
    text-align:center;
    float:left;
    font-family:Geneva, Arial, Helvetica, sans-serif;
    font-size:14px;
    font-weight:bold;
    color:#252F33;
    padding-top:19px;
}

.menuLink:hover
{
    background: url(bar2.png) repeat-x;
}

a
{
text-decoration:none;
color:#252F33;
}

#pageContent
{
width: 680px;
height:500px;
}

#footer {

    width: 730px;
    height:60px;
    background: url(footer.png) no-repeat;
text-align:center;
font-size:10px;
color:#667765;
padding-top:34px;
}

#footer a
{
font-size:10px;
color:#667765;
}

html, body {
text-align: center;
}
p {text-align: left;} 
```

我想改变超链接的颜色。我在这里尝试了建议：[http](http://www.ssi-developer.net/css/link-colours.shtml) ://www.ssi-developer.net/css/link-colours.shtml包含此代码：

```
 <style type="text/css">
<!--
a:link {color: #000000; text-decoration: underline; }
a:active {color: #0000ff; text-decoration: underline; }
a:visited {color: #008000; text-decoration: underline; }
a:hover {color: #ff0000; text-decoration: none; }
-->
</style> 
```

但包括代码改变了字体和边距。如何更改我正在使用的 css 以更改超链接颜色而不更改字体或边距？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:13:03.860

我可以为您提供的最好的答案是某种答案，因为所提供的材料中没有任何内容会以所描述的方式影响您的文本。但是，我可以提供一些清理后的 CSS。

```
/*BASIC STRUCTURE*/
* {
    margin: 0 auto;
    position:relative;
    padding: 0;
}

html, body {
    font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
    font-size: 13px;
    text-align:left;
    color: #666;
}

body {
    margin: 0;
    background: #333 url(images/img01.gif) repeat-x;
    background-color:#252F33;
}

/*TYPOGRAPHY*/
a {
    outline: none;
    color: #000;
}

a:active {
    color: #0000ff;
}

a:visited {
    color: #008000;
}

a:hover {
    color: #ff0000;
}

/*SECTIONS*/
#header {
    width: 680px;
    height:99px;
    margin: 0 21px 0 29px;
    background: url(header.png) no-repeat;
}

... etc 
```

关于上面的 CSS 有一些需要注意的地方，我将通过假设您处于初学者级别（如果不是，请原谅！）。

首先，请注意，我已将您的第二个片段吸收到原始 CSS 文件中，这几乎是您的所有 CSS 文件所在的位置。您为链接样式提供的代码段看起来像是放置在`<head>`HTML 部分中的内容。虽然这确实有效，但它并不适合将来处理您的项目 - 将所有 CSS 规则保存在一个地方，并按照所需的[具体](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)顺序。

接下来，请注意`text-align`规则现在只被提及一次，作为`html, body`规则的一部分。同样，这归结为特殊性，但基本上一旦我声明我的 HTML 和页面正文中的所有内容都应该是，那么除非我希望更改它（ ）`text-align: left`，否则无需在任何其他规则中重复这一点。`text-align: right`这适用于所有 CSS，它是“级联”部分的来源。如果规则只是为了重复已经定义的样式（例如您的`p`规则），那么您可以摆脱它。

不需要提及默认样式 -`text-decoration: underline`大多数浏览器上的链接默认为，因此除非您更改它，否则不需要指定它。

通用选择器（`*`规则）是一个强大的野兽，应该小心处理。基本上，您在此处放置的任何规则都会尝试将其自身应用于*屏幕上的每个元素*。仅使用它来[声明默认样式或规则](http://css-tricks.com/things-it-might-be-funuseful-to-try-the-universal-selector-on/)。我已经包括`position: relative`了一个例子。使用它来删除所有内容都集中在其父元素 ( `margin: 0 auto;`)*中可能*是不明智的。

您还可以考虑在代码顶部放置一个浏览器重置。这将删除各种浏览器应用于元素的任何样式，并让您 100% 控制页面的外观。最受欢迎的之一是[Eric Meyer](http://meyerweb.com/eric/tools/css/reset/)的重置。

最后，看看我是如何将这么少量的 CSS 分解成块的？这为您的 CSS 提供**了**更多的结构，因此更易于阅读和编码。我通常使用基本结构、排版、页眉、元素、页脚等块，并`@import`用于我的重置。我还尽可能使用[CSS 速记](http://www.456bereastreet.com/archive/200502/efficient_css_with_shorthand_properties/)，也有助于提高可读性。

至于你的确切问题，清理你的 CSS 文件，把你所有的 CSS 放在一个地方，删除重复的规则，理解并准确地决定每个`text-`或规则应该做什么，你可能会得到解决方案`font-`。`margin`

并阅读特异性。

# c# - 为什么我对随机数生成器执行停车场测试会产生不好的结果？

> ID：13337423
> 
> 赞同：5
> 
> 时间：2012-11-12T01:48:27.107
> 
> 标签：c#, algorithm, math, statistics, prng

我正在尝试为随机数生成器编写停车场测试的实现。以下是我从中获取有关测试信息的来源：[英特尔数学库文档](http://software.intel.com/sites/products/documentation/doclib/mkl_sa/11/vslnotes/8_3_10_Parking_Lot_Test.htm)和[本文的第 4 页以及](http://www.sci.brooklyn.cuny.edu/~whitlock/parking.pdf)[此处](http://en.wikipedia.org/wiki/Phi)列出的概率密度的 phi 函数。

我用 C# 编写了测试的实现。它使用一个 100x100 的网格，其值最初设置为 null。然后我使用随机数生成器为 x 和 y 生成随机整数。如果网格的该索引及其邻居为空，则该索引设置为 1。否则，不会发生任何事情，因为发生了“崩溃”。

我使用 C# System.Random 生成器运行它。我不相信结果是正确的，因为我总是得到非常接近 3079 点的停车点，这比我应该得到的平均值少了大约 500 点。它还产生 2.21829146215425E-90 的 p 值。

我的代码如下。有没有人有这方面的经验，或者任何人都可以看到我在实施中可能做错了什么？任何帮助将不胜感激。

```
 private void RunParkingLotTest()
    {
        points = new int?[100,100];
        int parked = 0;

        for (int i = 0; i < 12000; i++)
        {
            int x = random.Next(100);
            int y = random.Next(100);

            if (IsSafeToPark(x, y))
            {
                points[x, y] = 1;
                parked++;
            }

        }
        Console.WriteLine("Parked: " + parked + "\nP value: " + PhiFunction((parked-3523)/21.9));
    }

    private bool IsSafeToPark(int x, int y)
    {
        return PointIsEmpty(x, y) 
            && LeftOfPointIsEmpty(x, y) 
            && RightOfPointIsEmpty(x, y) 
            && BelowPointIsEmpty(x, y) 
            && AbovePointIsEmpty(x, y);
    }

    private bool AbovePointIsEmpty(int x, int y)
    {
        if (y == 99)
        {
            return true;
        }
        else
            return points[x, y + 1] == null;
    }

    private bool BelowPointIsEmpty(int x, int y)
    {
        if (y == 0)
        {
            return true;
        }
        else
            return points[x, y - 1] == null;
    }

    private bool RightOfPointIsEmpty(int x, int y)
    {
        if (x == 99)
        {
            return true;
        }
        else
            return points[x + 1, y] == null;
    }

    private bool LeftOfPointIsEmpty(int x, int y)
    {
        if (x == 0)
        {
            return true;
        }
        else
            return points[x - 1, y] == null;
    }

    private bool PointIsEmpty(int x, int y)
    {
        return points[x, y] == null;
    }

    private double PhiFunction(double x)
    {
        //ϕ(x) = (2π)−½e−x2/2

        return ((1 / Math.Sqrt(2 * Math.PI)) * Math.Exp(-(Math.Pow(x, 2)) / 2));
    } 
```

编辑 - 我原来的实现的问题是

*   我正在绘制正方形而不是圆盘
*   我只在整数值处绘制点。我应该改用十进制值。
*   由于上述两个，我需要更改我的距离检查

感谢 Chris Sinclair 和 mine z 帮助解决这个问题。最终代码发布在下面。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T02:40:13.723

我将对此进行尝试，诚然，我没有尝试过任何这样的测试，所以如果我离题了，请原谅我。不过总的来说，.NET`Random`实现非常好，而且我从来没有遇到过问题，所以我不会怀疑这一点，尤其是因为您正确地重用了同一个实例而不是创建新实例。

从parking.pdf 和英特尔文档中读取，似乎他们正在使用光盘，并计算到它们的中心点的距离。您的实现使用正方形（点之间距离为 1 的数组），因此忽略对角线。

来自pdf：

> 如果使用磁盘，粒子之间的距离 r = p(x(i) - z)2 + (y(i) - z)2 需要小于或等于 1。使用圆盘还是正方形有关系吗？通过将边长为 1.0 的正方形所占的面积与直径为 1.0 的圆盘的面积进行比较，可以得出停放哪个几何图形的重要性的指示。圆盘与正方形的面积比为 π/4。因此，可以预期在相同的尝试次数下，可以在一个盒子中放置比正方形更多的磁盘。

和英特尔文档：

> 测试假设下一个随机点 (x, y) 成功“停放”，如果它距离之前的每个成功“停放”点足够远。点 (x1, y1) 和 (x2, y2) 之间的足够距离是 min(|x1 - x2|,|y1 - y2|) > 1。

我猜测 π/4 圆盘与正方形的比率以及可以容纳多少圆盘与正方形之间的差异可能是您看到不同数字的原因。（虽然现在我看不到 3523 和 3070 和 π/4 之间的直接关系。3523 * π/4 = 2767，这很接近，但我确定是否存在关系，它比简单的乘法稍微复杂一些。 )

不是一个很好的答案，但我最好的猜测。

编辑：有趣的是，我使用直径为 1 个单位的圆盘进行了快速实施，并获得了大约 4000 个停放的结果。所以也许这比我未经训练的自己所能掌握的要多一些（或者.NET`Random`没有通过测试？）无论如何，这是我的光盘实现：

```
List<Point> parkedCars = new List<Point>();
Random random = new Random();

void Main()
{
    int parked = 0;

    for (int i = 0; i < 12000; i++)
    {
        double x = random.NextDouble() * 100;
        double y = random.NextDouble() * 100;

        Point pointToPark = new Point(x, y);

        if (IsSafeToPark(pointToPark))
        {
            parkedCars.Add(pointToPark);
            parked++;
        }

    }
    Console.WriteLine("Parked: " + parked);
}

private bool IsSafeToPark(Point pointToPark)
{
    //make sure it's "inside" the box
    if (pointToPark.X < 0.5 || pointToPark.X > 99.5
        || pointToPark.Y < 0.5 || pointToPark.Y > 99.5)
        return false;

    if (parkedCars.Any(p => Distance(pointToPark, p) <= 1))
        return false;

    return true;
}

private double Distance(Point p1, Point p2)
{
    return Math.Sqrt((p1.X - p2.X) * (p1.X - p2.X) + (p1.Y - p2.Y) * (p1.Y - p2.Y));
} 
```

使用我可能过于简单的 π/4 比率应用得到大约 3142。更接近一点，但似乎非常不正确。

编辑：正如@mike z 指出的那样，我直接使用距离的测试是不正确的。根据我忘记的测试参数，只需检查 X 和 Y 距离是否大于 1。将我的`Distance`检查更改为：

```
Math.Max(Math.Abs(p1.X - p2.X), Math.Abs(p1.Y - p2.Y)) 
```

在 3450 附近产生更接近的结果，非常接近。如果我拿出我的“//确保它在盒子里面”检查，平均超过 10 次尝试得到 3531！

所以我最后的“工作”代码是：

```
public struct Point
{
    public double X,Y;

    public Point(double x, double y)
    {
        this.X = x;
        this.Y = y;
    }
}

List<Point> parkedCars = new List<Point>();
Random random = new Random();

void Main()
{
    int parked = 0;

    for (int i = 0; i < 12000; i++)
    {
        double x = random.NextDouble() * 100;
        double y = random.NextDouble() * 100;

        Point pointToPark = new Point(x, y);

        if (IsSafeToPark(pointToPark))
        {
            parkedCars.Add(pointToPark);
            parked++;
        }

    }

    Console.WriteLine("Parked: " + parked);
}

private bool IsSafeToPark(Point pointToPark)
{
    if (parkedCars.Any(p => Distance(pointToPark, p) <= 1))
        return false;

    return true;
}

private double Distance(Point p1, Point p2)
{
    return Math.Max(Math.Abs(p1.X - p2.X), Math.Abs(p1.Y - p2.Y));
} 
```

编辑：我两次运行了 100 次测试，并将结果分别平均为 3521.29 和 3526.74。不确定这是否意味着还有*更多*的东西，但这也许只是表示 .NET 和 Fortran 之间的舍入或浮点精度差异。

# java - 使用 Thread 作为 Collection 中的键

> ID：13337426
> 
> 赞同：4
> 
> 时间：2012-11-12T01:48:39.123
> 
> 标签：java, multithreading, hash

是否可以使用 Thread (Thread.getCurrentThread()) 作为集合中的 KEY（例如 HashMap）？

我知道这是可能的！但我想知道如果java为线程创建了唯一的hashCodes，

谢谢，阿里安

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T01:52:33.007

是的，在 Java 出现`ThreadLocal`.

但现在你可能应该使用`ThreadLocal`.

# java - 参数化参数化方法的返回类型

> ID：13337429
> 
> 赞同：2
> 
> 时间：2012-11-12T01:49:09.333
> 
> 标签：java, generics, type-conversion, parameterized

我一直在尝试使这样的工作：

```
private static <V, K> V<KnownType> from(K oldObject, Class<? extends V<KnownType>> newClass) {
    ...
} 
```

但是，此方法签名会出现编译器错误：

> V 型不是通用的；它不能用参数参数化`<KnownType>`

基本上，我想要一个转换`K`为`V<KnownType>`. 这可能吗？

此外，如果有人为此编写代码，还有一些额外的上下文——所有`V`的都有一个单参数构造函数，它接受一个`K`.

提前致谢。

**编辑**——输入类是 V 的子类。 ( `? extends V...`)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T02:01:14.687

假设：

```
public interface SomeType<E> 
```

尝试这个：

```
private static <V extends SomeType<KnownType>, K> V from(K oldObject, Class<V> newClass) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T01:52:40.717

Java 中的类型参数只能对应一个*类型*。你想`V`成为某种本身接受一种类型的东西，一种对类型进行操作的更高“种类”的东西。Java 中的泛型不适用于更高的种类。

# kineticjs - 获取 Kinetic.Path 的大小

> ID：13337430
> 
> 赞同：3
> 
> 时间：2012-11-12T01:49:16.163
> 
> 标签：kineticjs

有没有办法获取 Kinetic.Path 对象的宽度和高度？它总是返回零。

```
var path = new Kinetic.Path({
    x: 40,
    y: 40,
    data: "m 148.57143,-1.9235271 200,82.8571401 L 257.14286,300.93361 2.8571414,263.79075 z",
    stroke: "green",
    draggable: true
});

layer.add(path);

stage.draw();

console.log(path.getWidth()); // returns zero 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T01:02:45.093

KineticJS 不计算路径的边界框。您必须使用路径数据自己计算它们。为此，我编写了代码来处理这些路径。

[https://gist.github.com/4075955](https://gist.github.com/4075955)

但是，该代码目前仅支持直线，不支持曲线或圆弧。该代码已发布到公共领域，因此我鼓励任何人对其进行修改。

例子：

```
var dimensions=getPathDimensions(path);
var width=dimensions.width; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T18:44:15.363

抱歉，没有任何指标功能没有内置到路径形状中（即，获取高度、宽度等）。

好吧，除了长度：

Kinetic.Path.calcLength = 函数（x，y，cmd，点）

（仅用于路径中的单个元素，即解析后的 Path.dataarray 的元素）

# php - 如何获取相对于一年中一周的上一年日期

> ID：13337435
> 
> 赞同：3
> 
> 时间：2012-11-12T01:49:53.720
> 
> 标签：php, datetime

如何使用 php 在前一年获得相同[ISO-8601周数的同一天？](https://en.wikipedia.org/wiki/ISO_8601)

我熟悉从时间戳中提取这种软信息。有没有一种内置的方式可以让我从星期几、一年中的一周和一年到时间戳？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T02:07:16.297

您可以像这样使用两者的`date`组合`strtotime`：

```
// get the timestamp
$ts = strtotime('today');

// get year, week number and day of week
list($year, $week, $dow) = explode('-', date('Y-W-N', $ts));

// use the "YYYY-WXX-ZZ" format    
$format = ($year - 1) . "-W$week-$dow";
echo date('Y-m-d', strtotime($format)), PHP_EOL; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T02:07:44.730

你可以这样做[`strtotime`](http://php.net/strtotime)：

```
$now = time(); // Mon, 12 Nov 2012
$targetYear = date('Y', $now) - 1; // 2011
$targetWeek = date('\\WW-N', $now); // W46-1
$lastYear = strtotime($targetYear . $targetWeek); // Mon, 14 Nov 2011 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T02:24:51.170

试试这个：

```
$date = "2012-11-13";
echo getLastYearWeek($date);
function getLastYearWeek($date)
{
    $last_year = date("Y-m-d W N", strtotime("-52 Weeks ".$date));

    return $last_year;
} 
```

要不就，

```
$last_year = date("Y-m-d W N", strtotime("-52 Weeks ".$date)); 
```

以此作为[参考](http://php.net/manual/en/function.date.php)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T01:54:07.453

我认为您正在寻找 mktime。看看这里[http://php.net/manual/en/function.mktime.php](http://php.net/manual/en/function.mktime.php)

# java - 缺少要求：适用于 Eclipse 3.7 2.6.1 的 Google 插件需要 'org.eclipse.platform.feature.group [3.7.0,3.8.0)' 但找不到

> ID：13337436
> 
> 赞同：0
> 
> 时间：2012-11-12T01:50:00.693
> 
> 标签：java, android, google-app-engine, google-plugin-eclipse

我想创建连接谷歌应用引擎的 android 项目。我正在尝试为 Eclipse 2.6.1 安装 Google 插件，但它显示此错误。

缺少要求：适用于 Eclipse 3.7 2.6.1.v201205091048-rel-r37 的 Google 插件（com.google.gdt.eclipse.suite.e37.feature.feature.group 2.6.1.v201205091048-rel-r37）需要 'org.eclipse .platform.feature.group [3.7.0,3.8.0)' 但找不到

请有人帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T18:38:42.423

看起来您正在尝试在 Eclipse Juno 上安装 3.7 版本的 GPE - 这不起作用。如果您想安装 GPE 2.6.1，您可以使用的最新版本的 Eclipse 是 Indigo (3.7)。

GPE 3.2 将在几周后发布；它为 App Engine Connected Android 项目提供了更新的向导；现有的已弃用。如果你能等到那时，你可以在 Juno 上安装 GPE 3.2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T02:39:17.960

您是否尝试过使用不同的 Eclipse 版本？因为当我在 google 中搜索“Google Plugin for Eclipse requires org.eclipse.platform.feature.group”时，我可以看到很多人都面临这个问题。

请检查一些不同版本的 Eclipse。

# facebook - 提要和时间线中的 Facebook 评分图像

> ID：13337440
> 
> 赞同：1
> 
> 时间：2012-11-12T01:51:07.830
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

我在 Facebook 上有一个**ActionType**作为 Ratings（整数类型）

如何指示 Facebook 将评分显示为图像（Open Graph 时间线和提要视图中的星号）？

或者改写。***Spotify***如何设法在提要中显示播放图标？我还没有看到将图像链接到 ActionType 的选项。

![在此处输入图像描述](../Images/b52e4fb96e05017d827a915ba0f6e8bf.png)

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T03:22:33.143

`song`Facebook为 Open Graph集成了一个内置对象类型。Spotify 使用这种内置类型，Facebook 在歌曲名称旁边添加了“播放”图标。

**因此，添加一个小的操作图标不是您可以自己设置的选项。**

* * *

*您可以在此处查看有关内置对象类型的更多信息：[https](https://developers.facebook.com/docs/opengraph/objects/builtin/) ://developers.facebook.com/docs/opengraph/objects/builtin/ （虽然`song`尚未在此列表中）*

*没有关于`song`对象类型的完整页面，但该对象在此处列出：[https](https://developers.facebook.com/docs/opengraph/actions/builtin/) ://developers.facebook.com/docs/opengraph/actions/builtin/ （可通过您的仪表板获得）*

# java - 在 div 中加载 GWT 应用程序

> ID：13337444
> 
> 赞同：0
> 
> 时间：2012-11-12T01:51:44.510
> 
> 标签：java, google-app-engine, gwt

我对 GWT 很陌生。我有一些 HTML 标记以及生成的 CSS。我想在主机 HTML 中的特定 div 中加载我的 GWT 应用程序，但是我遇到了一些麻烦。每当应用程序加载时，它会自动将 GWT 应用程序添加到 html 的底部，而不是我想要的 DIV 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T06:25:36.990

您是否使用正确的方法[RootPanel.get(String id)](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/user/client/ui/RootPanel.html#get%28java.lang.String%29)？

```
RootPanel.get("myDiv").add(myWidget); 
```

`"myDiv"`你的 div 的 id 是哪里，`myWidget`是你的 GWT 小部件。

# java - 如何打印出循环发生的次数？

> ID：13337446
> 
> 赞同：0
> 
> 时间：2012-11-12T01:52:19.170
> 
> 标签：java, loops

我正在尝试确定对线性和二进制搜索技术进行了多少比较。有人可以告诉我如何打印每种情况下循环发生的次数吗？例如，要在第一个数组中找到 5，循环只发生一次。

```
 public static void main(String[] args) {
    // TODO code application logic here
    int[] values  = {5, 8, 6, 2, 1, 7, 9, 3, 0, 4, 20, 50, 11, 22, 32, 120};
    int[] valuesSorted  = {1, 2, 3, 4, 5, 8, 16, 32, 51, 57, 59, 83, 90, 104};
    DisplayArray(values);
    DisplayArray(valuesSorted);

    int index;
    index = IndexOf(1, values);
    System.out.println("1 is at values location " + index);
    index = IndexOf(120, values);

    System.out.println("120 is at values location " + index);

    index = BinaryIndexOf(104, valuesSorted);
    System.out.println("104 is at values Sorted location " + index);

    index = BinaryIndexOf(90, valuesSorted);
    System.out.println("90 is at values Sorted location " + index);       

}

public static int IndexOf(int value, int[] array)
{

    for (int i=0; i < array.length; i++)
    {

        if(array[i] == value)
            return i;

    }

    return -1;

}
public static int BinaryIndexOf(int value, int [] array)
{
    int start = 0;
    int end = array.length -1;
    int middle;

    while (end >= start)
    {
        middle = (start + end ) /2;
        if (array[middle]== value)
            return middle;
        if (array[middle]< value)
            start = middle + 1;
        else 
            end = middle - 1;
    }
    return -1;

}

public static void DisplayArray(int[] array)
{
    for (int a : array)
    {
        System.out.print(a + " ");
    }
    System.out.println();
} 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T02:09:13.027

对于线性搜索，您可以执行以下操作：

```
public static int IndexOf(int value, int[] array)
{
    for (int i=0; i < array.length; i++)
    {

        if(array[i] == value)
        {            
            System.out.println("Linear search: Number of comparisons = " + (i + 1));
            return i;
        }
    }

    return -1;
} 
```

对于二分搜索，请执行以下操作：

```
public static int BinaryIndexOf(int value, int [] array)
{
    int start = 0;
    int end = array.length -1;
    int middle;
    int loopCount = 0;
    while (end >= start)
    {
        loopCount++;
        middle = (start + end ) /2;
        if (array[middle]== value)
        {
            System.out.println("Binary search: Number of times looped = " + loopCount); 
            return middle;
        }
        if (array[middle]< value)
            start = middle + 1;
        else 
            end = middle - 1;
    }
    System.out.println("Binary search: Number of times looped = " + loopCount);
    return -1;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T02:03:29.170

一种简单的方法是在您的类中创建一个计数器变量，并根据需要对其进行操作，如下所示：

```
private static int _loopCounter;

public static void main(String[] args) {
    // TODO code application logic here
    int[] values  = {5, 8, 6, 2, 1, 7, 9, 3, 0, 4, 20, 50, 11, 22, 32, 120};
    int[] valuesSorted  = {1, 2, 3, 4, 5, 8, 16, 32, 51, 57, 59, 83, 90, 104};
    DisplayArray(values);
    DisplayArray(valuesSorted);

    _loopCounter = 0;
    int index;
    index = IndexOf(1, values);
    System.out.println("1 is at values location " + index);
    System.out.println(_loopCounter + " comparisons were made.")

    _loopCounter = 0;
    index = IndexOf(120, values);
    System.out.println("120 is at values location " + index);
    System.out.println(_loopCounter + " comparisons were made.")

    _loopCounter = 0;
    index = BinaryIndexOf(104, valuesSorted);
    System.out.println("104 is at values Sorted location " + index);
    System.out.println(_loopCounter + " comparisons were made.")

    _loopCounter = 0;
    index = BinaryIndexOf(90, valuesSorted);
    System.out.println("90 is at values Sorted location " + index);
    System.out.println(_loopCounter + " comparisons were made.")       
}

public static int IndexOf(int value, int[] array)
{
    for (int i=0; i < array.length; i++)
    {
        _loopCounter++;
        if(array[i] == value)
            return i;
    }
    return -1;
}
    public static int BinaryIndexOf(int value, int [] array)
    {
    int start = 0;
    int end = array.length -1;
    int middle;

    while (end >= start)
    {
        _loopCounter++;
        middle = (start + end ) /2;
        if (array[middle]== value)
            return middle;
        if (array[middle]< value)
            start = middle + 1;
        else 
            end = middle - 1;
    }
    return -1;
}

public static void DisplayArray(int[] array)
{  
    for (int a : array)
    {
        System.out.print(a + " ");
    }
    System.out.println();
} 
```

我没有测试这段代码，但我敢打赌你可以修改它以按照你想要的方式工作。

# android - 广播接收器 - 短信和电话

> ID：13337448
> 
> 赞同：0
> 
> 时间：2012-11-12T01:52:37.390
> 
> 标签：android, broadcastreceiver, android-service

我想设计一个应用程序，只要收到消息或电话，LED就会闪烁。我读过有关广播接收器的信息，但我不确定如何使用它们或从哪里开始。

如果有人可以让我在电话响起时我可以执行操作的方向？也许一个小例子或教程链接会很好。

问候赛义德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T02:08:46.817

这应该有助于广播接收器的东西：[http ://www.vogella.com/articles/AndroidBroadcastReceiver/article.html](http://www.vogella.com/articles/AndroidBroadcastReceiver/article.html)

这应该有助于 LED 的东西（一半）：http: [//mobile.tutsplus.com/tutorials/android/android-vibrator/](http://mobile.tutsplus.com/tutorials/android/android-vibrator/)

# python - 在 Maya 中使用 .NET

> ID：13337449
> 
> 赞同：3
> 
> 时间：2012-11-12T01:52:56.440
> 
> 标签：python, .net, 64-bit, maya, python.net

我想为使用 .NET 库的 Maya/Windows 编写一个插件，以便我可以从 Maya 中捕获 Windows 系统事件。我已经研究了[Python for .NET](http://pythonnet.sourceforge.net/)，但我不知道我在做什么。我尝试使用 Visual C# 2010 Express 从源代码构建并将 clr.pyd 和 Python.Runtime.dll 文件放置在我的 Maya bin 文件夹中，正如许多人所建议的那样，但是当我尝试在脚本编辑器中键入“import clr”时，它给我

第 1 行：DLL 加载失败：%1 不是有效的 Win32 应用程序。

我已将 C# 解决方案平台设置为 x64，生成的 python.exe 在 x64 中的 Python 2.6 中运行，而 Maya 在 x64 中运行 Python 2.6。谁能告诉我我做错了什么，或者是否有 Python for .NET 的替代品？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T01:42:43.383

查看[Maya 2013 的 Extension 2，](http://area.autodesk.com/blogs/chris/maya-2013-extension-2-a-net-api-and-more)它有一个 .NET API。

# django - Django Multiselect，如何正确覆盖选择

> ID：13337456
> 
> 赞同：0
> 
> 时间：2012-11-12T01:53:50.213
> 
> 标签：django, forms, overriding

这是我的forms.py

```
CHOICES = []
class salDeptChartForm(forms.Form):
    company = forms.CharField(max_length=2,label = 'Firma',help_text='A valid email address, please.')
    date_validfrom = forms.DateField(label = 'Bu Tarihten',required=False)
    date_validuntil = forms.DateField(label = 'Bu Tarihe Kadar',required=False)
    saldept = forms.MultipleChoiceField(label = 'Satış Departmanları',choices=CHOICES,    widget=forms.CheckboxSelectMultiple()) 
```

这是我在我的视图中覆盖选择的地方。

```
 form = salDeptChartForm(initial={'company':'01'})
    saldeptlist = saleinstance.fetchSalDept()
    form.fields['saldept'].choices = saldeptlist <this is where I override> 
```

当我选择其中一个选项时会出现问题。表单没有得到验证。

```
Select a valid choice. * is not one of the available choices. 
```

我认为，即使我在我的视图中覆盖了选择，django 仍然会检查我最初创建的先前选择。我很难得到正确的 html 输出。

如何克服这一点？谢谢

完整的视图代码在那里。表单启动两次，一次用于获取，一次用于发布，我也不知道它是否最好。

```
def salDept(request):
    member_id = request.session['member_id']
    saleinstance = sale(member_id)
    chartinstance = charts(member_id)
    if request.method == 'GET':
        form = salDeptChartForm(initial={'company':'01'})  <first init>
        saldeptlist = saleinstance.fetchSalDept()  <its a list>
        form.fields['saldept'].choices = saldeptlist  <override choices>
        print 'get worked'
        return render(request, 'chart/sale/salDept.html',locals())
    if request.method == 'POST':
        form = salDeptChartForm(request.POST) <second init>
        print 'post worked'
        if form.is_valid(): <fails>
            print 'valid'
            company = form.cleaned_data['company']
            vfr = form.cleaned_data['date_validfrom']
            vun = form.cleaned_data['date_validuntil']
            validfrom = formatDate(vfr)
            validuntil = formatDate(vun)
            selectedSalDepts = request.POST.getlist('saldept')
        else:
            print 'not valid'
            print form.errors
        resultdict = chartinstance.salesBySaldept(company,selectedSalDepts,validfrom, validuntil)
        form = salDeptChartForm(initial={'company':company,'date_validfrom':request.POST['date_validfrom'], 'date_validuntil':request.POST['date_validuntil']})
        domcache = 'true'
        return render(request, 'chart/sale/salDept.html',locals()) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T13:57:50.950

好的，您需要覆盖表单的**init** () 来完成此操作。

```
class SomeForm(forms.Form):
    email       = forms.EmailField(label=(u'Email Address'))
    users       = forms.MultipleChoiceField(choices=[(x, x) for x in User.objects.all()]
)

    def __init__(self, *args, **kwargs):
        user = kwargs.pop('user', None)
        super(SomeForm, self).__init__(*args, **kwargs)
            self.fields['users'].choices = [(x, x) for x in User.objects.filter(name__contains='Patel')]

    def clean(self):
        return self.cleaned_datas 
```

在第 (3) 行中，您可以看到我已经提供了所有可能的选择，然后在**init**中我过滤了选择，这很重要，因为 Django 验证您从前者提交的请求并显示来自后者的选择

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T02:01:40.053

您的验证失败，因为您只覆盖了`GET`方法上的选择。你不`POST`为`POST`. 添加选项`POST`应该可以解决您的问题。

# jquery - jquery 和 jsp - 即使 cache:false 和 response.setHeader("Cache-Control", "no-cache") 仍然保存在缓存中

> ID：13337458
> 
> 赞同：0
> 
> 时间：2012-11-12T01:54:12.023
> 
> 标签：jquery, ajax, jsp, caching

我有个问题。将这些代码放在我的 jsp 上后，我仍然可以看到我的缓存仍在增加。

```
<% response.setHeader("Cache-Control", "no-cache"); %> 
```

并在我驻留在同一个 jsp 上的 javascript/jquery 中：

```
function waitForMsg() {
    $.ajax({
        type: "GET",
        url : contextPath + "/groupChat",
        async: true,
        cache: false,

        success: function (data) {
            $("#divChatMessageTable").load(contextPath + "/groupChat/message");
            setTimeout(waitForMsg, 1000);   
        },
        error: function(XMLHttpRequest, textStatus, errorThrown){
            setTimeout(waitForMsg, 15000);  
        }
    });
    if ($("#divChatMessageTable").height() > tableHeight) {
        scrollToBottomChat ();
        tableHeight = $("#divChatMessageTable").height();
    }
} 
```

我已经`cache:false`在jquery中设置了。

顺便说一句，我正在使用 Firefox。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T02:54:57.930

您可能会摆脱最初的 ajax 调用而只保留`load`调用（这也是 ajax）。下面的一个区别是向`load`方法添加了一个成功回调，这样您就不会在插入新内容之前测试它的高度

```
function waitForMsg() {

    $("#divChatMessageTable").load(contextPath + "/groupChat/message", function({ 
        /* new content now exists*/
        if($("#divChatMessageTable").height() > tableHeight) {
            scrollToBottomChat();
            tableHeight = $("#divChatMessageTable").height();
        }
        setTimeout(waitForMsg, 1000);    
    });

} 
```

[http://api.jquery.com/load/](http://api.jquery.com/load/)的 API 参考`load`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T02:47:54.193

我已经通过添加解决了这个问题`no-store, must-revalidate`。

编码：

```
<% response.setHeader("Cache-Control", "no-cache, no-store, must-revalidate"); %> 
```

# css - 更改按钮颜色灯箱

> ID：13337464
> 
> 赞同：1
> 
> 时间：2012-11-12T01:55:22.317
> 
> 标签：css

我正在使用经典的 Galleria 主题。我实现了灯箱并更改了框架颜色：

```
.galleria-lightbox-shadow{background-color: transparent !important}
.galleria-lightbox-content{background:black !important} 
```

但是是否可以更改 Lightbox 中下一个、上一个和关闭按钮的颜色？

现在他们是白人。我想让它们变成黑色。有解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T02:08:21.817

如果我的预感是正确的，“**下一个**”、“**上一个**”和“**关闭**”按钮是**图像**（与大多数灯箱一样）。

您应该编辑其文件夹中的图像并手动将它们转换为黑色主题的图像，或者在线搜索任何替换。

# javascript - Safari Javascript 控制台自动滚动

> ID：13337465
> 
> 赞同：11
> 
> 时间：2012-11-12T01:55:38.437
> 
> 标签：javascript, debugging, safari, console

是否可以使 Safari 6 中的 javascript 控制台自动向下滚动以显示最新日志？目前，我每次登录时都必须手动向下滚动。

# python - 为什么我的 QListView 在 IconMode 中是空的？

> ID：13337466
> 
> 赞同：3
> 
> 时间：2012-11-12T01:55:40.727
> 
> 标签：python, qt, qt4, pyqt, pyside

我有一个`QListView`来自自定义的显示数据`ListModel`。在“常规”视图`ListMode`模式`IconMode`（

这是相关的代码。我省略了主窗口和任何其他杂物，但如果有帮助，我会包括它。

```
# Model
class TheModel(QtCore.QAbstractListModel):
    def __init__(self, items = [], parent = None):
        QtCore.QAbstractListModel.__init__(self, parent)

        self.__items = items

    def appendItem(self, item):
        self.__items.append(item)

        # item was added to end of list, so get that index
        index = len(self.__items) - 1

        # data was changed, so notify
        self.dataChanged.emit(index, index)

    def rowCount(self, parent):
        return len(self.__items)

    def data(self, index, role):
        image = self.__items[index.row()]

        if role == QtCore.Qt.DisplayRole:
            # name
            return image.name

        if role == QtCore.Qt.DecorationRole:
            # icon
            return QtGui.QIcon(image.path)

        return None

# ListView
class TheListView(QtGui.QListView):
    def __init__(self, parent=None):
        super(Ui_DragDropListView, self).__init__(parent)
        self.setDragDropMode(QtGui.QAbstractItemView.InternalMove)
        self.setIconSize(QtCore.QSize(48, 48))
        self.setViewMode(QtGui.QListView.IconMode)

    # ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T11:32:13.777

经过一些繁重的调试，我发现它`data()`永远不会被调用。问题在于我将数据插入模型的方式：`beginInsertRows()`并且`endInsertRows()`应该被调用。新方法类似于以下内容：

```
def appendItem(self, item):
    index = len(self.__items)

    self.beginInsertRows(QtCore.QModelIndex(), index, index)
    self.__items.append(item)
    self.endInsertRows() 
```

尽管旧方法不使用 using `beginInsertRows()`and `endInsertRows()`，但`ListMode`效果很好。这就是让我失望的原因：我仍然认为它不应该奏效。怪癖？

# css - 即使我使用像素，桌面和移动设备的高度也不同？

> ID：13337468
> 
> 赞同：0
> 
> 时间：2012-11-12T01:55:49.163
> 
> 标签：css, mobile

这是它在桌面上的样子：

![在此处输入图像描述](../Images/20e2ff57d2650a551db313b46d24bfa2.png)

这是它在移动设备中的外观：

![在此处输入图像描述](../Images/37ccf391f3a947809f5d4b0b22c309eb.png)

相关的CSS：

样式.sass：

```
item
  .row
    cursor: pointer
    height: 297px
    .top-border
      border-top: 2px dotted $brand-four
      margin: 30px 0 40px 
```

现场直播：

[http://alexandrochen.com/](http://alexandrochen.com/)

（我正在使用[Foundation](http://foundation.zurb.com/)框架）。

这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T02:52:23.423

各种设备上的像素“物理”大小取决于像素密度（以每英寸像素或 ppi 衡量）和设备使用的乘数。

例如，MacBook Pro Retina 15" 有 220 ppi，而普通的 Macbook Pro 有 110 ppi。但是操作系统在内部将像素数乘以 2，因此您的项目的“物理”大小应该是*相似*的。但是由于视网膜使用两倍数量的像素来渲染相同数量的数据，位图将看起来像素化。

查看此内容以获取有关哪个设备具有什么 ppi 的更多信息：[http ://en.wikipedia.org/wiki/List_of_displays_by_pixel_density](http://en.wikipedia.org/wiki/List_of_displays_by_pixel_density)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T02:41:33.033

像素可以是不同的大小。

一些浏览器还允许放大渲染元素以帮助视觉上的挑战，因此尺寸可以不同。

# sql - 将编译好的 Linq To SQL 与 ExecuteMethodCall 一起使用

> ID：13337471
> 
> 赞同：5
> 
> 时间：2012-11-12T01:57:28.463
> 
> 标签：sql, linq

我们非常大的代码库有数百次对 ExecuteMethodCall 的调用，遵循以下模式：

```
 [Function(Name = "dbo.storedproc")]
    public ISingleResult<UserData> GetUserData(
        [Parameter(Name = "UserId", DbType = "BigInt")] long? userId)
    {
        IExecuteResult result = ExecuteMethodCall(this, ((MethodInfo)(MethodBase.GetCurrentMethod())), userId);
        return ((ISingleResult<UserData>)(result.ReturnValue));
    } 
```

但是，这会带来巨大的性能问题（Linq To SQL 的众所周知的问题）。因此，我正在考虑将至少其中一些代码转换为 Compiled Linq To Sql。

我找到了 Compiled Linq To Sql 的示例，但没有一个涉及 ExecuteMethodCall。相反，它们都编译一个 Linq 查询（来自 ... where ... select）。

如果有人能给我一个将上述代码（使用 ExecuteMethodCall）转换为 Compiled Linq To SQL 的示例，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-12T15:29:52.640

select * from user where userid = userId (方法的参数) ,

SP: exec GetUserData @userId = userId

# c - 我的分段错误在哪里？

> ID：13337472
> 
> 赞同：1
> 
> 时间：2012-11-12T01:57:30.020
> 
> 标签：c, linux, gdb

我的代码编译得足够好，但是当我尝试运行它时，我得到了一个分段错误，我不知道出了什么问题。

该程序的重​​点是将不同尺寸和片段数量的片段 ascii 艺术文件的文本拼凑在一起。这些片段被命名为 part_xx-yy，其中 xx 是从 00 到 11，yy 是从 00 到 05。

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>

int main(void)
{
    int width;
    int height;
    int xPieces;
    int yPieces;
    int xTens=0;
    int xOnes=0;
    int yTens=0;
    int yOnes=0;
    printf("Fragment width: ");
    scanf("%d", &width);
    printf("Fragment height: ");
    scanf("%d", &height);
    printf("Number of fragments on x axis: ");
    scanf("%d", &xPieces);
    printf("Number of fragments on y axis: ");
    scanf("%d", &yPieces);
    printf("wtf0");
    char *line=malloc(sizeof(width) * sizeof(char));
    printf("wtf1");
    char array[xPieces][yPieces][height][width];
    printf("wtf2");
    char fileName[50];
    printf("wtf3");
    for(int x = 0; x<xPieces;)
    {
        printf("%d", x);
        for(int y = 0; y<yPieces;)
        {
            printf("%d", y);
            if(xOnes>=10) 
            {
                xOnes=0;
                xTens++;
            }
            if(yOnes>=10)
            {
                yOnes=0;
                yTens++;
            }
            snprintf(fileName, sizeof fileName, "part_%i%i-%i%i", xTens, xOnes, yTens, yOnes);
            FILE *file=fopen(fileName, "r");
            char buffer[(width) * (height)];
            fread(buffer, 1, (width) * (height), file);
            for(int i = 0; i<height; i++)
            {
                printf("%d", i);
                for(int j = 0; j<width; j++)
                {
                    printf("%d", j);
                    array[x][y][i][j] = buffer[j + (i * (width))];
                }
            }
            fclose(file);
            y++;
            yOnes++;
        }
        x++;
        xOnes++;
    }

    FILE *newFile=fopen("newFile", "w");

    for(int y = 0; y<yPieces; y++)
    {
        for(int i = 0; i<height; i++)
        {
            for(int x = 0; x<xPieces; x++)
            {
                for(int j = 0; j<width; j++)
                {
                    fwrite(&array[x][y][i][j], 1, 1, newFile);
                }
            }
        }
    }

    fclose(newFile);
    free(line);
} 
```

我想出了如何使用调试器，这表明 fread() 有问题，我认为这是由我的 fileName 数组引起的，但我改变了一些东西，现在我从调试器得到的只是：

```
Program received signal SIGSEGV, Segmentation fault.
0x0018d68c in fread () from /lib/tls/i686/cmov/libc.so.6 
```

我想也许 fread() 试图读入一个太小的缓冲区，所以我将缓冲区增加到 10000（这应该是戏剧性的矫枉过正），但唉，无济于事。我现在已经研究了很多，在这个问题上挣扎了几个小时，但仍然不知道如何从这里走得更远，因为我发现类似问题对我来说没有多大意义或不够相似.

我认为此时我需要其他人来查看我的代码，因此将不胜感激任何帮助。

.

.

**更新：**我已经用一些更改更新了我的代码，现在我在这里遇到了分段错误：

```
Program received signal SIGSEGV, Segmentation fault.
0x08049058 in main () at innlev3.c:50
50                      *array[x][y][i][j] = buffer[j + (i * (*width))]; 
```

我认为这部分很好......我做错了什么，在这里？

**更新 2：**代码再次更新。我发现了一些我认为很奇怪的东西……在我的 scanf 工作之后，那些 printf 都没有……而且我又回到了旧的 fread() 分段错误。我想这是一件好事，我没有对此提出新问题......：P

```
Program received signal SIGSEGV, Segmentation fault.
0x0018d68c in fread () from /lib/tls/i686/cmov/libc.so.6
(gdb) backtrace
#0  0x0018d68c in fread () from /lib/tls/i686/cmov/libc.so.6
#1  0x08048fc6 in main () 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T02:02:56.547

我猜`file`是`NULL`，可能表明`*fileName`不存在。

请注意这样的语句：

```
fileName[5] = "%i",xTens; 
```

不要做你可能期望的事情。该声明相当于：

```
fileName[5] = xTens; 
```

这应该会给您一个编译器警告，因为您将 an 分配`int`给`char*`.

相反，您可能打算`snprintf`使用`printf`-style 格式来构造文件名。

```
char filename[50];
snprintf(filename, sizeof filename, "part_%i%i-%i%", xTens, xOnes, yTens, yOnes);
FILE *file=fopen(fileName, "r"); 
```

* * *

对于你的第二次崩溃：你有一个额外的指针层，你不需要在`array`. 将其声明为`char array...`并`*`在访问时将其删除。就目前而言，您已经告诉编译器元素将是指针，但您没有让它们指向任何地方，然后您要求编译器使用`*`. 繁荣！

您最终使用`array`then 需要创建一个指向每个字符的指针以传递给`fwrite`. 您可以使用`&`称为“address-of”的运算符来执行此操作，如`&array...`.

address-of 运算符与`*`. 一旦你的程序工作，你可以使用`&`其他地方来简化你的代码。例如，您可以删除无处不在并传递给，而不是使用 声明`int *width`并从堆中分配它。`malloc``*``&width``scanf`

* * *

由于我们回到了段错误：在使用它之前`fread`检查它的返回值。`fopen`如果是`NULL`，则打印错误消息。

```
if(file == NULL)
{
    printf("can't open %s\n", fileName);
    exit(1);
} 
```

这可能会告诉你出了什么问题。但是，这不是调试代码。您通常应该检查您调用的函数的错误返回。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T02:00:20.707

在使用它之前，您没有将 *width 设置为任何内容。

您想在阅读尺寸后进行分配。

```
printf("fragment width: ");
scanf("%i", width);
printf("fragment height: ");
scanf("%i", height);
char *line=malloc(sizeof(*width) * sizeof(char)); 
```

此外，这并没有做你认为的那样：

```
 FILE *file=fopen(*fileName, "r"); 
```

它将打开一个名为“p”的文件。

这也不会像您认为的那样：

```
 fileName[5] = "%i",xTens; 
```

我认为您正在考虑python。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T02:02:19.727

如果您运行`gdb`并回溯，您会看到：

```
Program received signal SIGSEGV, Segmentation fault.
0x00007ffff7a8a724 in fread () from /lib/x86_64-linux-gnu/libc.so.6
(gdb) backtrace
#0  0x00007ffff7a8a724 in fread () from /lib/x86_64-linux-gnu/libc.so.6
#1  0x0000000000400ad1 in main () 
```

这意味着你正在崩溃`fread`。您的文件变量 in`fread()`似乎不正确。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T02:04:08.967

+1 用于学习使用调试器 :) 您没有检查“fopen”的返回值。`file`传递给什么值`fread`？

# iphone - 多台设备上的 Game Center 沙盒

> ID：13337473
> 
> 赞同：1
> 
> 时间：2012-11-12T01:57:52.737
> 
> 标签：iphone, ios, game-center

我正在构建一个使用 Game Center 的应用程序。为了测试，我使用我的 iPhone 和模拟器以不同的帐户登录。我现在想用我妻子的手机和我一起测试，当我打开应用程序时，它没有登录沙箱。

它显示游戏进入模式已登录，但现在开始游戏，邀请按钮显示为灰色，并显示未经身份验证的用户。

如何让我妻子的 iphone 使用 Game Center 沙盒。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T04:13:59.137

> 作为开发者，您需要为 Sandbox 创建一个单独的 Game Center 帐户。在任何给定时间，您都必须选择是登录沙盒进行测试，还是登录实时环境。首先启动 Game Center 应用程序并**注销当前经过身份验证的玩家**。在此之后，**运行您的游戏或其他支持 Game Center 的游戏**。根据该应用程序的分发方式，您输入不同的凭据。如果该应用程序是为开发而配置的，**请输入您的测试帐户信息（将您登录到沙盒）**。否则，请输入您的真实账户信息（将您登录到真实环境。

只需退出 Game Center 并启动您的应用程序。然后你输入你登录到你的测试帐户。

来自[苹果](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/GameKit_Guide/TestingYourGameCenter-AwareGame/TestingYourGameCenter-AwareGame.html#//apple_ref/doc/uid/TP40008304-CH17-SW1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T02:22:02.873

启动 Gamecenter -> 我 -> 点击帐户： -> 退出。使用您的沙盒帐户登录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T18:20:33.460

所以最终是我没有从我的应用程序打开模式沙箱登录。我进行了代码更改，升级了调用以显示登录以支持 IOS6。我以前使用的方法已弃用。因此，我输入的新代码忘记显示登录模式，当我进入应用程序时，这让我挂了。

# javascript - 使用 Google Maps API V3 以编程方式更新 StreetView

> ID：13337478
> 
> 赞同：2
> 
> 时间：2012-11-12T01:58:05.573
> 
> 标签：javascript, google-maps, google-maps-api-3

我想知道是否可以以编程方式不断更新谷歌地图街景 API 的坐标？谢谢，代码片段可能会有所帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T14:38:53.360

拥有[StreetViewPanorama](https://developers.google.com/maps/documentation/javascript/reference#StreetViewPanorama)后，您可以像这样以编程方式更新位置或视点：

```
var panorama = map.getStreetView();// or new google.maps.StreetViewPanorama(div);

// update position of StreetView
panorama.setPosition(new google.maps.LatLng(42.345573,-71.098326));

// update the point of view
panorama.setPov({
  heading: 34,
  pitch: 10,
  zoom: 1
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-30T04:54:57.720

创建 div 地图容器

```
<div id="panrama" style="width: 400px; height: 400px"></div> 
```

使用 JavaScript 自动旋转：

```
var     pano;
var     latlng = new google.maps.LatLng(38.897526, -77.0370613);

var panoOptions = {
    position: latlng,
    pov: {
        heading: 0,
        pitch: 0
    }
};

pano = new google.maps.StreetViewPanorama(
    document.getElementById('panorama'), 
    panoOptions);

window.setInterval(function() {
    var pov = pano.getPov();
    pov.heading += 0.2;
    pano.setPov(pov);
}, 10); 
```

示例：[虚拟游览白宫](http://theoryapp.com/my/web/rotating-panorama.html)

学分：[theoryapp.com](http://theoryapp.com/rotating-street-view-panorama-using-google-maps/)

# c - getopt_long() 将多个参数解析为单个选项字母

> ID：13337484
> 
> 赞同：2
> 
> 时间：2012-11-12T01:59:40.590
> 
> 标签：c, getopt

我想用来`getopt_long()`解析命令行参数。阅读`getopt_long()`手册页后，我了解到`getopt_long()`只能在选项之后解析一个参数。有没有办法`getopt_long()`像这样解析这个命令行：

```
./a.out -s 127.0.0.1 2012 -u stackoverflow 
```

给出结果：

```
ip = 127.0.0.1
port = 2012
username = stackoverflow 
```

这是我尝试过的：

```
while (1) {
    int this_option_optind = optind ? optind : 1;
    int option_index = 0;
    static struct option long_options[] = {
        {"server", required_argument, NULL, 's'},
        {"user", required_argument, NULL, 'u'},
        {0, 0, 0, 0},
    };

    c = getopt_long(argc, argv, "s:u:", long_options, &option_index);
    if (c == -1)
        break;

    switch (c) {

        case 's':
            printf("option %s", long_options[option_index].name);
            if (optarg) {
                printf(" with arg %s", optarg);
            }
            printf("\n");

        case 'u':
            printf("option %s", long_options[option_index].name);
            if (optarg) {
                printf(" with arg %s", optarg);
            }
            printf("\n");

        case '?':
            break;

        default:
            printf("?? getopt returned character code 0%o ??\n", c);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T02:17:15.527

第一个答案是：没有什么能阻止您使用或修改`optind`. 如果`optind < argc`then`optind`是 中下一个公共行参数的索引`argv`，否则没有更多参数。因此，您可以在处理循环中使用该参数，但这是您的责任：

*   确保`optind`在范围内 ( `< argc`)
*   检查参数 at 是否`argv[optind]`是另一个选项（即它是否以 a 开头`-`）
*   递增`optind`，以便您使用的参数不会被重新扫描`getopt`。

第二个答案是：在做这种非标准的事情之前，你应该三思而后行。尽管它看起来更像是打字，但有充分的理由使用更标准的技术，比如一个`-p PORT`选项。对于习惯于标准命令行选项行为的用户来说，它更容易记录，实现的工作更少，也不那么令人惊讶。

最后，您的示例代码中缺少许多`break`语句，这就是为什么`-s`会被报告为`-u`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T08:37:09.737

如果你这样调用你的程序：

```
./a.out -s "127.0.0.1 2012" -u stackoverflow 
```

在这种情况下，您将获得`"127.0.0.1 2012"`价值。`optarg``'s'`

# c - 如何分配给另一个结构指针中的结构指针

> ID：13337485
> 
> 赞同：1
> 
> 时间：2012-11-12T01:59:47.303
> 
> 标签：c, pointers, struct

我在分配给另一个结构指针中的结构指针时遇到问题

结构如下所示：

### 头文件.h

```
typedef struct {
    int drawnlines;
    char *name;
} player;

typedef struct {
    char a, b;
    p *mover;
    p *previous;
} lastmove; 
```

在另一个函数中，我调用了另一个应该更改指向该结构的指针的函数，这也是给我警告的函数：

### 程序.c

```
#include header.h
.....
lastmove lmv;
lmv.mover=malloc(sizeof(player *));
lmv.previous=malloc(sizeof(player *));
player p;
p.drawnlines=0;
p.drawnlines=0;
strcpy(p.name, "patrik");
function(&lmv, &p);

.....
int
function(lastmove *lmv, player *p)
{
    lmv->a='b';
    lmv->b='a';
    lmv->previous=lmv->mover;
    lmv->mover=p;        // warning: assignment from incompatible pointer type
} 
```

我的代码有什么问题？

更新：现在代码有效，是一个简单的错误。结构“lastmove”现在更改为

```
typedef struct {
    char a, b;
    player *mover;
    player *previous;
} lastmove; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T02:08:01.453

好吧，在你的代码中，`mover`是一个指向 type 的指针`p`，它没有在任何地方定义——你是说这个吗？

```
typedef struct {
    char a, b;
    player *mover;
    player *previous;
} lastmove; 
```

另外，我认为您的分配有问题。当您需要为 a 提供足够的空间时，您正在为 a 分配足够的空间`player*`，这是一个指向玩家的指针`player`。

# opencv - 如何补偿“自我运动”

> ID：13337486
> 
> 赞同：6
> 
> 时间：2012-11-12T01:59:48.853
> 
> 标签：opencv, opticalflow

我正在做一个项目来检测来自具有光流的移动相机的移动物体。为了检测任何移动物体的真实运动，我需要补偿相机的自我运动。任何机构都可以提出一种简单的方法吗？我的项目使用 opencv c 和 c++。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T20:18:09.770

嗨，实际上如果您使用光流，您不一定需要补偿自我运动。可以创建长期轨迹并将它们聚类。查看这些出版物[LDOF](http://lmb.informatik.uni-freiburg.de/Publications/2010/Bro10e/)或[MORLOF](http://elvera.nue.tu-berlin.de/typo3/list.php?id=1366)。但是，如果你想补偿自我运动，那么：

*   使用 GFT 或简单的点网格检测要跟踪的点
*   通过 Lucas Kanade 或其他局部光流方法计算运动矢量
*   使用 cv::getAffineTransform 或 cv::getPerspectiveTransform 计算仿射或透视变换矩阵（RANSAC 是一个很好的估计器）
*   使用 cv::warpAffine 或 cv::warpPerspective 用变换矩阵补偿自我运动

# objective-c - 没有“可能导致保留周期”警告是否意味着不会创建强引用周期？

> ID：13337487
> 
> 赞同：0
> 
> 时间：2012-11-12T01:59:51.267
> 
> 标签：objective-c, xcode, llvm, block, retain-cycle

根据过渡到 ARC 发行说明，当在块中引用 self 时，应使用弱引用以避免强引用/保留循环：

```
MyViewController *myController = [[MyViewController alloc] init…];
// ...
MyViewController * __weak weakMyController = myController;
myController.completionHandler =  ^(NSInteger result) {
MyViewController *strongMyController = weakMyController;
if (strongMyController) {
    // ...
    [strongMyController dismissViewControllerAnimated:YES completion:nil];
    // ...
}
else {
    // Probably nothing...
}
}; 
```

有时，我会收到一个编译器警告，指出在块中引用 self 可能会导致保留循环。没有警告是否意味着不会创建保留周期？为什么警告被限定为“可能”导致保留周期？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T09:15:15.307

> 没有警告是否意味着不会创建保留周期？

不会。编译器能够确定您可以创建保留循环的某些条件，但它不可能排除您创建保留循环的可能性。例如，考虑以下类：

```
@interface MyClass : NSObject

@property (readwrite, strong) id myObject;

@end 
```

*以及不同*类中的代码片段：

```
MyClass *one = [MyClass new];
MyClass *two = [MyClass new];

one.myObject = two;
two.myObject = one; // created a strong cycle... 
```

对于一个编译器来说甚至发现这个简单的循环需要跨多个类的流分析，一般来说这个问题是编译器无法解决的（你可以在运行时扫描/发现循环的创建，ARC 不这样做）。

> 为什么警告被限定为“可能”导致保留周期？

创建一个循环本身并没有错或坏。只有成为孤立的循环才是问题。即没有活动引用引用它，只有循环引用导致循环中的对象保持活动状态。

当编译器在正在创建的块中看到对 self 的强引用时，它知道将创建一个*实时*强循环，但它无法确定（即如上所述一般无法解决）该循环是否会在不再需要块之前被打破或者创建对象和块是否会形成孤立循环。因此使用了非确定性的“可能”。

# data-binding - WinJS ListView 和模板绑定

> ID：13337489
> 
> 赞同：0
> 
> 时间：2012-11-12T02:00:16.850
> 
> 标签：data-binding, windows-8, winjs

所以我试图通过模板显示来自 JSON 请求的一些数据。数据有一些嵌套对象（数量不等），类似于：

```
data: "Some data",
nested: [
 {
  nested_data: "foo",
  bar: "foobar"
  }, ...
],
... 
```

我已经成功地解析了 JSON 并将其存储在一个`WinJS.Binding.List`对象中，并将结果绑定到一个模板。我遇到的问题实际上是在我的模板中显示嵌套的 JSON 数据。模板看起来像这样：

```
<div class="appTemplate">
 <div class="innerTemplate">
  <h1 data-win-bind="innerText: data">
  <h2 data-win-bind="innerText: nested">
 </div>
</div> 
```

当我运行这些程序时，模板的“嵌套”部分只是一堆`[object Object]`而不是我想要显示的数据。

有什么方法可以创建模板以便它可以处理嵌套数据？定义模板函数会更容易吗？不知道在这里做什么...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T02:53:23.540

没有内置的方法可以做到这一点——用于迭代数据的唯一内置控件是列表视图。但是，您不能嵌套列表视图。

有两种方法可以解决此问题，具体取决于您想要的结果：

1）**字符串化嵌套数据**：您可以通过编写`WinJS.Binding.converter`将数据数组转换为单个字符串值的方法来实现。例子

代码：

```
WinJS.Namespace.define("Examples.Converters", {
    nestedDataConverter: WinJS.Binding.converter(function(input) {
        // Assume input is array
        var result = "";
        input.forEach(function(data) {
            result += data.nested_data + ", " + bar + ";";
        });

        result result;
    }),
}); 
```

模板：

我推荐的解决方案是构建您*自己的*控件，该控件将获取您的数组（或`WinJS.Binding.List`）并创建所需的元素/布局。我在我从事的一个项目中做到了这一点，而且非常简单。

示例模板：

```
<div class="appTemplate" data-win-control="WinJS.Binding.Template">
  <div class="innerTemplate">
    <h1 data-win-bind="innerText: data">
    <h2 data-win-bind="innerText: nested Examples.Converters.nestedDataConverter">
  </div>
</div> 
```

现在，h2 将拥有该数据的单字符串版本。

2)**创建一个控件以丰富地显示数据**：为此，您需要创建一个新的 WinJS 控件并在模板中使用它。

控制示例：

```
WinJS.Namespace.define("Examples.Controls", {
    Stamper: WinJS.Class.define(function(element, options) {
        WinJS.UI.setOptions(this, options);
        this.domElement = element;
    }, {
        domElement: nullm
        _data: null,
        data: {
            set: function(val) {
                this._data = val;
                updateLayout();
            }
        },
        updateLayout: function() {
            this.domElement.innerHTML = "";
            if(!this._data) {
                return;
            }

            this._data.forEach(function(item) {
                var el = document.createElement("div");
                el.textContent = "Data: " + item.nested_data + ", " + item.bar;
                this.domElement.appendChild(el);
            }.bind(this));
        }
    }),
}); 
```

模板：

```
<div class="appTemplate" data-win-control="WinJS.Binding.Template">
  <div class="innerTemplate">
    <h1 data-win-bind="innerText: data"></h1>
    <div data-win-control="Examples.Controls.Stamper"
         data-win-bind="winControl.data: nested"></div>
  </div>
</div> 
```

可以扩展此控件以呈现嵌套模板和其他项目。这完全是您想要变得多复杂的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T02:24:16.967

尝试`data-win-bind="innerText: nested.nested_data"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T20:11:08.987

使用模板功能会容易得多。

内置的可绑定模板非常适合无逻辑的模板，但是当您需要模板根据数据值以及在您的情况下更深的属性做出决策时，它就不够用了。

# c++ - 字符（字符串）到整数

> ID：13337493
> 
> 赞同：0
> 
> 时间：2012-11-12T02:00:31.590
> 
> 标签：c++

我想知道如何将一个数组与两个数组进行比较，但有一些规则：在我的代码中，我需要输入 8 位数字来进行循环 - 好的，我做到了。现在我需要比较`array = m[3]`两个不同的数组：

第一个数组必须与`(if m[i]%2==0) ...`

第二个数组必须与`(if m[i]%2!=0) ...`

因此，如果我从键盘键入 Main 数组中的那三行`(m[3])`：

```
12345678
12345689
12344331 
```

键入它们后，我需要在这两个不同的`char(string)`数组`integer`中`%`设置 因此，在输入 3 行后，下一步是：

```
arrA=12345678
arrB=12345689 12344331

#include <iostream>
#include <conio.h>
#include <string>
#include <cstdlib>
#include <stdlib.h>
using namespace std;
int main()
{
    int i,n;
    char m[3];
    for(i=1; i<=3; i++)
    {
        cout<<i<<". Fak nomer: "<<endl;
        do
        {
            cin>>m[i];
            gets(m);
        }
        while (strlen(m)!=7);
        cout<<"As integer: "<<atoi(m);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T02:35:13.287

据我了解，您正在尝试将三个正整数读入一个名为 的数组`m`中，但您要确保以下内容：

*   所有三个数字都有八位数字
*   第一个数字 ( `m[0]`) 是偶数
*   第二个数字 ( `m[1]`) 是奇数

如果`m`可以是整数数组会容易得多，那么不需要从字符串转换为整数。要从控制台读取三个整数，请使用以下命令：

```
// m is now an array of integers
int m[3];
// loops from m[0] to m[2]
for(int i = 0; i < 3; i++)
{
    cout<<i<<": "<<endl;
    do
    {
        cin>>m[i];
    }
    while (!(m[i] >= 1e7 && m[i] < 1e8));
    // m[i] must be greater than or equal to 10000000 and less than 100000000
    //  before continuing
} 
```

通过制作`m`一个整数数组，检查偶数或奇数变得更容易：

```
if (m[0] % 2 == 0)
    cout << "m[0] is even" << endl;
if (m[1] % 2 != 0)
    cout << "m[1] is odd" << endl; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T02:30:31.170

不知道我是否理解你的问题，但为什么不改变

```
char* m[3]; 
```

至

```
int m[3]; 
```

你可能想重做循环

```
int m[3];    
for(i=0; i<3; i++)
{
    cout<<i+1<<". Fak nomer: "<<endl;

    cin>>m[i]; 

    while (m[i] < 1000000 || m[i] >9999999)
    {
        cout<<"number is less/more than 7 digits. Try again:"<<endl;
        cin>>m[i];
    }

    cout<<"As integer: "<< m[i];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T02:33:10.477

很难准确理解您要达到的目标。

如果我理解正确，您正在尝试从用户那里获取 3 个 7 字符的输入字符串（整数），然后依次检查第一个字符串的每个整数与其他 2 个字符串中的相同位置字符？

```
#include <iostream>
#include <string>

int main()
{
    std::string m[3];
    for(int i = 0; i < 3; ++i)
    {
        std::cout << i + 1 << ". Fak nomer: "<< std::endl;
        do
        {
            std::cin >> m[i];
        }
        while (m[i].size() != 7);
    }

    // we have enforced each string to be 7 characters long, check each character in turn
    for(int i = 0; i < 7; ++i)
    {
        // get the i'th character of each string, and subtract the ascii '0' character to convert to an integer
        int a1 = m[0][i] - '0';
        int a2 = m[1][i] - '0';
        int a3 = m[2][i] - '0';

        std::cout << "checking " << a1 << " against " << a2 << " and " << a3 << std::endl;

        if (a1 % a2 == 0)
            std::cout << a1 << " % " << a2 << " == 0" << std::endl;

        if (a1 % a3 != 0)
            std::cout << a1 << " % " << a3 << " != 0" << std::endl;
    }

    return 0;
} 
```

# json - 使用 Jerkson Parsing 忽略字段，预期出现有效值错误

> ID：13337495
> 
> 赞同：2
> 
> 时间：2012-11-12T02:00:47.897
> 
> 标签：json, scala

假设我有这样的 JSON：

```
{
   "field":{
      "nested":{
         "foo":"foo val",
         "bar":"bar val",
      },
      "toignore1":{

      },
      "toignore2":{

      }
   }
} 
```

我似乎无法正确解析它，并且由于**我可能不知道要输入的所有字段，例如 toignore3...**，因此我不想在模型中调用它们。我只需要整个响应中的一些值。如果`JSON_STRING`代表上面的JSON，为什么我用Jerkson解析的时候不能这样呢？

```
case class JsonModel(val field: FieldModel)
case class FieldModel(val nested: NestedModel) // ignoring other stuff here 
case class NestedModel(val foo: String, bar: String)

val parsed = parse[JsonModel](JSON_STRING) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T23:59:55.817

您可以通过以下两种方式之一执行此操作：

```
case class CaseClassWithIgnoredField(id: Long) {
  @JsonIgnore
  val uncomfortable = "Bad Touch"
}

@JsonIgnoreProperties(Array("uncomfortable", "unpleasant"))
case class CaseClassWithIgnoredFields(id: Long) {
  val uncomfortable = "Bad Touch"
  val unpleasant = "The Creeps"
} 
```

# java - Jackson 1.9.2 List 的反序列化 返回列表

> ID：13337502
> 
> 赞同：2
> 
> 时间：2012-11-12T02:02:33.973
> 
> 标签：java, jackson, deserialization

我正在使用 Jackson 1.9.2，并且正在尝试反序列化使用相同的 Jackson 库序列化的对象。该对象具有类型为 List 的列表，并将此序列化字符串反序列化回对象导致 List

我尝试按照相关帖子中列出的步骤进行操作 -[杰克逊没有反序列化它已序列化](https://stackoverflow.com/questions/6062011/jackson-is-not-deserialising-a-generic-list-that-it-has-serialised/13337453#13337453)但对我不起作用的通用列表。

我尝试通过以下方式同时使用 Typefactory 和 TypeReference：

1)

```
TypeFactory tf = TypeFactory.defaultInstance();

JavaType tr = tf.constructType(new TypeReference <RequestBeanType> () { });

mapper.readValue(json, tr); 
```

2)

```
mapper.readValue(json, new TypeReference <RequestBeanType> () {}); 
```

3)

```
TypeFactory tf = TypeFactory.defaultInstance();
tf.type(RequestBeanType.class, Comparable.class)); 
```

在所有这三种情况下，我都没有取回使用 JSON 序列化的列表。反序列化始终默认列表为

```
List<LinkedHashMap<RequestBeanType> when it should actually be List<RequestBeanType> 
```

有什么办法吗？

# javascript - Javascript IE 错误：“目标”为空或不是对象

> ID：13337510
> 
> 赞同：4
> 
> 时间：2012-11-12T02:03:20.220
> 
> 标签：javascript, internet-explorer, javascript-events

```
document.onkeydown = function(event) {
    var tagName = event.target.tagName;
    if (tagName != 'INPUT' && tagName != 'TEXTAREA' && !event.alt && event.control) {

        if (event.ctrlKey && event.keyCode == 37) {
            if (_this.currentPage > 1) {
                window.location.href = _this.baseUrl.replace(/%page%/i, _this.currentPage + 1);
            }
        } else if (event.ctrlKey && event.keyCode == 39) {
            if (_this.currentPage < _this.pagesTotal) {
                window.location.href = _this.baseUrl.replace(/%page%/i, _this.currentPage - 1);
            }
        }
    }
} 
```

这仅在 IE 8 中给我一个错误：

**'target' 为 null 或不是对象**

对于那条线`var tagName = event.target.tagName;`

如何解决。当我按下 Ctrl 或箭头按钮时发生错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T02:04:36.670

IE 不会将`event`对象传入事件处理程序。相反，它们使用对象的全局`event`属性`window`。所以对于 IE，你会使用它`window.event`。

首先测试提供的参数是常见的做法。您还必须考虑 IE 使用`srcElement`而不是`target`. 为了解决所有这些问题，请使用与此类似的内容：

```
document.onkeydown = function(event) {
    event = event || window.event;
    var tagName = (event.target || event.srcElement).tagName;
    // Keep up the good work...
} 
```

这应该可以解决问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T02:07:54.140

像这样做：

```
event = event || window.event;
var tagName = (event.target || event.srcElement).tagName.toUpperCase(); 
```

# applescript - 尝试读取电子邮件消息的 UTF-8 错误：“无法将 <> 的 <> id 9574 of <> “Gmail” 的 <> “INBOX” 转换为类型 <>。”

> ID：13337514
> 
> 赞同：5
> 
> 时间：2012-11-12T02:03:40.927
> 
> 标签：applescript

我正在尝试检索触发我的 AppleScript 的任何电子邮件的正文。我保存了一条测试消息，当我单击“应用规则”时，出现此错误：

“无法将 <>“Gmail”的 <>“INBOX”的 <> id 9574 的 <> 转换为类型 <>。”

编辑：这是代码的相关部分：

```
using terms from application "Mail"
on perform mail action with messages messageList for rule aRule
    tell application "Mail"
        repeat with thisMessage in messageList
            try
                say content of thisMessage
            on error errMsg
                display alert errMsg
            end try
        end repeat
    end tell
end perform mail action with messages
end using terms from 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T22:41:58.923

尝试：

```
say (content of thisMessage as text) 
```

# java - Codingbat fix45 有更简单的解决方案吗？

> ID：13337515
> 
> 赞同：7
> 
> 时间：2012-11-12T02:03:41.507
> 
> 标签：java, algorithm

我正在尝试解决这个 CodingBat 问题：

> （这是 fix34 问题的一个稍微困难的版本。）返回一个包含与给定数组完全相同的数字的数组，但重新排列，以便每个 4 紧跟一个 5。不要移动 4，而是每隔一个数字可能会移动。该数组包含相同数量的 4 和 5，并且每个 4 后面都有一个不是 4 的数字。在此版本中，5 可能出现在原始数组中的任何位置。

```
fix45({5, 4, 9, 4, 9, 5}) → {9, 4, 5, 4, 5, 9}
fix45({1, 4, 1, 5}) → {1, 4, 5, 1}
fix45({1, 4, 1, 5, 5, 4, 1}) → {1, 4, 5, 1, 1, 4, 5} 
```

我最初使用的方法通过了所有站点测试，但我认为它不适用于更长的数组。初始方法使用了 2 个循环，并且没有使用新数组。我创建了一个解决方案，它引入了一个新数组和第三个嵌套循环，我相信它适用于所有问题实例。但是，该站点声明本节中的问题可以通过 2 个循环来解决，所以我想知道是否真的有一个 2 循环解决方案适用于*任何*问题实例。这是问题和我的 3 循环解决方案：

```
public int[] fix45(int[] nums) {

    int[] locations = {-1};

    for (int i = 0; i < nums.length - 1; ++i) {

        if (nums[i] == 4) {

            JLoop:
            for (int j = nums.length-1; j >= 0; --j) {
                if (nums[j] == 5) {
                    for (int k = locations.length-1; k>=0 ; --k) {
                        if (locations[k] == j) {
                            continue JLoop;
                        } 
                    }
                    nums[j] = nums[i + 1];
                    nums[i + 1] = 5;
                    locations[locations.length - 1] = i+1;
                    locations = java.util.Arrays.copyOf(locations,
                            locations.length + 1);
                    locations[locations.length-1] = -1;
                    break;
                }
            }
        }
    }
    return nums;

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T03:05:48.950

每次找到 4 时从数组的一端重新开始搜索合适的 5 似乎很浪费。阵列的一部分已经被扫描并且已知不包含可以移动的 5。这是 O(n) 时间和 O(1) 空间。

```
 public static int[] fix45(int[] nums) {

      int j = 0;
      for (int i = 0; i < nums.length - 1; ++i) {
        if (nums[i] == 4 && nums[i + 1] != 5) {
          /*
           * Need to find the next movable 5 That means an element that is 5 and
           * either is the first element or is preceded by anything other than 4
           */
          while (nums[j] != 5 || (j != 0 && nums[j - 1] == 4)) {
            j++;
          }
          nums[j] = nums[i + 1];
          nums[i + 1] = 5;
        }
      }
      return nums;
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T03:06:01.603

使用一个额外的数组，这是一个带有“一个循环”的解决方案（没有嵌套循环的循环）：

```
public int[] fix45(int[] nums) {
  int[] otherValues = new int[nums.length];

  for(int i = 0, c = 0; i < nums.length; i++)
    if(nums[i] != 4 && nums[i] != 5)
      otherValues[c++] = nums[i];

  for(int i = 0, c = 0; i < nums.length; i++)
    if(nums[i] == 4)
      nums[++i] = 5;
    else
      nums[i] = otherValues[c++];

  return nums;
} 
```

我们修复四点，取出非四点和非五点，然后将所有值按顺序放回原处。

为了提高空间使用率（可能不会太多），您可以在制作额外数组之前计算四的数量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-15T06:48:38.137

```
public int[] fix45(int[] nums) {

 int t=0;
  for(int i=0; i< nums.length ; i++)
     for(int j=0;j<nums.length ; j++)

     if(nums[i]==5 && nums[j]==4)
     {
      t=nums[j+1];
      nums[j+1]=nums[i];
      nums[i]=t;
     }
     return nums;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T03:05:31.120

以下方法将使用 O(n) 空间在 O(n) 时间内运行：

```
public int[] fix45(int[] nums) {

    if (nums == null || nums.length <= 1) {
        return nums;
    }

    // store all the 5s pos
    int[] pos = new int[nums.length];
    int j = 0;
    for (int i = 0; i < nums.length; i++) {
        if (nums[i] == 5) {
            pos[j++] = i;
        }
    }

    j = 0;
    for (int i = 0; i <= nums.length - 2; i++) {
        if (nums[i] == 4 && nums[i + 1] != 5) {
            if (j >= pos.length) {
                System.err
                        .println("No more 5s: there are more 4 than 5 in the input array");
                break;
            }
            // fix45 swapping
            nums[pos[j++]] = nums[i + 1];
            nums[i + 1] = 5;
        }
    }

    return nums;

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-20T16:47:00.827

```
public int[] fix45(int[] nums) {
  int idx4 = -1;
  int idx5 = -1;
  while (true) {
    while (true) { // find a 4 without a 5 after it
      idx4 = find(nums, 4, ++idx4);
      if (idx4 == -1)  // done if no more 4's
        return nums;
      if (nums[idx4+1] != 5)
        break;
    }
    while (true) { // find a 5 without a 4 before it
      idx5 = find(nums, 5, ++idx5);
      if (idx5 == 0 || nums[idx5-1] != 4)
        break;
    }
    nums[idx5] = nums[idx4+1];  // swap the 4 and 5
    nums[idx4+1] = 5;
  }
}

public int find(int[] nums, int num, int start) {
  for (int i = start; i < nums.length; i++)
    if (nums[i] == num)
      return i;
  return -1; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-12T02:38:51.720

修复 dansalmos 备注后：

```
public int[] fix45(int[] nums) {
    for (int i = 0; i < nums.length; i++) {

        if (nums[i] == 4) {
            if(nums[i+1] == 5) continue;

            for( int j = 0; i < nums.length; j++){
                if(nums[j] == 5 && (j==0 || nums[j-1] != 4)){
                    nums[j] = nums[i+1];
                    nums[i+1] = 5;
                    break;
                }
            }

        }
    }

    return nums;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-04-05T16:20:02.413

```
public int[] fix45(int[] nums) {
   if (nums.length < 2) {
   return nums;
   }
        int index = 0;
        int index2 = 0;
        int index3 = 0;
        int[] only5 = fives(nums);
        int[] after4 = new int[count4(nums)];
        for (int a = 0; a < nums.length - 1; a++) {
            if (nums[a] == 4) {
                after4[index] = nums[a + 1];
                index++;
                nums[a + 1] = only5[index2];
                index2++;
            }
        }
//This while loop gets the frst number that is not a 5 that is after a 4
        while (nums[0] == 5) {
            nums[0] = after4[index3];
            index3++;
        }

        if (nums[nums.length - 2] != 4 && nums[nums.length - 1] == 5) {
            nums[nums.length - 1] = after4[index3];
            index3++;
        }
        for (int b = 1; b < nums.length; b++) {
            if (nums[b] == 5 && nums[b - 1] != 4) {
                nums[b] = after4[index3];
                index3++;
            }
        }
        return nums;
    }
    public int count4(int[] nums) {
        int cnt = 0;
        for (int e : nums) {
            if (e == 4) {
                cnt++;
            }
        }
        return cnt;
    }
    public int[] fives(int[] nums) {
        int index = 0;
        int[] only5 = new int[count4(nums)];
        for (int e : nums) {
            if (e == 5) {
                only5[index] = e;
                index++;
            }
        }
        return only5;
    } 
```

//长解，向上滚动

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-04-16T17:06:58.960

我意识到这个线程已有多年历史，但我只想添加我的解决方案：

```
public int[] fix45(int[] nums){

    int notAFourOrFive = 0;

    int[] ary = new int[nums.length];

    for (int i = 0; i < nums.length; i++) {
        if (nums[i] == 4) {
            ary[i] = 4;
            ary[i+1] = 5;
        }
        else if (nums[i] != 5) {
            notAFourOrFive = nums[i];
        }
    }

    for (int j = 0; j < ary.length; j++) {
        if (ary[j] == 0) {
            ary[j] = notAFourOrFive;
        }
    }

    return ary;
} 
```

看到`4`s 和`5`s 的数量相等，只要`4`找到 a 就可以安全地将它们添加到新数组中。在这种情况下使用它是安全的`i+1`，因为 a`4`永远不会出现在数组的末尾。`4`每当达到非或非时，设置“其他”数字也是安全的`5`，因为在每个测试中所有其他数字都是相同的。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-11-08T04:14:10.727

这是简单的答案:)

```
 public int[] fix45(int[] nums) {
  int p5=0;//tracker for 5's

  for(int i=0;i<nums.length;i++){
    if(nums[i] == 4){// got a 4 
      for(int j = p5 ;j<nums.length;j++){
        //finding a 5 for that 4 at nums[i]
        if(nums[j] == 5 && ( (j > 0 && nums[j-1]!=4 ) || (j==0) )){
          // found 5 and checking if it is not preceded by a 4      
          //swap if not preceded by a 4
          int temp = nums[i+1];
          nums[i+1] = nums[j];
          nums[j] = temp;

          p5 = j;//set the tracker to where we found 5 for nums[i]
          break;//break out of loop
        }
      } 
    }
  }

  return nums;

} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-12-27T17:13:16.453

此解决方案使用 LinkedHashSet。我认为时间的 O 表示法是*O(n)*，空间也是*O(n)*。

```
 public int[] fix45(int[] nums) {
  Set<Integer> ind4 = new LinkedHashSet<>();
  Set<Integer> ind5 = new LinkedHashSet<>();

  //Store positions for all fours and fives except those fives
  //that immediately follow number four.
  for (int i = 0; i < nums.length; ++i) {
    if (nums[i] == 4){
      ind4.add(i);
      if (i + 1 < nums.length && nums[i + 1] == 5){
        i++;
      } 
    }else if (nums[i] == 5){
      ind5.add(i);
    } 
  } 

  Iterator<Integer> iter5ind = ind5.iterator();

  for (Integer i : ind4){
    if (i + 1 > nums.length || !iter5ind.hasNext()) break;
    if (nums[i + 1] == 5){
      continue;
    }
    int j = iter5ind.next();

    int tmp = nums[i + 1];
    nums[i + 1] = nums[j];
    nums[j] = tmp;
  }
  return nums;
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-09-19T00:39:42.797

我只想添加我的解决方案，到目前为止，我在 CodingBat 上进行了测试并通过了所有测试，并且没有使用 2 个 for 循环

```
 public int[] fix45(int[] nums) {
        if (nums.length == 0 || nums.length == 1 || nums.length == 2) {
            return nums;
        }

        int indexof4 = 0, indexof5 = 0;
        int indexToWorkonForRplcmnt = -1;
        while (indexof4 < nums.length && indexof5 < nums.length) {
            if ((indexof4 + 1) < nums.length && nums[indexof4] == 4 && nums[indexof4 + 1] != 5) {
                indexToWorkonForRplcmnt = indexof4 + 1;
//                System.out.println("IndexOf4:"+indexToWorkonForRplcmnt);

            } else {
                indexof4++;
            }

            if ((indexof5) < nums.length && nums[indexof5] == 5) {

                if (indexof5 == 0 && nums[indexof5] == 5) {
//                    System.out.println("IndexOf5:"+indexof5);
                } else if (nums[indexof5 - 1] != 4 && nums[indexof5] == 5) {
//                    System.out.println("IndexOf5:"+indexof5);
                } else {
                    indexof5++;
                }

            } else {
                indexof5++;
            }

            if (indexToWorkonForRplcmnt != -1 && (indexof5) < nums.length && nums[indexof5] == 5) {
                System.out.println("IndexOf4:" + indexToWorkonForRplcmnt);
                System.out.println("IndexOf5:" + indexof5);
                int temp = nums[indexToWorkonForRplcmnt];
                nums[indexToWorkonForRplcmnt] = nums[indexof5];
                nums[indexof5] = temp;
                indexToWorkonForRplcmnt = -1;
                indexof4++;
                indexof5++;
            }

        }
        return nums;
    } 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-05-27T19:28:29.243

```
public int[] fix45(int[] nums) {
    int[] array = new int[nums.length];
    int temp = 0;

    for (int i = 0; i < array.length; i++) {
          if (nums[i]==4) {
              array[i] = 4;
              array[i+1]= 5;
          }
    }

    for (int i = 0; i < array.length; i++) {
        if (nums[i]!=4 && nums[i]!=5) {
            temp = nums[i];
            }
        for (int j = 0; j < array.length; j++) {
            if (array[j]==0) {
                array[j]=temp;
            }
        }

    }

    return array;
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-05-19T22:50:28.087

这里有很多复杂的代码。我认为我们这样简化：

```
public int[] fix45(int[] nums) {        
        for (int i = 0; i < nums.length; i++) {
            if (nums[i] == 4) {
                for (int j = 0; j < nums.length; j++) {
                    if (nums[j] == 5) {
                        if (j > 0 && nums[j - 1] != 4) {
                            int tmp = nums[i + 1];
                            nums[i + 1] = 5;
                            nums[j] = tmp;
                        } else if (j == 0) {
                            int tmp = nums[i + 1];
                            nums[i + 1] = 5;
                            nums[j] = tmp;
                        }
                    }
                }
            }
        }
        return nums;
    } 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-03-30T13:45:10.493

它也可以在一个while循环中完成！

```
 public int[] fix45(int[] nums) {

      int start = 0;
      int end = nums.length-1;

      boolean is4 = false;
      boolean is5 = false;

      while( start < nums.length ){

        if(nums[start] == 4 && nums[start+1]!=5){
          is4 = true;
        }

        if(nums[end] == 5 && (end == 0 || (end-1>=0 && nums[end-1]!=4))){
          is5 = true;
        }

        if(is4 && is5){
          int temp = nums[start+1];
          nums[start+1] = nums[end];
          nums[end] = temp;

          is4 = false;
          is5 = false;
          end = nums.length-1;
        }

        if(is4){
          end--;
          continue;
        }

        start++;
      }
      return nums;

    } 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-08-23T14:15:44.563

```
 public int[] fix45(int[] nums) {

    for (int i = 0; i < nums.length; i++) {

        if (nums[i] == 5 && i == 0 || nums[i] == 5 && nums[i - 1] != 4) {

            int a5 = i;

            for (int j = 0; j < nums.length; j++) {

                if (nums[j] == 4 && nums[j + 1] != 5) {

                    int temp = nums[j + 1];

                    nums[j + 1] = 5;
                    nums[a5] = temp;

                    break;
                }

            }

        }
    }

    return nums;

} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-03-11T02:30:18.950

```
public int[] fix45(int[] nums) 
{
    for(int i=0; i<nums.length; i++)
    {
        if(nums[i]==5)
        {
            for(int j=0; j<nums.length; j++)
            if(nums[j]==4&&nums[j+1]!=5)
            {
                f(nums, i, j+1);
            }
        }
    }
    return nums;
}
///this "helper" function swaps 2 elements of the array
public void f(int []nums , int m, int n)
{
    int t= nums[m];
    nums[m] =nums[n];
    nums[n] = t;
} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-12-31T04:27:54.123

这是我发现的一个简单的解决方案。只需创建跟踪 4 和 5 的 ArrayList，然后交换值。这怎么容易理解？

```
public int[] fix45(int[] nums) 
{
        //Create a copy array to manipulate and eventually return.
        int[] ret = nums;
        //Create two ArrayLists that let us track for and five positions.
        ArrayList<Integer> fourPositions = new ArrayList<Integer>();
        ArrayList<Integer> fivePositions = new ArrayList<Integer>();
        //Get the positions of fours and fives and add them to their respective ArrayLists.
        for (int i = 0; i < ret.length; i++)
        {
          if (ret[i] == 4)
          {
            fourPositions.add(i);
          }
          if (ret[i] == 5)
          {
            fivePositions.add(i);
          }
        }
        //Swap all of the places right after the fours with a respective number of the fives,
        for (int i = 0; i < fourPositions.size(); i++)
        {
          int temp = ret[fourPositions.get(i) + 1];
          ret[fourPositions.get(i) + 1] = ret[fivePositions.get(i)];
          ret[fivePositions.get(i)] = temp;
        }
        //Return the array.
        return ret;
 } 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-01-29T07:56:52.757

```
import java.util.Arrays;

public class Fix45 {
    public static void main(String[] args) {
        assertArrays(new int[]{9, 4, 5, 4, 5, 9}, new int[]{5, 4, 9, 4, 9, 5});
        assertArrays(new int[]{1, 4, 5, 4, 5}, new int[]{5, 4, 5, 4, 1});
        assertArrays(new int[]{1, 1, 4, 5, 4, 5}, new int[]{5, 5, 4, 1, 4, 1});
        assertArrays(new int[]{4, 5, 4, 5, 1}, new int[]{4, 5, 4, 1, 5});
        assertArrays(new int[]{4, 5, 4, 5, 2}, new int[]{4, 2, 4, 5, 5});
    }

    public static int[] fix45(int[] nums) {
        for (int i = 0; i < nums.length; i++) {
            if(nums[i] == 4 && nums[i + 1] != 5){

                int location = i + 1;
                for (int j = 0; j < nums.length; j++) {

                    if(nums[j] == 4 && nums[j + 1] == 5){
                        j++;
                        continue;
                    }
                    if (nums[j] == 5) {
                        int temp = nums[j];
                        nums[j] = nums[location];
                        nums[location] = temp;
                    }
                }
            }
        }
        return nums;
    }

    private static void assertArrays(int[] expected, int[] input) {
        int[] actual = fix45(input);
        System.out.println(Arrays.toString(actual));
        boolean status = Arrays.equals(expected, actual);
        System.out.println(status);
    }
} 
```

# ruby-on-rails - 未找到 cap 命令

> ID：13337516
> 
> 赞同：18
> 
> 时间：2012-11-12T02:04:03.923
> 
> 标签：ruby-on-rails, ruby, gem, capistrano

我正在使用 Mac OS X 10.8.2，并使用 rbenv 安装了 ruby​​ & rails。

我尝试安装 capistrano

```
gem install capistrano 
```

> 成功安装 capistrano-2.13.5
> 
> 已安装 1 个宝石
> 
> 为 capistrano-2.13.5 安装 ri 文档...
> 
> 为 capistrano-2.13.5 安装 RDoc 文档...

每次我尝试使用代码安装时，它都会显示“已安装 1 个 gem”。

* * *

但是，如果我写

```
capify . 
```

我收到这样的错误。

> zsh：找不到命令：capify

* * *

我的 $PATH

> /Users/lutfidemirci/.rbenv/bin:/Users/lutfidemirci/.rbenv/shims:/Users/lutfidemirci/.rbenv/shims:/Applications/Postgres.app/Contents/MacOS/bin:/Users/lutfidemirci/.rbenv /bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/var/lib/gems/1.8/bin

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-11-12T02:06:12.600

用于`rbenv rehash`使 rbenv 为 capistrano 生成二进制 shim。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-10-14T11:44:22.257

如果有人使用 Capistrano 3.0.0 或更高版本，则应使用：

```
cap install 
```

而不是弃用：

```
capify . 
```

# sql - 在 SQL 中自动删除已删除类别的产品

> ID：13337521
> 
> 赞同：1
> 
> 时间：2012-11-12T02:04:30.287
> 
> 标签：sql, sql-server, tsql

我有 2 张桌子：

表**产品**

```
ProductID     ProductName      CategoryName    Price
102           keyboard         PC parts        800
103           mouse            PC parts        900 
```

表**类别**

```
CategoryID   CategoryName
981          PC parts 
```

如果我删除一个类别，我想如何使用触发器自动删除其下的产品...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T02:13:40.453

实际上，您可能不会`Trigger`在这里使用，这是创建设置了标志的*FOREIGN KEY*约束的唯一方法`DELETE CASCADE`

```
CREATE TABLE Category
(
    CategoryID   INT,
    Categoryname VARCHAR(50),
    CONSTRAINT tb_pk PRIMARY KEY (CategoryID),
    CONSTRAINT tb_uq UNIQUE (Categoryname)
)
GO

CREATE TABLE Product
(
    ProductID    INT,
    ProductName  VARCHAR(50)  ,  
    CategoryID   INT ,
    Price        DECIMAL(10,2),
    CONSTRAINT p_pk PRIMARY KEY (ProductID),
    CONSTRAINT p_uq UNIQUE (ProductName),
    CONSTRAINT p_fk FOREIGN KEY (CategoryID)
         REFERENCES Category(CategoryID) ON DELETE CASCADE
)
GO 
```

当您尝试删除表`Category`上的某些内容时`Category`，它会自动删除其子行，因为表`Product`依赖于表`Category`

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!3/ee83dd/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T09:52:06.677

您可以使用 on delete cascade 从两个表中删除数据。

# javascript - 在Javascript中没有用new调用构造函数时如何处理它？

> ID：13337525
> 
> 赞同：2
> 
> 时间：2012-11-12T02:06:03.617
> 
> 标签：javascript

我在构造函数中看到了这样的模式：

```
function Animal(name) {
    if ( !(this instanceof Animal) ) {
        return new Animal(name);
    }
    this.name = name;
} 
```

或者更一般的形式：

```
function Animal(name) {
    if ( !(this instanceof arguments.callee) ) {
        return new arguments.callee(name);
    }
    this.name = name;
} 
```

这样如果错误地`Animal()`在没有`new`关键字的情况下调用它，那么它仍然可以通过`new Animal(name)`在代码内部调用来工作。但我想知道为什么要容忍糟糕的调用代码？以下不是更可取的吗？

```
function Animal(name) {
    if ( !(this instanceof Animal) ) {
        // throw an exception, alert, or console.log or console.error
    }
    this.name = name;
} 
```

使程序员可以立即更正调用代码。

但我想知道每种方法，如果

1.  如果异常被捕获但只是在调用堆栈的某个级别被忽略了怎么办？
2.  如果是alert，如果在循环运行一千次，浏览器没有办法让用户选择不再显示alert，那么alert会弹出一千次。
3.  console.log 或 console.error... 如果程序员没有打开控制台怎么办？然后错误可能会溜走并被推送到生产服务器。

一种方法可能是使用 JSLint？但是，如果代码已经有几千行并且在 JSLint 中显示了许多警告，而我们目前无法修复所有警告，那么目前有什么好的方法可以很好地实现构造函数呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T02:18:27.213

`new`当关键字到处都是时，我讨厌它。按照标准约定，我所有的类名都以大写字符开头，以区别于常规函数。

jQuery 广泛地使用它们的所有构造函数（例如[`Event`](https://github.com/jquery/jquery/blob/master/src/event.js#L595)）。
我认为它使代码更加优雅。

* * *

**PS**不要使用`arguments.callee`. 它已被弃用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T03:10:36.690

真正的问题似乎是如何处理不`new`应该调用的构造函数。有明显的答案：

1.  为 ECMAScript ed 3 编写，但使用严格模式进行开发，以便立即捕获大多数（但不一定是全部）此类错误。大多数为 Web 编写的代码现在应该在严格模式和非严格模式下运行。

2.  使用彻底的单元测试

3.  使用棉绒

在我看来，如果代码通过了测试，其中构造函数返回的对象实际上是全局对象而不是实例，那么测试要么是垃圾，要么一开始就不应该使用构造函数。

在绝大多数情况下，无论如何都不需要在 javascript 中使用构造函数。

# python - 使用 Python 将 HTML 渲染为纯文本

> ID：13337528
> 
> 赞同：55
> 
> 时间：2012-11-12T02:06:34.283
> 
> 标签：python, beautifulsoup

我正在尝试使用 BeautifulSoup 转换一大段 HTML 文本。这是一个例子：

```
<div>
    <p>
        Some text
        <span>more text</span>
        even more text
    </p>
    <ul>
        <li>list item</li>
        <li>yet another list item</li>
    </ul>
</div>
<p>Some other text</p>
<ul>
    <li>list item</li>
    <li>yet another list item</li>
</ul> 
```

我尝试做类似的事情：

```
def parse_text(contents_string)
    Newlines = re.compile(r'[\r\n]\s+')
    bs = BeautifulSoup.BeautifulSoup(contents_string, convertEntities=BeautifulSoup.BeautifulSoup.HTML_ENTITIES)
    txt = bs.getText('\n')
    return Newlines.sub('\n', txt) 
```

...但是这样我的 span 元素总是在一个新的行上。这当然是一个简单的例子。有没有办法在 Python 中获取 HTML 页面中的文本，就像它在浏览器中呈现的方式一样（不需要 css 规则，只是呈现 div、span、li 等元素的常规方式）？

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2012-11-12T03:09:46.810

BeautifulSoup 是一个抓取库，因此它可能不是进行 HTML 渲染的最佳选择。如果不是必须使用 BeautifulSoup，你应该看看[`html2text`](https://github.com/Alir3z4/html2text). 例如：

```
import html2text
html = open("foobar.html").read()
print html2text.html2text(html) 
```

这输出：

```
一些文字更多文字甚至更多文字

  * 项目清单
  * 另一个列表项

其他一些文字

  * 项目清单
  * 另一个列表项

```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-05T17:53:46.903

我在尝试解析呈现的 HTML 时遇到了同样的问题。基本上，BS 似乎不是这个理想的包。@Del 提供了很棒的 html2text 解决方案。

在一个不同的 SO 问题上：[BeautifulSoup get_text 不会剥离所有标签和 JavaScript](https://stackoverflow.com/questions/10524387/beautifulsoup-get-text-does-not-strip-all-tags-and-javascript) @Helge 使用 nltk 提到的。不幸的是，nltk 似乎停止了这种方法。

我尝试了 html2text 和 nltk.clean_html 并且对计时结果感到惊讶，因此认为他们需要为后代提供答案。当然，速度很大程度上取决于数据的内容......

来自@Helge（nltk）的回答。

```
import nltk

%timeit nltk.clean_html(html)
was returning 153 us per loop 
```

返回带有呈现的 html 的字符串非常有效。这个 nltk 模块甚至比 html2text 更快，尽管 html2text 可能更健壮。

以上来自@del的回答

```
betterHTML = html.decode(errors='ignore')
%timeit html2text.html2text(betterHTML)
%3.09 ms per loop 
```

# java - 在 if 语句之外使用变量

> ID：13337529
> 
> 赞同：8
> 
> 时间：2012-11-12T02:06:45.637
> 
> 标签：java, if-statement, scope

我不完全确定这在 Java 中是否可行，但是我将如何在声明它的 if 语句之外使用在 if 语句中声明的字符串？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-12T02:14:49.510

你不能因为[变量范围](http://www.java2s.com/Tutorial/Java/0020__Language/VariableScope.htm)。

如果您在`if`语句中定义变量，那么它只会在`if`语句范围内可见，其中包括语句本身和子语句。

```
if(...){
   String a = "ok";
   // a is visible inside this scope, for instance
   if(a.contains("xyz")){
      a = "foo";
   }
} 
```

您应该在范围外定义变量，然后在`if`语句内更新其值。

```
String a = "ok";
if(...){
    a = "foo";
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-12T02:16:48.623

您需要区分变量*声明*和*赋值*。

```
String foo;                     // declaration of the variable "foo"
foo = "something";              // variable assignment

String bar = "something else";  // declaration + assignment on the same line 
```

如果您尝试使用没有赋值的声明变量，例如：

```
String foo;

if ("something".equals(foo)) {...} 
```

你会得到一个编译错误，因为变量没有被分配任何东西，因为它只是被声明的。

在您的情况下，您在条件块中声明变量

```
if (someCondition) {
   String foo;
   foo = "foo";
}

if (foo.equals("something")) { ... } 
```

因此它仅在该块内“可见”。您需要将该声明移到*外面*并以某种方式为其赋值，否则您将收到条件赋值编译错误。一个例子是使用一个`else`块：

```
String foo;

if (someCondition) { 
   foo = "foo";
} else {
   foo = null;
} 
```

或在声明时分配一个默认值（null？）

```
String foo = null;

if (someCondition) {
   foo = "foo";
} 
```

# html - CSS 和定义列表 - 选择特定的定义描述

> ID：13337530
> 
> 赞同：-1
> 
> 时间：2012-11-12T02:06:50.073
> 
> 标签：html, css, css-selectors

是否可以仅通过 CSS 从此 HTML 块中选择以下内容？或者选择除我想要选择的内容之外的所有内容？

```
<dl>
<dt>dt one</dt>
<dd>dd one A</dt>
<dt>dt two</dt>
<dd>choose this dd and only this dd</dd>
<dd>dd two B</dd>
<dt>dt three</dt>
<dd>dd three A</dd>
</dl> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T04:22:13.160

听起来要么`dd:nth-child(4)`或者会给你那个元素，除非你的问题*中*`dd:nth-of-type(2)`根本没有提到一些条件（它在当前形式下看似简单）。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T02:11:42.783

是的。W3Schools 有一个很好的资源：[http ://www.w3schools.com/cssref/css_selectors.asp](http://www.w3schools.com/cssref/css_selectors.asp)

您可能会发现特别感兴趣的第 n 个子选择器。*

# python - 如何从有字母的行和列中获取单词？

> ID：13337532
> 
> 赞同：0
> 
> 时间：2012-11-12T02:07:07.650
> 
> 标签：python, python-3.x

做任务并解决这个问题

```
def board_contains_word(board, word):
    '''(list of list of str, str) -> bool

    Return True if and only if word appears in board.

    Precondition: board has at least one row and one column.

    >>> board_contains_word([['A', 'N', 'T', 'T'], ['X', 'S', 'O', 'B']], 'ANT')
    True
    '''
 return word in board 
```

但我得到 `FALSE`

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T05:47:19.703

这里有一些东西可以让你摆脱困境：

```
def board_contains_word(board, word):
    # check accross
    for row in board:
        return word in ''.join(row):

    # try with board's rows and columns transposed
    for row in zip(*board):
        return word in ''.join(row):

    return False

print board_contains_word([['A', 'N', 'T', 'T'], ['X', 'S', 'O', 'B']], 'ANT')
print board_contains_word([['A', 'N', 'T', 'T'], ['X', 'S', 'O', 'B']], 'TO') 
```

提示：您可以通过使用该`any()`函数来简化事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T05:27:37.110

python`in`运算符的工作方式与您使用它的方式略有不同。这里有些例子：

```
>>> 'laughter' in 'slaughter'
True
>>> 1 in [1,6,5]
True
>>> 'eta' in ['e','t','a']
False
>>> 'asd' in ['asdf','jkl;']
False
>>> 
```

如您所见，它有两个主要用途：测试是否可以在另一个字符串中找到一个字符串，以及测试是否可以在数组中找到一个元素。另请注意，这两种用途不能结合使用。

现在，关于解决您的问题。您将需要某种循环`for`一一遍历所有行。一旦你选择了一行，你需要某种方法将`join`所有数组元素放在一起。之后，您可以确定这个词是否`in`是板。

注意：这只解决了横向搜索的问题。不知道这是否是整个任务。`zip`您可以使用该功能将此方法调整为垂直搜索。

# ruby-on-rails - Rails 控制器中的索引操作问题

> ID：13337543
> 
> 赞同：0
> 
> 时间：2012-11-12T02:09:14.387
> 
> 标签：ruby-on-rails, ruby, controller

可能是一个愚蠢的问题，所以我提前为此道歉：

我有一个`Item Controller`我用来显示所有的索引操作`items`（duh）。现在，我想过滤显示的项目（这里，只是标题中有“鞋子”的项目）。

不幸的是，我无法在 index 操作下定义 @item = Item.find(params[:id]) 语句。

我在 ItemsController#index 中得到可怕的 ActiveRecord::RecordNotFound ----找不到没有 ID 错误的项目。

有任何想法吗？

物品控制器

```
def index
     @item = Item.find(params[:id])
     @items = Item.where(@item.title =~ /shoes/i).paginate(:page => params[:page], :per_page => 30)

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @items }
    end
  end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T02:25:50.210

这实际上是你想要的。你尝试的没有意义。

```
 def index
     @items = Item.where("title ILIKE '%shoes%'").paginate(:page => params[:page], :per_page => 30)

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @items }
    end
  end 
```

编辑：

为了与所有受支持的数据库兼容，您似乎可以这样做

```
item=Item.arel_table
Item.where(item[:title].matches('%shoes%')) 
```

# jquery - jQuery 或 jquery 移动对话框错误

> ID：13337544
> 
> 赞同：1
> 
> 时间：2012-11-12T02:09:34.093
> 
> 标签：jquery, jquery-mobile

我正面临一个非常奇怪的对话问题......

我正在使用cordova-2.1.0、jquery mobile 1.2.0 和jquery 1.8.2 编写一个android 应用程序。

在应用程序中，我有一个登录对话框，如下所示

![登录框](../Images/df2e42dc5913973afa4e4993b773fd80.png)

每当我点击“登录 ID”框时，它就会变成密码字段（代码中的 <input type="text"... ），如下所示，它的未对齐也...

![错误的输入](../Images/f20b576aff40341696fba10320a13244.png)

一旦我完成编辑并按下我的手机（三星 Galaxy Geo）后退按钮，事情就会恢复正常......

![恢复正常](../Images/5f877cba1bc5f3e9f0be110b7185a918.png)

很奇怪啊... :O

编辑：添加标记

```
<!-- login window -->
<div data-role="dialog" data-theme="c" id="login" class="force-UI">
    <div data-role="header" data-theme="c">
        <h1>Login</h1>
    </div>
    <div data-role="content">
        <form method="post">
            <div data-role="fieldcontain">
                Login using existing Login ID and Password 
            </div>
            <div data-role="fieldcontain">
                <input type="text" name="username" id="username"
                    placeholder="Login ID">
            </div>
            <div data-role="fieldcontain">
                <input type="password" name="password" id="password"
                    placeholder="Password">
            </div>
            <div data-role="fieldcontain">
                <a href="#" data-role="button" id="loginsubmit2"
                    data-icon="forward" data-iconpos="right">Login</a> <input
                    type="hidden" id="btnClicked" value="" />
            </div>
        </form>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T01:34:18.250

解决方案：

我变了

```
<div data-role="fieldcontain"> 
```

至

```
<p> 
```

问题解决了 ：）

# google-apps-script - 将一行从一张纸复制到另一张纸

> ID：13337547
> 
> 赞同：1
> 
> 时间：2012-11-12T02:11:16.387
> 
> 标签：google-apps-script, google-sheets

我知道以前有人问过这个问题，因为我在过去的 5 个小时里都从这里尝试了所有这些，甚至是关闭的谷歌产品论坛。我无法停止任何循环。条件得到满足，但循环继续运行。我一直在从其他在线示例中复制并插入我自己的变量，但最后，我将有 5 行多次转到新工作表，直到工作表变得疲倦或其他什么。

我试过getDataRange...我试过getRange...我试过var in loops和其他循环，我都试过了，所以请看看，让我知道这段代码是如何不断产生行的多次添加到新工作表中：

```
function runReportAllMemCos1() {
  var sheet1 = sskey.getSheetByName('Businesses');
  var sheet2 = sskey.getSheetByName('tempsheet');

  var data = sheet1.getRange(1,1, sheet1.getLastRow(), sheet1.getLastColumn()).getValues();

  var dest = [];
  for (var i = 0; i < data.length; i++ ) {
    if (data[i][12] == "Associate") { 
      dest.push(data[i]); 
    } Logger.log(data)
    if (dest.length > 0 ) {
    sheet2.getRange(sheet2.getLastRow()+1,1,dest.length,dest[0].length).setValues(dest);
    }
  }
} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T07:01:12.003

我不太同意 user1795832 的回答，因为它不使用批量写入，而是在每次条件为真时将数据写入工作表 2……那么为什么要使用数组来做到这一点？

在循环完成后尝试简单地批量写入工作表 2，它应该可以按预期工作。

```
function runReportAllMemCos1() {
  var sheet1 = sskey.getSheetByName('Businesses');
  var sheet2 = sskey.getSheetByName('tempsheet');

  var data = sheet1.getRange(1,1, sheet1.getLastRow(), sheet1.getLastColumn()).getValues();

  var dest = [];
  for (var i = 0; i < data.length; i++ ) {
    Logger.log(data[i][12]);// just to check if the condition is true sometimes ;-)
    if (data[i][12] == "Associate") { 
      dest.push(data[i]); 
    }
  } // here is the end of the for loop

  Logger.log(dest) ; // log the dest array instead

  if (dest.length > 0 ) { // if something has been written in your array then batch write it to the dest. sheet
    sheet2.getRange(sheet2.getLastRow()+1,1,dest.length,dest[0].length).setValues(dest);
  }
} 
```

* * *

**编辑：**在您的评论之后选择您复制的列的其他可能性

```
function runReportAllMemCos1() {
  var sheet1 = sskey.getSheetByName('Businesses');
  var sheet2 = sskey.getSheetByName('tempsheet');

  var data = sheet1.getRange(1,1, sheet1.getLastRow(), sheet1.getLastColumn()).getValues();

  var dest = [];
  for (var i = 0; i < data.length; i++ ) {
    Logger.log(data[i][12]);// just to check if the condition is true sometimes ;-)
    if (data[i][12] == "Associate") { 
      var destRow = []; // initialise intermediate array
      destRow.push(data[i][1],data[i][2],data[i][12]);// choose here the columns you want to add (here col2, 3 & 13)
      dest.push(destRow); 
    }
  } // here is the end of the for loop
  Logger.log(dest) ; // log the dest array instead
  if (dest.length > 0 ) { // if something has been written in your array then batch write it to the dest. sheet
    sheet2.getRange(sheet2.getLastRow()+1,1,dest.length,dest[0].length).setValues(dest);
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T02:24:53.067

是的，问题是你的 dest 变量。您不会在每次循环后重置它，因此每一行只会在那里不断复合并每次都重复（因此当循环第三行时，第 1 行和第 2 行仍然在 dest 变量中）。把“dest = [];” 就在你的 for 循环中，它会起作用。

```
function runReportAllMemCos1() {
  var sheet1 = sskey.getSheetByName('Businesses');
  var sheet2 = sskey.getSheetByName('tempsheet');

  var data = sheet1.getRange(1,1, sheet1.getLastRow(), sheet1.getLastColumn()).getValues();

  var dest = [];
  for (var i = 0; i < data.length; i++ ) {
    dest = [];
    if (data[i][12] == "Associate") { 
      dest.push(data[i]); 
    } Logger.log(data)
    if (dest.length > 0 ) {
      sheet2.getRange(sheet2.getLastRow()+1,1,dest.length,dest[0].length).setValues(dest);
    }
  }
} 
```

# regex - BASH shell 使用正则表达式从文件中获取值到参数中

> ID：13337550
> 
> 赞同：2
> 
> 时间：2012-11-12T02:11:52.697
> 
> 标签：regex, bash, shell

我有一个文件，我需要使用正则表达式获取一段文本。我们将调用文件`x.txt`. 我想做的是打开`x.txt`，从文件中提取正则表达式匹配并将其设置为参数。谁能给我一些指示？

### 编辑

所以在`x.txt`我有以下行

```
$variable = '1.2.3'; 
```

我需要将`1.2.3`文件中的内容提取到我的 bash 脚本中，然后用于 zip 文件

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T02:38:44.503

用于一次通过[`sed`](http://linux.die.net/man/1/sed)有效地完成^(†</sup>：)

```
var=$(sed -ne "s/\\\$variable *= *['\"]\([^'\"]*\)['\"] *;.*/\1/p" file) 
```

无论您的值是用单引号*还是*双引号括起来，上述方法都有效。

另请参阅[GNU Grep 可以输出选定的组吗？](https://superuser.com/questions/11130/can-gnu-grep-output-a-selected-group).

```
$ cat dummy.txt
$bla = '1234';
$variable = '1.2.3';
blabla
$variable="hello!"; #comment

$ sed -ne "s/\\\$variable *= *['\"]\([^'\"]*\)['\"] *;.*/\1/p" dummy.txt
1.2.3
hello!

$ var=$(sed -ne "s/^\\\$variable *= *'\([^']*\)' *;.*/\1/p" dummy.txt)

$ echo $var
1.2.3 hello! 
```

^(† 或至少与在您选择的平台上`sed`相比可以有效地处理数据。`grep`:))

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T03:03:35.313

您可以使用 grep-chop-chop 技术

```
var="$(grep -F -m 1 '$variable =' file)"; var="${var#*\'}"; var="${var%\'*}" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T03:10:19.207

如果所有文件行都具有该格式 ( `$<something> = '<value>'`)，您可以`cut`像这样使用：

```
value=$(cut -d"'" -f2 file) 
```

# java - 在 Java 中创建其他对象的对象是否是糟糕的程序设计？

> ID：13337551
> 
> 赞同：2
> 
> 时间：2012-11-12T02:12:02.543
> 
> 标签：java

我有一个对象 (Object1) 的实例，其构造函数创建其他对象 (Object2) 的实例并将它们存储在 ArrayList 中。Object2 有一个静态 instancecount 变量（在其他静态变量中），并且 Object2 的实例依赖于这个 instancecount。在一个测试程序中，我运行了一个 for 循环，其中在每次迭代时都会创建一个 Object1 的实例，然后对 Object1 的实例的引用重新分配一个空值。我的测试程序看起来像：

```
 for (...) {
        Object1 obj = new Object1(...); //which creates several Object2's
        obj.myMethod();
        obj = null;
    } 
```

问题是 Object2 的实例在每次循环迭代结束时没有得到垃圾收集，因此 Object2 的静态 instancecount 变量只会随着每次迭代而增长（随着内存使用量）。这是可以预料的吗？有没有办法强制清理 Object2 实例，以便每个循环都有一个新的开始？这是一个糟糕的程序设计吗？

谢谢！瑞安

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T02:14:50.797

垃圾收集工作非常可靠，因此它不会泄漏内存或无限增长。

但是 GC 也仅在 JVM 认为需要时运行，因此您不能强制它在循环的每次迭代结束时运行。

拥有依赖于 GC 运行时间的代码是糟糕的代码。

另外，我不确定您如何管理实例计数。在构造函数中增加它很容易，但是什么时候再减少它呢？它肯定不会自动发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T03:11:51.653

> 问题是 Object2 的实例在每次循环迭代结束时都没有得到垃圾收集，...。这是可以预料的吗？

是的。JVM 的默认行为是在最有效的时候运行垃圾收集器。这通常意味着当“新”空间填满时。GC 肯定不是“急切”的，它不会在对象变得不可访问时尝试回收对象。

> 有没有办法强制清理 Object2 实例，以便每个循环都有一个新的开始？

您可以调用`System.gc()`作为提示立即运行垃圾收集器。但是可以将 JVM 配置为忽略该提示。

> 这是一个糟糕的程序设计吗？

调用它通常是糟糕的设计`System.gc()`。运行 GC 相对昂贵，并且在不必要的时候（从人体工程学的角度）频繁运行它是非常浪费的。

编写依赖于立即运行的 GC 的代码总是不好的设计。事实上，任何需要使用习俗的东西都`finalize()`应该受到极大的怀疑。

* * *

我认为你真正的问题是：

> .... 所以 Object2 的静态 instancecount 变量只会随着每次迭代而增长（随着内存使用）

这在一定程度上是正确的。但最终，JVM 会决定现在是运行 GC 的好时机，并且所有对象都将被回收。这就是 GC 的工作方式。

您真正的问题是（我认为）您对需要大量内存来保存所有尚未回收的垃圾对象这一事实感到不舒服。但另一方面，如果 GC ……和您的应用程序……有足够的内存可供使用，它会运行得更快。令人惊讶的是，分配和回收都比 GC 使用（例如）引用计数来确保尽快回收对象要快得多。

* * *

要注意的另一件事是，您必须使用终结器来递减实例计数器。这有一个不幸的副作用，即显着增加 GC 开销，并减慢对象的最终回收速度。

（发生的情况是，主 GC 注意到该对象是可终结的，并将其添加到队列中以供稍后终结。可终结的对象和任何可到达的对象都从可以立即回收的对象列表中删除。稍后点，终结线程遍历队列，调用`finalize`每个方法。如果这导致对象变得完全不可达，它们将在下一次 GC 运行时被回收。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T02:21:00.717

`static instancecount variable (among other static variables)`

查看 Object2 的静态变量。如果它们无论如何都引用了一个 Object2 实例，那么除非手动删除，否则该实例将永远不会被垃圾收集。

`an object (Object1) whose constructor creates instances of other objects (Object2) and stores them in an ArrayList`

这个 ArrayList 存储在哪里以及何时清除？尝试在 for 循环中从此列表中删除 Object2。

如果您可以显示更多代码，则调试起来会更容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T02:45:23.913

感谢大家的回复！我重写了代码以不依赖于 GC。不幸的是，这意味着在每次循环运行时手动清除几个静态变量。这似乎有些尴尬，所以我想将来我应该小心运行工厂对象/方法的代码，其中包含循环中的静态变量。

以下是我从你们那里收到的一些问题的答案。再次，非常感谢！

Thilo：我通过构造函数增加实例计数，但不减少实例计数。这似乎适合解构器，尽管这些不存在，对吧。什么是减少它的适当方法？

Adrian：我尝试清除循环中的 ArrayList，但没有成功。ArrayList 是 Object1 的一个字段。

Stephen：您似乎刚刚回答了我上面关于如何减少实例计数的问题，但正如您所暗示的，这会增加不必要的开销。

Chamini2：我尝试在发布之前在 for 循环中调用 System.gc()，但它不想运行。显然这种方法只是一个建议。

# python - Python 3 中的路径分隔符

> ID：13337552
> 
> 赞同：5
> 
> 时间：2012-11-12T02:12:03.093
> 
> 标签：python, python-3.x

我有两个字符串：

```
C:\Data 
```

和另一个文件夹

```
Foo1 
```

我需要，windows输出是

```
C:\Data\Foo1 
```

和Linux输出是

```
/data/foo1 
```

假设 /data 在 linux 中。是否有任何可以在 Python 中使用的常量分隔符，无论底层操作系统如何都可以轻松使用？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-12T02:12:55.907

是的，python 提供了[`os.sep`](http://docs.python.org/3.3/library/os.html#os.sep)，这就是那个字符，但是出于您的目的，该函数[`os.path.join()`](http://docs.python.org/3.3/library/os.path.html#os.path.join)就是您要寻找的。

```
>>> os.path.join("data", "foo1")
"data/foo1" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T02:20:18.067

[os.path.normpath()](http://docs.python.org/2/library/os.path.html#os.path.normpath)将为 Linux 和 Windows 正确规范化路径。仅供参考，Windows 操作系统调用可以使用任一斜线，但应标准化显示给用户。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T09:17:32.037

`os.path.join()`总是更好。正如 Mark Tolonen 所写（我对他的 +1），您也可以在 Windows 上使用普通斜杠，如果您必须明确编写路径，您应该更喜欢这种方式。您应该完全避免在 Python 中使用反斜杠作为路径。或者你必须将它们加倍在字符串中，或​​者你必须使用`r'raw strings'`来抑制反斜杠解释。否则，`'c:\for\a_path\like\this'`实际上包含您在撰写本文时可能没有注意到的 、 和转义序列……它们可能会成为将来令人头疼的`\f`根源`\a`。`\t`

# angularjs - 使用 AngularJS 按摩 DOM

> ID：13337556
> 
> 赞同：4
> 
> 时间：2012-11-12T02:12:32.520
> 
> 标签：angularjs

我知道操作 DOM 违反了 Angular 的规则，但在这种情况下，我必须横穿 DOM 来修改兄弟节点。

在 jQuery 中，您可以执行以下操作：

***$(this).parent().addClass('.loading');***

在 Angular 中，你会做这样的事情：

***angular.element(this).parent().addClass('.loading');***

当然这不起作用，因为 API 上没有 parent() 方法或 addClass() 方法支持。

这让我想到了一个问题，我还能如何做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T03:29:21.193

Angular 元素默认使用**jqLit​​e**包装（Angular 自己的 jQuery 实现）。如果您已将 jQuery 添加到项目中，则元素将使用完整的 jQuery 包装。

[这是 jQuery lite http://docs.angularjs.org/api/angular.element](http://docs.angularjs.org/api/angular.element)可用的方法列表

如您所见，您可以访问`parent()`并且`addClass()`因此您获得了很多 DOM 操作能力，而无需添加 jQuery 作为依赖项。

-*-

使用角度操作 DOM 非常好，最好的做法是从指令中进行操作，这是一个可以访问父元素的元素的小示例

HTML

```
<div ng-app='app'>
    <div id="someparent">
        <div my-directive>
        </div>
    </div>
</div> 
```

在你的 JS

```
var app = angular.module('app', []);

app.directive('myDirective', function(){
    return{
        restrict: 'A',
        link: function(scope, element, attributes){
            console.log(element.parent().attr('id'));  // "someparent"
            element.parent().addClass('loading');    // adding loading class to parent
        }
    };
});​​​​​​​​​​​​​ 
```

jsfiddle：http: [//jsfiddle.net/jaimem/Efyv4/1/](http://jsfiddle.net/jaimem/Efyv4/1/)

当然，在构建您的应用程序时，您可能希望指令仅在其自身中操作元素。

-*-

此外，正如 Mark 所提到的，您可以使用 angular 的现有指令，`ngClass`而不是创建自己的指令。目前尚不清楚您想要实现什么，但我建议您查看[ngCloak](http://docs.angularjs.org/api/ng.directive%3angCloak)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T22:28:35.597

在 jQuery 中，我们经常有一些事件触发器，然后从触发事件的元素中，我们遍历 DOM 找到其他一些元素，然后对其进行操作。例如，您的示例：

```
// some event causes this code to execute:
$(this).parent().addClass('.loading'); 
```

在 AngularJS 中，我们首先声明操作点在 HTML 中的位置（例如，@blesh 建议的 ng-class），然后事件修改 $scope 属性，Angular 自动为我们进行 DOM 操作。例如：

```
<div ng-controller="MyCtrl" ng-class="loadingClass">parent
   <a ng-click="loadingClass='loading'">child</a>
</div> 
```

控制器：

```
function MyCtrl($scope) {
    // if you want some other class initially, uncomment next line:
    // $scope.loadingClass = 'notLoading';
}​ 
```

上面，单击“子”链接会修改 $scope.loadingClass。Angular 会注意到更改并将新类应用到父 div。

对于更复杂的操作，需要像 @jm-shows 这样的自定义指令。

jQuery：事件驱动 DOM 遍历和 DOM 操作代码（命令式）。
Angular：事件修改 $scope 并且魔法发生了（在我们的声明性 HTML 上）。

# c# - 在 WPF 中更新我的数据网格时遇到问题

> ID：13337558
> 
> 赞同：1
> 
> 时间：2012-11-12T02:12:56.540
> 
> 标签：c#, sql-server, wpf, data-binding, datagrid

如标题所示，我在更新 WPF 中的数据网格时遇到了问题。基本上我想要完成的是一个数据网格，它连接到一个 SQL Server 数据库，一旦用户将信息输入几个文本框并单击提交按钮，它就会自动更新。您会注意到我有一个连接两个表的命令。Quote_Data 表中的数据稍后将由其他用户插入。现在我唯一关心的是从文本框和 General_Info 表中获取信息，然后从那里到我的数据网格。我将在下面包含的代码编译得很好，但是当我点击提交按钮时，什么也没有发生。这是我使用 SQL 数据库构建的第一个应用程序，所以其中许多概念对我来说都是新的，这就是为什么你

```
 public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    public DataSet mds; // main data set (mds)

    private void Window_Loaded_1(object sender, RoutedEventArgs e)
    {
        try
        {
            string connectionString = Sqtm.Properties.Settings.Default.SqtmDbConnectionString;

            using (SqlConnection connection = new SqlConnection(connectionString))
            {
                connection.Open();

                //Merging tables General_Info and Quote_Data
                SqlCommand cmd = new SqlCommand("SELECT General_Info.Quote_ID, General_Info.Open_Quote, General_Info.Customer_Name,"
                                            + "General_Info.OEM_Name, General_Info.Qty, General_Info.Quote_Num, General_Info.Fab_Drawing_Num, "
                                            + "General_Info.Rfq_Num, General_Info.Rev_Num,  Quote_Data.MOA, Quote_Data.MOQ, "
                                            + "Quote_Data.Markup, Quote_Data.FOB, Quote_Data.Shipping_Method, Quote_Data.Freight, "
                                            + "Quote_Data.Vendor_Price, Unit_Price, Quote_Data.Difference, Quote_Data.Vendor_NRE_ET, "
                                            + "Quote_Data.NRE, Quote_Data.ET, Quote_Data.STI_NET, Quote_Data.Mfg_Time, Quote_Data.Delivery_Time, "
                                            + "Quote_Data.Mfg_Name, Quote_Data.Mfg_Location "
                                            + "FROM General_Info INNER JOIN dbo.Quote_Data ON General_Info.Quote_ID = Quote_Data.Quote_ID",
                                            connection);

                SqlDataAdapter da = new SqlDataAdapter(cmd);

                DataTable dt = new DataTable();

                da.Fill(dt);

                MainGrid.ItemsSource = dt.DefaultView;

                mds = new DataSet();

                da.Fill(mds, "General_Info");

                MainGrid.DataContext = mds.Tables["General_Info"];
            }
        }

        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }

        // renaming column names from the database so they are easier to read in the datagrid

        MainGrid.Columns[0].Header = "#";
        MainGrid.Columns[1].Header = "Date";
        MainGrid.Columns[2].Header = "Customer";
        MainGrid.Columns[3].Header = "OEM";
        MainGrid.Columns[4].Header = "Qty";
        MainGrid.Columns[5].Header = "Quote Number";
        MainGrid.Columns[6].Header = "Fab Drawing Num";
        MainGrid.Columns[7].Header = "RFQ Number";
        MainGrid.Columns[8].Header = "Rev Number";
        MainGrid.Columns[9].Header = "MOA";
        MainGrid.Columns[10].Header = "MOQ";
        MainGrid.Columns[11].Header = "Markup";
        MainGrid.Columns[12].Header = "FOB";
        MainGrid.Columns[13].Header = "Shipping";
        MainGrid.Columns[14].Header = "Freight";
        MainGrid.Columns[15].Header = "Vendor Price";
        MainGrid.Columns[16].Header = "Unit Price";
        MainGrid.Columns[17].Header = "Difference";
        MainGrid.Columns[18].Header = "Vendor NRE/ET";
        MainGrid.Columns[19].Header = "NRE";
        MainGrid.Columns[20].Header = "ET";
        MainGrid.Columns[21].Header = "STINET";
        MainGrid.Columns[22].Header = "Mfg. Time";
        MainGrid.Columns[23].Header = "Delivery Time";
        MainGrid.Columns[24].Header = "Manufacturer";
        MainGrid.Columns[25].Header = "Mfg. Location";

    }

    private void submitQuotebtn_Click(object sender, RoutedEventArgs e)
    {
        CustomerData newQuote = new CustomerData();

        int quantity;
        quantity = Convert.ToInt32(quantityTxt.Text);

        string theDate = System.DateTime.Today.Date.ToString("d");

        newQuote.OpenQuote = theDate;
        newQuote.CustomerName = customerNameTxt.Text;
        newQuote.OEMName = oemNameTxt.Text;
        newQuote.Qty = quantity;
        newQuote.QuoteNumber = quoteNumberTxt.Text;
        newQuote.FdNumber = fabDrawingNumberTxt.Text;
        newQuote.RfqNumber = rfqNumberTxt.Text;
        newQuote.RevNumber = revNumberTxt.Text;

        try
        {
            string insertConString = Sqtm.Properties.Settings.Default.SqtmDbConnectionString;

            using (SqlConnection insertConnection = new SqlConnection(insertConString))
            {
                insertConnection.Open();

                SqlDataAdapter adapter = new SqlDataAdapter(Sqtm.Properties.Settings.Default.SqtmDbConnectionString, insertConnection);

                SqlCommand updateCmd = new SqlCommand("UPDATE General_Info " + "Quote_ID = @Quote_ID, "
                                                    + "Open_Quote = @Open_Quote, " + "OEM_Name = @OEM_Name, " + "Qty = @Qty, "
                                                    + "Quote_Num = @Quote_Num, " + "Fab_Drawing_Num = @Fab_Drawing_Num, "
                                                    + "Rfq_Num = @Rfq_Num, " + "Rev_Num = @Rev_Num "
                                                    + "WHERE Quote_ID = @Quote_ID");

                updateCmd.Connection = insertConnection;

                System.Data.SqlClient.SqlParameterCollection param = updateCmd.Parameters;

                //
                // Add new SqlParameters to the command.
                //
                param.AddWithValue("Open_Quote", newQuote.OpenQuote);
                param.AddWithValue("Customer_Name", newQuote.CustomerName);
                param.AddWithValue("OEM_Name", newQuote.OEMName);
                param.AddWithValue("Qty", newQuote.Qty);
                param.AddWithValue("Quote_Num", newQuote.QuoteNumber);
                param.AddWithValue("Fab_Drawing_Num", newQuote.FdNumber);
                param.AddWithValue("Rfq_Num", newQuote.RfqNumber);
                param.AddWithValue("Rev_Num", newQuote.RevNumber);

                adapter.UpdateCommand = updateCmd;

                adapter.Update(mds.Tables[0]);

                mds.AcceptChanges();
            }
        }

        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }

    } 
```

提前感谢任何可以提供帮助的人，我真的很感激，

*   安德鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T19:21:10.147

您是要更新现有行还是插入新行？

因为如果您需要插入，那么正确的命令是插入（而不是更新）。
要获取您使用的插入行的标识值`Scope_Identity()`。

而且一次只能插入一张表。

`Scope_Identity()`不是参数
不要尝试将其用作参数

请参阅下面的示例

```
INSERT INTO Sales.Customer ([TerritoryID],[PersonID]) VALUES (8,NULL);
GO
SELECT SCOPE_IDENTITY() AS [SCOPE_IDENTITY]; 
```

MSDN.Microsoft.com 上有很多示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:57:42.977

使用 LINQ 我能够解决这个问题。这是代码：

```
 var sqtmDC = new SqtmLinqDataContext();

        var mainTable = from generalInfo in sqtmDC.GetTable<General_Info>()
                      //join quoteData in sqtmDataContext.GetTable<Quote_Data>() on generalInfo.Quote_ID equals quoteData.Quote_ID
                      select generalInfo;

                      myGrid.ItemsSource = mainTable;
    }

     private void submitBtn_Click(object sender, RoutedEventArgs e)
    {
        var sqtmDC = new SqtmLinqDataContext();

       // string theDate = System.DateTime.Today.Date.ToString("d");
        int quantity = Convert.ToInt32(quantityTxt.Text);

        General_Info insert = new General_Info();

        insert.Open_Quote = DateTime.UtcNow;
        insert.Customer_Name = customerNameTxt.Text;
        insert.OEM_Name = oemNameTxt.Text;
        insert.Qty = quantity;
        insert.Quote_Num = quoteNumberTxt.Text;
        insert.Fab_Drawing_Num = fabDrawingNumTxt.Text;
        insert.Rfq_Num = rfqNumberTxt.Text;
        insert.Rev_Num = revNumberTxt.Text;

        sqtmDC.General_Infos.InsertOnSubmit(insert);
        sqtmDC.SubmitChanges();

        int quoteID = insert.Quote_ID;

        var mainTable = from generalInfo in sqtmDC.GetTable<General_Info>()

                        select generalInfo;

        myGrid.ItemsSource = mainTable; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T15:23:57.577

您没有设置 Quote_ID 参数。因此，您的更新可能正在运行`WHERE Quote_ID = null`，因此没有任何更新。

# dns - 如何使用 cPanel 更改主域内容

> ID：13337559
> 
> 赞同：0
> 
> 时间：2012-11-12T02:13:20.193
> 
> 标签：dns, web, hosting, cpanel

在我为我的网站分配主域之前，当然使用 CPanel 的 GUI 自动将我的网站内容放在 /home/my_name/public_html/ 上，但目前我想将其他网站更改或重新分配给我分配的主域，什么练习的最佳方式，是否只是用linux的命令替换/home/my_name/public_html/的内容，或者CPanel有优雅的方式来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T03:33:30.300

如果我理解正确：

转到 cPanel 中的“Parked Domains”，然后输入要指向相同的其他域**/home/my_name/public_html/**。所有域将共享相同的内容。

如果你想替换实际的域，我想你必须让你的 ISP 来做。据我所知，无法在 cPanel 中完成。

希望这可以帮助。

# python - loadmat python内存错误

> ID：13337560
> 
> 赞同：3
> 
> 时间：2012-11-12T02:13:35.027
> 
> 标签：python, scipy, out-of-memory, mat-file

我是 Python 新手，我想向它导入一个大小为 850M 的 matlab 结构。我使用“loadmat”，但出现内存错误：

```
return self._matrix_reader.array_from_header(header, process)
  文件“mio5_utils.pyx”，第 624 行，在 scipy.io.matlab.mio5_utils.VarReader5.array_from_header (scipy\io\matlab\mio5_utils.c:5401)
  文件“mio5_utils.pyx”，第 653 行，在 scipy.io.matlab.mio5_utils.VarReader5.array_from_header (scipy\io\matlab\mio5_utils.c:4849)
  文件“mio5_utils.pyx”，第 706 行，在 scipy.io.matlab.mio5_utils.VarReader5.read_real_complex (scipy\io\matlab\mio5_utils.c:5578)
  文件“mio5_utils.pyx”，第 424 行，在 scipy.io.matlab.mio5_utils.VarReader5.read_numeric (scipy\io\matlab\mio5_utils.c:3439)
  文件“mio5_utils.pyx”，第 360 行，在 scipy.io.matlab.mio5_utils.VarReader5.read_element (scipy\io\matlab\mio5_utils.c:3164)
  文件“streams.pyx”，第 76 行，在 scipy.io.matlab.streams.GenericStream.read_string (scipy\io\matlab\streams.c:1408)
内存错误

```

我在具有 3.5G RAM 的 Windows XP 上运行 python 3.2。这是我的代码：

```
from scipy.io import matlab as mio
mat = mio.loadmat(DIR + '/input.mat') 
```

你能帮助我并告诉我我应该怎么做才能解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T09:47:57.103

您可能正在使用 32 位 Python。所有 32 位程序的最大限制（这个问题实际上与 Python 或 Scipy 无关）是 2GB --- 你在机器上安装了多少内存并不重要。实际上，[由于虚拟内存碎片](http://blogs.msdn.com/b/johan/archive/2007/04/19/why-adding-more-memory-won-t-resolve-outofmemoryexceptions.aspx)（根据经验，大约 800 MB 似乎是预期的），大对象的分配已经开始失败。

解决方案是使用 64 位 Python 而不是 32 位 Python。为此，您需要一个 64 位操作系统，例如 Windows 7 或 Linux。

但是，如果您坚持使用 32 位版本的 Windows XP，有[一些技巧](http://msdn.microsoft.com/en-us/library/windows/desktop/bb613473%28v=vs.85%29.aspx)可以在 32 位系统上将 32 位内存限制提高到 3GB，这可能会有所帮助。

# ios - Rubymotion MapKit 路径叠加

> ID：13337562
> 
> 赞同：0
> 
> 时间：2012-11-12T02:14:08.947
> 
> 标签：ios, mapkit, rubymotion

有谁知道使用 RubyMotion 在 MKMapView 上显示路径的任何代码示例？

我发现了一些有用的例子，它们显示了一个点或大头针，但没有一个显示路径。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:49:15.023

为了记录，我能够像这样在地图上画一条线。希望这对某人有用，因为我找不到使用 RubyMotion 在地图上绘制线条的示例：

```
arr = [CLLocationCoordinate2D.new(49.7414435, -123.08), CLLocationCoordinate2D.new(50.7414435, -123.0)]
ptr = Pointer.new(CLLocationCoordinate2D.type, arr.length)
ptr[0] = arr[0]
ptr[1] = arr[1]
pl = MKPolyline.polylineWithCoordinates(ptr, count:2)
view.addOverlay(pl) 
```

在此讨论的帮助下： [https ://groups.google.com/forum/?fromgroups=#!topic/rubymotion/F5CH780lu7c](https://groups.google.com/forum/?fromgroups=#!topic/rubymotion/F5CH780lu7c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-07T21:36:21.783

要对此进行扩展（这非常有帮助），您还需要创建一个`viewForOverlay`方法，如下所示：

```
def mapView(map_view, viewForOverlay:overlay)
  if overlay.class == MKPolyline
    overlayView = MKPolylineView.alloc.initWithPolyline(overlay)
    overlayView.strokeColor = UIColor.systemRedColor
    overlayView.lineWidth = 2
    overlayView
  end
end 
```

# django - “Django 文档”说“确保 Django 有权创建和更改表”那么我该如何在 postgreSQL 中做到这一点？

> ID：13337571
> 
> 赞同：6
> 
> 时间：2012-11-12T02:15:39.640
> 
> 标签：django, postgresql, installation

我正在学习使用 Ruby on Rails 和 python 的 EdX 课程。这让我有勇气尝试使用 Apache、mod_wsgi 和 PostgreSQL 安装和学习 Django。按照[详细的安装说明](https://docs.djangoproject.com/en/dev/topics/install/)，我首先安装了 Apache，然后是 mod_wsgi，然后是 PostgreSQL。我从源代码安装了每一个，并对每一个都进行了一些教程，并确保它们已正确安装。我有一个 postgres 用户设置来运行 PostgreSQL 服务器，我能够为自己创建一个用户“角色”以及一个我的角色继承的管理员角色，可以创建一个数据库等。我尝试了一些 SQL psql 按照教程制作表格等。我知道如何为给定角色授予权限。

所以无论如何，我非常接近从源代码实际安装 Django 的步骤，但我不确定如何遵循安装说明中的建议：

> 如果您计划使用 Django 的 manage.py syncdb 命令为您的模型自动创建数据库表，您需要确保 Django 有权在您正在使用的数据库中创建和更改表；如果您计划手动创建表，您可以简单地授予 Django SELECT、INSERT、UPDATE 和 DELETE 权限。

也许在我按照实际安装 Django 的步骤并阅读了一些教程之后，我会确切地了解在 PostgreSQL 中需要设置什么来授予 Django 这些权限，但是如果我按顺序按照安装说明进行操作，它似乎是在说我现在应该在安装 Django 之前设置这些权限。如果我能在安装 Django 之前让有人告诉我怎么做，我将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T06:38:46.603

在`settings.py`django 项目的文件中，有一段代码如下：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql_psycopg2',
        'NAME': 'myproj_db',
        'USER': 'myproj_user',
        'PASSWORD': '123',
        'HOST': '',
        'PORT': '',
    },
} 
```

它的作用是告诉 Django 哪个用户（在这种情况下为 postgres 用户）和数据库与您的 django 项目一起使用。

通常，您需要将其`myproj_user`与`myproj_db`.

创建此用户时，您可以选择为其授予权限，如下所示：

`CREATE USER myproj_user WITH PASSWORD '123' SUPERUSER CREATEDB CREATEROLE LOGIN;`

这将创建`myproj_user`具有超级用户，createdbm createrole，允许用户登录的权限。

然后数据库像这样：

`CREATE DATABASE myproj_db WITH OWNER myproj_user TEMPLATE=template1 ENCODING='utf-8';`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T02:38:57.407

您说您知道如何为给定角色授予权限，这是您在安装 Django 之前需要为它做的事情（运行 syncdb）。

这是设置您的数据库以与 Django 一起使用的一部分——您在创建每个 Django 项目之前采取的步骤。每个 Django 项目对应于您使用 Django 构建的站点，并且与另一个 Django 项目完全分离。每个项目都属于一个数据库。* 您可以在设置数据库之前安装 Django 框架，因为 Django 框架本身不会做任何事情。

要么您授予 Django 为您创建表的权限，在这种情况下，它可以为您创建表（使用`manage.py syncdb`）。或者，您使用`manage.py sqlall <app>`自己运行的 SQL 来创建所需的表（如果您对安全性感到偏执，这可能会很好）。

要在 Postgres 中向用户授予特定数据库（选项 1）的所有权限，请使用命令（来自`psql`）：

```
GRANT ALL PRIVILEGES ON DATABASE <db-name> TO <username>; 
```

^(* 从技术上讲，他们可以通过简单地配置他们使用同一个数据库来共享一个数据库。)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T02:41:39.177

Django 使用 ORM（对象关系映射器）。这意味着您不直接处理用于查询事物的数据库表，而是处理某些然后处理数据库的类。与手动执行 SQL 相比，这非常有用且对用户更友好。考虑以下示例：

```
SELECT * FROM foo WHERE field="value" 
```

对比

```
Foo.objects.filter(field='value') 
```

在 ORM 中，您通过创建某些类（在 Django 中我们称之为模型）来描述您拥有的表，这些模型对应于 db 中的表，它们的字段对应于 db 表中的列。以下内容非常相似：

```
CREATE TABLE foo (
    title        varchar(50),
    description  text,
    likes        integer
); 
```

和

```
class Foo(models.Model):
    title = models.CharField(max_length=50)
    description = models.TextField()
    likes = models.IntegerField() 
```

然而，作为开发人员，构建用于创建表的 SQL 语句并将 Python 中的这些表描述为模型是浪费时间。不这样做，Django 允许您在定义所有模型后为您创建数据库表。这就是`syncdb`命令的目的。它获取其中所有已安装的应用程序和模型，并在您的数据库中为它们创建表。但是，正如您在问题中已经提到的那样，数据库具有角色并且这些角色具有权限。例如，其中一项权限如此[处](http://www.postgresql.org/docs/9.0/static/sql-grant.html)`CREATE`所述. 因此，Django 文档所说的是让您授予 Django 用于与数据库交互的角色的所有必要权限，以便 Django 能够创建它需要的必要数据库表，并可能在以后修改它们。

# installation - 安装 ITK 的困难

> ID：13337574
> 
> 赞同：3
> 
> 时间：2012-11-12T02:16:00.450
> 
> 标签：installation, itk

所以我在 Windows 7 机器上使用 Cmake 和 Mingw 32 来安装 ITK 4.2.1。但是，我收到以下错误。我试图用谷歌搜索答案，但没有找到任何东西。非常感谢任何和所有帮助！

```
[  1%] Building CXX object Modules/ThirdParty/VNL/src/vxl/vcl/CMakeFiles/itkvcl.
dir/vcl_deprecated.cxx.obj
g++.exe: error: /wd4244: No such file or directory
mingw32-make[2]: *** [Modules/ThirdParty/VNL/src/vxl/vcl/CMakeFiles/itkvcl.dir/v
cl_deprecated.cxx.obj] Error 1
mingw32-make[1]: *** [Modules/ThirdParty/VNL/src/vxl/vcl/CMakeFiles/itkvcl.dir/a
ll] Error 2
mingw32-make: *** [all] Error 2" 
```

谢谢，

马特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-29T18:04:07.450

我建议安装 Visual Studio (VS) 2013 Express 版本并使用它来构建 ITK。自 2008 年以来我一直在使用 ITK，我相信 VS 是 Windows 上 ITK 开发人员的预期编译器/IDE。

如果您查看 ITK 仪表板，他们有几个针对 VS 的夜间构建，但我在任何地方都没有看到 MinGW for Windows：[https ://open.cdash.org/index.php?project=Insight](https://open.cdash.org/index.php?project=Insight)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T12:15:03.363

如果您在配置 ITK 时删除 VNL 选项（如果您的项目中不需要它），则此错误可能会得到解决。

如果你想用 MSVC 构建这个链接肯定会帮助你

[http://qtitkvtkhelp.blogspot.in/2012/11/itk-installation-for-msvc.html](http://qtitkvtkhelp.blogspot.in/2012/11/itk-installation-for-msvc.html)

# jquery-mobile - 将 jquery mobile 复选框中的文本与添加的图像对齐

> ID：13337575
> 
> 赞同：2
> 
> 时间：2012-11-12T02:16:38.827
> 
> 标签：jquery-mobile

我在这里使用了解决方案 [http://jsfiddle.net/KADqA/23/](http://jsfiddle.net/KADqA/23/)将图像添加到 jquery 移动复选框，它工作正常，但现在标签文本与复选框图像不对齐（太高了) 我不知道如何用 css 将其居中。

这是生成html的部分代码

```
<input type=checkbox id=chk" + ingindex + " class='chk chk" + ingindex + "' name=chk" + ingindex + "><label for=chk" + ingindex + ">" + item + "<a href='#' data-rel='dialog' ><img class=recimg src='http://webrecipemanager.com/images/recipe/" + image + "' alt='" + name + "'></a></label> 
```

这是从 firebug 生成的 html

```
<div id="div0" class="drag inaisle ui-draggable" name="div0">draggable=Object { 

element={...}, options={...}, started=

false

, more...}jQuery16405345229560181788=Object { events={...}, handle=function()}
<div class="ui-checkbox">
<input id="chk0" class="chk chk0" type="checkbox" name="chk0">checkboxradio=Object { element={...}, options={...}, label={...}, more...}jQuery16405345229560181788=Object { events={...}, handle=function()}virtualMouseBindings=Object { vmousedown=

true

, vclick=

true

}
<label class="ui-btn ui-btn-corner-all ui-btn-icon-left ui-checkbox-off ui-btn-up-i" for="chk0" data-corners="true" data-shadow="false" data-iconshadow="true" data-wrapperels="span" data-icon="checkbox-off" data-theme="i">corners=

true

shadow=

false

iconshadow=

true

wrapperEls=

"span"

icon=

"checkbox-off"

theme=

"i"

buttonElements=Object { bcls=

"ui-btn ui-btn-up-i ui-b...er-all ui-btn-icon-left"

, outer=label.ui-btn, inner=span.ui-btn-inner, more...}jQuery16405345229560181788=Object { events={...}, handle=function()}virtualMouseBindings=Object { vmouseover=

true

, vclick=

true

}
</div>
<input id="item0" type="hidden" value="1/2 c Baking Cocoa" name="item0">
<input id="ing0" type="hidden" value="Baking Cocoa" name="ing0">
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:56:52.280

您可以使用 Firebug 或其他开发人员工具来检查要操作的 CSS……
[查看文档](http://jquerymobile.com/demos/1.2.0/docs/api/themes.html)

> **压倒一切的主题**
> 
> 主题旨在作为一个坚实的起点，但旨在定制。由于一切都由 CSS 控制，因此可以很容易地使用 Web 检查器工具来识别您要修改的样式属性。添加到元素中的一组主题类（全局）和语义结构类（特定于小部件）提供了一组丰富的可能选择器，用于定位样式覆盖。我们建议将外部样式表添加到头部，放置在结构和主题样式表引用之后，其中包含所有样式覆盖。这使您可以轻松地更新到较新版本的库，因为覆盖与库代码分开。

在您的情况下添加以下内容

```
 <style>
  .ui-mobile a img, .ui-mobile fieldset {
    vertical-align: middle;
  }
  </style> 
```

请参阅修改后的[jsfiddle](http://jsfiddle.net/AX3Ar/)和工作示例的完整代码：

```
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Test</title>
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
  <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
  <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>

  <style>
  .ui-mobile a img, .ui-mobile fieldset {
    vertical-align: middle;
  }
  </style>

</head>

<body>
  <div data-role="page" id="home">
    <div data-role="fieldcontain">
        <fieldset data-role="controlgroup">
            <input type="checkbox" class="cbox" name="OptIn" id="OptIn"/>
            <label for="OptIn">Receive E-mails From Us</label>

           <input type="checkbox" value="1" class="cbox" name="tandc" id="tandc"/>
            <label for="tandc">I agree to the <a href="#tc" data-rel="dialog" ><img src="http://dummyimages.com/25x25" /></a></label>
       </fieldset>
    </div>
  </div>
  <div data-role="page" id="tc">
    <div data-role="header">
        <h1>T and C</h1>
    </div>
    Read me
  </div>

  <script>
  $('.ui-btn-text').click(function(event) {
    var checked = $("#tandc[type='checkbox']").is(":checked");
    var $this = $(this);

    if($this.children('a').length) {
        $.mobile.changePage('#tc', {
            transition : 'pop',
            role       : 'dialog'
        });
    }
    stateOfCheckbox(checked);
  });

  function stateOfCheckbox(checked) {
    $('#home').live( 'pagebeforeshow',function(event){
        $("#tandc[type='checkbox']").attr("checked",checked).checkboxradio("refresh");
    });
  }
  </script>
</body>
</html> 
```

截屏：
![在此处输入图像描述](../Images/2cfef50d350350d7646fd00bb619a3a7.png)

# box-api - Box.net 作为身份提供者 (Idp)

> ID：13337576
> 
> 赞同：2
> 
> 时间：2012-11-12T02:16:39.497
> 
> 标签：box-api

Box 作为 IdentityProvider（使用 OpenId）的任何路线图，以便我的应用程序可以依赖 Box 进行登录/身份验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:18:06.793

一个有趣的问题，但确实不适合 StackOverflow。产品方向问题更适合直接向我们发送电子邮件（api at box）。请说明您正在尝试做什么，我们可以与您讨论我们如何与您合作来解决您的业务需求。

# c# - SetValue 64 位机器注册表

> ID：13337577
> 
> 赞同：4
> 
> 时间：2012-11-12T02:16:43.507
> 
> 标签：c#, .net, installation, registry, 64-bit

我想在下面的注册表路径中为“NoModify”设置一个值。“HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\XXXX”

我正在使用下面的代码，它仅适用于 X86 机器。你能看出为什么这不适用于 x64 机器吗？

```
// This value is correct
RegistryView registryView = releaseFlags.Contains("PLATFORM_X86") ? RegistryView.Registry64 : RegistryView.Registry32;

    using (RegistryKey hkeyLocalMachine = RegistryKey.OpenBaseKey(RegistryHive.LocalMachine, registryView))
    {
        RegistryKey noModifyKey = hkeyLocalMachine.OpenSubKey(@"SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\{xxxx}", true); //SL: Key Name

        if (noModifyKey != null)
        {
            noModifyKey.SetValue("NoModify", 0);
            noModifyKey.Flush();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T02:21:52.097

当您在 64 位机器上并且您的应用程序是 32 位时 - 它应该将这些设置存储在 HKLM\Software\WOW6432Node 而不是 HKLM\Software\ 节点中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T02:24:09.837

只要您编译您的 .NET 程序，您将在任何`x86`情况`AnyCPU`下使用适用于 x86 的“正确”注册表项，因为它将作为 x86 运行。

如果将其编译为`x64`or `AnyCPU`，则可能会非常棘手，因为它可能会在 x64 机器上以 x64 运行，并使用`HKLM\SOFTWARE`x86 程序*实际* `HKLM\SOFTWARE\WOW6432Node`所在的“错误”注册表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T23:01:30.907

这是我在代码中的错误。

```
RegistryView registryView = releaseFlags.Contains("PLATFORM_X86") ? RegistryView.Registry64 : RegistryView.Registry32; 
```

应该如下：

```
RegistryView registryView = releaseFlags.Contains("PLATFORM_X86") ? RegistryView.Registry32 : RegistryView.Registry64; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-10-05T05:20:36.477

您应该以这种方式打开基本密钥。
这个对我有用。

```
var rk = Microsoft.Win32.RegistryKey.OpenBaseKey(Microsoft.Win32.RegistryHive.LocalMachine, RegistryView.Registry32);
    if (Environment.Is64BitOperatingSystem) {
        rk = Microsoft.Win32.RegistryKey.OpenBaseKey(Microsoft.Win32.RegistryHive.LocalMachine, RegistryView.Registry64);
        var val = rk.OpenSubKey("SOFTWARE\\Pourab\\sanjande", true);

        val.SetValue("test", "testvalue");
    } 
```

# node.js - NodeJS 水平缩放

> ID：13337579
> 
> 赞同：10
> 
> 时间：2012-11-12T02:16:49.287
> 
> 标签：node.js, websocket, scalability, load-balancing

我作为 ruby​​/php Web 应用程序开发人员已经有一段时间了，我已经习惯了水平扩展服务器实例以处理更多请求的想法。水平扩展 - 意味着位于负载均衡器后面的应用程序的单独实例不共享任何内容并且彼此不知道。

我的主要问题是，因为 Node.js 和它对 evented-io 的强调允许运行 node.js 服务器的单个盒子来处理“数千个”同时请求 - 是用于扩展 nodejs 应用程序的负载平衡/水平缩放? 缩放节点应用程序是否仅限于垂直缩放（在问题上投入更多的 RAM/处理能力）？

我的第二个问题与 node.js 水平缩放和 websockets 有关。我已经看过很多使用 websocket 的 Node.js“聊天”教程。（最喜欢的：[http](http://martinsikora.com/nodejs-and-websocket-simple-chat-tutorial) ://martinsikora.com/nodejs-and-websocket-simple-chat-tutorial ）

由于 websockets 有效地保持了浏览器和服务器之间的开放通信线路，PHP/Ruby 世界典型的水平扩展架构是否会导致链接中解释的聊天应用程序中断 - 因为新的 websocket 连接请求将是分配给不同的进程/服务器，并且没有一个中央资源跟踪所有连接的客户端？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-12T02:51:16.767

Node.js 以您通过内置[`cluster`](http://nodejs.org/api/cluster.html)模块描述的方式支持水平缩放。

关于在此环境中使用 websockets/socket.io 的第二个问题，您必须使用 Redis 之类的东西来跨应用程序的多个实例存储共享状态，如此处[所述](http://blog.rstack.cc/post/node_js__using_socket_io_with_cluster_module)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-27T15:15:36.927

Node.js 的集群功能仅限于具有多个处理器的单个服务器。它主要利用服务器中的处理器数量。我认为这个问题更多地是关于当我们想要使用具有负载均衡器外观的多个服务器进行水平扩展时的场景。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-28T16:08:46.133

如果您的 node.js 实例分布在多台服务器上（水平扩展），它将起到相同的作用，您需要对其进行适当的编程以支持这种类型的设置。

# matlab - 在 100 X 2 矩阵中，如何将第 2 列中的每个元素除以常数？

> ID：13337585
> 
> 赞同：3
> 
> 时间：2012-11-12T02:18:03.733
> 
> 标签：matlab, operation

我有一个 100 x 2 矩阵。我试图弄清楚如何将第二列中的所有项除以一个常数。

例如，假设我有这个矩阵。

```
[1  2;
3  4;
5  6] 
```

我想将第二列除以 2。

```
[1  2/2;
3  4/2;
5  6/2] 
```

所以我的最终矩阵将是。

```
[1  1;
3  2;
5  3] 
```

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T02:20:02.507

如果您的矩阵是 M 则：

```
 M(:,2)=M(:,2)./2; 
```

将第二列中的所有项除以常数 (2)。顺便说一句，因为你除以的值是一个常数，你也可以写`/`而不是`./` 如果你想组装一个新的矩阵而不覆盖第一个矩阵，只需写如下内容：

```
 A=[M(:,1) M(:,2)./2] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-28T17:37:56.603

我不确定应该如何阅读 natan 的方程，但我会乘以第一个矩阵

```
1  2
3  4
5  6 
```

由矩阵

```
1 0
0 .5 
```

结果矩阵是

```
1 1
3 2
5 3 
```

# javascript - 无法在 javascript 中清除 localStorage

> ID：13337589
> 
> 赞同：1
> 
> 时间：2012-11-12T02:19:13.320
> 
> 标签：javascript, html

我是 javascript 新手，目前正在开发一个简单的计数器，其想法是您可以将计数存储在 localStorage 中，并在需要时清除它们。

我一直在构建 W3C 示例，但无法清除 localStorage。

我尝试将值设置为零以及简单地清除和删除该项目，但这是我目前所处的位置：

```
function clickCounter()
{
if(typeof(Storage)!=="undefined")
  {
  if (localStorage.clickcount)
    {
    localStorage.clickcount=Number(localStorage.clickcount)+1;
    }
  else
    {
    localStorage.clickcount=1;
    }
  document.getElementById("result").innerHTML="You have clicked the button " + localStorage.clickcount + " time(s).";
  }
}

function cleanUp(){
    localStorage.clickcount=0;

}
</script>
</head>
<body>

<br/>   

<p><button onclick="clickCounter()" type="button">Click me!</button></p>
<button onclick="cleanUp()">Reset button</button>

<div id="result"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T02:33:50.447

我将您的代码复制粘贴到一个空的 HTML 文件中并运行它，工作正常

我所做的只是添加缺少的 < script >

我正在使用 Chrome 22

仅供参考，这是您从本地存储中删除某些内容的方式

```
localStorage.removeItem('thekey'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-15T10:20:29.697

如果你使用的是 js。如果你想从 localStorage 中清除所有数据，你可以使用它。`localStorage.clear();`

但是，如果您只想清除单个 localStorage，请使用`localStorage.removeItem('key');`

前任。

```
function cleanUp(){
    localStorage.clear(); //This clears all localStorage, when you click the button with this function

} 
```

# c# - 清理 BinaryFormatter 的输入

> ID：13337591
> 
> 赞同：1
> 
> 时间：2012-11-12T02:19:59.283
> 
> 标签：c#, .net, serialization, binaryformatter

我正在使用 .NET `BinaryFormatter`，以及序列化自定义对象并将其存储在网页上`Convert.ToBase64String`的隐藏标签中。`<input>`

当用户提交表单时，我会反转反序列化自定义对象的步骤：

```
var formatter = new BinaryFormatter();
var byteData = Convert.FromBase64String(submittedString);
var ms = new MemoryStream(byteData);
var originalObject = (MyCustomType)formatter.Deserialize(ms); 
```

巨大的安全漏洞：如果用户巧妙地序列化一个实例`MyMaliciousType`并将其转换为 base-64 字符串，然后将其发布*到*Web 表单中会怎样。

有没有办法在实际执行反序列化*之前*判断被反序列化的类型是否与给定类型匹配？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T02:22:37.277

如果您有适当的异常处理，则转换为您的类型将失败 - 并且不会造成任何伤害。

如果您想更好地控制数据的序列化方式，并且想要密切关注反序列化过程中发生的情况，您最终需要实现自己的某种对象分类器。

甚至可能是一个简单的 XML 格式，这样你就可以遍历节点，如果有什么不应该的，就把它扔掉。

虽然，如果你想自己解决这个问题：

这是 BinaryFormatter 的官方规范：http: [//msdn.microsoft.com/en-us/library/cc236844](http://msdn.microsoft.com/en-us/library/cc236844(prot.20).aspx)
(prot.20).aspx 而且，这里是更小的第三方规范：[http:// primates.ximian.com/~lluis/dist/binary_serialization_format.htm](http://primates.ximian.com/~lluis/dist/binary_serialization_format.htm)

使用这些资源，您将能够窥视二进制流并查看序列化内容的类型。不过，似乎很没必要。

*只需在反序列化后*对数据进行广泛检查。

# java - 我可以在 equals/hashCode 中使用实体 ID 并回退到实例相等吗？

> ID：13337595
> 
> 赞同：4
> 
> 时间：2012-11-12T02:20:18.830
> 
> 标签：java, jpa, equals, hashcode

鉴于我的特定使用模式，我试图找出这种方法有什么问题：

```
@Entity
public class DomainObject {
  @Id // + sequence generator
  private Long id;

  @Override
  public boolean equals(Object o) {
    // bunch of other checks omitted for clarity
    if (id != null) { 
      return id.equals(o.getId());
     }
     return super.equals(o);
  }

  @Override
  public int hashCode() { 
    if (id != null) {
      return id.hashCode();
    } 
    return super.hashCode();
} 
```

我已经阅读了有关该主题的几篇文章，听起来您不想在 equals/hashCode 中使用 DB 生成的序列值，因为在对象被持久化并且您不想要不同的瞬态之前它们不会被设置实例都相等，否则持久层本身可能会中断。

但是，回退到瞬态对象的默认 Object equals/hashCode（实例相等）然后在你拥有它时使用生成的 @Id 有什么问题吗？

我能想到的最糟糕的事情是，瞬态对象永远不能等于持久对象，这在我的用例中很好 - 我唯一一次将对象放入集合中并且想要`contains`工作，所有对象已经持久化并且都有 ID。

但是，我觉得在持久层深处以一种非常微妙、不明显的方式存在其他问题，但我无法弄清楚是什么。

其他选项似乎也不那么吸引人：

*   什么都不做，并且使用实例相等（默认 Object.equals）：对我的大多数实体都很好，但是当我想要一个包含分离实体的集合（例如，会话范围）和当前交易中的“实时”交易

*   使用业务键：我有明确的自然键，但它们是可变的，这将有一些与上述相同的问题（如果对象更改，哈希码稳定性）

*   使用 UUID - 我知道这会起作用，但感觉用工件污染数据库以支持 java.util 集合是错误的。

也可以看看：

*   [JPA hashCode() / equals() 困境](https://stackoverflow.com/questions/5031614/the-jpa-hashcode-equals-dilemma)
*   [是否应该在 equals 和 hashCode 中考虑 JPA 实体的 id 字段？](https://stackoverflow.com/questions/7340824/should-the-id-field-of-a-jpa-entity-be-considered-in-equals-and-hashcode).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T20:51:49.900

Map的[javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html)写道：

> 注意：如果将可变对象用作映射键，则必须非常小心。如果对象的值以影响等于比较的方式更改，而对象是映射中的键，则不指定映射的行为。

每当一个对象被持久化时，你的实现就会改变 equals 的含义。因此，任何包含该对象的集合都不再需要正常工作。特别是，更改用作 HashMap 中的键（或包含在 HashSet 中）的对象的哈希码可能会导致将来对该 Map（Set）的查找找不到该对象，并将该对象再次添加到 Map（Set）很可能成功，即使在一般情况下，一个 Map 最多可以包含每个给定键的映射，一个 Set 最多包含每个对象一次。

由于通常将实体存储在集合中（以表达 ToMany 关联），因此该缺陷可能会导致实际难以发现的错误。

因此，我强烈建议不要基于数据库生成的标识符来实现哈希码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-06T11:16:55.397

是的你可以！但是你必须小心，`hashCode`实现总是返回与[这篇文章中解释](https://vladmihalcea.com/how-to-implement-equals-and-hashcode-using-the-entity-identifier/)的相同的常量值：

```
@Entity
public class Book implements Identifiable<Long> {

    @Id
    @GeneratedValue
    private Long id;

    private String title;

    @Override
    public boolean equals(Object o) {
        if (this == o) return true;
        if (!(o instanceof Book)) return false;
        Book book = (Book) o;
        return Objects.equals(getId(), book.getId());
    }

    @Override
    public int hashCode() {
        return getClass().hashCode();
    }

    //Getters and setters omitted for brevity
} 
```

这是确保 equals 和 hashCode 在所有[实体状态转换](https://vladmihalcea.com/a-beginners-guide-to-jpa-hibernate-entity-state-transitions/)中保持一致的唯一方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-02T09:50:58.090

如果您确定永远不需要将非持久实体添加到 Set 或 Map 键，则可以使用 ID 来测试相等性并用作哈希码。但是如果你这样做，你可以通过为一个未持久的对象抛出一个异常来强制它：

```
@Entity
public class DomainObject {
  @Id // + sequence generator
  private Long id;

  @Override
  public boolean equals(Object that) {
    // bunch of other checks omitted for clarity
    if (id != null) { 
      throw new IllegalStateException("equals() before persisting");
    }
    if (this == that) {
      return true;
    }
    if (that instanceof DomainObject) {
      return id.equals(((DomainObject)that).id);
    }

  }

  @Override
  public int hashCode() { 
    if (id != null) {
      throw new IllegalStateException("hashCode() before persisting");
    } 
    return id;
  }
} 
```

如果您这样做，您可能会看到意外的异常，您没有意识到您在未持久对象上依赖这些方法。您可能会发现这对调试很有帮助。您可能还会发现它使您现有的代码无法使用。无论哪种方式，您都会更清楚您的代码是如何工作的。

您永远不应该做的一件事是为哈希码返回一个常量。

```
public int hashCode() { return 5; } // Don't ever do this! 
```

从技术上讲，它履行了合同，但这是一个糟糕的实现。只需阅读 Object.hashCode() 的 javadocs：*……为不相等的对象生成不同的整数结果可能会提高哈希表的性能。*（这里的“可能”一词是一种严重的轻描淡写。）

# google-apps-script - 函数 onOpen() 未运行

> ID：13337599
> 
> 赞同：19
> 
> 时间：2012-11-12T02:20:51.370
> 
> 标签：google-apps-script, google-sheets, triggers

我的功能包括向文档添加菜单和吐司。我已经验证了触发器（onOpen）也已设置。它仅在用户进入工具、脚本管理器、运行时才有效。我们有太多具有太多背景的用户期望知道如何做到这一点。为什么它不起作用？（使用铬）

```
function onOpen()
{
  var menus = [{name: "Advance in Workflow", functionName:"sendEmail"}];

     SpreadsheetApp.getActiveSpreadsheet().addMenu("Auto Advance FG Workflow", menus);

  //sheet.toast(Notify/Remind users);
   sheet.toast("While you are here we kindly ask that you do not add, modify or remove     any columns.","Welcome - " + username,8);
 } 
```

谢谢，

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-23T10:44:32.083

我遇到了同样的问题。

我意识到，有时谷歌会创建某种脚本缓存（我曾经有一个“测试”脚本，我通常会更改它的内容，有时，脚本运行时就好像我没有那样运行）。

因此，我解决 onOpen() 不起作用的方法是更改​​函数名称并手动添加触发器。

> ![去](../Images/6ac262e79a37d87961fb16d84d19150a.png)
> 
> 转到“资源 -> 当前脚本的触发器...”
> 
> ![选择要在打开时运行的功能](../Images/6c02ac393da3d3b16a627f520af4a5da.png)
> 
> 选择要在打开时运行的功能

它在这里就像一个魅力！

更新的位置信息： [![从工具栏](../Images/293baa0e6ad6bf130975e72b1182d472.png)](https://i.stack.imgur.com/wkHXV.png) 或 [![从菜单栏](../Images/5dc76dc405457aebd829b5ef01db40a3.png)](https://i.stack.imgur.com/R71p7.png)

然后

[![触发选择](../Images/29ae534098f6a33cabd4551d8e14625d.png)](https://i.stack.imgur.com/I0uKZ.png)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-05-18T13:16:48.547

这是一篇旧帖子，但我刚刚遇到了这个问题，并找出了为什么它在我的情况下无法正常工作：我在脚本文件的顶部有一个需要一些授权并且阻止脚本正确运行的变量。我看到调用了 OP `var username = Session.getActiveUser().getUsername();`（这需要授权，这可能是原因）。

例如：此代码不起作用：

```
function onOpen(){
  SpreadsheetApp.getUi()
  .createMenu("Exportation")
  .addItem("Lancer l'exportation", "exportationMenu")
  .addToUi();
}
var stConsCons= SpreadsheetApp.openById(sgcid).getSheetByName("Consultant"); 
```

但这一个会起作用：

```
function onOpen(){
  SpreadsheetApp.getUi()
  .createMenu("Exportation")
  .addItem("Lancer l'exportation", "exportationMenu")
  .addToUi();
}

function whatever(){
  var stConsCons= SpreadsheetApp.openById(sgcid).getSheetByName("Consultant");
...} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-08-19T09:42:07.437

原来需要把`onOpen(e)`函数加到Triggers中！

![图片说明在这里](../Images/2c37155d574e3a2771f48f467ee63582.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-12-07T15:44:32.677

就我而言， onOpen 不起作用，因为我在函数之外有一个变量，用`SpreadsheetApp.openById()`而不是`SpreadsheetApp.getActiveSpreadsheet()`. `openById()`我猜即使您打开的工作表绑定到脚本，onOpen 也无法使用。`onOpen()`不适用于函数外部的这种变量：

```
var sheet = SpreadsheetApp.openById("1b_PQD...").getSheetByName("demos") 
```

如果您的脚本绑定到工作表，您可以使用该`getActiveSpreadsheet()`功能解决此问题。否则，您可以通过将`openById()`调用放入函数来解决它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-10-24T14:01:54.190

在我的情况下，有一个参考错误，虽然没有完全停止脚本，但它确实阻止了菜单的出现。

我只有在对脚本运行调试后才能检测到该错误。

[![谷歌脚本调试选项](../Images/08e0ab1dcc503dc41ab3fa3ea4477b08.png)](https://i.stack.imgur.com/UjVyO.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-15T03:18:26.770

看起来问题可能是未定义“工作表”，这就是吐司失败的原因。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2022-01-02T16:27:55.660

如果缺少权限，[简单触发器会静默失败。](https://developers.google.com/apps-script/guides/triggers)我在一个初始化非绑定文件的[文件](https://developers.google.com/apps-script/reference/drive/file)`onOpen()`对象的脚本中遇到了这个问题。我将所有 File 对象实例化移动到具有权限的菜单函数中。

换句话说，这行不通

```
function onOpen(e) {
   ...
   let file = DriveApp.getFileById(nonBoundFileId);
   ...
} 
```

但这会起作用

```
function menuFunction() {
   ...
   let file = DriveApp.getFileById(nonBoundFileId);
   ...
} 
```

因为 menuFunction 可以被授予简单触发器所缺乏的权限。

# javascript - Knockout.js：选择下拉问题，即使使用“初始数据”提供，也始终将“选定项目”设置为第一个选项

> ID：13337600
> 
> 赞同：2
> 
> 时间：2012-11-12T02:20:57.260
> 
> 标签：javascript, knockout.js

jsFiddle：http: [//jsfiddle.net/wenbert/W2qLz/2/](http://jsfiddle.net/wenbert/W2qLz/2/)

即使我已经为`selected_skill`数组提供了“初始数据”，它也`$data`成为选择框中的第一项。

```
var initialData = [
    {
    id: '1',
    name: "Batman",
    isDelete: false,
    selected_skill: {              <--- This part right here.
        id: '2',
        name: "Boxing",
        isDeleted: false
    },
    skills: [
        {
        id: '1',
        name: "Karate",
        isDeleted: false},
    {
        id: '2',
        name: "Boxing",
        isDeleted: false
    },
    {
        id: '6',
        name: "Sonar",
        isDeleted: false}
    ]},
{
    id: '2',
    name: "Hulk",
    isDelete: false,
    skills: [
        {
        id: '3',
        name: "MMA",
        isDeleted: false},
    {
        id: '4',
        name: "Rage",
        isDeleted: false},
    {
        id: '5',
        name: "Extra Strength",
        isDeleted: false}
    ]},
    ]; 
```

请参阅`$data`下面屏幕截图中的部分

![在此处输入图像描述](../Images/97f48020c43c328a47b8f2435d052f53.png)

我已经`initial_data`提供了，但是当所有内容都“加载”时，$data 会根据选择框的第一个选项自动更新。

如何以这种方式设置“选定选项”？

在屏幕截图中，`selected_skill`应该是：

```
selected_skill: {
    id: '2',
    name: "Boxing",
    isDeleted: false
} 
```

jsFiddle：http: [//jsfiddle.net/wenbert/W2qLz/2/](http://jsfiddle.net/wenbert/W2qLz/2/)

**更新：**

在`initialData`我的真实应用程序中使用`$.getJSON()`. 我这样做是这样的：

```
$.getJSON(appUrl+"/getstuff/hero.json", 
    function(data){
        ko.applyBindings(new Hero(data));
    }
); 
```

我可以看到 Firebug 控制台的结果显示它是“装箱” - 我得到`Object { id="2", nameL: "Boxing", isDelete: false }`. 但是当一切都被渲染后，`selected_skill`is 成为第一个选项。

我希望这是有道理的。如果没有，我很乐意通过评论回答澄清。

**最后更新**

我用了：

```
return item.id() === data.selected_skill.id 
```

代替

```
return data.selected_skill && skill.id === data.selected_skill.id; 
```

然后它起作用了。

我已经标记了正确的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T03:54:40.087

问题是该`selected_skill`对象是与技能数组中的对象不同的对象，而不是对同一对象的引用。

在 JavaScript 中，

```
var a = { name: "Bob" };
var b = { name: "Bob" };
var c = a;

alert(a === b);  //false - different objects
alert(a === c);  //true - reference to the same object 
```

您需要运行一些逻辑来将所选对象与列表中的对象匹配。也许是这样的：http: [//jsfiddle.net/rniemeyer/W2qLz/3/](http://jsfiddle.net/rniemeyer/W2qLz/3/)

# mysql - SoapException com.mysql.jdbc.driver

> ID：13337603
> 
> 赞同：1
> 
> 时间：2012-11-12T02:21:52.377
> 
> 标签：mysql, web-services, soap

我有几个涉及 sql 的 WebMethods，当我调用一个方法时，它会发送一个涉及 com.mysql.jdbc.driver 的soapException

这是我的连接方法（它不是 Web 方法，但它与其他 Web 方法一起在 Web 服务类上）

```
 public Connection connect() throws Exception        
    {
        if (con == null)
        {
            Class.forName("com.mysql.jdbc.Driver");
            con = DriverManager.getConnection("jdbc:mysql://localhost:3306/ProyectGameSmart","root","root");
        }
        return con;
} 
```

这是需要获取连接实例的 Web 方法之一

```
 public int insert_publisher(String pub, String phone, String addr) throws Exception
{
    int ResultValue = 0;
    connect();
    query="INSERT INTO ProyectGameSmart.Publisher(Publisher,Phone,Address)VALUES('"+pub+"','"+phone+"','"+addr+"');";       
    pstmt = con.prepareStatement(query);
    ResultValue = pstmt.executeUpdate();
    return ResultValue;
} 
```

任何人都可以帮助我如何实现涉及 sql 连接的 Web 服务。我只能用简单的数学方法找到 Web 服务。我正在使用 Eclipse 和 Tomcat 7。

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T03:06:32.820

如果您的代码在本地运行，我的意思是没有作为 Web 服务运行。然后，您必须将正确版本的 mysql JDBC 驱动程序放入 Web 服务服务器的类路径中。这里是 Tomcat lib 文件夹。这将解决问题。

# facebook - 使用 WebWorks 登录 Facebook

> ID：13337604
> 
> 赞同：2
> 
> 时间：2012-11-12T02:21:59.570
> 
> 标签：facebook, html, blackberry-webworks

几天来，我一直在尝试通过 webworks 应用程序登录 facebook，但我不知道 FB.login 由于弹出窗口而无法工作，并且 oauth 登录必须通过网络服务器，我目前正在尝试实现这个插件

[https://github.com/rsweny/ChildBrowser-plugin-for-BlackBerry](https://github.com/rsweny/ChildBrowser-plugin-for-BlackBerry)

但是自述文件并不清楚如何实现，我知道您需要在 app 文件夹中有一个 ext 目录，但不确定我是否需要在 config.xml 文件或其他文件中添加一些内容。

请帮忙！

谢谢，

何塞。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T17:16:26.487

我创建了一些示例，说明如何通过 OAuth 将您的应用程序与 Facebook、Twitter 和foursquare 集成。它们针对 BlackBerry 10，但也应适用于早期版本。

注意：我将更新它们（针对 BlackBerry 10）以使用新的 ChildBrowser API。

OAuth 示例可在 GitHub @ [https://github.com/ctetreault/BB10-WebWorks-Samples上获得](https://github.com/ctetreault/BB10-WebWorks-Samples)

# java - @Transactional 和继承的方法

> ID：13337606
> 
> 赞同：2
> 
> 时间：2012-11-12T02:22:20.880
> 
> 标签：java, spring, hibernate

我正在使用两个数据库（MySQL 和 HSQL），所以我的 Spring 应用程序中需要两个事务管理器。请看一下这段代码：

```
public abstract class ClientService implements IClientService{
public void doSomething(){
}
}

public interface IClientService{
void doSomething();
}

@Transactional("txManagerHSQL")
public class ClientServiceHSQL extends ClientService{
}

@Transactional("txManagerMySQL")
public class ClientServiceMySQL extends ClientService{
} 
```

我想要`ClientServiceHSQL`并在不同的数据库`ClientServiceMySQL`上执行`doSomething()`，但我遇到了`"org.hibernate.HibernateException: No Session found for current thread"`例外。似乎`@Transactional`注释不会影响继承的方法。此时我必须`doSomething()`在每个`@Transactional`类中实现才能`doSomething()`成功调用，但对我来说这并不好。有没有办法使继承的方法也具有事务性？

# node.js - 在部署期间找不到模块“express”cloudfoundry node08

> ID：13337607
> 
> 赞同：0
> 
> 时间：2012-11-12T02:22:22.737
> 
> 标签：node.js, deployment, express, cloud-foundry

在cloudfoundry中部署nodejs应用程序时..它给出错误“找不到模块'express'”..感谢这方面的任何帮助..这是非常简单的hello world程序..甚至package.json也很简单..是否有任何 cloudfoundry 特定的更改需要完成.. 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T04:00:16.010

确保已经使用“npm install”安装了模块。或者，执行“npm shrinkwrap”，使用 {"ignoreNodeModules": true} 创建 package.json 文件以要求 CF 在云中安装模块。见：[http ://www.youtube.com/watch?v=rCrXhNGDhhY&list=UU0ZYS0Y7b5oiVLvxGf4magw&index=4&feature=plcp](http://www.youtube.com/watch?v=rCrXhNGDhhY&list=UU0ZYS0Y7b5oiVLvxGf4magw&index=4&feature=plcp)

# c# - 调用脚本，JavaScript 错误

> ID：13337610
> 
> 赞同：1
> 
> 时间：2012-11-12T02:22:58.073
> 
> 标签：c#, jquery, json, browser, invokescript

我在一个更大的 WPF 应用程序中嵌入了一个 IE9 Web 浏览器控件。我正在尝试调用`InvokeScript`并将 JSON 字符串作为参数传递给它：

```
webBrowser.InvokeScript("redrawPlot", new object[] { reDrawData }); 
```

函数 redrawPlot 使用 jquery 方法`parseJSON`将其解析回一个对象：

```
redrawPlot = function(dataObj) {
        dataObj = $.parseJSON(dataObj);
        ...
} 
```

当它在 WPF 应用程序中运行时，我收到 JavaScript 错误：

```
Invalid character 
```

reDrawData 的内容（在脚本调试器和 WPF 应用程序中检查）是：

> "{\"plot0\":[{\"data\":[[1,1111.11111111111],[2,1111.11111111111],[3,1111.11111111111]],\"label\":\"A-TOP-6\ "}],\"plot1\":[{\"data\":[[1,1111.11111111111],[2,1111.11111111111],[3,1111.11111111111]],\"label\":\"A-TOP- 6\"}],\"plot2\":[{\"data\":[[1,1111.11111111111],[2,1111.11111111111],[3,1111.11111111111]],\"label\":\"A- TOP-6\"}],\"plot3\":[{\"data\":[[1,1111.11111111111],[2,1111.11111111111],[3,1111.11111111111]],\"label\":\" A-TOP-6\"}],\"plot4\":[{\"data\":[[1,1111.11111111111],[2,1111.11111111111],[3,1111.11111111111]],\"label\": \"A-TOP-6\"}]}"

当我在 IE9 开发人员工具下运行它直接传递该字符串时，我没有收到任何错误。

我没有正确调用 InvokeScript 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T03:39:38.817

您的属性和字符串周围的引号被转义，它们不应该被转义。那是

> {\"plot0\":[{\"data\":[[1,1111.11111111111],[2,1111.11111111111],[3,1111.11111111111]],\"label\":\"A-TOP-6\" }],\"plot1\":[{\"data\":[[1,1111.11111111111],[2,1111.11111111111],[3,1111.11111111111]],\"label\":\"A-TOP-6 \"}],\"plot2\":[{\"data\":[[1,1111.11111111111],[2,1111.11111111111],[3,1111.11111111111]],\"label\":\"A-TOP -6\"}],\"plot3\":[{\"data\":[[1,1111.11111111111],[2,1111.11111111111],[3,1111.11111111111]],\"label\":\"A -TOP-6\"}],\"plot4\":[{\"data\":[[1,1111.11111111111],[2,1111.11111111111],[3,1111.11111111111]],\"label\":\ "A-TOP-6\"}]}

应该

> {"plot0":[{"data":[[1,1111.11111111111],[2,1111.11111111111],[3,1111.11111111111]],"label":"A-TOP-6"}],"plot1":[ {"data":[[1,1111.11111111111],[2,1111.11111111111],[3,1111.11111111111]],"label":"A-TOP-6"}],"plot2":[{"data":[ [1,1111.11111111111],[2,1111.11111111111],[3,1111.11111111111]],"label":"A-TOP-6"}],"plot3":[{"data":[[1,1111.11111111111], [2,1111.11111111111],[3,1111.11111111111]],"label":"A-TOP-6"}],"plot4":[{"data":[[1,1111.11111111111],[2,1111.11111111111], [3,1111.11111111111]],"标签":"A-TOP-6"}]}

# javascript - 为页面上的项目显示一个值，但发布不同的值

> ID：13337615
> 
> 赞同：1
> 
> 时间：2012-11-12T02:24:23.363
> 
> 标签：javascript, html, oracle, oracle-apex

我有一个包含大量项目的页面，使用表格形式生成。它是一个预算条目表。每个预算条目可能是单个年度预算金额，也可能是一组十二个月的预算金额。

我已经使用“金额类型”选择列表来实现这一点，该列表可以是“年”或“月”，后跟 13 个项目 - 年度金额，然后是一年中每个月的 12 个金额。

*   如果金额类型为 YEAR，或者用户将其更改为 YEAR，则启用年金额项并禁用月金额。

*   如果金额类型为 MONTH，或者用户将其更改为 MONTH，则禁用年金额项（同时仍显示已输入的值）。

但是，禁用项目“背后”的值仍然很重要；必须在提交页面时发布；这样一来，如果用户从 MONTH 更改为 YEAR，就会恢复他们原来的年度预算。

![示例截图](../Images/94b64696a21ed077c52fa4eced14a48a.png)

**现在，以上所有工作都很好。我想补充的是：**

*   如果金额类型是 MONTH，我想动态显示（或可能在顶部）（禁用）年度金额项目中的月份项目*总数*；还，
*   如果金额类型为 YEAR，我想动态获取输入的年度金额，除以 12，然后在每个（禁用的）月度项目中显示结果。

但是，我不想更改每个禁用项目的基础值；发布页面时，应保留禁用项目的原始值，而不是计算版本。

例如，假设用户有一个金额类型 = YEAR 的预算条目，输入的年度金额（并保存到数据库中）为 120,000 美元。数据库中的所有每月金额最初都将为 NULL。

现在，用户将 Amount Type = MONTH 更改为禁用 Annual Amount 项。他们输入一些金额，例如 7 月为 1000 美元，8 月为 2000 美元。当他们保存更改时，数据库将存储 (MONTH, 100000, 1000, 2000, null, ... null) - 换句话说，我保留了旧的年度金额（以防用户翻回年度预算）。但出于显示目的，我希望年度金额项目显示为 3000 美元。

我的问题是，如果我添加一些 javascript 来用所有每月数字的总和填充年度金额项目，我将覆盖 100,000 美元，如果用户返回 YEAR，它不会“恢复”他们原来的年度预算数量。

允许用户在 YEAR 和 MONTH 之间来回切换，并输入两种类型的值；用户输入的所有值都必须保存到数据库中。

所以我想在屏幕上显示一个值，同时在页面发布时将原始值保留在基础项目中。

请注意，我的 javascript 技能是有限的——到目前为止我所做的都是基于大量的谷歌搜索。

*tl;博士*

我想要一个输入项，当只读时，它在页面上显示一个值，但在提交页面时发布一个不同的值。

*甲骨文顶点 4.1*

*注意：该解决方案必须适用于 IE7，也就是这里的 SOE。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T02:42:06.543

使用隐藏字段来存储真实值

```
<input type="hidden"> 
```

当真实字段改变时更新隐藏字段

然后您可以在仅可视字段中显示您想要的任何内容（不要给它们命名，它们不会包含在表单发布数据中）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T08:10:18.370

非常感谢 NoPyGod，他的评论让我找到了一个可行的解决方案。

我在表格表单中添加了一个额外字段 TOTAL_AMOUNT_DSP，并隐藏了基础数据库字段 TOTAL_AMOUNT。我使用 javascript 设置 TOTAL_AMOUNT_DSP 并根据金额类型使其可编辑或只读。

绕过“自用户启动更新过程以来数据库中数据的当前版本已更改”。错误，我已将默认 MRU 进程替换为自定义更新程序：

```
FOR i IN 1..APEX_APPLICATION.g_f01.COUNT LOOP
  UPDATE budget_entries
  SET amount_type  = APEX_APPLICATION.g_f02(i)
     ,total_amount = APEX_APPLICATION.g_f03(i)
     ,month1       = APEX_APPLICATION.g_f05(i)
     ,month2       = APEX_APPLICATION.g_f06(i)
     ,month3       = APEX_APPLICATION.g_f07(i)
     ,month4       = APEX_APPLICATION.g_f08(i)
     ,month5       = APEX_APPLICATION.g_f09(i)
     ,month6       = APEX_APPLICATION.g_f10(i)
     ,month7       = APEX_APPLICATION.g_f11(i)
     ,month8       = APEX_APPLICATION.g_f12(i)
     ,month9       = APEX_APPLICATION.g_f13(i)
     ,month10      = APEX_APPLICATION.g_f14(i)
     ,month11      = APEX_APPLICATION.g_f15(i)
     ,month12      = APEX_APPLICATION.g_f16(i)
  WHERE budget_entry_id = APEX_APPLICATION.g_f01(i); 
END LOOP; 
```

这种方法的唯一缺点是，如果多个用户在同一时间更新行，我将无法获得内置的 Apex 保护；基本上是“最后一次更新获胜”。我已经通过基于表格上的版本列的简单丢失更新检测来解决这个问题。

# vim - 如何使用自定义键在 VIM 中启动可视块选择

> ID：13337618
> 
> 赞同：8
> 
> 时间：2012-11-12T02:24:50.117
> 
> 标签：vim

`Ctrl`我知道 VIM 可以使用+开始可视块选择`V`，或者有时`Ctrl`+`V`变成粘贴，我们仍然可以使用`Ctrl`+ `Q`。但是我觉得这个按键组合不是那么容易按，我可以为此分配一个自定义按键吗？例如，我想`q`在普通模式下使用开始视觉选择（我不使用宏录制那么多）：

`map q ???`<-- 我应该在这里写什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T02:30:43.107

我相信你正在寻找

```
:nnoremap q <c-v> 
```

但请注意，除非您也重新映射，否则您将无法录制宏。

# perl - Perl 中的字符串连接

> ID：13337621
> 
> 赞同：3
> 
> 时间：2012-11-12T02:25:05.860
> 
> 标签：perl, concatenation

我正在尝试在 Perl 中连接此字符串：“/.hush_profile”；

当我在字符串中添加“/”时，我一直遇到问题。我试过逃避它，但这也行不通。

这是我的问题代码行：

```
#!/usr/bin/perl -w
use strict;
my($fileloc, $home_dir);

$home_dir = $ENV{"HOME"};
$fileloc = $home_dir;
$fileloc .= "/.hush_profile"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T02:43:35.333

您的代码的这种改编给了我预期的输出：

```
#!/usr/bin/perl -w
use strict;
my($fileloc);

my $home_dir = $ENV{"HOME"};
print "home_dir = $home_dir\n";
$fileloc = $home_dir;
print "fileloc 1 = $fileloc\n";
$fileloc .= "/.hush_profile";
print "fileloc 2 = $fileloc\n"; 
```

输出：

```
home_dir = /work4/jleffler
fileloc 1 = /work4/jleffler
fileloc 2 = /work4/jleffler/.hush_profile 
```

即使我`$HOME`在环境中未设置，我也会得到一些东西：

```
$ (unset HOME; perl x.pl)
Use of uninitialized value $home_dir in concatenation (.) or string at x.pl line 6.
home_dir = 
Use of uninitialized value $fileloc in concatenation (.) or string at x.pl line 8.
fileloc 1 = 
fileloc 2 = /.hush_profile
$ 
```

这恰好是 RHEL 5 (x86/64) 上的 Perl 5.12.1，但我在同一平台上使用 Perl 5.8.8 得到了相同的结果。

# android - 如何在另一个应用程序中安装另一个没有图标启动器的 apk

> ID：13337626
> 
> 赞同：-1
> 
> 时间：2012-11-12T02:25:49.910
> 
> 标签：android, installation

我想从我的应用程序中安装其他应用程序，例如 Google Play。安装应用程序后，我想删除它们的图标启动器（我的应用程序将管理它们）。我可以做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T03:53:42.447

不，您不能从您的文件中管理其他 APK 的文件，因为这会带来安全风险。如果您想从您的应用程序管理应用程序，但是您可以创建意图以使用 where 从您的应用程序启动它们（只需将字符串替换为应用程序 android 清单定义的启动活动的名称）：

```
Intent launch = ("otherApplicationActivity");
startActivity(launch); 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-11-12T02:36:12.797

您可以在 mainfest.xml 中为应用程序制作启动器图标

```
`    <application
        android:icon="@drawable/ic_launcher"

/> 
```

`

# iphone - 获取地址簿 ios 5,ios 4.3 错误

> ID：13337627
> 
> 赞同：2
> 
> 时间：2012-11-12T02:25:55.657
> 
> 标签：iphone, objective-c, ios-simulator, abaddressbook

我在 iPhone 5.1 模拟器或更低版本中获取地址簿时遇到了一些问题，此代码在 iPhone 6 模拟器中运行良好。我在一些参考资料中发现只有 ios 6 需要权限，但我的情况不同。通讯录总是不返回联系方式和。有没有人告诉我我需要在项目中做什么或配置。提前谢谢了。

```
ABAddressBookRef addressBook = ABAddressBookCreate();

CFArrayRef arrRefPeople = ABAddressBookCopyArrayOfAllPeople(addressBook);

CFMutableArrayRef mArrRefPeople = CFArrayCreateMutableCopy(kCFAllocatorDefault, CFArrayGetCount(arrRefPeople), arrRefPeople);
CFRelease(arrRefPeople);

CFArraySortValues(mArrRefPeople, CFRangeMake(0, CFArrayGetCount(mArrRefPeople)), (CFComparatorFunction)ABPersonComparePeopleByName, (void *)ABPersonGetSortOrdering());

NSArray *arrChosung = [[NSArray alloc] initWithObjects:@"ㄱ",@"ㄲ",@"ㄴ",@"ㄷ",@"ㄸ",@"ㄹ",@"ㅁ",@"ㅂ",@"ㅃ",@"ㅅ",@" ㅆ",@"ㅇ",@"ㅈ",@"ㅉ",@"ㅊ",@"ㅋ",@"ㅌ",@"ㅍ",@"ㅎ", @"A", @"B", @"C", @"D", @"E", @"F", @"G", @"H", @"I", @"J", @"K", @"L", @"M", @"N", @"O", @"P", @"Q", @"R", @"S", @"T", @"U", @"V", @"W", @"X", @"Y", @"Z", nil];
NSMutableArray *object = [[NSMutableArray alloc] init];
NSMutableArray *section = [[NSMutableArray alloc] init];

int lengthOfPeople = (int)CFArrayGetCount(mArrRefPeople);
    NSLog(@"Length of people %d",lengthOfPeople);

int chosungIndex = -1;
int j=-1;

for(int i=0; i<lengthOfPeople; i++) {
    ABRecordRef person = CFArrayGetValueAtIndex(mArrRefPeople, i);

    NSMutableDictionary *dicAddress = [[NSMutableDictionary alloc] init];

    NSNumber *numPersonId = [NSNumber numberWithInt:(int)ABRecordGetRecordID(person)];

    NSString *strName = (NSString *)ABRecordCopyCompositeName(person);
    ABMultiValueRef refEmail = ABRecordCopyValue(person, kABPersonEmailProperty);
    if (refEmail) {
        if (ABMultiValueGetCount(refEmail) > 0) {
            CFStringRef email = ABMultiValueCopyValueAtIndex(refEmail, 0);

            [dicAddress setObject:email ? (NSString *)email : @"" forKey:@"email"];
            if (nil != email) {
                CFRelease(email);
            }

        }
        CFRelease(refEmail);
    }
    if (nil == [dicAddress objectForKey:@"email"]) {
        [dicAddress setObject:@"" forKey:@"email"];
    }

    NSString *strNote = (NSString *)ABRecordCopyValue(person, kABPersonNoteProperty);

    [dicAddress setObject:strNote ? strNote : @"" forKey:@"memo"];
    [strNote release];

    //NSLog(@"%d", [numPersonId integerValue]);
    [dicAddress setObject:numPersonId forKey:@"id"];
    [dicAddress setObject:strName forKey:@"name"];
    [strName release];

    ABMultiValueRef addressValues = ABRecordCopyValue(person, kABPersonPhoneProperty);
    ABMultiValueRef numbers = ABMultiValueCopyArrayOfAllValues(addressValues);
    CFRelease(addressValues);

    NSArray *arrPhone = (NSArray *)numbers;

    if (nil != [arrPhone objectAtIndex:0]) {
        [dicAddress setObject:[arrPhone objectAtIndex:0] forKey:@"hp"];
    } else {
        [dicAddress setObject:@"" forKey:@"hp"];
    }

    [object addObject:dicAddress];
    [dicAddress release];

    if([self chosungIndexWithString:strName] != chosungIndex) {
        chosungIndex = (int)[self chosungIndexWithString:strName];
        if (-1 == j) {
            NSDictionary *dic = [[NSDictionary alloc] initWithObjectsAndKeys:[arrChosung objectAtIndex:chosungIndex], @"chosung", [NSNumber numberWithInt:i+1], @"row", nil];
            [section addObject:dic];
            [dic release];
        } else {
            int prevRow = [[[section objectAtIndex:j] objectForKey:@"row"] intValue];
            NSDictionary *dic = [[NSDictionary alloc] initWithObjectsAndKeys:[arrChosung objectAtIndex:chosungIndex], @"chosung", [NSNumber numberWithInt:i+1-prevRow], @"row", nil];
            [section addObject:dic];
            [dic release];
        }
        j++;
    }
    [arrPhone release];

}
CFRelease(mArrRefPeople);

_lengthOfPeople = lengthOfPeople;
    NSLog(@"Length of people %d",lengthOfPeople);
_arrChosung = arrChosung;

_object = object;

_section = section;

CFRelease(addressBook);

     NSLog(@"Completed getting address"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T03:13:54.347

我会发布一个官方答案，因为这可能有助于在未来节省一些时间。

这里的问题原来是每个不同的模拟器都没有添加联系人。每个版本的 iOS 都有一个单独的模拟器环境。这意味着每个人都有自己的一组应用程序、自己的一组照片和联系人以及自己的一组设置。

已针对 iOS 6.0 模拟器进行了测试。这个模拟器已经填充了联系人。当测试转移到 iOS 5.0 或 5.1 时，一个全新的模拟器正在运行，没有人注意到这个模拟器没有添加任何联系人。假设可以使用相同的联系人。但他们不是。

# python - 从 SQL 查询创建类的实例

> ID：13337629
> 
> 赞同：1
> 
> 时间：2012-11-12T02:26:31.753
> 
> 标签：python, sqlite, instantiation

我有以下课程：

```
class SomeClass:
    def __init__(self, name, date):
        self.name = name
        self.date = date 
```

现在我在另一个模块中有一个函数，它连接到 SQLite 数据库并执行查询：

```
def getEntry(user):
    data = []
    connection = lite.connect(database)                                                                 
    with connection:                                                                 
        cur = connection.cursor()                                                    
        cur.execute("SELECT name, date FROM table WHERE column = ?", [user])
        events = cur.fetchall()                                                      
        # instantiate an instance of `SomeClass`
        return data 
```

那么我将如何创建一个实例`SomeClass`并将其传递`name`给`date`我新创建的实例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T03:11:49.690

由于`fetchall()`返回行列表，您应该能够做到这一点（这应该包括返回多个结果的情况）：

```
for result in events:
    my_instance = SomeClass(result[0], result[1])
    # Do whatever you want to do with the instances, which looks like
    # it may be appending to data
    data.append(my_instance) # Or data.append(SomeClass(result[0], result[1])) 
```

目前无法测试，如果有问题请见谅:)

# wolfram-mathematica - Mathematica 简化共轭表达式

> ID：13337630
> 
> 赞同：1
> 
> 时间：2012-11-12T02:26:43.787
> 
> 标签：wolfram-mathematica, simplification

有没有办法简化这个共轭表达式：

```
expr=d12*Conjugate[C1]*C2 + d12*Conjugate[C2]*C1 + d13*Conjugate[C1]*C3 + d13*Conjugate[C3]*C1 
```

变成类似的东西：

```
2 d12 (Re[C1*Conjugate[C2]]) + 2 d13 (Re[C1*Conjugate[C3]]) 
```

一般来说，Mathematica 如何确定一个表达式比另一个更简单？有没有办法在其简化过程中添加一些个性化规则？例如，我们可以告诉 Mathematica 我们更喜欢`2*Re[C1*Conjugate[C2]]`吗`C1*Conjugate[C2]+C2*Conjugate[C1]`？谢谢。

*更新*：

感谢您的建议。`ComplexExpand`可以将其扩展到实部和虚部，但似乎仍然无法简化为首选形式：

```
In: Simplify[ComplexExpand[expr, {C1, C2, C3}]]
Out: 2 (Im[C1] (d12 Im[C2] + d13 Im[C3]) + Re[C1] (d12 Re[C2] + d13 Re[C3])) 
```

我尝试了这样的 TransformationFunctions 函数，但它不起作用：

```
In: t = # /. (Im[C1] Im[C2] + Re[C1] Re[C2] -> 1/2 Re[C1\[Conjugate] C2]) &;    
In: Simplify[ComplexExpand[expr, {C1, C2, C3}], TransformationFunctions -> {Automatic, t}]
Out: 2 (Im[C1] (d12 Im[C2] + d13 Im[C3]) + Re[C1] (d12 Re[C2] + d13 Re[C3])) 
```

我做错了吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T07:06:54.927

实际上它简化为更小的表达式

```
expr=d12*Conjugate[C1]*C2+d12*Conjugate[C2]*C1+d13*Conjugate[C1]*C3 + 
     d13*Conjugate[C3]*C1;
Simplify[ComplexExpand[expr]] 
```

给

```
2 C1 (C2 d12 + C3 d13) 
```

*Mathematica 如何确定一个表达式比另一个表达式更简单？有没有办法在其简化过程中添加一些个性化规则*

您可以使用该`ComplexityFunction`选项来`Simplify`. 默认是`Automatic`，我认为这使用叶子计数来决定。您还可以使用该`TransformationFunctions`选项来`Simplify`提供您自己的功能来应用。查看帮助。

[http://reference.wolfram.com/mathematica/ref/ComplexityFunction.html](http://reference.wolfram.com/mathematica/ref/ComplexityFunction.html)

[http://reference.wolfram.com/mathematica/ref/TransformationFunctions.html](http://reference.wolfram.com/mathematica/ref/TransformationFunctions.html)

[http://reference.wolfram.com/mathematica/ref/LeafCount.html](http://reference.wolfram.com/mathematica/ref/LeafCount.html)

# ios - MFMessageComposeViewControllerDelegate 什么时候返回 MessageComposeResultFailed？

> ID：13337631
> 
> 赞同：2
> 
> 时间：2012-11-12T02:27:01.227
> 
> 标签：ios

我创建了一个 In-App SMS 应用程序，我可以发送 SMS/iMessage。我已经实现了 MFMessageComposeViewControllerDelegate，但是我有一个问题：当委托的结果返回 MessageComposeResultFailed 时？我尝试了很多无效输入，但结果也返回 MessageComposeResultSent。

谁能帮我回答这个问题？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T02:33:25.687

我相信当您的 iPhone 突然失去与 Wifi/Cellular 的连接时，您的 SMS 将无法发送并返回`MessageComposeResultFailed`。

# c - 从 2 位分支预测器到 8 位预测器

> ID：13337633
> 
> 赞同：2
> 
> 时间：2012-11-12T02:27:25.827
> 
> 标签：c, architecture, parallel-processing

我有一个项目将“SimpleScalar”中的 2 位分支预测器转换为 8 位分支预测器。这意味着我需要将 2 位预测器的源代码从“SimpleScalar”更改为像 8 位预测器一样工作。

我知道预测器是如何工作的，但我不知道如何使用 c 语言实现分支预测器。向我推荐一些 8 位分支预测器的实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T04:48:19.653

[这组幻灯片](http://www.cs.washington.edu/education/courses/csep548/06au/lectures/branchPred.pdf)很好地描述了 2 位分支预测。将其扩展到 8 位（我假设）意味着我们被允许使用 256 个状态的状态机，而不是 2 位情况下的 4 个来决定发生了什么。如果我们以逻辑方式扩展 4 状态案例，将有 128 个状态，我们预测分支将被采用，128 个状态不被采用……一种滞后。

我假设您正在处理器模拟器或模拟器中编程。你没说。C 代码只需要跟踪最近做出的 128 次决策，并且只有在 128 次猜测错误时才切换到备用预测：

```
static int stickiness = 128;          // assume 128 states of knowledge that the default branch will occur
static int predicted_branch = 1;      // default prediction is (say) branch taken

if (simulated_branch_condition_is_true != predicted_branch) {
  if (--stickiness <= 0) {
    predicted_branch = simulated_branch_condition_is_true;
    stickiness = 128;
  }
}
// Now simulate the predicted_branch. If it's wrong, we will later simulate a pipeline, flush etc. 
```

没有更多信息，这是我能做的最好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T21:46:36.203

如果我在 SimpleScalar 中的“2 位分支预测器”在[两级自适应预测器](http://en.wikipedia.org/wiki/Branch_predictor)的实现中没有弄错，现在我不确定我是否理解“8 位分支预测器”的意思，神经分支预测器的概念非常有前途。大多数最先进的分支预测器都使用感知器预测器。[您可能会发现查看基于带有感知器的动态分支预测](http://www.cs.utexas.edu/~lin/papers/hpca01.pdf)的 C 语言实现很有用，该实现可在[https://github.com/sumitdhoble/Branch-Prediction](https://github.com/sumitdhoble/Branch-Prediction)上作为源代码获得

# asp.net - asp.NET MVC 丢失引用字段的值

> ID：13337634
> 
> 赞同：1
> 
> 时间：2012-11-12T02:27:33.313
> 
> 标签：asp.net, entity-framework-4, asp.net-mvc-4, foreign-keys

我有一堂课

```
public partial class Advertisement
{
    public int AdvertisementId { get; set; }
    public string Description { get; set; }
    public City CityIdFrom { get; set; }
    public City CityIdTo { get; set; }
    public int Weight { get; set; }
} 
```

代表表格广告。一流的城市也是如此

```
public class City
{
    public Int32 CityId { get; set; }
    public string Name { get; set; }
} 
```

现在我有一个名为 View1Controller 的视图控制器，它有

```
DbConnection db = new DbConnection();

public ActionResult Index()
{
    var query = from item in db.Advertisements.AsEnumerable() select item;

    return View(query);
} 
```

最后还有一个 View1.cshtml 文件

```
@model IEnumerable<MvcApplication1.Models.Advertisement>

@{
    ViewBag.Title = "View1";
}

<h2>View1</h2>

<table>
@foreach(var item in Model)
{
    <tr>
        <td>@item.Description</td>
        <td>@item.CityIdFrom</td>
    </tr>
}
</table> 
```

我查看了 SQL Profiler，生成的查询看起来

```
SELECT 
[Extent1].[AdvertisementId] AS [AdvertisementId], 
[Extent1].[Description] AS [Description], 
[Extent1].[Weight] AS [Weight], 
[Extent1].[CityIdFrom_CityId] AS [CityIdFrom_CityId], 
[Extent1].[CityIdTo_CityId] AS [CityIdTo_CityId]
FROM [dbo].[Advertisements] AS [Extent1] 
```

并执行我得到的查询：

```
2   None    5000    1   2
3   Test    1000    3   4 
```

但是，当查询被命中时，CityIdFrom 和 CityIdTo 出于某种原因都为空。因此结果表看起来

```
None 
Test 
```

而不是预期

```
None 1
Test 3 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T02:32:41.223

你要么需要为 CityFrom 和 CityTo 添加一个 Include，要么你可以使这些引用的实体成为虚拟的。选项 1（包含）避免了在 ORM 中常见的 select n+1 问题。

```
var query = db.Advertisements.Include("CityIdFrom").Include("CityIdTo").AsEnumerable();
return View(query); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T02:48:46.227

如果您使用的是实体框架，则需要将属性设为虚拟。

```
public partial class Advertisement
{
    public int AdvertisementId { get; set; }
    public string Description { get; set; }
    public virtual City CityIdFrom { get; set; }
    public virtual City CityIdTo { get; set; }
    public int Weight { get; set; }
} 
```

# sql - Oracle：SQL 选择带有时间戳的日期

> ID：13337635
> 
> 赞同：6
> 
> 时间：2012-11-12T02:27:56.073
> 
> 标签：sql, oracle

我有以下数据：

```
SQL> select * from booking_session;

BK_ID|BK_DATE
-----|-------------------------
    1|18-MAR-12 10.00.00.000000
    2|18-MAR-12 10.25.00.000000
    3|18-MAR-12 10.30.00.000000
    4|18-MAR-12 10.35.00.000000
    5|18-MAR-12 10.40.00.000000 
```

我正在尝试编写一个`sql`查询来选择与某个日期匹配的所有记录，但是我使用该`BK_DATE`字段的时间戳，无论我尝试什么，我的查询都不会产生任何结果。

**SQL**：我尝试了以下查询，但没有产生任何结果

1.

```
select * 
from booking_session
where bk_date = to_date('18-03-2012', 'dd-mm-yyyy'); 
```

2.

```
select * 
from booking_session
where bk_date = to_timestamp('18-03-2012', 'dd-mm-yyyy'); 
```

3.

```
select * 
from booking_session
where bk_date = to_date('18-MAR-2012', 'dd-mm-yyyy'); 
```

它仅在我设置整个日期值时才有效；

```
select * 
from booking_session
WHERE bk_date = '18-MAR-12 11.00.00.000000';

CREATE TABLE BOOKING_SESSION(
  BK_ID NUMBER NOT NULL,
  BK_DATE TIMESTAMP,
  BK_BOOKER NUMBER,
  BK_CUSTOMER NUMBER,
  BK_TREATMENT NUMBER,
  T_SESSION_DATETIME TIMESTAMP,
  STAFFAPPOINTED NUMBER,
  BK_ROOM NUMBER
);

INSERT INTO BOOKING_SESSION VALUES (
  1,
  TO_TIMESTAMP('18/03/2012 10:00', 'DD/MM/YYYY HH24:MI'),
  1,
  1,
  1,
  TO_TIMESTAMP('20/03/2012 11:00', 'DD/MM/YYYY HH24:MI'),2,1
); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-12T02:35:23.687

您可以通过执行范围来指定一整天，如下所示：

```
WHERE bk_date >= TO_DATE('2012-03-18', 'YYYY-MM-DD')
AND bk_date <  TO_DATE('2012-03-19', 'YYYY-MM-DD') 
```

更简单地说，您可以使用 TRUNC：

```
WHERE TRUNC(bk_date) = TO_DATE('2012-03-18', 'YYYY-MM-DD') 
```

不带参数的 TRUNC 从 DATE 中删除小时、分钟和秒。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-12T05:16:50.240

尼古拉斯·克拉斯诺夫提供的答案

```
SELECT *
FROM BOOKING_SESSION
WHERE TO_CHAR(T_SESSION_DATETIME, 'DD-MM-YYYY') ='20-03-2012'; 
```

# c# - 检测 Web 套接字连接断开

> ID：13337643
> 
> 赞同：0
> 
> 时间：2012-11-12T02:29:52.197
> 
> 标签：c#, websocket, windows-8, winjs

在我的 Windows 8 JS 应用程序中，我有一个这样定义的 Web 套接字对象：

```
var webSocket = new Windows.Networking.Sockets.MessageWebSocket();
webSocket.control.messageType = Windows.Networking.Sockets.SocketMessageType.utf8;
webSocket.onmessagereceived = that._onMessageReceived;
webSocket.onclosed = that._onClosed; 
```

我使用连接`webSocket.connectAsync(uri).done(/* ... */)`，那部分工作正常。

如果我在另一端停止我的 Web 服务器，我的应用程序不会收到通知并认为连接仍然存在。“关闭”事件永远不会触发，并且似乎没有任何“错误”事件。

有没有办法监控连接状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T09:35:07.800

弄清楚了。当连接失败时，messagereceived 事件实际上会触发。在处理程序内部，您可以在数据读取器操作周围使用 try catch 块。

```
try {
    var dataReader = args.getDataReader();
    var msg = dataReader.readString(dataReader.unconsumedBufferLength);
} catch (ex) {
    var error = Windows.Networking.Sockets.SocketError.getStatus(ex.number);
    // do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T00:43:26.287

这是一个特定的 Windows 8 问题吗？我已经测试了以下在 Windows 7、OSX 和 Ubuntu 上的工作（使用相当新的 Firefox、Safari 和 Chrome 版本）：

```
var s = new WebSocket("ws://"+window.location.hostname+":9876");

s.onopen = function(e) {
    console.log("opened socket for unidrive log");
}
s.onclose = function(e) {
    console.log("closed");
}
s.onmessage = function(e) {
    console.log("got message: " + e.data);
} 
```

如果 web 服务器一开始没有运行，onclose 事件会立即触发，或者在终止服务器时触发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T12:11:57.653

感谢您提供此信息 - 非常奇怪为什么套接字不引发关闭事件，但它工作得很好。

为 C# 开发人员提供的另一个信息：要确定正确的异常错误状态，您必须调用**WebSocketError** .GetStatus(hresult) 而不是**SocketError** .GetStatus(hresult) 方法。

```
try
{
    using (DataReader reader = e.GetDataReader())
    {
        reader.UnicodeEncoding = Windows.Storage.Streams.UnicodeEncoding.Utf8;
        string rawMessage = reader.ReadString(reader.UnconsumedBufferLength);

        // Do something with the message...
    }
}
catch (Exception ex)
{
    var errorStatus = Windows.Networking.Sockets.WebSocketError.GetStatus(ex.HResult);
    if (errorStatus == WebErrorStatus.ConnectionAborted)
    {
        // Handle the connection-abort...
    }
} 
```

# css - 在固定侧边栏内滚动

> ID：13337646
> 
> 赞同：60
> 
> 时间：2012-11-12T02:30:11.173
> 
> 标签：css, scroll

我的网站左侧有一个固定的侧边栏，其中包含太多内容而无法在屏幕上显示的内容。如何使该内容可滚动，同时仍允许右侧可滚动？

我认为一个简单的`overflow-y: scroll;`就足够了。似乎我需要在侧边栏上有一个最大高度，但是将最大高度设置为 100% 没有任何作用。我确信这是一个简单的代码模式，但可惜的是，我的 CSS 技能今天已经抛弃了我。

这里的简单示例：http: [//jsfiddle.net/tvysB/1/](http://jsfiddle.net/tvysB/1/)

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2012-11-12T02:33:11.640

将`top`and设置`bottom`为`0`，以便侧边栏与视口的高度完全相同：

```
#leftCol {
    position: fixed;
    width: 150px;
    overflow-y: scroll;
    top: 0;
    bottom: 0;
} 
```

这是你的小提琴：http: [//jsfiddle.net/tvysB/2/](http://jsfiddle.net/tvysB/2/)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2017-09-27T13:25:16.810

我遇到了同样的问题并使用以下方法修复了它：

```
.WhateverYourNavIs {
      max-height: calc(100vh - 9rem);
      overflow-y: auto;
 } 
```

这会以响应用户浏览器高度的方式设置导航的最大高度，然后在需要时为其滚动。

# javascript - ctrl+c 来自 css 的“内容”

> ID：13337650
> 
> 赞同：2
> 
> 时间：2012-11-12T02:30:38.393
> 
> 标签：javascript, html, css, copy-paste

尝试用小 JS 创建一个灵活的邮件列表：

```
.email_item::after {
     content: ", ";
} 
```

导致：

```
foo@mail.com, foo2@mail.com 
```

使用 ctrl+c 和 ctrl+v 复制返回：

```
foo@mail.comfoo2@mail.com 
```

我将不得不使用JS对吗？或者那里有优化天才？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T02:34:03.487

是的，生成的内容`:after`和`:before`仅用于显示目的。
它不会改变 DOM，所以它是不可选择的..

为什么使用 JS 而不是直接在 HTML 中添加逗号？

引用[有关的规格`content`](http://www.w3.org/TR/CSS21/generate.html#content)

> 生成的内容不会改变文档树。特别是，它不会被反馈给文档语言处理器（例如，用于重新解析）。

# ios - PanoramaGL ARC 问题

> ID：13337653
> 
> 赞同：0
> 
> 时间：2012-11-12T02:30:57.577
> 
> 标签：ios, automatic-ref-counting, panoramas

我在尝试编译 PLPanoramaBase 库时遇到了编译问题。我解决了它并将我的解决方案发布到谷歌代码。但是仍然有人通过电子邮件问我，所以我决定在这里写下我的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T02:30:57.577

解决方案很简单：

1.  在项目设置中使用 -fno-objc-arc
2.  将一些声明从 PLPanoramaBase.h 移动到 PLPanoramaBase.m

像这样：

@interface PLPanoramaBase() { PLTexture **previewTextures; PLTexture **纹理；}

# java - 检查 jdk 可用性

> ID：13337655
> 
> 赞同：0
> 
> 时间：2012-11-12T02:31:13.663
> 
> 标签：java

如何手动检查我的机器上是否安装了 jdk，如果是，是什么版本？

如果我在 Windows 7 中有 jdk，现在我在同一台机器上单独安装了 Windows 8，是否需要重新安装 jdk？或者我可以重复使用它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T02:50:44.737

当您在 Windows 上安装 java 时，默认情况下它可以在以下位置之一中运行：

```
C:\Program Files (x86)\Java
C:\Program Files\Java 
```

如果您查看这两个位置，您将准确看到安装了哪些 JDK 和 JRE。

如果你安装在别的地方不记得了，你仍然可以搜索 java.exe

如果“我可以使用它”，您的意思是与 Eclipse 或 Netbeans 等 IDE 一起使用，那么答案是肯定的。他们可以使用 JDK 文件，无论它们在哪里，无论它是否已安装在操作系统上。

`java -version`只会告诉您路径上的 java 版本，但情况并非总是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T02:49:25.953

如果你有两个 Windows 版本和 java 安装在一个可以共享的地方，你可以重复使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T02:38:58.863

在cmd窗口类型

> 爪哇

如果您看到 java 使用信息，那么您已经安装了 java。

> java版本

显示你的java的当前版本。

您可以在 windows 8 中重用它 windows 7 java。

# powershell - 从 powershell 脚本调用自定义 C# dll 的方法

> ID：13337656
> 
> 赞同：3
> 
> 时间：2012-11-12T02:32:15.777
> 
> 标签：powershell

我是 PowerShell 的新手。我正在尝试调用我的自定义 C# dll 的方法。由于多种原因，我失败了。

这是我的代码：

```
[System.Reflection.assembly]::LoadFile("E:\Mulukutla\Migration.dll")

$MyClass = New-Object DataMigration

$MyClass.MigrateData("$from\$name","$to\$name") 
```

## 我使用的 C# 类库是在 4.0 和 powershell v2.0 中构建的

使用“1”参数调用“LoadFile”的异常：“此程序集由比当前加载的运行时更新的运行时构建，无法加载。（来自 HRESULT 的异常：0x8013101B）”在 E:\Mulukutla\myCodev1.ps1 :3 char:39 + [System.Reflection.assembly]::LoadFile <<<< ("E:\Mulukutla\Migration.dll") + CategoryInfo : NotSpecified: (:) [], MethodInvocationException + FullyQualifiedErrorId : DotNetMethodException

新对象：找不到类型 [DataMigration]：确保已加载包含此类型的程序集。在 E:\mulukutla\myCodev1.ps1:4 char:21 + $MyClass= New-Object <<<< DataMigration + CategoryInfo : InvalidType: (:) [New-Object], PSArgumentException

## + FullyQualifiedErrorId : TypeNotFound,Microsoft.PowerShell.Commands.NewObjectCommand

请帮助我纠正，我在做什么错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T04:26:18.743

通过以下方式从 cmd 调用 powershell：

```
set COMPLUS_Version=v4.0.30319
powershell 
```

或者设置'C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe.config'的内容如下（如果不存在，可能需要创建此文件）：

```
<?xml version="1.0" encoding="utf-8" ?> 
<configuration> 
    <startup useLegacyV2RuntimeActivationPolicy="true"> 
        <supportedRuntime version="v4.0" />    
    </startup> 
</configuration> 
```

# algorithm - 在 Nlg(N) 中计算 res[i+j] = a[i]*b[j]

> ID：13337666
> 
> 赞同：4
> 
> 时间：2012-11-12T02:33:30.630
> 
> 标签：algorithm, fft, convolution

> **可能重复：**
> [快速卷积算法](https://stackoverflow.com/questions/6042833/fast-convolution-algorithm)

我有两个长度为 N 的数组 a 和 b。我想将结果数组计算为

```
res[i+j] += a[i]*b[j] 
```

是否可以使用 FFT 或类似的东西在时间上比 N^2 更快地计算出来。我已经看到了这个问题[1D Fast Convolution without FFT](https://stackoverflow.com/questions/7237907/1d-fast-convolution-without-fft)但我不确定如何使用 FFT 来做到这一点。

```
EG: A=[1,2,3],B[2,4,6]
res[3] = A[1]*B[2]+A[2]*B[1] 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T02:52:41.597

据我了解，您想要 FFT 算法。[这里](http://www.codeproject.com/Articles/9388/How-to-implement-the-FFT-algorithm)你有这个算法的实现，以及如何实现 FFT 算法的一个很好的解释。

# java - 使用数组按姓名和分数对学生进行排序

> ID：13337667
> 
> 赞同：2
> 
> 时间：2012-11-12T02:33:43.770
> 
> 标签：java, arrays, sorting, comparable, compareto

我昨晚发布了一个关于此的问题，但仍在苦苦挣扎。我需要首先按姓名（以这种格式姓氏，名字），然后按考试成绩对文本文件中的学生列表进行排序。我不知道文本文件中有多少学生，除了少于 100 个。我必须使用 compareTo 方法（我认为我做对了）和一个数组（我认为我没有m 正确使用它）。我已经连续几个小时一直在搞砸这个问题，但我似乎不明白。教科书似乎对我没有任何帮助。如何让我的应用程序类打印排序的学生姓名/成绩？

其他规范是获得分数的平均值，并在任何低于平均水平的分数旁边发表评论。但是，在我理顺排序之后，我可以继续工作。

这是我的代码...

```
 package CH11AS8App;

 import java.io.FileReader;
 import java.util.Arrays;
 import java.util.Comparator;
 import java.util.Scanner;

 public class kjkkkkkkkkkkk {

 public static void main( String[] args ) throws Exception {
    // TODO Auto-generated method stub

        Scanner aScanner = new Scanner(
                                 new FileReader("src//chapt11//ch11AS8data.txt"));

        int numOfStudents = 100;
        Student[] studentArray = new Student[numOfStudents];
        Scanner sc = null;

        int counter = 0;
        while (aScanner.hasNext()) {
            sc = new Scanner(aScanner.nextLine());
            String lastName = sc.next();
            String firstName = sc.next();
            int score = sc.nextInt();

            studentArray[counter++] = new Student(lastName, firstName, score);

            studentArray[counter] = new Student(lastName, firstName, score); 

            int average= 0;
            int sum = 0;
            sum += score; 
             if (counter < numOfStudents); 
            average = sum / counter;
            if (score <= (average - 10)) {
             System.out.println("Score 10 points under average");
            System.out.println("Student Average:" + average);
        }

            sc.close();

            // Display Welcome Message
            System.out.println("Welcome to the Student Scores Application.\n");

            //Sort Names
            Arrays.sort(studentArray,0,counter, new Comparator<Student>(){
                @Override
                public int compare(Student s1, Student s2) {
                    return s1.getLastName().compareTo(s2.getLastName());
                }
            });

            System.out.println();
            System.out.println("Student list by name:");
            System.out.println();
            for(int j = 0; j < counter; j++){  
                System.out.println(studentArray[j]);

            }

            //Sort Scores
            Arrays.sort(studentArray,0,counter, new Comparator<Student>(){
                @Override
                public int compare(Student s1, Student s2) {
                    return Integer.valueOf(s2.getScore()).
                                       compareTo(Integer.valueOf(s1.getScore()));
                }
            });

            System.out.println();
            System.out.println();
            System.out.println("Student list by score:");
            System.out.println();
            for(int j = 0; j < counter; j++){  
                System.out.println(studentArray[j]);

            }

            //Close Scanner
            aScanner.close(); 
```

}

```
static class Student implements Comparable<Student> {

    //Instance Variables
    private String firstName;
    private String lastName;
    private int score;

    //Getters & Setters
    public Student( String firstName, String lastName, int score ) {
        this.firstName = firstName;
        this.score = score;
        this.lastName = lastName;
    }
    public int getScore() {
        return score;
    }

    public String getFirstName() {
        return firstName;
    }

    public String getLastName() {
        return lastName;
    }

    //CompareTo Method
    @Override
    public int compareTo( Student s ) {

        if( !firstName.equalsIgnoreCase( s.firstName ) ) {

            return firstName.compareToIgnoreCase( s.firstName );
        }

        if( !lastName.equalsIgnoreCase( s.lastName ) ) {

            return lastName.compareToIgnoreCase( s.lastName );
        }
            return (new Integer(score)).compareTo((new Integer(s.score)));
    }
        @Override public String toString(){ return lastName + ", "+ firstName        +" : "+score; }

    }

 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T02:42:37.147

您的错误在`compareTo()`方法的最后一行：

改变

```
return examScore = s.examScore; 
```

到

```
return examScore - s.examScore; 
```

您想返回差异，而不是设置实例变量！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T02:53:15.670

我认为您应该更改 compareTo 中的最后一行，如下所示：

```
 return (new Integer(examScore)).compareTo((new Integer(s.examScore)); 
```

或者

```
 return Integer.valueOf(examScore).compareTo(Integer.valueOf(s.examScore)); 
```

这将比较两个值并相应地返回。

**编辑：**

您的程序中的一些更正：

1.  在你的类中添加一个`toString()`方法：`Student`

    @Override public String toString(){ return firstName + " "+ lastName +" : "+examScore; }

2.  更新`main()`应用程序中的方法如下：

    ```
    public static void main(String[] args) throws Exception {

        Scanner aScanner = new Scanner(
                               new FileReader("src//chapt11//ch11AS8data.txt"));

        System.out.println("Welcome to the Student Scores Application.\n");

        int nStudent = 100;
        Student[] studentArray = new Student[nStudent];
        Scanner lineScanner = null;

        int counter = 0;
        while (aScanner.hasNext()) {
            lineScanner = new Scanner(aScanner.nextLine());
            String lastName = lineScanner.next();
            String firstName = lineScanner.next();
            int examScore = lineScanner.nextInt();
            System.out.println("Student " + counter + " " + firstName + " "
                    + lastName + " " + +examScore);

            studentArray[counter++]=new Student(lastName, firstName, examScore);
            lineScanner.close();
        }

        for(int j = 0; j < counter; j++){  
            System.out.println(studentArray[j]);
        }

        //sort based on first name
        Arrays.sort(studentArray,0,counter, new Comparator<Student>(){
            @Override
            public int compare(Student s1, Student s2) {
                return s1.getFirstName().compareTo(s2.getFirstName());
            }
        });
        System.out.println("Students sorted by first name in ascending order");
        for(int j = 0; j < counter; j++){  
            System.out.println(studentArray[j]);
        }

        //sort based on score
        Arrays.sort(studentArray,0,counter, new Comparator<Student>(){
            @Override
            public int compare(Student s1, Student s2) {
                return Integer.valueOf(s1.getExamScore()).
                                   compareTo(Integer.valueOf(s2.getExamScore()));
            }
        });
        System.out.println("Students sorted by score in ascending order");
        for(int j = 0; j < counter; j++){  
            System.out.println(studentArray[j]);
        }

        //To compute the average:
        double sum = 0.0;
        for(int j = 0; j < counter; j++){  
            sum+=studentArray[j].getExamScore();
        }
        double average = (sum*1.0)/counter;
        System.out.println("Average Score = "+average );

        aScanner.close();
    } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T03:59:42.323

因为这是家庭作业，所以我没有给你完整的答案……但这是你应该努力的总体思路……

```
import java.io.FileReader;
import java.util.Scanner;

public class App {

    public static void main( String[] args ) throws Exception {
        // TODO Auto-generated method stub

        Scanner aScanner = new Scanner( new FileReader( "src/scores.txt" ) );

        System.out.println( "Welcome to the Student Scores Application." );
        System.out.println();

        Student[] studentArray;

        String lastName;
        String firstName;
        int examScore = 0;
        double average = 0;

        int nStudent = 100;
        studentArray = new Student[nStudent];

        int counter = 0;

        while( aScanner.hasNext() ) {

            lastName = aScanner.next();
            firstName = aScanner.next();
            examScore = aScanner.nextInt();

            studentArray[counter] = new Student( lastName, firstName, examScore );

            System.out.println( "Student " + studentArray[counter].getFirstName() + " " +  studentArray[counter].getLastName() + "'s " + "Test Score is :" + studentArray[counter].getExamScore() );
            ++counter;
            if( counter >= nStudent ) {
                break;
            }
        }
    }

    static class Student implements Comparable<Student> {

        private String firstName;
        private String lastName;
        private int examScore;

        public Student( String firstName, String lastName, int examScore ) {
            this.firstName = firstName;
            this.examScore = examScore;
            this.lastName = lastName;
        }

        // Get & Set Methods
        public int getExamScore() {
            return examScore;
        }

        public String getFirstName() {
            return firstName;
        }

        public String getLastName() {
            return lastName;
        }

        @Override
        public int compareTo( Student s ) {

            if( !lastName.equalsIgnoreCase( s.lastName ) ) {

                return lastName.compareToIgnoreCase( s.lastName );
            }

            if( !firstName.equalsIgnoreCase( s.firstName ) ) {

                return firstName.compareToIgnoreCase( s.firstName );

            }

            return examScore - s.examScore;

        }

    }

} 
```

# css - 如何使悬停状态 div 相对于个人 而不是 容器？

> ID：13337674
> 
> 赞同：0
> 
> 时间：2012-11-12T02:35:09.833
> 
> 标签：css, hover, position

我有几个`<li>`具有该`display: inline`属性的，因此它们彼此相邻排列。

这些`<li>`包含图像，因此效果是很多缩略图大小的图像并排排列。

将鼠标悬停在图像上时，我设置了一个显示隐藏 div 内容的 css 属性。

这个 div 有样式并出现在图像上方，向左偏移 50 像素和顶部 -200 像素（想想工具提示样式的定位和显示）。

```
#information {
    display: none;
}

ul li:hover #information {
    display:block;
    position: absolute;
    background:#FFFFFF;
    color: #000000;
    border: 1px solid #CCCCCC;
    width: 190px;
    height: 250px;
    left: 50px;
    top: -200px;
    overflow: hidden;
} 
```

我想要的行为是悬停状态 div 偏移量是相对于图像，即个人`<li>`。

我目前的行为是悬停状态 div 偏移量相对于所有`<li>`'s 的容器。

在上面的代码示例中，您可以看到悬停状态 div 位置是绝对的，我确实将位置设置为相对，但是当悬停时这会导致其他`<li>`人改变他们的位置（这可能是因为悬停状态 div 必须有一个`display: block`属性来更改原始`display: hidden`属性）并且悬停状态 div 仍然相对于容器而不是个人显示`<li>`。当我将位置设置为绝对位置时，`<li>`它们会保留它们的位置。

所以我的问题是我如何使悬停状态 div 相对于个人`<li>`而不是容器的偏移`<li>`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T02:35:09.833

解决方案是在 ul li 中添加 a `position: relative`，在悬停状态 div 中添加 2 的 z-index。

# iphone - 在 App 上使用 iOS6 消息访问配置文件

> ID：13337675
> 
> 赞同：3
> 
> 时间：2012-11-12T02:35:10.100
> 
> 标签：iphone, ios, map, bluetooth, sms

我想为 iPad Mini 创建一个应用程序，该应用程序使用蓝牙 4.0 连接到 iPhone，并访问它的消息，当我收到电子邮件、SMS 或 iMessage 时显示在屏幕上。

我认为我可以使用消息访问配置文件 (MAP)，但我没有找到这样做的方法。

有人可以告诉我从哪里开始吗？

我的第一次尝试是使用 CoreTelephony 获取 SMS 通知，但由于 iOS 5（据我所知）消息没有随通知一起发送，并且由于我的 iPhone 没有越狱，我无法访问 SMS.db阅读它，既不使用私有框架 ChatKit。

我不会在appstore上发布这个应用程序，它是供个人使用和测试的。

# jsf - JSF Tomcat 容器托管身份验证以及额外的登录按钮

> ID：13337679
> 
> 赞同：1
> 
> 时间：2012-11-12T02:35:38.470
> 
> 标签：jsf, authentication, tomcat, login, container-managed

我目前正在扩展我的 JSF 网站。我使用 Tomcat 容器管理的身份验证机制（效果很好，用户在访问保护区之前被强制登录），现在我想提供一个额外的登录按钮。

使用登录按钮，我希望用户获得“LOGGED_IN_CUST”凭据，以便网站在到达安全页面（如 orderProducts.xhtml）之前提供其他功能（如更改/添加/删除地址）

例子：

当前站点：index.xhtml
如果单击右上角的登录链接，将显示 login.xhtml 页面：

```
 <form action="j_security_check">
        <h:panelGrid columns="2" bgcolor="#eff5fa" cellspacing="5"
            frame="box" styleClass="center">
            <h:outputLabel value="User name:" />
            <h:inputText id="j_username" tabindex="1" />
            <h:outputLabel value="Password:" />
            <h:inputSecret id="j_password" />
            <h:outputLabel value="" />
            <h:commandButton id="login" value="Login" />
        </h:panelGrid>
    </form> 
```

使用正确的用户凭据并按下登录按钮后，我收到以下错误：

```
HTTP Status 400 - Invalid direct reference to form login page
message: Invalid direct reference to form login page
description: The request sent by the client was syntactically incorrect. 
```

是否有使用附加登录链接登录的解决方案。而在客户成功登录后，之前显示的站点又是活跃的吗？（在本例中为 index.xhtml）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T09:18:10.063

我已经重建了应用程序。`"j_security_check"`我创建了一个`commandButton`调用以下 doLogin 方法的常规而不是具有操作属性的登录表单

```
public void doLogin(ActionEvent e) throws IOException {
    FacesContext context = FacesContext.getCurrentInstance();
    HttpServletRequest request = (HttpServletRequest) context
            .getExternalContext().getRequest();

    try {
        // Try to login customer via container management
        request.login(eMail, password);

        /*
         * In case that the Login link was clicked, then the variable
         * "requestedURI" is null ! In that case we can redirect the
         * customer directly to his customerOverview site. A user with role
         * ADMIN will be redirected to systemInfo.xhtml and a user with role
         * CUST is redirected to customerOverview.xhtml.
         */
        if(requestedURI == null){
            if(request.isUserInRole(ROLE_ADMIN)){
                requestedURI = BASE_NAME+"/faces/sections/admin/systemInfo.xhtml";
            }
            else if(request.isUserInRole(ROLE_CUST)){
                requestedURI = BASE_NAME+"/faces/sections/customer/customerOverview.xhtml";
            }
            else{
                requestedURI = BASE_URL;
            }
        }

        /*
         * If everything worked well, redirect the customer to the desired
         * page
         */
        context.getExternalContext().redirect(requestedURI);
    } catch (ServletException se) {
        context.addMessage(null, new FacesMessage(Internationalization.getLoginFailed()));
    }
} 
```

这个解决方案对我来说很好:)

# javascript - 我需要使用 Regex 和 Javascript 匹配 url 路径的某个部分

> ID：13337682
> 
> 赞同：0
> 
> 时间：2012-11-12T02:36:28.187
> 
> 标签：javascript, regex, expression

我有以下链接：

sitename.com/Default.aspx?PageID=13078494

我想获取以下内容：“PageID=13078494”。这是我到目前为止所拥有的：

```
var url = "sitename.com/Default.aspx?PageID=13078494";    
urlmatch = url.match([PageID=13078494]);
urlmatch[0]; 
```

这是我想要做的正确表达吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T02:46:54.603

```
var myregexp = /[?&]PageID=(\d+)/i;
var match = myregexp.exec(url);
if (match != null) {
    //This is if your match it successful
    result = match[1];
} else {
    //This is if url doesn't match
    result = "";
} 
```

无论 PageID 在哪里，这个都可以工作。它会匹配

*   sitename.com/Default.aspx?PageID=13078494
*   任何东西.org/Default.aspx?PageID=13078494
*   sitename.com/Default.aspx?foo=bar&PageID=13078494
*   sitename.com/Default.html?foo=bar&PageID=13078494&bar=foo
*   Default.html?foo=bar&PageID=13078494&bar=foo

重要的是，它不匹配

*   sitename.com/Default.aspx?NotThePageID=13078494

或者没有检查，简单地说 `url.match(/[?&]PageID=(\d+)/i)[1]`，但我建议不要这样做，除非你确定它总是匹配的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T02:38:05.917

您的正则表达式及其语法是错误的。

更好的方法是根本不使用正则表达式。改用[`.split()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)：

```
var urlmatch = url.split('?')[1]; 
```

这是小提琴：http: [//jsfiddle.net/qpXNU/](http://jsfiddle.net/qpXNU/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T02:40:36.150

尝试以下正则表达式，它将提取 PageID 并将其放在第一个匹配组中：

```
var url = "sitename.com/Default.aspx?PageID=13078494";
urlmatch = url.match(/PageID=(\d+)/);
alert(urlmatch[1]);​ // 13078494 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T04:04:11.817

在处理 URL 时，浏览器非常好。

您应该将字符串转换为实际的 URL，如下所示：

```
var toURL = function (href) {
    var a = document.createElement('a');
    a.href = href;
    return a;
}; 
```

现在使用浏览器的[内置解析功能](http://www.w3.org/TR/url/#the-url-decomposition-idl-attributes)：

```
var url = toURL('sitename.com/Default.aspx?PageID=13078494');
alert(url.search); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T02:38:56.317

如果您匹配特定的值，那很好，否则使用下面来匹配 pageID 中的任意位数：

```
 /PageID=\d+/ 
```

作为：

```
 var url = "sitename.com/Default.aspx?PageID=13078494";
    var urlmatch = url.match(/PageID=\d+/);
    alert(urlmatch[0]); 
```

或者要匹配 pageID 中的 8 个精确数字，请使用：

```
 /PageID=\d{8}/ 
```

作为：

```
 var url = "sitename.com/Default.aspx?PageID=13078494";
    var urlmatch = url.match(/PageID=\d{8}/);
    alert(urlmatch[0]); 
```

# mongoose - Mongoose.js：如何实现创建或更新？

> ID：13337685
> 
> 赞同：69
> 
> 时间：2012-11-12T02:37:49.507
> 
> 标签：mongoose

我有一个请求，其中正文包含数据和 _id

如果存在带有 _id 的记录并且将创建一个记录，那么实现代码更新的更好方法是什么？我的代码：

```
var obj = req.body;
Model.findById(obj._id, function(err, data){
    if (!data){
        var model = new Model(obj)
        model.save(function(err, data){
            res.send({method: 'create', error: err, data: data})
        })
    } else {
        Model.findByIdAndUpdate(obj._id, obj, function(){
            res.send({method: 'update', error: err, data: data})
        })
    } 
```

我只是在想也许有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-11-12T05:23:29.333

你可以用一个[upsert](http://docs.mongodb.org/manual/reference/method/db.collection.update/#upsert-parameter)做到这一点：

```
var obj = req.body;
var id = obj._id;
delete obj._id;
if (id) {
    Model.update({_id: id}, obj, {upsert: true}, function (err) {...});
} 
```

需要注意的是，您的模型的默认值和中间件（如果有）将不会被应用。

**猫鼬 4.x 更新**

如果 upsert 创建了一个新文档，您现在可以使用该[`setDefaultOnInsert`](http://mongoosejs.com/docs/defaults.html#the-setdefaultsoninsert-option)选项来应用默认值。

```
Model.update({_id: id}, obj, {upsert: true, setDefaultsOnInsert: true}, cb); 
```

# iphone - 将子视图添加到更漂亮的视图中？

> ID：13337686
> 
> 赞同：2
> 
> 时间：2012-11-12T02:38:03.643
> 
> 标签：iphone, ios, xcode, uiview, animated

我希望能够在子视图中淡入淡出。有没有一种动画方法，这样当我的子视图被添加时它就会淡入，而不仅仅是突然弹出那里。我知道我可以使用不同的 alpha 获得我的 imageview 的几个实例，然后以这种方式对其进行动画处理，但没有更简单的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T02:42:49.077

是的，您可以在不需要不同图像的情况下为视图设置动画。下面的代码将在 0.3 秒内淡出您的视图。

```
[myView setAlpha:0.0];
[myView setHidden:NO];
[UIView animateWithDuration:0.3 animations:^{
  [myView setAlpha:1.0];
}]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T02:40:47.070

您只需要一个实例。`UIView.alpha`可以动画。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-12T02:42:21.610

您可以在添加子视图之前将 alpha 设置为 0，然后在 addSubview 之后制作动画，如下所示：

```
yourView.alpha = 0.0f;
[self.view addSubview:yourView];

[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.5f];
yourView.alpha = 1.0f;
[UIView commitAnimations]; 
```

# c# - 在字符串中搜索模式并删除

> ID：13337689
> 
> 赞同：0
> 
> 时间：2012-11-12T02:38:37.173
> 
> 标签：c#, regex, string

我的任务是浏览大量字符串值，并删除任何信用卡迹象。因此，如果在字符串中找到任何匹配的内容（其中 n = 数字）：

```
nnnn nnnn nnnn nnnn (4 x 4 numerical)
nnnnnnnnnnnnnnnn (16 numerical)
nnnn-nnnn-nnnn-nnnn (Hyphened)
nnnn nnnnnn nnnn (American express?)
nnnnnnnnnnnnnn (AX, no spaces)
nnnn-nnnnnn-nnnn (AX, Hyphened) 
```

我需要将字符串的那部分替换为`[CARD NUMBER REMOVED]`

所以，

```
"Client called and gave credit card details as 1234123412341234, exp 1201, and will be booked next week" 
```

会成为：

```
"Client called and gave credit card details as `[CARD NUMBER REMOVED]`, exp 1201, and will be booked next week" 
```

我在想 RegEx 会找到这个，但我的正则表达式经验为零，而且有很多模式。而且，我该如何更换那部分？

我可以编写一些遍历每个字符并进行一些规则检查的东西，但这似乎很老套。

有任何想法吗？

我正在尝试这个：

```
 const string pattern = @"^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$";
    const string replacement = "[CARD DETAILS REMOVED]";
    var rgx = new Regex(pattern);
    string cleansedText = rgx.Replace(UncleansedText, replacement);
    return cleansedText; 
```

但它似乎没有找到匹配项：

“1234610008918730^^9-11^^代码064^”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T02:53:04.963

这是一个[类似的问题](https://stackoverflow.com/questions/2206219/detecting-credit-card-numbers-in-text "类似的问题")，但没有选择答案。然而，最高投票者建议使用以下正则表达式的[网站：](http://www.regular-expressions.info/creditcard.html "网站")

```
\b(?:\d[ -]*?){13,16}\b 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T02:47:04.173

```
myString = Regex.Replace(myString, 
    @"(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})", 
    "`[CARD NUMBER REMOVED]`"); 
```

信用卡的正则表达式取自[此处](https://stackoverflow.com/questions/9315647/regex-credit-card-number-tests)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T03:06:07.487

准备好，因为这是一个doosy！

```
Regex regexObj = new Regex(@"(?:(?<visa>4[ -.,/\\]*(?:\d[ -.,/\\]*){11}(?:(?:\d[ -.,/\\]*){3})?\d)|(?<mastercard>5[ -.,/\\]*[1-5](?:[ -.,/\\]*[0-9]){14})|(?<discover>6[ -.,/\\]*(?:0[ -.,/\\]*1[ -.,/\\]*1|5[ -.,/\\]*\d[ -.,/\\]*\d)(?:[ -.,/\\]*[0-9]){12})|(?<amex>3[ -.,/\\]*[47](?:[ -.,/\\]*[0-9]){13})|(?<diners>3[ -.,/\\]*(?:0[ -.,/\\]*[0-5]|[68][ -.,/\\]*[0-9])(?:[ -.,/\\]*[0-9]){11}) |(?<jcb>(?:2[ -.,/\\]*1[ -.,/\\]*3[ -.,/\\]*1|1[ -.,/\\]*8[ -.,/\\]*0[ -.,/\\]*0|3[ -.,/\\]*5(?:[ -.,/\\]*[0-9]){3})(?:[ -.,/\\]*[0-9]){11}))");
resultString = regexObj.Replace(subjectString, "[CARD DETAILS REMOVED]"); 
```

这是从 RegexBuddy 库稍微修改的。我添加的是使用空格、破折号、句点、逗号、正斜杠和反斜杠以任何组合和任何分组样式分隔数字的能力。

注意：这将与您上面给出的示例相匹配。

此外，它不会匹配具有相同位数但似乎不是有效信用卡号的数字。

示例：“请致电 5555 4141、5555 3214 或发送电子邮件至 ourclient@example.com 联系客户”

# c# - Silverlight 中活动页面上的调用方法

> ID：13337695
> 
> 赞同：0
> 
> 时间：2012-11-12T02:39:00.627
> 
> 标签：c#, silverlight

我正在尝试在 Silverlight 中构建一个时钟应用程序。我的应用程序有多个页面，一个用于模拟，一个用于数字，一个用于计时器。

如果我想有一个单独的类来处理计时，如下所示：

```
private void startTimer()
    {
        DispatcherTimer myDispatcherTimer = new DispatcherTimer();
        myDispatcherTimer.Interval = new TimeSpan(0,0,1);
        myDispatcherTimer.Tick += new EventHandler(eachClick);
        myDispatcherTimer.Start();
    } 
```

如何获取显示的当前页面，以便该方法可以使用该页面的事件处理程序？

解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T02:50:18.820

我真的不明白你到底想做什么。“如何获取当前页面，以便该方法可以使用该页面事件处理程序？”

如果您有三个页面，并且您正在尝试同步所有三个页面之间的时间，为什么不创建一个静态 Timer 类。

我不知道，也许是这样的：

```
public static class StaticTimer
{
    public delegate void Time(DateTime time);
    public static event Time Tick = delegate { };
    static StaticTimer()
    {
        DispatcherTimer myDispatcherTimer = new DispatcherTimer();
        myDispatcherTimer.Interval = new TimeSpan(0,0,1);
        myDispatcherTimer.Tick += (s,e) => Tick(DateTime.Now);
        myDispatcherTimer.Start();
    }
} 
```

然后，从每个页面，只需在创建 Tick 事件时订阅它。

```
void AnalogPage_OnLoaded( ... )
{
    StaticTimer.Tick += someEventHandler;
}
void someEventHandler(DateTime time)
{
    if(thisIsCurrentPage)
    {
        clock.Update(time);
    }
} 
```

# php - 从数据库 MYSQL 和 Codeigniter 中获取信息

> ID：13337696
> 
> 赞同：0
> 
> 时间：2012-11-12T02:39:02.617
> 
> 标签：php, mysql, database, codeigniter

如果你们需要其他信息，那么上一个问题就在这里：

[从数据库中获取信息](https://stackoverflow.com/questions/13336744/fetching-information-from-the-database)

**另一个更新**

尽管你们所有人都非常有帮助。我已经设法获得了输出，但我仍然**真的很困惑**，可以说我想首先看到输出，所以我无视控制器。

在我看到我的命令是正确的之后，我会制作一个控制器 :) 我不知道为什么，但这就是我如何理解整个概念的方式。反正..

对于我的 **membership_model.php**

```
function member_here()
{
$this->db->select('');
$this->db->from('membership');
$this->db->where('username',$this->input->post('username'));
$q=$this->db->get('');

if($q->num_rows() > 0) {
$data = array();
foreach($q->result() as $row) {
    $data=$row;
}
return $data;
}
} 
```

和我的**signup_view.php**

```
<html>
<head>
<title></title>
</head>
<body>
<?php $this->load->view('includes/header')?>

<div align="right"><?php echo anchor('login/signin', 'Login');?></div>

<?php

$option1 = array(
              'name'  => 'What was your childhood nickname?',
              'value'   => 'What was your childhood nickname?'
            );

$option2= array(
    'name'  => 'What is your pet\'s name?',
    'value' => 'What is your pet\s name?'
);

$option3= array(
    'name'  => 'In what city were you born?',
    'value' => 'In what city were you born?'
);

$option4= array(
    'name'  => 'What is the color of your eyes?',
    'value' => 'What is the color of your eyes?'
);

$option5= array(
    'name'  => 'What is your favorite color?',
    'value' => 'What is your favorite color?'
);

echo form_open('login/create_member');
echo "<table width=\"80%\ cellpadding=\"3px\">
<tr>
<td>User Information:</td>
</tr>
<tr>
<td>&nbsp;</td>
</tr>";
echo "<tr><td>First Name*: </td></tr>";
echo "<tr><td>";
echo form_input('first_name', set_value('first_name'));
echo "</tr></td>";
echo "<tr><td>Last Name*: </td></tr>";
echo "<tr><td>";
echo form_input('last_name', set_value('last_name'));
echo "</td></tr>";
echo "<tr><td>Email Address*: </td></tr>";
echo "<tr><td>";
echo form_input('email_address', set_value('email_address'));
echo "</tr></td>";
echo "<tr><td>Gender: </td></tr>";
echo "<tr><td>";
?>
<input type="radio" name="gender" value="Male" />Male &nbsp;
<input type="radio" name="gender" value="Female" />Female
<?php

echo "</tr></td>";

echo "<tr>
<td></td>
</tr>
</table>";
?>

<?php
echo "<table width=\"80%\ cellpadding=\"3px\">
<tr>
<td> Account Information:</td>
</tr>
<tr>
<td>&nbsp;</td>
</tr>";
echo "<tr><td>Userame*: </td></tr>";
echo "<tr><td>";
echo form_input('username', set_value('username'));
echo "</td></tr>";
echo "<tr><td>Password*: </td></tr>";
echo "<tr><td>";
echo form_password('password');
echo "</td></tr>";
echo "<tr><td>Password Confirmation*: </td></tr>";
echo "<tr><td>";
echo form_password('password2');
echo "</td></tr>";
echo "<tr><td>";
echo "Security Question*:";
echo "</td></tr>";
echo "<tr><td>";
?>
<select name = "security_question" value="security question">
<option value = "What was your childhood nickname?">What was your childhood nickname?</option>
<option value = "What is your pet's name?">What is your pet's name?</option>
<option value = "In what city were you born?">In what city were you born?</option>
<option value = "What is the color of your eyes?">What is the color of your eyes?</option>
<option value = "What is your favorite color?">What is your favorite color?</option>
</select>

<?php
echo "</td></tr>";
echo "<tr><td>";
echo "Security Answer*:";
echo "</td></tr>";
echo "<tr><td>";
echo form_input('security_answer');
echo "</td></tr>";

echo "<tr><td>";
echo form_submit('submit', 'Register');
echo form_reset('reset', 'Reset');
echo "</tr></td>";
echo form_close();

echo "<tr>
<td></td>
</tr>
</table>";
?>

<?php echo validation_errors('<p class="error">');?> 
```

所以，这就是我所有的代码。我试图从数据库中获取**登录用户的名字、姓氏、电子邮件地址和所有其他信息。**

如果我使用`$data[]=$row;`而不是`$data=$row;`在我的模型中使用，则会出现以下错误：

`Severity: Notice`

`Message: Trying to get property of non-object`

`Filename: views/members_area.php`

`Line Number: 20`

所以我该怎么做。*我在没有控制器的情况下编码。我只是检查结果* **谢谢！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T06:07:33.650

这可以很简单阅读用户指南以获得更简单的示例

```
Model

Class Members Extends CI_Model
{
    function __construct(){
        parent::__construct();
    }

    function member_here()
    {
            $this->db->where('username',$this->input->post('username'));
        $query  =   $this->db->get('membership');

        if($query->num_rows() > 0) 
        {
            return $query->result();
        }
    }
}

Controlelr 

Class Login extends CI_Controller
{
    function __construct()
    {
        parent::__construct();
    }

    public function index()
    {
        $this->load->view('login_view');
    }

    public function result()
    {
        $this->load->model('membership');
        $data['member'] = $this->membership->member_here(); 
        $this->load->view('result_view', $data);
    }
}

And in View you can simple do it

<?php
foreach($member as $row){
?>
<option value="<?php echo $row->id?>"><?php echo $row->name?></option>
<?php
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T04:50:40.630

有几点可以澄清：

*   A`model`是持久存在于数据库中的实体。在您的情况下：**会员资格**
*   A`controller`负责加载模型，并将其传递给要显示的视图
*   A `view`only 应该有 html 标记，没有功能，没有逻辑。

## 数据库

假设您的数据库具有以下结构。

```
+---------------+-----------+------------+--------------------+
| id_membership | username  | name       | email              |
+---------------+-----------+------------+--------------------+
|             1 | Marishka  | marishkapv | marishka@email.com |
|             2 | johndoe   | John       | john@doe.com       |
|             3 | dennisv   | Dennis     | dennis@v.com       |
+---------------+-----------+------------+--------------------+ 
```

## 模型

您可以`class Membership extends CI_Model`在`/application/models/membership.php`文件中构建模型。

```
class Membership extends CI_Model {

    function __construct()
    {
        parent::__construct();
    }

    function member_here()
    {
        $this->db->select('');
        $this->db->from('membership');
        $this->db->where('username',$this->input->post('username'));
        $q = $this->db->get('');

        if($q->num_rows() > 0) 
        {
            $data = array();
            foreach($q->result() as $row) 
            {
                $data=$row;
            }
            return $data;
        }
    }
} 
```

## 控制器

假设您有一个登录页面`example.com/index.php/login`，它应该位于`/application/controllers/login.php`如下：

```
class Login extends CI_Controller
{
    function __construct()
    {
        parent::__construct();
    }

    public function index()
    {
        $this->load->view('login_view');
    }

    public function result()
    {
        $this->load->model('membership');
        $data['member'] = $this->membership->member_here(); 
        $this->load->view('result_view', $data);
    }
} 
```

看起来模型已加载抛出这两行：

```
//Load the model in make use of its functions
$this->load->model('membership'); 

//load the row whit the given username
//the result is assigned to array with the key "member", in the view you access this
//value with $member var
$data['member'] = $this->membership->member_here(); 
```

## 意见

正如您在控制器代码中所述，有两个视图文件，`login_view`和`result_view`. 第一个将显示一个 html 表单，您可以在其中放置用户名以触发选择查询。根据`result_view`选择的会员资格显示会员信息

login_view.php

```
<html>
    <head></head>
    <body>
    <form action="login/result" method="post">
        Type your username: <input type="text" name="username" />
        <input type="submit" value="Load from database" />
    </form>
    </body>
</html> 
```

结果视图.php

```
<h4>Details:</h4>
<p>
Id: <?=$member->id_membership?> <br />
Username: <?=$member->username?> <br />
Email: <?=$member->email?>
</p> 
```

# c - C - scanf 没有停止用户输入

> ID：13337698
> 
> 赞同：1
> 
> 时间：2012-11-12T02:39:22.263
> 
> 标签：c, printf, scanf

我想获取变量的用户输入`L`，但该`scanf`函数不起作用，如果我尝试输入任何内容，程序将跳转并打印下一个成本语句并退出。我是C新手，希望能在这里得到一些帮助。谢谢。下面的代码：

```
 #include <stdio.h>
 #include <conio.h>

 int main()
 {
    float L = 0; // L is litre
    float gallon;
    gallon = 3.785 * L;
    char x[2] = {'u', 'd'}; // u is unleaded and d is diesel
    float cost;
    printf("Hello, welcome to PetrolUpHere!!\n");
    printf("Would u like unleaded or diesel fuel?");
    scanf("%s", &x[2]);
    printf("Enter the litre you want to fuel:");
    scanf("%.2f", &L); //SCANF NOT WORKING
    switch (x[2]) {
        case 'u':
            cost = 1.98 * gallon;
            printf("The cost is :%.2f ", cost);
            break;
        case 'd':
            cost = 1.29*gallon;
            printf("The cost is :%.2f ",cost);
            break;
    }
    getch();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T02:50:56.800

这里有很多问题：

```
scanf("%s", &x[2]); 
```

我想您想将字符串读入变量`x`。相反，您是在说“将字符串读入内存 2`x`个点后的位置”。在这种情况下，内存将超出范围。你应该这样做，因为你只关心一个角色：

```
char input;
scanf("%c", &input); 
```

你的`switch`陈述同样被打破；`x[2]`又出界了。改用`input`上面的代码。

正如其他人所指出的那样，使用`%.2f`L. 阅读时不是您想要做的。`%f`改为使用。通常，在打印出变量时，您应该只对格式说明符执行类似的操作，而不是读入它们。最终您无论如何都不会使用`scanf`，因为它不是一种特别安全的获取输入的方式。

最后：似乎您对 C 字符串如何工作的理解充其量是不稳定的。这是可以理解的，因为对于以前没有使用过 C 的任何人，尤其是对于新手程序员来说，这是一个相当混乱的话题。这是[一种解释](http://www.eskimo.com/~scs/cclass/notes/sx8.html)；我相信你可以找到更多，如果你看的话，可能会更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T02:53:14.533

您的大部分代码中存在三个问题（至少）：

```
char x[2] = {'u', 'd'};//u is unleaded and d is diesel
float cost;

printf("Hello, welcome to PetrolUpHere!!\n");
printf("Would u like unleaded or diesel fuel?");
scanf("%s", &x[2]);
printf("Enter the litre you want to fuel:");
scanf("%.2f", &L); //SCANF NOT WORKING

switch (x[2]) { 
```

1.  `x`是一个由 2 组成的数组，`char`它已初始化，但不是以空字符结尾的字符串。
2.  您使用`scanf("%s", &x[2])`, 将字符串读入不属于数组的数据中`x`。
3.  `x[2]`然后在语句中取消引用`switch`——再次访问超出范围的数据。
4.  您不检查任何一个`scanf()`调用以确保它能够扫描结果。
5.  您不会在阅读后立即打印您阅读的内容。
6.  `.`格式`scanf()`无效；使用`"%f"`（您可能不想使用`"%2f"`，因为这会将您限制为最多两位数）。
7.  您实际上并没有说出您在回答“无铅或柴油”问题时输入的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T02:53:23.467

`scanf("%s", &x[2]);` 应该： `scanf("%c", &x[2]);`

* * *

`scanf("%.2f", &L);` 应该： `scanf("%2f", &L);`

你用'0.0'初始化加仑，那么你的输出将永远是'0.0'。希望它有效。

# linux - 什么会导致生成 SIGHUP？

> ID：13337701
> 
> 赞同：27
> 
> 时间：2012-11-12T02:39:51.650
> 
> 标签：linux, ubuntu, linux-kernel

我们有大约 40 台计算机运行相同的硬件和软件。它们都运行 Ubuntu 11.10。他们都只有一个用户帐户可以登录。.profile 文件被设置为启动一个守护进程。守护程序的代码是用 C 编写的。

几周后，我们会收到一份报告说守护程序不再运行。这不会发生在所有计算机上，而只会发生在一两台计算机上。我们无法始终如一地重现该问题。

查看代码，应用程序在收到 SIGHUP 或 SIGTERM 时退出。

据我了解，SIGHUP 是在用户注销时生成的。在我们的例子中，用户永远不会注销。我想知道是否有可能由于其他原因生成了 SIGHUP。任何其他想法将不胜感激。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-12T12:26:47.100

好吧，关于 SIGHUP 有几点需要注意。首先，它起源于挂断的概念，即通过调制解调器之类的东西失去与控制台的连接。在现代用语中，这通常意味着它已经失去了控制 tty。除非您已小心与 tty 分离，否则在给定终端中启动的任何程序都会在终端关闭时收到 SIGHUP。有关如何在您的程序中执行此操作的详细信息，请参见[此处。](https://stackoverflow.com/questions/8777602/why-must-detach-from-tty-when-writing-a-linux-daemon)其他选项包括：

*   在里面运行你的程序`screen`或`tmux`
*   `nohup`使用或其他一些守护程序框架运行您的程序

另一种可能性是故意向您的进程发送 SIGHUP 信号，“传统”通常用于向进程发出信号，表明它应该重新读取其配置。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-12T03:09:53.010

可以使用`kill`实用程序或 kill syscall 发送信号。当然，您可以尝试找出是谁在发送该信号或断开您的终端或网络连接，但有更简单实用的方法来解决您的问题。

当代码应该作为守护程序运行但实际上不是（就像您的那样）时，有一个包装器可以将任何程序变成守护程序。惊喜 - 这个包装被称为`daemon`！它有很多选项，可能对您来说最重要的是，如果您的实用程序因任何原因而死，它可以自动重新启动您的实用程序。

如果您的 Ubuntu 上未安装此命令，只需`sudo apt-get install daemon`, 和`man daemon`即可开始使用。

# mysql - 根据架构版本有条件地添加列

> ID：13337703
> 
> 赞同：0
> 
> 时间：2012-11-12T02:40:06.240
> 
> 标签：mysql, database, migration

如果数据库模式版本低于某个值，如何有条件地将列添加到 MySQL 表？这个问题假设我知道足够创建一个`_Schema`表，但不知道足够实际使用它。

我无效的起始代码如下所示：

```
SELECT @version = `Version` FROM `_Schema`;
IF version <= 2 THEN
  ALTER TABLE `TheTable` ADD `TheNewColumn` smallint(5) unsigned not null;
END IF; 
```

# php - CodeSniffer 嗅探为 PHP 代码生成依赖关系图？

> ID：13337708
> 
> 赞同：5
> 
> 时间：2012-11-12T02:41:09.563
> 
> 标签：php, static-analysis, codesniffer

**目标：** 我有兴趣在 PHP 程序中生成类依赖项的[DOT 格式](http://www.graphviz.org/doc/info/lang.html)描述。

**想法：** 编写一个可以在 PHP 源代码中检测（并发出 DOT 记录）以下模式的 CodeSniffer“嗅探”应该不难：

```
class SomeClassName extends BasicClassName {  // SomeClassName refers to BasicClassName
...
    new OtherClassName();            // SomeClassName refers to OtherClassName
    ThisClassName::some_method();    // SomeClassName refers to ThisClassName
    ThatClassName::$some_member;     // SomeClassName refers to ThatClassName
    RandomClassName::some_constant;  // SomeClassName refers to RandomClassName
...
} 
```

但是我还没有找到任何已发布的嗅探来发出此信息（以及任何其他表明我可能错过的“真实”类依赖关系的模式）。

**注意：** 我特别**不**关心 PHP 的 include() 和 require() 语句（[我不相信它们的行为是明确定义的](https://stackoverflow.com/questions/7941373/processing-include-require-directives-in-php)）。出于这个问题的目的，我们假设所有 PHP 类解析都是通过[自动加载](http://php.net/manual/en/language.oop5.autoload.php)处理的，并且我们希望仅使用静态代码分析来构建类依赖关系图。

**编辑：** 不幸的是，我看不到处理以下问题的一般方法：

```
class ThatClassName {
...
    function generateClassName() {
        // something too complicated to analyze statically...
    }

    function foo() {
        $name = $this->generateClassName();
        $instance = new $name; // ThatClassName refers to ... what?
        ...
    }
...
} 
```

但是，当然可以通过显示 ThatClassName 与 generateClassName() 方法的依赖关系来在依赖关系图中表示这种情况 - 可能用括号显示以使方法名称易于与类名称区分开来。并且建立一个约定可能不是一个坏主意，其中任何动态生成类名的方法都必须包含一个[注释](https://stackoverflow.com/questions/3623499/how-is-annotation-useful-in-php)（在相关的注释中），该注释指示可能生成的每个类名 - 这些“记录的动态依赖项”然后可以自动包含在依赖图中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T04:14:57.717

这并不是 PHP_CodeSniffer 真正设计的目的。特别是因为嗅探不应该输出数据或写入文件。但是，肯定没有什么能阻止你在嗅探中这样做。毕竟只是 PHP 代码，不需要报告任何错误或警告。

我没有遇到任何像你描述的那样做任何事情的嗅探，所以我认为你必须写一个新的。

如果你想创建一个新的嗅探，我建议从抽象范围嗅探开始。这允许您在 T_CLASS 令牌中查找 T_NEW 和 T_DOUBLE_COLON 令牌。[这是一个例子。](https://github.com/squizlabs/PHP_CodeSniffer/blob/master/CodeSniffer/Standards/Generic/Sniffs/NamingConventions/CamelCapsFunctionNameSniff.php)

或者，如果您还想查看全局函数和其他类之外的代码，您可以在常规嗅探中查找 T_NEW 和 T_DOUBLE_COLON 标记

如果您不确定如何开始，或者您只是想要一些帮助编写嗅探，请联系我，我可以帮助您编写此内容。我只需要知道你想要找到的每个案例的输出，或者我可以只使用一些基本的东西。如果您需要帮助，我的电子邮件是：`gsherwood at squiz dot net`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-26T23:21:33.900

我为此编写了一个工具：PhpDependencyAnalysis。

这是基于命名空间的面向对象 PHP 项目 (>= 5.3.3) 的可扩展静态代码分析。它在可定制的级别上创建依赖关系图，例如在包级别或类级别上。因此，它通常可以用于声明依赖关系，但它也可以用于根据关注点分离、德米特法则和非循环依赖原则执行分层架构中层之间的违规检测。您还可以将输出格式更改为 DOT。

只需检查[GitHub 上的 PhpDependencyAnalysis 即可](https://github.com/mamuz/PhpDependencyAnalysis)。

# php - PHP：是来自子类或父类的类属性/常量值

> ID：13337709
> 
> 赞同：2
> 
> 时间：2012-11-12T02:41:23.630
> 
> 标签：php, oop

有没有办法找出类属性值是来自父类还是子类。

```
class A {
   public static $property1 = "X";
   public static $property2 = "Y"; 

   public static isFrom($propertyName) {
      /// what should be here?
   }  
}

class B extends A {
   public static $property1 = "Z";
}

class C extends B {
}

C::isFrom("property1"); /// should return "CLASS B";
C::isFrom("property2"); /// should return "CLASS A"; 
```

关于类常量的同样问题。

是否可以找出声明常量的确切类（访问子类 C）？函数定义（“C::SomeConstant”）；如果 SomeConstant 在 A 或 B 或 C 中声明，则返回 true。我正在寻找解决方案来确定常量是否在类 C 中而不是在父级中声明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T03:06:31.680

这应该可以解决您的部分问题。这段代码运行良好的条件是在子类中，redefine 变量的默认值必须与父类不同。

```
/**
 * @author Bang Dao
 * @copyright 2012
 */

class A {
   public static $property1 = "X";
   public static $property2 = "Y"; 

    public static function isFrom($propertyName) {
        $class = get_called_class();
        $vars = array();
        do{
            $_vars = get_class_vars($class);
            $vars[$class] = $_vars; //for other used
            $class = get_parent_class($class);
        } while($class);

        $vars = array_reverse($vars);
        $class = -1;
        foreach($vars as $k => $_vars){
            if(isset($_vars[$propertyName])){
                if($class == -1)
                    $class = $k;
                else{
                    if($_vars[$propertyName] !== $vars[$class][$propertyName])
                        $class = $k;
                }
            }
        }

        return $class;
    }  
}

class B extends A {
   public static $property1 = "Z";
}

class C extends B {
}

echo C::isFrom("property1"); /// should return "CLASS B";
echo '<br />';
echo C::isFrom("property2"); /// should return "CLASS A"; 
```

# ios - 具有多个 ManagedObjectContexts 的 CoreData 的内存使用情况

> ID：13337717
> 
> 赞同：1
> 
> 时间：2012-11-12T02:42:29.627
> 
> 标签：ios, core-data

我已经看到了许多将 CoreData 与多个 ManagedObjectContexts 一起使用的示例（以新的 iOS5+ Parent/Child 方式），例如：

```
//
//          persistentStore (on disk)
//                 |
//   persistentManagedObjectContext (exclusively for saving)
//                 |
//   mainThreadManagedObjectContext (for managedObject's used on the mainThread)
//                 |
//      childManagedObjectContext (created "on the fly" for background task, and destroyed when saving is done)
// 
```

1.  我认为在上面的 3 层方法中是否正确，在子 MOC 上执行的每次提取都会导致至少 3 个读取的任何对象的副本保存在内存中，每个 MOC 中都有一个（在任何内部消息传递中可能还有更多CoreData 在 MOC 之间使用）？

2.  如果我有一个后台任务读取一些数据（例如图像），进行一些处理（例如创建缩略图）并写入数据库，但不直接/立即更新 UI，那么我认为这种方法是否正确也不合适，因为更新将不必要地通过主上下文，从而影响主线程并影响 UI 性能。

# facebook-like - 关于 og:title 标签

> ID：13337719
> 
> 赞同：1
> 
> 时间：2012-11-12T02:42:40.373
> 
> 标签：facebook-like, meta-tags

Facebook 调试工具没有返回错误。然而，Like 按钮不起作用。

“og：title”标签一定有问题。

在以下类型的 og:title 的情况下，有什么问题？（○为双字节字符）

```
<meta property="og:title" content="○○○○○○&nbsp;○○○○○○○&amp;nbsp;○○○○○○&nbsp;○○○○○○○○○○○○&nbsp;○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○○" /> 
```

是“ ”的问题吗？

先感谢您。

# python - Python NLTK - 根据标签返回的最高结果计算棕色语料库中单词的出现次数

> ID：13337720
> 
> 赞同：2
> 
> 时间：2012-11-12T02:42:47.203
> 
> 标签：python, nltk

我正在尝试从特定标签的语料库中返回出现次数最多的值。我可以让标签和单词本身返回正常但是我无法让计数在输出中返回。

```
import itertools
import collections
import nltk 
from nltk.corpus import brown

words = brown.words()

def findtags(tag_prefix, tagged_text):
cfd = nltk.ConditionalFreqDist((tag, word) for (word, tag) in tagged_text
                              if tag.startswith(tag_prefix))
return dict((tag, cfd[tag].keys()[:5]) for tag in cfd.conditions())

tagdictNNS = findtags('NNS', nltk.corpus.brown.tagged_words()) 
```

这将返回以下罚款

```
for tag in sorted(tagdictNNS):
    print tag, tagdictNNS[tag] 
```

我已经设法使用以下方法返回每个基于 NN 的单词的计数：

```
pluralLists = tagdictNNS.values()
pluralList = list(itertools.chain(*pluralLists)) 
for s in pluralList:
    sincident = words.count(s)
    print s
    print sincident 
```

这将返回一切。

有没有更好的方法将事件插入 a dict `tagdictNN[tag]`？

编辑1：

```
pluralLists = tagdictNNS.values()[:5]
pluralList = list(itertools.chain(*pluralLists)) 
```

从 for s 循环中按大小顺序返回它们。虽然仍然不是正确的方法。

编辑 2：更新了字典，以便他们实际搜索 NNS 复数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T05:09:25.837

我可能不明白，但鉴于您的 tagdictNNS：

```
>>> new = {}
>>> for k,v in tagdictNNS.items():
        new[k] = len(tagdictNNS[k])
>>> new
{'NNS$-TL-HL': 1, 'NNS-HL': 5, 'NNS$-HL': 4, 'NNS-TL': 5, 'NNS-TL-HL': 5, 'NNS+MD': 2,      'NNS$-NC': 1, 'NNS-TL-NC': 1, 'NNS$-TL': 5, 'NNS': 5, 'NNS$': 5, 'NNS-NC': 5} 
```

然后您可以执行以下操作：

```
>>> sorted(new.items(), key=itemgetter(1), reverse=True)[:2]
[('NNS-HL', 5), ('NNS-TL', 5)] 
```

# c# - 如何在 C# Windows Store App (Win8) 中将项目添加到 GridView

> ID：13337723
> 
> 赞同：1
> 
> 时间：2012-11-12T02:42:57.350
> 
> 标签：c#, xaml, binding, datatemplate, windows-store-apps

为简单起见，假设我有适用于 Windows 8 的 ac# Windows Store Project，其中包含以下项目：

*   GridView (PlatformsGrid)
*   List«PlatformSearchResult» (所有平台)
*   standardstyles.xaml 中的数据模板 (PlatformDataTemplate)

allPlatforms 是从在线 API 填充的“PlatformSearchResult”对象的集合，具有以下 3 个属性：

1.  ID
2.  姓名
3.  别名

我可以为我的 allPlatforms 集合中存在的每个对象向 gridview 添加一个新项目，但是这些项目是空白的，并且不显示来自我的对象的数据。

当前代码的快速摘要如下所示：

**XAML 标记：**

```
<!-- Platforms Content -->
<GridView x:Name="PlatformsGrid" Grid.Row="1"
  CanReorderItems="True" CanDragItems="True" 
  ItemTemplate="{StaticResource PlatformDataTemplate}" >
    <GridView.ItemsPanel>
        <ItemsPanelTemplate>
            <WrapGrid MaximumRowsOrColumns="2" 
              VerticalChildrenAlignment="Top" HorizontalChildrenAlignment="Center" />
        </ItemsPanelTemplate>
    </GridView.ItemsPanel>
</GridView> 
```

**数据模板**

```
<!-- Platform Item Template -->
<DataTemplate x:Key="PlatformDataTemplate">
    <Grid Background="#FF939598" Height="250" Width="250">
        <Image Source="/SampleImage.png"  Stretch="UniformToFill"/>
        <StackPanel Orientation="Vertical" Background="#CC000000" 
                Height="90" VerticalAlignment="Bottom">
            <TextBlock Text="{Binding Name}" 
                   Margin="10,3,0,0" Width="242" Height="62" 
                   TextTrimming="WordEllipsis" TextWrapping="Wrap" HorizontalAlignment="Left"/>
            <TextBlock Text="{Binding Alias}" 
                   Margin="10,2,0,0" Width="186" Height="14" 
                   TextTrimming="WordEllipsis" HorizontalAlignment="Left" FontSize="9" Opacity="0.49"/>
        </StackPanel>
    </Grid>
</DataTemplate> 
```

**控制功能**

```
 private async void FetchItemInfo_Loaded(object sender, RoutedEventArgs e)
    {
        // Get List of Top Games
        List<PlatformSearchResult> allPlatforms = new List<PlatformSearchResult>();
        allPlatforms = await GamesDB.GetPlatforms();

        // Dynamically Create Platform Tiles
        foreach (PlatformSearchResult platform in allPlatforms)
        {
            PlatformsGrid.DataContext = platform;
            PlatformsGrid.Items.Add(platform);
        }
    } 
```

如何获取添加的项目以显示适当的对象属性（暂时忽略图像），我只是对填充 TextBlocks 的内容感兴趣。

我感谢任何人可以提供的任何帮助！

谢谢，亚历克斯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T04:56:17.023

通过属性将 allplatforms 列表绑定到 gridview 作为 itemssource。当然，这假设 gridview 或页面的数据上下文是包含您的 allplatforms 属性的类。如果没有，你也必须这样做。

通过后面的代码设置数据上下文

this.grid.DataContext = class()//

或通过绑定

```
<!-- Platforms Content -->
<GridView x:Name="PlatformsGrid" Grid.Row="1"
  CanReorderItems="True" CanDragItems="True" 
  ItemsSource = "{Binding AllPlatforms}"
  ItemTemplate="{StaticResource PlatformDataTemplate}" >
    <GridView.ItemsPanel>
        <ItemsPanelTemplate>
            <WrapGrid MaximumRowsOrColumns="2" 
              VerticalChildrenAlignment="Top" HorizontalChildrenAlignment="Center" />
        </ItemsPanelTemplate>
    </GridView.ItemsPanel>
</GridView> 
```

您可以查看 msdn 上提供的 Windows 8 应用示例。

编辑：您的平台对象必须具有您已添加为绑定的名称和别名的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T05:04:40.177

在控制功能中你需要做的就是

```
private async void FetchItemInfo_Loaded(object sender, RoutedEventArgs e)
{
    // Get List of Top Games
    List<PlatformSearchResult> allPlatforms = new List<PlatformSearchResult>();
    allPlatforms = await GamesDB.GetPlatforms();

    PlatformsGrid.ItemsSource = allPlatforms;    
} 
```

# javascript - html中的Excel超链接在新窗口中打开

> ID：13337724
> 
> 赞同：-3
> 
> 时间：2012-11-12T02:42:59.930
> 
> 标签：javascript, html, excel

我有一个包含数千个超链接的 Excel 文档。当我将它保存为 HTML 时，我希望超链接在新窗口中打开，但它却在同一个窗口中打开。

我知道我可以更改目标以解决此问题，`_blank`但我不想手动编辑所有 1000 个条目。

`base target=_blank`似乎也不起作用，

这是html代码的示例。

```
 <tr height=17 style='height:12.75pt'>
  <td height=17 class=xl65 style='height:12.75pt'><a
  href="http://tpbsmi.co.nz:8080/arsys/servlet/ViewFormServlet?    form=AST%     3AComputerSystem&amp;server=tptbsm008.transpower.co.nz&amp;eid=000000000003270|0000000000549    54|000000000003270|000000000054954"
  target="_parent"><span style='color:blue'>tptapp508.tpdev.transp<span
  style='display:none'>ower.co.nz</span></span></a></td>
  <td>Delete</td>
  <td>Hardware</td>
  <td>Processing Unit</td>
  <td>Server</td>
  <td colspan=2 style='mso-ignore:colspan'>VMware Virtual Platform</td>
  </tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T02:50:43.960

在 Excel 2007 和类似版本中，HTML Anchor 标记带有`target`默认为`_parent`. 所以很容易找到：

```
target="_parent" 
```

并将它们全部替换为：

```
target="_blank" 
```

记事本一下子就搞定了。

# c++ - 如何使makefile中的目标调用makefile中的另一个目标

> ID：13337727
> 
> 赞同：14
> 
> 时间：2012-11-12T02:43:40.960
> 
> 标签：c++, unix, ubuntu, makefile

所以我有这个makefile，我希望目标只是调用目标专家，但显然我这样做的方式是错误的，因为我收到错误“make：exprtest：Command not found make：*** [all]错误 127” 这是生成文件：

```
all:
    exprtest
exprtest: exptrtest.o driver.o parser.tab.o scanner.o
    g++ -Wall -g -o exprtest exptrtest.o driver.o parser.tab.o scanner.o
driver.o: driver.cpp scanner.hpp driver.hpp
    g++ -Wall -g -c driver.cpp
parser.tab.o: parser.tab.hpp parser.tab.cpp
    bison parser.ypp
    g++ -Wall -g -c parser.tab.cpp
scanner.o: scanner.cpp scanner.hpp
    flex -t scanner.ll > scanner.cpp
    g++ -Wall -g -c scanner.cpp
clean:
    rm parser.tab.hpp parser.tab.cpp scanner.cpp 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-12T03:08:02.983

而且您总是可以`make`调用`make`.
例如：

```
all:
    $(MAKE) exprtest

exprtest:  
    do exprtest stuff 
```

打字`make all`会间接做`make exprtest`。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-12T02:45:45.983

放在`exprtest`与 相同的行`all`。依赖关系在冒号之后，命令在下面的行中，缩进。

```
target: dependencies
[tab] system command 
```

所以在你的情况下，这一切都变成了：

```
all: exprtest
exprtest: exptrtest.o driver.o parser.tab.o scanner.o
    g++ -Wall -g -o exprtest exptrtest.o driver.o parser.tab.o scanner.o 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-12T02:46:49.407

你想做类似的事情

```
all: exprtest 
```

那就是“`all`取决于`exprtest`成功”。

# map - 在cond范围内使用map

> ID：13337729
> 
> 赞同：3
> 
> 时间：2012-11-12T02:44:03.643
> 
> 标签：map, clojure

我从我找到的一个示例博客文章（但现在似乎无法检索）中无耻地提取了几乎所有这些代码，该文章演示了使用 Java 的套接字实现来维护一个简单的 IRC 连接。

在玩了一下这个例子时，我遇到了一个问题，我想加入一系列频道。我的第一个想法是在服务器 var 上存储一个通道向量，然后在匹配模式时对其进行解构。然而，这还没有奏效。如果我将地图更改为对 write 函数的裸调用，则一切正常。但是映射写入功能似乎不起作用，我不知道为什么。有趣的是，如果我将地图调用复制并粘贴到运行活动连接的 repl 中，它就可以工作......这是因为这发生在 cond 的范围内吗？裁判可能是罪魁祸首吗？我刚刚进入 Clojure，所以我仍然非常想弄清楚事情。

废话不多说，代码如下：

```
 (ns irc
    (:import (java.net Socket)
            (java.io PrintWriter InputStreamReader BufferedReader)))

  (def server {:server "irc.example.net"
               :port 6667
               :channels ["#a" "#b"]})
  (def client {:realname "Lambda Bot" :nick "lambdabot"})

  (declare conn-handler)

  (defn in [a b]
    (re-find (re-pattern a) b))

  (defn startswith [a b]
    (in (str "^" a) b))

  (defn connect [server]
    (let [socket (Socket. (:server server) (:port server))
          in (BufferedReader. (InputStreamReader. (.getInputStream socket)))
          out (PrintWriter. (.getOutputStream socket))
          conn (ref {:in in :out out})]
      (doto (Thread. #(conn-handler conn server)) (.start))
      conn))

  (defn write [conn msg]
    (println msg)
    (doto (:out @conn)
      (.println (str msg "\r"))
      (.flush)))

  (defn conn-handler [conn server]
    (while (nil? (:exit @conn))
      (let [msg (.readLine (:in @conn))]
        (println msg)
        (cond
          (startswith "ERROR :Closing Link:" msg)
          (dosync (alter conn merge {:exit true}))
          (in " 001 " msg)
          ;; this guy below doesn't seem to work at all
          (map #(write conn (str "JOIN " %)) (:channels server))
          ;; this guy on the other hand seems to work fine
          ;;(write conn (str "JOIN " (first (:channels server))))
          (startswith "PING" msg)
          (write conn (str "PONG " (re-find #":.*" msg)))))))

  (defn login [conn user]
    (write conn (str "NICK " (:nick user)))
    (write conn (str "USER " (:nick user) " 0 * :" (:realname user)))) 
```

要运行它，您可以简单地调用：（def irc（连接服务器））然后（登录 irc 客户端）。非常感谢任何帮助！谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T03:41:47.040

`map`是一种惰性操作，即直到需要时才执行。当从 repl 调用时， repl 会导致它评估，因为它需要打印返回的值。

您可以使用`doall`来强制执行惰性操作。

```
(doall (map ... )) 
```

更好的是使用`doseq`而不是`map`. `map`用于将一组值转换为另一组值，`doseq`并对一组值执行操作以及您想要执行的操作。

```
(doseq [ch (:channels server)]
  (write conn (str "JOIN " ch))) 
```

# javascript - 多个零剪贴板按钮

> ID：13337730
> 
> 赞同：3
> 
> 时间：2012-11-12T02:44:12.550
> 
> 标签：javascript, jquery, clipboard, zeroclipboard

很难让 zeroclipboard 使用多个按钮。我让它与一个（第一个）一起工作，但我认为我的代码过于复杂。

HTML：

```
<ul id="keylist" class="vertical-list list-parent">
    <li id="license_key_0">
      <div class="primary two-quarter unit-link">
        <img width="70" height="70" class="list-image media" src="/images/license-key.png">
        <dl class="meta">
          <dt>Auth Key</dt>
          <dd>313f7f5586b39cd9bf7a894894564036</dd>
          <dt>URL</dt>
          <dd>
            <span id="fe_text_0">
             http://localhost:3000/projects/313f7f5586b39cd9bf7a894894564036
            </span>

             <div style="position:relative" id="d_clip_container">
          <button title="Click me to copy to clipboard." class="my_clip_button" id="d_clip_button"><b>Copy To Clipboard...</b></button>
        </div>
          </dd>
          <dt>Expires</dt>
          <dd>Never</dd>
        </dl>
      </div>

    </li>
    <li id="license_key_1">
  <div class="primary two-quarter unit-link">
    <img width="70" height="70" class="list-image media" src="/images/license-key.png">
    <dl class="meta">

      <dt>Auth Key</dt>
      <dd>287a990d17b680fe410329cb95af89b9</dd>
      <dt>URL</dt>
      <dd>
        <span id="fe_text_1">
          http://localhost:3000/projects/287a990d17b680fe410329cb95af89b9
        </span>
        <div style="position:relative" id="d_clip_container">
          <button title="Click me to copy to clipboard." class="my_clip_button" id="d_clip_button"><b>Copy To Clipboard...</b></button>
        </div>
      </dd>
      <dt>Expires</dt>
      <dd>2012-11-16 23:39:00 -0500</dd>
    </dl>
  </div>
</li><li id="license_key_2">
  <div class="primary two-quarter unit-link">
    <img width="70" height="70" class="list-image media" src="/images/license-key.png">
    <dl class="meta">

      <dt>Auth Key</dt>
      <dd>ff381cdb94070e1903c5f6fddc31b148</dd>
      <dt>URL</dt>
      <dd>
        <span id="fe_text_2">
          http://localhost:3000/projects/ff381cdb94070e1903c5f6fddc31b148
        </span>
        <div style="position:relative" id="d_clip_container">
          <button title="Click me to copy to clipboard." class="my_clip_button" id="d_clip_button"><b>Copy To Clipboard...</b></button>
        </div>
      </dd>
      <dt>Expires</dt>
      <dd>2013-11-28 23:45:00 -0500</dd>
    </dl>
  </div>
</li>
  </ul> 
```

零剪贴板 JS：

```
 $j(document).ready(function () {

    var myDiv = document.getElementById("keylist");
    var displayNum = 0;
    var nodes = myDiv.getElementsByTagName("span");
    for (var index = 0; index < nodes.length; index++) {
        var node = nodes[index];
        if (node.id.indexOf("fe_text_") == 0) {
            node.id = "fe_text_" + displayNum;

            var clip = new ZeroClipboard.Client();
            ZeroClipboard.setMoviePath("/javascripts/ZeroClipboard.swf")
            clip.setHandCursor(true);

            code = $j("#" + node.id).html();
            clip.glue('d_clip_button');
            clip.addEventListener('mouseDown', function (client) {
                clip.setText(code);
            });

            //Add a complete event to let the user know the text was copied
            clip.addEventListener('complete', function (client, text) {
                alert("Copied text to clipboard: " + code);
            });
            displayNum++;
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T03:32:34.910

一个`id`只能使用一次。您的 HTML 包含使用相同`id`ie的多个元素`<button ... id="d_clip_button"><b>Copy To Clipboard...</b></button>`。

因此，您的代码会在每个循环中不断将 ZeroClipboard 应用于具有该 ID 的第一个元素。

**[演示](http://jsfiddle.net/qfVxj/2/)**— 这是您的代码的重写。

确保在代码中设置回 SWF 路径`/javascripts/ZeroClipboard.swf`。

# ajax - 在 AJAX 调用中使用 Django URL 标签

> ID：13337731
> 
> 赞同：9
> 
> 时间：2012-11-12T02:44:22.453
> 
> 标签：ajax, django

有很多帖子和页面讨论了 Django 和 AJAX 的使用，我在过去一天左右阅读了数百篇文章来寻找这个问题的答案。快速概览：

可能的示例显示了这样的硬编码 URL：

```
$.post("/projects/create/", {"name" : name}, function(data) {... 
```

或者有些使用 URL 模板标签，但没有参数：

```
$.post("{% url create_project %}", {"name" : name}, function(data) {... 
```

但是，我想在 URL 中包含一个 Django 样式的参数。这是我的网址定义：

```
url(r'ajax/entity_name/(?P<pk>\w+)/$',EntityAjaxView.as_view(),name='entity_name'), 
```

是的，我使用的是基于类的视图，它基于 DetailView。默认情况下，此视图会查找 URL 中提供的 pk 值，并且在我将使用的普通模板中：

```
{% url entity_name id_number %} 
```

提供链接。在我的代码中，我想获取在输入框中输入的值作为 pk 值。这是我的 JavaScript 的片段（不起作用）：

```
var id_number = $('#id_endowmententity_set-' + rownum + '-id_number').val()
$.ajax({
    type: "GET",
url: '{% url entity_name id_number %}', 
```

所以，我的问题是，我可以将 URL 模板标签与输入框中的值一起使用吗？

（我知道我可以使用 POST 而不是 GET 并在 POST 数据中传递 id_number，但这不适用于 DetailView。）

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-12T04:43:35.627

Django 是一个服务器端应用程序。Javascript是客户端。Django 模板在服务器上呈现，因此`{% url entity_name id_number %}`在服务器端进行评估，然后将其值返回给客户端。正因为如此，你不可能将 Django 模板与 javascript 结合起来。但是，您可以采取一些措施来解决您的问题。

由于您正在进行 ajax 调用，并且 ajax 调用依赖于一些用户输入，通常客户端向服务器发送任何类型的用户输入的最佳途径是使用查询字符串（`?`URL 中的内容）或发送一个`POST`数据。因此，最简单的方法是更改​​您的 url，使其不包含在 url 中，而是让视图将其`pk`作为数据的一部分。`GET``POST`

```
url(r'ajax/entity_name/$', EntityAjaxView.as_view(), name='entity_name'), 
```

和视图（对不起，我不熟悉基于类的视图）：

```
def entity_name(request):
    pk = request.GET.get('pk')
    ... 
```

在我看来，这似乎是最优雅的解决方案。但是，如果您绝对需要在客户端构建 url，您可以在服务器端生成一个模板 url，然后在客户端替换您需要的任何部分以获得完整的 url。然而，这需要更多的维护，因此更容易出错。这种方法的简单js示例：

```
var id_number = $('#id_endowmententity_set-' + rownum + '-id_number').val(),
    url = '{% url entity_name 0 %}'.replace('0', id_number);
$.ajax({
    type: "GET",
    url: url,
    ...
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-05-08T18:09:52.307

可以使用属性在您选择的元素上设置 Ajax url，它的行为类似于 Django url。重要的是，您甚至可以访问 Javascript 文件中的 url。我经常使用它 HTML

```
<div class="card-body" id="js-products" data-url="{% url 'chart-data' %}">
    <div class="chart-area">
      <canvas id="testChart"></canvas>
    </div>
  </div> 
```

注意：在父 div JAVASCRIPT 上设置的 data-url 属性

```
$(document).ready(function () {

var endpoint = $("#js-products").attr("data-url");
var defaultData = [];
var labels = []
$.ajax({
    method: 'GET',
    url: endpoint,
    success: function (data) {
        labels = data.labels
        defaultData = data.data_default
        setChart()

    },
    error: function (error_data) {
        console.log(error_data)
    }
})

function setChart() {
    var ctx = document.getElementById('testChart').getContext('2d');
    var myChart = new Chart(ctx, {
        type: 'line',
        responsive: true,
        data: {
            labels: labels,
            datasets: [{
                label: 'Monthly Performance',
                data: defaultData,

            }]
        },
        options: {
            scales: {
                yAxes: [{
                    ticks: {
                        beginAtZero: true
                    }
                }]
            }
        }
    });
 }
}); 
```

DJANGO VIEWS 我正在使用 django rest 框架类视图，但您可以使用基于函数或类的视图类 ChartData(APIView)：

```
authentication_classes = []
permission_classes = []

def get(self, request, format=None):
    labels = ['Products', 'User', 'May']
    data_default = [SeedProduct.objects.all().count(),
                    User.objects.all().count(), 4]
    data = {
        'labels': labels,
        'data_default': data_default,
    }

    return Response(data) 
```

DJANGO URLS：从视图中导入视图类

```
path('api/chart/data', views.ChartData.as_view(), name="chart-data"), 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-25T04:46:37.563

这对我有用。我的网址是：

`path('myurl/<str:type>', views.myfunction, name='myfunction')`

我的views.py文件：

```
def myfunction(request,type):
    return render(request, "payment.html", context) 
```

在我的模板中，我通过以下方式解决了这个问题：

```
<button type="button" class="btn"
    onclick="myfunction('forward');">My Button Name
</button>

<script>
function myfunction(type){
    let url = "{% url 'appName:myfunction' 'ok' %}".replace('ok', type);
    $.ajax({
      method: 'POST',
      url: url,
      data: {
          csrfmiddlewaretoken: '{{ csrf_token }}'
      }
  });
  }

</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-21T23:30:24.653

往返服务器只是为了获取 URL 非常耗时。保持 URL 干燥并避免这种情况的最佳策略是生成模拟 Django 的本机 url`reverse`函数的 javascript，然后与客户端 JS 的其余部分一起静态地提供该代码。

[django-render-static](https://github.com/bckohan/django-render-static)就是这样做的。

# c# - 从字符串中删除指定的标点符号

> ID：13337733
> 
> 赞同：3
> 
> 时间：2012-11-12T02:45:00.473
> 
> 标签：c#, regex, string

我有一个字符串需要转换成`String[]`字符串中每个单词的一个。但是，除了属于单词的连字符和撇号外，我不需要任何空格或任何标点符号。

**示例输入：**

`Hello! This is a test and it's a short-er 1\. - [ ] { } ___)`

**由输入组成的数组示例：**

`[ "Hello", "this", "is", "a", "test", "and", "it's", "a", "short-er", "1" ]`

目前这是我尝试过的代码

（注意：第二个在程序中稍后`string.First()`调用时会出错）：

```
private string[] ConvertWordsFromFile(String NewFileText)
{
     char[] delimiterChars = { ' ', ',', '.', ':', '/', '|', '<', '>', '/', '@', '#', '$', '%', '^', '&', '*', '"', '(', ')', ';' };
     string[] words = NewFileText.Split(delimiterChars, StringSplitOptions.RemoveEmptyEntries);
     return words;
} 
```

或者

```
private string[] ConvertWordsFromFile(String NewFileText)
{     
    return Regex.Split(NewFileText, @"\W+");
} 
```

第二个示例使用以下代码崩溃

```
private string GroupWordsByFirstLetter(List<String> words)
{
    var groups =
        from w in words
        group w by w.First();
    return FormatGroupsByAlphabet(groups);
} 
```

具体来说，何时`w.First()`被调用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T03:06:32.167

从字符串中删除不需要的字符

```
string randomString = "thi$ is h@ving s*me inva!id ch@rs";
string excpList ="$@*!"; 
```

LINQ 选项 1

```
var chRemoved = randomString
                  .Select(ch => excpList.Contains(ch) ? (char?)null : ch);

var Result = string.Concat(chRemoved.ToArray()); 
```

LINQ 选项 2

```
var Result = randomString.Split().Select(x => x.Except(excList.ToArray()))
                                      .Select(c => new string(c.ToArray()))
                                      .ToArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T03:02:25.357

这是我处理的一些事情。拆分`\n`并删除任何不需要的字符。

```
 private string ValidChars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ123456789'-";
    private IEnumerable<string> SplitRemoveInvalid(string input)
    {
        string tmp = "";
        foreach(char c in input)
        {
            if(c == '\n')
            {
                if(!String.IsNullOrEmpty(tmp))
                {
                    yield return tmp;
                    tmp = "";
                }
                continue;
            }
            if(ValidChars.Contains(c))
            {
                tmp += tmp;
            }
        }
        if (!String.IsNullOrEmpty(tmp)) yield return tmp;
    } 
```

用法可能是这样的：

```
 string[] array = SplitRemoveInvalid("Hello! This is a test and it's a short-er 1\. - [ ] { } _)")
                     .ToArray(); 
```

我实际上没有测试它，但它应该可以工作。如果没有，它应该很容易修复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T02:53:57.490

使用[string.Split(char [])](http://msdn.microsoft.com/en-us/library/b873y76a.aspx)

```
string strings = "4,6,8\n9,4";
string [] split = strings .Split(new Char [] {',' , '\n' }); 
```

**或者**

如果您收到任何不需要的空物品，请尝试以下操作。[String.Split 方法 (String[], StringSplitOptions)](http://msdn.microsoft.com/en-us/library/tabh47cf.aspx)

```
string [] split = strings .Split(new Char [] {',' , '\n' }, 
                                 StringSplitOptions.RemoveEmptyEntries); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-31T22:01:52.793

这可以很容易地用正则表达式通过匹配单词来完成。我正在使用以下正则表达式，它允许在单词中间使用连字符和撇号，但如果它们出现在单词边界，则会将它们删除。

```
\w(?:[\w'-]*\w)? 
```

[在这里](https://regex101.com/r/bC4qX3/2)查看它的实际应用。

在 C# 中，它可能看起来像这样：

```
private string[] ConvertWordsFromFile(String NewFileText)
{
     return (from m in new Regex(@"\w(?:[\w'-]*\w)?").Matches(NewFileText)
             select m.Value).ToArray();
} 
```

我正在使用 LINQ 从`MatchCollection`返回的`Matches`.

# matlab - MATLAB findpeaks 使用 minpeakdistance

> ID：13337735
> 
> 赞同：1
> 
> 时间：2012-11-12T02:45:47.133
> 
> 标签：matlab, find, local, mathematical-optimization

假设我有一个包含周期性事件的数据集，并且我正在确定一个阈值（峰值）来分隔每个事件（最终找到变异系数）。

我对这些数据进行了多次试验——这些事件的速度有时比其他事件快得多。这个数据也有点嘈杂，所以如果我没有在“findpeaks”函数中设置“minpeakdistance”约束，有时会发现一些“错误的局部最大值”。

我试图找到一种方法来确保无论速度如何，我都能找到“真正的局部最大值”。我一直在目视检查每个试验，以确保我只识别出真正的峰值——如果我也识别出错误的峰值，我已经为那个特定的试验调整了 mpd 值——但这实际上需要几天时间。

有什么建议么？

例子：

对于我收集的大多数试验，以下代码行仅识别真正的最大值：

```
mpd = 'minpeakdistance';

eval(['[t' num2str(a) '.Mspine.pks(:,1),t' num2str(a) '.Mspine.locs] = findpeaks(t' num2str(a) '.Mspine.xyz(:,1), mpd,25);']); 
```

但是，对于试验 11，它们的移动速度要快得多，因此必须将 mpd 调整为 9；但是，如果我将 mpd 值 9 应用于所有试验，它将获取错误的局部最大值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T08:29:32.667

我会去频域寻找这个“周期性事件”。具体来说，如果您知道数据采样/生成的速率，则使用 FFT 将指示数据中所有周期性事件的相对强度。看看： http: [//www.mathworks.se/help/matlab/ref/fft.html](http://www.mathworks.se/help/matlab/ref/fft.html)

# c - c中的动态类型

> ID：13337736
> 
> 赞同：1
> 
> 时间：2012-11-12T02:45:51.283
> 
> 标签：c, gcc, typeof

我们都知道c编程语言中没有动态类型。但是借助`typeof`GCC中的运算符，我们可以用c编程语言实现一些动态类型特性。最近我阅读了它的源代码`talloc`，发现它们做得很优雅.

* * *

问题：

*   我们应该在什么场景下使用该`typeof`技能？
*   请给我更多的例子，特别是Linux内核中使用的技术。（除了`the container_of()`marco）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T02:53:55.590

[根据此链接http://gcc.gnu.org/onlinedocs/gcc/Typeof.html](http://gcc.gnu.org/onlinedocs/gcc/Typeof.html)，似乎一种可能的用法类似于 C++ 模板

因此，您可以创建一个模板化的 C 函数来返回基于指定类型的数组的最小值。我确信这个运营商有深远的影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T03:15:59.190

`typeof`是 GCC 作为扩展提供的编译时构造。它可能用于编写安全宏，例如 gcc 手册中的示例：

```
#define max(a,b) \
({ typeof (a) _a = (a); \
       typeof (b) _b = (b); \
     _a > _b ? _a : _b; }) 
```

正如您提到的 Linux 内核，`container_of()`宏是使用`typeof()`构造的一个很好的例子。它大量用于实现子类化，例如在设备驱动程序中。

内核中的另一个例子是数据结构，如链表，其中嵌入了列表。

```
#define container_of(ptr, type, member) ({                      \
    const typeof( ((type *)0)->member ) *__mptr = (ptr);    \
    (type *)( (char *)__mptr - offsetof(type,member) );}) 
```

# ios - 当我改变手指的速度时如何改变我的画笔大小

> ID：13337739
> 
> 赞同：0
> 
> 时间：2012-11-12T02:46:06.830
> 
> 标签：ios, uigesturerecognizer, uitouch

我有一个关于绘图的项目，我会用手指画一些东西。当我的手指移动得更快时，画笔的大小会更大。我该如何编码？这是关于drawect的代码：在我的项目中，我使用UItouch来检查我的手指。

```
 (void) touchesBegan:(NSSet *) touches withEvent:(UIEvent *) event
{
    if (drawEnable==YES) {
        NSArray * touchesArr=[[event allTouches] allObjects];
        if ([touchesArr count]==1) {
            NSMutableArray *arrayPointsInStroke = [NSMutableArray array];
            NSMutableDictionary *dictStroke = [NSMutableDictionary dictionary];
            [dictStroke setObject:arrayPointsInStroke forKey:@"points"];
            [dictStroke setObject:self.currentColor forKey:@"color"];
            [dictStroke setObject:[NSNumber numberWithFloat:self.currentSize] forKey:@"size"];

            CGPoint point = [[touches anyObject] locationInView:self];
            [arrayPointsInStroke addObject:NSStringFromCGPoint(point)];

            [self.arrayStrokes addObject:dictStroke];
            lastDistance=0;
        }
    }

}
// Add each point to points array
- (void) touchesMoved:(NSSet *) touches withEvent:(UIEvent *) event
{
    float sub_x,sub_y;
    float currentDistance;
    if (penStyle==1) {
    CGPoint point = [[touches anyObject] locationInView:self];
    CGPoint prevPoint = [[touches anyObject] previousLocationInView:self];
    NSMutableArray *arrayPointsInStroke = [[self.arrayStrokes lastObject] objectForKey:@"points"];
    [arrayPointsInStroke addObject:NSStringFromCGPoint(point)];

    CGRect rectToRedraw = CGRectMake(\
                                     ((prevPoint.x>point.x)?point.x:prevPoint.x)-currentSize,\
                                     ((prevPoint.y>point.y)?point.y:prevPoint.y)-currentSize,\
                                     fabs(point.x-prevPoint.x)+2*currentSize,\
                                     fabs(point.y-prevPoint.y)+2*currentSize\
                                     );
    [self setNeedsDisplayInRect:rectToRedraw];
    }
    }

}

// Send over new trace when the touch ends
- (void) touchesEnded:(NSSet *) touches withEvent:(UIEvent *) event
{
    [self.arrayAbandonedStrokes removeAllObjects];
}

// Draw all points, foreign and domestic, to the screen
- (void) drawRect: (CGRect) rect
{   
    //int width = self.pickedImage.size.width;
    //int height = self.pickedImage.size.height-44;
    //CGRect rectForImage = CGRectMake(512-width/2, 384-height/2, width, height);
    //[self.pickedImage drawInRect:rectForImage];

    if (self.arrayStrokes)
    {
        int arraynum = 0;
        // each iteration draw a stroke
        // line segments within a single stroke (path) has the same color and line width
        for (NSDictionary *dictStroke in self.arrayStrokes)
        {
            NSArray *arrayPointsInstroke = [dictStroke objectForKey:@"points"];
            UIColor *color = [dictStroke objectForKey:@"color"];
            float size = [[dictStroke objectForKey:@"size"] floatValue];
            [color set];        // equivalent to both setFill and setStroke
            // draw the stroke, line by line, with rounded joints
            UIBezierPath* pathLines = [UIBezierPath bezierPath];
            CGPoint pointStart = CGPointFromString([arrayPointsInstroke objectAtIndex:0]);
            [pathLines moveToPoint:pointStart];
            for (int i = 0; i < (arrayPointsInstroke.count - 1); i++)
            {
                CGPoint pointNext = CGPointFromString([arrayPointsInstroke objectAtIndex:i+1]);
                [pathLines addLineToPoint:pointNext];
            }
            pathLines.lineWidth = size;
            pathLines.lineJoinStyle = kCGLineJoinRound;
            pathLines.lineCapStyle = kCGLineCapRound;
            [pathLines stroke];

            arraynum++;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T09:15:38.330

看看平滑绘图，你可以在这里找到：

[https://github.com/krzysztofzablocki/smooth-drawing](https://github.com/krzysztofzablocki/smooth-drawing)

它完全符合您的需要，通过使用`UIPanGestureRecognizer`'`velocityInView`方法，并将其值存储在 Array 中以供绘制时使用。

# html - 最小高度 100% 在底部停止

> ID：13337741
> 
> 赞同：0
> 
> 时间：2012-11-12T02:46:09.950
> 
> 标签：html, css

我已经正确设置了我的高度，以便它可以延伸到底部，但它不会延伸到底部，它只是停止并且其他内容延伸到它之外。

如果你把我的代码放进去，你就会明白我的意思。

HTML： http: [//pastebin.com/ScvdB4zs](http://pastebin.com/ScvdB4zs)

CSS： http: [//pastebin.com/mxrZ6Gd9](http://pastebin.com/mxrZ6Gd9)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T03:12:18.493

尝试向导航 div 添加溢出以扩展内容

```
.nav { 
    overflow:scroll;
    background-color:#153E7E; 
    height:500px; 
    min-height:100%; 
    width:250px; 
    border-right:5px solid #151B54; 
    float:left; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T03:23:49.650

如果我是你，我会简单地取出最小高度并将 .nav 和 .dashboard 的高度更改为任何你想要的。它的可定制性要高得多。只是一个建议：我会把仪表板做成一定的百分比，这样不同尺寸屏幕的人就可以有同样的审美乐趣。

# layout - 具有自动布局调整功能的免费依赖映射工具？

> ID：13337746
> 
> 赞同：8
> 
> 时间：2012-11-12T02:46:55.163
> 
> 标签：layout, graph, dependencies, project-management

我正在寻找一种工具，它可以让我绘制出应用程序、服务器等的依赖关系图。我们有很多服务器和很多数据库，无法跟踪什么依赖于什么。 **请注意，我不是在谈论项目中的代码或类依赖关系，而是对服务器、数据库等的依赖关系。**

当我坐下来创建一个示例地图时，我最终得到了这样的结果：

![糟糕的地图](../Images/45114aede778ee5aa610cbba9fd392a5.png)

现在，我在纸上或 MS Paint 中这样做的问题是布局不可调整。例如，如果我在上面的例子中拿了一个节点并移动了它，我希望其他的线和节点调整到我刚刚移动的那个的新位置。

我检查了一些“思维导图”应用程序，例如 FreeMind，发现它过于严格。例如，在该应用程序中，您不能随意绘制并连接它，您必须指定节点及其关系（子、父、兄弟）。此外，没有能力对任何事情发表评论。例如，在上图中，我希望能够在地图中包含每个事物的评论，但在单击该对象之前将它们隐藏起来。这样，我可以写很多关于这种关系及其历史的文字，而不会弄乱地图。

**在最基本的层面上，我想要的只是一个超级简单的应用程序，它可以让我绘制正方形，插入文本（和隐藏的评论），并用箭头连接它们，然后允许我移动正方形并让周围的正方形和箭头自动调整。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T03:09:54.950

制作此类一般图表的一个好工具是[GraphViz](http://www.graphviz.org/)。您将输入指定为 .dot 文件，其中包含类似于（对于您的示例）的说明：

```
digraph G {
    web_app -> server1
    web_app -> sql_database
    web_app -> repository
    server1 -> esx_server1
    ...
} 
```

（有许多格式化指令，例如您将在顶点上使用的正确标签，而不是我在上面使用的短名称。）

然后运行命令行工具将图形布局为图像。有许多布局算法，因此您通常会通过反复试验来找到最适合您的图形的一种。

GraphViz 可以在许多图表上做相当好的布局工作。但它的伟大之处在于基于文本的输入；从程序自动生成输入或将其保存在版本控制等中很容易。

# iphone - 如何在 iOS 上获取 Unzip 文件夹的唯一路径

> ID：13337750
> 
> 赞同：2
> 
> 时间：2012-11-12T02:48:02.843
> 
> 标签：iphone, objective-c, ios, xcode, ipad

在 iOS 上：

如何解决解压缩文件、获取唯一路径名、在其他视图中使用此路径以及在视图卸载后删除捕获文件的整个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T03:10:04.840

我会建议你使用时间戳，将其存储在 NSUserDefaults 中。

在 AppDelegate 的 applicationWillTerminate 方法上，检查 NSUserDefaults 是否具有您设置的密钥，如果有，则删除文件并删除密钥。

```
- (void)applicationWillTerminate:(UIApplication *)application
{
    if([[NSUserDefaults standardUserDefaults] objectForKey:@"KEY_FOR_PATH"] != nil)
    {
        [[NSFileManager defaultManager] removeItemAtPath:[[NSUserDefaults standardUserDefaults] objectForKey:@"KEY_FOR_PATH"] error:nil];
        [[NSUserDefaults standardUserDefaults] removeObjectForKey:@"KEY_FOR_PATH"];
        [[NSUserDefaults standardUserDefaults] synchronize];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T03:07:59.297

`mkdtmp`使用（在 中声明）创建一个唯一的临时目录`unistd.h`，然后展开到该目录。

然后，如果您在某个更具体的地方需要它，请*安全地*移动（例如，以保证不会替换现有文件/目录的方式）。`-[NSFileManager replaceItemAtURL:withItemAtURL:backupItemName:options:resultingItemURL:error:]`如果您更喜欢 Foundation API，似乎有能力采取行动。

# html - 如何通过 Selenium 2 验证弹出窗口中的文本？

> ID：13337755
> 
> 赞同：1
> 
> 时间：2012-11-12T02:49:08.623
> 
> 标签：html, xpath, selenium, selenium-webdriver

我正在尝试编写一个自动化测试，一旦收到显示“促销已成功执行”消息的弹出窗口，它将布尔结果设置为“真”。

```
<div class="appriseOuter" style="left: 551px; top: 100px; display: block;">
    <div class="appriseInner">
        The promotion was successfully executed
        <div class="aButtons">
            <button value="ok">OK</button>
        </div>
    </div>
</div> 
```

我尝试使用 xpath 值来查看文本是否正确，但我的测试并没有超过这一点——任何人都可以弄清楚如何正确检查文本吗？

```
String promotion = wait.until(selenium_driver.visibilityOfElementLocated(By.xpath("//div[@class='appriseOverlay']/div[@class='appriseInner']"))).getText();

if(promotion.contains("The promotion successfully executed")) result = true; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T11:58:16.760

也许这是一个非常简单的错字...您的 HTML 代码不包含任何`<div>`带有 class的内容`appriseOverlay`。尝试更正您的 xpath 以进行搜索`appriseOuter`。

# java - 创建excel文件 - 编译错误

> ID：13337756
> 
> 赞同：2
> 
> 时间：2012-11-12T02:49:13.087
> 
> 标签：java, excel, compilation, compiler-errors, apache-poi

我尝试了下面的代码，但不好，我无法创建 excel 文档，打开和关闭它。

```
package tests;

import java.io.*;

import org.apache.poi.ss.usermodel.Workbook;  
import org.apache.poi.xssf.util.*;  
import org.apache.poi.xssf.usermodel.XSSFWorkbook;

public class Xls_Reader  {

Workbook wb = new XSSFWorkbook();  
FileOutputStream fileOut = new FileOutputStream("workbook.xlsx");

} 
```

我收到以下错误：

```
Default constructor can not handle exception type FileNotFoundException 
    thrown by implicit super constructor . Must define an explicit constructor. 
```

有人可以帮我理解使用 POI API 创建 excel 文件的概念吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T03:01:11.987

这不会编译：

```
import java.io.*;

public class Xls_Reader  {

    FileOutputStream fileOut = new FileOutputStream("workbook.xlsx");
} 
```

但这修复了错误：

```
import java.io.*;

public class Xls_Reader  {

    FileOutputStream fileOut = new FileOutputStream("workbook.xlsx");

    public Xls_Reader() throws IOException {
    }
} 
```

在构造实例时实例化流。如果失败了，建筑也会失败。

* * *

顺便说一句 - 这是“Java 101”，与 Apache POI 无关。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T03:03:59.977

您可以在子类中声明一个显式抛出 FileNotFoundException 的构造函数：

```
public Xls_Reader() throws FileNotFoundException {...} 
```

或者你用 try-catch 块包围你的基类中的代码，而不是抛出 FileNotFoundException 异常：

```
 FileInputStream fileOut = null;
    try { 
          FileOutputStream fileOut = new FileOutputStream("workbook.xlsx");
          // do something
        } 
   catch (FileNotFoundException ex) { ... } 
   finally {
        try 
        {
        // do something
            fileOut();
        } catch (IOException ex) {... }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T03:05:05.910

这些例子可以帮助你更好地理解

1.  [使用 Apache POI 创建 Excel(.xlsx) 文档](http://www.roseindia.net/tutorials/poi/ApachePoiCreateXlsx.shtml)
2.  [使用 Apache POI 读写 Excel 文件](http://openwritings.net/public/java/read-and-write-excel-file-using-apache-poi)

# networking - 使用的端口未显示在 netstat -a 结果中

> ID：13337759
> 
> 赞同：9
> 
> 时间：2012-11-12T02:49:45.140
> 
> 标签：networking, windows-7, activemq, netstat

这个问题最近在我尝试启动 active-mq（默认情况下在端口 61616 上启动）时开始出现。但突然它停止在该端口上提出 JVM_BIND 问题。即使重新启动计算机后问题也没有消失。

主要问题是 Windows 7 上的 netstat -a 命令没有显示 61616 已被消耗。但是当我编写一个简单的 Java 程序来将一个套接字绑定到那个端口时，我肯定做不到！

我最终通过移动到不同的端口来启动 active-mq。但是，谁能帮我找出为什么所有端口都没有出现在 netstat -a 结果中？谢谢。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-12T02:55:31.233

不要使用临时端口： [http ://www.ncftp.com/ncftpd/doc/misc/ephemeral_ports.html](http://www.ncftp.com/ncftpd/doc/misc/ephemeral_ports.html)

[IPv4 允许的最大 TCP/IP 网络端口号是多少？](https://stackoverflow.com/questions/113224/what-is-the-largest-tcp-ip-network-port-number-allowable-for-ipv4)

# python - 网络爬虫类

> ID：13337760
> 
> 赞同：0
> 
> 时间：2012-11-12T02:50:12.533
> 
> 标签：python, parsing, recursion, web

```
class Crawler1(object):
    def __init__(self):
        'constructor'
        self.visited = []
        self.will_visit = []

    def reset(self):
        'reset the visited links'
        self.visited = []
        self.will_visit = []

    def crawl(self, url, n):
        'crawl to depth n starting at url'
        self.analyze(url)
        if n < 0:
            self.reset()
        elif url in self.visted:
            self.crawl(self.will_visit[-1],n-1)
        else:
            self.visited.append(url)
            self.analyze(url)
            self.visited.append(url)
            self.will_visit.pop(-1)
            self.crawl(self.will_visit[-1],n-1)

    def analyze(self, url):
        'returns the list of URLs found in the page url'
        print("Visiting", url)
        content = urlopen(url).read().decode()
        collector = Collector(url)
        collector.feed(content)
        urls = collector.getLinks()
        for i in urls:
            if i in self.will_visit:
                pass
            else:
                self.will_visit.append(i) 
```

我希望该程序通过一系列链接运行，但仅在“n”允许的范围内运行

我不确定代码有什么问题，尽管我确信它已经足够了。一些提示会很好。

如果 n = 1 并且在 Site1 上存在 Site2 和 Site3 的链接，则预期输出：

```
Visiting [Site1]
Visiting [Site2]
Visiting [Site3] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T03:29:07.587

您需要仔细考虑它的行为方式，尤其是在它决定如何爬到另一个页面时。这段代码集中在`crawl`方法中：

1.  如果`n < 0`，那么您已经爬得足够深并且不想做任何事情。所以在这种情况下简单地返回。

2.  否则，分析页面。然后，您想爬到每个新的 url，深度为`n-1`.

我认为，部分困惑是您保留了要访问的 URL 队列，而且还递归地爬行。一方面，这意味着队列不仅包含您要按顺序访问的最后一个抓取的 url 的子节点，还包含来自其他已抓取但尚未完全处理的节点的子节点。很难以这种方式管理深度优先搜索的形状。

相反，我会删除该`will_visit`变量，并`analyze`返回找到的链接列表。然后根据上面的步骤 2 处理该列表，例如：

```
# Crawl this page and process its links
child_urls = self.analyze(url)    
for u in child_urls:
    if u in self.visited:
        continue  # Do nothing, because it's already been visited
    self.crawl(u, n-1) 
```

为此，您还需要更改`analyze`为简单地返回 url 列表，而不是将它们放入堆栈：

```
def analyze(self, url):
    ...
    urls = collector.getLinks()
    returns urls 
```

# javascript - 编写基本原型脚本时javascript如何检查事件类型？

> ID：13337765
> 
> 赞同：0
> 
> 时间：2012-11-12T02:50:32.330
> 
> 标签：javascript, events, prototype

这是我的html代码结构：

```
<dl id="J_tab">
    <dt>
        <a href="#tab1">tab1</a><a href="#tab2">tab2</a><a href="#tab3">tab3</a>
    </dt>
    <dd id="tab1">
      ..
    </dd>
    <dd id="tab2">
      ...
    </dd>
    <dd id="tab3">
      ..
    </dd>

</dl> 
```

Javascript代码：

```
var tab = function(id,anchorContainer,curClass){
  this.curClass = curClass || 'current';
  this.tabContainer = document.getElementById(id);
  this.anchorContainer = this.tabContainer.getElementsByTagName(anchorContainer)[0];
  this.links = this.anchorContainer.getElementsByTagName('a');
  this.init();
};
tab.prototype = {
constructor:tab,
init: function(){
  var container = this.tabContainer;
  container.onclick = function(event){
     var type = this.checkType(event);
     if(type == 'onclick'){
         //do this...
     }else if(type == 'onmouseover'){
         //do this....
     }else{
         //do nothing...
     }
  }
},
  show: function(){
      alert(123);
  },
  hide: function(){
      alert(456);
   },
  checkType: function(event){
    var event = event || window.event;
    return event.type;
   }
 }
 var tab = new tab('J_tab','dt'); 
```

我没有继续，因为我在检查事件类型时遇到问题。错误导致类型未定义。如何使用我的代码检查事件类型？

this.checkType() 可以像下面这样吗？

```
if(event=="click" || event==null){
container.onclick=function(){

    }
}else if(event=="mouseover"){
container.onmouseover=function(){

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T02:53:14.757

`this`在您的`onclick`事件处理程序内部是对 DOM 元素的引用，而不是您的对象。

要访问您的对象，请将其存储在外部范围的局部变量中：

```
init: function() {
    var self = this;

    this.tabContainer.onclick = function(event) {
        var type = self.checkType(event);
        // Keep up the good work...
    }
} 
```

并且向下`checkType`，只需使用这个：

```
checkType: function(event) {
    return (event || window.event).type;
} 
```

* * *

或者，由于里面的代码`checkType`非常简单，您可以考虑将其全部内联：

```
init: function() {
    this.tabContainer.onclick = function(event) {
        var type = (event || window.event).type;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T04:21:19.363

除了约瑟夫的答案之外的一些东西。

函数的`this`设置取决于函数的调用方式。如果您使用以下方法将函数分配给 DOM 元素：

```
someElement.onclick = someObject.method; 
```

那么该函数将（有效地）被称为：

```
someElement.method(); 
```

设置`this`为. `method`_ `someElement`当将函数分配为对象的属性，然后将函数作为对象的方法调用时，通常会发生同样的事情。

对代码的一些评论：

1.  按照惯例，构造函数以大写字母开头（表示它们应该用 来调用`new`）。

2.  使用函数声明而不是表达式可能更好（更清晰）。

3.  我不知道为什么流行`init`在原型上分配一个方法，然后从构造函数中调用它（除非您打算动态更改方法，这似乎不是一个好主意）。它似乎只是将代码分成两个可能合二为一的地方。只需将 init 函数作为代码放入构造函数中即可

例如：

```
function Tab(id, anchorContainer, curClass) {
  this.curClass = curClass || 'current';
  this.tabContainer = document.getElementById(id);
  this.anchorContainer = this.tabContainer.getElementsByTagName(anchorContainer)[0];
  this.links = this.anchorContainer.getElementsByTagName('a');

  // Put other "init" code here
  // Use the generic instance name for the instance, not "self"
  var tab = this;

  // From here on, use 'tab' not 'this' to refer to the instance
  tab.tabContainer.onclick = function(event) {
     /* instance is 'tab', element is 'this' */
  }

  Tab.prototype = { /* ... */ };
} 
```

关于`init`函数和使用函数表达式：

```
var foo = new Foo(); // Happy :-)

var Foo = function(){
  /* init code */;
} 
```

但

```
var Foo = function(){
  this.init();
}

var foo = new Foo(); // Error: this.init is not a function (or similar)

Foo.prototype = {
  init: function(){ /* init code */ }
}; 
```

# ruby-on-rails - 防止通过 URL 输入进行注入

> ID：13337768
> 
> 赞同：2
> 
> 时间：2012-11-12T02:50:53.533
> 
> 标签：ruby-on-rails, security, unix

在我的 Rails 控制器中，我获取用户输入的 URL 并运行系统命令`wget`：

```
system("wget #{url}") 
```

恐怕用户可能会输入类似的东西`www.google.com && rm -rf .`，这会使控制器执行命令

```
system("wget www.google.com && rm -rf .") 
```

这会删除所有内容。我应该如何防止这种攻击？我不确定用户还可以放入哪些其他东西来损害我的系统。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T03:03:03.157

根据[这个线程](http://www.ruby-forum.com/topic/196871)：

您可以通过单独将参数传递给脚本来避免 shell 扩展：

```
system("/bin/wget", params[:url]) 
```

根据[Kernel#system](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-system)上的文档，此表单不会调用 shell。像这样`&&`的构造是 shell 构造，所以如果你使用这种形式，那么参数将`/bin/wget`作为参数传递给字面意思。

也就是说，仍然对输入持怀疑态度，在可能的情况下进行清理，如果可行，以非特权（或者更好的是，被监禁的）用户身份运行它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T02:57:45.857

将命令与`&&`(or `;`, or `|`) 连接在一起是一个 shell 功能，而不是它`wget`本身可以理解的东西。如果您正在使用将命令行传递给 shell 的函数（例如`system()`许多语言中的函数），那么您将处于危险之中。如果您`wget`直接执行程序（而不是执行 shell 并给它一个命令行），您将不会面临这种特定攻击的风险。

然而，攻击者仍然可以做其他事情，比如滥用覆盖文件`wget`的选项。`-O`你最好不要使用`wget`——如果你的目标是下载一个文件，为什么不直接在你自己的程序代码中使用一个 HTTP 库呢？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T03:19:35.917

如果您只想检索 URL 的内容，最好完全避免使用“系统”或任何其他在服务器上运行命令的方式。

您可以使用 http 客户端（例如 Httparty）来获取 URL 内容。

`response = HTTParty.get("#{url}")`

# opengl - GL：将图像映射到立方体的面：使用 ilutGLLoadImage() 获取全黑纹理

> ID：13337785
> 
> 赞同：0
> 
> 时间：2012-11-12T02:53:18.180
> 
> 标签：opengl, texture-mapping, devil

我只是想将图像作为纹理映射到立方体的表面并显示。立方体上没有我的图像，而是完全黑色的。我的图像都是 64x64 jpg 的。

我的应用程序代码如下。最初它是一个生成 2 个棋盘纹理的程序，在立方体的所有面上一次显示 1 个，允许用户在它们之间切换。我想要一个图像，而不是所有面孔上的棋盘格。我已经注释掉了他们的纹理生成和纹理加载代码，最重要的是用 ilutGLLoadImage()（来自 DevIL）替换它：它应该用一块石头杀死大多数加载图像纹理的鸟。这发生在 init() 中。唯一的控制台输出是“1,2”（来自我的 cout），这意味着图像已加载并提供了有效的纹理 ID。为什么立方体是黑色的？

应用程序代码（init() 是一个很好的起点）：

```
#include "Angel.h"
#include <IL\config.h>
#include <IL\ilut_config.h>
#include <IL\il.h>
#include <IL\ilu.h>
#include <IL\ilut.h>
#include <iostream>
using namespace std;

const int  NumTriangles = 12; // (6 faces)(2 triangles/face)
const int  NumVertices  = 3 * NumTriangles;
const int  TextureSize  = 64;

typedef Angel::vec4 point4;
typedef Angel::vec4 color4;

// Texture objects and storage for texture image
//GLuint textures[2];

GLuint tex1;
GLuint tex2;

//GLubyte image[TextureSize][TextureSize][3];
//GLubyte image2[TextureSize][TextureSize][3];

// Vertex data arrays
point4  points[NumVertices];
//color4  quad_colors[NumVertices];
vec2    tex_coords[NumVertices];

// Array of rotation angles (in degrees) for each coordinate axis
enum { Xaxis = 0, Yaxis = 1, Zaxis = 2, NumAxes = 3 };
int      Axis = Xaxis;
GLfloat  Theta[NumAxes] = { 0.0, 0.0, 0.0 };
GLuint   theta;

//----------------------------------------------------------------------------

int Index = 0;

void
quad( int a, int b, int c, int d )
{
    point4 vertices[8] = {
    point4( -0.5, -0.5,  0.5, 1.0 ),
    point4( -0.5,  0.5,  0.5, 1.0 ),
    point4(  0.5,  0.5,  0.5, 1.0 ),
    point4(  0.5, -0.5,  0.5, 1.0 ),
    point4( -0.5, -0.5, -0.5, 1.0 ),
    point4( -0.5,  0.5, -0.5, 1.0 ),
    point4(  0.5,  0.5, -0.5, 1.0 ),
    point4(  0.5, -0.5, -0.5, 1.0 )
    };

    color4 colors[8] = {
    color4( 0.0, 0.0, 0.0, 1.0 ),  // black
    color4( 1.0, 0.0, 0.0, 1.0 ),  // red
    color4( 1.0, 1.0, 0.0, 1.0 ),  // yellow
    color4( 0.0, 1.0, 0.0, 1.0 ),  // green
    color4( 0.0, 0.0, 1.0, 1.0 ),  // blue
    color4( 1.0, 0.0, 1.0, 1.0 ),  // magenta
    color4( 0.0, 1.0, 1.0, 1.0 ),  // white
    color4( 1.0, 1.0, 1.0, 1.0 )   // cyan
    };

    // bottom-left texture coord
//    quad_colors[Index] = colors[a];
    points[Index] = vertices[a];
    tex_coords[Index] = vec2( 0.0, 0.0 );
    Index++;

    // top-left texture coord
//    quad_colors[Index] = colors[a];
    points[Index] = vertices[b];
    tex_coords[Index] = vec2( 0.0, 1.0 );
    Index++;

    // top-right
//    quad_colors[Index] = colors[a];
    points[Index] = vertices[c];
    tex_coords[Index] = vec2( 1.0, 1.0 );
    Index++;

    // bottom-left
//    quad_colors[Index] = colors[a];
    points[Index] = vertices[a];
    tex_coords[Index] = vec2( 0.0, 0.0 );
    Index++;

    // top-right
//    quad_colors[Index] = colors[a];
    points[Index] = vertices[c];
    tex_coords[Index] = vec2( 1.0, 1.0 );
    Index++;

    // bottom-right
//    quad_colors[Index] = colors[a];
    points[Index] = vertices[d];
    tex_coords[Index] = vec2( 1.0, 0.0 );
    Index++;
}

//----------------------------------------------------------------------------

void
colorcube()
{
    quad( 1, 0, 3, 2 );
    quad( 2, 3, 7, 6 );
    quad( 3, 0, 4, 7 );
    quad( 6, 5, 1, 2 );
    quad( 4, 5, 6, 7 );
    quad( 5, 4, 0, 1 );
}

//----------------------------------------------------------------------------

void
init()
{
    colorcube();

    ILuint devilError;

    ilInit();
    iluInit();
    ilutInit();

    devilError = ilGetError();

    if (devilError != IL_NO_ERROR) {
      printf ("Devil Error (ilInit: %s\n", iluErrorString(devilError));
      exit (2);
    }

    ilutRenderer(ILUT_OPENGL);

    GLuint openglID, openglError;

    tex1 = ilutGLLoadImage("test1.jpg");
    tex2 = ilutGLLoadImage("test2.jpg");

    cout << tex1 <<  "," << tex2 << endl;

    devilError = ilGetError();

    if (devilError != IL_NO_ERROR) {
      printf ("Error: %s\n", iluGetString (devilError));
      exit (2);
    }

    if (openglError != GL_NO_ERROR) {
      printf ("Opengl Error (ilutGLBindTexImage): %s\n", gluGetString (openglError));
      exit (2);
    }

//    // Create a checkerboard pattern
//    for ( int i = 0; i < 64; i++ ) {
//        for ( int j = 0; j < 64; j++ ) {
//            GLubyte c = (((i & 0x8) == 0) ^ ((j & 0x8)  == 0)) * 255;
//            image[i][j][0]  = c;
//            image[i][j][1]  = c;
//            image[i][j][2]  = c;
//            image2[i][j][0] = c;
//            image2[i][j][1] = 0;
//            image2[i][j][2] = c;
//        }
//    }
//
//    // Initialize texture objects
//
//    // Get unused texture identifiers
//    glGenTextures( 2, textures );
//

    glBindTexture( GL_TEXTURE_2D, tex1 );
//
//    // Specify that 'image' is to be used as a two-dimensional texture
//    glTexImage2D( GL_TEXTURE_2D, 0, GL_RGB, TextureSize, TextureSize, 0,
//        GL_RGB, GL_UNSIGNED_BYTE, image );
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT );
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT );
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR );
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST_MIPMAP_NEAREST );
//    glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_REPLACE);
//
    glBindTexture( GL_TEXTURE_2D, tex2 );
//    glTexImage2D( GL_TEXTURE_2D, 0, GL_RGB, TextureSize, TextureSize, 0,
//        GL_RGB, GL_UNSIGNED_BYTE, image2 );
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT );
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT );
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR );
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST_MIPMAP_NEAREST );
//    glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_REPLACE);

    glActiveTexture( GL_TEXTURE0 );
    // Set the current texture object
    glBindTexture( GL_TEXTURE_2D, tex1 );

    // Create a vertex array object
    GLuint vao;
    glGenVertexArrays( 1, &vao );
    glBindVertexArray( vao );

    // Create and initialize a buffer object
    GLuint buffer;
    glGenBuffers( 1, &buffer );
    glBindBuffer( GL_ARRAY_BUFFER, buffer );
//    glBufferData( GL_ARRAY_BUFFER,
//        sizeof(points) + sizeof(quad_colors) + sizeof(tex_coords),
//        NULL, GL_STATIC_DRAW );
    glBufferData( GL_ARRAY_BUFFER,
          sizeof(points) + sizeof(tex_coords),
          NULL, GL_STATIC_DRAW );

    // Specify an offset to keep track of where we're placing data in our
    //   vertex array buffer.  We'll use the same technique when we
    //   associate the offsets with vertex attribute pointers.
    GLintptr offset = 0;
    glBufferSubData( GL_ARRAY_BUFFER, offset, sizeof(points), points );
    offset += sizeof(points);

//    glBufferSubData( GL_ARRAY_BUFFER, offset,
//           sizeof(quad_colors), quad_colors );
//    offset += sizeof(quad_colors);

    glBufferSubData( GL_ARRAY_BUFFER, offset, sizeof(tex_coords), tex_coords );

    // Load shaders and use the resulting shader program
    GLuint program = InitShader( "vshader71.glsl", "fshader71.glsl" );
    glUseProgram( program );

    // set up vertex arrays
    offset = 0;
    GLuint vPosition = glGetAttribLocation( program, "vPosition" );
    glEnableVertexAttribArray( vPosition );
    glVertexAttribPointer( vPosition, 4, GL_FLOAT, GL_FALSE, 0,
               BUFFER_OFFSET(offset) );
    offset += sizeof(points);

//    GLuint vColor = glGetAttribLocation( program, "vColor" );
//    glEnableVertexAttribArray( vColor );
//    glVertexAttribPointer( vColor, 4, GL_FLOAT, GL_FALSE, 0,
//             BUFFER_OFFSET(offset) );
//    offset += sizeof(quad_colors);

    // Pass the texture coordinates as a vertex attribute with the identifier 'vTextCoord'
    GLuint vTexCoord = glGetAttribLocation( program, "vTexCoord" );
    glEnableVertexAttribArray( vTexCoord );
    glVertexAttribPointer( vTexCoord, 2, GL_FLOAT, GL_FALSE, 0,
               BUFFER_OFFSET(offset) );

    // Set the value of the fragment shader texture sampler variable
    //   ("texture") to the the appropriate texture unit. In this case,
    //   zero, for GL_TEXTURE0 which was previously set by calling
    //   glActiveTexture().
    glUniform1i( glGetUniformLocation(program, "texture"), 0 );

    theta = glGetUniformLocation( program, "theta" );

    glEnable( GL_DEPTH_TEST );

    glClearColor( 1.0, 1.0, 1.0, 1.0 );
}

void
display( void )
{
    glClear( GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT );

    glUniform3fv( theta, 1, Theta );

    glDrawArrays( GL_TRIANGLES, 0, NumVertices );

    glutSwapBuffers();
}

//----------------------------------------------------------------------------

void
mouse( int button, int state, int x, int y )
{
    if ( state == GLUT_DOWN ) {
    switch( button ) {
        case GLUT_LEFT_BUTTON:    Axis = Xaxis;  break;
        case GLUT_MIDDLE_BUTTON:  Axis = Yaxis;  break;
        case GLUT_RIGHT_BUTTON:   Axis = Zaxis;  break;
    }
    }
}

//----------------------------------------------------------------------------

void
idle( void )
{
    Theta[Axis] += 0.01;

    if ( Theta[Axis] > 360.0 ) {
    Theta[Axis] -= 360.0;
    }

    glutPostRedisplay();
}

//----------------------------------------------------------------------------

void
keyboard( unsigned char key, int mousex, int mousey )
{
    switch( key ) {
    case 033: // Escape Key
    case 'q': case 'Q':
        exit( EXIT_SUCCESS );
        break;
    case '1':
        glBindTexture( GL_TEXTURE_2D, tex1 );
        break;

    case '2':
        glBindTexture( GL_TEXTURE_2D, tex2 );
        break;
    }

    glutPostRedisplay();
}

//----------------------------------------------------------------------------

int
main( int argc, char **argv )
{
    glutInit( &argc, argv );
    glutInitDisplayMode( GLUT_RGBA | GLUT_DOUBLE | GLUT_DEPTH );
    glutInitWindowSize( 512, 512 );
    glutInitContextVersion( 3, 2 );
    glutInitContextProfile( GLUT_CORE_PROFILE );
    glutCreateWindow( "Texture Cube" );

    glewExperimental = GL_TRUE;
    glewInit();

    init();

    glutDisplayFunc( display );
    glutKeyboardFunc( keyboard );
    glutMouseFunc( mouse );
    glutIdleFunc( idle );

    glutMainLoop();
    return 0;
} 
```

顶点着色器：

```
#version 150

in  vec4 vPosition;

in  vec2 vTexCoord;

out vec4 color;
out vec2 texCoord;

uniform vec3 theta;

void main() 
{
    const float  DegreesToRadians = 3.14159265 / 180.0;

    vec3 c = cos( DegreesToRadians * theta );
    vec3 s = sin( DegreesToRadians * theta );

    mat4 rx = mat4( 1.0, 0.0,  0.0, 0.0,
            0.0, c.x, -s.x, 0.0,
            0.0, s.x,  c.x, 0.0,
            0.0, 0.0,  0.0, 1.0);

    mat4 ry = mat4(   c.y, 0.0, s.y, 0.0,
              0.0, 1.0, 0.0, 0.0,
             -s.y, 0.0, c.y, 0.0,
              0.0, 0.0, 0.0, 1.0 );

    // Workaround for bug in ATI driver
    ry[1][0] = 0.0;
    ry[1][1] = 1.0;

    mat4 rz = mat4( c.z, -s.z, 0.0, 0.0,
            s.z,  c.z, 0.0, 0.0,
            0.0,  0.0, 1.0, 0.0,
            0.0,  0.0, 0.0, 1.0 );

    // Workaround for bug in ATI driver
    rz[2][2] = 1.0;

    texCoord    = vTexCoord;
    gl_Position = rz * ry * rx * vPosition;
} 
```

片段着色器：

```
#version 150

in  vec2 texCoord;

out vec4 fColor;

uniform sampler2D texture;

void main() 
{ 
    fColor = texture2D( texture, texCoord );
} 
```

# ios - 如何在 NSDictionary 中获取唯一键？

> ID：13337789
> 
> 赞同：2
> 
> 时间：2012-11-12T02:53:36.560
> 
> 标签：ios, nsdictionary

这是我拥有的 NSDictionary：

```
locations: {
    509f3a914d026b589ba3a090 =     {
        coordinates =         {
            latitude = "29.76429";
            longitude = "-95.3837";
        };
        country = USA;
        id = 509f3a914d026b589ba3a090;
        name = Houston;
        state = Texas;
    };
    509f3b3a4d026b589ba3a091 =     {
        coordinates =         {
            latitude = "3.138722";
            longitude = "101.686849";
        };
        country = Malaysia;
        id = 509f3b3a4d026b589ba3a091;
        name = "Kuala Lumpur";
    };
    509f475b4d026b589ba3a093 =     {
        coordinates =         {
            latitude = "32.803468";
            longitude = "-96.769879";
        };
        country = USA;
        id = 509f475b4d026b589ba3a093;
        name = Dallas;
        state = Texas;
    };
} 
```

我想要做的是获取国家，正如你所知道的，我对“美国”有两个值。我只想推断美国和马来西亚。而不是美国，马来西亚，美国。

我希望我说得通

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T03:20:21.620

我认为最简单的方法是：

```
[NSSet setWithArray:[[dictionary allValues] valueForKey:@"country"]]; 
```

那么你：

1.  获取顶级字典中所有值的数组；
2.  调用`valueForKey:`该数组——它被定义为`valueForKey:`依次调用数组中的所有内容，然后返回一个答案数组，并且`valueForKey:`在字典上与所`objectForKey:`讨论的键不带有“@”相同；
3.  从结果数组创建一个集合，从而解决任何重复。

`allObjects`如果你想得到一个数组，你可以在结果集上添加一个调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T03:15:27.340

假设您有一本名为位置的字典，而字典中的一个对象是一个国家/地区。你也说只是推断我假设你想将它添加到某个数组或其他东西。对于这个问题，您可以使用一组来确保您不会多次进入同一个国家/地区。

```
NSMutableSet *set = [NSMutableSet set];
NSMutableArray *array = [NSMutableArray array];

NSString *country = [locations objectForKey:@"country"]; 
if ([set containsObject:country])
{
    [array addObject:country]; // Extrapolating country from dictionary to array
    [set addObject:country]; // Addind it to set to check later
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T03:19:35.237

我会这样做：

```
NSMutableArray *newArray = [NSMutableArray array];
NSMutableSet *currentCountries = [NSMutableSet set];
for(NSDictionary* dic in [[currentDict objectForKey:@"locations"] allValues])
{
    if(![currentCountries containsObject:[dic objectForKey:@"country"])
    {
        [currentCountries addObject:[dic objectForKey:@"country"]]
        [newArray addObject:dic];
    }
} 
```

# asp.net - 非公开电子邮件地址验证

> ID：13337790
> 
> 赞同：2
> 
> 时间：2012-11-12T02:53:38.197
> 
> 标签：asp.net, regex, email

我只想允许有效的非公开电子邮件地址，例如 gmail、yahoo、hotmail 等。

任何人都可以帮我检查一下吗？我猜我需要使用正则表达式，但不确定是否有更简单的方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T20:00:12.150

如果您只需要过滤顶级域，那么您可以使用以下内容：

```
^[a-z0-9._%+-]+@[a-z0-9.-]+\.(?:edu|gov|mil)$ 
```

这只会验证以 、 或 结尾的`.edu`电子邮件`.gov`地址`.mil`。例如，

```
bah@humbug.gov <- valid
guy.smiley@gmail.com <- invalid
doctor.who@univ.edu <- valid
person@anything.com <- invalid 
```

*注意：这些都假设`Ignore Case`打开了 regex 选项。*

如果您还希望允许使用两个字母的顶级域国家代码，例如`.fr`or `.ca`，您可以添加这样的表达式：

```
^[a-z0-9._%+-]+@[a-z0-9.-]+\.(?:[a-z]{2}|edu|gov|mil)$ 
```

相反，如果您想排除“三大”电子邮件主机，您可以使用以下内容：

```
^[a-z0-9._%+-]+@(?!gmail\.com|yahoo\.com|hotmail\.com)(?:[a-z0-9.-]+\.?)+$ 
```

（*这使用带有`(?!)`“如果后缀不存在则匹配”分组*的前瞻断言）示例：

```
bah@humbug.gov <- valid
guy.smiley@yahoo.com <- invalid
doctor.who@univ.edu <- valid
person@anything.com <- valid 
```

可以[在此处找到](http://www.regular-expressions.info/email.html)更多电子邮件地址验证的正则表达式示例。

# button - Google 加号按钮 plusone.google.com 发布错误

> ID：13337791
> 
> 赞同：0
> 
> 时间：2012-11-12T02:53:38.863
> 
> 标签：button, google-plus

[我只是将来自https://developers.google.com/+/plugins/+1button/](https://developers.google.com/+/plugins/+1button/)的标准按钮代码放在我的页面上：

```
<div class="g-plusone" data-size="tall" data-href="www.artkiddo.pl"></div>
<script type="text/javascript">
    window.___gcfg = {lang: 'pl'};

    (function() {
        var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
        po.src = 'https://apis.google.com/js/plusone.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
    })();
</script> 
```

...并且按钮不起作用（只是变成感叹号）。我已经用 Chrome 检查了控制台错误，我收到了 5 个“不安全的 JavaScript 尝试使用 URL 访问框架...”错误，但从我读到的内容来看，这没什么好担心的。在网络选项卡上，当我按下按钮时，我得到了多个新条目，其中一个变为红色。它的：

```
plusone.google.com
plusone.google.com/wm/2/_/socialgraph/lookup/circles

Method: POST
Status: (canceled)
Type: Pending
Initiator: plusone.google.com/_/apps-static/_/js/p1sb/p1sb,shbx,shbl/rt=j/ver=fV4vfloJULA.pl./sv=1/am=!pnCXnPKXMfcZg__Mof_kNZg/d=1/rs=AItRSTNSWuIKSyAuqWEhkyxtmaIGMuTd9w:349
Size: 13B, Script: 0B
Time: 130ms, Latency: 0.0days 
```

带标题：

```
Request URL:https://plusone.google.com/wm/2/_/socialgraph/lookup/circles/?ct=2&m=true&_reqid=13606&rt=j

Request Headers:
Content-Type:application/x-www-form-urlencoded;charset=UTF-8
Origin:https://plusone.google.com
Referer:https://plusone.google.com/_/+1/confirm?hl=pl&url=http%3A%2F%2Fwww.artkiddo.pl%2Fwww.artkiddo.pl&t=1352688390637&source=widget&referer=http%3A%2F%2Fwww.artkiddo.pl%2F&jsh=m%3B%2F_%2Fapps-static%2F_%2Fjs%2Fgapi%2F__features__%2Frt%3Dj%2Fver%3DB6wIx_C7M_g.pl.%2Fsv%3D1%2Fam%3D!SYcw6mesaJeITQu65A%2Fd%3D1%2Frs%3DAItRSTPsCd84_NviKQ9qgnvGTMBi5CiVIQ
User-Agent:Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11
X-Same-Domain:1

Query String Parameters
ct:2
m:true
_reqid:13606
rt:j

Form Data
at:AObGSAiDvI5JtHm1Zi8ePoQO03qTurn2Zg:135268840558
: 
```

预览、响应和 cookie 中没有任何内容。

老实说，我不知道从哪里开始寻找解决方案。我在这里检查了有关堆栈溢出的其他类似问题，但没有一个答案有帮助。谷歌绝对可以访问页面（我使用分析，索引返回没有问题等），我的谷歌帐户没有被禁止的迹象，cookie设置是默认设置，不到一秒钟内就会出现错误（所以我没有期待它是超时问题），并且在不同的站点上单击它没有问题。

关于可能是什么问题以及从哪里开始寻找解决方案的任何提示？

编辑：似乎我在这里写的一切都不相关。重新加载几次后，现在我在控制台中只收到 2 个错误，在网络选项卡中没有错误，但按钮仍然不起作用。而且...在下一次重新加载后，它又回到了我从一开始就写的那样。这些错误似乎是非常随机的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T17:33:06.907

您的 data-href 参数不是有效的 URL。你应该给它加上前缀`http://`

该服务可能将其视为相对 URL，并且无法获取该页面。

# visual-studio-2010 - 突出显示找到的关键字 VS2010

> ID：13337796
> 
> 赞同：1
> 
> 时间：2012-11-12T02:54:08.197
> 
> 标签：visual-studio-2010

我正在使用 Visual Studio 2010，当我想查找关键字时 (Ctrl+F)。找到的关键字似乎根本没有突出显示，我很难识别它。如何自定义它以获得更突出的效果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T02:56:30.017

您可以安装 Microsoft 的[Productivity Power Tools](http://visualstudiogallery.msdn.microsoft.com/d0d33361-18e2-46c0-8ff2-4adea1e34fef)；他们引入了快速查找功能，可以突出显示整个文件中的匹配项。

作为替代方案（如果您想突出显示以便一目了然地看到文件中有什么/多少匹配项），您可以尝试`Find in Files (Ctrl+Shift+F)`，选择`Current document`作为范围，所有匹配行的列表将在当前可用`Find Results`窗户。这可能适合您，也可能不适合您。

# c# - 在使用c#绑定到.net中的gridview之前从类数组中过滤数据

> ID：13337799
> 
> 赞同：3
> 
> 时间：2012-11-12T02:54:21.697
> 
> 标签：c#

我有一个带有数组列表的 ICollection 类 LabCollection。这个数组列表包含另一个类 LabEntity.LabEntity 具有属性 LabID、LabName 等

我将 collection 类绑定到 gridview

```
LabCollection objLabCollection=new LabCollection();

gridview.datasource=objlabCollection
gridview.databind(); 
```

在绑定到具有特定 LabName 的网格之前，我必须先填充类。我试试这个

```
BindingSource bs = new BindingSource();
bs.DataSource=objlabCollection
bs.Filter = "LabName='CPT'";

gridview.DataSource = bs;
gridview.DataBind(); 
```

如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T03:49:44.907

当然，正如 naveen 所回答的，您需要用户定义的方法来操作用户定义的数据。

```
public IList<LabEntity> GetAllEntities(string filterStr)
{
   var entity=from ds in datasource where ds.labName==filterStr select ds;
   return entity.ToList();
} 
```

其中`datasource`是您的数组列表，它也是元素列表或元素数组或您想要说明的任何内容。

此外，将返回类型作为接口而不是具体的类类型是一个好习惯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T03:15:29.000

你有两个班级`LabCollection`和`LabEntity`. `LabCollection`包含一个`ArrayList`现在。

一个更好的方法是`LabCollection`像这样改变类。（我宁愿命名`LabCollectionManager`）

```
public class LabCollectionManager()
{

    //.................

    public List<LabEntity> GetAllLabEntities()
    {
        //method that generates a generic list of LabEntity 
    }

    public List<LabEntity> GetLabEntitiesByLabName(string labName)
    {
        return GetAllLabEntities().Where(le => le.LabName == labName).ToList();
    }

    //.................

} 
```

现在像这样在代码隐藏中调用它

```
var labManager = new LabCollectionManager();
gridview.DataSource = labManager.GetLabEntitiesByLabName("CPT");
gridview.DataBind(); 
```

更新：

如果您想坚持使用 ArrayList，请像这样更改您的函数

```
public class LabCollectionManager()
{

    //.................

    public ArrayList GetAllLabEntities()
    {
        //method that generates a generic list of LabEntity 
    }

    public ArrayList GetLabEntitiesByLabName(string labName)
    {
        var completeList = GetAllLabEntities();
        var filteredList = new ArrayList(completeList.Cast<LabEntity>()
                                    .Where(le => le.LabName == labName)
                                    ToList());
        return filteredList;
    }

    //.................

} 
```

PS：不是很优化，但这将帮助您入门。

# visual-studio-2012 - 为 Windows Phone 开发创建两个并排页面

> ID：13337800
> 
> 赞同：0
> 
> 时间：2012-11-12T02:54:36.470
> 
> 标签：visual-studio-2012, windows-phone

我正在使用 Visual Studio 2012，可以轻松创建单页应用程序。我想创建第二个页面并将其显示在主页的右侧。Windows Phones 将让您稍微窥视下一页，您可以滑动屏幕切换页面。如何才能做到这一点？我认为它需要的不仅仅是处理一个事件，因为我们可以在右边缘看到 peek/preview。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T04:02:03.310

你在考虑[全景控制](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202912%28v=vs.92%29.aspx)吗？这听起来像你在说什么，尽管在大多数情况下另一个选项是[枢轴控制](http://msdn.microsoft.com/en-us/library/ff941098%28v=VS.92%29.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T09:28:18.363

如果您想查看下一页的一部分，您需要使用[全景控件](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202912%28v=vs.92%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T04:11:04.130

您可以为此使用WP8 SDK 中的[全景控制](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff941104%28v=vs.105%29.aspx)。从VS`Windows Phone Panorama App`中的模板开始：[如何创建全景 Windows Phone 应用程序](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff941109%28v=vs.105%29.aspx)。`Create New Project`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-17T08:13:22.340

**PIVOT CONTROL**比**PANORAMA**更 易于管理。
全景图无法`programmatically`从一个页面导航到另一个页面，而枢轴控件允许您这样做！[*见[这里](https://stackoverflow.com/questions/5176888/)的实施*] 如果你愿意，
请参阅[枢轴控制示例](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff941103%28v=vs.105%29.aspx)并与[全景示例进行比较。](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff941109%28v=vs.105%29.aspx)

# javascript - 如何使用 jersey/jackson 生成具有多种类型的 json 数组

> ID：13337802
> 
> 赞同：1
> 
> 时间：2012-11-12T02:55:08.267
> 
> 标签：javascript, json, jersey, google-visualization

我正在尝试使用球衣为谷歌图表生成数据，但我不知道如何创建这样的 json 数组：

```
[
    ['Label', 'Value'],
    ['Memory', 80],
    ['CPU', 55],
    ['Network', 68]
] 
```

具有单一类型（第一行）的数组正在工作，但我不知道如何创建具有多种类型的数组，例如 ['Memory',80]。我尝试了不带和带杰克逊的球衣，但每次我尝试生成具有多种数据类型的数组列表时，我都会得到这样的结果：

```
[
  {
    "type" : "xs:string",
    "$" : "Memory"
  }, {
    "type" : "xs:int",
    "$" : "80"
  }
] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T08:01:47.570

在我们的应用程序中，我们使用 JsonSerializer 功能。您可以根据需要在 java 中设计对象，然后让序列化程序为您完成其余的工作。在那里，您可以“完全”控制如何操作。

看看我们的代码并添加另一个 jgen.writeStartArray() -> jgen.writeEndArray();

```
public class FolderChildrenSerializer extends JsonSerializer<FolderChildren> {
    @Override
    public void serialize(FolderChildren folderchildren, JsonGenerator jgen,
            SerializerProvider provider) throws IOException, JsonProcessingException {
        jgen.writeStartArray();
        for (Item i : folderchildren.getList()) {
            jgen.writeObject(i);
        }
        jgen.writeEndArray();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T03:19:27.363

尝试这个 ：

```
var array = [
  {
    "type" : "xs:string",
    "$" : "Memory"
  }, {
    "type" : "xs:int",
    "$" : "80"
  }
];
//the output array
var translated = [];
for(var i=0; i<array.length; i+=2){
     translated.push([array[i]["$"],array[i+1]["$"]]);
} 
```

编辑：如果你需要一个数字而不是一个字符串

```
for(var i=0; i<array.length; i+=2){
   var value = array[i+1]["$"];
   //parse to number
   if (/^([0-9])*[.]?[0-9]*$/.test(value)){
       value = value.parseFloat(value);
   }
   translated.push([array[i]["$"],value);
} 
```

# java - 在 XSLT 中使用变量参数调用 Java 方法

> ID：13337806
> 
> 赞同：3
> 
> 时间：2012-11-12T02:55:56.457
> 
> 标签：java, xslt, variadic-functions

我有一个带有变量参数的 Java 方法，我需要从 XSLT (1.0) 调用它。但它不起作用，它不断失败并出现以下错误：

```
javax.xml.transform.TransformerConfigurationException: Could not compile stylesheet 
```

但是，如果我扩展变量参数，它会起作用！

例子：

```
 public static String getValue(String key, String... args) {  // this is what I want, but doesn't work

 public static String getValue(String key, String args1) { // this works

 public static String getValue(String key, String args1, String args2) { // this works 
```

在 XSLT 中：

```
<xsl:value-of select="myjavaclass:getValue('MyKey','Arg1')"/>

<xsl:value-of select="myjavaclass:getValue('MyKey','Arg1','Arg2')"/> 
```

那么，有谁知道我是否可以在 XSLT 中使用带有可变参数的 Java 方法？我希望我不必为每个参数数量创建不同的方法。

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T10:52:48.810

就反射而言，可变参数方法如

```
public static String getValue(String key, String... args) 
```

是一个有两个参数的方法，第一个是 a `String`，第二个是 a `String[]`。当您从 Java 代码调用 varargs 方法时，编译器会生成字节码以将变量 args 捆绑到一个数组中，但是当您通过反射调用时，就像这里的情况一样，您必须自己构建数组。

那么问题就变成了，您的 XSLT 处理器是否提供了将类型参数`String[]`从 XSLT 传递到 Java 的任何方法？在 Xalan 的情况下（`javax.xml.transform`如果你的类路径上没有另一个，则默认实现）我相信答案是否定的，除非在`String[]`另一个扩展函数返回的特殊情况下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T03:02:53.437

由于您的第一个参数也是 type `String`，我认为它导致了问题。

尝试

```
 public static String getValue(String... args) {
           String key = args[0];
           String arg1 = args[1];
           .....  
     } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T10:24:52.903

从 XSLT 调用 Java 方法的机制取决于您使用的 XSLT 处理器，因此在不知道的情况下无法回答这个问题。

此外，说编译不成功的异常消息也没有用。我们需要查看传递给您的 ErrorListener 的特定错误消息（默认的 ErrorListener 可能会将这些消息写入 System.err 或某个日志文件，但这又取决于您使用的产品。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-11T15:55:16.033

老问题，但万一其他人在这里绊倒并想要传递一个字符串参数，你可以用来解决无法直接传递字符串数组的一个技巧是有一个帮助函数来构建字符串 [] ，即首先调用一个函数，该函数给出一个空数组，可能具有默认给定长度；然后根据需要对将参数添加到该数组的函数进行尽可能多的调用；然后将数组作为参数传入。

它可能只在病理情况下有用，但是。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-16T09:57:54.810

我遇到了同样的问题，但它适用于我使用以下代替。希望它对你们有用

```
public static String getValue(String key, String args) { 
String[] parameters = args.split("####");
// here you got you args array   

} 
```

并连接 String args 变量中的所有参数：

```
<xsl:value-of select="myjavaclass:getValue('MyKey',concat('Arg1','####','Arg2','####','Arg3'))"/> 
```

# php - 如何将javascript变量传递给数据库

> ID：13337807
> 
> 赞同：3
> 
> 时间：2012-11-12T02:55:56.040
> 
> 标签：php, javascript, mysql, ajax

我在 javascript 中有一个应用程序。我按照一些教程来做，但我真的没有使用 javascript 代码的经验。问题是我需要将变量结果从 javascript 传递到 mysql 数据库。我在这个网站上找到了一些答案，我尝试做我没有运气的事情。我发现我需要 ajax 和 php。我从不使用 ajax，因此我不明白我做错了什么。

也许如果我把代码放在这里，有人可以帮助我解决问题。

这是javascript代码：

```

    函数 ajaxFunction(){
    var ajaxRequest;  

    尝试{
        Opera 8.0+、火狐、Safari
        ajaxRequest = new XMLHttpRequest();
    } 抓住（e）{
        Internet Explorer 浏览器
        尝试{
            ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
        } 抓住 (e) {
            尝试{
                ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
            } 抓住（e）{
                出问题了
                alert("你的浏览器坏了！");
                返回假；
            }
        }
    }

    ajaxRequest.onreadystatechange = function(){
        如果（ajaxRequest.readyState == 4）{
            document.myForm.time.value = ajaxRequest.responseText;
        }
    }

      ds = 新日期（）；
      e_time = ds.getTime();

      var res = new Object();//这是我需要传递给我的数据库的结果变量
      res.bytes_transfered =;         
      res.total_time_seconds = (e_time-s_time)/1000;
      res.generatored_in = ;
      res.ip = "";
     -->
     var res1='res.bytes_transfered';
     var res2='res.total_time_seconds';
     var res3='res.generatored_in';
     var res4='res.ip';

     $.post('insert.php',{res.bytes_transfered:res1,res.total_time_seconds: res2, res.generated_in: res3, res.ip:res4});

    var queryString = "?res.bytes_transfered=" + res.bytes_transfered + "&res.total_time_seconds=" + res.total_time_seconds + "&res.generated_in =" + res.generatored_in + "&res.ip =" + res.ip;
    ajaxRequest.open("POST", "insert.php" + queryString, true);
    ajaxRequest.send(null);
     新的 Ajax.Request('insert.php', {

    onSuccess：函数（xmlHTTP）{

        评估（mlHTTP.responseText）；
    }

});

```

这是 insert.php：

```
        $fecha= date("Ymd H:i:s");
        $connect= mysql_connect("localhost", "root", "xxxxxxxxx");
        mysql_select_db("dbname");

        $res1= mysql_real_escape_string($_POST['res1']);
    $res2= mysql_real_escape_string($_POST['res2']);
    $res3= mysql_real_escape_string($_POST['res3']);
    $res4= mysql_real_escape_string($_POST['res4']);

                    $queryreg=mysql_query("INSERT INTO grafico(Cantidad, Tiempo, IP, Bajada, Subida, Fecha) 值 ('$res1','$res2','$res3','$res4','0','$ fecha')");
                如果 (!$queryreg) {
                die('没有 se ha podido ingresar su registro.');
                    }
                    别的{

                        die("Usted se ha registrado exitosamente!");
                    }

```

我希望有人能帮助我。我不知道该怎么办！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T03:02:35.683

看起来您的 POST 数据具有向后的键和值。在传递给 $.post 的数据中，键名需要在前，值在 : 之后。所以我认为应该是：

```
$.post('insert.php',{res1:res.bytes_transfered,res2:res.total_time_seconds,res3:res.generatied_in, res4: res.ip}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T03:03:54.027

您需要做的是让 JavaScript 将您的变量传递给 PHP，然后 PHP 将在您的 MySQL 语句中使用它（很可能通过 PHP 中的 PDO）。

那么，什么是 AJAX？嗯，这是一种现代方式，可以帮助您将数据从 JavaScript 发送到 PHP，并从 PHP 到 JavaScript 获得响应，而无需刷新或重新加载页面。

因此，总而言之，JavaScript 进行了 AJAX 调用，该调用将向 PHP 发送数据，PHP 将对 MySQL 执行某些操作，然后用您的结果响应 JavaScript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T03:04:48.970

您需要注释掉几行，这样它就不会被解释为代码

```
//Opera 8.0+, Firefox, Safari 
```

您的 Ajax 代码仅创建 ajax 对象并设置事件侦听器，它实际上从未发出请求，因此它当然无法工作。请求看起来像这样

```
ajaxRequest.open("post", "/myphppage.php", true);
...
ajaxRequest.send("somevariable=" + variable); 
```

# r - R - ggplot2 直方图的阴影部分

> ID：13337811
> 
> 赞同：3
> 
> 时间：2012-11-12T02:56:36.547
> 
> 标签：r, ggplot2, histogram

所以我有这个数据：

```
dataset     = rbinom(1000, 16, 0.5)
mean        = mean(dataset)
sd          = sd(dataset)
data_subset = subset(dataset, dataset >= (mean - 2*sd) & dataset <= (mean + 2*sd))

dataset     = data.frame(X=dataset)
data_subset = data.frame(X=data_subset) 
```

这是我绘制直方图的方式`dataset`：

```
ggplot(dataset, aes(x = X)) +
   geom_histogram(aes(y=..density..), binwidth=1, colour="black", fill="white") +
   theme_bw() 
```

![数据集](../Images/9adc0561f92102f198a32c82ae85cb5c.png)

我怎样才能`data_subset`像这样对直方图的部分进行着色？

![数据子集](../Images/54383eed8ae7d8a841d543cede06a3fc.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T04:26:03.297

我的解决方案与 joran 的解决方案非常相似——我认为它们都值得关注，因为它们之间存在细微的差异：

```
ggplot(dataset,aes(x=X)) +
   geom_histogram(binwidth=1,fill="white",color="black") +
   geom_histogram(data=subset(dataset,X>6&X<10),binwidth=1, 
   colour="black", fill="grey")+theme_bw() 
```

![在此处输入图像描述](../Images/084d30551d8b863dc889ca19ace45905.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T04:24:46.747

只需`geom_histogram`使用该数据子集添加另一行（尽管您可能需要稍微修改 binwidth，我不确定）：

```
ggplot(dataset, aes(x = X)) +
   geom_histogram(aes(y=..density..), binwidth=1, colour="black", fill="white") + 
   geom_histogram(data = data_subset,aes(y=..density..), binwidth=1, colour="black",fill = "grey") +
   theme_bw() 
```

# css - CSS float left divs 以较小的屏幕分辨率在下方

> ID：13337814
> 
> 赞同：4
> 
> 时间：2012-11-12T02:56:53.453
> 
> 标签：css

我有两个 div，它们看起来像这样：

```
<div style="float:left;">blah</div>
<div>blah1</div> 
```

在屏幕分辨率 x 中，这些按计划显示如下：

> 呸呸呸1

但是，在小于 x 的屏幕分辨率下，这些显示如下：

> 废话
> 
> 废话1

这是一个宽度错误。我怎样才能让我的 div 调整宽度，这样就不会发生这种情况？我的宽度设置为百分比，而不是固定像素长度。

注意：如果可能，我需要一种使用自动宽度来解决此问题的方法。每页的内容都会发生变化，所以我无法设置百分比宽度......除非绝对必要！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T03:01:54.923

只需在第二个上设置一个边距`div`：

```
<html><head></head><body>

<div style='float:left;width:200px;background:yellow'>First Div</div>

<div style='margin-left:200px;background:orange'>Second Div</div>

</body></html> 
```

...而且它每次都会填满所有额外的空间。

* * *

上面的标记如下所示：

![在此处输入图像描述](../Images/db6fc983369d440ff1a374dfdbde8d6b.png)

# eclipse - Eclipse Swing 设计师

> ID：13337818
> 
> 赞同：3
> 
> 时间：2012-11-12T02:57:19.983
> 
> 标签：eclipse, netbeans

是否有 Eclipse 插件可以帮助设计像 Netbeans 中的 Swing GUI？

WindowBuilder 过于简单和原始。例如：

![在此处输入图像描述](../Images/9536f471a403594f4a1a5c8389663cd0.png)

它只允许我将组件放置在 5 个预定义区域之一中

Netbeans 中的 GUI 设计器功能强大得多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T21:49:15.703

Mantisse GUI 编辑器有一个从 NetBeans 到 Eclipse 的端口。

[http://marketplace.eclipse.org/content/swing-gui-designer](http://marketplace.eclipse.org/content/swing-gui-designer)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-19T21:51:54.140

实际上有几个选项来控制组件在窗口中的放置方式。在 Layouts 下拉菜单下的类的 Design 选项卡中，有几个选项。例如，有一个 Absolute 选项允许在放置和移动组件时实现 x 和 y 坐标精度。

# c++ - 导出模板类时未解析的外部

> ID：13337819
> 
> 赞同：0
> 
> 时间：2012-11-12T02:57:30.777
> 
> 标签：c++, class, templates, export

我在 dll 中有这个模板智能指针类。

```
sp.h
---------

#ifdef VLIB_EXPORTS
#define VLIB_API __declspec(dllexport)
#else
#define VLIB_API __declspec(dllimport)
#endif

template < typename T > class VLIB_API SP
{
protected:
        T*    m_pData;
    long*       m_pRefCounter;

public:

    SP(void);
    {
        m_pData = NULL;
        m_pRefCounter = NULL;
    }

    ...
    ...
};

ImagePtr.h
---------------
class VLIB_API CVImagePtr
{
    ....
}

MainLib.h
-------------
#include sp.h
#include ImagePtr.h

typedef SP<CVBlob> CVBlobPtr;

class VLIB_API CVLib
{
public:
    virtual CVBlobPtr CreateBlob() = 0;
    virtual CVImagePtr CreateImg() = 0;
}; 
```

当我尝试在另一个项目（CVMLib）中使用这个类时，编译器会报错：error LNK2019: unresolved external symbol "__declspec(dllimport) public: __thiscall SP::~SP(void)"

但 CVImagePtr 没问题。

```
class VMLIB_API CVMLib : public CVLib
{
public:
    virtual  CVBlobPtr CreateBlob();
    virtual CVImagePtr CreateImg();
}; 
```

当类是模板时似乎存在问题。如果是这样，我如何导出模板类？

有人可以帮我解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T06:33:58.313

正如怀疑的那样，我没有正确导出模板类。这就是我所做的：

## 主库.h

```
#include sp.h
#include ImagePtr.h

#ifdef VLIB_EXPORTS
#define VLIB_API __declspec(dllexport)
#define EXPIMP_TEMPLATE
#else
#define VLIB_API __declspec(dllimport)
#define EXPIMP_TEMPLATE extern
#endif

EXPIMP_TEMPLATE template class VLIB_API SP<CVBlob>;
typedef SP<CVBlob> CVBlobPtr;

class VLIB_API CVLib
{
public:
    virtual CVBlobPtr CreateBlob() = 0;
    virtual CVImagePtr CreateImg() = 0;
}; 
```

您可以在此处找到更多信息：http: [//support.microsoft.com/kb/168958](http://support.microsoft.com/kb/168958)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-12T03:02:03.127

您需要使用标记类，`extern "C"`以便在类的实现以及标题上具有未损坏的名称。

看看这个[规范的答案](https://stackoverflow.com/questions/1041866/in-c-source-what-is-the-effect-of-extern-c)为什么。

# mule - 如何在不使用 java wrapper 的情况下运行 mule

> ID：13337821
> 
> 赞同：0
> 
> 时间：2012-11-12T02:57:55.603
> 
> 标签：mule, aix, itanium

我正在尝试在 64 位 IBM AIX 上运行 mule-3.1.2，但无法执行 java 包装器（找到但不可执行。）。我确定我设置了正确的权限。此外，我也无法在 ia64 机器上运行 mule，同样的问题。

那么我可以像不使用 java 包装器的 java 应用程序一样运行 mule 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:05:34.987

在不使用包装器的情况下启动 Mule 有多种方法：除了[将其嵌入到 java 或 web-application](http://www.mulesoft.org/documentation-3.2/display/MULE3USER/Embedding+Mule+in+a+Java+Application+or+Webapp)中，您还可以`main()`在[`org.mule.MuleServer`](http://www.mulesoft.org/docs/site/3.3.0/apidocs/index.html?org/mule/MuleServer.html).

**编辑：1**

@rocwing 建议的一个很好的资源是：[Configuring Mule to Run From a Script](http://www.mulesoft.org/documentation-3.2/display/MULE3USER/Configuring+Mule+to+Run+From+a+Script)

**编辑2：**

下面是一个可以独立启动 Mule 的脚本：日志记录配置不正确，关闭顺序有点……挑战，但它应该让你开始。

```
#!/bin/sh
for f in $MULE_HOME/lib/boot/*.jar
do MULE_CLASSPATH="$MULE_CLASSPATH":$f ; 
done

for f in $MULE_HOME/lib/mule/*.jar
do MULE_CLASSPATH="$MULE_CLASSPATH":$f ; 
done

for g in $MULE_HOME/lib/opt/*.jar
do MULE_CLASSPATH="$MULE_CLASSPATH":$g ;
done

java -Djava.endorsed.dir=$MULE_HOME/lib/endorsed -cp "$MULE_CLASSPATH" org.mule.MuleServer -config ~/my/mule-config.xml 
```

# doxygen - Doxygen 不使用 `LAYOUT_FILE` 生成 `modules.tex`

> ID：13337824
> 
> 赞同：1
> 
> 时间：2012-11-12T02:59:23.890
> 
> 标签：doxygen

示例：[https ://gist.github.com/4057143](https://gist.github.com/4057143)

系统：Kubuntu 12.04 (+ `sudo apt-get install doxygen texlive-fonts-recommended`)

当使用自定义布局文件（在 Doxyfile 中指定）运行 Doxygen 时，`CUSTOM_LAYOUT`它不会生成`modules.tex`文件（因此无法构建 LaTeX 输出）。如果我在没有自定义布局的情况下运行 Doxygen，它会生成可以在使用自定义布局重新运行 Doxygen 时使用的模块文件......我在 Doxygen 输出中没有看到任何错误。

如何`modules.tex`在使用自定义布局文件时创建 Doxygen？

# objective-c - 为什么有时不调用 initWithNibName？

> ID：13337827
> 
> 赞同：2
> 
> 时间：2012-11-12T03:00:23.430
> 
> 标签：objective-c, uiviewcontroller

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
} 
```

一切正常。上面的代码是编译器编写的标准代码。没什么奇怪的。我在我的视图控制器中放了断点，只是为了看看事情进展如何。

有时会调用该函数。有时不是。' 在所有情况下，一切都很好。但是不调用该函数的情况是什么？

是的，我对所有这些视图控制器都使用 XIB。

我注意到在 navigationViewController 下的 viewControllers 是 initWithNibName 不会中断的那个。我想知道为什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T03:40:39.307

当您的 NSViewController 在 xib 文件（通常作为 IBOutlet）中定义时，不会调用 initWithNibName:bundle:，而是调用 initWithCoder:。当您使用 Interface Builder 将您的 NSViewController 设置为 UITabBarController（对于 UIViewController）或 UINavigationController 的一部分时，就会出现这种情况，并且几乎总是在使用 Storyboard 时。

或者你也可以试试这个：

```
myViewController *objMyViewController = [[MyViewController alloc] initWithNibName:@"WebViewController_iPhone" bundle:nil];
objMyViewController.managedObjectContext = self.managedObjectContext;
navController = [[UINavigationController alloc] initWithRootViewController:objMyViewController];
[self.window setRootViewController:navController];
[window makeKeyAndVisible]; 
```

# windows - 在 Windows 上的 Makefile 中使用环境变量

> ID：13337828
> 
> 赞同：4
> 
> 时间：2012-11-12T03:00:29.850
> 
> 标签：windows, eclipse, makefile

我写了一个makefile。这个makefile 将被检入SVN。我为我的项目目录路径使用了环境变量，以便不同的计算机可以运行 makefile 而无需对其进行更改。

例如：`PRJ_ROOT_DIR := $(REF_DIR)/projectName/trunk/Temp` 环境变量在`REF_DIR`哪里`C:/Users/myName/Desktop`。

但是，通过仅仅构建项目，makefile 自动更改为： `PRJ_ROOT_DIR := C:/Users/myName/Desktop/projectName/trunk/Temp`

这在 SVN 中显示 makefile 已被修改。

我该怎么做才能使 makefile 保持原样 `PRJ_ROOT_DIR := $(REF_DIR)/projectName/trunk/Temp`？哪些更改是在后台完成的，并且没有显示在构建的 makefile 上，这样 SVN 就不会检测到更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T07:44:30.250

我找到了答案；是`makefile`自动生成的。因此，修改生成的 makefile 并没有帮助。

我标记了 eclipse，因为编译是在 eclipse 环境中完成的。我认为在那种环境中可能需要更改一些设置。

# html - 带有动态播放列表的 HTML5 mp3 + ogg 播放

> ID：13337829
> 
> 赞同：1
> 
> 时间：2012-11-12T03:00:33.527
> 
> 标签：html, audio, playlist

我无法弄清楚如何将 ogg 文件合并到 HTML5 标签的播放列表中。现在我从目录 JSON 对象中读取文件，格式如下：

```
 var playlist = [{"url":"mp3\/122911.mp3","title":"122911"},    
 {"url":"mp3\/100909.mp3","title":"100909"},{"url":"mp3\/011110.mp3","title":"011110"},
 {"url":"mp3\/061207C.mp3","title":"061207C"},{"url":"mp3\/110309.mp3","title":"110309"},    
 {"url":"mp3\/120409.mp3","title":"120409"},{"url":"mp3\/031608.mp3","title":"031608"},     
 {"url":"mp3\/100609C.mp3","title":"100609C"},{"url":"mp3\/120408.mp3","title":"120408"},
  {"url":"mp3\/012908.mp3","title":"012908"},{"url":"mp3\/032107.mp3","title":"032107"}] 
```

这可以创造奇迹并将 ogg 文件加载到该对象中不是问题。我只需要知道如何告诉Firefox ogg 文件就在那里。为了在 JSON 中与“url”和“title”一起执行此操作，我是否缺少一个参数？我知道如果我只是静态地创建所有内容，它可以直接放在音频标签中，但我不是。音频标签很简单：

```
 <audio class="aud" autoplay>
    <p>Your browser doesn't support HTML 5 audio.</p>
</audio> 
```

到目前为止，它适用于 chrome 和 safari 中的 mp3。我知道我错过了一些简单的东西。我有 ogg 文件，只是对播放列表中的参数感到困惑。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T03:22:53.280

这是如何工作的？

```
<audio class="aud" autoplay>
    <p>Your browser doesn't support HTML 5 audio.</p>
</audio> 
```

没有来源。您是否动态添加`<source>`到`<audio>`?

让我告诉它是如何工作的：

您可以`<source`为`<audio>`. 浏览器将在 s 中从上到下查看`<source>`并尝试播放它支持的第一个。所以，如果你这样写：

```
<audio class="aud" autoplay>
    <source src="music.mp3" type="audio/mpeg">
    <source src="horse.ogg" type="audio/ogg">   
    <p>Your browser doesn't support HTML 5 audio.</p>
</audio> 
```

这就足够了。支持 mp3 的 Browses 将使用第一个源。如果不支持 mp3 的浏览器（如 firefox）将丢弃它并查看下一个。接下来它会找到 .ogg 并播放那个。

你可以在这里看到更多：http: [//www.w3schools.com/html/html5_audio.asp](http://www.w3schools.com/html/html5_audio.asp)

# vb6 - Windows Server 2008 上的 DAO 3.6

> ID：13337831
> 
> 赞同：1
> 
> 时间：2012-11-12T03:01:21.030
> 
> 标签：vb6, windows-server-2008, dao

由于历史原因，我们有一些旧的 vb6 服务器端代码运行在两个相同的 Windows 2008 服务器上，它们使用 dao 3.6 来访问后端 MS 访问数据库。这多年来一直运行良好，我们目前正在迁移所有代码。但是，运行代码的其中一台服务器变得不稳定，因此我们需要将代码移动到新服务器，因为迁移的解决方案暂时不会准备好。运行正常的服务器正在运行 Windwos Server Web 2008 Sp1 64 位。新服务器是 Windows Server Standard 2008 R2 Standard Sp1。在这个新服务器上运行测试时，我们开始在应用程序中随机冻结。有一个简单的循环对数据库中的每个表运行一个选择查询。添加一堆日志记录后，它在调用 DAO 的 OpenRecordset 方法时冻结。数据库对象。有时它会冻结几秒钟，有时会冻结 10 - 11 分钟，然后继续。正在运行的查询采用这种格式，并且都应该返回 0 条记录：

```
SELECT * FROM BlahBlah WHERE WriteTime > #25 Oct 2012 10:09:43# 
```

当直接在数据库上运行时（即在 Access 中），它们返回正常。每次都锁定的查询也不相同。我认为这可能是我们软件特有的东西，直到我在这里找到一个非常相似的帖子（不幸的是，除了我的，没有回复！） [http://www.vbforums.com/showthread.php ?653166-Using-Dao-3.6-on-Windows-server-2008&highlight=dao+3.6+server+2008](http://www.vbforums.com/showthread.php?653166-Using-Dao-3.6-on-Windows-server-2008&highlight=dao+3.6+server+2008)

到目前为止我唯一发现的是，它运行的服务器上的DAO360.dll版本是3.60.9704，而有问题的服务器上的版本是3.60.9756（即更新版本的Dao）。我没有手动安装或注册任何东西，而是在新服务器上安装了Access 97和Access 2003，和旧服务器一样。我还应该指出，如果我将后端代码原样移动到旧服务器，那么测试工作正常，所以我很确定它不是代码。

现在我知道 DAO 已经过时了，但我一直坚持使用这个代码库，直到迁移的解决方案可用并经过全面测试，所以任何关于去哪里寻找的想法都会非常受欢迎。同时，我将尝试在新服务器上手动注册 3.60.9704 版本并运行更多测试，看看是否是问题所在，但如果是这样，那就有点奇怪了......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T22:57:53.447

啊哈！虽然我们只使用 DAO，而不是完全访问，但这似乎是答案

[http://social.technet.microsoft.com/Forums/en-US/officesetupdeployprevious/thread/2a34fc07-0a1e-4248-b866-2b1c60aabba2](http://social.technet.microsoft.com/Forums/en-US/officesetupdeployprevious/thread/2a34fc07-0a1e-4248-b866-2b1c60aabba2)

当我进一步研究它时，代码运行良好的服务器是 Windows 2008 网络服务器，虽然它是 64 位，但与新机器 Windows Server 2008 R2 上的操作系统完全不同。解决方案似乎是回到服务器上的旧操作系统，而不是重写整个应用程序，这对我们来说是一件容易的事情。幸运的是，这只需要再运行几个月左右，因为整个事情都在重新编写。

# android - Android上的MQTT Eclipse Paho客户端，断开连接挂起并且永远不会完成

> ID：13337832
> 
> 赞同：5
> 
> 时间：2012-11-12T03:01:27.437
> 
> 标签：android, push, mqtt

我在一个 android 应用程序中使用 MQTT，使用 Eclipse Paho 页面上的最新 jar。

我通过在 1 的 QOS 下发送偶尔发布来手动检查连接，如果在特定超时下未交付，我断开 MQTT 并重新连接。当数据连接丢失然后重新连接时，我也强制重新连接。

问题是 disconnect 方法会挂起线程并且永远不会完成 - 即使超时为零或负超时。它应该有一个 30 秒的内部超时，但它已经过了很长时间并且永远不会完成。

MqttClient 对象需要断开连接，否则它会在后台处理数据。我现在正在做的是分离一个单独的线程来断开 MQTT，然后完全创建一个新的 MqttClient。它停止使用数据，但这是一个糟糕的解决方案，因为新线程只是挂起。

有任何想法吗？

编辑：在进一步调查中，它似乎阻止了尝试在第 70 行停止 CommsReceiver：

```
public void stop() throws IOException {
    synchronized (lifecycle) {
        //@TRACE 850=stopping receiver
        trace.trace(Trace.FINE,850);
        if (running) {
            running = false;
            try {
                //@TRACE 851=stop: wait on lifecycle
                trace.trace(Trace.FINE,851);
                // Wait for the thread to finish.
                lifecycle.wait(); // THREAD HANGS //
            }
            catch (InterruptedException ex) {
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-07T14:07:32.097

如果您使用 paho 存储库的开发分支中的代码，问题是由于 paho 客户端的稳定版本中的时间窗口。你不应该遇到这个问题，因为它在这个错误[https://bugs.eclipse.org/bugs/show_bug.cgi?id=394066](https://bugs.eclipse.org/bugs/show_bug.cgi?id=394066)中被标记为已修复，尽管它不是我发现开发分支的稳定分支可靠的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-04T04:38:30.607

这里有一个错误： [https](https://bugs.eclipse.org/bugs/show_bug.cgi?id=394066) : //bugs.eclipse.org/bugs/show_bug.cgi?id=394066（可能是这个问题的OP，@Vipul的信息）。状态显示已解决，因此请查看新 JAR 何时可用于修复并使用它

# webview - 我可以使用 XULRunner 在桌面（Windows/Linux/OSX）上创建类似于 phonegap 应用程序（WebView 和全屏？）的可执行文件吗？

> ID：13337843
> 
> 赞同：1
> 
> 时间：2012-11-12T03:03:37.873
> 
> 标签：webview, cross-browser, cross-platform, desktop-application, xulrunner

**故事：** 我编写了一个 HTML 合并编译器，它可以将资源/资产合并到一个 HTML 文件中（将其最小化到最大）并使用 google 附件编译器编译 Javascript。我编写了这个编译器来加速加载和解释代码并混淆代码以保护一点（脚本儿童保护）。主要原因是/是速度并使其紧凑。

这工作正常，结果可靠，我在 PhoneGap 应用程序/游戏中使用它。我还编写了一个 javascript 库，它封装了所有使用标准 HTML/CSS 的平台，而无需更改代码，它也可以在浏览器、触摸屏或没有或在任何设备或操作系统上运行。一次编写，多次发布；-)。围绕它的想法是始终工作，始终以相同的方式运行，但可以在可用时使用设备特定的东西，但永远不会失败（当某些东西不存在时，例如振动功能）。

无论如何，大多数框架（如 PhoneGap）都专注于移动平台，但我也想将它移植到 Windows、OSX 和 Linux 等桌面平台。对于 Windows，我编写了一个 Delphi 应用程序，它在 TEmbeddedWB 对象（实际上是 Internet Explorer）中加载 HTML，但“问题”是它只适用于 Windows，而 IE 不是最快的浏览器，尤其是当它被嵌入时（不要为什么它比浏览器本身慢）。例如，当我在 Firefox 和/或 Google Chrome 中加载编译后的代码时，它的速度非常快（你不会注意到它是 javascript ;-)）。

**编辑：** Windows 7 的 IE10 预发布版刚刚启动，安装它并且延迟消失了！您可以从这里下载：http: [//www.microsoft.com/en-us/download/details.aspx?id=35709](http://www.microsoft.com/en-us/download/details.aspx?id=35709)

**我的问题简介：** 很久以前我尝试过 Mozilla 的 XULRunner，但第一次对我来说并不愉快，而且我今天又尝试了一次，但无法让它工作。在项目的主xul文件中得到一个解析错误，window是一个未定义的实体。？？？我创建了一个示例项目，例如： http: [//mdn.beonex.com/en/Getting_started_with_XULRunner.html](http://mdn.beonex.com/en/Getting_started_with_XULRunner.html)

我不知道如何处理这个错误。我还认为文档不是最新的？大多数文档来自 2006 年左右。

**这个问题，我想知道的：**

*   在我浪费时间之前（另见介绍），是否可以使用 XULRunner 创建无框架（全屏）桌面可执行文件，例如 PhoneGap？
*   是否可以使用 XULRunner 创建跨平台应用程序，我的意思是，它真的可以无缝运行吗？我在哪里可以找到 XULRunner 项目的准备发布示例，是否可以像在 PhoneGap 中一样加载本地 HTML 文件？
*   是否可以并允许访问外部资源？

长话短说，但也许有人以前尝试过这个，可以引导我选择正确的方向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T07:37:30.323

> 是否可以像使用 PhoneGap 一样使用 XULRunner 创建无框架（全屏）桌面可执行文件？

是的。您使用[`disablechrome`属性](https://developer.mozilla.org/en-US/docs/XUL/window#a-disablechrome)删除窗口框架并[`sizemode="maximized"`](https://developer.mozilla.org/en-US/docs/XUL/window#a-sizemode)使其全屏打开。或者，如果您希望应用程序在普通窗口中运行并且仅在请求时切换到全屏模式，则可以使用[全屏 API 。](https://developer.mozilla.org/en-US/docs/DOM/element.mozRequestFullScreen)

> 是否可以使用 XULRunner 创建跨平台应用程序

是的。菜单之类的东西在 OS X 上的工作方式非常不同，但大多数时候你不需要关心你的应用程序在什么操作系统上运行（支持 Windows、Linux 和 Mac OS X）。

> 我在哪里可以找到 XULRunner 项目的可发布示例

有关 XULRunner 应用程序示例，请参阅[文档](https://developer.mozilla.org/en/docs/Getting_started_with_XULRunner)。对于“准备发布”，您需要一个不随平台提供的安装程序。

> 是否可以像在 PhoneGap 中一样加载本地 HTML 文件？

是的。顶级窗口必须是 XUL，但您可以在此处使用一些非常少的代码 - 本质上是单个[`<iframe flex="1"/>`标记](https://developer.mozilla.org/en/XUL/iframe)。然后，您可以将 HTML 页面加载到该框架中。

> 是否可以并允许访问外部资源？

是的，XULRunner 应用程序具有完全权限，可以不受任何限制地访问磁盘上的文件以及 Web 资源。

# c++ - 从多个派生类返回一个函数

> ID：13337847
> 
> 赞同：3
> 
> 时间：2012-11-12T03:03:57.947
> 
> 标签：c++, inheritance, multiple-inheritance

我有一个基类和多个派生类。每个派生类都有一个构造函数，它接受在基类中初始化的参数。所有的构造函数都是不同的，但是它们都接受一个公共参数，我们称之为`Name`。

有没有办法让我以比一个接一个地调用它们更短的方式显示每个派生类的名称？

这是一个例子。假设我的基类是`Father`，派生类是`Brother, Sister, HalfBrother, HalfSister`，这是我的驱动程序文件：

```
cout << Brother::Brother().getName() << endl
     << Sister::Sister().getNAme() << endl
     << HalfBrother::HalfBrother().getNAme() << endl
     << HalfSister::HalfSister().getName() << endl; 
```

这会很好地返回它们，但是有没有一种更简单的方法可以做到这一点，这样我就可以从所有派生类中获取所有名称，而不必一个一个地编写它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T03:25:34.213

您可以创建类的静态注册表，并从您插入到要注册的类中的静态成员的构造函数中填充它。

在标题中：

```
class Registration {
    static vector<string> registered;
public:
    static void showRegistered() {
        for (int i = 0 ; i != registered.size() ; i++) {
            cout << registered[i] << endl;
        }
    }
    Registration(string name) {
        registered.push_back(name);
    }
}; 
```

在 CPP 文件中：

```
vector<string> Registration::registered; 
```

有了这个类，你可以这样做：

在标题中：

```
class A {
    static Registration _registration;
};

class B {
    static Registration _registration;    
};

class C {
    static Registration _registration;    
}; 
```

在 CPP 文件中：

```
Registration A::_registration("quick");
Registration B::_registration("brown");
Registration C::_registration("fox"); 
```

最后一部分是关键：静态`_registration`变量的声明有一个副作用——它们将名称插入到`vector<string> registered`类`Registration`中，没有特定的顺序。您现在可以检索名称、将其打印出来或对它们做任何您想做的事情。我添加了一个用于打印的成员函数，但显然你不受它的限制。

这是[关于 ideone 的演示](http://ideone.com/U3LK0e)- 它打印

```
quick
brown
fox 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T03:37:32.773

老实说，我不确定我是否理解你的问题。正如评论中所说，你应该让 getName() 成为父亲中的一个方法。

```
class Father {
public:

    Father(string name) : m_name(name) {
    }

    string& getName() {
        return m_name;
    }

private:
    string m_name;
};

class Brother : public Father {
public:
    Brother(string name) : Father(name) {
    }
};

class Sister : public Father {
public:
    Sister(string name) : Father(name) {
    }
}; 
```

所以你可以有类似的东西：

```
vector<Father *> fathers;
Brother brother("...");
Sister sister("....");

father.push_back(&brother);
father.push_back(&sister);

for (vector<Father*>::iterator itr = fathers.begin();
        itr != fathers.end();
        ++itr) {
    cout << (*itr)->getName() <<endl;
} 
```

# visual-studio - VisualStudio - 如何无人值守安装第 3 方 DLL 控件？

> ID：13337849
> 
> 赞同：3
> 
> 时间：2012-11-12T03:04:03.700
> 
> 标签：visual-studio, visual-studio-2012, controls, toolbox, unattended-processing

我正在尝试部署vs2012，

扩展太容易安装，因为它们是 VSIX 格式，所以我可以静默调用它们，

问题是如何在不打开“选择工具箱项...”菜单的情况下在我的 VS 中安装 DLL 控件？

有可能吗？

也许存在一个特殊的文件夹，例如您放置一些片段的片段文件夹，VS 会自动识别新添加的片段？

或者也许我需要为我的每个 3rd 方 DLL 控件创建一个 VSIX 安装程序？那么有人可以给我一些关于这方面的信息吗？

谢谢你的阅读

**更新**：我在尝试工具箱管理器的自定义构建时收到此错误：

PD：我使用的是 win 64 位，并且我至少尝试了该工具的所有命令组合。

![在此处输入图像描述](../Images/d2150ed2d07b7110f10f6b205ed0ba0a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T13:24:25.513

我写了一篇关于Visual Studio中工具箱控件安装的教程文章，包括VS2012：

[Visual Studio 工具箱控件集成](http://www.componentowl.com/articles/visual-studio-toolbox-control-integration)

它包含几种方法并对它们进行比较，以便您选择最适合您的一种。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T05:44:54.163

不是最好的解决方案，但是......对于无法为 VS2012 运行 toolbox.exe 的人来说，我的替代解决方案：

PS：这个 bat 文件是基于另一个 bat 的，但我丢失了学分的参考链接，我的有错误控制并且更可定制。

```
@Echo OFF
Title Control Installer v1.0

REM By Elektro H@cker  
REM This tool performs installation of new controls for VisualStudio.

REM Syntax:
:: Control_Installer.cmd "Name of dll" "Name of tab" "Controls folder (THIS IS OPTIONAL)" "DEVENV.exe folder (THIS IS OPTIONAL)"

Set "DLLFILE=%~1"
Set "TABNAME=%~2"
IF "%~3" EQU "" (SET "CONTROLSFOLDER=%USERPROFILE%\Documents\Visual Studio 2012\Controls") ELSE (SET "CONTROLSFOLDER=%~3")
IF "%~4" EQU "" (SET "VSFOLDER=%VS110COMNTOOLS%\..\IDE\")                                  ELSE (SET "VSFOLDER=%~4")

IF NOT EXIST "%DLLFILE%"              (Echo: An error occurred: Can't find the controls file "%DLLFILE%". & Exit /B 1)
IF NOT EXIST "%CONTROLSFOLDER%"       (Echo: An error occurred: Can't find the controls folder "%ControlsFolder%". & Exit /B 1)
IF NOT EXIST "%VSFOLDER%\devenv.exe"  (Echo: An error occurred: Can't find the VisualStudio "devenv.exe" in "%VSFOLDER%". & Exit /B 1)
IF "%TABNAME%" EQU ""                 (Echo: An error occurred: Can't crate the tab "%TABNAME%". & Exit /B 1)

MKDIR "%ControlsFolder%\%TABNAME%"                2>NUL
Copy /Y "%DLLFILE%" "%ControlsFolder%\%TABNAME%\" 1>NUL
Start /B /D "%VSFOLDER%" devenv.exe /command Tools.InstallCommunityControls && Exit /B 0 || (Exit /B 1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-03T04:50:08.577

这是我对@Libor 工作的更新

我已经将所有代码翻译成 VB.NET，增加了与 VS2013 的兼容性，与 WPF 控件的实验性兼容性。

以上为原作者致谢。

![在此处输入图像描述](../Images/6b48d569006c66391382b1a7b9e09190.png)

![在此处输入图像描述](../Images/73bd0b93af2915ca192f69c48ae55180.png)

![在此处输入图像描述](../Images/1e23678aaed426f5ae27968412c17477.png)

这是更多信息：

www.google.com/translate?hl=en&ie=UTF8&sl=es&tl=en&u=http%3A%2F%2Fforo.elhacker.net%2Fnet%2Fsource_extended_dte_toolbox_control_installer-t406027.0.html%3Bmsg1909162%23msg1909162

这是来源：

[http://elektrostudios.tk/Extended%20DTE%20Toolbox%20Control%20Installer.zip](http://elektrostudios.tk/Extended%20DTE%20Toolbox%20Control%20Installer.zip)

# c++ - 了解 LRU 算法

> ID：13337854
> 
> 赞同：9
> 
> 时间：2012-11-12T03:05:17.780
> 
> 标签：c++, c, algorithm, page-replacement

我试图理解 LRU，它对我来说毫无意义。如果我理解它，那么我将更容易编码。有人可以帮我完成这些步骤吗？像，

1.  如果您当前所在的引用字符串在数组中，那么您是否递增到下一个空格？
2.  当您检查缓冲区中是否有东西时，我们是否需要扫描我们所在的位置或整个阵列？

我似乎无法跟上。它如何跟踪最近最少使用的？最近最少使用的不应该是您所在索引之后的那个吗？

![在此处输入图像描述](../Images/3a014fa10a42b869c9ae05ac983764d3.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T03:20:28.653

LRU 通常放在一个列表中。当一个项目被访问时，将它从列表中移除（如果它在那里），并将它推到后面。列表的后面是最近使用的。因为您不断地将使用过的物品移到列表的后面，所以最少使用的物品自然会排在列表的前面。当没有足够的空间时，你从前面弹出。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-12T03:33:35.210

为每个“项目”存储两个项目。值（当然）和“时间”，它是一个不断增加的整数。

因此，使用您的数据，假设按顺序访问 1 到 4：

```
(1, 1), (2, 2), (3, 3), (4, 4) 
```

访问“1”（为清楚起见按时间排序，时间 = 5）

```
(2, 2), (3, 3), (4, 4), (1, 5) 
```

访问“2”（为清楚起见按时间排序，时间 = 6）

```
(3, 3), (4, 4), (1, 5), (2, 6) 
```

访问“5”将找不到，导致缓存未命中。为了找到存储“5”的“空间”，我们需要刷新最近最少使用（LRU）。这意味着删除“3”。请注意，时间 = 7。

```
(4, 4), (1, 5), (2, 6), (5, 7) 
```

访问“1”（为清楚起见按时间排序，时间 = 8）

```
(4, 4), (2, 6), (5, 7), (1, 8) 
```

访问“2”（为清楚起见按时间排序，时间 = 9）

```
(4, 4), (5, 7), (1, 8), (2, 9) 
```

访问“3”将找不到，导致缓存未命中。为了找到存储“3”的“空间”，我们需要刷新最近最少使用（LRU）。这意味着删除“4”。请注意，时间 = 10。

```
(5, 7), (1, 8), (2, 9), (3, 10) 
```

访问“4”将找不到，导致缓存未命中。为了找到存储“4”的“空间”，我们需要刷新最近最少使用（LRU）。这意味着删除“5”。请注意，时间 = 11。

```
(1, 8), (2, 9), (3, 10), (4, 11) 
```

访问“5”将找不到，导致缓存未命中。为了找到存储“5”的“空间”，我们需要刷新最近最少使用（LRU）。这意味着删除“1”。请注意，时间 = 12。

```
(2, 9), (3, 10), (4, 11), (5, 12) 
```

既然您知道了如何选择要刷新的项目，并且有了一个工作示例，那么在不移动它的情况下刷新项目由您来实现。

--- 编辑附加说明 ---

好的，以列表形式显示东西的想法似乎提出了一些问题，所以我将它以数组形式显示

访问 1，缓存未命中，可用空槽，存储在第一个可用槽中

```
Value   Age
1       1
---     ---
---     ---
---     --- 
```

访问 2，缓存未命中，可用空槽，存储在第一个可用槽中

```
Value   Age
1       1
2       2
---     ---
---     --- 
```

访问 3，缓存未命中，可用空槽，存储在第一个可用槽中

```
Value   Age
1       1
2       2
3       3
---     --- 
```

访问 4，缓存未命中，可用空槽，存储在第一个可用槽中

```
Value   Age
1       1
2       2
3       3
4       4 
```

访问1，缓存命中，更新访问时间

```
Value   Age
1       5
2       2
3       3
4       4 
```

访问2，缓存命中，更新访问时间

```
Value   Age
1       5
2       6
3       3
4       4 
```

访问 5，缓存未命中，没有可用的空，丢弃并替换“最近最少使用”

```
Value   Age
1       5
2       6
5       7
4       4 
```

访问1，缓存命中，更新访问时间

```
Value   Age
1       8
2       6
5       7
4       4 
```

访问2，缓存命中，更新访问时间

```
Value   Age
1       8
2       9
5       7
4       4 
```

访问 3，缓存未命中，没有可用的空，丢弃并替换“最近最少使用”

```
Value   Age
1       8
2       9
5       7
3       10 
```

访问 4，缓存未命中，没有可用的空，丢弃并替换“最近最少使用”

```
Value   Age
1       8
2       9
4       11
3       10 
```

访问 5，缓存未命中，没有可用的空，丢弃并替换“最近最少使用”

```
Value   Age
5       12
2       9
4       11
3       10 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T14:27:13.703

这是我的 LRU 缓存的简单示例 C++ 实现，结合了 hash(unordered_map) 和 list。列表中的项目具有访问地图的键，地图上的项目具有访问列表的列表迭代器。因此，每个方法调用的复杂度都是 O(1)。

```
#include <list>
#include <unordered_map>
#include <assert.h>

using namespace std;

template <class KEY_T, class VAL_T> class LRUCache{
private:
        list< pair<KEY_T,VAL_T> > item_list;
        unordered_map<KEY_T, decltype(item_list.begin()) > item_map;
        size_t cache_size;
private:
        void clean(void){
                while(item_map.size()>cache_size){
                        auto last_it = item_list.end(); last_it --;
                        item_map.erase(last_it->first);
                        item_list.pop_back();
                }
        };
public:
        LRUCache(int cache_size_):cache_size(cache_size_){
                ;
        };

        void put(const KEY_T &key, const VAL_T &val){
                auto it = item_map.find(key);
                if(it != item_map.end()){
                        item_list.erase(it->second);
                        item_map.erase(it);
                }
                item_list.push_front(make_pair(key,val));
                item_map.insert(make_pair(key, item_list.begin()));
                clean();
        };
        bool exist(const KEY_T &key){
                return (item_map.count(key)>0);
        };
        VAL_T get(const KEY_T &key){
                assert(exist(key));
                auto it = item_map.find(key);
                item_list.splice(item_list.begin(), item_list, it->second);
                return it->second->second;
        };

}; 
```

# android - 为什么 Android 中的 SimpleDateFormat 不起作用？

> ID：13337855
> 
> 赞同：1
> 
> 时间：2012-11-12T03:05:19.597
> 
> 标签：android

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T03:18:37.033

我测试了你的代码。它的工作原理很好。检查这个测试

```
 public static void main(String[] args) {

    long l = new Date().getTime();
    System.out.println(getDateFormatStr(l,"HH:mm, E, MMM dd, yyyy"));

}

public static String getDateFormatStr(long time,String formatStr){
    String timeStr=null;
    SimpleDateFormat setDateFormat = new SimpleDateFormat(formatStr);
    timeStr = setDateFormat.format(time);
    return timeStr;
} 
```

结果： **2012 年 11 月 12 日星期一 08:49**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T14:00:39.187

快速猜测一下，您的手机设置为使用不寻常的区域设置。在创建 SimpleDateFormat 时尝试指定特定的语言环境，即`new SimpleDateFormat(formatStr, Locale.ENGLISH)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T03:26:40.120

尝试使用 Calendar 类和这个示例：

```
Calendar cal=Calendar.getInstance(); `
SimpleDateFormat month_date = new SimpleDateFormat("MMMMMMMMM");
String month_name = month_date.format(cal.getTime()); 
```

月份名称将包含完整的月份名称。如果您想要短月份名称，请使用：

```
SimpleDateFormat month_date = new SimpleDateFormat("MMM");
String month_name = month_date.format(cal.getTime()); 
```

# c++ - STL 对的默认构造值

> ID：13337865
> 
> 赞同：1
> 
> 时间：2012-11-12T03:06:31.240
> 
> 标签：c++, dictionary, stl, std-pair

我正在尝试使以下地图正常工作：

```
enum ttype { shift, reduce }
map <string, pair<ttype, int> > lookup; 
```

所以这很好用，但我需要一种方法来检查是否找不到密钥。例如，效果如下：

```
cout << (lookup["a"]==NULL) << endl; // this is wrong, but I am trying to find a way to identify when lookup["a"] does not find a corresponding value 
```

似乎如果找不到键，map 将返回默认构造值（例如，如果它映射到字符串，它只会返回空字符串，我可以检查是否查找 ["a"] == “” - 但我不知道 std::pairs 的默认构造值是什么）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T08:47:04.033

`operator[]`未找到时添加项目并返回默认构造项目。 `find()`不返回默认构造对，而是返回指向地图最后一个值之外的迭代器。

```
auto iter = lookup.find("a");
if (iter != lookup.end()) {
    std::cout << "Key was found :)" << std::endl;
    std::pair<ttype, int> result = iter->second;
    std::cout << "Result was: " << result.second << std::endl;
} else {
    std::cout << "Key was not found" << std::endl;
    // Maybe add the key to the map?
} 
```

使用`find()`有点冗长，但它使它更具可读性（在我看来）。

# symfony - Symfony2 createFormBuilder - 动态高级搜索表单

> ID：13337867
> 
> 赞同：3
> 
> 时间：2012-11-12T03:06:36.800
> 
> 标签：symfony

我正在使用一个 API，它作为响应的一部分返回一个名为“form”的数组。这是一个字段名称、数据类型和值的数组。

这些字段的数量和名称可能会有所不同，具体取决于当前使用的 API 端点。但是表单数组的结构总是一样的。所以就 Symfony 而言，过程如下：

1.  创建表单对象
2.  循环遍历表单数组并将数组元素添加为字段
3.  将数组发送到视图

基本上，这种形式只不过是一种高级搜索形式。系统中绝对没有指向实体的链接。

因此，作为 Symfony2 的新手，在阅读了本文档 (http://symfony.com/doc/2.0/book/forms.html#building-the-form) 之后，我尝试通过创建以下函数在控制器中执行此操作：

```
/**
 * Generate a form for each field passed in an array.
 * 
 * @param array $formArray A custom array of fields do be shown in the form
 * @return formView
 */
private function generateForm($formArray)
{

    // Simple demo for testing
    $formArray = array(
        0 => array(
            'name' => 'FirstName', 'type' =>'text'
            ),
        1 => array(
            'name' => 'LastName', 'type' =>'text'
            )
        ); 

    $form = $this->createFormBuilder($formArray);

    foreach($formArray as $field) {
        $form->add($field['name'], $field['type']);
    }        

    $form->getForm();

    return $form->createView();

} 
```

我从中得到的是

```
Fatal error: Call to undefined method Symfony\Component\Form\FormBuilder::createView() in .... (my controller file) 
```

奇怪的是，如果我按照文档示例添加字段和 getForm() 调用链，那很好。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T03:22:36.933

啊想通了。这条线

```
$form->getForm(); 
```

该方法返回一个 Form 对象，而我将其视为 setter。

所以工作控制器功能如下：

```
 /**
 * Generate a form for each field passed in an array.
 * 
 * @param array $formArray A custom array of fields do be shown in the form
 * @return formView
 */
private function generateForm($formArray)
{

    $formBuilder = $this->createFormBuilder($formArray);

    foreach($formArray as $field) {
        $formBuilder->add($field['name'], $field['type']);
    }        

    $form = $formBuilder->getForm();

    return $form->createView();

} 
```

# stored-procedures - Informix：如何平均存储过程的结果

> ID：13337868
> 
> 赞同：1
> 
> 时间：2012-11-12T03:06:37.473
> 
> 标签：stored-procedures, informix, user-defined-functions

假设我有这个功能`sp_func(startdate, enddate)`。要调用函数本身，我使用`CALL sp_func(startdate, enddate);`.

该函数将返回一个包含以下内容的表：

```
id   name      time
1    smith     3.2
2    neo       8.2
3    morpheus  2.4 
```

我想要做的是平均该函数的时间。我试过了，`SELECT AVG(time) FROM sp_func(startdate, enddate)`但没有用。出现语法错误。我不确定它的确切语法是什么。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T03:35:27.553

魔术关键字是`TABLE`. 这是一个演示解决方案的脚本：

## 虚拟程序

```
CREATE PROCEDURE sp_func(begin_date DATE, end_date DATE)
    RETURNING INTEGER AS id, VARCHAR(10) AS NAME, DECIMAL(5,2) AS TIME;

    RETURN 1, "smith",     3.2 WITH RESUME;
    RETURN 2, "neo",       8.2 WITH RESUME;
    RETURN 3, "morpheus",  2.4;

END PROCEDURE;

EXECUTE PROCEDURE sp_func('2012-01-01', '2012-12-31'); 
```

### 输出

```
1   smith      3.20
2   neo        8.20
3   morpheus   2.40 
```

## 主 SELECT 语句

```
SELECT AVG(a.TIME)
FROM TABLE(PROCEDURE sp_func('2012-01-01', '2012-12-31')) AS A(id, name, time)
; 
```

### 输出

```
4.6 
```

带有列名的 AS 子句是必要的，即使过程命名了它的返回值。

此语法记录在 Informix Guide to SQL: Syntax manual，在第 2 章的 SELECT 语句下，子标题是“迭代器函数 (IDS)”（11.70 的 ids-sqs_bookmap.pdf 副本中的 p2-638我有）。

# c++ - 如何使用 g++ 创建具有特定名称的目标文件

> ID：13337869
> 
> 赞同：23
> 
> 时间：2012-11-12T03:06:43.790
> 
> 标签：c++, unix, ubuntu, makefile

我正在制作一个生成文件，其中一个目标是 exptrtest.o 我如何使用 g++ 创建一个具有该名称的对象文件，我的 cpp 文件的名称是 exprtest.cpp 而不是 exptrtest.cpp？

```
exptrtest.o: exprtest.cpp
    g++ -Wall -g -c exprtest.cpp 
```

为了更清楚，这是我的makefile：

```
all: exprtest
exprtest: exptrtest.o driver.o parser.tab.o scanner.o
    g++ -Wall -g -o exprtest exptrtest.o driver.o parser.tab.o scanner.o
exptrtest.o: exprtest.cpp
    g++ -Wall -g -c exptrtest.o exprtest.cpp
driver.o: driver.cpp scanner.hpp driver.hpp
    g++ -Wall -g -c driver.cpp
parser.tab.o: parser.tab.hpp parser.tab.cpp
    bison parser.ypp
    g++ -Wall -g -c parser.tab.cpp
scanner.o: scanner.cpp scanner.hpp
    flex -t scanner.ll > scanner.cpp
    g++ -Wall -g -c scanner.cpp
clean:
    rm parser.tab.hpp parser.tab.cpp scanner.cpp 
```

我收到错误消息：“g++: error: exptrtest.o: No such file or directory make: *** [exprtest] Error 1”

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-11-12T03:09:38.690

将该`-o`选项与 结合使用`-c`。

```
exptrtest.o: exprtest.cpp
    g++ -Wall -g -c exprtest.cpp -o exptrtest.o 
```

# python - Python fabric.api 反斜杠地狱

> ID：13337870
> 
> 赞同：7
> 
> 时间：2012-11-12T03:06:47.157
> 
> 标签：python, fabric, backslash

我是python和fabric api的新手。我正在尝试使用 sudo 功能在 bash 终端中运行 sed 命令，该命令在找到特定文本行后插入一些文本。我试图插入到我正在修改的文件中的一些文本包含反斜杠，这些反斜杠似乎要么被结构忽略，要么导致语法错误。我尝试了“shell=true”和“shell=false”选项，但仍然没有运气。我怎样才能逃避反斜杠？似乎“shell = true”只转义了$和“。下面是我的代码。

sudo (' sed -i "/sometext/a textwith\backslash" /home/me/somefile.txt',shell=True)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T03:20:41.557

尝试用 为您的字符串添加前缀`r`，这意味着它将被解释为原始字符串：

```
sudo (r' sed -i "/sometext/a textwith\backslash" /home/me/somefile.txt',shell=True) 
```

有关字符串文字及其在 Python 中的用法的更多信息，请参见[此处。](http://docs.python.org/2/reference/lexical_analysis.html#string-literals)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T05:00:32.393

好的，终于解决了这个问题。火箭驴是正确的。需要以“r”作为前缀，但也需要设置“shell=False”。这允许在从 fabric.api 调用时直接在 bash 终端中工作的内容。

谢谢火箭驴！！

# android - 蓝牙启动时Android启动活动

> ID：13337872
> 
> 赞同：1
> 
> 时间：2012-11-12T03:07:40.633
> 
> 标签：android, bluetooth

大家好，我正在学习应用程序。如何创建程序当我打开蓝牙时，它将显示一个对话框和两个按钮，如果我单击“是”将打开活动

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-12T03:17:19.330

您可以使用广播接收器，它会在蓝牙打开时触发动作，启动对话框

# c# - 网格视图。如何在空字段中显示当前值？

> ID：13337873
> 
> 赞同：0
> 
> 时间：2012-11-12T03:07:40.447
> 
> 标签：c#, asp.net, gridview

我有充满适配器的 GridView：

```
OracleDataAdapter adapter = new OracleDataAdapter();
DataTable tableD = new DataTable();
adapter.SelectCommand = oracleCom;
adapter.Fill(tableD);
tableResults.DataSource = tableD.AsDataView();
tableResults.DataBind(); 
```

tableResults - 它是一个 GridView。我添加了在 GridView 中更改数据的功能：

```
tableResults.AutoGenerateEditButton = true;
tableResults.RowEditing += new GridViewEditEventHandler(tableResults_RowEditing);
tableResults.RowUpdating += new GridViewUpdateEventHandler(tableResults_RowUpdating);
tableResults.RowCancelingEdit += new GridViewCancelEditEventHandler(tableResults_RowCancelingEdit); 
```

现在，从这里： ![在此处输入图像描述](../Images/17198464dbee85e70c6303763bee46db.png)

当用户推送编辑链接时，他会看到： ![在此处输入图像描述](../Images/e8e0d8e753a06571ac65ada5a177fc47.png)

如何在空字段中显示当前值？

这是加法：

```
<asp:GridView ID="tableResults" runat="server" DataMember="Table"
                EnableModelValidation="True" CssClass = "GridViewStyle" 
                OnRowDeleting = "dataViewRowDeleting" AutoGenerateDeleteButton="True">
               <HeaderStyle CssClass = "GridViewHeaderStyle" />
               <RowStyle CssClass = "GridViewRowStyle"/>    
               <Columns>
                <asp:TemplateField>
                    <ItemTemplate>
                        <asp:HyperLink runat="server" Text="Скачать объект" NavigateUrl='<%#"objects/" + Eval("Идентификатор") %>'></asp:HyperLink>
                    </ItemTemplate>    
                </asp:TemplateField>
               </Columns>           
            </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T03:47:14.847

您只需单击编辑，但您还必须重新绑定您的网格视图只需在 gridview RowEditing 事件上再次绑定您的网格视图，就像这样......

```
protected void GridView1_RowEditing(object sender, GridViewEditEventArgs e)
{
    GridView1.EditIndex = e.NewEditIndex;
    bindGridView1();
} 
```

试试这个，这绝对会帮助你。如果您仍然面临任何问题，而不是在此处描述您的问题...

# php - 通过 PHP 的 XML 新行不起作用

> ID：13337876
> 
> 赞同：1
> 
> 时间：2012-11-12T03:08:17.170
> 
> 标签：php, html, xml, dom, line

我试图让 PHP 保存 XML 文件，同时通过使用新行来组织它。我正在*尝试*使用`$dom->formatOutput = true;`，但我不断收到此错误：

`Warning: DOMDocument::loadXML() [domdocument.loadxml]: Empty string supplied as input in /public_html/rejectlist/processForm.php on line 48`

这是我的 PHP 文件：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Adding Songs...</title>
<style type="text/css">
em {
    text-align:center;
}
</style>
</head>
<body>
<p>
<?
$songs = Array();
function start_element($parser, $name, $attrs){
    global $songs;
    if($name == "song"){
        array_push($songs, $attrs);
    }
}
function end_element ($parser, $name){}
$playlist_string = file_get_contents("playlist.xml");
$parser = xml_parser_create();
xml_set_element_handler($parser, "start_element", "end_element");
xml_parser_set_option($parser, XML_OPTION_CASE_FOLDING, 0);
xml_parse($parser, $playlist_string) or die("Error parsing XML document.");
print "<br />";
if($_POST['action'] == "ins"){
    array_push($songs, Array(
                "title" => $_POST['name'],
                "artist" => $_POST['artist'],
                "path" => $_POST['path']));
    $songs_final = $songs;
}else if($_POST['action'] == "del"){
    $songs_final = Array();
    foreach($songs as $song){
        if($song['title'] != $_POST['name']){
            array_push($songs_final, $song);
        }
    }
}
$write_string = "<songs>";
foreach($songs_final as $song){
    $write_string .= "<song title=\"$song[title]\" artist=\"$song[artist]\" path=\"$song[path]\" />";
}
$write_string .= "</songs>";
$dom = new DomDocument();
$dom->loadXML($songs);
$dom->formatOutput = true;
$formatedXML = $dom->saveXML();
$fp = fopen("playlist.xml", "w+");
fwrite($fp, $write_string) or die("Error writing to file");
fclose($fp);
print "<em>Song inserted or deleted successfully :)</em><br />";
print "<a href=\"index.php\" title=\"return\">Return</a>";
?>
</p>
</body>
</html> 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T03:19:49.640

你的代码读起来不愉快，所以我不确定它还有什么问题，但你的错误的原因是这一行：

```
$dom->loadXML($songs); 
```

`$songs`是一个数组，而不是一个字符串。（阅读并注意错误信息。）

# git - `git filter-branch --subdirectory-filter` 的反义词是什么？

> ID：13337877
> 
> 赞同：6
> 
> 时间：2012-11-12T03:08:30.860
> 
> 标签：git, version-control, git-filter-branch

您可以将`git filter-branch --subdirectory-filter`子目录从当前存储库转换为自己的存储库。然而，我想做的是相反的事情：创建一个存储库，它将包含当前存储库的全部内容作为子目录，保持完整的历史记录，就好像它们总是在那个子目录中一样。我不想使用子模块，因为我希望该目录成为存储库的完整组成部分。

* * *

背景：我的任务是编写一个简单的脚本，但任务范围已经扩大，所以现在这个脚本只是一个更大项目中的一个子目录。它也没有独立存在的意义，因此首选没有子模块的解决方案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T03:34:35.473

最简单的解决方案是不理会历史记录：将`git mv`所有文件放入子目录中，提交更改，然后继续你的生活。

如果您真的想假装好像您一直在子目录中完成这项工作，最简单的方法是使用以下内容：

```
git filter-branch --tree-filter "mkdir SUBDIR && bash -c 'git mv -k {,.[!.],..[!.]}* SUBDIR/'" 
```

将 SUBDIR 替换为目标子目录的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T03:36:25.343

您可以将子项目存储库中的文件移动到您希望将它们包含在较大存储库中的目录中，然后将这些提交合并到最终存储库中。这将完全保留两个存储库的历史记录，包括所有提交 ID。

这可以使用类似于以下的命令来完成：

```
cd /path/to/subproject
mkdir subproject_dir
git mv file1 dir2 dir3... subproject_dir
git commit
cd /path/to/main_project
git pull /path/to/subproject 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-10T04:02:21.930

使用`git subtree`命令。假设您有新的仓库：

```
$ cd $ROOT_OF_NEW_REPO
$ git subtree add --prefix=subdirectory/for/old/repo <old git repo URL or checkout> <commit ref> 
```

例如。

```
$ git subtree add --prefix=history ~/repos/oldrepo HEAD 
```

该`history`目录将包含`HEAD`提交时的 oldrepo 文件以及所有历史记录。

# visual-studio-2010 - Visual Studio 在启动时崩溃

> ID：13337886
> 
> 赞同：20
> 
> 时间：2012-11-12T03:09:51.513
> 
> 标签：visual-studio-2010, crash

我的 Visual Studio 在启动时开始崩溃。在寻找补救措施的过程中，我找到了这两个建议，但都对我没有用：

*   在安全模式下运行时启动 Visual Studio，以及
*   在 Visual Studio 上运行修复。

但是，我发现如果我登录到不同的 Windows 帐户，Visual Studio 能够从该帐户运行而不会崩溃。

这是我在崩溃报告中观察到的错误代码：

```
LCID: 1033 
```

任何人都可以提供将我的 Visual Studio 恢复到工作状态的解决方案吗？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2015-02-23T21:59:46.287

对我来说，它原来是`GitExtensions`安装到`Visual Studio 2013`.

**-- 更新**：*在卸载 GitExtensions 之前试试这个*

@Enceradeira 在评论中建议取消选中该`Show current branch in Visual Studio`选项。在 GitExtensions 中，您可以通过*Tools -> Settings -> Appearance*到达那里：

![在此处输入图像描述](../Images/33b8f51ba546b1ef1f14df34addfe192.png)

**-- 更新结束**

卸载`GitExtensions`并重新安装它并取消选择所有 VS 插件后，我的 VS 再次运行顺利。

我什至整理了[一篇关于这个问题的博客文章，](http://shades-of-orange.com/post/Visual-Studio-2013-Update-4-Crashes-On-Startup-It-Might-Be-GitExtensions-Fault)因为它让我非常烦恼。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-11-12T04:28:02.327

由于您可以使用其他用户登录运行，因此您的本地设置可能有问题，您可以尝试重置它们：`devenv /resetsettings`在`Start menu -> Run`.

**警告：这会将 Visual Studio 恢复为默认设置。**

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-06-08T07:37:17.557

就我而言，VS 曾经在单个解决方案上崩溃。我通过删除相应解决方案的用户文件解决了这个问题：SolutionName.suo

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-08-13T12:54:28.437

尝试以管理员身份运行 VS。在我的情况下这是必要的。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-11-06T13:04:50.920

我的同事最近遇到了 Visual Studio 2013 在启动时崩溃的问题。不幸的是，我们发现[@Arun M 在答案](https://stackoverflow.com/a/13338394/1497596)中推荐的方法并没有解决问题：

```
devenv.exe /ResetSettings 
```

*...但是*，使用*不同*的命令行参数：

 *```
devenv.exe /ResetUserData 
```

一种简单的运行方式`devenv.exe`是通过 Visual Studio 命令提示符；在 Windows 10 上，可以在此处找到：

```
Start Button => All Apps => Visual Studio 2013 => Visual Studio Tools =>
  VS2013 x86 Native Tools Command Prompt 
```

有关这些命令行参数的更多信息`devenv.exe`，请参阅此相关问题的[答案：](https://stackoverflow.com/a/19460071/1497596)[如何真正重置 Visual Studio 2012 中的每个设置？](https://stackoverflow.com/q/17203820/1497596). ⚠ 特别是，请注意该答案中关于`/ResetUserData`命令行参数的警告声明！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-10-27T21:58:14.003

如果与这些 Visual Studio 崩溃同时发生，您的 Windows 应用程序日志中会出现“堆损坏”（异常代码：0xc0000005）错误（错误模块名称：WindowsCodecs.dll），这里有一些值得检查的内容：Expression Blend 中的错误 WIC 组件可能导致*所有*版本的 Visual Studio 在启动时崩溃，并导致 Internet Explorer 在访问许多（如果不是大多数）站点时崩溃。即使 Microsoft 分发此组件，他们仍将其称为“非 Microsoft 组件”。因此，重新安装 Visual Studio 无法解决此问题，在现有 Windows 安装上重新安装操作系统无法解决此问题，并且系统文件完整性检查不会检测到它。

如果我的情况，行为不端的编解码器是“C:\Program Files (x86)\Microsoft Expression\Common\Imaging\4.0.360.0\PSDCodec.dll”，只需取消注册此组件即可让我的 Visual Studio 从一致的启动启动崩溃中再次工作.

我发布此消息是希望针对 Visual Studio 崩溃的一个来源的解决方案可以为其他人节省 500 美元的 Microsoft 支持事件费和这导致我一周的停机时间。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-12-12T22:38:02.040

我只是将右下角的 Windows 语言更改为“ **EN** ”，然后以管理员身份启动。它奏效了，有趣..

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-04-10T14:44:55.417

我有一个非常奇怪的现象，即 Windows 7 机器上的 Visual Studio 2010 和 2013 在从 Windows 10 电脑启动的远程桌面会话中运行时崩溃。调试崩溃显示 CultureNotFound 异常。这是由 Windows 10 电脑上的区域设置引起的，无法翻译成 Windows 7 可以理解的内容。我的语言是英语（比利时）和 Azerty 键盘。我使用 Azerty 键盘添加并选择了英语（英国），崩溃消失了。没有其他程序因此受到影响。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-03-22T06:43:53.497

对我来说，这是由 Web Essentials 引起的，我可以通过禁用它、重新启动 VS、重新启用它、重新启动来解决。现在工作。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-09-07T04:43:02.650

我在 git2-msvstfs.dll 中启动时（或启动后不久，在打开任何解决方案之前）发生崩溃，这是由于将 3GB 临时文件放入我的解决方案中的目录而导致的。删除文件修复它。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-09-25T12:54:27.173

有一次我不小心按下了一个随机的组合键（可能是`ctrl+'`，但我没有意识到我正在按住 ctrl，所以当我意识到发生了一些不好的事情时我忘记了我按下了什么键）导致 VS Professional 2017 15.3.5半分钟内崩溃。重新启动后，我发现VS会交互几秒钟，然后在半分钟内崩溃。试图找出我意外激活的内容或在 VS 崩溃之前禁用它对我来说真的太快了。此外，如果我没有打开任何解决方案，它甚至会崩溃，所以我认为删除`.vs`（每个项目/解决方案解决方案资源管理器/打开文件状态）文件夹不会解决问题。

为了解决这个问题，我按照[Arun M 的评论](https://stackoverflow.com/questions/13337886/visual-studio-crash-at-the-start-up#comment18208595_13338394)重命名了我的`%LOCALAPPDATA%\Microsoft\VisualStudio\15.0_3f4d04be`文件夹。您将需要调整崩溃的 VS 版本/版本的路径。在我的机器上，我认为`15.0_3f4d04be`是专业版，`15.0_0fed6c59`是 VS 社区版。您可能必须根据文件夹的修改时间戳进行猜测，这可能会反映您上次使用该版本 VS 的日期。

重命名版本化的 dotfolder 后，VS 启动时没有崩溃。它以默认设置开始，但在运行一分钟后通过云同步内容自动恢复了我的一些设置，它甚至记住了我的帐户信息，所以我不需要登录。

我不需要重命名我的`%LOCALAPPDATA%\Microsoft\VSCommon`文件夹（Arun M 也建议这样做）。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-02-28T13:22:53.127

我有一个类似的问题，VS2015 和 VS2013 在启动时都会崩溃。将其追踪到我安装的一个应用程序，该应用程序将 .net 4.7.2 放在系统上。一旦我删除了该应用程序、删除了 .net 并重新安装了 .net 4.6，Visual Studio 又开始工作了。*

# javascript - 如何在性能和内存使用方面比较 IFrame 和 Ajax 内容？

> ID：13337893
> 
> 赞同：2
> 
> 时间：2012-11-12T03:10:21.897
> 
> 标签：javascript, html, ajax, iframe

我有一个页面，其中包含由服务器在同一域和 Web 应用程序中动态生成的大量内容，我可以完全控制页面和内容的生成。所以我在这里有两个选择：

1.  使用 IFrame 加载内容并在内容刷新时更改 src 属性。

2.  阿贾克斯

请注意，内容可以刷新并更改为其他内容，这意味着 iframe 的 src 可以动态更改或 ajax 内容可以根据用户频繁刷新。

假设我将在卸载/刷新之前清理 iframe/Ajax 的资源（html、javascript 对象、事件侦听器等），如果内容经常刷新，则哪个选项在性能和内存使用方面更可取？频繁刷新内容需要注意什么？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:32:41.957

如果我是你，我会选择 AJAX，原因有很多：

*   使用起来更干净
*   您不必处理提取内容和操作 DOM，**这总是很慢**
*   更容易调试

一般来说，我会说一个好的规则是：***不要大规模使用任何不是为它而设计的东西***

# qt - Qt4 QHash哈希冲突？

> ID：13337896
> 
> 赞同：4
> 
> 时间：2012-11-12T03:10:56.163
> 
> 标签：qt, qhash

我正在使用 QT 4.8，我注意到它有一个`QHash`可以按如下方式使用的类：

```
 QHash<QString, int> hash;
  hash["one"] = 1;
  hash["three"] = 3;
  hash["seven"] = 7;
  hash.insert("twelve", 12); 
```

如果有哈希冲突，会被正确处理吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-12T03:53:57.547

是的，将处理碰撞。QHash 是基于经典哈希表的容器的标准实现，如果不能正确处理冲突，则不会非常可靠。通常，基于哈希表的容器不会将键映射到列表中的单个条目，而是映射到可能包含多个条目的“桶”，其中不同的键映射到相同的哈希值。

获取值时，键的哈希值会导致正确的存储桶，然后容器将遍历存储桶中的条目，直到找到与您要查找的特定键匹配的项。

尽管我在文档中找不到关于 Qt 实现的“正确性”的具体参考，但这句话却没有提及。我无法想象它是其他的。

> QHash 的内部哈希表以 2 的幂次方增长，每次增长时，项目都会重新定位到新的存储桶中，计算方式为 qHash(key) % QHash::capacity()（存储桶的数量）。

一个简单的测试将增加我们的信心：

**BadHashOjbect.h**

```
#ifndef BADHASHOBJECT_H
#define BADHASHOBJECT_H

class BadHashObject
{
public:
    BadHashObject(const int value): value(value){}

    int getValue() const
    {
        return value;
    }

private:
    int value;
};

bool operator==(const BadHashObject &b1, const BadHashObject &b2)
{
    return b1.getValue() == b2.getValue();
}

uint qHash(const BadHashObject &/*key*/)
{
    return 1;
}

#endif // BADHASHOBJECT_H 
```

**主文件**

```
#include <iostream>
#include <QHash>
#include "BadHashObject.h"

using namespace std;

int main(int , char **)
{
    cout << "Hash of BadHashObject(10) is: " << qHash(BadHashObject(10)) << endl;
    cout << "Hash of BadHashObject(100) is: " << qHash(BadHashObject(100)) << endl;
    cout << "Adding BadHashObject(10), value10 and BadHashObject(100), value100" << endl;
    QHash<BadHashObject, QString> hashMap;
    hashMap.insert(BadHashObject(10), QString("value10"));
    hashMap.insert(BadHashObject(100), QString("value100"));
    cout << "Size of hashMap: " << hashMap.size() << endl;
    cout << "Value stored with key 10: " << hashMap.value(BadHashObject(10)).toStdString() << endl;
    cout << "Value stored with key 100: " << hashMap.value(BadHashObject(100)).toStdString() << endl;
} 
```

该类`BadHashObject`存储 an`int`并且其哈希函数将始终返回`1`，因此使用此类型作为键添加到 a 的所有对象`QHash`都将导致冲突。我们的测试程序的输出表明碰撞得到了正确的处理。

```
Hash of BadHashObject(10) is: 1
Hash of BadHashObject(100) is: 1
Adding BadHashObject(10), value10 and BadHashObject(100), value100
Size of hashMap: 2
Value stored with key 10: value10
Value stored with key 100: value100 
```

# java - ：java.net.UnknownHostException：无法解析主机“hosturl”：没有与主机名关联的地址

> ID：13337899
> 
> 赞同：1
> 
> 时间：2012-11-12T03:11:24.363
> 
> 标签：java, android

我有通过网络连接的 android 应用程序`"hosturl"`。此应用程序可以`hosturl`在初始步骤中连接，但在我尝试测试一段时间（比如 20 个或更多请求）后，我得到了上述异常，我无法再连接到上述 url。

如果我重新启动我的 android 手机，那么应用程序可以再次连接到，`"hosturl"`但是在我尝试连接`hosturl`几次后再次出现异常

如果您以前在 android 应用程序中遇到过这样的行为，任何人都可以在这里帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T13:14:57.303

您可能没有 INTERNET 权限。尝试将其添加到您的 AndroidManifest.xml 文件中，就在之前`</manifest>`：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T19:53:26.697

I met this and I just closed my AVD and start it again and it worked...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-23T16:38:40.583

检查您的互联网连接。检查 Wifi。检查服务器。

# java - 从 servlet 渲染 xhtml 文件

> ID：13337903
> 
> 赞同：0
> 
> 时间：2012-11-12T03:11:41.840
> 
> 标签：java, jsf, servlets, xhtml

我想知道是否有办法从 servlet 加载、解释和呈现 .xhtml 文件。我想要的是有一个 xhtml 文件，其中包含例如列表中的自定义行，从 servlet 或 bean 加载，进行解释，并获得 html 结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T21:38:40.350

在我看来，您不需要 Servlets 或 JSF，而是需要 JSP（应该看起来很熟悉，来自 PHP）。

请注意，这里的人们会不自觉地告诉您不要将逻辑放入页面中（并且有充分的理由），但我认为以您的背景，从仅 JSP 的方法*开始会对您有所帮助。*然后开始将逻辑移动到 servlet。您可以使用多种技术在 servlet 和 jsp 之间传递数据。我喜欢用

```
request.setAttribute("someString", valueObject); 
```

在您的 jsp 中，您可以使用：

```
<%= request.getAttribute("someString") %> 
```

从 servlet 调用你的 jsp 是通过

```
RequestDispatcher rd = req.getRequestDispatcher("/path.to.your.jsp"); 
```

如果您确实需要一个 .xhtml 文件（您的原始问题），您也可以使用最后一行，但它将是真正的 xhtml，就像它是从普通网络服务器（！= appserver）提供的一样

# mit-scheme - 找不到任何可用的显示类型

> ID：13337913
> 
> 赞同：1
> 
> 时间：2012-11-12T03:13:32.823
> 
> 标签：mit-scheme

我刚刚在 VirtualBox 中运行的 Centos 中安装了[mit-scheme](http://www.gnu.org/software/mit-scheme/)。但是每当我试图通过调用过程 (edit) 或 (edwin) 来启动 Edwin 编辑器时，都会返回一条错误消息，例如“找不到任何可用的显示类型”。任何人都可以帮我完成这个吗？

# php - PHP 解析错误“For-Loop”

> ID：13337914
> 
> 赞同：1
> 
> 时间：2012-11-12T03:13:37.820
> 
> 标签：php, for-loop, parse-error

是否有可能做到这一点？
这是我的代码和错误：

```
for ($i=1; ; $i {
  if (is_numeric($row[$i])) { //Error Line
    $c .= ",".$row[$i];
  } else {
    $c .=",'".$row[$i]."'";
  }
}
$c.=")"; 
```

**解析错误：**语法错误，**C:\inetpub\wwwroot 中出现意外的 T_IF .....**

```
for ($i=1; ; $i) {
  if (is_numeric($row[$i])) {
    $c .= ",".$row[$i];
  } else {
    $c .=",'".$row[$i]."'"; // Error Line
  }
}
//$c.=")"; 
```

**致命错误：**允许的内存大小为 12582912 字节已用尽

如果您能提供帮助，我已经尝试了一切我会感激的东西。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T03:24:59.093

查看[`for`](http://php.net/for)构造的手册。您错过了用于终止循环的第二个表达式。也可能是增量器。

您可能应该使用的是：

```
for ($i=1; isset($row[$i]); $i++) {
//              ^^           ^^ 
//           condition     counter 
```

通常 PHP 中的数组以 index 开头`0`而不是`1`. 但是我们不知道您的其余代码，所以。

# sql - 查询连接表，无效重复

> ID：13337918
> 
> 赞同：1
> 
> 时间：2012-11-12T03:14:21.200
> 
> 标签：sql, ms-access

我试过四处寻找无济于事，所以希望你能在这里提供帮助。我已经为此苦苦挣扎了几天。如果这有助于回答，数据在 MS Access 中。如果这不是用于此的正确程序，则非常欢迎您提出如何进行的建议。

我从表 1 和 2 开始，并希望以表 3 结束（如下所示）。

Field2(table1) 和 Field4(table2) 是相同的值（相同）。但是，因为当我尝试加入时它们有 2 个相同的值（即 1000），所以重复次数过多。我基本上希望在决赛表中字段 1 仅出现一次（无重复），并且第一次调用字段 3 中的值以不重复该值（可能存在相同的值，但它们将具有与之关联的不同 Field4 ）。

表 2 的值比表 1 中的值多得多，有些需要跳过（即表 2 中的值 1002 在表 1 中没有匹配的“L”值，因此可以忽略）。表 4 中显示了我不想要的结果示例，以供参考。表 1 可能有一些不在表 2 中的“L”值，但我仍然希望返回的值要么是空白，要么是用 N/A 填充的单元格...

非常感谢！

表格1

```
Field1  Field2
L1      1000
L2      1000
L3      1001
L4      1003
L5      1005 
```

表 2

```
Field3  Field4  Field5  Primary Key
4.5     1000    2000    1
3.4     1000    2000    2
2.4     1001    2001    3
1.7     1002    2002    4
1.4     1003    2003    5 
```

表 3 - 我想要的结果

```
Field1  Field2  Field3  Field5
L1      1000    4.5   2000
L2      1000    3.4   2000
L3      1001    2.4   2001
L4      1003    1.4   2003
L5      1005    NA      NA 
```

表 4-我不希望 L1 和 L2 重复的结果。

```
Field1  Field2  Field3  Field5
L1      1000    4.5   2000
L1      1000    3.4   2000
L2      1000    4.5   2000
L2      1000    3.4   2000
L3      1001    2.4   2001
L4      1003    1.4   2003 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:30:07.083

我怀疑仅使用普通 SQL 无法回答您的问题。但是你可以使用一些 VBA 来提取你需要的行：

```
Sub ExtractNoDuplicates()
  Dim Rs As Recordset
  Dim precField1 As Variant
  Dim precField2 As Variant
  Dim precID As Variant

  precField1 = Null
  precField2 = Null
  precID = Null

  Set Rs = CurrentDb.OpenRecordset("Select * from Table1 left join Table2 on table1.Field2 = table2.Field4 order by Field2, Field1, ID")

  While Not Rs.EOF
    If (IsNull(precID) Or IsNull(precField1))
       Or (precField1 <> Rs("Field1") And Rs("ID") > precID)
       Or (precField2 <> Rs("Field2")) Then

      precField1 = Rs("Field1")
      precField2 = Rs("Field2")
      precID = Rs("ID")
      ' print the row - or add it to a temporary table
      Debug.Print Rs("Field1"), Rs("Field2"), Rs("Field3"), Rs("Field5"), Rs("id")
      End If
    Rs.MoveNext
  Wend

  Rs.Close
  Set Rs = Nothing

End Sub 
```

# winforms - 将命令行参数传递给 C++/CLI 中的 windows 窗体文件

> ID：13337919
> 
> 赞同：2
> 
> 时间：2012-11-12T03:14:33.700
> 
> 标签：winforms, c++-cli

我已经学习 C++/CLI 几个月了，但无论我尝试什么，我似乎都无法解决我遇到的问题。

我需要将 String^、Array^ 或 ArrayList^ 数据类型从 main.cpp 传递到 Form1.h。我试图在 main.cpp 中使变量成为全局变量，然后使用 extern 调用该变量。但是，这不适用于 String、Array 和 ArrayList 数据类型。

我该怎么做呢？提前致谢。这是我的代码的解释：

```
//main.cpp

bool LoadFileFromArgument = false; //A boolean can be declared global
String^ argument; //this will not pass from main.cpp to Form1.h

int main(array<System::String ^> ^args)
{
String ^ argument = args[1]

// Enabling Windows XP visual effects before any controls are created
Application::EnableVisualStyles();
Application::SetCompatibleTextRenderingDefault(false); 

// Create the main window and run it
Application::Run(gcnew Form1());

return 0;
}

//Form1.h

public ref class Form1 : public System::Windows::Forms::Form
{
public:
    Form1(void)
    {
        InitializeComponent();
        //
        //TODO: Add the constructor code here
        //

        extern bool LoadFileFromArgument; //is grabbed without error
        extern String^ argument; //will not work 
```

这是错误：

```
error C3145: 'argument' : global or static variable may not 
have managed type 'System::String ^'

may not declare a global or static variable,
or a member of a native type that refers to objects in the gc heap 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T10:19:50.550

你能不能为表单创建一个重载的构造函数。IE

```
public ref class Form1 : public System::Windows::Forms::Form
{
public:
    Form1(String^ argument)
    {
        InitializeComponent();
        //
        //TODO: Add the constructor code here
        // 
        // Use "argument" parameter as req'd.
    }

    Form1(void)
    {
        //....usual constructor here...
        //..etc... 
```

然后从主要

```
// Create the main window and run it
Application::Run(gcnew Form1(argument)); 
```

# weka - 使用 WEKA 进行主题识别

> ID：13337920
> 
> 赞同：1
> 
> 时间：2012-11-12T03:14:34.753
> 
> 标签：weka, data-mining

我对数据挖掘和 WEKA 工具领域完全陌生（今天刚刚安装）。

我需要根据短文本句子进行主题识别。

假设我有几个类别： - 政治 - 体育 - 其他

我正在考虑执行以下操作：列出我将文本与之比较的术语列表：

*   运动的：
    *   美国国家橄榄球联盟
    *   NBA
    *   触地
    *   ETC
*   政治：
    *   选举
    *   总统
    *   奥巴马
    *   ETC

另外，我想添加更多类别。

然后我会在 WEKA 的帮助下应用一些算法 SVM 或朴素贝叶斯。

关于如何使用 WEKA 开始执行此操作的任何想法？

我已经搜索了一些关于 WEKA 的教程，但我似乎找不到任何与我正在尝试做的类似的例子。

任何帮助我启动将不胜感激。

# python - 加载后的Python Flask修改页面

> ID：13337924
> 
> 赞同：1
> 
> 时间：2012-11-12T03:15:01.813
> 
> 标签：python, web, flask

我有一个关于在 Python 中使用 Flask 的问题。假设我想为我正在为游戏制作的某个 mod 创建一个网站，并且我想放入一个实时聊天提要，在页面发送给这个人之后，我将如何修改页面的内容?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T03:40:39.227

这绝对是可行的。您所做的是使用一些 javascript 加载一个 html 页面，该页面将调用您的网络服务器以使用最近的聊天行更新页面。教程[Realtime Web Chat with Socket.io and Gevent](http://blog.pythonisito.com/2012/07/realtime-web-chat-with-socketio-and.html)是一个很好的起点。他在一篇文章中从头开始解释了整个过程。还有另外两个可能对您有用的 stackoverflow 问题：

*   [Python 中基于 Web 的聊天服务器的教程](https://stackoverflow.com/q/9371158/1699750)
*   [Python + comet + web（聊天）-我需要工作（！）库/服务器](https://stackoverflow.com/q/6135781/1699750)

对于聊天应用程序的特定于烧瓶的实现，您可能需要查看以下两个项目：

*   [烧瓶-gevent-socketio-聊天](https://github.com/kcarnold/flask-gevent-socketio-chat)
*   [烧瓶聊天](https://github.com/marconi/flask-chat)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T03:29:20.150

简短的回答：你不能。

更长的答案：一旦您“发送了页面”（即您完成了 HTTP 响应），您就无法更改发送的内容。但是，您可以使用 JavaScript 向服务器发出额外的 HTTP 请求，并使用 HTTP 响应来修改 DOM，这将改变人们正在查看的页面。制作实时聊天提要的方法有很多种，所有这些方法都太复杂了，无法在一个 Stack Overflow 上给出答案，但您可以确定它们都使用 JavaScript。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T03:41:09.390

我建议您研究 AJAX，特别是[jQuery](http://jquery.com/)。

jQuery 可以向您的烧瓶后端发送 ajax 请求以检索更多数据，并且在获取新数据后，它可以在用户浏览器中修改页面的 html 内容。

例子：

```
$.getJSON("/chat-feed", function(msg){
  $("#chat-container").append("<div>" + msg.text + "</div>");
}); 
```

# ios - 一个奇怪类型的 NSZombie

> ID：13337927
> 
> 赞同：0
> 
> 时间：2012-11-12T03:15:23.777
> 
> 标签：ios, nszombie

所以我得到了一个 NSzombie，上面写着这个

**-[__NSArrayI _cfTypeID]：消息发送到释放的实例**

知道那是什么吗？大概是一个数组，虽然我想如果它是一个 NS 类型它会说。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T03:32:55.947

是的——那将是某种类型的数组。大多数基础类型不是单个类，而是类簇。因此，您初始化数组的确切方式会影响`NSArray`您返回的子类。

确切的行为是未记录的，并且基本上保证会随着时间而改变，但是例如，如果您创建了一个具有少于一定数量的条目的不可变数组，那么系统可能会决定返回单个链接数组并将搜索作为简单的线性搜索执行。如果您在阈值之上创建一个，那么它可能会创建一个数组，该数组添加了某种用于搜索的分层逻辑（或者，更有可能包含在用户开始尝试搜索数组时创建合适的分层表的逻辑）。

相关课程学习：

*   永远不要尝试子类化基础类；
*   不要期望`isMemberOfClass:`能正常工作；
*   甚至不必期望`isKindOfClass:`能够从基础类的可变版本中区分不可变。

Apple 需要一种方法来区分这些类并将它们标记为私有，因此您最终会使用下划线和后缀。在实践中，我认为`__NSArrayI`是一个普通的不可变数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T03:41:36.937

基本上这意味着您的`NSArray`对象已经被释放。有些东西`Foundation.framework`试图访问你`NSArray`的私有方法`_cfTypeID`并崩溃了。

关于为什么对象中有`_cfTypeID`方法的问题`NSArray`。`NSArray`核心基金会对应的`CFArray`. 两种类型的可与“免费桥”互换。所以实际上苹果将这种方法用于内部使用。如果您想更深入地了解这一点。您可以访问[http://code.google.com/p/cocotron/source/browse/Foundation/NSArray/NSArray.m](http://code.google.com/p/cocotron/source/browse/Foundation/NSArray/NSArray.m)，这是 Cocotron 的 NSArray 实现。它与苹果的实现**不一样，但仍然是相似的。**

# c - 尝试在 C 中调用自定义函数但 scanf() 导致问题

> ID：13337931
> 
> 赞同：-1
> 
> 时间：2012-11-12T03:15:55.833
> 
> 标签：c, function, scanf

你能告诉这里有什么问题吗？

```
#include <stdio.h>
#include <stdlib.h>

int test (void)
{
    int i;
    printf("Enter a number: ");
    scanf("%d",&i);

    return i;
}

int main (void)

{

   test();

   return 0;
} 
```

这只是一个简单的示例，但由于某种原因，除非我摆脱了 scanf，否则 main 不会运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T04:51:31.610

始终`'\n'`在 printf 字符串的末尾使用 a 。这使得输出缓冲区刷新并打印字符串。在您的程序中添加更多打印。你可以像下面这样重写你的程序，打印将帮助你了解你的程序发生了什么。

```
#include <stdio.h>
#include <stdlib.h>

int test (void)
{
    int i;
    printf("Enter a number: \n");
    scanf("%d",&i);
    printf("You just eneterd : %d\n",i);
    return i;
}

int main (void)

{
   printf("About to call test() \n");
   test();
   printf("Done calling test() \n");
   return 0;
} 
```

最好买一本好的 C 编程书来理解这些基本的东西。我建议[C 编程语言](http://books.google.co.in/books?id=161QAAAAMAAJ&dq=c%20programming%20k%20and%20r&hl=en&sa=X&ei=OICgUOLAKs2pqwHCQg&ved=0CCwQ6AEwAA)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T05:03:57.980

我认为您必须使用 fflush() 或在 printf 函数末尾使用 '\n' 字符，这最终将刷新 std 输出缓冲区。为了检查，只需在读取值后使用 printf() 打印变量的值。

希望有帮助....

# android - CCRenderTexture,GL11ExtensionPack,Libgdx 如何

> ID：13337936
> 
> 赞同：1
> 
> 时间：2012-11-12T03:17:30.037
> 
> 标签：android, opengl-es, libgdx

我目前正在研究诸如“Tiny Wings”之类的效果[http://www.raywenderlich.com/3857/how-to-create-dynamic-textures-with-ccrendertexture](http://www.raywenderlich.com/3857/how-to-create-dynamic-textures-with-ccrendertexture)，并发现**CCRenderTexture**是解决方案。所以想知道怎么在android上做出这个效果，最后找到了这个 链接[https://github.com/ZhouWeikuan/cocos2d/blob/master/cocos2d-android/src/org/cocos2d/opengl/CCRenderTexture.java](https://github.com/ZhouWeikuan/cocos2d/blob/master/cocos2d-android/src/org/cocos2d/opengl/CCRenderTexture.java)表明它的**GL11ExtensionPack**

```
GL11ExtensionPack egl = (GL11ExtensionPack)CCDirector.gl;
        egl.glGetIntegerv(GL11ExtensionPack.GL_FRAMEBUFFER_BINDING_OES, oldFBO_, 0);
... 
```

但在 GLWrapperBase.java 中，它显示

```
// Unsupported GL11ExtensionPack methods
public void glBindFramebufferOES (int target, int framebuffer) {
        throw new UnsupportedOperationException();
} 
```

似乎gdx还没有实现这个功能。我想知道 libgdx 的相同功能是什么，或者如何在桌面上使用**GL11ExtensionPack** ~ 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:23:04.050

在 libGDX 中，您想使用一个`FrameBuffer`对象来执行相当于“CCRenderTexture”的操作。FrameBuffer 基本上允许您使用 OpenGL 命令绘制到屏幕外缓冲区，然后您可以稍后将该缓冲区的内容显示为纹理。请参阅[http://code.google.com/p/libgdx/wiki/OpenGLFramebufferObject](http://code.google.com/p/libgdx/wiki/OpenGLFramebufferObject)。请注意，FrameBuffer 对象仅在您的应用需要 OpenGL ES 2.0 时可用。

根据您要绘制的内容，您还可以查看[`Pixmap`](http://code.google.com/p/libgdx/wiki/GraphicsPixmap)libGDX 中的类。这支持一些简单的运行时绘图操作（如线条、矩形和像素）。同样的想法是您绘制到此纹理中，然后稍后在屏幕上渲染生成的纹理。这在 OpenGL ES 1.0 中也可用。

FrameBuffer 和 Pixmap 都应该在 Android 和桌面上正常工作（我也相信在 GWT 和 iOS 上......）

当您的应用暂时失去焦点时（OpenGL 上下文丢失导致一些纹理内容消失），请注意了解 Android 上会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-25T08:02:33.477

```
 Question   :   CCRenderTexture,GL11ExtensionPack,Libgdx How TO
interpreted as :   In libgdx, how to create dynamic texture.
    Answer     :   Use a private render function to draw in a private frame
    Example framework:
    ==================
    package com.badlogic.gdx.tests.bullet;

    /**
    Question   :   CCRenderTexture,GL11ExtensionPack,Libgdx How TO
interpreted as :   In libgdx, how to create dynamic texture?
    Answer     :   Use a private render function to draw in a private frame buffer
                convert the frame bufder to Pixmap, create Texture.
    Author  :   Jon Goodwin
    **/

    import com.badlogic.gdx.graphics.Texture;
    import com.badlogic.gdx.graphics.Pixmap;
    ...//(ctrl-shift-o) to auto-load imports in Eclipse

    public class BaseBulletTest extends BulletTest
    {
    //class variables
    =================
    public Texture           texture     = null;//create this
    public Array<Disposable> disposables = new Array<Disposable>();
    public Pixmap            pm          = null;
    //---------------------------
        @Override
        public void create ()
        {
            init();
        }
    //---------------------------
        public static void init ()
        {
            if(texture == null) texture(Color.BLUE, Color.WHITE);
            TextureAttribute ta_tex     = TextureAttribute.createDiffuse(texture);
            final Material material_box = new Material(ta_tex, ColorAttribute.createSpecular(1, 1, 1, 1),
                                                       FloatAttribute.createShininess(8f));
            final long attributes1      = Usage.Position | Usage.Normal | Usage.TextureCoordinates;
            final Model boxModel = modelBuilder.createBox(1f, 1f, 1f, material_box, attributes1);
            ...
        }
    //---------------------------
        public Texture texture(Color fg_color, Color bg_color)
        {
            Pixmap pm = render( fg_color, bg_color );
            texture = new Texture(pm);//***here's your new dynamic texture***
            disposables.add(texture);//store the texture
        }
    //---------------------------
        public Pixmap render(Color fg_color, Color bg_color)
        {
            int width = Gdx.graphics.getWidth();
            int height = Gdx.graphics.getHeight();

            SpriteBatch spriteBatch = new SpriteBatch();

            m_fbo = new FrameBuffer(Format.RGB565, (int)(width * m_fboScaler), (int)(height * m_fboScaler), false);
            m_fbo.begin();
            Gdx.gl.glClearColor(bg_color.r, bg_color.g, bg_color.b, bg_color.a);
            Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);
            Matrix4 normalProjection = new Matrix4().setToOrtho2D(0, 0, Gdx.graphics.getWidth(),  Gdx.graphics.getHeight());
            spriteBatch.setProjectionMatrix(normalProjection);

            spriteBatch.begin();
            spriteBatch.setColor(fg_color);
            //do some drawing ***here's where you draw your dynamic texture***
            ...
            spriteBatch.end();//finish write to buffer

            pm = ScreenUtils.getFrameBufferPixmap(0, 0, (int) width, (int) height);//write frame buffer to Pixmap

            m_fbo.end();
    //      pm.dispose();
    //      flipped.dispose();
    //      tx.dispose();
            m_fbo.dispose();
            m_fbo = null;
            spriteBatch.dispose();
    //      return texture;
            return pm;
        }
    //---------------------------
    }//class BaseBulletTest
    //--------------------------- 
```

# haskell - 无法将预期类型“Bool”与实际类型“IO Bool”匹配

> ID：13337937
> 
> 赞同：4
> 
> 时间：2012-11-12T03:17:50.143
> 
> 标签：haskell

我正在尝试编写一个素数生成器并利用 MillerRabin 公式检查数字是否为素数，然后再将数字返回给我。下面是我的代码：

```
primegen :: Int -> IO Integer
primegen bits =
    fix $ \again -> do
        x <- fmap (.|. 1) $ randomRIO (2^(bits - 1), 2^bits - 1)
        if primecheck x then return x else again

primesTo100 = [2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97]

powerMod :: (Integral a, Integral b) => a -> a -> b -> a
powerMod m _ 0 =  1
powerMod m x n | n > 0 = join (flip f (n - 1)) x `rem` m where
  f _ 0 y = y
  f a d y = g a d where
    g b i | even i    = g (b*b `rem` m) (i `quot` 2)
          | otherwise = f b (i-1) (b*y `rem` m)

witns :: (Num a, Ord a, Random a) => Int -> a -> IO [a]
witns x y = do
     g <- newStdGen 
     let r = [9080191, 4759123141, 2152302898747, 3474749600383, 341550071728321]
         fs = [[31,73],[2,7,61],[2,3,5,7,11],[2,3,5,7,11,13],[2,3,5,7,11,13,17]]
     if  y >= 341550071728321
      then return $ take x $ randomRs (2,y-1) g
       else return $ snd.head.dropWhile ((<= y).fst) $ zip r fs

primecheck :: Integer -> IO Bool
primecheck n | n `elem` primesTo100 = return True
                     | otherwise = do
    let pn = pred n
        e = uncurry (++) . second(take 1) . span even . iterate (`div` 2) $ pn
        try = return . all (\a -> let c = map (powerMod n a) e in
                                  pn `elem` c || last c == 1)
    witns 100 n >>= try 
```

我不明白 IO Bool 发生了什么。我收到以下错误...

```
 Couldn't match expected type `Bool' with actual type `IO Bool'
 In the return type of a call of `primecheck'
 In the expression: primecheck x
 In a stmt of a 'do' block: if primecheck x then return x else again 
```

如果我将 IO Bool 更改为普通的 Bool，他们会给我这个：

```
Couldn't match expected type `Bool' with actual type `m0 a0' 
```

谢谢你们的帮助！我很感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T03:23:31.530

```
if primecheck x then return x else again 
```

无效，因为`primecheck x`返回 type 的值`IO Bool`。你想用 do 表示法或类似的东西对 monad 进行排序：

```
primecheck x >>= (\val -> if val then return x else again) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T03:22:57.507

由于`primecheck`return `IO Bool`，当你调用它时`primegen`，你需要对它进行排序而不是像纯函数那样调用它。

```
primegen :: Int -> IO Integer
primegen bits =
    fix $ \again -> do
        x <- fmap (.|. 1) $ randomRIO (2^(bits - 1), 2^bits - 1)
        success <- primecheck x
        if success then return x else again 
```

# struts2 - 如何将 Struts 2 与 Tiles 3 集成

> ID：13337938
> 
> 赞同：6
> 
> 时间：2012-11-12T03:18:05.623
> 
> 标签：struts2, tiles, tiles-3

我们如何将 Struts 2 与 Tiles 3 集成？当前的 struts2-tiles-plugin (2.3.4.1) 适用于旧版本的磁贴 (2.0.6 版)，这可能有点麻烦。

*这是一个自我回答，以帮助其他人进行整合。*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T03:41:02.133

解决方案是添加所需的依赖项，使用适当的侦听器加载切片并创建自定义结果类型。幸运的是，这些步骤非常简单，一旦完成，您可以按照正常的图块 2 示例来了解如何定义模板。

1)**依赖**项（从基本的 struts 项目开始，但在本例中我将使用约定，因此最好添加 struts2-conventions-plugin，它将包括 struts2-core 等）：

*   **不包括**struts2-tiles-plugin
*   **groupId**：org.apache.tiles，**artifiactId**：tile-extras，**版本**：3.0.1
*   **groupId**：org.slf4j，**artifiactId**：jcl-over-slf4j，**版本**：1.5.8
*   **groupId**：org.slf4j，**artifiactId**：slf4j-jdk14，**版本**：1.5.8

**注意**：更高版本的 slf4j 依赖项*可能会*起作用，我尚未对此进行测试。

2)**使用适当的侦听器加载图块**

这个例子包括了完整的 web.xml，第 3-5 行对于熟悉 struts2 的人来说应该是新的。

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <listener>
        <listener-class>org.apache.tiles.extras.complete.CompleteAutoloadTilesListener</listener-class>
    </listener>
    <filter>
        <filter-name>struts2</filter-name>
        <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
</web-app> 
```

3）**创建自定义结果类型**

我们需要定义一个自定义结果类型以用于我们的操作：

```
package com.quaternion.result;

import com.opensymphony.xwork2.ActionInvocation;
import javax.servlet.ServletContext;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import org.apache.struts2.ServletActionContext;
import org.apache.struts2.dispatcher.ServletDispatcherResult;
import org.apache.tiles.TilesContainer;
import org.apache.tiles.access.TilesAccess;
import org.apache.tiles.request.ApplicationContext;
import org.apache.tiles.request.servlet.ServletRequest;
import org.apache.tiles.request.servlet.ServletUtil;

public class TilesResult extends ServletDispatcherResult {

    public TilesResult() {
        super();
    }

    public TilesResult(String location) {
        super(location);
    }

    @Override
    public void doExecute(String location, ActionInvocation invocation) throws Exception {
        //location = "test.definition"; //for test
        setLocation(location);
        ServletContext context = ServletActionContext.getServletContext();
        ApplicationContext applicationContext = ServletUtil.getApplicationContext(context);
        TilesContainer container = TilesAccess.getContainer(applicationContext);
        HttpServletRequest request = ServletActionContext.getRequest();
        HttpServletResponse response = ServletActionContext.getResponse();
        ServletRequest servletRequest = new ServletRequest(applicationContext, request, response);
        container.render(location, servletRequest);
    }
} 
```

4）我们还需要告诉struts2我们的结果类型：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
    <constant name="struts.devMode" value="true" />
    <constant name="struts.ui.theme" value="simple" />
    <package  name="tiles-package"  namespace="" extends="struts-default">
        <result-types>
            <result-type default="true" name="tiles-result" class="com.quaternion.result.TilesResult"/>
        </result-types>
    </package>   
</struts> 
```

有了这个，我们现在可以在我们的项目中使用切片，假设我们已经创建了一个名为“test.definition”的切片定义，我们可以通过执行以下操作来告诉我们的操作使用该定义：

```
package com.quaternion.demo.action.test;

import com.opensymphony.xwork2.ActionSupport;
import org.apache.struts2.convention.annotation.ParentPackage;
import org.apache.struts2.convention.annotation.Result;

@ParentPackage("tiles-package")
@Result(type="tiles-result", location="test.definition")
public class QuaternionResultTest extends ActionSupport{} 
```

* * *

就是这样，这将允许您使用 tile 3+ 配置任何版本的 struts2，请参阅[http://tiles.apache.org/framework/index.html](http://tiles.apache.org/framework/index.html)了解更多配置详细信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-28T11:40:15.233

感谢 Ken，Struts 2 添加了一个新插件来支持 Tiles 3 结果类型，它应该可以在即将发布的新版本中使用 - Struts 2.3.9

[https://cwiki.apache.org/confluence/display/WW/Tiles+3+Plugin](https://cwiki.apache.org/confluence/display/WW/Tiles+3+Plugin)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-17T06:51:33.857

```
<!DOCTYPE tiles-definitions PUBLIC "-//Apache Software Foundation//DTD Tiles Configuration 3.0//EN" "http://tiles.apache.org/dtds/tiles-config_3_0.dtd"> 
```

在您的 tiles.xml 中使用提到的 doctype

# ios - 如何设置普通 UIBarButtonItem 的背景图片？

> ID：13337941
> 
> 赞同：1
> 
> 时间：2012-11-12T03:18:30.107
> 
> 标签：ios, uibarbuttonitem, uibarbuttonitemstyle

如果我的 UIBarButtonItem ( `lightButton`) 的样式为 Bordered，则以下任一行都会更改背景图像：

```
[lightButton setBackgroundImage:resizeableImage forState:UIControlStateNormal style:UIBarButtonItemStyleBordered barMetrics:UIBarMetricsDefault];
[lightButton setBackgroundImage:resizeableImage forState:UIControlStateNormal barMetrics:UIBarMetricsDefault]; 
```

如果按钮的样式为普通，则以下行都不会更改背景图像：

```
[lightButton setBackgroundImage:resizeableImage forState:UIControlStateNormal style:UIBarButtonItemStylePlain barMetrics:UIBarMetricsDefault];
[lightButton setBackgroundImage:resizeableImage forState:UIControlStateNormal barMetrics:UIBarMetricsDefault]; 
```

除了使用之外，是否可以更改普通 UIBarButtonItem 的背景图像`initWithCustomView:`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T03:38:18.797

你可以使用它。

```
UIButton *modalViewButton = [UIButton buttonWithType:UIButtonTypeCustom];
UIImage* imagex = [UIImage imageNamed:@"xxxx.png"];
[modalViewButton addTarget:self action:sel forControlEvents:UIControlEventTouchUpInside];
[modalViewButton setImage:btnImage forState:UIControlStateNormal];
//modalViewButton setBackImage......
[modalViewButton setFrame:CGRectMake(0, 0, imagex.size.width, imagex.size.height)];
UIBarButtonItem *modalBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:modalViewButton]; 
```

# vba - Access 2010 VBA 表单 - 自动调整表单大小

> ID：13337942
> 
> 赞同：0
> 
> 时间：2012-11-12T03:18:33.027
> 
> 标签：vba, ms-access

我已经完成了可以在办公室使用的表格，但是，当在不同的计算机上打开表格时，表格不会调整大小。相反，会出现滚动条。如何使表单和控件自动调整大小？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-12-04T23:35:31.363

这里有一些 VBA 代码可以添加到表单中，无论用户在他们的显示器上制作的窗口有多大或多小，或者他们的显示器分辨率是多少，它都会使表单看起来相同。

您也可以通过按住`Ctrl`键并上下滚动鼠标滚轮来放大或缩小文本（或者，按住`Shift`键并`+`按下键或`-`键。）

要使用此功能，只需打开 Access 并在设计视图中打开您的表单。首先，右键单击表单的图像并添加`Form Header/Footer`.

[![在此处输入图像描述](../Images/7e6ec93d3c04dc0d9b3df0bdcce94102.png)](https://i.stack.imgur.com/XzmtA.png)

如果您不将页眉和页脚添加到表单，下面的代码将出错。但是，如果您不希望页眉和页脚出现在表单上，​​您可以将它们的高度缩小到零。

通过单击表单左上角的小框来选择表单本身，就在选项卡下方：

[![在此处输入图像描述](../Images/c78991a1b708e8cf6fb8d5a400d4803d.png)](https://i.stack.imgur.com/CoN2D.png)

这将确保我们在查看`Property Sheet`.

要查看`Property Sheet`表单（如果它不可见），请按住`Alt`键并按下`Enter`键。

选择`Event`选项卡。

[![在此处输入图像描述](../Images/e0b0fd752ec91a0b88f51cb37ad020f8.png)](https://i.stack.imgur.com/HMtGJ.png)

然后，您需要将文字添加`[Event Procedure]`到表单本身后面的以下五个事件中：

> 负载
> 
> 上键
> 
> 按下键
> 
> 调整大小
> 
> 在鼠标滚轮上

您可以在`[Event Procedure]`这些事件旁边的文本框中键入文字文本，或者单击每个事件旁边的省略号 (...) 按钮并`Code Builder`从弹出菜单中进行选择。

它看起来像这样：

[![在此处输入图像描述](../Images/86cb52c95c08825efe38400767075823.png)](https://i.stack.imgur.com/fRGXY.png)

...

[![在此处输入图像描述](../Images/78301faa5a101916c61162b22a9f1359.png)](https://i.stack.imgur.com/zBWXm.png)

...

[![在此处输入图像描述](../Images/72df7b2c17e4a953f5142dc8ef6bd214.png)](https://i.stack.imgur.com/rzTdT.png)

...

[![在此处输入图像描述](../Images/f2af143d471d25535e6f53c6bd56a978.png)](https://i.stack.imgur.com/lmDVq.png)

...

[![在此处输入图像描述](../Images/7e7b9baf3f3abd1301f190933219ea67.png)](https://i.stack.imgur.com/OWaC2.png)

此外，在事件列表的底部，您还需要将`Key Preview`属性更改为`Yes`：

[![在此处输入图像描述](../Images/c5022bbaf1a80dd3ccaf0e592a006ce2.png)](https://i.stack.imgur.com/rbvw9.png)

最后，您可能希望`Scroll Bars`关闭表单，以免它们与任何内容重叠。为此，请在设计视图中转到表单的`Format`选项卡并将属性更改为。`Property Sheet``Scroll Bars``Neither`

[![在此处输入图像描述](../Images/a4ff99ee3d2c87fdaa9a5e88c3481eec.png)](https://i.stack.imgur.com/mimDh.png)

现在，要添加 VBA 代码，按住`Alt`并点击`F11`查看 VBA 编辑器。

进入 VBA 编辑器后，双击文件夹`Form_YourFormName`下的选项：`Microsoft Access Class Objects`

[![在此处输入图像描述](../Images/aa887cdeb324b012fcfa663d0c80b9c1.png)](https://i.stack.imgur.com/sNTxT.png)

如果您没有看到该文件夹​​，则返回到设计视图中的表单并单击您刚刚修改的任何事件`Microsoft Access Class Objects`的文字旁边的省略号 (...) 。`[Event Procedure]`

[![在此处输入图像描述](../Images/277de14423727c9bb136ff316f11afcf.png)](https://i.stack.imgur.com/QjD9G.png)

这将带您回到 VBA 编辑器，您现在应该在`Form_YourFormName`代码区域内。那里已经有一些代码，但您可以在继续下一步之前删除所有代码。

然后在右侧屏幕的主要部分，只需复制并粘贴下面的代码即可完成。

```
Option Compare Database
Option Explicit

'Set an unchangeable variable to the amount (10% for example) to increase or
'decrease the font size with each zoom, in or out.
Const FONT_ZOOM_PERCENT_CHANGE = 0.1

'Create the fontZoom and ctrlKeyIsPressed variables outside of
'the sub definitions so they can be shared between subs
Private fontZoom As Double
Private ctrlKeyIsPressed As Boolean

'Create an enum so we can use it later when pulling the data out of the "Tag" property
Private Enum ControlTag
    FromLeft = 0
    FromTop
    ControlWidth
    ControlHeight
    OriginalFontSize
    OriginalControlHeight
End Enum

Private Sub Form_Load()
    'Set the font zoom setting to the default of 100% (represented by a 1 below).
    'This means that the fonts will appear initially at the proportional size
    'set during design time. But they can be made smaller or larger at run time
    'by holding the "Shift" key and hitting the "+" or "-" key at the same time,
    'or by holding the "Ctrl" key and scrolling the mouse wheel up or down.
    fontZoom = 1

    'When the form loads, we need to find the relative position of each control
    'and save it in the control's "Tag" property so the resize event can use it
    SaveControlPositionsToTags Me
End Sub

Private Sub Form_Resize()
    'Set the height of the header and footer before calling RepositionControls
    'since it caused problems changing their heights from inside that sub.
    'The Tag property for the header and footer is set inside the SaveControlPositionsToTags sub
    Me.Section(acHeader).Height = Me.WindowHeight * CDbl(Me.Section(acHeader).Tag)
    Me.Section(acFooter).Height = Me.WindowHeight * CDbl(Me.Section(acFooter).Tag)

    'Call the RepositionControls Sub and pass this form as a parameter
    'and the fontZoom setting which was initially set when the form loaded and then
    'changed if the user holds the "Shift" key and hits the "+" or "-" key
    'or holds the "Ctrl" key and scrolls the mouse wheel up or down.
    RepositionControls Me, fontZoom
End Sub

Private Sub Form_KeyDown(KeyCode As Integer, Shift As Integer)

    'PURPOSE: Make the text on the form bigger if "Shift" and "+" are pressed
    'at the same time and smaller if "Shift" and "-" are pressed at the same time.
    'NOTE: Using the "Ctrl" key instead of the "Shift" key conflicts with Access's
    'default behavior of using "Ctrl -" to delete a record, so "Shift" is used instead

    'Was the "Shift" key being held down while the Key was pressed?
    Dim shiftKeyPressed As Boolean
    shiftKeyPressed = (Shift And acShiftMask) > 0

    'If so, check to see if the user pressed the "+" or the "-" button at the
    'same time as the "Shift" key. If so, then make the font bigger/smaller
    'by the percentage specificed in the FONT_ZOOM_PERCENT_CHANGE variable.
    If shiftKeyPressed Then

        Select Case KeyCode
            Case vbKeyAdd
                fontZoom = fontZoom + FONT_ZOOM_PERCENT_CHANGE
                RepositionControls Me, fontZoom

                'Set the KeyCode back to zero to prevent the "+" symbol from
                'showing up if a textbox or similar control has the focus
                KeyCode = 0

            Case vbKeySubtract
                fontZoom = fontZoom - FONT_ZOOM_PERCENT_CHANGE
                RepositionControls Me, fontZoom

                'Set the KeyCode back to zero to prevent the "-" symbol from
                'showing up if a textbox or similar control has the focus
                KeyCode = 0

        End Select

    End If

    'Detect if the "Ctrl" key was pressed. This variable
    'will be used later when we detect a mouse wheel scroll event.
    If (Shift And acCtrlMask) > 0 Then
        ctrlKeyIsPressed = True
    End If

End Sub

Private Sub Form_KeyUp(KeyCode As Integer, Shift As Integer)
    'Change the ctrlKeyIsPressed variable to false when
    'any key is let up. This will make sure the form text does
    'not continue to grow/shrink when the mouse wheel is
    'scrolled after the ctrl key is pressed and let up.
    ctrlKeyIsPressed = False
End Sub

Private Sub Form_MouseWheel(ByVal Page As Boolean, ByVal Count As Long)
    'If the "Ctrl" key is also being pressed, then zoom the form in or out
    If ctrlKeyIsPressed Then
        Debug.Print ctrlKeyIsPressed
        'The user scrolled up, so make the text larger
        If Count < 0 Then

            'Make the font bigger by the percentage specificed
            'in the FONT_ZOOM_PERCENT_CHANGE variable
            fontZoom = fontZoom + FONT_ZOOM_PERCENT_CHANGE
            RepositionControls Me, fontZoom

        'The user scrolled down, so make the text smaller
        ElseIf Count > 0 Then

            'Make the font smaller by the percentage specificed
            'in the FONT_ZOOM_PERCENT_CHANGE variable
            fontZoom = fontZoom - FONT_ZOOM_PERCENT_CHANGE
            RepositionControls Me, fontZoom
        End If

    End If
End Sub

Public Sub SaveControlPositionsToTags(frm As Form)
On Error Resume Next

    Dim ctl As Control

    Dim ctlLeft As String
    Dim ctlTop As String
    Dim ctlWidth As String
    Dim ctlHeight As String
    Dim ctlOriginalFontSize As String
    Dim ctlOriginalControlHeight As String

    For Each ctl In frm.Controls

        'Find the relative position of this control in design view
        'e.g.- This control is 5% from the left, 10% from the top, etc.
        'Those percentages can then be saved in the Tag property for this control
        'and used later in the form's resize event
        ctlLeft = CStr(Round(ctl.Left / frm.Width, 4))
        ctlTop = CStr(Round(ctl.Top / frm.Section(ctl.Section).Height, 4))
        ctlWidth = CStr(Round(ctl.Width / frm.Width, 4))
        ctlHeight = CStr(Round(ctl.Height / frm.Section(ctl.Section).Height, 4))

        'If this control has a FontSize property, then capture the
        'control's original font size and the control's original height from design-time
        'These will be used later to calculate what the font size should be when the form is resized
        Select Case ctl.ControlType
            Case acLabel, acCommandButton, acTextBox, acComboBox, acListBox, acTabCtl, acToggleButton
                ctlOriginalFontSize = ctl.FontSize
                ctlOriginalControlHeight = ctl.Height
        End Select

        'Add all this data to the Tag property of the current control, separated by colons
        ctl.Tag = ctlLeft & ":" & ctlTop & ":" & ctlWidth & ":" & ctlHeight & ":" & ctlOriginalFontSize & ":" & ctlOriginalControlHeight

    Next

    'Set the Tag properties for the header and the footer to their proportional height
    'in relation to the height of the whole form (header + detail + footer)
    frm.Section(acHeader).Tag = CStr(Round(frm.Section(acHeader).Height / (frm.Section(acHeader).Height + frm.Section(acDetail).Height + frm.Section(acFooter).Height), 4))
    frm.Section(acFooter).Tag = CStr(Round(frm.Section(acFooter).Height / (frm.Section(acHeader).Height + frm.Section(acDetail).Height + frm.Section(acFooter).Height), 4))

End Sub

Public Sub RepositionControls(frm As Form, fontZoom As Double)
On Error Resume Next

    Dim formDetailHeight As Long
    Dim tagArray() As String

    'Since "Form.Section(acDetail).Height" usually returns the same value (unless the detail section is tiny)
    'go ahead and calculate the detail section height ourselves and store it in a variable
    formDetailHeight = frm.WindowHeight - frm.Section(acHeader).Height - frm.Section(acFooter).Height

    Dim ctl As Control

    'Loop through all the controls on the form
    For Each ctl In frm.Controls

        'An extra check to make sure the Tag property has a value
        If ctl.Tag <> "" Then

            'Split the Tag property into an array
            tagArray = Split(ctl.Tag, ":")

            If ctl.Section = acDetail Then
                'This is the Detail section of the form so use our "formDetailHeight" variable from above
                ctl.Move frm.WindowWidth * (CDbl(tagArray(ControlTag.FromLeft))), _
                                   formDetailHeight * (CDbl(tagArray(ControlTag.FromTop))), _
                                   frm.WindowWidth * (CDbl(tagArray(ControlTag.ControlWidth))), _
                                   formDetailHeight * (CDbl(tagArray(ControlTag.ControlHeight)))
            Else
                ctl.Move frm.WindowWidth * (CDbl(tagArray(ControlTag.FromLeft))), _
                                   frm.Section(ctl.Section).Height * (CDbl(tagArray(ControlTag.FromTop))), _
                                   frm.WindowWidth * (CDbl(tagArray(ControlTag.ControlWidth))), _
                                   frm.Section(ctl.Section).Height * (CDbl(tagArray(ControlTag.ControlHeight)))
            End If

            'Now we need to change the font sizes on the controls.
            'If this control has a FontSize property, then find the ratio of
            'the current height of the control to the form-load height of the control.
            'So if form-load height was 1000 (twips) and the current height is 500 (twips)
            'then we multiply the original font size * (500/1000), or 50%.
            'Then we multiply that by the fontZoom setting in case the user wants to
            'increase or decrease the font sizes while viewing the form.
            Select Case ctl.ControlType
                Case acLabel, acCommandButton, acTextBox, acComboBox, acListBox, acTabCtl, acToggleButton
                    ctl.FontSize = Round(CDbl(tagArray(ControlTag.OriginalFontSize)) * CDbl(ctl.Height / tagArray(ControlTag.OriginalControlHeight))) * fontZoom
            End Select

        End If

    Next

End Sub 
```

以下是缩小时表单外观的一些屏幕截图。

前：

[![在此处输入图像描述](../Images/99c0627927fe90739e87f64d1ff0828b.png)](https://i.stack.imgur.com/zZqxo.png)

后：

[![在此处输入图像描述](../Images/29a0ed5270586bacef2058b640c5e2c5.png)](https://i.stack.imgur.com/cGdS5.png)

此外，您可以通过按住`Ctrl`键并向上滚动鼠标滚轮来放大文本（或者，按住`Shift`键并按下`+`键。）

[![在此处输入图像描述](../Images/19486ac28a4dc02c78b00a16148685fe.png)](https://i.stack.imgur.com/K0ufc.png)

而且，您可以通过按住`Ctrl`键并向下滚动鼠标滚轮来缩小文本（或者，按住`Shift`键并按下`-`键。）

[![在此处输入图像描述](../Images/3af62832fc0a278c74bfda25b9582624.png)](https://i.stack.imgur.com/7iQR3.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T10:12:34.303

几点注意事项：

*   看看[如何将控件锚定到表单](http://www.dailymotion.com/video/xck1l1_understanding-anchoring-controls-in_tech)，以便它们可以随表单调整大小。

*   设计您的表单，以便它们在用户拥有的最小屏幕尺寸上正确显示。
    考虑用户将如何与您的应用程序交互非常重要。您不能期望 Access 神奇地重排和调整所有内容，这是您作为应用程序设计者需要考虑的事情。
    因此，请限制表单上的控件数量，并保持它们足够小，以便它们在办公室中任何合理的最小屏幕分辨率上都能正确显示。

*   如果您不希望出现条形图，请查看表单的`scrollbars`属性。

*   查看您可以使用的各种表单样式：在 Access 2007 及更高版本中，您可以在选项卡中使用表单。您还可以使它们弹出，并防止它们被调整大小。
    查看以下表单属性并尝试各种组合以获得所需的效果：

    ![表单的主要属性](../Images/23d97485f8feedb5a3a3be76788c5871.png) ![表单的弹出和模式属性](../Images/56d3528cadf5a968cefd28efd6f32f5a.png)

# magento - 确定着陆页的参数 - Magento

> ID：13337944
> 
> 赞同：0
> 
> 时间：2012-11-12T03:18:45.837
> 
> 标签：magento, magento-1.5

我对 Magento 很陌生，并试图了解我的计划的所有优点和缺点，以及如何实施。

我正在与一个拥有完善商店的客户合作。拥有数百个类别和子类别。我想对这个模板进行少量修改（几乎所有内容都是基于 CSS 的），仅用于登录页面。因此，例如访问 www.magentosite.com/category.html 将显示现在的页面，但访问 www.magentosite.com/category.html?type=lp 将显示相同的产品，但样式略有修改。

这将比构建登录页面以匹配已经存在的类别更容易。这有什么magento缺点吗？如果没有，添加几行 php 以获得 $_GET['type'] 的最佳文件是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:37:14.027

在后台：

*   转到菜单目录/类别/管理类别
*   选择要自定义的类别
*   转到“自定义设计”选项卡。

在这里，您可以仅针对此特定类别更改页面设计 ..（例如，创建一个新的特定 .phtml 模板文件 .. 或保留相同的 .phtml 文件但覆盖它的 css/js 皮肤）

有关更多详细信息，请查看此处：

*   [http://www.magentocommerce.com/wiki/modules_reference/english/mage_adminhtml/catalog_category/edit#custom_design_tab](http://www.magentocommerce.com/wiki/modules_reference/english/mage_adminhtml/catalog_category/edit#custom_design_tab)
*   [http://www.magentocommerce.com/knowledge-base/entry/customizing-category-page-design](http://www.magentocommerce.com/knowledge-base/entry/customizing-category-page-design)

**编辑：**

如果您需要根据页面级别（或 GET 参数）自定义页面，可以使用 Observer `catalog_controller_category_init_after`。

在其中，您可以检查其级别 ( `$category->getLevel() == 1`) 或检查请求 ( `Mage::app()->getRequest()->hasParam('type')`) 中的参数以影响新设计。有关发​​送的事件参数的详细信息，请参阅 Mage_Catalog_CategoryController::_initCatagory()。如果您从未使用过观察者，请查看：[http ://codemagento.com/2011/04/observers-and-dispatching-events/](http://codemagento.com/2011/04/observers-and-dispatching-events/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T10:21:31.000

一种简单的方法是创建一个 cms 页面并调用其中的类别块。您可以通过在自定义 CMS 页面的 WYSIWYG 编辑器中编写以下代码来调用类别块。

```
{{block type="catalog/product_list" category_id="respective-id-here" template="catalog/product/list.phtml"}} 
```

自定义 CMS 页面的链接将是 www.magentosite.com/URL-Key。

您可以通过访问目录->管理类别区域从管理面板本身获取类别 ID。然后，您只能通过 CSS 更改设计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T14:06:18.433

您可以做您正在寻找的一种方法是使用多个商店视图和一些 htaccess 重写规则。我假设您当前有一个“主网站”、“主商店组”和“默认”商店视图。

首先，添加一个新的商店视图，您可以随意命名。记住您使用的“代码”，因为下一步将需要它。假设新商店代码是“自定义”。

现在，在主 .htaccess 文件中添加以下代码，该代码将根据查询字符串参数设置一些环境变量：

```
...
<IfModule mod_rewrite.c>
    RewriteEngine on

    # Set some environment variables based on the query string var "type"
    RewriteCond %{QUERY_STRING} ^(.*[&?])?type=lp(&.*|)$
    RewriteRule (.*) $1 [E=MAGE_RUN_CODE:custom,E=MAGE_RUN_TYPE:store]
</IfModule>
... 
```

**注意：** MAGE_RUN_CODE 和 MAGE_RUN_TYPE 环境变量是上面设置的。这些由 Magento 的 index.php 文件处理，该文件确定要使用哪个 Magento 存储视图。

您需要做的最后一件事是配置您的“自定义”商店视图以使用不同的主题。您可以在系统 > 配置 > 设计中执行此操作，只需确保将配置范围更改为新的自定义视图（系统 > 配置页面左上角的下拉菜单）。

这对于您当前的需求可能有点过头了，但是当我想添加一种通过查询字符串更改我的 Magento 主题的快速方法时，我经常使用这种策略。

# arduino - 找不到类类型名称“规范化”- 处理

> ID：13337945
> 
> 赞同：1
> 
> 时间：2012-11-12T03:18:54.757
> 
> 标签：arduino, processing

我对这段代码进退两难，不知道该怎么做。我对处理很陌生。这是来自此链接的项目...

[http://blog.makezine.com/2012/08/10/build-a-touchless-3d-tracking-interface-with-everyday-materials/](http://blog.makezine.com/2012/08/10/build-a-touchless-3d-tracking-interface-with-everyday-materials/)

非常感谢任何帮助...提前致谢

```
import processing.serial.*;
import processing.opengl.*;

Serial serial;
int serialPort = 1;

int sen = 3; // sensors
int div = 3; // board sub divisions

Normalize n[] = new Normalize[sen];
MomentumAverage cama[] = new MomentumAverage[sen];
MomentumAverage axyz[] = new MomentumAverage[sen];
float[] nxyz = new float[sen];
int[] ixyz = new int[sen];

float w = 256; // board size
boolean[] flip = {
  false, true, false};

int player = 0;
boolean moves[][][][];

PFont font;

void setup() {
  size(800, 600, P3D);
  frameRate(25);

  font = loadFont("TrebuchetMS-Italic-20.vlw");
  textFont(font);
  textMode(SCREEN);

  println(Serial.list());
  serial = new Serial(this, Serial.list()[serialPort], 115200);

  for(int i = 0; i < sen; i++) {
    n[i] = new Normalize();
    cama[i] = new MomentumAverage(.01);
    axyz[i] = new MomentumAverage(.15);
  }

  reset();
}

void draw() {
  updateSerial();
  drawBoard();
}

void updateSerial() {
  String cur = serial.readStringUntil('\n');
  if(cur != null) {
    String[] parts = split(cur, " ");
    if(parts.length == sensors) {
      float[] xyz = new float[sen];
      for(int i = 0; i < sen; i++)
        xyz[i] = float(parts[i]);

      if(mousePressed && mouseButton == LEFT)
        for(int i = 0; i < sen; i++)
          n[i].note(xyz[i]);

      nxyz = new float[sen];
      for(int i = 0; i < sen; i++) {
        float raw = n[i].choose(xyz[i]);
        nxyz[i] = flip[i] ? 1 - raw : raw;
        cama[i].note(nxyz[i]);
        axyz[i].note(nxyz[i]);
        ixyz[i] = getPosition(axyz[i].avg);
      }
    }
  }
}

float cutoff = .2;
int getPosition(float x) {
  if(div == 3) {
    if(x < cutoff)
      return 0;
    if(x < 1 - cutoff)
      return 1;
    else
      return 2;
  } 
  else {
    return x == 1 ? div - 1 : (int) x * div;
  }
}

void drawBoard() {
  background(255);

  float h = w / 2;
  camera(
    h + (cama[0].avg - cama[2].avg) * h,
    h + (cama[1].avg - 1) * height / 2,
    w * 2,
    h, h, h,
    0, 1, 0);

  pushMatrix();
  noStroke();
  fill(0, 40);
  translate(w/2, w/2, w/2);
  rotateY(-HALF_PI/2);
  box(w);
  popMatrix();

  float sw = w / div;
  translate(h, sw / 2, 0);
  rotateY(-HALF_PI/2);

  pushMatrix();
  float sd = sw * (div - 1);
  translate(
    axyz[0].avg * sd,
    axyz[1].avg * sd,
    axyz[2].avg * sd);
  fill(255, 160, 0);
  noStroke();
  sphere(18);
  popMatrix();

  for(int z = 0; z < div; z++) {
    for(int y = 0; y < div; y++) {
      for(int x = 0; x < div; x++) {
        pushMatrix();
        translate(x * sw, y * sw, z * sw);

        noStroke();
        if(moves[0][x][y][z])
          fill(255, 0, 0, 200);
        else if(moves[1][x][y][z])
          fill(0, 0, 255, 200);
        else if(
        x == ixyz[0] &&
          y == ixyz[1] &&
          z == ixyz[2])
          if(player == 0)
            fill(255, 0, 0, 200);
          else
            fill(0, 0, 255, 200);
        else
          fill(0, 100);
        box(sw / 3);

        popMatrix();
      }
    }
  }

  fill(0);
  if(mousePressed && mouseButton == LEFT)
    msg("defining boundaries");
}

void keyPressed() {
  if(key == TAB) {
    moves[player][ixyz[0]][ixyz[1]][ixyz[2]] = true;
    player = player == 0 ? 1 : 0;
  }
}

void mousePressed() {
  if(mouseButton == RIGHT)
    reset();
}

void reset() {
  moves = new boolean[2][div][div][div];
  for(int i = 0; i < sen; i++) {
    n[i].reset();
    cama[i].reset();
    axyz[i].reset();
  }
}

void msg(String msg) {
  text(msg, 10, height - 10);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T10:27:22.630

事实上，你错过了一堂课，不止一堂。返回[github](https://github.com/Make-Magazine/3DInterface/tree/master/TicTacToe3D)并下载或复制并粘贴所有三个代码，将每个代码放在一个与类同名的新选项卡中（这不是必需的，但这是一个很好的做法）。TicTacToe3D.pde 是主要代码。要创建一个新选项卡，请从 Processing IDE 的箭头菜单中选择“新选项卡”（就在右侧标准按钮的下方）。代码应该运行。虽然需要一个 Arduino 才能真正让它工作。

# websocket - 图像未加载到 websockets

> ID：13337947
> 
> 赞同：0
> 
> 时间：2012-11-12T03:19:21.340
> 
> 标签：websocket

我在加载图片时遇到问题

```
var bgReady = false;
var bgImage = new Image();
bgImage.onload = function () {
    alert('it loaded');
bgReady = true;
};
bgImage.src = "images/background.png"; 
```

当 websocket 服务器运行时，警报不会出现。如果我删除套接字代码并关闭服务器，则会出现警报。我已经在整个代码中放置了警报，以查看它可以在不中断的情况下运行多远。除了图像似乎不想加载之外，似乎没有任何问题。任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T05:10:38.997

我正在从不同的端口访问文件，这就是为什么它们没有加载

# file - 如何自动删除文件名中的文件扩展名

> ID：13337953
> 
> 赞同：3
> 
> 时间：2012-11-12T03:19:54.910
> 
> 标签：file, bash, cut

我正在尝试在 bash 中创建一个脚本，该脚本需要从文件名中删除文件扩展名，如下所示

```
original:   something.zip
removed version: something 
```

我在想我可以为此使用 cut ，但我担心可能会出现一种情况，即文件名可能包含多个句点等，类似于以下内容

```
something.v2.zip 
```

话虽如此，我想知道是否有人对我可以做些什么来从文本/文件名行中删除最后一个句点及其后面的文本有什么建议？任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T03:24:28.783

```
 f=file.zip
 echo "${f%.zip}"

 file 
```

'%' 是一个参数修饰符，它意味着从变量值的右侧删除 '%' 字符之后的任何内容，在本例中为 string `.zip`。您可以通过使用通配符来使其更通用以删除任何尾随扩展名

```
 echo "${f%.*}"

 file 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T03:27:17.280

如果要删除从最后一个期间到结尾的 ，请尝试以下操作：

```
$ f=some.thing.zip
$ echo "${f%.*}"
some.thing 
```

# matlab - Matlab：如何将粗网格系统细分为具有更细网格的系统？

> ID：13337954
> 
> 赞同：1
> 
> 时间：2012-11-12T03:20:07.740
> 
> 标签：matlab, grid

我有一个粗略的网格`5x5`，我称之为**Grid System-1**，我想将该网格系统进一步细分为三个步骤：

**Grid System-2 :** **Grid System-1**的每个网格被细分为`5x5`总共 625 个网格

**Grid System-3 :** **Grid System-2**的每个网格被细分为`5x5`15625 个网格

**Grid System-4** : **Grid System-3**的每个网格被细分为`5x5`总共 390625 个网格

在上述所有步骤中，所有网格系统的边界大小都是相似的（比如说`1m X 1m`），因为我们只是通过进一步细分来增加每个网格的精细度。有人可以帮助在 Matlab 中实现这个吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T04:47:25.510

看看杜克大学的这个从[粗到细的图像重建工具箱。](http://nislab.ee.duke.edu/NISLab/Coarse-to-fine_estimation_%28with_software%29.html)这可能是你所追求的。

# microsoft-metro - 如何使用 Metro WebServices 客户端以编程方式配置代理设置

> ID：13337963
> 
> 赞同：1
> 
> 时间：2012-11-12T03:21:11.957
> 
> 标签：microsoft-metro, glassfish-3, webservices-client

我有一个要求，我需要使用 Metro Web 服务客户端以编程方式设置代理设置。任何人都可以建议我需要使用哪个 API 来设置代理主机、端口。

# c# - 有没有办法从 200 个字符中得到一个好的 20 个字符散列？

> ID：13337964
> 
> 赞同：0
> 
> 时间：2012-11-12T03:21:16.873
> 
> 标签：c#, hash

我需要基于 FirstName/LastName 组合构建一个哈希。在数据库中，每个最大值都是 100 个字符，并且哈希值最多需要 20 个字符。

有没有办法在此基础上可靠地产生独特的价值？假设 FirstName/LastName 组合是唯一的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T03:25:31.433

哈希永远不能绝对保证是唯一的，它们不应该用作唯一标识符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T03:35:29.537

实际上，良好的加密哈希值*几乎*与它们各自的消息一样独特。您所描述的内容看起来非常像 SHA-1，*如果*您希望相同的 FirstName/LastName 映射到相同的“唯一”20 个字符。完整的 SHA-1 比 GUID 大（说明了什么），并且作为加密，分布相当均匀，不太可能发生冲突（参见 SHA-1 的冲突攻击——即使是故意的也很难做到）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T03:43:24.313

听起来您希望表中的每条记录都有一个唯一标识符，而且这个标识符不容易猜到。有多种方法可以实现这一目标，包括：

**1.**为带有`unique`约束的标识符添加一列，并在插入列时生成随机标识符。如果由于标识符已经存在而导致插入失败，请生成新标识符并重试。

**2.**在表中添加一`auto GUID`列，让数据库生成唯一标识符。

**3.**向表中添加一`auto-increment int`列，让数据库生成唯一标识符并对其进行混淆处理。例如，您可以通过将整数填充为 16 并使用 128 位分组密码对其进行加密来做到这一点。例子：

```
private static readonly AesManaged cipher = new AesManaged()
{
    BlockSize = 128,
    Key = Encoding.UTF8.GetBytes("secret__secret__"),
    Mode = CipherMode.ECB,
    Padding = PaddingMode.None
};

static string Obfuscate(int id)
{
    using (var transform = cipher.CreateEncryptor())
    {
        return Convert.ToBase64String(
            transform.TransformFinalBlock(
                Encoding.UTF8.GetBytes(
                    id.ToString("0000000000000000")), 0, 16));
    }
}

static int Deobfuscate(string s)
{
    using (var transform = cipher.CreateDecryptor())
    {
        return int.Parse(
            Encoding.UTF8.GetString(
                transform.TransformFinalBlock(
                    Convert.FromBase64String(s), 0, 16)));
    }
} 
```

**请注意**，这些方法都无法猜测标识符，只是比将整数加 1 更困难。您仍然需要检查用户是否有权查看与标识符关联的信息。

# javascript - 读取 .json 文件并出现错误

> ID：13337965
> 
> 赞同：0
> 
> 时间：2012-11-12T03:21:48.493
> 
> 标签：javascript, html, json, markers

我正在尝试读取一个简单的 json 数据文件。但我不断收到**“未捕获的类型错误：无法读取未定义的属性 'lat'”**错误。我不确定为什么。我已经尝试过无数次尝试更改 json 文件的结构，但无济于事。任何援助都将受到欢迎。

```
for (var i = 0; i < 1000; i++) {
    var dataCoal = data.coal[i];

    // Creating a random position
    var latLng = new google.maps.LatLng(dataCoal.lat,dataCoal.lon);

    //Uncaught TypeError: Cannot read property 'lat' of undefined

    // Creating a marker. Note that we don't add it to the map
    var marker = new google.maps.Marker({
      position: latLng
    });

    // Adding the marker to the markers array
    markers.push(marker);

  } 
```

这是 JSON 文件中的一项

```
var data = { "coal": [{"NAME":"Haju Coal","Metals":"Coal","Lat":-0.11667,"Lon":114.85,"Accuracy":"approximate","DevStage":"Preproduction","ActStatus":"Temporarily On Hold","Company":"BHP Billiton Group","InSitu":700,"Metals_ft_style":0,"Accuracy_ft_style":0,"DevStage_ft_style":0,"ActStatus_ft_style":0}]} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T08:50:58.447

我认为最好的方法是像 PHP 中的 foreach 一样遍历 data.coal：

```
var coal;
for (var index in data.coal) {

  if (data.coal.hasOwnProperty(index)) {
    coal = data.coal[index];

    var latLng = new google.maps.LatLng(coal.Lat, coal.Lon);

    // ...

  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T03:38:06.380

你应该有一些东西来表示你的循环结束。

```
for (var i = 0; i < 1; i++) { 
```

除此之外，您唯一遇到的错误`lat`是`lon`小写

```
var latLng = new google.maps.LatLng(dataCoal.Lat,dataCoal.Lon); 
```

应该做的伎俩

所以它应该看起来像

```
var data = { "coal": [{"NAME":"Haju Coal","Metals":"Coal","Lat":-0.11667,"Lon":114.85,"Accuracy":"approximate","DevStage":"Preproduction","ActStatus":"Temporarily On Hold","Company":"BHP Billiton Group","InSitu":700,"Metals_ft_style":0,"Accuracy_ft_style":0,"DevStage_ft_style":0,"ActStatus_ft_style":0}]}
for (var i = 0; data.length < 1000; i++) {
    var dataCoal = data.coal[i];

    // Creating a random position
    var latLng = new google.maps.LatLng(dataCoal.Lat, dataCoal.Lon);

    //Uncaught TypeError: Cannot read property 'lat' of undefined

    // Creating a marker. Note that we don't add it to the map
    var marker = new google.maps.Marker({
      position: latLng
    });

    // Adding the marker to the markers array
    markers.push(marker);

} 
```

​</p>

# mysql - 发生数据库错误错误号：1062

> ID：13337968
> 
> 赞同：0
> 
> 时间：2012-11-12T03:22:10.303
> 
> 标签：mysql, codeigniter, sql-update

我尝试使用 sql 为我的 CI 执行一次选项更新三个表，但为什么它仍然错误？

**这是错误警告：**

```
A Database Error Occurred

Error Number: 1062

Duplicate entry '0' for key 1

UPDATE `t_publisher` SET `id_publisher` = NULL, `publisher` = NULL, `artis` = NULL, `id_label` = NULL WHERE `id_publisher` = '113' 
```

**这是代码：**

```
function update($id_user=null)
  {
   if (($this->input->post('submit') == 'Update')){
    $user=$this->input->post('username');
    $pass=$this->input->post('userpassword');
    $ussta=$this->input->post('userstatus');
    $usty=$this->input->post('usertype');

   $data = array(
    'user_name' => $user,
    'user_pass' => $pass,
    'user_status' => $ussta,
    'user_type' => $usty);

    $this->db->where('user_id', $this->input->post('id'), $data);
    $this->db->update("t_user",$data);

   $data1 = array(
    'id_publisher' => $id_publis,
    'publisher' => $publis,
    'artis' => $ar,
    'id_label' => $id_lab);

    $this->db->where('id_publisher', $this->input->post('id'), $data);
    $this->db->update("t_publisher",$data1);
    echo $this->db->last_query();
    die();

   $data2 = array(
    'id_label' => $id_lab,
    'label' => $label);

    $this->db->where('id_label', $this->input->post('id'), $data);
    $this->db->update("t_label",$data2);
    echo $this->db->last_query();
    die();
    redirect("registrasi/reg");
   }
    $var['data'] = $this->db->query("select * from t_user where USER_ID= '$id_user'")->row_array();  
    $var1['data'] = $this->db->query("select * from t_publisher where id_publisher = '$id_publis'")->row_array();
    $var2['data'] = $this->db->query("select * from t_label where id_label = '$id_lab'")->row_array();
    $this->load->view('update', $var,$var1,$var2);
} 
```

我的代码有什么问题？请帮忙。之前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T03:25:28.863

您的`UPDATE`子句将`id_publisher`列设置为`NULL`，并且根据列的名称和您收到的错误，*该*列是`PRIMARY KEY`设置为的表`unsigned NOT NULL`。

因此，当您这样做时`id_publisher = NULL`，MySQL 会将其转换为`id_publisher = 0`由于`unsigned`部分。这将在第一次执行时很好，但是，当您在第二行上运行它时，您现在将尝试插入*第二个*主键值`0`，这是不允许的。

根据`die()`示例代码中语句的位置，我假设以下块是罪魁祸首：

```
 $data1 = array(
    'id_publisher' => $id_publis,
    'publisher' => $publis,
    'artis' => $ar,
    'id_label' => $id_lab);

    $this->db->where('id_publisher', $this->input->post('id'), $data);
    $this->db->update("t_publisher",$data1); 
```

在这里，您的`$id_publis`变量为空或 null。

我建议要么`id_publisher = NULL`从子句中删除与从数组`UPDATE`中删除一样简单的部分，要么重新考虑您实际需要将其设置为开头的原因（在这种情况下，删除该行会更有益吗？）`'id_publisher' => $id_publis,``$data1``null`

# xml - 如何从 emacs 中的 url 解析 xml？

> ID：13337969
> 
> 赞同：0
> 
> 时间：2012-11-12T03:22:09.683
> 
> 标签：xml, url, emacs

我正在使用 url-retrieve-synchronously 函数，它返回一个包含响应的缓冲区。我想知道是否有一种非 hacky 的方式来获取响应的主体并能够将其传递给 xml-parse-region。

是否有 xml-parse-from-url 函数？如何解析来自 url-retrieve 的响应？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:17:11.697

在 identica-mode.el（在 GNU GPL 版本 2 下获得许可）中有一个函数将使用 url-retrieve 并将其传递给 xml 解析器并返回解析后的响应：

```
(defun identica-get-response-body (&optional buffer)
  "Extract HTTP response body from HTTP response, parse it as XML, and return a XML tree as list.
`buffer' may be a buffer or the name of an existing buffer.
 If `buffer' is omitted, current-buffer is parsed.

Removed the call to `identica-clean-response-body'."
  (or buffer
      (setq buffer (current-buffer)))
  (set-buffer buffer)
  (set-buffer-multibyte t)
  (let ((start (save-excursion
         (goto-char (point-min))
         (and (re-search-forward "<\?xml" (point-max) t)
              (match-beginning 0)))))
    ;;(identica-clean-response-body) ; necessary for identica, cleaned up some weird characters
    (and start
         (xml-parse-region start (point-max))))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T04:02:57.163

你可以看看随 Emacs 分发的一些包是如何做到的。例如`lisp/net/newst-backend.el`， 和`lisp/net/soap-client.el`。

# php - 在php中邮寄之前的确认页面

> ID：13337970
> 
> 赞同：0
> 
> 时间：2012-11-12T03:22:28.327
> 
> 标签：php, html, email

> **可能重复：**
> [在 php 中邮寄之前确认消息](https://stackoverflow.com/questions/13301834/confirming-message-before-mailing-in-php)

我正在开发一个页面，我的老板将在数据库中搜索一家公司。一旦他单击其名称，将显示电子邮件格式（以 html 完成）作为确认页面。然后会有一个按钮（或链接？我仍然不确定使用哪个），然后将邮件发送到该特定公司。

```
<img src="../../img/emmlogo.jpg" style="left: 0;position: absolute; width: 75px;"/>
<body style="padding: 0 0 0 100px;position: relative;">
<?php echo date("F d, Y ");?>  <br><br>

<b> echo $row_Recordset1['First Name'].'&nbsp'.$row_Recordset1['Middle Initial'].'&nbsp'.$row_Recordset1['Last Name']; ?></b><br>
<?php echo $row_Recordset1 ['Position'].'<br>'.$row_Recordset1['Company Name'].'<br>'.$row_Recordset1['Corporate Address'];?><br><br>

<p>Dear <?php echo $row_Recordset1['Last Name']; ?>:</p> 
```

我只到了确认页面，一切都准备好了。我只是想知道我是否可以发送信息而不必从我所做的确认页面重复查询，并且我希望邮件看起来与我制作 html 的方式完全相同。我愿意接受任何意见或建议，因为这个网站在开发这个特定项目时帮助了我很多。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T04:37:29.593

首先，如果您打算发送此 HTML，您应该摆脱图片的相对路径……提供每个人都可以访问的服务器的链接。

您可以做的是发送一封 HTML 电子邮件（很多库已经为您这样做了）。如果您想直接重用您的确认页面，请考虑使用`ob_start`and `ob_end_clean`。在这两个调用之间，查询生成预览的脚本并将其转储到缓冲区中，使用`ob_get_contents`. 这应该使您免于编写两次代码。

这是我的一个项目的示例代码：

```
ob_start(); // turn on output buffering
require("mails/email_preview.php"); // include, require, process whatever you want to fill the buffer with
$_body=ob_get_contents(); // get the content of the buffer
ob_end_clean(); // erase the buffer and turn off output buffering

$this->sendMail($_emailAddress, "Email Title", $_body); 
```

有用的网址：

*   [ob_start](http://ca3.php.net/ob_start)
*   [ob_get_contents](http://ca3.php.net/ob_get_contents)
*   [ob_end_clean](http://ca3.php.net/ob_end_clean)

# scala - Scala中的“应启用结构类型成员方法的反射访问......”警告是什么意思？

> ID：13337976
> 
> 赞同：17
> 
> 时间：2012-11-12T03:23:21.420
> 
> 标签：scala, scala-2.10

切换到 Scala 2.10 后，我收到大量警告：

> 结构类型成员方法的反射访问...应该通过使隐式值 language.reflectiveCalls 可见来启用

这是什么意思？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-12T05:42:55.230

该警告实际上告诉在文档中的何处查找解释：

```
Test.scala:9: warning: reflective access of structural type member method y should be enabled
by making the implicit value language.reflectiveCalls visible.
This can be achieved by adding the import clause 'import scala.language.reflectiveCalls'
or by setting the compiler option -language:reflectiveCalls.
See the Scala docs for value scala.language.reflectiveCalls for a discussion
why the feature should be explicitly enabled. 
```

[引用的 Scaladoc 条目](https://www.scala-lang.org/api/current/scala/language$.html#reflectiveCalls:languageFeature.reflectiveCalls)（请务必单击左侧的 |> 箭头以展开文档条目）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-17T21:59:32.143

来自 Scala 文档：

> **为什么要控制它？**反射并非在所有平台上都可用。ProGuard 等流行工具在处理它时存在问题。即使在反射可用的情况下，反射调度也会导致令人惊讶的性能下降。

想想这个使用匿名子类的代码：

```
class Student(val id:Int)
val specialStudent = new Student(0) {
   val greeting = "I am a special student with id " + id // Warning: id can be obfuscated
} 
```

[链接到 Scala 文档](http://www.scala-lang.org/api/current/scala/language$.html#reflectiveCalls:languageFeature.reflectiveCalls)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-01-22T18:22:30.797

我用一个函数将一个`Option[Double or Long]`除以 100 时遇到了这个警告：

```
 def safeDivideBy100[T <: AnyVal { def toDouble: Double }](number: Option[T]): Option[Double] =
     number match {
       case None    => None
       case Some(x) => Some(x.toDouble / 100)
     } 
```

修复它只需要添加到文件的顶部：

```
import scala.language.reflectiveCalls 
```

# macos - 如何使用 automator 发送新推文？

> ID：13337980
> 
> 赞同：0
> 
> 时间：2012-11-12T03:23:36.663
> 
> 标签：macos, twitter, applescript, automator

与这篇文章有关，[https://apple.stackexchange.com/questions/70585/applescript-opens-new-window-for-everything-when-run](https://apple.stackexchange.com/questions/70585/applescript-opens-new-window-for-everything-when-run)。

我想知道我是否可以突出显示选定的文本并运行此服务，我可以在新的推文文本框中拥有选定的文本吗？

这是当前的代码：

```
 activate application "Tweetbot"
tell application "System Events"
  tell process "Tweetbot"
      repeat until exists
          delay 0.4
      end repeat
      set frontmost to true
      delay 0.2
      keystroke "n" using command down
  end tell
end tell 
```

[http://i.stack.imgur.com/aahdK.png](https://i.stack.imgur.com/aahdK.png)

[http://i.stack.imgur.com/pHtkX.png](https://i.stack.imgur.com/pHtkX.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T20:11:42.260

您可以在 Automator 中将所选文本作为变量传递，并使用 UI 脚本设置文本字段的内容。

```
on run {input, parameters}
    activate application "Tweetbot"
    tell application "System Events" to tell process "Tweetbot"
        keystroke "n" using command down
        set value of text area 1 of scroll area 1 of window 1 to (input as text)
    end tell
end run 
```

如果您使用具有除命令以外的其他修饰键的快捷方式运行脚本，请尝试将其替换`keystroke "n" using command down`为`click menu item "New Tweet" of menu 1 of menu bar item "Tweet" of menu bar 1`.

# c - 可以帮助理解 c 的这个 objdump

> ID：13337983
> 
> 赞同：-3
> 
> 时间：2012-11-12T03:23:53.593
> 
> 标签：c, assembly, dump, objdump

```
08048544 <compare_password>:
 8048544:   55                      push   %ebp
 8048545:   89 e5                   mov    %esp,%ebp
 8048547:   83 ec 38                sub    $0x38,%esp
 804854a:   8b 45 0c                mov    0xc(%ebp),%eax
 804854d:   89 45 d4                mov    %eax,-0x2c(%ebp)
 8048550:   65 a1 14 00 00 00       mov    %gs:0x14,%eax
 8048556:   89 45 f4                mov    %eax,-0xc(%ebp)
 8048559:   31 c0                   xor    %eax,%eax
 804855b:   c7 45 e4 00 00 00 00    movl   $0x0,-0x1c(%ebp)
 8048562:   c7 45 e0 00 00 00 00    movl   $0x0,-0x20(%ebp)
 8048569:   eb 22                   jmp    804858d <compare_password+0x49>
 804856b:   8b 45 e0                mov    -0x20(%ebp),%eax
 804856e:   03 45 d4                add    -0x2c(%ebp),%eax
 8048571:   0f b6 10                movzbl (%eax),%edx
 8048574:   8b 45 e0                mov    -0x20(%ebp),%eax
 8048577:   05 44 a1 04 08          add    $0x804a144,%eax
 804857c:   0f b6 00                movzbl (%eax),%eax
 804857f:   31 c2                   xor    %eax,%edx
 8048581:   8d 45 ea                lea    -0x16(%ebp),%eax
 8048584:   03 45 e0                add    -0x20(%ebp),%eax
 8048587:   88 10                   mov    %dl,(%eax)
 8048589:   83 45 e0 01             addl   $0x1,-0x20(%ebp)
 804858d:   83 7d e0 09             cmpl   $0x9,-0x20(%ebp)
 8048591:   7e d8                   jle    804856b <compare_password+0x27>
 8048593:   c7 45 e0 00 00 00 00    movl   $0x0,-0x20(%ebp)
 804859a:   eb 2c                   jmp    80485c8 <compare_password+0x84>
 804859c:   8b 55 08                mov    0x8(%ebp),%edx
 804859f:   89 d0                   mov    %edx,%eax
 80485a1:   c1 e0 02                shl    $0x2,%eax
 80485a4:   01 d0                   add    %edx,%eax
 80485a6:   01 c0                   add    %eax,%eax
 80485a8:   03 45 e0                add    -0x20(%ebp),%eax
 80485ab:   05 e0 a0 04 08          add    $0x804a0e0,%eax
 80485b0:   0f b6 10                movzbl (%eax),%edx
 80485b3:   8d 45 ea                lea    -0x16(%ebp),%eax
 80485b6:   03 45 e0                add    -0x20(%ebp),%eax
 80485b9:   0f b6 00                movzbl (%eax),%eax
 80485bc:   38 c2                   cmp    %al,%dl
 80485be:   75 04                   jne    80485c4 <compare_password+0x80>
 80485c0:   83 45 e4 01             addl   $0x1,-0x1c(%ebp)
 80485c4:   83 45 e0 01             addl   $0x1,-0x20(%ebp)
 80485c8:   83 7d e0 09             cmpl   $0x9,-0x20(%ebp)
 80485cc:   7e ce                   jle    804859c <compare_password+0x58>
 80485ce:   83 7d e4 08             cmpl   $0x8,-0x1c(%ebp)
 80485d2:   7e 07                   jle    80485db <compare_password+0x97>
 80485d4:   b8 01 00 00 00          mov    $0x1,%eax
 80485d9:   eb 05                   jmp    80485e0 <compare_password+0x9c>
 80485db:   b8 00 00 00 00          mov    $0x0,%eax
 80485e0:   8b 55 f4                mov    -0xc(%ebp),%edx
 80485e3:   65 33 15 14 00 00 00    xor    %gs:0x14,%edx
 80485ea:   74 05                   je     80485f1 <compare_password+0xad>
 80485ec:   e8 2f fe ff ff          call   8048420 <__stack_chk_fail@plt>
 80485f1:   c9                      leave  
 80485f2:   c3                      ret    

080485f3 <main>:
 80485f3:   55                      push   %ebp
 80485f4:   89 e5                   mov    %esp,%ebp
 80485f6:   83 e4 f0                and    $0xfffffff0,%esp
 80485f9:   83 ec 30                sub    $0x30,%esp
 80485fc:   65 a1 14 00 00 00       mov    %gs:0x14,%eax
 8048602:   89 44 24 2c             mov    %eax,0x2c(%esp)
 8048606:   31 c0                   xor    %eax,%eax
 8048608:   c7 44 24 04 00 00 00    movl   $0x0,0x4(%esp)
 804860f:   00 
 8048610:   8d 44 24 10             lea    0x10(%esp),%eax
 8048614:   89 04 24                mov    %eax,(%esp)
 8048617:   e8 f4 fd ff ff          call   8048410 <gettimeofday@plt>
 804861c:   8b 54 24 10             mov    0x10(%esp),%edx
 8048620:   8b 44 24 14             mov    0x14(%esp),%eax
 8048624:   0f af c2                imul   %edx,%eax
 8048627:   89 04 24                mov    %eax,(%esp)
 804862a:   e8 21 fe ff ff          call   8048450 <srand@plt>
 804862f:   e8 3c fe ff ff          call   8048470 <rand@plt>
 8048634:   89 44 24 18             mov    %eax,0x18(%esp)
 8048638:   8b 4c 24 18             mov    0x18(%esp),%ecx
 804863c:   ba 67 66 66 66          mov    $0x66666667,%edx
 8048641:   89 c8                   mov    %ecx,%eax
 8048643:   f7 ea                   imul   %edx
 8048645:   c1 fa 02                sar    $0x2,%edx
 8048648:   89 c8                   mov    %ecx,%eax
 804864a:   c1 f8 1f                sar    $0x1f,%eax
 804864d:   29 c2                   sub    %eax,%edx
 804864f:   89 d0                   mov    %edx,%eax
 8048651:   c1 e0 02                shl    $0x2,%eax
 8048654:   01 d0                   add    %edx,%eax
 8048656:   01 c0                   add    %eax,%eax
 8048658:   89 ca                   mov    %ecx,%edx
 804865a:   29 c2                   sub    %eax,%edx
 804865c:   89 d0                   mov    %edx,%eax
 804865e:   89 44 24 18             mov    %eax,0x18(%esp)
 8048662:   8b 54 24 18             mov    0x18(%esp),%edx
 8048666:   89 d0                   mov    %edx,%eax
 8048668:   c1 e0 02                shl    $0x2,%eax
 804866b:   01 d0                   add    %edx,%eax
 804866d:   01 c0                   add    %eax,%eax
 804866f:   8d 90 60 a0 04 08       lea    0x804a060(%eax),%edx
 8048675:   b8 c0 87 04 08          mov    $0x80487c0,%eax
 804867a:   89 54 24 04             mov    %edx,0x4(%esp)
 804867e:   89 04 24                mov    %eax,(%esp)
 8048681:   e8 7a fd ff ff          call   8048400 <printf@plt>
 8048686:   b8 da 87 04 08          mov    $0x80487da,%eax
 804868b:   8d 54 24 22             lea    0x22(%esp),%edx
 804868f:   89 54 24 04             mov    %edx,0x4(%esp)
 8048693:   89 04 24                mov    %eax,(%esp)
 8048696:   e8 e5 fd ff ff          call   8048480 <__isoc99_scanf@plt>
 804869b:   8d 44 24 22             lea    0x22(%esp),%eax
 804869f:   89 44 24 04             mov    %eax,0x4(%esp)
 80486a3:   8b 44 24 18             mov    0x18(%esp),%eax
 80486a7:   89 04 24                mov    %eax,(%esp)
 80486aa:   e8 95 fe ff ff          call   8048544 <compare_password>
 80486af:   89 44 24 1c             mov    %eax,0x1c(%esp)
 80486b3:   83 7c 24 1c 01          cmpl   $0x1,0x1c(%esp)
 80486b8:   75 0e                   jne    80486c8 <main+0xd5>
 80486ba:   c7 04 24 dd 87 04 08    movl   $0x80487dd,(%esp)
 80486c1:   e8 6a fd ff ff          call   8048430 <puts@plt>
 80486c6:   eb 0c                   jmp    80486d4 <main+0xe1>
 80486c8:   c7 04 24 f2 87 04 08    movl   $0x80487f2,(%esp)
 80486cf:   e8 5c fd ff ff          call   8048430 <puts@plt>
 80486d4:   8b 54 24 2c             mov    0x2c(%esp),%edx
 80486d8:   65 33 15 14 00 00 00    xor    %gs:0x14,%edx
 80486df:   74 05                   je     80486e6 <main+0xf3>
 80486e1:   e8 3a fd ff ff          call   8048420 <__stack_chk_fail@plt>
 80486e6:   c9                      leave  
 80486e7:   c3                      ret    
 80486e8:   90                      nop
 80486e9:   90                      nop
 80486ea:   90                      nop
 80486eb:   90                      nop
 80486ec:   90                      nop
 80486ed:   90                      nop
 80486ee:   90                      nop
 80486ef:   90                      nop 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T03:42:18.677

好的，从头开始学习汇编代码需要一些时间和精力，但是掌握基础知识并没有什么坏处。

此输出的每一行包含三个部分：

1.  该段代码所在的文件中的偏移量（十六进制）
2.  组成那段代码的字节（每个都是十六进制）
3.  该代码的汇编语言形式（基本上从字节反向翻译）。

您通常可以通过最后一列阅读程序的流程。JMP 之类的指令将引用其他位置，这些位置可能在代码附近，也可能不在附近。它们可以以标记的形式呈现，例如：

```
jmp    804858d <compare_password+0x49> 
```

也就是说，跳转到 offset `0x804858d`，这样您就可以在第一列中找到该值。标签上说这是`0x49`在`compare_password`.

如果您不知道大多数指令的作用，那么它们主要是移动、组合和比较内存和寄存器中的各个单词。即使您了解了每个代码的作用，也很难理解它在这个特定程序的上下文中的作用。而且你一般需要知道程序运行时其他重要数据的位置，才能知道效果如何。

在调试、汇编语言和反汇编级别学习计算机编程的资源有很多，但我会留给其他人参考。如果你真的想学，一个好办法是用C写你自己的简单程序，然后编译成汇编。然后并排比较 C 和汇编输出，找出 C 语句是如何被翻译成指令的。

# java - 通过使用 JSoup 抓取 html 来构建字符串

> ID：13337986
> 
> 赞同：4
> 
> 时间：2012-11-12T03:24:22.933
> 
> 标签：java, jsoup

我是一名 Java 程序员新手，现在刚刚开始涉足库、API 等领域。我现在有一个相对简单的想法，当我不做作业时，它可以成为我的宠物项目。

我有兴趣从几个不同的站点抓取 html，并构建看起来像“Artist - “Track Name””的字符串。我有一个站点以我想要的方式工作，但我觉得它可以更顺利地完成......这是我为站点 A 所做的工作的概要：

我让 JSoup 为类 plrow 的所有内容创建元素，如下所示：

```
<p class="plrow"><b><a href="playlist.php?station=foo">Artist</a></b> “Title” (<span class="sn_ld"><a href="playlist.php?station=foo">Label</a></span>) <SMALL><b>N </b></SMALL></p></td></tr><tr class="ev"><td><a name="98069"></a><p class="pltime">Time</p> 
```

从那里，我创建了一个字符串数组，这些行在 last 之后被拆分`</p>`，然后使用以下代码来处理该数组：

```
for (int i = 0; i < tracks.length; i++){
            tracks[i] = Jsoup.parse(tracks[i]).text();
            tracks[i] = tracks[i].split("”")[0];
            tracks[i] = tracks[i].toString()+ "”";          
        } 
```

这是获得我想要的方式的一种非常hackish的方式`Artist "Title"`，但结果对我来说很好。

站点 B 有点不同。

我已经确定艺术家和标题都是这样包含的： `<span class="artist" property="foaf:name">Artist Name</span> </a> </span> <span class="title" property="dc:title">Title</span>`

连同更多信息，全部在`<li id="segmentevent-random" class="segment track" typeof="po:MusicSegment" about="/url"> song info </li>`

我试图先检查所有艺术家，然后是标题，然后将两者合并，但我遇到了麻烦，因为用于显示曲目标题的“dc：title”属性用于其他非音乐的东西，所以我不能直接将艺术家与曲目匹配。

这个周末我花了大部分时间试图通过查看无数用 Jsoup 标记的问题来解决这个问题，并花费大量时间阅读 Jsoup 食谱和 API 指南。我有一种感觉，我的部分问题也可能源于我对网页如何编码的知识相对有限，尽管这可能主要是我对如何将这些代码插入 Jsoup 的理解的问题。

我感谢任何帮助或指导，我不得不说，在这里问一个非家庭作业问题真的很好（尽管我从其他人的问题中找到了很多提示！;)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T17:42:50.263

## 常见的：

如果您有一些不同的网站要在其中解析内容，那么在它们之间进行区分是个好主意。也许您可以决定是通过 URL 解析页面 A 还是页面 B。

**例子：**

```
if( urlToPage.contains("pagea.com") )
{
    // Call parsemethod for Page A or create parserclass
}
else if( urlToPage.contains("pageb.com") )
{
    // Call parsemethod for Page B or create parserclass
}
// ... 
else
{
    // Eg. throw Exception because there's no parser available
} 
```

您可以使用一行代码将每个页面连接并解析为一个文档：

```
// Note: the protocol (http) is required here
Document doc = Jsoup.connect("http://pagewhaterver.com").get(); 
```

在不知道 Html 或每个页面的结构的情况下，这里有一些基本的方法：

## 页面 A：

```
for( Element element : doc.select("p.plrow") )
{
    String title = element.ownText();                           // Title - output: '“Title” ()' (you have to replace the " and () here)
    String artist = element.select("a").first().text();         // Artist
    String label = element.select("span.sn_ld").first().text(); // Label

    // etc.
} 
```

## B页：

与 Page B 类似，Artitst 和 Title 可以这样选择：

```
String artist = doc.select("span.artist").first().text();
String title = doc.select("span.title").first().text(); 
```

这是 Jsoup 选择器 API 的一个很好的概述：http: [//jsoup.org/cookbook/extracting-data/selector-syntax](http://jsoup.org/cookbook/extracting-data/selector-syntax)

# xcode - 长按时如何删除文本字段。？

> ID：13337990
> 
> 赞同：1
> 
> 时间：2012-11-12T03:24:41.887
> 
> 标签：xcode, xcode4.3

我已经有这个问题好几个星期了。因为我的应用需要一个函数来创建 UITextfield、撤消和删除 UITextfield。当您点击它时，我的代码会在视图上的任何位置创建文本字段。它还可以撤消按下按钮撤消时创建的最后一个文本字段，它也可以移动，缩放，旋转，但是在我创建另一个新文本字段后，旧文本字段已附加到视图中。这就是为什么当我长按旧文本字段时，它可以被删除，只有创建的新文本才能被删除。我该怎么做才能删除那个旧的文本字段？这里是我的代码。

```
ViewController.h

#import <UIKit/UIKit.h>
#import <QuartzCore/QuartzCore.h>

@interface ViewController : UIViewController<UITextFieldDelegate, UIGestureRecognizerDelegate>
{

    NSMutableArray *textfieldform;//array for textfield
    UITextField *textField1;//a textfield
    CGPoint prevPanPoint;// float for moving the textfield anywhere
    float prevPinchScale;// float for pinching the textfield
    float prevRotation;// float for rotating the textfield
}

@property (nonatomic, retain) NSMutableArray *textfieldform;//array for creating multiple textfield

-(IBAction) undo;
- (IBAction)handleTap2:(UITapGestureRecognizer *)recognizer;
-(IBAction)panGestureAction:(UIPanGestureRecognizer *)pan;
- (IBAction)scaleImage:(UIPinchGestureRecognizer *)recognizer;
- (IBAction)rotateImage:(UIRotationGestureRecognizer *)recognizer;
@end

ViewController.m

#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

@synthesize textfieldform;
- (void)viewDidLoad{
    [super viewDidLoad];
    //textfieldform = [[NSMutableArray alloc] init];
  // Do any additional setup after loading the view, typically from a nib.
    textfieldform = [NSMutableArray arrayWithCapacity:0];//array of the textfield
}
//connected to the self.view
-(IBAction) longPressGesture:(UIGestureRecognizer*)gesture{
    [textfieldform removeObject:textField1];
    [textField1 removeFromSuperview];
    NSLog(@"baaaaaaam!");
}
//make the textfield move to any direction in the self.view
-(IBAction)panGestureAction:(UIPanGestureRecognizer *)pan {
    CGPoint translation = [pan translationInView:self.view];
    textField1.transform = CGAffineTransformTranslate(textField1.transform, translation.x, translation.y);
    [pan setTranslation:CGPointZero inView:self.view]; 
}

//to make the use of gesture simultaneously within the view
-(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer{
    return YES;
}
//to make the use of gesture simultaneously
-(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch{
    if([touch.view isKindOfClass:[UIControl class]]) {
        return YES;
    }
    return NO;
}
//to pinch the textfield using 2 fingers.
- (IBAction)scaleImage:(UIPinchGestureRecognizer *)recognizer{

    textField1.transform = CGAffineTransformScale(textField1.transform, recognizer.scale, recognizer.scale);
    recognizer.scale = 1;
}
//to rotate the textfield using 2 fingers
- (IBAction)rotateImage:(UIRotationGestureRecognizer *)recognizer{
    textField1.transform = CGAffineTransformRotate(textField1.transform, recognizer.rotation);
    recognizer.rotation = 0;
}
//to remove the last textfield that was been created
-(IBAction)undo{
    UITextField *textFieldToRemove = [textfieldform lastObject];
    if (textFieldToRemove) {
        [textfieldform removeObject:textFieldToRemove];
        [textFieldToRemove removeFromSuperview];
    }

}
// for the editing of the textfield 
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField{ 

    NSLog(@"textFieldShouldBeginEditing");
    return YES;
}
- (void)textFieldDidBeginEditing:(UITextField *)textField{           

    NSLog(@"textFieldDidBeginEditing");
    [textField1  setBackgroundColor:[UIColor colorWithRed:(248/255.0) green:(248/255.0) blue:(255/255.0) alpha:1.0]];
    textField1.borderStyle = UITextBorderStyleRoundedRect;
}
- (BOOL)textFieldShouldEndEditing:(UITextField *)textField{

    NSLog(@"textFieldShouldEndEditing");
    textField.backgroundColor = [UIColor clearColor];
    return YES;
}
- (void)textFieldDidEndEditing:(UITextField *)textField{

    NSLog(@"textFieldDidEndEditing");
    [textField1  setBackgroundColor:[UIColor clearColor]];
    textField1.borderStyle = UITextBorderStyleNone;
}
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string{

    NSLog(@"textField:shouldChangeCharactersInRange:replacementString:");

    if ([string isEqualToString:@"#"]) {
        return NO;
    }
    else {
        return YES;
    }

}
- (BOOL)textFieldShouldClear:(UITextField *)textField{

    NSLog(@"textFieldShouldClear:");
    return YES;
}
- (BOOL)textFieldShouldReturn:(UITextField *)textField{
    NSLog(@"textFieldShouldReturn:");
    if (textField.tag == textfieldform.count) {
        textField1 = (UITextField *)[self.view viewWithTag:textfieldform.count];
        [textField1 becomeFirstResponder];
    }
    else {
        [textField resignFirstResponder];
    }
    return YES;
}
//when tap the user can create a textfield on any direction, it create many different textfield. according to how many tap you do on the view
- (IBAction)handleTap2:(UITapGestureRecognizer *)recognizer{
    if (recognizer.state == UIGestureRecognizerStateEnded){
        CGPoint point = [recognizer locationInView:[self view]];
        textField1 = [[UITextField alloc] init];
        textField1.borderStyle = UITextBorderStyleLine;
        [textField1 setAdjustsFontSizeToFitWidth:YES];
        [textField1 setText:@"TextField"];
        CGRect frame ;    
        frame.origin.x = point.x;
        frame.origin.y = point.y; 
        frame.size.width=200;
        frame.size.height=40;
        textField1.frame=frame;
        textField1.autocorrectionType = UITextAutocorrectionTypeNo;
        textField1.keyboardType = UIKeyboardTypeDefault;
        textField1.returnKeyType = UIReturnKeyDefault;
        textField1.clearButtonMode = UITextFieldViewModeWhileEditing;
        textField1.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;    
        textField1.delegate = self;
        textField1.tag = textfieldform.count;
        [textfieldform addObject:textField1];
        [self.view addSubview:textField1];
        [textField1 setAdjustsFontSizeToFitWidth:YES];
    }

}

- (void)viewDidUnload{
    [super viewDidUnload];
}
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T00:40:48.280

您使用错误的方法`DoAction`作为选择器，而不是使用**`LongPressgesture`**方法

更新您的代码，如下所示：

```
- (void)viewDidLoad{
    [super viewDidLoad];

    textfieldform = [[NSMutableArray alloc] init];
    textField1  = ... // Initialize textfield

    UILongPressGestureRecognizer *holdRecognizer = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(LongPressgesture:)];
    [holdRecognizer setMinimumPressDuration:2];
    [holdRecognizer setDelegate:self];
    [textField1 addGestureRecognizer:holdRecognizer];
}

- (void)LongPressgesture:(UILongPressGestureRecognizer *)recognizer
{
    if (recognizer.state == UIGestureRecognizerStateEnded) {
        //[textfieldform removeObject: recognizer.view];
        [recognizer.view removeFromSuperview];

        NSLog(@"Long press Ended .................");
    }
    else {
        NSLog(@"Long press detected .....................");
    }        
} 
```

# php - 在带有撇号的 PHP 查询中搜索词

> ID：13337991
> 
> 赞同：3
> 
> 时间：2012-11-12T03:24:46.457
> 
> 标签：php, html, mysql

我一直在浏览一堆主题，但还没有找到任何有用的东西——或者它可能确实有效，但我对 PHP/MySQL 还是很陌生，所以也许我只是错过了一些东西。

我有一个页面，允许用户输入项目的名称以在（MySQL）数据库中查找它。然后它会生成一个结果表并显示这些结果，并将一些数据转换为链接。然后将链接的术语用作查询以搜索数据库的其他字段。

一切正常……除非其中一个搜索词包含撇号。显然我想防止注入问题，但我也需要用撇号进行搜索。这是我的代码：

```
$query = mysql_real_escape_string($query);
$query = htmlspecialchars($query);
$queryentered = $query;
$query = strtolower($query); 
```

这是它传递给查询的 URL：

```
echo " from <a href='index.php?volume=".$results2['book']."' class='where'>"
.$results2['book']."</a>"; 
```

和查询：

```
$raw_results = mysql_query("SELECT * FROM $database1 WHERE $wh LIKE '%$query%'
ORDER BY displayname") or die(mysql_error()); 
```

我编码不正确是什么？当我运行搜索时，它显示“未找到 [搜索词] 的结果”，其中我得到了任何撇号的 \'。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T03:33:35.860

此代码段的顺序完全错误：

```
$query = mysql_real_escape_string($query);
$query = htmlspecialchars($query);
$queryentered = $query;
$query = strtolower($query); 
```

转义应该最后完成，就在数据库查询字符串连接之前。在这种情况下，它无关紧要，因为 strtolower 不会撤消转义。更严重的其实是 HTML 转义，它不属于 SQL 上下文。不要覆盖您的主要变量，而是：

```
$queryentered = htmlspecialchars($query);
$query = strtolower($query);
$query = mysql_real_escape_string($query); 
```

顺便说一句，繁琐的数据库转义很容易避免。查看[PDO 和准备好的语句](http://www.google.com/search?q=PDO%20and%20prepared%20statements)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T03:34:25.130

问题出在这一行：

```
$query = htmlspecialchars($query); 
```

如果你搜索`Death's book` 你的最终 `$query` 将是`death\&#039;s book`！通过删除`htmlspecialchars`您的查询会很好！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T03:30:24.700

我强烈建议使用准备好的语句和 PDO 库。

*   真的很容易学
*   将使您的问题更容易解决
*   适用于（大多数）任何数据库
*   防止您提到的注入问题有很长的路要走
*   技能组合将适用于您可能学习的其他语言

您所要做的就是编写查询，然后准备一个连接字符串（包含数据库类型和详细信息），然后启动查询。一组参数随查询一起发送，以解耦数据。

有用的网址：

[http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)

[http://id1.php.net/pdo](http://id1.php.net/pdo)

# sql - MS Access：使用 SQL 仅显示最大和最小行

> ID：13337998
> 
> 赞同：0
> 
> 时间：2012-11-12T03:25:56.490
> 
> 标签：sql, ms-access, max, min

我又遇到了 sql 的小问题 :) 在这个例子中，我必须在一行中显示最大 ekpreis，在第二行中显示最小 ekpreis。但还有所有其他数据。我尝试了 select max(ekpreis) 但没有奏效。

![在此处输入图像描述](../Images/d6ac18277c3c30c3cc92cf4704b7be4d.png)

我试过这个：

从 artbez 的 artst 组中选择 ARTBEZ，max(ekpreis)；

但这只是返回所有行，而不仅仅是最大行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T03:28:09.930

您的问题含糊不清，您使用的是 GROUP BY 吗？

如果是这样，那么你只需做这样的事情

```
SELECT MAX(EKPREIS) as MaxVal, MIN(EKPREIS) as MinVal 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T04:06:48.150

选择 EKPREIS 最高的记录

```
SELECT TOP 1 * FROM artst ORDER BY EKPREIS DESC 
```

选择 EK 最低的记录

```
SELECT TOP 1 * FROM artst ORDER BY EKPREIS ASC 
```

要将它们放在一起，请使用 UNION select

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T06:22:37.917

您必须尝试使用​​以下查询

SELECT * FROM artst 其中 EKPREIS = (SELECT MAX(EKPREIS) FROM artst) 或 EKPREIS = (SELECT MIN(EKPREIS) FROM artst)

它只检索 EKPREIS 最大值和 EKPREIS 最小值的两行

# ios - 非 cocos2d 项目的sneakyjoystick 替代品？

> ID：13337999
> 
> 赞同：1
> 
> 时间：2012-11-12T03:26:18.520
> 
> 标签：ios, joystick

我正在做一个需要一个好的虚拟操纵杆但不能是 Cocos2d 的项目。偷偷摸摸的操纵杆似乎是最受欢迎的，但与 Cocos2d 交织在一起。有没有好的虚拟摇杆项目`UIKit`？我真的很想避免将sneakyjoystick '移植'为非Cocos2d 特定的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T11:39:02.523

在遇到和你一样的问题后，我今天写了这门课： [CPJoystick](https://github.com/Wense/CPJoystick)

随意添加您自己的功能！