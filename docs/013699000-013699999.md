# StackOverflow 问答 13699000-13699999

# java - 找不到符号动作侦听器

> ID：13699003
> 
> 赞同：4
> 
> 时间：2012-12-04T08:47:34.860
> 
> 标签：java, swing, import, actionlistener, jfilechooser

我正在使用 JFileChooser 进行浏览文件类。编译时遇到问题。它一直告诉我找不到符号动作侦听器。下面是我的代码：

```
import java.util.*;
import java.io.*;
import javax.swing.*;
import java.awt.*;
import java.text.*;
import javax.swing.filechooser.*;

public class BrowseForFile 
{
private JTextField txtFileName;
private JFrame layout;

public BrowseForFile()
{
    super();
    initialize();
}

    public void initialize() 
    {
        //empty layout
        layout = new JFrame();
        layout.setTitle("Task Synchronization ");
        layout.setBounds(100, 100, 800, 600);
        layout.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        layout.getContentPane().setLayout(null);

        //set the copyright
        JLabel lblNewLabel_5 = new JLabel("(c) 2012 All Rights Reserved");
        lblNewLabel_5.setForeground(Color.GRAY);
        lblNewLabel_5.setFont(new Font("Tahoma", Font.PLAIN, 10));
        lblNewLabel_5.setHorizontalAlignment(SwingConstants.RIGHT);
        lblNewLabel_5.setBounds(527, 548, 255, 14);
        layout.getContentPane().add(lblNewLabel_5);

        //set the label
        JLabel lblSendAFile = new JLabel("Select a file to be sent to all nodes");
        lblSendAFile.setBounds(404, 400, 378, 14);
        layout.getContentPane().add(lblSendAFile);

        //set the textfield
        txtFileName = new JTextField();
        txtFileName.setBounds(404, 425, 277, 20);
        layout.getContentPane().add(txtFileName);
        txtFileName.setColumns(10);

        //set the browse button and let it to choose file after click.
        JButton btnBrowse = new JButton("Browse");
        btnBrowse.setBounds(691, 424, 91, 23);
        layout.getContentPane().add(btnBrowse);

        btnBrowse.addActionListener(new ActionListener()
        {
            public void actionPerformed(ActionEvent e)
            {
                JFileChooser chooser = new JFileChooser();
                chooser.setCurrentDirectory(new File(dirName));
                chooser.setFileSelectionMode(JFileChooser.FILES_ONLY);

                FileNameExtensionFilter filter = new FileNameExtensionFilter(".txt only", "txt");
                chooser.setFileFilter(filter);

                try {
                int code = chooser.showOpenDialog(null);
                if (code == JFileChooser.APPROVE_OPTION) {
                File selectedFile = chooser.getSelectedFile();
                Scanner input = new Scanner(selectedFile); 
                String f=selectedFile.getName();
                txtFileName.setText("File Name is: "+f);

                }

                } catch (Exception f) {
                f.printStackTrace();
                }
            }
        });
    }

    public static void main(String[] args)
    {
        try 
        {
            BrowseForFile window = new BrowseForFile();
            window.layout.setVisible(true);
        } 
        catch (Exception e) 
        {
            e.printStackTrace();
        }
    }

} 
```

这是错误：

```
BrowseForFile.java:52: error: cannot find symbol
                    btnBrowse.addActionListener(new ActionListener()
                                                    ^
symbol:   class ActionListener
location: class BrowseForFile
1 error 
```

谁能告诉我错误是什么？提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-04T08:49:14.840

```
import java.awt.event.ActionListener; // seems to be missing. 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-04T08:53:22.690

您必须导入以下类。

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T12:33:19.120

由于您的问题已经得到解答，我想提出一个建议。

使用 Eclipse 或 Netbeans 之类的 IDE。他们负责导入、格式化、检查异常等，让您的生活更轻松。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T10:28:50.613

import java.awt.* 表示从此包中导入所有类，但不从子包中导入。对于每个子包，您必须放置单独的导入语句。例如导入 java.awt.event、导入 java.awt.datatransfer.* 等。

# javascript - 将 JavaScript 显示为文件中的可编辑代码

> ID：13699004
> 
> 赞同：0
> 
> 时间：2012-12-04T08:47:33.873
> 
> 标签：javascript, php, ckeditor, file-get-contents

我正在努力使用 CKEditor 使网站的 html 文件可编辑。我希望用户应该能够通过管理面板编辑任何 html 文件的代码。为此，我正在使用 file_get_contents 函数，该函数似乎工作正常，但 JavaScript 代码未在编辑器中显示为可编辑代码。我也尝试了 fread 函数，它还在编辑器中显示文件的所有内容，但我仍然无法将编辑器中的 JavaScript 代码作为可编辑代码。有什么帮助吗？

这是代码：

```
$contents = file_get_contents($_REQUEST['path']);
if(!$contents) die("Page not found");      
    $oFCKeditor = new FCKeditor('content') ;
    $oFCKeditor->BasePath = 'fckeditor/' ;
    $oFCKeditor->Width = '100%' ;
    $oFCKeditor->Height = '350' ; 
    if($mode == 'edit')$oFCKeditor->Value = stripslashes($contents);
    $oFCKeditor->Create() ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T09:09:39.260

CKEditor（前身为 FCKeditor）是一个所见即所得（What-You-See-Is-What-You-Get）的编辑器。所见即所得编辑器获取所有 html、css 和 javascript，执行/解析它并尝试显示输出。所以这就是 Javascript 代码没有显示在编辑器中的原因，因为编辑器是为解析 javascript 并显示其输出而构建的；而不是实际的代码。

现在，如果你想直接使用代码，而不是它的输出。有两种选择：

1.  使用“**查看源代码”**按钮，您应该能够看到所有 javascript 以及其他代码。不会有任何语法突出显示，但我这对于小型编辑来说效果很好
2.  使用源代码编辑器：如果您想要正确的语法突出显示，您必须切换到源代码编辑器而不是所见即所得（What-You-See-Is-What-You-Get）编辑器。一些源代码编辑器的示例
    *   [http://code.google.com/p/pagedown/](http://code.google.com/p/pagedown/)它与您在 stackoverflow 上看到的编辑器相同

# php - php标头工作但有错误

> ID：13699006
> 
> 赞同：1
> 
> 时间：2012-12-04T08:47:45.520
> 
> 标签：php, html, ajax, header, smarty

实际上，我在使用 ajax 按钮登录后尝试重定向到索引，但发生的事情很奇怪，标题并没有将我带到 index.php ！我只是在我的 login.php 页面中获得 index.php 的 HTML 代码！我正在使用 Smarty 将 html 与 php 代码分开，但我不知道如何解决这个问题！点击登录，获取登录页面索引的HTML！为什么 ？

在 login.php 页面中

```
 if ($_POST['action'] == 'login') {
      $_SESSION['username'] = $username;
      header("Location: index.php");
            exit();
} 
```

ajax函数：

```
function ajax3(Div_Submit,Div_Response,SuccessScript,Data_Submit) 
{
    var Type = 1;

     var Aj_type = "POST";
        var post_data = '';
        if(!Data_Submit) 
            post_data = $('#'+Div_Submit+' *').serialize();
        else
            post_data = Data_Submit;
        $.ajax({
            type: Aj_type,
            url: document.URL,
            data: post_data,
        dataType: "text",
        beforeSend: function(xhr)
        {
           $.blockUI({ message: '<img src="images/loading.gif" />',
        css: {  border: 'none',  backgroundColor: 'transparent' } });
           xhr.setRequestHeader("Ajax-Request", "true");
        },
        success: function(response) {
            $('#'+Div_Response).html(response+'<script>'+SuccessScript+'</script>');
        },
        complete: function(){
        $.unblockUI();
        }
    });
    return false;
} 
```

html按钮调用：

```
 <div class="buttons" >
                <a class="positive" onclick="$('#login_action').val('login');ajax3('login_form','login_form','','')">
                    <img src="images/checkbox_checked.png" alt=""/>
                  <font size="3px">  login </font>
                </a>
            </div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T08:52:22.260

使用 AJAX，这是预期的输出。发生的情况是**AJAX 请求**本身被重定向到 index.php，然后将其输出并返回到该请求。

如果您想从 AJAX 重定向到 index.php，您需要使用特定代码或 JSON 编码值退出并在 AJAX 结果本身中捕获它。

例子：

```
if ($_POST['action'] == 'login') {
      $_SESSION['username'] = $username;
      echo json_encode(array('redirect' => 'index.php'));
      exit;
} 
```

JavaScript：

```
$.ajax(
    url: 'your-url',
    success: function(data) {
        if (data.redirect) {
            document.location.href = data.redirect;
        }
    }
); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T08:53:02.963

这不会像你预期的那样工作。

它应该是这样的。

```
if ($_POST['action'] == 'login') {
      $_SESSION['username'] = $username;
     echo "success";
} 
```

在您的 javascript/jquery 文件上。有这样的东西

```
jQuery.ajax({
 url: "login.php",
 success:function(data){
   if(data == "success") window.location = "index.php";
}
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T08:53:02.450

只要登录凭据合适，您就可以获得成功响应，此时使用 javascript 或 jquery 更改窗口位置..

# html - 将 CSS 与 HTML 和 Google+ UI 按钮一起使用

> ID：13699007
> 
> 赞同：0
> 
> 时间：2012-12-04T08:47:46.243
> 
> 标签：html, css, user-interface, input, google-plus

我在表单上有一个输入按钮，但我不知道如何在其上实现 Google CSS 我已经完成了一个按钮，但是你如何在输入上做到这一点

HTML 示例：

```
<input type='submit' name='update' value='Update' /> 
```

Google+ 用户界面示例：

```
<button class="action blue"><span class="label">Login</span></button> 
```

谷歌 CSS3-buttons.css

```
/*------------------------------------*\
    CONTENTS
\*------------------------------------*/
/*
WRAPPER
BUTTON
BUTTON LABEL
BUTTON ICON
ICONS
DROPDOWN MENU
*/

/*------------------------------------*\
    $WRAPPER
\*------------------------------------*/
.buttons {/* Style as you wish (toolbar) */}

/* The Magnificent CLEARFIX */
.buttons:before, .buttons:after {
  content: "\0020"; display: block; height: 0; visibility: hidden;  
} 
.buttons:after { clear: both; }
.buttons { zoom: 1; }
/* ------------------------ */

/*------------------------------------*\
    $BUTTON
\*------------------------------------*/
button, 
.button {
    text-decoration: none;
    text-shadow: 0 1px 0 #fff;

    font: bold 11px Helvetica, Arial, sans-serif;
    color: #444;
    line-height: 17px;
    height: 18px;

    display: inline-block;
    float: left;

    margin: 5px;
    padding: 5px 6px 4px 6px;

    background: #F3F3F3;
    border: solid 1px #D9D9D9;

    border-radius: 2px;
    -webkit-border-radius: 2px;
    -moz-border-radius: 2px;

    -webkit-transition: border-color .20s;
    -moz-transition: border-color .20s;
    -o-transition: border-color .20s;
    transition: border-color .20s;
}
button {
    height: 29px !important;
    cursor: pointer;
}

button.left, 
.button.left {
    margin: 5px 0 5px 5px;

    border-top-right-radius: 0;
    -webkit-border-top-right-radius: 0;
    -moz-border-radius-topright: 0;

    border-bottom-right-radius: 0;
    -webkit-border-bottom-right-radius: 0;
    -moz-border-radius-bottomright: 0;
}
button.middle, 
.button.middle {
    margin: 5px 0;

    border-left-color: #F4F4F4;

    border-radius: 0;
    -webkit-border-radius: 0;
    -moz-border-radius: 0;
}
button.right, 
.button.right {
    margin: 5px 5px 5px 0;

    border-left-color: #F4F4F4;

    border-top-left-radius: 0;
    -webkit-border-top-left-radius: 0;
    -moz-border-radius-topleft: 0;

    border-bottom-left-radius: 0;
    -webkit-border-bottom-left-radius: 0;
    -moz-border-radius-bottomleft: 0;
}

button:hover, 
.button:hover {
    background: #F4F4F4;
        border-color: #C0C0C0;
        color: #333;
}

button:active, 
.button:active {
    border-color: #4D90FE;
    color: #4D90FE;

    -moz-box-shadow:inset 0 0 10px #D4D4D4;
    -webkit-box-shadow:inset 0 0 10px #D4D4D4;
    box-shadow:inset 0 0 10px #D4D4D4;
}

button.on, 
.button.on {
    border-color: #BBB;

    -moz-box-shadow:inset 0 0 10px #D4D4D4;
    -webkit-box-shadow:inset 0 0 10px #D4D4D4;
    box-shadow:inset 0 0 10px #D4D4D4;
}
button.on:hover, 
.button.on:hover {
    border-color: #BBB;

    -moz-box-shadow:inset 0 0 10px #D4D4D4;
    -webkit-box-shadow:inset 0 0 10px #D4D4D4;
    box-shadow:inset 0 0 10px #D4D4D4;
}
button.on:active, 
.button.on:active {
    border-color: #4D90FE;
}

button.action, 
.button.action {
    border: 1px solid #D8D8D8 !important;

    background: #F2F2F2;
    background: -webkit-linear-gradient(top, #F5F5F5, #F1F1F1);
    background: -moz-linear-gradient(top, #F5F5F5, #F1F1F1);
    background: -ms-linear-gradient(top, #F5F5F5, #F1F1F1);
    background: -o-linear-gradient(top, #F5F5F5, #F1F1F1);

    -webkit-transition: border .20s;
    -moz-transition: border .20s;
    -o-transition: border .20s;
    transition: border .20s;
}
button.action:hover, 
.button.action:hover {
    border: 1px solid #C6C6C6 !important;

    background: #F3F3F3;
    background: -webkit-linear-gradient(top, #F8F8F8, #F1F1F1);
    background: -moz-linear-gradient(top, #F8F8F8, #F1F1F1);
    background: -ms-linear-gradient(top, #F8F8F8, #F1F1F1);
    background: -o-linear-gradient(top, #F8F8F8, #F1F1F1);
}
button.blue, 
.button.blue {
    border: 1px solid #3079ED !important;

    background: #4B8DF8;
    background: -webkit-linear-gradient(top, #4C8FFD, #4787ED);
    background: -moz-linear-gradient(top, #4C8FFD, #4787ED);
    background: -ms-linear-gradient(top, #4C8FFD, #4787ED);
    background: -o-linear-gradient(top, #4C8FFD, #4787ED);

    -webkit-transition: border .20s;
    -moz-transition: border .20s;
    -o-transition: border .20s;
    transition: border .20s;
}
button.blue:hover, 
.button.blue:hover {
    border: 1px solid #2F5BB7 !important;

    background: #3F83F1;
    background: -webkit-linear-gradient(top, #4D90FE, #357AE8);
    background: -moz-linear-gradient(top, #4D90FE, #357AE8);
    background: -ms-linear-gradient(top, #4D90FE, #357AE8);
    background: -o-linear-gradient(top, #4D90FE, #357AE8);
}
button.green, 
.button.green {
    border: 1px solid #29691D !important;

    background: #3A8E00;
    background: -webkit-linear-gradient(top, #3C9300, #398A00);
    background: -moz-linear-gradient(top, #3C9300, #398A00);
    background: -ms-linear-gradient(top, #3C9300, #398A00);
    background: -o-linear-gradient(top, #3C9300, #398A00);

    -webkit-transition: border .20s;
    -moz-transition: border .20s;
    -o-transition: border .20s;
    transition: border .20s;
}
button.green:hover, 
.button.green:hover {
    border: 1px solid #2D6200 !important;

    background: #3F83F1;
    background: -webkit-linear-gradient(top, #3C9300, #368200);
    background: -moz-linear-gradient(top, #3C9300, #368200);
    background: -ms-linear-gradient(top, #3C9300, #368200);
    background: -o-linear-gradient(top, #3C9300, #368200);
}
button.red, 
.button.red {
    border: 1px solid #D14836 !important;

    background: #D64937;
    background: -webkit-linear-gradient(top, #DC4A38, #D14836);
    background: -moz-linear-gradient(top, #DC4A38, #D14836);
    background: -ms-linear-gradient(top, #DC4A38, #D14836);
    background: -o-linear-gradient(top, #DC4A38, #D14836);

    -webkit-transition: border .20s;
    -moz-transition: border .20s;
    -o-transition: border .20s;
    transition: border .20s;
}
button.red:hover, 
.button.red:hover {
    border: 1px solid #B0281A !important;

    background: #D14130;
    background: -webkit-linear-gradient(top, #DC4A38, #C53727);
    background: -moz-linear-gradient(top, #DC4A38, #C53727);
    background: -ms-linear-gradient(top, #DC4A38, #C53727);
    background: -o-linear-gradient(top, #DC4A38, #C53727);
}

button.action:hover, 
.button.action:hover {
    -moz-box-shadow: 0 1px 0px #DDD;
    -webkit-box-shadow: 0 1px 0px #DDD;
    box-shadow:iset 0 1px 0px #DDD;
}
button.action:active, 
.button.action:active {
    -moz-box-shadow: none !important;
    -webkit-box-shadow: none !important;
    box-shadow: none !important;
    border-color: #C6C6C6 !important;
}
button.blue:active, 
.button.blue:active {
    border-color: #2F5BB7 !important;
}
button.green:active, 
.button.green:active {
    border-color: #2D6200 !important;
}
button.red:active, 
.button.red:active {
    border-color: #B0281A !important;
}

/*------------------------------------*\
    $BUTTON LABEL
\*------------------------------------*/
.ddm span.label, 
button span.label, 
.button span.label {
    display: inline-block;
    float: left;
    line-height: 17px;
    height: 18px;
    padding: 0 1px;
    overflow: hidden;
    color: #444;

    -webkit-transition: color .20s;
    -moz-transition: color .20s;
    -o-transition: color .20s;
    transition: color .20s;
} 
button span.label {
    line-height: 15px !important;
}
.ddm:active span.label, 
button:active span.label, 
.button:active span.label {
    color: #4D90FE;
}

button:hover .label, 
.button:hover .label {
    color: #333;
}
button:hover .label.red, 
.button:hover .label.red {
    color: #DB4A37;
}
button:hover .label.blue, 
.button:hover .label.blue {
    color: #7090C8;
}
button:hover .label.green, 
.button:hover .label.green {
    color: #42B449;
}
button:hover .label.yellow, 
.button:hover .label.yellow {
    color: #F7CB38;
}

button.blue .label, 
.button.blue .label {
    color: #FFF !important;
    text-shadow: 0 1px 0 #2F5BB7 !important;
}
button.green .label, 
.button.green .label {
    color: #FFF !important;
    text-shadow: 0 1px 0 #2D6200 !important;
}
button.red .label, 
.button.red .label {
    color: #FFF !important;
    text-shadow: 0 1px 0 #B0281A !important;
}
button.action .label, 
.button.action .label {
    padding: 0 17px !important;
}

button.action:active .label, 
.button.action:active .label {
    color: #333 !important;
}

button.blue:active .label, 
button.green:active .label, 
button.red:active .label, 
.button.blue:active .label, 
.button.green:active .label, 
.button.red:active .label {
    color: #FFF !important;
}

/*------------------------------------*\
    $BUTTON ICON
\*------------------------------------*/
.ddm span.icon, 
button span.icon, 
.button span.icon {
    background-image: url(../images/google+-ui-sprite-gray.png);

    display: inline-block;
    margin: 0 7px;
    float: left;

    line-height: 18px;
    height: 18px;
    width: 18px;
    max-width: 18px;

    overflow: hidden;
    text-indent: -9999px;

    background-repeat: no-repeat;

    -webkit-transition: background-image 0.20s linear;
    -moz-transition: background-image 0.20s linear;
    -o-transition: background-image 0.20s linear;
    transition: background-image 0.20s linear;
}
.ddm:hover span.icon, 
button:hover span.icon, 
.button:hover span.icon {
    background-image: url(../images/google+-ui-sprite-colour.png);
}

/*------------------------------------*\
    $ICONS
\*------------------------------------*/

/* Sprite Row 1 */
span.icon1 {background-position: -0px -0px;}
span.icon2 {background-position: -18px -0px;}
span.icon3 {background-position: -36px -0px;}
span.icon4 {background-position: -54px -0px;}
span.icon5 {background-position: -72px -0px;}
span.icon6 {background-position: -90px -0px;}
span.icon7 {background-position: -108px -0px;}
span.icon8 {background-position: -126px -0px;}
span.icon9 {background-position: -144px -0px;}
span.icon10 {background-position: -162px -0px;}
span.icon11 {background-position: -180px -0px;}
span.icon12 {background-position: -198px -0px;}
span.icon13 {background-position: -216px -0px;}
span.icon14 {background-position: -234px -0px;}
span.icon15 {background-position: -252px -0px;}
span.icon16 {background-position: -270px -0px;}
span.icon17 {background-position: -288px -0px;}
span.icon18 {background-position: -306px -0px;}
span.icon19 {background-position: -324px -0px;}
span.icon20 {background-position: -342px -0px;}

/* Sprite Row 2 */
span.icon21 {background-position: -0px -18px;}
span.icon22 {background-position: -18px -18px;}
span.icon23 {background-position: -36px -18px;}
span.icon24 {background-position: -54px -18px;}
span.icon25 {background-position: -72px -18px;}
span.icon26 {background-position: -90px -18px;}
span.icon27 {background-position: -108px -18px;}
span.icon28 {background-position: -126px -18px;}
span.icon29 {background-position: -144px -18px;}
span.icon30 {background-position: -162px -18px;}
span.icon31 {background-position: -180px -18px;}
span.icon32 {background-position: -198px -18px;}
span.icon33 {background-position: -216px -18px;}
span.icon34 {background-position: -234px -18px;}
span.icon35 {background-position: -252px -18px;}
span.icon36 {background-position: -270px -18px;}
span.icon37 {background-position: -288px -18px;}
span.icon38 {background-position: -306px -18px;}
span.icon39 {background-position: -324px -18px;}
span.icon40 {background-position: -342px -18px;}

/* Sprite Row 3 */
span.icon41 {background-position: -0px -36px;}
span.icon42 {background-position: -18px -36px;}
span.icon43 {background-position: -36px -36px;}
span.icon44 {background-position: -54px -36px;}
span.icon45 {background-position: -72px -36px;}
span.icon46 {background-position: -90px -36px;}
span.icon47 {background-position: -108px -36px;}
span.icon48 {background-position: -126px -36px;}
span.icon49 {background-position: -144px -36px;}
span.icon50 {background-position: -162px -36px;}
span.icon51 {background-position: -180px -36px;}
span.icon52 {background-position: -198px -36px;}
span.icon53 {background-position: -216px -36px;}
span.icon54 {background-position: -234px -36px;}
span.icon55 {background-position: -252px -36px;}
span.icon56 {background-position: -270px -36px;}
span.icon57 {background-position: -288px -36px;}
span.icon58 {background-position: -306px -36px;}
span.icon59 {background-position: -324px -36px;}
span.icon60 {background-position: -342px -36px;}

/* Sprite Row 4 */
span.icon61 {background-position: -0px -54px;}
span.icon62 {background-position: -18px -54px;}
span.icon63 {background-position: -36px -54px;}
span.icon64 {background-position: -54px -54px;}
span.icon65 {background-position: -72px -54px;}
span.icon66 {background-position: -90px -54px;}
span.icon67 {background-position: -108px -54px;}
span.icon68 {background-position: -126px -54px;}
span.icon69 {background-position: -144px -54px;}
span.icon70 {background-position: -162px -54px;}
span.icon71 {background-position: -180px -54px;}
span.icon72 {background-position: -198px -54px;}
span.icon73 {background-position: -216px -54px;}
span.icon74 {background-position: -234px -54px;}
span.icon75 {background-position: -252px -54px;}
span.icon76 {background-position: -270px -54px;}
span.icon77 {background-position: -288px -54px;}
span.icon78 {background-position: -306px -54px;}
span.icon79 {background-position: -324px -54px;}
span.icon80 {background-position: -342px -54px;}

/* Sprite Row 5 */
span.icon81 {background-position: -0px -72px;}
span.icon82 {background-position: -18px -72px;}
span.icon83 {background-position: -36px -72px;}
span.icon84 {background-position: -54px -72px;}
span.icon85 {background-position: -72px -72px;}
span.icon86 {background-position: -90px -72px;}
span.icon87 {background-position: -108px -72px;}
span.icon88 {background-position: -126px -72px;}
span.icon89 {background-position: -144px -72px;}
span.icon90 {background-position: -162px -72px;}
span.icon91 {background-position: -180px -72px;}
span.icon92 {background-position: -198px -72px;}
span.icon93 {background-position: -216px -72px;}
span.icon94 {background-position: -234px -72px;}
span.icon95 {background-position: -252px -72px;}
span.icon96 {background-position: -270px -72px;}
span.icon97 {background-position: -288px -72px;}
span.icon98 {background-position: -306px -72px;}
span.icon99 {background-position: -324px -72px;}
span.icon100 {background-position: -342px -72px;}

/* Sprite Row 6 */
span.icon101 {background-position: -0px -90px;}
span.icon102 {background-position: -18px -90px;}
span.icon103 {background-position: -36px -90px;}
span.icon104 {background-position: -54px -90px;}
span.icon105 {background-position: -72px -90px;}
span.icon106 {background-position: -90px -90px;}
span.icon107 {background-position: -108px -90px;}
span.icon108 {background-position: -126px -90px;}
span.icon109 {background-position: -144px -90px;}
span.icon110 {background-position: -162px -90px;}
span.icon111 {background-position: -180px -90px;}
span.icon112 {background-position: -198px -90px;}
span.icon113 {background-position: -216px -90px;}
span.icon114 {background-position: -234px -90px;}
span.icon115 {background-position: -252px -90px;}
span.icon116 {background-position: -270px -90px;}
span.icon117 {background-position: -288px -90px;}
span.icon118 {background-position: -306px -90px;}
span.icon119 {background-position: -324px -90px;}
span.icon120 {background-position: -342px -90px;}

/* Sprite Row 7 */
span.icon121 {background-position: -0px -108px;}
span.icon122 {background-position: -18px -108px;}
span.icon123 {background-position: -36px -108px;}
span.icon124 {background-position: -54px -108px;}
span.icon125 {background-position: -72px -108px;}
span.icon126 {background-position: -90px -108px;}
span.icon127 {background-position: -108px -108px;}
span.icon128 {background-position: -126px -108px;}
span.icon129 {background-position: -144px -108px;}
span.icon130 {background-position: -162px -108px;}
span.icon131 {background-position: -180px -108px;}
span.icon132 {background-position: -198px -108px;}
span.icon133 {background-position: -216px -108px;}
span.icon134 {background-position: -234px -108px;}
span.icon135 {background-position: -252px -108px;}
span.icon136 {background-position: -270px -108px;}
span.icon137 {background-position: -288px -108px;}
span.icon138 {background-position: -306px -108px;}
span.icon139 {background-position: -324px -108px;}
span.icon140 {background-position: -342px -108px;}

/* Sprite Row 8 */
span.icon141 {background-position: -0px -126px;}
span.icon142 {background-position: -18px -126px;}
span.icon143 {background-position: -36px -126px;}
span.icon144 {background-position: -54px -126px;}
span.icon145 {background-position: -72px -126px;}
span.icon146 {background-position: -90px -126px;}
span.icon147 {background-position: -108px -126px;}
span.icon148 {background-position: -126px -126px;}
span.icon149 {background-position: -144px -126px;}
span.icon150 {background-position: -162px -126px;}
span.icon151 {background-position: -180px -126px;}
span.icon152 {background-position: -198px -126px;}
span.icon153 {background-position: -216px -126px;}
span.icon154 {background-position: -234px -126px;}
span.icon155 {background-position: -252px -126px;}
span.icon156 {background-position: -270px -126px;}
span.icon157 {background-position: -288px -126px;}
span.icon158 {background-position: -306px -126px;}
span.icon159 {background-position: -324px -126px;}
span.icon160 {background-position: -342px -126px;}

/* Sprite Row 9 */
span.icon161 {background-position: -0px -144px;}
span.icon162 {background-position: -18px -144px;}
span.icon163 {background-position: -36px -144px;}
span.icon164 {background-position: -54px -144px;}
span.icon165 {background-position: -72px -144px;}
span.icon166 {background-position: -90px -144px;}
span.icon167 {background-position: -108px -144px;}
span.icon168 {background-position: -126px -144px;}
span.icon169 {background-position: -144px -144px;}
span.icon170 {background-position: -162px -144px;}
span.icon171 {background-position: -180px -144px;}
span.icon172 {background-position: -198px -144px;}
span.icon173 {background-position: -216px -144px;}
span.icon174 {background-position: -234px -144px;}
span.icon175 {background-position: -252px -144px;}
span.icon176 {background-position: -270px -144px;}
span.icon177 {background-position: -288px -144px;}
span.icon178 {background-position: -306px -144px;}
span.icon179 {background-position: -324px -144px;}
span.icon180 {background-position: -342px -144px;}

/* Sprite Row 10 */
span.icon181 {background-position: -0px -162px;}
span.icon182 {background-position: -18px -162px;}
span.icon183 {background-position: -36px -162px;}
span.icon184 {background-position: -54px -162px;}
span.icon185 {background-position: -72px -162px;}
span.icon186 {background-position: -90px -162px;}
span.icon187 {background-position: -108px -162px;}
span.icon188 {background-position: -126px -162px;}
span.icon189 {background-position: -144px -162px;}
span.icon190 {background-position: -162px -162px;}
span.icon191 {background-position: -180px -162px;}
span.icon192 {background-position: -198px -162px;}
span.icon193 {background-position: -216px -162px;}
span.icon194 {background-position: -234px -162px;}
span.icon195 {background-position: -252px -162px;}
span.icon196 {background-position: -270px -162px;}
span.icon197 {background-position: -288px -162px;}
span.icon198 {background-position: -306px -162px;}
span.icon199 {background-position: -324px -162px;}
span.icon200 {background-position: -342px -162px;}

/*------------------------------------*\
    $DROPDOWN MENU
\*------------------------------------*/
div.dropdown {
    float: left;
    position: relative;
}

div.dropdown span.toggle {
    width: 19px;
    height: 16px;

    margin-left: 7px;
    margin-top: 1px;
    margin-right: 2px;
    padding-left: 8px;

    float: right;

    background: url(../images/toggle.png) top right no-repeat;
    border-left: 1px solid #D9D9D9;

    -webkit-transition: border-color .20s;
    -moz-transition: border .20s;
    -o-transition: border-color .20s;
    transition: border-color .20s;
}
div.dropdown span.toggle.active {
    background: url(../images/toggle.png) bottom right no-repeat;
}
div.dropdown 
button:hover span.toggle, 
.button:hover span.toggle {
    border-color: #C0C0C0;
}

div.dropdown-slider {
    display: none;

    overflow: hidden;

    margin: 0 7px 5px 7px;
    position: absolute;
    top: 34px;
    right: 0;

    background: #F2F2F2;

    border-right: solid 1px #D9D9D9;
    border-bottom: solid 1px #D9D9D9;
    border-left: solid 1px #D9D9D9;

    -webkit-border-bottom-right-radius: 2px;
    -webkit-border-bottom-left-radius: 2px;
    -moz-border-radius-bottomright: 2px;
    -moz-border-radius-bottomleft: 2px;
    border-bottom-right-radius: 2px;
    border-bottom-left-radius: 2px;

    -webkit-transition: border-color .20s;
    -moz-transition: border .20s;
    -o-transition: border-color .20s;
    transition: border-color .20s;
}
.left div.dropdown-slider {
    margin: 0 1px 5px 7px;
}
.middle div.dropdown-slider {
    margin: 0 1px 5px 1px;
}
.right div.dropdown-slider {
    margin: 0 7px 5px 1px;
}
div.dropdown-slider .ddm {
    display: block;
    background: #F2F2F2;
    color: #585858;

    text-decoration: none;
    text-shadow: 0 1px 0 #fff;
    font: bold 11px Helvetica, Arial, sans-serif;
    line-height: 18px;
    height: 18px;

    margin: 0;
    padding: 5px 6px 4px 6px;
    width: 100%;
    float: left;

    border-top: 1px solid #FFF;
    border-bottom: 1px solid #D9D9D9;
}
div.dropdown-slider .ddm:hover {
    background: #F4F4F4;
    border-bottom-color: #C0C0C0;
}
div.dropdown-slider .ddm:active {
    border-bottom-color: #4D90FE;
    color: #4D90FE;

    -moz-box-shadow:inset 0 0 10px #D4D4D4;
    -webkit-box-shadow:inset 0 0 10px #D4D4D4;
    box-shadow:inset 0 0 10px #D4D4D4;
}
div.dropdown-slider .ddm:last-child {
    border-bottom: none;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:46:15.843

`input[type="submit"]`只需用您的样式覆盖默认行为，如下所示：

```
input[type="submit"].button {
/*Google style definitions */ 
}
input[type="submit"].button.blue {
/*Google style blue button definitions */ 
} 
```

我希望这回答了你的问题

# java - 为什么在我的 MINA 应用程序中使用的堆总是在增加？

> ID：13699010
> 
> 赞同：0
> 
> 时间：2012-12-04T08:48:03.517
> 
> 标签：java, performance, memory, mina

我有一个应用程序，它由服务器和客户端两部分组成。

它是这样工作的：

客户端连接到服务器并发送一个字符串；服务器接收字符串并返回一个包含 10000 个元素的 ArrayList（通过转换字符串）。

我编写了一个类（ClientConnector.java），它模拟许多客户端使用一个连接从服务器获取这 10000 个元素。

当我运行这两个程序时，服务器端没问题。然而在客户端，使用的堆总是在增加！我试图通过“null”释放使用过的对象，但使用过的内存仍然越来越大。

[http://s10.postimage.org/egf4ugrd5/mem.png](http://s10.postimage.org/egf4ugrd5/mem.png)

我的服务器端代码：Client.java

公共类客户{

```
private static final int PORT = 7571;
ClientHandler handler = new ClientHandler("hey");
IoConnector connector;
boolean available = true;

public synchronized void setAvailable(boolean available) {
    this.available = available;
}

public synchronized boolean isAvailable() {
    return available;
}

public void starter() throws InterruptedException {

    Thread t = new Thread(new Runnable() {
        @Override
        public void run() {

            connector = new NioSocketConnector();
            connector.getSessionConfig().setReadBufferSize(2048);
            TextLineCodecFactory t = new TextLineCodecFactory(Charset.forName("UTF-8"));
            t.setEncoderMaxLineLength(20 * 150000);
            t.setDecoderMaxLineLength(20 * 150000);
            connector.getFilterChain().addLast("logger", new LoggingFilter());
            connector.getFilterChain().addLast("codec", new ProtocolCodecFilter(t));

            connector.setHandler(handler);
            ConnectFuture future = connector.connect(new InetSocketAddress("localhost", PORT));
            future.awaitUninterruptibly();

            if (!future.isConnected()) {
                return;
            }

            IoSession session = future.getSession();
            session.getConfig().setUseReadOperation(true);
            session.getCloseFuture().awaitUninterruptibly();

            connector.dispose();
        }
    });
    t.start();
    Thread.sleep(300);
}

public void conClose() {
    connector.dispose();
}

public ClientHandler getHandler() {
    return handler;
}

public void reqInf() {
    handler.reqInfo();
}

public static void main(String[] args) {
    try {
        Client c = new Client();
        c.starter();
    } catch (InterruptedException ex) {
        System.out.println("error");
    }
} 
```

}

客户端处理程序.java

公共类 ClientHandler 扩展 IoHandlerAdapter {

```
long time;
private final String values;
IoSession session;

public ClientHandler(String values) {
    this.values = values;
}

@Override
public void sessionOpened(IoSession session) throws InterruptedException {
    this.session = session;
}

public ArrayList<String> convert(String str) {
    Gson gson = new Gson();
    return gson.fromJson(str, ArrayList.class);
}

@Override
public void messageReceived(IoSession session, Object message) throws InterruptedException {

    try {
        ArrayList<String> test = convert(message.toString());
        System.out.println("TIME : " + (System.currentTimeMillis() - time) + " strList:" + test.size());
        message = null;
        test = null;

    } catch (Exception ex) {
        ex.printStackTrace();
    }
}

@Override
public void exceptionCaught(IoSession session, Throwable cause) {
    session.close();
    System.out.println(cause.toString());
}

@Override
public void sessionClosed(IoSession session) {

    System.out.println("Connection Lost");
}

public void reqInfo() {
    time = System.currentTimeMillis();
    session.write("test");
} 
```

}

**我的服务器端：** Server.java

公共类服务器{

```
private static final int PORT = 7571; //TEST PORT
IoAcceptor acceptor = new NioSocketAcceptor();

public Server() throws IOException {
    TextLineCodecFactory t = new TextLineCodecFactory(Charset.forName("UTF-8"));
    t.setEncoderMaxLineLength(20*150000);
    t.setDecoderMaxLineLength(20*150000);
    acceptor.getFilterChain().addLast("logger", new LoggingFilter());
    acceptor.getFilterChain().addLast("codec", new ProtocolCodecFilter(t));
    // acceptor.getFilterChain().addLast("threadPool", new ExecutorFilter(Executors.newCachedThreadPool()));

    Executor executor = new ThreadPoolExecutor(5, 70, 60, TimeUnit.SECONDS, new LinkedBlockingQueue<Runnable>());

    acceptor.getFilterChain().addLast("threadPool", new ExecutorFilter(executor));
    acceptor.setHandler(new ServerHandler());
    acceptor.getSessionConfig().setReadBufferSize(2048);
    acceptor.getSessionConfig().setIdleTime(IdleStatus.BOTH_IDLE, 1000);

    //timer();

    acceptor.bind(new InetSocketAddress(PORT));
    System.out.println("***Mina Server is ready !");
    System.out.println("");
    System.out.println("");

}

public static void main(String[] args) throws IOException {
    Server m = new Server();
} 
```

}

服务器处理程序.java

公共类 ServerHandler 扩展 IoHandlerAdapter {

```
private final Logger logger = (Logger) LoggerFactory.getLogger(getClass());
IoSession sessions;
//Communication communication;

public ServerHandler() throws IOException {
    loader();
    // communication = new Communication(this);
}

@Override
public void sessionOpened(IoSession session) {
    // set idle time to 10 seconds
    session.getConfig().setIdleTime(IdleStatus.BOTH_IDLE, 1000);
    System.out.println("Client Connected !!!");
    //session.setAttribute("Values: ");
    this.sessions = session;

}

public String toGSon(ArrayList<String> list) {
    Gson gson = new Gson();
    String str = gson.toJson(list);
    return str;
}
ArrayList<String> str = new ArrayList<String>();

public void loader() {
    for (int i = 0; i < 10000; i++) {
        str.add("test" + i);
    }
}

@Override
public void messageReceived(IoSession session, Object message) throws InterruptedException {

    long time = System.currentTimeMillis();
    session.write(toGSon(str));
    System.out.println("TIME : " + (System.currentTimeMillis() - time));

}

@Override
public void sessionIdle(IoSession session, IdleStatus status) {
    System.out.println("Socket #" + session.getId() + " is disconnecting... (IDLE)");
    session.close();
}

@Override
public void exceptionCaught(IoSession session, Throwable cause) {
    System.out.println("------------>" + cause.toString());
    session.close();
} 
```

}

还有我的主班

公共类客户端连接器{

```
public ClientConnector() throws InterruptedException {
    Client cl = new Client();
    cl.starter();
    while (true) {

        cl.reqInf();
        Thread.sleep(100);
    }
}

public static void main(String[] args) throws InterruptedException {
    ClientConnector cl = new ClientConnector();
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T17:09:57.983

我们的一位开发人员发现 Mina 的清理方式存在问题，并且已将补丁应用于 2.0.8 版本。从今天开始，这是“快照”，您必须从 git 中获取它并自己构建它。这是从 git 获取它的命令：

```
混帐结帐 2.0

```

存储库 uri：

```
git 克隆 http://git-wip-us.apache.org/repos/asf/mina.git

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-24T02:06:24.980

You must remove below code from client side.

```
session.getConfig().setUseReadOperation(true); 
```

Above code will cause memory leak.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T10:04:34.210

此代码不足以得出一个针尖的答案。

堆大小不断增加，没有影响 GC --> 内存泄漏的迹象。

可能您应该分析您的应用程序并使用一些[OQL 工具](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.mat.ui.help/tasks/queryingheapobjects.html)来找出正在使用哪个类**，**这是在您的情况下查看堆转储的罪魁祸首`char[]`

# c# - 带有路径的 ASP.Net 4.0 路由问题

> ID：13699011
> 
> 赞同：0
> 
> 时间：2012-12-04T08:48:06.217
> 
> 标签：c#, webforms, asp.net-routing

我正在努力解决有关 4.0 版本中的 asp.net webform 路由的两个问题。

**第一个问题**是本地服务器上的路径相同的路径适用于其他项目并在本地服务器中创建路径问题。

第二个问题是路由在实际托管 Web 服务器上不起作用

示例代码

**全球.asx**

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.Ignore("{*allaspx}", new { allaspx = @".*\.aspx(/.*)?" });
    routes.Ignore("{*allcss}", new { allcss = @".*\.css(/.*)?" });
    routes.Ignore("{*alljpg}", new { alljpg = @".*\.jpg(/.*)?" });
    routes.Ignore("{*alljpg}", new { alljpg = @".*\.png(/.*)?" });
    routes.Ignore("{*alljpg}", new { alljpg = @".*\.gif(/.*)?" });
    routes.Ignore("{*alljs}", new { alljs = @".*\.js(/.*)?" });
    routes.Add(new System.Web.Routing.Route("{resource}.css/{*pathInfo}", new System.Web.Routing.StopRoutingHandler()));
    routes.Add(new System.Web.Routing.Route("{resource}.js/{*pathInfo}", new System.Web.Routing.StopRoutingHandler()));

    // Page will Generate error if route for home page is take out then 
    // http://www.kashmirsouq.com without any page or quesry string wont work.

    routes.MapPageRoute(
         "HomeRoute",
         "",
         "~/Default.aspx"
     );

    ////For 
    routes.MapPageRoute("ParentCat", "buysell/{CatID}/{Title}", "~/buy-sell-in-kashmir.aspx", false,
         new RouteValueDictionary {
                    { "CatID", "0" },
                    { "Title", "Product-Category-not-found" }},
         new RouteValueDictionary {   
                    { "CatID", "^[0-9a-fA-Z-]{36}$" }
                }); 
} 
```

**ParentCategoryListing.ascx & .cs 文件代码**

```
 <asp:Repeater ID="rptParentCategoryListing" runat="server">
                <ItemTemplate>
                    <li><a href='<%#getURLRouting(Eval("parentGUID"),Eval("CatName")) %>' title='<%#  Eval("CatLinkTitle")%>'>
                        <%#  Eval("CatName")%></a> </li>
                </ItemTemplate>
            </asp:Repeater>

protected string getURLRouting(object CatID, object CatTitle)
{
    string strTitle = CatTitle.ToString();

    #region Generate SEO Friendly URL based on Title
    //Trim Start and End Spaces.
    strTitle = strTitle.Trim();
    //Trim "-" Hyphen
    strTitle = strTitle.Trim('-');
    strTitle = strTitle.ToLower();
    char[] chars = @"$%#@!*?;:~`+=()[]{}|\'<>,/^&"".".ToCharArray();

    //Replace . with - hyphen
    strTitle = strTitle.Replace(".", "-");
    //Replace Special-Characters
    for (int i = 0; i < chars.Length; i++)
    {
        string strChar = chars.GetValue(i).ToString();
        if (strTitle.Contains(strChar))
        {
            strTitle = strTitle.Replace(strChar, string.Empty);
        }
    }
    //Replace all spaces with one "-" hyphen
    strTitle = strTitle.Replace(" ", "-");
    //Replace multiple "-" hyphen with single "-" hyphen.
    strTitle = strTitle.Replace("--", "-");
    strTitle = strTitle.Replace("---", "-");
    strTitle = strTitle.Replace("----", "-");
    strTitle = strTitle.Replace("-----", "-");
    strTitle = strTitle.Replace("----", "-");
    strTitle = strTitle.Replace("---", "-");
    strTitle = strTitle.Replace("--", "-");
    //Run the code again...
    //Trim Start and End Spaces.
    strTitle = strTitle.Trim();
    //Trim "-" Hyphen
    strTitle = strTitle.Trim('-');
    #endregion
    string url = null;
    try
    {
       // url = "~/news/" + NewsID + "/" + pageid + "/" + strTitle; // +"&pgName=" + PageName;
        url = "~/buysell/"+CatID + "/" + strTitle;
     //   return url;
    }
    catch (Exception ex)
    {
        Response.Redirect("Error");
    }
    return url;
} 
```

**来自buy-sell-in-kashmir.aspx 文件的部分代码**

```
protected void Page_Load(object sender, EventArgs e)
{
    if (string.IsNullOrEmpty(Request["CatID"]))
    {
        sPID = RouteData.Values["CatID"].ToString();
        bIsGUID = IsGuid(sPID, out PID);
        addCanonicalURL = false;
    }
    else
    {
        sPID = Helper.GetQueryStringValue("CatID").ToString(); ;
        bIsGUID = IsGuid(sPID, out PID);
        addCanonicalURL = true;
    }

  // Code to get details based on sPID ParentCategory GUID 
```

}

**输出**

使用 default.aspx 页面上的 Current UserControl 为父类别生成以下链接

`http://localhost:59030/TravelKashir-Souq/~/buysell/1ef4f9db-14d1-4ff0-be79-922ce903bff4/electronics-technology`

在上面的示例链接中，`~/`当我在用户控制功能中使用路径时，它会添加`getURLRouting`

`url = "~/buysell/"+CatID + "/" + strTitle;`

如果我使用路径作为

`url = "buysell/"+CatID + "/" + strTitle;`然后链接父类别更改为

`http://localhost:59030/TravelKashir-Souq/buysell/1ef4f9db-14d1-4ff0-be79-922ce903bff4/electronics-technology`

在 default.aspx 页面 & 路由工作正常 & 当我点击它转到页面**buy-sell-in-kashmir.aspx**

`http://localhost:59030/TravelKashir-Souq/buysell/1ef4f9db-14d1-4ff0-be79-922ce903bff4/buysell/1ef4f9db-14d1-4ff0-be79-922ce903bff4/electronics-technology`

尝试了不同的路径仍然无法正常工作，当我在共享主机上上传代码时它不起作用并产生错误

`HTTP Error 404.0 - Not Found The resource you are looking for has been removed, had its name changed, or is temporarily unavailable.`

我对这个问题感到沮丧，因为我可以使代码中提到的相同路径适用于其他项目而没有任何问题。

我将不胜感激这方面的帮助。

带有我们的路由[http://www.kashmirSouq.com](http://www.kashmirSouq.com)的网站和不起作用的路由版本[http://demo2.kashmirsouq.com](http://demo2.kashmirsouq.com)

配置：本地主机和共享主机上的 IIS 7.5/asp.net 4.0

# javascript - 仅添加单击的数据网格线的图形

> ID：13699017
> 
> 赞同：0
> 
> 时间：2012-12-04T08:48:40.793
> 
> 标签：javascript, arcgis, graphic, dojox.grid.datagrid

现在，地图在数据网格中添加了每个找到的结果的图形。但我只想在数据网格中添加选定的图形，然后将范围（缩放）设置为选定的特征。有谁知道如何做到这一点？现在我这样做：

```
function showResults(results) {

    var markerSymbol = new esri.symbol.SimpleMarkerSymbol(esri.symbol.SimpleMarkerSymbol.STYLE_CIRCLE,
        10,
        new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,
        new dojo.Color([0,255,255]), 2),
        new dojo.Color([0,255,0,0])
    );
    var lineSymbol = new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,
        new dojo.Color([0,255,255]),
        4
    );
    var polygonSymbol = new esri.symbol.SimpleFillSymbol(esri.symbol.SimpleFillSymbol.STYLE_SOLID,
        new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,
        new dojo.Color([0,255,255]), 4),
        new dojo.Color([0,255,255,0])
    );

    map.graphics.clear();
    var dataForGrid = [];

    dojo.forEach(results, function(result) {
        var graphic = result.feature;
        dataForGrid.push([ result.foundFieldName, result.value]);
        switch (graphic.geometry.type) {
            case "point":
                graphic.setSymbol(markerSymbol);
            break;
            case "polyline":
                graphic.setSymbol(lineSymbol);
            break;
            case "polygon":
                graphic.setSymbol(polygonSymbol);
            break;
        }
        map.graphics.add(graphic);
    });

    var data = {
        items: dataForGrid
    };

    var store = new dojo.data.ItemFileReadStore({
        data: data
    });
    grid.setStore(store);
}
function onRowClickHandler(evt){
    var clickedTaxLotId = grid.getItem(evt.rowIndex).POINT_NAME;
    var selectedTaxLot;

    dojo.forEach(map.graphics.graphics,function(graphic){
        if((graphic.attributes) && graphic.attributes.POINT_NAME === clickedTaxLotId){
            selectedTaxLot = graphic;
            return;
        }
    });

    if (selectedTaxLot.geometry.declaredClass == 'esri.geometry.Point' ) {
        var PointExtent = new esri.geometry.Extent(); PointExtent.xmin = selectedTaxLot.geometry.x - 100; //I'm using State Plane Feet, so
        that's 100 out from my point PointExtent.ymin =
        selectedTaxLot.geometry.y - 100; PointExtent.xmax =
        selectedTaxLot.geometry.x + 100; PointExtent.ymax =
        selectedTaxLot.geometry.y + 100;  map.setExtent(PointExtent);

    } else if (selectedTaxLot.geometry.declaredClass == 'esri.geometry.Polyline' ) {
        var taxLotExtent = selectedTaxLot.geometry.getExtent();
        map.setExtent(taxLotExtent);

    } else if (selectedTaxLot.geometry.declaredClass == 'esri.geometry.Polygon' ) {
        var taxLotExtent = selectedTaxLot.geometry.getExtent();
        map.setExtent(taxLotExtent);
    }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-06T15:17:08.557

检查 ESRI 的资源中心 - JS API 示例部分。

这个[http://help.arcgis.com/en/webapi/javascript/arcgis/samples/find_map_datagrid/index.html](http://help.arcgis.com/en/webapi/javascript/arcgis/samples/find_map_datagrid/index.html)是工作示例。

而这个[http://help.arcgis.com/en/webapi/javascript/arcgis/help/jssamples_start.htm#jssamples/find_map_datagrid.html](http://help.arcgis.com/en/webapi/javascript/arcgis/help/jssamples_start.htm#jssamples/find_map_datagrid.html)是该示例的源代码。

# emacs - 超越while和maphash的迭代？

> ID：13699022
> 
> 赞同：2
> 
> 时间：2012-12-04T08:49:09.743
> 
> 标签：emacs, elisp, iteration

我正在尝试编写一个小型宏系统来在 Emacs Lisp 中执行迭代任务。我理所当然地认为除了`while`循环之外没有什么。没有更多的原语或一些隐藏的功能，但我决定，我最好问问。

我所说的“隐藏特征”是指类似于[`tagbody`](http://clhs.lisp.se/Body/s_tagbod.htm#tagbody)Common Lisp 中的东西，即根据块、跳转和标签对代码进行建模的非常原始的形式。eLisp 中有这样的东西吗？甚至没有以任何“hackish”方式，例如通过字节码？当然，我知道`(catch ... (throw ... ))`construct，但它并不完全相同，因为它只允许“向后”跳跃，而不能向前跳跃。我还假设它是一个相当复杂的构造，不适合构建快速迭代原语。

让我烦恼的另一件事是似乎没有办法为哈希表创建迭代器。即必须使用一个哈希表来迭代`maphash`，一旦你退出`maphash`函数，就不会回到你离开它的地方。到目前为止，我了解，它必须执行类似导出键向量和值向量并对其进行迭代的操作，但似乎没有办法获取这些向量/列表/无论它们是什么。还是我又错了？

我研究了 package 如何为and / /`cl`生成代码，但他们只是使用or ，无论哪个合适，而且坦率地说，我不太喜欢他们的代码......有两个子句，它们只是忽略第一个（您甚至不会收到警告）并为第二个生成代码：|`loop``dotimes``dolist``do``while``maphash``loop``for-as-hash`

是否有一些技巧可以从 eLisp 中的用户代码中获取这些迭代原语？如果不是，那么用 C 语言编写扩展是多么可行，而且真的是这样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T14:20:07.140

你可以`tagbody`作为一个宏：

```
 (defmacro cl-tagbody (&rest tags-or-stmts)
     (let ((blocks '()))
       (let ((block (list 'cl--preamble)))
         (dolist (tag-or-stmt tags-or-stmts)
           (if (consp tag-or-stmt) (push tag-or-stmt block)
             ;; Add a "go to next block" to implement the fallthrough.
             (push (nreverse (cons `(go ,tag-or-stmt) block)) blocks)
             (setq block (list tag-or-stmt))))
         (push (nreverse (cons `(go cl--exit) block)) blocks))
       (let ((catch-tag (make-symbol "cl--tagbody-tag")))
         (macroexpand-all
          `(let ((next-tag 'cl--preamble))
             (while
                 (not (eq (setq next-tag
                                (catch ',catch-tag
                                  (cl-case next-tag
                                    ,@blocks)))
                          'cl--exit))))
          `((go . (lambda (tag) `(throw ',catch-tag ',tag)))
            ,@macroexpand-all-environment))))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T16:06:26.877

### 1\. 其他循环结构？

Emacs Lisp 中唯一通用的内置循环结构是`while`（请参阅参考资料[`eval.c`](https://github.com/emacsmirror/emacs/blob/master/src/eval.c#L822)）。宏`dolist`和`dotimes`( [in`subr.el`](https://github.com/emacsmirror/emacs/blob/master/lisp/subr.el#L198) ) 都使用`while`.

还有用于映射各种数据结构的内置函数：`mapatoms`, `mapc`, `mapcar`, `map-char-table`, `mapconcat`, `maphash`, 和`map-keymap`. 但是这些实现方式是您不能将它们的执行与其他 Lisp 代码交错执行（例如参见 参考资料[`maphash`）`fns.c`](https://github.com/emacsmirror/emacs/blob/master/src/fns.c#L4469)。如果你想遍历两个这样的数据结构，你必须遍历一个然后遍历另一个。

所以我认为你基本上不走运。

### 2\. 扩展？

Emacs 被刻意设计为不具有动态 C 级扩展，以使某人更难以对 Emacs 用户的自由进行“[拥抱和扩展](http://en.wikipedia.org/wiki/Embrace,_extend_and_extinguish)”攻击（例如，请参阅[此处开始](http://lists.gnu.org/archive/html/emacs-devel/2003-07/msg00398.html)的 emacs-devel 线程）。

因此，如果要添加 C 级功能，则必须编辑源代码。祝你好运！

# foreign-keys - 'reference' 和 'db.table_name' 之间的真正区别

> ID：13699024
> 
> 赞同：0
> 
> 时间：2012-12-04T08:49:12.770
> 
> 标签：foreign-keys, data-access-layer, web2py

我有一个带有 web2py 外键的问题，因为缺乏这方面的文档非常令人沮丧。我在大多数表相关的不同文件中定义表。我曾经使用 db.table_name 来表示外键，但有人告诉我使用“reference tbl_name”。然而，这没有任何区别，我仍然收到错误，因为根据 web2py 的字母顺序规则，在以后的文件中定义的模型会出现错误。看起来按顺序排列表格实际上很重要，这使得引用关键字的使用充其量是无用的。或者我在这里错过了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T07:26:35.787

我假设您正在使用`mysql`. 在这种情况下，这是一个`mysql`错误。`mysql`引发错误 150（外键错误）。所以，这是一个数据库后端问题，而不是一个`web2py`问题。请务必检查您的数据库服务器的文档。我如何解决这个问题是在`db.py`文件中声明（`db.define_table`）首先不需要外键的所有主表，然后继续声明需要外键的表（只需确保外表在引用之前存在）。如果您将单个文件用于不同的表`models`文件夹，然后尝试找出哪些表是主表，并确保首先通过在文件名前加上数字来创建它们，以便在引用表中的外键之前，“外”表将已经存在于数据库中。

但是，应该没有问题`sqlite`。

# xcode - 无法使用 restkit 0.20 构建项目

> ID：13699032
> 
> 赞同：0
> 
> 时间：2012-12-04T08:49:43.817
> 
> 标签：xcode, macos, restkit

我有一个使用 RestKit（作为 git 子模块安装）的 OS X 项目。昨天我更新了 RestKit 子模块，发现了 AFNetworking 的使用（所以我必须更改一些使用 RKClient 的代码）。

问题是我不能再构建我的项目了。我必须迁移我的代码，但错误是

> RestKit.framework/Headers/RKHTTPRequestOperation.h:21:9：致命错误：找不到“AFNetworking.h”文件
> 
> `#import "AFNetworking.h"`

如果我只打开 RestKit 项目，则框架构建成功，但我第一次包含它（带`#import <RestKit/RestKit.h>`）出现上述错误！

顺便说一句：在我的 RestKit 文件夹中`git pull origin master`更新模块，但没有下载 AFNetworking 文件。我手动复制文件夹中的文件。我在更新过程中遗漏了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T06:45:16.293

cd 进入 RestKit 目录，然后执行

```
git submodule init
git submodule update 
```

这将提取必要的 AFNetworking 文件。然后重建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:55:11.243

通过CocoaPods安装RestKit解决...

（在[RestKit 和 AFNetworking 构建错误](https://stackoverflow.com/questions/13754547/restkit-and-afnetworking-build-error/13762665)中给出的公认答案对我不起作用..但安装 cocoapods 的建议是的）

# jquery - 如何在ajax表单提交上触发错误方法

> ID：13699033
> 
> 赞同：0
> 
> 时间：2012-12-04T08:49:44.220
> 
> 标签：jquery, ajax

我有一个如下的控制器方法：

```
@RequestMapping(value="/saveDetails")
public @ResponseBody ReturnTO saveDetails(@RequestParam("invenStr") String invenStr) {
    ReturnTO returnTO=new ReturnTO();   
     try{
             /**save invenStr **/
             returnTO.setStatus(false);
     }catch(Exception e){
             returnTO.setStatus(true);
     }
    return returnTO;
} 
```

这里的 ReturnTO 是一个具有布尔状态变量和 getter/setter 的类

我的查询是：由于ajax调用触发回调的**错误**方法，可以将状态变量设置为**true**并将其作为响应正文返回。如果不是，有没有办法将状态变量映射到回调方法。

 **我的ajax调用如下：

```
 $.ajax({
        type : 'POST',
        url : contextRoot + "saveDetails.htm",
        async : false,
        timeout : 5000,
        data : {
            invenStr : invenStr
        },
        success : function(data, textStatus) {

        },
        error : function(xhr, textStatus, errorThrown) {

        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:55:22.537

当收到与 ok(200) 不同的 http 响应时，将调用 jquery ajax 错误回调。要触发回调的错误方法，您应该返回与 ok 不同的 http 响应代码。**

# c# - 在c#中使用字符串数组生成组合

> ID：13699043
> 
> 赞同：2
> 
> 时间：2012-12-04T08:50:12.537
> 
> 标签：c#, arrays, algorithm, combinations

> **可能重复：**
> [数组的不同组合（C#）](https://stackoverflow.com/questions/7643885/different-combinations-of-an-array-c)

```
string[] array = {"01", "02", "03", "04", "05", "06", "07", "08", "09", "10"}; 
```

如何为每个组合生成 2 / 3 / 4 / 5 个字符串，例如每个组合 2 个字符串，没有重复/重复，也无视位置，使用组合公式 nCr = 10!/2!(10-2)！= 45 种组合。

我需要输出是这样的：

```
"01", "02"
"01", "03"
"01", "04"
...
"02", "03" // eliminate the "02","01" 'cause it is same as "01","02" combination
"02", "04"
... 
```

然后生成 3 个字符串的组合，将有 120 个组合（根据 nCr）。我需要输出是这样的：

```
"01","02","03"
"01","02","04"
... 
```

而 4 个字符串的组合，将有 210 个组合，最少，每个组合 5 个字符串的组合，将有 252 个组合。

我该怎么写？我用了很多循环，看起来真的很乱。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T09:25:48.347

您可以使用简单的递归：

```
private static IEnumerable<string> Combinations(int start, int level)
{
  for ( int i = start; i < array.Length; i++ )
    if ( level == 1 )
      yield return array[i];
    else
      foreach ( string combination in Combinations(i + 1, level - 1) )
        yield return String.Format("{0} {1}", array[i], combination);
} 
```

像这样称呼它：

```
 var combinations = Combinations(0, 2);

  foreach ( var item in combinations )
    Console.WriteLine(item); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-04T09:04:56.970

您可以使用这个高效的项目：[**Permutations, Combinations, and Variations using C# Generics**](http://www.codeproject.com/Articles/26050/Permutations-Combinations-and-Variations-using-C-G)。

```
string[] array = { "01", "02", "03", "04", "05", "06", "07", "08", "09", "10" };
int lowerIndex = 2;
var combinations = new Facet.Combinatorics.Combinations<String>(
    array, 
    lowerIndex, 
    Facet.Combinatorics.GenerateOption.WithoutRepetition
);

foreach (IList<String> combis in combinations)
{
    String combi = String.Join(" ", combis);
    Console.WriteLine(combi);
} 
```

由于它是开源的，你可以看看它是如何实现的。但是上面的链接也非常有用。

输出（lowerIndex=2）：

```
01 02
01 03
01 04
01 05
01 06
01 07
01 08
01 09
01 10
02 03  <-- no 02 01 since it would be a repitition
02 04
02 05
// ... (45 combinations w/o repetitions)
09 10 
```

输出（lowerIndex=5）：

```
01 02 03 04 05
01 02 03 04 06
01 02 03 04 07
01 02 03 04 08
01 02 03 04 09
01 02 03 04 10
01 02 03 05 06
01 02 03 05 07
01 02 03 05 08
01 02 03 05 09
01 02 03 05 10
01 02 03 06 07
// ........... (252 combinations w/o repetitions)
05 07 08 09 10
06 07 08 09 10 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-04T09:05:21.360

这是使用 nCr 对两个数字执行组合的函数，将其调整为多个数字

```
 /// <summary>
    /// Performs a nCr Combination of the two numbers
    /// </summary>
    /// <param name="n">The Number</param>
    /// <param name="r">The Range</param>
    /// <returns></returns>
    public static double Combination(double n, double r)
    {
        /*
         * Formula for Combination: n! / (r! * (n - r)!)
         */

        // n and r should be integral values
        double rfloor = Math.Floor(r);
        double nfloor = Math.Floor(n);
        // Check for all invalid values of n and r.
        if ((n < 1) || (r < 0) || (r > n) || (r != rfloor) || (n != nfloor))
        {
            throw new Exception("Invalid Input to Combination Function: Number must be greater than Range");
        }

        return Factorial(n) / (Factorial(r) * Factorial(n - r));
    } 
```

和

```
public static double Factorial(double n)
    {
        if (n < 0) { throw new Exception("Cannot take the factorial of a negative number"); }
        double factorial = 1;
        // 0! and 1! = 1
        for (double i = 2; i < n + 1; i++)
        {
            factorial *= i;
        }
        return factorial;
    } 
```

# extjs - 为 MVC 应用程序自定义加载器

> ID：13699045
> 
> 赞同：1
> 
> 时间：2012-12-04T08:50:16.360
> 
> 标签：extjs, extjs4, classloader, loader, extjs-mvc

我需要在我的 MVC 项目中为 Ext.Loader 使用自定义路径。我已经浏览过 API 并没有发现任何可用的东西。如果我直接设置加载器，它会被简单地覆盖，正如 MVC 应用程序设置所显示的那样。那么如何自定义 MVC 应用程序的加载器路径呢？

另外：如果可以调整加载器以将同一来源出现的多个需求汇总到一个请求中，那就太棒了。那可能吗？

在此先感谢您的任何建议

**编辑**

加载程序默认调用类似`app/controller/MyController.js`或`app/store/MyStore.js`

我的目标是通过 JSON修改这条路径，`load/data/app/controller/MyController`或者更好或最好的请求`load/data?ident=app.controller.MyController`

**编辑 2**

谢谢大家的回复！我再次查看了 Ext.app.Application 的源代码，但找不到加载程序的初始化位置。是的，我找到了 appFolder 属性，但没有找到它的使用位置。我对 appFolder 方法的问题是，由于应用了 GET 参数，我无法使用路由。所以猜测最好是修改Ext.Loader，不是吗？还是加载器能够加载整个命名空间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:37:27.267

如果您需要更改相对于网站的根目录，您可以在应用程序中设置“appFolder”配置属性。

例如，如果您有 www.mysite.com 但您想将 .js 文件存储在 www.mysite.com/scripts/ext/ 中，您可以执行以下操作：

```
Ext.application({
    name: 'MySite',
    appFolder: '/scripts/ext'
}); 
```

不确定这是否就是这里所要求的，但可能会给你一个起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T07:14:10.387

我想如果没有很多修改，您尝试归档的内容是不可能的。您必须为此更改加载程序，以使其适合您的请求需求。我认为您可能会更好地在后端定义一些路由并使用@dougajmcdonald 编写的方法。我想你会以几乎相同的方式结束。

但是您应该注意，当您让 Webserver 获取文件然后按代码执行时，它会快得多。

# forms - Twiiter Bootstrap - 表单下拉分隔符和标题

> ID：13699046
> 
> 赞同：6
> 
> 时间：2012-12-04T08:50:22.637
> 
> 标签：forms, twitter-bootstrap

使用 Twitter Boostrap，我正在尝试在下拉列表中创建一个带有分隔符的表单下拉列表，对应于每个部分。那可能吗？

[包含 JSFiddle](http://jsfiddle.net/TDtSp/1/)

我想创建类似的东西：

```
<!--GROUP-->
<option>1</option>
<option>2</option>
<option>3</option>
<!--GROUP-->
<option>4</option>
<option>5</option>
<option>6</option> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T09:04:15.143

为此，您可以使用[`optgroup`](https://developer.mozilla.org/en-US/docs/HTML/Element/optgroup)

```
<div class="container">
    <select>
        <optgroup label="Group 1">
            <option>Item 1</option>
            <option>Item 2</option>
            <option>Item 3</option>
        </optgroup>
        <optgroup label="Group 2">
            <option>Item 1</option>
            <option>Item 2</option>
            <option>Item 3</option>
        </optgroup>
    </select>
</diV>​ 
```

更新小提琴：http: [//jsfiddle.net/codovations/M8pSH/](http://jsfiddle.net/codovations/M8pSH/)

# sql - 用于检测 SQL Server 2012 上发布者上的上次复制日期时间的 SQL 查询

> ID：13699048
> 
> 赞同：1
> 
> 时间：2012-12-04T08:50:26.367
> 
> 标签：sql, sql-server, replication, sql-server-2012

我想知道如何通过 SQL Server 2012 上的发布者通过查询获取上次复制日期/时间。

请注意，我无权访问订阅者数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:25:44.570

你看过`sysmergesubscriptions`桌子吗？

> 每个已知订阅服务器包含一行，并且是发布服务器的本地表。此表存储在发布和订阅数据库中。

它包含一个名为的列`last_sync_date`：

last_sync_date - datetime - 同步的日期时间。

资料来源：[MSDN](http://msdn.microsoft.com/en-us/library/ms182728.aspx)

# r - R：tkplot在R中给出错误

> ID：13699050
> 
> 赞同：4
> 
> 时间：2012-12-04T08:50:28.643
> 
> 标签：r, plot, social-networking, igraph, tkplot

我对 R 完全陌生。我正在从事社交网络分析并希望可视化网络图。我安装了各种软件包，如 igraph、ggplot2、tcltk 等。我的代码如下：

```
network <- as.matrix(x)
g1 <- graph.adjacency(network)
tkplot(g1) 
```

当我运行此代码时，出现以下错误：

```
Error in structure(.External("dotTclObjv", objv, PACKAGE = "tcltk"), class = "tclObj") : 
  [tcl] invalid command name "font". 
```

我试图寻找答案，但无法清楚地理解如何解决它。有人可以帮我解决这个错误吗？

我通过 RStudio 在服务器上使用 R。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:34:52.113

它运行对我来说没有任何问题。您是否安装并加载了所有需要的库？tcltk 和 igraph ？

```
install.packages("tcltk")
library(igraph)
x<-read.table("http://www.ats.ucla.edu/stat/r/faq/mat25.txt", header=FALSE)
network = as.matrix(x)
g1 = graph.adjacency(network)
tkplot(g1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-27T20:59:19.587

仅供参考 - 我收到了同样的错误，只需要在安装 XQuartz 后从我的 mac 注销并再次登录（这是 tcltk.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T10:30:27.873

您安装了哪个版本的 tcltk？因为字体命令直到 tk 8.0 [here](http://www.tcl.tk/software/tcltk/7.6.html)才出现。安装最新版本并检查代码是否有效。

# gcc - Cygwin-to-Linux 交叉编译 gcc 失败，因为它找不到共享库，但它没有告诉我哪个

> ID：13699062
> 
> 赞同：2
> 
> 时间：2012-12-04T08:51:21.867
> 
> 标签：gcc, cygwin, cross-compiling

[我从Cygwin Ports Project](http://sourceware.org/cygwinports/)获得并安装了 Cygwin-to-Linux 交叉编译器，并试图用它来编译一个简单的“Hello world”程序。然后会发生这种情况：

```
$i686-pc-linux-gnu-gcc main.c
/usr/bin/i686-pc-linux-gnu-g++.exe: error while loading shared libraries: ?: cannot open shared object file: No such file or directory 
```

显然，GCC 找不到一些 DLL。不幸的是，它没有打印出哪个，我不知道如何才能找到。

这甚至发生在我尝试一些简单的事情，比如`i686-pc-linux-gnu-gcc -E`在一个 C 文件上运行预处理器（通过`return 0`.

此 GCC 版本为 4.7.2。

有人知道我该如何解决这个问题吗？或者至少我怎么能找到找不到的库的名称？

# razor - MVC 4 Bootstrap 模态编辑\详细信息

> ID：13699068
> 
> 赞同：8
> 
> 时间：2012-12-04T08:51:42.550
> 
> 标签：razor, twitter-bootstrap, asp.net-mvc-4, modal-dialog

希望有人可以帮助我解决我正在使用引导程序在 MVC 4 中尝试的东西。

我有一个强类型索引视图，它在表格中显示项目以及每行中的编辑和删除操作图标。

```
@model IEnumerable<Models.EquipmentClass>

....

@foreach (var item in Model)
{
<tbody>
    <tr>
        <td>
            @item.ClassId
        </td>
        <td>
            @item.ClassName
        </td>
        <td>
            <a href=@Url.Action("Edit", "EquipmentClass", new { id = item.ClassId })>
                <i class="icon-edit"></i>
            </a>
            <a href=@Url.Action("Delete", "EquipmentClass", new { id = item.ClassId })>
                <i class="icon-trash"></i>
            </a>
        </td>
    </tr>
</tbody>
} <!-- foreach --> 
```

EquipmentClass 控制器根据 id 返回所选项目的编辑视图。一切都很好，正如预期的那样

```
public ViewResult Edit(int id)
{
    return View(equipmentclassRepository.Find(id));
} 
```

我想知道的是如何在引导模式对话框中打开编辑表单。

我可以尝试用以下内容替换表中的编辑操作，然后在视图底部有一个模态 div，但是如何传递所选项目的 ID 以及我应该在模态部分使用哪个 html 助手？

```
<!-- replaced table action -->
<a class="btn pull-right" data-toggle="modal" href="#myModal" >Details</a>

....

<!-- modal div -->
<div class="modal hide fade in" id="myModal" )>
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">×</button>
        <h3>Modal header</h3>
    </div>
    <div class="modal-body">
        @Html.Partial("Edit")
    </div>
    <div class="modal-footer">
        <a href="#" class="btn" data-dismiss="modal">Close</a>
        <a href="#" class="btn btn-primary">Save changes</a>
    </div>
</div> 
```

非常感谢任何建议，非常感谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-12T22:34:22.770

我认为我有解决您问题的方法。要使您的 MVC 应用程序按您的意愿工作，您应该对您提供的代码进行一些更改：

**1.**在布局页面的底部添加一个表示用于编辑项目的模式的*div ：*

```
<div id="editModalContainerID" class="modal hide fade" data-url='@Url.Action("Edit", "EquipmentClass")'> 
<div id="editModalBodyID"></div> 
</div> 
```

请注意，此模式严格连接到负责编辑*EquipmentClass*项的控制器操作。

**2.**为您的自定义 javaScript添加一个*jQuery函数：*

```
function showModal(modalContainerId, modalBodyId, id) {
    var url = $(modalContainerId).data('url');

    $.get(url, { id: id }, function (data) {
        $(modalBodyId).html(data);
        $(modalContainerId).modal('show');
    });
} 
```

如您所见，此函数将*id*作为其参数之一。一般来说，它的目的是用我们将放置在单独的局部视图中的内容替换空的模态体，而不是将整个容器显示为模态页面。

**3.**将您的模态 div 放在一个单独的局部视图中，并将其命名为*Edit*（必须与您的控制器操作名称相同）。您将不得不将您的*Edit*部分名称更改为其他名称，例如*EditBody*。

*编辑*部分视图现在应该看起来像这样：

```
@model EquipmentClass

<!-- modal div -->
<div class="modal-header">
    <button type="button" class="close" data-dismiss="modal">×</button>
    <h3>Modal header</h3>
</div>
<div class="modal-body">
    @Html.Partial("EditBody", Model)
</div>
<div class="modal-footer">
    <a href="#" class="btn" data-dismiss="modal">Close</a>
    <a href="#" class="btn btn-primary">Save changes</a>
</div> 
```

**4.**更改控制器操作，使其返回在上一步中创建的局部视图：

```
public PartialViewResult Edit(int id)
{
    return PartialView(equipmentclassRepository.Find(id));
} 
```

**5.**更改*编辑*“a”锚点，使其调用创建的*jQuery*函数：

```
@model IEnumerable<Models.EquipmentClass>

....

@foreach (var item in Model)
{
<tbody>
    <tr>
        <td>
            @item.ClassId
        </td>
        <td>
            @item.ClassName
        </td>
        <td>
            <a data-toggle="modal" onclick="showModal('#editModalContainerID', '#editModalBodyID', @item.ClassId)">
                <i class="icon-edit"></i>
            </a>
            <a href=@Url.Action("Delete", "EquipmentClass", new { id = item.ClassId })>
                <i class="icon-trash"></i>
            </a>
        </td>
    </tr>
</tbody>
} <!-- foreach --> 
```

这样，每次单击带有编辑图标的“a”锚时，都会触发 showModal 函数（传递相关 id）并显示带有相关数据的引导模式。

我确信有更好的方法来做到这一点，但这种方法对我来说很好:)

希望这对您有所帮助:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-05T03:23:01.760

Przemo 答案对我有用，但是请注意，当我将第一块代码从

```
<div id="editModalContainerID" class="modal hide fade" data-url='@Url.Action("Edit", "EquipmentClass")'> 
<div id="editModalBodyID"></div> 
</div> 
```

至

```
<div id="editModalContainerID" class="modal fade" data-url='@Url.Action("Edit", "EquipmentClass")'> 
<div id="editModalBodyID"></div> 
</div> 
```

请注意，我从 editModalContainerID 中删除了“淡入淡出”类。否则不加载局部视图。希望这可以帮助其他有同样问题的人。

# unix - 在mysql中将unix时间戳转换为人类可读的时间

> ID：13699069
> 
> 赞同：2
> 
> 时间：2012-12-04T08:51:42.700
> 
> 标签：unix, timestamp, unix-timestamp, epoch

在运行 mysql 命令时，我们正在尝试将 unix 时间戳转换为人类可读的时间。对于 unix 日期，我们有这个工作命令

```
select FROM_UNIXTIME(registered) AS "ResolutionDateLine" from tickets 
```

这给了我们一个可读的日期，比如

```
2012-12-03 09:41:00 
```

但是我们也有需要转换的 unix 时间戳“秒”，使用与上面相同的行我们得到 1970-01-01 01:00:00 但实际值​​应该是 89 天 23 小时 22 分钟和 34秒。

然后我们尝试了

```
select FROM_UNIXTIME(firstresponsetime, "%dd, %Hh, %Im") AS "Response" from tickets 
```

结果：

```
01d, 00h, 12m 
```

有谁知道如何在 mysql 命令中正确转换它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T21:34:42.870

使用 SEC_TO_TIME ( [http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_sec-to-time](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_sec-to-time) ) 以秒为单位将持续时间转换为 HH:mm:ss符号。

选择秒到时间（3500）；结果 00:58:20

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-02T07:22:02.343

你会像

```
 select FROM_UNIXTIME(firstresponsetime, '%d-%m-%Y %H:%i:%s') AS Response from tickets 
```

或者您可以通过更改第二个参数来自定义它。

有关更多信息，请查看以下链接：- [http://dev.mysql.com/doc/refman/5.7/en/date-and-time-functions.html#function_from-unixtime](http://dev.mysql.com/doc/refman/5.7/en/date-and-time-functions.html#function_from-unixtime)

# scala - 如何展平嵌套元组？

> ID：13699070
> 
> 赞同：22
> 
> 时间：2012-12-04T08:51:52.770
> 
> 标签：scala, tuples, flatten

我有一个嵌套的元组结构`(String,(String,Double))`，我想将它转换为`(String,String,Double)`. 我有各种嵌套元组，我不想手动转换每个。有什么方便的方法吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-04T09:19:09.257

如果你使用[shapeless](https://github.com/milessabin/shapeless)，我认为[这](https://github.com/milessabin/shapeless/blob/master/examples/src/main/scala/shapeless/examples/flatten.scala)正是你所需要的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-04T09:17:27.040

元组上没有展平。但是如果你知道结构，你可以这样做：

```
implicit def flatten1[A, B, C](t: ((A, B), C)): (A, B, C) = (t._1._1, t._1._2, t._2)
implicit def flatten2[A, B, C](t: (A, (B, C))): (A, B, C) = (t._1, t._2._1, t._2._2) 
```

这将使任何类型的 Tuple 变平。您还可以将隐式关键字添加到定义中。这仅适用于三个元素。你可以像这样展平元组：

```
(1, ("hello", 42.0))   => (1, "hello", 42.0)
(("test", 3.7f), "hi") => ("test", 3.7f, "hi") 
```

多个嵌套的 Tuple 不能展平到地面，因为返回类型中只有三个元素：

```
((1, (2, 3)),4)        => (1, (2, 3), 4) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-19T09:31:24.943

不确定这样做的效率，但您可以转换`Tuple`为`List`with `tuple.productIterator.toList`，然后`flatten`是嵌套列表：

```
scala> val tuple = ("top", ("nested", 42.0))
tuple: (String, (String, Double)) = (top,(nested,42.0))

scala> tuple.productIterator.map({
     |   case (item: Product) => item.productIterator.toList
     |   case (item: Any) => List(item)
     | }).toList.flatten
res0: List[Any] = List(top, nested, 42.0) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-03-08T22:53:45.843

*[以上答案的](https://stackoverflow.com/a/13699521/8932910)补充*

**粘贴此实用程序代码：**

```
import shapeless._
import ops.tuple.FlatMapper
import syntax.std.tuple._
trait LowPriorityFlatten extends Poly1 {
  implicit def default[T] = at[T](Tuple1(_))
}
object flatten extends LowPriorityFlatten {
  implicit def caseTuple[P <: Product](implicit lfm: Lazy[FlatMapper[P, flatten.type]]) =
    at[P](lfm.value(_))
} 
```

**那么你就可以展平任何嵌套的元组：**

```
scala> val a = flatten(((1,2),((3,4),(5,(6,(7,8))))))
a: (Int, Int, Int, Int, Int, Int, Int, Int) = (1,2,3,4,5,6,7,8) 
```

* * *

> 请注意，此解决方案不适用于自定义`case class`类型，它将`String`在输出中转换为。
> 
> ```
> scala> val b = flatten(((Cat("c"), Dog("d")), Cat("c")))
> b: (String, String, String) = (c,d,c) 
> ```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-02T13:57:59.817

在我看来，简单的模式匹配会起作用

```
scala> val motto = (("dog", "food"), "tastes good")
val motto: ((String, String), String) = ((dog,food),tastes good)

scala> motto match {
     | case ((it, really), does) => (it, really, does)
     | }
val res0: (String, String, String) = (dog,food,tastes good) 
```

或者，如果您有一组这样的元组：

```
scala> val motto = List(
     | (("dog", "food"), "tastes good")) :+ (("cat", "food"), "tastes bad")
val motto: List[((String, String), String)] = List(((dog,food),tastes good), ((cat,food),tastes bad))

scala> motto.map {
     | case ((one, two), three) => (one, two, three)
     | }
val res2: List[(String, String, String)] = List((dog,food,tastes good), (cat,food,tastes bad)) 
```

我认为即使您有几个案例也会很方便。

# svn - svn 存储库因构建而失控

> ID：13699074
> 
> 赞同：2
> 
> 时间：2012-12-04T08:52:12.863
> 
> 标签：svn, build, backup, svnadmin, svndumpfilter

我的存储库大小有问题，我的存储库变得失控，因为我们的项目组有一次决定将我们的构建也保留在 svn 中，每个二进制文件大约 30 MB，repo 的每日备份需要 4-5 GB在数百人签入之后。备份存储库并将其复制到每天备份的网络位置变得非常困难。

*   保存每个构建的备份的最佳做法是什么？

*   我可以创建一个 svn 提交触发器，将构建压缩并复制到某个地方，而不是把它放到 svn 中吗？

*   如何缩小我的回购规模？

*   我可以用 svn 命令摆脱一些旧的二进制文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T09:04:23.937

> 保存每个构建的备份的最佳做法是什么？

不要做。SVN（和所有/大多数其他版本控制系统（VCS））旨在通过使用/存储差异来有效地存储文本文档（源代码）。这不适用于二进制文件。

> 我可以创建一个 svn 提交触发器，将构建压缩并复制到某个地方，而不是把它放到 svn 中吗？

可能，但这是一个重大的黑客攻击，（可能）需要在每台具有存储库结帐的计算机上完成。如果您想在签出存储库时再次检索这些 zip，那就更麻烦了。

> 如何缩小我的回购规模？
> 
> 我可以用 svn 命令摆脱一些旧的二进制文件吗？

一旦您向 SVN（和大多数其他 VCS）提交了某些内容，它就会保留下来，您就无法修改历史记录。也就是说，您可以创建一个新的存储库，可以将所有更改复制到它（有一些工具可以用来保存提交消息）。也许可以重新提交所有内容（没有构建）并从那时起使用该存储库。（确保所有项目合作伙伴签出新存储库以防止出现问题）

正如您所注意到的，将所有派生文件（构建）存储在 VCS 中并不是一件好事。为了重现性，您可以存储构建信息，例如所用工具的版本号。因此，如果需要，始终可以重建特定的构建。

使用仅包含最新版本的共享位置，以便所有项目合作伙伴都能够看到/尝试这个最新版本。

但是，不要再将它存储在 VCS 中！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T17:54:07.157

> 保存每个构建的备份的最佳做法是什么？

为每项任务使用正确的工具。*源代码管理*可以管理构建的工件，但是 - 效果很差。使用工件管理器完成这项工作

> 我可以创建一个 svn 提交触发器，将构建压缩并复制到某个地方，而不是把它放到 svn 中吗？

是的，**理论上**你可以在钩子中做任何事情（构建、归档、部署），但是（再次）特殊工具可以为最终用户更轻松、更顺利地完成它（阅读“Jenkins”、“Maven”）

> 如何缩小我的回购规模？

创建转储，杀死转储中不需要的修订，恢复完善的转储

> 我可以用 svn 命令摆脱一些旧的二进制文件吗？

你不能用客户端工具来做，只能用 svnadmin-|dumpfilter-hacking dump

# java - 调用没有名称的 Java 方法

> ID：13699075
> 
> 赞同：102
> 
> 时间：2012-12-04T08:52:12.660
> 
> 标签：java, initializer

我正在查看下面的代码，发现有些奇怪：

```
public class Sequence {
    Sequence() {
        System.out.print("c ");
    }

    {
        System.out.print("y ");
    }

    public static void main(String[] args) {
        new Sequence().go();
    }

    void go() {
        System.out.print("g ");
    }

    static {
        System.out.print("x ");
    }
} 
```

我本以为这会产生编译错误，因为`System.out`with "y" 不属于方法声明，只是`{ }`. 为什么这是有效的？我不知道如何或应该调用此代码。

运行它时它`x y c g`也会产生，为什么`static { }`在序列构造函数之前调用 get ？

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2012-12-04T08:56:24.853

这：

```
static {
    System.out.print("x ");
} 
```

是一个*静态初始化块*，在类加载时调用。你可以在你的类中拥有任意数量的它们，它们将按照它们的出现顺序（从上到下）执行。

这：

```
{
   System.out.print("y ");
} 
```

是一个*初始化块*，代码被复制到类的每个构造函数的开头。因此，如果您的类有许多构造函数，并且它们都需要在开始时做一些共同的事情，那么您只需编写一次代码并将其放入像这样的*初始化块*中。

因此，您的输出非常有意义。

正如[Stanley](https://stackoverflow.com/users/1535679/stanley)在下面评论的那样，有关更多信息，请参阅[Oracle 教程中描述初始化块的部分。](http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-12-04T08:56:35.063

它不是一个方法，而是一个**初始化块**。

```
{
    System.out.print("y ");
} 
```

它将在构造函数调用之前执行。尽管

```
static {
    System.out.print("x ");
} 
```

是类加载器加载类时执行的**静态初始化块。**

所以当你运行你的代码时

1.  类由类加载器加载，因此执行静态初始化块
    输出：x 被打印
2.  创建对象，因此执行初始化块，然后调用构造函数
    输出：打印 y 后跟 c
3.  调用 main 方法，然后调用 go 方法
    输出：g 被打印

最终输出：xycg
这可能会有所帮助[http://blog.sanaulla.info/2008/06/30/initialization-blocks-in-java/](http://blog.sanaulla.info/2008/06/30/initialization-blocks-in-java/)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-12-04T08:57:16.913

这是一个**实例初始化块**，后跟一个**静态初始化块**。

```
{
    System.out.print("y ");
} 
```

当您创建类的实例时被调用。

```
static {
    System.out.print("x ");
} 
```

当类被类加载器加载时被调用。所以当你这样做时

```
new Sequence().go(); 
```

类被加载，所以它执行`static {}`，然后它执行实例初始化块`{}`，然后调用构造函数的主体，然后是新创建的实例上的方法。因此输出`x y c g`。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-12-04T08:58:36.237

```
static {
        System.out.print("x ");
    } 
```

是一个**静态块**，在类加载期间被调用

```
{
    System.out.print("y ");
} 
```

是一个**初始化块**

您可以在一个类中有多个初始化块，在这种情况下，它们会按照它们在类中出现的顺序执行。

**请注意，类中存在的任何初始化块都在构造函数之前执行。**

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-12-04T09:04:59.040

```
static {
      System.out.print("x ");
} 
```

是一个由类共享的初始化块（如 所示`static`），它首先被执行。

```
{
        System.out.print("y ");

} 
```

是一个由类的所有对象（构造函数）共享的初始化块，接下来是。

```
Sequence() {
        System.out.print("c ");
} 
```

是该类的特定构造函数，第三个执行。每次执行构造函数时都会首先调用实例初始化块。这就是为什么“y”出现在“c”之前的原因。

```
void go() {
        System.out.print("g ");
} 
```

只是一个实例方法，它与使用上面的构造函数构造的对象相关联，后者位于最后。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2012-12-04T08:57:29.890

```
{
    System.out.print("y ");
} 
```

这些类型的块称为**`initializer block`**. 每次创建`class`. 在编译时，此代码被移动到类的每个构造函数中。

在**`static initializer`**块的情况下： -

```
static {
    System.out.println("x ");
} 
```

它在加载类时执行一次。我们一般`static`在初始化一个字段的时候使用initializer block `static`，需要多个步骤。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2012-12-04T08:59:01.710

它用作**初始化块**并在任何**静态声明**之后运行。**与Singleton**设计模式一样，它可用于确保没有其他人可以创建类的实例（与使用私有构造函数的方式相同） 。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-12-04T08:56:19.470

```
static {
    System.out.print("x ");
} 
```

`Static blocks`仅在 JRE**加载**和初始化类时执行一次。

**每次创建新实例**`non-static`时都会调用块，并且会在构造函数之前调用它。

 **在这里，您只创建了 1 个`Sequence`如此构造的实例，已在`non-static`块之后调用，然后是实际目标的方法。**

# ios - 如何修改 Unity 自动生成的 xCode 项目？

> ID：13699082
> 
> 赞同：3
> 
> 时间：2012-12-04T08:52:33.820
> 
> 标签：ios, xcode, unity3d

我创建了一个 Unity 项目并生成了一个 xCode 项目。我应该将一些框架或静态库添加到 xCode 项目中以使其运行。所以我想让这个进程自动进行。

我找到了一些工具来修改 xCode 项目。如“Mod PBXProj”： [https ://bitbucket.org/darktable/mod-pbxproj/src](https://bitbucket.org/darktable/mod-pbxproj/src)

我的问题是，在Unity项目生成xCode项目后，如何调用工具（如“Mod PBXProj”）来修改xCode项目。或者有没有其他方法可以修改项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:19:45.850

如果您将 Unity 应用程序作为文件夹打开，则会有一个 xCode 项目文件夹，Unity 只是在构建时复制。您可以在那里添加任何您想要（或替换）的文件，并且在每个新版本中，您都可以使用修改后的文件。

# jquery - 如何向 Colorbox 模式窗口添加填充？

> ID：13699090
> 
> 赞同：0
> 
> 时间：2012-12-04T08:53:17.410
> 
> 标签：jquery, css, colorbox

是否可以向 Colorbox 模式窗口添加填充？我想在模态窗口边缘和内容之间留一些空间。我尝试了`innerWidth`and`innerHeight`属性，但我没有看到任何区别。

```
// Display inline content in Colorbox window
$(".inline").colorbox({
    inline: true, 
    fixed: true,
    height: "80%",
    width: "80%",
    innerWidth: "50%",
    innerHeight: "50%"
}); 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T10:34:24.547

要向模态窗口添加填充，我不会通过 jQuery 设置或在 html 中设置它的样式。我建议通过更改提供的 CSS 文件中的用户样式部分来做到这一点。例如，向#colorbox 选择器添加填充或向#cboxContent 选择器添加边距。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:19:36.130

据我所知，这是不可能的。您需要设置加载内容的填充。例如，如果您的内联内容`#content you`可以简单地执行以下操作：

```
<div id="content" style="padding: 20px;">bla bla bla</div> 
```

# dynamic - 动态ckeditor工具栏

> ID：13699095
> 
> 赞同：1
> 
> 时间：2012-12-04T08:53:28.930
> 
> 标签：dynamic, ckeditor, config, toolbox

我想根据用户类型和某些条件设置 ckeditor 工具栏。

我部分完成如下：

```
switch(UserMode)
{
    case "1":
        config.toolbar_MyTool = [
            ['Find', 'SelectAll'], ['Anchor'], ['Maximize']
        ];
        break;
    case "2":
        config.toolbar_MyTool = [
            ['Find'], ['Anchor'], ['Maximize']
        ];
        break;
} 
```

基于用户模式的代码很长，所以我想创建一个数组，我只想分配工具栏，如下所示：

```
config.toolbar_MyTool = myToolArray; 
```

我也想检查自己的帖子或其他人的帖子。如果是自己的帖子，我想另外添加一些工具。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T10:20:34.370

您将从在**config.js中定义不同的工具栏开始**

```
config.toolbar_MyToolUserMode1 = [
        ['Find', 'SelectAll'], ['Anchor'], ['Maximize']
    ];

config.toolbar_MyToolUserMode2 = [
        ['Find'], ['Anchor'], ['Maximize']
    ]; 
```

这些工具栏定义可以稍后**在您的页面**中使用，但请注意，一旦您创建了 CKEditor 的实例，工具栏布局就不能更改：

```
CKEDITOR.config.toolbar = "MyToolUserMode1";
var instance = CKEDITOR.appendTo(parentElement); 
```

**解决方案1：**

您必须创建一个新实例来动态更改工具栏：

```
switch(UserMode)
{
case "1":
    if (instance) instance.destroy();
    CKEDITOR.config.toolbar = "MyToolUserMode1";
    instance = CKEDITOR.appendTo(parentElement);
    break;
case "2":
    if (instance) instance.destroy();
    CKEDITOR.config.toolbar = "MyToolUserMode2";
    instance = CKEDITOR.appendTo(parentElement);
    break;
} 
```

**解决方案2：**

但是，如果您对在用户模式 ​​2 中也显示完整工具栏并将 SelectAll-Button 变灰感到满意，那么以下可能是您的解决方案：

```
CKEDITOR.config.toolbar = "MyToolUserMode1";
var instance = CKEDITOR.appendTo(parentElement);

switch(UserMode)
{
case "1":
    instance.getCommand('selectAll').enable();
    break;
case "2":
    instance.getCommand('selectAll').disable();
    break;
} 
```

[编辑 2 月 15 日]

**解决方案3：**

根据您的评论-> 如何使用 array.push 动态构建

**config.js 中不需要配置**

```
 // your code
    var myToolbarSection1 = new Array();
    myToolbarSection1.push('Bold');
    myToolbarSection1.push('Italic');

    // attaching this section to toolbar
    var myToolbar = new Array();
    myToolbar.push(myToolbarSection1);

    // setting the toolbar
    CKEDITOR.config.toolbar_Dynamic = myToolbar;
    CKEDITOR.config.toolbar = 'Dynamic';

    var instance = CKEDITOR.appendTo('myDIVID'); 
```

# scala - sbt 0.11.3：获取最新版本的 git 插件

> ID：13699096
> 
> 赞同：7
> 
> 时间：2012-12-04T08:53:35.153
> 
> 标签：scala, version-control, sbt

我有一个使用 sbt 0.11.3 构建的多项目结构。我想集中我的依赖版本、项目版本、工件、shell 提示等内容。这对我的发布管理和版本控制计划非常有帮助。所以我创建了一个插件并将我的全局配置放在那里。我的项目从 github 读取它并将其构建为插件。一切都很可爱。

> ./project/project/Build.scala

```
import sbt._

object PluginDef extends Build {
    override lazy val projects = Seq(root)
    lazy val root = Project("plugins", file(".")) dependsOn(versionPlugin)
    lazy val versionPlugin = uri("git://github.com/config.git") //changed the uri here
} 
```

所以 sbt 会获取插件的最新版本（如果还没有的话）。将该版本缓存在*~/.sbt/staging/somehashcode*中。但是当插件项目发生变化时，我无法让它更新项目。我会在需要时手动去更新它。可悲的是，在一个 20 人的团队中，它引起了一些问题。

我们如何让它检查插件更新？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T06:53:50.973

我还没有尝试过，但以下可能有效。

### 刷新插件

1.  更新到 sbt 0.12.1，修复了`update`
2.  然后从 sbt 外壳：

    ```
    > reload plugins
    > update
    > reload return 
    ```

### 指定特定的树

在某些情况下，将源依赖关系固定到特定时间点可能会有所帮助。如果是这样，您可以将提交哈希或标记添加为`"git://github.com/config.git#hash"`.

# .net - 在控制器文件夹中添加子文件夹 - .net webapi

> ID：13699097
> 
> 赞同：11
> 
> 时间：2012-12-04T08:53:40.863
> 
> 标签：.net, asp.net-web-api

有没有办法在 Webapi 项目的 Controller 文件夹中添加子文件夹？

我正在考虑诸如 Controller/Customer 之类的东西，包括 Customer 模块的控制器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T16:29:51.133

控制器不以这种方式工作。在 Asp.NET 中，您的文件夹结构就是您的网站结构。在 WEB API 中，控制器的查找独立于结构。事实上，您可以将它们放在不同的程序集中，框架仍然可以找到它们。路由不会按您期望的方式工作。您可以添加一条路线，其中包含您的“文件夹名称”，就像您说的那样， `localhost/WebApp/{foldername}/{controller}`. 只能`{foldername}`是普通的静态文件夹名称 ( `localhost/WebApp/foldername/{controller}`)。所以客户端将不得不在其中调用带有“文件夹名”的 url，但代码的位置并不重要，因为 MVC 框架不会区分控制器下的文件夹树。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T11:40:42.817

我使用区域来解决这个问题。如此处指定 [http://blogs.infosupport.com/asp-net-mvc-4-rc-getting-webapi-and-areas-to-play-nicely/](http://blogs.infosupport.com/asp-net-mvc-4-rc-getting-webapi-and-areas-to-play-nicely/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-02T06:07:15.853

我为自己解决这个问题所做的是添加另一个 Maproute 并在控制器之前添加命名空间。只需注意两点：

1.  您的新路线应该在默认路线之前
2.  您不能为默认名称添加名称空间

    ```
     routes.MapRoute(
           name: "Secretariat",
           url: "{namespace}/{controller}/{action}/{id}",
           defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
       ); 
    ```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-04-20T23:26:57.973

这里的答案是错误的。你可以很容易地做到这一点。你只需要在你的控制器类上指定路由：

位于`/Controllers/Authentication`文件夹中

```
//An example of you specifying a diff. route than the folder path
[Route("api/login")]
public class LoginController {...} 
```

# architecture - 分层架构和封装

> ID：13699098
> 
> 赞同：1
> 
> 时间：2012-12-04T08:53:43.667
> 
> 标签：architecture, encapsulation, layered

我正在开发一个项目，最终它将成为一个网络应用程序。但我正在尝试对业务对象和数据访问采用一种分层方法，我在一个空白解决方案中创建了以下类库项目：

```
MyCompany.MyProject.Repository
MyCompany.MyProject.Model
MyCompany.MyProject.Service 
```

MyCompany.MyProject.Repository 引用了 MyCompany.MyProject.Model MyCompany.MyProject.Service 引用了 MyCompany.MyProject.Model 和 MyCompany.MyProject.Repository。

我的这个小框架将来会被多个应用程序使用，所以我将它们分别创建到 Web 应用程序中。

我有两个问题：

1.  关于分层应用程序这种方法是否正确，Web 应用程序（或任何需要使用我的框架的应用程序）将需要在其 Bin 目录中包含所有三个 DLL - 我是否正确理解这一点？

2.  MyCompany.MyProject.Model 项目包含我的所有业务对象。关于封装 - 例如我有一个 Customer 对象：

    公共类客户

    私有 _customerID 作为 Int32

    公共属性 CustomerID() As Int32 Get Return _customerID End Get Friend Set(ByVal value As Int32) _customerID = value End Set End Property

    结束类

这是我认为应该公开客户对象 ID 的方式，因为设置客户 ID 上的 Friend 访问修饰符应该只能由框架在内部设置，并且只能由 Web 外部读取应用程序或将来创建的任何其他应用程序。但是因为我的代码在单独的类库项目中，例如 MyCompany.MyProject.Repository 无法访问它，即使我的命名空间也效仿。

这似乎不符合我对封装的理解，我在这里做错了什么？

非常感谢您的帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T15:27:50.900

你描述的场景比较常见。在这种情况下，我更喜欢使用朋友程序集。它们允许访问内部（.net）或朋友（VB）成员。[您可以在此处](http://msdn.microsoft.com/en-us/library/0tke9fxk.aspx)找到有关朋友组件的更多信息。

希望能帮助到你！

# ajp - ajp 连接器在 tomcat 5.0.3 中设置数据包大小

> ID：13699102
> 
> 赞同：1
> 
> 时间：2012-12-04T08:54:01.087
> 
> 标签：ajp, tomcat5

我有 tomcat 5.0.3，在链接中提到该属性可用于 tomcat 5.5 及更高版本。

属性 packetSize 仅在 Tomcat 5.5.20+ 和 6.0.2+ 中可用。

如何在 tomcat 5.0.3 中增加数据包大小？？

# jquery - 将一个 jquery 移动页面嵌入到另一个页面中（没有 iFrame）

> ID：13699105
> 
> 赞同：1
> 
> 时间：2012-12-04T08:54:05.210
> 
> 标签：jquery, mobile, embed

我有一个 jquery 移动页面，其中包含一个列表视图。是否可以减小其大小并将其嵌入到没有 iFrame 的另一个页面中？我尝试将它包装在一个 div 中，但我遇到了一些问题，比如在幻灯片转换期间，下一页出现在右侧然后幻灯片，如果我将 div 溢出设置为隐藏。将它嵌入 iFrame 会给我与某些移动浏览器（如 Android 2.3 股票浏览器）不兼容的问题。

抱歉我的英语不好，感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T13:48:17.673

我解决了将页面包装成 2 个 div 的问题，外层的大小受 CSS 限制

# css - HTML 网站图像周围的边框

> ID：13699107
> 
> 赞同：2
> 
> 时间：2012-12-04T08:54:12.700
> 
> 标签：css, html, web

我在我的网络项目网站上设置了一个较小的图片库：

[http://younani.com/finalsite/gallery.html](http://younani.com/finalsite/gallery.html)

对我来说，这些照片的坐姿并不好看。有没有办法在图片之间及其周围放置边框。让它看起来更有条理？我试图给它加边框，但它只是将图片移动到整个脚本中，我无法在两者之间设置边框。

CSS：

```
#header {
    margin: 0 auto;
    width: 1150px;
}

#container {

     background-color: #FAFAFA;
     color: #003300;
     font-family: Arial, Helvetica, sans-serif; background-position: center; background-size: cover;

}

#h2 {text-align: center;}

#container {
          margin-right:auto;
          margin-left:auto;
          background-image:url('backgroundflower5.jpg');
          min-width:1000px;
          max-width:1000px;
          padding:0px 70px 50px 70px;
          border:1px ridge #000000;
          border-radius:20px;
          -webkit-box-shadow:inset -3px -3px -3px 3px #18cad0;
          -moz-box-shadow:inset -3px -3px 3px 3px #00332B;
          box-shadow:inset -3px -3px 1px .9px black;
            width: 960px;
            margin: 0 auto;
        }

        #container div {

        }

        #header {}

#center2 {
            float: left;
            margin: 10px 0 10px 20px;
            min-width: 200px; width: 494px; border-radius:8px; 
        }

#center2 img
        {
        opacity:0.5;
        -webkit-transition: opacity 1s linear;
        }

#center2 img:hover
        {
        opacity:1.0;
        -webkit-transition: opacity 1s linear;
        }

#centerO {float: left;
            margin: 10px 0 10px 20px;

            min-width: 200px; font-family: "Comic Sans MS", cursive, sans-serif; background-color: #FFFFFF;
            width: 494px; border-radius:8px; text-align: left; box-shadow:inset 1px 1px 10px 1px #000000; }

#center {box-shadow:inset 1px 1px 10px 1px #000000;}

        #left,
        #center,
        #right {
            float: left; margin: 10px 0 10px 20px;

            min-width: 200px;
        }

        #center {font-family: "Comic Sans MS", cursive, sans-serif; background-color: #FFFFFF;
            width: 494px; border-radius:8px; text-align: center;
        } 

        .clear {
            clear: both;
        }

#right2 {float: left;
            margin: 10px 0 10px 20px; border: 0px;

            min-width: 200px;}

#right { font-family: Impact, Charcoal, sans-serif; border-radius:8px; background-color: #FFFFFF; box-shadow:inset 1px 1px 10px 1px #000000; text-align: center;}

#left a {font-family: Arial, Helvetica, sans-serif;
    font-size: 14px;
    color: #ffffff;
        display: block;
    padding: 10px 20px;
    background: -moz-linear-gradient(
        top,
        #ffffff 0%,
        #2a07ed);
    background: -webkit-gradient(
        linear, left top, left bottom, 
        from(#ffffff),
        to(#2a07ed));
    -moz-border-radius: 30px;
    -webkit-border-radius: 30px;
    border-radius: 30px;
    border: 3px solid #ffffff;
    -moz-box-shadow:
        0px 3px 11px rgba(000,000,000,0.5),
        inset 0px 0px 1px rgba(026,020,219,1);
    -webkit-box-shadow:
        0px 3px 11px rgba(000,000,000,0.5),
        inset 0px 0px 1px rgba(026,020,219,1);
    box-shadow:
        0px 3px 11px rgba(000,000,000,0.5),
        inset 0px 0px 1px rgba(026,020,219,1);
    text-shadow:
        0px -1px 0px rgba(000,000,000,0.2),
        0px 1px 0px rgba(255,255,255,0.3);
}

figure{}

#left a:link { background-color: #E6E6E6; }
#left a:visited { background-color: #E6E6E6; }
#left a:hover {border: 3px inset #333333; }

#left ul { list-style-type: none;
          margin: 0;
          padding-left: 0; }

#footer { text-align: center; font-family: Audimat;
    clear: both; width:38%;
        border-radius: 8px;
        background-color:white;
        text-align:center; margin-right:auto;
        margin-left:auto; } 
```

HTML：

```
<!DOCTYPE html>

<html lang="en">

<head>

   <title>Younani Flower's</title>

   <meta charset="utf-8">

   <link rel="stylesheet" href="final.css" />

</head>

<body>
<div id="header"><img src="header88.png" alt="header" height="200" width="1150" /></div>
<div id="container" class="clearfix"><!-- Header --> <!-- Left Column -->
<div id="left">
<ul>
<li><a href="finalindex.html">Home</a></li>
<li><a href="gallery.html">Gallery</a></li>
<li><a href="occasions.html">Occasions</a></li>
<li><a href="aboutus.html">About Us</a></li>
<li><a href="contactus.html">Contact Us</a></li>
</ul>
</div>
<!-- Center Column -->
<div id="center2"><a href="Meadowthistlebig.jpg" target="_blank"><img src="Meadowthistle.jpg" height="113" width="150" alt="" /> </a>&nbsp;&nbsp;&nbsp; <a href="saffronbig.jpg" target="_blank"><img src="saffron.jpg" height="113" width="150" alt="" /> </a>&nbsp;&nbsp;&nbsp; <a href="dahliasbig.jpg" target="_blank"><img src="dahlias.jpg" height="113" width="150" alt="" /> </a><a href="bachelorbuttonbig.jpg" target="_blank"><img src="bachelorbutton.jpg" height="113" width="150" alt="" /> </a><a href="dahliasbig.jpg" target="_blank">&nbsp;&nbsp;&nbsp; </a><a href="hrysanthemumbig.jpg" target="_blank"><img src="hrysanthemum.jpg" height="113" width="150" alt="" /> </a><a href="dahliasbig.jpg" target="_blank">&nbsp;&nbsp;&nbsp; </a><a href="PinkLilybig.jpg" target="_blank"><img src="PinkLily.jpg" height="113" width="150" alt="" /> </a><a href="dahliasbig.jpg" target="_blank"></a><a href="pinkrosesbig.jpg" target="_blank"><img src="pinkroses.jpg" height="113" width="150" alt="" /> </a><a href="dahliasbig.jpg" target="_blank">&nbsp;&nbsp;&nbsp;&nbsp;</a><a href="RectifiedFlowers.jpg" target="_blank"><img src="RectifiedFlowers.jpg" height="113" width="150" alt="" /> </a><a href="dahliasbig.jpg" target="_blank">&nbsp;&nbsp;&nbsp;&nbsp;</a><a href="rhodendronbig.jpg" target="_blank"><img src="rhodendron.jpg" height="113" width="150" alt="" /> </a><a href="gazaniadaisybig.jpg" target="_blank"><img src="gazaniadaisy.jpg" height="113" width="150" alt="" /> </a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="GreenFlower.jpg" target="_blank"><img src="GreenFlower3.jpg" height="113" width="150" alt="" /> </a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="nellwernerbig.jpg" target="_blank"><img src="nellwerner.jpg" height="113" width="150" alt="" /> </a></div>
<!-- Right Column -->
<div id="right">
<p><strong><span style="text-decoration: underline;">Meaning of Flower Colors</span><strong></strong></strong></p>
<p>Pink&nbsp;&nbsp;&nbsp;Caring</p>
<p>Purple&nbsp;&nbsp;&nbsp;Royalty</p>
<p>Red&nbsp;&nbsp;&nbsp;Declaration of love</p>
<p>Yellow&nbsp;&nbsp;&nbsp;Hopelessly in love</p>
<p>Violet&nbsp;&nbsp;&nbsp;Faithfulness</p>
<p>Red &amp; White&nbsp;&nbsp;&nbsp;Unity</p>
<p>Bronze&nbsp;&nbsp;&nbsp;Excitement</p>
<p>Blue&nbsp;&nbsp;&nbsp;loyalty</p>
<p>Green&nbsp;&nbsp;&nbsp;Growth</p>
<p>Orange&nbsp;&nbsp;&nbsp;Warmth</p>
<p>Indigo&nbsp;&nbsp;&nbsp;Emotions</p>
<p>White&nbsp;&nbsp;&nbsp;Purity</p>
</div>
<!-- Footer -->
<div id="footer" class="clear">
<div class="nav"><b><a href="finalindex.html">Home</a>&nbsp;&nbsp; <a href="gallery.html">Gallery</a>&nbsp;&nbsp; <a href="occasions.html">Occasions</a>&nbsp;&nbsp; <a href="aboutus.html">About Us</a>&nbsp;&nbsp; <a href="contactus.html">Contact Us</a>&nbsp;&nbsp;</b></div>
</div>
</div>
<!-- #container -->
<p></p>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T08:58:00.547

尝试

```
#center2 > a {
    border: 2px solid red;
    display: block;
    width: 150px;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T09:01:54.063

**试试这个 CSS**

```
#center2  a img {
    border: 2px solid red;
    height: 100px;
    margin-top: 4px;
    vertical-align: top;
    width: 125px;
} 
```

**结果是**

![在此处输入图像描述](../Images/fc9348f163f6e74db57ed1cfef6c25ff.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T09:06:59.453

CSS

```
#center2 img {
opacity: 0.5;
-webkit-transition: opacity 1s linear;
border: solid 2px #F0FF49;
float: left;
margin: 6px;
} 
```

![在此处输入图像描述](../Images/8050ec9d192a60d5dd5f6034a21e8f76.png)

# python-2.6 - 根据匹配字符串打印所有行

> ID：13699110
> 
> 赞同：1
> 
> 时间：2012-12-04T08:54:25.510
> 
> 标签：python-2.6, python-2.x

我有一个新的文件名，其中包含以下数据：

```
1111
2012-5-12
new
p0
2222
2012-10-12
old
p1
3333
2012-15-12
new
p0
4444
2012-5-11
new
p1
5555
2011-5-12
old
p0 
```

在此文件中，每个 id 都有以下数据，例如 id、日期、状态和值（1111,2012-5-12,new,p0）.... 在此文件中，我必须打印所有具有状态值的 id 的数据“新”..我的输出应该是这样的：

```
1111
2012-5-12
new
p0
3333
2012-15-12
new
p0
4444
2012-5-11
new
p1 
```

我尝试使用以下代码：

```
f1 = open('new','r')
output = open('new1','w')
lines = f1.readlines()
n =0
for i, line in enumerate(lines):       
    if n > 3:
        output.close()
        file1=open('new1','r')
        file2=open('new2','w')
        lines= file1.readlines()
        status = lines[2].strip()
        if status == 'new':
         for line in lines:
                file2.write(line)

        output = open('new1','w')       
        output.write(line)
        n = 1

    else:
        output.write(line)
        n = n + 1 
```

new2 和 new1 具有以下输出： (new2)=======

```
p0
2012-5-11
new
p1
0 
```

(新1)============

```
p1
2011-5-12
old
p0 
```

程序将采用前 4 行并将其写入 new1.. 因此它将搜索 status == "new" 如果找到然后将所有四行写入 new2 否则再次读取下一个四行直到文件的长度..

问题：我在 new2 中没有得到正确的数据，它应该包含这样的数据：

```
1111
2012-5-12
new
p0
3333
2012-15-12
new
p0
4444
2012-5-11
new
p1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-27T16:35:17.723

```
with open('new', 'r') as f:
    lines = f.readlines()

data = [lines[4 * i:4 * i + 4] for i in range(len(lines) / 4)]
new_data = [d for d in data if d[2] == 'new']

with open('new1', 'w') as f:
    for d in new_data:
        f.write('\n'.join(d)) 
```

# python - 如何在 django 设置中包含 template_dir

> ID：13699112
> 
> 赞同：0
> 
> 时间：2012-12-04T08:54:29.753
> 
> 标签：python, django

在 django`settings.py`中，它要求`TEMPLATE_DIR`.

而不是硬编码那里的路径，我想在每个应用程序中都有模板文件夹，例如

```
coresite/templates
blog/templates
gallery/templates 
```

怎么能通用呢？或者我是否必须为我的基础站点中的每个应用程序添加模板？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T09:00:08.593

您可以添加`django.template.loaders.app_directories.Loader`到文件`TEMPLATE_LOADERS`中，该`settings.py`文件将尝试从每个已安装应用程序的`templates`子目录加载模板。

例如

```
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
) 
```

更多信息：[模板加载器类型](https://docs.djangoproject.com/en/dev/ref/templates/api/#loader-types)

# javascript - 如何播放两个不同的源视频，当一个结束时，然后切换到下一个并循环该步骤？

> ID：13699116
> 
> 赞同：1
> 
> 时间：2012-12-04T08:54:57.270
> 
> 标签：javascript

```
<!doctype html>
<html>
<head>
    <title>Sequential Movies</title>
    <script type="text/javascript">
        // listener function changes src
        function myNewSrc() {
            var myVideo = document.getElementsByTagName('video')[0];
            myVideo.src = "2.m4v";
            myVideo.load();
            myVideo.play();
        myVideo.addEventListener('ended', myAddListener, false);
        }
        // add a listener function to the ended event

        function myAddListener(){
            var myVideo = document.getElementsByTagName('video')[0];
        myVideo.src = "1.m4v";
            myVideo.load();
            myVideo.play();
            myVideo.addEventListener('ended', myNewSrc, false);
        }
    </script>
</head>
<body onload="myAddListener()">
    <video controls
           src="1.m4v">
    </video>
</body>
</html> 
```

看来问题是video1可以切换到video2，但video2不能切换回video1。如何编写脚本来循环 1 > 2 > 1 > 2 > 1 > 2 > 1？是否可以切换三个以上的视频源？我不知道底部链接在说什么，但它似乎对我有用。

[在“结束”时播放数组中的下一个视频](https://stackoverflow.com/questions/10668399/play-next-video-in-an-array-on-ended)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:17:04.140

实际上，您将两个侦听器添加到同一个视频对象。你可以使用这样的东西：

```
<!doctype html>
<html>
<head>
    <title>Sequential Movies</title>
    <script type="text/javascript">
        var videoSources = ["SSR-Styles.mp4","Gauges-radial.mp4"]
        var currentIndex = 0;

        function setFirstVideo()
    {
        var myVideo = document.getElementsByTagName('video')[0];
            myVideo.src = videoSources[currentIndex];
    }

    function videoEnded(){
            var myVideo = document.getElementsByTagName('video')[0];
            currentIndex = (currentIndex+1) % videoSources.length;
            myVideo.src = videoSources[currentIndex];
            myVideo.load();
            myVideo.play();
        }    
</script>
</head>
<body onload="setFirstVideo()">
    <video controls  onended="videoEnded()"
           src="">
    </video>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:20:54.680

这将自动循环播放 2 个视频：

```
var id = 1; // Current video number
var myVideo = document.getElementsByTagName('video')[0];
myVideo.addEventListener("ended", myNewSrc)

function myNewSrc() {
    myVideo.src = id+".m4v";
    myVideo.load();
    myVideo.play();
    id++ % 2 + 1; // Set ID to the other number
} 
```

在您的 html 中：

```
<body onload="myNewSrc()"> 
```

# entity-framework - 实体框架 TPH 继承错误：

> ID：13699117
> 
> 赞同：3
> 
> 时间：2012-12-04T08:55:00.643
> 
> 标签：entity-framework

我收到错误消息；错误 3032：从第 77 行开始映射片段时出现问题：条件成员 'Company.CompanyTypeId' 的条件不是 'IsNull=False' 已映射。删除 Company.CompanyTypeId 上的条件或将其从映射中删除。

我已经搜索了如何解决这个问题，但我不明白答案。

我的课是

```
public abstract class Company
    {
        public Company()
        {
            this.AddressLines = new List<AddressLine>();
        }

        public int CompanyId { get; set; }
        public int CompanyTypeId { get; set; }

        public string Comments { get; set; }

        public DateTime? EndOfBusinessDate { get; set; }

        public virtual CompanyType CompanyType { get; set; }
    }

    public class Subcontractor : Company
    {
        public Subcontractor()
        {
            this.SubcontractorTrades = new List<SubcontractorTrade>();
        }

        public virtual ICollection<SubcontractorTrade> SubcontractorTrades { get; set; }
        public string ValueOfWork { get; set; }
        public string QualityAssured { get; set; }
        public int? NumberOfOperatives { get; set; }

        public static IPagedList<Subcontractor> GetSubcontractors(int page, int PageSize)
        {
            using (var db = new SherryGreenGroupContext())
            {
                return db.Subcontractors
                    .Include("SubcontractorTrades")
                    .Include("AddressLines")
                    .Where(x => x.EndOfBusinessDate == null)
                    .OrderBy(x => x.Company1)
                    .ToPagedList(page, PageSize);
            }
        }
    } 
```

我的映射看起来像；

```
 public CompanyMap()
    {
        // Primary Key
        this.HasKey(t => t.CompanyId);

        // Properties
        this.Property(t => t.Comments).HasMaxLength(1023);

        // Table & Column Mappings
        this.ToTable("Company");
        this.Property(t => t.CompanyId).HasColumnName("CompanyId");

        this.Property(t => t.CompanyTypeId).HasColumnName("CompanyTypeId");
        this.Property(t => t.Comments).HasColumnName("Comments");
        this.Property(t => t.Created).HasColumnName("Created");

        // Relationships
        this.HasRequired(t => t.CompanyType).WithMany(t => t.Companies).HasForeignKey(d => d.CompanyTypeId);
    }
}

public class SubcontractorMap : EntityTypeConfiguration<Subcontractor>
{
    public SubcontractorMap()
    {
        this.Property(t => t.QualityAssured).IsFixedLength().HasMaxLength(1);
        this.Property(t => t.ValueOfWork).HasMaxLength(255);

        this.Property(t => t.QualityAssured).HasColumnName("QualityAssured");
        this.Property(t => t.ValueOfWork).HasColumnName("ValueOfWork");
        this.Property(t => t.NumberOfOperatives).HasColumnName("NumberOfOperatives");
    }
} 
```

上下文类看起来像

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Configurations.Add(new CompanyMap());
        modelBuilder.Configurations.Add(new SubcontractorMap());
        modelBuilder.Configurations.Add(new SupplierMap());
        modelBuilder.Configurations.Add(new ArchitectsAndSurveyorMap());
        modelBuilder.Configurations.Add(new StructuralEngineerMap());
        modelBuilder.Configurations.Add(new CostConsultantMap());
        modelBuilder.Configurations.Add(new ServiceEngineerMap());
        modelBuilder.Configurations.Add(new CompanyTypeMap());
                    modelBuilder.Entity<Company>()
            .Map<Subcontractor>(m => m.Requires("CompanyTypeId").HasValue(4))
            .Map<Supplier>(m => m.Requires("CompanyTypeId").HasValue(5))
            .Map<ArchitectsAndSurveyor>(m => m.Requires("CompanyTypeId").HasValue(1))
            .Map<StructuralEngineer>(m => m.Requires("CompanyTypeId").HasValue(2))
            .Map<CostConsultant>(m => m.Requires("CompanyTypeId").HasValue(3))
            .Map<ServiceEngineer>(m => m.Requires("CompanyTypeId").HasValue(6));
    }
} 
```

我已经尝试从类定义和映射代码中注释掉 CompanyTypeId，但我得到了同样的错误

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T10:38:54.057

如果你想使用 CompanyTypeId 作为 TPH 的鉴别器，你不能将它用于其他任何东西 => 你不能将它作为`Company`类中的属性，你不能与`CompanyType`类有关系。原因是继承中的实体类型是不可变的。更改其中一个`CompanyTypeId`或`CompanyType`在`Company`类中会更改实体的类型，但您不能更改现有实例的类型。

# java - 使用 JButton 更新 JTable

> ID：13699121
> 
> 赞同：1
> 
> 时间：2012-12-04T08:55:19.483
> 
> 标签：java, swing, jdbc, jtable, jbutton

我试图在 Swing 库界面上包含一个刷新按钮，该按钮的目的是在`JTable`调用添加/删除/更新查询后刷新 a 的内容。我做了一些研究，并`tableDataChanged()`从`AbstractTableModel`课堂上看到了这一点。问题是我不确定应该在哪里调用它。我是用的`DefaultTableModel`，所以我相信这个方法也可以用。

```
/*This is where I create the query and add the JTable to a scrollPane, an ResultsPanel
 object is then added to a JFrame object*/

 public class SitePanel extends JPanel implements Constants  {
 ResultsPanel resultsPanel = new ResultsPanel();
   JTable table;
   DefaultTableModel model;
   JPanel sitePanel = new JPanel();
   JPanel results = new JPanel();

   public SitePanel(){
addComponents();
}

public void addComponents(){
    sitePanel.setLayout(new BorderLayout());
    sitePanel.add(buttonPanel, BorderLayout.NORTH);
    sitePanel.add(resultsPanel, BorderLayout.CENTER);
    sitePanel.setVisible(true);
    add(new JScrollPane(sitePanel));
}

 class ButtonPanel extends JPanel{
 JPanel buttons = new JPanel();

       public ButtonPanel(){
      buttons.setLayout(new FlowLayout());
      buttons.add(refreshButton);
      show();
      buttons.setVisible(true);
      add(buttons);

    }
  public void show(){

  refreshButton.addActionListener(new ActionListener(){
   @Override
            public void actionPerformed(ActionEvent arg0) {
                new ResultsPanel();
                table.setModel(model);
            }
        }
                );
 }
 public class ResultsPanel extends JPanel{

     public ResultsPanel(){

        execute();
        results.add(scrollPane);
        javax.swing.SwingUtilities.invokeLater(new Runnable(){
            public void run(){
                results.setBorder(greenB);
                results.setToolTipText("Results");
                results.setVisible(true);
                add(results);

            }
        });
    }

        public void execute() {
        Vector columnNames = new Vector();
        Vector data = new Vector();

        try{
            Connection conn = Connect.getConnection();
            String query = "Select Name from Location Order By Name";
            Statement stmt = conn.createStatement();
            ResultSet rs = stmt.executeQuery(query);
            ResultSetMetaData md = rs.getMetaData();
            int columns = md.getColumnCount();

            for (int i=1; i<=columns;i++){
                columnNames.addElement(md.getColumnName(i));
            }       
            while (rs.next()){
                Vector row = new Vector(columns);

                for(int i=1; i<=columns;i++){   
                    row.addElement(rs.getObject(i));
                }
                data.addElement(row);
            }
            rs.close();
            stmt.close();
            conn.close();
        }
        catch (Exception e){
            e.printStackTrace();
        }
        model = new DefaultTableModel(data, columnNames);

        model.addTableModelListener(table);
        table = new JTable(model){
            public boolean isCellEditable(int row, int col){
                return false;
            }

            public Class getColumnClass(int column){
                for (int row=0; row<getRowCount();row++){
                    Object o = getValueAt(row, column);

                    if(o!=null){
                        return o.getClass();
                    }
                }
                return Object.class;
            }
        };

        scrollPane = new JScrollPane(table);
        scrollPane.setBorder(border);
        scrollPane.getVerticalScrollBar().setBackground(Color.LIGHT_GRAY);
    }
}

           } 
```

这是具有 main 方法的类。

```
import java.net.URL;
import java.sql.*;
import javax.swing.*;

 public class Connect extends JFrame{

public static String user = null;
public static String password = null;
static Connection conn = null;

public static void loginGUI() throws Exception{
    JPasswordField passwordField = new JPasswordField();
    JTextField userField = new JTextField();
    passwordField.setEchoChar('*');
    Object[] obj = {"Username:\n", userField, "Password:\n", passwordField};
    Object stringArray[] = {"OK", "Cancel"};
    if(JOptionPane.showOptionDialog(null, obj, "Login", JOptionPane.YES_NO_OPTION, JOptionPane.QUESTION_MESSAGE, null, stringArray, obj)==JOptionPane.YES_OPTION);
    password = new String (passwordField.getPassword());
    user = userField.getText();
    Conn.formConnection();

}

public static void main (String[] args) throws Exception{
            javax.swing.SwingUtilities.invokeLater(new Runnable(){
        public void run(){
            try {
                                    Connect.loginGUI();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
}
/**
 * Static connection class can only be created once at any given time.
 * @author Nosheen Mahate
 *
 */
public static class Conn{

    public static Connection formConnection() throws Exception{
        try{
            String driver = "net.sourceforge.jtds.jdbc.Driver";
            String url = "jdbc:jtds:sqlserver://BHX4DT-4FPQ35J:1433/Forecast;instance=SQLEXPRESS" +
                    ";user=" +user +";password="+ password +";ssl=request;Encrypt=true;TrustServerCertificate=true";
            Class.forName(driver);
            conn = DriverManager.getConnection(url, user, password);

            try{
                password = null;
                JFrame frame = new JFrame();
                                              frame.add(new SitePanel());
                                              frame.pack();
                                              frame.setVisible(true);
            }
            catch (Exception e){
                System.exit(1);
                JOptionPane.showMessageDialog(null, e, "Error", JOptionPane.ERROR_MESSAGE);

                e.printStackTrace();

            }
        }
        catch (Exception e){
            if(password != null || user !=null){
                JOptionPane.showMessageDialog(null, e, "Error",      JOptionPane.ERROR_MESSAGE);
            }
            else{
            System.exit(1);

            }
            System.out.println("No Connection");
        }

        return conn;

    }
    /**
     * Used to check that the connection is still established
     */
}
public static Connection getConnection(){
    return conn;
}

/**
 * Close the connection to the server
 * @throws SQLException
 */
public static void closeConnection() throws SQLException{
    conn.close();
    conn = null;
}
} 
```

我知道那里有很多代码，但我不太确定您可能需要什么。只是为了重新运行，我想知道`JTable`单击 后如何更新`JButton`，以及应该在哪里`fireTableDataChanged()`调用该方法（如果需要）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T09:26:46.957

1.  请看一下，从

    *   [结果集表模型](http://www.java2s.com/Code/Java/Database-SQL-JDBC/DatabaseBrowser.htm)

    *   [@camickr 来自数据库的表](http://tips4java.wordpress.com/2009/03/12/table-from-database/)

2.  尽量避免`XxxResultSetTableModel`在[EventDispatchThread](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)上同时更新（am） ，

3.  从 r开始所有`JDBC`和`JTable`s 更新`Workers Thread`，`Runnable#Thread`最好从`SwingWorke`r 开始，否则 Swing GUI 将冻结`JDBC`，直到`JTables`更新结束

4.  注意，这两个代码都是代码示例，必须将 all `Xxx.close(`) 移动到 (add create a new)`finally`块 ( `try`- `catch`- `finally`)

# java - 如何从 phpmyadmin 检索数据并在 android 应用程序中显示

> ID：13699122
> 
> 赞同：2
> 
> 时间：2012-12-04T08:55:20.057
> 
> 标签：java, php, android, eclipse, phpmyadmin

我曾使用 eclipse 开发了一个允许用户注册的安卓应用程序。

成功注册并进入主页后，他们可以看到自己的个人资料，其中包含他们在注册期间键入的详细信息。（详细信息将保存到 phpmyadmin 中）

任何方法都可以从数据库中检索这些详细信息并将其显示在个人资料页面上？（我正在使用 php 和 java）

谢谢回答..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T09:10:09.587

您始终可以使用“Zend AmF”或“AMF PHP”与应用程序进行通信，二进制。

*   [http://www.silexlabs.org/amfphp/](http://www.silexlabs.org/amfphp/)
*   [http://framework.zend.com/manual/1.12/en/zend.amf.html](http://framework.zend.com/manual/1.12/en/zend.amf.html)

或 amf 与 codeigniter 混合

*   [https://github.com/EllisLab/CodeIgniter](https://github.com/EllisLab/CodeIgniter)

然后使用： - [http://code.google.com/p/klio-mobile-dataservice/](http://code.google.com/p/klio-mobile-dataservice/) 连接到您的服务器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T09:05:22.790

1.  您需要有一个服务器，如 Tomcat 或任何其他服务器，您将向其发布数据

2.  Servlet 或 PHP 脚本将读取这些值，并将它们存储在数据库中。

3.  Android 应用程序将使用 HTTP Get 请求从另一个 Servlet 或 PHP 页面获取数据，并将其显示在屏幕上。

您也可以使用 SharedPreferences 将密钥本地存储在设备中，然后在下一个屏幕中获取它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T09:07:06.083

您必须编写一个 php 脚本，将数据库中的数据解析为例如 JSON 格式。如果您已经解析了 json，您可以使用 android 中的 JSON 解析器来显示您活动中的内容。

这是一个非常好的android中json解析的教程：

[http://www.androidhive.info/2012/01/android-json-parsing-tutorial/](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T09:51:50.440

基本上你必须用 PHP 或 Java 创建 Web 服务，然后你需要从那里获取数据。您必须创建以 XML 或 JSON 形式返回数据的 Restful API，并且您需要在 android 端解析这些数据。通过这种方式，您可以从 PHP 中获取数据。

这是我在寻找这种场景时发现的最佳资源。作者对此进行了很好的解释，您将对场景有很好的了解。还提供示例代码供参考。

[参考这个链接。](http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/)

希望这可以帮助！

# android - 有没有办法确定应用程序是否刚刚完成第一次安装？

> ID：13699125
> 
> 赞同：0
> 
> 时间：2012-12-04T08:55:30.713
> 
> 标签：android, installation

我的应用程序从 Internet 下载 5 个文件 .apk 并在第一次成功安装 5 个文件后，我想将设备 ID 发送到服务器。

那么有没有办法第一次检查应用程序安装成功

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T09:01:32.960

您可以使用第一次安装时间

```
Date app_install_date = null;
long installation_date = context.getPackageManager()
                    .getPackageInfo(context.getPackageName(), 0).firstInstallTime;
app_install_date = new Date(installation_date); 
```

我认为您可以将其与当前时间进行比较并执行您需要的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T08:59:23.760

您可以通过 Google Analytics 跟踪您的应用使用情况和其他统计信息。您还可以通过 Google Analytics 将设备 ID 等任何数据发送到 Google Analytics 站点。

# rest - Meteor：REST 集合 API 和身份验证

> ID：13699126
> 
> 赞同：2
> 
> 时间：2012-12-04T08:55:35.360
> 
> 标签：rest, authentication, meteor

在需要通过 REST 公开部分 Meteor 集合时，我偶然发现了[Collection API Meteorite 包](https://github.com/crazytoad/meteor-collectionapi)。

虽然这确实可以通过 REST 公开 Meteor 集合，但它没有考虑任何安全性。有什么方法可以将 Collection API 与中引入的 Meteor 身份验证系统集成在一起`0.5.2`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T03:46:10.487

是的，有点。使用 REST 陨石包，您可以声明您的集合，然后在集合上使用[允许](http://docs.meteor.com/#allow)规则，但有几个警告（**注意：**这是需要更多工作的伪代码！）：

```
Players = new Meteor.Collection("players");

//a collection of associated userids and auth token headers
APIUsers = new Meteor.Collection("apiusers"); 

Players.allow({
    insert: function (userId, doc) {
        //invoking this from a RESTful context means the userId is NOT 
        //available, so you'll need to do three things things: 
        //    (1) a way to get the current http request's X-Auth-Token header
        //    (2) a collection to look up the user(s) associated with 
        //        that token
        //    (3) and an owner field on the Players collection to join back 
        //        to the found userids.
        return (_.indexOf(APIUsers.findOne(
                    {XAuthToken: __CURRENT_X_AUTH_TOKEN__}).users
                 , doc.owner) > -1;
    },
    update: function (userId, docs, fields, modifier) {
       /* similar logic */
    },
    remove: function (userId, docs) {
       /* similar logic */
    },
    fetch: ['owner']
}); 
```

**但是**，虽然我认为 RESTful 方法将证明在将遗留应用程序集成到 Meteor 上下文中很有用，但我强烈建议研究[DDP 协议](https://stackoverflow.com/questions/10128430/documentation-or-code-details-on-meteors-ddp-pub-sub-protocol/13736614#13736614)以集成新项目。

正如您在上面看到的，[允许](http://docs.meteor.com/#allow)规则不公开 GET 回调，大概是因为期望 GET 是在服务器公开的发布中定义的。DDP 客户端在较低级别连接以订阅这些发布，因此在此上下文中的 GET 将比 RESTful 方法更加精细。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-20T04:45:34.933

对于现在遇到此问题的任何人，[Restivus](https://github.com/kahmali/meteor-restivus)允许您在集合上生成 REST 端点，并在这些端点上配置用户身份验证和角色权限。默认身份验证使用 Meteor 的内置登录令牌机制来对 a 进行身份验证，并`Meteor.user`提供对经过身份验证的端点的访问。如果默认值对您来说太多或不够，您还可以提供自定义身份验证方法。这是一个简单的例子（希望你能阅读 CoffeeScript）：`this.user``this.userId`

```
# Generates: GET, POST on /api/users and GET, DELETE on /api/users/:id for
# Meteor.users collection
Restivus.addCollection Meteor.users
  excludedEndpoints: ['deleteAll', 'put']
  routeOptions:
    authRequired: true
  endpoints:
    post:
      authRequired: false
    delete:
      roleRequired: 'admin' 
```

# linux - cakephp facebook 组件包括 linux 上的路径

> ID：13699135
> 
> 赞同：0
> 
> 时间：2012-12-04T08:56:28.013
> 
> 标签：linux, facebook, cakephp, path

我有一个关于 cakephp 1.3 的网站，带有 facebook 集成。在我的本地主机（使用 Windows 操作系统）上它工作正常，但在真正的主机（使用 linux 操作系统）上它给出了这个错误`Fatal error: Class 'Facebook' not found in /home/username/public_html/app/plugins/facebook/libs/f_b.php on line 22`。这是 f_b.php

```
App::import('Vendor', 'Facebook.facebook/src/facebook');
App::import('Lib', 'Facebook.FacebookInfo');
class FB {

  /**
    * Facebook Api
    */
  public static $Facebook = null;

  public function __construct() {
    if (empty(self::$Facebook)) {
            self::$Facebook = new Facebook(FacebookInfo::getConfig()); }  // 22 line
  } 
```

所以，显然它无法加载供应商，我认为路径有问题，尽管这也不起作用`App::import('Vendor', 'Facebook.facebook'.DS.'src'.DS.'facebook');`

`f_b.php`位于`plugins/facebook/libs/`文件夹中，此`Facebook.php`供应商位于`plugins/facebook/vendors/facebook/src`文件夹中

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:52:52.893

最后我找到了我的问题的解决方案，为了同时在 Windows 和 linux 上工作，有必要这样写

```
App::import('Vendor', 'Facebook.Facebook', array('file' => 'facebook/src/Facebook.php' )); 
```

这里有几个例子 -[供应商示例](http://book.cakephp.org/1.3/en/The-Manual/Developing-with-CakePHP/Configuration.html#vendor-examples)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:10:23.240

我会说你的路径看起来不正确（为什么有一个点？）。

当我在 CakePHP 中使用插件时，我必须通过取消注释**app/config/bootstrap.php**`Plugins::loadAll()`中的行来启用它们。这将使我的库在我的 CakePHP 应用程序中可用。

# javascript - 删除 Internet Explorer 中的事件侦听器

> ID：13699140
> 
> 赞同：1
> 
> 时间：2012-12-04T08:56:52.913
> 
> 标签：javascript, internet-explorer, dojo, dom-events

在 Firefox 和 Chrome 中，我的代码运行良好，但在 IE 中，该事件不会被删除。

```
dojo.connect(d, "onmouseout", function(evt) {
    //remove event
}); 
```

我试过了：

```
document.removeEventListener("keydown", keyHandler);
dojo.disonnect(document, "keydown", keyHandler);
document.detachEvent("keydown", keyHandler); 
```

但似乎没有任何效果。是当鼠标离开存储在变量中的画布时`keyHandler`我不想执行的函数。`keydown``d`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:16:06.190

设法让它使用这个命令：`document.onkeydown = null;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:13:01.320

检查您是否`disconnect`正确使用该功能（并检查拼写/语法）。[文档](https://dojotoolkit.org/reference-guide/1.7/dojo/disconnect.html)说：

> disconnect() 接受一个特制的参数，因为它是唯一的参数，巧合的是，它是 dojo.connect 的返回值。

...当您向它提供 3 个参数时，处理程序是最后一个。

附带说明一下，我不太确定 Dojo 内部发生了什么（尽管它可能实现了一个 polyfill，所以如果您使用 Dojo，则不必使用本机函数），但 IE`attachEvent`和`detachEvent`接受以 'on' 为前缀的事件名称，例如`onmouseout`，`onkeydown`（参见[MSDN 文章](http://msdn.microsoft.com/en-sg/library/ie/ms536411%28v=vs.85%29.aspx)）。

另外，请注意事件名称的差异。Dojo 似乎使用 IE 的带`on`前缀语法，而标准 DOM 实现[省略了它](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)。因此，您可能想要检查您是否正在绑定和解除绑定同一个事件（例如，如果您绑定到`onkeydown`，那么您应该解除绑定`onkeydown`而不是`keydown`）。

# php - tcpdf 库。当数据库的内容太多时不打印

> ID：13699142
> 
> 赞同：0
> 
> 时间：2012-12-04T08:57:03.663
> 
> 标签：php, mysql, tcpdf

我正在尝试编写一个代码，我必须在其中打印数据库的内容并将其输出为 pdf 文件

但是我似乎遇到了问题

当我导出数据库中的所有内容时，我的 pdf 不显示任何内容

但如果我限制它，例如 LIMIT 5

它可以正常工作并正确打印数据

有没有办法让它打印我的数据库而不必使用限制，因为我需要将它打印在单个 pdf 文件中

//tcpdf 库的设置

```
 ob_start();
    session_start();
    include('connect.php');
    include('../libraries/tcpdf/tcpdf.php');
    include('../libraries/tcpdf/config/lang/eng.php');

    // create new PDF document
    $pdf = new TCPDF(PDF_PAGE_ORIENTATION, PDF_UNIT, PDF_PAGE_FORMAT, true, 'UTF-8', false);

    // set document information
    $pdf->SetCreator(PDF_CREATOR);
    $pdf->SetAuthor('Test');
    $pdf->SetTitle('Report');
    $pdf->SetSubject('Report');
    $pdf->SetKeywords('Test, Report, Data, Form, Results');

    // set default header data
    $pdf->SetHeaderData(PDF_HEADER_LOGO, PDF_HEADER_LOGO_WIDTH, PDF_HEADER_TITLE, PDF_HEADER_STRING, array(0,64,255), array(0,64,128));
    $pdf->setFooterData($tc=array(0,64,0), $lc=array(0,64,128));

    // set header and footer fonts
    $pdf->setHeaderFont(Array(PDF_FONT_NAME_MAIN, '', PDF_FONT_SIZE_MAIN));
    $pdf->setFooterFont(Array(PDF_FONT_NAME_DATA, '', PDF_FONT_SIZE_DATA));

    // set default monospaced font
    $pdf->SetDefaultMonospacedFont(PDF_FONT_MONOSPACED);

    //set margins
    $pdf->SetMargins(PDF_MARGIN_LEFT, PDF_MARGIN_TOP, PDF_MARGIN_RIGHT);
    $pdf->SetHeaderMargin(PDF_MARGIN_HEADER);
    $pdf->SetFooterMargin(PDF_MARGIN_FOOTER);

    //set auto page breaks
    $pdf->SetAutoPageBreak(TRUE, PDF_MARGIN_BOTTOM);

    //set image scale factor
    $pdf->setImageScale(PDF_IMAGE_SCALE_RATIO);

    //set some language-dependent strings
    $pdf->setLanguageArray($l);

    // ---------------------------------------------------------

    // set default font subsetting mode
    $pdf->setFontSubsetting(true);

    // Set font
    // dejavusans is a UTF-8 Unicode font, if you only need to
    // print standard ASCII chars, you can use core fonts like
    // helvetica or times to reduce file size.
    $pdf->SetFont('dejavusans', '', 14, '', true);

    // remove default header
    $pdf->setPrintHeader(false);

    // Add a page
    // This method has several options, check the source code documentation for more information.
    $pdf->AddPage(); 
```

//查询和打印到pdf

```
 //queries
    $c_name=DB::queryOneField('report_name',"SELECT * from reports r INNER JOIN report_fields rf on r.report_id=rf.report_id INNER JOIN searchcolumn s on rf.field_id=s.scol_id where r.report_id=%i",$_GET['c_id']);

    if($_GET['custom']==true)
    {
        $a=DB::query("SELECT * from reports r INNER JOIN report_fields rf on r.report_id=rf.report_id INNER JOIN searchcolumn s on rf.field_id=s.scol_id where r.report_id=%i",$_GET['c_id']);  
        $s = DB::query("SELECT * FROM alumni order by ln,batch ASC); //<-- ------------------ this is the part where it works if you add LIMIT 5 in the sql statement

        foreach($s as $m){
            foreach($a as $c){
        $line2 .=

        str_replace(",","",$c['advsearch_name']) . ": " . str_replace(",","",$m[$c['advsearch_col']]) . "<br />";

            }
        $line2 .="<br />";
        }

        $data="$line2";

    }

    // Set some content to print
    $html = <<<EOD
    <hr>
    <table>
    <tr>
        <td width="60%">REPORTS - $rp_name</td>
    </tr>
    </table>
    <br>
    $data
    EOD;

    // Print text using writeHTMLCell()
    $pdf->writeHTMLCell($w=0, $h=0, $x='', $y='', $html, $border=0, $ln=1, $fill=0, $reseth=true, $align='', $autopadding=true);
    ob_end_clean();

        // Close and output PDF document
        // This method has several options, check the source code documentation for more information.
        $pdf->Output('application.pdf', 'I'); 
```

我错过了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-01-07T14:05:56.003

**在TCPDF**脚本的开头添加此代码：

```
ob_start();
set_time_limit(0);
ini_set("memory_limit", "256M"); 
```

# asp.net - 如何获取html的文本内容

> ID：13699144
> 
> 赞同：-1
> 
> 时间：2012-12-04T08:57:11.447
> 
> 标签：asp.net, .net, vb.net, web

> **可能重复：**
> [如何从 ASP.NET 中的字符串中去除 HTML 标记？](https://stackoverflow.com/questions/785715/how-can-i-strip-html-tags-from-a-string-in-asp-net)

如何在asp.net中获取html的文本内容？

我在 asp.net 中编写了以下代码，但它给了我 html 而不是文本？

代码在这里：

```
Function GetData(ByVal dta As String)

        Dim comp As New Literal
        comp.Text = dta
            Return comp.Text
End Function 
```

例如 ：

输入 ： `<span><p> this is html </p></span>`

输出应该是：这是 html

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T09:12:18.547

试试这个

```
Function GetData(ByVal dta As String)

        Return Regex.Replace(dta, "<[^>]*(>|$)", String.Empty)
    End Function 
```

# android - android asynctask给networkonmainthread异常

> ID：13699151
> 
> 赞同：-3
> 
> 时间：2012-12-04T08:57:34.090
> 
> 标签：android, networking, gps, android-asynctask, location

```
case R.id.bus_item:

            new GetProductDetails().execute();

            CharSequence coordinates[] = {tvlat.getText(),tvlong.getText()};
            double lat = Double.parseDouble((String) coordinates[0]);
            double lng = Double.parseDouble((String) coordinates[1]);

            GeoPoint p = new GeoPoint((int)(lat * 1E6),(int)(lng * 1E6));

            mc.animateTo(p);
            mc.setZoom(18);
            mapView.invalidate(); 
```

网络代码

```
class GetProductDetails extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(MapSimple.this);
            pDialog.setMessage("Loading location details. Please wait...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(true);
            pDialog.show();
        }

        /**
         * Getting product details in background thread
         * */
        protected String doInBackground(String... params) {

            // updating UI from Background Thread
            runOnUiThread(new Runnable() {
                public void run() {
                    // Check for success tag
                    int success;
                    try {
                        // Building Parameters
                        List<NameValuePair> params = new ArrayList<NameValuePair>();
                        //params.add(new BasicNameValuePair("pid", pid));

                        // getting product details by making HTTP request
                        // Note that product details url will use GET request
                        JSONObject json = jsonParser.makeHttpRequest(
                                url_product_detials, "GET", params);

                        // check your log for json response
                        Log.d("Single Product Details", json.toString());

                        // json success tag
                        success = json.getInt(TAG_SUCCESS);
                        if (success == 1) {
                            // successfully received product details
                            JSONArray productObj = json
                                    .getJSONArray(TAG_LOCATION); // JSON Array

                            // get first product object from JSON Array
                            JSONObject product = productObj.getJSONObject(0);

                            // product with this pid found
                            // Edit Text
                            //txtName = (EditText) findViewById(R.id.inputName);
                            tvlat = (TextView)findViewById(R.id.tv_lat1);
                            tvlong = (TextView)findViewById(R.id.tv_long1);

                            // display product data in EditText

                            tvlat.setText(product.getString(TAG_LAT));
                            tvlong.setText(product.getString(TAG_LONG));

                        }else{
                            // product with pid not found
                        }
                    } catch (JSONException e) {
                        e.printStackTrace();
                    }
                }
            });

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog once got all details
            pDialog.dismiss();
        }
    } 
```

日志猫

```
12-04 09:41:22.038: W/dalvikvm(841): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
12-04 09:41:22.088: E/AndroidRuntime(841): FATAL EXCEPTION: main
12-04 09:41:22.088: E/AndroidRuntime(841): android.os.NetworkOnMainThreadException
12-04 09:41:22.088: E/AndroidRuntime(841):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
12-04 09:41:22.088: E/AndroidRuntime(841):  at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:84)
12-04 09:41:22.088: E/AndroidRuntime(841):  at libcore.io.IoBridge.connectErrno(IoBridge.java:127)
12-04 09:41:22.088: E/AndroidRuntime(841):  at libcore.io.IoBridge.connect(IoBridge.java:112)
12-04 09:41:22.088: E/AndroidRuntime(841):  at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
12-04 09:41:22.088: E/AndroidRuntime(841):  at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
12-04 09:41:22.088: E/AndroidRuntime(841):  at java.net.Socket.connect(Socket.java:842)
12-04 09:41:22.088: E/AndroidRuntime(841):  at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:119)
12-04 09:41:22.088: E/AndroidRuntime(841):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:144)
12-04 09:41:22.088: E/AndroidRuntime(841):  at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
12-04 09:41:22.088: E/AndroidRuntime(841):  at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
12-04 09:41:22.088: E/AndroidRuntime(841):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
12-04 09:41:22.088: E/AndroidRuntime(841):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
12-04 09:41:22.088: E/AndroidRuntime(841):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
12-04 09:41:22.088: E/AndroidRuntime(841):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
12-04 09:41:22.088: E/AndroidRuntime(841):  at com.aunsync_alpha.JSONParser.makeHttpRequest(JSONParser.java:62)
12-04 09:41:22.088: E/AndroidRuntime(841):  at com.aunsync_alpha.MapSimple$GetProductDetails$1.run(MapSimple.java:135)
12-04 09:41:22.088: E/AndroidRuntime(841):  at android.os.Handler.handleCallback(Handler.java:605)
12-04 09:41:22.088: E/AndroidRuntime(841):  at android.os.Handler.dispatchMessage(Handler.java:92)
12-04 09:41:22.088: E/AndroidRuntime(841):  at android.os.Looper.loop(Looper.java:137)
12-04 09:41:22.088: E/AndroidRuntime(841):  at android.app.ActivityThread.main(ActivityThread.java:4424)
12-04 09:41:22.088: E/AndroidRuntime(841):  at java.lang.reflect.Method.invokeNative(Native Method)
12-04 09:41:22.088: E/AndroidRuntime(841):  at java.lang.reflect.Method.invoke(Method.java:511)
12-04 09:41:22.088: E/AndroidRuntime(841):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
12-04 09:41:22.088: E/AndroidRuntime(841):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
12-04 09:41:22.088: E/AndroidRuntime(841):  at dalvik.system.NativeStart.main(Native Method) 
```

代码返回 networkonmainthread 错误。但是代码中有一个异步。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:59:01.510

```
 tvlat = (TextView)findViewById(R.id.tv_lat1);
        tvlong = (TextView)findViewById(R.id.tv_long1);

        // display product data in EditText

        tvlat.setText(product.getString(TAG_LAT));
        tvlong.setText(product.getString(TAG_LONG)); 
```

在这里，您要在 doInBackground 中访问 Ui 元素 TextView。`onPostExecute`所以在方法中移动这条线`AsyncTask`：

从 doInBackground 中删除 runOnUiThread 将所有 Ui 元素移动到 onPostExecute 。将您的代码更改为：

```
class GetProductDetails extends AsyncTask<String, String, Arraylist<String>> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(MapSimple.this);
            pDialog.setMessage("Loading location details. Please wait...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(true);
            pDialog.show();
        }

        /**
         * Getting product details in background thread
         * */
        protected Arraylist<String> doInBackground(String... params) {
Arraylist<String> arraylist=new Arraylist<String>();

                    // Check for success tag
                    int success;
                    try {
                        // Building Parameters
                        List<NameValuePair> params = new ArrayList<NameValuePair>();
                        //params.add(new BasicNameValuePair("pid", pid));

                        // getting product details by making HTTP request
                        // Note that product details url will use GET request
                        JSONObject json = jsonParser.makeHttpRequest(
                                url_product_detials, "GET", params);

                        // check your log for json response
                        Log.d("Single Product Details", json.toString());

                        // json success tag
                        success = json.getInt(TAG_SUCCESS);
                        if (success == 1) {
                            // successfully received product details
                            JSONArray productObj = json
                                    .getJSONArray(TAG_LOCATION); // JSON Array

                            // get first product object from JSON Array
                            JSONObject product = productObj.getJSONObject(0);

                            // product with this pid found

                            // display product data in EditText

                arraylist.add(TAG_LAT);
                arraylist.add(TAG_LONG);

                        }else{
                            // product with pid not found
                        }
                    } catch (JSONException e) {
                        e.printStackTrace();
                    }

            return arraylist;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(Arraylist<String> arraylist) {
            // dismiss the dialog once got all details
                     // Edit Text
                            //txtName = (EditText) findViewById(R.id.inputName);
                            tvlat = (TextView)findViewById(R.id.tv_lat1);
                            tvlong = (TextView)findViewById(R.id.tv_long1);
                            tvlat.setText(product.getString(arraylist.get(0)));
                            tvlong.setText(product.getString(arraylist.get(1)));
            pDialog.dismiss();
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:04:08.147

你不能使用`runOnUiThread` **里面** `doInBackground`的方法...修改ui的部分应该移动到`onPostExecute`..

它应该是..

```
class GetProductDetails extends AsyncTask<String, String, String> {

int success;
    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(MapSimple.this);
        pDialog.setMessage("Loading location details. Please wait...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(true);
        pDialog.show();
    }

    /**
     * Getting product details in background thread
     * */
    protected String doInBackground(String... params) {

        // updating UI from Background Thread

                try {
                    // Building Parameters
                    List<NameValuePair> params = new ArrayList<NameValuePair>();
                    //params.add(new BasicNameValuePair("pid", pid));

                    // getting product details by making HTTP request
                    // Note that product details url will use GET request
                    JSONObject json = jsonParser.makeHttpRequest(
                            url_product_detials, "GET", params);

                    // check your log for json response
                    Log.d("Single Product Details", json.toString());

                    // json success tag
                    success = json.getInt(TAG_SUCCESS);
                    if (success == 1) {
                        // successfully received product details
                        JSONArray productObj = json
                                .getJSONArray(TAG_LOCATION); // JSON Array

                        // get first product object from JSON Array
                        JSONObject product = productObj.getJSONObject(0);

                    }else{
                        // product with pid not found
                    }
                } catch (JSONException e) {
                    e.printStackTrace();
                }

        return null;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog once got all details
        pDialog.dismiss();

         if (success == 1) {// product with this pid found
                        // Edit Text
                        //txtName = (EditText) findViewById(R.id.inputName);
                        tvlat = (TextView)findViewById(R.id.tv_lat1);
                        tvlong = (TextView)findViewById(R.id.tv_long1);

                        // display product data in EditText

                        tvlat.setText(product.getString(TAG_LAT));
                        tvlong.setText(product.getString(TAG_LONG));
                        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T09:06:02.643

你不能使用`runOnUiThread`里面的方法`doInBackground`，`UI`修改应该移到`onPostExecute`.

谢谢...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T09:06:43.017

不要使用 runOnUiThread。您的 doInBackground 方法应如下所示：

```
protected String doInBackground(String... params) {    

                    int success;
                    try {
                        // Building Parameters
                        List<NameValuePair> params = new ArrayList<NameValuePair>();
                        //params.add(new BasicNameValuePair("pid", pid));

                        // getting product details by making HTTP request
                        // Note that product details url will use GET request
                        JSONObject json = jsonParser.makeHttpRequest(
                                url_product_detials, "GET", params);

                        // check your log for json response
                        Log.d("Single Product Details", json.toString());

                        // json success tag
                        success = json.getInt(TAG_SUCCESS);
                        if (success == 1) {
                            // successfully received product details
                            JSONArray productObj = json
                                    .getJSONArray(TAG_LOCATION); // JSON Array

                            // get first product object from JSON Array
                            JSONObject product = productObj.getJSONObject(0);  

                        }else{
                            // product with pid not found
                        }
                    } catch (JSONException e) {
                        e.printStackTrace();
                    }

            return null;
        } 
```

# java - 如何从 junit-tests 中的 .properties 文件中读取字符串？

> ID：13699153
> 
> 赞同：2
> 
> 时间：2012-12-04T08:57:45.100
> 
> 标签：java, junit, wicket

我在我的网络应用程序中使用检票口。我将字符串保存在一些 .properties 文件中，如下所示：

foo.properties

```
page.label=dummy 
```

`page.label`在 html 文件中，我可以按如下方式访问字符串：

索引.html

```
<wicket:message key="page.label">Default label</wicket:message> 
```

现在我为我的应用程序编写了一些 junit 测试用例，并想访问保存在属性文件中的字符串。我的问题是，如何从属性文件中读取字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T09:06:58.360

尝试这个

```
import java.io.FileInputStream;
import java.util.Properties;

public class MainClass {
  public static void main(String args[]) throws IOException {
    Properties p = new Properties();
    p.load(new FileInputStream("foo.properties"));
    Object label = p.get("page.label");
    System.out.println(label);
  }
} 
```

本节允许您从任何地方读取所有属性文件并将它们加载到属性中

```
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.net.URISyntaxException;
import java.net.URL;
import java.net.URLClassLoader;
import java.util.ArrayList;
import java.util.List;
import java.util.Properties;

public class MainClass {

    private static String PROPERTIES_FILES_PATHNAME = "file:///Users/ftam/Downloads/test/";// for mac

    public static void main(String args[]) throws Exception {
        Properties p = new Properties();

        List<File> files = getFiles();
        for(File file : files) {
            FileInputStream input = new FileInputStream(file);
            p.load(input);
        }

        String label = (String) p.get("page.label");
        System.out.println(label);
    }

    private static List<File> getFiles() throws IOException, URISyntaxException {
        List<File> filesList = new ArrayList<File>();

        URL[] url = { new URL(PROPERTIES_FILES_PATHNAME) };
        URLClassLoader loader = new URLClassLoader(url);
        URL[] urls = loader.getURLs();

        File fileMetaInf = new File(urls[0].toURI());
        File[] files = fileMetaInf.listFiles();
        for(File file : files) {
            if(!file.isDirectory() && file.getName().endsWith(".properties")) {
                filesList.add(file);
            }
        }

        return filesList;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T16:33:24.933

考虑到组件树，Wicket 有自己的本地化资源方式。请参阅[StringResourceLoader 的 javadoc](http://wicket.apache.org/apidocs/1.5/org/apache/wicket/resource/loader/ComponentStringResourceLoader.html)。

加载资源的一种方法是：

```
WicketTester tester = new WicketTester(new MyApplication());
tester.startPage(MyPage.class);
Localizer localizer = tester.getApplication().getResourceSettings()
                            .getLocalizer();
String foo = localizer.getString("page.label",tester.getLastRenderedPage(), "") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T09:00:04.697

使用[Apache Commons Configuration](http://commons.apache.org/configuration/userguide/howto_properties.html#Properties_files)是一个不错的选择！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T09:02:02.720

你可以使用[`load`](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html#load%28java.io.InputStream%29)然后`get("page.label")`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-24T10:50:16.177

在你的班级中有这个字段：

```
import java.util.ResourceBundle;

private static ResourceBundle settings = ResourceBundle.getBundle("test",Locale.getDefault()); 
```

然后是`test.properties`这样的文件：

```
com.some.name=someValueHere 
```

最后，您可以通过这种方式访问​​属性值：

```
private String fieldName = settings.getString("com.some.name"); 
```

# python - 似乎我收到错误 requests.exceptions.ConnectionError getaddrinfo failed 因为减号

> ID：13699159
> 
> 赞同：2
> 
> 时间：2012-12-04T08:58:02.183
> 
> 标签：python, python-requests

我正在使用 requests 发送带有以下代码的 post 请求：

```
EMAIL=test@test.com
payload  = {'ref':'EdX7CqkmjCETTSA9MOPvvmmhLE0OH9_D-zjde6lAKsOoKD8','EMAIL':EMAIL,'tag': 'F41D3B010005FB43'}
post_response = requests.post(url='http://p5trc.emv2.com/D2TTF8', params=payload) 
```

我收到以下异常：

```
 File "C:\Program Files\eclipse\plugins\org.python.pydev_2.7.1.2012100913\pysrc\pydevd.py", line 1090, in run
    pydev_imports.execfile(file, globals, locals) #execute the script
  File "C:\Users\USER\workspace\POST_ME\POST_ME.py", line 72, in <module>
    post_response = requests.post(url='http://p5trc.emv2.com/D2TTF8', params=payload)
  File "C:\Users\USER\workspace\POST_ME\requests\api.py", line 98, in post
    return request('post', url, data=data, **kwargs)
  File "C:\Users\USER\workspace\POST_ME\requests\safe_mode.py", line 39, in wrapped
    return function(method, url, **kwargs)
  File "C:\Users\USER\workspace\POST_ME\requests\api.py", line 51, in request
    return session.request(method=method, url=url, **kwargs)
  File "C:\Users\USER\workspace\POST_ME\requests\sessions.py", line 268, in request
    r.send(prefetch=prefetch)
  File "C:\Users\USER\workspace\POST_ME\requests\models.py", line 650, in send
    self._build_response(r)
  File "C:\Users\USER\workspace\POST_ME\requests\models.py", line 313, in _build_response
    request.send()
  File "C:\Users\USER\workspace\POST_ME\requests\models.py", line 636, in send
    raise ConnectionError(sockerr)
requests.exceptions.ConnectionError: [Errno 11004] getaddrinfo failed 
```

从字符串中删除减号字符`EdX7CqkmjCETTSA9MOPvvmmhLE0OH9_D-zjde6lAKsOoKD8`或`'tag': 'F41D3B010005FB43'` 从字典中删除时，我没有得到异常。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:03:15.727

多次尝试调用后引发异常，调用`getaddrinfo`用于将主机名 ( `p5trc.emv2.com`) 转换为网络地址。您一定是遇到了一些网络问题，您的 DNS 服务器暂时无法访问。

当您更改脚本时它随后起作用的事实与该错误*无关。*您的 DNS 服务器再次变得可访问。

# sonarqube - 我没有在网络浏览器中收到声纳

> ID：13699160
> 
> 赞同：0
> 
> 时间：2012-12-04T08:58:16.643
> 
> 标签：sonarqube

我在我的opensuse 11.4 64位系统中安装了声纳服务器。我配置了我的数据库并从终端启动了声纳服务器。然后我拿起我的网络浏览器并打开了`http://localhost:9000/sonar`。但是我得到了以下屏幕。HTTP 错误：503

访问 /sonar 时出现问题。原因：

```
SERVICE_UNAVAILABLE 
```

为什么会发生这种情况？请参阅下面的错误日志。任何人请帮助我

```
STATUS | wrapper  | 2012/12/04 14:20:39 | --> Wrapper Started as Daemon
STATUS | wrapper  | 2012/12/04 14:20:39 | Launching a JVM...
INFO   | jvm 1    | 2012/12/04 14:20:39 | Wrapper (Version 3.2.3) http://wrapper.tanukisoftware.org
INFO   | jvm 1    | 2012/12/04 14:20:39 |   Copyright 1999-2006 Tanuki Software, Inc.  All Rights Reserved.
INFO   | jvm 1    | 2012/12/04 14:20:39 | 
INFO   | jvm 1    | 2012/12/04 14:20:39 | 2012-12-04 14:20:39.615:INFO::Logging to STDERR via org.mortbay.log.StdErrLog
INFO   | jvm 1    | 2012/12/04 14:20:39 | 2012-12-04 14:20:39.652:INFO::jetty-6.1.25
INFO   | jvm 1    | 2012/12/04 14:20:39 | 2012-12-04 14:20:39.815:INFO::NO JSP Support for /sonar, did not find org.apache.jasper.servlet.JspServlet
2012.12.04 14:20:40 INFO  o.s.s.p.ServerImpl  Sonar Server / 3.3.2 / 614afef12ae442ad50831a7bc604664378e31088
2012.12.04 14:20:41 INFO  o.s.s.d.EmbeddedDatabase  Starting embedded database on port 9001 with url jdbc:h2:tcp://localhost:9001/sonar
2012.12.04 14:20:41 INFO  o.s.s.d.EmbeddedDatabase  Embedded database started. Data stored in: /home/tom/sonar-3.3.2/data
2012.12.04 14:20:41 WARN  o.s.c.p.DefaultDatabase  H2 database should be used for evaluation purpose only
2012.12.04 14:20:41 INFO  o.s.c.p.Database  Create JDBC datasource for jdbc:h2:tcp://localhost:9001/sonar
2012.12.04 14:20:43 INFO  o.s.s.p.DefaultServerFileSystem  Sonar home: /home/tom/sonar-3.3.2
2012.12.04 14:20:43 INFO  o.s.s.p.DefaultServerFileSystem  Deploy dir: /home/tom/sonar-3.3.2/war/sonar-server/deploy
2012.12.04 14:20:43 INFO  org.sonar.INFO  Install plugins...
2012.12.04 14:20:43 INFO  o.s.s.p.PluginDeployer  Deploy plugin Findbugs / 3.3.2 / 614afef12ae442ad50831a7bc604664378e31088
2012.12.04 14:20:43 INFO  o.s.s.p.PluginDeployer  Deploy plugin JaCoCo / 3.3.2 / 614afef12ae442ad50831a7bc604664378e31088
2012.12.04 14:20:43 INFO  o.s.s.p.PluginDeployer  Deploy plugin English Pack / 3.3.2 / 614afef12ae442ad50831a7bc604664378e31088
2012.12.04 14:20:43 INFO  o.s.s.p.PluginDeployer  Deploy plugin Surefire / 3.3.2 / 614afef12ae442ad50831a7bc604664378e31088
2012.12.04 14:20:43 INFO  o.s.s.p.PluginDeployer  Deploy plugin Duplications / 3.3.2 / 614afef12ae442ad50831a7bc604664378e31088
2012.12.04 14:20:43 INFO  o.s.s.p.PluginDeployer  Deploy plugin Checkstyle / 3.3.2 / 614afef12ae442ad50831a7bc604664378e31088
2012.12.04 14:20:43 INFO  o.s.s.p.PluginDeployer  Deploy plugin PMD / 3.3.2 / 614afef12ae442ad50831a7bc604664378e31088
2012.12.04 14:20:43 INFO  o.s.s.p.PluginDeployer  Deploy plugin Core / 3.3.2 / 614afef12ae442ad50831a7bc604664378e31088
2012.12.04 14:20:43 INFO  o.s.s.p.PluginDeployer  Deploy plugin Java / 1.0 / 5ac4cf695248bc7385cb3377216cd86340bda0b0
2012.12.04 14:20:43 INFO  o.s.s.p.PluginDeployer  Deploy plugin Database Cleaner / 3.3.2 / 614afef12ae442ad50831a7bc604664378e31088
2012.12.04 14:20:43 INFO  o.s.s.p.PluginDeployer  Deploy plugin Cobertura / 3.3.2 / 614afef12ae442ad50831a7bc604664378e31088
2012.12.04 14:20:43 INFO  o.s.s.p.PluginDeployer  Deploy plugin Squid for Java / 1.0 / 5ac4cf695248bc7385cb3377216cd86340bda0b0
2012.12.04 14:20:43 INFO  o.s.s.p.PluginDeployer  Deploy plugin Design / 3.3.2 / 614afef12ae442ad50831a7bc604664378e31088
2012.12.04 14:20:43 INFO  o.s.s.p.PluginDeployer  Deploy plugin Email notifications / 3.3.2 / 614afef12ae442ad50831a7bc604664378e31088
2012.12.04 14:20:43 INFO  org.sonar.INFO  Install plugins done: 152 ms
2012.12.04 14:20:43 INFO  o.s.s.p.ApplicationDeployer  Deploy Ruby on Rails applications
2012.12.04 14:20:43 INFO  org.sonar.INFO  Start components...
2012.12.04 14:20:43 INFO  o.s.j.s.AbstractDatabaseConnector  Initializing Hibernate
2012.12.04 14:20:45 INFO  org.sonar.INFO  Notification service started (delay 60 sec.)
2012.12.04 14:20:45 INFO  org.sonar.INFO  Deploy GWT plugins...
2012.12.04 14:20:45 INFO  org.sonar.INFO  Deploy org.sonar.plugins.core.testdetailsviewer.TestsViewer to /home/tom/sonar-3.3.2/war/sonar-server/deploy/gwt
2012.12.04 14:20:45 INFO  org.sonar.INFO  Deploy org.sonar.plugins.design.ui.libraries.LibrariesPage to /home/tom/sonar-3.3.2/war/sonar-server/deploy/gwt
2012.12.04 14:20:45 INFO  org.sonar.INFO  Deploy org.sonar.plugins.design.ui.page.DesignPage to /home/tom/sonar-3.3.2/war/sonar-server/deploy/gwt
2012.12.04 14:20:45 INFO  org.sonar.INFO  Deploy GWT plugins done: 131 ms
2012.12.04 14:20:45 INFO  org.sonar.INFO  Load metrics...
2012.12.04 14:20:47 INFO  org.sonar.INFO  cleaning alert thresholds...
2012.12.04 14:20:47 INFO  org.sonar.INFO  Load metrics done: 2085 ms
2012.12.04 14:20:47 INFO  org.sonar.INFO  Register rules [findbugs/java]...
2012.12.04 14:20:48 INFO  org.sonar.INFO  414 rules
2012.12.04 14:20:49 INFO  org.sonar.INFO  Register rules [findbugs/java] done: 1110 ms
2012.12.04 14:20:49 INFO  org.sonar.INFO  Register rules [checkstyle/java]...
2012.12.04 14:20:49 INFO  org.sonar.INFO  129 rules
2012.12.04 14:20:49 INFO  org.sonar.INFO  Register rules [checkstyle/java] done: 789 ms
2012.12.04 14:20:49 INFO  org.sonar.INFO  Register rules [pmd/java]...
2012.12.04 14:20:50 INFO  org.sonar.INFO  232 rules
2012.12.04 14:20:50 INFO  org.sonar.INFO  Register rules [pmd/java] done: 1077 ms
2012.12.04 14:20:50 INFO  org.sonar.INFO  Register rules [pmd-unit-tests/java]...
2012.12.04 14:20:50 INFO  org.sonar.INFO  10 rules
2012.12.04 14:20:51 INFO  org.sonar.INFO  Register rules [pmd-unit-tests/java] done: 160 ms
2012.12.04 14:20:51 INFO  org.sonar.INFO  Register rules [squid/java]...
2012.12.04 14:20:51 INFO  org.sonar.INFO  17 rules
2012.12.04 14:20:51 INFO  org.sonar.INFO  Register rules [squid/java] done: 187 ms
2012.12.04 14:20:51 INFO  org.sonar.INFO  Register rules [common-java/java]...
2012.12.04 14:20:51 INFO  org.sonar.INFO  4 rules
2012.12.04 14:20:51 INFO  org.sonar.INFO  Register rules [common-java/java] done: 27 ms
2012.12.04 14:20:51 INFO  org.sonar.INFO  Disable deprecated user rules...
2012.12.04 14:20:51 INFO  org.sonar.INFO  Disable deprecated user rules done: 91 ms
2012.12.04 14:20:51 INFO  o.s.s.s.RegisterNewProfiles  Register Quality Profiles... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:13:45.813

我看到您使用的是 Sonar 的独立版本，默认情况下它在 Jetty 上以“http://localhost:9000” URL 运行（没有“/sonar”应用程序上下文）。

因此，除非您修改了 Jetty 部署配置，否则您应该查看“http://localhost:9000”而不是“http://localhost:9000/sonar”。

# java - 如何通过 netbeans 在 ms 访问中更新日期

> ID：13699162
> 
> 赞同：0
> 
> 时间：2012-12-04T08:58:26.843
> 
> 标签：java, netbeans, jdbc, sqlexception

*例外 ： *

```
 java.sql.SQLException: [Microsoft][ODBC Microsoft Access Driver] Syntax error in       UPDATE statement 
```

*代码是：*

```
 String Name = txtName.getText();`
    String Email = txtEmail.getText();
    String Mobile = txtMobile.getText();
    String Address = txtAddress.getText();
    String Dob = txtDob.getText(); 
```

尝试 {

```
 Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");

            connection = DriverManager.getConnection("jdbc:odbc:NewPData");
            String query = "update Table1 set Name='" + Name + "' , Email='" + Email + "' , Mobile=" + Mobile + ", Address= '" + Address 
```

+ "', DOB=" +Dob + ", 其中 ID=" + 更新; PreparedStatement ps_Statement = connection.prepareStatement(query); ps_Statement.executeUpdate(); JOptionPane.showMessageDialog(panelID, "记录更新成功"); 连接.close(); } 捕捉 (ClassNotFoundException e) { e.printStackTrace(); } catch (SQLException e) { e.printStackTrace(); }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:15:58.520

在 where 子句之前有一个 , 。如果是日期，则 DOB 应包含在单引号内。你确定Mobile是一个整数吗？

```
"update Table1 set Name='" + Name + "' , Email='" + Email + "' , Mobile=" + Mobile + ", Address= '" + Address
+ "', DOB='" +Dob + "' where ID=" + Update; 
```

但无论如何考虑使用 PreparedStatement 和参数传递。您使用的 SQL 容易受到 SQL 注入攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:35:22.657

请改用这个：

 ````
String yourFormat = "dd-MMM-yy";
Date yourDateVariable = null;

SimpleDateFormat sdf = new SimpleDateFormat(yourFormat);

try {
    yourDateVariable = sdf.parse(Dob);
} catch ( Exception ex ) {
    // Do something
}

// Continue your code<code> 
````

# java - 在按钮单击时使整行可编辑

> ID：13699168
> 
> 赞同：0
> 
> 时间：2012-12-04T08:58:45.423
> 
> 标签：java, swing, jtable, jbutton, tablecolumn

我想让整行可编辑...例如，如果用户选择第 1 列而不是单击编辑按钮，则表格将以可编辑的形式显示整行...如果有人可以在按钮事件时仅提供代码，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:11:43.283

> 我想让整行可编辑...例如，如果用户选择第 1 列而不是单击编辑按钮，则表格将以可编辑的形式显示整行...如果有人可以在按钮事件时仅提供代码，那就太好了。

*   我认为必须使用`JToggleButton`，因为与（有两种状态）`JButton`相比，（s）简单的点击立即完成`JToggleButton`

*   因为`JTable`必须设置正确的 SelectionMode 并覆盖`public boolean isCellEditable(int row, int col) {`

# python - 数组总和和统计

> ID：13699169
> 
> 赞同：0
> 
> 时间：2012-12-04T08:59:00.310
> 
> 标签：python

输入：

```
a[0] = [0, 1, 2]
a[1] = [0, 2, 2]
a[2] = [100, 200, 300] 
```

输出1：

```
output1
>> [100, 203, 304] 
```

输出2：

```
output2
>> [{0:2, 100:1}, {1:1, 2:1, 200:1}, {2:2, 300:1}] 
```

也就是说，output1计算每一列的总和，output2统计每一列中每个数字的出现次数。

（实际上，a 是 4000*400000 的矩阵）有谁知道如何在 Python 中有效地做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T09:01:58.370

对于 output1，您可以计算转置矩阵的每一行的总和：

```
map(sum, zip(*a)) 
```

对于 output2，您可以使用[collections.Counter](http://docs.python.org/2/library/collections.html#collections.Counter)应用于每一列：

```
from collections import Counter
output = [Counter(col) for col in zip(*a)] 
```

或者：

```
output = map(Counter, zip(*a)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T09:07:12.870

```
a = [[0, 1, 2], [0, 2, 2], [100, 200, 300]]
##output1
print map(sum, zip(*a))
##output2
s = []
for p in zip(*a):
    u = {}
    for e in p:
        u.setdefault(e, 0)
        u[e] += 1
    s.append(u)
print s 
```

# flash - 手动切换 SWFobject 回退=

> ID：13699170
> 
> 赞同：1
> 
> 时间：2012-12-04T08:59:01.103
> 
> 标签：flash, swfobject

我尝试创建一个页面，在其中以全尺寸显示 Flash 元素，但是当我在较小的屏幕上查看该站点时，我想触发回退。

这对我现在不起作用，因为浏览器支持 Flash。

我找不到手动切换回退的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T21:20:43.420

无法手动触发回退，但如果不满足某些条件，您可以阻止 SWF 加载。在您的情况下，您说仅当视口满足指定的最小尺寸时才需要嵌入 SWF。

如果您尝试在初始页面加载时加载 SWF，只需执行以下操作：

```
//Viewport function based on 
//http://andylangton.co.uk/articles/javascript/get-viewport-size-javascript/
function GetViewportDimensions(){

    var de = document.documentElement,
        b = document.getElementsByTagName('body')[0],
        w = window.innerWidth || (de && de.clientWidth) ? de.clientWidth : b.clientWidth,
        h = window.innerHeight || (de && de.clientHeight) ? de.clientHeight : b.clientHeight;

    return { width: w, height: h };

}

swfobject.addDomLoadEvent(function(){

    var actualDimensions = GetViewportDimensions(),
        minimumWidth = 600,
        minimumHeight = 500;

    if(actualDimensions.width >= minimumWidth && actualDimensions.height >= minimumHeight){
        swfobject.embedSWF("mymovie.swf", "flashcontent", "550", "400", "9");
    } else {
        //do nothing, use fallback
    }

}); 
```

如果视口足够大，此代码只会尝试嵌入 SWF。如果 Flash 不存在，`swfobject.embedSWF`则会失败，并且您的后备内容将保留在原处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:16:24.107

如果仅用于测试目的，您可以*评论*此行：

```
swfobject.embedSWF("main.swf?v=1", "flashcontent", "972", "1200", "10.1", "expressInstall.swf"); 
```

使用 2 个正斜杠

```
// swfobject.embedSWF("main.swf?v=1", "flashcontent", "972", "1200", "10.1", "expressInstall.swf"); 
```

* * *

**更新：**

```
if (swfobject.getQueryParamValue("noflash") != "true")
     swfobject.embedSWF("main.swf?v=1", "flashcontent", "972", "1200", "10.1", "expressInstall.swf"); 
```

然后您可以使用新的 url 进行测试：

www.yourwebsite.com/?noflash=true

# jquery - phonegap jquerymobile - 完成异步内容后加载页面

> ID：13699174
> 
> 赞同：1
> 
> 时间：2012-12-04T08:59:02.303
> 
> 标签：jquery, cordova, jquery-mobile, asynchronous

我想加载一个外部页面（因此不使用查询移动设备中的 ajax），问题是当我使用通过单击链接标签激活的功能时，并且在此功能中我有一个 INSERT 到数据库中，链接是在脚本写入数据库之前跟随..

这是代码的一部分：

```
$('#aggiungiClienteRubrica').click(function() {

                               db = window.openDatabase("Database", "1.0", "Cordova Demo", 200000);
                               db.transaction(function(tx){
                                              var sql = 'INSERT INTO CLIENTI (nome, cognome) VALUES ("'+$('#nome').val()+'", "'+$('#cognome').val()+'")';
                                              tx.executeSql(sql)}, errorCB);
                               }); 
```

在 html 文件中，我只有一个这样的标签：

> `<a id="aggiungiClienteRubrica" href="../client/consultClients.html" data-role="button" data-theme="b" rel="external">Add client</a>`

所以问题是，我可以执行javascript，但是异步调用将插入到db中的记录没有被执行并且../client/consultClients.html页面被加载

工作完成后如何让它跟随链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:15:16.017

试试这个：

```
 $('#aggiungiClienteRubrica').click(function(e) {
    e.preventDefault(); // will stop default link action

    // capture the link url
    var url = $(this).attr('href');

    // your DB stuff here, wait for completion
    // (I'm not familiar with local DB so don't know that part)

    // use this if you managed to do the above synchronously
    // or in a 'success' callback
    window.location.href = url;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:59:50.283

好的，成功了！！！

就是这样：

```
$('#aggiungiClienteRubrica').click(function(e) {
                               var myVar = click(e);
                               myVar;
}); 
```

然后点击函数定义如下：

```
function click(e){

db = window.openDatabase("Database", "1.0", "Cordova Demo", 200000);
e.preventDefault();
db.transaction(function(tx){
               var sql = 'INSERT INTO CLIENTI (nome, cognome) VALUES ("'+$('#nome').val()+'", "'+$('#cognome').val()+'")';
               tx.executeSql(sql)}, errorCB, successCreation);
} 
```

然后，定义回调函数successCreation：

```
function successCreation(){
var href = $('#aggiungiClienteRubrica').attr('href');
window.location.href = href;

} 
```

蒂蒂姆的支持...

# jquery - Jcrop 和 IE 问题以及动态添加的图像

> ID：13699178
> 
> 赞同：3
> 
> 时间：2012-12-04T08:59:15.033
> 
> 标签：jquery, image, internet-explorer, jquery-events, jcrop

我正在向页面添加图像，然后在其上使用 JCrop，但它似乎在 IE8 中不起作用，除非我`$img.show()`在调用 JCrop 方法之间稍等片刻。这是一个 JCrop 也在 IE8 中工作的最小示例，但我想去掉第 16 和 18 行，或者至少了解在这 250 毫秒内需要发生什么。

```
 10       var $img = $('<img id="example" style="display:none;">');
 11 
 12       $("body").append($img);
 13 
 14       $img.on("load", function () {
 15           $img.show();
 16           setTimeout(function () {
 17               $("#example").Jcrop();
 18           }, 250);
 19       });
 20 
 21       $img.attr("src", "/assets/example.png"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T02:11:55.960

与[脚本元素](http://msdn.microsoft.com/en-us/library/ie/hh180173)一样，IE8 和下火传统的[readyStateChange](http://msdn.microsoft.com/en-us/library/aa743099)`load`事件而不是图像更新的标准事件`src`，因此计时器掩盖了无法识别事件的事实。解决方案是在回调之前 fork 代码：

```
function imageSwap()
  {
  var $img = $('<img id="example" style="display:none;">');

  $("body").append($img);

  $img.attr("src", "/assets/example.png");

  if(!!document.addEventListener)
    {
    $img.on("load", loadTest)
    }

  else
    {
    $img.get(0).attachEvent("onreadystatechange", loadTest);
    } 

  function loadTest(event)
    {
    $img.show();
    $("#example").Jcrop();
    }
  } 
```

# javascript - 在 Google Apps Script (JavaScript) 中获取特定字符串格式的第二天日期

> ID：13699186
> 
> 赞同：3
> 
> 时间：2012-12-04T08:59:38.920
> 
> 标签：javascript, google-apps-script, google-sheets, google-spreadsheet-api

今天是个好日子！在一个项目上工作m我不得不开始使用 Google Spereadsheet 界面，并遇到了一个我无法快速克服的问题，因为以前没有使用过 JavaScript。我有一个特定格式的日期作为字符串

```
var date = "2012-08-09"; 
```

我需要的是获得第二天的日期

```
date = "2012-08-10"; 
```

如果有必要，这不仅应该包括更改日期，还应该更改月份和年份。

我试过使用日期格式

```
 var datum= new Date(date);
  datum.setDate(datum.getDate() + 1);
  date = datum.toString('yyyy-MM-dd'); 
```

但代码似乎无法将日期写入基准变量。解决这个小问题的最好和最快的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T22:33:44.390

当您将问题标记为“Javascript”并且实际使用 Google Apps 脚本时，问题在于您会从不了解 GAS 中可用的某些特殊功能的人那里得到很好的答案。

GAS 基于 Javascript，但 Javascript 不是 GAS……*如果你明白我的意思 ;-)*

也就是说，实际上[有一个“特殊”函数来格式化日期字符串](https://developers.google.com/apps-script/class_utilities#formatDate)，我将在下面的代码中展示它。

但是还有另一点可能会给您带来麻烦：如果您没有在日期对象中提及小时，那么如果您居住在使用夏令时的国家/地区，则有可能会改变一天。这个问题已经在这个论坛和其他地方经常讨论，所以我不会给出所有的细节，但是当你玩日期对象时考虑到这一点是个好主意。在下面的代码中，我`tz`从我们刚刚创建的日期对象中提取了一个（时区）字符串，以了解它是在夏季还是冬季，然后我将此`tz`字符串用作`Utilities.formatDate()`方法中的参数。这保证了在任何情况下都能得到准确的结果。

这是（最后）测试代码：（ *使用记录器查看结果。脚本编辑器>查看>日志）*

```
function test(){
  date = "2012-08-9";
  var parts = date.split('-')
  var datum = new Date(parts[0],parts[1]-1,parts[2],0,0,0,0);// set hours, min, sec & milliSec to 0
  var tz = new Date(datum).toString().substr(25,8);// get the tz string
  Logger.log(datum+'    in TimeZone '+tz)
  datum.setDate(datum.getDate() + 1);// add 1 day
  var dateString = Utilities.formatDate(datum,tz,'yyyy-MMM-dd');// show result like you want, see doc for details
  Logger.log(dateString);// the day after !
  } 
```

记录器结果：

```
Thu Aug 09 2012 00:00:00 GMT+0200 (CEST)  in TimeZone GMT+0200
2012-Aug-10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:44:45.917

将格式字符串传递给 toString 可以在 .NET 中使用，并且可以在 Java 中使用，但是在 Javascript 中不起作用。试试下面的，

```
var date = "2012-08-09";
var datum = new Date(date);
datum.setDate(datum.getDate() + 1);
date = datum.getFullYear() + "-" + (datum.getMonth() + 1) + "-" + datum.getDate(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T09:08:05.927

这听起来像是一个解析问题，你可能会有更好的运气，拆分日期并将参数单独放入，你得到的任何错误都会很有用：-

```
var parts = date.split("-");
var datum = new Date(
  parseInt(parts[0], 10), 
  parseInt(parts[1], 10) - 1, 
  parseInt(parts[2], 10)); 
```

JavaScript Date 对象没有内置格式化函数，但我不确定谷歌应用程序 api 是否有任何不同。要执行代码的最后一行，您可能需要编写自己的函数来从 JavaScript 日期对象中提取数据并对其进行格式化，提示如果要确保日期中有两位数，您还需要编写一个 zerofill 函数和月部分的输出。

```
var formatted = datum.getFullYear() + "-" + 
  zerofill(datum.getMonth() + 1, 2) + "-" + 
  zerofill(datum.getDate(), 2); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T13:17:52.953

[在http://jsfiddle.net/](http://jsfiddle.net/)中尝试以下操作......

```
<html>
<head>
    <script>
        function foo(){
            var date = "2012-08-09";
            var datum = new Date(date);
            datum.setDate(datum.getDate() + 1);
            date = datum.getFullYear() + "-" + (datum.getMonth() + 1) + "-" + datum.getDate();       
            document.getElementById("demo").innerHTML = date;
        }
    </script>
</head>
<body onload="foo()">
    <p id=demo></p>
</body>
</html>​ 
```

# javascript - Html 自动呈现结束标签

> ID：13699196
> 
> 赞同：0
> 
> 时间：2012-12-04T09:00:26.127
> 
> 标签：javascript, jquery, html

我正在使用客户端技术（大部分通过 JQuery 的 JavaScript）开发本机移动应用程序 CMS 系统，并实现了类似于 ASP.NET 的模板系统。

所以假设我有一个导航控件，它有一个 starttemplate、endtemplate 和 itemtemplate，如下所示：

```
<div data-type="navigation" id="navigationControlDemo">
    <div data-type="starttemplate">
      <ul id="Menu">
    </div>
    <div data-type="itemtemplate">
      <li><a href="[[Link]]">[[Text]]</a></li>
    </div>  
    <div data-type="endtemplate" >
        </ul>
    </div>
 </div> 
```

我的问题是浏览器，因为它似乎决定要修复 html，以便标签“正确”关闭，如下所示：

```
 <div data-type="navigation" id="navigationControlDemo">
    <div data-type="starttemplate">
      <ul id="Menu">
      </ul>
    </div>
    <div data-type="itemtemplate">
      <li><a href="[[Link]]">[[Text]]</a></li>
    </div>  
    <div data-type="endtemplate" >

    </div>
    </div> 
```

我尝试了一些解决方法和快速破解无济于事。我尝试用某些字符替换“<”>“，然后在加载后替换它们，但问题仍然存在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T09:04:27.820

您的代码不是有效的 html。你不能交错标签（在一个地方打开它并在一个完全不同的地方关闭它）。标签必须正确嵌套。

有效的：

```
<p>
    <ul>
    </ul>
</p> 
```

无效的：

```
<p>
    <ul>
</p>
    </ul> 
```

请注意，如果它看起来“关闭”，您将无法正确缩进第二个。请先确保您的 html 正确，然后浏览器才会正常运行。

-update- 因为您想要客户端模板，所以您不想*要将*（无效）html 解析为 html。但是，它显然也不是有效的 xml，这可能是您想要的。

您可以做的是将部分的内容包装为`CDATA`.

```
<div data-type="navigation" id="navigationControlDemo">
    <div data-type="starttemplate"><![CDATA[
      <ul id="Menu">
    ]]></div>
    <div data-type="itemtemplate"><![CDATA[
      <li><a href="[[Link]]">[[Text]]</a></li>
    ]]></div>  
    <div data-type="endtemplate" ><![CDATA[
        </ul>
    ]]></div>
 </div> 
```

现在，如果您将其解释为 xml，则模板中的部分将被视为文本而不是标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:05:47.013

您不能将`<div>`元素作为元素的子`<ul>`元素。
`<ul>`s 只接受`<li>`子标签。[规格](http://www.w3.org/TR/REC-html40/struct/lists.html#edef-UL)

此外，您似乎在此处错误地嵌套了标签：

```
<div data-type="starttemplate">
    <ul id="Menu">
</div> 
```

`<div>`如果`<ul>`仍然打开，您将无法关闭它。这`<ul>`就是过早关闭的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T09:09:17.633

基本上，您要求一种方法来强制浏览器显示格式错误、混乱[的 tag-soup](http://en.wikipedia.org/wiki/Tag_soup)。感谢上帝，大多数浏览器不会盲目地渲染这种代码，因为结果会令人难以忍受，并且会使您的页面完全无法理解。
也就是说，如果您查看原始页面源代码，您可能会看到未更正的原始标记。但*由于*浏览器无法真正呈现它，引擎会全力以赴并尽力而为。

但是请不要浪费您的时间寻找解决此问题的方法，它只是一个*帮助您*的功能，而不是惹恼您。另外：HTML5 有更多关于允许和不允许的规则，以及浏览器如何处理无效标记（`<div><ul></div>`例如，在您的代码中：被视为无效）。如果您愿意，可以查看[W3C 规范](http://www.w3.org/TR/html5/)以获取有关该主题的更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T09:49:25.407

我没有使用诸如关键字之类的标签来表示 < 和 >，然后使用模板系统呈现所有正确的 html，并将这些关键字替换回 , 和 >，然后将其添加到文档中。我的模板标签中的语法很烦人，但它按我需要的方式工作。

# java - JBoss 5.0.1 AJP 工作线程挂起？

> ID：13699198
> 
> 赞同：2
> 
> 时间：2012-12-04T09:00:43.527
> 
> 标签：java, jboss, jersey, ajp

最近我们的 JBoss AS 出现问题，我们无法确定根本原因。

我们的 jboss 服务器前面有一个 apache 负载平衡器，它使用端口 8009 上的 AJP 协议将请求传递给 jboss。

最近我们遇到了工作线程卡在系统中的问题（我们通过 jboss.web 上的 jmx-console 看到它，并且在发出线程转储时也看到它）。

我们目前为 AJP 连接设置了 700 个 maxThreads，最多需要 3 天才能完全达到最大值。此时我们重新启动jboss服务来解决它。

这些线程在线程转储中如下所示：

```
**Thread: ajp-0.0.0.0-8009-4 : priority:5, demon:true, threadId:90, threadState:RUNNABLE**
java.net.SocketInputStream.socketRead0(Native Method)
java.net.SocketInputStream.read(SocketInputStream.java:129)
org.apache.coyote.ajp.AjpProcessor.read(AjpProcessor.java:1036)
org.apache.coyote.ajp.AjpProcessor.readMessage(AjpProcessor.java:1115)
org.apache.coyote.ajp.AjpProcessor.process(AjpProcessor.java:383)
org.apache.coyote.ajp.AjpProtocol$AjpConnectionHandler.process(AjpProtocol.java:384)
org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
java.lang.Thread.run(Thread.java:662)

**Thread: ajp-0.0.0.0-8009-5 : priority:5, demon:true, threadId:91, threadState:RUNNABLE**
java.net.SocketInputStream.socketRead0(Native Method)
java.net.SocketInputStream.read(SocketInputStream.java:129)
org.apache.coyote.ajp.AjpProcessor.read(AjpProcessor.java:1036)
org.apache.coyote.ajp.AjpProcessor.readMessage(AjpProcessor.java:1115)
org.apache.coyote.ajp.AjpProcessor.process(AjpProcessor.java:383)
org.apache.coyote.ajp.AjpProtocol$AjpConnectionHandler.process(AjpProtocol.java:384)
org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
java.lang.Thread.run(Thread.java:662)

**Thread: ajp-0.0.0.0-8009-6 : priority:5, demon:true, threadId:92, threadState:RUNNABLE**
java.net.SocketInputStream.socketRead0(Native Method)
java.net.SocketInputStream.read(SocketInputStream.java:129)
org.apache.coyote.ajp.AjpProcessor.read(AjpProcessor.java:1036)
org.apache.coyote.ajp.AjpProcessor.readMessage(AjpProcessor.java:1115)
org.apache.coyote.ajp.AjpProcessor.process(AjpProcessor.java:383)
org.apache.coyote.ajp.AjpProtocol$AjpConnectionHandler.process(AjpProtocol.java:384)
org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
java.lang.Thread.run(Thread.java:662)

**Thread: ajp-0.0.0.0-8009-7 : priority:5, demon:true, threadId:93, threadState:WAITING**
- waiting on <0x42ee5ce8> (a org.apache.tomcat.util.net.JIoEndpoint$Worker)
java.lang.Object.wait(Native Method)
java.lang.Object.wait(Object.java:485)
org.apache.tomcat.util.net.JIoEndpoint$Worker.await(JIoEndpoint.java:416)
org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:442)
java.lang.Thread.run(Thread.java:662) 
```

ETC...

在 jboss 上运行的 Web 应用程序使用 Jersey 实现向客户端返回可用文件列表或使用 application/octet-stream 的文件本身（将 InputStream 作为实体添加到 Jersey 响应）。

提前致谢， 梅尼

# java - 在 Java EE 应用程序中处理多个 EntityManager

> ID：13699201
> 
> 赞同：6
> 
> 时间：2012-12-04T09:00:53.063
> 
> 标签：java, jpa, entitymanager, concept

我有大约 10 个 EntityManager 的 Java EE 应用程序（EM 的数量可能会增加）。我的应用程序还包含许多无状态、有状态和消息驱动的 bean。

与其在每个 bean 中注入我的 EM `@PersistenceContext`（以及 2 种方法来检测哪个 EM 供用户使用），我可能会将所有这些都存储在一个单例 bean 中并与其他 bean 一起访问它。像这样，不用担心可维护性。

然而，将 EM 存储在一个单例 bean 中是线程安全的吗？会出现瓶颈吗？

另一种解决方案是创建一个抽象类，所有 bean 都会扩展它。

更好的解决方案是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T22:03:28.123

实体管理器不应该是线程安全的，因此您不应该通过 Singleton 共享它们。这与为什么您不应该将实体管理器注入 Servlet 以及为什么在此类 Web 组件中从 JNDI 查找 - 应该 - 每次都返回不同的实体管理器实例的原因相同。

在实践中，一些实现可能会提供一个线程安全的实体管理器，因此在测试期间它似乎可以工作。但是，为了便携性和保护您免受升级问题的影响，您永远不应该依赖它。

您可以在一个 bean 中定义所有实体管理器，并将其注入到任何需要实体管理器的地方，而不是从公共基类继承。

例如

```
@Stateless
public class EntityManagerProviderBean {

    @PersistenceContext(unitName="foo")
    private EntityManager entityManagerFoo;

    @PersistenceContext(unitName="bar")
    private EntityManager entityManagerBar;

    public EntityManager getEntityManager() {
        return ...? entityManagerFoo : entityManagerBar;
    }
} 
```

*（其中 ... 是您用来选择正确实体管理器的逻辑）*

将其注入到需要实体管理器的 bean 中：

```
@Stateless
public class MyService {

    @EJB
    private EntityManagerProviderBean entityManagerProvider;

    public void doStuff(MyEntity myEntity) {
        entityManagerProvider.getEntityManager().update(myEntity);
    }

} 
```

或者，以下内容可能会更整洁：

```
@Stateless
@PersistenceContexts({ 
    @PersistenceContext(unitName="foo", name = "fooENC"),
    @PersistenceContext(unitName="bar", name = "barENC") }
)
public class EntityManagerProviderBean {

    @Resource
    private EJBContext context;

    public EntityManager getEntityManager() {
        return (EntityManager) context.lookup(... ? "fooENC" : "barENC");
    }
} 
```

最后一个示例将所有持久性上下文映射到 bean 的 ENC 中，可以方便地在其中以编程方式检索它们。

不幸的是，人们忘记在 TCK 中添加后一种语法的测试，随后主要供应商忘记实现它（参见[http://java.net/jira/browse/JPA_SPEC-38](http://java.net/jira/browse/JPA_SPEC-38)和[https://issues.jboss.org/ browse/AS7-5549](https://issues.jboss.org/browse/AS7-5549)），因此请测试这是否适用于您的服务器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T09:44:57.073

容器管理的实体管理器与当前 JTA 事务一起自动传播，`EntityManager`映射到同一持久性单元的引用提供对该事务内持久性上下文的访问。因此，从单例中共享实体管理器不是一个好习惯，除了并发问题之外，这将导致您在 bean 上调用的每个方法都使用相同的事务上下文。
一个简单的解决方案是`EntityManagerFactory`在 bean 中注入引用并创建`EntityManager`调用该`createEntityManager()`方法的对象。缺点是您应该手动管理事务，不再依赖容器。
否则，另一种方法可能是将您的所有实体管理器注入一个主企业 bean，并使用您将适当的管理器传递给的方法在服务 bean 中实现业务逻辑。后一种解决方案的示例：

```
@Stateless
class MainBean {
    @PersistenceContext EntityManager em1;
    @PersistenceContext EntityManager em2;
    ...
    @EJB WorkerBean1 workerBean1;
    @EJB WorkerBean2 workerBean2;
    ...
    void method1(Object param1, Object param2) {
        workerBean1.method1(em1, param1, param2);
    }

    void method2(Object param1, Object param2, Object param3) {
        workerBean2.method2(em2, param1, param2, param3);
    }
    ...
}

@Stateless
class WorkerBean1 {
    void method1(EntityManager em, Object param1, Object param2) {
        ...
    }
    ...
}

@Stateless
class WorkerBean2 {
    void method2(EntityManager em, Object param1, Object param2, Object param3) {
        ...
    }
    ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-04T15:02:25.997

**复合持久性单元 - Java EE**

在 Java EE 中处理多个实体管理器（即多个持久性单元）的方法是使用复合持久性单元 (CPU)。这种复合持久性单元可以从 EE Web 应用程序中的一个点（数据层）进行评估。不过，这需要是一个`@Stateless`EE bean 才能与`@PersistenceContext`.

已引入复合持久性单元以使在各种 Java 应用程序中重用实体类成为可能。CPU 是企业架构的一个特性。我选择使用 EclipseLink 作为展示，因为我从正在运行的生产应用程序中获得了积极的经验。

**介绍**

在某些情况下，实体包含服务器环境中更多 Web 服务所需的一般数据。以一般的“名称-地址”实体、“用户密码角色”实体、“文档关键字索引”实体等为例。复合持久性单元实现有助于每个实体定义的来源在只有一个地方（'单点定义'）。这些实体定义随后可以包含在需要此实体访问的每个 Java Web 应用程序中。

**复合持久性单元的工作**

以下教程说明了复合持久性单元的工作：[EclipseLink 复合持久性单元](http://wiki.eclipse.org/EclipseLink/Examples/JPA/Composite)

复合持久性单元的概念首先定义成员持久性单元。每个成员持久性单元可能与不同的数据库相关联，但成员持久性单元也可以都引用同一个实际数据库。我有后者的经验，其中 EclipseLink（版本 2.6.4）与一个 Postgress 数据库结合使用。

需要 Maven 来实现所需的模块化方法。

**persistence.xml 中的设置**

复合持久性单元成员定义如下：`@Entity`在专用 Maven 模块中对一组相关实体（Java 类）进行逐个编程。在这个 Maven 模块中还定义了一个复合持久性单元成员（重要！）。复合单元成员*PuPersonData*指的是这组表征人员数据的相关实体。将成员持久化单元 PuPersonData 定义为 (

```
<persistence-unit name="PuPersonData" transaction-type="JTA">
...
    <jta-data-source>jdbc/PostgresDs</jta-data-source>
... 
```

）。

在第二个 Maven 模块中，定义另一个复合持久性单元成员 PuWebTraffic (

```
<persistence-unit name="PuWebTraffic" transaction-type="JTA">
...
    <jta-data-source>jdbc/PostgresDs</jta-data-source>
... 
```

）。`@Entity`此处包括存储有关 Web 事务、登录、会话等数据的其他实体（用.

两个持久性单元成员在其 XML 定义中都有以下属性：

```
<properties>
    <property name="eclipselink.composite-unit.member" value="true"/>
    ...
</properties> 
```

*复合持久性单元*

我们现在在第三个 Maven 模块中定义复合持久性单元 CPuPersonSessionData，它包括持久性单元成员 PuPersonData 和 PuWebTraffic。

```
<persistence-unit name="CPuPersonSessionData" transaction-type="JTA"> 
```

这个复合持久性单元 CPuPersonSessionData 通过包含两个相关 Maven 模块编译产生的 jars 来引用两个持久性单元成员，PuPersonData 和 PuWebTraffic。

```
...
    <jar-file>PuPersonData.jar</jar-file>
    <jar-file>PuWebTraffic.jar</jar-file>
... 
```

在复合持久化单元的 XML-definition 中，需要设置以下属性

```
<properties>
    <property name="eclipselink.composite-unit" value="true"/>
    ...
</properties> 
```

此设置可确保 Java EE 对待复合持久性单元的方式与其持久性单元成员不同。

*Java中持久化单元的使用*

在将使用人员数据和交通数据存储和检索实体的 Java Web 应用程序中，仅包含复合持久性单元

```
@Stateless
public class DataLayer {

    @PersistenceUnit(unitName="CPuPersonSessionData")
    EntityManager em; 
    ... 
```

现在可以对包含在复合实体成员之一中的每个实体执行正常的“em”操作`persist`，例如`find`和。`merge`

在 Payara 下，这个复合持久性单元不需要 XA 事务来处理与每个持久性单元成员相关的实体。

**马文**

Maven*父*POM 文件需要包含相关模块的规范。

```
...
    <modules>
            <module>PersonData</module>
            <module>WebTraffic</module>
            <module>PersonSessionData</module>
    </modules>
... 
```

每个模块的POM-file都需要配置成一个普通的Maven-project，参考父POM-file。

陷阱：

*   您需要正确配置 Maven 多模块项目，这可能有些棘手。每个复合持久性单元成员构成一个单独的 Maven 模块。此外，复合持久性单元是一个单独的 Maven 模块。成员需要首先按照 Maven 顺序编译。
*   编译复合持久化单元的模块时，需要找到复合持久化单元中的“jar”。
*   每个复合持久性单元成员的实体需要在生成的“jar”中直接在“类”目录中可用（通过 Maven 向实体添加额外路径是可能的，但很复杂）。
*   持久性单元成员的“jars”需要在“类”目录中可用，以便复合持久性单元找到它们。

获得的好处是一个整洁的企业数据层，它与可重用实体一起工作，每个实体都有一个中心定义。此外，还可以执行跨单元的原生 SQL 查询。我也得到了这个工作。

文档指出，当复合持久性单元成员在不同的实际数据库上运行时，跨单元本机查询将不起作用。这仍应得到验证。

# sd-card - SD卡模拟器

> ID：13699203
> 
> 赞同：7
> 
> 时间：2012-12-04T09:01:12.597
> 
> 标签：sd-card

我有一个项目要做。我需要将照片从相机传输到 PC，我需要使用 SD 卡接口，我希望它是 SPI）。因为 USB 传输不是选项，所以我认为我连接了一些微控制器或树莓派而不是 sdcard 并模拟 sd 卡，然后我从微控制器以某种方式将它（通过 USB 或以太网）发送到 pc。整个操作（从相机到电脑）必须非常快（1-2s），照片为2-4Mbyte。您有任何提示如何做到这一点或 microconroller 选择了什么？

方案：

```
 SPI                     as SD emulator     USB/Ethernet
  |camera|--------------->|microcontroller| ---------------> |PC| 
```

感谢您的建议和想法。

# .htaccess - magento后端网址不起作用

> ID：13699207
> 
> 赞同：1
> 
> 时间：2012-12-04T09:01:29.540
> 
> 标签：.htaccess, magento, mod-rewrite

我在这里完全迷失了，我有几个 Magento 安装，其中后端 url 不能很好地工作。

问题是这样的：

在前端，所有的 url 都被完美地重写了，所以`index.php`不在 url 中并且 mod_rewrite 有效。

但是对于管理部分，所有创建的 url`index.php`仍然存在该部分，在正常安装中现在放置不会有问题，类似 url 的`index.php/admin/dashboard`结果会导致 404 错误页面。但是，有趣的是，当我删除`index.php`部分 url 时，它可以工作。

我用一些 .htacces 技巧和技巧解决了这个问题，但我发现这些技巧没有好处。后端的某些部分仍然无法工作或需要自己的 .htacces 重定向，或者即使使用 .htacces 中的重定向也根本无法工作。

所以，我的问题是：为什么我的 Magento 安装在`index.php/admin`通话时会出现 404 错误？以及如何在没有 .htacces hack 的情况下**很好地**摆脱`index.php`后端 url 中的部分？

所有商店的 Magento 版本是 1.7.0.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:10:31.270

解决方法很简单，在apache配置中添加“AcceptPathInfo On”。

学分： http: [//www.magentocommerce.com/answers/discussion/178/index.phpinstall-was-not-found/p1](http://www.magentocommerce.com/answers/discussion/178/index.phpinstall-was-not-found/p1)

# java - 为什么 Query、TermQuery 等不再在 Lucene 4.0 中实现 Serializable？

> ID：13699209
> 
> 赞同：1
> 
> 时间：2012-12-04T09:01:34.173
> 
> 标签：java, serialization, lucene

我需要发送一个包含 Lucene 元素的类，例如`Query`使用 EJB 通过网络发送，当然这个类需要序列化。我将我的课程标记为，`Serializable`但似乎还不够：

```
org.apache.lucene.search.TermQuery is not Serializable 
```

事实上，当我阅读 Lucene (4.0) 的最后一个稳定版本的 javadoc 时，我可以看到它`TermQuery`也没有实现 Serializable `Query`。我不明白的是为什么这些类用于`Serializable`在上一个版本（3.6.1）中实现，为什么不再是这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T10:20:14.340

[Mike McCandless，Lucene 贡献者之一](http://blog.mikemccandless.com/2012/07/lucene-400-alpha-at-long-last.html)以及 Lucene 4 变更日志说：

> 所有序列化代码已从 Lucene 的类中删除；您必须在应用程序中处理更高级别的序列化。

实际提交是针对 JIRA 问题[LUCENE-2908](https://issues.apache.org/jira/browse/LUCENE-2908)和[LUCENE-4037](https://issues.apache.org/jira/browse/LUCENE-4037)完成的。前一个问题的描述说：

> 我们删除了 contrib/remote，但忘了到处清理序列化地狱。这不再需要，从来没有真正起作用（例如跨版本），并且会减慢开发速度（例如，在尝试为评分系统制作补丁时，我浪费了很长时间调试 Similarity.idfExplain 的愚蠢序列化）。

Lucene 并不是唯一一个考虑放弃序列化的人。例如，番石榴也[考虑](http://code.google.com/p/guava-libraries/issues/detail?id=978)过这一点。

谈到您的问题 - 您应该能够始终将您的查询转换为字符串表示形式（使用`.toString()`）并返回。除非您每秒执行这一百万次，否则开销应该可以忽略不计。

# c# - 如何确定在 AuthenticateRequest 中请求的资源类型

> ID：13699211
> 
> 赞同：0
> 
> 时间：2012-12-04T09:01:37.137
> 
> 标签：c#, asp.net

在请求通过身份验证之前确定请求的资源是否支持 POST 数据的最佳方法是什么？

在我的 HttpMoudle`AuthenticateRequest`事件中，我正在检查路径是否以“.aspx”结尾，但这感觉很粗糙，不适用于路由 URL。

我已经探索过检查的类型，`HttpContext.Current.Handler`但直到事件链的后期才分配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:09:47.000

在事件发生之前，ASP.NET 不知道请求应该映射到哪个处理程序[`HttpApplication.PostMapRequestHandler`](http://msdn.microsoft.com/en-us/library/system.web.httpapplication.postmaprequesthandler.aspx)。这是了解将执行哪个处理程序的*理想场所。*订阅[`HttpApplication.AuthenticateRequest`](http://msdn.microsoft.com/en-us/library/system.web.httpapplication.authenticaterequest.aspx)事件可确保仅在处理附加的模块或事件处理程序之前对请求进行身份验证。

所以你可以在`AuthenticateRequest`事件中做到这一点的唯一方法是分析 URL（就像你所做的那样），我认为。

# php - 如何在PHP中像这样增加变量

> ID：13699215
> 
> 赞同：0
> 
> 时间：2012-12-04T09:01:50.843
> 
> 标签：php

我有这个脚本...

```
//initial value

$fund = 10;
$rebate = 0.01; // constant 1 percent
$maturity = 30; //days

echo '<ul>';
echo '<li>Day1 fund: $' . $fund . '</li>';

//day1 value
$fund = incfund($fund); //should return $10.10
echo '<li>Day2 fund: $' . $fund . '</li>';

//day2 value
$fund = incfund($fund); //should return $10.20
echo '<li>Day3 fund: $' . $fund . '</li>';

//day3 value
$fund = incfund($fund); //should return $10.30
echo '<li>Day4 fund: $' . $fund . '</li>';

echo '</ul>';
//continue increasing the fund value daily until day 30...

//function to increase $fund

function incfund($x){
for($i = 0; $i<=$maturity; $i++){
$newfund = $x + $rebate;
$fund = $newfund;
return $fund;
}
} 
```

目前如果我运行脚本，它将输出：

```
Day1 fund: $10
Day2 fund: $10
Day3 fund: $10
Day4 fund: $10 
```

当我真正想输出的是：

```
Day1 fund: $10.10
Day2 fund: $10.20
Day3 fund: $10.30
Day4 fund: $10.40
...
...
Day30 fund: $13.00 
```

基本上，我要做的是计算 1% 的回扣并将其复利到原始基金，然后继续复利直到到期日。

为什么我不能做我想做的事可能是什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T09:11:24.063

看你的代码

```
function incfund($x){
    for($i = 0; $i<=$maturity; $i++){
        $newfund = $x + $rebate;
        $fund = $newfund;
        return $fund;
    }
} 
```

它的真正作用

```
function incfund($x){
    return $x+$rebate;
} 
```

你应该改变什么

```
function incfund($x){
    global $rebate;
    return $x+$rebate;
} 
```

或者

```
function incfund($x, $rebate){
    return $x+$rebate;
} 
```

并更改视图层

```
for ($i = 1; $i <= $maturity; $i++, $fund = incfund($fund)) {
    echo '<li>Day'.$i.' fund: $' . $fund . '</li>';
} 
```

但是正如你描述你的功能你的所有代码应该看起来像

```
//initial value

$fund = 10;
$rebate_weekdays = 0.01; // constant 1 percent
$rebate_weekend = 0.02; // constant 1 percent
$maturity = 30; //days

echo '<ul>';

// show fund and continue increasing the fund value daily until day 30...
for ($i = 1; $i <= $maturity; $i++) {
    $rebate = (is_it_weekend($i)) ? $rebate_weekend: $rebate_weekdays;
    $curfund = incfund($fund, $i, $rebate);
    echo '<li>Day'.$i.' fund: $' . $curfund . '</li>';
}

echo '</ul>';

//function to calculate current $fund    
function incfund($fund, $x, $rebate){
    return $fund * (1 + $x * $rebate);
} 
```

那天怎么查你可以查到。它只是使用[http://php.net/mktime](http://php.net/mktime)和[http://php.net/date](http://php.net/date)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T09:05:42.267

pass `$rebate`,`$maturity`变量作为函数参数。

```
function incfund($x,$rebate,$maturity){
...
} 
```

调用函数：

```
incfund($fund,$rebate,$maturity); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T09:11:38.993

此外，如果你想要像小数点后 2 位这样的格式，你应该使用`number_format($number,2)`

这是GBD答案的补充

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T09:23:32.980

如果你真的要这样做，这里就是你如何改变方法来做你想做的事

```
function incfund($x){
 global $maturity;
 global $fund;
 global $rebate;
  for($i = 0; $i<=$maturity; $i++){
     $newfund = $x+($x*$rebate);
     $newfund=number_format((float)$newfund, 2, '.', '');
     $fund = $newfund;
    return $fund;
     }
  } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T09:32:45.097

这对我有用并输出你想要的。我发现在循环中创建一天更容易。

```
<?php

//function to increase $fund

function incfund(){
        $fund = 10;
        $rebate = 1; // constant 1 percent
        $maturity = 30; //days
        $html = '';
        $interest = ($fund / 100) * $rebate;
        for($i = 0; $i<=$maturity; $i++){
            $realInterest = $interest * $i;
            $html .= '<li>Day'.$i.' fund: $' . number_format($fund+$realInterest ,2) . '</li>';
        }
    echo $html;
}

echo incfund();
?>

Day0 fund: $10.00
Day1 fund: $10.10
Day2 fund: $10.20
Day3 fund: $10.30
Day4 fund: $10.40
Day5 fund: $10.50
Day6 fund: $10.60
Day7 fund: $10.70
Day8 fund: $10.80
Day9 fund: $10.90
Day10 fund: $11.00
Day11 fund: $11.10
Day12 fund: $11.20
Day13 fund: $11.30
Day14 fund: $11.40
Day15 fund: $11.50
Day16 fund: $11.60
Day17 fund: $11.70
Day18 fund: $11.80
Day19 fund: $11.90
Day20 fund: $12.00
Day21 fund: $12.10
Day22 fund: $12.20
Day23 fund: $12.30
Day24 fund: $12.40
Day25 fund: $12.50
Day26 fund: $12.60
Day27 fund: $12.70
Day28 fund: $12.80
Day29 fund: $12.90
Day30 fund: $13.00 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-12-04T09:18:02.283

好的，既然你是从基础基金计算结果，你必须保持这个值。

这应该这样做：

```
// initial
$fund = 10;
$rebate = 0.01; // constant 1 percent
$maturity = 30; //days

incfunds($fund, $rebate, $maturity);

function incfunds($fund, $rebate, $maturity) {
    echo "<ul>";
    for($i = 0; $i < $maturity; $i++) {
        echo "<li>Day{$i+1} fund:".($fund + (($fund/100) * $i*$rebate))."</li>";
    }
    echo "</ul>";
} 
```

就这样。

# javascript - Fancybox 插件和 $(window).scroll

> ID：13699220
> 
> 赞同：0
> 
> 时间：2012-12-04T09:02:09.743
> 
> 标签：javascript, jquery, scroll, fancybox

我正在使用 fancybox 插件，而没有按窗口高度调整图像大小。画廊图像是正确的分辨率，高度约为 800-2000 像素。所以用户应该滚动堆栈中的每张图片。为了更容易，我决定插入一个 scrollToTop 按钮。但它不起作用，因为fancybox 以某种方式阻止了滚动事件。我只是尝试通过执行以下操作重新创建滚动事件：

```
$(window).scroll(function() {
    alert('Scroll');
}); 
```

但它也没有奏效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T19:42:08.070

`afterShow`我猜你应该在fancybox( ) 回调中初始化你的scrollToTop 按钮，例如：

```
afterShow: function() {
    $("#scrollButtonID").on("click", function() {
        $(".fancybox-overlay").scrollTop(0); // or whatever value
    });
} 
```

**请注意**，我们实际上不是定位，而是`$(window)`移动到 fancybox 叠加层的顶部`$(".fancybox-overlay")`

看到这个**[jsfiddle](http://jsfiddle.net/rXm9T/)**

在我的演示中，我将按钮设置为 fancybox 叠加层的附加元素，但您也可以将其设置为`title`fancybox 的。为了更平滑的过渡，您可以`animate`使用滚动事件，但这是装饰性的；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:07:38.150

尝试与[.on()](http://api.jquery.com/on/)绑定？

```
$(document).on('scroll', function() { 
    alert('Scroll....');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T09:12:18.977

您也可以为此使用香草 javascript：

```
window.onscroll = function () {
    alert('Scroll');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-20T15:11:27.963

FancyBox - jQuery 插件版本：1.3.4 (11/11/2010)

从 1073 到 1083 的行，我禁用部分代码

```
 /*if ($.fn.mousewheel) {
        wrap.bind('mousewheel.fb', function(e, delta) {
            if (busy) {
                e.preventDefault();

            } else if ($(e.target).get(0).clientHeight == 0 || $(e.target).get(0).scrollHeight === $(e.target).get(0).clientHeight) {
                e.preventDefault();
                $.fancybox[ delta > 0 ? 'prev' : 'next']();
            }
        });
    }*/ 
```

# openerp - OpenERP 版本 7 选择字段中的错误

> ID：13699221
> 
> 赞同：2
> 
> 时间：2012-12-04T09:02:10.250
> 
> 标签：openerp

我在 openerp 7 的选择字段中遇到问题。

我做了一个选择字段，比如

```
'my_field': fields.selection([('0', 'Not Possible'), ('1', 'Possible)], 'Option'] 
```

但它没有显示`Not Possible` 在选择中。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T09:15:03.710

零“0”通常被认为是假的。可能就是这个问题。请尝试将其更改为

```
'my_field': fields.selection([('n', 'Not Possible'), ('p', 'Possible)], 'Option'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-08T12:26:57.993

我什至不确定它是否是有效的语法

不应该：

```
'my_field': fields.selection([('0', 'Not Possible'), ('1', 'Possible)], 'Option'] 
```

是：

```
'my_field': fields.selection([('0', 'Not Possible'), ('1', 'Possible)], 'Option') 
```

# php - MySQL YEAR(4) 和 PHP DateTime 玩得不好

> ID：13699226
> 
> 赞同：0
> 
> 时间：2012-12-04T09:02:24.260
> 
> 标签：php, mysql, datetime

我有一个非常粗略的脚本来完成每年参加不同活动的团队填充我的一个数据库表的单调任务。但是，如果我不必每次都返回并更正数据库中的年份，那会好很多。

我有一个查询的年度事件表，这反过来又允许脚本获取该事件的团队列表。使用以下设置年份：

```
$year = date('Y'); 
```

对于每个团队-事件-年份组合，将触发以下查询：

```
INSERT INTO attendance (`team`,`event`,`year`) VALUES ('$team','$event','$year'); 
```

`0000`一切看起来都很好（在我看来），但是即使脚本`2012`在调试时打印，年份也会像在数据库中一样返回。

我的代码如下：

```
// from shared parent script

$year = (date('m') < 9) ? date('Y') : date('Y')+1;

// attendance.php - file with code in question

<?php
header("Refresh: 43200;"); // refresh every 12 hours
ob_start();

echo "<p>Filling event rosters for the {$year} season.</p>"; ob_flush(); flush();

function getTeamList($event) {
    echo "<h3>Event '{$event}':</h3>"; ob_flush(); flush();

    echo "Removing old entries... "; ob_flush(); flush();
    mysql_query("DELETE FROM attendance WHERE event='$event' AND year='$year'");

    echo "Loading list from FIRST TIMS... "; ob_flush(); flush();
    $page =
file_get_contents("https://my.usfirst.org/myarea/index.lasso?page=teamlist&event_type=FRC&event=$event&year=$year&sort_teams=number");
    $page = explode('<td nowrap>',$page);
    $page = implode('<td>',array_slice($page,'1'));
    if ($event == 'CMP') {
        $page2 =
file_get_contents("https://my.usfirst.org/myarea/index.lasso?page=teamlist&event_type=FRC&event=$event&year=$year&sort_teams=number&skip_teams=250");
        $page2 = explode('<td nowrap>',$page2);
        $page2 = implode('<td>',array_slice($page2,'1'));
        $page = '<html><body><center><table>
<tr>
<td>'.$page.' <tr bgcolor="#FFFFFF">
        <td>'.$page2;
    }
    $timsList = new DOMDocument;
    $timsList->loadHTML($page);
    $listings = $timsList->getElementsByTagName('a');

    echo "Adding all current entries... "; ob_flush(); flush();
    foreach ($listings as $listing) {
        if (is_numeric($listing->nodeValue)) {
            $team = $listing->nodeValue;
            $query = "INSERT INTO attendance (`team`,`event`,`year`) VALUES ('$team','$event','$year')";    // Build SQL query for events
            mysql_query($query);
        }
    }
    echo "Done."; ob_flush(); flush();
    if ($event == 'CMP') {
        $div = array('archimedes','curie','galileo','newton');
        foreach ($div as $division) {
            mysql_query("DELETE FROM attendance WHERE event='$division' AND year='$year'");
            $page =
file_get_contents("https://my.usfirst.org/myarea/index.lasso?page=teamlist&event_type=FRC&event=$event&division=$division&year=$year&sort=teamnum");
            $page = explode('<td nowrap>',$page);
            $page = implode('<td>',array_slice($page,'1'));
            $timsList = new DOMDocument;
            @$timsList->loadHTML($page);
            $listings = $timsList->getElementsByTagName('a');
            foreach ($listings as $listing) {
                if (is_numeric($listing->nodeValue)) {
                    $team = $listing->nodeValue;
                    $query  = "INSERT INTO attendance (`team`,`event`,`year`) VALUES ('$team','$division','$year')";    // Build SQL Query
for Divisions
                    mysql_query($query);
                }
            }
        }
    }
}

if (isset($_GET["event"])) {
    $event = strtoupper(mysql_real_escape_string($_GET["event"]));
    mysql_select_db("frc");
    getTeamList($event);
} else {
    mysql_select_db("frc_{$year}scouting");
    $events = mysql_query("SELECT id FROM event WHERE event.start >= NOW()") or die(mysql_error());
    mysql_select_db("frc");
    while ($row = mysql_fetch_array($events)) {
        $event = $row['id'];
        getTeamList($event);
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:09:11.603

MYSQL中年份字段的数据类型是什么？如果将其设置为日期时间字段，则您的日期无效，它将返回该年的 0000。（无效日期在 mysql 日期时间中存储为 0000-00-00 00:00:00）

您可以更改数据库字段以要求 INT 使其工作。另一种选择是将年份发送为 $year.'-01-01 01:01:01' 以将其存储为日期的一月第一个。但考虑到那是虚假的一年，为什么要存储额外的数据？只需使用INT。

更新：

您显示的代码是正确的。它没有错。您没有显示的代码中一定有一些事情发生了，或者您认为您按照您所说的设置了所有内容但没有。

```
$mysqli = new mysqli(...);

$team = 10;
$event = 'Testing';
$year = date('Y');
$query = "INSERT INTO attendance (`team`,`event`,`year`) VALUES ('$team','$event','$year')";

print $query;
$mysqli->query($query); 
```

使用与 mysql 中的确切日期类型一样的魅力。

更新 2：

您在函数中使用 $year，但未包含全局 $year；

```
function getTeamList($event) {
    global $year;
    //....
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T09:19:59.300

# 年份只接受 1901 - 2155

[MySQL 年份类型](http://dev.mysql.com/doc/refman/5.0/en/year.html)只接受特定范围内的年份。如果您插入无效值，它将返回零：

```
mysql> create database so;
Query OK, 1 row affected (0.00 sec)

mysql> use so;
Database changed
mysql> create table example ( y year(4) );
Query OK, 0 rows affected (0.09 sec)

mysql> insert into example values (1234);
Query OK, 1 row affected, 1 warning (0.08 sec)

mysql> select * from example;
+------+
| y    |
+------+
| 0000 |
+------+
1 row in set (0.00 sec)

mysql> insert into example values (2012);
Query OK, 1 row affected (0.07 sec)

mysql> select * from example;
+------+
| y    |
+------+
| 0000 |
| 2012 |
+------+
3 rows in set (0.00 sec)

mysql> 
```

鉴于这就是 MySQL 的行为方式 - 插入的值很可能不是数字，或者不是此范围内的数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T09:04:14.917

你可以试试 ：：

```
INSERT INTO 
attendance (`team`,`event`,`year`) 
VALUES  ('$team','$event',YEAR(CURRENT_DATE)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T09:04:58.980

如果**年份**字段的类型是整数，则更改为：

```
INSERT INTO attendance (`team`,`event`,`year`) VALUES ('$team','$event',$year); 
```

# xml - Postgresql xmlconcat 慢

> ID：13699236
> 
> 赞同：0
> 
> 时间：2012-12-04T09:03:14.067
> 
> 标签：xml, performance, postgresql, plpgsql

我遇到了输出 xml 的 PL/PGsql 存储过程的问题。

基本上，该函数将查询结果作为 xml 输出。

查询速度足够快，但我观察到当结果集变得太大时，xmlconcat 变得越来越慢。

这是功能的简化内容。

```
CREATE OR REPLACE FUNCTION test_function (v_limit int)
    RETURNS xml AS
$BODY$
DECLARE
    v_rec record;
    v_xml xml;
    v_query text;
BEGIN

    v_query := 'SELECT * FROM test_table LIMIT ' || v_limit;

    FOR v_rec IN EXECUTE v_query LOOP

        v_xml := xmlconcat(v_xml,
                     xmlelement(name content, v_rec.content)
                 );

    END LOOP;

    RETURN v_xml ;
END
$BODY$
    LANGUAGE 'plpgsql' SECURITY DEFINER ; 
```

表 test_table 仅包含一个名为 content 类型的文本字段。内容的平均长度为 100 个字符。

问题出现在要连接的大量记录中。

看看这个解释分析。所需的时间呈指数增长。

```
db=# explain analyze select test_function(500);
                                      QUERY PLAN
--------------------------------------------------------------------------------------
 Result  (cost=0.00..0.26 rows=1 width=0) (actual time=42.890..42.893 rows=1 loops=1)
 Total runtime: 42.909 ms
(2 rows)

db=# explain analyze select test_function(1000);
                                       QUERY PLAN
----------------------------------------------------------------------------------------
 Result  (cost=0.00..0.26 rows=1 width=0) (actual time=109.153..109.159 rows=1 loops=1)
 Total runtime: 109.178 ms
(2 rows)

db=# explain analyze select test_function(10000);
                                        QUERY PLAN
------------------------------------------------------------------------------------------
 Result  (cost=0.00..0.26 rows=1 width=0) (actual time=8304.257..8304.277 rows=1 loops=1)
 Total runtime: 8304.298 ms
(2 rows) 
```

对于 10000 条记录，没有 xmlconcat 的单个查询的成本仅为 36 毫秒。

关于提高 xmlconcat 效率的任何建议？

**服务器版本是 8.3.6 ......所以我没有可用的 xmlagg 函数**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:23:24.120

尝试测试此功能：

```
CREATE OR REPLACE FUNCTION test_function (v_limit int)
    RETURNS xml AS
$BODY$
BEGIN
    RETURN SELECT xmlagg(xmlelement(name content, tt.content))
           FROM test_table tt 
           LIMIT v_limit;
END
$BODY$
    LANGUAGE 'plpgsql' SECURITY DEFINER ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:25:07.937

我经常在 XML 中看到这种内存问题。这通常与 DOMparser 的使用有关。DOMparser 将完整的文档保存在内存中，这在您想要集中处理文档时非常方便。

另一个原因可能是旧对象没有正确清理。这有时也是性能下降的原因，因为对文档的解析会创建大量临时对象。

XMLconcat 每次都可能解析所有参数。如果在处理代码时只存在上述问题之一，那么处理将变得越来越慢。

除了深入研究 xmlconcat 的代码之外，不可能完全理解导致这些问题的原因——我猜 Peter Eisentraut 可能知道。但是您唯一需要的是连接一组 xmlelements。使用 xmlconcat 可能太过分了，因为它对于可能可预测的情况来说太复杂了。我建议您停止使用 xmlconcat 并开始自己编写连接。同时可能是最快和最合适的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-06T15:22:54.480

postgresql 11 具有与 xmlagg 相同的较差性能，但可以轻松地将其替换为 string_agg。一些测试：

```
select xmlagg(xmlelement(name "id", s.id)) el
from generate_series(1, 10000) s(id)
- Execution Time: 131.849 ms

select xmlagg(xmlelement(name "id", s.id)) el
from generate_series(1, 20000) s(id)
- Execution Time: 623.741 ms

select xmlagg(xmlelement(name "id", s.id)) el
from generate_series(1, 30000) s(id)
- Execution Time: 1571.545 ms

select string_agg(xmlelement(name "id", s.id)::text, '')::xml el
from generate_series(1, 10000) s(id)
- Execution Time: 38.743 ms

select string_agg(xmlelement(name "id", s.id)::text, '')::xml el
from generate_series(1, 20000) s(id)
- Execution Time: 54.399 ms

select string_agg(xmlelement(name "id", s.id)::text, '')::xml el
from generate_series(1, 30000) s(id)
- Execution Time: 91.766 ms 
```

# c# - C＃ ？运算符语法

> ID：13699238
> 
> 赞同：-2
> 
> 时间：2012-12-04T09:03:17.013
> 
> 标签：c#, operators

一个简单的问题：

在 C# 中是否有这种操作的语法：

*   如果条件，返回对象本身：默认值

就像下面的例子一样，但我不想评估 myObject 两次（这可能是一些更复杂的事情，比如数据库查询）：

```
int myVar = (myObject == DBNull.Value ? 0 : (int)myObject); 
```

我知道在检查 null 时有这样的语法（如下例所示），但是在这种情况下是否可以检查任何不同的值，比如 DBNull.Value ？

```
int myVar = Convert.ToInt32(myObject ?? 0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:04:40.870

您不必对对象进行两次评估。评估对象，将其存储在变量中，并对结果变量进行检查。

您的问题的答案是否定的，您不能随心所欲地用 C# 创建自己的迷你语言。最常见的操作有快捷方式，但自定义三元一元运算符不是其中之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T09:09:16.697

不：

```
int myVar = myObject == DBNull.Value ? 0 : (int)myObject; 
```

是你能做的最好的。它不会仅仅因为它被提及两次而对对象进行两次评估。

或者当然将其包装在一个函数中：

```
int myVar = DBObjectToInt(myObject);

public static int DBObjectToInt(object dbObj)
{
  return dbObj == DBNull.Value ? 0 : (int)dbObj;
} 
```

另一种选择是[`Coalesce`](http://msdn.microsoft.com/en-us/library/ms190349.aspx)在您的 SQL 中使用，因此您甚至不会首先获得 DBNull。

# linux - Bash 脚本错误。意外标记附近的语法错误

> ID：13699240
> 
> 赞同：1
> 
> 时间：2012-12-04T09:03:23.550
> 
> 标签：linux, bash

如果我们的服务器上的负载太高，我正在尝试通过脚本向我发送电子邮件通知。我找到了一个好的，但是当我运行它时它给了我和错误，我不明白为什么。

运行下面的代码会出现错误：

> 第 13 行：意外标记“fi”附近的语法错误

我认为我必须正确布局。谢谢！

```
#!/bin/bash

THR=10
MAIL="address@domain.com"

VAR=`uptime|awk -F, '{print $4}'|awk '{print $3}'`
OUT=`echo "$VAR $THR" | awk '{if ($1 > $2) print "yes"; else print "no"}'`
if [ "$VAR" == "" ]
then
  # it's within the first 24 hours of uptime
  VAR=`uptime|awk -F, '{print $3}'|awk '{print $3}'`
  OUT=`echo "$VAR $THR" | awk '{if ($1 > $2) print "yes"; else print "no"}'`
fi
if [ "$OUT" == "yes" ]
then
  echo "The current load $VAR is greater than the threshold $THR" | mail $MAIL
  -s "Server Load Alert"
  echo "Alert generated because $VAR is greater than $THR"
else
  echo "No alert as $VAR > $THR"
fi
echo "load = $VAR" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T09:45:29.957

对不起，没有冒犯，但你的 bash 风格很糟糕！

这是一个更好的版本：

```
#!/bin/bash

thr=10
mail="address@domain.com"

read var _ < /proc/loadavg

if (( $(bc -l <<< "$var>$thr") )); then
    echo "The current load $var is greater than the threshold $thr" | mail "$mail" -s "Server Load Alert"
    echo "Alert generated because $var is greater than $thr"
else
    echo "No alert as $var <= $thr"
fi
echo "load = $var" 
```

变化如下：

*   使用小写的变量名，因为大写的变量名被认为是不好的 bash 做法。
*   不要`uptime`使用数百万个管道、子shell 和`awk`s 来解析命令的输出，因为它效率低下，相同的信息是直接从文件中获得的`/proc/loadavg`，带有`read`内置函数。
*   不要`awk`用来测试不等式，使用`bc`，它更有效（而且你根本不需要变量`$OUT`）。
*   没有反引号！改为使用`$(...)`构造（更易于阅读、嵌套和更好的 bash 练习）。

我没有测试脚本，只是在阅读时更正了你的脚本。请告诉我它是否适合你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:24:32.110

```
#!/bin/bash

THR=10
MAIL="address@domain.com"

VAR=`uptime|awk -F, '{print $4}'|awk '{print $3}'`
OUT=`echo "$VAR $THR" | awk '{if ($1 > $2) print "yes"; else print "no"}'`
if [ "$VAR" == "" ]
then
# it's within the first 24 hours of uptime
VAR=`uptime|awk -F, '{print $3}'|awk '{print $3}'`
OUT=`echo "$VAR $THR" | awk '{if ($1 > $2) print "yes"; else print "no"}'`
fi
if [ "$OUT" == "yes" ]
then
echo "The current load $VAR is greater than the threshold $THR" | mail $MAIL -s "Server Load Alert"
echo "Alert generated because $VAR is greater than $THR"
else
echo "No alert as $VAR > $THR"
fi
echo "load = $VAR" 
```

这对我有用。我进行了更改，以使“mail $MAIL”和-s“Server Load Alert”保持在同一行。

# shell - 从 udev 规则文件向 shell 脚本传递参数

> ID：13699241
> 
> 赞同：7
> 
> 时间：2012-12-04T09:03:29.427
> 
> 标签：shell, variables, export, environment-variables, udev

在规则文件中，通过传递参数“LABEL”和“DEVNAME”来执行脚本以进行挂载

```
ACTION=="add", RUN+="/appmount/scripts/usb_mount.sh %E{ID_FS_LABEL} %E{DEVNAME}" 
```

在 usb_mount.sh 文件中，将参数值打印为

```
echo "LABEL: $1 DEVNAME: $2" # this does not work reliably 
```

一些设备的 LABEL 字段为空，因此 DEVNAME 打印为标签。在 bash 脚本中，我们可以在双引号中传递 args，即使 args 为空，它也会起作用。

将 args 传递给 udev 规则的等效项是什么？

解决此问题的方法可能是切换参数的顺序。有什么可靠的方法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-20T14:39:25.947

您应该能够使用**单引号**而不是您提到的双引号：

```
ACTION=="add", RUN+="/appmount/scripts/usb_mount.sh '%E{ID_FS_LABEL}' '%E{DEVNAME}'" 
```

当心：我没有测试这个。也许变量替换会在单引号内失败......

引用`man udev`关于“RUN”键的内容：

> 程序名和后面的参数用空格隔开。单引号可用于指定带空格的参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-09T14:43:27.000

只需设置和查询 udev 的 env，这里是一个检查系统是否正在运行 VMWare 的示例：

```
cat /etc/udev/rules.d/99-vmware.rules
KERNEL=="id", SUBSYSTEM=="dmi", ATTR{sys_vendor}=="VMware, Inc.", ENV{VMWARE}='defined'

udevadm info -e  | grep 'VMWARE='
E: VMWARE=defined 
```

# c++ - 发送套接字结果 0x000000be

> ID：13699242
> 
> 赞同：0
> 
> 时间：2012-12-04T09:03:39.457
> 
> 标签：c++, winapi, sockets, send

发送命令中 0x000000be 的结果是什么意思：

```
iResult = send( ConnectSocket, dataToSend, (int) strlen(dataToSend), 0 ); 
```

我在这里没有找到这个返回码：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms740668 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740668(v=vs.85).aspx)

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T09:08:16.700

返回的值`send`是它发送的字节数。如果失败，它会返回`SOCKET_ERROR`并`WSAGetLastError`用于获取错误代码，即链接中列出的代码。请阅读[手册页`send`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740149%28v=vs.85%29.aspx)。

# c# - 要列出的面板的不同控件

> ID：13699243
> 
> 赞同：1
> 
> 时间：2012-12-04T09:03:42.880
> 
> 标签：c#, winforms, controls, panel

我有一个`panel`带有控件的。控件是`buttons`和`progressbars`。我只想将按钮添加到 a `list`，我该怎么做？

```
foreach (Control item in panel1.Controls)
{
    //if (item.GetType() == typeof(ButtonControl))   //i tried this too...
    if ((item is ButtonControl) && (item.Tag.ToString() == "It's not important"))
    {                        
        panel1.BtnList.Add(item);
    }
} 
```

这是我自己的控件，它是从类`ButtonControl`继承的。`Button`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:05:57.643

使用 LINQ 你可以为`System.Windows.Forms.Button`

```
List<Button> buttonList = panel1.Controls.OfType<Button>().ToList(); 
```

如果您也想检查标签值，那么您可以这样做

```
List<Button> buttonList = panel1.Controls.OfType<Button>()
                                         .Where(r => r.Tag.ToString() == "It's not important")
                                         .ToList(); 
```

编辑：如果`ButtonControl`是你自己的班级，那么你可以这样做：

```
 List<ButtonControl> buttonList = panel1.Controls.OfType<ButtonControl>().ToList(); 
```

# wpf - 如何将一组按钮的 IsEnabled 绑定到指定的逻辑？

> ID：13699251
> 
> 赞同：0
> 
> 时间：2012-12-04T09:04:11.003
> 
> 标签：wpf, button, binding, isenabled

有 8 个按钮，分别命名为、`DrawMoneyFromChannel1`等。`DrawMoneyFromChannel2``DrawMoneyFromChannel3`

每个频道上都有一个`List<DeviceChannels>`包含金额的金额。

如果相应频道的金额为零，则不应启用相应频道的按钮。

在这种情况下组织绑定的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T09:29:11.953

不要在 XAML 中对按钮进行硬编码：

```
<!-- BAD -->
<StackPanel>
  <Button x:Name="DrawMoneyFromChannel1" Click="??"
      Content="Draw money from channel 1" IsEnabled="??"/>
  <Button x:Name="DrawMoneyFromChannel2" Click="??"
      Content="Draw money from channel 2" IsEnabled="??"/>
  <Button x:Name="DrawMoneyFromChannel3" Click="??"
      Content="Draw money from channel 3" IsEnabled="??"/>
  <Button x:Name="DrawMoneyFromChannel4" Click="??"
      Content="Draw money from channel 4" IsEnabled="??"/>
  <!-- ... -->
</StackPanel>

<!-- BETTER -->
<ItemsControl ItemsSource="{Binding Channels}">
  <ItemsControl.ItemTemplate>
    <Button Command="{Binding Draw}">
      <TextBlock>
        <TextBlock Text="Draw money from "/>
        <TextBlock Text="{Binding Name}"/>
      </TextBlock>
    </Button>
  </ItemsControl.ItemTemplate>
</ItemsControl> 
```

在此示例中，`Channels`是`ChannelViewModel`对象的集合。该类`ChannelViewModel`实现`INotifyPropertyChanged`并具有一个 property `Amount`、一个 property`Name`和一个`Draw`property `ICommand`。已`ICommand`实现，所以当为零`CanExecute`时为假。`Amount`

# android - 列出适配器第一个和最后一个 id 冲突

> ID：13699252
> 
> 赞同：0
> 
> 时间：2012-12-04T09:04:12.517
> 
> 标签：android, android-layout, android-spinner, android-adapter

我有一个数组列表，并通过适配器将其传递给我的列表。
**实际上，我想为点击的项目设置一些颜色。**

**问题是，每当我单击第一项时，第一项和最后一项都会获得相同的背景颜色。**

*代码：Test.java*

```
//To keep track of previously clicked textview
TextView last_clicked=null;
ListView lv=(ListView)findViewById(R.id.my_activity_list);

//My test array
String[] data={"one","two","three","four","five","six"};

list=new ArrayList<String>(data.length);
list.addAll(Arrays.asList(data));

//evolist is my custom layout
adapter= new ArrayAdapter<String>(c,R.layout.evolist,list);
lv.setAdapter(adapter); 
lv.setOnItemClickListener(new AdapterView.OnItemClickListener(){
  public void onItemClick(AdapterView<?> ad, View v, int pos, long id){

                        //set black for other
                        if(last_clicked!=null)
                            last_clicked.setBackgroundColor(Color.BLACK);

                        //set red color for selected item
                        TextView tv=(TextView)v;
         //I also tried TextView tv=(TextView)v.findViewById(R.id.tvo)
         //I tried printing tv.getId() and noticed that both first and last had same IDs
                        tv.setBackgroundColor( Color.RED );
                        last_clicked=tv;

    }
  }); 
```

*布局：evolist.xml*

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tvo"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:textColor="@android:color/white"
    android:padding="10dp"
    android:textSize="20sp">
</TextView> 
```

我在哪里错了，或者只有我得到这种错误？（三星银河 y 二重奏；2.3.7）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:15:52.603

我认为正在发生的事情是因为它们`views`被回收了`ListView`（当你向上滚动时，`View`从顶部消失的那个是用于出现在底部的项目的那个，称为`convertView`）。

尝试覆盖`getView()`并将颜色设置`convertView`为黑色。

**编辑：**

定义一个类成员：

```
String selected_item=""; 
```

然后将其设置为所选项目的值：

```
lv.setOnItemClickListener(new AdapterView.OnItemClickListener(){
  public void onItemClick(AdapterView<?> ad, View v, int pos, long id){
       selected_item=((TextView) v).getText().toString();
       (TextView)v.setBackgroundColor(Color.RED);
    }
  }); 
```

而对于`getView()`

```
 @Override
        public View getView(int position, View convertView, ViewGroup container) {
            if (convertView == null) { // if it's not recycled, initialize some attributes
                 LayoutInflater li = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                convertView=li.inflate(R.layout.evolist, null);
               }
            if(((TextView) convertView).getText().toString().equals(selected_item)) ((TextView)convertView).setBackgroundColor(Color.RED);
            else ((TextView)convertView).setBackgroundColor(Color.Black);
            return convertView;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:26:48.007

请更新您的代码。

您将设置 findViewById 但您已经设置了布局。

检查这一行：

```
ListView lv=(ListView)findViewById(R.layout.my_activity); 
```

更新代码后给我评论。

# iphone - UIImagePickerController,检查相机

> ID：13699256
> 
> 赞同：5
> 
> 时间：2012-12-04T09:04:17.943
> 
> 标签：iphone, ios, xcode, uiimagepickercontroller

```
-(void)viewDidLoad
{
    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
   {
      imagePicker = [[UIImagePickerController alloc] init];
      imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;
      imagePicker.showsCameraControls = NO;
      [self.view addSubview:imagePicker.view];
      }
      else
      {
      // UIAlertView…
      }
}

    -(void)viewDidAppear:(BOOL)animated
    {
        [super viewDidAppear:animated];
        imagePicker.delegate = self;
        [self presentViewController:imagePicker animated:NO completion:NO];
    } 
```

当您没有相机时，我想发出警报。iPhone 应用程序启动并移入此代码。但是，崩溃（此错误>

`return UIApplicationMain(argc, argv, nil, NSStringFromClass([CameraAppDelegate class])); > Thread 1: signal SIGABRT)`在模拟器中运行时。

为什么是这样？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T09:08:28.170

使用此代码并在文件中添加`UIImagePickerControllerDelegate`委托`.h`

```
 if([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])  
    {
       UIImagePickerController* picker = [[UIImagePickerController alloc] init];
       picker.sourceType = UIImagePickerControllerSourceTypeCamera;
       picker.delegate = self;
      picker.wantsFullScreenLayout = YES;
      [self presentModalViewController:picker animated:YES];
    }
    else
    {
        UIAlertView *altnot=[[UIAlertView alloc]initWithTitle:@"Camera Not Available" message:@"Camera Not Available" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
        altnot.tag=103;
        [altnot show];
        [altnot release];

    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T09:22:40.277

创建 NSObject 类并将其命名为`ClsGlobal`，或您想要的名称..

然后写`+(BOOL)isCameraDeviceAvailable`在你的`ClsGlobal.h`并在`ClsGlobal.m`.

```
+(BOOL)isCameraDeviceAvailable
{
    BOOL isCameraAvailable=NO;
    if([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
    {
        if([UIImagePickerController isCameraDeviceAvailable:UIImagePickerControllerCameraDeviceFront] || [UIImagePickerController isCameraDeviceAvailable:UIImagePickerControllerCameraDeviceRear])
            isCameraAvailable = YES;
    }
    return isCameraAvailable;
} 
```

使用此类方法，如果相机可用，它将返回 YES，否则返回 NO。

`[ClsGlobal isCameraDeviceAvailable];`现在您可以使用if Condition 看起来像这样的方式调用此方法`if([ClsGlobal isCameraDeviceAvailable])`。

此方法将帮助您在任何控制器中的整个项目中，您只需导入 ClsGlobal like `#import "ClsGlobal.h"`。

# java - Apache POI 如何使用条件格式更改数据格式

> ID：13699263
> 
> 赞同：2
> 
> 时间：2012-12-04T09:04:46.167
> 
> 标签：java, excel, apache-poi, xlsx

我是 Apache POI 的用户，我制作了 excel 文件 (.xlsx)，我需要在单元格上使用条件格式。我的问题是：我有一个公式，如果这个公式返回一个介于 0 和 1 之间的值，我想用一位小数显示结果，相反，我想用任何小数显示结果。可以使用条件格式吗？如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-03T19:45:13.313

```
Cell new_cell = row.createCell(index_column_found);
XSSFCellStyle cs = wBook.createCellStyle();
XSSFDataFormat df = wBook.createDataFormat();
cs.setDataFormat(df.getFormat(cell_custom_format));
new_cell.setCellStyle(cs); 
```

这与 POI 3.12 配合得很好

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T13:00:26.277

这是满足您要求的代码：

```
FileOutputStream out = new FileOutputStream("dateFormat.xls");
HSSFWorkbook hssfworkbook = new HSSFWorkbook();
HSSFSheet sheet = hssfworkbook.createSheet("new sheet");
HSSFCellStyle cs = hssfworkbook.createCellStyle();
HSSFDataFormat df = hssfworkbook.createDataFormat();
cs.setDataFormat(df.getFormat("#,##0.0"));

for(int i=0 ;i <100 ; i++ )
{
    double value = new Random(i).nextGaussian();
    HSSFRow row = sheet.createRow((short) i);
    HSSFCell cell = row.createCell((short) 0);
    cell.setCellValue(value);
    if(value>=0 && value<=1)
        cell.setCellStyle(cs);
}

hssfworkbook.write(out);
out.close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T09:17:08.677

使用 DataFormatter 格式化您的单元格值。

检查示例：[http ://www.roseindia.net/java/poi/setdataformat.shtml](http://www.roseindia.net/java/poi/setdataformat.shtml)

API 链接： http: [//poi.apache.org/apidocs/org/apache/poi/ss/usermodel/DataFormatter.html](http://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/DataFormatter.html)

这可能会帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T11:43:52.727

```
 style.setDataFormat(HSSFDataFormat.getBuiltinFormat("@")); 
```

通过使用这种数据格式，我们可以将值作为字符串分配给单元格。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-08T23:04:12.417

嗨，没有官方方法，但我用一个小技巧让它运行：

```
static void setNumberFormat(final XSSFConditionalFormattingRule r,final XSSFSheet s, final String format) {
    final int id = s.getWorkbook().createDataFormat().getFormat(format);
    try {
        final Method m = XSSFConditionalFormattingRule.class.getDeclaredMethod("getDxf", boolean.class);
        m.setAccessible(true);
        final org.openxmlformats.schemas.spreadsheetml.x2006.main.CTDxf dxf = (CTDxf)m.invoke(r, true);
        final org.openxmlformats.schemas.spreadsheetml.x2006.main.CTNumFmt nf = dxf.addNewNumFmt();
        nf.setNumFmtId(id);
        nf.setFormatCode(format);
        dxf.setNumFmt(nf);
    } catch(final Throwable t) {
        t.printStackTrace();
    }
} 
```

用法：

```
private static final String HUMAN1_BYTES = "[<1000]#0\"  B\";[<1000000]#0,\" KB\";#0,,\" MB\"";
private static final String HUMAN2_BYTES = "[<1000000000000]#0,,,\" GB\";[<1000000000000000]#0,,,,\" TB\";#0,,,,,\" PB\"";

public static void addConditionalFormattingRule(final XSSFSheet sheet, final CellRangeAddress[] regions, final byte op, final long limit, final String format) {
    final XSSFSheetConditionalFormatting sheetCF = sheet.getSheetConditionalFormatting();
    final XSSFConditionalFormattingRule rule = sheetCF.createConditionalFormattingRule(op, Long.toString(limit));
    setNumberFormat(rule, sheet, format);
    sheetCF.addConditionalFormatting(regions, rule);
}

public static void setHumanSizeColumns(final XSSFSheet sheet, final char... cols) {
    if(cols == null) return;
    final CellRangeAddress[] ranges = new CellRangeAddress[cols.length];
    for(int i=0;i<cols.length;++i) ranges[i] = CellRangeAddress.valueOf("$"+cols[i]+"1:$"+cols[i]+"1048576");
    addConditionalFormattingRule(sheet, ranges, ComparisonOperator.LT, 1000000000, HUMAN1_BYTES);
    addConditionalFormattingRule(sheet, ranges, ComparisonOperator.GE, 1000000000, HUMAN2_BYTES);
} 
```

# javascript - JS新手，试图理解提升

> ID：13699264
> 
> 赞同：1
> 
> 时间：2012-12-04T09:04:52.297
> 
> 标签：javascript, undefined, hoisting

> **可能重复：**
> [重新声明 JavaScript 变量](https://stackoverflow.com/questions/13626094/redeclare-javascript-variable)

我有下一段代码：

```
var i = 11;
alert(i);
function a(){
    alert(i);
    var i = 2;
    alert(i);
}
a() 
```

第二个`alert(i)`（在函数内部）产生`undefined`. 我猜这与 JS 引擎运行代码的方式有关 - 也许它在遍历代码之前没有先存储变量？

无论如何我认为这不是问题是JS，因为它支持提升。我可能弄错了 - 有人愿意解释吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T09:06:54.703

JavaScript 确实将*声明*提升到它们发生的范围的顶部，但是分配发生在您期望它们发生的地方。您的代码被有效地解析如下：

```
/* Function declarations are hoisted first, which is why you can invoke a
   function before it appears to be defined in the source */
function a() {
    var i; // Declaration is hoisted (this i shadows the outer i)
    alert(i);
    i = 2; // Assignment to local i happens in place
    alert(i);
}
var i; // Declaration is hoisted (at this point, i === undefined)
i = 11; // Assignment happens in place
alert(i);
a(); 
```

这[在规范中](http://es5.github.com/#x10.5)有详细说明。进入新的执行上下文后，会发生以下情况：

> *对于代码*中的每个*VariableDeclaration*和*VariableDeclarationNoIn d*，按源文本顺序执行
> 
>  **   令*dn*为*d*中的*标识符*。
> **   让*varAlreadyDeclared*成为调用*env 的*HasBinding 具体方法并传递*dn*作为参数的结果。*   如果*varAlreadyDeclared*是`false`，那么
>     *   调用*env 的*CreateMutableBinding 具体方法，传递*dn*和*configureBindings*作为参数。
>     *   调用*env 的*SetMutableBinding 具体方法，传递*dn*、`undefined`和*strict*作为参数。**

# jquery - 使用动态名称验证单选按钮

> ID：13699272
> 
> 赞同：-1
> 
> 时间：2012-12-04T09:05:20.697
> 
> 标签：jquery

如何检查所有单选按钮的验证？每个问题都必须检查。

```
<td>QA02</td>
<td>The administrative staff is friendly.</td>
<td><input type="radio" name="QA02" value="1"></td>
<td><input type="radio" name=QA02 value="2"></td>
<td><input type="radio" name=QA02 value="3"></td>
<td><input type="radio" name=QA02 value="4"></td>
<td><input type="radio" name=QA02 value="5"></td>

<td>QA03</td>
<td>The administrative staff shows professionalism in their work.</td>
<td><input type="radio" name="QA03" value="1"></td>
<td><input type="radio" name=QA03 value="2"></td>
<td><input type="radio" name=QA03 value="3"></td>
<td><input type="radio" name=QA03 value="4"></td>
<td><input type="radio" name=QA03 value="5"></td> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T09:07:17.857

我给表提供了 id 以使其处理页面的特定部分。

**[现场演示](http://jsfiddle.net/rajaadil/qx8kx/3/)**

```
$('#btn').click(function() {
    validationSuccess = true;
    $('#tbl tr td:nth-child(1)').each(function() {
        var group = $(this).text();
        if ($('[name=' + group + ']:checked').length == 0) {
            alert(group + "is not selected");
            validationSuccess = false;
        }
    });
    if(validationSuccess)
    {
        alert("Validation successful");
    }
});​ 
```

# java - 在服务器上运行时，Eclipse - Tomcat - java.lang.NoClassDefFoundError: javax/servlet/ServletConfig

> ID：13699275
> 
> 赞同：6
> 
> 时间：2012-12-04T09:05:41.257
> 
> 标签：java, eclipse

我整天都在为此奋斗：我有 DynamicWebProject。它工作得很好。但在某些时候，我决定清理项目中没有使用的额外 jar。清洁后，我遇到了一堆错误。所以我回滚了所有的更改（我的意思是我重新调整了所有的罐子）。但我也玩过项目的构建路径，Eclipse 的调试配置。不幸的是，我不记得这些更改（使用 Path 的东西）。当我在服务器上运行时，tomcat 向我显示：

`

```
04.12.2012 16:37:43 org.apache.catalina.core.ApplicationContext log
SEVERE: StandardWrapper.Throwable
java.lang.NoClassDefFoundError: javax/servlet/ServletConfig
    at org.apache.axis2.deployment.WarBasedAxisConfigurator.<init>(WarBasedAxisConfigurator.java:103)
    at org.apache.axis2.transport.http.AxisServlet.initConfigContext(AxisServlet.java:584)
    at org.apache.axis2.transport.http.AxisServlet.init(AxisServlet.java:454)
    at org.apache.axis2.webapp.AxisAdminServlet.init(AxisAdminServlet.java:60)
    at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1266)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1185)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1080)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5027)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5314)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
04.12.2012 16:37:43 org.apache.catalina.core.StandardContext loadOnStartup
SEVERE: Servlet /library threw load() exception
java.lang.NoClassDefFoundError: javax/servlet/ServletConfig
    at org.apache.axis2.deployment.WarBasedAxisConfigurator.<init>(WarBasedAxisConfigurator.java:103)
    at org.apache.axis2.transport.http.AxisServlet.initConfigContext(AxisServlet.java:584)
    at org.apache.axis2.transport.http.AxisServlet.init(AxisServlet.java:454)
    at org.apache.axis2.webapp.AxisAdminServlet.init(AxisAdminServlet.java:60)
    at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1266)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1185)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1080)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5027)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5314)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
04.12.2012 16:37:43 org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8080"]
04.12.2012 16:37:43 org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
04.12.2012 16:37:43 org.apache.catalina.startup.Catalina start
INFO: Server startup in 3556 ms 
```

`

我真的与这场无休止的斗争息息相关。我做错了什么？Eclipse 和 Tomcat 试图告诉我什么？

* * *

**完毕。**

所以。我如何恢复功能。首先，我的项目是在 SVN 存储库中备份的。接下来我在 Eclipse 中创建新的工作区。不同文件夹中的新工作区。以及来自 SVN 的 Checkout 项目。之后，在步骤 - 在服务器上运行时，我发现了错误，并一一添加了错过的库（jar）。哇，它有效！所以我怎么想，问题在于 eclipce 和项目的配置，也在运行/调试配置中。如何查找配置错误，我不知道 :( 但我会在旧工作区尝试。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T09:10:31.163

您的类路径中缺少 servlet-api.jar。核实

更新

```
1) Right click on project
2) Got to java build path
3) Click on add library in right hand side.
4) Choose server run time.
5) Click next and select your tom cat server.
6) Click on finish. 
```

![在此处输入图像描述](../Images/3c405e485ea0f69f0162e99c51f7dbda.png)

然后再试一次

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T09:18:24.123

转到`Java Build Path`，转到`Libraries`，单击`Add Library`，选择`Server Runtime`，单击`Next`，选择您的网络服务器，然后单击完成。清理并部署以查看它是否有效。

# webserver - 如何从主机使用安装在来宾机器上的网络服务器

> ID：13699282
> 
> 赞同：3
> 
> 时间：2012-12-04T09:06:11.140
> 
> 标签：webserver, vmware

我正在使用 VMWare 播放器，并且在我的 Linux 客户机
（带有 Tomcat 的 Linux Mint）中安装了一个网络服务器。

我想从我的主机
（Windows 7）访问网络服务器。

需要哪些步骤？
谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T23:01:05.543

在你的 Linux 机器（来宾）上，打开一个终端，然后输入：ifconfig

查看输出，你应该看到一个 INET ADDR（或类似的东西），它旁边会有你的 IP 地址。像 192.168.7.10 （这是一个例子）。

然后回到你的主机，在网络浏览器中输入“http://（你刚刚找到的 ip）”

这应该连接到您的网络服务器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-12T05:31:48.340

或者，`hostname`在来宾 Linux 机器上使用命令找出它的名称（我认为默认值是*ubuntu*），然后在您的主机上使用它 - 例如`http://(the name you just found)`（在我的情况下，`http://ubuntu/`）

# python - 如何在python中获取调用者的文件名、方法名

> ID：13699283
> 
> 赞同：45
> 
> 时间：2012-12-04T09:06:12.630
> 
> 标签：python

例如，`a.boo`方法调用`b.foo`方法。在`b.foo`方法中，我怎样才能得到一个文件名（我不想传递`__file__`给`b.foo`方法）......

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-12-04T09:08:11.553

您可以使用该`inspect`模块来实现此目的：

```
frame = inspect.stack()[1]
module = inspect.getmodule(frame[0])
filename = module.__file__ 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2020-02-19T10:15:03.193

# Python 3.5+

## 单线

要获取完整的文件名（带有路径和文件扩展名），请在被调用者中使用：

```
import inspect
filename = inspect.stack()[1].filename 
```

## 完整文件名与仅文件名

要检索调用者的文件名，请使用[inspect.stack()](https://docs.python.org/3/library/inspect.html#inspect.stack)。此外，以下代码还会修剪完整文件名开头的路径和结尾的文件扩展名：

```
# Callee.py
import inspect
import os.path

def get_caller_info():
  # first get the full filename (including path and file extension)
  caller_frame = inspect.stack()[1]
  caller_filename_full = caller_frame.filename

  # now get rid of the directory (via basename)
  # then split filename and extension (via splitext)
  caller_filename_only = os.path.splitext(os.path.basename(caller_filename_full))[0]

  # return both filename versions as tuple
  return caller_filename_full, caller_filename_only 
```

然后可以像这样使用它：

```
# Caller.py
import callee

filename_full, filename_only = callee.get_caller_info()
print(f"> Filename full: {filename_full}")
print(f"> Filename only: {filename_only}")

# Output
# > Filename full: /workspaces/python/caller_filename/caller.py
# > Filename only: caller 
```

### 官方文档

*   [os.path.basename()](https://docs.python.org/3/library/os.path.html#os.path.basename)：从文件名中删除路径（仍然包括扩展名）
*   [os.path.splitext()](https://docs.python.org/3/library/os.path.html#os.path.splitext)：拆分文件名和文件扩展名

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2018-09-06T10:31:42.313

受 ThiefMaster 的回答启发，但如果`inspect.getmodule()`返回也可以`None`：

```
frame = inspect.stack()[1]
filename = frame[0].f_code.co_filename 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-04-02T08:12:43.630

这可以通过[`inspect`](https://docs.python.org/3/library/inspect.html)模块来完成，特别是[`inspect.stack`](https://docs.python.org/3/library/inspect.html#inspect.stack)：

```
import inspect
import os.path

def get_caller_filepath():
    # get the caller's stack frame and extract its file path
    frame_info = inspect.stack()[1]
    filepath = frame_info[1]  # in python 3.5+, you can use frame_info.filename
    del frame_info  # drop the reference to the stack frame to avoid reference cycles

    # make the path absolute (optional)
    filepath = os.path.abspath(filepath)
    return filepath 
```

示范：

```
import b

print(b.get_caller_filepath())
# output: D:\Users\Aran-Fey\a.py 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-04T09:09:11.097

您可以使用该`traceback`模块：

```
import traceback 
```

你可以像这样打印回溯：

```
print traceback.format_stack() 
```

我已经好几年没用过了，但这应该足以让你开始。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-01-30T17:14:48.637

阅读所有这些解决方案，似乎这也有效？

```
import inspect
print inspect.stack()[1][1] 
```

框架中的第二项已经是调用者的文件名，还是这不可靠？

# java - 如何在具有即时消息功能的应用程序中保持 Blackberry Socket 连接有效

> ID：13699284
> 
> 赞同：4
> 
> 时间：2012-12-04T09:06:23.433
> 
> 标签：java, blackberry, java-me

我在长时间保持应用程序中的套接字连接时遇到问题。片刻后（每 2 分钟）似乎断开连接，尤其是在空闲时。

碰巧我正在编写一个具有聊天功能的应用程序，这需要我在我的应用程序的生命周期内保持一个套接字连接。我已经尝试过每分钟 ping 服务器之类的技巧，但这构成了（黑莓）资源的消耗。黑莓推送不是一个选项（因为我有除 BB 设备以外的其他客户端）。

请问有谁知道我该如何解决这个问题，或者仍然建议另一种解决方法？

[我也对即时消息传递跨移动平台应用程序（如 WhatsApp、Kiks 等）如何在不过度消耗资源的情况下实现这一目标感兴趣（至少我的资源监视器应用程序不会犯规）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T01:34:36.197

> 黑莓推送不是一个选项（因为我有除 BB 设备以外的其他客户端）。

这很复杂，但流行的应用程序肯定会利用 BlackBerry 推送以及所有其他移动平台上提供的推送功能。这是“真正”支持黑莓的一部分，而不仅仅是事后的想法。简短的回答是使用 BlackBerry 推送服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T09:38:41.997

我们在几个 BB OS 版本上发现了与套接字连接相同的行为。我们尝试使用套接字连接选项——支持超时、超时值等。但我们没有发现任何在所有平台上一致的可靠和可行的东西。

所以我们最终得到了下一个配置：

1.  带推送的设备 - 在不活动超时切换到推送后通过 ping 保持套接字打开
2.  没有推送的设备 - 使用最长的可用 ping 保持套接字

情况 2 非常罕见，我们也选择了最长的最长 ping 间隔以保持连接打开。它不能 100% 工作，我们看到在某些设备上它仍然断开连接。但我们会谨慎处理此案，重新开案。

希望这可以帮助。成功！

# ruby-on-rails - 如何为选定记录的rails中的nested_attributes创建文本字段？

> ID：13699285
> 
> 赞同：0
> 
> 时间：2012-12-04T09:06:30.443
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, edit, nested-attributes, update-attributes

我有三个模型**Report** , **Question** , **Answer**

## 回答

```
belong_to :question 
```

## 问题

```
belong_to :reports
has_many :answers, :dependent => :destroy  
accepts_nested_attributes_for :answers, :allow_destroy => true 
```

## 报告

```
has_many :questions, :dependent => :destroy  
accepts_nested_attributes_for :questions, :allow_destroy => true 
```

在创建新报告时，会随机选择一些问题添加到报告中并以这种方式显示表格：

**报表**

```
 <%= form_for @report do |f| %>
    <div class="field">
        <%= f.fields_for :questions do |builder| %>
          <%= render "question_fields", :f => builder %>
        <% end %>
    </div>
    <div class="actions">
        <%= f.submit "Submit Report"%>
    </div>
    <% end %> 
```

**---部分问题_字段---**

```
<h4 class="question_name">
    <%= f.object.name %>
</h4>

<%= f.fields_for :answers do |answer,index| %>  
    <%= render 'answer_fields', :f => answer %>  
<% end %> 
```

**---Partial Answer_Fields---** <%= f.text_field :name, :placeholder => "在这里添加你的答案" %>

但是，当我尝试编辑/创建新报告时，它会获取该特定问题的所有现有答案。而我想实现类似的东西：

**---部分问题_字段---**

```
<h4 class="ques_title">
    <%= f.object.name %>
</h4>

<% f.object.answers_for_report(@report).each do |answer| %>  
    <%= render 'answer_fields', :f => answer %>  
<% end %> 
```

**---部分问题_字段---**

```
 <b>What should be code here so that it again acts same as nested attributes and gets updated succesfully !!!</b> 
```

## 问题模型

```
belong_to :reports
has_many :answers, :dependent => :destroy  
accepts_nested_attributes_for :answers, :allow_destroy => true

def answers_for_report(@report)
    self.answers.where("report_id = ? ",report.id)
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:22:56.407

这是我的问题的答案：

报告表就像

```
<%= form_for @report do |f| %>
<div class="field">
    <%= f.fields_for :questions do |builder| %>
      <%= render "question_fields", :f => builder %>
    <% end %>
</div>
<div class="actions">
    <%= f.submit "Submit Report"%>
</div>
<% end %> 
```

然后问题'question_fields'就像

```
<%= question.fields_for :answers, question.object. answers_for_report(@report) do |answer| %>  
    <%= render 'answer_fields', :f => answer %>  
<% end %> 
```

这仅传递答案的集合/记录集，并仅为那些选定的答案呈现字段。

# sql - 查找行之间的时间差

> ID：13699286
> 
> 赞同：0
> 
> 时间：2012-12-04T09:06:36.497
> 
> 标签：sql, sql-server-2008

我在表中有大约 30000 行，每 10 分钟有一次时间戳，大约有 20 列。

```
timestamp  Col1 Col2 Col3 ... col20 
```

`timestamp`就像每10分钟一次。例如：`18-05-2012 20:07`, `18-05-2012 20:17`,`18-05-2012 20:27`

列具有整数或浮点数据。

我的问题是：我需要找到数据未记录在列中的间隙和持续时间。假设列有Value、NULL、NULL、Value、Value、NULL。它有各自的时间戳。

我需要像 NULL 值和持续时间（开始时间 - 结束时间）的开始时间和结束时间这样的输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:11:47.370

好的，正如我现在所理解的那样，您想要在任何列中没有记录某些内容的行之间的时间差，对吗？

然后试试这个：

```
SELECT
yt1.[timestamp] AS StartTime,
MIN(yt2.[timestamp]) AS EndTime,
DATEDIFF(s, yt1.[timestamp], MIN(yt2.[timestamp])) AS DifferenceInSeconds
FROM
yourTable yt1
LEFT JOIN yt2 ON yt1.[timestamp] < yt2.[timestamp]
WHERE
yt1.Col1 IS NULL
OR yt1.Col2 IS NULL
...
OR yt1.Col20 IS NULL
OR yt2.Col1 IS NULL
...
OR yt2.Col20 IS NULL 
GROUP BY yt1.[timestamp] 
```

老实说，我不确定这是否有效，因为您没有提供示例数据来玩一下。

要在 stackoverflow 上获取 hh:mm:ss 格式搜索问题的时差，例如[这个](https://stackoverflow.com/questions/9031160/convert-seconds-to-datetime-in-sql-server).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:16:49.000

我认为您应该使用 2 left joins: 来检测 NULL 外观的开始，通常我的答案看起来很像以前的答案：

```
select distinct  max(table2.dt) as startTime, min(table3.dt) as endTime,  
datediff(minute, max(table2.dt), min(table3.dt)) as timeDifference
from Table_2 table1
left join Table_2 table2 on table2.dt < table1.dt 
left join Table_2 table3 on table3.dt > table1.dt
where (table3.tt1 is not NULL and table3.tt2 is not NULL)
  and (table2.tt1 is not NULL and table2.tt2 is not NULL)
  and (table1.tt1 is NULL or table1.tt2 is NULL)
  group by table1.dt, table1.id 
```

# php - 试图从变量中过滤掉任何包含单词 thumb 的实例

> ID：13699289
> 
> 赞同：1
> 
> 时间：2012-12-04T09:06:43.277
> 
> 标签：php

这是一个脚本的一部分，它从一个文件夹中抓取所有文件，过滤掉图像文件，然后显示它们。我想在 $names 变量开始按扩展名过滤之前删除包含单词“thumb”的所有实例。

```
sort($names);

$tempvar=0;
for ($i=0;$names[$i];$i++){
$ext=strtolower(substr($names[$i],-4));
if ($ext==".jpg"||$ext==".gif"||$ext=="jpeg"||$ext==".png"){$names1[$tempvar]=$names[$i];$tempvar++;}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:37:07.963

似乎您有一个 for 循环，您可以在其中使用（更简单的）foreach 代替。有什么理由不使用简单的array_filter？这将使代码更易于阅读（无论如何对我来说）：

```
<?php
$names = array(
    'foo.thumb.jpg',
    'bar.jpg',
    'bar.THUMB.jpg',
    'qux.png',
    'README.TXT'
);

$extensions = array( 'jpg', 'gif', 'jpeg', 'png' );

$filtered = array_filter( $names, function( $name ) use ( $extensions ) {
    if( stripos( $name, 'thumb' ) !== false ) {
        return false;
    }
    return in_array( pathinfo( $name, PATHINFO_EXTENSION ), $extensions );
});

var_dump( $filtered ); 
```

另外，`substr($names[$i], -4 )`我选择使用 pathinfo，而不是 。这样，扩展名可以是任意长度，并且总是能正确返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:25:07.327

```
$tempvar=0;
for ($i=0;$names[$i];$i++){

  if(strpos($names[$i], 'thumb') === false){

    $ext=strtolower(substr($names[$i],-4));
    if ($ext==".jpg"||$ext==".gif"||$ext=="jpeg"||$ext==".png"){ 
        $names1[$tempvar]=$names[$i];$tempvar++;}
    }
  }
} 
```

# go - 如何在 Go 程序中使用 pprof

> ID：13699297
> 
> 赞同：9
> 
> 时间：2012-12-04T09:06:56.357
> 
> 标签：go, google-perftools, pprof

如何在 Go 程序中使用 pprof？

有一个名为[net/http/pprof](http://golang.org/pkg/net/http/pprof/)的 Go 包，但我不能使用它。

该文件说`go tool pprof http://localhost:6060/debug/pprof/heap`，这是行不通的。

而且，下面的_是什么意思？

`import _ "net/http/pprof"`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-11T07:52:13.783

根据[您的评论](https://stackoverflow.com/questions/13699297/how-to-use-pprof-in-go-program#comment18812277_13699612)，问题可能是您没有使用正确的端口号。

如果您正在运行 http 服务器`http://localhost:9997`，那么我认为您希望使用以下命令运行命令`http://localhost:9997`：

```
$ go tool pprof http://localhost:9997/debug/pprof/heap 
```

根据[net/http/pprof pkg doc page](http://golang.org/pkg/net/http/pprof/#pkg-overview)，如果您的应用程序已经在运行一个 http 服务器，您不需要启动一个，只需`import _ "net/http/pprof"`在程序中包含某个地方。`http://localhost:6060`是以服务器为例启动的，主机和端口是任意的。

`import _ "net/http/pprof"`表示包已导入，但您不使用任何导出的标识符。根据[go 语言规范](http://golang.org/ref/spec#Import_declarations)，这将只为它的副作用导入包。我认为，这些副作用包括执行[包源文件](http://golang.org/src/pkg/net/http/pprof/pprof.go?#L59)中定义的[init() 函数](http://golang.org/doc/effective_go.html#init)，显然还有[已注册的变量](http://golang.org/pkg/expvar/#pkg-overview)。

此外，您可能会发现这篇博文很有帮助：

[http://blog.golang.org/2011/06/profiling-go-programs.html](http://blog.golang.org/2011/06/profiling-go-programs.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T09:24:14.120

“不起作用”是什么意思？什么是预期的，什么是观察的？

跑

```
$ go tool pprof -h 
```

查看此工具版本的帮助。我的本地版本在发布时（即介于两者之间）都没有提示。表明：

```
(10:16) jnml@fsc-r550:~$ go tool pprof -h
Option h is ambiguous (heapcheck, help)
Invalid option(s)

Usage:
pprof [options] <program> <profiles>
   <profiles> is a space separated list of profile names.
pprof [options] <symbolized-profiles>
   <symbolized-profiles> is a list of profile files where each file contains
   the necessary symbol mappings  as well as profile data (likely generated
   with --raw).
pprof [options] <profile>
   <profile> is a remote form.  Symbols are obtained from host:port/pprof/symbol

   Each name can be:
   /path/to/profile        - a path to a profile file
   host:port[/<service>]   - a location of a service to get profile from

   The /<service> can be /pprof/heap, /pprof/profile, /pprof/pmuprofile,
                         /pprof/growth, /pprof/contention, /pprof/wall,
                         /pprof/thread, or /pprof/filteredprofile.
   For instance:
     pprof http://myserver.com:80/pprof/heap
   If /<service> is omitted, the service defaults to /pprof/profile (cpu profiling).
pprof --symbols <program>
   Maps addresses to symbol names.  In this mode, stdin should be a
   list of library mappings, in the same format as is found in the heap-
   and cpu-profile files (this loosely matches that of /proc/self/maps
   on linux), followed by a list of hex addresses to map, one per line.

   For more help with querying remote servers, including how to add the
   necessary server-side support code, see this filename (or one like it):

   /usr/doc/google-perftools-1.5/pprof_remote_servers.html

Options:
   --cum               Sort by cumulative data
   --base=<base>       Subtract <base> from <profile> before display
   --interactive       Run in interactive mode (interactive "help" gives help) [default]
   --seconds=<n>       Length of time for dynamic profiles [default=30 secs]
   --add_lib=<file>    Read additional symbols and line info from the given library
   --lib_prefix=<dir>  Comma separated list of library path prefixes

Reporting Granularity:
   --addresses         Report at address level
   --lines             Report at source line level
   --functions         Report at function level [default]
   --files             Report at source file level

Output type:
   --text              Generate text report
   --callgrind         Generate callgrind format to stdout
   --gv                Generate Postscript and display
   --web               Generate SVG and display
   --list=<regexp>     Generate source listing of matching routines
   --disasm=<regexp>   Generate disassembly of matching routines
   --symbols           Print demangled symbol names found at given addresses
   --dot               Generate DOT file to stdout
   --ps                Generate Postcript to stdout
   --pdf               Generate PDF to stdout
   --svg               Generate SVG to stdout
   --gif               Generate GIF to stdout
   --raw               Generate symbolized pprof data (useful with remote fetch)

Heap-Profile Options:
   --inuse_space       Display in-use (mega)bytes [default]
   --inuse_objects     Display in-use objects
   --alloc_space       Display allocated (mega)bytes
   --alloc_objects     Display allocated objects
   --show_bytes        Display space in bytes
   --drop_negative     Ignore negative differences

Contention-profile options:
   --total_delay       Display total delay at each region [default]
   --contentions       Display number of delays at each region
   --mean_delay        Display mean delay at each region

Call-graph Options:
   --nodecount=<n>     Show at most so many nodes [default=80]
   --nodefraction=<f>  Hide nodes below <f>*total [default=.005]
   --edgefraction=<f>  Hide edges below <f>*total [default=.001]
   --focus=<regexp>    Focus on nodes matching <regexp>
   --ignore=<regexp>   Ignore nodes matching <regexp>
   --scale=<n>         Set GV scaling [default=0]
   --heapcheck         Make nodes with non-0 object counts
                       (i.e. direct leak generators) more visible

Miscellaneous:
   --tools=<prefix>    Prefix for object tool pathnames
   --test              Run unit tests
   --help              This message
   --version           Version information

Environment Variables:
   PPROF_TMPDIR        Profiles directory. Defaults to $HOME/pprof
   PPROF_TOOLS         Prefix for object tools pathnames

Examples:

pprof /bin/ls ls.prof
                       Enters "interactive" mode
pprof --text /bin/ls ls.prof
                       Outputs one line per procedure
pprof --web /bin/ls ls.prof
                       Displays annotated call-graph in web browser
pprof --gv /bin/ls ls.prof
                       Displays annotated call-graph via 'gv'
pprof --gv --focus=Mutex /bin/ls ls.prof
                       Restricts to code paths including a .*Mutex.* entry
pprof --gv --focus=Mutex --ignore=string /bin/ls ls.prof
                       Code paths including Mutex but not string
pprof --list=getdir /bin/ls ls.prof
                       (Per-line) annotated source listing for getdir()
pprof --disasm=getdir /bin/ls ls.prof
                       (Per-PC) annotated disassembly for getdir()

pprof http://localhost:1234/
                       Enters "interactive" mode
pprof --text localhost:1234
                       Outputs one line per procedure for localhost:1234
pprof --raw localhost:1234 > ./local.raw
pprof --text ./local.raw
                       Fetches a remote profile for later analysis and then
                       analyzes it in text mode.

FATAL ERROR: Invalid option(s)
go tool pprof: exit status 1
(10:16) jnml@fsc-r550:~$ 
```

关于第二个问题： `import _ "foo"' 习语是导入包 foo 只是为了 foo 初始化的副作用。这可能包括例如注册由 foo 提供的功能，以便在其他包中可用。一个具体的例子是特定的图像格式[处理包](http://golang.org/pkg/image/#pkg-subdirectories)（见底部的“子目录”）和抽象[图像](http://golang.org/pkg/image/)包。

# ios - RotationMode 在 CAKeyframeAnimation（线性路径）中不起作用

> ID：13699303
> 
> 赞同：0
> 
> 时间：2012-12-04T09:07:07.277
> 
> 标签：ios, core-animation, cakeyframeanimation

我试图让我的视图旋转，只要它通过路径（线性路径），但它不会旋转。

这是我的代码：

```
 CAKeyframeAnimation *animKF = [CAKeyframeAnimation animationWithKeyPath:@"position"];
animKF.values = [NSArray arrayWithObjects:[NSValue valueWithCGPoint:CGPointMake(100, 100)], [NSValue valueWithCGPoint:CGPointMake(400, 400)], [NSValue valueWithCGPoint:CGPointMake(700, 100)], [NSValue valueWithCGPoint:CGPointMake(1000, 400)], nil];

animKF.keyTimes = [NSArray arrayWithObjects:[NSNumber numberWithFloat:0.0], [NSNumber numberWithFloat:0.25], [NSNumber numberWithFloat:0.5], [NSNumber numberWithFloat:1.0], nil];

animKF.duration = 6;

animKF.rotationMode =  kCAAnimationRotateAuto;

[imageView.layer addAnimation:animKF forKey:@"keyframe"]; 
```

但是imageView（图中蓝脸）并没有沿路​​径旋转（图中红线）

![小路](../Images/8a59e655f5e6e4db0d0b30f77758c301.png)

太感谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T09:21:56.017

从以下文档[`rotationMode`](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CAKeyframeAnimation_class/Introduction/Introduction.html#//apple_ref/occ/instp/CAKeyframeAnimation/rotationMode)：

> `nil`未定义在未提供路径对象时将此属性设置为非值的效果。

在您的代码中，您正在设置`values`关键帧动画的 -property 但您需要设置 a [`path`](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CAKeyframeAnimation_class/Introduction/Introduction.html#//apple_ref/occ/instp/CAKeyframeAnimation/path)。

* * *

您应该根据您的值创建一个 CGPath 并将其设置为关键帧的路径。

```
UIBezierPath *animationPath = [UIBezierPath bezierPath];
[animationPath moveToPoint:CGPointMake(100, 100)];
[animationPath addLineToPoint:CGPointMake(400, 400)];
[animationPath addLineToPoint:CGPointMake(700, 100)];
[animationPath addLineToPoint:CGPointMake(1000, 400)];

animKF.path = animationPath.CGPath; 
```

# actionscript-3 - FlexGlobals.topLevelApplication.url 返回值延迟

> ID：13699306
> 
> 赞同：1
> 
> 时间：2012-12-04T09:07:11.367
> 
> 标签：actionscript-3, apache-flex, flex4.5

```
protected function onApplicationCreationComplete( event : FlexEvent ) : void
{
   var xURL : String = FlexGlobals.topLevelApplication.url;
   // ...
   // next fragment of code
} 
```

*`next fragment of code`*将在`xURL`收到应用程序 URL 之前执行。

准备就绪时如何捕获`FlexGlobals.topLevelApplication.url`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T12:55:38.890

此属性在应用程序的初始化函数中设置。您可以在调用 super.initialize() 后尝试覆盖它并读取 url 属性

# twitter - 拉取受保护帐户的推文

> ID：13699311
> 
> 赞同：0
> 
> 时间：2012-12-04T09:07:30.670
> 
> 标签：twitter, twitter-oauth

我需要提取受保护帐户的推文并在 Intranet 门户上显示它们。我认为我需要使用受保护帐户授权的帐户并使用该帐户提取推文，但据我所知，不再支持基本身份验证。那么，有人能把我引向正确的方向吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T00:33:05.797

你的想法听起来可行。您的门户可以公开显示受保护帐户之后的帐户的时间线。但请确保它不违反 Twitter 政策。

所以你必须这样做：

1.  为门户创建帐户。我们称之为“@portal_account”。
2.  确保保护其推文的帐户（我们称其为“@protected_account”）允许@portal_account 查看其推文。
3.  创建一个 Twitter 应用程序以查看时间线。我们称之为“Portal_app”。为此，请访问[Twitter Developers](https://dev.twitter.com/)，这是专门用于 Twitter 开发的 Twitter 站点。使用应用程序所有者 Twitter 凭据登录（Twitter 开发人员使用 Twitter 用户名和密码登录）。[完成后，在此处](https://dev.twitter.com/apps/new)创建一个新应用程序。给它一个名称（“Portal_app”）、一个描述、一个 URL 和一个回调 URL（用于授权 Portal_app 使用@portal_account 的帐户）。出于安全原因，请授予 Portal_app 对用户帐户的只读访问权限。创建应用程序后，您可以通过其所有者的 Twitter（开发人员）帐户访问其设置。为此，请转到[此处](https://dev.twitter.com/apps)并单击应用程序名称。
4.  认证时间！Twitter 不再使用基本身份验证，而是使用 OAuth。OAuth 包括让服务（此处为 Twitter）用户（此处为 @portal_account）授权第三方实体（此处为“Portal_app”Twitter 应用程序）在不向第三方实体提供其服务凭证（用户名和密码）的情况下将其帐户用于服务）。在 Twitter 上，此授权包含两个令牌——一个“公共”令牌和一个秘密令牌——用于验证对 Twitter 的请求。所以你在这里要做的是获得两个象征@portal_account 授权Portal_app 使用其帐户的令牌。请注意，如果 @portal_account 是 Portal_app 的所有者，您将能够从应用程序设置中生成令牌。否则，您将不得不创建一个特殊程序来获取令牌。看[Twitter 开发人员文档中的相应页面](https://dev.twitter.com/docs/auth/obtaining-access-tokens)。
5.  使用 @portal_account 帐户和 Portal_app 显示您要显示的推文。为此，您可以使用[Twitter REST API](https://dev.twitter.com/docs/api/1.1)。您将获得用于显示特定推文、@portal_account 的时间线、其他用户（其中​​有@protected_account）时间线的端点。

如果您想了解有关 Twitter 开发和 API 的更多详细信息，请参阅[Twitter 开发人员文档](https://dev.twitter.com/docs)。它是您与 Twitter 相关内容的朋友，并且非常完整。

# powershell - 如何在作为字符串而不是 ScriptBlock 的远程会话中执行 PowerShell 块？

> ID：13699315
> 
> 赞同：1
> 
> 时间：2012-12-04T09:07:39.733
> 
> 标签：powershell, powershell-remoting, powershell-3.0

我正在尝试在远程 PowerShell 会话中自定义我的提示。这一切都很好：

```
$session = New-PSSession MyRemoteServer
Invoke-Command -Session $session -ScriptBlock {
    New-PSDrive -Name MyApp -PSProvider FileSystem -Root D:\Applications\MyApp | Out-Null
    CD MyApp:\
    function prompt { "test" }
}
Enter-PSSession -Session $session 
```

它创建一个会话，为方便起见设置一个 PSDrive，然后将提示自定义为“测试”。

但是，我不希望我的提示说“测试”，我想执行一些[为服务器名称着色的代码](https://stackoverflow.com/q/13689797/25124)。但是，我不想在脚本块（上面的a）中对其进行硬编码，因为我想在许多类似的函数中重用它来连接到不同类型的服务器。

所以我在本地定义了函数，并且可以使用“Get-Content function:\RemotePrompt”获取内容。但是，我正在努力弄清楚如何将其发送到另一个会话。Invoke-Expression 似乎不需要会话，并且 Invoke-Command 似乎总是期望一个脚本块。

我真正想要做的是类似`Invoke-Command -ScriptBlock { function prompt $MyRemoteCode }`但变量被“解析”的东西。

这可能/容易吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T12:51:50.513

使用前缀为 $using: 的 Powershell V3 变量会自动识别为局部变量并发送到远程计算机，以便您可以使用
`PS>$test="local var"
PS>icm -cn server1 -ScriptBlock{write-host $using:test}
local var`

您可以在此处查看 V3 的所有新功能：http: [//blogs.msdn.com/b/powershell/archive/2012/06/14/new-v3-language-features.aspx](http://blogs.msdn.com/b/powershell/archive/2012/06/14/new-v3-language-features.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T09:53:30.740

您可以使用`scriptblock`.net 类：

```
[scriptblock]::Create( $s) 
```

其中 $s 是一种`string`类型。

# webgl - 如何像画布 2d lineTo 一样绘制宽度路径

> ID：13699321
> 
> 赞同：0
> 
> 时间：2012-12-04T09:07:51.763
> 
> 标签：webgl, three.js

如何像画布 2d lineTo 一样绘制宽度路径。我认为 THREE.Line 非常接近我的要求，但我发现在某些平台上线的宽度不能大于 1。有什么办法可以达到这个目的？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T20:21:18.033

线宽（和大写等）被设置为*材质的属性，*而不是线。所以只需分配（作为测试）material.linewidth = 3 并尝试一下。查看 THREE.LineBasicMaterial 的 build/three.js 代码清单以了解更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T07:02:29.577

为了绕过线宽限制，我认为您必须自己将线几何生成为三角形，而不是依靠 GL 来绘制粗线。canvas2d 线虽然做了一些奇怪的事情（http://jsfiddle.net/greggman/hWmWT/）

另一种选择是在您的线条图代码中添加一些 2d 偏移量，并多次绘制相同的线，每次都更改偏移量。

[http://github.com/corbanbrook/webgl-2d](http://github.com/corbanbrook/webgl-2d)可能有你需要的

# asp.net - 实体框架连接字符串

> ID：13699322
> 
> 赞同：0
> 
> 时间：2012-12-04T09:07:53.663
> 
> 标签：asp.net, entity-framework

我在 VisualStudio 2010 中使用实体。当我调试我的 ASP.NET 应用程序时，它使用当前用户身份连接到数据库，而不是我的连接字符串中指定的内容：

> ```
>  <connectionStrings>
>      <add name="RFV2_Entities" connectionString="metadata=res://*/Model.RFDB.csdl|res://*/Model.RFDB.ssdl|res://*/Model.RFDB.msl;provider=System.Data.SqlClient;provider
>  connection string=&quot;data source=xxx\xxx;initial
>  catalog=xxx;User Id=xxx;Password=yyy;integrated
>  security=True;multipleactiveresultsets=True;App=EntityFramework&quot;"
>  providerName="System.Data.EntityClient" />    </connectionStrings> 
> ```

我是否必须指定一些东西才能让我的应用程序使用连接字符串标识？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T09:11:17.437

指定“Integrated Security=True”或“User Id”和“Password”，不能同时指定。

请参阅[此关键字列表](http://connectionstrings.com/Articles/Show/all-sql-server-connection-string-keywords)，其中指定了“密码”：

> SQL Server 帐户登录的密码。**不与**（强烈推荐的）**'Integrated Security=true' 选项**一起使用。

（我的重点）

# python - Lamson 可以在 TLS/SSL 下运行并对用户进行身份验证吗？

> ID：13699324
> 
> 赞同：4
> 
> 时间：2012-12-04T09:07:56.850
> 
> 标签：python, smtp-auth, lamson

在能够向 Lamson 发送邮件之前，我找不到任何关于用户进行身份验证的信息。我发现唯一提到的 SSL/TLS 是在 Relay 类中，据我所知，它在 Lamson 处理完消息后运行。我希望 Lamson在进行任何处理*之前*检查 LDAP 凭据，但我不希望通过网络发送的密码未加密。如果有某种身份验证处理程序，我可以处理 LDAP 部分，但我也没有找到。

我还没有编写任何代码，现在只是通过阅读文档来探索选项。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T16:54:29.980

答案是 Lamson 不支持 SMTP AUTH（要求用户在服务器接受电子邮件之前进行身份验证的 SMTP 扩展）只是因为它建立在 Python 标准库`smtpd`模块之上，该模块本身不支持 SMTP AUTH .

您可以通过查看源`lamson.server.SMTPReceiver`（这是在 Lamson 中实现传入 SMTP 服务器并继承自的类`smptd.SMTPServer`）和`smtpd.SMTPChannel`（这是在将传入 SMTP 消息传递给之前最初处理传入 SMTP 消息的类）的源来验证这一点`smtpd.SMTPServer.process_message()`。

然而，一切都没有丢失，[这个项目](https://github.com/bcoe/secure-smtpd)是标准库的衍生产品`smptd`，旨在提供对 SMTP AUTH 和 SSL 的支持（同时满足您的要求）。

因此，您可以编写一个从上述项目派生的新类，`SMTPServer`并模拟 Lamson 的`STMPReceiver`. 然后，在 Lamson's`config/boot.py`中，您需要更改该行：

```
from lamson.server import Relay, SMTPReceiver 
```

到：

```
from lamson.server import Relay
from my_module import my_class as SMTPReceiver 
```

替换`my_module`并`my_class`酌情加载您新编写的课程。

*这将确保在 Lamson收到*电子邮件时执行用户身份验证，然后再进行任何进一步的处理。当然，您将确保仅通过 SSL 启用连接并实现，如您所说，LDAP 部分（除非由某些 SASL 实现或其他提供）。

我认为这几乎涵盖了它。祝你好运 ：）

# python - 如何在没有互联网连接的情况下在树莓派中安装 python 库？

> ID：13699333
> 
> 赞同：0
> 
> 时间：2012-12-04T09:08:19.087
> 
> 标签：python, installation, raspberry-pi, i2c

我必须在我的 Raspberry Pi 中安装一些库，但我无法将它连接到互联网。是否可以在 Windows pc 中下载它们（甚至 linux 也可以）并将它们复制到树莓派，以便我可以进行离线安装。这怎么可能？

这些是我需要的库

```
 sudo apt-get install i2c-tools
    sudo apt-get install python-smbus 
```

我也想安装这个程序使它成为一个 http 服务器

```
 sudo apt-get install lighttpd 
```

我想将所有这些下载到 Windows，然后将它们复制到我可以安装它们的树莓派。任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T09:24:56.100

当然，我假设您在 Raspberry 中运行 ubuntu。将 deb 下载到 Raspberry 中并在终端中运行以下命令

```
dpkg -i file_to_install.deb 
```

dpkg 的完整备忘单 [http://www.cyberciti.biz/howto/question/linux/dpkg-cheat-sheet.php](http://www.cyberciti.biz/howto/question/linux/dpkg-cheat-sheet.php)

但很有可能 deb 包需要其他依赖包才能继续安装。我强烈建议使用互联网连接。

# php - Apache，PHP 内容长度无效

> ID：13699334
> 
> 赞同：9
> 
> 时间：2012-12-04T09:08:20.173
> 
> 标签：php, apache

我有一个在 Linux 服务器上的 Apache (2.2.14) 上运行的 PHP (PHP 5.3.2) 应用程序。在其历史中，用户不止一次开始在他们的浏览器中看到以下消息：“请求实体太大”。首先 google 搜索建议当上传的文件太大或 cookie 太大时会发生这种情况。但它不会在文件上传时发生，只会在登录时发生，并且总是在登录页面上。用户只需通过页面上的普通 POST 表单进入此页面。并且 cookie 仅包含会话 ID。

此外，apache 正在记录“Invalid Content-Length”。这是在我的任何代码执行之前记录的。$_POST 是空的，尽管它应该包含一些数据。当我添加以下行时：

```
error_log("Content-Length: ".$_SERVER['CONTENT_LENGTH']); 
```

它说

```
Content-Length: 32, 32 
```

这似乎确实无效。更改浏览器或重置用户 PC 似乎没有帮助。一切都在第二天开始工作。

问题可能出在哪里？它与 Apache、PHP、用户的网络设置有关吗？如果我需要添加更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T13:18:54.887

在过去的几天里，我们遇到了 Apache 在 error_log 中记录的“Invalid Content-Length”消息。仅从几个特定的​​ IP 类跟踪一些访问者的问题，例如 Movistar Argentina：200.81.44.201 进一步使用 tcpdump / whireshark 检查请求，我们观察到 POST 请求包含一些

> 重复的Header，即Content-Length和Content-Type

真正的问题在于 Content-Length，因为 Apache 通过连接它们来处理多个变量，例如：

```
Content-Length: 51
Content-Length: 51 
```

结果将是：

```
Content-Length: 51, 51 
```

然后 Apache 尝试将字符串 "51, 51" 转换为不可能的整数。在较新的 Apache > 2.2.17 中，或带有向后移植补丁的 Apache 记录一个错误：413 Request Entity Too Large，对于较旧的 Apache，该进程只是挂起消耗大量 CPU 时间。在该 IP 类后面，我们看到更多不同的客户端，因此它们可能是错误配置的 3G 网关代理服务器，因为它们重复了该标头。因此，我们找到了一种解决方案来配置 Apache 以仅使用一个 Content-Length 和一个 Content-Type 标头重写请求：这是我的代码，使用 mod_headers 和插入 httpd.conf 的 SetEnvIfNoCase：

```
SetEnvIfNoCase Content-Length (.*), MyContentLength=$1
SetEnvIfNoCase Content-Type (.*), MyContentType=$1
RequestHeader set Content-Length: "%{MyContentLength}e" env=MyContentLength
RequestHeader set Content-Type: "%{MyContentType}e" env=MyContentType 
```

您可以自由测试和使用此代码来过滤掉重复的 Content-Length HTTP 标头变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T00:51:05.210

调查此类问题的最简单方法是使用[TCPDump](http://www.tcpdump.org/)将客户端和服务器之间发送的数据包捕获到文件中，然后使用[Wireshark](http://www.wireshark.org/)将数据包视为 TCP 流。

捕获数据包的命令示例如下。

tcpdump -vvv -A -i eth0 '主机 123.123.10.12 && 端口 80' -w eth0.dat

由于它是您的登录页面，您可能需要解码 TCP 流，因为它应该位于 HTTPS 之后 - 这可以使用[http://segfault.in/2010/11/decrypt-https-traffic-using-中的说明完成Wireshark 和密钥文件/](http://segfault.in/2010/11/decrypt-https-traffic-using-wireshark-and-key-file/)

Plasmid87 几乎可以肯定是正确的 - 听起来其中一个标头正在大量增长并最终变得大于 Apache LimitRequestFieldSize。

只要它增长缓慢而不是一次全部增长，您就可以通过检查全局变量来调查它。

```
function checkVars(){
    $varsToCheck = array($GLOBALS, $_SERVER, $_GET, $_POST, $_FILES, $_REQUEST, $_SESSION, $_ENV, $_COOKIE);

    foreach($varToCheck as $var){
        foreach($var as $key => $value){

            if(count($key) > 1024){
                logToFile("Found ridiculous key: ".$key." value is ".$value);
            }
            if(count($value) > 1024){
                logToFile("Found ridiculous value for key: ".$key." value is ".$value);
            }
        }
    }
} 
```

# java - 缓存线程池如何重用现有线程

> ID：13699335
> 
> 赞同：23
> 
> 时间：2012-12-04T09:08:24.933
> 
> 标签：java, multithreading, threadpool

我刚刚开始研究 Java 的`Executors`类和`newCachedThreadPool( )`方法。根据 API，生成的线程池将现有`Thread`对象重用于新任务。

我有点困惑这是如何实现的，因为我在 API 中找不到任何方法`Thread`可以让您设置现有`Thread`对象的行为。

例如，您可以从一个对象创建一个*新* 对象，这使得调用's方法。但是，API 中没有将 a作为参数的 setter 方法。`Thread``Runnable``Thread``Runnable``run( )``Thread``Runnable`

我会很感激任何指示。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-04T09:21:51.283

Basically imagine each thread from the pool doing this:

```
public void run() {
    while(true) {
        if(tasks available) {
           Runnable task = taskqueue.dequeue();
           task.run();
        } else {
           // wait or whatever
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-04T09:19:47.470

线程池具有寻找可运行作业的线程。而不是从线程开始一个新线程`Runnable`只会调用函数`run()`。因此，a 中的线程`ThreadPool`不是使用`Runnable`您提供的创建的，而是仅检查是否有任何任务准备好执行并直接调用它们的线程。

所以它看起来像这样：

```
while(needsToKeepRunning()){
    if(hasMoreTasks()){
        getFirstTask().run();.
    }
    else
    {
        waitForOtherTasks();
    }
} 
```

Of course this is overly simplified the real implementation with the waiting is much more elegant. A great source of information on how this really works can be found in [Concurrency in Practice](https://rads.stackoverflow.com/amzn/click/com/0321349601)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-04T09:20:53.837

Threads are created **only once** in the Thread Pool API (except in the cases when due to some exception the thread exits abruptly)

The Worker threads poll the **Queue** to see if there is a task and use it. So the threads never exit.

It is just an abstraction that Threads are reused (Abstraction for they never actually stop). Obviously they stop after idle timeout and shutdown request.

**Runnable -----> Thread Pools** (Some worker thread consumes that Runnable and others wait for some more Runnables)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-04T09:18:25.147

Executors 在后台为你做所有事情。是的，它只使用现有的线程 API。

下面的链接有使用 Thread 类和 Collection API 实现的线程池的示例实现：http: [//www.ibm.com/developerworks/library/j-jtp0730/index.html](http://www.ibm.com/developerworks/library/j-jtp0730/index.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-04T09:20:08.313

Well the thread only have to call `Runnable.run()` on the runnables which are assigned to him...

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-04T09:23:21.843

A simplified explanation is that when you pass a Runnable to the ExecutorService the Runnable is put into a queue. The ThreadPool worker threads reads from this queue and invokes the queued Runnables run() method.

# javascript - 如果验证失败，如何停止进一步验证

> ID：13699343
> 
> 赞同：0
> 
> 时间：2012-12-04T09:08:44.480
> 
> 标签：javascript, jquery, jquery-validation-engine

我最近才开始使用[jquery 验证引擎](https://github.com/posabsolute/jQuery-Validation-Engine)，我想知道：

我在一个场景中，我只想在另一个字段不为空的情况下验证一个字段。我已将 condRequired 验证规则应用于此字段，效果很好，但 condRequired 之后的所有其他规则都被触发。例如：

```
<input type="password" id="current-password" name="current-password" placeholder="Current Password" class="validate[condRequired[password],ajax[ajaxValidateUserPassword]]"> 
<input type="password" id="password" name="password" placeholder="New Password" class="ajax[ajaxValidateUserRegistration]]"> 
```

如果用户决定要更新密码，则必须输入当前密码。但是，如果用户输入了新密码，我只想验证当前密码。所以我有：

```
validate[condRequired[password],ajax[ajaxValidateUserPassword]] 
```

作为当前密码的验证规则。问题是：即使用户没有输入新密码，

```
condRequired[password] 
```

会失败，但是

```
ajax[ajaxValidateUserPassword] 
```

仍然被解雇。

有没有办法得到

```
ajax[ajaxValidateUserPassword] 
```

如果

```
condRequired[password] 
```

规则失败？想法是如果没有输入新密码，我不想对当前密码进行任何验证

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-17T07:29:27.000

使用选项“maxErrorsPerField”：

```
$("form").validationEngine({
    maxErrorsPerField: 1
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:58:40.647

ValidationEngine 允许您指定使用自定义函数来确定有效性的验证规则。

```
<input value="" class="validate[required,funcCall[checkHELLO]]" type="text" id="lastname" name="lastname" />

function checkHELLO(field, rules, i, options){
  if (field.val() != "HELLO") {
     // this allows the use of i18 for the error msgs
     return options.allrules.validate2fields.alertText;
  }
} 
```

如果“新密码”不为空，您可以从该函数中调用任何 ajax 来验证字段

# c++ - 将功能委托/转发给成员（组合）

> ID：13699345
> 
> 赞同：3
> 
> 时间：2012-12-04T09:08:52.430
> 
> 标签：c++, delegates, wrapper, forwarding

假设我有课

```
template<class T>
class Vector
{
  public:
    Vector() = default;

    inline size_t size() const { return _vector.size(); }

  private :
    std::vector<T> _vector;
}; 
```

有没有办法**在编译时将函数（或运算符）委托给 ，而无需**`_vector`开销？

 **我当然可以（这就是我正在做的）通过声明我需要的每个函数来转发所有内容，并且只需向成员调用适当的函数，就像我对`size()`.

[这篇文章](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2002/n1363.htm)正是我所需要的。例如使用这个：

```
template<class T>
class Vector
{
  public:
    Vector() = default;

  private :
    std::vector<T> _vector;

  public:
    using _vector {
      size_t size() const;
      void push_back(const T&);
    }
}; 
```

然后编译器将生成适当的代码。但是我没有找到类似的东西，这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T09:15:39.947

**第一种方式**：您可以公开继承`std::vector<T>`以使此类委托成为可能：

```
template<class T>
class Vector : public std::vector<T>
... 
```

是否继承`std::vector`几乎没有[争议](https://stackoverflow.com/questions/4353203/thou-shalt-not-inherit-from-stdvector)，但那是你的代码。

~~**第二种方式**：如果你对组合很特别，那么让`Vector<T>`对象表现为智能指针：~~

 ~~```
template<typename T>
class Vector
{
  std::vector<T> _vector;    
public:
  std::vector<T>* operator -> () { return &_vector; }
};
Vector<int> vi;
vi->size(); // instead of vi.size() 
```~~  ~~**第三种方式**`operator ()`：语法糖重载：

```
template<typename T>
class Vector
{
  std::vector<T> _vector;
public:
  std::vector<T>& operator ()() { return _vector; }
  const std::vector<T>& operator ()() const { return _vector; }
};
Vector<int> vi;
vi().size(); // instead of vi.size() 
```~~**

# excel - Magento：将产品导出到 csv 或 excel

> ID：13699355
> 
> 赞同：1
> 
> 时间：2012-12-04T09:09:30.183
> 
> 标签：excel, magento, csv, magento-1.4

我想将我们 Magento 网站中的完整产品列表导出为 CSV 或 Excel。我怎样才能做到这一点？这是标准功能吗？在管理员中我找不到任何东西，不是在产品页面中，也不是在报告中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T09:24:12.463

您可以在**`System`**-> **`Import/Export`**-> **`Dataflow – Profiles`**->中执行此操作**`Export All Products`**。

设置配置文件允许您指定导出的属性，如此[处所述](http://www.magentocommerce.com/knowledge-base/entry/tutorial-using-magentos-import-export-profiles)

# java - 为什么不能在主要方法中使用“this”？

> ID：13699360
> 
> 赞同：4
> 
> 时间：2012-12-04T09:09:44.783
> 
> 标签：java

```
 public class example {

    int a = 0;

    public void m() {
        int b = this.a;
    }

    public static void main(String[] args) {
        int c = this.a;
    }

} 
```

我是java新手。为什么我不能在主要方法中使用“this”？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-04T09:10:37.917

`this`指当前对象。但是，该`main`方法是静态的，这意味着它附加到类，而不是对象实例，因此内部没有当前对象`main()`。

为了使用`this`，你需要创建你的类的一个实例（实际上，在这个例子中，你没有使用，`this`因为你有一个单独的对象引用。但是你可以`this`在你的`m()`方法中使用，例如，因为`m()`它是一个实例方法存在于对象的上下文中）：

```
public static void main(String[] args){
    example e = new example();
    int c=e.a;
} 
```

顺便说一句：您应该熟悉 Java 命名约定 - 类名通常以大写字母开头。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T09:11:19.180

您必须创建示例的实例

```
example e = new example()
e.m() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T09:12:59.353

因为主要是`static`. 要访问`a`，您也应该声明它`static`。静态变量在没有任何类实例的情况下存在。非静态变量仅在实例存在时才存在，并且每个实例都有自己的名为 的属性`a`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T09:15:43.257

```
public class Example {

    int a = 0;

    // This is a non-static method, so it is attached with an instance 
    // of class Example and allows use of "this".
    public void m() {            
        int b = this.a;
    }

    // This is a static method, so it is attached with the class - Example
    // (not instance) and so it does not allow use of "this".
    public static void main(String[] args) {
        int c = this.a; // Cannot use "this" in a static context.
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T09:15:43.843

除了安德烈亚斯的评论

如果你想使用'a'。然后您将必须实例化新示例[最好将示例类名设为大写 ​​Eaxmple]。

就像是

```
public static void main(String[] args) {
  Example e = new Example();
  int c = e.a;
} 
```

高温高压

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-04T09:16:24.367

该`main`方法是静态的，这意味着它可以在不实例化`example`类的情况下调用（静态方法也可以称为类方法）。这意味着在 的上下文中`main`，变量`a`可能不存在（因为`example`不是实例化对象）。同样，您不能`m`在`main`没有先实例化的情况下调用`example`：

```
public class example {

    int a=0;

    public void m(){
       // Do stuff
    }

    public static void main(String[] args){
       example x = new example();
       x.m(); // This works
       m(); // This doesn't work
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-26T10:24:01.247

[安德烈亚斯·费斯特](https://stackoverflow.com/a/13699378/2893073)的补充回答：

```
/****GRAMMER:
 * 
 *  Why cannot use "this" in the main method?
 * 
 *  -----------------------------------------------------------------------------------
 * 
 *      "this" refers to the current object. However, the main method is static, 
 *      which means that it is attached to the class, not to an object instance.
 *  
 *      Which means that the static method can run without instantiate an object,
 *      Hence, there is no current "this" object inside of main().
 * 
 * 
 */

public class Test{
    int a ;
    public static void main(String[] args) {
        int c = this.a;   // Cannot use "this" in a static context, 
                          // because there isn't a "this".
    }
} 
```

# ios - 如何在横向模式下获取主 UIView 的宽度？

> ID：13699368
> 
> 赞同：4
> 
> 时间：2012-12-04T09:10:12.973
> 
> 标签：ios, uiview, uiviewcontroller, landscape

当我使用此代码时：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    CGFloat mainViewWidth = self.view.bounds.size.width;
    NSLog(@"%f", mainViewWidth);
} 
```

我在模拟器中得到了结果：480

当我在 iPhone 4 上启动应用程序时，我得到了 320 的结果？

我做错什么了吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-04T09:14:48.040

在 中做同样的事情`viewWillAppear`。

```
-(void)viewWillAppear:(BOOL)animated{
    CGFloat mainViewWidth = self.view.bounds.size.width;
    NSLog(@"%f", mainViewWidth);
} 
```

看看你是否得到了正确的值。`ViewDidLoad`在视图完全绘制之前被调用。访问`UIView`size 属性会为您提供不可预测的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-14T13:46:14.623

斯威夫特 3.1：

```
let width = yourView.bounds.width 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T09:14:36.430

试试这个

```
-(void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation
{
    CGFloat width = CGRectGetWidth(self.view.bounds);
} 
```

# asp.net - RadiobuttonList 回发到索引 0

> ID：13699372
> 
> 赞同：0
> 
> 时间：2012-12-04T09:10:26.967
> 
> 标签：asp.net, vb.net

在选择触发回发的任何单选按钮或表单事件时，我的单选按钮列表选择转到索引 0。其他表单项均不受影响。我禁用了主列表重定向代码，我创建了一个全新的页面，其中除了下拉列表、单选按钮列表和用于查看所选数据的标签之外什么都没有。我难住了。

有什么建议吗？我只希望它保留 selectedindex 并允许我在回发之间填充正确的值。

```
 <%@ Page Title="" Language="VB" MasterPageFile="~/MasterPage.master" AutoEventWireup="false" CodeFile="Default.aspx.vb" Inherits="s_Default" %>

<asp:Content ID="Content1" ContentPlaceHolderID="head" Runat="Server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder_menuBar" Runat="Server">
</asp:Content>
<asp:Content ID="Content3" ContentPlaceHolderID="ContentPlaceHolder_userBar" Runat="Server">
</asp:Content>
<asp:Content ID="Content4" ContentPlaceHolderID="ContentPlaceHolder_mainActivityWindow" Runat="Server">
<form id="Form1" runat="server">
    <p>
        <asp:DropDownList ID="ddl_Shift1" runat="server" AutoPostBack="true" EnableViewState="true">
            <asp:ListItem Text="d" Value="d" Selected="True"></asp:ListItem>
            <asp:ListItem Text="n" Value="n" Selected="False"></asp:ListItem>
            <asp:ListItem Text="h" Value="h" Selected="False"></asp:ListItem>
        </asp:DropDownList>
    </p>
    <p>
        <asp:RadioButtonList ID="rbl_C112" runat="server" AutoPostBack="true" EnableViewState="true">
            <asp:ListItem Text="2" Value="112" Selected="False" ></asp:ListItem>
            <asp:ListItem Text="3" Value="112" Selected="False" ></asp:ListItem>
            <asp:ListItem Text="4" Value="112" Selected="False" ></asp:ListItem>
            <asp:ListItem Text="5" Value="112" Selected="False" ></asp:ListItem>
            <asp:ListItem Text="Unassigned" Value="112" Selected="True" ></asp:ListItem>
        </asp:RadioButtonList>
    </p>    
    <p>
        <asp:Label ID="l_c112" Text="" runat="server"></asp:Label>
        <asp:Label ID="username" Text="" runat="server"></asp:Label>
    </p>
    </form>
</asp:Content>
<asp:Content ID="Content5" ContentPlaceHolderID="ContentPlaceHolder_tutorialBar" Runat="Server">
</asp:Content>
<asp:Content ID="Content6" ContentPlaceHolderID="ContentPlaceHolder_foot" Runat="Server">
</asp:Content> 
```

VB Codebehind s_Default

```
Partial Class s_Default
    Inherits System.Web.UI.Page

    Sub Page_Load() Handles Me.Load
        username.Text = Session("UserRole").ToString()
    End Sub

    Protected Sub rbl_C112_SelectedIndexChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles rbl_C112.SelectedIndexChanged
        l_c112.Text = ""
        l_c112.Text = rbl_C112.SelectedItem.ToString()
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T09:17:47.763

回发后返回的不是选定的索引，而是选定的值。

由于`rbl_C112`都具有相同的值 ( `112`)，因此它将选择与该值匹配的第一个 1。

更改 DropDownList 选项的值，使它们是唯一的，这将解决您的问题。

```
<asp:RadioButtonList ID="rbl_C112" runat="server" AutoPostBack="true" EnableViewState="true">
       <asp:ListItem Text="2" Value="112" Selected="False" ></asp:ListItem>
       <asp:ListItem Text="3" Value="113" Selected="False" ></asp:ListItem>
       <asp:ListItem Text="4" Value="114" Selected="False" ></asp:ListItem>
       <asp:ListItem Text="5" Value="115" Selected="False" ></asp:ListItem>
       <asp:ListItem Text="Unassigned" Value="116" Selected="True" ></asp:ListItem>
</asp:RadioButtonList> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T09:18:06.510

这是由于其中几个列表项具有完全相同的值，在回发时它使用选择值来设置项目，如果你有：

```
 <asp:ListItem Text="2" Value="112" Selected="False" ></asp:ListItem>
            <asp:ListItem Text="3" Value="112" Selected="False" ></asp:ListItem>
            <asp:ListItem Text="4" Value="112" Selected="False" ></asp:ListItem>
            <asp:ListItem Text="5" Value="112" Selected="False" ></asp:ListItem>
            <asp:ListItem Text="Unassigned" Value="112" Selected="True" ></asp:ListItem> 
```

然后，如果您选择 5，然后回发，那么它将设置 2，因为这是列表中具有您选择的值的第一项。

# c# - 将字符串中的时间转换为UTC时间？

> ID：13699380
> 
> 赞同：4
> 
> 时间：2012-12-04T09:10:38.417
> 
> 标签：c#, .net

> **可能重复：**
> [C# 日期时间：不同时区的转换](https://stackoverflow.com/questions/6682290/c-sharp-datetimes-conversion-for-different-time-zones)

我有一个像“2012.12.04T08:35:00”这样的字符串，它代表“西欧标准时间”时区的时间。

现在，我想以 UTC 时间将其正确转换为 ac# DateTime 对象。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T09:28:20.223

*在特定*时区[`TimeZoneInfo`](http://msdn.microsoft.com/en-us/library/bb495915.aspx)之间转换时使用：

 *```
TimeZoneInfo westInfo =
    TimeZoneInfo.FindSystemTimeZoneById("W. Europe Standard Time");

DateTime westTime = DateTime.Parse("2012.12.04T08:35:00");
DateTime utcTime = TimeZoneInfo.ConvertTimeToUtc(westTime, westInfo); 
```

为了解决您的困惑：

*   `DateTime.Parse`此处使用的对给定值的时区*不做任何*假设。IT 将其`DateTimeKind`与`Unspecified`.
*   `TimeZoneInfo.ConvertTimeToUtc`此处使用的*需要*一个`Unspecified`日期时间，将其视为在*明确指定*的时区中读取，并将其转换为 UTC。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T11:55:49.803

您可以使用 DateTimeOffset.TryParse 方法。

[http://msdn.microsoft.com/en-us/library/bb397029.aspx](http://msdn.microsoft.com/en-us/library/bb397029.aspx)

看这里的帖子

[使用偏移量将字符串转换为 DateTime](https://stackoverflow.com/questions/13270429/converting-string-to-datetime-with-offset/13270510#13270510)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T09:28:07.910

从 MSDN 读取，您应该能够将字符串解析为 DateTime 对象，如下所示：

```
DateTime convertedDate = DateTime.Parse("2012.12.04T08:35:00"); 
```

[http://msdn.microsoft.com/en-us/library/1k1skd40.aspx](http://msdn.microsoft.com/en-us/library/1k1skd40.aspx)

您可能必须将 更改`.`为`-`.

~~那么您应该可以使用它来获取 UTC。~~

 ~~```
convertedDate.ToUniversalTime(); 
```~~ 

~~[http://msdn.microsoft.com/en-us/library/system.datetime.touniversaltime.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.touniversaltime.aspx)~~

编辑（评论更正）：

```
TimeZoneInfo tst = TimeZoneInfo.FindSystemTimeZoneById("W. Europe Standard Time");

DateTime convertedTime = TimeZoneInfo.ConvertTimeToUtc(convertedDate, tst); 
```

[http://msdn.microsoft.com/en-us/library/system.timezoneinfo.aspx](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.aspx)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-04T10:23:53.727

您可以使用 Convert.ToDateTime()。它应该工作。*

# asp.net - 从 silverlight 调用静态 aspx 方法

> ID：13699394
> 
> 赞同：0
> 
> 时间：2012-12-04T09:11:52.020
> 
> 标签：asp.net, silverlight, static-methods

我想知道是否可以从我的 silverlight 应用程序调用我的 web 应用程序 (aspx) 中的 statick 方法，silverlight 托管在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:01:09.367

Silverlight 应用程序与网页没有直接连接，因为 Silverlight 是客户端应用程序，而您的 aspx 页面是服务器端。

另一方面，可以通过**HtmlPage.Window.Invoke**方法从 Silverlight 调用 javascript 方法（[http://msdn.microsoft.com/en-us/library/system.windows.browser.scriptobject.invoke(v=vs .95).aspx](http://msdn.microsoft.com/en-us/library/system.windows.browser.scriptobject.invoke(v=vs.95).aspx) ) 如有必要，您只需传递 javascript 函数名称和参数。

然后您显然可以使用 AJAX（例如 jquery AJAX）向服务器发送请求并执行您需要的方法。您可能希望使用 ASHX 处理程序来处理请求并从那里调用您的静态方法。

所以基本上你的合作看起来像：

*Silverlight -> Javascript -> AJAX -> 服务器端处理。*

# c# - 在 Web 表单中填充下拉列表

> ID：13699404
> 
> 赞同：0
> 
> 时间：2012-12-04T09:12:31.323
> 
> 标签：c#, .net

我在 asp.net Web 表单中填充 DDL，并为调用我的存储过程的所有 sql 类使用我拥有的 sqlutilility 类。

但是在每个下拉列表中，我不断重复相同的代码并重命名它，然后在我想使用它时调用它。

我想知道的是。有没有办法使用这段代码而不是一直重复它？

```
 protected void Populate_Authority()
    {
    //  Init()
    //  ------
    SqlConnection conn = null;
    SqlDataReader rdr = null;
    SqlCommand cmd = null;
    //  
    drp_Authority.Items.Clear();

    try
    {
        //  Conn
        //  ----
        conn = new      SqlConnection(ConfigurationManager.ConnectionStrings["conn"].ConnectionString);
        conn.Open();

        //  Cmd
        //  ---
        cmd = new SqlCommand("[sp_Populate_Authority]", conn);
        cmd.CommandType = CommandType.StoredProcedure;

        //  Execute
        //  -------
        rdr = cmd.ExecuteReader();

        //  Row(s)?
        //  -------
        if (rdr.HasRows)
        {
            //  Read
            //  ----
            while (rdr.Read())
            {
                //  Populate
                //  --------
                drp_Authority.Items.Add(
                    new ListItem(
                        rdr["Authority"].ToString(),
                        rdr["AuthorityID"].ToString()));
            }

            //  Blank
            //  -----
            drp_Authority.Items.Insert(0, String.Empty);
        }

        //  Clean up / Close down
        //  ---------------------
        cmd.Dispose();
        rdr.Dispose();
        rdr.Close();
        conn.Dispose();
        conn.Close();

    }
    catch (SqlException ex)
    {
        //  Throw Sql Exception 
        //  -------------------
        throw ex;
    }
    finally
    {
        //  Clean up / Close down
        //  ---------------------
        if (cmd != null)
        {
            cmd.Dispose();
        }
        if ((rdr != null) && (!rdr.IsClosed))
        {
            rdr.Dispose();
            rdr.Close();
        }
        if ((conn != null) && (conn.State != ConnectionState.Closed))
        {
            conn.Dispose();
            conn.Close();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:16:54.387

获取您的代码，将其包装在辅助方法中：

```
protected void Populate_Ddl(DropDownList ddl, string command, string valueName, string keyName)
    {
    //  Init()
    //  ------
    SqlConnection conn = null;
    SqlDataReader rdr = null;
    SqlCommand cmd = null;
    //  
    ddl.Items.Clear();

    try
    {
        //  Conn
        //  ----
        conn = new      SqlConnection(ConfigurationManager.ConnectionStrings["conn"].ConnectionString);
        conn.Open();

        //  Cmd
        //  ---
        cmd = new SqlCommand(command, conn);
        cmd.CommandType = CommandType.StoredProcedure;

        //  Execute
        //  -------
        rdr = cmd.ExecuteReader();

        //  Row(s)?
        //  -------
        if (rdr.HasRows)
        {
            //  Read
            //  ----
            while (rdr.Read())
            {
                //  Populate
                //  --------
                ddl.Items.Add(
                    new ListItem(
                        rdr[keyName].ToString(),
                        rdr[valueName].ToString()));
            }

            //  Blank
            //  -----
            ddl.Items.Insert(0, String.Empty);
        }

        //  Clean up / Close down
        //  ---------------------
        cmd.Dispose();
        rdr.Dispose();
        rdr.Close();
        conn.Dispose();
        conn.Close();

    }
    catch (SqlException ex)
    {
        //  Throw Sql Exception 
        //  -------------------
        throw ex;
    }
    finally
    {
        //  Clean up / Close down
        //  ---------------------
        if (cmd != null)
        {
            cmd.Dispose();
        }
        if ((rdr != null) && (!rdr.IsClosed))
        {
            rdr.Dispose();
            rdr.Close();
        }
        if ((conn != null) && (conn.State != ConnectionState.Closed))
        {
            conn.Dispose();
            conn.Close();
        }
    }
} 
```

然后从您的代码中调用它：

```
Populate_Ddl(drp_Authority, "[sp_Populate_Authority]", "Authority", "AuthorityID"); 
```

并对所有 ddl 重复此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:19:07.300

制作一个用于填充下拉列表的通用函数，如下所示：

```
protected void Populate_DropDownList(DropDownList ddl, string storedProceduceName, string dropdownTextField, string dropdownValueField)
{
//Modify your code accordingly
} 
```

# android - 设置 Gone 布局时，带有 GridView 和按钮挤压的可见 RelativeLayout

> ID：13699405
> 
> 赞同：1
> 
> 时间：2012-12-04T09:12:31.177
> 
> 标签：android, android-layout, android-relativelayout

我有一个RelativeLayout1大约是屏幕宽度的一半，最初设置为GONE..另一个布局RelativeLayout2必须获取screenWidth设置为Left..根据我设置RelativeLayout1 VISIBLE它应该设置RelativeLayout2向左移动而不是将RelativeALyout2 挤压到左边的屏幕宽度。

```
 <RelativeLayout
    android:id="@+id/fullScreen"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent" >

    <RelativeLayout
        android:id="@+id/menulayout"
        android:layout_width="200dp"
        android:layout_height="fill_parent"
        android:layout_alignParentRight="true" >

        <RelativeLayout
            android:id="@+id/topMenubar"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:background="@drawable/slider_header"
            android:fitsSystemWindows="true" >

            <TextView
                android:id="@+id/menu"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_centerVertical="true"
                android:layout_marginLeft="5dp"
                android:text="@string/menu"
                android:textColor="#787878" >
            </TextView>
        </RelativeLayout>

        <ListView
            android:id="@+id/menulist"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_below="@id/topMenubar"
            android:background="#232323"
            android:cacheColorHint="#00000000"
            android:divider="#5b5b5b"
            android:dividerHeight="1dp"
            android:scrollbars="none" />

        <Button
            android:id="@+id/backmenu"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_centerVertical="true"
            android:background="@drawable/arrowleft" />
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/maingridlayout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_toLeftOf="@id/menulayout" >

        <RelativeLayout
            android:id="@+id/topBar"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_centerHorizontal="true"
            android:background="@drawable/header_bg"
            android:fitsSystemWindows="true" >

            <ImageView
                android:id="@+id/handle"
                android:layout_width="wrap_content"
                android:layout_height="fill_parent"
                android:layout_alignParentRight="true"
                android:layout_centerVertical="true"
                android:src="@drawable/handle" />

            <TextView
                android:id="@+id/notificationnumber"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:background="@drawable/redbatch"
                android:gravity="center"
                android:textColor="#ffffff"
                android:textSize="20dp"
                android:visibility="gone" />

            <ImageView
                android:id="@+id/searchnow"
                android:layout_width="wrap_content"
                android:layout_height="fill_parent"
                android:layout_alignParentLeft="true"
                android:layout_centerVertical="true"
                android:src="@drawable/searchunsel" />

            <RelativeLayout
                android:id="@+id/logolayout"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_centerInParent="true"
                android:layout_toLeftOf="@id/handle"
                android:layout_toRightOf="@id/searchnow" >

                <com.drona.custom.ImageThumbLayout
                    android:id="@+id/logo"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerInParent="true" >
                </com.drona.custom.ImageThumbLayout>
            </RelativeLayout>
        </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:31:31.370

> android:layout_width="fill_parent"

你可以试着改变这个我猜

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:44:09.727

好吧，我做了什么..我使用了一个 Horizo​​ntallScrollView，menyLayout 可见且可滚动为假...然后当我必须使其可见时，我正在使用滚动视图

```
scrollTo(int x,iny y); 
```

或者我能做什么我将在 mainGridLayout 上方添加菜单布局，即；将另一个孩子添加到 mainGridLAyout 的父级

# directory - 在 zshell 中通过 ID 访问目录的元素

> ID：13699407
> 
> 赞同：0
> 
> 时间：2012-12-04T09:12:41.147
> 
> 标签：directory, alias, zsh

我想知道，是否可以访问“ls”除了名称之外还通过ID返回的元素。我正在使用 z-shell。我在想的是类似以下的

```
>> ls_modified
A/  B/  C/  d.txt
1  2  3  4 
```

所以我可以在下一步中访问它们

```
>> cd_modified 2 
```

或者

```
>> vim_modified 4 
```

我已经找到了一些解决方法来访问由“ls -ltr”打印的最后一个元素，它是以下别名：

```
cdlast='cd *(.om[1])'
vlast='vim *(.om[1])' 
```

因为我从来没有真正在我的 .zshrc 中工作过，所以我不确定我是否可以简单地调整上面的代码以使用 Integer 作为输入。此外，我真的很想看到为每个元素列出的 ID，这样我就知道我正在访问哪个元素。

如果有任何方法可以实现这一点，我将非常感激。

另外我真的不知道要使用哪些标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:03:23.993

使用 ZSH 'globbing' 或 'filename generation' 功能很容易实现这一点

*   `*`：当前工作目录中的所有文件和目录
*   `*(.)`: 只有普通文件，不是目录
*   `*(.om)`：仅常规文件，按修改日期排序
*   `*(.om[2])`：第二个最近修改的常规文件

有关完整信息，请参阅[http://zsh.sourceforge.net/Doc/Release/Expansion.html#Filename-Generation](http://zsh.sourceforge.net/Doc/Release/Expansion.html#Filename-Generation)。

如果要访问第二个目录，按名称（默认）排序，请使用`*(/[2])`.

要将索引作为参数传递，可以使用 shell 函数。

```
 function cd_modified { cd *(/[$1]) } 
```

# multithreading - 如何处理——快速发送和接收数据——Linux 设备驱动程序

> ID：13699408
> 
> 赞同：0
> 
> 时间：2012-12-04T09:12:40.573
> 
> 标签：multithreading, linux-device-driver, embedded-linux, can-bus

我期待在 Linux 中实现 CAN 总线通信的驱动程序。
需要一些设计建议。

Linux有用户空间和内核空间。驱动程序在用户空间的内核空间应用程序中运行。

1> 现在假设如果以非常高的速度接收数据包，那么驱动程序如何处理这种情况？

2> 如果数据包必须以高速率传输，那该怎么办？

3> 数据应该如何在用户和内核空间之间移动。我们应该使用系统调用还是除此之外的一些快速机制？

4> 可以在内核级别的线程中完成吗？但是，如果有两个线程在内核级别运行，从 CAN 总线到 TX，从 CAN 总线到 RX，那么我们是否必须使用互斥锁来保存关键部分（即我们的内部寄存器）

5> 如果假设共享库用于从应用程序访问驱动程序。共享库可以使用系统调用访问驱动程序功能吗？

完全混淆什么应该是正确的方法。

请建议。任何答复将是可观的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:19:08.240

与您希望在其上运行 Linux 的大多数处理器相比，数据速率方面的 CAN 并没有那么快。大多数公共汽车的负载低于 60%，即只有大约 60kB/s！从用户空间到内核空间的简单数据包 FIFO 应该没问题。

如果您有按计划传输消息的硬实时截止日期，则可能会出现问题。或者更糟糕的是，在给定的时间段内响应接收到的消息发送消息。如果您有这些要求中的任何一个，Linux 可能不适合您——您需要一个合适的实时操作系统 (RTOS)。

# ruby - Ruby 中的 $_[0] ,$_[1] 是什么？

> ID：13699410
> 
> 赞同：6
> 
> 时间：2012-12-04T09:12:58.420
> 
> 标签：ruby

我是一名 Java 开发人员，我得到了 Ruby 代码来理解和处理。

我浏览了 tutorialspoint.com 上的 Ruby 教程，但我不知道`$_[0]`是什么。

它被分配给代码中的一个变量，它绝对不是命令行参数，因为我编写了代码来测试它并且它失败了。那么，谁能说说它的意义是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-04T09:16:24.417

这是神奇的变量之一。

`$_`保存从标准输入读取的最后一行的值。`$_[0]`因此，是该字符串的第一个符号。

更多魔法变量见[English.rb](https://github.com/ruby/ruby/blob/trunk/lib/English.rb)

```
# The last line read by <tt>Kernel.gets</tt> or
# <tt>Kernel.readline</tt>. Many string-related functions in the
# +Kernel+ module operate on <tt>$_</tt> by default. The variable is
# local to the current scope. Thread local.
alias $LAST_READ_LINE          $_ 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-04T09:17:53.240

`$_`- 最后读取的字符串`gets`

`[0]`当然是索引到那个字符串。

[http://www.rubyist.net/~slagell/ruby/globalvars.html](http://www.rubyist.net/~slagell/ruby/globalvars.html)

# java - Java 如何保持对堆栈的引用？

> ID：13699412
> 
> 赞同：2
> 
> 时间：2012-12-04T09:12:59.430
> 
> 标签：java, data-structures, stack

代码：

```
 Stack<Integer> firstStack = new Stack<Integer>();
    Stack<Integer> secondStack = firstStack;

    firstStack.push(1);
    firstStack.push(2);

    secondStack.pop();
    System.out.println(firstStack.pop()); 
```

我的问题是，如果 firstStack 引用了 Stack 中的最后一项，而 secondStack 也引用了该项，那么当我从 secondStack 弹出时，firstStack 应该继续引用（上一个）最后一项（即 2）。为什么 firstStack 的引用也更改为第一项？（我的意思是第一项：1）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T09:14:40.490

两者都`firstStack`引用`secondStack`堆栈本身，而不是堆栈中的最后一个对象。

当你这样做

```
Stack<Integer> secondStack = firstStack; 
```

你是说：获取引用的堆栈对象`firstStack`，并让`secondStack`引用同一个对象。没有完成堆栈的复制或类似操作。

因此，如果您从 弹出`secondStack`，您也会从 弹出`firstStack`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T09:35:33.580

实际上Java中的堆栈是使用Vector类实现的。

Vector 类具有以下属性（您可以通过查看 Vector 类的实现来交叉检查）

```
 protected Object elementData[];
   protected int elementCount;
   protected int capacityIncrement; 
```

因此，它在内部将数据存储在一个数组中，并使用其他 2 个类属性跟踪增量和计数。因此，在内部，您的**firstStack**和**secondStack**引用指向相同的 elementData、elementCount 和 capacityIncrement 属性。因此，您会得到一致的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T09:18:07.803

不，这里`Stack object`有一个和两个引用`firstStack and secondStack`都指的是相同的`Stack Object`。尽管对 this 的任何引用，但任何操作都会影响同一个对象，因为两者都引用同一个对象。

```
Stack<Integer> secondStack = firstStack; 
```

这不是新的对象创建，`secondStack`将引用`firstStack`所指的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T09:18:36.723

`firstStack` 并且`secondStack`只是对实际 Stack 对象的引用，因此即使您在其中任何一个上执行 pop/push，您也正在更新同一个 Stack 对象。

# php - 在 ext js4 中访问 json 数据？

> ID：13699414
> 
> 赞同：1
> 
> 时间：2012-12-04T09:13:04.267
> 
> 标签：php, json, extjs4, extjs4.1, extjs-mvc

我正在使用 yii 框架在 Ext Js4 中开发网站。我陷入了一个问题，即如何访问从服务器返回的 json 数据到 Ext js 4。实际上我想显示消息字段以及 json 代码中的每个字段在 ext js 4\. 我该怎么做？

**这是我的json代码（json形式的服务器响应）**

```
{

    "success": true,
    "data": [
        { 
            "msg": "uname and pass wrong"
        }
    ]

} 
```

**这是我的模型类代码**

```
Ext.define('AM.model.Login',
        {
            extend:'Ext.data.Model',
            idProperty:'id',
            fields:['id','uname','pass'],
            proxy:
            {
                type:'ajax',
                url:'http://localhost/Balaee3/index.php?r=site/contact',

                reader:
                    {
                        type:'json',
                        root:'data',
                        successProperty:'success'
                    },//end of reader
                writer:
                    {
                        type:'json',
                        root:'records',
                        //writeAllFields:true
                    },//End of writer

            }//end of proxy
        }
); 
```

**如何在 ext js4 中访问控制器文件中的 json 代码，** 我想在这里显示我的 json 数据。

```
 AM.model.Login.load(512, {
            params: {
            id: 512 
            },
            success: function(record, operation) {
            character = record; 
            },//end of success
            failure: function(record, operation) 
            {
            Ext.Msg.alert('Error', 'Failed to load model from the server.');
            },//end of failure
            callback: function(record, operation) {
                //Ext.Msg.alert('Success', 'Model loaded successfully.');
                console.log('Success', 'Model loaded successfully.');
                            }//end of call back function
            }); 
```

给我一些建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T11:21:07.493

在模型中添加 messageProperty。尝试这样的事情......

```
reader: {
        type: 'json',
        root: 'data',          
        successProperty : 'success',
        messageProperty : 'message',
        implicitIncludes: true
    } 
```

## 控制器（服务器）

```
 def message=''    
    def json = request.JSON       
    message=data.message
    def metaData = [ successProperty : 'success', messageProperty : 'message', totalProperty:'num', root:'data']
    def jsonData = [metaData:metaData, success:flag, message:message]
    render jsonData as JSON 
```

# jquery - jQuery 根据已加载表中的数据使用新数据重新加载表

> ID：13699416
> 
> 赞同：2
> 
> 时间：2012-12-04T09:13:13.250
> 
> 标签：jquery, mysql, document-ready

我有一个脚本执行 mysql 查询并使用

```
 $('#results').html(returnData); 
```

mysql 结果包含应该可单击并重新加载到同一个表中的数据（替换以前的查询）。

将其简化并归结为以下代码不起作用：

```
 <head>
    <script>
    $(document).ready(function() {
        $('.a').click(function() {
            $('#results').html('THIS IS VALUE FROM LINK A <a href="#" class="b">B</a>');
        });

        $('.b').click(function() {
            $('#results').html('THIS IS VALUE FROM LINK B');
        });
    });​
    </script>
    </head>
    <body>
    <div id="results">THIS WILL BE REPLACED WITH VALUE FROM LINK A OR B</div><BR>
    <a href="#" class="a">LINK A</a><BR>
    <a href="#" class="b">LINK B</a> 
```

如果我单击 LINK A OR B`div id="results"`填充确定，但是当我将相同的链接放在`.html`从单击函数返回的结果之一中时，该链接不起作用，并且 div id“results”不会重新加载本身。

所以我的问题是；为什么那行不通？以及根据您在已传递的表内单击的内容重新加载同一个表的最佳方法是什么`.html()`？我不想将点击的值传递到新页面。

更新：这将使用 .on()

```
<script>
$(document).ready(function(){

$('body').on('click', '.a', function() { 
    $('#results').html('THIS IS VALUE FROM LINK A <a href="#" class="b">B</a>');
});

$('body').on('click', '.b', function() { 
    $('#results').html('THIS IS VALUE FROM LINK B');
});

});
</script>

</head>

<body>
<div id="results">THIS WILL BE REPLACED WITH VALUE FROM LINK A OR B</div><BR>
<a href="#" class="a">LINK A</a><BR>
<a href="#" class="b">LINK B</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:16:50.083

尝试这个 ：：

```
 $('#results').find('.a').click(function() {
        $('#results').html('THIS IS VALUE FROM LINK A <a href="#" class="b">B</a>');
    });

   $('#results').find('.b').click(function() {
        $('#results').html('THIS IS VALUE FROM LINK B');
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:37:19.290

```
<html>
<script>
$(document).ready(function(){

    $('.a').live("click", function(e) {
        e.preventDefault();
        $('#results').html('THIS IS VALUE FROM LINK A <a href="#" class="b">B</a>');
    });

    $('.b').live("click", function(e) {
        e.preventDefault();
        $('#results').html('THIS IS VALUE FROM LINK B');
});

});
</script>

<div id="results">THIS WILL BE REPLACED WITH VALUE FROM LINK A OR B</div><BR>
<a href="#" class="a">LINK A</a><BR>
<a href="#" class="b">LINK B</a> 
```

使用 live() 将事件绑定在新创建的元素上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T09:22:17.943

为了详细说明 Abhilash 的评论，您的 click 事件未触发的原因是事件侦听器仅附加到执行 onReady 时 DOM 中当前存在的元素。

.live() 是在旧版本的 jQuery 中引入的——现在不赞成使用 .on()——来解决这个问题。它允许你将事件附加到像 body 这样的静态元素上，当点击事件传播到 body 时，它会检查触发事件的原始目标元素，如果它们匹配，则执行处理程序。

# java - 如何向 xsi:nil 元素添加另一个属性？

> ID：13699420
> 
> 赞同：3
> 
> 时间：2012-12-04T09:13:22.240
> 
> 标签：java, xml, jaxb, xml-nil

我通过编组从 xsd 生成的类来生成 xml(gml) 时遇到问题（我正在使用 maven2 xjc 插件）。

具有 gml:nilReason 属性的元素会出现问题，如下所示：

```
 <element name="foo" nillable="true" maxOccurs="unbounded">
                    <complexType>
                        <complexContent>
                            <extension base="string">
                                <attribute name="nilReason" type="gml:NilReasonType"/>
                            </extension>
                        </complexContent>
                    </complexType>
                </element> 
```

生成的类如下所示：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "")
public static class Foo
    extends String
{

    @XmlAttribute
    protected List<String> nilReason;

    /**
     * Gets the value of the nilReason property.
     * 
     * <p>
     * This accessor method returns a reference to the live list,
     * not a snapshot. Therefore any modification you make to the
     * returned list will be present inside the JAXB object.
     * This is why there is not a <CODE>set</CODE> method for the nilReason property.
     * 
     * <p>
     * For example, to add a new item, do as follows:
     * <pre>
     *    getNilReason().add(newItem);
     * </pre>
     * 
     * 
     * <p>
     * Objects of the following type(s) are allowed in the list
     * {@link String }
     * 
     * 
     */
    public List<String> getNilReason() {
        if (nilReason == null) {
            nilReason = new ArrayList<String>();
        }
        return this.nilReason;
    }

    public boolean isSetNilReason() {
        return ((this.nilReason!= null)&&(!this.nilReason.isEmpty()));
    }

    public void unsetNilReason() {
        this.nilReason = null;
    }

    public boolean isNil() {
        return nil;
    }

    public void setNil(boolean nil) {
        this.nil = nil;
    }

} 
```

问题是属性 nilReason 应该与 xsi:nil 一起设置。如果我创建 Foo 的实例并添加到 nilReason 列表值 ex。“模板”它不会将 xsi:nil 属性设置为 true。如果我将空对象添加到列表中，我将得到 xsi:nil="true" 但我无法设置 nilReason 值。

我试图寻找一些绑定方法，但没有运气。

我发现的唯一解决方案是手动将属性添加到生成的类中，如下所示：

```
@XmlAttribute(namespace = "http://www.w3.org/2001/XMLSchema-instance")
    private boolean nil; 
```

但我真的很想避免干扰生成的类。

有任何想法吗？

# ios - 随机词生成器-IOS开发

> ID：13699422
> 
> 赞同：0
> 
> 时间：2012-12-04T09:13:28.780
> 
> 标签：ios, random, word, generator

我正在开发一个应用程序，人们必须点击一个按钮，然后标签显示一个随机单词。

我可以使用switch语句，但是app必须有50多个单词，所以写switch语句是很多工作，不是很有用。

有人有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:17:23.043

很简单，使用数组和随机数生成器。

```
NSArray *myArray = [[NSArray alloc] initWithObjects:@"1",@"2",@"3", nil];
[myLabel setText:[myArray objectAtIndex:arc4random_uniform([myArray count])]]; 
```

这应该足以将您推向正确的方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T09:17:46.400

不要使用开关。使用一个包含五十个项目的数组，并使用一个随机数生成器在数组中获取一个随机索引，这将返回一个随机单词......

# linker - GNU 链接器脚本 - 在两个内存区域中拆分代码

> ID：13699423
> 
> 赞同：3
> 
> 时间：2012-12-04T09:13:28.697
> 
> 标签：linker, split, gnu, ld, scatter

我正在尝试创建一个liker 脚本，将代码拆分为两个用于代码的内存区域和一个用于BSS 的单独内存区域。

这两个代码部分要链接在一起，但要分开加载无论我尝试什么，代码总是混淆。我尝试了不同的版本，对齐部分没有成功。

这是我想要的描述：

**闪光：**

```
------------ 0x0
| CODE 1   |
|          |
------------
| fill to  |
|alignment |
|          |
------------ 0x200000
| CODE 2   |
|          |
------------ 
```

**加载到内存：**

```
------------ 0x5c010000
| CODE 1   |
|          |
------------
.          .
.          .
------------ 0x81500000
| CODE 2   |
|          |
------------ 
```

我看到了链接器手册“输入节示例”，但它对我不起作用。

这是我的代码示例：

```
/*-------------------------------------------------------------------------
 * Filename:      startup.lds
 *-----------------------------------------------------------------------*/
/*OUTPUT_FORMAT("elf32-arm", "elf32-arm", "elf32-arm")*/

OUTPUT_FORMAT("elf32-littlearm")
OUTPUT_ARCH(arm)

ENTRY(__main)

SECTIONS
{
    . = 0x5c006000;
    __bss_start = .;
    .bss : {    *(EXCLUDE_FILE (../../release/eshel_lte_evb3/usbdownload.o
        ../../release/eshel_lte_evb3/usbdriver.o
        ../../release/eshel_lte_evb3/xllp_udc.o)
        .bss) }
    .bss2 : {
        ../../release/eshel_lte_evb3/usbdownload.o (.bss)
        ../../release/eshel_lte_evb3/usbdriver.o (.bss)
     }

    . = ALIGN(4);

    . = 0x5c010000;

    .__main = .;

    . = ALIGN(4);

    .text : {
        *(EXCLUDE_FILE (../../release/eshel_lte_evb3/usbdownload.o
        ../../release/eshel_lte_evb3/usbdriver.o
        ../../release/eshel_lte_evb3/xllp_udc.o)
        .text)
        . = ALIGN(4);
    }

    .rodata : { *(EXCLUDE_FILE (../../release/eshel_lte_evb3/usbdownload.o
        ../../release/eshel_lte_evb3/usbdriver.o
        ../../release/eshel_lte_evb3/xllp_udc.o)
        .rodata) }

    . = ALIGN(4);

    .got : { *(EXCLUDE_FILE (../../release/eshel_lte_evb3/usbdownload.o
        ../../release/eshel_lte_evb3/usbdriver.o
        ../../release/eshel_lte_evb3/xllp_udc.o)
        .got) }

    . = ALIGN(4);

    __egot = .;

    . = ALIGN(4);

    __data_start = .;
    .data : AT (__egot) {*(.data) } =0xFFFFFFFF
    __data_end = .;

    . = ALIGN(16);
    _seg_CODE_end_ = .;

/*  ASSERT((_seg_CODE_end_ <= 0x5c020000), "Error: Code size to big")*/

    . = ALIGN(0x20000);
    __topofcode__ = .;

    . = 0x81500000;
    .__usb_code_start = .;
    .usb_code 0x81500000 : 
    AT(__topofcode__) 
    ALIGN(0x20000)
    SUBALIGN(0x20000)
    {
        ../../release/eshel_lte_evb3/usbdownload.o (.text)
        ../../release/eshel_lte_evb3/usbdriver.o (.text)

        ../../release/eshel_lte_evb3/usbdownload.o (.rodata)
        ../../release/eshel_lte_evb3/usbdriver.o (.rodata)

        ../../release/eshel_lte_evb3/usbdownload.o (.data)
        ../../release/eshel_lte_evb3/usbdriver.o (.data)
    }

    __bss_end = .;

} 
```

# javascript - 如何在特定的 div jquerymobile 中按标签获取元素？

> ID：13699425
> 
> 赞同：-1
> 
> 时间：2012-12-04T09:13:31.387
> 
> 标签：javascript, jquery-mobile

我想使用 jquery mobile 恢复 div 的所有元素的列表，以及这些属性和数据字段？

因为我要在表格中记录每种类型的数据

像这样：

```
$type_of_element=...

    switch($type_of_element)
    {
    case 'textarea':
             //Recover data of this textarea
             //Save @ table
    break;

    case 'checkbox':
             //Recover data of this checkbox
             //Save @ table2
    break; 

    ....
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:18:23.857

我相信你需要这样的东西：

```
​&lt;div id="abc"​​​​​​​​&gt;
    <textarea name="aaa" id="aaa"></textarea>
    <input type="checkbox" name="bbb" id="bbb" />
​&lt;/div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

JavaScript：

```
$('#abc textarea, #abc input, #abc button')​.each(function(index, element) {
    console.log(element.tagName); // this outputs the tagname for each selected element
    console.log($(element).val()); // this will retrieve the value from each element
});​ 
```

[jsFiddle 示例](http://jsfiddle.net/wjskM/)

# android - Imageview 和 textview 不在视图中显示？

> ID：13699426
> 
> 赞同：2
> 
> 时间：2012-12-04T09:13:51.340
> 
> 标签：android, android-imageview, textview, android-gridview

我正在尝试扩展布局并将其添加到可拖动的网格视图中，但我得到的只是一个黄色方块。可拖动视图的 addView() 方法只拾取一个视图。例如，如果我添加一个 textView 或 imageView 则 textview 将被显示。如果我添加线性布局，则只会显示线性布局的背景（也称为线性布局）。但不是线性布局子项（图像和文本视图）。dgv（可拖动的 Gridview）扩展 ViewGroup 这是代码：

添加线性布局：

```
LayoutInflater inflater = LayoutInflater.from (getActivity ());
View cellView = inflater.inflate (R.layout.celllayout, null);
if (cellView != null)
Log.d ("Snap", "cellView != null");
TextView textView = (TextView) cellView.findViewById (R.id.grid_label);
textView.setText (word);
ImageView imageView =  (ImageView) cellView.findViewById (R.id.grid_image);
imageView.setImageBitmap (getThumb (word));

dgv.addView (cellView); 
```

线性布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#FFF000"
android:gravity="center"
android:orientation="vertical"
android:padding="5dp" >

<TextView
android:id="@+id/grid_label"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="center_horizontal"
android:layout_marginTop="5dip"
android:text="@string/grid_label"
android:textColor="#c31d36"
android:textSize="15sp" />
<ImageView
android:id="@+id/grid_image"
android:layout_width="150dip"
android:layout_height="150dip"
android:layout_gravity="center_horizontal"
android:contentDescription="An Image" 
android:background="#ffff0000"/>

</LinearLayout> 
```

dgv:

```
@Override
public void addView (View child) {
    super.addView (child);
    Log.d ("Draggable", "Draggable-addView");

    newPositions.add (-1);
} 
```

有任何想法吗？我需要提供更多信息吗？我唯一的解决方案是自定义 imageview 并覆盖 ondraw 并做我想做的事。但这太老套了，而且不可扩展。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T22:22:53.537

这是 DraggableGridView 的一个已知问题——不幸的是——我还没有解决这个问题。当我写 DGV 时，我并没有完全掌握视图是如何布局的。您可以尝试让 DGV 在布置每个孩子之前对其进行测量。添加类似：

```
getChildAt(i).measure(MeasureSpec.makeMeasureSpec(childSize, MeasureSpec.EXACTLY), MeasureSpec.makeMeasureSpec(childSize, MeasureSpec.EXACTLY)); 
```

在这一行的布局之前：

```
getChildAt(i).layout(xy.x, xy.y, xy.x + childSize, xy.y + childSize); 
```

# java - 将随机字节缩放到选定的整数范围

> ID：13699427
> 
> 赞同：4
> 
> 时间：2012-12-04T09:13:55.910
> 
> 标签：java, file, random, numbers

我有一个真正随机字节的文件。我想要一个函数，它通过从文件中获取一个字节并对其进行缩放来返回*给定范围内的随机整数。*（这是正确的词吗？）

```
public int getInt(int l, int h) throws IOException {
    int m = (h - l) + 1;            // number of ranges needed
    int r = 256 / m;                // size of byte range
    int x = (r * m) - 1;            // maximum allowable byte value
    int b;
    do {
        try {                       // get random byte from file
            b = ram.readUnsignedByte();
        } catch (EOFException e) {  // catch EOF, reset pointer
            b = 255; ram.seek(0);   // and set b to maximum value
        }                           // so test will fail.
    } while(b > x);                 // if byte is greater than
                                    // allowable value, loop.
    return (b / r) + l;             // return random integer
}                                   // within requested range 
```

所以这是我的功能。我担心通过缩放来破坏文件中字节的真正随机性。我读到我需要丢弃任何超过允许最大值的数字（因此对于数字 0-9，最大值为 249，因为我只剩下 7 个值可以分配给 10 个不同的组）。我的实现看起来正确吗？

另外，我想知道，仅通过使某些太大的字节无效，我是否会以任何方式扭曲分布？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:27:18.657

是的，为了避免偏差，您不能使用模数，您必须丢弃不在范围内的结果。

编程成功的关键是将你的任务分成合适的子任务。快速规格：

1.  添加一个函数来计算存储给定数字需要多少位
2.  添加一个从随机文件中读取和缓冲字节的类，并有方法为您提供一个整数，其中包含从文件中获取的一些位（其余位为 0）。
3.  添加实际方法来获取您的随机数：
    *   计算结果的范围，并从中计算所需的位数
    *   循环获取位，添加下限，如果结果超过上限，则重试

请注意第 2 步：第一个实现可能非常粗糙，例如，您可以只获取 4 个字节作为整数并丢弃额外的位。稍后您可以优化此类以保留未使用的位并在下次使用它们，以避免浪费随机位。由于获得真正好的随机位通常有点昂贵，因此这种优化可能值得认真使用。

对于位操作，请参见例如这个 SO 问题： [Java "Bit Shifting" Tutorial?](https://stackoverflow.com/questions/6250114/java-bit-shifting-tutorial)

# dialog - 在 monotouch.dialog 中更改无线电组的样式？

> ID：13699437
> 
> 赞同：1
> 
> 时间：2012-12-04T09:14:49.530
> 
> 标签：dialog, xamarin.ios, styles, monotouch.dialog, appearance

通过继承 DialogViewController，我找到了自定义 DVC 样式（设置背景颜色等）的方法。

虽然按预期工作，但我找不到自定义无线电组的方法（我想在点击无线电组时使用显示的无线电元素设置屏幕样式）。

起初我认为我需要设置外观 API，但这似乎不会影响 MT.D 屏幕？我的第二个选择是对 RootElement 进行子类化，但由于一堆受保护的属性，这变得相当困难；我知道我可以完成这项工作，但我认为它可以更容易地完成？

谢谢！

# php - mysql数据库的性能问题

> ID：13699438
> 
> 赞同：0
> 
> 时间：2012-12-04T09:14:50.513
> 
> 标签：php, mysql, performance, query-optimization, database-performance

我们为我们的客户管理一个网站，该网站正在处理严重的性能问题。该网站是在 CMS 中构建的，最多同时处理 20 位访问者。只要网站的访问者是网站的唯一用户，一切都会顺利。CMS 构建缓存并且将 mysql 查询的使用保持在最低限度。

当我们客户的员工开始自己在网站上工作时，性能开始缺乏。整个工作流程通过网站进行，包括更新数据库中的记录和插入新记录。当记录更新时，删除或插入的缓存被删除，因此网站访问者的操作将导致查询。

我的第一个问题是 mysql 应该能够处理这些请求吗？即使数据库的设计不好（见下文）。当我在 mysql 中查看进程列表时，我看到简单的查询最多需要 15 秒。当同时有更新或插入查询时，这些查询似乎只需要很长时间。

在保存所有记录的大桌子下方。网站前端使用的所有内容都存储在这张表中。包括二进制文件。该表共有 8,676 条记录。前端有很多使用 WHERE 的查询，例如 Variabele5 或 Variabele6 这些 Variabele 字段的值取决于内容类型。

WHERE 例如：

```
WHERE Variabele5 > 500 AND Variabele6 =2 AND contenttype = 35 
```

所有员工工作的环境都不会被缓存。在这种环境中，有一些带有顺序和搜索选项的列表。这些查询尽可能多地被 memcached，但是当记录被更新、删除或插入时，memcache 会被清除。这与插入、更新和删除操作相结合可能是瓶颈。

所以我的问题是mysql应该能够处理这一切，还是数据库的设计不好处理请求。

```
+---------------+---------------+------+-----+---- -----+----------------+
| 领域 | 类型 | 空 | 钥匙 | 默认 | 额外 |
+---------------+---------------+------+-----+---- -----+----------------+
| 天然橡胶 | 中型（80） | 否 | 优先级 | 空 | 自动增量 |
| 隐藏 | 整数(1) | 否 | | 0 | |
| 标题 | varchar(255) | 否 | 穆尔 | | |
| 身体 | 正文 | 否 | | 空 | |
| 说明 | 正文 | 否 | | 空 | |
| 用户 ID | 中型（80） | 否 | | 0 | |
| 添加 | varchar(255) | 否 | | 空 | |
| 修改日期 | varchar(255) | 否 | | 空 | |
| 内容类型 | 中型（80） | 否 | 穆尔 | 0 | |
| 家长 | 中型（80） | 否 | | 0 | |
| 状态 | 中型（80） | 否 | 穆尔 | 空 | |
| 代码 | varchar(255) | 否 | 穆尔 | 空 | |
| 菜单 | 中型（80） | 否 | | 空 | |
| 文件类型 | 中型（80） | 否 | | 空 | |
| 文件夹 | 整数(11) | 否 | | 空 | |
| 排序索引 | 大整数(255) | 否 | | 空 | |
| 服务器缓存 | 整数(1) | 否 | | 1 | |
| 未来缓存 | 整数(1) | 否 | | 空 | |
| 发布自 | 日期 | 是 | | 空 | |
| 发布到 | 日期 | 是 | | 空 | |
| 固定 | 整数(11) | 是 | | 空 | |
| 关键词 | 正文 | 否 | | 空 | |
| 最新版本 | 整数(11) | 否 | | 空 | |
| 固定链接 | 正文 | 否 | | 空 | |
| 整数1 | 整数(12) | 否 | | 0 | |
| 整数2 | 整数(4) | 否 | | 0 | |
| 整数3 | 整数(4) | 否 | | 0 | |
| 整数4 | 整数(4) | 否 | | 0 | |
| 变量1 | varchar(255) | 否 | | | |
| 变量2 | varchar(255) | 否 | | | |
| 变量3 | varchar(255) | 否 | | | |
| 变量4 | varchar(255) | 否 | | | |
| 日期1 | varchar(255) | 否 | | | |
| 日期2 | varchar(255) | 否 | | | |
| 文本1 | 正文 | 否 | | 空 | |
| 文本2 | 正文 | 否 | | 空 | |
| 文本3 | 正文 | 否 | | 空 | |
| 二进制1 | 长块 | 否 | | 空 | |
| 二进制1类型 | varchar(255) | 否 | | 空 | |
| 二进制2 | 长块 | 否 | | 空 | |
| 二进制2类型 | varchar(255) | 否 | | 空 | |
| 二进制3 | 长块 | 否 | | 空 | |
| Binary3Type | varchar(255) | 否 | | 空 | |
| 浏览访问 | varchar(255) | 否 | | 空 | |
| 二进制4 | 长块 | 否 | | 空 | |
| Binary4Type | varchar(255) | 否 | | 空 | |
| 二进制5 | 长块 | 否 | | 空 | |
| Binary5Type | varchar(255) | 否 | | 空 | |
| 二进制6 | 长块 | 否 | | 空 | |
| 二进制6类型 | varchar(255) | 否 | | 空 | |
| 整数5 | 整数(11) | 否 | | 空 | |
| 整数6 | 整数(11) | 否 | | 空 | |
| 变量6 | varchar(255) | 否 | | 空 | |
| 二进制7 | 长块 | 否 | | 空 | |
| Binary7Type | varchar(255) | 否 | | 空 | |
| 二进制8 | 长块 | 否 | | 空 | |
| 二进制8类型 | varchar(255) | 否 | | 空 | |
| 二进制9 | 长块 | 否 | | 空 | |
| Binary9Type | varchar(255) | 否 | | 空 | |
| 二进制10 | 长块 | 否 | | 空 | |
| 二进制10类型 | varchar(255) | 否 | | 空 | |
| 二进制11 | 长块 | 否 | | 空 | |
| 二进制11类型 | varchar(255) | 否 | | 空 | |
| 二进制12 | 长块 | 否 | | 空 | |
| 二进制12类型 | varchar(255) | 否 | | 空 | |
| 二进制13 | 长块 | 否 | | 空 | |
| 二进制13类型 | varchar(255) | 否 | | 空 | |
| 二进制14 | 长块 | 否 | | 空 | |
| Binary14 类型 | varchar(255) | 否 | | 空 | |
| 二进制15 | 长块 | 否 | | 空 | |
| Binary15 类型 | varchar(255) | 否 | | 空 | |
| 文本4 | 正文 | 否 | | 空 | |
| 正文5 | 正文 | 否 | | 空 | |
| 正文6 | 正文 | 否 | | 空 | |
| 正文7 | 正文 | 否 | | 空 | |
| 正文8 | 正文 | 否 | | 空 | |
| 变量5 | varchar(255) | 否 | | 空 | |
| 变量7 | varchar(255) | 否 | | 空 | |
| 变量8 | varchar(255) | 否 | | 空 | |
| 变量9 | varchar(255) | 否 | | 空 | |
| 变量10 | 正文 | 否 | | 空 | |
| 变量11 | varchar(255) | 否 | | 空 | |
| 变量12 | varchar(255) | 否 | | 空 | |
| 变量13 | varchar(255) | 否 | | 空 | |
| 变量14 | varchar(255) | 否 | | 空 | |
| 变量15 | varchar(255) | 否 | | 空 | |
| 变量16 | varchar(255) | 否 | | 空 | |
| 变量17 | varchar(255) | 否 | | 空 | |
| 变量18 | varchar(255) | 否 | | 空 | |
| 变量19 | varchar(255) | 否 | | 空 | |
| 变量20 | varchar(255) | 否 | | 空 | |
| 变量21 | varchar(255) | 否 | | 空 | |
| 变量22 | varchar(255) | 否 | | 空 | |
| 变量23 | varchar(255) | 否 | | 空 | |
| 变量24 | varchar(255) | 否 | | 空 | |
| 变量25 | varchar(255) | 否 | | 空 | |
| 变量26 | varchar(255) | 否 | | 空 | |
| 变量27 | varchar(255) | 否 | | 空 | |
| 变量28 | varchar(255) | 否 | | 空 | |
| 变量29 | varchar(255) | 否 | | 空 | |
| 变量30 | varchar(255) | 否 | | 空 | |
| 变量31 | varchar(255) | 否 | | 空 | |
| 变量32 | varchar(255) | 否 | | 空 | |
| 变量33 | varchar(255) | 否 | | 空 | |
| 变量34 | varchar(255) | 否 | | 空 | |
| 变量35 | varchar(255) | 否 | | 空 | |
| 变量36 | varchar(255) | 否 | | 空 | |
| 变量37 | varchar(255) | 否 | | 空 | |
| 变量38 | varchar(255) | 否 | | 空 | |
| 变量39 | varchar(255) | 否 | | 空 | |
| 变量40 | varchar(255) | 否 | | 空 | |
| 变量41 | varchar(255) | 否 | | 空 | |
| 变量42 | varchar(255) | 否 | | 空 | |
| 变量43 | varchar(255) | 否 | | 空 | |
| 变量44 | varchar(255) | 否 | | 空 | |
| 变量45 | varchar(255) | 否 | | 空 | |
| 变量46 | varchar(255) | 否 | | 空 | |
| 变量47 | varchar(255) | 否 | | 空 | |
| 变量48 | varchar(255) | 否 | | 空 | |
| 变量49 | varchar(255) | 否 | | 空 | |
| 变量50 | varchar(255) | 否 | | 空 | |
+---------------+---------------+------+-----+---- -----+----------------+

```

索引：

```
+-------------+-------------+--------------+-- --------+--------+
| 键名 | Seq_in_index | 列名 | 基数| 空 |
+-------------+-------------+--------------+-- --------+--------+
| 初级 | 1 | 天然橡胶 | 8675 | |
| 状态 | 1 | 状态 | 5 | |
| 状态 | 2 | 发布自 | 8675 | 是 |
| 状态 | 3 | 发布到 | 8675 | 是 |
| 代码 | 1 | 代码 | 4337 | |
| 代码 | 2 | 标题 | 4337 | |
| 内容类型 | 1 | 内容类型 | 30 | |
| 标题 | 1 | 标题 | 2891 | |
+-------------+-------------+--------------+-- --------+--------+

```

服务器信息：4x Intel(R) Xeon(R) CPU L5630 @ 2.13GHz

```
+-------------------------------------------------- --------------------------+
| 免费-mt |
+-------------------------------------------------- --------------------------+
| 缓存的已用空闲共享缓冲区总数 |
| 电话：4096 3841 254 0 44 1223 |
| -/+ 缓冲区/缓存：2573 1522 |
| 交换：1023 422 601 |
| 总计：5119 4263 856 |
+-------------------------------------------------- --------------------------+

```

如果我需要提供任何其他信息，请告诉我。

编辑：一些示例查询

查询各不相同，但这里有一些示例：

员工搜索查询：

```
EXPLAIN SELECT profiel.nr as nr, CONCAT(profiel.title,' ',profiel.Variabele49) as naam,profiel.Variabele3 as tel, profiel.Variabele44 as huurprijs, profiel.Variabele5 as inkomen, profiel.Variabele39 as  personen, profiel.Variabele46 as perdatum, profiel.addate as inschrijving, profiel.text1 as opmerkingen, medewerker.Title as m_naam,profiel.Variabele48 as lang FROM  site_content as profiel    left join vw_activeContent as medewerker on medewerker.nr = profiel.Variabele9  WHERE  profiel.contenttype =26  AND (profiel.Status=3 OR  profiel.Text8='Nee')  AND (  profiel.nr  LIKE '%Rem%' OR  profiel.title LIKE '%Rem%' OR ' ' LIKE '%Rem%' OR  CONCAT(profiel.title,' ',profiel.Variabele49)  LIKE '%Rem%' OR profiel.Variabele49  LIKE '%Rem%' OR profiel.Variabele3  LIKE '%Rem%' OR  profiel.Variabele44  LIKE '%Rem%' OR  profiel.Variabele5  LIKE '%Rem%' OR  profiel.Variabele39  LIKE '%Rem%' OR  profiel.Variabele46  LIKE '%Rem%' OR  profiel.addate  LIKE '%Rem%' OR  profiel.text1  LIKE '%Rem%' OR  medewerker.Title  LIKE '%Rem%' OR profiel.Variabele48  LIKE '%Rem%' OR profiel.Variabele1 LIKE '%Rem%' OR profiel.Variabele3 LIKE '%Rem%' )  ORDER BY  profiel.sortIndex 
```

```
+----+-------------+--------+--------------+------- -+----------------+--------------------+---------- ---+---+---------+--------+---+------- ------+------------------+--------+
| 编号 | 选择类型 | 表| | 类型 | 可能的键 | | 关键 | | key_len | 参考 | | | 行 | 额外 |
+----+-------------+--------+--------------+------- -+----------------+--------------------+---------- ---+---+---------+--------+---+------- ------+------------------+--------+
| 1 | 简单 | | 简介 | | 参考 | 状态，内容类型 | 内容类型 | 3 | 常量 | | | 1700 | 使用哪里；使用文件排序 | |
| 1 | 简单 | | 网站内容 | eq_ref | 初级,状态 | | 初级 | | 3 | profiel.Variabele9 | 1 | 使用位置 | | |
+----+-------------+--------+--------------+------- -+----------------+--------------------+---------- ---+---+---------+--------+---+------- ------+------------------+--------+

```

搜索查询访问者

```
EXPLAIN SELECT nr, title AS adres, Description AS description, Binary3 AS bin, Variabele2 AS 
TYPE , Text3, Text2 AS verhuurd, Integer2 AS kamers, Integer3 AS personen, Variabele4 AS inclusief, Text1 AS oplevering, Integer5 AS huurpijs, Variabele6 AS wijk, moddate
FROM vw_activeContent
WHERE contenttype =22
AND Integer2 >=2
AND Integer3 >=1
AND Integer5 >380
AND Integer5 <770
ORDER BY Integer5 ASC 
```

```
+----+-------------+--------+--------------+------+ --------------------+-------------+-----+--------+- --------+-----------------------------+------+---- ---+
| 编号 | 选择类型 | 表| | 类型 | 可能的键 | | 关键 | | key_len | 参考 | 行 | 额外 |
+----+-------------+--------+--------------+------+ --------------------+-------------+-----+--------+- --------+-----------------------------+------+---- ---+
| 1 | 简单 | | 网站内容 | 参考 | 状态，内容类型 | 内容类型 | 3 | 常量 | 第696章 使用哪里；使用文件排序 | | |
+----+-------------+--------+--------------+------+ --------------------+-------------+-----+--------+- --------+-----------------------------+------+---- ---+

```

被广泛使用的查询：

```
EXPLAIN SELECT DISTINCT Variabele2
FROM site_content
WHERE contenttype =22
AND STATUS =1
ORDER BY Variabele2 ASC 
```

```
+----+-------------+--------+--------------+------+ --------------------+-------------+-----+--------+- --------+----------------------------------------- -----+------+------+
| 编号 | 选择类型 | 表| | 类型 | 可能的键 | | 关键 | | key_len | 参考 | 行 | 额外 |
+----+-------------+--------+--------------+------+ --------------------+-------------+-----+--------+- --------+----------------------------------------- -----+------+------+
| 1 | 简单 | | 网站内容 | 参考 | 状态，内容类型 | 内容类型 | 3 | 常量 | 第696章 使用哪里；使用临时的；使用文件排序 | | |
+----+-------------+--------+--------------+------+ --------------------+-------------+-----+--------+- --------+----------------------------------------- -----+------+------+

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:29:23.003

从您给出的唯一查询示例中，Variabele5 和 Variabele6 没有被索引，并且可能有很多 contenttype = 35 的记录，因此查询可能没有非常有效地使用索引。更多查询示例可能有助于我们更好地了解情况。

但是，表大小似乎不是很大，这让我认为缓存的实际重建可能是实际原因。因此，您可能想查看应用程序中使用的缓存策略。我不知道您可以进行多少测试，但我会尝试在关闭缓存的情况下测试您的场景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:59:17.550

首先，正如您所说，您的数据库一团糟。但是，考虑到您的硬件和相对较小的数据量，我希望查询会非常快。

如果查询速度很慢，可能是因为“where”条件上的通配符 -`profiel.title LIKE '%Rem%'`例如。您可以将其替换为全文搜索。

另一个设计问题是在数据库中存储二进制文件。根据二进制文件的大小，这会对磁盘 IO 性能产生很大影响，并且 - 通常 - 二进制文件的编码/解码（通常需要数据库连接保持打开）可能比读取文本要慢得多/numbers 从结果集中。考虑在文件系统上缓存二进制文件，并且只有在您*知道*它们已更改时才为它们访问数据库。

但是，在深入研究数据库之前，我认为您需要找到解决性能问题的方法，这样您就知道您正在解决正确的问题。考虑使用[分析器](https://stackoverflow.com/questions/21133/simplest-way-to-profile-a-php-script)来查找瓶颈，然后处理具体问题。

# ruby-on-rails - 更改代码后是否需要重新启动我的 resque？

> ID：13699441
> 
> 赞同：2
> 
> 时间：2012-12-04T09:15:06.410
> 
> 标签：ruby-on-rails, resque

我正在使用[resque](https://github.com/defunkt/resque)对我的 Rails 应用程序中的作业进行一些后台处理。如果我在 Rails 应用程序中围绕后台处理修改了一些逻辑，是否需要重新启动 resque 才能获取更改？

我不认为，但在我这样做之前我遇到了问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T09:24:14.557

这取决于。

在开发模式下，您不需要重新启动您的工作人员。

但是，在生产模式下，重新启动您的工作人员是必不可少的，因为执行代码缓存是为了提高性能。

您可以使用酷宝石“上帝”来监控生产环境中的工人

# mysql - MySQL Join 返回 Null

> ID：13699453
> 
> 赞同：2
> 
> 时间：2012-12-04T09:15:55.943
> 
> 标签：mysql, join, left-join, union-all

我有两张桌子

```
Table_1
id|subject_code|subject_id
 1|Test1       |1
 2|Test2       |2
 3|Test3       |3

Table2
id|subject_id|grade|status
 1|1         |5.00 |Fail
 2|3         |2.25 |Pass 
```

现在，我想创建一个返回以下内容的查询，

```
Table3
subject_code|grade|status
Test1       |5.00 |Fail
Test2       |NULL |NULL
Test3       |2.25 |Pass 
```

我已经阅读了关于结合 left join 和 union all 但我不知道如何做到这一点。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T09:18:41.030

尝试左连接，如下所示：

```
Select 
DISTINCT(table1.subject_code), 
grade, 
status

from table1 
LEFT join table2 on (table1.subject_id=table2.subject_id) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T09:19:38.320

```
SELECT subject_code, grade, status 
FROM Table_1 t1 
LEFT JOIN Table2 t2 ON t1.subject_id = t2.subject_id; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T09:20:48.223

我想一个简单的 LEFT JOIN 就可以了：

`SELECT Table_1.subject_code, Table2.grade, Table2.status FROM Table_1 LEFT JOIN Table2 ON Table2.subject_id = Table_1.subject_id`;

# php - 表日期时间与现在在sql查询中的日期比较？

> ID：13699460
> 
> 赞同：0
> 
> 时间：2012-12-04T09:16:13.733
> 
> 标签：php, sql

在我的表列`datecreated`中，值是`2012-12-04 00:29:30` 我想将它与 类似这样`date now`的格式进行比较：`d/m/Y`

```
$date = date('d/m/y');
$sql = mysql_query("Select * from `tblname` where `datecreated` > '".$date."' "); 
```

但我认为没有任何帮助可以做到这一点？谢谢 ..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T09:20:27.487

你可以使用[DATE_FORMAT 函数](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)来格式化你的列

```
"Select *, DATE_FORMAT(`datecreated`, '%e/%c/%Y') AS `datecreated` from `tblname` where `datecreated` > '$date'" 
```

# javascript - d3.js json结构添加数据

> ID：13699462
> 
> 赞同：1
> 
> 时间：2012-12-04T09:16:23.360
> 
> 标签：javascript, json, d3.js, data-virtualization

我正在绘制一个带有两个简单值的饼图：标签和值。这是我的json：

```
{
"valuecase": {
    "times": [
        {"label": "label", "value":5},
        {"label": "label", "value":13}
    ],
    "record": [
        {"label": "label", "value":5},
        {"label": "label", "value":13}
    ]
} 
```

}

我不确定它是不是最好的结构，实际上 d3.js 我不能调用数据值。这是我的代码：

```
d3.json("my.json", function(json) {
data = json.valuecase;
...selectAll("path")
.data(pie(dataset.times)) //*** How call the array, only value data??
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:05:46.840

您需要将一组值传递给 pie()... 您可以尝试 d3.layout.pie().value(function(d) {return d.value; }); ...

```
d3.json("myjson.json", function(json) {

    var data = json.valuecase

    var w = 300,                           
    h = 300,   
    r = 100, 
    color = d3.scale.category20c();         
var vis = d3.select("body")
.append("svg:svg")             
.data([data.times])                   
.attr("width", w)
.attr("height", h)
        .append("svg:g")                
        .attr("transform", "translate(" + r + "," + r + ")")    

        var arc = d3.svg.arc()              
        .outerRadius(r);

var pie = d3.layout.pie()                   
  .value(function(d) { console.log(d); return d.value; });    
var arcs = vis.selectAll("g.slice")     
  .data(pie)                          
  .enter()        
  .append("svg:g")        
  .attr("class", "slice");
arcs.append("svg:path")
  .attr("fill", function(d, i) { return color(i); } ) 
  .attr("d", arc);                                
arcs.append("svg:text")                                     
  .attr("transform", function(d) {                    
            d.innerRadius = 0;
            d.outerRadius = r;
            return "translate(" + arc.centroid(d) + ")";        
        })
.attr("text-anchor", "middle")                                      
  .text(function(d, i) { return data.times[i].value; });        
}); 
```

# maven - maven编译插件，build helper插件不生成class文件

> ID：13699466
> 
> 赞同：0
> 
> 时间：2012-12-04T09:16:34.470
> 
> 标签：maven, maven-2, m2eclipse, maven-compiler-plugin

我正在尝试将现有项目转换为 Maven 项目。它有 3 个模块，其中一个模块有多个源文件夹。 [http://i.imgur.com/jZCnR.png](http://i.imgur.com/jZCnR.png)

maven clean and install 或 eclipse clean 不会在 classes 和 test-classes 文件夹中创建类文件。项目结构是由那里没有类文件创建的。

以下插件配置在父 pom.xml 中定义。

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>build-helper-maven-plugin</artifactId>
    <version>1.7</version>
    <executions>
        <execution>
            <id>add-source</id>
            <phase>generate-sources</phase>
            <goals><goal>add-source</goal></goals>
            <configuration>
                <sources>
                    <source>src/main/java/**/*.*</source>
                    <source>src/report/java/**/*.*</source>
                    <source>src/architect/java/**/*.*</source>
                </sources>
            </configuration>
        </execution>
        <execution>
            <id>add-test-source</id>
            <phase>generate-test-sources</phase>
            <goals><goal>add-test-source</goal></goals>
            <configuration>
                <sources>
                    <source>src/test/java/**/*.*</source>
                </sources>
            </configuration>
        </execution>
    </executions>
</plugin>
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>3.0</version>
    <configuration>
        <source>1.7</source>
        <target>1.7</target>
        <debug>false</debug>
    </configuration>
    <executions>
        <execution>
            <id>default-compile</id>
            <phase>compile</phase>
            <goals><goal>compile</goal></goals>
            <configuration>
                <includes>
                    <include>src/main/java/**/*.*</include>
                    <include>src/report/java/**/*.*</include>
                    <include>src/architect/java/**/*.*</include>
                </includes>
            </configuration>
        </execution>
        <execution>
            <id>default-testCompile</id>
            <phase>test-compile</phase>
            <goals><goal>testCompile</goal></goals>
            <configuration>
                <testIncludes>
                    <include>src/test/java/**/*.*</include>
                </testIncludes>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T10:17:53.433

对我来说，eclipse 中的 mvn 插件也不会生成正确的结构。尝试在 cmd 中运行 mvn eclipse:eclipse。那是为我做的。

您还使用了“生成测试源”阶段。这似乎不起作用尝试“生成源”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-19T02:57:17.953

根据[Using MOJO build-helper-maven-plugin to add more source folder to MAVEN](https://stackoverflow.com/questions/19561345/using-mojo-build-helper-maven-plugin-to-add-more-source-folders-to-maven)你不应该**通过**包含标签**再次**定义额外的源目录；*只在build-helper-maven-plugin*中定义它们，就是这样。

您也可以尝试将*add-source*目标与早期的 Maven 阶段相关联，例如*initialize*。一般来说，越早越好。

```
<phase>initialize</phase>
<goals>
    <goal>add-source</goal>
</goals> 
```

就我而言，我的错误是将其绑定到*编译*阶段。尽管我的*build-helper-maven-plugin*是在*pom.xml中的**maven-compile-plugin*之前定义的，但不知何故，*默认编译*任务首先启动并默默地忽略了我额外的源目录，从而导致构建过程中出现一些意外错误。绑定到同一阶段的步骤顺序应遵循 pom.xml 中的出现顺序，但并非总是如此。

 **检查您是否在日志中看到：

```
[INFO] --- build-helper-maven-plugin:1.8:add-source (add-gen-source) @ deepclone-sample-project-1 ---
[INFO] Source directory: E:\dev\workspace...\src\main\generated added. 
```

小窍门：在你的代码中故意犯错，只是为了检查编译器是否真的通过了你的额外目录。如果编译没有立即失败，那么问题不在于不生成类文件，而在于编译器配置。您可以排除增量构建问题或类似的更深奥的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T11:26:18.890

如[build helper maven plugin](http://mojo.codehaus.org/build-helper-maven-plugin/)的目标[中](http://mojo.codehaus.org/build-helper-maven-plugin/usage.html)所述，您应该在标签中指定一个**目录。**`add-source`**`<source>`****

# swing - 为 jtable 中列的每一行添加不同的组合框

> ID：13699467
> 
> 赞同：2
> 
> 时间：2012-12-04T09:16:47.770
> 
> 标签：swing, jtable, jcombobox

```
public class TablePanel extends JPanel implements ActionListener,Serializable
{
    JTable m_table;
    JComboBox combo,combo1;
    DefaultTableModel model=new DefaultTableModel();
    DefaultComboBoxModel model1=new DefaultComboBoxModel();
    DefaultComboBoxModel model2=new DefaultComboBoxModel();
        List<String> field;
    List<String> attrCode;
    TablePanel()
    {

            m_table=new JTable(model);
            m_table.setBackground(Color.WHITE);
            model.addColumn("col1");
            model.addColumn("col2");
            model.addColumn("col3");
            model.addColumn("col4");
            model.addColumn("col5");
            model.addColumn("col6");
            JScrollPane scrollpane=new JScrollPane(m_table);
            scrollpane.setBackground(Color.WHITE);
            Dimension d = m_table.getPreferredSize();
            scrollpane.setPreferredSize(
                new Dimension(d.width,m_table.getRowHeight()*15+1));
            add(scrollpane);

            }

                       attrCode = service.getAllAttributes(value);
               combo1=new JComboBox(model2);
               model1.addElement(attrCode.get(0));
               model1.addElement(attrCode.get(1));
            model1.addElement(attrCode.get(2));
            model1.addElement(attrCode.get(3));
            model1.addElement(attrCode.get(4));
            model1.addElement(attrCode.get(5));
            model1.addElement(attrCode.get(6));
            col=m_table.getColumnModel().getColumn(0);
            col.setCellEditor((new DefaultCellEditor(combo1)));
            combo2=new JComboBox(model3);
            model3.addElement(trans.get(0));
            model3.addElement(trans.get(1));
            model3.addElement(trans.get(2));
            model3.addElement(trans.get(3));
            model3.addElement(trans.get(4));
            col=m_table.getColumnModel().getColumn(2);

            col.setCellEditor((new DefaultCellEditor(combo2)));} } 
```

我有一张桌子，桌子上有一些列。两列现在有组合框我想做的是，当用户从 column1 组合框中选择一些值时，根据用户选择的值 column2 组合框应该被填充。例如，如果用户从 column1 组合框中选择 value1，则 column2 组合框将仅显示与 value1 对应的值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T12:40:48.740

`Render`两列。

```
TableColumn comboCol1 = table.getColumnModel().getColumn(0);
TableColumn comboCol2 = table.getColumnModel().getColumn(1);
comboCol1.setCellEditor(new CustomComboBoxEditor());
comboCol2.setCellEditor(new CustomComboBoxEditor()); 
```

// 这是第二列，取决于第一列的选择。

```
public class CustomComboBoxEditor extends DefaultCellEditor {

// Declare a model that is used for adding the elements to the `ComboBox`
private DefaultComboBoxModel model;

public CustomComboBoxEditor() {
    super(new JComboBox());
    this.model = (DefaultComboBoxModel)((JComboBox)getComponent()).getModel();
}

@Override
public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column) {

   if(column == 0) {
         // Just show the elements in the JComboBox.         
    } else {

           // Remove previous elements every time.
           // So that we can populate the elements based on the selection.
           model.removeAllElements();

           // getValueAt(..) method will give you the selection that is set for column one.
           String selectedItem = table.getValueAt(row, 0);

          // Using the obtained selected item from the first column JComboBox 
          // selection make a call ans get the list of elements.

         // Say we have list of data from the call we made. 
         // So loop through the list and add them to the model like the following.
         for(int i = 0; i < obtainedList.size(); i++) {
                model.addElement(obtainedList.get(i));
         } 
     } // Close else

    // finally return the component.
    return super.getTableCellEditorComponent(table, value, isSelected, row, column);
 }
} 
```

# javascript - 在一页上上传大量单独的 ajax 图像

> ID：13699468
> 
> 赞同：0
> 
> 时间：2012-12-04T09:16:49.123
> 
> 标签：javascript, jquery, ajax, image-upload

我有一个 ajax 上传脚本，但它似乎一次只适用于一张图片上传。我的问题是我正在创建一个商店 CMS，其中一个页面需要上传大量图像，它是一个产品，所以一个产品有一个拇指，还有 4 个其他图像。

通常我使用这个脚本：

```
 $(document).ready(function(){

      var btnUpload=$('#upload');
      var status=$('#swaptd');
      $('#hideimg').hide();
      new AjaxUpload(btnUpload, {
            action: 'upload-file-notes.php',
            name: 'uploadfile',
            onSubmit: function(file, ext){
           if (! (ext && /^(jpg|png|gif|pdf|doc)$/.test(ext))){ 
           // extension is not allowed 
                                                                              status.text('File format not supported!');
                   return false;
                                                                }
                                                                //status.text('Uploading...');
                  $('#hidebtn').hide();
                                                            $('#hideimg').show();
                    },
              onComplete: function(file, response){
              //alert(response);
              var mytext = response.split('#');
               //Add uploaded file to list
           if(mytext[0]==="success"){
                    str =mytext[1];
             newid = str.substring(0, str.length - 5);                                                                           $('#myfilename').html(mytext[1]);                                                                     document.daftform.attachments.value = mytext[1];                                                                         $('#hidebtn').show();                                                                           $('#hideimg').hide();
} else{                                                               $('#myfilename').html('error had occured');
                                                                }
                                                }
                                });

                }); 
```

但问题是，如果我在一个页面上有多个 is 实例，它开始无法正常工作，谁能建议我如何更改它以使其对多个上传按钮友好，或者他们这样做的另一种方式？我只是在寻找正确方向的一点，因为它正在成为一个问题。预先感谢您的任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:44:07.697

在您的脚本中，您使用的是按钮的 id：`var btnUpload=$('#upload');`

所以你不能对许多按钮使用这个确切的脚本。

您需要将按钮 ID 作为参数传递。尝试以这种方式去做：

*   在您的 html 标记中：为每个按钮指定一个 id 或`onclick="upload(this)"`
*   在您的 javascript 中：将函数更改为具有名称并接收参数

> function upload(button){
> // 你的 ajax 调用

```
new AjaxUpload(button, {
            action: 'upload-file-notes.php',
... 
```

> } }

# php - 在drupal 6中创建一个限时页面

> ID：13699475
> 
> 赞同：0
> 
> 时间：2012-12-04T09:17:04.787
> 
> 标签：php, drupal-6

我想在 drupal 6 中创建一个表单，用户可以在有限的时间内（例如：10 分钟）强制填写字段。

我想在我的代码的服务器端处理这个限制时间。我不希望用户可以通过更改系统时钟来更改时间。

没有 $_SESSION 有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:23:17.660

使用[PHP 会话](http://php.net/manual/en/book.session.php)。像这样的东西应该工作：

```
//Set your start time when the user enters the page:
session_start();
if(!isset($_SESSION['start_time'])){
    $_SESSION['start_time'] = time();
}

//Check the current time against the start time when the user submits:
if(!isset($_SESSION['start_time'])){
    $elapsed = time() - $_SESSION['start_time'];
    $limit = 10*60; //Since time() is in seconds, multiply desired # of minutes by 60
    if($elapsed <= $limit){
        //It took less than 10 minutes
    }else{
        //It took more than 10 minutes
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T09:25:38.817

如何存储用户开始与表单交互的时间，并在提交时检查时间是否已经过去？

您可以使用会话存储特定用户的时间。

这些是您需要执行此操作的参考：

```
http://php.net/manual/en/function.session-start.php
http://se2.php.net/manual/en/function.date.php
http://se2.php.net/manual/en/function.date-diff.php 
```

# sql - 查找用作外键的自联接表列的根父级

> ID：13699476
> 
> 赞同：2
> 
> 时间：2012-12-04T09:17:06.920
> 
> 标签：sql, sql-server-2008, tsql, common-table-expression

我有一个`Locations`表，它是自连接的，用于制作行政区划的层次结构。Like `State`, `County`, `Town`etc. `LocationId`属于`PK`这个`table`，它被用作`Foreign key`in `joining table`。加入表有`ProjectId`和`LocationsId`，项目可以在任何级别的位置，所以加入表可以有县、镇等。我想找出`root-parent(State)`用作 FK 的位置。请使用以下`sql`作为示例。（在管理工作室复制/粘贴）

```
DECLARE @Locations TABLE (LocationId INT, LocationName VARCHAR(30), ParentId INT, LocLevel INT)
INSERT INTO @Locations 
Values(1, 'State1', NULL, 1), 
(2, 'State1-County1', 1, 2),
(3, 'State1-County1-Town1', 2, 3),
(4, 'State1-County1-Town1-Muncip-1', 3, 4),
(5, 'State1-County2', 1, 2),
(6, 'State1-County2-Town1', 5, 3),
(7, 'State1-County2-Town1-Muncip-1', 6, 4),
(8, 'State2', NULL, 1), 
(9, 'State2-County1', 8, 2),
(10, 'State2-County1-Town1', 9, 3),
(11, 'State2-County1-Town1-Muncip-1', 10, 4)

DECLARE @ProjectLocations TABLE (ProjectLocationId INT, ProjectId INT, LocationId INT)
INSERT INTO @ProjectLocations
VALUES(1, 1, 2),
(2, 1, 3),
(3, 1, 4),
(4, 1, 11),
(5, 2, 3),
(6, 2, 11),
(7, 3, 10),
(8, 4, 11),
(9, 5, 9)

SELECT * FROM @Locations
SELECT * FROM @ProjectLocations 
```

这个应该出

```
DECLARE @FirstOutput TABLE (ProjectLocationId INT, ProjectId INT, LocationId INT, RootParentId INT)
SELECT * FROM @FirstOutput 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:56:42.023

我认为以下内容对您有用：

（为方便起见，我已将所有 @ 表更改为 # 表）

```
WITH LocationHierachy (LocationId, ParentId)
AS
(
--Anchor
    SELECT  L.LocationId, ISNULL(L.ParentId, L.LocationId)
    FROM    #Locations L
    UNION ALL
--Recurse
    SELECT  H.LocationId, L.ParentId
    FROM    LocationHierachy H
    JOIN    #Locations L
            ON  L.LocationId = H.ParentId
)
SELECT  PL.ProjectLocationId, 
        PL.ProjectId, 
        PL.LocationId, 
        H.ParentId as RootParentId
FROM    #ProjectLocations PL
JOIN    LocationHierachy H
        ON  PL.LocationId = H.LocationId
JOIN    #Locations L
        ON  H.ParentId = L.LocationId
WHERE   L.ParentId IS NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:12:46.440

您需要一个递归查询，在 SQL Server 中使用公用表表达式实现。这是一个例子：

```
WITH FirstOutput (ProjectLocationId,ProjectId,LocationId,RootParentId) AS
(
  SELECT
        PL.ProjectLocationId,PL.ProjectId,L.LocationId,L.LocationId
  FROM
        ProjectLocations PL
  INNER JOIN
        Locations L ON PL.LocationId=L.LocationId
  WHERE 
        L.ParentId IS NULL
  UNION ALL 
  SELECT
  PL.ProjectLocationId,PL.ProjectId,L.LocationId,F.RootParentId
  FROM
        ProjectLocations PL
  INNER JOIN
        Locations L ON PL.LocationId=L.LocationId
  INNER JOIN
        FirstOutput F ON L.ParentId=F.LocationId
 )
 SELECT * FROM FirstOutput 
```

# c# - 对 XPath 或运算符结果进行排序

> ID：13699478
> 
> 赞同：0
> 
> 时间：2012-12-04T09:17:16.537
> 
> 标签：c#, xpath, or-operator

给定以下 XML：

```
<xml>
    <Table>
        <Product>
            <CaseName>Test 1</CaseName>
            <Beta>banana</Beta>
            <Alpha>apple</Alpha>
            <Delta>dates</Delta>
            <Chi>chiku</Chi>
        </Product>
        <Product>
            <CaseName>Test 2</CaseName>
            <Beta>borange</Beta>
            <Alpha>ared</Alpha>
            <Delta>dblue</Delta>
            <Chi>cgreen</Chi>
        </Product>
    </Table>
</xml> 
```

我想使用**XPath 和“或”运算符**来规定**Product**下的节点返回的顺序，但是无论我使用什么 XPath 语句，**查询结果总是按照原始 XML 的顺序返回**。例如，以下 XPath 语句：

1.  //三角洲 | //案例名称 | //测试版
2.  //案例名称 | //测试版 | //三角洲
3.  //三角洲 | //测试版 | //案例名称

所有返回节点按以下顺序：CaseName、Beta、Delta、CaseName、Beta、Delta。此顺序与原始 XML 节点结构相匹配。**我可以使用什么 XPath 语句与“或”运算符一起按我想要的顺序返回节点？**

我使用 C# 作为我的开发环境。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:22:39.900

如果 XPath 不是必须的，您可以使用 LinqToXml 对元素进行排序

```
XDocument xDoc = XDocument.Parse(xmlstring); //or XDocument.Load(filename)
var products = xDoc.Descendants("Product")
                .Select(p => p.Elements().OrderBy(e => e.Name.LocalName).ToList())
                .ToList(); 
```

或者可能是这样的

```
List<string> names = new List<string>{ "CaseName", "Beta", "Delta" };

XDocument xDoc = XDocument.Parse(xml);
var products = xDoc.Descendants("Product")
                .Select(p => p.Elements()
                              .Where(e => names.Contains(e.Name.LocalName))
                              .OrderBy(e => names.IndexOf(e.Name.LocalName)).ToList())
                .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:56:08.460

就 XPath 而言，您需要了解 XPath 1.0 只知道无序节点集，因此`//foo | //bar`您会得到一组`foo`和`bar`元素节点。然后大多数实现按文档顺序返回结果。

如果您希望能够定义您需要使用 XPath 2.0（或 XQuery 1.0）的顺序，其中数据模型知道节点（和原子项目）的有序序列，您可以使用逗号运算符`,`来`//foo, //bar`获取一系列`foo`和`bar`元素节点。但是，Microsoft .NET 框架类库不附带 XPath 2.0 实现，您需要使用第三方解决方案，如 XmlPrime 或 Saxon 9 的 .NET 版本。

# jquery - jqgrid：不按回车更新单元格值

> ID：13699479
> 
> 赞同：0
> 
> 时间：2012-12-04T09:17:16.947
> 
> 标签：jquery, asp.net-mvc, jqgrid

我使用jqgrid，在内联编辑中，在用户编辑特定单元格值后，他需要按“Enter”按钮进行更新，但我需要在用户离开单元格时直接更新它。

jQuery代码

```
<script type="text/javascript">
    $(function () {
        var lastsel;
        var colind = 2;
        jQuery("#list").jqGrid({
            url: '/Home/GetStudents/',
            datatype: 'json',

            mtype: 'POST',
            colNames: ['StudentID', 'FirstName', 'LastName', 'Email'],
            colModel: [
      { name: 'StudentID', sortable: false, key: true },
      { name: 'FirstName', key: true },
      { name: 'LastName', sortable: false, key: true },
      { name: 'Email', width: 200, sortable: false, key: true}],
            cmTemplate: { align: 'center', editable: true },
            pager: '#pager',
            width: 750,
            rowNum: 15,
            rowList: [5, 10, 20, 50],
            sortname: 'StudentID',
            sortorder: "asc",
            viewrecords: true,
            caption: ' My First JQgrid',

            onSelectRow: function (StudentID)
            //  onCellSelect:function(StudentID)
            {

                if (StudentID != lastsel) {

                    jQuery('#list').jqGrid('restoreRow', lastsel);
                    jQuery('#list').jqGrid('editRow', StudentID, true);
                    // jQuery('#list').jqGrid('editCell', StudentID, colind, true);
                    lastsel = StudentID;

                }
            },

            editurl: '/Home/About/',
            //                data: { get_param: selectedDescription },
            caption: "jQgrid Sample"

        });

        jQuery("#list").jqGrid('navGrid', "#pager", { edit: false, add: false, del: false });
    });

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:50:14.320

我不建议您实现这种行为，因为它会产生验证错误。如果用户只是开始输入一些内容来更改某些文本，则输入的数据可能仍然是错误的。在很短的时间间隔后自动保存数据可以尝试保存绝对错误的数据。

例如，如果用户按错键（如字段中只允许数字的字母），则在保存数据期间将产生错误。

此外，如果用户开始输入一些错误信息（例如，他可以错误地从某个单元格中删除一些长文本），则信息的保存不允许回滚。标准的内联编辑实现支持`Esc`除了`Enter`. 我发现`Esc`关键的支持非常重要。

所以我可以重复一遍，我不建议您实施您在问题中描述的行为。

您应该考虑的另一个选项是使用单元格编辑而不是内联编辑。我个人更喜欢内联编辑，但这是品味的问题。

# linux - 如何链接到非默认 glibc 库？

> ID：13699480
> 
> 赞同：2
> 
> 时间：2012-12-04T09:17:17.973
> 
> 标签：linux, gcc, compilation, cross-compiling

我已经成功地在 x86-64 机器上交叉编译了一个程序。但是，当我尝试在目标机器 sh4a 上运行时，出现以下错误：./ioq3ded.sh4a: /lib/libc.so.6: version `GLIBC_2.11' not found (required by ./ioq3ded.sh4a )

两台机器详情如下： 编译机架构：x86-64 LIBC版本：2.11

执行机架构：sh4a LIBC 版本：2.5

编程语言是 C

因此，作为一个解决方案，我尝试在 sh4a 机器上编译一个 2.11 的 LIBC 库。但是失败了，因为sh4a机器上的GCC编译器太老了，我没有权限，也没有升级GCC的可能。此外，作为替代解决方案，我尝试在 x86-64 上编译 2.5 LIBC 库，以便在交叉编译期间链接到它们。但是，./configure 失败了，因为缺少必需的对象。此外，我试图 -static 编译程序。但是，它失败了： 至于ioquake3，我尝试静态构建它： /bin/ld: /r/home7/usr/lib/libc.a(dl-tsd.o): TLS local exec code cannot be linked into shared objects 使用我们拥有的旧版本的 gcc 静态构建它似乎是不可能的。我查了这个问题： [https://bugs.gentoo.org/show_bug.cgi?id=122665](https://bugs.gentoo.org/show_bug.cgi?id=122665)

此外，我从网上下载了 x86-64 的 LIBC 2.5： [http ://rpm.pbone.net/index.php3/stat/4/idpl/12884473/dir/startcom_5/com/glibc-2.5-34.x86_64 .rpm.html](http://rpm.pbone.net/index.php3/stat/4/idpl/12884473/dir/startcom_5/com/glibc-2.5-34.x86_64.rpm.html) [^]

但是，我似乎找不到正确的编译标志，以便它链接到我的特定（2.5 版本库）而不是系统的（2.11 版本库）。

我的问题来了：*“make”标志应该是什么？考虑到我（2.5版本库）所在的文件夹是： ./glibc-2_5/lib64/libc.so 而且，我的制作如下： make USE_LOCAL_HEADERS=0 ARCH=sh4a CFLAGS='-fopenmp -Wall -D_GNU_SOURCE=1 -D_REENTRANT' USE_VOIP=0 BUILD_CLIENT=0 BUILD_MISSIONPACK=0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T10:57:31.343

您可以简单地将 Glibc 文件从工具链复制到 SH4A 机器中。

如果您不想覆盖现有的 libc 文件，请尝试 a `chroot`，或者，如果这对您不起作用，请将它们放在其他地方，然后将以下选项添加到您的链接命令：

```
-Wl,-rpath,/path/to/alternative/lib -Wl,-dynamic-linker,/path/to/alternative/lib/ld-linux.so 
```

路径应该是它们在 SH4A 目标机器上的样子，而不是 x86_64 构建机器上的。

# java - 我无法在 QUERY 执行器中执行此嵌入式 SQL 语句

> ID：13699485
> 
> 赞同：0
> 
> 时间：2012-12-04T09:17:31.503
> 
> 标签：java, sql, jdbc

当我将该`Select benefitid from tr_benefittype where fiscal = '1'`子句放入 MSSQL 中的查询执行器时，它说没有该名称的列。我搜索数据库，发现表中确实没有命名`benefitid`列`tr_benefittype`。在发送到数据库之前，此列名称是否以某种方式更改？

这是JAVA代码；

```
 m_risks = new TRRiskSet();
            new TRRiskSQL().getRisks(m_con, m_risks, m_currObject.getClass().getName(), 
                    m_currObject.getKey(), new String[] {"riskflag = 'R'"});

            budSQL.getBudgets(m_con, m_budgets, m_currObject.getClass().getName(), m_currObject.getKey(), 
                                            new String[] {"currencyid = " + corpCurrencyID});
            benSQL.getBenefits(m_con, m_benefits, m_currObject.getClass().getName(), m_currObject.getKey(), 
                    new String[] {"currencyid = " + corpCurrencyID + 
                " and benefitid in (select benefitid from tr_benefittype where fiscal='1')"});
            resSQL.getResourceBudgets(m_con, m_resources, m_currObject.getClass().getName(), 
                                                            m_currObject.getKey(), null); 
```

我真的只是想知道 java 代码在将它发送到数据库之前是否正在更改 SQL 查询，以便它真的没有调用明显的列，benefitid"

# javascript - 如何防止 sessionStorage 在 JavaScript 控制台中显示？

> ID：13699491
> 
> 赞同：0
> 
> 时间：2012-12-04T09:17:59.640
> 
> 标签：javascript, session, security

我想在 sessionStorage 中存储一些敏感信息，以便在多个页面中使用它。

然而，任何对 JavaScript 了解最少的人都可以打开浏览器的 JavaScript 控制台，在末尾键入带有点的 sessionStorage，然后查看其所有字段以及随后所有字段的内容。

所以实际上 sessionStorage 绝对不安全，这意味着我不能在那里存储任何敏感信息，如用户 ID、密码等。或者我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T09:21:30.640

在什么情况下安全？它是客户端数据的存储，只要数据不会在网站之间泄漏，您就可以使用。当然 sessionStorage**的设计目的不是为了**保留您想要对用户隐藏的任何数据（**尤其是敏感**信息！），所以不要惊讶您放在那里的任何数据都很容易被他使用。

使用其他方式存储此类敏感信息（最好是服务器端存储，它可能更安全）。

# javascript - 在 $.extend 类中如何调用内部函数？

> ID：13699495
> 
> 赞同：0
> 
> 时间：2012-12-04T09:18:09.863
> 
> 标签：javascript, jquery

为什么它不起作用，它说它不是一个函数，为什么我不能从 myalert2 调用 myalert()？怎么做？？

```
var sheepclass = function(handler) {
    this.handler = $.extend({
        'sizes': 'thin',
        'eat': 'grass',
        'color': 'white',
        myalert: function() {
            alert('Hello World');
        },
        myalert2: function() {
            handler.myalert();
            this.handler.myalert(); //this not work either
        }
    }, handler);
}
var blacksheep = new sheepclass({
    'color': 'black'
});
blacksheep.handler.myalert2(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:22:20.360

打电话`this.myalert()`就行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:23:38.987

是因为范围...

[http://jsfiddle.net/78QXc/](http://jsfiddle.net/78QXc/)

```
var sheepclass = function(handler) {
    this.handler = $.extend({
        'sizes': 'thin',
        'eat': 'grass',
        'color': 'white',
        myalert: function() {
            alert('Hello World');
        },
        myalert2: function() {
            this.myalert();
        }
    }, handler);
}
var blacksheep = new sheepclass({
    'color': 'black'
});
blacksheep.handler.myalert2();​ 
```

# voice-recognition - 语音依赖语音识别

> ID：13699496
> 
> 赞同：0
> 
> 时间：2012-12-04T09:18:13.607
> 
> 标签：voice-recognition, speech, cmusphinx

我正在为嵌入式设备的语音相关语音识别解决方案寻找解决方案。我看过pocketsphinx，但因为我仍然不熟悉它，我想也许更有经验的人可能知道。是否可以使用pocketsphinx 来实现这样的语音识别。它应该记录音频，提取其特征，然后将其与所说的任何内容相匹配，而不是使用声学和语言模型。是否可以使用 pocketsphinx 来实现这个流程？如果不是，有人可以为我指出这样一个解决方案的正确方向吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:51:48.740

> 是否可以使用pocketsphinx 来实现这样的语音识别。

pocketsphinx API 中没有这样的功能

您可以做的是先使用 sphinxbase 提取 MFC 系数，例如参见 sphinx_fe 源。

然后你可以应用DTW算法来比较记录。DTW 的实现非常简单，只需要 50 行代码：

[http://en.wikipedia.org/wiki/Dynamic_time_warping](http://en.wikipedia.org/wiki/Dynamic_time_warping)

很少有库也实现了 DTW，您可以在维基百科页面上找到链接。

很高兴看到一个演示 DTW 实现的 pocketsphinx 补丁。

# javascript - 无法理解 JavaScript 函数返回

> ID：13699497
> 
> 赞同：2
> 
> 时间：2012-12-04T09:18:12.820
> 
> 标签：javascript, function, return

我是 JS 新手，遇到了几个新问题。例如我看到了这段代码：

```
function baz() {
    var x = 1;
    return {
        foo: function foo() {return ++x},
        bar: function foo() {return --x},
    };
}

var closures = baz();
alert(closures.foo(),closures.bar()); 
```

它应该显示一个共享变量。我的问题是 - 什么被退回？

它只是一个具有两个函数 foo() 和 bar() 的对象吗？谢谢

尤塔姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T09:20:27.127

是的，它“只是一个具有两个函数 foo() 和 bar() 的对象”。

但是这个函数也是在[闭包](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures)中声明的，这意味着它可以拥有这个私有`x`属性

*   两个函数都可见和可修改
*   不能以其他方式读取或修改

与的主要区别

```
var x = 1;
var closures = {
    foo: function() {return ++x},
    bar: function() {return --x},
}; 
```

就是它

*   x 受创建对象的闭包保护
*   关于 x 不能有名称冲突，并且全局命名空间不会杂乱无章

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T09:19:35.070

该函数`baz`返回一个具有两个属性 (`foo`和`bar`) 的对象。这两个属性的值是函数（它们都修改并返回相同`x`变量的值）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T09:23:41.793

Yo 甚至可以省略`foo()`after 函数，因为这些属性将如您所见命名，并且这些函数也可以是匿名的，因此： `return { var foo: function() {return ++x}, var bar: function() {return --x}, };`

所以你有对象的属性是函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T09:30:00.570

该函数`baz`将变量`x`设置为 1，然后创建返回一个对象。这个对象有两个字段，一个是being `foo`，另一个是being `bar`。关于对象的一件小事是，如果你想访问一个字段，你只需要调用`object.fieldname`. 我们稍后会详细介绍。

功能`foo`和`bar`非常简单。如果您不确定 ++x 和 --x 在这里做什么，这是一个很好的 Stackoverflow 问题：

[C++ 中的递增 - 何时使用 x++ 或 ++x？](https://stackoverflow.com/questions/1812990/incrementing-in-c-when-to-use-x-or-x)

基本上它是说它将执行该语句，然后递增或递减 x。因为它返回 x 我相信它会返回 1，然后递增或递减 x。

在函数的末尾`closures`定义了一个被调用的变量，这是从函数返回的对象。就像我之前说的，为了访问这些字段，你需要做的就是做`object.fieldname`在这种情况下是`closures.foo()`or `closures.bar()`（括号是运行函数所必需的）。

我刚刚对其进行了测试，您的警报显示为 2。我相信原因是它不理解的语法，`alert(int,int)`所以它只显示第一个警报。

# c# - 浏览图像时，App.config 中的连接字符串会发生变化

> ID：13699507
> 
> 赞同：2
> 
> 时间：2012-12-04T09:18:29.233
> 
> 标签：c#, connection-string, datasource

下面是 app.config 文件中的连接字符串。注意数据源中的指定路径。

```
<?xml version="1.0"?>
<configuration>
  <connectionStrings>
  <add name="ConnString" connectionString="Provider=Microsoft.ACE.OLEDB.12.0;Data  Source=..\..\Database\ProductsDatabase.accdb;Persist Security Info=False;" providerName="System.Data.SqlClient"/>
    </connectionStrings>
</configuration> 
```

该应用程序在带有 MouseDoubleclick 事件的按钮控件内有一个图像控件。

```
 <Button Name="m_oBtnProductImage" Grid.Column="0"  Height="60" Width="60" Background="LightGray" Style="{x:Null}" MouseDoubleClick="m_oBtnProductImage_MouseDoubleClick">
                                <Image Tag="Image" Name="m_oImage" Stretch="Fill" Source="{Binding SelectedProductEn.ProductImage}"></Image>
                        </Button> 
```

MouseDoubleclick 事件处理程序具有浏览和上传新图像以及在数据库中更新相同图像的功能。

```
private void m_oBtnProductImage_MouseDoubleClick(object sender, RoutedEventArgs e)
    {
        Bitmap oBitmapImage = null;
        OpenFileDialog oBrowseImageFile = new OpenFileDialog();
        oBrowseImageFile.Filter = "Image Files(*.jpg; *.jpeg; *.gif; *.bmp)|*.jpg; *.jpeg; *.gif; *.bmp";
        if (oBrowseImageFile.ShowDialog() == true)
        {
            System.Windows.Controls.Image oPictureBox = ((Button)sender).FindName("m_oImage") as System.Windows.Controls.Image;
            string sImagePath = oBrowseImageFile.FileName;
            oBitmapImage = new Bitmap(sImagePath);
            ((CMainUIViewModel)this.DataContext).SelectedProductEn.ProductImage = (byte[])TypeDescriptor.GetConverter(oBitmapImage).ConvertTo(oBitmapImage, typeof(byte[]));
            ((CMainUIViewModel)this.DataContext).UpdateModifiedProduct(((CMainUIViewModel)this.DataContext).SelectedProductEn);
        }
    } 
```

**当从应用程序的 UI 浏览图像时，数据源中指定的路径会更改为浏览的图像文件的路径，从而引发找不到数据库的异常。**

需要进行适当更改的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:08:30.670

一个快速而肮脏的解决方案是将[RestoreDirectory](http://msdn.microsoft.com/en-us/library/system.windows.forms.filedialog.restoredirectory.aspx)设置为 true：

```
oBrowseImageFile.RestoreDirectory = true;
if (oBrowseImageFile.ShowDialog())
{
    ...
} 
```

更好的解决方案是避免在连接字符串中使用相对路径，例如

*   使用 |数据目录| 在您的连接字符串中

*   `AppDomain.CurrentDomain.SetData("DataDirectory", somepath)`在应用程序启动时调用以设置 |DataDirectory| 引用的位置。例如，您可以将其设置为包含可执行文件的目录，如下所示：

    ```
    AppDomain.CurrentDomain.SetData("DataDirectory", 
        AppDomain.CurrentDomain.BaseDirectory); 
    ```

顺便说一句，`OpenFileDialog`implements `IDisposable`，所以你真的应该调用`IDisposable.Dispose`，可能有一个`using`声明：

```
using (OpenFileDialog oBrowseImageFile = new OpenFileDialog())
{
    oBrowseImageFile.Filter = ...
    ... etc ...
} 
```

# google-maps - 如何在 Google Maps API 中突出显示 Google Places 项目

> ID：13699514
> 
> 赞同：2
> 
> 时间：2012-12-04T09:18:43.623
> 
> 标签：google-maps, google-maps-api-3, google-places-api

我注意到渲染的地图已经被虔诚地绘制的地方标记了，我假设它是人们通过常规的 Google Places 商业列表网站绘制的，但是这些地方被模糊地标记为没有任何突出标记的小标签。

有没有办法读取这些数据并用我自己的标记重新标记这些地方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T17:30:27.257

借助[Google Maps API](https://developers.google.com/maps/documentation/javascript?hl=fr-FR)，您可以使用[PlacesService](https://developers.google.com/maps/documentation/javascript/reference?hl=fr-FR#PlacesService)获取搜索结果。对于每个[Place Result](https://developers.google.com/maps/documentation/javascript/reference?hl=fr-FR#PlaceResult)，您可以使用相关的位置创建一个自定义标记（带有您自己的图标）（请参阅`placeResult.geometry.location`）。

# c++ - 在 lambda 闭包中复制的 const 对象不可变

> ID：13699515
> 
> 赞同：11
> 
> 时间：2012-12-04T09:18:46.910
> 
> 标签：c++, c++11, lambda

我正在尝试通过（可变）lambda 中的副本来捕获 const 对象。然而，我的编译器抱怨说，捕获的对象是 const。

不能将对象复制为非常量吗？

```
struct Foo
{
    Foo(){}
    void Func(){}
};

int main()
{
    const Foo foo;
    [foo]() mutable { foo.Func(); };
} 
```

使用 g++ 4.7.2 编译：

```
testcase.cpp: In lambda function:
testcase.cpp:10:29: error: no matching function for call to ‘Foo::Func() const’
testcase.cpp:10:29: note: candidate is:
testcase.cpp:4:7: note: void Foo::Func() <near match>
testcase.cpp:4:7: note:   no known conversion for implicit ‘this’ parameter from ‘const Foo*’ to ‘Foo*’ 
```

使用 clang++ 3.1 编译：

```
testcase.cpp:10:20: error: member function 'Func' not viable: 'this' argument has type 'const Foo', but function is not marked const
    std::async([foo]() mutable { foo.Func(); }); 
```

标准文档（或者更确切地说是草案...）在 5.1.2.14 中定义“类型 [...] 是相应捕获实体的类型”，所以我想这将包括 cv 说明符。
但它似乎并不直观。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T10:32:28.550

首先，具有捕获的 lambda 表达式的类型是类类型（5.1.2 Lambda 表达式 [expr.prim.lambda] #3）

`operator()`默认情况下，该类型有一个which `const`，除非`mutable`在 lambda 表达式中使用 ([expr.prim.lambda] #5)

接下来，对于作为副本捕获的每个实体，在闭包类型中声明一个未命名的成员。[expr.prim.lambda] #14]

如果您显式构建（大部分）等效的捕获类型，那么一切自然会遵循类、const 限定类型和 const 限定成员函数的通常语义。

例子：

```
struct S
{
  void f();
  void fc() const;
};

void g()
{
  S s0;

  // [s0] ()  { s0.f(); }; // error, operator() is const
  [s0] () { s0.fc(); };    // OK, operator() is const, S::fc is const

  [s0] () mutable { s0.f(); };
  [s0] () mutable { s0.fc(); };

  const S s1;

  // [s1] ()  { s1.f(); }; // error, s1 is const, no matter if operator() is const
  [s1] ()  { s1.fc(); };

  // [s1] () mutable { s1.f(); }; // error, s1 is const, no matter if operator() is const
  [s1] () mutable { s1.fc(); };
} 
```

我想这种混淆源于这样一个事实，即`mutable`在 lambda 声明器中，关注的`const`是的 -ness `operator()`，而不是`mutable`闭包类型的数据成员的 -ility。`const`使用成员函数会更自然，但我猜标准委员会希望`const`成为默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-22T09:08:33.157

这将在 C++14 下工作，而不是 C++11 的解决方案。

```
struct Foo
{
    Foo(){}
    void Func(){}
};

int main()
{
    const Foo foo;
    [foo = foo]() mutable { foo.Func(); };
} 
```

但我真的不明白为什么`[foo]`保留 const 而`[foo = foo]`不是。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T13:00:19.930

另一种可能的解决方法：

```
 struct Foo
  {
      Foo(){}
      void Func(){}
  };

  int main()
  {
      const Foo foo;
      {
          Foo& fooo= const_cast<Foo&>(foo);
          [fooo]() mutable { fooo.Func(); };
      }
  } 
```

此方案存在安全问题（可能通过非 const 引用意外修改 const 对象），但避免了额外的复制。

# multithreading - 主线程执行完成后弹簧批处理线程不返回

> ID：13699516
> 
> 赞同：2
> 
> 时间：2012-12-04T09:18:56.527
> 
> 标签：multithreading, spring, spring-batch

我是春季批次的新手。我已经使用多个线程从 spring 创建并成功执行了作业，它工作得非常好，除了当程序执行完成时，程序流不会结束/停止。即，即使 main 方法的最后一条语句被执行，程序也不会退出。我不确定它是否继续等待线程完成或什么。有人可以请教这个吗？“下面是我的工作配置文件

```
<bean id="taskExecutor" class="org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor">
            <property name="corePoolSize" value="5" />
            <property name="maxPoolSize" value="5" />
</bean>

<batch:job id="helloWorldJob" job-repository="jobRepository">
       <batch:step id="step0" next="step1">
                <batch:tasklet ref="hello" transaction-manager="transactionManager" task-executor="taskExecutor" />
       </batch:step>        
       <batch:step id="step1">
                <batch:tasklet ref="world" transaction-manager="transactionManager" />
       </batch:step>
</batch:job> 
```

下面是启动器代码

```
public static void main(String args[]) {
        try {
            new ClassPathXmlApplicationContext("simpleJob.xml");

            JobParametersBuilder builder = new JobParametersBuilder();
            builder.addString("Date", "12/02/2011");
            jobLauncher.run(job, builder.toJobParameters());

            JobExecution jobExecution = jobRepository.getLastJobExecution(job.getName(), builder.toJobParameters());

            System.out.println("\n\n"+jobExecution.toString());
            Thread.sleep(5000);
            System.out.println("End of execution ");
        } catch(Exception e) {
            e.printStackTrace();
        }
    } 
```

如上所述，代码在任务“hello”和任务“world”的 5 个不同线程中运行，尽管即使在 main 方法的最后一行“执行结束”之后，它也不会导致主程序的执行停止执行。任何链接白皮书都将非常受欢迎。在此先感谢萨米尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:50:06.433

您的线程池没有被关闭。可能最好的方法是在应用程序上下文中调用 close() （在 finally 块中以确保安全）。

# mysql - 每天计算会员收入

> ID：13699518
> 
> 赞同：1
> 
> 时间：2012-12-04T09:19:03.140
> 
> 标签：mysql

我有一个列 ID、Start_date、End_date、Duration、Value 的成员资格表

```
ID | Start_date | End_date | Duration | Value |
1  | 2012-08-12 |2012-09-12|    30    |   10  |
2  | 2011-05-22 |2013-05-22|   720    |  2000 | 
```

等等

我想把它变成两列，一个有日期，一年中的每一天，另一个有当天所有会员价值/持续时间的总和。

我最终需要将其转换为每月价值，让我清楚地了解未来的收入预期，这要归功于运行会员资格。

现在我做了类似的事情

```
select 
sum(if("2012-01-01" between start_date and end_date, total_value/duration, null)) as "2012-01-01",
sum(if("2012-01-02" between start_date and end_date, total_value/duration, null)) as "2012-01-02",
[...]
sum(if("2013-12-31" between start_date and end_date, total_value/duration, null)) as "2013-12-31"

from MembershipsTable 
```

/* 0 行受影响，1 行找到。1 个查询的持续时间：3,666 秒。*/

但我不明白如何轻松地将它们总结为每月的价值。我可以再次创建列的总和，但宁愿不必输入文字小说

运行时间不是当前格式的问题

我需要形状的输出

```
Month    | Sum    |
Jan 2012 |4500    |
Feb 2012 |4215,91 | 
```

其中，总和是与该期间相交的所有会员的总和，按每天的价格 * 会员在该月拥有的天数计算。

因此，如果会员资格于 11 月 12 日开始，12 月 11 日结束，持续时间为 30，价值为 300，我想将 300/30*daysInNov 添加到 11 月，同样适用于 12 月，给我 +190 的 11 月，+110 的十二月我需要以这种方式计算所有成员的总和。

有人有什么主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T16:53:51.807

这有点丑陋，但如果我正确理解您的需求，我相信类似下面的内容会起作用。

首先，创建一个名为 month_days 的表格，其中包含所有月份及其开始和结束日期。您可以将其用作实用程序表来加入和计算每月总计。

```
month_days
start_date | last_date 
2012-01-01 | 2012-01-31
2012-02-01 | 2012-02-29 
```

然后，执行如下连接和计算：

```
select format(month_days.start_date, 'MMM yyyy') AS [Month],
       sum(case when (memberships.start_date > month_days.start_date AND memberships.end_date < month_days.end_date)
              then datediff(day, memberships.end_date, memberships.start_date) * (value/duration)
            when (memberships.start_date between month_days.start_date and month_days.end_date)
              then (datediff(day, month_days.end_date, memberships.start_date) + 1) * (value/duration)
            when (memberships.end_date between month_days.start_date and month_days.end_date)
              then datediff(day, memberships.end_date, month_days.start_date) * (value/duration)
            else (datediff(day, month_days.end_date, month_days.start_date) + 1) * (value/duration)
        end) total_value
from memberships
inner join month_days
on memberships.start_date < month_days.end_date
and memberships.end_date > month_days.start_date
group by month_days.start_date
order by month_days.start_date 
```

有许多方法可以创建可以达到类似效果的 month_days 表。

您可能还可以编写一个存储过程来遍历每条记录的月份，用每月总和填充临时表（或表变量），然后返回临时表的内容。

# java - grails 中的 ehcache 会话

> ID：13699520
> 
> 赞同：1
> 
> 时间：2012-12-04T09:19:07.830
> 
> 标签：java, grails, groovy, ehcache

我想在 grails 服务中使用一个 ehcache 会话范围。

我设法在 config/resources.groovy 中有一个来自这个定义的缓存 bean

```
myCache(org.springframework.cache.ehcache.EhCacheFactoryBean) {
      timeToIdle = 5000 // life span in seconds
      timeToLive = 5000 // life span in seconds
      } 
```

但是从工厂获得的对象是单例范围的。

在会话范围的服务中拥有会话范围的 ehcache 的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T16:03:53.583

您不能使用 Ehcache 来执行此操作，因为缓存管理器按名称维护缓存，并且每个名称只能有一个缓存。您将需要使用另一个不强制使用唯一名称或不使用名称作为缓存管理器中的“键”的缓存实现。

编辑：这种方法有效，但不使用工厂 bean：

```
import java.util.concurrent.atomic.AtomicInteger

import net.sf.ehcache.Cache
import net.sf.ehcache.CacheManager
import net.sf.ehcache.store.MemoryStoreEvictionPolicy

import org.springframework.beans.factory.DisposableBean
import org.springframework.beans.factory.InitializingBean

class MyService implements InitializingBean, DisposableBean {

   private static AtomicInteger counter = new AtomicInteger()

   private Cache cache
   private String cacheName

   static scope = 'session'

   void afterPropertiesSet() {

      int maxElementsInMemory = 10000
      int maxElementsOnDisk = 10000000
      MemoryStoreEvictionPolicy memoryStoreEvictionPolicy = MemoryStoreEvictionPolicy.LRU
      boolean overflowToDisk = true
      boolean eternal = false
      int timeToLive = 5000 // 120
      int timeToIdle = 5000 // 120
      boolean diskPersistent = false
      int diskExpiryThreadIntervalSeconds = 120
      int diskSpoolBufferSize = 0

      cacheName = 'myservice-cache-' + counter.incrementAndGet()

      cache = new Cache(cacheName, maxElementsInMemory, memoryStoreEvictionPolicy,
                  overflowToDisk, null, eternal, timeToLive, timeToIdle,
                  diskPersistent, diskExpiryThreadIntervalSeconds, null,
                  null, maxElementsOnDisk, diskSpoolBufferSize)

      CacheManager.getInstance().addCache cache
   }

   void destroy() {
      cache.removeAll()
      CacheManager.getInstance().removeCache(cacheName)
   }
} 
```

由于服务是会话范围的，因此缓存不必是会话范围的，因为它完全由服务控制。通过实现`InitializingBean`，您可以在会话开始时创建缓存，并在会话结束时通过实现将其删除`DisposableBean`。随意使用不同的缓存名称方法；这只是保证它们是独一无二的。此外，我还根据默认值枚举了缓存构造函数值，`EhCacheFactoryBean`但可以内联。

# grails - 为什么 GORM 使用 methodMissing

> ID：13699525
> 
> 赞同：2
> 
> 时间：2012-12-04T09:19:26.620
> 
> 标签：grails, groovy, metaprogramming, grails-orm, abstract-syntax-tree

正如我[在这里](http://groovy.codehaus.org/Using+methodMissing+and+propertyMissing)所读到的，grails 正在使用 methodMissing 将 GORM 方法注入到域类中，但是已经说过 methodMissing 执行起来很昂贵，因为仅在调度失败的情况下才会发生，为什么这些方法不通过 metaClass 或 AST 转换注入？有什么线索吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T09:59:30.423

使用 methodMissing 并不昂贵，因为 Grails 仅在第一次执行未找到的方法时才在 MOP 中创建新方法。后续执行发生在新创建的方法上。

考虑一个具有许多属性的域类。如果所有 findBy*、findAlLBy*、countBy* 等排列都应该在编译时创建，那么类很容易变得非常大。通过使用methodeMissing，只会创建在运行时实际使用的方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-04T10:16:37.613

据我了解代码，此信息已过时。这些方法被注入到元类中。查看 grails-hiberante 插件的代码。

`HibernateGrailsPlugin.groovy`( [github](https://github.com/grails-plugins/grails-hibernate-plugin/blob/master/HibernateGrailsPlugin.groovy) ) 每次上下文开始时执行第 49 行：

```
def doWithDynamicMethods = HibernatePluginSupport.doWithDynamicMethods 
```

然后，打开一个`HibernatePluginSupport`（[github](https://github.com/grails/grails-core/blob/master/grails-hibernate/src/main/groovy/org/codehaus/groovy/grails/plugins/orm/hibernate/HibernatePluginSupport.groovy)）并按照流程进行操作：

```
/*451*/ static final doWithDynamicMethods = { ApplicationContext ctx ->
    def grailsApplication = application
    enhanceSessionFactories(ctx, grailsApplication)
}

/*456*/ static void enhanceSessionFactories(ApplicationContext ctx, grailsApplication, source = null)
// calls in line 464:
/*464* enhanceSessionFactory sessionFactory, grailsApplication, ctx, suffix, datastores, source 
```

这个闭包在方法内部是至关重要的`enhanceSessionFactory`：

```
/*548*/ def enhanceEntity = ... 
```

并且为第 581-583 行中的每个实体调用它。方法是从 method 中的第 587 行生成的`registerNamespaceMethods`。正如我正确理解的那样，这些方法从第 597 行直接注入到 metaClass：

```
 def classLoader = application.classLoader

    def finders = HibernateGormEnhancer.createPersistentMethods(application, classLoader, datastore)
    def staticApi = new HibernateGormStaticApi(dc.clazz, datastore, finders, classLoader, transactionManager)
    dc.metaClass.static."$getter" = { -> staticApi }

    def validateApi = new HibernateGormValidationApi(dc.clazz, datastore, classLoader)
    def instanceApi = new HibernateGormInstanceApi(dc.clazz, datastore, classLoader)
    dc.metaClass."$getter" = { -> new InstanceProxy(delegate, instanceApi, validateApi) } 
```

如果我错了，请修改并纠正我。我不太相信这一切都是正确的。这些只是我在阅读 Grails 源代码时的发现。

# php - 如何禁用单击覆盖以关闭 Colorbox？

> ID：13699527
> 
> 赞同：1
> 
> 时间：2012-12-04T09:19:33.030
> 
> 标签：php, javascript, jquery, cakephp-2.0, colorbox

我想防止在 cboxOverlay 点击时关闭颜色框

我正在使用这段代码：

```
$.fn.colorbox({ overlayClose: false }); 
```

但它不起作用。

我也禁用了`Esc`关闭

```
$(document).bind("keydown.cbox_close", function (e) {

        if (e.keyCode === 27) {
               e.preventDefault();
               cboxPublic.close();
            }}); 
```

Esc 代码正常工作。

但是如何防止colorbox关闭覆盖？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T09:30:54.193

不应该是：

```
$.colorbox({ overlayClose: false }); 
```

在此处查看工作演示：**[小提琴](http://jsfiddle.net/aanred/DSXHt/)**

# jquery - 如何在 jquery 的整个类中更改单个 id 的值？

> ID：13699531
> 
> 赞同：0
> 
> 时间：2012-12-04T09:19:38.173
> 
> 标签：jquery, jquery-plugins

我有这样的jquery：

```
$('.x').hover({
    hover_width: 300,
    hover_height: 400,
}); 
```

html代码如下：

```
<div class='x' id='a'></div>
<div class='x'></div>
<div class='x'></div> 
```

实际输入的代码很长，很抱歉缩短了它。我想更改 id 'a' 的值并仍然持有该类，因为它使用了一些 css。如何在 jquery 中获取 'hover' 中的 id 并仅为该 id 更改 'hover_width = 200' 而不是其他人。

我正在寻找类似“悬停”中的 if 条件，它获取 id 名称并给出值“200”，否则它只是说“300”。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T09:22:16.940

只需使用 ID 选择器：

```
$('#a').hover(...); 
```

有关 jQuery 支持的所有选择器的列表，请参阅[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)。由于这是 CSS 选择器的超集，因此[阅读它们](https://developer.mozilla.org/en-US/docs/CSS/Getting_Started/Selectors)也是一个好主意。

# opencv - 如何使用 lucas kenade 光流检测方向

> ID：13699532
> 
> 赞同：2
> 
> 时间：2012-12-04T09:19:40.627
> 
> 标签：opencv, tracking, feature-detection

我正在使用 OpenCV`goodFeaturesToTrack`来检测特征并`calcOpticalFlowPyrLK`跟踪它们，但是 calcOpticalFlowPyrLK 没有给我对象的方向。

是否有任何其他工具可以在 OpenCV 中获取对象的方向。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-04T09:54:03.200

对象的“方向”到底是什么意思？问题不是很清楚。LK 算法将为您提供指向对象运动方向的向量，您可以从中得出方向。

您面临的确切问题是什么？您无法从 calcOpticalFlowPyrLK 函数获得输出吗？

# android - Campaigns 如何在 android 的 chartboost 中运行？

> ID：13699534
> 
> 赞同：2
> 
> 时间：2012-12-04T09:19:42.093
> 
> 标签：android

帮助我在 Chart-Boost 中的活动和更多应用程序设置以及如何在 android 中实现它。我正在尝试实现它，但它给出了以下异常。

```
Chartboost:  Exception on http request: Request aborted 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T18:37:24.613

绝对建议查看示例项目，它真的很有帮助，位于[https://github.com/ChartBoost/client-examples](https://github.com/ChartBoost/client-examples)

此外，您要确保设置了广告系列（广告系列 -> 添加广告系列 -> 在网络中发布）。我还会让您的设备成为测试设备，以便它可以看到所有可能的广告（查看[http://help.chartboost.com/faq/general#test](http://help.chartboost.com/faq/general#test)）

另外，请发送电子邮件至 support@chartboost.com，他们非常酷，并尽力提供帮助

# c++ - 无法编译 Hello Web 服务客户端

> ID：13699535
> 
> 赞同：3
> 
> 时间：2012-12-04T09:19:44.453
> 
> 标签：c++, linux, wso2

为了熟悉使用 WSF/C++ 框架的 RESTful Web 服务定义（服务器和客户端），我决定遵循快速入门指南（参见[http://wso2.org/project/wsf/cpp/2.0。 0/docs/](http://wso2.org/project/wsf/cpp/2.0.0/docs/) )。我已经成功地从源代码和 hello 服务器编译并安装了框架。问题是当我尝试编译 hello 客户端时。

请在下面找到 c++ 代码 (hello_cli.cpp) 和编译输出。

```
#include <stdio.h>
#include <ServiceClient.h>
#include <OMElement.h>
#include <iostream>
#include <WSFault.h> /*I have replaced AxisFault.h by this file since the AxisFault does not exist anymore*/
#include <Environment.h>

using namespace std;
using namespace wso2wsf;

int main(int argc, char *argv[])
{
    Environment::initialize("hello.log", AXIS2_LOG_LEVEL_TRACE);

    string end_point = "http://localhost:9090/axis2/services/hello";

    ServiceClient sc(end_point);

    OMElement * payload = new OMElement("greet"); 
    payload->setText("Test service!");
    try
    {
           OMElement* response = sc.request(payload, "");
            if (response)
            {
                cout << endl << "Response: " << response << endl;
            }
        }
        catch (AxisFault & e)
        {
            if (sc.getLastSOAPFault())
            {
                cout << endl << "Fault: " << sc.getLastSOAPFault() << endl;
            }
            else
            {
                cout << endl << "Error: " << e << endl;
            }
        }
        delete payload;
    } 
```

使用给定的编译命令行：

```
gcc -o hello_cli -I$WSFCPP_HOME/include/axis2-1.6.0/ -L$WSFCPP_HOME/lib -laxutil -laxis2_axiom -laxis2_parser -laxis2_engine -lpthread -laxis2_http_sender -laxis2_http_receiver -lwso2_wsf hello_cli.cpp -ldl -Wl,--rpath -Wl,$WSFCPP_HOME/lib 
```

我收到了这个错误：

```
hello_cli.cpp:19:27: fatal error: ServiceClient.h : No such file or directory 
```

为了解决这个问题，我还包含了 ServiceClient 所在的目录：

```
gcc -o hello_cli -I$WSFCPP_HOME/include/ -I$WSFCPP_HOME/include/axis2-1.6.0/ -L$WSFCPP_HOME/lib -laxutil -laxis2_axiom -laxis2_parser -laxis2_engine -lpthread -laxis2_http_sender -laxis2_http_receiver -lwso2_wsf --verbose hello_cli.cpp -ldl -Wl,--rpath -Wl,$WSFCPP_HOME/lib 
```

这会导致以下错误（我只是提供一个示例）：

```
 hello_cli.cpp:(.text+0x23): undefined reference to `std::allocator<char>::allocator()'
hello_cli.cpp:(.text+0x3b): undefined reference to `std::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string(char const*, std::allocator<char> const&)'
hello_cli.cpp:(.text+0x4f): undefined reference to `wso2wsf::Environment::initialize(std::basic_string<char, std::char_traits<char>, std::allocator<char> >, axutil_log_levels)'
hello_cli.cpp:(.text+0x5e): undefined reference to `std::basic_string<char, std::char_traits<char>, std::allocator<char> >::~basic_string()'
hello_cli.cpp:(.text+0x6a): undefined reference to `std::allocator<char>::~allocator()'
hello_cli.cpp:(.text+0x76): undefined reference to `std::allocator<char>::allocator()' 
```

通过使用 g++ 而不是 gcc（这似乎很自然，因为我正在操作 C++ 对象）我得到了以下信息。

命令行：

```
g++ -o hello_cli -I$WSFCPP_HOME/include/ -I$WSFCPP_HOME/include/axis2-1.6.0/ -L$WSFCPP_HOME/lib -laxutil -laxis2_axiom -laxis2_parser -laxis2_engine -lpthread -laxis2_http_sender -laxis2_http_receiver -lwso2_wsf --verbose hello_cli.cpp -ldl -Wl,--rpath -Wl,$WSFCPP_HOME/lib 
```

输出：

```
/tmp/cccyHkNn.o: In function `main': 
```

hello_cli.cpp:(.text+0x4f): 未定义对`wso2wsf::Environment::initialize(std::basic_string<char, std::char_traits<char>, std::allocator<char> >, axutil_log_levels)' hello_cli.cpp:(.text+0xc0): undefined reference to`wso2wsf::ServiceClient::ServiceClient(std::basic_string, std::allocator >)' hello_cli.cpp:(.text+0x109) 的引用：未定义对`wso2wsf::OMElement::OMElement(std::basic_string<char, std::char_traits<char>, std::allocator<char> >)' hello_cli.cpp:(.text+0x159): undefined reference to`wso2wsf 的引用： :OMElement::setText(std::basic_string, std::allocator >)' hello_cli.cpp:(.text+0x1ac): 未定义对`wso2wsf::ServiceClient::request(wso2wsf::OMElement*, std::basic_string<char, std::char_traits<char>, std::allocator<char> >)' hello_cli.cpp:(.text+0x234): undefined reference to`wso2wsf::ServiceClient::~ServiceClient()' hello_cli.cpp:(.text 的引用+0x36b): 未定义对`wso2wsf::ServiceClient::getLastSOAPFault()' hello_cli.cpp:(.text+0x384): undefined reference to`wso2wsf::ServiceClient::getLastSOAPFault()' 的引用 hello_cli.cpp:(.text+0x411): 未定义对`wso2wsf::ServiceClient::~ServiceClient()' /tmp/cccyHkNn.o:(.gcc_except_table+0xc4): undefined reference to`wso2wsf::WSFault 的 typeinfo 的引用'

我的操作系统是 Ubuntu 12.04.1 LTS（64 位），g++ 版本是 4.6.3（Ubuntu/Linaro 4.6.3-1ubuntu5）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T15:45:33.853

由于 Mat 的评论，这个问题得到了解决

> 仅使用 g++ 编译和链接 C++，并将库 (-lfoo) 放在源文件和目标文件之后

# jquery - MVC 3 将模型从视图传递到控制器，而不使用 Html 表单（提交）或 JSON

> ID：13699540
> 
> 赞同：1
> 
> 时间：2012-12-04T09:19:57.740
> 
> 标签：jquery, asp.net-mvc-3, session, razor, view

对于 Web 应用程序，我有以下场景：

用户注册了一家公司，为此我加载了一个公司创建视图。

在创建页面中，我有一个公司联系人的下拉列表。最初这个列表是空的，用户可以点击一个创建按钮来创建一个新地址。

这会加载联系人的部分视图（作为 JQuery 弹出窗口）。用户创建新的联系人后，视图返回到公司注册视图。公司注册视图必须刷新下拉框中新添加的联系人。它还必须保留已输入的任何数据。

以下与我的情况相同，但由于设计限制，我无法使用 JSON。[如何在MVC c#应用程序中通过jquery将完整的模型从视图传递到控制器](https://stackoverflow.com/questions/11588426/how-to-pass-the-full-model-from-view-to-controller-via-jquery-in-a-mvc-c-sharp-a)

我的问题：有什么方法可以将视图中的整个模型存储到 Session 中，以便在我的控制器中使用？

我尝试了以下方法：

```
 <div class="editor-label">
            @Html.LabelFor(model => model.CompanyName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.CompanyName)
            @Html.ValidationMessageFor(model => model.CompanyName)

            @Session.Add("CompanyName",Model.CompanyName)
        </div> 
```

由于这是无效的，因此它不会返回值，也无法渲染。

所以我尝试将模型作为参数传递给控制器​​，但它一直为空：

```
public ActionResult CreateContactPerson(ManagementAgencyViewModel viewModel)
    {

        if(HttpContext.Session != null)
            HttpContext.Session.Add("MaObject",viewModel);

        return RedirectToAction("Create", "ContactPersons");
    } 
```

使用 actionLink 调用名为“ManagementAgencies”的公司控制器：

```
 @Html.ActionLink(@ViewResources.Link_New_ContactPerson, "CreateContactPerson",           "ManagementAgencies", null, new { @class = "openDialog  ui-button ui-state-default ui-corner-all", data_dialog_id = "createDialog", data_dialog_title = @ViewResources.DialogTitle_CreateNew }) 
```

在不使用隐藏字段或 JSON 的情况下，是否有任何替代方法可以存储在 Session 中？如果是这样，从视图中将模型值存储到会话中的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:16:29.083

请记住，服务器标签在视图呈现时执行。当代码：

```
@Session.Add("CompanyName",Model.CompanyName) 
```

执行时，Model.CompanyName 没有值，因为呈现的视图正在发送到用户的 Web 浏览器。将代码放在该位置实际上会将其设置为 CompanyName 的默认值（此时可能为 null）。

稍后，用户将表单提交给您的操作，您在 CreateContactPerson 中定义的 viewModel 变量将填充用户的值。此时，您可以将值保存到会话中。只需将会话保存代码模式化到您的操作中，您应该会很好。

# java - 在 Java 中写入/保存文件的问题

> ID：13699542
> 
> 赞同：1
> 
> 时间：2012-12-04T09:20:05.723
> 
> 标签：java, encryption, rsa

我遇到了另一个 StackOverflow 用户编写的关于 RSA 加密/解密的解释，我实现了代码。到目前为止，加密没有问题。我也实现了解密，到目前为止没有收到任何错误。

但是，`OutputStream.write`解密的功能不是在目录中保存/写入假定的解密文件。它运行没有错误，但与加密不同的是，它不返回任何文件。我使用与解密相同的方法来编写加密文件，但它不返回任何文件。它也可以正常运行。

下面是我的解密代码。请注意，我使用不同的类进行加密/解密。同样与示例不同的是，我`loadkey`在两个类中都使用了该函数。

链接到我用作参考的答案：[Java 类中的 RSA 加密问题](https://stackoverflow.com/questions/9094323/issues-in-rsa-encryption-in-java-class/13699341#13699341)

我的解密类：

```
private void jButton3ActionPerformed(java.awt.event.ActionEvent evt) {                                         
  try {
    String key=jTextField2.getText();
    String cleartextFile = "C:\\keys\\naan.docx";
    String ciphertextFile =  jTextField1.getText();
    loadKey(new File(key), "C:\\keys\\private.key");
    decrypt(new File(ciphertextFile), new File("cleartextFile"));

  } catch (GeneralSecurityException ex) {
    Logger.getLogger(OpenFileDec.class.getName()).log(Level.SEVERE, null, ex);
  } catch (IOException ex) {
    Logger.getLogger(OpenFileDec.class.getName()).log(Level.SEVERE, null, ex);
  }

} 
private PrivateKey readPrivateKeyFromFile(String keyFileName) throws Exception {
  InputStream in = new FileInputStream(keyFileName);
  ObjectInputStream oin = new ObjectInputStream(new BufferedInputStream(in));
  try {
    BigInteger m = (BigInteger) oin.readObject();
    BigInteger e = (BigInteger) oin.readObject();
    RSAPrivateKeySpec keySpec = new RSAPrivateKeySpec(m, e);
    KeyFactory fact = KeyFactory.getInstance("RSA");
    PrivateKey pubKey = fact.generatePrivate(keySpec);
    return pubKey;
  } catch (Exception e) {
    throw new RuntimeException("Spurious serialisation error", e);
  } finally {
    oin.close();
  }
}

public void loadKey(File in, String privateKeyFile) throws GeneralSecurityException, IOException {
  try {
    // read private key to be used to decrypt the AES key
    byte[] encodedKey = new byte[(int)privateKeyFile.length()];
    new FileInputStream(privateKeyFile).read(encodedKey);

    // create private key
    //PKCS8EncodedKeySpec privateKeySpec = new PKCS8EncodedKeySpec(encodedKey);
    //KeyFactory kf = KeyFactory.getInstance("RSA");
    //PrivateKey pk = kf.generatePrivate(privateKeySpec);
    PrivateKey pk = this.readPrivateKeyFromFile(privateKeyFile);

    // read AES key
    pkCipher.init(Cipher.DECRYPT_MODE, pk);
    aesKey = new byte[AES_Key_Size/8];
    CipherInputStream is = new CipherInputStream(new FileInputStream(in), pkCipher);
    is.read(aesKey);
    aeskeySpec = new SecretKeySpec(aesKey, "AES");     
  } catch (Exception e) {

  }      
} 

public void decrypt(File in, File out) throws IOException, InvalidKeyException {
  aesCipher.init(Cipher.DECRYPT_MODE, aeskeySpec);

  CipherInputStream is = new CipherInputStream(new FileInputStream(in), aesCipher);
  FileOutputStream os = new FileOutputStream(out);

  copy(is, os);
  os.close();
}

private void copy(InputStream is, OutputStream os) throws IOException {
  int i;
  byte[] b = new byte[1024];
  while((i=is.read(b))!=-1) {
    os.write(b, 0, i);
    new Thread(new thread1()).start(); //Start the thread
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:41:32.327

我猜新线程的启动引发了一个异常，它被您的 loadkey() 方法捕获，但不是在将输出缩短到从未关闭的文件之前。

# c# - 在可移植类库中使用 SQLite

> ID：13699544
> 
> 赞同：15
> 
> 时间：2012-12-04T09:20:21.463
> 
> 标签：c#, sqlite, windows-8, windows-phone-8, portable-class-library

最近我们开始着手一个新项目，其中包括 Windows 8 Metro、Windows Phone 和桌面应用程序的客户端。决定使用 MVVM 模式作为主要架构，因为在项目之间共享 ViewModel 对我们来说是更容易接受的解决方案。

我们决定为此目的使用可移植类库，但问题是从 Visualstudio 2012 扩展库下载并安装 SQLite for Windows 运行时后，当我们尝试添加对适当库的引用时，我们根本看不到这些库。这让我们想到，在可移植类库项目中使用 SQLite 是不可能的。

也许你们中的一些人已经这样做了并且知道我们可以实现该功能的方式？请为我们提供开发此任务的正确方法，因为在此开发阶段使用 SQLite 和可重用代码非常重要

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-04T16:15:59.710

在 MvvmCross 中，我们通过不同的方法解决了这个问题。

我们想利用 SQLite 的本地端口，我们想使用来自[https://github.com/praeclarum/sqlite-net/的 SQLite-net ORM 包装器](https://github.com/praeclarum/sqlite-net/)

因此，我们所做的不仅仅是使用 PCL，而是：

*   构建一个包含一组跨平台 SQLite-net 接口和基类的核心 PCL [https://github.com/slodge/MvvmCross/tree/vnext/Cirrious/Plugins/Sqlite/Cirrious.MvvmCross.Plugins.Sqlite](https://github.com/slodge/MvvmCross/tree/vnext/Cirrious/Plugins/Sqlite/Cirrious.MvvmCross.Plugins.Sqlite)

*   为每个平台构建该插件 DLL 的扩展/实现

    *   例如对于 MonoDroid，我们有[https://github.com/slodge/MvvmCross/tree/vnext/Cirrious/Plugins/Sqlite/Cirrious.MvvmCross.Plugins.Sqlite.Droid](https://github.com/slodge/MvvmCross/tree/vnext/Cirrious/Plugins/Sqlite/Cirrious.MvvmCross.Plugins.Sqlite.Droid)
    *   例如对于 WinRT，我们有[https://github.com/slodge/MvvmCross/tree/vnext/Cirrious/Plugins/Sqlite/Cirrious.MvvmCross.Plugins.Sqlite.WinRT](https://github.com/slodge/MvvmCross/tree/vnext/Cirrious/Plugins/Sqlite/Cirrious.MvvmCross.Plugins.Sqlite.WinRT)

*   使用通用的 DI 模式和库，以便 PCL 和非 PCL 数据库客户端都知道如何加载和实例化这些插件。

    *   [例如，您可以在https://github.com/slodge/MvvmCross/tree/vnext/Sample%20-%20SimpleDialogBinding](https://github.com/slodge/MvvmCross/tree/vnext/Sample%20-%20SimpleDialogBinding)的 SimpleDroidSql 示例中看到其中一些

* * *

在代码级别，客户端应用程序可以使用以下插件：

在业务逻辑库（PCL 或特定平台）中，代码可以定义模型对象：

```
public class ListItem
{
    [PrimaryKey, AutoIncrement]
    public int Id { get; set; }
    public string Name { get; set; }
    public string WhenCreated { get; set; }
} 
```

在启动过程中，应用程序可以调用：

```
 Cirrious.MvvmCross.Plugins.Sqlite.PluginLoader.Instance.EnsureLoaded();
  var factory = this.GetService<ISQLiteConnectionFactory>();
  var connection = factory.Create("SimpleList");
  connection.CreateTable<ListItem>(); 
```

然后在操作期间，代码可以执行以下操作：

```
 connection.Insert(new ListItem() { Name = TextToAdd, WhenCreated = DateTime.Now.ToString("HH:mm:ss ddd MMM yyyy") }); 
```

或者

```
 public ListItem this[int index]
 {
     get { return _connection.Table<ListItem>().OrderBy(_sortOrder).Skip(index).FirstOrDefault(); }
 } 
```

而 UI 特定代码必须引用插件的特定于平台的扩展并将该平台特定的实现注入到 IoC/DI 系统中。在 Droid 上，这确实很简单（因为 MonoDroid 在运行时支持 Assembly.Load），但在其他平台上，这涉及到一些“样板”代码，例如：

```
 protected override void AddPluginsLoaders(Cirrious.MvvmCross.Platform.MvxLoaderPluginRegistry loaders)
    {
        loaders.AddConventionalPlugin<Cirrious.MvvmCross.Plugins.Sqlite.WinRT.Plugin>();
        base.AddPluginsLoaders(loaders);
    } 
```

* * *

笔记：

*   当前的 MvvmCross 存储库仅包含 WinRT 和 MonoDroid SQLite 包装器 - 但其他人（WP* 和 MonoTouch）应该很容易构建（我知道其他人已经构建了它们，但尚未将它们贡献回来）

*   当前的 MvvmCross 存储库仅包括 WinRT 的同步（非异步）接口 - 但我再次知道人们告诉我他们已经在他们的私人项目中扩展了这个。

*   我目前正在将这个插件结构拉到 MvvmCross 之外，以便可以更广泛地使用插件。希望圣诞节前能有一个公告。

*   有关 MvvmCross 插件的更多信息，请参阅[https://speakerdeck.com/cirrious/mvvmcross-going-portable](https://speakerdeck.com/cirrious/mvvmcross-going-portable)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-05T15:17:20.787

Stuart 很好地解释了如何使用 SQLite 创建 PCL，但今天我发现了这种方法，我希望它可以更好地解决任何其他问题

[用于 SQLite 的新开源可移植类库](https://blogs.msdn.microsoft.com/interoperability/2014/02/03/new-open-source-portable-class-library-for-sqlite/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-09T23:08:04.847

可能值得一提的是 AutoIncrement 和 PrimaryKey 属性来自以下命名空间

使用 Cirrious.MvvmCross.Plugins.Sqlite；

```
 public class Reference : IBusinessEntity

    {

      public string Key { get; set; }

      public string Value { get; set; }

     [PrimaryKey, AutoIncrement]

      public long Id { get; set; }

  } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-12-22T06:15:36.917

经过数周的搜寻，我终于认为您必须使用以下方式进行连接：

```
var factory = new MvxWpfSqLiteConnectionFactory(); 
```

我安装了

```
using Cirrious.MvvmCross.Community.Plugins.Sqlite;
using Cirrious.MvvmCross.Community.Plugins.Sqlite.Wpf;
using Cirrious.CrossCore; 
```

对于那里的所有 MVVMcross 天才和所有 Sqlite 天才来说，这可能是显而易见的。

没有人在任何地方提到这一点，并且 MVVMcross 的示例在实际进行连接时都不会编译或使用与 MVVM 或 PCL 不兼容的 Sqlite.NET。

哦，这适用于 Winforms、PCL 等（我什至不使用 Wpf）。

# java - 以接口为参数的函数

> ID：13699549
> 
> 赞同：0
> 
> 时间：2012-12-04T09:20:43.560
> 
> 标签：java, eclipse, openlayers, vaadin

我有一个名为 Layer 的接口：

```
public interface Layer {} 
```

和一个实现该接口的类，称为`VectorLayer`：

```
public class VectorLayer implements Layer {} 
```

我还有一个`Layer`作为参数的函数

```
public void create(Layer layer){} 
```

我想使用`create(new VectorLayer())`但 eclipse 向我抛出以下错误：

> SelectFeature 类型中的方法 create(Layer) 不适用于参数 (VectorLayer) VolexampleApplication.java /volExample/src/com/example/volexample

我认为通常它应该工作。那么这里的问题是什么？

**PS:**
`VectorLayer`和`Layer`是`SelectFeature.create()`来自 VAADIN 的 openlayers 包装器（一个库）的函数和类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T09:31:55.233

您给出的示例应该可以正常工作。

您确定`Layer`实施的`VectorLayer`方式与所要求的相同吗`SelectFeature`？您可以通过检查两个类中的导入来验证这一点（或给出完全限定的名称，即包名称）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T09:30:03.323

我会尝试帮助编译器：

```
final Layer layer = new VectorLayer();
SelectFeature.create(layer); 
```

# qt4 - QSqlTableModel/ QTableView 解析查询到xml

> ID：13699556
> 
> 赞同：1
> 
> 时间：2012-12-04T09:21:12.967
> 
> 标签：qt4, qsqltablemodel

这是我在这个论坛上的第一篇文章，我希望我要求解决的问题得到清楚的解释。我正在使用 QSqlTableModel 和 QSqlTableView 查看数据库表。缓存表模型是我一直在寻找的，这就是我选择 QSqlTableModel 的原因（还有其他模型吗？）。现在我需要将所有缓存的查询解析为 xml，一旦我执行 submitAll() - 我选择了 OnManualSubmit 作为编辑策略。我尝试编写 QSqlTableModel 的子类并重载 insertRowInTable/updateRowInTable/deleteRowFromTable，但是缓存是由指向私有类的 d 指针访问的，我找不到另一种方法来获取缓存的准备语句，然后将它们解析为 xml . 我认为这个解决方案是不可能的吗？

我期待着任何答复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:15:58.287

QSqlTableModel 继承 QSqlQueyModel，它有一个 public

```
QSqlQuery QSqlQueryModel::query () const 
```

您可以连接到 QSqlTableModel 发出的四个更改信号

```
void    beforeDelete ( int row )
void    beforeInsert ( QSqlRecord & record )
void    beforeUpdate ( int row, QSqlRecord & record )
void    primeInsert ( int row, QSqlRecord & record ) 
```

（问题：我认为 primeInsert 和 BeforeInsert 可以为同一个事件发出，不确定）

子类化并重新实现 submit() 以在调用父提交之前发出包含 QSqlQuery 的信号：

```
bool YourChildModel::submit ()
 {
    emit yourSignal(query());
    return QSqlTableModel::submit()
 } 
```

QsqlQuery有

```
QString QSqlQuery::lastQuery () const
Returns the text of the current query being used, or an empty string if there is no current query text.

QString QSqlQuery::executedQuery () const
Returns the last query that was successfully executed.
In most cases this function returns the same string as lastQuery(). If a prepared query with placeholders is executed on a DBMS that does not support it, the preparation of this query is emulated. The placeholders in the original query are replaced with their bound values to form a new query. This function returns the modified query. It is mostly useful for debugging purposes. 
```

这将用于解析为 xml。

# erlang - Erlang：如何限制分配给进程的内存

> ID：13699559
> 
> 赞同：5
> 
> 时间：2012-12-04T09:21:17.110
> 
> 标签：erlang, heap-memory, stack-memory, memory-limit

我要问的是是否可以限制分配给特定进程的内存（堆或堆栈），以便该进程不能超过它。可能类似于“process_flag（min_heap_size，MinHeapSize）”，但对于最大堆。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T14:14:32.010

您可以将某种进程跟踪 gen_server 放在一起，它会定期检查分配的进程的内存占用情况，如果超过一定数量则将其杀死。

使用`process_info(Pid, memory).`和`exit(Pid, Reason)`调用的组合，这应该是非常易于管理的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-06T13:42:14.370

你可以`spawn_opt`使用`max_heap_size`

# java - 声明没有值的常量

> ID：13699560
> 
> 赞同：2
> 
> 时间：2012-12-04T09:21:23.677
> 
> 标签：java

如果我声明一个常量，`static final double PI;`我会得到`The blank final field PI may not have been initialized`错误。为什么不能先这样声明，然后再初始化呢？

**更新**：我可能不知道初始常量值，并且必须在一些逻辑之后对其进行初始化，以便我可以为其赋值。这就是为什么我需要稍后对其进行初始化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T09:35:58.670

变量被声明为静态意味着，当类被加载到内存中时，所有的静态变量也被加载到内存中。最重要的是，该变量是最终的，这意味着它在类加载时必须是某个值。在非静态代码块中对其进行初始化意味着将其值从无（null）更改为新分配的值。

您可以通过示例看到这一点，即使您没有初始化静态最终变量，您也可以在类的静态块中进行。

```
class Demo {
       static final String msgHeader;
       /*
           Some lines of code
       */
       static { 
                msgHeader="Please Verify the Input";
       }
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T09:23:54.167

您可以稍后在代码中对其进行初始化。您只需在使用之前对其进行初始化。

它不是一次写入内存，并且在设置值之前读取不会阻塞。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T09:23:49.640

Java 必须确保 final 字段只被初始化一次并且永远不会改变。这只能在初始化期间发生。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T09:24:01.060

因为常量一旦被赋值就不能改变。:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-04T09:24:23.623

我想您必须为此初始化第一个值才能解决此问题

> 静态最终双 PI=3.14；

可以解决你的问题

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-04T09:27:29.193

由于字段 PI 被标记为“最终”，您以后无法通过为该字段分配新值来更改它。Final 还将字段 PI 标记为常量。因此，您需要在声明本身期间指定根本无法修改的值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-04T09:30:33.203

像 java 中的所有其他普通变量一样，常量变量也应该在它首先在任何方法中使用之前声明。如果您需要在没有初始化的情况下使用该变量，那么您应该将该变量声明为类变量，而不是将变量声明到方法中，这是一个常量变量，如果您将该变量声明为类变量，那么您不能修改它的值.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-04T09:23:39.703

因为它不是恒定的，因为您可以在程序的不同位置更改它的值。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-12-04T09:26:28.520

因为您试图在设置变量之前读取它。

在 JAVA 中，您可以在读取之前的任何位置进行设置。但是在您的情况下，您也将其标记为`final`and that `static`，这意味着

`final` ：您只能设置一次该值
`statis`：您已将此变量设为静态，这意味着它将为每个类创建一个。

# javascript - 如何防止 ajax 请求在 iphone 上被取消？

> ID：13699564
> 
> 赞同：1
> 
> 时间：2012-12-04T09:21:35.937
> 
> 标签：javascript, ajax, model-view-controller

我正在使用 MVC 4，在提交表单上我得到一个 pdf 文件。在这种形式中，我使用 ajax get request 从控制器获取一些数据。问题是，当我在提交表单后获得 pdf 文件时，在 iphone 上，pdf 会在同一页面上内联打开，并且在我返回程序页面后，我所有页面上的 ajax 请求都停止工作（他们在他们完成他们的请求之前都被取消了）。我一直在寻找一些解决方案，但没有任何帮助。我尝试过的解决方案是；cache: false - 在 ajax 请求中。向 url 添加一个时间参数，每次时间参数都会改变。我一直在阅读有关此问题的信息，唯一发现的是，如果 ajax 请求状态返回 0，则意味着 ajax 请求在完成之前被取消。它' s 仅在 iphone 上发生，因为它内联打开 pdf 文件，而不是像在其他所有内容上那样下载它。请帮我解决这个问题，我已经尝试了很长时间。

这是我正在使用的 ajax 代码：

```
$.ajax({
    type: 'GET',
    url: '/IncomeExpenses/UpdateInvoiceData?time=' + new Date().getTime(),
    data: str,
    cache: false,
    dataType: 'json',
    success: function (data) {
        //some code
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-10-22T04:59:55.160

制作`async: false`将有助于克服这个问题。这样，我们通过使 AJAX 请求与浏览器同步来强制浏览器等待响应。

# android - 水平滚动整个列表视图

> ID：13699566
> 
> 赞同：5
> 
> 时间：2012-12-04T09:21:53.357
> 
> 标签：android

我有一个包含 14 个字段的自定义列表视图。像这样：

字段1 字段2 字段3 字段4 字段5 字段6 字段7 字段8 字段9 字段10 字段11 字段12 字段13 字段14。现在明显的问题是，我不可能将所有字段都放在屏幕上，所以我想让整个列表视图水平滚动，所以我只能显示 5-6 个字段，当用户水平滚动时，他将能够看到他们的其余部分。我可以有一个垂直和水平滚动的列表视图吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-04T09:38:32.693

只需在水平滚动视图内创建列表视图，骨架如下

```
<HorizontalScrollView ...........>
    <LinearLayout ......>
        <LinearLayout ......>
        //List View Titles will be here
        </LinearLayout>

        <ListView ........ android:layout_weight="1" />

    </LinearLayout>
</HorizontalScrollView> 
```

在这里，如果您需要在列表视图中显示不可滚动的标题，然后如上所述将其添加到单独的布局中，并且不要忘记设置**layout_weight**属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:28:15.123

您应该有一个 Horizo​​ntalScrollView，它应该是该[链接](https://stackoverflow.com/questions/2362460/how-can-we-make-table-layout-to-scroll-both-ways-horizontally-vertically)中给出的 VerticalScrollView 的子级。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T10:13:19.123

实现水平列表视图的最简单方法。

**水平滚动.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
<HorizontalScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/scroll"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:fadeScrollbars="false"
android:background="@color/list_item_bg_color">

 </HorizontalScrollView> 
```

**水平列表.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/horizontal_outer_layout"
android:layout_width="wrap_content"
android:layout_height="match_parent"
android:layout_margin="0dp"
android:background="@drawable/rect_border_box"
android:orientation="vertical" >

    <TextView
        android:id="@+id/text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
         />
   </Linearlayout> 
```

**爪哇代码：**

```
 LinearLayout parent = (LinearLayout) getLayoutInflater().inflate(
            R.layout.observation_detail_parent_layout, null);
      Linearlayout child= null;

     //iterate views upto you adapater count.
      for(int i=0;i<14;i++){
      child = (LinearLayout) getLayoutInflater().inflate(
                    R.layout.horizontal_list, null);

        //set your views specified in horizontal_list.xml

      TextView text = (TextView) findViewById(R.id.text);
      text.setText("your text");
      parent.addView(child);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-17T19:36:07.700

列表视图已经支持垂直滚动，所以我们需要支持水平滚动。下面的代码对我来说工作得很好。请注意，即使“权重为 1”，也不要为列表视图保留“高度为 0dp”。因为 Horizo​​ntalScrollView 会将高度设为零，并且不会为列表视图绘制任何项目。

```
<?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/table_view"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <TextView
            android:layout_width="58dp"
            android:layout_height="fill_parent"
            android:gravity="center"
            android:text="header"
            android:textColor="@android:color/black" />

        <HorizontalScrollView
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" >

            <ListView
                android:id="@+id/mylist"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1" >
            </ListView>
        </HorizontalScrollView>
    </LinearLayout> 
```

# mysql - 添加具有随机值和唯一键的字段，重复条目

> ID：13699568
> 
> 赞同：0
> 
> 时间：2012-12-04T09:22:01.873
> 
> 标签：mysql, distinct, alter, unique-key

我想用一个在创建时填充随机值`users`的新字段来扩展一个 mysql 数据库。`unique`

现在我有这些命令，它们创建字段，添加随机字符串并添加`unique`键，但显然当最后一个命令执行时，有些字段具有相等的随机字符串，在尝试添加键时会引发错误。

*（我有大约 20k 行，因此使用“100k 随机数字符串”仍然有很大的重复机会 - 但即使使用更长的字符串也总是有机会，所以我如何处理可能重复的基本问题？）*

```
ALTER TABLE `users` ADD `nick` VARCHAR( 55 ) NOT NULL AFTER `id`;

UPDATE `users` SET `nick` = CONCAT('user_', FLOOR(RAND() * 100000));

ALTER TABLE `users` ADD UNIQUE ( `nick` ); 
```

我的问题是如何确保所有随机字符串都是不同的，或者如何在一次滑动时实现这种升级和随机字符串的生成（最好只使用 sql）。

[（在这个类似的 SO 主题](https://stackoverflow.com/questions/4661144/mysql-alter-table-add-column-with-unique-random-value)中接受的答案并没有真正提供解决方案。）

[编辑：到目前为止，该表还没有任何用户昵称。正在开发的更新将为用户添加一次设置其用户昵称的功能，但在用户这样做之前，我希望为他们分配一个临时的、唯一的和随机的用户昵称 - 出于安全原因，我不想使用主 ID在那个用户昵称]

[编辑：我尝试了用户 id 的建议散列，发现它执行的散列有 8 个符号而没有重复（而 6 仍然经常有重复，对于 20k 行），但我仍然想知道是否没有其他方法可以接近这个比通过推动重复的几率更小。

否则这有效：

```
ALTER TABLE `users` ADD `nick` VARCHAR( 55 ) NOT NULL AFTER `id`;

UPDATE `users` SET `nick` = CONCAT('user_', SUBSTR(MD5(`users`.`id`), 1, 8));

ALTER TABLE `users` ADD UNIQUE ( `nick` ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T09:28:13.047

MySQL 有一个[`UUID()`](http://dev.mysql.com/doc/refman/5.0/en/miscellaneous-functions.html#function_uuid)函数可以给出一个普遍唯一的数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:15:01.633

`unique`在添加密钥之前似乎没有真正的方法来捕获或避免生成重复项的可能性。因此，增加随机字符串的复杂性似乎是最可行的解决方案，如下所示：

```
ALTER TABLE `users` ADD `nick` VARCHAR( 55 ) NOT NULL AFTER `id`;

UPDATE `users` SET `nick` = CONCAT('user_', SUBSTR(MD5(`users`.`id`), 1, 8));

ALTER TABLE `users` ADD UNIQUE ( `nick` ); 
```

编辑：我将此标记为正确答案，只要除了增加附加随机字符串的复杂性之外没有新的建议。

# asp.net - 网格视图格式化 Asp.net 我的代码

> ID：13699584
> 
> 赞同：1
> 
> 时间：2012-12-04T09:23:04.400
> 
> 标签：asp.net, gridview, formatting

因为我想格式化我的网格视图，因为它只显示这样的数据，

```
john
Adam
Morkel
Kalis
.
.
. 
```

.

我想以这种方式展示他们，

```
john    Kalis   .
                . 
Adam    Chris   .
         .      .
morkel   .      . 
```

附加数据源后我的代码，

```
GridView1.DataSource = dt;
GridView1.DataBind(); 
```

希望您的建议提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:32:10.870

最好使用[DataList](http://msdn.microsoft.com/en-us/library/cc295015.aspx)控件。

对于您的多行/多列需求，请查看[http://www.asp.net/web-forms/tutorials/data-access上的“](http://www.asp.net/web-forms/tutorials/data-access/displaying-data-with-the-datalist-and-repeater/showing-multiple-records-per-row-with-the-datalist-control-vb)*第 3 步：在多列、多行表中显示数据*” [/displaying-data-with-the-datalist-and-repeater/showing-multiple-records-per-row-with-the-datalist-control-vb](http://www.asp.net/web-forms/tutorials/data-access/displaying-data-with-the-datalist-and-repeater/showing-multiple-records-per-row-with-the-datalist-control-vb)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:27:45.147

我认为你必须使用`DataList`而不是`gridview`

检查这些例子

[http://www.asp.net/web-forms/tutorials/data-access/displaying-data-with-the-datalist-and-repeater/displaying-data-with-the-datalist-and-repeater-controls- VB](http://www.asp.net/web-forms/tutorials/data-access/displaying-data-with-the-datalist-and-repeater/displaying-data-with-the-datalist-and-repeater-controls-vb)

[http://www.packtpub.com/article/working-with-asp-dot-net-datalist-control](http://www.packtpub.com/article/working-with-asp-dot-net-datalist-control)

**编辑：**

.aspx

```
 <ItemTemplate>
    <ul>
       <li> <%# Container.DataItem %></li>
    </ul>
  </ItemTemplate>

</asp:DataList> 
```

。CS

```
 List<string> ss = new List<string>();
    ss.Add("john");
    ss.Add("Adam");
    ss.Add("Morkel");
    ss.Add("Kalis");
    ss.Add("Chris");
    DataList1.DataSource=ss;
    DataList1.DataBind(); 
```

# mercurial - 在 Mercurial / TortoiseHg 中隐藏一个分支

> ID：13699585
> 
> 赞同：13
> 
> 时间：2012-12-04T09:23:05.853
> 
> 标签：mercurial, branch, tortoisehg

我们计划为来自我们产品核心版本的客户端版本命名分支。

我们不希望将 TortoiseHg 的分支图与不相关的分支混杂在一起，即随着我们添加越来越多的客户端，该图将变得庞大。

除了本地当前分支之外，有没有办法隐藏其他所有内容？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-10-25T16:31:15.783

1.  查看 → 过滤器工具栏 (Ctrl-S)
2.  在框中，输入如下内容：

    `branch(default) or branch("branch 1") or branch("branch 2")`

3.  按回车

现在只有树枝`default`和是可见的，所有其他的都是隐藏的`branch 1`。`branch 2`

您可以再次关闭过滤器工具栏而不影响当前过滤器。背景将保持黄色以提醒您有一个活动过滤器。

如果取消选中“过滤器”框，它将再次显示所有变更集，但与当前过滤器不匹配的变更集将显示为灰色。

要创建更高级的过滤器，您可以按小省略号 (...) 打开查询向导。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-04T11:27:13.837

我认为没有办法自动执行此操作，但您可以根据很多条件过滤 TortoiseHg 图，并且通过命名分支是选项之一。

在`Revision Details`任务页面上，您可以单击过滤器图标（放大镜图标）。这会在修订图上方显示一个额外的工具栏，其中包含各种过滤器选项。最右边的是一个`* Show All *`默认显示的下拉菜单。单击它并选择要查看的分支。您可以关闭此工具栏，过滤器将保持应用（存储库选项卡通过在选项卡中包含过滤的分支来指示这一点）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-04T16:43:04.243

你至少有两个选择：

1.  克隆到特殊的 repo 单个分支，围绕这个 repo 工作，并根据要求与客户分支一起拉|push 到 big repo
2.  TortoiseHG - `Global Settings`- `<Repo> settings`（或来自工作台：选择 repo - `File`- `Settings`） - `Workbench`- `Dead Branches`。

在此处定义所有“必须隐藏在工作台中”的分支

![枯枝](../Images/f7f6062fe5583698c4434db9e198c523.png)

# api - Magento Soap Api 不适用于 Magento 2

> ID：13699586
> 
> 赞同：1
> 
> 时间：2012-12-04T09:23:10.710
> 
> 标签：api, magento, soap

在 Magento 2 中，当我通过 Soap UI 为任何进程测试其 Soap API 时，出现以下错误

> require() [<a href='function.require'>function.require</a>]：打开失败需要'Mage/Customer/Model/Customer/Api/v2.php'（include_path='/home/template/ public_html/Individual/ ***/newmagento/magento2master/app/code/local:/home/template/public_html/Individual/*** /newmagento/magento2master/app/code/community:/home/template/public_html/Individual/ ***/newmagento/ magento2master/app/code/core:/home/template/public_html/Individual//** newmagento/magento2master/lib:.:/usr/lib/php:/usr/local/lib/php')

据我了解，它无法找到 v2.php 文件，但在 magento 结构中，v2 文件被命名为 V2.php，其中 V 大写，但它正在寻找小写的 v2.php 文件，因此无法找到文件。

一旦我在 magento 中更改 v2.php 的大小写，一切正常，但这不是问题的解决方案。

有人可以帮我解决这个问题吗？

# javascript - 将值从 javascript 传递到 jsp 图像 ID

> ID：13699587
> 
> 赞同：0
> 
> 时间：2012-12-04T09:23:16.287
> 
> 标签：javascript

```
var text1="hi bye";
document.getElementById("image").value=text1; 
```

这里我需要将这个 text1 值传递给 jsp 中的“图像”ID。它在 Mozilla 中运行良好，但在 Chrome 中无法运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:29:29.380

尝试使用全名，例如：

```
document.forms['formname']['fieldname'] 
```

代替：

```
document.getElementById 
```

# google-apps-script - 在网页中显示 google sheet 单元格的内容

> ID：13699589
> 
> 赞同：1
> 
> 时间：2012-12-04T09:23:18.890
> 
> 标签：google-apps-script, google-sheets, google-spreadsheet-api

我有一个包含 html 代码的单元格的谷歌表。我想知道在网页中显示此 html 的最佳方式。我尝试过使用谷歌电子表格 API 和谷歌可视化 API ...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-10-10T14:33:16.440

以下是使用 Javascript 图表 API 显示单个单元格信息的方法。可能有更好的方法，我不是专家。要使下面的代码段正常工作，只需添加您的电子表格网址并设置范围。

```
<html>
  <head>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">

      // https://google,developers.appspot.com/chart/interactive/docs/spreadsheets#gid
      google.load('visualization', '1', {packages: ['corechart', 'line']});
      google.setOnLoadCallback(drawChart);

      function drawChart() {
        // Add your sheets url and range below
        var spreadsheetUrl = "https://your sheets url here?range=A1";
        var query = new google.visualization.Query(spreadsheetUrl);
        query.send(handleQueryResponse);
      }

      function handleQueryResponse(response) {
        var dataTable = response.getDataTable();
        // https://developers.google.com/chart/interactive/docs/reference?hl=en#methods
        // getValue(rowIndex, columnIndex)
        document.getElementById("test").innerHTML = dataTable.getValue(0, 0);
      }
    </script>
  </head>

  <body>
    <p id="test"></p>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T16:48:41.760

使用[Google Apps 脚本](https://developers.google.com/apps-script/)，这可以很简单：

```
function doGet() {
  var spreadsheet = SpreadsheetApp.openById("0Aq4s9w_HxMs7dFVuQ0hDaWl1VVZsQ1RBTVZqM0dHLXc"); // replace with your sheet id
  var html = spreadsheet.getRange("A1").getValue(); // My html is in cell A1
  return HtmlService.createHtmlOutput(html);
} 
```

查看[Apps 脚本文档](https://developers.google.com/apps-script/)入门和教程部分，了解如何使用 Apps 脚本进行开发。

# ios - 我可以使用 iOS 6 UITabBar 的样式吗？

> ID：13699593
> 
> 赞同：1
> 
> 时间：2012-12-04T09:23:27.210
> 
> 标签：ios, ios6, uitabbar

在 iOS 6 中，UITabBar 具有不同的样式（就像在 App Store 中一样）。它是我们可以使用的预定义样式还是只是自定义的标签栏？我查看了[UITabBar 参考](https://developer.apple.com/library/archive/#documentation/UIKit/Reference/UITabBar_Class/Reference/Reference.html)，但没有找到任何看起来像预定义样式的东西。

编辑：

我刚刚使用 iOS 6 SDK 制作了一个新的标签栏应用程序，仅针对 iOS 6，标签栏样式是旧的。

我得到的风格：

[![](../Images/fe5ec9b273114f86ebd637b277db9526.png)](https://i.stack.imgur.com/BYoA3.png)
[（来源：[apple.com](https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/MobileHIG/Art/tabbar.png)）]

我想要的风格：

[![](../Images/9cc1e3f13f698bbaa6f0461834c167ed.png)](https://i.stack.imgur.com/fkCXD.png)
[（来源：[apple.com](https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/MobileHIG/Art/ui_selecteditemmodeswitcher.png)）]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T09:32:57.373

您可以通过iOS 5+ 中可用的[外观自定义标签栏](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UITabBar_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40007521-CH3-SW4)

# matlab - 这是 Matlab 的错误吗？你有同样的问题吗？

> ID：13699596
> 
> 赞同：8
> 
> 时间：2012-12-04T09:23:35.180
> 
> 标签：matlab

我的 Matlab 版本是 R2012a
为什么在 Matlab 1.1-0.2 中不等于 0.9！！！！！！？
这太可怕了！

> >>1.1-0.2 == 0.9
> 
> 答案=
> 
> ```
>  0 
> ```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-04T09:30:27.370

这不是 Matlab 问题；这是一个浮点问题。您将在 C++（或任何符合[IEEE754](http://en.wikipedia.org/wiki/Double-precision_floating-point_format)的编程语言）中得到相同的结果：

```
#include <iostream>    
int main(int, char **) {
    std::cout << (1.1-0.2==0.9) << std::endl;
    return 0;
} 
```

输出：

```
0 
```

这是因为 1.1 和 0.9[不能用二进制精确表示](http://en.wikipedia.org/wiki/Binary_numeral_system#Fractions_in_binary)。这就像用十进制表示 1/3：你必须写

```
0.33333333333333333333333333333333333333333333333... 
```

并无限期地继续下去。但无论你坚持多久，你永远都不会做对。

在浮点数中，您只能存储这么多数字，因此计算必须在某个地方停止。计算的结果其实是

```
>> 1.1-0.2
ans =
     9.000000000000001e-01 
```

这非常接近，但并不完全正确。

`==`因此，在使用比较两个浮点数之前，您应该三思而后行；很少有`==`运算符可以在没有像您刚刚遇到的那样的“奇怪”后果的情况下应用。

最好使用舍入特定公差，例如

```
abs(1.1-0.2 - 0.9) <= eps(0.9) 
```

其中`eps`是一个 Matlab 函数，它返回特定双[精度值的双精度间距。](http://en.wikipedia.org/wiki/Double-precision_floating-point_format)但实际上，这不是一个包罗万象的解决方案。正确比较浮点数是一件棘手的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T09:30:47.953

[http://matlab.wikia.com/wiki/FAQ#Why_is_0.3-0.2-0.1_not_equal_to_zero_.28or_similar.29.3F](http://matlab.wikia.com/wiki/FAQ#Why_is_0.3-0.2-0.1_not_equal_to_zero_.28or_similar.29.3F)

滚动到“为什么 0.3 - 0.2 - 0.1（或类似）不等于零？”

“某些浮点数不能以二进制形式精确表示......如果您尝试比较两个浮点数，请在使用 == 时非常小心。另一种比较方法是检查是否您要比较的两个数字“足够接近”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T12:57:41.747

用于这些事情的一个很好的功能是`num2strexact`从文件交换中查看正在发生的事情

```
num2strexact(1.1-0.2)
0.9000000000000001332267629550187848508358001708984375

num2strexact(0.9)
0.90000000000000002220446049250313080847263336181640625 
```

你看，它们不一样。

看看使用 double 与 syms 时的不同之处

```
num2strexact((1.1-0.2)-0.9)
1.1102230246251565404236316680908203125e-16

sym('(1.1-0.2)-0.9') 
1.8367099231598242312011508394098e-40 
```

# android - libjingle googletalk 客户端

> ID：13699597
> 
> 赞同：3
> 
> 时间：2012-12-04T09:23:38.087
> 
> 标签：android, libjingle, google-talk

我有一个基于 libjingle 并从 android 调用的 google talk 客户端，每次我尝试登录时，这就是我得到的全部

```
RECV <<<<<<<<<<<<<<<<<<<<<<<<< : Tue Dec 4 21:38:02 2012
   <?xml version="1.0" encoding="UTF-8"?>
     <stream:stream from="gmail.com" id="A98AA8981D6845B2" version="1.0"
xmlns:stream="http://etherx.jabber.org/streams" xmlns="jabber:client">
RECV <<<<<<<<<<<<<<<<<<<<<<<<< : Tue Dec 4 21:38:02 2012
   <stream:features>
     <starttls xmlns="urn:ietf:params:xml:ns:xmpp-tls">
       <required/>
     </starttls>
     <mechanisms xmlns="urn:ietf:params:xml:ns:xmpp-sasl">
       <mechanism>
         X-GOOGLE-TOKEN
       </mechanism>
     </mechanisms>
   </stream:features>
SEND >>>>>>>>>>>>>>>>>>>>>>>>> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T17:18:57.307

我不知道你是否找到了答案，但以防万一你还没有（以及其他有同样问题的人）

查看返回的节，您似乎正在尝试与`GMail.com`. 根据我使用 LibJingle/XMPP/GoogleTalk 的经验，XMPP 节需要发送到：`talk.google.com`而不是`gmail.com`（或其他 Google 域）。`talk.google.com`是 Google 的 XMPP 服务，将在 Google Talk 桌面应用程序以及浏览器中将消息转发给用户。

编辑：另外，我正在查看最新的 LibJingle 源代码（我不确定您使用的是哪个代码），但似乎他们添加了代码来专门与 Google 服务器进行通信。我不记得确切的文件，但它可能是 LibJingle Plus 文件。如果您希望做的不仅仅是消息传递，您可能想四处看看。

# bash - 使用 inotifywait 监视多个目录并运行脚本

> ID：13699619
> 
> 赞同：2
> 
> 时间：2012-12-04T09:24:32.060
> 
> 标签：bash, inotify, inotifywait

我有多个包含网站的 git 存储库。我想针对他们克隆的本地版本运行 inotifywait 以监视某些文件事件并在检测到这些事件时自动运行 git push 和 git pull 脚本。

到目前为止，我已经为每个目录创建了一个带有单独函数的脚本，但只有第一个函数被调用。

```
 #!/usr/bin/env bash

  dbg() {
  inotifywait -mr -e ATTRIB /path/to/dbg/ |
  while read dir ev file;
  do
  cd /path/to/dbg
  git pull;
  git add .;
  git commit -m " something regarding this website has changed. check .... for more        info";
  git push;
  ssh remote@server.com 'cd /path/to/web/root; git pull';
  done;
  }
  dbg;

  website2() {
  same thing as above
  }
  website2;

  website3() {
  same thing as above
  }
  website3;

  .......

  website10() {
  ........
  }
  website10; 
```

我怎样才能使这段代码更高效、更重要、更全面，而无需创建和管理 10 个单独的脚本。我真的很想把这个逻辑放在一个文件中，我希望这是一个模块来实现一个更大的项目。

请批评我的提问、我的语法、思维过程等，以便我改进。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-31T04:19:16.367

如果您的逻辑相同，则可以使用 bash 函数来避免复制。此外，提交消息也可以作为参数传递。试试这个

```
#!/usr/bin/env bash

dbg() {
dbg_dir=$1
webroot_dir=$2
inotifywait -mr -e ATTRIB $dbg_dir |
while read dir ev file;
do
cd /path/to/dbg
git pull;
git add .;
git commit -m " something regarding this website has changed. check .... for more        info";
git push;
ssh remote@server.com 'cd $webroot_dir; git pull';
done;
}
dbg /path/to/dbg /path/to/webroot1 &  # & will run the command in background
dbg /path/to/dbg2 /path/to/webroot2 &
dbg /path/to/dbg3 /path/to/webroot3 & 
```

# python - 如何修复“无效语法”错误？

> ID：13699621
> 
> 赞同：-4
> 
> 时间：2012-12-04T09:24:40.017
> 
> 标签：python, syntax

这是整个程序。我已经在我的屏幕上写了问题发生的位置。[你可以从这里](http://inventwithpython.com/dragon.py)获得原版（第 6 章，龙界）

```
import random
import time

def displayIntro():
    print('You are in a land full of dragons. In front of you,')
    print('you see two caves. In one cave, the dragon is friendly')
    print('and will share his treasure with you. The goblin')
    print('is greedy and wants to loot you on sight.')
    print()

def chooseCave():
    cave = ''
    while cave != '1' and cave != '2':
        print('Which cave will you go into? (1 or 2)')
        cave = input()

    return cave

def checkCave(chosenCave):
    print('You approach the cave...')
    time.sleep(2)
    print('It is dark and spooky...')
    time.sleep(2)
    print('The goblin sees you and tells you too hand over your stuff')
    time.sleep(2)
    print("oh! I forgot you are an apprentice looking Merlin you can use ur magic on him")
    time.sleep(1)
    print("You can choose betweeen, fire, water, air or earth")
    print()
    time.sleep(2)

    friendlyCave = random.randint(1, 2)

    if chosenCave == str(friendlyCave):
         print('Gives you his treasure!')
    else:
         print('Takes your stuff and run')
def spell(magic): 
```

这是关于我认为问题发生的地方。

```
 if magic == 'air' or magic == 'fire' or magic == 'water' or magic == 'earth' #This is where the problem occurs I think it is because of some prior codes
def choosespell(maguc)#choose between spells
if magic == 'air':
    print('you blew the goblin away')
    elif magic == 'fire':
        print('you burned the goblin to death')
        elif magic == 'water':
            print('the goblin drowned to death')
            elif magic  == 'earth':
                print('The veins chocked him to death')
magic = input()
playAgain = 'yes'
while playAgain == 'yes' or playAgain == 'y':

    displayIntro()

    caveNumber = chooseCave()

    checkCave(caveNumber)

    print('Do you want to play again? (yes or no)')
    playAgain = input() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T12:38:35.567

您似乎**没有**掌握 Python 语法和语义的基础知识。*我建议您不要先尝试阅读代码，*而不要首先至少了解一些语言语法的基本知识，因为您会感到困惑。

老实说，请先尝试阅读python书籍。两个很棒的（而且是免费的）[Dive into Python](http://www.diveintopython.net/)和[Learn Python the Hard way](http://learnpythonthehardway.org/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T09:45:10.147

在函数定义选择拼写之后，您似乎缺少一个冒号。魔术也拼错了。尝试将其更改为：

> def choosespell(magic): #选择法术

# sql-server - SQL Server + 全文搜索 + Unicode 和不同的结果集

> ID：13699622
> 
> 赞同：0
> 
> 时间：2012-12-04T09:24:42.253
> 
> 标签：sql-server, sql-server-2008-r2, full-text-search

对包含以 unicode 文本编码的短语的列进行全文搜索 ( `CONTAINS`)。

目标是包含`ż`匹配`ż`和`z`（ascii 代表）的查询。

换句话说，我需要为 Unicode 和非 Unicode 格式的搜索查询返回相同的结果集。

请告知如何使用 SQL Server 2008 R2 实现此目的。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:58:48.873

全文重音敏感度是全文目录的属性。您可以在目录创建期间设置敏感度：

[创建全文目录 ... ACCENT_SENSITITY = OFF](http://msdn.microsoft.com/en-us/library/ms189520.aspx)

或事后修改：

```
ALTER FULLTEXT CATALOG [my_fulltext_catalog] REBUILD WITH ACCENT_SENSITIVITY = OFF 
```

# sql - SQL Server 和 ANSI NULLS 除外

> ID：13699623
> 
> 赞同：1
> 
> 时间：2012-12-04T09:24:43.510
> 
> 标签：sql, sql-server, except

我已经通过用户定义的函数重构了一些视图，我想确保它们是相同的。

我写了一个小脚本来测试这种情况：

```
SET ANSI_NULLS OFF
GO

SELECT TOP 1000 [DealNumber]
      ,...others
FROM OLD_VIEW
EXCEPT
SELECT TOP 1000 [DealNumber]
            ,...others
  FROM NEW_VIEW 
```

当我应用它时，我获得了许多行作为结果。但是，如果我从任何行中获取 DealNumber 并运行以下命令：

```
SET ANSI_NULLS OFF
GO

SELECT [DealNumber]
      ,...others
FROM OLD_VIEW
WHERE DealNumber = 'MyDealNumber'
EXCEPT
SELECT [DealNumber]
            ,...others
FROM NEW_VIEW
WHERE DealNumber = 'MyDealNumber' 
```

正如预期的那样，这将返回一个空记录集。

作为一种替代方法，我编写了一个函数 Test_View_Correctness 来执行前一个测试。但是，如果我这样运行它：

```
SELECT TOP 1000 [DealNumber] from OLD_VIEW
where DealNumber IN (SELECT a.DealNumber 
                     FROM Test_View_Correctness(DealNumber) as a) 
```

如何确保 except 方法有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:29:31.700

您需要`order by`一组**唯一**的列——没有那个 SQL*永远不会*保证行顺序，并且查询的两个部分可能会返回完全不同的行子集：

```
SELECT ... FROM ( SELECT TOP 1000 [DealNumber],...others 
                  FROM OLD_VIEW 
                  ORDER BY x,y,z ) a
EXCEPT
SELECT ... FROM ( SELECT TOP 1000 [DealNumber],...others
                  FROM NEW_VIEW
                  ORDER BY x,y,z ) b 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:35:50.273

这是因为您使用 Top 1000 来限制例外正在处理的行。EXCEPT 返回左侧查询中未在右侧查询中找到的任何不同值。使用 NOT EXISTS 会更好，例如

```
SELECT TOP 1000 [DealNumber]
           ,... others
FROM OLD_VIEW
WHERE NOT EXISTS
   (SELECT * FROM NEW_VIEW WHERE OLD_VIEW.[DealNumber] = [DealNumber]) 
```

--- 基于进一步澄清的更新

```
;WITH NV
AS
(
    SELECT *, CHECKSUM(*) as CHK
    FROM NEW_VIEW
),
OV
AS
(
    SELECT *, CHECKSUM(*) AS CHK
)
SELECT *
FROM NV
FULL OUTER JOIN OV
    ON NV.DealNumber = OV.DealNumber
WHERE NV.DealNumber IS NULL -- CATCH missing rows in new view
   OR OV.DealNumber IS NULL -- CATCH extra rows in new view
   OR NV.CHK <> OV.CHK      -- CATCH differing columns in either view 
```

# java - 如何从类路径中删除 Dom4j 1.6.1 jar 并在 MANIFEST.MF 文件中添加相同的 jar 依赖？

> ID：13699625
> 
> 赞同：0
> 
> 时间：2012-12-04T09:24:57.537
> 
> 标签：java, maven, jar, dependencies, pom.xml

我有我的 pom.xml

```
<dependency>
          <groupId>jaxen</groupId>
          <artifactId>jaxen</artifactId>
          <exclusions>
                     <exclusion>
                     <artifactId>dom4j</artifactId>
                    <groupId>dom4j</groupId>
                    </exclusion>
            </exclusions>
         </dependency> 
```

我已经从类路径中删除了 dom4j 1.6.1 jar，当我再次构建时，maven 尝试下载并将其添加到类路径中。如何正确避免将该 jar 添加到类路径并仅通过 MANIFEST.MF 文件添加？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T04:51:54.360

我已经添加了**提供范围**的依赖项，它删除了我的异常..

```
 <dependency>
            <groupId>dom4j</groupId>
            <artifactId>dom4j</artifactId>
            <version>1.6.1</version>
                         <scope>provided</scope>
        </dependency> 
```

# iphone - 为什么上传进度变成0%？

> ID：13699626
> 
> 赞同：0
> 
> 时间：2012-12-04T09:25:13.980
> 
> 标签：iphone, background, progress

我的程序需要将一些数据上传到服务器，我使用百分比来显示进度`UIAlertView`。例如，当程序开始上传时，进度为 10%。我将程序置于后台并继续上传。当我在十秒后将程序拉回前台时，百分比在几秒钟内`UIAlertView`变为0％，然后转为正常，例如40％。我不知道为什么会发生这种情况，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:29:38.253

可能是当您的应用程序进入前台时，您的 alertview 进度可能在正确更新为更新的进度值之前被设置为 0（初始值）。

# visual-studio-2010 - TFS 修改 Merge With Delete 变为 Merge without the Delete

> ID：13699628
> 
> 赞同：4
> 
> 时间：2012-12-04T09:25:44.077
> 
> 标签：visual-studio-2010, visual-studio-2008, merge, bids

我在尝试从集成合并到功能分支时遇到了问题。

问题从这 3 个动作开始： 1）在集成分支的 Solution1 中添加了项目 ABC。
2) 将解决方案 1 分支到功能分支。3) 从集成分支的解决方案1 ​​中删除项目ABC。

现在，我想将最新的从集成合并到功能分支，但我不想在合并期间实际删除项目 ABC。

我的标准是使用以下方法解决此问题：a）单次签入 b）合并自上次合并以来的所有变更集（包括删除） c）不更改现有项目名称/路径

在我的梦想中，我请求合并，并在签入之前从我保存的副本中重新添加已删除的项目，并编辑解决方案文件以将参考数据保留到同一项目。

那里的任何人都知道如何执行此操作，或者可能知道有见地的 Microsoft 参考来记录为什么我不能或为什么这是一个坏主意？

我使用 Team Foundation Server 2010 和 Visual Studio 2010 进行源代码控制，我的解决方案和项目是在 BIDS 2008 中开发的。

感谢您的任何启发。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-09-01T05:50:47.703

接受的答案是完全错误的，因为合并永远不会以这种方式完成。如果你这样做，你只是部分完成了合并，并且每次都会再次被问到。

真正的问题是，合并时不会发生冲突。因此，您对合并结果没有选择！

因此，让我们首先撤消合并并重做。但是在您再次合并之前，通过 CheckOut 整个目标分支（或者只是您想要防止被删除的文件）在每个文件上引发冲突！您可以在不编辑文件的情况下执行此操作。您可以在源代码管理资源管理器中右键单击该文件并选择 CheckOut。

然后您可以解决冲突并合并它们而不接受删除！:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T04:49:35.233

将集成分支合并到功能分支。

合并操作只是“挂起”来自合并的所有更改。

查看待处理的更改并删除您不想要的删除。

犯罪。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T09:45:34.527

我会看到执行此操作的选项，但有一个先决条件： 1\. 从一般分支到特性分支进行樱桃采摘合并。这意味着您选择所有变更集，除了项目被删除的那个。但是这个变更集必须不包含除删除项目之外的任何其他更改。2\. 进行合并，如果与项目文件发生合并冲突，以目标为主。如果没有发生冲突，请撤消功能分支中项目上的合并更改（合并、删除）。这样做意味着所有更改都已合并，特定项目的更改除外。

# html - a href 在推送的页脚中不起作用

> ID：13699631
> 
> 赞同：1
> 
> 时间：2012-12-04T09:25:47.973
> 
> 标签：html, css, hyperlink, href

我想在该页脚中放置一些无法正常工作的链接。似乎它们不可点击，我不知道为什么会这样。

页脚本身位于站点的末尾，将被推送的 div 强制留在底部。我的整个 div 安排是这样的：

```
<body>
<div class="wrapper">
    <div class="push"></div>        
</div>
<div class="footer">
<div id="about">
    <div id="list">
        <span class="up">1\. row</span>
        <ul class="nav">
            <li><a href="/one.php">one</a></li>
            <li><a href="/two.php">two</a></li>
            <li><a href="/three.php">three</a></li>
            <li><a href="/four.php">four</a></li>
        </ul>
    </div>
</div>
<div id="legals">
    <div id="list2">
        <span class="down">2.row</span>
        <ul class="nav2">
            <li><a href="/five.php">five</a></li>
            <li><a href="/six.php">six</a></li>
            <li><a href="/seven.php">seven</a></li>
            <li><a href="/eight.php">eight</a></li>
        </ul>
    </div>
</div> 
```

[例子](http://jsfiddle.net/7kXJu/)

为什么这个href不起作用？

* * *

好的，谢谢大家。在这种情况下添加 z-index 不起作用，因为添加它时，由于在该类中使用了另外几个其他 z-index，因此不会显示包装器的全部内容。所以解决方案是删除位置：相对。感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T09:30:41.667

添加`z-index:-1`您的`.wrapper`

**像这样**

```
.wrapper{
z-index:-1;
} 
```

***[演示一](http://jsfiddle.net/rohitazad/7kXJu/8/)***

## --------

或者**第二个选项**是

**删除** `position:relative`此类`.wrapper`

***[演示](http://jsfiddle.net/rohitazad/7kXJu/5/)***

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T09:31:13.763

问题是您的带有类的元素与`push`您的页脚重叠，因此，当您单击您认为是页脚链接的内容时，您实际上是单击了推送元素。

您的包装纸是否必须相对定位？

如果没有，你可以`position: relative`从包装类中删除，你很高兴：

[**工作示例**](http://jsfiddle.net/7kXJu/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T09:30:57.097

那是因为`<ul class="nav">`并且`<ul class="nav2">`已经覆盖了，这意味着某些东西会停留在它们之上。您可以为具有链接和更高 z-index 的 ul 提供绝对位置以将它们堆叠起来，以便它们变得可点击。

[**例子**](http://jsfiddle.net/refhat/7kXJu/4/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T09:31:19.123

添加`z-index`到包装器

```
.wrapper {
    position:relative;
    width: 960px;
    height: auto !important;
    min-height: 100%;
    margin: 0 auto -80px;
    z-index:-1
} 
```

**[演示](http://jsfiddle.net/7kXJu/3/)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T10:03:22.807

在你的 CSS`position`中`wrapper class div`是`relative`. 这是链接不可点击的主要原因，因此请添加`position:relative`到`footer`类 div。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-04T09:31:03.053

你需要什么包装？如果删除“位置：相对；” 从包装类它可以工作。（或更改 z-index）

# visual-studio-2010 - 面向 Windows 2000 的 Visual Studio 2010 安装/部署项目

> ID：13699634
> 
> 赞同：0
> 
> 时间：2012-12-04T09:26:04.010
> 
> 标签：visual-studio-2010, deployment, .net-2.0, setup-deployment, windows-2000

我目前正在 Visual Studio 2010 中处理 C#/.NET 项目。此应用程序的目标框架是 .NET 2。至于在我的目标系统上部署此项目，我在我的 Visual 中使用了一个部署项目工作室解决方案。

至于在 XP（或更高版本）系统上安装我的二进制文件，没有问题。但是当我尝试在 Windows 2000 系统上进行部署时，我的 Setup.exe 将无法运行。它会立即抛出异常`The procedure entry point GetNativeSystemInfo could not be located in the dynamic link library KERNEL32.DLL`。

我的 Windows 2000 系统上确实有 Windows Installer 3.1。我的猜测是这个问题是因为 Windows 2000 不支持由 Visual Studio 2010 创建的安装程序，但我想知道是否有人可以证实这一点。如果是这样 - VS 2010 中是否有解决方法，或者我是否需要在 VS 2008 上构建我的解决方案？

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:41:31.797

由于我无法真正解决这个问题，在这种情况下，对我来说最好的解决方法是在 VS 2008 中简单地重建我的项目。在 VS 2010 中构建的解决方案文件与 VS 2010 不向后兼容，所以我必须创建一个新的解决方案在 VS 2008 中，并将我从 VS 2010 中的所有项目添加到该解决方案中。

# php - 查询小于 AND 大于时间

> ID：13699637
> 
> 赞同：0
> 
> 时间：2012-12-04T09:26:16.820
> 
> 标签：php, mysql, wordpress, time

请你们帮我检查我的语法是否正确。使用这段代码我没有收到任何错误，但我只是想对我是否做对了一些意见。

我正在使用多站点 Wordpress 安装，并且正在检查特色博客是否超过一天但不到一周：

```
/* Work out blog of the day */
$featured_id = get_option('featured_blog'); # Current ID
$featured_time = get_option('featured_time'); # Current Time

if($featured_time > time()-86400 && $featured_time < time()-604800) // more than 1 Day ago but less than a week
{
    $query = "SELECT blog_id FROM `wp_blogs` WHERE public = '1' and archived = '0' and spam = '0' and deleted = '0' AND blog_id NOT IN ('".$featured_id."', '1','27') ORDER BY rand() limit 1";
    $featured_id = $wpdb->get_var($query);
    update_option('featured_blog', $featured_id);
    update_option('featured_time', time());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:37:34.123

根据[http://codex.wordpress.org/Database_Description#Table:_wp_blogs](http://codex.wordpress.org/Database_Description#Table:_wp_blogs)， blog_id 列是 int ，因此您不应将值括在引号中

```
select ... where ... and blog_id NOT IN (".$featured_id.", 1,27) ... 
```

列`public`,`spam`和 也是如此`deleted`。

除此之外，这不是一个真正的问题，我无法发现任何语法错误。但与您的标题相反，您没有在查询中使用时间。

对`if()`声明来说，这永远不会成为真的，因为`$featured_time`不可能`> now - 86400`同时`< now-604800`。如果您想要评论中的条件，请说

```
if ($featured_time < time()-86400 && $featured_time > time()-604800) 
```

在一条`time()`线上，这看起来或多或少像这样

```
0          now-604800   now-86400      1354618129
+----------+------------+--------------+
|          |            |              |
1.1.1970   a week ago   24 hours ago   now 
```

因此，如果`$featured_time`应该在一周前和一天前之间，它必须大于一周前（> 现在 - 604800）并且小于一天前（< 现在 - 86400）。

# php - 下拉列表表单提交

> ID：13699652
> 
> 赞同：0
> 
> 时间：2012-12-04T09:27:17.397
> 
> 标签：php, javascript

从下拉列表中选择一个选项时，我正在尝试提交表单。但它不起作用。谁能帮我解决这个问题。我在下面附上了我的代码。

提前致谢，

```
<div class="main" id="main">
  <h2>Sell / Rent Advertisments</h2>
  <form id="form1" name="form1" method="post" action="form.php">
  <table width="531" height="121" border="0">
    <tr>
      <td width="81"><div>
        <label>I wish to:</label>
      </div></td>
      <td width="76">
        <label for="mediaId"></label>
        <select name="mediaId" id="mediaId">

          <option selected value="Sale">Sale</option>
          <option value="Rent">Rent</option>
        </select>
      </td>
      <td width="360"><label for="type"></label>
        <select name="type" id="type">
        <option value="_Any" selected="selected">- - Not Specified - -</option>
<option value="1" onChange="document.forms['form1'].submit()">Apartment</option>
<option value="3" onChange="document.forms['form1'].submit()">Building</option>
<option value="4" onChange="document.forms['form1'].submit()">Hotels/Guest Houses</option>
<option value="5" onChange="document.forms['form1'].submit()">House</option>
<option value="6" onChange="document.forms['form1'].submit()">Land</option>
      </select></td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
    </tr>
  </table>
  </form>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T09:31:28.280

尝试

```
<select name="type" id="type"  onChange="document.forms['form1'].submit()">
    <option value="_Any" selected="selected">- - Not Specified - -</option>
    <option value="1">Apartment</option>
    <option value="3" >Building</option>
    <option value="4" >Hotels/Guest Houses</option>
    <option value="5" >House</option>
    <option value="6" >Land</option>
    </select> 
```

也就是说，将`onChange`事件应用于`select`而不是`option`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T09:36:52.463

HTML

```
<form id="form1" ...>
    <select name="type" id="type">
        <option value="_Any" selected="selected">- - Not Specified - -</option>
        <option value="1">Apartment</option>
        <option value="3">Building</option>
        <option value="4">Hotels/Guest Houses</option>
        <option value="5">House</option>
        <option value="6">Land</option>
    </select>
</form> 
```

没有jquery，只有javascript

将 onchange 放在`select`标签中，而不是在每个单独的`option`标签中

```
<select name="type" id="type" onChange="document.forms['form1'].submit()"> 
```

jQuery

将功能与标记分开，并将此文本放入`$.ready()`

```
$('#type').change( function(){
    $('#form1').submit();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T09:34:40.510

onChange 应该放在标签上，您“更改”选择的选项，但不更改选项上的任何内容。

```
<select name="type" id="type" onChange="document.forms['form1'].submit()"> 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-04T09:31:24.800

使用`onClick`而不是`onChange`喜欢

```
<option value="1" onclick="document.forms['form1'].submit()">Apartment</option> 
```

# c# - RowCommand 事件中的删除命令在页面刷新时继续执行

> ID：13699654
> 
> 赞同：1
> 
> 时间：2012-12-04T09:27:22.860
> 
> 标签：c#, asp.net, gridview

我正在尝试删除 gridview 中的项目，但删除命令正在 RowCommand 上再次执行。这是代码。该代码也在 RowDeleting 中，但它也在页面刷新时继续执行。有什么问题。对我提供的微小信息感到抱歉..我道歉。由于这里的字符数，现在这里是有限的代码

## ASPX

```
 <div id="griddiv" style="border: 1px solid #C0C0C0; top:170px; height:260px; width:830px; overflow:auto">
           <asp:GridView ID="gvDetails" DataKeyNames="Item" runat="server" 
               AutoGenerateColumns="False" CssClass="Gridview" HeaderStyle-BackColor="#61A6F8" 
                         onrowdeleting="gvDetails_RowDeleting" ShowFooter="True" EnableViewState="true"

               HeaderStyle-Font-Bold="true" HeaderStyle-ForeColor="White"  
                         BackColor="White" BorderColor="#CCCCCC" BorderStyle="None" 
               BorderWidth="1px" CellPadding="4" EnableModelValidation="True" 
                         GridLines="Horizontal" Width="797px" ForeColor="Black" 
               onrowcommand="gvDetails_RowCommand" onrowediting="gvDetails_RowEditing"                       
               onrowcancelingedit="gvDetails_RowCancelingEdit" 
               onrowupdating="gvDetails_RowUpdating" 
               onrowdatabound="gvDetails_RowDataBound" >
         <Columns>

            <asp:TemplateField>
                <EditItemTemplate>
                <asp:ImageButton ID="imgbtnUpdatexx" CommandName="Update" runat="server" ImageUrl="/Style%20Library/Images/save.png" ToolTip="Update" ValidationGroup="GridViewDataRowGroup"/>
                <asp:ImageButton ID="imgbtnCancelxx" CommandName="Cancel" runat="server" ImageUrl="/Style%20Library/Images/cancel.png" ToolTip="Cancel" ValidationGroup="GridViewDataRowGroup" />
                </EditItemTemplate>

                <ItemTemplate>
                <asp:ImageButton ID="imgbtnEditxxxx" CommandName="Edit" runat="server"  ImageUrl="/Style%20Library/Images/Edit.png" ToolTip="Edit" ValidationGroup="GridViewDataRowGroup" />
                <asp:ImageButton ID="imgbtnDeletexx" CommandName="Delete" runat="server"  OnClientClick="return confirm('Delete this Item ?');" ImageUrl="/Style%20Library/Images/delete.png" ToolTip="Delete" ValidationGroup="GridViewDataRowGroup" />                       
                </ItemTemplate>

                <FooterTemplate>
                <asp:ImageButton ID="imgbtnAddxxxx" runat="server" CommandName="Insert" ImageUrl="/Style%20Library/Images/add.png" ToolTip="New Record" ValidationGroup="GridViewFooterRowGroup" />
                </FooterTemplate>

            </asp:TemplateField>

            <asp:TemplateField HeaderText="Item">
                <EditItemTemplate>
                   <%# Eval("ItemText")%>
                </EditItemTemplate>

                <ItemTemplate>
                   <asp:Label ID="lblitemdesc" runat="server" Text='<%#Eval("ItemText") %>'/>
                </ItemTemplate>

                <FooterTemplate>
                 <asp:DropDownList ID="DDL_Items" runat="server" Width="230px" Font-Names="Verdana" Font-Size="12px" DataTextField="Description" DataValueField="INVENTORY_ITEM_ID" >                        
                  </asp:DropDownList>

                </FooterTemplate>

            </asp:TemplateField>

            <asp:TemplateField HeaderText="Quantity">
                <EditItemTemplate>
                <asp:TextBox ID="txtQty" runat="server" Text='<%#Eval("Quantity") %>' BackColor="LightSkyBlue" ForeColor="Black" />
                 <asp:RequiredFieldValidator ID="rfvEditQty" runat="server" ControlToValidate="txtQty" Text="*" Display="Dynamic" ValidationGroup="GridViewDataRowGroup" />
                    <asp:RangeValidator ID="RvEditQty" runat="server" ErrorMessage="*" Type="Integer" MinimumValue="1" MaximumValue="999999" ControlToValidate="txtQty" Display="Dynamic" ForeColor="Red" ValidationGroup="GridViewDataRowGroup"></asp:RangeValidator>
                </EditItemTemplate>

                <ItemTemplate>
                <asp:Label ID="lblQty" runat="server" Text='<%#Eval("Quantity") %>'/>
                </ItemTemplate>

                <FooterTemplate>
                <asp:TextBox ID="txtftrQty" runat="server" Text="0" />
                    <asp:RequiredFieldValidator ID="rfvQty" runat="server" ControlToValidate="txtftrQty" Text="*" Display="Dynamic" ValidationGroup="GridViewFooterRowGroup"/>
                    <asp:RangeValidator ID="RvFtrQty" runat="server" ErrorMessage="*" Type="Integer" MinimumValue="1" MaximumValue="999999" ControlToValidate="txtftrQty" Display="Dynamic" ForeColor="Red" ValidationGroup="GridViewFooterRowGroup" ></asp:RangeValidator>
                </FooterTemplate>

            </asp:TemplateField>

            <asp:TemplateField HeaderText="Needed-By">
                <EditItemTemplate>
                  <asp:TextBox ID="txtNeededBy" runat="server" Text='<%#Eval("NeedBy") %>' BackColor="LightSkyBlue" ForeColor="Black" />
                  <asp:RequiredFieldValidator ID="reditNeededBy" runat="server" ControlToValidate="txtNeededBy" Text="*" Display="Dynamic" ValidationGroup="GridViewDataRowGroup" />
                </EditItemTemplate>

                <ItemTemplate>
                   <asp:Label ID="lblNeededBy" runat="server" Text='<%#Eval("NeedBy") %>'/>
                </ItemTemplate>

                <FooterTemplate>
                <asp:TextBox ID="txtftrNeededBy" runat="server" />
                <asp:RequiredFieldValidator ID="rfvNeededBy" runat="server" ControlToValidate="txtftrNeededBy" Text="*" Display="Dynamic" ValidationGroup="GridViewFooterRowGroup" />
                </FooterTemplate>

            </asp:TemplateField>

        </Columns>
        <FooterStyle BackColor="#CCCC99" ForeColor="Black" />

        <HeaderStyle BackColor="#333333" Font-Bold="True" ForeColor="White"></HeaderStyle>
        <PagerStyle BackColor="White" ForeColor="Black" HorizontalAlign="Right" />
        <SelectedRowStyle BackColor="#CC3333" Font-Bold="True" ForeColor="White" /> 
```

## 代码背后

```
public partial class EditPurchaseRequisitionUserControl : UserControl
    {
        public string reqId = "8";
        string itemcat = "";

        OraSPDataExchange.OraSPDataExchangeClient objServiceClient = new OraSPDataExchange.OraSPDataExchangeClient();

        protected void Page_Load(object sender, EventArgs e)
        {
            if (!IsPostBack)
            {
                DataSet ds = new DataSet();

                ds = objServiceClient.getItemCategories();

                DD_ItemCategories.DataSource = ds;
                DD_ItemCategories.DataTextField = "CATEGORY_DESCRIPTION";
                DD_ItemCategories.DataValueField = "CATEGORY_ID";
                DD_ItemCategories.DataBind();

                btnSubmit.Enabled = false;

                BindGridView();

                fetchReqMaster();

                fetchReqDetails();
            }
        }

        protected void BindGridView()
        {
            //Declare a datatable for the gridview
            DataTable dt = new DataTable();

            dt.Columns.Add("Item");
            dt.Columns.Add("ItemText");
            dt.Columns.Add("Quantity");
            dt.Columns.Add("NeedBy");

            //Define a datarow for the datatable dt
            DataRow dr = dt.NewRow();

            //Now add the datarow to the datatable
            dt.Rows.Add(dr);

            gvDetails.DataSource = dt;
            gvDetails.DataBind();

            //Now hide the extra row of the grid view
            gvDetails.Rows[0].Visible = false;

            //Delete row 0 from the datatable
            dt.Rows[0].Delete();
            dt.AcceptChanges();

            //View the datatable to the viewstate
            ViewState["Data"] = dt;
        }

        protected void gvDetails_RowDeleting(object sender, GridViewDeleteEventArgs e)
        {
            int itemid = Convert.ToInt32(gvDetails.DataKeys[e.RowIndex].Values[0].ToString());

            ((DataTable)ViewState["Data"]).Rows[e.RowIndex].Delete();
            ((DataTable)ViewState["Data"]).AcceptChanges();

            gvDetails.DataSource = (DataTable)ViewState["Data"];
            gvDetails.DataBind();

            DeleteGridItem(itemid);

            //if (((DataTable)ViewState["Data"]).Rows.Count > 0)
            //{
            //    gvDetails.DataSource = (DataTable)ViewState["Data"];
            //    gvDetails.DataBind();
            //}
            //else
            //{
            //    DD_ItemCategories.Enabled = true;
            //    btnSubmit.Enabled = false;
            //    BindGridView();
            //}

            //gvDetails.DataSource = null;
            //gvDetails.DataBind();

            //DeleteGridItem(Convert.ToInt32(itemid));
            //gvDetails.DataSource = (DataTable)ViewState["Data"];
            //gvDetails.DataBind();

            e.Cancel = true;           
        }

        protected void gvDetails_RowCommand(object sender, GridViewCommandEventArgs e)
        {
            if (e.CommandName == "Insert")
            {
                DropDownList DDItems = (DropDownList)gvDetails.FooterRow.FindControl("DDL_Items");
                TextBox txtQty = (TextBox)gvDetails.FooterRow.FindControl("txtftrQty");
                TextBox txtNeedBy = (TextBox)gvDetails.FooterRow.FindControl("txtftrNeededBy");

                //Add the items to the gridview
                DataTable dt = new DataTable();

                //Assign the viewstate to the datatable
                dt = (DataTable)ViewState["Data"];

                DataRow dr = dt.NewRow();

                dr["Item"] = DDItems.SelectedValue;
                dr["ItemText"] = DDItems.SelectedItem.Text;
                dr["Quantity"] = txtQty.Text;
                dr["NeedBy"] = txtNeedBy.Text;

                //Add the datarow to the datatable
                dt.Rows.Add(dr);

                if (((DataTable)ViewState["Data"]).Rows.Count > 0)
                {
                    DD_ItemCategories.Enabled = false;
                    btnSubmit.Enabled = true;
                }

                //Now bind the datatable to the gridview
                gvDetails.DataSource = dt;
                gvDetails.DataBind();

                //Add the details to viewstate also
                ViewState["Data"] = dt;
            }

            //if (e.CommandName == "Delete")
            //{              
            //    int ind = Int32.Parse(e.CommandArgument.ToString());

            //    int itemID = Convert.ToInt32(gvDetails.DataKeys[ind].Values[0].ToString());

            //    ((DataTable)ViewState["Data"]).Rows[ind].Delete();
            //    ((DataTable)ViewState["Data"]).AcceptChanges();

            //    DeleteGridItem(itemID);

            //    gvDetails.DataSource = (DataTable)ViewState["Data"];
            //    gvDetails.DataBind();
            //}
        }

     protected void gvDetails_RowDataBound(object sender, GridViewRowEventArgs e)
        {
            OraSPDataExchange.OraSPDataExchangeClient objServiceClient2 = new OraSPDataExchange.OraSPDataExchangeClient();
            DataSet dsitems = new DataSet();
            dsitems = objServiceClient2.getItems(Convert.ToInt32(DD_ItemCategories.SelectedValue));

            if (e.Row.RowType == DataControlRowType.DataRow)
            {
                DropDownList ddlDropDownList = (DropDownList)e.Row.FindControl("DDL_Items");
                if (ddlDropDownList != null)
                {
                    ddlDropDownList.DataSource = dsitems.Tables[0];

                    ddlDropDownList.DataTextField = "DESCRIPTION";
                    ddlDropDownList.DataValueField = "INVENTORY_ITEM_ID";
                    ddlDropDownList.DataBind();

                    ddlDropDownList.SelectedValue = gvDetails.DataKeys[e.Row.RowIndex].Values[0].ToString();
                }
            }

            if (e.Row.RowType == DataControlRowType.Footer)
            {
                DropDownList ddlDropDownList = (DropDownList)e.Row.FindControl("DDL_Items");
                if (ddlDropDownList != null)
                {
                    ddlDropDownList.DataSource = dsitems.Tables[0];

                    ddlDropDownList.DataTextField = "DESCRIPTION";
                    ddlDropDownList.DataValueField = "INVENTORY_ITEM_ID";
                    ddlDropDownList.DataBind();

                    ddlDropDownList.Items[0].Selected = true;
                }
            }
        }

        private int CheckUniqueData(int itemid)
        {

            for (int i = 0; i < gvDetails.Rows.Count; i++)
            {
                string itemval = gvDetails.Rows[0].Cells[0].Text;
                if (Convert.ToInt32(itemval) == itemid)
                    return 1;
            }
            return 0;
        }

        protected void btnSubmit_Click(object sender, EventArgs e)
        {
            //Dictionary<string, int> retvalues = new Dictionary<string, int>();

            int retvalues = CreateHeaderBlock();

            //int dItemID = retvalues["vItemID"];
            //int dItemCat = retvalues["vItemCatID"];

            //CreateDetailBlock(dItemID, dItemCat);

            Response.Write("<script>alert('Requisition submitted successfuly......'); window.location.href='http://portal.joshworld.local/SitePages/Home.aspx';</script>");

        }

        public int CreateHeaderBlock()
        {
            using (SPSite site = new SPSite("http://portal.joshworld.local/EFlowCenter"))
            {
                using (SPWeb Web = site.OpenWeb())
                {
                    Web.AllowUnsafeUpdates = true;

                    // Open List
                    SPList list = Web.Lists["Requisition_Master"];

                    // Add new item in List
                    SPListItem item = list.Items.Add();

                    item["Request ID"] = "";
                    item["Requester"] = lbl_Rname.Text;
                    item["Email"] = lbl_REmail.Text;
                    item["Department"] = lbl_RDept.Text;
                    item["Location"] = lbl_RLocation.Text;
                    item["Header_ItemCategory"] = DD_ItemCategories.SelectedItem.Text;
                    item["Header_Remarks"] = txtRemarks.Text;

                    item.Update();

                    // Get Item ID
                    int reqId = item.ID;

                    SPListItem uitem = list.GetItemById(reqId);
                    uitem["Request ID"] = reqId.ToString();

                    uitem.Update();

                    Web.AllowUnsafeUpdates = false;

                    // Dictionary<string, int> values = new Dictionary<string, int>();

                    // values.Add("vItemID", listItemId);
                    // values.Add("vItemCatID", Convert.ToInt32(DD_ItemCategories.SelectedValue));
                    // values.Add("hRequester", lbl_Rname.Text);
                    // values.Add("hLocation",lbl_RLocation.Text);

                    CreateDetailBlock(reqId, lbl_Rname.Text, lbl_RLocation.Text, Convert.ToInt32(DD_ItemCategories.SelectedValue), txtRemarks.Text);

                    return 1;

                }
            }
        }

        private void CreateDetailBlock(int headerreqID, string headerrequester, string headerloc, int headerItemCategory, string headerRemarks)
        {
            using (SPSite site = new SPSite("http://portal.joshworld.local/EFlowCenter"))
            {
                using (SPWeb Web = site.OpenWeb())
                {
                    //Web.AllowUnsafeUpdates = true;

                    // Open List
                    SPList list = Web.Lists["Requisition_Detail"];

                    //Loop through GridView Items
                    foreach (GridViewRow rowItem in gvDetails.Rows)
                    {
                        // Find Controls and read values here
                        string KeyItemID = gvDetails.DataKeys[rowItem.RowIndex].Values["Item"].ToString();

                        Label lblitemdesc = (Label)rowItem.FindControl("lblitemdesc");
                        Label lblitemqty = (Label)rowItem.FindControl("lblQty");
                        Label lblNeedBy = (Label)rowItem.FindControl("lblNeededBy");

                        Web.AllowUnsafeUpdates = true;

                        // Add new item in List
                        SPListItem item = list.Items.Add();

                        item["Request ID"] = headerreqID;
                        item["Header_Requester"] = headerrequester;
                        item["Header_Location"] = headerloc;
                        item["Item ID"] = Convert.ToInt32(KeyItemID);
                        item["Item Description"] = lblitemdesc.Text;
                        item["Quantity"] = Convert.ToInt32(lblitemqty.Text);
                        item["Needed_By"] = lblNeedBy.Text;
                        item["Header_Remarks"] = headerRemarks;

                        item.Update();

                        Web.AllowUnsafeUpdates = false;

                    }
                }
            }
        }

        private void setPortalUserInformation(string portalUser)
        {
            lbl_ROpUnit.Text = portalUser;
            using (SPSite site = new SPSite("http://portal.joshworld.local/EFlowCenter"))
            {
                using (SPWeb Web = site.OpenWeb())
                {
                    //Web.AllowUnsafeUpdates = true;

                    // Open List
                    SPList list = Web.Lists["Req Approval Hierarchy"];

                    //SPListItem myItems = list.GetItemByIdSelectedFields(5, "EMAIL ADDRESS");
                    //SPListItem item = null;

                    //SPQuery query = new SPQuery();
                    const string camlQuery = @"<Query><Where><Eq><FieldRef Name='EMAIL_x0020_ADDRESS' /><Value Type='Text'>zahid.zia@samba.com.pk</Value> </Eq> </Where></Query>";

                    SPQuery query = new SPQuery();
                    query.Query = camlQuery;

                    // Retrieving the data from the List

                    SPListItemCollection items = list.GetItems(query);

                    foreach (SPListItem objListItem in items)
                    {
                        lbl_Rname.Text = objListItem["Title"].ToString();
                    }
                }
            }
        }

        private void showinfo(string portal_user)
        {
            string camlQuery = @"<Where><Eq><FieldRef Name='EMAIL_x0020_ADDRESS' /><Value Type='Text'>" + portal_user + "</Value></Eq></Where>";
            using (SPSite objSite = new SPSite("http://portal.joshworld.local/EFlowCenter"))
            {
                using (SPWeb objWeb = objSite.OpenWeb())
                {
                    // Building a query
                    SPQuery query = new SPQuery();
                    query.Query = camlQuery;

                    // Retrieving the data from the List
                    SPList objList = objWeb.Lists["Requisition Hierarchy"];
                    SPListItemCollection items = objList.GetItems(query);

                    int licount = items.Count;
                    if (licount == 0)
                        lbl_Rname.Text = "Zero";
                    else
                        lbl_Rname.Text = licount.ToString();

                    foreach (SPListItem objListItem in items)
                    {
                        lbl_Rname.Text = objListItem["Title"].ToString();
                        lbl_RLocation.Text = objListItem["LOCATION"].ToString();
                        lbl_RDept.Text = objListItem["DEPARTMENT_x0020_NAME"].ToString();
                        lbl_REmail.Text = objListItem["EMAIL_x0020_ADDRESS"].ToString();
                    }

                    DD_ItemCategories.Items.FindByText(itemcat).Selected = true;
                }
            }
        }

        protected string ClearDomain(string sItem)
        {
            int sLoc = (sItem.IndexOf("\\") + 1);
            string sOutPut;
            sOutPut = sItem.Substring(sLoc);
            return sOutPut;
        }

        private void fetchReqMaster()
        {
            string camlQuery = @"<Where><Eq><FieldRef Name='Title' /><Value Type='Text'>" + reqId + "</Value></Eq></Where>";
            using (SPSite objSite = new SPSite("http://portal.joshworld.local/EFlowCenter"))
            {
                using (SPWeb objWeb = objSite.OpenWeb())
                {
                    // Building a query
                    SPQuery query = new SPQuery();
                    query.Query = camlQuery;

                    // Retrieving the data from the List
                    SPList objList = objWeb.Lists["Requisition_Master"];
                    SPListItemCollection items = objList.GetItems(query);

                    foreach (SPListItem objListItem in items)
                    {
                        lbl_Rname.Text = objListItem["Requester"].ToString();
                        lbl_RLocation.Text = objListItem["Location"].ToString();
                        lbl_RDept.Text = objListItem["Department"].ToString();
                        lbl_REmail.Text = objListItem["Email"].ToString();

                        DD_ItemCategories.ClearSelection();
                        itemcat = objListItem["Header_ItemCategory"].ToString();

                    }
                    DD_ItemCategories.Items.FindByText(itemcat).Selected = true;
                }
            }
        }

        private void fetchReqDetails()
        {
            gvDetails.DataSource = null;
            gvDetails.DataBind();

            string camlQuery = @"<Where><Eq><FieldRef Name='Title' /><Value Type='Text'>" + reqId + "</Value></Eq></Where>";
            using (SPSite objSite = new SPSite("http://portal.joshworld.local/EFlowCenter"))
            {
                using (SPWeb objWeb = objSite.OpenWeb())
                {
                    // Building a query
                    SPQuery query = new SPQuery();
                    query.Query = camlQuery;

                    // Retrieving the data from the List
                    SPList objList = objWeb.Lists["Requisition_Detail"];
                    SPListItemCollection items = objList.GetItems(query);

                    //Add the items to the gridview
                    DataTable dtx = new DataTable();                        

                    //Assign the viewstate to the datatable     
                    dtx = (DataTable)ViewState["Data"];

                    foreach (SPListItem objListItem in items)
                    {      
                        DataRow dr = dtx.NewRow();

                        dr["Item"] = objListItem["Item_x0020_ID"].ToString();
                        dr["ItemText"] = objListItem["Item_x0020_Description"].ToString();
                        dr["Quantity"] = objListItem["Quantity"].ToString();
                        dr["NeedBy"] = objListItem["Needed_By"].ToString();

                        //Add the datarow to the datatable
                        dtx.Rows.Add(dr);

                        //Add the details to viewstate also
                        ViewState["Data"] = dtx;
                    }

                    //BindGridView();

                    if (((DataTable)ViewState["Data"]).Rows.Count > 0)
                    {
                        DD_ItemCategories.Enabled = false;
                        btnSubmit.Enabled = true;
                    }

                    //Add the items to the gridview
                    DataTable dtgrid = new DataTable();

                    //Assign the viewstate to the datatable
                    dtgrid = (DataTable)ViewState["Data"];

                    //Now bind the datatable to the gridview
                    gvDetails.DataSource = dtgrid;
                    gvDetails.DataBind();

                }
            }
        }

        public void DeleteGridItem(int gridItemId)
        {
            string camlQuery = @"<Where><Eq><FieldRef Name='Item_x0020_ID' /><Value Type='Text'>" + gridItemId + "</Value></Eq></Where>";
            using (SPSite objSite = new SPSite("http://portal.joshworld.local/EFlowCenter"))
            {
                using (SPWeb objWeb = objSite.OpenWeb())
                {
                    objWeb.AllowUnsafeUpdates = true;

                    // Building a query
                    SPQuery query = new SPQuery();
                    query.Query = camlQuery;

                    // Retrieving the data from the List
                    SPList objList = objWeb.Lists["Requisition_Detail"];
                    SPListItemCollection items = objList.GetItems(query);
                    items.Delete(0);

                    objWeb.AllowUnsafeUpdates = false;
                }

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T11:15:06.270

实际上刷新与回发不同

如果您在按钮发布后进行刷新，则该按钮内的方法将再次执行

这是它的正常行为这是它应该做的基本上来自浏览器的 MSG 将

警告这将像这样发生：

**要显示此页面，Firefox 必须发送将重复之前执行的任何操作（例如搜索或订单确认）的信息。**

如果您愿意，您可以做一件事是捕捉页面何时刷新

以及当页面进行回发并控制您需要在每个页面中执行的操作时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:57:39.060

页面刷新时重新执行的代码是您没有在代码块内绑定gridview

```
if(!IsPostBack){} 
```

如果您在此块之外绑定gridview，您将重新执行每次刷新的代码。

接下来是将删除代码放在 RowDeleting 事件或 RowCommand 事件中。如果要在 RowEditing 事件中执行删除操作，请将链接按钮/按钮的命令名称更改为“删除”以外的名称。

例如

现在访问 RowCommand 中的删除代码如下

```
if(e.CommandName == "Del"){} 
```

# caching - 如何查找 MIPS 指令的缓存命中和未命中？

> ID：13699656
> 
> 赞同：0
> 
> 时间：2012-12-04T09:27:31.720
> 
> 标签：caching, assembly, mips

我的问题是关于我的计算机体系结构课上的家庭作业。如果有人能向我解释如何解决这个问题，我将不胜感激！

问题：假设主存储器由 2^24 个字组成。我们得到一个包含 2^10 = 1024 个块的直接映射缓存。每个块是一个 MIPS 字（32 位）。
每当发生写未命中时，缓存都会使用回写。最初，缓存是空的。假设$sp中存储的地址是0 mod 4，那么`4($sp)` 地址也是0 mod 4，以此类推。对于以下序列中的每条指令，将其标记为缓存命中或未命中。如果是未命中，则指示写入或读取的块（例如，根据其内存地址范围）。

```
lw $s0, 4($sp)
lw $s0, 8($sp)
sw $s0, 8($sp)
sw $s1, 4($sp)
lw $s0, 4($sp) 
```

我如何知道每条指令是缓存命中还是未命中？我什至不确定这意味着什么。

# java - 项目清单项中的语法 java netbeans 7 错误

> ID：13699658
> 
> 赞同：-2
> 
> 时间：2012-12-04T09:27:40.427
> 
> 标签：java, mysql, netbeans-7

我在 java 代码中有错误，您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取正确的语法，以便在线程“AWT-EventQueue-0”中的第 1 行“AWT-EventQueue-0”中的“异常：空字符串”中使用正确的语法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:19:34.087

导致此异常的原因可能有很多。代码片段将更有助于检测原因。

# dns - 在内部向 AWS VPC 提供少量 CNAME 的最简单配置是什么

> ID：13699659
> 
> 赞同：2
> 
> 时间：2012-12-04T09:27:41.237
> 
> 标签：dns, amazon-web-services, load-balancing, vpc

我有一个多服务器、多部分的应用程序，我正在迁移到云中。我正在使用 Elastic Load Balancing (ELB) 来共享相同类型实例的负载并处理端口转发。ELB（甚至是内部的）获得生成的 dns 名称，并且由于 ELB 的实现，ip 不可靠。通常的建议是使用 Route 53、dyndns 或类似的设置公共别名。这在大多数情况下都很好用，而且确实适用于我对负载平衡器的外部访问。

我的问题是因为我想减少（如果不是消除）我用于开发、测试、登台和生产的多个 VPC 之间的配置差异。如果我能够为 ELB 提供别名以在 VPC 中使用，我就可以做到这一点。

本质上，我想设置 CNAME 仅供内部使用，但需要最少的填充。这意味着我需要：

*   易于安装（最好是 RPM）
*   易于配置（命令行界面会很好，或者至少是少量文件）。我需要在创建时生成配置以获取新创建的 ELB dns 名称。

我看过：

*   BIND - 配置很糟糕，但如果我可以得到一个配置文件*<-- 在此处插入*CNAMES 就可以了。
*   Dnsmasq - 不错的配置，我在家里使用它，但对 CNAME 的主要限制意味着它不可用。
*   TinyDNS/djbdns - 手动构建和安装，RPMs 不可用，FAQ 很有帮助地说 *“自己编译 djbdns 是微不足道的。如果你觉得自己不能胜任，请重新考虑是否应该管理名称服务器。”*

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T05:06:28.997

为什么不考虑使用诸如[Salt](http://docs.saltstack.org/en/latest/topics/index.html)、[Chef](http://www.opscode.com/chef/)或[Puppet](http://puppetlabs.com/)之类的东西，而不是 RPM ？设置过程并不太难，它允许您根据主机名（dev、test、staging、prod）设置环境，然后推送唯一的配置值，同时保持整体配置相同。

# c# - 如何使用对象 C# 过滤数据网格

> ID：13699672
> 
> 赞同：2
> 
> 时间：2012-12-04T09:28:32.543
> 
> 标签：c#, winforms

我有一个`DataGridView`充满对象的对象，现在我想要一个搜索/过滤功能`DataGrid`。我正在尝试使用一个文本框，您可以在其中输入一个文本字符串，并且在我的脑海中想要将此字符串与所有对象字段进行匹配（例如，如果对象是电子邮件，我想将字符串与主题字段进行匹配）数据网格。

如果有任何帮助，`DataGrid.DataSource`像这样声明（不要担心方法，问题是过滤器/搜索功能）：

```
var newMess = LM.GetNewMessages();
if (newMess.Count > 0)
{
    for (int i = 0; i < newMess.Count; i++)
    {
        LM.InboxTemp.Insert(0, newMess[i]);
    }
}
BindingSource source = new BindingSource();
source.DataSource = LM.InboxTemp; //List with Objects
dgNewMess.DataSource = source;
dgNewMess.Columns[0].AutoSizeMode = DataGridViewAutoSizeColumnMode.AllCells;
dgNewMess.Columns[1].AutoSizeMode = DataGridViewAutoSizeColumnMode.AllCells;
dgNewMess.Columns[2].AutoSizeMode = DataGridViewAutoSizeColumnMode.AllCells;
dgNewMess.Columns[3].AutoSizeMode = DataGridViewAutoSizeColumnMode.AllCells; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T09:32:05.147

如果你想过滤收集的电子邮件，你可以使用 Linq。您还可以使用`ForEach`的方法`List<Email>`将新过滤的电子邮件插入到您的`InboxTemp`列表中：

```
string filter = txtFilter.Text;
LM.GetNewMessages()
  .Where(msg => msg.Subject.Contains(filter))
  .ToList()
  .ForEach(msg => LM.InboxTemp.Insert(0, msg)); 
```

*使用[Equin.ApplicationFramework.BindingListView](http://blw.sourceforge.net/)*更新*，您可以通过这种方式分配数据源*

 *```
dgNewMess.DataSource = new BindingListView<Email>(LM.InboxTemp); 
```

然后应用过滤器

```
string filter = txtFilter.Text;
BindingListView<Email> emails = (BindingListView<Email>)dgNewMess.DataSource;
emails.Filter = new PredicateItemFilter<Email>(msg => msg.Subject.Contains(filter)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:35:39.810

看看这个项目：[DataGridView Filter Popup](http://www.codeproject.com/Articles/33786/DataGridView-Filter-Popup)*

# ios - iOS 应用中的自定义广告

> ID：13699675
> 
> 赞同：1
> 
> 时间：2012-12-04T09:28:42.917
> 
> 标签：ios, cocoa-touch, web, ads

我想在我的 iOS 应用中加入广告。我不想使用 iAd，因为我的应用程序没有太多印象（这是一个为非常有限的受众制作的应用程序），而且由于特殊的受众群体，我想展示可能更有趣的特殊广告为他们。

所以我收集到我必须为我的应用程序实现一个自定义广告系统。我怎样才能最好地继续下去？我可以使用什么视图来展示我的广告？我想过在 UIWebView 中以动画 gif 的形式显示它们，每次有人看到/点击 gif 时，我都会向网络服务器发送一个请求以增加一个计数器。现在我不希望网络服务器对任何请求做出反应，而只对我的应用程序发出的请求做出反应。我怎么能保证呢？我可以使用哪些技术？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T10:41:59.053

您可以使用 imageview 来显示广告，其余的广告网络提供商有很多，您可以在其中创建自己的广告，管理它们，还可以查看访问者。一些供应商是revmob、chartboost、admob等。

# android - 如何提示停止警报响起并启动警报对话框

> ID：13699676
> 
> 赞同：0
> 
> 时间：2012-12-04T09:28:42.877
> 
> 标签：android, android-alertdialog, alarm

先生，我如何提示停止警报响起然后在其他班级启动警报对话框？此代码总是强制关闭。如果我删除停止时钟的提示部分，闹钟将不会停止响铃，并且警报对话框仅显示一次。如果它收到另一条消息，它不会再次触发警报对话框。请帮我。提前感谢您的帮助

```
for (SmsMessage msg : messages) {
        if (msg.getMessageBody().contains("alert")) {

            Uri alert = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_ALARM);
             if(alert == null){
                 // alert is null, using backup
                 alert = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
                 if(alert == null){  
                     // alert backup is null, using 2nd backup
                     alert = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_RINGTONE);               
                 }
             }
             Ringtone r = RingtoneManager.getRingtone(context.getApplicationContext(), alert);
             AudioManager audioManager = (AudioManager)context.getSystemService(Context.AUDIO_SERVICE);
             int maxVolumeAlarm = audioManager.getStreamMaxVolume(AudioManager.STREAM_ALARM);

             audioManager.setStreamVolume(AudioManager.STREAM_ALARM, maxVolumeAlarm,AudioManager.FLAG_REMOVE_SOUND_AND_VIBRATE);

             r.play();

//prompt
alertDialogBuilder = new AlertDialog.Builder(
            context);
    alertDialogBuilder.setTitle("Alarm Received");

            alertDialogBuilder
            .setMessage("Stop alarm")
            .setCancelable(false)
            .setPositiveButton("OK",new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog,int id) {
                    r.stop();
                    Toast.makeText(getApplicationContext(), "alarm stopped", Toast.LENGTH_LONG).show();
                }
              });

            // create alert dialog
            AlertDialog alertDialog = alertDialogBuilder.create();

            // show it
            alertDialog.show();
                Toast.makeText(context.getApplicationContext(), "alarm started", Toast.LENGTH_LONG).show();

//open alertdialog in other activity        
Intent openInterface = new Intent("proj.receiver.RECEIVERINTERFACE");
            openInterface.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            context.startActivity(openInterface);

        }//end if
    }//end for 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:05:49.107

我完全不理解你，但根据我的理解：

1.  对话框中的“r.stop()”是使警报停止的原因。因此，如果您不希望闹钟停止，请将其从那里移开。

2.  只有当“消息”是“警报”（如果）时，对话框才会打开并且警报才会响起，因此如果您希望它发生在不同的消息中，您必须创建自己的“if-elseif”。

3.  如果您想在另一条不同的消息中停止警报（所以第 1 点和第 2 点），您必须将“Ringtone r =....”移到“if”句子之外和/或取决于您想要做什么，之前'for' 语句。

--

要在另一个 Activity 中执行此操作，请使用 Ringtone 变量创建一个静态类，并在创建铃声时将 var 传递给静态类以存储它。然后当新 Activity 打开时，从 StaticClass 中获取 var 以停止响铃。希望能帮助到你。

# jms - 为 HornetQ 服务器使用多个配置文件

> ID：13699678
> 
> 赞同：1
> 
> 时间：2012-12-04T09:28:47.773
> 
> 标签：jms, configuration-files, hornetq

我正在使用 hornetq(2.2.14) 独立服务器。我应该定义大约 1000 个（jms）队列以及它们之间的许多转移和核心桥！

1.  我可以在单独的文件（多个 hornetq-jms.xml 文件）中定义（jms）队列吗？
2.  我能为分流桥和核心桥做什么？（我可以在单独的文件中定义它们吗？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:07:37.260

您可以尝试拆分 xml 文件，并将共享配置包含在不同的 hornetq 实例中。已经有一个问题解释了如何做到这一点：[我们可以将 XML 文件导入另一个 XML 文件吗？](https://stackoverflow.com/questions/5121052/can-we-import-xml-file-into-another-xml-file)

# java - 如何在java中将6.23增加到6.25

> ID：13699680
> 
> 赞同：0
> 
> 时间：2012-12-04T09:28:54.733
> 
> 标签：java

我想在 java 中将 6.23 的值增加到 6.25。现在我打算将双精度转换为字符串而不是使用拆分并取最后两位十进制数字并将它们转换为双精度。而不是使用 if() 条件。java中的任何函数可以为我做到这一点吗？还是有什么其他方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:34:51.783

如果您想在没有精度/舍入误差的情况下对货币进行操作，您可以使用`BigDecimal`. 为了四舍五入到一个整数，您必须调用`divide()`并将`scale`参数设置为 0...

```
BigDecimal precision = new BigDecimal("0.05")
BigDecimal value = new BigDecimal("6.23");
BigDecimal rounded = value.divide(precision, 0, BigDecimal.ROUND_UP).multiply(precision); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T09:35:47.670

```
double value = 6.21;
value = value * 100;
value = Math.round((value + 2.5)/ 5.0) * 5.0;
value = value / 100;
System.out.println(value); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T09:44:25.157

您可以除以 0.05（您的精度步长），四舍五入到最接近的整数，然后再次乘以 0.05：

```
BigDecimal precision = new BigDecimal("0.05");
BigDecimal value = new BigDecimal("6.23");
BigDecimal rounded = value.divide(precision, 0, RoundingMode.HALF_DOWN)
                          .multiply(precision);
System.out.println("rounded = " + rounded); //prints 6.25 
```

然后，您可以在实用程序方法中提取它：

```
public class Test {

    private static final BigDecimal PRECISION = new BigDecimal("0.05");

    public static void main(String[] args) {
        BigDecimal value = new BigDecimal("6.23");
        System.out.println("value = " + value + " / rounded = " + roundCurrency(value));
        value = new BigDecimal("6.22");
        System.out.println("value = " + value + " / rounded = " + roundCurrency(value));
        value = new BigDecimal("6.20");
        System.out.println("value = " + value + " / rounded = " + roundCurrency(value));
        value = new BigDecimal("6.19");
        System.out.println("value = " + value + " / rounded = " + roundCurrency(value));
    }

    public static BigDecimal roundCurrency(BigDecimal value) {
        return value.divide(PRECISION, 0, RoundingMode.HALF_DOWN)
                    .multiply(PRECISION);
    }
} 
```

# php - Zend_Form()中persistData()方法有什么用

> ID：13699696
> 
> 赞同：1
> 
> 时间：2012-12-04T09:29:46.207
> 
> 标签：php, zend-framework

我正在创建表单，我发现了一些名为`persistData()`.

我探索了 Zend_Form 类，但没有文档。

我很好奇它的用处。谁能给我一个解释？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T09:55:46.717

此功能 - 是未来功能计划的一部分。

计划是用它在请求之间的会话中持久化数据——这对于多页表单很有用。但这是一个低优先级的功能，所以开发人员只放置了一个存根；测试套件中还有一个标记为未完成的测试。

[证明链接](http://zend-framework-community.634137.n4.nabble.com/Zend-Form-isErrors-td667975.html)

# linux - 如何在 Unix 和 Linux 中的单个命令中通过管道传输多个命令

> ID：13699703
> 
> 赞同：1
> 
> 时间：2012-12-04T09:30:02.003
> 
> 标签：linux, unix

我希望 o/p 作为所有者列表及其文件名、文件路径和文件大小。我正在使用两个命令来获取 o/p。谁能建议我如何在单个命令中获取 o/p。我使用的命令是：

```
ls -l | awk '{print $3, $4 }' > test.txt 
```

这给了我所有者和目录的列表。

第二个是：

```
find . -size +100k -print0 | xargs -0 ls -sd >tets2.txt 
```

这给了我文件的文件名和大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:35:26.940

有点不明白，你的意思是管它们两个还是在同一行中执行每个命令。稍后做，你可以做

```
ls -l | awk '{print $3, $4 }' > test.txt    ;   find . -size +100k -print0 | xargs -0 ls -sd >tets2.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:51:40.533

第一个命令返回所有者和组，而不是文件名。它仅适用于当前目录。第二个命令也适用于子目录，但仅适用于大文件。两个不相关的命令很难粘合在一起，但如果您的目标是防止`stat`为一个文件调用两次，您可以修改以下 Perl 脚本以满足您的需要：

```
use feature 'say';
while (my $file = glob '*') {
    my @stats = (stat $file)[4,5,7];
    say join "\t", $file,
                   (getpwuid $stats[0])[0],
                   (getgrgid $stats[1])[0],
                   $stats[2];
} 
```

# python - reportlab 表单重用与不断变化的数据

> ID：13699704
> 
> 赞同：0
> 
> 时间：2012-12-04T09:30:11.663
> 
> 标签：python, pdf, reportlab

我正在尝试使用 reportlab 表单来生成具有相同绘图操作的多个页面。这将用于绘制图像和表格，但文档没有详细说明如何使用它。

文件说：

```
def forms(canvas):
    canvas.beginForm('a_form')
    spumoni(canvas)
    canvas.endForm()
    # then do it
    canvas.doForm('a_form') 
```

我不明白这是如何工作的，可以说我的绘图功能是

```
def draw_table(canvas, data, image):
    table = get_table(data)
    table.drawOn(0,0, canvas)
    image.drawOn(100,100, canvas)
    return canvas 
```

如何`canvas.doForm('a_form')`在一个文档的多个页面上调用每组数据？

# hql - 加入查询在休眠中不返回不匹配的记录

> ID：13699705
> 
> 赞同：1
> 
> 时间：2012-12-04T09:30:15.193
> 
> 标签：hql

我有两张桌子`abc`和`device`

美国广播公司：

```
 CREATE TABLE `abc (    
       `Id` INT(11) NOT NULL AUTO_INCREMENT,    
       `empid` INT(11) DEFAULT NULL,    
       `empName` VARCHAR(500) DEFAULT NULL,    
      issueDate DATE DEFAULT NULL,    
       `deviceId` INT(11) DEFAULT NULL,    
       PRIMARY KEY (`allochardwareId`),    
       FOREIGN KEY (`deviceId`) REFERENCES `device` (`deviceId`)    
     ) ENGINE=INNODB  DEFAULT CHARSET=latin1; 
```

设备

```
CREATE TABLE `device` (    
  `deviceId` INT(11) NOT NULL AUTO_INCREMENT,    
  `deviceName` VARCHAR(20) DEFAULT NULL,    
    quantity INT(11) DEFAULT NULL,     
       serialNo VARCHAR(20) DEFAULT NULL  
  `deviceTypeId` int(11) DEFAULT NULL,    
    PRIMARY KEY (`deviceId`),FOREIGN KEY (deviceTypeId`) REFERENCES `deviceType` (`deviceTypeId`);    
) ENGINE=INNODB DEFAULT CHARSET=latin1; 
```

映射文件为`ABC`

```
<many-to-one name="device" class="com.model.device" cascade="all" >
   <meta attribute="default-value">new Device()</meta>
   <column name="deviceId" />
</many-to-one> 
```

我的要求是

*   当用户从 UI 搜索时`deviceName`，它将获取数据第一个表和分配的相应员工 ID。
*   如果没有赋值需要返回空值

我如何在 HQL 中编写这个我已经在 SQL 中编写了一个示例查询，它工作正常，但我不知道如何将其转换为 HQL。

这是 SQL 查询

```
SELECT *  
FROM abc 
LEFT JOIN device 
ON device.deviceId=abc.deviceId where device.serialNo="ee" and abc.empid="6" 
```

我将相应的 HQL 写为

```
select abc from ABC ABC LEFT JOIN abc.device where device.serialNo="ee" 
```

在这里它只返回两个表中的匹配记录。我需要以这样一种方式检索记录，如果在另一个表中找不到记录，即使不匹配也会显示空值。例如，某些记录在设备中可用，但在 ABC 中不可用，序列号=“ee”也需要显示。

# objective-c - iOS：检测 NSData 的正确编码

> ID：13699706
> 
> 赞同：2
> 
> 时间：2012-12-04T09:30:24.123
> 
> 标签：objective-c, ios, nsstring, nsdata, nsstringencoding

我有一个`NSData`代表对象的`NSString`对象。我`-[NSString initWithData:encoding:]`用来获取字符串。现在的问题是我怎么知道正确的编码类型？

谢谢。

编辑：我测试并发现：假设`NSData`是用 A 编码，我尝试使用编码 B 来创建`NSString`. 有时字符串会为零，但字符串不能为零，这是一个混乱的代码。所以我无法通过测试每种编码类型来获得正确的字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T08:40:25.657

如果数据来自文件，您可以尝试`+[NSString stringWithContentsOfFile:usedEncoding:error:]`. 但该方法似乎只尝试了几种编码。[ICU](http://site.icu-project.org/)库支持更多编码。

# java - 在哪里添加许可证？

> ID：13699715
> 
> 赞同：2
> 
> 时间：2012-12-04T09:30:50.810
> 
> 标签：java, open-source

> **可能重复：**
> [将许可证放入每个代码文件中？](https://stackoverflow.com/questions/845895/putting-license-in-each-code-file)

如果我想为我的工作添加许可证，例如 Apache 许可证： http: [//opensource.org/licenses/Apache-2.0](http://opensource.org/licenses/Apache-2.0)或 Eclipse 许可证： http: [//opensource.org/licenses/EPL-1.0](http://opensource.org/licenses/EPL-1.0)我需要吗将许可证粘贴到每个源代码文件还是有一个通用区域我可以添加许可证以覆盖所有代码库？

# html - 如何为我的 html/css 对齐图像和文本

> ID：13699716
> 
> 赞同：1
> 
> 时间：2012-12-04T09:30:52.250
> 
> 标签：html, css, html-lists

我的完整 html 和 css 在这里

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML Strict//EN"><META http-equiv="Content-Type" content="text/html; charset=utf-8">

<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head><style>

ul.ItemList, ul.ItemList li
{
    list-style-type: none;
    list-style-position: outside;
    list-style-image: none;
}
ul.ItemList li.Item
{
    padding-top: 15px;
    padding-right: 15px;
    padding-bottom: 15px;
    padding-left: 15px;
    border-top-color: #ddd;
    border-top-width: 1px;
    border-top-style: solid;
}
ul.ItemList div.Desc
{
    font-size: 12px;
    margin-bottom: 10px;
}
ul.ItemList div.Desc span.Title img
{
    width: 60px;
    height: 60px;
    overflow: hidden;
    margin-top: 0px;
    margin-right: 10px;
    margin-bottom: 0px;
    margin-left: 0px;
    float: left;
}
ul.ItemList div.Desc span
{
    line-height: 2.5;
    padding-left: 10px;
}
ul.ItemList div.Desc span.Title
{
    padding-top: 0px;
    padding-right: 0px;
    padding-bottom: 0px;
    padding-left: 0px;
}
ul.ItemList div.Desc span.Title a
{
    font-size: 14px;
    font-weight: bold;
}

</style></head>
<body><center><table cellSpacing="0" cellPadding="0"><tbody><tr>

<td align="middle">

 <br />

 <ul class="ItemList">

  <li class="Item">
    <div class="Desc">
     <span class="Title">
     <a href=""><img alt="" src="" /></a><a href="">Item1</a></span>
    </div>
    Item1
  </li>

  <li class="Item">
    <div class="Desc">
     <span class="Title">
     <a href=""><img alt="" src="" /></a><a href="">Item2</a></span>
    </div>
    Item2
  </li>

 </ul>
</td>

</tr></tbody></table></center></body></html> 
```

没关系，直到我将图像的大小更改为更大的大小，例如

```
ul.ItemList div.Desc span.Title img
{
    width: 100px;
    height: 100px; 
```

我如何改进以使图像始终与右侧的文本很好地对齐，无论图像大小是多少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:36:03.750

将 overflow:auto 添加到 ul.ItemList li.Item

```
ul.ItemList li.Item
{
    padding: 15px;
    border-top: #ddd 1px solid;
    overflow:auto
} 
```

**[演示](http://jsfiddle.net/7kXJu/12/)**

# javascript - 是否有类似 matlab 的 JavaScript 编辑器？

> ID：13699724
> 
> 赞同：3
> 
> 时间：2012-12-04T09:31:20.190
> 
> 标签：javascript, editor

我是一名 matlab 程序员，开始使用 javascript。我想知道是否有任何类似 matlab 前端的 JavaScript 编程工具（编辑器）？这个功能在matlab中非常棒：

*   语法检查
*   即时代码分析
*   集成控制台
*   调试（设置停止点，逐步等...）

JavaScript有类似的东西吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:37:05.943

您可以使用 Aptana 之类的东西以及 js lint 来辅助编辑和检查。对于 JavaScript，调试器就是浏览器。Chrome 开发人员工具或 Firefox 的 firebug 具有所有这些功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T09:39:06.797

你可以试试 ：

*   [阿普塔纳工作室 3](http://www.aptana.com/)
*   [视觉工作室速成版 2012](http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-products)
*   [基于 JavaScript 的源代码编辑器比较](http://en.wikipedia.org/wiki/Comparison_of_JavaScript-based_source_code_editors)

# iphone - 如何为 UIScrollView 中的内容区域设置背景颜色？

> ID：13699726
> 
> 赞同：2
> 
> 时间：2012-12-04T09:31:20.210
> 
> 标签：iphone, ios, ipad, uiscrollview, uiscrollviewdelegate

我`UIScrollView`在我的应用程序中使用，我的要求是我必须添加背景颜色，`UIScrollView`但是当用户在最顶部或最底部拖动时，除了内容/外侧之外的区域，滚动视图中显示的内容应该就像在中一样以不同的颜色显示`UIWebView`。在 Web 视图中，如果我们在顶部向下拖动或在底部向上拖动，它将显示默认背景图像/灰色，并且 Web 视图内容背景颜色是差异（默认白色）。任何人都可以帮助我实现这一点。

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T11:37:42.180

诀窍是将子视图添加到位于内容上方和下方的 ScrollView。这样，它们仅在向上或向下拖动内容时出现。

```
UIScrollView *scroll = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];

UIView *topView = [[UIView alloc] initWithFrame:CGRectMake(0, -200, scroll.bounds.size.width, 200)];
[topView setBackgroundColor:[UIColor darkGrayColor]];
[scroll addSubview:topView];
[topView release];

UIView *bottomView = [[UIView alloc] initWithFrame:CGRectMake(0, scroll.bounds.size.height, scroll.bounds.size.width, 200)];
[bottomView setBackgroundColor:[UIColor darkGrayColor]];
[scroll addSubview:bottomView];
[bottomView release]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-07T16:44:19.797

只需设置背景颜色。

[scrollview setBackgroundColor:[UIColor whiteColor]];

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T11:17:41.320

为内容添加一个视图，并将滚动视图的颜色设置为与保存内容的视图的颜色不同的颜色。

# c++ - istringstream 对长数字进行四舍五入 - 我该如何防止这种情况？

> ID：13699734
> 
> 赞同：0
> 
> 时间：2012-12-04T09:31:34.163
> 
> 标签：c++, string, stringstream, istringstream

给定以下代码：

```
istringstream i("2.11099999999999999999");

double d;
if (!(i >> d)) {d = 0;}

cout << d << endl; 
```

输出是`2.111`。

我希望能够处理长数字、浮点数（包括浮点数），但是当我将 my 转换`istringstream`为 double 时，我得到一个四舍五入的数字。

我怎样才能防止这种情况？如何保持给定的输入原样？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T09:35:25.467

在这种情况下，您无法阻止它。`double`不能精确表示值 2.11099999999999999999，并且它*可以*表示的值都不能区分 2.11099999999999999999 和 2.111。

[http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)应该告诉你你需要知道的，甚至更多。

如果您使用不同的示例，其中`double`可以表示区分舍入值和未舍入值的值，那么您可以这样做：

```
#include <iostream>
#include <sstream>
#include <iomanip>

int main() {
    std::istringstream iss("2.1109999");
    double d;
    iss >> d;
    std::cout << d << "\n";
    std::cout << std::setprecision(10) << d << "\n";
} 
```

输出：

```
2.111
2.1109999 
```

但是，您应该知道，存储在其中的值`d`并不完全是`2.1109999`：

```
std::cout << std::setprecision(20) << d << "\n"; 
```

输出（在我的机器上，你的可能会有所不同，因为一些运行时库根本不打印到 20 sf）：

```
2.1109998999999999292 
```

那是因为以*二进制*而不是十进制`double`存储值。所以它只能表示终止二进制分数。2.1109999 不是终止二进制分数，原因与三分之一不是终止十进制分数的原因基本相同。

 *因此，有两种方法可以使给定的输入保持原样（即精确地表示该数字）：

1.  不要转换为`double`，将其保留为字符串。
2.  不要转换为`double`，而是查找或编写一个表示小数和/或有理数的库。例如，GMP 库有`mpq_t`或有[Boost.Rational](http://www.boost.org/doc/libs/1_43_0/libs/rational/rational.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:38:00.243

正如所说，你不能有那种精确度。您可以随时增加显示的位数，如下所述：[增加精度](https://stackoverflow.com/questions/6301547/turn-off-scientific-notation-on-float)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T09:46:40.190

在数学空间中有无限个数，a`double`是有限的，即它适合 64 位，因此只有这些值的一个子集被精确表示。实际上 2.111 也没有精确表示，因为虽然数字是用小数点打印的，但在下面它们确实使用二进制，即尾数（52 位精度）和指数加符号位。

由于尾数的精度约为 52 位，因此 2 的 52 次方为 4,503,599,627,370,496

正如你所看到的，这个数字在最初的 4 之后有 15 位，因此你得到了 15 位小数精度。

对于大多数用途，这种精度已经足够了。对于那些需要更高精确度的场合，或者需要大数量和小改动的特殊情况，您需要采用专业技术。有一些图书馆可以为您提供。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T11:00:50.580

您需要将数字存储在双精度以外的其他东西中，这是一种二进制表示。

看看一个将数字存储为十进制表示的库，我知道 boost 有一个，[http://svn.boost.org/svn/boost/sandbox/big_number/libs/multiprecision/doc/html/index。 html](http://svn.boost.org/svn/boost/sandbox/big_number/libs/multiprecision/doc/html/index.html)，但还有很多其他的。

如果这似乎是一个重量级的解决方案，请尝试一次读取 istringstream 一个字符，如果它是一个数字，则将其从 char 转换为 int，然后存储在数组中。

## 未经测试的代码

```
string s = "2.11099999999999999999";
char num[s.size()];
for (int i = 0; i < s.size(); ++i) {
  if (isdigit(s[i])
    num[i] = s[i] - '0';
  else
    num[i] = s[i];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T14:46:54.733

这里有两个单独的转换：从 text 到 double ( `iss >> d`) 的转换，以及从 double 到 text ( `std::cout << d`) 的转换。第一个将输入文本的最佳近似值存储到您的`double`变量中。第二个使用默认精度；它将值四舍五入以适应该精度，并抑制尾随零。这就是你看到的原因`2.111`。如果您想查看更多位数，请使用`setprecision`增加输出中的位数。正如其他人所说，超过 15 位数（输入或输出）的任何内容都是无稽之谈。*

# android - 自定义 android AccelerateDecelerateInterpolator

> ID：13699740
> 
> 赞同：14
> 
> 时间：2012-12-04T09:31:59.530
> 
> 标签：android, animation, interpolation

我正在尝试使用 AccelerateDecelerateInterpolator 并对其进行自定义。我可以看到像 DecelerateInterpolator 这样的插值器有一个“因子”字段，所以你可以改变它的行为。但 AccelerateDecelerateInterpolator 没有。当我使用 AccelerateDecelerateInterpolator 时，我几乎没有注意到插值器正在做任何事情。动画看起来非常线性。那么，有没有办法考虑 AccelerateDecelerateInterpolator 或以任何方式改变它？谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-04-11T14:38:33.940

您可以使用自己的`Interpolator`. 例如，这将是以下的实现`easeInOutQuint`：

```
public class MVAccelerateDecelerateInterpolator implements Interpolator {

    // easeInOutQuint
    public float getInterpolation(float t) {
        float x = t*2.0f;
        if (t<0.5f) return 0.5f*x*x*x*x*x;
        x = (t-0.5f)*2-1;
        return 0.5f*x*x*x*x*x+1;
    }
} 
```

![在此处输入图像描述](../Images/455abaf3449a3e814542f3dd2b01b3f0.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-17T16:42:10.477

我试图将自己的 TimeInterpolator 定义为自定义的 AccelerateDecelerateInterpolator。我对结果不太满意，但它可能会提供一些想法。代码中还有一个因素：0.05f。看看这个：

```
 TimeInterpolator interpolator = new TimeInterpolator() {
        @Override
        public float getInterpolation(float input) {
            return input + 0.05f * (float) Math.sin(2 * Math.PI * input);
        }
    }; 
```

这是更精致的解决方案。切线可能比正弦函数更适合这项工作。该解决方案在开始和结束时都会加速。还有一个决定加速度的因素。

```
 TimeInterpolator interpolator = new TimeInterpolator() {
        private final float mFactor   = 1.1f; // less than pi/2
        private float       oldRetVal;
        private float       oldInputVal;
        private double      initValue = Math.tan(-mFactor);
        private double      endValue  = 2 * Math.tan(mFactor);

        @Override
        public float getInterpolation(float input) {
            if (oldInputVal != input) {
                oldInputVal = input;
                oldRetVal = (float) ((Math.tan(mFactor * (2 * input - 1)) - initValue) / endValue);
            }
            return oldRetVal;
        }
    }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-07T00:44:10.103

Android 已将 PathInterpolatorCompat 添加到 v4 支持库中。现在使用这个：[https](https://gist.github.com/ebabel/8ff41cad01e9ce1dd9ce) : //gist.github.com/ebabel/8ff41cad01e9ce1dd9ce 您可以轻松指定easeInOutQuint、easeInOutQuart 或easeInOutExpo！

```
public static void expand(final View v) {
        v.measure(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.WRAP_CONTENT);
        final int targetHeight = v.getMeasuredHeight();

        if ( v.getHeight() != targetHeight ) {
            // Older versions of android (pre API 21) cancel animations for views with a height of 0 so use 1 instead.
            v.getLayoutParams().height = 1;
            v.setVisibility(View.VISIBLE);

            Animation a = new Animation() {
                @Override
                protected void applyTransformation(float interpolatedTime, Transformation t) {
                    v.getLayoutParams().height = interpolatedTime == 1
                            ? ViewGroup.LayoutParams.WRAP_CONTENT
                            : (int) (targetHeight * interpolatedTime);
                    v.requestLayout();
                }

                @Override
                public boolean willChangeBounds() {
                    return true;
                }
            };

            a.setInterpolator(EasingsConstants.easeInOutQuart);
            a.setDuration(computeDurationFromHeight(v));
            v.startAnimation(a);
        } else {
            Log.d("AnimationUtil", "expand Already expanded ");
        }
    }

/**
 * 1dp/ms * multiplier
 */
private static int computeDurationFromHeight(View v) {
    return (int) (v.getMeasuredHeight() / v.getContext().getResources().getDisplayMetrics().density) * DURATION_MULTIPLIER;
} 
```

不要忘记你的 build.gradle：

```
compile "com.android.support:support-v4:22.2.0" 
```

# email - 在代理后面使用 Powershell 发送邮件

> ID：13699745
> 
> 赞同：8
> 
> 时间：2012-12-04T09:32:12.290
> 
> 标签：email, proxy, powershell-2.0

我正在尝试使用 Powershell 和 GMail 发送电子邮件，而现在，我设法通过以下功能做到了这一点：

```
function sendMail{
    $EmailFrom = “me@gmail.com”
    $EmailTo = “info@company.com”
    $Subject = “Subject”
    $Body = “Hellow”
    $SMTPServer = “smtp.gmail.com”
    $SMTPClient = New-Object Net.Mail.SmtpClient($SmtpServer, 587)
    $SMTPClient.EnableSsl = $true
    $SMTPClient.Credentials = New-Object System.Net.NetworkCredential(“username”, “password”);
    $SMTPClient.Send($EmailFrom, $EmailTo, $Subject, $Body)

    Write-Host "All done!"
} 
```

如果不是我们在网络中使用代理，这个脚本就可以正常工作。如何修改此功能以便能够结合代理发送电子邮件。
换句话说，我如何连接到代理服务器并使用外部 SMTP 服务器发送电子邮件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-11T19:02:59.387

HTTP 和 HTTPS 代理不允许 SMTP 连接通过它们。

如果您使用的是 SOCKS 代理，那么您可以通过它建立所有 TCP 连接，包括使用 TCP 的 SMTP 连接。

然后，您可以使用[WideCap](http://widecap.ru/en/)对所有应用程序进行 socksify，或者您可以使用支持代理的[Component pro .Net SMTP 客户端](http://www.componentpro.com/doc/mail/Connecting-through-a-proxy-server3.htm)

# javascript - 如何获取表单中的字段名称

> ID：13699751
> 
> 赞同：1
> 
> 时间：2012-12-04T09:32:48.077
> 
> 标签：javascript, asp.net-mvc, kendo-ui

我有一个表格，包含不同的字段（名字，姓氏）。

对于那些，我已经定义为

```
<table>
   <tr>
        <td>
             FirstName:
        </td>         
        <td>
             <input type="text" id="fn" data-bind="value:fn" name="fn" data-type="string"  maxlength="45" />
             <span data-for="fn" class="k-invalid-msg"></span>
        </td>
        <td>
             LastName: 
        </td>        
        <td>
             <input type="text" id="ln" data-bind="value:ln" name="ln" data-type="string" maxlength="45"/>
             <span data-for="ln" class="k-invalid-msg"></span>
        </td>
    </tr>
    <tr>
        <td>
             <a href ="#"><span></span><input type="button" id ="search" value="Search" /></a> 
        </td>
    </tr>
</table> 
```

我想要的是，当用户在文本框中的任何字段输入值时，我想检索用户输入值（名字或姓氏）的“td”字段。

如何获得该字段值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:43:55.933

这是您需要的：

```
$('input').change(function() {
    var label = $(this).parent().prev().text();
    alert(label);
});​ 
```

小提琴：http: [//jsfiddle.net/NUBM2/](http://jsfiddle.net/NUBM2/)

# cocoa-touch - 滚动到 Popover 内 TableView 中的单元格

> ID：13699752
> 
> 赞同：1
> 
> 时间：2012-12-04T09:32:57.130
> 
> 标签：cocoa-touch, resize, tableview, popover, virtual-keyboard

我有一个固定行数（7）的 tableView。每行由一个标签+一个文本字段组成。

当触摸文本文件时，会显示虚拟键盘，这会导致弹出框调整大小，并且在新的大小下，7 行中只有 4 行可见。我想要做的是，每次用户触摸一个新的文本字段时，表格视图都会滚动到包含它的单元格。

我试过了

```
- (void)textFieldDidBeginEditing:(UITextField *)textField{
    CGPoint point = [textField.superview convertPoint:textField.frame.origin toView:self.tableView];
    NSIndexPath *indexPath = [self.tableView indexPathForRowAtPoint:point];
    NSLog(@"Row %d section %d", indexPath.row, indexPath.section);
    [tableView reloadData];
    [tableView scrollToRowAtIndexPath:indexPath atScrollPosition:UITableViewScrollPositionBottom animated:NO];
} 
```

并且

```
- (void)textFieldDidBeginEditing:(UITextField *)textField{
    CGPoint point = [textField.superview convertPoint:textField.frame.origin toView:self.tableView];
    CGPoint contentOffset = tableView.contentOffset;
    contentOffset.y += (point.y - self.navigationController.navigationBar.frame.size.height); // Adjust this value as you need
    [tableView setContentOffset:contentOffset animated:YES];
} 
```

但它们都不起作用。正在调用该方法（我已设置委托）。由于虚拟键盘引起的调整大小，我很确定它不起作用，但我不知道我可以解决谁。

有什么帮助吗？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T21:00:58.663

以下工作完美。

```
- (void)textFieldDidEndEditing:(UITextField *)textField {

    //  Find the cell displaying this textField and scroll it into the middle of the tableView
    UITableViewCell *cell = (UITableViewCell *)[[textField superview] superview];
    NSIndexPath *cellPath = [self.tableView indexPathForCell:cell];
    [self.tableView scrollToRowAtIndexPath:cellPath atScrollPosition:UITableViewScrollPositionMiddle animated:YES];
} 
```

# video - MPMoviePlayerPlaybackDidFinishNotification 从未调用，电影循环

> ID：13699759
> 
> 赞同：0
> 
> 时间：2012-12-04T09:33:32.717
> 
> 标签：video, ios6, notifications, mpmovieplayercontroller, infinite-loop

尝试制作电影循环，但 MPMoviePlayerPlaybackDidFinishNotification 在视频结束时永远不会调用。

这是我的代码：

```
 NSString *filepath   =   [[NSBundle mainBundle] pathForResource:@"dent4" ofType:@"mp4"];
    NSURL    *fileURL    =   [NSURL fileURLWithPath:filepath];
    self.moviePlayerController = [[MPMoviePlayerController alloc] initWithContentURL:fileURL];
    self.moviePlayerController.movieSourceType = MPMovieSourceTypeFile;
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(moviePlaybackComplete:)
                                                 name:MPMoviePlayerPlaybackDidFinishNotification
                                               object:self.moviePlayerController];

    [self.moviePlayerController.view setFrame:CGRectMake(playButton.frame.origin.x,
                                                    playButton.frame.origin.y,
                                                    playButton.frame.size.width,
                                                    playButton.frame.size.height)];

    self.moviePlayerController.view.backgroundColor = [UIColor colorWithRed:1.0 green:1.0 blue:1.0 alpha:1.0];
    self.moviePlayerController.shouldAutoplay = YES;
    self.moviePlayerController.initialPlaybackTime = 0;
    [self.moviePlayerController setFullscreen:NO];
    self.moviePlayerController.controlStyle = MPMovieControlStyleNone;
    self.moviePlayerController.scalingMode = MPMovieScalingModeAspectFill;
    self.moviePlayerController.repeatMode = MPMovieRepeatModeOne;
    [self.view addSubview:self.moviePlayerController.view];
    [self.moviePlayerController prepareToPlay];
    [self.moviePlayerController play]; 
```

视频正确播放一次，但不触发结束事件。

```
- (void)moviePlaybackComplete:(NSNotification *)note
{
    NSLog(@"END");
    if (note.object == self.moviePlayerController) {
        NSInteger reason = [[note.userInfo objectForKey:MPMoviePlayerPlaybackDidFinishReasonUserInfoKey] integerValue];
        if (reason == MPMovieFinishReasonPlaybackEnded) {
            NSLog(@"REPLAY");
            [self.moviePlayerController prepareToPlay];
            [self.moviePlayerController play];

        }
    }

} 
```

另一件事奇怪的视频在模拟器上正确循环（但 moviePlaybackComplete 从不调用）但在设备上只播放一次。

任何人都可以帮助我吗？我已经看到一些帖子在全屏上说它没有被调用，但我不在全屏模式下。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T20:54:06.127

尝试

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePlaybackComplete:)
                                                     name:MPMoviePlayerPlaybackDidFinishNotification object:self.moviePlayerController.moviePlayer]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T22:26:56.290

您必须将其设置为moviePlayer 而不是moviePlayerController。

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePlaybackComplete:) name:MPMoviePlayerPlaybackDidFinishNotification object:self.moviePlayerController.moviePlayer]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-12T05:55:19.357

**试试这个**

**MPMoviePlayerViewController *mp;**

**1）在viewDidLoad中添加观察者**

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(movieFinishedCallback:) name:MPMoviePlayerPlaybackDidFinishNotification object:self.mp.moviePlayer]; 
```

2）movieFinished回调方法

```
-(void)movieFinishedCallback:(NSNotification *) notification
{
    NSNumber *reason = [[notification userInfo] objectForKey:MPMoviePlayerPlaybackDidFinishReasonUserInfoKey];
    switch ([reason integerValue])
    {
        case MPMovieFinishReasonPlaybackEnded:

            NSLog(@"Movieplayer is stopped");
            break;

        case MPMovieFinishReasonPlaybackError:

            NSLog(@"An error was encountered during playback");
            break;

        case MPMovieFinishReasonUserExited:

            NSLog(@"userExtied");
            break;

        default:
            break;
    }
} 
```

**3) 删除 ViewWillDisappear 中的观察者**

```
 [[NSNotificationCenter defaultCenter]removeObserver:self name:MPMoviePlayerPlaybackDidFinishNotification object:self.mp.moviePlayer]; 
```

# javascript - ReferenceError：未定义 getBanificiarydata

> ID：13699760
> 
> 赞同：-1
> 
> 时间：2012-12-04T09:33:32.983
> 
> 标签：javascript

当我点击打开fancybox时，我遇到了这个错误。

```
ReferenceError: getBanificiarydata is not defined 
```

JavaScript 代码：

```
$(document).ready(function() {
    $(".various").fancybox({
        'position': 'fixed',
        'scrolling': 'no',
        'titleShow': 'false',
        'autoDimensions': 'false',
        'padding': 0,
        'centerOnScroll': false,
        'onComplete': function() {
            $("#fancybox-wrap").css({
                'overflow': 'hidden',
                'top': '50px'
            });
        },
        'onStart': function() {
            $("#fancybox-overlay").css({
                'overflow': 'hidden',
                'top': '0px',
                'left': '0px'
            });
        }
    });
}); 
```

HTML 代码：

```
<td><a class="various" href="#inline" onclick="getBanificiarydata('<?php echo $benefeciary->benID?>','edit');">Edit</a></td> 
```

它打开了fancybox，但只是关闭按钮和黑色腻子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:37:50.263

好吧，这意味着`getBanificiarydata`没有定义全局函数。您需要定义此函数并确保它是全局可用的（如果它是使用另一个函数定义的，请将其分配给`window`对象）。

假设实际功能拼写正确，您可能还会因为拼写错误而出现错误......

# string - 如何将查询字符串获取到 url 单选并提交按钮

> ID：13699771
> 
> 赞同：0
> 
> 时间：2012-12-04T09:34:22.610
> 
> 标签：string, url, button, hyperlink

我不知道如何获取一个 HTML 字符串到这个 url。我想选择第六个选项“对于您每周可能获得的福利金额”，然后选择继续按钮将我带到我想开始的页面。为什么我创建的链接不起作用，正确的链接是什么？它是如何计算出来的？

[https://www.wvuc.org/wvweb/Welcome.aspx?UserOptions=6&bSubmit=Continue](https://www.wvuc.org/wvweb/Welcome.aspx?UserOptions=6&bSubmit=Continue)

**编辑：**

我想要做的是我有一个 excel 用户表单，当打开时，该用户表单是网站页面[https://www.wvuc.org/wvweb/Welcome.aspx](https://www.wvuc.org/wvweb/Welcome.aspx)

我希望它显示而不是第一页的是页面，好像我选择了单选选项“对于您每周可能获得的福利金额”并点击继续或提交按钮，这就是我想要的页面当我第一次打开我的用户表单时出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:13:32.040

我不确定我是否正确理解了您的问题，但我假设如下。

根据从单选按钮中选择的选项，您希望将当前的 HTML 表单提交到选项特定页面。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Sample</title>
<script language="javascript">
function setLink(obj) {

var url = "";
if (obj.value == 1) {
    url = "option1.html";
}
else if (obj.value == 2) {
    url = "option2.html";
}
else if (obj.value == 3) {
    url = "option3.html";
}

//now change the action attribute of form
//and form will be posted to updated link

document.frm1.action = url;

}
</script>
</head>
<body>
<form name="frm1" method="post" action="defaultlink.html">
<input type="radio" name="mylinks" onclick="setLink(this)" value="1" /> Option 1 <br>
<input type="radio" name="mylinks" onclick="setLink(this)" value="2" /> Option 2<br>
<input type="radio" name="mylinks" onclick="setLink(this)" value="3" /> Option 3<br>
<input type="submit" value="Continue" />
</form>
</body>
</html> 
```

在上面的示例中，只要您单击任何单选按钮，它将调用一个 javascript 函数，该函数将更新将提交当前表单的表单链接。

现在，当您单击继续按钮时，表单将提交到由 javascript 函数更改（设置）的链接。

我希望这可能是您正在寻找的答案，如果不是，请多解释一下。

谢谢

# c++ - 无法调用 DLL 中的函数

> ID：13699772
> 
> 赞同：-2
> 
> 时间：2012-12-04T09:34:25.137
> 
> 标签：c++, winapi, dll

无法调用 SCALE 文件夹中的 DLL“sdm00.dll”。我正在尝试调用“SpC”函数，该函数将参数作为“数字”转换为 asci 码+“SpApp|”。但不能加载 DLL &调用函数.PLZ帮助

```
#include <windows.h>  
#include <stdio.h>  
#include <iostream>  

using namespace std;  
typedef string (__cdecl *MYPROC)(string);   

char asc(int a)
{  
    char var;  
    var = (char)a; 
    return var;  
}  

int main()   
{   
    char z;  
    z = asc(20);     
    string str1;  
    string str2;  
    string str3;  
    string retval;     
    str1 = z;  
    str2 = "SpApp|";  
    str3 = str1 + str2;  

    HINSTANCE hinstLib;   
    MYPROC ProcAdd;   
    BOOL fFreeResult, fRunTimeLinkSuccess = FALSE;  

    // Get a handle to the DLL module

    hinstLib = LoadLibrary(TEXT("c:\\SCALE\\sdm00.dll"));   

    //If the handle is valid, try to get the function address

    if (hinstLib != NULL)   
    { 
        ProcAdd = (MYPROC) GetProcAddress(hinstLib, "SpC"); 

        // If the function address is valid, call the function.

        if (NULL != ProcAdd) 
        {
            fRunTimeLinkSuccess = TRUE;
            cout << "Function is called" << endl;
            string MyRetValue;
            MyRetValue = (string)(ProcAdd)(str3); 
            cout << MyRetValue << endl;
        }
        else
        {
            cout << "Function cannot be called" << endl;
        }

        // Free the DLL module.

        fFreeResult = FreeLibrary(hinstLib); 
    } 

    // If unable to call the DLL function, use an alternative.
    if (!fRunTimeLinkSuccess) 
        printf("Message printed from executable\n"); 

    std::cin.get();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:21:28.420

如果 DLL 在 Delphi 中可用而没有错误，那么它肯定不会将 a`std::string`作为输入或返回 a`std::string`作为输出，因为 Delphi 没有`std::string`. 更有可能的是，该函数实际上将 a`char*`作为输入并返回 a`char*`作为输出（如果它改为将 Delphi`String`作为输入并返回 Delphi`String`作为输出，那么您就是 SOL），例如：

```
#include <windows.h>  
#include <stdio.h>  
#include <iostream>  

typedef char* (__cdecl *MYPROC)(char*);   

int main()   
{   
    HINSTANCE hinstLib = LoadLibrary(TEXT("c:\\SCALE\\sdm00.dll"));   
    if (hinstLib == NULL)   
    {
        cout << "Unable to load sdm00.dll! Error: " << GetLastError() << std::endl;
    }
    else
    { 
        MYPROC ProcAdd = (MYPROC) GetProcAddress(hinstLib, "SpC"); 
        if (NULL == ProcAdd) 
        {
            cout << "Unable to load SpC() function from sdm00.dll! Error: " << GetLastError() << std::endl;
        }
        else
        {
            std::string str1 = char(20);  
            std::string str2 = "SpApp|";  
            std::string str3 = str1 + str2;  
            std::string retval = ProcAdd(str3.c_str()); 
            std::cout << retval << std::endl;
        }

        FreeLibrary(hinstLib); 
    } 

    std::cin.get();
    return 0;
} 
```

# iphone - 获取 UITableView 中的所有单元格？

> ID：13699773
> 
> 赞同：2
> 
> 时间：2012-12-04T09:34:29.107
> 
> 标签：iphone, objective-c, ipad, uitableview

我需要获取 UITableView 中所有单元格的数组。我目前使用以下方法：

```
-(NSArray *)allTableViewCellsArray
{
    NSMutableArray *cells = [[NSMutableArray alloc] init];

    for (NSInteger j = 0; j < [tableView numberOfSections]; ++j)
    {
        for (NSInteger i = 0; i < [tableView numberOfRowsInSection:j]; ++i)
        {
            [cells addObject:[tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:i inSection:j]]];
        }
    }

    return cells;
} 
```

我已经取得了一些成功，但是我发现当单元格不可见时它会崩溃。那么，无论它们是否可见，如何获取 UITableView 中所有单元格的数组？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T09:44:17.060

您是否在实现中重复使用表格单元格？如果是这样，我认为您无法从 UITableView 中获取所有 UITableViewCell 对象，因为 UITableView 的单元格重用逻辑。

因此，您需要在代码中“禁用”单元重用机制。这可以通过不在表格视图数据源委托的方法中使`dequeueReusableCellWithIdentifier`单元格出列（即不再使用该方法）`cellForRowAtIndexPath`并通过将 nil 传递给`reuseIdentifier`单元格初始化方法 ( `initWithStyle:reuseIdentifier:`) 的属性来实现。

那么你的`allTableViewCellsArray`方法可能会奏效！但我认为你仍然不会有任何运气来做到这一点。

来自 Apple 文档`[tableView cellForRowAtIndexPath:]`：

> ```
> Return Value
> 
> An object representing a cell of the table or nil if the cell is not visible or indexPath is out of range. 
> ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T10:26:40.050

找到了解决方案。而不是在我选择的任何时间点抓取所有单元格，因为它不起作用；我创建了一个包含所有单元格的数组，这样每个单元格都可以迭代，这意味着我可以将它们全部添加到一个数组中。

我在`willDisplayCell`方法中这样做。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-11-26T08:49:50.910

```
for (UIView *view in TableView.subviews) {
    for (tableviewCell *cell in view.subviews) {
       //do
    }
} 
```

# c# - 使用 C# 动态引用 COM dll

> ID：13699774
> 
> 赞同：0
> 
> 时间：2012-12-04T09:34:29.270
> 
> 标签：c#, .net, dll, com

我的 C# 应用程序将使用第三方 C# COM dll。我想以最漂亮的方式调用该 dll 的所有成员 - 就​​像在将此 dll 添加到**项目引用**和“ **using** ”语句之后。但从另一面来看，我想确定系统中是否不存在 dll 并从我的应用程序中显示异常（就像我可以使用后期绑定一样）。那么我怎样才能捕获 dll missing ，并使用这个 dll，VisualStudio 会在**using**语句后看到所有类型的这个 dll 喜欢呢？

Com dll 正在使用 regasm.exe 进行注册。该工具还可以从 dll 生成 .tlb 文件。也许我可以以某种方式使用这个 .tlb ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:22:13.080

我想最好的方法是从 progID 获取 COM 对象并尝试创建它。

```
Type comType = Type.GetTypeFromProgID(progID);
if (comType == null)
  throw new Exception("COM object not found!);
dynamic comObject = Activbator.CreateInstance(comType);
comObject.SomeOperation(); 
```

此解决方案的附加价值是您的应用程序的一个版本将同时使用 x86 和 x64 COM 对象，因此操作系统版本无关紧要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T10:21:06.537

Visual Studio 会为您生成一个所谓的互操作库。这意味着如果您引用一个被调用的库，`MyCOMLib.dll`它将生成一个名为`MyComLib.Interop.dll`. 此程序集包含您从 .NET 应用程序实例化的.NET 包装器对象（所谓的*Runtime Callable Wrappers ）。*您可以使用[TlbImp.exe](http://msdn.microsoft.com/de-de/library/tt0cf3sx%28v=vs.100%29.aspx) -Tool 自行生成此互操作库。

因此，您实际实例化的不是实际的 COM 对象，而是充当这些 COM 对象的某种代理的 .NET 对象。在内部，他们正在为您调用`[CoCreateInstance](http://msdn.microsoft.com/en-us/library/ms686615.aspx)`or`[CoCreateInstanceEx](http://msdn.microsoft.com/en-us/library/ms680701.aspx)`和 COM 类工厂。他们还管理这些对象的内存处理。（您可以使用 来影响此管理`[Marshal.ReleaseComObject](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.releasecomobject.aspx)`，但您应该[注意到这可能很危险](http://blogs.msdn.com/b/visualstudio/archive/2010/03/01/marshal-releasecomobject-considered-dangerous.aspx)）。

这意味着您的应用程序**总是**与这些互操作程序集一起发布。如果这些程序集不存在（并且您已使用**Project References**引用了它们），则应用程序将不会运行（它将在启动时引发异常）。如果程序集可以加载到您应用程序的**AppDomain**中，则在您创建互操作类型对象之前不会有任何问题。RCW 将`CoCreateInstance`/`CoCreateInstanceEx`与 CLSID 一起调用（互操作程序集通过 TlbImp.exe 工具知道这一点）。如果在注册表中找不到这些类 ID，您的应用程序将引发运行时异常。

检查库是否存在的一个好方法是在应用程序设置期间检查唯一的库 ID 和版本。这些存储在注册表中。您需要知道库的 GUID 和版本，然后您会在`HKLM\Software\Classes\TypeLib\{Guid}\{Version}`.

最好的方法是将您的应用程序与自行安装库的第 3 方可再发行包一起交付。这也确保了其他应用程序不会删除第 3 方类型库。这就是微软使用 Visual C++ 库或 DirectX 的方式。

# php - 如何创建 zip 文件大小最多减少 60 - 65%

> ID：13699775
> 
> 赞同：0
> 
> 时间：2012-12-04T09:34:30.850
> 
> 标签：php, file, compression, zip

在我的应用程序中，我必须创建一些 zip 文件并通过 PHP 将它们发送到邮件中。

创建 Zip 文件功能是使用 `ZipArchive`类完成的。但它将文件大小减少了 35-40%。我的客户想要缩小 60% 以上的尺寸。

ZipArchive 类是否有任何其他库或方法可以做到这一点？

是否可以使用我可以使用 exec() 在我的 php 脚本中执行的 shell 命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:41:47.473

无论您使用什么库，zip 算法都应该相同。所以你不能指望通过使用不同的库来改进。也许不同的存档算法可能更适合您的内容。

压缩率很大程度上取决于被压缩的内容。例如，当压缩仅包含“a”字符的文本文件时，您将获得非常好的压缩率，但对于 mp3 而言，压缩率与示例无关。

# mongoose - Mongoose __v 属性 - 隐藏？

> ID：13699784
> 
> 赞同：61
> 
> 时间：2012-12-04T09:34:51.783
> 
> 标签：mongoose

Mongoose 在 Schema 中添加了一个 '__v' 属性以进行版本控制 - 是否可以全局禁用此功能或将其从所有查询中全局隐藏？

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-12-04T20:28:49.843

您可以通过将`versionKey`选项设置为 来禁用模式定义中的“__v”属性`false`。例如：

```
var widgetSchema = new Schema({ ... attributes ... }, { versionKey: false }); 
```

我认为您不能全局禁用它们，但只能按 Schema 执行。您可以在此处阅读有关 Schema[选项](http://mongoosejs.com/docs/guide.html#versionKey)的更多信息。您可能还会发现[Schema set 方法](http://mongoosejs.com/docs/api.html#schema_Schema-set)很有帮助。

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2014-03-16T11:43:15.880

要禁用不推荐的“__v”属性，请使用[`versionKey`架构选项](http://mongoosejs.com/docs/guide.html#versionKey)：

```
var Schema = new Schema({...}, { versionKey: false }); 
```

要从所有查询中隐藏它，有时也可能[不是您想要](https://stackoverflow.com/a/15025570/2153350)的，请使用[`select`架构类型选项](http://mongoosejs.com/docs/api.html#schematype_SchemaType-select)：

```
var Schema = new Schema({ __v: { type: Number, select: false}}) 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2015-03-26T02:35:02.253

两种方式：

1.  `{versionKey: false}`

2.  当您查询时，例如`model.findById(id).select('-__v')`

`'-'`表示排除字段

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2014-11-22T10:17:25.713

定义一个`toObject.transform`函数，并确保`toObject`在从 mongoose 获取文档时始终调用。

```
var SomeSchema = new Schema({
    <some schema spec>
  } , {
    toObject: {
      transform: function (doc, ret, game) {
        delete ret.__v;
      }
    }
}); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-11-25T07:09:25.813

试试这个，它将从每个查询响应中删除 _v。

```
// transform for sending as json
function omitPrivate(doc, obj) {
    delete obj.__v;
    return obj;
}

// schema options
var options = {
    toJSON: {
        transform: omitPrivate
    }
};
// schema
var Schema = new Schema({...}, options); 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-06-29T06:14:16.960

您可能不想禁用`__v`，其他答案提供了一些链接来回答您为什么不应该禁用它。

我用这个库来隐藏`__v`和`_id`

[https://www.npmjs.com/package/mongoose-hidden](https://www.npmjs.com/package/mongoose-hidden)

```
let mongooseHidden = require("mongoose-hidden")();

// This will add `id` in toJSON
yourSchema.set("toJSON", {
        virtuals: true,
    });

// This will remove `_id` and `__v` 
yourSchema.plugin(mongooseHidden); 
```

Now`__v`将存在，但不会与`doc.toJSON()`.

希望能帮助到你。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2020-09-12T15:30:23.643

您可以使用查询中间件从输出中排除任何字段。在你的情况下，你可以使用这个：

```
// '/^find/' is a regex that matches queries that start with find
// like find, findOne, findOneAndDelete, findOneAndRemove, findOneAndUpdate
schema.pre(/^find/, function(next) {
    // this keyword refers to the current query
    // select method excludes or includes fields using + and -
    this.select("-__v");
    next();
}); 
```

有关文档查找的更多信息： [中间件](https://mongoosejs.com/docs/middleware.html) [选择方法](https://mongoosejs.com/docs/api.html#query_Query-select)

* * *

## 回答 #8

> 赞同：-18
> 
> 时间：2017-09-29T17:57:49.973

是的，很简单，只需编辑里面的“schema.js”文件

`"node_modules\mongoose\lib"`

搜索`"options = utils.options ({ ... versionKey: '__v'..."`并将值更改`"__v"`为`false`。

这将更改所有发布请求。`(versionKey: '__v' => versionKey: false)`

# vbscript - 批量搜索和替换文件夹名称

> ID：13699785
> 
> 赞同：0
> 
> 时间：2012-12-04T09:34:52.827
> 
> 标签：vbscript, batch-file, batch-rename

我正在使用批处理文件（命名为 folder.bat）为“我的文件夹”下的每个文件夹名称添加字符串“_v0_1”（“我的文件夹”下有大约 100 个文件夹）

我正在从包含此行的另一个批处理文件中调用我的批处理（folder.bat）（例如）：

> 调用文件夹 arbiter_logic
> 
> 调用文件夹 arbiter_logic_old

问题是，当文件夹名称长于变量名称（％1）并且我想避免它时，批量重命名文件夹也是如此。

我希望仅当变量 %1 和文件夹名称完全匹配时才会执行重命名操作。这是我的代码：

```
setlocal enabledelayedexpansion
pushd G:\my folder
for /f "tokens=* delims= " %%a in ('dir /b/ad') do (
set x=%%a
set y=!x:%1=%1_v0_1!
ren !x! !y!
)
::==
cd.. 
```

目前不想要的结果是：

> arbiter_logic_v0_1
> 
> arbiter_logic_v0_1_old_v0_1

并且想要的结果是批处理将更改文件夹名称，如下所示：

> arbiter_logic_v0_1
> 
> arbiter_logic_old_v0_1

我假设需要在文件夹名称中应用搜索和替换方法，但我不知道该怎么做。

如果批处理文件不起作用，vb 脚本也将是一个合适的解决方案。

提前致谢。谢伊。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:22:22.217

不需要您的“folder.bat”。您可以简单地重命名主脚本中的目录。

```
ren "g:\my folder\arbiter_logic" "arbiter_logic_v0_1"
ren "g:\my folder\arbiter_logic_old" "arbiter_logic_old_v0_1" 
```

您可以通过使用 FOR 循环来节省一些输入，特别是如果您有很多重命名要做

```
for %%F in (
  "arbiter_logic"
  "arbiter_logic_old"
) do ren "g:\my folder\%%~F" "%%~F_v0_1" 
```

如果你*真的*想在你的主脚本中调用folder.bat，那么你的“folder.bat”可以很简单。

```
@ren "g:\my folder\%~1" "%~1_v0_1" 
```

# bind - div绑定/实时激活所有方法

> ID：13699787
> 
> 赞同：0
> 
> 时间：2012-12-04T09:34:58.150
> 
> 标签：bind, jquery

我有一些动态创建的 div，我正在使用绑定/实时（尝试了两种，相同的结果）来添加点击功能。但是，它返回具有相同类的所有 div。

例子;

我有 3 个动态生成的 div

1 2 3

如果我单击 2，警报方法会显示 1，然后显示 2，然后显示 3。我只需要单击的那个。谢谢！

```
$("#borang_main_form").append('<div class="borang-row" id="'+id+'"><label id="label_'+id+'"></label><input id="textbox_'+id+'" type="text" /></div>').bind("click", function(){alert(id);}); 
```

我已经尝试过了，它有效。

```
$("#borang_main_form").append('<div class="borang-row" id="'+id+'"><label id="label_'+id+'"></label><input id="textbox_'+id+'" type="text" /></div>').delegate("#" + id, "click", function(){alert(id);}); 
```

不过看起来有点脏。有没有更好的方法来处理这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:44:37.200

您可以`$(e.target)`在单击处理程序中使用`function(e){ ... }`来获取引用您实际单击的元素的 jquery 对象。

[http://jsfiddle.net/fDZ4J/1/](http://jsfiddle.net/fDZ4J/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T09:57:42.447

当您使用循环进行迭代时，您使用方法链接，这基本上最终将 n 个事件绑定添加到同一个父项（“#borang_main_form”）

在您的循环中首先附​​加项目，然后在循环之外将事件侦听器添加到各个子元素。

```
for(var i=0; i<3; i++)
{
  var id = i;
  $("#borang_main_form").append('<div class="borang-row" id="'+id+'"><label id="label_'+id+'"></label><input id="textbox_'+id+'" type="text" /></div>')
}
$('.borang-row').on("click", function(){alert($(this).attr('id'));}); 
```

在事件处理函数中 $(this) 将被映射为被点击的项目（事件的触发器），并通过`$(this).attr('id')`你将获得该元素的 id 属性。

# java - 如何在java中获取两个日期之间的交替日期？

> ID：13699790
> 
> 赞同：0
> 
> 时间：2012-12-04T09:35:14.110
> 
> 标签：java, date, datetime

在我的 Java 应用程序中，我使用以下代码打印两个日期之间的所有日期。

```
List<Date> dates = new ArrayList<Date>();

    String str_date ="2012-12-01";
    String end_date ="2012-12-06";

    DateFormat formatter = new SimpleDateFormat("yyyy-mm-dd");
    Date  startDate = (Date)formatter.parse(str_date); 
    Date  endDate = (Date)formatter.parse(end_date);
    long interval = 24*1000 * 60 * 60; // 1 hour in millis
    long endTime =endDate.getTime() ; // create your endtime here, possibly using Calendar or Date
    long curTime = startDate.getTime();
    while (curTime <= endTime) {
        dates.add(new Date(curTime));
        curTime += interval;
    }
    int i=0;
    for(i=0+i;i<dates.size();i++){
        Date d =(Date)dates.get(i);
        String ds = formatter.format(d);    
        System.out.println("             " + ds+"          ");
    } 
```

但我想要 2 种类型的日期，如....

1.  获得替代日 EX：`2012-12-01 2012-12-03 2012-12-06`
2.  我只想在给定的两个日期打印周六和周日。

实际上我正在尝试打印`i+1 or i-1`它使数组索引超出范围..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:49:05.280

我认为您可以尝试这种方式-

```
Date startDate = (Date) formatter.parse(str_date);
Date endDate = (Date) formatter.parse(end_date);

Calendar cal = Calendar.getInstance();
Calendar cal1 = Calendar.getInstance();
cal.setTime(startDate);
cal1.setTime(endDate);
int i=0; // use this for alternative date print
while (!cal.equals(cal1)) {
    cal.add(Calendar.DATE, 1);
    if(cal.get(Calendar.DAY_OF_WEEK)==Calendar.SATURDAY || cal.get(Calendar.DAY_OF_WEEK)==Calendar.SUNDAY)
         System.out.println(cal.get(Calendar.DAY_OF_WEEK)); 
    System.out.println(cal.getTime());

} 
```

# javascript - Primefaces 更新面板（仅限标题）

> ID：13699792
> 
> 赞同：2
> 
> 时间：2012-12-04T09:35:25.107
> 
> 标签：javascript, jsf-2, primefaces, composite-component

我正在为我的 JSF 2.0 项目使用最新版本的 primefaces。

我正在使用一个面板，其中有一些可能由用户填写的参数。现在我想让面板可切换，如果面板被最小化，我想在面板标题中写入一些额外的信息。

如果我使用`update="filterPanel"`.

问题是，如果整个`filterPanel`被重绘，参数值就会丢失。所以我想要的只是更新面板的标题。我检查了 HTML 源代码以获取标题 id，即：`filterFragment:filterPanel_header`.

但是如果我尝试 make `update="filterFragment:filterPanel_header"`，那么我会得到一个异常，说没有具有此 ID 的组件。

有谁可以帮助我吗？

```
<p:panel id="filterPanel"
        header="#{cc.attrs.currentPageBean.filterPanelHeaderContent}"
        toggleable="true" toggleSpeed="300" widgetVar="panelFilter"
        styleClass="magnumband magnumbandsize">
        <p:ajax event="toggle"
            listener="#{cc.attrs.currentPageBean.handleToggle}"
            update="filterPanel" /> 
```

# android - Android Ivy ActionBarSherlock

> ID：13699793
> 
> 赞同：1
> 
> 时间：2012-12-04T09:35:25.340
> 
> 标签：android, dependencies, actionbarsherlock, ivy

是否可以将“apklib”类型用于 Ivy 依赖项？

在我的项目中，我使用的是 ActionBarSherlock 库，我想使用 Ivy 来检索依赖项。

这是我不工作的xml：

```
<dependency
    name="actionbarsherlock"
    conf="binaries"
    org="com.actionbarsherlock"
    rev="4.2.0"
    transitive="true"
    type="apklib" /> 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T20:03:04.780

在这种情况下，只需要一个简单的依赖声明，如下所示：

```
<dependency org="com.actionbarsherlock" name="actionbarsherlock" rev="4.2.0" conf="default"/> 
```

为什么？这个 Maven 模块很特别，[Maven POM](http://search.maven.org/remotecontent?filepath=com/actionbarsherlock/actionbarsherlock/4.2.0/actionbarsherlock-4.2.0.pom)已经配置了一个打包设置为“apklib”的值。这意味着模块的主文件是“actionbarsherlock-4.2.0.apklib”，而不是默认的 .jar 文件。

令人困惑的是，还发布了一个 jar 文件.......要检索它，您可以添加特殊的工件标签：

```
<dependency org="com.actionbarsherlock" name="actionbarsherlock" rev="4.2.0" conf="default">
    <artifact name="actionbarsherlock" type="jar"/>
</dependency> 
```

要查看此模块发布的所有文件，我建议使用[Maven search](http://search.maven.org/#artifactdetails%7Ccom.actionbarsherlock%7Cactionbarsherlock%7C4.2.0%7Capklib)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T01:38:23.663

例如，您可以在 ivy.xml 中拥有：

```
 <configurations>
    <conf name="compiling"/>
  </configurations>
  <dependencies>
    <dependency org="com.actionbarsherlock" name="actionbarsherlock" rev="4.3.1" conf="compiling->master"/> 
```

然后，如果您使用 ant，在 build.xml 中您可以有一个为您准备这些“apklib”文件的目标：

```
 <target name="ivy">
    <taskdef resource="org/apache/ivy/ant/antlib.xml" uri="antlib:org.apache.ivy.ant" classpath="ivy-2.3.0.jar"/>
    <ivy:retrieve conf="compiling" type="apklib" pattern="libs/[artifact].apklib"/>
    <!-- For each apklib artifact you need to unpack it so you can use it. -->
    <unzip src="libs/actionbarsherlock.apklib" dest="apklibs/action-bar-sherlock"/> 
```

现在您在 apklibs/action-bar-sherlock 中拥有了库项目的 src/、res/ 等。

这是一个完整的 build.xml 示例，说明如何构建依赖于多个 Android 库项目的 Android 应用程序的 APK：

```
<?xml version="1.0" encoding="utf-8"?>

<project name="dev" default="release" xmlns:ivy="antlib:org.apache.ivy.ant">

  <!-- According to http://developer.android.com/sdk/requirements.html -->
  <property name="ant.build.javac.source" value="1.6"/>
  <property name="ant.build.javac.target" value="1.6"/>

  <property file="local.properties"/>
  <property file="project.properties" prefix="android.project"/>

  <property name="android.target.dir" value="${sdk.dir}/platforms/${android.project.target}"/>
  <property name="android.jar" value="${android.target.dir}/android.jar"/>
  <property name="apk.name" value="YOUR_APP.apk"/>
  <property name="out.dir" value="build/compiled"/>
  <property name="out.test-classes.dir" value="build/compiled-test"/>
  <property name="test.libs.dir" value="libs/test"/>

  <target name="clean">
    <delete dir="build"/>
    <delete dir="gen"/>
    <delete dir="apklibs"/>
    <delete file="${apk.name}"/>
  </target>

  <target name="ivy">
    <taskdef resource="org/apache/ivy/ant/antlib.xml" uri="antlib:org.apache.ivy.ant" classpath="ivy-2.3.0.jar"/>
    <ivy:retrieve conf="compiling" type="bundle,jar" pattern="libs/[artifact].[ext]"/>
    <ivy:retrieve conf="compiling" type="apklib" pattern="libs/[artifact].apklib"/>
    <unzip src="libs/actionbarsherlock.apklib" dest="apklibs/action-bar-sherlock"/>
    <unzip src="libs/library.apklib" dest="apklibs/view-pager-indicator"/>
    <path id="lib.path.id">
      <fileset dir="libs" includes="*.jar"/>
    </path>
    <ivy:retrieve conf="compiling" type="source" pattern="sources/[artifact].[ext]" sync="true"/>
    <ivy:retrieve conf="packaging" type="bundle,jar" pattern="[artifact]-[revision].[ext]"/>
    <ivy:retrieve conf="testing" type="bundle,jar" pattern="libs/test/[artifact].[ext]"/>
  </target>

  <target name="-check-properties" unless="sdk.dir">
    <echo>
      You need to create a local.properties file with:
      storepass=...the password...
      sdk.dir=...path to Android SDK...
    </echo>
  </target>

  <target name="generate" depends="-check-properties">
    <mkdir dir="gen"/>
    <mkdir dir="build"/>
    <condition property="debug.mode" value="--debug-mode" else="">
      <istrue value="${debug}"/>
    </condition>
    <echo>debug=${debug}</echo>
    <echo>debug.mode=${debug.mode}</echo>
    <exec executable="${sdk.dir}/platform-tools/aapt" failonerror="true">
      <arg value="package"/>
      <arg line="${debug.mode}"/>
      <arg value="-f"/>
      <arg value="-m"/>
      <arg value="--auto-add-overlay"/>
      <arg value="-M"/>
      <arg file="AndroidManifest.xml"/>
      <arg value="-F"/>
      <arg file="build/resources.arsc"/>
      <arg value="-I"/>
      <arg file="${android.jar}"/>
      <arg value="-J"/>
      <arg file="gen"/>
      <arg value="-S"/>
      <arg file="facebook-android-sdk/facebook/res"/>
      <arg value="-S"/>
      <arg file="apklibs/view-pager-indicator/res"/>
      <arg value="-S"/>
      <arg file="barone/res"/>
      <arg value="-S"/>
      <arg file="apklibs/action-bar-sherlock/res"/>
      <arg value="-S"/>
      <arg file="res"/>
      <arg value="--extra-packages"/>
      <arg value="com.facebook.android:com.viewpagerindicator:com.triposo.barone:com.actionbarsherlock"/>
      <arg value="-A"/>
      <arg file="assets"/>
    </exec>
    <taskdef name="buildconfig" classname="com.android.ant.BuildConfigTask"
             classpath="${sdk.dir}/tools/lib/anttasks.jar"/>
    <buildconfig
        genFolder="gen"
        package="com.actionbarsherlock"
        buildType="${debug}"
        previousBuildType=""/>
    <buildconfig
        genFolder="gen"
        package="COM.YOUR.PACKAGE"
        buildType="${debug}"
        previousBuildType=""/>
  </target>

  <target name="compile" depends="clean, ivy, generate">
    <mkdir dir="${out.dir}"/>
    <javac destdir="${out.dir}" debug="true" includeantruntime="false">
      <src path="src"/>
      <src path="facebook-android-sdk/facebook/src"/>
      <src path="apklibs/view-pager-indicator/src"/>
      <src path="barone/src"/>
      <src path="apklibs/action-bar-sherlock/src"/>
      <src path="gen"/>
      <classpath>
        <path refid="lib.path.id"/>
        <pathelement path="${android.jar}"/>
      </classpath>
    </javac>
    <copy todir="${out.dir}">
      <fileset dir="src" excludes="**/*.java"/>
      <fileset dir="gen" excludes="**/*.java"/>
    </copy>
  </target>

  <target name="apk-unsigned" depends="compile">
    <!-- Prepare the .class files and the .properties files. -->
    <taskdef name="jarjar" classname="com.tonicsystems.jarjar.JarJarTask"
             classpath="jarjar-1.1.jar"/>
    <jarjar jarfile="build/app.jar" duplicate="preserve">
      <fileset dir="${out.dir}"/>
      <zipgroupfileset dir="libs" includes="*.jar"/>
      <keep pattern="COM.YOUR.PACKAGE.**"/>
      <keep pattern="com.amazonaws.**"/>
      <keep pattern="com.facebook.android.**"/>
      <keep pattern="com.google.android.apps.analytics.**"/>
      <keep pattern="com.google.gson.GsonBuilder"/>
      <keep pattern="com.google.common.base.Splitter"/>
      <keep pattern="com.google.common.io.Files"/>
      <keep pattern="com.google.common.base.Charsets"/>
      <keep pattern="javax.annotation.Nullable"/>
      <keep pattern="org.apache.commons.lang3.**"/>
      <keep pattern="android.support.v4.**"/>
      <!-- Required because these seem to be missing from the phone JVM
           and they are used by our CursorMapper. -->
      <keep pattern="javax.annotation.**"/>
      <!-- From http://actionbarsherlock.com/faq.html -->
      <keep pattern="com.actionbarsherlock.**"/>
      <keep pattern="*Annotation*"/>
      <rule pattern="com.google.common.**" result="COM.YOUR.PACKAGE.vendor.com.google.common.@1"/>
      <!-- We rename this because at least "HTC Sensation XL with Beats Audio"
           has a bad Gson library which we don't want to use. -->
      <rule pattern="com.google.gson.**" result="COM.YOUR.PACKAGE.vendor.com.google.gson.@1"/>
    </jarjar>
    <!-- Convert the .class files to Dalvik byte code. -->
    <exec executable="${sdk.dir}/platform-tools/dx" failonerror="true">
      <arg value="--dex"/>
      <arg value="--output=build/classes.dex"/>
      <arg file="build/app.jar"/>
    </exec>
    <!-- Package the resources and the classes into an apk. -->
    <taskdef name="apkbuilder" classname="com.android.ant.ApkBuilderTask"
             classpath="${sdk.dir}/tools/lib/anttasks.jar"/>
    <apkbuilder outfolder="."
                resourcefile="build/resources.arsc"
                apkfilepath="build/unsigned.apk"
                verbose="false">
      <dex path="build/classes.dex"/>
      <sourcefolder path="${out.dir}"/>
    </apkbuilder>
  </target>

  <!-- We need this because I use JDK 7, see the Caution in:
       http://developer.android.com/guide/publishing/app-signing.html#signapp
       Ant 1.8.3 allows specifying a sigalg and a digestalg, but
       I don't have it yet, so we have this macro instead. -->
  <macrodef name="signjarjdk7">
    <attribute name="jar" />
    <attribute name="signedjar" />
    <attribute name="keystore" />
    <attribute name="storepass" />
    <attribute name="alias" />
    <sequential>
      <exec executable="jarsigner" failonerror="true">
        <arg line="-digestalg SHA1 -sigalg MD5withRSA" />
        <arg line="-keystore @{keystore} -storepass @{storepass}" />
        <arg line="-signedjar &quot;@{signedjar}&quot;" />
        <arg line="&quot;@{jar}&quot; @{alias}" />
      </exec>
    </sequential>
  </macrodef>

  <macrodef name="zipalign">
    <attribute name="apk" />
    <attribute name="optimizedapk" />
    <sequential>
      <exec executable="${sdk.dir}/tools/zipalign" failonerror="true">
        <arg value="-f"/>
        <arg value="4"/>
        <arg file="@{apk}"/>
        <arg file="@{optimizedapk}"/>
      </exec>
    </sequential>
  </macrodef>

  <!-- Make an apk.
       See http://developer.android.com/guide/developing/building/index.html -->
  <macrodef name="apk">
    <attribute name="keystore"/>
    <attribute name="storepass"/>
    <attribute name="alias"/>
    <sequential>
      <antcall target="apk-unsigned"/>
      <!-- Sign the apk for release. -->
      <signjarjdk7
          keystore="@{keystore}" storepass="@{storepass}" alias="@{alias}"
          jar="build/unsigned.apk" signedjar="build/unaligned.apk"/>
      <!-- Optimize the apk to improve speed. -->
      <zipalign apk="build/unaligned.apk" optimizedapk="${apk.name}"/>
    </sequential>
  </macrodef>

  <target name="release">
    <property name="debug" value="false"/>
    <apk keystore="keystore" storepass="${storepass}" alias="YOUR ALIAS"/>
  </target>

  <target name="debug">
    <property name="debug" value="true"/>
    <apk keystore="debug.keystore" storepass="android" alias="androiddebugkey"/>
  </target>

  <target name="compile.tests" depends="compile">
    <mkdir dir="${out.test-classes.dir}"/>

    <javac encoding="ascii" source="1.6" target="1.6" debug="true" extdirs=""
           includeantruntime="false"
           destdir="${out.test-classes.dir}">
      <src path="test"/>
      <classpath>
        <pathelement path="${out.dir}"/>
        <path refid="lib.path.id"/>
        <fileset dir="${test.libs.dir}" includes="*.jar"/>
        <pathelement path="${android.jar}"/>
      </classpath>
    </javac>
  </target>

  <target name="test" depends="compile.tests">
    <mkdir dir="${basedir}/out/reports/tests"/>
    <junit showoutput="true" failureproperty="junit.failure">
      <formatter type="plain" usefile="false"/>
      <formatter type="xml"/>
      <batchtest todir="${basedir}/out/reports/tests">
        <fileset dir="test">
          <include name="**/*Test.java"/>
        </fileset>
      </batchtest>
      <classpath>
        <pathelement path="${out.dir}"/>
        <path refid="lib.path.id"/>
        <fileset dir="${test.libs.dir}" includes="*.jar"/>
        <pathelement path="${android.jar}"/>
        <pathelement path="${out.test-classes.dir}"/>
      </classpath>
    </junit>
    <fail if="junit.failure" message="Unit test(s) failed.  See reports!"/>
  </target>
</project> 
```

# asp.net-web-api - ember-data：按需加载 hasMany 关联

> ID：13699796
> 
> 赞同：17
> 
> 时间：2012-12-04T09:35:27.407
> 
> 标签：asp.net-web-api, ember.js, ember-data

（已针对 ember-data API Rev 11 更新...）

# TL;博士

按需加载关联的正确方法是什么？特别是，一旦你加载了子记录，你如何处理从服务器重新加载父记录清空 hasMany 数组的事实？我*不想*（也许不能）将子记录的 id 包含在父数组中。还是有另一种我想念的方法来做到这一点？~~`DS.Adapter.findAssociation(...)`~~`DS.Adapter.findHasMany(...)``hasMany`

 *作为旁注，我很困惑应该在`hasMany`/`belongsTo`定义中传递哪些选项用于键链接（如果我没有旁加载数据或 id 数组，我应该使用映射吗？），所以如果你认为我的问题可能在我的关联定义中，你很有可能是对的。

# 长版

我正在编写自己的子类`DS.RESTAdapter`以将 ember-data 绑定到 ASP.NET WebAPI 后端（使用实体框架）。到目前为止一切都很好，但我有一段时间让协会正常工作。

与[此海报](https://stackoverflow.com/questions/12364734/emberjs-data-how-to-load-hasmany-data-later)类似，我注意到 ember-data 的首页*曾经*~~说过~~ ，如果您的模型中有关联，并且您拥有该属性，则商店将发出对子记录的请求。从页面引用：*`hasMany``get`*

 *> 如果您要请求配置文件，如下所示：
> 
> ```
> author.get('profile'); 
> ```
> 
> …REST 适配器将向 URL /profiles?author_id=1 发送请求。

这意味着如果您不侧载并且不包含 id 数组，就会发生这种情况。我意识到这些文档有些过时了，但是我无法做到这一点，无论是在 API 版本 7 还是最近的版本 9 中。但是~~在版本 9 中我确实找到了`findAssociation`方法，~~在版本 11 中有`findHasMany`方法，我猜这可能是用来实现这一点的方法，而我现在正在尝试使用它。

## 为什么不包含一组 id 或 sideload？

我不想这样做（并且可能不能）的三个主要原因：

1.  如何用 ASP.NET WebAPI 做这些事情并不明显，至少不能用我正在使用的简单的基于装饰的方法。而且，我现在真的很喜欢后端的简单性和纤薄性，使用 EF 和 WebAPI，它几乎完全是每个实体的样板，我已经完成了！我什至“免费”获得了 OData 过滤支持。

2.  我的子记录通常会通过昂贵的查询（例如聚合...指标汇总）生成。单个父实体有许多不同类别的子实体。因此，即使获取*所有*子类型的 id 也会很昂贵，并且生成和旁加载所有子记录是不可能的。

3.  我有主键是复合键的子实体。我还没有看到这个甚至在 ember-data 中被支持/可能的例子，至少不是用于处理关联（例如，你将如何处理一个 id 数组？）。我在客户端模型中创建了一个计算属性，该属性将复合键强制转换为单个字符串，因此我可以使用 来从存储中检索单个记录`find(...)`，但我也不知道这如何与关联一起工作。

## 尝试使用~~`findAssociation`~~`findHasMany`

我发现在 API 版本~~9（以及一些早期版本，但不是全部？）~~ 11 中，我也许可以实现检索关联的子记录的方法。这主要是有效的，但需要一些体操。这是我的通用方法：~~`DS.Adapter.findAssociation`~~ `DS.Adapter.findHasMany``hasMany`~~`findAssociation`~~ `findHasMany`

```
findHasMany: function (store, record, relationship, ids) {

    var adapter = this;
    var root = this.rootForType(relationship.type);
    var query = relationship.options.query(record);

    var hits = store.findQuery(relationship.type, query);

    hits.on('didLoad', function () {
        // NOTE: This MUST happen in the callback, because findHasMany is in
        // the execution path for record.get(relationship.key)!!! Otherwise causes
        // infinite loop!!!
        var arrMany = record.get(relationship.key);

        if (hits.get('isLoaded')) {
            arrMany.loadingRecordsCount = 1 + hits.get('length') + (typeof arrMany.loadingRecordsCount == "number" ? arrMany.loadingRecordsCount : 0);
            hits.forEach(function (item, index, enumerable) {
                arrMany.addToContent(item);
                arrMany.loadedRecord();
            });
            arrMany.loadedRecord(); // weird, but this and the "1 +" above make sure isLoaded/didLoad fires even if there were zero results.
        }
    });

} 
```

为了完成这项工作，我的`hasMany`定义设置了一个`query`选项值，它是记录上的一个函数，它返回子请求中查询字符串的参数散列。由于这是一个 ASP.NET WebAPI 后端，这可能是一个 OData 过滤器，例如：

```
App.ParentEntity = DS.Model.extend({
    ...
    children: DS.hasMany('App.ChildEntity', {
        query: function (record) {
            return {
                "$filter": "ChildForeignKey eq '" + record.get('id') + "'"
            };
        }
    })
}); 
```

技巧之一是将项目添加到`ManyArray`using 中`addToContent(item)`，这样父记录就不会被标记为“脏”，就好像它已被编辑一样。另一个是，当我最初检索父记录的 JSON 时，我必须手动`true`为关联名称的键设置一个值（来自服务器的 JSON 根本没有键）。IE：

```
 var a = Ember.isArray(json) ? json : [json];
    for (var i = 0; i < a.length; i++) {
        type.eachAssociation(function (key) {
            var meta = type.metaForProperty(key);
            a[i][key] = true;
        });
    } 
```

这听起来很疯狂，但这就是为什么：如果您查看实现`DS.Store.findMany`并找到调用的位置，您会发现：~~`findAssociation`~~ `findHasMany`

```
findMany: function(type, ids, record, relationship){
...
if (!Ember.isArray(ids)) {
  var adapter = this.adapterForType(type);
  if (adapter && adapter.findHasMany) { adapter.findHasMany(this, record, relationship, ids); }
  else { throw fmt("Adapter is either null or does not implement `findMany` method", this); }

  return this.createManyArray(type, Ember.A());
} 
```

如果您从调用的 ember-data 内部函数中查看这一行，您将看到为第二个参数传递的内容：~~`hasAssociation`~~ `hasRelationship``findMany`

```
relationship = store.findMany(type, ids || [], this, meta); 
```

因此，被调用的唯一方法是让JSON 中的值是“真实的”，但*不是*数组——我使用. 我认为这要么是一个错误/不完整，要么是我走错了路的迹象——如果有人能告诉我那也很好的话。~~`findAssociation`~~ `findHasMany`*`true`*

 *有了这一切，我可以让 ember-data 自动向服务器发出请求以获取子记录，例如`http://myserver.net/api/child_entity/$filter=ChildForeignKey eq '42'`，它可以工作 - 子记录被加载，并且它们与父记录相关联（顺便说一下，反向`belongsTo`关系也被正确填充，尽管我没有明确地触摸它——我不知道这是在哪里或如何发生的）。

但如果我不停在那里，它很快就会崩溃。

## 处理重新加载父记录

假设我成功地将子记录加载到父记录中，然后导航到检索*所有*父记录的位置（以填充菜单）。由于新加载的父记录没有 id 数组并且没有旁加载任何内容，因此父记录再次刷新，没有任何子记录！更糟糕的是，`ManyArray`的`isLoaded`财产仍然存在`true`！所以我什至无法观察到任何重新加载孩子的东西。

因此，如果我同时在屏幕上显示子值的视图，它会立即变为没有子记录值。或者，如果我导航回一个，当`App.store.find('App.ParentEntity', 42)`被调用时，记录是从存储加载的，而不向服务器发出请求，当然它没有子记录。

这是提示＃2，我可能会以错误的方式解决这个问题。那么......按需加载子记录的正确方法是什么？

非常感谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-26T01:24:19.570

基于最新的 Ember 数据（截至 2013 年 1 月 25 日）...这是我的延迟加载解决方案 hasMany 关系。我修改`DS.hasMany`并添加了一个方法到`DS.Adapter`.

我更改了两行`DS.hasMany`：

```
DS.hasMany = function(type, options) {
  Ember.assert("The type passed to DS.hasMany must be defined", !!type);
  return (function(type, options) {
    options = options || {};
    var meta = { type: type, isRelationship: true, options: options, kind: 'hasMany' };
    return Ember.computed(function(key, value) {
      var data = get(this, 'data').hasMany,
          store = get(this, 'store'),
          ids, relationship;

      if (typeof type === 'string') {
        type = get(this, type, false) || get(Ember.lookup, type);
      }

      meta.key = key;
      ids = data[key];
      relationship = store.findMany(type, ids, this, meta);
      set(relationship, 'owner', this);
      set(relationship, 'name', key);
      return relationship;
    }).property().meta(meta);
  })(type, options);

}; 
```

首先，我添加`key`到`meta`对象...

```
meta.key = key; 
```

...其次，如上所述，我`findMany`通过更改...从调用中删除了空数组

```
relationship = store.findMany(type, ids || [], this, meta); 
```

...到...

```
relationship = store.findMany(type, ids, this, meta); 
```

...允许`ids`传递给`findMany`as `undefined`。

接下来，我添加了一个`didFindHasMany`钩子`DS.Adapter`：

```
DS.Adapter.reopen({

  /**
   Loads the response to a request for records by findHasMany.

   Your adapter should call this method from its `findHasMany`
   method with the response from the backend.

   @param {DS.Store} store
   @param {subclass of DS.Model} type
   @param {any} payload
   @param {subclass of DS.Model} record the record of which the relationship is a member (parent record)
   @param {String} key the property name of the relationship on the parent record
   */
  didFindHasMany: function(store, type, payload, record, key) {

    var loader = DS.loaderFor(store);

    loader.populateArray = function(references) {
      store.loadHasMany(record, key, references.map(function(reference) { return reference.id; }));
    };

    get(this, 'serializer').extractMany(loader, payload, type);
  }

}); 
```

我使用`DS.Adapter`我发现已经在. 然后在我的自定义适配器中，我实现了一个在其成功回调中使用以下代码的方法：`didFindQuery``loadHasMany``DS.Store``findHasMany`

```
Ember.run(this, function() {
  adapter.didFindHasMany(store, type, response.data, record, key);
}); 
```

我没有对此进行广泛的测试，但它似乎工作正常。查看最近对 ember-data 的代码所做的修改，在我看来，他们已经慢慢朝着未来某个时候支持类似这种方法的方向发展。或者至少这是我的希望。***

# java - Neo4j 的第一步

> ID：13699802
> 
> 赞同：2
> 
> 时间：2012-12-04T09:35:38.273
> 
> 标签：java, json, neo4j

我目前正在参与一个项目，我需要构建一个远程 neo4j 服务器来添加一些自我网络（只有几个节点和关系）。

我一直在使用这个文档：[http ://docs.neo4j.org/chunked/milestone/server-java-rest-client-example.html](http://docs.neo4j.org/chunked/milestone/server-java-rest-client-example.html)

但是，我没有找到如何创建唯一节点（将属性指定为 id），我想知道是否也可以通过 url（solr 样式）对 REST API 进行一些查询。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:40:42.047

Neo4j 有一个 REST API - 有关文档，请参见[http://docs.neo4j.org/chunked/stable/rest-api.html](http://docs.neo4j.org/chunked/stable/rest-api.html)。

每个索引的节点可以是唯一的（这意味着，如果您索引一个属性，则可以强制该属性仅存在一个节点） - 请参阅[http://docs.neo4j.org/chunked/stable/rest-api-unique-indexes .html](http://docs.neo4j.org/chunked/stable/rest-api-unique-indexes.html)用于通过 REST API 执行此操作的文档。

# c - 替换子字符串错误

> ID：13699804
> 
> 赞同：0
> 
> 时间：2012-12-04T09:35:40.710
> 
> 标签：c, substring

我在 c 中有一个子字符串问题。它没有正确更改子字符串。它必须找到 foo 并将其替换为其他东西，但它不能更改它。它只是更改了 'o' 部分。请帮忙。

```
#include <stdio.h>
#include <string.h>

char *replace(char *s, char old, char newer)
{
char *p = &s[0];

while(*p)
{
if(*p == old)
*p = newer;

p++;
}

return s;
}

int main()
{
char mystr[250];
printf("enter ");
gets(mystr);
puts(replace(mystr, 'foo', 'bars'));
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:58:17.410

```
char *replace(char *s, char *old, char *newer)
{
...

if(*p == *old){
    *p = *newer;
    old++; newer++;
}
...

puts(replace(mystr, "foo", "bars")); 
```

这些更改应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:38:37.200

'foo' 和 'bars' 不是字符

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T09:41:22.693

首先，您的函数采用单个字符“旧”和“新”，但您想替换子字符串..

# iphone - 如何保存 NSTimer？

> ID：13699805
> 
> 赞同：0
> 
> 时间：2012-12-04T09:35:46.563
> 
> 标签：iphone, ios, cocoa-touch, nstimer

谁能告诉我如何保存 NSTimer ？我需要显示玩家完成游戏的时间。请建议。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T09:43:00.143

你不需要使用`NSTimer`. 我建议你使用`NSDate`

游戏开始时：

```
startDate = [NSDate date]; 
```

游戏结束时：

```
endDate = [NSDate date];
NSTimeInterval interval = [endDate timeIntervalSinceDate:startDate]; 
```

所以现在你有时间了，可以随心所欲地使用它。`NSUserDefaults`您可以像普通`double`值一样保存它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T09:54:06.780

你可以这样做..

`int currentTime;`

`BOOL isGameOver;`

```
 - (void)viewWillAppear:(BOOL)animated 
    {
       isGameOver=FALSE;
       [self start];
       [super viewWillAppear:YES];
    }

- (IBAction)start{

    currentTime = 0;// SET 60 SECODE AS STATICULLY YOU CAN SET YOUR OWN TIME
    lbl=[[UILabel alloc]init];
    //creates and fires timer every second
    myTimer = [[NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(showTime) userInfo:nil repeats:YES]retain];
}

-(IBAction)gameOverAction
{
    isGameOver=TRUE;

//your game action Whenever its game over this method fire and Set One Bool value in this method like
}

-(void)showTime{

        if(isGameOver==TRUE)
        {

            [myTimer invalidate];
            myTimer = nil;
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Game Over"
                                                            message:[NSString stringWithFormat:@"Your Rount Time is %.2d", currentTime]
                                                           delegate:nil
                                                  cancelButtonTitle:@"OK"
                                                  otherButtonTitles:nil];
            [alert show];
            [alert release];

        //you can save this [NSString stringWithFormat:@"Your Rount Time is %.2d", currentTime] in nsuserdefoult or database like bellow

          NSString *myGameLastTime =[NSString stringWithFormat:@"Your Rount Time is %.2d", currentTime] ;
          NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
          [defaults setObject:myGameLastTime forKey:@"gameoverTime"];

          [defaults synchronize];

         //now you can get this time anyplace in your project like [[NSUserDefaults standardUserDefaults] valueForKey:@"gameoverTime"]

        }

        currentTime++;
        lbl.text = [NSString stringWithFormat:@"%.2d", currentTime];

    NSLog(@"my lable == %@",lbl.text);

} 
```

希望它能帮助你一切顺利

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T09:50:43.670

你应该在问这些问题之前做一些研究，用谷歌很容易弄清楚，最多需要 20 分钟，

```
NSUserDefaults *YourTimerName=[NSUserDefaults standardUserDefaults];
[defaultsPassword setObject:YourTimerName forKey:@"key1"];
[defaultsPassword synchronize]; 
```

然后你可以像这样恢复它

```
Nsstring *str=[[NSUserDefaults standardUserDefaults]objectForKey:@"key1"]; 
```

但是你需要先把你的定时器 Nsstring 格式化然后保存

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-04T09:39:21.873

`NSTimer`只是周期性时间事件的来源，没有太多可保存的。如果您使用它来记录游戏中的时间，则必须有一个变量来记录总时间。将其保存到`NSUserDefaults`或某处。

# svn - 如何接收乌龟的输出？

> ID：13699807
> 
> 赞同：1
> 
> 时间：2012-12-04T09:35:48.530
> 
> 标签：svn, redirect, tortoisesvn, updates, output

我使用包含以下内容的 bat 文件：

```
call TortoiseProc.exe /command:update /path:%updatepath% /closeonend:2  >test.txt 
```

但 test.txt 是空的。如何接收更新结果？例如已更新的文件，...谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T15:18:26.950

TortoiseProc 只有一个返回值（表示成功或失败）。它是一个 UI 客户端，不使用控制台，也不对其进行写入。除了提到的成功/失败返回码之外，您无法从中获取其他信息。

如果要自动化 svn 命令，请改用 Subversion 命令行客户端 (svn.exe)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T09:45:59.117

TortoiseProc.exe 是否在标准通道上输出某些内容？即执行此命令时，您在命令行上看到了什么吗？

如果是，可能 TortoiseProc 正在输出到与 stdout 不同的通道。您还可以将其他通道的输出存储到文件中。请参阅有关重定向运算符的[Microsoft 资源。](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/redirection.mspx?mfr=true "使用命令重定向运算符")这是针对 Windows XP 的，但我认为它在较新版本的 Windows 中没有改变。

# objective-c - UIView 动画不适用于横向模式

> ID：13699811
> 
> 赞同：1
> 
> 时间：2012-12-04T09:36:08.653
> 
> 标签：objective-c, uiviewanimation

我正在使用 UIView 动画，其中第二个视图从底部出现并到达视图的中心。但它不能在横向模式下工作，尽管我的应用程序支持横向模式并且我实现了方法“willAnimateRotationToInterfaceOrientation:toInterfaceOrientation”。这是我的代码：

```
-(void) viewWillAppear:(BOOL)animated{

    [super viewWillAppear:animated];
    self.view.backgroundColor = [UIColor blackColor];

    imageView= [[UIImageView alloc] initWithFrame:CGRectMake(0, 499, 320, 0)];
    imageView.image = [UIImage imageNamed:@"trans.png"];
    [imageView setClipsToBounds:YES];
    [imageView setContentMode:UIViewContentModeBottom];

    [self.view addSubview:imageView];

    [UIView animateWithDuration:1.0f
                          delay:0.5f
                        options:UIViewAnimationOptionCurveEaseOut
                     animations:^(void) {
                         imageView.frame = CGRectMake(0, 92, 320, 320);

                     }
                     completion:NULL];

}

-(void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration{
    CGRect screen = [[UIScreen mainScreen] bounds];
    float pos_y, pos_x;
    pos_y = UIDeviceOrientationIsLandscape([[UIDevice currentDevice] orientation]) ? screen.size.width/2  : screen.size.height/2;
    pos_x = UIDeviceOrientationIsLandscape([[UIDevice currentDevice] orientation]) ? screen.size.height/2 : screen.size.width/2;

    imageView.center = CGPointMake(pos_x, pos_y);

} 
```

我想我将第二个视图的框架设置在错误的位置...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:10:37.430

你用过`willAnimateRotationToInterfaceOrientation`，但你必须用`didRotateFromInterfaceOrientation`。

`willAnimateRotationToInterfaceOrientation`旋转前会给你方向。

所以用这个…………

```
-(void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation
{
    imageView.center = self.view.center;
} 
```

这绝对会帮助你...

祝你编码愉快............ - :)

# fsevents - 是否有明确的 FSEvents 事件标志列表？

> ID：13699812
> 
> 赞同：-1
> 
> 时间：2012-12-04T09:36:13.507
> 
> 标签：fsevents

我一直在寻找，但找不到明确的清单。我正在记录某些事件，但我不确定它们是什么——如果有一个查找表能够更清楚地看到正在发生的事情，这将非常有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T01:54:07.097

是的。我在常量/FSEventStreamEventFlags 下的 FSEvents 参考中找到了以下内容

请查看此内容，以便您查看每个标志的描述。一开始我有点困惑，但后来我意识到你只能得到其中一些事件，这取决于你如何设置流。如果您将其设置为不获取文件事件，那么您只能获取事件的前半部分。如果您将其设置为获取文件事件，那么您只会获得下半部分（据我所知并注意到）。

*   kFSEventStreamEventFlagNone
*   kFSEventStreamEventFlagMustScanSubDirs
*   kFSEventStreamEventFlagUserDropped
*   kFSEventStreamEventFlagKernelDropped
*   kFSEventStreamEventFlagEventIdsWrapped
*   kFSEventStreamEventFlagHistoryDone
*   kFSEventStreamEventFlagRootChanged
*   kFSEventStreamEventFlagMount
*   kFSEventStreamEventFlagUnmount

* * *

*   kFSEventStreamEventFlagItemCreated
*   kFSEventStreamEventFlagItemRemoved
*   kFSEventStreamEventFlagItemInodeMetaMod
*   kFSEventStreamEventFlagItem 重命名
*   kFSEventStreamEventFlagItemModified
*   kFSEventStreamEventFlagItemFinderInfoMod
*   kFSEventStreamEventFlagItemChangeOwner
*   kFSEventStreamEventFlagItemXattrMod
*   kFSEventStreamEventFlagItemIsFile
*   kFSEventStreamEventFlagItemIsDir
*   kFSEventStreamEventFlagItemIsSymlink

# sql - 当第一行第二列与sql中的第二行第一列相同时如何删除一行

> ID：13699814
> 
> 赞同：1
> 
> 时间：2012-12-04T09:36:20.387
> 
> 标签：sql

`first row's code column` *如果等于*`second rows number column`并且`second rows' code column` *等于*，如何删除一行`first row's number column`。

sql不能使用循环

将此用作示例代码

```
CREATE TABLE #temp(id int, code int, Number int)

Insert into #temp values(1,2,1)
Insert into #temp values(2,1,2)
Insert into #temp values(3,2,3)
Insert into #temp values(4,2,3)
Insert into #temp values(5,2,3)

select * from #temp 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:52:46.510

由于您没有指定您使用的 RDBMS。让我假设它是 SQL Server，那么你可以这样做：

```
;WITH CTE
AS
(
   select * , ROW_NUMBER() OVER(ORDER BY ID) rownum
    from temp
), RowsToDelete
AS(
    SELECT c1.*
    FROM CTE c1
    INNER JOIN CTE c2 ON c1.rownum - c2.rownum = 1 AND c1.number = c2.code
)
DELETE r
FROM temp r
WHERE ID IN  ( SELECT ID 
               FROM RowsToDelete); 
```

对于示例数据，您发布的这将仅删除一行，即：

```
ID     CODE    NUMBER 
2       1        2 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/dd9a0/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:48:18.863

删除 t1

从#temp t1

在哪里存在（

从#temp t2中选择*

其中 t1.code = t2.Number 和 t2.code = t1.Number 和 t2.Id > t1.Id

)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T09:40:57.130

只需使用连接来使用您指定的条件获取要删除的行：

```
delete t1
from #temp t1
inner join #temp t2
    on t1.code = t2.Number and t2.code = t1.Number 
```

# java - 选择特定项目并提供保存的数据

> ID：13699815
> 
> 赞同：2
> 
> 时间：2012-12-04T09:36:25.183
> 
> 标签：java, android, android-intent

在我的应用程序中，我希望当我从列表中选择一个特定项目时，它会给出它的保存数据，因为每个项目都是一个包含一些数据的字段。我怎样才能做到这一点？？？

我的Java代码是：

```
 public void Onclick_click4(final TextView task_detail_txt)
{
    final TextView txtbox = (TextView) task_detail_txt ;

    if(task_detail_txt.getId()==R.id.textView4)
    {

        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setTitle("Task Details");

        ListView modeList = new ListView(this);
        final String[] stringArray = new String[] { "Ticket Number", "Job Performed", "Date and Time", "GPS-Latitude", "GPS-Longitude", "Status", "Next Due on" };
        ArrayAdapter<String> modeAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, android.R.id.text1, stringArray);
        modeList.setAdapter(modeAdapter);

        builder.setItems(stringArray, new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int item) {
                 Toast.makeText(getApplicationContext(), stringArray[item], Toast.LENGTH_SHORT).show();
                 txtbox.setText(stringArray[item]);
                 System.out.println("Item is: "+stringArray[item]);
                 /*CONTRY_ID = con.get(item).getCountryId();
                 stateET.requestFocus();*/
            }
         });

    builder.show();

           }

} 
```

正如我想要的那样，当我点击票号时，它会给我保存在另一个活动中的号码。ETC

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:46:21.813

您可以使用[SharedPreferences来做到这一点](http://developer.android.com/reference/android/content/SharedPreferences.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:41:12.150

如果你扩展`ListActivity`，你可以覆盖`onListItemClick`，并以这种方式检索数据：

```
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    ArrayAdapter<String> adpter = (ArrayAdapter<String>)l.getAdapter();
    String data = l.getItem(position);
} 
```

# javascript - Javascript onmouseover 位置鼠标

> ID：13699817
> 
> 赞同：1
> 
> 时间：2012-12-04T09:36:36.317
> 
> 标签：javascript, onmouseover

我有这个脚本，当您浏览图像时，它会在光标的右侧显示图像。我不想改变立场，但由于我对**javascript**不是那么“好” ，我真的不知道该怎么做。

```
function followmouse(e){
var xcoord=offsetfrommouse[0]
var ycoord=offsetfrommouse[1]

var docwidth=document.all? truebody().scrollLeft+truebody().clientWidth : pageXOffset+window.innerWidth-15
var docheight=document.all? Math.min(truebody().scrollHeight, truebody().clientHeight) : Math.min(window.innerHeight)

if (typeof e != "undefined"){
    if (docwidth - e.pageX < defaultimagewidth + 2*offsetfrommouse[0]){
        xcoord = e.pageX - xcoord - defaultimagewidth; // Move to the left side of the cursor
    } else {
        xcoord += e.pageX;
    }
    if (docheight - e.pageY < defaultimageheight + 2*offsetfrommouse[1]){
        ycoord += e.pageY - Math.max(0,(2*offsetfrommouse[1] + defaultimageheight + e.pageY - docheight - truebody().scrollTop));
    } else {
        ycoord += e.pageY;
    }

} else if (typeof window.event != "undefined"){
    if (docwidth - event.clientX < defaultimagewidth + 2*offsetfrommouse[0]){
        xcoord = event.clientX + truebody().scrollLeft - xcoord - defaultimagewidth; // Move to the left side of the cursor
    } else {
        xcoord += truebody().scrollLeft+event.clientX
    }
    if (docheight - event.clientY < (defaultimageheight + 2*offsetfrommouse[1])){
        ycoord += event.clientY + truebody().scrollTop - Math.max(0,(2*offsetfrommouse[1] + defaultimageheight + event.clientY - docheight));
    } else {
        ycoord += truebody().scrollTop + event.clientY;
    }
}
gettrailobj().left=xcoord+"px"
gettrailobj().top=ycoord+"px" 
```

}

我想我在这里有正确的代码，如果没有，谁能告诉我应该粘贴什么代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:31:28.627

这可以帮助你开始。我没有尝试优化它。

[代码笔示例](http://codepen.io/joe/pen/usalE)

我的 jQuery 经验有限，但我认为正确的语法现在不是最重要的。

# android - 突出显示列表视图项

> ID：13699818
> 
> 赞同：3
> 
> 时间：2012-12-04T09:36:38.887
> 
> 标签：android, listview, android-listview, highlight

当我触摸它并保持突出显示时，我需要突出显示一个列表视图项目。我尝试了我发现的一切，但没有任何效果。这是我的代码：

这是列表视图：

```
<ListView
    android:id="@+id/lvUsers"
    android:layout_width="300dp"
    android:layout_height="fill_parent"
    android:layout_alignParentLeft="true"
    android:background="@drawable/border2"
    android:choiceMode="singleChoice"
    android:padding="5dp" >
</ListView> 
```

这`@drawable/border2`只是列表视图周围的边框。

这是列表视图项目布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/layoutUsersRow"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/list_selector_background"
android:orientation="vertical" >

<TextView
    android:id="@+id/tvAllUsersName"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="10dp"
    android:text="User name"
    android:textAppearance="?android:attr/textAppearanceLarge" /> 
```

这是 list_selector_background：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_focused="true" android:drawable="@color/blue" /> <!-- focused -->
    <item android:state_focused="true" android:state_pressed="true" android:drawable="@color/blue" /> <!-- focused and pressed-->
    <item android:state_pressed="true" android:drawable="@color/blue" /> <!-- pressed -->
    <item android:drawable="@color/transparent" /> <!-- default -->
</selector> 
```

这是来自 listview 适配器的代码

```
public class UsersAdapter extends BaseAdapter implements OnClickListener {

LoginActivity context;
private List<String> listOfUsers;

public UsersAdapter(LoginActivity _context, List<String> listOfUsers) {
    context = _context;
    this.listOfUsers = listOfUsers;
}

public int getCount() {
    return listOfUsers.size();
}

public Object getItem(int position) {
    return listOfUsers.get(position);
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    String entry = listOfUsers.get(position);
    if (convertView == null) {
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = inflater.inflate(R.layout.users_row, null);
    }

    TextView UserName = (TextView) convertView.findViewById(R.id.tvAllUsersName);
    UserName.setText(entry);

    LinearLayout LinLayout = (LinearLayout) convertView.findViewById(R.id.layoutUsersRow);
    LinLayout.setFocusableInTouchMode(false);
    LinLayout.setFocusable(false);
    LinLayout.setOnClickListener(this);

    return convertView;
}

public void onClick(View v) {
    // get the row the clicked button is in
    LinearLayout row = (LinearLayout) v;

    TextView child = (TextView) row.getChildAt(0);
    if (child.getText().toString().equals("Admin")) {
        Intent i = new Intent("com.vorteksed.checkinform.ADMINLOGINACTIVITY");
        i.putExtra("verificationFor", "ADMIN_LOGIN");
        context.startActivity(i);
    } else {
        context.userClicked(child.getText().toString());

        // focus the pin field after selecting user name from the list
        if (context.currentList != null) {
            context.etLoginPin.setVisibility(View.VISIBLE);
            context.tvPin.setVisibility(View.VISIBLE);
            context.etLoginPin.requestFocus();
            context.etLoginPin.setText("");
            InputMethodManager imm = (InputMethodManager) context.getSystemService(Context.INPUT_METHOD_SERVICE);
            imm.showSoftInput(context.etLoginPin, 0);
        }
    }
}
} 
```

这是行不通的。它仅在按下时突出显示该项目。一旦我释放它，亮点就消失了。

**这是解决方案**

`android:background="@drawable/list_selector_background"`从列表视图项布局中删除该行。根本不需要选择器。这是适配器的代码：

```
public class UsersAdapter extends BaseAdapter {

LoginActivity context;
private List<String> listOfUsers;
boolean[] arrBgcolor;
private int blue = Color.BLUE;
private int transparent = Color.TRANSPARENT;

public UsersAdapter(LoginActivity _context, List<String> listOfUsers) {
    context = _context;
    this.listOfUsers = listOfUsers;

    arrBgcolor = new boolean[listOfUsers.size()];
    resetArrbg();

}

private void resetArrbg() {
    for (int i = 0; i < arrBgcolor.length; i++) {
        arrBgcolor[i] = false;                  
    }
}

public int getCount() {
    return listOfUsers.size();
}

public Object getItem(int position) {
    return listOfUsers.get(position);
}

public long getItemId(int position) {
    return position;
}

public View getView(final int position, View convertView, ViewGroup parent) {
    String entry = listOfUsers.get(position);
    if (convertView == null) {
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = inflater.inflate(R.layout.users_row, null);
    }

    TextView UserName = (TextView) convertView.findViewById(R.id.tvAllUsersName);
    UserName.setText(entry);

    LinearLayout LinLayout = (LinearLayout) convertView.findViewById(R.id.layoutUsersRow);
    LinLayout.setFocusableInTouchMode(false);
    LinLayout.setFocusable(false);
    LinLayout.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            handleClick(v, position);
        }
    });

    if (arrBgcolor[position])
        LinLayout.setBackgroundColor(blue);
    else 
        LinLayout.setBackgroundColor(transparent);

    return convertView;
}

public void handleClick(View v, int position) {
    LinearLayout row = (LinearLayout) v;

    resetArrbg();
    arrBgcolor[position] = true;
    notifyDataSetChanged();

    TextView child = (TextView) row.getChildAt(0);
    if (child.getText().toString().equals("Admin")) {
        Intent i = new Intent("com.vorteksed.checkinform.ADMINLOGINACTIVITY");
        i.putExtra("verificationFor", "ADMIN_LOGIN");
        context.startActivity(i);
    } else {
        context.userClicked(child.getText().toString());

        // focus the pin field after selecting user name from the list
        if (context.currentList != null) {
            context.etLoginPin.setVisibility(View.VISIBLE);
            context.tvPin.setVisibility(View.VISIBLE);
            context.etLoginPin.requestFocus();
            context.etLoginPin.setText("");
            InputMethodManager imm = (InputMethodManager) context.getSystemService(Context.INPUT_METHOD_SERVICE);
            imm.showSoftInput(context.etLoginPin, 0);
        }
    }
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:37:34.283

删除选择器并尝试以下操作：

**编辑**

```
public class UsersAdapter extends BaseAdapter implements OnClickListener {

        LoginActivity context;
        private List<String> listOfUsers;
        boolean[] arrBgcolor;
        private int blue = Color.BLUE;

        public UsersAdapter(LoginActivity _context, List<String> listOfUsers) {
            context = _context;
            this.listOfUsers = listOfUsers;

            arrBgcolor = new boolean[listOfUsers.size()];
            resetArrbg();

        }

        private void resetArrbg() {
            for (int i = 0; i < arrBgcolor.length; i++) {
                arrBgcolor[i] = false;                  
            }
        }

        ......

        public View getView(final int position, View convertView, ViewGroup parent) {
            String entry = listOfUsers.get(position);
            if (convertView == null) {
                LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                convertView = inflater.inflate(R.layout.users_row, null);
            }

            TextView UserName = (TextView) convertView.findViewById(R.id.tvAllUsersName);
            UserName.setText(entry);

            LinearLayout LinLayout = (LinearLayout) convertView.findViewById(R.id.layoutUsersRow);
            LinLayout.setFocusableInTouchMode(false);
            LinLayout.setFocusable(false);
            LinLayout.setOnClickListener(this);

            //add the following, the position is accessible from here
            if (arrBgcolor[position]) {
                convertView.setBackgroundColor(blue);
            }
            convertView.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    resetArrbg();
                    arrBgcolor[position] = true;
                    notifyDataSetChanged();
                }
            }); 
            return convertView;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-11T16:23:12.193

////@drawable/list_selector

```
 <selector xmlns:android="http://schemas.android.com/apk/res/android">

  <item android:drawable="@drawable/list_item_bg_normal"
  android:state_pressed="false" android:state_selected="false" android:state_activated="false"/>

  <item android:drawable="@drawable/list_item_touch"
  android:state_pressed="true"/>

 <item android:drawable="@drawable/list_item_touch"
 android:state_pressed="false" android:state_selected="true"/>

 <item android:drawable="@drawable/list_item_bg_pressed"
  android:state_activated="true"/>

</selector> 
```

//////////////////和在ListView上

```
 <ListView
        android:id="@+id/list_slidermenu"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_gravity="start"
        android:choiceMode="singleChoice"
        android:dividerHeight="1dp"
        android:listSelector="@drawable/list_selector"
        android:background="@color/list_background"
        android:divider="#060606"/> 
```

////////////////////listview 项

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
       android:layout_width="match_parent"
       android:layout_height="wrap_content"
       android:background="@drawable/list_selector">

      <ImageView
      android:id="@+id/icon"
      android:layout_width="35dp"
      android:layout_height="wrap_content"
      android:layout_alignParentLeft="true"
      android:layout_marginLeft="12dp"
      android:layout_marginRight="12dp"
      android:contentDescription="@string/desc_list_item_icon"
      android:src="@drawable/ic_home"
      android:layout_centerVertical="true" />

      </RelativeLayout> 
```

# c# - 不显示动态添加的标签

> ID：13699821
> 
> 赞同：5
> 
> 时间：2012-12-04T09:36:51.190
> 
> 标签：c#, .net, winforms

我有一些标签和一堆文本框，我想动态添加到面板中。文本框添加正常并且完全可见，但标签不是。这是我用来添加标签的代码。

该语言是为 .NET 3.5 WinForms 应用程序编写的 C#。

```
Label lblMotive = new Label();
lblMotive.Text = language.motive;
lblMotive.Location = new Point(0, 0);

Label lblDiagnosis = new Label();
lblDiagnosis.Text = language.diagnosis;
lblDiagnosis.Location = new Point(20, 0);

panelServiceMotive.Controls.Add(lblMotive);
panelServiceMotive.Controls.Add(lblDiagnosis); 
```

panelServiceMotive 是应该显示标签的面板控件，以及前面提到的文本框。语言是一个自写的语言类的对象，它工作正常，在这里无关紧要。

我希望这是足够的信息来获得帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:42:15.987

看起来主要问题是您添加到面板的控件的位置。该`Location`属性保存控件左上边缘相对于父控件（添加子控件的控件）左上角的坐标。查看您的代码，您似乎在另一个之上添加了控件。请注意，您始终设置`lblDiagnosis.Location = new Point(0, 0);`. 如果您从代码中添加控件，您添加的第一个控件将覆盖您在同一位置添加的所有其他控件（与使用设计器时不同）。

您可以尝试这样的方法来检查标签是否正常：

```
Label lblMotive = new Label();
lblMotive.Text = language.motive;
lblMotive.Location = new Point(0, 40);

Label lblDiagnosis = new Label();
lblDiagnosis.Text = language.diagnosis;
lblDiagnosis.Location = new Point(0, lblMotive.Location.Y + lblMotive.Size.Height + 10);

panelServiceMotive.Controls.Add(lblMotive);
panelServiceMotive.Controls.Add(lblDiagnosis); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T10:00:55.743

我只是将您的代码放入一个空表单应用程序中，它工作得非常好：

```
private void button1_Click(object sender, EventArgs e)
{
  Panel panelServiceMotive = new Panel();

  Label lblMotive = new Label();
  lblMotive.Text = "motive";
  lblMotive.Location = new Point(0, 0);

  Label lblDiagnosis = new Label();
  lblDiagnosis.Text = "language";
  lblDiagnosis.Location = new Point(100, 0);

  panelServiceMotive.Controls.Add(lblMotive);
  panelServiceMotive.Controls.Add(lblDiagnosis);

  this.Controls.Add(panelServiceMotive);
} 
```

您的代码一定有其他问题，我们无法从您发布的代码中看到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T09:42:10.960

您在“language.Motive”“language.diagnosis”中将文本设置为什么，这是来自资源文件还是字符串 const 或其他什么？

我建议您将这些设置为硬编码值或检查以确保先不为空。

还可以尝试更改文本框的位置，因为它们可能会相互重叠。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T09:52:29.900

是否有必要在运行时添加标签？一种更简单的方法是在表单设计器中添加标签并在运行时更新文本。如果在设计时不知道所需的标签数量，则不同的控件（例如 ListBox 或 DataGridView）可能更合适。或者，将[FlowLayoutPanel](http://msdn.microsoft.com/en-us/library/f9e8s203.aspx)视为标签的替代容器；与常规面板不同，它自动管理控件的布局。

# linux - ffmpeg split 输了一秒

> ID：13699824
> 
> 赞同：0
> 
> 时间：2012-12-04T09:37:13.633
> 
> 标签：linux, video, ffmpeg, split

我遇到了 ffmpeg 视频切割的问题。视频剪辑不正确。第一个和第二个视频之间的 1 秒丢失。part1.avi 拆分代码：

```
ffmpeg -i input.avi -ss 00:00:00 -t 00:01:00 -vcodec copy -acodec copy part1.avi 
```

part2.avi 拆分代码

```
ffmpeg -i input.avi -ss 00:01:00 -t 00:01:00 -vcodec copy -acodec copy part2.avi 
```

ffmpeg -i part1.avi = 00:01:00.02 ffmpeg -i part2.avi = 00:01:00.02

# java - 当我检索一些数据以显示在对话框中时，JOptionPane.showConfirmDialog 在 netbeans 中不起作用

> ID：13699829
> 
> 赞同：0
> 
> 时间：2012-12-04T09:37:21.663
> 
> 标签：java, netbeans, jdbc

这是代码：

```
 int value = JOptionPane.showConfirmDialog(Delete_Panel, "Delete Record of '"+rs.getString("Name")+"'", "Delete Now", JOptionPane.YES_NO_OPTION); 
```

它什么都不做..但是当我删除`rs.getString("Name")`它时它工作得很好，但我还想在确认对话框中显示来自 ms 访问的名称，然后根据是 no 选项我希望执行我的进一步代码。

完整的源代码是：

```
 String input = txtDelete.getText();

        Connection connection;

        try {
            Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
            connection = DriverManager.getConnection("jdbc:odbc:NewPData");
            Statement st = connection.createStatement();
            ResultSet rs = st.executeQuery("select ID from Table1 where ID=" + input);

            if (!rs.next()) {
                JOptionPane.showMessageDialog(Delete_Panel, "ID does not exist");
            } else {

             // int value = JOptionPane.showConfirmDialog(Delete_Panel, "Delete Record of '"+rs.getString("Name")+"'", "Delete Now", JOptionPane.YES_NO_OPTION);

                st.executeUpdate("delete from Table1 where ID=" + input);
                JOptionPane.showMessageDialog(Delete_Panel, "Record is Deleted");
                connection.close();

            }
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        } catch (SQLException e) {
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:23:14.773

尝试将代码放在 try-catch 块中，看看是否引发了异常。如果是，那么您必须处理它才能在 UI 中获取一些文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:02:31.373

您是否考虑过创建一个临时字符串变量，并将其设置为 的输出`rs.getString("Name")`，然后在 JOptionPane 中显示该字符串？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T10:11:28.280

是的，如前面的回答中所说，可能是 rs 为空或从未调用 rs.next() 或结果集中没有列“名称”，因此我们试图连接空名称。这样做有什么例外吗？最好将这个 rs.getString("Name") 值放在临时变量中，看看它是否真的是一个非空值。这是我能看到的唯一问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T10:11:52.023

您的代码应该可以正常工作。请在对话框中发布确切的输出。

您是否尝试在调用 showConfirmDialog 之前先获取数据？

rs = Statement.executeQuery

编辑：

 `````
ResultSet rs = st.executeQuery("select ID from Table1 where ID=" + input); 
```

Will only get the colum ID. Try this:` 

```
ResultSet rs = st.executeQuery("select ID,Name from Table1 where ID=" + input); 
````

# iphone - 如何在 iPhone 中组合不同的图像以制作全景图的单一图像？

> ID：13699831
> 
> 赞同：-3
> 
> 时间：2012-12-04T09:37:32.800
> 
> 标签：iphone, ios, image, panorama-control

我想在 iPhone 新旧版本中构建一个可以拍摄 360 度全景照片的应用程序。为此，我想在 iPhone 旋转时拍摄多张图像，当它回到原来的位置时，所有图像都应该合并到一个水平图像中，以使其成为全景图。这是我需要的两件事。

先合并多张图片

当设备旋转或沿正确方向移动时，应自动捕获第二张图像。

请提供任何建议来实现这一目标。

我的计划是在加速度计发生变化时开始拍照，并在加速度计停止时暂停拍照。此外，当加速度计到达其旧位置时，停止并将所有图像合并到一个图像中。可能吗？？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T09:49:12.393

这是一个非常高级的主题，因此您应该熟悉一些图像编辑算法。要合并图片，我会使用 CoreGraphics。您将不得不使用 Apple 的相机捕捉 API 来拍照并使用内置的陀螺仪同时保存旋转。我想你对这些主题很熟悉，因为你想开始这样一个巨大的项目。您可能想要实现一些很好的图像拼接算法。你可以在这里找到一个很好的介绍：http: [//cs.bath.ac.uk/brown/papers/ijcv2007.pdf](http://cs.bath.ac.uk/brown/papers/ijcv2007.pdf)。

* * *

我想我误会你了！所以你想做的是

1.  拍照
2.  等待加速计或陀螺仪代表启动
3.  再拍一张
4.  将新图片与旧图片合并
5.  回到 2。

大多数点应该很简单，但 4 点可能很困难。您可以使用 CoreGraphics 进行图像编辑。这里有一个很好的基本介绍：http: [//www.codeproject.com/Articles/93563/Introduction-to-iOS-Graphics-APIs-Part-1](http://www.codeproject.com/Articles/93563/Introduction-to-iOS-Graphics-APIs-Part-1)。但是我真的想要好的输出，不仅将新图片保存在带有偏移量的旧图片中，您还真的需要查看图像拼接算法。一个很好的起点是我上一篇文章中的链接。

回到起点后，要查看全景图，您必须将所有加速度计和陀螺仪的变化加在一起，并检查它们是否接近一致。

编辑：

我想我误会你了！所以你想做的是

拍照 等待加速计或陀螺仪代表启动 拍摄另一张照片 将新照片与旧照片合并 回到 2。大多数点应该很简单，但 4 可能很难。您可以使用 CoreGraphics 进行图像编辑。这里有一个很好的基本介绍：http: [//www.codeproject.com/Articles/93563/Introduction-to-iOS-Graphics-APIs-Part-1](http://www.codeproject.com/Articles/93563/Introduction-to-iOS-Graphics-APIs-Part-1)。但是我真的想要好的输出，不仅将新图片保存在带有偏移量的旧图片中，您还真的需要查看图像拼接算法。一个很好的起点是我上一篇文章中的链接。

回到起点后，要查看全景图，您必须将所有加速度计和陀螺仪的变化加在一起，并检查它们是否接近一致。

# java - facebook：使用 restfb 将照片发布到时间线

> ID：13699834
> 
> 赞同：1
> 
> 时间：2012-12-04T09:37:45.713
> 
> 标签：java, facebook, facebook-graph-api, restfb

我正在尝试使用 restfb 将照片发布到用户的页面时间轴。

我的代码是这样的：

```
// Create parameters for the call
Collection<Parameter> params = new ArrayList<Parameter>();
params.add(Parameter.with("message", "My Message"));
Parameter postParamsArray[] = params.toArray(new Parameter[params.size()]);
java.net.URL url = new java.net.URL("http://i.istockimg.com/file_thumbview_approve/4739627/2/stock-illustration-4739627-dreidel-game.jpg");
FacebookType publishMessageResponse = facebookClient.publish(facebookWallURL, FacebookType.class,BinaryAttachment.with("dreidel.jpg", url.openStream()), postParamsArray); 
```

但是，我在时间轴上只看到文本：我的消息。

用户具有以下权限：

```
'manage_pages, publish_stream, create_event, photo_upload' 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T08:22:22.420

facebookWallURL - 看起来你正在发布到墙上。尝试发布到相册：

```
facebookURL = facebookPageId + "/photos";
publishMessageResponse = facebookClient.publish(facebookURL, FacebookType.class, ba, postParamsArray); 
```

如本例中所写：（
注意**“我/视频”**）
[http://restfb.com/](http://restfb.com/)

```
Publishing a Photo (see Graph API documentation)

// Publishing an image to a photo album is easy
// Just specify the image you'd like to upload and RestFB will handle it from there.

FacebookType publishPhotoResponse = facebookClient.publish("me/photos", FacebookType.class,
  BinaryAttachment.with("cat.png", getClass().getResourceAsStream("/cat.png")),
  Parameter.with("message", "Test cat"));

out.println("Published photo ID: " + publishPhotoResponse.getId());

// Publishing a video works the same way as uploading a photo.

facebookClient.publish("me/videos", FacebookType.class,
  BinaryAttachment.with("cat.mov", getClass().getResourceAsStream("/cat.mov")),
  Parameter.with("message", "Test cat")); 
```

# google-app-engine - __BlobFileIndex__ 填充数据存储配额

> ID：13699835
> 
> 赞同：7
> 
> 时间：2012-12-04T09:37:46.307
> 
> 标签：google-app-engine, datastore, blobs, gae-quotas

我将对象序列化到我的应用程序中的 blobstore，并在它们更改时删除并重新创建它们。我知道这不是最好的方法，但我发现这是快速原型制作的好方法。

现在我正处于使用数据存储的阶段，但是我遇到了问题。我的数据存储配额已满！:) 我为这个问题做了很多搜索，但我在这里。

显然，对于每个 blob，**__ *BlobInfo* __**和**__ *BlobFileIndex* __**种都保留有关 blob 的信息。我的问题是当我删除 blob 时，**__ *BlobInfo* __**中的信息被删除，但**__ *BlobFileIndex* __中的信息没有被删除**

我拼命尝试了 appcfg vacum_indexes，但这并没有达到预期的效果。

顺便说一句，我使用Java平台。

这是我的问题

1.  如何清除未使用的**__ *BlobFileIndex* __**条目？
2.  处理这种情况不再发生的正确方法是什么？

谢谢你。

编辑：哇哦！我现在看到我无法删除这些不需要的索引 a）数据存储管理员没有列出它们 b）手动删除代码抛出异常（java.lang.IllegalArgumentException：非法 key.path.element.type：**BlobFileIndex**）因为以双下划线开头的实体是应用引擎保留实体，它不允许我删除它。谷歌的伙计们，我被困在这里 :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T19:25:46.230

您可以对此问题加注星标，以便在有解决方案后立即收到通知...
[http://code.google.com/p/googleappengine/issues/detail?id=6849](http://code.google.com/p/googleappengine/issues/detail?id=6849)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-11T09:55:27.163

我遇到了这个问题，但找到了解决方案：

对于任何试图以编程方式删除**BlobFileIndex**的人，您可以这样做：

```
query = datastore.Query("__BlobFileIndex__",{'blob_key': a_blob_key}, keys_only=True)
    key = query.Get(1)
    key_y = key[0]
    datastore.Delete(key_y) 
```

# ios - 将自定义事件发送到另一个 iPhone 应用程序？

> ID：13699838
> 
> 赞同：0
> 
> 时间：2012-12-04T09:37:54.243
> 
> 标签：ios

在 iphone 应用程序中，我们可以为系统事件设置处理程序，例如呼叫状态更改 (CTCallCenter.callEventHandler)，以便在来电/拨号/连接/断开等时通知我们的应用程序。

我想知道自己是否可以定义一个事件，并让另一个应用程序订阅。

我做了一些搜索，发现它可能在 Mac 上，通过使用 AppleEvents [http://hintsforums.macworld.com/showthread.php?t=112964](http://hintsforums.macworld.com/showthread.php?t=112964)。但是，我想它可能不适用于 iOS。

有任何想法吗？

（我曾考虑过使用 openURL，但问题是我不想启动其他应用程序的 UI。我只想让它知道发生了什么事情。我使用了一些技巧让我的其他应用程序在后台长时间运行。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:44:31.393

不，这是不可能的，所有应用程序都在沙箱中运行，并且无法与其他应用程序通信。如果他们定义了 App URL 方案，您可以启动其他应用程序。使用这样的方案，您可以传递参数。

# python - python键（）错误

> ID：13699840
> 
> 赞同：-2
> 
> 时间：2012-12-04T09:38:05.750
> 
> 标签：python, linux

```
Environment: python 2.6
path="/this/is/an/example/"

cmd={'Foo': (PATH + 'sh forExample.sh'), 'blah': (PATH + 'sh secExample.sh')}

for app in cmd.keys():
    print 'app name', app 
```

它按预期打印`Foo`

但是，当我尝试访问“sh forExample.sh”时

```
 for app in cmd.keys():
        print 'app name', app
        run_apps([app]) 
```

run_apps 函数看起来像这样..

```
def run_apps(apps):
        for a in apps:
                print a
                cmdlist = cmd[a][0]
                print cmdlist 
```

它没有给出预期的输出，而是给出`'s'`. 我尝试改变 cmd[a][x] 中的值，它不断给出 X 指向的字符的值。

哦，这是错误：`/bin/sh: 1: /: Permission denied` 我正在使用`Linux, distro: Ubuntu.`

知道错误是什么吗？我要去哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:54:10.583

看来您发送的是密钥而不是值。试试这个：

```
for app in cmd.keys():
    print 'app name', app
    run_apps(app,cmd[app]) 
```

然后 run_apps 得到：

```
def run_apps(a,app):
    print a
    print app 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:54:26.687

`Foo`你的`cmd`dict的值是`'sh forExample.sh'`.

因此`cmd[a][0]`将导致该字符串的第一个字符。

* * *

看着这条线

```
cmd={'Foo': ('sh forExample.sh'), 'blah': ('sh secExample.sh')} 
```

似乎你想`tuple`在你的字典中有一个 as 值。要创建一个单值元组，只需附加 a`,`并且您的代码应该可以按预期工作：

```
cmd={'Foo': ('sh forExample.sh',), 'blah': ('sh secExample.sh',)} 
```

现在 is 的值`cmd[a]`，`('sh forExample.sh',)`访问它`[0]`会产生`'sh forExample.sh'`。

# git - Git - 如何查看最后的承诺评论？

> ID：13699841
> 
> 赞同：-2
> 
> 时间：2012-12-04T09:38:09.967
> 
> 标签：git, list, command-line, comments

> **可能重复：**
> [GIT：如何阅读最后的提交评论？](https://stackoverflow.com/questions/7293008/git-how-to-read-last-commit-comment)

如何从命令行查看最后一个承诺的评论

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:48:45.777

您可以使用`git log`显示过去提交的日志。如果只想查看最后一次提交，可以使用`git log -1`. 相同的模式适用于任何数量的过去提交。因此，`git log -5`将显示过去的 5 次提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T09:40:49.903

你应该会看到所有带有`git log`作者、日期和评论的旧提交。

# html - 子 DIV 的对齐方式和高度

> ID：13699842
> 
> 赞同：0
> 
> 时间：2012-12-04T09:38:13.240
> 
> 标签：html, css

**嘿那里，**

我的一些 HTML 和 CSS 遇到了一些（理解）问题。

我在父 DIV (.group) 中有多个 DIV (.item)。这些子 DIV 的高度取决于它们的动态内容。

*静态内容的工作示例：http:* [//jsfiddle.net/YfDWL/](http://jsfiddle.net/YfDWL/)

HTML：

```
<div class="group">
    <div class="item">
        <div class="item-title">item 1</div>
        <div class="item-tag">tag1</div>
    </div>
    <div class="item">
        <div class="item-title">item 2</div>
        <div class="item-tag">tag1</div>
        <div class="item-tag">tag2</div>
        <div class="item-tag">tag3</div>
        <div class="item-tag">tag4</div>
    </div>
    <div class="item">
        <div class="item-title">item 3</div>
        <div class="item-tag">tag1</div>
        <div class="item-tag">tag2</div>
    </div>
</div>
<div class="group">
    <div class="item">
        <div class="item-title">item 1</div>
        <div class="item-tag">tag1</div>
        <div class="item-tag">tag2</div>
        <div class="item-tag">tag3</div>
        <div class="item-tag">tag4</div>
    </div>
    <div class="item">
        <div class="item-title">item 2</div>
        <div class="item-tag">tag1</div>
        <div class="item-tag">tag2</div>
    </div>
    <div class="item">
        <div class="item-title">item 3</div>
        <div class="item-tag">tag1</div>
    </div>
</div> 
```

CSS：

```
.group {
    margin: 30px;
    padding: 10px;
    border: 1px dashed black;
}

.item {
    display: inline-block;
    border: 1px solid black;
    width: 100px;
    margin-right: 10px;
}

.item-title {
    text-align: center;
    font-style: italic;
    font-weight: bold;
} 
```

我想要实现的是组内的所有项目 DIV 应该具有相同的高度并且应该在顶部对齐。这给我带来了几个问题：

1.  **对齐**
    如何对齐组顶部的所有项目 DIV？现在它们在底部对齐，如您在示例中所见......

2.  **高度**
    正如我在其他问题中看到的，这似乎不能用纯 HTML/CSS 来完成。因此，我决定使用带有 JQuery 的小 JS 来纠正元素的高度。
    *工作示例：http:* [//jsfiddle.net/YfDWL/1/](http://jsfiddle.net/YfDWL/1/)

JavaScript：

```
$(window).load(function() {
    "use strict";

    var maxHeight;

    // Iterate through every group
    $('.group').each(function(idx, group) {
        maxHeight = 0;

        // Iterate through every item of the group and save the max height
        $(group).find('.item').each(function(idx, item) {
            var height = $(item).height();

            if (!maxHeight || (height > maxHeight)) {
                maxHeight = height;
            }
        });

        // Set the max height to all items inside the group
        if (maxHeight) {
            $(group).find('.item').css('height', maxHeight);
        }
    });
}); 
```

如您所见，这工作正常，但对齐仍然是一个问题......

我现在想知道的是项目的对齐方式来自哪里以及我如何设法将所有项目放在组的顶部？

此外，如果可以更优雅地解决“相同高度”问题并且可能根本没有 JS，我很乐意在这里提出建议......

谢谢和最好的问候，
米克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T09:41:53.630

添加`vertical-align:top`

```
.item {
    display: inline-block;
    border: 1px solid black;
    width: 100px;
    margin-right: 10px;
    vertical-align:top
} 
```

**[演示](http://jsfiddle.net/YfDWL/5/)**

* * *

您可以参考此[***示例***](http://jsfiddle.net/eVt2C/)以了解如何在不使用 js 的情况下获得相等的高度。

**[演示 2](http://jsbin.com/arere4/1/edit)**

[http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks](http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T09:40:37.330

**添加** `vertical-align:top;`到你的`.item`班级

```
.item{
vertical-align:top;
} 
```

***[演示](http://jsfiddle.net/rohitazad/YfDWL/2/)***

***[演示二](http://jsfiddle.net/rohitazad/YfDWL/4/)***

# yii - 每个项目作为自动完成文本视图 Yii 中的链接

> ID：13699844
> 
> 赞同：-1
> 
> 时间：2012-12-04T09:38:19.090
> 
> 标签：yii

我想实现一个自动完成文本视图，每个数组项作为 Yii 中的链接。

我的小部件是

```
<?php
    $this->widget('zii.widgets.jui.CJuiAutoComplete',
                  array(
                      'name'=>'test1',
                      'value'=>'test21',
                      'source'=>$this->createUrl('user/autocompleteTest'),
                      'options'=>array(
                          'showAnim'=>'fold',
                       )
                  )
    );
?> 
```

我的控制器功能是

```
public function actionAutocomplete() 
{       
    $res =array();
    if (isset($_GET['term'])) 
    {           
        $qtxt ="SELECT USR_FirstName FROM {{Users}} WHERE USR_FirstName LIKE:USR_FirstName";
        $command =Yii::app()->db->createCommand($qtxt);
        $command->bindValue(":USR_FirstName", '%'.$_GET['term'].'%', PDO::PARAM_STR);
        $res =$command->queryColumn();
    }
    echo CJSON::encode($res);
    Yii::app()->end();
} 
```

自动完成文本视图工作正常。

现在我想要自动完成文本视图中每个项目的链接。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:47:10.637

你必须认为来自 Yii（和 JUi）的自动完成小部件是一个输入。下拉列表将是填充该输入的项目。

如果您需要思考，自动完成小部件不是您想要的。

# javascript - 在 PhoneGap (Android) 中显示 facebook 用户图像

> ID：13699845
> 
> 赞同：2
> 
> 时间：2012-12-04T09:38:24.037
> 
> 标签：javascript, android, facebook, facebook-graph-api, cordova

我有一个非常简单的用例。我有一个 facebook 用户 id 的 xhr 对象。现在我只想通过以下方式显示用户的图像。

```
 xhr.objects.forEach(function (user) {
 $('#userimage').append( '< img src="https://graph.facebook.com/"+user.user_id+"/picture/?type=small"/>');
                                                    }); 
```

由于某种原因，这不起作用。图像未显示。我添加了“https://graph.facebook.com”以允许访问。来自本地 Web 服务器的图像也正在正确显示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T10:11:04.783

你的字符串应该是

```
picture?type=small 
```

不是

```
picture/?type=small 
```

所以正确的网址是：

```
"https://graph.facebook.com/"+user.user_id+"/picture?type=small" 
```

请参阅[如何通过 fb api 获取 facebook 用户个人资料图片以](https://stackoverflow.com/questions/2821061/facebook-api-how-do-i-get-a-facebook-users-profile-image-through-the-fb-api)获取详细信息。

# jquery - 我的代码有什么问题隐藏而不改变背景？

> ID：13699846
> 
> 赞同：0
> 
> 时间：2012-12-04T09:38:28.013
> 
> 标签：jquery

```
$("ul.haschild").hide()    
$("#menu2 li span").click(function(){

        if ($("ul.haschild:hidden")) {
               $('ul.haschild').show('slow');
         $(this).("background",'url("images/image.jpg") no-repeat scroll right 10px #004DC1');
            }
            else if ($("ul.haschild:visible")) {
             $("ul.haschild").hide('slow');
         $(this).("background",'url("images/image2.jpg") no-repeat scroll right 10px #004DC1');
            }

       }); 
```

我的代码有什么问题，隐藏功能不起作用并且不改变背景？

html代码：

```
<ul id="menu2">
<li class="parent"><a href="/taxonomy/term/6">one</a><span></span><ul class="haschild">
<li><a href="/taxonomy/term/14">two</a></li>
<li><a href="/taxonomy/term/13">three</a></li>
</ul>
</li>
<li><a href="/taxonomy/term/7">four</a></li>
<li><a href="/taxonomy/term/8">five</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:03:47.240

有一些东西丢失/不正确：

*   首先，当带有孩子的菜单项具有“父”类时，为什么要在菜单中查找每个 li：

    `$('#menu2 li.parent span').click( function()`

*   您可能只想查找被单击的菜单项的子项：

    `$(this).parent().find('ul.haschild')`

*   最后但并非最不重要的一点是，您应该使用`.css('attribute', 'value')`

    ```
    `$('#menu2 li.parent span').click( function()
    {
        if( $(this).parent().find('ul.hasChildren:hidden').length > 0 )
        {
            $(this).parent().find('ul.haschild').show(500);
            $(this).css('background', 'background: ....;");
        }
        else
        {
            $(this).parent().find('ul.haschild').hide(500);
            $(this).css('background', 'background: ......;')
        }
    });`
    ```

 `* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:47:16.510

您的`if`-clause 不正确。更改以下内容：

```
if ($("ul.haschild:hidden")) { 
```

至：

```
if ($("ul.haschild:hidden").length > 0) { 
```

另外，您的第二个`if`无关紧要。如果元素未隐藏，则根据定义它必须是可见的。所以你可以把那个放在外面。`

# c# - 单击按钮获取上传的文件

> ID：13699850
> 
> 赞同：1
> 
> 时间：2012-12-04T09:38:43.927
> 
> 标签：c#, asp.net-mvc-3

我正在尝试使用 cshtml 在 MVC 3.0 中上传 excel 表。在我看来，我的页面中有两个按钮，每个按钮都有不同的操作结果。我已经在我的页面中实现了两个按钮的处理。但是，当我单击上传按钮时，给出 Request.Files 时没有文件。我应该在上传按钮单击的 ActionResult 中添加一个参数吗？下面是我的代码

```
[HttpPost]
[MultiButton(MatchFormKey = "Upload", MatchFormValue = "Upload")]
public ActionResult UploadFile()
{
    TMReportViewModel UploadModel = new TMReportViewModel();
    foreach (string file in Request.Files) 
    {
        HttpPostedFileBase hpf = Request.Files[file] as HttpPostedFileBase;
        if (hpf.ContentLength == 0) 
            continue;

        string savedFileName = Path.Combine(AppDomain.CurrentDomain.BaseDirectory, Path.GetFileName(hpf.FileName));

        hpf.SaveAs(savedFileName); 
     }
     return View(UploadModel);
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-10T17:11:06.867

我目前正在使用 ASP.NET MVC 4.0 进行此工作。

解决方案是在 HTML 中：

你必须写

```
@using (Html.BeginForm("UploadImage", "Image", FormMethod.Post,
                        new { enctype = "multipart/form-data" })) 
```

以便您的控制器知道您在*Request.File*中传递图像。

有关*详细信息*，请查看*[在 ASP.NET MVC 中上传和返回文件](http://www.codeproject.com/Articles/442515/Uploading-and-returning-files-in-ASP-NET-MVC)*。

对于 ASP.NET MVC 3.0，请查看*[How to upload image using jQuery in ASP.NET MVC 3](http://forums.asp.net/t/1673787.aspx)*。

# jquery - Firebug 不会在命名空间内的函数中命中断点

> ID：13699852
> 
> 赞同：0
> 
> 时间：2012-12-04T09:38:45.970
> 
> 标签：jquery, asynchronous, namespaces, firebug, breakpoints

我正在用一个主脚本（使用 jQuery）重新组织我所有引入命名空间的 js：

```
var myapp : {
    user :   { ...  },  
    ...
    init : function() { ...}
} 
```

我为某些页面加载了一个额外的js，例如'home.js'，带有：

```
(function(){
    $j.extend(true, myapp, { 
        _home : {
            init: function() { ...},        
            myfunc : function(prm){
                ...
            }
        }
    });
    myapp._home.init();
})(); 
```

现在，如果我在 myfunc 函数中放置一个断点，并调用 myapp._home.myfunc(); 在控制台中，Firebug 没有命中。

正常吗？我怎么能在那里有一个断点？

**编辑：**我将 _home 脚本包装成一个函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:43:47.383

尝试使用“调试器”关键字

```
function test(variable) {
  for(var i=0; i<10; i++) {
    if(i == 5)
      debugger;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:34:48.627

搜索关于异步调用和萤火虫问题，我发现了这个线程

[firebug (1.10.1) 建议 javascript 不局限于 firefox (13.0) 中的单个线程](https://stackoverflow.com/questions/11802771/firebug-1-10-1-suggests-javascript-is-not-confined-to-a-single-thread-in-firef)

这给出了一些细节。

结论：我将以“传统”方式包含我的文件以进行调试；）

# jquery - 具有多选选项的数据表

> ID：13699853
> 
> 赞同：2
> 
> 时间：2012-12-04T09:38:46.843
> 
> 标签：jquery, jquery-datatables

我已经在 wordress 上安装了 TablePress 扩展：单个列过滤（带有下拉菜单），它工作得很好。是否可以将下拉过滤器选项从页脚侧移动到页眉侧？

[数据表示例](http://datatables.net/extras/thirdparty/ColumnFilterWidgets/DataTables/extras/ColumnFilterWidgets/)

除非我在表格上放置过滤器（下拉），否则所有表格都将可见，是否有可能没有表格可见，当我选择过滤器时，只有它会根据选择显示表格？

```
(function($) {
/*
* Function: fnGetColumnData
* Purpose:   Return an array of table values from a particular column.
* Returns:   array string: 1d data array
* Inputs:    object:oSettings - dataTable settings object. This is always the last argument past to the function
*            int:iColumn - the id of the column to extract the data from
*            bool:bUnique - optional - if set to false duplicated values are not filtered out
*            bool:bFiltered - optional - if set to false all the table data is used (not only the filtered)
*            bool:bIgnoreEmpty - optional - if set to false empty values are not filtered from the result array
* Author:    Benedikt Forchhammer <b.forchhammer /AT\ mind2.de>
*/
$.fn.dataTableExt.oApi.fnGetColumnData = function ( oSettings, iColumn, bUnique,      bFiltered, bIgnoreEmpty ) {
     // check that we have a column id
if ( typeof iColumn == "undefined" ) return new Array();

// by default we only wany unique data
if ( typeof bUnique == "undefined" ) bUnique = true;

// by default we do want to only look at filtered data
if ( typeof bFiltered == "undefined" ) bFiltered = true;

// by default we do not wany to include empty values
if ( typeof bIgnoreEmpty == "undefined" ) bIgnoreEmpty = true;

// list of rows which we're going to loop through
var aiRows;

// use only filtered rows
if (bFiltered == true) aiRows = oSettings.aiDisplay;
// use all rows
else aiRows = oSettings.aiDisplayMaster; // all row numbers

// set up data array
var asResultData = new Array();

for (var i=0,c=aiRows.length; i<c; i++) {
    iRow = aiRows[i];
    var aData = this.fnGetData(iRow);
    var sValue = aData[iColumn];

    // ignore empty values?
    if (bIgnoreEmpty == true && sValue.length == 0) continue;

    // ignore unique values?
    else if (bUnique == true && jQuery.inArray(sValue, asResultData) > -1) continue;

    // else push the value onto the result data array
    else asResultData.push(sValue);
}

return asResultData;
}}(jQuery));

function datatables_fnCreateSelect( aData ) {
var r = '<select><option value=""></option>', i, iLen = aData.length;
for ( i=0 ; i<iLen ; i++ ) {
    r += '<option value="'+aData[i]+'">'+aData[i]+'</option>';
}
return r + '</select>';
     } 
```

而PHP代码是

```
 <?php
/**
 * Register necessary Plugin Filters
 */
add_filter( 'tablepress_shortcode_table_default_shortcode_atts',      'tablepress_add_shortcode_parameters_multi_filter_select' );
add_filter( 'tablepress_table_render_options', 'tablepress_set_table_foot_option', 10, 2 );
add_filter( 'tablepress_table_js_options',    'tablepress_add_multi_filter_select_js_options', 10, 3 );
add_filter( 'tablepress_datatables_command', 'tablepress_add_multi_filter_select_js_command', 10, 5 );

 /**
 * Add "datatables_multi_filter_select" as a valid parameter to the [table /] Shortcode
 */
 function tablepress_add_shortcode_parameters_multi_filter_select( $default_atts ) {
$default_atts['datatables_multi_filter_select'] = false;
return $default_atts;
 }

/**
    * Make sure that "table_foot" and "datatables_scrollX" are false, if     "datatables_multi_filter_select" is true,
    * as the footer will be appended by the JS. Scrolling will not work with automatically added content
   */
   function tablepress_set_table_foot_option( $render_options, $table ) {
if ( $render_options['datatables_multi_filter_select'] ) {
    $render_options['table_foot'] = false;
    $render_options['datatables_scrollX'] = false;
}
return $render_options;
 }

 /**
 * Pass "datatables_multi_filter_select" from Shortcode parameters to JavaScript arguments
  */
   function tablepress_add_multi_filter_select_js_options( $js_options, $table_id,   $render_options ) {
$js_options['datatables_multi_filter_select'] = $render_options['datatables_multi_filter_select'];

// register the JS
if ( $js_options['datatables_multi_filter_select'] ) {
    $suffix = ( defined( 'SCRIPT_DEBUG' ) && SCRIPT_DEBUG ) ? '' : '.min';
    $js_multi_filter_select_url = plugins_url( "multi-filter-select{$suffix}.js", __FILE__ );
    wp_enqueue_script( 'tablepress-multi_filter_select', $js_multi_filter_select_url, array( 'tablepress-datatables' ), '1.0', true );
}

return $js_options;
   }

    /**
    * Evaluate "datatables_multi_filter_select" parameter and add corresponding  JavaScript code, if needed
    */
    function tablepress_add_multi_filter_select_js_command( $command, $html_id,  $parameters, $table_id, $js_options ) {

if ( ! $js_options['datatables_multi_filter_select'] )
    return $command;

$name = str_replace( '-', '_', $html_id );
$datatables_name = "DT_{$name}";

$command = <<<JS
   var {$name} = $('#{$html_id}'),
{$datatables_name} = {$name}.dataTable({$parameters}),
{$name}_tfoot, {$name}_selects, ths = '<tfoot>';
     {$name}.find('thead th').each( function( i ) {
ths += '<th>' + datatables_fnCreateSelect( {$datatables_name}.fnGetColumnData(i)   )       + '</th>';
   } );
   ths += '</tfoot>';
   {$name}_tfoot = {$name}.append(ths).find('tfoot');
      {$name}_selects = {$name}_tfoot.find('select');
     {$name}_tfoot.on( 'change', 'select', function() {
{$datatables_name}.fnFilter( $(this).val(), {$name}_selects.index(this) );
      } );
    JS;
return $command;
     } 
```

# android - 谷歌地图 Android API v2 路线覆盖

> ID：13699856
> 
> 赞同：7
> 
> 时间：2012-12-04T09:39:02.683
> 
> 标签：android, overlay, routes, google-maps-android-api-2

今天玩弄新的 API 看看我是否可以将我当前的应用程序移植到它，我发现没有`MapView.getOverlays().add(...);` 。从概念上讲，似乎很难想象当地图倾斜时，以前的 2D 叠加层会如何重新排列。

我看到有一些叫做的功能，`GroundOverlay`但这看起来不适用于我的情况。我也看到`Polyline`了，这看起来更适合我的目的。

有没有人知道如何使用映射 API v2 添加路线覆盖（我使用的是 Directions API），或者是否能够添加路线覆盖？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-04T10:03:49.890

它已经完成了`Polyline`。来自 Google Developers 页面上的示例 - [https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/Polyline](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/Polyline)

```
GoogleMap map;
   // ... get a map.
   // Add a thin red line from London to New York.
   Polyline line = map.addPolyline(new PolylineOptions()
       .add(new LatLng(51.5, -0.1), new LatLng(40.7, -74.0))
       .width(5)
       .color(Color.RED)); 
```

# php - SQL 多重连接不会返回 Codeigniter 中的所有行

> ID：13699860
> 
> 赞同：1
> 
> 时间：2012-12-04T09:39:16.177
> 
> 标签：php, sql, codeigniter

这是我的查询：

```
$this->db->select('e.emp_no', 'e.birth_date', 'e.first_name', 'e.last_name', 'e.gender', 'e.hire_date')
            ->from('employees AS e')
            ->join('titles AS t', 'e.emp_no = t.emp_no')
            ->join('salaries AS s', 't.emp_no = s.emp_no')
            ->join('dept_emp AS de', 's.emp_no = de.emp_no')
            ->join('departments AS d', 'de.dept_no = d.dept_no')
            ->join('dept_manager AS dm', 'd.dept_no = dm.dept_no')
            ->limit($limit, $offset)
            ->order_by($sort_by, $sort_order)
            ->group_by('e.emp_no')
            ->where('t.title', 'staff'); 
```

然后我用这个返回数组：

```
$ret['rows'] = $q->get()->result();

        print_r ($ret['rows']); 
```

输出的只是emp_no：

```
Array ( [0] => stdClass Object ( [emp_no] => 10002 ) [1] => stdClass Object ( [emp_no] => 10005 ) [2] => stdClass Object ( [emp_no] => 10007 ) [3] => stdClass Object ( [emp_no] => 10011 ) ) 
```

如何输出所有选定的列？

PS：我也试过用`result_array()`什么都没用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:41:53.223

您应该将所有字段名称组合成一个字符串，而不是将它们分隔为多个参数以`select()`发挥作用

```
$this->db->select('e.emp_no, e.birth_date, e.first_name, e.last_name, e.gender, e.hire_date')
        ->from('employees AS e')
        ->join('titles AS t', 'e.emp_no = t.emp_no')
        ->join('salaries AS s', 't.emp_no = s.emp_no')
        ->join('dept_emp AS de', 's.emp_no = de.emp_no')
        ->join('departments AS d', 'de.dept_no = d.dept_no')
        ->join('dept_manager AS dm', 'd.dept_no = dm.dept_no')
        ->limit($limit, $offset)
        ->order_by($sort_by, $sort_order)
        ->group_by('e.emp_no')
        ->where('t.title', 'staff'); 
```

# linq - 合并具有重复对象的集合并使用 LINQ 更新某些属性

> ID：13699865
> 
> 赞同：0
> 
> 时间：2012-12-04T09:39:47.783
> 
> 标签：linq, c#-4.0

我有一个“OrganisationUnit”类型的对象集合

```
 Id   Index
    A   1
    B   2
    C   3
    D   4
    E   5
    F   6
    G   7 
```

**Id F在****Id B**之前移动

 **我有 Id 的 F 和 B 作为从另一层传递的额外可用的 OrganisationUnit 对象。

现在会发生什么：

**Id F**获得Id **B**的**索引**。**Id B**和所有**后面的 Id**必须将它们的索引增加 1

 ******结果应如下所示：

```
Id  Index
A   1
F   2
B   3
C   4
D   5
E   6
G   7 
```

您将如何将 2 个对象与集合（已包含这 2 个对象）合并并使用 LINQ 使用 index 属性进行更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:52:27.837

一点点 Linq 和一个简单的循环：

```
var f = units.First(u => u.ID == "F");
int newFIndex = 2;
var updateUnits = units
    .Where(u => u.Index >= newFIndex && u.Index < f.Index)
    .ToList();
foreach (OrganisationUnit u in updateUnits)
    u.Index++;
f.Index = newFIndex; 
```

[**演示**](http://ideone.com/bVjYm7)********

# jquery - jqGrid排序列忽略html标记

> ID：13699868
> 
> 赞同：0
> 
> 时间：2012-12-04T09:40:10.040
> 
> 标签：jquery, jqgrid

我需要在 jqGrid 中实现自定义排序，在列中我们有 html 标记，它会阻止正确排序，例如：

```
<a href="/Templates/Article.aspx?id=12884945915" class="link" title="Article  123">Article </a> 
```

现在有一种方法可以设置 jqGrid 以忽略 html 标记对该列进行排序。

**更新** 这是此列的 colmodel

```
{"sortable":true,"name":"Title","index":"Title","hidden":false,"sorttype":null,"formatter":null,"formatoptions":null,"datefmt":null,"typeName":null}, 
```

这是列的一个示例：

```
"Title":"<a href='/Templates/Article.aspx?id=4294967489' class='link' title='Sensor'>Sensor</a>" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T10:39:30.220

`formatter: "showlink"`我想如果您根据预定义或自定义格式化程序构建列的包含，您将不会遇到所描述的问题。如果使用[自定义格式化程序](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:custom_formatter)，您应该不要忘记定义从列的单元格中获取文本的[unformat函数。](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:custom_formatter#unformatting)

我想如果您只为列定义[unformat属性，您的问题将得到解决。](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:custom_formatter#unformatting)

另一种选择是使用自定义排序。只不过是指定`sorttype`as **function**而已。[答案](https://stackoverflow.com/a/8001822/315935)和[这个](https://stackoverflow.com/a/5296935/315935)提供了这种实现的例子。重要的是要了解它`sorttype`仅在*本地*排序的情况下使用。如果您使用服务器端排序，那么您应该在服务器端代码中搜索所描述问题的根源。

**更新**：不建议在数据中使用 HTML 片段。在将数据与标记混合的方式中，这使得排序更加困难。取而代之的是，您可以例如替换输入数据

```
"Title":"<a href='/Templates/Article.aspx?id=4294967489' class='link' title='Sensor'>Sensor</a>" 
```

到

```
"ArticleId":4294967489, "Title":"Sensor" 
```

`<a>`您可以根据自定义格式化程序构建单元格内部的元素。在这种情况下，您可以使用列定义，例如

```
{name: "Title", width: 100,
    formatter: function (cellvalue, options, rowObject) {
        return "<a href='/Templates/Article.aspx?id=" + rowObject.refid +
            "' class='link' title='" + $.jgrid.stripHtml(cellvalue) + "'>" +
            $.jgrid.htmlEncode(cellvalue) + "</a>";
    }} 
```

如果您在网格中使用的 rowid（具有名称`id`的列或具有属性`key: true`且值是唯一的列）与`ArticleId`您可以使用`options.rowId`而不是`rowObject.refid`.

[例如，您可以在答案](https://stackoverflow.com/a/13550415/315935)中阅读有关自定义格式化程序的更多信息。

# java - JSTL 将数字作为文本导出到 Excel

> ID：13699871
> 
> 赞同：0
> 
> 时间：2012-12-04T09:40:18.627
> 
> 标签：java, excel, struts, jstl, el

您好，我目前正在使用 JSTL 将字符串列表导出到 Excel

我正在遍历要导出的值列表，即使当我的 excel 页面上有“001”之类的内容时这些值被定义为字符串，我也会得到“1”，但相同的列表包含“XXX”之类的值，因此我想excel 会足够聪明，知道我有一个字符串列表而不是数字列表。

我的第一个解决方法是为每个值添加一个尾随空格，但这不是一个优雅的解决方案。

告诉 excel 我的 List 由字符串组成并导出列表中的值的最佳方法是什么？

这是我目前正在做的一个示例：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:11:38.183

我找到了一个可行的解决方案，实际上可以通过 CSS 格式化 excel 单元格，在我的情况下，将具有以下格式的 CSS 类添加到感兴趣的 TD 就足够了

```
<style type="text/css">
    .excel_data_value_string{   
    mso-number-format:"\@";
}
</style>

<c:forEach var="object" items="${objectList}">
    <td class="excel_data_value_string">
        <c:out value="${object.value}"/>
    </td>
</c:forEach> 
```

它指定该列应被视为字符串，对于那些感兴趣的人，还有许多其他方式来格式化输出：

使用 mso-number-format 设置 Excel 单元格样式

```
mso-number-format:"0"                       //NO Decimals
mso-number-format:"0\.000"                  //3 Decimals
mso-number-format:"\#\,\#\#0\.000"          //Comma with 3 dec
mso-number-format:"mm\/dd\/yy"              //Date7
mso-number-format:"mmmm\ d\,\ yyyy"         //Date9
mso-number-format:"m\/d\/yy\ h\:mm\ AM\/PM" //D -T AMPM
mso-number-format:"Short Date"              //01/03/1998
mso-number-format:"Medium Date"             //01-mar-98
mso-number-format:"d\-mmm\-yyyy"            //01-mar-1998
mso-number-format:"Short Time"              //5:16
mso-number-format:"Medium Time"             //5:16 am
mso-number-format:"Long Time"               //5:16:21:00
mso-number-format:"Percent"                 //Percent - two decimals
mso-number-format:"0%"                      //Percent - no decimals
mso-number-format:"0\.E+00"                 //Scientific Notation
mso-number-format:"\@"                      //Text
mso-number-format:"\#\ ???\/???"            //Fractions - up to 3 digits (312/943)
mso-number-format:"\0022£\0022\#\,\#\#0\.00"    //£12.76
mso-number-format:"\#\,\#\#0\.00_ \;\[Red\]\-\#\,\#\#0\.00\ "   //2 decimals, negative numbers in red and signed (1.56 -1.56) 
```

# git - 如何使本地 svn-git 存储库与 .svn 保持同步？

> ID：13699872
> 
> 赞同：1
> 
> 时间：2012-12-04T09:40:22.433
> 
> 标签：git, svn, git-svn

我正在开发一个使用 SVN 作为存储库的项目，我将它与 Netbeans SVN 插件结合使用。我发现 Netbeans SVN diff 缺乏显示彼此下方的几个 diff，因此希望`git-svn`用于能够使用`git gui`.

现在的问题是使两个存储库保持同步。我目前的工作流程是：

*   更新（没有本地更改）：

    ```
    svn up
    git stash -u # include new files too
    git svn rebase
    git stash drop 
    ```

*   提交：

    ```
    git commit
    git commit ...
    git svn dcommit 
    ```

这些基本案例确实有效，但如果我有本地未暂存/未提交的更改，它就不能很好地工作。

保持本地 git-svn 和 .svn 同步的更好方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:18:05.153

我找到了一个很好的解决方法。这个想法是使用颠覆来保持文件更新，并让 git 只更新其历史记录而不触及工作树中的任何文件。`git svn`创建了一个特殊的`git-svn`分支，其中包含一次获取的最新颠覆代码。

更新文件的命令，后跟 git repo 历史更新：

```
svn up
git svn fetch
git reset --mixed git-svn 
```

最后一个`git reset --mixed`命令是必要的，以确保 git 知道您的文件来自上一个 SVN 修订版。请注意，此命令将重置您所做的任何提交`git commit`（删除提交消息，而不是更改）。作为解决方案，通过提交`svn commit`并获取您的历史记录，如上所示。

`git reset --mixed git-svn`不知何故无法让你承诺使用`dcommit`. 运行后`git reset --mixed git-svn`，按照以下顺序使用 git 提交：

```
git stash
git svn rebase
git stash pop
git commit ...
git svn dcommit 
```

# java - 如何使用 Hibernate 保存 Class 类型的属性？

> ID：13699875
> 
> 赞同：1
> 
> 时间：2012-12-04T09:40:41.280
> 
> 标签：java, hibernate

更具体地说，如何使用 Hibernate 保存类型类列表？

我有以下（简化）类：

```
@Entity
@Table(name = "bundles")
public class Bundle{

    @Id
    private Long id;

    private List<Class<?>> classes;

    // Getters & Setters and some logic
} 
```

现在，我该如何将其保存在数据库中？我需要一个数据库模式，它提供了一个保存“类”类型的选项，但我想不通。我使用 PostgreSQL 作为数据库。

它是一个列表这一事实并不重要，我只会用@OneToMany 对其进行注释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T09:51:14.470

根据[文档](http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/types.html#types-basic-value-class)，`Class<?>`hibernate正确处理：

> 6.1.1.20。java.lang.类
> 
> org.hibernate.type.ClassType 将 java.lang.Class 映射到 JDBC VARCHAR（使用类名）
> 
> 在类型注册表中的 class 和 java.lang.Class 下注册（请参阅第 6.5 节，“类型注册表”）。

数据库“列”需要`VARCHAR`

# ios - 如何根据从另一个表中的选择更改表的数据源

> ID：13699876
> 
> 赞同：0
> 
> 时间：2012-12-04T09:40:45.820
> 
> 标签：ios, uitableview

我有一个包含 3 个表的视图

1-第一

2 秒

三分之三

我已经尝试过`UISplitView`视图，但正如许多帖子所说，它只支持 2 个视图，所以我决定移到 3 个表选择

我想根据用户点击第一个表来更改第二个表的数据源

这是我的代码：首先

```
-(void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    [tableView deselectRowAtIndexPath:indexPath animated:YES];
    items = [NSMutableArray arrayWithObjects:@"test",@"20",@"30",@"40",@"5",@"6",@"6",@"8",@"9",@"10",@"11",@"12",nil];
    SecondViewController *s=[[SecondViewController alloc]init];
    [s setitems:items];

} 
```

在第二

```
-(void) setitems :(NSMutableArray *)datasource
{
    items=datasource;
    [self.tableView reloadData];
} 
```

问题是`numberOfRowsInSection`第二张桌子没有被解雇？我想知道动态更改表数据源的最佳方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:19:54.823

您是否将第二个 tableview 的委托设置为 self？否则不会调用 tableview 的委托方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:22:15.050

UITableView 委托只有在加载了 tableView 时才会被触发（在视图上可见）。您正在初始化 SecondViewController 但表将被加载。它会在您访问（或显示）SecondViewController 的视图时加载。所以尝试调用 [s setitems:items]; 添加 SecondViewController 的视图后。

# php - 如果有效，这是三元吗？

> ID：13699878
> 
> 赞同：0
> 
> 时间：2012-12-04T09:40:55.630
> 
> 标签：php, if-statement, ternary-operator

我正在使用三元 if 语句，因为我不能在以下情况下使用 switch，但是，有没有更好的方法？我最近读到这些可能是资源匮乏的？（这可以在一个页面内多次调用）

```
$filter= (
    ($price_check > '0' && $price_check < '20.01') ? '020' : 
    (($price_check > '20.00' && $price_check < '50.01') ? '2050' :
    (($price_check > '50.00' && $price_check < '100.01') ? '50100' :
    (($price_check > '100.00' && $price_check < '200.01') ? '100200' :
    (($price_check > '200.00' && $price_check < '500.01') ? '200500' :
    (($price_check > '500.00') ? '501' : '0'
)))))); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T09:44:08.230

谈论三元运算符的“效率”是一个红鲱鱼。它有多快并不重要，而且如果将代码放置在计算绑定应用程序的内部循环中（这几乎肯定不是），它可能仍然无关紧要。

你*应该*问的是“六个月后当我需要做出改变时，我想在我面前找到这个吗？”。

根据经验，可维护性应始终放在首位。如果你不知道这段代码*确实是*一个瓶颈，你应该尽可能方便地编写它。

因此，您可能会考虑性能较低但更易于维护的替代样式，例如：

```
$data = array(
    '0'      => '020',
    '20.00'  => '2050',
    '50.00'  => '50100',
    // ...
);

$price_check = '...';
$filter = '0'; // default value
foreach ($data as $floor => $value) {
    if ($floor > $price_check) break;
    $filter = $value;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T09:49:04.670

只是想指出你可以简化你的范围检查，每个“elseif”都有下限是不必要的，因为如果它匹配它就不会调用下一个测试条件：

```
$filter = (
     $price_check <= 0   ? '0' :
    ($price_check <= 20  ? '020' : 
    ($price_check <= 50  ? '2050' :
    ($price_check <= 100 ? '50100' :
    ($price_check <= 200 ? '100200' :
    ($price_check <= 500 ? '200500' : 
    '501'
)))))); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T09:52:08.403

在当今的计算中，除非您在*嵌入式系统领域*工作，否则**人的时间**远比**计算机时间**更有价值：一台计算机无论哪种方式都需要几纳秒，而瓶颈将在其他地方（更有可能在*网络传输*中） . 相反，您应该问自己，以这种方式编写的代码是否更容易**理解**。

还要记住，今天效率不高的陈述，明天可能会更好，因为语言得到改进。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-03T18:32:56.893

（是的，我知道这个问题已经过时了，但我觉得要在其中添加我自己的两分钱。）虽然有很多方法可以给猫剥皮。我觉得要发布一些我在运行多次测试时所做的观察。您也可以应用相同的测试和/或在[http://3v4l.org/](http://3v4l.org/)（在线 PHP 和 HHVM Shell）上应用它们。要进行测试，您应该运行多个以正确衡量差异。在测试中，我接受了 WebChemist 的响应并将其反转。为什么？有时只是好玩。然而，实际结果表明，三元整体有微小的改进。对两者都使用各种输入值。

```
$price_check = '...';

$filter = (
    ( $price_check > '500') ? '501'     : 
    (($price_check > '200') ? '200-500' :
    (($price_check > '100') ? '100-200' :
    (($price_check > '50')  ? '50-100'  :
    (($price_check > '20')  ? '20-50'   :
    (($price_check > '0')   ? '0-20'    : 
    '0'
)))))); 
```

然后虽然下一个示例可以更好地改进，但它只是一个示例。所以不要将其判断为生产水平。这只是三元和 if/else 之间的一个想法。总体而言，if/else 的性能优于应用的任何三元。主要是做这个测试是因为我总是两端都读，三进制更容易读，或者if/else更容易读。我说两者都可以如以下示例中提供的那样。最后，我真的相信您使用其中一个或另一个取决于具体情况。就这些数据而言，过滤价格之间存在关联。if/else 最终在速度上胜过了三元。它也很容易阅读（我认为）。最后，它都是微型爵士乐，所以它真的没那么重要。那些觉得不同意的人可以在自己的环境中运行自己的测试，或者访问提供的网站。有时比在互联网上相信的话更好。我在自己的环境以及那个网站上进行了许多测试，以得出一些基本结论。我仍然喜欢阅读三元和 if/else 参数。网上流传着一些不错的读物。此外，如果在示例中掉线真的会困扰您。过去，它不会影响性能，甚至总体而言，使用此代码会更快。您可以在转义中编码，或完全重组它。

```
$price_check = '...';

    $filter='501';
    if($price_check > '500' || $filter='200-500')
    if($price_check > '200' || $filter='100-200')
    if($price_check > '100' || $filter='50-100' )
    if($price_check > '50'  || $filter='20-50'  )
    if($price_check > '20'  || $filter='0-20'   )
    if($price_check <= '0') $filter=0; 
```

我想补充一点，如果数据大小适中，Jon 对数组的建议可能是最好的。三元和 if/else 可以处理大多数基本的嵌套。中度推荐列表。任何更多的东西都应该被推送到数据库并被访问。此外，我稍微修正了 Jon 的代码。（如果您将三元和 if/else 嵌套在数据库上，那么您就有问题了。***）***

```
$data = '20.00';
$range = '';

$arr = [
    '0',
    '20'  => '0-20',
    '50'  => '20-50',
    '100' => '50-100',
    '200' => '100-200',
    '500' => '200-500'
];

foreach ($arr as $floor => $value) {
    $range = $value;
    if ($floor >= $data)break;
} echo $range; 
```

# asp.net - 为什么在 IIS 7.5 下调试 Web 应用程序时总是收到 HTTP 500 - 内部服务器错误？

> ID：13699880
> 
> 赞同：2
> 
> 时间：2012-12-04T09:40:57.643
> 
> 标签：asp.net, asp.net-mvc, visual-studio, iis, visual-studio-2012

我试图让 Orchard CMS 在 IIS 下运行，但我不断收到 HTTP 500 响应。我已经在 VS2012 中构建并运行了源代码，但即使异常设置为在抛出时中断，VS 也不会中断，而且我仍然得到一个非常无用且不透明的 HTTP 500 响应。

我创建了一个名为 Orchard 的新网站，指向 Web 应用程序的源文件夹，即*C:\Development\Orchard.Source.1.6\src\Orchard.Web* ，并将其绑定到我添加的主机名*orchard.local*到我的 127.0.0.1 下的主机文件。我读过在 IIS 下运行网站时需要为 IIS_IUSRS 设置文件系统权限；我不知道我是否仍然在VS下进行调试。虽然VS会处理这个问题，但我会考虑的。然后，由于某种原因，我没有那个组，我只有一个 IIS_WPG 组，它应该是用于 IIS6 的。

如果我什至无法让 VS 中断异常，我该如何诊断导致此内部服务器错误的原因？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T13:45:04.503

发生这种情况是因为我在 Visual Studio 之后安装了 IIS，因此没有注册 ASP.NET 4。我通过运行解决了它

```
C:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet_regiis -i 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T10:33:49.077

你检查过果园日志吗？您可以在 App_Data 文件夹中找到它们。应该在那里记录 500 个错误

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-04-05T03:49:41.953

我重新启动了我的系统并且可以正常工作，然后我的朋友遇到了同样的问题，他重新启动了 Visual Studio 并且可以正常工作

# python - 共享资源时如何避免python线程中的全局？

> ID：13699891
> 
> 赞同：3
> 
> 时间：2012-12-04T09:41:36.960
> 
> 标签：python, multithreading, global

我正在尝试在 python 中构建一个依赖多个线程的程序，并在线程之间共享数据。我试图避免使用 global 关键字执行此操作，但到目前为止还没有到达任何地方。

作为一个简单的例子（下面的代码），我的 main() 函数产生了一个线程 thread1，它应该能够访问变量 count，在这种情况下只是为了打印它。同时，main() 对这个变量进行了迭代，thread1 应该可以看到计数的变化。这里有一些自包含的代码：

```
import threading
import time

class myThread (threading.Thread):

    def __init__(self, threadID):
        self.threadID = threadID
        threading.Thread.__init__(self)

    def run(self):
        global count
        for i in range(10):
            print "count is now: ", count, " for thread ", self.threadID, "\n"
            time.sleep(5)

def main():

    global count
    count = 0

    # spawn one or more threads
    thread1 = myThread(1)
    thread1.start()

    for i in range(20):
        time.sleep(2)
        count = count + 1

    # wait for thread1 to finish
    thread1.join()

main() 
```

在阅读 python 中的线程时，除了使用 global. 然而，当阅读 global 时，大多数人说你应该很少使用它，有充分的理由，有些人甚至认为它应该从 python 中完全删除。所以我想知道是否真的有另一种方法可以让thread1“被动地”检测到main（）有迭代计数，并访问那个新值？例如，我对 python 和指针了解不多（它们甚至存在于 python 中吗？），但无论如何我都会假设这正是 global 实现的。

理想情况下，每当迭代 count 时，我都可以从 main() 调用 thread1 方法来设置新的 self.count，但是由于 thread1 有一个阻塞的 run() 方法，如果没有另一个方法，我无法看到如何做到这一点thread1里面的独立线程，看起来太复杂了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T09:58:53.433

您可以创建线程对象并填充类属性。

```
import threading
class MyThreadClass(threading.Thread):
  def __init__(self, fruits):
    threading.Thread.__init__(self)
    self.fruits = fruits    

  def run(self):
    self.fruits.append('banana')  

list_fruit = ['apple', 'orange']    
print 'BEFORE:', list_fruit
thread = MyThreadClass(list_fruit)
thread.start() 
thread.join() #Wait for the thread to finish
print 'AFTER:', list_fruit 
```

输出：

```
BEFORE: ['apple', 'orange']
AFTER: ['apple', 'orange', 'banana'] 
```

对于您的情况，您可以尝试：

```
import threading
import time

class myThread (threading.Thread):

    def __init__(self, threadID):
        self.threadID = threadID
        self.count = 0
        threading.Thread.__init__(self)

    def run(self):
        for i in range(10):
            print "count is now: ", self.count, " for thread ", self.threadID, "\n"
            time.sleep(5)

def main():    
    # spawn one or more threads
    thread1 = myThread(1)
    thread1.start()

    for i in range(20):
        time.sleep(2)
        thread1.count = thread1.count + 1

    # wait for thread1 to finish
    thread1.join()
    print thread1.count

main() 
```

如果您想使用多个线程之间共享的相同计数，您可以将您的计数放入仅包含一个元素的列表中。这样，当将计数分配给线程属性时，它就不会是硬拷贝。

# php - 在 x 数量的列表项之后自动在新列中继续

> ID：13699900
> 
> 赞同：0
> 
> 时间：2012-12-04T09:42:17.550
> 
> 标签：php, wordpress, listitem, multiple-columns

我正在制作一个需要 3 列项目列表的网站。该列表应该成为按字母顺序显示 21 个项目的 wp_nav，因此它应该能够自行创建新列（ul）。

它目前看起来像下面的代码，但由于 wordpress 将加载 wp_nav，我真的不知道如何动态地实现这一点。有没有办法使用 jquery 或 php 来做到这一点？

```
 <nav>
        <ul>
            <li>Item</li>
            <li>Item</li>
            <li>Item</li>
            <li>Item</li>
            <li>Item</li>
            <li>Item</li>
            <li>Item</li>
        </ul>
        <ul>
            <li>Item</li>
            (+6) ...
        </ul>
        <ul>
            <li>Item</li>
            (+6) ...
        </ul>
    </nav> 
```

我在想类似 :nth-child 的东西，或者 php 计数器。

# c++ - 在 OpenCV 中将向量转换为 mat

> ID：13699901
> 
> 赞同：10
> 
> 时间：2012-12-04T09:42:31.733
> 
> 标签：c++, opencv, vector, matrix, type-conversion

我正在使用 opencv 2.4.3 使用以下代码执行向量到矩阵的转换：

```
struct Component
{
    cv::Rect box;
    double area;
    double circularity; 
}

int main ( ... )
{
     cv::vector < Component > components;         
     cv::Mat componentMat ( components, true );
     std::cout << componentMat;
     return 0; 
} 
```

但它给出了一个错误，说：

```
OpenCV Error: Unsupported format or combination of formats() in unknown function, file ...\opencv\modules\core\src\out.cpp, line 111 
```

我在这里做错了什么？有没有其他方法可以将此向量转换为矩阵形式？谢谢你。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-04T15:24:00.623

在[文档](http://docs.opencv.org/modules/core/doc/basic_structures.html#mat-mat)中有对 Mat 构造函数的引用，其中他们说支持哪些类型的向量：

> “构造函数可以处理任意类型，其中有正确声明的 DataType ，即**向量元素必须是原始数字或单一类型的数字元组**。当然，**不支持混合类型的结构。”**

因此**，不支持您使用的类型**，因此您会收到错误消息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T13:51:09.083

您正在尝试创建“组件”类型的矩阵。它行不通。Mat 仅支持特定的数据类型，如 Point2d、Point3d 等。如果您尝试使用它们，它应该可以工作。

# apache-flex - 子 swf 在 Chrome 中报告 2032 流错误

> ID：13699902
> 
> 赞同：0
> 
> 时间：2012-12-04T09:42:34.057
> 
> 标签：apache-flex, actionscript, flash

我正在尝试从另一个 swf 加载一个子 swf，如下所示：

```
var swfLoader : Loader = new Loader();
swfLoader.contentLoaderInfo.addEventListener(Event.COMPLETE,                   
   onLoaderCompleteInitialScreen);          
movieClip.addChild(swfLoader);
this.addChild(movieClip);
swfLoader.load(new URLRequest("child.swf"));

private function onLoaderCompleteInitialScreen(e : Event) : void {
        var dobj : DisplayObject = DisplayObject(e.currentTarget.content);
        dobj.addEventListener(FlexEvent.APPLICATION_COMPLETE,
            initalScreenSWFAppComplete);
} 
```

我将此代码部署在我的机器上运行的 Tomcat 服务器上。

如果我从本地浏览器加载父 swf：myMachineIp/parent.swf 父 swf 工作得很好，但子 swf 仅在 IE 和 Firefox 中正确加载。它在 Chrome 中不起作用。它报告 #2032 错误。

如果我尝试从另一台计算机上运行的浏览器加载父 swf，则子 swf 将在所有浏览器上报告 2032 错误。

我可以看到 Loader 的事件完成了，这意味着 swf 是可访问的，但 initalScreenSWFAppComplete 不再执行。

我真的不知道可能是什么问题。既然Loader完成了，我假设没有跨域问题，swf是可达的吧？还有什么可以触发这个？

在此先感谢，米哈

# java - SSL 握手中的异常

> ID：13699903
> 
> 赞同：0
> 
> 时间：2012-12-04T09:42:34.607
> 
> 标签：java, security, ssl, weblogic, handshaking

我有一个登录服务器，部署在 Weblogic 上，具有演示身份和 SSL 连接的信任存储，否则我有一个部署在 Jetty 上的客户端应用程序，我的客户端向服务器发送请求，服务器响应它并重定向客户端 URL

例如，Weblogic 服务器正在使用这些密钥库： `~/Oracle/Middleware/wlserver_12.1/server/lib/DemoIdentity.jks`和`~/Oracle/Middleware/wlserver_12.1/server/lib/DemoTrust.jks`

我在使用 Jetty maven 插件部署的客户端应用程序中引用了这个密钥库：

```
<connector implementation="org.mortbay.jetty.security.SslSocketConnector">
    <port>8443</port>

    <keystore>~/Oracle/Middleware/wlserver_12.1/server/lib/DemoIdentity.jks</keystore>
    <keyPassword>DemoIdentityPassPhrase</keyPassword>
    <password>DemoIdentityKeyStorePassPhrase</password>
    <truststore>~/Oracle/Middleware/wlserver_12.1/server/lib/DemoTrust.jks</truststore>
    <trustPassword>DemoTrustKeyStorePassPhrase</trustPassword>

</connector> 
```

我还将服务器证书导入我的 jre/lib/security/cacerts 密钥库并在我的码头服务器中使用它

但是在客户端和服务器之间握手的两种状态下，我都得到了这个异常

```
HTTP ERROR: 500

javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
RequestURI=/cas-maven-spring-client/caslogin.jsp

Caused by:

java.lang.RuntimeException: javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
    at org.jasig.cas.client.util.CommonUtils.getResponseFromServer(CommonUtils.java:341)
    at org.jasig.cas.client.util.CommonUtils.getResponseFromServer(CommonUtils.java:305)
    at org.jasig.cas.client.validation.AbstractCasProtocolUrlBasedTicketValidator.retrieveResponseFromServer(AbstractCasProtocolUrlBasedTicketValidator.java:50)
    at org.jasig.cas.client.validation.AbstractUrlBasedTicketValidator.validate(AbstractUrlBasedTicketValidator.java:207)
    at org.jasig.cas.client.validation.AbstractTicketValidationFilter.doFilter(AbstractTicketValidationFilter.java:169)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)
    at org.jasig.cas.client.authentication.AuthenticationFilter.doFilter(AuthenticationFilter.java:116)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:149)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1084)
    at org.jasig.cas.client.session.SingleSignOutFilter.doFilter(SingleSignOutFilter.java:76)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1084)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:360)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:726)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405)
    at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:206)
    at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:324)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:505)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:829)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:514)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:211)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:380)
    at org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:228)
    at org.mortbay.jetty.security.SslSocketConnector$SslConnection.run(SslSocketConnector.java:620)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:488)
Caused by: javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
    at com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Alerts.java:174)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1591)
    at com.sun.net.ssl.internal.ssl.Handshaker.fatalSE(Handshaker.java:187)
    at com.sun.net.ssl.internal.ssl.Handshaker.fatalSE(Handshaker.java:181)
    at com.sun.net.ssl.internal.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1035)
    at com.sun.net.ssl.internal.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:124)
    at com.sun.net.ssl.internal.ssl.Handshaker.processLoop(Handshaker.java:516)
    at com.sun.net.ssl.internal.ssl.Handshaker.process_record(Handshaker.java:454)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:884)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1096)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1123)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1107)
    at sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:415)
    at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:166)
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1026)
    at sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:234)
    at org.jasig.cas.client.util.CommonUtils.getResponseFromServer(CommonUtils.java:326)
    ... 30 more
Caused by: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
    at sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:285)
    at sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:191)
    at sun.security.validator.Validator.validate(Validator.java:218)
    at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:126)
    at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:209)
    at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:249)
    at com.sun.net.ssl.internal.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1014)
    ... 42 more
Caused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
    at sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:174)
    at java.security.cert.CertPathBuilder.build(CertPathBuilder.java:238)
    at sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:280)
    ... 48 more
Caused by:

javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
    at com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Alerts.java:174)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1591)
    at com.sun.net.ssl.internal.ssl.Handshaker.fatalSE(Handshaker.java:187)
    at com.sun.net.ssl.internal.ssl.Handshaker.fatalSE(Handshaker.java:181)
    at com.sun.net.ssl.internal.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1035)
    at com.sun.net.ssl.internal.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:124)
    at com.sun.net.ssl.internal.ssl.Handshaker.processLoop(Handshaker.java:516)
    at com.sun.net.ssl.internal.ssl.Handshaker.process_record(Handshaker.java:454)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:884)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1096)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1123)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1107)
    at sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:415)
    at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:166)
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1026)
    at sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:234)
    at org.jasig.cas.client.util.CommonUtils.getResponseFromServer(CommonUtils.java:326)
    at org.jasig.cas.client.util.CommonUtils.getResponseFromServer(CommonUtils.java:305)
    at org.jasig.cas.client.validation.AbstractCasProtocolUrlBasedTicketValidator.retrieveResponseFromServer(AbstractCasProtocolUrlBasedTicketValidator.java:50)
    at org.jasig.cas.client.validation.AbstractUrlBasedTicketValidator.validate(AbstractUrlBasedTicketValidator.java:207)
    at org.jasig.cas.client.validation.AbstractTicketValidationFilter.doFilter(AbstractTicketValidationFilter.java:169)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)
    at org.jasig.cas.client.authentication.AuthenticationFilter.doFilter(AuthenticationFilter.java:116)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:149)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1084)
    at org.jasig.cas.client.session.SingleSignOutFilter.doFilter(SingleSignOutFilter.java:76)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1084)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:360)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:726)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405)
    at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:206)
    at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:324)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:505)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:829)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:514)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:211)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:380)
    at org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:228)
    at org.mortbay.jetty.security.SslSocketConnector$SslConnection.run(SslSocketConnector.java:620)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:488)
Caused by: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
    at sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:285)
    at sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:191)
    at sun.security.validator.Validator.validate(Validator.java:218)
    at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:126)
    at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:209)
    at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:249)
    at com.sun.net.ssl.internal.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1014)
    ... 42 more
Caused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
    at sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:174)
    at java.security.cert.CertPathBuilder.build(CertPathBuilder.java:238)
    at sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:280)
    ... 48 more
Caused by:

sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
    at sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:285)
    at sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:191)
    at sun.security.validator.Validator.validate(Validator.java:218)
    at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:126)
    at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:209)
    at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:249)
    at com.sun.net.ssl.internal.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1014)
    at com.sun.net.ssl.internal.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:124)
    at com.sun.net.ssl.internal.ssl.Handshaker.processLoop(Handshaker.java:516)
    at com.sun.net.ssl.internal.ssl.Handshaker.process_record(Handshaker.java:454)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:884)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1096)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1123)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1107)
    at sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:415)
    at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:166)
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1026)
    at sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:234)
    at org.jasig.cas.client.util.CommonUtils.getResponseFromServer(CommonUtils.java:326)
    at org.jasig.cas.client.util.CommonUtils.getResponseFromServer(CommonUtils.java:305)
    at org.jasig.cas.client.validation.AbstractCasProtocolUrlBasedTicketValidator.retrieveResponseFromServer(AbstractCasProtocolUrlBasedTicketValidator.java:50)
    at org.jasig.cas.client.validation.AbstractUrlBasedTicketValidator.validate(AbstractUrlBasedTicketValidator.java:207)
    at org.jasig.cas.client.validation.AbstractTicketValidationFilter.doFilter(AbstractTicketValidationFilter.java:169)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)
    at org.jasig.cas.client.authentication.AuthenticationFilter.doFilter(AuthenticationFilter.java:116)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:149)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1084)
    at org.jasig.cas.client.session.SingleSignOutFilter.doFilter(SingleSignOutFilter.java:76)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1084)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:360)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:726)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405)
    at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:206)
    at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:324)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:505)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:829)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:514)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:211)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:380)
    at org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:228)
    at org.mortbay.jetty.security.SslSocketConnector$SslConnection.run(SslSocketConnector.java:620)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:488)
Caused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
    at sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:174)
    at java.security.cert.CertPathBuilder.build(CertPathBuilder.java:238)
    at sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:280)
    ... 48 more
Caused by:

sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
    at sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:174)
    at java.security.cert.CertPathBuilder.build(CertPathBuilder.java:238)
    at sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:280)
    at sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:191)
    at sun.security.validator.Validator.validate(Validator.java:218)
    at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:126)
    at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:209)
    at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:249)
    at com.sun.net.ssl.internal.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1014)
    at com.sun.net.ssl.internal.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:124)
    at com.sun.net.ssl.internal.ssl.Handshaker.processLoop(Handshaker.java:516)
    at com.sun.net.ssl.internal.ssl.Handshaker.process_record(Handshaker.java:454)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:884)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1096)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1123)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1107)
    at sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:415)
    at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:166)
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1026)
    at sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:234)
    at org.jasig.cas.client.util.CommonUtils.getResponseFromServer(CommonUtils.java:326)
    at org.jasig.cas.client.util.CommonUtils.getResponseFromServer(CommonUtils.java:305)
    at org.jasig.cas.client.validation.AbstractCasProtocolUrlBasedTicketValidator.retrieveResponseFromServer(AbstractCasProtocolUrlBasedTicketValidator.java:50)
    at org.jasig.cas.client.validation.AbstractUrlBasedTicketValidator.validate(AbstractUrlBasedTicketValidator.java:207)
    at org.jasig.cas.client.validation.AbstractTicketValidationFilter.doFilter(AbstractTicketValidationFilter.java:169)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)
    at org.jasig.cas.client.authentication.AuthenticationFilter.doFilter(AuthenticationFilter.java:116)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:149)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1084)
    at org.jasig.cas.client.session.SingleSignOutFilter.doFilter(SingleSignOutFilter.java:76)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1084)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:360)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:726)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405)
    at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:206)
    at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:324)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:505)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:829)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:514)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:211)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:380)
    at org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:228)
    at org.mortbay.jetty.security.SslSocketConnector$SslConnection.run(SslSocketConnector.java:620)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:488)
Powered by Jetty:// 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:02:06.350

这已经在这里很多了。

如果您的服务器证书不在全局信任链中，例如自行生成，您需要获取服务器证书并将其添加到客户端密钥库。Keystore 可以像这样在基本级别中使用：

```
String keystorePath = "local.keystore";
System.setProperty("javax.net.ssl.trustStore", keystorePath); 
```

请使用搜索来获取有关主题的具体解释。

如果您可以从 webbrowser 直接访问服务器，则可以使用它来保存证书，但如果您可以使用 Linux 命令行，那么[此链接可能会有所帮助。](http://www.madboa.com/geek/openssl/#cert-retrieve)

要将新证书添加到密钥库中，您可以使用 Java[`keytool`](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/solaris/keytool.html)命令。还有很多[关于 Java 密钥库](http://javarevisited.blogspot.com/2012/03/add-list-certficates-java-keystore.html)的示例，您可以自己用 Google 搜索。

# php - PHP：行注释有什么例外吗？

> ID：13699904
> 
> 赞同：1
> 
> 时间：2012-12-04T09:42:35.273
> 
> 标签：php, syntax, comments

我的代码：

```
//  } elseif(php_uname() === TEST_SERVER_NAME){
//      $tmp = "/var/www/html/".preg_replace("/.*(demo[0-9]+).*/", '$1', $_SERVER['SERVER_NAME'])."/something/tmp/";
//  } else{
//      $tmp = '/var/www/html/something/tmp/';
//  } 
```

我的 IDE (phstorm) 从上面的第二行开始突出显示它，就好像没有注释掉一样。是这样吗？*任何东西都*可以断行评论吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:44:23.280

一行中 a之后的所有内容`//`都是注释，直到行尾。可以跳出评论，不能在行尾之前跳出*评论*。`/* */``//`

你的IDE不好。;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T09:44:31.267

*   `'`也许上面有一个以 your or结尾的开放式报价`"`？
*   也许`/*`上面有一个以你的结尾的`*/`？
*   也许你的 IDE 错了？

# jquery - 在涉及许多子视图的复杂表单中，您使用什么模式进行表单验证

> ID：13699907
> 
> 赞同：5
> 
> 时间：2012-12-04T09:42:41.723
> 
> 标签：jquery, backbone.js, jquery-validate, validation, backbone-views

### 骨干网中的验证

我正在使用 Backbone 构建一些复杂的表单。如果我要对我拥有的视图类型进行分类，我会说我有模型视图和集合视图。其中模型视图代表单个实体信息，集合视图代表重复表单（例如创建多个登录）。

我正在使用[模型绑定](https://github.com/theironcook/Backbone.ModelBinder)插件进行双向绑定，并且表单工作正常，但是我没有实现任何客户端验证。我正在考虑采用模型验证路线，但是我意识到我想要客户端验证的原因是显示消息并通知用户更常见的错误，而不是真正确保数据的完整性，因为这是由服务器完成的.

我很想听听关于哪种方法好的任何模式/想法。

如果这有任何帮助，我已经有 jquery 验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:20:23.043

我自己的当前项目解决方案是用于验证字段的[jQuery.Validate](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)`Form`插件和用于处理表单提交和处理服务器错误的自定义视图。

验证插件在文档方面远非完美，但是一旦您从其源代码中了解了幕后发生的事情，事情就会大大改善。它非常灵活，可以完成任务并且易于扩展。

不能说我对为`Form`视图和解决方案的整体抽象级别编写的大量自定义代码感到满意，但这是我今天能找到的最好的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:28:40.170

我认为最好通过在 Backbone 中实现的模型验证来进行验证。这样，它始终处于中心位置并阻止任何保存被发送到服务器。实现一个简单的帮助对象，该对象存储帮助您验证电子邮件等功能，您应该没问题。

如果您想在每个 keyup 上进行验证，并且如果它有效，您可以尝试手动触发 model.validate()，如果它有效，您可能需要考虑一起删除 jQuery 验证。

# mysql - mysql中的CASE和IF有什么区别

> ID：13699908
> 
> 赞同：6
> 
> 时间：2012-12-04T09:42:42.717
> 
> 标签：mysql

我发现非常奇怪的 MySQL 行为：

我有一个带有变音字母的字符串，我在上面运行了一些 IF 表达式。就像是：

```
IF(length(field) < 10, '', replace(field, "\n", "<BR>")) 
```

它工作正常。

但是，如果我用 CASE 替换它，那么结果会在第一个 unlaut 字母上被截断！

```
CASE WHEN length(field)<10 THEN '' ELSE replace(field, "\n", "<BR>") END 
```

另外，我注意到只有当查询中还有 GROUP BY 部分时才会发生这种情况。

我不明白 CASE 和 IF 之间有什么区别 - 从逻辑的角度来看，两者都应该返回完全相同的结果。

任何人都知道为什么这两个命令之间有区别吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-04T09:50:55.363

"IF 是单个分叉，"CASE" 可以是多个如果你有两个以上的值可选值，则使用 "Case"，当你只有两个值时使用 "IF"。

**CASE的一般结构是：**

```
CASE x
WHEN a THEN ..
WHEN b THEN ..
...
ELSE
END 
```

**IF的一般结构：**

```
IF (expr)
THEN...
ELSE...
END 
```

所以，基本上 IF 是一个只有一个 'WHEN' 语句的 CASE。

# objective-c - UIDatePicker 设置最小和最大小时

> ID：13699910
> 
> 赞同：0
> 
> 时间：2012-12-04T09:42:53.240
> 
> 标签：objective-c, ios, uidatepicker

如何将最小和最大小时设置为 UIDatePicker ？有可能吗？

我知道如何设置最小和最大日期：

[datePicker setMinimumDate: 今天]; [datePicker setMaximumDate: nextMonthDay];

我想要实现的是，在选择器中，用户可以每天从上午 8 点到晚上 10 点进行选择。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:20:37.247

希望以下代码对您有所帮助。

```
 - (IBAction)dataPickerValueChanged:(UIDatePicker *)sender {

        NSDateComponents *dateComponents = [[NSCalendar currentCalendar] components:NSHourCalendarUnit fromDate:[testDatePicker date]];

        if ([dateComponents hour] > 8 && [dateComponents hour] < 22) {
            UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Error!" message:@"This time cant be selected" delegate:nil cancelButtonTitle:@"Dismiss" otherButtonTitles: nil];
            [alert show];
            return;
        }

         lblDate.text = [sender date];

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-12T07:14:46.797

```
NSDateComponents *components = [[NSCalendar currentCalendar] components:NSIntegerMax fromDate:self.datePicker.date];
[components setHour:hour];
[components setMinute:minutes];
[components setSeconds:seconds];
NSDate *date [[NSCalendar currentCalendar] dateFromComponents:components];
self.datePicker.minimumDate = date;
//same for maximumDate do this. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-13T05:20:20.100

这适用于“时间模式”，否则选择的答案应该不直观地工作

```
 // minimum time
    components.hour = 0
    components.minute = 0
    let minTime = calendar.date(from: components)

    // max time
    components.hour = 23
    components.minute = 59
    let maxTime = calendar.date(from: components)

    // selected value current time or saved time
    let selectedDate = Date() // or saved time
    let nowComp = calendar.dateComponents([.hour, .minute], from: selectedDate)
    components.hour = nowComp.hour
    components.minute = nowComp.minute
    let selectedTime = calendar.date(from: components)! 
```

使用这些值并使用如下

```
 datePicker.datePickerMode = .time
    datePicker.date = selectedTime 
    datePicker.minimumDate = minTime 
    datePicker.maximumDate = maxTime 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T10:01:25.900

您必须确保最短日期的时间是上午 8 点和最大日期的晚上 10 点。[NSDateFormatter](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html)将帮助您根据需要创建日期对象。

# iphone - iOS：MPVolumeView 中缺少音频路由/源

> ID：13699915
> 
> 赞同：1
> 
> 时间：2012-12-04T09:43:11.897
> 
> 标签：iphone, ios6, mpvolumeview, audio-route

我在一个音频应用程序上工作（使用音频单元）。
要求之一是能够从 UI（耳机、扬声器、连接的蓝牙设备等）更改音频路由。
我为此使用 MPVolumeView。

最近，我在点击音量视图中的路线按钮时打开的操作表中显示的路线列表存在错误。
我认为这个问题只出现在 iOS6 中，但不确定。
结果是随机的：

*   有时它只显示 iPhone
*   有时它会显示 iPhone 两次而不是 iPhone 和扬声器（在这种情况下，通常两个“iPHone”按钮附近的图标就像是扬声器 - 电视图标）
*   有时效果很好
*   蓝牙总是显示良好

一些附加信息：
音量视图仅在播放和录制音频类别中启动。
只有在用户点击屏幕上的相应按钮后，才会启动音量视图并将其添加到屏幕上。此按钮仅在类别切换到 Play&Record 后才可用（它不是立即的，因此我为路由转换设置了一个侦听器，并仅在路由真正更改后才启用该按钮）。

截图： ![在此处输入图像描述](../Images/aa2d47ee784026be4a8c6e01183f0d9b.png)

![在此处输入图像描述](../Images/96b6647b6ee171d281b0be3a59b63d42.png)

如果有人遇到过此问题，请分享解决方案。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T02:00:35.880

我在运行 6.0 的 iPhone 4S 和 5 上的多任务托盘的路线选择 UI 中看到了这一点。我怀疑这是一个iOS错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-15T20:43:27.857

我有同样的问题。我注意到的是它与当前正在播放的媒体有关。如果它与 Airplay / 媒体设备不兼容，则它不会出现在列表中。例如，我想将音频播放到仅支持 8Khz 音频的蓝牙 HFP 设备。我见过一个应用程序可以修改音频以匹配设备，但不知道他们是如何以编程方式做到这一点的。

# reporting-services - 如何以编程方式在 SSRS 报告中设置“隐藏在列表视图中”

> ID：13699917
> 
> 赞同：0
> 
> 时间：2012-12-04T09:43:14.557
> 
> 标签：reporting-services

使用**ReportingService2005 - CreateReport 方法**可以在报表服务器上创建报表。但是如何将**Hide in list view 复选框**的值设置为 true？

![在此处输入图像描述](../Images/7f5329437d2b774807bc1e1e4b7b567f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:55:30.667

我终于明白了:-)如果有人需要它：

```
var properties = new Property[1];
var hidden = new Property { Name = "Hidden", Value = "True" };
properties[0] = hidden;

Warning[] warnings = ReportingService.CreateReport(fileNameWithoutExtension, ssrsFolder, true, fileContents, properties); 
```

# android - 如何以编程方式更改维度？

> ID：13699919
> 
> 赞同：4
> 
> 时间：2012-12-04T09:43:21.017
> 
> 标签：android, dimension

我有更多的维度

```
<resources>
    <dimen name="tag_text_size">10dp</dimen>
    <dimen name="text_separator_size">15dp</dimen>
    <dimen name="tag_text_count_size">8dp</dimen>
    <dimen name="text_home_page_size">20dp</dimen>
    <dimen name="item_text_head_size">15dp</dimen>
    <dimen name="item_text_time_size">10dp</dimen>
    <dimen name="item_text_price_size">14dp</dimen>
    <dimen name="item_text_address_pattern_size">12dp</dimen>
    <dimen name="item_text_address_size">14dp</dimen>
 <dimen name="setting_text_head_size">24dp</dimen>
  <dimen name="order_text_comment_size">11dp</dimen>
</resources> 
```

我在我的 XML 中使用这个维度 ..

```
 <TextView
 android:textSize="@dimen/item_text_head_size" /> 
```

...

**我想以编程方式更改尺寸，它将允许我在任何地方更改字符串的大小**

如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T09:47:43.500

无法通过活动以编程方式设置文件中`dimen`变量的值。`dimen.xml`

做你想做的事情的方法是删除你的属性并在运行时使用Java`android:textSize`更改文本大小。`setTextSize()`

# javascript - cfscript 语言=“javascript”不起作用

> ID：13699920
> 
> 赞同：1
> 
> 时间：2012-12-04T09:43:23.433
> 
> 标签：javascript, coldfusion

这是我的代码：

```
<cfscript language="javascript">
      OpenText(document.getElementById(#url.id#));
</cfscript> 
```

这是错误：

```
Invalid token l found on line 731 at column 19.

The CFML compiler was processing:

A cfscript tag beginning on line 731, column 10. 
```

为什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-04T09:56:39.357

`<cfscript>`不带*语言*属性。你可能只是想做：

```
<script type="text/javascript">
<cfoutput>
OpenText(document.getElementById(#url.id#));
</cfoutput>
</script> 
```

顺便说一句，在 HTML 4中的标签上也弃用了*language*`<script>`属性，您应该使用*type*代替（如我的示例中所示）。在 HTML5 中，您可以`<script>`不使用*语言*或*类型*属性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T10:01:56.800

[OpenBD 显然支持这一点](http://openbd.org/manual/?/cfscript_javascript)，但 ColdFusion 不支持。

# configuration - ASP.NET Web Api：项目需要 SQL Server Express

> ID：13699921
> 
> 赞同：45
> 
> 时间：2012-12-04T09:43:28.340
> 
> 标签：configuration, asp.net-web-api, sql-server-express

我在VS 2010下创建了一个Web API项目，切换到VS 2012后，总是得到一个警告：

> Web 项目“xxx”需要 SQL Server Express，但此计算机上未安装。[...]

我不想安装此 SQL Server Express。我使用 IIS 进行调试。如何禁用此依赖项？

我在 web.config 中也注意到了这一点：

```
<connectionStrings>
    <add name="DefaultConnection" connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|[...].mdf;Initial Catalog=[...];Integrated Security=True;User Instance=True" providerName="System.Data.SqlClient" />
  </connectionStrings> 
```

谁创造了这个？我可以删除这个吗？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2013-09-05T03:06:00.773

将连接字符串“Data Source=.\SQLEXPRESS”的这一部分更改为

“数据源=localhost\SQLEXPRESS”

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-12-04T19:07:38.387

它是由 Visual Studio 为您创建的。原因是 Web API 项目是 MVC 项目的子类。实际上，Web API 项目可以同时包含：Web 应用程序和 Web API 本身。

只要这个项目是 MVC 项目的子类，你就可以获得所有这些额外的功能。

只要不需要，您就可以删除所有多余的东西。您还可以删除的内容：

**在 WebConfig 中：**

*   /configSections/section name="entityFramework"...
*   /连接字符串
*   /system.web/pages
*   /system.web/profile
*   /system.web/membership
*   /system.web/roleManager
*   /实体框架

您可能还想删除

**NuGet 包：**

除了 razor、MVC、Web Api 包之外的所有内容，例如：

*   jQuery
*   实体框架
*   jQuery 验证
*   jQuery 用户界面
*   现代化
*   淘汰赛
*   MS 不显眼的 AJAX
*   MS 不显眼的验证

**在解决方案资源管理器中：**

*   /应用程序数据
*   /内容
*   /图片
*   /脚本
*   /意见

但要小心，因为删除后您将无法添加 Web API 帮助页面（例如描述您的 API）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-11-01T17:49:32.990

如果您安装了更高版本的 SQL Express 本地数据库，您还可以将连接字符串更改为新的 SQL 2014+ 语法“Data Source=(LocalDb)\MSSQLLocalDB;...”。

# java - 简化Java中多种方法的代码？

> ID：13699924
> 
> 赞同：2
> 
> 时间：2012-12-04T09:43:33.840
> 
> 标签：java, arrays, methods

仍在尝试使用 Java 进行编程，下面是我已经提交给大学的多种方法的最近作业的代码。

我的问题是，是否可以简化代码以使其更有效，而不是通过更长的路线进行处理。

1：打印数组的最大值。
2：打印数组的最小值。
3：打印Array的平均值。
4：打印字符串中特定单词的出现次数。
5：打印一个字符串的平均字长。

```
public class MaxMinAverage {
static int[] values = {1, 4, 3, 57, 7, 14, 7, 3, 10, 5, 4, 4, 10, 5, -88};
static String sentence = "the cat sat on the mat and the dog sat on the rug";
public static void main(String[] args) {
    System.out.println("MaxMinAverage.java\n=====================");
    System.out.println("Maximum value = "+getMaximum(values));
    System.out.println("Minimum value = "+getMinimum(values));
    System.out.println("Average Value =" +getAverage(values));
    System.out.println("Frequency of 'the' = "+getFrequency(sentence,"the"));
    System.out.println("Average word length = "+getAverageWordLength(sentence));
    }
    public static int getMaximum(int[]arr){
        int max = 0;
        for(int i = 0; i < values.length; i++){
            if(values[i] > max){
                    max = values[i];
                    }
            }
        return max;
     }
    public static int getMinimum(int[] arr){
        int min = 0;
        for(int i = 1; i < values.length; i++){
            if(values[i] < min){
                    min = values[i];
                    }
            }
        return min;
    }
    public static float getAverage(int[] arr){
        float result = 0;
        for(float i = 0; i < values.length; i++){
             result = result + values[(int) i];
        }
        return result/values.length;
     }
    public static int getFrequency(String sentance, String word){
        String keyword = "the";
        String[] temp;
        String space = " ";
        temp = sentence.split(space);
        int counter = 0;
        for(int i = 0; i < temp.length; i++){
            if(temp[i].equals(keyword)){
                counter++;
            }
        }
        return counter;
    }
    public static float getAverageWordLength(String sentance){
        String characters = sentence.replaceAll("\\W","");
        float total = characters.length();
        float result = 0;
        String[] temp;
        String space = " ";
        temp = sentence.split(space);
        for(int i = 0; i < temp.length; i++){
            result++;   
        }
        return total/result;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:47:55.513

使其更有效：

您总是可以在这里使用**DRY（不要重复自己）**并创建一个`ArrayUtils`类并将所有这些方法保留在那里并概括它们以便您可以重用它们。

```
public static int getMinimum(int[] arr){
        int min = arr[0];  //change here
        for(int i = 1; i < values.length; i++){
            if(values[i] < min){
                    min = values[i];
                    }
            }
        return min;
    } 
```

`max`方法的类似变化

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:00:41.057

在`getMaximum`你可能想要`int max = Integer.MIN_VALUE`; 而在`getMinimum`你想要的`int min = Integer.MAX_VALUE;`。否则`getMaximum`，如果数组中的所有元素都小于零，则返回 0（因此您返回的值不在数组中），而在 getMinimum 中，如果所有元素都大于零，则返回 0（这也是错误的）。

此外，`getMinimum`从索引 1 开始迭代意味着您错过了索引 0。

此外，您不使用方法的参数，而是`values`直接使用数组。假设你调用`getMinimum(someOtherArray)`了，你仍然会计算`values`。相反，您应该遍历作为参数给出的数组，如下所示：

```
public static int getMinimum(int[] arr){
    int min = Integer.MAX_VALUE;
    for(int i = 0; i < arr.length; i++){
        if(arr[i] < min){
                min = arr[i];
        }
    }
    return min;
} 
```

这当然应该对所有方法进行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T10:12:05.297

`getMaximum`您可以将,`getMinimum`和的逻辑部分放在`getAverage`同一个循环中（与另一个循环相同`getFrequency`）`getAverageWordLength`，如下所示：

```
public static void getMinMaxAvg(int[] values) {
    if (values == null || values.length == 0) {
        throw new IllegalArgumentException();
    }
    int min = values[0];
    int max = values[0];
    int i = 1;
    int sum = 0;
    for (i = 1; i < values.length; i++) {
        if (values[i] < min) {
            min = values[i];
        } else if (values[i] > max) {
            max = values[i];
        }
        sum += values[i];
    }
    System.out.println("min = " + min);
    System.out.println("max = " + max);
    System.out.println("avg = " + ((float) sum / (i + 1)));
}

public static void getFreqAvg(String sentence, String word) {
    if (sentence == null || sentence.isEmpty()) {
        throw new IllegalArgumentException();
    }
    if (word == null || word.isEmpty()) {
        throw new IllegalArgumentException();
    }
    String[] words = sentence.replaceAll("^ *(.*?) *$", "$1").split(" +");
    int freq = 0;
    int sum = 0;
    int i = 0;
    for (i = 0; i < words.length; i++) {
        if (words[i].equalsIgnoreCase(word)) {
            freq++;
        }
        sum += words[i].length();
    }
    System.out.println("freq of \"" + word + "\" = " + freq);
    System.out.println("avg word length = " + ((float) sum / (i + 1)));
}

public static void main(String[] args) {

    int[] values = { 1, 4, 3, 57, 7, 14, 7, 3, 10, 5, 4, 4, 10, 5, -88 };
    String sentence = " the  cat sat on the mat and the dog sat on the rug ";
    String word = "the";

    getMinMaxAvg(values);
    getFreqAvg(sentence, word);

} 
```

印刷：

```
min = -88
max = 57
avg = 2.8125
freq of "the" = 4
avg word length = 2.642857 
```

# android - 上下文和内存泄漏

> ID：13699925
> 
> 赞同：1
> 
> 时间：2012-12-04T09:43:34.980
> 
> 标签：android

在我的应用程序中，我有一个线程和一个相应的处理程序来更新 UI。这个线程将从我的主要活动开始，线程接受几个参数，包括一个上下文。这种上下文是这样使用的：

```
Context c;
MessageHandler handler;

public BluetoothCommunicator(Context c) {
   this.c = c;
   handler = new MessageHandler(c);
} 
```

在我的`run()`方法中，当发生特殊事件时，我将一些数据发布到此处理程序。在我的`handleMessage()`方法中，我创建了一些 ProgressDialogs，以便通知用户正在进行操作。

```
@Override
    public void handleMessage(Message m) {

        String message = (String) m.obj;

        //Getting files
        if (message.equals("0")) {

            folder.appendToLogFile(new Date().toString(), "Incoming File From: " + deviceName); 

            pd = new ProgressDialog(c);
            pd.setTitle("Please Wait..");
            pd.setMessage("Retrieving file from " + deviceName);
            pd.setCancelable(false);

            pd.show();
        } 
```

据我了解，我无法使用 . 创建 ProgressDialog `getApplicationContext()`，但我需要`Activity Context`.

根据 MA​​T，我的编码方式会导致我的应用程序出现内存[泄漏](http://www.eclipse.org/mat/)

![在此处输入图像描述](../Images/c6da64017275135041399a1766ffb202.png)

我看到这个跟踪的方式是`c`对应于`c`我在构造函数中初始化的对象。这是正确的吗？

我该如何解决这个问题？没有 AsyncTask 不相关，因为问题出在`Context`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T09:49:50.113

当线程完成时（即：`run()`方法完成）只需将变量设置`c`为空。那应该照顾你的内存泄漏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T10:02:16.970

您还可以使用`WeakReference<Context>`对象来存储`Context`对您的活动的弱引用，而不是普通引用。这将允许 GC “收集”您的活动，并且不会导致内存泄漏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T09:54:54.267

大卫的回答将解决您的问题，您也可以尝试：

从处理程序启动一个虚拟活动，它将显示您的进度对话框（您可以通过使用自定义对话框`setContentView()`作为您想要在进度对话框中显示的布局来做到这一点。还将此虚拟活动的主题设置为`android:style/Theme.Dialog`）。在您的进度对话框完成或用户按下取消后，您也完成了这个虚拟活动。

# php - jquery 只插入第一行查询

> ID：13699927
> 
> 赞同：0
> 
> 时间：2012-12-04T09:43:36.103
> 
> 标签：php, jquery, ajax

我有一个产品列表，每一行都有一个“添加到购物车按钮”。该脚本在插入 art.code 和项目数并返回响应的第一行中运行良好。如果我在列表下方按另一篇文章，则脚本不起作用。我在另一个问题的某处读到 id 需要是唯一的，但我真的不知道如何在我的脚本中实现它。

* * *

```
<form method='post' action='search.php'>
 <input type='hidden' id='cartart' name='cartart' value='".$artno."' />
 <input id='cartantal' type='number' name='cartantal'value='".$number."' />
 <input type='submit' name='submit' id='submit' value='add'/>
 </form>

<span id='result'></span> 
```

等等...

* * *

```
$(function() {
    $("#submit").click( function(){

        var namn = $('#cartart').val();
        var antal = $('#cartantal').val();

        $.ajax({
            url: "search.php",
            type: "POST",
            data: 'gui_artkod=' + namn + '&gui_antal=' + antal,

            success: function(result){
                $("#result").html(result);
            }
        });
        return false;
    });
  }); 
```

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:56:47.130

您在代码中遇到的问题是您有多个具有相同 ID 的表单。ID 应该始终是唯一的（这就是它被称为 ID 的原因）。

将所有 ID 更改为类：

```
<form method='post' action='search.php'>
 <input type='hidden' class='cartart' name='cartart' value='".$artno."' />
 <input class='cartantal' type='number' name='cartantal'value='".$number."' />
 <input type='submit' name='submit' class='submit' value='add'/> 
```

JavaScript：

```
$(function() {
  $(".submit").click( function(){  //use class selector

    var namn = $(this).parent().find('.cartart').val();  //finds the parent of the clicked button  and search for a class called cartart and gets the value 
    var antal = $(this).parent().find('.cartantal').val();

    $.ajax({
        url: "search.php",
        type: "POST",
        data: 'gui_artkod=' + namn + '&gui_antal=' + antal,

        success: function(result){
            $("#result").html(result);
        }
    });
    return false;
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:53:07.700

尝试使用类而不是 id 选择器。

HTML 中的更改：在提交按钮上添加了一个类

```
<form method='post' action='search.php'>
 <input type='hidden' id='cartart' name='cartart' value='".$artno."' />
 <input id='cartantal' type='number' name='cartantal'value='".$number."' />
 <input type='submit' name='submit' class='addToShoppingCart' value='add'/>
 </form> 
```

Javascript 更改：更改了提交按钮的选择器。

```
$(function() {
    $(".addToShoppingCart").click( function(){

  ...rest remains same
}); 
```

您甚至可以使用`.on()`. 在此处查看文档：http: [//api.jquery.com/on/](http://api.jquery.com/on/)

# javascript - HTML5 - 将 Web SQL 数据库导出到 csv 或 txt 文件

> ID：13699928
> 
> 赞同：2
> 
> 时间：2012-12-04T09:43:40.127
> 
> 标签：javascript, html, export, local-storage, web-sql

这是参考我的问题-[使用 javascript 将 HTML5 WebSQL 数据库的内容附加到电子邮件](https://stackoverflow.com/questions/13683183/attach-content-of-html5-websql-databse-to-email-using-javascript/13696877#13696877)

我有一个可以在 Chrome 浏览器中运行的 HTML5 应用程序。我需要导出本地存储在 Web SQL DB 中的数据，并将其放入 csv 或 txt 文件中。

我需要在浏览器中执行此操作。服务器端代码不是一个选项。如何使用 javascript 来完成？谢谢

编辑：我发现实现这一目标的一种方法是通过数据 URI。所以我从结果对象中的选择查询中获得了我的结果集。如何将其编码为 base 64 格式？

```
 db.transaction(function (tx) {
       tx.executeSql('SELECT * FROM LOGS', [], function (tx, results) {
       var len = results.rows.length, i;
       msg = "<p>Found rows: " + len + "</p>";
       document.querySelector('#status').innerHTML +=  msg;
       for (i = 0; i < len; i++){
          alert(results.rows.item(i).log );
       }
     }, null);
    });

    //Encode the results object to base64
    /* How can we do this? */

     <a download="example.csv" href="data:application/csv;charset=utf-8, <<base64_encoded_data>>">Test</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:25:17.390

当我找到解决方案时，我正在回答我自己的问题。

我从查询结果集中创建了一个字符串，并使用`btoa()`api 将字符串转换为 base64 编码。

# macos - 进入当前目录-mac

> ID：13699929
> 
> 赞同：2
> 
> 时间：2012-12-04T09:43:42.967
> 
> 标签：macos, shell

我在 mac 上，我有一个`.command`文件，双击应该运行我的脚本，因此应用程序打开。

但问题是应用程序从根文件夹而不是当前文件夹运行。我怎样才能自动化的方式，应用程序首先自动进入我的`current directory`然后继续。

可能`cd`是脚本顶部的一些声明

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T12:13:08.157

`cd "$(dirname "$0")"`进入当前目录。并在其后添加您各自的代码。

# r - 为网络图中的顶点分配一个（数字实数）值

> ID：13699931
> 
> 赞同：0
> 
> 时间：2012-12-04T09:43:54.903
> 
> 标签：r, plot, social-networking, igraph, vertexdata

我想为网络图中的每个节点分配或关联一些实际值（比如一些分数）`R`. 需要在迭代中更新。最后根据其最新值（分数）绘制具有顶点大小的网络图。

我可以将顶点的哪个属性用于此目的以及如何使用？如果在 中不可能`igraph`，是否有任何其他方法可以实现此目的`R`吗？

我是新手`R`。任何人都请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:03:08.253

我创造了我的差距

```
graph2 <- read.table(text = '1 2 
1 3 
2 5 
3 4 
3 5 
4 5 
5 6 ')                    
par(mfrow =c(1,2)) 
graph2 <- graph.data.frame(graph2, 
           vertices = data.frame(symbols = 1:6,label   = 1:6),directed=FALSE)
plot(graph2,main='simple graph') 
```

我改变了重量属性，在这里你可以输入你正确的计算过程

```
E(graph2)$weight <- seq(ecount(graph2))
graph.strength(graph2) 
```

我修改属性宽度，以可视化权重效果

```
E(graph2)$width <-E(graph2)$weight                     
plot(graph2,main='weighted graph') 
```

![在此处输入图像描述](../Images/b55332b4b75c5e5825ef481472693a62.png)

# amazon-web-services - 如何使用我的用户（未验证）地址作为 Amazon SES 的发件人？

> ID：13699933
> 
> 赞同：5
> 
> 时间：2012-12-04T09:44:04.533
> 
> 标签：amazon-web-services, amazon-ses

我正在写一个发送给朋友的功能，我需要发件人地址作为发件人的电子邮件，以便更加个人化。但是，使用 Amazon SES，我似乎只能从经过验证的地址发送。

我不认为这是一个不常见的问题，并且想知道其他人是如何解决这个问题的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T09:40:33.577

> 但是，使用 Amazon SES，我似乎只能从经过验证的地址发送。

[这是正确的，然而，简单邮件传输协议 (SMTP)](http://en.wikipedia.org/wiki/Smtp)的历史缺陷之一（也是人们如此容易成为基于电子邮件的钓鱼攻击的受害者的主要原因之一）是来自[邮件传输代理 (MTA)](http://en.wikipedia.org/wiki/Mail_transport_agent)的发件人从邮件客户端的角度来看，根本不需要匹配发件人，请参阅[About Header Fields](http://docs.amazonwebservices.com/ses/latest/DeveloperGuide/SendingEmail.Raw.html#SendingEmail.Raw.headers)：

> 简单邮件传输协议 (SMTP) 通过定义邮件信封及其一些参数来指定电子邮件消息的发送方式，但它本身并不关心消息的内容。相反，Internet 消息格式 (RFC 2822) 定义了消息的构造方式。

RFC 2822 定义了[Originator 字段](https://www.rfc-editor.org/rfc/rfc2822#section-3.6.2)以*指示消息来源的邮箱*：

> “发件人：”字段指定消息的作者，即负责编写消息的人或系统的邮箱。“发件人：”字段指定负责实际传输消息的代理的邮箱。例如，如果秘书要为另一个人发送消息，则秘书的邮箱将出现在“发件人：”字段中，而实际作者的邮箱将出现在“发件人：”字段中。

## 解决方案

如前所述，您只需要在`Sender`标头字段中提供经过验证的发件人，并且可以提供您喜欢的任何`From`地址（请参阅[附录：标头字段](http://docs.amazonwebservices.com/ses/latest/DeveloperGuide/Headers.html)以获取支持的字段列表）。

### 注意力

由于上述原因，像这样制作您的邮件（尽管完全有效）使其更有可能被相关的邮件传输系统归类为垃圾邮件 - 以下是 AWS 在其[关于电子邮件最佳实践的白皮书中](http://sesblog.amazon.com/post/Tx2GBEOGDU758MG/New-Whitepaper-on-Email-Best-Practices)描述此问题的方式：

> 仔细考虑您发送电子邮件的地址。“发件人”地址不仅会在其电子邮件客户端（包括在预览窗格中）中对收件人可见，而且还会在某些 ISP 处收集声誉。这将与主题行一起创建收件人对您的电子邮件的第一印象。

因此，您应该应用可用的措施来[验证您的电子邮件](http://docs.amazonwebservices.com/ses/latest/DeveloperGuide/SPFSenderIDDKIM.html)，从而反过来提高您的声誉（当然，这是强烈推荐的）。

# php - 使用 PHP 将文件上传到 777 文件夹

> ID：13699940
> 
> 赞同：0
> 
> 时间：2012-12-04T09:44:09.707
> 
> 标签：php, file-upload, amazon-ec2, 777

我正在开展一个涉及超市系统的学校项目，我有一台 Shop PC（本地主机）和一台总部服务器（托管在 Amazon EC2 上）。其中一个要求是 Shop PC 将生成一个事务文件（我有一个生成文件的按钮），并且该文本文件需要发送到总部服务器。我在总部服务器上创建了一个具有 777 权限的文件夹。我试图使用 PHP 的***复制***功能简单地将文件发送/上传到该文件夹​​，但这不起作用。关于我如何做到这一点的任何线索？我没有在亚马逊上安装 ftp，也无法按照要求安装。

此外，我无法在总部管理员上创建上传表单（多部分表单？）来上传文件，因为店员无法访问总部服务器页面。

需要上传文件的文件夹地址为：

```
"site address"/uploads 
```

我以以下方式创建事务文件：

```
$ourFileName = "transaction.txt";
    $ourFileHandle = fopen($ourFileName, 'w') or die("can't open file");
    //fwrite($fh, $stringData);

    $sql = mysql_query("the query");

    while($row=mysql_fetch_array($sql)){
        $stringData = "data";
        fwrite($ourFileHandle, $stringData);
    }

    fclose($ourFileHandle); 
```

该文件是在商店 PC 上创建的，我想将其发送到总部服务器，在那里可以对其进行解析并添加到总部数据库中。要将文件发送到总部服务器中的上传文件夹，我按照上面的代码：

```
$filename = "news.txt";
    $newfile = "siteaddress/uploads/" . $filename;
    if(copy($ourFileName, $newfile)) 
    {
    print("<h3> UPLOAD SUCCESSFUL!</h3>");
    } 
    else
    {
    print("<h3>ERROR UPLOADING FILE!</h3>");
    } 
```

**讨论后编辑：**

总部服务器有 php。事实上，它在 parse_transaction.php 中定义了一个文件解析器，其开头如下：

```
<?php
include "../storescripts/connect_to_mysql_HQ.php"; 
mysql_query($sql);
mysql_query($sql2);
mysql_query($sql3);

$filename= mysql_real_escape_string($_FILES["file"]["tmp_name"]);

$lines = file($filename); // slurp file and split into an array by lines 
```

也许可以以某种方式直接在此处发送事务文件以进行解析和更新，而不将其存储在上传文件夹中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:07:23.673

文件是否使用错误的写入/读取/执行属性传输或根本不传输？

如果文件没有被传输，您是否检查过 php 日志错误？

如果您使用的是副本，那么我假设您已经安装了分区，因此您可以直接访问总部服务器上的文件，如果没有，您可以尝试设置您的 php 以接收文件，看看这个：

```
http://php.net/manual/en/features.file-upload.post-method.php 
```

如果服务器上没有 php，如何访问它的文件？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:18:35.603

在 Shop PC 中生成文件并将其存储在 HQ Server 可以访问（读取）的位置。

`copy`应在 HQ Server 中使用PHP 命令从 Shop PC 获取文件。

```
copy('http://somedomain.com/transaction.txt', '/tmp/transaction.txt'); 
```

请注意，您`allow_url_fopen`必须`= on`在`php.ini`.

# java - 如何在 servlet 中使用输入流显示图像？

> ID：13699944
> 
> 赞同：-3
> 
> 时间：2012-12-04T09:44:19.570
> 
> 标签：java, image, servlets

我有一个`InputStream`字符串格式的图像。如何使用 servlet 在浏览器中显示该图像？

这是（开始的）字符串。

```
/9j/4AAQSkZJRgABAgAAAQABAAD/4QDVRXhpZgAASUkqAAgAAAAIABIBAwABAAAAAQAAABoBBQABAAAAbgAAABsBBQABAAAAdgAAACgBAwABAAAAAgAAADEBAgANAAAAfgAAADIBAgAUAAAAiwAAABMCAwABAAAAAQAAAGmHBAABAAAAnwAAAAAAAABkAAAAAQAAAGQAAAABAAAAQ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T10:33:25.897

您需要将图像作为字节数组写入响应的输出流。像这样的东西：

```
byte[] imageBytes = getImageAsBytes();
response.setContentType("image/jpeg");
response.setContentLength(imageBytes.length);
response.getOutputStream().write(imageBytes); 
```

然后在您的 JSP 中，您只需使用标准的 img 元素：

```
<img src="url to your servlet"> 
```

来源：[https ://stackoverflow.com/a/1154279/1567585](https://stackoverflow.com/a/1154279/1567585)

# sql - SQL / PostgreSQL左连接忽略左表上的“on = constant”谓词

> ID：13699945
> 
> 赞同：4
> 
> 时间：2012-12-04T09:44:21.083
> 
> 标签：sql, postgresql, left-join

SQL*左连接*查询忽略*左*表`ON column = constant`上的谓词。 但是，它关心*右*表上的另一个谓词。 *`ON column = constant`*

 **如果我将左表`ON column = constant`移至 WHERE 子句，则查询将按预期工作。

`column = constant`对于左表，如果我将放在查询的 WHERE 部分或 JOIN ... ON 部分，为什么这很重要？

（发生的情况是，左表`ON column = constant`条件被推到“JOIN Filter”步骤，似乎被忽略了。）

**细节：**

```
EXPLAIN ANALYZE
select * from DW1_PAGE_PATHS t left join DW1_PAGES g
   on t.TENANT = g.TENANT
  and t.PAGE_ID = g.GUID
  and g.GUID = 'abcdefg'  -- works
  and t.CANONICAL = 'C'  -- "ignored", unless moved to `where` clause
where t.TENANT = '72'
  and PARENT_FOLDER like '/%'; 
```

这里（下）是执行计划。请注意，`t.CANONICAL = 'C'`它已被推到“加入过滤器”步骤，而`g.GUID = 'abcdefg'`过滤器直接在扫描右表时发生。

```
 Nested Loop Left Join  (cost=... actual time=...)
   Join Filter: (((t.canonical)::text = 'C'::text)
             AND ((t.tenant)::text = (g.tenant)::text)
             AND ((t.page_id)::text = (g.guid)::text))
   ->  Seq Scan on dw1_page_paths t
         Filter: (((parent_folder)::text ~~ '/%'::text)
              AND ((tenant)::text = '72'::text))
   ->  Seq Scan on dw1_pages g
         Filter: (((tenant)::text = '72'::text)
              AND ((guid)::text = 'abcdefg'::text)) 
```

（另一个问题：为什么使用*t.canonical = 'C'*的“加入过滤器”不会过滤掉*规范*不是“C”的行？它不会。）

（PostgreSQL 版本`psql (9.1.6, server 9.1.1)`。）

这是一个类似查询的链接，但答案并没有解释*为什么*如果您将左表`ON column = constant`移到`where`子句中它会起作用： [Add condition while using LEFT OUTER JOIN](https://stackoverflow.com/questions/7147943/add-condition-while-using-left-outer-join)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T10:37:37.550

关键是`ON`a 的子句`LEFT [OUTER] JOIN`仅规定右表中的行是否被连接。

它不会*过滤*左表中的行。如果你想这样做，表达式必须进入一个`WHERE`子句（正如你已经发现的那样）或`ON`a 的子句`[INNER] JOIN`。
这都是设计使然。**

# android - 有效载荷 4096 字节是否包含registration_id 长度？

> ID：13699947
> 
> 赞同：5
> 
> 时间：2012-12-04T09:44:24.483
> 
> 标签：android, push-notification, google-cloud-messaging

在 Android GCM 文档中，据说有效载荷最大为 4096 字节限制。

有效载荷的 4096 字节是否包含registration_id 长度？我发现我可以发送有效载荷为 16038 字节（包括registration_ids）的消息。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T18:23:45.210

它不包括注册 ID。

很抱歉没有提供任何支持文件。GCM 文档没有明确说明。但是，我对其进行了测试以验证此行为。我能提供的唯一“证据”是，在多播消息中，您最多可以包含 1000 个注册 ID。1000 个注册 ID 显然无法放入有效负载的 4096 字节。

来自[http://developer.android.com/google/gcm/gcm.html](http://developer.android.com/google/gcm/gcm.html)：

> 注册ID
> 
> 带有接收消息的设备列表（注册 ID）的字符串数组。它必须包含至少 1 个且最多 1000 个注册 ID。要发送多播消息，您必须使用 JSON。要将单个消息发送到单个设备，您可以使用仅具有 1 个注册 ID 或纯文本的 JSON 对象（见下文）。必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-24T14:54:08.843

完成接受的答案。我一直在对此进行测试，结果如下：

有效载荷的最大长度为 4096 字节。如果您使用的是 JSON，并且您的消息如下：

```
{
  "to" : "APA91bGbkLeRLD228BKYQy4syvAYd5ErYiHup5FzofY_8x5CNHmhMlB65CaCHj9ntm7zcMhzDEkd9vi6rxM89cRzPuDLPrlX8UgYExGQ3LmakGTKpkIS0CE9-9tinlIRLMiLoGKDn5jVvks0njvcGFPJSHBn23cd-A",
  "data": {"a":"Some information. Only this part inside data counts as payload"}
} 
```

消息中唯一算作有效负载的部分是“数据”内的部分。即使您要发送到多个设备也是如此。

```
{
  "registration_ids" : ["APA91bGbkLeRLD228BKYQy4syvAYd5ErYiHup5FzofY_8x5CNHmhMlB65CaCHj9ntm7zcMhzDEkd9vi6rxM89cRzPuDLPrlX8UgYExGQ3LmakGTKpkIS0CE9-9tinlIRLMiLoGKDn5jVvks0njvcGFPJSHBn23cd-A",
                        "APA91bGbkLeRLD228BKYQy4syvAYd5ErYiHup5FzofY_8x5CNHmhMlB65CaCHj9ntm7zcMhzDEkd9vi6rxM89cRzPuDLPrlX8UgYExGQ3LmakGTKpkIS0CE9-9tinlIRLMiLoGKDn5jVvks0njvcGFPJSHBn23cd-A"]
  "data": {"a":"Some information. Only this part inside data counts as payload"}
} 
```

# django - 在 Django 中使用信号更新记录

> ID：13699953
> 
> 赞同：0
> 
> 时间：2012-12-04T09:44:31.470
> 
> 标签：django, django-models

我创建了 2 个模型：

1.  `Logs`存储每个条目的日志；
2.  `LogFeeds`获取上面所有条目的计数，比较演员、动词和日期。

如何使用信号从第一个模型更新我的第二个模型？

```
class Logs(models.Model):
    actor_content_type = models.ForeignKey(ContentType,related_name='actor')
    actor_object_id = models.PositiveIntegerField() 
    actor = generic.GenericForeignKey('actor_content_type','actor_object_id')
    verb = models.CharField(max_length=255)
    description = models.TextField(blank=True,null=True)
    target_content_type = models.ForeignKey(ContentType,related_name='target',blank=True,null=True)
    target_object_id = models.PositiveIntegerField(blank=True,null=True) 
    target = generic.GenericForeignKey('target_content_type','target_object_id')
    object_content_type = models.ForeignKey(ContentType,blank=True,null=True)
    object_object_id = models.PositiveIntegerField(blank=True,null=True) 
    object = generic.GenericForeignKey('object_content_type','object_object_id')
    timestamp = models.DateTimeField(auto_now_add=True)
    public = models.BooleanField(default=True)

class LogFeeds(models.Model):
    actors_content_type = models.ForeignKey(ContentType,related_name='actors')
    actors_object_id = models.PositiveIntegerField() 
    actors = generic.GenericForeignKey('actors_content_type','actors_object_id')
    verbs = models.CharField(max_length=255)
    descriptions = models.TextField(blank=True,null=True)
    targets_content_type = models.ForeignKey(ContentType,related_name='targets',blank=True,null=True)
    targets = generic.GenericForeignKey('targets_content_type',)
    objects_content_type = models.ForeignKey(ContentType,blank=True,null=True)
    objects_object_id = models.PositiveIntegerField(blank=True,null=True) 
    objects = generic.GenericForeignKey('objects_content_type','objects_object_id')
    logs = models.ManyToManyField(Logs) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:30:58.487

我不确定，你需要它做什么。

如果您想在代码中记录某些内容，请查看[sentry](https://github.com/getsentry/sentry)项目。您将其设置为处理程序并将其与普通的 Django 日志记录系统一起使用。

如果你想重新发明轮子，我有一些建议：

首先，您不需要`ManyToManyField`日志。我想`Log`只能有一个`LogFeed`。使用`ForeignKey`from `Log`to`LogFeeds`代替。

然后代码可能如下所示：

```
def log(actor, target, object):
    now, today = …

    feed = (LogFeed.objects.select_for_update()
                   .get_or_create(actor=actor, 
                                  target=target, 
                                  object=object,
                                  date=today))
    Log.objects.create(feed=feed,
                       verb='Something happened',
                       timestamp=now) 
```

事实上，它可以在`post_save`您感兴趣的每个实例发送的信号上调用。

有关如何在 Django 中使用信号的示例，请参阅相关[文档。](https://docs.djangoproject.com/en/dev/topics/signals/)

# android - 获取特定月份的第一天

> ID：13699958
> 
> 赞同：1
> 
> 时间：2012-12-04T09:44:45.937
> 
> 标签：android, date, time, calendar

我知道，有很多类似的问题，但我的问题更加具体和复杂：

我想从特定月份获取本月的第一天（以及下个月的第一天）。

我当前的代码：

```
private long getFirstTime(Time inputTime) {
        Time t = new Time();
        t.set(inputTime);
        t.monthDay = 1;
        t.normalize(true);

        return t.toMillis(true);
}

private long getLastTime(Time inputTime) {
        Time t = new Time();
        t.set(inputTime);
        t.monthDay = 1;
        t.month++;
        t.normalize(true);

        return t.toMillis(true);
} 
```

inputTime 始终是未来或过去一个月的时间。

像这样生成：

```
Time mTimeMinus = new Time();
            mTimeMinus.set(System.currentTimeMillis());
            mTimeMinus.month--;
            mTimeMinus.normalize(true);

Time mTimePlus = new Time();
            mTimePlus.set(System.currentTimeMillis());
            mTimePlus.month++;
            mTimePlus.normalize(true); 
```

任何修复的想法？

* * *

问题中的代码按预期工作，问题是另一个问题！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T10:06:28.873

你可以使用这样的东西

```
public String getFirstDay(int day, int month, int year)
    {
        Calendar cal = new GregorianCalendar();
        cal.set(Calendar.DATE, day);
        cal.set(Calendar.MONTH, month);
        cal.set(Calendar.YEAR, year);
        cal.set(Calendar.DAY_OF_MONTH, 1);
        switch (cal.get(Calendar.DAY_OF_WEEK)) {
            case Calendar.SUNDAY:
                return "SUNDAY";
            case Calendar.MONDAY:
                return "MONDAY";
            case Calendar.TUESDAY:
                return "TUESDAY";
            case Calendar.WEDNESDAY:
                return "WEDNESDAY";
            case Calendar.THURSDAY:
                return "THURSDAY";
            case Calendar.FRIDAY:
                return "FRIDAY";
            case Calendar.SATURDAY:
                return "SATURDAY";
        }
        return null;
    } 
```

# javascript - Javascript - JQuery 附加函数和使用引号

> ID：13699964
> 
> 赞同：1
> 
> 时间：2012-12-04T09:45:07.493
> 
> 标签：javascript, jquery, html

我的代码中有一个很大的附加函数。在这个附加函数中，我用一些文本填充了一个文本区域。在本文中，我也可以使用引号 (")，这会导致问题，因为我的 append 函数会将这些引号解释为中断引号，而它不应该。

你有关于如何逃避这些报价的想法吗？谢谢你。

编辑：这是我的附加功能：

```
$('#add_affiliation').append(
            '<div id="affiliation_'+affiliation_id+'title" class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix">'+
                '<span id="affiliation_title'+affiliation_id+'" class="ui-dialog-title">Affiliation '+affiliation_id+'</span>'+
                '<a href="#delete_affiliation" id="delete_affiliation_'+affiliation_id+'" onclick="deleteAffiliation(\''+affiliation_id+'\');" >'+
                    '<img style="float:right" src="/css/images/delete_affiliation.png" />'+
                '</a>'+
            '</div>'+
            '<div id="affiliation_'+affiliation_id+'content" class="ui-dialog-content ui-widget-content">'+
                '<label for="add_affiliations"></label>'+
                '<div id="add_affiliation_'+affiliation_id+'" style="overflow: hidden" class="element">'+
                    '<table id="affiliation_table" style="table-layout:fixed;">'+
                    '<tbody>'+
                        '<tr>'+
                            '<td style="height:30px; width:65px;" align="right"><font size="2"><b>N°:</b></font></td>'+
                            '<td align="left" style="height:30px; width:700px;">'+
                                '<input type="text" name="number"; id="number'+affiliation_id+'"; value="'+article_affiliations[i].number+'" />'+
                            '</td>'+
                        '</tr>'+
                        '<tr>'+
                            '<td style="height:30px; width:65px;" align="right"><font size="2"><b>Affiliation:</b></font></td>'+
                            '<td align="left" style="height:30px; width:700px;">'+
                                '<input type="text" name="affiliation" id="affiliation'+affiliation_id+'" value="'+article_affiliations[i].name+'" style="width: 100%;" />'+
                            '</td>'+
                        '</tr>'+
                        '<tr>'+
                            '<td style="height:30px; width:65px;" align="right"><font size="2"><b>Country:</b></font></td>'+
                            '<td align="left" style="height:30px; width:700px;">'+
                            '<select id="country'+affiliation_id+'";></select>'+
                            '<img style="vertical-align:bottom; " src="/css/images/Warning.png"; id="country_warning'+affiliation_id+'"; width="20px"; height="20px"; alt="-"; />'+
                            '<span id="country_warning_message'+affiliation_id+'" style="visibility:hidden; color:red;"></span>'+
                            '</td>'+
                        '</tr>'+
                    '</tbody>'+
                '</table>'+
            '</div>'+
        '</div>'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T09:56:57.623

我基本上会在*不*提供任何值的情况下进行常规附加，然后`.find(selector).val(value)`在每个元素上使用：

```
$('<div id="affiliation_'+affiliation_id+'title" class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix">'+
            '<span id="affiliation_title'+affiliation_id+'" class="ui-dialog-title">Affiliation '+affiliation_id+'</span>'+
            '<a href="#delete_affiliation" id="delete_affiliation_'+affiliation_id+'" onclick="deleteAffiliation(\''+affiliation_id+'\');" >'+
                '<img style="float:right" src="/css/images/delete_affiliation.png" />'+
            '</a>'+
        '</div>'+
        '<div id="affiliation_'+affiliation_id+'content" class="ui-dialog-content ui-widget-content">'+
            '<label for="add_affiliations"></label>'+
            '<div id="add_affiliation_'+affiliation_id+'" style="overflow: hidden" class="element">'+
                '<table id="affiliation_table" style="table-layout:fixed;">'+
                '<tbody>'+
                    '<tr>'+
                        '<td style="height:30px; width:65px;" align="right"><font size="2"><b>N°:</b></font></td>'+
                        '<td align="left" style="height:30px; width:700px;">'+
                            '<input type="text" name="number"; id="number'+affiliation_id+'"; value="" />'+
                        '</td>'+
                    '</tr>'+
                    '<tr>'+
                        '<td style="height:30px; width:65px;" align="right"><font size="2"><b>Affiliation:</b></font></td>'+
                        '<td align="left" style="height:30px; width:700px;">'+
                            '<input type="text" name="affiliation" id="affiliation'+affiliation_id+'" value="" style="width: 100%;" />'+
                        '</td>'+
                    '</tr>'+
                    '<tr>'+
                        '<td style="height:30px; width:65px;" align="right"><font size="2"><b>Country:</b></font></td>'+
                        '<td align="left" style="height:30px; width:700px;">'+
                        '<select id="country'+affiliation_id+'";></select>'+
                        '<img style="vertical-align:bottom; " src="/css/images/Warning.png"; id="country_warning'+affiliation_id+'"; width="20px"; height="20px"; alt="-"; />'+
                        '<span id="country_warning_message'+affiliation_id+'" style="visibility:hidden; color:red;"></span>'+
                        '</td>'+
                    '</tr>'+
                '</tbody>'+
            '</table>'+
        '</div>'+
    '</div>')
    .find('#number' + affiliation_id)
        .val(article_affiliations[i].number)
        .end()
    .find('#affiliation' + affiliation_id)
        .val(article_affiliations[i].name)
        .end()
    .appendTo('#add_affiliation') 
```

[**演示**](http://jsfiddle.net/Rgvaw/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T09:46:26.980

只需在引号**\"**之前使用反斜杠 或使用单引号来包含您的字符串**' " '**

请记住，字符串可以用单引号分隔（在这种情况下，它们内部的双引号不需要转义）或双引号（在这种情况下，单引号不需要转义）。

此外，您可以使用类似的东西

```
var doubleQuoutesEscaped = originalString.split('"').join('\\"');
var singleQuoutesEscaped = originalString.split("'").join("\\'"); 
```

# java - Java继承方法调用

> ID：13699965
> 
> 赞同：0
> 
> 时间：2012-12-04T09:45:08.990
> 
> 标签：java

我有一个有趣的场景。

```
public class Base {

    public void hello(){
        this.say();
        System.out.println("hello-Base");
    }

    protected void say(){
        System.out.println("say-Base");
    }
}

public class Derived extends Base {

    public Derived(){
        super.hello();      
    }

    public static void main(String[] args) {
        Derived d = new Derived();      
    }

    public void say(){
        System.out.println("say-Derived");
    }

} 
```

给出的输出是：

```
say-Derived
hello-Base 
```

我期待当调用 super.hello() 方法时，调用基类的 say() 方法而不是 Derived 类的 say() 方法。

这种逻辑背后的原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T09:50:15.263

**Super.hello() 调用this.say() which(this) 引用当前对象，即派生**，因此它调用派生类的say 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T09:55:42.633

因为`this` **-- 指向 --->**实例类型`Derived`

所以由于覆盖`Derived`类方法被调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T09:58:14.223

超级你好（）；从派生构造函数即派生类的对象引发。依次调用 this.say() 即derived.say()。所以这就是输出如此的原因。

# makefile - 将目标同义词添加到 makefile

> ID：13699968
> 
> 赞同：1
> 
> 时间：2012-12-04T09:45:11.423
> 
> 标签：makefile, gnu-make

我有`modules`目标的makefile。在不更改此目标的情况下，我想添加`all`应该将执行重定向到现有目标的`modules`目标。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:25:15.800

将目标所有的依赖项添加到目标模块，如下所示：

```
all: modules 
```

# java - 数据迁移。将 Select 语句拉入常量。在静态成员中使用非静态字段时遇到问题

> ID：13699970
> 
> 赞同：0
> 
> 时间：2012-12-04T09:45:12.660
> 
> 标签：java, sql, jdbc

我正在执行数据迁移作为一项任务。我应该将 Select Statements 提取到一个常量中

```
public static String Name = "SELECT column FROM table"; 
```

**问题：**我的问题是在 select 语句中有一个从 JAVA 代码传入的非静态变量。

```
"c.characid in (select characid from tr_charac where name='" + TRBaseSql.rewrapQuotes(characName) + "')" 
```

因此，当我将其拉入我的常数时，它会说。

```
public static String NEWQUERY = "select characid from tr_charac where name='" +TRBaseSql.rewrapQuotes(characName) + "')" 
```

它告诉我`characid`尚未定义，可能是因为 NEW 常量是静态的并且在运行时定义。

我应该如何让它与我的查询一起使用？

# android - (Mono For) Android EditText 显示当前值？

> ID：13699971
> 
> 赞同：1
> 
> 时间：2012-12-04T09:45:13.267
> 
> 标签：android, android-edittext, xamarin.android

我有一个 PreferenceActivity 屏幕，我在其中保存了一些值。（但我认为它不介意，如果它只是一个正常的活动）..

无论如何，目前它看起来像这样：

![在此处输入图像描述](../Images/0c6eb921896abeef5ebd58d95be2061a.png)

有 4 个 EditText 控件。它可以很好地保存值，但我希望存储/保存的当前值将显示在此编辑文本上，而无需先选择这些编辑文本之一，就可以看到它。

也许不知何故在 EditText 的第二行，**Protokoll**，然后在**深灰色的 Protokoll**地方，当前值，例如：***HTTP***

任何帮助，将不胜感激

# angularjs - Angular 指令没有正确绑定

> ID：13699972
> 
> 赞同：0
> 
> 时间：2012-12-04T09:45:14.437
> 
> 标签：angularjs

我有以下代码在页面加载时呈现

```
<div id="results">
 <%= render :partial => results %>
</div> 
```

以下是部分结果的内容：

```
<input type="text" ng-model="Myname" placeholder="Enter a name here">  
<h1>Hello {{Myname}} </h1> 
```

绑定正确发生并且工作正常。

现在，如果我`jQuery("#results")`用部分结果替换，那么内容将被替换，但指令不会被编译并且绑定也会被破坏。

在第一次加载页面时编译角度指令。但如果我们动态更改 HTML 内容，它就会中断。谁能帮我理解我在这里做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:18:07.130

你是对的，编译是在页面加载时发生的。或者每当角度改变 DOM 中的某些东西时（通过诸如 ngRepeat 等指令）

当您手动更改 DOM 时，您需要做的就是在您更改的 DOM 元素上触发 $compile。只要做`$compile(jQuery("#results"))`，绑定就可以了！[在这里](http://docs.angularjs.org/api/ng.%24compile)查看更多。

# python - 使用 urllib2 加载 URL 时如何设置 TCP_NODELAY 标志？

> ID：13699973
> 
> 赞同：13
> 
> 时间：2012-12-04T09:45:20.597
> 
> 标签：python, sockets, urllib2, urlopen, setsockopt

我正在使用 urllib2 加载网页，我的代码是：

```
httpRequest = urllib2.Request("http:/www....com")
pageContent = urllib2.urlopen(httpRequest)
pageContent.readline() 
```

如何获取要设置的套接字属性`TCP_NODELAY`？

在普通套接字中，我将使用函数：

```
socket.setsockopt(socket.IPPROTO_TCP, socket.TCP_NODELAY, 1) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-07-26T13:10:12.117

如果您需要访问所用套接字上的此类低级属性，则必须重载一些对象。

首先，您需要创建[HTTPHandler](http://docs.python.org/2/library/urllib2.html?highlight=urllib2#urllib2.HTTPHandler)的子类，在标准库中执行以下操作：

```
class HTTPHandler(AbstractHTTPHandler):

    def http_open(self, req):
        return self.do_open(httplib.HTTPConnection, req)

    http_request = AbstractHTTPHandler.do_request_ 
```

如您所见，它使用一个`HTTPConnection`打开连接...您也必须覆盖它；）以升级该`connect()`方法。

这样的事情应该是一个好的开始：

```
class LowLevelHTTPConnection(httplib.HTTPConnection):

    def connect(self):
        httplib.HTTPConnection.connect(self)
        self.sock.setsockopt(socket.IPPROTO_TCP, socket.TCP_NODELAY, 1)

class LowLevelHTTPHandler(HTTPHandler):

    def http_open(self, req):
        return self.do_open(LowLevelHTTPConnection, req) 
```

urllib2 足够聪明，可以让你继承一些处理程序然后使用它，[urllib2.build_opener](http://docs.python.org/2/library/urllib2.html?highlight=urllib2#urllib2.build_opener)就是为此而设计的：

```
urllib2.install_opener(urllib2.build_opener(LowLevelHTTPHandler)) # tell urllib2 to use your HTTPHandler in replacement of the standard HTTPHandler
httpRequest = urllib2.Request("http:/www....com")
pageContent = urllib2.urlopen(httpRequest)
pageContent.readline() 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-07-30T15:53:11.670

对于请求，类似乎在`request.packages.urllib3`; 有 2 个类，HTTPConnection 和 HTTPSConnection。它们应该可以在模块顶层进行monkeypatchable：

```
from requests.packages.urllib3 import connectionpool

_HTTPConnection = connectionpool.HTTPConnection
_HTTPSConnection = connectionpool.HTTPSConnection

class HTTPConnection(_HTTPConnection):
    def connect(self):
        _HTTPConnection.connect(self)
        self.sock.setsockopt(socket.IPPROTO_TCP, socket.TCP_NODELAY, 1)

class HTTPSConnection(_HTTPSConnection):
    def connect(self):
        _HTTPSConnection.connect(self)
        self.sock.setsockopt(socket.IPPROTO_TCP, socket.TCP_NODELAY, 1)

connectionpool.HTTPConnection = HTTPConnection
connectionpool.HTTPSConnection = HTTPSConnection 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-01T00:50:41.507

你必须使用urllib2吗？

或者，您可以使用设置了 TCP_NODELAY 选项的 httplib2。

[https://code.google.com/p/httplib2/](https://code.google.com/p/httplib2/)

它为您的项目添加了依赖项，但似乎没有猴子修补那么脆弱。

# java - Swing 自定义组件

> ID：13699975
> 
> 赞同：0
> 
> 时间：2012-12-04T09:45:28.523
> 
> 标签：java, database, swing, data-binding

我想使用 swing 创建自定义组件。我还想将数据库连接到该组件。

我想做的事，

我想创建一个自定义`JComboBox`. 该组合框名称是**仓库**。此外，数据库中的所有仓库都应绑定到该组合框。

当我设计一个表单时，我可以将该组合框用于仓库。当我运行程序时，所有仓库都会自动加载到组合中。因为该组合具有加载仓库的内部机制。（我怎么写那个东西？）

我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:17:23.207

我使用 SQL 数据库做了类似的事情。使用数据库时，您需要使用 ResultSet 接口来运行查询，并使用 Statement 类来创建语句。

```
public void makeCombo() throws SQLException{
public JComboBox warehouse = new JComboBox();           
try{
            Connection conn = Connect.getConnection();
            String query = "Select ?? FROM ??";
            Statement stmt = conn.createStatement();
            ResultSet rs = stmt.executeQuery(query);
            if (rs!=null){
                while (rs.next()){
                    String name = rs.getString(1);
                    warehouse.addItem(name);
                }

            }
            else{
                System.err.println ("Empty combo");
                warehouse.addItem("Empty Combo");
            }
        }
        catch(Exception e){
            e.printStackTrace();
        }

    } 
```

这应该使用查询结果填充仓库组合。

# javascript - 使用 javascript 处理组合框

> ID：13699980
> 
> 赞同：2
> 
> 时间：2012-12-04T09:45:45.357
> 
> 标签：javascript, jquery, combobox

我有一些组合框，需要选定组合框的值。

我这样做：
但不工作。

```
var check_combo_box_values = $('#combos .combo').filter(function() { 
                return this.selectedIndex === 0;
                }).map(function () 
                {
                    return $('option:selected', this).map(function() {
                    return parseInt(this.value);
                    }).get();
                }).get(); 
```

另一方面，这是有效的：

```
var combo_box_values = $('#combos .combo').filter(function() {
                return this.selectedIndex === 0;
                }).map(function () 
                {
                    return $('option:not(:selected)', this).map(function() {
                    return parseInt(this.value);
                    }).get();
                }).get(); 
```

我有第二个代码，并试图使其适应我的需要，第一次尝试出现了。似乎不正确（：错误在哪里？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:40:45.163

You're using `.filter()` this method filters the results from your first selection `$('#combos .combo')`. So from your filter you're only receiving the comboboxes that have their first option selected. If you wish to get all selected values of all comboboxes you need to remove the filter **or** reverse the filter in case you don't want those that have their first element selected (which is mostly a default element)

If you just generally wish all selected options you can just use this: [http://jsfiddle.net/nqTNH/](http://jsfiddle.net/nqTNH/)

# c++ - 将向量分散到变量 MPI 中

> ID：13699981
> 
> 赞同：1
> 
> 时间：2012-12-04T09:45:50.020
> 
> 标签：c++, mpi, scatter

我正在尝试从 rank = 0 的进程向所有其他进程 (1,2,3,4) 发送来自 vector 的值`n_pointsBuffer`。问题是只有进程 0 得到它的值，而其他进程没有。任何人都可以向我解释我是否可以尝试做什么，如果可以，怎么做？这是我第一次使用 MPI。

```
#include <mpi.h>
#include <iostream>
#include <cstdlib>
#include <cmath>

using namespace std;

int main(int argc, char* argv[]) {

MPI::Init(argc, argv);

int num_procs = MPI::COMM_WORLD.Get_size();
int rank = MPI::COMM_WORLD.Get_rank();

srand(getpid());
int n_points;

if (rank == 0) {
    int n_pointsBuffer[] = { 1000000, 1203100, 1231230, 1231000, 1312322 };
    MPI::COMM_WORLD.Scatter(n_pointsBuffer, 1, MPI::INT, &n_points, 1,
            MPI::INT, 0);
}

cout << "Rank = " << rank << ", n_points = " << n_points << "\n";

double sum = 0;

for (int i = 0; i < n_points; i++) {
    double x = rand() / ((double) (RAND_MAX));
    double f = 1.0 / (1.0 + x * x);
    sum += f;
}

double avg_sum = 0;
MPI::COMM_WORLD.Reduce(&sum, &avg_sum, 1, MPI::DOUBLE, MPI::SUM, 0);

if (rank == 0) {
    double pi = 4.0 * (avg_sum / num_procs / ((double) (n_points)));
    cout << "Pi is approx " << pi << " with error " << pi - M_PI << ".\n";
}

MPI::Finalize();

return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T09:53:32.380

这是因为每个人都要打电话`Scatter()`。不仅仅是根。引用另一个[答案](https://stackoverflow.com/questions/5879496/questions-about-mpi-scatter-executer-its-send-buffer-allocation)：

> MPI_Scatter 函数包含发送和接收逻辑。根进程（这里指定为0）发出数据，所有接收者都接收；每个参与的人都必须调用例程。Scatter 是 MPI 集体操作的一个示例，其中通信器中的所有任务都必须调用相同的例程。广播、屏障、归约操作和收集操作是其他示例。

请注意，这同样适用于**每个**集体操作。一个使用广播的例子在[这里](https://github.com/madaan/BVP-MPI-PROJECT/blob/master/SumNELe/sumN.c)（你也可以在同一个 repo 中找到一些其他的程序，这些是我写的，用来测试我的由转储机器组成的 MPI 集群）。

# maven - 如何使用 Maven 工件来配置声纳质量配置文件？

> ID：13699984
> 
> 赞同：0
> 
> 时间：2012-12-04T09:45:54.873
> 
> 标签：maven, sonarqube, code-analysis

对于我们的 CI 构建，我们使用了一套公司范围内的 PMD 和 Checkstyle 规则。它们被打包为内部存储库中的 Maven 工件，并在每次构建时被拉取。

我想在 Sonar 中使用这些相同的规则，但我发现的唯一方法是手动下载并解压缩规则，然后将它们单独导入到 Sonar 质量配置文件中。这有几个缺点 - 有更多工作要做，规则不会自动保持最新，并且 PMD 规则集的导入无法开箱即用 - 找不到引用的规则集。

有没有办法告诉 Sonar 从 Maven 存储库中提取具有通用规则的工件，或者有更好的方法来配置质量配置文件并使它们保持同步？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:23:07.853

Sonar 很久以前就停止支持此功能。

曾经有一个`sonar.reuseExistingRulesConfiguration`允许重用现有规则的方法。但这已从 sonar-2.3 中删除。看到[这个](http://jira.codehaus.org/browse/SONAR-1704)和[这个](http://jira.codehaus.org/browse/SONAR-1706)。

# http - http 多部分响应和边界

> ID：13699986
> 
> 赞同：4
> 
> 时间：2012-12-04T09:46:03.127
> 
> 标签：http

我正在考虑使用 HTTP 多部分来返回动态生成的二进制流（例如 mp4 视频剪辑），然后是签名文件，然后是单个 HTTP 响应消息中的其他内容到客户端。就我而言，在构建 http 标头字段时，mp4 的大小（响应消息的第一部分）是未知的，因此我无法为 mp4 部分设置 Content-Length。我将需要使用多部分边界来分隔每个部分。但是我被告知，如果边界字符串出现在 mp4 数据中，则多部分将不起作用。其他人建议对每个部分进行编码（例如 BASE64 编码），以便我可以选择一个带有非 BASE64 字符的边界，这些字符永远不会出现在 http 响应的任何部分中。问题是 BASE64 会将大小增加 33%，这是我们无法接受的开销。问题是：有没有办法解决这个问题？我错过了什么吗？或者您可能知道一种更好的方法（我们必须在一个 HTTP 响应中返回几个部分）？

非常感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:06:58.623

如果客户端理解消息格式，您总是可以剥离边界字符串，这样就不会有问题。

您将需要记住边界字符串并在数据流中查找它的结尾部分，并且仅将数据转发给位于这些部分之间的播放器。

# java - 与 java 持久性的单向 oneToMany 关系

> ID：13699987
> 
> 赞同：0
> 
> 时间：2012-12-04T09:46:18.633
> 
> 标签：java, jakarta-ee, jpa

我有一个`TimeTable`包含一组类型对象的类`Year`。A`Year`对 any 没有任何引用`TimeTable`。

在我的数据库中，关系是相反的：在`YEARS`表中是一个外键`TIME_TABLE_ID`。

我现在想将我的持久性注释添加到这些类中，但我找不到纯 JPA 的确切语法（仅适用于我目前不想使用的 Hibernate）。

我认为它可能是这样的：

```
class TimeTable{
....
@OneToMany
@JoinTable(name = "YEARS", 
  joinColumns = @JoinColumn(name = "TIME_TABLE_ID"), 
  inverseJoinColumns = @JoinColumn(name ="ID" ???))  // #### here ####
private Set<Year> years;
...
} 
```

..但我不知道这个 inverseJoinColumn 是什么:(它是表`ID`中条目的名称`TIMETABLE`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:57:14.167

反向连接列是可选的，我建议删除它，因为您设置了一对多关系并且不需要它。`@JoinTable`注释主要用于映射多对多关系，您不需要考虑这种情况。而不是`@JoinTable`用来`@JoinColumn`映射这个一对多的关系。

```
class TimeTable{
....
@OneToMany
@JoinColumn(name = "TIME_TABLE_ID"); 
private Set<Year> years;
...
} 
```

[http://www.objectdb.com/api/java/jpa/JoinColumn](http://www.objectdb.com/api/java/jpa/JoinColumn)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:54:03.720

ID对应Year Entity中的主键

# javascript - 在javascript中替换多个替换为单个 ？

> ID：13699995
> 
> 赞同：3
> 
> 时间：2012-12-04T09:46:43.703
> 
> 标签：javascript, html, regex

我想在文本`<br>`中用单个标签替换多个标签。`<br>`

我的文字喜欢，

```
<p>fhgfhgfhgfh</p>
<br><br>
<p>ghgfhfgh</p>
<br><br>
<p>fghfghfgh</p>
<br><br>
<p>fghfghfgh</p>
<br><br>
<p>fghfgh</p>
<br><br> 
```

`<br>`我如何用单个替换多个`<br>`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T09:49:09.000

试试这个

```
var str="<p>fhgfhgfhgfh</p><br><br><p>ghgfhfgh</p><br><br><p>";

var n=str.replace(/<br><br>/g,"<br>");

console.log(n); 
```

工作[**演示**](http://jsfiddle.net/Hw32q/)

**编辑**：上面适用于 2 个`br`标签，下面的代码应该处理任意数量的**br**标签。

```
var n = str.replace(/(<br>)+/g, '<br>'); 
```

工作[**演示**](http://jsfiddle.net/Hw32q/2/)

where`/.../`表示正则表达式，`(<br>)`表示`<br>`标记，`+`表示前一个表达式的一次或多次出现，finally`g`用于全局替换。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-04T09:50:55.247

这应该可以解决问题：

```
str.replace(/(?:<br>){2,}/g, '<br>') 
```

或者，如果它们可以在不同的行：

```
str.replace(/(?:<br>\s*){2,}/g, '<br>') 
```

# android - 释放密钥以签署多个 Android 应用程序

> ID：13699998
> 
> 赞同：2
> 
> 时间：2012-12-04T09:46:55.463
> 
> 标签：android, key, signing

您可以使用一个 my-release-key.keystore 来签署不同的应用程序，还是需要为每个应用程序使用不同的 my-release-key.keystore？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T09:52:57.327

这是直接从 Android 文档中提取的 - 粗体显示了重要的部分。

> 应用程序签名的某些方面可能会影响您处理应用程序开发的方式，尤其是在您计划发布多个应用程序时。
> 
> 一般来说，向所有开发人员推荐的策略是在应用程序的预期生命周期内**使用相同的证书对所有应用程序进行签名。**您应该这样做有几个原因：
> 
> *   应用程序升级 - 当您发布应用程序更新时，如果您希望用户无缝升级到新版本，您将希望继续使用相同的证书或证书集对更新进行签名。当系统安装应用程序更新时，它会将新版本中的证书与现有版本中的证书进行比较。如果证书完全匹配，包括证书数据和顺序，则系统允许更新。如果您在不使用匹配证书的情况下签署新版本，您还需要为应用程序分配一个不同的包名称——在这种情况下，用户将新版本安装为一个全新的应用程序。
> *   应用程序模块化——如果应用程序请求，Android 系统允许由相同证书签名的应用程序在同一进程中运行，以便系统将它们视为单个应用程序。通过这种方式，您可以将应用程序部署在模块中，并且用户可以根据需要独立更新每个模块。
> *   通过权限共享代码/数据——Android 系统提供基于签名的权限强制执行，以便应用程序可以向使用指定证书签名的另一个应用程序公开功能。通过使用相同的证书签署多个应用程序并使用基于签名的权限检查，您的应用程序可以以安全的方式共享代码和数据。

[文档](http://developer.android.com/tools/publishing/app-signing.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T09:53:32.597

你只需要一把钥匙。

在此处阅读有关它的更多信息[Android App Signing](http://developer.android.com/tools/publishing/app-signing.html)

# .net - 更改连接字符串 .NET Oracle 错误

> ID：13699999
> 
> 赞同：3
> 
> 时间：2012-12-04T09:46:58.163
> 
> 标签：.net, database, oracle, connection

我在 .NET Web 应用程序中使用 Oracle Data Provider for .NET (Oracle ODP.NET)，并使用 Entity Framework 连接到数据库。

当我创建实体数据模型时，在 Web.config 中，VS2010 创建一个连接字符串，如下所示：

```
<add name="eBoardingEntities" connectionString="metadata=res://*/Models.eBoardingModel.csdl|res://*/Models.eBoardingModel.ssdl|res://*/Models.eBoardingModel.msl;provider=Oracle.DataAccess.Client;provider connection string=&quot;DATA SOURCE=emobile;PASSWORD=CHECKIN_USER;PERSIST SECURITY INFO=True;USER ID=CHECKIN_USER&quot;" providerName="System.Data.EntityClient" /></connectionStrings> 
```

但是当我在生产环境中部署应用程序时，我将数据源更改为`"DATA SOURCE=emobileProduction"`.

生产环境中的应用程序不起作用。错误应用程序是：`"Table or view not found"`。应用程序未连接到数据库。

为了使其工作，我需要取消实体数据模型并使用与生产数据库的新连接重新生成它。

有什么帮助不重新生成实体数据模型，而不必重置与生产数据库的连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:55:57.003

我解决了！！！

在 oracle 中，用户的名称是模式的名称。

在生产中，我有用户 CHECKIN，而在开发环境中，用户是 CHECKIN_USER。

出于这个原因，方案有不同的名称，并且在开发环境中生成的实体模型与生产环境不同。

大家加油！！！

再见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T08:57:49.863

错误“找不到表或视图”可能意味着两件事：

*   表或视图确实不在数据库中。我怀疑这不是你的情况。
*   连接到数据库的用户没有使用该表的权限。如果用户没有直接或通过角色被授予对表的 SELECT 权限，则用户将无法从中进行选择。这是一个常见的疏忽，我建议您检查一下。

检查它的最简单方法是通过 PL/SQL Developer og SQL Navigator 之类的工具作为您正在使用的用户连接到数据库，然后尝试从表中进行选择。您还可以以具有很多权限的用户身份连接到数据库并查询系统视图。

EF 的连接字符串对我来说似乎可以用于生产。您在 web.config 中设置它，最重要的部分是数据源和用户规范。